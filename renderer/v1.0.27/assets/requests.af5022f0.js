var w=Object.defineProperty,I=Object.defineProperties;var P=Object.getOwnPropertyDescriptors;var p=Object.getOwnPropertySymbols;var L=Object.prototype.hasOwnProperty,v=Object.prototype.propertyIsEnumerable;var d=(t,e,o)=>e in t?w(t,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[e]=o,y=(t,e)=>{for(var o in e||(e={}))L.call(e,o)&&d(t,o,e[o]);if(p)for(var o of p(e))v.call(e,o)&&d(t,o,e[o]);return t},u=(t,e)=>I(t,P(e));import{C as r,g as m,a as j,b as A,h as b}from"./compositor.bd18fd7f.js";const C=async(t,e,o)=>{const{backgroundImage:s,layout:i,layoutProps:c={}}=o,a=await r.compositor.createProject({props:{name:"Root",type:"sceneless-project",layout:"Layered",size:e,isRoot:!0}},t),n=a.getRoot(),l=await Promise.all([a.insert({name:"Background",id:"bg",tagName:"img",sourceType:"Element",attributes:{src:s},style:{objectFit:"cover"}},n.id),a.insert({id:"content",name:"Content",layout:i,layoutProps:c},n.id),a.insert({id:"foreground",name:"Overlays",layout:"Free"},n.id)]);return await a.reorder(n.id,l),a},k=async t=>{const e=m().id,o=t.type||"sceneless",s=t.size||{x:1280,y:720},i=t.settings||{};let c=await r.clients.LiveApi().project.createProject({collectionId:e,rendering:{video:{width:s.x,height:s.y,framerate:30}},composition:{studioSdk:{}},metadata:{},webrtc:{hosted:{}}});const a=await r.clients.LayoutApi().layout.createLayout({layout:{projectId:c.project.projectId,collectionId:c.project.collectionId}}),{displayName:n}=j(),l={type:o,layoutId:a.id,hostDisplayName:n,props:t.props||{}};let g=await r.clients.LiveApi().project.updateProject({collectionId:e,projectId:c.project.projectId,updateMask:["metadata"],metadata:l});return c.project=g.project,c.project.metadata=l,o==="sceneless"?await C(a.id,s,i):await r.compositor.createProject({props:u(y({name:"Root",layout:"Free"},i),{isRoot:!0,size:s})},a.id),c},x=async t=>{const{projectId:e}=t,o=A(e),s=m().id;await Promise.all([r.clients.LiveApi().project.deleteProject({collectionId:s,projectId:e}),r.clients.LayoutApi().layout.deleteLayout({layoutId:o.layoutApi.layoutId})])},N=async()=>{var c;const t=await h();let e;const{displayName:o,serviceUserId:s}=j();t.length===0?e=(await r.clients.LiveApi().collection.createCollection({metadata:{serviceUserId:s,displayName:o,props:{}}})).collection:e=t[0],await r.clients.LiveApi().subscribeToCollection(e.collectionId);const i=await Promise.all(e.projects.map(a=>b(a,"ROLE_HOST")));return{user:{id:e.collectionId,metadata:e.metadata,props:((c=e.metadata)==null?void 0:c.props)||{},name:o},projects:i,sources:e.sources}},h=async()=>(await r.clients.LiveApi().collection.getCollections({})).collections;export{k as createProject,x as deleteProject,h as loadCollections,N as loadUser};
//# sourceMappingURL=requests.af5022f0.js.map
