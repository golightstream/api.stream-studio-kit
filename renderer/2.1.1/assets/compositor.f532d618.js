const p$1=function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const h of document.querySelectorAll('link[rel="modulepreload"]'))c(h);new MutationObserver(h=>{for(const b of h)if(b.type==="childList")for(const _ of b.addedNodes)_.tagName==="LINK"&&_.rel==="modulepreload"&&c(_)}).observe(document,{childList:!0,subtree:!0});function d(h){const b={};return h.integrity&&(b.integrity=h.integrity),h.referrerpolicy&&(b.referrerPolicy=h.referrerpolicy),h.crossorigin==="use-credentials"?b.credentials="include":h.crossorigin==="anonymous"?b.credentials="omit":b.credentials="same-origin",b}function c(h){if(h.ep)return;h.ep=!0;const b=d(h);fetch(h.href,b)}};p$1();var renderer="";const scriptRel="modulepreload",seen={},base="/studiokit/renderer/2.1.1/",__vitePreload=function(s,d){return!d||d.length===0?s():Promise.all(d.map(c=>{if(c=`${base}${c}`,c in seen)return;seen[c]=!0;const h=c.endsWith(".css"),b=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${b}`))return;const _=document.createElement("link");if(_.rel=h?"stylesheet":scriptRel,h||(_.as="script",_.crossOrigin=""),_.href=c,document.head.appendChild(_),h)return new Promise(($,_e)=>{_.addEventListener("load",$),_.addEventListener("error",()=>_e(new Error(`Unable to preload CSS for ${c}`)))})})).then(()=>s())};let currentSubId=0;const subscribers=new Map,subscribersInternal=new Map;function createSubscribe(a={}){return function(s){if(typeof s!="function")return;const d=a.internal?subscribersInternal:subscribers,c=++currentSubId;return d.set(c,s),()=>{d.delete(c)}}}function createOn(a={}){return function(s,d){return(a.internal?subscribeInternal:subscribe)((h,b)=>{if(s===h)return d(b)})}}function createTrigger(a={}){const s=a.internal?subscribersInternal:subscribers;return async function(d,...c){let h={type:d,payload:c[0]};const b=Boolean(a.internal)?"Internal":"External";log$1.info(`${b} Event:`,h),await Promise.all(Array.from(s.values()).map(_=>_(h.type,h.payload)))}}const trigger$1=createTrigger(),subscribe=createSubscribe(),on=createOn(),triggerInternal$1=createTrigger({internal:!0}),subscribeInternal=createSubscribe({internal:!0}),onInternal=createOn({internal:!0});var commonjsGlobal$1=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function getAugmentedNamespace(a){if(a.__esModule)return a;var s=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(a).forEach(function(d){var c=Object.getOwnPropertyDescriptor(a,d);Object.defineProperty(s,d,c.get?c:{enumerable:!0,get:function(){return a[d]}})}),s}var loglevel$1={exports:{}};(function(a){(function(s,d){a.exports?a.exports=d():s.log=d()})(commonjsGlobal$1,function(){var s=function(){},d="undefined",c=typeof window!==d&&typeof window.navigator!==d&&/Trident\/|MSIE /.test(window.navigator.userAgent),h=["trace","debug","info","warn","error"];function b(dt,ut){var ht=dt[ut];if(typeof ht.bind=="function")return ht.bind(dt);try{return Function.prototype.bind.call(ht,dt)}catch{return function(){return Function.prototype.apply.apply(ht,[dt,arguments])}}}function _(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function $(dt){return dt==="debug"&&(dt="log"),typeof console===d?!1:dt==="trace"&&c?_:console[dt]!==void 0?b(console,dt):console.log!==void 0?b(console,"log"):s}function _e(dt,ut){for(var ht=0;ht<h.length;ht++){var nt=h[ht];this[nt]=ht<dt?s:this.methodFactory(nt,dt,ut)}this.log=this.debug}function tt(dt,ut,ht){return function(){typeof console!==d&&(_e.call(this,ut,ht),this[dt].apply(this,arguments))}}function rt(dt,ut,ht){return $(dt)||tt.apply(this,arguments)}function ot(dt,ut,ht){var nt=this,ct;ut=ut==null?"WARN":ut;var mt="loglevel";typeof dt=="string"?mt+=":"+dt:typeof dt=="symbol"&&(mt=void 0);function kt(gt){var Ct=(h[gt]||"silent").toUpperCase();if(!(typeof window===d||!mt)){try{window.localStorage[mt]=Ct;return}catch{}try{window.document.cookie=encodeURIComponent(mt)+"="+Ct+";"}catch{}}}function Tt(){var gt;if(!(typeof window===d||!mt)){try{gt=window.localStorage[mt]}catch{}if(typeof gt===d)try{var Ct=window.document.cookie,Nt=Ct.indexOf(encodeURIComponent(mt)+"=");Nt!==-1&&(gt=/^([^;]+)/.exec(Ct.slice(Nt))[1])}catch{}return nt.levels[gt]===void 0&&(gt=void 0),gt}}function Pt(){if(!(typeof window===d||!mt)){try{window.localStorage.removeItem(mt);return}catch{}try{window.document.cookie=encodeURIComponent(mt)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch{}}}nt.name=dt,nt.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},nt.methodFactory=ht||rt,nt.getLevel=function(){return ct},nt.setLevel=function(gt,Ct){if(typeof gt=="string"&&nt.levels[gt.toUpperCase()]!==void 0&&(gt=nt.levels[gt.toUpperCase()]),typeof gt=="number"&&gt>=0&&gt<=nt.levels.SILENT){if(ct=gt,Ct!==!1&&kt(gt),_e.call(nt,gt,dt),typeof console===d&&gt<nt.levels.SILENT)return"No console available for logging"}else throw"log.setLevel() called with invalid level: "+gt},nt.setDefaultLevel=function(gt){ut=gt,Tt()||nt.setLevel(gt,!1)},nt.resetLevel=function(){nt.setLevel(ut,!1),Pt()},nt.enableAll=function(gt){nt.setLevel(nt.levels.TRACE,gt)},nt.disableAll=function(gt){nt.setLevel(nt.levels.SILENT,gt)};var At=Tt();At==null&&(At=ut),nt.setLevel(At,!1)}var it=new ot,st={};it.getLogger=function(ut){if(typeof ut!="symbol"&&typeof ut!="string"||ut==="")throw new TypeError("You must supply a name when creating a logger.");var ht=st[ut];return ht||(ht=st[ut]=new ot(ut,it.getLevel(),it.methodFactory)),ht};var lt=typeof window!==d?window.log:void 0;return it.noConflict=function(){return typeof window!==d&&window.log===it&&(window.log=lt),it},it.getLoggers=function(){return st},it.default=it,it})})(loglevel$1);var log$1=loglevel$1.exports;const connectionId$1=(Math.random()*1e20).toString(36),version$5="2.1.1",CoreContext={config:null,clients:null,Request:{},Command:{},on,subscribe,onInternal,subscribeInternal,trigger:trigger$1,triggerInternal:triggerInternal$1,state:{},compositor:{},connectionId:connectionId$1,version:version$5,rendererVersion:version$5,log:log$1,logLevel:null},setAppState=a=>{Object.keys(a).forEach(s=>{CoreContext.state[s]=a[s]})};var freeGlobal=typeof global=="object"&&global&&global.Object===Object&&global,freeGlobal$1=freeGlobal,freeSelf=typeof self=="object"&&self&&self.Object===Object&&self,root=freeGlobal$1||freeSelf||Function("return this")(),root$1=root,Symbol$1=root$1.Symbol,Symbol$2=Symbol$1,objectProto$f=Object.prototype,hasOwnProperty$e=objectProto$f.hasOwnProperty,nativeObjectToString$1=objectProto$f.toString,symToStringTag$1=Symbol$2?Symbol$2.toStringTag:void 0;function getRawTag(a){var s=hasOwnProperty$e.call(a,symToStringTag$1),d=a[symToStringTag$1];try{a[symToStringTag$1]=void 0;var c=!0}catch{}var h=nativeObjectToString$1.call(a);return c&&(s?a[symToStringTag$1]=d:delete a[symToStringTag$1]),h}var objectProto$e=Object.prototype,nativeObjectToString=objectProto$e.toString;function objectToString(a){return nativeObjectToString.call(a)}var nullTag="[object Null]",undefinedTag="[object Undefined]",symToStringTag=Symbol$2?Symbol$2.toStringTag:void 0;function baseGetTag(a){return a==null?a===void 0?undefinedTag:nullTag:symToStringTag&&symToStringTag in Object(a)?getRawTag(a):objectToString(a)}function isObjectLike(a){return a!=null&&typeof a=="object"}var symbolTag$3="[object Symbol]";function isSymbol(a){return typeof a=="symbol"||isObjectLike(a)&&baseGetTag(a)==symbolTag$3}function arrayMap(a,s){for(var d=-1,c=a==null?0:a.length,h=Array(c);++d<c;)h[d]=s(a[d],d,a);return h}var isArray$3=Array.isArray,isArray$4=isArray$3,INFINITY$1=1/0,symbolProto$2=Symbol$2?Symbol$2.prototype:void 0,symbolToString=symbolProto$2?symbolProto$2.toString:void 0;function baseToString(a){if(typeof a=="string")return a;if(isArray$4(a))return arrayMap(a,baseToString)+"";if(isSymbol(a))return symbolToString?symbolToString.call(a):"";var s=a+"";return s=="0"&&1/a==-INFINITY$1?"-0":s}var reWhitespace=/\s/;function trimmedEndIndex(a){for(var s=a.length;s--&&reWhitespace.test(a.charAt(s)););return s}var reTrimStart=/^\s+/;function baseTrim(a){return a&&a.slice(0,trimmedEndIndex(a)+1).replace(reTrimStart,"")}function isObject$5(a){var s=typeof a;return a!=null&&(s=="object"||s=="function")}var NAN=0/0,reIsBadHex=/^[-+]0x[0-9a-f]+$/i,reIsBinary=/^0b[01]+$/i,reIsOctal=/^0o[0-7]+$/i,freeParseInt=parseInt;function toNumber(a){if(typeof a=="number")return a;if(isSymbol(a))return NAN;if(isObject$5(a)){var s=typeof a.valueOf=="function"?a.valueOf():a;a=isObject$5(s)?s+"":s}if(typeof a!="string")return a===0?a:+a;a=baseTrim(a);var d=reIsBinary.test(a);return d||reIsOctal.test(a)?freeParseInt(a.slice(2),d?2:8):reIsBadHex.test(a)?NAN:+a}function identity$1(a){return a}var asyncTag="[object AsyncFunction]",funcTag$2="[object Function]",genTag$1="[object GeneratorFunction]",proxyTag="[object Proxy]";function isFunction$3(a){if(!isObject$5(a))return!1;var s=baseGetTag(a);return s==funcTag$2||s==genTag$1||s==asyncTag||s==proxyTag}var coreJsData=root$1["__core-js_shared__"],coreJsData$1=coreJsData,maskSrcKey=function(){var a=/[^.]+$/.exec(coreJsData$1&&coreJsData$1.keys&&coreJsData$1.keys.IE_PROTO||"");return a?"Symbol(src)_1."+a:""}();function isMasked(a){return!!maskSrcKey&&maskSrcKey in a}var funcProto$2=Function.prototype,funcToString$2=funcProto$2.toString;function toSource(a){if(a!=null){try{return funcToString$2.call(a)}catch{}try{return a+""}catch{}}return""}var reRegExpChar=/[\\^$.*+?()[\]{}|]/g,reIsHostCtor=/^\[object .+?Constructor\]$/,funcProto$1=Function.prototype,objectProto$d=Object.prototype,funcToString$1=funcProto$1.toString,hasOwnProperty$d=objectProto$d.hasOwnProperty,reIsNative=RegExp("^"+funcToString$1.call(hasOwnProperty$d).replace(reRegExpChar,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function baseIsNative(a){if(!isObject$5(a)||isMasked(a))return!1;var s=isFunction$3(a)?reIsNative:reIsHostCtor;return s.test(toSource(a))}function getValue(a,s){return a==null?void 0:a[s]}function getNative(a,s){var d=getValue(a,s);return baseIsNative(d)?d:void 0}var WeakMap$2=getNative(root$1,"WeakMap"),WeakMap$3=WeakMap$2,objectCreate$1=Object.create,baseCreate=function(){function a(){}return function(s){if(!isObject$5(s))return{};if(objectCreate$1)return objectCreate$1(s);a.prototype=s;var d=new a;return a.prototype=void 0,d}}(),baseCreate$1=baseCreate;function apply(a,s,d){switch(d.length){case 0:return a.call(s);case 1:return a.call(s,d[0]);case 2:return a.call(s,d[0],d[1]);case 3:return a.call(s,d[0],d[1],d[2])}return a.apply(s,d)}function copyArray(a,s){var d=-1,c=a.length;for(s||(s=Array(c));++d<c;)s[d]=a[d];return s}var HOT_COUNT=800,HOT_SPAN=16,nativeNow=Date.now;function shortOut(a){var s=0,d=0;return function(){var c=nativeNow(),h=HOT_SPAN-(c-d);if(d=c,h>0){if(++s>=HOT_COUNT)return arguments[0]}else s=0;return a.apply(void 0,arguments)}}function constant(a){return function(){return a}}var defineProperty$1=function(){try{var a=getNative(Object,"defineProperty");return a({},"",{}),a}catch{}}(),defineProperty$2=defineProperty$1,baseSetToString=defineProperty$2?function(a,s){return defineProperty$2(a,"toString",{configurable:!0,enumerable:!1,value:constant(s),writable:!0})}:identity$1,baseSetToString$1=baseSetToString,setToString=shortOut(baseSetToString$1),setToString$1=setToString;function arrayEach(a,s){for(var d=-1,c=a==null?0:a.length;++d<c&&s(a[d],d,a)!==!1;);return a}function baseFindIndex(a,s,d,c){for(var h=a.length,b=d+(c?1:-1);c?b--:++b<h;)if(s(a[b],b,a))return b;return-1}function baseIsNaN(a){return a!==a}function strictIndexOf(a,s,d){for(var c=d-1,h=a.length;++c<h;)if(a[c]===s)return c;return-1}function baseIndexOf(a,s,d){return s===s?strictIndexOf(a,s,d):baseFindIndex(a,baseIsNaN,d)}var MAX_SAFE_INTEGER$1=9007199254740991,reIsUint=/^(?:0|[1-9]\d*)$/;function isIndex(a,s){var d=typeof a;return s=s==null?MAX_SAFE_INTEGER$1:s,!!s&&(d=="number"||d!="symbol"&&reIsUint.test(a))&&a>-1&&a%1==0&&a<s}function baseAssignValue(a,s,d){s=="__proto__"&&defineProperty$2?defineProperty$2(a,s,{configurable:!0,enumerable:!0,value:d,writable:!0}):a[s]=d}function eq(a,s){return a===s||a!==a&&s!==s}var objectProto$c=Object.prototype,hasOwnProperty$c=objectProto$c.hasOwnProperty;function assignValue(a,s,d){var c=a[s];(!(hasOwnProperty$c.call(a,s)&&eq(c,d))||d===void 0&&!(s in a))&&baseAssignValue(a,s,d)}function copyObject(a,s,d,c){var h=!d;d||(d={});for(var b=-1,_=s.length;++b<_;){var $=s[b],_e=c?c(d[$],a[$],$,d,a):void 0;_e===void 0&&(_e=a[$]),h?baseAssignValue(d,$,_e):assignValue(d,$,_e)}return d}var nativeMax$1=Math.max;function overRest(a,s,d){return s=nativeMax$1(s===void 0?a.length-1:s,0),function(){for(var c=arguments,h=-1,b=nativeMax$1(c.length-s,0),_=Array(b);++h<b;)_[h]=c[s+h];h=-1;for(var $=Array(s+1);++h<s;)$[h]=c[h];return $[s]=d(_),apply(a,this,$)}}function baseRest(a,s){return setToString$1(overRest(a,s,identity$1),a+"")}var MAX_SAFE_INTEGER=9007199254740991;function isLength(a){return typeof a=="number"&&a>-1&&a%1==0&&a<=MAX_SAFE_INTEGER}function isArrayLike$1(a){return a!=null&&isLength(a.length)&&!isFunction$3(a)}function isIterateeCall(a,s,d){if(!isObject$5(d))return!1;var c=typeof s;return(c=="number"?isArrayLike$1(d)&&isIndex(s,d.length):c=="string"&&s in d)?eq(d[s],a):!1}var objectProto$b=Object.prototype;function isPrototype(a){var s=a&&a.constructor,d=typeof s=="function"&&s.prototype||objectProto$b;return a===d}function baseTimes(a,s){for(var d=-1,c=Array(a);++d<a;)c[d]=s(d);return c}var argsTag$3="[object Arguments]";function baseIsArguments(a){return isObjectLike(a)&&baseGetTag(a)==argsTag$3}var objectProto$a=Object.prototype,hasOwnProperty$b=objectProto$a.hasOwnProperty,propertyIsEnumerable$1=objectProto$a.propertyIsEnumerable,isArguments=baseIsArguments(function(){return arguments}())?baseIsArguments:function(a){return isObjectLike(a)&&hasOwnProperty$b.call(a,"callee")&&!propertyIsEnumerable$1.call(a,"callee")},isArguments$1=isArguments;function stubFalse(){return!1}var freeExports$2=typeof exports=="object"&&exports&&!exports.nodeType&&exports,freeModule$2=freeExports$2&&typeof module=="object"&&module&&!module.nodeType&&module,moduleExports$2=freeModule$2&&freeModule$2.exports===freeExports$2,Buffer$2=moduleExports$2?root$1.Buffer:void 0,nativeIsBuffer=Buffer$2?Buffer$2.isBuffer:void 0,isBuffer$1=nativeIsBuffer||stubFalse,isBuffer$2=isBuffer$1,argsTag$2="[object Arguments]",arrayTag$2="[object Array]",boolTag$3="[object Boolean]",dateTag$3="[object Date]",errorTag$2="[object Error]",funcTag$1="[object Function]",mapTag$5="[object Map]",numberTag$3="[object Number]",objectTag$4="[object Object]",regexpTag$3="[object RegExp]",setTag$5="[object Set]",stringTag$3="[object String]",weakMapTag$2="[object WeakMap]",arrayBufferTag$3="[object ArrayBuffer]",dataViewTag$4="[object DataView]",float32Tag$2="[object Float32Array]",float64Tag$2="[object Float64Array]",int8Tag$2="[object Int8Array]",int16Tag$2="[object Int16Array]",int32Tag$2="[object Int32Array]",uint8Tag$2="[object Uint8Array]",uint8ClampedTag$2="[object Uint8ClampedArray]",uint16Tag$2="[object Uint16Array]",uint32Tag$2="[object Uint32Array]",typedArrayTags={};typedArrayTags[float32Tag$2]=typedArrayTags[float64Tag$2]=typedArrayTags[int8Tag$2]=typedArrayTags[int16Tag$2]=typedArrayTags[int32Tag$2]=typedArrayTags[uint8Tag$2]=typedArrayTags[uint8ClampedTag$2]=typedArrayTags[uint16Tag$2]=typedArrayTags[uint32Tag$2]=!0;typedArrayTags[argsTag$2]=typedArrayTags[arrayTag$2]=typedArrayTags[arrayBufferTag$3]=typedArrayTags[boolTag$3]=typedArrayTags[dataViewTag$4]=typedArrayTags[dateTag$3]=typedArrayTags[errorTag$2]=typedArrayTags[funcTag$1]=typedArrayTags[mapTag$5]=typedArrayTags[numberTag$3]=typedArrayTags[objectTag$4]=typedArrayTags[regexpTag$3]=typedArrayTags[setTag$5]=typedArrayTags[stringTag$3]=typedArrayTags[weakMapTag$2]=!1;function baseIsTypedArray(a){return isObjectLike(a)&&isLength(a.length)&&!!typedArrayTags[baseGetTag(a)]}function baseUnary(a){return function(s){return a(s)}}var freeExports$1=typeof exports=="object"&&exports&&!exports.nodeType&&exports,freeModule$1=freeExports$1&&typeof module=="object"&&module&&!module.nodeType&&module,moduleExports$1=freeModule$1&&freeModule$1.exports===freeExports$1,freeProcess=moduleExports$1&&freeGlobal$1.process,nodeUtil=function(){try{var a=freeModule$1&&freeModule$1.require&&freeModule$1.require("util").types;return a||freeProcess&&freeProcess.binding&&freeProcess.binding("util")}catch{}}(),nodeUtil$1=nodeUtil,nodeIsTypedArray=nodeUtil$1&&nodeUtil$1.isTypedArray,isTypedArray=nodeIsTypedArray?baseUnary(nodeIsTypedArray):baseIsTypedArray,isTypedArray$1=isTypedArray,objectProto$9=Object.prototype,hasOwnProperty$a=objectProto$9.hasOwnProperty;function arrayLikeKeys(a,s){var d=isArray$4(a),c=!d&&isArguments$1(a),h=!d&&!c&&isBuffer$2(a),b=!d&&!c&&!h&&isTypedArray$1(a),_=d||c||h||b,$=_?baseTimes(a.length,String):[],_e=$.length;for(var tt in a)(s||hasOwnProperty$a.call(a,tt))&&!(_&&(tt=="length"||h&&(tt=="offset"||tt=="parent")||b&&(tt=="buffer"||tt=="byteLength"||tt=="byteOffset")||isIndex(tt,_e)))&&$.push(tt);return $}function overArg(a,s){return function(d){return a(s(d))}}var nativeKeys=overArg(Object.keys,Object),nativeKeys$1=nativeKeys,objectProto$8=Object.prototype,hasOwnProperty$9=objectProto$8.hasOwnProperty;function baseKeys(a){if(!isPrototype(a))return nativeKeys$1(a);var s=[];for(var d in Object(a))hasOwnProperty$9.call(a,d)&&d!="constructor"&&s.push(d);return s}function keys$1(a){return isArrayLike$1(a)?arrayLikeKeys(a):baseKeys(a)}function nativeKeysIn(a){var s=[];if(a!=null)for(var d in Object(a))s.push(d);return s}var objectProto$7=Object.prototype,hasOwnProperty$8=objectProto$7.hasOwnProperty;function baseKeysIn(a){if(!isObject$5(a))return nativeKeysIn(a);var s=isPrototype(a),d=[];for(var c in a)c=="constructor"&&(s||!hasOwnProperty$8.call(a,c))||d.push(c);return d}function keysIn(a){return isArrayLike$1(a)?arrayLikeKeys(a,!0):baseKeysIn(a)}var reIsDeepProp=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,reIsPlainProp=/^\w*$/;function isKey(a,s){if(isArray$4(a))return!1;var d=typeof a;return d=="number"||d=="symbol"||d=="boolean"||a==null||isSymbol(a)?!0:reIsPlainProp.test(a)||!reIsDeepProp.test(a)||s!=null&&a in Object(s)}var nativeCreate=getNative(Object,"create"),nativeCreate$1=nativeCreate;function hashClear(){this.__data__=nativeCreate$1?nativeCreate$1(null):{},this.size=0}function hashDelete(a){var s=this.has(a)&&delete this.__data__[a];return this.size-=s?1:0,s}var HASH_UNDEFINED$2="__lodash_hash_undefined__",objectProto$6=Object.prototype,hasOwnProperty$7=objectProto$6.hasOwnProperty;function hashGet(a){var s=this.__data__;if(nativeCreate$1){var d=s[a];return d===HASH_UNDEFINED$2?void 0:d}return hasOwnProperty$7.call(s,a)?s[a]:void 0}var objectProto$5=Object.prototype,hasOwnProperty$6=objectProto$5.hasOwnProperty;function hashHas(a){var s=this.__data__;return nativeCreate$1?s[a]!==void 0:hasOwnProperty$6.call(s,a)}var HASH_UNDEFINED$1="__lodash_hash_undefined__";function hashSet(a,s){var d=this.__data__;return this.size+=this.has(a)?0:1,d[a]=nativeCreate$1&&s===void 0?HASH_UNDEFINED$1:s,this}function Hash(a){var s=-1,d=a==null?0:a.length;for(this.clear();++s<d;){var c=a[s];this.set(c[0],c[1])}}Hash.prototype.clear=hashClear;Hash.prototype.delete=hashDelete;Hash.prototype.get=hashGet;Hash.prototype.has=hashHas;Hash.prototype.set=hashSet;function listCacheClear(){this.__data__=[],this.size=0}function assocIndexOf(a,s){for(var d=a.length;d--;)if(eq(a[d][0],s))return d;return-1}var arrayProto$1=Array.prototype,splice$1=arrayProto$1.splice;function listCacheDelete(a){var s=this.__data__,d=assocIndexOf(s,a);if(d<0)return!1;var c=s.length-1;return d==c?s.pop():splice$1.call(s,d,1),--this.size,!0}function listCacheGet(a){var s=this.__data__,d=assocIndexOf(s,a);return d<0?void 0:s[d][1]}function listCacheHas(a){return assocIndexOf(this.__data__,a)>-1}function listCacheSet(a,s){var d=this.__data__,c=assocIndexOf(d,a);return c<0?(++this.size,d.push([a,s])):d[c][1]=s,this}function ListCache(a){var s=-1,d=a==null?0:a.length;for(this.clear();++s<d;){var c=a[s];this.set(c[0],c[1])}}ListCache.prototype.clear=listCacheClear;ListCache.prototype.delete=listCacheDelete;ListCache.prototype.get=listCacheGet;ListCache.prototype.has=listCacheHas;ListCache.prototype.set=listCacheSet;var Map$1=getNative(root$1,"Map"),Map$2=Map$1;function mapCacheClear(){this.size=0,this.__data__={hash:new Hash,map:new(Map$2||ListCache),string:new Hash}}function isKeyable(a){var s=typeof a;return s=="string"||s=="number"||s=="symbol"||s=="boolean"?a!=="__proto__":a===null}function getMapData(a,s){var d=a.__data__;return isKeyable(s)?d[typeof s=="string"?"string":"hash"]:d.map}function mapCacheDelete(a){var s=getMapData(this,a).delete(a);return this.size-=s?1:0,s}function mapCacheGet(a){return getMapData(this,a).get(a)}function mapCacheHas(a){return getMapData(this,a).has(a)}function mapCacheSet(a,s){var d=getMapData(this,a),c=d.size;return d.set(a,s),this.size+=d.size==c?0:1,this}function MapCache(a){var s=-1,d=a==null?0:a.length;for(this.clear();++s<d;){var c=a[s];this.set(c[0],c[1])}}MapCache.prototype.clear=mapCacheClear;MapCache.prototype.delete=mapCacheDelete;MapCache.prototype.get=mapCacheGet;MapCache.prototype.has=mapCacheHas;MapCache.prototype.set=mapCacheSet;var FUNC_ERROR_TEXT$1="Expected a function";function memoize(a,s){if(typeof a!="function"||s!=null&&typeof s!="function")throw new TypeError(FUNC_ERROR_TEXT$1);var d=function(){var c=arguments,h=s?s.apply(this,c):c[0],b=d.cache;if(b.has(h))return b.get(h);var _=a.apply(this,c);return d.cache=b.set(h,_)||b,_};return d.cache=new(memoize.Cache||MapCache),d}memoize.Cache=MapCache;var MAX_MEMOIZE_SIZE=500;function memoizeCapped(a){var s=memoize(a,function(c){return d.size===MAX_MEMOIZE_SIZE&&d.clear(),c}),d=s.cache;return s}var rePropName=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,reEscapeChar=/\\(\\)?/g,stringToPath=memoizeCapped(function(a){var s=[];return a.charCodeAt(0)===46&&s.push(""),a.replace(rePropName,function(d,c,h,b){s.push(h?b.replace(reEscapeChar,"$1"):c||d)}),s}),stringToPath$1=stringToPath;function toString$1(a){return a==null?"":baseToString(a)}function castPath(a,s){return isArray$4(a)?a:isKey(a,s)?[a]:stringToPath$1(toString$1(a))}var INFINITY=1/0;function toKey(a){if(typeof a=="string"||isSymbol(a))return a;var s=a+"";return s=="0"&&1/a==-INFINITY?"-0":s}function baseGet(a,s){s=castPath(s,a);for(var d=0,c=s.length;a!=null&&d<c;)a=a[toKey(s[d++])];return d&&d==c?a:void 0}function get(a,s,d){var c=a==null?void 0:baseGet(a,s);return c===void 0?d:c}function arrayPush(a,s){for(var d=-1,c=s.length,h=a.length;++d<c;)a[h+d]=s[d];return a}var spreadableSymbol=Symbol$2?Symbol$2.isConcatSpreadable:void 0;function isFlattenable(a){return isArray$4(a)||isArguments$1(a)||!!(spreadableSymbol&&a&&a[spreadableSymbol])}function baseFlatten(a,s,d,c,h){var b=-1,_=a.length;for(d||(d=isFlattenable),h||(h=[]);++b<_;){var $=a[b];s>0&&d($)?s>1?baseFlatten($,s-1,d,c,h):arrayPush(h,$):c||(h[h.length]=$)}return h}function flatten(a){var s=a==null?0:a.length;return s?baseFlatten(a,1):[]}function flatRest(a){return setToString$1(overRest(a,void 0,flatten),a+"")}var getPrototype=overArg(Object.getPrototypeOf,Object),getPrototype$1=getPrototype,objectTag$3="[object Object]",funcProto=Function.prototype,objectProto$4=Object.prototype,funcToString=funcProto.toString,hasOwnProperty$5=objectProto$4.hasOwnProperty,objectCtorString=funcToString.call(Object);function isPlainObject$1(a){if(!isObjectLike(a)||baseGetTag(a)!=objectTag$3)return!1;var s=getPrototype$1(a);if(s===null)return!0;var d=hasOwnProperty$5.call(s,"constructor")&&s.constructor;return typeof d=="function"&&d instanceof d&&funcToString.call(d)==objectCtorString}function baseSlice(a,s,d){var c=-1,h=a.length;s<0&&(s=-s>h?0:h+s),d=d>h?h:d,d<0&&(d+=h),h=s>d?0:d-s>>>0,s>>>=0;for(var b=Array(h);++c<h;)b[c]=a[c+s];return b}function castSlice(a,s,d){var c=a.length;return d=d===void 0?c:d,!s&&d>=c?a:baseSlice(a,s,d)}var rsAstralRange$2="\\ud800-\\udfff",rsComboMarksRange$3="\\u0300-\\u036f",reComboHalfMarksRange$3="\\ufe20-\\ufe2f",rsComboSymbolsRange$3="\\u20d0-\\u20ff",rsComboRange$3=rsComboMarksRange$3+reComboHalfMarksRange$3+rsComboSymbolsRange$3,rsVarRange$2="\\ufe0e\\ufe0f",rsZWJ$2="\\u200d",reHasUnicode=RegExp("["+rsZWJ$2+rsAstralRange$2+rsComboRange$3+rsVarRange$2+"]");function hasUnicode(a){return reHasUnicode.test(a)}function asciiToArray(a){return a.split("")}var rsAstralRange$1="\\ud800-\\udfff",rsComboMarksRange$2="\\u0300-\\u036f",reComboHalfMarksRange$2="\\ufe20-\\ufe2f",rsComboSymbolsRange$2="\\u20d0-\\u20ff",rsComboRange$2=rsComboMarksRange$2+reComboHalfMarksRange$2+rsComboSymbolsRange$2,rsVarRange$1="\\ufe0e\\ufe0f",rsAstral="["+rsAstralRange$1+"]",rsCombo$2="["+rsComboRange$2+"]",rsFitz$1="\\ud83c[\\udffb-\\udfff]",rsModifier$1="(?:"+rsCombo$2+"|"+rsFitz$1+")",rsNonAstral$1="[^"+rsAstralRange$1+"]",rsRegional$1="(?:\\ud83c[\\udde6-\\uddff]){2}",rsSurrPair$1="[\\ud800-\\udbff][\\udc00-\\udfff]",rsZWJ$1="\\u200d",reOptMod$1=rsModifier$1+"?",rsOptVar$1="["+rsVarRange$1+"]?",rsOptJoin$1="(?:"+rsZWJ$1+"(?:"+[rsNonAstral$1,rsRegional$1,rsSurrPair$1].join("|")+")"+rsOptVar$1+reOptMod$1+")*",rsSeq$1=rsOptVar$1+reOptMod$1+rsOptJoin$1,rsSymbol="(?:"+[rsNonAstral$1+rsCombo$2+"?",rsCombo$2,rsRegional$1,rsSurrPair$1,rsAstral].join("|")+")",reUnicode=RegExp(rsFitz$1+"(?="+rsFitz$1+")|"+rsSymbol+rsSeq$1,"g");function unicodeToArray(a){return a.match(reUnicode)||[]}function stringToArray(a){return hasUnicode(a)?unicodeToArray(a):asciiToArray(a)}function createCaseFirst(a){return function(s){s=toString$1(s);var d=hasUnicode(s)?stringToArray(s):void 0,c=d?d[0]:s.charAt(0),h=d?castSlice(d,1).join(""):s.slice(1);return c[a]()+h}}var upperFirst=createCaseFirst("toUpperCase"),upperFirst$1=upperFirst;function capitalize(a){return upperFirst$1(toString$1(a).toLowerCase())}function arrayReduce(a,s,d,c){var h=-1,b=a==null?0:a.length;for(c&&b&&(d=a[++h]);++h<b;)d=s(d,a[h],h,a);return d}function basePropertyOf(a){return function(s){return a==null?void 0:a[s]}}var deburredLetters={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},deburrLetter=basePropertyOf(deburredLetters),deburrLetter$1=deburrLetter,reLatin=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,rsComboMarksRange$1="\\u0300-\\u036f",reComboHalfMarksRange$1="\\ufe20-\\ufe2f",rsComboSymbolsRange$1="\\u20d0-\\u20ff",rsComboRange$1=rsComboMarksRange$1+reComboHalfMarksRange$1+rsComboSymbolsRange$1,rsCombo$1="["+rsComboRange$1+"]",reComboMark=RegExp(rsCombo$1,"g");function deburr(a){return a=toString$1(a),a&&a.replace(reLatin,deburrLetter$1).replace(reComboMark,"")}var reAsciiWord=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;function asciiWords(a){return a.match(reAsciiWord)||[]}var reHasUnicodeWord=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;function hasUnicodeWord(a){return reHasUnicodeWord.test(a)}var rsAstralRange="\\ud800-\\udfff",rsComboMarksRange="\\u0300-\\u036f",reComboHalfMarksRange="\\ufe20-\\ufe2f",rsComboSymbolsRange="\\u20d0-\\u20ff",rsComboRange=rsComboMarksRange+reComboHalfMarksRange+rsComboSymbolsRange,rsDingbatRange="\\u2700-\\u27bf",rsLowerRange="a-z\\xdf-\\xf6\\xf8-\\xff",rsMathOpRange="\\xac\\xb1\\xd7\\xf7",rsNonCharRange="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",rsPunctuationRange="\\u2000-\\u206f",rsSpaceRange=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",rsUpperRange="A-Z\\xc0-\\xd6\\xd8-\\xde",rsVarRange="\\ufe0e\\ufe0f",rsBreakRange=rsMathOpRange+rsNonCharRange+rsPunctuationRange+rsSpaceRange,rsApos$1="['\u2019]",rsBreak="["+rsBreakRange+"]",rsCombo="["+rsComboRange+"]",rsDigits="\\d+",rsDingbat="["+rsDingbatRange+"]",rsLower="["+rsLowerRange+"]",rsMisc="[^"+rsAstralRange+rsBreakRange+rsDigits+rsDingbatRange+rsLowerRange+rsUpperRange+"]",rsFitz="\\ud83c[\\udffb-\\udfff]",rsModifier="(?:"+rsCombo+"|"+rsFitz+")",rsNonAstral="[^"+rsAstralRange+"]",rsRegional="(?:\\ud83c[\\udde6-\\uddff]){2}",rsSurrPair="[\\ud800-\\udbff][\\udc00-\\udfff]",rsUpper="["+rsUpperRange+"]",rsZWJ="\\u200d",rsMiscLower="(?:"+rsLower+"|"+rsMisc+")",rsMiscUpper="(?:"+rsUpper+"|"+rsMisc+")",rsOptContrLower="(?:"+rsApos$1+"(?:d|ll|m|re|s|t|ve))?",rsOptContrUpper="(?:"+rsApos$1+"(?:D|LL|M|RE|S|T|VE))?",reOptMod=rsModifier+"?",rsOptVar="["+rsVarRange+"]?",rsOptJoin="(?:"+rsZWJ+"(?:"+[rsNonAstral,rsRegional,rsSurrPair].join("|")+")"+rsOptVar+reOptMod+")*",rsOrdLower="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",rsOrdUpper="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",rsSeq=rsOptVar+reOptMod+rsOptJoin,rsEmoji="(?:"+[rsDingbat,rsRegional,rsSurrPair].join("|")+")"+rsSeq,reUnicodeWord=RegExp([rsUpper+"?"+rsLower+"+"+rsOptContrLower+"(?="+[rsBreak,rsUpper,"$"].join("|")+")",rsMiscUpper+"+"+rsOptContrUpper+"(?="+[rsBreak,rsUpper+rsMiscLower,"$"].join("|")+")",rsUpper+"?"+rsMiscLower+"+"+rsOptContrLower,rsUpper+"+"+rsOptContrUpper,rsOrdUpper,rsOrdLower,rsDigits,rsEmoji].join("|"),"g");function unicodeWords(a){return a.match(reUnicodeWord)||[]}function words(a,s,d){return a=toString$1(a),s=d?void 0:s,s===void 0?hasUnicodeWord(a)?unicodeWords(a):asciiWords(a):a.match(s)||[]}var rsApos="['\u2019]",reApos=RegExp(rsApos,"g");function createCompounder(a){return function(s){return arrayReduce(words(deburr(s).replace(reApos,"")),a,"")}}var camelCase$2=createCompounder(function(a,s,d){return s=s.toLowerCase(),a+(d?capitalize(s):s)}),camelCase$3=camelCase$2;function stackClear(){this.__data__=new ListCache,this.size=0}function stackDelete(a){var s=this.__data__,d=s.delete(a);return this.size=s.size,d}function stackGet(a){return this.__data__.get(a)}function stackHas(a){return this.__data__.has(a)}var LARGE_ARRAY_SIZE=200;function stackSet(a,s){var d=this.__data__;if(d instanceof ListCache){var c=d.__data__;if(!Map$2||c.length<LARGE_ARRAY_SIZE-1)return c.push([a,s]),this.size=++d.size,this;d=this.__data__=new MapCache(c)}return d.set(a,s),this.size=d.size,this}function Stack(a){var s=this.__data__=new ListCache(a);this.size=s.size}Stack.prototype.clear=stackClear;Stack.prototype.delete=stackDelete;Stack.prototype.get=stackGet;Stack.prototype.has=stackHas;Stack.prototype.set=stackSet;function baseAssign(a,s){return a&&copyObject(s,keys$1(s),a)}function baseAssignIn(a,s){return a&&copyObject(s,keysIn(s),a)}var freeExports=typeof exports=="object"&&exports&&!exports.nodeType&&exports,freeModule=freeExports&&typeof module=="object"&&module&&!module.nodeType&&module,moduleExports=freeModule&&freeModule.exports===freeExports,Buffer$1=moduleExports?root$1.Buffer:void 0,allocUnsafe=Buffer$1?Buffer$1.allocUnsafe:void 0;function cloneBuffer(a,s){if(s)return a.slice();var d=a.length,c=allocUnsafe?allocUnsafe(d):new a.constructor(d);return a.copy(c),c}function arrayFilter(a,s){for(var d=-1,c=a==null?0:a.length,h=0,b=[];++d<c;){var _=a[d];s(_,d,a)&&(b[h++]=_)}return b}function stubArray(){return[]}var objectProto$3=Object.prototype,propertyIsEnumerable=objectProto$3.propertyIsEnumerable,nativeGetSymbols$1=Object.getOwnPropertySymbols,getSymbols=nativeGetSymbols$1?function(a){return a==null?[]:(a=Object(a),arrayFilter(nativeGetSymbols$1(a),function(s){return propertyIsEnumerable.call(a,s)}))}:stubArray,getSymbols$1=getSymbols;function copySymbols(a,s){return copyObject(a,getSymbols$1(a),s)}var nativeGetSymbols=Object.getOwnPropertySymbols,getSymbolsIn=nativeGetSymbols?function(a){for(var s=[];a;)arrayPush(s,getSymbols$1(a)),a=getPrototype$1(a);return s}:stubArray,getSymbolsIn$1=getSymbolsIn;function copySymbolsIn(a,s){return copyObject(a,getSymbolsIn$1(a),s)}function baseGetAllKeys(a,s,d){var c=s(a);return isArray$4(a)?c:arrayPush(c,d(a))}function getAllKeys(a){return baseGetAllKeys(a,keys$1,getSymbols$1)}function getAllKeysIn(a){return baseGetAllKeys(a,keysIn,getSymbolsIn$1)}var DataView$1=getNative(root$1,"DataView"),DataView$2=DataView$1,Promise$1=getNative(root$1,"Promise"),Promise$2=Promise$1,Set$1=getNative(root$1,"Set"),Set$2=Set$1,mapTag$4="[object Map]",objectTag$2="[object Object]",promiseTag="[object Promise]",setTag$4="[object Set]",weakMapTag$1="[object WeakMap]",dataViewTag$3="[object DataView]",dataViewCtorString=toSource(DataView$2),mapCtorString=toSource(Map$2),promiseCtorString=toSource(Promise$2),setCtorString=toSource(Set$2),weakMapCtorString=toSource(WeakMap$3),getTag=baseGetTag;(DataView$2&&getTag(new DataView$2(new ArrayBuffer(1)))!=dataViewTag$3||Map$2&&getTag(new Map$2)!=mapTag$4||Promise$2&&getTag(Promise$2.resolve())!=promiseTag||Set$2&&getTag(new Set$2)!=setTag$4||WeakMap$3&&getTag(new WeakMap$3)!=weakMapTag$1)&&(getTag=function(a){var s=baseGetTag(a),d=s==objectTag$2?a.constructor:void 0,c=d?toSource(d):"";if(c)switch(c){case dataViewCtorString:return dataViewTag$3;case mapCtorString:return mapTag$4;case promiseCtorString:return promiseTag;case setCtorString:return setTag$4;case weakMapCtorString:return weakMapTag$1}return s});var getTag$1=getTag,objectProto$2=Object.prototype,hasOwnProperty$4=objectProto$2.hasOwnProperty;function initCloneArray(a){var s=a.length,d=new a.constructor(s);return s&&typeof a[0]=="string"&&hasOwnProperty$4.call(a,"index")&&(d.index=a.index,d.input=a.input),d}var Uint8Array$1=root$1.Uint8Array,Uint8Array$2=Uint8Array$1;function cloneArrayBuffer(a){var s=new a.constructor(a.byteLength);return new Uint8Array$2(s).set(new Uint8Array$2(a)),s}function cloneDataView(a,s){var d=s?cloneArrayBuffer(a.buffer):a.buffer;return new a.constructor(d,a.byteOffset,a.byteLength)}var reFlags=/\w*$/;function cloneRegExp(a){var s=new a.constructor(a.source,reFlags.exec(a));return s.lastIndex=a.lastIndex,s}var symbolProto$1=Symbol$2?Symbol$2.prototype:void 0,symbolValueOf$1=symbolProto$1?symbolProto$1.valueOf:void 0;function cloneSymbol(a){return symbolValueOf$1?Object(symbolValueOf$1.call(a)):{}}function cloneTypedArray(a,s){var d=s?cloneArrayBuffer(a.buffer):a.buffer;return new a.constructor(d,a.byteOffset,a.length)}var boolTag$2="[object Boolean]",dateTag$2="[object Date]",mapTag$3="[object Map]",numberTag$2="[object Number]",regexpTag$2="[object RegExp]",setTag$3="[object Set]",stringTag$2="[object String]",symbolTag$2="[object Symbol]",arrayBufferTag$2="[object ArrayBuffer]",dataViewTag$2="[object DataView]",float32Tag$1="[object Float32Array]",float64Tag$1="[object Float64Array]",int8Tag$1="[object Int8Array]",int16Tag$1="[object Int16Array]",int32Tag$1="[object Int32Array]",uint8Tag$1="[object Uint8Array]",uint8ClampedTag$1="[object Uint8ClampedArray]",uint16Tag$1="[object Uint16Array]",uint32Tag$1="[object Uint32Array]";function initCloneByTag(a,s,d){var c=a.constructor;switch(s){case arrayBufferTag$2:return cloneArrayBuffer(a);case boolTag$2:case dateTag$2:return new c(+a);case dataViewTag$2:return cloneDataView(a,d);case float32Tag$1:case float64Tag$1:case int8Tag$1:case int16Tag$1:case int32Tag$1:case uint8Tag$1:case uint8ClampedTag$1:case uint16Tag$1:case uint32Tag$1:return cloneTypedArray(a,d);case mapTag$3:return new c;case numberTag$2:case stringTag$2:return new c(a);case regexpTag$2:return cloneRegExp(a);case setTag$3:return new c;case symbolTag$2:return cloneSymbol(a)}}function initCloneObject(a){return typeof a.constructor=="function"&&!isPrototype(a)?baseCreate$1(getPrototype$1(a)):{}}var mapTag$2="[object Map]";function baseIsMap(a){return isObjectLike(a)&&getTag$1(a)==mapTag$2}var nodeIsMap=nodeUtil$1&&nodeUtil$1.isMap,isMap=nodeIsMap?baseUnary(nodeIsMap):baseIsMap,isMap$1=isMap,setTag$2="[object Set]";function baseIsSet(a){return isObjectLike(a)&&getTag$1(a)==setTag$2}var nodeIsSet=nodeUtil$1&&nodeUtil$1.isSet,isSet$3=nodeIsSet?baseUnary(nodeIsSet):baseIsSet,isSet$4=isSet$3,CLONE_DEEP_FLAG$3=1,CLONE_FLAT_FLAG$1=2,CLONE_SYMBOLS_FLAG$2=4,argsTag$1="[object Arguments]",arrayTag$1="[object Array]",boolTag$1="[object Boolean]",dateTag$1="[object Date]",errorTag$1="[object Error]",funcTag="[object Function]",genTag="[object GeneratorFunction]",mapTag$1="[object Map]",numberTag$1="[object Number]",objectTag$1="[object Object]",regexpTag$1="[object RegExp]",setTag$1="[object Set]",stringTag$1="[object String]",symbolTag$1="[object Symbol]",weakMapTag="[object WeakMap]",arrayBufferTag$1="[object ArrayBuffer]",dataViewTag$1="[object DataView]",float32Tag="[object Float32Array]",float64Tag="[object Float64Array]",int8Tag="[object Int8Array]",int16Tag="[object Int16Array]",int32Tag="[object Int32Array]",uint8Tag="[object Uint8Array]",uint8ClampedTag="[object Uint8ClampedArray]",uint16Tag="[object Uint16Array]",uint32Tag="[object Uint32Array]",cloneableTags={};cloneableTags[argsTag$1]=cloneableTags[arrayTag$1]=cloneableTags[arrayBufferTag$1]=cloneableTags[dataViewTag$1]=cloneableTags[boolTag$1]=cloneableTags[dateTag$1]=cloneableTags[float32Tag]=cloneableTags[float64Tag]=cloneableTags[int8Tag]=cloneableTags[int16Tag]=cloneableTags[int32Tag]=cloneableTags[mapTag$1]=cloneableTags[numberTag$1]=cloneableTags[objectTag$1]=cloneableTags[regexpTag$1]=cloneableTags[setTag$1]=cloneableTags[stringTag$1]=cloneableTags[symbolTag$1]=cloneableTags[uint8Tag]=cloneableTags[uint8ClampedTag]=cloneableTags[uint16Tag]=cloneableTags[uint32Tag]=!0;cloneableTags[errorTag$1]=cloneableTags[funcTag]=cloneableTags[weakMapTag]=!1;function baseClone(a,s,d,c,h,b){var _,$=s&CLONE_DEEP_FLAG$3,_e=s&CLONE_FLAT_FLAG$1,tt=s&CLONE_SYMBOLS_FLAG$2;if(d&&(_=h?d(a,c,h,b):d(a)),_!==void 0)return _;if(!isObject$5(a))return a;var rt=isArray$4(a);if(rt){if(_=initCloneArray(a),!$)return copyArray(a,_)}else{var ot=getTag$1(a),it=ot==funcTag||ot==genTag;if(isBuffer$2(a))return cloneBuffer(a,$);if(ot==objectTag$1||ot==argsTag$1||it&&!h){if(_=_e||it?{}:initCloneObject(a),!$)return _e?copySymbolsIn(a,baseAssignIn(_,a)):copySymbols(a,baseAssign(_,a))}else{if(!cloneableTags[ot])return h?a:{};_=initCloneByTag(a,ot,$)}}b||(b=new Stack);var st=b.get(a);if(st)return st;b.set(a,_),isSet$4(a)?a.forEach(function(ut){_.add(baseClone(ut,s,d,ut,a,b))}):isMap$1(a)&&a.forEach(function(ut,ht){_.set(ht,baseClone(ut,s,d,ht,a,b))});var lt=tt?_e?getAllKeysIn:getAllKeys:_e?keysIn:keys$1,dt=rt?void 0:lt(a);return arrayEach(dt||a,function(ut,ht){dt&&(ht=ut,ut=a[ht]),assignValue(_,ht,baseClone(ut,s,d,ht,a,b))}),_}var CLONE_DEEP_FLAG$2=1,CLONE_SYMBOLS_FLAG$1=4;function cloneDeep(a){return baseClone(a,CLONE_DEEP_FLAG$2|CLONE_SYMBOLS_FLAG$1)}var HASH_UNDEFINED="__lodash_hash_undefined__";function setCacheAdd(a){return this.__data__.set(a,HASH_UNDEFINED),this}function setCacheHas(a){return this.__data__.has(a)}function SetCache(a){var s=-1,d=a==null?0:a.length;for(this.__data__=new MapCache;++s<d;)this.add(a[s])}SetCache.prototype.add=SetCache.prototype.push=setCacheAdd;SetCache.prototype.has=setCacheHas;function arraySome(a,s){for(var d=-1,c=a==null?0:a.length;++d<c;)if(s(a[d],d,a))return!0;return!1}function cacheHas(a,s){return a.has(s)}var COMPARE_PARTIAL_FLAG$5=1,COMPARE_UNORDERED_FLAG$3=2;function equalArrays(a,s,d,c,h,b){var _=d&COMPARE_PARTIAL_FLAG$5,$=a.length,_e=s.length;if($!=_e&&!(_&&_e>$))return!1;var tt=b.get(a),rt=b.get(s);if(tt&&rt)return tt==s&&rt==a;var ot=-1,it=!0,st=d&COMPARE_UNORDERED_FLAG$3?new SetCache:void 0;for(b.set(a,s),b.set(s,a);++ot<$;){var lt=a[ot],dt=s[ot];if(c)var ut=_?c(dt,lt,ot,s,a,b):c(lt,dt,ot,a,s,b);if(ut!==void 0){if(ut)continue;it=!1;break}if(st){if(!arraySome(s,function(ht,nt){if(!cacheHas(st,nt)&&(lt===ht||h(lt,ht,d,c,b)))return st.push(nt)})){it=!1;break}}else if(!(lt===dt||h(lt,dt,d,c,b))){it=!1;break}}return b.delete(a),b.delete(s),it}function mapToArray(a){var s=-1,d=Array(a.size);return a.forEach(function(c,h){d[++s]=[h,c]}),d}function setToArray(a){var s=-1,d=Array(a.size);return a.forEach(function(c){d[++s]=c}),d}var COMPARE_PARTIAL_FLAG$4=1,COMPARE_UNORDERED_FLAG$2=2,boolTag="[object Boolean]",dateTag="[object Date]",errorTag="[object Error]",mapTag="[object Map]",numberTag="[object Number]",regexpTag="[object RegExp]",setTag="[object Set]",stringTag="[object String]",symbolTag="[object Symbol]",arrayBufferTag="[object ArrayBuffer]",dataViewTag="[object DataView]",symbolProto=Symbol$2?Symbol$2.prototype:void 0,symbolValueOf=symbolProto?symbolProto.valueOf:void 0;function equalByTag(a,s,d,c,h,b,_){switch(d){case dataViewTag:if(a.byteLength!=s.byteLength||a.byteOffset!=s.byteOffset)return!1;a=a.buffer,s=s.buffer;case arrayBufferTag:return!(a.byteLength!=s.byteLength||!b(new Uint8Array$2(a),new Uint8Array$2(s)));case boolTag:case dateTag:case numberTag:return eq(+a,+s);case errorTag:return a.name==s.name&&a.message==s.message;case regexpTag:case stringTag:return a==s+"";case mapTag:var $=mapToArray;case setTag:var _e=c&COMPARE_PARTIAL_FLAG$4;if($||($=setToArray),a.size!=s.size&&!_e)return!1;var tt=_.get(a);if(tt)return tt==s;c|=COMPARE_UNORDERED_FLAG$2,_.set(a,s);var rt=equalArrays($(a),$(s),c,h,b,_);return _.delete(a),rt;case symbolTag:if(symbolValueOf)return symbolValueOf.call(a)==symbolValueOf.call(s)}return!1}var COMPARE_PARTIAL_FLAG$3=1,objectProto$1=Object.prototype,hasOwnProperty$3=objectProto$1.hasOwnProperty;function equalObjects(a,s,d,c,h,b){var _=d&COMPARE_PARTIAL_FLAG$3,$=getAllKeys(a),_e=$.length,tt=getAllKeys(s),rt=tt.length;if(_e!=rt&&!_)return!1;for(var ot=_e;ot--;){var it=$[ot];if(!(_?it in s:hasOwnProperty$3.call(s,it)))return!1}var st=b.get(a),lt=b.get(s);if(st&&lt)return st==s&&lt==a;var dt=!0;b.set(a,s),b.set(s,a);for(var ut=_;++ot<_e;){it=$[ot];var ht=a[it],nt=s[it];if(c)var ct=_?c(nt,ht,it,s,a,b):c(ht,nt,it,a,s,b);if(!(ct===void 0?ht===nt||h(ht,nt,d,c,b):ct)){dt=!1;break}ut||(ut=it=="constructor")}if(dt&&!ut){var mt=a.constructor,kt=s.constructor;mt!=kt&&"constructor"in a&&"constructor"in s&&!(typeof mt=="function"&&mt instanceof mt&&typeof kt=="function"&&kt instanceof kt)&&(dt=!1)}return b.delete(a),b.delete(s),dt}var COMPARE_PARTIAL_FLAG$2=1,argsTag="[object Arguments]",arrayTag="[object Array]",objectTag="[object Object]",objectProto=Object.prototype,hasOwnProperty$2=objectProto.hasOwnProperty;function baseIsEqualDeep(a,s,d,c,h,b){var _=isArray$4(a),$=isArray$4(s),_e=_?arrayTag:getTag$1(a),tt=$?arrayTag:getTag$1(s);_e=_e==argsTag?objectTag:_e,tt=tt==argsTag?objectTag:tt;var rt=_e==objectTag,ot=tt==objectTag,it=_e==tt;if(it&&isBuffer$2(a)){if(!isBuffer$2(s))return!1;_=!0,rt=!1}if(it&&!rt)return b||(b=new Stack),_||isTypedArray$1(a)?equalArrays(a,s,d,c,h,b):equalByTag(a,s,_e,d,c,h,b);if(!(d&COMPARE_PARTIAL_FLAG$2)){var st=rt&&hasOwnProperty$2.call(a,"__wrapped__"),lt=ot&&hasOwnProperty$2.call(s,"__wrapped__");if(st||lt){var dt=st?a.value():a,ut=lt?s.value():s;return b||(b=new Stack),h(dt,ut,d,c,b)}}return it?(b||(b=new Stack),equalObjects(a,s,d,c,h,b)):!1}function baseIsEqual(a,s,d,c,h){return a===s?!0:a==null||s==null||!isObjectLike(a)&&!isObjectLike(s)?a!==a&&s!==s:baseIsEqualDeep(a,s,d,c,baseIsEqual,h)}var COMPARE_PARTIAL_FLAG$1=1,COMPARE_UNORDERED_FLAG$1=2;function baseIsMatch(a,s,d,c){var h=d.length,b=h,_=!c;if(a==null)return!b;for(a=Object(a);h--;){var $=d[h];if(_&&$[2]?$[1]!==a[$[0]]:!($[0]in a))return!1}for(;++h<b;){$=d[h];var _e=$[0],tt=a[_e],rt=$[1];if(_&&$[2]){if(tt===void 0&&!(_e in a))return!1}else{var ot=new Stack;if(c)var it=c(tt,rt,_e,a,s,ot);if(!(it===void 0?baseIsEqual(rt,tt,COMPARE_PARTIAL_FLAG$1|COMPARE_UNORDERED_FLAG$1,c,ot):it))return!1}}return!0}function isStrictComparable(a){return a===a&&!isObject$5(a)}function getMatchData(a){for(var s=keys$1(a),d=s.length;d--;){var c=s[d],h=a[c];s[d]=[c,h,isStrictComparable(h)]}return s}function matchesStrictComparable(a,s){return function(d){return d==null?!1:d[a]===s&&(s!==void 0||a in Object(d))}}function baseMatches(a){var s=getMatchData(a);return s.length==1&&s[0][2]?matchesStrictComparable(s[0][0],s[0][1]):function(d){return d===a||baseIsMatch(d,a,s)}}function baseHasIn(a,s){return a!=null&&s in Object(a)}function hasPath(a,s,d){s=castPath(s,a);for(var c=-1,h=s.length,b=!1;++c<h;){var _=toKey(s[c]);if(!(b=a!=null&&d(a,_)))break;a=a[_]}return b||++c!=h?b:(h=a==null?0:a.length,!!h&&isLength(h)&&isIndex(_,h)&&(isArray$4(a)||isArguments$1(a)))}function hasIn(a,s){return a!=null&&hasPath(a,s,baseHasIn)}var COMPARE_PARTIAL_FLAG=1,COMPARE_UNORDERED_FLAG=2;function baseMatchesProperty(a,s){return isKey(a)&&isStrictComparable(s)?matchesStrictComparable(toKey(a),s):function(d){var c=get(d,a);return c===void 0&&c===s?hasIn(d,a):baseIsEqual(s,c,COMPARE_PARTIAL_FLAG|COMPARE_UNORDERED_FLAG)}}function baseProperty(a){return function(s){return s==null?void 0:s[a]}}function basePropertyDeep(a){return function(s){return baseGet(s,a)}}function property(a){return isKey(a)?baseProperty(toKey(a)):basePropertyDeep(a)}function baseIteratee(a){return typeof a=="function"?a:a==null?identity$1:typeof a=="object"?isArray$4(a)?baseMatchesProperty(a[0],a[1]):baseMatches(a):property(a)}function createBaseFor(a){return function(s,d,c){for(var h=-1,b=Object(s),_=c(s),$=_.length;$--;){var _e=_[a?$:++h];if(d(b[_e],_e,b)===!1)break}return s}}var baseFor=createBaseFor(),baseFor$1=baseFor;function baseForOwn(a,s){return a&&baseFor$1(a,s,keys$1)}function createBaseEach(a,s){return function(d,c){if(d==null)return d;if(!isArrayLike$1(d))return a(d,c);for(var h=d.length,b=s?h:-1,_=Object(d);(s?b--:++b<h)&&c(_[b],b,_)!==!1;);return d}}var baseEach=createBaseEach(baseForOwn),baseEach$1=baseEach,now=function(){return root$1.Date.now()},now$1=now,FUNC_ERROR_TEXT="Expected a function",nativeMax=Math.max,nativeMin=Math.min;function debounce$1(a,s,d){var c,h,b,_,$,_e,tt=0,rt=!1,ot=!1,it=!0;if(typeof a!="function")throw new TypeError(FUNC_ERROR_TEXT);s=toNumber(s)||0,isObject$5(d)&&(rt=!!d.leading,ot="maxWait"in d,b=ot?nativeMax(toNumber(d.maxWait)||0,s):b,it="trailing"in d?!!d.trailing:it);function st(Tt){var Pt=c,At=h;return c=h=void 0,tt=Tt,_=a.apply(At,Pt),_}function lt(Tt){return tt=Tt,$=setTimeout(ht,s),rt?st(Tt):_}function dt(Tt){var Pt=Tt-_e,At=Tt-tt,gt=s-Pt;return ot?nativeMin(gt,b-At):gt}function ut(Tt){var Pt=Tt-_e,At=Tt-tt;return _e===void 0||Pt>=s||Pt<0||ot&&At>=b}function ht(){var Tt=now$1();if(ut(Tt))return nt(Tt);$=setTimeout(ht,dt(Tt))}function nt(Tt){return $=void 0,it&&c?st(Tt):(c=h=void 0,_)}function ct(){$!==void 0&&clearTimeout($),tt=0,c=_e=h=$=void 0}function mt(){return $===void 0?_:nt(now$1())}function kt(){var Tt=now$1(),Pt=ut(Tt);if(c=arguments,h=this,_e=Tt,Pt){if($===void 0)return lt(_e);if(ot)return clearTimeout($),$=setTimeout(ht,s),st(_e)}return $===void 0&&($=setTimeout(ht,s)),_}return kt.cancel=ct,kt.flush=mt,kt}function last$1(a){var s=a==null?0:a.length;return s?a[s-1]:void 0}function arrayEvery(a,s){for(var d=-1,c=a==null?0:a.length;++d<c;)if(!s(a[d],d,a))return!1;return!0}function baseEvery(a,s){var d=!0;return baseEach$1(a,function(c,h,b){return d=!!s(c,h,b),d}),d}function every$1(a,s,d){var c=isArray$4(a)?arrayEvery:baseEvery;return d&&isIterateeCall(a,s,d)&&(s=void 0),c(a,baseIteratee(s))}function baseMap(a,s){var d=-1,c=isArrayLike$1(a)?Array(a.length):[];return baseEach$1(a,function(h,b,_){c[++d]=s(h,b,_)}),c}function parent(a,s){return s.length<2?a:baseGet(a,baseSlice(s,0,-1))}function isEqual(a,s){return baseIsEqual(a,s)}function isMatch(a,s){return a===s||baseIsMatch(a,s,getMatchData(s))}var CLONE_DEEP_FLAG$1=1;function iteratee(a){return baseIteratee(typeof a=="function"?a:baseClone(a,CLONE_DEEP_FLAG$1))}var kebabCase=createCompounder(function(a,s,d){return a+(d?"-":"")+s.toLowerCase()}),kebabCase$1=kebabCase;function baseUnset(a,s){return s=castPath(s,a),a=parent(a,s),a==null||delete a[toKey(last$1(s))]}function customOmitClone(a){return isPlainObject$1(a)?void 0:a}var CLONE_DEEP_FLAG=1,CLONE_FLAT_FLAG=2,CLONE_SYMBOLS_FLAG=4,omit=flatRest(function(a,s){var d={};if(a==null)return d;var c=!1;s=arrayMap(s,function(b){return b=castPath(b,a),c||(c=b.length>1),b}),copyObject(a,getAllKeysIn(a),d),c&&(d=baseClone(d,CLONE_DEEP_FLAG|CLONE_FLAT_FLAG|CLONE_SYMBOLS_FLAG,customOmitClone));for(var h=s.length;h--;)baseUnset(d,s[h]);return d}),omit$1=omit;function baseSet(a,s,d,c){if(!isObject$5(a))return a;s=castPath(s,a);for(var h=-1,b=s.length,_=b-1,$=a;$!=null&&++h<b;){var _e=toKey(s[h]),tt=d;if(_e==="__proto__"||_e==="constructor"||_e==="prototype")return a;if(h!=_){var rt=$[_e];tt=c?c(rt,_e,$):void 0,tt===void 0&&(tt=isObject$5(rt)?rt:isIndex(s[h+1])?[]:{})}assignValue($,_e,tt),$=$[_e]}return a}function basePickBy(a,s,d){for(var c=-1,h=s.length,b={};++c<h;){var _=s[c],$=baseGet(a,_);d($,_)&&baseSet(b,castPath(_,a),$)}return b}function baseSortBy(a,s){var d=a.length;for(a.sort(s);d--;)a[d]=a[d].value;return a}function compareAscending(a,s){if(a!==s){var d=a!==void 0,c=a===null,h=a===a,b=isSymbol(a),_=s!==void 0,$=s===null,_e=s===s,tt=isSymbol(s);if(!$&&!tt&&!b&&a>s||b&&_&&_e&&!$&&!tt||c&&_&&_e||!d&&_e||!h)return 1;if(!c&&!b&&!tt&&a<s||tt&&d&&h&&!c&&!b||$&&d&&h||!_&&h||!_e)return-1}return 0}function compareMultiple(a,s,d){for(var c=-1,h=a.criteria,b=s.criteria,_=h.length,$=d.length;++c<_;){var _e=compareAscending(h[c],b[c]);if(_e){if(c>=$)return _e;var tt=d[c];return _e*(tt=="desc"?-1:1)}}return a.index-s.index}function baseOrderBy(a,s,d){s.length?s=arrayMap(s,function(b){return isArray$4(b)?function(_){return baseGet(_,b.length===1?b[0]:b)}:b}):s=[identity$1];var c=-1;s=arrayMap(s,baseUnary(baseIteratee));var h=baseMap(a,function(b,_,$){var _e=arrayMap(s,function(tt){return tt(b)});return{criteria:_e,index:++c,value:b}});return baseSortBy(h,function(b,_){return compareMultiple(b,_,d)})}function basePick(a,s){return basePickBy(a,s,function(d,c){return hasIn(a,c)})}var pick=flatRest(function(a,s){return a==null?{}:basePick(a,s)}),pick$1=pick;function baseIndexOfWith(a,s,d,c){for(var h=d-1,b=a.length;++h<b;)if(c(a[h],s))return h;return-1}var arrayProto=Array.prototype,splice=arrayProto.splice;function basePullAll(a,s,d,c){var h=c?baseIndexOfWith:baseIndexOf,b=-1,_=s.length,$=a;for(a===s&&(s=copyArray(s)),d&&($=arrayMap(a,baseUnary(d)));++b<_;)for(var _e=0,tt=s[b],rt=d?d(tt):tt;(_e=h($,rt,_e,c))>-1;)$!==a&&splice.call($,_e,1),splice.call(a,_e,1);return a}function pullAll(a,s){return a&&a.length&&s&&s.length?basePullAll(a,s):a}var pull$1=baseRest(pullAll),pull$2=pull$1,sortBy=baseRest(function(a,s){if(a==null)return[];var d=s.length;return d>1&&isIterateeCall(a,s[0],s[1])?s=[]:d>2&&isIterateeCall(s[0],s[1],s[2])&&(s=[s[0]]),baseOrderBy(a,baseFlatten(s,1),[])}),sortBy$1=sortBy;const convert=function(a){if(a==null)return ok$1;if(typeof a=="string")return typeFactory(a);if(typeof a=="object")return Array.isArray(a)?anyFactory(a):propsFactory(a);if(typeof a=="function")return castFactory(a);throw new Error("Expected function, string, or object as test")};function anyFactory(a){const s=[];let d=-1;for(;++d<a.length;)s[d]=convert(a[d]);return castFactory(c);function c(...h){let b=-1;for(;++b<s.length;)if(s[b].call(this,...h))return!0;return!1}}function propsFactory(a){return castFactory(s);function s(d){let c;for(c in a)if(d[c]!==a[c])return!1;return!0}}function typeFactory(a){return castFactory(s);function s(d){return d&&d.type===a}}function castFactory(a){return s;function s(d,...c){return Boolean(d&&typeof d=="object"&&"type"in d&&Boolean(a.call(this,d,...c)))}}function ok$1(){return!0}function color$1(a){return a}const CONTINUE=!0,EXIT=!1,SKIP="skip",visitParents=function(a,s,d,c){typeof s=="function"&&typeof d!="function"&&(c=d,d=s,s=null);const h=convert(s),b=c?-1:1;_(a,void 0,[])();function _($,_e,tt){const rt=$&&typeof $=="object"?$:{};if(typeof rt.type=="string"){const it=typeof rt.tagName=="string"?rt.tagName:typeof rt.name=="string"?rt.name:void 0;Object.defineProperty(ot,"name",{value:"node ("+($.type+(it?"<"+it+">":""))+")"})}return ot;function ot(){let it=[],st,lt,dt;if((!s||h($,_e,tt[tt.length-1]||null))&&(it=toResult(d($,tt)),it[0]===EXIT))return it;if($.children&&it[0]!==SKIP)for(lt=(c?$.children.length:-1)+b,dt=tt.concat($);lt>-1&&lt<$.children.length;){if(st=_($.children[lt],lt,dt)(),st[0]===EXIT)return st;lt=typeof st[1]=="number"?st[1]:lt+b}return it}}};function toResult(a){return Array.isArray(a)?a:typeof a=="number"?[CONTINUE,a]:[a]}const visit=function(a,s,d,c){typeof s=="function"&&typeof d!="function"&&(c=d,d=s,s=null),visitParents(a,s,h,c);function h(b,_){const $=_[_.length-1];return d(b,$?$.children.indexOf(b):null,$)}};var fastDeepEqual=function a(s,d){if(s===d)return!0;if(s&&d&&typeof s=="object"&&typeof d=="object"){if(s.constructor!==d.constructor)return!1;var c,h,b;if(Array.isArray(s)){if(c=s.length,c!=d.length)return!1;for(h=c;h--!==0;)if(!a(s[h],d[h]))return!1;return!0}if(s.constructor===RegExp)return s.source===d.source&&s.flags===d.flags;if(s.valueOf!==Object.prototype.valueOf)return s.valueOf()===d.valueOf();if(s.toString!==Object.prototype.toString)return s.toString()===d.toString();if(b=Object.keys(s),c=b.length,c!==Object.keys(d).length)return!1;for(h=c;h--!==0;)if(!Object.prototype.hasOwnProperty.call(d,b[h]))return!1;for(h=c;h--!==0;){var _=b[h];if(!a(s[_],d[_]))return!1}return!0}return s!==s&&d!==d};const generateId=()=>(Math.random()*1e20).toString(36),insertAt$1=(a=0,s,d,c=!1)=>[...d.slice(0,a),...[s].flat(),...d.slice(c?a+1:a)],replaceItem$1=(a,s,d)=>{a=typeof a=="function"?a:h=>h===a;const c=d.findIndex(a);return c<0?d:insertAt$1(c,s,d,!0)},swapIndex=(a,s,d)=>{if(!d[a]||!d[s])return d;d=[...d];const c=d[a];return d[a]=d[s],d[s]=c,d},swapItems=(a,s,d)=>{const c=d.findIndex(b=>b===a),h=d.findIndex(b=>b===s);return c<0||h<0?d:swapIndex(c,h,d)},toDataNode$1=a=>a?{id:a.id,props:a.props,childIds:(a.children||[]).map(s=>s.id)}:null,toSceneNode=a=>({id:a.id,props:a.props,children:[]}),toSceneTree=(a,s)=>{const d=a.find(h=>h.id===s);if(!d)return null;const c=d.childIds;return{id:d.id,props:d.props,children:c.map(h=>toSceneTree(a,h)).filter(Boolean)}},forEachDown$1=(a,s)=>{s(a),(a.children||[]).forEach(c=>forEachDown$1(c,(h,b)=>{s(h,b||a)}))},mapDown=(a,s)=>{const d=s(a);return{...d,children:((d==null?void 0:d.children)||(a==null?void 0:a.children)||[]).map(c=>mapDown(c,s))}},mapDownAsync=async(a,s)=>{var c;const d=(c=a==null?void 0:a.children)!=null?c:[];return{...await s(a),children:await Promise.all(d.map(h=>mapDownAsync(h,s)))}},getElementAttributes=a=>Object.values(a.attributes).reduce((s,d)=>({...s,[d.name]:d.value}),{}),asArray=a=>isArray$4(a)?a:[a],sizeToNum=(a,s)=>typeof a=="number"?a:typeof a=="string"?a.indexOf("%")>-1?parseFloat(a)/100*s:parseFloat(a):0,asSize=a=>typeof a=="number"?a+"px":typeof a=="string"?a.indexOf("%")>-1?parseFloat(a)+"%":a:"0px",asDuration=a=>typeof a=="string"?a:typeof a=="number"?a+"ms":"0ms",find$2=(a,s)=>{if(!a)throw new Error("requires a tree to search");if(!s)throw new Error("requires a condition");const d=iteratee(s);let c;return visit(a,function(h){if(d(h))return c=h,!1}),c},findAll=(a,s)=>{if(!a)throw new Error("requires a tree to search");if(!s)throw new Error("requires a condition");const d=iteratee(s);let c=[];return visit(a,function(h){d(h)&&c.push(h)}),c},values=a=>Array.from(a.values());var Logic=Object.freeze(Object.defineProperty({__proto__:null,deepEqual:fastDeepEqual,generateId,insertAt:insertAt$1,replaceItem:replaceItem$1,swapIndex,swapItems,toDataNode:toDataNode$1,toSceneNode,toSceneTree,forEachDown:forEachDown$1,mapDown,mapDownAsync,getElementAttributes,asArray,sizeToNum,asSize,asDuration,find:find$2,findAll,values,pick:pick$1,pull:pull$2,omit:omit$1,isEqual,cloneDeep,sortBy:sortBy$1,debounce:debounce$1,camelCase:camelCase$3,kebabCase:kebabCase$1,isArray:isArray$4,every:every$1},Symbol.toStringTag,{value:"Module"})),lib$2={};function e(a){this.message=a}e.prototype=new Error,e.prototype.name="InvalidCharacterError";var r$3=typeof window!="undefined"&&window.atob&&window.atob.bind(window)||function(a){var s=String(a).replace(/=+$/,"");if(s.length%4==1)throw new e("'atob' failed: The string to be decoded is not correctly encoded.");for(var d,c,h=0,b=0,_="";c=s.charAt(b++);~c&&(d=h%4?64*d+c:c,h++%4)?_+=String.fromCharCode(255&d>>(-2*h&6)):0)c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(c);return _};function t$1(a){var s=a.replace(/-/g,"+").replace(/_/g,"/");switch(s.length%4){case 0:break;case 2:s+="==";break;case 3:s+="=";break;default:throw"Illegal base64url string!"}try{return function(d){return decodeURIComponent(r$3(d).replace(/(.)/g,function(c,h){var b=h.charCodeAt(0).toString(16).toUpperCase();return b.length<2&&(b="0"+b),"%"+b}))}(s)}catch{return r$3(s)}}function n$1(a){this.message=a}function o(a,s){if(typeof a!="string")throw new n$1("Invalid token specified");var d=(s=s||{}).header===!0?0:1;try{return JSON.parse(t$1(a.split(".")[d]))}catch(c){throw new n$1("Invalid token specified: "+c.message)}}n$1.prototype=new Error,n$1.prototype.name="InvalidTokenError";var jwtDecode_esm=Object.freeze(Object.defineProperty({__proto__:null,default:o,InvalidTokenError:n$1},Symbol.toStringTag,{value:"Module"})),require$$0$1=getAugmentedNamespace(jwtDecode_esm),getRandomValues,rnds8=new Uint8Array(16);function rng(){if(!getRandomValues&&(getRandomValues=typeof crypto!="undefined"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto!="undefined"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!getRandomValues))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return getRandomValues(rnds8)}var REGEX=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function validate$1(a){return typeof a=="string"&&REGEX.test(a)}var byteToHex=[];for(var i=0;i<256;++i)byteToHex.push((i+256).toString(16).substr(1));function stringify(a){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,d=(byteToHex[a[s+0]]+byteToHex[a[s+1]]+byteToHex[a[s+2]]+byteToHex[a[s+3]]+"-"+byteToHex[a[s+4]]+byteToHex[a[s+5]]+"-"+byteToHex[a[s+6]]+byteToHex[a[s+7]]+"-"+byteToHex[a[s+8]]+byteToHex[a[s+9]]+"-"+byteToHex[a[s+10]]+byteToHex[a[s+11]]+byteToHex[a[s+12]]+byteToHex[a[s+13]]+byteToHex[a[s+14]]+byteToHex[a[s+15]]).toLowerCase();if(!validate$1(d))throw TypeError("Stringified UUID is invalid");return d}var _nodeId,_clockseq,_lastMSecs=0,_lastNSecs=0;function v1(a,s,d){var c=s&&d||0,h=s||new Array(16);a=a||{};var b=a.node||_nodeId,_=a.clockseq!==void 0?a.clockseq:_clockseq;if(b==null||_==null){var $=a.random||(a.rng||rng)();b==null&&(b=_nodeId=[$[0]|1,$[1],$[2],$[3],$[4],$[5]]),_==null&&(_=_clockseq=($[6]<<8|$[7])&16383)}var _e=a.msecs!==void 0?a.msecs:Date.now(),tt=a.nsecs!==void 0?a.nsecs:_lastNSecs+1,rt=_e-_lastMSecs+(tt-_lastNSecs)/1e4;if(rt<0&&a.clockseq===void 0&&(_=_+1&16383),(rt<0||_e>_lastMSecs)&&a.nsecs===void 0&&(tt=0),tt>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");_lastMSecs=_e,_lastNSecs=tt,_clockseq=_,_e+=122192928e5;var ot=((_e&268435455)*1e4+tt)%4294967296;h[c++]=ot>>>24&255,h[c++]=ot>>>16&255,h[c++]=ot>>>8&255,h[c++]=ot&255;var it=_e/4294967296*1e4&268435455;h[c++]=it>>>8&255,h[c++]=it&255,h[c++]=it>>>24&15|16,h[c++]=it>>>16&255,h[c++]=_>>>8|128,h[c++]=_&255;for(var st=0;st<6;++st)h[c+st]=b[st];return s||stringify(h)}function parse$2(a){if(!validate$1(a))throw TypeError("Invalid UUID");var s,d=new Uint8Array(16);return d[0]=(s=parseInt(a.slice(0,8),16))>>>24,d[1]=s>>>16&255,d[2]=s>>>8&255,d[3]=s&255,d[4]=(s=parseInt(a.slice(9,13),16))>>>8,d[5]=s&255,d[6]=(s=parseInt(a.slice(14,18),16))>>>8,d[7]=s&255,d[8]=(s=parseInt(a.slice(19,23),16))>>>8,d[9]=s&255,d[10]=(s=parseInt(a.slice(24,36),16))/1099511627776&255,d[11]=s/4294967296&255,d[12]=s>>>24&255,d[13]=s>>>16&255,d[14]=s>>>8&255,d[15]=s&255,d}function stringToBytes(a){a=unescape(encodeURIComponent(a));for(var s=[],d=0;d<a.length;++d)s.push(a.charCodeAt(d));return s}var DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",URL$1="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function v35(a,s,d){function c(h,b,_,$){if(typeof h=="string"&&(h=stringToBytes(h)),typeof b=="string"&&(b=parse$2(b)),b.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var _e=new Uint8Array(16+h.length);if(_e.set(b),_e.set(h,b.length),_e=d(_e),_e[6]=_e[6]&15|s,_e[8]=_e[8]&63|128,_){$=$||0;for(var tt=0;tt<16;++tt)_[$+tt]=_e[tt];return _}return stringify(_e)}try{c.name=a}catch{}return c.DNS=DNS,c.URL=URL$1,c}function md5(a){if(typeof a=="string"){var s=unescape(encodeURIComponent(a));a=new Uint8Array(s.length);for(var d=0;d<s.length;++d)a[d]=s.charCodeAt(d)}return md5ToHexEncodedArray(wordsToMd5(bytesToWords(a),a.length*8))}function md5ToHexEncodedArray(a){for(var s=[],d=a.length*32,c="0123456789abcdef",h=0;h<d;h+=8){var b=a[h>>5]>>>h%32&255,_=parseInt(c.charAt(b>>>4&15)+c.charAt(b&15),16);s.push(_)}return s}function getOutputLength(a){return(a+64>>>9<<4)+14+1}function wordsToMd5(a,s){a[s>>5]|=128<<s%32,a[getOutputLength(s)-1]=s;for(var d=1732584193,c=-271733879,h=-1732584194,b=271733878,_=0;_<a.length;_+=16){var $=d,_e=c,tt=h,rt=b;d=md5ff(d,c,h,b,a[_],7,-680876936),b=md5ff(b,d,c,h,a[_+1],12,-389564586),h=md5ff(h,b,d,c,a[_+2],17,606105819),c=md5ff(c,h,b,d,a[_+3],22,-1044525330),d=md5ff(d,c,h,b,a[_+4],7,-176418897),b=md5ff(b,d,c,h,a[_+5],12,1200080426),h=md5ff(h,b,d,c,a[_+6],17,-1473231341),c=md5ff(c,h,b,d,a[_+7],22,-45705983),d=md5ff(d,c,h,b,a[_+8],7,1770035416),b=md5ff(b,d,c,h,a[_+9],12,-1958414417),h=md5ff(h,b,d,c,a[_+10],17,-42063),c=md5ff(c,h,b,d,a[_+11],22,-1990404162),d=md5ff(d,c,h,b,a[_+12],7,1804603682),b=md5ff(b,d,c,h,a[_+13],12,-40341101),h=md5ff(h,b,d,c,a[_+14],17,-1502002290),c=md5ff(c,h,b,d,a[_+15],22,1236535329),d=md5gg(d,c,h,b,a[_+1],5,-165796510),b=md5gg(b,d,c,h,a[_+6],9,-1069501632),h=md5gg(h,b,d,c,a[_+11],14,643717713),c=md5gg(c,h,b,d,a[_],20,-373897302),d=md5gg(d,c,h,b,a[_+5],5,-701558691),b=md5gg(b,d,c,h,a[_+10],9,38016083),h=md5gg(h,b,d,c,a[_+15],14,-660478335),c=md5gg(c,h,b,d,a[_+4],20,-405537848),d=md5gg(d,c,h,b,a[_+9],5,568446438),b=md5gg(b,d,c,h,a[_+14],9,-1019803690),h=md5gg(h,b,d,c,a[_+3],14,-187363961),c=md5gg(c,h,b,d,a[_+8],20,1163531501),d=md5gg(d,c,h,b,a[_+13],5,-1444681467),b=md5gg(b,d,c,h,a[_+2],9,-51403784),h=md5gg(h,b,d,c,a[_+7],14,1735328473),c=md5gg(c,h,b,d,a[_+12],20,-1926607734),d=md5hh(d,c,h,b,a[_+5],4,-378558),b=md5hh(b,d,c,h,a[_+8],11,-2022574463),h=md5hh(h,b,d,c,a[_+11],16,1839030562),c=md5hh(c,h,b,d,a[_+14],23,-35309556),d=md5hh(d,c,h,b,a[_+1],4,-1530992060),b=md5hh(b,d,c,h,a[_+4],11,1272893353),h=md5hh(h,b,d,c,a[_+7],16,-155497632),c=md5hh(c,h,b,d,a[_+10],23,-1094730640),d=md5hh(d,c,h,b,a[_+13],4,681279174),b=md5hh(b,d,c,h,a[_],11,-358537222),h=md5hh(h,b,d,c,a[_+3],16,-722521979),c=md5hh(c,h,b,d,a[_+6],23,76029189),d=md5hh(d,c,h,b,a[_+9],4,-640364487),b=md5hh(b,d,c,h,a[_+12],11,-421815835),h=md5hh(h,b,d,c,a[_+15],16,530742520),c=md5hh(c,h,b,d,a[_+2],23,-995338651),d=md5ii(d,c,h,b,a[_],6,-198630844),b=md5ii(b,d,c,h,a[_+7],10,1126891415),h=md5ii(h,b,d,c,a[_+14],15,-1416354905),c=md5ii(c,h,b,d,a[_+5],21,-57434055),d=md5ii(d,c,h,b,a[_+12],6,1700485571),b=md5ii(b,d,c,h,a[_+3],10,-1894986606),h=md5ii(h,b,d,c,a[_+10],15,-1051523),c=md5ii(c,h,b,d,a[_+1],21,-2054922799),d=md5ii(d,c,h,b,a[_+8],6,1873313359),b=md5ii(b,d,c,h,a[_+15],10,-30611744),h=md5ii(h,b,d,c,a[_+6],15,-1560198380),c=md5ii(c,h,b,d,a[_+13],21,1309151649),d=md5ii(d,c,h,b,a[_+4],6,-145523070),b=md5ii(b,d,c,h,a[_+11],10,-1120210379),h=md5ii(h,b,d,c,a[_+2],15,718787259),c=md5ii(c,h,b,d,a[_+9],21,-343485551),d=safeAdd(d,$),c=safeAdd(c,_e),h=safeAdd(h,tt),b=safeAdd(b,rt)}return[d,c,h,b]}function bytesToWords(a){if(a.length===0)return[];for(var s=a.length*8,d=new Uint32Array(getOutputLength(s)),c=0;c<s;c+=8)d[c>>5]|=(a[c/8]&255)<<c%32;return d}function safeAdd(a,s){var d=(a&65535)+(s&65535),c=(a>>16)+(s>>16)+(d>>16);return c<<16|d&65535}function bitRotateLeft(a,s){return a<<s|a>>>32-s}function md5cmn(a,s,d,c,h,b){return safeAdd(bitRotateLeft(safeAdd(safeAdd(s,a),safeAdd(c,b)),h),d)}function md5ff(a,s,d,c,h,b,_){return md5cmn(s&d|~s&c,a,s,h,b,_)}function md5gg(a,s,d,c,h,b,_){return md5cmn(s&c|d&~c,a,s,h,b,_)}function md5hh(a,s,d,c,h,b,_){return md5cmn(s^d^c,a,s,h,b,_)}function md5ii(a,s,d,c,h,b,_){return md5cmn(d^(s|~c),a,s,h,b,_)}var v3=v35("v3",48,md5),v3$1=v3;function v4(a,s,d){a=a||{};var c=a.random||(a.rng||rng)();if(c[6]=c[6]&15|64,c[8]=c[8]&63|128,s){d=d||0;for(var h=0;h<16;++h)s[d+h]=c[h];return s}return stringify(c)}function f(a,s,d,c){switch(a){case 0:return s&d^~s&c;case 1:return s^d^c;case 2:return s&d^s&c^d&c;case 3:return s^d^c}}function ROTL(a,s){return a<<s|a>>>32-s}function sha1(a){var s=[1518500249,1859775393,2400959708,3395469782],d=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof a=="string"){var c=unescape(encodeURIComponent(a));a=[];for(var h=0;h<c.length;++h)a.push(c.charCodeAt(h))}else Array.isArray(a)||(a=Array.prototype.slice.call(a));a.push(128);for(var b=a.length/4+2,_=Math.ceil(b/16),$=new Array(_),_e=0;_e<_;++_e){for(var tt=new Uint32Array(16),rt=0;rt<16;++rt)tt[rt]=a[_e*64+rt*4]<<24|a[_e*64+rt*4+1]<<16|a[_e*64+rt*4+2]<<8|a[_e*64+rt*4+3];$[_e]=tt}$[_-1][14]=(a.length-1)*8/Math.pow(2,32),$[_-1][14]=Math.floor($[_-1][14]),$[_-1][15]=(a.length-1)*8&4294967295;for(var ot=0;ot<_;++ot){for(var it=new Uint32Array(80),st=0;st<16;++st)it[st]=$[ot][st];for(var lt=16;lt<80;++lt)it[lt]=ROTL(it[lt-3]^it[lt-8]^it[lt-14]^it[lt-16],1);for(var dt=d[0],ut=d[1],ht=d[2],nt=d[3],ct=d[4],mt=0;mt<80;++mt){var kt=Math.floor(mt/20),Tt=ROTL(dt,5)+f(kt,ut,ht,nt)+ct+s[kt]+it[mt]>>>0;ct=nt,nt=ht,ht=ROTL(ut,30)>>>0,ut=dt,dt=Tt}d[0]=d[0]+dt>>>0,d[1]=d[1]+ut>>>0,d[2]=d[2]+ht>>>0,d[3]=d[3]+nt>>>0,d[4]=d[4]+ct>>>0}return[d[0]>>24&255,d[0]>>16&255,d[0]>>8&255,d[0]&255,d[1]>>24&255,d[1]>>16&255,d[1]>>8&255,d[1]&255,d[2]>>24&255,d[2]>>16&255,d[2]>>8&255,d[2]&255,d[3]>>24&255,d[3]>>16&255,d[3]>>8&255,d[3]&255,d[4]>>24&255,d[4]>>16&255,d[4]>>8&255,d[4]&255]}var v5=v35("v5",80,sha1),v5$1=v5,nil="00000000-0000-0000-0000-000000000000";function version$4(a){if(!validate$1(a))throw TypeError("Invalid UUID");return parseInt(a.substr(14,1),16)}var esmBrowser=Object.freeze(Object.defineProperty({__proto__:null,v1,v3:v3$1,v4,v5:v5$1,NIL:nil,version:version$4,validate:validate$1,stringify,parse:parse$2},Symbol.toStringTag,{value:"Module"})),require$$1$2=getAugmentedNamespace(esmBrowser);class EnhancedMap$1 extends Map{computeIfAbsent(s,d){if(this.has(s))return this.get(s);const c=d(s);return this.set(s,c),c}computeIfPresent(s,d){const c=this.get(s);if(c===void 0)return;const h=d(s,c);return h!==void 0?this.set(s,h):this.delete(s),h}compute(s,d){const c=this.get(s),h=d(s,c);return h?this.set(s,h):this.delete(s),h}}var InternalLogLevel$1;(function(a){a[a.Trace=0]="Trace",a[a.Debug=1]="Debug",a[a.Info=2]="Info",a[a.Warn=3]="Warn",a[a.Error=4]="Error"})(InternalLogLevel$1||(InternalLogLevel$1={}));function getInternalLogger$1(a){return provider$1.getLogger(a)}const INTERNAL_LOGGING_SETTINGS$1={setInternalLogLevel:a=>provider$1.changeLogLevel(a),setOutput:a=>provider$1.changeOutput(a),reset:()=>provider$1.reset()};class InternalLoggerImpl$1{constructor(s,d,c){this._name=s,this._level=d,this._fnOutput=c}trace(s){this.log(InternalLogLevel$1.Trace,s)}debug(s){this.log(InternalLogLevel$1.Debug,s)}error(s,d){this.log(InternalLogLevel$1.Error,s,d)}info(s){this.log(InternalLogLevel$1.Info,s)}warn(s,d){this.log(InternalLogLevel$1.Warn,s,d)}setLevel(s){this._level=s}setOutput(s){this._fnOutput=s}log(s,d,c){this._level>s||this._fnOutput(`${InternalLogLevel$1[this._level].toString()} <INTERNAL LOGGER> ${this._name} ${d()}${c?`
`+c.stack:""}`)}}class InternalProviderImpl$1{constructor(){this._loggers=new EnhancedMap$1,this._logLevel=InternalLogLevel$1.Error,this._fnOutput=InternalProviderImpl$1.logConsole}getLogger(s){return this._loggers.computeIfAbsent(s,d=>new InternalLoggerImpl$1(d,this._logLevel,this._fnOutput))}changeLogLevel(s){this._logLevel=s,this._loggers.forEach(d=>d.setLevel(s))}changeOutput(s){this._fnOutput=s,this._loggers.forEach(d=>d.setOutput(this._fnOutput))}reset(){this.changeLogLevel(InternalLogLevel$1.Error),this._fnOutput=InternalProviderImpl$1.logConsole,this._loggers.forEach(s=>s.setOutput(this._fnOutput))}static logConsole(s){console&&console.log&&console.log(s)}}const provider$1=new InternalProviderImpl$1;var InternalLogger$1=Object.freeze({__proto__:null,get InternalLogLevel(){return InternalLogLevel$1},getInternalLogger:getInternalLogger$1,INTERNAL_LOGGING_SETTINGS:INTERNAL_LOGGING_SETTINGS$1}),LogLevel$2;(function(a){a[a.Trace=0]="Trace",a[a.Debug=1]="Debug",a[a.Info=2]="Info",a[a.Warn=3]="Warn",a[a.Error=4]="Error",a[a.Fatal=5]="Fatal"})(LogLevel$2||(LogLevel$2={}));(function(a){function s(d){switch(d.toLowerCase()){case"trace":return a.Trace;case"debug":return a.Debug;case"info":return a.Info;case"warn":return a.Warn;case"error":return a.Error;case"fatal":return a.Fatal;default:return}}a.toLogLevel=s})(LogLevel$2||(LogLevel$2={}));class CoreLoggerImpl$1{constructor(s){this._runtime=s}get id(){return this._runtime.id}get logLevel(){return this._runtime.level}get runtimeSettings(){return Object.assign({},this._runtime)}set runtimeSettings(s){this._runtime=s}trace(s,...d){this.logMessage(LogLevel$2.Trace,s,d)}debug(s,...d){this.logMessage(LogLevel$2.Debug,s,d)}info(s,...d){this.logMessage(LogLevel$2.Info,s,d)}warn(s,...d){this.logMessage(LogLevel$2.Warn,s,d)}error(s,...d){this.logMessage(LogLevel$2.Error,s,d)}fatal(s,...d){this.logMessage(LogLevel$2.Fatal,s,d)}logMessage(s,d,c){if(this._runtime.level>s)return;const h=Date.now(),b=typeof d=="string"?d:d(),_=CoreLoggerImpl$1.getErrorAndArgs(c);switch(this._runtime.channel.type){case"RawLogChannel":this._runtime.channel.write({message:b,exception:_.error,args:_.args,timeInMillis:h,level:s,logNames:this._runtime.name},this._runtime.argumentFormatter);return;case"LogChannel":this._runtime.channel.write(this.createLogMessage(b,s,_,h));break}}formatArgValue(s){try{return this._runtime.argumentFormatter(s)}catch{return`>>ARG CONVERT FAILED: '${s!==void 0?s.toString():"undefined"}'<<`}}createLogMessage(s,d,c,h){let b;const _=c.error,$=c.args;_&&(b=`${_.name}: ${_.message}`,_.stack&&(b+=`@
${_.stack}`));const _e=this._runtime.dateFormatter(h);let tt=LogLevel$2[d].toUpperCase();tt.length<5&&(tt+=" ");const rt=typeof this._runtime.name=="string"?this._runtime.name:this._runtime.name.join(", "),ot=typeof $!="undefined"&&$.length>0?" ["+$.map(st=>this.formatArgValue(st)).join(", ")+"]":"";return{message:_e+" "+tt+" ["+rt+"] "+s+ot,error:b}}static getErrorAndArgs(s){if(s.length===0)return{};let d,c;const h=s[0];if(h instanceof Error)return d=h,c=s.length>1?s.slice(1):void 0,{error:d,args:c};if(typeof h=="function"){const b=h();return b instanceof Error?(d=b,c=s.length>1?s.slice(1):void 0,{error:d,args:c}):s.length===1?Array.isArray(b)?{args:b.length>0?b:void 0}:{args:b}:Array.isArray(b)?{args:[...b,...s.slice(1)]}:{args:[b,...s.slice(1)]}}return{args:s}}}function padStart$1(a,s,d=" "){return padInternal$1(a,s,"start",d)}function padEnd$1(a,s,d=" "){return padInternal$1(a,s,"end",d)}function maxLengthStringValueInArray$1(a){return a.map(s=>s.length).reduce((s,d)=>d>s?d:s,0)}function padInternal$1(a,s,d,c=" "){if(s<=a.length)return a;if(c.length>1)throw new Error(`Fill char must be one char exactly, it is: ${c.length}`);const h=s-a.length;let b="";for(let _=0;_<h;_++)b+=c;return d==="start"?b+a:a+b}function formatArgument$1(a){return a===void 0?"undefined":JSON.stringify(a)}function formatDate$1(a){const s=new Date(a),d=s.getFullYear(),c=padStart$1((s.getMonth()+1).toString(),2,"0"),h=padStart$1(s.getDate().toString(),2,"0"),b=padStart$1(s.getHours().toString(),2,"0"),_=padStart$1(s.getMinutes().toString(),2,"0"),$=padStart$1(s.getSeconds().toString(),2,"0"),_e=padStart$1(s.getMilliseconds().toString(),2,"0");return`${d}-${c}-${h} ${b}:${_}:${$},${_e}`}class ConsoleLogChannel$1{constructor(){this.type="LogChannel"}write(s){console&&console.log&&console.log(s.message+(s.error?`
${s.error}`:""))}}var DefaultChannels$1;(function(a){function s(){return new ConsoleLogChannel$1}a.createConsoleChannel=s})(DefaultChannels$1||(DefaultChannels$1={}));class LogProviderImpl$1{constructor(s,d){this._log=getInternalLogger$1("core.impl.LogProviderImpl"),this._name=s,this._settings=d,this._loggers=new EnhancedMap$1,this._idToKeyMap=new EnhancedMap$1,this._globalRuntimeSettings={level:d.level,channel:d.channel},this._nextLoggerId=1,this._log.trace(()=>`Created LogProviderImpl with settings: ${JSON.stringify(this._settings)}`)}get runtimeSettings(){return Object.assign(Object.assign({},this._settings),{level:this._globalRuntimeSettings.level,channel:this._globalRuntimeSettings.channel})}getLogger(s){return this.getOrCreateLogger(s)}updateLoggerRuntime(s,d){this._log.debug(()=>`Updating logger ${s.id} runtime settings using: '${JSON.stringify(d)}'`);const c=this._idToKeyMap.get(s.id);return c===void 0?(this._log.warn(()=>`Cannot update logger with id: ${s.id}, it was not found.`),!1):(this._loggers.computeIfPresent(c,(h,b)=>(b.runtimeSettings=LogProviderImpl$1.mergeRuntimeSettingsIntoLogRuntime(b.runtimeSettings,d),b)),!0)}updateRuntimeSettings(s){this._log.debug(()=>`Updating global runtime settings and updating existing loggers runtime settings using: '${JSON.stringify(s)}'`),this._globalRuntimeSettings={level:s.level!==void 0?s.level:this._globalRuntimeSettings.level,channel:s.channel!==void 0?s.channel:this._globalRuntimeSettings.channel},this._loggers.forEach(d=>d.runtimeSettings=LogProviderImpl$1.mergeRuntimeSettingsIntoLogRuntime(d.runtimeSettings,s))}clear(){this._loggers.clear(),this._idToKeyMap.clear(),this._globalRuntimeSettings=Object.assign({},this._settings),this._nextLoggerId=1}getOrCreateLogger(s){const d=LogProviderImpl$1.createKey(s),c=this._loggers.computeIfAbsent(d,()=>{const h={level:this._globalRuntimeSettings.level,channel:this._globalRuntimeSettings.channel,id:this.nextLoggerId(),name:s,argumentFormatter:this._settings.argumentFormatter,dateFormatter:this._settings.dateFormatter};return new CoreLoggerImpl$1(h)});return this._idToKeyMap.computeIfAbsent(c.id,()=>d),c}nextLoggerId(){const s=this._name+"_"+this._nextLoggerId;return this._nextLoggerId++,s}static mergeRuntimeSettingsIntoLogRuntime(s,d){return Object.assign(Object.assign({},s),{level:d.level!==void 0?d.level:s.level,channel:d.channel!==void 0?d.channel:s.channel})}static createKey(s){return typeof s=="string"?s:s.join(",")}}function createLogProvider$1(a,s){return new LogProviderImpl$1(a,s)}var index$1=Object.freeze({__proto__:null,EnhancedMap:EnhancedMap$1,padStart:padStart$1,padEnd:padEnd$1,maxLengthStringValueInArray:maxLengthStringValueInArray$1});class ArrayLogChannel{constructor(){this._buffer=[],this.type="LogChannel"}write(s){this._buffer.push(s)}get logMessages(){return this._buffer}get messages(){return this._buffer.map(s=>s.message)}}class ArrayRawLogChannel{constructor(){this._buffer=[],this.type="RawLogChannel"}write(s,d){this._buffer.push(s)}get messages(){return this._buffer.map(s=>s.message)}get errors(){return this._buffer.map(s=>s.exception)}get size(){return this._buffer.length}get rawMessages(){return this._buffer}clear(){this._buffer=[]}}class TestControlMessage{constructor(){this._messages=[],this.write=this.write.bind(this)}get messages(){return this._messages}write(s){this._messages.push(s)}clear(){this._messages=[]}}var TestClasses=Object.freeze({__proto__:null,ArrayLogChannel,ArrayRawLogChannel,TestControlMessage}),typescriptLogging_esm=Object.freeze(Object.defineProperty({__proto__:null,$internal:InternalLogger$1,$test:TestClasses,get DefaultChannels(){return DefaultChannels$1},get LogLevel(){return LogLevel$2},createLogProvider:createLogProvider$1,formatArgument:formatArgument$1,formatDate:formatDate$1,util:index$1},Symbol.toStringTag,{value:"Module"})),require$$2$1=getAugmentedNamespace(typescriptLogging_esm),layoutapi={},lib$1={},lib={},Metadata={};Object.defineProperty(Metadata,"__esModule",{value:!0});Metadata.Metadata=void 0;Metadata.Metadata=function(s){const d=new Map,c={set(h,b){if(h=normalizeKey(h),Array.isArray(b))if(b.length===0)d.delete(h);else{for(const _ of b)validate(h,_);d.set(h,h.endsWith("-bin")?b:[b.join(", ")])}else validate(h,b),d.set(h,[b]);return c},append(h,b){h=normalizeKey(h),validate(h,b);let _=d.get(h);return _==null&&(_=[],d.set(h,_)),_.push(b),h.endsWith("-bin")||d.set(h,[_.join(", ")]),c},delete(h){h=normalizeKey(h),d.delete(h)},get(h){var b;return h=normalizeKey(h),(b=d.get(h))===null||b===void 0?void 0:b[0]},getAll(h){var b;return h=normalizeKey(h),(b=d.get(h))!==null&&b!==void 0?b:[]},has(h){return h=normalizeKey(h),d.has(h)},[Symbol.iterator](){return d[Symbol.iterator]()}};if(s!=null){const h=isIterable$1(s)?s:Object.entries(s);for(const[b,_]of h)c.set(b,_)}return c};function normalizeKey(a){return a.toLowerCase()}function validate(a,s){if(!/^[0-9a-z_.-]+$/.test(a))throw new Error(`Metadata key '${a}' contains illegal characters`);if(a.endsWith("-bin")){if(!(s instanceof Uint8Array))throw new Error(`Metadata key '${a}' ends with '-bin', thus it must have binary value`)}else{if(typeof s!="string")throw new Error(`Metadata key '${a}' doesn't end with '-bin', thus it must have string value`);if(!/^[ -~]*$/.test(s))throw new Error(`Metadata value '${s}' of key '${a}' contains illegal characters`)}}function isIterable$1(a){return Symbol.iterator in a}var Status={};(function(a){Object.defineProperty(a,"__esModule",{value:!0}),a.Status=void 0,function(s){s[s.OK=0]="OK",s[s.CANCELLED=1]="CANCELLED",s[s.UNKNOWN=2]="UNKNOWN",s[s.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",s[s.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",s[s.NOT_FOUND=5]="NOT_FOUND",s[s.ALREADY_EXISTS=6]="ALREADY_EXISTS",s[s.PERMISSION_DENIED=7]="PERMISSION_DENIED",s[s.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",s[s.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",s[s.ABORTED=10]="ABORTED",s[s.OUT_OF_RANGE=11]="OUT_OF_RANGE",s[s.UNIMPLEMENTED=12]="UNIMPLEMENTED",s[s.INTERNAL=13]="INTERNAL",s[s.UNAVAILABLE=14]="UNAVAILABLE",s[s.DATA_LOSS=15]="DATA_LOSS",s[s.UNAUTHENTICATED=16]="UNAUTHENTICATED"}(a.Status||(a.Status={}))})(Status);var MethodDescriptor={};Object.defineProperty(MethodDescriptor,"__esModule",{value:!0});var CallOptions={};Object.defineProperty(CallOptions,"__esModule",{value:!0});var ClientMiddleware={};Object.defineProperty(ClientMiddleware,"__esModule",{value:!0});var composeClientMiddleware$1={};Object.defineProperty(composeClientMiddleware$1,"__esModule",{value:!0});composeClientMiddleware$1.composeClientMiddleware=void 0;function composeClientMiddleware(a,s){return(d,c)=>s({...d,next:(h,b)=>a({...d,request:h},b)},c)}composeClientMiddleware$1.composeClientMiddleware=composeClientMiddleware;var ClientError$1={},cjs={},helpers={};helpers.__esModule=void 0;helpers.__esModule=!0;var objectSetPrototypeOfIsDefined=typeof Object.setPrototypeOf=="function",objectGetPrototypeOfIsDefined=typeof Object.getPrototypeOf=="function",objectDefinePropertyIsDefined=typeof Object.defineProperty=="function",objectCreateIsDefined=typeof Object.create=="function",objectHasOwnPropertyIsDefined=typeof Object.prototype.hasOwnProperty=="function",setPrototypeOf=function(s,d){objectSetPrototypeOfIsDefined?Object.setPrototypeOf(s,d):s.__proto__=d};helpers.setPrototypeOf=setPrototypeOf;var getPrototypeOf=function(s){return objectGetPrototypeOfIsDefined?Object.getPrototypeOf(s):s.__proto__||s.prototype};helpers.getPrototypeOf=getPrototypeOf;var ie8ObjectDefinePropertyBug=!1,defineProperty=function a(s,d,c){if(objectDefinePropertyIsDefined&&!ie8ObjectDefinePropertyBug)try{Object.defineProperty(s,d,c)}catch{ie8ObjectDefinePropertyBug=!0,a(s,d,c)}else s[d]=c.value};helpers.defineProperty=defineProperty;var hasOwnProperty$1=function(s,d){return objectHasOwnPropertyIsDefined?s.hasOwnProperty(s,d):s[d]===void 0};helpers.hasOwnProperty=hasOwnProperty$1;var objectCreate=function(s,d){if(objectCreateIsDefined)return Object.create(s,d);var c=function(){};c.prototype=s;var h=new c;if(typeof d=="undefined")return h;if(typeof d=="null")throw new Error("PropertyDescriptors must not be null.");if(typeof d=="object")for(var b in d)hasOwnProperty$1(d,b)&&(h[b]=d[b].value);return h};helpers.objectCreate=objectCreate;(function(a){a.__esModule=void 0,a.__esModule=!0;var s=helpers,d=s.setPrototypeOf,c=s.getPrototypeOf,h=s.defineProperty,b=s.objectCreate,_=new Error().toString()==="[object Error]",$="";function _e(tt){var rt=this.constructor,ot=rt.name||function(){var ut=rt.toString().match(/^function\s*([^\s(]+)/);return ut===null?$||"Error":ut[1]}(),it=ot==="Error",st=it?$:ot,lt=Error.apply(this,arguments);if(d(lt,c(this)),!(lt instanceof rt)||!(lt instanceof _e)){var lt=this;Error.apply(this,arguments),h(lt,"message",{configurable:!0,enumerable:!1,value:tt,writable:!0})}if(h(lt,"name",{configurable:!0,enumerable:!1,value:st,writable:!0}),Error.captureStackTrace&&Error.captureStackTrace(lt,it?_e:rt),lt.stack===void 0){var dt=new Error(tt);dt.name=lt.name,lt.stack=dt.stack}return _&&h(lt,"toString",{configurable:!0,enumerable:!1,value:function(){return(this.name||"Error")+(typeof this.message=="undefined"?"":": "+this.message)},writable:!0}),lt}$=_e.name||"ExtendableError",_e.prototype=b(Error.prototype,{constructor:{value:Error,enumerable:!1,writable:!0,configurable:!0}}),a.ExtendableError=_e,a.default=a.ExtendableError})(cjs);Object.defineProperty(ClientError$1,"__esModule",{value:!0});ClientError$1.ClientError=void 0;const ts_error_1$1=cjs,Status_1$1=Status;class ClientError extends ts_error_1$1.ExtendableError{constructor(s,d,c){super(`${s} ${Status_1$1.Status[d]}: ${c}`),this.path=s,this.code=d,this.details=c,this.name="ClientError",Object.defineProperty(this,"@@nice-grpc",{value:!0}),Object.defineProperty(this,"@@nice-grpc:ClientError",{value:!0})}static[Symbol.hasInstance](s){return this!==ClientError?this.prototype.isPrototypeOf(s):typeof s=="object"&&s!==null&&(s.constructor===ClientError||s["@@nice-grpc:ClientError"]===!0||s.name==="ClientError"&&s["@@nice-grpc"]===!0)}}ClientError$1.ClientError=ClientError;var CallContext={};Object.defineProperty(CallContext,"__esModule",{value:!0});var ServerMiddleware={};Object.defineProperty(ServerMiddleware,"__esModule",{value:!0});var composeServerMiddleware$1={};Object.defineProperty(composeServerMiddleware$1,"__esModule",{value:!0});composeServerMiddleware$1.composeServerMiddleware=void 0;function composeServerMiddleware(a,s){return(d,c)=>a({...d,next:(h,b)=>s({...d,request:h},b)},c)}composeServerMiddleware$1.composeServerMiddleware=composeServerMiddleware;var ServerError$1={};Object.defineProperty(ServerError$1,"__esModule",{value:!0});ServerError$1.ServerError=void 0;const ts_error_1=cjs,Status_1=Status;class ServerError extends ts_error_1.ExtendableError{constructor(s,d){super(`${Status_1.Status[s]}: ${d}`),this.code=s,this.details=d,this.name="ServerError",Object.defineProperty(this,"@@nice-grpc",{value:!0}),Object.defineProperty(this,"@@nice-grpc:ServerError",{value:!0})}static[Symbol.hasInstance](s){return this!==ServerError?this.prototype.isPrototypeOf(s):typeof s=="object"&&s!==null&&(s.constructor===ServerError||s["@@nice-grpc:ServerError"]===!0||s.name==="ServerError"&&s["@@nice-grpc"]===!0)}}ServerError$1.ServerError=ServerError;(function(a){var s=commonjsGlobal$1&&commonjsGlobal$1.__createBinding||(Object.create?function(c,h,b,_){_===void 0&&(_=b);var $=Object.getOwnPropertyDescriptor(h,b);(!$||("get"in $?!h.__esModule:$.writable||$.configurable))&&($={enumerable:!0,get:function(){return h[b]}}),Object.defineProperty(c,_,$)}:function(c,h,b,_){_===void 0&&(_=b),c[_]=h[b]}),d=commonjsGlobal$1&&commonjsGlobal$1.__exportStar||function(c,h){for(var b in c)b!=="default"&&!Object.prototype.hasOwnProperty.call(h,b)&&s(h,c,b)};Object.defineProperty(a,"__esModule",{value:!0}),d(Metadata,a),d(Status,a),d(MethodDescriptor,a),d(CallOptions,a),d(ClientMiddleware,a),d(composeClientMiddleware$1,a),d(ClientError$1,a),d(CallContext,a),d(ServerMiddleware,a),d(composeServerMiddleware$1,a),d(ServerError$1,a)})(lib);var serviceDefinitions={},grpcWeb={};Object.defineProperty(grpcWeb,"__esModule",{value:!0});grpcWeb.isGrpcWebServiceDefinition=grpcWeb.fromGrpcWebServiceDefinition=void 0;function fromGrpcWebServiceDefinition(a){const s={};for(const[d,c]of Object.entries(a)){if(d==="serviceName")continue;const h=c;s[uncapitalize(d)]={path:`/${a.serviceName}/${d}`,requestStream:h.requestStream,responseStream:h.responseStream,requestDeserialize:h.requestType.deserializeBinary,requestSerialize:b=>b.serializeBinary(),responseDeserialize:h.responseType.deserializeBinary,responseSerialize:b=>b.serializeBinary(),options:{}}}return s}grpcWeb.fromGrpcWebServiceDefinition=fromGrpcWebServiceDefinition;function isGrpcWebServiceDefinition(a){return"prototype"in a}grpcWeb.isGrpcWebServiceDefinition=isGrpcWebServiceDefinition;function uncapitalize(a){return a.length===0?a:a[0].toLowerCase()+a.slice(1)}var tsProto={};Object.defineProperty(tsProto,"__esModule",{value:!0});tsProto.isTsProtoServiceDefinition=tsProto.fromTsProtoServiceDefinition=void 0;function fromTsProtoServiceDefinition(a){const s={};for(const[d,c]of Object.entries(a.methods)){const h=c.requestType.encode,b=c.requestType.fromPartial,_=c.responseType.encode,$=c.responseType.fromPartial;s[d]={path:`/${a.fullName}/${c.name}`,requestStream:c.requestStream,responseStream:c.responseStream,requestDeserialize:c.requestType.decode,requestSerialize:b!=null?_e=>h(b(_e)).finish():_e=>h(_e).finish(),responseDeserialize:c.responseType.decode,responseSerialize:$!=null?_e=>_($(_e)).finish():_e=>_(_e).finish(),options:c.options}}return s}tsProto.fromTsProtoServiceDefinition=fromTsProtoServiceDefinition;function isTsProtoServiceDefinition(a){return"name"in a&&"fullName"in a&&"methods"in a}tsProto.isTsProtoServiceDefinition=isTsProtoServiceDefinition;Object.defineProperty(serviceDefinitions,"__esModule",{value:!0});serviceDefinitions.toGrpcWebMethodDefinition=serviceDefinitions.normalizeServiceDefinition=void 0;const grpc_web_1$5=grpcWeb,ts_proto_1=tsProto;function normalizeServiceDefinition(a){return(0,grpc_web_1$5.isGrpcWebServiceDefinition)(a)?(0,grpc_web_1$5.fromGrpcWebServiceDefinition)(a):(0,ts_proto_1.isTsProtoServiceDefinition)(a)?(0,ts_proto_1.fromTsProtoServiceDefinition)(a):a}serviceDefinitions.normalizeServiceDefinition=normalizeServiceDefinition;function toGrpcWebMethodDefinition(a){const[,s,d]=a.path.split("/");return{service:{serviceName:s},methodName:d,requestStream:a.requestStream,responseStream:a.responseStream,requestType:class{constructor(){throw new Error("Unexpected instantiation")}static deserializeBinary(c){return a.requestDeserialize(c)}},responseType:class{constructor(){throw new Error("Unexpected instantiation")}static deserializeBinary(c){return a.responseDeserialize(c)}}}}serviceDefinitions.toGrpcWebMethodDefinition=toGrpcWebMethodDefinition;var channel={};Object.defineProperty(channel,"__esModule",{value:!0});channel.createChannel=void 0;function createChannel(a,s){return{address:a,transport:s}}channel.createChannel=createChannel;var ClientFactory={},createBidiStreamingMethod$1={},grpcWebClient_umd={exports:{}};(function(a,s){(function(d,c){a.exports=c()})(commonjsGlobal$1,function(){return d={418:function(h,b){(function(_,$){for(var _e in $)_[_e]=$[_e]})(b,function(_){var $={};function _e(tt){if($[tt])return $[tt].exports;var rt=$[tt]={i:tt,l:!1,exports:{}};return _[tt].call(rt.exports,rt,rt.exports,_e),rt.l=!0,rt.exports}return _e.m=_,_e.c=$,_e.i=function(tt){return tt},_e.d=function(tt,rt,ot){_e.o(tt,rt)||Object.defineProperty(tt,rt,{configurable:!1,enumerable:!0,get:ot})},_e.n=function(tt){var rt=tt&&tt.__esModule?function(){return tt.default}:function(){return tt};return _e.d(rt,"a",rt),rt},_e.o=function(tt,rt){return Object.prototype.hasOwnProperty.call(tt,rt)},_e.p="",_e(_e.s=1)}([function(_,$,_e){Object.defineProperty($,"__esModule",{value:!0});var tt=_e(3),rt=function(){function ot(it,st){it===void 0&&(it={}),st===void 0&&(st={splitValues:!1});var lt,dt=this;this.headersMap={},it&&(typeof Headers!="undefined"&&it instanceof Headers?tt.getHeaderKeys(it).forEach(function(ut){tt.getHeaderValues(it,ut).forEach(function(ht){st.splitValues?dt.append(ut,tt.splitHeaderValue(ht)):dt.append(ut,ht)})}):typeof(lt=it)=="object"&&typeof lt.headersMap=="object"&&typeof lt.forEach=="function"?it.forEach(function(ut,ht){dt.append(ut,ht)}):typeof Map!="undefined"&&it instanceof Map?it.forEach(function(ut,ht){dt.append(ht,ut)}):typeof it=="string"?this.appendFromString(it):typeof it=="object"&&Object.getOwnPropertyNames(it).forEach(function(ut){var ht=it[ut];Array.isArray(ht)?ht.forEach(function(nt){dt.append(ut,nt)}):dt.append(ut,ht)}))}return ot.prototype.appendFromString=function(it){for(var st=it.split(`\r
`),lt=0;lt<st.length;lt++){var dt=st[lt],ut=dt.indexOf(":");if(ut>0){var ht=dt.substring(0,ut).trim(),nt=dt.substring(ut+1).trim();this.append(ht,nt)}}},ot.prototype.delete=function(it,st){var lt=tt.normalizeName(it);if(st===void 0)delete this.headersMap[lt];else{var dt=this.headersMap[lt];if(dt){var ut=dt.indexOf(st);ut>=0&&dt.splice(ut,1),dt.length===0&&delete this.headersMap[lt]}}},ot.prototype.append=function(it,st){var lt=this,dt=tt.normalizeName(it);Array.isArray(this.headersMap[dt])||(this.headersMap[dt]=[]),Array.isArray(st)?st.forEach(function(ut){lt.headersMap[dt].push(tt.normalizeValue(ut))}):this.headersMap[dt].push(tt.normalizeValue(st))},ot.prototype.set=function(it,st){var lt=tt.normalizeName(it);if(Array.isArray(st)){var dt=[];st.forEach(function(ut){dt.push(tt.normalizeValue(ut))}),this.headersMap[lt]=dt}else this.headersMap[lt]=[tt.normalizeValue(st)]},ot.prototype.has=function(it,st){var lt=this.headersMap[tt.normalizeName(it)];if(!Array.isArray(lt))return!1;if(st!==void 0){var dt=tt.normalizeValue(st);return lt.indexOf(dt)>=0}return!0},ot.prototype.get=function(it){var st=this.headersMap[tt.normalizeName(it)];return st!==void 0?st.concat():[]},ot.prototype.forEach=function(it){var st=this;Object.getOwnPropertyNames(this.headersMap).forEach(function(lt){it(lt,st.headersMap[lt])},this)},ot.prototype.toHeaders=function(){if(typeof Headers!="undefined"){var it=new Headers;return this.forEach(function(st,lt){lt.forEach(function(dt){it.append(st,dt)})}),it}throw new Error("Headers class is not defined")},ot}();$.BrowserHeaders=rt},function(_,$,_e){Object.defineProperty($,"__esModule",{value:!0});var tt=_e(0);$.BrowserHeaders=tt.BrowserHeaders},function(_,$,_e){Object.defineProperty($,"__esModule",{value:!0}),$.iterateHeaders=function(tt,rt){for(var ot=tt[Symbol.iterator](),it=ot.next();!it.done;)rt(it.value[0]),it=ot.next()},$.iterateHeadersKeys=function(tt,rt){for(var ot=tt.keys(),it=ot.next();!it.done;)rt(it.value),it=ot.next()}},function(_,$,_e){Object.defineProperty($,"__esModule",{value:!0});var tt=_e(2);$.normalizeName=function(rt){if(typeof rt!="string"&&(rt=String(rt)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(rt))throw new TypeError("Invalid character in header field name");return rt.toLowerCase()},$.normalizeValue=function(rt){return typeof rt!="string"&&(rt=String(rt)),rt},$.getHeaderValues=function(rt,ot){var it=rt;if(it instanceof Headers&&it.getAll)return it.getAll(ot);var st=it.get(ot);return st&&typeof st=="string"?[st]:st},$.getHeaderKeys=function(rt){var ot=rt,it={},st=[];return ot.keys?tt.iterateHeadersKeys(ot,function(lt){it[lt]||(it[lt]=!0,st.push(lt))}):ot.forEach?ot.forEach(function(lt,dt){it[dt]||(it[dt]=!0,st.push(dt))}):tt.iterateHeaders(ot,function(lt){var dt=lt[0];it[dt]||(it[dt]=!0,st.push(dt))}),st},$.splitHeaderValue=function(rt){var ot=[];return rt.split(", ").forEach(function(it){it.split(",").forEach(function(st){ot.push(st)})}),ot}}]))},617:function(h,b,_){Object.defineProperty(b,"__esModule",{value:!0}),b.ChunkParser=b.ChunkType=b.encodeASCII=b.decodeASCII=void 0;var $,_e=_(65);function tt(ut){return(ht=ut)===9||ht===10||ht===13||ut>=32&&ut<=126;var ht}function rt(ut){for(var ht=0;ht!==ut.length;++ht)if(!tt(ut[ht]))throw new Error("Metadata is not valid (printable) ASCII");return String.fromCharCode.apply(String,Array.prototype.slice.call(ut))}function ot(ut){return(128&ut.getUint8(0))==128}function it(ut){return ut.getUint32(1,!1)}function st(ut,ht,nt){return ut.byteLength-ht>=nt}function lt(ut,ht,nt){if(ut.slice)return ut.slice(ht,nt);var ct=ut.length;nt!==void 0&&(ct=nt);for(var mt=new Uint8Array(ct-ht),kt=0,Tt=ht;Tt<ct;Tt++)mt[kt++]=ut[Tt];return mt}b.decodeASCII=rt,b.encodeASCII=function(ut){for(var ht=new Uint8Array(ut.length),nt=0;nt!==ut.length;++nt){var ct=ut.charCodeAt(nt);if(!tt(ct))throw new Error("Metadata contains invalid ASCII");ht[nt]=ct}return ht},function(ut){ut[ut.MESSAGE=1]="MESSAGE",ut[ut.TRAILERS=2]="TRAILERS"}($=b.ChunkType||(b.ChunkType={}));var dt=function(){function ut(){this.buffer=null,this.position=0}return ut.prototype.parse=function(ht,nt){if(ht.length===0&&nt)return[];var ct,mt=[];if(this.buffer==null)this.buffer=ht,this.position=0;else if(this.position===this.buffer.byteLength)this.buffer=ht,this.position=0;else{var kt=this.buffer.byteLength-this.position,Tt=new Uint8Array(kt+ht.byteLength),Pt=lt(this.buffer,this.position);Tt.set(Pt,0);var At=new Uint8Array(ht);Tt.set(At,kt),this.buffer=Tt,this.position=0}for(;;){if(!st(this.buffer,this.position,5))return mt;var gt=lt(this.buffer,this.position,this.position+5),Ct=new DataView(gt.buffer,gt.byteOffset,gt.byteLength),Nt=it(Ct);if(!st(this.buffer,this.position,5+Nt))return mt;var vt=lt(this.buffer,this.position+5,this.position+5+Nt);if(this.position+=5+Nt,ot(Ct))return mt.push({chunkType:$.TRAILERS,trailers:(ct=vt,new _e.Metadata(rt(ct)))}),mt;mt.push({chunkType:$.MESSAGE,data:vt})}},ut}();b.ChunkParser=dt},8:function(h,b){var _;Object.defineProperty(b,"__esModule",{value:!0}),b.httpStatusToCode=b.Code=void 0,function($){$[$.OK=0]="OK",$[$.Canceled=1]="Canceled",$[$.Unknown=2]="Unknown",$[$.InvalidArgument=3]="InvalidArgument",$[$.DeadlineExceeded=4]="DeadlineExceeded",$[$.NotFound=5]="NotFound",$[$.AlreadyExists=6]="AlreadyExists",$[$.PermissionDenied=7]="PermissionDenied",$[$.ResourceExhausted=8]="ResourceExhausted",$[$.FailedPrecondition=9]="FailedPrecondition",$[$.Aborted=10]="Aborted",$[$.OutOfRange=11]="OutOfRange",$[$.Unimplemented=12]="Unimplemented",$[$.Internal=13]="Internal",$[$.Unavailable=14]="Unavailable",$[$.DataLoss=15]="DataLoss",$[$.Unauthenticated=16]="Unauthenticated"}(_=b.Code||(b.Code={})),b.httpStatusToCode=function($){switch($){case 0:return _.Internal;case 200:return _.OK;case 400:return _.InvalidArgument;case 401:return _.Unauthenticated;case 403:return _.PermissionDenied;case 404:return _.NotFound;case 409:return _.Aborted;case 412:return _.FailedPrecondition;case 429:return _.ResourceExhausted;case 499:return _.Canceled;case 500:return _.Unknown;case 501:return _.Unimplemented;case 503:return _.Unavailable;case 504:return _.DeadlineExceeded;default:return _.Unknown}}},934:function(h,b,_){Object.defineProperty(b,"__esModule",{value:!0}),b.client=void 0;var $=_(65),_e=_(617),tt=_(8),rt=_(346),ot=_(57),it=_(882);b.client=function(dt,ut){return new st(dt,ut)};var st=function(){function dt(ut,ht){this.started=!1,this.sentFirstMessage=!1,this.completed=!1,this.closed=!1,this.finishedSending=!1,this.onHeadersCallbacks=[],this.onMessageCallbacks=[],this.onEndCallbacks=[],this.parser=new _e.ChunkParser,this.methodDefinition=ut,this.props=ht,this.createTransport()}return dt.prototype.createTransport=function(){var ut=this.props.host+"/"+this.methodDefinition.service.serviceName+"/"+this.methodDefinition.methodName,ht={methodDefinition:this.methodDefinition,debug:this.props.debug||!1,url:ut,onHeaders:this.onTransportHeaders.bind(this),onChunk:this.onTransportChunk.bind(this),onEnd:this.onTransportEnd.bind(this)};this.props.transport?this.transport=this.props.transport(ht):this.transport=ot.makeDefaultTransport(ht)},dt.prototype.onTransportHeaders=function(ut,ht){if(this.props.debug&&rt.debug("onHeaders",ut,ht),this.closed)this.props.debug&&rt.debug("grpc.onHeaders received after request was closed - ignoring");else if(ht!==0){this.responseHeaders=ut,this.props.debug&&rt.debug("onHeaders.responseHeaders",JSON.stringify(this.responseHeaders,null,2));var nt=lt(ut);this.props.debug&&rt.debug("onHeaders.gRPCStatus",nt);var ct=nt&&nt>=0?nt:tt.httpStatusToCode(ht);this.props.debug&&rt.debug("onHeaders.code",ct);var mt=ut.get("grpc-message")||[];if(this.props.debug&&rt.debug("onHeaders.gRPCMessage",mt),this.rawOnHeaders(ut),ct!==tt.Code.OK){var kt=this.decodeGRPCStatus(mt[0]);this.rawOnError(ct,kt,ut)}}},dt.prototype.onTransportChunk=function(ut){var ht=this;if(this.closed)this.props.debug&&rt.debug("grpc.onChunk received after request was closed - ignoring");else{var nt=[];try{nt=this.parser.parse(ut)}catch(ct){return this.props.debug&&rt.debug("onChunk.parsing error",ct,ct.message),void this.rawOnError(tt.Code.Internal,"parsing error: "+ct.message)}nt.forEach(function(ct){if(ct.chunkType===_e.ChunkType.MESSAGE){var mt=ht.methodDefinition.responseType.deserializeBinary(ct.data);ht.rawOnMessage(mt)}else ct.chunkType===_e.ChunkType.TRAILERS&&(ht.responseHeaders?(ht.responseTrailers=new $.Metadata(ct.trailers),ht.props.debug&&rt.debug("onChunk.trailers",ht.responseTrailers)):(ht.responseHeaders=new $.Metadata(ct.trailers),ht.rawOnHeaders(ht.responseHeaders)))})}},dt.prototype.onTransportEnd=function(){if(this.props.debug&&rt.debug("grpc.onEnd"),this.closed)this.props.debug&&rt.debug("grpc.onEnd received after request was closed - ignoring");else if(this.responseTrailers!==void 0){var ut=lt(this.responseTrailers);if(ut!==null){var ht=this.responseTrailers.get("grpc-message"),nt=this.decodeGRPCStatus(ht[0]);this.rawOnEnd(ut,nt,this.responseTrailers)}else this.rawOnError(tt.Code.Internal,"Response closed without grpc-status (Trailers provided)")}else{if(this.responseHeaders===void 0)return void this.rawOnError(tt.Code.Unknown,"Response closed without headers");var ct=lt(this.responseHeaders),mt=this.responseHeaders.get("grpc-message");if(this.props.debug&&rt.debug("grpc.headers only response ",ct,mt),ct===null)return void this.rawOnEnd(tt.Code.Unknown,"Response closed without grpc-status (Headers only)",this.responseHeaders);var kt=this.decodeGRPCStatus(mt[0]);this.rawOnEnd(ct,kt,this.responseHeaders)}},dt.prototype.decodeGRPCStatus=function(ut){if(!ut)return"";try{return decodeURIComponent(ut)}catch{return ut}},dt.prototype.rawOnEnd=function(ut,ht,nt){var ct=this;this.props.debug&&rt.debug("rawOnEnd",ut,ht,nt),this.completed||(this.completed=!0,this.onEndCallbacks.forEach(function(mt){if(!ct.closed)try{mt(ut,ht,nt)}catch(kt){setTimeout(function(){throw kt},0)}}))},dt.prototype.rawOnHeaders=function(ut){this.props.debug&&rt.debug("rawOnHeaders",ut),this.completed||this.onHeadersCallbacks.forEach(function(ht){try{ht(ut)}catch(nt){setTimeout(function(){throw nt},0)}})},dt.prototype.rawOnError=function(ut,ht,nt){var ct=this;nt===void 0&&(nt=new $.Metadata),this.props.debug&&rt.debug("rawOnError",ut,ht),this.completed||(this.completed=!0,this.onEndCallbacks.forEach(function(mt){if(!ct.closed)try{mt(ut,ht,nt)}catch(kt){setTimeout(function(){throw kt},0)}}))},dt.prototype.rawOnMessage=function(ut){var ht=this;this.props.debug&&rt.debug("rawOnMessage",ut.toObject()),this.completed||this.closed||this.onMessageCallbacks.forEach(function(nt){if(!ht.closed)try{nt(ut)}catch(ct){setTimeout(function(){throw ct},0)}})},dt.prototype.onHeaders=function(ut){this.onHeadersCallbacks.push(ut)},dt.prototype.onMessage=function(ut){this.onMessageCallbacks.push(ut)},dt.prototype.onEnd=function(ut){this.onEndCallbacks.push(ut)},dt.prototype.start=function(ut){if(this.started)throw new Error("Client already started - cannot .start()");this.started=!0;var ht=new $.Metadata(ut||{});ht.set("content-type","application/grpc-web+proto"),ht.set("x-grpc-web","1"),this.transport.start(ht)},dt.prototype.send=function(ut){if(!this.started)throw new Error("Client not started - .start() must be called before .send()");if(this.closed)throw new Error("Client already closed - cannot .send()");if(this.finishedSending)throw new Error("Client already finished sending - cannot .send()");if(!this.methodDefinition.requestStream&&this.sentFirstMessage)throw new Error("Message already sent for non-client-streaming method - cannot .send()");this.sentFirstMessage=!0;var ht=it.frameRequest(ut);this.transport.sendMessage(ht)},dt.prototype.finishSend=function(){if(!this.started)throw new Error("Client not started - .finishSend() must be called before .close()");if(this.closed)throw new Error("Client already closed - cannot .send()");if(this.finishedSending)throw new Error("Client already finished sending - cannot .finishSend()");this.finishedSending=!0,this.transport.finishSend()},dt.prototype.close=function(){if(!this.started)throw new Error("Client not started - .start() must be called before .close()");if(this.closed)throw new Error("Client already closed - cannot .close()");this.closed=!0,this.props.debug&&rt.debug("request.abort aborting request"),this.transport.cancel()},dt}();function lt(dt){var ut=dt.get("grpc-status")||[];if(ut.length>0)try{var ht=ut[0];return parseInt(ht,10)}catch{return null}return null}},346:function(h,b){Object.defineProperty(b,"__esModule",{value:!0}),b.debug=void 0,b.debug=function(){for(var _=[],$=0;$<arguments.length;$++)_[$]=arguments[$];console.debug?console.debug.apply(null,_):console.log.apply(null,_)}},607:function(h,b,_){Object.defineProperty(b,"__esModule",{value:!0}),b.grpc=void 0;var $,_e=_(418),tt=_(57),rt=_(229),ot=_(540),it=_(210),st=_(859),lt=_(8),dt=_(938),ut=_(35),ht=_(934);($=b.grpc||(b.grpc={})).setDefaultTransport=tt.setDefaultTransportFactory,$.CrossBrowserHttpTransport=st.CrossBrowserHttpTransport,$.FetchReadableStreamTransport=rt.FetchReadableStreamTransport,$.XhrTransport=it.XhrTransport,$.WebsocketTransport=ot.WebsocketTransport,$.Code=lt.Code,$.Metadata=_e.BrowserHeaders,$.client=function(nt,ct){return ht.client(nt,ct)},$.invoke=dt.invoke,$.unary=ut.unary},938:function(h,b,_){Object.defineProperty(b,"__esModule",{value:!0}),b.invoke=void 0;var $=_(934);b.invoke=function(_e,tt){if(_e.requestStream)throw new Error(".invoke cannot be used with client-streaming methods. Use .client instead.");var rt=$.client(_e,{host:tt.host,transport:tt.transport,debug:tt.debug});return tt.onHeaders&&rt.onHeaders(tt.onHeaders),tt.onMessage&&rt.onMessage(tt.onMessage),tt.onEnd&&rt.onEnd(tt.onEnd),rt.start(tt.metadata),rt.send(tt.request),rt.finishSend(),{close:function(){rt.close()}}}},65:function(h,b,_){Object.defineProperty(b,"__esModule",{value:!0}),b.Metadata=void 0;var $=_(418);Object.defineProperty(b,"Metadata",{enumerable:!0,get:function(){return $.BrowserHeaders}})},57:function(h,b,_){Object.defineProperty(b,"__esModule",{value:!0}),b.makeDefaultTransport=b.setDefaultTransportFactory=void 0;var $=_(859),_e=function(tt){return $.CrossBrowserHttpTransport({withCredentials:!1})(tt)};b.setDefaultTransportFactory=function(tt){_e=tt},b.makeDefaultTransport=function(tt){return _e(tt)}},229:function(h,b,_){var $=this&&this.__assign||function(){return($=Object.assign||function(ot){for(var it,st=1,lt=arguments.length;st<lt;st++)for(var dt in it=arguments[st])Object.prototype.hasOwnProperty.call(it,dt)&&(ot[dt]=it[dt]);return ot}).apply(this,arguments)};Object.defineProperty(b,"__esModule",{value:!0}),b.detectFetchSupport=b.FetchReadableStreamTransport=void 0;var _e=_(65),tt=_(346);b.FetchReadableStreamTransport=function(ot){return function(it){return function(st,lt){return st.debug&&tt.debug("fetchRequest",st),new rt(st,lt)}(it,ot)}};var rt=function(){function ot(it,st){this.cancelled=!1,this.controller=self.AbortController&&new AbortController,this.options=it,this.init=st}return ot.prototype.pump=function(it,st){var lt=this;if(this.reader=it,this.cancelled)return this.options.debug&&tt.debug("Fetch.pump.cancel at first pump"),void this.reader.cancel().catch(function(dt){lt.options.debug&&tt.debug("Fetch.pump.reader.cancel exception",dt)});this.reader.read().then(function(dt){if(dt.done)return lt.options.onEnd(),st;lt.options.onChunk(dt.value),lt.pump(lt.reader,st)}).catch(function(dt){lt.cancelled?lt.options.debug&&tt.debug("Fetch.catch - request cancelled"):(lt.cancelled=!0,lt.options.debug&&tt.debug("Fetch.catch",dt.message),lt.options.onEnd(dt))})},ot.prototype.send=function(it){var st=this;fetch(this.options.url,$($({},this.init),{headers:this.metadata.toHeaders(),method:"POST",body:it,signal:this.controller&&this.controller.signal})).then(function(lt){if(st.options.debug&&tt.debug("Fetch.response",lt),st.options.onHeaders(new _e.Metadata(lt.headers),lt.status),!lt.body)return lt;st.pump(lt.body.getReader(),lt)}).catch(function(lt){st.cancelled?st.options.debug&&tt.debug("Fetch.catch - request cancelled"):(st.cancelled=!0,st.options.debug&&tt.debug("Fetch.catch",lt.message),st.options.onEnd(lt))})},ot.prototype.sendMessage=function(it){this.send(it)},ot.prototype.finishSend=function(){},ot.prototype.start=function(it){this.metadata=it},ot.prototype.cancel=function(){var it=this;this.cancelled?this.options.debug&&tt.debug("Fetch.cancel already cancelled"):(this.cancelled=!0,this.controller?(this.options.debug&&tt.debug("Fetch.cancel.controller.abort"),this.controller.abort()):this.options.debug&&tt.debug("Fetch.cancel.missing abort controller"),this.reader?(this.options.debug&&tt.debug("Fetch.cancel.reader.cancel"),this.reader.cancel().catch(function(st){it.options.debug&&tt.debug("Fetch.cancel.reader.cancel exception",st)})):this.options.debug&&tt.debug("Fetch.cancel before reader"))},ot}();b.detectFetchSupport=function(){return typeof Response!="undefined"&&Response.prototype.hasOwnProperty("body")&&typeof Headers=="function"}},859:function(h,b,_){Object.defineProperty(b,"__esModule",{value:!0}),b.CrossBrowserHttpTransport=void 0;var $=_(229),_e=_(210);b.CrossBrowserHttpTransport=function(tt){if($.detectFetchSupport()){var rt={credentials:tt.withCredentials?"include":"same-origin"};return $.FetchReadableStreamTransport(rt)}return _e.XhrTransport({withCredentials:tt.withCredentials})}},210:function(h,b,_){var $,_e=this&&this.__extends||($=function(ut,ht){return($=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(nt,ct){nt.__proto__=ct}||function(nt,ct){for(var mt in ct)Object.prototype.hasOwnProperty.call(ct,mt)&&(nt[mt]=ct[mt])})(ut,ht)},function(ut,ht){function nt(){this.constructor=ut}$(ut,ht),ut.prototype=ht===null?Object.create(ht):(nt.prototype=ht.prototype,new nt)});Object.defineProperty(b,"__esModule",{value:!0}),b.stringToArrayBuffer=b.MozChunkedArrayBufferXHR=b.XHR=b.XhrTransport=void 0;var tt=_(65),rt=_(346),ot=_(849);b.XhrTransport=function(ut){return function(ht){if(ot.detectMozXHRSupport())return new st(ht,ut);if(ot.detectXHROverrideMimeTypeSupport())return new it(ht,ut);throw new Error("This environment's XHR implementation cannot support binary transfer.")}};var it=function(){function ut(ht,nt){this.options=ht,this.init=nt}return ut.prototype.onProgressEvent=function(){this.options.debug&&rt.debug("XHR.onProgressEvent.length: ",this.xhr.response.length);var ht=this.xhr.response.substr(this.index);this.index=this.xhr.response.length;var nt=dt(ht);this.options.onChunk(nt)},ut.prototype.onLoadEvent=function(){this.options.debug&&rt.debug("XHR.onLoadEvent"),this.options.onEnd()},ut.prototype.onStateChange=function(){this.options.debug&&rt.debug("XHR.onStateChange",this.xhr.readyState),this.xhr.readyState===XMLHttpRequest.HEADERS_RECEIVED&&this.options.onHeaders(new tt.Metadata(this.xhr.getAllResponseHeaders()),this.xhr.status)},ut.prototype.sendMessage=function(ht){this.xhr.send(ht)},ut.prototype.finishSend=function(){},ut.prototype.start=function(ht){var nt=this;this.metadata=ht;var ct=new XMLHttpRequest;this.xhr=ct,ct.open("POST",this.options.url),this.configureXhr(),this.metadata.forEach(function(mt,kt){ct.setRequestHeader(mt,kt.join(", "))}),ct.withCredentials=Boolean(this.init.withCredentials),ct.addEventListener("readystatechange",this.onStateChange.bind(this)),ct.addEventListener("progress",this.onProgressEvent.bind(this)),ct.addEventListener("loadend",this.onLoadEvent.bind(this)),ct.addEventListener("error",function(mt){nt.options.debug&&rt.debug("XHR.error",mt),nt.options.onEnd(mt.error)})},ut.prototype.configureXhr=function(){this.xhr.responseType="text",this.xhr.overrideMimeType("text/plain; charset=x-user-defined")},ut.prototype.cancel=function(){this.options.debug&&rt.debug("XHR.abort"),this.xhr.abort()},ut}();b.XHR=it;var st=function(ut){function ht(){return ut!==null&&ut.apply(this,arguments)||this}return _e(ht,ut),ht.prototype.configureXhr=function(){this.options.debug&&rt.debug("MozXHR.configureXhr: setting responseType to 'moz-chunked-arraybuffer'"),this.xhr.responseType="moz-chunked-arraybuffer"},ht.prototype.onProgressEvent=function(){var nt=this.xhr.response;this.options.debug&&rt.debug("MozXHR.onProgressEvent: ",new Uint8Array(nt)),this.options.onChunk(new Uint8Array(nt))},ht}(it);function lt(ut,ht){var nt=ut.charCodeAt(ht);if(nt>=55296&&nt<=56319){var ct=ut.charCodeAt(ht+1);ct>=56320&&ct<=57343&&(nt=65536+(nt-55296<<10)+(ct-56320))}return nt}function dt(ut){for(var ht=new Uint8Array(ut.length),nt=0,ct=0;ct<ut.length;ct++){var mt=String.prototype.codePointAt?ut.codePointAt(ct):lt(ut,ct);ht[nt++]=255&mt}return ht}b.MozChunkedArrayBufferXHR=st,b.stringToArrayBuffer=dt},849:function(h,b){var _;function $(){if(_!==void 0)return _;if(XMLHttpRequest){_=new XMLHttpRequest;try{_.open("GET","https://localhost")}catch{}}return _}function _e(tt){var rt=$();if(!rt)return!1;try{return rt.responseType=tt,rt.responseType===tt}catch{}return!1}Object.defineProperty(b,"__esModule",{value:!0}),b.detectXHROverrideMimeTypeSupport=b.detectMozXHRSupport=b.xhrSupportsResponseType=void 0,b.xhrSupportsResponseType=_e,b.detectMozXHRSupport=function(){return typeof XMLHttpRequest!="undefined"&&_e("moz-chunked-arraybuffer")},b.detectXHROverrideMimeTypeSupport=function(){return typeof XMLHttpRequest!="undefined"&&XMLHttpRequest.prototype.hasOwnProperty("overrideMimeType")}},540:function(h,b,_){Object.defineProperty(b,"__esModule",{value:!0}),b.WebsocketTransport=void 0;var $,_e=_(346),tt=_(617);(function(ot){ot[ot.FINISH_SEND=1]="FINISH_SEND"})($||($={}));var rt=new Uint8Array([1]);b.WebsocketTransport=function(){return function(ot){return function(it){it.debug&&_e.debug("websocketRequest",it);var st,lt=function(ht){if(ht.substr(0,8)==="https://")return"wss://"+ht.substr(8);if(ht.substr(0,7)==="http://")return"ws://"+ht.substr(7);throw new Error("Websocket transport constructed with non-https:// or http:// host.")}(it.url),dt=[];function ut(ht){if(ht===$.FINISH_SEND)st.send(rt);else{var nt=ht,ct=new Int8Array(nt.byteLength+1);ct.set(new Uint8Array([0])),ct.set(nt,1),st.send(ct)}}return{sendMessage:function(ht){st&&st.readyState!==st.CONNECTING?ut(ht):dt.push(ht)},finishSend:function(){st&&st.readyState!==st.CONNECTING?ut($.FINISH_SEND):dt.push($.FINISH_SEND)},start:function(ht){(st=new WebSocket(lt,["grpc-websockets"])).binaryType="arraybuffer",st.onopen=function(){var nt;it.debug&&_e.debug("websocketRequest.onopen"),st.send((nt="",ht.forEach(function(ct,mt){nt+=ct+": "+mt.join(", ")+`\r
`}),tt.encodeASCII(nt))),dt.forEach(function(ct){ut(ct)})},st.onclose=function(nt){it.debug&&_e.debug("websocketRequest.onclose",nt),it.onEnd()},st.onerror=function(nt){it.debug&&_e.debug("websocketRequest.onerror",nt)},st.onmessage=function(nt){it.onChunk(new Uint8Array(nt.data))}},cancel:function(){it.debug&&_e.debug("websocket.abort"),st.close()}}}(ot)}}},35:function(h,b,_){Object.defineProperty(b,"__esModule",{value:!0}),b.unary=void 0;var $=_(65),_e=_(934);b.unary=function(tt,rt){if(tt.responseStream)throw new Error(".unary cannot be used with server-streaming methods. Use .invoke or .client instead.");if(tt.requestStream)throw new Error(".unary cannot be used with client-streaming methods. Use .client instead.");var ot=null,it=null,st=_e.client(tt,{host:rt.host,transport:rt.transport,debug:rt.debug});return st.onHeaders(function(lt){ot=lt}),st.onMessage(function(lt){it=lt}),st.onEnd(function(lt,dt,ut){rt.onEnd({status:lt,statusMessage:dt,headers:ot||new $.Metadata,message:it,trailers:ut})}),st.start(rt.metadata),st.send(rt.request),st.finishSend(),{close:function(){st.close()}}}},882:function(h,b){Object.defineProperty(b,"__esModule",{value:!0}),b.frameRequest=void 0,b.frameRequest=function(_){var $=_.serializeBinary(),_e=new ArrayBuffer($.byteLength+5);return new DataView(_e,1,4).setUint32(0,$.length,!1),new Uint8Array(_e,5).set($),new Uint8Array(_e)}}},c={},function h(b){if(c[b])return c[b].exports;var _=c[b]={exports:{}};return d[b].call(_.exports,_,_.exports,h),_.exports}(607);var d,c})})(grpcWebClient_umd);class AbortError extends Error{constructor(){super("The operation has been aborted"),this.message="The operation has been aborted",this.name="AbortError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,this.constructor)}}function isAbortError(a){return typeof a=="object"&&a!==null&&a.name==="AbortError"}function throwIfAborted(a){if(a.aborted)throw new AbortError}function rethrowAbortError(a){if(isAbortError(a))throw a}function catchAbortError(a){if(!isAbortError(a))throw a}function execute(a,s){return new Promise((d,c)=>{if(a.aborted){c(new AbortError);return}let h,b=!1;function _(){b||(b=!0,h!=null&&h())}const $=s(_e=>{d(_e),_()},_e=>{c(_e),_()});if(!b){const _e=()=>{const tt=$();tt==null?c(new AbortError):tt.then(()=>{c(new AbortError)},rt=>{c(rt)}),_()};a.addEventListener("abort",_e),h=()=>{a.removeEventListener("abort",_e)}}})}function abortable(a,s){if(a.aborted){const d=()=>{};s.then(d,d)}return execute(a,(d,c)=>(s.then(d,c),()=>{}))}function delay$1(a,s){return execute(a,d=>{const c=typeof s=="number"?s:s.getTime()-Date.now(),h=setTimeout(d,c);return()=>{clearTimeout(h)}})}function forever(a){return execute(a,()=>()=>{})}function waitForEvent(a,s,d,c){return execute(a,h=>{let b,_=!1;return b=listen(s,d,(..._e)=>{h(_e.length>1?_e:_e[0]),_=!0,b!=null&&b()},c),_&&b(),()=>{_=!0,b!=null&&b()}})}function listen(a,s,d,c){if(isEventTarget(a))return a.addEventListener(s,d,c),()=>a.removeEventListener(s,d,c);if(isJQueryStyleEventEmitter(a))return a.on(s,d),()=>a.off(s,d);if(isNodeStyleEventEmitter(a))return a.addListener(s,d),()=>a.removeListener(s,d);throw new Error("Invalid event target")}function isNodeStyleEventEmitter(a){return isFunction$2(a.addListener)&&isFunction$2(a.removeListener)}function isJQueryStyleEventEmitter(a){return isFunction$2(a.on)&&isFunction$2(a.off)}function isEventTarget(a){return isFunction$2(a.addEventListener)&&isFunction$2(a.removeEventListener)}const isFunction$2=a=>typeof a=="function";var browser$3={exports:{}};const _global=typeof self!="undefined"?self:typeof window!="undefined"?window:void 0;if(!_global)throw new Error("Unable to find global scope. Are you sure this is running in the browser?");if(!_global.AbortController)throw new Error('Could not find "AbortController" in the global scope. You need to polyfill it first');browser$3.exports=_global.AbortController;browser$3.exports.default=_global.AbortController;var AbortController$1=browser$3.exports;function all(a,s){return new Promise((d,c)=>{if(a.aborted){c(new AbortError);return}const h=new AbortController$1,b=s(h.signal);if(b.length===0){d([]);return}const _=()=>{h.abort()};a.addEventListener("abort",_);let $;const _e=new Array(b.length);let tt=0;function rt(){tt+=1,tt===b.length&&(a.removeEventListener("abort",_),$!=null?c($.reason):d(_e))}for(const[ot,it]of b.entries())it.then(st=>{_e[ot]=st,rt()},st=>{h.abort(),($==null||!isAbortError(st)&&isAbortError($.reason))&&($={reason:st}),rt()})})}function race$2(a,s){return new Promise((d,c)=>{if(a.aborted){c(new AbortError);return}const h=new AbortController$1,b=s(h.signal),_=()=>{h.abort()};a.addEventListener("abort",_);let $=0;function _e(rt){h.abort(),$+=1,$===b.length&&(a.removeEventListener("abort",_),rt.status==="fulfilled"?d(rt.value):c(rt.reason))}let tt;for(const rt of b)rt.then(ot=>{tt==null&&(tt={status:"fulfilled",value:ot}),_e(tt)},ot=>{(tt==null||!isAbortError(ot)&&(tt.status==="fulfilled"||isAbortError(tt.reason)))&&(tt={status:"rejected",reason:ot}),_e(tt)})})}async function retry$1(a,s,d={}){const{baseMs:c=1e3,maxDelayMs:h=15e3,onError:b,maxAttempts:_=1/0}=d;let $=0;const _e=()=>{$=-1};for(;;)try{return await s(a,$,_e)}catch(tt){if(rethrowAbortError(tt),$>=_)throw tt;let rt;if($===-1)rt=0;else{const ot=Math.min(h,Math.pow(2,$)*c);rt=Math.round(ot*(1+Math.random())/2)}b&&b(tt,$,rt),rt!==0&&await delay$1(a,rt),$+=1}}function spawn(a,s){if(a.aborted)return Promise.reject(new AbortError);const d=[],c=new AbortController$1,h=c.signal,b=()=>{c.abort()};a.addEventListener("abort",b);const _=()=>{a.removeEventListener("abort",b)},$=new Set,_e=()=>{for(const ot of $)ot.abort()};h.addEventListener("abort",_e);const tt=()=>{h.removeEventListener("abort",_e)};let rt=new Promise((ot,it)=>{let st,lt;dt(ut=>s(ut,{defer(ht){d.push(ht)},fork:dt})).join().then(ut=>{c.abort(),st={value:ut}},ut=>{c.abort(),(!isAbortError(ut)||lt==null)&&(lt={error:ut})});function dt(ut){if(h.aborted)return{abort(){},async join(){throw new AbortError}};const ht=new AbortController$1,nt=ht.signal,ct=ut(nt),mt={abort(){ht.abort()},join:()=>ct};return $.add(mt),ct.catch(catchAbortError).catch(kt=>{lt={error:kt},c.abort()}).finally(()=>{$.delete(mt),$.size===0&&(lt!=null?it(lt.error):ot(st.value))}),mt}});return rt=rt.finally(()=>{_(),tt();let ot=Promise.resolve();for(let it=d.length-1;it>=0;it--)ot=ot.finally(d[it]);return ot}),rt}function run$1(a){const s=new AbortController$1,d=a(s.signal).catch(catchAbortError);return()=>(s.abort(),d)}var es=Object.freeze(Object.defineProperty({__proto__:null,abortable,AbortError,isAbortError,throwIfAborted,rethrowAbortError,catchAbortError,delay:delay$1,execute,forever,waitForEvent,all,race:race$2,retry:retry$1,spawn,run:run$1},Symbol.toStringTag,{value:"Module"})),require$$1$1=getAugmentedNamespace(es),AsyncSink$1={};Object.defineProperty(AsyncSink$1,"__esModule",{value:!0});AsyncSink$1.AsyncSink=void 0;const ARRAY_VALUE="value",ARRAY_ERROR="error";class AsyncSink{constructor(){this._ended=!1,this._values=[],this._resolvers=[]}[Symbol.asyncIterator](){return this}write(s){this._push({type:ARRAY_VALUE,value:s})}error(s){this._push({type:ARRAY_ERROR,error:s})}_push(s){if(this._ended)throw new Error("AsyncSink already ended");if(this._resolvers.length>0){const{resolve:d,reject:c}=this._resolvers.shift();s.type===ARRAY_ERROR?c(s.error):d({done:!1,value:s.value})}else this._values.push(s)}next(){if(this._values.length>0){const{type:s,value:d,error:c}=this._values.shift();return s===ARRAY_ERROR?Promise.reject(c):Promise.resolve({done:!1,value:d})}return this._ended?Promise.resolve({done:!0}):new Promise((s,d)=>{this._resolvers.push({resolve:s,reject:d})})}end(){for(;this._resolvers.length>0;)this._resolvers.shift().resolve({done:!0});this._ended=!0}}AsyncSink$1.AsyncSink=AsyncSink;var isAsyncIterable$1={};Object.defineProperty(isAsyncIterable$1,"__esModule",{value:!0});isAsyncIterable$1.isAsyncIterable=void 0;function isAsyncIterable(a){return a!=null&&Symbol.asyncIterator in a}isAsyncIterable$1.isAsyncIterable=isAsyncIterable;var convertMetadata={},base64$4={exports:{}};(function(a,s){(function(d,c){a.exports=c()})(typeof self!="undefined"?self:typeof window!="undefined"?window:commonjsGlobal$1,function(){var d="3.7.2",c=d,h=typeof atob=="function",b=typeof btoa=="function",_=typeof Buffer=="function",$=typeof TextDecoder=="function"?new TextDecoder:void 0,_e=typeof TextEncoder=="function"?new TextEncoder:void 0,tt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",rt=Array.prototype.slice.call(tt),ot=function($t){var qt={};return $t.forEach(function(Wt,Ht){return qt[Wt]=Ht}),qt}(rt),it=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,st=String.fromCharCode.bind(String),lt=typeof Uint8Array.from=="function"?Uint8Array.from.bind(Uint8Array):function($t,qt){return qt===void 0&&(qt=function(Wt){return Wt}),new Uint8Array(Array.prototype.slice.call($t,0).map(qt))},dt=function($t){return $t.replace(/=/g,"").replace(/[+\/]/g,function(qt){return qt=="+"?"-":"_"})},ut=function($t){return $t.replace(/[^A-Za-z0-9\+\/]/g,"")},ht=function($t){for(var qt,Wt,Ht,vn,ln="",In=$t.length%3,dn=0;dn<$t.length;){if((Wt=$t.charCodeAt(dn++))>255||(Ht=$t.charCodeAt(dn++))>255||(vn=$t.charCodeAt(dn++))>255)throw new TypeError("invalid character found");qt=Wt<<16|Ht<<8|vn,ln+=rt[qt>>18&63]+rt[qt>>12&63]+rt[qt>>6&63]+rt[qt&63]}return In?ln.slice(0,In-3)+"===".substring(In):ln},nt=b?function($t){return btoa($t)}:_?function($t){return Buffer.from($t,"binary").toString("base64")}:ht,ct=_?function($t){return Buffer.from($t).toString("base64")}:function($t){for(var qt=4096,Wt=[],Ht=0,vn=$t.length;Ht<vn;Ht+=qt)Wt.push(st.apply(null,$t.subarray(Ht,Ht+qt)));return nt(Wt.join(""))},mt=function($t,qt){return qt===void 0&&(qt=!1),qt?dt(ct($t)):ct($t)},kt=function($t){if($t.length<2){var qt=$t.charCodeAt(0);return qt<128?$t:qt<2048?st(192|qt>>>6)+st(128|qt&63):st(224|qt>>>12&15)+st(128|qt>>>6&63)+st(128|qt&63)}else{var qt=65536+($t.charCodeAt(0)-55296)*1024+($t.charCodeAt(1)-56320);return st(240|qt>>>18&7)+st(128|qt>>>12&63)+st(128|qt>>>6&63)+st(128|qt&63)}},Tt=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,Pt=function($t){return $t.replace(Tt,kt)},At=_?function($t){return Buffer.from($t,"utf8").toString("base64")}:_e?function($t){return ct(_e.encode($t))}:function($t){return nt(Pt($t))},gt=function($t,qt){return qt===void 0&&(qt=!1),qt?dt(At($t)):At($t)},Ct=function($t){return gt($t,!0)},Nt=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,vt=function($t){switch($t.length){case 4:var qt=(7&$t.charCodeAt(0))<<18|(63&$t.charCodeAt(1))<<12|(63&$t.charCodeAt(2))<<6|63&$t.charCodeAt(3),Wt=qt-65536;return st((Wt>>>10)+55296)+st((Wt&1023)+56320);case 3:return st((15&$t.charCodeAt(0))<<12|(63&$t.charCodeAt(1))<<6|63&$t.charCodeAt(2));default:return st((31&$t.charCodeAt(0))<<6|63&$t.charCodeAt(1))}},Et=function($t){return $t.replace(Nt,vt)},It=function($t){if($t=$t.replace(/\s+/g,""),!it.test($t))throw new TypeError("malformed base64.");$t+="==".slice(2-($t.length&3));for(var qt,Wt="",Ht,vn,ln=0;ln<$t.length;)qt=ot[$t.charAt(ln++)]<<18|ot[$t.charAt(ln++)]<<12|(Ht=ot[$t.charAt(ln++)])<<6|(vn=ot[$t.charAt(ln++)]),Wt+=Ht===64?st(qt>>16&255):vn===64?st(qt>>16&255,qt>>8&255):st(qt>>16&255,qt>>8&255,qt&255);return Wt},xt=h?function($t){return atob(ut($t))}:_?function($t){return Buffer.from($t,"base64").toString("binary")}:It,Dt=_?function($t){return lt(Buffer.from($t,"base64"))}:function($t){return lt(xt($t),function(qt){return qt.charCodeAt(0)})},Ot=function($t){return Dt(Yt($t))},Jt=_?function($t){return Buffer.from($t,"base64").toString("utf8")}:$?function($t){return $.decode(Dt($t))}:function($t){return Et(xt($t))},Yt=function($t){return ut($t.replace(/[-_]/g,function(qt){return qt=="-"?"+":"/"}))},Qt=function($t){return Jt(Yt($t))},Ft=function($t){if(typeof $t!="string")return!1;var qt=$t.replace(/\s+/g,"").replace(/={0,2}$/,"");return!/[^\s0-9a-zA-Z\+/]/.test(qt)||!/[^\s0-9a-zA-Z\-_]/.test(qt)},pt=function($t){return{value:$t,enumerable:!1,writable:!0,configurable:!0}},_t=function(){var $t=function(qt,Wt){return Object.defineProperty(String.prototype,qt,pt(Wt))};$t("fromBase64",function(){return Qt(this)}),$t("toBase64",function(qt){return gt(this,qt)}),$t("toBase64URI",function(){return gt(this,!0)}),$t("toBase64URL",function(){return gt(this,!0)}),$t("toUint8Array",function(){return Ot(this)})},Lt=function(){var $t=function(qt,Wt){return Object.defineProperty(Uint8Array.prototype,qt,pt(Wt))};$t("toBase64",function(qt){return mt(this,qt)}),$t("toBase64URI",function(){return mt(this,!0)}),$t("toBase64URL",function(){return mt(this,!0)})},Gt=function(){_t(),Lt()},Ut={version:d,VERSION:c,atob:xt,atobPolyfill:It,btoa:nt,btoaPolyfill:ht,fromBase64:Qt,toBase64:gt,encode:gt,encodeURI:Ct,encodeURL:Ct,utob:Pt,btou:Et,decode:Qt,isValid:Ft,fromUint8Array:mt,toUint8Array:Ot,extendString:_t,extendUint8Array:Lt,extendBuiltins:Gt};return Ut.Base64={},Object.keys(Ut).forEach(function($t){return Ut.Base64[$t]=Ut[$t]}),Ut})})(base64$4);Object.defineProperty(convertMetadata,"__esModule",{value:!0});convertMetadata.convertMetadataFromGrpcWeb=convertMetadata.convertMetadataToGrpcWeb=void 0;const grpc_web_1$4=grpcWebClient_umd.exports,nice_grpc_common_1$5=lib,js_base64_1=base64$4.exports;function convertMetadataToGrpcWeb(a){const s=new grpc_web_1$4.grpc.Metadata;for(const[d,c]of a)for(const h of c)s.append(d,typeof h=="string"?h:js_base64_1.Base64.fromUint8Array(h));return s}convertMetadata.convertMetadataToGrpcWeb=convertMetadataToGrpcWeb;function convertMetadataFromGrpcWeb(a){const s=(0,nice_grpc_common_1$5.Metadata)();for(const[d,c]of Object.entries(a.headersMap))s.set(d,d.endsWith("-bin")?c.map(h=>js_base64_1.Base64.toUint8Array(h)):c);return s}convertMetadata.convertMetadataFromGrpcWeb=convertMetadataFromGrpcWeb;var __importDefault$9=commonjsGlobal$1&&commonjsGlobal$1.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(createBidiStreamingMethod$1,"__esModule",{value:!0});createBidiStreamingMethod$1.createBidiStreamingMethod=void 0;const nice_grpc_common_1$4=lib,grpc_web_1$3=grpcWebClient_umd.exports,abort_controller_x_1$4=require$$1$1,node_abort_controller_1$3=__importDefault$9(browser$3.exports),AsyncSink_1$1=AsyncSink$1,service_definitions_1$4=serviceDefinitions,isAsyncIterable_1$3=isAsyncIterable$1,convertMetadata_1$3=convertMetadata;function createBidiStreamingMethod(a,s,d,c){const h=(0,service_definitions_1$4.toGrpcWebMethodDefinition)(a),b={path:a.path,requestStream:a.requestStream,responseStream:a.responseStream,options:a.options};async function*_(_e,tt){if(!(0,isAsyncIterable_1$3.isAsyncIterable)(_e))throw new Error("A middleware passed invalid request to next(): expected a single message for bidirectional streaming method");const{metadata:rt=(0,nice_grpc_common_1$4.Metadata)(),signal:ot=new node_abort_controller_1$3.default().signal,onHeader:it,onTrailer:st}=tt,lt=new node_abort_controller_1$3.default,dt=new AsyncSink_1$1.AsyncSink,ut=grpc_web_1$3.grpc.client(h,{host:s.address,transport:s.transport});ut.onHeaders(ct=>{it==null||it((0,convertMetadata_1$3.convertMetadataFromGrpcWeb)(ct))}),ut.onMessage(ct=>{dt.write(ct)}),ut.onEnd((ct,mt,kt)=>{st==null||st((0,convertMetadata_1$3.convertMetadataFromGrpcWeb)(kt)),ct===grpc_web_1$3.grpc.Code.OK?dt.end():dt.error(new nice_grpc_common_1$4.ClientError(a.path,+ct,mt))}),ut.start((0,convertMetadata_1$3.convertMetadataToGrpcWeb)(rt));let ht;pipeRequest$1(lt.signal,_e,ut,a).then(()=>{ut.finishSend()},ct=>{(0,abort_controller_x_1$4.isAbortError)(ct)||(ht=ct,ut.close(),dt.end())});const nt=()=>{dt.error(new abort_controller_x_1$4.AbortError),lt.abort(),ut.close()};ot.addEventListener("abort",nt);try{yield*dt}finally{if(lt.abort(),ot.removeEventListener("abort",nt),(0,abort_controller_x_1$4.throwIfAborted)(ot),ht)throw ht}}const $=d==null?_:(_e,tt)=>d({method:b,requestStream:!0,request:_e,responseStream:!0,next:_},tt);return(_e,tt)=>{const ot=$(_e,{...c,...tt})[Symbol.asyncIterator]();return{[Symbol.asyncIterator](){return{async next(){const it=await ot.next();return it.done&&it.value!=null?await ot.throw(new Error("A middleware returned a message, but expected to return void for bidirectional streaming method")):it},return(){return ot.return()},throw(it){return ot.throw(it)}}}}}}createBidiStreamingMethod$1.createBidiStreamingMethod=createBidiStreamingMethod;async function pipeRequest$1(a,s,d,c){for await(const h of s)(0,abort_controller_x_1$4.throwIfAborted)(a),d.send({serializeBinary:()=>c.requestSerialize(h)})}var createClientStreamingMethod$1={},__importDefault$8=commonjsGlobal$1&&commonjsGlobal$1.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(createClientStreamingMethod$1,"__esModule",{value:!0});createClientStreamingMethod$1.createClientStreamingMethod=void 0;const nice_grpc_common_1$3=lib,grpc_web_1$2=grpcWebClient_umd.exports,abort_controller_x_1$3=require$$1$1,node_abort_controller_1$2=__importDefault$8(browser$3.exports),service_definitions_1$3=serviceDefinitions,isAsyncIterable_1$2=isAsyncIterable$1,convertMetadata_1$2=convertMetadata;function createClientStreamingMethod(a,s,d,c){const h=(0,service_definitions_1$3.toGrpcWebMethodDefinition)(a),b={path:a.path,requestStream:a.requestStream,responseStream:a.responseStream,options:a.options};async function*_(_e,tt){if(!(0,isAsyncIterable_1$2.isAsyncIterable)(_e))throw new Error("A middleware passed invalid request to next(): expected a single message for client streaming method");const{metadata:rt=(0,nice_grpc_common_1$3.Metadata)(),signal:ot=new node_abort_controller_1$2.default().signal,onHeader:it,onTrailer:st}=tt;return await(0,abort_controller_x_1$3.execute)(ot,(lt,dt)=>{const ut=new node_abort_controller_1$2.default;let ht;const nt=grpc_web_1$2.grpc.client(h,{host:s.address,transport:s.transport});return nt.onHeaders(ct=>{it==null||it((0,convertMetadata_1$2.convertMetadataFromGrpcWeb)(ct))}),nt.onMessage(ct=>{ht=ct}),nt.onEnd((ct,mt,kt)=>{st==null||st((0,convertMetadata_1$2.convertMetadataFromGrpcWeb)(kt)),ut.abort(),ct===grpc_web_1$2.grpc.Code.OK?lt(ht):dt(new nice_grpc_common_1$3.ClientError(a.path,+ct,mt))}),nt.start((0,convertMetadata_1$2.convertMetadataToGrpcWeb)(rt)),pipeRequest(ut.signal,_e,nt,a).then(()=>{nt.finishSend()},ct=>{(0,abort_controller_x_1$3.isAbortError)(ct)||(dt(ct),nt.close())}),()=>{ut.abort(),nt.close()}})}const $=d==null?_:(_e,tt)=>d({method:b,requestStream:!0,request:_e,responseStream:!1,next:_},tt);return async(_e,tt)=>{const ot=$(_e,{...c,...tt})[Symbol.asyncIterator]();let it=await ot.next();for(;;){if(!it.done){it=await ot.throw(new Error("A middleware yielded a message, but expected to only return a message for client streaming method"));continue}if(it.value==null){it=await ot.throw(new Error("A middleware returned void, but expected to return a message for client streaming method"));continue}return it.value}}}createClientStreamingMethod$1.createClientStreamingMethod=createClientStreamingMethod;async function pipeRequest(a,s,d,c){for await(const h of s)(0,abort_controller_x_1$3.throwIfAborted)(a),d.send({serializeBinary:()=>c.requestSerialize(h)})}var createServerStreamingMethod$1={},__importDefault$7=commonjsGlobal$1&&commonjsGlobal$1.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(createServerStreamingMethod$1,"__esModule",{value:!0});createServerStreamingMethod$1.createServerStreamingMethod=void 0;const grpc_web_1$1=grpcWebClient_umd.exports,abort_controller_x_1$2=require$$1$1,AsyncSink_1=AsyncSink$1,nice_grpc_common_1$2=lib,node_abort_controller_1$1=__importDefault$7(browser$3.exports),service_definitions_1$2=serviceDefinitions,convertMetadata_1$1=convertMetadata,isAsyncIterable_1$1=isAsyncIterable$1;function createServerStreamingMethod(a,s,d,c){const h=(0,service_definitions_1$2.toGrpcWebMethodDefinition)(a),b={path:a.path,requestStream:a.requestStream,responseStream:a.responseStream,options:a.options};async function*_(_e,tt){if((0,isAsyncIterable_1$1.isAsyncIterable)(_e))throw new Error("A middleware passed invalid request to next(): expected a single message for server streaming method");const{metadata:rt=(0,nice_grpc_common_1$2.Metadata)(),signal:ot=new node_abort_controller_1$1.default().signal,onHeader:it,onTrailer:st}=tt,lt=new AsyncSink_1.AsyncSink,dt=grpc_web_1$1.grpc.client(h,{host:s.address,transport:s.transport});dt.onHeaders(ht=>{it==null||it((0,convertMetadata_1$1.convertMetadataFromGrpcWeb)(ht))}),dt.onMessage(ht=>{lt.write(ht)}),dt.onEnd((ht,nt,ct)=>{st==null||st((0,convertMetadata_1$1.convertMetadataFromGrpcWeb)(ct)),ht===grpc_web_1$1.grpc.Code.OK?lt.end():lt.error(new nice_grpc_common_1$2.ClientError(a.path,+ht,nt))}),dt.start((0,convertMetadata_1$1.convertMetadataToGrpcWeb)(rt)),dt.send({serializeBinary:()=>a.requestSerialize(_e)}),dt.finishSend();const ut=()=>{lt.error(new abort_controller_x_1$2.AbortError),dt.close()};ot.addEventListener("abort",ut);try{yield*lt}finally{ot.removeEventListener("abort",ut),(0,abort_controller_x_1$2.throwIfAborted)(ot)}}const $=d==null?_:(_e,tt)=>d({method:b,requestStream:!1,request:_e,responseStream:!0,next:_},tt);return(_e,tt)=>{const ot=$(_e,{...c,...tt})[Symbol.asyncIterator]();return{[Symbol.asyncIterator](){return{async next(){const it=await ot.next();return it.done&&it.value!=null?await ot.throw(new Error("A middleware returned a message, but expected to return void for server streaming method")):it},return(){return ot.return()},throw(it){return ot.throw(it)}}}}}}createServerStreamingMethod$1.createServerStreamingMethod=createServerStreamingMethod;var createUnaryMethod$1={},__importDefault$6=commonjsGlobal$1&&commonjsGlobal$1.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(createUnaryMethod$1,"__esModule",{value:!0});createUnaryMethod$1.createUnaryMethod=void 0;const nice_grpc_common_1$1=lib,grpc_web_1=grpcWebClient_umd.exports,abort_controller_x_1$1=require$$1$1,node_abort_controller_1=__importDefault$6(browser$3.exports),service_definitions_1$1=serviceDefinitions,isAsyncIterable_1=isAsyncIterable$1,convertMetadata_1=convertMetadata;function createUnaryMethod(a,s,d,c){const h=(0,service_definitions_1$1.toGrpcWebMethodDefinition)(a),b={path:a.path,requestStream:a.requestStream,responseStream:a.responseStream,options:a.options};async function*_(_e,tt){if((0,isAsyncIterable_1.isAsyncIterable)(_e))throw new Error("A middleware passed invalid request to next(): expected a single message for unary method");const{metadata:rt=(0,nice_grpc_common_1$1.Metadata)(),signal:ot=new node_abort_controller_1.default().signal,onHeader:it,onTrailer:st}=tt;return await(0,abort_controller_x_1$1.execute)(ot,(lt,dt)=>{let ut;const ht=grpc_web_1.grpc.client(h,{host:s.address,transport:s.transport});return ht.onHeaders(nt=>{it==null||it((0,convertMetadata_1.convertMetadataFromGrpcWeb)(nt))}),ht.onMessage(nt=>{ut=nt}),ht.onEnd((nt,ct,mt)=>{st==null||st((0,convertMetadata_1.convertMetadataFromGrpcWeb)(mt)),nt===grpc_web_1.grpc.Code.OK?lt(ut):dt(new nice_grpc_common_1$1.ClientError(a.path,+nt,ct))}),ht.start((0,convertMetadata_1.convertMetadataToGrpcWeb)(rt)),ht.send({serializeBinary:()=>a.requestSerialize(_e)}),ht.finishSend(),()=>{ht.close()}})}const $=d==null?_:(_e,tt)=>d({method:b,requestStream:!1,request:_e,responseStream:!1,next:_},tt);return async(_e,tt)=>{const ot=$(_e,{...c,...tt})[Symbol.asyncIterator]();let it=await ot.next();for(;;){if(!it.done){it=await ot.throw(new Error("A middleware yielded a message, but expected to only return a message for unary method"));continue}if(it.value==null){it=await ot.throw(new Error("A middleware returned void, but expected to return a message for unary method"));continue}return it.value}}}createUnaryMethod$1.createUnaryMethod=createUnaryMethod;Object.defineProperty(ClientFactory,"__esModule",{value:!0});ClientFactory.createClient=ClientFactory.createClientFactory=void 0;const nice_grpc_common_1=lib,service_definitions_1=serviceDefinitions,createBidiStreamingMethod_1=createBidiStreamingMethod$1,createClientStreamingMethod_1=createClientStreamingMethod$1,createServerStreamingMethod_1=createServerStreamingMethod$1,createUnaryMethod_1=createUnaryMethod$1;function createClientFactory(){return createClientFactoryWithMiddleware()}ClientFactory.createClientFactory=createClientFactory;function createClient(a,s,d){return createClientFactory().create(a,s,d)}ClientFactory.createClient=createClient;function createClientFactoryWithMiddleware(a){return{use(s){return createClientFactoryWithMiddleware(a==null?s:(0,nice_grpc_common_1.composeClientMiddleware)(a,s))},create(s,d,c={}){const h={},b=Object.entries((0,service_definitions_1.normalizeServiceDefinition)(s));for(const[_,$]of b){const _e={...c["*"],...c[_]};$.requestStream?$.responseStream?h[_]=(0,createBidiStreamingMethod_1.createBidiStreamingMethod)($,d,a,_e):h[_]=(0,createClientStreamingMethod_1.createClientStreamingMethod)($,d,a,_e):$.responseStream?h[_]=(0,createServerStreamingMethod_1.createServerStreamingMethod)($,d,a,_e):h[_]=(0,createUnaryMethod_1.createUnaryMethod)($,d,a,_e)}return h}}}var Client={};Object.defineProperty(Client,"__esModule",{value:!0});(function(a){var s=commonjsGlobal$1&&commonjsGlobal$1.__createBinding||(Object.create?function(h,b,_,$){$===void 0&&($=_);var _e=Object.getOwnPropertyDescriptor(b,_);(!_e||("get"in _e?!b.__esModule:_e.writable||_e.configurable))&&(_e={enumerable:!0,get:function(){return b[_]}}),Object.defineProperty(h,$,_e)}:function(h,b,_,$){$===void 0&&($=_),h[$]=b[_]}),d=commonjsGlobal$1&&commonjsGlobal$1.__exportStar||function(h,b){for(var _ in h)_!=="default"&&!Object.prototype.hasOwnProperty.call(b,_)&&s(b,h,_)};Object.defineProperty(a,"__esModule",{value:!0}),a.Status=a.Metadata=a.composeClientMiddleware=a.ClientError=void 0;var c=lib;Object.defineProperty(a,"ClientError",{enumerable:!0,get:function(){return c.ClientError}}),Object.defineProperty(a,"composeClientMiddleware",{enumerable:!0,get:function(){return c.composeClientMiddleware}}),Object.defineProperty(a,"Metadata",{enumerable:!0,get:function(){return c.Metadata}}),Object.defineProperty(a,"Status",{enumerable:!0,get:function(){return c.Status}}),d(serviceDefinitions,a),d(channel,a),d(ClientFactory,a),d(Client,a)})(lib$1);var dist$2={},api$3={},umd={exports:{}};(function(a,s){var d=function(c){Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;/**
 * @license
 * Copyright 2009 The Closure Library Authors
 * Copyright 2020 Daniel Wirtz / The long.js Authors.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * SPDX-License-Identifier: Apache-2.0
 */var h=null;try{h=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function b(Dt,Ot,Jt){this.low=Dt|0,this.high=Ot|0,this.unsigned=!!Jt}b.prototype.__isLong__,Object.defineProperty(b.prototype,"__isLong__",{value:!0});function _(Dt){return(Dt&&Dt.__isLong__)===!0}function $(Dt){var Ot=Math.clz32(Dt&-Dt);return Dt?31-Ot:Ot}b.isLong=_;var _e={},tt={};function rt(Dt,Ot){var Jt,Yt,Qt;return Ot?(Dt>>>=0,(Qt=0<=Dt&&Dt<256)&&(Yt=tt[Dt],Yt)?Yt:(Jt=it(Dt,0,!0),Qt&&(tt[Dt]=Jt),Jt)):(Dt|=0,(Qt=-128<=Dt&&Dt<128)&&(Yt=_e[Dt],Yt)?Yt:(Jt=it(Dt,Dt<0?-1:0,!1),Qt&&(_e[Dt]=Jt),Jt))}b.fromInt=rt;function ot(Dt,Ot){if(isNaN(Dt))return Ot?Pt:Tt;if(Ot){if(Dt<0)return Pt;if(Dt>=ct)return vt}else{if(Dt<=-mt)return Et;if(Dt+1>=mt)return Nt}return Dt<0?ot(-Dt,Ot).neg():it(Dt%nt|0,Dt/nt|0,Ot)}b.fromNumber=ot;function it(Dt,Ot,Jt){return new b(Dt,Ot,Jt)}b.fromBits=it;var st=Math.pow;function lt(Dt,Ot,Jt){if(Dt.length===0)throw Error("empty string");if(typeof Ot=="number"?(Jt=Ot,Ot=!1):Ot=!!Ot,Dt==="NaN"||Dt==="Infinity"||Dt==="+Infinity"||Dt==="-Infinity")return Ot?Pt:Tt;if(Jt=Jt||10,Jt<2||36<Jt)throw RangeError("radix");var Yt;if((Yt=Dt.indexOf("-"))>0)throw Error("interior hyphen");if(Yt===0)return lt(Dt.substring(1),Ot,Jt).neg();for(var Qt=ot(st(Jt,8)),Ft=Tt,pt=0;pt<Dt.length;pt+=8){var _t=Math.min(8,Dt.length-pt),Lt=parseInt(Dt.substring(pt,pt+_t),Jt);if(_t<8){var Gt=ot(st(Jt,_t));Ft=Ft.mul(Gt).add(ot(Lt))}else Ft=Ft.mul(Qt),Ft=Ft.add(ot(Lt))}return Ft.unsigned=Ot,Ft}b.fromString=lt;function dt(Dt,Ot){return typeof Dt=="number"?ot(Dt,Ot):typeof Dt=="string"?lt(Dt,Ot):it(Dt.low,Dt.high,typeof Ot=="boolean"?Ot:Dt.unsigned)}b.fromValue=dt;var ut=1<<16,ht=1<<24,nt=ut*ut,ct=nt*nt,mt=ct/2,kt=rt(ht),Tt=rt(0);b.ZERO=Tt;var Pt=rt(0,!0);b.UZERO=Pt;var At=rt(1);b.ONE=At;var gt=rt(1,!0);b.UONE=gt;var Ct=rt(-1);b.NEG_ONE=Ct;var Nt=it(-1,2147483647,!1);b.MAX_VALUE=Nt;var vt=it(-1,-1,!0);b.MAX_UNSIGNED_VALUE=vt;var Et=it(0,-2147483648,!1);b.MIN_VALUE=Et;var It=b.prototype;It.toInt=function(){return this.unsigned?this.low>>>0:this.low},It.toNumber=function(){return this.unsigned?(this.high>>>0)*nt+(this.low>>>0):this.high*nt+(this.low>>>0)},It.toString=function(Ot){if(Ot=Ot||10,Ot<2||36<Ot)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(Et)){var Jt=ot(Ot),Yt=this.div(Jt),Qt=Yt.mul(Jt).sub(this);return Yt.toString(Ot)+Qt.toInt().toString(Ot)}else return"-"+this.neg().toString(Ot);for(var Ft=ot(st(Ot,6),this.unsigned),pt=this,_t="";;){var Lt=pt.div(Ft),Gt=pt.sub(Lt.mul(Ft)).toInt()>>>0,Ut=Gt.toString(Ot);if(pt=Lt,pt.isZero())return Ut+_t;for(;Ut.length<6;)Ut="0"+Ut;_t=""+Ut+_t}},It.getHighBits=function(){return this.high},It.getHighBitsUnsigned=function(){return this.high>>>0},It.getLowBits=function(){return this.low},It.getLowBitsUnsigned=function(){return this.low>>>0},It.getNumBitsAbs=function(){if(this.isNegative())return this.eq(Et)?64:this.neg().getNumBitsAbs();for(var Ot=this.high!=0?this.high:this.low,Jt=31;Jt>0&&(Ot&1<<Jt)==0;Jt--);return this.high!=0?Jt+33:Jt+1},It.isZero=function(){return this.high===0&&this.low===0},It.eqz=It.isZero,It.isNegative=function(){return!this.unsigned&&this.high<0},It.isPositive=function(){return this.unsigned||this.high>=0},It.isOdd=function(){return(this.low&1)===1},It.isEven=function(){return(this.low&1)===0},It.equals=function(Ot){return _(Ot)||(Ot=dt(Ot)),this.unsigned!==Ot.unsigned&&this.high>>>31===1&&Ot.high>>>31===1?!1:this.high===Ot.high&&this.low===Ot.low},It.eq=It.equals,It.notEquals=function(Ot){return!this.eq(Ot)},It.neq=It.notEquals,It.ne=It.notEquals,It.lessThan=function(Ot){return this.comp(Ot)<0},It.lt=It.lessThan,It.lessThanOrEqual=function(Ot){return this.comp(Ot)<=0},It.lte=It.lessThanOrEqual,It.le=It.lessThanOrEqual,It.greaterThan=function(Ot){return this.comp(Ot)>0},It.gt=It.greaterThan,It.greaterThanOrEqual=function(Ot){return this.comp(Ot)>=0},It.gte=It.greaterThanOrEqual,It.ge=It.greaterThanOrEqual,It.compare=function(Ot){if(_(Ot)||(Ot=dt(Ot)),this.eq(Ot))return 0;var Jt=this.isNegative(),Yt=Ot.isNegative();return Jt&&!Yt?-1:!Jt&&Yt?1:this.unsigned?Ot.high>>>0>this.high>>>0||Ot.high===this.high&&Ot.low>>>0>this.low>>>0?-1:1:this.sub(Ot).isNegative()?-1:1},It.comp=It.compare,It.negate=function(){return!this.unsigned&&this.eq(Et)?Et:this.not().add(At)},It.neg=It.negate,It.add=function(Ot){_(Ot)||(Ot=dt(Ot));var Jt=this.high>>>16,Yt=this.high&65535,Qt=this.low>>>16,Ft=this.low&65535,pt=Ot.high>>>16,_t=Ot.high&65535,Lt=Ot.low>>>16,Gt=Ot.low&65535,Ut=0,$t=0,qt=0,Wt=0;return Wt+=Ft+Gt,qt+=Wt>>>16,Wt&=65535,qt+=Qt+Lt,$t+=qt>>>16,qt&=65535,$t+=Yt+_t,Ut+=$t>>>16,$t&=65535,Ut+=Jt+pt,Ut&=65535,it(qt<<16|Wt,Ut<<16|$t,this.unsigned)},It.subtract=function(Ot){return _(Ot)||(Ot=dt(Ot)),this.add(Ot.neg())},It.sub=It.subtract,It.multiply=function(Ot){if(this.isZero())return this;if(_(Ot)||(Ot=dt(Ot)),h){var Jt=h.mul(this.low,this.high,Ot.low,Ot.high);return it(Jt,h.get_high(),this.unsigned)}if(Ot.isZero())return this.unsigned?Pt:Tt;if(this.eq(Et))return Ot.isOdd()?Et:Tt;if(Ot.eq(Et))return this.isOdd()?Et:Tt;if(this.isNegative())return Ot.isNegative()?this.neg().mul(Ot.neg()):this.neg().mul(Ot).neg();if(Ot.isNegative())return this.mul(Ot.neg()).neg();if(this.lt(kt)&&Ot.lt(kt))return ot(this.toNumber()*Ot.toNumber(),this.unsigned);var Yt=this.high>>>16,Qt=this.high&65535,Ft=this.low>>>16,pt=this.low&65535,_t=Ot.high>>>16,Lt=Ot.high&65535,Gt=Ot.low>>>16,Ut=Ot.low&65535,$t=0,qt=0,Wt=0,Ht=0;return Ht+=pt*Ut,Wt+=Ht>>>16,Ht&=65535,Wt+=Ft*Ut,qt+=Wt>>>16,Wt&=65535,Wt+=pt*Gt,qt+=Wt>>>16,Wt&=65535,qt+=Qt*Ut,$t+=qt>>>16,qt&=65535,qt+=Ft*Gt,$t+=qt>>>16,qt&=65535,qt+=pt*Lt,$t+=qt>>>16,qt&=65535,$t+=Yt*Ut+Qt*Gt+Ft*Lt+pt*_t,$t&=65535,it(Wt<<16|Ht,$t<<16|qt,this.unsigned)},It.mul=It.multiply,It.divide=function(Ot){if(_(Ot)||(Ot=dt(Ot)),Ot.isZero())throw Error("division by zero");if(h){if(!this.unsigned&&this.high===-2147483648&&Ot.low===-1&&Ot.high===-1)return this;var Jt=(this.unsigned?h.div_u:h.div_s)(this.low,this.high,Ot.low,Ot.high);return it(Jt,h.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?Pt:Tt;var Yt,Qt,Ft;if(this.unsigned){if(Ot.unsigned||(Ot=Ot.toUnsigned()),Ot.gt(this))return Pt;if(Ot.gt(this.shru(1)))return gt;Ft=Pt}else{if(this.eq(Et)){if(Ot.eq(At)||Ot.eq(Ct))return Et;if(Ot.eq(Et))return At;var pt=this.shr(1);return Yt=pt.div(Ot).shl(1),Yt.eq(Tt)?Ot.isNegative()?At:Ct:(Qt=this.sub(Ot.mul(Yt)),Ft=Yt.add(Qt.div(Ot)),Ft)}else if(Ot.eq(Et))return this.unsigned?Pt:Tt;if(this.isNegative())return Ot.isNegative()?this.neg().div(Ot.neg()):this.neg().div(Ot).neg();if(Ot.isNegative())return this.div(Ot.neg()).neg();Ft=Tt}for(Qt=this;Qt.gte(Ot);){Yt=Math.max(1,Math.floor(Qt.toNumber()/Ot.toNumber()));for(var _t=Math.ceil(Math.log(Yt)/Math.LN2),Lt=_t<=48?1:st(2,_t-48),Gt=ot(Yt),Ut=Gt.mul(Ot);Ut.isNegative()||Ut.gt(Qt);)Yt-=Lt,Gt=ot(Yt,this.unsigned),Ut=Gt.mul(Ot);Gt.isZero()&&(Gt=At),Ft=Ft.add(Gt),Qt=Qt.sub(Ut)}return Ft},It.div=It.divide,It.modulo=function(Ot){if(_(Ot)||(Ot=dt(Ot)),h){var Jt=(this.unsigned?h.rem_u:h.rem_s)(this.low,this.high,Ot.low,Ot.high);return it(Jt,h.get_high(),this.unsigned)}return this.sub(this.div(Ot).mul(Ot))},It.mod=It.modulo,It.rem=It.modulo,It.not=function(){return it(~this.low,~this.high,this.unsigned)},It.countLeadingZeros=function(){return this.high?Math.clz32(this.high):Math.clz32(this.low)+32},It.clz=It.countLeadingZeros,It.countTrailingZeros=function(){return this.low?$(this.low):$(this.high)+32},It.ctz=It.countTrailingZeros,It.and=function(Ot){return _(Ot)||(Ot=dt(Ot)),it(this.low&Ot.low,this.high&Ot.high,this.unsigned)},It.or=function(Ot){return _(Ot)||(Ot=dt(Ot)),it(this.low|Ot.low,this.high|Ot.high,this.unsigned)},It.xor=function(Ot){return _(Ot)||(Ot=dt(Ot)),it(this.low^Ot.low,this.high^Ot.high,this.unsigned)},It.shiftLeft=function(Ot){return _(Ot)&&(Ot=Ot.toInt()),(Ot&=63)===0?this:Ot<32?it(this.low<<Ot,this.high<<Ot|this.low>>>32-Ot,this.unsigned):it(0,this.low<<Ot-32,this.unsigned)},It.shl=It.shiftLeft,It.shiftRight=function(Ot){return _(Ot)&&(Ot=Ot.toInt()),(Ot&=63)===0?this:Ot<32?it(this.low>>>Ot|this.high<<32-Ot,this.high>>Ot,this.unsigned):it(this.high>>Ot-32,this.high>=0?0:-1,this.unsigned)},It.shr=It.shiftRight,It.shiftRightUnsigned=function(Ot){return _(Ot)&&(Ot=Ot.toInt()),(Ot&=63)===0?this:Ot<32?it(this.low>>>Ot|this.high<<32-Ot,this.high>>>Ot,this.unsigned):Ot===32?it(this.high,0,this.unsigned):it(this.high>>>Ot-32,0,this.unsigned)},It.shru=It.shiftRightUnsigned,It.shr_u=It.shiftRightUnsigned,It.rotateLeft=function(Ot){var Jt;return _(Ot)&&(Ot=Ot.toInt()),(Ot&=63)===0?this:Ot===32?it(this.high,this.low,this.unsigned):Ot<32?(Jt=32-Ot,it(this.low<<Ot|this.high>>>Jt,this.high<<Ot|this.low>>>Jt,this.unsigned)):(Ot-=32,Jt=32-Ot,it(this.high<<Ot|this.low>>>Jt,this.low<<Ot|this.high>>>Jt,this.unsigned))},It.rotl=It.rotateLeft,It.rotateRight=function(Ot){var Jt;return _(Ot)&&(Ot=Ot.toInt()),(Ot&=63)===0?this:Ot===32?it(this.high,this.low,this.unsigned):Ot<32?(Jt=32-Ot,it(this.high<<Jt|this.low>>>Ot,this.low<<Jt|this.high>>>Ot,this.unsigned)):(Ot-=32,Jt=32-Ot,it(this.low<<Jt|this.high>>>Ot,this.high<<Jt|this.low>>>Ot,this.unsigned))},It.rotr=It.rotateRight,It.toSigned=function(){return this.unsigned?it(this.low,this.high,!1):this},It.toUnsigned=function(){return this.unsigned?this:it(this.low,this.high,!0)},It.toBytes=function(Ot){return Ot?this.toBytesLE():this.toBytesBE()},It.toBytesLE=function(){var Ot=this.high,Jt=this.low;return[Jt&255,Jt>>>8&255,Jt>>>16&255,Jt>>>24,Ot&255,Ot>>>8&255,Ot>>>16&255,Ot>>>24]},It.toBytesBE=function(){var Ot=this.high,Jt=this.low;return[Ot>>>24,Ot>>>16&255,Ot>>>8&255,Ot&255,Jt>>>24,Jt>>>16&255,Jt>>>8&255,Jt&255]},b.fromBytes=function(Ot,Jt,Yt){return Yt?b.fromBytesLE(Ot,Jt):b.fromBytesBE(Ot,Jt)},b.fromBytesLE=function(Ot,Jt){return new b(Ot[0]|Ot[1]<<8|Ot[2]<<16|Ot[3]<<24,Ot[4]|Ot[5]<<8|Ot[6]<<16|Ot[7]<<24,Jt)},b.fromBytesBE=function(Ot,Jt){return new b(Ot[4]<<24|Ot[5]<<16|Ot[6]<<8|Ot[7],Ot[0]<<24|Ot[1]<<16|Ot[2]<<8|Ot[3],Jt)};var xt=b;return c.default=xt,"default"in c?c.default:c}({});a.exports=d})(umd);var indexMinimal$1={},minimal$3={},aspromise$1=asPromise;function asPromise(a,s){for(var d=new Array(arguments.length-1),c=0,h=2,b=!0;h<arguments.length;)d[c++]=arguments[h++];return new Promise(function($,_e){d[c]=function(rt){if(b)if(b=!1,rt)_e(rt);else{for(var ot=new Array(arguments.length-1),it=0;it<ot.length;)ot[it++]=arguments[it];$.apply(null,ot)}};try{a.apply(s||null,d)}catch(tt){b&&(b=!1,_e(tt))}})}var base64$3={};(function(a){var s=a;s.length=function($){var _e=$.length;if(!_e)return 0;for(var tt=0;--_e%4>1&&$.charAt(_e)==="=";)++tt;return Math.ceil($.length*3)/4-tt};for(var d=new Array(64),c=new Array(123),h=0;h<64;)c[d[h]=h<26?h+65:h<52?h+71:h<62?h-4:h-59|43]=h++;s.encode=function($,_e,tt){for(var rt=null,ot=[],it=0,st=0,lt;_e<tt;){var dt=$[_e++];switch(st){case 0:ot[it++]=d[dt>>2],lt=(dt&3)<<4,st=1;break;case 1:ot[it++]=d[lt|dt>>4],lt=(dt&15)<<2,st=2;break;case 2:ot[it++]=d[lt|dt>>6],ot[it++]=d[dt&63],st=0;break}it>8191&&((rt||(rt=[])).push(String.fromCharCode.apply(String,ot)),it=0)}return st&&(ot[it++]=d[lt],ot[it++]=61,st===1&&(ot[it++]=61)),rt?(it&&rt.push(String.fromCharCode.apply(String,ot.slice(0,it))),rt.join("")):String.fromCharCode.apply(String,ot.slice(0,it))};var b="invalid encoding";s.decode=function($,_e,tt){for(var rt=tt,ot=0,it,st=0;st<$.length;){var lt=$.charCodeAt(st++);if(lt===61&&ot>1)break;if((lt=c[lt])===void 0)throw Error(b);switch(ot){case 0:it=lt,ot=1;break;case 1:_e[tt++]=it<<2|(lt&48)>>4,it=lt,ot=2;break;case 2:_e[tt++]=(it&15)<<4|(lt&60)>>2,it=lt,ot=3;break;case 3:_e[tt++]=(it&3)<<6|lt,ot=0;break}}if(ot===1)throw Error(b);return tt-rt},s.test=function($){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test($)}})(base64$3);var eventemitter$1=EventEmitter$1;function EventEmitter$1(){this._listeners={}}EventEmitter$1.prototype.on=function(s,d,c){return(this._listeners[s]||(this._listeners[s]=[])).push({fn:d,ctx:c||this}),this};EventEmitter$1.prototype.off=function(s,d){if(s===void 0)this._listeners={};else if(d===void 0)this._listeners[s]=[];else for(var c=this._listeners[s],h=0;h<c.length;)c[h].fn===d?c.splice(h,1):++h;return this};EventEmitter$1.prototype.emit=function(s){var d=this._listeners[s];if(d){for(var c=[],h=1;h<arguments.length;)c.push(arguments[h++]);for(h=0;h<d.length;)d[h].fn.apply(d[h++].ctx,c)}return this};var float$1=factory(factory);function factory(a){return typeof Float32Array!="undefined"?function(){var s=new Float32Array([-0]),d=new Uint8Array(s.buffer),c=d[3]===128;function h(_e,tt,rt){s[0]=_e,tt[rt]=d[0],tt[rt+1]=d[1],tt[rt+2]=d[2],tt[rt+3]=d[3]}function b(_e,tt,rt){s[0]=_e,tt[rt]=d[3],tt[rt+1]=d[2],tt[rt+2]=d[1],tt[rt+3]=d[0]}a.writeFloatLE=c?h:b,a.writeFloatBE=c?b:h;function _(_e,tt){return d[0]=_e[tt],d[1]=_e[tt+1],d[2]=_e[tt+2],d[3]=_e[tt+3],s[0]}function $(_e,tt){return d[3]=_e[tt],d[2]=_e[tt+1],d[1]=_e[tt+2],d[0]=_e[tt+3],s[0]}a.readFloatLE=c?_:$,a.readFloatBE=c?$:_}():function(){function s(c,h,b,_){var $=h<0?1:0;if($&&(h=-h),h===0)c(1/h>0?0:2147483648,b,_);else if(isNaN(h))c(2143289344,b,_);else if(h>34028234663852886e22)c(($<<31|2139095040)>>>0,b,_);else if(h<11754943508222875e-54)c(($<<31|Math.round(h/1401298464324817e-60))>>>0,b,_);else{var _e=Math.floor(Math.log(h)/Math.LN2),tt=Math.round(h*Math.pow(2,-_e)*8388608)&8388607;c(($<<31|_e+127<<23|tt)>>>0,b,_)}}a.writeFloatLE=s.bind(null,writeUintLE),a.writeFloatBE=s.bind(null,writeUintBE);function d(c,h,b){var _=c(h,b),$=(_>>31)*2+1,_e=_>>>23&255,tt=_&8388607;return _e===255?tt?NaN:$*(1/0):_e===0?$*1401298464324817e-60*tt:$*Math.pow(2,_e-150)*(tt+8388608)}a.readFloatLE=d.bind(null,readUintLE),a.readFloatBE=d.bind(null,readUintBE)}(),typeof Float64Array!="undefined"?function(){var s=new Float64Array([-0]),d=new Uint8Array(s.buffer),c=d[7]===128;function h(_e,tt,rt){s[0]=_e,tt[rt]=d[0],tt[rt+1]=d[1],tt[rt+2]=d[2],tt[rt+3]=d[3],tt[rt+4]=d[4],tt[rt+5]=d[5],tt[rt+6]=d[6],tt[rt+7]=d[7]}function b(_e,tt,rt){s[0]=_e,tt[rt]=d[7],tt[rt+1]=d[6],tt[rt+2]=d[5],tt[rt+3]=d[4],tt[rt+4]=d[3],tt[rt+5]=d[2],tt[rt+6]=d[1],tt[rt+7]=d[0]}a.writeDoubleLE=c?h:b,a.writeDoubleBE=c?b:h;function _(_e,tt){return d[0]=_e[tt],d[1]=_e[tt+1],d[2]=_e[tt+2],d[3]=_e[tt+3],d[4]=_e[tt+4],d[5]=_e[tt+5],d[6]=_e[tt+6],d[7]=_e[tt+7],s[0]}function $(_e,tt){return d[7]=_e[tt],d[6]=_e[tt+1],d[5]=_e[tt+2],d[4]=_e[tt+3],d[3]=_e[tt+4],d[2]=_e[tt+5],d[1]=_e[tt+6],d[0]=_e[tt+7],s[0]}a.readDoubleLE=c?_:$,a.readDoubleBE=c?$:_}():function(){function s(c,h,b,_,$,_e){var tt=_<0?1:0;if(tt&&(_=-_),_===0)c(0,$,_e+h),c(1/_>0?0:2147483648,$,_e+b);else if(isNaN(_))c(0,$,_e+h),c(2146959360,$,_e+b);else if(_>17976931348623157e292)c(0,$,_e+h),c((tt<<31|2146435072)>>>0,$,_e+b);else{var rt;if(_<22250738585072014e-324)rt=_/5e-324,c(rt>>>0,$,_e+h),c((tt<<31|rt/4294967296)>>>0,$,_e+b);else{var ot=Math.floor(Math.log(_)/Math.LN2);ot===1024&&(ot=1023),rt=_*Math.pow(2,-ot),c(rt*4503599627370496>>>0,$,_e+h),c((tt<<31|ot+1023<<20|rt*1048576&1048575)>>>0,$,_e+b)}}}a.writeDoubleLE=s.bind(null,writeUintLE,0,4),a.writeDoubleBE=s.bind(null,writeUintBE,4,0);function d(c,h,b,_,$){var _e=c(_,$+h),tt=c(_,$+b),rt=(tt>>31)*2+1,ot=tt>>>20&2047,it=4294967296*(tt&1048575)+_e;return ot===2047?it?NaN:rt*(1/0):ot===0?rt*5e-324*it:rt*Math.pow(2,ot-1075)*(it+4503599627370496)}a.readDoubleLE=d.bind(null,readUintLE,0,4),a.readDoubleBE=d.bind(null,readUintBE,4,0)}(),a}function writeUintLE(a,s,d){s[d]=a&255,s[d+1]=a>>>8&255,s[d+2]=a>>>16&255,s[d+3]=a>>>24}function writeUintBE(a,s,d){s[d]=a>>>24,s[d+1]=a>>>16&255,s[d+2]=a>>>8&255,s[d+3]=a&255}function readUintLE(a,s){return(a[s]|a[s+1]<<8|a[s+2]<<16|a[s+3]<<24)>>>0}function readUintBE(a,s){return(a[s]<<24|a[s+1]<<16|a[s+2]<<8|a[s+3])>>>0}var inquire_1$1=inquire;function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(a){}return null}var utf8$5={};(function(a){var s=a;s.length=function(c){for(var h=0,b=0,_=0;_<c.length;++_)b=c.charCodeAt(_),b<128?h+=1:b<2048?h+=2:(b&64512)===55296&&(c.charCodeAt(_+1)&64512)===56320?(++_,h+=4):h+=3;return h},s.read=function(c,h,b){var _=b-h;if(_<1)return"";for(var $=null,_e=[],tt=0,rt;h<b;)rt=c[h++],rt<128?_e[tt++]=rt:rt>191&&rt<224?_e[tt++]=(rt&31)<<6|c[h++]&63:rt>239&&rt<365?(rt=((rt&7)<<18|(c[h++]&63)<<12|(c[h++]&63)<<6|c[h++]&63)-65536,_e[tt++]=55296+(rt>>10),_e[tt++]=56320+(rt&1023)):_e[tt++]=(rt&15)<<12|(c[h++]&63)<<6|c[h++]&63,tt>8191&&(($||($=[])).push(String.fromCharCode.apply(String,_e)),tt=0);return $?(tt&&$.push(String.fromCharCode.apply(String,_e.slice(0,tt))),$.join("")):String.fromCharCode.apply(String,_e.slice(0,tt))},s.write=function(c,h,b){for(var _=b,$,_e,tt=0;tt<c.length;++tt)$=c.charCodeAt(tt),$<128?h[b++]=$:$<2048?(h[b++]=$>>6|192,h[b++]=$&63|128):($&64512)===55296&&((_e=c.charCodeAt(tt+1))&64512)===56320?($=65536+(($&1023)<<10)+(_e&1023),++tt,h[b++]=$>>18|240,h[b++]=$>>12&63|128,h[b++]=$>>6&63|128,h[b++]=$&63|128):(h[b++]=$>>12|224,h[b++]=$>>6&63|128,h[b++]=$&63|128);return b-_}})(utf8$5);var pool_1$1=pool;function pool(a,s,d){var c=d||8192,h=c>>>1,b=null,_=c;return function(_e){if(_e<1||_e>h)return a(_e);_+_e>c&&(b=a(c),_=0);var tt=s.call(b,_,_+=_e);return _&7&&(_=(_|7)+1),tt}}var longbits$1=LongBits$4,util$a=minimal$3;function LongBits$4(a,s){this.lo=a>>>0,this.hi=s>>>0}var zero=LongBits$4.zero=new LongBits$4(0,0);zero.toNumber=function(){return 0};zero.zzEncode=zero.zzDecode=function(){return this};zero.length=function(){return 1};var zeroHash=LongBits$4.zeroHash="\0\0\0\0\0\0\0\0";LongBits$4.fromNumber=function a(s){if(s===0)return zero;var d=s<0;d&&(s=-s);var c=s>>>0,h=(s-c)/4294967296>>>0;return d&&(h=~h>>>0,c=~c>>>0,++c>4294967295&&(c=0,++h>4294967295&&(h=0))),new LongBits$4(c,h)};LongBits$4.from=function a(s){if(typeof s=="number")return LongBits$4.fromNumber(s);if(util$a.isString(s))if(util$a.Long)s=util$a.Long.fromString(s);else return LongBits$4.fromNumber(parseInt(s,10));return s.low||s.high?new LongBits$4(s.low>>>0,s.high>>>0):zero};LongBits$4.prototype.toNumber=function a(s){if(!s&&this.hi>>>31){var d=~this.lo+1>>>0,c=~this.hi>>>0;return d||(c=c+1>>>0),-(d+c*4294967296)}return this.lo+this.hi*4294967296};LongBits$4.prototype.toLong=function a(s){return util$a.Long?new util$a.Long(this.lo|0,this.hi|0,Boolean(s)):{low:this.lo|0,high:this.hi|0,unsigned:Boolean(s)}};var charCodeAt=String.prototype.charCodeAt;LongBits$4.fromHash=function a(s){return s===zeroHash?zero:new LongBits$4((charCodeAt.call(s,0)|charCodeAt.call(s,1)<<8|charCodeAt.call(s,2)<<16|charCodeAt.call(s,3)<<24)>>>0,(charCodeAt.call(s,4)|charCodeAt.call(s,5)<<8|charCodeAt.call(s,6)<<16|charCodeAt.call(s,7)<<24)>>>0)};LongBits$4.prototype.toHash=function a(){return String.fromCharCode(this.lo&255,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,this.hi&255,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)};LongBits$4.prototype.zzEncode=function a(){var s=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^s)>>>0,this.lo=(this.lo<<1^s)>>>0,this};LongBits$4.prototype.zzDecode=function a(){var s=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^s)>>>0,this.hi=(this.hi>>>1^s)>>>0,this};LongBits$4.prototype.length=function a(){var s=this.lo,d=(this.lo>>>28|this.hi<<4)>>>0,c=this.hi>>>24;return c===0?d===0?s<16384?s<128?1:2:s<2097152?3:4:d<16384?d<128?5:6:d<2097152?7:8:c<128?9:10};(function(a){var s=a;s.asPromise=aspromise$1,s.base64=base64$3,s.EventEmitter=eventemitter$1,s.float=float$1,s.inquire=inquire_1$1,s.utf8=utf8$5,s.pool=pool_1$1,s.LongBits=longbits$1,s.isNode=Boolean(typeof commonjsGlobal$1!="undefined"&&commonjsGlobal$1&&commonjsGlobal$1.process&&commonjsGlobal$1.process.versions&&commonjsGlobal$1.process.versions.node),s.global=s.isNode&&commonjsGlobal$1||typeof window!="undefined"&&window||typeof self!="undefined"&&self||commonjsGlobal$1,s.emptyArray=Object.freeze?Object.freeze([]):[],s.emptyObject=Object.freeze?Object.freeze({}):{},s.isInteger=Number.isInteger||function(b){return typeof b=="number"&&isFinite(b)&&Math.floor(b)===b},s.isString=function(b){return typeof b=="string"||b instanceof String},s.isObject=function(b){return b&&typeof b=="object"},s.isset=s.isSet=function(b,_){var $=b[_];return $!=null&&b.hasOwnProperty(_)?typeof $!="object"||(Array.isArray($)?$.length:Object.keys($).length)>0:!1},s.Buffer=function(){try{var h=s.inquire("buffer").Buffer;return h.prototype.utf8Write?h:null}catch{return null}}(),s._Buffer_from=null,s._Buffer_allocUnsafe=null,s.newBuffer=function(b){return typeof b=="number"?s.Buffer?s._Buffer_allocUnsafe(b):new s.Array(b):s.Buffer?s._Buffer_from(b):typeof Uint8Array=="undefined"?b:new Uint8Array(b)},s.Array=typeof Uint8Array!="undefined"?Uint8Array:Array,s.Long=s.global.dcodeIO&&s.global.dcodeIO.Long||s.global.Long||s.inquire("long"),s.key2Re=/^true|false|0|1$/,s.key32Re=/^-?(?:0|[1-9][0-9]*)$/,s.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,s.longToHash=function(b){return b?s.LongBits.from(b).toHash():s.LongBits.zeroHash},s.longFromHash=function(b,_){var $=s.LongBits.fromHash(b);return s.Long?s.Long.fromBits($.lo,$.hi,_):$.toNumber(Boolean(_))};function d(h,b,_){for(var $=Object.keys(b),_e=0;_e<$.length;++_e)(h[$[_e]]===void 0||!_)&&(h[$[_e]]=b[$[_e]]);return h}s.merge=d,s.lcFirst=function(b){return b.charAt(0).toLowerCase()+b.substring(1)};function c(h){function b(_,$){if(!(this instanceof b))return new b(_,$);Object.defineProperty(this,"message",{get:function(){return _}}),Error.captureStackTrace?Error.captureStackTrace(this,b):Object.defineProperty(this,"stack",{value:new Error().stack||""}),$&&d(this,$)}return(b.prototype=Object.create(Error.prototype)).constructor=b,Object.defineProperty(b.prototype,"name",{get:function(){return h}}),b.prototype.toString=function(){return this.name+": "+this.message},b}s.newError=c,s.ProtocolError=c("ProtocolError"),s.oneOfGetter=function(b){for(var _={},$=0;$<b.length;++$)_[b[$]]=1;return function(){for(var _e=Object.keys(this),tt=_e.length-1;tt>-1;--tt)if(_[_e[tt]]===1&&this[_e[tt]]!==void 0&&this[_e[tt]]!==null)return _e[tt]}},s.oneOfSetter=function(b){return function(_){for(var $=0;$<b.length;++$)b[$]!==_&&delete this[b[$]]}},s.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},s._configure=function(){var h=s.Buffer;if(!h){s._Buffer_from=s._Buffer_allocUnsafe=null;return}s._Buffer_from=h.from!==Uint8Array.from&&h.from||function(_,$){return new h(_,$)},s._Buffer_allocUnsafe=h.allocUnsafe||function(_){return new h(_)}}})(minimal$3);var writer$3=Writer$3,util$9=minimal$3,BufferWriter$3,LongBits$3=util$9.LongBits,base64$2=util$9.base64,utf8$4=util$9.utf8;function Op$1(a,s,d){this.fn=a,this.len=s,this.next=void 0,this.val=d}function noop$3(){}function State$1(a){this.head=a.head,this.tail=a.tail,this.len=a.len,this.next=a.states}function Writer$3(){this.len=0,this.head=new Op$1(noop$3,0,0),this.tail=this.head,this.states=null}var create$4=function a(){return util$9.Buffer?function(){return(Writer$3.create=function(){return new BufferWriter$3})()}:function(){return new Writer$3}};Writer$3.create=create$4();Writer$3.alloc=function a(s){return new util$9.Array(s)};util$9.Array!==Array&&(Writer$3.alloc=util$9.pool(Writer$3.alloc,util$9.Array.prototype.subarray));Writer$3.prototype._push=function a(s,d,c){return this.tail=this.tail.next=new Op$1(s,d,c),this.len+=d,this};function writeByte$1(a,s,d){s[d]=a&255}function writeVarint32$1(a,s,d){for(;a>127;)s[d++]=a&127|128,a>>>=7;s[d]=a}function VarintOp$1(a,s){this.len=a,this.next=void 0,this.val=s}VarintOp$1.prototype=Object.create(Op$1.prototype);VarintOp$1.prototype.fn=writeVarint32$1;Writer$3.prototype.uint32=function a(s){return this.len+=(this.tail=this.tail.next=new VarintOp$1((s=s>>>0)<128?1:s<16384?2:s<2097152?3:s<268435456?4:5,s)).len,this};Writer$3.prototype.int32=function a(s){return s<0?this._push(writeVarint64$1,10,LongBits$3.fromNumber(s)):this.uint32(s)};Writer$3.prototype.sint32=function a(s){return this.uint32((s<<1^s>>31)>>>0)};function writeVarint64$1(a,s,d){for(;a.hi;)s[d++]=a.lo&127|128,a.lo=(a.lo>>>7|a.hi<<25)>>>0,a.hi>>>=7;for(;a.lo>127;)s[d++]=a.lo&127|128,a.lo=a.lo>>>7;s[d++]=a.lo}Writer$3.prototype.uint64=function a(s){var d=LongBits$3.from(s);return this._push(writeVarint64$1,d.length(),d)};Writer$3.prototype.int64=Writer$3.prototype.uint64;Writer$3.prototype.sint64=function a(s){var d=LongBits$3.from(s).zzEncode();return this._push(writeVarint64$1,d.length(),d)};Writer$3.prototype.bool=function a(s){return this._push(writeByte$1,1,s?1:0)};function writeFixed32$1(a,s,d){s[d]=a&255,s[d+1]=a>>>8&255,s[d+2]=a>>>16&255,s[d+3]=a>>>24}Writer$3.prototype.fixed32=function a(s){return this._push(writeFixed32$1,4,s>>>0)};Writer$3.prototype.sfixed32=Writer$3.prototype.fixed32;Writer$3.prototype.fixed64=function a(s){var d=LongBits$3.from(s);return this._push(writeFixed32$1,4,d.lo)._push(writeFixed32$1,4,d.hi)};Writer$3.prototype.sfixed64=Writer$3.prototype.fixed64;Writer$3.prototype.float=function a(s){return this._push(util$9.float.writeFloatLE,4,s)};Writer$3.prototype.double=function a(s){return this._push(util$9.float.writeDoubleLE,8,s)};var writeBytes$1=util$9.Array.prototype.set?function a(s,d,c){d.set(s,c)}:function a(s,d,c){for(var h=0;h<s.length;++h)d[c+h]=s[h]};Writer$3.prototype.bytes=function a(s){var d=s.length>>>0;if(!d)return this._push(writeByte$1,1,0);if(util$9.isString(s)){var c=Writer$3.alloc(d=base64$2.length(s));base64$2.decode(s,c,0),s=c}return this.uint32(d)._push(writeBytes$1,d,s)};Writer$3.prototype.string=function a(s){var d=utf8$4.length(s);return d?this.uint32(d)._push(utf8$4.write,d,s):this._push(writeByte$1,1,0)};Writer$3.prototype.fork=function a(){return this.states=new State$1(this),this.head=this.tail=new Op$1(noop$3,0,0),this.len=0,this};Writer$3.prototype.reset=function a(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new Op$1(noop$3,0,0),this.len=0),this};Writer$3.prototype.ldelim=function a(){var s=this.head,d=this.tail,c=this.len;return this.reset().uint32(c),c&&(this.tail.next=s.next,this.tail=d,this.len+=c),this};Writer$3.prototype.finish=function a(){for(var s=this.head.next,d=this.constructor.alloc(this.len),c=0;s;)s.fn(s.val,d,c),c+=s.len,s=s.next;return d};Writer$3._configure=function(a){BufferWriter$3=a,Writer$3.create=create$4(),BufferWriter$3._configure()};var writer_buffer$1=BufferWriter$2,Writer$2=writer$3;(BufferWriter$2.prototype=Object.create(Writer$2.prototype)).constructor=BufferWriter$2;var util$8=minimal$3;function BufferWriter$2(){Writer$2.call(this)}BufferWriter$2._configure=function(){BufferWriter$2.alloc=util$8._Buffer_allocUnsafe,BufferWriter$2.writeBytesBuffer=util$8.Buffer&&util$8.Buffer.prototype instanceof Uint8Array&&util$8.Buffer.prototype.set.name==="set"?function(s,d,c){d.set(s,c)}:function(s,d,c){if(s.copy)s.copy(d,c,0,s.length);else for(var h=0;h<s.length;)d[c++]=s[h++]}};BufferWriter$2.prototype.bytes=function a(s){util$8.isString(s)&&(s=util$8._Buffer_from(s,"base64"));var d=s.length>>>0;return this.uint32(d),d&&this._push(BufferWriter$2.writeBytesBuffer,d,s),this};function writeStringBuffer$1(a,s,d){a.length<40?util$8.utf8.write(a,s,d):s.utf8Write?s.utf8Write(a,d):s.write(a,d)}BufferWriter$2.prototype.string=function a(s){var d=util$8.Buffer.byteLength(s);return this.uint32(d),d&&this._push(writeStringBuffer$1,d,s),this};BufferWriter$2._configure();var reader$1=Reader$3,util$7=minimal$3,BufferReader$3,LongBits$2=util$7.LongBits,utf8$3=util$7.utf8;function indexOutOfRange$1(a,s){return RangeError("index out of range: "+a.pos+" + "+(s||1)+" > "+a.len)}function Reader$3(a){this.buf=a,this.pos=0,this.len=a.length}var create_array$1=typeof Uint8Array!="undefined"?function a(s){if(s instanceof Uint8Array||Array.isArray(s))return new Reader$3(s);throw Error("illegal buffer")}:function a(s){if(Array.isArray(s))return new Reader$3(s);throw Error("illegal buffer")},create$3=function a(){return util$7.Buffer?function(d){return(Reader$3.create=function(h){return util$7.Buffer.isBuffer(h)?new BufferReader$3(h):create_array$1(h)})(d)}:create_array$1};Reader$3.create=create$3();Reader$3.prototype._slice=util$7.Array.prototype.subarray||util$7.Array.prototype.slice;Reader$3.prototype.uint32=function a(){var s=4294967295;return function(){if(s=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(s=(s|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(s=(s|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(s=(s|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(s=(s|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return s;if((this.pos+=5)>this.len)throw this.pos=this.len,indexOutOfRange$1(this,10);return s}}();Reader$3.prototype.int32=function a(){return this.uint32()|0};Reader$3.prototype.sint32=function a(){var s=this.uint32();return s>>>1^-(s&1)|0};function readLongVarint$1(){var a=new LongBits$2(0,0),s=0;if(this.len-this.pos>4){for(;s<4;++s)if(a.lo=(a.lo|(this.buf[this.pos]&127)<<s*7)>>>0,this.buf[this.pos++]<128)return a;if(a.lo=(a.lo|(this.buf[this.pos]&127)<<28)>>>0,a.hi=(a.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return a;s=0}else{for(;s<3;++s){if(this.pos>=this.len)throw indexOutOfRange$1(this);if(a.lo=(a.lo|(this.buf[this.pos]&127)<<s*7)>>>0,this.buf[this.pos++]<128)return a}return a.lo=(a.lo|(this.buf[this.pos++]&127)<<s*7)>>>0,a}if(this.len-this.pos>4){for(;s<5;++s)if(a.hi=(a.hi|(this.buf[this.pos]&127)<<s*7+3)>>>0,this.buf[this.pos++]<128)return a}else for(;s<5;++s){if(this.pos>=this.len)throw indexOutOfRange$1(this);if(a.hi=(a.hi|(this.buf[this.pos]&127)<<s*7+3)>>>0,this.buf[this.pos++]<128)return a}throw Error("invalid varint encoding")}Reader$3.prototype.bool=function a(){return this.uint32()!==0};function readFixed32_end$1(a,s){return(a[s-4]|a[s-3]<<8|a[s-2]<<16|a[s-1]<<24)>>>0}Reader$3.prototype.fixed32=function a(){if(this.pos+4>this.len)throw indexOutOfRange$1(this,4);return readFixed32_end$1(this.buf,this.pos+=4)};Reader$3.prototype.sfixed32=function a(){if(this.pos+4>this.len)throw indexOutOfRange$1(this,4);return readFixed32_end$1(this.buf,this.pos+=4)|0};function readFixed64$1(){if(this.pos+8>this.len)throw indexOutOfRange$1(this,8);return new LongBits$2(readFixed32_end$1(this.buf,this.pos+=4),readFixed32_end$1(this.buf,this.pos+=4))}Reader$3.prototype.float=function a(){if(this.pos+4>this.len)throw indexOutOfRange$1(this,4);var s=util$7.float.readFloatLE(this.buf,this.pos);return this.pos+=4,s};Reader$3.prototype.double=function a(){if(this.pos+8>this.len)throw indexOutOfRange$1(this,4);var s=util$7.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,s};Reader$3.prototype.bytes=function a(){var s=this.uint32(),d=this.pos,c=this.pos+s;if(c>this.len)throw indexOutOfRange$1(this,s);return this.pos+=s,Array.isArray(this.buf)?this.buf.slice(d,c):d===c?new this.buf.constructor(0):this._slice.call(this.buf,d,c)};Reader$3.prototype.string=function a(){var s=this.bytes();return utf8$3.read(s,0,s.length)};Reader$3.prototype.skip=function a(s){if(typeof s=="number"){if(this.pos+s>this.len)throw indexOutOfRange$1(this,s);this.pos+=s}else do if(this.pos>=this.len)throw indexOutOfRange$1(this);while(this.buf[this.pos++]&128);return this};Reader$3.prototype.skipType=function(a){switch(a){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(a=this.uint32()&7)!==4;)this.skipType(a);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+a+" at offset "+this.pos)}return this};Reader$3._configure=function(a){BufferReader$3=a,Reader$3.create=create$3(),BufferReader$3._configure();var s=util$7.Long?"toLong":"toNumber";util$7.merge(Reader$3.prototype,{int64:function(){return readLongVarint$1.call(this)[s](!1)},uint64:function(){return readLongVarint$1.call(this)[s](!0)},sint64:function(){return readLongVarint$1.call(this).zzDecode()[s](!1)},fixed64:function(){return readFixed64$1.call(this)[s](!0)},sfixed64:function(){return readFixed64$1.call(this)[s](!1)}})};var reader_buffer$1=BufferReader$2,Reader$2=reader$1;(BufferReader$2.prototype=Object.create(Reader$2.prototype)).constructor=BufferReader$2;var util$6=minimal$3;function BufferReader$2(a){Reader$2.call(this,a)}BufferReader$2._configure=function(){util$6.Buffer&&(BufferReader$2.prototype._slice=util$6.Buffer.prototype.slice)};BufferReader$2.prototype.string=function a(){var s=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+s,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+s,this.len))};BufferReader$2._configure();var rpc$1={},service$1=Service$1,util$5=minimal$3;(Service$1.prototype=Object.create(util$5.EventEmitter.prototype)).constructor=Service$1;function Service$1(a,s,d){if(typeof a!="function")throw TypeError("rpcImpl must be a function");util$5.EventEmitter.call(this),this.rpcImpl=a,this.requestDelimited=Boolean(s),this.responseDelimited=Boolean(d)}Service$1.prototype.rpcCall=function a(s,d,c,h,b){if(!h)throw TypeError("request must be specified");var _=this;if(!b)return util$5.asPromise(a,_,s,d,c,h);if(!_.rpcImpl){setTimeout(function(){b(Error("already ended"))},0);return}try{return _.rpcImpl(s,d[_.requestDelimited?"encodeDelimited":"encode"](h).finish(),function(_e,tt){if(_e)return _.emit("error",_e,s),b(_e);if(tt===null){_.end(!0);return}if(!(tt instanceof c))try{tt=c[_.responseDelimited?"decodeDelimited":"decode"](tt)}catch(rt){return _.emit("error",rt,s),b(rt)}return _.emit("data",tt,s),b(null,tt)})}catch($){_.emit("error",$,s),setTimeout(function(){b($)},0);return}};Service$1.prototype.end=function a(s){return this.rpcImpl&&(s||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this};(function(a){var s=a;s.Service=service$1})(rpc$1);var roots$1={};(function(a){var s=a;s.build="minimal",s.Writer=writer$3,s.BufferWriter=writer_buffer$1,s.Reader=reader$1,s.BufferReader=reader_buffer$1,s.util=minimal$3,s.rpc=rpc$1,s.roots=roots$1,s.configure=d;function d(){s.util._configure(),s.Writer._configure(s.BufferWriter),s.Reader._configure(s.BufferReader)}d()})(indexMinimal$1);var minimal$2=indexMinimal$1,struct$2={};(function(a){var s=commonjsGlobal$1&&commonjsGlobal$1.__createBinding||(Object.create?function(nt,ct,mt,kt){kt===void 0&&(kt=mt),Object.defineProperty(nt,kt,{enumerable:!0,get:function(){return ct[mt]}})}:function(nt,ct,mt,kt){kt===void 0&&(kt=mt),nt[kt]=ct[mt]}),d=commonjsGlobal$1&&commonjsGlobal$1.__setModuleDefault||(Object.create?function(nt,ct){Object.defineProperty(nt,"default",{enumerable:!0,value:ct})}:function(nt,ct){nt.default=ct}),c=commonjsGlobal$1&&commonjsGlobal$1.__importStar||function(nt){if(nt&&nt.__esModule)return nt;var ct={};if(nt!=null)for(var mt in nt)mt!=="default"&&Object.hasOwnProperty.call(nt,mt)&&s(ct,nt,mt);return d(ct,nt),ct},h=commonjsGlobal$1&&commonjsGlobal$1.__importDefault||function(nt){return nt&&nt.__esModule?nt:{default:nt}};Object.defineProperty(a,"__esModule",{value:!0}),a.ListValue=a.Value=a.Struct_FieldsEntry=a.Struct=a.nullValueToNumber=a.nullValueToJSON=a.nullValueFromJSON=a.NullValue=a.protobufPackage=void 0;const b=h(umd.exports),_=c(minimal$2);a.protobufPackage="google.protobuf";var $;(function(nt){nt.NULL_VALUE="NULL_VALUE"})($=a.NullValue||(a.NullValue={}));function _e(nt){switch(nt){case 0:case"NULL_VALUE":return $.NULL_VALUE;default:throw new dt.Error("Unrecognized enum value "+nt+" for enum NullValue")}}a.nullValueFromJSON=_e;function tt(nt){switch(nt){case $.NULL_VALUE:return"NULL_VALUE";default:return"UNKNOWN"}}a.nullValueToJSON=tt;function rt(nt){switch(nt){case $.NULL_VALUE:return 0;default:return 0}}a.nullValueToNumber=rt;function ot(){return{fields:{}}}a.Struct={encode(nt,ct=_.Writer.create()){return Object.entries(nt.fields).forEach(([mt,kt])=>{kt!==void 0&&a.Struct_FieldsEntry.encode({key:mt,value:kt},ct.uint32(10).fork()).ldelim()}),ct},decode(nt,ct){const mt=nt instanceof _.Reader?nt:new _.Reader(nt);let kt=ct===void 0?mt.len:mt.pos+ct;const Tt=ot();for(;mt.pos<kt;){const Pt=mt.uint32();switch(Pt>>>3){case 1:const At=a.Struct_FieldsEntry.decode(mt,mt.uint32());At.value!==void 0&&(Tt.fields[At.key]=At.value);break;default:mt.skipType(Pt&7);break}}return Tt},fromJSON(nt){return{fields:ut(nt.fields)?Object.entries(nt.fields).reduce((ct,[mt,kt])=>(ct[mt]=kt,ct),{}):{}}},toJSON(nt){const ct={};return ct.fields={},nt.fields&&Object.entries(nt.fields).forEach(([mt,kt])=>{ct.fields[mt]=kt}),ct},fromPartial(nt){var ct;const mt=ot();return mt.fields=Object.entries((ct=nt.fields)!==null&&ct!==void 0?ct:{}).reduce((kt,[Tt,Pt])=>(Pt!==void 0&&(kt[Tt]=Pt),kt),{}),mt},wrap(nt){const ct=ot();return nt!==void 0&&Object.keys(nt).forEach(mt=>{ct.fields[mt]=nt[mt]}),ct},unwrap(nt){const ct={};return Object.keys(nt.fields).forEach(mt=>{ct[mt]=nt.fields[mt]}),ct}};function it(){return{key:"",value:void 0}}a.Struct_FieldsEntry={encode(nt,ct=_.Writer.create()){return nt.key!==""&&ct.uint32(10).string(nt.key),nt.value!==void 0&&a.Value.encode(a.Value.wrap(nt.value),ct.uint32(18).fork()).ldelim(),ct},decode(nt,ct){const mt=nt instanceof _.Reader?nt:new _.Reader(nt);let kt=ct===void 0?mt.len:mt.pos+ct;const Tt=it();for(;mt.pos<kt;){const Pt=mt.uint32();switch(Pt>>>3){case 1:Tt.key=mt.string();break;case 2:Tt.value=a.Value.unwrap(a.Value.decode(mt,mt.uint32()));break;default:mt.skipType(Pt&7);break}}return Tt},fromJSON(nt){return{key:ht(nt.key)?String(nt.key):"",value:ht(nt==null?void 0:nt.value)?nt.value:void 0}},toJSON(nt){const ct={};return nt.key!==void 0&&(ct.key=nt.key),nt.value!==void 0&&(ct.value=nt.value),ct},fromPartial(nt){var ct,mt;const kt=it();return kt.key=(ct=nt.key)!==null&&ct!==void 0?ct:"",kt.value=(mt=nt.value)!==null&&mt!==void 0?mt:void 0,kt}};function st(){return{nullValue:void 0,numberValue:void 0,stringValue:void 0,boolValue:void 0,structValue:void 0,listValue:void 0}}a.Value={encode(nt,ct=_.Writer.create()){return nt.nullValue!==void 0&&ct.uint32(8).int32(rt(nt.nullValue)),nt.numberValue!==void 0&&ct.uint32(17).double(nt.numberValue),nt.stringValue!==void 0&&ct.uint32(26).string(nt.stringValue),nt.boolValue!==void 0&&ct.uint32(32).bool(nt.boolValue),nt.structValue!==void 0&&a.Struct.encode(a.Struct.wrap(nt.structValue),ct.uint32(42).fork()).ldelim(),nt.listValue!==void 0&&a.ListValue.encode(a.ListValue.wrap(nt.listValue),ct.uint32(50).fork()).ldelim(),ct},decode(nt,ct){const mt=nt instanceof _.Reader?nt:new _.Reader(nt);let kt=ct===void 0?mt.len:mt.pos+ct;const Tt=st();for(;mt.pos<kt;){const Pt=mt.uint32();switch(Pt>>>3){case 1:Tt.nullValue=_e(mt.int32());break;case 2:Tt.numberValue=mt.double();break;case 3:Tt.stringValue=mt.string();break;case 4:Tt.boolValue=mt.bool();break;case 5:Tt.structValue=a.Struct.unwrap(a.Struct.decode(mt,mt.uint32()));break;case 6:Tt.listValue=a.ListValue.unwrap(a.ListValue.decode(mt,mt.uint32()));break;default:mt.skipType(Pt&7);break}}return Tt},fromJSON(nt){return{nullValue:ht(nt.nullValue)?_e(nt.nullValue):void 0,numberValue:ht(nt.numberValue)?Number(nt.numberValue):void 0,stringValue:ht(nt.stringValue)?String(nt.stringValue):void 0,boolValue:ht(nt.boolValue)?Boolean(nt.boolValue):void 0,structValue:ut(nt.structValue)?nt.structValue:void 0,listValue:Array.isArray(nt.listValue)?[...nt.listValue]:void 0}},toJSON(nt){const ct={};return nt.nullValue!==void 0&&(ct.nullValue=nt.nullValue!==void 0?tt(nt.nullValue):void 0),nt.numberValue!==void 0&&(ct.numberValue=nt.numberValue),nt.stringValue!==void 0&&(ct.stringValue=nt.stringValue),nt.boolValue!==void 0&&(ct.boolValue=nt.boolValue),nt.structValue!==void 0&&(ct.structValue=nt.structValue),nt.listValue!==void 0&&(ct.listValue=nt.listValue),ct},fromPartial(nt){var ct,mt,kt,Tt,Pt,At;const gt=st();return gt.nullValue=(ct=nt.nullValue)!==null&&ct!==void 0?ct:void 0,gt.numberValue=(mt=nt.numberValue)!==null&&mt!==void 0?mt:void 0,gt.stringValue=(kt=nt.stringValue)!==null&&kt!==void 0?kt:void 0,gt.boolValue=(Tt=nt.boolValue)!==null&&Tt!==void 0?Tt:void 0,gt.structValue=(Pt=nt.structValue)!==null&&Pt!==void 0?Pt:void 0,gt.listValue=(At=nt.listValue)!==null&&At!==void 0?At:void 0,gt},wrap(nt){const ct=st();if(nt===null)ct.nullValue=$.NULL_VALUE;else if(typeof nt=="boolean")ct.boolValue=nt;else if(typeof nt=="number")ct.numberValue=nt;else if(typeof nt=="string")ct.stringValue=nt;else if(Array.isArray(nt))ct.listValue=nt;else if(typeof nt=="object")ct.structValue=nt;else if(typeof nt!="undefined")throw new Error("Unsupported any value type: "+typeof nt);return ct},unwrap(nt){if((nt==null?void 0:nt.stringValue)!==void 0)return nt.stringValue;if((nt==null?void 0:nt.numberValue)!==void 0)return nt.numberValue;if((nt==null?void 0:nt.boolValue)!==void 0)return nt.boolValue;if((nt==null?void 0:nt.structValue)!==void 0)return nt.structValue;if((nt==null?void 0:nt.listValue)!==void 0)return nt.listValue;if((nt==null?void 0:nt.nullValue)!==void 0)return null}};function lt(){return{values:[]}}a.ListValue={encode(nt,ct=_.Writer.create()){for(const mt of nt.values)a.Value.encode(a.Value.wrap(mt),ct.uint32(10).fork()).ldelim();return ct},decode(nt,ct){const mt=nt instanceof _.Reader?nt:new _.Reader(nt);let kt=ct===void 0?mt.len:mt.pos+ct;const Tt=lt();for(;mt.pos<kt;){const Pt=mt.uint32();switch(Pt>>>3){case 1:Tt.values.push(a.Value.unwrap(a.Value.decode(mt,mt.uint32())));break;default:mt.skipType(Pt&7);break}}return Tt},fromJSON(nt){return{values:Array.isArray(nt==null?void 0:nt.values)?[...nt.values]:[]}},toJSON(nt){const ct={};return nt.values?ct.values=nt.values.map(mt=>mt):ct.values=[],ct},fromPartial(nt){var ct;const mt=lt();return mt.values=((ct=nt.values)===null||ct===void 0?void 0:ct.map(kt=>kt))||[],mt},wrap(nt){const ct=lt();return ct.values=nt!=null?nt:[],ct},unwrap(nt){return nt.values}};var dt=(()=>{if(typeof dt!="undefined")return dt;if(typeof self!="undefined")return self;if(typeof window!="undefined")return window;if(typeof commonjsGlobal$1!="undefined")return commonjsGlobal$1;throw"Unable to locate global object"})();_.util.Long!==b.default&&(_.util.Long=b.default,_.configure());function ut(nt){return typeof nt=="object"&&nt!==null}function ht(nt){return nt!=null}})(struct$2);(function(a){var s=commonjsGlobal$1&&commonjsGlobal$1.__createBinding||(Object.create?function(et,ft,yt,Mt){Mt===void 0&&(Mt=yt),Object.defineProperty(et,Mt,{enumerable:!0,get:function(){return ft[yt]}})}:function(et,ft,yt,Mt){Mt===void 0&&(Mt=yt),et[Mt]=ft[yt]}),d=commonjsGlobal$1&&commonjsGlobal$1.__setModuleDefault||(Object.create?function(et,ft){Object.defineProperty(et,"default",{enumerable:!0,value:ft})}:function(et,ft){et.default=ft}),c=commonjsGlobal$1&&commonjsGlobal$1.__importStar||function(et){if(et&&et.__esModule)return et;var ft={};if(et!=null)for(var yt in et)yt!=="default"&&Object.hasOwnProperty.call(et,yt)&&s(ft,et,yt);return d(ft,et),ft},h=commonjsGlobal$1&&commonjsGlobal$1.__importDefault||function(et){return et&&et.__esModule?et:{default:et}};Object.defineProperty(a,"__esModule",{value:!0}),a.LayoutServiceDefinition=a.LayoutServiceClientImpl=a.LayerServiceDefinition=a.LayerServiceClientImpl=a.Event=a.LayerEvent=a.LayoutEvent=a.BatchLayerRequest_BatchItem=a.BatchLayerRequest=a.BatchDeleteLayerRequest=a.DeleteLayerPayload=a.UpdateLayerRequest=a.GetLayerRequest=a.CreateLayerRequest=a.ListLayersResponse=a.ListLayersRequest=a.PartialLayerWithID=a.PartialLayer=a.LayerAnimation=a.DeleteLayoutResponse=a.DeleteLayoutRequest=a.DeleteLayoutPayload=a.UpdateLayoutRequest=a.GetLayoutRequest=a.CreateLayoutRequest=a.ListLayoutsResponse=a.ListLayoutsRequest=a.PartialLayout=a.BatchLayerResponse_BatchLayerItem=a.BatchLayerResponse=a.DeleteLayerResponse=a.DeleteLayerRequest=a.Layer=a.Layout=a.Transition_TransitionStinger=a.Transition_TransitionStingerCut=a.Transition_TransitionSwipe=a.Transition_TransitionCrossfade=a.Transition_TransitionFadeToColor=a.Transition_TransitionCut=a.Transition_TransitionMediaType=a.Transition=a.transition_TransitionSwipeTypeToNumber=a.transition_TransitionSwipeTypeToJSON=a.transition_TransitionSwipeTypeFromJSON=a.Transition_TransitionSwipeType=a.transition_TransitionDirectionToNumber=a.transition_TransitionDirectionToJSON=a.transition_TransitionDirectionFromJSON=a.Transition_TransitionDirection=a.eventTypeToNumber=a.eventTypeToJSON=a.eventTypeFromJSON=a.EventType=a.eventSubTypeToNumber=a.eventSubTypeToJSON=a.eventSubTypeFromJSON=a.EventSubType=a.requestAnimationModeToNumber=a.requestAnimationModeToJSON=a.requestAnimationModeFromJSON=a.RequestAnimationMode=a.layoutTypeToNumber=a.layoutTypeToJSON=a.layoutTypeFromJSON=a.LayoutType=a.protobufPackage=void 0;const b=h(umd.exports),_=c(minimal$2),$=struct$2;a.protobufPackage="apis.layout.v2";var _e;(function(et){et.LAYOUT_TYPE_UNSPECIFIED="LAYOUT_TYPE_UNSPECIFIED",et.LAYOUT_TYPE_SCENELESS="LAYOUT_TYPE_SCENELESS",et.LAYOUT_TYPE_SCENE="LAYOUT_TYPE_SCENE"})(_e=a.LayoutType||(a.LayoutType={}));function tt(et){switch(et){case 0:case"LAYOUT_TYPE_UNSPECIFIED":return _e.LAYOUT_TYPE_UNSPECIFIED;case 1:case"LAYOUT_TYPE_SCENELESS":return _e.LAYOUT_TYPE_SCENELESS;case 2:case"LAYOUT_TYPE_SCENE":return _e.LAYOUT_TYPE_SCENE;default:throw new Un.Error("Unrecognized enum value "+et+" for enum LayoutType")}}a.layoutTypeFromJSON=tt;function rt(et){switch(et){case _e.LAYOUT_TYPE_UNSPECIFIED:return"LAYOUT_TYPE_UNSPECIFIED";case _e.LAYOUT_TYPE_SCENELESS:return"LAYOUT_TYPE_SCENELESS";case _e.LAYOUT_TYPE_SCENE:return"LAYOUT_TYPE_SCENE";default:return"UNKNOWN"}}a.layoutTypeToJSON=rt;function ot(et){switch(et){case _e.LAYOUT_TYPE_UNSPECIFIED:return 0;case _e.LAYOUT_TYPE_SCENELESS:return 1;case _e.LAYOUT_TYPE_SCENE:return 2;default:return 0}}a.layoutTypeToNumber=ot;var it;(function(et){et.REQUEST_ANIMATION_MODE_UNSPECIFIED="REQUEST_ANIMATION_MODE_UNSPECIFIED",et.REQUEST_ANIMATION_MODE_PARALLEL="REQUEST_ANIMATION_MODE_PARALLEL",et.REQUEST_ANIMATION_MODE_SERIES="REQUEST_ANIMATION_MODE_SERIES"})(it=a.RequestAnimationMode||(a.RequestAnimationMode={}));function st(et){switch(et){case 0:case"REQUEST_ANIMATION_MODE_UNSPECIFIED":return it.REQUEST_ANIMATION_MODE_UNSPECIFIED;case 1:case"REQUEST_ANIMATION_MODE_PARALLEL":return it.REQUEST_ANIMATION_MODE_PARALLEL;case 2:case"REQUEST_ANIMATION_MODE_SERIES":return it.REQUEST_ANIMATION_MODE_SERIES;default:throw new Un.Error("Unrecognized enum value "+et+" for enum RequestAnimationMode")}}a.requestAnimationModeFromJSON=st;function lt(et){switch(et){case it.REQUEST_ANIMATION_MODE_UNSPECIFIED:return"REQUEST_ANIMATION_MODE_UNSPECIFIED";case it.REQUEST_ANIMATION_MODE_PARALLEL:return"REQUEST_ANIMATION_MODE_PARALLEL";case it.REQUEST_ANIMATION_MODE_SERIES:return"REQUEST_ANIMATION_MODE_SERIES";default:return"UNKNOWN"}}a.requestAnimationModeToJSON=lt;function dt(et){switch(et){case it.REQUEST_ANIMATION_MODE_UNSPECIFIED:return 0;case it.REQUEST_ANIMATION_MODE_PARALLEL:return 1;case it.REQUEST_ANIMATION_MODE_SERIES:return 2;default:return 0}}a.requestAnimationModeToNumber=dt;var ut;(function(et){et.EVENT_SUB_TYPE_UNSPECIFIED="EVENT_SUB_TYPE_UNSPECIFIED",et.EVENT_SUB_TYPE_CREATE="EVENT_SUB_TYPE_CREATE",et.EVENT_SUB_TYPE_UPDATE="EVENT_SUB_TYPE_UPDATE",et.EVENT_SUB_TYPE_DELETE="EVENT_SUB_TYPE_DELETE",et.EVENT_SUB_TYPE_BATCH="EVENT_SUB_TYPE_BATCH"})(ut=a.EventSubType||(a.EventSubType={}));function ht(et){switch(et){case 0:case"EVENT_SUB_TYPE_UNSPECIFIED":return ut.EVENT_SUB_TYPE_UNSPECIFIED;case 1:case"EVENT_SUB_TYPE_CREATE":return ut.EVENT_SUB_TYPE_CREATE;case 2:case"EVENT_SUB_TYPE_UPDATE":return ut.EVENT_SUB_TYPE_UPDATE;case 3:case"EVENT_SUB_TYPE_DELETE":return ut.EVENT_SUB_TYPE_DELETE;case 4:case"EVENT_SUB_TYPE_BATCH":return ut.EVENT_SUB_TYPE_BATCH;default:throw new Un.Error("Unrecognized enum value "+et+" for enum EventSubType")}}a.eventSubTypeFromJSON=ht;function nt(et){switch(et){case ut.EVENT_SUB_TYPE_UNSPECIFIED:return"EVENT_SUB_TYPE_UNSPECIFIED";case ut.EVENT_SUB_TYPE_CREATE:return"EVENT_SUB_TYPE_CREATE";case ut.EVENT_SUB_TYPE_UPDATE:return"EVENT_SUB_TYPE_UPDATE";case ut.EVENT_SUB_TYPE_DELETE:return"EVENT_SUB_TYPE_DELETE";case ut.EVENT_SUB_TYPE_BATCH:return"EVENT_SUB_TYPE_BATCH";default:return"UNKNOWN"}}a.eventSubTypeToJSON=nt;function ct(et){switch(et){case ut.EVENT_SUB_TYPE_UNSPECIFIED:return 0;case ut.EVENT_SUB_TYPE_CREATE:return 1;case ut.EVENT_SUB_TYPE_UPDATE:return 2;case ut.EVENT_SUB_TYPE_DELETE:return 3;case ut.EVENT_SUB_TYPE_BATCH:return 4;default:return 0}}a.eventSubTypeToNumber=ct;var mt;(function(et){et.EVENT_TYPE_UNSPECIFIED="EVENT_TYPE_UNSPECIFIED",et.EVENT_TYPE_LAYOUT="EVENT_TYPE_LAYOUT",et.EVENT_TYPE_LAYER="EVENT_TYPE_LAYER"})(mt=a.EventType||(a.EventType={}));function kt(et){switch(et){case 0:case"EVENT_TYPE_UNSPECIFIED":return mt.EVENT_TYPE_UNSPECIFIED;case 1:case"EVENT_TYPE_LAYOUT":return mt.EVENT_TYPE_LAYOUT;case 2:case"EVENT_TYPE_LAYER":return mt.EVENT_TYPE_LAYER;default:throw new Un.Error("Unrecognized enum value "+et+" for enum EventType")}}a.eventTypeFromJSON=kt;function Tt(et){switch(et){case mt.EVENT_TYPE_UNSPECIFIED:return"EVENT_TYPE_UNSPECIFIED";case mt.EVENT_TYPE_LAYOUT:return"EVENT_TYPE_LAYOUT";case mt.EVENT_TYPE_LAYER:return"EVENT_TYPE_LAYER";default:return"UNKNOWN"}}a.eventTypeToJSON=Tt;function Pt(et){switch(et){case mt.EVENT_TYPE_UNSPECIFIED:return 0;case mt.EVENT_TYPE_LAYOUT:return 1;case mt.EVENT_TYPE_LAYER:return 2;default:return 0}}a.eventTypeToNumber=Pt;var At;(function(et){et.TRANSITION_DIRECTION_UNSPECIFIED="TRANSITION_DIRECTION_UNSPECIFIED",et.TRANSITION_DIRECTION_LEFT="TRANSITION_DIRECTION_LEFT",et.TRANSITION_DIRECTION_RIGHT="TRANSITION_DIRECTION_RIGHT",et.TRANSITION_DIRECTION_UP="TRANSITION_DIRECTION_UP",et.TRANSITION_DIRECTION_DOWN="TRANSITION_DIRECTION_DOWN"})(At=a.Transition_TransitionDirection||(a.Transition_TransitionDirection={}));function gt(et){switch(et){case 0:case"TRANSITION_DIRECTION_UNSPECIFIED":return At.TRANSITION_DIRECTION_UNSPECIFIED;case 1:case"TRANSITION_DIRECTION_LEFT":return At.TRANSITION_DIRECTION_LEFT;case 2:case"TRANSITION_DIRECTION_RIGHT":return At.TRANSITION_DIRECTION_RIGHT;case 3:case"TRANSITION_DIRECTION_UP":return At.TRANSITION_DIRECTION_UP;case 4:case"TRANSITION_DIRECTION_DOWN":return At.TRANSITION_DIRECTION_DOWN;default:throw new Un.Error("Unrecognized enum value "+et+" for enum Transition_TransitionDirection")}}a.transition_TransitionDirectionFromJSON=gt;function Ct(et){switch(et){case At.TRANSITION_DIRECTION_UNSPECIFIED:return"TRANSITION_DIRECTION_UNSPECIFIED";case At.TRANSITION_DIRECTION_LEFT:return"TRANSITION_DIRECTION_LEFT";case At.TRANSITION_DIRECTION_RIGHT:return"TRANSITION_DIRECTION_RIGHT";case At.TRANSITION_DIRECTION_UP:return"TRANSITION_DIRECTION_UP";case At.TRANSITION_DIRECTION_DOWN:return"TRANSITION_DIRECTION_DOWN";default:return"UNKNOWN"}}a.transition_TransitionDirectionToJSON=Ct;function Nt(et){switch(et){case At.TRANSITION_DIRECTION_UNSPECIFIED:return 0;case At.TRANSITION_DIRECTION_LEFT:return 1;case At.TRANSITION_DIRECTION_RIGHT:return 2;case At.TRANSITION_DIRECTION_UP:return 3;case At.TRANSITION_DIRECTION_DOWN:return 4;default:return 0}}a.transition_TransitionDirectionToNumber=Nt;var vt;(function(et){et.TRANSITION_SWIPE_TYPE_UNSPECIFIED="TRANSITION_SWIPE_TYPE_UNSPECIFIED",et.TRANSITION_SWIPE_TYPE_COMBINED="TRANSITION_SWIPE_TYPE_COMBINED",et.TRANSITION_SWIPE_TYPE_SOURCE="TRANSITION_SWIPE_TYPE_SOURCE",et.TRANSITION_SWIPE_TYPE_DESTINATION="TRANSITION_SWIPE_TYPE_DESTINATION"})(vt=a.Transition_TransitionSwipeType||(a.Transition_TransitionSwipeType={}));function Et(et){switch(et){case 0:case"TRANSITION_SWIPE_TYPE_UNSPECIFIED":return vt.TRANSITION_SWIPE_TYPE_UNSPECIFIED;case 1:case"TRANSITION_SWIPE_TYPE_COMBINED":return vt.TRANSITION_SWIPE_TYPE_COMBINED;case 2:case"TRANSITION_SWIPE_TYPE_SOURCE":return vt.TRANSITION_SWIPE_TYPE_SOURCE;case 3:case"TRANSITION_SWIPE_TYPE_DESTINATION":return vt.TRANSITION_SWIPE_TYPE_DESTINATION;default:throw new Un.Error("Unrecognized enum value "+et+" for enum Transition_TransitionSwipeType")}}a.transition_TransitionSwipeTypeFromJSON=Et;function It(et){switch(et){case vt.TRANSITION_SWIPE_TYPE_UNSPECIFIED:return"TRANSITION_SWIPE_TYPE_UNSPECIFIED";case vt.TRANSITION_SWIPE_TYPE_COMBINED:return"TRANSITION_SWIPE_TYPE_COMBINED";case vt.TRANSITION_SWIPE_TYPE_SOURCE:return"TRANSITION_SWIPE_TYPE_SOURCE";case vt.TRANSITION_SWIPE_TYPE_DESTINATION:return"TRANSITION_SWIPE_TYPE_DESTINATION";default:return"UNKNOWN"}}a.transition_TransitionSwipeTypeToJSON=It;function xt(et){switch(et){case vt.TRANSITION_SWIPE_TYPE_UNSPECIFIED:return 0;case vt.TRANSITION_SWIPE_TYPE_COMBINED:return 1;case vt.TRANSITION_SWIPE_TYPE_SOURCE:return 2;case vt.TRANSITION_SWIPE_TYPE_DESTINATION:return 3;default:return 0}}a.transition_TransitionSwipeTypeToNumber=xt;function Dt(){return{fromLayoutIds:[],cut:void 0,crossfade:void 0,fadeToColor:void 0,swipe:void 0,stinger:void 0}}a.Transition={encode(et,ft=_.Writer.create()){for(const yt of et.fromLayoutIds)ft.uint32(10).string(yt);return et.cut!==void 0&&a.Transition_TransitionCut.encode(et.cut,ft.uint32(82).fork()).ldelim(),et.crossfade!==void 0&&a.Transition_TransitionCrossfade.encode(et.crossfade,ft.uint32(90).fork()).ldelim(),et.fadeToColor!==void 0&&a.Transition_TransitionFadeToColor.encode(et.fadeToColor,ft.uint32(98).fork()).ldelim(),et.swipe!==void 0&&a.Transition_TransitionSwipe.encode(et.swipe,ft.uint32(106).fork()).ldelim(),et.stinger!==void 0&&a.Transition_TransitionStinger.encode(et.stinger,ft.uint32(114).fork()).ldelim(),ft},decode(et,ft){const yt=et instanceof _.Reader?et:new _.Reader(et);let Mt=ft===void 0?yt.len:yt.pos+ft;const wt=Dt();for(;yt.pos<Mt;){const Bt=yt.uint32();switch(Bt>>>3){case 1:wt.fromLayoutIds.push(yt.string());break;case 10:wt.cut=a.Transition_TransitionCut.decode(yt,yt.uint32());break;case 11:wt.crossfade=a.Transition_TransitionCrossfade.decode(yt,yt.uint32());break;case 12:wt.fadeToColor=a.Transition_TransitionFadeToColor.decode(yt,yt.uint32());break;case 13:wt.swipe=a.Transition_TransitionSwipe.decode(yt,yt.uint32());break;case 14:wt.stinger=a.Transition_TransitionStinger.decode(yt,yt.uint32());break;default:yt.skipType(Bt&7);break}}return wt},fromJSON(et){return{fromLayoutIds:Array.isArray(et==null?void 0:et.fromLayoutIds)?et.fromLayoutIds.map(ft=>String(ft)):[],cut:Vt(et.cut)?a.Transition_TransitionCut.fromJSON(et.cut):void 0,crossfade:Vt(et.crossfade)?a.Transition_TransitionCrossfade.fromJSON(et.crossfade):void 0,fadeToColor:Vt(et.fadeToColor)?a.Transition_TransitionFadeToColor.fromJSON(et.fadeToColor):void 0,swipe:Vt(et.swipe)?a.Transition_TransitionSwipe.fromJSON(et.swipe):void 0,stinger:Vt(et.stinger)?a.Transition_TransitionStinger.fromJSON(et.stinger):void 0}},toJSON(et){const ft={};return et.fromLayoutIds?ft.fromLayoutIds=et.fromLayoutIds.map(yt=>yt):ft.fromLayoutIds=[],et.cut!==void 0&&(ft.cut=et.cut?a.Transition_TransitionCut.toJSON(et.cut):void 0),et.crossfade!==void 0&&(ft.crossfade=et.crossfade?a.Transition_TransitionCrossfade.toJSON(et.crossfade):void 0),et.fadeToColor!==void 0&&(ft.fadeToColor=et.fadeToColor?a.Transition_TransitionFadeToColor.toJSON(et.fadeToColor):void 0),et.swipe!==void 0&&(ft.swipe=et.swipe?a.Transition_TransitionSwipe.toJSON(et.swipe):void 0),et.stinger!==void 0&&(ft.stinger=et.stinger?a.Transition_TransitionStinger.toJSON(et.stinger):void 0),ft},fromPartial(et){var ft;const yt=Dt();return yt.fromLayoutIds=((ft=et.fromLayoutIds)===null||ft===void 0?void 0:ft.map(Mt=>Mt))||[],yt.cut=et.cut!==void 0&&et.cut!==null?a.Transition_TransitionCut.fromPartial(et.cut):void 0,yt.crossfade=et.crossfade!==void 0&&et.crossfade!==null?a.Transition_TransitionCrossfade.fromPartial(et.crossfade):void 0,yt.fadeToColor=et.fadeToColor!==void 0&&et.fadeToColor!==null?a.Transition_TransitionFadeToColor.fromPartial(et.fadeToColor):void 0,yt.swipe=et.swipe!==void 0&&et.swipe!==null?a.Transition_TransitionSwipe.fromPartial(et.swipe):void 0,yt.stinger=et.stinger!==void 0&&et.stinger!==null?a.Transition_TransitionStinger.fromPartial(et.stinger):void 0,yt}};function Ot(){return{url:"",volume:0}}a.Transition_TransitionMediaType={encode(et,ft=_.Writer.create()){return et.url!==""&&ft.uint32(10).string(et.url),et.volume!==0&&ft.uint32(17).double(et.volume),ft},decode(et,ft){const yt=et instanceof _.Reader?et:new _.Reader(et);let Mt=ft===void 0?yt.len:yt.pos+ft;const wt=Ot();for(;yt.pos<Mt;){const Bt=yt.uint32();switch(Bt>>>3){case 1:wt.url=yt.string();break;case 2:wt.volume=yt.double();break;default:yt.skipType(Bt&7);break}}return wt},fromJSON(et){return{url:Vt(et.url)?String(et.url):"",volume:Vt(et.volume)?Number(et.volume):0}},toJSON(et){const ft={};return et.url!==void 0&&(ft.url=et.url),et.volume!==void 0&&(ft.volume=et.volume),ft},fromPartial(et){var ft,yt;const Mt=Ot();return Mt.url=(ft=et.url)!==null&&ft!==void 0?ft:"",Mt.volume=(yt=et.volume)!==null&&yt!==void 0?yt:0,Mt}};function Jt(){return{}}a.Transition_TransitionCut={encode(et,ft=_.Writer.create()){return ft},decode(et,ft){const yt=et instanceof _.Reader?et:new _.Reader(et);let Mt=ft===void 0?yt.len:yt.pos+ft;const wt=Jt();for(;yt.pos<Mt;){const Bt=yt.uint32();switch(Bt>>>3){default:yt.skipType(Bt&7);break}}return wt},fromJSON(et){return{}},toJSON(et){return{}},fromPartial(et){return Jt()}};function Yt(){return{durationMs:0,backgroundColor:""}}a.Transition_TransitionFadeToColor={encode(et,ft=_.Writer.create()){return et.durationMs!==0&&ft.uint32(8).int32(et.durationMs),et.backgroundColor!==""&&ft.uint32(18).string(et.backgroundColor),ft},decode(et,ft){const yt=et instanceof _.Reader?et:new _.Reader(et);let Mt=ft===void 0?yt.len:yt.pos+ft;const wt=Yt();for(;yt.pos<Mt;){const Bt=yt.uint32();switch(Bt>>>3){case 1:wt.durationMs=yt.int32();break;case 2:wt.backgroundColor=yt.string();break;default:yt.skipType(Bt&7);break}}return wt},fromJSON(et){return{durationMs:Vt(et.durationMs)?Number(et.durationMs):0,backgroundColor:Vt(et.backgroundColor)?String(et.backgroundColor):""}},toJSON(et){const ft={};return et.durationMs!==void 0&&(ft.durationMs=Math.round(et.durationMs)),et.backgroundColor!==void 0&&(ft.backgroundColor=et.backgroundColor),ft},fromPartial(et){var ft,yt;const Mt=Yt();return Mt.durationMs=(ft=et.durationMs)!==null&&ft!==void 0?ft:0,Mt.backgroundColor=(yt=et.backgroundColor)!==null&&yt!==void 0?yt:"",Mt}};function Qt(){return{durationMs:0}}a.Transition_TransitionCrossfade={encode(et,ft=_.Writer.create()){return et.durationMs!==0&&ft.uint32(8).int32(et.durationMs),ft},decode(et,ft){const yt=et instanceof _.Reader?et:new _.Reader(et);let Mt=ft===void 0?yt.len:yt.pos+ft;const wt=Qt();for(;yt.pos<Mt;){const Bt=yt.uint32();switch(Bt>>>3){case 1:wt.durationMs=yt.int32();break;default:yt.skipType(Bt&7);break}}return wt},fromJSON(et){return{durationMs:Vt(et.durationMs)?Number(et.durationMs):0}},toJSON(et){const ft={};return et.durationMs!==void 0&&(ft.durationMs=Math.round(et.durationMs)),ft},fromPartial(et){var ft;const yt=Qt();return yt.durationMs=(ft=et.durationMs)!==null&&ft!==void 0?ft:0,yt}};function Ft(){return{durationMs:0,direction:At.TRANSITION_DIRECTION_UNSPECIFIED,combinedAnimation:vt.TRANSITION_SWIPE_TYPE_UNSPECIFIED}}a.Transition_TransitionSwipe={encode(et,ft=_.Writer.create()){return et.durationMs!==0&&ft.uint32(8).int32(et.durationMs),et.direction!==At.TRANSITION_DIRECTION_UNSPECIFIED&&ft.uint32(16).int32(Nt(et.direction)),et.combinedAnimation!==vt.TRANSITION_SWIPE_TYPE_UNSPECIFIED&&ft.uint32(24).int32(xt(et.combinedAnimation)),ft},decode(et,ft){const yt=et instanceof _.Reader?et:new _.Reader(et);let Mt=ft===void 0?yt.len:yt.pos+ft;const wt=Ft();for(;yt.pos<Mt;){const Bt=yt.uint32();switch(Bt>>>3){case 1:wt.durationMs=yt.int32();break;case 2:wt.direction=gt(yt.int32());break;case 3:wt.combinedAnimation=Et(yt.int32());break;default:yt.skipType(Bt&7);break}}return wt},fromJSON(et){return{durationMs:Vt(et.durationMs)?Number(et.durationMs):0,direction:Vt(et.direction)?gt(et.direction):At.TRANSITION_DIRECTION_UNSPECIFIED,combinedAnimation:Vt(et.combinedAnimation)?Et(et.combinedAnimation):vt.TRANSITION_SWIPE_TYPE_UNSPECIFIED}},toJSON(et){const ft={};return et.durationMs!==void 0&&(ft.durationMs=Math.round(et.durationMs)),et.direction!==void 0&&(ft.direction=Ct(et.direction)),et.combinedAnimation!==void 0&&(ft.combinedAnimation=It(et.combinedAnimation)),ft},fromPartial(et){var ft,yt,Mt;const wt=Ft();return wt.durationMs=(ft=et.durationMs)!==null&&ft!==void 0?ft:0,wt.direction=(yt=et.direction)!==null&&yt!==void 0?yt:At.TRANSITION_DIRECTION_UNSPECIFIED,wt.combinedAnimation=(Mt=et.combinedAnimation)!==null&&Mt!==void 0?Mt:vt.TRANSITION_SWIPE_TYPE_UNSPECIFIED,wt}};function pt(){return{cutPointMs:0,media:void 0}}a.Transition_TransitionStingerCut={encode(et,ft=_.Writer.create()){return et.cutPointMs!==0&&ft.uint32(8).int32(et.cutPointMs),et.media!==void 0&&a.Transition_TransitionMediaType.encode(et.media,ft.uint32(18).fork()).ldelim(),ft},decode(et,ft){const yt=et instanceof _.Reader?et:new _.Reader(et);let Mt=ft===void 0?yt.len:yt.pos+ft;const wt=pt();for(;yt.pos<Mt;){const Bt=yt.uint32();switch(Bt>>>3){case 1:wt.cutPointMs=yt.int32();break;case 2:wt.media=a.Transition_TransitionMediaType.decode(yt,yt.uint32());break;default:yt.skipType(Bt&7);break}}return wt},fromJSON(et){return{cutPointMs:Vt(et.cutPointMs)?Number(et.cutPointMs):0,media:Vt(et.media)?a.Transition_TransitionMediaType.fromJSON(et.media):void 0}},toJSON(et){const ft={};return et.cutPointMs!==void 0&&(ft.cutPointMs=Math.round(et.cutPointMs)),et.media!==void 0&&(ft.media=et.media?a.Transition_TransitionMediaType.toJSON(et.media):void 0),ft},fromPartial(et){var ft;const yt=pt();return yt.cutPointMs=(ft=et.cutPointMs)!==null&&ft!==void 0?ft:0,yt.media=et.media!==void 0&&et.media!==null?a.Transition_TransitionMediaType.fromPartial(et.media):void 0,yt}};function _t(){return{cut:void 0}}a.Transition_TransitionStinger={encode(et,ft=_.Writer.create()){return et.cut!==void 0&&a.Transition_TransitionStingerCut.encode(et.cut,ft.uint32(10).fork()).ldelim(),ft},decode(et,ft){const yt=et instanceof _.Reader?et:new _.Reader(et);let Mt=ft===void 0?yt.len:yt.pos+ft;const wt=_t();for(;yt.pos<Mt;){const Bt=yt.uint32();switch(Bt>>>3){case 1:wt.cut=a.Transition_TransitionStingerCut.decode(yt,yt.uint32());break;default:yt.skipType(Bt&7);break}}return wt},fromJSON(et){return{cut:Vt(et.cut)?a.Transition_TransitionStingerCut.fromJSON(et.cut):void 0}},toJSON(et){const ft={};return et.cut!==void 0&&(ft.cut=et.cut?a.Transition_TransitionStingerCut.toJSON(et.cut):void 0),ft},fromPartial(et){const ft=_t();return ft.cut=et.cut!==void 0&&et.cut!==null?a.Transition_TransitionStingerCut.fromPartial(et.cut):void 0,ft}};function Lt(){return{id:"",width:0,height:0,metadata:void 0,projectId:void 0,collectionId:void 0,type:void 0,transitions:[],requestMetadata:void 0}}a.Layout={encode(et,ft=_.Writer.create()){et.id!==""&&ft.uint32(10).string(et.id),et.width!==0&&ft.uint32(16).int32(et.width),et.height!==0&&ft.uint32(24).int32(et.height),et.metadata!==void 0&&$.Value.encode($.Value.wrap(et.metadata),ft.uint32(50).fork()).ldelim(),et.projectId!==void 0&&ft.uint32(58).string(et.projectId),et.collectionId!==void 0&&ft.uint32(66).string(et.collectionId),et.type!==void 0&&ft.uint32(72).int32(ot(et.type));for(const yt of et.transitions)a.Transition.encode(yt,ft.uint32(82).fork()).ldelim();return et.requestMetadata!==void 0&&$.Value.encode($.Value.wrap(et.requestMetadata),ft.uint32(810).fork()).ldelim(),ft},decode(et,ft){const yt=et instanceof _.Reader?et:new _.Reader(et);let Mt=ft===void 0?yt.len:yt.pos+ft;const wt=Lt();for(;yt.pos<Mt;){const Bt=yt.uint32();switch(Bt>>>3){case 1:wt.id=yt.string();break;case 2:wt.width=yt.int32();break;case 3:wt.height=yt.int32();break;case 6:wt.metadata=$.Value.unwrap($.Value.decode(yt,yt.uint32()));break;case 7:wt.projectId=yt.string();break;case 8:wt.collectionId=yt.string();break;case 9:wt.type=tt(yt.int32());break;case 10:wt.transitions.push(a.Transition.decode(yt,yt.uint32()));break;case 101:wt.requestMetadata=$.Value.unwrap($.Value.decode(yt,yt.uint32()));break;default:yt.skipType(Bt&7);break}}return wt},fromJSON(et){return{id:Vt(et.id)?String(et.id):"",width:Vt(et.width)?Number(et.width):0,height:Vt(et.height)?Number(et.height):0,metadata:Vt(et==null?void 0:et.metadata)?et.metadata:void 0,projectId:Vt(et.projectId)?String(et.projectId):void 0,collectionId:Vt(et.collectionId)?String(et.collectionId):void 0,type:Vt(et.type)?tt(et.type):void 0,transitions:Array.isArray(et==null?void 0:et.transitions)?et.transitions.map(ft=>a.Transition.fromJSON(ft)):[],requestMetadata:Vt(et==null?void 0:et.requestMetadata)?et.requestMetadata:void 0}},toJSON(et){const ft={};return et.id!==void 0&&(ft.id=et.id),et.width!==void 0&&(ft.width=Math.round(et.width)),et.height!==void 0&&(ft.height=Math.round(et.height)),et.metadata!==void 0&&(ft.metadata=et.metadata),et.projectId!==void 0&&(ft.projectId=et.projectId),et.collectionId!==void 0&&(ft.collectionId=et.collectionId),et.type!==void 0&&(ft.type=et.type!==void 0?rt(et.type):void 0),et.transitions?ft.transitions=et.transitions.map(yt=>yt?a.Transition.toJSON(yt):void 0):ft.transitions=[],et.requestMetadata!==void 0&&(ft.requestMetadata=et.requestMetadata),ft},fromPartial(et){var ft,yt,Mt,wt,Bt,fn,En,bn,pn;const hn=Lt();return hn.id=(ft=et.id)!==null&&ft!==void 0?ft:"",hn.width=(yt=et.width)!==null&&yt!==void 0?yt:0,hn.height=(Mt=et.height)!==null&&Mt!==void 0?Mt:0,hn.metadata=(wt=et.metadata)!==null&&wt!==void 0?wt:void 0,hn.projectId=(Bt=et.projectId)!==null&&Bt!==void 0?Bt:void 0,hn.collectionId=(fn=et.collectionId)!==null&&fn!==void 0?fn:void 0,hn.type=(En=et.type)!==null&&En!==void 0?En:void 0,hn.transitions=((bn=et.transitions)===null||bn===void 0?void 0:bn.map(Nn=>a.Transition.fromPartial(Nn)))||[],hn.requestMetadata=(pn=et.requestMetadata)!==null&&pn!==void 0?pn:void 0,hn}};function Gt(){return{type:"",data:void 0,x:void 0,y:void 0,width:void 0,height:void 0,rotation:0,opacity:0,scale:0,hidden:!1,children:void 0,metadata:void 0,id:"",layoutId:"",requestMetadata:void 0,requestAnimation:[]}}a.Layer={encode(et,ft=_.Writer.create()){et.type!==""&&ft.uint32(10).string(et.type),et.data!==void 0&&$.Struct.encode($.Struct.wrap(et.data),ft.uint32(18).fork()).ldelim(),et.x!==void 0&&$.Value.encode($.Value.wrap(et.x),ft.uint32(26).fork()).ldelim(),et.y!==void 0&&$.Value.encode($.Value.wrap(et.y),ft.uint32(34).fork()).ldelim(),et.width!==void 0&&$.Value.encode($.Value.wrap(et.width),ft.uint32(42).fork()).ldelim(),et.height!==void 0&&$.Value.encode($.Value.wrap(et.height),ft.uint32(50).fork()).ldelim(),et.rotation!==0&&ft.uint32(57).double(et.rotation),et.opacity!==0&&ft.uint32(65).double(et.opacity),et.scale!==0&&ft.uint32(73).double(et.scale),et.hidden===!0&&ft.uint32(80).bool(et.hidden),et.children!==void 0&&$.ListValue.encode($.ListValue.wrap(et.children),ft.uint32(98).fork()).ldelim(),et.metadata!==void 0&&$.Value.encode($.Value.wrap(et.metadata),ft.uint32(114).fork()).ldelim(),et.id!==""&&ft.uint32(802).string(et.id),et.layoutId!==""&&ft.uint32(818).string(et.layoutId),et.requestMetadata!==void 0&&$.Value.encode($.Value.wrap(et.requestMetadata),ft.uint32(810).fork()).ldelim();for(const yt of et.requestAnimation)a.LayerAnimation.encode(yt,ft.uint32(826).fork()).ldelim();return ft},decode(et,ft){const yt=et instanceof _.Reader?et:new _.Reader(et);let Mt=ft===void 0?yt.len:yt.pos+ft;const wt=Gt();for(;yt.pos<Mt;){const Bt=yt.uint32();switch(Bt>>>3){case 1:wt.type=yt.string();break;case 2:wt.data=$.Struct.unwrap($.Struct.decode(yt,yt.uint32()));break;case 3:wt.x=$.Value.unwrap($.Value.decode(yt,yt.uint32()));break;case 4:wt.y=$.Value.unwrap($.Value.decode(yt,yt.uint32()));break;case 5:wt.width=$.Value.unwrap($.Value.decode(yt,yt.uint32()));break;case 6:wt.height=$.Value.unwrap($.Value.decode(yt,yt.uint32()));break;case 7:wt.rotation=yt.double();break;case 8:wt.opacity=yt.double();break;case 9:wt.scale=yt.double();break;case 10:wt.hidden=yt.bool();break;case 12:wt.children=$.ListValue.unwrap($.ListValue.decode(yt,yt.uint32()));break;case 14:wt.metadata=$.Value.unwrap($.Value.decode(yt,yt.uint32()));break;case 100:wt.id=yt.string();break;case 102:wt.layoutId=yt.string();break;case 101:wt.requestMetadata=$.Value.unwrap($.Value.decode(yt,yt.uint32()));break;case 103:wt.requestAnimation.push(a.LayerAnimation.decode(yt,yt.uint32()));break;default:yt.skipType(Bt&7);break}}return wt},fromJSON(et){return{type:Vt(et.type)?String(et.type):"",data:Jn(et.data)?et.data:void 0,x:Vt(et==null?void 0:et.x)?et.x:void 0,y:Vt(et==null?void 0:et.y)?et.y:void 0,width:Vt(et==null?void 0:et.width)?et.width:void 0,height:Vt(et==null?void 0:et.height)?et.height:void 0,rotation:Vt(et.rotation)?Number(et.rotation):0,opacity:Vt(et.opacity)?Number(et.opacity):0,scale:Vt(et.scale)?Number(et.scale):0,hidden:Vt(et.hidden)?Boolean(et.hidden):!1,children:Array.isArray(et.children)?[...et.children]:void 0,metadata:Vt(et==null?void 0:et.metadata)?et.metadata:void 0,id:Vt(et.id)?String(et.id):"",layoutId:Vt(et.layoutId)?String(et.layoutId):"",requestMetadata:Vt(et==null?void 0:et.requestMetadata)?et.requestMetadata:void 0,requestAnimation:Array.isArray(et==null?void 0:et.requestAnimation)?et.requestAnimation.map(ft=>a.LayerAnimation.fromJSON(ft)):[]}},toJSON(et){const ft={};return et.type!==void 0&&(ft.type=et.type),et.data!==void 0&&(ft.data=et.data),et.x!==void 0&&(ft.x=et.x),et.y!==void 0&&(ft.y=et.y),et.width!==void 0&&(ft.width=et.width),et.height!==void 0&&(ft.height=et.height),et.rotation!==void 0&&(ft.rotation=et.rotation),et.opacity!==void 0&&(ft.opacity=et.opacity),et.scale!==void 0&&(ft.scale=et.scale),et.hidden!==void 0&&(ft.hidden=et.hidden),et.children!==void 0&&(ft.children=et.children),et.metadata!==void 0&&(ft.metadata=et.metadata),et.id!==void 0&&(ft.id=et.id),et.layoutId!==void 0&&(ft.layoutId=et.layoutId),et.requestMetadata!==void 0&&(ft.requestMetadata=et.requestMetadata),et.requestAnimation?ft.requestAnimation=et.requestAnimation.map(yt=>yt?a.LayerAnimation.toJSON(yt):void 0):ft.requestAnimation=[],ft},fromPartial(et){var ft,yt,Mt,wt,Bt,fn,En,bn,pn,hn,Nn,An,Ln,Dn,$n,mn;const nn=Gt();return nn.type=(ft=et.type)!==null&&ft!==void 0?ft:"",nn.data=(yt=et.data)!==null&&yt!==void 0?yt:void 0,nn.x=(Mt=et.x)!==null&&Mt!==void 0?Mt:void 0,nn.y=(wt=et.y)!==null&&wt!==void 0?wt:void 0,nn.width=(Bt=et.width)!==null&&Bt!==void 0?Bt:void 0,nn.height=(fn=et.height)!==null&&fn!==void 0?fn:void 0,nn.rotation=(En=et.rotation)!==null&&En!==void 0?En:0,nn.opacity=(bn=et.opacity)!==null&&bn!==void 0?bn:0,nn.scale=(pn=et.scale)!==null&&pn!==void 0?pn:0,nn.hidden=(hn=et.hidden)!==null&&hn!==void 0?hn:!1,nn.children=(Nn=et.children)!==null&&Nn!==void 0?Nn:void 0,nn.metadata=(An=et.metadata)!==null&&An!==void 0?An:void 0,nn.id=(Ln=et.id)!==null&&Ln!==void 0?Ln:"",nn.layoutId=(Dn=et.layoutId)!==null&&Dn!==void 0?Dn:"",nn.requestMetadata=($n=et.requestMetadata)!==null&&$n!==void 0?$n:void 0,nn.requestAnimation=((mn=et.requestAnimation)===null||mn===void 0?void 0:mn.map(Fn=>a.LayerAnimation.fromPartial(Fn)))||[],nn}};function Ut(){return{layoutId:"",layerId:"",payload:void 0}}a.DeleteLayerRequest={encode(et,ft=_.Writer.create()){return et.layoutId!==""&&ft.uint32(10).string(et.layoutId),et.layerId!==""&&ft.uint32(18).string(et.layerId),et.payload!==void 0&&a.DeleteLayerPayload.encode(et.payload,ft.uint32(26).fork()).ldelim(),ft},decode(et,ft){const yt=et instanceof _.Reader?et:new _.Reader(et);let Mt=ft===void 0?yt.len:yt.pos+ft;const wt=Ut();for(;yt.pos<Mt;){const Bt=yt.uint32();switch(Bt>>>3){case 1:wt.layoutId=yt.string();break;case 2:wt.layerId=yt.string();break;case 3:wt.payload=a.DeleteLayerPayload.decode(yt,yt.uint32());break;default:yt.skipType(Bt&7);break}}return wt},fromJSON(et){return{layoutId:Vt(et.layoutId)?String(et.layoutId):"",layerId:Vt(et.layerId)?String(et.layerId):"",payload:Vt(et.payload)?a.DeleteLayerPayload.fromJSON(et.payload):void 0}},toJSON(et){const ft={};return et.layoutId!==void 0&&(ft.layoutId=et.layoutId),et.layerId!==void 0&&(ft.layerId=et.layerId),et.payload!==void 0&&(ft.payload=et.payload?a.DeleteLayerPayload.toJSON(et.payload):void 0),ft},fromPartial(et){var ft,yt;const Mt=Ut();return Mt.layoutId=(ft=et.layoutId)!==null&&ft!==void 0?ft:"",Mt.layerId=(yt=et.layerId)!==null&&yt!==void 0?yt:"",Mt.payload=et.payload!==void 0&&et.payload!==null?a.DeleteLayerPayload.fromPartial(et.payload):void 0,Mt}};function $t(){return{id:"",layoutId:"",requestMetadata:void 0}}a.DeleteLayerResponse={encode(et,ft=_.Writer.create()){return et.id!==""&&ft.uint32(10).string(et.id),et.layoutId!==""&&ft.uint32(18).string(et.layoutId),et.requestMetadata!==void 0&&$.Value.encode($.Value.wrap(et.requestMetadata),ft.uint32(802).fork()).ldelim(),ft},decode(et,ft){const yt=et instanceof _.Reader?et:new _.Reader(et);let Mt=ft===void 0?yt.len:yt.pos+ft;const wt=$t();for(;yt.pos<Mt;){const Bt=yt.uint32();switch(Bt>>>3){case 1:wt.id=yt.string();break;case 2:wt.layoutId=yt.string();break;case 100:wt.requestMetadata=$.Value.unwrap($.Value.decode(yt,yt.uint32()));break;default:yt.skipType(Bt&7);break}}return wt},fromJSON(et){return{id:Vt(et.id)?String(et.id):"",layoutId:Vt(et.layoutId)?String(et.layoutId):"",requestMetadata:Vt(et==null?void 0:et.requestMetadata)?et.requestMetadata:void 0}},toJSON(et){const ft={};return et.id!==void 0&&(ft.id=et.id),et.layoutId!==void 0&&(ft.layoutId=et.layoutId),et.requestMetadata!==void 0&&(ft.requestMetadata=et.requestMetadata),ft},fromPartial(et){var ft,yt,Mt;const wt=$t();return wt.id=(ft=et.id)!==null&&ft!==void 0?ft:"",wt.layoutId=(yt=et.layoutId)!==null&&yt!==void 0?yt:"",wt.requestMetadata=(Mt=et.requestMetadata)!==null&&Mt!==void 0?Mt:void 0,wt}};function qt(){return{layers:[],layoutId:"",requestMetadata:void 0,requestAnimationMode:it.REQUEST_ANIMATION_MODE_UNSPECIFIED}}a.BatchLayerResponse={encode(et,ft=_.Writer.create()){for(const yt of et.layers)a.BatchLayerResponse_BatchLayerItem.encode(yt,ft.uint32(18).fork()).ldelim();return et.layoutId!==""&&ft.uint32(26).string(et.layoutId),et.requestMetadata!==void 0&&$.Value.encode($.Value.wrap(et.requestMetadata),ft.uint32(802).fork()).ldelim(),et.requestAnimationMode!==it.REQUEST_ANIMATION_MODE_UNSPECIFIED&&ft.uint32(808).int32(dt(et.requestAnimationMode)),ft},decode(et,ft){const yt=et instanceof _.Reader?et:new _.Reader(et);let Mt=ft===void 0?yt.len:yt.pos+ft;const wt=qt();for(;yt.pos<Mt;){const Bt=yt.uint32();switch(Bt>>>3){case 2:wt.layers.push(a.BatchLayerResponse_BatchLayerItem.decode(yt,yt.uint32()));break;case 3:wt.layoutId=yt.string();break;case 100:wt.requestMetadata=$.Value.unwrap($.Value.decode(yt,yt.uint32()));break;case 101:wt.requestAnimationMode=st(yt.int32());break;default:yt.skipType(Bt&7);break}}return wt},fromJSON(et){return{layers:Array.isArray(et==null?void 0:et.layers)?et.layers.map(ft=>a.BatchLayerResponse_BatchLayerItem.fromJSON(ft)):[],layoutId:Vt(et.layoutId)?String(et.layoutId):"",requestMetadata:Vt(et==null?void 0:et.requestMetadata)?et.requestMetadata:void 0,requestAnimationMode:Vt(et.requestAnimationMode)?st(et.requestAnimationMode):it.REQUEST_ANIMATION_MODE_UNSPECIFIED}},toJSON(et){const ft={};return et.layers?ft.layers=et.layers.map(yt=>yt?a.BatchLayerResponse_BatchLayerItem.toJSON(yt):void 0):ft.layers=[],et.layoutId!==void 0&&(ft.layoutId=et.layoutId),et.requestMetadata!==void 0&&(ft.requestMetadata=et.requestMetadata),et.requestAnimationMode!==void 0&&(ft.requestAnimationMode=lt(et.requestAnimationMode)),ft},fromPartial(et){var ft,yt,Mt,wt;const Bt=qt();return Bt.layers=((ft=et.layers)===null||ft===void 0?void 0:ft.map(fn=>a.BatchLayerResponse_BatchLayerItem.fromPartial(fn)))||[],Bt.layoutId=(yt=et.layoutId)!==null&&yt!==void 0?yt:"",Bt.requestMetadata=(Mt=et.requestMetadata)!==null&&Mt!==void 0?Mt:void 0,Bt.requestAnimationMode=(wt=et.requestAnimationMode)!==null&&wt!==void 0?wt:it.REQUEST_ANIMATION_MODE_UNSPECIFIED,Bt}};function Wt(){return{create:void 0,update:void 0,delete:void 0}}a.BatchLayerResponse_BatchLayerItem={encode(et,ft=_.Writer.create()){return et.create!==void 0&&a.Layer.encode(et.create,ft.uint32(10).fork()).ldelim(),et.update!==void 0&&a.Layer.encode(et.update,ft.uint32(18).fork()).ldelim(),et.delete!==void 0&&a.DeleteLayerResponse.encode(et.delete,ft.uint32(26).fork()).ldelim(),ft},decode(et,ft){const yt=et instanceof _.Reader?et:new _.Reader(et);let Mt=ft===void 0?yt.len:yt.pos+ft;const wt=Wt();for(;yt.pos<Mt;){const Bt=yt.uint32();switch(Bt>>>3){case 1:wt.create=a.Layer.decode(yt,yt.uint32());break;case 2:wt.update=a.Layer.decode(yt,yt.uint32());break;case 3:wt.delete=a.DeleteLayerResponse.decode(yt,yt.uint32());break;default:yt.skipType(Bt&7);break}}return wt},fromJSON(et){return{create:Vt(et.create)?a.Layer.fromJSON(et.create):void 0,update:Vt(et.update)?a.Layer.fromJSON(et.update):void 0,delete:Vt(et.delete)?a.DeleteLayerResponse.fromJSON(et.delete):void 0}},toJSON(et){const ft={};return et.create!==void 0&&(ft.create=et.create?a.Layer.toJSON(et.create):void 0),et.update!==void 0&&(ft.update=et.update?a.Layer.toJSON(et.update):void 0),et.delete!==void 0&&(ft.delete=et.delete?a.DeleteLayerResponse.toJSON(et.delete):void 0),ft},fromPartial(et){const ft=Wt();return ft.create=et.create!==void 0&&et.create!==null?a.Layer.fromPartial(et.create):void 0,ft.update=et.update!==void 0&&et.update!==null?a.Layer.fromPartial(et.update):void 0,ft.delete=et.delete!==void 0&&et.delete!==null?a.DeleteLayerResponse.fromPartial(et.delete):void 0,ft}};function Ht(){return{width:void 0,height:void 0,metadata:void 0,projectId:void 0,collectionId:void 0,type:void 0,transitions:[],requestMetadata:void 0}}a.PartialLayout={encode(et,ft=_.Writer.create()){et.width!==void 0&&ft.uint32(16).int32(et.width),et.height!==void 0&&ft.uint32(24).int32(et.height),et.metadata!==void 0&&$.Value.encode($.Value.wrap(et.metadata),ft.uint32(50).fork()).ldelim(),et.projectId!==void 0&&ft.uint32(58).string(et.projectId),et.collectionId!==void 0&&ft.uint32(66).string(et.collectionId),et.type!==void 0&&ft.uint32(72).int32(ot(et.type));for(const yt of et.transitions)a.Transition.encode(yt,ft.uint32(82).fork()).ldelim();return et.requestMetadata!==void 0&&$.Value.encode($.Value.wrap(et.requestMetadata),ft.uint32(810).fork()).ldelim(),ft},decode(et,ft){const yt=et instanceof _.Reader?et:new _.Reader(et);let Mt=ft===void 0?yt.len:yt.pos+ft;const wt=Ht();for(;yt.pos<Mt;){const Bt=yt.uint32();switch(Bt>>>3){case 2:wt.width=yt.int32();break;case 3:wt.height=yt.int32();break;case 6:wt.metadata=$.Value.unwrap($.Value.decode(yt,yt.uint32()));break;case 7:wt.projectId=yt.string();break;case 8:wt.collectionId=yt.string();break;case 9:wt.type=tt(yt.int32());break;case 10:wt.transitions.push(a.Transition.decode(yt,yt.uint32()));break;case 101:wt.requestMetadata=$.Value.unwrap($.Value.decode(yt,yt.uint32()));break;default:yt.skipType(Bt&7);break}}return wt},fromJSON(et){return{width:Vt(et.width)?Number(et.width):void 0,height:Vt(et.height)?Number(et.height):void 0,metadata:Vt(et==null?void 0:et.metadata)?et.metadata:void 0,projectId:Vt(et.projectId)?String(et.projectId):void 0,collectionId:Vt(et.collectionId)?String(et.collectionId):void 0,type:Vt(et.type)?tt(et.type):void 0,transitions:Array.isArray(et==null?void 0:et.transitions)?et.transitions.map(ft=>a.Transition.fromJSON(ft)):[],requestMetadata:Vt(et==null?void 0:et.requestMetadata)?et.requestMetadata:void 0}},toJSON(et){const ft={};return et.width!==void 0&&(ft.width=Math.round(et.width)),et.height!==void 0&&(ft.height=Math.round(et.height)),et.metadata!==void 0&&(ft.metadata=et.metadata),et.projectId!==void 0&&(ft.projectId=et.projectId),et.collectionId!==void 0&&(ft.collectionId=et.collectionId),et.type!==void 0&&(ft.type=et.type!==void 0?rt(et.type):void 0),et.transitions?ft.transitions=et.transitions.map(yt=>yt?a.Transition.toJSON(yt):void 0):ft.transitions=[],et.requestMetadata!==void 0&&(ft.requestMetadata=et.requestMetadata),ft},fromPartial(et){var ft,yt,Mt,wt,Bt,fn,En,bn;const pn=Ht();return pn.width=(ft=et.width)!==null&&ft!==void 0?ft:void 0,pn.height=(yt=et.height)!==null&&yt!==void 0?yt:void 0,pn.metadata=(Mt=et.metadata)!==null&&Mt!==void 0?Mt:void 0,pn.projectId=(wt=et.projectId)!==null&&wt!==void 0?wt:void 0,pn.collectionId=(Bt=et.collectionId)!==null&&Bt!==void 0?Bt:void 0,pn.type=(fn=et.type)!==null&&fn!==void 0?fn:void 0,pn.transitions=((En=et.transitions)===null||En===void 0?void 0:En.map(hn=>a.Transition.fromPartial(hn)))||[],pn.requestMetadata=(bn=et.requestMetadata)!==null&&bn!==void 0?bn:void 0,pn}};function vn(){return{projectId:void 0,collectionId:void 0,type:void 0}}a.ListLayoutsRequest={encode(et,ft=_.Writer.create()){return et.projectId!==void 0&&ft.uint32(10).string(et.projectId),et.collectionId!==void 0&&ft.uint32(18).string(et.collectionId),et.type!==void 0&&ft.uint32(24).int32(ot(et.type)),ft},decode(et,ft){const yt=et instanceof _.Reader?et:new _.Reader(et);let Mt=ft===void 0?yt.len:yt.pos+ft;const wt=vn();for(;yt.pos<Mt;){const Bt=yt.uint32();switch(Bt>>>3){case 1:wt.projectId=yt.string();break;case 2:wt.collectionId=yt.string();break;case 3:wt.type=tt(yt.int32());break;default:yt.skipType(Bt&7);break}}return wt},fromJSON(et){return{projectId:Vt(et.projectId)?String(et.projectId):void 0,collectionId:Vt(et.collectionId)?String(et.collectionId):void 0,type:Vt(et.type)?tt(et.type):void 0}},toJSON(et){const ft={};return et.projectId!==void 0&&(ft.projectId=et.projectId),et.collectionId!==void 0&&(ft.collectionId=et.collectionId),et.type!==void 0&&(ft.type=et.type!==void 0?rt(et.type):void 0),ft},fromPartial(et){var ft,yt,Mt;const wt=vn();return wt.projectId=(ft=et.projectId)!==null&&ft!==void 0?ft:void 0,wt.collectionId=(yt=et.collectionId)!==null&&yt!==void 0?yt:void 0,wt.type=(Mt=et.type)!==null&&Mt!==void 0?Mt:void 0,wt}};function ln(){return{layouts:[]}}a.ListLayoutsResponse={encode(et,ft=_.Writer.create()){for(const yt of et.layouts)a.Layout.encode(yt,ft.uint32(10).fork()).ldelim();return ft},decode(et,ft){const yt=et instanceof _.Reader?et:new _.Reader(et);let Mt=ft===void 0?yt.len:yt.pos+ft;const wt=ln();for(;yt.pos<Mt;){const Bt=yt.uint32();switch(Bt>>>3){case 1:wt.layouts.push(a.Layout.decode(yt,yt.uint32()));break;default:yt.skipType(Bt&7);break}}return wt},fromJSON(et){return{layouts:Array.isArray(et==null?void 0:et.layouts)?et.layouts.map(ft=>a.Layout.fromJSON(ft)):[]}},toJSON(et){const ft={};return et.layouts?ft.layouts=et.layouts.map(yt=>yt?a.Layout.toJSON(yt):void 0):ft.layouts=[],ft},fromPartial(et){var ft;const yt=ln();return yt.layouts=((ft=et.layouts)===null||ft===void 0?void 0:ft.map(Mt=>a.Layout.fromPartial(Mt)))||[],yt}};function In(){return{layout:void 0}}a.CreateLayoutRequest={encode(et,ft=_.Writer.create()){return et.layout!==void 0&&a.PartialLayout.encode(et.layout,ft.uint32(18).fork()).ldelim(),ft},decode(et,ft){const yt=et instanceof _.Reader?et:new _.Reader(et);let Mt=ft===void 0?yt.len:yt.pos+ft;const wt=In();for(;yt.pos<Mt;){const Bt=yt.uint32();switch(Bt>>>3){case 2:wt.layout=a.PartialLayout.decode(yt,yt.uint32());break;default:yt.skipType(Bt&7);break}}return wt},fromJSON(et){return{layout:Vt(et.layout)?a.PartialLayout.fromJSON(et.layout):void 0}},toJSON(et){const ft={};return et.layout!==void 0&&(ft.layout=et.layout?a.PartialLayout.toJSON(et.layout):void 0),ft},fromPartial(et){const ft=In();return ft.layout=et.layout!==void 0&&et.layout!==null?a.PartialLayout.fromPartial(et.layout):void 0,ft}};function dn(){return{layoutId:""}}a.GetLayoutRequest={encode(et,ft=_.Writer.create()){return et.layoutId!==""&&ft.uint32(10).string(et.layoutId),ft},decode(et,ft){const yt=et instanceof _.Reader?et:new _.Reader(et);let Mt=ft===void 0?yt.len:yt.pos+ft;const wt=dn();for(;yt.pos<Mt;){const Bt=yt.uint32();switch(Bt>>>3){case 1:wt.layoutId=yt.string();break;default:yt.skipType(Bt&7);break}}return wt},fromJSON(et){return{layoutId:Vt(et.layoutId)?String(et.layoutId):""}},toJSON(et){const ft={};return et.layoutId!==void 0&&(ft.layoutId=et.layoutId),ft},fromPartial(et){var ft;const yt=dn();return yt.layoutId=(ft=et.layoutId)!==null&&ft!==void 0?ft:"",yt}};function gn(){return{layoutId:"",layout:void 0}}a.UpdateLayoutRequest={encode(et,ft=_.Writer.create()){return et.layoutId!==""&&ft.uint32(10).string(et.layoutId),et.layout!==void 0&&a.PartialLayout.encode(et.layout,ft.uint32(26).fork()).ldelim(),ft},decode(et,ft){const yt=et instanceof _.Reader?et:new _.Reader(et);let Mt=ft===void 0?yt.len:yt.pos+ft;const wt=gn();for(;yt.pos<Mt;){const Bt=yt.uint32();switch(Bt>>>3){case 1:wt.layoutId=yt.string();break;case 3:wt.layout=a.PartialLayout.decode(yt,yt.uint32());break;default:yt.skipType(Bt&7);break}}return wt},fromJSON(et){return{layoutId:Vt(et.layoutId)?String(et.layoutId):"",layout:Vt(et.layout)?a.PartialLayout.fromJSON(et.layout):void 0}},toJSON(et){const ft={};return et.layoutId!==void 0&&(ft.layoutId=et.layoutId),et.layout!==void 0&&(ft.layout=et.layout?a.PartialLayout.toJSON(et.layout):void 0),ft},fromPartial(et){var ft;const yt=gn();return yt.layoutId=(ft=et.layoutId)!==null&&ft!==void 0?ft:"",yt.layout=et.layout!==void 0&&et.layout!==null?a.PartialLayout.fromPartial(et.layout):void 0,yt}};function kn(){return{requestMetadata:void 0}}a.DeleteLayoutPayload={encode(et,ft=_.Writer.create()){return et.requestMetadata!==void 0&&$.Value.encode($.Value.wrap(et.requestMetadata),ft.uint32(802).fork()).ldelim(),ft},decode(et,ft){const yt=et instanceof _.Reader?et:new _.Reader(et);let Mt=ft===void 0?yt.len:yt.pos+ft;const wt=kn();for(;yt.pos<Mt;){const Bt=yt.uint32();switch(Bt>>>3){case 100:wt.requestMetadata=$.Value.unwrap($.Value.decode(yt,yt.uint32()));break;default:yt.skipType(Bt&7);break}}return wt},fromJSON(et){return{requestMetadata:Vt(et==null?void 0:et.requestMetadata)?et.requestMetadata:void 0}},toJSON(et){const ft={};return et.requestMetadata!==void 0&&(ft.requestMetadata=et.requestMetadata),ft},fromPartial(et){var ft;const yt=kn();return yt.requestMetadata=(ft=et.requestMetadata)!==null&&ft!==void 0?ft:void 0,yt}};function On(){return{layoutId:"",payload:void 0}}a.DeleteLayoutRequest={encode(et,ft=_.Writer.create()){return et.layoutId!==""&&ft.uint32(10).string(et.layoutId),et.payload!==void 0&&a.DeleteLayoutPayload.encode(et.payload,ft.uint32(18).fork()).ldelim(),ft},decode(et,ft){const yt=et instanceof _.Reader?et:new _.Reader(et);let Mt=ft===void 0?yt.len:yt.pos+ft;const wt=On();for(;yt.pos<Mt;){const Bt=yt.uint32();switch(Bt>>>3){case 1:wt.layoutId=yt.string();break;case 2:wt.payload=a.DeleteLayoutPayload.decode(yt,yt.uint32());break;default:yt.skipType(Bt&7);break}}return wt},fromJSON(et){return{layoutId:Vt(et.layoutId)?String(et.layoutId):"",payload:Vt(et.payload)?a.DeleteLayoutPayload.fromJSON(et.payload):void 0}},toJSON(et){const ft={};return et.layoutId!==void 0&&(ft.layoutId=et.layoutId),et.payload!==void 0&&(ft.payload=et.payload?a.DeleteLayoutPayload.toJSON(et.payload):void 0),ft},fromPartial(et){var ft;const yt=On();return yt.layoutId=(ft=et.layoutId)!==null&&ft!==void 0?ft:"",yt.payload=et.payload!==void 0&&et.payload!==null?a.DeleteLayoutPayload.fromPartial(et.payload):void 0,yt}};function Zt(){return{id:"",requestMetadata:void 0}}a.DeleteLayoutResponse={encode(et,ft=_.Writer.create()){return et.id!==""&&ft.uint32(18).string(et.id),et.requestMetadata!==void 0&&$.Value.encode($.Value.wrap(et.requestMetadata),ft.uint32(802).fork()).ldelim(),ft},decode(et,ft){const yt=et instanceof _.Reader?et:new _.Reader(et);let Mt=ft===void 0?yt.len:yt.pos+ft;const wt=Zt();for(;yt.pos<Mt;){const Bt=yt.uint32();switch(Bt>>>3){case 2:wt.id=yt.string();break;case 100:wt.requestMetadata=$.Value.unwrap($.Value.decode(yt,yt.uint32()));break;default:yt.skipType(Bt&7);break}}return wt},fromJSON(et){return{id:Vt(et.id)?String(et.id):"",requestMetadata:Vt(et==null?void 0:et.requestMetadata)?et.requestMetadata:void 0}},toJSON(et){const ft={};return et.id!==void 0&&(ft.id=et.id),et.requestMetadata!==void 0&&(ft.requestMetadata=et.requestMetadata),ft},fromPartial(et){var ft,yt;const Mt=Zt();return Mt.id=(ft=et.id)!==null&&ft!==void 0?ft:"",Mt.requestMetadata=(yt=et.requestMetadata)!==null&&yt!==void 0?yt:void 0,Mt}};function wn(){return{properties:[],durationMs:0,delayMs:void 0,easingMode:void 0}}a.LayerAnimation={encode(et,ft=_.Writer.create()){for(const yt of et.properties)ft.uint32(10).string(yt);return et.durationMs!==0&&ft.uint32(16).int32(et.durationMs),et.delayMs!==void 0&&ft.uint32(32).int32(et.delayMs),et.easingMode!==void 0&&ft.uint32(42).string(et.easingMode),ft},decode(et,ft){const yt=et instanceof _.Reader?et:new _.Reader(et);let Mt=ft===void 0?yt.len:yt.pos+ft;const wt=wn();for(;yt.pos<Mt;){const Bt=yt.uint32();switch(Bt>>>3){case 1:wt.properties.push(yt.string());break;case 2:wt.durationMs=yt.int32();break;case 4:wt.delayMs=yt.int32();break;case 5:wt.easingMode=yt.string();break;default:yt.skipType(Bt&7);break}}return wt},fromJSON(et){return{properties:Array.isArray(et==null?void 0:et.properties)?et.properties.map(ft=>String(ft)):[],durationMs:Vt(et.durationMs)?Number(et.durationMs):0,delayMs:Vt(et.delayMs)?Number(et.delayMs):void 0,easingMode:Vt(et.easingMode)?String(et.easingMode):void 0}},toJSON(et){const ft={};return et.properties?ft.properties=et.properties.map(yt=>yt):ft.properties=[],et.durationMs!==void 0&&(ft.durationMs=Math.round(et.durationMs)),et.delayMs!==void 0&&(ft.delayMs=Math.round(et.delayMs)),et.easingMode!==void 0&&(ft.easingMode=et.easingMode),ft},fromPartial(et){var ft,yt,Mt,wt;const Bt=wn();return Bt.properties=((ft=et.properties)===null||ft===void 0?void 0:ft.map(fn=>fn))||[],Bt.durationMs=(yt=et.durationMs)!==null&&yt!==void 0?yt:0,Bt.delayMs=(Mt=et.delayMs)!==null&&Mt!==void 0?Mt:void 0,Bt.easingMode=(wt=et.easingMode)!==null&&wt!==void 0?wt:void 0,Bt}};function jt(){return{type:void 0,data:void 0,x:void 0,y:void 0,width:void 0,height:void 0,rotation:void 0,opacity:void 0,scale:void 0,hidden:void 0,children:void 0,parentId:void 0,metadata:void 0,requestMetadata:void 0,requestAnimation:[]}}a.PartialLayer={encode(et,ft=_.Writer.create()){et.type!==void 0&&ft.uint32(10).string(et.type),et.data!==void 0&&$.Struct.encode($.Struct.wrap(et.data),ft.uint32(18).fork()).ldelim(),et.x!==void 0&&$.Value.encode($.Value.wrap(et.x),ft.uint32(26).fork()).ldelim(),et.y!==void 0&&$.Value.encode($.Value.wrap(et.y),ft.uint32(34).fork()).ldelim(),et.width!==void 0&&$.Value.encode($.Value.wrap(et.width),ft.uint32(42).fork()).ldelim(),et.height!==void 0&&$.Value.encode($.Value.wrap(et.height),ft.uint32(50).fork()).ldelim(),et.rotation!==void 0&&ft.uint32(57).double(et.rotation),et.opacity!==void 0&&ft.uint32(65).double(et.opacity),et.scale!==void 0&&ft.uint32(73).double(et.scale),et.hidden!==void 0&&ft.uint32(80).bool(et.hidden),et.children!==void 0&&$.ListValue.encode($.ListValue.wrap(et.children),ft.uint32(98).fork()).ldelim(),et.parentId!==void 0&&ft.uint32(106).string(et.parentId),et.metadata!==void 0&&$.Value.encode($.Value.wrap(et.metadata),ft.uint32(114).fork()).ldelim(),et.requestMetadata!==void 0&&$.Value.encode($.Value.wrap(et.requestMetadata),ft.uint32(802).fork()).ldelim();for(const yt of et.requestAnimation)a.LayerAnimation.encode(yt,ft.uint32(826).fork()).ldelim();return ft},decode(et,ft){const yt=et instanceof _.Reader?et:new _.Reader(et);let Mt=ft===void 0?yt.len:yt.pos+ft;const wt=jt();for(;yt.pos<Mt;){const Bt=yt.uint32();switch(Bt>>>3){case 1:wt.type=yt.string();break;case 2:wt.data=$.Struct.unwrap($.Struct.decode(yt,yt.uint32()));break;case 3:wt.x=$.Value.unwrap($.Value.decode(yt,yt.uint32()));break;case 4:wt.y=$.Value.unwrap($.Value.decode(yt,yt.uint32()));break;case 5:wt.width=$.Value.unwrap($.Value.decode(yt,yt.uint32()));break;case 6:wt.height=$.Value.unwrap($.Value.decode(yt,yt.uint32()));break;case 7:wt.rotation=yt.double();break;case 8:wt.opacity=yt.double();break;case 9:wt.scale=yt.double();break;case 10:wt.hidden=yt.bool();break;case 12:wt.children=$.ListValue.unwrap($.ListValue.decode(yt,yt.uint32()));break;case 13:wt.parentId=yt.string();break;case 14:wt.metadata=$.Value.unwrap($.Value.decode(yt,yt.uint32()));break;case 100:wt.requestMetadata=$.Value.unwrap($.Value.decode(yt,yt.uint32()));break;case 103:wt.requestAnimation.push(a.LayerAnimation.decode(yt,yt.uint32()));break;default:yt.skipType(Bt&7);break}}return wt},fromJSON(et){return{type:Vt(et.type)?String(et.type):void 0,data:Jn(et.data)?et.data:void 0,x:Vt(et==null?void 0:et.x)?et.x:void 0,y:Vt(et==null?void 0:et.y)?et.y:void 0,width:Vt(et==null?void 0:et.width)?et.width:void 0,height:Vt(et==null?void 0:et.height)?et.height:void 0,rotation:Vt(et.rotation)?Number(et.rotation):void 0,opacity:Vt(et.opacity)?Number(et.opacity):void 0,scale:Vt(et.scale)?Number(et.scale):void 0,hidden:Vt(et.hidden)?Boolean(et.hidden):void 0,children:Array.isArray(et.children)?[...et.children]:void 0,parentId:Vt(et.parentId)?String(et.parentId):void 0,metadata:Vt(et==null?void 0:et.metadata)?et.metadata:void 0,requestMetadata:Vt(et==null?void 0:et.requestMetadata)?et.requestMetadata:void 0,requestAnimation:Array.isArray(et==null?void 0:et.requestAnimation)?et.requestAnimation.map(ft=>a.LayerAnimation.fromJSON(ft)):[]}},toJSON(et){const ft={};return et.type!==void 0&&(ft.type=et.type),et.data!==void 0&&(ft.data=et.data),et.x!==void 0&&(ft.x=et.x),et.y!==void 0&&(ft.y=et.y),et.width!==void 0&&(ft.width=et.width),et.height!==void 0&&(ft.height=et.height),et.rotation!==void 0&&(ft.rotation=et.rotation),et.opacity!==void 0&&(ft.opacity=et.opacity),et.scale!==void 0&&(ft.scale=et.scale),et.hidden!==void 0&&(ft.hidden=et.hidden),et.children!==void 0&&(ft.children=et.children),et.parentId!==void 0&&(ft.parentId=et.parentId),et.metadata!==void 0&&(ft.metadata=et.metadata),et.requestMetadata!==void 0&&(ft.requestMetadata=et.requestMetadata),et.requestAnimation?ft.requestAnimation=et.requestAnimation.map(yt=>yt?a.LayerAnimation.toJSON(yt):void 0):ft.requestAnimation=[],ft},fromPartial(et){var ft,yt,Mt,wt,Bt,fn,En,bn,pn,hn,Nn,An,Ln,Dn,$n;const mn=jt();return mn.type=(ft=et.type)!==null&&ft!==void 0?ft:void 0,mn.data=(yt=et.data)!==null&&yt!==void 0?yt:void 0,mn.x=(Mt=et.x)!==null&&Mt!==void 0?Mt:void 0,mn.y=(wt=et.y)!==null&&wt!==void 0?wt:void 0,mn.width=(Bt=et.width)!==null&&Bt!==void 0?Bt:void 0,mn.height=(fn=et.height)!==null&&fn!==void 0?fn:void 0,mn.rotation=(En=et.rotation)!==null&&En!==void 0?En:void 0,mn.opacity=(bn=et.opacity)!==null&&bn!==void 0?bn:void 0,mn.scale=(pn=et.scale)!==null&&pn!==void 0?pn:void 0,mn.hidden=(hn=et.hidden)!==null&&hn!==void 0?hn:void 0,mn.children=(Nn=et.children)!==null&&Nn!==void 0?Nn:void 0,mn.parentId=(An=et.parentId)!==null&&An!==void 0?An:void 0,mn.metadata=(Ln=et.metadata)!==null&&Ln!==void 0?Ln:void 0,mn.requestMetadata=(Dn=et.requestMetadata)!==null&&Dn!==void 0?Dn:void 0,mn.requestAnimation=(($n=et.requestAnimation)===null||$n===void 0?void 0:$n.map(nn=>a.LayerAnimation.fromPartial(nn)))||[],mn}};function Pn(){return{id:"",type:void 0,data:void 0,x:void 0,y:void 0,width:void 0,height:void 0,rotation:void 0,opacity:void 0,scale:void 0,hidden:void 0,children:void 0,parentId:void 0,metadata:void 0,requestMetadata:void 0,requestAnimation:[]}}a.PartialLayerWithID={encode(et,ft=_.Writer.create()){et.id!==""&&ft.uint32(8002).string(et.id),et.type!==void 0&&ft.uint32(10).string(et.type),et.data!==void 0&&$.Struct.encode($.Struct.wrap(et.data),ft.uint32(18).fork()).ldelim(),et.x!==void 0&&$.Value.encode($.Value.wrap(et.x),ft.uint32(26).fork()).ldelim(),et.y!==void 0&&$.Value.encode($.Value.wrap(et.y),ft.uint32(34).fork()).ldelim(),et.width!==void 0&&$.Value.encode($.Value.wrap(et.width),ft.uint32(42).fork()).ldelim(),et.height!==void 0&&$.Value.encode($.Value.wrap(et.height),ft.uint32(50).fork()).ldelim(),et.rotation!==void 0&&ft.uint32(57).double(et.rotation),et.opacity!==void 0&&ft.uint32(65).double(et.opacity),et.scale!==void 0&&ft.uint32(73).double(et.scale),et.hidden!==void 0&&ft.uint32(80).bool(et.hidden),et.children!==void 0&&$.ListValue.encode($.ListValue.wrap(et.children),ft.uint32(98).fork()).ldelim(),et.parentId!==void 0&&ft.uint32(106).string(et.parentId),et.metadata!==void 0&&$.Value.encode($.Value.wrap(et.metadata),ft.uint32(114).fork()).ldelim(),et.requestMetadata!==void 0&&$.Value.encode($.Value.wrap(et.requestMetadata),ft.uint32(802).fork()).ldelim();for(const yt of et.requestAnimation)a.LayerAnimation.encode(yt,ft.uint32(826).fork()).ldelim();return ft},decode(et,ft){const yt=et instanceof _.Reader?et:new _.Reader(et);let Mt=ft===void 0?yt.len:yt.pos+ft;const wt=Pn();for(;yt.pos<Mt;){const Bt=yt.uint32();switch(Bt>>>3){case 1e3:wt.id=yt.string();break;case 1:wt.type=yt.string();break;case 2:wt.data=$.Struct.unwrap($.Struct.decode(yt,yt.uint32()));break;case 3:wt.x=$.Value.unwrap($.Value.decode(yt,yt.uint32()));break;case 4:wt.y=$.Value.unwrap($.Value.decode(yt,yt.uint32()));break;case 5:wt.width=$.Value.unwrap($.Value.decode(yt,yt.uint32()));break;case 6:wt.height=$.Value.unwrap($.Value.decode(yt,yt.uint32()));break;case 7:wt.rotation=yt.double();break;case 8:wt.opacity=yt.double();break;case 9:wt.scale=yt.double();break;case 10:wt.hidden=yt.bool();break;case 12:wt.children=$.ListValue.unwrap($.ListValue.decode(yt,yt.uint32()));break;case 13:wt.parentId=yt.string();break;case 14:wt.metadata=$.Value.unwrap($.Value.decode(yt,yt.uint32()));break;case 100:wt.requestMetadata=$.Value.unwrap($.Value.decode(yt,yt.uint32()));break;case 103:wt.requestAnimation.push(a.LayerAnimation.decode(yt,yt.uint32()));break;default:yt.skipType(Bt&7);break}}return wt},fromJSON(et){return{id:Vt(et.id)?String(et.id):"",type:Vt(et.type)?String(et.type):void 0,data:Jn(et.data)?et.data:void 0,x:Vt(et==null?void 0:et.x)?et.x:void 0,y:Vt(et==null?void 0:et.y)?et.y:void 0,width:Vt(et==null?void 0:et.width)?et.width:void 0,height:Vt(et==null?void 0:et.height)?et.height:void 0,rotation:Vt(et.rotation)?Number(et.rotation):void 0,opacity:Vt(et.opacity)?Number(et.opacity):void 0,scale:Vt(et.scale)?Number(et.scale):void 0,hidden:Vt(et.hidden)?Boolean(et.hidden):void 0,children:Array.isArray(et.children)?[...et.children]:void 0,parentId:Vt(et.parentId)?String(et.parentId):void 0,metadata:Vt(et==null?void 0:et.metadata)?et.metadata:void 0,requestMetadata:Vt(et==null?void 0:et.requestMetadata)?et.requestMetadata:void 0,requestAnimation:Array.isArray(et==null?void 0:et.requestAnimation)?et.requestAnimation.map(ft=>a.LayerAnimation.fromJSON(ft)):[]}},toJSON(et){const ft={};return et.id!==void 0&&(ft.id=et.id),et.type!==void 0&&(ft.type=et.type),et.data!==void 0&&(ft.data=et.data),et.x!==void 0&&(ft.x=et.x),et.y!==void 0&&(ft.y=et.y),et.width!==void 0&&(ft.width=et.width),et.height!==void 0&&(ft.height=et.height),et.rotation!==void 0&&(ft.rotation=et.rotation),et.opacity!==void 0&&(ft.opacity=et.opacity),et.scale!==void 0&&(ft.scale=et.scale),et.hidden!==void 0&&(ft.hidden=et.hidden),et.children!==void 0&&(ft.children=et.children),et.parentId!==void 0&&(ft.parentId=et.parentId),et.metadata!==void 0&&(ft.metadata=et.metadata),et.requestMetadata!==void 0&&(ft.requestMetadata=et.requestMetadata),et.requestAnimation?ft.requestAnimation=et.requestAnimation.map(yt=>yt?a.LayerAnimation.toJSON(yt):void 0):ft.requestAnimation=[],ft},fromPartial(et){var ft,yt,Mt,wt,Bt,fn,En,bn,pn,hn,Nn,An,Ln,Dn,$n,mn;const nn=Pn();return nn.id=(ft=et.id)!==null&&ft!==void 0?ft:"",nn.type=(yt=et.type)!==null&&yt!==void 0?yt:void 0,nn.data=(Mt=et.data)!==null&&Mt!==void 0?Mt:void 0,nn.x=(wt=et.x)!==null&&wt!==void 0?wt:void 0,nn.y=(Bt=et.y)!==null&&Bt!==void 0?Bt:void 0,nn.width=(fn=et.width)!==null&&fn!==void 0?fn:void 0,nn.height=(En=et.height)!==null&&En!==void 0?En:void 0,nn.rotation=(bn=et.rotation)!==null&&bn!==void 0?bn:void 0,nn.opacity=(pn=et.opacity)!==null&&pn!==void 0?pn:void 0,nn.scale=(hn=et.scale)!==null&&hn!==void 0?hn:void 0,nn.hidden=(Nn=et.hidden)!==null&&Nn!==void 0?Nn:void 0,nn.children=(An=et.children)!==null&&An!==void 0?An:void 0,nn.parentId=(Ln=et.parentId)!==null&&Ln!==void 0?Ln:void 0,nn.metadata=(Dn=et.metadata)!==null&&Dn!==void 0?Dn:void 0,nn.requestMetadata=($n=et.requestMetadata)!==null&&$n!==void 0?$n:void 0,nn.requestAnimation=((mn=et.requestAnimation)===null||mn===void 0?void 0:mn.map(Fn=>a.LayerAnimation.fromPartial(Fn)))||[],nn}};function Kt(){return{layoutId:""}}a.ListLayersRequest={encode(et,ft=_.Writer.create()){return et.layoutId!==""&&ft.uint32(10).string(et.layoutId),ft},decode(et,ft){const yt=et instanceof _.Reader?et:new _.Reader(et);let Mt=ft===void 0?yt.len:yt.pos+ft;const wt=Kt();for(;yt.pos<Mt;){const Bt=yt.uint32();switch(Bt>>>3){case 1:wt.layoutId=yt.string();break;default:yt.skipType(Bt&7);break}}return wt},fromJSON(et){return{layoutId:Vt(et.layoutId)?String(et.layoutId):""}},toJSON(et){const ft={};return et.layoutId!==void 0&&(ft.layoutId=et.layoutId),ft},fromPartial(et){var ft;const yt=Kt();return yt.layoutId=(ft=et.layoutId)!==null&&ft!==void 0?ft:"",yt}};function Xt(){return{layers:[]}}a.ListLayersResponse={encode(et,ft=_.Writer.create()){for(const yt of et.layers)a.Layer.encode(yt,ft.uint32(10).fork()).ldelim();return ft},decode(et,ft){const yt=et instanceof _.Reader?et:new _.Reader(et);let Mt=ft===void 0?yt.len:yt.pos+ft;const wt=Xt();for(;yt.pos<Mt;){const Bt=yt.uint32();switch(Bt>>>3){case 1:wt.layers.push(a.Layer.decode(yt,yt.uint32()));break;default:yt.skipType(Bt&7);break}}return wt},fromJSON(et){return{layers:Array.isArray(et==null?void 0:et.layers)?et.layers.map(ft=>a.Layer.fromJSON(ft)):[]}},toJSON(et){const ft={};return et.layers?ft.layers=et.layers.map(yt=>yt?a.Layer.toJSON(yt):void 0):ft.layers=[],ft},fromPartial(et){var ft;const yt=Xt();return yt.layers=((ft=et.layers)===null||ft===void 0?void 0:ft.map(Mt=>a.Layer.fromPartial(Mt)))||[],yt}};function rn(){return{layoutId:"",layer:void 0}}a.CreateLayerRequest={encode(et,ft=_.Writer.create()){return et.layoutId!==""&&ft.uint32(10).string(et.layoutId),et.layer!==void 0&&a.PartialLayer.encode(et.layer,ft.uint32(18).fork()).ldelim(),ft},decode(et,ft){const yt=et instanceof _.Reader?et:new _.Reader(et);let Mt=ft===void 0?yt.len:yt.pos+ft;const wt=rn();for(;yt.pos<Mt;){const Bt=yt.uint32();switch(Bt>>>3){case 1:wt.layoutId=yt.string();break;case 2:wt.layer=a.PartialLayer.decode(yt,yt.uint32());break;default:yt.skipType(Bt&7);break}}return wt},fromJSON(et){return{layoutId:Vt(et.layoutId)?String(et.layoutId):"",layer:Vt(et.layer)?a.PartialLayer.fromJSON(et.layer):void 0}},toJSON(et){const ft={};return et.layoutId!==void 0&&(ft.layoutId=et.layoutId),et.layer!==void 0&&(ft.layer=et.layer?a.PartialLayer.toJSON(et.layer):void 0),ft},fromPartial(et){var ft;const yt=rn();return yt.layoutId=(ft=et.layoutId)!==null&&ft!==void 0?ft:"",yt.layer=et.layer!==void 0&&et.layer!==null?a.PartialLayer.fromPartial(et.layer):void 0,yt}};function en(){return{layoutId:"",layerId:""}}a.GetLayerRequest={encode(et,ft=_.Writer.create()){return et.layoutId!==""&&ft.uint32(10).string(et.layoutId),et.layerId!==""&&ft.uint32(18).string(et.layerId),ft},decode(et,ft){const yt=et instanceof _.Reader?et:new _.Reader(et);let Mt=ft===void 0?yt.len:yt.pos+ft;const wt=en();for(;yt.pos<Mt;){const Bt=yt.uint32();switch(Bt>>>3){case 1:wt.layoutId=yt.string();break;case 2:wt.layerId=yt.string();break;default:yt.skipType(Bt&7);break}}return wt},fromJSON(et){return{layoutId:Vt(et.layoutId)?String(et.layoutId):"",layerId:Vt(et.layerId)?String(et.layerId):""}},toJSON(et){const ft={};return et.layoutId!==void 0&&(ft.layoutId=et.layoutId),et.layerId!==void 0&&(ft.layerId=et.layerId),ft},fromPartial(et){var ft,yt;const Mt=en();return Mt.layoutId=(ft=et.layoutId)!==null&&ft!==void 0?ft:"",Mt.layerId=(yt=et.layerId)!==null&&yt!==void 0?yt:"",Mt}};function an(){return{layoutId:"",layerId:"",layer:void 0}}a.UpdateLayerRequest={encode(et,ft=_.Writer.create()){return et.layoutId!==""&&ft.uint32(10).string(et.layoutId),et.layerId!==""&&ft.uint32(18).string(et.layerId),et.layer!==void 0&&a.PartialLayer.encode(et.layer,ft.uint32(26).fork()).ldelim(),ft},decode(et,ft){const yt=et instanceof _.Reader?et:new _.Reader(et);let Mt=ft===void 0?yt.len:yt.pos+ft;const wt=an();for(;yt.pos<Mt;){const Bt=yt.uint32();switch(Bt>>>3){case 1:wt.layoutId=yt.string();break;case 2:wt.layerId=yt.string();break;case 3:wt.layer=a.PartialLayer.decode(yt,yt.uint32());break;default:yt.skipType(Bt&7);break}}return wt},fromJSON(et){return{layoutId:Vt(et.layoutId)?String(et.layoutId):"",layerId:Vt(et.layerId)?String(et.layerId):"",layer:Vt(et.layer)?a.PartialLayer.fromJSON(et.layer):void 0}},toJSON(et){const ft={};return et.layoutId!==void 0&&(ft.layoutId=et.layoutId),et.layerId!==void 0&&(ft.layerId=et.layerId),et.layer!==void 0&&(ft.layer=et.layer?a.PartialLayer.toJSON(et.layer):void 0),ft},fromPartial(et){var ft,yt;const Mt=an();return Mt.layoutId=(ft=et.layoutId)!==null&&ft!==void 0?ft:"",Mt.layerId=(yt=et.layerId)!==null&&yt!==void 0?yt:"",Mt.layer=et.layer!==void 0&&et.layer!==null?a.PartialLayer.fromPartial(et.layer):void 0,Mt}};function tn(){return{requestMetadata:void 0}}a.DeleteLayerPayload={encode(et,ft=_.Writer.create()){return et.requestMetadata!==void 0&&$.Value.encode($.Value.wrap(et.requestMetadata),ft.uint32(802).fork()).ldelim(),ft},decode(et,ft){const yt=et instanceof _.Reader?et:new _.Reader(et);let Mt=ft===void 0?yt.len:yt.pos+ft;const wt=tn();for(;yt.pos<Mt;){const Bt=yt.uint32();switch(Bt>>>3){case 100:wt.requestMetadata=$.Value.unwrap($.Value.decode(yt,yt.uint32()));break;default:yt.skipType(Bt&7);break}}return wt},fromJSON(et){return{requestMetadata:Vt(et==null?void 0:et.requestMetadata)?et.requestMetadata:void 0}},toJSON(et){const ft={};return et.requestMetadata!==void 0&&(ft.requestMetadata=et.requestMetadata),ft},fromPartial(et){var ft;const yt=tn();return yt.requestMetadata=(ft=et.requestMetadata)!==null&&ft!==void 0?ft:void 0,yt}};function Mn(){return{id:"",requestMetadata:void 0}}a.BatchDeleteLayerRequest={encode(et,ft=_.Writer.create()){return et.id!==""&&ft.uint32(10).string(et.id),et.requestMetadata!==void 0&&$.Value.encode($.Value.wrap(et.requestMetadata),ft.uint32(802).fork()).ldelim(),ft},decode(et,ft){const yt=et instanceof _.Reader?et:new _.Reader(et);let Mt=ft===void 0?yt.len:yt.pos+ft;const wt=Mn();for(;yt.pos<Mt;){const Bt=yt.uint32();switch(Bt>>>3){case 1:wt.id=yt.string();break;case 100:wt.requestMetadata=$.Value.unwrap($.Value.decode(yt,yt.uint32()));break;default:yt.skipType(Bt&7);break}}return wt},fromJSON(et){return{id:Vt(et.id)?String(et.id):"",requestMetadata:Vt(et==null?void 0:et.requestMetadata)?et.requestMetadata:void 0}},toJSON(et){const ft={};return et.id!==void 0&&(ft.id=et.id),et.requestMetadata!==void 0&&(ft.requestMetadata=et.requestMetadata),ft},fromPartial(et){var ft,yt;const Mt=Mn();return Mt.id=(ft=et.id)!==null&&ft!==void 0?ft:"",Mt.requestMetadata=(yt=et.requestMetadata)!==null&&yt!==void 0?yt:void 0,Mt}};function un(){return{layoutId:"",layers:[],requestMetadata:void 0,requestAnimationMode:void 0}}a.BatchLayerRequest={encode(et,ft=_.Writer.create()){et.layoutId!==""&&ft.uint32(10).string(et.layoutId);for(const yt of et.layers)a.BatchLayerRequest_BatchItem.encode(yt,ft.uint32(18).fork()).ldelim();return et.requestMetadata!==void 0&&$.Value.encode($.Value.wrap(et.requestMetadata),ft.uint32(802).fork()).ldelim(),et.requestAnimationMode!==void 0&&ft.uint32(808).int32(dt(et.requestAnimationMode)),ft},decode(et,ft){const yt=et instanceof _.Reader?et:new _.Reader(et);let Mt=ft===void 0?yt.len:yt.pos+ft;const wt=un();for(;yt.pos<Mt;){const Bt=yt.uint32();switch(Bt>>>3){case 1:wt.layoutId=yt.string();break;case 2:wt.layers.push(a.BatchLayerRequest_BatchItem.decode(yt,yt.uint32()));break;case 100:wt.requestMetadata=$.Value.unwrap($.Value.decode(yt,yt.uint32()));break;case 101:wt.requestAnimationMode=st(yt.int32());break;default:yt.skipType(Bt&7);break}}return wt},fromJSON(et){return{layoutId:Vt(et.layoutId)?String(et.layoutId):"",layers:Array.isArray(et==null?void 0:et.layers)?et.layers.map(ft=>a.BatchLayerRequest_BatchItem.fromJSON(ft)):[],requestMetadata:Vt(et==null?void 0:et.requestMetadata)?et.requestMetadata:void 0,requestAnimationMode:Vt(et.requestAnimationMode)?st(et.requestAnimationMode):void 0}},toJSON(et){const ft={};return et.layoutId!==void 0&&(ft.layoutId=et.layoutId),et.layers?ft.layers=et.layers.map(yt=>yt?a.BatchLayerRequest_BatchItem.toJSON(yt):void 0):ft.layers=[],et.requestMetadata!==void 0&&(ft.requestMetadata=et.requestMetadata),et.requestAnimationMode!==void 0&&(ft.requestAnimationMode=et.requestAnimationMode!==void 0?lt(et.requestAnimationMode):void 0),ft},fromPartial(et){var ft,yt,Mt,wt;const Bt=un();return Bt.layoutId=(ft=et.layoutId)!==null&&ft!==void 0?ft:"",Bt.layers=((yt=et.layers)===null||yt===void 0?void 0:yt.map(fn=>a.BatchLayerRequest_BatchItem.fromPartial(fn)))||[],Bt.requestMetadata=(Mt=et.requestMetadata)!==null&&Mt!==void 0?Mt:void 0,Bt.requestAnimationMode=(wt=et.requestAnimationMode)!==null&&wt!==void 0?wt:void 0,Bt}};function Cn(){return{create:void 0,update:void 0,delete:void 0}}a.BatchLayerRequest_BatchItem={encode(et,ft=_.Writer.create()){return et.create!==void 0&&a.PartialLayer.encode(et.create,ft.uint32(10).fork()).ldelim(),et.update!==void 0&&a.PartialLayerWithID.encode(et.update,ft.uint32(18).fork()).ldelim(),et.delete!==void 0&&a.BatchDeleteLayerRequest.encode(et.delete,ft.uint32(26).fork()).ldelim(),ft},decode(et,ft){const yt=et instanceof _.Reader?et:new _.Reader(et);let Mt=ft===void 0?yt.len:yt.pos+ft;const wt=Cn();for(;yt.pos<Mt;){const Bt=yt.uint32();switch(Bt>>>3){case 1:wt.create=a.PartialLayer.decode(yt,yt.uint32());break;case 2:wt.update=a.PartialLayerWithID.decode(yt,yt.uint32());break;case 3:wt.delete=a.BatchDeleteLayerRequest.decode(yt,yt.uint32());break;default:yt.skipType(Bt&7);break}}return wt},fromJSON(et){return{create:Vt(et.create)?a.PartialLayer.fromJSON(et.create):void 0,update:Vt(et.update)?a.PartialLayerWithID.fromJSON(et.update):void 0,delete:Vt(et.delete)?a.BatchDeleteLayerRequest.fromJSON(et.delete):void 0}},toJSON(et){const ft={};return et.create!==void 0&&(ft.create=et.create?a.PartialLayer.toJSON(et.create):void 0),et.update!==void 0&&(ft.update=et.update?a.PartialLayerWithID.toJSON(et.update):void 0),et.delete!==void 0&&(ft.delete=et.delete?a.BatchDeleteLayerRequest.toJSON(et.delete):void 0),ft},fromPartial(et){const ft=Cn();return ft.create=et.create!==void 0&&et.create!==null?a.PartialLayer.fromPartial(et.create):void 0,ft.update=et.update!==void 0&&et.update!==null?a.PartialLayerWithID.fromPartial(et.update):void 0,ft.delete=et.delete!==void 0&&et.delete!==null?a.BatchDeleteLayerRequest.fromPartial(et.delete):void 0,ft}};function Rn(){return{create:void 0,update:void 0,delete:void 0}}a.LayoutEvent={encode(et,ft=_.Writer.create()){return et.create!==void 0&&a.Layout.encode(et.create,ft.uint32(10).fork()).ldelim(),et.update!==void 0&&a.Layout.encode(et.update,ft.uint32(18).fork()).ldelim(),et.delete!==void 0&&a.DeleteLayoutResponse.encode(et.delete,ft.uint32(26).fork()).ldelim(),ft},decode(et,ft){const yt=et instanceof _.Reader?et:new _.Reader(et);let Mt=ft===void 0?yt.len:yt.pos+ft;const wt=Rn();for(;yt.pos<Mt;){const Bt=yt.uint32();switch(Bt>>>3){case 1:wt.create=a.Layout.decode(yt,yt.uint32());break;case 2:wt.update=a.Layout.decode(yt,yt.uint32());break;case 3:wt.delete=a.DeleteLayoutResponse.decode(yt,yt.uint32());break;default:yt.skipType(Bt&7);break}}return wt},fromJSON(et){return{create:Vt(et.create)?a.Layout.fromJSON(et.create):void 0,update:Vt(et.update)?a.Layout.fromJSON(et.update):void 0,delete:Vt(et.delete)?a.DeleteLayoutResponse.fromJSON(et.delete):void 0}},toJSON(et){const ft={};return et.create!==void 0&&(ft.create=et.create?a.Layout.toJSON(et.create):void 0),et.update!==void 0&&(ft.update=et.update?a.Layout.toJSON(et.update):void 0),et.delete!==void 0&&(ft.delete=et.delete?a.DeleteLayoutResponse.toJSON(et.delete):void 0),ft},fromPartial(et){const ft=Rn();return ft.create=et.create!==void 0&&et.create!==null?a.Layout.fromPartial(et.create):void 0,ft.update=et.update!==void 0&&et.update!==null?a.Layout.fromPartial(et.update):void 0,ft.delete=et.delete!==void 0&&et.delete!==null?a.DeleteLayoutResponse.fromPartial(et.delete):void 0,ft}};function Bn(){return{create:void 0,update:void 0,delete:void 0,batch:void 0}}a.LayerEvent={encode(et,ft=_.Writer.create()){return et.create!==void 0&&a.Layer.encode(et.create,ft.uint32(10).fork()).ldelim(),et.update!==void 0&&a.Layer.encode(et.update,ft.uint32(18).fork()).ldelim(),et.delete!==void 0&&a.DeleteLayerResponse.encode(et.delete,ft.uint32(26).fork()).ldelim(),et.batch!==void 0&&a.BatchLayerResponse.encode(et.batch,ft.uint32(34).fork()).ldelim(),ft},decode(et,ft){const yt=et instanceof _.Reader?et:new _.Reader(et);let Mt=ft===void 0?yt.len:yt.pos+ft;const wt=Bn();for(;yt.pos<Mt;){const Bt=yt.uint32();switch(Bt>>>3){case 1:wt.create=a.Layer.decode(yt,yt.uint32());break;case 2:wt.update=a.Layer.decode(yt,yt.uint32());break;case 3:wt.delete=a.DeleteLayerResponse.decode(yt,yt.uint32());break;case 4:wt.batch=a.BatchLayerResponse.decode(yt,yt.uint32());break;default:yt.skipType(Bt&7);break}}return wt},fromJSON(et){return{create:Vt(et.create)?a.Layer.fromJSON(et.create):void 0,update:Vt(et.update)?a.Layer.fromJSON(et.update):void 0,delete:Vt(et.delete)?a.DeleteLayerResponse.fromJSON(et.delete):void 0,batch:Vt(et.batch)?a.BatchLayerResponse.fromJSON(et.batch):void 0}},toJSON(et){const ft={};return et.create!==void 0&&(ft.create=et.create?a.Layer.toJSON(et.create):void 0),et.update!==void 0&&(ft.update=et.update?a.Layer.toJSON(et.update):void 0),et.delete!==void 0&&(ft.delete=et.delete?a.DeleteLayerResponse.toJSON(et.delete):void 0),et.batch!==void 0&&(ft.batch=et.batch?a.BatchLayerResponse.toJSON(et.batch):void 0),ft},fromPartial(et){const ft=Bn();return ft.create=et.create!==void 0&&et.create!==null?a.Layer.fromPartial(et.create):void 0,ft.update=et.update!==void 0&&et.update!==null?a.Layer.fromPartial(et.update):void 0,ft.delete=et.delete!==void 0&&et.delete!==null?a.DeleteLayerResponse.fromPartial(et.delete):void 0,ft.batch=et.batch!==void 0&&et.batch!==null?a.BatchLayerResponse.fromPartial(et.batch):void 0,ft}};function Vn(){return{layout:void 0,layer:void 0}}a.Event={encode(et,ft=_.Writer.create()){return et.layout!==void 0&&a.LayoutEvent.encode(et.layout,ft.uint32(10).fork()).ldelim(),et.layer!==void 0&&a.LayerEvent.encode(et.layer,ft.uint32(18).fork()).ldelim(),ft},decode(et,ft){const yt=et instanceof _.Reader?et:new _.Reader(et);let Mt=ft===void 0?yt.len:yt.pos+ft;const wt=Vn();for(;yt.pos<Mt;){const Bt=yt.uint32();switch(Bt>>>3){case 1:wt.layout=a.LayoutEvent.decode(yt,yt.uint32());break;case 2:wt.layer=a.LayerEvent.decode(yt,yt.uint32());break;default:yt.skipType(Bt&7);break}}return wt},fromJSON(et){return{layout:Vt(et.layout)?a.LayoutEvent.fromJSON(et.layout):void 0,layer:Vt(et.layer)?a.LayerEvent.fromJSON(et.layer):void 0}},toJSON(et){const ft={};return et.layout!==void 0&&(ft.layout=et.layout?a.LayoutEvent.toJSON(et.layout):void 0),et.layer!==void 0&&(ft.layer=et.layer?a.LayerEvent.toJSON(et.layer):void 0),ft},fromPartial(et){const ft=Vn();return ft.layout=et.layout!==void 0&&et.layout!==null?a.LayoutEvent.fromPartial(et.layout):void 0,ft.layer=et.layer!==void 0&&et.layer!==null?a.LayerEvent.fromPartial(et.layer):void 0,ft}};class yn{constructor(ft){this.rpc=ft,this.ListLayers=this.ListLayers.bind(this),this.CreateLayer=this.CreateLayer.bind(this),this.GetLayer=this.GetLayer.bind(this),this.UpdateLayer=this.UpdateLayer.bind(this),this.DeleteLayer=this.DeleteLayer.bind(this),this.Batch=this.Batch.bind(this)}ListLayers(ft){const yt=a.ListLayersRequest.encode(ft).finish();return this.rpc.request("apis.layout.v2.LayerService","ListLayers",yt).then(wt=>a.ListLayersResponse.decode(new _.Reader(wt)))}CreateLayer(ft){const yt=a.CreateLayerRequest.encode(ft).finish();return this.rpc.request("apis.layout.v2.LayerService","CreateLayer",yt).then(wt=>a.Layer.decode(new _.Reader(wt)))}GetLayer(ft){const yt=a.GetLayerRequest.encode(ft).finish();return this.rpc.request("apis.layout.v2.LayerService","GetLayer",yt).then(wt=>a.Layer.decode(new _.Reader(wt)))}UpdateLayer(ft){const yt=a.UpdateLayerRequest.encode(ft).finish();return this.rpc.request("apis.layout.v2.LayerService","UpdateLayer",yt).then(wt=>a.Layer.decode(new _.Reader(wt)))}DeleteLayer(ft){const yt=a.DeleteLayerRequest.encode(ft).finish();return this.rpc.request("apis.layout.v2.LayerService","DeleteLayer",yt).then(wt=>a.DeleteLayerResponse.decode(new _.Reader(wt)))}Batch(ft){const yt=a.BatchLayerRequest.encode(ft).finish();return this.rpc.request("apis.layout.v2.LayerService","Batch",yt).then(wt=>a.BatchLayerResponse.decode(new _.Reader(wt)))}}a.LayerServiceClientImpl=yn,a.LayerServiceDefinition={name:"LayerService",fullName:"apis.layout.v2.LayerService",methods:{listLayers:{name:"ListLayers",requestType:a.ListLayersRequest,requestStream:!1,responseType:a.ListLayersResponse,responseStream:!1,options:{}},createLayer:{name:"CreateLayer",requestType:a.CreateLayerRequest,requestStream:!1,responseType:a.Layer,responseStream:!1,options:{}},getLayer:{name:"GetLayer",requestType:a.GetLayerRequest,requestStream:!1,responseType:a.Layer,responseStream:!1,options:{}},updateLayer:{name:"UpdateLayer",requestType:a.UpdateLayerRequest,requestStream:!1,responseType:a.Layer,responseStream:!1,options:{}},deleteLayer:{name:"DeleteLayer",requestType:a.DeleteLayerRequest,requestStream:!1,responseType:a.DeleteLayerResponse,responseStream:!1,options:{}},batch:{name:"Batch",requestType:a.BatchLayerRequest,requestStream:!1,responseType:a.BatchLayerResponse,responseStream:!1,options:{}}}};class qn{constructor(ft){this.rpc=ft,this.ListLayouts=this.ListLayouts.bind(this),this.CreateLayout=this.CreateLayout.bind(this),this.GetLayout=this.GetLayout.bind(this),this.UpdateLayout=this.UpdateLayout.bind(this),this.DeleteLayout=this.DeleteLayout.bind(this)}ListLayouts(ft){const yt=a.ListLayoutsRequest.encode(ft).finish();return this.rpc.request("apis.layout.v2.LayoutService","ListLayouts",yt).then(wt=>a.ListLayoutsResponse.decode(new _.Reader(wt)))}CreateLayout(ft){const yt=a.CreateLayoutRequest.encode(ft).finish();return this.rpc.request("apis.layout.v2.LayoutService","CreateLayout",yt).then(wt=>a.Layout.decode(new _.Reader(wt)))}GetLayout(ft){const yt=a.GetLayoutRequest.encode(ft).finish();return this.rpc.request("apis.layout.v2.LayoutService","GetLayout",yt).then(wt=>a.Layout.decode(new _.Reader(wt)))}UpdateLayout(ft){const yt=a.UpdateLayoutRequest.encode(ft).finish();return this.rpc.request("apis.layout.v2.LayoutService","UpdateLayout",yt).then(wt=>a.Layout.decode(new _.Reader(wt)))}DeleteLayout(ft){const yt=a.DeleteLayoutRequest.encode(ft).finish();return this.rpc.request("apis.layout.v2.LayoutService","DeleteLayout",yt).then(wt=>a.DeleteLayoutResponse.decode(new _.Reader(wt)))}}a.LayoutServiceClientImpl=qn,a.LayoutServiceDefinition={name:"LayoutService",fullName:"apis.layout.v2.LayoutService",methods:{listLayouts:{name:"ListLayouts",requestType:a.ListLayoutsRequest,requestStream:!1,responseType:a.ListLayoutsResponse,responseStream:!1,options:{}},createLayout:{name:"CreateLayout",requestType:a.CreateLayoutRequest,requestStream:!1,responseType:a.Layout,responseStream:!1,options:{}},getLayout:{name:"GetLayout",requestType:a.GetLayoutRequest,requestStream:!1,responseType:a.Layout,responseStream:!1,options:{}},updateLayout:{name:"UpdateLayout",requestType:a.UpdateLayoutRequest,requestStream:!1,responseType:a.Layout,responseStream:!1,options:{}},deleteLayout:{name:"DeleteLayout",requestType:a.DeleteLayoutRequest,requestStream:!1,responseType:a.DeleteLayoutResponse,responseStream:!1,options:{}}}};var Un=(()=>{if(typeof Un!="undefined")return Un;if(typeof self!="undefined")return self;if(typeof window!="undefined")return window;if(typeof commonjsGlobal$1!="undefined")return commonjsGlobal$1;throw"Unable to locate global object"})();_.util.Long!==b.default&&(_.util.Long=b.default,_.configure());function Jn(et){return typeof et=="object"&&et!==null}function Vt(et){return et!=null}})(api$3);(function(a){var s=commonjsGlobal$1&&commonjsGlobal$1.__createBinding||(Object.create?function(h,b,_,$){$===void 0&&($=_),Object.defineProperty(h,$,{enumerable:!0,get:function(){return b[_]}})}:function(h,b,_,$){$===void 0&&($=_),h[$]=b[_]}),d=commonjsGlobal$1&&commonjsGlobal$1.__exportStar||function(h,b){for(var _ in h)_!=="default"&&!b.hasOwnProperty(_)&&s(b,h,_)};Object.defineProperty(a,"__esModule",{value:!0}),a.layoutApiEventMap=void 0;const c=api$3;d(api$3,a),a.layoutApiEventMap={[c.EventType.EVENT_TYPE_LAYOUT]:"layout",[c.EventType.EVENT_TYPE_LAYER]:"layer",[c.EventType.EVENT_TYPE_UNSPECIFIED]:"unspecified"}})(dist$2);var api$2={},browser$2=!1,__viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$3=getAugmentedNamespace(__viteBrowserExternal$1),logger={};class EnhancedMap extends Map{computeIfAbsent(s,d){if(this.has(s))return this.get(s);const c=d(s);return this.set(s,c),c}computeIfPresent(s,d){const c=this.get(s);if(c===void 0)return;const h=d(s,c);return h!==void 0?this.set(s,h):this.delete(s),h}compute(s,d){const c=this.get(s),h=d(s,c);return h?this.set(s,h):this.delete(s),h}}var InternalLogLevel;(function(a){a[a.Trace=0]="Trace",a[a.Debug=1]="Debug",a[a.Info=2]="Info",a[a.Warn=3]="Warn",a[a.Error=4]="Error"})(InternalLogLevel||(InternalLogLevel={}));function getInternalLogger(a){return provider.getLogger(a)}const INTERNAL_LOGGING_SETTINGS={setInternalLogLevel:a=>provider.changeLogLevel(a),setOutput:a=>provider.changeOutput(a),reset:()=>provider.reset()};class InternalLoggerImpl{constructor(s,d,c){this._name=s,this._level=d,this._fnOutput=c}trace(s){this.log(InternalLogLevel.Trace,s)}debug(s){this.log(InternalLogLevel.Debug,s)}error(s,d){this.log(InternalLogLevel.Error,s,d)}info(s){this.log(InternalLogLevel.Info,s)}warn(s,d){this.log(InternalLogLevel.Warn,s,d)}setLevel(s){this._level=s}setOutput(s){this._fnOutput=s}log(s,d,c){this._level>s||this._fnOutput(`${InternalLogLevel[this._level].toString()} <INTERNAL LOGGER> ${this._name} ${d()}${c?`
`+c.stack:""}`)}}class InternalProviderImpl{constructor(){this._loggers=new EnhancedMap,this._logLevel=InternalLogLevel.Error,this._fnOutput=InternalProviderImpl.logConsole}getLogger(s){return this._loggers.computeIfAbsent(s,d=>new InternalLoggerImpl(d,this._logLevel,this._fnOutput))}changeLogLevel(s){this._logLevel=s,this._loggers.forEach(d=>d.setLevel(s))}changeOutput(s){this._fnOutput=s,this._loggers.forEach(d=>d.setOutput(this._fnOutput))}reset(){this.changeLogLevel(InternalLogLevel.Error),this._fnOutput=InternalProviderImpl.logConsole,this._loggers.forEach(s=>s.setOutput(this._fnOutput))}static logConsole(s){console&&console.log&&console.log(s)}}const provider=new InternalProviderImpl;var InternalLogger=Object.freeze({__proto__:null,get InternalLogLevel(){return InternalLogLevel},getInternalLogger,INTERNAL_LOGGING_SETTINGS}),LogLevel$1;(function(a){a[a.Trace=0]="Trace",a[a.Debug=1]="Debug",a[a.Info=2]="Info",a[a.Warn=3]="Warn",a[a.Error=4]="Error",a[a.Fatal=5]="Fatal"})(LogLevel$1||(LogLevel$1={}));(function(a){function s(d){switch(d.toLowerCase()){case"trace":return a.Trace;case"debug":return a.Debug;case"info":return a.Info;case"warn":return a.Warn;case"error":return a.Error;case"fatal":return a.Fatal;default:return}}a.toLogLevel=s})(LogLevel$1||(LogLevel$1={}));class CoreLoggerImpl{constructor(s){this._runtime=s}get id(){return this._runtime.id}get logLevel(){return this._runtime.level}get runtimeSettings(){return Object.assign({},this._runtime)}set runtimeSettings(s){this._runtime=s}trace(s,...d){this.logMessage(LogLevel$1.Trace,s,d)}debug(s,...d){this.logMessage(LogLevel$1.Debug,s,d)}info(s,...d){this.logMessage(LogLevel$1.Info,s,d)}warn(s,...d){this.logMessage(LogLevel$1.Warn,s,d)}error(s,...d){this.logMessage(LogLevel$1.Error,s,d)}fatal(s,...d){this.logMessage(LogLevel$1.Fatal,s,d)}logMessage(s,d,c){if(this._runtime.level>s)return;const h=Date.now(),b=typeof d=="string"?d:d(),_=CoreLoggerImpl.getErrorAndArgs(c);switch(this._runtime.channel.type){case"RawLogChannel":this._runtime.channel.write({message:b,exception:_.error,args:_.args,timeInMillis:h,level:s,logNames:this._runtime.name},this._runtime.argumentFormatter);return;case"LogChannel":this._runtime.channel.write(this.createLogMessage(b,s,_,h));break}}formatArgValue(s){try{return this._runtime.argumentFormatter(s)}catch{return`>>ARG CONVERT FAILED: '${s!==void 0?s.toString():"undefined"}'<<`}}createLogMessage(s,d,c,h){let b;const _=c.error,$=c.args;_&&(b=`${_.name}: ${_.message}`,_.stack&&(b+=`@
${_.stack}`));const _e=this._runtime.dateFormatter(h);let tt=LogLevel$1[d].toUpperCase();tt.length<5&&(tt+=" ");const rt=typeof this._runtime.name=="string"?this._runtime.name:this._runtime.name.join(", "),ot=typeof $!="undefined"&&$.length>0?" ["+$.map(st=>this.formatArgValue(st)).join(", ")+"]":"";return{message:_e+" "+tt+" ["+rt+"] "+s+ot,error:b}}static getErrorAndArgs(s){if(s.length===0)return{};let d,c;const h=s[0];if(h instanceof Error)return d=h,c=s.length>1?s.slice(1):void 0,{error:d,args:c};if(typeof h=="function"){const b=h();return b instanceof Error?(d=b,c=s.length>1?s.slice(1):void 0,{error:d,args:c}):s.length===1?Array.isArray(b)?{args:b.length>0?b:void 0}:{args:b}:Array.isArray(b)?{args:[...b,...s.slice(1)]}:{args:[b,...s.slice(1)]}}return{args:s}}}function padStart(a,s,d=" "){return padInternal(a,s,"start",d)}function padEnd(a,s,d=" "){return padInternal(a,s,"end",d)}function maxLengthStringValueInArray(a){return a.map(s=>s.length).reduce((s,d)=>d>s?d:s,0)}function padInternal(a,s,d,c=" "){if(s<=a.length)return a;if(c.length>1)throw new Error(`Fill char must be one char exactly, it is: ${c.length}`);const h=s-a.length;let b="";for(let _=0;_<h;_++)b+=c;return d==="start"?b+a:a+b}function formatArgument(a){return a===void 0?"undefined":JSON.stringify(a)}function formatDate(a){const s=new Date(a),d=s.getFullYear(),c=padStart((s.getMonth()+1).toString(),2,"0"),h=padStart(s.getDate().toString(),2,"0"),b=padStart(s.getHours().toString(),2,"0"),_=padStart(s.getMinutes().toString(),2,"0"),$=padStart(s.getSeconds().toString(),2,"0"),_e=padStart(s.getMilliseconds().toString(),2,"0");return`${d}-${c}-${h} ${b}:${_}:${$},${_e}`}class ConsoleLogChannel{constructor(){this.type="LogChannel"}write(s){console&&console.log&&console.log(s.message+(s.error?`
${s.error}`:""))}}var DefaultChannels;(function(a){function s(){return new ConsoleLogChannel}a.createConsoleChannel=s})(DefaultChannels||(DefaultChannels={}));class LogProviderImpl{constructor(s,d){this._log=getInternalLogger("core.impl.LogProviderImpl"),this._name=s,this._settings=d,this._loggers=new EnhancedMap,this._idToKeyMap=new EnhancedMap,this._globalRuntimeSettings={level:d.level,channel:d.channel},this._nextLoggerId=1,this._log.trace(()=>`Created LogProviderImpl with settings: ${JSON.stringify(this._settings)}`)}get runtimeSettings(){return Object.assign(Object.assign({},this._settings),{level:this._globalRuntimeSettings.level,channel:this._globalRuntimeSettings.channel})}getLogger(s){return this.getOrCreateLogger(s)}updateLoggerRuntime(s,d){this._log.debug(()=>`Updating logger ${s.id} runtime settings using: '${JSON.stringify(d)}'`);const c=this._idToKeyMap.get(s.id);return c===void 0?(this._log.warn(()=>`Cannot update logger with id: ${s.id}, it was not found.`),!1):(this._loggers.computeIfPresent(c,(h,b)=>(b.runtimeSettings=LogProviderImpl.mergeRuntimeSettingsIntoLogRuntime(b.runtimeSettings,d),b)),!0)}updateRuntimeSettings(s){this._log.debug(()=>`Updating global runtime settings and updating existing loggers runtime settings using: '${JSON.stringify(s)}'`),this._globalRuntimeSettings={level:s.level!==void 0?s.level:this._globalRuntimeSettings.level,channel:s.channel!==void 0?s.channel:this._globalRuntimeSettings.channel},this._loggers.forEach(d=>d.runtimeSettings=LogProviderImpl.mergeRuntimeSettingsIntoLogRuntime(d.runtimeSettings,s))}clear(){this._loggers.clear(),this._idToKeyMap.clear(),this._globalRuntimeSettings=Object.assign({},this._settings),this._nextLoggerId=1}getOrCreateLogger(s){const d=LogProviderImpl.createKey(s),c=this._loggers.computeIfAbsent(d,()=>{const h={level:this._globalRuntimeSettings.level,channel:this._globalRuntimeSettings.channel,id:this.nextLoggerId(),name:s,argumentFormatter:this._settings.argumentFormatter,dateFormatter:this._settings.dateFormatter};return new CoreLoggerImpl(h)});return this._idToKeyMap.computeIfAbsent(c.id,()=>d),c}nextLoggerId(){const s=this._name+"_"+this._nextLoggerId;return this._nextLoggerId++,s}static mergeRuntimeSettingsIntoLogRuntime(s,d){return Object.assign(Object.assign({},s),{level:d.level!==void 0?d.level:s.level,channel:d.channel!==void 0?d.channel:s.channel})}static createKey(s){return typeof s=="string"?s:s.join(",")}}function createLogProvider(a,s){return new LogProviderImpl(a,s)}var index=Object.freeze({__proto__:null,EnhancedMap,padStart,padEnd,maxLengthStringValueInArray});class CategoryImpl{constructor(s,d,c,h){this._children=[],this._logger=s,this._name=d,this._parent=c,this._fnGetOrCreateChildCategory=h}get name(){return this._name}get parent(){return this._parent}get path(){const s=[];let d=this;for(;d!==void 0;)s.push(d.name),d=d.parent;return s.reverse()}get children(){return[...this._children]}addChild(s){if(s.parent!==this)throw new Error(`Cannot add child '${s.name}', expected parent '${this._name} but got ${s.parent?s.parent.name:"undefined"}'`);this._children.push(s)}getChildCategory(s){const d=this._children.find(c=>c.name===s);return d!==void 0?d:this._fnGetOrCreateChildCategory(s,this)}get id(){return this._logger.id}get logLevel(){return this._logger.logLevel}get runtimeSettings(){return this._logger.runtimeSettings}get logger(){return this._logger}trace(s,...d){this._logger.trace(s,...d)}debug(s,...d){this._logger.debug(s,...d)}info(s,...d){this._logger.info(s,...d)}warn(s,...d){this._logger.warn(s,...d)}error(s,...d){this._logger.error(s,...d)}fatal(s,...d){this._logger.fatal(s,...d)}}const CATEGORY_PATH_SEPARATOR="#";class CategoryProviderImpl{constructor(s,d){this._name=s,this._initialConfig=d,this._categoryStorage=new CategoryStorage(s,d)}get name(){return this._name}get config(){return this._initialConfig}get runtimeConfig(){return this._categoryStorage.getCurrentRuntimeConfig()}getCategory(s,d){return this._categoryStorage.getOrCreateCategory(s,d)}updateRuntimeSettingsCategory(s,d){this._categoryStorage.updateRuntimeSettingsCategory(s,d)}updateRuntimeSettings(s){this._categoryStorage.updateRuntimeSettings(s)}getRegisteredCategories(){return this._categoryStorage.getRegisteredCategories()}getCategoryByPath(s){return this._categoryStorage.getCategoryByPath(s)}}class CategoryStorage{constructor(s,d){this._categoriesById=new Map,this._categoriesByPath=new Map,this._categoryProviderName=s,this._allowSameCategoryName=d.allowSameCategoryName,this._logProvider=createLogProvider(s,Object.assign({},d)),this.getOrCreateCategory=this.getOrCreateCategory.bind(this)}getOrCreateCategory(s,d){if(s.indexOf(CATEGORY_PATH_SEPARATOR)!==-1)throw new Error(`Cannot create category '${s}', name cannot contain a '${CATEGORY_PATH_SEPARATOR}'.`);const c=d!==void 0?this.getParentCategory(d):void 0;return c===void 0?this.getOrCreateRootCategory(s):this.getOrCreateChildCategory(s,c)}updateRuntimeSettingsCategory(s,d){if(!s.id.startsWith(this._categoryProviderName))throw new Error(`Category '${s.name}' with LogId '${s.id}' is from a different CategoryProvider, cannot mix categories between providers.`);const c=this._categoriesById.get(s.id);c!==void 0&&(this._logProvider.updateLoggerRuntime(c.logger,{level:d.level}),!(d.disableRecursion!==void 0&&d.disableRecursion)&&c.children.forEach(h=>this.updateRuntimeSettingsCategory(h,d)))}updateRuntimeSettings(s){this._logProvider.updateRuntimeSettings(s)}getCurrentRuntimeConfig(){return Object.assign(Object.assign({},this._logProvider.runtimeSettings),{allowSameCategoryName:this._allowSameCategoryName})}getRegisteredCategories(){return[...this._categoriesById.values()]}getCategoryByPath(s){return this._categoriesByPath.get(s)}getParentCategory(s){let d;if(CategoryStorage.isLogId(s)){if(d=this._categoriesById.get(s),d===void 0)throw new Error(`Parent category was not found by LogId '${s}'. Are you sure you passed in the correct argument?`)}else if(d=this._categoriesById.get(s.id),d===void 0)throw new Error(`Parent category '${s.name}' was not found by it's LogId '${s.id}'. Are you sure you passed in the correct parent category?`);return d}getOrCreateRootCategory(s){const d=this._categoriesByPath.get(s);if(d){if(!this._allowSameCategoryName)throw new Error(`Category '${s} already exists, config flag allowSameCategoryName=false - therefore matching version 1 behavior (hence this Error)`);return d}const c=this._logProvider.getLogger(s),h=new CategoryImpl(c,s,void 0,this.getOrCreateCategory);return this._categoriesById.set(h.id,h),this._categoriesByPath.set(s,h),h}getOrCreateChildCategory(s,d){if(!d.id.startsWith(this._categoryProviderName))throw new Error(`Parent category '${d.name}' with LogId '${d.id}' is from a different CategoryProvider, cannot mix categories between providers.`);const c=[...d.path,s].join(CATEGORY_PATH_SEPARATOR),h=this._categoriesByPath.get(c);if(h){if(!this._allowSameCategoryName)throw new Error(`Child category '${s} already exists for parent category ${d.name}, config flag allowSameCategoryName=false - therefore matching version 1 behavior (hence this Error)`);return h}const b=this._logProvider.getLogger(c);this._logProvider.updateLoggerRuntime(b,{level:d.logger.runtimeSettings.level,channel:d.logger.runtimeSettings.channel});const _=new CategoryImpl(b,s,d,this.getOrCreateCategory);return this._categoriesById.set(_.id,_),this._categoriesByPath.set(_.path.join(CATEGORY_PATH_SEPARATOR),_),d.addChild(_),_}static isLogId(s){return typeof s=="string"}}class CategoryControlProviderImpl{constructor(s,d){this._provider=s,this._messageChannel=d,this._originalLogLevels=CategoryControlProviderImpl.loadCurrentGroupLogLevels(s)}get name(){return this._provider.name}showSettings(){let s=`Available categories (CategoryProvider '${this._provider.name}'):
`;const d=this.createCategoryInfoHierarchy(),c=d.size.toString().length,h=index.maxLengthStringValueInArray([...d.values()].map(_=>_.category.name+" ".repeat(_.depth))),b=[...d.values()].map((_,$)=>CategoryControlProviderImpl.createSettingLineCategory(_,$,c,h));s+=b.join(`
`)+(b.length>0?`
`:""),this._messageChannel(s)}help(){const s=`You can use the following commands (CategoryProvider ${this._provider.name}):
  showSettings()
    Shows the current configuration settings.
  update(level: CategoryControlProviderLogLevel, categoryId?: number | string, noRecurse?: boolean)
    Change the log level for a category (by default recursively).
      @param level      The log level to set - must be one of 'trace', 'debug', 'info', 'warn', 'error' or 'fatal'
      @param categoryId The category id or path of a category (e.g. root#child1) to update. Use showSettings() for id and/or name.
                        When omitted, it applies the level to all categories recursively.
  reset()
    Resets the log levels of the config groups back to when this control provider was created.
  save()
    Saves the current log levels for all categories of this provider. Use restore() to load last saved state.
  restore()
    Restore stored saved state, if any. Log levels will be set according to the saved state.
  help()
    Shows this help.
`;this._messageChannel(s)}reset(){const s=new Map(this._provider.getRegisteredCategories().map(d=>[d.id,d]));this._originalLogLevels.forEach((d,c)=>{const h=s.get(c);h!==void 0&&this._provider.updateRuntimeSettingsCategory(h,{level:d,disableRecursion:!0}),s.delete(c)}),s.forEach(d=>{d.parent!==void 0&&this._provider.updateRuntimeSettingsCategory(d,{level:d.parent.logLevel,disableRecursion:!0})}),this._originalLogLevels=CategoryControlProviderImpl.loadCurrentGroupLogLevels(this._provider),this._messageChannel("Successfully reset log levels back to original state (from when this CategoryControlProvider was created).")}save(){if(!localStorage){this._messageChannel("Cannot save state, localStorage is not available.");return}const s=this._provider.getRegisteredCategories().filter(c=>c.parent===void 0).map(c=>CategoryControlProviderImpl.createCategorySaveData(c)),d={name:this._provider.name,rootCategories:s};localStorage.setItem(this.createKey(),JSON.stringify(d)),this._messageChannel(`Successfully saved state for CategoryControlProvider '${this._provider.name}'.`)}restore(s){const d=s!==void 0?s:!0;if(!localStorage){d&&this._messageChannel(`Will not attempt to restore state for CategoryControlProvider '${this._provider.name}', localStorage is not available.`);return}const c=this.createKey(),h=localStorage.getItem(c);if(h===null){d&&this._messageChannel(`Cannot restore state for CategoryControlProvider '${this._provider.name}', no data available.`);return}try{const b=JSON.parse(h);if(this._provider.name!==b.name){d&&this._messageChannel(`Cannot restore state for CategoryControlProvider '${this._provider.name}', data is not for provider - found name '${b.name}'.`);return}this.restoreBySaveData(b,d),this._messageChannel(`Successfully restored state for CategoryControlProvider '${this._provider.name}'`),this._originalLogLevels=CategoryControlProviderImpl.loadCurrentGroupLogLevels(this._provider)}catch{localStorage.removeItem(c),this._messageChannel(`Cannot restore state for CategoryControlProvider '${this._provider.name}', data is not valid. Invalid data removed from localStorage.`)}}update(s,d,c){typeof d=="undefined"?this.updateAll(s):typeof d=="number"?this.updateByIndex(s,d,c!==void 0?c:!1):this.updateByPath(s,d,c!==void 0?c:!1)}updateAll(s){const d=LogLevel$1.toLogLevel(s);this._provider.getRegisteredCategories().filter(c=>c.parent===void 0).forEach(c=>this._provider.updateRuntimeSettingsCategory(c,{level:d})),this._messageChannel(`Updated all categories to use log level '${s.toLowerCase()}'`)}updateByPath(s,d,c){const h=this._provider.getCategoryByPath(d);if(h===void 0){this._messageChannel(`Failed to find a provider by path '${d}', please make sure to separate the parts by a ${CATEGORY_PATH_SEPARATOR}.`);return}this._provider.updateRuntimeSettingsCategory(h,{level:LogLevel$1.toLogLevel(s),disableRecursion:c}),this._messageChannel(`Successfully updated category '${h.name}' with path '${d}' to log level '${s.toLowerCase()}'${c?"":" and recursively applied to children (if any)"}.`)}updateByIndex(s,d,c){if(d<0){this._messageChannel(`Cannot update category by index '${d}', it is negative.`);return}const h=this.createCategoryInfoHierarchy();if(d>=h.size){this._messageChannel(`Cannot update category by index '${d}', it is outside of the range of available categories, use showSettings() to see the indices.`);return}const b=[...h.values()][d].category;this._provider.updateRuntimeSettingsCategory(b,{level:LogLevel$1.toLogLevel(s),disableRecursion:c}),this._messageChannel(`Successfully updated category '${b.name}' by index '${d}' to log level '${s.toLowerCase()}'${c?"":" and recursively applied to children (if any)"}.`)}restoreBySaveData(s,d){const c=(h,b)=>{const _=b.length>0?b+CATEGORY_PATH_SEPARATOR+h.name:h.name,$=this._provider.getCategoryByPath(_);if($!==void 0){const _e=LogLevel$1.toLogLevel(h.level);_e!==void 0?this._provider.updateRuntimeSettingsCategory($,{level:_e,disableRecursion:!0}):d&&this._messageChannel(`CategoryControlProvider '${this._provider.name}' - cannot restore log level for category path '${_}', log level is invalid.`);for(const tt of h.children)c(tt,_)}else d&&this._messageChannel(`CategoryControlProvider '${this._provider.name}' - failed to find a Category by path '${_}', will not restore category (and children)`)};for(const h of s.rootCategories)c(h,"")}createKey(){return`CategoryProvider-${this._provider.name}`}createCategoryInfoHierarchy(){const s=new Map;return this._provider.getRegisteredCategories().filter(c=>c.parent===void 0).forEach(c=>CategoryControlProviderImpl.addCategoryInfoHierarchy(c,0,s)),s}static createCategorySaveData(s){return{name:s.name,level:LogLevel$1[s.logLevel],children:s.children.map(d=>this.createCategorySaveData(d))}}static loadCurrentGroupLogLevels(s){return new Map(s.getRegisteredCategories().map(d=>[d.id,d.logLevel]))}static createSettingLineCategory(s,d,c,h){const _=" ".repeat(s.depth)+s.category.name;return`  [${index.padStart(d.toString(),c)}, ${index.padEnd(_,h)} (level=${index.padEnd(s.logLevel,5)})]`}static addCategoryInfoHierarchy(s,d,c){c.set(s.id,{category:s,logLevel:LogLevel$1[s.logLevel],depth:d}),s.children.forEach(h=>this.addCategoryInfoHierarchy(h,d+1,c))}}function categoryConfigDebug(a){return`CategoryConfig=level: ${LogLevel$1[a.level].toString()}, allowSameCategoryName=${a.allowSameCategoryName}`}class CategoryProviderService{constructor(){this._log=InternalLogger.getInternalLogger("category.impl.CategoryProviderService"),this._providers=new index.EnhancedMap}createLogProvider(s,d){const c=this._providers.compute(s,(h,b)=>{if(b)throw new Error(`CategoryProvider with name '${s}' already exists, cannot create another.`);const _=mergeWithDefaults(d);return this._log.debug(()=>`Creating new CategoryProvider with name '${s}', using config settings '${categoryConfigDebug(_)}'.`),new CategoryProviderImpl(s,_)});if(c)return c;throw new Error("No CategoryProvider? This is a bug.")}getCategoryControl(s){const d=s||(c=>{if(console&&console.log)console.log(c);else throw new Error("Cannot use console (it is not present), please specify a custom function to write to.")});return{help:()=>d(CategoryProviderService.help()),showSettings:()=>d(this.showSettings()),getProvider:c=>this.getCategoryControlProviderByIdOrName(c,d)}}clear(){this._providers.clear()}showSettings(){let s=`Available CategoryProviders:
`;const d=this._providers.size.toString().length,c=index.maxLengthStringValueInArray([...this._providers.keys()]),h=[...this._providers.entries()].map((b,_)=>{const $=b[0];return`  [${index.padStart(_.toString(),d)}, ${index.padEnd($,c)}]`});return s+=h.join(`
`)+(h.length>0?`
`:""),s}getCategoryControlProviderByIdOrName(s,d){if(typeof s=="string"){const h=this._providers.get(s);if(h===void 0)throw new Error(`Provider with name '${s}' does not exist.`);return new CategoryControlProviderImpl(h,d)}const c=[...this._providers.values()];if(s<0||s>=c.length)throw new Error(`Provider with index '${s}' does not exist (outside of range).`);return new CategoryControlProviderImpl(c[s],d)}static help(){return`You can use the following commands:
  showSettings()
    Shows the current configuration settings.
  getProvider: (id: number | string): CategoryControlProvider
    Get access to a CategoryControlProvider to change log levels.
      @param id The id (use showSettings to see) or name of the provider
  help()
    Shows this help.
`}}const CATEGORY_PROVIDER_SERVICE=new CategoryProviderService,CATEGORY_LOG_CONTROL=a=>CATEGORY_PROVIDER_SERVICE.getCategoryControl(a);function mergeWithDefaults(a){const s={channel:DefaultChannels.createConsoleChannel(),allowSameCategoryName:!0,level:LogLevel$1.Error,dateFormatter:formatDate,argumentFormatter:formatArgument};return a?{channel:a.channel?a.channel:s.channel,allowSameCategoryName:a.allowSameCategoryName!==void 0?a.allowSameCategoryName:s.allowSameCategoryName,level:a.level?a.level:s.level,dateFormatter:a.dateFormatter?a.dateFormatter:s.dateFormatter,argumentFormatter:a.argumentFormatter?a.argumentFormatter:s.argumentFormatter}:s}var CategoryProvider;(function(a){function s(c,h){return CATEGORY_PROVIDER_SERVICE.createLogProvider(c,h)}a.createProvider=s;function d(){CATEGORY_PROVIDER_SERVICE.clear()}a.clear=d})(CategoryProvider||(CategoryProvider={}));var typescriptLoggingCategory_esm=Object.freeze(Object.defineProperty({__proto__:null,CATEGORY_LOG_CONTROL,get CategoryProvider(){return CategoryProvider}},Symbol.toStringTag,{value:"Module"})),require$$1=getAugmentedNamespace(typescriptLoggingCategory_esm);Object.defineProperty(logger,"__esModule",{value:!0});logger.logger=void 0;const typescript_logging_1=require$$2$1,typescript_logging_category_style_1=require$$1;logger.logger=typescript_logging_category_style_1.CategoryProvider.createProvider("ApiStream",{allowSameCategoryName:!0,level:typescript_logging_1.LogLevel.Warn});var version$3="1.0.23",__createBinding$4=commonjsGlobal$1&&commonjsGlobal$1.__createBinding||(Object.create?function(a,s,d,c){c===void 0&&(c=d);var h=Object.getOwnPropertyDescriptor(s,d);(!h||("get"in h?!s.__esModule:h.writable||h.configurable))&&(h={enumerable:!0,get:function(){return s[d]}}),Object.defineProperty(a,c,h)}:function(a,s,d,c){c===void 0&&(c=d),a[c]=s[d]}),__setModuleDefault$4=commonjsGlobal$1&&commonjsGlobal$1.__setModuleDefault||(Object.create?function(a,s){Object.defineProperty(a,"default",{enumerable:!0,value:s})}:function(a,s){a.default=s}),__importStar$4=commonjsGlobal$1&&commonjsGlobal$1.__importStar||function(a){if(a&&a.__esModule)return a;var s={};if(a!=null)for(var d in a)d!=="default"&&Object.prototype.hasOwnProperty.call(a,d)&&__createBinding$4(s,a,d);return __setModuleDefault$4(s,a),s},__importDefault$5=commonjsGlobal$1&&commonjsGlobal$1.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(api$2,"__esModule",{value:!0});api$2.ApiClient=void 0;const NiceGrpc$1=__importStar$4(lib$1),abort_controller_x_1=require$$1$1,detect_node_1=__importDefault$5(browser$2),NodeTransport=__importStar$4(require$$3),logger_1=logger,clientVersion$1=version$3;class ApiClient{constructor(s,d,c,h,b,_){this.sessionId=s,this.sdkVersion=c,this.version=clientVersion$1,this.apiLogCallback=b,this.eventLogCallback=_,this.log=logger_1.logger.getCategory(h),this.channel=NiceGrpc$1.createChannel(d,detect_node_1.default?NodeTransport.NodeHttpTransport():void 0),this.clientFactory=NiceGrpc$1.createClientFactory().use(this.logMiddleware.bind(this))}async*logMiddleware(s,d){const{path:c}=s.method;try{const h=yield*s.next(s.request,d);if(this.log.debug(`-> ${c}: ok`),this.log.trace(`${JSON.stringify(s.request)} -> ${c}: ${JSON.stringify(h)}`),this.apiLogCallback){let b=c.split("/"),_=b[1].split("."),$=_[_.length-1],_e=_[_.length-2],tt=_[_.length-3],rt=b[2];this.apiLogCallback(tt,$,rt,s.request,h)}return h}catch(h){throw this.log.trace(`${JSON.stringify(s.request)} -> ${c}`),h instanceof NiceGrpc$1.ClientError?this.log.warn(`-> ${c}: error: ${NiceGrpc$1.Status[h.code]}: ${h.details}`):(0,abort_controller_x_1.isAbortError)(h)?this.log.warn(`-> ${c}: cancel`):this.log.warn(`-> ${c}: error: ${h==null?void 0:h.stack}`),h}}setAccessToken(s){(this.accessToken==null||this.accessToken!=s)&&(this.log.debug("access token refreshed"),this.accessToken=s,this.setup())}makeGrpcMetadata(){let s=NiceGrpc$1.Metadata({Authorization:`Bearer ${this.accessToken}`,Version:this.version,SessionId:this.sessionId});return this.sdkVersion!=null&&s.set("SdkVersion",this.sdkVersion),s}setup(){let s={metadata:this.makeGrpcMetadata()};this._setup(s)}_setup(s){}}api$2.ApiClient=ApiClient;var decorator={};Object.defineProperty(decorator,"__esModule",{value:!0});decorator.RequiresSdkAuthentication=void 0;function RequiresSdkAuthentication(){return function(a,s){const d=Symbol(s);Object.defineProperty(a,s,{get:function(){if(!this[d])throw new Error("Please authenticate ApiStream by calling apiStream.load( accessToken )");return this[d]},set:function(c){this[d]=c}})}}decorator.RequiresSdkAuthentication=RequiresSdkAuthentication;var __createBinding$3=commonjsGlobal$1&&commonjsGlobal$1.__createBinding||(Object.create?function(a,s,d,c){c===void 0&&(c=d);var h=Object.getOwnPropertyDescriptor(s,d);(!h||("get"in h?!s.__esModule:h.writable||h.configurable))&&(h={enumerable:!0,get:function(){return s[d]}}),Object.defineProperty(a,c,h)}:function(a,s,d,c){c===void 0&&(c=d),a[c]=s[d]}),__setModuleDefault$3=commonjsGlobal$1&&commonjsGlobal$1.__setModuleDefault||(Object.create?function(a,s){Object.defineProperty(a,"default",{enumerable:!0,value:s})}:function(a,s){a.default=s}),__decorate=commonjsGlobal$1&&commonjsGlobal$1.__decorate||function(a,s,d,c){var h=arguments.length,b=h<3?s:c===null?c=Object.getOwnPropertyDescriptor(s,d):c,_;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")b=Reflect.decorate(a,s,d,c);else for(var $=a.length-1;$>=0;$--)(_=a[$])&&(b=(h<3?_(b):h>3?_(s,d,b):_(s,d))||b);return h>3&&b&&Object.defineProperty(s,d,b),b},__importStar$3=commonjsGlobal$1&&commonjsGlobal$1.__importStar||function(a){if(a&&a.__esModule)return a;var s={};if(a!=null)for(var d in a)d!=="default"&&Object.prototype.hasOwnProperty.call(a,d)&&__createBinding$3(s,a,d);return __setModuleDefault$3(s,a),s},__metadata=commonjsGlobal$1&&commonjsGlobal$1.__metadata||function(a,s){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(a,s)};Object.defineProperty(layoutapi,"__esModule",{value:!0});layoutapi.LayoutApi=void 0;__importStar$3(lib$1);const LayoutApiModel=__importStar$3(dist$2),api_1$1=api$2,decorator_1=decorator,LOG_CATEGORY$1="LayoutApi";class LayoutApi extends api_1$1.ApiClient{constructor(s,d,c,h,b){super(s,c,h,LOG_CATEGORY$1,b),this.handlers={},this.eventApi=d,this.eventApi.on("event",{name:`${LayoutApi.LAYOUTAPI_EVENT_PREFIX}:*`,ignoreSessionEvents:!0},_=>{var $;const[,_e]=_.name.split(`${LayoutApi.LAYOUTAPI_EVENT_PREFIX}:`),[tt,rt]=_e.split(":"),ot=_.payload;for(const it of($=this.handlers[tt])!==null&&$!==void 0?$:[])it(Object.values(ot).find(st=>!!st),rt)})}_setup(s){this.layer=this.clientFactory.create(LayoutApiModel.LayerServiceDefinition,this.channel,{"*":s}),this.layout=this.clientFactory.create(LayoutApiModel.LayoutServiceDefinition,this.channel,{"*":s})}async subscribeToLayout(s){await Promise.all([this.eventApi.subscribe(`${LayoutApi.LAYOUTAPI_EVENT_PREFIX}:${LayoutApiModel.EventType.EVENT_TYPE_LAYER}:*`,{target:{layoutId:s}}),this.eventApi.subscribe(`${LayoutApi.LAYOUTAPI_EVENT_PREFIX}:${LayoutApiModel.EventType.EVENT_TYPE_LAYOUT}:*`,{target:{layoutId:s}})])}async unsubscribeFromLayout(s){await Promise.all([this.eventApi.unsubscribe(`${LayoutApi.LAYOUTAPI_EVENT_PREFIX}:${LayoutApiModel.EventType.EVENT_TYPE_LAYER}:*`,{target:{layoutId:s}}),this.eventApi.unsubscribe(`${LayoutApi.LAYOUTAPI_EVENT_PREFIX}:${LayoutApiModel.EventType.EVENT_TYPE_LAYOUT}:*`,{target:{layoutId:s}})])}async subscribeToLayoutsInProject(s,d){await Promise.all([this.eventApi.subscribe(`${LayoutApi.LAYOUTAPI_EVENT_PREFIX}:${LayoutApiModel.EventType.EVENT_TYPE_LAYER}:*`,{target:{collectionId:s,projectId:d}}),this.eventApi.subscribe(`${LayoutApi.LAYOUTAPI_EVENT_PREFIX}:${LayoutApiModel.EventType.EVENT_TYPE_LAYOUT}:*`,{target:{collectionId:s,projectId:d}})])}async unsubscribeFromLayoutsInProject(s,d){await Promise.all([this.eventApi.unsubscribe(`${LayoutApi.LAYOUTAPI_EVENT_PREFIX}:${LayoutApiModel.EventType.EVENT_TYPE_LAYER}:*`,{target:{collectionId:s,projectId:d}}),this.eventApi.unsubscribe(`${LayoutApi.LAYOUTAPI_EVENT_PREFIX}:${LayoutApiModel.EventType.EVENT_TYPE_LAYOUT}:*`,{target:{collectionId:s,projectId:d}})])}on(s,d){var c;this.handlers[s]=(c=this.handlers[s])!==null&&c!==void 0?c:[],this.handlers[s].push(d)}off(s,d){this.handlers[s]=this.handlers[s].filter(c=>c!==d)}}LayoutApi.LAYOUTAPI_EVENT_PREFIX="apistream:layout";__decorate([(0,decorator_1.RequiresSdkAuthentication)(),__metadata("design:type",Object)],LayoutApi.prototype,"layout",void 0);__decorate([(0,decorator_1.RequiresSdkAuthentication)(),__metadata("design:type",Object)],LayoutApi.prototype,"layer",void 0);layoutapi.LayoutApi=LayoutApi;var liveapi={},api$1={},timestamp$1={},__createBinding$2=commonjsGlobal$1&&commonjsGlobal$1.__createBinding||(Object.create?function(a,s,d,c){c===void 0&&(c=d);var h=Object.getOwnPropertyDescriptor(s,d);(!h||("get"in h?!s.__esModule:h.writable||h.configurable))&&(h={enumerable:!0,get:function(){return s[d]}}),Object.defineProperty(a,c,h)}:function(a,s,d,c){c===void 0&&(c=d),a[c]=s[d]}),__setModuleDefault$2=commonjsGlobal$1&&commonjsGlobal$1.__setModuleDefault||(Object.create?function(a,s){Object.defineProperty(a,"default",{enumerable:!0,value:s})}:function(a,s){a.default=s}),__importStar$2=commonjsGlobal$1&&commonjsGlobal$1.__importStar||function(a){if(a&&a.__esModule)return a;var s={};if(a!=null)for(var d in a)d!=="default"&&Object.prototype.hasOwnProperty.call(a,d)&&__createBinding$2(s,a,d);return __setModuleDefault$2(s,a),s},__importDefault$4=commonjsGlobal$1&&commonjsGlobal$1.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(timestamp$1,"__esModule",{value:!0});timestamp$1.Timestamp=timestamp$1.protobufPackage=void 0;const long_1$1=__importDefault$4(umd.exports),_m0$2=__importStar$2(minimal$2);timestamp$1.protobufPackage="google.protobuf";function createBaseTimestamp(){return{seconds:0,nanos:0}}timestamp$1.Timestamp={encode(a,s=_m0$2.Writer.create()){return a.seconds!==0&&s.uint32(8).int64(a.seconds),a.nanos!==0&&s.uint32(16).int32(a.nanos),s},decode(a,s){const d=a instanceof _m0$2.Reader?a:new _m0$2.Reader(a);let c=s===void 0?d.len:d.pos+s;const h=createBaseTimestamp();for(;d.pos<c;){const b=d.uint32();switch(b>>>3){case 1:h.seconds=longToNumber$2(d.int64());break;case 2:h.nanos=d.int32();break;default:d.skipType(b&7);break}}return h},fromJSON(a){return{seconds:isSet$2(a.seconds)?Number(a.seconds):0,nanos:isSet$2(a.nanos)?Number(a.nanos):0}},toJSON(a){const s={};return a.seconds!==void 0&&(s.seconds=Math.round(a.seconds)),a.nanos!==void 0&&(s.nanos=Math.round(a.nanos)),s},fromPartial(a){var s,d;const c=createBaseTimestamp();return c.seconds=(s=a.seconds)!==null&&s!==void 0?s:0,c.nanos=(d=a.nanos)!==null&&d!==void 0?d:0,c}};var globalThis$1=(()=>{if(typeof globalThis$1!="undefined")return globalThis$1;if(typeof self!="undefined")return self;if(typeof window!="undefined")return window;if(typeof commonjsGlobal$1!="undefined")return commonjsGlobal$1;throw"Unable to locate global object"})();function longToNumber$2(a){if(a.gt(Number.MAX_SAFE_INTEGER))throw new globalThis$1.Error("Value is larger than Number.MAX_SAFE_INTEGER");return a.toNumber()}_m0$2.util.Long!==long_1$1.default&&(_m0$2.util.Long=long_1$1.default,_m0$2.configure());function isSet$2(a){return a!=null}var struct$1={};(function(a){var s=commonjsGlobal$1&&commonjsGlobal$1.__createBinding||(Object.create?function(nt,ct,mt,kt){kt===void 0&&(kt=mt);var Tt=Object.getOwnPropertyDescriptor(ct,mt);(!Tt||("get"in Tt?!ct.__esModule:Tt.writable||Tt.configurable))&&(Tt={enumerable:!0,get:function(){return ct[mt]}}),Object.defineProperty(nt,kt,Tt)}:function(nt,ct,mt,kt){kt===void 0&&(kt=mt),nt[kt]=ct[mt]}),d=commonjsGlobal$1&&commonjsGlobal$1.__setModuleDefault||(Object.create?function(nt,ct){Object.defineProperty(nt,"default",{enumerable:!0,value:ct})}:function(nt,ct){nt.default=ct}),c=commonjsGlobal$1&&commonjsGlobal$1.__importStar||function(nt){if(nt&&nt.__esModule)return nt;var ct={};if(nt!=null)for(var mt in nt)mt!=="default"&&Object.prototype.hasOwnProperty.call(nt,mt)&&s(ct,nt,mt);return d(ct,nt),ct},h=commonjsGlobal$1&&commonjsGlobal$1.__importDefault||function(nt){return nt&&nt.__esModule?nt:{default:nt}};Object.defineProperty(a,"__esModule",{value:!0}),a.ListValue=a.Value=a.Struct_FieldsEntry=a.Struct=a.nullValueToNumber=a.nullValueToJSON=a.nullValueFromJSON=a.NullValue=a.protobufPackage=void 0;const b=h(umd.exports),_=c(minimal$2);a.protobufPackage="google.protobuf";var $;(function(nt){nt.NULL_VALUE="NULL_VALUE"})($=a.NullValue||(a.NullValue={}));function _e(nt){switch(nt){case 0:case"NULL_VALUE":return $.NULL_VALUE;default:throw new dt.Error("Unrecognized enum value "+nt+" for enum NullValue")}}a.nullValueFromJSON=_e;function tt(nt){switch(nt){case $.NULL_VALUE:return"NULL_VALUE";default:return"UNKNOWN"}}a.nullValueToJSON=tt;function rt(nt){switch(nt){case $.NULL_VALUE:return 0;default:return 0}}a.nullValueToNumber=rt;function ot(){return{fields:{}}}a.Struct={encode(nt,ct=_.Writer.create()){return Object.entries(nt.fields).forEach(([mt,kt])=>{kt!==void 0&&a.Struct_FieldsEntry.encode({key:mt,value:kt},ct.uint32(10).fork()).ldelim()}),ct},decode(nt,ct){const mt=nt instanceof _.Reader?nt:new _.Reader(nt);let kt=ct===void 0?mt.len:mt.pos+ct;const Tt=ot();for(;mt.pos<kt;){const Pt=mt.uint32();switch(Pt>>>3){case 1:const At=a.Struct_FieldsEntry.decode(mt,mt.uint32());At.value!==void 0&&(Tt.fields[At.key]=At.value);break;default:mt.skipType(Pt&7);break}}return Tt},fromJSON(nt){return{fields:ut(nt.fields)?Object.entries(nt.fields).reduce((ct,[mt,kt])=>(ct[mt]=kt,ct),{}):{}}},toJSON(nt){const ct={};return ct.fields={},nt.fields&&Object.entries(nt.fields).forEach(([mt,kt])=>{ct.fields[mt]=kt}),ct},fromPartial(nt){var ct;const mt=ot();return mt.fields=Object.entries((ct=nt.fields)!==null&&ct!==void 0?ct:{}).reduce((kt,[Tt,Pt])=>(Pt!==void 0&&(kt[Tt]=Pt),kt),{}),mt},wrap(nt){const ct=ot();return nt!==void 0&&Object.keys(nt).forEach(mt=>{ct.fields[mt]=nt[mt]}),ct},unwrap(nt){const ct={};return Object.keys(nt.fields).forEach(mt=>{ct[mt]=nt.fields[mt]}),ct}};function it(){return{key:"",value:void 0}}a.Struct_FieldsEntry={encode(nt,ct=_.Writer.create()){return nt.key!==""&&ct.uint32(10).string(nt.key),nt.value!==void 0&&a.Value.encode(a.Value.wrap(nt.value),ct.uint32(18).fork()).ldelim(),ct},decode(nt,ct){const mt=nt instanceof _.Reader?nt:new _.Reader(nt);let kt=ct===void 0?mt.len:mt.pos+ct;const Tt=it();for(;mt.pos<kt;){const Pt=mt.uint32();switch(Pt>>>3){case 1:Tt.key=mt.string();break;case 2:Tt.value=a.Value.unwrap(a.Value.decode(mt,mt.uint32()));break;default:mt.skipType(Pt&7);break}}return Tt},fromJSON(nt){return{key:ht(nt.key)?String(nt.key):"",value:ht(nt==null?void 0:nt.value)?nt.value:void 0}},toJSON(nt){const ct={};return nt.key!==void 0&&(ct.key=nt.key),nt.value!==void 0&&(ct.value=nt.value),ct},fromPartial(nt){var ct,mt;const kt=it();return kt.key=(ct=nt.key)!==null&&ct!==void 0?ct:"",kt.value=(mt=nt.value)!==null&&mt!==void 0?mt:void 0,kt}};function st(){return{nullValue:void 0,numberValue:void 0,stringValue:void 0,boolValue:void 0,structValue:void 0,listValue:void 0}}a.Value={encode(nt,ct=_.Writer.create()){return nt.nullValue!==void 0&&ct.uint32(8).int32(rt(nt.nullValue)),nt.numberValue!==void 0&&ct.uint32(17).double(nt.numberValue),nt.stringValue!==void 0&&ct.uint32(26).string(nt.stringValue),nt.boolValue!==void 0&&ct.uint32(32).bool(nt.boolValue),nt.structValue!==void 0&&a.Struct.encode(a.Struct.wrap(nt.structValue),ct.uint32(42).fork()).ldelim(),nt.listValue!==void 0&&a.ListValue.encode(a.ListValue.wrap(nt.listValue),ct.uint32(50).fork()).ldelim(),ct},decode(nt,ct){const mt=nt instanceof _.Reader?nt:new _.Reader(nt);let kt=ct===void 0?mt.len:mt.pos+ct;const Tt=st();for(;mt.pos<kt;){const Pt=mt.uint32();switch(Pt>>>3){case 1:Tt.nullValue=_e(mt.int32());break;case 2:Tt.numberValue=mt.double();break;case 3:Tt.stringValue=mt.string();break;case 4:Tt.boolValue=mt.bool();break;case 5:Tt.structValue=a.Struct.unwrap(a.Struct.decode(mt,mt.uint32()));break;case 6:Tt.listValue=a.ListValue.unwrap(a.ListValue.decode(mt,mt.uint32()));break;default:mt.skipType(Pt&7);break}}return Tt},fromJSON(nt){return{nullValue:ht(nt.nullValue)?_e(nt.nullValue):void 0,numberValue:ht(nt.numberValue)?Number(nt.numberValue):void 0,stringValue:ht(nt.stringValue)?String(nt.stringValue):void 0,boolValue:ht(nt.boolValue)?Boolean(nt.boolValue):void 0,structValue:ut(nt.structValue)?nt.structValue:void 0,listValue:Array.isArray(nt.listValue)?[...nt.listValue]:void 0}},toJSON(nt){const ct={};return nt.nullValue!==void 0&&(ct.nullValue=nt.nullValue!==void 0?tt(nt.nullValue):void 0),nt.numberValue!==void 0&&(ct.numberValue=nt.numberValue),nt.stringValue!==void 0&&(ct.stringValue=nt.stringValue),nt.boolValue!==void 0&&(ct.boolValue=nt.boolValue),nt.structValue!==void 0&&(ct.structValue=nt.structValue),nt.listValue!==void 0&&(ct.listValue=nt.listValue),ct},fromPartial(nt){var ct,mt,kt,Tt,Pt,At;const gt=st();return gt.nullValue=(ct=nt.nullValue)!==null&&ct!==void 0?ct:void 0,gt.numberValue=(mt=nt.numberValue)!==null&&mt!==void 0?mt:void 0,gt.stringValue=(kt=nt.stringValue)!==null&&kt!==void 0?kt:void 0,gt.boolValue=(Tt=nt.boolValue)!==null&&Tt!==void 0?Tt:void 0,gt.structValue=(Pt=nt.structValue)!==null&&Pt!==void 0?Pt:void 0,gt.listValue=(At=nt.listValue)!==null&&At!==void 0?At:void 0,gt},wrap(nt){const ct=st();if(nt===null)ct.nullValue=$.NULL_VALUE;else if(typeof nt=="boolean")ct.boolValue=nt;else if(typeof nt=="number")ct.numberValue=nt;else if(typeof nt=="string")ct.stringValue=nt;else if(Array.isArray(nt))ct.listValue=nt;else if(typeof nt=="object")ct.structValue=nt;else if(typeof nt!="undefined")throw new Error("Unsupported any value type: "+typeof nt);return ct},unwrap(nt){if((nt==null?void 0:nt.stringValue)!==void 0)return nt.stringValue;if((nt==null?void 0:nt.numberValue)!==void 0)return nt.numberValue;if((nt==null?void 0:nt.boolValue)!==void 0)return nt.boolValue;if((nt==null?void 0:nt.structValue)!==void 0)return nt.structValue;if((nt==null?void 0:nt.listValue)!==void 0)return nt.listValue;if((nt==null?void 0:nt.nullValue)!==void 0)return null}};function lt(){return{values:[]}}a.ListValue={encode(nt,ct=_.Writer.create()){for(const mt of nt.values)a.Value.encode(a.Value.wrap(mt),ct.uint32(10).fork()).ldelim();return ct},decode(nt,ct){const mt=nt instanceof _.Reader?nt:new _.Reader(nt);let kt=ct===void 0?mt.len:mt.pos+ct;const Tt=lt();for(;mt.pos<kt;){const Pt=mt.uint32();switch(Pt>>>3){case 1:Tt.values.push(a.Value.unwrap(a.Value.decode(mt,mt.uint32())));break;default:mt.skipType(Pt&7);break}}return Tt},fromJSON(nt){return{values:Array.isArray(nt==null?void 0:nt.values)?[...nt.values]:[]}},toJSON(nt){const ct={};return nt.values?ct.values=nt.values.map(mt=>mt):ct.values=[],ct},fromPartial(nt){var ct;const mt=lt();return mt.values=((ct=nt.values)===null||ct===void 0?void 0:ct.map(kt=>kt))||[],mt},wrap(nt){const ct=lt();return ct.values=nt!=null?nt:[],ct},unwrap(nt){return nt.values}};var dt=(()=>{if(typeof dt!="undefined")return dt;if(typeof self!="undefined")return self;if(typeof window!="undefined")return window;if(typeof commonjsGlobal$1!="undefined")return commonjsGlobal$1;throw"Unable to locate global object"})();_.util.Long!==b.default&&(_.util.Long=b.default,_.configure());function ut(nt){return typeof nt=="object"&&nt!==null}function ht(nt){return nt!=null}})(struct$1);var field_mask={},__createBinding$1=commonjsGlobal$1&&commonjsGlobal$1.__createBinding||(Object.create?function(a,s,d,c){c===void 0&&(c=d);var h=Object.getOwnPropertyDescriptor(s,d);(!h||("get"in h?!s.__esModule:h.writable||h.configurable))&&(h={enumerable:!0,get:function(){return s[d]}}),Object.defineProperty(a,c,h)}:function(a,s,d,c){c===void 0&&(c=d),a[c]=s[d]}),__setModuleDefault$1=commonjsGlobal$1&&commonjsGlobal$1.__setModuleDefault||(Object.create?function(a,s){Object.defineProperty(a,"default",{enumerable:!0,value:s})}:function(a,s){a.default=s}),__importStar$1=commonjsGlobal$1&&commonjsGlobal$1.__importStar||function(a){if(a&&a.__esModule)return a;var s={};if(a!=null)for(var d in a)d!=="default"&&Object.prototype.hasOwnProperty.call(a,d)&&__createBinding$1(s,a,d);return __setModuleDefault$1(s,a),s},__importDefault$3=commonjsGlobal$1&&commonjsGlobal$1.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(field_mask,"__esModule",{value:!0});field_mask.FieldMask=field_mask.protobufPackage=void 0;const long_1=__importDefault$3(umd.exports),_m0$1=__importStar$1(minimal$2);field_mask.protobufPackage="google.protobuf";function createBaseFieldMask(){return{paths:[]}}field_mask.FieldMask={encode(a,s=_m0$1.Writer.create()){for(const d of a.paths)s.uint32(10).string(d);return s},decode(a,s){const d=a instanceof _m0$1.Reader?a:new _m0$1.Reader(a);let c=s===void 0?d.len:d.pos+s;const h=createBaseFieldMask();for(;d.pos<c;){const b=d.uint32();switch(b>>>3){case 1:h.paths.push(d.string());break;default:d.skipType(b&7);break}}return h},fromJSON(a){return{paths:typeof a=="string"?a.split(",").filter(Boolean):Array.isArray(a==null?void 0:a.paths)?a.paths.map(String):[]}},toJSON(a){return a.paths.join(",")},fromPartial(a){var s;const d=createBaseFieldMask();return d.paths=((s=a.paths)===null||s===void 0?void 0:s.map(c=>c))||[],d},wrap(a){return{paths:a}},unwrap(a){return a.paths}};_m0$1.util.Long!==long_1.default&&(_m0$1.util.Long=long_1.default,_m0$1.configure());(function(a){var s=commonjsGlobal$1&&commonjsGlobal$1.__createBinding||(Object.create?function(g,k,j,St){St===void 0&&(St=j);var at=Object.getOwnPropertyDescriptor(k,j);(!at||("get"in at?!k.__esModule:at.writable||at.configurable))&&(at={enumerable:!0,get:function(){return k[j]}}),Object.defineProperty(g,St,at)}:function(g,k,j,St){St===void 0&&(St=j),g[St]=k[j]}),d=commonjsGlobal$1&&commonjsGlobal$1.__setModuleDefault||(Object.create?function(g,k){Object.defineProperty(g,"default",{enumerable:!0,value:k})}:function(g,k){g.default=k}),c=commonjsGlobal$1&&commonjsGlobal$1.__importStar||function(g){if(g&&g.__esModule)return g;var k={};if(g!=null)for(var j in g)j!=="default"&&Object.prototype.hasOwnProperty.call(g,j)&&s(k,g,j);return d(k,g),k},h=commonjsGlobal$1&&commonjsGlobal$1.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(a,"__esModule",{value:!0}),a.Role=a.regionToNumber=a.regionToJSON=a.regionFromJSON=a.Region=a.sourceTriggerActionToNumber=a.sourceTriggerActionToJSON=a.sourceTriggerActionFromJSON=a.SourceTriggerAction=a.s3ACLToNumber=a.s3ACLToJSON=a.s3ACLFromJSON=a.S3ACL=a.projectBroadcastPhaseToNumber=a.projectBroadcastPhaseToJSON=a.projectBroadcastPhaseFromJSON=a.ProjectBroadcastPhase=a.videoCodecRateControlModeToNumber=a.videoCodecRateControlModeToJSON=a.videoCodecRateControlModeFromJSON=a.VideoCodecRateControlMode=a.audioCodecToNumber=a.audioCodecToJSON=a.audioCodecFromJSON=a.AudioCodec=a.videoCodecProfileToNumber=a.videoCodecProfileToJSON=a.videoCodecProfileFromJSON=a.VideoCodecProfile=a.videoCodecToNumber=a.videoCodecToJSON=a.videoCodecFromJSON=a.VideoCodec=a.renderingQualityToNumber=a.renderingQualityToJSON=a.renderingQualityFromJSON=a.RenderingQuality=a.audioChannelLayoutToNumber=a.audioChannelLayoutToJSON=a.audioChannelLayoutFromJSON=a.AudioChannelLayout=a.videoColorSpaceToNumber=a.videoColorSpaceToJSON=a.videoColorSpaceFromJSON=a.VideoColorSpace=a.imageFormatToNumber=a.imageFormatToJSON=a.imageFormatFromJSON=a.ImageFormat=a.protobufPackage=void 0,a.HostedWebRtc=a.Composition=a.ExternalComposition=a.SceneComposition=a.StudioSdkComposition=a.PreviewAddress=a.PreviewWebRtcAddress=a.PreviewHlsPullAddress=a.ProjectTrigger=a.WebRtcTrigger=a.SourceTrigger=a.DestinationAddress=a.S3StorageAddress=a.ObjectStoragePackaging=a.HlsPackaging=a.HlsLifecycle=a.HlsLifecycleVod=a.HlsLifecycleLive=a.DestinationAgoraPushAddress=a.DestinationRtmpPushAddress=a.SourceAddress=a.RtmpPullAddress=a.SrtPushAddress=a.SourceRtmpPushAddress=a.Encoding=a.AudioEncoding=a.VideoEncoding=a.VideoCodecRateControl=a.Rendering=a.AudioRendering=a.VideoRendering=a.eventTypeToNumber=a.eventTypeToJSON=a.eventTypeFromJSON=a.EventType=a.eventSubTypeToNumber=a.eventSubTypeToJSON=a.eventSubTypeFromJSON=a.EventSubType=a.connectStateToNumber=a.connectStateToJSON=a.connectStateFromJSON=a.ConnectState=a.projectBroadcastErrorToNumber=a.projectBroadcastErrorToJSON=a.projectBroadcastErrorFromJSON=a.ProjectBroadcastError=a.roleToNumber=a.roleToJSON=a.roleFromJSON=void 0,a.DeleteSourceResponse=a.DeleteSourceRequest=a.CreateSourceResponse=a.CreateSourceRequest=a.UpdateDestinationResponse=a.UpdateDestinationRequest=a.DeleteDestinationResponse=a.DeleteDestinationRequest=a.GetDestinationResponse=a.GetDestinationRequest=a.CreateDestinationResponse=a.CreateDestinationRequest=a.StopProjectWebRtcResponse=a.StopProjectWebRtcRequest=a.StartProjectWebRtcResponse=a.StartProjectWebRtcRequest=a.GetProjectBroadcastStatusResponse=a.GetProjectBroadcastStatusRequest=a.GetProjectBroadcastSnapshotResponse=a.GetProjectBroadcastSnapshotRequest=a.GetProjectResponse=a.GetProjectRequest=a.StopProjectBroadcastResponse=a.StopProjectBroadcastRequest=a.StartProjectBroadcastResponse=a.StartProjectBroadcastRequest=a.DeleteProjectResponse=a.DeleteProjectRequest=a.UpdateProjectResponse=a.UpdateProjectRequest=a.CreateProjectResponse=a.CreateProjectRequest=a.GetCollectionsResponse=a.GetCollectionsRequest=a.DeleteCollectionResponse=a.DeleteCollectionRequest=a.UpdateCollectionResponse=a.UpdateCollectionRequest=a.GetCollectionResponse=a.GetCollectionRequest=a.CreateCollectionResponse=a.CreateCollectionRequest=a.Collection=a.Project=a.Destination=a.Source=a.ProjectBroadcastStatus=a.LatLong=a.WebRtcAccess=a.WebRtc=void 0,a.DestinationEvent=a.CollectionEvent=a.SourceStateEvent=a.SourceRemoveEvent=a.SourceAddEvent=a.SourceUpdateEvent=a.SourceDeleteEvent=a.SourceCreateEvent=a.CollectionUpdateEvent=a.CollectionDeleteEvent=a.CollectionCreateEvent=a.ProjectBroadcastStateEvent=a.ProjectUpdateEvent=a.ProjectDeleteEvent=a.ProjectCreateEvent=a.DestinationStateEvent=a.DestinationUpdateEvent=a.DestinationDeleteEvent=a.DestinationCreateEvent=a.GetTestTokenResponse=a.GetTestTokenRequest=a.GetJsonWebKeySetResponse=a.GetJsonWebKeySetRequest=a.JsonWebKey=a.GuestCodeRedirectResponse=a.GuestCodeRedirectRequest=a.GuestCode=a.RefreshAccessTokenResponse=a.RefreshAccessTokenRequest=a.CreateWebRtcAccessTokenResponse=a.CreateWebRtcAccessTokenRequest=a.CreateGuestAccessTokenResponse=a.CreateGuestAccessTokenRequest=a.GuestAccessToken=a.GuestAccessTokenExchange=a.GuestAccessTokenDirect=a.CreateAccessTokenResponse=a.CreateAccessTokenRequest=a.RemoveSourceFromProjectResponse=a.RemoveSourceFromProjectRequest=a.UpdateSourceResponse=a.UpdateSourceRequest=a.GetSourcesResponse=a.GetSourcesRequest=a.GetSourceResponse=a.GetSourceRequest=a.UpdateSourceInProjectResponse=a.UpdateSourceInProjectRequest=a.AddSourceToProjectResponse=a.AddSourceToProjectRequest=void 0,a.PublicAuthenticationServiceDefinition=a.PublicAuthenticationServiceClientImpl=a.AuthenticationServiceDefinition=a.AuthenticationServiceClientImpl=a.BackendAuthenticationServiceDefinition=a.BackendAuthenticationServiceClientImpl=a.SourceServiceDefinition=a.SourceServiceClientImpl=a.DestinationServiceDefinition=a.DestinationServiceClientImpl=a.ProjectServiceDefinition=a.ProjectServiceClientImpl=a.CollectionServiceDefinition=a.CollectionServiceClientImpl=a.LiveEvent=a.SourceEvent=a.ProjectEvent=void 0;const b=h(umd.exports),_=c(minimal$2),$=timestamp$1,_e=struct$1,tt=field_mask;a.protobufPackage="live.v21";var rt;(function(g){g.IMAGE_FORMAT_UNSPECIFIED="IMAGE_FORMAT_UNSPECIFIED",g.IMAGE_FORMAT_JPEG="IMAGE_FORMAT_JPEG"})(rt=a.ImageFormat||(a.ImageFormat={}));function ot(g){switch(g){case 0:case"IMAGE_FORMAT_UNSPECIFIED":return rt.IMAGE_FORMAT_UNSPECIFIED;case 1:case"IMAGE_FORMAT_JPEG":return rt.IMAGE_FORMAT_JPEG;default:throw new Sn.Error("Unrecognized enum value "+g+" for enum ImageFormat")}}a.imageFormatFromJSON=ot;function it(g){switch(g){case rt.IMAGE_FORMAT_UNSPECIFIED:return"IMAGE_FORMAT_UNSPECIFIED";case rt.IMAGE_FORMAT_JPEG:return"IMAGE_FORMAT_JPEG";default:return"UNKNOWN"}}a.imageFormatToJSON=it;function st(g){switch(g){case rt.IMAGE_FORMAT_UNSPECIFIED:return 0;case rt.IMAGE_FORMAT_JPEG:return 1;default:return 0}}a.imageFormatToNumber=st;var lt;(function(g){g.VIDEO_COLOR_SPACE_UNSPECIFIED="VIDEO_COLOR_SPACE_UNSPECIFIED",g.VIDEO_COLOR_SPACE_YUV420="VIDEO_COLOR_SPACE_YUV420"})(lt=a.VideoColorSpace||(a.VideoColorSpace={}));function dt(g){switch(g){case 0:case"VIDEO_COLOR_SPACE_UNSPECIFIED":return lt.VIDEO_COLOR_SPACE_UNSPECIFIED;case 1:case"VIDEO_COLOR_SPACE_YUV420":return lt.VIDEO_COLOR_SPACE_YUV420;default:throw new Sn.Error("Unrecognized enum value "+g+" for enum VideoColorSpace")}}a.videoColorSpaceFromJSON=dt;function ut(g){switch(g){case lt.VIDEO_COLOR_SPACE_UNSPECIFIED:return"VIDEO_COLOR_SPACE_UNSPECIFIED";case lt.VIDEO_COLOR_SPACE_YUV420:return"VIDEO_COLOR_SPACE_YUV420";default:return"UNKNOWN"}}a.videoColorSpaceToJSON=ut;function ht(g){switch(g){case lt.VIDEO_COLOR_SPACE_UNSPECIFIED:return 0;case lt.VIDEO_COLOR_SPACE_YUV420:return 1;default:return 0}}a.videoColorSpaceToNumber=ht;var nt;(function(g){g.AUDIO_CHANNEL_LAYOUT_UNSPECIFIED="AUDIO_CHANNEL_LAYOUT_UNSPECIFIED",g.AUDIO_CHANNEL_LAYOUT_STEREO="AUDIO_CHANNEL_LAYOUT_STEREO"})(nt=a.AudioChannelLayout||(a.AudioChannelLayout={}));function ct(g){switch(g){case 0:case"AUDIO_CHANNEL_LAYOUT_UNSPECIFIED":return nt.AUDIO_CHANNEL_LAYOUT_UNSPECIFIED;case 1:case"AUDIO_CHANNEL_LAYOUT_STEREO":return nt.AUDIO_CHANNEL_LAYOUT_STEREO;default:throw new Sn.Error("Unrecognized enum value "+g+" for enum AudioChannelLayout")}}a.audioChannelLayoutFromJSON=ct;function mt(g){switch(g){case nt.AUDIO_CHANNEL_LAYOUT_UNSPECIFIED:return"AUDIO_CHANNEL_LAYOUT_UNSPECIFIED";case nt.AUDIO_CHANNEL_LAYOUT_STEREO:return"AUDIO_CHANNEL_LAYOUT_STEREO";default:return"UNKNOWN"}}a.audioChannelLayoutToJSON=mt;function kt(g){switch(g){case nt.AUDIO_CHANNEL_LAYOUT_UNSPECIFIED:return 0;case nt.AUDIO_CHANNEL_LAYOUT_STEREO:return 1;default:return 0}}a.audioChannelLayoutToNumber=kt;var Tt;(function(g){g.RENDERING_QUALITY_UNSPECIFIED="RENDERING_QUALITY_UNSPECIFIED",g.RENDERING_QUALITY_STANDARD="RENDERING_QUALITY_STANDARD",g.RENDERING_QUALITY_HIGH="RENDERING_QUALITY_HIGH"})(Tt=a.RenderingQuality||(a.RenderingQuality={}));function Pt(g){switch(g){case 0:case"RENDERING_QUALITY_UNSPECIFIED":return Tt.RENDERING_QUALITY_UNSPECIFIED;case 1:case"RENDERING_QUALITY_STANDARD":return Tt.RENDERING_QUALITY_STANDARD;case 2:case"RENDERING_QUALITY_HIGH":return Tt.RENDERING_QUALITY_HIGH;default:throw new Sn.Error("Unrecognized enum value "+g+" for enum RenderingQuality")}}a.renderingQualityFromJSON=Pt;function At(g){switch(g){case Tt.RENDERING_QUALITY_UNSPECIFIED:return"RENDERING_QUALITY_UNSPECIFIED";case Tt.RENDERING_QUALITY_STANDARD:return"RENDERING_QUALITY_STANDARD";case Tt.RENDERING_QUALITY_HIGH:return"RENDERING_QUALITY_HIGH";default:return"UNKNOWN"}}a.renderingQualityToJSON=At;function gt(g){switch(g){case Tt.RENDERING_QUALITY_UNSPECIFIED:return 0;case Tt.RENDERING_QUALITY_STANDARD:return 1;case Tt.RENDERING_QUALITY_HIGH:return 2;default:return 0}}a.renderingQualityToNumber=gt;var Ct;(function(g){g.VIDEO_CODEC_UNSPECIFIED="VIDEO_CODEC_UNSPECIFIED",g.VIDEO_CODEC_H264="VIDEO_CODEC_H264"})(Ct=a.VideoCodec||(a.VideoCodec={}));function Nt(g){switch(g){case 0:case"VIDEO_CODEC_UNSPECIFIED":return Ct.VIDEO_CODEC_UNSPECIFIED;case 1:case"VIDEO_CODEC_H264":return Ct.VIDEO_CODEC_H264;default:throw new Sn.Error("Unrecognized enum value "+g+" for enum VideoCodec")}}a.videoCodecFromJSON=Nt;function vt(g){switch(g){case Ct.VIDEO_CODEC_UNSPECIFIED:return"VIDEO_CODEC_UNSPECIFIED";case Ct.VIDEO_CODEC_H264:return"VIDEO_CODEC_H264";default:return"UNKNOWN"}}a.videoCodecToJSON=vt;function Et(g){switch(g){case Ct.VIDEO_CODEC_UNSPECIFIED:return 0;case Ct.VIDEO_CODEC_H264:return 1;default:return 0}}a.videoCodecToNumber=Et;var It;(function(g){g.VIDEO_CODEC_PROFILE_UNSPECIFIED="VIDEO_CODEC_PROFILE_UNSPECIFIED",g.VIDEO_CODEC_PROFILE_BASELINE="VIDEO_CODEC_PROFILE_BASELINE",g.VIDEO_CODEC_PROFILE_MAIN="VIDEO_CODEC_PROFILE_MAIN",g.VIDEO_CODEC_PROFILE_HIGH="VIDEO_CODEC_PROFILE_HIGH"})(It=a.VideoCodecProfile||(a.VideoCodecProfile={}));function xt(g){switch(g){case 0:case"VIDEO_CODEC_PROFILE_UNSPECIFIED":return It.VIDEO_CODEC_PROFILE_UNSPECIFIED;case 2:case"VIDEO_CODEC_PROFILE_BASELINE":return It.VIDEO_CODEC_PROFILE_BASELINE;case 3:case"VIDEO_CODEC_PROFILE_MAIN":return It.VIDEO_CODEC_PROFILE_MAIN;case 4:case"VIDEO_CODEC_PROFILE_HIGH":return It.VIDEO_CODEC_PROFILE_HIGH;default:throw new Sn.Error("Unrecognized enum value "+g+" for enum VideoCodecProfile")}}a.videoCodecProfileFromJSON=xt;function Dt(g){switch(g){case It.VIDEO_CODEC_PROFILE_UNSPECIFIED:return"VIDEO_CODEC_PROFILE_UNSPECIFIED";case It.VIDEO_CODEC_PROFILE_BASELINE:return"VIDEO_CODEC_PROFILE_BASELINE";case It.VIDEO_CODEC_PROFILE_MAIN:return"VIDEO_CODEC_PROFILE_MAIN";case It.VIDEO_CODEC_PROFILE_HIGH:return"VIDEO_CODEC_PROFILE_HIGH";default:return"UNKNOWN"}}a.videoCodecProfileToJSON=Dt;function Ot(g){switch(g){case It.VIDEO_CODEC_PROFILE_UNSPECIFIED:return 0;case It.VIDEO_CODEC_PROFILE_BASELINE:return 2;case It.VIDEO_CODEC_PROFILE_MAIN:return 3;case It.VIDEO_CODEC_PROFILE_HIGH:return 4;default:return 0}}a.videoCodecProfileToNumber=Ot;var Jt;(function(g){g.AUDIO_CODEC_UNSPECIFIED="AUDIO_CODEC_UNSPECIFIED",g.AUDIO_CODEC_AAC="AUDIO_CODEC_AAC"})(Jt=a.AudioCodec||(a.AudioCodec={}));function Yt(g){switch(g){case 0:case"AUDIO_CODEC_UNSPECIFIED":return Jt.AUDIO_CODEC_UNSPECIFIED;case 1:case"AUDIO_CODEC_AAC":return Jt.AUDIO_CODEC_AAC;default:throw new Sn.Error("Unrecognized enum value "+g+" for enum AudioCodec")}}a.audioCodecFromJSON=Yt;function Qt(g){switch(g){case Jt.AUDIO_CODEC_UNSPECIFIED:return"AUDIO_CODEC_UNSPECIFIED";case Jt.AUDIO_CODEC_AAC:return"AUDIO_CODEC_AAC";default:return"UNKNOWN"}}a.audioCodecToJSON=Qt;function Ft(g){switch(g){case Jt.AUDIO_CODEC_UNSPECIFIED:return 0;case Jt.AUDIO_CODEC_AAC:return 1;default:return 0}}a.audioCodecToNumber=Ft;var pt;(function(g){g.VIDEO_CODEC_RATE_CONTROL_MODE_UNSPECIFIED="VIDEO_CODEC_RATE_CONTROL_MODE_UNSPECIFIED",g.VIDEO_CODEC_RATE_CONTROL_MODE_CBR="VIDEO_CODEC_RATE_CONTROL_MODE_CBR"})(pt=a.VideoCodecRateControlMode||(a.VideoCodecRateControlMode={}));function _t(g){switch(g){case 0:case"VIDEO_CODEC_RATE_CONTROL_MODE_UNSPECIFIED":return pt.VIDEO_CODEC_RATE_CONTROL_MODE_UNSPECIFIED;case 1:case"VIDEO_CODEC_RATE_CONTROL_MODE_CBR":return pt.VIDEO_CODEC_RATE_CONTROL_MODE_CBR;default:throw new Sn.Error("Unrecognized enum value "+g+" for enum VideoCodecRateControlMode")}}a.videoCodecRateControlModeFromJSON=_t;function Lt(g){switch(g){case pt.VIDEO_CODEC_RATE_CONTROL_MODE_UNSPECIFIED:return"VIDEO_CODEC_RATE_CONTROL_MODE_UNSPECIFIED";case pt.VIDEO_CODEC_RATE_CONTROL_MODE_CBR:return"VIDEO_CODEC_RATE_CONTROL_MODE_CBR";default:return"UNKNOWN"}}a.videoCodecRateControlModeToJSON=Lt;function Gt(g){switch(g){case pt.VIDEO_CODEC_RATE_CONTROL_MODE_UNSPECIFIED:return 0;case pt.VIDEO_CODEC_RATE_CONTROL_MODE_CBR:return 1;default:return 0}}a.videoCodecRateControlModeToNumber=Gt;var Ut;(function(g){g.PROJECT_BROADCAST_PHASE_UNSPECIFIED="PROJECT_BROADCAST_PHASE_UNSPECIFIED",g.PROJECT_BROADCAST_PHASE_NOT_RUNNING="PROJECT_BROADCAST_PHASE_NOT_RUNNING",g.PROJECT_BROADCAST_PHASE_WAITING="PROJECT_BROADCAST_PHASE_WAITING",g.PROJECT_BROADCAST_PHASE_STARTING="PROJECT_BROADCAST_PHASE_STARTING",g.PROJECT_BROADCAST_PHASE_RUNNING="PROJECT_BROADCAST_PHASE_RUNNING",g.PROJECT_BROADCAST_PHASE_STOPPING="PROJECT_BROADCAST_PHASE_STOPPING",g.PROJECT_BROADCAST_PHASE_STOPPED="PROJECT_BROADCAST_PHASE_STOPPED",g.PROJECT_BROADCAST_PHASE_ARCHIVED="PROJECT_BROADCAST_PHASE_ARCHIVED"})(Ut=a.ProjectBroadcastPhase||(a.ProjectBroadcastPhase={}));function $t(g){switch(g){case 0:case"PROJECT_BROADCAST_PHASE_UNSPECIFIED":return Ut.PROJECT_BROADCAST_PHASE_UNSPECIFIED;case 1:case"PROJECT_BROADCAST_PHASE_NOT_RUNNING":return Ut.PROJECT_BROADCAST_PHASE_NOT_RUNNING;case 2:case"PROJECT_BROADCAST_PHASE_WAITING":return Ut.PROJECT_BROADCAST_PHASE_WAITING;case 3:case"PROJECT_BROADCAST_PHASE_STARTING":return Ut.PROJECT_BROADCAST_PHASE_STARTING;case 4:case"PROJECT_BROADCAST_PHASE_RUNNING":return Ut.PROJECT_BROADCAST_PHASE_RUNNING;case 5:case"PROJECT_BROADCAST_PHASE_STOPPING":return Ut.PROJECT_BROADCAST_PHASE_STOPPING;case 6:case"PROJECT_BROADCAST_PHASE_STOPPED":return Ut.PROJECT_BROADCAST_PHASE_STOPPED;case 7:case"PROJECT_BROADCAST_PHASE_ARCHIVED":return Ut.PROJECT_BROADCAST_PHASE_ARCHIVED;default:throw new Sn.Error("Unrecognized enum value "+g+" for enum ProjectBroadcastPhase")}}a.projectBroadcastPhaseFromJSON=$t;function qt(g){switch(g){case Ut.PROJECT_BROADCAST_PHASE_UNSPECIFIED:return"PROJECT_BROADCAST_PHASE_UNSPECIFIED";case Ut.PROJECT_BROADCAST_PHASE_NOT_RUNNING:return"PROJECT_BROADCAST_PHASE_NOT_RUNNING";case Ut.PROJECT_BROADCAST_PHASE_WAITING:return"PROJECT_BROADCAST_PHASE_WAITING";case Ut.PROJECT_BROADCAST_PHASE_STARTING:return"PROJECT_BROADCAST_PHASE_STARTING";case Ut.PROJECT_BROADCAST_PHASE_RUNNING:return"PROJECT_BROADCAST_PHASE_RUNNING";case Ut.PROJECT_BROADCAST_PHASE_STOPPING:return"PROJECT_BROADCAST_PHASE_STOPPING";case Ut.PROJECT_BROADCAST_PHASE_STOPPED:return"PROJECT_BROADCAST_PHASE_STOPPED";case Ut.PROJECT_BROADCAST_PHASE_ARCHIVED:return"PROJECT_BROADCAST_PHASE_ARCHIVED";default:return"UNKNOWN"}}a.projectBroadcastPhaseToJSON=qt;function Wt(g){switch(g){case Ut.PROJECT_BROADCAST_PHASE_UNSPECIFIED:return 0;case Ut.PROJECT_BROADCAST_PHASE_NOT_RUNNING:return 1;case Ut.PROJECT_BROADCAST_PHASE_WAITING:return 2;case Ut.PROJECT_BROADCAST_PHASE_STARTING:return 3;case Ut.PROJECT_BROADCAST_PHASE_RUNNING:return 4;case Ut.PROJECT_BROADCAST_PHASE_STOPPING:return 5;case Ut.PROJECT_BROADCAST_PHASE_STOPPED:return 6;case Ut.PROJECT_BROADCAST_PHASE_ARCHIVED:return 7;default:return 0}}a.projectBroadcastPhaseToNumber=Wt;var Ht;(function(g){g.S3ACL_UNSPECIFIED="S3ACL_UNSPECIFIED",g.S3ACL_PRIVATE="S3ACL_PRIVATE",g.S3ACL_PUBLIC_READ="S3ACL_PUBLIC_READ",g.S3ACL_PUBLIC_READ_WRITE="S3ACL_PUBLIC_READ_WRITE",g.S3ACL_AUTHENTICATED_READ="S3ACL_AUTHENTICATED_READ",g.S3ACL_BUCKET_OWNER_READ="S3ACL_BUCKET_OWNER_READ",g.S3ACL_BUCKET_OWNER_FULL_CONTROL="S3ACL_BUCKET_OWNER_FULL_CONTROL"})(Ht=a.S3ACL||(a.S3ACL={}));function vn(g){switch(g){case 0:case"S3ACL_UNSPECIFIED":return Ht.S3ACL_UNSPECIFIED;case 1:case"S3ACL_PRIVATE":return Ht.S3ACL_PRIVATE;case 2:case"S3ACL_PUBLIC_READ":return Ht.S3ACL_PUBLIC_READ;case 3:case"S3ACL_PUBLIC_READ_WRITE":return Ht.S3ACL_PUBLIC_READ_WRITE;case 4:case"S3ACL_AUTHENTICATED_READ":return Ht.S3ACL_AUTHENTICATED_READ;case 5:case"S3ACL_BUCKET_OWNER_READ":return Ht.S3ACL_BUCKET_OWNER_READ;case 6:case"S3ACL_BUCKET_OWNER_FULL_CONTROL":return Ht.S3ACL_BUCKET_OWNER_FULL_CONTROL;default:throw new Sn.Error("Unrecognized enum value "+g+" for enum S3ACL")}}a.s3ACLFromJSON=vn;function ln(g){switch(g){case Ht.S3ACL_UNSPECIFIED:return"S3ACL_UNSPECIFIED";case Ht.S3ACL_PRIVATE:return"S3ACL_PRIVATE";case Ht.S3ACL_PUBLIC_READ:return"S3ACL_PUBLIC_READ";case Ht.S3ACL_PUBLIC_READ_WRITE:return"S3ACL_PUBLIC_READ_WRITE";case Ht.S3ACL_AUTHENTICATED_READ:return"S3ACL_AUTHENTICATED_READ";case Ht.S3ACL_BUCKET_OWNER_READ:return"S3ACL_BUCKET_OWNER_READ";case Ht.S3ACL_BUCKET_OWNER_FULL_CONTROL:return"S3ACL_BUCKET_OWNER_FULL_CONTROL";default:return"UNKNOWN"}}a.s3ACLToJSON=ln;function In(g){switch(g){case Ht.S3ACL_UNSPECIFIED:return 0;case Ht.S3ACL_PRIVATE:return 1;case Ht.S3ACL_PUBLIC_READ:return 2;case Ht.S3ACL_PUBLIC_READ_WRITE:return 3;case Ht.S3ACL_AUTHENTICATED_READ:return 4;case Ht.S3ACL_BUCKET_OWNER_READ:return 5;case Ht.S3ACL_BUCKET_OWNER_FULL_CONTROL:return 6;default:return 0}}a.s3ACLToNumber=In;var dn;(function(g){g.SOURCE_TRIGGER_ACTION_UNSPECIFIED="SOURCE_TRIGGER_ACTION_UNSPECIFIED",g.SOURCE_TRIGGER_ACTION_IGNORE="SOURCE_TRIGGER_ACTION_IGNORE",g.SOURCE_TRIGGER_ACTION_OR="SOURCE_TRIGGER_ACTION_OR"})(dn=a.SourceTriggerAction||(a.SourceTriggerAction={}));function gn(g){switch(g){case 0:case"SOURCE_TRIGGER_ACTION_UNSPECIFIED":return dn.SOURCE_TRIGGER_ACTION_UNSPECIFIED;case 1:case"SOURCE_TRIGGER_ACTION_IGNORE":return dn.SOURCE_TRIGGER_ACTION_IGNORE;case 3:case"SOURCE_TRIGGER_ACTION_OR":return dn.SOURCE_TRIGGER_ACTION_OR;default:throw new Sn.Error("Unrecognized enum value "+g+" for enum SourceTriggerAction")}}a.sourceTriggerActionFromJSON=gn;function kn(g){switch(g){case dn.SOURCE_TRIGGER_ACTION_UNSPECIFIED:return"SOURCE_TRIGGER_ACTION_UNSPECIFIED";case dn.SOURCE_TRIGGER_ACTION_IGNORE:return"SOURCE_TRIGGER_ACTION_IGNORE";case dn.SOURCE_TRIGGER_ACTION_OR:return"SOURCE_TRIGGER_ACTION_OR";default:return"UNKNOWN"}}a.sourceTriggerActionToJSON=kn;function On(g){switch(g){case dn.SOURCE_TRIGGER_ACTION_UNSPECIFIED:return 0;case dn.SOURCE_TRIGGER_ACTION_IGNORE:return 1;case dn.SOURCE_TRIGGER_ACTION_OR:return 3;default:return 0}}a.sourceTriggerActionToNumber=On;var Zt;(function(g){g.REGION_UNSPECIFIED="REGION_UNSPECIFIED",g.REGION_US_EAST_1="REGION_US_EAST_1",g.REGION_US_EAST_2="REGION_US_EAST_2",g.REGION_US_WEST_1="REGION_US_WEST_1",g.REGION_US_WEST_2="REGION_US_WEST_2",g.REGION_US_CENTRAL_1="REGION_US_CENTRAL_1",g.REGION_AP_SOUTHEAST_1="REGION_AP_SOUTHEAST_1",g.REGION_CA_EAST_1="REGION_CA_EAST_1",g.REGION_EU_CENTRAL_1="REGION_EU_CENTRAL_1",g.REGION_EU_WEST_1="REGION_EU_WEST_1"})(Zt=a.Region||(a.Region={}));function wn(g){switch(g){case 0:case"REGION_UNSPECIFIED":return Zt.REGION_UNSPECIFIED;case 1:case"REGION_US_EAST_1":return Zt.REGION_US_EAST_1;case 2:case"REGION_US_EAST_2":return Zt.REGION_US_EAST_2;case 3:case"REGION_US_WEST_1":return Zt.REGION_US_WEST_1;case 4:case"REGION_US_WEST_2":return Zt.REGION_US_WEST_2;case 5:case"REGION_US_CENTRAL_1":return Zt.REGION_US_CENTRAL_1;case 10:case"REGION_AP_SOUTHEAST_1":return Zt.REGION_AP_SOUTHEAST_1;case 20:case"REGION_CA_EAST_1":return Zt.REGION_CA_EAST_1;case 30:case"REGION_EU_CENTRAL_1":return Zt.REGION_EU_CENTRAL_1;case 31:case"REGION_EU_WEST_1":return Zt.REGION_EU_WEST_1;default:throw new Sn.Error("Unrecognized enum value "+g+" for enum Region")}}a.regionFromJSON=wn;function jt(g){switch(g){case Zt.REGION_UNSPECIFIED:return"REGION_UNSPECIFIED";case Zt.REGION_US_EAST_1:return"REGION_US_EAST_1";case Zt.REGION_US_EAST_2:return"REGION_US_EAST_2";case Zt.REGION_US_WEST_1:return"REGION_US_WEST_1";case Zt.REGION_US_WEST_2:return"REGION_US_WEST_2";case Zt.REGION_US_CENTRAL_1:return"REGION_US_CENTRAL_1";case Zt.REGION_AP_SOUTHEAST_1:return"REGION_AP_SOUTHEAST_1";case Zt.REGION_CA_EAST_1:return"REGION_CA_EAST_1";case Zt.REGION_EU_CENTRAL_1:return"REGION_EU_CENTRAL_1";case Zt.REGION_EU_WEST_1:return"REGION_EU_WEST_1";default:return"UNKNOWN"}}a.regionToJSON=jt;function Pn(g){switch(g){case Zt.REGION_UNSPECIFIED:return 0;case Zt.REGION_US_EAST_1:return 1;case Zt.REGION_US_EAST_2:return 2;case Zt.REGION_US_WEST_1:return 3;case Zt.REGION_US_WEST_2:return 4;case Zt.REGION_US_CENTRAL_1:return 5;case Zt.REGION_AP_SOUTHEAST_1:return 10;case Zt.REGION_CA_EAST_1:return 20;case Zt.REGION_EU_CENTRAL_1:return 30;case Zt.REGION_EU_WEST_1:return 31;default:return 0}}a.regionToNumber=Pn;var Kt;(function(g){g.ROLE_UNSPECIFIED="ROLE_UNSPECIFIED",g.ROLE_HOST="ROLE_HOST",g.ROLE_COHOST="ROLE_COHOST",g.ROLE_CONTRIBUTOR="ROLE_CONTRIBUTOR",g.ROLE_GUEST="ROLE_GUEST",g.ROLE_VIEWER="ROLE_VIEWER",g.ROLE_RENDERER="ROLE_RENDERER",g.ROLE_PLATFORM="ROLE_PLATFORM",g.ROLE_IMPERSONATE="ROLE_IMPERSONATE"})(Kt=a.Role||(a.Role={}));function Xt(g){switch(g){case 0:case"ROLE_UNSPECIFIED":return Kt.ROLE_UNSPECIFIED;case 1:case"ROLE_HOST":return Kt.ROLE_HOST;case 2:case"ROLE_COHOST":return Kt.ROLE_COHOST;case 3:case"ROLE_CONTRIBUTOR":return Kt.ROLE_CONTRIBUTOR;case 4:case"ROLE_GUEST":return Kt.ROLE_GUEST;case 5:case"ROLE_VIEWER":return Kt.ROLE_VIEWER;case 6:case"ROLE_RENDERER":return Kt.ROLE_RENDERER;case 7:case"ROLE_PLATFORM":return Kt.ROLE_PLATFORM;case 8:case"ROLE_IMPERSONATE":return Kt.ROLE_IMPERSONATE;default:throw new Sn.Error("Unrecognized enum value "+g+" for enum Role")}}a.roleFromJSON=Xt;function rn(g){switch(g){case Kt.ROLE_UNSPECIFIED:return"ROLE_UNSPECIFIED";case Kt.ROLE_HOST:return"ROLE_HOST";case Kt.ROLE_COHOST:return"ROLE_COHOST";case Kt.ROLE_CONTRIBUTOR:return"ROLE_CONTRIBUTOR";case Kt.ROLE_GUEST:return"ROLE_GUEST";case Kt.ROLE_VIEWER:return"ROLE_VIEWER";case Kt.ROLE_RENDERER:return"ROLE_RENDERER";case Kt.ROLE_PLATFORM:return"ROLE_PLATFORM";case Kt.ROLE_IMPERSONATE:return"ROLE_IMPERSONATE";default:return"UNKNOWN"}}a.roleToJSON=rn;function en(g){switch(g){case Kt.ROLE_UNSPECIFIED:return 0;case Kt.ROLE_HOST:return 1;case Kt.ROLE_COHOST:return 2;case Kt.ROLE_CONTRIBUTOR:return 3;case Kt.ROLE_GUEST:return 4;case Kt.ROLE_VIEWER:return 5;case Kt.ROLE_RENDERER:return 6;case Kt.ROLE_PLATFORM:return 7;case Kt.ROLE_IMPERSONATE:return 8;default:return 0}}a.roleToNumber=en;var an;(function(g){g.PROJECT_BROADCAST_ERROR_UNSPECIFIED="PROJECT_BROADCAST_ERROR_UNSPECIFIED",g.PROJECT_BROADCAST_ERROR_INTERNAL="PROJECT_BROADCAST_ERROR_INTERNAL",g.PROJECT_BROADCAST_ERROR_DURATION_EXCEEDED="PROJECT_BROADCAST_ERROR_DURATION_EXCEEDED"})(an=a.ProjectBroadcastError||(a.ProjectBroadcastError={}));function tn(g){switch(g){case 0:case"PROJECT_BROADCAST_ERROR_UNSPECIFIED":return an.PROJECT_BROADCAST_ERROR_UNSPECIFIED;case 1:case"PROJECT_BROADCAST_ERROR_INTERNAL":return an.PROJECT_BROADCAST_ERROR_INTERNAL;case 2:case"PROJECT_BROADCAST_ERROR_DURATION_EXCEEDED":return an.PROJECT_BROADCAST_ERROR_DURATION_EXCEEDED;default:throw new Sn.Error("Unrecognized enum value "+g+" for enum ProjectBroadcastError")}}a.projectBroadcastErrorFromJSON=tn;function Mn(g){switch(g){case an.PROJECT_BROADCAST_ERROR_UNSPECIFIED:return"PROJECT_BROADCAST_ERROR_UNSPECIFIED";case an.PROJECT_BROADCAST_ERROR_INTERNAL:return"PROJECT_BROADCAST_ERROR_INTERNAL";case an.PROJECT_BROADCAST_ERROR_DURATION_EXCEEDED:return"PROJECT_BROADCAST_ERROR_DURATION_EXCEEDED";default:return"UNKNOWN"}}a.projectBroadcastErrorToJSON=Mn;function un(g){switch(g){case an.PROJECT_BROADCAST_ERROR_UNSPECIFIED:return 0;case an.PROJECT_BROADCAST_ERROR_INTERNAL:return 1;case an.PROJECT_BROADCAST_ERROR_DURATION_EXCEEDED:return 2;default:return 0}}a.projectBroadcastErrorToNumber=un;var Cn;(function(g){g.CONNECT_STATE_UNSPECIFIED="CONNECT_STATE_UNSPECIFIED",g.CONNECT_STATE_CONNECTED="CONNECT_STATE_CONNECTED",g.CONNECT_STATE_DISCONNECTED="CONNECT_STATE_DISCONNECTED"})(Cn=a.ConnectState||(a.ConnectState={}));function Rn(g){switch(g){case 0:case"CONNECT_STATE_UNSPECIFIED":return Cn.CONNECT_STATE_UNSPECIFIED;case 1:case"CONNECT_STATE_CONNECTED":return Cn.CONNECT_STATE_CONNECTED;case 2:case"CONNECT_STATE_DISCONNECTED":return Cn.CONNECT_STATE_DISCONNECTED;default:throw new Sn.Error("Unrecognized enum value "+g+" for enum ConnectState")}}a.connectStateFromJSON=Rn;function Bn(g){switch(g){case Cn.CONNECT_STATE_UNSPECIFIED:return"CONNECT_STATE_UNSPECIFIED";case Cn.CONNECT_STATE_CONNECTED:return"CONNECT_STATE_CONNECTED";case Cn.CONNECT_STATE_DISCONNECTED:return"CONNECT_STATE_DISCONNECTED";default:return"UNKNOWN"}}a.connectStateToJSON=Bn;function Vn(g){switch(g){case Cn.CONNECT_STATE_UNSPECIFIED:return 0;case Cn.CONNECT_STATE_CONNECTED:return 1;case Cn.CONNECT_STATE_DISCONNECTED:return 2;default:return 0}}a.connectStateToNumber=Vn;var yn;(function(g){g.EVENT_SUB_TYPE_UNSPECIFIED="EVENT_SUB_TYPE_UNSPECIFIED",g.EVENT_SUB_TYPE_CREATE="EVENT_SUB_TYPE_CREATE",g.EVENT_SUB_TYPE_UPDATE="EVENT_SUB_TYPE_UPDATE",g.EVENT_SUB_TYPE_DELETE="EVENT_SUB_TYPE_DELETE",g.EVENT_SUB_TYPE_ADD="EVENT_SUB_TYPE_ADD",g.EVENT_SUB_TYPE_REMOVE="EVENT_SUB_TYPE_REMOVE",g.EVENT_SUB_TYPE_STATE="EVENT_SUB_TYPE_STATE"})(yn=a.EventSubType||(a.EventSubType={}));function qn(g){switch(g){case 0:case"EVENT_SUB_TYPE_UNSPECIFIED":return yn.EVENT_SUB_TYPE_UNSPECIFIED;case 1:case"EVENT_SUB_TYPE_CREATE":return yn.EVENT_SUB_TYPE_CREATE;case 2:case"EVENT_SUB_TYPE_UPDATE":return yn.EVENT_SUB_TYPE_UPDATE;case 3:case"EVENT_SUB_TYPE_DELETE":return yn.EVENT_SUB_TYPE_DELETE;case 4:case"EVENT_SUB_TYPE_ADD":return yn.EVENT_SUB_TYPE_ADD;case 5:case"EVENT_SUB_TYPE_REMOVE":return yn.EVENT_SUB_TYPE_REMOVE;case 6:case"EVENT_SUB_TYPE_STATE":return yn.EVENT_SUB_TYPE_STATE;default:throw new Sn.Error("Unrecognized enum value "+g+" for enum EventSubType")}}a.eventSubTypeFromJSON=qn;function Un(g){switch(g){case yn.EVENT_SUB_TYPE_UNSPECIFIED:return"EVENT_SUB_TYPE_UNSPECIFIED";case yn.EVENT_SUB_TYPE_CREATE:return"EVENT_SUB_TYPE_CREATE";case yn.EVENT_SUB_TYPE_UPDATE:return"EVENT_SUB_TYPE_UPDATE";case yn.EVENT_SUB_TYPE_DELETE:return"EVENT_SUB_TYPE_DELETE";case yn.EVENT_SUB_TYPE_ADD:return"EVENT_SUB_TYPE_ADD";case yn.EVENT_SUB_TYPE_REMOVE:return"EVENT_SUB_TYPE_REMOVE";case yn.EVENT_SUB_TYPE_STATE:return"EVENT_SUB_TYPE_STATE";default:return"UNKNOWN"}}a.eventSubTypeToJSON=Un;function Jn(g){switch(g){case yn.EVENT_SUB_TYPE_UNSPECIFIED:return 0;case yn.EVENT_SUB_TYPE_CREATE:return 1;case yn.EVENT_SUB_TYPE_UPDATE:return 2;case yn.EVENT_SUB_TYPE_DELETE:return 3;case yn.EVENT_SUB_TYPE_ADD:return 4;case yn.EVENT_SUB_TYPE_REMOVE:return 5;case yn.EVENT_SUB_TYPE_STATE:return 6;default:return 0}}a.eventSubTypeToNumber=Jn;var Vt;(function(g){g.EVENT_TYPE_UNSPECIFIED="EVENT_TYPE_UNSPECIFIED",g.EVENT_TYPE_COLLECTION="EVENT_TYPE_COLLECTION",g.EVENT_TYPE_PROJECT="EVENT_TYPE_PROJECT",g.EVENT_TYPE_SOURCE="EVENT_TYPE_SOURCE",g.EVENT_TYPE_DESTINATION="EVENT_TYPE_DESTINATION"})(Vt=a.EventType||(a.EventType={}));function et(g){switch(g){case 0:case"EVENT_TYPE_UNSPECIFIED":return Vt.EVENT_TYPE_UNSPECIFIED;case 1:case"EVENT_TYPE_COLLECTION":return Vt.EVENT_TYPE_COLLECTION;case 2:case"EVENT_TYPE_PROJECT":return Vt.EVENT_TYPE_PROJECT;case 4:case"EVENT_TYPE_SOURCE":return Vt.EVENT_TYPE_SOURCE;case 5:case"EVENT_TYPE_DESTINATION":return Vt.EVENT_TYPE_DESTINATION;default:throw new Sn.Error("Unrecognized enum value "+g+" for enum EventType")}}a.eventTypeFromJSON=et;function ft(g){switch(g){case Vt.EVENT_TYPE_UNSPECIFIED:return"EVENT_TYPE_UNSPECIFIED";case Vt.EVENT_TYPE_COLLECTION:return"EVENT_TYPE_COLLECTION";case Vt.EVENT_TYPE_PROJECT:return"EVENT_TYPE_PROJECT";case Vt.EVENT_TYPE_SOURCE:return"EVENT_TYPE_SOURCE";case Vt.EVENT_TYPE_DESTINATION:return"EVENT_TYPE_DESTINATION";default:return"UNKNOWN"}}a.eventTypeToJSON=ft;function yt(g){switch(g){case Vt.EVENT_TYPE_UNSPECIFIED:return 0;case Vt.EVENT_TYPE_COLLECTION:return 1;case Vt.EVENT_TYPE_PROJECT:return 2;case Vt.EVENT_TYPE_SOURCE:return 4;case Vt.EVENT_TYPE_DESTINATION:return 5;default:return 0}}a.eventTypeToNumber=yt;function Mt(){return{height:void 0,width:void 0,framerate:void 0,colorSpace:void 0}}a.VideoRendering={encode(g,k=_.Writer.create()){return g.height!==void 0&&k.uint32(8).uint32(g.height),g.width!==void 0&&k.uint32(16).uint32(g.width),g.framerate!==void 0&&k.uint32(29).float(g.framerate),g.colorSpace!==void 0&&k.uint32(32).int32(ht(g.colorSpace)),k},decode(g,k){const j=g instanceof _.Reader?g:new _.Reader(g);let St=k===void 0?j.len:j.pos+k;const at=Mt();for(;j.pos<St;){const bt=j.uint32();switch(bt>>>3){case 1:at.height=j.uint32();break;case 2:at.width=j.uint32();break;case 3:at.framerate=j.float();break;case 4:at.colorSpace=dt(j.int32());break;default:j.skipType(bt&7);break}}return at},fromJSON(g){return{height:Rt(g.height)?Number(g.height):void 0,width:Rt(g.width)?Number(g.width):void 0,framerate:Rt(g.framerate)?Number(g.framerate):void 0,colorSpace:Rt(g.colorSpace)?dt(g.colorSpace):void 0}},toJSON(g){const k={};return g.height!==void 0&&(k.height=Math.round(g.height)),g.width!==void 0&&(k.width=Math.round(g.width)),g.framerate!==void 0&&(k.framerate=g.framerate),g.colorSpace!==void 0&&(k.colorSpace=g.colorSpace!==void 0?ut(g.colorSpace):void 0),k},fromPartial(g){var k,j,St,at;const bt=Mt();return bt.height=(k=g.height)!==null&&k!==void 0?k:void 0,bt.width=(j=g.width)!==null&&j!==void 0?j:void 0,bt.framerate=(St=g.framerate)!==null&&St!==void 0?St:void 0,bt.colorSpace=(at=g.colorSpace)!==null&&at!==void 0?at:void 0,bt}};function wt(){return{channelLayout:void 0}}a.AudioRendering={encode(g,k=_.Writer.create()){return g.channelLayout!==void 0&&k.uint32(8).int32(kt(g.channelLayout)),k},decode(g,k){const j=g instanceof _.Reader?g:new _.Reader(g);let St=k===void 0?j.len:j.pos+k;const at=wt();for(;j.pos<St;){const bt=j.uint32();switch(bt>>>3){case 1:at.channelLayout=ct(j.int32());break;default:j.skipType(bt&7);break}}return at},fromJSON(g){return{channelLayout:Rt(g.channelLayout)?ct(g.channelLayout):void 0}},toJSON(g){const k={};return g.channelLayout!==void 0&&(k.channelLayout=g.channelLayout!==void 0?mt(g.channelLayout):void 0),k},fromPartial(g){var k;const j=wt();return j.channelLayout=(k=g.channelLayout)!==null&&k!==void 0?k:void 0,j}};function Bt(){return{video:void 0,audio:void 0,quality:void 0,targetLatency:void 0,complexity:void 0}}a.Rendering={encode(g,k=_.Writer.create()){return g.video!==void 0&&a.VideoRendering.encode(g.video,k.uint32(10).fork()).ldelim(),g.audio!==void 0&&a.AudioRendering.encode(g.audio,k.uint32(18).fork()).ldelim(),g.quality!==void 0&&k.uint32(24).int32(gt(g.quality)),g.targetLatency!==void 0&&k.uint32(32).uint32(g.targetLatency),g.complexity!==void 0&&k.uint32(40).int32(g.complexity),k},decode(g,k){const j=g instanceof _.Reader?g:new _.Reader(g);let St=k===void 0?j.len:j.pos+k;const at=Bt();for(;j.pos<St;){const bt=j.uint32();switch(bt>>>3){case 1:at.video=a.VideoRendering.decode(j,j.uint32());break;case 2:at.audio=a.AudioRendering.decode(j,j.uint32());break;case 3:at.quality=Pt(j.int32());break;case 4:at.targetLatency=j.uint32();break;case 5:at.complexity=j.int32();break;default:j.skipType(bt&7);break}}return at},fromJSON(g){return{video:Rt(g.video)?a.VideoRendering.fromJSON(g.video):void 0,audio:Rt(g.audio)?a.AudioRendering.fromJSON(g.audio):void 0,quality:Rt(g.quality)?Pt(g.quality):void 0,targetLatency:Rt(g.targetLatency)?Number(g.targetLatency):void 0,complexity:Rt(g.complexity)?Number(g.complexity):void 0}},toJSON(g){const k={};return g.video!==void 0&&(k.video=g.video?a.VideoRendering.toJSON(g.video):void 0),g.audio!==void 0&&(k.audio=g.audio?a.AudioRendering.toJSON(g.audio):void 0),g.quality!==void 0&&(k.quality=g.quality!==void 0?At(g.quality):void 0),g.targetLatency!==void 0&&(k.targetLatency=Math.round(g.targetLatency)),g.complexity!==void 0&&(k.complexity=Math.round(g.complexity)),k},fromPartial(g){var k,j,St;const at=Bt();return at.video=g.video!==void 0&&g.video!==null?a.VideoRendering.fromPartial(g.video):void 0,at.audio=g.audio!==void 0&&g.audio!==null?a.AudioRendering.fromPartial(g.audio):void 0,at.quality=(k=g.quality)!==null&&k!==void 0?k:void 0,at.targetLatency=(j=g.targetLatency)!==null&&j!==void 0?j:void 0,at.complexity=(St=g.complexity)!==null&&St!==void 0?St:void 0,at}};function fn(){return{mode:void 0,targetBitrate:void 0,maxKeyFrameInterval:void 0}}a.VideoCodecRateControl={encode(g,k=_.Writer.create()){return g.mode!==void 0&&k.uint32(8).int32(Gt(g.mode)),g.targetBitrate!==void 0&&k.uint32(16).uint32(g.targetBitrate),g.maxKeyFrameInterval!==void 0&&k.uint32(24).uint32(g.maxKeyFrameInterval),k},decode(g,k){const j=g instanceof _.Reader?g:new _.Reader(g);let St=k===void 0?j.len:j.pos+k;const at=fn();for(;j.pos<St;){const bt=j.uint32();switch(bt>>>3){case 1:at.mode=_t(j.int32());break;case 2:at.targetBitrate=j.uint32();break;case 3:at.maxKeyFrameInterval=j.uint32();break;default:j.skipType(bt&7);break}}return at},fromJSON(g){return{mode:Rt(g.mode)?_t(g.mode):void 0,targetBitrate:Rt(g.targetBitrate)?Number(g.targetBitrate):void 0,maxKeyFrameInterval:Rt(g.maxKeyFrameInterval)?Number(g.maxKeyFrameInterval):void 0}},toJSON(g){const k={};return g.mode!==void 0&&(k.mode=g.mode!==void 0?Lt(g.mode):void 0),g.targetBitrate!==void 0&&(k.targetBitrate=Math.round(g.targetBitrate)),g.maxKeyFrameInterval!==void 0&&(k.maxKeyFrameInterval=Math.round(g.maxKeyFrameInterval)),k},fromPartial(g){var k,j,St;const at=fn();return at.mode=(k=g.mode)!==null&&k!==void 0?k:void 0,at.targetBitrate=(j=g.targetBitrate)!==null&&j!==void 0?j:void 0,at.maxKeyFrameInterval=(St=g.maxKeyFrameInterval)!==null&&St!==void 0?St:void 0,at}};function En(){return{codec:void 0,rateControl:void 0,profile:void 0}}a.VideoEncoding={encode(g,k=_.Writer.create()){return g.codec!==void 0&&k.uint32(8).int32(Et(g.codec)),g.rateControl!==void 0&&a.VideoCodecRateControl.encode(g.rateControl,k.uint32(18).fork()).ldelim(),g.profile!==void 0&&k.uint32(32).int32(Ot(g.profile)),k},decode(g,k){const j=g instanceof _.Reader?g:new _.Reader(g);let St=k===void 0?j.len:j.pos+k;const at=En();for(;j.pos<St;){const bt=j.uint32();switch(bt>>>3){case 1:at.codec=Nt(j.int32());break;case 2:at.rateControl=a.VideoCodecRateControl.decode(j,j.uint32());break;case 4:at.profile=xt(j.int32());break;default:j.skipType(bt&7);break}}return at},fromJSON(g){return{codec:Rt(g.codec)?Nt(g.codec):void 0,rateControl:Rt(g.rateControl)?a.VideoCodecRateControl.fromJSON(g.rateControl):void 0,profile:Rt(g.profile)?xt(g.profile):void 0}},toJSON(g){const k={};return g.codec!==void 0&&(k.codec=g.codec!==void 0?vt(g.codec):void 0),g.rateControl!==void 0&&(k.rateControl=g.rateControl?a.VideoCodecRateControl.toJSON(g.rateControl):void 0),g.profile!==void 0&&(k.profile=g.profile!==void 0?Dt(g.profile):void 0),k},fromPartial(g){var k,j;const St=En();return St.codec=(k=g.codec)!==null&&k!==void 0?k:void 0,St.rateControl=g.rateControl!==void 0&&g.rateControl!==null?a.VideoCodecRateControl.fromPartial(g.rateControl):void 0,St.profile=(j=g.profile)!==null&&j!==void 0?j:void 0,St}};function bn(){return{codec:void 0}}a.AudioEncoding={encode(g,k=_.Writer.create()){return g.codec!==void 0&&k.uint32(8).int32(Ft(g.codec)),k},decode(g,k){const j=g instanceof _.Reader?g:new _.Reader(g);let St=k===void 0?j.len:j.pos+k;const at=bn();for(;j.pos<St;){const bt=j.uint32();switch(bt>>>3){case 1:at.codec=Yt(j.int32());break;default:j.skipType(bt&7);break}}return at},fromJSON(g){return{codec:Rt(g.codec)?Yt(g.codec):void 0}},toJSON(g){const k={};return g.codec!==void 0&&(k.codec=g.codec!==void 0?Qt(g.codec):void 0),k},fromPartial(g){var k;const j=bn();return j.codec=(k=g.codec)!==null&&k!==void 0?k:void 0,j}};function pn(){return{video:void 0,audio:void 0}}a.Encoding={encode(g,k=_.Writer.create()){return g.video!==void 0&&a.VideoEncoding.encode(g.video,k.uint32(10).fork()).ldelim(),g.audio!==void 0&&a.AudioEncoding.encode(g.audio,k.uint32(18).fork()).ldelim(),k},decode(g,k){const j=g instanceof _.Reader?g:new _.Reader(g);let St=k===void 0?j.len:j.pos+k;const at=pn();for(;j.pos<St;){const bt=j.uint32();switch(bt>>>3){case 1:at.video=a.VideoEncoding.decode(j,j.uint32());break;case 2:at.audio=a.AudioEncoding.decode(j,j.uint32());break;default:j.skipType(bt&7);break}}return at},fromJSON(g){return{video:Rt(g.video)?a.VideoEncoding.fromJSON(g.video):void 0,audio:Rt(g.audio)?a.AudioEncoding.fromJSON(g.audio):void 0}},toJSON(g){const k={};return g.video!==void 0&&(k.video=g.video?a.VideoEncoding.toJSON(g.video):void 0),g.audio!==void 0&&(k.audio=g.audio?a.AudioEncoding.toJSON(g.audio):void 0),k},fromPartial(g){const k=pn();return k.video=g.video!==void 0&&g.video!==null?a.VideoEncoding.fromPartial(g.video):void 0,k.audio=g.audio!==void 0&&g.audio!==null?a.AudioEncoding.fromPartial(g.audio):void 0,k}};function hn(){return{enabled:void 0,key:void 0,url:void 0,baseUrl:void 0}}a.SourceRtmpPushAddress={encode(g,k=_.Writer.create()){return g.enabled!==void 0&&k.uint32(8).bool(g.enabled),g.key!==void 0&&k.uint32(18).string(g.key),g.url!==void 0&&k.uint32(26).string(g.url),g.baseUrl!==void 0&&k.uint32(34).string(g.baseUrl),k},decode(g,k){const j=g instanceof _.Reader?g:new _.Reader(g);let St=k===void 0?j.len:j.pos+k;const at=hn();for(;j.pos<St;){const bt=j.uint32();switch(bt>>>3){case 1:at.enabled=j.bool();break;case 2:at.key=j.string();break;case 3:at.url=j.string();break;case 4:at.baseUrl=j.string();break;default:j.skipType(bt&7);break}}return at},fromJSON(g){return{enabled:Rt(g.enabled)?Boolean(g.enabled):void 0,key:Rt(g.key)?String(g.key):void 0,url:Rt(g.url)?String(g.url):void 0,baseUrl:Rt(g.baseUrl)?String(g.baseUrl):void 0}},toJSON(g){const k={};return g.enabled!==void 0&&(k.enabled=g.enabled),g.key!==void 0&&(k.key=g.key),g.url!==void 0&&(k.url=g.url),g.baseUrl!==void 0&&(k.baseUrl=g.baseUrl),k},fromPartial(g){var k,j,St,at;const bt=hn();return bt.enabled=(k=g.enabled)!==null&&k!==void 0?k:void 0,bt.key=(j=g.key)!==null&&j!==void 0?j:void 0,bt.url=(St=g.url)!==null&&St!==void 0?St:void 0,bt.baseUrl=(at=g.baseUrl)!==null&&at!==void 0?at:void 0,bt}};function Nn(){return{enabled:void 0,streamId:void 0,url:void 0,baseUrl:void 0}}a.SrtPushAddress={encode(g,k=_.Writer.create()){return g.enabled!==void 0&&k.uint32(8).bool(g.enabled),g.streamId!==void 0&&k.uint32(18).string(g.streamId),g.url!==void 0&&k.uint32(26).string(g.url),g.baseUrl!==void 0&&k.uint32(34).string(g.baseUrl),k},decode(g,k){const j=g instanceof _.Reader?g:new _.Reader(g);let St=k===void 0?j.len:j.pos+k;const at=Nn();for(;j.pos<St;){const bt=j.uint32();switch(bt>>>3){case 1:at.enabled=j.bool();break;case 2:at.streamId=j.string();break;case 3:at.url=j.string();break;case 4:at.baseUrl=j.string();break;default:j.skipType(bt&7);break}}return at},fromJSON(g){return{enabled:Rt(g.enabled)?Boolean(g.enabled):void 0,streamId:Rt(g.streamId)?String(g.streamId):void 0,url:Rt(g.url)?String(g.url):void 0,baseUrl:Rt(g.baseUrl)?String(g.baseUrl):void 0}},toJSON(g){const k={};return g.enabled!==void 0&&(k.enabled=g.enabled),g.streamId!==void 0&&(k.streamId=g.streamId),g.url!==void 0&&(k.url=g.url),g.baseUrl!==void 0&&(k.baseUrl=g.baseUrl),k},fromPartial(g){var k,j,St,at;const bt=Nn();return bt.enabled=(k=g.enabled)!==null&&k!==void 0?k:void 0,bt.streamId=(j=g.streamId)!==null&&j!==void 0?j:void 0,bt.url=(St=g.url)!==null&&St!==void 0?St:void 0,bt.baseUrl=(at=g.baseUrl)!==null&&at!==void 0?at:void 0,bt}};function An(){return{url:""}}a.RtmpPullAddress={encode(g,k=_.Writer.create()){return g.url!==""&&k.uint32(10).string(g.url),k},decode(g,k){const j=g instanceof _.Reader?g:new _.Reader(g);let St=k===void 0?j.len:j.pos+k;const at=An();for(;j.pos<St;){const bt=j.uint32();switch(bt>>>3){case 1:at.url=j.string();break;default:j.skipType(bt&7);break}}return at},fromJSON(g){return{url:Rt(g.url)?String(g.url):""}},toJSON(g){const k={};return g.url!==void 0&&(k.url=g.url),k},fromPartial(g){var k;const j=An();return j.url=(k=g.url)!==null&&k!==void 0?k:"",j}};function Ln(){return{rtmpPush:void 0,srtPush:void 0,rtmpPull:void 0}}a.SourceAddress={encode(g,k=_.Writer.create()){return g.rtmpPush!==void 0&&a.SourceRtmpPushAddress.encode(g.rtmpPush,k.uint32(10).fork()).ldelim(),g.srtPush!==void 0&&a.SrtPushAddress.encode(g.srtPush,k.uint32(18).fork()).ldelim(),g.rtmpPull!==void 0&&a.RtmpPullAddress.encode(g.rtmpPull,k.uint32(26).fork()).ldelim(),k},decode(g,k){const j=g instanceof _.Reader?g:new _.Reader(g);let St=k===void 0?j.len:j.pos+k;const at=Ln();for(;j.pos<St;){const bt=j.uint32();switch(bt>>>3){case 1:at.rtmpPush=a.SourceRtmpPushAddress.decode(j,j.uint32());break;case 2:at.srtPush=a.SrtPushAddress.decode(j,j.uint32());break;case 3:at.rtmpPull=a.RtmpPullAddress.decode(j,j.uint32());break;default:j.skipType(bt&7);break}}return at},fromJSON(g){return{rtmpPush:Rt(g.rtmpPush)?a.SourceRtmpPushAddress.fromJSON(g.rtmpPush):void 0,srtPush:Rt(g.srtPush)?a.SrtPushAddress.fromJSON(g.srtPush):void 0,rtmpPull:Rt(g.rtmpPull)?a.RtmpPullAddress.fromJSON(g.rtmpPull):void 0}},toJSON(g){const k={};return g.rtmpPush!==void 0&&(k.rtmpPush=g.rtmpPush?a.SourceRtmpPushAddress.toJSON(g.rtmpPush):void 0),g.srtPush!==void 0&&(k.srtPush=g.srtPush?a.SrtPushAddress.toJSON(g.srtPush):void 0),g.rtmpPull!==void 0&&(k.rtmpPull=g.rtmpPull?a.RtmpPullAddress.toJSON(g.rtmpPull):void 0),k},fromPartial(g){const k=Ln();return k.rtmpPush=g.rtmpPush!==void 0&&g.rtmpPush!==null?a.SourceRtmpPushAddress.fromPartial(g.rtmpPush):void 0,k.srtPush=g.srtPush!==void 0&&g.srtPush!==null?a.SrtPushAddress.fromPartial(g.srtPush):void 0,k.rtmpPull=g.rtmpPull!==void 0&&g.rtmpPull!==null?a.RtmpPullAddress.fromPartial(g.rtmpPull):void 0,k}};function Dn(){return{key:void 0,url:""}}a.DestinationRtmpPushAddress={encode(g,k=_.Writer.create()){return g.key!==void 0&&k.uint32(10).string(g.key),g.url!==""&&k.uint32(18).string(g.url),k},decode(g,k){const j=g instanceof _.Reader?g:new _.Reader(g);let St=k===void 0?j.len:j.pos+k;const at=Dn();for(;j.pos<St;){const bt=j.uint32();switch(bt>>>3){case 1:at.key=j.string();break;case 2:at.url=j.string();break;default:j.skipType(bt&7);break}}return at},fromJSON(g){return{key:Rt(g.key)?String(g.key):void 0,url:Rt(g.url)?String(g.url):""}},toJSON(g){const k={};return g.key!==void 0&&(k.key=g.key),g.url!==void 0&&(k.url=g.url),k},fromPartial(g){var k,j;const St=Dn();return St.key=(k=g.key)!==null&&k!==void 0?k:void 0,St.url=(j=g.url)!==null&&j!==void 0?j:"",St}};function $n(){return{appId:"",channelId:"",userId:""}}a.DestinationAgoraPushAddress={encode(g,k=_.Writer.create()){return g.appId!==""&&k.uint32(10).string(g.appId),g.channelId!==""&&k.uint32(18).string(g.channelId),g.userId!==""&&k.uint32(26).string(g.userId),k},decode(g,k){const j=g instanceof _.Reader?g:new _.Reader(g);let St=k===void 0?j.len:j.pos+k;const at=$n();for(;j.pos<St;){const bt=j.uint32();switch(bt>>>3){case 1:at.appId=j.string();break;case 2:at.channelId=j.string();break;case 3:at.userId=j.string();break;default:j.skipType(bt&7);break}}return at},fromJSON(g){return{appId:Rt(g.appId)?String(g.appId):"",channelId:Rt(g.channelId)?String(g.channelId):"",userId:Rt(g.userId)?String(g.userId):""}},toJSON(g){const k={};return g.appId!==void 0&&(k.appId=g.appId),g.channelId!==void 0&&(k.channelId=g.channelId),g.userId!==void 0&&(k.userId=g.userId),k},fromPartial(g){var k,j,St;const at=$n();return at.appId=(k=g.appId)!==null&&k!==void 0?k:"",at.channelId=(j=g.channelId)!==null&&j!==void 0?j:"",at.userId=(St=g.userId)!==null&&St!==void 0?St:"",at}};function mn(){return{playlistCount:void 0,fileCount:void 0}}a.HlsLifecycleLive={encode(g,k=_.Writer.create()){return g.playlistCount!==void 0&&k.uint32(8).int32(g.playlistCount),g.fileCount!==void 0&&k.uint32(16).int32(g.fileCount),k},decode(g,k){const j=g instanceof _.Reader?g:new _.Reader(g);let St=k===void 0?j.len:j.pos+k;const at=mn();for(;j.pos<St;){const bt=j.uint32();switch(bt>>>3){case 1:at.playlistCount=j.int32();break;case 2:at.fileCount=j.int32();break;default:j.skipType(bt&7);break}}return at},fromJSON(g){return{playlistCount:Rt(g.playlistCount)?Number(g.playlistCount):void 0,fileCount:Rt(g.fileCount)?Number(g.fileCount):void 0}},toJSON(g){const k={};return g.playlistCount!==void 0&&(k.playlistCount=Math.round(g.playlistCount)),g.fileCount!==void 0&&(k.fileCount=Math.round(g.fileCount)),k},fromPartial(g){var k,j;const St=mn();return St.playlistCount=(k=g.playlistCount)!==null&&k!==void 0?k:void 0,St.fileCount=(j=g.fileCount)!==null&&j!==void 0?j:void 0,St}};function nn(){return{maxDuration:void 0}}a.HlsLifecycleVod={encode(g,k=_.Writer.create()){return g.maxDuration!==void 0&&k.uint32(8).int32(g.maxDuration),k},decode(g,k){const j=g instanceof _.Reader?g:new _.Reader(g);let St=k===void 0?j.len:j.pos+k;const at=nn();for(;j.pos<St;){const bt=j.uint32();switch(bt>>>3){case 1:at.maxDuration=j.int32();break;default:j.skipType(bt&7);break}}return at},fromJSON(g){return{maxDuration:Rt(g.maxDuration)?Number(g.maxDuration):void 0}},toJSON(g){const k={};return g.maxDuration!==void 0&&(k.maxDuration=Math.round(g.maxDuration)),k},fromPartial(g){var k;const j=nn();return j.maxDuration=(k=g.maxDuration)!==null&&k!==void 0?k:void 0,j}};function Fn(){return{vod:void 0,live:void 0}}a.HlsLifecycle={encode(g,k=_.Writer.create()){return g.vod!==void 0&&a.HlsLifecycleVod.encode(g.vod,k.uint32(10).fork()).ldelim(),g.live!==void 0&&a.HlsLifecycleLive.encode(g.live,k.uint32(18).fork()).ldelim(),k},decode(g,k){const j=g instanceof _.Reader?g:new _.Reader(g);let St=k===void 0?j.len:j.pos+k;const at=Fn();for(;j.pos<St;){const bt=j.uint32();switch(bt>>>3){case 1:at.vod=a.HlsLifecycleVod.decode(j,j.uint32());break;case 2:at.live=a.HlsLifecycleLive.decode(j,j.uint32());break;default:j.skipType(bt&7);break}}return at},fromJSON(g){return{vod:Rt(g.vod)?a.HlsLifecycleVod.fromJSON(g.vod):void 0,live:Rt(g.live)?a.HlsLifecycleLive.fromJSON(g.live):void 0}},toJSON(g){const k={};return g.vod!==void 0&&(k.vod=g.vod?a.HlsLifecycleVod.toJSON(g.vod):void 0),g.live!==void 0&&(k.live=g.live?a.HlsLifecycleLive.toJSON(g.live):void 0),k},fromPartial(g){const k=Fn();return k.vod=g.vod!==void 0&&g.vod!==null?a.HlsLifecycleVod.fromPartial(g.vod):void 0,k.live=g.live!==void 0&&g.live!==null?a.HlsLifecycleLive.fromPartial(g.live):void 0,k}};function Wn(){return{lifecycle:void 0,segmentDuration:void 0}}a.HlsPackaging={encode(g,k=_.Writer.create()){return g.lifecycle!==void 0&&a.HlsLifecycle.encode(g.lifecycle,k.uint32(10).fork()).ldelim(),g.segmentDuration!==void 0&&k.uint32(16).int32(g.segmentDuration),k},decode(g,k){const j=g instanceof _.Reader?g:new _.Reader(g);let St=k===void 0?j.len:j.pos+k;const at=Wn();for(;j.pos<St;){const bt=j.uint32();switch(bt>>>3){case 1:at.lifecycle=a.HlsLifecycle.decode(j,j.uint32());break;case 2:at.segmentDuration=j.int32();break;default:j.skipType(bt&7);break}}return at},fromJSON(g){return{lifecycle:Rt(g.lifecycle)?a.HlsLifecycle.fromJSON(g.lifecycle):void 0,segmentDuration:Rt(g.segmentDuration)?Number(g.segmentDuration):void 0}},toJSON(g){const k={};return g.lifecycle!==void 0&&(k.lifecycle=g.lifecycle?a.HlsLifecycle.toJSON(g.lifecycle):void 0),g.segmentDuration!==void 0&&(k.segmentDuration=Math.round(g.segmentDuration)),k},fromPartial(g){var k;const j=Wn();return j.lifecycle=g.lifecycle!==void 0&&g.lifecycle!==null?a.HlsLifecycle.fromPartial(g.lifecycle):void 0,j.segmentDuration=(k=g.segmentDuration)!==null&&k!==void 0?k:void 0,j}};function Hn(){return{hls:void 0}}a.ObjectStoragePackaging={encode(g,k=_.Writer.create()){return g.hls!==void 0&&a.HlsPackaging.encode(g.hls,k.uint32(10).fork()).ldelim(),k},decode(g,k){const j=g instanceof _.Reader?g:new _.Reader(g);let St=k===void 0?j.len:j.pos+k;const at=Hn();for(;j.pos<St;){const bt=j.uint32();switch(bt>>>3){case 1:at.hls=a.HlsPackaging.decode(j,j.uint32());break;default:j.skipType(bt&7);break}}return at},fromJSON(g){return{hls:Rt(g.hls)?a.HlsPackaging.fromJSON(g.hls):void 0}},toJSON(g){const k={};return g.hls!==void 0&&(k.hls=g.hls?a.HlsPackaging.toJSON(g.hls):void 0),k},fromPartial(g){const k=Hn();return k.hls=g.hls!==void 0&&g.hls!==null?a.HlsPackaging.fromPartial(g.hls):void 0,k}};function zn(){return{region:"",bucket:"",prefix:void 0,accessKey:"",secretKey:"",token:void 0,tokenDuration:void 0,acl:void 0,endpoint:void 0,packaging:void 0}}a.S3StorageAddress={encode(g,k=_.Writer.create()){return g.region!==""&&k.uint32(10).string(g.region),g.bucket!==""&&k.uint32(18).string(g.bucket),g.prefix!==void 0&&k.uint32(26).string(g.prefix),g.accessKey!==""&&k.uint32(34).string(g.accessKey),g.secretKey!==""&&k.uint32(42).string(g.secretKey),g.token!==void 0&&k.uint32(50).string(g.token),g.tokenDuration!==void 0&&k.uint32(56).int32(g.tokenDuration),g.acl!==void 0&&k.uint32(64).int32(In(g.acl)),g.endpoint!==void 0&&k.uint32(74).string(g.endpoint),g.packaging!==void 0&&a.ObjectStoragePackaging.encode(g.packaging,k.uint32(82).fork()).ldelim(),k},decode(g,k){const j=g instanceof _.Reader?g:new _.Reader(g);let St=k===void 0?j.len:j.pos+k;const at=zn();for(;j.pos<St;){const bt=j.uint32();switch(bt>>>3){case 1:at.region=j.string();break;case 2:at.bucket=j.string();break;case 3:at.prefix=j.string();break;case 4:at.accessKey=j.string();break;case 5:at.secretKey=j.string();break;case 6:at.token=j.string();break;case 7:at.tokenDuration=j.int32();break;case 8:at.acl=vn(j.int32());break;case 9:at.endpoint=j.string();break;case 10:at.packaging=a.ObjectStoragePackaging.decode(j,j.uint32());break;default:j.skipType(bt&7);break}}return at},fromJSON(g){return{region:Rt(g.region)?String(g.region):"",bucket:Rt(g.bucket)?String(g.bucket):"",prefix:Rt(g.prefix)?String(g.prefix):void 0,accessKey:Rt(g.accessKey)?String(g.accessKey):"",secretKey:Rt(g.secretKey)?String(g.secretKey):"",token:Rt(g.token)?String(g.token):void 0,tokenDuration:Rt(g.tokenDuration)?Number(g.tokenDuration):void 0,acl:Rt(g.acl)?vn(g.acl):void 0,endpoint:Rt(g.endpoint)?String(g.endpoint):void 0,packaging:Rt(g.packaging)?a.ObjectStoragePackaging.fromJSON(g.packaging):void 0}},toJSON(g){const k={};return g.region!==void 0&&(k.region=g.region),g.bucket!==void 0&&(k.bucket=g.bucket),g.prefix!==void 0&&(k.prefix=g.prefix),g.accessKey!==void 0&&(k.accessKey=g.accessKey),g.secretKey!==void 0&&(k.secretKey=g.secretKey),g.token!==void 0&&(k.token=g.token),g.tokenDuration!==void 0&&(k.tokenDuration=Math.round(g.tokenDuration)),g.acl!==void 0&&(k.acl=g.acl!==void 0?ln(g.acl):void 0),g.endpoint!==void 0&&(k.endpoint=g.endpoint),g.packaging!==void 0&&(k.packaging=g.packaging?a.ObjectStoragePackaging.toJSON(g.packaging):void 0),k},fromPartial(g){var k,j,St,at,bt,zt,sn,Tn,_n;const cn=zn();return cn.region=(k=g.region)!==null&&k!==void 0?k:"",cn.bucket=(j=g.bucket)!==null&&j!==void 0?j:"",cn.prefix=(St=g.prefix)!==null&&St!==void 0?St:void 0,cn.accessKey=(at=g.accessKey)!==null&&at!==void 0?at:"",cn.secretKey=(bt=g.secretKey)!==null&&bt!==void 0?bt:"",cn.token=(zt=g.token)!==null&&zt!==void 0?zt:void 0,cn.tokenDuration=(sn=g.tokenDuration)!==null&&sn!==void 0?sn:void 0,cn.acl=(Tn=g.acl)!==null&&Tn!==void 0?Tn:void 0,cn.endpoint=(_n=g.endpoint)!==null&&_n!==void 0?_n:void 0,cn.packaging=g.packaging!==void 0&&g.packaging!==null?a.ObjectStoragePackaging.fromPartial(g.packaging):void 0,cn}};function Yn(){return{rtmpPush:void 0,agora:void 0,s3Storage:void 0}}a.DestinationAddress={encode(g,k=_.Writer.create()){return g.rtmpPush!==void 0&&a.DestinationRtmpPushAddress.encode(g.rtmpPush,k.uint32(10).fork()).ldelim(),g.agora!==void 0&&a.DestinationAgoraPushAddress.encode(g.agora,k.uint32(18).fork()).ldelim(),g.s3Storage!==void 0&&a.S3StorageAddress.encode(g.s3Storage,k.uint32(26).fork()).ldelim(),k},decode(g,k){const j=g instanceof _.Reader?g:new _.Reader(g);let St=k===void 0?j.len:j.pos+k;const at=Yn();for(;j.pos<St;){const bt=j.uint32();switch(bt>>>3){case 1:at.rtmpPush=a.DestinationRtmpPushAddress.decode(j,j.uint32());break;case 2:at.agora=a.DestinationAgoraPushAddress.decode(j,j.uint32());break;case 3:at.s3Storage=a.S3StorageAddress.decode(j,j.uint32());break;default:j.skipType(bt&7);break}}return at},fromJSON(g){return{rtmpPush:Rt(g.rtmpPush)?a.DestinationRtmpPushAddress.fromJSON(g.rtmpPush):void 0,agora:Rt(g.agora)?a.DestinationAgoraPushAddress.fromJSON(g.agora):void 0,s3Storage:Rt(g.s3Storage)?a.S3StorageAddress.fromJSON(g.s3Storage):void 0}},toJSON(g){const k={};return g.rtmpPush!==void 0&&(k.rtmpPush=g.rtmpPush?a.DestinationRtmpPushAddress.toJSON(g.rtmpPush):void 0),g.agora!==void 0&&(k.agora=g.agora?a.DestinationAgoraPushAddress.toJSON(g.agora):void 0),g.s3Storage!==void 0&&(k.s3Storage=g.s3Storage?a.S3StorageAddress.toJSON(g.s3Storage):void 0),k},fromPartial(g){const k=Yn();return k.rtmpPush=g.rtmpPush!==void 0&&g.rtmpPush!==null?a.DestinationRtmpPushAddress.fromPartial(g.rtmpPush):void 0,k.agora=g.agora!==void 0&&g.agora!==null?a.DestinationAgoraPushAddress.fromPartial(g.agora):void 0,k.s3Storage=g.s3Storage!==void 0&&g.s3Storage!==null?a.S3StorageAddress.fromPartial(g.s3Storage):void 0,k}};function Kn(){return{sourceId:"",start:void 0,stop:void 0}}a.SourceTrigger={encode(g,k=_.Writer.create()){return g.sourceId!==""&&k.uint32(10).string(g.sourceId),g.start!==void 0&&k.uint32(16).int32(On(g.start)),g.stop!==void 0&&k.uint32(24).int32(On(g.stop)),k},decode(g,k){const j=g instanceof _.Reader?g:new _.Reader(g);let St=k===void 0?j.len:j.pos+k;const at=Kn();for(;j.pos<St;){const bt=j.uint32();switch(bt>>>3){case 1:at.sourceId=j.string();break;case 2:at.start=gn(j.int32());break;case 3:at.stop=gn(j.int32());break;default:j.skipType(bt&7);break}}return at},fromJSON(g){return{sourceId:Rt(g.sourceId)?String(g.sourceId):"",start:Rt(g.start)?gn(g.start):void 0,stop:Rt(g.stop)?gn(g.stop):void 0}},toJSON(g){const k={};return g.sourceId!==void 0&&(k.sourceId=g.sourceId),g.start!==void 0&&(k.start=g.start!==void 0?kn(g.start):void 0),g.stop!==void 0&&(k.stop=g.stop!==void 0?kn(g.stop):void 0),k},fromPartial(g){var k,j,St;const at=Kn();return at.sourceId=(k=g.sourceId)!==null&&k!==void 0?k:"",at.start=(j=g.start)!==null&&j!==void 0?j:void 0,at.stop=(St=g.stop)!==null&&St!==void 0?St:void 0,at}};function Qn(){return{stop:void 0}}a.WebRtcTrigger={encode(g,k=_.Writer.create()){return g.stop!==void 0&&k.uint32(24).int32(On(g.stop)),k},decode(g,k){const j=g instanceof _.Reader?g:new _.Reader(g);let St=k===void 0?j.len:j.pos+k;const at=Qn();for(;j.pos<St;){const bt=j.uint32();switch(bt>>>3){case 3:at.stop=gn(j.int32());break;default:j.skipType(bt&7);break}}return at},fromJSON(g){return{stop:Rt(g.stop)?gn(g.stop):void 0}},toJSON(g){const k={};return g.stop!==void 0&&(k.stop=g.stop!==void 0?kn(g.stop):void 0),k},fromPartial(g){var k;const j=Qn();return j.stop=(k=g.stop)!==null&&k!==void 0?k:void 0,j}};function Zn(){return{source:void 0}}a.ProjectTrigger={encode(g,k=_.Writer.create()){return g.source!==void 0&&a.SourceTrigger.encode(g.source,k.uint32(10).fork()).ldelim(),k},decode(g,k){const j=g instanceof _.Reader?g:new _.Reader(g);let St=k===void 0?j.len:j.pos+k;const at=Zn();for(;j.pos<St;){const bt=j.uint32();switch(bt>>>3){case 1:at.source=a.SourceTrigger.decode(j,j.uint32());break;default:j.skipType(bt&7);break}}return at},fromJSON(g){return{source:Rt(g.source)?a.SourceTrigger.fromJSON(g.source):void 0}},toJSON(g){const k={};return g.source!==void 0&&(k.source=g.source?a.SourceTrigger.toJSON(g.source):void 0),k},fromPartial(g){const k=Zn();return k.source=g.source!==void 0&&g.source!==null?a.SourceTrigger.fromPartial(g.source):void 0,k}};function Xn(){return{enabled:void 0,url:void 0}}a.PreviewHlsPullAddress={encode(g,k=_.Writer.create()){return g.enabled!==void 0&&k.uint32(8).bool(g.enabled),g.url!==void 0&&k.uint32(18).string(g.url),k},decode(g,k){const j=g instanceof _.Reader?g:new _.Reader(g);let St=k===void 0?j.len:j.pos+k;const at=Xn();for(;j.pos<St;){const bt=j.uint32();switch(bt>>>3){case 1:at.enabled=j.bool();break;case 2:at.url=j.string();break;default:j.skipType(bt&7);break}}return at},fromJSON(g){return{enabled:Rt(g.enabled)?Boolean(g.enabled):void 0,url:Rt(g.url)?String(g.url):void 0}},toJSON(g){const k={};return g.enabled!==void 0&&(k.enabled=g.enabled),g.url!==void 0&&(k.url=g.url),k},fromPartial(g){var k,j;const St=Xn();return St.enabled=(k=g.enabled)!==null&&k!==void 0?k:void 0,St.url=(j=g.url)!==null&&j!==void 0?j:void 0,St}};function jn(){return{enabled:void 0,displayName:void 0,participantId:void 0}}a.PreviewWebRtcAddress={encode(g,k=_.Writer.create()){return g.enabled!==void 0&&k.uint32(8).bool(g.enabled),g.displayName!==void 0&&k.uint32(18).string(g.displayName),g.participantId!==void 0&&k.uint32(26).string(g.participantId),k},decode(g,k){const j=g instanceof _.Reader?g:new _.Reader(g);let St=k===void 0?j.len:j.pos+k;const at=jn();for(;j.pos<St;){const bt=j.uint32();switch(bt>>>3){case 1:at.enabled=j.bool();break;case 2:at.displayName=j.string();break;case 3:at.participantId=j.string();break;default:j.skipType(bt&7);break}}return at},fromJSON(g){return{enabled:Rt(g.enabled)?Boolean(g.enabled):void 0,displayName:Rt(g.displayName)?String(g.displayName):void 0,participantId:Rt(g.participantId)?String(g.participantId):void 0}},toJSON(g){const k={};return g.enabled!==void 0&&(k.enabled=g.enabled),g.displayName!==void 0&&(k.displayName=g.displayName),g.participantId!==void 0&&(k.participantId=g.participantId),k},fromPartial(g){var k,j,St;const at=jn();return at.enabled=(k=g.enabled)!==null&&k!==void 0?k:void 0,at.displayName=(j=g.displayName)!==null&&j!==void 0?j:void 0,at.participantId=(St=g.participantId)!==null&&St!==void 0?St:void 0,at}};function er(){return{webrtc:void 0}}a.PreviewAddress={encode(g,k=_.Writer.create()){return g.webrtc!==void 0&&a.PreviewWebRtcAddress.encode(g.webrtc,k.uint32(18).fork()).ldelim(),k},decode(g,k){const j=g instanceof _.Reader?g:new _.Reader(g);let St=k===void 0?j.len:j.pos+k;const at=er();for(;j.pos<St;){const bt=j.uint32();switch(bt>>>3){case 2:at.webrtc=a.PreviewWebRtcAddress.decode(j,j.uint32());break;default:j.skipType(bt&7);break}}return at},fromJSON(g){return{webrtc:Rt(g.webrtc)?a.PreviewWebRtcAddress.fromJSON(g.webrtc):void 0}},toJSON(g){const k={};return g.webrtc!==void 0&&(k.webrtc=g.webrtc?a.PreviewWebRtcAddress.toJSON(g.webrtc):void 0),k},fromPartial(g){const k=er();return k.webrtc=g.webrtc!==void 0&&g.webrtc!==null?a.PreviewWebRtcAddress.fromPartial(g.webrtc):void 0,k}};function tr(){return{rendererUrl:void 0,version:void 0}}a.StudioSdkComposition={encode(g,k=_.Writer.create()){return g.rendererUrl!==void 0&&k.uint32(10).string(g.rendererUrl),g.version!==void 0&&k.uint32(18).string(g.version),k},decode(g,k){const j=g instanceof _.Reader?g:new _.Reader(g);let St=k===void 0?j.len:j.pos+k;const at=tr();for(;j.pos<St;){const bt=j.uint32();switch(bt>>>3){case 1:at.rendererUrl=j.string();break;case 2:at.version=j.string();break;default:j.skipType(bt&7);break}}return at},fromJSON(g){return{rendererUrl:Rt(g.rendererUrl)?String(g.rendererUrl):void 0,version:Rt(g.version)?String(g.version):void 0}},toJSON(g){const k={};return g.rendererUrl!==void 0&&(k.rendererUrl=g.rendererUrl),g.version!==void 0&&(k.version=g.version),k},fromPartial(g){var k,j;const St=tr();return St.rendererUrl=(k=g.rendererUrl)!==null&&k!==void 0?k:void 0,St.version=(j=g.version)!==null&&j!==void 0?j:void 0,St}};function nr(){return{rendererUrl:void 0,selectedLayoutId:void 0,debug:void 0}}a.SceneComposition={encode(g,k=_.Writer.create()){return g.rendererUrl!==void 0&&k.uint32(10).string(g.rendererUrl),g.selectedLayoutId!==void 0&&k.uint32(18).string(g.selectedLayoutId),g.debug!==void 0&&k.uint32(24).bool(g.debug),k},decode(g,k){const j=g instanceof _.Reader?g:new _.Reader(g);let St=k===void 0?j.len:j.pos+k;const at=nr();for(;j.pos<St;){const bt=j.uint32();switch(bt>>>3){case 1:at.rendererUrl=j.string();break;case 2:at.selectedLayoutId=j.string();break;case 3:at.debug=j.bool();break;default:j.skipType(bt&7);break}}return at},fromJSON(g){return{rendererUrl:Rt(g.rendererUrl)?String(g.rendererUrl):void 0,selectedLayoutId:Rt(g.selectedLayoutId)?String(g.selectedLayoutId):void 0,debug:Rt(g.debug)?Boolean(g.debug):void 0}},toJSON(g){const k={};return g.rendererUrl!==void 0&&(k.rendererUrl=g.rendererUrl),g.selectedLayoutId!==void 0&&(k.selectedLayoutId=g.selectedLayoutId),g.debug!==void 0&&(k.debug=g.debug),k},fromPartial(g){var k,j,St;const at=nr();return at.rendererUrl=(k=g.rendererUrl)!==null&&k!==void 0?k:void 0,at.selectedLayoutId=(j=g.selectedLayoutId)!==null&&j!==void 0?j:void 0,at.debug=(St=g.debug)!==null&&St!==void 0?St:void 0,at}};function rr(){return{url:""}}a.ExternalComposition={encode(g,k=_.Writer.create()){return g.url!==""&&k.uint32(10).string(g.url),k},decode(g,k){const j=g instanceof _.Reader?g:new _.Reader(g);let St=k===void 0?j.len:j.pos+k;const at=rr();for(;j.pos<St;){const bt=j.uint32();switch(bt>>>3){case 1:at.url=j.string();break;default:j.skipType(bt&7);break}}return at},fromJSON(g){return{url:Rt(g.url)?String(g.url):""}},toJSON(g){const k={};return g.url!==void 0&&(k.url=g.url),k},fromPartial(g){var k;const j=rr();return j.url=(k=g.url)!==null&&k!==void 0?k:"",j}};function ir(){return{external:void 0,studioSdk:void 0,scene:void 0}}a.Composition={encode(g,k=_.Writer.create()){return g.external!==void 0&&a.ExternalComposition.encode(g.external,k.uint32(10).fork()).ldelim(),g.studioSdk!==void 0&&a.StudioSdkComposition.encode(g.studioSdk,k.uint32(18).fork()).ldelim(),g.scene!==void 0&&a.SceneComposition.encode(g.scene,k.uint32(34).fork()).ldelim(),k},decode(g,k){const j=g instanceof _.Reader?g:new _.Reader(g);let St=k===void 0?j.len:j.pos+k;const at=ir();for(;j.pos<St;){const bt=j.uint32();switch(bt>>>3){case 1:at.external=a.ExternalComposition.decode(j,j.uint32());break;case 2:at.studioSdk=a.StudioSdkComposition.decode(j,j.uint32());break;case 4:at.scene=a.SceneComposition.decode(j,j.uint32());break;default:j.skipType(bt&7);break}}return at},fromJSON(g){return{external:Rt(g.external)?a.ExternalComposition.fromJSON(g.external):void 0,studioSdk:Rt(g.studioSdk)?a.StudioSdkComposition.fromJSON(g.studioSdk):void 0,scene:Rt(g.scene)?a.SceneComposition.fromJSON(g.scene):void 0}},toJSON(g){const k={};return g.external!==void 0&&(k.external=g.external?a.ExternalComposition.toJSON(g.external):void 0),g.studioSdk!==void 0&&(k.studioSdk=g.studioSdk?a.StudioSdkComposition.toJSON(g.studioSdk):void 0),g.scene!==void 0&&(k.scene=g.scene?a.SceneComposition.toJSON(g.scene):void 0),k},fromPartial(g){const k=ir();return k.external=g.external!==void 0&&g.external!==null?a.ExternalComposition.fromPartial(g.external):void 0,k.studioSdk=g.studioSdk!==void 0&&g.studioSdk!==null?a.StudioSdkComposition.fromPartial(g.studioSdk):void 0,k.scene=g.scene!==void 0&&g.scene!==null?a.SceneComposition.fromPartial(g.scene):void 0,k}};function ar(){return{enabled:void 0}}a.HostedWebRtc={encode(g,k=_.Writer.create()){return g.enabled!==void 0&&k.uint32(8).bool(g.enabled),k},decode(g,k){const j=g instanceof _.Reader?g:new _.Reader(g);let St=k===void 0?j.len:j.pos+k;const at=ar();for(;j.pos<St;){const bt=j.uint32();switch(bt>>>3){case 1:at.enabled=j.bool();break;default:j.skipType(bt&7);break}}return at},fromJSON(g){return{enabled:Rt(g.enabled)?Boolean(g.enabled):void 0}},toJSON(g){const k={};return g.enabled!==void 0&&(k.enabled=g.enabled),k},fromPartial(g){var k;const j=ar();return j.enabled=(k=g.enabled)!==null&&k!==void 0?k:void 0,j}};function or(){return{hosted:void 0}}a.WebRtc={encode(g,k=_.Writer.create()){return g.hosted!==void 0&&a.HostedWebRtc.encode(g.hosted,k.uint32(10).fork()).ldelim(),k},decode(g,k){const j=g instanceof _.Reader?g:new _.Reader(g);let St=k===void 0?j.len:j.pos+k;const at=or();for(;j.pos<St;){const bt=j.uint32();switch(bt>>>3){case 1:at.hosted=a.HostedWebRtc.decode(j,j.uint32());break;default:j.skipType(bt&7);break}}return at},fromJSON(g){return{hosted:Rt(g.hosted)?a.HostedWebRtc.fromJSON(g.hosted):void 0}},toJSON(g){const k={};return g.hosted!==void 0&&(k.hosted=g.hosted?a.HostedWebRtc.toJSON(g.hosted):void 0),k},fromPartial(g){const k=or();return k.hosted=g.hosted!==void 0&&g.hosted!==null?a.HostedWebRtc.fromPartial(g.hosted):void 0,k}};function sr(){return{accessToken:"",participantId:void 0}}a.WebRtcAccess={encode(g,k=_.Writer.create()){return g.accessToken!==""&&k.uint32(10).string(g.accessToken),g.participantId!==void 0&&k.uint32(26).string(g.participantId),k},decode(g,k){const j=g instanceof _.Reader?g:new _.Reader(g);let St=k===void 0?j.len:j.pos+k;const at=sr();for(;j.pos<St;){const bt=j.uint32();switch(bt>>>3){case 1:at.accessToken=j.string();break;case 3:at.participantId=j.string();break;default:j.skipType(bt&7);break}}return at},fromJSON(g){return{accessToken:Rt(g.accessToken)?String(g.accessToken):"",participantId:Rt(g.participantId)?String(g.participantId):void 0}},toJSON(g){const k={};return g.accessToken!==void 0&&(k.accessToken=g.accessToken),g.participantId!==void 0&&(k.participantId=g.participantId),k},fromPartial(g){var k,j;const St=sr();return St.accessToken=(k=g.accessToken)!==null&&k!==void 0?k:"",St.participantId=(j=g.participantId)!==null&&j!==void 0?j:void 0,St}};function ur(){return{latitude:0,longitude:0}}a.LatLong={encode(g,k=_.Writer.create()){return g.latitude!==0&&k.uint32(9).double(g.latitude),g.longitude!==0&&k.uint32(17).double(g.longitude),k},decode(g,k){const j=g instanceof _.Reader?g:new _.Reader(g);let St=k===void 0?j.len:j.pos+k;const at=ur();for(;j.pos<St;){const bt=j.uint32();switch(bt>>>3){case 1:at.latitude=j.double();break;case 2:at.longitude=j.double();break;default:j.skipType(bt&7);break}}return at},fromJSON(g){return{latitude:Rt(g.latitude)?Number(g.latitude):0,longitude:Rt(g.longitude)?Number(g.longitude):0}},toJSON(g){const k={};return g.latitude!==void 0&&(k.latitude=g.latitude),g.longitude!==void 0&&(k.longitude=g.longitude),k},fromPartial(g){var k,j;const St=ur();return St.latitude=(k=g.latitude)!==null&&k!==void 0?k:0,St.longitude=(j=g.longitude)!==null&&j!==void 0?j:0,St}};function dr(){return{collectionId:"",projectId:"",broadcastId:void 0,duration:void 0,start:void 0,stop:void 0,phase:Ut.PROJECT_BROADCAST_PHASE_UNSPECIFIED,region:void 0,datacenter:void 0}}a.ProjectBroadcastStatus={encode(g,k=_.Writer.create()){return g.collectionId!==""&&k.uint32(10).string(g.collectionId),g.projectId!==""&&k.uint32(18).string(g.projectId),g.broadcastId!==void 0&&k.uint32(26).string(g.broadcastId),g.duration!==void 0&&k.uint32(32).uint32(g.duration),g.start!==void 0&&$.Timestamp.encode(Gn(g.start),k.uint32(42).fork()).ldelim(),g.stop!==void 0&&$.Timestamp.encode(Gn(g.stop),k.uint32(50).fork()).ldelim(),g.phase!==Ut.PROJECT_BROADCAST_PHASE_UNSPECIFIED&&k.uint32(56).int32(Wt(g.phase)),g.region!==void 0&&k.uint32(64).int32(Pn(g.region)),g.datacenter!==void 0&&k.uint32(74).string(g.datacenter),k},decode(g,k){const j=g instanceof _.Reader?g:new _.Reader(g);let St=k===void 0?j.len:j.pos+k;const at=dr();for(;j.pos<St;){const bt=j.uint32();switch(bt>>>3){case 1:at.collectionId=j.string();break;case 2:at.projectId=j.string();break;case 3:at.broadcastId=j.string();break;case 4:at.duration=j.uint32();break;case 5:at.start=xn($.Timestamp.decode(j,j.uint32()));break;case 6:at.stop=xn($.Timestamp.decode(j,j.uint32()));break;case 7:at.phase=$t(j.int32());break;case 8:at.region=wn(j.int32());break;case 9:at.datacenter=j.string();break;default:j.skipType(bt&7);break}}return at},fromJSON(g){return{collectionId:Rt(g.collectionId)?String(g.collectionId):"",projectId:Rt(g.projectId)?String(g.projectId):"",broadcastId:Rt(g.broadcastId)?String(g.broadcastId):void 0,duration:Rt(g.duration)?Number(g.duration):void 0,start:Rt(g.start)?String(g.start):void 0,stop:Rt(g.stop)?String(g.stop):void 0,phase:Rt(g.phase)?$t(g.phase):Ut.PROJECT_BROADCAST_PHASE_UNSPECIFIED,region:Rt(g.region)?wn(g.region):void 0,datacenter:Rt(g.datacenter)?String(g.datacenter):void 0}},toJSON(g){const k={};return g.collectionId!==void 0&&(k.collectionId=g.collectionId),g.projectId!==void 0&&(k.projectId=g.projectId),g.broadcastId!==void 0&&(k.broadcastId=g.broadcastId),g.duration!==void 0&&(k.duration=Math.round(g.duration)),g.start!==void 0&&(k.start=g.start),g.stop!==void 0&&(k.stop=g.stop),g.phase!==void 0&&(k.phase=qt(g.phase)),g.region!==void 0&&(k.region=g.region!==void 0?jt(g.region):void 0),g.datacenter!==void 0&&(k.datacenter=g.datacenter),k},fromPartial(g){var k,j,St,at,bt,zt,sn,Tn,_n;const cn=dr();return cn.collectionId=(k=g.collectionId)!==null&&k!==void 0?k:"",cn.projectId=(j=g.projectId)!==null&&j!==void 0?j:"",cn.broadcastId=(St=g.broadcastId)!==null&&St!==void 0?St:void 0,cn.duration=(at=g.duration)!==null&&at!==void 0?at:void 0,cn.start=(bt=g.start)!==null&&bt!==void 0?bt:void 0,cn.stop=(zt=g.stop)!==null&&zt!==void 0?zt:void 0,cn.phase=(sn=g.phase)!==null&&sn!==void 0?sn:Ut.PROJECT_BROADCAST_PHASE_UNSPECIFIED,cn.region=(Tn=g.region)!==null&&Tn!==void 0?Tn:void 0,cn.datacenter=(_n=g.datacenter)!==null&&_n!==void 0?_n:void 0,cn}};function cr(){return{collectionId:"",sourceId:"",metadata:void 0,preview:void 0,address:void 0}}a.Source={encode(g,k=_.Writer.create()){return g.collectionId!==""&&k.uint32(10).string(g.collectionId),g.sourceId!==""&&k.uint32(18).string(g.sourceId),g.metadata!==void 0&&_e.Value.encode(_e.Value.wrap(g.metadata),k.uint32(26).fork()).ldelim(),g.preview!==void 0&&a.PreviewAddress.encode(g.preview,k.uint32(34).fork()).ldelim(),g.address!==void 0&&a.SourceAddress.encode(g.address,k.uint32(50).fork()).ldelim(),k},decode(g,k){const j=g instanceof _.Reader?g:new _.Reader(g);let St=k===void 0?j.len:j.pos+k;const at=cr();for(;j.pos<St;){const bt=j.uint32();switch(bt>>>3){case 1:at.collectionId=j.string();break;case 2:at.sourceId=j.string();break;case 3:at.metadata=_e.Value.unwrap(_e.Value.decode(j,j.uint32()));break;case 4:at.preview=a.PreviewAddress.decode(j,j.uint32());break;case 6:at.address=a.SourceAddress.decode(j,j.uint32());break;default:j.skipType(bt&7);break}}return at},fromJSON(g){return{collectionId:Rt(g.collectionId)?String(g.collectionId):"",sourceId:Rt(g.sourceId)?String(g.sourceId):"",metadata:Rt(g==null?void 0:g.metadata)?g.metadata:void 0,preview:Rt(g.preview)?a.PreviewAddress.fromJSON(g.preview):void 0,address:Rt(g.address)?a.SourceAddress.fromJSON(g.address):void 0}},toJSON(g){const k={};return g.collectionId!==void 0&&(k.collectionId=g.collectionId),g.sourceId!==void 0&&(k.sourceId=g.sourceId),g.metadata!==void 0&&(k.metadata=g.metadata),g.preview!==void 0&&(k.preview=g.preview?a.PreviewAddress.toJSON(g.preview):void 0),g.address!==void 0&&(k.address=g.address?a.SourceAddress.toJSON(g.address):void 0),k},fromPartial(g){var k,j,St;const at=cr();return at.collectionId=(k=g.collectionId)!==null&&k!==void 0?k:"",at.sourceId=(j=g.sourceId)!==null&&j!==void 0?j:"",at.metadata=(St=g.metadata)!==null&&St!==void 0?St:void 0,at.preview=g.preview!==void 0&&g.preview!==null?a.PreviewAddress.fromPartial(g.preview):void 0,at.address=g.address!==void 0&&g.address!==null?a.SourceAddress.fromPartial(g.address):void 0,at}};function lr(){return{collectionId:"",projectId:"",destinationId:"",metadata:void 0,enabled:void 0,address:void 0,timeout:void 0}}a.Destination={encode(g,k=_.Writer.create()){return g.collectionId!==""&&k.uint32(10).string(g.collectionId),g.projectId!==""&&k.uint32(18).string(g.projectId),g.destinationId!==""&&k.uint32(26).string(g.destinationId),g.metadata!==void 0&&_e.Value.encode(_e.Value.wrap(g.metadata),k.uint32(34).fork()).ldelim(),g.enabled!==void 0&&k.uint32(40).bool(g.enabled),g.address!==void 0&&a.DestinationAddress.encode(g.address,k.uint32(50).fork()).ldelim(),g.timeout!==void 0&&k.uint32(56).uint32(g.timeout),k},decode(g,k){const j=g instanceof _.Reader?g:new _.Reader(g);let St=k===void 0?j.len:j.pos+k;const at=lr();for(;j.pos<St;){const bt=j.uint32();switch(bt>>>3){case 1:at.collectionId=j.string();break;case 2:at.projectId=j.string();break;case 3:at.destinationId=j.string();break;case 4:at.metadata=_e.Value.unwrap(_e.Value.decode(j,j.uint32()));break;case 5:at.enabled=j.bool();break;case 6:at.address=a.DestinationAddress.decode(j,j.uint32());break;case 7:at.timeout=j.uint32();break;default:j.skipType(bt&7);break}}return at},fromJSON(g){return{collectionId:Rt(g.collectionId)?String(g.collectionId):"",projectId:Rt(g.projectId)?String(g.projectId):"",destinationId:Rt(g.destinationId)?String(g.destinationId):"",metadata:Rt(g==null?void 0:g.metadata)?g.metadata:void 0,enabled:Rt(g.enabled)?Boolean(g.enabled):void 0,address:Rt(g.address)?a.DestinationAddress.fromJSON(g.address):void 0,timeout:Rt(g.timeout)?Number(g.timeout):void 0}},toJSON(g){const k={};return g.collectionId!==void 0&&(k.collectionId=g.collectionId),g.projectId!==void 0&&(k.projectId=g.projectId),g.destinationId!==void 0&&(k.destinationId=g.destinationId),g.metadata!==void 0&&(k.metadata=g.metadata),g.enabled!==void 0&&(k.enabled=g.enabled),g.address!==void 0&&(k.address=g.address?a.DestinationAddress.toJSON(g.address):void 0),g.timeout!==void 0&&(k.timeout=Math.round(g.timeout)),k},fromPartial(g){var k,j,St,at,bt,zt;const sn=lr();return sn.collectionId=(k=g.collectionId)!==null&&k!==void 0?k:"",sn.projectId=(j=g.projectId)!==null&&j!==void 0?j:"",sn.destinationId=(St=g.destinationId)!==null&&St!==void 0?St:"",sn.metadata=(at=g.metadata)!==null&&at!==void 0?at:void 0,sn.enabled=(bt=g.enabled)!==null&&bt!==void 0?bt:void 0,sn.address=g.address!==void 0&&g.address!==null?a.DestinationAddress.fromPartial(g.address):void 0,sn.timeout=(zt=g.timeout)!==null&&zt!==void 0?zt:void 0,sn}};function fr(){return{collectionId:"",projectId:"",metadata:void 0,rendering:void 0,encoding:void 0,sources:[],destinations:[],composition:void 0,maxDuration:void 0,webrtc:void 0,triggers:[],location:void 0,guestCodes:[]}}a.Project={encode(g,k=_.Writer.create()){g.collectionId!==""&&k.uint32(10).string(g.collectionId),g.projectId!==""&&k.uint32(18).string(g.projectId),g.metadata!==void 0&&_e.Value.encode(_e.Value.wrap(g.metadata),k.uint32(26).fork()).ldelim(),g.rendering!==void 0&&a.Rendering.encode(g.rendering,k.uint32(34).fork()).ldelim(),g.encoding!==void 0&&a.Encoding.encode(g.encoding,k.uint32(42).fork()).ldelim();for(const j of g.sources)a.Source.encode(j,k.uint32(50).fork()).ldelim();for(const j of g.destinations)a.Destination.encode(j,k.uint32(58).fork()).ldelim();g.composition!==void 0&&a.Composition.encode(g.composition,k.uint32(66).fork()).ldelim(),g.maxDuration!==void 0&&k.uint32(72).uint32(g.maxDuration),g.webrtc!==void 0&&a.WebRtc.encode(g.webrtc,k.uint32(82).fork()).ldelim();for(const j of g.triggers)a.ProjectTrigger.encode(j,k.uint32(90).fork()).ldelim();g.location!==void 0&&a.LatLong.encode(g.location,k.uint32(98).fork()).ldelim();for(const j of g.guestCodes)a.GuestCode.encode(j,k.uint32(106).fork()).ldelim();return k},decode(g,k){const j=g instanceof _.Reader?g:new _.Reader(g);let St=k===void 0?j.len:j.pos+k;const at=fr();for(;j.pos<St;){const bt=j.uint32();switch(bt>>>3){case 1:at.collectionId=j.string();break;case 2:at.projectId=j.string();break;case 3:at.metadata=_e.Value.unwrap(_e.Value.decode(j,j.uint32()));break;case 4:at.rendering=a.Rendering.decode(j,j.uint32());break;case 5:at.encoding=a.Encoding.decode(j,j.uint32());break;case 6:at.sources.push(a.Source.decode(j,j.uint32()));break;case 7:at.destinations.push(a.Destination.decode(j,j.uint32()));break;case 8:at.composition=a.Composition.decode(j,j.uint32());break;case 9:at.maxDuration=j.uint32();break;case 10:at.webrtc=a.WebRtc.decode(j,j.uint32());break;case 11:at.triggers.push(a.ProjectTrigger.decode(j,j.uint32()));break;case 12:at.location=a.LatLong.decode(j,j.uint32());break;case 13:at.guestCodes.push(a.GuestCode.decode(j,j.uint32()));break;default:j.skipType(bt&7);break}}return at},fromJSON(g){return{collectionId:Rt(g.collectionId)?String(g.collectionId):"",projectId:Rt(g.projectId)?String(g.projectId):"",metadata:Rt(g==null?void 0:g.metadata)?g.metadata:void 0,rendering:Rt(g.rendering)?a.Rendering.fromJSON(g.rendering):void 0,encoding:Rt(g.encoding)?a.Encoding.fromJSON(g.encoding):void 0,sources:Array.isArray(g==null?void 0:g.sources)?g.sources.map(k=>a.Source.fromJSON(k)):[],destinations:Array.isArray(g==null?void 0:g.destinations)?g.destinations.map(k=>a.Destination.fromJSON(k)):[],composition:Rt(g.composition)?a.Composition.fromJSON(g.composition):void 0,maxDuration:Rt(g.maxDuration)?Number(g.maxDuration):void 0,webrtc:Rt(g.webrtc)?a.WebRtc.fromJSON(g.webrtc):void 0,triggers:Array.isArray(g==null?void 0:g.triggers)?g.triggers.map(k=>a.ProjectTrigger.fromJSON(k)):[],location:Rt(g.location)?a.LatLong.fromJSON(g.location):void 0,guestCodes:Array.isArray(g==null?void 0:g.guestCodes)?g.guestCodes.map(k=>a.GuestCode.fromJSON(k)):[]}},toJSON(g){const k={};return g.collectionId!==void 0&&(k.collectionId=g.collectionId),g.projectId!==void 0&&(k.projectId=g.projectId),g.metadata!==void 0&&(k.metadata=g.metadata),g.rendering!==void 0&&(k.rendering=g.rendering?a.Rendering.toJSON(g.rendering):void 0),g.encoding!==void 0&&(k.encoding=g.encoding?a.Encoding.toJSON(g.encoding):void 0),g.sources?k.sources=g.sources.map(j=>j?a.Source.toJSON(j):void 0):k.sources=[],g.destinations?k.destinations=g.destinations.map(j=>j?a.Destination.toJSON(j):void 0):k.destinations=[],g.composition!==void 0&&(k.composition=g.composition?a.Composition.toJSON(g.composition):void 0),g.maxDuration!==void 0&&(k.maxDuration=Math.round(g.maxDuration)),g.webrtc!==void 0&&(k.webrtc=g.webrtc?a.WebRtc.toJSON(g.webrtc):void 0),g.triggers?k.triggers=g.triggers.map(j=>j?a.ProjectTrigger.toJSON(j):void 0):k.triggers=[],g.location!==void 0&&(k.location=g.location?a.LatLong.toJSON(g.location):void 0),g.guestCodes?k.guestCodes=g.guestCodes.map(j=>j?a.GuestCode.toJSON(j):void 0):k.guestCodes=[],k},fromPartial(g){var k,j,St,at,bt,zt,sn,Tn;const _n=fr();return _n.collectionId=(k=g.collectionId)!==null&&k!==void 0?k:"",_n.projectId=(j=g.projectId)!==null&&j!==void 0?j:"",_n.metadata=(St=g.metadata)!==null&&St!==void 0?St:void 0,_n.rendering=g.rendering!==void 0&&g.rendering!==null?a.Rendering.fromPartial(g.rendering):void 0,_n.encoding=g.encoding!==void 0&&g.encoding!==null?a.Encoding.fromPartial(g.encoding):void 0,_n.sources=((at=g.sources)===null||at===void 0?void 0:at.map(cn=>a.Source.fromPartial(cn)))||[],_n.destinations=((bt=g.destinations)===null||bt===void 0?void 0:bt.map(cn=>a.Destination.fromPartial(cn)))||[],_n.composition=g.composition!==void 0&&g.composition!==null?a.Composition.fromPartial(g.composition):void 0,_n.maxDuration=(zt=g.maxDuration)!==null&&zt!==void 0?zt:void 0,_n.webrtc=g.webrtc!==void 0&&g.webrtc!==null?a.WebRtc.fromPartial(g.webrtc):void 0,_n.triggers=((sn=g.triggers)===null||sn===void 0?void 0:sn.map(cn=>a.ProjectTrigger.fromPartial(cn)))||[],_n.location=g.location!==void 0&&g.location!==null?a.LatLong.fromPartial(g.location):void 0,_n.guestCodes=((Tn=g.guestCodes)===null||Tn===void 0?void 0:Tn.map(cn=>a.GuestCode.fromPartial(cn)))||[],_n}};function pr(){return{collectionId:"",metadata:void 0,projects:[],sources:[]}}a.Collection={encode(g,k=_.Writer.create()){g.collectionId!==""&&k.uint32(10).string(g.collectionId),g.metadata!==void 0&&_e.Value.encode(_e.Value.wrap(g.metadata),k.uint32(18).fork()).ldelim();for(const j of g.projects)a.Project.encode(j,k.uint32(26).fork()).ldelim();for(const j of g.sources)a.Source.encode(j,k.uint32(34).fork()).ldelim();return k},decode(g,k){const j=g instanceof _.Reader?g:new _.Reader(g);let St=k===void 0?j.len:j.pos+k;const at=pr();for(;j.pos<St;){const bt=j.uint32();switch(bt>>>3){case 1:at.collectionId=j.string();break;case 2:at.metadata=_e.Value.unwrap(_e.Value.decode(j,j.uint32()));break;case 3:at.projects.push(a.Project.decode(j,j.uint32()));break;case 4:at.sources.push(a.Source.decode(j,j.uint32()));break;default:j.skipType(bt&7);break}}return at},fromJSON(g){return{collectionId:Rt(g.collectionId)?String(g.collectionId):"",metadata:Rt(g==null?void 0:g.metadata)?g.metadata:void 0,projects:Array.isArray(g==null?void 0:g.projects)?g.projects.map(k=>a.Project.fromJSON(k)):[],sources:Array.isArray(g==null?void 0:g.sources)?g.sources.map(k=>a.Source.fromJSON(k)):[]}},toJSON(g){const k={};return g.collectionId!==void 0&&(k.collectionId=g.collectionId),g.metadata!==void 0&&(k.metadata=g.metadata),g.projects?k.projects=g.projects.map(j=>j?a.Project.toJSON(j):void 0):k.projects=[],g.sources?k.sources=g.sources.map(j=>j?a.Source.toJSON(j):void 0):k.sources=[],k},fromPartial(g){var k,j,St,at;const bt=pr();return bt.collectionId=(k=g.collectionId)!==null&&k!==void 0?k:"",bt.metadata=(j=g.metadata)!==null&&j!==void 0?j:void 0,bt.projects=((St=g.projects)===null||St===void 0?void 0:St.map(zt=>a.Project.fromPartial(zt)))||[],bt.sources=((at=g.sources)===null||at===void 0?void 0:at.map(zt=>a.Source.fromPartial(zt)))||[],bt}};function hr(){return{metadata:void 0}}a.CreateCollectionRequest={encode(g,k=_.Writer.create()){return g.metadata!==void 0&&_e.Value.encode(_e.Value.wrap(g.metadata),k.uint32(10).fork()).ldelim(),k},decode(g,k){const j=g instanceof _.Reader?g:new _.Reader(g);let St=k===void 0?j.len:j.pos+k;const at=hr();for(;j.pos<St;){const bt=j.uint32();switch(bt>>>3){case 1:at.metadata=_e.Value.unwrap(_e.Value.decode(j,j.uint32()));break;default:j.skipType(bt&7);break}}return at},fromJSON(g){return{metadata:Rt(g==null?void 0:g.metadata)?g.metadata:void 0}},toJSON(g){const k={};return g.metadata!==void 0&&(k.metadata=g.metadata),k},fromPartial(g){var k;const j=hr();return j.metadata=(k=g.metadata)!==null&&k!==void 0?k:void 0,j}};function mr(){return{collection:void 0}}a.CreateCollectionResponse={encode(g,k=_.Writer.create()){return g.collection!==void 0&&a.Collection.encode(g.collection,k.uint32(10).fork()).ldelim(),k},decode(g,k){const j=g instanceof _.Reader?g:new _.Reader(g);let St=k===void 0?j.len:j.pos+k;const at=mr();for(;j.pos<St;){const bt=j.uint32();switch(bt>>>3){case 1:at.collection=a.Collection.decode(j,j.uint32());break;default:j.skipType(bt&7);break}}return at},fromJSON(g){return{collection:Rt(g.collection)?a.Collection.fromJSON(g.collection):void 0}},toJSON(g){const k={};return g.collection!==void 0&&(k.collection=g.collection?a.Collection.toJSON(g.collection):void 0),k},fromPartial(g){const k=mr();return k.collection=g.collection!==void 0&&g.collection!==null?a.Collection.fromPartial(g.collection):void 0,k}};function vr(){return{collectionId:"",populateProjects:void 0,populateSources:void 0}}a.GetCollectionRequest={encode(g,k=_.Writer.create()){return g.collectionId!==""&&k.uint32(10).string(g.collectionId),g.populateProjects!==void 0&&k.uint32(16).bool(g.populateProjects),g.populateSources!==void 0&&k.uint32(24).bool(g.populateSources),k},decode(g,k){const j=g instanceof _.Reader?g:new _.Reader(g);let St=k===void 0?j.len:j.pos+k;const at=vr();for(;j.pos<St;){const bt=j.uint32();switch(bt>>>3){case 1:at.collectionId=j.string();break;case 2:at.populateProjects=j.bool();break;case 3:at.populateSources=j.bool();break;default:j.skipType(bt&7);break}}return at},fromJSON(g){return{collectionId:Rt(g.collectionId)?String(g.collectionId):"",populateProjects:Rt(g.populateProjects)?Boolean(g.populateProjects):void 0,populateSources:Rt(g.populateSources)?Boolean(g.populateSources):void 0}},toJSON(g){const k={};return g.collectionId!==void 0&&(k.collectionId=g.collectionId),g.populateProjects!==void 0&&(k.populateProjects=g.populateProjects),g.populateSources!==void 0&&(k.populateSources=g.populateSources),k},fromPartial(g){var k,j,St;const at=vr();return at.collectionId=(k=g.collectionId)!==null&&k!==void 0?k:"",at.populateProjects=(j=g.populateProjects)!==null&&j!==void 0?j:void 0,at.populateSources=(St=g.populateSources)!==null&&St!==void 0?St:void 0,at}};function gr(){return{collection:void 0}}a.GetCollectionResponse={encode(g,k=_.Writer.create()){return g.collection!==void 0&&a.Collection.encode(g.collection,k.uint32(10).fork()).ldelim(),k},decode(g,k){const j=g instanceof _.Reader?g:new _.Reader(g);let St=k===void 0?j.len:j.pos+k;const at=gr();for(;j.pos<St;){const bt=j.uint32();switch(bt>>>3){case 1:at.collection=a.Collection.decode(j,j.uint32());break;default:j.skipType(bt&7);break}}return at},fromJSON(g){return{collection:Rt(g.collection)?a.Collection.fromJSON(g.collection):void 0}},toJSON(g){const k={};return g.collection!==void 0&&(k.collection=g.collection?a.Collection.toJSON(g.collection):void 0),k},fromPartial(g){const k=gr();return k.collection=g.collection!==void 0&&g.collection!==null?a.Collection.fromPartial(g.collection):void 0,k}};function yr(){return{collectionId:"",updateMask:void 0,metadata:void 0}}a.UpdateCollectionRequest={encode(g,k=_.Writer.create()){return g.collectionId!==""&&k.uint32(10).string(g.collectionId),g.updateMask!==void 0&&tt.FieldMask.encode(tt.FieldMask.wrap(g.updateMask),k.uint32(18).fork()).ldelim(),g.metadata!==void 0&&_e.Value.encode(_e.Value.wrap(g.metadata),k.uint32(26).fork()).ldelim(),k},decode(g,k){const j=g instanceof _.Reader?g:new _.Reader(g);let St=k===void 0?j.len:j.pos+k;const at=yr();for(;j.pos<St;){const bt=j.uint32();switch(bt>>>3){case 1:at.collectionId=j.string();break;case 2:at.updateMask=tt.FieldMask.unwrap(tt.FieldMask.decode(j,j.uint32()));break;case 3:at.metadata=_e.Value.unwrap(_e.Value.decode(j,j.uint32()));break;default:j.skipType(bt&7);break}}return at},fromJSON(g){return{collectionId:Rt(g.collectionId)?String(g.collectionId):"",updateMask:Rt(g.updateMask)?tt.FieldMask.unwrap(tt.FieldMask.fromJSON(g.updateMask)):void 0,metadata:Rt(g==null?void 0:g.metadata)?g.metadata:void 0}},toJSON(g){const k={};return g.collectionId!==void 0&&(k.collectionId=g.collectionId),g.updateMask!==void 0&&(k.updateMask=tt.FieldMask.toJSON(tt.FieldMask.wrap(g.updateMask))),g.metadata!==void 0&&(k.metadata=g.metadata),k},fromPartial(g){var k,j,St;const at=yr();return at.collectionId=(k=g.collectionId)!==null&&k!==void 0?k:"",at.updateMask=(j=g.updateMask)!==null&&j!==void 0?j:void 0,at.metadata=(St=g.metadata)!==null&&St!==void 0?St:void 0,at}};function Sr(){return{collection:void 0}}a.UpdateCollectionResponse={encode(g,k=_.Writer.create()){return g.collection!==void 0&&a.Collection.encode(g.collection,k.uint32(10).fork()).ldelim(),k},decode(g,k){const j=g instanceof _.Reader?g:new _.Reader(g);let St=k===void 0?j.len:j.pos+k;const at=Sr();for(;j.pos<St;){const bt=j.uint32();switch(bt>>>3){case 1:at.collection=a.Collection.decode(j,j.uint32());break;default:j.skipType(bt&7);break}}return at},fromJSON(g){return{collection:Rt(g.collection)?a.Collection.fromJSON(g.collection):void 0}},toJSON(g){const k={};return g.collection!==void 0&&(k.collection=g.collection?a.Collection.toJSON(g.collection):void 0),k},fromPartial(g){const k=Sr();return k.collection=g.collection!==void 0&&g.collection!==null?a.Collection.fromPartial(g.collection):void 0,k}};function Er(){return{collectionId:"",force:void 0}}a.DeleteCollectionRequest={encode(g,k=_.Writer.create()){return g.collectionId!==""&&k.uint32(10).string(g.collectionId),g.force!==void 0&&k.uint32(16).bool(g.force),k},decode(g,k){const j=g instanceof _.Reader?g:new _.Reader(g);let St=k===void 0?j.len:j.pos+k;const at=Er();for(;j.pos<St;){const bt=j.uint32();switch(bt>>>3){case 1:at.collectionId=j.string();break;case 2:at.force=j.bool();break;default:j.skipType(bt&7);break}}return at},fromJSON(g){return{collectionId:Rt(g.collectionId)?String(g.collectionId):"",force:Rt(g.force)?Boolean(g.force):void 0}},toJSON(g){const k={};return g.collectionId!==void 0&&(k.collectionId=g.collectionId),g.force!==void 0&&(k.force=g.force),k},fromPartial(g){var k,j;const St=Er();return St.collectionId=(k=g.collectionId)!==null&&k!==void 0?k:"",St.force=(j=g.force)!==null&&j!==void 0?j:void 0,St}};function br(){return{sourcesDeleted:0,projectsDeleted:0,projectIdsStopped:[]}}a.DeleteCollectionResponse={encode(g,k=_.Writer.create()){g.sourcesDeleted!==0&&k.uint32(8).uint32(g.sourcesDeleted),g.projectsDeleted!==0&&k.uint32(16).uint32(g.projectsDeleted);for(const j of g.projectIdsStopped)k.uint32(26).string(j);return k},decode(g,k){const j=g instanceof _.Reader?g:new _.Reader(g);let St=k===void 0?j.len:j.pos+k;const at=br();for(;j.pos<St;){const bt=j.uint32();switch(bt>>>3){case 1:at.sourcesDeleted=j.uint32();break;case 2:at.projectsDeleted=j.uint32();break;case 3:at.projectIdsStopped.push(j.string());break;default:j.skipType(bt&7);break}}return at},fromJSON(g){return{sourcesDeleted:Rt(g.sourcesDeleted)?Number(g.sourcesDeleted):0,projectsDeleted:Rt(g.projectsDeleted)?Number(g.projectsDeleted):0,projectIdsStopped:Array.isArray(g==null?void 0:g.projectIdsStopped)?g.projectIdsStopped.map(k=>String(k)):[]}},toJSON(g){const k={};return g.sourcesDeleted!==void 0&&(k.sourcesDeleted=Math.round(g.sourcesDeleted)),g.projectsDeleted!==void 0&&(k.projectsDeleted=Math.round(g.projectsDeleted)),g.projectIdsStopped?k.projectIdsStopped=g.projectIdsStopped.map(j=>j):k.projectIdsStopped=[],k},fromPartial(g){var k,j,St;const at=br();return at.sourcesDeleted=(k=g.sourcesDeleted)!==null&&k!==void 0?k:0,at.projectsDeleted=(j=g.projectsDeleted)!==null&&j!==void 0?j:0,at.projectIdsStopped=((St=g.projectIdsStopped)===null||St===void 0?void 0:St.map(bt=>bt))||[],at}};function _r(){return{}}a.GetCollectionsRequest={encode(g,k=_.Writer.create()){return k},decode(g,k){const j=g instanceof _.Reader?g:new _.Reader(g);let St=k===void 0?j.len:j.pos+k;const at=_r();for(;j.pos<St;){const bt=j.uint32();switch(bt>>>3){default:j.skipType(bt&7);break}}return at},fromJSON(g){return{}},toJSON(g){return{}},fromPartial(g){return _r()}};function Tr(){return{collections:[]}}a.GetCollectionsResponse={encode(g,k=_.Writer.create()){for(const j of g.collections)a.Collection.encode(j,k.uint32(10).fork()).ldelim();return k},decode(g,k){const j=g instanceof _.Reader?g:new _.Reader(g);let St=k===void 0?j.len:j.pos+k;const at=Tr();for(;j.pos<St;){const bt=j.uint32();switch(bt>>>3){case 1:at.collections.push(a.Collection.decode(j,j.uint32()));break;default:j.skipType(bt&7);break}}return at},fromJSON(g){return{collections:Array.isArray(g==null?void 0:g.collections)?g.collections.map(k=>a.Collection.fromJSON(k)):[]}},toJSON(g){const k={};return g.collections?k.collections=g.collections.map(j=>j?a.Collection.toJSON(j):void 0):k.collections=[],k},fromPartial(g){var k;const j=Tr();return j.collections=((k=g.collections)===null||k===void 0?void 0:k.map(St=>a.Collection.fromPartial(St)))||[],j}};function Ir(){return{collectionId:"",metadata:void 0,rendering:void 0,encoding:void 0,composition:void 0,maxDuration:void 0,webrtc:void 0,location:void 0}}a.CreateProjectRequest={encode(g,k=_.Writer.create()){return g.collectionId!==""&&k.uint32(10).string(g.collectionId),g.metadata!==void 0&&_e.Value.encode(_e.Value.wrap(g.metadata),k.uint32(18).fork()).ldelim(),g.rendering!==void 0&&a.Rendering.encode(g.rendering,k.uint32(26).fork()).ldelim(),g.encoding!==void 0&&a.Encoding.encode(g.encoding,k.uint32(34).fork()).ldelim(),g.composition!==void 0&&a.Composition.encode(g.composition,k.uint32(42).fork()).ldelim(),g.maxDuration!==void 0&&k.uint32(48).uint32(g.maxDuration),g.webrtc!==void 0&&a.WebRtc.encode(g.webrtc,k.uint32(58).fork()).ldelim(),g.location!==void 0&&a.LatLong.encode(g.location,k.uint32(74).fork()).ldelim(),k},decode(g,k){const j=g instanceof _.Reader?g:new _.Reader(g);let St=k===void 0?j.len:j.pos+k;const at=Ir();for(;j.pos<St;){const bt=j.uint32();switch(bt>>>3){case 1:at.collectionId=j.string();break;case 2:at.metadata=_e.Value.unwrap(_e.Value.decode(j,j.uint32()));break;case 3:at.rendering=a.Rendering.decode(j,j.uint32());break;case 4:at.encoding=a.Encoding.decode(j,j.uint32());break;case 5:at.composition=a.Composition.decode(j,j.uint32());break;case 6:at.maxDuration=j.uint32();break;case 7:at.webrtc=a.WebRtc.decode(j,j.uint32());break;case 9:at.location=a.LatLong.decode(j,j.uint32());break;default:j.skipType(bt&7);break}}return at},fromJSON(g){return{collectionId:Rt(g.collectionId)?String(g.collectionId):"",metadata:Rt(g==null?void 0:g.metadata)?g.metadata:void 0,rendering:Rt(g.rendering)?a.Rendering.fromJSON(g.rendering):void 0,encoding:Rt(g.encoding)?a.Encoding.fromJSON(g.encoding):void 0,composition:Rt(g.composition)?a.Composition.fromJSON(g.composition):void 0,maxDuration:Rt(g.maxDuration)?Number(g.maxDuration):void 0,webrtc:Rt(g.webrtc)?a.WebRtc.fromJSON(g.webrtc):void 0,location:Rt(g.location)?a.LatLong.fromJSON(g.location):void 0}},toJSON(g){const k={};return g.collectionId!==void 0&&(k.collectionId=g.collectionId),g.metadata!==void 0&&(k.metadata=g.metadata),g.rendering!==void 0&&(k.rendering=g.rendering?a.Rendering.toJSON(g.rendering):void 0),g.encoding!==void 0&&(k.encoding=g.encoding?a.Encoding.toJSON(g.encoding):void 0),g.composition!==void 0&&(k.composition=g.composition?a.Composition.toJSON(g.composition):void 0),g.maxDuration!==void 0&&(k.maxDuration=Math.round(g.maxDuration)),g.webrtc!==void 0&&(k.webrtc=g.webrtc?a.WebRtc.toJSON(g.webrtc):void 0),g.location!==void 0&&(k.location=g.location?a.LatLong.toJSON(g.location):void 0),k},fromPartial(g){var k,j,St;const at=Ir();return at.collectionId=(k=g.collectionId)!==null&&k!==void 0?k:"",at.metadata=(j=g.metadata)!==null&&j!==void 0?j:void 0,at.rendering=g.rendering!==void 0&&g.rendering!==null?a.Rendering.fromPartial(g.rendering):void 0,at.encoding=g.encoding!==void 0&&g.encoding!==null?a.Encoding.fromPartial(g.encoding):void 0,at.composition=g.composition!==void 0&&g.composition!==null?a.Composition.fromPartial(g.composition):void 0,at.maxDuration=(St=g.maxDuration)!==null&&St!==void 0?St:void 0,at.webrtc=g.webrtc!==void 0&&g.webrtc!==null?a.WebRtc.fromPartial(g.webrtc):void 0,at.location=g.location!==void 0&&g.location!==null?a.LatLong.fromPartial(g.location):void 0,at}};function kr(){return{project:void 0}}a.CreateProjectResponse={encode(g,k=_.Writer.create()){return g.project!==void 0&&a.Project.encode(g.project,k.uint32(10).fork()).ldelim(),k},decode(g,k){const j=g instanceof _.Reader?g:new _.Reader(g);let St=k===void 0?j.len:j.pos+k;const at=kr();for(;j.pos<St;){const bt=j.uint32();switch(bt>>>3){case 1:at.project=a.Project.decode(j,j.uint32());break;default:j.skipType(bt&7);break}}return at},fromJSON(g){return{project:Rt(g.project)?a.Project.fromJSON(g.project):void 0}},toJSON(g){const k={};return g.project!==void 0&&(k.project=g.project?a.Project.toJSON(g.project):void 0),k},fromPartial(g){const k=kr();return k.project=g.project!==void 0&&g.project!==null?a.Project.fromPartial(g.project):void 0,k}};function Cr(){return{collectionId:"",projectId:"",updateMask:void 0,metadata:void 0,rendering:void 0,encoding:void 0,composition:void 0,maxDuration:void 0,webrtc:void 0,location:void 0}}a.UpdateProjectRequest={encode(g,k=_.Writer.create()){return g.collectionId!==""&&k.uint32(10).string(g.collectionId),g.projectId!==""&&k.uint32(18).string(g.projectId),g.updateMask!==void 0&&tt.FieldMask.encode(tt.FieldMask.wrap(g.updateMask),k.uint32(26).fork()).ldelim(),g.metadata!==void 0&&_e.Value.encode(_e.Value.wrap(g.metadata),k.uint32(34).fork()).ldelim(),g.rendering!==void 0&&a.Rendering.encode(g.rendering,k.uint32(42).fork()).ldelim(),g.encoding!==void 0&&a.Encoding.encode(g.encoding,k.uint32(50).fork()).ldelim(),g.composition!==void 0&&a.Composition.encode(g.composition,k.uint32(58).fork()).ldelim(),g.maxDuration!==void 0&&k.uint32(64).uint32(g.maxDuration),g.webrtc!==void 0&&a.WebRtc.encode(g.webrtc,k.uint32(74).fork()).ldelim(),g.location!==void 0&&a.LatLong.encode(g.location,k.uint32(82).fork()).ldelim(),k},decode(g,k){const j=g instanceof _.Reader?g:new _.Reader(g);let St=k===void 0?j.len:j.pos+k;const at=Cr();for(;j.pos<St;){const bt=j.uint32();switch(bt>>>3){case 1:at.collectionId=j.string();break;case 2:at.projectId=j.string();break;case 3:at.updateMask=tt.FieldMask.unwrap(tt.FieldMask.decode(j,j.uint32()));break;case 4:at.metadata=_e.Value.unwrap(_e.Value.decode(j,j.uint32()));break;case 5:at.rendering=a.Rendering.decode(j,j.uint32());break;case 6:at.encoding=a.Encoding.decode(j,j.uint32());break;case 7:at.composition=a.Composition.decode(j,j.uint32());break;case 8:at.maxDuration=j.uint32();break;case 9:at.webrtc=a.WebRtc.decode(j,j.uint32());break;case 10:at.location=a.LatLong.decode(j,j.uint32());break;default:j.skipType(bt&7);break}}return at},fromJSON(g){return{collectionId:Rt(g.collectionId)?String(g.collectionId):"",projectId:Rt(g.projectId)?String(g.projectId):"",updateMask:Rt(g.updateMask)?tt.FieldMask.unwrap(tt.FieldMask.fromJSON(g.updateMask)):void 0,metadata:Rt(g==null?void 0:g.metadata)?g.metadata:void 0,rendering:Rt(g.rendering)?a.Rendering.fromJSON(g.rendering):void 0,encoding:Rt(g.encoding)?a.Encoding.fromJSON(g.encoding):void 0,composition:Rt(g.composition)?a.Composition.fromJSON(g.composition):void 0,maxDuration:Rt(g.maxDuration)?Number(g.maxDuration):void 0,webrtc:Rt(g.webrtc)?a.WebRtc.fromJSON(g.webrtc):void 0,location:Rt(g.location)?a.LatLong.fromJSON(g.location):void 0}},toJSON(g){const k={};return g.collectionId!==void 0&&(k.collectionId=g.collectionId),g.projectId!==void 0&&(k.projectId=g.projectId),g.updateMask!==void 0&&(k.updateMask=tt.FieldMask.toJSON(tt.FieldMask.wrap(g.updateMask))),g.metadata!==void 0&&(k.metadata=g.metadata),g.rendering!==void 0&&(k.rendering=g.rendering?a.Rendering.toJSON(g.rendering):void 0),g.encoding!==void 0&&(k.encoding=g.encoding?a.Encoding.toJSON(g.encoding):void 0),g.composition!==void 0&&(k.composition=g.composition?a.Composition.toJSON(g.composition):void 0),g.maxDuration!==void 0&&(k.maxDuration=Math.round(g.maxDuration)),g.webrtc!==void 0&&(k.webrtc=g.webrtc?a.WebRtc.toJSON(g.webrtc):void 0),g.location!==void 0&&(k.location=g.location?a.LatLong.toJSON(g.location):void 0),k},fromPartial(g){var k,j,St,at,bt;const zt=Cr();return zt.collectionId=(k=g.collectionId)!==null&&k!==void 0?k:"",zt.projectId=(j=g.projectId)!==null&&j!==void 0?j:"",zt.updateMask=(St=g.updateMask)!==null&&St!==void 0?St:void 0,zt.metadata=(at=g.metadata)!==null&&at!==void 0?at:void 0,zt.rendering=g.rendering!==void 0&&g.rendering!==null?a.Rendering.fromPartial(g.rendering):void 0,zt.encoding=g.encoding!==void 0&&g.encoding!==null?a.Encoding.fromPartial(g.encoding):void 0,zt.composition=g.composition!==void 0&&g.composition!==null?a.Composition.fromPartial(g.composition):void 0,zt.maxDuration=(bt=g.maxDuration)!==null&&bt!==void 0?bt:void 0,zt.webrtc=g.webrtc!==void 0&&g.webrtc!==null?a.WebRtc.fromPartial(g.webrtc):void 0,zt.location=g.location!==void 0&&g.location!==null?a.LatLong.fromPartial(g.location):void 0,zt}};function Rr(){return{project:void 0,broadcastUpdated:!1}}a.UpdateProjectResponse={encode(g,k=_.Writer.create()){return g.project!==void 0&&a.Project.encode(g.project,k.uint32(10).fork()).ldelim(),g.broadcastUpdated===!0&&k.uint32(16).bool(g.broadcastUpdated),k},decode(g,k){const j=g instanceof _.Reader?g:new _.Reader(g);let St=k===void 0?j.len:j.pos+k;const at=Rr();for(;j.pos<St;){const bt=j.uint32();switch(bt>>>3){case 1:at.project=a.Project.decode(j,j.uint32());break;case 2:at.broadcastUpdated=j.bool();break;default:j.skipType(bt&7);break}}return at},fromJSON(g){return{project:Rt(g.project)?a.Project.fromJSON(g.project):void 0,broadcastUpdated:Rt(g.broadcastUpdated)?Boolean(g.broadcastUpdated):!1}},toJSON(g){const k={};return g.project!==void 0&&(k.project=g.project?a.Project.toJSON(g.project):void 0),g.broadcastUpdated!==void 0&&(k.broadcastUpdated=g.broadcastUpdated),k},fromPartial(g){var k;const j=Rr();return j.project=g.project!==void 0&&g.project!==null?a.Project.fromPartial(g.project):void 0,j.broadcastUpdated=(k=g.broadcastUpdated)!==null&&k!==void 0?k:!1,j}};function Or(){return{collectionId:"",projectId:"",force:void 0}}a.DeleteProjectRequest={encode(g,k=_.Writer.create()){return g.collectionId!==""&&k.uint32(10).string(g.collectionId),g.projectId!==""&&k.uint32(18).string(g.projectId),g.force!==void 0&&k.uint32(24).bool(g.force),k},decode(g,k){const j=g instanceof _.Reader?g:new _.Reader(g);let St=k===void 0?j.len:j.pos+k;const at=Or();for(;j.pos<St;){const bt=j.uint32();switch(bt>>>3){case 1:at.collectionId=j.string();break;case 2:at.projectId=j.string();break;case 3:at.force=j.bool();break;default:j.skipType(bt&7);break}}return at},fromJSON(g){return{collectionId:Rt(g.collectionId)?String(g.collectionId):"",projectId:Rt(g.projectId)?String(g.projectId):"",force:Rt(g.force)?Boolean(g.force):void 0}},toJSON(g){const k={};return g.collectionId!==void 0&&(k.collectionId=g.collectionId),g.projectId!==void 0&&(k.projectId=g.projectId),g.force!==void 0&&(k.force=g.force),k},fromPartial(g){var k,j,St;const at=Or();return at.collectionId=(k=g.collectionId)!==null&&k!==void 0?k:"",at.projectId=(j=g.projectId)!==null&&j!==void 0?j:"",at.force=(St=g.force)!==null&&St!==void 0?St:void 0,at}};function wr(){return{broadcastStopped:!1,layoutsDeleted:0}}a.DeleteProjectResponse={encode(g,k=_.Writer.create()){return g.broadcastStopped===!0&&k.uint32(8).bool(g.broadcastStopped),g.layoutsDeleted!==0&&k.uint32(16).uint32(g.layoutsDeleted),k},decode(g,k){const j=g instanceof _.Reader?g:new _.Reader(g);let St=k===void 0?j.len:j.pos+k;const at=wr();for(;j.pos<St;){const bt=j.uint32();switch(bt>>>3){case 1:at.broadcastStopped=j.bool();break;case 2:at.layoutsDeleted=j.uint32();break;default:j.skipType(bt&7);break}}return at},fromJSON(g){return{broadcastStopped:Rt(g.broadcastStopped)?Boolean(g.broadcastStopped):!1,layoutsDeleted:Rt(g.layoutsDeleted)?Number(g.layoutsDeleted):0}},toJSON(g){const k={};return g.broadcastStopped!==void 0&&(k.broadcastStopped=g.broadcastStopped),g.layoutsDeleted!==void 0&&(k.layoutsDeleted=Math.round(g.layoutsDeleted)),k},fromPartial(g){var k,j;const St=wr();return St.broadcastStopped=(k=g.broadcastStopped)!==null&&k!==void 0?k:!1,St.layoutsDeleted=(j=g.layoutsDeleted)!==null&&j!==void 0?j:0,St}};function Pr(){return{collectionId:"",projectId:"",webrtcStart:void 0}}a.StartProjectBroadcastRequest={encode(g,k=_.Writer.create()){return g.collectionId!==""&&k.uint32(10).string(g.collectionId),g.projectId!==""&&k.uint32(18).string(g.projectId),g.webrtcStart!==void 0&&k.uint32(24).bool(g.webrtcStart),k},decode(g,k){const j=g instanceof _.Reader?g:new _.Reader(g);let St=k===void 0?j.len:j.pos+k;const at=Pr();for(;j.pos<St;){const bt=j.uint32();switch(bt>>>3){case 1:at.collectionId=j.string();break;case 2:at.projectId=j.string();break;case 3:at.webrtcStart=j.bool();break;default:j.skipType(bt&7);break}}return at},fromJSON(g){return{collectionId:Rt(g.collectionId)?String(g.collectionId):"",projectId:Rt(g.projectId)?String(g.projectId):"",webrtcStart:Rt(g.webrtcStart)?Boolean(g.webrtcStart):void 0}},toJSON(g){const k={};return g.collectionId!==void 0&&(k.collectionId=g.collectionId),g.projectId!==void 0&&(k.projectId=g.projectId),g.webrtcStart!==void 0&&(k.webrtcStart=g.webrtcStart),k},fromPartial(g){var k,j,St;const at=Pr();return at.collectionId=(k=g.collectionId)!==null&&k!==void 0?k:"",at.projectId=(j=g.projectId)!==null&&j!==void 0?j:"",at.webrtcStart=(St=g.webrtcStart)!==null&&St!==void 0?St:void 0,at}};function Nr(){return{broadcastId:""}}a.StartProjectBroadcastResponse={encode(g,k=_.Writer.create()){return g.broadcastId!==""&&k.uint32(10).string(g.broadcastId),k},decode(g,k){const j=g instanceof _.Reader?g:new _.Reader(g);let St=k===void 0?j.len:j.pos+k;const at=Nr();for(;j.pos<St;){const bt=j.uint32();switch(bt>>>3){case 1:at.broadcastId=j.string();break;default:j.skipType(bt&7);break}}return at},fromJSON(g){return{broadcastId:Rt(g.broadcastId)?String(g.broadcastId):""}},toJSON(g){const k={};return g.broadcastId!==void 0&&(k.broadcastId=g.broadcastId),k},fromPartial(g){var k;const j=Nr();return j.broadcastId=(k=g.broadcastId)!==null&&k!==void 0?k:"",j}};function Ar(){return{collectionId:"",projectId:"",webrtcStop:void 0}}a.StopProjectBroadcastRequest={encode(g,k=_.Writer.create()){return g.collectionId!==""&&k.uint32(10).string(g.collectionId),g.projectId!==""&&k.uint32(18).string(g.projectId),g.webrtcStop!==void 0&&k.uint32(24).bool(g.webrtcStop),k},decode(g,k){const j=g instanceof _.Reader?g:new _.Reader(g);let St=k===void 0?j.len:j.pos+k;const at=Ar();for(;j.pos<St;){const bt=j.uint32();switch(bt>>>3){case 1:at.collectionId=j.string();break;case 2:at.projectId=j.string();break;case 3:at.webrtcStop=j.bool();break;default:j.skipType(bt&7);break}}return at},fromJSON(g){return{collectionId:Rt(g.collectionId)?String(g.collectionId):"",projectId:Rt(g.projectId)?String(g.projectId):"",webrtcStop:Rt(g.webrtcStop)?Boolean(g.webrtcStop):void 0}},toJSON(g){const k={};return g.collectionId!==void 0&&(k.collectionId=g.collectionId),g.projectId!==void 0&&(k.projectId=g.projectId),g.webrtcStop!==void 0&&(k.webrtcStop=g.webrtcStop),k},fromPartial(g){var k,j,St;const at=Ar();return at.collectionId=(k=g.collectionId)!==null&&k!==void 0?k:"",at.projectId=(j=g.projectId)!==null&&j!==void 0?j:"",at.webrtcStop=(St=g.webrtcStop)!==null&&St!==void 0?St:void 0,at}};function Lr(){return{}}a.StopProjectBroadcastResponse={encode(g,k=_.Writer.create()){return k},decode(g,k){const j=g instanceof _.Reader?g:new _.Reader(g);let St=k===void 0?j.len:j.pos+k;const at=Lr();for(;j.pos<St;){const bt=j.uint32();switch(bt>>>3){default:j.skipType(bt&7);break}}return at},fromJSON(g){return{}},toJSON(g){return{}},fromPartial(g){return Lr()}};function Dr(){return{collectionId:"",projectId:"",status:void 0}}a.GetProjectRequest={encode(g,k=_.Writer.create()){return g.collectionId!==""&&k.uint32(10).string(g.collectionId),g.projectId!==""&&k.uint32(18).string(g.projectId),g.status!==void 0&&k.uint32(24).bool(g.status),k},decode(g,k){const j=g instanceof _.Reader?g:new _.Reader(g);let St=k===void 0?j.len:j.pos+k;const at=Dr();for(;j.pos<St;){const bt=j.uint32();switch(bt>>>3){case 1:at.collectionId=j.string();break;case 2:at.projectId=j.string();break;case 3:at.status=j.bool();break;default:j.skipType(bt&7);break}}return at},fromJSON(g){return{collectionId:Rt(g.collectionId)?String(g.collectionId):"",projectId:Rt(g.projectId)?String(g.projectId):"",status:Rt(g.status)?Boolean(g.status):void 0}},toJSON(g){const k={};return g.collectionId!==void 0&&(k.collectionId=g.collectionId),g.projectId!==void 0&&(k.projectId=g.projectId),g.status!==void 0&&(k.status=g.status),k},fromPartial(g){var k,j,St;const at=Dr();return at.collectionId=(k=g.collectionId)!==null&&k!==void 0?k:"",at.projectId=(j=g.projectId)!==null&&j!==void 0?j:"",at.status=(St=g.status)!==null&&St!==void 0?St:void 0,at}};function $r(){return{project:void 0,status:void 0}}a.GetProjectResponse={encode(g,k=_.Writer.create()){return g.project!==void 0&&a.Project.encode(g.project,k.uint32(10).fork()).ldelim(),g.status!==void 0&&a.ProjectBroadcastStatus.encode(g.status,k.uint32(18).fork()).ldelim(),k},decode(g,k){const j=g instanceof _.Reader?g:new _.Reader(g);let St=k===void 0?j.len:j.pos+k;const at=$r();for(;j.pos<St;){const bt=j.uint32();switch(bt>>>3){case 1:at.project=a.Project.decode(j,j.uint32());break;case 2:at.status=a.ProjectBroadcastStatus.decode(j,j.uint32());break;default:j.skipType(bt&7);break}}return at},fromJSON(g){return{project:Rt(g.project)?a.Project.fromJSON(g.project):void 0,status:Rt(g.status)?a.ProjectBroadcastStatus.fromJSON(g.status):void 0}},toJSON(g){const k={};return g.project!==void 0&&(k.project=g.project?a.Project.toJSON(g.project):void 0),g.status!==void 0&&(k.status=g.status?a.ProjectBroadcastStatus.toJSON(g.status):void 0),k},fromPartial(g){const k=$r();return k.project=g.project!==void 0&&g.project!==null?a.Project.fromPartial(g.project):void 0,k.status=g.status!==void 0&&g.status!==null?a.ProjectBroadcastStatus.fromPartial(g.status):void 0,k}};function Mr(){return{collectionId:"",projectId:"",format:void 0}}a.GetProjectBroadcastSnapshotRequest={encode(g,k=_.Writer.create()){return g.collectionId!==""&&k.uint32(10).string(g.collectionId),g.projectId!==""&&k.uint32(18).string(g.projectId),g.format!==void 0&&k.uint32(24).int32(st(g.format)),k},decode(g,k){const j=g instanceof _.Reader?g:new _.Reader(g);let St=k===void 0?j.len:j.pos+k;const at=Mr();for(;j.pos<St;){const bt=j.uint32();switch(bt>>>3){case 1:at.collectionId=j.string();break;case 2:at.projectId=j.string();break;case 3:at.format=ot(j.int32());break;default:j.skipType(bt&7);break}}return at},fromJSON(g){return{collectionId:Rt(g.collectionId)?String(g.collectionId):"",projectId:Rt(g.projectId)?String(g.projectId):"",format:Rt(g.format)?ot(g.format):void 0}},toJSON(g){const k={};return g.collectionId!==void 0&&(k.collectionId=g.collectionId),g.projectId!==void 0&&(k.projectId=g.projectId),g.format!==void 0&&(k.format=g.format!==void 0?it(g.format):void 0),k},fromPartial(g){var k,j,St;const at=Mr();return at.collectionId=(k=g.collectionId)!==null&&k!==void 0?k:"",at.projectId=(j=g.projectId)!==null&&j!==void 0?j:"",at.format=(St=g.format)!==null&&St!==void 0?St:void 0,at}};function Ur(){return{format:rt.IMAGE_FORMAT_UNSPECIFIED,image:new Uint8Array}}a.GetProjectBroadcastSnapshotResponse={encode(g,k=_.Writer.create()){return g.format!==rt.IMAGE_FORMAT_UNSPECIFIED&&k.uint32(8).int32(st(g.format)),g.image.length!==0&&k.uint32(18).bytes(g.image),k},decode(g,k){const j=g instanceof _.Reader?g:new _.Reader(g);let St=k===void 0?j.len:j.pos+k;const at=Ur();for(;j.pos<St;){const bt=j.uint32();switch(bt>>>3){case 1:at.format=ot(j.int32());break;case 2:at.image=j.bytes();break;default:j.skipType(bt&7);break}}return at},fromJSON(g){return{format:Rt(g.format)?ot(g.format):rt.IMAGE_FORMAT_UNSPECIFIED,image:Rt(g.image)?us(g.image):new Uint8Array}},toJSON(g){const k={};return g.format!==void 0&&(k.format=it(g.format)),g.image!==void 0&&(k.image=cs(g.image!==void 0?g.image:new Uint8Array)),k},fromPartial(g){var k,j;const St=Ur();return St.format=(k=g.format)!==null&&k!==void 0?k:rt.IMAGE_FORMAT_UNSPECIFIED,St.image=(j=g.image)!==null&&j!==void 0?j:new Uint8Array,St}};function Br(){return{collectionId:"",projectId:""}}a.GetProjectBroadcastStatusRequest={encode(g,k=_.Writer.create()){return g.collectionId!==""&&k.uint32(10).string(g.collectionId),g.projectId!==""&&k.uint32(18).string(g.projectId),k},decode(g,k){const j=g instanceof _.Reader?g:new _.Reader(g);let St=k===void 0?j.len:j.pos+k;const at=Br();for(;j.pos<St;){const bt=j.uint32();switch(bt>>>3){case 1:at.collectionId=j.string();break;case 2:at.projectId=j.string();break;default:j.skipType(bt&7);break}}return at},fromJSON(g){return{collectionId:Rt(g.collectionId)?String(g.collectionId):"",projectId:Rt(g.projectId)?String(g.projectId):""}},toJSON(g){const k={};return g.collectionId!==void 0&&(k.collectionId=g.collectionId),g.projectId!==void 0&&(k.projectId=g.projectId),k},fromPartial(g){var k,j;const St=Br();return St.collectionId=(k=g.collectionId)!==null&&k!==void 0?k:"",St.projectId=(j=g.projectId)!==null&&j!==void 0?j:"",St}};function Vr(){return{status:void 0}}a.GetProjectBroadcastStatusResponse={encode(g,k=_.Writer.create()){return g.status!==void 0&&a.ProjectBroadcastStatus.encode(g.status,k.uint32(10).fork()).ldelim(),k},decode(g,k){const j=g instanceof _.Reader?g:new _.Reader(g);let St=k===void 0?j.len:j.pos+k;const at=Vr();for(;j.pos<St;){const bt=j.uint32();switch(bt>>>3){case 1:at.status=a.ProjectBroadcastStatus.decode(j,j.uint32());break;default:j.skipType(bt&7);break}}return at},fromJSON(g){return{status:Rt(g.status)?a.ProjectBroadcastStatus.fromJSON(g.status):void 0}},toJSON(g){const k={};return g.status!==void 0&&(k.status=g.status?a.ProjectBroadcastStatus.toJSON(g.status):void 0),k},fromPartial(g){const k=Vr();return k.status=g.status!==void 0&&g.status!==null?a.ProjectBroadcastStatus.fromPartial(g.status):void 0,k}};function Fr(){return{collectionId:"",projectId:""}}a.StartProjectWebRtcRequest={encode(g,k=_.Writer.create()){return g.collectionId!==""&&k.uint32(10).string(g.collectionId),g.projectId!==""&&k.uint32(18).string(g.projectId),k},decode(g,k){const j=g instanceof _.Reader?g:new _.Reader(g);let St=k===void 0?j.len:j.pos+k;const at=Fr();for(;j.pos<St;){const bt=j.uint32();switch(bt>>>3){case 1:at.collectionId=j.string();break;case 2:at.projectId=j.string();break;default:j.skipType(bt&7);break}}return at},fromJSON(g){return{collectionId:Rt(g.collectionId)?String(g.collectionId):"",projectId:Rt(g.projectId)?String(g.projectId):""}},toJSON(g){const k={};return g.collectionId!==void 0&&(k.collectionId=g.collectionId),g.projectId!==void 0&&(k.projectId=g.projectId),k},fromPartial(g){var k,j;const St=Fr();return St.collectionId=(k=g.collectionId)!==null&&k!==void 0?k:"",St.projectId=(j=g.projectId)!==null&&j!==void 0?j:"",St}};function Jr(){return{}}a.StartProjectWebRtcResponse={encode(g,k=_.Writer.create()){return k},decode(g,k){const j=g instanceof _.Reader?g:new _.Reader(g);let St=k===void 0?j.len:j.pos+k;const at=Jr();for(;j.pos<St;){const bt=j.uint32();switch(bt>>>3){default:j.skipType(bt&7);break}}return at},fromJSON(g){return{}},toJSON(g){return{}},fromPartial(g){return Jr()}};function qr(){return{collectionId:"",projectId:""}}a.StopProjectWebRtcRequest={encode(g,k=_.Writer.create()){return g.collectionId!==""&&k.uint32(10).string(g.collectionId),g.projectId!==""&&k.uint32(18).string(g.projectId),k},decode(g,k){const j=g instanceof _.Reader?g:new _.Reader(g);let St=k===void 0?j.len:j.pos+k;const at=qr();for(;j.pos<St;){const bt=j.uint32();switch(bt>>>3){case 1:at.collectionId=j.string();break;case 2:at.projectId=j.string();break;default:j.skipType(bt&7);break}}return at},fromJSON(g){return{collectionId:Rt(g.collectionId)?String(g.collectionId):"",projectId:Rt(g.projectId)?String(g.projectId):""}},toJSON(g){const k={};return g.collectionId!==void 0&&(k.collectionId=g.collectionId),g.projectId!==void 0&&(k.projectId=g.projectId),k},fromPartial(g){var k,j;const St=qr();return St.collectionId=(k=g.collectionId)!==null&&k!==void 0?k:"",St.projectId=(j=g.projectId)!==null&&j!==void 0?j:"",St}};function Gr(){return{}}a.StopProjectWebRtcResponse={encode(g,k=_.Writer.create()){return k},decode(g,k){const j=g instanceof _.Reader?g:new _.Reader(g);let St=k===void 0?j.len:j.pos+k;const at=Gr();for(;j.pos<St;){const bt=j.uint32();switch(bt>>>3){default:j.skipType(bt&7);break}}return at},fromJSON(g){return{}},toJSON(g){return{}},fromPartial(g){return Gr()}};function xr(){return{collectionId:"",projectId:"",metadata:void 0,address:void 0,enabled:void 0,timeout:void 0}}a.CreateDestinationRequest={encode(g,k=_.Writer.create()){return g.collectionId!==""&&k.uint32(10).string(g.collectionId),g.projectId!==""&&k.uint32(18).string(g.projectId),g.metadata!==void 0&&_e.Value.encode(_e.Value.wrap(g.metadata),k.uint32(26).fork()).ldelim(),g.address!==void 0&&a.DestinationAddress.encode(g.address,k.uint32(42).fork()).ldelim(),g.enabled!==void 0&&k.uint32(48).bool(g.enabled),g.timeout!==void 0&&k.uint32(56).uint32(g.timeout),k},decode(g,k){const j=g instanceof _.Reader?g:new _.Reader(g);let St=k===void 0?j.len:j.pos+k;const at=xr();for(;j.pos<St;){const bt=j.uint32();switch(bt>>>3){case 1:at.collectionId=j.string();break;case 2:at.projectId=j.string();break;case 3:at.metadata=_e.Value.unwrap(_e.Value.decode(j,j.uint32()));break;case 5:at.address=a.DestinationAddress.decode(j,j.uint32());break;case 6:at.enabled=j.bool();break;case 7:at.timeout=j.uint32();break;default:j.skipType(bt&7);break}}return at},fromJSON(g){return{collectionId:Rt(g.collectionId)?String(g.collectionId):"",projectId:Rt(g.projectId)?String(g.projectId):"",metadata:Rt(g==null?void 0:g.metadata)?g.metadata:void 0,address:Rt(g.address)?a.DestinationAddress.fromJSON(g.address):void 0,enabled:Rt(g.enabled)?Boolean(g.enabled):void 0,timeout:Rt(g.timeout)?Number(g.timeout):void 0}},toJSON(g){const k={};return g.collectionId!==void 0&&(k.collectionId=g.collectionId),g.projectId!==void 0&&(k.projectId=g.projectId),g.metadata!==void 0&&(k.metadata=g.metadata),g.address!==void 0&&(k.address=g.address?a.DestinationAddress.toJSON(g.address):void 0),g.enabled!==void 0&&(k.enabled=g.enabled),g.timeout!==void 0&&(k.timeout=Math.round(g.timeout)),k},fromPartial(g){var k,j,St,at,bt;const zt=xr();return zt.collectionId=(k=g.collectionId)!==null&&k!==void 0?k:"",zt.projectId=(j=g.projectId)!==null&&j!==void 0?j:"",zt.metadata=(St=g.metadata)!==null&&St!==void 0?St:void 0,zt.address=g.address!==void 0&&g.address!==null?a.DestinationAddress.fromPartial(g.address):void 0,zt.enabled=(at=g.enabled)!==null&&at!==void 0?at:void 0,zt.timeout=(bt=g.timeout)!==null&&bt!==void 0?bt:void 0,zt}};function Wr(){return{destination:void 0}}a.CreateDestinationResponse={encode(g,k=_.Writer.create()){return g.destination!==void 0&&a.Destination.encode(g.destination,k.uint32(10).fork()).ldelim(),k},decode(g,k){const j=g instanceof _.Reader?g:new _.Reader(g);let St=k===void 0?j.len:j.pos+k;const at=Wr();for(;j.pos<St;){const bt=j.uint32();switch(bt>>>3){case 1:at.destination=a.Destination.decode(j,j.uint32());break;default:j.skipType(bt&7);break}}return at},fromJSON(g){return{destination:Rt(g.destination)?a.Destination.fromJSON(g.destination):void 0}},toJSON(g){const k={};return g.destination!==void 0&&(k.destination=g.destination?a.Destination.toJSON(g.destination):void 0),k},fromPartial(g){const k=Wr();return k.destination=g.destination!==void 0&&g.destination!==null?a.Destination.fromPartial(g.destination):void 0,k}};function Hr(){return{collectionId:"",projectId:"",destinationId:""}}a.GetDestinationRequest={encode(g,k=_.Writer.create()){return g.collectionId!==""&&k.uint32(10).string(g.collectionId),g.projectId!==""&&k.uint32(18).string(g.projectId),g.destinationId!==""&&k.uint32(26).string(g.destinationId),k},decode(g,k){const j=g instanceof _.Reader?g:new _.Reader(g);let St=k===void 0?j.len:j.pos+k;const at=Hr();for(;j.pos<St;){const bt=j.uint32();switch(bt>>>3){case 1:at.collectionId=j.string();break;case 2:at.projectId=j.string();break;case 3:at.destinationId=j.string();break;default:j.skipType(bt&7);break}}return at},fromJSON(g){return{collectionId:Rt(g.collectionId)?String(g.collectionId):"",projectId:Rt(g.projectId)?String(g.projectId):"",destinationId:Rt(g.destinationId)?String(g.destinationId):""}},toJSON(g){const k={};return g.collectionId!==void 0&&(k.collectionId=g.collectionId),g.projectId!==void 0&&(k.projectId=g.projectId),g.destinationId!==void 0&&(k.destinationId=g.destinationId),k},fromPartial(g){var k,j,St;const at=Hr();return at.collectionId=(k=g.collectionId)!==null&&k!==void 0?k:"",at.projectId=(j=g.projectId)!==null&&j!==void 0?j:"",at.destinationId=(St=g.destinationId)!==null&&St!==void 0?St:"",at}};function zr(){return{destination:void 0}}a.GetDestinationResponse={encode(g,k=_.Writer.create()){return g.destination!==void 0&&a.Destination.encode(g.destination,k.uint32(10).fork()).ldelim(),k},decode(g,k){const j=g instanceof _.Reader?g:new _.Reader(g);let St=k===void 0?j.len:j.pos+k;const at=zr();for(;j.pos<St;){const bt=j.uint32();switch(bt>>>3){case 1:at.destination=a.Destination.decode(j,j.uint32());break;default:j.skipType(bt&7);break}}return at},fromJSON(g){return{destination:Rt(g.destination)?a.Destination.fromJSON(g.destination):void 0}},toJSON(g){const k={};return g.destination!==void 0&&(k.destination=g.destination?a.Destination.toJSON(g.destination):void 0),k},fromPartial(g){const k=zr();return k.destination=g.destination!==void 0&&g.destination!==null?a.Destination.fromPartial(g.destination):void 0,k}};function Yr(){return{collectionId:"",projectId:"",destinationId:"",force:void 0}}a.DeleteDestinationRequest={encode(g,k=_.Writer.create()){return g.collectionId!==""&&k.uint32(10).string(g.collectionId),g.projectId!==""&&k.uint32(18).string(g.projectId),g.destinationId!==""&&k.uint32(26).string(g.destinationId),g.force!==void 0&&k.uint32(32).bool(g.force),k},decode(g,k){const j=g instanceof _.Reader?g:new _.Reader(g);let St=k===void 0?j.len:j.pos+k;const at=Yr();for(;j.pos<St;){const bt=j.uint32();switch(bt>>>3){case 1:at.collectionId=j.string();break;case 2:at.projectId=j.string();break;case 3:at.destinationId=j.string();break;case 4:at.force=j.bool();break;default:j.skipType(bt&7);break}}return at},fromJSON(g){return{collectionId:Rt(g.collectionId)?String(g.collectionId):"",projectId:Rt(g.projectId)?String(g.projectId):"",destinationId:Rt(g.destinationId)?String(g.destinationId):"",force:Rt(g.force)?Boolean(g.force):void 0}},toJSON(g){const k={};return g.collectionId!==void 0&&(k.collectionId=g.collectionId),g.projectId!==void 0&&(k.projectId=g.projectId),g.destinationId!==void 0&&(k.destinationId=g.destinationId),g.force!==void 0&&(k.force=g.force),k},fromPartial(g){var k,j,St,at;const bt=Yr();return bt.collectionId=(k=g.collectionId)!==null&&k!==void 0?k:"",bt.projectId=(j=g.projectId)!==null&&j!==void 0?j:"",bt.destinationId=(St=g.destinationId)!==null&&St!==void 0?St:"",bt.force=(at=g.force)!==null&&at!==void 0?at:void 0,bt}};function Kr(){return{broadcastUpdated:!1}}a.DeleteDestinationResponse={encode(g,k=_.Writer.create()){return g.broadcastUpdated===!0&&k.uint32(8).bool(g.broadcastUpdated),k},decode(g,k){const j=g instanceof _.Reader?g:new _.Reader(g);let St=k===void 0?j.len:j.pos+k;const at=Kr();for(;j.pos<St;){const bt=j.uint32();switch(bt>>>3){case 1:at.broadcastUpdated=j.bool();break;default:j.skipType(bt&7);break}}return at},fromJSON(g){return{broadcastUpdated:Rt(g.broadcastUpdated)?Boolean(g.broadcastUpdated):!1}},toJSON(g){const k={};return g.broadcastUpdated!==void 0&&(k.broadcastUpdated=g.broadcastUpdated),k},fromPartial(g){var k;const j=Kr();return j.broadcastUpdated=(k=g.broadcastUpdated)!==null&&k!==void 0?k:!1,j}};function Qr(){return{collectionId:"",projectId:"",destinationId:"",updateMask:void 0,metadata:void 0,address:void 0,enabled:void 0,timeout:void 0}}a.UpdateDestinationRequest={encode(g,k=_.Writer.create()){return g.collectionId!==""&&k.uint32(10).string(g.collectionId),g.projectId!==""&&k.uint32(18).string(g.projectId),g.destinationId!==""&&k.uint32(26).string(g.destinationId),g.updateMask!==void 0&&tt.FieldMask.encode(tt.FieldMask.wrap(g.updateMask),k.uint32(34).fork()).ldelim(),g.metadata!==void 0&&_e.Value.encode(_e.Value.wrap(g.metadata),k.uint32(42).fork()).ldelim(),g.address!==void 0&&a.DestinationAddress.encode(g.address,k.uint32(50).fork()).ldelim(),g.enabled!==void 0&&k.uint32(56).bool(g.enabled),g.timeout!==void 0&&k.uint32(64).uint32(g.timeout),k},decode(g,k){const j=g instanceof _.Reader?g:new _.Reader(g);let St=k===void 0?j.len:j.pos+k;const at=Qr();for(;j.pos<St;){const bt=j.uint32();switch(bt>>>3){case 1:at.collectionId=j.string();break;case 2:at.projectId=j.string();break;case 3:at.destinationId=j.string();break;case 4:at.updateMask=tt.FieldMask.unwrap(tt.FieldMask.decode(j,j.uint32()));break;case 5:at.metadata=_e.Value.unwrap(_e.Value.decode(j,j.uint32()));break;case 6:at.address=a.DestinationAddress.decode(j,j.uint32());break;case 7:at.enabled=j.bool();break;case 8:at.timeout=j.uint32();break;default:j.skipType(bt&7);break}}return at},fromJSON(g){return{collectionId:Rt(g.collectionId)?String(g.collectionId):"",projectId:Rt(g.projectId)?String(g.projectId):"",destinationId:Rt(g.destinationId)?String(g.destinationId):"",updateMask:Rt(g.updateMask)?tt.FieldMask.unwrap(tt.FieldMask.fromJSON(g.updateMask)):void 0,metadata:Rt(g==null?void 0:g.metadata)?g.metadata:void 0,address:Rt(g.address)?a.DestinationAddress.fromJSON(g.address):void 0,enabled:Rt(g.enabled)?Boolean(g.enabled):void 0,timeout:Rt(g.timeout)?Number(g.timeout):void 0}},toJSON(g){const k={};return g.collectionId!==void 0&&(k.collectionId=g.collectionId),g.projectId!==void 0&&(k.projectId=g.projectId),g.destinationId!==void 0&&(k.destinationId=g.destinationId),g.updateMask!==void 0&&(k.updateMask=tt.FieldMask.toJSON(tt.FieldMask.wrap(g.updateMask))),g.metadata!==void 0&&(k.metadata=g.metadata),g.address!==void 0&&(k.address=g.address?a.DestinationAddress.toJSON(g.address):void 0),g.enabled!==void 0&&(k.enabled=g.enabled),g.timeout!==void 0&&(k.timeout=Math.round(g.timeout)),k},fromPartial(g){var k,j,St,at,bt,zt,sn;const Tn=Qr();return Tn.collectionId=(k=g.collectionId)!==null&&k!==void 0?k:"",Tn.projectId=(j=g.projectId)!==null&&j!==void 0?j:"",Tn.destinationId=(St=g.destinationId)!==null&&St!==void 0?St:"",Tn.updateMask=(at=g.updateMask)!==null&&at!==void 0?at:void 0,Tn.metadata=(bt=g.metadata)!==null&&bt!==void 0?bt:void 0,Tn.address=g.address!==void 0&&g.address!==null?a.DestinationAddress.fromPartial(g.address):void 0,Tn.enabled=(zt=g.enabled)!==null&&zt!==void 0?zt:void 0,Tn.timeout=(sn=g.timeout)!==null&&sn!==void 0?sn:void 0,Tn}};function Zr(){return{destination:void 0,broadcastUpdated:!1}}a.UpdateDestinationResponse={encode(g,k=_.Writer.create()){return g.destination!==void 0&&a.Destination.encode(g.destination,k.uint32(10).fork()).ldelim(),g.broadcastUpdated===!0&&k.uint32(16).bool(g.broadcastUpdated),k},decode(g,k){const j=g instanceof _.Reader?g:new _.Reader(g);let St=k===void 0?j.len:j.pos+k;const at=Zr();for(;j.pos<St;){const bt=j.uint32();switch(bt>>>3){case 1:at.destination=a.Destination.decode(j,j.uint32());break;case 2:at.broadcastUpdated=j.bool();break;default:j.skipType(bt&7);break}}return at},fromJSON(g){return{destination:Rt(g.destination)?a.Destination.fromJSON(g.destination):void 0,broadcastUpdated:Rt(g.broadcastUpdated)?Boolean(g.broadcastUpdated):!1}},toJSON(g){const k={};return g.destination!==void 0&&(k.destination=g.destination?a.Destination.toJSON(g.destination):void 0),g.broadcastUpdated!==void 0&&(k.broadcastUpdated=g.broadcastUpdated),k},fromPartial(g){var k;const j=Zr();return j.destination=g.destination!==void 0&&g.destination!==null?a.Destination.fromPartial(g.destination):void 0,j.broadcastUpdated=(k=g.broadcastUpdated)!==null&&k!==void 0?k:!1,j}};function Xr(){return{collectionId:"",metadata:void 0,address:void 0,preview:void 0}}a.CreateSourceRequest={encode(g,k=_.Writer.create()){return g.collectionId!==""&&k.uint32(10).string(g.collectionId),g.metadata!==void 0&&_e.Value.encode(_e.Value.wrap(g.metadata),k.uint32(18).fork()).ldelim(),g.address!==void 0&&a.SourceAddress.encode(g.address,k.uint32(26).fork()).ldelim(),g.preview!==void 0&&a.PreviewAddress.encode(g.preview,k.uint32(34).fork()).ldelim(),k},decode(g,k){const j=g instanceof _.Reader?g:new _.Reader(g);let St=k===void 0?j.len:j.pos+k;const at=Xr();for(;j.pos<St;){const bt=j.uint32();switch(bt>>>3){case 1:at.collectionId=j.string();break;case 2:at.metadata=_e.Value.unwrap(_e.Value.decode(j,j.uint32()));break;case 3:at.address=a.SourceAddress.decode(j,j.uint32());break;case 4:at.preview=a.PreviewAddress.decode(j,j.uint32());break;default:j.skipType(bt&7);break}}return at},fromJSON(g){return{collectionId:Rt(g.collectionId)?String(g.collectionId):"",metadata:Rt(g==null?void 0:g.metadata)?g.metadata:void 0,address:Rt(g.address)?a.SourceAddress.fromJSON(g.address):void 0,preview:Rt(g.preview)?a.PreviewAddress.fromJSON(g.preview):void 0}},toJSON(g){const k={};return g.collectionId!==void 0&&(k.collectionId=g.collectionId),g.metadata!==void 0&&(k.metadata=g.metadata),g.address!==void 0&&(k.address=g.address?a.SourceAddress.toJSON(g.address):void 0),g.preview!==void 0&&(k.preview=g.preview?a.PreviewAddress.toJSON(g.preview):void 0),k},fromPartial(g){var k,j;const St=Xr();return St.collectionId=(k=g.collectionId)!==null&&k!==void 0?k:"",St.metadata=(j=g.metadata)!==null&&j!==void 0?j:void 0,St.address=g.address!==void 0&&g.address!==null?a.SourceAddress.fromPartial(g.address):void 0,St.preview=g.preview!==void 0&&g.preview!==null?a.PreviewAddress.fromPartial(g.preview):void 0,St}};function jr(){return{source:void 0}}a.CreateSourceResponse={encode(g,k=_.Writer.create()){return g.source!==void 0&&a.Source.encode(g.source,k.uint32(10).fork()).ldelim(),k},decode(g,k){const j=g instanceof _.Reader?g:new _.Reader(g);let St=k===void 0?j.len:j.pos+k;const at=jr();for(;j.pos<St;){const bt=j.uint32();switch(bt>>>3){case 1:at.source=a.Source.decode(j,j.uint32());break;default:j.skipType(bt&7);break}}return at},fromJSON(g){return{source:Rt(g.source)?a.Source.fromJSON(g.source):void 0}},toJSON(g){const k={};return g.source!==void 0&&(k.source=g.source?a.Source.toJSON(g.source):void 0),k},fromPartial(g){const k=jr();return k.source=g.source!==void 0&&g.source!==null?a.Source.fromPartial(g.source):void 0,k}};function _i(){return{collectionId:"",sourceId:"",force:void 0}}a.DeleteSourceRequest={encode(g,k=_.Writer.create()){return g.collectionId!==""&&k.uint32(10).string(g.collectionId),g.sourceId!==""&&k.uint32(18).string(g.sourceId),g.force!==void 0&&k.uint32(24).bool(g.force),k},decode(g,k){const j=g instanceof _.Reader?g:new _.Reader(g);let St=k===void 0?j.len:j.pos+k;const at=_i();for(;j.pos<St;){const bt=j.uint32();switch(bt>>>3){case 1:at.collectionId=j.string();break;case 2:at.sourceId=j.string();break;case 3:at.force=j.bool();break;default:j.skipType(bt&7);break}}return at},fromJSON(g){return{collectionId:Rt(g.collectionId)?String(g.collectionId):"",sourceId:Rt(g.sourceId)?String(g.sourceId):"",force:Rt(g.force)?Boolean(g.force):void 0}},toJSON(g){const k={};return g.collectionId!==void 0&&(k.collectionId=g.collectionId),g.sourceId!==void 0&&(k.sourceId=g.sourceId),g.force!==void 0&&(k.force=g.force),k},fromPartial(g){var k,j,St;const at=_i();return at.collectionId=(k=g.collectionId)!==null&&k!==void 0?k:"",at.sourceId=(j=g.sourceId)!==null&&j!==void 0?j:"",at.force=(St=g.force)!==null&&St!==void 0?St:void 0,at}};function va(){return{projectIdsUpdated:[]}}a.DeleteSourceResponse={encode(g,k=_.Writer.create()){for(const j of g.projectIdsUpdated)k.uint32(26).string(j);return k},decode(g,k){const j=g instanceof _.Reader?g:new _.Reader(g);let St=k===void 0?j.len:j.pos+k;const at=va();for(;j.pos<St;){const bt=j.uint32();switch(bt>>>3){case 3:at.projectIdsUpdated.push(j.string());break;default:j.skipType(bt&7);break}}return at},fromJSON(g){return{projectIdsUpdated:Array.isArray(g==null?void 0:g.projectIdsUpdated)?g.projectIdsUpdated.map(k=>String(k)):[]}},toJSON(g){const k={};return g.projectIdsUpdated?k.projectIdsUpdated=g.projectIdsUpdated.map(j=>j):k.projectIdsUpdated=[],k},fromPartial(g){var k;const j=va();return j.projectIdsUpdated=((k=g.projectIdsUpdated)===null||k===void 0?void 0:k.map(St=>St))||[],j}};function ga(){return{collectionId:"",projectId:"",sourceId:"",trigger:void 0}}a.AddSourceToProjectRequest={encode(g,k=_.Writer.create()){return g.collectionId!==""&&k.uint32(10).string(g.collectionId),g.projectId!==""&&k.uint32(18).string(g.projectId),g.sourceId!==""&&k.uint32(26).string(g.sourceId),g.trigger!==void 0&&a.SourceTrigger.encode(g.trigger,k.uint32(34).fork()).ldelim(),k},decode(g,k){const j=g instanceof _.Reader?g:new _.Reader(g);let St=k===void 0?j.len:j.pos+k;const at=ga();for(;j.pos<St;){const bt=j.uint32();switch(bt>>>3){case 1:at.collectionId=j.string();break;case 2:at.projectId=j.string();break;case 3:at.sourceId=j.string();break;case 4:at.trigger=a.SourceTrigger.decode(j,j.uint32());break;default:j.skipType(bt&7);break}}return at},fromJSON(g){return{collectionId:Rt(g.collectionId)?String(g.collectionId):"",projectId:Rt(g.projectId)?String(g.projectId):"",sourceId:Rt(g.sourceId)?String(g.sourceId):"",trigger:Rt(g.trigger)?a.SourceTrigger.fromJSON(g.trigger):void 0}},toJSON(g){const k={};return g.collectionId!==void 0&&(k.collectionId=g.collectionId),g.projectId!==void 0&&(k.projectId=g.projectId),g.sourceId!==void 0&&(k.sourceId=g.sourceId),g.trigger!==void 0&&(k.trigger=g.trigger?a.SourceTrigger.toJSON(g.trigger):void 0),k},fromPartial(g){var k,j,St;const at=ga();return at.collectionId=(k=g.collectionId)!==null&&k!==void 0?k:"",at.projectId=(j=g.projectId)!==null&&j!==void 0?j:"",at.sourceId=(St=g.sourceId)!==null&&St!==void 0?St:"",at.trigger=g.trigger!==void 0&&g.trigger!==null?a.SourceTrigger.fromPartial(g.trigger):void 0,at}};function eo(){return{project:void 0,broadcastUpdated:!1}}a.AddSourceToProjectResponse={encode(g,k=_.Writer.create()){return g.project!==void 0&&a.Project.encode(g.project,k.uint32(10).fork()).ldelim(),g.broadcastUpdated===!0&&k.uint32(16).bool(g.broadcastUpdated),k},decode(g,k){const j=g instanceof _.Reader?g:new _.Reader(g);let St=k===void 0?j.len:j.pos+k;const at=eo();for(;j.pos<St;){const bt=j.uint32();switch(bt>>>3){case 1:at.project=a.Project.decode(j,j.uint32());break;case 2:at.broadcastUpdated=j.bool();break;default:j.skipType(bt&7);break}}return at},fromJSON(g){return{project:Rt(g.project)?a.Project.fromJSON(g.project):void 0,broadcastUpdated:Rt(g.broadcastUpdated)?Boolean(g.broadcastUpdated):!1}},toJSON(g){const k={};return g.project!==void 0&&(k.project=g.project?a.Project.toJSON(g.project):void 0),g.broadcastUpdated!==void 0&&(k.broadcastUpdated=g.broadcastUpdated),k},fromPartial(g){var k;const j=eo();return j.project=g.project!==void 0&&g.project!==null?a.Project.fromPartial(g.project):void 0,j.broadcastUpdated=(k=g.broadcastUpdated)!==null&&k!==void 0?k:!1,j}};function to(){return{collectionId:"",projectId:"",sourceId:"",updateMask:void 0,trigger:void 0}}a.UpdateSourceInProjectRequest={encode(g,k=_.Writer.create()){return g.collectionId!==""&&k.uint32(10).string(g.collectionId),g.projectId!==""&&k.uint32(18).string(g.projectId),g.sourceId!==""&&k.uint32(26).string(g.sourceId),g.updateMask!==void 0&&tt.FieldMask.encode(tt.FieldMask.wrap(g.updateMask),k.uint32(34).fork()).ldelim(),g.trigger!==void 0&&a.SourceTrigger.encode(g.trigger,k.uint32(42).fork()).ldelim(),k},decode(g,k){const j=g instanceof _.Reader?g:new _.Reader(g);let St=k===void 0?j.len:j.pos+k;const at=to();for(;j.pos<St;){const bt=j.uint32();switch(bt>>>3){case 1:at.collectionId=j.string();break;case 2:at.projectId=j.string();break;case 3:at.sourceId=j.string();break;case 4:at.updateMask=tt.FieldMask.unwrap(tt.FieldMask.decode(j,j.uint32()));break;case 5:at.trigger=a.SourceTrigger.decode(j,j.uint32());break;default:j.skipType(bt&7);break}}return at},fromJSON(g){return{collectionId:Rt(g.collectionId)?String(g.collectionId):"",projectId:Rt(g.projectId)?String(g.projectId):"",sourceId:Rt(g.sourceId)?String(g.sourceId):"",updateMask:Rt(g.updateMask)?tt.FieldMask.unwrap(tt.FieldMask.fromJSON(g.updateMask)):void 0,trigger:Rt(g.trigger)?a.SourceTrigger.fromJSON(g.trigger):void 0}},toJSON(g){const k={};return g.collectionId!==void 0&&(k.collectionId=g.collectionId),g.projectId!==void 0&&(k.projectId=g.projectId),g.sourceId!==void 0&&(k.sourceId=g.sourceId),g.updateMask!==void 0&&(k.updateMask=tt.FieldMask.toJSON(tt.FieldMask.wrap(g.updateMask))),g.trigger!==void 0&&(k.trigger=g.trigger?a.SourceTrigger.toJSON(g.trigger):void 0),k},fromPartial(g){var k,j,St,at;const bt=to();return bt.collectionId=(k=g.collectionId)!==null&&k!==void 0?k:"",bt.projectId=(j=g.projectId)!==null&&j!==void 0?j:"",bt.sourceId=(St=g.sourceId)!==null&&St!==void 0?St:"",bt.updateMask=(at=g.updateMask)!==null&&at!==void 0?at:void 0,bt.trigger=g.trigger!==void 0&&g.trigger!==null?a.SourceTrigger.fromPartial(g.trigger):void 0,bt}};function no(){return{project:void 0}}a.UpdateSourceInProjectResponse={encode(g,k=_.Writer.create()){return g.project!==void 0&&a.Project.encode(g.project,k.uint32(10).fork()).ldelim(),k},decode(g,k){const j=g instanceof _.Reader?g:new _.Reader(g);let St=k===void 0?j.len:j.pos+k;const at=no();for(;j.pos<St;){const bt=j.uint32();switch(bt>>>3){case 1:at.project=a.Project.decode(j,j.uint32());break;default:j.skipType(bt&7);break}}return at},fromJSON(g){return{project:Rt(g.project)?a.Project.fromJSON(g.project):void 0}},toJSON(g){const k={};return g.project!==void 0&&(k.project=g.project?a.Project.toJSON(g.project):void 0),k},fromPartial(g){const k=no();return k.project=g.project!==void 0&&g.project!==null?a.Project.fromPartial(g.project):void 0,k}};function ro(){return{collectionId:"",sourceId:""}}a.GetSourceRequest={encode(g,k=_.Writer.create()){return g.collectionId!==""&&k.uint32(10).string(g.collectionId),g.sourceId!==""&&k.uint32(26).string(g.sourceId),k},decode(g,k){const j=g instanceof _.Reader?g:new _.Reader(g);let St=k===void 0?j.len:j.pos+k;const at=ro();for(;j.pos<St;){const bt=j.uint32();switch(bt>>>3){case 1:at.collectionId=j.string();break;case 3:at.sourceId=j.string();break;default:j.skipType(bt&7);break}}return at},fromJSON(g){return{collectionId:Rt(g.collectionId)?String(g.collectionId):"",sourceId:Rt(g.sourceId)?String(g.sourceId):""}},toJSON(g){const k={};return g.collectionId!==void 0&&(k.collectionId=g.collectionId),g.sourceId!==void 0&&(k.sourceId=g.sourceId),k},fromPartial(g){var k,j;const St=ro();return St.collectionId=(k=g.collectionId)!==null&&k!==void 0?k:"",St.sourceId=(j=g.sourceId)!==null&&j!==void 0?j:"",St}};function io(){return{source:void 0}}a.GetSourceResponse={encode(g,k=_.Writer.create()){return g.source!==void 0&&a.Source.encode(g.source,k.uint32(10).fork()).ldelim(),k},decode(g,k){const j=g instanceof _.Reader?g:new _.Reader(g);let St=k===void 0?j.len:j.pos+k;const at=io();for(;j.pos<St;){const bt=j.uint32();switch(bt>>>3){case 1:at.source=a.Source.decode(j,j.uint32());break;default:j.skipType(bt&7);break}}return at},fromJSON(g){return{source:Rt(g.source)?a.Source.fromJSON(g.source):void 0}},toJSON(g){const k={};return g.source!==void 0&&(k.source=g.source?a.Source.toJSON(g.source):void 0),k},fromPartial(g){const k=io();return k.source=g.source!==void 0&&g.source!==null?a.Source.fromPartial(g.source):void 0,k}};function ao(){return{collectionId:""}}a.GetSourcesRequest={encode(g,k=_.Writer.create()){return g.collectionId!==""&&k.uint32(10).string(g.collectionId),k},decode(g,k){const j=g instanceof _.Reader?g:new _.Reader(g);let St=k===void 0?j.len:j.pos+k;const at=ao();for(;j.pos<St;){const bt=j.uint32();switch(bt>>>3){case 1:at.collectionId=j.string();break;default:j.skipType(bt&7);break}}return at},fromJSON(g){return{collectionId:Rt(g.collectionId)?String(g.collectionId):""}},toJSON(g){const k={};return g.collectionId!==void 0&&(k.collectionId=g.collectionId),k},fromPartial(g){var k;const j=ao();return j.collectionId=(k=g.collectionId)!==null&&k!==void 0?k:"",j}};function oo(){return{sources:[]}}a.GetSourcesResponse={encode(g,k=_.Writer.create()){for(const j of g.sources)a.Source.encode(j,k.uint32(10).fork()).ldelim();return k},decode(g,k){const j=g instanceof _.Reader?g:new _.Reader(g);let St=k===void 0?j.len:j.pos+k;const at=oo();for(;j.pos<St;){const bt=j.uint32();switch(bt>>>3){case 1:at.sources.push(a.Source.decode(j,j.uint32()));break;default:j.skipType(bt&7);break}}return at},fromJSON(g){return{sources:Array.isArray(g==null?void 0:g.sources)?g.sources.map(k=>a.Source.fromJSON(k)):[]}},toJSON(g){const k={};return g.sources?k.sources=g.sources.map(j=>j?a.Source.toJSON(j):void 0):k.sources=[],k},fromPartial(g){var k;const j=oo();return j.sources=((k=g.sources)===null||k===void 0?void 0:k.map(St=>a.Source.fromPartial(St)))||[],j}};function so(){return{collectionId:"",sourceId:"",updateMask:void 0,metadata:void 0,address:void 0,preview:void 0}}a.UpdateSourceRequest={encode(g,k=_.Writer.create()){return g.collectionId!==""&&k.uint32(10).string(g.collectionId),g.sourceId!==""&&k.uint32(26).string(g.sourceId),g.updateMask!==void 0&&tt.FieldMask.encode(tt.FieldMask.wrap(g.updateMask),k.uint32(34).fork()).ldelim(),g.metadata!==void 0&&_e.Value.encode(_e.Value.wrap(g.metadata),k.uint32(42).fork()).ldelim(),g.address!==void 0&&a.SourceAddress.encode(g.address,k.uint32(50).fork()).ldelim(),g.preview!==void 0&&a.PreviewAddress.encode(g.preview,k.uint32(58).fork()).ldelim(),k},decode(g,k){const j=g instanceof _.Reader?g:new _.Reader(g);let St=k===void 0?j.len:j.pos+k;const at=so();for(;j.pos<St;){const bt=j.uint32();switch(bt>>>3){case 1:at.collectionId=j.string();break;case 3:at.sourceId=j.string();break;case 4:at.updateMask=tt.FieldMask.unwrap(tt.FieldMask.decode(j,j.uint32()));break;case 5:at.metadata=_e.Value.unwrap(_e.Value.decode(j,j.uint32()));break;case 6:at.address=a.SourceAddress.decode(j,j.uint32());break;case 7:at.preview=a.PreviewAddress.decode(j,j.uint32());break;default:j.skipType(bt&7);break}}return at},fromJSON(g){return{collectionId:Rt(g.collectionId)?String(g.collectionId):"",sourceId:Rt(g.sourceId)?String(g.sourceId):"",updateMask:Rt(g.updateMask)?tt.FieldMask.unwrap(tt.FieldMask.fromJSON(g.updateMask)):void 0,metadata:Rt(g==null?void 0:g.metadata)?g.metadata:void 0,address:Rt(g.address)?a.SourceAddress.fromJSON(g.address):void 0,preview:Rt(g.preview)?a.PreviewAddress.fromJSON(g.preview):void 0}},toJSON(g){const k={};return g.collectionId!==void 0&&(k.collectionId=g.collectionId),g.sourceId!==void 0&&(k.sourceId=g.sourceId),g.updateMask!==void 0&&(k.updateMask=tt.FieldMask.toJSON(tt.FieldMask.wrap(g.updateMask))),g.metadata!==void 0&&(k.metadata=g.metadata),g.address!==void 0&&(k.address=g.address?a.SourceAddress.toJSON(g.address):void 0),g.preview!==void 0&&(k.preview=g.preview?a.PreviewAddress.toJSON(g.preview):void 0),k},fromPartial(g){var k,j,St,at;const bt=so();return bt.collectionId=(k=g.collectionId)!==null&&k!==void 0?k:"",bt.sourceId=(j=g.sourceId)!==null&&j!==void 0?j:"",bt.updateMask=(St=g.updateMask)!==null&&St!==void 0?St:void 0,bt.metadata=(at=g.metadata)!==null&&at!==void 0?at:void 0,bt.address=g.address!==void 0&&g.address!==null?a.SourceAddress.fromPartial(g.address):void 0,bt.preview=g.preview!==void 0&&g.preview!==null?a.PreviewAddress.fromPartial(g.preview):void 0,bt}};function uo(){return{source:void 0,broadcastUpdated:!1}}a.UpdateSourceResponse={encode(g,k=_.Writer.create()){return g.source!==void 0&&a.Source.encode(g.source,k.uint32(10).fork()).ldelim(),g.broadcastUpdated===!0&&k.uint32(16).bool(g.broadcastUpdated),k},decode(g,k){const j=g instanceof _.Reader?g:new _.Reader(g);let St=k===void 0?j.len:j.pos+k;const at=uo();for(;j.pos<St;){const bt=j.uint32();switch(bt>>>3){case 1:at.source=a.Source.decode(j,j.uint32());break;case 2:at.broadcastUpdated=j.bool();break;default:j.skipType(bt&7);break}}return at},fromJSON(g){return{source:Rt(g.source)?a.Source.fromJSON(g.source):void 0,broadcastUpdated:Rt(g.broadcastUpdated)?Boolean(g.broadcastUpdated):!1}},toJSON(g){const k={};return g.source!==void 0&&(k.source=g.source?a.Source.toJSON(g.source):void 0),g.broadcastUpdated!==void 0&&(k.broadcastUpdated=g.broadcastUpdated),k},fromPartial(g){var k;const j=uo();return j.source=g.source!==void 0&&g.source!==null?a.Source.fromPartial(g.source):void 0,j.broadcastUpdated=(k=g.broadcastUpdated)!==null&&k!==void 0?k:!1,j}};function co(){return{collectionId:"",projectId:"",sourceId:"",force:void 0}}a.RemoveSourceFromProjectRequest={encode(g,k=_.Writer.create()){return g.collectionId!==""&&k.uint32(10).string(g.collectionId),g.projectId!==""&&k.uint32(18).string(g.projectId),g.sourceId!==""&&k.uint32(26).string(g.sourceId),g.force!==void 0&&k.uint32(32).bool(g.force),k},decode(g,k){const j=g instanceof _.Reader?g:new _.Reader(g);let St=k===void 0?j.len:j.pos+k;const at=co();for(;j.pos<St;){const bt=j.uint32();switch(bt>>>3){case 1:at.collectionId=j.string();break;case 2:at.projectId=j.string();break;case 3:at.sourceId=j.string();break;case 4:at.force=j.bool();break;default:j.skipType(bt&7);break}}return at},fromJSON(g){return{collectionId:Rt(g.collectionId)?String(g.collectionId):"",projectId:Rt(g.projectId)?String(g.projectId):"",sourceId:Rt(g.sourceId)?String(g.sourceId):"",force:Rt(g.force)?Boolean(g.force):void 0}},toJSON(g){const k={};return g.collectionId!==void 0&&(k.collectionId=g.collectionId),g.projectId!==void 0&&(k.projectId=g.projectId),g.sourceId!==void 0&&(k.sourceId=g.sourceId),g.force!==void 0&&(k.force=g.force),k},fromPartial(g){var k,j,St,at;const bt=co();return bt.collectionId=(k=g.collectionId)!==null&&k!==void 0?k:"",bt.projectId=(j=g.projectId)!==null&&j!==void 0?j:"",bt.sourceId=(St=g.sourceId)!==null&&St!==void 0?St:"",bt.force=(at=g.force)!==null&&at!==void 0?at:void 0,bt}};function lo(){return{project:void 0,broadcastUpdated:!1}}a.RemoveSourceFromProjectResponse={encode(g,k=_.Writer.create()){return g.project!==void 0&&a.Project.encode(g.project,k.uint32(10).fork()).ldelim(),g.broadcastUpdated===!0&&k.uint32(16).bool(g.broadcastUpdated),k},decode(g,k){const j=g instanceof _.Reader?g:new _.Reader(g);let St=k===void 0?j.len:j.pos+k;const at=lo();for(;j.pos<St;){const bt=j.uint32();switch(bt>>>3){case 1:at.project=a.Project.decode(j,j.uint32());break;case 2:at.broadcastUpdated=j.bool();break;default:j.skipType(bt&7);break}}return at},fromJSON(g){return{project:Rt(g.project)?a.Project.fromJSON(g.project):void 0,broadcastUpdated:Rt(g.broadcastUpdated)?Boolean(g.broadcastUpdated):!1}},toJSON(g){const k={};return g.project!==void 0&&(k.project=g.project?a.Project.toJSON(g.project):void 0),g.broadcastUpdated!==void 0&&(k.broadcastUpdated=g.broadcastUpdated),k},fromPartial(g){var k;const j=lo();return j.project=g.project!==void 0&&g.project!==null?a.Project.fromPartial(g.project):void 0,j.broadcastUpdated=(k=g.broadcastUpdated)!==null&&k!==void 0?k:!1,j}};function fo(){return{serviceUserId:"",displayName:void 0,role:void 0,maxDuration:void 0}}a.CreateAccessTokenRequest={encode(g,k=_.Writer.create()){return g.serviceUserId!==""&&k.uint32(10).string(g.serviceUserId),g.displayName!==void 0&&k.uint32(34).string(g.displayName),g.role!==void 0&&k.uint32(16).int32(en(g.role)),g.maxDuration!==void 0&&k.uint32(24).uint32(g.maxDuration),k},decode(g,k){const j=g instanceof _.Reader?g:new _.Reader(g);let St=k===void 0?j.len:j.pos+k;const at=fo();for(;j.pos<St;){const bt=j.uint32();switch(bt>>>3){case 1:at.serviceUserId=j.string();break;case 4:at.displayName=j.string();break;case 2:at.role=Xt(j.int32());break;case 3:at.maxDuration=j.uint32();break;default:j.skipType(bt&7);break}}return at},fromJSON(g){return{serviceUserId:Rt(g.serviceUserId)?String(g.serviceUserId):"",displayName:Rt(g.displayName)?String(g.displayName):void 0,role:Rt(g.role)?Xt(g.role):void 0,maxDuration:Rt(g.maxDuration)?Number(g.maxDuration):void 0}},toJSON(g){const k={};return g.serviceUserId!==void 0&&(k.serviceUserId=g.serviceUserId),g.displayName!==void 0&&(k.displayName=g.displayName),g.role!==void 0&&(k.role=g.role!==void 0?rn(g.role):void 0),g.maxDuration!==void 0&&(k.maxDuration=Math.round(g.maxDuration)),k},fromPartial(g){var k,j,St,at;const bt=fo();return bt.serviceUserId=(k=g.serviceUserId)!==null&&k!==void 0?k:"",bt.displayName=(j=g.displayName)!==null&&j!==void 0?j:void 0,bt.role=(St=g.role)!==null&&St!==void 0?St:void 0,bt.maxDuration=(at=g.maxDuration)!==null&&at!==void 0?at:void 0,bt}};function po(){return{accessToken:""}}a.CreateAccessTokenResponse={encode(g,k=_.Writer.create()){return g.accessToken!==""&&k.uint32(10).string(g.accessToken),k},decode(g,k){const j=g instanceof _.Reader?g:new _.Reader(g);let St=k===void 0?j.len:j.pos+k;const at=po();for(;j.pos<St;){const bt=j.uint32();switch(bt>>>3){case 1:at.accessToken=j.string();break;default:j.skipType(bt&7);break}}return at},fromJSON(g){return{accessToken:Rt(g.accessToken)?String(g.accessToken):""}},toJSON(g){const k={};return g.accessToken!==void 0&&(k.accessToken=g.accessToken),k},fromPartial(g){var k;const j=po();return j.accessToken=(k=g.accessToken)!==null&&k!==void 0?k:"",j}};function ho(){return{displayName:"",serviceUserId:void 0}}a.GuestAccessTokenDirect={encode(g,k=_.Writer.create()){return g.displayName!==""&&k.uint32(10).string(g.displayName),g.serviceUserId!==void 0&&k.uint32(18).string(g.serviceUserId),k},decode(g,k){const j=g instanceof _.Reader?g:new _.Reader(g);let St=k===void 0?j.len:j.pos+k;const at=ho();for(;j.pos<St;){const bt=j.uint32();switch(bt>>>3){case 1:at.displayName=j.string();break;case 2:at.serviceUserId=j.string();break;default:j.skipType(bt&7);break}}return at},fromJSON(g){return{displayName:Rt(g.displayName)?String(g.displayName):"",serviceUserId:Rt(g.serviceUserId)?String(g.serviceUserId):void 0}},toJSON(g){const k={};return g.displayName!==void 0&&(k.displayName=g.displayName),g.serviceUserId!==void 0&&(k.serviceUserId=g.serviceUserId),k},fromPartial(g){var k,j;const St=ho();return St.displayName=(k=g.displayName)!==null&&k!==void 0?k:"",St.serviceUserId=(j=g.serviceUserId)!==null&&j!==void 0?j:void 0,St}};function mo(){return{maxDuration:void 0}}a.GuestAccessTokenExchange={encode(g,k=_.Writer.create()){return g.maxDuration!==void 0&&k.uint32(8).uint32(g.maxDuration),k},decode(g,k){const j=g instanceof _.Reader?g:new _.Reader(g);let St=k===void 0?j.len:j.pos+k;const at=mo();for(;j.pos<St;){const bt=j.uint32();switch(bt>>>3){case 1:at.maxDuration=j.uint32();break;default:j.skipType(bt&7);break}}return at},fromJSON(g){return{maxDuration:Rt(g.maxDuration)?Number(g.maxDuration):void 0}},toJSON(g){const k={};return g.maxDuration!==void 0&&(k.maxDuration=Math.round(g.maxDuration)),k},fromPartial(g){var k;const j=mo();return j.maxDuration=(k=g.maxDuration)!==null&&k!==void 0?k:void 0,j}};function vo(){return{direct:void 0,exchange:void 0}}a.GuestAccessToken={encode(g,k=_.Writer.create()){return g.direct!==void 0&&a.GuestAccessTokenDirect.encode(g.direct,k.uint32(10).fork()).ldelim(),g.exchange!==void 0&&a.GuestAccessTokenExchange.encode(g.exchange,k.uint32(18).fork()).ldelim(),k},decode(g,k){const j=g instanceof _.Reader?g:new _.Reader(g);let St=k===void 0?j.len:j.pos+k;const at=vo();for(;j.pos<St;){const bt=j.uint32();switch(bt>>>3){case 1:at.direct=a.GuestAccessTokenDirect.decode(j,j.uint32());break;case 2:at.exchange=a.GuestAccessTokenExchange.decode(j,j.uint32());break;default:j.skipType(bt&7);break}}return at},fromJSON(g){return{direct:Rt(g.direct)?a.GuestAccessTokenDirect.fromJSON(g.direct):void 0,exchange:Rt(g.exchange)?a.GuestAccessTokenExchange.fromJSON(g.exchange):void 0}},toJSON(g){const k={};return g.direct!==void 0&&(k.direct=g.direct?a.GuestAccessTokenDirect.toJSON(g.direct):void 0),g.exchange!==void 0&&(k.exchange=g.exchange?a.GuestAccessTokenExchange.toJSON(g.exchange):void 0),k},fromPartial(g){const k=vo();return k.direct=g.direct!==void 0&&g.direct!==null?a.GuestAccessTokenDirect.fromPartial(g.direct):void 0,k.exchange=g.exchange!==void 0&&g.exchange!==null?a.GuestAccessTokenExchange.fromPartial(g.exchange):void 0,k}};function go(){return{collectionId:"",projectId:"",maxDuration:void 0,role:Kt.ROLE_UNSPECIFIED,token:void 0,url:void 0}}a.CreateGuestAccessTokenRequest={encode(g,k=_.Writer.create()){return g.collectionId!==""&&k.uint32(10).string(g.collectionId),g.projectId!==""&&k.uint32(18).string(g.projectId),g.maxDuration!==void 0&&k.uint32(24).uint32(g.maxDuration),g.role!==Kt.ROLE_UNSPECIFIED&&k.uint32(32).int32(en(g.role)),g.token!==void 0&&a.GuestAccessToken.encode(g.token,k.uint32(42).fork()).ldelim(),g.url!==void 0&&k.uint32(50).string(g.url),k},decode(g,k){const j=g instanceof _.Reader?g:new _.Reader(g);let St=k===void 0?j.len:j.pos+k;const at=go();for(;j.pos<St;){const bt=j.uint32();switch(bt>>>3){case 1:at.collectionId=j.string();break;case 2:at.projectId=j.string();break;case 3:at.maxDuration=j.uint32();break;case 4:at.role=Xt(j.int32());break;case 5:at.token=a.GuestAccessToken.decode(j,j.uint32());break;case 6:at.url=j.string();break;default:j.skipType(bt&7);break}}return at},fromJSON(g){return{collectionId:Rt(g.collectionId)?String(g.collectionId):"",projectId:Rt(g.projectId)?String(g.projectId):"",maxDuration:Rt(g.maxDuration)?Number(g.maxDuration):void 0,role:Rt(g.role)?Xt(g.role):Kt.ROLE_UNSPECIFIED,token:Rt(g.token)?a.GuestAccessToken.fromJSON(g.token):void 0,url:Rt(g.url)?String(g.url):void 0}},toJSON(g){const k={};return g.collectionId!==void 0&&(k.collectionId=g.collectionId),g.projectId!==void 0&&(k.projectId=g.projectId),g.maxDuration!==void 0&&(k.maxDuration=Math.round(g.maxDuration)),g.role!==void 0&&(k.role=rn(g.role)),g.token!==void 0&&(k.token=g.token?a.GuestAccessToken.toJSON(g.token):void 0),g.url!==void 0&&(k.url=g.url),k},fromPartial(g){var k,j,St,at,bt;const zt=go();return zt.collectionId=(k=g.collectionId)!==null&&k!==void 0?k:"",zt.projectId=(j=g.projectId)!==null&&j!==void 0?j:"",zt.maxDuration=(St=g.maxDuration)!==null&&St!==void 0?St:void 0,zt.role=(at=g.role)!==null&&at!==void 0?at:Kt.ROLE_UNSPECIFIED,zt.token=g.token!==void 0&&g.token!==null?a.GuestAccessToken.fromPartial(g.token):void 0,zt.url=(bt=g.url)!==null&&bt!==void 0?bt:void 0,zt}};function yo(){return{accessToken:"",url:void 0}}a.CreateGuestAccessTokenResponse={encode(g,k=_.Writer.create()){return g.accessToken!==""&&k.uint32(10).string(g.accessToken),g.url!==void 0&&k.uint32(18).string(g.url),k},decode(g,k){const j=g instanceof _.Reader?g:new _.Reader(g);let St=k===void 0?j.len:j.pos+k;const at=yo();for(;j.pos<St;){const bt=j.uint32();switch(bt>>>3){case 1:at.accessToken=j.string();break;case 2:at.url=j.string();break;default:j.skipType(bt&7);break}}return at},fromJSON(g){return{accessToken:Rt(g.accessToken)?String(g.accessToken):"",url:Rt(g.url)?String(g.url):void 0}},toJSON(g){const k={};return g.accessToken!==void 0&&(k.accessToken=g.accessToken),g.url!==void 0&&(k.url=g.url),k},fromPartial(g){var k,j;const St=yo();return St.accessToken=(k=g.accessToken)!==null&&k!==void 0?k:"",St.url=(j=g.url)!==null&&j!==void 0?j:void 0,St}};function So(){return{collectionId:"",projectId:"",displayName:""}}a.CreateWebRtcAccessTokenRequest={encode(g,k=_.Writer.create()){return g.collectionId!==""&&k.uint32(10).string(g.collectionId),g.projectId!==""&&k.uint32(18).string(g.projectId),g.displayName!==""&&k.uint32(26).string(g.displayName),k},decode(g,k){const j=g instanceof _.Reader?g:new _.Reader(g);let St=k===void 0?j.len:j.pos+k;const at=So();for(;j.pos<St;){const bt=j.uint32();switch(bt>>>3){case 1:at.collectionId=j.string();break;case 2:at.projectId=j.string();break;case 3:at.displayName=j.string();break;default:j.skipType(bt&7);break}}return at},fromJSON(g){return{collectionId:Rt(g.collectionId)?String(g.collectionId):"",projectId:Rt(g.projectId)?String(g.projectId):"",displayName:Rt(g.displayName)?String(g.displayName):""}},toJSON(g){const k={};return g.collectionId!==void 0&&(k.collectionId=g.collectionId),g.projectId!==void 0&&(k.projectId=g.projectId),g.displayName!==void 0&&(k.displayName=g.displayName),k},fromPartial(g){var k,j,St;const at=So();return at.collectionId=(k=g.collectionId)!==null&&k!==void 0?k:"",at.projectId=(j=g.projectId)!==null&&j!==void 0?j:"",at.displayName=(St=g.displayName)!==null&&St!==void 0?St:"",at}};function Eo(){return{webrtcAccess:void 0}}a.CreateWebRtcAccessTokenResponse={encode(g,k=_.Writer.create()){return g.webrtcAccess!==void 0&&a.WebRtcAccess.encode(g.webrtcAccess,k.uint32(18).fork()).ldelim(),k},decode(g,k){const j=g instanceof _.Reader?g:new _.Reader(g);let St=k===void 0?j.len:j.pos+k;const at=Eo();for(;j.pos<St;){const bt=j.uint32();switch(bt>>>3){case 2:at.webrtcAccess=a.WebRtcAccess.decode(j,j.uint32());break;default:j.skipType(bt&7);break}}return at},fromJSON(g){return{webrtcAccess:Rt(g.webrtcAccess)?a.WebRtcAccess.fromJSON(g.webrtcAccess):void 0}},toJSON(g){const k={};return g.webrtcAccess!==void 0&&(k.webrtcAccess=g.webrtcAccess?a.WebRtcAccess.toJSON(g.webrtcAccess):void 0),k},fromPartial(g){const k=Eo();return k.webrtcAccess=g.webrtcAccess!==void 0&&g.webrtcAccess!==null?a.WebRtcAccess.fromPartial(g.webrtcAccess):void 0,k}};function bo(){return{}}a.RefreshAccessTokenRequest={encode(g,k=_.Writer.create()){return k},decode(g,k){const j=g instanceof _.Reader?g:new _.Reader(g);let St=k===void 0?j.len:j.pos+k;const at=bo();for(;j.pos<St;){const bt=j.uint32();switch(bt>>>3){default:j.skipType(bt&7);break}}return at},fromJSON(g){return{}},toJSON(g){return{}},fromPartial(g){return bo()}};function _o(){return{}}a.RefreshAccessTokenResponse={encode(g,k=_.Writer.create()){return k},decode(g,k){const j=g instanceof _.Reader?g:new _.Reader(g);let St=k===void 0?j.len:j.pos+k;const at=_o();for(;j.pos<St;){const bt=j.uint32();switch(bt>>>3){default:j.skipType(bt&7);break}}return at},fromJSON(g){return{}},toJSON(g){return{}},fromPartial(g){return _o()}};function To(){return{collectionId:"",projectId:"",code:"",url:"",autoDelete:void 0}}a.GuestCode={encode(g,k=_.Writer.create()){return g.collectionId!==""&&k.uint32(10).string(g.collectionId),g.projectId!==""&&k.uint32(18).string(g.projectId),g.code!==""&&k.uint32(26).string(g.code),g.url!==""&&k.uint32(34).string(g.url),g.autoDelete!==void 0&&$.Timestamp.encode(Gn(g.autoDelete),k.uint32(42).fork()).ldelim(),k},decode(g,k){const j=g instanceof _.Reader?g:new _.Reader(g);let St=k===void 0?j.len:j.pos+k;const at=To();for(;j.pos<St;){const bt=j.uint32();switch(bt>>>3){case 1:at.collectionId=j.string();break;case 2:at.projectId=j.string();break;case 3:at.code=j.string();break;case 4:at.url=j.string();break;case 5:at.autoDelete=xn($.Timestamp.decode(j,j.uint32()));break;default:j.skipType(bt&7);break}}return at},fromJSON(g){return{collectionId:Rt(g.collectionId)?String(g.collectionId):"",projectId:Rt(g.projectId)?String(g.projectId):"",code:Rt(g.code)?String(g.code):"",url:Rt(g.url)?String(g.url):"",autoDelete:Rt(g.autoDelete)?String(g.autoDelete):void 0}},toJSON(g){const k={};return g.collectionId!==void 0&&(k.collectionId=g.collectionId),g.projectId!==void 0&&(k.projectId=g.projectId),g.code!==void 0&&(k.code=g.code),g.url!==void 0&&(k.url=g.url),g.autoDelete!==void 0&&(k.autoDelete=g.autoDelete),k},fromPartial(g){var k,j,St,at,bt;const zt=To();return zt.collectionId=(k=g.collectionId)!==null&&k!==void 0?k:"",zt.projectId=(j=g.projectId)!==null&&j!==void 0?j:"",zt.code=(St=g.code)!==null&&St!==void 0?St:"",zt.url=(at=g.url)!==null&&at!==void 0?at:"",zt.autoDelete=(bt=g.autoDelete)!==null&&bt!==void 0?bt:void 0,zt}};function Io(){return{serviceId:"",code:""}}a.GuestCodeRedirectRequest={encode(g,k=_.Writer.create()){return g.serviceId!==""&&k.uint32(10).string(g.serviceId),g.code!==""&&k.uint32(18).string(g.code),k},decode(g,k){const j=g instanceof _.Reader?g:new _.Reader(g);let St=k===void 0?j.len:j.pos+k;const at=Io();for(;j.pos<St;){const bt=j.uint32();switch(bt>>>3){case 1:at.serviceId=j.string();break;case 2:at.code=j.string();break;default:j.skipType(bt&7);break}}return at},fromJSON(g){return{serviceId:Rt(g.serviceId)?String(g.serviceId):"",code:Rt(g.code)?String(g.code):""}},toJSON(g){const k={};return g.serviceId!==void 0&&(k.serviceId=g.serviceId),g.code!==void 0&&(k.code=g.code),k},fromPartial(g){var k,j;const St=Io();return St.serviceId=(k=g.serviceId)!==null&&k!==void 0?k:"",St.code=(j=g.code)!==null&&j!==void 0?j:"",St}};function ko(){return{}}a.GuestCodeRedirectResponse={encode(g,k=_.Writer.create()){return k},decode(g,k){const j=g instanceof _.Reader?g:new _.Reader(g);let St=k===void 0?j.len:j.pos+k;const at=ko();for(;j.pos<St;){const bt=j.uint32();switch(bt>>>3){default:j.skipType(bt&7);break}}return at},fromJSON(g){return{}},toJSON(g){return{}},fromPartial(g){return ko()}};function Co(){return{alg:"",kty:"",use:"",kid:"",e:"",n:""}}a.JsonWebKey={encode(g,k=_.Writer.create()){return g.alg!==""&&k.uint32(10).string(g.alg),g.kty!==""&&k.uint32(18).string(g.kty),g.use!==""&&k.uint32(26).string(g.use),g.kid!==""&&k.uint32(34).string(g.kid),g.e!==""&&k.uint32(42).string(g.e),g.n!==""&&k.uint32(50).string(g.n),k},decode(g,k){const j=g instanceof _.Reader?g:new _.Reader(g);let St=k===void 0?j.len:j.pos+k;const at=Co();for(;j.pos<St;){const bt=j.uint32();switch(bt>>>3){case 1:at.alg=j.string();break;case 2:at.kty=j.string();break;case 3:at.use=j.string();break;case 4:at.kid=j.string();break;case 5:at.e=j.string();break;case 6:at.n=j.string();break;default:j.skipType(bt&7);break}}return at},fromJSON(g){return{alg:Rt(g.alg)?String(g.alg):"",kty:Rt(g.kty)?String(g.kty):"",use:Rt(g.use)?String(g.use):"",kid:Rt(g.kid)?String(g.kid):"",e:Rt(g.e)?String(g.e):"",n:Rt(g.n)?String(g.n):""}},toJSON(g){const k={};return g.alg!==void 0&&(k.alg=g.alg),g.kty!==void 0&&(k.kty=g.kty),g.use!==void 0&&(k.use=g.use),g.kid!==void 0&&(k.kid=g.kid),g.e!==void 0&&(k.e=g.e),g.n!==void 0&&(k.n=g.n),k},fromPartial(g){var k,j,St,at,bt,zt;const sn=Co();return sn.alg=(k=g.alg)!==null&&k!==void 0?k:"",sn.kty=(j=g.kty)!==null&&j!==void 0?j:"",sn.use=(St=g.use)!==null&&St!==void 0?St:"",sn.kid=(at=g.kid)!==null&&at!==void 0?at:"",sn.e=(bt=g.e)!==null&&bt!==void 0?bt:"",sn.n=(zt=g.n)!==null&&zt!==void 0?zt:"",sn}};function Ro(){return{}}a.GetJsonWebKeySetRequest={encode(g,k=_.Writer.create()){return k},decode(g,k){const j=g instanceof _.Reader?g:new _.Reader(g);let St=k===void 0?j.len:j.pos+k;const at=Ro();for(;j.pos<St;){const bt=j.uint32();switch(bt>>>3){default:j.skipType(bt&7);break}}return at},fromJSON(g){return{}},toJSON(g){return{}},fromPartial(g){return Ro()}};function Oo(){return{keys:[]}}a.GetJsonWebKeySetResponse={encode(g,k=_.Writer.create()){for(const j of g.keys)a.JsonWebKey.encode(j,k.uint32(10).fork()).ldelim();return k},decode(g,k){const j=g instanceof _.Reader?g:new _.Reader(g);let St=k===void 0?j.len:j.pos+k;const at=Oo();for(;j.pos<St;){const bt=j.uint32();switch(bt>>>3){case 1:at.keys.push(a.JsonWebKey.decode(j,j.uint32()));break;default:j.skipType(bt&7);break}}return at},fromJSON(g){return{keys:Array.isArray(g==null?void 0:g.keys)?g.keys.map(k=>a.JsonWebKey.fromJSON(k)):[]}},toJSON(g){const k={};return g.keys?k.keys=g.keys.map(j=>j?a.JsonWebKey.toJSON(j):void 0):k.keys=[],k},fromPartial(g){var k;const j=Oo();return j.keys=((k=g.keys)===null||k===void 0?void 0:k.map(St=>a.JsonWebKey.fromPartial(St)))||[],j}};function wo(){return{}}a.GetTestTokenRequest={encode(g,k=_.Writer.create()){return k},decode(g,k){const j=g instanceof _.Reader?g:new _.Reader(g);let St=k===void 0?j.len:j.pos+k;const at=wo();for(;j.pos<St;){const bt=j.uint32();switch(bt>>>3){default:j.skipType(bt&7);break}}return at},fromJSON(g){return{}},toJSON(g){return{}},fromPartial(g){return wo()}};function Po(){return{accessToken:""}}a.GetTestTokenResponse={encode(g,k=_.Writer.create()){return g.accessToken!==""&&k.uint32(10).string(g.accessToken),k},decode(g,k){const j=g instanceof _.Reader?g:new _.Reader(g);let St=k===void 0?j.len:j.pos+k;const at=Po();for(;j.pos<St;){const bt=j.uint32();switch(bt>>>3){case 1:at.accessToken=j.string();break;default:j.skipType(bt&7);break}}return at},fromJSON(g){return{accessToken:Rt(g.accessToken)?String(g.accessToken):""}},toJSON(g){const k={};return g.accessToken!==void 0&&(k.accessToken=g.accessToken),k},fromPartial(g){var k;const j=Po();return j.accessToken=(k=g.accessToken)!==null&&k!==void 0?k:"",j}};function No(){return{collectionId:"",projectId:"",destinationId:"",destination:void 0}}a.DestinationCreateEvent={encode(g,k=_.Writer.create()){return g.collectionId!==""&&k.uint32(10).string(g.collectionId),g.projectId!==""&&k.uint32(18).string(g.projectId),g.destinationId!==""&&k.uint32(26).string(g.destinationId),g.destination!==void 0&&a.Destination.encode(g.destination,k.uint32(34).fork()).ldelim(),k},decode(g,k){const j=g instanceof _.Reader?g:new _.Reader(g);let St=k===void 0?j.len:j.pos+k;const at=No();for(;j.pos<St;){const bt=j.uint32();switch(bt>>>3){case 1:at.collectionId=j.string();break;case 2:at.projectId=j.string();break;case 3:at.destinationId=j.string();break;case 4:at.destination=a.Destination.decode(j,j.uint32());break;default:j.skipType(bt&7);break}}return at},fromJSON(g){return{collectionId:Rt(g.collectionId)?String(g.collectionId):"",projectId:Rt(g.projectId)?String(g.projectId):"",destinationId:Rt(g.destinationId)?String(g.destinationId):"",destination:Rt(g.destination)?a.Destination.fromJSON(g.destination):void 0}},toJSON(g){const k={};return g.collectionId!==void 0&&(k.collectionId=g.collectionId),g.projectId!==void 0&&(k.projectId=g.projectId),g.destinationId!==void 0&&(k.destinationId=g.destinationId),g.destination!==void 0&&(k.destination=g.destination?a.Destination.toJSON(g.destination):void 0),k},fromPartial(g){var k,j,St;const at=No();return at.collectionId=(k=g.collectionId)!==null&&k!==void 0?k:"",at.projectId=(j=g.projectId)!==null&&j!==void 0?j:"",at.destinationId=(St=g.destinationId)!==null&&St!==void 0?St:"",at.destination=g.destination!==void 0&&g.destination!==null?a.Destination.fromPartial(g.destination):void 0,at}};function Ao(){return{collectionId:"",projectId:"",destinationId:""}}a.DestinationDeleteEvent={encode(g,k=_.Writer.create()){return g.collectionId!==""&&k.uint32(10).string(g.collectionId),g.projectId!==""&&k.uint32(18).string(g.projectId),g.destinationId!==""&&k.uint32(26).string(g.destinationId),k},decode(g,k){const j=g instanceof _.Reader?g:new _.Reader(g);let St=k===void 0?j.len:j.pos+k;const at=Ao();for(;j.pos<St;){const bt=j.uint32();switch(bt>>>3){case 1:at.collectionId=j.string();break;case 2:at.projectId=j.string();break;case 3:at.destinationId=j.string();break;default:j.skipType(bt&7);break}}return at},fromJSON(g){return{collectionId:Rt(g.collectionId)?String(g.collectionId):"",projectId:Rt(g.projectId)?String(g.projectId):"",destinationId:Rt(g.destinationId)?String(g.destinationId):""}},toJSON(g){const k={};return g.collectionId!==void 0&&(k.collectionId=g.collectionId),g.projectId!==void 0&&(k.projectId=g.projectId),g.destinationId!==void 0&&(k.destinationId=g.destinationId),k},fromPartial(g){var k,j,St;const at=Ao();return at.collectionId=(k=g.collectionId)!==null&&k!==void 0?k:"",at.projectId=(j=g.projectId)!==null&&j!==void 0?j:"",at.destinationId=(St=g.destinationId)!==null&&St!==void 0?St:"",at}};function Lo(){return{collectionId:"",projectId:"",destinationId:"",updateMask:[],destination:void 0}}a.DestinationUpdateEvent={encode(g,k=_.Writer.create()){g.collectionId!==""&&k.uint32(10).string(g.collectionId),g.projectId!==""&&k.uint32(18).string(g.projectId),g.destinationId!==""&&k.uint32(26).string(g.destinationId);for(const j of g.updateMask)k.uint32(34).string(j);return g.destination!==void 0&&a.Destination.encode(g.destination,k.uint32(42).fork()).ldelim(),k},decode(g,k){const j=g instanceof _.Reader?g:new _.Reader(g);let St=k===void 0?j.len:j.pos+k;const at=Lo();for(;j.pos<St;){const bt=j.uint32();switch(bt>>>3){case 1:at.collectionId=j.string();break;case 2:at.projectId=j.string();break;case 3:at.destinationId=j.string();break;case 4:at.updateMask.push(j.string());break;case 5:at.destination=a.Destination.decode(j,j.uint32());break;default:j.skipType(bt&7);break}}return at},fromJSON(g){return{collectionId:Rt(g.collectionId)?String(g.collectionId):"",projectId:Rt(g.projectId)?String(g.projectId):"",destinationId:Rt(g.destinationId)?String(g.destinationId):"",updateMask:Array.isArray(g==null?void 0:g.updateMask)?g.updateMask.map(k=>String(k)):[],destination:Rt(g.destination)?a.Destination.fromJSON(g.destination):void 0}},toJSON(g){const k={};return g.collectionId!==void 0&&(k.collectionId=g.collectionId),g.projectId!==void 0&&(k.projectId=g.projectId),g.destinationId!==void 0&&(k.destinationId=g.destinationId),g.updateMask?k.updateMask=g.updateMask.map(j=>j):k.updateMask=[],g.destination!==void 0&&(k.destination=g.destination?a.Destination.toJSON(g.destination):void 0),k},fromPartial(g){var k,j,St,at;const bt=Lo();return bt.collectionId=(k=g.collectionId)!==null&&k!==void 0?k:"",bt.projectId=(j=g.projectId)!==null&&j!==void 0?j:"",bt.destinationId=(St=g.destinationId)!==null&&St!==void 0?St:"",bt.updateMask=((at=g.updateMask)===null||at===void 0?void 0:at.map(zt=>zt))||[],bt.destination=g.destination!==void 0&&g.destination!==null?a.Destination.fromPartial(g.destination):void 0,bt}};function Do(){return{collectionId:"",projectId:"",destinationId:"",connect:void 0}}a.DestinationStateEvent={encode(g,k=_.Writer.create()){return g.collectionId!==""&&k.uint32(10).string(g.collectionId),g.projectId!==""&&k.uint32(18).string(g.projectId),g.destinationId!==""&&k.uint32(26).string(g.destinationId),g.connect!==void 0&&k.uint32(32).int32(Vn(g.connect)),k},decode(g,k){const j=g instanceof _.Reader?g:new _.Reader(g);let St=k===void 0?j.len:j.pos+k;const at=Do();for(;j.pos<St;){const bt=j.uint32();switch(bt>>>3){case 1:at.collectionId=j.string();break;case 2:at.projectId=j.string();break;case 3:at.destinationId=j.string();break;case 4:at.connect=Rn(j.int32());break;default:j.skipType(bt&7);break}}return at},fromJSON(g){return{collectionId:Rt(g.collectionId)?String(g.collectionId):"",projectId:Rt(g.projectId)?String(g.projectId):"",destinationId:Rt(g.destinationId)?String(g.destinationId):"",connect:Rt(g.connect)?Rn(g.connect):void 0}},toJSON(g){const k={};return g.collectionId!==void 0&&(k.collectionId=g.collectionId),g.projectId!==void 0&&(k.projectId=g.projectId),g.destinationId!==void 0&&(k.destinationId=g.destinationId),g.connect!==void 0&&(k.connect=g.connect!==void 0?Bn(g.connect):void 0),k},fromPartial(g){var k,j,St,at;const bt=Do();return bt.collectionId=(k=g.collectionId)!==null&&k!==void 0?k:"",bt.projectId=(j=g.projectId)!==null&&j!==void 0?j:"",bt.destinationId=(St=g.destinationId)!==null&&St!==void 0?St:"",bt.connect=(at=g.connect)!==null&&at!==void 0?at:void 0,bt}};function $o(){return{collectionId:"",projectId:"",project:void 0}}a.ProjectCreateEvent={encode(g,k=_.Writer.create()){return g.collectionId!==""&&k.uint32(10).string(g.collectionId),g.projectId!==""&&k.uint32(18).string(g.projectId),g.project!==void 0&&a.Project.encode(g.project,k.uint32(26).fork()).ldelim(),k},decode(g,k){const j=g instanceof _.Reader?g:new _.Reader(g);let St=k===void 0?j.len:j.pos+k;const at=$o();for(;j.pos<St;){const bt=j.uint32();switch(bt>>>3){case 1:at.collectionId=j.string();break;case 2:at.projectId=j.string();break;case 3:at.project=a.Project.decode(j,j.uint32());break;default:j.skipType(bt&7);break}}return at},fromJSON(g){return{collectionId:Rt(g.collectionId)?String(g.collectionId):"",projectId:Rt(g.projectId)?String(g.projectId):"",project:Rt(g.project)?a.Project.fromJSON(g.project):void 0}},toJSON(g){const k={};return g.collectionId!==void 0&&(k.collectionId=g.collectionId),g.projectId!==void 0&&(k.projectId=g.projectId),g.project!==void 0&&(k.project=g.project?a.Project.toJSON(g.project):void 0),k},fromPartial(g){var k,j;const St=$o();return St.collectionId=(k=g.collectionId)!==null&&k!==void 0?k:"",St.projectId=(j=g.projectId)!==null&&j!==void 0?j:"",St.project=g.project!==void 0&&g.project!==null?a.Project.fromPartial(g.project):void 0,St}};function Mo(){return{collectionId:"",projectId:""}}a.ProjectDeleteEvent={encode(g,k=_.Writer.create()){return g.collectionId!==""&&k.uint32(10).string(g.collectionId),g.projectId!==""&&k.uint32(18).string(g.projectId),k},decode(g,k){const j=g instanceof _.Reader?g:new _.Reader(g);let St=k===void 0?j.len:j.pos+k;const at=Mo();for(;j.pos<St;){const bt=j.uint32();switch(bt>>>3){case 1:at.collectionId=j.string();break;case 2:at.projectId=j.string();break;default:j.skipType(bt&7);break}}return at},fromJSON(g){return{collectionId:Rt(g.collectionId)?String(g.collectionId):"",projectId:Rt(g.projectId)?String(g.projectId):""}},toJSON(g){const k={};return g.collectionId!==void 0&&(k.collectionId=g.collectionId),g.projectId!==void 0&&(k.projectId=g.projectId),k},fromPartial(g){var k,j;const St=Mo();return St.collectionId=(k=g.collectionId)!==null&&k!==void 0?k:"",St.projectId=(j=g.projectId)!==null&&j!==void 0?j:"",St}};function Uo(){return{collectionId:"",projectId:"",updateMask:[],project:void 0}}a.ProjectUpdateEvent={encode(g,k=_.Writer.create()){g.collectionId!==""&&k.uint32(10).string(g.collectionId),g.projectId!==""&&k.uint32(18).string(g.projectId);for(const j of g.updateMask)k.uint32(26).string(j);return g.project!==void 0&&a.Project.encode(g.project,k.uint32(34).fork()).ldelim(),k},decode(g,k){const j=g instanceof _.Reader?g:new _.Reader(g);let St=k===void 0?j.len:j.pos+k;const at=Uo();for(;j.pos<St;){const bt=j.uint32();switch(bt>>>3){case 1:at.collectionId=j.string();break;case 2:at.projectId=j.string();break;case 3:at.updateMask.push(j.string());break;case 4:at.project=a.Project.decode(j,j.uint32());break;default:j.skipType(bt&7);break}}return at},fromJSON(g){return{collectionId:Rt(g.collectionId)?String(g.collectionId):"",projectId:Rt(g.projectId)?String(g.projectId):"",updateMask:Array.isArray(g==null?void 0:g.updateMask)?g.updateMask.map(k=>String(k)):[],project:Rt(g.project)?a.Project.fromJSON(g.project):void 0}},toJSON(g){const k={};return g.collectionId!==void 0&&(k.collectionId=g.collectionId),g.projectId!==void 0&&(k.projectId=g.projectId),g.updateMask?k.updateMask=g.updateMask.map(j=>j):k.updateMask=[],g.project!==void 0&&(k.project=g.project?a.Project.toJSON(g.project):void 0),k},fromPartial(g){var k,j,St;const at=Uo();return at.collectionId=(k=g.collectionId)!==null&&k!==void 0?k:"",at.projectId=(j=g.projectId)!==null&&j!==void 0?j:"",at.updateMask=((St=g.updateMask)===null||St===void 0?void 0:St.map(bt=>bt))||[],at.project=g.project!==void 0&&g.project!==null?a.Project.fromPartial(g.project):void 0,at}};function Bo(){return{collectionId:"",projectId:"",broadcastId:"",phase:void 0,error:void 0}}a.ProjectBroadcastStateEvent={encode(g,k=_.Writer.create()){return g.collectionId!==""&&k.uint32(10).string(g.collectionId),g.projectId!==""&&k.uint32(18).string(g.projectId),g.broadcastId!==""&&k.uint32(26).string(g.broadcastId),g.phase!==void 0&&k.uint32(32).int32(Wt(g.phase)),g.error!==void 0&&k.uint32(40).int32(un(g.error)),k},decode(g,k){const j=g instanceof _.Reader?g:new _.Reader(g);let St=k===void 0?j.len:j.pos+k;const at=Bo();for(;j.pos<St;){const bt=j.uint32();switch(bt>>>3){case 1:at.collectionId=j.string();break;case 2:at.projectId=j.string();break;case 3:at.broadcastId=j.string();break;case 4:at.phase=$t(j.int32());break;case 5:at.error=tn(j.int32());break;default:j.skipType(bt&7);break}}return at},fromJSON(g){return{collectionId:Rt(g.collectionId)?String(g.collectionId):"",projectId:Rt(g.projectId)?String(g.projectId):"",broadcastId:Rt(g.broadcastId)?String(g.broadcastId):"",phase:Rt(g.phase)?$t(g.phase):void 0,error:Rt(g.error)?tn(g.error):void 0}},toJSON(g){const k={};return g.collectionId!==void 0&&(k.collectionId=g.collectionId),g.projectId!==void 0&&(k.projectId=g.projectId),g.broadcastId!==void 0&&(k.broadcastId=g.broadcastId),g.phase!==void 0&&(k.phase=g.phase!==void 0?qt(g.phase):void 0),g.error!==void 0&&(k.error=g.error!==void 0?Mn(g.error):void 0),k},fromPartial(g){var k,j,St,at,bt;const zt=Bo();return zt.collectionId=(k=g.collectionId)!==null&&k!==void 0?k:"",zt.projectId=(j=g.projectId)!==null&&j!==void 0?j:"",zt.broadcastId=(St=g.broadcastId)!==null&&St!==void 0?St:"",zt.phase=(at=g.phase)!==null&&at!==void 0?at:void 0,zt.error=(bt=g.error)!==null&&bt!==void 0?bt:void 0,zt}};function Vo(){return{collectionId:"",collection:void 0}}a.CollectionCreateEvent={encode(g,k=_.Writer.create()){return g.collectionId!==""&&k.uint32(10).string(g.collectionId),g.collection!==void 0&&a.Collection.encode(g.collection,k.uint32(18).fork()).ldelim(),k},decode(g,k){const j=g instanceof _.Reader?g:new _.Reader(g);let St=k===void 0?j.len:j.pos+k;const at=Vo();for(;j.pos<St;){const bt=j.uint32();switch(bt>>>3){case 1:at.collectionId=j.string();break;case 2:at.collection=a.Collection.decode(j,j.uint32());break;default:j.skipType(bt&7);break}}return at},fromJSON(g){return{collectionId:Rt(g.collectionId)?String(g.collectionId):"",collection:Rt(g.collection)?a.Collection.fromJSON(g.collection):void 0}},toJSON(g){const k={};return g.collectionId!==void 0&&(k.collectionId=g.collectionId),g.collection!==void 0&&(k.collection=g.collection?a.Collection.toJSON(g.collection):void 0),k},fromPartial(g){var k;const j=Vo();return j.collectionId=(k=g.collectionId)!==null&&k!==void 0?k:"",j.collection=g.collection!==void 0&&g.collection!==null?a.Collection.fromPartial(g.collection):void 0,j}};function Fo(){return{collectionId:""}}a.CollectionDeleteEvent={encode(g,k=_.Writer.create()){return g.collectionId!==""&&k.uint32(10).string(g.collectionId),k},decode(g,k){const j=g instanceof _.Reader?g:new _.Reader(g);let St=k===void 0?j.len:j.pos+k;const at=Fo();for(;j.pos<St;){const bt=j.uint32();switch(bt>>>3){case 1:at.collectionId=j.string();break;default:j.skipType(bt&7);break}}return at},fromJSON(g){return{collectionId:Rt(g.collectionId)?String(g.collectionId):""}},toJSON(g){const k={};return g.collectionId!==void 0&&(k.collectionId=g.collectionId),k},fromPartial(g){var k;const j=Fo();return j.collectionId=(k=g.collectionId)!==null&&k!==void 0?k:"",j}};function Jo(){return{collectionId:"",updateMask:[],collection:void 0}}a.CollectionUpdateEvent={encode(g,k=_.Writer.create()){g.collectionId!==""&&k.uint32(10).string(g.collectionId);for(const j of g.updateMask)k.uint32(18).string(j);return g.collection!==void 0&&a.Collection.encode(g.collection,k.uint32(26).fork()).ldelim(),k},decode(g,k){const j=g instanceof _.Reader?g:new _.Reader(g);let St=k===void 0?j.len:j.pos+k;const at=Jo();for(;j.pos<St;){const bt=j.uint32();switch(bt>>>3){case 1:at.collectionId=j.string();break;case 2:at.updateMask.push(j.string());break;case 3:at.collection=a.Collection.decode(j,j.uint32());break;default:j.skipType(bt&7);break}}return at},fromJSON(g){return{collectionId:Rt(g.collectionId)?String(g.collectionId):"",updateMask:Array.isArray(g==null?void 0:g.updateMask)?g.updateMask.map(k=>String(k)):[],collection:Rt(g.collection)?a.Collection.fromJSON(g.collection):void 0}},toJSON(g){const k={};return g.collectionId!==void 0&&(k.collectionId=g.collectionId),g.updateMask?k.updateMask=g.updateMask.map(j=>j):k.updateMask=[],g.collection!==void 0&&(k.collection=g.collection?a.Collection.toJSON(g.collection):void 0),k},fromPartial(g){var k,j;const St=Jo();return St.collectionId=(k=g.collectionId)!==null&&k!==void 0?k:"",St.updateMask=((j=g.updateMask)===null||j===void 0?void 0:j.map(at=>at))||[],St.collection=g.collection!==void 0&&g.collection!==null?a.Collection.fromPartial(g.collection):void 0,St}};function qo(){return{collectionId:"",sourceId:"",source:void 0}}a.SourceCreateEvent={encode(g,k=_.Writer.create()){return g.collectionId!==""&&k.uint32(10).string(g.collectionId),g.sourceId!==""&&k.uint32(18).string(g.sourceId),g.source!==void 0&&a.Source.encode(g.source,k.uint32(26).fork()).ldelim(),k},decode(g,k){const j=g instanceof _.Reader?g:new _.Reader(g);let St=k===void 0?j.len:j.pos+k;const at=qo();for(;j.pos<St;){const bt=j.uint32();switch(bt>>>3){case 1:at.collectionId=j.string();break;case 2:at.sourceId=j.string();break;case 3:at.source=a.Source.decode(j,j.uint32());break;default:j.skipType(bt&7);break}}return at},fromJSON(g){return{collectionId:Rt(g.collectionId)?String(g.collectionId):"",sourceId:Rt(g.sourceId)?String(g.sourceId):"",source:Rt(g.source)?a.Source.fromJSON(g.source):void 0}},toJSON(g){const k={};return g.collectionId!==void 0&&(k.collectionId=g.collectionId),g.sourceId!==void 0&&(k.sourceId=g.sourceId),g.source!==void 0&&(k.source=g.source?a.Source.toJSON(g.source):void 0),k},fromPartial(g){var k,j;const St=qo();return St.collectionId=(k=g.collectionId)!==null&&k!==void 0?k:"",St.sourceId=(j=g.sourceId)!==null&&j!==void 0?j:"",St.source=g.source!==void 0&&g.source!==null?a.Source.fromPartial(g.source):void 0,St}};function Go(){return{collectionId:"",sourceId:""}}a.SourceDeleteEvent={encode(g,k=_.Writer.create()){return g.collectionId!==""&&k.uint32(10).string(g.collectionId),g.sourceId!==""&&k.uint32(18).string(g.sourceId),k},decode(g,k){const j=g instanceof _.Reader?g:new _.Reader(g);let St=k===void 0?j.len:j.pos+k;const at=Go();for(;j.pos<St;){const bt=j.uint32();switch(bt>>>3){case 1:at.collectionId=j.string();break;case 2:at.sourceId=j.string();break;default:j.skipType(bt&7);break}}return at},fromJSON(g){return{collectionId:Rt(g.collectionId)?String(g.collectionId):"",sourceId:Rt(g.sourceId)?String(g.sourceId):""}},toJSON(g){const k={};return g.collectionId!==void 0&&(k.collectionId=g.collectionId),g.sourceId!==void 0&&(k.sourceId=g.sourceId),k},fromPartial(g){var k,j;const St=Go();return St.collectionId=(k=g.collectionId)!==null&&k!==void 0?k:"",St.sourceId=(j=g.sourceId)!==null&&j!==void 0?j:"",St}};function xo(){return{collectionId:"",sourceId:"",updateMask:[],source:void 0}}a.SourceUpdateEvent={encode(g,k=_.Writer.create()){g.collectionId!==""&&k.uint32(10).string(g.collectionId),g.sourceId!==""&&k.uint32(18).string(g.sourceId);for(const j of g.updateMask)k.uint32(26).string(j);return g.source!==void 0&&a.Source.encode(g.source,k.uint32(34).fork()).ldelim(),k},decode(g,k){const j=g instanceof _.Reader?g:new _.Reader(g);let St=k===void 0?j.len:j.pos+k;const at=xo();for(;j.pos<St;){const bt=j.uint32();switch(bt>>>3){case 1:at.collectionId=j.string();break;case 2:at.sourceId=j.string();break;case 3:at.updateMask.push(j.string());break;case 4:at.source=a.Source.decode(j,j.uint32());break;default:j.skipType(bt&7);break}}return at},fromJSON(g){return{collectionId:Rt(g.collectionId)?String(g.collectionId):"",sourceId:Rt(g.sourceId)?String(g.sourceId):"",updateMask:Array.isArray(g==null?void 0:g.updateMask)?g.updateMask.map(k=>String(k)):[],source:Rt(g.source)?a.Source.fromJSON(g.source):void 0}},toJSON(g){const k={};return g.collectionId!==void 0&&(k.collectionId=g.collectionId),g.sourceId!==void 0&&(k.sourceId=g.sourceId),g.updateMask?k.updateMask=g.updateMask.map(j=>j):k.updateMask=[],g.source!==void 0&&(k.source=g.source?a.Source.toJSON(g.source):void 0),k},fromPartial(g){var k,j,St;const at=xo();return at.collectionId=(k=g.collectionId)!==null&&k!==void 0?k:"",at.sourceId=(j=g.sourceId)!==null&&j!==void 0?j:"",at.updateMask=((St=g.updateMask)===null||St===void 0?void 0:St.map(bt=>bt))||[],at.source=g.source!==void 0&&g.source!==null?a.Source.fromPartial(g.source):void 0,at}};function Wo(){return{collectionId:"",sourceId:"",projectId:"",source:void 0}}a.SourceAddEvent={encode(g,k=_.Writer.create()){return g.collectionId!==""&&k.uint32(10).string(g.collectionId),g.sourceId!==""&&k.uint32(18).string(g.sourceId),g.projectId!==""&&k.uint32(26).string(g.projectId),g.source!==void 0&&a.Source.encode(g.source,k.uint32(34).fork()).ldelim(),k},decode(g,k){const j=g instanceof _.Reader?g:new _.Reader(g);let St=k===void 0?j.len:j.pos+k;const at=Wo();for(;j.pos<St;){const bt=j.uint32();switch(bt>>>3){case 1:at.collectionId=j.string();break;case 2:at.sourceId=j.string();break;case 3:at.projectId=j.string();break;case 4:at.source=a.Source.decode(j,j.uint32());break;default:j.skipType(bt&7);break}}return at},fromJSON(g){return{collectionId:Rt(g.collectionId)?String(g.collectionId):"",sourceId:Rt(g.sourceId)?String(g.sourceId):"",projectId:Rt(g.projectId)?String(g.projectId):"",source:Rt(g.source)?a.Source.fromJSON(g.source):void 0}},toJSON(g){const k={};return g.collectionId!==void 0&&(k.collectionId=g.collectionId),g.sourceId!==void 0&&(k.sourceId=g.sourceId),g.projectId!==void 0&&(k.projectId=g.projectId),g.source!==void 0&&(k.source=g.source?a.Source.toJSON(g.source):void 0),k},fromPartial(g){var k,j,St;const at=Wo();return at.collectionId=(k=g.collectionId)!==null&&k!==void 0?k:"",at.sourceId=(j=g.sourceId)!==null&&j!==void 0?j:"",at.projectId=(St=g.projectId)!==null&&St!==void 0?St:"",at.source=g.source!==void 0&&g.source!==null?a.Source.fromPartial(g.source):void 0,at}};function Ho(){return{collectionId:"",sourceId:"",projectId:""}}a.SourceRemoveEvent={encode(g,k=_.Writer.create()){return g.collectionId!==""&&k.uint32(10).string(g.collectionId),g.sourceId!==""&&k.uint32(18).string(g.sourceId),g.projectId!==""&&k.uint32(26).string(g.projectId),k},decode(g,k){const j=g instanceof _.Reader?g:new _.Reader(g);let St=k===void 0?j.len:j.pos+k;const at=Ho();for(;j.pos<St;){const bt=j.uint32();switch(bt>>>3){case 1:at.collectionId=j.string();break;case 2:at.sourceId=j.string();break;case 3:at.projectId=j.string();break;default:j.skipType(bt&7);break}}return at},fromJSON(g){return{collectionId:Rt(g.collectionId)?String(g.collectionId):"",sourceId:Rt(g.sourceId)?String(g.sourceId):"",projectId:Rt(g.projectId)?String(g.projectId):""}},toJSON(g){const k={};return g.collectionId!==void 0&&(k.collectionId=g.collectionId),g.sourceId!==void 0&&(k.sourceId=g.sourceId),g.projectId!==void 0&&(k.projectId=g.projectId),k},fromPartial(g){var k,j,St;const at=Ho();return at.collectionId=(k=g.collectionId)!==null&&k!==void 0?k:"",at.sourceId=(j=g.sourceId)!==null&&j!==void 0?j:"",at.projectId=(St=g.projectId)!==null&&St!==void 0?St:"",at}};function zo(){return{collectionId:"",projectId:"",sourceId:"",connect:void 0}}a.SourceStateEvent={encode(g,k=_.Writer.create()){return g.collectionId!==""&&k.uint32(10).string(g.collectionId),g.projectId!==""&&k.uint32(18).string(g.projectId),g.sourceId!==""&&k.uint32(26).string(g.sourceId),g.connect!==void 0&&k.uint32(32).int32(Vn(g.connect)),k},decode(g,k){const j=g instanceof _.Reader?g:new _.Reader(g);let St=k===void 0?j.len:j.pos+k;const at=zo();for(;j.pos<St;){const bt=j.uint32();switch(bt>>>3){case 1:at.collectionId=j.string();break;case 2:at.projectId=j.string();break;case 3:at.sourceId=j.string();break;case 4:at.connect=Rn(j.int32());break;default:j.skipType(bt&7);break}}return at},fromJSON(g){return{collectionId:Rt(g.collectionId)?String(g.collectionId):"",projectId:Rt(g.projectId)?String(g.projectId):"",sourceId:Rt(g.sourceId)?String(g.sourceId):"",connect:Rt(g.connect)?Rn(g.connect):void 0}},toJSON(g){const k={};return g.collectionId!==void 0&&(k.collectionId=g.collectionId),g.projectId!==void 0&&(k.projectId=g.projectId),g.sourceId!==void 0&&(k.sourceId=g.sourceId),g.connect!==void 0&&(k.connect=g.connect!==void 0?Bn(g.connect):void 0),k},fromPartial(g){var k,j,St,at;const bt=zo();return bt.collectionId=(k=g.collectionId)!==null&&k!==void 0?k:"",bt.projectId=(j=g.projectId)!==null&&j!==void 0?j:"",bt.sourceId=(St=g.sourceId)!==null&&St!==void 0?St:"",bt.connect=(at=g.connect)!==null&&at!==void 0?at:void 0,bt}};function Yo(){return{create:void 0,update:void 0,delete:void 0}}a.CollectionEvent={encode(g,k=_.Writer.create()){return g.create!==void 0&&a.CollectionCreateEvent.encode(g.create,k.uint32(10).fork()).ldelim(),g.update!==void 0&&a.CollectionUpdateEvent.encode(g.update,k.uint32(18).fork()).ldelim(),g.delete!==void 0&&a.CollectionDeleteEvent.encode(g.delete,k.uint32(26).fork()).ldelim(),k},decode(g,k){const j=g instanceof _.Reader?g:new _.Reader(g);let St=k===void 0?j.len:j.pos+k;const at=Yo();for(;j.pos<St;){const bt=j.uint32();switch(bt>>>3){case 1:at.create=a.CollectionCreateEvent.decode(j,j.uint32());break;case 2:at.update=a.CollectionUpdateEvent.decode(j,j.uint32());break;case 3:at.delete=a.CollectionDeleteEvent.decode(j,j.uint32());break;default:j.skipType(bt&7);break}}return at},fromJSON(g){return{create:Rt(g.create)?a.CollectionCreateEvent.fromJSON(g.create):void 0,update:Rt(g.update)?a.CollectionUpdateEvent.fromJSON(g.update):void 0,delete:Rt(g.delete)?a.CollectionDeleteEvent.fromJSON(g.delete):void 0}},toJSON(g){const k={};return g.create!==void 0&&(k.create=g.create?a.CollectionCreateEvent.toJSON(g.create):void 0),g.update!==void 0&&(k.update=g.update?a.CollectionUpdateEvent.toJSON(g.update):void 0),g.delete!==void 0&&(k.delete=g.delete?a.CollectionDeleteEvent.toJSON(g.delete):void 0),k},fromPartial(g){const k=Yo();return k.create=g.create!==void 0&&g.create!==null?a.CollectionCreateEvent.fromPartial(g.create):void 0,k.update=g.update!==void 0&&g.update!==null?a.CollectionUpdateEvent.fromPartial(g.update):void 0,k.delete=g.delete!==void 0&&g.delete!==null?a.CollectionDeleteEvent.fromPartial(g.delete):void 0,k}};function Ko(){return{create:void 0,update:void 0,delete:void 0,state:void 0}}a.DestinationEvent={encode(g,k=_.Writer.create()){return g.create!==void 0&&a.DestinationCreateEvent.encode(g.create,k.uint32(10).fork()).ldelim(),g.update!==void 0&&a.DestinationUpdateEvent.encode(g.update,k.uint32(18).fork()).ldelim(),g.delete!==void 0&&a.DestinationDeleteEvent.encode(g.delete,k.uint32(26).fork()).ldelim(),g.state!==void 0&&a.DestinationStateEvent.encode(g.state,k.uint32(34).fork()).ldelim(),k},decode(g,k){const j=g instanceof _.Reader?g:new _.Reader(g);let St=k===void 0?j.len:j.pos+k;const at=Ko();for(;j.pos<St;){const bt=j.uint32();switch(bt>>>3){case 1:at.create=a.DestinationCreateEvent.decode(j,j.uint32());break;case 2:at.update=a.DestinationUpdateEvent.decode(j,j.uint32());break;case 3:at.delete=a.DestinationDeleteEvent.decode(j,j.uint32());break;case 4:at.state=a.DestinationStateEvent.decode(j,j.uint32());break;default:j.skipType(bt&7);break}}return at},fromJSON(g){return{create:Rt(g.create)?a.DestinationCreateEvent.fromJSON(g.create):void 0,update:Rt(g.update)?a.DestinationUpdateEvent.fromJSON(g.update):void 0,delete:Rt(g.delete)?a.DestinationDeleteEvent.fromJSON(g.delete):void 0,state:Rt(g.state)?a.DestinationStateEvent.fromJSON(g.state):void 0}},toJSON(g){const k={};return g.create!==void 0&&(k.create=g.create?a.DestinationCreateEvent.toJSON(g.create):void 0),g.update!==void 0&&(k.update=g.update?a.DestinationUpdateEvent.toJSON(g.update):void 0),g.delete!==void 0&&(k.delete=g.delete?a.DestinationDeleteEvent.toJSON(g.delete):void 0),g.state!==void 0&&(k.state=g.state?a.DestinationStateEvent.toJSON(g.state):void 0),k},fromPartial(g){const k=Ko();return k.create=g.create!==void 0&&g.create!==null?a.DestinationCreateEvent.fromPartial(g.create):void 0,k.update=g.update!==void 0&&g.update!==null?a.DestinationUpdateEvent.fromPartial(g.update):void 0,k.delete=g.delete!==void 0&&g.delete!==null?a.DestinationDeleteEvent.fromPartial(g.delete):void 0,k.state=g.state!==void 0&&g.state!==null?a.DestinationStateEvent.fromPartial(g.state):void 0,k}};function Qo(){return{create:void 0,update:void 0,delete:void 0,state:void 0}}a.ProjectEvent={encode(g,k=_.Writer.create()){return g.create!==void 0&&a.ProjectCreateEvent.encode(g.create,k.uint32(10).fork()).ldelim(),g.update!==void 0&&a.ProjectUpdateEvent.encode(g.update,k.uint32(18).fork()).ldelim(),g.delete!==void 0&&a.ProjectDeleteEvent.encode(g.delete,k.uint32(26).fork()).ldelim(),g.state!==void 0&&a.ProjectBroadcastStateEvent.encode(g.state,k.uint32(34).fork()).ldelim(),k},decode(g,k){const j=g instanceof _.Reader?g:new _.Reader(g);let St=k===void 0?j.len:j.pos+k;const at=Qo();for(;j.pos<St;){const bt=j.uint32();switch(bt>>>3){case 1:at.create=a.ProjectCreateEvent.decode(j,j.uint32());break;case 2:at.update=a.ProjectUpdateEvent.decode(j,j.uint32());break;case 3:at.delete=a.ProjectDeleteEvent.decode(j,j.uint32());break;case 4:at.state=a.ProjectBroadcastStateEvent.decode(j,j.uint32());break;default:j.skipType(bt&7);break}}return at},fromJSON(g){return{create:Rt(g.create)?a.ProjectCreateEvent.fromJSON(g.create):void 0,update:Rt(g.update)?a.ProjectUpdateEvent.fromJSON(g.update):void 0,delete:Rt(g.delete)?a.ProjectDeleteEvent.fromJSON(g.delete):void 0,state:Rt(g.state)?a.ProjectBroadcastStateEvent.fromJSON(g.state):void 0}},toJSON(g){const k={};return g.create!==void 0&&(k.create=g.create?a.ProjectCreateEvent.toJSON(g.create):void 0),g.update!==void 0&&(k.update=g.update?a.ProjectUpdateEvent.toJSON(g.update):void 0),g.delete!==void 0&&(k.delete=g.delete?a.ProjectDeleteEvent.toJSON(g.delete):void 0),g.state!==void 0&&(k.state=g.state?a.ProjectBroadcastStateEvent.toJSON(g.state):void 0),k},fromPartial(g){const k=Qo();return k.create=g.create!==void 0&&g.create!==null?a.ProjectCreateEvent.fromPartial(g.create):void 0,k.update=g.update!==void 0&&g.update!==null?a.ProjectUpdateEvent.fromPartial(g.update):void 0,k.delete=g.delete!==void 0&&g.delete!==null?a.ProjectDeleteEvent.fromPartial(g.delete):void 0,k.state=g.state!==void 0&&g.state!==null?a.ProjectBroadcastStateEvent.fromPartial(g.state):void 0,k}};function Zo(){return{create:void 0,update:void 0,delete:void 0,add:void 0,remove:void 0,state:void 0}}a.SourceEvent={encode(g,k=_.Writer.create()){return g.create!==void 0&&a.SourceCreateEvent.encode(g.create,k.uint32(10).fork()).ldelim(),g.update!==void 0&&a.SourceUpdateEvent.encode(g.update,k.uint32(18).fork()).ldelim(),g.delete!==void 0&&a.SourceDeleteEvent.encode(g.delete,k.uint32(26).fork()).ldelim(),g.add!==void 0&&a.SourceAddEvent.encode(g.add,k.uint32(34).fork()).ldelim(),g.remove!==void 0&&a.SourceDeleteEvent.encode(g.remove,k.uint32(42).fork()).ldelim(),g.state!==void 0&&a.SourceStateEvent.encode(g.state,k.uint32(50).fork()).ldelim(),k},decode(g,k){const j=g instanceof _.Reader?g:new _.Reader(g);let St=k===void 0?j.len:j.pos+k;const at=Zo();for(;j.pos<St;){const bt=j.uint32();switch(bt>>>3){case 1:at.create=a.SourceCreateEvent.decode(j,j.uint32());break;case 2:at.update=a.SourceUpdateEvent.decode(j,j.uint32());break;case 3:at.delete=a.SourceDeleteEvent.decode(j,j.uint32());break;case 4:at.add=a.SourceAddEvent.decode(j,j.uint32());break;case 5:at.remove=a.SourceDeleteEvent.decode(j,j.uint32());break;case 6:at.state=a.SourceStateEvent.decode(j,j.uint32());break;default:j.skipType(bt&7);break}}return at},fromJSON(g){return{create:Rt(g.create)?a.SourceCreateEvent.fromJSON(g.create):void 0,update:Rt(g.update)?a.SourceUpdateEvent.fromJSON(g.update):void 0,delete:Rt(g.delete)?a.SourceDeleteEvent.fromJSON(g.delete):void 0,add:Rt(g.add)?a.SourceAddEvent.fromJSON(g.add):void 0,remove:Rt(g.remove)?a.SourceDeleteEvent.fromJSON(g.remove):void 0,state:Rt(g.state)?a.SourceStateEvent.fromJSON(g.state):void 0}},toJSON(g){const k={};return g.create!==void 0&&(k.create=g.create?a.SourceCreateEvent.toJSON(g.create):void 0),g.update!==void 0&&(k.update=g.update?a.SourceUpdateEvent.toJSON(g.update):void 0),g.delete!==void 0&&(k.delete=g.delete?a.SourceDeleteEvent.toJSON(g.delete):void 0),g.add!==void 0&&(k.add=g.add?a.SourceAddEvent.toJSON(g.add):void 0),g.remove!==void 0&&(k.remove=g.remove?a.SourceDeleteEvent.toJSON(g.remove):void 0),g.state!==void 0&&(k.state=g.state?a.SourceStateEvent.toJSON(g.state):void 0),k},fromPartial(g){const k=Zo();return k.create=g.create!==void 0&&g.create!==null?a.SourceCreateEvent.fromPartial(g.create):void 0,k.update=g.update!==void 0&&g.update!==null?a.SourceUpdateEvent.fromPartial(g.update):void 0,k.delete=g.delete!==void 0&&g.delete!==null?a.SourceDeleteEvent.fromPartial(g.delete):void 0,k.add=g.add!==void 0&&g.add!==null?a.SourceAddEvent.fromPartial(g.add):void 0,k.remove=g.remove!==void 0&&g.remove!==null?a.SourceDeleteEvent.fromPartial(g.remove):void 0,k.state=g.state!==void 0&&g.state!==null?a.SourceStateEvent.fromPartial(g.state):void 0,k}};function Xo(){return{collection:void 0,destination:void 0,project:void 0,source:void 0,unspecified:void 0}}a.LiveEvent={encode(g,k=_.Writer.create()){return g.collection!==void 0&&a.CollectionEvent.encode(g.collection,k.uint32(10).fork()).ldelim(),g.destination!==void 0&&a.DestinationEvent.encode(g.destination,k.uint32(18).fork()).ldelim(),g.project!==void 0&&a.ProjectEvent.encode(g.project,k.uint32(26).fork()).ldelim(),g.source!==void 0&&a.SourceEvent.encode(g.source,k.uint32(34).fork()).ldelim(),g.unspecified!==void 0&&k.uint32(40).int32((0,_e.nullValueToNumber)(g.unspecified)),k},decode(g,k){const j=g instanceof _.Reader?g:new _.Reader(g);let St=k===void 0?j.len:j.pos+k;const at=Xo();for(;j.pos<St;){const bt=j.uint32();switch(bt>>>3){case 1:at.collection=a.CollectionEvent.decode(j,j.uint32());break;case 2:at.destination=a.DestinationEvent.decode(j,j.uint32());break;case 3:at.project=a.ProjectEvent.decode(j,j.uint32());break;case 4:at.source=a.SourceEvent.decode(j,j.uint32());break;case 5:at.unspecified=(0,_e.nullValueFromJSON)(j.int32());break;default:j.skipType(bt&7);break}}return at},fromJSON(g){return{collection:Rt(g.collection)?a.CollectionEvent.fromJSON(g.collection):void 0,destination:Rt(g.destination)?a.DestinationEvent.fromJSON(g.destination):void 0,project:Rt(g.project)?a.ProjectEvent.fromJSON(g.project):void 0,source:Rt(g.source)?a.SourceEvent.fromJSON(g.source):void 0,unspecified:Rt(g.unspecified)?(0,_e.nullValueFromJSON)(g.unspecified):void 0}},toJSON(g){const k={};return g.collection!==void 0&&(k.collection=g.collection?a.CollectionEvent.toJSON(g.collection):void 0),g.destination!==void 0&&(k.destination=g.destination?a.DestinationEvent.toJSON(g.destination):void 0),g.project!==void 0&&(k.project=g.project?a.ProjectEvent.toJSON(g.project):void 0),g.source!==void 0&&(k.source=g.source?a.SourceEvent.toJSON(g.source):void 0),g.unspecified!==void 0&&(k.unspecified=g.unspecified!==void 0?(0,_e.nullValueToJSON)(g.unspecified):void 0),k},fromPartial(g){var k;const j=Xo();return j.collection=g.collection!==void 0&&g.collection!==null?a.CollectionEvent.fromPartial(g.collection):void 0,j.destination=g.destination!==void 0&&g.destination!==null?a.DestinationEvent.fromPartial(g.destination):void 0,j.project=g.project!==void 0&&g.project!==null?a.ProjectEvent.fromPartial(g.project):void 0,j.source=g.source!==void 0&&g.source!==null?a.SourceEvent.fromPartial(g.source):void 0,j.unspecified=(k=g.unspecified)!==null&&k!==void 0?k:void 0,j}};class jo{constructor(k){this.rpc=k,this.CreateCollection=this.CreateCollection.bind(this),this.GetCollection=this.GetCollection.bind(this),this.GetCollections=this.GetCollections.bind(this),this.UpdateCollection=this.UpdateCollection.bind(this),this.DeleteCollection=this.DeleteCollection.bind(this)}CreateCollection(k){const j=a.CreateCollectionRequest.encode(k).finish();return this.rpc.request("live.v21.CollectionService","CreateCollection",j).then(at=>a.CreateCollectionResponse.decode(new _.Reader(at)))}GetCollection(k){const j=a.GetCollectionRequest.encode(k).finish();return this.rpc.request("live.v21.CollectionService","GetCollection",j).then(at=>a.GetCollectionResponse.decode(new _.Reader(at)))}GetCollections(k){const j=a.GetCollectionsRequest.encode(k).finish();return this.rpc.request("live.v21.CollectionService","GetCollections",j).then(at=>a.GetCollectionsResponse.decode(new _.Reader(at)))}UpdateCollection(k){const j=a.UpdateCollectionRequest.encode(k).finish();return this.rpc.request("live.v21.CollectionService","UpdateCollection",j).then(at=>a.UpdateCollectionResponse.decode(new _.Reader(at)))}DeleteCollection(k){const j=a.DeleteCollectionRequest.encode(k).finish();return this.rpc.request("live.v21.CollectionService","DeleteCollection",j).then(at=>a.DeleteCollectionResponse.decode(new _.Reader(at)))}}a.CollectionServiceClientImpl=jo,a.CollectionServiceDefinition={name:"CollectionService",fullName:"live.v21.CollectionService",methods:{createCollection:{name:"CreateCollection",requestType:a.CreateCollectionRequest,requestStream:!1,responseType:a.CreateCollectionResponse,responseStream:!1,options:{}},getCollection:{name:"GetCollection",requestType:a.GetCollectionRequest,requestStream:!1,responseType:a.GetCollectionResponse,responseStream:!1,options:{}},getCollections:{name:"GetCollections",requestType:a.GetCollectionsRequest,requestStream:!1,responseType:a.GetCollectionsResponse,responseStream:!1,options:{}},updateCollection:{name:"UpdateCollection",requestType:a.UpdateCollectionRequest,requestStream:!1,responseType:a.UpdateCollectionResponse,responseStream:!1,options:{}},deleteCollection:{name:"DeleteCollection",requestType:a.DeleteCollectionRequest,requestStream:!1,responseType:a.DeleteCollectionResponse,responseStream:!1,options:{}}}};class ts{constructor(k){this.rpc=k,this.CreateProject=this.CreateProject.bind(this),this.GetProject=this.GetProject.bind(this),this.DeleteProject=this.DeleteProject.bind(this),this.UpdateProject=this.UpdateProject.bind(this),this.StartProjectBroadcast=this.StartProjectBroadcast.bind(this),this.StopProjectBroadcast=this.StopProjectBroadcast.bind(this),this.StartProjectWebRtc=this.StartProjectWebRtc.bind(this),this.StopProjectWebRtc=this.StopProjectWebRtc.bind(this),this.GetProjectBroadcastSnapshot=this.GetProjectBroadcastSnapshot.bind(this),this.GetProjectBroadcastStatus=this.GetProjectBroadcastStatus.bind(this)}CreateProject(k){const j=a.CreateProjectRequest.encode(k).finish();return this.rpc.request("live.v21.ProjectService","CreateProject",j).then(at=>a.CreateProjectResponse.decode(new _.Reader(at)))}GetProject(k){const j=a.GetProjectRequest.encode(k).finish();return this.rpc.request("live.v21.ProjectService","GetProject",j).then(at=>a.GetProjectResponse.decode(new _.Reader(at)))}DeleteProject(k){const j=a.DeleteProjectRequest.encode(k).finish();return this.rpc.request("live.v21.ProjectService","DeleteProject",j).then(at=>a.DeleteProjectResponse.decode(new _.Reader(at)))}UpdateProject(k){const j=a.UpdateProjectRequest.encode(k).finish();return this.rpc.request("live.v21.ProjectService","UpdateProject",j).then(at=>a.UpdateProjectResponse.decode(new _.Reader(at)))}StartProjectBroadcast(k){const j=a.StartProjectBroadcastRequest.encode(k).finish();return this.rpc.request("live.v21.ProjectService","StartProjectBroadcast",j).then(at=>a.StartProjectBroadcastResponse.decode(new _.Reader(at)))}StopProjectBroadcast(k){const j=a.StopProjectBroadcastRequest.encode(k).finish();return this.rpc.request("live.v21.ProjectService","StopProjectBroadcast",j).then(at=>a.StopProjectBroadcastResponse.decode(new _.Reader(at)))}StartProjectWebRtc(k){const j=a.StartProjectWebRtcRequest.encode(k).finish();return this.rpc.request("live.v21.ProjectService","StartProjectWebRtc",j).then(at=>a.StartProjectWebRtcResponse.decode(new _.Reader(at)))}StopProjectWebRtc(k){const j=a.StopProjectWebRtcRequest.encode(k).finish();return this.rpc.request("live.v21.ProjectService","StopProjectWebRtc",j).then(at=>a.StopProjectWebRtcResponse.decode(new _.Reader(at)))}GetProjectBroadcastSnapshot(k){const j=a.GetProjectBroadcastSnapshotRequest.encode(k).finish();return this.rpc.request("live.v21.ProjectService","GetProjectBroadcastSnapshot",j).then(at=>a.GetProjectBroadcastSnapshotResponse.decode(new _.Reader(at)))}GetProjectBroadcastStatus(k){const j=a.GetProjectBroadcastStatusRequest.encode(k).finish();return this.rpc.request("live.v21.ProjectService","GetProjectBroadcastStatus",j).then(at=>a.GetProjectBroadcastStatusResponse.decode(new _.Reader(at)))}}a.ProjectServiceClientImpl=ts,a.ProjectServiceDefinition={name:"ProjectService",fullName:"live.v21.ProjectService",methods:{createProject:{name:"CreateProject",requestType:a.CreateProjectRequest,requestStream:!1,responseType:a.CreateProjectResponse,responseStream:!1,options:{}},getProject:{name:"GetProject",requestType:a.GetProjectRequest,requestStream:!1,responseType:a.GetProjectResponse,responseStream:!1,options:{}},deleteProject:{name:"DeleteProject",requestType:a.DeleteProjectRequest,requestStream:!1,responseType:a.DeleteProjectResponse,responseStream:!1,options:{}},updateProject:{name:"UpdateProject",requestType:a.UpdateProjectRequest,requestStream:!1,responseType:a.UpdateProjectResponse,responseStream:!1,options:{}},startProjectBroadcast:{name:"StartProjectBroadcast",requestType:a.StartProjectBroadcastRequest,requestStream:!1,responseType:a.StartProjectBroadcastResponse,responseStream:!1,options:{}},stopProjectBroadcast:{name:"StopProjectBroadcast",requestType:a.StopProjectBroadcastRequest,requestStream:!1,responseType:a.StopProjectBroadcastResponse,responseStream:!1,options:{}},startProjectWebRtc:{name:"StartProjectWebRtc",requestType:a.StartProjectWebRtcRequest,requestStream:!1,responseType:a.StartProjectWebRtcResponse,responseStream:!1,options:{}},stopProjectWebRtc:{name:"StopProjectWebRtc",requestType:a.StopProjectWebRtcRequest,requestStream:!1,responseType:a.StopProjectWebRtcResponse,responseStream:!1,options:{}},getProjectBroadcastSnapshot:{name:"GetProjectBroadcastSnapshot",requestType:a.GetProjectBroadcastSnapshotRequest,requestStream:!1,responseType:a.GetProjectBroadcastSnapshotResponse,responseStream:!1,options:{}},getProjectBroadcastStatus:{name:"GetProjectBroadcastStatus",requestType:a.GetProjectBroadcastStatusRequest,requestStream:!1,responseType:a.GetProjectBroadcastStatusResponse,responseStream:!1,options:{}}}};class ns{constructor(k){this.rpc=k,this.CreateDestination=this.CreateDestination.bind(this),this.GetDestination=this.GetDestination.bind(this),this.UpdateDestination=this.UpdateDestination.bind(this),this.DeleteDestination=this.DeleteDestination.bind(this)}CreateDestination(k){const j=a.CreateDestinationRequest.encode(k).finish();return this.rpc.request("live.v21.DestinationService","CreateDestination",j).then(at=>a.CreateDestinationResponse.decode(new _.Reader(at)))}GetDestination(k){const j=a.GetDestinationRequest.encode(k).finish();return this.rpc.request("live.v21.DestinationService","GetDestination",j).then(at=>a.GetDestinationResponse.decode(new _.Reader(at)))}UpdateDestination(k){const j=a.UpdateDestinationRequest.encode(k).finish();return this.rpc.request("live.v21.DestinationService","UpdateDestination",j).then(at=>a.UpdateDestinationResponse.decode(new _.Reader(at)))}DeleteDestination(k){const j=a.DeleteDestinationRequest.encode(k).finish();return this.rpc.request("live.v21.DestinationService","DeleteDestination",j).then(at=>a.DeleteDestinationResponse.decode(new _.Reader(at)))}}a.DestinationServiceClientImpl=ns,a.DestinationServiceDefinition={name:"DestinationService",fullName:"live.v21.DestinationService",methods:{createDestination:{name:"CreateDestination",requestType:a.CreateDestinationRequest,requestStream:!1,responseType:a.CreateDestinationResponse,responseStream:!1,options:{}},getDestination:{name:"GetDestination",requestType:a.GetDestinationRequest,requestStream:!1,responseType:a.GetDestinationResponse,responseStream:!1,options:{}},updateDestination:{name:"UpdateDestination",requestType:a.UpdateDestinationRequest,requestStream:!1,responseType:a.UpdateDestinationResponse,responseStream:!1,options:{}},deleteDestination:{name:"DeleteDestination",requestType:a.DeleteDestinationRequest,requestStream:!1,responseType:a.DeleteDestinationResponse,responseStream:!1,options:{}}}};class rs{constructor(k){this.rpc=k,this.CreateSource=this.CreateSource.bind(this),this.DeleteSource=this.DeleteSource.bind(this),this.UpdateSource=this.UpdateSource.bind(this),this.UpdateSourceInProject=this.UpdateSourceInProject.bind(this),this.GetSource=this.GetSource.bind(this),this.GetSources=this.GetSources.bind(this),this.AddSourceToProject=this.AddSourceToProject.bind(this),this.RemoveSourceFromProject=this.RemoveSourceFromProject.bind(this)}CreateSource(k){const j=a.CreateSourceRequest.encode(k).finish();return this.rpc.request("live.v21.SourceService","CreateSource",j).then(at=>a.CreateSourceResponse.decode(new _.Reader(at)))}DeleteSource(k){const j=a.DeleteSourceRequest.encode(k).finish();return this.rpc.request("live.v21.SourceService","DeleteSource",j).then(at=>a.DeleteSourceResponse.decode(new _.Reader(at)))}UpdateSource(k){const j=a.UpdateSourceRequest.encode(k).finish();return this.rpc.request("live.v21.SourceService","UpdateSource",j).then(at=>a.UpdateSourceResponse.decode(new _.Reader(at)))}UpdateSourceInProject(k){const j=a.UpdateSourceInProjectRequest.encode(k).finish();return this.rpc.request("live.v21.SourceService","UpdateSourceInProject",j).then(at=>a.UpdateSourceInProjectResponse.decode(new _.Reader(at)))}GetSource(k){const j=a.GetSourceRequest.encode(k).finish();return this.rpc.request("live.v21.SourceService","GetSource",j).then(at=>a.GetSourceResponse.decode(new _.Reader(at)))}GetSources(k){const j=a.GetSourcesRequest.encode(k).finish();return this.rpc.request("live.v21.SourceService","GetSources",j).then(at=>a.GetSourcesResponse.decode(new _.Reader(at)))}AddSourceToProject(k){const j=a.AddSourceToProjectRequest.encode(k).finish();return this.rpc.request("live.v21.SourceService","AddSourceToProject",j).then(at=>a.AddSourceToProjectResponse.decode(new _.Reader(at)))}RemoveSourceFromProject(k){const j=a.RemoveSourceFromProjectRequest.encode(k).finish();return this.rpc.request("live.v21.SourceService","RemoveSourceFromProject",j).then(at=>a.RemoveSourceFromProjectResponse.decode(new _.Reader(at)))}}a.SourceServiceClientImpl=rs,a.SourceServiceDefinition={name:"SourceService",fullName:"live.v21.SourceService",methods:{createSource:{name:"CreateSource",requestType:a.CreateSourceRequest,requestStream:!1,responseType:a.CreateSourceResponse,responseStream:!1,options:{}},deleteSource:{name:"DeleteSource",requestType:a.DeleteSourceRequest,requestStream:!1,responseType:a.DeleteSourceResponse,responseStream:!1,options:{}},updateSource:{name:"UpdateSource",requestType:a.UpdateSourceRequest,requestStream:!1,responseType:a.UpdateSourceResponse,responseStream:!1,options:{}},updateSourceInProject:{name:"UpdateSourceInProject",requestType:a.UpdateSourceInProjectRequest,requestStream:!1,responseType:a.UpdateSourceInProjectResponse,responseStream:!1,options:{}},getSource:{name:"GetSource",requestType:a.GetSourceRequest,requestStream:!1,responseType:a.GetSourceResponse,responseStream:!1,options:{}},getSources:{name:"GetSources",requestType:a.GetSourcesRequest,requestStream:!1,responseType:a.GetSourcesResponse,responseStream:!1,options:{}},addSourceToProject:{name:"AddSourceToProject",requestType:a.AddSourceToProjectRequest,requestStream:!1,responseType:a.AddSourceToProjectResponse,responseStream:!1,options:{}},removeSourceFromProject:{name:"RemoveSourceFromProject",requestType:a.RemoveSourceFromProjectRequest,requestStream:!1,responseType:a.RemoveSourceFromProjectResponse,responseStream:!1,options:{}}}};class is{constructor(k){this.rpc=k,this.CreateAccessToken=this.CreateAccessToken.bind(this)}CreateAccessToken(k){const j=a.CreateAccessTokenRequest.encode(k).finish();return this.rpc.request("live.v21.BackendAuthenticationService","CreateAccessToken",j).then(at=>a.CreateAccessTokenResponse.decode(new _.Reader(at)))}}a.BackendAuthenticationServiceClientImpl=is,a.BackendAuthenticationServiceDefinition={name:"BackendAuthenticationService",fullName:"live.v21.BackendAuthenticationService",methods:{createAccessToken:{name:"CreateAccessToken",requestType:a.CreateAccessTokenRequest,requestStream:!1,responseType:a.CreateAccessTokenResponse,responseStream:!1,options:{}}}};class as{constructor(k){this.rpc=k,this.CreateGuestAccessToken=this.CreateGuestAccessToken.bind(this),this.RefreshAccessToken=this.RefreshAccessToken.bind(this),this.CreateWebRtcAccessToken=this.CreateWebRtcAccessToken.bind(this)}CreateGuestAccessToken(k){const j=a.CreateGuestAccessTokenRequest.encode(k).finish();return this.rpc.request("live.v21.AuthenticationService","CreateGuestAccessToken",j).then(at=>a.CreateGuestAccessTokenResponse.decode(new _.Reader(at)))}RefreshAccessToken(k){const j=a.RefreshAccessTokenRequest.encode(k).finish();return this.rpc.request("live.v21.AuthenticationService","RefreshAccessToken",j).then(at=>a.RefreshAccessTokenResponse.decode(new _.Reader(at)))}CreateWebRtcAccessToken(k){const j=a.CreateWebRtcAccessTokenRequest.encode(k).finish();return this.rpc.request("live.v21.AuthenticationService","CreateWebRtcAccessToken",j).then(at=>a.CreateWebRtcAccessTokenResponse.decode(new _.Reader(at)))}}a.AuthenticationServiceClientImpl=as,a.AuthenticationServiceDefinition={name:"AuthenticationService",fullName:"live.v21.AuthenticationService",methods:{createGuestAccessToken:{name:"CreateGuestAccessToken",requestType:a.CreateGuestAccessTokenRequest,requestStream:!1,responseType:a.CreateGuestAccessTokenResponse,responseStream:!1,options:{}},refreshAccessToken:{name:"RefreshAccessToken",requestType:a.RefreshAccessTokenRequest,requestStream:!1,responseType:a.RefreshAccessTokenResponse,responseStream:!1,options:{}},createWebRtcAccessToken:{name:"CreateWebRtcAccessToken",requestType:a.CreateWebRtcAccessTokenRequest,requestStream:!1,responseType:a.CreateWebRtcAccessTokenResponse,responseStream:!1,options:{}}}};class os{constructor(k){this.rpc=k,this.GetJsonWebKeySet=this.GetJsonWebKeySet.bind(this),this.GuestCodeRedirect=this.GuestCodeRedirect.bind(this)}GetJsonWebKeySet(k){const j=a.GetJsonWebKeySetRequest.encode(k).finish();return this.rpc.request("live.v21.PublicAuthenticationService","GetJsonWebKeySet",j).then(at=>a.GetJsonWebKeySetResponse.decode(new _.Reader(at)))}GuestCodeRedirect(k){const j=a.GuestCodeRedirectRequest.encode(k).finish();return this.rpc.request("live.v21.PublicAuthenticationService","GuestCodeRedirect",j).then(at=>a.GuestCodeRedirectResponse.decode(new _.Reader(at)))}}a.PublicAuthenticationServiceClientImpl=os,a.PublicAuthenticationServiceDefinition={name:"PublicAuthenticationService",fullName:"live.v21.PublicAuthenticationService",methods:{getJsonWebKeySet:{name:"GetJsonWebKeySet",requestType:a.GetJsonWebKeySetRequest,requestStream:!1,responseType:a.GetJsonWebKeySetResponse,responseStream:!1,options:{}},guestCodeRedirect:{name:"GuestCodeRedirect",requestType:a.GuestCodeRedirectRequest,requestStream:!1,responseType:a.GuestCodeRedirectResponse,responseStream:!1,options:{}}}};var Sn=(()=>{if(typeof Sn!="undefined")return Sn;if(typeof self!="undefined")return self;if(typeof window!="undefined")return window;if(typeof commonjsGlobal$1!="undefined")return commonjsGlobal$1;throw"Unable to locate global object"})();const ss=Sn.atob||(g=>Sn.Buffer.from(g,"base64").toString("binary"));function us(g){const k=ss(g),j=new Uint8Array(k.length);for(let St=0;St<k.length;++St)j[St]=k.charCodeAt(St);return j}const ds=Sn.btoa||(g=>Sn.Buffer.from(g,"binary").toString("base64"));function cs(g){const k=[];return g.forEach(j=>{k.push(String.fromCharCode(j))}),ds(k.join(""))}function Gn(g){const k=new Date(g),j=k.getTime()/1e3,St=k.getTime()%1e3*1e6;return{seconds:j,nanos:St}}function xn(g){let k=g.seconds*1e3;return k+=g.nanos/1e6,new Date(k).toISOString()}_.util.Long!==b.default&&(_.util.Long=b.default,_.configure());function Rt(g){return g!=null}})(api$1);(function(a){var s=commonjsGlobal$1&&commonjsGlobal$1.__createBinding||(Object.create?function(it,st,lt,dt){dt===void 0&&(dt=lt);var ut=Object.getOwnPropertyDescriptor(st,lt);(!ut||("get"in ut?!st.__esModule:ut.writable||ut.configurable))&&(ut={enumerable:!0,get:function(){return st[lt]}}),Object.defineProperty(it,dt,ut)}:function(it,st,lt,dt){dt===void 0&&(dt=lt),it[dt]=st[lt]}),d=commonjsGlobal$1&&commonjsGlobal$1.__setModuleDefault||(Object.create?function(it,st){Object.defineProperty(it,"default",{enumerable:!0,value:st})}:function(it,st){it.default=st}),c=commonjsGlobal$1&&commonjsGlobal$1.__decorate||function(it,st,lt,dt){var ut=arguments.length,ht=ut<3?st:dt===null?dt=Object.getOwnPropertyDescriptor(st,lt):dt,nt;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")ht=Reflect.decorate(it,st,lt,dt);else for(var ct=it.length-1;ct>=0;ct--)(nt=it[ct])&&(ht=(ut<3?nt(ht):ut>3?nt(st,lt,ht):nt(st,lt))||ht);return ut>3&&ht&&Object.defineProperty(st,lt,ht),ht},h=commonjsGlobal$1&&commonjsGlobal$1.__importStar||function(it){if(it&&it.__esModule)return it;var st={};if(it!=null)for(var lt in it)lt!=="default"&&Object.prototype.hasOwnProperty.call(it,lt)&&s(st,it,lt);return d(st,it),st},b=commonjsGlobal$1&&commonjsGlobal$1.__metadata||function(it,st){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(it,st)};Object.defineProperty(a,"__esModule",{value:!0}),a.LiveApi=void 0;const _=h(lib$1),$=api$2,_e=h(api$1),tt=decorator,rt="LiveApi";class ot extends $.ApiClient{constructor(st,lt,dt,ut,ht,nt,ct){super(st,dt,nt,rt,ct),this.handlers={},this.eventApi=lt,this.accessTokenRefreshCallback=ut,this.publicAuthentication=this.clientFactory.create(_e.PublicAuthenticationServiceDefinition,this.channel),ht!=null&&(this.backendAuthentication=this.clientFactory.create(_e.BackendAuthenticationServiceDefinition,this.channel,{"*":{metadata:_.Metadata({"X-Api-Key":ht})}})),this.eventApi.on("event",{name:`${ot.LIVEAPI_EVENT_PREFIX}:*`,ignoreSessionEvents:!0,allowedSessionEvents:[`${ot.LIVEAPI_EVENT_PREFIX}:EVENT_TYPE_PROJECT:EVENT_SUB_TYPE_STATE`]},this.eventCallback.bind(this))}on(st,lt){var dt;this.handlers[st]=(dt=this.handlers[st])!==null&&dt!==void 0?dt:[],this.handlers[st].push(lt)}off(st,lt){this.handlers[st]=this.handlers[st].filter(dt=>dt!==lt)}emitToHandlers(st,lt,dt){var ut;for(const ht of(ut=this.handlers[st])!==null&&ut!==void 0?ut:[])ht(Object.values(dt).find(nt=>!!nt),lt)}async subscribeToCollection(st){await this.eventApi.subscribe(`${ot.LIVEAPI_EVENT_PREFIX}:*`,{target:{collectionId:st}})}async unsubscribeFromCollection(st){await this.eventApi.unsubscribe(`${ot.LIVEAPI_EVENT_PREFIX}:*`,{target:{collectionId:st}})}async subscribeToProject(st,lt){await this.eventApi.subscribe(`${ot.LIVEAPI_EVENT_PREFIX}:*`,{target:{collectionId:st,projectId:lt}})}async unsubscribeFromProject(st,lt){await this.eventApi.unsubscribe(`${ot.LIVEAPI_EVENT_PREFIX}:*`,{target:{collectionId:st,projectId:lt}})}eventCallback(st){let dt=st.name.split(`${ot.LIVEAPI_EVENT_PREFIX}:`)[1].split(":"),ut=_e.eventTypeFromJSON(dt[0]),ht=_e.eventSubTypeFromJSON(dt[1]);this.log.info("processing event: "+ut+"/"+ht),ot.liveApiEventMap[ut]&&this.emitToHandlers(ut,ht,st.payload)}_setup(st){let lt=this;st.onHeader=function(dt){let ut=dt.get("Authorization");if(ut!=null){const ht=ut.split(" ");if(ht.length==2&&ht[0]=="Bearer"){let nt=ht[1];lt.log.info("received refresh token"),lt.accessTokenRefreshCallback(nt)}}},this.collection=this.clientFactory.create(_e.CollectionServiceDefinition,this.channel,{"*":st}),this.project=this.clientFactory.create(_e.ProjectServiceDefinition,this.channel,{"*":st}),this.source=this.clientFactory.create(_e.SourceServiceDefinition,this.channel,{"*":st}),this.destination=this.clientFactory.create(_e.DestinationServiceDefinition,this.channel,{"*":st}),this.authentication=this.clientFactory.create(_e.AuthenticationServiceDefinition,this.channel,{"*":st})}}ot.LIVEAPI_EVENT_PREFIX="apistream:live",c([(0,tt.RequiresSdkAuthentication)(),b("design:type",Object)],ot.prototype,"collection",void 0),c([(0,tt.RequiresSdkAuthentication)(),b("design:type",Object)],ot.prototype,"project",void 0),c([(0,tt.RequiresSdkAuthentication)(),b("design:type",Object)],ot.prototype,"source",void 0),c([(0,tt.RequiresSdkAuthentication)(),b("design:type",Object)],ot.prototype,"destination",void 0),c([(0,tt.RequiresSdkAuthentication)(),b("design:type",Object)],ot.prototype,"authentication",void 0),a.LiveApi=ot,function(it){it.liveApiEventMap={[_e.EventType.EVENT_TYPE_COLLECTION]:"collection",[_e.EventType.EVENT_TYPE_PROJECT]:"project",[_e.EventType.EVENT_TYPE_SOURCE]:"source",[_e.EventType.EVENT_TYPE_DESTINATION]:"destination",[_e.EventType.EVENT_TYPE_UNSPECIFIED]:"unspecified"}}(ot=a.LiveApi||(a.LiveApi={}))})(liveapi);var eventapi={},dist$1={},api={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var extendStatics=function(a,s){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,c){d.__proto__=c}||function(d,c){for(var h in c)c.hasOwnProperty(h)&&(d[h]=c[h])},extendStatics(a,s)};function __extends(a,s){extendStatics(a,s);function d(){this.constructor=a}a.prototype=s===null?Object.create(s):(d.prototype=s.prototype,new d)}function isFunction$1(a){return typeof a=="function"}var _enable_super_gross_mode_that_will_cause_bad_things=!1,config$2={Promise:void 0,set useDeprecatedSynchronousErrorHandling(a){if(a){var s=new Error;""+s.stack}_enable_super_gross_mode_that_will_cause_bad_things=a},get useDeprecatedSynchronousErrorHandling(){return _enable_super_gross_mode_that_will_cause_bad_things}};function hostReportError(a){setTimeout(function(){throw a},0)}var empty$2={closed:!0,next:function(a){},error:function(a){if(config$2.useDeprecatedSynchronousErrorHandling)throw a;hostReportError(a)},complete:function(){}},isArray$2=function(){return Array.isArray||function(a){return a&&typeof a.length=="number"}}();function isObject$4(a){return a!==null&&typeof a=="object"}var UnsubscriptionErrorImpl=function(){function a(s){return Error.call(this),this.message=s?s.length+` errors occurred during unsubscription:
`+s.map(function(d,c){return c+1+") "+d.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=s,this}return a.prototype=Object.create(Error.prototype),a}(),UnsubscriptionError=UnsubscriptionErrorImpl,Subscription=function(){function a(s){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,s&&(this._ctorUnsubscribe=!0,this._unsubscribe=s)}return a.prototype.unsubscribe=function(){var s;if(!this.closed){var d=this,c=d._parentOrParents,h=d._ctorUnsubscribe,b=d._unsubscribe,_=d._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,c instanceof a)c.remove(this);else if(c!==null)for(var $=0;$<c.length;++$){var _e=c[$];_e.remove(this)}if(isFunction$1(b)){h&&(this._unsubscribe=void 0);try{b.call(this)}catch(ot){s=ot instanceof UnsubscriptionError?flattenUnsubscriptionErrors(ot.errors):[ot]}}if(isArray$2(_))for(var $=-1,tt=_.length;++$<tt;){var rt=_[$];if(isObject$4(rt))try{rt.unsubscribe()}catch(it){s=s||[],it instanceof UnsubscriptionError?s=s.concat(flattenUnsubscriptionErrors(it.errors)):s.push(it)}}if(s)throw new UnsubscriptionError(s)}},a.prototype.add=function(s){var d=s;if(!s)return a.EMPTY;switch(typeof s){case"function":d=new a(s);case"object":if(d===this||d.closed||typeof d.unsubscribe!="function")return d;if(this.closed)return d.unsubscribe(),d;if(!(d instanceof a)){var c=d;d=new a,d._subscriptions=[c]}break;default:throw new Error("unrecognized teardown "+s+" added to Subscription.")}var h=d._parentOrParents;if(h===null)d._parentOrParents=this;else if(h instanceof a){if(h===this)return d;d._parentOrParents=[h,this]}else if(h.indexOf(this)===-1)h.push(this);else return d;var b=this._subscriptions;return b===null?this._subscriptions=[d]:b.push(d),d},a.prototype.remove=function(s){var d=this._subscriptions;if(d){var c=d.indexOf(s);c!==-1&&d.splice(c,1)}},a.EMPTY=function(s){return s.closed=!0,s}(new a),a}();function flattenUnsubscriptionErrors(a){return a.reduce(function(s,d){return s.concat(d instanceof UnsubscriptionError?d.errors:d)},[])}var rxSubscriber=function(){return typeof Symbol=="function"?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()}(),Subscriber=function(a){__extends(s,a);function s(d,c,h){var b=a.call(this)||this;switch(b.syncErrorValue=null,b.syncErrorThrown=!1,b.syncErrorThrowable=!1,b.isStopped=!1,arguments.length){case 0:b.destination=empty$2;break;case 1:if(!d){b.destination=empty$2;break}if(typeof d=="object"){d instanceof s?(b.syncErrorThrowable=d.syncErrorThrowable,b.destination=d,d.add(b)):(b.syncErrorThrowable=!0,b.destination=new SafeSubscriber(b,d));break}default:b.syncErrorThrowable=!0,b.destination=new SafeSubscriber(b,d,c,h);break}return b}return s.prototype[rxSubscriber]=function(){return this},s.create=function(d,c,h){var b=new s(d,c,h);return b.syncErrorThrowable=!1,b},s.prototype.next=function(d){this.isStopped||this._next(d)},s.prototype.error=function(d){this.isStopped||(this.isStopped=!0,this._error(d))},s.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},s.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,a.prototype.unsubscribe.call(this))},s.prototype._next=function(d){this.destination.next(d)},s.prototype._error=function(d){this.destination.error(d),this.unsubscribe()},s.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},s.prototype._unsubscribeAndRecycle=function(){var d=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=d,this},s}(Subscription),SafeSubscriber=function(a){__extends(s,a);function s(d,c,h,b){var _=a.call(this)||this;_._parentSubscriber=d;var $,_e=_;return isFunction$1(c)?$=c:c&&($=c.next,h=c.error,b=c.complete,c!==empty$2&&(_e=Object.create(c),isFunction$1(_e.unsubscribe)&&_.add(_e.unsubscribe.bind(_e)),_e.unsubscribe=_.unsubscribe.bind(_))),_._context=_e,_._next=$,_._error=h,_._complete=b,_}return s.prototype.next=function(d){if(!this.isStopped&&this._next){var c=this._parentSubscriber;!config$2.useDeprecatedSynchronousErrorHandling||!c.syncErrorThrowable?this.__tryOrUnsub(this._next,d):this.__tryOrSetError(c,this._next,d)&&this.unsubscribe()}},s.prototype.error=function(d){if(!this.isStopped){var c=this._parentSubscriber,h=config$2.useDeprecatedSynchronousErrorHandling;if(this._error)!h||!c.syncErrorThrowable?(this.__tryOrUnsub(this._error,d),this.unsubscribe()):(this.__tryOrSetError(c,this._error,d),this.unsubscribe());else if(c.syncErrorThrowable)h?(c.syncErrorValue=d,c.syncErrorThrown=!0):hostReportError(d),this.unsubscribe();else{if(this.unsubscribe(),h)throw d;hostReportError(d)}}},s.prototype.complete=function(){var d=this;if(!this.isStopped){var c=this._parentSubscriber;if(this._complete){var h=function(){return d._complete.call(d._context)};!config$2.useDeprecatedSynchronousErrorHandling||!c.syncErrorThrowable?(this.__tryOrUnsub(h),this.unsubscribe()):(this.__tryOrSetError(c,h),this.unsubscribe())}else this.unsubscribe()}},s.prototype.__tryOrUnsub=function(d,c){try{d.call(this._context,c)}catch(h){if(this.unsubscribe(),config$2.useDeprecatedSynchronousErrorHandling)throw h;hostReportError(h)}},s.prototype.__tryOrSetError=function(d,c,h){if(!config$2.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{c.call(this._context,h)}catch(b){return config$2.useDeprecatedSynchronousErrorHandling?(d.syncErrorValue=b,d.syncErrorThrown=!0,!0):(hostReportError(b),!0)}return!1},s.prototype._unsubscribe=function(){var d=this._parentSubscriber;this._context=null,this._parentSubscriber=null,d.unsubscribe()},s}(Subscriber);function canReportError(a){for(;a;){var s=a,d=s.closed,c=s.destination,h=s.isStopped;if(d||h)return!1;c&&c instanceof Subscriber?a=c:a=null}return!0}function toSubscriber(a,s,d){if(a){if(a instanceof Subscriber)return a;if(a[rxSubscriber])return a[rxSubscriber]()}return!a&&!s&&!d?new Subscriber(empty$2):new Subscriber(a,s,d)}var observable=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function identity(a){return a}function pipe(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];return pipeFromArray(a)}function pipeFromArray(a){return a.length===0?identity:a.length===1?a[0]:function(d){return a.reduce(function(c,h){return h(c)},d)}}var Observable=function(){function a(s){this._isScalar=!1,s&&(this._subscribe=s)}return a.prototype.lift=function(s){var d=new a;return d.source=this,d.operator=s,d},a.prototype.subscribe=function(s,d,c){var h=this.operator,b=toSubscriber(s,d,c);if(h?b.add(h.call(b,this.source)):b.add(this.source||config$2.useDeprecatedSynchronousErrorHandling&&!b.syncErrorThrowable?this._subscribe(b):this._trySubscribe(b)),config$2.useDeprecatedSynchronousErrorHandling&&b.syncErrorThrowable&&(b.syncErrorThrowable=!1,b.syncErrorThrown))throw b.syncErrorValue;return b},a.prototype._trySubscribe=function(s){try{return this._subscribe(s)}catch(d){config$2.useDeprecatedSynchronousErrorHandling&&(s.syncErrorThrown=!0,s.syncErrorValue=d),canReportError(s)?s.error(d):console.warn(d)}},a.prototype.forEach=function(s,d){var c=this;return d=getPromiseCtor(d),new d(function(h,b){var _;_=c.subscribe(function($){try{s($)}catch(_e){b(_e),_&&_.unsubscribe()}},b,h)})},a.prototype._subscribe=function(s){var d=this.source;return d&&d.subscribe(s)},a.prototype[observable]=function(){return this},a.prototype.pipe=function(){for(var s=[],d=0;d<arguments.length;d++)s[d]=arguments[d];return s.length===0?this:pipeFromArray(s)(this)},a.prototype.toPromise=function(s){var d=this;return s=getPromiseCtor(s),new s(function(c,h){var b;d.subscribe(function(_){return b=_},function(_){return h(_)},function(){return c(b)})})},a.create=function(s){return new a(s)},a}();function getPromiseCtor(a){if(a||(a=config$2.Promise||Promise),!a)throw new Error("no Promise impl found");return a}var subscribeToArray=function(a){return function(s){for(var d=0,c=a.length;d<c&&!s.closed;d++)s.next(a[d]);s.complete()}},subscribeToPromise=function(a){return function(s){return a.then(function(d){s.closed||(s.next(d),s.complete())},function(d){return s.error(d)}).then(null,hostReportError),s}};function getSymbolIterator(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var iterator=getSymbolIterator(),subscribeToIterable=function(a){return function(s){var d=a[iterator]();do{var c=void 0;try{c=d.next()}catch(h){return s.error(h),s}if(c.done){s.complete();break}if(s.next(c.value),s.closed)break}while(!0);return typeof d.return=="function"&&s.add(function(){d.return&&d.return()}),s}},subscribeToObservable=function(a){return function(s){var d=a[observable]();if(typeof d.subscribe!="function")throw new TypeError("Provided object does not correctly implement Symbol.observable");return d.subscribe(s)}},isArrayLike=function(a){return a&&typeof a.length=="number"&&typeof a!="function"};function isPromise(a){return!!a&&typeof a.subscribe!="function"&&typeof a.then=="function"}var subscribeTo=function(a){if(!!a&&typeof a[observable]=="function")return subscribeToObservable(a);if(isArrayLike(a))return subscribeToArray(a);if(isPromise(a))return subscribeToPromise(a);if(!!a&&typeof a[iterator]=="function")return subscribeToIterable(a);var s=isObject$4(a)?"an invalid object":"'"+a+"'",d="You provided "+s+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.";throw new TypeError(d)},SimpleInnerSubscriber=function(a){__extends(s,a);function s(d){var c=a.call(this)||this;return c.parent=d,c}return s.prototype._next=function(d){this.parent.notifyNext(d)},s.prototype._error=function(d){this.parent.notifyError(d),this.unsubscribe()},s.prototype._complete=function(){this.parent.notifyComplete(),this.unsubscribe()},s}(Subscriber),SimpleOuterSubscriber=function(a){__extends(s,a);function s(){return a!==null&&a.apply(this,arguments)||this}return s.prototype.notifyNext=function(d){this.destination.next(d)},s.prototype.notifyError=function(d){this.destination.error(d)},s.prototype.notifyComplete=function(){this.destination.complete()},s}(Subscriber);function innerSubscribe(a,s){if(!s.closed){if(a instanceof Observable)return a.subscribe(s);var d;try{d=subscribeTo(a)(s)}catch(c){s.error(c)}return d}}function audit(a){return function(d){return d.lift(new AuditOperator(a))}}var AuditOperator=function(){function a(s){this.durationSelector=s}return a.prototype.call=function(s,d){return d.subscribe(new AuditSubscriber(s,this.durationSelector))},a}(),AuditSubscriber=function(a){__extends(s,a);function s(d,c){var h=a.call(this,d)||this;return h.durationSelector=c,h.hasValue=!1,h}return s.prototype._next=function(d){if(this.value=d,this.hasValue=!0,!this.throttled){var c=void 0;try{var h=this.durationSelector;c=h(d)}catch(_){return this.destination.error(_)}var b=innerSubscribe(c,new SimpleInnerSubscriber(this));!b||b.closed?this.clearThrottle():this.add(this.throttled=b)}},s.prototype.clearThrottle=function(){var d=this,c=d.value,h=d.hasValue,b=d.throttled;b&&(this.remove(b),this.throttled=void 0,b.unsubscribe()),h&&(this.value=void 0,this.hasValue=!1,this.destination.next(c))},s.prototype.notifyNext=function(){this.clearThrottle()},s.prototype.notifyComplete=function(){this.clearThrottle()},s}(SimpleOuterSubscriber),Action=function(a){__extends(s,a);function s(d,c){return a.call(this)||this}return s.prototype.schedule=function(d,c){return this},s}(Subscription),AsyncAction=function(a){__extends(s,a);function s(d,c){var h=a.call(this,d,c)||this;return h.scheduler=d,h.work=c,h.pending=!1,h}return s.prototype.schedule=function(d,c){if(c===void 0&&(c=0),this.closed)return this;this.state=d;var h=this.id,b=this.scheduler;return h!=null&&(this.id=this.recycleAsyncId(b,h,c)),this.pending=!0,this.delay=c,this.id=this.id||this.requestAsyncId(b,this.id,c),this},s.prototype.requestAsyncId=function(d,c,h){return h===void 0&&(h=0),setInterval(d.flush.bind(d,this),h)},s.prototype.recycleAsyncId=function(d,c,h){if(h===void 0&&(h=0),h!==null&&this.delay===h&&this.pending===!1)return c;clearInterval(c)},s.prototype.execute=function(d,c){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var h=this._execute(d,c);if(h)return h;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},s.prototype._execute=function(d,c){var h=!1,b=void 0;try{this.work(d)}catch(_){h=!0,b=!!_&&_||new Error(_)}if(h)return this.unsubscribe(),b},s.prototype._unsubscribe=function(){var d=this.id,c=this.scheduler,h=c.actions,b=h.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,b!==-1&&h.splice(b,1),d!=null&&(this.id=this.recycleAsyncId(c,d,null)),this.delay=null},s}(Action),Scheduler=function(){function a(s,d){d===void 0&&(d=a.now),this.SchedulerAction=s,this.now=d}return a.prototype.schedule=function(s,d,c){return d===void 0&&(d=0),new this.SchedulerAction(this,s).schedule(c,d)},a.now=function(){return Date.now()},a}(),AsyncScheduler=function(a){__extends(s,a);function s(d,c){c===void 0&&(c=Scheduler.now);var h=a.call(this,d,function(){return s.delegate&&s.delegate!==h?s.delegate.now():c()})||this;return h.actions=[],h.active=!1,h.scheduled=void 0,h}return s.prototype.schedule=function(d,c,h){return c===void 0&&(c=0),s.delegate&&s.delegate!==this?s.delegate.schedule(d,c,h):a.prototype.schedule.call(this,d,c,h)},s.prototype.flush=function(d){var c=this.actions;if(this.active){c.push(d);return}var h;this.active=!0;do if(h=d.execute(d.state,d.delay))break;while(d=c.shift());if(this.active=!1,h){for(;d=c.shift();)d.unsubscribe();throw h}},s}(Scheduler),asyncScheduler=new AsyncScheduler(AsyncAction),async=asyncScheduler;function isNumeric(a){return!isArray$2(a)&&a-parseFloat(a)+1>=0}function isScheduler(a){return a&&typeof a.schedule=="function"}function timer(a,s,d){a===void 0&&(a=0);var c=-1;return isNumeric(s)?c=Number(s)<1&&1||Number(s):isScheduler(s)&&(d=s),isScheduler(d)||(d=async),new Observable(function(h){var b=isNumeric(a)?a:+a-d.now();return d.schedule(dispatch$1,b,{index:0,period:c,subscriber:h})})}function dispatch$1(a){var s=a.index,d=a.period,c=a.subscriber;if(c.next(s),!c.closed){if(d===-1)return c.complete();a.index=s+1,this.schedule(a,d)}}function auditTime(a,s){return s===void 0&&(s=async),audit(function(){return timer(a,s)})}function buffer(a){return function(d){return d.lift(new BufferOperator(a))}}var BufferOperator=function(){function a(s){this.closingNotifier=s}return a.prototype.call=function(s,d){return d.subscribe(new BufferSubscriber(s,this.closingNotifier))},a}(),BufferSubscriber=function(a){__extends(s,a);function s(d,c){var h=a.call(this,d)||this;return h.buffer=[],h.add(innerSubscribe(c,new SimpleInnerSubscriber(h))),h}return s.prototype._next=function(d){this.buffer.push(d)},s.prototype.notifyNext=function(){var d=this.buffer;this.buffer=[],this.destination.next(d)},s}(SimpleOuterSubscriber);function bufferCount(a,s){return s===void 0&&(s=null),function(c){return c.lift(new BufferCountOperator(a,s))}}var BufferCountOperator=function(){function a(s,d){this.bufferSize=s,this.startBufferEvery=d,!d||s===d?this.subscriberClass=BufferCountSubscriber:this.subscriberClass=BufferSkipCountSubscriber}return a.prototype.call=function(s,d){return d.subscribe(new this.subscriberClass(s,this.bufferSize,this.startBufferEvery))},a}(),BufferCountSubscriber=function(a){__extends(s,a);function s(d,c){var h=a.call(this,d)||this;return h.bufferSize=c,h.buffer=[],h}return s.prototype._next=function(d){var c=this.buffer;c.push(d),c.length==this.bufferSize&&(this.destination.next(c),this.buffer=[])},s.prototype._complete=function(){var d=this.buffer;d.length>0&&this.destination.next(d),a.prototype._complete.call(this)},s}(Subscriber),BufferSkipCountSubscriber=function(a){__extends(s,a);function s(d,c,h){var b=a.call(this,d)||this;return b.bufferSize=c,b.startBufferEvery=h,b.buffers=[],b.count=0,b}return s.prototype._next=function(d){var c=this,h=c.bufferSize,b=c.startBufferEvery,_=c.buffers,$=c.count;this.count++,$%b===0&&_.push([]);for(var _e=_.length;_e--;){var tt=_[_e];tt.push(d),tt.length===h&&(_.splice(_e,1),this.destination.next(tt))}},s.prototype._complete=function(){for(var d=this,c=d.buffers,h=d.destination;c.length>0;){var b=c.shift();b.length>0&&h.next(b)}a.prototype._complete.call(this)},s}(Subscriber);function bufferTime(a){var s=arguments.length,d=async;isScheduler(arguments[arguments.length-1])&&(d=arguments[arguments.length-1],s--);var c=null;s>=2&&(c=arguments[1]);var h=Number.POSITIVE_INFINITY;return s>=3&&(h=arguments[2]),function(_){return _.lift(new BufferTimeOperator(a,c,h,d))}}var BufferTimeOperator=function(){function a(s,d,c,h){this.bufferTimeSpan=s,this.bufferCreationInterval=d,this.maxBufferSize=c,this.scheduler=h}return a.prototype.call=function(s,d){return d.subscribe(new BufferTimeSubscriber(s,this.bufferTimeSpan,this.bufferCreationInterval,this.maxBufferSize,this.scheduler))},a}(),Context=function(){function a(){this.buffer=[]}return a}(),BufferTimeSubscriber=function(a){__extends(s,a);function s(d,c,h,b,_){var $=a.call(this,d)||this;$.bufferTimeSpan=c,$.bufferCreationInterval=h,$.maxBufferSize=b,$.scheduler=_,$.contexts=[];var _e=$.openContext();if($.timespanOnly=h==null||h<0,$.timespanOnly){var tt={subscriber:$,context:_e,bufferTimeSpan:c};$.add(_e.closeAction=_.schedule(dispatchBufferTimeSpanOnly,c,tt))}else{var rt={subscriber:$,context:_e},ot={bufferTimeSpan:c,bufferCreationInterval:h,subscriber:$,scheduler:_};$.add(_e.closeAction=_.schedule(dispatchBufferClose,c,rt)),$.add(_.schedule(dispatchBufferCreation,h,ot))}return $}return s.prototype._next=function(d){for(var c=this.contexts,h=c.length,b,_=0;_<h;_++){var $=c[_],_e=$.buffer;_e.push(d),_e.length==this.maxBufferSize&&(b=$)}b&&this.onBufferFull(b)},s.prototype._error=function(d){this.contexts.length=0,a.prototype._error.call(this,d)},s.prototype._complete=function(){for(var d=this,c=d.contexts,h=d.destination;c.length>0;){var b=c.shift();h.next(b.buffer)}a.prototype._complete.call(this)},s.prototype._unsubscribe=function(){this.contexts=null},s.prototype.onBufferFull=function(d){this.closeContext(d);var c=d.closeAction;if(c.unsubscribe(),this.remove(c),!this.closed&&this.timespanOnly){d=this.openContext();var h=this.bufferTimeSpan,b={subscriber:this,context:d,bufferTimeSpan:h};this.add(d.closeAction=this.scheduler.schedule(dispatchBufferTimeSpanOnly,h,b))}},s.prototype.openContext=function(){var d=new Context;return this.contexts.push(d),d},s.prototype.closeContext=function(d){this.destination.next(d.buffer);var c=this.contexts,h=c?c.indexOf(d):-1;h>=0&&c.splice(c.indexOf(d),1)},s}(Subscriber);function dispatchBufferTimeSpanOnly(a){var s=a.subscriber,d=a.context;d&&s.closeContext(d),s.closed||(a.context=s.openContext(),a.context.closeAction=this.schedule(a,a.bufferTimeSpan))}function dispatchBufferCreation(a){var s=a.bufferCreationInterval,d=a.bufferTimeSpan,c=a.subscriber,h=a.scheduler,b=c.openContext(),_=this;c.closed||(c.add(b.closeAction=h.schedule(dispatchBufferClose,d,{subscriber:c,context:b})),_.schedule(a,s))}function dispatchBufferClose(a){var s=a.subscriber,d=a.context;s.closeContext(d)}var InnerSubscriber=function(a){__extends(s,a);function s(d,c,h){var b=a.call(this)||this;return b.parent=d,b.outerValue=c,b.outerIndex=h,b.index=0,b}return s.prototype._next=function(d){this.parent.notifyNext(this.outerValue,d,this.outerIndex,this.index++,this)},s.prototype._error=function(d){this.parent.notifyError(d,this),this.unsubscribe()},s.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},s}(Subscriber);function subscribeToResult(a,s,d,c,h){if(h===void 0&&(h=new InnerSubscriber(a,d,c)),!h.closed)return s instanceof Observable?s.subscribe(h):subscribeTo(s)(h)}var OuterSubscriber=function(a){__extends(s,a);function s(){return a!==null&&a.apply(this,arguments)||this}return s.prototype.notifyNext=function(d,c,h,b,_){this.destination.next(c)},s.prototype.notifyError=function(d,c){this.destination.error(d)},s.prototype.notifyComplete=function(d){this.destination.complete()},s}(Subscriber);function bufferToggle(a,s){return function(c){return c.lift(new BufferToggleOperator(a,s))}}var BufferToggleOperator=function(){function a(s,d){this.openings=s,this.closingSelector=d}return a.prototype.call=function(s,d){return d.subscribe(new BufferToggleSubscriber(s,this.openings,this.closingSelector))},a}(),BufferToggleSubscriber=function(a){__extends(s,a);function s(d,c,h){var b=a.call(this,d)||this;return b.closingSelector=h,b.contexts=[],b.add(subscribeToResult(b,c)),b}return s.prototype._next=function(d){for(var c=this.contexts,h=c.length,b=0;b<h;b++)c[b].buffer.push(d)},s.prototype._error=function(d){for(var c=this.contexts;c.length>0;){var h=c.shift();h.subscription.unsubscribe(),h.buffer=null,h.subscription=null}this.contexts=null,a.prototype._error.call(this,d)},s.prototype._complete=function(){for(var d=this.contexts;d.length>0;){var c=d.shift();this.destination.next(c.buffer),c.subscription.unsubscribe(),c.buffer=null,c.subscription=null}this.contexts=null,a.prototype._complete.call(this)},s.prototype.notifyNext=function(d,c){d?this.closeBuffer(d):this.openBuffer(c)},s.prototype.notifyComplete=function(d){this.closeBuffer(d.context)},s.prototype.openBuffer=function(d){try{var c=this.closingSelector,h=c.call(this,d);h&&this.trySubscribe(h)}catch(b){this._error(b)}},s.prototype.closeBuffer=function(d){var c=this.contexts;if(c&&d){var h=d.buffer,b=d.subscription;this.destination.next(h),c.splice(c.indexOf(d),1),this.remove(b),b.unsubscribe()}},s.prototype.trySubscribe=function(d){var c=this.contexts,h=[],b=new Subscription,_={buffer:h,subscription:b};c.push(_);var $=subscribeToResult(this,d,_);!$||$.closed?this.closeBuffer(_):($.context=_,this.add($),b.add($))},s}(OuterSubscriber);function bufferWhen(a){return function(s){return s.lift(new BufferWhenOperator(a))}}var BufferWhenOperator=function(){function a(s){this.closingSelector=s}return a.prototype.call=function(s,d){return d.subscribe(new BufferWhenSubscriber(s,this.closingSelector))},a}(),BufferWhenSubscriber=function(a){__extends(s,a);function s(d,c){var h=a.call(this,d)||this;return h.closingSelector=c,h.subscribing=!1,h.openBuffer(),h}return s.prototype._next=function(d){this.buffer.push(d)},s.prototype._complete=function(){var d=this.buffer;d&&this.destination.next(d),a.prototype._complete.call(this)},s.prototype._unsubscribe=function(){this.buffer=void 0,this.subscribing=!1},s.prototype.notifyNext=function(){this.openBuffer()},s.prototype.notifyComplete=function(){this.subscribing?this.complete():this.openBuffer()},s.prototype.openBuffer=function(){var d=this.closingSubscription;d&&(this.remove(d),d.unsubscribe());var c=this.buffer;this.buffer&&this.destination.next(c),this.buffer=[];var h;try{var b=this.closingSelector;h=b()}catch(_){return this.error(_)}d=new Subscription,this.closingSubscription=d,this.add(d),this.subscribing=!0,d.add(innerSubscribe(h,new SimpleInnerSubscriber(this))),this.subscribing=!1},s}(SimpleOuterSubscriber);function catchError(a){return function(d){var c=new CatchOperator(a),h=d.lift(c);return c.caught=h}}var CatchOperator=function(){function a(s){this.selector=s}return a.prototype.call=function(s,d){return d.subscribe(new CatchSubscriber(s,this.selector,this.caught))},a}(),CatchSubscriber=function(a){__extends(s,a);function s(d,c,h){var b=a.call(this,d)||this;return b.selector=c,b.caught=h,b}return s.prototype.error=function(d){if(!this.isStopped){var c=void 0;try{c=this.selector(d,this.caught)}catch(_){a.prototype.error.call(this,_);return}this._unsubscribeAndRecycle();var h=new SimpleInnerSubscriber(this);this.add(h);var b=innerSubscribe(c,h);b!==h&&this.add(b)}},s}(SimpleOuterSubscriber);function scheduleArray(a,s){return new Observable(function(d){var c=new Subscription,h=0;return c.add(s.schedule(function(){if(h===a.length){d.complete();return}d.next(a[h++]),d.closed||c.add(this.schedule())})),c})}function fromArray(a,s){return s?scheduleArray(a,s):new Observable(subscribeToArray(a))}var NONE={},CombineLatestOperator=function(){function a(s){this.resultSelector=s}return a.prototype.call=function(s,d){return d.subscribe(new CombineLatestSubscriber(s,this.resultSelector))},a}(),CombineLatestSubscriber=function(a){__extends(s,a);function s(d,c){var h=a.call(this,d)||this;return h.resultSelector=c,h.active=0,h.values=[],h.observables=[],h}return s.prototype._next=function(d){this.values.push(NONE),this.observables.push(d)},s.prototype._complete=function(){var d=this.observables,c=d.length;if(c===0)this.destination.complete();else{this.active=c,this.toRespond=c;for(var h=0;h<c;h++){var b=d[h];this.add(subscribeToResult(this,b,void 0,h))}}},s.prototype.notifyComplete=function(d){(this.active-=1)===0&&this.destination.complete()},s.prototype.notifyNext=function(d,c,h){var b=this.values,_=b[h],$=this.toRespond?_===NONE?--this.toRespond:this.toRespond:0;b[h]=c,$===0&&(this.resultSelector?this._tryResultSelector(b):this.destination.next(b.slice()))},s.prototype._tryResultSelector=function(d){var c;try{c=this.resultSelector.apply(this,d)}catch(h){this.destination.error(h);return}this.destination.next(c)},s}(OuterSubscriber);function combineAll(a){return function(s){return s.lift(new CombineLatestOperator(a))}}function scheduleObservable(a,s){return new Observable(function(d){var c=new Subscription;return c.add(s.schedule(function(){var h=a[observable]();c.add(h.subscribe({next:function(b){c.add(s.schedule(function(){return d.next(b)}))},error:function(b){c.add(s.schedule(function(){return d.error(b)}))},complete:function(){c.add(s.schedule(function(){return d.complete()}))}}))})),c})}function schedulePromise(a,s){return new Observable(function(d){var c=new Subscription;return c.add(s.schedule(function(){return a.then(function(h){c.add(s.schedule(function(){d.next(h),c.add(s.schedule(function(){return d.complete()}))}))},function(h){c.add(s.schedule(function(){return d.error(h)}))})})),c})}function scheduleIterable(a,s){if(!a)throw new Error("Iterable cannot be null");return new Observable(function(d){var c=new Subscription,h;return c.add(function(){h&&typeof h.return=="function"&&h.return()}),c.add(s.schedule(function(){h=a[iterator](),c.add(s.schedule(function(){if(!d.closed){var b,_;try{var $=h.next();b=$.value,_=$.done}catch(_e){d.error(_e);return}_?d.complete():(d.next(b),this.schedule())}}))})),c})}function isInteropObservable(a){return a&&typeof a[observable]=="function"}function isIterable(a){return a&&typeof a[iterator]=="function"}function scheduled(a,s){if(a!=null){if(isInteropObservable(a))return scheduleObservable(a,s);if(isPromise(a))return schedulePromise(a,s);if(isArrayLike(a))return scheduleArray(a,s);if(isIterable(a)||typeof a=="string")return scheduleIterable(a,s)}throw new TypeError((a!==null&&typeof a||a)+" is not observable")}function from(a,s){return s?scheduled(a,s):a instanceof Observable?a:new Observable(subscribeTo(a))}function combineLatest(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];var d=null;return typeof a[a.length-1]=="function"&&(d=a.pop()),a.length===1&&isArray$2(a[0])&&(a=a[0].slice()),function(c){return c.lift.call(from([c].concat(a)),new CombineLatestOperator(d))}}function of$2(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];var d=a[a.length-1];return isScheduler(d)?(a.pop(),scheduleArray(a,d)):fromArray(a)}function map(a,s){return function(c){if(typeof a!="function")throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return c.lift(new MapOperator(a,s))}}var MapOperator=function(){function a(s,d){this.project=s,this.thisArg=d}return a.prototype.call=function(s,d){return d.subscribe(new MapSubscriber(s,this.project,this.thisArg))},a}(),MapSubscriber=function(a){__extends(s,a);function s(d,c,h){var b=a.call(this,d)||this;return b.project=c,b.count=0,b.thisArg=h||b,b}return s.prototype._next=function(d){var c;try{c=this.project.call(this.thisArg,d,this.count++)}catch(h){this.destination.error(h);return}this.destination.next(c)},s}(Subscriber);function mergeMap(a,s,d){return d===void 0&&(d=Number.POSITIVE_INFINITY),typeof s=="function"?function(c){return c.pipe(mergeMap(function(h,b){return from(a(h,b)).pipe(map(function(_,$){return s(h,_,b,$)}))},d))}:(typeof s=="number"&&(d=s),function(c){return c.lift(new MergeMapOperator(a,d))})}var MergeMapOperator=function(){function a(s,d){d===void 0&&(d=Number.POSITIVE_INFINITY),this.project=s,this.concurrent=d}return a.prototype.call=function(s,d){return d.subscribe(new MergeMapSubscriber(s,this.project,this.concurrent))},a}(),MergeMapSubscriber=function(a){__extends(s,a);function s(d,c,h){h===void 0&&(h=Number.POSITIVE_INFINITY);var b=a.call(this,d)||this;return b.project=c,b.concurrent=h,b.hasCompleted=!1,b.buffer=[],b.active=0,b.index=0,b}return s.prototype._next=function(d){this.active<this.concurrent?this._tryNext(d):this.buffer.push(d)},s.prototype._tryNext=function(d){var c,h=this.index++;try{c=this.project(d,h)}catch(b){this.destination.error(b);return}this.active++,this._innerSub(c)},s.prototype._innerSub=function(d){var c=new SimpleInnerSubscriber(this),h=this.destination;h.add(c);var b=innerSubscribe(d,c);b!==c&&h.add(b)},s.prototype._complete=function(){this.hasCompleted=!0,this.active===0&&this.buffer.length===0&&this.destination.complete(),this.unsubscribe()},s.prototype.notifyNext=function(d){this.destination.next(d)},s.prototype.notifyComplete=function(){var d=this.buffer;this.active--,d.length>0?this._next(d.shift()):this.active===0&&this.hasCompleted&&this.destination.complete()},s}(SimpleOuterSubscriber),flatMap=mergeMap;function mergeAll(a){return a===void 0&&(a=Number.POSITIVE_INFINITY),mergeMap(identity,a)}function concatAll(){return mergeAll(1)}function concat$1(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];return concatAll()(of$2.apply(void 0,a))}function concat(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];return function(d){return d.lift.call(concat$1.apply(void 0,[d].concat(a)))}}function concatMap(a,s){return mergeMap(a,s,1)}function concatMapTo(a,s){return concatMap(function(){return a},s)}function count(a){return function(s){return s.lift(new CountOperator(a,s))}}var CountOperator=function(){function a(s,d){this.predicate=s,this.source=d}return a.prototype.call=function(s,d){return d.subscribe(new CountSubscriber(s,this.predicate,this.source))},a}(),CountSubscriber=function(a){__extends(s,a);function s(d,c,h){var b=a.call(this,d)||this;return b.predicate=c,b.source=h,b.count=0,b.index=0,b}return s.prototype._next=function(d){this.predicate?this._tryPredicate(d):this.count++},s.prototype._tryPredicate=function(d){var c;try{c=this.predicate(d,this.index++,this.source)}catch(h){this.destination.error(h);return}c&&this.count++},s.prototype._complete=function(){this.destination.next(this.count),this.destination.complete()},s}(Subscriber);function debounce(a){return function(s){return s.lift(new DebounceOperator(a))}}var DebounceOperator=function(){function a(s){this.durationSelector=s}return a.prototype.call=function(s,d){return d.subscribe(new DebounceSubscriber(s,this.durationSelector))},a}(),DebounceSubscriber=function(a){__extends(s,a);function s(d,c){var h=a.call(this,d)||this;return h.durationSelector=c,h.hasValue=!1,h}return s.prototype._next=function(d){try{var c=this.durationSelector.call(this,d);c&&this._tryNext(d,c)}catch(h){this.destination.error(h)}},s.prototype._complete=function(){this.emitValue(),this.destination.complete()},s.prototype._tryNext=function(d,c){var h=this.durationSubscription;this.value=d,this.hasValue=!0,h&&(h.unsubscribe(),this.remove(h)),h=innerSubscribe(c,new SimpleInnerSubscriber(this)),h&&!h.closed&&this.add(this.durationSubscription=h)},s.prototype.notifyNext=function(){this.emitValue()},s.prototype.notifyComplete=function(){this.emitValue()},s.prototype.emitValue=function(){if(this.hasValue){var d=this.value,c=this.durationSubscription;c&&(this.durationSubscription=void 0,c.unsubscribe(),this.remove(c)),this.value=void 0,this.hasValue=!1,a.prototype._next.call(this,d)}},s}(SimpleOuterSubscriber);function debounceTime(a,s){return s===void 0&&(s=async),function(d){return d.lift(new DebounceTimeOperator(a,s))}}var DebounceTimeOperator=function(){function a(s,d){this.dueTime=s,this.scheduler=d}return a.prototype.call=function(s,d){return d.subscribe(new DebounceTimeSubscriber(s,this.dueTime,this.scheduler))},a}(),DebounceTimeSubscriber=function(a){__extends(s,a);function s(d,c,h){var b=a.call(this,d)||this;return b.dueTime=c,b.scheduler=h,b.debouncedSubscription=null,b.lastValue=null,b.hasValue=!1,b}return s.prototype._next=function(d){this.clearDebounce(),this.lastValue=d,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(dispatchNext$1,this.dueTime,this))},s.prototype._complete=function(){this.debouncedNext(),this.destination.complete()},s.prototype.debouncedNext=function(){if(this.clearDebounce(),this.hasValue){var d=this.lastValue;this.lastValue=null,this.hasValue=!1,this.destination.next(d)}},s.prototype.clearDebounce=function(){var d=this.debouncedSubscription;d!==null&&(this.remove(d),d.unsubscribe(),this.debouncedSubscription=null)},s}(Subscriber);function dispatchNext$1(a){a.debouncedNext()}function defaultIfEmpty(a){return a===void 0&&(a=null),function(s){return s.lift(new DefaultIfEmptyOperator(a))}}var DefaultIfEmptyOperator=function(){function a(s){this.defaultValue=s}return a.prototype.call=function(s,d){return d.subscribe(new DefaultIfEmptySubscriber(s,this.defaultValue))},a}(),DefaultIfEmptySubscriber=function(a){__extends(s,a);function s(d,c){var h=a.call(this,d)||this;return h.defaultValue=c,h.isEmpty=!0,h}return s.prototype._next=function(d){this.isEmpty=!1,this.destination.next(d)},s.prototype._complete=function(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()},s}(Subscriber);function isDate$1(a){return a instanceof Date&&!isNaN(+a)}var EMPTY=new Observable(function(a){return a.complete()});function empty$1(a){return a?emptyScheduled(a):EMPTY}function emptyScheduled(a){return new Observable(function(s){return a.schedule(function(){return s.complete()})})}function throwError(a,s){return s?new Observable(function(d){return s.schedule(dispatch,0,{error:a,subscriber:d})}):new Observable(function(d){return d.error(a)})}function dispatch(a){var s=a.error,d=a.subscriber;d.error(s)}var Notification=function(){function a(s,d,c){this.kind=s,this.value=d,this.error=c,this.hasValue=s==="N"}return a.prototype.observe=function(s){switch(this.kind){case"N":return s.next&&s.next(this.value);case"E":return s.error&&s.error(this.error);case"C":return s.complete&&s.complete()}},a.prototype.do=function(s,d,c){var h=this.kind;switch(h){case"N":return s&&s(this.value);case"E":return d&&d(this.error);case"C":return c&&c()}},a.prototype.accept=function(s,d,c){return s&&typeof s.next=="function"?this.observe(s):this.do(s,d,c)},a.prototype.toObservable=function(){var s=this.kind;switch(s){case"N":return of$2(this.value);case"E":return throwError(this.error);case"C":return empty$1()}throw new Error("unexpected notification kind value")},a.createNext=function(s){return typeof s!="undefined"?new a("N",s):a.undefinedValueNotification},a.createError=function(s){return new a("E",void 0,s)},a.createComplete=function(){return a.completeNotification},a.completeNotification=new a("C"),a.undefinedValueNotification=new a("N",void 0),a}();function delay(a,s){s===void 0&&(s=async);var d=isDate$1(a),c=d?+a-s.now():Math.abs(a);return function(h){return h.lift(new DelayOperator(c,s))}}var DelayOperator=function(){function a(s,d){this.delay=s,this.scheduler=d}return a.prototype.call=function(s,d){return d.subscribe(new DelaySubscriber(s,this.delay,this.scheduler))},a}(),DelaySubscriber=function(a){__extends(s,a);function s(d,c,h){var b=a.call(this,d)||this;return b.delay=c,b.scheduler=h,b.queue=[],b.active=!1,b.errored=!1,b}return s.dispatch=function(d){for(var c=d.source,h=c.queue,b=d.scheduler,_=d.destination;h.length>0&&h[0].time-b.now()<=0;)h.shift().notification.observe(_);if(h.length>0){var $=Math.max(0,h[0].time-b.now());this.schedule(d,$)}else this.unsubscribe(),c.active=!1},s.prototype._schedule=function(d){this.active=!0;var c=this.destination;c.add(d.schedule(s.dispatch,this.delay,{source:this,destination:this.destination,scheduler:d}))},s.prototype.scheduleNotification=function(d){if(this.errored!==!0){var c=this.scheduler,h=new DelayMessage(c.now()+this.delay,d);this.queue.push(h),this.active===!1&&this._schedule(c)}},s.prototype._next=function(d){this.scheduleNotification(Notification.createNext(d))},s.prototype._error=function(d){this.errored=!0,this.queue=[],this.destination.error(d),this.unsubscribe()},s.prototype._complete=function(){this.scheduleNotification(Notification.createComplete()),this.unsubscribe()},s}(Subscriber),DelayMessage=function(){function a(s,d){this.time=s,this.notification=d}return a}();function delayWhen(a,s){return s?function(d){return new SubscriptionDelayObservable(d,s).lift(new DelayWhenOperator(a))}:function(d){return d.lift(new DelayWhenOperator(a))}}var DelayWhenOperator=function(){function a(s){this.delayDurationSelector=s}return a.prototype.call=function(s,d){return d.subscribe(new DelayWhenSubscriber(s,this.delayDurationSelector))},a}(),DelayWhenSubscriber=function(a){__extends(s,a);function s(d,c){var h=a.call(this,d)||this;return h.delayDurationSelector=c,h.completed=!1,h.delayNotifierSubscriptions=[],h.index=0,h}return s.prototype.notifyNext=function(d,c,h,b,_){this.destination.next(d),this.removeSubscription(_),this.tryComplete()},s.prototype.notifyError=function(d,c){this._error(d)},s.prototype.notifyComplete=function(d){var c=this.removeSubscription(d);c&&this.destination.next(c),this.tryComplete()},s.prototype._next=function(d){var c=this.index++;try{var h=this.delayDurationSelector(d,c);h&&this.tryDelay(h,d)}catch(b){this.destination.error(b)}},s.prototype._complete=function(){this.completed=!0,this.tryComplete(),this.unsubscribe()},s.prototype.removeSubscription=function(d){d.unsubscribe();var c=this.delayNotifierSubscriptions.indexOf(d);return c!==-1&&this.delayNotifierSubscriptions.splice(c,1),d.outerValue},s.prototype.tryDelay=function(d,c){var h=subscribeToResult(this,d,c);if(h&&!h.closed){var b=this.destination;b.add(h),this.delayNotifierSubscriptions.push(h)}},s.prototype.tryComplete=function(){this.completed&&this.delayNotifierSubscriptions.length===0&&this.destination.complete()},s}(OuterSubscriber),SubscriptionDelayObservable=function(a){__extends(s,a);function s(d,c){var h=a.call(this)||this;return h.source=d,h.subscriptionDelay=c,h}return s.prototype._subscribe=function(d){this.subscriptionDelay.subscribe(new SubscriptionDelaySubscriber(d,this.source))},s}(Observable),SubscriptionDelaySubscriber=function(a){__extends(s,a);function s(d,c){var h=a.call(this)||this;return h.parent=d,h.source=c,h.sourceSubscribed=!1,h}return s.prototype._next=function(d){this.subscribeToSource()},s.prototype._error=function(d){this.unsubscribe(),this.parent.error(d)},s.prototype._complete=function(){this.unsubscribe(),this.subscribeToSource()},s.prototype.subscribeToSource=function(){this.sourceSubscribed||(this.sourceSubscribed=!0,this.unsubscribe(),this.source.subscribe(this.parent))},s}(Subscriber);function dematerialize(){return function(s){return s.lift(new DeMaterializeOperator)}}var DeMaterializeOperator=function(){function a(){}return a.prototype.call=function(s,d){return d.subscribe(new DeMaterializeSubscriber(s))},a}(),DeMaterializeSubscriber=function(a){__extends(s,a);function s(d){return a.call(this,d)||this}return s.prototype._next=function(d){d.observe(this.destination)},s}(Subscriber);function distinct(a,s){return function(d){return d.lift(new DistinctOperator(a,s))}}var DistinctOperator=function(){function a(s,d){this.keySelector=s,this.flushes=d}return a.prototype.call=function(s,d){return d.subscribe(new DistinctSubscriber(s,this.keySelector,this.flushes))},a}(),DistinctSubscriber=function(a){__extends(s,a);function s(d,c,h){var b=a.call(this,d)||this;return b.keySelector=c,b.values=new Set,h&&b.add(innerSubscribe(h,new SimpleInnerSubscriber(b))),b}return s.prototype.notifyNext=function(){this.values.clear()},s.prototype.notifyError=function(d){this._error(d)},s.prototype._next=function(d){this.keySelector?this._useKeySelector(d):this._finalizeNext(d,d)},s.prototype._useKeySelector=function(d){var c,h=this.destination;try{c=this.keySelector(d)}catch(b){h.error(b);return}this._finalizeNext(c,d)},s.prototype._finalizeNext=function(d,c){var h=this.values;h.has(d)||(h.add(d),this.destination.next(c))},s}(SimpleOuterSubscriber);function distinctUntilChanged(a,s){return function(d){return d.lift(new DistinctUntilChangedOperator(a,s))}}var DistinctUntilChangedOperator=function(){function a(s,d){this.compare=s,this.keySelector=d}return a.prototype.call=function(s,d){return d.subscribe(new DistinctUntilChangedSubscriber(s,this.compare,this.keySelector))},a}(),DistinctUntilChangedSubscriber=function(a){__extends(s,a);function s(d,c,h){var b=a.call(this,d)||this;return b.keySelector=h,b.hasKey=!1,typeof c=="function"&&(b.compare=c),b}return s.prototype.compare=function(d,c){return d===c},s.prototype._next=function(d){var c;try{var h=this.keySelector;c=h?h(d):d}catch($){return this.destination.error($)}var b=!1;if(this.hasKey)try{var _=this.compare;b=_(this.key,c)}catch($){return this.destination.error($)}else this.hasKey=!0;b||(this.key=c,this.destination.next(d))},s}(Subscriber);function distinctUntilKeyChanged(a,s){return distinctUntilChanged(function(d,c){return s?s(d[a],c[a]):d[a]===c[a]})}var ArgumentOutOfRangeErrorImpl=function(){function a(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return a.prototype=Object.create(Error.prototype),a}(),ArgumentOutOfRangeError=ArgumentOutOfRangeErrorImpl;function filter(a,s){return function(c){return c.lift(new FilterOperator(a,s))}}var FilterOperator=function(){function a(s,d){this.predicate=s,this.thisArg=d}return a.prototype.call=function(s,d){return d.subscribe(new FilterSubscriber(s,this.predicate,this.thisArg))},a}(),FilterSubscriber=function(a){__extends(s,a);function s(d,c,h){var b=a.call(this,d)||this;return b.predicate=c,b.thisArg=h,b.count=0,b}return s.prototype._next=function(d){var c;try{c=this.predicate.call(this.thisArg,d,this.count++)}catch(h){this.destination.error(h);return}c&&this.destination.next(d)},s}(Subscriber),EmptyErrorImpl=function(){function a(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return a.prototype=Object.create(Error.prototype),a}(),EmptyError=EmptyErrorImpl;function throwIfEmpty(a){return a===void 0&&(a=defaultErrorFactory),function(s){return s.lift(new ThrowIfEmptyOperator(a))}}var ThrowIfEmptyOperator=function(){function a(s){this.errorFactory=s}return a.prototype.call=function(s,d){return d.subscribe(new ThrowIfEmptySubscriber(s,this.errorFactory))},a}(),ThrowIfEmptySubscriber=function(a){__extends(s,a);function s(d,c){var h=a.call(this,d)||this;return h.errorFactory=c,h.hasValue=!1,h}return s.prototype._next=function(d){this.hasValue=!0,this.destination.next(d)},s.prototype._complete=function(){if(this.hasValue)return this.destination.complete();var d=void 0;try{d=this.errorFactory()}catch(c){d=c}this.destination.error(d)},s}(Subscriber);function defaultErrorFactory(){return new EmptyError}function take(a){return function(s){return a===0?empty$1():s.lift(new TakeOperator(a))}}var TakeOperator=function(){function a(s){if(this.total=s,this.total<0)throw new ArgumentOutOfRangeError}return a.prototype.call=function(s,d){return d.subscribe(new TakeSubscriber(s,this.total))},a}(),TakeSubscriber=function(a){__extends(s,a);function s(d,c){var h=a.call(this,d)||this;return h.total=c,h.count=0,h}return s.prototype._next=function(d){var c=this.total,h=++this.count;h<=c&&(this.destination.next(d),h===c&&(this.destination.complete(),this.unsubscribe()))},s}(Subscriber);function elementAt(a,s){if(a<0)throw new ArgumentOutOfRangeError;var d=arguments.length>=2;return function(c){return c.pipe(filter(function(h,b){return b===a}),take(1),d?defaultIfEmpty(s):throwIfEmpty(function(){return new ArgumentOutOfRangeError}))}}function endWith(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];return function(d){return concat$1(d,of$2.apply(void 0,a))}}function every(a,s){return function(d){return d.lift(new EveryOperator(a,s,d))}}var EveryOperator=function(){function a(s,d,c){this.predicate=s,this.thisArg=d,this.source=c}return a.prototype.call=function(s,d){return d.subscribe(new EverySubscriber(s,this.predicate,this.thisArg,this.source))},a}(),EverySubscriber=function(a){__extends(s,a);function s(d,c,h,b){var _=a.call(this,d)||this;return _.predicate=c,_.thisArg=h,_.source=b,_.index=0,_.thisArg=h||_,_}return s.prototype.notifyComplete=function(d){this.destination.next(d),this.destination.complete()},s.prototype._next=function(d){var c=!1;try{c=this.predicate.call(this.thisArg,d,this.index++,this.source)}catch(h){this.destination.error(h);return}c||this.notifyComplete(!1)},s.prototype._complete=function(){this.notifyComplete(!0)},s}(Subscriber);function exhaust(){return function(a){return a.lift(new SwitchFirstOperator)}}var SwitchFirstOperator=function(){function a(){}return a.prototype.call=function(s,d){return d.subscribe(new SwitchFirstSubscriber(s))},a}(),SwitchFirstSubscriber=function(a){__extends(s,a);function s(d){var c=a.call(this,d)||this;return c.hasCompleted=!1,c.hasSubscription=!1,c}return s.prototype._next=function(d){this.hasSubscription||(this.hasSubscription=!0,this.add(innerSubscribe(d,new SimpleInnerSubscriber(this))))},s.prototype._complete=function(){this.hasCompleted=!0,this.hasSubscription||this.destination.complete()},s.prototype.notifyComplete=function(){this.hasSubscription=!1,this.hasCompleted&&this.destination.complete()},s}(SimpleOuterSubscriber);function exhaustMap(a,s){return s?function(d){return d.pipe(exhaustMap(function(c,h){return from(a(c,h)).pipe(map(function(b,_){return s(c,b,h,_)}))}))}:function(d){return d.lift(new ExhaustMapOperator(a))}}var ExhaustMapOperator=function(){function a(s){this.project=s}return a.prototype.call=function(s,d){return d.subscribe(new ExhaustMapSubscriber(s,this.project))},a}(),ExhaustMapSubscriber=function(a){__extends(s,a);function s(d,c){var h=a.call(this,d)||this;return h.project=c,h.hasSubscription=!1,h.hasCompleted=!1,h.index=0,h}return s.prototype._next=function(d){this.hasSubscription||this.tryNext(d)},s.prototype.tryNext=function(d){var c,h=this.index++;try{c=this.project(d,h)}catch(b){this.destination.error(b);return}this.hasSubscription=!0,this._innerSub(c)},s.prototype._innerSub=function(d){var c=new SimpleInnerSubscriber(this),h=this.destination;h.add(c);var b=innerSubscribe(d,c);b!==c&&h.add(b)},s.prototype._complete=function(){this.hasCompleted=!0,this.hasSubscription||this.destination.complete(),this.unsubscribe()},s.prototype.notifyNext=function(d){this.destination.next(d)},s.prototype.notifyError=function(d){this.destination.error(d)},s.prototype.notifyComplete=function(){this.hasSubscription=!1,this.hasCompleted&&this.destination.complete()},s}(SimpleOuterSubscriber);function expand(a,s,d){return s===void 0&&(s=Number.POSITIVE_INFINITY),s=(s||0)<1?Number.POSITIVE_INFINITY:s,function(c){return c.lift(new ExpandOperator(a,s,d))}}var ExpandOperator=function(){function a(s,d,c){this.project=s,this.concurrent=d,this.scheduler=c}return a.prototype.call=function(s,d){return d.subscribe(new ExpandSubscriber(s,this.project,this.concurrent,this.scheduler))},a}(),ExpandSubscriber=function(a){__extends(s,a);function s(d,c,h,b){var _=a.call(this,d)||this;return _.project=c,_.concurrent=h,_.scheduler=b,_.index=0,_.active=0,_.hasCompleted=!1,h<Number.POSITIVE_INFINITY&&(_.buffer=[]),_}return s.dispatch=function(d){var c=d.subscriber,h=d.result,b=d.value,_=d.index;c.subscribeToProjection(h,b,_)},s.prototype._next=function(d){var c=this.destination;if(c.closed){this._complete();return}var h=this.index++;if(this.active<this.concurrent){c.next(d);try{var b=this.project,_=b(d,h);if(!this.scheduler)this.subscribeToProjection(_,d,h);else{var $={subscriber:this,result:_,value:d,index:h},_e=this.destination;_e.add(this.scheduler.schedule(s.dispatch,0,$))}}catch(tt){c.error(tt)}}else this.buffer.push(d)},s.prototype.subscribeToProjection=function(d,c,h){this.active++;var b=this.destination;b.add(innerSubscribe(d,new SimpleInnerSubscriber(this)))},s.prototype._complete=function(){this.hasCompleted=!0,this.hasCompleted&&this.active===0&&this.destination.complete(),this.unsubscribe()},s.prototype.notifyNext=function(d){this._next(d)},s.prototype.notifyComplete=function(){var d=this.buffer;this.active--,d&&d.length>0&&this._next(d.shift()),this.hasCompleted&&this.active===0&&this.destination.complete()},s}(SimpleOuterSubscriber);function finalize(a){return function(s){return s.lift(new FinallyOperator(a))}}var FinallyOperator=function(){function a(s){this.callback=s}return a.prototype.call=function(s,d){return d.subscribe(new FinallySubscriber(s,this.callback))},a}(),FinallySubscriber=function(a){__extends(s,a);function s(d,c){var h=a.call(this,d)||this;return h.add(new Subscription(c)),h}return s}(Subscriber);function find$1(a,s){if(typeof a!="function")throw new TypeError("predicate is not a function");return function(d){return d.lift(new FindValueOperator(a,d,!1,s))}}var FindValueOperator=function(){function a(s,d,c,h){this.predicate=s,this.source=d,this.yieldIndex=c,this.thisArg=h}return a.prototype.call=function(s,d){return d.subscribe(new FindValueSubscriber(s,this.predicate,this.source,this.yieldIndex,this.thisArg))},a}(),FindValueSubscriber=function(a){__extends(s,a);function s(d,c,h,b,_){var $=a.call(this,d)||this;return $.predicate=c,$.source=h,$.yieldIndex=b,$.thisArg=_,$.index=0,$}return s.prototype.notifyComplete=function(d){var c=this.destination;c.next(d),c.complete(),this.unsubscribe()},s.prototype._next=function(d){var c=this,h=c.predicate,b=c.thisArg,_=this.index++;try{var $=h.call(b||this,d,_,this.source);$&&this.notifyComplete(this.yieldIndex?_:d)}catch(_e){this.destination.error(_e)}},s.prototype._complete=function(){this.notifyComplete(this.yieldIndex?-1:void 0)},s}(Subscriber);function findIndex(a,s){return function(d){return d.lift(new FindValueOperator(a,d,!0,s))}}function first(a,s){var d=arguments.length>=2;return function(c){return c.pipe(a?filter(function(h,b){return a(h,b,c)}):identity,take(1),d?defaultIfEmpty(s):throwIfEmpty(function(){return new EmptyError}))}}var ObjectUnsubscribedErrorImpl=function(){function a(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return a.prototype=Object.create(Error.prototype),a}(),ObjectUnsubscribedError=ObjectUnsubscribedErrorImpl,SubjectSubscription=function(a){__extends(s,a);function s(d,c){var h=a.call(this)||this;return h.subject=d,h.subscriber=c,h.closed=!1,h}return s.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var d=this.subject,c=d.observers;if(this.subject=null,!(!c||c.length===0||d.isStopped||d.closed)){var h=c.indexOf(this.subscriber);h!==-1&&c.splice(h,1)}}},s}(Subscription),SubjectSubscriber=function(a){__extends(s,a);function s(d){var c=a.call(this,d)||this;return c.destination=d,c}return s}(Subscriber),Subject=function(a){__extends(s,a);function s(){var d=a.call(this)||this;return d.observers=[],d.closed=!1,d.isStopped=!1,d.hasError=!1,d.thrownError=null,d}return s.prototype[rxSubscriber]=function(){return new SubjectSubscriber(this)},s.prototype.lift=function(d){var c=new AnonymousSubject(this,this);return c.operator=d,c},s.prototype.next=function(d){if(this.closed)throw new ObjectUnsubscribedError;if(!this.isStopped)for(var c=this.observers,h=c.length,b=c.slice(),_=0;_<h;_++)b[_].next(d)},s.prototype.error=function(d){if(this.closed)throw new ObjectUnsubscribedError;this.hasError=!0,this.thrownError=d,this.isStopped=!0;for(var c=this.observers,h=c.length,b=c.slice(),_=0;_<h;_++)b[_].error(d);this.observers.length=0},s.prototype.complete=function(){if(this.closed)throw new ObjectUnsubscribedError;this.isStopped=!0;for(var d=this.observers,c=d.length,h=d.slice(),b=0;b<c;b++)h[b].complete();this.observers.length=0},s.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},s.prototype._trySubscribe=function(d){if(this.closed)throw new ObjectUnsubscribedError;return a.prototype._trySubscribe.call(this,d)},s.prototype._subscribe=function(d){if(this.closed)throw new ObjectUnsubscribedError;return this.hasError?(d.error(this.thrownError),Subscription.EMPTY):this.isStopped?(d.complete(),Subscription.EMPTY):(this.observers.push(d),new SubjectSubscription(this,d))},s.prototype.asObservable=function(){var d=new Observable;return d.source=this,d},s.create=function(d,c){return new AnonymousSubject(d,c)},s}(Observable),AnonymousSubject=function(a){__extends(s,a);function s(d,c){var h=a.call(this)||this;return h.destination=d,h.source=c,h}return s.prototype.next=function(d){var c=this.destination;c&&c.next&&c.next(d)},s.prototype.error=function(d){var c=this.destination;c&&c.error&&this.destination.error(d)},s.prototype.complete=function(){var d=this.destination;d&&d.complete&&this.destination.complete()},s.prototype._subscribe=function(d){var c=this.source;return c?this.source.subscribe(d):Subscription.EMPTY},s}(Subject);function groupBy(a,s,d,c){return function(h){return h.lift(new GroupByOperator(a,s,d,c))}}var GroupByOperator=function(){function a(s,d,c,h){this.keySelector=s,this.elementSelector=d,this.durationSelector=c,this.subjectSelector=h}return a.prototype.call=function(s,d){return d.subscribe(new GroupBySubscriber(s,this.keySelector,this.elementSelector,this.durationSelector,this.subjectSelector))},a}(),GroupBySubscriber=function(a){__extends(s,a);function s(d,c,h,b,_){var $=a.call(this,d)||this;return $.keySelector=c,$.elementSelector=h,$.durationSelector=b,$.subjectSelector=_,$.groups=null,$.attemptedToUnsubscribe=!1,$.count=0,$}return s.prototype._next=function(d){var c;try{c=this.keySelector(d)}catch(h){this.error(h);return}this._group(d,c)},s.prototype._group=function(d,c){var h=this.groups;h||(h=this.groups=new Map);var b=h.get(c),_;if(this.elementSelector)try{_=this.elementSelector(d)}catch(tt){this.error(tt)}else _=d;if(!b){b=this.subjectSelector?this.subjectSelector():new Subject,h.set(c,b);var $=new GroupedObservable(c,b,this);if(this.destination.next($),this.durationSelector){var _e=void 0;try{_e=this.durationSelector(new GroupedObservable(c,b))}catch(tt){this.error(tt);return}this.add(_e.subscribe(new GroupDurationSubscriber(c,b,this)))}}b.closed||b.next(_)},s.prototype._error=function(d){var c=this.groups;c&&(c.forEach(function(h,b){h.error(d)}),c.clear()),this.destination.error(d)},s.prototype._complete=function(){var d=this.groups;d&&(d.forEach(function(c,h){c.complete()}),d.clear()),this.destination.complete()},s.prototype.removeGroup=function(d){this.groups.delete(d)},s.prototype.unsubscribe=function(){this.closed||(this.attemptedToUnsubscribe=!0,this.count===0&&a.prototype.unsubscribe.call(this))},s}(Subscriber),GroupDurationSubscriber=function(a){__extends(s,a);function s(d,c,h){var b=a.call(this,c)||this;return b.key=d,b.group=c,b.parent=h,b}return s.prototype._next=function(d){this.complete()},s.prototype._unsubscribe=function(){var d=this,c=d.parent,h=d.key;this.key=this.parent=null,c&&c.removeGroup(h)},s}(Subscriber),GroupedObservable=function(a){__extends(s,a);function s(d,c,h){var b=a.call(this)||this;return b.key=d,b.groupSubject=c,b.refCountSubscription=h,b}return s.prototype._subscribe=function(d){var c=new Subscription,h=this,b=h.refCountSubscription,_=h.groupSubject;return b&&!b.closed&&c.add(new InnerRefCountSubscription(b)),c.add(_.subscribe(d)),c},s}(Observable),InnerRefCountSubscription=function(a){__extends(s,a);function s(d){var c=a.call(this)||this;return c.parent=d,d.count++,c}return s.prototype.unsubscribe=function(){var d=this.parent;!d.closed&&!this.closed&&(a.prototype.unsubscribe.call(this),d.count-=1,d.count===0&&d.attemptedToUnsubscribe&&d.unsubscribe())},s}(Subscription);function ignoreElements(){return function(s){return s.lift(new IgnoreElementsOperator)}}var IgnoreElementsOperator=function(){function a(){}return a.prototype.call=function(s,d){return d.subscribe(new IgnoreElementsSubscriber(s))},a}(),IgnoreElementsSubscriber=function(a){__extends(s,a);function s(){return a!==null&&a.apply(this,arguments)||this}return s.prototype._next=function(d){},s}(Subscriber);function isEmpty(){return function(a){return a.lift(new IsEmptyOperator)}}var IsEmptyOperator=function(){function a(){}return a.prototype.call=function(s,d){return d.subscribe(new IsEmptySubscriber(s))},a}(),IsEmptySubscriber=function(a){__extends(s,a);function s(d){return a.call(this,d)||this}return s.prototype.notifyComplete=function(d){var c=this.destination;c.next(d),c.complete()},s.prototype._next=function(d){this.notifyComplete(!1)},s.prototype._complete=function(){this.notifyComplete(!0)},s}(Subscriber);function takeLast(a){return function(d){return a===0?empty$1():d.lift(new TakeLastOperator(a))}}var TakeLastOperator=function(){function a(s){if(this.total=s,this.total<0)throw new ArgumentOutOfRangeError}return a.prototype.call=function(s,d){return d.subscribe(new TakeLastSubscriber(s,this.total))},a}(),TakeLastSubscriber=function(a){__extends(s,a);function s(d,c){var h=a.call(this,d)||this;return h.total=c,h.ring=new Array,h.count=0,h}return s.prototype._next=function(d){var c=this.ring,h=this.total,b=this.count++;if(c.length<h)c.push(d);else{var _=b%h;c[_]=d}},s.prototype._complete=function(){var d=this.destination,c=this.count;if(c>0)for(var h=this.count>=this.total?this.total:this.count,b=this.ring,_=0;_<h;_++){var $=c++%h;d.next(b[$])}d.complete()},s}(Subscriber);function last(a,s){var d=arguments.length>=2;return function(c){return c.pipe(a?filter(function(h,b){return a(h,b,c)}):identity,takeLast(1),d?defaultIfEmpty(s):throwIfEmpty(function(){return new EmptyError}))}}function mapTo(a){return function(s){return s.lift(new MapToOperator(a))}}var MapToOperator=function(){function a(s){this.value=s}return a.prototype.call=function(s,d){return d.subscribe(new MapToSubscriber(s,this.value))},a}(),MapToSubscriber=function(a){__extends(s,a);function s(d,c){var h=a.call(this,d)||this;return h.value=c,h}return s.prototype._next=function(d){this.destination.next(this.value)},s}(Subscriber);function materialize(){return function(s){return s.lift(new MaterializeOperator)}}var MaterializeOperator=function(){function a(){}return a.prototype.call=function(s,d){return d.subscribe(new MaterializeSubscriber(s))},a}(),MaterializeSubscriber=function(a){__extends(s,a);function s(d){return a.call(this,d)||this}return s.prototype._next=function(d){this.destination.next(Notification.createNext(d))},s.prototype._error=function(d){var c=this.destination;c.next(Notification.createError(d)),c.complete()},s.prototype._complete=function(){var d=this.destination;d.next(Notification.createComplete()),d.complete()},s}(Subscriber);function scan(a,s){var d=!1;return arguments.length>=2&&(d=!0),function(h){return h.lift(new ScanOperator(a,s,d))}}var ScanOperator=function(){function a(s,d,c){c===void 0&&(c=!1),this.accumulator=s,this.seed=d,this.hasSeed=c}return a.prototype.call=function(s,d){return d.subscribe(new ScanSubscriber(s,this.accumulator,this.seed,this.hasSeed))},a}(),ScanSubscriber=function(a){__extends(s,a);function s(d,c,h,b){var _=a.call(this,d)||this;return _.accumulator=c,_._seed=h,_.hasSeed=b,_.index=0,_}return Object.defineProperty(s.prototype,"seed",{get:function(){return this._seed},set:function(d){this.hasSeed=!0,this._seed=d},enumerable:!0,configurable:!0}),s.prototype._next=function(d){if(!this.hasSeed)this.seed=d,this.destination.next(d);else return this._tryNext(d)},s.prototype._tryNext=function(d){var c=this.index++,h;try{h=this.accumulator(this.seed,d,c)}catch(b){this.destination.error(b)}this.seed=h,this.destination.next(h)},s}(Subscriber);function reduce(a,s){return arguments.length>=2?function(c){return pipe(scan(a,s),takeLast(1),defaultIfEmpty(s))(c)}:function(c){return pipe(scan(function(h,b,_){return a(h,b,_+1)}),takeLast(1))(c)}}function max(a){var s=typeof a=="function"?function(d,c){return a(d,c)>0?d:c}:function(d,c){return d>c?d:c};return reduce(s)}function merge$2(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];var d=Number.POSITIVE_INFINITY,c=null,h=a[a.length-1];return isScheduler(h)?(c=a.pop(),a.length>1&&typeof a[a.length-1]=="number"&&(d=a.pop())):typeof h=="number"&&(d=a.pop()),c===null&&a.length===1&&a[0]instanceof Observable?a[0]:mergeAll(d)(fromArray(a,c))}function merge$1(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];return function(d){return d.lift.call(merge$2.apply(void 0,[d].concat(a)))}}function mergeMapTo(a,s,d){return d===void 0&&(d=Number.POSITIVE_INFINITY),typeof s=="function"?mergeMap(function(){return a},s,d):(typeof s=="number"&&(d=s),mergeMap(function(){return a},d))}function mergeScan(a,s,d){return d===void 0&&(d=Number.POSITIVE_INFINITY),function(c){return c.lift(new MergeScanOperator(a,s,d))}}var MergeScanOperator=function(){function a(s,d,c){this.accumulator=s,this.seed=d,this.concurrent=c}return a.prototype.call=function(s,d){return d.subscribe(new MergeScanSubscriber(s,this.accumulator,this.seed,this.concurrent))},a}(),MergeScanSubscriber=function(a){__extends(s,a);function s(d,c,h,b){var _=a.call(this,d)||this;return _.accumulator=c,_.acc=h,_.concurrent=b,_.hasValue=!1,_.hasCompleted=!1,_.buffer=[],_.active=0,_.index=0,_}return s.prototype._next=function(d){if(this.active<this.concurrent){var c=this.index++,h=this.destination,b=void 0;try{var _=this.accumulator;b=_(this.acc,d,c)}catch($){return h.error($)}this.active++,this._innerSub(b)}else this.buffer.push(d)},s.prototype._innerSub=function(d){var c=new SimpleInnerSubscriber(this),h=this.destination;h.add(c);var b=innerSubscribe(d,c);b!==c&&h.add(b)},s.prototype._complete=function(){this.hasCompleted=!0,this.active===0&&this.buffer.length===0&&(this.hasValue===!1&&this.destination.next(this.acc),this.destination.complete()),this.unsubscribe()},s.prototype.notifyNext=function(d){var c=this.destination;this.acc=d,this.hasValue=!0,c.next(d)},s.prototype.notifyComplete=function(){var d=this.buffer;this.active--,d.length>0?this._next(d.shift()):this.active===0&&this.hasCompleted&&(this.hasValue===!1&&this.destination.next(this.acc),this.destination.complete())},s}(SimpleOuterSubscriber);function min(a){var s=typeof a=="function"?function(d,c){return a(d,c)<0?d:c}:function(d,c){return d<c?d:c};return reduce(s)}function refCount(){return function(s){return s.lift(new RefCountOperator(s))}}var RefCountOperator=function(){function a(s){this.connectable=s}return a.prototype.call=function(s,d){var c=this.connectable;c._refCount++;var h=new RefCountSubscriber(s,c),b=d.subscribe(h);return h.closed||(h.connection=c.connect()),b},a}(),RefCountSubscriber=function(a){__extends(s,a);function s(d,c){var h=a.call(this,d)||this;return h.connectable=c,h}return s.prototype._unsubscribe=function(){var d=this.connectable;if(!d){this.connection=null;return}this.connectable=null;var c=d._refCount;if(c<=0){this.connection=null;return}if(d._refCount=c-1,c>1){this.connection=null;return}var h=this.connection,b=d._connection;this.connection=null,b&&(!h||b===h)&&b.unsubscribe()},s}(Subscriber),ConnectableObservable=function(a){__extends(s,a);function s(d,c){var h=a.call(this)||this;return h.source=d,h.subjectFactory=c,h._refCount=0,h._isComplete=!1,h}return s.prototype._subscribe=function(d){return this.getSubject().subscribe(d)},s.prototype.getSubject=function(){var d=this._subject;return(!d||d.isStopped)&&(this._subject=this.subjectFactory()),this._subject},s.prototype.connect=function(){var d=this._connection;return d||(this._isComplete=!1,d=this._connection=new Subscription,d.add(this.source.subscribe(new ConnectableSubscriber(this.getSubject(),this))),d.closed&&(this._connection=null,d=Subscription.EMPTY)),d},s.prototype.refCount=function(){return refCount()(this)},s}(Observable),connectableObservableDescriptor=function(){var a=ConnectableObservable.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:a._subscribe},_isComplete:{value:a._isComplete,writable:!0},getSubject:{value:a.getSubject},connect:{value:a.connect},refCount:{value:a.refCount}}}(),ConnectableSubscriber=function(a){__extends(s,a);function s(d,c){var h=a.call(this,d)||this;return h.connectable=c,h}return s.prototype._error=function(d){this._unsubscribe(),a.prototype._error.call(this,d)},s.prototype._complete=function(){this.connectable._isComplete=!0,this._unsubscribe(),a.prototype._complete.call(this)},s.prototype._unsubscribe=function(){var d=this.connectable;if(d){this.connectable=null;var c=d._connection;d._refCount=0,d._subject=null,d._connection=null,c&&c.unsubscribe()}},s}(SubjectSubscriber);function multicast(a,s){return function(c){var h;if(typeof a=="function"?h=a:h=function(){return a},typeof s=="function")return c.lift(new MulticastOperator(h,s));var b=Object.create(c,connectableObservableDescriptor);return b.source=c,b.subjectFactory=h,b}}var MulticastOperator=function(){function a(s,d){this.subjectFactory=s,this.selector=d}return a.prototype.call=function(s,d){var c=this.selector,h=this.subjectFactory(),b=c(h).subscribe(s);return b.add(d.subscribe(h)),b},a}();function observeOn(a,s){return s===void 0&&(s=0),function(c){return c.lift(new ObserveOnOperator(a,s))}}var ObserveOnOperator=function(){function a(s,d){d===void 0&&(d=0),this.scheduler=s,this.delay=d}return a.prototype.call=function(s,d){return d.subscribe(new ObserveOnSubscriber(s,this.scheduler,this.delay))},a}(),ObserveOnSubscriber=function(a){__extends(s,a);function s(d,c,h){h===void 0&&(h=0);var b=a.call(this,d)||this;return b.scheduler=c,b.delay=h,b}return s.dispatch=function(d){var c=d.notification,h=d.destination;c.observe(h),this.unsubscribe()},s.prototype.scheduleMessage=function(d){var c=this.destination;c.add(this.scheduler.schedule(s.dispatch,this.delay,new ObserveOnMessage(d,this.destination)))},s.prototype._next=function(d){this.scheduleMessage(Notification.createNext(d))},s.prototype._error=function(d){this.scheduleMessage(Notification.createError(d)),this.unsubscribe()},s.prototype._complete=function(){this.scheduleMessage(Notification.createComplete()),this.unsubscribe()},s}(Subscriber),ObserveOnMessage=function(){function a(s,d){this.notification=s,this.destination=d}return a}();function onErrorResumeNext(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];return a.length===1&&isArray$2(a[0])&&(a=a[0]),function(d){return d.lift(new OnErrorResumeNextOperator(a))}}var OnErrorResumeNextOperator=function(){function a(s){this.nextSources=s}return a.prototype.call=function(s,d){return d.subscribe(new OnErrorResumeNextSubscriber(s,this.nextSources))},a}(),OnErrorResumeNextSubscriber=function(a){__extends(s,a);function s(d,c){var h=a.call(this,d)||this;return h.destination=d,h.nextSources=c,h}return s.prototype.notifyError=function(){this.subscribeToNextSource()},s.prototype.notifyComplete=function(){this.subscribeToNextSource()},s.prototype._error=function(d){this.subscribeToNextSource(),this.unsubscribe()},s.prototype._complete=function(){this.subscribeToNextSource(),this.unsubscribe()},s.prototype.subscribeToNextSource=function(){var d=this.nextSources.shift();if(d){var c=new SimpleInnerSubscriber(this),h=this.destination;h.add(c);var b=innerSubscribe(d,c);b!==c&&h.add(b)}else this.destination.complete()},s}(SimpleOuterSubscriber);function pairwise(){return function(a){return a.lift(new PairwiseOperator)}}var PairwiseOperator=function(){function a(){}return a.prototype.call=function(s,d){return d.subscribe(new PairwiseSubscriber(s))},a}(),PairwiseSubscriber=function(a){__extends(s,a);function s(d){var c=a.call(this,d)||this;return c.hasPrev=!1,c}return s.prototype._next=function(d){var c;this.hasPrev?c=[this.prev,d]:this.hasPrev=!0,this.prev=d,c&&this.destination.next(c)},s}(Subscriber);function not(a,s){function d(){return!d.pred.apply(d.thisArg,arguments)}return d.pred=a,d.thisArg=s,d}function partition(a,s){return function(d){return[filter(a,s)(d),filter(not(a,s))(d)]}}function pluck(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];var d=a.length;if(d===0)throw new Error("list of properties cannot be empty.");return function(c){return map(plucker(a,d))(c)}}function plucker(a,s){var d=function(c){for(var h=c,b=0;b<s;b++){var _=h!=null?h[a[b]]:void 0;if(_!==void 0)h=_;else return}return h};return d}function publish(a){return a?multicast(function(){return new Subject},a):multicast(new Subject)}var BehaviorSubject=function(a){__extends(s,a);function s(d){var c=a.call(this)||this;return c._value=d,c}return Object.defineProperty(s.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),s.prototype._subscribe=function(d){var c=a.prototype._subscribe.call(this,d);return c&&!c.closed&&d.next(this._value),c},s.prototype.getValue=function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new ObjectUnsubscribedError;return this._value},s.prototype.next=function(d){a.prototype.next.call(this,this._value=d)},s}(Subject);function publishBehavior(a){return function(s){return multicast(new BehaviorSubject(a))(s)}}var AsyncSubject=function(a){__extends(s,a);function s(){var d=a!==null&&a.apply(this,arguments)||this;return d.value=null,d.hasNext=!1,d.hasCompleted=!1,d}return s.prototype._subscribe=function(d){return this.hasError?(d.error(this.thrownError),Subscription.EMPTY):this.hasCompleted&&this.hasNext?(d.next(this.value),d.complete(),Subscription.EMPTY):a.prototype._subscribe.call(this,d)},s.prototype.next=function(d){this.hasCompleted||(this.value=d,this.hasNext=!0)},s.prototype.error=function(d){this.hasCompleted||a.prototype.error.call(this,d)},s.prototype.complete=function(){this.hasCompleted=!0,this.hasNext&&a.prototype.next.call(this,this.value),a.prototype.complete.call(this)},s}(Subject);function publishLast(){return function(a){return multicast(new AsyncSubject)(a)}}var QueueAction=function(a){__extends(s,a);function s(d,c){var h=a.call(this,d,c)||this;return h.scheduler=d,h.work=c,h}return s.prototype.schedule=function(d,c){return c===void 0&&(c=0),c>0?a.prototype.schedule.call(this,d,c):(this.delay=c,this.state=d,this.scheduler.flush(this),this)},s.prototype.execute=function(d,c){return c>0||this.closed?a.prototype.execute.call(this,d,c):this._execute(d,c)},s.prototype.requestAsyncId=function(d,c,h){return h===void 0&&(h=0),h!==null&&h>0||h===null&&this.delay>0?a.prototype.requestAsyncId.call(this,d,c,h):d.flush(this)},s}(AsyncAction),QueueScheduler=function(a){__extends(s,a);function s(){return a!==null&&a.apply(this,arguments)||this}return s}(AsyncScheduler),queueScheduler=new QueueScheduler(QueueAction),queue=queueScheduler,ReplaySubject=function(a){__extends(s,a);function s(d,c,h){d===void 0&&(d=Number.POSITIVE_INFINITY),c===void 0&&(c=Number.POSITIVE_INFINITY);var b=a.call(this)||this;return b.scheduler=h,b._events=[],b._infiniteTimeWindow=!1,b._bufferSize=d<1?1:d,b._windowTime=c<1?1:c,c===Number.POSITIVE_INFINITY?(b._infiniteTimeWindow=!0,b.next=b.nextInfiniteTimeWindow):b.next=b.nextTimeWindow,b}return s.prototype.nextInfiniteTimeWindow=function(d){if(!this.isStopped){var c=this._events;c.push(d),c.length>this._bufferSize&&c.shift()}a.prototype.next.call(this,d)},s.prototype.nextTimeWindow=function(d){this.isStopped||(this._events.push(new ReplayEvent(this._getNow(),d)),this._trimBufferThenGetEvents()),a.prototype.next.call(this,d)},s.prototype._subscribe=function(d){var c=this._infiniteTimeWindow,h=c?this._events:this._trimBufferThenGetEvents(),b=this.scheduler,_=h.length,$;if(this.closed)throw new ObjectUnsubscribedError;if(this.isStopped||this.hasError?$=Subscription.EMPTY:(this.observers.push(d),$=new SubjectSubscription(this,d)),b&&d.add(d=new ObserveOnSubscriber(d,b)),c)for(var _e=0;_e<_&&!d.closed;_e++)d.next(h[_e]);else for(var _e=0;_e<_&&!d.closed;_e++)d.next(h[_e].value);return this.hasError?d.error(this.thrownError):this.isStopped&&d.complete(),$},s.prototype._getNow=function(){return(this.scheduler||queue).now()},s.prototype._trimBufferThenGetEvents=function(){for(var d=this._getNow(),c=this._bufferSize,h=this._windowTime,b=this._events,_=b.length,$=0;$<_&&!(d-b[$].time<h);)$++;return _>c&&($=Math.max($,_-c)),$>0&&b.splice(0,$),b},s}(Subject),ReplayEvent=function(){function a(s,d){this.time=s,this.value=d}return a}();function publishReplay(a,s,d,c){d&&typeof d!="function"&&(c=d);var h=typeof d=="function"?d:void 0,b=new ReplaySubject(a,s,c);return function(_){return multicast(function(){return b},h)(_)}}function race$1(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];if(a.length===1)if(isArray$2(a[0]))a=a[0];else return a[0];return fromArray(a,void 0).lift(new RaceOperator)}var RaceOperator=function(){function a(){}return a.prototype.call=function(s,d){return d.subscribe(new RaceSubscriber(s))},a}(),RaceSubscriber=function(a){__extends(s,a);function s(d){var c=a.call(this,d)||this;return c.hasFirst=!1,c.observables=[],c.subscriptions=[],c}return s.prototype._next=function(d){this.observables.push(d)},s.prototype._complete=function(){var d=this.observables,c=d.length;if(c===0)this.destination.complete();else{for(var h=0;h<c&&!this.hasFirst;h++){var b=d[h],_=subscribeToResult(this,b,void 0,h);this.subscriptions&&this.subscriptions.push(_),this.add(_)}this.observables=null}},s.prototype.notifyNext=function(d,c,h){if(!this.hasFirst){this.hasFirst=!0;for(var b=0;b<this.subscriptions.length;b++)if(b!==h){var _=this.subscriptions[b];_.unsubscribe(),this.remove(_)}this.subscriptions=null}this.destination.next(c)},s}(OuterSubscriber);function race(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];return function(c){return a.length===1&&isArray$2(a[0])&&(a=a[0]),c.lift.call(race$1.apply(void 0,[c].concat(a)))}}function repeat(a){return a===void 0&&(a=-1),function(s){return a===0?empty$1():a<0?s.lift(new RepeatOperator(-1,s)):s.lift(new RepeatOperator(a-1,s))}}var RepeatOperator=function(){function a(s,d){this.count=s,this.source=d}return a.prototype.call=function(s,d){return d.subscribe(new RepeatSubscriber(s,this.count,this.source))},a}(),RepeatSubscriber=function(a){__extends(s,a);function s(d,c,h){var b=a.call(this,d)||this;return b.count=c,b.source=h,b}return s.prototype.complete=function(){if(!this.isStopped){var d=this,c=d.source,h=d.count;if(h===0)return a.prototype.complete.call(this);h>-1&&(this.count=h-1),c.subscribe(this._unsubscribeAndRecycle())}},s}(Subscriber);function repeatWhen(a){return function(s){return s.lift(new RepeatWhenOperator(a))}}var RepeatWhenOperator=function(){function a(s){this.notifier=s}return a.prototype.call=function(s,d){return d.subscribe(new RepeatWhenSubscriber(s,this.notifier,d))},a}(),RepeatWhenSubscriber=function(a){__extends(s,a);function s(d,c,h){var b=a.call(this,d)||this;return b.notifier=c,b.source=h,b.sourceIsBeingSubscribedTo=!0,b}return s.prototype.notifyNext=function(){this.sourceIsBeingSubscribedTo=!0,this.source.subscribe(this)},s.prototype.notifyComplete=function(){if(this.sourceIsBeingSubscribedTo===!1)return a.prototype.complete.call(this)},s.prototype.complete=function(){if(this.sourceIsBeingSubscribedTo=!1,!this.isStopped){if(this.retries||this.subscribeToRetries(),!this.retriesSubscription||this.retriesSubscription.closed)return a.prototype.complete.call(this);this._unsubscribeAndRecycle(),this.notifications.next(void 0)}},s.prototype._unsubscribe=function(){var d=this,c=d.notifications,h=d.retriesSubscription;c&&(c.unsubscribe(),this.notifications=void 0),h&&(h.unsubscribe(),this.retriesSubscription=void 0),this.retries=void 0},s.prototype._unsubscribeAndRecycle=function(){var d=this._unsubscribe;return this._unsubscribe=null,a.prototype._unsubscribeAndRecycle.call(this),this._unsubscribe=d,this},s.prototype.subscribeToRetries=function(){this.notifications=new Subject;var d;try{var c=this.notifier;d=c(this.notifications)}catch{return a.prototype.complete.call(this)}this.retries=d,this.retriesSubscription=innerSubscribe(d,new SimpleInnerSubscriber(this))},s}(SimpleOuterSubscriber);function retry(a){return a===void 0&&(a=-1),function(s){return s.lift(new RetryOperator(a,s))}}var RetryOperator=function(){function a(s,d){this.count=s,this.source=d}return a.prototype.call=function(s,d){return d.subscribe(new RetrySubscriber(s,this.count,this.source))},a}(),RetrySubscriber=function(a){__extends(s,a);function s(d,c,h){var b=a.call(this,d)||this;return b.count=c,b.source=h,b}return s.prototype.error=function(d){if(!this.isStopped){var c=this,h=c.source,b=c.count;if(b===0)return a.prototype.error.call(this,d);b>-1&&(this.count=b-1),h.subscribe(this._unsubscribeAndRecycle())}},s}(Subscriber);function retryWhen(a){return function(s){return s.lift(new RetryWhenOperator(a,s))}}var RetryWhenOperator=function(){function a(s,d){this.notifier=s,this.source=d}return a.prototype.call=function(s,d){return d.subscribe(new RetryWhenSubscriber(s,this.notifier,this.source))},a}(),RetryWhenSubscriber=function(a){__extends(s,a);function s(d,c,h){var b=a.call(this,d)||this;return b.notifier=c,b.source=h,b}return s.prototype.error=function(d){if(!this.isStopped){var c=this.errors,h=this.retries,b=this.retriesSubscription;if(h)this.errors=void 0,this.retriesSubscription=void 0;else{c=new Subject;try{var _=this.notifier;h=_(c)}catch($){return a.prototype.error.call(this,$)}b=innerSubscribe(h,new SimpleInnerSubscriber(this))}this._unsubscribeAndRecycle(),this.errors=c,this.retries=h,this.retriesSubscription=b,c.next(d)}},s.prototype._unsubscribe=function(){var d=this,c=d.errors,h=d.retriesSubscription;c&&(c.unsubscribe(),this.errors=void 0),h&&(h.unsubscribe(),this.retriesSubscription=void 0),this.retries=void 0},s.prototype.notifyNext=function(){var d=this._unsubscribe;this._unsubscribe=null,this._unsubscribeAndRecycle(),this._unsubscribe=d,this.source.subscribe(this)},s}(SimpleOuterSubscriber);function sample(a){return function(s){return s.lift(new SampleOperator(a))}}var SampleOperator=function(){function a(s){this.notifier=s}return a.prototype.call=function(s,d){var c=new SampleSubscriber(s),h=d.subscribe(c);return h.add(innerSubscribe(this.notifier,new SimpleInnerSubscriber(c))),h},a}(),SampleSubscriber=function(a){__extends(s,a);function s(){var d=a!==null&&a.apply(this,arguments)||this;return d.hasValue=!1,d}return s.prototype._next=function(d){this.value=d,this.hasValue=!0},s.prototype.notifyNext=function(){this.emitValue()},s.prototype.notifyComplete=function(){this.emitValue()},s.prototype.emitValue=function(){this.hasValue&&(this.hasValue=!1,this.destination.next(this.value))},s}(SimpleOuterSubscriber);function sampleTime(a,s){return s===void 0&&(s=async),function(d){return d.lift(new SampleTimeOperator(a,s))}}var SampleTimeOperator=function(){function a(s,d){this.period=s,this.scheduler=d}return a.prototype.call=function(s,d){return d.subscribe(new SampleTimeSubscriber(s,this.period,this.scheduler))},a}(),SampleTimeSubscriber=function(a){__extends(s,a);function s(d,c,h){var b=a.call(this,d)||this;return b.period=c,b.scheduler=h,b.hasValue=!1,b.add(h.schedule(dispatchNotification,c,{subscriber:b,period:c})),b}return s.prototype._next=function(d){this.lastValue=d,this.hasValue=!0},s.prototype.notifyNext=function(){this.hasValue&&(this.hasValue=!1,this.destination.next(this.lastValue))},s}(Subscriber);function dispatchNotification(a){var s=a.subscriber,d=a.period;s.notifyNext(),this.schedule(a,d)}function sequenceEqual(a,s){return function(d){return d.lift(new SequenceEqualOperator(a,s))}}var SequenceEqualOperator=function(){function a(s,d){this.compareTo=s,this.comparator=d}return a.prototype.call=function(s,d){return d.subscribe(new SequenceEqualSubscriber(s,this.compareTo,this.comparator))},a}(),SequenceEqualSubscriber=function(a){__extends(s,a);function s(d,c,h){var b=a.call(this,d)||this;return b.compareTo=c,b.comparator=h,b._a=[],b._b=[],b._oneComplete=!1,b.destination.add(c.subscribe(new SequenceEqualCompareToSubscriber(d,b))),b}return s.prototype._next=function(d){this._oneComplete&&this._b.length===0?this.emit(!1):(this._a.push(d),this.checkValues())},s.prototype._complete=function(){this._oneComplete?this.emit(this._a.length===0&&this._b.length===0):this._oneComplete=!0,this.unsubscribe()},s.prototype.checkValues=function(){for(var d=this,c=d._a,h=d._b,b=d.comparator;c.length>0&&h.length>0;){var _=c.shift(),$=h.shift(),_e=!1;try{_e=b?b(_,$):_===$}catch(tt){this.destination.error(tt)}_e||this.emit(!1)}},s.prototype.emit=function(d){var c=this.destination;c.next(d),c.complete()},s.prototype.nextB=function(d){this._oneComplete&&this._a.length===0?this.emit(!1):(this._b.push(d),this.checkValues())},s.prototype.completeB=function(){this._oneComplete?this.emit(this._a.length===0&&this._b.length===0):this._oneComplete=!0},s}(Subscriber),SequenceEqualCompareToSubscriber=function(a){__extends(s,a);function s(d,c){var h=a.call(this,d)||this;return h.parent=c,h}return s.prototype._next=function(d){this.parent.nextB(d)},s.prototype._error=function(d){this.parent.error(d),this.unsubscribe()},s.prototype._complete=function(){this.parent.completeB(),this.unsubscribe()},s}(Subscriber);function shareSubjectFactory(){return new Subject}function share(){return function(a){return refCount()(multicast(shareSubjectFactory)(a))}}function shareReplay(a,s,d){var c;return a&&typeof a=="object"?c=a:c={bufferSize:a,windowTime:s,refCount:!1,scheduler:d},function(h){return h.lift(shareReplayOperator(c))}}function shareReplayOperator(a){var s=a.bufferSize,d=s===void 0?Number.POSITIVE_INFINITY:s,c=a.windowTime,h=c===void 0?Number.POSITIVE_INFINITY:c,b=a.refCount,_=a.scheduler,$,_e=0,tt,rt=!1,ot=!1;return function(st){_e++;var lt;!$||rt?(rt=!1,$=new ReplaySubject(d,h,_),lt=$.subscribe(this),tt=st.subscribe({next:function(dt){$.next(dt)},error:function(dt){rt=!0,$.error(dt)},complete:function(){ot=!0,tt=void 0,$.complete()}}),ot&&(tt=void 0)):lt=$.subscribe(this),this.add(function(){_e--,lt.unsubscribe(),lt=void 0,tt&&!ot&&b&&_e===0&&(tt.unsubscribe(),tt=void 0,$=void 0)})}}function single(a){return function(s){return s.lift(new SingleOperator(a,s))}}var SingleOperator=function(){function a(s,d){this.predicate=s,this.source=d}return a.prototype.call=function(s,d){return d.subscribe(new SingleSubscriber(s,this.predicate,this.source))},a}(),SingleSubscriber=function(a){__extends(s,a);function s(d,c,h){var b=a.call(this,d)||this;return b.predicate=c,b.source=h,b.seenValue=!1,b.index=0,b}return s.prototype.applySingleValue=function(d){this.seenValue?this.destination.error("Sequence contains more than one element"):(this.seenValue=!0,this.singleValue=d)},s.prototype._next=function(d){var c=this.index++;this.predicate?this.tryNext(d,c):this.applySingleValue(d)},s.prototype.tryNext=function(d,c){try{this.predicate(d,c,this.source)&&this.applySingleValue(d)}catch(h){this.destination.error(h)}},s.prototype._complete=function(){var d=this.destination;this.index>0?(d.next(this.seenValue?this.singleValue:void 0),d.complete()):d.error(new EmptyError)},s}(Subscriber);function skip(a){return function(s){return s.lift(new SkipOperator(a))}}var SkipOperator=function(){function a(s){this.total=s}return a.prototype.call=function(s,d){return d.subscribe(new SkipSubscriber(s,this.total))},a}(),SkipSubscriber=function(a){__extends(s,a);function s(d,c){var h=a.call(this,d)||this;return h.total=c,h.count=0,h}return s.prototype._next=function(d){++this.count>this.total&&this.destination.next(d)},s}(Subscriber);function skipLast(a){return function(s){return s.lift(new SkipLastOperator(a))}}var SkipLastOperator=function(){function a(s){if(this._skipCount=s,this._skipCount<0)throw new ArgumentOutOfRangeError}return a.prototype.call=function(s,d){return this._skipCount===0?d.subscribe(new Subscriber(s)):d.subscribe(new SkipLastSubscriber(s,this._skipCount))},a}(),SkipLastSubscriber=function(a){__extends(s,a);function s(d,c){var h=a.call(this,d)||this;return h._skipCount=c,h._count=0,h._ring=new Array(c),h}return s.prototype._next=function(d){var c=this._skipCount,h=this._count++;if(h<c)this._ring[h]=d;else{var b=h%c,_=this._ring,$=_[b];_[b]=d,this.destination.next($)}},s}(Subscriber);function skipUntil(a){return function(s){return s.lift(new SkipUntilOperator(a))}}var SkipUntilOperator=function(){function a(s){this.notifier=s}return a.prototype.call=function(s,d){return d.subscribe(new SkipUntilSubscriber(s,this.notifier))},a}(),SkipUntilSubscriber=function(a){__extends(s,a);function s(d,c){var h=a.call(this,d)||this;h.hasValue=!1;var b=new SimpleInnerSubscriber(h);h.add(b),h.innerSubscription=b;var _=innerSubscribe(c,b);return _!==b&&(h.add(_),h.innerSubscription=_),h}return s.prototype._next=function(d){this.hasValue&&a.prototype._next.call(this,d)},s.prototype.notifyNext=function(){this.hasValue=!0,this.innerSubscription&&this.innerSubscription.unsubscribe()},s.prototype.notifyComplete=function(){},s}(SimpleOuterSubscriber);function skipWhile(a){return function(s){return s.lift(new SkipWhileOperator(a))}}var SkipWhileOperator=function(){function a(s){this.predicate=s}return a.prototype.call=function(s,d){return d.subscribe(new SkipWhileSubscriber(s,this.predicate))},a}(),SkipWhileSubscriber=function(a){__extends(s,a);function s(d,c){var h=a.call(this,d)||this;return h.predicate=c,h.skipping=!0,h.index=0,h}return s.prototype._next=function(d){var c=this.destination;this.skipping&&this.tryCallPredicate(d),this.skipping||c.next(d)},s.prototype.tryCallPredicate=function(d){try{var c=this.predicate(d,this.index++);this.skipping=Boolean(c)}catch(h){this.destination.error(h)}},s}(Subscriber);function startWith(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];var d=a[a.length-1];return isScheduler(d)?(a.pop(),function(c){return concat$1(a,c,d)}):function(c){return concat$1(a,c)}}var nextHandle=1,RESOLVED=function(){return Promise.resolve()}(),activeHandles={};function findAndClearHandle(a){return a in activeHandles?(delete activeHandles[a],!0):!1}var Immediate={setImmediate:function(a){var s=nextHandle++;return activeHandles[s]=!0,RESOLVED.then(function(){return findAndClearHandle(s)&&a()}),s},clearImmediate:function(a){findAndClearHandle(a)}},AsapAction=function(a){__extends(s,a);function s(d,c){var h=a.call(this,d,c)||this;return h.scheduler=d,h.work=c,h}return s.prototype.requestAsyncId=function(d,c,h){return h===void 0&&(h=0),h!==null&&h>0?a.prototype.requestAsyncId.call(this,d,c,h):(d.actions.push(this),d.scheduled||(d.scheduled=Immediate.setImmediate(d.flush.bind(d,null))))},s.prototype.recycleAsyncId=function(d,c,h){if(h===void 0&&(h=0),h!==null&&h>0||h===null&&this.delay>0)return a.prototype.recycleAsyncId.call(this,d,c,h);d.actions.length===0&&(Immediate.clearImmediate(c),d.scheduled=void 0)},s}(AsyncAction),AsapScheduler=function(a){__extends(s,a);function s(){return a!==null&&a.apply(this,arguments)||this}return s.prototype.flush=function(d){this.active=!0,this.scheduled=void 0;var c=this.actions,h,b=-1,_=c.length;d=d||c.shift();do if(h=d.execute(d.state,d.delay))break;while(++b<_&&(d=c.shift()));if(this.active=!1,h){for(;++b<_&&(d=c.shift());)d.unsubscribe();throw h}},s}(AsyncScheduler),asapScheduler=new AsapScheduler(AsapAction),asap=asapScheduler,SubscribeOnObservable=function(a){__extends(s,a);function s(d,c,h){c===void 0&&(c=0),h===void 0&&(h=asap);var b=a.call(this)||this;return b.source=d,b.delayTime=c,b.scheduler=h,(!isNumeric(c)||c<0)&&(b.delayTime=0),(!h||typeof h.schedule!="function")&&(b.scheduler=asap),b}return s.create=function(d,c,h){return c===void 0&&(c=0),h===void 0&&(h=asap),new s(d,c,h)},s.dispatch=function(d){var c=d.source,h=d.subscriber;return this.add(c.subscribe(h))},s.prototype._subscribe=function(d){var c=this.delayTime,h=this.source,b=this.scheduler;return b.schedule(s.dispatch,c,{source:h,subscriber:d})},s}(Observable);function subscribeOn(a,s){return s===void 0&&(s=0),function(c){return c.lift(new SubscribeOnOperator(a,s))}}var SubscribeOnOperator=function(){function a(s,d){this.scheduler=s,this.delay=d}return a.prototype.call=function(s,d){return new SubscribeOnObservable(d,this.delay,this.scheduler).subscribe(s)},a}();function switchMap(a,s){return typeof s=="function"?function(d){return d.pipe(switchMap(function(c,h){return from(a(c,h)).pipe(map(function(b,_){return s(c,b,h,_)}))}))}:function(d){return d.lift(new SwitchMapOperator(a))}}var SwitchMapOperator=function(){function a(s){this.project=s}return a.prototype.call=function(s,d){return d.subscribe(new SwitchMapSubscriber(s,this.project))},a}(),SwitchMapSubscriber=function(a){__extends(s,a);function s(d,c){var h=a.call(this,d)||this;return h.project=c,h.index=0,h}return s.prototype._next=function(d){var c,h=this.index++;try{c=this.project(d,h)}catch(b){this.destination.error(b);return}this._innerSub(c)},s.prototype._innerSub=function(d){var c=this.innerSubscription;c&&c.unsubscribe();var h=new SimpleInnerSubscriber(this),b=this.destination;b.add(h),this.innerSubscription=innerSubscribe(d,h),this.innerSubscription!==h&&b.add(this.innerSubscription)},s.prototype._complete=function(){var d=this.innerSubscription;(!d||d.closed)&&a.prototype._complete.call(this),this.unsubscribe()},s.prototype._unsubscribe=function(){this.innerSubscription=void 0},s.prototype.notifyComplete=function(){this.innerSubscription=void 0,this.isStopped&&a.prototype._complete.call(this)},s.prototype.notifyNext=function(d){this.destination.next(d)},s}(SimpleOuterSubscriber);function switchAll(){return switchMap(identity)}function switchMapTo(a,s){return s?switchMap(function(){return a},s):switchMap(function(){return a})}function takeUntil(a){return function(s){return s.lift(new TakeUntilOperator(a))}}var TakeUntilOperator=function(){function a(s){this.notifier=s}return a.prototype.call=function(s,d){var c=new TakeUntilSubscriber(s),h=innerSubscribe(this.notifier,new SimpleInnerSubscriber(c));return h&&!c.seenValue?(c.add(h),d.subscribe(c)):c},a}(),TakeUntilSubscriber=function(a){__extends(s,a);function s(d){var c=a.call(this,d)||this;return c.seenValue=!1,c}return s.prototype.notifyNext=function(){this.seenValue=!0,this.complete()},s.prototype.notifyComplete=function(){},s}(SimpleOuterSubscriber);function takeWhile(a,s){return s===void 0&&(s=!1),function(d){return d.lift(new TakeWhileOperator(a,s))}}var TakeWhileOperator=function(){function a(s,d){this.predicate=s,this.inclusive=d}return a.prototype.call=function(s,d){return d.subscribe(new TakeWhileSubscriber(s,this.predicate,this.inclusive))},a}(),TakeWhileSubscriber=function(a){__extends(s,a);function s(d,c,h){var b=a.call(this,d)||this;return b.predicate=c,b.inclusive=h,b.index=0,b}return s.prototype._next=function(d){var c=this.destination,h;try{h=this.predicate(d,this.index++)}catch(b){c.error(b);return}this.nextOrComplete(d,h)},s.prototype.nextOrComplete=function(d,c){var h=this.destination;Boolean(c)?h.next(d):(this.inclusive&&h.next(d),h.complete())},s}(Subscriber);function noop$2(){}function tap(a,s,d){return function(h){return h.lift(new DoOperator(a,s,d))}}var DoOperator=function(){function a(s,d,c){this.nextOrObserver=s,this.error=d,this.complete=c}return a.prototype.call=function(s,d){return d.subscribe(new TapSubscriber(s,this.nextOrObserver,this.error,this.complete))},a}(),TapSubscriber=function(a){__extends(s,a);function s(d,c,h,b){var _=a.call(this,d)||this;return _._tapNext=noop$2,_._tapError=noop$2,_._tapComplete=noop$2,_._tapError=h||noop$2,_._tapComplete=b||noop$2,isFunction$1(c)?(_._context=_,_._tapNext=c):c&&(_._context=c,_._tapNext=c.next||noop$2,_._tapError=c.error||noop$2,_._tapComplete=c.complete||noop$2),_}return s.prototype._next=function(d){try{this._tapNext.call(this._context,d)}catch(c){this.destination.error(c);return}this.destination.next(d)},s.prototype._error=function(d){try{this._tapError.call(this._context,d)}catch(c){this.destination.error(c);return}this.destination.error(d)},s.prototype._complete=function(){try{this._tapComplete.call(this._context)}catch(d){this.destination.error(d);return}return this.destination.complete()},s}(Subscriber),defaultThrottleConfig={leading:!0,trailing:!1};function throttle(a,s){return s===void 0&&(s=defaultThrottleConfig),function(d){return d.lift(new ThrottleOperator(a,!!s.leading,!!s.trailing))}}var ThrottleOperator=function(){function a(s,d,c){this.durationSelector=s,this.leading=d,this.trailing=c}return a.prototype.call=function(s,d){return d.subscribe(new ThrottleSubscriber(s,this.durationSelector,this.leading,this.trailing))},a}(),ThrottleSubscriber=function(a){__extends(s,a);function s(d,c,h,b){var _=a.call(this,d)||this;return _.destination=d,_.durationSelector=c,_._leading=h,_._trailing=b,_._hasValue=!1,_}return s.prototype._next=function(d){this._hasValue=!0,this._sendValue=d,this._throttled||(this._leading?this.send():this.throttle(d))},s.prototype.send=function(){var d=this,c=d._hasValue,h=d._sendValue;c&&(this.destination.next(h),this.throttle(h)),this._hasValue=!1,this._sendValue=void 0},s.prototype.throttle=function(d){var c=this.tryDurationSelector(d);c&&this.add(this._throttled=innerSubscribe(c,new SimpleInnerSubscriber(this)))},s.prototype.tryDurationSelector=function(d){try{return this.durationSelector(d)}catch(c){return this.destination.error(c),null}},s.prototype.throttlingDone=function(){var d=this,c=d._throttled,h=d._trailing;c&&c.unsubscribe(),this._throttled=void 0,h&&this.send()},s.prototype.notifyNext=function(){this.throttlingDone()},s.prototype.notifyComplete=function(){this.throttlingDone()},s}(SimpleOuterSubscriber);function throttleTime(a,s,d){return s===void 0&&(s=async),d===void 0&&(d=defaultThrottleConfig),function(c){return c.lift(new ThrottleTimeOperator(a,s,d.leading,d.trailing))}}var ThrottleTimeOperator=function(){function a(s,d,c,h){this.duration=s,this.scheduler=d,this.leading=c,this.trailing=h}return a.prototype.call=function(s,d){return d.subscribe(new ThrottleTimeSubscriber(s,this.duration,this.scheduler,this.leading,this.trailing))},a}(),ThrottleTimeSubscriber=function(a){__extends(s,a);function s(d,c,h,b,_){var $=a.call(this,d)||this;return $.duration=c,$.scheduler=h,$.leading=b,$.trailing=_,$._hasTrailingValue=!1,$._trailingValue=null,$}return s.prototype._next=function(d){this.throttled?this.trailing&&(this._trailingValue=d,this._hasTrailingValue=!0):(this.add(this.throttled=this.scheduler.schedule(dispatchNext,this.duration,{subscriber:this})),this.leading?this.destination.next(d):this.trailing&&(this._trailingValue=d,this._hasTrailingValue=!0))},s.prototype._complete=function(){this._hasTrailingValue?(this.destination.next(this._trailingValue),this.destination.complete()):this.destination.complete()},s.prototype.clearThrottle=function(){var d=this.throttled;d&&(this.trailing&&this._hasTrailingValue&&(this.destination.next(this._trailingValue),this._trailingValue=null,this._hasTrailingValue=!1),d.unsubscribe(),this.remove(d),this.throttled=null)},s}(Subscriber);function dispatchNext(a){var s=a.subscriber;s.clearThrottle()}function defer(a){return new Observable(function(s){var d;try{d=a()}catch(h){s.error(h);return}var c=d?from(d):empty$1();return c.subscribe(s)})}function timeInterval(a){return a===void 0&&(a=async),function(s){return defer(function(){return s.pipe(scan(function(d,c){var h=d.current;return{value:c,current:a.now(),last:h}},{current:a.now(),value:void 0,last:void 0}),map(function(d){var c=d.current,h=d.last,b=d.value;return new TimeInterval(b,c-h)}))})}}var TimeInterval=function(){function a(s,d){this.value=s,this.interval=d}return a}(),TimeoutErrorImpl=function(){function a(){return Error.call(this),this.message="Timeout has occurred",this.name="TimeoutError",this}return a.prototype=Object.create(Error.prototype),a}(),TimeoutError=TimeoutErrorImpl;function timeoutWith(a,s,d){return d===void 0&&(d=async),function(c){var h=isDate$1(a),b=h?+a-d.now():Math.abs(a);return c.lift(new TimeoutWithOperator(b,h,s,d))}}var TimeoutWithOperator=function(){function a(s,d,c,h){this.waitFor=s,this.absoluteTimeout=d,this.withObservable=c,this.scheduler=h}return a.prototype.call=function(s,d){return d.subscribe(new TimeoutWithSubscriber(s,this.absoluteTimeout,this.waitFor,this.withObservable,this.scheduler))},a}(),TimeoutWithSubscriber=function(a){__extends(s,a);function s(d,c,h,b,_){var $=a.call(this,d)||this;return $.absoluteTimeout=c,$.waitFor=h,$.withObservable=b,$.scheduler=_,$.scheduleTimeout(),$}return s.dispatchTimeout=function(d){var c=d.withObservable;d._unsubscribeAndRecycle(),d.add(innerSubscribe(c,new SimpleInnerSubscriber(d)))},s.prototype.scheduleTimeout=function(){var d=this.action;d?this.action=d.schedule(this,this.waitFor):this.add(this.action=this.scheduler.schedule(s.dispatchTimeout,this.waitFor,this))},s.prototype._next=function(d){this.absoluteTimeout||this.scheduleTimeout(),a.prototype._next.call(this,d)},s.prototype._unsubscribe=function(){this.action=void 0,this.scheduler=null,this.withObservable=null},s}(SimpleOuterSubscriber);function timeout(a,s){return s===void 0&&(s=async),timeoutWith(a,throwError(new TimeoutError),s)}function timestamp(a){return a===void 0&&(a=async),map(function(s){return new Timestamp(s,a.now())})}var Timestamp=function(){function a(s,d){this.value=s,this.timestamp=d}return a}();function toArrayReducer(a,s,d){return d===0?[s]:(a.push(s),a)}function toArray(){return reduce(toArrayReducer,[])}function window$1(a){return function(d){return d.lift(new WindowOperator$1(a))}}var WindowOperator$1=function(){function a(s){this.windowBoundaries=s}return a.prototype.call=function(s,d){var c=new WindowSubscriber$1(s),h=d.subscribe(c);return h.closed||c.add(innerSubscribe(this.windowBoundaries,new SimpleInnerSubscriber(c))),h},a}(),WindowSubscriber$1=function(a){__extends(s,a);function s(d){var c=a.call(this,d)||this;return c.window=new Subject,d.next(c.window),c}return s.prototype.notifyNext=function(){this.openWindow()},s.prototype.notifyError=function(d){this._error(d)},s.prototype.notifyComplete=function(){this._complete()},s.prototype._next=function(d){this.window.next(d)},s.prototype._error=function(d){this.window.error(d),this.destination.error(d)},s.prototype._complete=function(){this.window.complete(),this.destination.complete()},s.prototype._unsubscribe=function(){this.window=null},s.prototype.openWindow=function(){var d=this.window;d&&d.complete();var c=this.destination,h=this.window=new Subject;c.next(h)},s}(SimpleOuterSubscriber);function windowCount(a,s){return s===void 0&&(s=0),function(c){return c.lift(new WindowCountOperator(a,s))}}var WindowCountOperator=function(){function a(s,d){this.windowSize=s,this.startWindowEvery=d}return a.prototype.call=function(s,d){return d.subscribe(new WindowCountSubscriber(s,this.windowSize,this.startWindowEvery))},a}(),WindowCountSubscriber=function(a){__extends(s,a);function s(d,c,h){var b=a.call(this,d)||this;return b.destination=d,b.windowSize=c,b.startWindowEvery=h,b.windows=[new Subject],b.count=0,d.next(b.windows[0]),b}return s.prototype._next=function(d){for(var c=this.startWindowEvery>0?this.startWindowEvery:this.windowSize,h=this.destination,b=this.windowSize,_=this.windows,$=_.length,_e=0;_e<$&&!this.closed;_e++)_[_e].next(d);var tt=this.count-b+1;if(tt>=0&&tt%c===0&&!this.closed&&_.shift().complete(),++this.count%c===0&&!this.closed){var rt=new Subject;_.push(rt),h.next(rt)}},s.prototype._error=function(d){var c=this.windows;if(c)for(;c.length>0&&!this.closed;)c.shift().error(d);this.destination.error(d)},s.prototype._complete=function(){var d=this.windows;if(d)for(;d.length>0&&!this.closed;)d.shift().complete();this.destination.complete()},s.prototype._unsubscribe=function(){this.count=0,this.windows=null},s}(Subscriber);function windowTime(a){var s=async,d=null,c=Number.POSITIVE_INFINITY;return isScheduler(arguments[3])&&(s=arguments[3]),isScheduler(arguments[2])?s=arguments[2]:isNumeric(arguments[2])&&(c=Number(arguments[2])),isScheduler(arguments[1])?s=arguments[1]:isNumeric(arguments[1])&&(d=Number(arguments[1])),function(b){return b.lift(new WindowTimeOperator(a,d,c,s))}}var WindowTimeOperator=function(){function a(s,d,c,h){this.windowTimeSpan=s,this.windowCreationInterval=d,this.maxWindowSize=c,this.scheduler=h}return a.prototype.call=function(s,d){return d.subscribe(new WindowTimeSubscriber(s,this.windowTimeSpan,this.windowCreationInterval,this.maxWindowSize,this.scheduler))},a}(),CountedSubject=function(a){__extends(s,a);function s(){var d=a!==null&&a.apply(this,arguments)||this;return d._numberOfNextedValues=0,d}return s.prototype.next=function(d){this._numberOfNextedValues++,a.prototype.next.call(this,d)},Object.defineProperty(s.prototype,"numberOfNextedValues",{get:function(){return this._numberOfNextedValues},enumerable:!0,configurable:!0}),s}(Subject),WindowTimeSubscriber=function(a){__extends(s,a);function s(d,c,h,b,_){var $=a.call(this,d)||this;$.destination=d,$.windowTimeSpan=c,$.windowCreationInterval=h,$.maxWindowSize=b,$.scheduler=_,$.windows=[];var _e=$.openWindow();if(h!==null&&h>=0){var tt={subscriber:$,window:_e,context:null},rt={windowTimeSpan:c,windowCreationInterval:h,subscriber:$,scheduler:_};$.add(_.schedule(dispatchWindowClose,c,tt)),$.add(_.schedule(dispatchWindowCreation,h,rt))}else{var ot={subscriber:$,window:_e,windowTimeSpan:c};$.add(_.schedule(dispatchWindowTimeSpanOnly,c,ot))}return $}return s.prototype._next=function(d){for(var c=this.windows,h=c.length,b=0;b<h;b++){var _=c[b];_.closed||(_.next(d),_.numberOfNextedValues>=this.maxWindowSize&&this.closeWindow(_))}},s.prototype._error=function(d){for(var c=this.windows;c.length>0;)c.shift().error(d);this.destination.error(d)},s.prototype._complete=function(){for(var d=this.windows;d.length>0;){var c=d.shift();c.closed||c.complete()}this.destination.complete()},s.prototype.openWindow=function(){var d=new CountedSubject;this.windows.push(d);var c=this.destination;return c.next(d),d},s.prototype.closeWindow=function(d){d.complete();var c=this.windows;c.splice(c.indexOf(d),1)},s}(Subscriber);function dispatchWindowTimeSpanOnly(a){var s=a.subscriber,d=a.windowTimeSpan,c=a.window;c&&s.closeWindow(c),a.window=s.openWindow(),this.schedule(a,d)}function dispatchWindowCreation(a){var s=a.windowTimeSpan,d=a.subscriber,c=a.scheduler,h=a.windowCreationInterval,b=d.openWindow(),_=this,$={action:_,subscription:null},_e={subscriber:d,window:b,context:$};$.subscription=c.schedule(dispatchWindowClose,s,_e),_.add($.subscription),_.schedule(a,h)}function dispatchWindowClose(a){var s=a.subscriber,d=a.window,c=a.context;c&&c.action&&c.subscription&&c.action.remove(c.subscription),s.closeWindow(d)}function windowToggle(a,s){return function(d){return d.lift(new WindowToggleOperator(a,s))}}var WindowToggleOperator=function(){function a(s,d){this.openings=s,this.closingSelector=d}return a.prototype.call=function(s,d){return d.subscribe(new WindowToggleSubscriber(s,this.openings,this.closingSelector))},a}(),WindowToggleSubscriber=function(a){__extends(s,a);function s(d,c,h){var b=a.call(this,d)||this;return b.openings=c,b.closingSelector=h,b.contexts=[],b.add(b.openSubscription=subscribeToResult(b,c,c)),b}return s.prototype._next=function(d){var c=this.contexts;if(c)for(var h=c.length,b=0;b<h;b++)c[b].window.next(d)},s.prototype._error=function(d){var c=this.contexts;if(this.contexts=null,c)for(var h=c.length,b=-1;++b<h;){var _=c[b];_.window.error(d),_.subscription.unsubscribe()}a.prototype._error.call(this,d)},s.prototype._complete=function(){var d=this.contexts;if(this.contexts=null,d)for(var c=d.length,h=-1;++h<c;){var b=d[h];b.window.complete(),b.subscription.unsubscribe()}a.prototype._complete.call(this)},s.prototype._unsubscribe=function(){var d=this.contexts;if(this.contexts=null,d)for(var c=d.length,h=-1;++h<c;){var b=d[h];b.window.unsubscribe(),b.subscription.unsubscribe()}},s.prototype.notifyNext=function(d,c,h,b,_){if(d===this.openings){var $=void 0;try{var _e=this.closingSelector;$=_e(c)}catch(st){return this.error(st)}var tt=new Subject,rt=new Subscription,ot={window:tt,subscription:rt};this.contexts.push(ot);var it=subscribeToResult(this,$,ot);it.closed?this.closeWindow(this.contexts.length-1):(it.context=ot,rt.add(it)),this.destination.next(tt)}else this.closeWindow(this.contexts.indexOf(d))},s.prototype.notifyError=function(d){this.error(d)},s.prototype.notifyComplete=function(d){d!==this.openSubscription&&this.closeWindow(this.contexts.indexOf(d.context))},s.prototype.closeWindow=function(d){if(d!==-1){var c=this.contexts,h=c[d],b=h.window,_=h.subscription;c.splice(d,1),b.complete(),_.unsubscribe()}},s}(OuterSubscriber);function windowWhen(a){return function(d){return d.lift(new WindowOperator(a))}}var WindowOperator=function(){function a(s){this.closingSelector=s}return a.prototype.call=function(s,d){return d.subscribe(new WindowSubscriber(s,this.closingSelector))},a}(),WindowSubscriber=function(a){__extends(s,a);function s(d,c){var h=a.call(this,d)||this;return h.destination=d,h.closingSelector=c,h.openWindow(),h}return s.prototype.notifyNext=function(d,c,h,b,_){this.openWindow(_)},s.prototype.notifyError=function(d){this._error(d)},s.prototype.notifyComplete=function(d){this.openWindow(d)},s.prototype._next=function(d){this.window.next(d)},s.prototype._error=function(d){this.window.error(d),this.destination.error(d),this.unsubscribeClosingNotification()},s.prototype._complete=function(){this.window.complete(),this.destination.complete(),this.unsubscribeClosingNotification()},s.prototype.unsubscribeClosingNotification=function(){this.closingNotification&&this.closingNotification.unsubscribe()},s.prototype.openWindow=function(d){d===void 0&&(d=null),d&&(this.remove(d),d.unsubscribe());var c=this.window;c&&c.complete();var h=this.window=new Subject;this.destination.next(h);var b;try{var _=this.closingSelector;b=_()}catch($){this.destination.error($),this.window.error($);return}this.add(this.closingNotification=subscribeToResult(this,b))},s}(OuterSubscriber);function withLatestFrom(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];return function(d){var c;typeof a[a.length-1]=="function"&&(c=a.pop());var h=a;return d.lift(new WithLatestFromOperator(h,c))}}var WithLatestFromOperator=function(){function a(s,d){this.observables=s,this.project=d}return a.prototype.call=function(s,d){return d.subscribe(new WithLatestFromSubscriber(s,this.observables,this.project))},a}(),WithLatestFromSubscriber=function(a){__extends(s,a);function s(d,c,h){var b=a.call(this,d)||this;b.observables=c,b.project=h,b.toRespond=[];var _=c.length;b.values=new Array(_);for(var $=0;$<_;$++)b.toRespond.push($);for(var $=0;$<_;$++){var _e=c[$];b.add(subscribeToResult(b,_e,void 0,$))}return b}return s.prototype.notifyNext=function(d,c,h){this.values[h]=c;var b=this.toRespond;if(b.length>0){var _=b.indexOf(h);_!==-1&&b.splice(_,1)}},s.prototype.notifyComplete=function(){},s.prototype._next=function(d){if(this.toRespond.length===0){var c=[d].concat(this.values);this.project?this._tryProject(c):this.destination.next(c)}},s.prototype._tryProject=function(d){var c;try{c=this.project.apply(this,d)}catch(h){this.destination.error(h);return}this.destination.next(c)},s}(OuterSubscriber);function zip$1(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];var d=a[a.length-1];return typeof d=="function"&&a.pop(),fromArray(a,void 0).lift(new ZipOperator(d))}var ZipOperator=function(){function a(s){this.resultSelector=s}return a.prototype.call=function(s,d){return d.subscribe(new ZipSubscriber(s,this.resultSelector))},a}(),ZipSubscriber=function(a){__extends(s,a);function s(d,c,h){var b=a.call(this,d)||this;return b.resultSelector=c,b.iterators=[],b.active=0,b.resultSelector=typeof c=="function"?c:void 0,b}return s.prototype._next=function(d){var c=this.iterators;isArray$2(d)?c.push(new StaticArrayIterator(d)):typeof d[iterator]=="function"?c.push(new StaticIterator(d[iterator]())):c.push(new ZipBufferIterator(this.destination,this,d))},s.prototype._complete=function(){var d=this.iterators,c=d.length;if(this.unsubscribe(),c===0){this.destination.complete();return}this.active=c;for(var h=0;h<c;h++){var b=d[h];if(b.stillUnsubscribed){var _=this.destination;_.add(b.subscribe())}else this.active--}},s.prototype.notifyInactive=function(){this.active--,this.active===0&&this.destination.complete()},s.prototype.checkIterators=function(){for(var d=this.iterators,c=d.length,h=this.destination,b=0;b<c;b++){var _=d[b];if(typeof _.hasValue=="function"&&!_.hasValue())return}for(var $=!1,_e=[],b=0;b<c;b++){var _=d[b],tt=_.next();if(_.hasCompleted()&&($=!0),tt.done){h.complete();return}_e.push(tt.value)}this.resultSelector?this._tryresultSelector(_e):h.next(_e),$&&h.complete()},s.prototype._tryresultSelector=function(d){var c;try{c=this.resultSelector.apply(this,d)}catch(h){this.destination.error(h);return}this.destination.next(c)},s}(Subscriber),StaticIterator=function(){function a(s){this.iterator=s,this.nextResult=s.next()}return a.prototype.hasValue=function(){return!0},a.prototype.next=function(){var s=this.nextResult;return this.nextResult=this.iterator.next(),s},a.prototype.hasCompleted=function(){var s=this.nextResult;return Boolean(s&&s.done)},a}(),StaticArrayIterator=function(){function a(s){this.array=s,this.index=0,this.length=0,this.length=s.length}return a.prototype[iterator]=function(){return this},a.prototype.next=function(s){var d=this.index++,c=this.array;return d<this.length?{value:c[d],done:!1}:{value:null,done:!0}},a.prototype.hasValue=function(){return this.array.length>this.index},a.prototype.hasCompleted=function(){return this.array.length===this.index},a}(),ZipBufferIterator=function(a){__extends(s,a);function s(d,c,h){var b=a.call(this,d)||this;return b.parent=c,b.observable=h,b.stillUnsubscribed=!0,b.buffer=[],b.isComplete=!1,b}return s.prototype[iterator]=function(){return this},s.prototype.next=function(){var d=this.buffer;return d.length===0&&this.isComplete?{value:null,done:!0}:{value:d.shift(),done:!1}},s.prototype.hasValue=function(){return this.buffer.length>0},s.prototype.hasCompleted=function(){return this.buffer.length===0&&this.isComplete},s.prototype.notifyComplete=function(){this.buffer.length>0?(this.isComplete=!0,this.parent.notifyInactive()):this.destination.complete()},s.prototype.notifyNext=function(d){this.buffer.push(d),this.parent.checkIterators()},s.prototype.subscribe=function(){return innerSubscribe(this.observable,new SimpleInnerSubscriber(this))},s}(SimpleOuterSubscriber);function zip(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];return function(c){return c.lift.call(zip$1.apply(void 0,[c].concat(a)))}}function zipAll(a){return function(s){return s.lift(new ZipOperator(a))}}var operators=Object.freeze(Object.defineProperty({__proto__:null,audit,auditTime,buffer,bufferCount,bufferTime,bufferToggle,bufferWhen,catchError,combineAll,combineLatest,concat,concatAll,concatMap,concatMapTo,count,debounce,debounceTime,defaultIfEmpty,delay,delayWhen,dematerialize,distinct,distinctUntilChanged,distinctUntilKeyChanged,elementAt,endWith,every,exhaust,exhaustMap,expand,filter,finalize,find:find$1,findIndex,first,groupBy,ignoreElements,isEmpty,last,map,mapTo,materialize,max,merge:merge$1,mergeAll,mergeMap,flatMap,mergeMapTo,mergeScan,min,multicast,observeOn,onErrorResumeNext,pairwise,partition,pluck,publish,publishBehavior,publishLast,publishReplay,race,reduce,repeat,repeatWhen,retry,retryWhen,refCount,sample,sampleTime,scan,sequenceEqual,share,shareReplay,single,skip,skipLast,skipUntil,skipWhile,startWith,subscribeOn,switchAll,switchMap,switchMapTo,take,takeLast,takeUntil,takeWhile,tap,throttle,throttleTime,throwIfEmpty,timeInterval,timeout,timeoutWith,timestamp,toArray,window:window$1,windowCount,windowTime,windowToggle,windowWhen,withLatestFrom,zip,zipAll},Symbol.toStringTag,{value:"Module"})),require$$2=getAugmentedNamespace(operators),struct={};(function(a){var s=commonjsGlobal$1&&commonjsGlobal$1.__createBinding||(Object.create?function(nt,ct,mt,kt){kt===void 0&&(kt=mt),Object.defineProperty(nt,kt,{enumerable:!0,get:function(){return ct[mt]}})}:function(nt,ct,mt,kt){kt===void 0&&(kt=mt),nt[kt]=ct[mt]}),d=commonjsGlobal$1&&commonjsGlobal$1.__setModuleDefault||(Object.create?function(nt,ct){Object.defineProperty(nt,"default",{enumerable:!0,value:ct})}:function(nt,ct){nt.default=ct}),c=commonjsGlobal$1&&commonjsGlobal$1.__importStar||function(nt){if(nt&&nt.__esModule)return nt;var ct={};if(nt!=null)for(var mt in nt)mt!=="default"&&Object.hasOwnProperty.call(nt,mt)&&s(ct,nt,mt);return d(ct,nt),ct},h=commonjsGlobal$1&&commonjsGlobal$1.__importDefault||function(nt){return nt&&nt.__esModule?nt:{default:nt}};Object.defineProperty(a,"__esModule",{value:!0}),a.ListValue=a.Value=a.Struct_FieldsEntry=a.Struct=a.nullValueToNumber=a.nullValueToJSON=a.nullValueFromJSON=a.NullValue=a.protobufPackage=void 0;const b=h(umd.exports),_=c(minimal$2);a.protobufPackage="google.protobuf";var $;(function(nt){nt.NULL_VALUE="NULL_VALUE"})($=a.NullValue||(a.NullValue={}));function _e(nt){switch(nt){case 0:case"NULL_VALUE":return $.NULL_VALUE;default:throw new dt.Error("Unrecognized enum value "+nt+" for enum NullValue")}}a.nullValueFromJSON=_e;function tt(nt){switch(nt){case $.NULL_VALUE:return"NULL_VALUE";default:return"UNKNOWN"}}a.nullValueToJSON=tt;function rt(nt){switch(nt){case $.NULL_VALUE:return 0;default:return 0}}a.nullValueToNumber=rt;function ot(){return{fields:{}}}a.Struct={encode(nt,ct=_.Writer.create()){return Object.entries(nt.fields).forEach(([mt,kt])=>{kt!==void 0&&a.Struct_FieldsEntry.encode({key:mt,value:kt},ct.uint32(10).fork()).ldelim()}),ct},decode(nt,ct){const mt=nt instanceof _.Reader?nt:new _.Reader(nt);let kt=ct===void 0?mt.len:mt.pos+ct;const Tt=ot();for(;mt.pos<kt;){const Pt=mt.uint32();switch(Pt>>>3){case 1:const At=a.Struct_FieldsEntry.decode(mt,mt.uint32());At.value!==void 0&&(Tt.fields[At.key]=At.value);break;default:mt.skipType(Pt&7);break}}return Tt},fromJSON(nt){return{fields:ut(nt.fields)?Object.entries(nt.fields).reduce((ct,[mt,kt])=>(ct[mt]=kt,ct),{}):{}}},toJSON(nt){const ct={};return ct.fields={},nt.fields&&Object.entries(nt.fields).forEach(([mt,kt])=>{ct.fields[mt]=kt}),ct},fromPartial(nt){var ct;const mt=ot();return mt.fields=Object.entries((ct=nt.fields)!==null&&ct!==void 0?ct:{}).reduce((kt,[Tt,Pt])=>(Pt!==void 0&&(kt[Tt]=Pt),kt),{}),mt},wrap(nt){const ct=ot();return nt!==void 0&&Object.keys(nt).forEach(mt=>{ct.fields[mt]=nt[mt]}),ct},unwrap(nt){const ct={};return Object.keys(nt.fields).forEach(mt=>{ct[mt]=nt.fields[mt]}),ct}};function it(){return{key:"",value:void 0}}a.Struct_FieldsEntry={encode(nt,ct=_.Writer.create()){return nt.key!==""&&ct.uint32(10).string(nt.key),nt.value!==void 0&&a.Value.encode(a.Value.wrap(nt.value),ct.uint32(18).fork()).ldelim(),ct},decode(nt,ct){const mt=nt instanceof _.Reader?nt:new _.Reader(nt);let kt=ct===void 0?mt.len:mt.pos+ct;const Tt=it();for(;mt.pos<kt;){const Pt=mt.uint32();switch(Pt>>>3){case 1:Tt.key=mt.string();break;case 2:Tt.value=a.Value.unwrap(a.Value.decode(mt,mt.uint32()));break;default:mt.skipType(Pt&7);break}}return Tt},fromJSON(nt){return{key:ht(nt.key)?String(nt.key):"",value:ht(nt==null?void 0:nt.value)?nt.value:void 0}},toJSON(nt){const ct={};return nt.key!==void 0&&(ct.key=nt.key),nt.value!==void 0&&(ct.value=nt.value),ct},fromPartial(nt){var ct,mt;const kt=it();return kt.key=(ct=nt.key)!==null&&ct!==void 0?ct:"",kt.value=(mt=nt.value)!==null&&mt!==void 0?mt:void 0,kt}};function st(){return{nullValue:void 0,numberValue:void 0,stringValue:void 0,boolValue:void 0,structValue:void 0,listValue:void 0}}a.Value={encode(nt,ct=_.Writer.create()){return nt.nullValue!==void 0&&ct.uint32(8).int32(rt(nt.nullValue)),nt.numberValue!==void 0&&ct.uint32(17).double(nt.numberValue),nt.stringValue!==void 0&&ct.uint32(26).string(nt.stringValue),nt.boolValue!==void 0&&ct.uint32(32).bool(nt.boolValue),nt.structValue!==void 0&&a.Struct.encode(a.Struct.wrap(nt.structValue),ct.uint32(42).fork()).ldelim(),nt.listValue!==void 0&&a.ListValue.encode(a.ListValue.wrap(nt.listValue),ct.uint32(50).fork()).ldelim(),ct},decode(nt,ct){const mt=nt instanceof _.Reader?nt:new _.Reader(nt);let kt=ct===void 0?mt.len:mt.pos+ct;const Tt=st();for(;mt.pos<kt;){const Pt=mt.uint32();switch(Pt>>>3){case 1:Tt.nullValue=_e(mt.int32());break;case 2:Tt.numberValue=mt.double();break;case 3:Tt.stringValue=mt.string();break;case 4:Tt.boolValue=mt.bool();break;case 5:Tt.structValue=a.Struct.unwrap(a.Struct.decode(mt,mt.uint32()));break;case 6:Tt.listValue=a.ListValue.unwrap(a.ListValue.decode(mt,mt.uint32()));break;default:mt.skipType(Pt&7);break}}return Tt},fromJSON(nt){return{nullValue:ht(nt.nullValue)?_e(nt.nullValue):void 0,numberValue:ht(nt.numberValue)?Number(nt.numberValue):void 0,stringValue:ht(nt.stringValue)?String(nt.stringValue):void 0,boolValue:ht(nt.boolValue)?Boolean(nt.boolValue):void 0,structValue:ut(nt.structValue)?nt.structValue:void 0,listValue:Array.isArray(nt.listValue)?[...nt.listValue]:void 0}},toJSON(nt){const ct={};return nt.nullValue!==void 0&&(ct.nullValue=nt.nullValue!==void 0?tt(nt.nullValue):void 0),nt.numberValue!==void 0&&(ct.numberValue=nt.numberValue),nt.stringValue!==void 0&&(ct.stringValue=nt.stringValue),nt.boolValue!==void 0&&(ct.boolValue=nt.boolValue),nt.structValue!==void 0&&(ct.structValue=nt.structValue),nt.listValue!==void 0&&(ct.listValue=nt.listValue),ct},fromPartial(nt){var ct,mt,kt,Tt,Pt,At;const gt=st();return gt.nullValue=(ct=nt.nullValue)!==null&&ct!==void 0?ct:void 0,gt.numberValue=(mt=nt.numberValue)!==null&&mt!==void 0?mt:void 0,gt.stringValue=(kt=nt.stringValue)!==null&&kt!==void 0?kt:void 0,gt.boolValue=(Tt=nt.boolValue)!==null&&Tt!==void 0?Tt:void 0,gt.structValue=(Pt=nt.structValue)!==null&&Pt!==void 0?Pt:void 0,gt.listValue=(At=nt.listValue)!==null&&At!==void 0?At:void 0,gt},wrap(nt){const ct=st();if(nt===null)ct.nullValue=$.NULL_VALUE;else if(typeof nt=="boolean")ct.boolValue=nt;else if(typeof nt=="number")ct.numberValue=nt;else if(typeof nt=="string")ct.stringValue=nt;else if(Array.isArray(nt))ct.listValue=nt;else if(typeof nt=="object")ct.structValue=nt;else if(typeof nt!="undefined")throw new Error("Unsupported any value type: "+typeof nt);return ct},unwrap(nt){if((nt==null?void 0:nt.stringValue)!==void 0)return nt.stringValue;if((nt==null?void 0:nt.numberValue)!==void 0)return nt.numberValue;if((nt==null?void 0:nt.boolValue)!==void 0)return nt.boolValue;if((nt==null?void 0:nt.structValue)!==void 0)return nt.structValue;if((nt==null?void 0:nt.listValue)!==void 0)return nt.listValue;if((nt==null?void 0:nt.nullValue)!==void 0)return null}};function lt(){return{values:[]}}a.ListValue={encode(nt,ct=_.Writer.create()){for(const mt of nt.values)a.Value.encode(a.Value.wrap(mt),ct.uint32(10).fork()).ldelim();return ct},decode(nt,ct){const mt=nt instanceof _.Reader?nt:new _.Reader(nt);let kt=ct===void 0?mt.len:mt.pos+ct;const Tt=lt();for(;mt.pos<kt;){const Pt=mt.uint32();switch(Pt>>>3){case 1:Tt.values.push(a.Value.unwrap(a.Value.decode(mt,mt.uint32())));break;default:mt.skipType(Pt&7);break}}return Tt},fromJSON(nt){return{values:Array.isArray(nt==null?void 0:nt.values)?[...nt.values]:[]}},toJSON(nt){const ct={};return nt.values?ct.values=nt.values.map(mt=>mt):ct.values=[],ct},fromPartial(nt){var ct;const mt=lt();return mt.values=((ct=nt.values)===null||ct===void 0?void 0:ct.map(kt=>kt))||[],mt},wrap(nt){const ct=lt();return ct.values=nt!=null?nt:[],ct},unwrap(nt){return nt.values}};var dt=(()=>{if(typeof dt!="undefined")return dt;if(typeof self!="undefined")return self;if(typeof window!="undefined")return window;if(typeof commonjsGlobal$1!="undefined")return commonjsGlobal$1;throw"Unable to locate global object"})();_.util.Long!==b.default&&(_.util.Long=b.default,_.configure());function ut(nt){return typeof nt=="object"&&nt!==null}function ht(nt){return nt!=null}})(struct);(function(a){var s=commonjsGlobal$1&&commonjsGlobal$1.__createBinding||(Object.create?function(gt,Ct,Nt,vt){vt===void 0&&(vt=Nt),Object.defineProperty(gt,vt,{enumerable:!0,get:function(){return Ct[Nt]}})}:function(gt,Ct,Nt,vt){vt===void 0&&(vt=Nt),gt[vt]=Ct[Nt]}),d=commonjsGlobal$1&&commonjsGlobal$1.__setModuleDefault||(Object.create?function(gt,Ct){Object.defineProperty(gt,"default",{enumerable:!0,value:Ct})}:function(gt,Ct){gt.default=Ct}),c=commonjsGlobal$1&&commonjsGlobal$1.__importStar||function(gt){if(gt&&gt.__esModule)return gt;var Ct={};if(gt!=null)for(var Nt in gt)Nt!=="default"&&Object.hasOwnProperty.call(gt,Nt)&&s(Ct,gt,Nt);return d(Ct,gt),Ct},h=commonjsGlobal$1&&commonjsGlobal$1.__importDefault||function(gt){return gt&&gt.__esModule?gt:{default:gt}};Object.defineProperty(a,"__esModule",{value:!0}),a.EventServiceDefinition=a.EventServiceClientImpl=a.EventsStreamResponse=a.EventsStreamRequest=a.EventsStreamReconnectRequest=a.EventsStreamError=a.SubscribePayload=a.PublishEventResponse=a.PublishEventRequest=a.EventTarget=a.eventsStreamMessageTypeToNumber=a.eventsStreamMessageTypeToJSON=a.eventsStreamMessageTypeFromJSON=a.EventsStreamMessageType=a.protobufPackage=void 0;const b=h(umd.exports),_=c(minimal$2),$=require$$2,_e=struct;a.protobufPackage="apis.event.v2";var tt;(function(gt){gt.EVENTS_STREAM_MESSAGE_TYPE_UNSPECIFIED="EVENTS_STREAM_MESSAGE_TYPE_UNSPECIFIED",gt.EVENTS_STREAM_MESSAGE_TYPE_PING="EVENTS_STREAM_MESSAGE_TYPE_PING",gt.EVENTS_STREAM_MESSAGE_TYPE_ERROR="EVENTS_STREAM_MESSAGE_TYPE_ERROR",gt.EVENTS_STREAM_MESSAGE_TYPE_SUBSCRIBED="EVENTS_STREAM_MESSAGE_TYPE_SUBSCRIBED",gt.EVENTS_STREAM_MESSAGE_TYPE_UNSUBSCRIBED="EVENTS_STREAM_MESSAGE_TYPE_UNSUBSCRIBED",gt.EVENTS_STREAM_MESSAGE_TYPE_PUBLISHED="EVENTS_STREAM_MESSAGE_TYPE_PUBLISHED"})(tt=a.EventsStreamMessageType||(a.EventsStreamMessageType={}));function rt(gt){switch(gt){case 0:case"EVENTS_STREAM_MESSAGE_TYPE_UNSPECIFIED":return tt.EVENTS_STREAM_MESSAGE_TYPE_UNSPECIFIED;case 1:case"EVENTS_STREAM_MESSAGE_TYPE_PING":return tt.EVENTS_STREAM_MESSAGE_TYPE_PING;case 2:case"EVENTS_STREAM_MESSAGE_TYPE_ERROR":return tt.EVENTS_STREAM_MESSAGE_TYPE_ERROR;case 3:case"EVENTS_STREAM_MESSAGE_TYPE_SUBSCRIBED":return tt.EVENTS_STREAM_MESSAGE_TYPE_SUBSCRIBED;case 4:case"EVENTS_STREAM_MESSAGE_TYPE_UNSUBSCRIBED":return tt.EVENTS_STREAM_MESSAGE_TYPE_UNSUBSCRIBED;case 5:case"EVENTS_STREAM_MESSAGE_TYPE_PUBLISHED":return tt.EVENTS_STREAM_MESSAGE_TYPE_PUBLISHED;default:throw new Tt.Error("Unrecognized enum value "+gt+" for enum EventsStreamMessageType")}}a.eventsStreamMessageTypeFromJSON=rt;function ot(gt){switch(gt){case tt.EVENTS_STREAM_MESSAGE_TYPE_UNSPECIFIED:return"EVENTS_STREAM_MESSAGE_TYPE_UNSPECIFIED";case tt.EVENTS_STREAM_MESSAGE_TYPE_PING:return"EVENTS_STREAM_MESSAGE_TYPE_PING";case tt.EVENTS_STREAM_MESSAGE_TYPE_ERROR:return"EVENTS_STREAM_MESSAGE_TYPE_ERROR";case tt.EVENTS_STREAM_MESSAGE_TYPE_SUBSCRIBED:return"EVENTS_STREAM_MESSAGE_TYPE_SUBSCRIBED";case tt.EVENTS_STREAM_MESSAGE_TYPE_UNSUBSCRIBED:return"EVENTS_STREAM_MESSAGE_TYPE_UNSUBSCRIBED";case tt.EVENTS_STREAM_MESSAGE_TYPE_PUBLISHED:return"EVENTS_STREAM_MESSAGE_TYPE_PUBLISHED";default:return"UNKNOWN"}}a.eventsStreamMessageTypeToJSON=ot;function it(gt){switch(gt){case tt.EVENTS_STREAM_MESSAGE_TYPE_UNSPECIFIED:return 0;case tt.EVENTS_STREAM_MESSAGE_TYPE_PING:return 1;case tt.EVENTS_STREAM_MESSAGE_TYPE_ERROR:return 2;case tt.EVENTS_STREAM_MESSAGE_TYPE_SUBSCRIBED:return 3;case tt.EVENTS_STREAM_MESSAGE_TYPE_UNSUBSCRIBED:return 4;case tt.EVENTS_STREAM_MESSAGE_TYPE_PUBLISHED:return 5;default:return 0}}a.eventsStreamMessageTypeToNumber=it;function st(){return{collectionId:void 0,projectId:void 0,layoutId:void 0}}a.EventTarget={encode(gt,Ct=_.Writer.create()){return gt.collectionId!==void 0&&Ct.uint32(42).string(gt.collectionId),gt.projectId!==void 0&&Ct.uint32(34).string(gt.projectId),gt.layoutId!==void 0&&Ct.uint32(10).string(gt.layoutId),Ct},decode(gt,Ct){const Nt=gt instanceof _.Reader?gt:new _.Reader(gt);let vt=Ct===void 0?Nt.len:Nt.pos+Ct;const Et=st();for(;Nt.pos<vt;){const It=Nt.uint32();switch(It>>>3){case 5:Et.collectionId=Nt.string();break;case 4:Et.projectId=Nt.string();break;case 1:Et.layoutId=Nt.string();break;default:Nt.skipType(It&7);break}}return Et},fromJSON(gt){return{collectionId:At(gt.collectionId)?String(gt.collectionId):void 0,projectId:At(gt.projectId)?String(gt.projectId):void 0,layoutId:At(gt.layoutId)?String(gt.layoutId):void 0}},toJSON(gt){const Ct={};return gt.collectionId!==void 0&&(Ct.collectionId=gt.collectionId),gt.projectId!==void 0&&(Ct.projectId=gt.projectId),gt.layoutId!==void 0&&(Ct.layoutId=gt.layoutId),Ct},fromPartial(gt){var Ct,Nt,vt;const Et=st();return Et.collectionId=(Ct=gt.collectionId)!==null&&Ct!==void 0?Ct:void 0,Et.projectId=(Nt=gt.projectId)!==null&&Nt!==void 0?Nt:void 0,Et.layoutId=(vt=gt.layoutId)!==null&&vt!==void 0?vt:void 0,Et}};function lt(){return{name:"",payload:void 0,requestMetadata:void 0,target:void 0}}a.PublishEventRequest={encode(gt,Ct=_.Writer.create()){return gt.name!==""&&Ct.uint32(10).string(gt.name),gt.payload!==void 0&&_e.Struct.encode(_e.Struct.wrap(gt.payload),Ct.uint32(18).fork()).ldelim(),gt.requestMetadata!==void 0&&_e.Value.encode(_e.Value.wrap(gt.requestMetadata),Ct.uint32(34).fork()).ldelim(),gt.target!==void 0&&a.EventTarget.encode(gt.target,Ct.uint32(26).fork()).ldelim(),Ct},decode(gt,Ct){const Nt=gt instanceof _.Reader?gt:new _.Reader(gt);let vt=Ct===void 0?Nt.len:Nt.pos+Ct;const Et=lt();for(;Nt.pos<vt;){const It=Nt.uint32();switch(It>>>3){case 1:Et.name=Nt.string();break;case 2:Et.payload=_e.Struct.unwrap(_e.Struct.decode(Nt,Nt.uint32()));break;case 4:Et.requestMetadata=_e.Value.unwrap(_e.Value.decode(Nt,Nt.uint32()));break;case 3:Et.target=a.EventTarget.decode(Nt,Nt.uint32());break;default:Nt.skipType(It&7);break}}return Et},fromJSON(gt){return{name:At(gt.name)?String(gt.name):"",payload:Pt(gt.payload)?gt.payload:void 0,requestMetadata:At(gt==null?void 0:gt.requestMetadata)?gt.requestMetadata:void 0,target:At(gt.target)?a.EventTarget.fromJSON(gt.target):void 0}},toJSON(gt){const Ct={};return gt.name!==void 0&&(Ct.name=gt.name),gt.payload!==void 0&&(Ct.payload=gt.payload),gt.requestMetadata!==void 0&&(Ct.requestMetadata=gt.requestMetadata),gt.target!==void 0&&(Ct.target=gt.target?a.EventTarget.toJSON(gt.target):void 0),Ct},fromPartial(gt){var Ct,Nt,vt;const Et=lt();return Et.name=(Ct=gt.name)!==null&&Ct!==void 0?Ct:"",Et.payload=(Nt=gt.payload)!==null&&Nt!==void 0?Nt:void 0,Et.requestMetadata=(vt=gt.requestMetadata)!==null&&vt!==void 0?vt:void 0,Et.target=gt.target!==void 0&&gt.target!==null?a.EventTarget.fromPartial(gt.target):void 0,Et}};function dt(){return{name:"",payload:void 0,target:void 0,requestMetadata:void 0,id:""}}a.PublishEventResponse={encode(gt,Ct=_.Writer.create()){return gt.name!==""&&Ct.uint32(10).string(gt.name),gt.payload!==void 0&&_e.Struct.encode(_e.Struct.wrap(gt.payload),Ct.uint32(18).fork()).ldelim(),gt.target!==void 0&&a.EventTarget.encode(gt.target,Ct.uint32(26).fork()).ldelim(),gt.requestMetadata!==void 0&&_e.Value.encode(_e.Value.wrap(gt.requestMetadata),Ct.uint32(34).fork()).ldelim(),gt.id!==""&&Ct.uint32(42).string(gt.id),Ct},decode(gt,Ct){const Nt=gt instanceof _.Reader?gt:new _.Reader(gt);let vt=Ct===void 0?Nt.len:Nt.pos+Ct;const Et=dt();for(;Nt.pos<vt;){const It=Nt.uint32();switch(It>>>3){case 1:Et.name=Nt.string();break;case 2:Et.payload=_e.Struct.unwrap(_e.Struct.decode(Nt,Nt.uint32()));break;case 3:Et.target=a.EventTarget.decode(Nt,Nt.uint32());break;case 4:Et.requestMetadata=_e.Value.unwrap(_e.Value.decode(Nt,Nt.uint32()));break;case 5:Et.id=Nt.string();break;default:Nt.skipType(It&7);break}}return Et},fromJSON(gt){return{name:At(gt.name)?String(gt.name):"",payload:Pt(gt.payload)?gt.payload:void 0,target:At(gt.target)?a.EventTarget.fromJSON(gt.target):void 0,requestMetadata:At(gt==null?void 0:gt.requestMetadata)?gt.requestMetadata:void 0,id:At(gt.id)?String(gt.id):""}},toJSON(gt){const Ct={};return gt.name!==void 0&&(Ct.name=gt.name),gt.payload!==void 0&&(Ct.payload=gt.payload),gt.target!==void 0&&(Ct.target=gt.target?a.EventTarget.toJSON(gt.target):void 0),gt.requestMetadata!==void 0&&(Ct.requestMetadata=gt.requestMetadata),gt.id!==void 0&&(Ct.id=gt.id),Ct},fromPartial(gt){var Ct,Nt,vt,Et;const It=dt();return It.name=(Ct=gt.name)!==null&&Ct!==void 0?Ct:"",It.payload=(Nt=gt.payload)!==null&&Nt!==void 0?Nt:void 0,It.target=gt.target!==void 0&&gt.target!==null?a.EventTarget.fromPartial(gt.target):void 0,It.requestMetadata=(vt=gt.requestMetadata)!==null&&vt!==void 0?vt:void 0,It.id=(Et=gt.id)!==null&&Et!==void 0?Et:"",It}};function ut(){return{name:"",target:void 0}}a.SubscribePayload={encode(gt,Ct=_.Writer.create()){return gt.name!==""&&Ct.uint32(10).string(gt.name),gt.target!==void 0&&a.EventTarget.encode(gt.target,Ct.uint32(18).fork()).ldelim(),Ct},decode(gt,Ct){const Nt=gt instanceof _.Reader?gt:new _.Reader(gt);let vt=Ct===void 0?Nt.len:Nt.pos+Ct;const Et=ut();for(;Nt.pos<vt;){const It=Nt.uint32();switch(It>>>3){case 1:Et.name=Nt.string();break;case 2:Et.target=a.EventTarget.decode(Nt,Nt.uint32());break;default:Nt.skipType(It&7);break}}return Et},fromJSON(gt){return{name:At(gt.name)?String(gt.name):"",target:At(gt.target)?a.EventTarget.fromJSON(gt.target):void 0}},toJSON(gt){const Ct={};return gt.name!==void 0&&(Ct.name=gt.name),gt.target!==void 0&&(Ct.target=gt.target?a.EventTarget.toJSON(gt.target):void 0),Ct},fromPartial(gt){var Ct;const Nt=ut();return Nt.name=(Ct=gt.name)!==null&&Ct!==void 0?Ct:"",Nt.target=gt.target!==void 0&&gt.target!==null?a.EventTarget.fromPartial(gt.target):void 0,Nt}};function ht(){return{code:0,message:""}}a.EventsStreamError={encode(gt,Ct=_.Writer.create()){return gt.code!==0&&Ct.uint32(8).int32(gt.code),gt.message!==""&&Ct.uint32(18).string(gt.message),Ct},decode(gt,Ct){const Nt=gt instanceof _.Reader?gt:new _.Reader(gt);let vt=Ct===void 0?Nt.len:Nt.pos+Ct;const Et=ht();for(;Nt.pos<vt;){const It=Nt.uint32();switch(It>>>3){case 1:Et.code=Nt.int32();break;case 2:Et.message=Nt.string();break;default:Nt.skipType(It&7);break}}return Et},fromJSON(gt){return{code:At(gt.code)?Number(gt.code):0,message:At(gt.message)?String(gt.message):""}},toJSON(gt){const Ct={};return gt.code!==void 0&&(Ct.code=Math.round(gt.code)),gt.message!==void 0&&(Ct.message=gt.message),Ct},fromPartial(gt){var Ct,Nt;const vt=ht();return vt.code=(Ct=gt.code)!==null&&Ct!==void 0?Ct:0,vt.message=(Nt=gt.message)!==null&&Nt!==void 0?Nt:"",vt}};function nt(){return{reauthenticate:!1,beforeTimestamp:""}}a.EventsStreamReconnectRequest={encode(gt,Ct=_.Writer.create()){return gt.reauthenticate===!0&&Ct.uint32(8).bool(gt.reauthenticate),gt.beforeTimestamp!==""&&Ct.uint32(18).string(gt.beforeTimestamp),Ct},decode(gt,Ct){const Nt=gt instanceof _.Reader?gt:new _.Reader(gt);let vt=Ct===void 0?Nt.len:Nt.pos+Ct;const Et=nt();for(;Nt.pos<vt;){const It=Nt.uint32();switch(It>>>3){case 1:Et.reauthenticate=Nt.bool();break;case 2:Et.beforeTimestamp=Nt.string();break;default:Nt.skipType(It&7);break}}return Et},fromJSON(gt){return{reauthenticate:At(gt.reauthenticate)?Boolean(gt.reauthenticate):!1,beforeTimestamp:At(gt.beforeTimestamp)?String(gt.beforeTimestamp):""}},toJSON(gt){const Ct={};return gt.reauthenticate!==void 0&&(Ct.reauthenticate=gt.reauthenticate),gt.beforeTimestamp!==void 0&&(Ct.beforeTimestamp=gt.beforeTimestamp),Ct},fromPartial(gt){var Ct,Nt;const vt=nt();return vt.reauthenticate=(Ct=gt.reauthenticate)!==null&&Ct!==void 0?Ct:!1,vt.beforeTimestamp=(Nt=gt.beforeTimestamp)!==null&&Nt!==void 0?Nt:"",vt}};function ct(){return{correlationId:void 0,subscribe:void 0,unsubscribe:void 0,publish:void 0,ping:void 0}}a.EventsStreamRequest={encode(gt,Ct=_.Writer.create()){return gt.correlationId!==void 0&&Ct.uint32(10).string(gt.correlationId),gt.subscribe!==void 0&&a.SubscribePayload.encode(gt.subscribe,Ct.uint32(802).fork()).ldelim(),gt.unsubscribe!==void 0&&a.SubscribePayload.encode(gt.unsubscribe,Ct.uint32(810).fork()).ldelim(),gt.publish!==void 0&&a.PublishEventRequest.encode(gt.publish,Ct.uint32(818).fork()).ldelim(),gt.ping!==void 0&&Ct.uint32(826).string(gt.ping),Ct},decode(gt,Ct){const Nt=gt instanceof _.Reader?gt:new _.Reader(gt);let vt=Ct===void 0?Nt.len:Nt.pos+Ct;const Et=ct();for(;Nt.pos<vt;){const It=Nt.uint32();switch(It>>>3){case 1:Et.correlationId=Nt.string();break;case 100:Et.subscribe=a.SubscribePayload.decode(Nt,Nt.uint32());break;case 101:Et.unsubscribe=a.SubscribePayload.decode(Nt,Nt.uint32());break;case 102:Et.publish=a.PublishEventRequest.decode(Nt,Nt.uint32());break;case 103:Et.ping=Nt.string();break;default:Nt.skipType(It&7);break}}return Et},fromJSON(gt){return{correlationId:At(gt.correlationId)?String(gt.correlationId):void 0,subscribe:At(gt.subscribe)?a.SubscribePayload.fromJSON(gt.subscribe):void 0,unsubscribe:At(gt.unsubscribe)?a.SubscribePayload.fromJSON(gt.unsubscribe):void 0,publish:At(gt.publish)?a.PublishEventRequest.fromJSON(gt.publish):void 0,ping:At(gt.ping)?String(gt.ping):void 0}},toJSON(gt){const Ct={};return gt.correlationId!==void 0&&(Ct.correlationId=gt.correlationId),gt.subscribe!==void 0&&(Ct.subscribe=gt.subscribe?a.SubscribePayload.toJSON(gt.subscribe):void 0),gt.unsubscribe!==void 0&&(Ct.unsubscribe=gt.unsubscribe?a.SubscribePayload.toJSON(gt.unsubscribe):void 0),gt.publish!==void 0&&(Ct.publish=gt.publish?a.PublishEventRequest.toJSON(gt.publish):void 0),gt.ping!==void 0&&(Ct.ping=gt.ping),Ct},fromPartial(gt){var Ct,Nt;const vt=ct();return vt.correlationId=(Ct=gt.correlationId)!==null&&Ct!==void 0?Ct:void 0,vt.subscribe=gt.subscribe!==void 0&&gt.subscribe!==null?a.SubscribePayload.fromPartial(gt.subscribe):void 0,vt.unsubscribe=gt.unsubscribe!==void 0&&gt.unsubscribe!==null?a.SubscribePayload.fromPartial(gt.unsubscribe):void 0,vt.publish=gt.publish!==void 0&&gt.publish!==null?a.PublishEventRequest.fromPartial(gt.publish):void 0,vt.ping=(Nt=gt.ping)!==null&&Nt!==void 0?Nt:void 0,vt}};function mt(){return{correlationId:void 0,sessionId:void 0,event:void 0,pong:void 0,error:void 0,subscribed:void 0,unsubscribed:void 0,published:void 0,reconnectBefore:void 0}}a.EventsStreamResponse={encode(gt,Ct=_.Writer.create()){return gt.correlationId!==void 0&&Ct.uint32(18).string(gt.correlationId),gt.sessionId!==void 0&&Ct.uint32(26).string(gt.sessionId),gt.event!==void 0&&a.PublishEventResponse.encode(gt.event,Ct.uint32(802).fork()).ldelim(),gt.pong!==void 0&&Ct.uint32(1602).string(gt.pong),gt.error!==void 0&&a.EventsStreamError.encode(gt.error,Ct.uint32(1610).fork()).ldelim(),gt.subscribed!==void 0&&a.SubscribePayload.encode(gt.subscribed,Ct.uint32(1618).fork()).ldelim(),gt.unsubscribed!==void 0&&a.SubscribePayload.encode(gt.unsubscribed,Ct.uint32(1626).fork()).ldelim(),gt.published!==void 0&&a.PublishEventResponse.encode(gt.published,Ct.uint32(1634).fork()).ldelim(),gt.reconnectBefore!==void 0&&a.EventsStreamReconnectRequest.encode(gt.reconnectBefore,Ct.uint32(1642).fork()).ldelim(),Ct},decode(gt,Ct){const Nt=gt instanceof _.Reader?gt:new _.Reader(gt);let vt=Ct===void 0?Nt.len:Nt.pos+Ct;const Et=mt();for(;Nt.pos<vt;){const It=Nt.uint32();switch(It>>>3){case 2:Et.correlationId=Nt.string();break;case 3:Et.sessionId=Nt.string();break;case 100:Et.event=a.PublishEventResponse.decode(Nt,Nt.uint32());break;case 200:Et.pong=Nt.string();break;case 201:Et.error=a.EventsStreamError.decode(Nt,Nt.uint32());break;case 202:Et.subscribed=a.SubscribePayload.decode(Nt,Nt.uint32());break;case 203:Et.unsubscribed=a.SubscribePayload.decode(Nt,Nt.uint32());break;case 204:Et.published=a.PublishEventResponse.decode(Nt,Nt.uint32());break;case 205:Et.reconnectBefore=a.EventsStreamReconnectRequest.decode(Nt,Nt.uint32());break;default:Nt.skipType(It&7);break}}return Et},fromJSON(gt){return{correlationId:At(gt.correlationId)?String(gt.correlationId):void 0,sessionId:At(gt.sessionId)?String(gt.sessionId):void 0,event:At(gt.event)?a.PublishEventResponse.fromJSON(gt.event):void 0,pong:At(gt.pong)?String(gt.pong):void 0,error:At(gt.error)?a.EventsStreamError.fromJSON(gt.error):void 0,subscribed:At(gt.subscribed)?a.SubscribePayload.fromJSON(gt.subscribed):void 0,unsubscribed:At(gt.unsubscribed)?a.SubscribePayload.fromJSON(gt.unsubscribed):void 0,published:At(gt.published)?a.PublishEventResponse.fromJSON(gt.published):void 0,reconnectBefore:At(gt.reconnectBefore)?a.EventsStreamReconnectRequest.fromJSON(gt.reconnectBefore):void 0}},toJSON(gt){const Ct={};return gt.correlationId!==void 0&&(Ct.correlationId=gt.correlationId),gt.sessionId!==void 0&&(Ct.sessionId=gt.sessionId),gt.event!==void 0&&(Ct.event=gt.event?a.PublishEventResponse.toJSON(gt.event):void 0),gt.pong!==void 0&&(Ct.pong=gt.pong),gt.error!==void 0&&(Ct.error=gt.error?a.EventsStreamError.toJSON(gt.error):void 0),gt.subscribed!==void 0&&(Ct.subscribed=gt.subscribed?a.SubscribePayload.toJSON(gt.subscribed):void 0),gt.unsubscribed!==void 0&&(Ct.unsubscribed=gt.unsubscribed?a.SubscribePayload.toJSON(gt.unsubscribed):void 0),gt.published!==void 0&&(Ct.published=gt.published?a.PublishEventResponse.toJSON(gt.published):void 0),gt.reconnectBefore!==void 0&&(Ct.reconnectBefore=gt.reconnectBefore?a.EventsStreamReconnectRequest.toJSON(gt.reconnectBefore):void 0),Ct},fromPartial(gt){var Ct,Nt,vt;const Et=mt();return Et.correlationId=(Ct=gt.correlationId)!==null&&Ct!==void 0?Ct:void 0,Et.sessionId=(Nt=gt.sessionId)!==null&&Nt!==void 0?Nt:void 0,Et.event=gt.event!==void 0&&gt.event!==null?a.PublishEventResponse.fromPartial(gt.event):void 0,Et.pong=(vt=gt.pong)!==null&&vt!==void 0?vt:void 0,Et.error=gt.error!==void 0&&gt.error!==null?a.EventsStreamError.fromPartial(gt.error):void 0,Et.subscribed=gt.subscribed!==void 0&&gt.subscribed!==null?a.SubscribePayload.fromPartial(gt.subscribed):void 0,Et.unsubscribed=gt.unsubscribed!==void 0&&gt.unsubscribed!==null?a.SubscribePayload.fromPartial(gt.unsubscribed):void 0,Et.published=gt.published!==void 0&&gt.published!==null?a.PublishEventResponse.fromPartial(gt.published):void 0,Et.reconnectBefore=gt.reconnectBefore!==void 0&&gt.reconnectBefore!==null?a.EventsStreamReconnectRequest.fromPartial(gt.reconnectBefore):void 0,Et}};class kt{constructor(Ct){this.rpc=Ct,this.Stream=this.Stream.bind(this),this.Publish=this.Publish.bind(this)}Stream(Ct){const Nt=Ct.pipe($.map(Et=>a.EventsStreamRequest.encode(Et).finish()));return this.rpc.bidirectionalStreamingRequest("apis.event.v2.EventService","Stream",Nt).pipe($.map(Et=>a.EventsStreamResponse.decode(new _.Reader(Et))))}Publish(Ct){const Nt=a.PublishEventRequest.encode(Ct).finish();return this.rpc.request("apis.event.v2.EventService","Publish",Nt).then(Et=>a.PublishEventResponse.decode(new _.Reader(Et)))}}a.EventServiceClientImpl=kt,a.EventServiceDefinition={name:"EventService",fullName:"apis.event.v2.EventService",methods:{stream:{name:"Stream",requestType:a.EventsStreamRequest,requestStream:!0,responseType:a.EventsStreamResponse,responseStream:!0,options:{}},publish:{name:"Publish",requestType:a.PublishEventRequest,requestStream:!1,responseType:a.PublishEventResponse,responseStream:!1,options:{}}}};var Tt=(()=>{if(typeof Tt!="undefined")return Tt;if(typeof self!="undefined")return self;if(typeof window!="undefined")return window;if(typeof commonjsGlobal$1!="undefined")return commonjsGlobal$1;throw"Unable to locate global object"})();_.util.Long!==b.default&&(_.util.Long=b.default,_.configure());function Pt(gt){return typeof gt=="object"&&gt!==null}function At(gt){return gt!=null}})(api);(function(a){var s=commonjsGlobal$1&&commonjsGlobal$1.__createBinding||(Object.create?function(c,h,b,_){_===void 0&&(_=b),Object.defineProperty(c,_,{enumerable:!0,get:function(){return h[b]}})}:function(c,h,b,_){_===void 0&&(_=b),c[_]=h[b]}),d=commonjsGlobal$1&&commonjsGlobal$1.__exportStar||function(c,h){for(var b in c)b!=="default"&&!h.hasOwnProperty(b)&&s(h,c,b)};Object.defineProperty(a,"__esModule",{value:!0}),a.eventsApiSupportedEvents=a.eventsApiEventRpcCalls=void 0,d(api,a),a.eventsApiEventRpcCalls={ping:"pong",publish:"published",subscribe:"subscribed",unsubscribe:"unsubscribed"},a.eventsApiSupportedEvents=[...Object.values(a.eventsApiEventRpcCalls),"error","event","reconnectBefore"]})(dist$1);var ws=null;typeof WebSocket!="undefined"?ws=WebSocket:typeof MozWebSocket!="undefined"?ws=MozWebSocket:typeof commonjsGlobal$1!="undefined"?ws=commonjsGlobal$1.WebSocket||commonjsGlobal$1.MozWebSocket:typeof window!="undefined"?ws=window.WebSocket||window.MozWebSocket:typeof self!="undefined"&&(ws=self.WebSocket||self.MozWebSocket);var browser$1=ws,matcher={exports:{}},escapeStringRegexp$1=a=>{if(typeof a!="string")throw new TypeError("Expected a string");return a.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")};const escapeStringRegexp=escapeStringRegexp$1,regexpCache=new Map;function sanitizeArray(a,s){if(!Array.isArray(a))switch(typeof a){case"string":a=[a];break;case"undefined":a=[];break;default:throw new TypeError(`Expected '${s}' to be a string or an array, but got a type of '${typeof a}'`)}return a.filter(d=>{if(typeof d!="string"){if(typeof d=="undefined")return!1;throw new TypeError(`Expected '${s}' to be an array of strings, but found a type of '${typeof d}' in the array`)}return!0})}function makeRegexp(a,s){s={caseSensitive:!1,...s};const d=a+JSON.stringify(s);if(regexpCache.has(d))return regexpCache.get(d);const c=a[0]==="!";c&&(a=a.slice(1)),a=escapeStringRegexp(a).replace(/\\\*/g,"[\\s\\S]*");const h=new RegExp(`^${a}$`,s.caseSensitive?"":"i");return h.negated=c,regexpCache.set(d,h),h}matcher.exports=(a,s,d)=>{if(a=sanitizeArray(a,"inputs"),s=sanitizeArray(s,"patterns"),s.length===0)return[];const c=s[0][0]==="!";s=s.map(b=>makeRegexp(b,d));const h=[];for(const b of a){let _=c;for(const $ of s)$.test(b)&&(_=!$.negated);_&&h.push(b)}return h};matcher.exports.isMatch=(a,s,d)=>(a=sanitizeArray(a,"inputs"),s=sanitizeArray(s,"patterns"),s.length===0?!1:a.some(c=>s.every(h=>{const b=makeRegexp(h,d),_=b.test(c);return b.negated?!_:_})));var __createBinding=commonjsGlobal$1&&commonjsGlobal$1.__createBinding||(Object.create?function(a,s,d,c){c===void 0&&(c=d);var h=Object.getOwnPropertyDescriptor(s,d);(!h||("get"in h?!s.__esModule:h.writable||h.configurable))&&(h={enumerable:!0,get:function(){return s[d]}}),Object.defineProperty(a,c,h)}:function(a,s,d,c){c===void 0&&(c=d),a[c]=s[d]}),__setModuleDefault=commonjsGlobal$1&&commonjsGlobal$1.__setModuleDefault||(Object.create?function(a,s){Object.defineProperty(a,"default",{enumerable:!0,value:s})}:function(a,s){a.default=s}),__importStar=commonjsGlobal$1&&commonjsGlobal$1.__importStar||function(a){if(a&&a.__esModule)return a;var s={};if(a!=null)for(var d in a)d!=="default"&&Object.prototype.hasOwnProperty.call(a,d)&&__createBinding(s,a,d);return __setModuleDefault(s,a),s},__importDefault$2=commonjsGlobal$1&&commonjsGlobal$1.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(eventapi,"__esModule",{value:!0});eventapi.EventApi=void 0;const EventApiModel=__importStar(dist$1),isomorphic_ws_1=__importDefault$2(browser$1),uuid_1=require$$1$2,NiceGrpc=__importStar(lib$1),matcher_1=matcher.exports,api_1=api$2,clientVersion=version$3,WS_PING_INTERVAL=2e4,WS_PING_TIMEOUT=1e4,WS_RECONNECT_DELAY=2e3,WS_MAX_BADAUTH_ATTEMPTS=3,LOG_CATEGORY="EventApi";class EventApi extends api_1.ApiClient{constructor(s,d,c,h,b,_){super(s,d,h,LOG_CATEGORY,b,_),this.websocketServer=c,this.subscriptions=new Set,this.eventHandlers={},this.calls={},this.messageQueue=[],this.websocketReady=!1,this.reconnectionAttempts=0,this.badAuthentication=!1,this.eventsClient=null}publish(...s){return this.websocketReady?this.call("publish",s[0]):this.eventsClient.publish(...s)}connect(){if(!this.ws){this.cleanup();const s=this.accessToken,d=[`version=${clientVersion}`,`sessionid=${this.sessionId}`];this.sdkVersion&&d.push(`sdkversion=${this.sdkVersion}`),this.ws=new isomorphic_ws_1.default(`${this.websocketServer}/stream?${d.join("&")}`,["Bearer",this.accessToken]);let c;this.ws.addEventListener("message",h=>{const b=JSON.parse(h.data.toString()),_=b.result;if(b.error&&(c=b.error,this.handleEvent("error",{error:{code:b.code,message:b.message}}),["You do not have permission to this resource","You do not have permission to this resource"].includes(b.message)&&(this.badAuthentication=!0)),!_)return;_.reconnectBefore&&_.reconnectBefore.reauthenticate&&this.accessToken===s&&(this.badAuthentication=!0);const $=EventApiModel.eventsApiSupportedEvents.find(_e=>!!_[_e]);$&&this.handleEvent($,_)}),this.ws.addEventListener("open",()=>{this.log.info("websocket connected"),this.call("ping","hello",{timeout:WS_PING_TIMEOUT,skipQueue:!0}).then(()=>{this.ready()}).catch(h=>{!c&&h.message!=="Stream connection closed"&&this.disconnect("hello timeout")})}),this.ws.addEventListener("close",h=>{var b;c?this.reconnect(`${(b=c==null?void 0:c.message)!==null&&b!==void 0?b:"unknown"}`):this.reconnect(`closed - ${h.reason||h.code}`)}),this.ws.addEventListener("error",h=>{c=h})}}async subscribe(s,d={}){return this.call("subscribe",{name:s,...d}).then(()=>{this.subscriptions.add(JSON.stringify({name:s,...d}))})}async unsubscribe(s,d={}){this.subscriptions.delete(JSON.stringify({name:s,payload:d})),await this.call("unsubscribe",{name:s,...d})}on(s,d,c){const h=c||d,b={ignoreSessionEvents:!1,allowedSessionEvents:[],...c?d:{}};this.eventHandlers[s]||(this.eventHandlers[s]=[]),this.eventHandlers[s].push({...b,handler:h})}off(s,d,c){var h;const b=c||d,_={ignoreSessionEvents:!1,allowedSessionEvents:[],...c?d:{}};this.eventHandlers[s]=((h=this.eventHandlers[s])!==null&&h!==void 0?h:[]).filter($=>!($.ignoreSessionEvents===_.ignoreSessionEvents&&$.allowedSessionEvents===_.allowedSessionEvents&&$.handler===b&&$.name===_.name))}disconnect(s){this.log.warn(`disconnected from events reason=${s}`),Object.values(this.calls).forEach(d=>{clearTimeout(d.timeout),d.reject(new Error("Stream connection closed"))}),this.calls={},this.cleanup()}_setup(s){this.eventsClient=this.clientFactory.create(EventApiModel.EventServiceDefinition,this.channel,{"*":s}),this.badAuthentication&&(this.badAuthentication=!1,this.reconnectionAttempts=0,this.reconnect("updated token"))}ready(){this.reconnectionAttempts=0,this.badAuthentication=!1,this.websocketReady=!0,this.handleEvent("connected",{connected:void 0});for(const s of this.subscriptions.values())this.send({subscribe:JSON.parse(s),correlationId:(0,uuid_1.v4)()});for(const s of this.messageQueue)this.send(s);this.messageQueue=[],this.pingLoop=setInterval(()=>{this.ping()},WS_PING_INTERVAL)}ping(){this.call("ping",`${+new Date}`,{timeout:WS_PING_TIMEOUT}).catch(()=>{this.reconnect("connection stalled")})}reconnect(s){this.disconnect(s),this.reconnectTimeout=setTimeout(()=>{if(this.reconnectionAttempts++,this.badAuthentication&&this.reconnectionAttempts>=WS_MAX_BADAUTH_ATTEMPTS){this.log.warn("Maximum number of reconnection attempts reached with bad authentication, please re-authenticate the SDK");return}this.connect()},WS_RECONNECT_DELAY)}send(s){this.ws&&this.ws.readyState===this.ws.OPEN?this.ws.send(JSON.stringify(s)):this.log.warn("Message sent to a disconnected stream")}handleEvent(s,d){var c;if(this.calls[d.correlationId]){const h=EventApiModel.eventsApiEventRpcCalls[this.calls[d.correlationId].method]===s,b=!!d.error;if(h||b){this.resolveCall(s,d);return}}for(const h of(c=this.eventHandlers[s])!==null&&c!==void 0?c:[]){if(s==="event"&&d.event){if(d.sessionId===this.sessionId&&h.ignoreSessionEvents&&!h.allowedSessionEvents.includes(d.event.name)){this.log.trace("ignorning user event from self: "+d.event.name+", payload.sessionId="+d.sessionId+", this.sessionId");continue}if(h.name&&!(0,matcher_1.isMatch)(d.event.name,h.name))continue;if(this.eventLogCallback){let b,_=d.event.name,$;if(d.event.name.startsWith(EventApi.APISTREAM_EVENT_PREFIX)){let _e=d.event.name.split(":");_e.length==4&&(b=_e[1],_=_e[2],$=_e[3]),this.eventLogCallback(b,_,$,d)}}}else if(d.sessionId===this.sessionId&&h.ignoreSessionEvents){this.log.trace("ignorning event from self: "+d.event.name+", payload.sessionId="+d.sessionId+", this.sessionId");continue}this.log.trace("processing event: payload.sessionId="+d.sessionId+", this.sessionId"),h.handler(d?d[s]:void 0,{isFromCurrentSession:d.sessionId===this.sessionId})}}async call(s,d,c={timeout:2e4,skipQueue:!1}){this.ws||this.connect();const h=(0,uuid_1.v4)();return new Promise((b,_)=>{const $=setTimeout(()=>{delete this.calls[h],_(new Error("Request timed out"))},c.timeout);this.calls[h]={resolve:b,reject:_,timeout:$,method:s},this.websocketReady||c.skipQueue?this.send({[s]:d,correlationId:h}):this.messageQueue.push({[s]:d,correlationId:h})})}resolveCall(s,d){const c=this.calls[d.correlationId];if(!!c){if(clearTimeout(c.timeout),delete this.calls[d.correlationId],s==="error"&&d.error){c.reject(new NiceGrpc.ClientError("error",d.error.code,d.error.message));return}c.resolve(d[s])}}cleanup(){clearTimeout(this.pingLoop),clearTimeout(this.reconnectTimeout),this.websocketReady=!1,this.ws&&(this.ws.onclose=function(){},this.ws.close(),this.ws=null)}}eventapi.EventApi=EventApi;EventApi.APISTREAM_EVENT_PREFIX="apistream";var livekit={},__importDefault$1=commonjsGlobal$1&&commonjsGlobal$1.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(livekit,"__esModule",{value:!0});livekit.LiveKitUtils=void 0;const jwt_decode_1=__importDefault$1(require$$0$1);class LiveKitUtils{static decodeJwt(s){return(0,jwt_decode_1.default)(s,{header:!1})}static isRoomAdmin(s){return LiveKitUtils.decodeJwt(s).video.roomAdmin}static getRoomName(s){return LiveKitUtils.decodeJwt(s).video.room}}livekit.LiveKitUtils=LiveKitUtils;(function(a){var s=commonjsGlobal$1&&commonjsGlobal$1.__createBinding||(Object.create?function(At,gt,Ct,Nt){Nt===void 0&&(Nt=Ct);var vt=Object.getOwnPropertyDescriptor(gt,Ct);(!vt||("get"in vt?!gt.__esModule:vt.writable||vt.configurable))&&(vt={enumerable:!0,get:function(){return gt[Ct]}}),Object.defineProperty(At,Nt,vt)}:function(At,gt,Ct,Nt){Nt===void 0&&(Nt=Ct),At[Nt]=gt[Ct]}),d=commonjsGlobal$1&&commonjsGlobal$1.__setModuleDefault||(Object.create?function(At,gt){Object.defineProperty(At,"default",{enumerable:!0,value:gt})}:function(At,gt){At.default=gt}),c=commonjsGlobal$1&&commonjsGlobal$1.__importStar||function(At){if(At&&At.__esModule)return At;var gt={};if(At!=null)for(var Ct in At)Ct!=="default"&&Object.prototype.hasOwnProperty.call(At,Ct)&&s(gt,At,Ct);return d(gt,At),gt},h=commonjsGlobal$1&&commonjsGlobal$1.__importDefault||function(At){return At&&At.__esModule?At:{default:At}};Object.defineProperty(a,"__esModule",{value:!0}),a.ApiStream=a.LiveKitUtils=a.EventApiModel=a.LayoutApiModel=a.LiveApiModel=void 0;const b=h(require$$0$1),_=require$$1$2,$=require$$2$1,_e=layoutapi,tt=liveapi,rt=eventapi,ot=c(api$1);a.LiveApiModel=ot;const it=c(dist$2);a.LayoutApiModel=it;const st=c(dist$1);a.EventApiModel=st;const lt=livekit;Object.defineProperty(a,"LiveKitUtils",{enumerable:!0,get:function(){return lt.LiveKitUtils}});const dt=logger,ut=version$3,ht={dev:"http://127.0.0.1:8081",stage:"https://live.silly.horse/grpcweb/live/v2",prod:"https://live.api.stream/grpcweb/live/v2"},nt={dev:"https://live.silly.horse/grpcweb/layout/v2",stage:"https://live.silly.horse/grpcweb/layout/v2",prod:"https://live.api.stream/grpcweb/layout/v2"},ct={dev:"wss://live.silly.horse/event/v2",stage:"wss://live.silly.horse/event/v2",prod:"wss://live.api.stream/event/v2"},mt={dev:"https://live.silly.horse/grpcweb/event/v2",stage:"https://live.silly.horse/grpcweb/event/v2",prod:"https://live.api.stream/grpcweb/event/v2"},kt={dev:"wss://live.silly.horse/webrtc/v2",stage:"wss://live.silly.horse/webrtc/v2",prod:"wss://live.api.stream/webrtc/v2"},Tt={dev:"https://live.silly.horse/webrtc/v2",stage:"https://live.silly.horse/webrtc/v2",prod:"https://live.api.stream/webrtc/v2"};class Pt{constructor(gt={}){var Ct;const Nt={env:"prod",logLevel:"Warn",...gt};this.env=Nt.env;let vt=(0,_.v4)();Nt.sessionId!=null&&(vt=Nt.sessionId),this.log=dt.logger.getCategory("ApiStream"),this.setLogLevel(Nt.env=="dev"?"Trace":Nt.logLevel);const Et=(Ct=Nt.overrideEndpoints)!==null&&Ct!==void 0?Ct:{};Et.liveApiServer==null&&(Et.liveApiServer=ht[this.env]),Et.layoutApiServer==null&&(Et.layoutApiServer=nt[this.env]),Et.eventApiServer==null&&(Et.eventApiServer=mt[this.env]),Et.eventApiWebSocketServer==null&&(Et.eventApiWebSocketServer=ct[this.env]),this.eventApi=new rt.EventApi(vt,Et.eventApiServer,Et.eventApiWebSocketServer,Nt.sdkVersion,Nt.apiLogCallback,Nt.eventLogCallback),this.layoutApi=new _e.LayoutApi(vt,this.eventApi,Et.layoutApiServer,Nt.sdkVersion,Nt.apiLogCallback),this.liveApi=new tt.LiveApi(vt,this.eventApi,Et.liveApiServer,this.setAccessToken.bind(this),Nt.apiKey,Nt.sdkVersion,Nt.apiLogCallback),this.eventApi.on("reconnectBefore",It=>{It.reauthenticate&&this.liveApi.authentication.refreshAccessToken({}).catch(()=>{})}),this.log.info("api.stream: sessionid="+vt+", version="+ut+", sdkVersion="+Nt.sdkVersion)}LiveApi(){return this.liveApi}LayoutApi(){return this.layoutApi}EventApi(){return this.eventApi}setLogLevel(gt){try{let Ct=$.LogLevel.toLogLevel(gt);dt.logger.updateRuntimeSettings({level:Ct})}catch{this.log.warn(`unknown logging level ${gt}`)}}setAccessToken(gt){this.decodedAccessToken=Pt.decodeAccessToken(gt),this.log.debug("setting accessToken",gt,this.decodedAccessToken),this.layoutApi.setAccessToken(gt),this.liveApi.setAccessToken(gt),this.eventApi.setAccessToken(gt)}getAccessToken(){return this.decodedAccessToken}getGuestProject(){return this.decodedAccessToken.guestControl}async load(gt){if(gt==null&&typeof window!="undefined"){let Ct=this.parseQuery();Ct.get(Pt.ACCESS_TOKEN_QUERY_PARAM)!=null&&(gt=Ct.get(Pt.ACCESS_TOKEN_QUERY_PARAM))}return gt!=null&&(this.setAccessToken(gt),this.decodedAccessToken.guestControl!=null)?(this.log.info("loading guest token and exchanging"),await this.LiveApi().authentication.refreshAccessToken({}),this.log.info("auto-loading project = "+JSON.stringify(this.decodedAccessToken.guestControl)),this.decodedAccessToken.guestControl):null}getLiveKitServer(gt=!1){return gt?Tt[this.env]:kt[this.env]}parseQuery(){let gt=window.location.search,Ct=new Map,Nt=(gt[0]==="?"?gt.substr(1):gt).split("&");for(let vt=0;vt<Nt.length;vt++){let Et=Nt[vt].split("=");Et.length==2&&(Ct.set(decodeURIComponent(Et[0]),decodeURIComponent(Et[1]||"")),this.log.debug(`found query param: ${decodeURIComponent(Et[0])}=${decodeURIComponent(Et[1]||"")}`))}return Ct}static decodeAccessToken(gt){let Ct=(0,b.default)(gt,{header:!1}),Nt={serviceUserId:Ct.user.serviceUserId,userId:Ct.user.userId,displayName:Ct.user.displayName,trial:Ct.user.trial,demo:Ct.user.demo};return Ct.guestControl!=null&&(Nt.guestControl={collectionId:Ct.guestControl.collectionId,projectId:Ct.guestControl.projectId,role:ot.roleFromJSON(Ct.guestControl.role)}),Nt}}a.ApiStream=Pt,Pt.ACCESS_TOKEN_QUERY_PARAM="at"})(lib$2);var dist={},grants={};Object.defineProperty(grants,"__esModule",{value:!0});var livekit_models={};(function(a){var s=commonjsGlobal$1&&commonjsGlobal$1.__importDefault||function(pt){return pt&&pt.__esModule?pt:{default:pt}};Object.defineProperty(a,"__esModule",{value:!0}),a.ParticipantTracks=a.UserPacket=a.SpeakerInfo=a.ActiveSpeakerUpdate=a.DataPacket=a.VideoLayer=a.TrackInfo=a.ParticipantInfo=a.Codec=a.Room=a.dataPacket_KindToJSON=a.dataPacket_KindFromJSON=a.DataPacket_Kind=a.participantInfo_StateToJSON=a.participantInfo_StateFromJSON=a.ParticipantInfo_State=a.connectionQualityToJSON=a.connectionQualityFromJSON=a.ConnectionQuality=a.videoQualityToJSON=a.videoQualityFromJSON=a.VideoQuality=a.trackSourceToJSON=a.trackSourceFromJSON=a.TrackSource=a.trackTypeToJSON=a.trackTypeFromJSON=a.TrackType=a.protobufPackage=void 0;const d=s(umd.exports),c=s(minimal$2);a.protobufPackage="livekit";var h;(function(pt){pt[pt.AUDIO=0]="AUDIO",pt[pt.VIDEO=1]="VIDEO",pt[pt.DATA=2]="DATA",pt[pt.UNRECOGNIZED=-1]="UNRECOGNIZED"})(h=a.TrackType||(a.TrackType={}));function b(pt){switch(pt){case 0:case"AUDIO":return h.AUDIO;case 1:case"VIDEO":return h.VIDEO;case 2:case"DATA":return h.DATA;case-1:case"UNRECOGNIZED":default:return h.UNRECOGNIZED}}a.trackTypeFromJSON=b;function _(pt){switch(pt){case h.AUDIO:return"AUDIO";case h.VIDEO:return"VIDEO";case h.DATA:return"DATA";default:return"UNKNOWN"}}a.trackTypeToJSON=_;var $;(function(pt){pt[pt.UNKNOWN=0]="UNKNOWN",pt[pt.CAMERA=1]="CAMERA",pt[pt.MICROPHONE=2]="MICROPHONE",pt[pt.SCREEN_SHARE=3]="SCREEN_SHARE",pt[pt.SCREEN_SHARE_AUDIO=4]="SCREEN_SHARE_AUDIO",pt[pt.UNRECOGNIZED=-1]="UNRECOGNIZED"})($=a.TrackSource||(a.TrackSource={}));function _e(pt){switch(pt){case 0:case"UNKNOWN":return $.UNKNOWN;case 1:case"CAMERA":return $.CAMERA;case 2:case"MICROPHONE":return $.MICROPHONE;case 3:case"SCREEN_SHARE":return $.SCREEN_SHARE;case 4:case"SCREEN_SHARE_AUDIO":return $.SCREEN_SHARE_AUDIO;case-1:case"UNRECOGNIZED":default:return $.UNRECOGNIZED}}a.trackSourceFromJSON=_e;function tt(pt){switch(pt){case $.UNKNOWN:return"UNKNOWN";case $.CAMERA:return"CAMERA";case $.MICROPHONE:return"MICROPHONE";case $.SCREEN_SHARE:return"SCREEN_SHARE";case $.SCREEN_SHARE_AUDIO:return"SCREEN_SHARE_AUDIO";default:return"UNKNOWN"}}a.trackSourceToJSON=tt;var rt;(function(pt){pt[pt.LOW=0]="LOW",pt[pt.MEDIUM=1]="MEDIUM",pt[pt.HIGH=2]="HIGH",pt[pt.UNRECOGNIZED=-1]="UNRECOGNIZED"})(rt=a.VideoQuality||(a.VideoQuality={}));function ot(pt){switch(pt){case 0:case"LOW":return rt.LOW;case 1:case"MEDIUM":return rt.MEDIUM;case 2:case"HIGH":return rt.HIGH;case-1:case"UNRECOGNIZED":default:return rt.UNRECOGNIZED}}a.videoQualityFromJSON=ot;function it(pt){switch(pt){case rt.LOW:return"LOW";case rt.MEDIUM:return"MEDIUM";case rt.HIGH:return"HIGH";default:return"UNKNOWN"}}a.videoQualityToJSON=it;var st;(function(pt){pt[pt.POOR=0]="POOR",pt[pt.GOOD=1]="GOOD",pt[pt.EXCELLENT=2]="EXCELLENT",pt[pt.UNRECOGNIZED=-1]="UNRECOGNIZED"})(st=a.ConnectionQuality||(a.ConnectionQuality={}));function lt(pt){switch(pt){case 0:case"POOR":return st.POOR;case 1:case"GOOD":return st.GOOD;case 2:case"EXCELLENT":return st.EXCELLENT;case-1:case"UNRECOGNIZED":default:return st.UNRECOGNIZED}}a.connectionQualityFromJSON=lt;function dt(pt){switch(pt){case st.POOR:return"POOR";case st.GOOD:return"GOOD";case st.EXCELLENT:return"EXCELLENT";default:return"UNKNOWN"}}a.connectionQualityToJSON=dt;var ut;(function(pt){pt[pt.JOINING=0]="JOINING",pt[pt.JOINED=1]="JOINED",pt[pt.ACTIVE=2]="ACTIVE",pt[pt.DISCONNECTED=3]="DISCONNECTED",pt[pt.UNRECOGNIZED=-1]="UNRECOGNIZED"})(ut=a.ParticipantInfo_State||(a.ParticipantInfo_State={}));function ht(pt){switch(pt){case 0:case"JOINING":return ut.JOINING;case 1:case"JOINED":return ut.JOINED;case 2:case"ACTIVE":return ut.ACTIVE;case 3:case"DISCONNECTED":return ut.DISCONNECTED;case-1:case"UNRECOGNIZED":default:return ut.UNRECOGNIZED}}a.participantInfo_StateFromJSON=ht;function nt(pt){switch(pt){case ut.JOINING:return"JOINING";case ut.JOINED:return"JOINED";case ut.ACTIVE:return"ACTIVE";case ut.DISCONNECTED:return"DISCONNECTED";default:return"UNKNOWN"}}a.participantInfo_StateToJSON=nt;var ct;(function(pt){pt[pt.RELIABLE=0]="RELIABLE",pt[pt.LOSSY=1]="LOSSY",pt[pt.UNRECOGNIZED=-1]="UNRECOGNIZED"})(ct=a.DataPacket_Kind||(a.DataPacket_Kind={}));function mt(pt){switch(pt){case 0:case"RELIABLE":return ct.RELIABLE;case 1:case"LOSSY":return ct.LOSSY;case-1:case"UNRECOGNIZED":default:return ct.UNRECOGNIZED}}a.dataPacket_KindFromJSON=mt;function kt(pt){switch(pt){case ct.RELIABLE:return"RELIABLE";case ct.LOSSY:return"LOSSY";default:return"UNKNOWN"}}a.dataPacket_KindToJSON=kt;const Tt={sid:"",name:"",emptyTimeout:0,maxParticipants:0,creationTime:0,turnPassword:"",metadata:"",numParticipants:0,activeRecording:!1};a.Room={encode(pt,_t=c.default.Writer.create()){pt.sid!==""&&_t.uint32(10).string(pt.sid),pt.name!==""&&_t.uint32(18).string(pt.name),pt.emptyTimeout!==0&&_t.uint32(24).uint32(pt.emptyTimeout),pt.maxParticipants!==0&&_t.uint32(32).uint32(pt.maxParticipants),pt.creationTime!==0&&_t.uint32(40).int64(pt.creationTime),pt.turnPassword!==""&&_t.uint32(50).string(pt.turnPassword);for(const Lt of pt.enabledCodecs)a.Codec.encode(Lt,_t.uint32(58).fork()).ldelim();return pt.metadata!==""&&_t.uint32(66).string(pt.metadata),pt.numParticipants!==0&&_t.uint32(72).uint32(pt.numParticipants),pt.activeRecording===!0&&_t.uint32(80).bool(pt.activeRecording),_t},decode(pt,_t){const Lt=pt instanceof c.default.Reader?pt:new c.default.Reader(pt);let Gt=_t===void 0?Lt.len:Lt.pos+_t;const Ut=Object.assign({},Tt);for(Ut.enabledCodecs=[];Lt.pos<Gt;){const $t=Lt.uint32();switch($t>>>3){case 1:Ut.sid=Lt.string();break;case 2:Ut.name=Lt.string();break;case 3:Ut.emptyTimeout=Lt.uint32();break;case 4:Ut.maxParticipants=Lt.uint32();break;case 5:Ut.creationTime=Ft(Lt.int64());break;case 6:Ut.turnPassword=Lt.string();break;case 7:Ut.enabledCodecs.push(a.Codec.decode(Lt,Lt.uint32()));break;case 8:Ut.metadata=Lt.string();break;case 9:Ut.numParticipants=Lt.uint32();break;case 10:Ut.activeRecording=Lt.bool();break;default:Lt.skipType($t&7);break}}return Ut},fromJSON(pt){const _t=Object.assign({},Tt);if(_t.enabledCodecs=[],pt.sid!==void 0&&pt.sid!==null?_t.sid=String(pt.sid):_t.sid="",pt.name!==void 0&&pt.name!==null?_t.name=String(pt.name):_t.name="",pt.emptyTimeout!==void 0&&pt.emptyTimeout!==null?_t.emptyTimeout=Number(pt.emptyTimeout):_t.emptyTimeout=0,pt.maxParticipants!==void 0&&pt.maxParticipants!==null?_t.maxParticipants=Number(pt.maxParticipants):_t.maxParticipants=0,pt.creationTime!==void 0&&pt.creationTime!==null?_t.creationTime=Number(pt.creationTime):_t.creationTime=0,pt.turnPassword!==void 0&&pt.turnPassword!==null?_t.turnPassword=String(pt.turnPassword):_t.turnPassword="",pt.enabledCodecs!==void 0&&pt.enabledCodecs!==null)for(const Lt of pt.enabledCodecs)_t.enabledCodecs.push(a.Codec.fromJSON(Lt));return pt.metadata!==void 0&&pt.metadata!==null?_t.metadata=String(pt.metadata):_t.metadata="",pt.numParticipants!==void 0&&pt.numParticipants!==null?_t.numParticipants=Number(pt.numParticipants):_t.numParticipants=0,pt.activeRecording!==void 0&&pt.activeRecording!==null?_t.activeRecording=Boolean(pt.activeRecording):_t.activeRecording=!1,_t},toJSON(pt){const _t={};return pt.sid!==void 0&&(_t.sid=pt.sid),pt.name!==void 0&&(_t.name=pt.name),pt.emptyTimeout!==void 0&&(_t.emptyTimeout=pt.emptyTimeout),pt.maxParticipants!==void 0&&(_t.maxParticipants=pt.maxParticipants),pt.creationTime!==void 0&&(_t.creationTime=pt.creationTime),pt.turnPassword!==void 0&&(_t.turnPassword=pt.turnPassword),pt.enabledCodecs?_t.enabledCodecs=pt.enabledCodecs.map(Lt=>Lt?a.Codec.toJSON(Lt):void 0):_t.enabledCodecs=[],pt.metadata!==void 0&&(_t.metadata=pt.metadata),pt.numParticipants!==void 0&&(_t.numParticipants=pt.numParticipants),pt.activeRecording!==void 0&&(_t.activeRecording=pt.activeRecording),_t},fromPartial(pt){const _t=Object.assign({},Tt);if(_t.enabledCodecs=[],pt.sid!==void 0&&pt.sid!==null?_t.sid=pt.sid:_t.sid="",pt.name!==void 0&&pt.name!==null?_t.name=pt.name:_t.name="",pt.emptyTimeout!==void 0&&pt.emptyTimeout!==null?_t.emptyTimeout=pt.emptyTimeout:_t.emptyTimeout=0,pt.maxParticipants!==void 0&&pt.maxParticipants!==null?_t.maxParticipants=pt.maxParticipants:_t.maxParticipants=0,pt.creationTime!==void 0&&pt.creationTime!==null?_t.creationTime=pt.creationTime:_t.creationTime=0,pt.turnPassword!==void 0&&pt.turnPassword!==null?_t.turnPassword=pt.turnPassword:_t.turnPassword="",pt.enabledCodecs!==void 0&&pt.enabledCodecs!==null)for(const Lt of pt.enabledCodecs)_t.enabledCodecs.push(a.Codec.fromPartial(Lt));return pt.metadata!==void 0&&pt.metadata!==null?_t.metadata=pt.metadata:_t.metadata="",pt.numParticipants!==void 0&&pt.numParticipants!==null?_t.numParticipants=pt.numParticipants:_t.numParticipants=0,pt.activeRecording!==void 0&&pt.activeRecording!==null?_t.activeRecording=pt.activeRecording:_t.activeRecording=!1,_t}};const Pt={mime:"",fmtpLine:""};a.Codec={encode(pt,_t=c.default.Writer.create()){return pt.mime!==""&&_t.uint32(10).string(pt.mime),pt.fmtpLine!==""&&_t.uint32(18).string(pt.fmtpLine),_t},decode(pt,_t){const Lt=pt instanceof c.default.Reader?pt:new c.default.Reader(pt);let Gt=_t===void 0?Lt.len:Lt.pos+_t;const Ut=Object.assign({},Pt);for(;Lt.pos<Gt;){const $t=Lt.uint32();switch($t>>>3){case 1:Ut.mime=Lt.string();break;case 2:Ut.fmtpLine=Lt.string();break;default:Lt.skipType($t&7);break}}return Ut},fromJSON(pt){const _t=Object.assign({},Pt);return pt.mime!==void 0&&pt.mime!==null?_t.mime=String(pt.mime):_t.mime="",pt.fmtpLine!==void 0&&pt.fmtpLine!==null?_t.fmtpLine=String(pt.fmtpLine):_t.fmtpLine="",_t},toJSON(pt){const _t={};return pt.mime!==void 0&&(_t.mime=pt.mime),pt.fmtpLine!==void 0&&(_t.fmtpLine=pt.fmtpLine),_t},fromPartial(pt){const _t=Object.assign({},Pt);return pt.mime!==void 0&&pt.mime!==null?_t.mime=pt.mime:_t.mime="",pt.fmtpLine!==void 0&&pt.fmtpLine!==null?_t.fmtpLine=pt.fmtpLine:_t.fmtpLine="",_t}};const At={sid:"",identity:"",state:0,metadata:"",joinedAt:0,hidden:!1,recorder:!1,name:""};a.ParticipantInfo={encode(pt,_t=c.default.Writer.create()){pt.sid!==""&&_t.uint32(10).string(pt.sid),pt.identity!==""&&_t.uint32(18).string(pt.identity),pt.state!==0&&_t.uint32(24).int32(pt.state);for(const Lt of pt.tracks)a.TrackInfo.encode(Lt,_t.uint32(34).fork()).ldelim();return pt.metadata!==""&&_t.uint32(42).string(pt.metadata),pt.joinedAt!==0&&_t.uint32(48).int64(pt.joinedAt),pt.hidden===!0&&_t.uint32(56).bool(pt.hidden),pt.recorder===!0&&_t.uint32(64).bool(pt.recorder),pt.name!==""&&_t.uint32(74).string(pt.name),_t},decode(pt,_t){const Lt=pt instanceof c.default.Reader?pt:new c.default.Reader(pt);let Gt=_t===void 0?Lt.len:Lt.pos+_t;const Ut=Object.assign({},At);for(Ut.tracks=[];Lt.pos<Gt;){const $t=Lt.uint32();switch($t>>>3){case 1:Ut.sid=Lt.string();break;case 2:Ut.identity=Lt.string();break;case 3:Ut.state=Lt.int32();break;case 4:Ut.tracks.push(a.TrackInfo.decode(Lt,Lt.uint32()));break;case 5:Ut.metadata=Lt.string();break;case 6:Ut.joinedAt=Ft(Lt.int64());break;case 7:Ut.hidden=Lt.bool();break;case 8:Ut.recorder=Lt.bool();break;case 9:Ut.name=Lt.string();break;default:Lt.skipType($t&7);break}}return Ut},fromJSON(pt){const _t=Object.assign({},At);if(_t.tracks=[],pt.sid!==void 0&&pt.sid!==null?_t.sid=String(pt.sid):_t.sid="",pt.identity!==void 0&&pt.identity!==null?_t.identity=String(pt.identity):_t.identity="",pt.state!==void 0&&pt.state!==null?_t.state=ht(pt.state):_t.state=0,pt.tracks!==void 0&&pt.tracks!==null)for(const Lt of pt.tracks)_t.tracks.push(a.TrackInfo.fromJSON(Lt));return pt.metadata!==void 0&&pt.metadata!==null?_t.metadata=String(pt.metadata):_t.metadata="",pt.joinedAt!==void 0&&pt.joinedAt!==null?_t.joinedAt=Number(pt.joinedAt):_t.joinedAt=0,pt.hidden!==void 0&&pt.hidden!==null?_t.hidden=Boolean(pt.hidden):_t.hidden=!1,pt.recorder!==void 0&&pt.recorder!==null?_t.recorder=Boolean(pt.recorder):_t.recorder=!1,pt.name!==void 0&&pt.name!==null?_t.name=String(pt.name):_t.name="",_t},toJSON(pt){const _t={};return pt.sid!==void 0&&(_t.sid=pt.sid),pt.identity!==void 0&&(_t.identity=pt.identity),pt.state!==void 0&&(_t.state=nt(pt.state)),pt.tracks?_t.tracks=pt.tracks.map(Lt=>Lt?a.TrackInfo.toJSON(Lt):void 0):_t.tracks=[],pt.metadata!==void 0&&(_t.metadata=pt.metadata),pt.joinedAt!==void 0&&(_t.joinedAt=pt.joinedAt),pt.hidden!==void 0&&(_t.hidden=pt.hidden),pt.recorder!==void 0&&(_t.recorder=pt.recorder),pt.name!==void 0&&(_t.name=pt.name),_t},fromPartial(pt){const _t=Object.assign({},At);if(_t.tracks=[],pt.sid!==void 0&&pt.sid!==null?_t.sid=pt.sid:_t.sid="",pt.identity!==void 0&&pt.identity!==null?_t.identity=pt.identity:_t.identity="",pt.state!==void 0&&pt.state!==null?_t.state=pt.state:_t.state=0,pt.tracks!==void 0&&pt.tracks!==null)for(const Lt of pt.tracks)_t.tracks.push(a.TrackInfo.fromPartial(Lt));return pt.metadata!==void 0&&pt.metadata!==null?_t.metadata=pt.metadata:_t.metadata="",pt.joinedAt!==void 0&&pt.joinedAt!==null?_t.joinedAt=pt.joinedAt:_t.joinedAt=0,pt.hidden!==void 0&&pt.hidden!==null?_t.hidden=pt.hidden:_t.hidden=!1,pt.recorder!==void 0&&pt.recorder!==null?_t.recorder=pt.recorder:_t.recorder=!1,pt.name!==void 0&&pt.name!==null?_t.name=pt.name:_t.name="",_t}};const gt={sid:"",type:0,name:"",muted:!1,width:0,height:0,simulcast:!1,disableDtx:!1,source:0,mimeType:""};a.TrackInfo={encode(pt,_t=c.default.Writer.create()){pt.sid!==""&&_t.uint32(10).string(pt.sid),pt.type!==0&&_t.uint32(16).int32(pt.type),pt.name!==""&&_t.uint32(26).string(pt.name),pt.muted===!0&&_t.uint32(32).bool(pt.muted),pt.width!==0&&_t.uint32(40).uint32(pt.width),pt.height!==0&&_t.uint32(48).uint32(pt.height),pt.simulcast===!0&&_t.uint32(56).bool(pt.simulcast),pt.disableDtx===!0&&_t.uint32(64).bool(pt.disableDtx),pt.source!==0&&_t.uint32(72).int32(pt.source);for(const Lt of pt.layers)a.VideoLayer.encode(Lt,_t.uint32(82).fork()).ldelim();return pt.mimeType!==""&&_t.uint32(90).string(pt.mimeType),_t},decode(pt,_t){const Lt=pt instanceof c.default.Reader?pt:new c.default.Reader(pt);let Gt=_t===void 0?Lt.len:Lt.pos+_t;const Ut=Object.assign({},gt);for(Ut.layers=[];Lt.pos<Gt;){const $t=Lt.uint32();switch($t>>>3){case 1:Ut.sid=Lt.string();break;case 2:Ut.type=Lt.int32();break;case 3:Ut.name=Lt.string();break;case 4:Ut.muted=Lt.bool();break;case 5:Ut.width=Lt.uint32();break;case 6:Ut.height=Lt.uint32();break;case 7:Ut.simulcast=Lt.bool();break;case 8:Ut.disableDtx=Lt.bool();break;case 9:Ut.source=Lt.int32();break;case 10:Ut.layers.push(a.VideoLayer.decode(Lt,Lt.uint32()));break;case 11:Ut.mimeType=Lt.string();break;default:Lt.skipType($t&7);break}}return Ut},fromJSON(pt){const _t=Object.assign({},gt);if(_t.layers=[],pt.sid!==void 0&&pt.sid!==null?_t.sid=String(pt.sid):_t.sid="",pt.type!==void 0&&pt.type!==null?_t.type=b(pt.type):_t.type=0,pt.name!==void 0&&pt.name!==null?_t.name=String(pt.name):_t.name="",pt.muted!==void 0&&pt.muted!==null?_t.muted=Boolean(pt.muted):_t.muted=!1,pt.width!==void 0&&pt.width!==null?_t.width=Number(pt.width):_t.width=0,pt.height!==void 0&&pt.height!==null?_t.height=Number(pt.height):_t.height=0,pt.simulcast!==void 0&&pt.simulcast!==null?_t.simulcast=Boolean(pt.simulcast):_t.simulcast=!1,pt.disableDtx!==void 0&&pt.disableDtx!==null?_t.disableDtx=Boolean(pt.disableDtx):_t.disableDtx=!1,pt.source!==void 0&&pt.source!==null?_t.source=_e(pt.source):_t.source=0,pt.layers!==void 0&&pt.layers!==null)for(const Lt of pt.layers)_t.layers.push(a.VideoLayer.fromJSON(Lt));return pt.mimeType!==void 0&&pt.mimeType!==null?_t.mimeType=String(pt.mimeType):_t.mimeType="",_t},toJSON(pt){const _t={};return pt.sid!==void 0&&(_t.sid=pt.sid),pt.type!==void 0&&(_t.type=_(pt.type)),pt.name!==void 0&&(_t.name=pt.name),pt.muted!==void 0&&(_t.muted=pt.muted),pt.width!==void 0&&(_t.width=pt.width),pt.height!==void 0&&(_t.height=pt.height),pt.simulcast!==void 0&&(_t.simulcast=pt.simulcast),pt.disableDtx!==void 0&&(_t.disableDtx=pt.disableDtx),pt.source!==void 0&&(_t.source=tt(pt.source)),pt.layers?_t.layers=pt.layers.map(Lt=>Lt?a.VideoLayer.toJSON(Lt):void 0):_t.layers=[],pt.mimeType!==void 0&&(_t.mimeType=pt.mimeType),_t},fromPartial(pt){const _t=Object.assign({},gt);if(_t.layers=[],pt.sid!==void 0&&pt.sid!==null?_t.sid=pt.sid:_t.sid="",pt.type!==void 0&&pt.type!==null?_t.type=pt.type:_t.type=0,pt.name!==void 0&&pt.name!==null?_t.name=pt.name:_t.name="",pt.muted!==void 0&&pt.muted!==null?_t.muted=pt.muted:_t.muted=!1,pt.width!==void 0&&pt.width!==null?_t.width=pt.width:_t.width=0,pt.height!==void 0&&pt.height!==null?_t.height=pt.height:_t.height=0,pt.simulcast!==void 0&&pt.simulcast!==null?_t.simulcast=pt.simulcast:_t.simulcast=!1,pt.disableDtx!==void 0&&pt.disableDtx!==null?_t.disableDtx=pt.disableDtx:_t.disableDtx=!1,pt.source!==void 0&&pt.source!==null?_t.source=pt.source:_t.source=0,pt.layers!==void 0&&pt.layers!==null)for(const Lt of pt.layers)_t.layers.push(a.VideoLayer.fromPartial(Lt));return pt.mimeType!==void 0&&pt.mimeType!==null?_t.mimeType=pt.mimeType:_t.mimeType="",_t}};const Ct={quality:0,width:0,height:0,bitrate:0};a.VideoLayer={encode(pt,_t=c.default.Writer.create()){return pt.quality!==0&&_t.uint32(8).int32(pt.quality),pt.width!==0&&_t.uint32(16).uint32(pt.width),pt.height!==0&&_t.uint32(24).uint32(pt.height),pt.bitrate!==0&&_t.uint32(32).uint32(pt.bitrate),_t},decode(pt,_t){const Lt=pt instanceof c.default.Reader?pt:new c.default.Reader(pt);let Gt=_t===void 0?Lt.len:Lt.pos+_t;const Ut=Object.assign({},Ct);for(;Lt.pos<Gt;){const $t=Lt.uint32();switch($t>>>3){case 1:Ut.quality=Lt.int32();break;case 2:Ut.width=Lt.uint32();break;case 3:Ut.height=Lt.uint32();break;case 4:Ut.bitrate=Lt.uint32();break;default:Lt.skipType($t&7);break}}return Ut},fromJSON(pt){const _t=Object.assign({},Ct);return pt.quality!==void 0&&pt.quality!==null?_t.quality=ot(pt.quality):_t.quality=0,pt.width!==void 0&&pt.width!==null?_t.width=Number(pt.width):_t.width=0,pt.height!==void 0&&pt.height!==null?_t.height=Number(pt.height):_t.height=0,pt.bitrate!==void 0&&pt.bitrate!==null?_t.bitrate=Number(pt.bitrate):_t.bitrate=0,_t},toJSON(pt){const _t={};return pt.quality!==void 0&&(_t.quality=it(pt.quality)),pt.width!==void 0&&(_t.width=pt.width),pt.height!==void 0&&(_t.height=pt.height),pt.bitrate!==void 0&&(_t.bitrate=pt.bitrate),_t},fromPartial(pt){const _t=Object.assign({},Ct);return pt.quality!==void 0&&pt.quality!==null?_t.quality=pt.quality:_t.quality=0,pt.width!==void 0&&pt.width!==null?_t.width=pt.width:_t.width=0,pt.height!==void 0&&pt.height!==null?_t.height=pt.height:_t.height=0,pt.bitrate!==void 0&&pt.bitrate!==null?_t.bitrate=pt.bitrate:_t.bitrate=0,_t}};const Nt={kind:0};a.DataPacket={encode(pt,_t=c.default.Writer.create()){return pt.kind!==0&&_t.uint32(8).int32(pt.kind),pt.user!==void 0&&a.UserPacket.encode(pt.user,_t.uint32(18).fork()).ldelim(),pt.speaker!==void 0&&a.ActiveSpeakerUpdate.encode(pt.speaker,_t.uint32(26).fork()).ldelim(),_t},decode(pt,_t){const Lt=pt instanceof c.default.Reader?pt:new c.default.Reader(pt);let Gt=_t===void 0?Lt.len:Lt.pos+_t;const Ut=Object.assign({},Nt);for(;Lt.pos<Gt;){const $t=Lt.uint32();switch($t>>>3){case 1:Ut.kind=Lt.int32();break;case 2:Ut.user=a.UserPacket.decode(Lt,Lt.uint32());break;case 3:Ut.speaker=a.ActiveSpeakerUpdate.decode(Lt,Lt.uint32());break;default:Lt.skipType($t&7);break}}return Ut},fromJSON(pt){const _t=Object.assign({},Nt);return pt.kind!==void 0&&pt.kind!==null?_t.kind=mt(pt.kind):_t.kind=0,pt.user!==void 0&&pt.user!==null?_t.user=a.UserPacket.fromJSON(pt.user):_t.user=void 0,pt.speaker!==void 0&&pt.speaker!==null?_t.speaker=a.ActiveSpeakerUpdate.fromJSON(pt.speaker):_t.speaker=void 0,_t},toJSON(pt){const _t={};return pt.kind!==void 0&&(_t.kind=kt(pt.kind)),pt.user!==void 0&&(_t.user=pt.user?a.UserPacket.toJSON(pt.user):void 0),pt.speaker!==void 0&&(_t.speaker=pt.speaker?a.ActiveSpeakerUpdate.toJSON(pt.speaker):void 0),_t},fromPartial(pt){const _t=Object.assign({},Nt);return pt.kind!==void 0&&pt.kind!==null?_t.kind=pt.kind:_t.kind=0,pt.user!==void 0&&pt.user!==null?_t.user=a.UserPacket.fromPartial(pt.user):_t.user=void 0,pt.speaker!==void 0&&pt.speaker!==null?_t.speaker=a.ActiveSpeakerUpdate.fromPartial(pt.speaker):_t.speaker=void 0,_t}};const vt={};a.ActiveSpeakerUpdate={encode(pt,_t=c.default.Writer.create()){for(const Lt of pt.speakers)a.SpeakerInfo.encode(Lt,_t.uint32(10).fork()).ldelim();return _t},decode(pt,_t){const Lt=pt instanceof c.default.Reader?pt:new c.default.Reader(pt);let Gt=_t===void 0?Lt.len:Lt.pos+_t;const Ut=Object.assign({},vt);for(Ut.speakers=[];Lt.pos<Gt;){const $t=Lt.uint32();switch($t>>>3){case 1:Ut.speakers.push(a.SpeakerInfo.decode(Lt,Lt.uint32()));break;default:Lt.skipType($t&7);break}}return Ut},fromJSON(pt){const _t=Object.assign({},vt);if(_t.speakers=[],pt.speakers!==void 0&&pt.speakers!==null)for(const Lt of pt.speakers)_t.speakers.push(a.SpeakerInfo.fromJSON(Lt));return _t},toJSON(pt){const _t={};return pt.speakers?_t.speakers=pt.speakers.map(Lt=>Lt?a.SpeakerInfo.toJSON(Lt):void 0):_t.speakers=[],_t},fromPartial(pt){const _t=Object.assign({},vt);if(_t.speakers=[],pt.speakers!==void 0&&pt.speakers!==null)for(const Lt of pt.speakers)_t.speakers.push(a.SpeakerInfo.fromPartial(Lt));return _t}};const Et={sid:"",level:0,active:!1};a.SpeakerInfo={encode(pt,_t=c.default.Writer.create()){return pt.sid!==""&&_t.uint32(10).string(pt.sid),pt.level!==0&&_t.uint32(21).float(pt.level),pt.active===!0&&_t.uint32(24).bool(pt.active),_t},decode(pt,_t){const Lt=pt instanceof c.default.Reader?pt:new c.default.Reader(pt);let Gt=_t===void 0?Lt.len:Lt.pos+_t;const Ut=Object.assign({},Et);for(;Lt.pos<Gt;){const $t=Lt.uint32();switch($t>>>3){case 1:Ut.sid=Lt.string();break;case 2:Ut.level=Lt.float();break;case 3:Ut.active=Lt.bool();break;default:Lt.skipType($t&7);break}}return Ut},fromJSON(pt){const _t=Object.assign({},Et);return pt.sid!==void 0&&pt.sid!==null?_t.sid=String(pt.sid):_t.sid="",pt.level!==void 0&&pt.level!==null?_t.level=Number(pt.level):_t.level=0,pt.active!==void 0&&pt.active!==null?_t.active=Boolean(pt.active):_t.active=!1,_t},toJSON(pt){const _t={};return pt.sid!==void 0&&(_t.sid=pt.sid),pt.level!==void 0&&(_t.level=pt.level),pt.active!==void 0&&(_t.active=pt.active),_t},fromPartial(pt){const _t=Object.assign({},Et);return pt.sid!==void 0&&pt.sid!==null?_t.sid=pt.sid:_t.sid="",pt.level!==void 0&&pt.level!==null?_t.level=pt.level:_t.level=0,pt.active!==void 0&&pt.active!==null?_t.active=pt.active:_t.active=!1,_t}};const It={participantSid:"",destinationSids:""};a.UserPacket={encode(pt,_t=c.default.Writer.create()){pt.participantSid!==""&&_t.uint32(10).string(pt.participantSid),pt.payload.length!==0&&_t.uint32(18).bytes(pt.payload);for(const Lt of pt.destinationSids)_t.uint32(26).string(Lt);return _t},decode(pt,_t){const Lt=pt instanceof c.default.Reader?pt:new c.default.Reader(pt);let Gt=_t===void 0?Lt.len:Lt.pos+_t;const Ut=Object.assign({},It);for(Ut.destinationSids=[],Ut.payload=new Uint8Array;Lt.pos<Gt;){const $t=Lt.uint32();switch($t>>>3){case 1:Ut.participantSid=Lt.string();break;case 2:Ut.payload=Lt.bytes();break;case 3:Ut.destinationSids.push(Lt.string());break;default:Lt.skipType($t&7);break}}return Ut},fromJSON(pt){const _t=Object.assign({},It);if(_t.destinationSids=[],_t.payload=new Uint8Array,pt.participantSid!==void 0&&pt.participantSid!==null?_t.participantSid=String(pt.participantSid):_t.participantSid="",pt.payload!==void 0&&pt.payload!==null&&(_t.payload=Jt(pt.payload)),pt.destinationSids!==void 0&&pt.destinationSids!==null)for(const Lt of pt.destinationSids)_t.destinationSids.push(String(Lt));return _t},toJSON(pt){const _t={};return pt.participantSid!==void 0&&(_t.participantSid=pt.participantSid),pt.payload!==void 0&&(_t.payload=Qt(pt.payload!==void 0?pt.payload:new Uint8Array)),pt.destinationSids?_t.destinationSids=pt.destinationSids.map(Lt=>Lt):_t.destinationSids=[],_t},fromPartial(pt){const _t=Object.assign({},It);if(_t.destinationSids=[],pt.participantSid!==void 0&&pt.participantSid!==null?_t.participantSid=pt.participantSid:_t.participantSid="",pt.payload!==void 0&&pt.payload!==null?_t.payload=pt.payload:_t.payload=new Uint8Array,pt.destinationSids!==void 0&&pt.destinationSids!==null)for(const Lt of pt.destinationSids)_t.destinationSids.push(Lt);return _t}};const xt={participantSid:"",trackSids:""};a.ParticipantTracks={encode(pt,_t=c.default.Writer.create()){pt.participantSid!==""&&_t.uint32(10).string(pt.participantSid);for(const Lt of pt.trackSids)_t.uint32(18).string(Lt);return _t},decode(pt,_t){const Lt=pt instanceof c.default.Reader?pt:new c.default.Reader(pt);let Gt=_t===void 0?Lt.len:Lt.pos+_t;const Ut=Object.assign({},xt);for(Ut.trackSids=[];Lt.pos<Gt;){const $t=Lt.uint32();switch($t>>>3){case 1:Ut.participantSid=Lt.string();break;case 2:Ut.trackSids.push(Lt.string());break;default:Lt.skipType($t&7);break}}return Ut},fromJSON(pt){const _t=Object.assign({},xt);if(_t.trackSids=[],pt.participantSid!==void 0&&pt.participantSid!==null?_t.participantSid=String(pt.participantSid):_t.participantSid="",pt.trackSids!==void 0&&pt.trackSids!==null)for(const Lt of pt.trackSids)_t.trackSids.push(String(Lt));return _t},toJSON(pt){const _t={};return pt.participantSid!==void 0&&(_t.participantSid=pt.participantSid),pt.trackSids?_t.trackSids=pt.trackSids.map(Lt=>Lt):_t.trackSids=[],_t},fromPartial(pt){const _t=Object.assign({},xt);if(_t.trackSids=[],pt.participantSid!==void 0&&pt.participantSid!==null?_t.participantSid=pt.participantSid:_t.participantSid="",pt.trackSids!==void 0&&pt.trackSids!==null)for(const Lt of pt.trackSids)_t.trackSids.push(Lt);return _t}};var Dt=(()=>{if(typeof Dt!="undefined")return Dt;if(typeof self!="undefined")return self;if(typeof window!="undefined")return window;if(typeof commonjsGlobal$1!="undefined")return commonjsGlobal$1;throw"Unable to locate global object"})();const Ot=Dt.atob||(pt=>Dt.Buffer.from(pt,"base64").toString("binary"));function Jt(pt){const _t=Ot(pt),Lt=new Uint8Array(_t.length);for(let Gt=0;Gt<_t.length;++Gt)Lt[Gt]=_t.charCodeAt(Gt);return Lt}const Yt=Dt.btoa||(pt=>Dt.Buffer.from(pt,"binary").toString("base64"));function Qt(pt){const _t=[];for(const Lt of pt)_t.push(String.fromCharCode(Lt));return Yt(_t.join(""))}function Ft(pt){if(pt.gt(Number.MAX_SAFE_INTEGER))throw new Dt.Error("Value is larger than Number.MAX_SAFE_INTEGER");return pt.toNumber()}c.default.util.Long!==d.default&&(c.default.util.Long=d.default,c.default.configure())})(livekit_models);var RoomServiceClient$1={},livekit_room={};(function(a){var s=commonjsGlobal$1&&commonjsGlobal$1.__importDefault||function(vt){return vt&&vt.__esModule?vt:{default:vt}};Object.defineProperty(a,"__esModule",{value:!0}),a.UpdateRoomMetadataRequest=a.SendDataResponse=a.SendDataRequest=a.UpdateSubscriptionsResponse=a.UpdateSubscriptionsRequest=a.UpdateParticipantRequest=a.ParticipantPermission=a.MuteRoomTrackResponse=a.MuteRoomTrackRequest=a.RemoveParticipantResponse=a.RoomParticipantIdentity=a.ListParticipantsResponse=a.ListParticipantsRequest=a.DeleteRoomResponse=a.DeleteRoomRequest=a.ListRoomsResponse=a.ListRoomsRequest=a.CreateRoomRequest=a.protobufPackage=void 0;const d=s(umd.exports),c=s(minimal$2),h=livekit_models;a.protobufPackage="livekit";const b={name:"",emptyTimeout:0,maxParticipants:0,nodeId:"",metadata:""};a.CreateRoomRequest={encode(vt,Et=c.default.Writer.create()){return vt.name!==""&&Et.uint32(10).string(vt.name),vt.emptyTimeout!==0&&Et.uint32(16).uint32(vt.emptyTimeout),vt.maxParticipants!==0&&Et.uint32(24).uint32(vt.maxParticipants),vt.nodeId!==""&&Et.uint32(34).string(vt.nodeId),vt.metadata!==""&&Et.uint32(42).string(vt.metadata),Et},decode(vt,Et){const It=vt instanceof c.default.Reader?vt:new c.default.Reader(vt);let xt=Et===void 0?It.len:It.pos+Et;const Dt=Object.assign({},b);for(;It.pos<xt;){const Ot=It.uint32();switch(Ot>>>3){case 1:Dt.name=It.string();break;case 2:Dt.emptyTimeout=It.uint32();break;case 3:Dt.maxParticipants=It.uint32();break;case 4:Dt.nodeId=It.string();break;case 5:Dt.metadata=It.string();break;default:It.skipType(Ot&7);break}}return Dt},fromJSON(vt){const Et=Object.assign({},b);return vt.name!==void 0&&vt.name!==null?Et.name=String(vt.name):Et.name="",vt.emptyTimeout!==void 0&&vt.emptyTimeout!==null?Et.emptyTimeout=Number(vt.emptyTimeout):Et.emptyTimeout=0,vt.maxParticipants!==void 0&&vt.maxParticipants!==null?Et.maxParticipants=Number(vt.maxParticipants):Et.maxParticipants=0,vt.nodeId!==void 0&&vt.nodeId!==null?Et.nodeId=String(vt.nodeId):Et.nodeId="",vt.metadata!==void 0&&vt.metadata!==null?Et.metadata=String(vt.metadata):Et.metadata="",Et},toJSON(vt){const Et={};return vt.name!==void 0&&(Et.name=vt.name),vt.emptyTimeout!==void 0&&(Et.emptyTimeout=vt.emptyTimeout),vt.maxParticipants!==void 0&&(Et.maxParticipants=vt.maxParticipants),vt.nodeId!==void 0&&(Et.nodeId=vt.nodeId),vt.metadata!==void 0&&(Et.metadata=vt.metadata),Et},fromPartial(vt){const Et=Object.assign({},b);return vt.name!==void 0&&vt.name!==null?Et.name=vt.name:Et.name="",vt.emptyTimeout!==void 0&&vt.emptyTimeout!==null?Et.emptyTimeout=vt.emptyTimeout:Et.emptyTimeout=0,vt.maxParticipants!==void 0&&vt.maxParticipants!==null?Et.maxParticipants=vt.maxParticipants:Et.maxParticipants=0,vt.nodeId!==void 0&&vt.nodeId!==null?Et.nodeId=vt.nodeId:Et.nodeId="",vt.metadata!==void 0&&vt.metadata!==null?Et.metadata=vt.metadata:Et.metadata="",Et}};const _={names:""};a.ListRoomsRequest={encode(vt,Et=c.default.Writer.create()){for(const It of vt.names)Et.uint32(10).string(It);return Et},decode(vt,Et){const It=vt instanceof c.default.Reader?vt:new c.default.Reader(vt);let xt=Et===void 0?It.len:It.pos+Et;const Dt=Object.assign({},_);for(Dt.names=[];It.pos<xt;){const Ot=It.uint32();switch(Ot>>>3){case 1:Dt.names.push(It.string());break;default:It.skipType(Ot&7);break}}return Dt},fromJSON(vt){const Et=Object.assign({},_);if(Et.names=[],vt.names!==void 0&&vt.names!==null)for(const It of vt.names)Et.names.push(String(It));return Et},toJSON(vt){const Et={};return vt.names?Et.names=vt.names.map(It=>It):Et.names=[],Et},fromPartial(vt){const Et=Object.assign({},_);if(Et.names=[],vt.names!==void 0&&vt.names!==null)for(const It of vt.names)Et.names.push(It);return Et}};const $={};a.ListRoomsResponse={encode(vt,Et=c.default.Writer.create()){for(const It of vt.rooms)h.Room.encode(It,Et.uint32(10).fork()).ldelim();return Et},decode(vt,Et){const It=vt instanceof c.default.Reader?vt:new c.default.Reader(vt);let xt=Et===void 0?It.len:It.pos+Et;const Dt=Object.assign({},$);for(Dt.rooms=[];It.pos<xt;){const Ot=It.uint32();switch(Ot>>>3){case 1:Dt.rooms.push(h.Room.decode(It,It.uint32()));break;default:It.skipType(Ot&7);break}}return Dt},fromJSON(vt){const Et=Object.assign({},$);if(Et.rooms=[],vt.rooms!==void 0&&vt.rooms!==null)for(const It of vt.rooms)Et.rooms.push(h.Room.fromJSON(It));return Et},toJSON(vt){const Et={};return vt.rooms?Et.rooms=vt.rooms.map(It=>It?h.Room.toJSON(It):void 0):Et.rooms=[],Et},fromPartial(vt){const Et=Object.assign({},$);if(Et.rooms=[],vt.rooms!==void 0&&vt.rooms!==null)for(const It of vt.rooms)Et.rooms.push(h.Room.fromPartial(It));return Et}};const _e={room:""};a.DeleteRoomRequest={encode(vt,Et=c.default.Writer.create()){return vt.room!==""&&Et.uint32(10).string(vt.room),Et},decode(vt,Et){const It=vt instanceof c.default.Reader?vt:new c.default.Reader(vt);let xt=Et===void 0?It.len:It.pos+Et;const Dt=Object.assign({},_e);for(;It.pos<xt;){const Ot=It.uint32();switch(Ot>>>3){case 1:Dt.room=It.string();break;default:It.skipType(Ot&7);break}}return Dt},fromJSON(vt){const Et=Object.assign({},_e);return vt.room!==void 0&&vt.room!==null?Et.room=String(vt.room):Et.room="",Et},toJSON(vt){const Et={};return vt.room!==void 0&&(Et.room=vt.room),Et},fromPartial(vt){const Et=Object.assign({},_e);return vt.room!==void 0&&vt.room!==null?Et.room=vt.room:Et.room="",Et}};const tt={};a.DeleteRoomResponse={encode(vt,Et=c.default.Writer.create()){return Et},decode(vt,Et){const It=vt instanceof c.default.Reader?vt:new c.default.Reader(vt);let xt=Et===void 0?It.len:It.pos+Et;const Dt=Object.assign({},tt);for(;It.pos<xt;){const Ot=It.uint32();switch(Ot>>>3){default:It.skipType(Ot&7);break}}return Dt},fromJSON(vt){return Object.assign({},tt)},toJSON(vt){return{}},fromPartial(vt){return Object.assign({},tt)}};const rt={room:""};a.ListParticipantsRequest={encode(vt,Et=c.default.Writer.create()){return vt.room!==""&&Et.uint32(10).string(vt.room),Et},decode(vt,Et){const It=vt instanceof c.default.Reader?vt:new c.default.Reader(vt);let xt=Et===void 0?It.len:It.pos+Et;const Dt=Object.assign({},rt);for(;It.pos<xt;){const Ot=It.uint32();switch(Ot>>>3){case 1:Dt.room=It.string();break;default:It.skipType(Ot&7);break}}return Dt},fromJSON(vt){const Et=Object.assign({},rt);return vt.room!==void 0&&vt.room!==null?Et.room=String(vt.room):Et.room="",Et},toJSON(vt){const Et={};return vt.room!==void 0&&(Et.room=vt.room),Et},fromPartial(vt){const Et=Object.assign({},rt);return vt.room!==void 0&&vt.room!==null?Et.room=vt.room:Et.room="",Et}};const ot={};a.ListParticipantsResponse={encode(vt,Et=c.default.Writer.create()){for(const It of vt.participants)h.ParticipantInfo.encode(It,Et.uint32(10).fork()).ldelim();return Et},decode(vt,Et){const It=vt instanceof c.default.Reader?vt:new c.default.Reader(vt);let xt=Et===void 0?It.len:It.pos+Et;const Dt=Object.assign({},ot);for(Dt.participants=[];It.pos<xt;){const Ot=It.uint32();switch(Ot>>>3){case 1:Dt.participants.push(h.ParticipantInfo.decode(It,It.uint32()));break;default:It.skipType(Ot&7);break}}return Dt},fromJSON(vt){const Et=Object.assign({},ot);if(Et.participants=[],vt.participants!==void 0&&vt.participants!==null)for(const It of vt.participants)Et.participants.push(h.ParticipantInfo.fromJSON(It));return Et},toJSON(vt){const Et={};return vt.participants?Et.participants=vt.participants.map(It=>It?h.ParticipantInfo.toJSON(It):void 0):Et.participants=[],Et},fromPartial(vt){const Et=Object.assign({},ot);if(Et.participants=[],vt.participants!==void 0&&vt.participants!==null)for(const It of vt.participants)Et.participants.push(h.ParticipantInfo.fromPartial(It));return Et}};const it={room:"",identity:""};a.RoomParticipantIdentity={encode(vt,Et=c.default.Writer.create()){return vt.room!==""&&Et.uint32(10).string(vt.room),vt.identity!==""&&Et.uint32(18).string(vt.identity),Et},decode(vt,Et){const It=vt instanceof c.default.Reader?vt:new c.default.Reader(vt);let xt=Et===void 0?It.len:It.pos+Et;const Dt=Object.assign({},it);for(;It.pos<xt;){const Ot=It.uint32();switch(Ot>>>3){case 1:Dt.room=It.string();break;case 2:Dt.identity=It.string();break;default:It.skipType(Ot&7);break}}return Dt},fromJSON(vt){const Et=Object.assign({},it);return vt.room!==void 0&&vt.room!==null?Et.room=String(vt.room):Et.room="",vt.identity!==void 0&&vt.identity!==null?Et.identity=String(vt.identity):Et.identity="",Et},toJSON(vt){const Et={};return vt.room!==void 0&&(Et.room=vt.room),vt.identity!==void 0&&(Et.identity=vt.identity),Et},fromPartial(vt){const Et=Object.assign({},it);return vt.room!==void 0&&vt.room!==null?Et.room=vt.room:Et.room="",vt.identity!==void 0&&vt.identity!==null?Et.identity=vt.identity:Et.identity="",Et}};const st={};a.RemoveParticipantResponse={encode(vt,Et=c.default.Writer.create()){return Et},decode(vt,Et){const It=vt instanceof c.default.Reader?vt:new c.default.Reader(vt);let xt=Et===void 0?It.len:It.pos+Et;const Dt=Object.assign({},st);for(;It.pos<xt;){const Ot=It.uint32();switch(Ot>>>3){default:It.skipType(Ot&7);break}}return Dt},fromJSON(vt){return Object.assign({},st)},toJSON(vt){return{}},fromPartial(vt){return Object.assign({},st)}};const lt={room:"",identity:"",trackSid:"",muted:!1};a.MuteRoomTrackRequest={encode(vt,Et=c.default.Writer.create()){return vt.room!==""&&Et.uint32(10).string(vt.room),vt.identity!==""&&Et.uint32(18).string(vt.identity),vt.trackSid!==""&&Et.uint32(26).string(vt.trackSid),vt.muted===!0&&Et.uint32(32).bool(vt.muted),Et},decode(vt,Et){const It=vt instanceof c.default.Reader?vt:new c.default.Reader(vt);let xt=Et===void 0?It.len:It.pos+Et;const Dt=Object.assign({},lt);for(;It.pos<xt;){const Ot=It.uint32();switch(Ot>>>3){case 1:Dt.room=It.string();break;case 2:Dt.identity=It.string();break;case 3:Dt.trackSid=It.string();break;case 4:Dt.muted=It.bool();break;default:It.skipType(Ot&7);break}}return Dt},fromJSON(vt){const Et=Object.assign({},lt);return vt.room!==void 0&&vt.room!==null?Et.room=String(vt.room):Et.room="",vt.identity!==void 0&&vt.identity!==null?Et.identity=String(vt.identity):Et.identity="",vt.trackSid!==void 0&&vt.trackSid!==null?Et.trackSid=String(vt.trackSid):Et.trackSid="",vt.muted!==void 0&&vt.muted!==null?Et.muted=Boolean(vt.muted):Et.muted=!1,Et},toJSON(vt){const Et={};return vt.room!==void 0&&(Et.room=vt.room),vt.identity!==void 0&&(Et.identity=vt.identity),vt.trackSid!==void 0&&(Et.trackSid=vt.trackSid),vt.muted!==void 0&&(Et.muted=vt.muted),Et},fromPartial(vt){const Et=Object.assign({},lt);return vt.room!==void 0&&vt.room!==null?Et.room=vt.room:Et.room="",vt.identity!==void 0&&vt.identity!==null?Et.identity=vt.identity:Et.identity="",vt.trackSid!==void 0&&vt.trackSid!==null?Et.trackSid=vt.trackSid:Et.trackSid="",vt.muted!==void 0&&vt.muted!==null?Et.muted=vt.muted:Et.muted=!1,Et}};const dt={};a.MuteRoomTrackResponse={encode(vt,Et=c.default.Writer.create()){return vt.track!==void 0&&h.TrackInfo.encode(vt.track,Et.uint32(10).fork()).ldelim(),Et},decode(vt,Et){const It=vt instanceof c.default.Reader?vt:new c.default.Reader(vt);let xt=Et===void 0?It.len:It.pos+Et;const Dt=Object.assign({},dt);for(;It.pos<xt;){const Ot=It.uint32();switch(Ot>>>3){case 1:Dt.track=h.TrackInfo.decode(It,It.uint32());break;default:It.skipType(Ot&7);break}}return Dt},fromJSON(vt){const Et=Object.assign({},dt);return vt.track!==void 0&&vt.track!==null?Et.track=h.TrackInfo.fromJSON(vt.track):Et.track=void 0,Et},toJSON(vt){const Et={};return vt.track!==void 0&&(Et.track=vt.track?h.TrackInfo.toJSON(vt.track):void 0),Et},fromPartial(vt){const Et=Object.assign({},dt);return vt.track!==void 0&&vt.track!==null?Et.track=h.TrackInfo.fromPartial(vt.track):Et.track=void 0,Et}};const ut={canSubscribe:!1,canPublish:!1,canPublishData:!1};a.ParticipantPermission={encode(vt,Et=c.default.Writer.create()){return vt.canSubscribe===!0&&Et.uint32(8).bool(vt.canSubscribe),vt.canPublish===!0&&Et.uint32(16).bool(vt.canPublish),vt.canPublishData===!0&&Et.uint32(24).bool(vt.canPublishData),Et},decode(vt,Et){const It=vt instanceof c.default.Reader?vt:new c.default.Reader(vt);let xt=Et===void 0?It.len:It.pos+Et;const Dt=Object.assign({},ut);for(;It.pos<xt;){const Ot=It.uint32();switch(Ot>>>3){case 1:Dt.canSubscribe=It.bool();break;case 2:Dt.canPublish=It.bool();break;case 3:Dt.canPublishData=It.bool();break;default:It.skipType(Ot&7);break}}return Dt},fromJSON(vt){const Et=Object.assign({},ut);return vt.canSubscribe!==void 0&&vt.canSubscribe!==null?Et.canSubscribe=Boolean(vt.canSubscribe):Et.canSubscribe=!1,vt.canPublish!==void 0&&vt.canPublish!==null?Et.canPublish=Boolean(vt.canPublish):Et.canPublish=!1,vt.canPublishData!==void 0&&vt.canPublishData!==null?Et.canPublishData=Boolean(vt.canPublishData):Et.canPublishData=!1,Et},toJSON(vt){const Et={};return vt.canSubscribe!==void 0&&(Et.canSubscribe=vt.canSubscribe),vt.canPublish!==void 0&&(Et.canPublish=vt.canPublish),vt.canPublishData!==void 0&&(Et.canPublishData=vt.canPublishData),Et},fromPartial(vt){const Et=Object.assign({},ut);return vt.canSubscribe!==void 0&&vt.canSubscribe!==null?Et.canSubscribe=vt.canSubscribe:Et.canSubscribe=!1,vt.canPublish!==void 0&&vt.canPublish!==null?Et.canPublish=vt.canPublish:Et.canPublish=!1,vt.canPublishData!==void 0&&vt.canPublishData!==null?Et.canPublishData=vt.canPublishData:Et.canPublishData=!1,Et}};const ht={room:"",identity:"",metadata:""};a.UpdateParticipantRequest={encode(vt,Et=c.default.Writer.create()){return vt.room!==""&&Et.uint32(10).string(vt.room),vt.identity!==""&&Et.uint32(18).string(vt.identity),vt.metadata!==""&&Et.uint32(26).string(vt.metadata),vt.permission!==void 0&&a.ParticipantPermission.encode(vt.permission,Et.uint32(34).fork()).ldelim(),Et},decode(vt,Et){const It=vt instanceof c.default.Reader?vt:new c.default.Reader(vt);let xt=Et===void 0?It.len:It.pos+Et;const Dt=Object.assign({},ht);for(;It.pos<xt;){const Ot=It.uint32();switch(Ot>>>3){case 1:Dt.room=It.string();break;case 2:Dt.identity=It.string();break;case 3:Dt.metadata=It.string();break;case 4:Dt.permission=a.ParticipantPermission.decode(It,It.uint32());break;default:It.skipType(Ot&7);break}}return Dt},fromJSON(vt){const Et=Object.assign({},ht);return vt.room!==void 0&&vt.room!==null?Et.room=String(vt.room):Et.room="",vt.identity!==void 0&&vt.identity!==null?Et.identity=String(vt.identity):Et.identity="",vt.metadata!==void 0&&vt.metadata!==null?Et.metadata=String(vt.metadata):Et.metadata="",vt.permission!==void 0&&vt.permission!==null?Et.permission=a.ParticipantPermission.fromJSON(vt.permission):Et.permission=void 0,Et},toJSON(vt){const Et={};return vt.room!==void 0&&(Et.room=vt.room),vt.identity!==void 0&&(Et.identity=vt.identity),vt.metadata!==void 0&&(Et.metadata=vt.metadata),vt.permission!==void 0&&(Et.permission=vt.permission?a.ParticipantPermission.toJSON(vt.permission):void 0),Et},fromPartial(vt){const Et=Object.assign({},ht);return vt.room!==void 0&&vt.room!==null?Et.room=vt.room:Et.room="",vt.identity!==void 0&&vt.identity!==null?Et.identity=vt.identity:Et.identity="",vt.metadata!==void 0&&vt.metadata!==null?Et.metadata=vt.metadata:Et.metadata="",vt.permission!==void 0&&vt.permission!==null?Et.permission=a.ParticipantPermission.fromPartial(vt.permission):Et.permission=void 0,Et}};const nt={room:"",identity:"",trackSids:"",subscribe:!1};a.UpdateSubscriptionsRequest={encode(vt,Et=c.default.Writer.create()){vt.room!==""&&Et.uint32(10).string(vt.room),vt.identity!==""&&Et.uint32(18).string(vt.identity);for(const It of vt.trackSids)Et.uint32(26).string(It);vt.subscribe===!0&&Et.uint32(32).bool(vt.subscribe);for(const It of vt.participantTracks)h.ParticipantTracks.encode(It,Et.uint32(42).fork()).ldelim();return Et},decode(vt,Et){const It=vt instanceof c.default.Reader?vt:new c.default.Reader(vt);let xt=Et===void 0?It.len:It.pos+Et;const Dt=Object.assign({},nt);for(Dt.trackSids=[],Dt.participantTracks=[];It.pos<xt;){const Ot=It.uint32();switch(Ot>>>3){case 1:Dt.room=It.string();break;case 2:Dt.identity=It.string();break;case 3:Dt.trackSids.push(It.string());break;case 4:Dt.subscribe=It.bool();break;case 5:Dt.participantTracks.push(h.ParticipantTracks.decode(It,It.uint32()));break;default:It.skipType(Ot&7);break}}return Dt},fromJSON(vt){const Et=Object.assign({},nt);if(Et.trackSids=[],Et.participantTracks=[],vt.room!==void 0&&vt.room!==null?Et.room=String(vt.room):Et.room="",vt.identity!==void 0&&vt.identity!==null?Et.identity=String(vt.identity):Et.identity="",vt.trackSids!==void 0&&vt.trackSids!==null)for(const It of vt.trackSids)Et.trackSids.push(String(It));if(vt.subscribe!==void 0&&vt.subscribe!==null?Et.subscribe=Boolean(vt.subscribe):Et.subscribe=!1,vt.participantTracks!==void 0&&vt.participantTracks!==null)for(const It of vt.participantTracks)Et.participantTracks.push(h.ParticipantTracks.fromJSON(It));return Et},toJSON(vt){const Et={};return vt.room!==void 0&&(Et.room=vt.room),vt.identity!==void 0&&(Et.identity=vt.identity),vt.trackSids?Et.trackSids=vt.trackSids.map(It=>It):Et.trackSids=[],vt.subscribe!==void 0&&(Et.subscribe=vt.subscribe),vt.participantTracks?Et.participantTracks=vt.participantTracks.map(It=>It?h.ParticipantTracks.toJSON(It):void 0):Et.participantTracks=[],Et},fromPartial(vt){const Et=Object.assign({},nt);if(Et.trackSids=[],Et.participantTracks=[],vt.room!==void 0&&vt.room!==null?Et.room=vt.room:Et.room="",vt.identity!==void 0&&vt.identity!==null?Et.identity=vt.identity:Et.identity="",vt.trackSids!==void 0&&vt.trackSids!==null)for(const It of vt.trackSids)Et.trackSids.push(It);if(vt.subscribe!==void 0&&vt.subscribe!==null?Et.subscribe=vt.subscribe:Et.subscribe=!1,vt.participantTracks!==void 0&&vt.participantTracks!==null)for(const It of vt.participantTracks)Et.participantTracks.push(h.ParticipantTracks.fromPartial(It));return Et}};const ct={};a.UpdateSubscriptionsResponse={encode(vt,Et=c.default.Writer.create()){return Et},decode(vt,Et){const It=vt instanceof c.default.Reader?vt:new c.default.Reader(vt);let xt=Et===void 0?It.len:It.pos+Et;const Dt=Object.assign({},ct);for(;It.pos<xt;){const Ot=It.uint32();switch(Ot>>>3){default:It.skipType(Ot&7);break}}return Dt},fromJSON(vt){return Object.assign({},ct)},toJSON(vt){return{}},fromPartial(vt){return Object.assign({},ct)}};const mt={room:"",kind:0,destinationSids:""};a.SendDataRequest={encode(vt,Et=c.default.Writer.create()){vt.room!==""&&Et.uint32(10).string(vt.room),vt.data.length!==0&&Et.uint32(18).bytes(vt.data),vt.kind!==0&&Et.uint32(24).int32(vt.kind);for(const It of vt.destinationSids)Et.uint32(34).string(It);return Et},decode(vt,Et){const It=vt instanceof c.default.Reader?vt:new c.default.Reader(vt);let xt=Et===void 0?It.len:It.pos+Et;const Dt=Object.assign({},mt);for(Dt.destinationSids=[],Dt.data=new Uint8Array;It.pos<xt;){const Ot=It.uint32();switch(Ot>>>3){case 1:Dt.room=It.string();break;case 2:Dt.data=It.bytes();break;case 3:Dt.kind=It.int32();break;case 4:Dt.destinationSids.push(It.string());break;default:It.skipType(Ot&7);break}}return Dt},fromJSON(vt){const Et=Object.assign({},mt);if(Et.destinationSids=[],Et.data=new Uint8Array,vt.room!==void 0&&vt.room!==null?Et.room=String(vt.room):Et.room="",vt.data!==void 0&&vt.data!==null&&(Et.data=gt(vt.data)),vt.kind!==void 0&&vt.kind!==null?Et.kind=h.dataPacket_KindFromJSON(vt.kind):Et.kind=0,vt.destinationSids!==void 0&&vt.destinationSids!==null)for(const It of vt.destinationSids)Et.destinationSids.push(String(It));return Et},toJSON(vt){const Et={};return vt.room!==void 0&&(Et.room=vt.room),vt.data!==void 0&&(Et.data=Nt(vt.data!==void 0?vt.data:new Uint8Array)),vt.kind!==void 0&&(Et.kind=h.dataPacket_KindToJSON(vt.kind)),vt.destinationSids?Et.destinationSids=vt.destinationSids.map(It=>It):Et.destinationSids=[],Et},fromPartial(vt){const Et=Object.assign({},mt);if(Et.destinationSids=[],vt.room!==void 0&&vt.room!==null?Et.room=vt.room:Et.room="",vt.data!==void 0&&vt.data!==null?Et.data=vt.data:Et.data=new Uint8Array,vt.kind!==void 0&&vt.kind!==null?Et.kind=vt.kind:Et.kind=0,vt.destinationSids!==void 0&&vt.destinationSids!==null)for(const It of vt.destinationSids)Et.destinationSids.push(It);return Et}};const kt={};a.SendDataResponse={encode(vt,Et=c.default.Writer.create()){return Et},decode(vt,Et){const It=vt instanceof c.default.Reader?vt:new c.default.Reader(vt);let xt=Et===void 0?It.len:It.pos+Et;const Dt=Object.assign({},kt);for(;It.pos<xt;){const Ot=It.uint32();switch(Ot>>>3){default:It.skipType(Ot&7);break}}return Dt},fromJSON(vt){return Object.assign({},kt)},toJSON(vt){return{}},fromPartial(vt){return Object.assign({},kt)}};const Tt={room:"",metadata:""};a.UpdateRoomMetadataRequest={encode(vt,Et=c.default.Writer.create()){return vt.room!==""&&Et.uint32(10).string(vt.room),vt.metadata!==""&&Et.uint32(18).string(vt.metadata),Et},decode(vt,Et){const It=vt instanceof c.default.Reader?vt:new c.default.Reader(vt);let xt=Et===void 0?It.len:It.pos+Et;const Dt=Object.assign({},Tt);for(;It.pos<xt;){const Ot=It.uint32();switch(Ot>>>3){case 1:Dt.room=It.string();break;case 2:Dt.metadata=It.string();break;default:It.skipType(Ot&7);break}}return Dt},fromJSON(vt){const Et=Object.assign({},Tt);return vt.room!==void 0&&vt.room!==null?Et.room=String(vt.room):Et.room="",vt.metadata!==void 0&&vt.metadata!==null?Et.metadata=String(vt.metadata):Et.metadata="",Et},toJSON(vt){const Et={};return vt.room!==void 0&&(Et.room=vt.room),vt.metadata!==void 0&&(Et.metadata=vt.metadata),Et},fromPartial(vt){const Et=Object.assign({},Tt);return vt.room!==void 0&&vt.room!==null?Et.room=vt.room:Et.room="",vt.metadata!==void 0&&vt.metadata!==null?Et.metadata=vt.metadata:Et.metadata="",Et}};var Pt=(()=>{if(typeof Pt!="undefined")return Pt;if(typeof self!="undefined")return self;if(typeof window!="undefined")return window;if(typeof commonjsGlobal$1!="undefined")return commonjsGlobal$1;throw"Unable to locate global object"})();const At=Pt.atob||(vt=>Pt.Buffer.from(vt,"base64").toString("binary"));function gt(vt){const Et=At(vt),It=new Uint8Array(Et.length);for(let xt=0;xt<Et.length;++xt)It[xt]=Et.charCodeAt(xt);return It}const Ct=Pt.btoa||(vt=>Pt.Buffer.from(vt,"binary").toString("base64"));function Nt(vt){const Et=[];for(const It of vt)Et.push(String.fromCharCode(It));return Ct(Et.join(""))}c.default.util.Long!==d.default&&(c.default.util.Long=d.default,c.default.configure())})(livekit_room);var TwirpRPC={},axios$2={exports:{}},bind$2=function a(s,d){return function(){for(var h=new Array(arguments.length),b=0;b<h.length;b++)h[b]=arguments[b];return s.apply(d,h)}},bind$1=bind$2,toString=Object.prototype.toString;function isArray$1(a){return toString.call(a)==="[object Array]"}function isUndefined(a){return typeof a=="undefined"}function isBuffer(a){return a!==null&&!isUndefined(a)&&a.constructor!==null&&!isUndefined(a.constructor)&&typeof a.constructor.isBuffer=="function"&&a.constructor.isBuffer(a)}function isArrayBuffer(a){return toString.call(a)==="[object ArrayBuffer]"}function isFormData(a){return typeof FormData!="undefined"&&a instanceof FormData}function isArrayBufferView(a){var s;return typeof ArrayBuffer!="undefined"&&ArrayBuffer.isView?s=ArrayBuffer.isView(a):s=a&&a.buffer&&a.buffer instanceof ArrayBuffer,s}function isString(a){return typeof a=="string"}function isNumber(a){return typeof a=="number"}function isObject$3(a){return a!==null&&typeof a=="object"}function isPlainObject(a){if(toString.call(a)!=="[object Object]")return!1;var s=Object.getPrototypeOf(a);return s===null||s===Object.prototype}function isDate(a){return toString.call(a)==="[object Date]"}function isFile(a){return toString.call(a)==="[object File]"}function isBlob(a){return toString.call(a)==="[object Blob]"}function isFunction(a){return toString.call(a)==="[object Function]"}function isStream(a){return isObject$3(a)&&isFunction(a.pipe)}function isURLSearchParams(a){return typeof URLSearchParams!="undefined"&&a instanceof URLSearchParams}function trim$1(a){return a.trim?a.trim():a.replace(/^\s+|\s+$/g,"")}function isStandardBrowserEnv(){return typeof navigator!="undefined"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window!="undefined"&&typeof document!="undefined"}function forEach(a,s){if(!(a===null||typeof a=="undefined"))if(typeof a!="object"&&(a=[a]),isArray$1(a))for(var d=0,c=a.length;d<c;d++)s.call(null,a[d],d,a);else for(var h in a)Object.prototype.hasOwnProperty.call(a,h)&&s.call(null,a[h],h,a)}function merge(){var a={};function s(h,b){isPlainObject(a[b])&&isPlainObject(h)?a[b]=merge(a[b],h):isPlainObject(h)?a[b]=merge({},h):isArray$1(h)?a[b]=h.slice():a[b]=h}for(var d=0,c=arguments.length;d<c;d++)forEach(arguments[d],s);return a}function extend(a,s,d){return forEach(s,function(h,b){d&&typeof h=="function"?a[b]=bind$1(h,d):a[b]=h}),a}function stripBOM(a){return a.charCodeAt(0)===65279&&(a=a.slice(1)),a}var utils$d={isArray:isArray$1,isArrayBuffer,isBuffer,isFormData,isArrayBufferView,isString,isNumber,isObject:isObject$3,isPlainObject,isUndefined,isDate,isFile,isBlob,isFunction,isStream,isURLSearchParams,isStandardBrowserEnv,forEach,merge,extend,trim:trim$1,stripBOM},utils$c=utils$d;function encode(a){return encodeURIComponent(a).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var buildURL$2=function a(s,d,c){if(!d)return s;var h;if(c)h=c(d);else if(utils$c.isURLSearchParams(d))h=d.toString();else{var b=[];utils$c.forEach(d,function(_e,tt){_e===null||typeof _e=="undefined"||(utils$c.isArray(_e)?tt=tt+"[]":_e=[_e],utils$c.forEach(_e,function(ot){utils$c.isDate(ot)?ot=ot.toISOString():utils$c.isObject(ot)&&(ot=JSON.stringify(ot)),b.push(encode(tt)+"="+encode(ot))}))}),h=b.join("&")}if(h){var _=s.indexOf("#");_!==-1&&(s=s.slice(0,_)),s+=(s.indexOf("?")===-1?"?":"&")+h}return s},utils$b=utils$d;function InterceptorManager$1(){this.handlers=[]}InterceptorManager$1.prototype.use=function a(s,d,c){return this.handlers.push({fulfilled:s,rejected:d,synchronous:c?c.synchronous:!1,runWhen:c?c.runWhen:null}),this.handlers.length-1};InterceptorManager$1.prototype.eject=function a(s){this.handlers[s]&&(this.handlers[s]=null)};InterceptorManager$1.prototype.forEach=function a(s){utils$b.forEach(this.handlers,function(c){c!==null&&s(c)})};var InterceptorManager_1=InterceptorManager$1,utils$a=utils$d,normalizeHeaderName$1=function a(s,d){utils$a.forEach(s,function(h,b){b!==d&&b.toUpperCase()===d.toUpperCase()&&(s[d]=h,delete s[b])})},enhanceError$2=function a(s,d,c,h,b){return s.config=d,c&&(s.code=c),s.request=h,s.response=b,s.isAxiosError=!0,s.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},s},enhanceError$1=enhanceError$2,createError$2=function a(s,d,c,h,b){var _=new Error(s);return enhanceError$1(_,d,c,h,b)},createError$1=createError$2,settle$1=function a(s,d,c){var h=c.config.validateStatus;!c.status||!h||h(c.status)?s(c):d(createError$1("Request failed with status code "+c.status,c.config,null,c.request,c))},utils$9=utils$d,cookies$1=utils$9.isStandardBrowserEnv()?function a(){return{write:function(d,c,h,b,_,$){var _e=[];_e.push(d+"="+encodeURIComponent(c)),utils$9.isNumber(h)&&_e.push("expires="+new Date(h).toGMTString()),utils$9.isString(b)&&_e.push("path="+b),utils$9.isString(_)&&_e.push("domain="+_),$===!0&&_e.push("secure"),document.cookie=_e.join("; ")},read:function(d){var c=document.cookie.match(new RegExp("(^|;\\s*)("+d+")=([^;]*)"));return c?decodeURIComponent(c[3]):null},remove:function(d){this.write(d,"",Date.now()-864e5)}}}():function a(){return{write:function(){},read:function(){return null},remove:function(){}}}(),isAbsoluteURL$1=function a(s){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(s)},combineURLs$1=function a(s,d){return d?s.replace(/\/+$/,"")+"/"+d.replace(/^\/+/,""):s},isAbsoluteURL=isAbsoluteURL$1,combineURLs=combineURLs$1,buildFullPath$1=function a(s,d){return s&&!isAbsoluteURL(d)?combineURLs(s,d):d},utils$8=utils$d,ignoreDuplicateOf=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"],parseHeaders$1=function a(s){var d={},c,h,b;return s&&utils$8.forEach(s.split(`
`),function($){if(b=$.indexOf(":"),c=utils$8.trim($.substr(0,b)).toLowerCase(),h=utils$8.trim($.substr(b+1)),c){if(d[c]&&ignoreDuplicateOf.indexOf(c)>=0)return;c==="set-cookie"?d[c]=(d[c]?d[c]:[]).concat([h]):d[c]=d[c]?d[c]+", "+h:h}}),d},utils$7=utils$d,isURLSameOrigin$1=utils$7.isStandardBrowserEnv()?function a(){var s=/(msie|trident)/i.test(navigator.userAgent),d=document.createElement("a"),c;function h(b){var _=b;return s&&(d.setAttribute("href",_),_=d.href),d.setAttribute("href",_),{href:d.href,protocol:d.protocol?d.protocol.replace(/:$/,""):"",host:d.host,search:d.search?d.search.replace(/^\?/,""):"",hash:d.hash?d.hash.replace(/^#/,""):"",hostname:d.hostname,port:d.port,pathname:d.pathname.charAt(0)==="/"?d.pathname:"/"+d.pathname}}return c=h(window.location.href),function(_){var $=utils$7.isString(_)?h(_):_;return $.protocol===c.protocol&&$.host===c.host}}():function a(){return function(){return!0}}(),utils$6=utils$d,settle=settle$1,cookies=cookies$1,buildURL$1=buildURL$2,buildFullPath=buildFullPath$1,parseHeaders=parseHeaders$1,isURLSameOrigin=isURLSameOrigin$1,createError=createError$2,xhr=function a(s){return new Promise(function(c,h){var b=s.data,_=s.headers,$=s.responseType;utils$6.isFormData(b)&&delete _["Content-Type"];var _e=new XMLHttpRequest;if(s.auth){var tt=s.auth.username||"",rt=s.auth.password?unescape(encodeURIComponent(s.auth.password)):"";_.Authorization="Basic "+btoa(tt+":"+rt)}var ot=buildFullPath(s.baseURL,s.url);_e.open(s.method.toUpperCase(),buildURL$1(ot,s.params,s.paramsSerializer),!0),_e.timeout=s.timeout;function it(){if(!!_e){var lt="getAllResponseHeaders"in _e?parseHeaders(_e.getAllResponseHeaders()):null,dt=!$||$==="text"||$==="json"?_e.responseText:_e.response,ut={data:dt,status:_e.status,statusText:_e.statusText,headers:lt,config:s,request:_e};settle(c,h,ut),_e=null}}if("onloadend"in _e?_e.onloadend=it:_e.onreadystatechange=function(){!_e||_e.readyState!==4||_e.status===0&&!(_e.responseURL&&_e.responseURL.indexOf("file:")===0)||setTimeout(it)},_e.onabort=function(){!_e||(h(createError("Request aborted",s,"ECONNABORTED",_e)),_e=null)},_e.onerror=function(){h(createError("Network Error",s,null,_e)),_e=null},_e.ontimeout=function(){var dt="timeout of "+s.timeout+"ms exceeded";s.timeoutErrorMessage&&(dt=s.timeoutErrorMessage),h(createError(dt,s,s.transitional&&s.transitional.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",_e)),_e=null},utils$6.isStandardBrowserEnv()){var st=(s.withCredentials||isURLSameOrigin(ot))&&s.xsrfCookieName?cookies.read(s.xsrfCookieName):void 0;st&&(_[s.xsrfHeaderName]=st)}"setRequestHeader"in _e&&utils$6.forEach(_,function(dt,ut){typeof b=="undefined"&&ut.toLowerCase()==="content-type"?delete _[ut]:_e.setRequestHeader(ut,dt)}),utils$6.isUndefined(s.withCredentials)||(_e.withCredentials=!!s.withCredentials),$&&$!=="json"&&(_e.responseType=s.responseType),typeof s.onDownloadProgress=="function"&&_e.addEventListener("progress",s.onDownloadProgress),typeof s.onUploadProgress=="function"&&_e.upload&&_e.upload.addEventListener("progress",s.onUploadProgress),s.cancelToken&&s.cancelToken.promise.then(function(dt){!_e||(_e.abort(),h(dt),_e=null)}),b||(b=null),_e.send(b)})},utils$5=utils$d,normalizeHeaderName=normalizeHeaderName$1,enhanceError=enhanceError$2,DEFAULT_CONTENT_TYPE={"Content-Type":"application/x-www-form-urlencoded"};function setContentTypeIfUnset(a,s){!utils$5.isUndefined(a)&&utils$5.isUndefined(a["Content-Type"])&&(a["Content-Type"]=s)}function getDefaultAdapter(){var a;return(typeof XMLHttpRequest!="undefined"||typeof process!="undefined"&&Object.prototype.toString.call(process)==="[object process]")&&(a=xhr),a}function stringifySafely(a,s,d){if(utils$5.isString(a))try{return(s||JSON.parse)(a),utils$5.trim(a)}catch(c){if(c.name!=="SyntaxError")throw c}return(d||JSON.stringify)(a)}var defaults$3={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:getDefaultAdapter(),transformRequest:[function a(s,d){return normalizeHeaderName(d,"Accept"),normalizeHeaderName(d,"Content-Type"),utils$5.isFormData(s)||utils$5.isArrayBuffer(s)||utils$5.isBuffer(s)||utils$5.isStream(s)||utils$5.isFile(s)||utils$5.isBlob(s)?s:utils$5.isArrayBufferView(s)?s.buffer:utils$5.isURLSearchParams(s)?(setContentTypeIfUnset(d,"application/x-www-form-urlencoded;charset=utf-8"),s.toString()):utils$5.isObject(s)||d&&d["Content-Type"]==="application/json"?(setContentTypeIfUnset(d,"application/json"),stringifySafely(s)):s}],transformResponse:[function a(s){var d=this.transitional,c=d&&d.silentJSONParsing,h=d&&d.forcedJSONParsing,b=!c&&this.responseType==="json";if(b||h&&utils$5.isString(s)&&s.length)try{return JSON.parse(s)}catch(_){if(b)throw _.name==="SyntaxError"?enhanceError(_,this,"E_JSON_PARSE"):_}return s}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function a(s){return s>=200&&s<300}};defaults$3.headers={common:{Accept:"application/json, text/plain, */*"}};utils$5.forEach(["delete","get","head"],function a(s){defaults$3.headers[s]={}});utils$5.forEach(["post","put","patch"],function a(s){defaults$3.headers[s]=utils$5.merge(DEFAULT_CONTENT_TYPE)});var defaults_1=defaults$3,utils$4=utils$d,defaults$2=defaults_1,transformData$1=function a(s,d,c){var h=this||defaults$2;return utils$4.forEach(c,function(_){s=_.call(h,s,d)}),s},isCancel$1=function a(s){return!!(s&&s.__CANCEL__)},utils$3=utils$d,transformData=transformData$1,isCancel=isCancel$1,defaults$1=defaults_1;function throwIfCancellationRequested(a){a.cancelToken&&a.cancelToken.throwIfRequested()}var dispatchRequest$1=function a(s){throwIfCancellationRequested(s),s.headers=s.headers||{},s.data=transformData.call(s,s.data,s.headers,s.transformRequest),s.headers=utils$3.merge(s.headers.common||{},s.headers[s.method]||{},s.headers),utils$3.forEach(["delete","get","head","post","put","patch","common"],function(h){delete s.headers[h]});var d=s.adapter||defaults$1.adapter;return d(s).then(function(h){return throwIfCancellationRequested(s),h.data=transformData.call(s,h.data,h.headers,s.transformResponse),h},function(h){return isCancel(h)||(throwIfCancellationRequested(s),h&&h.response&&(h.response.data=transformData.call(s,h.response.data,h.response.headers,s.transformResponse))),Promise.reject(h)})},utils$2=utils$d,mergeConfig$2=function a(s,d){d=d||{};var c={},h=["url","method","data"],b=["headers","auth","proxy","params"],_=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],$=["validateStatus"];function _e(it,st){return utils$2.isPlainObject(it)&&utils$2.isPlainObject(st)?utils$2.merge(it,st):utils$2.isPlainObject(st)?utils$2.merge({},st):utils$2.isArray(st)?st.slice():st}function tt(it){utils$2.isUndefined(d[it])?utils$2.isUndefined(s[it])||(c[it]=_e(void 0,s[it])):c[it]=_e(s[it],d[it])}utils$2.forEach(h,function(st){utils$2.isUndefined(d[st])||(c[st]=_e(void 0,d[st]))}),utils$2.forEach(b,tt),utils$2.forEach(_,function(st){utils$2.isUndefined(d[st])?utils$2.isUndefined(s[st])||(c[st]=_e(void 0,s[st])):c[st]=_e(void 0,d[st])}),utils$2.forEach($,function(st){st in d?c[st]=_e(s[st],d[st]):st in s&&(c[st]=_e(void 0,s[st]))});var rt=h.concat(b).concat(_).concat($),ot=Object.keys(s).concat(Object.keys(d)).filter(function(st){return rt.indexOf(st)===-1});return utils$2.forEach(ot,tt),c};const name="axios",version$2="0.21.4",description="Promise based HTTP client for the browser and node.js",main="index.js",scripts={test:"grunt test",start:"node ./sandbox/server.js",build:"NODE_ENV=production grunt build",preversion:"npm test",version:"npm run build && grunt version && git add -A dist && git add CHANGELOG.md bower.json package.json",postversion:"git push && git push --tags",examples:"node ./examples/server.js",coveralls:"cat coverage/lcov.info | ./node_modules/coveralls/bin/coveralls.js",fix:"eslint --fix lib/**/*.js"},repository={type:"git",url:"https://github.com/axios/axios.git"},keywords=["xhr","http","ajax","promise","node"],author="Matt Zabriskie",license="MIT",bugs={url:"https://github.com/axios/axios/issues"},homepage="https://axios-http.com",devDependencies={coveralls:"^3.0.0","es6-promise":"^4.2.4",grunt:"^1.3.0","grunt-banner":"^0.6.0","grunt-cli":"^1.2.0","grunt-contrib-clean":"^1.1.0","grunt-contrib-watch":"^1.0.0","grunt-eslint":"^23.0.0","grunt-karma":"^4.0.0","grunt-mocha-test":"^0.13.3","grunt-ts":"^6.0.0-beta.19","grunt-webpack":"^4.0.2","istanbul-instrumenter-loader":"^1.0.0","jasmine-core":"^2.4.1",karma:"^6.3.2","karma-chrome-launcher":"^3.1.0","karma-firefox-launcher":"^2.1.0","karma-jasmine":"^1.1.1","karma-jasmine-ajax":"^0.1.13","karma-safari-launcher":"^1.0.0","karma-sauce-launcher":"^4.3.6","karma-sinon":"^1.0.5","karma-sourcemap-loader":"^0.3.8","karma-webpack":"^4.0.2","load-grunt-tasks":"^3.5.2",minimist:"^1.2.0",mocha:"^8.2.1",sinon:"^4.5.0","terser-webpack-plugin":"^4.2.3",typescript:"^4.0.5","url-search-params":"^0.10.0",webpack:"^4.44.2","webpack-dev-server":"^3.11.0"},browser={"./lib/adapters/http.js":"./lib/adapters/xhr.js"},jsdelivr="dist/axios.min.js",unpkg="dist/axios.min.js",typings="./index.d.ts",dependencies={"follow-redirects":"^1.14.0"},bundlesize=[{path:"./dist/axios.min.js",threshold:"5kB"}];var require$$0={name,version:version$2,description,main,scripts,repository,keywords,author,license,bugs,homepage,devDependencies,browser,jsdelivr,unpkg,typings,dependencies,bundlesize},pkg=require$$0,validators$1={};["object","boolean","number","function","string","symbol"].forEach(function(a,s){validators$1[a]=function(c){return typeof c===a||"a"+(s<1?"n ":" ")+a}});var deprecatedWarnings={},currentVerArr=pkg.version.split(".");function isOlderVersion(a,s){for(var d=s?s.split("."):currentVerArr,c=a.split("."),h=0;h<3;h++){if(d[h]>c[h])return!0;if(d[h]<c[h])return!1}return!1}validators$1.transitional=function a(s,d,c){var h=d&&isOlderVersion(d);function b(_,$){return"[Axios v"+pkg.version+"] Transitional option '"+_+"'"+$+(c?". "+c:"")}return function(_,$,_e){if(s===!1)throw new Error(b($," has been removed in "+d));return h&&!deprecatedWarnings[$]&&(deprecatedWarnings[$]=!0,console.warn(b($," has been deprecated since v"+d+" and will be removed in the near future"))),s?s(_,$,_e):!0}};function assertOptions(a,s,d){if(typeof a!="object")throw new TypeError("options must be an object");for(var c=Object.keys(a),h=c.length;h-- >0;){var b=c[h],_=s[b];if(_){var $=a[b],_e=$===void 0||_($,b,a);if(_e!==!0)throw new TypeError("option "+b+" must be "+_e);continue}if(d!==!0)throw Error("Unknown option "+b)}}var validator$1={isOlderVersion,assertOptions,validators:validators$1},utils$1=utils$d,buildURL=buildURL$2,InterceptorManager=InterceptorManager_1,dispatchRequest=dispatchRequest$1,mergeConfig$1=mergeConfig$2,validator=validator$1,validators=validator.validators;function Axios$1(a){this.defaults=a,this.interceptors={request:new InterceptorManager,response:new InterceptorManager}}Axios$1.prototype.request=function a(s){typeof s=="string"?(s=arguments[1]||{},s.url=arguments[0]):s=s||{},s=mergeConfig$1(this.defaults,s),s.method?s.method=s.method.toLowerCase():this.defaults.method?s.method=this.defaults.method.toLowerCase():s.method="get";var d=s.transitional;d!==void 0&&validator.assertOptions(d,{silentJSONParsing:validators.transitional(validators.boolean,"1.0.0"),forcedJSONParsing:validators.transitional(validators.boolean,"1.0.0"),clarifyTimeoutError:validators.transitional(validators.boolean,"1.0.0")},!1);var c=[],h=!0;this.interceptors.request.forEach(function(it){typeof it.runWhen=="function"&&it.runWhen(s)===!1||(h=h&&it.synchronous,c.unshift(it.fulfilled,it.rejected))});var b=[];this.interceptors.response.forEach(function(it){b.push(it.fulfilled,it.rejected)});var _;if(!h){var $=[dispatchRequest,void 0];for(Array.prototype.unshift.apply($,c),$=$.concat(b),_=Promise.resolve(s);$.length;)_=_.then($.shift(),$.shift());return _}for(var _e=s;c.length;){var tt=c.shift(),rt=c.shift();try{_e=tt(_e)}catch(ot){rt(ot);break}}try{_=dispatchRequest(_e)}catch(ot){return Promise.reject(ot)}for(;b.length;)_=_.then(b.shift(),b.shift());return _};Axios$1.prototype.getUri=function a(s){return s=mergeConfig$1(this.defaults,s),buildURL(s.url,s.params,s.paramsSerializer).replace(/^\?/,"")};utils$1.forEach(["delete","get","head","options"],function a(s){Axios$1.prototype[s]=function(d,c){return this.request(mergeConfig$1(c||{},{method:s,url:d,data:(c||{}).data}))}});utils$1.forEach(["post","put","patch"],function a(s){Axios$1.prototype[s]=function(d,c,h){return this.request(mergeConfig$1(h||{},{method:s,url:d,data:c}))}});var Axios_1=Axios$1;function Cancel$1(a){this.message=a}Cancel$1.prototype.toString=function a(){return"Cancel"+(this.message?": "+this.message:"")};Cancel$1.prototype.__CANCEL__=!0;var Cancel_1=Cancel$1,Cancel=Cancel_1;function CancelToken(a){if(typeof a!="function")throw new TypeError("executor must be a function.");var s;this.promise=new Promise(function(h){s=h});var d=this;a(function(h){d.reason||(d.reason=new Cancel(h),s(d.reason))})}CancelToken.prototype.throwIfRequested=function a(){if(this.reason)throw this.reason};CancelToken.source=function a(){var s,d=new CancelToken(function(h){s=h});return{token:d,cancel:s}};var CancelToken_1=CancelToken,spread=function a(s){return function(c){return s.apply(null,c)}},isAxiosError=function a(s){return typeof s=="object"&&s.isAxiosError===!0},utils=utils$d,bind=bind$2,Axios=Axios_1,mergeConfig=mergeConfig$2,defaults=defaults_1;function createInstance(a){var s=new Axios(a),d=bind(Axios.prototype.request,s);return utils.extend(d,Axios.prototype,s),utils.extend(d,s),d}var axios$1=createInstance(defaults);axios$1.Axios=Axios;axios$1.create=function a(s){return createInstance(mergeConfig(axios$1.defaults,s))};axios$1.Cancel=Cancel_1;axios$1.CancelToken=CancelToken_1;axios$1.isCancel=isCancel$1;axios$1.all=function a(s){return Promise.all(s)};axios$1.spread=spread;axios$1.isAxiosError=isAxiosError;axios$2.exports=axios$1;axios$2.exports.default=axios$1;var axios=axios$2.exports,mapObj$1={exports:{}};const isObject$2=a=>typeof a=="object"&&a!==null,mapObjectSkip=Symbol("skip"),isObjectCustom=a=>isObject$2(a)&&!(a instanceof RegExp)&&!(a instanceof Error)&&!(a instanceof Date),mapObject=(a,s,d,c=new WeakMap)=>{if(d={deep:!1,target:{},...d},c.has(a))return c.get(a);c.set(a,d.target);const{target:h}=d;delete d.target;const b=_=>_.map($=>isObjectCustom($)?mapObject($,s,d,c):$);if(Array.isArray(a))return b(a);for(const[_,$]of Object.entries(a)){const _e=s(_,$,a);if(_e===mapObjectSkip)continue;let[tt,rt,{shouldRecurse:ot=!0}={}]=_e;tt!=="__proto__"&&(d.deep&&ot&&isObjectCustom(rt)&&(rt=Array.isArray(rt)?b(rt):mapObject(rt,s,d,c)),h[tt]=rt)}return h};mapObj$1.exports=(a,s,d)=>{if(!isObject$2(a))throw new TypeError(`Expected an object, got \`${a}\` (${typeof a})`);return mapObject(a,s,d)};mapObj$1.exports.mapObjectSkip=mapObjectSkip;var camelcase={exports:{}};const UPPERCASE=/[\p{Lu}]/u,LOWERCASE=/[\p{Ll}]/u,LEADING_CAPITAL=/^[\p{Lu}](?![\p{Lu}])/gu,IDENTIFIER=/([\p{Alpha}\p{N}_]|$)/u,SEPARATORS=/[_.\- ]+/,LEADING_SEPARATORS=new RegExp("^"+SEPARATORS.source),SEPARATORS_AND_IDENTIFIER=new RegExp(SEPARATORS.source+IDENTIFIER.source,"gu"),NUMBERS_AND_IDENTIFIER=new RegExp("\\d+"+IDENTIFIER.source,"gu"),preserveCamelCase=(a,s,d)=>{let c=!1,h=!1,b=!1;for(let _=0;_<a.length;_++){const $=a[_];c&&UPPERCASE.test($)?(a=a.slice(0,_)+"-"+a.slice(_),c=!1,b=h,h=!0,_++):h&&b&&LOWERCASE.test($)?(a=a.slice(0,_-1)+"-"+a.slice(_-1),b=h,h=!1,c=!0):(c=s($)===$&&d($)!==$,b=h,h=d($)===$&&s($)!==$)}return a},preserveConsecutiveUppercase=(a,s)=>(LEADING_CAPITAL.lastIndex=0,a.replace(LEADING_CAPITAL,d=>s(d))),postProcess=(a,s)=>(SEPARATORS_AND_IDENTIFIER.lastIndex=0,NUMBERS_AND_IDENTIFIER.lastIndex=0,a.replace(SEPARATORS_AND_IDENTIFIER,(d,c)=>s(c)).replace(NUMBERS_AND_IDENTIFIER,d=>s(d))),camelCase$1=(a,s)=>{if(!(typeof a=="string"||Array.isArray(a)))throw new TypeError("Expected the input to be `string | string[]`");if(s={pascalCase:!1,preserveConsecutiveUppercase:!1,...s},Array.isArray(a)?a=a.map(b=>b.trim()).filter(b=>b.length).join("-"):a=a.trim(),a.length===0)return"";const d=s.locale===!1?b=>b.toLowerCase():b=>b.toLocaleLowerCase(s.locale),c=s.locale===!1?b=>b.toUpperCase():b=>b.toLocaleUpperCase(s.locale);return a.length===1?s.pascalCase?c(a):d(a):(a!==d(a)&&(a=preserveCamelCase(a,d,c)),a=a.replace(LEADING_SEPARATORS,""),s.preserveConsecutiveUppercase?a=preserveConsecutiveUppercase(a,d):a=d(a),s.pascalCase&&(a=c(a.charAt(0))+a.slice(1)),postProcess(a,c))};camelcase.exports=camelCase$1;camelcase.exports.default=camelCase$1;class QuickLRU{constructor(s={}){if(!(s.maxSize&&s.maxSize>0))throw new TypeError("`maxSize` must be a number greater than 0");this.maxSize=s.maxSize,this.onEviction=s.onEviction,this.cache=new Map,this.oldCache=new Map,this._size=0}_set(s,d){if(this.cache.set(s,d),this._size++,this._size>=this.maxSize){if(this._size=0,typeof this.onEviction=="function")for(const[c,h]of this.oldCache.entries())this.onEviction(c,h);this.oldCache=this.cache,this.cache=new Map}}get(s){if(this.cache.has(s))return this.cache.get(s);if(this.oldCache.has(s)){const d=this.oldCache.get(s);return this.oldCache.delete(s),this._set(s,d),d}}set(s,d){return this.cache.has(s)?this.cache.set(s,d):this._set(s,d),this}has(s){return this.cache.has(s)||this.oldCache.has(s)}peek(s){if(this.cache.has(s))return this.cache.get(s);if(this.oldCache.has(s))return this.oldCache.get(s)}delete(s){const d=this.cache.delete(s);return d&&this._size--,this.oldCache.delete(s)||d}clear(){this.cache.clear(),this.oldCache.clear(),this._size=0}*keys(){for(const[s]of this)yield s}*values(){for(const[,s]of this)yield s}*[Symbol.iterator](){for(const s of this.cache)yield s;for(const s of this.oldCache){const[d]=s;this.cache.has(d)||(yield s)}}get size(){let s=0;for(const d of this.oldCache.keys())this.cache.has(d)||s++;return Math.min(this._size+s,this.maxSize)}}var quickLru=QuickLRU;const mapObj=mapObj$1.exports,camelCase=camelcase.exports,QuickLru=quickLru,has=(a,s)=>a.some(d=>typeof d=="string"?d===s:(d.lastIndex=0,d.test(s))),cache$1=new QuickLru({maxSize:1e5}),isObject$1=a=>typeof a=="object"&&a!==null&&!(a instanceof RegExp)&&!(a instanceof Error)&&!(a instanceof Date),camelCaseConvert=(a,s)=>{if(!isObject$1(a))return a;s={deep:!1,pascalCase:!1,...s};const{exclude:d,pascalCase:c,stopPaths:h,deep:b}=s,_=new Set(h),$=_e=>(tt,rt)=>{if(b&&isObject$1(rt)){const ot=_e===void 0?tt:`${_e}.${tt}`;_.has(ot)||(rt=mapObj(rt,$(ot)))}if(!(d&&has(d,tt))){const ot=c?`${tt}_`:tt;if(cache$1.has(ot))tt=cache$1.get(ot);else{const it=camelCase(tt,{pascalCase:c,locale:!1});tt.length<100&&cache$1.set(ot,it),tt=it}}return[tt,rt]};return mapObj(a,$(void 0))};var camelcaseKeys=(a,s)=>Array.isArray(a)?Object.keys(a).map(d=>camelCaseConvert(a[d],s)):camelCaseConvert(a,s),__importDefault=commonjsGlobal$1&&commonjsGlobal$1.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(TwirpRPC,"__esModule",{value:!0});TwirpRPC.TwirpRpc=TwirpRPC.livekitPackage=void 0;const axios_1=__importDefault(axios),camelcase_keys_1=__importDefault(camelcaseKeys),defaultPrefix="/twirp";TwirpRPC.livekitPackage="livekit";class TwirpRpc{constructor(s,d,c,h){this.host=s,this.pkg=d,this.prefix=c||defaultPrefix;let b={baseURL:s};h!=null&&(b.headers={Host:h}),this.instance=axios_1.default.create(b)}request(s,d,c,h){return new Promise((b,_)=>{const $=`${this.prefix}/${this.pkg}.${s}/${d}`;this.instance.post($,c,{headers:h}).then(_e=>{b(camelcase_keys_1.default(_e.data,{deep:!0}))}).catch(_)})}}TwirpRPC.TwirpRpc=TwirpRpc;var __awaiter=commonjsGlobal$1&&commonjsGlobal$1.__awaiter||function(a,s,d,c){function h(b){return b instanceof d?b:new d(function(_){_(b)})}return new(d||(d=Promise))(function(b,_){function $(rt){try{tt(c.next(rt))}catch(ot){_(ot)}}function _e(rt){try{tt(c.throw(rt))}catch(ot){_(ot)}}function tt(rt){rt.done?b(rt.value):h(rt.value).then($,_e)}tt((c=c.apply(a,s||[])).next())})};Object.defineProperty(RoomServiceClient$1,"__esModule",{value:!0});RoomServiceClient$1.RoomServiceClient=void 0;const livekit_models_1=livekit_models,livekit_room_1=livekit_room,TwirpRPC_1=TwirpRPC,svc="RoomService";class RoomServiceClient{constructor(s,d,c,h,b){this.rpc=new TwirpRPC_1.TwirpRpc(s,TwirpRPC_1.livekitPackage,void 0,b),this.apiKey=d,this.secret=c,this.jwt=h}createRoom(s){return __awaiter(this,void 0,void 0,function*(){const d=yield this.rpc.request(svc,"CreateRoom",livekit_room_1.CreateRoomRequest.toJSON(livekit_room_1.CreateRoomRequest.fromPartial(s)),this.authHeader({roomCreate:!0}));return livekit_models_1.Room.fromJSON(d)})}listRooms(s){return __awaiter(this,void 0,void 0,function*(){const d=yield this.rpc.request(svc,"ListRooms",livekit_room_1.ListRoomsRequest.toJSON({names:s!=null?s:[]}),this.authHeader({roomList:!0}));return livekit_room_1.ListRoomsResponse.fromJSON(d).rooms})}deleteRoom(s){return __awaiter(this,void 0,void 0,function*(){yield this.rpc.request(svc,"DeleteRoom",livekit_room_1.DeleteRoomRequest.toJSON({room:s}),this.authHeader({roomCreate:!0}))})}updateRoomMetadata(s,d){return __awaiter(this,void 0,void 0,function*(){const c=yield this.rpc.request(svc,"UpdateRoomMetadata",livekit_room_1.UpdateRoomMetadataRequest.toJSON({room:s,metadata:d}),this.authHeader({roomAdmin:!0,room:s}));return livekit_models_1.Room.fromJSON(c)})}listParticipants(s){return __awaiter(this,void 0,void 0,function*(){const d=yield this.rpc.request(svc,"ListParticipants",livekit_room_1.ListParticipantsRequest.toJSON({room:s}),this.authHeader({roomAdmin:!0,room:s}));return livekit_room_1.ListParticipantsResponse.fromJSON(d).participants})}getParticipant(s,d){return __awaiter(this,void 0,void 0,function*(){const c=yield this.rpc.request(svc,"GetParticipant",livekit_room_1.RoomParticipantIdentity.toJSON({room:s,identity:d}),this.authHeader({roomAdmin:!0,room:s}));return livekit_models_1.ParticipantInfo.fromJSON(c)})}removeParticipant(s,d){return __awaiter(this,void 0,void 0,function*(){yield this.rpc.request(svc,"RemoveParticipant",livekit_room_1.RoomParticipantIdentity.toJSON({room:s,identity:d}),this.authHeader({roomAdmin:!0,room:s}))})}mutePublishedTrack(s,d,c,h){return __awaiter(this,void 0,void 0,function*(){const b=livekit_room_1.MuteRoomTrackRequest.toJSON({room:s,identity:d,trackSid:c,muted:h}),_=yield this.rpc.request(svc,"MutePublishedTrack",b,this.authHeader({roomAdmin:!0,room:s}));return livekit_room_1.MuteRoomTrackResponse.fromJSON(_).track})}updateParticipant(s,d,c,h){return __awaiter(this,void 0,void 0,function*(){const b={room:s,identity:d,metadata:c||"",permission:h},_=yield this.rpc.request(svc,"UpdateParticipant",livekit_room_1.UpdateParticipantRequest.toJSON(b),this.authHeader({roomAdmin:!0,room:s}));return livekit_models_1.ParticipantInfo.fromJSON(_)})}updateSubscriptions(s,d,c,h){return __awaiter(this,void 0,void 0,function*(){const b=livekit_room_1.UpdateSubscriptionsRequest.toJSON({room:s,identity:d,trackSids:c,subscribe:h,participantTracks:[]});yield this.rpc.request(svc,"UpdateSubscriptions",b,this.authHeader({roomAdmin:!0,room:s}))})}sendData(s,d,c,h=[]){return __awaiter(this,void 0,void 0,function*(){const b=livekit_room_1.SendDataRequest.toJSON({room:s,data:d,kind:c,destinationSids:h});yield this.rpc.request(svc,"SendData",b,this.authHeader({roomAdmin:!0,room:s}))})}authHeader(s){if(this.jwt!=null)return{Authorization:`Bearer ${this.jwt}`}}}RoomServiceClient$1.RoomServiceClient=RoomServiceClient;(function(a){var s=commonjsGlobal$1&&commonjsGlobal$1.__createBinding||(Object.create?function(h,b,_,$){$===void 0&&($=_),Object.defineProperty(h,$,{enumerable:!0,get:function(){return b[_]}})}:function(h,b,_,$){$===void 0&&($=_),h[$]=b[_]}),d=commonjsGlobal$1&&commonjsGlobal$1.__exportStar||function(h,b){for(var _ in h)_!=="default"&&!Object.prototype.hasOwnProperty.call(b,_)&&s(b,h,_)};Object.defineProperty(a,"__esModule",{value:!0}),a.TrackType=a.TrackInfo=a.Room=a.ParticipantInfo_State=a.ParticipantInfo=a.DataPacket_Kind=void 0,d(grants,a);var c=livekit_models;Object.defineProperty(a,"DataPacket_Kind",{enumerable:!0,get:function(){return c.DataPacket_Kind}}),Object.defineProperty(a,"ParticipantInfo",{enumerable:!0,get:function(){return c.ParticipantInfo}}),Object.defineProperty(a,"ParticipantInfo_State",{enumerable:!0,get:function(){return c.ParticipantInfo_State}}),Object.defineProperty(a,"Room",{enumerable:!0,get:function(){return c.Room}}),Object.defineProperty(a,"TrackInfo",{enumerable:!0,get:function(){return c.TrackInfo}}),Object.defineProperty(a,"TrackType",{enumerable:!0,get:function(){return c.TrackType}}),d(RoomServiceClient$1,a)})(dist);function _mergeNamespaces(a,s){return s.forEach(function(d){d&&typeof d!="string"&&!Array.isArray(d)&&Object.keys(d).forEach(function(c){if(c!=="default"&&!(c in a)){var h=Object.getOwnPropertyDescriptor(d,c);Object.defineProperty(a,c,h.get?h:{enumerable:!0,get:function(){return d[c]}})}})}),Object.freeze(a)}var commonjsGlobal=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function getDefaultExportFromCjs(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}var loglevelExports={},loglevel={get exports(){return loglevelExports},set exports(a){loglevelExports=a}};(function(a){(function(s,d){a.exports?a.exports=d():s.log=d()})(commonjsGlobal,function(){var s=function(){},d="undefined",c=typeof window!==d&&typeof window.navigator!==d&&/Trident\/|MSIE /.test(window.navigator.userAgent),h=["trace","debug","info","warn","error"];function b(dt,ut){var ht=dt[ut];if(typeof ht.bind=="function")return ht.bind(dt);try{return Function.prototype.bind.call(ht,dt)}catch{return function(){return Function.prototype.apply.apply(ht,[dt,arguments])}}}function _(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function $(dt){return dt==="debug"&&(dt="log"),typeof console===d?!1:dt==="trace"&&c?_:console[dt]!==void 0?b(console,dt):console.log!==void 0?b(console,"log"):s}function _e(dt,ut){for(var ht=0;ht<h.length;ht++){var nt=h[ht];this[nt]=ht<dt?s:this.methodFactory(nt,dt,ut)}this.log=this.debug}function tt(dt,ut,ht){return function(){typeof console!==d&&(_e.call(this,ut,ht),this[dt].apply(this,arguments))}}function rt(dt,ut,ht){return $(dt)||tt.apply(this,arguments)}function ot(dt,ut,ht){var nt=this,ct;ut=ut==null?"WARN":ut;var mt="loglevel";typeof dt=="string"?mt+=":"+dt:typeof dt=="symbol"&&(mt=void 0);function kt(gt){var Ct=(h[gt]||"silent").toUpperCase();if(!(typeof window===d||!mt)){try{window.localStorage[mt]=Ct;return}catch{}try{window.document.cookie=encodeURIComponent(mt)+"="+Ct+";"}catch{}}}function Tt(){var gt;if(!(typeof window===d||!mt)){try{gt=window.localStorage[mt]}catch{}if(typeof gt===d)try{var Ct=window.document.cookie,Nt=Ct.indexOf(encodeURIComponent(mt)+"=");Nt!==-1&&(gt=/^([^;]+)/.exec(Ct.slice(Nt))[1])}catch{}return nt.levels[gt]===void 0&&(gt=void 0),gt}}function Pt(){if(!(typeof window===d||!mt)){try{window.localStorage.removeItem(mt);return}catch{}try{window.document.cookie=encodeURIComponent(mt)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch{}}}nt.name=dt,nt.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},nt.methodFactory=ht||rt,nt.getLevel=function(){return ct},nt.setLevel=function(gt,Ct){if(typeof gt=="string"&&nt.levels[gt.toUpperCase()]!==void 0&&(gt=nt.levels[gt.toUpperCase()]),typeof gt=="number"&&gt>=0&&gt<=nt.levels.SILENT){if(ct=gt,Ct!==!1&&kt(gt),_e.call(nt,gt,dt),typeof console===d&&gt<nt.levels.SILENT)return"No console available for logging"}else throw"log.setLevel() called with invalid level: "+gt},nt.setDefaultLevel=function(gt){ut=gt,Tt()||nt.setLevel(gt,!1)},nt.resetLevel=function(){nt.setLevel(ut,!1),Pt()},nt.enableAll=function(gt){nt.setLevel(nt.levels.TRACE,gt)},nt.disableAll=function(gt){nt.setLevel(nt.levels.SILENT,gt)};var At=Tt();At==null&&(At=ut),nt.setLevel(At,!1)}var it=new ot,st={};it.getLogger=function(ut){if(typeof ut!="symbol"&&typeof ut!="string"||ut==="")throw new TypeError("You must supply a name when creating a logger.");var ht=st[ut];return ht||(ht=st[ut]=new ot(ut,it.getLevel(),it.methodFactory)),ht};var lt=typeof window!==d?window.log:void 0;return it.noConflict=function(){return typeof window!==d&&window.log===it&&(window.log=lt),it},it.getLoggers=function(){return st},it.default=it,it})})(loglevel);var LogLevel;(function(a){a[a.trace=0]="trace",a[a.debug=1]="debug",a[a.info=2]="info",a[a.warn=3]="warn",a[a.error=4]="error",a[a.silent=5]="silent"})(LogLevel||(LogLevel={}));const livekitLogger=loglevelExports.getLogger("livekit");livekitLogger.setLevel(LogLevel.info);function setLogLevel(a){livekitLogger.setLevel(a)}var long=Long,wasm=null;try{wasm=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(a){}function Long(a,s,d){this.low=a|0,this.high=s|0,this.unsigned=!!d}Long.prototype.__isLong__;Object.defineProperty(Long.prototype,"__isLong__",{value:!0});function isLong(a){return(a&&a.__isLong__)===!0}Long.isLong=isLong;var INT_CACHE={},UINT_CACHE={};function fromInt(a,s){var d,c,h;return s?(a>>>=0,(h=0<=a&&a<256)&&(c=UINT_CACHE[a],c)?c:(d=fromBits(a,(a|0)<0?-1:0,!0),h&&(UINT_CACHE[a]=d),d)):(a|=0,(h=-128<=a&&a<128)&&(c=INT_CACHE[a],c)?c:(d=fromBits(a,a<0?-1:0,!1),h&&(INT_CACHE[a]=d),d))}Long.fromInt=fromInt;function fromNumber(a,s){if(isNaN(a))return s?UZERO:ZERO;if(s){if(a<0)return UZERO;if(a>=TWO_PWR_64_DBL)return MAX_UNSIGNED_VALUE}else{if(a<=-TWO_PWR_63_DBL)return MIN_VALUE;if(a+1>=TWO_PWR_63_DBL)return MAX_VALUE}return a<0?fromNumber(-a,s).neg():fromBits(a%TWO_PWR_32_DBL|0,a/TWO_PWR_32_DBL|0,s)}Long.fromNumber=fromNumber;function fromBits(a,s,d){return new Long(a,s,d)}Long.fromBits=fromBits;var pow_dbl=Math.pow;function fromString(a,s,d){if(a.length===0)throw Error("empty string");if(a==="NaN"||a==="Infinity"||a==="+Infinity"||a==="-Infinity")return ZERO;if(typeof s=="number"?(d=s,s=!1):s=!!s,d=d||10,d<2||36<d)throw RangeError("radix");var c;if((c=a.indexOf("-"))>0)throw Error("interior hyphen");if(c===0)return fromString(a.substring(1),s,d).neg();for(var h=fromNumber(pow_dbl(d,8)),b=ZERO,_=0;_<a.length;_+=8){var $=Math.min(8,a.length-_),_e=parseInt(a.substring(_,_+$),d);if($<8){var tt=fromNumber(pow_dbl(d,$));b=b.mul(tt).add(fromNumber(_e))}else b=b.mul(h),b=b.add(fromNumber(_e))}return b.unsigned=s,b}Long.fromString=fromString;function fromValue(a,s){return typeof a=="number"?fromNumber(a,s):typeof a=="string"?fromString(a,s):fromBits(a.low,a.high,typeof s=="boolean"?s:a.unsigned)}Long.fromValue=fromValue;var TWO_PWR_16_DBL=1<<16,TWO_PWR_24_DBL=1<<24,TWO_PWR_32_DBL=TWO_PWR_16_DBL*TWO_PWR_16_DBL,TWO_PWR_64_DBL=TWO_PWR_32_DBL*TWO_PWR_32_DBL,TWO_PWR_63_DBL=TWO_PWR_64_DBL/2,TWO_PWR_24=fromInt(TWO_PWR_24_DBL),ZERO=fromInt(0);Long.ZERO=ZERO;var UZERO=fromInt(0,!0);Long.UZERO=UZERO;var ONE=fromInt(1);Long.ONE=ONE;var UONE=fromInt(1,!0);Long.UONE=UONE;var NEG_ONE=fromInt(-1);Long.NEG_ONE=NEG_ONE;var MAX_VALUE=fromBits(-1,2147483647,!1);Long.MAX_VALUE=MAX_VALUE;var MAX_UNSIGNED_VALUE=fromBits(-1,-1,!0);Long.MAX_UNSIGNED_VALUE=MAX_UNSIGNED_VALUE;var MIN_VALUE=fromBits(0,-2147483648,!1);Long.MIN_VALUE=MIN_VALUE;var LongPrototype=Long.prototype;LongPrototype.toInt=function a(){return this.unsigned?this.low>>>0:this.low};LongPrototype.toNumber=function a(){return this.unsigned?(this.high>>>0)*TWO_PWR_32_DBL+(this.low>>>0):this.high*TWO_PWR_32_DBL+(this.low>>>0)};LongPrototype.toString=function a(s){if(s=s||10,s<2||36<s)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(MIN_VALUE)){var d=fromNumber(s),c=this.div(d),h=c.mul(d).sub(this);return c.toString(s)+h.toInt().toString(s)}else return"-"+this.neg().toString(s);for(var b=fromNumber(pow_dbl(s,6),this.unsigned),_=this,$="";;){var _e=_.div(b),tt=_.sub(_e.mul(b)).toInt()>>>0,rt=tt.toString(s);if(_=_e,_.isZero())return rt+$;for(;rt.length<6;)rt="0"+rt;$=""+rt+$}};LongPrototype.getHighBits=function a(){return this.high};LongPrototype.getHighBitsUnsigned=function a(){return this.high>>>0};LongPrototype.getLowBits=function a(){return this.low};LongPrototype.getLowBitsUnsigned=function a(){return this.low>>>0};LongPrototype.getNumBitsAbs=function a(){if(this.isNegative())return this.eq(MIN_VALUE)?64:this.neg().getNumBitsAbs();for(var s=this.high!=0?this.high:this.low,d=31;d>0&&(s&1<<d)==0;d--);return this.high!=0?d+33:d+1};LongPrototype.isZero=function a(){return this.high===0&&this.low===0};LongPrototype.eqz=LongPrototype.isZero;LongPrototype.isNegative=function a(){return!this.unsigned&&this.high<0};LongPrototype.isPositive=function a(){return this.unsigned||this.high>=0};LongPrototype.isOdd=function a(){return(this.low&1)===1};LongPrototype.isEven=function a(){return(this.low&1)===0};LongPrototype.equals=function a(s){return isLong(s)||(s=fromValue(s)),this.unsigned!==s.unsigned&&this.high>>>31===1&&s.high>>>31===1?!1:this.high===s.high&&this.low===s.low};LongPrototype.eq=LongPrototype.equals;LongPrototype.notEquals=function a(s){return!this.eq(s)};LongPrototype.neq=LongPrototype.notEquals;LongPrototype.ne=LongPrototype.notEquals;LongPrototype.lessThan=function a(s){return this.comp(s)<0};LongPrototype.lt=LongPrototype.lessThan;LongPrototype.lessThanOrEqual=function a(s){return this.comp(s)<=0};LongPrototype.lte=LongPrototype.lessThanOrEqual;LongPrototype.le=LongPrototype.lessThanOrEqual;LongPrototype.greaterThan=function a(s){return this.comp(s)>0};LongPrototype.gt=LongPrototype.greaterThan;LongPrototype.greaterThanOrEqual=function a(s){return this.comp(s)>=0};LongPrototype.gte=LongPrototype.greaterThanOrEqual;LongPrototype.ge=LongPrototype.greaterThanOrEqual;LongPrototype.compare=function a(s){if(isLong(s)||(s=fromValue(s)),this.eq(s))return 0;var d=this.isNegative(),c=s.isNegative();return d&&!c?-1:!d&&c?1:this.unsigned?s.high>>>0>this.high>>>0||s.high===this.high&&s.low>>>0>this.low>>>0?-1:1:this.sub(s).isNegative()?-1:1};LongPrototype.comp=LongPrototype.compare;LongPrototype.negate=function a(){return!this.unsigned&&this.eq(MIN_VALUE)?MIN_VALUE:this.not().add(ONE)};LongPrototype.neg=LongPrototype.negate;LongPrototype.add=function a(s){isLong(s)||(s=fromValue(s));var d=this.high>>>16,c=this.high&65535,h=this.low>>>16,b=this.low&65535,_=s.high>>>16,$=s.high&65535,_e=s.low>>>16,tt=s.low&65535,rt=0,ot=0,it=0,st=0;return st+=b+tt,it+=st>>>16,st&=65535,it+=h+_e,ot+=it>>>16,it&=65535,ot+=c+$,rt+=ot>>>16,ot&=65535,rt+=d+_,rt&=65535,fromBits(it<<16|st,rt<<16|ot,this.unsigned)};LongPrototype.subtract=function a(s){return isLong(s)||(s=fromValue(s)),this.add(s.neg())};LongPrototype.sub=LongPrototype.subtract;LongPrototype.multiply=function a(s){if(this.isZero())return ZERO;if(isLong(s)||(s=fromValue(s)),wasm){var d=wasm.mul(this.low,this.high,s.low,s.high);return fromBits(d,wasm.get_high(),this.unsigned)}if(s.isZero())return ZERO;if(this.eq(MIN_VALUE))return s.isOdd()?MIN_VALUE:ZERO;if(s.eq(MIN_VALUE))return this.isOdd()?MIN_VALUE:ZERO;if(this.isNegative())return s.isNegative()?this.neg().mul(s.neg()):this.neg().mul(s).neg();if(s.isNegative())return this.mul(s.neg()).neg();if(this.lt(TWO_PWR_24)&&s.lt(TWO_PWR_24))return fromNumber(this.toNumber()*s.toNumber(),this.unsigned);var c=this.high>>>16,h=this.high&65535,b=this.low>>>16,_=this.low&65535,$=s.high>>>16,_e=s.high&65535,tt=s.low>>>16,rt=s.low&65535,ot=0,it=0,st=0,lt=0;return lt+=_*rt,st+=lt>>>16,lt&=65535,st+=b*rt,it+=st>>>16,st&=65535,st+=_*tt,it+=st>>>16,st&=65535,it+=h*rt,ot+=it>>>16,it&=65535,it+=b*tt,ot+=it>>>16,it&=65535,it+=_*_e,ot+=it>>>16,it&=65535,ot+=c*rt+h*tt+b*_e+_*$,ot&=65535,fromBits(st<<16|lt,ot<<16|it,this.unsigned)};LongPrototype.mul=LongPrototype.multiply;LongPrototype.divide=function a(s){if(isLong(s)||(s=fromValue(s)),s.isZero())throw Error("division by zero");if(wasm){if(!this.unsigned&&this.high===-2147483648&&s.low===-1&&s.high===-1)return this;var d=(this.unsigned?wasm.div_u:wasm.div_s)(this.low,this.high,s.low,s.high);return fromBits(d,wasm.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?UZERO:ZERO;var c,h,b;if(this.unsigned){if(s.unsigned||(s=s.toUnsigned()),s.gt(this))return UZERO;if(s.gt(this.shru(1)))return UONE;b=UZERO}else{if(this.eq(MIN_VALUE)){if(s.eq(ONE)||s.eq(NEG_ONE))return MIN_VALUE;if(s.eq(MIN_VALUE))return ONE;var _=this.shr(1);return c=_.div(s).shl(1),c.eq(ZERO)?s.isNegative()?ONE:NEG_ONE:(h=this.sub(s.mul(c)),b=c.add(h.div(s)),b)}else if(s.eq(MIN_VALUE))return this.unsigned?UZERO:ZERO;if(this.isNegative())return s.isNegative()?this.neg().div(s.neg()):this.neg().div(s).neg();if(s.isNegative())return this.div(s.neg()).neg();b=ZERO}for(h=this;h.gte(s);){c=Math.max(1,Math.floor(h.toNumber()/s.toNumber()));for(var $=Math.ceil(Math.log(c)/Math.LN2),_e=$<=48?1:pow_dbl(2,$-48),tt=fromNumber(c),rt=tt.mul(s);rt.isNegative()||rt.gt(h);)c-=_e,tt=fromNumber(c,this.unsigned),rt=tt.mul(s);tt.isZero()&&(tt=ONE),b=b.add(tt),h=h.sub(rt)}return b};LongPrototype.div=LongPrototype.divide;LongPrototype.modulo=function a(s){if(isLong(s)||(s=fromValue(s)),wasm){var d=(this.unsigned?wasm.rem_u:wasm.rem_s)(this.low,this.high,s.low,s.high);return fromBits(d,wasm.get_high(),this.unsigned)}return this.sub(this.div(s).mul(s))};LongPrototype.mod=LongPrototype.modulo;LongPrototype.rem=LongPrototype.modulo;LongPrototype.not=function a(){return fromBits(~this.low,~this.high,this.unsigned)};LongPrototype.and=function a(s){return isLong(s)||(s=fromValue(s)),fromBits(this.low&s.low,this.high&s.high,this.unsigned)};LongPrototype.or=function a(s){return isLong(s)||(s=fromValue(s)),fromBits(this.low|s.low,this.high|s.high,this.unsigned)};LongPrototype.xor=function a(s){return isLong(s)||(s=fromValue(s)),fromBits(this.low^s.low,this.high^s.high,this.unsigned)};LongPrototype.shiftLeft=function a(s){return isLong(s)&&(s=s.toInt()),(s&=63)===0?this:s<32?fromBits(this.low<<s,this.high<<s|this.low>>>32-s,this.unsigned):fromBits(0,this.low<<s-32,this.unsigned)};LongPrototype.shl=LongPrototype.shiftLeft;LongPrototype.shiftRight=function a(s){return isLong(s)&&(s=s.toInt()),(s&=63)===0?this:s<32?fromBits(this.low>>>s|this.high<<32-s,this.high>>s,this.unsigned):fromBits(this.high>>s-32,this.high>=0?0:-1,this.unsigned)};LongPrototype.shr=LongPrototype.shiftRight;LongPrototype.shiftRightUnsigned=function a(s){if(isLong(s)&&(s=s.toInt()),s&=63,s===0)return this;var d=this.high;if(s<32){var c=this.low;return fromBits(c>>>s|d<<32-s,d>>>s,this.unsigned)}else return s===32?fromBits(d,0,this.unsigned):fromBits(d>>>s-32,0,this.unsigned)};LongPrototype.shru=LongPrototype.shiftRightUnsigned;LongPrototype.shr_u=LongPrototype.shiftRightUnsigned;LongPrototype.toSigned=function a(){return this.unsigned?fromBits(this.low,this.high,!1):this};LongPrototype.toUnsigned=function a(){return this.unsigned?this:fromBits(this.low,this.high,!0)};LongPrototype.toBytes=function a(s){return s?this.toBytesLE():this.toBytesBE()};LongPrototype.toBytesLE=function a(){var s=this.high,d=this.low;return[d&255,d>>>8&255,d>>>16&255,d>>>24,s&255,s>>>8&255,s>>>16&255,s>>>24]};LongPrototype.toBytesBE=function a(){var s=this.high,d=this.low;return[s>>>24,s>>>16&255,s>>>8&255,s&255,d>>>24,d>>>16&255,d>>>8&255,d&255]};Long.fromBytes=function a(s,d,c){return c?Long.fromBytesLE(s,d):Long.fromBytesBE(s,d)};Long.fromBytesLE=function a(s,d){return new Long(s[0]|s[1]<<8|s[2]<<16|s[3]<<24,s[4]|s[5]<<8|s[6]<<16|s[7]<<24,d)};Long.fromBytesBE=function a(s,d){return new Long(s[4]<<24|s[5]<<16|s[6]<<8|s[7],s[0]<<24|s[1]<<16|s[2]<<8|s[3],d)};var minimalExports={},minimal$1={get exports(){return minimalExports},set exports(a){minimalExports=a}},indexMinimal={},minimal={},aspromise,hasRequiredAspromise;function requireAspromise(){if(hasRequiredAspromise)return aspromise;hasRequiredAspromise=1,aspromise=a;function a(s,d){for(var c=new Array(arguments.length-1),h=0,b=2,_=!0;b<arguments.length;)c[h++]=arguments[b++];return new Promise(function(_e,tt){c[h]=function(ot){if(_)if(_=!1,ot)tt(ot);else{for(var it=new Array(arguments.length-1),st=0;st<it.length;)it[st++]=arguments[st];_e.apply(null,it)}};try{s.apply(d||null,c)}catch(rt){_&&(_=!1,tt(rt))}})}return aspromise}var base64$1={},hasRequiredBase64;function requireBase64(){return hasRequiredBase64||(hasRequiredBase64=1,function(a){var s=a;s.length=function($){var _e=$.length;if(!_e)return 0;for(var tt=0;--_e%4>1&&$.charAt(_e)==="=";)++tt;return Math.ceil($.length*3)/4-tt};for(var d=new Array(64),c=new Array(123),h=0;h<64;)c[d[h]=h<26?h+65:h<52?h+71:h<62?h-4:h-59|43]=h++;s.encode=function($,_e,tt){for(var rt=null,ot=[],it=0,st=0,lt;_e<tt;){var dt=$[_e++];switch(st){case 0:ot[it++]=d[dt>>2],lt=(dt&3)<<4,st=1;break;case 1:ot[it++]=d[lt|dt>>4],lt=(dt&15)<<2,st=2;break;case 2:ot[it++]=d[lt|dt>>6],ot[it++]=d[dt&63],st=0;break}it>8191&&((rt||(rt=[])).push(String.fromCharCode.apply(String,ot)),it=0)}return st&&(ot[it++]=d[lt],ot[it++]=61,st===1&&(ot[it++]=61)),rt?(it&&rt.push(String.fromCharCode.apply(String,ot.slice(0,it))),rt.join("")):String.fromCharCode.apply(String,ot.slice(0,it))};var b="invalid encoding";s.decode=function($,_e,tt){for(var rt=tt,ot=0,it,st=0;st<$.length;){var lt=$.charCodeAt(st++);if(lt===61&&ot>1)break;if((lt=c[lt])===void 0)throw Error(b);switch(ot){case 0:it=lt,ot=1;break;case 1:_e[tt++]=it<<2|(lt&48)>>4,it=lt,ot=2;break;case 2:_e[tt++]=(it&15)<<4|(lt&60)>>2,it=lt,ot=3;break;case 3:_e[tt++]=(it&3)<<6|lt,ot=0;break}}if(ot===1)throw Error(b);return tt-rt},s.test=function($){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test($)}}(base64$1)),base64$1}var eventemitter,hasRequiredEventemitter;function requireEventemitter(){if(hasRequiredEventemitter)return eventemitter;hasRequiredEventemitter=1,eventemitter=a;function a(){this._listeners={}}return a.prototype.on=function(d,c,h){return(this._listeners[d]||(this._listeners[d]=[])).push({fn:c,ctx:h||this}),this},a.prototype.off=function(d,c){if(d===void 0)this._listeners={};else if(c===void 0)this._listeners[d]=[];else for(var h=this._listeners[d],b=0;b<h.length;)h[b].fn===c?h.splice(b,1):++b;return this},a.prototype.emit=function(d){var c=this._listeners[d];if(c){for(var h=[],b=1;b<arguments.length;)h.push(arguments[b++]);for(b=0;b<c.length;)c[b].fn.apply(c[b++].ctx,h)}return this},eventemitter}var float,hasRequiredFloat;function requireFloat(){if(hasRequiredFloat)return float;hasRequiredFloat=1,float=a(a);function a(b){return typeof Float32Array!="undefined"?function(){var _=new Float32Array([-0]),$=new Uint8Array(_.buffer),_e=$[3]===128;function tt(st,lt,dt){_[0]=st,lt[dt]=$[0],lt[dt+1]=$[1],lt[dt+2]=$[2],lt[dt+3]=$[3]}function rt(st,lt,dt){_[0]=st,lt[dt]=$[3],lt[dt+1]=$[2],lt[dt+2]=$[1],lt[dt+3]=$[0]}b.writeFloatLE=_e?tt:rt,b.writeFloatBE=_e?rt:tt;function ot(st,lt){return $[0]=st[lt],$[1]=st[lt+1],$[2]=st[lt+2],$[3]=st[lt+3],_[0]}function it(st,lt){return $[3]=st[lt],$[2]=st[lt+1],$[1]=st[lt+2],$[0]=st[lt+3],_[0]}b.readFloatLE=_e?ot:it,b.readFloatBE=_e?it:ot}():function(){function _(_e,tt,rt,ot){var it=tt<0?1:0;if(it&&(tt=-tt),tt===0)_e(1/tt>0?0:2147483648,rt,ot);else if(isNaN(tt))_e(2143289344,rt,ot);else if(tt>34028234663852886e22)_e((it<<31|2139095040)>>>0,rt,ot);else if(tt<11754943508222875e-54)_e((it<<31|Math.round(tt/1401298464324817e-60))>>>0,rt,ot);else{var st=Math.floor(Math.log(tt)/Math.LN2),lt=Math.round(tt*Math.pow(2,-st)*8388608)&8388607;_e((it<<31|st+127<<23|lt)>>>0,rt,ot)}}b.writeFloatLE=_.bind(null,s),b.writeFloatBE=_.bind(null,d);function $(_e,tt,rt){var ot=_e(tt,rt),it=(ot>>31)*2+1,st=ot>>>23&255,lt=ot&8388607;return st===255?lt?NaN:it*(1/0):st===0?it*1401298464324817e-60*lt:it*Math.pow(2,st-150)*(lt+8388608)}b.readFloatLE=$.bind(null,c),b.readFloatBE=$.bind(null,h)}(),typeof Float64Array!="undefined"?function(){var _=new Float64Array([-0]),$=new Uint8Array(_.buffer),_e=$[7]===128;function tt(st,lt,dt){_[0]=st,lt[dt]=$[0],lt[dt+1]=$[1],lt[dt+2]=$[2],lt[dt+3]=$[3],lt[dt+4]=$[4],lt[dt+5]=$[5],lt[dt+6]=$[6],lt[dt+7]=$[7]}function rt(st,lt,dt){_[0]=st,lt[dt]=$[7],lt[dt+1]=$[6],lt[dt+2]=$[5],lt[dt+3]=$[4],lt[dt+4]=$[3],lt[dt+5]=$[2],lt[dt+6]=$[1],lt[dt+7]=$[0]}b.writeDoubleLE=_e?tt:rt,b.writeDoubleBE=_e?rt:tt;function ot(st,lt){return $[0]=st[lt],$[1]=st[lt+1],$[2]=st[lt+2],$[3]=st[lt+3],$[4]=st[lt+4],$[5]=st[lt+5],$[6]=st[lt+6],$[7]=st[lt+7],_[0]}function it(st,lt){return $[7]=st[lt],$[6]=st[lt+1],$[5]=st[lt+2],$[4]=st[lt+3],$[3]=st[lt+4],$[2]=st[lt+5],$[1]=st[lt+6],$[0]=st[lt+7],_[0]}b.readDoubleLE=_e?ot:it,b.readDoubleBE=_e?it:ot}():function(){function _(_e,tt,rt,ot,it,st){var lt=ot<0?1:0;if(lt&&(ot=-ot),ot===0)_e(0,it,st+tt),_e(1/ot>0?0:2147483648,it,st+rt);else if(isNaN(ot))_e(0,it,st+tt),_e(2146959360,it,st+rt);else if(ot>17976931348623157e292)_e(0,it,st+tt),_e((lt<<31|2146435072)>>>0,it,st+rt);else{var dt;if(ot<22250738585072014e-324)dt=ot/5e-324,_e(dt>>>0,it,st+tt),_e((lt<<31|dt/4294967296)>>>0,it,st+rt);else{var ut=Math.floor(Math.log(ot)/Math.LN2);ut===1024&&(ut=1023),dt=ot*Math.pow(2,-ut),_e(dt*4503599627370496>>>0,it,st+tt),_e((lt<<31|ut+1023<<20|dt*1048576&1048575)>>>0,it,st+rt)}}}b.writeDoubleLE=_.bind(null,s,0,4),b.writeDoubleBE=_.bind(null,d,4,0);function $(_e,tt,rt,ot,it){var st=_e(ot,it+tt),lt=_e(ot,it+rt),dt=(lt>>31)*2+1,ut=lt>>>20&2047,ht=4294967296*(lt&1048575)+st;return ut===2047?ht?NaN:dt*(1/0):ut===0?dt*5e-324*ht:dt*Math.pow(2,ut-1075)*(ht+4503599627370496)}b.readDoubleLE=$.bind(null,c,0,4),b.readDoubleBE=$.bind(null,h,4,0)}(),b}function s(b,_,$){_[$]=b&255,_[$+1]=b>>>8&255,_[$+2]=b>>>16&255,_[$+3]=b>>>24}function d(b,_,$){_[$]=b>>>24,_[$+1]=b>>>16&255,_[$+2]=b>>>8&255,_[$+3]=b&255}function c(b,_){return(b[_]|b[_+1]<<8|b[_+2]<<16|b[_+3]<<24)>>>0}function h(b,_){return(b[_]<<24|b[_+1]<<16|b[_+2]<<8|b[_+3])>>>0}return float}var inquire_1,hasRequiredInquire;function requireInquire(){if(hasRequiredInquire)return inquire_1;hasRequiredInquire=1,inquire_1=a;function a(s){try{var d=void 0;if(d&&(d.length||Object.keys(d).length))return d}catch{}return null}return inquire_1}var utf8$2={},hasRequiredUtf8;function requireUtf8(){return hasRequiredUtf8||(hasRequiredUtf8=1,function(a){var s=a;s.length=function(c){for(var h=0,b=0,_=0;_<c.length;++_)b=c.charCodeAt(_),b<128?h+=1:b<2048?h+=2:(b&64512)===55296&&(c.charCodeAt(_+1)&64512)===56320?(++_,h+=4):h+=3;return h},s.read=function(c,h,b){var _=b-h;if(_<1)return"";for(var $=null,_e=[],tt=0,rt;h<b;)rt=c[h++],rt<128?_e[tt++]=rt:rt>191&&rt<224?_e[tt++]=(rt&31)<<6|c[h++]&63:rt>239&&rt<365?(rt=((rt&7)<<18|(c[h++]&63)<<12|(c[h++]&63)<<6|c[h++]&63)-65536,_e[tt++]=55296+(rt>>10),_e[tt++]=56320+(rt&1023)):_e[tt++]=(rt&15)<<12|(c[h++]&63)<<6|c[h++]&63,tt>8191&&(($||($=[])).push(String.fromCharCode.apply(String,_e)),tt=0);return $?(tt&&$.push(String.fromCharCode.apply(String,_e.slice(0,tt))),$.join("")):String.fromCharCode.apply(String,_e.slice(0,tt))},s.write=function(c,h,b){for(var _=b,$,_e,tt=0;tt<c.length;++tt)$=c.charCodeAt(tt),$<128?h[b++]=$:$<2048?(h[b++]=$>>6|192,h[b++]=$&63|128):($&64512)===55296&&((_e=c.charCodeAt(tt+1))&64512)===56320?($=65536+(($&1023)<<10)+(_e&1023),++tt,h[b++]=$>>18|240,h[b++]=$>>12&63|128,h[b++]=$>>6&63|128,h[b++]=$&63|128):(h[b++]=$>>12|224,h[b++]=$>>6&63|128,h[b++]=$&63|128);return b-_}}(utf8$2)),utf8$2}var pool_1,hasRequiredPool;function requirePool(){if(hasRequiredPool)return pool_1;hasRequiredPool=1,pool_1=a;function a(s,d,c){var h=c||8192,b=h>>>1,_=null,$=h;return function(tt){if(tt<1||tt>b)return s(tt);$+tt>h&&(_=s(h),$=0);var rt=d.call(_,$,$+=tt);return $&7&&($=($|7)+1),rt}}return pool_1}var longbits,hasRequiredLongbits;function requireLongbits(){if(hasRequiredLongbits)return longbits;hasRequiredLongbits=1,longbits=s;var a=requireMinimal();function s(b,_){this.lo=b>>>0,this.hi=_>>>0}var d=s.zero=new s(0,0);d.toNumber=function(){return 0},d.zzEncode=d.zzDecode=function(){return this},d.length=function(){return 1};var c=s.zeroHash="\0\0\0\0\0\0\0\0";s.fromNumber=function(_){if(_===0)return d;var $=_<0;$&&(_=-_);var _e=_>>>0,tt=(_-_e)/4294967296>>>0;return $&&(tt=~tt>>>0,_e=~_e>>>0,++_e>4294967295&&(_e=0,++tt>4294967295&&(tt=0))),new s(_e,tt)},s.from=function(_){if(typeof _=="number")return s.fromNumber(_);if(a.isString(_))if(a.Long)_=a.Long.fromString(_);else return s.fromNumber(parseInt(_,10));return _.low||_.high?new s(_.low>>>0,_.high>>>0):d},s.prototype.toNumber=function(_){if(!_&&this.hi>>>31){var $=~this.lo+1>>>0,_e=~this.hi>>>0;return $||(_e=_e+1>>>0),-($+_e*4294967296)}return this.lo+this.hi*4294967296},s.prototype.toLong=function(_){return a.Long?new a.Long(this.lo|0,this.hi|0,Boolean(_)):{low:this.lo|0,high:this.hi|0,unsigned:Boolean(_)}};var h=String.prototype.charCodeAt;return s.fromHash=function(_){return _===c?d:new s((h.call(_,0)|h.call(_,1)<<8|h.call(_,2)<<16|h.call(_,3)<<24)>>>0,(h.call(_,4)|h.call(_,5)<<8|h.call(_,6)<<16|h.call(_,7)<<24)>>>0)},s.prototype.toHash=function(){return String.fromCharCode(this.lo&255,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,this.hi&255,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},s.prototype.zzEncode=function(){var _=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^_)>>>0,this.lo=(this.lo<<1^_)>>>0,this},s.prototype.zzDecode=function(){var _=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^_)>>>0,this.hi=(this.hi>>>1^_)>>>0,this},s.prototype.length=function(){var _=this.lo,$=(this.lo>>>28|this.hi<<4)>>>0,_e=this.hi>>>24;return _e===0?$===0?_<16384?_<128?1:2:_<2097152?3:4:$<16384?$<128?5:6:$<2097152?7:8:_e<128?9:10},longbits}var hasRequiredMinimal;function requireMinimal(){return hasRequiredMinimal||(hasRequiredMinimal=1,function(a){var s=a;s.asPromise=requireAspromise(),s.base64=requireBase64(),s.EventEmitter=requireEventemitter(),s.float=requireFloat(),s.inquire=requireInquire(),s.utf8=requireUtf8(),s.pool=requirePool(),s.LongBits=requireLongbits(),s.isNode=Boolean(typeof commonjsGlobal!="undefined"&&commonjsGlobal&&commonjsGlobal.process&&commonjsGlobal.process.versions&&commonjsGlobal.process.versions.node),s.global=s.isNode&&commonjsGlobal||typeof window!="undefined"&&window||typeof self!="undefined"&&self||commonjsGlobal,s.emptyArray=Object.freeze?Object.freeze([]):[],s.emptyObject=Object.freeze?Object.freeze({}):{},s.isInteger=Number.isInteger||function(b){return typeof b=="number"&&isFinite(b)&&Math.floor(b)===b},s.isString=function(b){return typeof b=="string"||b instanceof String},s.isObject=function(b){return b&&typeof b=="object"},s.isset=s.isSet=function(b,_){var $=b[_];return $!=null&&b.hasOwnProperty(_)?typeof $!="object"||(Array.isArray($)?$.length:Object.keys($).length)>0:!1},s.Buffer=function(){try{var h=s.inquire("buffer").Buffer;return h.prototype.utf8Write?h:null}catch{return null}}(),s._Buffer_from=null,s._Buffer_allocUnsafe=null,s.newBuffer=function(b){return typeof b=="number"?s.Buffer?s._Buffer_allocUnsafe(b):new s.Array(b):s.Buffer?s._Buffer_from(b):typeof Uint8Array=="undefined"?b:new Uint8Array(b)},s.Array=typeof Uint8Array!="undefined"?Uint8Array:Array,s.Long=s.global.dcodeIO&&s.global.dcodeIO.Long||s.global.Long||s.inquire("long"),s.key2Re=/^true|false|0|1$/,s.key32Re=/^-?(?:0|[1-9][0-9]*)$/,s.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,s.longToHash=function(b){return b?s.LongBits.from(b).toHash():s.LongBits.zeroHash},s.longFromHash=function(b,_){var $=s.LongBits.fromHash(b);return s.Long?s.Long.fromBits($.lo,$.hi,_):$.toNumber(Boolean(_))};function d(h,b,_){for(var $=Object.keys(b),_e=0;_e<$.length;++_e)(h[$[_e]]===void 0||!_)&&(h[$[_e]]=b[$[_e]]);return h}s.merge=d,s.lcFirst=function(b){return b.charAt(0).toLowerCase()+b.substring(1)};function c(h){function b(_,$){if(!(this instanceof b))return new b(_,$);Object.defineProperty(this,"message",{get:function(){return _}}),Error.captureStackTrace?Error.captureStackTrace(this,b):Object.defineProperty(this,"stack",{value:new Error().stack||""}),$&&d(this,$)}return b.prototype=Object.create(Error.prototype,{constructor:{value:b,writable:!0,enumerable:!1,configurable:!0},name:{get(){return h},set:void 0,enumerable:!1,configurable:!0},toString:{value(){return this.name+": "+this.message},writable:!0,enumerable:!1,configurable:!0}}),b}s.newError=c,s.ProtocolError=c("ProtocolError"),s.oneOfGetter=function(b){for(var _={},$=0;$<b.length;++$)_[b[$]]=1;return function(){for(var _e=Object.keys(this),tt=_e.length-1;tt>-1;--tt)if(_[_e[tt]]===1&&this[_e[tt]]!==void 0&&this[_e[tt]]!==null)return _e[tt]}},s.oneOfSetter=function(b){return function(_){for(var $=0;$<b.length;++$)b[$]!==_&&delete this[b[$]]}},s.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},s._configure=function(){var h=s.Buffer;if(!h){s._Buffer_from=s._Buffer_allocUnsafe=null;return}s._Buffer_from=h.from!==Uint8Array.from&&h.from||function(_,$){return new h(_,$)},s._Buffer_allocUnsafe=h.allocUnsafe||function(_){return new h(_)}}}(minimal)),minimal}var writer$2=Writer$1,util$4=requireMinimal(),BufferWriter$1,LongBits$1=util$4.LongBits,base64=util$4.base64,utf8$1=util$4.utf8;function Op(a,s,d){this.fn=a,this.len=s,this.next=void 0,this.val=d}function noop$1(){}function State(a){this.head=a.head,this.tail=a.tail,this.len=a.len,this.next=a.states}function Writer$1(){this.len=0,this.head=new Op(noop$1,0,0),this.tail=this.head,this.states=null}var create$1=function a(){return util$4.Buffer?function(){return(Writer$1.create=function(){return new BufferWriter$1})()}:function(){return new Writer$1}};Writer$1.create=create$1();Writer$1.alloc=function a(s){return new util$4.Array(s)};util$4.Array!==Array&&(Writer$1.alloc=util$4.pool(Writer$1.alloc,util$4.Array.prototype.subarray));Writer$1.prototype._push=function a(s,d,c){return this.tail=this.tail.next=new Op(s,d,c),this.len+=d,this};function writeByte(a,s,d){s[d]=a&255}function writeVarint32(a,s,d){for(;a>127;)s[d++]=a&127|128,a>>>=7;s[d]=a}function VarintOp(a,s){this.len=a,this.next=void 0,this.val=s}VarintOp.prototype=Object.create(Op.prototype);VarintOp.prototype.fn=writeVarint32;Writer$1.prototype.uint32=function a(s){return this.len+=(this.tail=this.tail.next=new VarintOp((s=s>>>0)<128?1:s<16384?2:s<2097152?3:s<268435456?4:5,s)).len,this};Writer$1.prototype.int32=function a(s){return s<0?this._push(writeVarint64,10,LongBits$1.fromNumber(s)):this.uint32(s)};Writer$1.prototype.sint32=function a(s){return this.uint32((s<<1^s>>31)>>>0)};function writeVarint64(a,s,d){for(;a.hi;)s[d++]=a.lo&127|128,a.lo=(a.lo>>>7|a.hi<<25)>>>0,a.hi>>>=7;for(;a.lo>127;)s[d++]=a.lo&127|128,a.lo=a.lo>>>7;s[d++]=a.lo}Writer$1.prototype.uint64=function a(s){var d=LongBits$1.from(s);return this._push(writeVarint64,d.length(),d)};Writer$1.prototype.int64=Writer$1.prototype.uint64;Writer$1.prototype.sint64=function a(s){var d=LongBits$1.from(s).zzEncode();return this._push(writeVarint64,d.length(),d)};Writer$1.prototype.bool=function a(s){return this._push(writeByte,1,s?1:0)};function writeFixed32(a,s,d){s[d]=a&255,s[d+1]=a>>>8&255,s[d+2]=a>>>16&255,s[d+3]=a>>>24}Writer$1.prototype.fixed32=function a(s){return this._push(writeFixed32,4,s>>>0)};Writer$1.prototype.sfixed32=Writer$1.prototype.fixed32;Writer$1.prototype.fixed64=function a(s){var d=LongBits$1.from(s);return this._push(writeFixed32,4,d.lo)._push(writeFixed32,4,d.hi)};Writer$1.prototype.sfixed64=Writer$1.prototype.fixed64;Writer$1.prototype.float=function a(s){return this._push(util$4.float.writeFloatLE,4,s)};Writer$1.prototype.double=function a(s){return this._push(util$4.float.writeDoubleLE,8,s)};var writeBytes=util$4.Array.prototype.set?function a(s,d,c){d.set(s,c)}:function a(s,d,c){for(var h=0;h<s.length;++h)d[c+h]=s[h]};Writer$1.prototype.bytes=function a(s){var d=s.length>>>0;if(!d)return this._push(writeByte,1,0);if(util$4.isString(s)){var c=Writer$1.alloc(d=base64.length(s));base64.decode(s,c,0),s=c}return this.uint32(d)._push(writeBytes,d,s)};Writer$1.prototype.string=function a(s){var d=utf8$1.length(s);return d?this.uint32(d)._push(utf8$1.write,d,s):this._push(writeByte,1,0)};Writer$1.prototype.fork=function a(){return this.states=new State(this),this.head=this.tail=new Op(noop$1,0,0),this.len=0,this};Writer$1.prototype.reset=function a(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new Op(noop$1,0,0),this.len=0),this};Writer$1.prototype.ldelim=function a(){var s=this.head,d=this.tail,c=this.len;return this.reset().uint32(c),c&&(this.tail.next=s.next,this.tail=d,this.len+=c),this};Writer$1.prototype.finish=function a(){for(var s=this.head.next,d=this.constructor.alloc(this.len),c=0;s;)s.fn(s.val,d,c),c+=s.len,s=s.next;return d};Writer$1._configure=function(a){BufferWriter$1=a,Writer$1.create=create$1(),BufferWriter$1._configure()};var writer_buffer=BufferWriter,Writer=writer$2;(BufferWriter.prototype=Object.create(Writer.prototype)).constructor=BufferWriter;var util$3=requireMinimal();function BufferWriter(){Writer.call(this)}BufferWriter._configure=function(){BufferWriter.alloc=util$3._Buffer_allocUnsafe,BufferWriter.writeBytesBuffer=util$3.Buffer&&util$3.Buffer.prototype instanceof Uint8Array&&util$3.Buffer.prototype.set.name==="set"?function(s,d,c){d.set(s,c)}:function(s,d,c){if(s.copy)s.copy(d,c,0,s.length);else for(var h=0;h<s.length;)d[c++]=s[h++]}};BufferWriter.prototype.bytes=function a(s){util$3.isString(s)&&(s=util$3._Buffer_from(s,"base64"));var d=s.length>>>0;return this.uint32(d),d&&this._push(BufferWriter.writeBytesBuffer,d,s),this};function writeStringBuffer(a,s,d){a.length<40?util$3.utf8.write(a,s,d):s.utf8Write?s.utf8Write(a,d):s.write(a,d)}BufferWriter.prototype.string=function a(s){var d=util$3.Buffer.byteLength(s);return this.uint32(d),d&&this._push(writeStringBuffer,d,s),this};BufferWriter._configure();var reader=Reader$1,util$2=requireMinimal(),BufferReader$1,LongBits=util$2.LongBits,utf8=util$2.utf8;function indexOutOfRange(a,s){return RangeError("index out of range: "+a.pos+" + "+(s||1)+" > "+a.len)}function Reader$1(a){this.buf=a,this.pos=0,this.len=a.length}var create_array=typeof Uint8Array!="undefined"?function a(s){if(s instanceof Uint8Array||Array.isArray(s))return new Reader$1(s);throw Error("illegal buffer")}:function a(s){if(Array.isArray(s))return new Reader$1(s);throw Error("illegal buffer")},create$2=function a(){return util$2.Buffer?function(d){return(Reader$1.create=function(h){return util$2.Buffer.isBuffer(h)?new BufferReader$1(h):create_array(h)})(d)}:create_array};Reader$1.create=create$2();Reader$1.prototype._slice=util$2.Array.prototype.subarray||util$2.Array.prototype.slice;Reader$1.prototype.uint32=function a(){var s=4294967295;return function(){if(s=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(s=(s|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(s=(s|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(s=(s|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(s=(s|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return s;if((this.pos+=5)>this.len)throw this.pos=this.len,indexOutOfRange(this,10);return s}}();Reader$1.prototype.int32=function a(){return this.uint32()|0};Reader$1.prototype.sint32=function a(){var s=this.uint32();return s>>>1^-(s&1)|0};function readLongVarint(){var a=new LongBits(0,0),s=0;if(this.len-this.pos>4){for(;s<4;++s)if(a.lo=(a.lo|(this.buf[this.pos]&127)<<s*7)>>>0,this.buf[this.pos++]<128)return a;if(a.lo=(a.lo|(this.buf[this.pos]&127)<<28)>>>0,a.hi=(a.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return a;s=0}else{for(;s<3;++s){if(this.pos>=this.len)throw indexOutOfRange(this);if(a.lo=(a.lo|(this.buf[this.pos]&127)<<s*7)>>>0,this.buf[this.pos++]<128)return a}return a.lo=(a.lo|(this.buf[this.pos++]&127)<<s*7)>>>0,a}if(this.len-this.pos>4){for(;s<5;++s)if(a.hi=(a.hi|(this.buf[this.pos]&127)<<s*7+3)>>>0,this.buf[this.pos++]<128)return a}else for(;s<5;++s){if(this.pos>=this.len)throw indexOutOfRange(this);if(a.hi=(a.hi|(this.buf[this.pos]&127)<<s*7+3)>>>0,this.buf[this.pos++]<128)return a}throw Error("invalid varint encoding")}Reader$1.prototype.bool=function a(){return this.uint32()!==0};function readFixed32_end(a,s){return(a[s-4]|a[s-3]<<8|a[s-2]<<16|a[s-1]<<24)>>>0}Reader$1.prototype.fixed32=function a(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);return readFixed32_end(this.buf,this.pos+=4)};Reader$1.prototype.sfixed32=function a(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);return readFixed32_end(this.buf,this.pos+=4)|0};function readFixed64(){if(this.pos+8>this.len)throw indexOutOfRange(this,8);return new LongBits(readFixed32_end(this.buf,this.pos+=4),readFixed32_end(this.buf,this.pos+=4))}Reader$1.prototype.float=function a(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);var s=util$2.float.readFloatLE(this.buf,this.pos);return this.pos+=4,s};Reader$1.prototype.double=function a(){if(this.pos+8>this.len)throw indexOutOfRange(this,4);var s=util$2.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,s};Reader$1.prototype.bytes=function a(){var s=this.uint32(),d=this.pos,c=this.pos+s;if(c>this.len)throw indexOutOfRange(this,s);return this.pos+=s,Array.isArray(this.buf)?this.buf.slice(d,c):d===c?new this.buf.constructor(0):this._slice.call(this.buf,d,c)};Reader$1.prototype.string=function a(){var s=this.bytes();return utf8.read(s,0,s.length)};Reader$1.prototype.skip=function a(s){if(typeof s=="number"){if(this.pos+s>this.len)throw indexOutOfRange(this,s);this.pos+=s}else do if(this.pos>=this.len)throw indexOutOfRange(this);while(this.buf[this.pos++]&128);return this};Reader$1.prototype.skipType=function(a){switch(a){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(a=this.uint32()&7)!==4;)this.skipType(a);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+a+" at offset "+this.pos)}return this};Reader$1._configure=function(a){BufferReader$1=a,Reader$1.create=create$2(),BufferReader$1._configure();var s=util$2.Long?"toLong":"toNumber";util$2.merge(Reader$1.prototype,{int64:function(){return readLongVarint.call(this)[s](!1)},uint64:function(){return readLongVarint.call(this)[s](!0)},sint64:function(){return readLongVarint.call(this).zzDecode()[s](!1)},fixed64:function(){return readFixed64.call(this)[s](!0)},sfixed64:function(){return readFixed64.call(this)[s](!1)}})};var reader_buffer=BufferReader,Reader=reader;(BufferReader.prototype=Object.create(Reader.prototype)).constructor=BufferReader;var util$1=requireMinimal();function BufferReader(a){Reader.call(this,a)}BufferReader._configure=function(){util$1.Buffer&&(BufferReader.prototype._slice=util$1.Buffer.prototype.slice)};BufferReader.prototype.string=function a(){var s=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+s,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+s,this.len))};BufferReader._configure();var rpc={},service=Service,util=requireMinimal();(Service.prototype=Object.create(util.EventEmitter.prototype)).constructor=Service;function Service(a,s,d){if(typeof a!="function")throw TypeError("rpcImpl must be a function");util.EventEmitter.call(this),this.rpcImpl=a,this.requestDelimited=Boolean(s),this.responseDelimited=Boolean(d)}Service.prototype.rpcCall=function a(s,d,c,h,b){if(!h)throw TypeError("request must be specified");var _=this;if(!b)return util.asPromise(a,_,s,d,c,h);if(!_.rpcImpl){setTimeout(function(){b(Error("already ended"))},0);return}try{return _.rpcImpl(s,d[_.requestDelimited?"encodeDelimited":"encode"](h).finish(),function(_e,tt){if(_e)return _.emit("error",_e,s),b(_e);if(tt===null){_.end(!0);return}if(!(tt instanceof c))try{tt=c[_.responseDelimited?"decodeDelimited":"decode"](tt)}catch(rt){return _.emit("error",rt,s),b(rt)}return _.emit("data",tt,s),b(null,tt)})}catch($){_.emit("error",$,s),setTimeout(function(){b($)},0);return}};Service.prototype.end=function a(s){return this.rpcImpl&&(s||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this};(function(a){var s=a;s.Service=service})(rpc);var roots={};(function(a){var s=a;s.build="minimal",s.Writer=writer$2,s.BufferWriter=writer_buffer,s.Reader=reader,s.BufferReader=reader_buffer,s.util=requireMinimal(),s.rpc=rpc,s.roots=roots,s.configure=d;function d(){s.util._configure(),s.Writer._configure(s.BufferWriter),s.Reader._configure(s.BufferReader)}d()})(indexMinimal);(function(a){a.exports=indexMinimal})(minimal$1);var _m0=getDefaultExportFromCjs(minimalExports);(()=>{if(typeof globalThis!="undefined")return globalThis;if(typeof self!="undefined")return self;if(typeof window!="undefined")return window;if(typeof global!="undefined")return global;throw"Unable to locate global object"})();_m0.util.Long!==long&&(_m0.util.Long=long,_m0.configure());var TrackType;(function(a){a[a.AUDIO=0]="AUDIO",a[a.VIDEO=1]="VIDEO",a[a.DATA=2]="DATA",a[a.UNRECOGNIZED=-1]="UNRECOGNIZED"})(TrackType||(TrackType={}));function trackTypeFromJSON(a){switch(a){case 0:case"AUDIO":return TrackType.AUDIO;case 1:case"VIDEO":return TrackType.VIDEO;case 2:case"DATA":return TrackType.DATA;case-1:case"UNRECOGNIZED":default:return TrackType.UNRECOGNIZED}}function trackTypeToJSON(a){switch(a){case TrackType.AUDIO:return"AUDIO";case TrackType.VIDEO:return"VIDEO";case TrackType.DATA:return"DATA";case TrackType.UNRECOGNIZED:default:return"UNRECOGNIZED"}}var TrackSource;(function(a){a[a.UNKNOWN=0]="UNKNOWN",a[a.CAMERA=1]="CAMERA",a[a.MICROPHONE=2]="MICROPHONE",a[a.SCREEN_SHARE=3]="SCREEN_SHARE",a[a.SCREEN_SHARE_AUDIO=4]="SCREEN_SHARE_AUDIO",a[a.UNRECOGNIZED=-1]="UNRECOGNIZED"})(TrackSource||(TrackSource={}));function trackSourceFromJSON(a){switch(a){case 0:case"UNKNOWN":return TrackSource.UNKNOWN;case 1:case"CAMERA":return TrackSource.CAMERA;case 2:case"MICROPHONE":return TrackSource.MICROPHONE;case 3:case"SCREEN_SHARE":return TrackSource.SCREEN_SHARE;case 4:case"SCREEN_SHARE_AUDIO":return TrackSource.SCREEN_SHARE_AUDIO;case-1:case"UNRECOGNIZED":default:return TrackSource.UNRECOGNIZED}}function trackSourceToJSON(a){switch(a){case TrackSource.UNKNOWN:return"UNKNOWN";case TrackSource.CAMERA:return"CAMERA";case TrackSource.MICROPHONE:return"MICROPHONE";case TrackSource.SCREEN_SHARE:return"SCREEN_SHARE";case TrackSource.SCREEN_SHARE_AUDIO:return"SCREEN_SHARE_AUDIO";case TrackSource.UNRECOGNIZED:default:return"UNRECOGNIZED"}}var VideoQuality;(function(a){a[a.LOW=0]="LOW",a[a.MEDIUM=1]="MEDIUM",a[a.HIGH=2]="HIGH",a[a.OFF=3]="OFF",a[a.UNRECOGNIZED=-1]="UNRECOGNIZED"})(VideoQuality||(VideoQuality={}));function videoQualityFromJSON(a){switch(a){case 0:case"LOW":return VideoQuality.LOW;case 1:case"MEDIUM":return VideoQuality.MEDIUM;case 2:case"HIGH":return VideoQuality.HIGH;case 3:case"OFF":return VideoQuality.OFF;case-1:case"UNRECOGNIZED":default:return VideoQuality.UNRECOGNIZED}}function videoQualityToJSON(a){switch(a){case VideoQuality.LOW:return"LOW";case VideoQuality.MEDIUM:return"MEDIUM";case VideoQuality.HIGH:return"HIGH";case VideoQuality.OFF:return"OFF";case VideoQuality.UNRECOGNIZED:default:return"UNRECOGNIZED"}}var ConnectionQuality$1;(function(a){a[a.POOR=0]="POOR",a[a.GOOD=1]="GOOD",a[a.EXCELLENT=2]="EXCELLENT",a[a.UNRECOGNIZED=-1]="UNRECOGNIZED"})(ConnectionQuality$1||(ConnectionQuality$1={}));function connectionQualityFromJSON(a){switch(a){case 0:case"POOR":return ConnectionQuality$1.POOR;case 1:case"GOOD":return ConnectionQuality$1.GOOD;case 2:case"EXCELLENT":return ConnectionQuality$1.EXCELLENT;case-1:case"UNRECOGNIZED":default:return ConnectionQuality$1.UNRECOGNIZED}}function connectionQualityToJSON(a){switch(a){case ConnectionQuality$1.POOR:return"POOR";case ConnectionQuality$1.GOOD:return"GOOD";case ConnectionQuality$1.EXCELLENT:return"EXCELLENT";case ConnectionQuality$1.UNRECOGNIZED:default:return"UNRECOGNIZED"}}var ClientConfigSetting;(function(a){a[a.UNSET=0]="UNSET",a[a.DISABLED=1]="DISABLED",a[a.ENABLED=2]="ENABLED",a[a.UNRECOGNIZED=-1]="UNRECOGNIZED"})(ClientConfigSetting||(ClientConfigSetting={}));function clientConfigSettingFromJSON(a){switch(a){case 0:case"UNSET":return ClientConfigSetting.UNSET;case 1:case"DISABLED":return ClientConfigSetting.DISABLED;case 2:case"ENABLED":return ClientConfigSetting.ENABLED;case-1:case"UNRECOGNIZED":default:return ClientConfigSetting.UNRECOGNIZED}}function clientConfigSettingToJSON(a){switch(a){case ClientConfigSetting.UNSET:return"UNSET";case ClientConfigSetting.DISABLED:return"DISABLED";case ClientConfigSetting.ENABLED:return"ENABLED";case ClientConfigSetting.UNRECOGNIZED:default:return"UNRECOGNIZED"}}var DisconnectReason;(function(a){a[a.UNKNOWN_REASON=0]="UNKNOWN_REASON",a[a.CLIENT_INITIATED=1]="CLIENT_INITIATED",a[a.DUPLICATE_IDENTITY=2]="DUPLICATE_IDENTITY",a[a.SERVER_SHUTDOWN=3]="SERVER_SHUTDOWN",a[a.PARTICIPANT_REMOVED=4]="PARTICIPANT_REMOVED",a[a.ROOM_DELETED=5]="ROOM_DELETED",a[a.STATE_MISMATCH=6]="STATE_MISMATCH",a[a.JOIN_FAILURE=7]="JOIN_FAILURE",a[a.UNRECOGNIZED=-1]="UNRECOGNIZED"})(DisconnectReason||(DisconnectReason={}));function disconnectReasonFromJSON(a){switch(a){case 0:case"UNKNOWN_REASON":return DisconnectReason.UNKNOWN_REASON;case 1:case"CLIENT_INITIATED":return DisconnectReason.CLIENT_INITIATED;case 2:case"DUPLICATE_IDENTITY":return DisconnectReason.DUPLICATE_IDENTITY;case 3:case"SERVER_SHUTDOWN":return DisconnectReason.SERVER_SHUTDOWN;case 4:case"PARTICIPANT_REMOVED":return DisconnectReason.PARTICIPANT_REMOVED;case 5:case"ROOM_DELETED":return DisconnectReason.ROOM_DELETED;case 6:case"STATE_MISMATCH":return DisconnectReason.STATE_MISMATCH;case 7:case"JOIN_FAILURE":return DisconnectReason.JOIN_FAILURE;case-1:case"UNRECOGNIZED":default:return DisconnectReason.UNRECOGNIZED}}function disconnectReasonToJSON(a){switch(a){case DisconnectReason.UNKNOWN_REASON:return"UNKNOWN_REASON";case DisconnectReason.CLIENT_INITIATED:return"CLIENT_INITIATED";case DisconnectReason.DUPLICATE_IDENTITY:return"DUPLICATE_IDENTITY";case DisconnectReason.SERVER_SHUTDOWN:return"SERVER_SHUTDOWN";case DisconnectReason.PARTICIPANT_REMOVED:return"PARTICIPANT_REMOVED";case DisconnectReason.ROOM_DELETED:return"ROOM_DELETED";case DisconnectReason.STATE_MISMATCH:return"STATE_MISMATCH";case DisconnectReason.JOIN_FAILURE:return"JOIN_FAILURE";case DisconnectReason.UNRECOGNIZED:default:return"UNRECOGNIZED"}}var ReconnectReason;(function(a){a[a.RR_UNKOWN=0]="RR_UNKOWN",a[a.RR_SIGNAL_DISCONNECTED=1]="RR_SIGNAL_DISCONNECTED",a[a.RR_PUBLISHER_FAILED=2]="RR_PUBLISHER_FAILED",a[a.RR_SUBSCRIBER_FAILED=3]="RR_SUBSCRIBER_FAILED",a[a.RR_SWITCH_CANDIDATE=4]="RR_SWITCH_CANDIDATE",a[a.UNRECOGNIZED=-1]="UNRECOGNIZED"})(ReconnectReason||(ReconnectReason={}));var ParticipantInfo_State;(function(a){a[a.JOINING=0]="JOINING",a[a.JOINED=1]="JOINED",a[a.ACTIVE=2]="ACTIVE",a[a.DISCONNECTED=3]="DISCONNECTED",a[a.UNRECOGNIZED=-1]="UNRECOGNIZED"})(ParticipantInfo_State||(ParticipantInfo_State={}));function participantInfo_StateFromJSON(a){switch(a){case 0:case"JOINING":return ParticipantInfo_State.JOINING;case 1:case"JOINED":return ParticipantInfo_State.JOINED;case 2:case"ACTIVE":return ParticipantInfo_State.ACTIVE;case 3:case"DISCONNECTED":return ParticipantInfo_State.DISCONNECTED;case-1:case"UNRECOGNIZED":default:return ParticipantInfo_State.UNRECOGNIZED}}function participantInfo_StateToJSON(a){switch(a){case ParticipantInfo_State.JOINING:return"JOINING";case ParticipantInfo_State.JOINED:return"JOINED";case ParticipantInfo_State.ACTIVE:return"ACTIVE";case ParticipantInfo_State.DISCONNECTED:return"DISCONNECTED";case ParticipantInfo_State.UNRECOGNIZED:default:return"UNRECOGNIZED"}}var Encryption_Type;(function(a){a[a.NONE=0]="NONE",a[a.GCM=1]="GCM",a[a.CUSTOM=2]="CUSTOM",a[a.UNRECOGNIZED=-1]="UNRECOGNIZED"})(Encryption_Type||(Encryption_Type={}));function encryption_TypeFromJSON(a){switch(a){case 0:case"NONE":return Encryption_Type.NONE;case 1:case"GCM":return Encryption_Type.GCM;case 2:case"CUSTOM":return Encryption_Type.CUSTOM;case-1:case"UNRECOGNIZED":default:return Encryption_Type.UNRECOGNIZED}}function encryption_TypeToJSON(a){switch(a){case Encryption_Type.NONE:return"NONE";case Encryption_Type.GCM:return"GCM";case Encryption_Type.CUSTOM:return"CUSTOM";case Encryption_Type.UNRECOGNIZED:default:return"UNRECOGNIZED"}}var DataPacket_Kind;(function(a){a[a.RELIABLE=0]="RELIABLE",a[a.LOSSY=1]="LOSSY",a[a.UNRECOGNIZED=-1]="UNRECOGNIZED"})(DataPacket_Kind||(DataPacket_Kind={}));function dataPacket_KindFromJSON(a){switch(a){case 0:case"RELIABLE":return DataPacket_Kind.RELIABLE;case 1:case"LOSSY":return DataPacket_Kind.LOSSY;case-1:case"UNRECOGNIZED":default:return DataPacket_Kind.UNRECOGNIZED}}function dataPacket_KindToJSON(a){switch(a){case DataPacket_Kind.RELIABLE:return"RELIABLE";case DataPacket_Kind.LOSSY:return"LOSSY";case DataPacket_Kind.UNRECOGNIZED:default:return"UNRECOGNIZED"}}var ServerInfo_Edition;(function(a){a[a.Standard=0]="Standard",a[a.Cloud=1]="Cloud",a[a.UNRECOGNIZED=-1]="UNRECOGNIZED"})(ServerInfo_Edition||(ServerInfo_Edition={}));function serverInfo_EditionFromJSON(a){switch(a){case 0:case"Standard":return ServerInfo_Edition.Standard;case 1:case"Cloud":return ServerInfo_Edition.Cloud;case-1:case"UNRECOGNIZED":default:return ServerInfo_Edition.UNRECOGNIZED}}function serverInfo_EditionToJSON(a){switch(a){case ServerInfo_Edition.Standard:return"Standard";case ServerInfo_Edition.Cloud:return"Cloud";case ServerInfo_Edition.UNRECOGNIZED:default:return"UNRECOGNIZED"}}var ClientInfo_SDK;(function(a){a[a.UNKNOWN=0]="UNKNOWN",a[a.JS=1]="JS",a[a.SWIFT=2]="SWIFT",a[a.ANDROID=3]="ANDROID",a[a.FLUTTER=4]="FLUTTER",a[a.GO=5]="GO",a[a.UNITY=6]="UNITY",a[a.UNRECOGNIZED=-1]="UNRECOGNIZED"})(ClientInfo_SDK||(ClientInfo_SDK={}));function clientInfo_SDKFromJSON(a){switch(a){case 0:case"UNKNOWN":return ClientInfo_SDK.UNKNOWN;case 1:case"JS":return ClientInfo_SDK.JS;case 2:case"SWIFT":return ClientInfo_SDK.SWIFT;case 3:case"ANDROID":return ClientInfo_SDK.ANDROID;case 4:case"FLUTTER":return ClientInfo_SDK.FLUTTER;case 5:case"GO":return ClientInfo_SDK.GO;case 6:case"UNITY":return ClientInfo_SDK.UNITY;case-1:case"UNRECOGNIZED":default:return ClientInfo_SDK.UNRECOGNIZED}}function clientInfo_SDKToJSON(a){switch(a){case ClientInfo_SDK.UNKNOWN:return"UNKNOWN";case ClientInfo_SDK.JS:return"JS";case ClientInfo_SDK.SWIFT:return"SWIFT";case ClientInfo_SDK.ANDROID:return"ANDROID";case ClientInfo_SDK.FLUTTER:return"FLUTTER";case ClientInfo_SDK.GO:return"GO";case ClientInfo_SDK.UNITY:return"UNITY";case ClientInfo_SDK.UNRECOGNIZED:default:return"UNRECOGNIZED"}}function createBaseRoom(){return{sid:"",name:"",emptyTimeout:0,maxParticipants:0,creationTime:0,turnPassword:"",enabledCodecs:[],metadata:"",numParticipants:0,activeRecording:!1}}const Room$1={encode(a){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_m0.Writer.create();a.sid!==""&&s.uint32(10).string(a.sid),a.name!==""&&s.uint32(18).string(a.name),a.emptyTimeout!==0&&s.uint32(24).uint32(a.emptyTimeout),a.maxParticipants!==0&&s.uint32(32).uint32(a.maxParticipants),a.creationTime!==0&&s.uint32(40).int64(a.creationTime),a.turnPassword!==""&&s.uint32(50).string(a.turnPassword);for(const d of a.enabledCodecs)Codec.encode(d,s.uint32(58).fork()).ldelim();return a.metadata!==""&&s.uint32(66).string(a.metadata),a.numParticipants!==0&&s.uint32(72).uint32(a.numParticipants),a.activeRecording===!0&&s.uint32(80).bool(a.activeRecording),s},decode(a,s){const d=a instanceof _m0.Reader?a:new _m0.Reader(a);let c=s===void 0?d.len:d.pos+s;const h=createBaseRoom();for(;d.pos<c;){const b=d.uint32();switch(b>>>3){case 1:h.sid=d.string();break;case 2:h.name=d.string();break;case 3:h.emptyTimeout=d.uint32();break;case 4:h.maxParticipants=d.uint32();break;case 5:h.creationTime=longToNumber$1(d.int64());break;case 6:h.turnPassword=d.string();break;case 7:h.enabledCodecs.push(Codec.decode(d,d.uint32()));break;case 8:h.metadata=d.string();break;case 9:h.numParticipants=d.uint32();break;case 10:h.activeRecording=d.bool();break;default:d.skipType(b&7);break}}return h},fromJSON(a){return{sid:isSet$1(a.sid)?String(a.sid):"",name:isSet$1(a.name)?String(a.name):"",emptyTimeout:isSet$1(a.emptyTimeout)?Number(a.emptyTimeout):0,maxParticipants:isSet$1(a.maxParticipants)?Number(a.maxParticipants):0,creationTime:isSet$1(a.creationTime)?Number(a.creationTime):0,turnPassword:isSet$1(a.turnPassword)?String(a.turnPassword):"",enabledCodecs:Array.isArray(a==null?void 0:a.enabledCodecs)?a.enabledCodecs.map(s=>Codec.fromJSON(s)):[],metadata:isSet$1(a.metadata)?String(a.metadata):"",numParticipants:isSet$1(a.numParticipants)?Number(a.numParticipants):0,activeRecording:isSet$1(a.activeRecording)?Boolean(a.activeRecording):!1}},toJSON(a){const s={};return a.sid!==void 0&&(s.sid=a.sid),a.name!==void 0&&(s.name=a.name),a.emptyTimeout!==void 0&&(s.emptyTimeout=Math.round(a.emptyTimeout)),a.maxParticipants!==void 0&&(s.maxParticipants=Math.round(a.maxParticipants)),a.creationTime!==void 0&&(s.creationTime=Math.round(a.creationTime)),a.turnPassword!==void 0&&(s.turnPassword=a.turnPassword),a.enabledCodecs?s.enabledCodecs=a.enabledCodecs.map(d=>d?Codec.toJSON(d):void 0):s.enabledCodecs=[],a.metadata!==void 0&&(s.metadata=a.metadata),a.numParticipants!==void 0&&(s.numParticipants=Math.round(a.numParticipants)),a.activeRecording!==void 0&&(s.activeRecording=a.activeRecording),s},create(a){return Room$1.fromPartial(a!=null?a:{})},fromPartial(a){var s,d,c,h,b,_,$,_e,tt,rt;const ot=createBaseRoom();return ot.sid=(s=a.sid)!==null&&s!==void 0?s:"",ot.name=(d=a.name)!==null&&d!==void 0?d:"",ot.emptyTimeout=(c=a.emptyTimeout)!==null&&c!==void 0?c:0,ot.maxParticipants=(h=a.maxParticipants)!==null&&h!==void 0?h:0,ot.creationTime=(b=a.creationTime)!==null&&b!==void 0?b:0,ot.turnPassword=(_=a.turnPassword)!==null&&_!==void 0?_:"",ot.enabledCodecs=(($=a.enabledCodecs)===null||$===void 0?void 0:$.map(it=>Codec.fromPartial(it)))||[],ot.metadata=(_e=a.metadata)!==null&&_e!==void 0?_e:"",ot.numParticipants=(tt=a.numParticipants)!==null&&tt!==void 0?tt:0,ot.activeRecording=(rt=a.activeRecording)!==null&&rt!==void 0?rt:!1,ot}};function createBaseCodec(){return{mime:"",fmtpLine:""}}const Codec={encode(a){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_m0.Writer.create();return a.mime!==""&&s.uint32(10).string(a.mime),a.fmtpLine!==""&&s.uint32(18).string(a.fmtpLine),s},decode(a,s){const d=a instanceof _m0.Reader?a:new _m0.Reader(a);let c=s===void 0?d.len:d.pos+s;const h=createBaseCodec();for(;d.pos<c;){const b=d.uint32();switch(b>>>3){case 1:h.mime=d.string();break;case 2:h.fmtpLine=d.string();break;default:d.skipType(b&7);break}}return h},fromJSON(a){return{mime:isSet$1(a.mime)?String(a.mime):"",fmtpLine:isSet$1(a.fmtpLine)?String(a.fmtpLine):""}},toJSON(a){const s={};return a.mime!==void 0&&(s.mime=a.mime),a.fmtpLine!==void 0&&(s.fmtpLine=a.fmtpLine),s},create(a){return Codec.fromPartial(a!=null?a:{})},fromPartial(a){var s,d;const c=createBaseCodec();return c.mime=(s=a.mime)!==null&&s!==void 0?s:"",c.fmtpLine=(d=a.fmtpLine)!==null&&d!==void 0?d:"",c}};function createBaseParticipantPermission(){return{canSubscribe:!1,canPublish:!1,canPublishData:!1,canPublishSources:[],hidden:!1,recorder:!1}}const ParticipantPermission={encode(a){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_m0.Writer.create();a.canSubscribe===!0&&s.uint32(8).bool(a.canSubscribe),a.canPublish===!0&&s.uint32(16).bool(a.canPublish),a.canPublishData===!0&&s.uint32(24).bool(a.canPublishData),s.uint32(74).fork();for(const d of a.canPublishSources)s.int32(d);return s.ldelim(),a.hidden===!0&&s.uint32(56).bool(a.hidden),a.recorder===!0&&s.uint32(64).bool(a.recorder),s},decode(a,s){const d=a instanceof _m0.Reader?a:new _m0.Reader(a);let c=s===void 0?d.len:d.pos+s;const h=createBaseParticipantPermission();for(;d.pos<c;){const b=d.uint32();switch(b>>>3){case 1:h.canSubscribe=d.bool();break;case 2:h.canPublish=d.bool();break;case 3:h.canPublishData=d.bool();break;case 9:if((b&7)===2){const _=d.uint32()+d.pos;for(;d.pos<_;)h.canPublishSources.push(d.int32())}else h.canPublishSources.push(d.int32());break;case 7:h.hidden=d.bool();break;case 8:h.recorder=d.bool();break;default:d.skipType(b&7);break}}return h},fromJSON(a){return{canSubscribe:isSet$1(a.canSubscribe)?Boolean(a.canSubscribe):!1,canPublish:isSet$1(a.canPublish)?Boolean(a.canPublish):!1,canPublishData:isSet$1(a.canPublishData)?Boolean(a.canPublishData):!1,canPublishSources:Array.isArray(a==null?void 0:a.canPublishSources)?a.canPublishSources.map(s=>trackSourceFromJSON(s)):[],hidden:isSet$1(a.hidden)?Boolean(a.hidden):!1,recorder:isSet$1(a.recorder)?Boolean(a.recorder):!1}},toJSON(a){const s={};return a.canSubscribe!==void 0&&(s.canSubscribe=a.canSubscribe),a.canPublish!==void 0&&(s.canPublish=a.canPublish),a.canPublishData!==void 0&&(s.canPublishData=a.canPublishData),a.canPublishSources?s.canPublishSources=a.canPublishSources.map(d=>trackSourceToJSON(d)):s.canPublishSources=[],a.hidden!==void 0&&(s.hidden=a.hidden),a.recorder!==void 0&&(s.recorder=a.recorder),s},create(a){return ParticipantPermission.fromPartial(a!=null?a:{})},fromPartial(a){var s,d,c,h,b,_;const $=createBaseParticipantPermission();return $.canSubscribe=(s=a.canSubscribe)!==null&&s!==void 0?s:!1,$.canPublish=(d=a.canPublish)!==null&&d!==void 0?d:!1,$.canPublishData=(c=a.canPublishData)!==null&&c!==void 0?c:!1,$.canPublishSources=((h=a.canPublishSources)===null||h===void 0?void 0:h.map(_e=>_e))||[],$.hidden=(b=a.hidden)!==null&&b!==void 0?b:!1,$.recorder=(_=a.recorder)!==null&&_!==void 0?_:!1,$}};function createBaseParticipantInfo(){return{sid:"",identity:"",state:0,tracks:[],metadata:"",joinedAt:0,name:"",version:0,permission:void 0,region:"",isPublisher:!1}}const ParticipantInfo={encode(a){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_m0.Writer.create();a.sid!==""&&s.uint32(10).string(a.sid),a.identity!==""&&s.uint32(18).string(a.identity),a.state!==0&&s.uint32(24).int32(a.state);for(const d of a.tracks)TrackInfo.encode(d,s.uint32(34).fork()).ldelim();return a.metadata!==""&&s.uint32(42).string(a.metadata),a.joinedAt!==0&&s.uint32(48).int64(a.joinedAt),a.name!==""&&s.uint32(74).string(a.name),a.version!==0&&s.uint32(80).uint32(a.version),a.permission!==void 0&&ParticipantPermission.encode(a.permission,s.uint32(90).fork()).ldelim(),a.region!==""&&s.uint32(98).string(a.region),a.isPublisher===!0&&s.uint32(104).bool(a.isPublisher),s},decode(a,s){const d=a instanceof _m0.Reader?a:new _m0.Reader(a);let c=s===void 0?d.len:d.pos+s;const h=createBaseParticipantInfo();for(;d.pos<c;){const b=d.uint32();switch(b>>>3){case 1:h.sid=d.string();break;case 2:h.identity=d.string();break;case 3:h.state=d.int32();break;case 4:h.tracks.push(TrackInfo.decode(d,d.uint32()));break;case 5:h.metadata=d.string();break;case 6:h.joinedAt=longToNumber$1(d.int64());break;case 9:h.name=d.string();break;case 10:h.version=d.uint32();break;case 11:h.permission=ParticipantPermission.decode(d,d.uint32());break;case 12:h.region=d.string();break;case 13:h.isPublisher=d.bool();break;default:d.skipType(b&7);break}}return h},fromJSON(a){return{sid:isSet$1(a.sid)?String(a.sid):"",identity:isSet$1(a.identity)?String(a.identity):"",state:isSet$1(a.state)?participantInfo_StateFromJSON(a.state):0,tracks:Array.isArray(a==null?void 0:a.tracks)?a.tracks.map(s=>TrackInfo.fromJSON(s)):[],metadata:isSet$1(a.metadata)?String(a.metadata):"",joinedAt:isSet$1(a.joinedAt)?Number(a.joinedAt):0,name:isSet$1(a.name)?String(a.name):"",version:isSet$1(a.version)?Number(a.version):0,permission:isSet$1(a.permission)?ParticipantPermission.fromJSON(a.permission):void 0,region:isSet$1(a.region)?String(a.region):"",isPublisher:isSet$1(a.isPublisher)?Boolean(a.isPublisher):!1}},toJSON(a){const s={};return a.sid!==void 0&&(s.sid=a.sid),a.identity!==void 0&&(s.identity=a.identity),a.state!==void 0&&(s.state=participantInfo_StateToJSON(a.state)),a.tracks?s.tracks=a.tracks.map(d=>d?TrackInfo.toJSON(d):void 0):s.tracks=[],a.metadata!==void 0&&(s.metadata=a.metadata),a.joinedAt!==void 0&&(s.joinedAt=Math.round(a.joinedAt)),a.name!==void 0&&(s.name=a.name),a.version!==void 0&&(s.version=Math.round(a.version)),a.permission!==void 0&&(s.permission=a.permission?ParticipantPermission.toJSON(a.permission):void 0),a.region!==void 0&&(s.region=a.region),a.isPublisher!==void 0&&(s.isPublisher=a.isPublisher),s},create(a){return ParticipantInfo.fromPartial(a!=null?a:{})},fromPartial(a){var s,d,c,h,b,_,$,_e,tt,rt;const ot=createBaseParticipantInfo();return ot.sid=(s=a.sid)!==null&&s!==void 0?s:"",ot.identity=(d=a.identity)!==null&&d!==void 0?d:"",ot.state=(c=a.state)!==null&&c!==void 0?c:0,ot.tracks=((h=a.tracks)===null||h===void 0?void 0:h.map(it=>TrackInfo.fromPartial(it)))||[],ot.metadata=(b=a.metadata)!==null&&b!==void 0?b:"",ot.joinedAt=(_=a.joinedAt)!==null&&_!==void 0?_:0,ot.name=($=a.name)!==null&&$!==void 0?$:"",ot.version=(_e=a.version)!==null&&_e!==void 0?_e:0,ot.permission=a.permission!==void 0&&a.permission!==null?ParticipantPermission.fromPartial(a.permission):void 0,ot.region=(tt=a.region)!==null&&tt!==void 0?tt:"",ot.isPublisher=(rt=a.isPublisher)!==null&&rt!==void 0?rt:!1,ot}};function createBaseSimulcastCodecInfo(){return{mimeType:"",mid:"",cid:"",layers:[]}}const SimulcastCodecInfo={encode(a){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_m0.Writer.create();a.mimeType!==""&&s.uint32(10).string(a.mimeType),a.mid!==""&&s.uint32(18).string(a.mid),a.cid!==""&&s.uint32(26).string(a.cid);for(const d of a.layers)VideoLayer.encode(d,s.uint32(34).fork()).ldelim();return s},decode(a,s){const d=a instanceof _m0.Reader?a:new _m0.Reader(a);let c=s===void 0?d.len:d.pos+s;const h=createBaseSimulcastCodecInfo();for(;d.pos<c;){const b=d.uint32();switch(b>>>3){case 1:h.mimeType=d.string();break;case 2:h.mid=d.string();break;case 3:h.cid=d.string();break;case 4:h.layers.push(VideoLayer.decode(d,d.uint32()));break;default:d.skipType(b&7);break}}return h},fromJSON(a){return{mimeType:isSet$1(a.mimeType)?String(a.mimeType):"",mid:isSet$1(a.mid)?String(a.mid):"",cid:isSet$1(a.cid)?String(a.cid):"",layers:Array.isArray(a==null?void 0:a.layers)?a.layers.map(s=>VideoLayer.fromJSON(s)):[]}},toJSON(a){const s={};return a.mimeType!==void 0&&(s.mimeType=a.mimeType),a.mid!==void 0&&(s.mid=a.mid),a.cid!==void 0&&(s.cid=a.cid),a.layers?s.layers=a.layers.map(d=>d?VideoLayer.toJSON(d):void 0):s.layers=[],s},create(a){return SimulcastCodecInfo.fromPartial(a!=null?a:{})},fromPartial(a){var s,d,c,h;const b=createBaseSimulcastCodecInfo();return b.mimeType=(s=a.mimeType)!==null&&s!==void 0?s:"",b.mid=(d=a.mid)!==null&&d!==void 0?d:"",b.cid=(c=a.cid)!==null&&c!==void 0?c:"",b.layers=((h=a.layers)===null||h===void 0?void 0:h.map(_=>VideoLayer.fromPartial(_)))||[],b}};function createBaseTrackInfo(){return{sid:"",type:0,name:"",muted:!1,width:0,height:0,simulcast:!1,disableDtx:!1,source:0,layers:[],mimeType:"",mid:"",codecs:[],stereo:!1,disableRed:!1,encryption:0}}const TrackInfo={encode(a){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_m0.Writer.create();a.sid!==""&&s.uint32(10).string(a.sid),a.type!==0&&s.uint32(16).int32(a.type),a.name!==""&&s.uint32(26).string(a.name),a.muted===!0&&s.uint32(32).bool(a.muted),a.width!==0&&s.uint32(40).uint32(a.width),a.height!==0&&s.uint32(48).uint32(a.height),a.simulcast===!0&&s.uint32(56).bool(a.simulcast),a.disableDtx===!0&&s.uint32(64).bool(a.disableDtx),a.source!==0&&s.uint32(72).int32(a.source);for(const d of a.layers)VideoLayer.encode(d,s.uint32(82).fork()).ldelim();a.mimeType!==""&&s.uint32(90).string(a.mimeType),a.mid!==""&&s.uint32(98).string(a.mid);for(const d of a.codecs)SimulcastCodecInfo.encode(d,s.uint32(106).fork()).ldelim();return a.stereo===!0&&s.uint32(112).bool(a.stereo),a.disableRed===!0&&s.uint32(120).bool(a.disableRed),a.encryption!==0&&s.uint32(128).int32(a.encryption),s},decode(a,s){const d=a instanceof _m0.Reader?a:new _m0.Reader(a);let c=s===void 0?d.len:d.pos+s;const h=createBaseTrackInfo();for(;d.pos<c;){const b=d.uint32();switch(b>>>3){case 1:h.sid=d.string();break;case 2:h.type=d.int32();break;case 3:h.name=d.string();break;case 4:h.muted=d.bool();break;case 5:h.width=d.uint32();break;case 6:h.height=d.uint32();break;case 7:h.simulcast=d.bool();break;case 8:h.disableDtx=d.bool();break;case 9:h.source=d.int32();break;case 10:h.layers.push(VideoLayer.decode(d,d.uint32()));break;case 11:h.mimeType=d.string();break;case 12:h.mid=d.string();break;case 13:h.codecs.push(SimulcastCodecInfo.decode(d,d.uint32()));break;case 14:h.stereo=d.bool();break;case 15:h.disableRed=d.bool();break;case 16:h.encryption=d.int32();break;default:d.skipType(b&7);break}}return h},fromJSON(a){return{sid:isSet$1(a.sid)?String(a.sid):"",type:isSet$1(a.type)?trackTypeFromJSON(a.type):0,name:isSet$1(a.name)?String(a.name):"",muted:isSet$1(a.muted)?Boolean(a.muted):!1,width:isSet$1(a.width)?Number(a.width):0,height:isSet$1(a.height)?Number(a.height):0,simulcast:isSet$1(a.simulcast)?Boolean(a.simulcast):!1,disableDtx:isSet$1(a.disableDtx)?Boolean(a.disableDtx):!1,source:isSet$1(a.source)?trackSourceFromJSON(a.source):0,layers:Array.isArray(a==null?void 0:a.layers)?a.layers.map(s=>VideoLayer.fromJSON(s)):[],mimeType:isSet$1(a.mimeType)?String(a.mimeType):"",mid:isSet$1(a.mid)?String(a.mid):"",codecs:Array.isArray(a==null?void 0:a.codecs)?a.codecs.map(s=>SimulcastCodecInfo.fromJSON(s)):[],stereo:isSet$1(a.stereo)?Boolean(a.stereo):!1,disableRed:isSet$1(a.disableRed)?Boolean(a.disableRed):!1,encryption:isSet$1(a.encryption)?encryption_TypeFromJSON(a.encryption):0}},toJSON(a){const s={};return a.sid!==void 0&&(s.sid=a.sid),a.type!==void 0&&(s.type=trackTypeToJSON(a.type)),a.name!==void 0&&(s.name=a.name),a.muted!==void 0&&(s.muted=a.muted),a.width!==void 0&&(s.width=Math.round(a.width)),a.height!==void 0&&(s.height=Math.round(a.height)),a.simulcast!==void 0&&(s.simulcast=a.simulcast),a.disableDtx!==void 0&&(s.disableDtx=a.disableDtx),a.source!==void 0&&(s.source=trackSourceToJSON(a.source)),a.layers?s.layers=a.layers.map(d=>d?VideoLayer.toJSON(d):void 0):s.layers=[],a.mimeType!==void 0&&(s.mimeType=a.mimeType),a.mid!==void 0&&(s.mid=a.mid),a.codecs?s.codecs=a.codecs.map(d=>d?SimulcastCodecInfo.toJSON(d):void 0):s.codecs=[],a.stereo!==void 0&&(s.stereo=a.stereo),a.disableRed!==void 0&&(s.disableRed=a.disableRed),a.encryption!==void 0&&(s.encryption=encryption_TypeToJSON(a.encryption)),s},create(a){return TrackInfo.fromPartial(a!=null?a:{})},fromPartial(a){var s,d,c,h,b,_,$,_e,tt,rt,ot,it,st,lt,dt,ut;const ht=createBaseTrackInfo();return ht.sid=(s=a.sid)!==null&&s!==void 0?s:"",ht.type=(d=a.type)!==null&&d!==void 0?d:0,ht.name=(c=a.name)!==null&&c!==void 0?c:"",ht.muted=(h=a.muted)!==null&&h!==void 0?h:!1,ht.width=(b=a.width)!==null&&b!==void 0?b:0,ht.height=(_=a.height)!==null&&_!==void 0?_:0,ht.simulcast=($=a.simulcast)!==null&&$!==void 0?$:!1,ht.disableDtx=(_e=a.disableDtx)!==null&&_e!==void 0?_e:!1,ht.source=(tt=a.source)!==null&&tt!==void 0?tt:0,ht.layers=((rt=a.layers)===null||rt===void 0?void 0:rt.map(nt=>VideoLayer.fromPartial(nt)))||[],ht.mimeType=(ot=a.mimeType)!==null&&ot!==void 0?ot:"",ht.mid=(it=a.mid)!==null&&it!==void 0?it:"",ht.codecs=((st=a.codecs)===null||st===void 0?void 0:st.map(nt=>SimulcastCodecInfo.fromPartial(nt)))||[],ht.stereo=(lt=a.stereo)!==null&&lt!==void 0?lt:!1,ht.disableRed=(dt=a.disableRed)!==null&&dt!==void 0?dt:!1,ht.encryption=(ut=a.encryption)!==null&&ut!==void 0?ut:0,ht}};function createBaseVideoLayer(){return{quality:0,width:0,height:0,bitrate:0,ssrc:0}}const VideoLayer={encode(a){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_m0.Writer.create();return a.quality!==0&&s.uint32(8).int32(a.quality),a.width!==0&&s.uint32(16).uint32(a.width),a.height!==0&&s.uint32(24).uint32(a.height),a.bitrate!==0&&s.uint32(32).uint32(a.bitrate),a.ssrc!==0&&s.uint32(40).uint32(a.ssrc),s},decode(a,s){const d=a instanceof _m0.Reader?a:new _m0.Reader(a);let c=s===void 0?d.len:d.pos+s;const h=createBaseVideoLayer();for(;d.pos<c;){const b=d.uint32();switch(b>>>3){case 1:h.quality=d.int32();break;case 2:h.width=d.uint32();break;case 3:h.height=d.uint32();break;case 4:h.bitrate=d.uint32();break;case 5:h.ssrc=d.uint32();break;default:d.skipType(b&7);break}}return h},fromJSON(a){return{quality:isSet$1(a.quality)?videoQualityFromJSON(a.quality):0,width:isSet$1(a.width)?Number(a.width):0,height:isSet$1(a.height)?Number(a.height):0,bitrate:isSet$1(a.bitrate)?Number(a.bitrate):0,ssrc:isSet$1(a.ssrc)?Number(a.ssrc):0}},toJSON(a){const s={};return a.quality!==void 0&&(s.quality=videoQualityToJSON(a.quality)),a.width!==void 0&&(s.width=Math.round(a.width)),a.height!==void 0&&(s.height=Math.round(a.height)),a.bitrate!==void 0&&(s.bitrate=Math.round(a.bitrate)),a.ssrc!==void 0&&(s.ssrc=Math.round(a.ssrc)),s},create(a){return VideoLayer.fromPartial(a!=null?a:{})},fromPartial(a){var s,d,c,h,b;const _=createBaseVideoLayer();return _.quality=(s=a.quality)!==null&&s!==void 0?s:0,_.width=(d=a.width)!==null&&d!==void 0?d:0,_.height=(c=a.height)!==null&&c!==void 0?c:0,_.bitrate=(h=a.bitrate)!==null&&h!==void 0?h:0,_.ssrc=(b=a.ssrc)!==null&&b!==void 0?b:0,_}};function createBaseDataPacket(){return{kind:0,value:void 0}}const DataPacket={encode(a){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_m0.Writer.create();var d;switch(a.kind!==0&&s.uint32(8).int32(a.kind),(d=a.value)===null||d===void 0?void 0:d.$case){case"user":UserPacket.encode(a.value.user,s.uint32(18).fork()).ldelim();break;case"speaker":ActiveSpeakerUpdate.encode(a.value.speaker,s.uint32(26).fork()).ldelim();break}return s},decode(a,s){const d=a instanceof _m0.Reader?a:new _m0.Reader(a);let c=s===void 0?d.len:d.pos+s;const h=createBaseDataPacket();for(;d.pos<c;){const b=d.uint32();switch(b>>>3){case 1:h.kind=d.int32();break;case 2:h.value={$case:"user",user:UserPacket.decode(d,d.uint32())};break;case 3:h.value={$case:"speaker",speaker:ActiveSpeakerUpdate.decode(d,d.uint32())};break;default:d.skipType(b&7);break}}return h},fromJSON(a){return{kind:isSet$1(a.kind)?dataPacket_KindFromJSON(a.kind):0,value:isSet$1(a.user)?{$case:"user",user:UserPacket.fromJSON(a.user)}:isSet$1(a.speaker)?{$case:"speaker",speaker:ActiveSpeakerUpdate.fromJSON(a.speaker)}:void 0}},toJSON(a){var s,d,c,h,b,_;const $={};return a.kind!==void 0&&($.kind=dataPacket_KindToJSON(a.kind)),((s=a.value)===null||s===void 0?void 0:s.$case)==="user"&&($.user=!((d=a.value)===null||d===void 0)&&d.user?UserPacket.toJSON((c=a.value)===null||c===void 0?void 0:c.user):void 0),((h=a.value)===null||h===void 0?void 0:h.$case)==="speaker"&&($.speaker=!((b=a.value)===null||b===void 0)&&b.speaker?ActiveSpeakerUpdate.toJSON((_=a.value)===null||_===void 0?void 0:_.speaker):void 0),$},create(a){return DataPacket.fromPartial(a!=null?a:{})},fromPartial(a){var s,d,c,h,b,_,$;const _e=createBaseDataPacket();return _e.kind=(s=a.kind)!==null&&s!==void 0?s:0,((d=a.value)===null||d===void 0?void 0:d.$case)==="user"&&((c=a.value)===null||c===void 0?void 0:c.user)!==void 0&&((h=a.value)===null||h===void 0?void 0:h.user)!==null&&(_e.value={$case:"user",user:UserPacket.fromPartial(a.value.user)}),((b=a.value)===null||b===void 0?void 0:b.$case)==="speaker"&&((_=a.value)===null||_===void 0?void 0:_.speaker)!==void 0&&(($=a.value)===null||$===void 0?void 0:$.speaker)!==null&&(_e.value={$case:"speaker",speaker:ActiveSpeakerUpdate.fromPartial(a.value.speaker)}),_e}};function createBaseActiveSpeakerUpdate(){return{speakers:[]}}const ActiveSpeakerUpdate={encode(a){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_m0.Writer.create();for(const d of a.speakers)SpeakerInfo.encode(d,s.uint32(10).fork()).ldelim();return s},decode(a,s){const d=a instanceof _m0.Reader?a:new _m0.Reader(a);let c=s===void 0?d.len:d.pos+s;const h=createBaseActiveSpeakerUpdate();for(;d.pos<c;){const b=d.uint32();switch(b>>>3){case 1:h.speakers.push(SpeakerInfo.decode(d,d.uint32()));break;default:d.skipType(b&7);break}}return h},fromJSON(a){return{speakers:Array.isArray(a==null?void 0:a.speakers)?a.speakers.map(s=>SpeakerInfo.fromJSON(s)):[]}},toJSON(a){const s={};return a.speakers?s.speakers=a.speakers.map(d=>d?SpeakerInfo.toJSON(d):void 0):s.speakers=[],s},create(a){return ActiveSpeakerUpdate.fromPartial(a!=null?a:{})},fromPartial(a){var s;const d=createBaseActiveSpeakerUpdate();return d.speakers=((s=a.speakers)===null||s===void 0?void 0:s.map(c=>SpeakerInfo.fromPartial(c)))||[],d}};function createBaseSpeakerInfo(){return{sid:"",level:0,active:!1}}const SpeakerInfo={encode(a){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_m0.Writer.create();return a.sid!==""&&s.uint32(10).string(a.sid),a.level!==0&&s.uint32(21).float(a.level),a.active===!0&&s.uint32(24).bool(a.active),s},decode(a,s){const d=a instanceof _m0.Reader?a:new _m0.Reader(a);let c=s===void 0?d.len:d.pos+s;const h=createBaseSpeakerInfo();for(;d.pos<c;){const b=d.uint32();switch(b>>>3){case 1:h.sid=d.string();break;case 2:h.level=d.float();break;case 3:h.active=d.bool();break;default:d.skipType(b&7);break}}return h},fromJSON(a){return{sid:isSet$1(a.sid)?String(a.sid):"",level:isSet$1(a.level)?Number(a.level):0,active:isSet$1(a.active)?Boolean(a.active):!1}},toJSON(a){const s={};return a.sid!==void 0&&(s.sid=a.sid),a.level!==void 0&&(s.level=a.level),a.active!==void 0&&(s.active=a.active),s},create(a){return SpeakerInfo.fromPartial(a!=null?a:{})},fromPartial(a){var s,d,c;const h=createBaseSpeakerInfo();return h.sid=(s=a.sid)!==null&&s!==void 0?s:"",h.level=(d=a.level)!==null&&d!==void 0?d:0,h.active=(c=a.active)!==null&&c!==void 0?c:!1,h}};function createBaseUserPacket(){return{participantSid:"",payload:new Uint8Array,destinationSids:[],topic:void 0}}const UserPacket={encode(a){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_m0.Writer.create();a.participantSid!==""&&s.uint32(10).string(a.participantSid),a.payload.length!==0&&s.uint32(18).bytes(a.payload);for(const d of a.destinationSids)s.uint32(26).string(d);return a.topic!==void 0&&s.uint32(34).string(a.topic),s},decode(a,s){const d=a instanceof _m0.Reader?a:new _m0.Reader(a);let c=s===void 0?d.len:d.pos+s;const h=createBaseUserPacket();for(;d.pos<c;){const b=d.uint32();switch(b>>>3){case 1:h.participantSid=d.string();break;case 2:h.payload=d.bytes();break;case 3:h.destinationSids.push(d.string());break;case 4:h.topic=d.string();break;default:d.skipType(b&7);break}}return h},fromJSON(a){return{participantSid:isSet$1(a.participantSid)?String(a.participantSid):"",payload:isSet$1(a.payload)?bytesFromBase64(a.payload):new Uint8Array,destinationSids:Array.isArray(a==null?void 0:a.destinationSids)?a.destinationSids.map(s=>String(s)):[],topic:isSet$1(a.topic)?String(a.topic):void 0}},toJSON(a){const s={};return a.participantSid!==void 0&&(s.participantSid=a.participantSid),a.payload!==void 0&&(s.payload=base64FromBytes(a.payload!==void 0?a.payload:new Uint8Array)),a.destinationSids?s.destinationSids=a.destinationSids.map(d=>d):s.destinationSids=[],a.topic!==void 0&&(s.topic=a.topic),s},create(a){return UserPacket.fromPartial(a!=null?a:{})},fromPartial(a){var s,d,c,h;const b=createBaseUserPacket();return b.participantSid=(s=a.participantSid)!==null&&s!==void 0?s:"",b.payload=(d=a.payload)!==null&&d!==void 0?d:new Uint8Array,b.destinationSids=((c=a.destinationSids)===null||c===void 0?void 0:c.map(_=>_))||[],b.topic=(h=a.topic)!==null&&h!==void 0?h:void 0,b}};function createBaseParticipantTracks(){return{participantSid:"",trackSids:[]}}const ParticipantTracks={encode(a){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_m0.Writer.create();a.participantSid!==""&&s.uint32(10).string(a.participantSid);for(const d of a.trackSids)s.uint32(18).string(d);return s},decode(a,s){const d=a instanceof _m0.Reader?a:new _m0.Reader(a);let c=s===void 0?d.len:d.pos+s;const h=createBaseParticipantTracks();for(;d.pos<c;){const b=d.uint32();switch(b>>>3){case 1:h.participantSid=d.string();break;case 2:h.trackSids.push(d.string());break;default:d.skipType(b&7);break}}return h},fromJSON(a){return{participantSid:isSet$1(a.participantSid)?String(a.participantSid):"",trackSids:Array.isArray(a==null?void 0:a.trackSids)?a.trackSids.map(s=>String(s)):[]}},toJSON(a){const s={};return a.participantSid!==void 0&&(s.participantSid=a.participantSid),a.trackSids?s.trackSids=a.trackSids.map(d=>d):s.trackSids=[],s},create(a){return ParticipantTracks.fromPartial(a!=null?a:{})},fromPartial(a){var s,d;const c=createBaseParticipantTracks();return c.participantSid=(s=a.participantSid)!==null&&s!==void 0?s:"",c.trackSids=((d=a.trackSids)===null||d===void 0?void 0:d.map(h=>h))||[],c}};function createBaseServerInfo(){return{edition:0,version:"",protocol:0,region:"",nodeId:"",debugInfo:""}}const ServerInfo={encode(a){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_m0.Writer.create();return a.edition!==0&&s.uint32(8).int32(a.edition),a.version!==""&&s.uint32(18).string(a.version),a.protocol!==0&&s.uint32(24).int32(a.protocol),a.region!==""&&s.uint32(34).string(a.region),a.nodeId!==""&&s.uint32(42).string(a.nodeId),a.debugInfo!==""&&s.uint32(50).string(a.debugInfo),s},decode(a,s){const d=a instanceof _m0.Reader?a:new _m0.Reader(a);let c=s===void 0?d.len:d.pos+s;const h=createBaseServerInfo();for(;d.pos<c;){const b=d.uint32();switch(b>>>3){case 1:h.edition=d.int32();break;case 2:h.version=d.string();break;case 3:h.protocol=d.int32();break;case 4:h.region=d.string();break;case 5:h.nodeId=d.string();break;case 6:h.debugInfo=d.string();break;default:d.skipType(b&7);break}}return h},fromJSON(a){return{edition:isSet$1(a.edition)?serverInfo_EditionFromJSON(a.edition):0,version:isSet$1(a.version)?String(a.version):"",protocol:isSet$1(a.protocol)?Number(a.protocol):0,region:isSet$1(a.region)?String(a.region):"",nodeId:isSet$1(a.nodeId)?String(a.nodeId):"",debugInfo:isSet$1(a.debugInfo)?String(a.debugInfo):""}},toJSON(a){const s={};return a.edition!==void 0&&(s.edition=serverInfo_EditionToJSON(a.edition)),a.version!==void 0&&(s.version=a.version),a.protocol!==void 0&&(s.protocol=Math.round(a.protocol)),a.region!==void 0&&(s.region=a.region),a.nodeId!==void 0&&(s.nodeId=a.nodeId),a.debugInfo!==void 0&&(s.debugInfo=a.debugInfo),s},create(a){return ServerInfo.fromPartial(a!=null?a:{})},fromPartial(a){var s,d,c,h,b,_;const $=createBaseServerInfo();return $.edition=(s=a.edition)!==null&&s!==void 0?s:0,$.version=(d=a.version)!==null&&d!==void 0?d:"",$.protocol=(c=a.protocol)!==null&&c!==void 0?c:0,$.region=(h=a.region)!==null&&h!==void 0?h:"",$.nodeId=(b=a.nodeId)!==null&&b!==void 0?b:"",$.debugInfo=(_=a.debugInfo)!==null&&_!==void 0?_:"",$}};function createBaseClientInfo(){return{sdk:0,version:"",protocol:0,os:"",osVersion:"",deviceModel:"",browser:"",browserVersion:"",address:"",network:""}}const ClientInfo={encode(a){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_m0.Writer.create();return a.sdk!==0&&s.uint32(8).int32(a.sdk),a.version!==""&&s.uint32(18).string(a.version),a.protocol!==0&&s.uint32(24).int32(a.protocol),a.os!==""&&s.uint32(34).string(a.os),a.osVersion!==""&&s.uint32(42).string(a.osVersion),a.deviceModel!==""&&s.uint32(50).string(a.deviceModel),a.browser!==""&&s.uint32(58).string(a.browser),a.browserVersion!==""&&s.uint32(66).string(a.browserVersion),a.address!==""&&s.uint32(74).string(a.address),a.network!==""&&s.uint32(82).string(a.network),s},decode(a,s){const d=a instanceof _m0.Reader?a:new _m0.Reader(a);let c=s===void 0?d.len:d.pos+s;const h=createBaseClientInfo();for(;d.pos<c;){const b=d.uint32();switch(b>>>3){case 1:h.sdk=d.int32();break;case 2:h.version=d.string();break;case 3:h.protocol=d.int32();break;case 4:h.os=d.string();break;case 5:h.osVersion=d.string();break;case 6:h.deviceModel=d.string();break;case 7:h.browser=d.string();break;case 8:h.browserVersion=d.string();break;case 9:h.address=d.string();break;case 10:h.network=d.string();break;default:d.skipType(b&7);break}}return h},fromJSON(a){return{sdk:isSet$1(a.sdk)?clientInfo_SDKFromJSON(a.sdk):0,version:isSet$1(a.version)?String(a.version):"",protocol:isSet$1(a.protocol)?Number(a.protocol):0,os:isSet$1(a.os)?String(a.os):"",osVersion:isSet$1(a.osVersion)?String(a.osVersion):"",deviceModel:isSet$1(a.deviceModel)?String(a.deviceModel):"",browser:isSet$1(a.browser)?String(a.browser):"",browserVersion:isSet$1(a.browserVersion)?String(a.browserVersion):"",address:isSet$1(a.address)?String(a.address):"",network:isSet$1(a.network)?String(a.network):""}},toJSON(a){const s={};return a.sdk!==void 0&&(s.sdk=clientInfo_SDKToJSON(a.sdk)),a.version!==void 0&&(s.version=a.version),a.protocol!==void 0&&(s.protocol=Math.round(a.protocol)),a.os!==void 0&&(s.os=a.os),a.osVersion!==void 0&&(s.osVersion=a.osVersion),a.deviceModel!==void 0&&(s.deviceModel=a.deviceModel),a.browser!==void 0&&(s.browser=a.browser),a.browserVersion!==void 0&&(s.browserVersion=a.browserVersion),a.address!==void 0&&(s.address=a.address),a.network!==void 0&&(s.network=a.network),s},create(a){return ClientInfo.fromPartial(a!=null?a:{})},fromPartial(a){var s,d,c,h,b,_,$,_e,tt,rt;const ot=createBaseClientInfo();return ot.sdk=(s=a.sdk)!==null&&s!==void 0?s:0,ot.version=(d=a.version)!==null&&d!==void 0?d:"",ot.protocol=(c=a.protocol)!==null&&c!==void 0?c:0,ot.os=(h=a.os)!==null&&h!==void 0?h:"",ot.osVersion=(b=a.osVersion)!==null&&b!==void 0?b:"",ot.deviceModel=(_=a.deviceModel)!==null&&_!==void 0?_:"",ot.browser=($=a.browser)!==null&&$!==void 0?$:"",ot.browserVersion=(_e=a.browserVersion)!==null&&_e!==void 0?_e:"",ot.address=(tt=a.address)!==null&&tt!==void 0?tt:"",ot.network=(rt=a.network)!==null&&rt!==void 0?rt:"",ot}};function createBaseClientConfiguration(){return{video:void 0,screen:void 0,resumeConnection:0,disabledCodecs:void 0,forceRelay:0}}const ClientConfiguration={encode(a){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_m0.Writer.create();return a.video!==void 0&&VideoConfiguration.encode(a.video,s.uint32(10).fork()).ldelim(),a.screen!==void 0&&VideoConfiguration.encode(a.screen,s.uint32(18).fork()).ldelim(),a.resumeConnection!==0&&s.uint32(24).int32(a.resumeConnection),a.disabledCodecs!==void 0&&DisabledCodecs.encode(a.disabledCodecs,s.uint32(34).fork()).ldelim(),a.forceRelay!==0&&s.uint32(40).int32(a.forceRelay),s},decode(a,s){const d=a instanceof _m0.Reader?a:new _m0.Reader(a);let c=s===void 0?d.len:d.pos+s;const h=createBaseClientConfiguration();for(;d.pos<c;){const b=d.uint32();switch(b>>>3){case 1:h.video=VideoConfiguration.decode(d,d.uint32());break;case 2:h.screen=VideoConfiguration.decode(d,d.uint32());break;case 3:h.resumeConnection=d.int32();break;case 4:h.disabledCodecs=DisabledCodecs.decode(d,d.uint32());break;case 5:h.forceRelay=d.int32();break;default:d.skipType(b&7);break}}return h},fromJSON(a){return{video:isSet$1(a.video)?VideoConfiguration.fromJSON(a.video):void 0,screen:isSet$1(a.screen)?VideoConfiguration.fromJSON(a.screen):void 0,resumeConnection:isSet$1(a.resumeConnection)?clientConfigSettingFromJSON(a.resumeConnection):0,disabledCodecs:isSet$1(a.disabledCodecs)?DisabledCodecs.fromJSON(a.disabledCodecs):void 0,forceRelay:isSet$1(a.forceRelay)?clientConfigSettingFromJSON(a.forceRelay):0}},toJSON(a){const s={};return a.video!==void 0&&(s.video=a.video?VideoConfiguration.toJSON(a.video):void 0),a.screen!==void 0&&(s.screen=a.screen?VideoConfiguration.toJSON(a.screen):void 0),a.resumeConnection!==void 0&&(s.resumeConnection=clientConfigSettingToJSON(a.resumeConnection)),a.disabledCodecs!==void 0&&(s.disabledCodecs=a.disabledCodecs?DisabledCodecs.toJSON(a.disabledCodecs):void 0),a.forceRelay!==void 0&&(s.forceRelay=clientConfigSettingToJSON(a.forceRelay)),s},create(a){return ClientConfiguration.fromPartial(a!=null?a:{})},fromPartial(a){var s,d;const c=createBaseClientConfiguration();return c.video=a.video!==void 0&&a.video!==null?VideoConfiguration.fromPartial(a.video):void 0,c.screen=a.screen!==void 0&&a.screen!==null?VideoConfiguration.fromPartial(a.screen):void 0,c.resumeConnection=(s=a.resumeConnection)!==null&&s!==void 0?s:0,c.disabledCodecs=a.disabledCodecs!==void 0&&a.disabledCodecs!==null?DisabledCodecs.fromPartial(a.disabledCodecs):void 0,c.forceRelay=(d=a.forceRelay)!==null&&d!==void 0?d:0,c}};function createBaseVideoConfiguration(){return{hardwareEncoder:0}}const VideoConfiguration={encode(a){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_m0.Writer.create();return a.hardwareEncoder!==0&&s.uint32(8).int32(a.hardwareEncoder),s},decode(a,s){const d=a instanceof _m0.Reader?a:new _m0.Reader(a);let c=s===void 0?d.len:d.pos+s;const h=createBaseVideoConfiguration();for(;d.pos<c;){const b=d.uint32();switch(b>>>3){case 1:h.hardwareEncoder=d.int32();break;default:d.skipType(b&7);break}}return h},fromJSON(a){return{hardwareEncoder:isSet$1(a.hardwareEncoder)?clientConfigSettingFromJSON(a.hardwareEncoder):0}},toJSON(a){const s={};return a.hardwareEncoder!==void 0&&(s.hardwareEncoder=clientConfigSettingToJSON(a.hardwareEncoder)),s},create(a){return VideoConfiguration.fromPartial(a!=null?a:{})},fromPartial(a){var s;const d=createBaseVideoConfiguration();return d.hardwareEncoder=(s=a.hardwareEncoder)!==null&&s!==void 0?s:0,d}};function createBaseDisabledCodecs(){return{codecs:[]}}const DisabledCodecs={encode(a){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_m0.Writer.create();for(const d of a.codecs)Codec.encode(d,s.uint32(10).fork()).ldelim();return s},decode(a,s){const d=a instanceof _m0.Reader?a:new _m0.Reader(a);let c=s===void 0?d.len:d.pos+s;const h=createBaseDisabledCodecs();for(;d.pos<c;){const b=d.uint32();switch(b>>>3){case 1:h.codecs.push(Codec.decode(d,d.uint32()));break;default:d.skipType(b&7);break}}return h},fromJSON(a){return{codecs:Array.isArray(a==null?void 0:a.codecs)?a.codecs.map(s=>Codec.fromJSON(s)):[]}},toJSON(a){const s={};return a.codecs?s.codecs=a.codecs.map(d=>d?Codec.toJSON(d):void 0):s.codecs=[],s},create(a){return DisabledCodecs.fromPartial(a!=null?a:{})},fromPartial(a){var s;const d=createBaseDisabledCodecs();return d.codecs=((s=a.codecs)===null||s===void 0?void 0:s.map(c=>Codec.fromPartial(c)))||[],d}};var tsProtoGlobalThis$1=(()=>{if(typeof globalThis!="undefined")return globalThis;if(typeof self!="undefined")return self;if(typeof window!="undefined")return window;if(typeof global!="undefined")return global;throw"Unable to locate global object"})();function bytesFromBase64(a){if(tsProtoGlobalThis$1.Buffer)return Uint8Array.from(tsProtoGlobalThis$1.Buffer.from(a,"base64"));{const s=tsProtoGlobalThis$1.atob(a),d=new Uint8Array(s.length);for(let c=0;c<s.length;++c)d[c]=s.charCodeAt(c);return d}}function base64FromBytes(a){if(tsProtoGlobalThis$1.Buffer)return tsProtoGlobalThis$1.Buffer.from(a).toString("base64");{const s=[];return a.forEach(d=>{s.push(String.fromCharCode(d))}),tsProtoGlobalThis$1.btoa(s.join(""))}}function longToNumber$1(a){if(a.gt(Number.MAX_SAFE_INTEGER))throw new tsProtoGlobalThis$1.Error("Value is larger than Number.MAX_SAFE_INTEGER");return a.toNumber()}_m0.util.Long!==long&&(_m0.util.Long=long,_m0.configure());function isSet$1(a){return a!=null}const maxRetryDelay=7e3,DEFAULT_RETRY_DELAYS_IN_MS=[0,300,2*2*300,3*3*300,4*4*300,maxRetryDelay,maxRetryDelay,maxRetryDelay,maxRetryDelay,maxRetryDelay];class DefaultReconnectPolicy{constructor(s){this._retryDelays=s!==void 0?[...s]:DEFAULT_RETRY_DELAYS_IN_MS}nextRetryDelayInMs(s){if(s.retryCount>=this._retryDelays.length)return null;const d=this._retryDelays[s.retryCount];return s.retryCount<=1?d:d+Math.random()*1e3}}function _asyncIterator(a){var s,d,c,h=2;for(typeof Symbol!="undefined"&&(d=Symbol.asyncIterator,c=Symbol.iterator);h--;){if(d&&(s=a[d])!=null)return s.call(a);if(c&&(s=a[c])!=null)return new AsyncFromSyncIterator(s.call(a));d="@@asyncIterator",c="@@iterator"}throw new TypeError("Object is not async iterable")}function AsyncFromSyncIterator(a){function s(d){if(Object(d)!==d)return Promise.reject(new TypeError(d+" is not an object."));var c=d.done;return Promise.resolve(d.value).then(function(h){return{value:h,done:c}})}return AsyncFromSyncIterator=function(d){this.s=d,this.n=d.next},AsyncFromSyncIterator.prototype={s:null,n:null,next:function(){return s(this.n.apply(this.s,arguments))},return:function(d){var c=this.s.return;return c===void 0?Promise.resolve({value:d,done:!0}):s(c.apply(this.s,arguments))},throw:function(d){var c=this.s.return;return c===void 0?Promise.reject(d):s(c.apply(this.s,arguments))}},new AsyncFromSyncIterator(a)}function ownKeys(a,s){var d=Object.keys(a);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(a);s&&(c=c.filter(function(h){return Object.getOwnPropertyDescriptor(a,h).enumerable})),d.push.apply(d,c)}return d}function _objectSpread2(a){for(var s=1;s<arguments.length;s++){var d=arguments[s]!=null?arguments[s]:{};s%2?ownKeys(Object(d),!0).forEach(function(c){_defineProperty(a,c,d[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(d)):ownKeys(Object(d)).forEach(function(c){Object.defineProperty(a,c,Object.getOwnPropertyDescriptor(d,c))})}return a}function _defineProperty(a,s,d){return s=_toPropertyKey(s),s in a?Object.defineProperty(a,s,{value:d,enumerable:!0,configurable:!0,writable:!0}):a[s]=d,a}function _toPrimitive(a,s){if(typeof a!="object"||a===null)return a;var d=a[Symbol.toPrimitive];if(d!==void 0){var c=d.call(a,s||"default");if(typeof c!="object")return c;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(a)}function _toPropertyKey(a){var s=_toPrimitive(a,"string");return typeof s=="symbol"?s:String(s)}let logDisabled_=!0,deprecationWarnings_=!0;function extractVersion(a,s,d){const c=a.match(s);return c&&c.length>=d&&parseInt(c[d],10)}function wrapPeerConnectionEvent(a,s,d){if(!a.RTCPeerConnection)return;const c=a.RTCPeerConnection.prototype,h=c.addEventListener;c.addEventListener=function(_,$){if(_!==s)return h.apply(this,arguments);const _e=tt=>{const rt=d(tt);rt&&($.handleEvent?$.handleEvent(rt):$(rt))};return this._eventMap=this._eventMap||{},this._eventMap[s]||(this._eventMap[s]=new Map),this._eventMap[s].set($,_e),h.apply(this,[_,_e])};const b=c.removeEventListener;c.removeEventListener=function(_,$){if(_!==s||!this._eventMap||!this._eventMap[s])return b.apply(this,arguments);if(!this._eventMap[s].has($))return b.apply(this,arguments);const _e=this._eventMap[s].get($);return this._eventMap[s].delete($),this._eventMap[s].size===0&&delete this._eventMap[s],Object.keys(this._eventMap).length===0&&delete this._eventMap,b.apply(this,[_,_e])},Object.defineProperty(c,"on"+s,{get(){return this["_on"+s]},set(_){this["_on"+s]&&(this.removeEventListener(s,this["_on"+s]),delete this["_on"+s]),_&&this.addEventListener(s,this["_on"+s]=_)},enumerable:!0,configurable:!0})}function disableLog(a){return typeof a!="boolean"?new Error("Argument type: "+typeof a+". Please use a boolean."):(logDisabled_=a,a?"adapter.js logging disabled":"adapter.js logging enabled")}function disableWarnings(a){return typeof a!="boolean"?new Error("Argument type: "+typeof a+". Please use a boolean."):(deprecationWarnings_=!a,"adapter.js deprecation warnings "+(a?"disabled":"enabled"))}function log(){if(typeof window=="object"){if(logDisabled_)return;typeof console!="undefined"&&typeof console.log=="function"&&console.log.apply(console,arguments)}}function deprecated(a,s){!deprecationWarnings_||console.warn(a+" is deprecated, please use "+s+" instead.")}function detectBrowser(a){const s={browser:null,version:null};if(typeof a=="undefined"||!a.navigator)return s.browser="Not a browser.",s;const{navigator:d}=a;if(d.mozGetUserMedia)s.browser="firefox",s.version=extractVersion(d.userAgent,/Firefox\/(\d+)\./,1);else if(d.webkitGetUserMedia||a.isSecureContext===!1&&a.webkitRTCPeerConnection&&!a.RTCIceGatherer)s.browser="chrome",s.version=extractVersion(d.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else if(a.RTCPeerConnection&&d.userAgent.match(/AppleWebKit\/(\d+)\./))s.browser="safari",s.version=extractVersion(d.userAgent,/AppleWebKit\/(\d+)\./,1),s.supportsUnifiedPlan=a.RTCRtpTransceiver&&"currentDirection"in a.RTCRtpTransceiver.prototype;else return s.browser="Not a supported browser.",s;return s}function isObject(a){return Object.prototype.toString.call(a)==="[object Object]"}function compactObject(a){return isObject(a)?Object.keys(a).reduce(function(s,d){const c=isObject(a[d]),h=c?compactObject(a[d]):a[d],b=c&&!Object.keys(h).length;return h===void 0||b?s:Object.assign(s,{[d]:h})},{}):a}function walkStats(a,s,d){!s||d.has(s.id)||(d.set(s.id,s),Object.keys(s).forEach(c=>{c.endsWith("Id")?walkStats(a,a.get(s[c]),d):c.endsWith("Ids")&&s[c].forEach(h=>{walkStats(a,a.get(h),d)})}))}function filterStats(a,s,d){const c=d?"outbound-rtp":"inbound-rtp",h=new Map;if(s===null)return h;const b=[];return a.forEach(_=>{_.type==="track"&&_.trackIdentifier===s.id&&b.push(_)}),b.forEach(_=>{a.forEach($=>{$.type===c&&$.trackId===_.id&&walkStats(a,$,h)})}),h}const logging=log;function shimGetUserMedia$2(a,s){const d=a&&a.navigator;if(!d.mediaDevices)return;const c=function($){if(typeof $!="object"||$.mandatory||$.optional)return $;const _e={};return Object.keys($).forEach(tt=>{if(tt==="require"||tt==="advanced"||tt==="mediaSource")return;const rt=typeof $[tt]=="object"?$[tt]:{ideal:$[tt]};rt.exact!==void 0&&typeof rt.exact=="number"&&(rt.min=rt.max=rt.exact);const ot=function(it,st){return it?it+st.charAt(0).toUpperCase()+st.slice(1):st==="deviceId"?"sourceId":st};if(rt.ideal!==void 0){_e.optional=_e.optional||[];let it={};typeof rt.ideal=="number"?(it[ot("min",tt)]=rt.ideal,_e.optional.push(it),it={},it[ot("max",tt)]=rt.ideal,_e.optional.push(it)):(it[ot("",tt)]=rt.ideal,_e.optional.push(it))}rt.exact!==void 0&&typeof rt.exact!="number"?(_e.mandatory=_e.mandatory||{},_e.mandatory[ot("",tt)]=rt.exact):["min","max"].forEach(it=>{rt[it]!==void 0&&(_e.mandatory=_e.mandatory||{},_e.mandatory[ot(it,tt)]=rt[it])})}),$.advanced&&(_e.optional=(_e.optional||[]).concat($.advanced)),_e},h=function($,_e){if(s.version>=61)return _e($);if($=JSON.parse(JSON.stringify($)),$&&typeof $.audio=="object"){const tt=function(rt,ot,it){ot in rt&&!(it in rt)&&(rt[it]=rt[ot],delete rt[ot])};$=JSON.parse(JSON.stringify($)),tt($.audio,"autoGainControl","googAutoGainControl"),tt($.audio,"noiseSuppression","googNoiseSuppression"),$.audio=c($.audio)}if($&&typeof $.video=="object"){let tt=$.video.facingMode;tt=tt&&(typeof tt=="object"?tt:{ideal:tt});const rt=s.version<66;if(tt&&(tt.exact==="user"||tt.exact==="environment"||tt.ideal==="user"||tt.ideal==="environment")&&!(d.mediaDevices.getSupportedConstraints&&d.mediaDevices.getSupportedConstraints().facingMode&&!rt)){delete $.video.facingMode;let ot;if(tt.exact==="environment"||tt.ideal==="environment"?ot=["back","rear"]:(tt.exact==="user"||tt.ideal==="user")&&(ot=["front"]),ot)return d.mediaDevices.enumerateDevices().then(it=>{it=it.filter(lt=>lt.kind==="videoinput");let st=it.find(lt=>ot.some(dt=>lt.label.toLowerCase().includes(dt)));return!st&&it.length&&ot.includes("back")&&(st=it[it.length-1]),st&&($.video.deviceId=tt.exact?{exact:st.deviceId}:{ideal:st.deviceId}),$.video=c($.video),logging("chrome: "+JSON.stringify($)),_e($)})}$.video=c($.video)}return logging("chrome: "+JSON.stringify($)),_e($)},b=function($){return s.version>=64?$:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[$.name]||$.name,message:$.message,constraint:$.constraint||$.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}},_=function($,_e,tt){h($,rt=>{d.webkitGetUserMedia(rt,_e,ot=>{tt&&tt(b(ot))})})};if(d.getUserMedia=_.bind(d),d.mediaDevices.getUserMedia){const $=d.mediaDevices.getUserMedia.bind(d.mediaDevices);d.mediaDevices.getUserMedia=function(_e){return h(_e,tt=>$(tt).then(rt=>{if(tt.audio&&!rt.getAudioTracks().length||tt.video&&!rt.getVideoTracks().length)throw rt.getTracks().forEach(ot=>{ot.stop()}),new DOMException("","NotFoundError");return rt},rt=>Promise.reject(b(rt))))}}}function shimGetDisplayMedia$1(a,s){if(!(a.navigator.mediaDevices&&"getDisplayMedia"in a.navigator.mediaDevices)&&!!a.navigator.mediaDevices){if(typeof s!="function"){console.error("shimGetDisplayMedia: getSourceId argument is not a function");return}a.navigator.mediaDevices.getDisplayMedia=function(c){return s(c).then(h=>{const b=c.video&&c.video.width,_=c.video&&c.video.height,$=c.video&&c.video.frameRate;return c.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:h,maxFrameRate:$||3}},b&&(c.video.mandatory.maxWidth=b),_&&(c.video.mandatory.maxHeight=_),a.navigator.mediaDevices.getUserMedia(c)})}}}function shimMediaStream(a){a.MediaStream=a.MediaStream||a.webkitMediaStream}function shimOnTrack$1(a){if(typeof a=="object"&&a.RTCPeerConnection&&!("ontrack"in a.RTCPeerConnection.prototype)){Object.defineProperty(a.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(d){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=d)},enumerable:!0,configurable:!0});const s=a.RTCPeerConnection.prototype.setRemoteDescription;a.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=c=>{c.stream.addEventListener("addtrack",h=>{let b;a.RTCPeerConnection.prototype.getReceivers?b=this.getReceivers().find($=>$.track&&$.track.id===h.track.id):b={track:h.track};const _=new Event("track");_.track=h.track,_.receiver=b,_.transceiver={receiver:b},_.streams=[c.stream],this.dispatchEvent(_)}),c.stream.getTracks().forEach(h=>{let b;a.RTCPeerConnection.prototype.getReceivers?b=this.getReceivers().find($=>$.track&&$.track.id===h.id):b={track:h};const _=new Event("track");_.track=h,_.receiver=b,_.transceiver={receiver:b},_.streams=[c.stream],this.dispatchEvent(_)})},this.addEventListener("addstream",this._ontrackpoly)),s.apply(this,arguments)}}else wrapPeerConnectionEvent(a,"track",s=>(s.transceiver||Object.defineProperty(s,"transceiver",{value:{receiver:s.receiver}}),s))}function shimGetSendersWithDtmf(a){if(typeof a=="object"&&a.RTCPeerConnection&&!("getSenders"in a.RTCPeerConnection.prototype)&&"createDTMFSender"in a.RTCPeerConnection.prototype){const s=function(h,b){return{track:b,get dtmf(){return this._dtmf===void 0&&(b.kind==="audio"?this._dtmf=h.createDTMFSender(b):this._dtmf=null),this._dtmf},_pc:h}};if(!a.RTCPeerConnection.prototype.getSenders){a.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const h=a.RTCPeerConnection.prototype.addTrack;a.RTCPeerConnection.prototype.addTrack=function($,_e){let tt=h.apply(this,arguments);return tt||(tt=s(this,$),this._senders.push(tt)),tt};const b=a.RTCPeerConnection.prototype.removeTrack;a.RTCPeerConnection.prototype.removeTrack=function($){b.apply(this,arguments);const _e=this._senders.indexOf($);_e!==-1&&this._senders.splice(_e,1)}}const d=a.RTCPeerConnection.prototype.addStream;a.RTCPeerConnection.prototype.addStream=function(b){this._senders=this._senders||[],d.apply(this,[b]),b.getTracks().forEach(_=>{this._senders.push(s(this,_))})};const c=a.RTCPeerConnection.prototype.removeStream;a.RTCPeerConnection.prototype.removeStream=function(b){this._senders=this._senders||[],c.apply(this,[b]),b.getTracks().forEach(_=>{const $=this._senders.find(_e=>_e.track===_);$&&this._senders.splice(this._senders.indexOf($),1)})}}else if(typeof a=="object"&&a.RTCPeerConnection&&"getSenders"in a.RTCPeerConnection.prototype&&"createDTMFSender"in a.RTCPeerConnection.prototype&&a.RTCRtpSender&&!("dtmf"in a.RTCRtpSender.prototype)){const s=a.RTCPeerConnection.prototype.getSenders;a.RTCPeerConnection.prototype.getSenders=function(){const c=s.apply(this,[]);return c.forEach(h=>h._pc=this),c},Object.defineProperty(a.RTCRtpSender.prototype,"dtmf",{get(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function shimGetStats(a){if(!a.RTCPeerConnection)return;const s=a.RTCPeerConnection.prototype.getStats;a.RTCPeerConnection.prototype.getStats=function(){const[c,h,b]=arguments;if(arguments.length>0&&typeof c=="function")return s.apply(this,arguments);if(s.length===0&&(arguments.length===0||typeof c!="function"))return s.apply(this,[]);const _=function(_e){const tt={};return _e.result().forEach(ot=>{const it={id:ot.id,timestamp:ot.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[ot.type]||ot.type};ot.names().forEach(st=>{it[st]=ot.stat(st)}),tt[it.id]=it}),tt},$=function(_e){return new Map(Object.keys(_e).map(tt=>[tt,_e[tt]]))};if(arguments.length>=2){const _e=function(tt){h($(_(tt)))};return s.apply(this,[_e,c])}return new Promise((_e,tt)=>{s.apply(this,[function(rt){_e($(_(rt)))},tt])}).then(h,b)}}function shimSenderReceiverGetStats(a){if(!(typeof a=="object"&&a.RTCPeerConnection&&a.RTCRtpSender&&a.RTCRtpReceiver))return;if(!("getStats"in a.RTCRtpSender.prototype)){const d=a.RTCPeerConnection.prototype.getSenders;d&&(a.RTCPeerConnection.prototype.getSenders=function(){const b=d.apply(this,[]);return b.forEach(_=>_._pc=this),b});const c=a.RTCPeerConnection.prototype.addTrack;c&&(a.RTCPeerConnection.prototype.addTrack=function(){const b=c.apply(this,arguments);return b._pc=this,b}),a.RTCRtpSender.prototype.getStats=function(){const b=this;return this._pc.getStats().then(_=>filterStats(_,b.track,!0))}}if(!("getStats"in a.RTCRtpReceiver.prototype)){const d=a.RTCPeerConnection.prototype.getReceivers;d&&(a.RTCPeerConnection.prototype.getReceivers=function(){const h=d.apply(this,[]);return h.forEach(b=>b._pc=this),h}),wrapPeerConnectionEvent(a,"track",c=>(c.receiver._pc=c.srcElement,c)),a.RTCRtpReceiver.prototype.getStats=function(){const h=this;return this._pc.getStats().then(b=>filterStats(b,h.track,!1))}}if(!("getStats"in a.RTCRtpSender.prototype&&"getStats"in a.RTCRtpReceiver.prototype))return;const s=a.RTCPeerConnection.prototype.getStats;a.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof a.MediaStreamTrack){const c=arguments[0];let h,b,_;return this.getSenders().forEach($=>{$.track===c&&(h?_=!0:h=$)}),this.getReceivers().forEach($=>($.track===c&&(b?_=!0:b=$),$.track===c)),_||h&&b?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):h?h.getStats():b?b.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return s.apply(this,arguments)}}function shimAddTrackRemoveTrackWithNative(a){a.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(_=>this._shimmedLocalStreams[_][0])};const s=a.RTCPeerConnection.prototype.addTrack;a.RTCPeerConnection.prototype.addTrack=function(_,$){if(!$)return s.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const _e=s.apply(this,arguments);return this._shimmedLocalStreams[$.id]?this._shimmedLocalStreams[$.id].indexOf(_e)===-1&&this._shimmedLocalStreams[$.id].push(_e):this._shimmedLocalStreams[$.id]=[$,_e],_e};const d=a.RTCPeerConnection.prototype.addStream;a.RTCPeerConnection.prototype.addStream=function(_){this._shimmedLocalStreams=this._shimmedLocalStreams||{},_.getTracks().forEach(tt=>{if(this.getSenders().find(ot=>ot.track===tt))throw new DOMException("Track already exists.","InvalidAccessError")});const $=this.getSenders();d.apply(this,arguments);const _e=this.getSenders().filter(tt=>$.indexOf(tt)===-1);this._shimmedLocalStreams[_.id]=[_].concat(_e)};const c=a.RTCPeerConnection.prototype.removeStream;a.RTCPeerConnection.prototype.removeStream=function(_){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[_.id],c.apply(this,arguments)};const h=a.RTCPeerConnection.prototype.removeTrack;a.RTCPeerConnection.prototype.removeTrack=function(_){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},_&&Object.keys(this._shimmedLocalStreams).forEach($=>{const _e=this._shimmedLocalStreams[$].indexOf(_);_e!==-1&&this._shimmedLocalStreams[$].splice(_e,1),this._shimmedLocalStreams[$].length===1&&delete this._shimmedLocalStreams[$]}),h.apply(this,arguments)}}function shimAddTrackRemoveTrack(a,s){if(!a.RTCPeerConnection)return;if(a.RTCPeerConnection.prototype.addTrack&&s.version>=65)return shimAddTrackRemoveTrackWithNative(a);const d=a.RTCPeerConnection.prototype.getLocalStreams;a.RTCPeerConnection.prototype.getLocalStreams=function(){const rt=d.apply(this);return this._reverseStreams=this._reverseStreams||{},rt.map(ot=>this._reverseStreams[ot.id])};const c=a.RTCPeerConnection.prototype.addStream;a.RTCPeerConnection.prototype.addStream=function(rt){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},rt.getTracks().forEach(ot=>{if(this.getSenders().find(st=>st.track===ot))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[rt.id]){const ot=new a.MediaStream(rt.getTracks());this._streams[rt.id]=ot,this._reverseStreams[ot.id]=rt,rt=ot}c.apply(this,[rt])};const h=a.RTCPeerConnection.prototype.removeStream;a.RTCPeerConnection.prototype.removeStream=function(rt){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},h.apply(this,[this._streams[rt.id]||rt]),delete this._reverseStreams[this._streams[rt.id]?this._streams[rt.id].id:rt.id],delete this._streams[rt.id]},a.RTCPeerConnection.prototype.addTrack=function(rt,ot){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const it=[].slice.call(arguments,1);if(it.length!==1||!it[0].getTracks().find(dt=>dt===rt))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(dt=>dt.track===rt))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const lt=this._streams[ot.id];if(lt)lt.addTrack(rt),Promise.resolve().then(()=>{this.dispatchEvent(new Event("negotiationneeded"))});else{const dt=new a.MediaStream([rt]);this._streams[ot.id]=dt,this._reverseStreams[dt.id]=ot,this.addStream(dt)}return this.getSenders().find(dt=>dt.track===rt)};function b(tt,rt){let ot=rt.sdp;return Object.keys(tt._reverseStreams||[]).forEach(it=>{const st=tt._reverseStreams[it],lt=tt._streams[st.id];ot=ot.replace(new RegExp(lt.id,"g"),st.id)}),new RTCSessionDescription({type:rt.type,sdp:ot})}function _(tt,rt){let ot=rt.sdp;return Object.keys(tt._reverseStreams||[]).forEach(it=>{const st=tt._reverseStreams[it],lt=tt._streams[st.id];ot=ot.replace(new RegExp(st.id,"g"),lt.id)}),new RTCSessionDescription({type:rt.type,sdp:ot})}["createOffer","createAnswer"].forEach(function(tt){const rt=a.RTCPeerConnection.prototype[tt],ot={[tt](){const it=arguments;return arguments.length&&typeof arguments[0]=="function"?rt.apply(this,[lt=>{const dt=b(this,lt);it[0].apply(null,[dt])},lt=>{it[1]&&it[1].apply(null,lt)},arguments[2]]):rt.apply(this,arguments).then(lt=>b(this,lt))}};a.RTCPeerConnection.prototype[tt]=ot[tt]});const $=a.RTCPeerConnection.prototype.setLocalDescription;a.RTCPeerConnection.prototype.setLocalDescription=function(){return!arguments.length||!arguments[0].type?$.apply(this,arguments):(arguments[0]=_(this,arguments[0]),$.apply(this,arguments))};const _e=Object.getOwnPropertyDescriptor(a.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(a.RTCPeerConnection.prototype,"localDescription",{get(){const tt=_e.get.apply(this);return tt.type===""?tt:b(this,tt)}}),a.RTCPeerConnection.prototype.removeTrack=function(rt){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!rt._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(!(rt._pc===this))throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{};let it;Object.keys(this._streams).forEach(st=>{this._streams[st].getTracks().find(dt=>rt.track===dt)&&(it=this._streams[st])}),it&&(it.getTracks().length===1?this.removeStream(this._reverseStreams[it.id]):it.removeTrack(rt.track),this.dispatchEvent(new Event("negotiationneeded")))}}function shimPeerConnection$1(a,s){!a.RTCPeerConnection&&a.webkitRTCPeerConnection&&(a.RTCPeerConnection=a.webkitRTCPeerConnection),!!a.RTCPeerConnection&&s.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(d){const c=a.RTCPeerConnection.prototype[d],h={[d](){return arguments[0]=new(d==="addIceCandidate"?a.RTCIceCandidate:a.RTCSessionDescription)(arguments[0]),c.apply(this,arguments)}};a.RTCPeerConnection.prototype[d]=h[d]})}function fixNegotiationNeeded(a,s){wrapPeerConnectionEvent(a,"negotiationneeded",d=>{const c=d.target;if(!((s.version<72||c.getConfiguration&&c.getConfiguration().sdpSemantics==="plan-b")&&c.signalingState!=="stable"))return d})}var chromeShim=Object.freeze({__proto__:null,fixNegotiationNeeded,shimAddTrackRemoveTrack,shimAddTrackRemoveTrackWithNative,shimGetDisplayMedia:shimGetDisplayMedia$1,shimGetSendersWithDtmf,shimGetStats,shimGetUserMedia:shimGetUserMedia$2,shimMediaStream,shimOnTrack:shimOnTrack$1,shimPeerConnection:shimPeerConnection$1,shimSenderReceiverGetStats});function shimGetUserMedia$1(a,s){const d=a&&a.navigator,c=a&&a.MediaStreamTrack;if(d.getUserMedia=function(h,b,_){deprecated("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),d.mediaDevices.getUserMedia(h).then(b,_)},!(s.version>55&&"autoGainControl"in d.mediaDevices.getSupportedConstraints())){const h=function(_,$,_e){$ in _&&!(_e in _)&&(_[_e]=_[$],delete _[$])},b=d.mediaDevices.getUserMedia.bind(d.mediaDevices);if(d.mediaDevices.getUserMedia=function(_){return typeof _=="object"&&typeof _.audio=="object"&&(_=JSON.parse(JSON.stringify(_)),h(_.audio,"autoGainControl","mozAutoGainControl"),h(_.audio,"noiseSuppression","mozNoiseSuppression")),b(_)},c&&c.prototype.getSettings){const _=c.prototype.getSettings;c.prototype.getSettings=function(){const $=_.apply(this,arguments);return h($,"mozAutoGainControl","autoGainControl"),h($,"mozNoiseSuppression","noiseSuppression"),$}}if(c&&c.prototype.applyConstraints){const _=c.prototype.applyConstraints;c.prototype.applyConstraints=function($){return this.kind==="audio"&&typeof $=="object"&&($=JSON.parse(JSON.stringify($)),h($,"autoGainControl","mozAutoGainControl"),h($,"noiseSuppression","mozNoiseSuppression")),_.apply(this,[$])}}}}function shimGetDisplayMedia(a,s){a.navigator.mediaDevices&&"getDisplayMedia"in a.navigator.mediaDevices||!a.navigator.mediaDevices||(a.navigator.mediaDevices.getDisplayMedia=function(c){if(!(c&&c.video)){const h=new DOMException("getDisplayMedia without video constraints is undefined");return h.name="NotFoundError",h.code=8,Promise.reject(h)}return c.video===!0?c.video={mediaSource:s}:c.video.mediaSource=s,a.navigator.mediaDevices.getUserMedia(c)})}function shimOnTrack(a){typeof a=="object"&&a.RTCTrackEvent&&"receiver"in a.RTCTrackEvent.prototype&&!("transceiver"in a.RTCTrackEvent.prototype)&&Object.defineProperty(a.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function shimPeerConnection(a,s){if(typeof a!="object"||!(a.RTCPeerConnection||a.mozRTCPeerConnection))return;!a.RTCPeerConnection&&a.mozRTCPeerConnection&&(a.RTCPeerConnection=a.mozRTCPeerConnection),s.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(h){const b=a.RTCPeerConnection.prototype[h],_={[h](){return arguments[0]=new(h==="addIceCandidate"?a.RTCIceCandidate:a.RTCSessionDescription)(arguments[0]),b.apply(this,arguments)}};a.RTCPeerConnection.prototype[h]=_[h]});const d={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},c=a.RTCPeerConnection.prototype.getStats;a.RTCPeerConnection.prototype.getStats=function(){const[b,_,$]=arguments;return c.apply(this,[b||null]).then(_e=>{if(s.version<53&&!_)try{_e.forEach(tt=>{tt.type=d[tt.type]||tt.type})}catch(tt){if(tt.name!=="TypeError")throw tt;_e.forEach((rt,ot)=>{_e.set(ot,Object.assign({},rt,{type:d[rt.type]||rt.type}))})}return _e}).then(_,$)}}function shimSenderGetStats(a){if(!(typeof a=="object"&&a.RTCPeerConnection&&a.RTCRtpSender)||a.RTCRtpSender&&"getStats"in a.RTCRtpSender.prototype)return;const s=a.RTCPeerConnection.prototype.getSenders;s&&(a.RTCPeerConnection.prototype.getSenders=function(){const h=s.apply(this,[]);return h.forEach(b=>b._pc=this),h});const d=a.RTCPeerConnection.prototype.addTrack;d&&(a.RTCPeerConnection.prototype.addTrack=function(){const h=d.apply(this,arguments);return h._pc=this,h}),a.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function shimReceiverGetStats(a){if(!(typeof a=="object"&&a.RTCPeerConnection&&a.RTCRtpSender)||a.RTCRtpSender&&"getStats"in a.RTCRtpReceiver.prototype)return;const s=a.RTCPeerConnection.prototype.getReceivers;s&&(a.RTCPeerConnection.prototype.getReceivers=function(){const c=s.apply(this,[]);return c.forEach(h=>h._pc=this),c}),wrapPeerConnectionEvent(a,"track",d=>(d.receiver._pc=d.srcElement,d)),a.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function shimRemoveStream(a){!a.RTCPeerConnection||"removeStream"in a.RTCPeerConnection.prototype||(a.RTCPeerConnection.prototype.removeStream=function(d){deprecated("removeStream","removeTrack"),this.getSenders().forEach(c=>{c.track&&d.getTracks().includes(c.track)&&this.removeTrack(c)})})}function shimRTCDataChannel(a){a.DataChannel&&!a.RTCDataChannel&&(a.RTCDataChannel=a.DataChannel)}function shimAddTransceiver(a){if(!(typeof a=="object"&&a.RTCPeerConnection))return;const s=a.RTCPeerConnection.prototype.addTransceiver;s&&(a.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];const c=arguments[1],h=c&&"sendEncodings"in c;h&&c.sendEncodings.forEach(_=>{if("rid"in _&&!/^[a-z0-9]{0,16}$/i.test(_.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in _&&!(parseFloat(_.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in _&&!(parseFloat(_.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});const b=s.apply(this,arguments);if(h){const{sender:_}=b,$=_.getParameters();(!("encodings"in $)||$.encodings.length===1&&Object.keys($.encodings[0]).length===0)&&($.encodings=c.sendEncodings,_.sendEncodings=c.sendEncodings,this.setParametersPromises.push(_.setParameters($).then(()=>{delete _.sendEncodings}).catch(()=>{delete _.sendEncodings})))}return b})}function shimGetParameters(a){if(!(typeof a=="object"&&a.RTCRtpSender))return;const s=a.RTCRtpSender.prototype.getParameters;s&&(a.RTCRtpSender.prototype.getParameters=function(){const c=s.apply(this,arguments);return"encodings"in c||(c.encodings=[].concat(this.sendEncodings||[{}])),c})}function shimCreateOffer(a){if(!(typeof a=="object"&&a.RTCPeerConnection))return;const s=a.RTCPeerConnection.prototype.createOffer;a.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>s.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):s.apply(this,arguments)}}function shimCreateAnswer(a){if(!(typeof a=="object"&&a.RTCPeerConnection))return;const s=a.RTCPeerConnection.prototype.createAnswer;a.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>s.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):s.apply(this,arguments)}}var firefoxShim=Object.freeze({__proto__:null,shimAddTransceiver,shimCreateAnswer,shimCreateOffer,shimGetDisplayMedia,shimGetParameters,shimGetUserMedia:shimGetUserMedia$1,shimOnTrack,shimPeerConnection,shimRTCDataChannel,shimReceiverGetStats,shimRemoveStream,shimSenderGetStats});function shimLocalStreamsAPI(a){if(!(typeof a!="object"||!a.RTCPeerConnection)){if("getLocalStreams"in a.RTCPeerConnection.prototype||(a.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in a.RTCPeerConnection.prototype)){const s=a.RTCPeerConnection.prototype.addTrack;a.RTCPeerConnection.prototype.addStream=function(c){this._localStreams||(this._localStreams=[]),this._localStreams.includes(c)||this._localStreams.push(c),c.getAudioTracks().forEach(h=>s.call(this,h,c)),c.getVideoTracks().forEach(h=>s.call(this,h,c))},a.RTCPeerConnection.prototype.addTrack=function(c){for(var h=arguments.length,b=new Array(h>1?h-1:0),_=1;_<h;_++)b[_-1]=arguments[_];return b&&b.forEach($=>{this._localStreams?this._localStreams.includes($)||this._localStreams.push($):this._localStreams=[$]}),s.apply(this,arguments)}}"removeStream"in a.RTCPeerConnection.prototype||(a.RTCPeerConnection.prototype.removeStream=function(d){this._localStreams||(this._localStreams=[]);const c=this._localStreams.indexOf(d);if(c===-1)return;this._localStreams.splice(c,1);const h=d.getTracks();this.getSenders().forEach(b=>{h.includes(b.track)&&this.removeTrack(b)})})}}function shimRemoteStreamsAPI(a){if(!(typeof a!="object"||!a.RTCPeerConnection)&&("getRemoteStreams"in a.RTCPeerConnection.prototype||(a.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in a.RTCPeerConnection.prototype))){Object.defineProperty(a.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(d){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=d),this.addEventListener("track",this._onaddstreampoly=c=>{c.streams.forEach(h=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(h))return;this._remoteStreams.push(h);const b=new Event("addstream");b.stream=h,this.dispatchEvent(b)})})}});const s=a.RTCPeerConnection.prototype.setRemoteDescription;a.RTCPeerConnection.prototype.setRemoteDescription=function(){const c=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(h){h.streams.forEach(b=>{if(c._remoteStreams||(c._remoteStreams=[]),c._remoteStreams.indexOf(b)>=0)return;c._remoteStreams.push(b);const _=new Event("addstream");_.stream=b,c.dispatchEvent(_)})}),s.apply(c,arguments)}}}function shimCallbacksAPI(a){if(typeof a!="object"||!a.RTCPeerConnection)return;const s=a.RTCPeerConnection.prototype,d=s.createOffer,c=s.createAnswer,h=s.setLocalDescription,b=s.setRemoteDescription,_=s.addIceCandidate;s.createOffer=function(tt,rt){const ot=arguments.length>=2?arguments[2]:arguments[0],it=d.apply(this,[ot]);return rt?(it.then(tt,rt),Promise.resolve()):it},s.createAnswer=function(tt,rt){const ot=arguments.length>=2?arguments[2]:arguments[0],it=c.apply(this,[ot]);return rt?(it.then(tt,rt),Promise.resolve()):it};let $=function(_e,tt,rt){const ot=h.apply(this,[_e]);return rt?(ot.then(tt,rt),Promise.resolve()):ot};s.setLocalDescription=$,$=function(_e,tt,rt){const ot=b.apply(this,[_e]);return rt?(ot.then(tt,rt),Promise.resolve()):ot},s.setRemoteDescription=$,$=function(_e,tt,rt){const ot=_.apply(this,[_e]);return rt?(ot.then(tt,rt),Promise.resolve()):ot},s.addIceCandidate=$}function shimGetUserMedia(a){const s=a&&a.navigator;if(s.mediaDevices&&s.mediaDevices.getUserMedia){const d=s.mediaDevices,c=d.getUserMedia.bind(d);s.mediaDevices.getUserMedia=h=>c(shimConstraints(h))}!s.getUserMedia&&s.mediaDevices&&s.mediaDevices.getUserMedia&&(s.getUserMedia=function(c,h,b){s.mediaDevices.getUserMedia(c).then(h,b)}.bind(s))}function shimConstraints(a){return a&&a.video!==void 0?Object.assign({},a,{video:compactObject(a.video)}):a}function shimRTCIceServerUrls(a){if(!a.RTCPeerConnection)return;const s=a.RTCPeerConnection;a.RTCPeerConnection=function(c,h){if(c&&c.iceServers){const b=[];for(let _=0;_<c.iceServers.length;_++){let $=c.iceServers[_];!$.hasOwnProperty("urls")&&$.hasOwnProperty("url")?(deprecated("RTCIceServer.url","RTCIceServer.urls"),$=JSON.parse(JSON.stringify($)),$.urls=$.url,delete $.url,b.push($)):b.push(c.iceServers[_])}c.iceServers=b}return new s(c,h)},a.RTCPeerConnection.prototype=s.prototype,"generateCertificate"in s&&Object.defineProperty(a.RTCPeerConnection,"generateCertificate",{get(){return s.generateCertificate}})}function shimTrackEventTransceiver(a){typeof a=="object"&&a.RTCTrackEvent&&"receiver"in a.RTCTrackEvent.prototype&&!("transceiver"in a.RTCTrackEvent.prototype)&&Object.defineProperty(a.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function shimCreateOfferLegacy(a){const s=a.RTCPeerConnection.prototype.createOffer;a.RTCPeerConnection.prototype.createOffer=function(c){if(c){typeof c.offerToReceiveAudio!="undefined"&&(c.offerToReceiveAudio=!!c.offerToReceiveAudio);const h=this.getTransceivers().find(_=>_.receiver.track.kind==="audio");c.offerToReceiveAudio===!1&&h?h.direction==="sendrecv"?h.setDirection?h.setDirection("sendonly"):h.direction="sendonly":h.direction==="recvonly"&&(h.setDirection?h.setDirection("inactive"):h.direction="inactive"):c.offerToReceiveAudio===!0&&!h&&this.addTransceiver("audio",{direction:"recvonly"}),typeof c.offerToReceiveVideo!="undefined"&&(c.offerToReceiveVideo=!!c.offerToReceiveVideo);const b=this.getTransceivers().find(_=>_.receiver.track.kind==="video");c.offerToReceiveVideo===!1&&b?b.direction==="sendrecv"?b.setDirection?b.setDirection("sendonly"):b.direction="sendonly":b.direction==="recvonly"&&(b.setDirection?b.setDirection("inactive"):b.direction="inactive"):c.offerToReceiveVideo===!0&&!b&&this.addTransceiver("video",{direction:"recvonly"})}return s.apply(this,arguments)}}function shimAudioContext(a){typeof a!="object"||a.AudioContext||(a.AudioContext=a.webkitAudioContext)}var safariShim=Object.freeze({__proto__:null,shimAudioContext,shimCallbacksAPI,shimConstraints,shimCreateOfferLegacy,shimGetUserMedia,shimLocalStreamsAPI,shimRTCIceServerUrls,shimRemoteStreamsAPI,shimTrackEventTransceiver}),sdpExports={},sdp$1={get exports(){return sdpExports},set exports(a){sdpExports=a}};(function(a){const s={};s.generateIdentifier=function(){return Math.random().toString(36).substr(2,10)},s.localCName=s.generateIdentifier(),s.splitLines=function(d){return d.trim().split(`
`).map(c=>c.trim())},s.splitSections=function(d){return d.split(`
m=`).map((h,b)=>(b>0?"m="+h:h).trim()+`\r
`)},s.getDescription=function(d){const c=s.splitSections(d);return c&&c[0]},s.getMediaSections=function(d){const c=s.splitSections(d);return c.shift(),c},s.matchPrefix=function(d,c){return s.splitLines(d).filter(h=>h.indexOf(c)===0)},s.parseCandidate=function(d){let c;d.indexOf("a=candidate:")===0?c=d.substring(12).split(" "):c=d.substring(10).split(" ");const h={foundation:c[0],component:{1:"rtp",2:"rtcp"}[c[1]]||c[1],protocol:c[2].toLowerCase(),priority:parseInt(c[3],10),ip:c[4],address:c[4],port:parseInt(c[5],10),type:c[7]};for(let b=8;b<c.length;b+=2)switch(c[b]){case"raddr":h.relatedAddress=c[b+1];break;case"rport":h.relatedPort=parseInt(c[b+1],10);break;case"tcptype":h.tcpType=c[b+1];break;case"ufrag":h.ufrag=c[b+1],h.usernameFragment=c[b+1];break;default:h[c[b]]===void 0&&(h[c[b]]=c[b+1]);break}return h},s.writeCandidate=function(d){const c=[];c.push(d.foundation);const h=d.component;h==="rtp"?c.push(1):h==="rtcp"?c.push(2):c.push(h),c.push(d.protocol.toUpperCase()),c.push(d.priority),c.push(d.address||d.ip),c.push(d.port);const b=d.type;return c.push("typ"),c.push(b),b!=="host"&&d.relatedAddress&&d.relatedPort&&(c.push("raddr"),c.push(d.relatedAddress),c.push("rport"),c.push(d.relatedPort)),d.tcpType&&d.protocol.toLowerCase()==="tcp"&&(c.push("tcptype"),c.push(d.tcpType)),(d.usernameFragment||d.ufrag)&&(c.push("ufrag"),c.push(d.usernameFragment||d.ufrag)),"candidate:"+c.join(" ")},s.parseIceOptions=function(d){return d.substr(14).split(" ")},s.parseRtpMap=function(d){let c=d.substr(9).split(" ");const h={payloadType:parseInt(c.shift(),10)};return c=c[0].split("/"),h.name=c[0],h.clockRate=parseInt(c[1],10),h.channels=c.length===3?parseInt(c[2],10):1,h.numChannels=h.channels,h},s.writeRtpMap=function(d){let c=d.payloadType;d.preferredPayloadType!==void 0&&(c=d.preferredPayloadType);const h=d.channels||d.numChannels||1;return"a=rtpmap:"+c+" "+d.name+"/"+d.clockRate+(h!==1?"/"+h:"")+`\r
`},s.parseExtmap=function(d){const c=d.substr(9).split(" ");return{id:parseInt(c[0],10),direction:c[0].indexOf("/")>0?c[0].split("/")[1]:"sendrecv",uri:c[1]}},s.writeExtmap=function(d){return"a=extmap:"+(d.id||d.preferredId)+(d.direction&&d.direction!=="sendrecv"?"/"+d.direction:"")+" "+d.uri+`\r
`},s.parseFmtp=function(d){const c={};let h;const b=d.substr(d.indexOf(" ")+1).split(";");for(let _=0;_<b.length;_++)h=b[_].trim().split("="),c[h[0].trim()]=h[1];return c},s.writeFmtp=function(d){let c="",h=d.payloadType;if(d.preferredPayloadType!==void 0&&(h=d.preferredPayloadType),d.parameters&&Object.keys(d.parameters).length){const b=[];Object.keys(d.parameters).forEach(_=>{d.parameters[_]!==void 0?b.push(_+"="+d.parameters[_]):b.push(_)}),c+="a=fmtp:"+h+" "+b.join(";")+`\r
`}return c},s.parseRtcpFb=function(d){const c=d.substr(d.indexOf(" ")+1).split(" ");return{type:c.shift(),parameter:c.join(" ")}},s.writeRtcpFb=function(d){let c="",h=d.payloadType;return d.preferredPayloadType!==void 0&&(h=d.preferredPayloadType),d.rtcpFeedback&&d.rtcpFeedback.length&&d.rtcpFeedback.forEach(b=>{c+="a=rtcp-fb:"+h+" "+b.type+(b.parameter&&b.parameter.length?" "+b.parameter:"")+`\r
`}),c},s.parseSsrcMedia=function(d){const c=d.indexOf(" "),h={ssrc:parseInt(d.substr(7,c-7),10)},b=d.indexOf(":",c);return b>-1?(h.attribute=d.substr(c+1,b-c-1),h.value=d.substr(b+1)):h.attribute=d.substr(c+1),h},s.parseSsrcGroup=function(d){const c=d.substr(13).split(" ");return{semantics:c.shift(),ssrcs:c.map(h=>parseInt(h,10))}},s.getMid=function(d){const c=s.matchPrefix(d,"a=mid:")[0];if(c)return c.substr(6)},s.parseFingerprint=function(d){const c=d.substr(14).split(" ");return{algorithm:c[0].toLowerCase(),value:c[1].toUpperCase()}},s.getDtlsParameters=function(d,c){const h=s.matchPrefix(d+c,"a=fingerprint:");return{role:"auto",fingerprints:h.map(s.parseFingerprint)}},s.writeDtlsParameters=function(d,c){let h="a=setup:"+c+`\r
`;return d.fingerprints.forEach(b=>{h+="a=fingerprint:"+b.algorithm+" "+b.value+`\r
`}),h},s.parseCryptoLine=function(d){const c=d.substr(9).split(" ");return{tag:parseInt(c[0],10),cryptoSuite:c[1],keyParams:c[2],sessionParams:c.slice(3)}},s.writeCryptoLine=function(d){return"a=crypto:"+d.tag+" "+d.cryptoSuite+" "+(typeof d.keyParams=="object"?s.writeCryptoKeyParams(d.keyParams):d.keyParams)+(d.sessionParams?" "+d.sessionParams.join(" "):"")+`\r
`},s.parseCryptoKeyParams=function(d){if(d.indexOf("inline:")!==0)return null;const c=d.substr(7).split("|");return{keyMethod:"inline",keySalt:c[0],lifeTime:c[1],mkiValue:c[2]?c[2].split(":")[0]:void 0,mkiLength:c[2]?c[2].split(":")[1]:void 0}},s.writeCryptoKeyParams=function(d){return d.keyMethod+":"+d.keySalt+(d.lifeTime?"|"+d.lifeTime:"")+(d.mkiValue&&d.mkiLength?"|"+d.mkiValue+":"+d.mkiLength:"")},s.getCryptoParameters=function(d,c){return s.matchPrefix(d+c,"a=crypto:").map(s.parseCryptoLine)},s.getIceParameters=function(d,c){const h=s.matchPrefix(d+c,"a=ice-ufrag:")[0],b=s.matchPrefix(d+c,"a=ice-pwd:")[0];return h&&b?{usernameFragment:h.substr(12),password:b.substr(10)}:null},s.writeIceParameters=function(d){let c="a=ice-ufrag:"+d.usernameFragment+`\r
a=ice-pwd:`+d.password+`\r
`;return d.iceLite&&(c+=`a=ice-lite\r
`),c},s.parseRtpParameters=function(d){const c={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},b=s.splitLines(d)[0].split(" ");for(let _=3;_<b.length;_++){const $=b[_],_e=s.matchPrefix(d,"a=rtpmap:"+$+" ")[0];if(_e){const tt=s.parseRtpMap(_e),rt=s.matchPrefix(d,"a=fmtp:"+$+" ");switch(tt.parameters=rt.length?s.parseFmtp(rt[0]):{},tt.rtcpFeedback=s.matchPrefix(d,"a=rtcp-fb:"+$+" ").map(s.parseRtcpFb),c.codecs.push(tt),tt.name.toUpperCase()){case"RED":case"ULPFEC":c.fecMechanisms.push(tt.name.toUpperCase());break}}}return s.matchPrefix(d,"a=extmap:").forEach(_=>{c.headerExtensions.push(s.parseExtmap(_))}),c},s.writeRtpDescription=function(d,c){let h="";h+="m="+d+" ",h+=c.codecs.length>0?"9":"0",h+=" UDP/TLS/RTP/SAVPF ",h+=c.codecs.map(_=>_.preferredPayloadType!==void 0?_.preferredPayloadType:_.payloadType).join(" ")+`\r
`,h+=`c=IN IP4 0.0.0.0\r
`,h+=`a=rtcp:9 IN IP4 0.0.0.0\r
`,c.codecs.forEach(_=>{h+=s.writeRtpMap(_),h+=s.writeFmtp(_),h+=s.writeRtcpFb(_)});let b=0;return c.codecs.forEach(_=>{_.maxptime>b&&(b=_.maxptime)}),b>0&&(h+="a=maxptime:"+b+`\r
`),c.headerExtensions&&c.headerExtensions.forEach(_=>{h+=s.writeExtmap(_)}),h},s.parseRtpEncodingParameters=function(d){const c=[],h=s.parseRtpParameters(d),b=h.fecMechanisms.indexOf("RED")!==-1,_=h.fecMechanisms.indexOf("ULPFEC")!==-1,$=s.matchPrefix(d,"a=ssrc:").map(it=>s.parseSsrcMedia(it)).filter(it=>it.attribute==="cname"),_e=$.length>0&&$[0].ssrc;let tt;const rt=s.matchPrefix(d,"a=ssrc-group:FID").map(it=>it.substr(17).split(" ").map(lt=>parseInt(lt,10)));rt.length>0&&rt[0].length>1&&rt[0][0]===_e&&(tt=rt[0][1]),h.codecs.forEach(it=>{if(it.name.toUpperCase()==="RTX"&&it.parameters.apt){let st={ssrc:_e,codecPayloadType:parseInt(it.parameters.apt,10)};_e&&tt&&(st.rtx={ssrc:tt}),c.push(st),b&&(st=JSON.parse(JSON.stringify(st)),st.fec={ssrc:_e,mechanism:_?"red+ulpfec":"red"},c.push(st))}}),c.length===0&&_e&&c.push({ssrc:_e});let ot=s.matchPrefix(d,"b=");return ot.length&&(ot[0].indexOf("b=TIAS:")===0?ot=parseInt(ot[0].substr(7),10):ot[0].indexOf("b=AS:")===0?ot=parseInt(ot[0].substr(5),10)*1e3*.95-50*40*8:ot=void 0,c.forEach(it=>{it.maxBitrate=ot})),c},s.parseRtcpParameters=function(d){const c={},h=s.matchPrefix(d,"a=ssrc:").map($=>s.parseSsrcMedia($)).filter($=>$.attribute==="cname")[0];h&&(c.cname=h.value,c.ssrc=h.ssrc);const b=s.matchPrefix(d,"a=rtcp-rsize");c.reducedSize=b.length>0,c.compound=b.length===0;const _=s.matchPrefix(d,"a=rtcp-mux");return c.mux=_.length>0,c},s.writeRtcpParameters=function(d){let c="";return d.reducedSize&&(c+=`a=rtcp-rsize\r
`),d.mux&&(c+=`a=rtcp-mux\r
`),d.ssrc!==void 0&&d.cname&&(c+="a=ssrc:"+d.ssrc+" cname:"+d.cname+`\r
`),c},s.parseMsid=function(d){let c;const h=s.matchPrefix(d,"a=msid:");if(h.length===1)return c=h[0].substr(7).split(" "),{stream:c[0],track:c[1]};const b=s.matchPrefix(d,"a=ssrc:").map(_=>s.parseSsrcMedia(_)).filter(_=>_.attribute==="msid");if(b.length>0)return c=b[0].value.split(" "),{stream:c[0],track:c[1]}},s.parseSctpDescription=function(d){const c=s.parseMLine(d),h=s.matchPrefix(d,"a=max-message-size:");let b;h.length>0&&(b=parseInt(h[0].substr(19),10)),isNaN(b)&&(b=65536);const _=s.matchPrefix(d,"a=sctp-port:");if(_.length>0)return{port:parseInt(_[0].substr(12),10),protocol:c.fmt,maxMessageSize:b};const $=s.matchPrefix(d,"a=sctpmap:");if($.length>0){const _e=$[0].substr(10).split(" ");return{port:parseInt(_e[0],10),protocol:_e[1],maxMessageSize:b}}},s.writeSctpDescription=function(d,c){let h=[];return d.protocol!=="DTLS/SCTP"?h=["m="+d.kind+" 9 "+d.protocol+" "+c.protocol+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctp-port:"+c.port+`\r
`]:h=["m="+d.kind+" 9 "+d.protocol+" "+c.port+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctpmap:"+c.port+" "+c.protocol+` 65535\r
`],c.maxMessageSize!==void 0&&h.push("a=max-message-size:"+c.maxMessageSize+`\r
`),h.join("")},s.generateSessionId=function(){return Math.random().toString().substr(2,21)},s.writeSessionBoilerplate=function(d,c,h){let b;const _=c!==void 0?c:2;return d?b=d:b=s.generateSessionId(),`v=0\r
o=`+(h||"thisisadapterortc")+" "+b+" "+_+` IN IP4 127.0.0.1\r
s=-\r
t=0 0\r
`},s.getDirection=function(d,c){const h=s.splitLines(d);for(let b=0;b<h.length;b++)switch(h[b]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return h[b].substr(2)}return c?s.getDirection(c):"sendrecv"},s.getKind=function(d){return s.splitLines(d)[0].split(" ")[0].substr(2)},s.isRejected=function(d){return d.split(" ",2)[1]==="0"},s.parseMLine=function(d){const h=s.splitLines(d)[0].substr(2).split(" ");return{kind:h[0],port:parseInt(h[1],10),protocol:h[2],fmt:h.slice(3).join(" ")}},s.parseOLine=function(d){const h=s.matchPrefix(d,"o=")[0].substr(2).split(" ");return{username:h[0],sessionId:h[1],sessionVersion:parseInt(h[2],10),netType:h[3],addressType:h[4],address:h[5]}},s.isValidSDP=function(d){if(typeof d!="string"||d.length===0)return!1;const c=s.splitLines(d);for(let h=0;h<c.length;h++)if(c[h].length<2||c[h].charAt(1)!=="=")return!1;return!0},a.exports=s})(sdp$1);var SDPUtils=sdpExports,sdp=_mergeNamespaces({__proto__:null,default:SDPUtils},[sdpExports]);function shimRTCIceCandidate(a){if(!a.RTCIceCandidate||a.RTCIceCandidate&&"foundation"in a.RTCIceCandidate.prototype)return;const s=a.RTCIceCandidate;a.RTCIceCandidate=function(c){if(typeof c=="object"&&c.candidate&&c.candidate.indexOf("a=")===0&&(c=JSON.parse(JSON.stringify(c)),c.candidate=c.candidate.substr(2)),c.candidate&&c.candidate.length){const h=new s(c),b=SDPUtils.parseCandidate(c.candidate),_=Object.assign(h,b);return _.toJSON=function(){return{candidate:_.candidate,sdpMid:_.sdpMid,sdpMLineIndex:_.sdpMLineIndex,usernameFragment:_.usernameFragment}},_}return new s(c)},a.RTCIceCandidate.prototype=s.prototype,wrapPeerConnectionEvent(a,"icecandidate",d=>(d.candidate&&Object.defineProperty(d,"candidate",{value:new a.RTCIceCandidate(d.candidate),writable:"false"}),d))}function shimMaxMessageSize(a,s){if(!a.RTCPeerConnection)return;"sctp"in a.RTCPeerConnection.prototype||Object.defineProperty(a.RTCPeerConnection.prototype,"sctp",{get(){return typeof this._sctp=="undefined"?null:this._sctp}});const d=function($){if(!$||!$.sdp)return!1;const _e=SDPUtils.splitSections($.sdp);return _e.shift(),_e.some(tt=>{const rt=SDPUtils.parseMLine(tt);return rt&&rt.kind==="application"&&rt.protocol.indexOf("SCTP")!==-1})},c=function($){const _e=$.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(_e===null||_e.length<2)return-1;const tt=parseInt(_e[1],10);return tt!==tt?-1:tt},h=function($){let _e=65536;return s.browser==="firefox"&&(s.version<57?$===-1?_e=16384:_e=2147483637:s.version<60?_e=s.version===57?65535:65536:_e=2147483637),_e},b=function($,_e){let tt=65536;s.browser==="firefox"&&s.version===57&&(tt=65535);const rt=SDPUtils.matchPrefix($.sdp,"a=max-message-size:");return rt.length>0?tt=parseInt(rt[0].substr(19),10):s.browser==="firefox"&&_e!==-1&&(tt=2147483637),tt},_=a.RTCPeerConnection.prototype.setRemoteDescription;a.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,s.browser==="chrome"&&s.version>=76){const{sdpSemantics:_e}=this.getConfiguration();_e==="plan-b"&&Object.defineProperty(this,"sctp",{get(){return typeof this._sctp=="undefined"?null:this._sctp},enumerable:!0,configurable:!0})}if(d(arguments[0])){const _e=c(arguments[0]),tt=h(_e),rt=b(arguments[0],_e);let ot;tt===0&&rt===0?ot=Number.POSITIVE_INFINITY:tt===0||rt===0?ot=Math.max(tt,rt):ot=Math.min(tt,rt);const it={};Object.defineProperty(it,"maxMessageSize",{get(){return ot}}),this._sctp=it}return _.apply(this,arguments)}}function shimSendThrowTypeError(a){if(!(a.RTCPeerConnection&&"createDataChannel"in a.RTCPeerConnection.prototype))return;function s(c,h){const b=c.send;c.send=function(){const $=arguments[0],_e=$.length||$.size||$.byteLength;if(c.readyState==="open"&&h.sctp&&_e>h.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+h.sctp.maxMessageSize+" bytes)");return b.apply(c,arguments)}}const d=a.RTCPeerConnection.prototype.createDataChannel;a.RTCPeerConnection.prototype.createDataChannel=function(){const h=d.apply(this,arguments);return s(h,this),h},wrapPeerConnectionEvent(a,"datachannel",c=>(s(c.channel,c.target),c))}function shimConnectionState(a){if(!a.RTCPeerConnection||"connectionState"in a.RTCPeerConnection.prototype)return;const s=a.RTCPeerConnection.prototype;Object.defineProperty(s,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(s,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(d){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),d&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=d)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(d=>{const c=s[d];s[d]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=h=>{const b=h.target;if(b._lastConnectionState!==b.connectionState){b._lastConnectionState=b.connectionState;const _=new Event("connectionstatechange",h);b.dispatchEvent(_)}return h},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),c.apply(this,arguments)}})}function removeExtmapAllowMixed(a,s){if(!a.RTCPeerConnection||s.browser==="chrome"&&s.version>=71||s.browser==="safari"&&s.version>=605)return;const d=a.RTCPeerConnection.prototype.setRemoteDescription;a.RTCPeerConnection.prototype.setRemoteDescription=function(h){if(h&&h.sdp&&h.sdp.indexOf(`
a=extmap-allow-mixed`)!==-1){const b=h.sdp.split(`
`).filter(_=>_.trim()!=="a=extmap-allow-mixed").join(`
`);a.RTCSessionDescription&&h instanceof a.RTCSessionDescription?arguments[0]=new a.RTCSessionDescription({type:h.type,sdp:b}):h.sdp=b}return d.apply(this,arguments)}}function shimAddIceCandidateNullOrEmpty(a,s){if(!(a.RTCPeerConnection&&a.RTCPeerConnection.prototype))return;const d=a.RTCPeerConnection.prototype.addIceCandidate;!d||d.length===0||(a.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?(s.browser==="chrome"&&s.version<78||s.browser==="firefox"&&s.version<68||s.browser==="safari")&&arguments[0]&&arguments[0].candidate===""?Promise.resolve():d.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}function shimParameterlessSetLocalDescription(a,s){if(!(a.RTCPeerConnection&&a.RTCPeerConnection.prototype))return;const d=a.RTCPeerConnection.prototype.setLocalDescription;!d||d.length===0||(a.RTCPeerConnection.prototype.setLocalDescription=function(){let h=arguments[0]||{};if(typeof h!="object"||h.type&&h.sdp)return d.apply(this,arguments);if(h={type:h.type,sdp:h.sdp},!h.type)switch(this.signalingState){case"stable":case"have-local-offer":case"have-remote-pranswer":h.type="offer";break;default:h.type="answer";break}return h.sdp||h.type!=="offer"&&h.type!=="answer"?d.apply(this,[h]):(h.type==="offer"?this.createOffer:this.createAnswer).apply(this).then(_=>d.apply(this,[_]))})}var commonShim=Object.freeze({__proto__:null,removeExtmapAllowMixed,shimAddIceCandidateNullOrEmpty,shimConnectionState,shimMaxMessageSize,shimParameterlessSetLocalDescription,shimRTCIceCandidate,shimSendThrowTypeError});function adapterFactory(){let{window:a}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{shimChrome:!0,shimFirefox:!0,shimSafari:!0};const d=log,c=detectBrowser(a),h={browserDetails:c,commonShim,extractVersion,disableLog,disableWarnings,sdp};switch(c.browser){case"chrome":if(!chromeShim||!shimPeerConnection$1||!s.shimChrome)return d("Chrome shim is not included in this adapter release."),h;if(c.version===null)return d("Chrome shim can not determine version, not shimming."),h;d("adapter.js shimming chrome."),h.browserShim=chromeShim,shimAddIceCandidateNullOrEmpty(a,c),shimParameterlessSetLocalDescription(a),shimGetUserMedia$2(a,c),shimMediaStream(a),shimPeerConnection$1(a,c),shimOnTrack$1(a),shimAddTrackRemoveTrack(a,c),shimGetSendersWithDtmf(a),shimGetStats(a),shimSenderReceiverGetStats(a),fixNegotiationNeeded(a,c),shimRTCIceCandidate(a),shimConnectionState(a),shimMaxMessageSize(a,c),shimSendThrowTypeError(a),removeExtmapAllowMixed(a,c);break;case"firefox":if(!firefoxShim||!shimPeerConnection||!s.shimFirefox)return d("Firefox shim is not included in this adapter release."),h;d("adapter.js shimming firefox."),h.browserShim=firefoxShim,shimAddIceCandidateNullOrEmpty(a,c),shimParameterlessSetLocalDescription(a),shimGetUserMedia$1(a,c),shimPeerConnection(a,c),shimOnTrack(a),shimRemoveStream(a),shimSenderGetStats(a),shimReceiverGetStats(a),shimRTCDataChannel(a),shimAddTransceiver(a),shimGetParameters(a),shimCreateOffer(a),shimCreateAnswer(a),shimRTCIceCandidate(a),shimConnectionState(a),shimMaxMessageSize(a,c),shimSendThrowTypeError(a);break;case"safari":if(!safariShim||!s.shimSafari)return d("Safari shim is not included in this adapter release."),h;d("adapter.js shimming safari."),h.browserShim=safariShim,shimAddIceCandidateNullOrEmpty(a,c),shimParameterlessSetLocalDescription(a),shimRTCIceServerUrls(a),shimCreateOfferLegacy(a),shimCallbacksAPI(a),shimLocalStreamsAPI(a),shimRemoteStreamsAPI(a),shimTrackEventTransceiver(a),shimGetUserMedia(a),shimAudioContext(a),shimRTCIceCandidate(a),shimMaxMessageSize(a,c),shimSendThrowTypeError(a),removeExtmapAllowMixed(a,c);break;default:d("Unsupported browser!");break}return h}adapterFactory({window:typeof window=="undefined"?void 0:window});var SignalTarget;(function(a){a[a.PUBLISHER=0]="PUBLISHER",a[a.SUBSCRIBER=1]="SUBSCRIBER",a[a.UNRECOGNIZED=-1]="UNRECOGNIZED"})(SignalTarget||(SignalTarget={}));function signalTargetFromJSON(a){switch(a){case 0:case"PUBLISHER":return SignalTarget.PUBLISHER;case 1:case"SUBSCRIBER":return SignalTarget.SUBSCRIBER;case-1:case"UNRECOGNIZED":default:return SignalTarget.UNRECOGNIZED}}function signalTargetToJSON(a){switch(a){case SignalTarget.PUBLISHER:return"PUBLISHER";case SignalTarget.SUBSCRIBER:return"SUBSCRIBER";case SignalTarget.UNRECOGNIZED:default:return"UNRECOGNIZED"}}var StreamState;(function(a){a[a.ACTIVE=0]="ACTIVE",a[a.PAUSED=1]="PAUSED",a[a.UNRECOGNIZED=-1]="UNRECOGNIZED"})(StreamState||(StreamState={}));function streamStateFromJSON(a){switch(a){case 0:case"ACTIVE":return StreamState.ACTIVE;case 1:case"PAUSED":return StreamState.PAUSED;case-1:case"UNRECOGNIZED":default:return StreamState.UNRECOGNIZED}}function streamStateToJSON(a){switch(a){case StreamState.ACTIVE:return"ACTIVE";case StreamState.PAUSED:return"PAUSED";case StreamState.UNRECOGNIZED:default:return"UNRECOGNIZED"}}var CandidateProtocol;(function(a){a[a.UDP=0]="UDP",a[a.TCP=1]="TCP",a[a.TLS=2]="TLS",a[a.UNRECOGNIZED=-1]="UNRECOGNIZED"})(CandidateProtocol||(CandidateProtocol={}));function candidateProtocolFromJSON(a){switch(a){case 0:case"UDP":return CandidateProtocol.UDP;case 1:case"TCP":return CandidateProtocol.TCP;case 2:case"TLS":return CandidateProtocol.TLS;case-1:case"UNRECOGNIZED":default:return CandidateProtocol.UNRECOGNIZED}}function candidateProtocolToJSON(a){switch(a){case CandidateProtocol.UDP:return"UDP";case CandidateProtocol.TCP:return"TCP";case CandidateProtocol.TLS:return"TLS";case CandidateProtocol.UNRECOGNIZED:default:return"UNRECOGNIZED"}}function createBaseSignalRequest(){return{message:void 0}}const SignalRequest={encode(a){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_m0.Writer.create();var d;switch((d=a.message)===null||d===void 0?void 0:d.$case){case"offer":SessionDescription.encode(a.message.offer,s.uint32(10).fork()).ldelim();break;case"answer":SessionDescription.encode(a.message.answer,s.uint32(18).fork()).ldelim();break;case"trickle":TrickleRequest.encode(a.message.trickle,s.uint32(26).fork()).ldelim();break;case"addTrack":AddTrackRequest.encode(a.message.addTrack,s.uint32(34).fork()).ldelim();break;case"mute":MuteTrackRequest.encode(a.message.mute,s.uint32(42).fork()).ldelim();break;case"subscription":UpdateSubscription.encode(a.message.subscription,s.uint32(50).fork()).ldelim();break;case"trackSetting":UpdateTrackSettings.encode(a.message.trackSetting,s.uint32(58).fork()).ldelim();break;case"leave":LeaveRequest.encode(a.message.leave,s.uint32(66).fork()).ldelim();break;case"updateLayers":UpdateVideoLayers.encode(a.message.updateLayers,s.uint32(82).fork()).ldelim();break;case"subscriptionPermission":SubscriptionPermission.encode(a.message.subscriptionPermission,s.uint32(90).fork()).ldelim();break;case"syncState":SyncState.encode(a.message.syncState,s.uint32(98).fork()).ldelim();break;case"simulate":SimulateScenario.encode(a.message.simulate,s.uint32(106).fork()).ldelim();break;case"ping":s.uint32(112).int64(a.message.ping);break;case"updateMetadata":UpdateParticipantMetadata.encode(a.message.updateMetadata,s.uint32(122).fork()).ldelim();break;case"pingReq":Ping.encode(a.message.pingReq,s.uint32(130).fork()).ldelim();break}return s},decode(a,s){const d=a instanceof _m0.Reader?a:new _m0.Reader(a);let c=s===void 0?d.len:d.pos+s;const h=createBaseSignalRequest();for(;d.pos<c;){const b=d.uint32();switch(b>>>3){case 1:h.message={$case:"offer",offer:SessionDescription.decode(d,d.uint32())};break;case 2:h.message={$case:"answer",answer:SessionDescription.decode(d,d.uint32())};break;case 3:h.message={$case:"trickle",trickle:TrickleRequest.decode(d,d.uint32())};break;case 4:h.message={$case:"addTrack",addTrack:AddTrackRequest.decode(d,d.uint32())};break;case 5:h.message={$case:"mute",mute:MuteTrackRequest.decode(d,d.uint32())};break;case 6:h.message={$case:"subscription",subscription:UpdateSubscription.decode(d,d.uint32())};break;case 7:h.message={$case:"trackSetting",trackSetting:UpdateTrackSettings.decode(d,d.uint32())};break;case 8:h.message={$case:"leave",leave:LeaveRequest.decode(d,d.uint32())};break;case 10:h.message={$case:"updateLayers",updateLayers:UpdateVideoLayers.decode(d,d.uint32())};break;case 11:h.message={$case:"subscriptionPermission",subscriptionPermission:SubscriptionPermission.decode(d,d.uint32())};break;case 12:h.message={$case:"syncState",syncState:SyncState.decode(d,d.uint32())};break;case 13:h.message={$case:"simulate",simulate:SimulateScenario.decode(d,d.uint32())};break;case 14:h.message={$case:"ping",ping:longToNumber(d.int64())};break;case 15:h.message={$case:"updateMetadata",updateMetadata:UpdateParticipantMetadata.decode(d,d.uint32())};break;case 16:h.message={$case:"pingReq",pingReq:Ping.decode(d,d.uint32())};break;default:d.skipType(b&7);break}}return h},fromJSON(a){return{message:isSet(a.offer)?{$case:"offer",offer:SessionDescription.fromJSON(a.offer)}:isSet(a.answer)?{$case:"answer",answer:SessionDescription.fromJSON(a.answer)}:isSet(a.trickle)?{$case:"trickle",trickle:TrickleRequest.fromJSON(a.trickle)}:isSet(a.addTrack)?{$case:"addTrack",addTrack:AddTrackRequest.fromJSON(a.addTrack)}:isSet(a.mute)?{$case:"mute",mute:MuteTrackRequest.fromJSON(a.mute)}:isSet(a.subscription)?{$case:"subscription",subscription:UpdateSubscription.fromJSON(a.subscription)}:isSet(a.trackSetting)?{$case:"trackSetting",trackSetting:UpdateTrackSettings.fromJSON(a.trackSetting)}:isSet(a.leave)?{$case:"leave",leave:LeaveRequest.fromJSON(a.leave)}:isSet(a.updateLayers)?{$case:"updateLayers",updateLayers:UpdateVideoLayers.fromJSON(a.updateLayers)}:isSet(a.subscriptionPermission)?{$case:"subscriptionPermission",subscriptionPermission:SubscriptionPermission.fromJSON(a.subscriptionPermission)}:isSet(a.syncState)?{$case:"syncState",syncState:SyncState.fromJSON(a.syncState)}:isSet(a.simulate)?{$case:"simulate",simulate:SimulateScenario.fromJSON(a.simulate)}:isSet(a.ping)?{$case:"ping",ping:Number(a.ping)}:isSet(a.updateMetadata)?{$case:"updateMetadata",updateMetadata:UpdateParticipantMetadata.fromJSON(a.updateMetadata)}:isSet(a.pingReq)?{$case:"pingReq",pingReq:Ping.fromJSON(a.pingReq)}:void 0}},toJSON(a){var s,d,c,h,b,_,$,_e,tt,rt,ot,it,st,lt,dt,ut,ht,nt,ct,mt,kt,Tt,Pt,At,gt,Ct,Nt,vt,Et,It,xt,Dt,Ot,Jt,Yt,Qt,Ft,pt,_t,Lt,Gt,Ut,$t,qt;const Wt={};return((s=a.message)===null||s===void 0?void 0:s.$case)==="offer"&&(Wt.offer=!((d=a.message)===null||d===void 0)&&d.offer?SessionDescription.toJSON((c=a.message)===null||c===void 0?void 0:c.offer):void 0),((h=a.message)===null||h===void 0?void 0:h.$case)==="answer"&&(Wt.answer=!((b=a.message)===null||b===void 0)&&b.answer?SessionDescription.toJSON((_=a.message)===null||_===void 0?void 0:_.answer):void 0),(($=a.message)===null||$===void 0?void 0:$.$case)==="trickle"&&(Wt.trickle=!((_e=a.message)===null||_e===void 0)&&_e.trickle?TrickleRequest.toJSON((tt=a.message)===null||tt===void 0?void 0:tt.trickle):void 0),((rt=a.message)===null||rt===void 0?void 0:rt.$case)==="addTrack"&&(Wt.addTrack=!((ot=a.message)===null||ot===void 0)&&ot.addTrack?AddTrackRequest.toJSON((it=a.message)===null||it===void 0?void 0:it.addTrack):void 0),((st=a.message)===null||st===void 0?void 0:st.$case)==="mute"&&(Wt.mute=!((lt=a.message)===null||lt===void 0)&&lt.mute?MuteTrackRequest.toJSON((dt=a.message)===null||dt===void 0?void 0:dt.mute):void 0),((ut=a.message)===null||ut===void 0?void 0:ut.$case)==="subscription"&&(Wt.subscription=!((ht=a.message)===null||ht===void 0)&&ht.subscription?UpdateSubscription.toJSON((nt=a.message)===null||nt===void 0?void 0:nt.subscription):void 0),((ct=a.message)===null||ct===void 0?void 0:ct.$case)==="trackSetting"&&(Wt.trackSetting=!((mt=a.message)===null||mt===void 0)&&mt.trackSetting?UpdateTrackSettings.toJSON((kt=a.message)===null||kt===void 0?void 0:kt.trackSetting):void 0),((Tt=a.message)===null||Tt===void 0?void 0:Tt.$case)==="leave"&&(Wt.leave=!((Pt=a.message)===null||Pt===void 0)&&Pt.leave?LeaveRequest.toJSON((At=a.message)===null||At===void 0?void 0:At.leave):void 0),((gt=a.message)===null||gt===void 0?void 0:gt.$case)==="updateLayers"&&(Wt.updateLayers=!((Ct=a.message)===null||Ct===void 0)&&Ct.updateLayers?UpdateVideoLayers.toJSON((Nt=a.message)===null||Nt===void 0?void 0:Nt.updateLayers):void 0),((vt=a.message)===null||vt===void 0?void 0:vt.$case)==="subscriptionPermission"&&(Wt.subscriptionPermission=!((Et=a.message)===null||Et===void 0)&&Et.subscriptionPermission?SubscriptionPermission.toJSON((It=a.message)===null||It===void 0?void 0:It.subscriptionPermission):void 0),((xt=a.message)===null||xt===void 0?void 0:xt.$case)==="syncState"&&(Wt.syncState=!((Dt=a.message)===null||Dt===void 0)&&Dt.syncState?SyncState.toJSON((Ot=a.message)===null||Ot===void 0?void 0:Ot.syncState):void 0),((Jt=a.message)===null||Jt===void 0?void 0:Jt.$case)==="simulate"&&(Wt.simulate=!((Yt=a.message)===null||Yt===void 0)&&Yt.simulate?SimulateScenario.toJSON((Qt=a.message)===null||Qt===void 0?void 0:Qt.simulate):void 0),((Ft=a.message)===null||Ft===void 0?void 0:Ft.$case)==="ping"&&(Wt.ping=Math.round((pt=a.message)===null||pt===void 0?void 0:pt.ping)),((_t=a.message)===null||_t===void 0?void 0:_t.$case)==="updateMetadata"&&(Wt.updateMetadata=!((Lt=a.message)===null||Lt===void 0)&&Lt.updateMetadata?UpdateParticipantMetadata.toJSON((Gt=a.message)===null||Gt===void 0?void 0:Gt.updateMetadata):void 0),((Ut=a.message)===null||Ut===void 0?void 0:Ut.$case)==="pingReq"&&(Wt.pingReq=!(($t=a.message)===null||$t===void 0)&&$t.pingReq?Ping.toJSON((qt=a.message)===null||qt===void 0?void 0:qt.pingReq):void 0),Wt},create(a){return SignalRequest.fromPartial(a!=null?a:{})},fromPartial(a){var s,d,c,h,b,_,$,_e,tt,rt,ot,it,st,lt,dt,ut,ht,nt,ct,mt,kt,Tt,Pt,At,gt,Ct,Nt,vt,Et,It,xt,Dt,Ot,Jt,Yt,Qt,Ft,pt,_t,Lt,Gt,Ut,$t,qt,Wt;const Ht=createBaseSignalRequest();return((s=a.message)===null||s===void 0?void 0:s.$case)==="offer"&&((d=a.message)===null||d===void 0?void 0:d.offer)!==void 0&&((c=a.message)===null||c===void 0?void 0:c.offer)!==null&&(Ht.message={$case:"offer",offer:SessionDescription.fromPartial(a.message.offer)}),((h=a.message)===null||h===void 0?void 0:h.$case)==="answer"&&((b=a.message)===null||b===void 0?void 0:b.answer)!==void 0&&((_=a.message)===null||_===void 0?void 0:_.answer)!==null&&(Ht.message={$case:"answer",answer:SessionDescription.fromPartial(a.message.answer)}),(($=a.message)===null||$===void 0?void 0:$.$case)==="trickle"&&((_e=a.message)===null||_e===void 0?void 0:_e.trickle)!==void 0&&((tt=a.message)===null||tt===void 0?void 0:tt.trickle)!==null&&(Ht.message={$case:"trickle",trickle:TrickleRequest.fromPartial(a.message.trickle)}),((rt=a.message)===null||rt===void 0?void 0:rt.$case)==="addTrack"&&((ot=a.message)===null||ot===void 0?void 0:ot.addTrack)!==void 0&&((it=a.message)===null||it===void 0?void 0:it.addTrack)!==null&&(Ht.message={$case:"addTrack",addTrack:AddTrackRequest.fromPartial(a.message.addTrack)}),((st=a.message)===null||st===void 0?void 0:st.$case)==="mute"&&((lt=a.message)===null||lt===void 0?void 0:lt.mute)!==void 0&&((dt=a.message)===null||dt===void 0?void 0:dt.mute)!==null&&(Ht.message={$case:"mute",mute:MuteTrackRequest.fromPartial(a.message.mute)}),((ut=a.message)===null||ut===void 0?void 0:ut.$case)==="subscription"&&((ht=a.message)===null||ht===void 0?void 0:ht.subscription)!==void 0&&((nt=a.message)===null||nt===void 0?void 0:nt.subscription)!==null&&(Ht.message={$case:"subscription",subscription:UpdateSubscription.fromPartial(a.message.subscription)}),((ct=a.message)===null||ct===void 0?void 0:ct.$case)==="trackSetting"&&((mt=a.message)===null||mt===void 0?void 0:mt.trackSetting)!==void 0&&((kt=a.message)===null||kt===void 0?void 0:kt.trackSetting)!==null&&(Ht.message={$case:"trackSetting",trackSetting:UpdateTrackSettings.fromPartial(a.message.trackSetting)}),((Tt=a.message)===null||Tt===void 0?void 0:Tt.$case)==="leave"&&((Pt=a.message)===null||Pt===void 0?void 0:Pt.leave)!==void 0&&((At=a.message)===null||At===void 0?void 0:At.leave)!==null&&(Ht.message={$case:"leave",leave:LeaveRequest.fromPartial(a.message.leave)}),((gt=a.message)===null||gt===void 0?void 0:gt.$case)==="updateLayers"&&((Ct=a.message)===null||Ct===void 0?void 0:Ct.updateLayers)!==void 0&&((Nt=a.message)===null||Nt===void 0?void 0:Nt.updateLayers)!==null&&(Ht.message={$case:"updateLayers",updateLayers:UpdateVideoLayers.fromPartial(a.message.updateLayers)}),((vt=a.message)===null||vt===void 0?void 0:vt.$case)==="subscriptionPermission"&&((Et=a.message)===null||Et===void 0?void 0:Et.subscriptionPermission)!==void 0&&((It=a.message)===null||It===void 0?void 0:It.subscriptionPermission)!==null&&(Ht.message={$case:"subscriptionPermission",subscriptionPermission:SubscriptionPermission.fromPartial(a.message.subscriptionPermission)}),((xt=a.message)===null||xt===void 0?void 0:xt.$case)==="syncState"&&((Dt=a.message)===null||Dt===void 0?void 0:Dt.syncState)!==void 0&&((Ot=a.message)===null||Ot===void 0?void 0:Ot.syncState)!==null&&(Ht.message={$case:"syncState",syncState:SyncState.fromPartial(a.message.syncState)}),((Jt=a.message)===null||Jt===void 0?void 0:Jt.$case)==="simulate"&&((Yt=a.message)===null||Yt===void 0?void 0:Yt.simulate)!==void 0&&((Qt=a.message)===null||Qt===void 0?void 0:Qt.simulate)!==null&&(Ht.message={$case:"simulate",simulate:SimulateScenario.fromPartial(a.message.simulate)}),((Ft=a.message)===null||Ft===void 0?void 0:Ft.$case)==="ping"&&((pt=a.message)===null||pt===void 0?void 0:pt.ping)!==void 0&&((_t=a.message)===null||_t===void 0?void 0:_t.ping)!==null&&(Ht.message={$case:"ping",ping:a.message.ping}),((Lt=a.message)===null||Lt===void 0?void 0:Lt.$case)==="updateMetadata"&&((Gt=a.message)===null||Gt===void 0?void 0:Gt.updateMetadata)!==void 0&&((Ut=a.message)===null||Ut===void 0?void 0:Ut.updateMetadata)!==null&&(Ht.message={$case:"updateMetadata",updateMetadata:UpdateParticipantMetadata.fromPartial(a.message.updateMetadata)}),(($t=a.message)===null||$t===void 0?void 0:$t.$case)==="pingReq"&&((qt=a.message)===null||qt===void 0?void 0:qt.pingReq)!==void 0&&((Wt=a.message)===null||Wt===void 0?void 0:Wt.pingReq)!==null&&(Ht.message={$case:"pingReq",pingReq:Ping.fromPartial(a.message.pingReq)}),Ht}};function createBaseSignalResponse(){return{message:void 0}}const SignalResponse={encode(a){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_m0.Writer.create();var d;switch((d=a.message)===null||d===void 0?void 0:d.$case){case"join":JoinResponse.encode(a.message.join,s.uint32(10).fork()).ldelim();break;case"answer":SessionDescription.encode(a.message.answer,s.uint32(18).fork()).ldelim();break;case"offer":SessionDescription.encode(a.message.offer,s.uint32(26).fork()).ldelim();break;case"trickle":TrickleRequest.encode(a.message.trickle,s.uint32(34).fork()).ldelim();break;case"update":ParticipantUpdate.encode(a.message.update,s.uint32(42).fork()).ldelim();break;case"trackPublished":TrackPublishedResponse.encode(a.message.trackPublished,s.uint32(50).fork()).ldelim();break;case"leave":LeaveRequest.encode(a.message.leave,s.uint32(66).fork()).ldelim();break;case"mute":MuteTrackRequest.encode(a.message.mute,s.uint32(74).fork()).ldelim();break;case"speakersChanged":SpeakersChanged.encode(a.message.speakersChanged,s.uint32(82).fork()).ldelim();break;case"roomUpdate":RoomUpdate.encode(a.message.roomUpdate,s.uint32(90).fork()).ldelim();break;case"connectionQuality":ConnectionQualityUpdate.encode(a.message.connectionQuality,s.uint32(98).fork()).ldelim();break;case"streamStateUpdate":StreamStateUpdate.encode(a.message.streamStateUpdate,s.uint32(106).fork()).ldelim();break;case"subscribedQualityUpdate":SubscribedQualityUpdate.encode(a.message.subscribedQualityUpdate,s.uint32(114).fork()).ldelim();break;case"subscriptionPermissionUpdate":SubscriptionPermissionUpdate.encode(a.message.subscriptionPermissionUpdate,s.uint32(122).fork()).ldelim();break;case"refreshToken":s.uint32(130).string(a.message.refreshToken);break;case"trackUnpublished":TrackUnpublishedResponse.encode(a.message.trackUnpublished,s.uint32(138).fork()).ldelim();break;case"pong":s.uint32(144).int64(a.message.pong);break;case"reconnect":ReconnectResponse.encode(a.message.reconnect,s.uint32(154).fork()).ldelim();break;case"pongResp":Pong.encode(a.message.pongResp,s.uint32(162).fork()).ldelim();break}return s},decode(a,s){const d=a instanceof _m0.Reader?a:new _m0.Reader(a);let c=s===void 0?d.len:d.pos+s;const h=createBaseSignalResponse();for(;d.pos<c;){const b=d.uint32();switch(b>>>3){case 1:h.message={$case:"join",join:JoinResponse.decode(d,d.uint32())};break;case 2:h.message={$case:"answer",answer:SessionDescription.decode(d,d.uint32())};break;case 3:h.message={$case:"offer",offer:SessionDescription.decode(d,d.uint32())};break;case 4:h.message={$case:"trickle",trickle:TrickleRequest.decode(d,d.uint32())};break;case 5:h.message={$case:"update",update:ParticipantUpdate.decode(d,d.uint32())};break;case 6:h.message={$case:"trackPublished",trackPublished:TrackPublishedResponse.decode(d,d.uint32())};break;case 8:h.message={$case:"leave",leave:LeaveRequest.decode(d,d.uint32())};break;case 9:h.message={$case:"mute",mute:MuteTrackRequest.decode(d,d.uint32())};break;case 10:h.message={$case:"speakersChanged",speakersChanged:SpeakersChanged.decode(d,d.uint32())};break;case 11:h.message={$case:"roomUpdate",roomUpdate:RoomUpdate.decode(d,d.uint32())};break;case 12:h.message={$case:"connectionQuality",connectionQuality:ConnectionQualityUpdate.decode(d,d.uint32())};break;case 13:h.message={$case:"streamStateUpdate",streamStateUpdate:StreamStateUpdate.decode(d,d.uint32())};break;case 14:h.message={$case:"subscribedQualityUpdate",subscribedQualityUpdate:SubscribedQualityUpdate.decode(d,d.uint32())};break;case 15:h.message={$case:"subscriptionPermissionUpdate",subscriptionPermissionUpdate:SubscriptionPermissionUpdate.decode(d,d.uint32())};break;case 16:h.message={$case:"refreshToken",refreshToken:d.string()};break;case 17:h.message={$case:"trackUnpublished",trackUnpublished:TrackUnpublishedResponse.decode(d,d.uint32())};break;case 18:h.message={$case:"pong",pong:longToNumber(d.int64())};break;case 19:h.message={$case:"reconnect",reconnect:ReconnectResponse.decode(d,d.uint32())};break;case 20:h.message={$case:"pongResp",pongResp:Pong.decode(d,d.uint32())};break;default:d.skipType(b&7);break}}return h},fromJSON(a){return{message:isSet(a.join)?{$case:"join",join:JoinResponse.fromJSON(a.join)}:isSet(a.answer)?{$case:"answer",answer:SessionDescription.fromJSON(a.answer)}:isSet(a.offer)?{$case:"offer",offer:SessionDescription.fromJSON(a.offer)}:isSet(a.trickle)?{$case:"trickle",trickle:TrickleRequest.fromJSON(a.trickle)}:isSet(a.update)?{$case:"update",update:ParticipantUpdate.fromJSON(a.update)}:isSet(a.trackPublished)?{$case:"trackPublished",trackPublished:TrackPublishedResponse.fromJSON(a.trackPublished)}:isSet(a.leave)?{$case:"leave",leave:LeaveRequest.fromJSON(a.leave)}:isSet(a.mute)?{$case:"mute",mute:MuteTrackRequest.fromJSON(a.mute)}:isSet(a.speakersChanged)?{$case:"speakersChanged",speakersChanged:SpeakersChanged.fromJSON(a.speakersChanged)}:isSet(a.roomUpdate)?{$case:"roomUpdate",roomUpdate:RoomUpdate.fromJSON(a.roomUpdate)}:isSet(a.connectionQuality)?{$case:"connectionQuality",connectionQuality:ConnectionQualityUpdate.fromJSON(a.connectionQuality)}:isSet(a.streamStateUpdate)?{$case:"streamStateUpdate",streamStateUpdate:StreamStateUpdate.fromJSON(a.streamStateUpdate)}:isSet(a.subscribedQualityUpdate)?{$case:"subscribedQualityUpdate",subscribedQualityUpdate:SubscribedQualityUpdate.fromJSON(a.subscribedQualityUpdate)}:isSet(a.subscriptionPermissionUpdate)?{$case:"subscriptionPermissionUpdate",subscriptionPermissionUpdate:SubscriptionPermissionUpdate.fromJSON(a.subscriptionPermissionUpdate)}:isSet(a.refreshToken)?{$case:"refreshToken",refreshToken:String(a.refreshToken)}:isSet(a.trackUnpublished)?{$case:"trackUnpublished",trackUnpublished:TrackUnpublishedResponse.fromJSON(a.trackUnpublished)}:isSet(a.pong)?{$case:"pong",pong:Number(a.pong)}:isSet(a.reconnect)?{$case:"reconnect",reconnect:ReconnectResponse.fromJSON(a.reconnect)}:isSet(a.pongResp)?{$case:"pongResp",pongResp:Pong.fromJSON(a.pongResp)}:void 0}},toJSON(a){var s,d,c,h,b,_,$,_e,tt,rt,ot,it,st,lt,dt,ut,ht,nt,ct,mt,kt,Tt,Pt,At,gt,Ct,Nt,vt,Et,It,xt,Dt,Ot,Jt,Yt,Qt,Ft,pt,_t,Lt,Gt,Ut,$t,qt,Wt,Ht,vn,ln,In,dn,gn,kn,On,Zt,wn;const jt={};return((s=a.message)===null||s===void 0?void 0:s.$case)==="join"&&(jt.join=!((d=a.message)===null||d===void 0)&&d.join?JoinResponse.toJSON((c=a.message)===null||c===void 0?void 0:c.join):void 0),((h=a.message)===null||h===void 0?void 0:h.$case)==="answer"&&(jt.answer=!((b=a.message)===null||b===void 0)&&b.answer?SessionDescription.toJSON((_=a.message)===null||_===void 0?void 0:_.answer):void 0),(($=a.message)===null||$===void 0?void 0:$.$case)==="offer"&&(jt.offer=!((_e=a.message)===null||_e===void 0)&&_e.offer?SessionDescription.toJSON((tt=a.message)===null||tt===void 0?void 0:tt.offer):void 0),((rt=a.message)===null||rt===void 0?void 0:rt.$case)==="trickle"&&(jt.trickle=!((ot=a.message)===null||ot===void 0)&&ot.trickle?TrickleRequest.toJSON((it=a.message)===null||it===void 0?void 0:it.trickle):void 0),((st=a.message)===null||st===void 0?void 0:st.$case)==="update"&&(jt.update=!((lt=a.message)===null||lt===void 0)&&lt.update?ParticipantUpdate.toJSON((dt=a.message)===null||dt===void 0?void 0:dt.update):void 0),((ut=a.message)===null||ut===void 0?void 0:ut.$case)==="trackPublished"&&(jt.trackPublished=!((ht=a.message)===null||ht===void 0)&&ht.trackPublished?TrackPublishedResponse.toJSON((nt=a.message)===null||nt===void 0?void 0:nt.trackPublished):void 0),((ct=a.message)===null||ct===void 0?void 0:ct.$case)==="leave"&&(jt.leave=!((mt=a.message)===null||mt===void 0)&&mt.leave?LeaveRequest.toJSON((kt=a.message)===null||kt===void 0?void 0:kt.leave):void 0),((Tt=a.message)===null||Tt===void 0?void 0:Tt.$case)==="mute"&&(jt.mute=!((Pt=a.message)===null||Pt===void 0)&&Pt.mute?MuteTrackRequest.toJSON((At=a.message)===null||At===void 0?void 0:At.mute):void 0),((gt=a.message)===null||gt===void 0?void 0:gt.$case)==="speakersChanged"&&(jt.speakersChanged=!((Ct=a.message)===null||Ct===void 0)&&Ct.speakersChanged?SpeakersChanged.toJSON((Nt=a.message)===null||Nt===void 0?void 0:Nt.speakersChanged):void 0),((vt=a.message)===null||vt===void 0?void 0:vt.$case)==="roomUpdate"&&(jt.roomUpdate=!((Et=a.message)===null||Et===void 0)&&Et.roomUpdate?RoomUpdate.toJSON((It=a.message)===null||It===void 0?void 0:It.roomUpdate):void 0),((xt=a.message)===null||xt===void 0?void 0:xt.$case)==="connectionQuality"&&(jt.connectionQuality=!((Dt=a.message)===null||Dt===void 0)&&Dt.connectionQuality?ConnectionQualityUpdate.toJSON((Ot=a.message)===null||Ot===void 0?void 0:Ot.connectionQuality):void 0),((Jt=a.message)===null||Jt===void 0?void 0:Jt.$case)==="streamStateUpdate"&&(jt.streamStateUpdate=!((Yt=a.message)===null||Yt===void 0)&&Yt.streamStateUpdate?StreamStateUpdate.toJSON((Qt=a.message)===null||Qt===void 0?void 0:Qt.streamStateUpdate):void 0),((Ft=a.message)===null||Ft===void 0?void 0:Ft.$case)==="subscribedQualityUpdate"&&(jt.subscribedQualityUpdate=!((pt=a.message)===null||pt===void 0)&&pt.subscribedQualityUpdate?SubscribedQualityUpdate.toJSON((_t=a.message)===null||_t===void 0?void 0:_t.subscribedQualityUpdate):void 0),((Lt=a.message)===null||Lt===void 0?void 0:Lt.$case)==="subscriptionPermissionUpdate"&&(jt.subscriptionPermissionUpdate=!((Gt=a.message)===null||Gt===void 0)&&Gt.subscriptionPermissionUpdate?SubscriptionPermissionUpdate.toJSON((Ut=a.message)===null||Ut===void 0?void 0:Ut.subscriptionPermissionUpdate):void 0),(($t=a.message)===null||$t===void 0?void 0:$t.$case)==="refreshToken"&&(jt.refreshToken=(qt=a.message)===null||qt===void 0?void 0:qt.refreshToken),((Wt=a.message)===null||Wt===void 0?void 0:Wt.$case)==="trackUnpublished"&&(jt.trackUnpublished=!((Ht=a.message)===null||Ht===void 0)&&Ht.trackUnpublished?TrackUnpublishedResponse.toJSON((vn=a.message)===null||vn===void 0?void 0:vn.trackUnpublished):void 0),((ln=a.message)===null||ln===void 0?void 0:ln.$case)==="pong"&&(jt.pong=Math.round((In=a.message)===null||In===void 0?void 0:In.pong)),((dn=a.message)===null||dn===void 0?void 0:dn.$case)==="reconnect"&&(jt.reconnect=!((gn=a.message)===null||gn===void 0)&&gn.reconnect?ReconnectResponse.toJSON((kn=a.message)===null||kn===void 0?void 0:kn.reconnect):void 0),((On=a.message)===null||On===void 0?void 0:On.$case)==="pongResp"&&(jt.pongResp=!((Zt=a.message)===null||Zt===void 0)&&Zt.pongResp?Pong.toJSON((wn=a.message)===null||wn===void 0?void 0:wn.pongResp):void 0),jt},create(a){return SignalResponse.fromPartial(a!=null?a:{})},fromPartial(a){var s,d,c,h,b,_,$,_e,tt,rt,ot,it,st,lt,dt,ut,ht,nt,ct,mt,kt,Tt,Pt,At,gt,Ct,Nt,vt,Et,It,xt,Dt,Ot,Jt,Yt,Qt,Ft,pt,_t,Lt,Gt,Ut,$t,qt,Wt,Ht,vn,ln,In,dn,gn,kn,On,Zt,wn,jt,Pn;const Kt=createBaseSignalResponse();return((s=a.message)===null||s===void 0?void 0:s.$case)==="join"&&((d=a.message)===null||d===void 0?void 0:d.join)!==void 0&&((c=a.message)===null||c===void 0?void 0:c.join)!==null&&(Kt.message={$case:"join",join:JoinResponse.fromPartial(a.message.join)}),((h=a.message)===null||h===void 0?void 0:h.$case)==="answer"&&((b=a.message)===null||b===void 0?void 0:b.answer)!==void 0&&((_=a.message)===null||_===void 0?void 0:_.answer)!==null&&(Kt.message={$case:"answer",answer:SessionDescription.fromPartial(a.message.answer)}),(($=a.message)===null||$===void 0?void 0:$.$case)==="offer"&&((_e=a.message)===null||_e===void 0?void 0:_e.offer)!==void 0&&((tt=a.message)===null||tt===void 0?void 0:tt.offer)!==null&&(Kt.message={$case:"offer",offer:SessionDescription.fromPartial(a.message.offer)}),((rt=a.message)===null||rt===void 0?void 0:rt.$case)==="trickle"&&((ot=a.message)===null||ot===void 0?void 0:ot.trickle)!==void 0&&((it=a.message)===null||it===void 0?void 0:it.trickle)!==null&&(Kt.message={$case:"trickle",trickle:TrickleRequest.fromPartial(a.message.trickle)}),((st=a.message)===null||st===void 0?void 0:st.$case)==="update"&&((lt=a.message)===null||lt===void 0?void 0:lt.update)!==void 0&&((dt=a.message)===null||dt===void 0?void 0:dt.update)!==null&&(Kt.message={$case:"update",update:ParticipantUpdate.fromPartial(a.message.update)}),((ut=a.message)===null||ut===void 0?void 0:ut.$case)==="trackPublished"&&((ht=a.message)===null||ht===void 0?void 0:ht.trackPublished)!==void 0&&((nt=a.message)===null||nt===void 0?void 0:nt.trackPublished)!==null&&(Kt.message={$case:"trackPublished",trackPublished:TrackPublishedResponse.fromPartial(a.message.trackPublished)}),((ct=a.message)===null||ct===void 0?void 0:ct.$case)==="leave"&&((mt=a.message)===null||mt===void 0?void 0:mt.leave)!==void 0&&((kt=a.message)===null||kt===void 0?void 0:kt.leave)!==null&&(Kt.message={$case:"leave",leave:LeaveRequest.fromPartial(a.message.leave)}),((Tt=a.message)===null||Tt===void 0?void 0:Tt.$case)==="mute"&&((Pt=a.message)===null||Pt===void 0?void 0:Pt.mute)!==void 0&&((At=a.message)===null||At===void 0?void 0:At.mute)!==null&&(Kt.message={$case:"mute",mute:MuteTrackRequest.fromPartial(a.message.mute)}),((gt=a.message)===null||gt===void 0?void 0:gt.$case)==="speakersChanged"&&((Ct=a.message)===null||Ct===void 0?void 0:Ct.speakersChanged)!==void 0&&((Nt=a.message)===null||Nt===void 0?void 0:Nt.speakersChanged)!==null&&(Kt.message={$case:"speakersChanged",speakersChanged:SpeakersChanged.fromPartial(a.message.speakersChanged)}),((vt=a.message)===null||vt===void 0?void 0:vt.$case)==="roomUpdate"&&((Et=a.message)===null||Et===void 0?void 0:Et.roomUpdate)!==void 0&&((It=a.message)===null||It===void 0?void 0:It.roomUpdate)!==null&&(Kt.message={$case:"roomUpdate",roomUpdate:RoomUpdate.fromPartial(a.message.roomUpdate)}),((xt=a.message)===null||xt===void 0?void 0:xt.$case)==="connectionQuality"&&((Dt=a.message)===null||Dt===void 0?void 0:Dt.connectionQuality)!==void 0&&((Ot=a.message)===null||Ot===void 0?void 0:Ot.connectionQuality)!==null&&(Kt.message={$case:"connectionQuality",connectionQuality:ConnectionQualityUpdate.fromPartial(a.message.connectionQuality)}),((Jt=a.message)===null||Jt===void 0?void 0:Jt.$case)==="streamStateUpdate"&&((Yt=a.message)===null||Yt===void 0?void 0:Yt.streamStateUpdate)!==void 0&&((Qt=a.message)===null||Qt===void 0?void 0:Qt.streamStateUpdate)!==null&&(Kt.message={$case:"streamStateUpdate",streamStateUpdate:StreamStateUpdate.fromPartial(a.message.streamStateUpdate)}),((Ft=a.message)===null||Ft===void 0?void 0:Ft.$case)==="subscribedQualityUpdate"&&((pt=a.message)===null||pt===void 0?void 0:pt.subscribedQualityUpdate)!==void 0&&((_t=a.message)===null||_t===void 0?void 0:_t.subscribedQualityUpdate)!==null&&(Kt.message={$case:"subscribedQualityUpdate",subscribedQualityUpdate:SubscribedQualityUpdate.fromPartial(a.message.subscribedQualityUpdate)}),((Lt=a.message)===null||Lt===void 0?void 0:Lt.$case)==="subscriptionPermissionUpdate"&&((Gt=a.message)===null||Gt===void 0?void 0:Gt.subscriptionPermissionUpdate)!==void 0&&((Ut=a.message)===null||Ut===void 0?void 0:Ut.subscriptionPermissionUpdate)!==null&&(Kt.message={$case:"subscriptionPermissionUpdate",subscriptionPermissionUpdate:SubscriptionPermissionUpdate.fromPartial(a.message.subscriptionPermissionUpdate)}),(($t=a.message)===null||$t===void 0?void 0:$t.$case)==="refreshToken"&&((qt=a.message)===null||qt===void 0?void 0:qt.refreshToken)!==void 0&&((Wt=a.message)===null||Wt===void 0?void 0:Wt.refreshToken)!==null&&(Kt.message={$case:"refreshToken",refreshToken:a.message.refreshToken}),((Ht=a.message)===null||Ht===void 0?void 0:Ht.$case)==="trackUnpublished"&&((vn=a.message)===null||vn===void 0?void 0:vn.trackUnpublished)!==void 0&&((ln=a.message)===null||ln===void 0?void 0:ln.trackUnpublished)!==null&&(Kt.message={$case:"trackUnpublished",trackUnpublished:TrackUnpublishedResponse.fromPartial(a.message.trackUnpublished)}),((In=a.message)===null||In===void 0?void 0:In.$case)==="pong"&&((dn=a.message)===null||dn===void 0?void 0:dn.pong)!==void 0&&((gn=a.message)===null||gn===void 0?void 0:gn.pong)!==null&&(Kt.message={$case:"pong",pong:a.message.pong}),((kn=a.message)===null||kn===void 0?void 0:kn.$case)==="reconnect"&&((On=a.message)===null||On===void 0?void 0:On.reconnect)!==void 0&&((Zt=a.message)===null||Zt===void 0?void 0:Zt.reconnect)!==null&&(Kt.message={$case:"reconnect",reconnect:ReconnectResponse.fromPartial(a.message.reconnect)}),((wn=a.message)===null||wn===void 0?void 0:wn.$case)==="pongResp"&&((jt=a.message)===null||jt===void 0?void 0:jt.pongResp)!==void 0&&((Pn=a.message)===null||Pn===void 0?void 0:Pn.pongResp)!==null&&(Kt.message={$case:"pongResp",pongResp:Pong.fromPartial(a.message.pongResp)}),Kt}};function createBaseSimulcastCodec(){return{codec:"",cid:"",enableSimulcastLayers:!1}}const SimulcastCodec={encode(a){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_m0.Writer.create();return a.codec!==""&&s.uint32(10).string(a.codec),a.cid!==""&&s.uint32(18).string(a.cid),a.enableSimulcastLayers===!0&&s.uint32(24).bool(a.enableSimulcastLayers),s},decode(a,s){const d=a instanceof _m0.Reader?a:new _m0.Reader(a);let c=s===void 0?d.len:d.pos+s;const h=createBaseSimulcastCodec();for(;d.pos<c;){const b=d.uint32();switch(b>>>3){case 1:h.codec=d.string();break;case 2:h.cid=d.string();break;case 3:h.enableSimulcastLayers=d.bool();break;default:d.skipType(b&7);break}}return h},fromJSON(a){return{codec:isSet(a.codec)?String(a.codec):"",cid:isSet(a.cid)?String(a.cid):"",enableSimulcastLayers:isSet(a.enableSimulcastLayers)?Boolean(a.enableSimulcastLayers):!1}},toJSON(a){const s={};return a.codec!==void 0&&(s.codec=a.codec),a.cid!==void 0&&(s.cid=a.cid),a.enableSimulcastLayers!==void 0&&(s.enableSimulcastLayers=a.enableSimulcastLayers),s},create(a){return SimulcastCodec.fromPartial(a!=null?a:{})},fromPartial(a){var s,d,c;const h=createBaseSimulcastCodec();return h.codec=(s=a.codec)!==null&&s!==void 0?s:"",h.cid=(d=a.cid)!==null&&d!==void 0?d:"",h.enableSimulcastLayers=(c=a.enableSimulcastLayers)!==null&&c!==void 0?c:!1,h}};function createBaseAddTrackRequest(){return{cid:"",name:"",type:0,width:0,height:0,muted:!1,disableDtx:!1,source:0,layers:[],simulcastCodecs:[],sid:"",stereo:!1,disableRed:!1,encryption:0}}const AddTrackRequest={encode(a){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_m0.Writer.create();a.cid!==""&&s.uint32(10).string(a.cid),a.name!==""&&s.uint32(18).string(a.name),a.type!==0&&s.uint32(24).int32(a.type),a.width!==0&&s.uint32(32).uint32(a.width),a.height!==0&&s.uint32(40).uint32(a.height),a.muted===!0&&s.uint32(48).bool(a.muted),a.disableDtx===!0&&s.uint32(56).bool(a.disableDtx),a.source!==0&&s.uint32(64).int32(a.source);for(const d of a.layers)VideoLayer.encode(d,s.uint32(74).fork()).ldelim();for(const d of a.simulcastCodecs)SimulcastCodec.encode(d,s.uint32(82).fork()).ldelim();return a.sid!==""&&s.uint32(90).string(a.sid),a.stereo===!0&&s.uint32(96).bool(a.stereo),a.disableRed===!0&&s.uint32(104).bool(a.disableRed),a.encryption!==0&&s.uint32(112).int32(a.encryption),s},decode(a,s){const d=a instanceof _m0.Reader?a:new _m0.Reader(a);let c=s===void 0?d.len:d.pos+s;const h=createBaseAddTrackRequest();for(;d.pos<c;){const b=d.uint32();switch(b>>>3){case 1:h.cid=d.string();break;case 2:h.name=d.string();break;case 3:h.type=d.int32();break;case 4:h.width=d.uint32();break;case 5:h.height=d.uint32();break;case 6:h.muted=d.bool();break;case 7:h.disableDtx=d.bool();break;case 8:h.source=d.int32();break;case 9:h.layers.push(VideoLayer.decode(d,d.uint32()));break;case 10:h.simulcastCodecs.push(SimulcastCodec.decode(d,d.uint32()));break;case 11:h.sid=d.string();break;case 12:h.stereo=d.bool();break;case 13:h.disableRed=d.bool();break;case 14:h.encryption=d.int32();break;default:d.skipType(b&7);break}}return h},fromJSON(a){return{cid:isSet(a.cid)?String(a.cid):"",name:isSet(a.name)?String(a.name):"",type:isSet(a.type)?trackTypeFromJSON(a.type):0,width:isSet(a.width)?Number(a.width):0,height:isSet(a.height)?Number(a.height):0,muted:isSet(a.muted)?Boolean(a.muted):!1,disableDtx:isSet(a.disableDtx)?Boolean(a.disableDtx):!1,source:isSet(a.source)?trackSourceFromJSON(a.source):0,layers:Array.isArray(a==null?void 0:a.layers)?a.layers.map(s=>VideoLayer.fromJSON(s)):[],simulcastCodecs:Array.isArray(a==null?void 0:a.simulcastCodecs)?a.simulcastCodecs.map(s=>SimulcastCodec.fromJSON(s)):[],sid:isSet(a.sid)?String(a.sid):"",stereo:isSet(a.stereo)?Boolean(a.stereo):!1,disableRed:isSet(a.disableRed)?Boolean(a.disableRed):!1,encryption:isSet(a.encryption)?encryption_TypeFromJSON(a.encryption):0}},toJSON(a){const s={};return a.cid!==void 0&&(s.cid=a.cid),a.name!==void 0&&(s.name=a.name),a.type!==void 0&&(s.type=trackTypeToJSON(a.type)),a.width!==void 0&&(s.width=Math.round(a.width)),a.height!==void 0&&(s.height=Math.round(a.height)),a.muted!==void 0&&(s.muted=a.muted),a.disableDtx!==void 0&&(s.disableDtx=a.disableDtx),a.source!==void 0&&(s.source=trackSourceToJSON(a.source)),a.layers?s.layers=a.layers.map(d=>d?VideoLayer.toJSON(d):void 0):s.layers=[],a.simulcastCodecs?s.simulcastCodecs=a.simulcastCodecs.map(d=>d?SimulcastCodec.toJSON(d):void 0):s.simulcastCodecs=[],a.sid!==void 0&&(s.sid=a.sid),a.stereo!==void 0&&(s.stereo=a.stereo),a.disableRed!==void 0&&(s.disableRed=a.disableRed),a.encryption!==void 0&&(s.encryption=encryption_TypeToJSON(a.encryption)),s},create(a){return AddTrackRequest.fromPartial(a!=null?a:{})},fromPartial(a){var s,d,c,h,b,_,$,_e,tt,rt,ot,it,st,lt;const dt=createBaseAddTrackRequest();return dt.cid=(s=a.cid)!==null&&s!==void 0?s:"",dt.name=(d=a.name)!==null&&d!==void 0?d:"",dt.type=(c=a.type)!==null&&c!==void 0?c:0,dt.width=(h=a.width)!==null&&h!==void 0?h:0,dt.height=(b=a.height)!==null&&b!==void 0?b:0,dt.muted=(_=a.muted)!==null&&_!==void 0?_:!1,dt.disableDtx=($=a.disableDtx)!==null&&$!==void 0?$:!1,dt.source=(_e=a.source)!==null&&_e!==void 0?_e:0,dt.layers=((tt=a.layers)===null||tt===void 0?void 0:tt.map(ut=>VideoLayer.fromPartial(ut)))||[],dt.simulcastCodecs=((rt=a.simulcastCodecs)===null||rt===void 0?void 0:rt.map(ut=>SimulcastCodec.fromPartial(ut)))||[],dt.sid=(ot=a.sid)!==null&&ot!==void 0?ot:"",dt.stereo=(it=a.stereo)!==null&&it!==void 0?it:!1,dt.disableRed=(st=a.disableRed)!==null&&st!==void 0?st:!1,dt.encryption=(lt=a.encryption)!==null&&lt!==void 0?lt:0,dt}};function createBaseTrickleRequest(){return{candidateInit:"",target:0}}const TrickleRequest={encode(a){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_m0.Writer.create();return a.candidateInit!==""&&s.uint32(10).string(a.candidateInit),a.target!==0&&s.uint32(16).int32(a.target),s},decode(a,s){const d=a instanceof _m0.Reader?a:new _m0.Reader(a);let c=s===void 0?d.len:d.pos+s;const h=createBaseTrickleRequest();for(;d.pos<c;){const b=d.uint32();switch(b>>>3){case 1:h.candidateInit=d.string();break;case 2:h.target=d.int32();break;default:d.skipType(b&7);break}}return h},fromJSON(a){return{candidateInit:isSet(a.candidateInit)?String(a.candidateInit):"",target:isSet(a.target)?signalTargetFromJSON(a.target):0}},toJSON(a){const s={};return a.candidateInit!==void 0&&(s.candidateInit=a.candidateInit),a.target!==void 0&&(s.target=signalTargetToJSON(a.target)),s},create(a){return TrickleRequest.fromPartial(a!=null?a:{})},fromPartial(a){var s,d;const c=createBaseTrickleRequest();return c.candidateInit=(s=a.candidateInit)!==null&&s!==void 0?s:"",c.target=(d=a.target)!==null&&d!==void 0?d:0,c}};function createBaseMuteTrackRequest(){return{sid:"",muted:!1}}const MuteTrackRequest={encode(a){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_m0.Writer.create();return a.sid!==""&&s.uint32(10).string(a.sid),a.muted===!0&&s.uint32(16).bool(a.muted),s},decode(a,s){const d=a instanceof _m0.Reader?a:new _m0.Reader(a);let c=s===void 0?d.len:d.pos+s;const h=createBaseMuteTrackRequest();for(;d.pos<c;){const b=d.uint32();switch(b>>>3){case 1:h.sid=d.string();break;case 2:h.muted=d.bool();break;default:d.skipType(b&7);break}}return h},fromJSON(a){return{sid:isSet(a.sid)?String(a.sid):"",muted:isSet(a.muted)?Boolean(a.muted):!1}},toJSON(a){const s={};return a.sid!==void 0&&(s.sid=a.sid),a.muted!==void 0&&(s.muted=a.muted),s},create(a){return MuteTrackRequest.fromPartial(a!=null?a:{})},fromPartial(a){var s,d;const c=createBaseMuteTrackRequest();return c.sid=(s=a.sid)!==null&&s!==void 0?s:"",c.muted=(d=a.muted)!==null&&d!==void 0?d:!1,c}};function createBaseJoinResponse(){return{room:void 0,participant:void 0,otherParticipants:[],serverVersion:"",iceServers:[],subscriberPrimary:!1,alternativeUrl:"",clientConfiguration:void 0,serverRegion:"",pingTimeout:0,pingInterval:0,serverInfo:void 0}}const JoinResponse={encode(a){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_m0.Writer.create();a.room!==void 0&&Room$1.encode(a.room,s.uint32(10).fork()).ldelim(),a.participant!==void 0&&ParticipantInfo.encode(a.participant,s.uint32(18).fork()).ldelim();for(const d of a.otherParticipants)ParticipantInfo.encode(d,s.uint32(26).fork()).ldelim();a.serverVersion!==""&&s.uint32(34).string(a.serverVersion);for(const d of a.iceServers)ICEServer.encode(d,s.uint32(42).fork()).ldelim();return a.subscriberPrimary===!0&&s.uint32(48).bool(a.subscriberPrimary),a.alternativeUrl!==""&&s.uint32(58).string(a.alternativeUrl),a.clientConfiguration!==void 0&&ClientConfiguration.encode(a.clientConfiguration,s.uint32(66).fork()).ldelim(),a.serverRegion!==""&&s.uint32(74).string(a.serverRegion),a.pingTimeout!==0&&s.uint32(80).int32(a.pingTimeout),a.pingInterval!==0&&s.uint32(88).int32(a.pingInterval),a.serverInfo!==void 0&&ServerInfo.encode(a.serverInfo,s.uint32(98).fork()).ldelim(),s},decode(a,s){const d=a instanceof _m0.Reader?a:new _m0.Reader(a);let c=s===void 0?d.len:d.pos+s;const h=createBaseJoinResponse();for(;d.pos<c;){const b=d.uint32();switch(b>>>3){case 1:h.room=Room$1.decode(d,d.uint32());break;case 2:h.participant=ParticipantInfo.decode(d,d.uint32());break;case 3:h.otherParticipants.push(ParticipantInfo.decode(d,d.uint32()));break;case 4:h.serverVersion=d.string();break;case 5:h.iceServers.push(ICEServer.decode(d,d.uint32()));break;case 6:h.subscriberPrimary=d.bool();break;case 7:h.alternativeUrl=d.string();break;case 8:h.clientConfiguration=ClientConfiguration.decode(d,d.uint32());break;case 9:h.serverRegion=d.string();break;case 10:h.pingTimeout=d.int32();break;case 11:h.pingInterval=d.int32();break;case 12:h.serverInfo=ServerInfo.decode(d,d.uint32());break;default:d.skipType(b&7);break}}return h},fromJSON(a){return{room:isSet(a.room)?Room$1.fromJSON(a.room):void 0,participant:isSet(a.participant)?ParticipantInfo.fromJSON(a.participant):void 0,otherParticipants:Array.isArray(a==null?void 0:a.otherParticipants)?a.otherParticipants.map(s=>ParticipantInfo.fromJSON(s)):[],serverVersion:isSet(a.serverVersion)?String(a.serverVersion):"",iceServers:Array.isArray(a==null?void 0:a.iceServers)?a.iceServers.map(s=>ICEServer.fromJSON(s)):[],subscriberPrimary:isSet(a.subscriberPrimary)?Boolean(a.subscriberPrimary):!1,alternativeUrl:isSet(a.alternativeUrl)?String(a.alternativeUrl):"",clientConfiguration:isSet(a.clientConfiguration)?ClientConfiguration.fromJSON(a.clientConfiguration):void 0,serverRegion:isSet(a.serverRegion)?String(a.serverRegion):"",pingTimeout:isSet(a.pingTimeout)?Number(a.pingTimeout):0,pingInterval:isSet(a.pingInterval)?Number(a.pingInterval):0,serverInfo:isSet(a.serverInfo)?ServerInfo.fromJSON(a.serverInfo):void 0}},toJSON(a){const s={};return a.room!==void 0&&(s.room=a.room?Room$1.toJSON(a.room):void 0),a.participant!==void 0&&(s.participant=a.participant?ParticipantInfo.toJSON(a.participant):void 0),a.otherParticipants?s.otherParticipants=a.otherParticipants.map(d=>d?ParticipantInfo.toJSON(d):void 0):s.otherParticipants=[],a.serverVersion!==void 0&&(s.serverVersion=a.serverVersion),a.iceServers?s.iceServers=a.iceServers.map(d=>d?ICEServer.toJSON(d):void 0):s.iceServers=[],a.subscriberPrimary!==void 0&&(s.subscriberPrimary=a.subscriberPrimary),a.alternativeUrl!==void 0&&(s.alternativeUrl=a.alternativeUrl),a.clientConfiguration!==void 0&&(s.clientConfiguration=a.clientConfiguration?ClientConfiguration.toJSON(a.clientConfiguration):void 0),a.serverRegion!==void 0&&(s.serverRegion=a.serverRegion),a.pingTimeout!==void 0&&(s.pingTimeout=Math.round(a.pingTimeout)),a.pingInterval!==void 0&&(s.pingInterval=Math.round(a.pingInterval)),a.serverInfo!==void 0&&(s.serverInfo=a.serverInfo?ServerInfo.toJSON(a.serverInfo):void 0),s},create(a){return JoinResponse.fromPartial(a!=null?a:{})},fromPartial(a){var s,d,c,h,b,_,$,_e;const tt=createBaseJoinResponse();return tt.room=a.room!==void 0&&a.room!==null?Room$1.fromPartial(a.room):void 0,tt.participant=a.participant!==void 0&&a.participant!==null?ParticipantInfo.fromPartial(a.participant):void 0,tt.otherParticipants=((s=a.otherParticipants)===null||s===void 0?void 0:s.map(rt=>ParticipantInfo.fromPartial(rt)))||[],tt.serverVersion=(d=a.serverVersion)!==null&&d!==void 0?d:"",tt.iceServers=((c=a.iceServers)===null||c===void 0?void 0:c.map(rt=>ICEServer.fromPartial(rt)))||[],tt.subscriberPrimary=(h=a.subscriberPrimary)!==null&&h!==void 0?h:!1,tt.alternativeUrl=(b=a.alternativeUrl)!==null&&b!==void 0?b:"",tt.clientConfiguration=a.clientConfiguration!==void 0&&a.clientConfiguration!==null?ClientConfiguration.fromPartial(a.clientConfiguration):void 0,tt.serverRegion=(_=a.serverRegion)!==null&&_!==void 0?_:"",tt.pingTimeout=($=a.pingTimeout)!==null&&$!==void 0?$:0,tt.pingInterval=(_e=a.pingInterval)!==null&&_e!==void 0?_e:0,tt.serverInfo=a.serverInfo!==void 0&&a.serverInfo!==null?ServerInfo.fromPartial(a.serverInfo):void 0,tt}};function createBaseReconnectResponse(){return{iceServers:[],clientConfiguration:void 0}}const ReconnectResponse={encode(a){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_m0.Writer.create();for(const d of a.iceServers)ICEServer.encode(d,s.uint32(10).fork()).ldelim();return a.clientConfiguration!==void 0&&ClientConfiguration.encode(a.clientConfiguration,s.uint32(18).fork()).ldelim(),s},decode(a,s){const d=a instanceof _m0.Reader?a:new _m0.Reader(a);let c=s===void 0?d.len:d.pos+s;const h=createBaseReconnectResponse();for(;d.pos<c;){const b=d.uint32();switch(b>>>3){case 1:h.iceServers.push(ICEServer.decode(d,d.uint32()));break;case 2:h.clientConfiguration=ClientConfiguration.decode(d,d.uint32());break;default:d.skipType(b&7);break}}return h},fromJSON(a){return{iceServers:Array.isArray(a==null?void 0:a.iceServers)?a.iceServers.map(s=>ICEServer.fromJSON(s)):[],clientConfiguration:isSet(a.clientConfiguration)?ClientConfiguration.fromJSON(a.clientConfiguration):void 0}},toJSON(a){const s={};return a.iceServers?s.iceServers=a.iceServers.map(d=>d?ICEServer.toJSON(d):void 0):s.iceServers=[],a.clientConfiguration!==void 0&&(s.clientConfiguration=a.clientConfiguration?ClientConfiguration.toJSON(a.clientConfiguration):void 0),s},create(a){return ReconnectResponse.fromPartial(a!=null?a:{})},fromPartial(a){var s;const d=createBaseReconnectResponse();return d.iceServers=((s=a.iceServers)===null||s===void 0?void 0:s.map(c=>ICEServer.fromPartial(c)))||[],d.clientConfiguration=a.clientConfiguration!==void 0&&a.clientConfiguration!==null?ClientConfiguration.fromPartial(a.clientConfiguration):void 0,d}};function createBaseTrackPublishedResponse(){return{cid:"",track:void 0}}const TrackPublishedResponse={encode(a){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_m0.Writer.create();return a.cid!==""&&s.uint32(10).string(a.cid),a.track!==void 0&&TrackInfo.encode(a.track,s.uint32(18).fork()).ldelim(),s},decode(a,s){const d=a instanceof _m0.Reader?a:new _m0.Reader(a);let c=s===void 0?d.len:d.pos+s;const h=createBaseTrackPublishedResponse();for(;d.pos<c;){const b=d.uint32();switch(b>>>3){case 1:h.cid=d.string();break;case 2:h.track=TrackInfo.decode(d,d.uint32());break;default:d.skipType(b&7);break}}return h},fromJSON(a){return{cid:isSet(a.cid)?String(a.cid):"",track:isSet(a.track)?TrackInfo.fromJSON(a.track):void 0}},toJSON(a){const s={};return a.cid!==void 0&&(s.cid=a.cid),a.track!==void 0&&(s.track=a.track?TrackInfo.toJSON(a.track):void 0),s},create(a){return TrackPublishedResponse.fromPartial(a!=null?a:{})},fromPartial(a){var s;const d=createBaseTrackPublishedResponse();return d.cid=(s=a.cid)!==null&&s!==void 0?s:"",d.track=a.track!==void 0&&a.track!==null?TrackInfo.fromPartial(a.track):void 0,d}};function createBaseTrackUnpublishedResponse(){return{trackSid:""}}const TrackUnpublishedResponse={encode(a){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_m0.Writer.create();return a.trackSid!==""&&s.uint32(10).string(a.trackSid),s},decode(a,s){const d=a instanceof _m0.Reader?a:new _m0.Reader(a);let c=s===void 0?d.len:d.pos+s;const h=createBaseTrackUnpublishedResponse();for(;d.pos<c;){const b=d.uint32();switch(b>>>3){case 1:h.trackSid=d.string();break;default:d.skipType(b&7);break}}return h},fromJSON(a){return{trackSid:isSet(a.trackSid)?String(a.trackSid):""}},toJSON(a){const s={};return a.trackSid!==void 0&&(s.trackSid=a.trackSid),s},create(a){return TrackUnpublishedResponse.fromPartial(a!=null?a:{})},fromPartial(a){var s;const d=createBaseTrackUnpublishedResponse();return d.trackSid=(s=a.trackSid)!==null&&s!==void 0?s:"",d}};function createBaseSessionDescription(){return{type:"",sdp:""}}const SessionDescription={encode(a){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_m0.Writer.create();return a.type!==""&&s.uint32(10).string(a.type),a.sdp!==""&&s.uint32(18).string(a.sdp),s},decode(a,s){const d=a instanceof _m0.Reader?a:new _m0.Reader(a);let c=s===void 0?d.len:d.pos+s;const h=createBaseSessionDescription();for(;d.pos<c;){const b=d.uint32();switch(b>>>3){case 1:h.type=d.string();break;case 2:h.sdp=d.string();break;default:d.skipType(b&7);break}}return h},fromJSON(a){return{type:isSet(a.type)?String(a.type):"",sdp:isSet(a.sdp)?String(a.sdp):""}},toJSON(a){const s={};return a.type!==void 0&&(s.type=a.type),a.sdp!==void 0&&(s.sdp=a.sdp),s},create(a){return SessionDescription.fromPartial(a!=null?a:{})},fromPartial(a){var s,d;const c=createBaseSessionDescription();return c.type=(s=a.type)!==null&&s!==void 0?s:"",c.sdp=(d=a.sdp)!==null&&d!==void 0?d:"",c}};function createBaseParticipantUpdate(){return{participants:[]}}const ParticipantUpdate={encode(a){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_m0.Writer.create();for(const d of a.participants)ParticipantInfo.encode(d,s.uint32(10).fork()).ldelim();return s},decode(a,s){const d=a instanceof _m0.Reader?a:new _m0.Reader(a);let c=s===void 0?d.len:d.pos+s;const h=createBaseParticipantUpdate();for(;d.pos<c;){const b=d.uint32();switch(b>>>3){case 1:h.participants.push(ParticipantInfo.decode(d,d.uint32()));break;default:d.skipType(b&7);break}}return h},fromJSON(a){return{participants:Array.isArray(a==null?void 0:a.participants)?a.participants.map(s=>ParticipantInfo.fromJSON(s)):[]}},toJSON(a){const s={};return a.participants?s.participants=a.participants.map(d=>d?ParticipantInfo.toJSON(d):void 0):s.participants=[],s},create(a){return ParticipantUpdate.fromPartial(a!=null?a:{})},fromPartial(a){var s;const d=createBaseParticipantUpdate();return d.participants=((s=a.participants)===null||s===void 0?void 0:s.map(c=>ParticipantInfo.fromPartial(c)))||[],d}};function createBaseUpdateSubscription(){return{trackSids:[],subscribe:!1,participantTracks:[]}}const UpdateSubscription={encode(a){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_m0.Writer.create();for(const d of a.trackSids)s.uint32(10).string(d);a.subscribe===!0&&s.uint32(16).bool(a.subscribe);for(const d of a.participantTracks)ParticipantTracks.encode(d,s.uint32(26).fork()).ldelim();return s},decode(a,s){const d=a instanceof _m0.Reader?a:new _m0.Reader(a);let c=s===void 0?d.len:d.pos+s;const h=createBaseUpdateSubscription();for(;d.pos<c;){const b=d.uint32();switch(b>>>3){case 1:h.trackSids.push(d.string());break;case 2:h.subscribe=d.bool();break;case 3:h.participantTracks.push(ParticipantTracks.decode(d,d.uint32()));break;default:d.skipType(b&7);break}}return h},fromJSON(a){return{trackSids:Array.isArray(a==null?void 0:a.trackSids)?a.trackSids.map(s=>String(s)):[],subscribe:isSet(a.subscribe)?Boolean(a.subscribe):!1,participantTracks:Array.isArray(a==null?void 0:a.participantTracks)?a.participantTracks.map(s=>ParticipantTracks.fromJSON(s)):[]}},toJSON(a){const s={};return a.trackSids?s.trackSids=a.trackSids.map(d=>d):s.trackSids=[],a.subscribe!==void 0&&(s.subscribe=a.subscribe),a.participantTracks?s.participantTracks=a.participantTracks.map(d=>d?ParticipantTracks.toJSON(d):void 0):s.participantTracks=[],s},create(a){return UpdateSubscription.fromPartial(a!=null?a:{})},fromPartial(a){var s,d,c;const h=createBaseUpdateSubscription();return h.trackSids=((s=a.trackSids)===null||s===void 0?void 0:s.map(b=>b))||[],h.subscribe=(d=a.subscribe)!==null&&d!==void 0?d:!1,h.participantTracks=((c=a.participantTracks)===null||c===void 0?void 0:c.map(b=>ParticipantTracks.fromPartial(b)))||[],h}};function createBaseUpdateTrackSettings(){return{trackSids:[],disabled:!1,quality:0,width:0,height:0,fps:0,priority:0}}const UpdateTrackSettings={encode(a){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_m0.Writer.create();for(const d of a.trackSids)s.uint32(10).string(d);return a.disabled===!0&&s.uint32(24).bool(a.disabled),a.quality!==0&&s.uint32(32).int32(a.quality),a.width!==0&&s.uint32(40).uint32(a.width),a.height!==0&&s.uint32(48).uint32(a.height),a.fps!==0&&s.uint32(56).uint32(a.fps),a.priority!==0&&s.uint32(64).uint32(a.priority),s},decode(a,s){const d=a instanceof _m0.Reader?a:new _m0.Reader(a);let c=s===void 0?d.len:d.pos+s;const h=createBaseUpdateTrackSettings();for(;d.pos<c;){const b=d.uint32();switch(b>>>3){case 1:h.trackSids.push(d.string());break;case 3:h.disabled=d.bool();break;case 4:h.quality=d.int32();break;case 5:h.width=d.uint32();break;case 6:h.height=d.uint32();break;case 7:h.fps=d.uint32();break;case 8:h.priority=d.uint32();break;default:d.skipType(b&7);break}}return h},fromJSON(a){return{trackSids:Array.isArray(a==null?void 0:a.trackSids)?a.trackSids.map(s=>String(s)):[],disabled:isSet(a.disabled)?Boolean(a.disabled):!1,quality:isSet(a.quality)?videoQualityFromJSON(a.quality):0,width:isSet(a.width)?Number(a.width):0,height:isSet(a.height)?Number(a.height):0,fps:isSet(a.fps)?Number(a.fps):0,priority:isSet(a.priority)?Number(a.priority):0}},toJSON(a){const s={};return a.trackSids?s.trackSids=a.trackSids.map(d=>d):s.trackSids=[],a.disabled!==void 0&&(s.disabled=a.disabled),a.quality!==void 0&&(s.quality=videoQualityToJSON(a.quality)),a.width!==void 0&&(s.width=Math.round(a.width)),a.height!==void 0&&(s.height=Math.round(a.height)),a.fps!==void 0&&(s.fps=Math.round(a.fps)),a.priority!==void 0&&(s.priority=Math.round(a.priority)),s},create(a){return UpdateTrackSettings.fromPartial(a!=null?a:{})},fromPartial(a){var s,d,c,h,b,_,$;const _e=createBaseUpdateTrackSettings();return _e.trackSids=((s=a.trackSids)===null||s===void 0?void 0:s.map(tt=>tt))||[],_e.disabled=(d=a.disabled)!==null&&d!==void 0?d:!1,_e.quality=(c=a.quality)!==null&&c!==void 0?c:0,_e.width=(h=a.width)!==null&&h!==void 0?h:0,_e.height=(b=a.height)!==null&&b!==void 0?b:0,_e.fps=(_=a.fps)!==null&&_!==void 0?_:0,_e.priority=($=a.priority)!==null&&$!==void 0?$:0,_e}};function createBaseLeaveRequest(){return{canReconnect:!1,reason:0}}const LeaveRequest={encode(a){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_m0.Writer.create();return a.canReconnect===!0&&s.uint32(8).bool(a.canReconnect),a.reason!==0&&s.uint32(16).int32(a.reason),s},decode(a,s){const d=a instanceof _m0.Reader?a:new _m0.Reader(a);let c=s===void 0?d.len:d.pos+s;const h=createBaseLeaveRequest();for(;d.pos<c;){const b=d.uint32();switch(b>>>3){case 1:h.canReconnect=d.bool();break;case 2:h.reason=d.int32();break;default:d.skipType(b&7);break}}return h},fromJSON(a){return{canReconnect:isSet(a.canReconnect)?Boolean(a.canReconnect):!1,reason:isSet(a.reason)?disconnectReasonFromJSON(a.reason):0}},toJSON(a){const s={};return a.canReconnect!==void 0&&(s.canReconnect=a.canReconnect),a.reason!==void 0&&(s.reason=disconnectReasonToJSON(a.reason)),s},create(a){return LeaveRequest.fromPartial(a!=null?a:{})},fromPartial(a){var s,d;const c=createBaseLeaveRequest();return c.canReconnect=(s=a.canReconnect)!==null&&s!==void 0?s:!1,c.reason=(d=a.reason)!==null&&d!==void 0?d:0,c}};function createBaseUpdateVideoLayers(){return{trackSid:"",layers:[]}}const UpdateVideoLayers={encode(a){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_m0.Writer.create();a.trackSid!==""&&s.uint32(10).string(a.trackSid);for(const d of a.layers)VideoLayer.encode(d,s.uint32(18).fork()).ldelim();return s},decode(a,s){const d=a instanceof _m0.Reader?a:new _m0.Reader(a);let c=s===void 0?d.len:d.pos+s;const h=createBaseUpdateVideoLayers();for(;d.pos<c;){const b=d.uint32();switch(b>>>3){case 1:h.trackSid=d.string();break;case 2:h.layers.push(VideoLayer.decode(d,d.uint32()));break;default:d.skipType(b&7);break}}return h},fromJSON(a){return{trackSid:isSet(a.trackSid)?String(a.trackSid):"",layers:Array.isArray(a==null?void 0:a.layers)?a.layers.map(s=>VideoLayer.fromJSON(s)):[]}},toJSON(a){const s={};return a.trackSid!==void 0&&(s.trackSid=a.trackSid),a.layers?s.layers=a.layers.map(d=>d?VideoLayer.toJSON(d):void 0):s.layers=[],s},create(a){return UpdateVideoLayers.fromPartial(a!=null?a:{})},fromPartial(a){var s,d;const c=createBaseUpdateVideoLayers();return c.trackSid=(s=a.trackSid)!==null&&s!==void 0?s:"",c.layers=((d=a.layers)===null||d===void 0?void 0:d.map(h=>VideoLayer.fromPartial(h)))||[],c}};function createBaseUpdateParticipantMetadata(){return{metadata:""}}const UpdateParticipantMetadata={encode(a){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_m0.Writer.create();return a.metadata!==""&&s.uint32(10).string(a.metadata),s},decode(a,s){const d=a instanceof _m0.Reader?a:new _m0.Reader(a);let c=s===void 0?d.len:d.pos+s;const h=createBaseUpdateParticipantMetadata();for(;d.pos<c;){const b=d.uint32();switch(b>>>3){case 1:h.metadata=d.string();break;default:d.skipType(b&7);break}}return h},fromJSON(a){return{metadata:isSet(a.metadata)?String(a.metadata):""}},toJSON(a){const s={};return a.metadata!==void 0&&(s.metadata=a.metadata),s},create(a){return UpdateParticipantMetadata.fromPartial(a!=null?a:{})},fromPartial(a){var s;const d=createBaseUpdateParticipantMetadata();return d.metadata=(s=a.metadata)!==null&&s!==void 0?s:"",d}};function createBaseICEServer(){return{urls:[],username:"",credential:""}}const ICEServer={encode(a){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_m0.Writer.create();for(const d of a.urls)s.uint32(10).string(d);return a.username!==""&&s.uint32(18).string(a.username),a.credential!==""&&s.uint32(26).string(a.credential),s},decode(a,s){const d=a instanceof _m0.Reader?a:new _m0.Reader(a);let c=s===void 0?d.len:d.pos+s;const h=createBaseICEServer();for(;d.pos<c;){const b=d.uint32();switch(b>>>3){case 1:h.urls.push(d.string());break;case 2:h.username=d.string();break;case 3:h.credential=d.string();break;default:d.skipType(b&7);break}}return h},fromJSON(a){return{urls:Array.isArray(a==null?void 0:a.urls)?a.urls.map(s=>String(s)):[],username:isSet(a.username)?String(a.username):"",credential:isSet(a.credential)?String(a.credential):""}},toJSON(a){const s={};return a.urls?s.urls=a.urls.map(d=>d):s.urls=[],a.username!==void 0&&(s.username=a.username),a.credential!==void 0&&(s.credential=a.credential),s},create(a){return ICEServer.fromPartial(a!=null?a:{})},fromPartial(a){var s,d,c;const h=createBaseICEServer();return h.urls=((s=a.urls)===null||s===void 0?void 0:s.map(b=>b))||[],h.username=(d=a.username)!==null&&d!==void 0?d:"",h.credential=(c=a.credential)!==null&&c!==void 0?c:"",h}};function createBaseSpeakersChanged(){return{speakers:[]}}const SpeakersChanged={encode(a){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_m0.Writer.create();for(const d of a.speakers)SpeakerInfo.encode(d,s.uint32(10).fork()).ldelim();return s},decode(a,s){const d=a instanceof _m0.Reader?a:new _m0.Reader(a);let c=s===void 0?d.len:d.pos+s;const h=createBaseSpeakersChanged();for(;d.pos<c;){const b=d.uint32();switch(b>>>3){case 1:h.speakers.push(SpeakerInfo.decode(d,d.uint32()));break;default:d.skipType(b&7);break}}return h},fromJSON(a){return{speakers:Array.isArray(a==null?void 0:a.speakers)?a.speakers.map(s=>SpeakerInfo.fromJSON(s)):[]}},toJSON(a){const s={};return a.speakers?s.speakers=a.speakers.map(d=>d?SpeakerInfo.toJSON(d):void 0):s.speakers=[],s},create(a){return SpeakersChanged.fromPartial(a!=null?a:{})},fromPartial(a){var s;const d=createBaseSpeakersChanged();return d.speakers=((s=a.speakers)===null||s===void 0?void 0:s.map(c=>SpeakerInfo.fromPartial(c)))||[],d}};function createBaseRoomUpdate(){return{room:void 0}}const RoomUpdate={encode(a){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_m0.Writer.create();return a.room!==void 0&&Room$1.encode(a.room,s.uint32(10).fork()).ldelim(),s},decode(a,s){const d=a instanceof _m0.Reader?a:new _m0.Reader(a);let c=s===void 0?d.len:d.pos+s;const h=createBaseRoomUpdate();for(;d.pos<c;){const b=d.uint32();switch(b>>>3){case 1:h.room=Room$1.decode(d,d.uint32());break;default:d.skipType(b&7);break}}return h},fromJSON(a){return{room:isSet(a.room)?Room$1.fromJSON(a.room):void 0}},toJSON(a){const s={};return a.room!==void 0&&(s.room=a.room?Room$1.toJSON(a.room):void 0),s},create(a){return RoomUpdate.fromPartial(a!=null?a:{})},fromPartial(a){const s=createBaseRoomUpdate();return s.room=a.room!==void 0&&a.room!==null?Room$1.fromPartial(a.room):void 0,s}};function createBaseConnectionQualityInfo(){return{participantSid:"",quality:0,score:0}}const ConnectionQualityInfo={encode(a){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_m0.Writer.create();return a.participantSid!==""&&s.uint32(10).string(a.participantSid),a.quality!==0&&s.uint32(16).int32(a.quality),a.score!==0&&s.uint32(29).float(a.score),s},decode(a,s){const d=a instanceof _m0.Reader?a:new _m0.Reader(a);let c=s===void 0?d.len:d.pos+s;const h=createBaseConnectionQualityInfo();for(;d.pos<c;){const b=d.uint32();switch(b>>>3){case 1:h.participantSid=d.string();break;case 2:h.quality=d.int32();break;case 3:h.score=d.float();break;default:d.skipType(b&7);break}}return h},fromJSON(a){return{participantSid:isSet(a.participantSid)?String(a.participantSid):"",quality:isSet(a.quality)?connectionQualityFromJSON(a.quality):0,score:isSet(a.score)?Number(a.score):0}},toJSON(a){const s={};return a.participantSid!==void 0&&(s.participantSid=a.participantSid),a.quality!==void 0&&(s.quality=connectionQualityToJSON(a.quality)),a.score!==void 0&&(s.score=a.score),s},create(a){return ConnectionQualityInfo.fromPartial(a!=null?a:{})},fromPartial(a){var s,d,c;const h=createBaseConnectionQualityInfo();return h.participantSid=(s=a.participantSid)!==null&&s!==void 0?s:"",h.quality=(d=a.quality)!==null&&d!==void 0?d:0,h.score=(c=a.score)!==null&&c!==void 0?c:0,h}};function createBaseConnectionQualityUpdate(){return{updates:[]}}const ConnectionQualityUpdate={encode(a){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_m0.Writer.create();for(const d of a.updates)ConnectionQualityInfo.encode(d,s.uint32(10).fork()).ldelim();return s},decode(a,s){const d=a instanceof _m0.Reader?a:new _m0.Reader(a);let c=s===void 0?d.len:d.pos+s;const h=createBaseConnectionQualityUpdate();for(;d.pos<c;){const b=d.uint32();switch(b>>>3){case 1:h.updates.push(ConnectionQualityInfo.decode(d,d.uint32()));break;default:d.skipType(b&7);break}}return h},fromJSON(a){return{updates:Array.isArray(a==null?void 0:a.updates)?a.updates.map(s=>ConnectionQualityInfo.fromJSON(s)):[]}},toJSON(a){const s={};return a.updates?s.updates=a.updates.map(d=>d?ConnectionQualityInfo.toJSON(d):void 0):s.updates=[],s},create(a){return ConnectionQualityUpdate.fromPartial(a!=null?a:{})},fromPartial(a){var s;const d=createBaseConnectionQualityUpdate();return d.updates=((s=a.updates)===null||s===void 0?void 0:s.map(c=>ConnectionQualityInfo.fromPartial(c)))||[],d}};function createBaseStreamStateInfo(){return{participantSid:"",trackSid:"",state:0}}const StreamStateInfo={encode(a){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_m0.Writer.create();return a.participantSid!==""&&s.uint32(10).string(a.participantSid),a.trackSid!==""&&s.uint32(18).string(a.trackSid),a.state!==0&&s.uint32(24).int32(a.state),s},decode(a,s){const d=a instanceof _m0.Reader?a:new _m0.Reader(a);let c=s===void 0?d.len:d.pos+s;const h=createBaseStreamStateInfo();for(;d.pos<c;){const b=d.uint32();switch(b>>>3){case 1:h.participantSid=d.string();break;case 2:h.trackSid=d.string();break;case 3:h.state=d.int32();break;default:d.skipType(b&7);break}}return h},fromJSON(a){return{participantSid:isSet(a.participantSid)?String(a.participantSid):"",trackSid:isSet(a.trackSid)?String(a.trackSid):"",state:isSet(a.state)?streamStateFromJSON(a.state):0}},toJSON(a){const s={};return a.participantSid!==void 0&&(s.participantSid=a.participantSid),a.trackSid!==void 0&&(s.trackSid=a.trackSid),a.state!==void 0&&(s.state=streamStateToJSON(a.state)),s},create(a){return StreamStateInfo.fromPartial(a!=null?a:{})},fromPartial(a){var s,d,c;const h=createBaseStreamStateInfo();return h.participantSid=(s=a.participantSid)!==null&&s!==void 0?s:"",h.trackSid=(d=a.trackSid)!==null&&d!==void 0?d:"",h.state=(c=a.state)!==null&&c!==void 0?c:0,h}};function createBaseStreamStateUpdate(){return{streamStates:[]}}const StreamStateUpdate={encode(a){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_m0.Writer.create();for(const d of a.streamStates)StreamStateInfo.encode(d,s.uint32(10).fork()).ldelim();return s},decode(a,s){const d=a instanceof _m0.Reader?a:new _m0.Reader(a);let c=s===void 0?d.len:d.pos+s;const h=createBaseStreamStateUpdate();for(;d.pos<c;){const b=d.uint32();switch(b>>>3){case 1:h.streamStates.push(StreamStateInfo.decode(d,d.uint32()));break;default:d.skipType(b&7);break}}return h},fromJSON(a){return{streamStates:Array.isArray(a==null?void 0:a.streamStates)?a.streamStates.map(s=>StreamStateInfo.fromJSON(s)):[]}},toJSON(a){const s={};return a.streamStates?s.streamStates=a.streamStates.map(d=>d?StreamStateInfo.toJSON(d):void 0):s.streamStates=[],s},create(a){return StreamStateUpdate.fromPartial(a!=null?a:{})},fromPartial(a){var s;const d=createBaseStreamStateUpdate();return d.streamStates=((s=a.streamStates)===null||s===void 0?void 0:s.map(c=>StreamStateInfo.fromPartial(c)))||[],d}};function createBaseSubscribedQuality(){return{quality:0,enabled:!1}}const SubscribedQuality={encode(a){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_m0.Writer.create();return a.quality!==0&&s.uint32(8).int32(a.quality),a.enabled===!0&&s.uint32(16).bool(a.enabled),s},decode(a,s){const d=a instanceof _m0.Reader?a:new _m0.Reader(a);let c=s===void 0?d.len:d.pos+s;const h=createBaseSubscribedQuality();for(;d.pos<c;){const b=d.uint32();switch(b>>>3){case 1:h.quality=d.int32();break;case 2:h.enabled=d.bool();break;default:d.skipType(b&7);break}}return h},fromJSON(a){return{quality:isSet(a.quality)?videoQualityFromJSON(a.quality):0,enabled:isSet(a.enabled)?Boolean(a.enabled):!1}},toJSON(a){const s={};return a.quality!==void 0&&(s.quality=videoQualityToJSON(a.quality)),a.enabled!==void 0&&(s.enabled=a.enabled),s},create(a){return SubscribedQuality.fromPartial(a!=null?a:{})},fromPartial(a){var s,d;const c=createBaseSubscribedQuality();return c.quality=(s=a.quality)!==null&&s!==void 0?s:0,c.enabled=(d=a.enabled)!==null&&d!==void 0?d:!1,c}};function createBaseSubscribedCodec(){return{codec:"",qualities:[]}}const SubscribedCodec={encode(a){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_m0.Writer.create();a.codec!==""&&s.uint32(10).string(a.codec);for(const d of a.qualities)SubscribedQuality.encode(d,s.uint32(18).fork()).ldelim();return s},decode(a,s){const d=a instanceof _m0.Reader?a:new _m0.Reader(a);let c=s===void 0?d.len:d.pos+s;const h=createBaseSubscribedCodec();for(;d.pos<c;){const b=d.uint32();switch(b>>>3){case 1:h.codec=d.string();break;case 2:h.qualities.push(SubscribedQuality.decode(d,d.uint32()));break;default:d.skipType(b&7);break}}return h},fromJSON(a){return{codec:isSet(a.codec)?String(a.codec):"",qualities:Array.isArray(a==null?void 0:a.qualities)?a.qualities.map(s=>SubscribedQuality.fromJSON(s)):[]}},toJSON(a){const s={};return a.codec!==void 0&&(s.codec=a.codec),a.qualities?s.qualities=a.qualities.map(d=>d?SubscribedQuality.toJSON(d):void 0):s.qualities=[],s},create(a){return SubscribedCodec.fromPartial(a!=null?a:{})},fromPartial(a){var s,d;const c=createBaseSubscribedCodec();return c.codec=(s=a.codec)!==null&&s!==void 0?s:"",c.qualities=((d=a.qualities)===null||d===void 0?void 0:d.map(h=>SubscribedQuality.fromPartial(h)))||[],c}};function createBaseSubscribedQualityUpdate(){return{trackSid:"",subscribedQualities:[],subscribedCodecs:[]}}const SubscribedQualityUpdate={encode(a){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_m0.Writer.create();a.trackSid!==""&&s.uint32(10).string(a.trackSid);for(const d of a.subscribedQualities)SubscribedQuality.encode(d,s.uint32(18).fork()).ldelim();for(const d of a.subscribedCodecs)SubscribedCodec.encode(d,s.uint32(26).fork()).ldelim();return s},decode(a,s){const d=a instanceof _m0.Reader?a:new _m0.Reader(a);let c=s===void 0?d.len:d.pos+s;const h=createBaseSubscribedQualityUpdate();for(;d.pos<c;){const b=d.uint32();switch(b>>>3){case 1:h.trackSid=d.string();break;case 2:h.subscribedQualities.push(SubscribedQuality.decode(d,d.uint32()));break;case 3:h.subscribedCodecs.push(SubscribedCodec.decode(d,d.uint32()));break;default:d.skipType(b&7);break}}return h},fromJSON(a){return{trackSid:isSet(a.trackSid)?String(a.trackSid):"",subscribedQualities:Array.isArray(a==null?void 0:a.subscribedQualities)?a.subscribedQualities.map(s=>SubscribedQuality.fromJSON(s)):[],subscribedCodecs:Array.isArray(a==null?void 0:a.subscribedCodecs)?a.subscribedCodecs.map(s=>SubscribedCodec.fromJSON(s)):[]}},toJSON(a){const s={};return a.trackSid!==void 0&&(s.trackSid=a.trackSid),a.subscribedQualities?s.subscribedQualities=a.subscribedQualities.map(d=>d?SubscribedQuality.toJSON(d):void 0):s.subscribedQualities=[],a.subscribedCodecs?s.subscribedCodecs=a.subscribedCodecs.map(d=>d?SubscribedCodec.toJSON(d):void 0):s.subscribedCodecs=[],s},create(a){return SubscribedQualityUpdate.fromPartial(a!=null?a:{})},fromPartial(a){var s,d,c;const h=createBaseSubscribedQualityUpdate();return h.trackSid=(s=a.trackSid)!==null&&s!==void 0?s:"",h.subscribedQualities=((d=a.subscribedQualities)===null||d===void 0?void 0:d.map(b=>SubscribedQuality.fromPartial(b)))||[],h.subscribedCodecs=((c=a.subscribedCodecs)===null||c===void 0?void 0:c.map(b=>SubscribedCodec.fromPartial(b)))||[],h}};function createBaseTrackPermission(){return{participantSid:"",allTracks:!1,trackSids:[],participantIdentity:""}}const TrackPermission={encode(a){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_m0.Writer.create();a.participantSid!==""&&s.uint32(10).string(a.participantSid),a.allTracks===!0&&s.uint32(16).bool(a.allTracks);for(const d of a.trackSids)s.uint32(26).string(d);return a.participantIdentity!==""&&s.uint32(34).string(a.participantIdentity),s},decode(a,s){const d=a instanceof _m0.Reader?a:new _m0.Reader(a);let c=s===void 0?d.len:d.pos+s;const h=createBaseTrackPermission();for(;d.pos<c;){const b=d.uint32();switch(b>>>3){case 1:h.participantSid=d.string();break;case 2:h.allTracks=d.bool();break;case 3:h.trackSids.push(d.string());break;case 4:h.participantIdentity=d.string();break;default:d.skipType(b&7);break}}return h},fromJSON(a){return{participantSid:isSet(a.participantSid)?String(a.participantSid):"",allTracks:isSet(a.allTracks)?Boolean(a.allTracks):!1,trackSids:Array.isArray(a==null?void 0:a.trackSids)?a.trackSids.map(s=>String(s)):[],participantIdentity:isSet(a.participantIdentity)?String(a.participantIdentity):""}},toJSON(a){const s={};return a.participantSid!==void 0&&(s.participantSid=a.participantSid),a.allTracks!==void 0&&(s.allTracks=a.allTracks),a.trackSids?s.trackSids=a.trackSids.map(d=>d):s.trackSids=[],a.participantIdentity!==void 0&&(s.participantIdentity=a.participantIdentity),s},create(a){return TrackPermission.fromPartial(a!=null?a:{})},fromPartial(a){var s,d,c,h;const b=createBaseTrackPermission();return b.participantSid=(s=a.participantSid)!==null&&s!==void 0?s:"",b.allTracks=(d=a.allTracks)!==null&&d!==void 0?d:!1,b.trackSids=((c=a.trackSids)===null||c===void 0?void 0:c.map(_=>_))||[],b.participantIdentity=(h=a.participantIdentity)!==null&&h!==void 0?h:"",b}};function createBaseSubscriptionPermission(){return{allParticipants:!1,trackPermissions:[]}}const SubscriptionPermission={encode(a){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_m0.Writer.create();a.allParticipants===!0&&s.uint32(8).bool(a.allParticipants);for(const d of a.trackPermissions)TrackPermission.encode(d,s.uint32(18).fork()).ldelim();return s},decode(a,s){const d=a instanceof _m0.Reader?a:new _m0.Reader(a);let c=s===void 0?d.len:d.pos+s;const h=createBaseSubscriptionPermission();for(;d.pos<c;){const b=d.uint32();switch(b>>>3){case 1:h.allParticipants=d.bool();break;case 2:h.trackPermissions.push(TrackPermission.decode(d,d.uint32()));break;default:d.skipType(b&7);break}}return h},fromJSON(a){return{allParticipants:isSet(a.allParticipants)?Boolean(a.allParticipants):!1,trackPermissions:Array.isArray(a==null?void 0:a.trackPermissions)?a.trackPermissions.map(s=>TrackPermission.fromJSON(s)):[]}},toJSON(a){const s={};return a.allParticipants!==void 0&&(s.allParticipants=a.allParticipants),a.trackPermissions?s.trackPermissions=a.trackPermissions.map(d=>d?TrackPermission.toJSON(d):void 0):s.trackPermissions=[],s},create(a){return SubscriptionPermission.fromPartial(a!=null?a:{})},fromPartial(a){var s,d;const c=createBaseSubscriptionPermission();return c.allParticipants=(s=a.allParticipants)!==null&&s!==void 0?s:!1,c.trackPermissions=((d=a.trackPermissions)===null||d===void 0?void 0:d.map(h=>TrackPermission.fromPartial(h)))||[],c}};function createBaseSubscriptionPermissionUpdate(){return{participantSid:"",trackSid:"",allowed:!1}}const SubscriptionPermissionUpdate={encode(a){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_m0.Writer.create();return a.participantSid!==""&&s.uint32(10).string(a.participantSid),a.trackSid!==""&&s.uint32(18).string(a.trackSid),a.allowed===!0&&s.uint32(24).bool(a.allowed),s},decode(a,s){const d=a instanceof _m0.Reader?a:new _m0.Reader(a);let c=s===void 0?d.len:d.pos+s;const h=createBaseSubscriptionPermissionUpdate();for(;d.pos<c;){const b=d.uint32();switch(b>>>3){case 1:h.participantSid=d.string();break;case 2:h.trackSid=d.string();break;case 3:h.allowed=d.bool();break;default:d.skipType(b&7);break}}return h},fromJSON(a){return{participantSid:isSet(a.participantSid)?String(a.participantSid):"",trackSid:isSet(a.trackSid)?String(a.trackSid):"",allowed:isSet(a.allowed)?Boolean(a.allowed):!1}},toJSON(a){const s={};return a.participantSid!==void 0&&(s.participantSid=a.participantSid),a.trackSid!==void 0&&(s.trackSid=a.trackSid),a.allowed!==void 0&&(s.allowed=a.allowed),s},create(a){return SubscriptionPermissionUpdate.fromPartial(a!=null?a:{})},fromPartial(a){var s,d,c;const h=createBaseSubscriptionPermissionUpdate();return h.participantSid=(s=a.participantSid)!==null&&s!==void 0?s:"",h.trackSid=(d=a.trackSid)!==null&&d!==void 0?d:"",h.allowed=(c=a.allowed)!==null&&c!==void 0?c:!1,h}};function createBaseSyncState(){return{answer:void 0,subscription:void 0,publishTracks:[],dataChannels:[],offer:void 0}}const SyncState={encode(a){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_m0.Writer.create();a.answer!==void 0&&SessionDescription.encode(a.answer,s.uint32(10).fork()).ldelim(),a.subscription!==void 0&&UpdateSubscription.encode(a.subscription,s.uint32(18).fork()).ldelim();for(const d of a.publishTracks)TrackPublishedResponse.encode(d,s.uint32(26).fork()).ldelim();for(const d of a.dataChannels)DataChannelInfo.encode(d,s.uint32(34).fork()).ldelim();return a.offer!==void 0&&SessionDescription.encode(a.offer,s.uint32(42).fork()).ldelim(),s},decode(a,s){const d=a instanceof _m0.Reader?a:new _m0.Reader(a);let c=s===void 0?d.len:d.pos+s;const h=createBaseSyncState();for(;d.pos<c;){const b=d.uint32();switch(b>>>3){case 1:h.answer=SessionDescription.decode(d,d.uint32());break;case 2:h.subscription=UpdateSubscription.decode(d,d.uint32());break;case 3:h.publishTracks.push(TrackPublishedResponse.decode(d,d.uint32()));break;case 4:h.dataChannels.push(DataChannelInfo.decode(d,d.uint32()));break;case 5:h.offer=SessionDescription.decode(d,d.uint32());break;default:d.skipType(b&7);break}}return h},fromJSON(a){return{answer:isSet(a.answer)?SessionDescription.fromJSON(a.answer):void 0,subscription:isSet(a.subscription)?UpdateSubscription.fromJSON(a.subscription):void 0,publishTracks:Array.isArray(a==null?void 0:a.publishTracks)?a.publishTracks.map(s=>TrackPublishedResponse.fromJSON(s)):[],dataChannels:Array.isArray(a==null?void 0:a.dataChannels)?a.dataChannels.map(s=>DataChannelInfo.fromJSON(s)):[],offer:isSet(a.offer)?SessionDescription.fromJSON(a.offer):void 0}},toJSON(a){const s={};return a.answer!==void 0&&(s.answer=a.answer?SessionDescription.toJSON(a.answer):void 0),a.subscription!==void 0&&(s.subscription=a.subscription?UpdateSubscription.toJSON(a.subscription):void 0),a.publishTracks?s.publishTracks=a.publishTracks.map(d=>d?TrackPublishedResponse.toJSON(d):void 0):s.publishTracks=[],a.dataChannels?s.dataChannels=a.dataChannels.map(d=>d?DataChannelInfo.toJSON(d):void 0):s.dataChannels=[],a.offer!==void 0&&(s.offer=a.offer?SessionDescription.toJSON(a.offer):void 0),s},create(a){return SyncState.fromPartial(a!=null?a:{})},fromPartial(a){var s,d;const c=createBaseSyncState();return c.answer=a.answer!==void 0&&a.answer!==null?SessionDescription.fromPartial(a.answer):void 0,c.subscription=a.subscription!==void 0&&a.subscription!==null?UpdateSubscription.fromPartial(a.subscription):void 0,c.publishTracks=((s=a.publishTracks)===null||s===void 0?void 0:s.map(h=>TrackPublishedResponse.fromPartial(h)))||[],c.dataChannels=((d=a.dataChannels)===null||d===void 0?void 0:d.map(h=>DataChannelInfo.fromPartial(h)))||[],c.offer=a.offer!==void 0&&a.offer!==null?SessionDescription.fromPartial(a.offer):void 0,c}};function createBaseDataChannelInfo(){return{label:"",id:0,target:0}}const DataChannelInfo={encode(a){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_m0.Writer.create();return a.label!==""&&s.uint32(10).string(a.label),a.id!==0&&s.uint32(16).uint32(a.id),a.target!==0&&s.uint32(24).int32(a.target),s},decode(a,s){const d=a instanceof _m0.Reader?a:new _m0.Reader(a);let c=s===void 0?d.len:d.pos+s;const h=createBaseDataChannelInfo();for(;d.pos<c;){const b=d.uint32();switch(b>>>3){case 1:h.label=d.string();break;case 2:h.id=d.uint32();break;case 3:h.target=d.int32();break;default:d.skipType(b&7);break}}return h},fromJSON(a){return{label:isSet(a.label)?String(a.label):"",id:isSet(a.id)?Number(a.id):0,target:isSet(a.target)?signalTargetFromJSON(a.target):0}},toJSON(a){const s={};return a.label!==void 0&&(s.label=a.label),a.id!==void 0&&(s.id=Math.round(a.id)),a.target!==void 0&&(s.target=signalTargetToJSON(a.target)),s},create(a){return DataChannelInfo.fromPartial(a!=null?a:{})},fromPartial(a){var s,d,c;const h=createBaseDataChannelInfo();return h.label=(s=a.label)!==null&&s!==void 0?s:"",h.id=(d=a.id)!==null&&d!==void 0?d:0,h.target=(c=a.target)!==null&&c!==void 0?c:0,h}};function createBaseSimulateScenario(){return{scenario:void 0}}const SimulateScenario={encode(a){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_m0.Writer.create();var d;switch((d=a.scenario)===null||d===void 0?void 0:d.$case){case"speakerUpdate":s.uint32(8).int32(a.scenario.speakerUpdate);break;case"nodeFailure":s.uint32(16).bool(a.scenario.nodeFailure);break;case"migration":s.uint32(24).bool(a.scenario.migration);break;case"serverLeave":s.uint32(32).bool(a.scenario.serverLeave);break;case"switchCandidateProtocol":s.uint32(40).int32(a.scenario.switchCandidateProtocol);break}return s},decode(a,s){const d=a instanceof _m0.Reader?a:new _m0.Reader(a);let c=s===void 0?d.len:d.pos+s;const h=createBaseSimulateScenario();for(;d.pos<c;){const b=d.uint32();switch(b>>>3){case 1:h.scenario={$case:"speakerUpdate",speakerUpdate:d.int32()};break;case 2:h.scenario={$case:"nodeFailure",nodeFailure:d.bool()};break;case 3:h.scenario={$case:"migration",migration:d.bool()};break;case 4:h.scenario={$case:"serverLeave",serverLeave:d.bool()};break;case 5:h.scenario={$case:"switchCandidateProtocol",switchCandidateProtocol:d.int32()};break;default:d.skipType(b&7);break}}return h},fromJSON(a){return{scenario:isSet(a.speakerUpdate)?{$case:"speakerUpdate",speakerUpdate:Number(a.speakerUpdate)}:isSet(a.nodeFailure)?{$case:"nodeFailure",nodeFailure:Boolean(a.nodeFailure)}:isSet(a.migration)?{$case:"migration",migration:Boolean(a.migration)}:isSet(a.serverLeave)?{$case:"serverLeave",serverLeave:Boolean(a.serverLeave)}:isSet(a.switchCandidateProtocol)?{$case:"switchCandidateProtocol",switchCandidateProtocol:candidateProtocolFromJSON(a.switchCandidateProtocol)}:void 0}},toJSON(a){var s,d,c,h,b,_,$,_e,tt,rt,ot;const it={};return((s=a.scenario)===null||s===void 0?void 0:s.$case)==="speakerUpdate"&&(it.speakerUpdate=Math.round((d=a.scenario)===null||d===void 0?void 0:d.speakerUpdate)),((c=a.scenario)===null||c===void 0?void 0:c.$case)==="nodeFailure"&&(it.nodeFailure=(h=a.scenario)===null||h===void 0?void 0:h.nodeFailure),((b=a.scenario)===null||b===void 0?void 0:b.$case)==="migration"&&(it.migration=(_=a.scenario)===null||_===void 0?void 0:_.migration),(($=a.scenario)===null||$===void 0?void 0:$.$case)==="serverLeave"&&(it.serverLeave=(_e=a.scenario)===null||_e===void 0?void 0:_e.serverLeave),((tt=a.scenario)===null||tt===void 0?void 0:tt.$case)==="switchCandidateProtocol"&&(it.switchCandidateProtocol=((rt=a.scenario)===null||rt===void 0?void 0:rt.switchCandidateProtocol)!==void 0?candidateProtocolToJSON((ot=a.scenario)===null||ot===void 0?void 0:ot.switchCandidateProtocol):void 0),it},create(a){return SimulateScenario.fromPartial(a!=null?a:{})},fromPartial(a){var s,d,c,h,b,_,$,_e,tt,rt,ot,it,st,lt,dt;const ut=createBaseSimulateScenario();return((s=a.scenario)===null||s===void 0?void 0:s.$case)==="speakerUpdate"&&((d=a.scenario)===null||d===void 0?void 0:d.speakerUpdate)!==void 0&&((c=a.scenario)===null||c===void 0?void 0:c.speakerUpdate)!==null&&(ut.scenario={$case:"speakerUpdate",speakerUpdate:a.scenario.speakerUpdate}),((h=a.scenario)===null||h===void 0?void 0:h.$case)==="nodeFailure"&&((b=a.scenario)===null||b===void 0?void 0:b.nodeFailure)!==void 0&&((_=a.scenario)===null||_===void 0?void 0:_.nodeFailure)!==null&&(ut.scenario={$case:"nodeFailure",nodeFailure:a.scenario.nodeFailure}),(($=a.scenario)===null||$===void 0?void 0:$.$case)==="migration"&&((_e=a.scenario)===null||_e===void 0?void 0:_e.migration)!==void 0&&((tt=a.scenario)===null||tt===void 0?void 0:tt.migration)!==null&&(ut.scenario={$case:"migration",migration:a.scenario.migration}),((rt=a.scenario)===null||rt===void 0?void 0:rt.$case)==="serverLeave"&&((ot=a.scenario)===null||ot===void 0?void 0:ot.serverLeave)!==void 0&&((it=a.scenario)===null||it===void 0?void 0:it.serverLeave)!==null&&(ut.scenario={$case:"serverLeave",serverLeave:a.scenario.serverLeave}),((st=a.scenario)===null||st===void 0?void 0:st.$case)==="switchCandidateProtocol"&&((lt=a.scenario)===null||lt===void 0?void 0:lt.switchCandidateProtocol)!==void 0&&((dt=a.scenario)===null||dt===void 0?void 0:dt.switchCandidateProtocol)!==null&&(ut.scenario={$case:"switchCandidateProtocol",switchCandidateProtocol:a.scenario.switchCandidateProtocol}),ut}};function createBasePing(){return{timestamp:0,rtt:0}}const Ping={encode(a){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_m0.Writer.create();return a.timestamp!==0&&s.uint32(8).int64(a.timestamp),a.rtt!==0&&s.uint32(16).int64(a.rtt),s},decode(a,s){const d=a instanceof _m0.Reader?a:new _m0.Reader(a);let c=s===void 0?d.len:d.pos+s;const h=createBasePing();for(;d.pos<c;){const b=d.uint32();switch(b>>>3){case 1:h.timestamp=longToNumber(d.int64());break;case 2:h.rtt=longToNumber(d.int64());break;default:d.skipType(b&7);break}}return h},fromJSON(a){return{timestamp:isSet(a.timestamp)?Number(a.timestamp):0,rtt:isSet(a.rtt)?Number(a.rtt):0}},toJSON(a){const s={};return a.timestamp!==void 0&&(s.timestamp=Math.round(a.timestamp)),a.rtt!==void 0&&(s.rtt=Math.round(a.rtt)),s},create(a){return Ping.fromPartial(a!=null?a:{})},fromPartial(a){var s,d;const c=createBasePing();return c.timestamp=(s=a.timestamp)!==null&&s!==void 0?s:0,c.rtt=(d=a.rtt)!==null&&d!==void 0?d:0,c}};function createBasePong(){return{lastPingTimestamp:0,timestamp:0}}const Pong={encode(a){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_m0.Writer.create();return a.lastPingTimestamp!==0&&s.uint32(8).int64(a.lastPingTimestamp),a.timestamp!==0&&s.uint32(16).int64(a.timestamp),s},decode(a,s){const d=a instanceof _m0.Reader?a:new _m0.Reader(a);let c=s===void 0?d.len:d.pos+s;const h=createBasePong();for(;d.pos<c;){const b=d.uint32();switch(b>>>3){case 1:h.lastPingTimestamp=longToNumber(d.int64());break;case 2:h.timestamp=longToNumber(d.int64());break;default:d.skipType(b&7);break}}return h},fromJSON(a){return{lastPingTimestamp:isSet(a.lastPingTimestamp)?Number(a.lastPingTimestamp):0,timestamp:isSet(a.timestamp)?Number(a.timestamp):0}},toJSON(a){const s={};return a.lastPingTimestamp!==void 0&&(s.lastPingTimestamp=Math.round(a.lastPingTimestamp)),a.timestamp!==void 0&&(s.timestamp=Math.round(a.timestamp)),s},create(a){return Pong.fromPartial(a!=null?a:{})},fromPartial(a){var s,d;const c=createBasePong();return c.lastPingTimestamp=(s=a.lastPingTimestamp)!==null&&s!==void 0?s:0,c.timestamp=(d=a.timestamp)!==null&&d!==void 0?d:0,c}};var tsProtoGlobalThis=(()=>{if(typeof globalThis!="undefined")return globalThis;if(typeof self!="undefined")return self;if(typeof window!="undefined")return window;if(typeof global!="undefined")return global;throw"Unable to locate global object"})();function longToNumber(a){if(a.gt(Number.MAX_SAFE_INTEGER))throw new tsProtoGlobalThis.Error("Value is larger than Number.MAX_SAFE_INTEGER");return a.toNumber()}_m0.util.Long!==long&&(_m0.util.Long=long,_m0.configure());function isSet(a){return a!=null}class LivekitError extends Error{constructor(s,d){super(d||"an error has occured"),this.code=s}}class ConnectionError extends LivekitError{constructor(s,d,c){super(1,s),this.status=c,this.reason=d}}class DeviceUnsupportedError extends LivekitError{constructor(s){super(21,s!=null?s:"device is unsupported")}}class TrackInvalidError extends LivekitError{constructor(s){super(20,s!=null?s:"track is invalid")}}class UnsupportedServer extends LivekitError{constructor(s){super(10,s!=null?s:"unsupported server")}}class UnexpectedConnectionState extends LivekitError{constructor(s){super(12,s!=null?s:"unexpected connection state")}}class NegotiationError extends LivekitError{constructor(s){super(13,s!=null?s:"unable to negotiate")}}var MediaDeviceFailure;(function(a){a.PermissionDenied="PermissionDenied",a.NotFound="NotFound",a.DeviceInUse="DeviceInUse",a.Other="Other"})(MediaDeviceFailure||(MediaDeviceFailure={}));(function(a){function s(d){if(d&&"name"in d)return d.name==="NotFoundError"||d.name==="DevicesNotFoundError"?a.NotFound:d.name==="NotAllowedError"||d.name==="PermissionDeniedError"?a.PermissionDenied:d.name==="NotReadableError"||d.name==="TrackStartError"?a.DeviceInUse:a.Other}a.getFailure=s})(MediaDeviceFailure||(MediaDeviceFailure={}));var RoomEvent;(function(a){a.Connected="connected",a.Reconnecting="reconnecting",a.Reconnected="reconnected",a.Disconnected="disconnected",a.ConnectionStateChanged="connectionStateChanged",a.StateChanged="connectionStateChanged",a.MediaDevicesChanged="mediaDevicesChanged",a.ParticipantConnected="participantConnected",a.ParticipantDisconnected="participantDisconnected",a.TrackPublished="trackPublished",a.TrackSubscribed="trackSubscribed",a.TrackSubscriptionFailed="trackSubscriptionFailed",a.TrackUnpublished="trackUnpublished",a.TrackUnsubscribed="trackUnsubscribed",a.TrackMuted="trackMuted",a.TrackUnmuted="trackUnmuted",a.LocalTrackPublished="localTrackPublished",a.LocalTrackUnpublished="localTrackUnpublished",a.ActiveSpeakersChanged="activeSpeakersChanged",a.ParticipantMetadataChanged="participantMetadataChanged",a.RoomMetadataChanged="roomMetadataChanged",a.DataReceived="dataReceived",a.ConnectionQualityChanged="connectionQualityChanged",a.TrackStreamStateChanged="trackStreamStateChanged",a.TrackSubscriptionPermissionChanged="trackSubscriptionPermissionChanged",a.TrackSubscriptionStatusChanged="trackSubscriptionStatusChanged",a.AudioPlaybackStatusChanged="audioPlaybackChanged",a.MediaDevicesError="mediaDevicesError",a.ParticipantPermissionsChanged="participantPermissionsChanged",a.SignalConnected="signalConnected",a.RecordingStatusChanged="recordingStatusChanged"})(RoomEvent||(RoomEvent={}));var ParticipantEvent;(function(a){a.TrackPublished="trackPublished",a.TrackSubscribed="trackSubscribed",a.TrackSubscriptionFailed="trackSubscriptionFailed",a.TrackUnpublished="trackUnpublished",a.TrackUnsubscribed="trackUnsubscribed",a.TrackMuted="trackMuted",a.TrackUnmuted="trackUnmuted",a.LocalTrackPublished="localTrackPublished",a.LocalTrackUnpublished="localTrackUnpublished",a.ParticipantMetadataChanged="participantMetadataChanged",a.DataReceived="dataReceived",a.IsSpeakingChanged="isSpeakingChanged",a.ConnectionQualityChanged="connectionQualityChanged",a.TrackStreamStateChanged="trackStreamStateChanged",a.TrackSubscriptionPermissionChanged="trackSubscriptionPermissionChanged",a.TrackSubscriptionStatusChanged="trackSubscriptionStatusChanged",a.MediaDevicesError="mediaDevicesError",a.ParticipantPermissionsChanged="participantPermissionsChanged"})(ParticipantEvent||(ParticipantEvent={}));var EngineEvent;(function(a){a.TransportsCreated="transportsCreated",a.Connected="connected",a.Disconnected="disconnected",a.Resuming="resuming",a.Resumed="resumed",a.Restarting="restarting",a.Restarted="restarted",a.SignalResumed="signalResumed",a.Closing="closing",a.MediaTrackAdded="mediaTrackAdded",a.ActiveSpeakersUpdate="activeSpeakersUpdate",a.DataPacketReceived="dataPacketReceived"})(EngineEvent||(EngineEvent={}));var TrackEvent;(function(a){a.Message="message",a.Muted="muted",a.Unmuted="unmuted",a.Restarted="restarted",a.Ended="ended",a.Subscribed="subscribed",a.Unsubscribed="unsubscribed",a.UpdateSettings="updateSettings",a.UpdateSubscription="updateSubscription",a.AudioPlaybackStarted="audioPlaybackStarted",a.AudioPlaybackFailed="audioPlaybackFailed",a.AudioSilenceDetected="audioSilenceDetected",a.VisibilityChanged="visibilityChanged",a.VideoDimensionsChanged="videoDimensionsChanged",a.ElementAttached="elementAttached",a.ElementDetached="elementDetached",a.UpstreamPaused="upstreamPaused",a.UpstreamResumed="upstreamResumed",a.SubscriptionPermissionChanged="subscriptionPermissionChanged",a.SubscriptionStatusChanged="subscriptionStatusChanged"})(TrackEvent||(TrackEvent={}));const monitorFrequency=2e3;function computeBitrate(a,s){if(!s)return 0;let d,c;return"bytesReceived"in a?(d=a.bytesReceived,c=s.bytesReceived):"bytesSent"in a&&(d=a.bytesSent,c=s.bytesSent),d===void 0||c===void 0||a.timestamp===void 0||s.timestamp===void 0?0:(d-c)*8*1e3/(a.timestamp-s.timestamp)}var uaParserExports={},uaParser={get exports(){return uaParserExports},set exports(a){uaParserExports=a}};(function(a,s){(function(d,c){var h="1.0.33",b="",_="?",$="function",_e="undefined",tt="object",rt="string",ot="major",it="model",st="name",lt="type",dt="vendor",ut="version",ht="architecture",nt="console",ct="mobile",mt="tablet",kt="smarttv",Tt="wearable",Pt="embedded",At=350,gt="Amazon",Ct="Apple",Nt="ASUS",vt="BlackBerry",Et="Browser",It="Chrome",xt="Edge",Dt="Firefox",Ot="Google",Jt="Huawei",Yt="LG",Qt="Microsoft",Ft="Motorola",pt="Opera",_t="Samsung",Lt="Sharp",Gt="Sony",Ut="Xiaomi",$t="Zebra",qt="Facebook",Wt=function(Xt,rn){var en={};for(var an in Xt)rn[an]&&rn[an].length%2===0?en[an]=rn[an].concat(Xt[an]):en[an]=Xt[an];return en},Ht=function(Xt){for(var rn={},en=0;en<Xt.length;en++)rn[Xt[en].toUpperCase()]=Xt[en];return rn},vn=function(Xt,rn){return typeof Xt===rt?ln(rn).indexOf(ln(Xt))!==-1:!1},ln=function(Xt){return Xt.toLowerCase()},In=function(Xt){return typeof Xt===rt?Xt.replace(/[^\d\.]/g,b).split(".")[0]:c},dn=function(Xt,rn){if(typeof Xt===rt)return Xt=Xt.replace(/^\s\s*/,b),typeof rn===_e?Xt:Xt.substring(0,At)},gn=function(Xt,rn){for(var en=0,an,tn,Mn,un,Cn,Rn;en<rn.length&&!Cn;){var Bn=rn[en],Vn=rn[en+1];for(an=tn=0;an<Bn.length&&!Cn;)if(Cn=Bn[an++].exec(Xt),Cn)for(Mn=0;Mn<Vn.length;Mn++)Rn=Cn[++tn],un=Vn[Mn],typeof un===tt&&un.length>0?un.length===2?typeof un[1]==$?this[un[0]]=un[1].call(this,Rn):this[un[0]]=un[1]:un.length===3?typeof un[1]===$&&!(un[1].exec&&un[1].test)?this[un[0]]=Rn?un[1].call(this,Rn,un[2]):c:this[un[0]]=Rn?Rn.replace(un[1],un[2]):c:un.length===4&&(this[un[0]]=Rn?un[3].call(this,Rn.replace(un[1],un[2])):c):this[un]=Rn||c;en+=2}},kn=function(Xt,rn){for(var en in rn)if(typeof rn[en]===tt&&rn[en].length>0){for(var an=0;an<rn[en].length;an++)if(vn(rn[en][an],Xt))return en===_?c:en}else if(vn(rn[en],Xt))return en===_?c:en;return Xt},On={"1.0":"/8","1.2":"/1","1.3":"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"},Zt={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2","8.1":"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},wn={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[ut,[st,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[ut,[st,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[st,ut],[/opios[\/ ]+([\w\.]+)/i],[ut,[st,pt+" Mini"]],[/\bopr\/([\w\.]+)/i],[ut,[st,pt]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant |iemobile|slim)(?:browser)?[\/ ]?([\w\.]*)/i,/(ba?idubrowser)[\/ ]?([\w\.]+)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(weibo)__([\d\.]+)/i],[st,ut],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[ut,[st,"UC"+Et]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i],[ut,[st,"WeChat(Win) Desktop"]],[/micromessenger\/([\w\.]+)/i],[ut,[st,"WeChat"]],[/konqueror\/([\w\.]+)/i],[ut,[st,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[ut,[st,"IE"]],[/yabrowser\/([\w\.]+)/i],[ut,[st,"Yandex"]],[/(avast|avg)\/([\w\.]+)/i],[[st,/(.+)/,"$1 Secure "+Et],ut],[/\bfocus\/([\w\.]+)/i],[ut,[st,Dt+" Focus"]],[/\bopt\/([\w\.]+)/i],[ut,[st,pt+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[ut,[st,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[ut,[st,"Dolphin"]],[/coast\/([\w\.]+)/i],[ut,[st,pt+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[ut,[st,"MIUI "+Et]],[/fxios\/([-\w\.]+)/i],[ut,[st,Dt]],[/\bqihu|(qi?ho?o?|360)browser/i],[[st,"360 "+Et]],[/(oculus|samsung|sailfish|huawei)browser\/([\w\.]+)/i],[[st,/(.+)/,"$1 "+Et],ut],[/(comodo_dragon)\/([\w\.]+)/i],[[st,/_/g," "],ut],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/ ]?([\w\.]+)/i],[st,ut],[/(metasr)[\/ ]?([\w\.]+)/i,/(lbbrowser)/i,/\[(linkedin)app\]/i],[st],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[st,qt],ut],[/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(chromium|instagram)[\/ ]([-\w\.]+)/i],[st,ut],[/\bgsa\/([\w\.]+) .*safari\//i],[ut,[st,"GSA"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[ut,[st,It+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[st,It+" WebView"],ut],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[ut,[st,"Android "+Et]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[st,ut],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[ut,[st,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[ut,st],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[st,[ut,kn,On]],[/(webkit|khtml)\/([\w\.]+)/i],[st,ut],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[st,"Netscape"],ut],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[ut,[st,Dt+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i],[st,ut],[/(cobalt)\/([\w\.]+)/i],[st,[ut,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[ht,"amd64"]],[/(ia32(?=;))/i],[[ht,ln]],[/((?:i[346]|x)86)[;\)]/i],[[ht,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[ht,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[ht,"armhf"]],[/windows (ce|mobile); ppc;/i],[[ht,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[ht,/ower/,b,ln]],[/(sun4\w)[;\)]/i],[[ht,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[ht,ln]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[it,[dt,_t],[lt,mt]],[/\b((?:s[cgp]h|gt|sm)-\w+|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[it,[dt,_t],[lt,ct]],[/\((ip(?:hone|od)[\w ]*);/i],[it,[dt,Ct],[lt,ct]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[it,[dt,Ct],[lt,mt]],[/(macintosh);/i],[it,[dt,Ct]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[it,[dt,Jt],[lt,mt]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[it,[dt,Jt],[lt,ct]],[/\b(poco[\w ]+)(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[it,/_/g," "],[dt,Ut],[lt,ct]],[/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[it,/_/g," "],[dt,Ut],[lt,mt]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[it,[dt,"OPPO"],[lt,ct]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[it,[dt,"Vivo"],[lt,ct]],[/\b(rmx[12]\d{3})(?: bui|;|\))/i],[it,[dt,"Realme"],[lt,ct]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[it,[dt,Ft],[lt,ct]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[it,[dt,Ft],[lt,mt]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[it,[dt,Yt],[lt,mt]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[it,[dt,Yt],[lt,ct]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[it,[dt,"Lenovo"],[lt,mt]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[it,/_/g," "],[dt,"Nokia"],[lt,ct]],[/(pixel c)\b/i],[it,[dt,Ot],[lt,mt]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[it,[dt,Ot],[lt,ct]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[it,[dt,Gt],[lt,ct]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[it,"Xperia Tablet"],[dt,Gt],[lt,mt]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[it,[dt,"OnePlus"],[lt,ct]],[/(alexa)webm/i,/(kf[a-z]{2}wi)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[it,[dt,gt],[lt,mt]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[it,/(.+)/g,"Fire Phone $1"],[dt,gt],[lt,ct]],[/(playbook);[-\w\),; ]+(rim)/i],[it,dt,[lt,mt]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[it,[dt,vt],[lt,ct]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[it,[dt,Nt],[lt,mt]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[it,[dt,Nt],[lt,ct]],[/(nexus 9)/i],[it,[dt,"HTC"],[lt,mt]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic|sony(?!-bra))[-_ ]?([-\w]*)/i],[dt,[it,/_/g," "],[lt,ct]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[it,[dt,"Acer"],[lt,mt]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[it,[dt,"Meizu"],[lt,ct]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[it,[dt,Lt],[lt,ct]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[dt,it,[lt,ct]],[/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[dt,it,[lt,mt]],[/(surface duo)/i],[it,[dt,Qt],[lt,mt]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[it,[dt,"Fairphone"],[lt,ct]],[/(u304aa)/i],[it,[dt,"AT&T"],[lt,ct]],[/\bsie-(\w*)/i],[it,[dt,"Siemens"],[lt,ct]],[/\b(rct\w+) b/i],[it,[dt,"RCA"],[lt,mt]],[/\b(venue[\d ]{2,7}) b/i],[it,[dt,"Dell"],[lt,mt]],[/\b(q(?:mv|ta)\w+) b/i],[it,[dt,"Verizon"],[lt,mt]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[it,[dt,"Barnes & Noble"],[lt,mt]],[/\b(tm\d{3}\w+) b/i],[it,[dt,"NuVision"],[lt,mt]],[/\b(k88) b/i],[it,[dt,"ZTE"],[lt,mt]],[/\b(nx\d{3}j) b/i],[it,[dt,"ZTE"],[lt,ct]],[/\b(gen\d{3}) b.+49h/i],[it,[dt,"Swiss"],[lt,ct]],[/\b(zur\d{3}) b/i],[it,[dt,"Swiss"],[lt,mt]],[/\b((zeki)?tb.*\b) b/i],[it,[dt,"Zeki"],[lt,mt]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[dt,"Dragon Touch"],it,[lt,mt]],[/\b(ns-?\w{0,9}) b/i],[it,[dt,"Insignia"],[lt,mt]],[/\b((nxa|next)-?\w{0,9}) b/i],[it,[dt,"NextBook"],[lt,mt]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[dt,"Voice"],it,[lt,ct]],[/\b(lvtel\-)?(v1[12]) b/i],[[dt,"LvTel"],it,[lt,ct]],[/\b(ph-1) /i],[it,[dt,"Essential"],[lt,ct]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[it,[dt,"Envizen"],[lt,mt]],[/\b(trio[-\w\. ]+) b/i],[it,[dt,"MachSpeed"],[lt,mt]],[/\btu_(1491) b/i],[it,[dt,"Rotor"],[lt,mt]],[/(shield[\w ]+) b/i],[it,[dt,"Nvidia"],[lt,mt]],[/(sprint) (\w+)/i],[dt,it,[lt,ct]],[/(kin\.[onetw]{3})/i],[[it,/\./g," "],[dt,Qt],[lt,ct]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[it,[dt,$t],[lt,mt]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[it,[dt,$t],[lt,ct]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[dt,it,[lt,nt]],[/droid.+; (shield) bui/i],[it,[dt,"Nvidia"],[lt,nt]],[/(playstation [345portablevi]+)/i],[it,[dt,Gt],[lt,nt]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[it,[dt,Qt],[lt,nt]],[/smart-tv.+(samsung)/i],[dt,[lt,kt]],[/hbbtv.+maple;(\d+)/i],[[it,/^/,"SmartTV"],[dt,_t],[lt,kt]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[dt,Yt],[lt,kt]],[/(apple) ?tv/i],[dt,[it,Ct+" TV"],[lt,kt]],[/crkey/i],[[it,It+"cast"],[dt,Ot],[lt,kt]],[/droid.+aft(\w)( bui|\))/i],[it,[dt,gt],[lt,kt]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[it,[dt,Lt],[lt,kt]],[/(bravia[\w ]+)( bui|\))/i],[it,[dt,Gt],[lt,kt]],[/(mitv-\w{5}) bui/i],[it,[dt,Ut],[lt,kt]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w ]*; *(\w[^;]*);([^;]*)/i],[[dt,dn],[it,dn],[lt,kt]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[lt,kt]],[/((pebble))app/i],[dt,it,[lt,Tt]],[/droid.+; (glass) \d/i],[it,[dt,Ot],[lt,Tt]],[/droid.+; (wt63?0{2,3})\)/i],[it,[dt,$t],[lt,Tt]],[/(quest( 2)?)/i],[it,[dt,qt],[lt,Tt]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[dt,[lt,Pt]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+? mobile safari/i],[it,[lt,ct]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[it,[lt,mt]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[lt,mt]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[lt,ct]],[/(android[-\w\. ]{0,9});.+buil/i],[it,[dt,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[ut,[st,xt+"HTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[ut,[st,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i],[st,ut],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[ut,st]],os:[[/microsoft (windows) (vista|xp)/i],[st,ut],[/(windows) nt 6\.2; (arm)/i,/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i,/(windows)[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i],[st,[ut,kn,Zt]],[/(win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[st,"Windows"],[ut,kn,Zt]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/cfnetwork\/.+darwin/i],[[ut,/_/g,"."],[st,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[st,"Mac OS"],[ut,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[ut,st],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[st,ut],[/\(bb(10);/i],[ut,[st,vt]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[ut,[st,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[ut,[st,Dt+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[ut,[st,"webOS"]],[/crkey\/([\d\.]+)/i],[ut,[st,It+"cast"]],[/(cros) [\w]+ ([\w\.]+\w)/i],[[st,"Chromium OS"],ut],[/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[st,ut],[/(sunos) ?([\w\.\d]*)/i],[[st,"Solaris"],ut],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux)/i,/(unix) ?([\w\.]*)/i],[st,ut]]},jt=function(Xt,rn){if(typeof Xt===tt&&(rn=Xt,Xt=c),!(this instanceof jt))return new jt(Xt,rn).getResult();var en=Xt||(typeof d!==_e&&d.navigator&&d.navigator.userAgent?d.navigator.userAgent:b),an=rn?Wt(wn,rn):wn;return this.getBrowser=function(){var tn={};return tn[st]=c,tn[ut]=c,gn.call(tn,en,an.browser),tn.major=In(tn.version),tn},this.getCPU=function(){var tn={};return tn[ht]=c,gn.call(tn,en,an.cpu),tn},this.getDevice=function(){var tn={};return tn[dt]=c,tn[it]=c,tn[lt]=c,gn.call(tn,en,an.device),tn},this.getEngine=function(){var tn={};return tn[st]=c,tn[ut]=c,gn.call(tn,en,an.engine),tn},this.getOS=function(){var tn={};return tn[st]=c,tn[ut]=c,gn.call(tn,en,an.os),tn},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return en},this.setUA=function(tn){return en=typeof tn===rt&&tn.length>At?dn(tn,At):tn,this},this.setUA(en),this};jt.VERSION=h,jt.BROWSER=Ht([st,ut,ot]),jt.CPU=Ht([ht]),jt.DEVICE=Ht([it,dt,lt,nt,ct,kt,mt,Tt,Pt]),jt.ENGINE=jt.OS=Ht([st,ut]),a.exports&&(s=a.exports=jt),s.UAParser=jt;var Pn=typeof d!==_e&&(d.jQuery||d.Zepto);if(Pn&&!Pn.ua){var Kt=new jt;Pn.ua=Kt.getResult(),Pn.ua.get=function(){return Kt.getUA()},Pn.ua.set=function(Xt){Kt.setUA(Xt);var rn=Kt.getResult();for(var en in rn)Pn.ua[en]=rn[en]}}})(typeof window=="object"?window:commonjsGlobal)})(uaParser,uaParserExports);var UAParser=uaParserExports,version$1="1.7.0";const version=version$1,protocolVersion=9;function mergeDefaultOptions(a,s,d){const c=_objectSpread2({},a);return c.audio===!0&&(c.audio={}),c.video===!0&&(c.video={}),c.audio&&mergeObjectWithoutOverwriting(c.audio,s),c.video&&mergeObjectWithoutOverwriting(c.video,d),c}function mergeObjectWithoutOverwriting(a,s){return Object.keys(s).forEach(d=>{a[d]===void 0&&(a[d]=s[d])}),a}function constraintsForOptions(a){const s={};if(a.video)if(typeof a.video=="object"){const d={},c=d,h=a.video;Object.keys(h).forEach(b=>{switch(b){case"resolution":mergeObjectWithoutOverwriting(c,h.resolution);break;default:c[b]=h[b]}}),s.video=d}else s.video=a.video;else s.video=!1;return a.audio?typeof a.audio=="object"?s.audio=a.audio:s.audio=!0:s.audio=!1,s}async function detectSilence(a){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:200;const d=getNewAudioContext();if(d){const c=d.createAnalyser();c.fftSize=2048;const h=c.frequencyBinCount,b=new Uint8Array(h);d.createMediaStreamSource(new MediaStream([a.mediaStreamTrack])).connect(c),await sleep(s),c.getByteTimeDomainData(b);const $=b.some(_e=>_e!==128&&_e!==0);return d.close(),!$}return!1}function getNewAudioContext(){const a=window.AudioContext||window.webkitAudioContext;if(a)return new a({latencyHint:"interactive"})}const separator="|";function unpackStreamId(a){const s=a.split(separator);return s.length>1?[s[0],a.substr(s[0].length+1)]:[a,""]}async function sleep(a){return new Promise(s=>setTimeout(s,a))}function supportsTransceiver(){return"addTransceiver"in RTCPeerConnection.prototype}function supportsAddTrack(){return"addTrack"in RTCPeerConnection.prototype}function supportsAV1(){const a=RTCRtpReceiver.getCapabilities("video");let s=!1,d=!1;if(a){for(const c of a.codecs)if(c.mimeType==="video/AV1"){s=!0;break}for(const c of a.headerExtensions)if(c.uri==="https://aomediacodec.github.io/av1-rtp-spec/#dependency-descriptor-rtp-header-extension"){d=!0;break}}return s&&d}function supportsSetSinkId(a){return document?(a||(a=document.createElement("audio")),"setSinkId"in a):!1}const setCodecPreferencesVersions={Chrome:"100",Chromium:"100",Safari:"15",Firefox:"100",Edge:"100",Brave:"1.40"};function supportsSetCodecPreferences(a){if(!isWeb()||!("setCodecPreferences"in a))return!1;const s=UAParser();if(!s.browser.name||!s.browser.version)return!1;const d=setCodecPreferencesVersions[s.browser.name];return d?compareVersions(s.browser.version,d)>=0:!1}function isFireFox(){return isWeb()?navigator.userAgent.indexOf("Firefox")!==-1:!1}function isSafari(){return isWeb()?/^((?!chrome|android).)*safari/i.test(navigator.userAgent):!1}function isMobile(){return isWeb()?/Tablet|iPad|Mobile|Android|BlackBerry/.test(navigator.userAgent):!1}function isWeb(){return typeof document!="undefined"}function compareVersions(a,s){const d=a.split("."),c=s.split("."),h=Math.min(a.length,s.length);for(let b=0;b<h;++b){const _=parseInt(d[b],10),$=parseInt(c[b],10);if(_>$)return 1;if(_<$)return-1}return d.length==c.length?0:d.length<c.length?-1:1}function roDispatchCallback(a){for(const s of a)s.target.handleResize(s)}function ioDispatchCallback(a){for(const s of a)s.target.handleVisibilityChanged(s)}let resizeObserver=null;const getResizeObserver=()=>(resizeObserver||(resizeObserver=new ResizeObserver(roDispatchCallback)),resizeObserver);let intersectionObserver=null;const getIntersectionObserver=()=>(intersectionObserver||(intersectionObserver=new IntersectionObserver(ioDispatchCallback,{root:document,rootMargin:"0px"})),intersectionObserver);function getClientInfo(){return ClientInfo.fromPartial({sdk:ClientInfo_SDK.JS,protocol:protocolVersion,version})}let emptyVideoStreamTrack;function getEmptyVideoStreamTrack(){return emptyVideoStreamTrack||(emptyVideoStreamTrack=createDummyVideoStreamTrack()),emptyVideoStreamTrack}function createDummyVideoStreamTrack(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:16,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:16,d=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,c=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;const h=document.createElement("canvas");h.width=a,h.height=s;const b=h.getContext("2d");b==null||b.fillRect(0,0,h.width,h.height),c&&b&&(b.beginPath(),b.arc(a/2,s/2,50,0,Math.PI*2,!0),b.closePath(),b.fillStyle="grey",b.fill());const _=h.captureStream(),[$]=_.getTracks();if(!$)throw Error("Could not get empty media stream video track");return $.enabled=d,$}let emptyAudioStreamTrack;function getEmptyAudioStreamTrack(){if(!emptyAudioStreamTrack){const a=new AudioContext,s=a.createOscillator(),d=a.createMediaStreamDestination();if(s.connect(d),s.start(),[emptyAudioStreamTrack]=d.stream.getAudioTracks(),!emptyAudioStreamTrack)throw Error("Could not get empty media stream audio track");emptyAudioStreamTrack.enabled=!1}return emptyAudioStreamTrack}class Future{constructor(s,d){this.onFinally=d,this.promise=new Promise(async(c,h)=>{this.resolve=c,this.reject=h,s&&await s(c,h)}).finally(()=>{var c;return(c=this.onFinally)===null||c===void 0?void 0:c.call(this)})}}class Mutex{constructor(){this._locking=Promise.resolve(),this._locks=0}isLocked(){return this._locks>0}lock(){this._locks+=1;let s;const d=new Promise(h=>s=()=>{this._locks-=1,h()}),c=this._locking.then(()=>s);return this._locking=this._locking.then(()=>d),c}}class Queue{constructor(s,d){this.maxConcurrent=s||1,this.minCycle=d||0,this.queueRunning=[],this.queueWaiting={},this.lastRun=0}dequeue(s){const d=this.queueRunning,c=d.findIndex(b=>b.hash===s);if(c==-1)throw"queue desync";const h=d[c];return d.splice(c,1),h}getFirstWaiting(){for(let s of Object.keys(this.queueWaiting).sort((d,c)=>d-c))if(this.queueWaiting[s]!==void 0&&this.queueWaiting[s].length>0)return this.queueWaiting[s]}end(s){this.dequeue(s).resolve();const c=this.getFirstWaiting();c!==void 0&&c.shift().resolve()}async wait(s,d){const c=d===void 0?0:d;let h={hash:s,priority:c};for(this.queueWaiting[c]==null&&(this.queueWaiting[c]=[]),this.queueRunning.length>=this.maxConcurrent&&(h.promise=new Promise(b=>{h.resolve=b}),this.queueWaiting[c].push(h),await h.promise),this.queueRunning.push(h),h.promise=new Promise(b=>{h.resolve=b});Date.now()-this.lastRun<this.minCycle;)await new Promise(b=>setTimeout(b,this.minCycle-Date.now()+this.lastRun));this.lastRun=Date.now()}run(s,d){const c=d===void 0?0:d,h=Symbol();return this.wait(h,c).then(()=>s()).finally(()=>{this.end(h)})}stat(){return{running:this.queueRunning.length,waiting:Object.keys(this.queueWaiting).reduce((s,d)=>s+=this.queueWaiting[d].length,0),last:this.lastRun}}async flush(){for(;this.stat().waiting>0;)for(let s of Object.keys(this.queueWaiting).sort((d,c)=>c-d)){const d=this.queueWaiting[s];d!==void 0&&d.length>0&&await d[d.length-1].promise}for(;this.queueRunning.length>0;)await Promise.allSettled(this.queueRunning.map(s=>s.promise))}}const defaultId="default";class DeviceManager{static getInstance(){return this.instance===void 0&&(this.instance=new DeviceManager),this.instance}async getDevices(s){let d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;var c;if(((c=DeviceManager.userMediaPromiseMap)===null||c===void 0?void 0:c.size)>0){livekitLogger.debug("awaiting getUserMedia promise");try{s?await DeviceManager.userMediaPromiseMap.get(s):await Promise.all(DeviceManager.userMediaPromiseMap.values())}catch{livekitLogger.warn("error waiting for media permissons")}}let h=await navigator.mediaDevices.enumerateDevices();if(d&&s&&(!DeviceManager.userMediaPromiseMap.get(s)||!isSafari())&&(h.length===0||h.some(_=>{const $=_.label==="",_e=s?_.kind===s:!0;return $&&_e}))){const _={video:s!=="audioinput"&&s!=="audiooutput",audio:s!=="videoinput"},$=await navigator.mediaDevices.getUserMedia(_);h=await navigator.mediaDevices.enumerateDevices(),$.getTracks().forEach(_e=>{_e.stop()})}return s&&(h=h.filter(b=>b.kind===s)),h}async normalizeDeviceId(s,d,c){if(d!==defaultId)return d;const b=(await this.getDevices(s)).find(_=>_.groupId===c&&_.deviceId!==defaultId);return b==null?void 0:b.deviceId}}DeviceManager.mediaDeviceKinds=["audioinput","audiooutput","videoinput"];DeviceManager.userMediaPromiseMap=new Map;var eventsExports={},events={get exports(){return eventsExports},set exports(a){eventsExports=a}},R$2=typeof Reflect=="object"?Reflect:null,ReflectApply=R$2&&typeof R$2.apply=="function"?R$2.apply:function a(s,d,c){return Function.prototype.apply.call(s,d,c)},ReflectOwnKeys;R$2&&typeof R$2.ownKeys=="function"?ReflectOwnKeys=R$2.ownKeys:Object.getOwnPropertySymbols?ReflectOwnKeys=function(s){return Object.getOwnPropertyNames(s).concat(Object.getOwnPropertySymbols(s))}:ReflectOwnKeys=function(s){return Object.getOwnPropertyNames(s)};function ProcessEmitWarning(a){console&&console.warn&&console.warn(a)}var NumberIsNaN=Number.isNaN||function a(s){return s!==s};function EventEmitter(){EventEmitter.init.call(this)}events.exports=EventEmitter;eventsExports.once=once;EventEmitter.EventEmitter=EventEmitter;EventEmitter.prototype._events=void 0;EventEmitter.prototype._eventsCount=0;EventEmitter.prototype._maxListeners=void 0;var defaultMaxListeners=10;function checkListener(a){if(typeof a!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof a)}Object.defineProperty(EventEmitter,"defaultMaxListeners",{enumerable:!0,get:function(){return defaultMaxListeners},set:function(a){if(typeof a!="number"||a<0||NumberIsNaN(a))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+a+".");defaultMaxListeners=a}});EventEmitter.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};EventEmitter.prototype.setMaxListeners=function a(s){if(typeof s!="number"||s<0||NumberIsNaN(s))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+s+".");return this._maxListeners=s,this};function _getMaxListeners(a){return a._maxListeners===void 0?EventEmitter.defaultMaxListeners:a._maxListeners}EventEmitter.prototype.getMaxListeners=function a(){return _getMaxListeners(this)};EventEmitter.prototype.emit=function a(s){for(var d=[],c=1;c<arguments.length;c++)d.push(arguments[c]);var h=s==="error",b=this._events;if(b!==void 0)h=h&&b.error===void 0;else if(!h)return!1;if(h){var _;if(d.length>0&&(_=d[0]),_ instanceof Error)throw _;var $=new Error("Unhandled error."+(_?" ("+_.message+")":""));throw $.context=_,$}var _e=b[s];if(_e===void 0)return!1;if(typeof _e=="function")ReflectApply(_e,this,d);else for(var tt=_e.length,rt=arrayClone(_e,tt),c=0;c<tt;++c)ReflectApply(rt[c],this,d);return!0};function _addListener(a,s,d,c){var h,b,_;if(checkListener(d),b=a._events,b===void 0?(b=a._events=Object.create(null),a._eventsCount=0):(b.newListener!==void 0&&(a.emit("newListener",s,d.listener?d.listener:d),b=a._events),_=b[s]),_===void 0)_=b[s]=d,++a._eventsCount;else if(typeof _=="function"?_=b[s]=c?[d,_]:[_,d]:c?_.unshift(d):_.push(d),h=_getMaxListeners(a),h>0&&_.length>h&&!_.warned){_.warned=!0;var $=new Error("Possible EventEmitter memory leak detected. "+_.length+" "+String(s)+" listeners added. Use emitter.setMaxListeners() to increase limit");$.name="MaxListenersExceededWarning",$.emitter=a,$.type=s,$.count=_.length,ProcessEmitWarning($)}return a}EventEmitter.prototype.addListener=function a(s,d){return _addListener(this,s,d,!1)};EventEmitter.prototype.on=EventEmitter.prototype.addListener;EventEmitter.prototype.prependListener=function a(s,d){return _addListener(this,s,d,!0)};function onceWrapper(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function _onceWrap(a,s,d){var c={fired:!1,wrapFn:void 0,target:a,type:s,listener:d},h=onceWrapper.bind(c);return h.listener=d,c.wrapFn=h,h}EventEmitter.prototype.once=function a(s,d){return checkListener(d),this.on(s,_onceWrap(this,s,d)),this};EventEmitter.prototype.prependOnceListener=function a(s,d){return checkListener(d),this.prependListener(s,_onceWrap(this,s,d)),this};EventEmitter.prototype.removeListener=function a(s,d){var c,h,b,_,$;if(checkListener(d),h=this._events,h===void 0)return this;if(c=h[s],c===void 0)return this;if(c===d||c.listener===d)--this._eventsCount===0?this._events=Object.create(null):(delete h[s],h.removeListener&&this.emit("removeListener",s,c.listener||d));else if(typeof c!="function"){for(b=-1,_=c.length-1;_>=0;_--)if(c[_]===d||c[_].listener===d){$=c[_].listener,b=_;break}if(b<0)return this;b===0?c.shift():spliceOne(c,b),c.length===1&&(h[s]=c[0]),h.removeListener!==void 0&&this.emit("removeListener",s,$||d)}return this};EventEmitter.prototype.off=EventEmitter.prototype.removeListener;EventEmitter.prototype.removeAllListeners=function a(s){var d,c,h;if(c=this._events,c===void 0)return this;if(c.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):c[s]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete c[s]),this;if(arguments.length===0){var b=Object.keys(c),_;for(h=0;h<b.length;++h)_=b[h],_!=="removeListener"&&this.removeAllListeners(_);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(d=c[s],typeof d=="function")this.removeListener(s,d);else if(d!==void 0)for(h=d.length-1;h>=0;h--)this.removeListener(s,d[h]);return this};function _listeners(a,s,d){var c=a._events;if(c===void 0)return[];var h=c[s];return h===void 0?[]:typeof h=="function"?d?[h.listener||h]:[h]:d?unwrapListeners(h):arrayClone(h,h.length)}EventEmitter.prototype.listeners=function a(s){return _listeners(this,s,!0)};EventEmitter.prototype.rawListeners=function a(s){return _listeners(this,s,!1)};EventEmitter.listenerCount=function(a,s){return typeof a.listenerCount=="function"?a.listenerCount(s):listenerCount.call(a,s)};EventEmitter.prototype.listenerCount=listenerCount;function listenerCount(a){var s=this._events;if(s!==void 0){var d=s[a];if(typeof d=="function")return 1;if(d!==void 0)return d.length}return 0}EventEmitter.prototype.eventNames=function a(){return this._eventsCount>0?ReflectOwnKeys(this._events):[]};function arrayClone(a,s){for(var d=new Array(s),c=0;c<s;++c)d[c]=a[c];return d}function spliceOne(a,s){for(;s+1<a.length;s++)a[s]=a[s+1];a.pop()}function unwrapListeners(a){for(var s=new Array(a.length),d=0;d<s.length;++d)s[d]=a[d].listener||a[d];return s}function once(a,s){return new Promise(function(d,c){function h(_){a.removeListener(s,b),c(_)}function b(){typeof a.removeListener=="function"&&a.removeListener("error",h),d([].slice.call(arguments))}eventTargetAgnosticAddListener(a,s,b,{once:!0}),s!=="error"&&addErrorHandlerIfEventEmitter(a,h,{once:!0})})}function addErrorHandlerIfEventEmitter(a,s,d){typeof a.on=="function"&&eventTargetAgnosticAddListener(a,"error",s,d)}function eventTargetAgnosticAddListener(a,s,d,c){if(typeof a.on=="function")c.once?a.once(s,d):a.on(s,d);else if(typeof a.addEventListener=="function")a.addEventListener(s,function h(b){c.once&&a.removeEventListener(s,h),d(b)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof a)}const BACKGROUND_REACTION_DELAY=5e3,recycledElements=[];class Track extends eventsExports.EventEmitter{constructor(s,d){super(),this.attachedElements=[],this.isMuted=!1,this.streamState=Track.StreamState.Active,this._currentBitrate=0,this.appVisibilityChangedListener=()=>{this.backgroundTimeout&&clearTimeout(this.backgroundTimeout),document.visibilityState==="hidden"?this.backgroundTimeout=setTimeout(()=>this.handleAppVisibilityChanged(),BACKGROUND_REACTION_DELAY):this.handleAppVisibilityChanged()},this.setMaxListeners(100),this.kind=d,this._mediaStreamTrack=s,this._mediaStreamID=s.id,this.source=Track.Source.Unknown,isWeb()?(this.isInBackground=document.visibilityState==="hidden",document.addEventListener("visibilitychange",this.appVisibilityChangedListener)):this.isInBackground=!1}get currentBitrate(){return this._currentBitrate}get mediaStreamTrack(){return this._mediaStreamTrack}get mediaStreamID(){return this._mediaStreamID}attach(s){let d="audio";this.kind===Track.Kind.Video&&(d="video"),s||(d==="audio"&&(recycledElements.forEach(h=>{h.parentElement===null&&!s&&(s=h)}),s&&recycledElements.splice(recycledElements.indexOf(s),1)),s||(s=document.createElement(d))),this.attachedElements.includes(s)||this.attachedElements.push(s),attachToElement(this._mediaStreamTrack,s);const c=s.srcObject.getTracks();return c.some(h=>h.kind==="audio")&&s.play().then(()=>{this.emit(TrackEvent.AudioPlaybackStarted)}).catch(h=>{h.name==="NotAllowedError"?this.emit(TrackEvent.AudioPlaybackFailed,h):livekitLogger.warn("could not playback audio",h),s&&c.some(b=>b.kind==="video")&&h.name==="NotAllowedError"&&(s.muted=!0,s.play().catch(()=>{}))}),this.emit(TrackEvent.ElementAttached,s),s}detach(s){if(s){detachTrack(this._mediaStreamTrack,s);const c=this.attachedElements.indexOf(s);return c>=0&&(this.attachedElements.splice(c,1),this.recycleElement(s),this.emit(TrackEvent.ElementDetached,s)),s}const d=[];return this.attachedElements.forEach(c=>{detachTrack(this._mediaStreamTrack,c),d.push(c),this.recycleElement(c),this.emit(TrackEvent.ElementDetached,c)}),this.attachedElements=[],d}stop(){this.stopMonitor(),this._mediaStreamTrack.stop(),isWeb()&&document.removeEventListener("visibilitychange",this.appVisibilityChangedListener)}enable(){this._mediaStreamTrack.enabled=!0}disable(){this._mediaStreamTrack.enabled=!1}stopMonitor(){this.monitorInterval&&clearInterval(this.monitorInterval)}recycleElement(s){if(s instanceof HTMLAudioElement){let d=!0;s.pause(),recycledElements.forEach(c=>{c.parentElement||(d=!1)}),d&&recycledElements.push(s)}}async handleAppVisibilityChanged(){this.isInBackground=document.visibilityState==="hidden"}}function attachToElement(a,s){let d;s.srcObject instanceof MediaStream?d=s.srcObject:d=new MediaStream;let c;a.kind==="audio"?c=d.getAudioTracks():c=d.getVideoTracks(),c.includes(a)||(c.forEach(h=>{d.removeTrack(h)}),d.addTrack(a)),s.autoplay=!0,s.muted=d.getAudioTracks().length===0,s instanceof HTMLVideoElement&&(s.playsInline=!0),s.srcObject!==d&&(s.srcObject=d,(isSafari()||isFireFox())&&s instanceof HTMLVideoElement&&setTimeout(()=>{s.srcObject=d,s.play().catch(()=>{})},0))}function detachTrack(a,s){if(s.srcObject instanceof MediaStream){const d=s.srcObject;d.removeTrack(a),d.getTracks().length>0?s.srcObject=d:s.srcObject=null}}(function(a){let s;(function(tt){tt.Audio="audio",tt.Video="video",tt.Unknown="unknown"})(s=a.Kind||(a.Kind={}));let d;(function(tt){tt.Camera="camera",tt.Microphone="microphone",tt.ScreenShare="screen_share",tt.ScreenShareAudio="screen_share_audio",tt.Unknown="unknown"})(d=a.Source||(a.Source={}));let c;(function(tt){tt.Active="active",tt.Paused="paused",tt.Unknown="unknown"})(c=a.StreamState||(a.StreamState={}));function h(tt){switch(tt){case s.Audio:return TrackType.AUDIO;case s.Video:return TrackType.VIDEO;default:return TrackType.UNRECOGNIZED}}a.kindToProto=h;function b(tt){switch(tt){case TrackType.AUDIO:return s.Audio;case TrackType.VIDEO:return s.Video;default:return s.Unknown}}a.kindFromProto=b;function _(tt){switch(tt){case d.Camera:return TrackSource.CAMERA;case d.Microphone:return TrackSource.MICROPHONE;case d.ScreenShare:return TrackSource.SCREEN_SHARE;case d.ScreenShareAudio:return TrackSource.SCREEN_SHARE_AUDIO;default:return TrackSource.UNRECOGNIZED}}a.sourceToProto=_;function $(tt){switch(tt){case TrackSource.CAMERA:return d.Camera;case TrackSource.MICROPHONE:return d.Microphone;case TrackSource.SCREEN_SHARE:return d.ScreenShare;case TrackSource.SCREEN_SHARE_AUDIO:return d.ScreenShareAudio;default:return d.Unknown}}a.sourceFromProto=$;function _e(tt){switch(tt){case StreamState.ACTIVE:return c.Active;case StreamState.PAUSED:return c.Paused;default:return c.Unknown}}a.streamStateFromProto=_e})(Track||(Track={}));const defaultDimensionsTimeout=2*1e3;class LocalTrack extends Track{constructor(s,d,c){let h=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;super(s,d),this._isUpstreamPaused=!1,this.handleEnded=()=>{this.isInBackground&&(this.reacquireTrack=!0),this.emit(TrackEvent.Ended,this)},this._mediaStreamTrack.addEventListener("ended",this.handleEnded),this.constraints=c!=null?c:s.getConstraints(),this.reacquireTrack=!1,this.providedByUser=h,this.muteQueue=new Queue}get id(){return this._mediaStreamTrack.id}get dimensions(){if(this.kind!==Track.Kind.Video)return;const{width:s,height:d}=this._mediaStreamTrack.getSettings();if(s&&d)return{width:s,height:d}}get isUpstreamPaused(){return this._isUpstreamPaused}get isUserProvided(){return this.providedByUser}async waitForDimensions(){let s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:defaultDimensionsTimeout;if(this.kind===Track.Kind.Audio)throw new Error("cannot get dimensions for audio tracks");const d=Date.now();for(;Date.now()-d<s;){const c=this.dimensions;if(c)return c;await sleep(50)}throw new TrackInvalidError("unable to get track dimensions after timeout")}async getDeviceId(){if(this.source===Track.Source.ScreenShare)return;const{deviceId:s,groupId:d}=this._mediaStreamTrack.getSettings(),c=this.kind===Track.Kind.Audio?"audioinput":"videoinput";return DeviceManager.getInstance().normalizeDeviceId(c,s,d)}async mute(){return this.setTrackMuted(!0),this}async unmute(){return this.setTrackMuted(!1),this}async replaceTrack(s){let d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(!this.sender)throw new TrackInvalidError("unable to replace an unpublished track");return this.attachedElements.forEach(c=>{detachTrack(this._mediaStreamTrack,c)}),this._mediaStreamTrack.removeEventListener("ended",this.handleEnded),this.providedByUser||this._mediaStreamTrack.stop(),s.addEventListener("ended",this.handleEnded),livekitLogger.debug("replace MediaStreamTrack"),this.sender&&await this.sender.replaceTrack(s),this._mediaStreamTrack=s,this._mediaStreamTrack.enabled=!this.isMuted,await this.resumeUpstream(),this.attachedElements.forEach(c=>{attachToElement(s,c)}),this.mediaStream=new MediaStream([s]),this.providedByUser=d,this}async restart(s){s||(s=this.constraints),livekitLogger.debug("restarting track with constraints",s);const d={audio:!1,video:!1};this.kind===Track.Kind.Video?d.video=s:d.audio=s,this.attachedElements.forEach(b=>{detachTrack(this._mediaStreamTrack,b)}),this._mediaStreamTrack.removeEventListener("ended",this.handleEnded),this._mediaStreamTrack.stop();const c=await navigator.mediaDevices.getUserMedia(d),h=c.getTracks()[0];return h.addEventListener("ended",this.handleEnded),livekitLogger.debug("re-acquired MediaStreamTrack"),this.sender&&await this.sender.replaceTrack(h),this._mediaStreamTrack=h,await this.resumeUpstream(),this.attachedElements.forEach(b=>{attachToElement(h,b)}),this.mediaStream=c,this.constraints=s,this.emit(TrackEvent.Restarted,this),this}setTrackMuted(s){livekitLogger.debug("setting ".concat(this.kind," track ").concat(s?"muted":"unmuted")),!(this.isMuted===s&&this._mediaStreamTrack.enabled!==s)&&(this.isMuted=s,this._mediaStreamTrack.enabled=!s,this.emit(s?TrackEvent.Muted:TrackEvent.Unmuted,this))}get needsReAcquisition(){return this._mediaStreamTrack.readyState!=="live"||this._mediaStreamTrack.muted||!this._mediaStreamTrack.enabled||this.reacquireTrack}async handleAppVisibilityChanged(){await super.handleAppVisibilityChanged(),isMobile()&&(livekitLogger.debug("visibility changed, is in Background: ".concat(this.isInBackground)),!this.isInBackground&&this.needsReAcquisition&&!this.isUserProvided&&!this.isMuted&&(livekitLogger.debug("track needs to be reaquired, restarting ".concat(this.source)),await this.restart(),this.reacquireTrack=!1))}async pauseUpstream(){this.muteQueue.run(async()=>{if(this._isUpstreamPaused===!0)return;if(!this.sender){livekitLogger.warn("unable to pause upstream for an unpublished track");return}this._isUpstreamPaused=!0,this.emit(TrackEvent.UpstreamPaused,this);const s=this.kind===Track.Kind.Audio?getEmptyAudioStreamTrack():getEmptyVideoStreamTrack();await this.sender.replaceTrack(s)})}async resumeUpstream(){this.muteQueue.run(async()=>{if(this._isUpstreamPaused!==!1){if(!this.sender){livekitLogger.warn("unable to resume upstream for an unpublished track");return}this._isUpstreamPaused=!1,this.emit(TrackEvent.UpstreamResumed,this),await this.sender.replaceTrack(this._mediaStreamTrack)}})}}class LocalAudioTrack extends LocalTrack{constructor(s,d){let c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;super(s,Track.Kind.Audio,d,c),this.stopOnMute=!1,this.monitorSender=async()=>{if(!this.sender){this._currentBitrate=0;return}let h;try{h=await this.getSenderStats()}catch(b){livekitLogger.error("could not get audio sender stats",{error:b});return}h&&this.prevStats&&(this._currentBitrate=computeBitrate(h,this.prevStats)),this.prevStats=h},this.checkForSilence()}async setDeviceId(s){this.constraints.deviceId!==s&&(this.constraints.deviceId=s,this.isMuted||await this.restartTrack())}async mute(){return await this.muteQueue.run(async()=>{this.source===Track.Source.Microphone&&this.stopOnMute&&!this.isUserProvided&&(livekitLogger.debug("stopping mic track"),this._mediaStreamTrack.stop()),await super.mute()}),this}async unmute(){return await this.muteQueue.run(async()=>{this.source===Track.Source.Microphone&&(this.stopOnMute||this._mediaStreamTrack.readyState==="ended")&&!this.isUserProvided&&(livekitLogger.debug("reacquiring mic track"),await this.restartTrack()),await super.unmute()}),this}async restartTrack(s){let d;if(s){const c=constraintsForOptions({audio:s});typeof c.audio!="boolean"&&(d=c.audio)}await this.restart(d)}async restart(s){const d=await super.restart(s);return this.checkForSilence(),d}startMonitor(){!isWeb()||this.monitorInterval||(this.monitorInterval=setInterval(()=>{this.monitorSender()},monitorFrequency))}async getSenderStats(){var s;if(!(!((s=this.sender)===null||s===void 0)&&s.getStats))return;const d=await this.sender.getStats();let c;return d.forEach(h=>{h.type==="outbound-rtp"&&(c={type:"audio",streamId:h.id,packetsSent:h.packetsSent,packetsLost:h.packetsLost,bytesSent:h.bytesSent,timestamp:h.timestamp,roundTripTime:h.roundTripTime,jitter:h.jitter})}),c}async checkForSilence(){await detectSilence(this)&&(this.isMuted||livekitLogger.warn("silence detected on local audio track"),this.emit(TrackEvent.AudioSilenceDetected))}}const refreshSubscribedCodecAfterNewCodec=5e3;class LocalVideoTrack extends LocalTrack{constructor(s,d){let c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;super(s,Track.Kind.Video,d,c),this.simulcastCodecs=new Map,this.monitorSender=async()=>{if(!this.sender){this._currentBitrate=0;return}let h;try{h=await this.getSenderStats()}catch(_){livekitLogger.error("could not get audio sender stats",{error:_});return}const b=new Map(h.map(_=>[_.rid,_]));if(this.prevStats){let _=0;b.forEach(($,_e)=>{var tt;const rt=(tt=this.prevStats)===null||tt===void 0?void 0:tt.get(_e);_+=computeBitrate($,rt)}),this._currentBitrate=_}this.prevStats=b},this.senderLock=new Mutex}get isSimulcast(){return!!(this.sender&&this.sender.getParameters().encodings.length>1)}startMonitor(s){var d;if(this.signalClient=s,!isWeb())return;const c=(d=this.sender)===null||d===void 0?void 0:d.getParameters();c&&(this.encodings=c.encodings),!this.monitorInterval&&(this.monitorInterval=setInterval(()=>{this.monitorSender()},monitorFrequency))}stop(){this._mediaStreamTrack.getConstraints(),this.simulcastCodecs.forEach(s=>{s.mediaStreamTrack.stop()}),super.stop()}async mute(){return await this.muteQueue.run(async()=>{this.source===Track.Source.Camera&&!this.isUserProvided&&(livekitLogger.debug("stopping camera track"),this._mediaStreamTrack.stop()),await super.mute()}),this}async unmute(){return await this.muteQueue.run(async()=>{this.source===Track.Source.Camera&&!this.isUserProvided&&(livekitLogger.debug("reacquiring camera track"),await this.restartTrack()),await super.unmute()}),this}async getSenderStats(){var s;if(!(!((s=this.sender)===null||s===void 0)&&s.getStats))return[];const d=[],c=await this.sender.getStats();return c.forEach(h=>{var b;if(h.type==="outbound-rtp"){const _={type:"video",streamId:h.id,frameHeight:h.frameHeight,frameWidth:h.frameWidth,firCount:h.firCount,pliCount:h.pliCount,nackCount:h.nackCount,packetsSent:h.packetsSent,bytesSent:h.bytesSent,framesSent:h.framesSent,timestamp:h.timestamp,rid:(b=h.rid)!==null&&b!==void 0?b:h.id,retransmittedPacketsSent:h.retransmittedPacketsSent,qualityLimitationReason:h.qualityLimitationReason,qualityLimitationResolutionChanges:h.qualityLimitationResolutionChanges},$=c.get(h.remoteId);$&&(_.jitter=$.jitter,_.packetsLost=$.packetsLost,_.roundTripTime=$.roundTripTime),d.push(_)}}),d}setPublishingQuality(s){const d=[];for(let c=VideoQuality.LOW;c<=VideoQuality.HIGH;c+=1)d.push({quality:c,enabled:c<=s});livekitLogger.debug("setting publishing quality. max quality ".concat(s)),this.setPublishingLayers(d)}async setDeviceId(s){this.constraints.deviceId!==s&&(this.constraints.deviceId=s,this.isMuted||await this.restartTrack())}async restartTrack(s){let d;if(s){const c=constraintsForOptions({video:s});typeof c.video!="boolean"&&(d=c.video)}await this.restart(d)}addSimulcastTrack(s,d){if(this.simulcastCodecs.has(s))throw new Error("".concat(s," already added"));const c={codec:s,mediaStreamTrack:this.mediaStreamTrack.clone(),sender:void 0,encodings:d};return this.simulcastCodecs.set(s,c),c}setSimulcastTrackSender(s,d){const c=this.simulcastCodecs.get(s);!c||(c.sender=d,setTimeout(()=>{this.subscribedCodecs&&this.setPublishingCodecs(this.subscribedCodecs)},refreshSubscribedCodecAfterNewCodec))}async setPublishingCodecs(s){if(livekitLogger.debug("setting publishing codecs",{codecs:s,currentCodec:this.codec}),!this.codec&&s.length>0)return await this.setPublishingLayers(s[0].qualities),[];this.subscribedCodecs=s;const d=[];var c=!1,h=!1,b;try{for(var _=_asyncIterator(s),$;c=!($=await _.next()).done;c=!1){const _e=$.value;if(!this.codec||this.codec===_e.codec)await this.setPublishingLayers(_e.qualities);else{const tt=this.simulcastCodecs.get(_e.codec);if(livekitLogger.debug("try setPublishingCodec for ".concat(_e.codec),tt),!tt||!tt.sender){for(const rt of _e.qualities)if(rt.enabled){d.push(_e.codec);break}}else tt.encodings&&(livekitLogger.debug("try setPublishingLayersForSender ".concat(_e.codec)),await setPublishingLayersForSender(tt.sender,tt.encodings,_e.qualities,this.senderLock))}}}catch(_e){h=!0,b=_e}finally{try{c&&_.return!=null&&await _.return()}finally{if(h)throw b}}return d}async setPublishingLayers(s){livekitLogger.debug("setting publishing layers",s),!(!this.sender||!this.encodings)&&await setPublishingLayersForSender(this.sender,this.encodings,s,this.senderLock)}async handleAppVisibilityChanged(){await super.handleAppVisibilityChanged(),!!isMobile()&&this.isInBackground&&this.source===Track.Source.Camera&&(this._mediaStreamTrack.enabled=!1)}}async function setPublishingLayersForSender(a,s,d,c){const h=await c.lock();livekitLogger.debug("setPublishingLayersForSender",{sender:a,qualities:d,senderEncodings:s});try{const b=a.getParameters(),{encodings:_}=b;if(!_)return;if(_.length!==s.length){livekitLogger.warn("cannot set publishing layers, encodings mismatch");return}let $=!1;_.forEach((_e,tt)=>{var rt;let ot=(rt=_e.rid)!==null&&rt!==void 0?rt:"";ot===""&&(ot="q");const it=videoQualityForRid(ot),st=d.find(lt=>lt.quality===it);!st||_e.active!==st.enabled&&($=!0,_e.active=st.enabled,livekitLogger.debug("setting layer ".concat(st.quality," to ").concat(_e.active?"enabled":"disabled")),isFireFox()&&(st.enabled?(_e.scaleResolutionDownBy=s[tt].scaleResolutionDownBy,_e.maxBitrate=s[tt].maxBitrate,_e.maxFrameRate=s[tt].maxFrameRate):(_e.scaleResolutionDownBy=4,_e.maxBitrate=10,_e.maxFrameRate=2)))}),$&&(b.encodings=_,await a.setParameters(b))}finally{h()}}function videoQualityForRid(a){switch(a){case"f":return VideoQuality.HIGH;case"h":return VideoQuality.MEDIUM;case"q":return VideoQuality.LOW;default:return VideoQuality.UNRECOGNIZED}}function videoLayersFromEncodings(a,s,d){return d?d.map(c=>{var h,b,_;const $=(h=c.scaleResolutionDownBy)!==null&&h!==void 0?h:1;let _e=videoQualityForRid((b=c.rid)!==null&&b!==void 0?b:"");return _e===VideoQuality.UNRECOGNIZED&&d.length===1&&(_e=VideoQuality.HIGH),{quality:_e,width:a/$,height:s/$,bitrate:(_=c.maxBitrate)!==null&&_!==void 0?_:0,ssrc:0}}):[{quality:VideoQuality.HIGH,width:a,height:s,bitrate:0,ssrc:0}]}class RemoteTrack extends Track{constructor(s,d,c,h){super(s,c),this.sid=d,this.receiver=h}setMuted(s){this.isMuted!==s&&(this.isMuted=s,this._mediaStreamTrack.enabled=!s,this.emit(s?TrackEvent.Muted:TrackEvent.Unmuted,this))}setMediaStream(s){this.mediaStream=s,s.onremovetrack=()=>{this.receiver=void 0,this._currentBitrate=0,this.emit(TrackEvent.Ended,this)}}start(){this.startMonitor(),super.enable()}stop(){this.stopMonitor(),super.disable()}startMonitor(){this.monitorInterval||(this.monitorInterval=setInterval(()=>this.monitorReceiver(),monitorFrequency))}}class RemoteAudioTrack extends RemoteTrack{constructor(s,d,c,h,b){super(s,d,Track.Kind.Audio,c),this.monitorReceiver=async()=>{if(!this.receiver){this._currentBitrate=0;return}const _=await this.getReceiverStats();_&&this.prevStats&&this.receiver&&(this._currentBitrate=computeBitrate(_,this.prevStats)),this.prevStats=_},this.audioContext=h,this.webAudioPluginNodes=[],b&&(this.sinkId=b.deviceId)}setVolume(s){var d;for(const c of this.attachedElements)this.audioContext?(d=this.gainNode)===null||d===void 0||d.gain.setTargetAtTime(s,0,.1):c.volume=s;this.elementVolume=s}getVolume(){if(this.elementVolume)return this.elementVolume;let s=0;return this.attachedElements.forEach(d=>{d.volume>s&&(s=d.volume)}),s}async setSinkId(s){this.sinkId=s,await Promise.all(this.attachedElements.map(d=>{if(!!supportsSetSinkId(d))return d.setSinkId(s)}))}attach(s){const d=this.attachedElements.length===0;return s?super.attach(s):s=super.attach(),this.elementVolume&&(s.volume=this.elementVolume),this.sinkId&&supportsSetSinkId(s)&&s.setSinkId(this.sinkId),this.audioContext&&d&&(livekitLogger.debug("using audio context mapping"),this.connectWebAudio(this.audioContext,s),s.volume=0,s.muted=!0),s}detach(s){let d;return s?(d=super.detach(s),this.audioContext&&(this.attachedElements.length>0?this.connectWebAudio(this.audioContext,this.attachedElements[0]):this.disconnectWebAudio())):(d=super.detach(),this.disconnectWebAudio()),d}setAudioContext(s){this.audioContext=s,s&&this.attachedElements.length>0?this.connectWebAudio(s,this.attachedElements[0]):s||this.disconnectWebAudio()}setWebAudioPlugins(s){this.webAudioPluginNodes=s,this.attachedElements.length>0&&this.audioContext&&this.connectWebAudio(this.audioContext,this.attachedElements[0])}connectWebAudio(s,d){this.disconnectWebAudio(),this.sourceNode=s.createMediaStreamSource(d.srcObject);let c=this.sourceNode;this.webAudioPluginNodes.forEach(h=>{c.connect(h),c=h}),this.gainNode=s.createGain(),c.connect(this.gainNode),this.gainNode.connect(s.destination),this.elementVolume&&this.gainNode.gain.setTargetAtTime(this.elementVolume,0,.1),s.state!=="running"&&s.resume().then(()=>{s.state!=="running"&&this.emit(TrackEvent.AudioPlaybackFailed,new Error("Audio Context couldn't be started automatically"))}).catch(h=>{this.emit(TrackEvent.AudioPlaybackFailed,h)})}disconnectWebAudio(){var s,d;(s=this.gainNode)===null||s===void 0||s.disconnect(),(d=this.sourceNode)===null||d===void 0||d.disconnect(),this.gainNode=void 0,this.sourceNode=void 0}async getReceiverStats(){if(!this.receiver||!this.receiver.getStats)return;const s=await this.receiver.getStats();let d;return s.forEach(c=>{c.type==="inbound-rtp"&&(d={type:"audio",timestamp:c.timestamp,jitter:c.jitter,bytesReceived:c.bytesReceived,concealedSamples:c.concealedSamples,concealmentEvents:c.concealmentEvents,silentConcealedSamples:c.silentConcealedSamples,silentConcealmentEvents:c.silentConcealmentEvents,totalAudioEnergy:c.totalAudioEnergy,totalSamplesDuration:c.totalSamplesDuration})}),d}}function r$2(a,s,d){var c,h,b;s===void 0&&(s=50),d===void 0&&(d={});var _=(c=d.isImmediate)!=null&&c,$=(h=d.callback)!=null&&h,_e=d.maxWait,tt=Date.now(),rt=[];function ot(){if(_e!==void 0){var st=Date.now()-tt;if(st+s>=_e)return _e-st}return s}var it=function(){var st=[].slice.call(arguments),lt=this;return new Promise(function(dt,ut){var ht=_&&b===void 0;if(b!==void 0&&clearTimeout(b),b=setTimeout(function(){if(b=void 0,tt=Date.now(),!_){var ct=a.apply(lt,st);$&&$(ct),rt.forEach(function(mt){return(0,mt.resolve)(ct)}),rt=[]}},ot()),ht){var nt=a.apply(lt,st);return $&&$(nt),dt(nt)}rt.push({resolve:dt,reject:ut})})};return it.cancel=function(st){b!==void 0&&clearTimeout(b),rt.forEach(function(lt){return(0,lt.reject)(st)}),rt=[]},it}class CriticalTimers{}CriticalTimers.setTimeout=function(){return setTimeout(...arguments)};CriticalTimers.setInterval=function(){return setInterval(...arguments)};CriticalTimers.clearTimeout=function(){return clearTimeout(...arguments)};CriticalTimers.clearInterval=function(){return clearInterval(...arguments)};const REACTION_DELAY=100;class RemoteVideoTrack extends RemoteTrack{constructor(s,d,c,h){super(s,d,Track.Kind.Video,c),this.elementInfos=[],this.hasUsedAttach=!1,this.monitorReceiver=async()=>{if(!this.receiver){this._currentBitrate=0;return}const b=await this.getReceiverStats();b&&this.prevStats&&this.receiver&&(this._currentBitrate=computeBitrate(b,this.prevStats)),this.prevStats=b},this.debouncedHandleResize=r$2(()=>{this.updateDimensions()},REACTION_DELAY),this.adaptiveStreamSettings=h}get isAdaptiveStream(){return this.adaptiveStreamSettings!==void 0}get mediaStreamTrack(){return this.isAdaptiveStream&&!this.hasUsedAttach&&livekitLogger.warn("When using adaptiveStream, you need to use remoteVideoTrack.attach() to add the track to a HTMLVideoElement, otherwise your video tracks might never start"),this._mediaStreamTrack}setMuted(s){super.setMuted(s),this.attachedElements.forEach(d=>{s?detachTrack(this._mediaStreamTrack,d):attachToElement(this._mediaStreamTrack,d)})}attach(s){if(s?super.attach(s):s=super.attach(),this.adaptiveStreamSettings&&this.elementInfos.find(d=>d.element===s)===void 0){const d=new HTMLElementInfo(s);this.observeElementInfo(d)}return this.hasUsedAttach=!0,s}observeElementInfo(s){this.adaptiveStreamSettings&&this.elementInfos.find(d=>d===s)===void 0?(s.handleResize=()=>{this.debouncedHandleResize()},s.handleVisibilityChanged=()=>{this.updateVisibility()},this.elementInfos.push(s),s.observe(),this.debouncedHandleResize(),this.updateVisibility()):livekitLogger.warn("visibility resize observer not triggered")}stopObservingElementInfo(s){if(!this.isAdaptiveStream){livekitLogger.warn("stopObservingElementInfo ignored");return}const d=this.elementInfos.filter(c=>c===s);for(const c of d)c.stopObserving();this.elementInfos=this.elementInfos.filter(c=>c!==s),this.updateVisibility()}detach(s){let d=[];if(s)return this.stopObservingElement(s),super.detach(s);d=super.detach();for(const c of d)this.stopObservingElement(c);return d}getDecoderImplementation(){var s;return(s=this.prevStats)===null||s===void 0?void 0:s.decoderImplementation}async getReceiverStats(){if(!this.receiver||!this.receiver.getStats)return;const s=await this.receiver.getStats();let d;return s.forEach(c=>{c.type==="inbound-rtp"&&(d={type:"video",framesDecoded:c.framesDecoded,framesDropped:c.framesDropped,framesReceived:c.framesReceived,packetsReceived:c.packetsReceived,packetsLost:c.packetsLost,frameWidth:c.frameWidth,frameHeight:c.frameHeight,pliCount:c.pliCount,firCount:c.firCount,nackCount:c.nackCount,jitter:c.jitter,timestamp:c.timestamp,bytesReceived:c.bytesReceived,decoderImplementation:c.decoderImplementation})}),d}stopObservingElement(s){const d=this.elementInfos.filter(c=>c.element===s);for(const c of d)c.stopObserving();this.elementInfos=this.elementInfos.filter(c=>c.element!==s)}async handleAppVisibilityChanged(){await super.handleAppVisibilityChanged(),this.isAdaptiveStream&&this.updateVisibility()}updateVisibility(){var s,d;const c=this.elementInfos.reduce((_,$)=>Math.max(_,$.visibilityChangedAt||0),0),h=!((d=(s=this.adaptiveStreamSettings)===null||s===void 0?void 0:s.pauseVideoInBackground)!==null&&d!==void 0)||d?this.isInBackground:!1,b=this.elementInfos.some(_=>_.visible)&&!h;if(this.lastVisible!==b){if(!b&&Date.now()-c<REACTION_DELAY){CriticalTimers.setTimeout(()=>{this.updateVisibility()},REACTION_DELAY);return}this.lastVisible=b,this.emit(TrackEvent.VisibilityChanged,b,this)}}updateDimensions(){var s,d,c,h;let b=0,_=0;for(const $ of this.elementInfos){const _e=(d=(s=this.adaptiveStreamSettings)===null||s===void 0?void 0:s.pixelDensity)!==null&&d!==void 0?d:1,tt=_e==="screen"?window.devicePixelRatio:_e,rt=$.width()*tt,ot=$.height()*tt;rt+ot>b+_&&(b=rt,_=ot)}((c=this.lastDimensions)===null||c===void 0?void 0:c.width)===b&&((h=this.lastDimensions)===null||h===void 0?void 0:h.height)===_||(this.lastDimensions={width:b,height:_},this.emit(TrackEvent.VideoDimensionsChanged,this.lastDimensions,this))}}class HTMLElementInfo{constructor(s,d){this.onVisibilityChanged=c=>{var h;const{target:b,isIntersecting:_}=c;b===this.element&&(this.visible=_,this.visibilityChangedAt=Date.now(),(h=this.handleVisibilityChanged)===null||h===void 0||h.call(this))},this.element=s,this.visible=d!=null?d:isElementInViewport(s),this.visibilityChangedAt=0}width(){return this.element.clientWidth}height(){return this.element.clientHeight}observe(){this.element.handleResize=()=>{var s;(s=this.handleResize)===null||s===void 0||s.call(this)},this.element.handleVisibilityChanged=this.onVisibilityChanged,getIntersectionObserver().observe(this.element),getResizeObserver().observe(this.element)}stopObserving(){var s,d;(s=getIntersectionObserver())===null||s===void 0||s.unobserve(this.element),(d=getResizeObserver())===null||d===void 0||d.unobserve(this.element)}}function isElementInViewport(a){let s=a.offsetTop,d=a.offsetLeft;const c=a.offsetWidth,h=a.offsetHeight,{hidden:b}=a,{opacity:_,display:$}=getComputedStyle(a);for(;a.offsetParent;)a=a.offsetParent,s+=a.offsetTop,d+=a.offsetLeft;return s<window.pageYOffset+window.innerHeight&&d<window.pageXOffset+window.innerWidth&&s+h>window.pageYOffset&&d+c>window.pageXOffset&&!b&&(_!==""?parseFloat(_)>0:!0)&&$!=="none"}class TrackPublication extends eventsExports.EventEmitter{constructor(s,d,c){super(),this.metadataMuted=!1,this.handleMuted=()=>{this.emit(TrackEvent.Muted)},this.handleUnmuted=()=>{this.emit(TrackEvent.Unmuted)},this.setMaxListeners(100),this.kind=s,this.trackSid=d,this.trackName=c,this.source=Track.Source.Unknown}setTrack(s){this.track&&(this.track.off(TrackEvent.Muted,this.handleMuted),this.track.off(TrackEvent.Unmuted,this.handleUnmuted)),this.track=s,s&&(s.on(TrackEvent.Muted,this.handleMuted),s.on(TrackEvent.Unmuted,this.handleUnmuted))}get isMuted(){return this.metadataMuted}get isEnabled(){return!0}get isSubscribed(){return this.track!==void 0}get audioTrack(){if(this.track instanceof LocalAudioTrack||this.track instanceof RemoteAudioTrack)return this.track}get videoTrack(){if(this.track instanceof LocalVideoTrack||this.track instanceof RemoteVideoTrack)return this.track}updateInfo(s){this.trackSid=s.sid,this.trackName=s.name,this.source=Track.sourceFromProto(s.source),this.mimeType=s.mimeType,this.kind===Track.Kind.Video&&s.width>0&&(this.dimensions={width:s.width,height:s.height},this.simulcasted=s.simulcast),this.trackInfo=s,livekitLogger.trace("update publication info",{info:s})}}(function(a){(function(s){s.Desired="desired",s.Subscribed="subscribed",s.Unsubscribed="unsubscribed"})(a.SubscriptionStatus||(a.SubscriptionStatus={})),function(s){s.Allowed="allowed",s.NotAllowed="not_allowed"}(a.PermissionStatus||(a.PermissionStatus={}))})(TrackPublication||(TrackPublication={}));class LocalTrackPublication extends TrackPublication{get isUpstreamPaused(){var s;return(s=this.track)===null||s===void 0?void 0:s.isUpstreamPaused}constructor(s,d,c){super(s,d.sid,d.name),this.track=void 0,this.handleTrackEnded=()=>{this.emit(TrackEvent.Ended)},this.updateInfo(d),this.setTrack(c)}setTrack(s){this.track&&this.track.off(TrackEvent.Ended,this.handleTrackEnded),super.setTrack(s),s&&s.on(TrackEvent.Ended,this.handleTrackEnded)}get isMuted(){return this.track?this.track.isMuted:super.isMuted}get audioTrack(){return super.audioTrack}get videoTrack(){return super.videoTrack}async mute(){var s;return(s=this.track)===null||s===void 0?void 0:s.mute()}async unmute(){var s;return(s=this.track)===null||s===void 0?void 0:s.unmute()}async pauseUpstream(){var s;await((s=this.track)===null||s===void 0?void 0:s.pauseUpstream())}async resumeUpstream(){var s;await((s=this.track)===null||s===void 0?void 0:s.resumeUpstream())}}class VideoPreset{constructor(s,d,c,h){this.width=s,this.height=d,this.encoding={maxBitrate:c,maxFramerate:h}}get resolution(){return{width:this.width,height:this.height,frameRate:this.encoding.maxFramerate,aspectRatio:this.width/this.height}}}const backupCodecs=["vp8","h264"];function isBackupCodec(a){return!!backupCodecs.find(s=>s===a)}var AudioPresets;(function(a){a.telephone={maxBitrate:12e3},a.speech={maxBitrate:2e4},a.music={maxBitrate:32e3},a.musicStereo={maxBitrate:48e3},a.musicHighQuality={maxBitrate:64e3},a.musicHighQualityStereo={maxBitrate:96e3}})(AudioPresets||(AudioPresets={}));const VideoPresets={h90:new VideoPreset(160,90,6e4,15),h180:new VideoPreset(320,180,12e4,15),h216:new VideoPreset(384,216,18e4,15),h360:new VideoPreset(640,360,3e5,20),h540:new VideoPreset(960,540,6e5,25),h720:new VideoPreset(1280,720,17e5,30),h1080:new VideoPreset(1920,1080,3e6,30),h1440:new VideoPreset(2560,1440,5e6,30),h2160:new VideoPreset(3840,2160,8e6,30)},VideoPresets43={h120:new VideoPreset(160,120,8e4,15),h180:new VideoPreset(240,180,1e5,15),h240:new VideoPreset(320,240,15e4,15),h360:new VideoPreset(480,360,225e3,20),h480:new VideoPreset(640,480,3e5,20),h540:new VideoPreset(720,540,45e4,25),h720:new VideoPreset(960,720,15e5,30),h1080:new VideoPreset(1440,1080,25e5,30),h1440:new VideoPreset(1920,1440,35e5,30)},ScreenSharePresets={h360fps3:new VideoPreset(640,360,2e5,3),h720fps5:new VideoPreset(1280,720,4e5,5),h720fps15:new VideoPreset(1280,720,1e6,15),h1080fps15:new VideoPreset(1920,1080,15e5,15),h1080fps30:new VideoPreset(1920,1080,3e6,30)};var ConnectionQuality;(function(a){a.Excellent="excellent",a.Good="good",a.Poor="poor",a.Unknown="unknown"})(ConnectionQuality||(ConnectionQuality={}));function qualityFromProto(a){switch(a){case ConnectionQuality$1.EXCELLENT:return ConnectionQuality.Excellent;case ConnectionQuality$1.GOOD:return ConnectionQuality.Good;case ConnectionQuality$1.POOR:return ConnectionQuality.Poor;default:return ConnectionQuality.Unknown}}class Participant extends eventsExports.EventEmitter{constructor(s,d,c,h){super(),this.audioLevel=0,this.isSpeaking=!1,this._connectionQuality=ConnectionQuality.Unknown,this.setMaxListeners(100),this.sid=s,this.identity=d,this.name=c,this.metadata=h,this.audioTracks=new Map,this.videoTracks=new Map,this.tracks=new Map}getTracks(){return Array.from(this.tracks.values())}getTrack(s){for(const[,d]of this.tracks)if(d.source===s)return d}getTrackByName(s){for(const[,d]of this.tracks)if(d.trackName===s)return d}get connectionQuality(){return this._connectionQuality}get isCameraEnabled(){var s;const d=this.getTrack(Track.Source.Camera);return!(!((s=d==null?void 0:d.isMuted)!==null&&s!==void 0)||s)}get isMicrophoneEnabled(){var s;const d=this.getTrack(Track.Source.Microphone);return!(!((s=d==null?void 0:d.isMuted)!==null&&s!==void 0)||s)}get isScreenShareEnabled(){return!!this.getTrack(Track.Source.ScreenShare)}get isLocal(){return!1}get joinedAt(){return this.participantInfo?new Date(this.participantInfo.joinedAt*1e3):new Date}updateInfo(s){this.identity=s.identity,this.sid=s.sid,this.name=s.name,this.setMetadata(s.metadata),s.permission&&this.setPermissions(s.permission),this.participantInfo=s,livekitLogger.trace("update participant info",{info:s})}setMetadata(s){const d=this.metadata!==s,c=this.metadata;this.metadata=s,d&&this.emit(ParticipantEvent.ParticipantMetadataChanged,c)}setPermissions(s){var d,c,h,b,_;const $=this.permissions,_e=s.canPublish!==((d=this.permissions)===null||d===void 0?void 0:d.canPublish)||s.canSubscribe!==((c=this.permissions)===null||c===void 0?void 0:c.canSubscribe)||s.canPublishData!==((h=this.permissions)===null||h===void 0?void 0:h.canPublishData)||s.hidden!==((b=this.permissions)===null||b===void 0?void 0:b.hidden)||s.recorder!==((_=this.permissions)===null||_===void 0?void 0:_.recorder)||s.canPublishSources.length!==this.permissions.canPublishSources.length||s.canPublishSources.some((tt,rt)=>{var ot;return tt!==((ot=this.permissions)===null||ot===void 0?void 0:ot.canPublishSources[rt])});return this.permissions=s,_e&&this.emit(ParticipantEvent.ParticipantPermissionsChanged,$),_e}setIsSpeaking(s){s!==this.isSpeaking&&(this.isSpeaking=s,s&&(this.lastSpokeAt=new Date),this.emit(ParticipantEvent.IsSpeakingChanged,s))}setConnectionQuality(s){const d=this._connectionQuality;this._connectionQuality=qualityFromProto(s),d!==this._connectionQuality&&this.emit(ParticipantEvent.ConnectionQualityChanged,this._connectionQuality)}addTrackPublication(s){s.on(TrackEvent.Muted,()=>{this.emit(ParticipantEvent.TrackMuted,s)}),s.on(TrackEvent.Unmuted,()=>{this.emit(ParticipantEvent.TrackUnmuted,s)});const d=s;switch(d.track&&(d.track.sid=s.trackSid),this.tracks.set(s.trackSid,s),s.kind){case Track.Kind.Audio:this.audioTracks.set(s.trackSid,s);break;case Track.Kind.Video:this.videoTracks.set(s.trackSid,s);break}}}function trackPermissionToProto(a){var s,d,c;if(!a.participantSid&&!a.participantIdentity)throw new Error("Invalid track permission, must provide at least one of participantIdentity and participantSid");return{participantIdentity:(s=a.participantIdentity)!==null&&s!==void 0?s:"",participantSid:(d=a.participantSid)!==null&&d!==void 0?d:"",allTracks:(c=a.allowAll)!==null&&c!==void 0?c:!1,trackSids:a.allowedTrackSids||[]}}function mediaTrackToLocalTrack(a,s){switch(a.kind){case"audio":return new LocalAudioTrack(a,s,!1);case"video":return new LocalVideoTrack(a,s,!1);default:throw new TrackInvalidError("unsupported track type: ".concat(a.kind))}}const presets169=Object.values(VideoPresets),presets43=Object.values(VideoPresets43),presetsScreenShare=Object.values(ScreenSharePresets),defaultSimulcastPresets169=[VideoPresets.h180,VideoPresets.h360],defaultSimulcastPresets43=[VideoPresets43.h180,VideoPresets43.h360],computeDefaultScreenShareSimulcastPresets=a=>[{scaleResolutionDownBy:2,fps:3}].map(d=>{var c;return new VideoPreset(Math.floor(a.width/d.scaleResolutionDownBy),Math.floor(a.height/d.scaleResolutionDownBy),Math.max(15e4,Math.floor(a.encoding.maxBitrate/(d.scaleResolutionDownBy**2*(((c=a.encoding.maxFramerate)!==null&&c!==void 0?c:30)/d.fps)))),d.fps)}),videoRids=["q","h","f"];function computeVideoEncodings(a,s,d,c){var h,b;let _=c==null?void 0:c.videoEncoding;a&&(_=c==null?void 0:c.screenShareEncoding);const $=c==null?void 0:c.simulcast,_e=c==null?void 0:c.scalabilityMode,tt=c==null?void 0:c.videoCodec;if(!_&&!$&&!_e||!s||!d)return[{}];_||(_=determineAppropriateEncoding(a,s,d,tt),livekitLogger.debug("using video encoding",_));const rt=new VideoPreset(s,d,_.maxBitrate,_.maxFramerate);if(_e&&tt==="av1"){livekitLogger.debug("using svc with scalabilityMode ".concat(_e));const st=[];switch(_e){case"L3T3":for(let lt=0;lt<3;lt+=1)st.push({rid:videoRids[2-lt],scaleResolutionDownBy:2**lt,maxBitrate:_.maxBitrate/3**lt,maxFramerate:rt.encoding.maxFramerate,scalabilityMode:"L3T3"});return livekitLogger.debug("encodings",st),st;default:throw new Error("unsupported scalabilityMode: ".concat(_e))}}if(!$)return[_];let ot=[];a?ot=(h=sortPresets(c==null?void 0:c.screenShareSimulcastLayers))!==null&&h!==void 0?h:defaultSimulcastLayers(a,rt):ot=(b=sortPresets(c==null?void 0:c.videoSimulcastLayers))!==null&&b!==void 0?b:defaultSimulcastLayers(a,rt);let it;if(ot.length>0){const st=ot[0];ot.length>1&&([,it]=ot);const lt=Math.max(s,d);if(lt>=960&&it)return encodingsFromPresets(s,d,[st,it,rt]);if(lt>=480)return encodingsFromPresets(s,d,[st,rt])}return encodingsFromPresets(s,d,[rt])}function computeTrackBackupEncodings(a,s,d){var c,h,b,_;if(!d.backupCodec||d.backupCodec.codec===d.videoCodec)return;s!==d.backupCodec.codec&&livekitLogger.warn("requested a different codec than specified as backup",{serverRequested:s,backup:d.backupCodec.codec}),d.videoCodec=s,d.videoEncoding=d.backupCodec.encoding;const $=a.mediaStreamTrack.getSettings(),_e=(c=$.width)!==null&&c!==void 0?c:(h=a.dimensions)===null||h===void 0?void 0:h.width,tt=(b=$.height)!==null&&b!==void 0?b:(_=a.dimensions)===null||_===void 0?void 0:_.height;return computeVideoEncodings(a.source===Track.Source.ScreenShare,_e,tt,d)}function determineAppropriateEncoding(a,s,d,c){const h=presetsForResolution(a,s,d);let{encoding:b}=h[0];const _=Math.max(s,d);for(let $=0;$<h.length;$+=1){const _e=h[$];if(b=_e.encoding,_e.width>=_)break}if(c)switch(c){case"av1":b.maxBitrate=b.maxBitrate*.7;break}return b}function presetsForResolution(a,s,d){if(a)return presetsScreenShare;const c=s>d?s/d:d/s;return Math.abs(c-16/9)<Math.abs(c-4/3)?presets169:presets43}function defaultSimulcastLayers(a,s){if(a)return computeDefaultScreenShareSimulcastPresets(s);const{width:d,height:c}=s,h=d>c?d/c:c/d;return Math.abs(h-16/9)<Math.abs(h-4/3)?defaultSimulcastPresets169:defaultSimulcastPresets43}function encodingsFromPresets(a,s,d){const c=[];return d.forEach((h,b)=>{if(b>=videoRids.length)return;const _=Math.min(a,s),$=videoRids[b];c.push({rid:$,scaleResolutionDownBy:Math.max(1,_/Math.min(h.width,h.height)),maxBitrate:h.encoding.maxBitrate,maxFramerate:h.encoding.maxFramerate})}),c}function sortPresets(a){if(!!a)return a.sort((s,d)=>{const{encoding:c}=s,{encoding:h}=d;return c.maxBitrate>h.maxBitrate?1:c.maxBitrate<h.maxBitrate?-1:c.maxBitrate===h.maxBitrate&&c.maxFramerate&&h.maxFramerate?c.maxFramerate>h.maxFramerate?1:-1:0})}class RemoteTrackPublication extends TrackPublication{constructor(s,d,c){super(s,d.sid,d.name),this.track=void 0,this.allowed=!0,this.disabled=!1,this.currentVideoQuality=VideoQuality.HIGH,this.handleEnded=h=>{this.setTrack(void 0),this.emit(TrackEvent.Ended,h)},this.handleVisibilityChange=h=>{livekitLogger.debug("adaptivestream video visibility ".concat(this.trackSid,", visible=").concat(h),{trackSid:this.trackSid}),this.disabled=!h,this.emitTrackUpdate()},this.handleVideoDimensionsChange=h=>{livekitLogger.debug("adaptivestream video dimensions ".concat(h.width,"x").concat(h.height),{trackSid:this.trackSid}),this.videoDimensions=h,this.emitTrackUpdate()},this.subscribed=c,this.updateInfo(d)}setSubscribed(s){const d=this.subscriptionStatus,c=this.permissionStatus;this.subscribed=s,s&&(this.allowed=!0);const h={trackSids:[this.trackSid],subscribe:this.subscribed,participantTracks:[{participantSid:"",trackSids:[this.trackSid]}]};this.emit(TrackEvent.UpdateSubscription,h),this.emitSubscriptionUpdateIfChanged(d),this.emitPermissionUpdateIfChanged(c)}get subscriptionStatus(){return this.subscribed===!1?TrackPublication.SubscriptionStatus.Unsubscribed:super.isSubscribed?TrackPublication.SubscriptionStatus.Subscribed:TrackPublication.SubscriptionStatus.Desired}get permissionStatus(){return this.allowed?TrackPublication.PermissionStatus.Allowed:TrackPublication.PermissionStatus.NotAllowed}get isSubscribed(){return this.subscribed===!1?!1:super.isSubscribed}get isDesired(){return this.subscribed!==!1}get isEnabled(){return!this.disabled}setEnabled(s){!this.isManualOperationAllowed()||this.disabled===!s||(this.disabled=!s,this.emitTrackUpdate())}setVideoQuality(s){!this.isManualOperationAllowed()||this.currentVideoQuality===s||(this.currentVideoQuality=s,this.videoDimensions=void 0,this.emitTrackUpdate())}setVideoDimensions(s){var d,c;!this.isManualOperationAllowed()||((d=this.videoDimensions)===null||d===void 0?void 0:d.width)===s.width&&((c=this.videoDimensions)===null||c===void 0?void 0:c.height)===s.height||(this.track instanceof RemoteVideoTrack&&(this.videoDimensions=s),this.currentVideoQuality=void 0,this.emitTrackUpdate())}setVideoFPS(s){!this.isManualOperationAllowed()||this.track instanceof RemoteVideoTrack&&this.fps!==s&&(this.fps=s,this.emitTrackUpdate())}get videoQuality(){return this.currentVideoQuality}setTrack(s){const d=this.subscriptionStatus,c=this.permissionStatus,h=this.track;h!==s&&(h&&(h.off(TrackEvent.VideoDimensionsChanged,this.handleVideoDimensionsChange),h.off(TrackEvent.VisibilityChanged,this.handleVisibilityChange),h.off(TrackEvent.Ended,this.handleEnded),h.detach(),this.emit(TrackEvent.Unsubscribed,h)),super.setTrack(s),s&&(s.sid=this.trackSid,s.on(TrackEvent.VideoDimensionsChanged,this.handleVideoDimensionsChange),s.on(TrackEvent.VisibilityChanged,this.handleVisibilityChange),s.on(TrackEvent.Ended,this.handleEnded),this.emit(TrackEvent.Subscribed,s)),this.emitPermissionUpdateIfChanged(c),this.emitSubscriptionUpdateIfChanged(d))}setAllowed(s){const d=this.subscriptionStatus,c=this.permissionStatus;this.allowed=s,this.emitPermissionUpdateIfChanged(c),this.emitSubscriptionUpdateIfChanged(d)}updateInfo(s){var d;super.updateInfo(s),this.metadataMuted=s.muted,(d=this.track)===null||d===void 0||d.setMuted(s.muted)}emitSubscriptionUpdateIfChanged(s){const d=this.subscriptionStatus;s!==d&&this.emit(TrackEvent.SubscriptionStatusChanged,d,s)}emitPermissionUpdateIfChanged(s){this.permissionStatus!==s&&this.emit(TrackEvent.SubscriptionPermissionChanged,this.permissionStatus,s)}isManualOperationAllowed(){return this.isAdaptiveStream?(livekitLogger.warn("adaptive stream is enabled, cannot change track settings",{trackSid:this.trackSid}),!1):this.isDesired?!0:(livekitLogger.warn("cannot update track settings when not subscribed",{trackSid:this.trackSid}),!1)}get isAdaptiveStream(){return this.track instanceof RemoteVideoTrack&&this.track.isAdaptiveStream}emitTrackUpdate(){const s=UpdateTrackSettings.fromPartial({trackSids:[this.trackSid],disabled:this.disabled,fps:this.fps});this.videoDimensions?(s.width=this.videoDimensions.width,s.height=this.videoDimensions.height):this.currentVideoQuality!==void 0?s.quality=this.currentVideoQuality:s.quality=VideoQuality.HIGH,this.emit(TrackEvent.UpdateSettings,s)}}class RemoteParticipant extends Participant{static fromParticipantInfo(s,d){return new RemoteParticipant(s,d.sid,d.identity,d.name,d.metadata)}constructor(s,d,c,h,b){super(d,c||"",h,b),this.signalClient=s,this.tracks=new Map,this.audioTracks=new Map,this.videoTracks=new Map}addTrackPublication(s){super.addTrackPublication(s),s.on(TrackEvent.UpdateSettings,d=>{livekitLogger.debug("send update settings",d),this.signalClient.sendUpdateTrackSettings(d)}),s.on(TrackEvent.UpdateSubscription,d=>{d.participantTracks.forEach(c=>{c.participantSid=this.sid}),this.signalClient.sendUpdateSubscription(d)}),s.on(TrackEvent.SubscriptionPermissionChanged,d=>{this.emit(ParticipantEvent.TrackSubscriptionPermissionChanged,s,d)}),s.on(TrackEvent.SubscriptionStatusChanged,d=>{this.emit(ParticipantEvent.TrackSubscriptionStatusChanged,s,d)}),s.on(TrackEvent.Subscribed,d=>{this.emit(ParticipantEvent.TrackSubscribed,d,s)}),s.on(TrackEvent.Unsubscribed,d=>{this.emit(ParticipantEvent.TrackUnsubscribed,d,s)})}getTrack(s){const d=super.getTrack(s);if(d)return d}getTrackByName(s){const d=super.getTrackByName(s);if(d)return d}setVolume(s){this.volume=s;const d=this.getTrack(Track.Source.Microphone);d&&d.track&&d.track.setVolume(s)}getVolume(){const s=this.getTrack(Track.Source.Microphone);return s&&s.track?s.track.getVolume():this.volume}addSubscribedMediaTrack(s,d,c,h,b,_){let $=this.getTrackPublication(d);if($||d.startsWith("TR")||this.tracks.forEach(rt=>{!$&&s.kind===rt.kind.toString()&&($=rt)}),!$){if(_===0){livekitLogger.error("could not find published track",{participant:this.sid,trackSid:d}),this.emit(ParticipantEvent.TrackSubscriptionFailed,d);return}_===void 0&&(_=20),setTimeout(()=>{this.addSubscribedMediaTrack(s,d,c,h,b,_-1)},150);return}if(s.readyState==="ended"){livekitLogger.error("unable to subscribe because MediaStreamTrack is ended. Do not call MediaStreamTrack.stop()",{participant:this.sid,trackSid:d}),this.emit(ParticipantEvent.TrackSubscriptionFailed,d);return}const _e=s.kind==="video";let tt;return _e?tt=new RemoteVideoTrack(s,d,h,b):tt=new RemoteAudioTrack(s,d,h,this.audioContext,this.audioOutput),tt.source=$.source,tt.isMuted=$.isMuted,tt.setMediaStream(c),tt.start(),$.setTrack(tt),this.volume!==void 0&&tt instanceof RemoteAudioTrack&&tt.source===Track.Source.Microphone&&tt.setVolume(this.volume),$}get hasMetadata(){return!!this.participantInfo}getTrackPublication(s){return this.tracks.get(s)}updateInfo(s){super.updateInfo(s);const d=new Map,c=new Map;s.tracks.forEach(h=>{var b;let _=this.getTrackPublication(h.sid);if(_)_.updateInfo(h);else{const $=Track.kindFromProto(h.type);if(!$)return;_=new RemoteTrackPublication($,h,(b=this.signalClient.connectOptions)===null||b===void 0?void 0:b.autoSubscribe),_.updateInfo(h),c.set(h.sid,_);const _e=Array.from(this.tracks.values()).find(tt=>tt.source===(_==null?void 0:_.source));_e&&_.source!==Track.Source.Unknown&&livekitLogger.debug("received a second track publication for ".concat(this.identity," with the same source: ").concat(_.source),{oldTrack:_e,newTrack:_,participant:this,participantInfo:s}),this.addTrackPublication(_)}d.set(h.sid,_)}),this.tracks.forEach(h=>{d.has(h.trackSid)||(livekitLogger.trace("detected removed track on remote participant, unpublishing",{publication:h,participantSid:this.sid}),this.unpublishTrack(h.trackSid,!0))}),c.forEach(h=>{this.emit(ParticipantEvent.TrackPublished,h)})}unpublishTrack(s,d){const c=this.tracks.get(s);if(!c)return;switch(this.tracks.delete(s),c.kind){case Track.Kind.Audio:this.audioTracks.delete(s);break;case Track.Kind.Video:this.videoTracks.delete(s);break}const{track:h}=c;h&&(h.stop(),c.setTrack(void 0)),d&&this.emit(ParticipantEvent.TrackUnpublished,c)}setAudioContext(s){this.audioContext=s,this.audioTracks.forEach(d=>d.track instanceof RemoteAudioTrack&&d.track.setAudioContext(s))}async setAudioOutput(s){this.audioOutput=s;const d=[];this.audioTracks.forEach(c=>{var h;c.track instanceof RemoteAudioTrack&&d.push(c.track.setSinkId((h=s.deviceId)!==null&&h!==void 0?h:"default"))}),await Promise.all(d)}emit(s){for(var d=arguments.length,c=new Array(d>1?d-1:0),h=1;h<d;h++)c[h-1]=arguments[h];return livekitLogger.trace("participant event",{participant:this.sid,event:s,args:c}),super.emit(s,...c)}}class LocalParticipant extends Participant{constructor(s,d,c,h){super(s,d),this.pendingPublishing=new Set,this.pendingPublishPromises=new Map,this.participantTrackPermissions=[],this.allParticipantsAllowedToSubscribe=!0,this.handleReconnecting=()=>{this.reconnectFuture||(this.reconnectFuture=new Future)},this.handleReconnected=()=>{var b,_;(_=(b=this.reconnectFuture)===null||b===void 0?void 0:b.resolve)===null||_===void 0||_.call(b),this.reconnectFuture=void 0,this.updateTrackSubscriptionPermissions()},this.handleDisconnected=()=>{var b,_;(_=(b=this.reconnectFuture)===null||b===void 0?void 0:b.reject)===null||_===void 0||_.call(b,"Got disconnected during publishing attempt"),this.reconnectFuture=void 0},this.updateTrackSubscriptionPermissions=()=>{livekitLogger.debug("updating track subscription permissions",{allParticipantsAllowed:this.allParticipantsAllowedToSubscribe,participantTrackPermissions:this.participantTrackPermissions}),this.engine.client.sendUpdateSubscriptionPermissions(this.allParticipantsAllowedToSubscribe,this.participantTrackPermissions.map(b=>trackPermissionToProto(b)))},this.onTrackUnmuted=b=>{this.onTrackMuted(b,b.isUpstreamPaused)},this.onTrackMuted=(b,_)=>{if(_===void 0&&(_=!0),!b.sid){livekitLogger.error("could not update mute status for unpublished track",b);return}this.engine.updateMuteStatus(b.sid,_)},this.onTrackUpstreamPaused=b=>{livekitLogger.debug("upstream paused"),this.onTrackMuted(b,!0)},this.onTrackUpstreamResumed=b=>{livekitLogger.debug("upstream resumed"),this.onTrackMuted(b,b.isMuted)},this.handleSubscribedQualityUpdate=async b=>{var _,$;if(!(!((_=this.roomOptions)===null||_===void 0)&&_.dynacast))return;const _e=this.videoTracks.get(b.trackSid);if(!_e){livekitLogger.warn("received subscribed quality update for unknown track",{method:"handleSubscribedQualityUpdate",sid:b.trackSid});return}if(b.subscribedCodecs.length>0){if(!_e.videoTrack)return;const lt=await _e.videoTrack.setPublishingCodecs(b.subscribedCodecs);var tt=!1,rt=!1,ot;try{for(var it=_asyncIterator(lt),st;tt=!(st=await it.next()).done;tt=!1){const dt=st.value;isBackupCodec(dt)&&(livekitLogger.debug("publish ".concat(dt," for ").concat(_e.videoTrack.sid)),await this.publishAdditionalCodecForTrack(_e.videoTrack,dt,_e.options))}}catch(dt){rt=!0,ot=dt}finally{try{tt&&it.return!=null&&await it.return()}finally{if(rt)throw ot}}}else b.subscribedQualities.length>0&&await(($=_e.videoTrack)===null||$===void 0?void 0:$.setPublishingLayers(b.subscribedQualities))},this.handleLocalTrackUnpublished=b=>{const _=this.tracks.get(b.trackSid);if(!_){livekitLogger.warn("received unpublished event for unknown track",{method:"handleLocalTrackUnpublished",trackSid:b.trackSid});return}this.unpublishTrack(_.track)},this.handleTrackEnded=async b=>{if(b.source===Track.Source.ScreenShare||b.source===Track.Source.ScreenShareAudio)livekitLogger.debug("unpublishing local track due to TrackEnded",{track:b.sid}),this.unpublishTrack(b);else if(b.isUserProvided)await b.mute();else if(b instanceof LocalAudioTrack||b instanceof LocalVideoTrack)try{if(isWeb())try{const _=await(navigator==null?void 0:navigator.permissions.query({name:b.source===Track.Source.Camera?"camera":"microphone"}));if(_&&_.state==="denied")throw livekitLogger.warn("user has revoked access to ".concat(b.source)),_.onchange=()=>{_.state!=="denied"&&(b.isMuted||b.restartTrack(),_.onchange=null)},new Error("GetUserMedia Permission denied")}catch{}b.isMuted||(livekitLogger.debug("track ended, attempting to use a different device"),await b.restartTrack())}catch{livekitLogger.warn("could not restart track, muting instead"),await b.mute()}},this.audioTracks=new Map,this.videoTracks=new Map,this.tracks=new Map,this.engine=c,this.roomOptions=h,this.setupEngine(c)}get lastCameraError(){return this.cameraError}get lastMicrophoneError(){return this.microphoneError}getTrack(s){const d=super.getTrack(s);if(d)return d}getTrackByName(s){const d=super.getTrackByName(s);if(d)return d}setupEngine(s){this.engine=s,this.engine.client.onRemoteMuteChanged=(d,c)=>{const h=this.tracks.get(d);!h||!h.track||(c?h.mute():h.unmute())},this.engine.client.onSubscribedQualityUpdate=this.handleSubscribedQualityUpdate,this.engine.client.onLocalTrackUnpublished=this.handleLocalTrackUnpublished,this.engine.on(EngineEvent.Connected,this.handleReconnected).on(EngineEvent.Restarted,this.handleReconnected).on(EngineEvent.Resumed,this.handleReconnected).on(EngineEvent.Restarting,this.handleReconnecting).on(EngineEvent.Resuming,this.handleReconnecting).on(EngineEvent.Disconnected,this.handleDisconnected)}setCameraEnabled(s,d,c){return this.setTrackEnabled(Track.Source.Camera,s,d,c)}setMicrophoneEnabled(s,d,c){return this.setTrackEnabled(Track.Source.Microphone,s,d,c)}setScreenShareEnabled(s,d,c){return this.setTrackEnabled(Track.Source.ScreenShare,s,d,c)}async setTrackEnabled(s,d,c,h){var b,_;livekitLogger.debug("setTrackEnabled",{source:s,enabled:d});let $=this.getTrack(s);if(d)if($)await $.unmute();else{let _e;if(this.pendingPublishing.has(s)){livekitLogger.info("skipping duplicate published source",{source:s});return}this.pendingPublishing.add(s);try{switch(s){case Track.Source.Camera:_e=await this.createTracks({video:(b=c)!==null&&b!==void 0?b:!0});break;case Track.Source.Microphone:_e=await this.createTracks({audio:(_=c)!==null&&_!==void 0?_:!0});break;case Track.Source.ScreenShare:_e=await this.createScreenTracks(_objectSpread2({},c));break;default:throw new TrackInvalidError(s)}const tt=[];for(const ot of _e)livekitLogger.info("publishing track",{localTrack:ot}),tt.push(this.publishTrack(ot,h));[$]=await Promise.all(tt)}catch(tt){throw tt instanceof Error&&!(tt instanceof TrackInvalidError)&&this.emit(ParticipantEvent.MediaDevicesError,tt),tt}finally{this.pendingPublishing.delete(s)}}else if($&&$.track)if(s===Track.Source.ScreenShare){$=await this.unpublishTrack($.track);const _e=this.getTrack(Track.Source.ScreenShareAudio);_e&&_e.track&&this.unpublishTrack(_e.track)}else await $.mute();return $}async enableCameraAndMicrophone(){if(!(this.pendingPublishing.has(Track.Source.Camera)||this.pendingPublishing.has(Track.Source.Microphone))){this.pendingPublishing.add(Track.Source.Camera),this.pendingPublishing.add(Track.Source.Microphone);try{const s=await this.createTracks({audio:!0,video:!0});await Promise.all(s.map(d=>this.publishTrack(d)))}finally{this.pendingPublishing.delete(Track.Source.Camera),this.pendingPublishing.delete(Track.Source.Microphone)}}}async createTracks(s){var d,c;const h=mergeDefaultOptions(s,(d=this.roomOptions)===null||d===void 0?void 0:d.audioCaptureDefaults,(c=this.roomOptions)===null||c===void 0?void 0:c.videoCaptureDefaults),b=constraintsForOptions(h);let _;try{_=await navigator.mediaDevices.getUserMedia(b)}catch($){throw $ instanceof Error&&(b.audio&&(this.microphoneError=$),b.video&&(this.cameraError=$)),$}return b.audio&&(this.microphoneError=void 0),b.video&&(this.cameraError=void 0),_.getTracks().map($=>{const _e=$.kind==="audio";_e?s.audio:s.video;let tt;const rt=_e?b.audio:b.video;typeof rt!="boolean"&&(tt=rt);const ot=mediaTrackToLocalTrack($,tt);return ot.kind===Track.Kind.Video?ot.source=Track.Source.Camera:ot.kind===Track.Kind.Audio&&(ot.source=Track.Source.Microphone),ot.mediaStream=_,ot})}async createScreenTracks(s){var d;s===void 0&&(s={}),s.resolution===void 0&&(s.resolution=ScreenSharePresets.h1080fps15.resolution);let c=!0;if(s.resolution&&(isSafari()?c={width:{max:s.resolution.width},height:{max:s.resolution.height},frameRate:s.resolution.frameRate}:c={width:{ideal:s.resolution.width},height:{ideal:s.resolution.height},frameRate:s.resolution.frameRate}),navigator.mediaDevices.getDisplayMedia===void 0)throw new DeviceUnsupportedError("getDisplayMedia not supported");const h=await navigator.mediaDevices.getDisplayMedia({audio:(d=s.audio)!==null&&d!==void 0?d:!1,video:c,controller:s.controller,selfBrowserSurface:s.selfBrowserSurface,surfaceSwitching:s.surfaceSwitching,systemAudio:s.systemAudio}),b=h.getVideoTracks();if(b.length===0)throw new TrackInvalidError("no video track found");const _=new LocalVideoTrack(b[0],void 0,!1);_.source=Track.Source.ScreenShare;const $=[_];if(h.getAudioTracks().length>0){const _e=new LocalAudioTrack(h.getAudioTracks()[0],void 0,!1);_e.source=Track.Source.ScreenShareAudio,$.push(_e)}return $}async publishTrack(s,d){var c,h,b;if(await((c=this.reconnectFuture)===null||c===void 0?void 0:c.promise),s instanceof LocalTrack&&this.pendingPublishPromises.has(s)&&await this.pendingPublishPromises.get(s),s instanceof MediaStreamTrack)switch(s.kind){case"audio":s=new LocalAudioTrack(s,void 0,!0);break;case"video":s=new LocalVideoTrack(s,void 0,!0);break;default:throw new TrackInvalidError("unsupported MediaStreamTrack kind ".concat(s.kind))}let _;if(this.tracks.forEach(rt=>{!rt.track||rt.track===s&&(_=rt)}),_)return livekitLogger.warn("track has already been published, skipping"),_;const $=(d==null?void 0:d.forceStereo)||"channelCount"in s.mediaStreamTrack.getSettings()&&s.mediaStreamTrack.getSettings().channelCount===2||s.mediaStreamTrack.getConstraints().channelCount===2;$&&(d||(d={}),d.dtx===void 0&&livekitLogger.info("Opus DTX will be disabled for stereo tracks by default. Enable them explicitly to make it work."),d.red===void 0&&livekitLogger.info("Opus RED will be disabled for stereo tracks by default. Enable them explicitly to make it work."),(h=d.dtx)!==null&&h!==void 0||(d.dtx=!1),(b=d.red)!==null&&b!==void 0||(d.red=!1));const _e=_objectSpread2(_objectSpread2({},this.roomOptions.publishDefaults),d);_e.source&&(s.source=_e.source);const tt=this.publish(s,_e,d,$);this.pendingPublishPromises.set(s,tt);try{return await tt}catch(rt){throw rt}finally{this.pendingPublishPromises.delete(s)}}async publish(s,d,c,h){var b,_,$,_e;const tt=Array.from(this.tracks.values()).find(dt=>s instanceof LocalTrack&&dt.source===s.source);if(tt&&s.source!==Track.Source.Unknown)try{throw Error("publishing a second track with the same source: ".concat(s.source))}catch(dt){dt instanceof Error&&livekitLogger.warn(dt.message,{oldTrack:tt,newTrack:s,trace:dt.stack})}d.stopMicTrackOnMute&&s instanceof LocalAudioTrack&&(s.stopOnMute=!0),s.source===Track.Source.ScreenShare&&isFireFox()&&(d.simulcast=!1),d.videoCodec==="av1"&&!supportsAV1()&&(d.videoCodec=void 0),s.on(TrackEvent.Muted,this.onTrackMuted),s.on(TrackEvent.Unmuted,this.onTrackUnmuted),s.on(TrackEvent.Ended,this.handleTrackEnded),s.on(TrackEvent.UpstreamPaused,this.onTrackUpstreamPaused),s.on(TrackEvent.UpstreamResumed,this.onTrackUpstreamResumed);const rt=AddTrackRequest.fromPartial({cid:s.mediaStreamTrack.id,name:c==null?void 0:c.name,type:Track.kindToProto(s.kind),muted:s.isMuted,source:Track.sourceToProto(s.source),disableDtx:!(!((b=d.dtx)!==null&&b!==void 0)||b),stereo:h,disableRed:!(!((_=d.red)!==null&&_!==void 0)||_)});let ot,it;if(s.kind===Track.Kind.Video){let dt={width:0,height:0};try{dt=await s.waitForDimensions()}catch{livekitLogger.error("could not determine track dimensions")}if(rt.width=dt.width,rt.height=dt.height,s instanceof LocalVideoTrack&&((d==null?void 0:d.videoCodec)==="av1"&&(d.scalabilityMode=($=d.scalabilityMode)!==null&&$!==void 0?$:"L3T3"),d.videoCodec&&d.backupCodec&&d.videoCodec!==d.backupCodec.codec)){const ut=_objectSpread2({},d);ut.simulcast=!0,it=computeTrackBackupEncodings(s,d.backupCodec.codec,ut),rt.simulcastCodecs=[{codec:d.videoCodec,cid:s.mediaStreamTrack.id,enableSimulcastLayers:!0},{codec:d.backupCodec.codec,cid:"",enableSimulcastLayers:!0}]}ot=computeVideoEncodings(s.source===Track.Source.ScreenShare,dt.width,dt.height,d),rt.layers=videoLayersFromEncodings(rt.width,rt.height,it!=null?it:ot)}else s.kind===Track.Kind.Audio&&d.audioBitrate&&(ot=[{maxBitrate:d.audioBitrate}]);if(!this.engine||this.engine.isClosed)throw new UnexpectedConnectionState("cannot publish track when not connected");const st=await this.engine.addTrack(rt),lt=new LocalTrackPublication(s.kind,st,s);if(lt.options=d,s.sid=st.sid,!this.engine.publisher)throw new UnexpectedConnectionState("publisher is closed");return livekitLogger.debug("publishing ".concat(s.kind," with encodings"),{encodings:ot,trackInfo:st}),s.sender=await this.engine.createSender(s,d,ot),s.codec==="av1"&&ot&&((_e=ot[0])===null||_e===void 0?void 0:_e.maxBitrate)&&this.engine.publisher.setTrackCodecBitrate(rt.cid,s.codec,ot[0].maxBitrate/1e3),this.engine.negotiate(),s instanceof LocalVideoTrack?s.startMonitor(this.engine.client):s instanceof LocalAudioTrack&&s.startMonitor(),this.addTrackPublication(lt),this.emit(ParticipantEvent.LocalTrackPublished,lt),lt}get isLocal(){return!0}async publishAdditionalCodecForTrack(s,d,c){var h;let b;if(this.tracks.forEach(ot=>{!ot.track||ot.track===s&&(b=ot)}),!b)throw new TrackInvalidError("track is not published");if(!(s instanceof LocalVideoTrack))throw new TrackInvalidError("track is not a video track");const _=_objectSpread2(_objectSpread2({},(h=this.roomOptions)===null||h===void 0?void 0:h.publishDefaults),c),$=computeTrackBackupEncodings(s,d,_);if(!$){livekitLogger.info("backup codec has been disabled, ignoring request to add additional codec for track");return}const _e=s.addSimulcastTrack(d,$),tt=AddTrackRequest.fromPartial({cid:_e.mediaStreamTrack.id,type:Track.kindToProto(s.kind),muted:s.isMuted,source:Track.sourceToProto(s.source),sid:s.sid,simulcastCodecs:[{codec:_.videoCodec,cid:_e.mediaStreamTrack.id,enableSimulcastLayers:_.simulcast}]});if(tt.layers=videoLayersFromEncodings(tt.width,tt.height,$),!this.engine||this.engine.isClosed)throw new UnexpectedConnectionState("cannot publish track when not connected");const rt=await this.engine.addTrack(tt);await this.engine.createSimulcastSender(s,_e,_,$),this.engine.negotiate(),livekitLogger.debug("published ".concat(d," for track ").concat(s.sid),{encodings:$,trackInfo:rt})}async unpublishTrack(s,d){var c,h;const b=this.getPublicationForTrack(s);if(livekitLogger.debug("unpublishing track",{track:s,method:"unpublishTrack"}),!b||!b.track){livekitLogger.warn("track was not unpublished because no publication was found",{track:s,method:"unpublishTrack"});return}s=b.track,s.off(TrackEvent.Muted,this.onTrackMuted),s.off(TrackEvent.Unmuted,this.onTrackUnmuted),s.off(TrackEvent.Ended,this.handleTrackEnded),s.off(TrackEvent.UpstreamPaused,this.onTrackUpstreamPaused),s.off(TrackEvent.UpstreamResumed,this.onTrackUpstreamResumed),d===void 0&&(d=(h=(c=this.roomOptions)===null||c===void 0?void 0:c.stopLocalTrackOnUnpublish)!==null&&h!==void 0?h:!0),d&&s.stop();let _=!1;const $=s.sender;if(s.sender=void 0,this.engine.publisher&&this.engine.publisher.pc.connectionState!=="closed"&&$)try{if(this.engine.removeTrack($)&&(_=!0),s instanceof LocalVideoTrack){for(const[,_e]of s.simulcastCodecs)_e.sender&&(this.engine.removeTrack(_e.sender)&&(_=!0),_e.sender=void 0);s.simulcastCodecs.clear()}}catch(_e){livekitLogger.warn("failed to unpublish track",{error:_e,method:"unpublishTrack"})}switch(this.tracks.delete(b.trackSid),b.kind){case Track.Kind.Audio:this.audioTracks.delete(b.trackSid);break;case Track.Kind.Video:this.videoTracks.delete(b.trackSid);break}return this.emit(ParticipantEvent.LocalTrackUnpublished,b),b.setTrack(void 0),_&&await this.engine.negotiate(),b}async unpublishTracks(s){return(await Promise.all(s.map(c=>this.unpublishTrack(c)))).filter(c=>c instanceof LocalTrackPublication)}async republishAllTracks(s){const d=[];this.tracks.forEach(c=>{c.track&&(s&&(c.options=_objectSpread2(_objectSpread2({},c.options),s)),d.push(c))}),await Promise.all(d.map(async c=>{const h=c.track;await this.unpublishTrack(h,!1),await this.publishTrack(h,c.options)}))}async publishData(s,d){let c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const h=Array.isArray(c)?c:c==null?void 0:c.destination,b=[],_=Array.isArray(c)?void 0:c.topic;h!==void 0&&h.forEach(_e=>{_e instanceof RemoteParticipant?b.push(_e.sid):b.push(_e)});const $={kind:d,value:{$case:"user",user:{participantSid:this.sid,payload:s,destinationSids:b,topic:_}}};await this.engine.sendDataPacket($,d)}setTrackSubscriptionPermissions(s){let d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];this.participantTrackPermissions=d,this.allParticipantsAllowedToSubscribe=s,this.engine.client.isConnected&&this.updateTrackSubscriptionPermissions()}updateInfo(s){s.sid===this.sid&&(super.updateInfo(s),s.tracks.forEach(d=>{var c,h;const b=this.tracks.get(d.sid);if(b){const _=b.isMuted||((h=(c=b.track)===null||c===void 0?void 0:c.isUpstreamPaused)!==null&&h!==void 0?h:!1);_!==d.muted&&(livekitLogger.debug("updating server mute state after reconcile",{sid:d.sid,muted:_}),this.engine.client.sendMuteTrack(d.sid,_))}}))}getPublicationForTrack(s){let d;return this.tracks.forEach(c=>{const h=c.track;!h||(s instanceof MediaStreamTrack?(h instanceof LocalAudioTrack||h instanceof LocalVideoTrack)&&h.mediaStreamTrack===s&&(d=c):s===h&&(d=c))}),d}publishedTracksInfo(){const s=[];return this.tracks.forEach(d=>{d.track!==void 0&&s.push({cid:d.track.mediaStreamID,track:d.trackInfo})}),s}dataChannelsInfo(){const s=[],d=(c,h)=>{(c==null?void 0:c.id)!==void 0&&c.id!==null&&s.push({label:c.label,id:c.id,target:h})};return d(this.engine.dataChannelForKind(DataPacket_Kind.LOSSY),SignalTarget.PUBLISHER),d(this.engine.dataChannelForKind(DataPacket_Kind.RELIABLE),SignalTarget.PUBLISHER),d(this.engine.dataChannelForKind(DataPacket_Kind.LOSSY,!0),SignalTarget.SUBSCRIBER),d(this.engine.dataChannelForKind(DataPacket_Kind.RELIABLE,!0),SignalTarget.SUBSCRIBER),s}}const passThroughQueueSignals=["syncState","trickle","offer","answer","simulate","leave"];function canPassThroughQueue(a){const s=passThroughQueueSignals.includes(a.$case);return livekitLogger.trace("request allowed to bypass queue:",{canPass:s,req:a}),s}class SignalClient{constructor(){let s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;this.rtt=0,this.isConnected=!1,this.isReconnecting=!1,this.useJSON=s,this.requestQueue=new Queue,this.queuedRequests=[],this.closingLock=new Mutex}async join(s,d,c,h){return this.isConnected=!1,this.options=c,await this.connect(s,d,c,h)}async reconnect(s,d,c,h){if(!this.options){livekitLogger.warn("attempted to reconnect without signal options being set, ignoring");return}return this.isReconnecting=!0,this.clearPingInterval(),await this.connect(s,d,_objectSpread2(_objectSpread2({},this.options),{},{reconnect:!0,sid:c,reconnectReason:h}))}connect(s,d,c,h){this.connectOptions=c,s.startsWith("http")&&(s=s.replace("http","ws")),s=s.replace(/\/$/,""),s+="/rtc";const b=getClientInfo(),_=createConnectionParams(d,b,c);return new Promise(async($,_e)=>{const tt=async()=>{await this.close(),_e(new ConnectionError("room connection has been cancelled"))};h!=null&&h.aborted&&tt(),h==null||h.addEventListener("abort",tt),livekitLogger.debug("connecting to ".concat(s+_)),this.ws&&await this.close(),this.ws=new WebSocket(s+_),this.ws.binaryType="arraybuffer",this.ws.onerror=async rt=>{if(!this.isConnected){try{const ot=await fetch("http".concat(s.substring(2),"/validate").concat(_));if(ot.ok)_e(new ConnectionError("Internal error",2,ot.status));else{const it=await ot.text();_e(new ConnectionError(it,0,ot.status))}}catch{_e(new ConnectionError("server was not reachable",1))}return}this.handleWSError(rt)},this.ws.onmessage=async rt=>{var ot,it,st,lt;let dt;if(typeof rt.data=="string"){const ut=JSON.parse(rt.data);dt=SignalResponse.fromJSON(ut)}else if(rt.data instanceof ArrayBuffer)dt=SignalResponse.decode(new Uint8Array(rt.data));else{livekitLogger.error("could not decode websocket message: ".concat(typeof rt.data));return}if(!this.isConnected){let ut=!1;if(((ot=dt.message)===null||ot===void 0?void 0:ot.$case)==="join"?(this.isConnected=!0,h==null||h.removeEventListener("abort",tt),this.pingTimeoutDuration=dt.message.join.pingTimeout,this.pingIntervalDuration=dt.message.join.pingInterval,this.pingTimeoutDuration&&this.pingTimeoutDuration>0&&(livekitLogger.debug("ping config",{timeout:this.pingTimeoutDuration,interval:this.pingIntervalDuration}),this.startPingInterval()),$(dt.message.join)):c.reconnect?(this.isConnected=!0,h==null||h.removeEventListener("abort",tt),this.startPingInterval(),((it=dt.message)===null||it===void 0?void 0:it.$case)==="reconnect"?$((st=dt.message)===null||st===void 0?void 0:st.reconnect):($(),ut=!0)):c.reconnect||_e(new ConnectionError("did not receive join response, got ".concat((lt=dt.message)===null||lt===void 0?void 0:lt.$case," instead"))),!ut)return}this.signalLatency&&await sleep(this.signalLatency),this.handleSignalResponse(dt)},this.ws.onclose=rt=>{!this.isConnected||(livekitLogger.debug("websocket connection closed: ".concat(rt.reason)),this.isConnected=!1,this.onClose&&this.onClose(rt.reason),this.ws=void 0)}})}async close(){const s=await this.closingLock.lock();try{if(this.isConnected=!1,this.ws){this.ws.onclose=null,this.ws.onmessage=null,this.ws.onopen=null;const d=new Promise(c=>{this.ws?this.ws.onclose=c:c(!0)});this.ws.close(),await Promise.race([d,sleep(250)])}this.ws=void 0,this.clearPingInterval()}finally{s()}}sendOffer(s){livekitLogger.debug("sending offer",s),this.sendRequest({$case:"offer",offer:toProtoSessionDescription(s)})}sendAnswer(s){livekitLogger.debug("sending answer"),this.sendRequest({$case:"answer",answer:toProtoSessionDescription(s)})}sendIceCandidate(s,d){livekitLogger.trace("sending ice candidate",s),this.sendRequest({$case:"trickle",trickle:{candidateInit:JSON.stringify(s),target:d}})}sendMuteTrack(s,d){this.sendRequest({$case:"mute",mute:{sid:s,muted:d}})}sendAddTrack(s){this.sendRequest({$case:"addTrack",addTrack:AddTrackRequest.fromPartial(s)})}sendUpdateTrackSettings(s){this.sendRequest({$case:"trackSetting",trackSetting:s})}sendUpdateSubscription(s){this.sendRequest({$case:"subscription",subscription:s})}sendSyncState(s){this.sendRequest({$case:"syncState",syncState:s})}sendUpdateVideoLayers(s,d){this.sendRequest({$case:"updateLayers",updateLayers:{trackSid:s,layers:d}})}sendUpdateSubscriptionPermissions(s,d){this.sendRequest({$case:"subscriptionPermission",subscriptionPermission:{allParticipants:s,trackPermissions:d}})}sendSimulateScenario(s){this.sendRequest({$case:"simulate",simulate:s})}sendPing(){this.sendRequest({$case:"ping",ping:Date.now()}),this.sendRequest({$case:"pingReq",pingReq:{timestamp:Date.now(),rtt:this.rtt}})}async sendLeave(){await this.sendRequest({$case:"leave",leave:{canReconnect:!1,reason:DisconnectReason.CLIENT_INITIATED}})}async sendRequest(s){let d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(!d&&!canPassThroughQueue(s)&&this.isReconnecting){this.queuedRequests.push(async()=>{await this.sendRequest(s,!0)});return}if(d||await this.requestQueue.flush(),this.signalLatency&&await sleep(this.signalLatency),!this.ws||this.ws.readyState!==this.ws.OPEN){livekitLogger.error("cannot send signal request before connected, type: ".concat(s==null?void 0:s.$case));return}const h={message:s};try{this.useJSON?this.ws.send(JSON.stringify(SignalRequest.toJSON(h))):this.ws.send(SignalRequest.encode(h).finish())}catch(b){livekitLogger.error("error sending signal message",{error:b})}}handleSignalResponse(s){var d,c;const h=s.message;if(h==null){livekitLogger.debug("received unsupported message");return}if(h.$case==="answer"){const b=fromProtoSessionDescription(h.answer);this.onAnswer&&this.onAnswer(b)}else if(h.$case==="offer"){const b=fromProtoSessionDescription(h.offer);this.onOffer&&this.onOffer(b)}else if(h.$case==="trickle"){const b=JSON.parse(h.trickle.candidateInit);this.onTrickle&&this.onTrickle(b,h.trickle.target)}else h.$case==="update"?this.onParticipantUpdate&&this.onParticipantUpdate((d=h.update.participants)!==null&&d!==void 0?d:[]):h.$case==="trackPublished"?this.onLocalTrackPublished&&this.onLocalTrackPublished(h.trackPublished):h.$case==="speakersChanged"?this.onSpeakersChanged&&this.onSpeakersChanged((c=h.speakersChanged.speakers)!==null&&c!==void 0?c:[]):h.$case==="leave"?this.onLeave&&this.onLeave(h.leave):h.$case==="mute"?this.onRemoteMuteChanged&&this.onRemoteMuteChanged(h.mute.sid,h.mute.muted):h.$case==="roomUpdate"?this.onRoomUpdate&&h.roomUpdate.room&&this.onRoomUpdate(h.roomUpdate.room):h.$case==="connectionQuality"?this.onConnectionQuality&&this.onConnectionQuality(h.connectionQuality):h.$case==="streamStateUpdate"?this.onStreamStateUpdate&&this.onStreamStateUpdate(h.streamStateUpdate):h.$case==="subscribedQualityUpdate"?this.onSubscribedQualityUpdate&&this.onSubscribedQualityUpdate(h.subscribedQualityUpdate):h.$case==="subscriptionPermissionUpdate"?this.onSubscriptionPermissionUpdate&&this.onSubscriptionPermissionUpdate(h.subscriptionPermissionUpdate):h.$case==="refreshToken"?this.onTokenRefresh&&this.onTokenRefresh(h.refreshToken):h.$case==="trackUnpublished"?this.onLocalTrackUnpublished&&this.onLocalTrackUnpublished(h.trackUnpublished):h.$case==="pong"?this.resetPingTimeout():h.$case==="pongResp"?(this.rtt=Date.now()-h.pongResp.lastPingTimestamp,this.resetPingTimeout()):livekitLogger.debug("unsupported message",h)}setReconnected(){for(;this.queuedRequests.length>0;){const s=this.queuedRequests.shift();s&&this.requestQueue.run(s)}this.isReconnecting=!1}handleWSError(s){livekitLogger.error("websocket error",s)}resetPingTimeout(){if(this.clearPingTimeout(),!this.pingTimeoutDuration){livekitLogger.warn("ping timeout duration not set");return}this.pingTimeout=CriticalTimers.setTimeout(()=>{livekitLogger.warn("ping timeout triggered. last pong received at: ".concat(new Date(Date.now()-this.pingTimeoutDuration*1e3).toUTCString())),this.onClose&&this.onClose("ping timeout")},this.pingTimeoutDuration*1e3)}clearPingTimeout(){this.pingTimeout&&CriticalTimers.clearTimeout(this.pingTimeout)}startPingInterval(){if(this.clearPingInterval(),this.resetPingTimeout(),!this.pingIntervalDuration){livekitLogger.warn("ping interval duration not set");return}livekitLogger.debug("start ping interval"),this.pingInterval=CriticalTimers.setInterval(()=>{this.sendPing()},this.pingIntervalDuration*1e3)}clearPingInterval(){livekitLogger.debug("clearing ping interval"),this.clearPingTimeout(),this.pingInterval&&CriticalTimers.clearInterval(this.pingInterval)}}function fromProtoSessionDescription(a){const s={type:"offer",sdp:a.sdp};switch(a.type){case"answer":case"offer":case"pranswer":case"rollback":s.type=a.type;break}return s}function toProtoSessionDescription(a){return{sdp:a.sdp,type:a.type}}function createConnectionParams(a,s,d){var c;const h=new URLSearchParams;return h.set("access_token",a),d.reconnect&&(h.set("reconnect","1"),d.sid&&h.set("sid",d.sid)),h.set("auto_subscribe",d.autoSubscribe?"1":"0"),h.set("sdk","js"),h.set("version",s.version),h.set("protocol",s.protocol.toString()),s.deviceModel&&h.set("device_model",s.deviceModel),s.os&&h.set("os",s.os),s.osVersion&&h.set("os_version",s.osVersion),s.browser&&h.set("browser",s.browser),s.browserVersion&&h.set("browser_version",s.browserVersion),d.publishOnly!==void 0&&h.set("publish",d.publishOnly),d.adaptiveStream&&h.set("adaptive_stream","1"),d.reconnectReason&&h.set("reconnect_reason",d.reconnectReason.toString()),!((c=navigator.connection)===null||c===void 0)&&c.type&&h.set("network",navigator.connection.type),"?".concat(h.toString())}const publishDefaults={audioBitrate:AudioPresets.music.maxBitrate,dtx:!0,red:!0,forceStereo:!1,simulcast:!0,screenShareEncoding:ScreenSharePresets.h1080fps15.encoding,stopMicTrackOnMute:!1,videoCodec:"vp8",backupCodec:{codec:"vp8",encoding:VideoPresets.h540.encoding}},audioDefaults={autoGainControl:!0,echoCancellation:!0,noiseSuppression:!0},videoDefaults={resolution:VideoPresets.h720.resolution},roomOptionDefaults={adaptiveStream:!1,dynacast:!1,stopLocalTrackOnUnpublish:!0,reconnectPolicy:new DefaultReconnectPolicy,expWebAudioMix:!1},roomConnectOptionDefaults={autoSubscribe:!0,maxRetries:1,peerConnectionTimeout:15e3};var parser$1={},grammarExports={},grammar$2={get exports(){return grammarExports},set exports(a){grammarExports=a}},grammar$1=grammar$2.exports={v:[{name:"version",reg:/^(\d*)$/}],o:[{name:"origin",reg:/^(\S*) (\d*) (\d*) (\S*) IP(\d) (\S*)/,names:["username","sessionId","sessionVersion","netType","ipVer","address"],format:"%s %s %d %s IP%d %s"}],s:[{name:"name"}],i:[{name:"description"}],u:[{name:"uri"}],e:[{name:"email"}],p:[{name:"phone"}],z:[{name:"timezones"}],r:[{name:"repeats"}],t:[{name:"timing",reg:/^(\d*) (\d*)/,names:["start","stop"],format:"%d %d"}],c:[{name:"connection",reg:/^IN IP(\d) (\S*)/,names:["version","ip"],format:"IN IP%d %s"}],b:[{push:"bandwidth",reg:/^(TIAS|AS|CT|RR|RS):(\d*)/,names:["type","limit"],format:"%s:%s"}],m:[{reg:/^(\w*) (\d*) ([\w/]*)(?: (.*))?/,names:["type","port","protocol","payloads"],format:"%s %d %s %s"}],a:[{push:"rtp",reg:/^rtpmap:(\d*) ([\w\-.]*)(?:\s*\/(\d*)(?:\s*\/(\S*))?)?/,names:["payload","codec","rate","encoding"],format:function(a){return a.encoding?"rtpmap:%d %s/%s/%s":a.rate?"rtpmap:%d %s/%s":"rtpmap:%d %s"}},{push:"fmtp",reg:/^fmtp:(\d*) ([\S| ]*)/,names:["payload","config"],format:"fmtp:%d %s"},{name:"control",reg:/^control:(.*)/,format:"control:%s"},{name:"rtcp",reg:/^rtcp:(\d*)(?: (\S*) IP(\d) (\S*))?/,names:["port","netType","ipVer","address"],format:function(a){return a.address!=null?"rtcp:%d %s IP%d %s":"rtcp:%d"}},{push:"rtcpFbTrrInt",reg:/^rtcp-fb:(\*|\d*) trr-int (\d*)/,names:["payload","value"],format:"rtcp-fb:%s trr-int %d"},{push:"rtcpFb",reg:/^rtcp-fb:(\*|\d*) ([\w-_]*)(?: ([\w-_]*))?/,names:["payload","type","subtype"],format:function(a){return a.subtype!=null?"rtcp-fb:%s %s %s":"rtcp-fb:%s %s"}},{push:"ext",reg:/^extmap:(\d+)(?:\/(\w+))?(?: (urn:ietf:params:rtp-hdrext:encrypt))? (\S*)(?: (\S*))?/,names:["value","direction","encrypt-uri","uri","config"],format:function(a){return"extmap:%d"+(a.direction?"/%s":"%v")+(a["encrypt-uri"]?" %s":"%v")+" %s"+(a.config?" %s":"")}},{name:"extmapAllowMixed",reg:/^(extmap-allow-mixed)/},{push:"crypto",reg:/^crypto:(\d*) ([\w_]*) (\S*)(?: (\S*))?/,names:["id","suite","config","sessionConfig"],format:function(a){return a.sessionConfig!=null?"crypto:%d %s %s %s":"crypto:%d %s %s"}},{name:"setup",reg:/^setup:(\w*)/,format:"setup:%s"},{name:"connectionType",reg:/^connection:(new|existing)/,format:"connection:%s"},{name:"mid",reg:/^mid:([^\s]*)/,format:"mid:%s"},{name:"msid",reg:/^msid:(.*)/,format:"msid:%s"},{name:"ptime",reg:/^ptime:(\d*(?:\.\d*)*)/,format:"ptime:%d"},{name:"maxptime",reg:/^maxptime:(\d*(?:\.\d*)*)/,format:"maxptime:%d"},{name:"direction",reg:/^(sendrecv|recvonly|sendonly|inactive)/},{name:"icelite",reg:/^(ice-lite)/},{name:"iceUfrag",reg:/^ice-ufrag:(\S*)/,format:"ice-ufrag:%s"},{name:"icePwd",reg:/^ice-pwd:(\S*)/,format:"ice-pwd:%s"},{name:"fingerprint",reg:/^fingerprint:(\S*) (\S*)/,names:["type","hash"],format:"fingerprint:%s %s"},{push:"candidates",reg:/^candidate:(\S*) (\d*) (\S*) (\d*) (\S*) (\d*) typ (\S*)(?: raddr (\S*) rport (\d*))?(?: tcptype (\S*))?(?: generation (\d*))?(?: network-id (\d*))?(?: network-cost (\d*))?/,names:["foundation","component","transport","priority","ip","port","type","raddr","rport","tcptype","generation","network-id","network-cost"],format:function(a){var s="candidate:%s %d %s %d %s %d typ %s";return s+=a.raddr!=null?" raddr %s rport %d":"%v%v",s+=a.tcptype!=null?" tcptype %s":"%v",a.generation!=null&&(s+=" generation %d"),s+=a["network-id"]!=null?" network-id %d":"%v",s+=a["network-cost"]!=null?" network-cost %d":"%v",s}},{name:"endOfCandidates",reg:/^(end-of-candidates)/},{name:"remoteCandidates",reg:/^remote-candidates:(.*)/,format:"remote-candidates:%s"},{name:"iceOptions",reg:/^ice-options:(\S*)/,format:"ice-options:%s"},{push:"ssrcs",reg:/^ssrc:(\d*) ([\w_-]*)(?::(.*))?/,names:["id","attribute","value"],format:function(a){var s="ssrc:%d";return a.attribute!=null&&(s+=" %s",a.value!=null&&(s+=":%s")),s}},{push:"ssrcGroups",reg:/^ssrc-group:([\x21\x23\x24\x25\x26\x27\x2A\x2B\x2D\x2E\w]*) (.*)/,names:["semantics","ssrcs"],format:"ssrc-group:%s %s"},{name:"msidSemantic",reg:/^msid-semantic:\s?(\w*) (\S*)/,names:["semantic","token"],format:"msid-semantic: %s %s"},{push:"groups",reg:/^group:(\w*) (.*)/,names:["type","mids"],format:"group:%s %s"},{name:"rtcpMux",reg:/^(rtcp-mux)/},{name:"rtcpRsize",reg:/^(rtcp-rsize)/},{name:"sctpmap",reg:/^sctpmap:([\w_/]*) (\S*)(?: (\S*))?/,names:["sctpmapNumber","app","maxMessageSize"],format:function(a){return a.maxMessageSize!=null?"sctpmap:%s %s %s":"sctpmap:%s %s"}},{name:"xGoogleFlag",reg:/^x-google-flag:([^\s]*)/,format:"x-google-flag:%s"},{push:"rids",reg:/^rid:([\d\w]+) (\w+)(?: ([\S| ]*))?/,names:["id","direction","params"],format:function(a){return a.params?"rid:%s %s %s":"rid:%s %s"}},{push:"imageattrs",reg:new RegExp("^imageattr:(\\d+|\\*)[\\s\\t]+(send|recv)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*)(?:[\\s\\t]+(recv|send)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*))?"),names:["pt","dir1","attrs1","dir2","attrs2"],format:function(a){return"imageattr:%s %s %s"+(a.dir2?" %s %s":"")}},{name:"simulcast",reg:new RegExp("^simulcast:(send|recv) ([a-zA-Z0-9\\-_~;,]+)(?:\\s?(send|recv) ([a-zA-Z0-9\\-_~;,]+))?$"),names:["dir1","list1","dir2","list2"],format:function(a){return"simulcast:%s %s"+(a.dir2?" %s %s":"")}},{name:"simulcast_03",reg:/^simulcast:[\s\t]+([\S+\s\t]+)$/,names:["value"],format:"simulcast: %s"},{name:"framerate",reg:/^framerate:(\d+(?:$|\.\d+))/,format:"framerate:%s"},{name:"sourceFilter",reg:/^source-filter: *(excl|incl) (\S*) (IP4|IP6|\*) (\S*) (.*)/,names:["filterMode","netType","addressTypes","destAddress","srcList"],format:"source-filter: %s %s %s %s %s"},{name:"bundleOnly",reg:/^(bundle-only)/},{name:"label",reg:/^label:(.+)/,format:"label:%s"},{name:"sctpPort",reg:/^sctp-port:(\d+)$/,format:"sctp-port:%s"},{name:"maxMessageSize",reg:/^max-message-size:(\d+)$/,format:"max-message-size:%s"},{push:"tsRefClocks",reg:/^ts-refclk:([^\s=]*)(?:=(\S*))?/,names:["clksrc","clksrcExt"],format:function(a){return"ts-refclk:%s"+(a.clksrcExt!=null?"=%s":"")}},{name:"mediaClk",reg:/^mediaclk:(?:id=(\S*))? *([^\s=]*)(?:=(\S*))?(?: *rate=(\d+)\/(\d+))?/,names:["id","mediaClockName","mediaClockValue","rateNumerator","rateDenominator"],format:function(a){var s="mediaclk:";return s+=a.id!=null?"id=%s %s":"%v%s",s+=a.mediaClockValue!=null?"=%s":"",s+=a.rateNumerator!=null?" rate=%s":"",s+=a.rateDenominator!=null?"/%s":"",s}},{name:"keywords",reg:/^keywds:(.+)$/,format:"keywds:%s"},{name:"content",reg:/^content:(.+)/,format:"content:%s"},{name:"bfcpFloorCtrl",reg:/^floorctrl:(c-only|s-only|c-s)/,format:"floorctrl:%s"},{name:"bfcpConfId",reg:/^confid:(\d+)/,format:"confid:%s"},{name:"bfcpUserId",reg:/^userid:(\d+)/,format:"userid:%s"},{name:"bfcpFloorId",reg:/^floorid:(.+) (?:m-stream|mstrm):(.+)/,names:["id","mStream"],format:"floorid:%s mstrm:%s"},{push:"invalid",names:["value"]}]};Object.keys(grammar$1).forEach(function(a){var s=grammar$1[a];s.forEach(function(d){d.reg||(d.reg=/(.*)/),d.format||(d.format="%s")})});(function(a){var s=function($){return String(Number($))===$?Number($):$},d=function($,_e,tt,rt){if(rt&&!tt)_e[rt]=s($[1]);else for(var ot=0;ot<tt.length;ot+=1)$[ot+1]!=null&&(_e[tt[ot]]=s($[ot+1]))},c=function($,_e,tt){var rt=$.name&&$.names;$.push&&!_e[$.push]?_e[$.push]=[]:rt&&!_e[$.name]&&(_e[$.name]={});var ot=$.push?{}:rt?_e[$.name]:_e;d(tt.match($.reg),ot,$.names,$.name),$.push&&_e[$.push].push(ot)},h=grammarExports,b=RegExp.prototype.test.bind(/^([a-z])=(.*)/);a.parse=function($){var _e={},tt=[],rt=_e;return $.split(/(\r\n|\r|\n)/).filter(b).forEach(function(ot){var it=ot[0],st=ot.slice(2);it==="m"&&(tt.push({rtp:[],fmtp:[]}),rt=tt[tt.length-1]);for(var lt=0;lt<(h[it]||[]).length;lt+=1){var dt=h[it][lt];if(dt.reg.test(st))return c(dt,rt,st)}}),_e.media=tt,_e};var _=function($,_e){var tt=_e.split(/=(.+)/,2);return tt.length===2?$[tt[0]]=s(tt[1]):tt.length===1&&_e.length>1&&($[tt[0]]=void 0),$};a.parseParams=function($){return $.split(/;\s?/).reduce(_,{})},a.parseFmtpConfig=a.parseParams,a.parsePayloads=function($){return $.toString().split(" ").map(Number)},a.parseRemoteCandidates=function($){for(var _e=[],tt=$.split(" ").map(s),rt=0;rt<tt.length;rt+=3)_e.push({component:tt[rt],ip:tt[rt+1],port:tt[rt+2]});return _e},a.parseImageAttributes=function($){return $.split(" ").map(function(_e){return _e.substring(1,_e.length-1).split(",").reduce(_,{})})},a.parseSimulcastStreamList=function($){return $.split(";").map(function(_e){return _e.split(",").map(function(tt){var rt,ot=!1;return tt[0]!=="~"?rt=s(tt):(rt=s(tt.substring(1,tt.length)),ot=!0),{scid:rt,paused:ot}})})}})(parser$1);var grammar=grammarExports,formatRegExp=/%[sdv%]/g,format=function(a){var s=1,d=arguments,c=d.length;return a.replace(formatRegExp,function(h){if(s>=c)return h;var b=d[s];switch(s+=1,h){case"%%":return"%";case"%s":return String(b);case"%d":return Number(b);case"%v":return""}})},makeLine=function(a,s,d){var c=s.format instanceof Function?s.format(s.push?d:d[s.name]):s.format,h=[a+"="+c];if(s.names)for(var b=0;b<s.names.length;b+=1){var _=s.names[b];s.name?h.push(d[s.name][_]):h.push(d[s.names[b]])}else h.push(d[s.name]);return format.apply(null,h)},defaultOuterOrder=["v","o","s","i","u","e","p","c","b","t","r","z","a"],defaultInnerOrder=["i","c","b","a"],writer$1=function(a,s){s=s||{},a.version==null&&(a.version=0),a.name==null&&(a.name=" "),a.media.forEach(function(b){b.payloads==null&&(b.payloads="")});var d=s.outerOrder||defaultOuterOrder,c=s.innerOrder||defaultInnerOrder,h=[];return d.forEach(function(b){grammar[b].forEach(function(_){_.name in a&&a[_.name]!=null?h.push(makeLine(b,_,a)):_.push in a&&a[_.push]!=null&&a[_.push].forEach(function($){h.push(makeLine(b,_,$))})})}),a.media.forEach(function(b){h.push(makeLine("m",grammar.m[0],b)),c.forEach(function(_){grammar[_].forEach(function($){$.name in b&&b[$.name]!=null?h.push(makeLine(_,$,b)):$.push in b&&b[$.push]!=null&&b[$.push].forEach(function(_e){h.push(makeLine(_,$,_e))})})})}),h.join(`\r
`)+`\r
`},parser=parser$1,writer=writer$1,write=writer,parse$1=parser.parse;parser.parseParams;parser.parseFmtpConfig;parser.parsePayloads;parser.parseRemoteCandidates;parser.parseImageAttributes;parser.parseSimulcastStreamList;const PCEvents={NegotiationStarted:"negotiationStarted",NegotiationComplete:"negotiationComplete"};class PCTransport extends eventsExports{constructor(s){super(),this.pendingCandidates=[],this.restartingIce=!1,this.renegotiate=!1,this.trackBitrates=[],this.remoteStereoMids=[],this.remoteNackMids=[],this.negotiate=r$2(d=>{this.emit(PCEvents.NegotiationStarted);try{this.createAndSendOffer()}catch(c){if(d)d(c);else throw c}},100),this.pc=new RTCPeerConnection(s)}get isICEConnected(){return this.pc.iceConnectionState==="connected"||this.pc.iceConnectionState==="completed"}async addIceCandidate(s){if(this.pc.remoteDescription&&!this.restartingIce)return this.pc.addIceCandidate(s);this.pendingCandidates.push(s)}async setRemoteDescription(s){if(s.type==="offer"){let{stereoMids:d,nackMids:c}=extractStereoAndNackAudioFromOffer(s);this.remoteStereoMids=d,this.remoteNackMids=c}await this.pc.setRemoteDescription(s),this.pendingCandidates.forEach(d=>{this.pc.addIceCandidate(d)}),this.pendingCandidates=[],this.restartingIce=!1,this.renegotiate?(this.renegotiate=!1,this.createAndSendOffer()):s.type==="answer"&&this.emit(PCEvents.NegotiationComplete)}async createAndSendOffer(s){var d;if(this.onOffer===void 0)return;if(s!=null&&s.iceRestart&&(livekitLogger.debug("restarting ICE"),this.restartingIce=!0),this.pc.signalingState==="have-local-offer"){const b=this.pc.remoteDescription;if((s==null?void 0:s.iceRestart)&&b)await this.pc.setRemoteDescription(b);else{this.renegotiate=!0;return}}else if(this.pc.signalingState==="closed"){livekitLogger.warn("could not createOffer with closed peer connection");return}livekitLogger.debug("starting to negotiate");const c=await this.pc.createOffer(s),h=parse$1((d=c.sdp)!==null&&d!==void 0?d:"");h.media.forEach(b=>{b.type==="audio"?ensureAudioNackAndStereo(b,[],[]):b.type==="video"&&this.trackBitrates.some(_=>{if(!b.msid||!b.msid.includes(_.sid))return!1;let $=0;return b.rtp.some(_e=>_e.codec.toUpperCase()===_.codec.toUpperCase()?($=_e.payload,!0):!1),$>0&&(b.fmtp.some(_e=>_e.payload===$?(_e.config.includes("x-google-max-bitrate")||(_e.config+=";x-google-max-bitrate=".concat(_.maxbr)),!0):!1)||b.fmtp.push({payload:$,config:"x-google-max-bitrate=".concat(_.maxbr)})),!0})}),this.trackBitrates=[],await this.setMungedLocalDescription(c,write(h)),this.onOffer(c)}async createAndSetAnswer(){var s;const d=await this.pc.createAnswer(),c=parse$1((s=d.sdp)!==null&&s!==void 0?s:"");return c.media.forEach(h=>{h.type==="audio"&&ensureAudioNackAndStereo(h,this.remoteStereoMids,this.remoteNackMids)}),await this.setMungedLocalDescription(d,write(c)),d}setTrackCodecBitrate(s,d,c){this.trackBitrates.push({sid:s,codec:d,maxbr:c})}close(){this.pc.onconnectionstatechange=null,this.pc.oniceconnectionstatechange=null,this.pc.close()}async setMungedLocalDescription(s,d){const c=s.sdp;s.sdp=d;try{livekitLogger.debug("setting munged local description"),await this.pc.setLocalDescription(s);return}catch(h){livekitLogger.warn("not able to set ".concat(s.type,", falling back to unmodified sdp"),{error:h}),s.sdp=c}try{await this.pc.setLocalDescription(s)}catch(h){let b="unknown error";throw h instanceof Error?b=h.message:typeof h=="string"&&(b=h),new NegotiationError(b)}}}function ensureAudioNackAndStereo(a,s,d){let c=0;a.rtp.some(h=>h.codec==="opus"?(c=h.payload,!0):!1),c>0&&(a.rtcpFb||(a.rtcpFb=[]),d.includes(a.mid)&&!a.rtcpFb.some(h=>h.payload===c&&h.type==="nack")&&a.rtcpFb.push({payload:c,type:"nack"}),s.includes(a.mid)&&a.fmtp.some(h=>h.payload===c?(h.config.includes("stereo=1")||(h.config+=";stereo=1"),!0):!1))}function extractStereoAndNackAudioFromOffer(a){var s;const d=[],c=[],h=parse$1((s=a.sdp)!==null&&s!==void 0?s:"");let b=0;return h.media.forEach(_=>{var $;_.type==="audio"&&(_.rtp.some(_e=>_e.codec==="opus"?(b=_e.payload,!0):!1),!(($=_.rtcpFb)===null||$===void 0)&&$.some(_e=>_e.payload===b&&_e.type==="nack")&&c.push(_.mid),_.fmtp.some(_e=>_e.payload===b?(_e.config.includes("sprop-stereo=1")&&d.push(_.mid),!0):!1))}),{stereoMids:d,nackMids:c}}const lossyDataChannel="_lossy",reliableDataChannel="_reliable",minReconnectWait=2*1e3,leaveReconnect="leave-reconnect";var PCState;(function(a){a[a.New=0]="New",a[a.Connected=1]="Connected",a[a.Disconnected=2]="Disconnected",a[a.Reconnecting=3]="Reconnecting",a[a.Closed=4]="Closed"})(PCState||(PCState={}));class RTCEngine extends eventsExports.EventEmitter{get isClosed(){return this._isClosed}constructor(s){super(),this.options=s,this.rtcConfig={},this.peerConnectionTimeout=roomConnectOptionDefaults.peerConnectionTimeout,this.subscriberPrimary=!1,this.pcState=PCState.New,this._isClosed=!0,this.pendingTrackResolvers={},this.hasPublished=!1,this.reconnectAttempts=0,this.reconnectStart=0,this.fullReconnectOnNext=!1,this.attemptingReconnect=!1,this.joinAttempts=0,this.maxJoinAttempts=1,this.shouldFailNext=!1,this.handleDataChannel=async d=>{let{channel:c}=d;if(!!c){if(c.label===reliableDataChannel)this.reliableDCSub=c;else if(c.label===lossyDataChannel)this.lossyDCSub=c;else return;livekitLogger.debug("on data channel ".concat(c.id,", ").concat(c.label)),c.onmessage=this.handleDataMessage}},this.handleDataMessage=async d=>{var c,h;let b;if(d.data instanceof ArrayBuffer)b=d.data;else if(d.data instanceof Blob)b=await d.data.arrayBuffer();else{livekitLogger.error("unsupported data type",d.data);return}const _=DataPacket.decode(new Uint8Array(b));((c=_.value)===null||c===void 0?void 0:c.$case)==="speaker"?this.emit(EngineEvent.ActiveSpeakersUpdate,_.value.speaker.speakers):((h=_.value)===null||h===void 0?void 0:h.$case)==="user"&&this.emit(EngineEvent.DataPacketReceived,_.value.user,_.kind)},this.handleDataError=d=>{const h=d.currentTarget.maxRetransmits===0?"lossy":"reliable";if(d instanceof ErrorEvent){const{error:b}=d.error;livekitLogger.error("DataChannel error on ".concat(h,": ").concat(d.message),b)}else livekitLogger.error("Unknown DataChannel Error on ".concat(h),d)},this.handleDisconnect=(d,c)=>{if(this._isClosed)return;livekitLogger.warn("".concat(d," disconnected")),this.reconnectAttempts===0&&(this.reconnectStart=Date.now());const h=$=>{livekitLogger.warn("could not recover connection after ".concat(this.reconnectAttempts," attempts, ").concat($,"ms. giving up")),this.emit(EngineEvent.Disconnected),this.close()},b=Date.now()-this.reconnectStart;let _=this.getNextRetryDelay({elapsedMs:b,retryCount:this.reconnectAttempts});if(_===null){h(b);return}d===leaveReconnect&&(_=0),livekitLogger.debug("reconnecting in ".concat(_,"ms")),this.clearReconnectTimeout(),this.reconnectTimeout=CriticalTimers.setTimeout(()=>this.attemptReconnect(c),_)},this.handleBrowserOnLine=()=>{this.client.isReconnecting&&(this.clearReconnectTimeout(),this.attemptReconnect(ReconnectReason.RR_SIGNAL_DISCONNECTED))},this.client=new SignalClient,this.client.signalLatency=this.options.expSignalLatency,this.reconnectPolicy=this.options.reconnectPolicy,this.registerOnLineListener(),this.closingLock=new Mutex}async join(s,d,c,h){this.url=s,this.token=d,this.signalOpts=c;try{this.joinAttempts+=1;const b=await this.client.join(s,d,c,h);return this._isClosed=!1,this.subscriberPrimary=b.subscriberPrimary,this.publisher||this.configure(b),this.subscriberPrimary||this.negotiate(),this.clientConfiguration=b.clientConfiguration,b}catch(b){if(b instanceof ConnectionError&&b.reason===1&&(livekitLogger.warn("Couldn't connect to server, attempt ".concat(this.joinAttempts," of ").concat(this.maxJoinAttempts)),this.joinAttempts<this.maxJoinAttempts))return this.join(s,d,c,h);throw b}}async close(){const s=await this.closingLock.lock();if(this.isClosed){s();return}try{this._isClosed=!0,this.emit(EngineEvent.Closing),this.removeAllListeners(),this.deregisterOnLineListener(),this.clearPendingReconnect(),this.publisher&&this.publisher.pc.signalingState!=="closed"&&(this.publisher.pc.getSenders().forEach(d=>{var c,h;try{!((c=this.publisher)===null||c===void 0)&&c.pc.removeTrack&&((h=this.publisher)===null||h===void 0||h.pc.removeTrack(d))}catch(b){livekitLogger.warn("could not removeTrack",{error:b})}}),this.publisher.close(),this.publisher=void 0),this.subscriber&&(this.subscriber.close(),this.subscriber=void 0),await this.client.close()}finally{s()}}addTrack(s){if(this.pendingTrackResolvers[s.cid])throw new TrackInvalidError("a track with the same ID has already been published");return new Promise((d,c)=>{const h=setTimeout(()=>{delete this.pendingTrackResolvers[s.cid],c(new ConnectionError("publication of local track timed out, no response from server"))},1e4);this.pendingTrackResolvers[s.cid]={resolve:b=>{clearTimeout(h),d(b)},reject:()=>{clearTimeout(h),c(new Error("Cancelled publication by calling unpublish"))}},this.client.sendAddTrack(s)})}removeTrack(s){var d;if(s.track&&this.pendingTrackResolvers[s.track.id]){const{reject:c}=this.pendingTrackResolvers[s.track.id];c&&c(),delete this.pendingTrackResolvers[s.track.id]}try{return(d=this.publisher)===null||d===void 0||d.pc.removeTrack(s),!0}catch(c){livekitLogger.warn("failed to remove track",{error:c,method:"removeTrack"})}return!1}updateMuteStatus(s,d){this.client.sendMuteTrack(s,d)}get dataSubscriberReadyState(){var s;return(s=this.reliableDCSub)===null||s===void 0?void 0:s.readyState}async getConnectedServerAddress(){if(this.primaryPC!==void 0)return getConnectedAddress(this.primaryPC)}configure(s){var d;if(this.publisher||this.subscriber)return;this.participantSid=(d=s.participant)===null||d===void 0?void 0:d.sid;const c=this.makeRTCConfiguration(s);this.publisher=new PCTransport(c),this.subscriber=new PCTransport(c),this.emit(EngineEvent.TransportsCreated,this.publisher,this.subscriber),this.publisher.pc.onicecandidate=$=>{!$.candidate||(livekitLogger.trace("adding ICE candidate for peer",$.candidate),this.client.sendIceCandidate($.candidate,SignalTarget.PUBLISHER))},this.subscriber.pc.onicecandidate=$=>{!$.candidate||this.client.sendIceCandidate($.candidate,SignalTarget.SUBSCRIBER)},this.publisher.onOffer=$=>{this.client.sendOffer($)};let h=this.publisher.pc,b=this.subscriber.pc,_=s.subscriberPrimary;_&&(h=this.subscriber.pc,b=this.publisher.pc,this.subscriber.pc.ondatachannel=this.handleDataChannel),this.primaryPC=h,h.onconnectionstatechange=async()=>{if(livekitLogger.debug("primary PC state changed ".concat(h.connectionState)),h.connectionState==="connected"){const $=this.pcState===PCState.New;this.pcState=PCState.Connected,$&&this.emit(EngineEvent.Connected,s)}else h.connectionState==="failed"&&this.pcState===PCState.Connected&&(this.pcState=PCState.Disconnected,this.handleDisconnect("primary peerconnection",_?ReconnectReason.RR_SUBSCRIBER_FAILED:ReconnectReason.RR_PUBLISHER_FAILED))},b.onconnectionstatechange=async()=>{livekitLogger.debug("secondary PC state changed ".concat(b.connectionState)),b.connectionState==="failed"&&this.handleDisconnect("secondary peerconnection",_?ReconnectReason.RR_PUBLISHER_FAILED:ReconnectReason.RR_SUBSCRIBER_FAILED)},this.subscriber.pc.ontrack=$=>{this.emit(EngineEvent.MediaTrackAdded,$.track,$.streams[0],$.receiver)},this.createDataChannels(),this.client.onAnswer=async $=>{!this.publisher||(livekitLogger.debug("received server answer",{RTCSdpType:$.type,signalingState:this.publisher.pc.signalingState}),await this.publisher.setRemoteDescription($))},this.client.onTrickle=($,_e)=>{!this.publisher||!this.subscriber||(livekitLogger.trace("got ICE candidate from peer",{candidate:$,target:_e}),_e===SignalTarget.PUBLISHER?this.publisher.addIceCandidate($):this.subscriber.addIceCandidate($))},this.client.onOffer=async $=>{if(!this.subscriber)return;livekitLogger.debug("received server offer",{RTCSdpType:$.type,signalingState:this.subscriber.pc.signalingState}),await this.subscriber.setRemoteDescription($);const _e=await this.subscriber.createAndSetAnswer();this.client.sendAnswer(_e)},this.client.onLocalTrackPublished=$=>{livekitLogger.debug("received trackPublishedResponse",$);const{resolve:_e}=this.pendingTrackResolvers[$.cid];if(!_e){livekitLogger.error("missing track resolver for ".concat($.cid));return}delete this.pendingTrackResolvers[$.cid],_e($.track)},this.client.onTokenRefresh=$=>{this.token=$},this.client.onClose=()=>{this.handleDisconnect("signal",ReconnectReason.RR_SIGNAL_DISCONNECTED)},this.client.onLeave=$=>{$!=null&&$.canReconnect?(this.fullReconnectOnNext=!0,this.primaryPC=void 0,this.handleDisconnect(leaveReconnect)):(this.emit(EngineEvent.Disconnected,$==null?void 0:$.reason),this.close()),livekitLogger.trace("leave request",{leave:$})}}makeRTCConfiguration(s){const d=_objectSpread2({},this.rtcConfig);if(s.iceServers&&!d.iceServers){const c=[];s.iceServers.forEach(h=>{const b={urls:h.urls};h.username&&(b.username=h.username),h.credential&&(b.credential=h.credential),c.push(b)}),d.iceServers=c}return s.clientConfiguration&&s.clientConfiguration.forceRelay===ClientConfigSetting.ENABLED&&(d.iceTransportPolicy="relay"),d.sdpSemantics="unified-plan",d.continualGatheringPolicy="gather_continually",d}createDataChannels(){!this.publisher||(this.lossyDC&&(this.lossyDC.onmessage=null,this.lossyDC.onerror=null),this.reliableDC&&(this.reliableDC.onmessage=null,this.reliableDC.onerror=null),this.lossyDC=this.publisher.pc.createDataChannel(lossyDataChannel,{ordered:!0,maxRetransmits:0}),this.reliableDC=this.publisher.pc.createDataChannel(reliableDataChannel,{ordered:!0}),this.lossyDC.onmessage=this.handleDataMessage,this.reliableDC.onmessage=this.handleDataMessage,this.lossyDC.onerror=this.handleDataError,this.reliableDC.onerror=this.handleDataError)}setPreferredCodec(s,d,c){if(!("getCapabilities"in RTCRtpSender))return;const h=RTCRtpSender.getCapabilities(d);if(!h)return;livekitLogger.debug("get capabilities",h);const b=[],_=[],$=[];h.codecs.forEach(_e=>{const tt=_e.mimeType.toLowerCase();if(tt==="audio/opus"){b.push(_e);return}if(!(tt==="video/".concat(c))){$.push(_e);return}if(c==="h264"){_e.sdpFmtpLine&&_e.sdpFmtpLine.includes("profile-level-id=42e01f")?b.push(_e):_.push(_e);return}b.push(_e)}),supportsSetCodecPreferences(s)&&s.setCodecPreferences(b.concat(_,$))}async createSender(s,d,c){if(supportsTransceiver())return this.createTransceiverRTCRtpSender(s,d,c);if(supportsAddTrack())return livekitLogger.debug("using add-track fallback"),this.createRTCRtpSender(s.mediaStreamTrack);throw new UnexpectedConnectionState("Required webRTC APIs not supported on this device")}async createSimulcastSender(s,d,c,h){if(supportsTransceiver())return this.createSimulcastTransceiverSender(s,d,c,h);if(supportsAddTrack())return livekitLogger.debug("using add-track fallback"),this.createRTCRtpSender(s.mediaStreamTrack);throw new UnexpectedConnectionState("Cannot stream on this device")}async createTransceiverRTCRtpSender(s,d,c){if(!this.publisher)throw new UnexpectedConnectionState("publisher is closed");const h={direction:"sendonly"};c&&(h.sendEncodings=c);const b=await this.publisher.pc.addTransceiver(s.mediaStreamTrack,h);return s.kind===Track.Kind.Video&&d.videoCodec&&(this.setPreferredCodec(b,s.kind,d.videoCodec),s.codec=d.videoCodec),b.sender}async createSimulcastTransceiverSender(s,d,c,h){if(!this.publisher)throw new UnexpectedConnectionState("publisher is closed");const b={direction:"sendonly"};h&&(b.sendEncodings=h);const _=await this.publisher.pc.addTransceiver(d.mediaStreamTrack,b);if(!!c.videoCodec)return this.setPreferredCodec(_,s.kind,c.videoCodec),s.setSimulcastTrackSender(c.videoCodec,_.sender),_.sender}async createRTCRtpSender(s){if(!this.publisher)throw new UnexpectedConnectionState("publisher is closed");return this.publisher.pc.addTrack(s)}async attemptReconnect(s){var d,c,h;if(!this._isClosed&&!this.attemptingReconnect){(((d=this.clientConfiguration)===null||d===void 0?void 0:d.resumeConnection)===ClientConfigSetting.DISABLED||((h=(c=this.primaryPC)===null||c===void 0?void 0:c.signalingState)!==null&&h!==void 0?h:"closed")==="closed")&&(this.fullReconnectOnNext=!0);try{this.attemptingReconnect=!0,this.fullReconnectOnNext?await this.restartConnection():await this.resumeConnection(s),this.clearPendingReconnect(),this.fullReconnectOnNext=!1}catch(b){this.reconnectAttempts+=1;let _=!0;b instanceof UnexpectedConnectionState?(livekitLogger.debug("received unrecoverable error",{error:b}),_=!1):b instanceof SignalReconnectError||(this.fullReconnectOnNext=!0),_?this.handleDisconnect("reconnect",ReconnectReason.RR_UNKOWN):(livekitLogger.info("could not recover connection after ".concat(this.reconnectAttempts," attempts, ").concat(Date.now()-this.reconnectStart,"ms. giving up")),this.emit(EngineEvent.Disconnected),this.close())}finally{this.attemptingReconnect=!1}}}getNextRetryDelay(s){try{return this.reconnectPolicy.nextRetryDelayInMs(s)}catch(d){livekitLogger.warn("encountered error in reconnect policy",{error:d})}return null}async restartConnection(){var s,d;if(!this.url||!this.token)throw new UnexpectedConnectionState("could not reconnect, url or token not saved");livekitLogger.info("reconnecting, attempt: ".concat(this.reconnectAttempts)),this.emit(EngineEvent.Restarting),this.client.isConnected&&await this.client.sendLeave(),await this.client.close(),this.primaryPC=void 0,(s=this.publisher)===null||s===void 0||s.close(),this.publisher=void 0,(d=this.subscriber)===null||d===void 0||d.close(),this.subscriber=void 0;let c;try{if(!this.signalOpts)throw livekitLogger.warn("attempted connection restart, without signal options present"),new SignalReconnectError;c=await this.join(this.url,this.token,this.signalOpts)}catch{throw new SignalReconnectError}if(this.shouldFailNext)throw this.shouldFailNext=!1,new Error("simulated failure");await this.waitForPCConnected(),this.client.setReconnected(),this.emit(EngineEvent.Restarted,c)}async resumeConnection(s){var d;if(!this.url||!this.token)throw new UnexpectedConnectionState("could not reconnect, url or token not saved");if(!this.publisher||!this.subscriber)throw new UnexpectedConnectionState("publisher and subscriber connections unset");livekitLogger.info("resuming signal connection, attempt ".concat(this.reconnectAttempts)),this.emit(EngineEvent.Resuming);try{const c=await this.client.reconnect(this.url,this.token,this.participantSid,s);if(c){const h=this.makeRTCConfiguration(c);this.publisher.pc.setConfiguration(h),this.subscriber.pc.setConfiguration(h)}}catch(c){let h="";throw c instanceof Error&&(h=c.message),new SignalReconnectError(h)}if(this.emit(EngineEvent.SignalResumed),this.shouldFailNext)throw this.shouldFailNext=!1,new Error("simulated failure");this.subscriber.restartingIce=!0,this.hasPublished&&await this.publisher.createAndSendOffer({iceRestart:!0}),await this.waitForPCConnected(),this.client.setReconnected(),((d=this.reliableDC)===null||d===void 0?void 0:d.readyState)==="open"&&this.reliableDC.id===null&&this.createDataChannels(),this.emit(EngineEvent.Resumed)}async waitForPCConnected(){var s;const d=Date.now();let c=d;for(this.pcState=PCState.Reconnecting,livekitLogger.debug("waiting for peer connection to reconnect");c-d<this.peerConnectionTimeout&&this.primaryPC!==void 0;){if(c-d>minReconnectWait&&((s=this.primaryPC)===null||s===void 0?void 0:s.connectionState)==="connected"&&(this.pcState=PCState.Connected),this.pcState===PCState.Connected)return;await sleep(100),c=Date.now()}throw new ConnectionError("could not establish PC connection")}async sendDataPacket(s,d){const c=DataPacket.encode(s).finish();await this.ensurePublisherConnected(d),d===DataPacket_Kind.LOSSY&&this.lossyDC?this.lossyDC.send(c):d===DataPacket_Kind.RELIABLE&&this.reliableDC&&this.reliableDC.send(c)}async ensureDataTransportConnected(s){let d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.subscriberPrimary;var c,h,b;const _=d?this.subscriber:this.publisher,$=d?"Subscriber":"Publisher";if(!_)throw new ConnectionError("".concat($," connection not set"));!d&&!(!((c=this.publisher)===null||c===void 0)&&c.isICEConnected)&&((h=this.publisher)===null||h===void 0?void 0:h.pc.iceConnectionState)!=="checking"&&this.negotiate();const _e=this.dataChannelForKind(s,d);if((_e==null?void 0:_e.readyState)==="open")return;const tt=new Date().getTime()+this.peerConnectionTimeout;for(;new Date().getTime()<tt;){if(_.isICEConnected&&((b=this.dataChannelForKind(s,d))===null||b===void 0?void 0:b.readyState)==="open")return;await sleep(50)}throw new ConnectionError("could not establish ".concat($," connection, state: ").concat(_.pc.iceConnectionState))}async ensurePublisherConnected(s){await this.ensureDataTransportConnected(s,!1)}negotiate(){return new Promise((s,d)=>{if(!this.publisher){d(new NegotiationError("publisher is not defined"));return}this.hasPublished=!0;const c=()=>{livekitLogger.debug("engine disconnected while negotiation was ongoing"),b(),s()};this.on(EngineEvent.Closing,c);const h=setTimeout(()=>{d("negotiation timed out"),this.handleDisconnect("negotiation",ReconnectReason.RR_SIGNAL_DISCONNECTED)},this.peerConnectionTimeout),b=()=>{clearTimeout(h),this.off(EngineEvent.Closing,c)};this.publisher.once(PCEvents.NegotiationStarted,()=>{var _;(_=this.publisher)===null||_===void 0||_.once(PCEvents.NegotiationComplete,()=>{b(),s()})}),this.publisher.negotiate(_=>{b(),d(_),_ instanceof NegotiationError&&(this.fullReconnectOnNext=!0),this.handleDisconnect("negotiation",ReconnectReason.RR_UNKOWN)})})}dataChannelForKind(s,d){if(d){if(s===DataPacket_Kind.LOSSY)return this.lossyDCSub;if(s===DataPacket_Kind.RELIABLE)return this.reliableDCSub}else{if(s===DataPacket_Kind.LOSSY)return this.lossyDC;if(s===DataPacket_Kind.RELIABLE)return this.reliableDC}}failNext(){this.shouldFailNext=!0}clearReconnectTimeout(){this.reconnectTimeout&&CriticalTimers.clearTimeout(this.reconnectTimeout)}clearPendingReconnect(){this.clearReconnectTimeout(),this.reconnectAttempts=0}registerOnLineListener(){isWeb()&&window.addEventListener("online",this.handleBrowserOnLine)}deregisterOnLineListener(){isWeb()&&window.removeEventListener("online",this.handleBrowserOnLine)}}async function getConnectedAddress(a){var s;let d="";const c=new Map,h=new Map;if((await a.getStats()).forEach($=>{switch($.type){case"transport":d=$.selectedCandidatePairId;break;case"candidate-pair":d===""&&$.selected&&(d=$.id),c.set($.id,$);break;case"remote-candidate":h.set($.id,"".concat($.address,":").concat($.port));break}}),d==="")return;const _=(s=c.get(d))===null||s===void 0?void 0:s.remoteCandidateId;if(_!==void 0)return h.get(_)}class SignalReconnectError extends Error{}var ConnectionState;(function(a){a.Disconnected="disconnected",a.Connecting="connecting",a.Connected="connected",a.Reconnecting="reconnecting"})(ConnectionState||(ConnectionState={}));class Room extends eventsExports.EventEmitter{constructor(s){var d;super(),d=this,this.state=ConnectionState.Disconnected,this.activeSpeakers=[],this.sid="",this.name="",this.metadata=void 0,this._isRecording=!1,this.audioEnabled=!0,this.connect=async(c,h,b)=>{const _=await this.disconnectLock.lock();if(this.state===ConnectionState.Connected)return livekitLogger.info("already connected to room ".concat(this.name)),_(),Promise.resolve();if(this.connectFuture)return _(),this.connectFuture.promise;this.setAndEmitConnectionState(ConnectionState.Connecting);const $=async(_e,tt)=>{var rt,ot;(!this.abortController||this.abortController.signal.aborted)&&(this.abortController=new AbortController),_(),this.state===ConnectionState.Reconnecting?(livekitLogger.info("Reconnection attempt replaced by new connection attempt"),this.recreateEngine()):this.maybeCreateEngine(),this.acquireAudioContext(),this.connOptions=_objectSpread2(_objectSpread2({},roomConnectOptionDefaults),b),this.connOptions.rtcConfig&&(this.engine.rtcConfig=this.connOptions.rtcConfig),this.connOptions.peerConnectionTimeout&&(this.engine.peerConnectionTimeout=this.connOptions.peerConnectionTimeout);try{const lt=await this.engine.join(c,h,{autoSubscribe:this.connOptions.autoSubscribe,publishOnly:this.connOptions.publishOnly,adaptiveStream:typeof this.options.adaptiveStream=="object"?!0:this.options.adaptiveStream,maxRetries:this.connOptions.maxRetries},this.abortController.signal);let dt=lt.serverInfo;if(dt||(dt={version:lt.serverVersion,region:lt.serverRegion}),livekitLogger.debug("connected to Livekit Server ".concat(Object.entries(dt).map(ht=>{let[nt,ct]=ht;return"".concat(nt,": ").concat(ct)}).join(", "))),!lt.serverVersion)throw new UnsupportedServer("unknown server version");lt.serverVersion==="0.15.1"&&this.options.dynacast&&(livekitLogger.debug("disabling dynacast due to server version"),this.options.dynacast=!1);const ut=lt.participant;this.localParticipant.sid=ut.sid,this.localParticipant.identity=ut.identity,this.localParticipant.updateInfo(ut),this.setupLocalParticipantEvents(),lt.otherParticipants.forEach(ht=>{ht.sid!==this.localParticipant.sid&&ht.identity!==this.localParticipant.identity?this.getOrCreateParticipant(ht.sid,ht):livekitLogger.warn("received info to create local participant as remote participant",{info:ht,localParticipant:this.localParticipant})}),this.name=lt.room.name,this.sid=lt.room.sid,this.metadata=lt.room.metadata,this._isRecording!==lt.room.activeRecording&&(this._isRecording=lt.room.activeRecording,this.emit(RoomEvent.RecordingStatusChanged,lt.room.activeRecording)),this.emit(RoomEvent.SignalConnected)}catch(lt){this.recreateEngine(),this.handleDisconnect(this.options.stopLocalTrackOnUnpublish);const dt=new ConnectionError("could not establish signal connection");lt instanceof Error&&(dt.message="".concat(dt.message,": ").concat(lt.message)),lt instanceof ConnectionError&&(dt.reason=lt.reason,dt.status=lt.status),livekitLogger.debug("error trying to establish signal connection",{error:lt}),tt(dt);return}const it=CriticalTimers.setTimeout(()=>{this.recreateEngine(),this.handleDisconnect(this.options.stopLocalTrackOnUnpublish),tt(new ConnectionError("could not connect PeerConnection after timeout"))},this.connOptions.peerConnectionTimeout),st=()=>{livekitLogger.warn("closing engine"),CriticalTimers.clearTimeout(it),this.recreateEngine(),this.handleDisconnect(this.options.stopLocalTrackOnUnpublish),tt(new ConnectionError("room connection has been cancelled"))};!((rt=this.abortController)===null||rt===void 0)&&rt.signal.aborted&&st(),(ot=this.abortController)===null||ot===void 0||ot.signal.addEventListener("abort",st),this.engine.once(EngineEvent.Connected,()=>{var lt,dt;CriticalTimers.clearTimeout(it),(lt=this.abortController)===null||lt===void 0||lt.signal.removeEventListener("abort",st),isWeb()&&(window.addEventListener("beforeunload",this.onBeforeUnload),(dt=navigator.mediaDevices)===null||dt===void 0||dt.addEventListener("devicechange",this.handleDeviceChange)),this.setAndEmitConnectionState(ConnectionState.Connected),this.emit(RoomEvent.Connected),_e()})};return this.connectFuture=new Future($,()=>{this.clearConnectionFutures()}),this.connectFuture.promise},this.disconnect=async function(){let c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;var h,b,_,$;const _e=await d.disconnectLock.lock();try{if(d.state===ConnectionState.Disconnected){livekitLogger.debug("already disconnected");return}livekitLogger.info("disconnect from room",{identity:d.localParticipant.identity}),(d.state===ConnectionState.Connecting||d.state===ConnectionState.Reconnecting)&&(livekitLogger.warn("abort connection attempt"),(h=d.abortController)===null||h===void 0||h.abort(),(_=(b=d.connectFuture)===null||b===void 0?void 0:b.reject)===null||_===void 0||_.call(b,new ConnectionError("Client initiated disconnect")),d.connectFuture=void 0),!(($=d.engine)===null||$===void 0)&&$.client.isConnected&&await d.engine.client.sendLeave(),d.engine&&await d.engine.close(),d.handleDisconnect(c,DisconnectReason.CLIENT_INITIATED),d.engine=void 0}finally{_e()}},this.onBeforeUnload=async()=>{await this.disconnect()},this.handleRestarting=()=>{for(const c of this.participants.values())this.handleParticipantDisconnected(c.sid,c);this.setAndEmitConnectionState(ConnectionState.Reconnecting)&&this.emit(RoomEvent.Reconnecting)},this.handleRestarted=async c=>{livekitLogger.debug("reconnected to server",{region:c.serverRegion});try{c.participant&&(this.localParticipant.sid=c.participant.sid,this.handleParticipantUpdates([c.participant])),this.handleParticipantUpdates(c.otherParticipants);const h=[];this.localParticipant.tracks.forEach(b=>{b.track&&h.push(b)}),await Promise.all(h.map(async b=>{const _=b.track;this.localParticipant.unpublishTrack(_,!1),_.isMuted||((_ instanceof LocalAudioTrack||_ instanceof LocalVideoTrack)&&!_.isUserProvided&&(livekitLogger.debug("restarting existing track",{track:b.trackSid}),await _.restartTrack()),livekitLogger.debug("publishing new track",{track:b.trackSid}),await this.localParticipant.publishTrack(_,b.options))}))}catch(h){livekitLogger.error("error trying to re-publish tracks after reconnection",{error:h})}finally{this.setAndEmitConnectionState(ConnectionState.Connected),this.emit(RoomEvent.Reconnected)}},this.handleParticipantUpdates=c=>{c.forEach(h=>{if(h.identity===this.localParticipant.identity){this.localParticipant.updateInfo(h);return}const b=this.identityToSid.get(h.identity);b&&b!==h.sid&&this.handleParticipantDisconnected(b,this.participants.get(b));let _=this.participants.get(h.sid);const $=!_;h.state===ParticipantInfo_State.DISCONNECTED?this.handleParticipantDisconnected(h.sid,_):(_=this.getOrCreateParticipant(h.sid,h),$||_.updateInfo(h))})},this.handleActiveSpeakersUpdate=c=>{const h=[],b={};c.forEach(_=>{if(b[_.sid]=!0,_.sid===this.localParticipant.sid)this.localParticipant.audioLevel=_.level,this.localParticipant.setIsSpeaking(!0),h.push(this.localParticipant);else{const $=this.participants.get(_.sid);$&&($.audioLevel=_.level,$.setIsSpeaking(!0),h.push($))}}),b[this.localParticipant.sid]||(this.localParticipant.audioLevel=0,this.localParticipant.setIsSpeaking(!1)),this.participants.forEach(_=>{b[_.sid]||(_.audioLevel=0,_.setIsSpeaking(!1))}),this.activeSpeakers=h,this.emitWhenConnected(RoomEvent.ActiveSpeakersChanged,h)},this.handleSpeakersChanged=c=>{const h=new Map;this.activeSpeakers.forEach(_=>{h.set(_.sid,_)}),c.forEach(_=>{let $=this.participants.get(_.sid);_.sid===this.localParticipant.sid&&($=this.localParticipant),$&&($.audioLevel=_.level,$.setIsSpeaking(_.active),_.active?h.set(_.sid,$):h.delete(_.sid))});const b=Array.from(h.values());b.sort((_,$)=>$.audioLevel-_.audioLevel),this.activeSpeakers=b,this.emitWhenConnected(RoomEvent.ActiveSpeakersChanged,b)},this.handleStreamStateUpdate=c=>{c.streamStates.forEach(h=>{const b=this.participants.get(h.participantSid);if(!b)return;const _=b.getTrackPublication(h.trackSid);!_||!_.track||(_.track.streamState=Track.streamStateFromProto(h.state),b.emit(ParticipantEvent.TrackStreamStateChanged,_,_.track.streamState),this.emitWhenConnected(RoomEvent.TrackStreamStateChanged,_,_.track.streamState,b))})},this.handleSubscriptionPermissionUpdate=c=>{const h=this.participants.get(c.participantSid);if(!h)return;const b=h.getTrackPublication(c.trackSid);!b||b.setAllowed(c.allowed)},this.handleDataPacket=(c,h)=>{const b=this.participants.get(c.participantSid);this.emit(RoomEvent.DataReceived,c.payload,b,h,c.topic),b==null||b.emit(ParticipantEvent.DataReceived,c.payload,h)},this.handleAudioPlaybackStarted=()=>{this.canPlaybackAudio||(this.audioEnabled=!0,this.emit(RoomEvent.AudioPlaybackStatusChanged,!0))},this.handleAudioPlaybackFailed=c=>{livekitLogger.warn("could not playback audio",c),this.canPlaybackAudio&&(this.audioEnabled=!1,this.emit(RoomEvent.AudioPlaybackStatusChanged,!1))},this.handleDeviceChange=async()=>{this.emit(RoomEvent.MediaDevicesChanged)},this.handleRoomUpdate=c=>{this._isRecording!==c.activeRecording&&(this._isRecording=c.activeRecording,this.emit(RoomEvent.RecordingStatusChanged,c.activeRecording)),this.metadata!==c.metadata&&(this.metadata=c.metadata,this.emitWhenConnected(RoomEvent.RoomMetadataChanged,c.metadata))},this.handleConnectionQualityUpdate=c=>{c.updates.forEach(h=>{if(h.participantSid===this.localParticipant.sid){this.localParticipant.setConnectionQuality(h.quality);return}const b=this.participants.get(h.participantSid);b&&b.setConnectionQuality(h.quality)})},this.onLocalParticipantMetadataChanged=c=>{this.emit(RoomEvent.ParticipantMetadataChanged,c,this.localParticipant)},this.onLocalTrackMuted=c=>{this.emit(RoomEvent.TrackMuted,c,this.localParticipant)},this.onLocalTrackUnmuted=c=>{this.emit(RoomEvent.TrackUnmuted,c,this.localParticipant)},this.onLocalTrackPublished=c=>{this.emit(RoomEvent.LocalTrackPublished,c,this.localParticipant)},this.onLocalTrackUnpublished=c=>{this.emit(RoomEvent.LocalTrackUnpublished,c,this.localParticipant)},this.onLocalConnectionQualityChanged=c=>{this.emit(RoomEvent.ConnectionQualityChanged,c,this.localParticipant)},this.onMediaDevicesError=c=>{this.emit(RoomEvent.MediaDevicesError,c)},this.onLocalParticipantPermissionsChanged=c=>{this.emit(RoomEvent.ParticipantPermissionsChanged,c,this.localParticipant)},this.setMaxListeners(100),this.participants=new Map,this.identityToSid=new Map,this.options=_objectSpread2(_objectSpread2({},roomOptionDefaults),s),this.options.audioCaptureDefaults=_objectSpread2(_objectSpread2({},audioDefaults),s==null?void 0:s.audioCaptureDefaults),this.options.videoCaptureDefaults=_objectSpread2(_objectSpread2({},videoDefaults),s==null?void 0:s.videoCaptureDefaults),this.options.publishDefaults=_objectSpread2(_objectSpread2({},publishDefaults),s==null?void 0:s.publishDefaults),this.maybeCreateEngine(),this.disconnectLock=new Mutex,this.localParticipant=new LocalParticipant("","",this.engine,this.options)}maybeCreateEngine(){this.engine||(this.engine=new RTCEngine(this.options),this.engine.client.onParticipantUpdate=this.handleParticipantUpdates,this.engine.client.onRoomUpdate=this.handleRoomUpdate,this.engine.client.onSpeakersChanged=this.handleSpeakersChanged,this.engine.client.onStreamStateUpdate=this.handleStreamStateUpdate,this.engine.client.onSubscriptionPermissionUpdate=this.handleSubscriptionPermissionUpdate,this.engine.client.onConnectionQuality=this.handleConnectionQualityUpdate,this.engine.on(EngineEvent.MediaTrackAdded,(s,d,c)=>{this.onTrackAdded(s,d,c)}).on(EngineEvent.Disconnected,s=>{this.handleDisconnect(this.options.stopLocalTrackOnUnpublish,s)}).on(EngineEvent.ActiveSpeakersUpdate,this.handleActiveSpeakersUpdate).on(EngineEvent.DataPacketReceived,this.handleDataPacket).on(EngineEvent.Resuming,()=>{this.setAndEmitConnectionState(ConnectionState.Reconnecting)&&this.emit(RoomEvent.Reconnecting)}).on(EngineEvent.Resumed,()=>{this.setAndEmitConnectionState(ConnectionState.Connected),this.emit(RoomEvent.Reconnected),this.updateSubscriptions()}).on(EngineEvent.SignalResumed,()=>{this.state===ConnectionState.Reconnecting&&this.sendSyncState()}).on(EngineEvent.Restarting,this.handleRestarting).on(EngineEvent.Restarted,this.handleRestarted),this.localParticipant&&this.localParticipant.setupEngine(this.engine))}static getLocalDevices(s){let d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return DeviceManager.getInstance().getDevices(s,d)}async prepareConnection(s){await fetch("http".concat(s.substring(2)),{method:"HEAD"})}getParticipantByIdentity(s){if(this.localParticipant.identity===s)return this.localParticipant;const d=this.identityToSid.get(s);if(d)return this.participants.get(d)}clearConnectionFutures(){this.connectFuture=void 0}get isRecording(){return this._isRecording}async simulateScenario(s){let d=()=>{},c;switch(s){case"signal-reconnect":await this.engine.client.close(),this.engine.client.onClose&&this.engine.client.onClose("simulate disconnect");break;case"speaker":c=SimulateScenario.fromPartial({scenario:{$case:"speakerUpdate",speakerUpdate:3}});break;case"node-failure":c=SimulateScenario.fromPartial({scenario:{$case:"nodeFailure",nodeFailure:!0}});break;case"server-leave":c=SimulateScenario.fromPartial({scenario:{$case:"serverLeave",serverLeave:!0}});break;case"migration":c=SimulateScenario.fromPartial({scenario:{$case:"migration",migration:!0}});break;case"resume-reconnect":this.engine.failNext(),await this.engine.client.close(),this.engine.client.onClose&&this.engine.client.onClose("simulate resume-reconnect");break;case"force-tcp":case"force-tls":c=SimulateScenario.fromPartial({scenario:{$case:"switchCandidateProtocol",switchCandidateProtocol:s==="force-tls"?2:1}}),d=async()=>{const h=this.engine.client.onLeave;h&&h({reason:DisconnectReason.CLIENT_INITIATED,canReconnect:!0})};break}c&&(this.engine.client.sendSimulateScenario(c),d())}async startAudio(){await this.acquireAudioContext();const s=[];this.participants.forEach(d=>{d.audioTracks.forEach(c=>{c.track&&c.track.attachedElements.forEach(h=>{s.push(h)})})});try{await Promise.all(s.map(d=>(d.muted=!1,d.play()))),this.handleAudioPlaybackStarted()}catch(d){throw this.handleAudioPlaybackFailed(d),d}}get canPlaybackAudio(){return this.audioEnabled}getActiveAudioOutputDevice(){var s,d;return(d=(s=this.options.audioOutput)===null||s===void 0?void 0:s.deviceId)!==null&&d!==void 0?d:""}async switchActiveDevice(s,d){let c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;var h,b;const _=c?{exact:d}:d;if(s==="audioinput"){const $=this.options.audioCaptureDefaults.deviceId;this.options.audioCaptureDefaults.deviceId=_;const _e=Array.from(this.localParticipant.audioTracks.values()).filter(tt=>tt.source===Track.Source.Microphone);try{await Promise.all(_e.map(tt=>{var rt;return(rt=tt.audioTrack)===null||rt===void 0?void 0:rt.setDeviceId(_)}))}catch(tt){throw this.options.audioCaptureDefaults.deviceId=$,tt}}else if(s==="videoinput"){const $=this.options.videoCaptureDefaults.deviceId;this.options.videoCaptureDefaults.deviceId=_;const _e=Array.from(this.localParticipant.videoTracks.values()).filter(tt=>tt.source===Track.Source.Camera);try{await Promise.all(_e.map(tt=>{var rt;return(rt=tt.videoTrack)===null||rt===void 0?void 0:rt.setDeviceId(_)}))}catch(tt){throw this.options.videoCaptureDefaults.deviceId=$,tt}}else if(s==="audiooutput"){if(!supportsSetSinkId())throw new Error("cannot switch audio output, setSinkId not supported");(h=(b=this.options).audioOutput)!==null&&h!==void 0||(b.audioOutput={});const $=this.options.audioOutput.deviceId;this.options.audioOutput.deviceId=d;try{await Promise.all(Array.from(this.participants.values()).map(_e=>_e.setAudioOutput({deviceId:d})))}catch(_e){throw this.options.audioOutput.deviceId=$,_e}}}setupLocalParticipantEvents(){this.localParticipant.on(ParticipantEvent.ParticipantMetadataChanged,this.onLocalParticipantMetadataChanged).on(ParticipantEvent.TrackMuted,this.onLocalTrackMuted).on(ParticipantEvent.TrackUnmuted,this.onLocalTrackUnmuted).on(ParticipantEvent.LocalTrackPublished,this.onLocalTrackPublished).on(ParticipantEvent.LocalTrackUnpublished,this.onLocalTrackUnpublished).on(ParticipantEvent.ConnectionQualityChanged,this.onLocalConnectionQualityChanged).on(ParticipantEvent.MediaDevicesError,this.onMediaDevicesError).on(ParticipantEvent.ParticipantPermissionsChanged,this.onLocalParticipantPermissionsChanged)}recreateEngine(){var s;(s=this.engine)===null||s===void 0||s.close(),this.engine=void 0,this.participants.clear(),this.maybeCreateEngine()}onTrackAdded(s,d,c){if(this.state===ConnectionState.Connecting||this.state===ConnectionState.Reconnecting){const tt=()=>{this.onTrackAdded(s,d,c),rt()},rt=()=>{this.off(RoomEvent.Reconnected,tt),this.off(RoomEvent.Connected,tt),this.off(RoomEvent.Disconnected,rt)};this.once(RoomEvent.Reconnected,tt),this.once(RoomEvent.Connected,tt),this.once(RoomEvent.Disconnected,rt);return}if(this.state===ConnectionState.Disconnected){livekitLogger.warn("skipping incoming track after Room disconnected");return}const h=unpackStreamId(d.id),b=h[0];let _=h[1];if((!_||_==="")&&(_=s.id),b===this.localParticipant.sid){livekitLogger.warn("tried to create RemoteParticipant for local participant");return}const $=this.getOrCreateParticipant(b);let _e;this.options.adaptiveStream&&(typeof this.options.adaptiveStream=="object"?_e=this.options.adaptiveStream:_e={}),$.addSubscribedMediaTrack(s,_,d,c,_e)}handleDisconnect(){let s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,d=arguments.length>1?arguments[1]:void 0;var c;this.state!==ConnectionState.Disconnected&&(this.participants.forEach(h=>{h.tracks.forEach(b=>{h.unpublishTrack(b.trackSid)})}),this.localParticipant.tracks.forEach(h=>{var b,_;h.track&&this.localParticipant.unpublishTrack(h.track,s),s&&((b=h.track)===null||b===void 0||b.detach(),(_=h.track)===null||_===void 0||_.stop())}),this.localParticipant.off(ParticipantEvent.ParticipantMetadataChanged,this.onLocalParticipantMetadataChanged).off(ParticipantEvent.TrackMuted,this.onLocalTrackMuted).off(ParticipantEvent.TrackUnmuted,this.onLocalTrackUnmuted).off(ParticipantEvent.LocalTrackPublished,this.onLocalTrackPublished).off(ParticipantEvent.LocalTrackUnpublished,this.onLocalTrackUnpublished).off(ParticipantEvent.ConnectionQualityChanged,this.onLocalConnectionQualityChanged).off(ParticipantEvent.MediaDevicesError,this.onMediaDevicesError).off(ParticipantEvent.ParticipantPermissionsChanged,this.onLocalParticipantPermissionsChanged),this.localParticipant.tracks.clear(),this.localParticipant.videoTracks.clear(),this.localParticipant.audioTracks.clear(),this.participants.clear(),this.activeSpeakers=[],this.audioContext&&typeof this.options.expWebAudioMix=="boolean"&&(this.audioContext.close(),this.audioContext=void 0),isWeb()&&(window.removeEventListener("beforeunload",this.onBeforeUnload),(c=navigator.mediaDevices)===null||c===void 0||c.removeEventListener("devicechange",this.handleDeviceChange)),this.setAndEmitConnectionState(ConnectionState.Disconnected),this.emit(RoomEvent.Disconnected,d))}handleParticipantDisconnected(s,d){this.participants.delete(s),d&&(this.identityToSid.delete(d.identity),d.tracks.forEach(c=>{d.unpublishTrack(c.trackSid,!0)}),this.emit(RoomEvent.ParticipantDisconnected,d))}async acquireAudioContext(){var s,d;typeof this.options.expWebAudioMix!="boolean"&&this.options.expWebAudioMix.audioContext?(this.audioContext=this.options.expWebAudioMix.audioContext,await this.audioContext.resume()):this.audioContext=(s=getNewAudioContext())!==null&&s!==void 0?s:void 0,this.options.expWebAudioMix&&this.participants.forEach(h=>h.setAudioContext(this.audioContext));const c=((d=this.audioContext)===null||d===void 0?void 0:d.state)==="running";c!==this.canPlaybackAudio&&(this.audioEnabled=c,this.emit(RoomEvent.AudioPlaybackStatusChanged,c))}createParticipant(s,d){let c;return d?c=RemoteParticipant.fromParticipantInfo(this.engine.client,d):c=new RemoteParticipant(this.engine.client,s,"",void 0,void 0),this.options.expWebAudioMix&&c.setAudioContext(this.audioContext),c}getOrCreateParticipant(s,d){if(this.participants.has(s))return this.participants.get(s);const c=this.createParticipant(s,d);return this.participants.set(s,c),d&&(this.identityToSid.set(d.identity,d.sid),this.emitWhenConnected(RoomEvent.ParticipantConnected,c)),c.on(ParticipantEvent.TrackPublished,h=>{this.emitWhenConnected(RoomEvent.TrackPublished,h,c)}).on(ParticipantEvent.TrackSubscribed,(h,b)=>{h.kind===Track.Kind.Audio&&(h.on(TrackEvent.AudioPlaybackStarted,this.handleAudioPlaybackStarted),h.on(TrackEvent.AudioPlaybackFailed,this.handleAudioPlaybackFailed)),this.emit(RoomEvent.TrackSubscribed,h,b,c)}).on(ParticipantEvent.TrackUnpublished,h=>{this.emit(RoomEvent.TrackUnpublished,h,c)}).on(ParticipantEvent.TrackUnsubscribed,(h,b)=>{this.emit(RoomEvent.TrackUnsubscribed,h,b,c)}).on(ParticipantEvent.TrackSubscriptionFailed,h=>{this.emit(RoomEvent.TrackSubscriptionFailed,h,c)}).on(ParticipantEvent.TrackMuted,h=>{this.emitWhenConnected(RoomEvent.TrackMuted,h,c)}).on(ParticipantEvent.TrackUnmuted,h=>{this.emitWhenConnected(RoomEvent.TrackUnmuted,h,c)}).on(ParticipantEvent.ParticipantMetadataChanged,h=>{this.emitWhenConnected(RoomEvent.ParticipantMetadataChanged,h,c)}).on(ParticipantEvent.ConnectionQualityChanged,h=>{this.emitWhenConnected(RoomEvent.ConnectionQualityChanged,h,c)}).on(ParticipantEvent.ParticipantPermissionsChanged,h=>{this.emitWhenConnected(RoomEvent.ParticipantPermissionsChanged,h,c)}).on(ParticipantEvent.TrackSubscriptionStatusChanged,(h,b)=>{this.emitWhenConnected(RoomEvent.TrackSubscriptionStatusChanged,h,b,c)}).on(ParticipantEvent.TrackSubscriptionPermissionChanged,(h,b)=>{this.emitWhenConnected(RoomEvent.TrackSubscriptionPermissionChanged,h,b,c)}),d&&c.updateInfo(d),c}sendSyncState(){var s,d;if(this.engine.subscriber===void 0||this.engine.subscriber.pc.localDescription===null)return;const c=this.engine.subscriber.pc.localDescription,h=this.engine.subscriber.pc.remoteDescription,b=(d=(s=this.connOptions)===null||s===void 0?void 0:s.autoSubscribe)!==null&&d!==void 0?d:!0,_=new Array;this.participants.forEach($=>{$.tracks.forEach(_e=>{_e.isDesired!==b&&_.push(_e.trackSid)})}),this.engine.client.sendSyncState({answer:toProtoSessionDescription({sdp:c.sdp,type:c.type}),offer:h?toProtoSessionDescription({sdp:h.sdp,type:h.type}):void 0,subscription:{trackSids:_,subscribe:!b,participantTracks:[]},publishTracks:this.localParticipant.publishedTracksInfo(),dataChannels:this.localParticipant.dataChannelsInfo()})}updateSubscriptions(){for(const s of this.participants.values())for(const d of s.videoTracks.values())d.isSubscribed&&d instanceof RemoteTrackPublication&&d.emitTrackUpdate()}setAndEmitConnectionState(s){return s===this.state?!1:(this.state=s,this.emit(RoomEvent.ConnectionStateChanged,this.state),!0)}emitWhenConnected(s){if(this.state===ConnectionState.Connected){for(var d=arguments.length,c=new Array(d>1?d-1:0),h=1;h<d;h++)c[h-1]=arguments[h];return this.emit(s,...c)}return!1}async simulateParticipants(s){var d,c;const h=_objectSpread2({audio:!0,video:!0,useRealTracks:!1},s.publish),b=_objectSpread2({count:9,audio:!1,video:!0,aspectRatios:[1.66,1.7,1.3]},s.participants);if(this.handleDisconnect(),this.name="simulated-room",this.localParticipant.updateInfo(ParticipantInfo.fromPartial({identity:"simulated-local",name:"local-name"})),this.setupLocalParticipantEvents(),this.emit(RoomEvent.SignalConnected),this.emit(RoomEvent.Connected),this.setAndEmitConnectionState(ConnectionState.Connected),h.video){const _=new LocalTrackPublication(Track.Kind.Video,TrackInfo.fromPartial({source:TrackSource.CAMERA,sid:Math.floor(Math.random()*1e4).toString(),type:TrackType.AUDIO,name:"video-dummy"}),new LocalVideoTrack(h.useRealTracks?(await navigator.mediaDevices.getUserMedia({video:!0})).getVideoTracks()[0]:createDummyVideoStreamTrack((d=160*b.aspectRatios[0])!==null&&d!==void 0?d:1,160,!0,!0)));this.localParticipant.addTrackPublication(_),this.localParticipant.emit(ParticipantEvent.LocalTrackPublished,_)}if(h.audio){const _=new LocalTrackPublication(Track.Kind.Audio,TrackInfo.fromPartial({source:TrackSource.MICROPHONE,sid:Math.floor(Math.random()*1e4).toString(),type:TrackType.AUDIO}),new LocalAudioTrack(h.useRealTracks?(await navigator.mediaDevices.getUserMedia({audio:!0})).getAudioTracks()[0]:getEmptyAudioStreamTrack()));this.localParticipant.addTrackPublication(_),this.localParticipant.emit(ParticipantEvent.LocalTrackPublished,_)}for(let _=0;_<b.count-1;_+=1){let $=ParticipantInfo.fromPartial({sid:Math.floor(Math.random()*1e4).toString(),identity:"simulated-".concat(_),state:ParticipantInfo_State.ACTIVE,tracks:[],joinedAt:Date.now()});const _e=this.getOrCreateParticipant($.identity,$);if(b.video){const tt=createDummyVideoStreamTrack((c=160*b.aspectRatios[_%b.aspectRatios.length])!==null&&c!==void 0?c:1,160,!1,!0),rt=TrackInfo.fromPartial({source:TrackSource.CAMERA,sid:Math.floor(Math.random()*1e4).toString(),type:TrackType.AUDIO});_e.addSubscribedMediaTrack(tt,rt.sid,new MediaStream([tt])),$.tracks=[...$.tracks,rt]}if(b.audio){const tt=getEmptyAudioStreamTrack(),rt=TrackInfo.fromPartial({source:TrackSource.MICROPHONE,sid:Math.floor(Math.random()*1e4).toString(),type:TrackType.AUDIO});_e.addSubscribedMediaTrack(tt,rt.sid,new MediaStream([tt])),$.tracks=[...$.tracks,rt]}_e.updateInfo($)}}emit(s){for(var d=arguments.length,c=new Array(d>1?d-1:0),h=1;h<d;h++)c[h-1]=arguments[h];return s!==RoomEvent.ActiveSpeakersChanged&&livekitLogger.debug("room event ".concat(s),{event:s,args:c}),super.emit(s,...c)}}var CheckStatus;(function(a){a[a.IDLE=0]="IDLE",a[a.RUNNING=1]="RUNNING",a[a.SKIPPED=2]="SKIPPED",a[a.SUCCESS=3]="SUCCESS",a[a.FAILED=4]="FAILED"})(CheckStatus||(CheckStatus={}));class Checker extends eventsExports.EventEmitter{constructor(s,d){let c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};super(),this.status=CheckStatus.IDLE,this.logs=[],this.errorsAsWarnings=!1,this.url=s,this.token=d,this.name=this.constructor.name,this.room=new Room(c.roomOptions),this.connectOptions=c.connectOptions,c.errorsAsWarnings&&(this.errorsAsWarnings=c.errorsAsWarnings)}async run(s){if(this.status!==CheckStatus.IDLE)throw Error("check is running already");this.setStatus(CheckStatus.RUNNING),this.appendMessage("".concat(this.name," started."));try{await this.perform()}catch(d){d instanceof Error&&(this.errorsAsWarnings?this.appendWarning(d.message):this.appendError(d.message))}return await this.disconnect(),await new Promise(d=>setTimeout(d,500)),this.status!==CheckStatus.SKIPPED&&this.setStatus(this.isSuccess()?CheckStatus.SUCCESS:CheckStatus.FAILED),s&&s(),this.getInfo()}isSuccess(){return!this.logs.some(s=>s.level==="error")}async connect(){return this.room.state===ConnectionState.Connected?this.room:(await this.room.connect(this.url,this.token),this.room)}async disconnect(){this.room&&this.room.state!==ConnectionState.Disconnected&&(await this.room.disconnect(),await new Promise(s=>setTimeout(s,500)))}skip(){this.setStatus(CheckStatus.SKIPPED)}appendMessage(s){this.logs.push({level:"info",message:s}),this.emit("update",this.getInfo())}appendWarning(s){this.logs.push({level:"warning",message:s}),this.emit("update",this.getInfo())}appendError(s){this.logs.push({level:"error",message:s}),this.emit("update",this.getInfo())}setStatus(s){this.status=s,this.emit("update",this.getInfo())}get engine(){var s;return(s=this.room)===null||s===void 0?void 0:s.engine}getInfo(){return{logs:this.logs,name:this.name,status:this.status,description:this.description}}}lib$2.LiveApiModel.Rendering;lib$2.LiveApiModel.VideoRendering;lib$2.LiveApiModel.AudioRendering;lib$2.LiveApiModel.RenderingQuality;lib$2.LiveApiModel.Encoding;lib$2.LiveApiModel.VideoEncoding;lib$2.LiveApiModel.AudioEncoding;const ProjectBroadcastPhase=lib$2.LiveApiModel.ProjectBroadcastPhase,Role=lib$2.LiveApiModel.Role;lib$2.LiveApiModel.DestinationAddress;lib$2.LiveApiModel.VideoCodec;lib$2.LiveApiModel.AudioCodec;lib$2.LiveApiModel.VideoCodecRateControl;lib$2.LiveApiModel.VideoCodecProfile;var Permission=(a=>(a[a.ReadProject=0]="ReadProject",a[a.UpdateProject=1]="UpdateProject",a[a.JoinRoom=2]="JoinRoom",a[a.InviteGuests=3]="InviteGuests",a[a.ManageGuests=4]="ManageGuests",a[a.ManageBroadcast=5]="ManageBroadcast",a[a.ManageSelf=6]="ManageSelf",a))(Permission||{});const permissions={[Role.ROLE_HOST]:[0,1,2,3,4,5],[Role.ROLE_COHOST]:[0,1,2,3,4,5],[Role.ROLE_CONTRIBUTOR]:[0,1,2,3],[Role.ROLE_GUEST]:[0,2,6],[Role.ROLE_VIEWER]:[0,2],[Role.ROLE_IMPERSONATE]:[0,1,3,4,5]},hasPermission=(a,s)=>{var d;return a?Boolean((d=permissions[a])==null?void 0:d.find(c=>c===s)):!1};var DataType=(a=>(a.ChatMessage="ChatMessage",a.ParticipantMetadataUpdate="ParticipantMetadataUpdate",a))(DataType||{}),SpecialEvent=(a=>(a.Chat="Chat",a))(SpecialEvent||{});const decoder$1=new TextDecoder,encoder$1=new TextEncoder;class RoomsManager{constructor(){this.rooms=new Map,this.addRoom=this.addRoom.bind(this),this.ensureRoom=this.ensureRoom.bind(this),this.removeRoom=this.removeRoom.bind(this)}addRoom(s,d,c){const h=new RoomContext(s,d,c,this);return this.rooms.set(d,h),h}ensureRoom(s,d,c){return this.rooms.get(d)?(this.rooms.get(d).token=c,this.rooms.get(d)):this.addRoom(s,d,c)}async removeRoom(s){const d=this.rooms.get(s);if(!Room)throw new Error("room not found!");if(d.isConnecting)throw new Error("Cannot remove room: Room is in connecting state");d.livekitRoom&&await d.livekitRoom.disconnect(!0),this.rooms.delete(s)}}class RoomContext{constructor(s,d,c,h){let b=CoreContext.logLevel.toLowerCase();setLogLevel(b),this.livekitRoom=new Room({dynacast:!0,videoCaptureDefaults:{resolution:VideoPresets.h720.resolution}}),this._baseUrl=s,this._connectListeners=[],this._roomEventListenerRegistry={},this._jwt=c,Object.values(RoomEvent).forEach(_=>{this._roomEventListenerRegistry[_]=new Set}),this._localParticipantEventListenerRegistry={},Object.values(ParticipantEvent).forEach(_=>{this._localParticipantEventListenerRegistry[_]=new Set}),this._specialEventListenerRegistry={},this._manager=h,this._chatHistory=[],this.roomName=d,this.audioTracks=[],this.participants=[],this.guestParticipantMetadata=[],this.isConnecting=!1,this.subscribeToRoomEvent(RoomEvent.DataReceived,(_,$,_e)=>{var ot;const tt=decoder$1.decode(_);switch(JSON.parse(tt).type){case"ChatMessage":return this._appendChat(_,$,_e);case"ParticipantMetadataUpdate":{const it=decoder$1.decode(_),st=JSON.parse(it);hasPermission((ot=st==null?void 0:st.metadata)==null?void 0:ot.participantRole,Permission.ManageSelf)&&this._updateGuestParticipantsStore(st);return}default:return}}),this.connect=this.connect.bind(this),this.subscribeToRoomEvent=this.subscribeToRoomEvent.bind(this),this.subscribeToConnect=this.subscribeToConnect.bind(this),this.subscribeToLocalParticipantEvent=this.subscribeToLocalParticipantEvent.bind(this),this.subscribeToSpecialEvent=this.subscribeToSpecialEvent.bind(this),this.unsubscribeFromRoomEvent=this.unsubscribeFromRoomEvent.bind(this),this.unsubscribeFromSpecialEvent=this.unsubscribeFromSpecialEvent.bind(this),this.unsubscribeFromConnect=this.unsubscribeFromConnect.bind(this),this.unsubscribeFromLocalParticipantEvent=this.unsubscribeFromLocalParticipantEvent.bind(this),this.sendChatMessage=this.sendChatMessage.bind(this),this.kickParticipant=this.kickParticipant.bind(this),this.updateParticipant=this.updateParticipant.bind(this),this.muteTrackAsAdmin=this.muteTrackAsAdmin.bind(this),this._updateParticipants=this._updateParticipants.bind(this),this.subscribeToRoomEvent(RoomEvent.ParticipantConnected,this._updateParticipants),this.subscribeToRoomEvent(RoomEvent.ParticipantDisconnected,this._updateParticipants),this.subscribeToRoomEvent(RoomEvent.TrackSubscribed,this._updateParticipants),this.subscribeToRoomEvent(RoomEvent.TrackUnsubscribed,this._updateParticipants),this.subscribeToRoomEvent(RoomEvent.LocalTrackPublished,this._updateParticipants),this.subscribeToRoomEvent(RoomEvent.LocalTrackUnpublished,this._updateParticipants),this.subscribeToRoomEvent(RoomEvent.Disconnected,()=>{this._updateParticipants()}),this.subscribeToRoomEvent(RoomEvent.ParticipantMetadataChanged,(_,$)=>{if(_!==($==null?void 0:$.metadata)){const _e=JSON.parse($==null?void 0:$.metadata);if(hasPermission(_e==null?void 0:_e.participantRole,Permission.ManageSelf)){if(_e.hasOwnProperty("isMirrored")){const tt={participantId:$==null?void 0:$.identity,metadata:_e,type:"ParticipantMetadataUpdate"};this._updateGuestParticipantsStore(tt)}return}}})}bindApiClient(s){this._apiClient=s}get isAdmin(){return o(this._jwt).video.roomAdmin}set isAdmin(s){log$1.warn("isAdmin cannot be set")}get token(){return this._jwt}set token(s){this._jwt=s}get url(){return this._baseUrl}set url(s){}get chatHistory(){return this._chatHistory}set chatHistory(s){this._chatHistory=s}_updateGuestParticipantsStore(s){if(!this.guestParticipantMetadata.length)this.guestParticipantMetadata.push(s);else{const d=this.guestParticipantMetadata.findIndex(c=>c.participantId===(s==null?void 0:s.participantId));d>-1?this.guestParticipantMetadata[d]=s:this.guestParticipantMetadata.push(s)}}_updateParticipants(){if(!this.livekitRoom||this.livekitRoom.state===ConnectionState.Disconnected){this.participants=[];return}else{const s=Array.from(this.livekitRoom.participants.values()),d=[this.livekitRoom.localParticipant];d.push(...s),this.guestParticipantMetadata=this.guestParticipantMetadata.filter(c=>d.find(h=>(h==null?void 0:h.identity)===(c==null?void 0:c.participantId))),this.participants=d}}async kickParticipant(s){if(this._admin)this._admin.removeParticipant(this.roomName,s);else throw new Error("no admin permissions")}updateParticipant(s,d){if(this._admin){const c=JSON.stringify(d);this._admin.updateParticipant(this.roomName,s,c)}else throw new Error("no admin permissions")}muteTrackAsAdmin(s,d=!0){if(this._admin){const c=this.participants.find(h=>[...h.audioTracks.values(),...h.videoTracks.values()].find(b=>b.trackSid===s));if(!c){log$1.warn("Could not find participant for track:",{trackSid:s});return}this._admin.mutePublishedTrack(this.roomName,c==null?void 0:c.identity,s,d)}else throw new Error("no admin permissions")}_appendChat(s,d,c){const h=decoder$1.decode(s),b=JSON.parse(h),_=d.identity,$=d.name,_e={...b,displayName:$,sender:_};this.chatHistory=[...this.chatHistory,_e],this._triggerSpecialEvents("Chat",_e)}subscribeToConnect(s){return this._connectListeners.push(s),()=>this.unsubscribeFromConnect(s)}unsubscribeFromConnect(s){this._connectListeners=this._connectListeners.filter(d=>d!==s)}subscribeToSpecialEvent(s,d){return this._specialEventListenerRegistry[s]||(this._specialEventListenerRegistry[s]=new Set),this._specialEventListenerRegistry[s].add(d),()=>{this.unsubscribeFromSpecialEvent(s,d)}}unsubscribeFromSpecialEvent(s,d){this._specialEventListenerRegistry[s]||(this._specialEventListenerRegistry[s]=new Set),this._specialEventListenerRegistry[s].delete(d)}_triggerSpecialEvents(s,...d){this._specialEventListenerRegistry[s]||(this._specialEventListenerRegistry[s]=new Set),this._specialEventListenerRegistry[s].forEach(c=>{c(...d)})}async connect(s={}){var d,c;try{if(this.livekitRoom.state==="connected"||this.isConnecting)return;this.isConnecting=!0,await this.livekitRoom.connect(`wss://${this._baseUrl}`,this._jwt,{...s}),this.isConnecting=!1,Object.values(RoomEvent).forEach(h=>{this.livekitRoom.on(h,(...b)=>{this._roomEventListenerRegistry[h].forEach(_=>{_(...b)})})}),Object.values(ParticipantEvent).forEach(h=>{this.livekitRoom.localParticipant.on(h,(...b)=>{this._localParticipantEventListenerRegistry[h].forEach(_=>{_(...b)})})}),this._updateParticipants(),this._connectListeners.forEach(h=>h(this.livekitRoom)),lib$2.LiveKitUtils.isRoomAdmin(this._jwt)?(log$1.info("Room: Granting admin permissions"),log$1.debug("Livekit server: ",(d=this._apiClient)==null?void 0:d.getLiveKitServer(!0)),this._admin=new dist.RoomServiceClient((c=this._apiClient)==null?void 0:c.getLiveKitServer(!0),void 0,void 0,this._jwt)):log$1.debug("Room: Not an admin")}catch(h){this.isConnecting=!1,log$1.error(h)}}subscribeToLocalParticipantEvent(s,d){return this._localParticipantEventListenerRegistry[s]||(this._localParticipantEventListenerRegistry[s]=new Set),this._localParticipantEventListenerRegistry[s].add(d),()=>{this.unsubscribeFromLocalParticipantEvent(s,d)}}unsubscribeFromLocalParticipantEvent(s,d){this._localParticipantEventListenerRegistry[s]||(this._localParticipantEventListenerRegistry[s]=new Set),this._localParticipantEventListenerRegistry[s].delete(d)}subscribeToRoomEvent(s,d){return this._roomEventListenerRegistry[s]||(this._roomEventListenerRegistry[s]=new Set),this._roomEventListenerRegistry[s].add(d),()=>{this.unsubscribeFromRoomEvent(s,d)}}unsubscribeFromRoomEvent(s,d){this._roomEventListenerRegistry[s]||(this._roomEventListenerRegistry[s]=new Set),this._roomEventListenerRegistry[s].delete(d)}sendChatMessage(s){const{message:d,recipients:c,metadata:h}=s;if(!this.livekitRoom||this.livekitRoom.state!=="connected")return;const b={type:"ChatMessage",recipients:c,metadata:h,content:d,timestamp:Date.now()},_=JSON.stringify(b),$=encoder$1.encode(_);if({...b,sender:this.livekitRoom.localParticipant.identity,displayName:this.livekitRoom.localParticipant.identity},Boolean(c)){const _e=c.map(this.livekitRoom.getParticipantByIdentity);return this.livekitRoom.localParticipant.publishData($,DataPacket_Kind.RELIABLE,_e).then(()=>{this._appendChat($,this.livekitRoom.localParticipant,DataPacket_Kind.RELIABLE)})}else return this.livekitRoom.localParticipant.publishData($,DataPacket_Kind.RELIABLE).then(()=>{this._appendChat($,this.livekitRoom.localParticipant,DataPacket_Kind.RELIABLE)})}}const webrtcManager=new RoomsManager,encoder=new TextEncoder,decoder=new TextDecoder,simpleRooms=new Map,getRoom=a=>{if(!a)return null;if(simpleRooms.get(a))return simpleRooms.get(a);const s=webrtcManager.rooms.get(a);if(!s)return null;const d=s.livekitRoom,c=d==null?void 0:d.localParticipant;window.__StudioRoom=d,c||log$1.warn("No local participant!");const h={useTracks:new Set,useTrack:new Map,useParticipants:new Set,useParticipant:new Map,useChatHistory:new Set};let b={tracks:[],participants:[],result:{participants:[],tracks:[]},chat:s.chatHistory};const _=()=>{const dt=s.participants,ut=s.guestParticipantMetadata,ht=dt.flatMap(ct=>ct.getTracks().map(mt=>({...mt,participant:ct}))),nt={participants:dt.map(ct=>{const mt=ut.find(Tt=>Tt.participantId===ct.identity);if(mt){let Tt=JSON.parse(ct.metadata);Tt={...Tt,...mt.metadata},ct.metadata=JSON.stringify(Tt)}const kt=JSON.parse(ct.metadata);return{id:ct.identity,isSelf:ct===c,connectionQuality:ct.connectionQuality,displayName:kt.displayName||ct.name,joinedAt:ct.joinedAt,role:kt.participantRole,meta:kt,trackIds:ht.filter(Tt=>Tt.participant.sid===ct.sid).map(Tt=>Tt.trackSid)}}),tracks:ht.map(ct=>{var kt,Tt,Pt,At;const mt=JSON.parse((kt=ct==null?void 0:ct.participant)==null?void 0:kt.metadata);return{mediaStreamTrack:(Tt=ct.track)==null?void 0:Tt.mediaStreamTrack,id:ct.trackSid,participantId:(Pt=ct.participant)==null?void 0:Pt.identity,isMuted:(At=ct.track)==null?void 0:At.isMuted,type:ct.source,isExternal:Boolean(mt==null?void 0:mt[ct.trackSid])}})};b={tracks:ht,participants:dt,result:nt,chat:s.chatHistory},h.useTracks.forEach(ct=>ct(nt.tracks)),h.useTrack.forEach((ct,mt)=>{mt(tt(ct))}),h.useParticipants.forEach(ct=>ct(nt.participants)),h.useParticipant.forEach((ct,mt)=>{mt(rt(ct))}),h.useChatHistory.forEach(ct=>{ct(b.chat)})},$=[RoomEvent.ParticipantConnected,RoomEvent.ParticipantDisconnected,RoomEvent.ParticipantMetadataChanged,RoomEvent.Disconnected,RoomEvent.TrackSubscribed,RoomEvent.TrackUnsubscribed,RoomEvent.LocalTrackPublished,RoomEvent.LocalTrackUnpublished,RoomEvent.ConnectionQualityChanged,RoomEvent.TrackMuted,RoomEvent.TrackUnmuted,RoomEvent.TrackStreamStateChanged];s.subscribeToRoomEvent(RoomEvent.DataReceived,(dt,ut,ht)=>{const nt=decoder.decode(dt);JSON.parse(nt).type===DataType.ParticipantMetadataUpdate&&_()}),$.map(dt=>s.subscribeToRoomEvent(dt,()=>_())).push(s.subscribeToSpecialEvent(SpecialEvent.Chat,_));const tt=dt=>b.result.tracks.find(ut=>ut.id===dt),rt=dt=>b.result.participants.find(ut=>ut.id===dt),ot=(dt,ut)=>{const ht=c.getTracks().find(nt=>nt.trackSid===dt);ht&&(ut?ht.mute():ht.unmute())};let it,st;const lt={id:s.roomName,participantId:c.identity,setTrackEnabled:ot,setCameraEnabled:(dt=!0)=>c.setCameraEnabled(dt),setMicrophoneEnabled:(dt=!0)=>c.setMicrophoneEnabled(dt),setCamera:async(dt={})=>{var ht;if(it){log$1.warn("Cannot set camera until previous has resolved");return}it=!0;let ut;try{const ct=c.getTracks().filter(kt=>(kt==null?void 0:kt.source)===Track.Source.Camera).find(kt=>!tt(kt==null?void 0:kt.trackSid).isExternal),mt=await c.createTracks({video:{deviceId:dt.deviceId,resolution:dt.resolution||{width:1280,height:720,frameRate:30,aspectRatio:16/9}}});ct!=null&&ct.isMuted&&mt.forEach(kt=>{kt.mute()}),ut=await Promise.all(mt.map(kt=>c.publishTrack(kt))),ct&&c.unpublishTrack(ct.track)}catch(nt){throw nt}finally{return it=!1,tt((ht=ut[0])==null?void 0:ht.trackSid)}},setMicrophone:async dt=>{var ht;if(st){log$1.warn("Cannot set microphone until previous has resolved");return}st=!0;let ut;try{const ct=c.getTracks().filter(kt=>kt.source===Track.Source.Microphone).find(kt=>!tt(kt==null?void 0:kt.trackSid).isExternal),mt=await c.createTracks({audio:dt||!0});ct!=null&&ct.isMuted&&mt.forEach(kt=>{kt.mute()}),ut=await Promise.all(mt.map(kt=>c.publishTrack(kt))),ct&&c.unpublishTrack(ct.track)}catch(nt){throw nt}finally{return st=!1,tt((ht=ut[0])==null?void 0:ht.trackSid)}},addMicrophone:async dt=>{var mt;if(st){log$1.warn("Cannot set microphone until previous has resolved");return}st=!0;const ut=await c.createTracks({audio:dt||!0}),nt=c.getTracks().filter(kt=>kt.source===Track.Source.Microphone).find(kt=>{var Pt,At;const Tt=tt(kt==null?void 0:kt.trackSid);((At=(Pt=Tt==null?void 0:Tt.mediaStreamTrack)==null?void 0:Pt.getSettings())==null?void 0:At.deviceId)===dt.deviceId&&(Tt==null||Tt.isExternal)});nt!=null&&nt.isMuted&&ut.forEach(kt=>{kt.mute()});const ct=await Promise.all(ut.map(kt=>c.publishTrack(kt)));return nt&&c.unpublishTrack(nt.track),st=!1,tt((mt=ct[0])==null?void 0:mt.trackSid)},addCamera:async(dt={})=>{var ct;const ut=await c.createTracks({video:{deviceId:dt.deviceId,resolution:dt.resolution||{width:1280,height:720,frameRate:30,aspectRatio:1.7777777777777777}}}),ht=c.getTracks().find(mt=>{var kt,Tt,Pt;return(mt==null?void 0:mt.source)===Track.Source.Camera&&((Pt=(Tt=(kt=mt==null?void 0:mt.track)==null?void 0:kt.mediaStreamTrack)==null?void 0:Tt.getSettings())==null?void 0:Pt.deviceId)===dt.deviceId});ht!=null&&ht.isMuted&&ut.forEach(mt=>{mt.mute()});const nt=await Promise.all(ut.map(mt=>c.publishTrack(mt)));return ht&&c.unpublishTrack(ht.track),st=!1,tt((ct=nt[0])==null?void 0:ct.trackSid)},addScreen:async(dt={audio:!1})=>{const ut=await c.createScreenTracks(dt),ht=await Promise.all(ut.map(mt=>c.publishTrack(mt))),nt=ht.find(mt=>mt.kind==="video"),ct=ht.find(mt=>mt.kind==="audio");return{screen:tt(nt==null?void 0:nt.trackSid),audio:tt(ct==null?void 0:ct.trackSid)}},removeTrack:async dt=>{const ut=b.tracks.find(ht=>ht.trackSid===dt);c.unpublishTrack(ut.track)},setLocalParticipantMetadata:async(dt,ut)=>{const ht=JSON.stringify(ut),nt=encoder.encode(JSON.stringify({metadata:ut,type:DataType.ParticipantMetadataUpdate,participantId:dt}));return c.setMetadata(ht),await c.publishData(nt,DataPacket_Kind.RELIABLE)},setParticipantMetadata:(dt,ut)=>s.updateParticipant(dt,ut),kickParticipant:s.kickParticipant,muteTrackAsAdmin:s.muteTrackAsAdmin,sendChatMessage:s.sendChatMessage,getTracks:()=>b.result.tracks,useTracks:dt=>(h.useTracks.add(dt),dt(b.result.tracks),()=>{h.useTracks.delete(dt)}),getTrack:tt,useTrack:(dt,ut)=>(h.useTrack.set(ut,dt),ut(tt(dt)),()=>{h.useTrack.delete(ut)}),getParticipant:rt,getParticipants:()=>b.result.participants,useParticipants:dt=>(h.useParticipants.add(dt),dt(b.result.participants),()=>{h.useParticipants.delete(dt)}),useParticipant:(dt,ut)=>(h.useParticipant.set(ut,dt),ut(rt(dt)),()=>{h.useTrack.delete(ut)}),useChatHistory:dt=>(h.useChatHistory.add(dt),dt(b.chat),()=>{h.useChatHistory.delete(dt)}),useActiveSpeakers:dt=>{var ht,nt;const ut=ct=>{dt(ct.map(mt=>mt.identity))};return(ht=s.livekitRoom)==null||ht.on(RoomEvent.ActiveSpeakersChanged,ut),ut((nt=s.livekitRoom)==null?void 0:nt.activeSpeakers),()=>{var ct;(ct=s.livekitRoom)==null||ct.off(RoomEvent.ActiveSpeakersChanged,ut)}},sendData:(dt,ut)=>{const ht=encoder.encode(JSON.stringify(dt)),nt=ut==null?void 0:ut.map(ct=>{var mt,kt;return(kt=(mt=s.livekitRoom)==null?void 0:mt.getParticipantByIdentity(ct))==null?void 0:kt.sid}).filter(Boolean);return c.publishData(ht,DataPacket_Kind.RELIABLE,nt)},onData:dt=>{var ht;const ut=(nt,ct)=>{const mt=JSON.parse(decoder.decode(nt));dt(mt,ct==null?void 0:ct.identity)};return(ht=s.livekitRoom)==null||ht.on(RoomEvent.DataReceived,ut),()=>{var nt;(nt=s.livekitRoom)==null||nt.off(RoomEvent.DataReceived,ut)}},connect:()=>s.connect(),disconnect:()=>{var dt;return(dt=s.livekitRoom)==null?void 0:dt.disconnect()},onDisconnected:dt=>{var ut;return(ut=s.livekitRoom)==null||ut.on(RoomEvent.Disconnected,dt),()=>{var ht;(ht=s.livekitRoom)==null||ht.off(RoomEvent.DataReceived,dt)}},setAudioOutput:dt=>{var ut;return(ut=s.livekitRoom)==null?void 0:ut.switchActiveDevice("audiooutput",dt)}};return _(),simpleRooms.set(a,lt),lt},{state:state$1}=CoreContext,getAccessTokenData=()=>{var a;return((a=CoreContext.clients.accessTokenClaims)==null?void 0:a.user)||{}},getBaseUser=()=>state$1.user?{id:state$1.user.id,props:state$1.user.props,name:state$1.user.name,projects:state$1.projects.map(toBaseProject),sources:state$1.sources.map(toBaseSource)}:null,toBaseProject=a=>{const{compositor:s,videoApi:d,props:c={},role:h}=a,{destinations:b,encoding:_,rendering:$,sources:_e}=d.project,tt={get:s.get,getRoot:s.getRoot,getParent:s.getParent};Object.defineProperty(tt,"nodes",{get(){return s.nodes.filter(it=>!it._deleted)}});const rt=a.videoApi.phase,ot=a.videoApi.broadcastId||null;return{broadcastPhase:rt,role:h,broadcastId:ot,isLive:[ProjectBroadcastPhase.PROJECT_BROADCAST_PHASE_RUNNING,ProjectBroadcastPhase.PROJECT_BROADCAST_PHASE_STOPPING].includes(rt),scene:tt,joinRoom:async(it={})=>CoreContext.Command.joinRoom({projectId:a.id,...it}),subscribe:it=>CoreContext.subscribe((st,lt)=>{lt.projectId&&(lt==null?void 0:lt.projectId)===a.id&&it(st,lt)}),destinations:b.map(toBaseDestination),sources:_e.map(toBaseSource),encoding:_,rendering:$,id:a.id,hostDisplayName:a.props.hostDisplayName,props:c}},toBaseDestination=a=>{var s;return{id:a.destinationId,enabled:a.enabled,address:a.address,props:((s=a.metadata)==null?void 0:s.props)||(a==null?void 0:a.metadata)||{}}},toBaseSource=a=>{var s;return{id:a.sourceId,address:a.address,props:((s=a.metadata)==null?void 0:s.props)||{}}},hydrateProject=async(a,s,d)=>{const c=a.metadata||{},h={collectionId:a.collectionId,projectId:a.projectId,updateMask:[]};hasPermission(s,Permission.ManageBroadcast)&&a.composition.studioSdk.version!==CoreContext.rendererVersion&&(h.composition={studioSdk:{version:CoreContext.rendererVersion}},h.updateMask.push("composition.studioSdk.version")),d&&(h.rendering={video:{width:d.x,height:d.y,framerate:30}},h.updateMask.push("rendering")),h.updateMask.length&&await CoreContext.clients.LiveApi().project.updateProject(h);const _=await layoutToProject(c.layoutId,d);return{id:a.projectId,compositor:_,role:s,videoApi:{project:a,phase:ProjectBroadcastPhase.PROJECT_BROADCAST_PHASE_UNSPECIFIED},layoutApi:{layoutId:c.layoutId},props:(c==null?void 0:c.props)||c}},sceneNodeToLayer=a=>{const{id:s,props:d={},children:c=[]}=a;return{...s?{id:s}:{},type:d.type,data:{...d},children:c.map(h=>h.id)}},nodeToLayer=a=>({id:a.id,type:a.props.type,data:{...a.props},children:a.childIds.map(s=>s)}),layerToNode=a=>({id:String(a.id),props:{type:a.type,...a.data},childIds:a.children.map(s=>String(s))}),layoutToProject=async(a,s)=>{const{layers:d}=await CoreContext.clients.LayoutApi().layer.listLayers({layoutId:a});if(s&&d){const{x:_,y:$}=s,_e=d==null?void 0:d.reduce((tt,rt)=>tt?tt.data.isRoot?tt:rt.data.isRoot||!d.some(ot=>ot.children.includes(rt.id))?rt:tt:rt,null);if(_e){const tt=await CoreContext.clients.LayoutApi().layer.updateLayer({layoutId:_e.layoutId,layerId:_e.id,layer:{x:_,y:$,data:{..._e.data,size:{x:_,y:$}}}}),rt=d.findIndex(ot=>ot.id===tt.id);d[rt]=tt}}const c=d.map(layerToNode),h=c.reduce((_,$)=>_?_.props.isRoot?_:$.props.isRoot||!c.some(_e=>_e.childIds.includes($.id))?$:_:$,null),b=h?toSceneTree(c,h.id):null;return CoreContext.compositor.loadProject(b,a)},getUser=()=>{const a=state$1.user;if(!a)throw new Error("User not loaded");return a},getProject=a=>state$1.projects.find(s=>s.id===a),getProjectByLayoutId=a=>state$1.projects.find(s=>s.compositor.id===a),getProjectRoom=a=>{var s;return getRoom((s=getProject(a))==null?void 0:s.roomId)},{connectionId}=CoreContext,latestUpdateVersion={},getNextNodeVersion=a=>(latestUpdateVersion[a]||(latestUpdateVersion[a]=0),++latestUpdateVersion[a]),request=(a,s)=>{const d=s.map(c=>{const[h,b]=c;return{[h]:b}});return log$1.debug("Batch request",d),CoreContext.clients.LayoutApi().layer.batch({layoutId:a,layers:d,requestMetadata:{connectionId,layoutId:a,updateVersions:s.filter(([c])=>c==="update").map(([c,h])=>({[h.id]:getNextNodeVersion(h.id)})).reduce((c,h)=>({...h,...c}),{})}})},compositorAdapter=(a,s)=>({async insert(d={},c,h){const b=nodeToLayer({id:null,props:d,childIds:[]});c?b.type="child":b.type="root",log$1.debug("Insert layer",b);const _=await CoreContext.clients.LayoutApi().layer.createLayer({layoutId:a,layer:{...b,requestMetadata:{connectionId,layoutId:a}}});if(_.code)throw new Error(_.message);const $=await s.get(c);if(c&&!$)throw Error("Parent not found with ID");if($){const _e=nodeToLayer($),tt=insertAt$1(h,_.id,_e.children),rt={layoutId:a,layerId:_e.id,layer:{children:tt,requestMetadata:{connectionId,layoutId:a,updateVersion:{[b.id]:getNextNodeVersion(b.id)}}}};await CoreContext.clients.LayoutApi().layer.updateLayer(rt)}return String(_.id)},async update(d,c={}){const h=s.get(d),b=nodeToLayer({...h,props:{...h.props,...c}}),_={layoutId:a,layerId:b.id,layer:{...b,requestMetadata:{connectionId,layoutId:a,updateVersions:{[b.id]:getNextNodeVersion(b.id)}}}};log$1.debug("Update layer",_),await CoreContext.clients.LayoutApi().layer.updateLayer(_)},async remove(d){const c=await s.getParent(d);if(c){const h=nodeToLayer(c),b=h.children.filter($=>$!==d),_={layoutId:a,layerId:h.id,layer:{children:b,requestMetadata:{connectionId,layoutId:a,updateVersions:{[h.id]:getNextNodeVersion(h.id)}}}};await CoreContext.clients.LayoutApi().layer.updateLayer(_)}await CoreContext.clients.LayoutApi().layer.deleteLayer({layoutId:a,layerId:d,payload:{requestMetadata:{connectionId,layoutId:a}}})},async reorder(d,c){const h=s.get(d),b=nodeToLayer({...h,childIds:c});log$1.debug("Reorder layer children",b),await CoreContext.clients.LayoutApi().layer.updateLayer({layoutId:a,layerId:b.id,layer:{children:b.children,requestMetadata:{connectionId,layoutId:a,updateVersions:{[b.id]:getNextNodeVersion(b.id)}}}})},async move(d,c,h){const b=s.get(d),_=s.get(s.getParent(d).id),$=nodeToLayer({..._,childIds:pull$2(_.childIds,b.id)}),_e=s.get(c),tt=nodeToLayer({..._e,childIds:insertAt$1(h,b.id,_e.childIds)});log$1.debug("Move layers"),await Promise.all([CoreContext.clients.LayoutApi().layer.updateLayer({layoutId:a,layerId:$.id,layer:{children:$.children,requestMetadata:{connectionId,layoutId:a,updateVersions:{[$.id]:getNextNodeVersion($.id)}}}}),CoreContext.clients.LayoutApi().layer.updateLayer({layoutId:a,layerId:tt.id,layer:{children:tt.children,requestMetadata:{connectionId,layoutId:a,updateVersions:{[tt.id]:getNextNodeVersion(tt.id)}}}})])},async batch(d){const c=d.map(([b,_])=>[b,sceneNodeToLayer(_)]),h=await request(a,c);return log$1.debug("Batch response",h),h}});var config$1=a=>({defaults:{previewTokenDuration:1e3*60*60,guestTokenDuration:1e3*60*60*12,transforms:{RoomParticipant:"LS-Room-Participant",Image:"LS-Image",Banner:"LS-Banner",Text:"LS-Text"}}}),reactDom={exports:{}},reactDom_production_min={},react={exports:{}},react_production_min={};/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var getOwnPropertySymbols=Object.getOwnPropertySymbols,hasOwnProperty=Object.prototype.hasOwnProperty,propIsEnumerable=Object.prototype.propertyIsEnumerable;function toObject(a){if(a==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(a)}function shouldUseNative(){try{if(!Object.assign)return!1;var a=new String("abc");if(a[5]="de",Object.getOwnPropertyNames(a)[0]==="5")return!1;for(var s={},d=0;d<10;d++)s["_"+String.fromCharCode(d)]=d;var c=Object.getOwnPropertyNames(s).map(function(b){return s[b]});if(c.join("")!=="0123456789")return!1;var h={};return"abcdefghijklmnopqrst".split("").forEach(function(b){h[b]=b}),Object.keys(Object.assign({},h)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}var objectAssign=shouldUseNative()?Object.assign:function(a,s){for(var d,c=toObject(a),h,b=1;b<arguments.length;b++){d=Object(arguments[b]);for(var _ in d)hasOwnProperty.call(d,_)&&(c[_]=d[_]);if(getOwnPropertySymbols){h=getOwnPropertySymbols(d);for(var $=0;$<h.length;$++)propIsEnumerable.call(d,h[$])&&(c[h[$]]=d[h[$]])}}return c};/** @license React v17.0.2
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l=objectAssign,n=60103,p=60106;react_production_min.Fragment=60107;react_production_min.StrictMode=60108;react_production_min.Profiler=60114;var q=60109,r$1=60110,t=60112;react_production_min.Suspense=60113;var u=60115,v=60116;if(typeof Symbol=="function"&&Symbol.for){var w=Symbol.for;n=w("react.element"),p=w("react.portal"),react_production_min.Fragment=w("react.fragment"),react_production_min.StrictMode=w("react.strict_mode"),react_production_min.Profiler=w("react.profiler"),q=w("react.provider"),r$1=w("react.context"),t=w("react.forward_ref"),react_production_min.Suspense=w("react.suspense"),u=w("react.memo"),v=w("react.lazy")}var x=typeof Symbol=="function"&&Symbol.iterator;function y$1(a){return a===null||typeof a!="object"?null:(a=x&&a[x]||a["@@iterator"],typeof a=="function"?a:null)}function z(a){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+a,d=1;d<arguments.length;d++)s+="&args[]="+encodeURIComponent(arguments[d]);return"Minified React error #"+a+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var A={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},B$1={};function C(a,s,d){this.props=a,this.context=s,this.refs=B$1,this.updater=d||A}C.prototype.isReactComponent={};C.prototype.setState=function(a,s){if(typeof a!="object"&&typeof a!="function"&&a!=null)throw Error(z(85));this.updater.enqueueSetState(this,a,s,"setState")};C.prototype.forceUpdate=function(a){this.updater.enqueueForceUpdate(this,a,"forceUpdate")};function D$1(){}D$1.prototype=C.prototype;function E$1(a,s,d){this.props=a,this.context=s,this.refs=B$1,this.updater=d||A}var F$1=E$1.prototype=new D$1;F$1.constructor=E$1;l(F$1,C.prototype);F$1.isPureReactComponent=!0;var G$1={current:null},H$1=Object.prototype.hasOwnProperty,I$1={key:!0,ref:!0,__self:!0,__source:!0};function J(a,s,d){var c,h={},b=null,_=null;if(s!=null)for(c in s.ref!==void 0&&(_=s.ref),s.key!==void 0&&(b=""+s.key),s)H$1.call(s,c)&&!I$1.hasOwnProperty(c)&&(h[c]=s[c]);var $=arguments.length-2;if($===1)h.children=d;else if(1<$){for(var _e=Array($),tt=0;tt<$;tt++)_e[tt]=arguments[tt+2];h.children=_e}if(a&&a.defaultProps)for(c in $=a.defaultProps,$)h[c]===void 0&&(h[c]=$[c]);return{$$typeof:n,type:a,key:b,ref:_,props:h,_owner:G$1.current}}function K(a,s){return{$$typeof:n,type:a.type,key:s,ref:a.ref,props:a.props,_owner:a._owner}}function L(a){return typeof a=="object"&&a!==null&&a.$$typeof===n}function escape(a){var s={"=":"=0",":":"=2"};return"$"+a.replace(/[=:]/g,function(d){return s[d]})}var M$1=/\/+/g;function N$1(a,s){return typeof a=="object"&&a!==null&&a.key!=null?escape(""+a.key):s.toString(36)}function O$1(a,s,d,c,h){var b=typeof a;(b==="undefined"||b==="boolean")&&(a=null);var _=!1;if(a===null)_=!0;else switch(b){case"string":case"number":_=!0;break;case"object":switch(a.$$typeof){case n:case p:_=!0}}if(_)return _=a,h=h(_),a=c===""?"."+N$1(_,0):c,Array.isArray(h)?(d="",a!=null&&(d=a.replace(M$1,"$&/")+"/"),O$1(h,s,d,"",function(tt){return tt})):h!=null&&(L(h)&&(h=K(h,d+(!h.key||_&&_.key===h.key?"":(""+h.key).replace(M$1,"$&/")+"/")+a)),s.push(h)),1;if(_=0,c=c===""?".":c+":",Array.isArray(a))for(var $=0;$<a.length;$++){b=a[$];var _e=c+N$1(b,$);_+=O$1(b,s,d,_e,h)}else if(_e=y$1(a),typeof _e=="function")for(a=_e.call(a),$=0;!(b=a.next()).done;)b=b.value,_e=c+N$1(b,$++),_+=O$1(b,s,d,_e,h);else if(b==="object")throw s=""+a,Error(z(31,s==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":s));return _}function P$1(a,s,d){if(a==null)return a;var c=[],h=0;return O$1(a,c,"","",function(b){return s.call(d,b,h++)}),c}function Q(a){if(a._status===-1){var s=a._result;s=s(),a._status=0,a._result=s,s.then(function(d){a._status===0&&(d=d.default,a._status=1,a._result=d)},function(d){a._status===0&&(a._status=2,a._result=d)})}if(a._status===1)return a._result;throw a._result}var R$1={current:null};function S$1(){var a=R$1.current;if(a===null)throw Error(z(321));return a}var T$1={ReactCurrentDispatcher:R$1,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:G$1,IsSomeRendererActing:{current:!1},assign:l};react_production_min.Children={map:P$1,forEach:function(a,s,d){P$1(a,function(){s.apply(this,arguments)},d)},count:function(a){var s=0;return P$1(a,function(){s++}),s},toArray:function(a){return P$1(a,function(s){return s})||[]},only:function(a){if(!L(a))throw Error(z(143));return a}};react_production_min.Component=C;react_production_min.PureComponent=E$1;react_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=T$1;react_production_min.cloneElement=function(a,s,d){if(a==null)throw Error(z(267,a));var c=l({},a.props),h=a.key,b=a.ref,_=a._owner;if(s!=null){if(s.ref!==void 0&&(b=s.ref,_=G$1.current),s.key!==void 0&&(h=""+s.key),a.type&&a.type.defaultProps)var $=a.type.defaultProps;for(_e in s)H$1.call(s,_e)&&!I$1.hasOwnProperty(_e)&&(c[_e]=s[_e]===void 0&&$!==void 0?$[_e]:s[_e])}var _e=arguments.length-2;if(_e===1)c.children=d;else if(1<_e){$=Array(_e);for(var tt=0;tt<_e;tt++)$[tt]=arguments[tt+2];c.children=$}return{$$typeof:n,type:a.type,key:h,ref:b,props:c,_owner:_}};react_production_min.createContext=function(a,s){return s===void 0&&(s=null),a={$$typeof:r$1,_calculateChangedBits:s,_currentValue:a,_currentValue2:a,_threadCount:0,Provider:null,Consumer:null},a.Provider={$$typeof:q,_context:a},a.Consumer=a};react_production_min.createElement=J;react_production_min.createFactory=function(a){var s=J.bind(null,a);return s.type=a,s};react_production_min.createRef=function(){return{current:null}};react_production_min.forwardRef=function(a){return{$$typeof:t,render:a}};react_production_min.isValidElement=L;react_production_min.lazy=function(a){return{$$typeof:v,_payload:{_status:-1,_result:a},_init:Q}};react_production_min.memo=function(a,s){return{$$typeof:u,type:a,compare:s===void 0?null:s}};react_production_min.useCallback=function(a,s){return S$1().useCallback(a,s)};react_production_min.useContext=function(a,s){return S$1().useContext(a,s)};react_production_min.useDebugValue=function(){};react_production_min.useEffect=function(a,s){return S$1().useEffect(a,s)};react_production_min.useImperativeHandle=function(a,s,d){return S$1().useImperativeHandle(a,s,d)};react_production_min.useLayoutEffect=function(a,s){return S$1().useLayoutEffect(a,s)};react_production_min.useMemo=function(a,s){return S$1().useMemo(a,s)};react_production_min.useReducer=function(a,s,d){return S$1().useReducer(a,s,d)};react_production_min.useRef=function(a){return S$1().useRef(a)};react_production_min.useState=function(a){return S$1().useState(a)};react_production_min.version="17.0.2";react.exports=react_production_min;var React=react.exports,scheduler={exports:{}},scheduler_production_min={};/** @license React v0.20.2
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(a){var s,d,c,h;if(typeof performance=="object"&&typeof performance.now=="function"){var b=performance;a.unstable_now=function(){return b.now()}}else{var _=Date,$=_.now();a.unstable_now=function(){return _.now()-$}}if(typeof window=="undefined"||typeof MessageChannel!="function"){var _e=null,tt=null,rt=function(){if(_e!==null)try{var Ft=a.unstable_now();_e(!0,Ft),_e=null}catch(pt){throw setTimeout(rt,0),pt}};s=function(Ft){_e!==null?setTimeout(s,0,Ft):(_e=Ft,setTimeout(rt,0))},d=function(Ft,pt){tt=setTimeout(Ft,pt)},c=function(){clearTimeout(tt)},a.unstable_shouldYield=function(){return!1},h=a.unstable_forceFrameRate=function(){}}else{var ot=window.setTimeout,it=window.clearTimeout;if(typeof console!="undefined"){var st=window.cancelAnimationFrame;typeof window.requestAnimationFrame!="function"&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),typeof st!="function"&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")}var lt=!1,dt=null,ut=-1,ht=5,nt=0;a.unstable_shouldYield=function(){return a.unstable_now()>=nt},h=function(){},a.unstable_forceFrameRate=function(Ft){0>Ft||125<Ft?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ht=0<Ft?Math.floor(1e3/Ft):5};var ct=new MessageChannel,mt=ct.port2;ct.port1.onmessage=function(){if(dt!==null){var Ft=a.unstable_now();nt=Ft+ht;try{dt(!0,Ft)?mt.postMessage(null):(lt=!1,dt=null)}catch(pt){throw mt.postMessage(null),pt}}else lt=!1},s=function(Ft){dt=Ft,lt||(lt=!0,mt.postMessage(null))},d=function(Ft,pt){ut=ot(function(){Ft(a.unstable_now())},pt)},c=function(){it(ut),ut=-1}}function kt(Ft,pt){var _t=Ft.length;Ft.push(pt);e:for(;;){var Lt=_t-1>>>1,Gt=Ft[Lt];if(Gt!==void 0&&0<At(Gt,pt))Ft[Lt]=pt,Ft[_t]=Gt,_t=Lt;else break e}}function Tt(Ft){return Ft=Ft[0],Ft===void 0?null:Ft}function Pt(Ft){var pt=Ft[0];if(pt!==void 0){var _t=Ft.pop();if(_t!==pt){Ft[0]=_t;e:for(var Lt=0,Gt=Ft.length;Lt<Gt;){var Ut=2*(Lt+1)-1,$t=Ft[Ut],qt=Ut+1,Wt=Ft[qt];if($t!==void 0&&0>At($t,_t))Wt!==void 0&&0>At(Wt,$t)?(Ft[Lt]=Wt,Ft[qt]=_t,Lt=qt):(Ft[Lt]=$t,Ft[Ut]=_t,Lt=Ut);else if(Wt!==void 0&&0>At(Wt,_t))Ft[Lt]=Wt,Ft[qt]=_t,Lt=qt;else break e}}return pt}return null}function At(Ft,pt){var _t=Ft.sortIndex-pt.sortIndex;return _t!==0?_t:Ft.id-pt.id}var gt=[],Ct=[],Nt=1,vt=null,Et=3,It=!1,xt=!1,Dt=!1;function Ot(Ft){for(var pt=Tt(Ct);pt!==null;){if(pt.callback===null)Pt(Ct);else if(pt.startTime<=Ft)Pt(Ct),pt.sortIndex=pt.expirationTime,kt(gt,pt);else break;pt=Tt(Ct)}}function Jt(Ft){if(Dt=!1,Ot(Ft),!xt)if(Tt(gt)!==null)xt=!0,s(Yt);else{var pt=Tt(Ct);pt!==null&&d(Jt,pt.startTime-Ft)}}function Yt(Ft,pt){xt=!1,Dt&&(Dt=!1,c()),It=!0;var _t=Et;try{for(Ot(pt),vt=Tt(gt);vt!==null&&(!(vt.expirationTime>pt)||Ft&&!a.unstable_shouldYield());){var Lt=vt.callback;if(typeof Lt=="function"){vt.callback=null,Et=vt.priorityLevel;var Gt=Lt(vt.expirationTime<=pt);pt=a.unstable_now(),typeof Gt=="function"?vt.callback=Gt:vt===Tt(gt)&&Pt(gt),Ot(pt)}else Pt(gt);vt=Tt(gt)}if(vt!==null)var Ut=!0;else{var $t=Tt(Ct);$t!==null&&d(Jt,$t.startTime-pt),Ut=!1}return Ut}finally{vt=null,Et=_t,It=!1}}var Qt=h;a.unstable_IdlePriority=5,a.unstable_ImmediatePriority=1,a.unstable_LowPriority=4,a.unstable_NormalPriority=3,a.unstable_Profiling=null,a.unstable_UserBlockingPriority=2,a.unstable_cancelCallback=function(Ft){Ft.callback=null},a.unstable_continueExecution=function(){xt||It||(xt=!0,s(Yt))},a.unstable_getCurrentPriorityLevel=function(){return Et},a.unstable_getFirstCallbackNode=function(){return Tt(gt)},a.unstable_next=function(Ft){switch(Et){case 1:case 2:case 3:var pt=3;break;default:pt=Et}var _t=Et;Et=pt;try{return Ft()}finally{Et=_t}},a.unstable_pauseExecution=function(){},a.unstable_requestPaint=Qt,a.unstable_runWithPriority=function(Ft,pt){switch(Ft){case 1:case 2:case 3:case 4:case 5:break;default:Ft=3}var _t=Et;Et=Ft;try{return pt()}finally{Et=_t}},a.unstable_scheduleCallback=function(Ft,pt,_t){var Lt=a.unstable_now();switch(typeof _t=="object"&&_t!==null?(_t=_t.delay,_t=typeof _t=="number"&&0<_t?Lt+_t:Lt):_t=Lt,Ft){case 1:var Gt=-1;break;case 2:Gt=250;break;case 5:Gt=1073741823;break;case 4:Gt=1e4;break;default:Gt=5e3}return Gt=_t+Gt,Ft={id:Nt++,callback:pt,priorityLevel:Ft,startTime:_t,expirationTime:Gt,sortIndex:-1},_t>Lt?(Ft.sortIndex=_t,kt(Ct,Ft),Tt(gt)===null&&Ft===Tt(Ct)&&(Dt?c():Dt=!0,d(Jt,_t-Lt))):(Ft.sortIndex=Gt,kt(gt,Ft),xt||It||(xt=!0,s(Yt))),Ft},a.unstable_wrapCallback=function(Ft){var pt=Et;return function(){var _t=Et;Et=pt;try{return Ft.apply(this,arguments)}finally{Et=_t}}}})(scheduler_production_min);scheduler.exports=scheduler_production_min;/** @license React v17.0.2
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aa=react.exports,m=objectAssign,r=scheduler.exports;function y(a){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+a,d=1;d<arguments.length;d++)s+="&args[]="+encodeURIComponent(arguments[d]);return"Minified React error #"+a+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!aa)throw Error(y(227));var ba=new Set,ca={};function da(a,s){ea(a,s),ea(a+"Capture",s)}function ea(a,s){for(ca[a]=s,a=0;a<s.length;a++)ba.add(s[a])}var fa=!(typeof window=="undefined"||typeof window.document=="undefined"||typeof window.document.createElement=="undefined"),ha=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,ia=Object.prototype.hasOwnProperty,ja={},ka={};function la(a){return ia.call(ka,a)?!0:ia.call(ja,a)?!1:ha.test(a)?ka[a]=!0:(ja[a]=!0,!1)}function ma(a,s,d,c){if(d!==null&&d.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return c?!1:d!==null?!d.acceptsBooleans:(a=a.toLowerCase().slice(0,5),a!=="data-"&&a!=="aria-");default:return!1}}function na(a,s,d,c){if(s===null||typeof s=="undefined"||ma(a,s,d,c))return!0;if(c)return!1;if(d!==null)switch(d.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function B(a,s,d,c,h,b,_){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=c,this.attributeNamespace=h,this.mustUseProperty=d,this.propertyName=a,this.type=s,this.sanitizeURL=b,this.removeEmptyString=_}var D={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(a){D[a]=new B(a,0,!1,a,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(a){var s=a[0];D[s]=new B(s,1,!1,a[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(a){D[a]=new B(a,2,!1,a.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(a){D[a]=new B(a,2,!1,a,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(a){D[a]=new B(a,3,!1,a.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(a){D[a]=new B(a,3,!0,a,null,!1,!1)});["capture","download"].forEach(function(a){D[a]=new B(a,4,!1,a,null,!1,!1)});["cols","rows","size","span"].forEach(function(a){D[a]=new B(a,6,!1,a,null,!1,!1)});["rowSpan","start"].forEach(function(a){D[a]=new B(a,5,!1,a.toLowerCase(),null,!1,!1)});var oa=/[\-:]([a-z])/g;function pa(a){return a[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(a){var s=a.replace(oa,pa);D[s]=new B(s,1,!1,a,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(a){var s=a.replace(oa,pa);D[s]=new B(s,1,!1,a,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(a){var s=a.replace(oa,pa);D[s]=new B(s,1,!1,a,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(a){D[a]=new B(a,1,!1,a.toLowerCase(),null,!1,!1)});D.xlinkHref=new B("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(a){D[a]=new B(a,1,!1,a.toLowerCase(),null,!0,!0)});function qa(a,s,d,c){var h=D.hasOwnProperty(s)?D[s]:null,b=h!==null?h.type===0:c?!1:!(!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N");b||(na(s,d,h,c)&&(d=null),c||h===null?la(s)&&(d===null?a.removeAttribute(s):a.setAttribute(s,""+d)):h.mustUseProperty?a[h.propertyName]=d===null?h.type===3?!1:"":d:(s=h.attributeName,c=h.attributeNamespace,d===null?a.removeAttribute(s):(h=h.type,d=h===3||h===4&&d===!0?"":""+d,c?a.setAttributeNS(c,s,d):a.setAttribute(s,d))))}var ra=aa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,sa=60103,ta=60106,ua=60107,wa=60108,xa=60114,ya=60109,za=60110,Aa=60112,Ba=60113,Ca=60120,Da=60115,Ea=60116,Fa=60121,Ga=60128,Ha=60129,Ia=60130,Ja=60131;if(typeof Symbol=="function"&&Symbol.for){var E=Symbol.for;sa=E("react.element"),ta=E("react.portal"),ua=E("react.fragment"),wa=E("react.strict_mode"),xa=E("react.profiler"),ya=E("react.provider"),za=E("react.context"),Aa=E("react.forward_ref"),Ba=E("react.suspense"),Ca=E("react.suspense_list"),Da=E("react.memo"),Ea=E("react.lazy"),Fa=E("react.block"),E("react.scope"),Ga=E("react.opaque.id"),Ha=E("react.debug_trace_mode"),Ia=E("react.offscreen"),Ja=E("react.legacy_hidden")}var Ka=typeof Symbol=="function"&&Symbol.iterator;function La(a){return a===null||typeof a!="object"?null:(a=Ka&&a[Ka]||a["@@iterator"],typeof a=="function"?a:null)}var Ma;function Na(a){if(Ma===void 0)try{throw Error()}catch(d){var s=d.stack.trim().match(/\n( *(at )?)/);Ma=s&&s[1]||""}return`
`+Ma+a}var Oa=!1;function Pa(a,s){if(!a||Oa)return"";Oa=!0;var d=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch(_e){var c=_e}Reflect.construct(a,[],s)}else{try{s.call()}catch(_e){c=_e}a.call(s.prototype)}else{try{throw Error()}catch(_e){c=_e}a()}}catch(_e){if(_e&&c&&typeof _e.stack=="string"){for(var h=_e.stack.split(`
`),b=c.stack.split(`
`),_=h.length-1,$=b.length-1;1<=_&&0<=$&&h[_]!==b[$];)$--;for(;1<=_&&0<=$;_--,$--)if(h[_]!==b[$]){if(_!==1||$!==1)do if(_--,$--,0>$||h[_]!==b[$])return`
`+h[_].replace(" at new "," at ");while(1<=_&&0<=$);break}}}finally{Oa=!1,Error.prepareStackTrace=d}return(a=a?a.displayName||a.name:"")?Na(a):""}function Qa(a){switch(a.tag){case 5:return Na(a.type);case 16:return Na("Lazy");case 13:return Na("Suspense");case 19:return Na("SuspenseList");case 0:case 2:case 15:return a=Pa(a.type,!1),a;case 11:return a=Pa(a.type.render,!1),a;case 22:return a=Pa(a.type._render,!1),a;case 1:return a=Pa(a.type,!0),a;default:return""}}function Ra(a){if(a==null)return null;if(typeof a=="function")return a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case ua:return"Fragment";case ta:return"Portal";case xa:return"Profiler";case wa:return"StrictMode";case Ba:return"Suspense";case Ca:return"SuspenseList"}if(typeof a=="object")switch(a.$$typeof){case za:return(a.displayName||"Context")+".Consumer";case ya:return(a._context.displayName||"Context")+".Provider";case Aa:var s=a.render;return s=s.displayName||s.name||"",a.displayName||(s!==""?"ForwardRef("+s+")":"ForwardRef");case Da:return Ra(a.type);case Fa:return Ra(a._render);case Ea:s=a._payload,a=a._init;try{return Ra(a(s))}catch{}}return null}function Sa(a){switch(typeof a){case"boolean":case"number":case"object":case"string":case"undefined":return a;default:return""}}function Ta(a){var s=a.type;return(a=a.nodeName)&&a.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function Ua(a){var s=Ta(a)?"checked":"value",d=Object.getOwnPropertyDescriptor(a.constructor.prototype,s),c=""+a[s];if(!a.hasOwnProperty(s)&&typeof d!="undefined"&&typeof d.get=="function"&&typeof d.set=="function"){var h=d.get,b=d.set;return Object.defineProperty(a,s,{configurable:!0,get:function(){return h.call(this)},set:function(_){c=""+_,b.call(this,_)}}),Object.defineProperty(a,s,{enumerable:d.enumerable}),{getValue:function(){return c},setValue:function(_){c=""+_},stopTracking:function(){a._valueTracker=null,delete a[s]}}}}function Va(a){a._valueTracker||(a._valueTracker=Ua(a))}function Wa(a){if(!a)return!1;var s=a._valueTracker;if(!s)return!0;var d=s.getValue(),c="";return a&&(c=Ta(a)?a.checked?"true":"false":a.value),a=c,a!==d?(s.setValue(a),!0):!1}function Xa(a){if(a=a||(typeof document!="undefined"?document:void 0),typeof a=="undefined")return null;try{return a.activeElement||a.body}catch{return a.body}}function Ya(a,s){var d=s.checked;return m({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:d!=null?d:a._wrapperState.initialChecked})}function Za(a,s){var d=s.defaultValue==null?"":s.defaultValue,c=s.checked!=null?s.checked:s.defaultChecked;d=Sa(s.value!=null?s.value:d),a._wrapperState={initialChecked:c,initialValue:d,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function $a(a,s){s=s.checked,s!=null&&qa(a,"checked",s,!1)}function ab(a,s){$a(a,s);var d=Sa(s.value),c=s.type;if(d!=null)c==="number"?(d===0&&a.value===""||a.value!=d)&&(a.value=""+d):a.value!==""+d&&(a.value=""+d);else if(c==="submit"||c==="reset"){a.removeAttribute("value");return}s.hasOwnProperty("value")?bb(a,s.type,d):s.hasOwnProperty("defaultValue")&&bb(a,s.type,Sa(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(a.defaultChecked=!!s.defaultChecked)}function cb(a,s,d){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var c=s.type;if(!(c!=="submit"&&c!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+a._wrapperState.initialValue,d||s===a.value||(a.value=s),a.defaultValue=s}d=a.name,d!==""&&(a.name=""),a.defaultChecked=!!a._wrapperState.initialChecked,d!==""&&(a.name=d)}function bb(a,s,d){(s!=="number"||Xa(a.ownerDocument)!==a)&&(d==null?a.defaultValue=""+a._wrapperState.initialValue:a.defaultValue!==""+d&&(a.defaultValue=""+d))}function db(a){var s="";return aa.Children.forEach(a,function(d){d!=null&&(s+=d)}),s}function eb(a,s){return a=m({children:void 0},s),(s=db(s.children))&&(a.children=s),a}function fb(a,s,d,c){if(a=a.options,s){s={};for(var h=0;h<d.length;h++)s["$"+d[h]]=!0;for(d=0;d<a.length;d++)h=s.hasOwnProperty("$"+a[d].value),a[d].selected!==h&&(a[d].selected=h),h&&c&&(a[d].defaultSelected=!0)}else{for(d=""+Sa(d),s=null,h=0;h<a.length;h++){if(a[h].value===d){a[h].selected=!0,c&&(a[h].defaultSelected=!0);return}s!==null||a[h].disabled||(s=a[h])}s!==null&&(s.selected=!0)}}function gb(a,s){if(s.dangerouslySetInnerHTML!=null)throw Error(y(91));return m({},s,{value:void 0,defaultValue:void 0,children:""+a._wrapperState.initialValue})}function hb(a,s){var d=s.value;if(d==null){if(d=s.children,s=s.defaultValue,d!=null){if(s!=null)throw Error(y(92));if(Array.isArray(d)){if(!(1>=d.length))throw Error(y(93));d=d[0]}s=d}s==null&&(s=""),d=s}a._wrapperState={initialValue:Sa(d)}}function ib(a,s){var d=Sa(s.value),c=Sa(s.defaultValue);d!=null&&(d=""+d,d!==a.value&&(a.value=d),s.defaultValue==null&&a.defaultValue!==d&&(a.defaultValue=d)),c!=null&&(a.defaultValue=""+c)}function jb(a){var s=a.textContent;s===a._wrapperState.initialValue&&s!==""&&s!==null&&(a.value=s)}var kb={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};function lb(a){switch(a){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function mb(a,s){return a==null||a==="http://www.w3.org/1999/xhtml"?lb(s):a==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":a}var nb,ob=function(a){return typeof MSApp!="undefined"&&MSApp.execUnsafeLocalFunction?function(s,d,c,h){MSApp.execUnsafeLocalFunction(function(){return a(s,d,c,h)})}:a}(function(a,s){if(a.namespaceURI!==kb.svg||"innerHTML"in a)a.innerHTML=s;else{for(nb=nb||document.createElement("div"),nb.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=nb.firstChild;a.firstChild;)a.removeChild(a.firstChild);for(;s.firstChild;)a.appendChild(s.firstChild)}});function pb(a,s){if(s){var d=a.firstChild;if(d&&d===a.lastChild&&d.nodeType===3){d.nodeValue=s;return}}a.textContent=s}var qb={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},rb=["Webkit","ms","Moz","O"];Object.keys(qb).forEach(function(a){rb.forEach(function(s){s=s+a.charAt(0).toUpperCase()+a.substring(1),qb[s]=qb[a]})});function sb(a,s,d){return s==null||typeof s=="boolean"||s===""?"":d||typeof s!="number"||s===0||qb.hasOwnProperty(a)&&qb[a]?(""+s).trim():s+"px"}function tb(a,s){a=a.style;for(var d in s)if(s.hasOwnProperty(d)){var c=d.indexOf("--")===0,h=sb(d,s[d],c);d==="float"&&(d="cssFloat"),c?a.setProperty(d,h):a[d]=h}}var ub=m({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function vb(a,s){if(s){if(ub[a]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(y(137,a));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(y(60));if(!(typeof s.dangerouslySetInnerHTML=="object"&&"__html"in s.dangerouslySetInnerHTML))throw Error(y(61))}if(s.style!=null&&typeof s.style!="object")throw Error(y(62))}}function wb(a,s){if(a.indexOf("-")===-1)return typeof s.is=="string";switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function xb(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&&(a=a.correspondingUseElement),a.nodeType===3?a.parentNode:a}var yb=null,zb=null,Ab=null;function Bb(a){if(a=Cb(a)){if(typeof yb!="function")throw Error(y(280));var s=a.stateNode;s&&(s=Db(s),yb(a.stateNode,a.type,s))}}function Eb(a){zb?Ab?Ab.push(a):Ab=[a]:zb=a}function Fb(){if(zb){var a=zb,s=Ab;if(Ab=zb=null,Bb(a),s)for(a=0;a<s.length;a++)Bb(s[a])}}function Gb(a,s){return a(s)}function Hb(a,s,d,c,h){return a(s,d,c,h)}function Ib(){}var Jb=Gb,Kb=!1,Lb=!1;function Mb(){(zb!==null||Ab!==null)&&(Ib(),Fb())}function Nb(a,s,d){if(Lb)return a(s,d);Lb=!0;try{return Jb(a,s,d)}finally{Lb=!1,Mb()}}function Ob(a,s){var d=a.stateNode;if(d===null)return null;var c=Db(d);if(c===null)return null;d=c[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(a=a.type,c=!(a==="button"||a==="input"||a==="select"||a==="textarea")),a=!c;break e;default:a=!1}if(a)return null;if(d&&typeof d!="function")throw Error(y(231,s,typeof d));return d}var Pb=!1;if(fa)try{var Qb={};Object.defineProperty(Qb,"passive",{get:function(){Pb=!0}}),window.addEventListener("test",Qb,Qb),window.removeEventListener("test",Qb,Qb)}catch(a){Pb=!1}function Rb(a,s,d,c,h,b,_,$,_e){var tt=Array.prototype.slice.call(arguments,3);try{s.apply(d,tt)}catch(rt){this.onError(rt)}}var Sb=!1,Tb=null,Ub=!1,Vb=null,Wb={onError:function(a){Sb=!0,Tb=a}};function Xb(a,s,d,c,h,b,_,$,_e){Sb=!1,Tb=null,Rb.apply(Wb,arguments)}function Yb(a,s,d,c,h,b,_,$,_e){if(Xb.apply(this,arguments),Sb){if(Sb){var tt=Tb;Sb=!1,Tb=null}else throw Error(y(198));Ub||(Ub=!0,Vb=tt)}}function Zb(a){var s=a,d=a;if(a.alternate)for(;s.return;)s=s.return;else{a=s;do s=a,(s.flags&1026)!==0&&(d=s.return),a=s.return;while(a)}return s.tag===3?d:null}function $b(a){if(a.tag===13){var s=a.memoizedState;if(s===null&&(a=a.alternate,a!==null&&(s=a.memoizedState)),s!==null)return s.dehydrated}return null}function ac(a){if(Zb(a)!==a)throw Error(y(188))}function bc(a){var s=a.alternate;if(!s){if(s=Zb(a),s===null)throw Error(y(188));return s!==a?null:a}for(var d=a,c=s;;){var h=d.return;if(h===null)break;var b=h.alternate;if(b===null){if(c=h.return,c!==null){d=c;continue}break}if(h.child===b.child){for(b=h.child;b;){if(b===d)return ac(h),a;if(b===c)return ac(h),s;b=b.sibling}throw Error(y(188))}if(d.return!==c.return)d=h,c=b;else{for(var _=!1,$=h.child;$;){if($===d){_=!0,d=h,c=b;break}if($===c){_=!0,c=h,d=b;break}$=$.sibling}if(!_){for($=b.child;$;){if($===d){_=!0,d=b,c=h;break}if($===c){_=!0,c=b,d=h;break}$=$.sibling}if(!_)throw Error(y(189))}}if(d.alternate!==c)throw Error(y(190))}if(d.tag!==3)throw Error(y(188));return d.stateNode.current===d?a:s}function cc(a){if(a=bc(a),!a)return null;for(var s=a;;){if(s.tag===5||s.tag===6)return s;if(s.child)s.child.return=s,s=s.child;else{if(s===a)break;for(;!s.sibling;){if(!s.return||s.return===a)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}}return null}function dc(a,s){for(var d=a.alternate;s!==null;){if(s===a||s===d)return!0;s=s.return}return!1}var ec,fc,gc,hc,ic=!1,jc=[],kc=null,lc=null,mc=null,nc=new Map,oc=new Map,pc=[],qc="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function rc(a,s,d,c,h){return{blockedOn:a,domEventName:s,eventSystemFlags:d|16,nativeEvent:h,targetContainers:[c]}}function sc(a,s){switch(a){case"focusin":case"focusout":kc=null;break;case"dragenter":case"dragleave":lc=null;break;case"mouseover":case"mouseout":mc=null;break;case"pointerover":case"pointerout":nc.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":oc.delete(s.pointerId)}}function tc(a,s,d,c,h,b){return a===null||a.nativeEvent!==b?(a=rc(s,d,c,h,b),s!==null&&(s=Cb(s),s!==null&&fc(s)),a):(a.eventSystemFlags|=c,s=a.targetContainers,h!==null&&s.indexOf(h)===-1&&s.push(h),a)}function uc(a,s,d,c,h){switch(s){case"focusin":return kc=tc(kc,a,s,d,c,h),!0;case"dragenter":return lc=tc(lc,a,s,d,c,h),!0;case"mouseover":return mc=tc(mc,a,s,d,c,h),!0;case"pointerover":var b=h.pointerId;return nc.set(b,tc(nc.get(b)||null,a,s,d,c,h)),!0;case"gotpointercapture":return b=h.pointerId,oc.set(b,tc(oc.get(b)||null,a,s,d,c,h)),!0}return!1}function vc(a){var s=wc(a.target);if(s!==null){var d=Zb(s);if(d!==null){if(s=d.tag,s===13){if(s=$b(d),s!==null){a.blockedOn=s,hc(a.lanePriority,function(){r.unstable_runWithPriority(a.priority,function(){gc(d)})});return}}else if(s===3&&d.stateNode.hydrate){a.blockedOn=d.tag===3?d.stateNode.containerInfo:null;return}}}a.blockedOn=null}function xc(a){if(a.blockedOn!==null)return!1;for(var s=a.targetContainers;0<s.length;){var d=yc(a.domEventName,a.eventSystemFlags,s[0],a.nativeEvent);if(d!==null)return s=Cb(d),s!==null&&fc(s),a.blockedOn=d,!1;s.shift()}return!0}function zc(a,s,d){xc(a)&&d.delete(s)}function Ac(){for(ic=!1;0<jc.length;){var a=jc[0];if(a.blockedOn!==null){a=Cb(a.blockedOn),a!==null&&ec(a);break}for(var s=a.targetContainers;0<s.length;){var d=yc(a.domEventName,a.eventSystemFlags,s[0],a.nativeEvent);if(d!==null){a.blockedOn=d;break}s.shift()}a.blockedOn===null&&jc.shift()}kc!==null&&xc(kc)&&(kc=null),lc!==null&&xc(lc)&&(lc=null),mc!==null&&xc(mc)&&(mc=null),nc.forEach(zc),oc.forEach(zc)}function Bc(a,s){a.blockedOn===s&&(a.blockedOn=null,ic||(ic=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,Ac)))}function Cc(a){function s(h){return Bc(h,a)}if(0<jc.length){Bc(jc[0],a);for(var d=1;d<jc.length;d++){var c=jc[d];c.blockedOn===a&&(c.blockedOn=null)}}for(kc!==null&&Bc(kc,a),lc!==null&&Bc(lc,a),mc!==null&&Bc(mc,a),nc.forEach(s),oc.forEach(s),d=0;d<pc.length;d++)c=pc[d],c.blockedOn===a&&(c.blockedOn=null);for(;0<pc.length&&(d=pc[0],d.blockedOn===null);)vc(d),d.blockedOn===null&&pc.shift()}function Dc(a,s){var d={};return d[a.toLowerCase()]=s.toLowerCase(),d["Webkit"+a]="webkit"+s,d["Moz"+a]="moz"+s,d}var Ec={animationend:Dc("Animation","AnimationEnd"),animationiteration:Dc("Animation","AnimationIteration"),animationstart:Dc("Animation","AnimationStart"),transitionend:Dc("Transition","TransitionEnd")},Fc={},Gc={};fa&&(Gc=document.createElement("div").style,"AnimationEvent"in window||(delete Ec.animationend.animation,delete Ec.animationiteration.animation,delete Ec.animationstart.animation),"TransitionEvent"in window||delete Ec.transitionend.transition);function Hc(a){if(Fc[a])return Fc[a];if(!Ec[a])return a;var s=Ec[a],d;for(d in s)if(s.hasOwnProperty(d)&&d in Gc)return Fc[a]=s[d];return a}var Ic=Hc("animationend"),Jc=Hc("animationiteration"),Kc=Hc("animationstart"),Lc=Hc("transitionend"),Mc=new Map,Nc=new Map,Oc=["abort","abort",Ic,"animationEnd",Jc,"animationIteration",Kc,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",Lc,"transitionEnd","waiting","waiting"];function Pc(a,s){for(var d=0;d<a.length;d+=2){var c=a[d],h=a[d+1];h="on"+(h[0].toUpperCase()+h.slice(1)),Nc.set(c,s),Mc.set(c,h),da(h,[c])}}var Qc=r.unstable_now;Qc();var F=8;function Rc(a){if((1&a)!==0)return F=15,1;if((2&a)!==0)return F=14,2;if((4&a)!==0)return F=13,4;var s=24&a;return s!==0?(F=12,s):(a&32)!==0?(F=11,32):(s=192&a,s!==0?(F=10,s):(a&256)!==0?(F=9,256):(s=3584&a,s!==0?(F=8,s):(a&4096)!==0?(F=7,4096):(s=4186112&a,s!==0?(F=6,s):(s=62914560&a,s!==0?(F=5,s):a&67108864?(F=4,67108864):(a&134217728)!==0?(F=3,134217728):(s=805306368&a,s!==0?(F=2,s):(1073741824&a)!==0?(F=1,1073741824):(F=8,a))))))}function Sc(a){switch(a){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}function Tc(a){switch(a){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(y(358,a))}}function Uc(a,s){var d=a.pendingLanes;if(d===0)return F=0;var c=0,h=0,b=a.expiredLanes,_=a.suspendedLanes,$=a.pingedLanes;if(b!==0)c=b,h=F=15;else if(b=d&134217727,b!==0){var _e=b&~_;_e!==0?(c=Rc(_e),h=F):($&=b,$!==0&&(c=Rc($),h=F))}else b=d&~_,b!==0?(c=Rc(b),h=F):$!==0&&(c=Rc($),h=F);if(c===0)return 0;if(c=31-Vc(c),c=d&((0>c?0:1<<c)<<1)-1,s!==0&&s!==c&&(s&_)===0){if(Rc(s),h<=F)return s;F=h}if(s=a.entangledLanes,s!==0)for(a=a.entanglements,s&=c;0<s;)d=31-Vc(s),h=1<<d,c|=a[d],s&=~h;return c}function Wc(a){return a=a.pendingLanes&-1073741825,a!==0?a:a&1073741824?1073741824:0}function Xc(a,s){switch(a){case 15:return 1;case 14:return 2;case 12:return a=Yc(24&~s),a===0?Xc(10,s):a;case 10:return a=Yc(192&~s),a===0?Xc(8,s):a;case 8:return a=Yc(3584&~s),a===0&&(a=Yc(4186112&~s),a===0&&(a=512)),a;case 2:return s=Yc(805306368&~s),s===0&&(s=268435456),s}throw Error(y(358,a))}function Yc(a){return a&-a}function Zc(a){for(var s=[],d=0;31>d;d++)s.push(a);return s}function $c(a,s,d){a.pendingLanes|=s;var c=s-1;a.suspendedLanes&=c,a.pingedLanes&=c,a=a.eventTimes,s=31-Vc(s),a[s]=d}var Vc=Math.clz32?Math.clz32:ad,bd=Math.log,cd=Math.LN2;function ad(a){return a===0?32:31-(bd(a)/cd|0)|0}var dd=r.unstable_UserBlockingPriority,ed=r.unstable_runWithPriority,fd=!0;function gd(a,s,d,c){Kb||Ib();var h=hd,b=Kb;Kb=!0;try{Hb(h,a,s,d,c)}finally{(Kb=b)||Mb()}}function id(a,s,d,c){ed(dd,hd.bind(null,a,s,d,c))}function hd(a,s,d,c){if(fd){var h;if((h=(s&4)===0)&&0<jc.length&&-1<qc.indexOf(a))a=rc(null,a,s,d,c),jc.push(a);else{var b=yc(a,s,d,c);if(b===null)h&&sc(a,c);else{if(h){if(-1<qc.indexOf(a)){a=rc(b,a,s,d,c),jc.push(a);return}if(uc(b,a,s,d,c))return;sc(a,c)}jd(a,s,c,null,d)}}}}function yc(a,s,d,c){var h=xb(c);if(h=wc(h),h!==null){var b=Zb(h);if(b===null)h=null;else{var _=b.tag;if(_===13){if(h=$b(b),h!==null)return h;h=null}else if(_===3){if(b.stateNode.hydrate)return b.tag===3?b.stateNode.containerInfo:null;h=null}else b!==h&&(h=null)}}return jd(a,s,c,h,d),null}var kd=null,ld=null,md=null;function nd(){if(md)return md;var a,s=ld,d=s.length,c,h="value"in kd?kd.value:kd.textContent,b=h.length;for(a=0;a<d&&s[a]===h[a];a++);var _=d-a;for(c=1;c<=_&&s[d-c]===h[b-c];c++);return md=h.slice(a,1<c?1-c:void 0)}function od(a){var s=a.keyCode;return"charCode"in a?(a=a.charCode,a===0&&s===13&&(a=13)):a=s,a===10&&(a=13),32<=a||a===13?a:0}function pd(){return!0}function qd(){return!1}function rd(a){function s(d,c,h,b,_){this._reactName=d,this._targetInst=h,this.type=c,this.nativeEvent=b,this.target=_,this.currentTarget=null;for(var $ in a)a.hasOwnProperty($)&&(d=a[$],this[$]=d?d(b):b[$]);return this.isDefaultPrevented=(b.defaultPrevented!=null?b.defaultPrevented:b.returnValue===!1)?pd:qd,this.isPropagationStopped=qd,this}return m(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var d=this.nativeEvent;d&&(d.preventDefault?d.preventDefault():typeof d.returnValue!="unknown"&&(d.returnValue=!1),this.isDefaultPrevented=pd)},stopPropagation:function(){var d=this.nativeEvent;d&&(d.stopPropagation?d.stopPropagation():typeof d.cancelBubble!="unknown"&&(d.cancelBubble=!0),this.isPropagationStopped=pd)},persist:function(){},isPersistent:pd}),s}var sd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},td=rd(sd),ud=m({},sd,{view:0,detail:0}),vd=rd(ud),wd,xd,yd,Ad=m({},ud,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zd,button:0,buttons:0,relatedTarget:function(a){return a.relatedTarget===void 0?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){return"movementX"in a?a.movementX:(a!==yd&&(yd&&a.type==="mousemove"?(wd=a.screenX-yd.screenX,xd=a.screenY-yd.screenY):xd=wd=0,yd=a),wd)},movementY:function(a){return"movementY"in a?a.movementY:xd}}),Bd=rd(Ad),Cd=m({},Ad,{dataTransfer:0}),Dd=rd(Cd),Ed=m({},ud,{relatedTarget:0}),Fd=rd(Ed),Gd=m({},sd,{animationName:0,elapsedTime:0,pseudoElement:0}),Hd=rd(Gd),Id=m({},sd,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),Jd=rd(Id),Kd=m({},sd,{data:0}),Ld=rd(Kd),Md={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Nd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Od={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pd(a){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(a):(a=Od[a])?!!s[a]:!1}function zd(){return Pd}var Qd=m({},ud,{key:function(a){if(a.key){var s=Md[a.key]||a.key;if(s!=="Unidentified")return s}return a.type==="keypress"?(a=od(a),a===13?"Enter":String.fromCharCode(a)):a.type==="keydown"||a.type==="keyup"?Nd[a.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zd,charCode:function(a){return a.type==="keypress"?od(a):0},keyCode:function(a){return a.type==="keydown"||a.type==="keyup"?a.keyCode:0},which:function(a){return a.type==="keypress"?od(a):a.type==="keydown"||a.type==="keyup"?a.keyCode:0}}),Rd=rd(Qd),Sd=m({},Ad,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Td=rd(Sd),Ud=m({},ud,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zd}),Vd=rd(Ud),Wd=m({},sd,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xd=rd(Wd),Yd=m({},Ad,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),Zd=rd(Yd),$d=[9,13,27,32],ae=fa&&"CompositionEvent"in window,be=null;fa&&"documentMode"in document&&(be=document.documentMode);var ce=fa&&"TextEvent"in window&&!be,de=fa&&(!ae||be&&8<be&&11>=be),ee=String.fromCharCode(32),fe=!1;function ge(a,s){switch(a){case"keyup":return $d.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function he(a){return a=a.detail,typeof a=="object"&&"data"in a?a.data:null}var ie=!1;function je(a,s){switch(a){case"compositionend":return he(s);case"keypress":return s.which!==32?null:(fe=!0,ee);case"textInput":return a=s.data,a===ee&&fe?null:a;default:return null}}function ke(a,s){if(ie)return a==="compositionend"||!ae&&ge(a,s)?(a=nd(),md=ld=kd=null,ie=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return de&&s.locale!=="ko"?null:s.data;default:return null}}var le={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function me(a){var s=a&&a.nodeName&&a.nodeName.toLowerCase();return s==="input"?!!le[a.type]:s==="textarea"}function ne(a,s,d,c){Eb(c),s=oe(s,"onChange"),0<s.length&&(d=new td("onChange","change",null,d,c),a.push({event:d,listeners:s}))}var pe=null,qe=null;function re(a){se(a,0)}function te(a){var s=ue(a);if(Wa(s))return a}function ve(a,s){if(a==="change")return s}var we=!1;if(fa){var xe;if(fa){var ye="oninput"in document;if(!ye){var ze=document.createElement("div");ze.setAttribute("oninput","return;"),ye=typeof ze.oninput=="function"}xe=ye}else xe=!1;we=xe&&(!document.documentMode||9<document.documentMode)}function Ae(){pe&&(pe.detachEvent("onpropertychange",Be),qe=pe=null)}function Be(a){if(a.propertyName==="value"&&te(qe)){var s=[];if(ne(s,qe,a,xb(a)),a=re,Kb)a(s);else{Kb=!0;try{Gb(a,s)}finally{Kb=!1,Mb()}}}}function Ce(a,s,d){a==="focusin"?(Ae(),pe=s,qe=d,pe.attachEvent("onpropertychange",Be)):a==="focusout"&&Ae()}function De(a){if(a==="selectionchange"||a==="keyup"||a==="keydown")return te(qe)}function Ee(a,s){if(a==="click")return te(s)}function Fe(a,s){if(a==="input"||a==="change")return te(s)}function Ge(a,s){return a===s&&(a!==0||1/a===1/s)||a!==a&&s!==s}var He=typeof Object.is=="function"?Object.is:Ge,Ie=Object.prototype.hasOwnProperty;function Je(a,s){if(He(a,s))return!0;if(typeof a!="object"||a===null||typeof s!="object"||s===null)return!1;var d=Object.keys(a),c=Object.keys(s);if(d.length!==c.length)return!1;for(c=0;c<d.length;c++)if(!Ie.call(s,d[c])||!He(a[d[c]],s[d[c]]))return!1;return!0}function Ke(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function Le(a,s){var d=Ke(a);a=0;for(var c;d;){if(d.nodeType===3){if(c=a+d.textContent.length,a<=s&&c>=s)return{node:d,offset:s-a};a=c}e:{for(;d;){if(d.nextSibling){d=d.nextSibling;break e}d=d.parentNode}d=void 0}d=Ke(d)}}function Me(a,s){return a&&s?a===s?!0:a&&a.nodeType===3?!1:s&&s.nodeType===3?Me(a,s.parentNode):"contains"in a?a.contains(s):a.compareDocumentPosition?!!(a.compareDocumentPosition(s)&16):!1:!1}function Ne(){for(var a=window,s=Xa();s instanceof a.HTMLIFrameElement;){try{var d=typeof s.contentWindow.location.href=="string"}catch{d=!1}if(d)a=s.contentWindow;else break;s=Xa(a.document)}return s}function Oe(a){var s=a&&a.nodeName&&a.nodeName.toLowerCase();return s&&(s==="input"&&(a.type==="text"||a.type==="search"||a.type==="tel"||a.type==="url"||a.type==="password")||s==="textarea"||a.contentEditable==="true")}var Pe=fa&&"documentMode"in document&&11>=document.documentMode,Qe=null,Re=null,Se=null,Te=!1;function Ue(a,s,d){var c=d.window===d?d.document:d.nodeType===9?d:d.ownerDocument;Te||Qe==null||Qe!==Xa(c)||(c=Qe,"selectionStart"in c&&Oe(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),Se&&Je(Se,c)||(Se=c,c=oe(Re,"onSelect"),0<c.length&&(s=new td("onSelect","select",null,s,d),a.push({event:s,listeners:c}),s.target=Qe)))}Pc("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0);Pc("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1);Pc(Oc,2);for(var Ve="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),We=0;We<Ve.length;We++)Nc.set(Ve[We],0);ea("onMouseEnter",["mouseout","mouseover"]);ea("onMouseLeave",["mouseout","mouseover"]);ea("onPointerEnter",["pointerout","pointerover"]);ea("onPointerLeave",["pointerout","pointerover"]);da("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));da("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));da("onBeforeInput",["compositionend","keypress","textInput","paste"]);da("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));da("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));da("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Xe="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ye=new Set("cancel close invalid load scroll toggle".split(" ").concat(Xe));function Ze(a,s,d){var c=a.type||"unknown-event";a.currentTarget=d,Yb(c,s,void 0,a),a.currentTarget=null}function se(a,s){s=(s&4)!==0;for(var d=0;d<a.length;d++){var c=a[d],h=c.event;c=c.listeners;e:{var b=void 0;if(s)for(var _=c.length-1;0<=_;_--){var $=c[_],_e=$.instance,tt=$.currentTarget;if($=$.listener,_e!==b&&h.isPropagationStopped())break e;Ze(h,$,tt),b=_e}else for(_=0;_<c.length;_++){if($=c[_],_e=$.instance,tt=$.currentTarget,$=$.listener,_e!==b&&h.isPropagationStopped())break e;Ze(h,$,tt),b=_e}}}if(Ub)throw a=Vb,Ub=!1,Vb=null,a}function G(a,s){var d=$e(s),c=a+"__bubble";d.has(c)||(af(s,a,2,!1),d.add(c))}var bf="_reactListening"+Math.random().toString(36).slice(2);function cf(a){a[bf]||(a[bf]=!0,ba.forEach(function(s){Ye.has(s)||df(s,!1,a,null),df(s,!0,a,null)}))}function df(a,s,d,c){var h=4<arguments.length&&arguments[4]!==void 0?arguments[4]:0,b=d;if(a==="selectionchange"&&d.nodeType!==9&&(b=d.ownerDocument),c!==null&&!s&&Ye.has(a)){if(a!=="scroll")return;h|=2,b=c}var _=$e(b),$=a+"__"+(s?"capture":"bubble");_.has($)||(s&&(h|=4),af(b,a,h,s),_.add($))}function af(a,s,d,c){var h=Nc.get(s);switch(h===void 0?2:h){case 0:h=gd;break;case 1:h=id;break;default:h=hd}d=h.bind(null,s,d,a),h=void 0,!Pb||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(h=!0),c?h!==void 0?a.addEventListener(s,d,{capture:!0,passive:h}):a.addEventListener(s,d,!0):h!==void 0?a.addEventListener(s,d,{passive:h}):a.addEventListener(s,d,!1)}function jd(a,s,d,c,h){var b=c;if((s&1)===0&&(s&2)===0&&c!==null)e:for(;;){if(c===null)return;var _=c.tag;if(_===3||_===4){var $=c.stateNode.containerInfo;if($===h||$.nodeType===8&&$.parentNode===h)break;if(_===4)for(_=c.return;_!==null;){var _e=_.tag;if((_e===3||_e===4)&&(_e=_.stateNode.containerInfo,_e===h||_e.nodeType===8&&_e.parentNode===h))return;_=_.return}for(;$!==null;){if(_=wc($),_===null)return;if(_e=_.tag,_e===5||_e===6){c=b=_;continue e}$=$.parentNode}}c=c.return}Nb(function(){var tt=b,rt=xb(d),ot=[];e:{var it=Mc.get(a);if(it!==void 0){var st=td,lt=a;switch(a){case"keypress":if(od(d)===0)break e;case"keydown":case"keyup":st=Rd;break;case"focusin":lt="focus",st=Fd;break;case"focusout":lt="blur",st=Fd;break;case"beforeblur":case"afterblur":st=Fd;break;case"click":if(d.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":st=Bd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":st=Dd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":st=Vd;break;case Ic:case Jc:case Kc:st=Hd;break;case Lc:st=Xd;break;case"scroll":st=vd;break;case"wheel":st=Zd;break;case"copy":case"cut":case"paste":st=Jd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":st=Td}var dt=(s&4)!==0,ut=!dt&&a==="scroll",ht=dt?it!==null?it+"Capture":null:it;dt=[];for(var nt=tt,ct;nt!==null;){ct=nt;var mt=ct.stateNode;if(ct.tag===5&&mt!==null&&(ct=mt,ht!==null&&(mt=Ob(nt,ht),mt!=null&&dt.push(ef(nt,mt,ct)))),ut)break;nt=nt.return}0<dt.length&&(it=new st(it,lt,null,d,rt),ot.push({event:it,listeners:dt}))}}if((s&7)===0){e:{if(it=a==="mouseover"||a==="pointerover",st=a==="mouseout"||a==="pointerout",it&&(s&16)===0&&(lt=d.relatedTarget||d.fromElement)&&(wc(lt)||lt[ff]))break e;if((st||it)&&(it=rt.window===rt?rt:(it=rt.ownerDocument)?it.defaultView||it.parentWindow:window,st?(lt=d.relatedTarget||d.toElement,st=tt,lt=lt?wc(lt):null,lt!==null&&(ut=Zb(lt),lt!==ut||lt.tag!==5&&lt.tag!==6)&&(lt=null)):(st=null,lt=tt),st!==lt)){if(dt=Bd,mt="onMouseLeave",ht="onMouseEnter",nt="mouse",(a==="pointerout"||a==="pointerover")&&(dt=Td,mt="onPointerLeave",ht="onPointerEnter",nt="pointer"),ut=st==null?it:ue(st),ct=lt==null?it:ue(lt),it=new dt(mt,nt+"leave",st,d,rt),it.target=ut,it.relatedTarget=ct,mt=null,wc(rt)===tt&&(dt=new dt(ht,nt+"enter",lt,d,rt),dt.target=ct,dt.relatedTarget=ut,mt=dt),ut=mt,st&&lt)t:{for(dt=st,ht=lt,nt=0,ct=dt;ct;ct=gf(ct))nt++;for(ct=0,mt=ht;mt;mt=gf(mt))ct++;for(;0<nt-ct;)dt=gf(dt),nt--;for(;0<ct-nt;)ht=gf(ht),ct--;for(;nt--;){if(dt===ht||ht!==null&&dt===ht.alternate)break t;dt=gf(dt),ht=gf(ht)}dt=null}else dt=null;st!==null&&hf(ot,it,st,dt,!1),lt!==null&&ut!==null&&hf(ot,ut,lt,dt,!0)}}e:{if(it=tt?ue(tt):window,st=it.nodeName&&it.nodeName.toLowerCase(),st==="select"||st==="input"&&it.type==="file")var kt=ve;else if(me(it))if(we)kt=Fe;else{kt=De;var Tt=Ce}else(st=it.nodeName)&&st.toLowerCase()==="input"&&(it.type==="checkbox"||it.type==="radio")&&(kt=Ee);if(kt&&(kt=kt(a,tt))){ne(ot,kt,d,rt);break e}Tt&&Tt(a,it,tt),a==="focusout"&&(Tt=it._wrapperState)&&Tt.controlled&&it.type==="number"&&bb(it,"number",it.value)}switch(Tt=tt?ue(tt):window,a){case"focusin":(me(Tt)||Tt.contentEditable==="true")&&(Qe=Tt,Re=tt,Se=null);break;case"focusout":Se=Re=Qe=null;break;case"mousedown":Te=!0;break;case"contextmenu":case"mouseup":case"dragend":Te=!1,Ue(ot,d,rt);break;case"selectionchange":if(Pe)break;case"keydown":case"keyup":Ue(ot,d,rt)}var Pt;if(ae)e:{switch(a){case"compositionstart":var At="onCompositionStart";break e;case"compositionend":At="onCompositionEnd";break e;case"compositionupdate":At="onCompositionUpdate";break e}At=void 0}else ie?ge(a,d)&&(At="onCompositionEnd"):a==="keydown"&&d.keyCode===229&&(At="onCompositionStart");At&&(de&&d.locale!=="ko"&&(ie||At!=="onCompositionStart"?At==="onCompositionEnd"&&ie&&(Pt=nd()):(kd=rt,ld="value"in kd?kd.value:kd.textContent,ie=!0)),Tt=oe(tt,At),0<Tt.length&&(At=new Ld(At,a,null,d,rt),ot.push({event:At,listeners:Tt}),Pt?At.data=Pt:(Pt=he(d),Pt!==null&&(At.data=Pt)))),(Pt=ce?je(a,d):ke(a,d))&&(tt=oe(tt,"onBeforeInput"),0<tt.length&&(rt=new Ld("onBeforeInput","beforeinput",null,d,rt),ot.push({event:rt,listeners:tt}),rt.data=Pt))}se(ot,s)})}function ef(a,s,d){return{instance:a,listener:s,currentTarget:d}}function oe(a,s){for(var d=s+"Capture",c=[];a!==null;){var h=a,b=h.stateNode;h.tag===5&&b!==null&&(h=b,b=Ob(a,d),b!=null&&c.unshift(ef(a,b,h)),b=Ob(a,s),b!=null&&c.push(ef(a,b,h))),a=a.return}return c}function gf(a){if(a===null)return null;do a=a.return;while(a&&a.tag!==5);return a||null}function hf(a,s,d,c,h){for(var b=s._reactName,_=[];d!==null&&d!==c;){var $=d,_e=$.alternate,tt=$.stateNode;if(_e!==null&&_e===c)break;$.tag===5&&tt!==null&&($=tt,h?(_e=Ob(d,b),_e!=null&&_.unshift(ef(d,_e,$))):h||(_e=Ob(d,b),_e!=null&&_.push(ef(d,_e,$)))),d=d.return}_.length!==0&&a.push({event:s,listeners:_})}function jf(){}var kf=null,lf=null;function mf(a,s){switch(a){case"button":case"input":case"select":case"textarea":return!!s.autoFocus}return!1}function nf(a,s){return a==="textarea"||a==="option"||a==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var of$1=typeof setTimeout=="function"?setTimeout:void 0,pf=typeof clearTimeout=="function"?clearTimeout:void 0;function qf(a){a.nodeType===1?a.textContent="":a.nodeType===9&&(a=a.body,a!=null&&(a.textContent=""))}function rf(a){for(;a!=null;a=a.nextSibling){var s=a.nodeType;if(s===1||s===3)break}return a}function sf(a){a=a.previousSibling;for(var s=0;a;){if(a.nodeType===8){var d=a.data;if(d==="$"||d==="$!"||d==="$?"){if(s===0)return a;s--}else d==="/$"&&s++}a=a.previousSibling}return null}var tf=0;function uf(a){return{$$typeof:Ga,toString:a,valueOf:a}}var vf=Math.random().toString(36).slice(2),wf="__reactFiber$"+vf,xf="__reactProps$"+vf,ff="__reactContainer$"+vf,yf="__reactEvents$"+vf;function wc(a){var s=a[wf];if(s)return s;for(var d=a.parentNode;d;){if(s=d[ff]||d[wf]){if(d=s.alternate,s.child!==null||d!==null&&d.child!==null)for(a=sf(a);a!==null;){if(d=a[wf])return d;a=sf(a)}return s}a=d,d=a.parentNode}return null}function Cb(a){return a=a[wf]||a[ff],!a||a.tag!==5&&a.tag!==6&&a.tag!==13&&a.tag!==3?null:a}function ue(a){if(a.tag===5||a.tag===6)return a.stateNode;throw Error(y(33))}function Db(a){return a[xf]||null}function $e(a){var s=a[yf];return s===void 0&&(s=a[yf]=new Set),s}var zf=[],Af=-1;function Bf(a){return{current:a}}function H(a){0>Af||(a.current=zf[Af],zf[Af]=null,Af--)}function I(a,s){Af++,zf[Af]=a.current,a.current=s}var Cf={},M=Bf(Cf),N=Bf(!1),Df=Cf;function Ef(a,s){var d=a.type.contextTypes;if(!d)return Cf;var c=a.stateNode;if(c&&c.__reactInternalMemoizedUnmaskedChildContext===s)return c.__reactInternalMemoizedMaskedChildContext;var h={},b;for(b in d)h[b]=s[b];return c&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=s,a.__reactInternalMemoizedMaskedChildContext=h),h}function Ff(a){return a=a.childContextTypes,a!=null}function Gf(){H(N),H(M)}function Hf(a,s,d){if(M.current!==Cf)throw Error(y(168));I(M,s),I(N,d)}function If(a,s,d){var c=a.stateNode;if(a=s.childContextTypes,typeof c.getChildContext!="function")return d;c=c.getChildContext();for(var h in c)if(!(h in a))throw Error(y(108,Ra(s)||"Unknown",h));return m({},d,c)}function Jf(a){return a=(a=a.stateNode)&&a.__reactInternalMemoizedMergedChildContext||Cf,Df=M.current,I(M,a),I(N,N.current),!0}function Kf(a,s,d){var c=a.stateNode;if(!c)throw Error(y(169));d?(a=If(a,s,Df),c.__reactInternalMemoizedMergedChildContext=a,H(N),H(M),I(M,a)):H(N),I(N,d)}var Lf=null,Mf=null,Nf=r.unstable_runWithPriority,Of=r.unstable_scheduleCallback,Pf=r.unstable_cancelCallback,Qf=r.unstable_shouldYield,Rf=r.unstable_requestPaint,Sf=r.unstable_now,Tf=r.unstable_getCurrentPriorityLevel,Uf=r.unstable_ImmediatePriority,Vf=r.unstable_UserBlockingPriority,Wf=r.unstable_NormalPriority,Xf=r.unstable_LowPriority,Yf=r.unstable_IdlePriority,Zf={},$f=Rf!==void 0?Rf:function(){},ag=null,bg=null,cg=!1,dg=Sf(),O=1e4>dg?Sf:function(){return Sf()-dg};function eg(){switch(Tf()){case Uf:return 99;case Vf:return 98;case Wf:return 97;case Xf:return 96;case Yf:return 95;default:throw Error(y(332))}}function fg(a){switch(a){case 99:return Uf;case 98:return Vf;case 97:return Wf;case 96:return Xf;case 95:return Yf;default:throw Error(y(332))}}function gg(a,s){return a=fg(a),Nf(a,s)}function hg(a,s,d){return a=fg(a),Of(a,s,d)}function ig(){if(bg!==null){var a=bg;bg=null,Pf(a)}jg()}function jg(){if(!cg&&ag!==null){cg=!0;var a=0;try{var s=ag;gg(99,function(){for(;a<s.length;a++){var d=s[a];do d=d(!0);while(d!==null)}}),ag=null}catch(d){throw ag!==null&&(ag=ag.slice(a+1)),Of(Uf,ig),d}finally{cg=!1}}}var kg=ra.ReactCurrentBatchConfig;function lg(a,s){if(a&&a.defaultProps){s=m({},s),a=a.defaultProps;for(var d in a)s[d]===void 0&&(s[d]=a[d]);return s}return s}var mg=Bf(null),ng=null,og=null,pg=null;function qg(){pg=og=ng=null}function rg(a){var s=mg.current;H(mg),a.type._context._currentValue=s}function sg(a,s){for(;a!==null;){var d=a.alternate;if((a.childLanes&s)===s){if(d===null||(d.childLanes&s)===s)break;d.childLanes|=s}else a.childLanes|=s,d!==null&&(d.childLanes|=s);a=a.return}}function tg(a,s){ng=a,pg=og=null,a=a.dependencies,a!==null&&a.firstContext!==null&&((a.lanes&s)!==0&&(ug=!0),a.firstContext=null)}function vg(a,s){if(pg!==a&&s!==!1&&s!==0)if((typeof s!="number"||s===1073741823)&&(pg=a,s=1073741823),s={context:a,observedBits:s,next:null},og===null){if(ng===null)throw Error(y(308));og=s,ng.dependencies={lanes:0,firstContext:s,responders:null}}else og=og.next=s;return a._currentValue}var wg=!1;function xg(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function yg(a,s){a=a.updateQueue,s.updateQueue===a&&(s.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,effects:a.effects})}function zg(a,s){return{eventTime:a,lane:s,tag:0,payload:null,callback:null,next:null}}function Ag(a,s){if(a=a.updateQueue,a!==null){a=a.shared;var d=a.pending;d===null?s.next=s:(s.next=d.next,d.next=s),a.pending=s}}function Bg(a,s){var d=a.updateQueue,c=a.alternate;if(c!==null&&(c=c.updateQueue,d===c)){var h=null,b=null;if(d=d.firstBaseUpdate,d!==null){do{var _={eventTime:d.eventTime,lane:d.lane,tag:d.tag,payload:d.payload,callback:d.callback,next:null};b===null?h=b=_:b=b.next=_,d=d.next}while(d!==null);b===null?h=b=s:b=b.next=s}else h=b=s;d={baseState:c.baseState,firstBaseUpdate:h,lastBaseUpdate:b,shared:c.shared,effects:c.effects},a.updateQueue=d;return}a=d.lastBaseUpdate,a===null?d.firstBaseUpdate=s:a.next=s,d.lastBaseUpdate=s}function Cg(a,s,d,c){var h=a.updateQueue;wg=!1;var b=h.firstBaseUpdate,_=h.lastBaseUpdate,$=h.shared.pending;if($!==null){h.shared.pending=null;var _e=$,tt=_e.next;_e.next=null,_===null?b=tt:_.next=tt,_=_e;var rt=a.alternate;if(rt!==null){rt=rt.updateQueue;var ot=rt.lastBaseUpdate;ot!==_&&(ot===null?rt.firstBaseUpdate=tt:ot.next=tt,rt.lastBaseUpdate=_e)}}if(b!==null){ot=h.baseState,_=0,rt=tt=_e=null;do{$=b.lane;var it=b.eventTime;if((c&$)===$){rt!==null&&(rt=rt.next={eventTime:it,lane:0,tag:b.tag,payload:b.payload,callback:b.callback,next:null});e:{var st=a,lt=b;switch($=s,it=d,lt.tag){case 1:if(st=lt.payload,typeof st=="function"){ot=st.call(it,ot,$);break e}ot=st;break e;case 3:st.flags=st.flags&-4097|64;case 0:if(st=lt.payload,$=typeof st=="function"?st.call(it,ot,$):st,$==null)break e;ot=m({},ot,$);break e;case 2:wg=!0}}b.callback!==null&&(a.flags|=32,$=h.effects,$===null?h.effects=[b]:$.push(b))}else it={eventTime:it,lane:$,tag:b.tag,payload:b.payload,callback:b.callback,next:null},rt===null?(tt=rt=it,_e=ot):rt=rt.next=it,_|=$;if(b=b.next,b===null){if($=h.shared.pending,$===null)break;b=$.next,$.next=null,h.lastBaseUpdate=$,h.shared.pending=null}}while(1);rt===null&&(_e=ot),h.baseState=_e,h.firstBaseUpdate=tt,h.lastBaseUpdate=rt,Dg|=_,a.lanes=_,a.memoizedState=ot}}function Eg(a,s,d){if(a=s.effects,s.effects=null,a!==null)for(s=0;s<a.length;s++){var c=a[s],h=c.callback;if(h!==null){if(c.callback=null,c=d,typeof h!="function")throw Error(y(191,h));h.call(c)}}}var Fg=new aa.Component().refs;function Gg(a,s,d,c){s=a.memoizedState,d=d(c,s),d=d==null?s:m({},s,d),a.memoizedState=d,a.lanes===0&&(a.updateQueue.baseState=d)}var Kg={isMounted:function(a){return(a=a._reactInternals)?Zb(a)===a:!1},enqueueSetState:function(a,s,d){a=a._reactInternals;var c=Hg(),h=Ig(a),b=zg(c,h);b.payload=s,d!=null&&(b.callback=d),Ag(a,b),Jg(a,h,c)},enqueueReplaceState:function(a,s,d){a=a._reactInternals;var c=Hg(),h=Ig(a),b=zg(c,h);b.tag=1,b.payload=s,d!=null&&(b.callback=d),Ag(a,b),Jg(a,h,c)},enqueueForceUpdate:function(a,s){a=a._reactInternals;var d=Hg(),c=Ig(a),h=zg(d,c);h.tag=2,s!=null&&(h.callback=s),Ag(a,h),Jg(a,c,d)}};function Lg(a,s,d,c,h,b,_){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(c,b,_):s.prototype&&s.prototype.isPureReactComponent?!Je(d,c)||!Je(h,b):!0}function Mg(a,s,d){var c=!1,h=Cf,b=s.contextType;return typeof b=="object"&&b!==null?b=vg(b):(h=Ff(s)?Df:M.current,c=s.contextTypes,b=(c=c!=null)?Ef(a,h):Cf),s=new s(d,b),a.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=Kg,a.stateNode=s,s._reactInternals=a,c&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=h,a.__reactInternalMemoizedMaskedChildContext=b),s}function Ng(a,s,d,c){a=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(d,c),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(d,c),s.state!==a&&Kg.enqueueReplaceState(s,s.state,null)}function Og(a,s,d,c){var h=a.stateNode;h.props=d,h.state=a.memoizedState,h.refs=Fg,xg(a);var b=s.contextType;typeof b=="object"&&b!==null?h.context=vg(b):(b=Ff(s)?Df:M.current,h.context=Ef(a,b)),Cg(a,d,h,c),h.state=a.memoizedState,b=s.getDerivedStateFromProps,typeof b=="function"&&(Gg(a,s,b,d),h.state=a.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof h.getSnapshotBeforeUpdate=="function"||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(s=h.state,typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount(),s!==h.state&&Kg.enqueueReplaceState(h,h.state,null),Cg(a,d,h,c),h.state=a.memoizedState),typeof h.componentDidMount=="function"&&(a.flags|=4)}var Pg=Array.isArray;function Qg(a,s,d){if(a=d.ref,a!==null&&typeof a!="function"&&typeof a!="object"){if(d._owner){if(d=d._owner,d){if(d.tag!==1)throw Error(y(309));var c=d.stateNode}if(!c)throw Error(y(147,a));var h=""+a;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===h?s.ref:(s=function(b){var _=c.refs;_===Fg&&(_=c.refs={}),b===null?delete _[h]:_[h]=b},s._stringRef=h,s)}if(typeof a!="string")throw Error(y(284));if(!d._owner)throw Error(y(290,a))}return a}function Rg(a,s){if(a.type!=="textarea")throw Error(y(31,Object.prototype.toString.call(s)==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":s))}function Sg(a){function s(ut,ht){if(a){var nt=ut.lastEffect;nt!==null?(nt.nextEffect=ht,ut.lastEffect=ht):ut.firstEffect=ut.lastEffect=ht,ht.nextEffect=null,ht.flags=8}}function d(ut,ht){if(!a)return null;for(;ht!==null;)s(ut,ht),ht=ht.sibling;return null}function c(ut,ht){for(ut=new Map;ht!==null;)ht.key!==null?ut.set(ht.key,ht):ut.set(ht.index,ht),ht=ht.sibling;return ut}function h(ut,ht){return ut=Tg(ut,ht),ut.index=0,ut.sibling=null,ut}function b(ut,ht,nt){return ut.index=nt,a?(nt=ut.alternate,nt!==null?(nt=nt.index,nt<ht?(ut.flags=2,ht):nt):(ut.flags=2,ht)):ht}function _(ut){return a&&ut.alternate===null&&(ut.flags=2),ut}function $(ut,ht,nt,ct){return ht===null||ht.tag!==6?(ht=Ug(nt,ut.mode,ct),ht.return=ut,ht):(ht=h(ht,nt),ht.return=ut,ht)}function _e(ut,ht,nt,ct){return ht!==null&&ht.elementType===nt.type?(ct=h(ht,nt.props),ct.ref=Qg(ut,ht,nt),ct.return=ut,ct):(ct=Vg(nt.type,nt.key,nt.props,null,ut.mode,ct),ct.ref=Qg(ut,ht,nt),ct.return=ut,ct)}function tt(ut,ht,nt,ct){return ht===null||ht.tag!==4||ht.stateNode.containerInfo!==nt.containerInfo||ht.stateNode.implementation!==nt.implementation?(ht=Wg(nt,ut.mode,ct),ht.return=ut,ht):(ht=h(ht,nt.children||[]),ht.return=ut,ht)}function rt(ut,ht,nt,ct,mt){return ht===null||ht.tag!==7?(ht=Xg(nt,ut.mode,ct,mt),ht.return=ut,ht):(ht=h(ht,nt),ht.return=ut,ht)}function ot(ut,ht,nt){if(typeof ht=="string"||typeof ht=="number")return ht=Ug(""+ht,ut.mode,nt),ht.return=ut,ht;if(typeof ht=="object"&&ht!==null){switch(ht.$$typeof){case sa:return nt=Vg(ht.type,ht.key,ht.props,null,ut.mode,nt),nt.ref=Qg(ut,null,ht),nt.return=ut,nt;case ta:return ht=Wg(ht,ut.mode,nt),ht.return=ut,ht}if(Pg(ht)||La(ht))return ht=Xg(ht,ut.mode,nt,null),ht.return=ut,ht;Rg(ut,ht)}return null}function it(ut,ht,nt,ct){var mt=ht!==null?ht.key:null;if(typeof nt=="string"||typeof nt=="number")return mt!==null?null:$(ut,ht,""+nt,ct);if(typeof nt=="object"&&nt!==null){switch(nt.$$typeof){case sa:return nt.key===mt?nt.type===ua?rt(ut,ht,nt.props.children,ct,mt):_e(ut,ht,nt,ct):null;case ta:return nt.key===mt?tt(ut,ht,nt,ct):null}if(Pg(nt)||La(nt))return mt!==null?null:rt(ut,ht,nt,ct,null);Rg(ut,nt)}return null}function st(ut,ht,nt,ct,mt){if(typeof ct=="string"||typeof ct=="number")return ut=ut.get(nt)||null,$(ht,ut,""+ct,mt);if(typeof ct=="object"&&ct!==null){switch(ct.$$typeof){case sa:return ut=ut.get(ct.key===null?nt:ct.key)||null,ct.type===ua?rt(ht,ut,ct.props.children,mt,ct.key):_e(ht,ut,ct,mt);case ta:return ut=ut.get(ct.key===null?nt:ct.key)||null,tt(ht,ut,ct,mt)}if(Pg(ct)||La(ct))return ut=ut.get(nt)||null,rt(ht,ut,ct,mt,null);Rg(ht,ct)}return null}function lt(ut,ht,nt,ct){for(var mt=null,kt=null,Tt=ht,Pt=ht=0,At=null;Tt!==null&&Pt<nt.length;Pt++){Tt.index>Pt?(At=Tt,Tt=null):At=Tt.sibling;var gt=it(ut,Tt,nt[Pt],ct);if(gt===null){Tt===null&&(Tt=At);break}a&&Tt&&gt.alternate===null&&s(ut,Tt),ht=b(gt,ht,Pt),kt===null?mt=gt:kt.sibling=gt,kt=gt,Tt=At}if(Pt===nt.length)return d(ut,Tt),mt;if(Tt===null){for(;Pt<nt.length;Pt++)Tt=ot(ut,nt[Pt],ct),Tt!==null&&(ht=b(Tt,ht,Pt),kt===null?mt=Tt:kt.sibling=Tt,kt=Tt);return mt}for(Tt=c(ut,Tt);Pt<nt.length;Pt++)At=st(Tt,ut,Pt,nt[Pt],ct),At!==null&&(a&&At.alternate!==null&&Tt.delete(At.key===null?Pt:At.key),ht=b(At,ht,Pt),kt===null?mt=At:kt.sibling=At,kt=At);return a&&Tt.forEach(function(Ct){return s(ut,Ct)}),mt}function dt(ut,ht,nt,ct){var mt=La(nt);if(typeof mt!="function")throw Error(y(150));if(nt=mt.call(nt),nt==null)throw Error(y(151));for(var kt=mt=null,Tt=ht,Pt=ht=0,At=null,gt=nt.next();Tt!==null&&!gt.done;Pt++,gt=nt.next()){Tt.index>Pt?(At=Tt,Tt=null):At=Tt.sibling;var Ct=it(ut,Tt,gt.value,ct);if(Ct===null){Tt===null&&(Tt=At);break}a&&Tt&&Ct.alternate===null&&s(ut,Tt),ht=b(Ct,ht,Pt),kt===null?mt=Ct:kt.sibling=Ct,kt=Ct,Tt=At}if(gt.done)return d(ut,Tt),mt;if(Tt===null){for(;!gt.done;Pt++,gt=nt.next())gt=ot(ut,gt.value,ct),gt!==null&&(ht=b(gt,ht,Pt),kt===null?mt=gt:kt.sibling=gt,kt=gt);return mt}for(Tt=c(ut,Tt);!gt.done;Pt++,gt=nt.next())gt=st(Tt,ut,Pt,gt.value,ct),gt!==null&&(a&&gt.alternate!==null&&Tt.delete(gt.key===null?Pt:gt.key),ht=b(gt,ht,Pt),kt===null?mt=gt:kt.sibling=gt,kt=gt);return a&&Tt.forEach(function(Nt){return s(ut,Nt)}),mt}return function(ut,ht,nt,ct){var mt=typeof nt=="object"&&nt!==null&&nt.type===ua&&nt.key===null;mt&&(nt=nt.props.children);var kt=typeof nt=="object"&&nt!==null;if(kt)switch(nt.$$typeof){case sa:e:{for(kt=nt.key,mt=ht;mt!==null;){if(mt.key===kt){switch(mt.tag){case 7:if(nt.type===ua){d(ut,mt.sibling),ht=h(mt,nt.props.children),ht.return=ut,ut=ht;break e}break;default:if(mt.elementType===nt.type){d(ut,mt.sibling),ht=h(mt,nt.props),ht.ref=Qg(ut,mt,nt),ht.return=ut,ut=ht;break e}}d(ut,mt);break}else s(ut,mt);mt=mt.sibling}nt.type===ua?(ht=Xg(nt.props.children,ut.mode,ct,nt.key),ht.return=ut,ut=ht):(ct=Vg(nt.type,nt.key,nt.props,null,ut.mode,ct),ct.ref=Qg(ut,ht,nt),ct.return=ut,ut=ct)}return _(ut);case ta:e:{for(mt=nt.key;ht!==null;){if(ht.key===mt)if(ht.tag===4&&ht.stateNode.containerInfo===nt.containerInfo&&ht.stateNode.implementation===nt.implementation){d(ut,ht.sibling),ht=h(ht,nt.children||[]),ht.return=ut,ut=ht;break e}else{d(ut,ht);break}else s(ut,ht);ht=ht.sibling}ht=Wg(nt,ut.mode,ct),ht.return=ut,ut=ht}return _(ut)}if(typeof nt=="string"||typeof nt=="number")return nt=""+nt,ht!==null&&ht.tag===6?(d(ut,ht.sibling),ht=h(ht,nt),ht.return=ut,ut=ht):(d(ut,ht),ht=Ug(nt,ut.mode,ct),ht.return=ut,ut=ht),_(ut);if(Pg(nt))return lt(ut,ht,nt,ct);if(La(nt))return dt(ut,ht,nt,ct);if(kt&&Rg(ut,nt),typeof nt=="undefined"&&!mt)switch(ut.tag){case 1:case 22:case 0:case 11:case 15:throw Error(y(152,Ra(ut.type)||"Component"))}return d(ut,ht)}}var Yg=Sg(!0),Zg=Sg(!1),$g={},ah=Bf($g),bh=Bf($g),ch=Bf($g);function dh(a){if(a===$g)throw Error(y(174));return a}function eh(a,s){switch(I(ch,s),I(bh,a),I(ah,$g),a=s.nodeType,a){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:mb(null,"");break;default:a=a===8?s.parentNode:s,s=a.namespaceURI||null,a=a.tagName,s=mb(s,a)}H(ah),I(ah,s)}function fh(){H(ah),H(bh),H(ch)}function gh(a){dh(ch.current);var s=dh(ah.current),d=mb(s,a.type);s!==d&&(I(bh,a),I(ah,d))}function hh(a){bh.current===a&&(H(ah),H(bh))}var P=Bf(0);function ih(a){for(var s=a;s!==null;){if(s.tag===13){var d=s.memoizedState;if(d!==null&&(d=d.dehydrated,d===null||d.data==="$?"||d.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&64)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===a)break;for(;s.sibling===null;){if(s.return===null||s.return===a)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var jh=null,kh=null,lh=!1;function mh(a,s){var d=nh(5,null,null,0);d.elementType="DELETED",d.type="DELETED",d.stateNode=s,d.return=a,d.flags=8,a.lastEffect!==null?(a.lastEffect.nextEffect=d,a.lastEffect=d):a.firstEffect=a.lastEffect=d}function oh(a,s){switch(a.tag){case 5:var d=a.type;return s=s.nodeType!==1||d.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(a.stateNode=s,!0):!1;case 6:return s=a.pendingProps===""||s.nodeType!==3?null:s,s!==null?(a.stateNode=s,!0):!1;case 13:return!1;default:return!1}}function ph(a){if(lh){var s=kh;if(s){var d=s;if(!oh(a,s)){if(s=rf(d.nextSibling),!s||!oh(a,s)){a.flags=a.flags&-1025|2,lh=!1,jh=a;return}mh(jh,d)}jh=a,kh=rf(s.firstChild)}else a.flags=a.flags&-1025|2,lh=!1,jh=a}}function qh(a){for(a=a.return;a!==null&&a.tag!==5&&a.tag!==3&&a.tag!==13;)a=a.return;jh=a}function rh(a){if(a!==jh)return!1;if(!lh)return qh(a),lh=!0,!1;var s=a.type;if(a.tag!==5||s!=="head"&&s!=="body"&&!nf(s,a.memoizedProps))for(s=kh;s;)mh(a,s),s=rf(s.nextSibling);if(qh(a),a.tag===13){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(y(317));e:{for(a=a.nextSibling,s=0;a;){if(a.nodeType===8){var d=a.data;if(d==="/$"){if(s===0){kh=rf(a.nextSibling);break e}s--}else d!=="$"&&d!=="$!"&&d!=="$?"||s++}a=a.nextSibling}kh=null}}else kh=jh?rf(a.stateNode.nextSibling):null;return!0}function sh(){kh=jh=null,lh=!1}var th=[];function uh(){for(var a=0;a<th.length;a++)th[a]._workInProgressVersionPrimary=null;th.length=0}var vh=ra.ReactCurrentDispatcher,wh=ra.ReactCurrentBatchConfig,xh=0,R=null,S=null,T=null,yh=!1,zh=!1;function Ah(){throw Error(y(321))}function Bh(a,s){if(s===null)return!1;for(var d=0;d<s.length&&d<a.length;d++)if(!He(a[d],s[d]))return!1;return!0}function Ch(a,s,d,c,h,b){if(xh=b,R=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,vh.current=a===null||a.memoizedState===null?Dh:Eh,a=d(c,h),zh){b=0;do{if(zh=!1,!(25>b))throw Error(y(301));b+=1,T=S=null,s.updateQueue=null,vh.current=Fh,a=d(c,h)}while(zh)}if(vh.current=Gh,s=S!==null&&S.next!==null,xh=0,T=S=R=null,yh=!1,s)throw Error(y(300));return a}function Hh(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return T===null?R.memoizedState=T=a:T=T.next=a,T}function Ih(){if(S===null){var a=R.alternate;a=a!==null?a.memoizedState:null}else a=S.next;var s=T===null?R.memoizedState:T.next;if(s!==null)T=s,S=a;else{if(a===null)throw Error(y(310));S=a,a={memoizedState:S.memoizedState,baseState:S.baseState,baseQueue:S.baseQueue,queue:S.queue,next:null},T===null?R.memoizedState=T=a:T=T.next=a}return T}function Jh(a,s){return typeof s=="function"?s(a):s}function Kh(a){var s=Ih(),d=s.queue;if(d===null)throw Error(y(311));d.lastRenderedReducer=a;var c=S,h=c.baseQueue,b=d.pending;if(b!==null){if(h!==null){var _=h.next;h.next=b.next,b.next=_}c.baseQueue=h=b,d.pending=null}if(h!==null){h=h.next,c=c.baseState;var $=_=b=null,_e=h;do{var tt=_e.lane;if((xh&tt)===tt)$!==null&&($=$.next={lane:0,action:_e.action,eagerReducer:_e.eagerReducer,eagerState:_e.eagerState,next:null}),c=_e.eagerReducer===a?_e.eagerState:a(c,_e.action);else{var rt={lane:tt,action:_e.action,eagerReducer:_e.eagerReducer,eagerState:_e.eagerState,next:null};$===null?(_=$=rt,b=c):$=$.next=rt,R.lanes|=tt,Dg|=tt}_e=_e.next}while(_e!==null&&_e!==h);$===null?b=c:$.next=_,He(c,s.memoizedState)||(ug=!0),s.memoizedState=c,s.baseState=b,s.baseQueue=$,d.lastRenderedState=c}return[s.memoizedState,d.dispatch]}function Lh(a){var s=Ih(),d=s.queue;if(d===null)throw Error(y(311));d.lastRenderedReducer=a;var c=d.dispatch,h=d.pending,b=s.memoizedState;if(h!==null){d.pending=null;var _=h=h.next;do b=a(b,_.action),_=_.next;while(_!==h);He(b,s.memoizedState)||(ug=!0),s.memoizedState=b,s.baseQueue===null&&(s.baseState=b),d.lastRenderedState=b}return[b,c]}function Mh(a,s,d){var c=s._getVersion;c=c(s._source);var h=s._workInProgressVersionPrimary;if(h!==null?a=h===c:(a=a.mutableReadLanes,(a=(xh&a)===a)&&(s._workInProgressVersionPrimary=c,th.push(s))),a)return d(s._source);throw th.push(s),Error(y(350))}function Nh(a,s,d,c){var h=U;if(h===null)throw Error(y(349));var b=s._getVersion,_=b(s._source),$=vh.current,_e=$.useState(function(){return Mh(h,s,d)}),tt=_e[1],rt=_e[0];_e=T;var ot=a.memoizedState,it=ot.refs,st=it.getSnapshot,lt=ot.source;ot=ot.subscribe;var dt=R;return a.memoizedState={refs:it,source:s,subscribe:c},$.useEffect(function(){it.getSnapshot=d,it.setSnapshot=tt;var ut=b(s._source);if(!He(_,ut)){ut=d(s._source),He(rt,ut)||(tt(ut),ut=Ig(dt),h.mutableReadLanes|=ut&h.pendingLanes),ut=h.mutableReadLanes,h.entangledLanes|=ut;for(var ht=h.entanglements,nt=ut;0<nt;){var ct=31-Vc(nt),mt=1<<ct;ht[ct]|=ut,nt&=~mt}}},[d,s,c]),$.useEffect(function(){return c(s._source,function(){var ut=it.getSnapshot,ht=it.setSnapshot;try{ht(ut(s._source));var nt=Ig(dt);h.mutableReadLanes|=nt&h.pendingLanes}catch(ct){ht(function(){throw ct})}})},[s,c]),He(st,d)&&He(lt,s)&&He(ot,c)||(a={pending:null,dispatch:null,lastRenderedReducer:Jh,lastRenderedState:rt},a.dispatch=tt=Oh.bind(null,R,a),_e.queue=a,_e.baseQueue=null,rt=Mh(h,s,d),_e.memoizedState=_e.baseState=rt),rt}function Ph(a,s,d){var c=Ih();return Nh(c,a,s,d)}function Qh(a){var s=Hh();return typeof a=="function"&&(a=a()),s.memoizedState=s.baseState=a,a=s.queue={pending:null,dispatch:null,lastRenderedReducer:Jh,lastRenderedState:a},a=a.dispatch=Oh.bind(null,R,a),[s.memoizedState,a]}function Rh(a,s,d,c){return a={tag:a,create:s,destroy:d,deps:c,next:null},s=R.updateQueue,s===null?(s={lastEffect:null},R.updateQueue=s,s.lastEffect=a.next=a):(d=s.lastEffect,d===null?s.lastEffect=a.next=a:(c=d.next,d.next=a,a.next=c,s.lastEffect=a)),a}function Sh(a){var s=Hh();return a={current:a},s.memoizedState=a}function Th(){return Ih().memoizedState}function Uh(a,s,d,c){var h=Hh();R.flags|=a,h.memoizedState=Rh(1|s,d,void 0,c===void 0?null:c)}function Vh(a,s,d,c){var h=Ih();c=c===void 0?null:c;var b=void 0;if(S!==null){var _=S.memoizedState;if(b=_.destroy,c!==null&&Bh(c,_.deps)){Rh(s,d,b,c);return}}R.flags|=a,h.memoizedState=Rh(1|s,d,b,c)}function Wh(a,s){return Uh(516,4,a,s)}function Xh(a,s){return Vh(516,4,a,s)}function Yh(a,s){return Vh(4,2,a,s)}function Zh(a,s){if(typeof s=="function")return a=a(),s(a),function(){s(null)};if(s!=null)return a=a(),s.current=a,function(){s.current=null}}function $h(a,s,d){return d=d!=null?d.concat([a]):null,Vh(4,2,Zh.bind(null,s,a),d)}function ai(){}function bi(a,s){var d=Ih();s=s===void 0?null:s;var c=d.memoizedState;return c!==null&&s!==null&&Bh(s,c[1])?c[0]:(d.memoizedState=[a,s],a)}function ci(a,s){var d=Ih();s=s===void 0?null:s;var c=d.memoizedState;return c!==null&&s!==null&&Bh(s,c[1])?c[0]:(a=a(),d.memoizedState=[a,s],a)}function di(a,s){var d=eg();gg(98>d?98:d,function(){a(!0)}),gg(97<d?97:d,function(){var c=wh.transition;wh.transition=1;try{a(!1),s()}finally{wh.transition=c}})}function Oh(a,s,d){var c=Hg(),h=Ig(a),b={lane:h,action:d,eagerReducer:null,eagerState:null,next:null},_=s.pending;if(_===null?b.next=b:(b.next=_.next,_.next=b),s.pending=b,_=a.alternate,a===R||_!==null&&_===R)zh=yh=!0;else{if(a.lanes===0&&(_===null||_.lanes===0)&&(_=s.lastRenderedReducer,_!==null))try{var $=s.lastRenderedState,_e=_($,d);if(b.eagerReducer=_,b.eagerState=_e,He(_e,$))return}catch{}finally{}Jg(a,h,c)}}var Gh={readContext:vg,useCallback:Ah,useContext:Ah,useEffect:Ah,useImperativeHandle:Ah,useLayoutEffect:Ah,useMemo:Ah,useReducer:Ah,useRef:Ah,useState:Ah,useDebugValue:Ah,useDeferredValue:Ah,useTransition:Ah,useMutableSource:Ah,useOpaqueIdentifier:Ah,unstable_isNewReconciler:!1},Dh={readContext:vg,useCallback:function(a,s){return Hh().memoizedState=[a,s===void 0?null:s],a},useContext:vg,useEffect:Wh,useImperativeHandle:function(a,s,d){return d=d!=null?d.concat([a]):null,Uh(4,2,Zh.bind(null,s,a),d)},useLayoutEffect:function(a,s){return Uh(4,2,a,s)},useMemo:function(a,s){var d=Hh();return s=s===void 0?null:s,a=a(),d.memoizedState=[a,s],a},useReducer:function(a,s,d){var c=Hh();return s=d!==void 0?d(s):s,c.memoizedState=c.baseState=s,a=c.queue={pending:null,dispatch:null,lastRenderedReducer:a,lastRenderedState:s},a=a.dispatch=Oh.bind(null,R,a),[c.memoizedState,a]},useRef:Sh,useState:Qh,useDebugValue:ai,useDeferredValue:function(a){var s=Qh(a),d=s[0],c=s[1];return Wh(function(){var h=wh.transition;wh.transition=1;try{c(a)}finally{wh.transition=h}},[a]),d},useTransition:function(){var a=Qh(!1),s=a[0];return a=di.bind(null,a[1]),Sh(a),[a,s]},useMutableSource:function(a,s,d){var c=Hh();return c.memoizedState={refs:{getSnapshot:s,setSnapshot:null},source:a,subscribe:d},Nh(c,a,s,d)},useOpaqueIdentifier:function(){if(lh){var a=!1,s=uf(function(){throw a||(a=!0,d("r:"+(tf++).toString(36))),Error(y(355))}),d=Qh(s)[1];return(R.mode&2)===0&&(R.flags|=516,Rh(5,function(){d("r:"+(tf++).toString(36))},void 0,null)),s}return s="r:"+(tf++).toString(36),Qh(s),s},unstable_isNewReconciler:!1},Eh={readContext:vg,useCallback:bi,useContext:vg,useEffect:Xh,useImperativeHandle:$h,useLayoutEffect:Yh,useMemo:ci,useReducer:Kh,useRef:Th,useState:function(){return Kh(Jh)},useDebugValue:ai,useDeferredValue:function(a){var s=Kh(Jh),d=s[0],c=s[1];return Xh(function(){var h=wh.transition;wh.transition=1;try{c(a)}finally{wh.transition=h}},[a]),d},useTransition:function(){var a=Kh(Jh)[0];return[Th().current,a]},useMutableSource:Ph,useOpaqueIdentifier:function(){return Kh(Jh)[0]},unstable_isNewReconciler:!1},Fh={readContext:vg,useCallback:bi,useContext:vg,useEffect:Xh,useImperativeHandle:$h,useLayoutEffect:Yh,useMemo:ci,useReducer:Lh,useRef:Th,useState:function(){return Lh(Jh)},useDebugValue:ai,useDeferredValue:function(a){var s=Lh(Jh),d=s[0],c=s[1];return Xh(function(){var h=wh.transition;wh.transition=1;try{c(a)}finally{wh.transition=h}},[a]),d},useTransition:function(){var a=Lh(Jh)[0];return[Th().current,a]},useMutableSource:Ph,useOpaqueIdentifier:function(){return Lh(Jh)[0]},unstable_isNewReconciler:!1},ei=ra.ReactCurrentOwner,ug=!1;function fi(a,s,d,c){s.child=a===null?Zg(s,null,d,c):Yg(s,a.child,d,c)}function gi(a,s,d,c,h){d=d.render;var b=s.ref;return tg(s,h),c=Ch(a,s,d,c,b,h),a!==null&&!ug?(s.updateQueue=a.updateQueue,s.flags&=-517,a.lanes&=~h,hi(a,s,h)):(s.flags|=1,fi(a,s,c,h),s.child)}function ii(a,s,d,c,h,b){if(a===null){var _=d.type;return typeof _=="function"&&!ji(_)&&_.defaultProps===void 0&&d.compare===null&&d.defaultProps===void 0?(s.tag=15,s.type=_,ki(a,s,_,c,h,b)):(a=Vg(d.type,null,c,s,s.mode,b),a.ref=s.ref,a.return=s,s.child=a)}return _=a.child,(h&b)===0&&(h=_.memoizedProps,d=d.compare,d=d!==null?d:Je,d(h,c)&&a.ref===s.ref)?hi(a,s,b):(s.flags|=1,a=Tg(_,c),a.ref=s.ref,a.return=s,s.child=a)}function ki(a,s,d,c,h,b){if(a!==null&&Je(a.memoizedProps,c)&&a.ref===s.ref)if(ug=!1,(b&h)!==0)(a.flags&16384)!==0&&(ug=!0);else return s.lanes=a.lanes,hi(a,s,b);return li(a,s,d,c,b)}function mi(a,s,d){var c=s.pendingProps,h=c.children,b=a!==null?a.memoizedState:null;if(c.mode==="hidden"||c.mode==="unstable-defer-without-hiding")if((s.mode&4)===0)s.memoizedState={baseLanes:0},ni(s,d);else if((d&1073741824)!==0)s.memoizedState={baseLanes:0},ni(s,b!==null?b.baseLanes:d);else return a=b!==null?b.baseLanes|d:d,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:a},ni(s,a),null;else b!==null?(c=b.baseLanes|d,s.memoizedState=null):c=d,ni(s,c);return fi(a,s,h,d),s.child}function oi(a,s){var d=s.ref;(a===null&&d!==null||a!==null&&a.ref!==d)&&(s.flags|=128)}function li(a,s,d,c,h){var b=Ff(d)?Df:M.current;return b=Ef(s,b),tg(s,h),d=Ch(a,s,d,c,b,h),a!==null&&!ug?(s.updateQueue=a.updateQueue,s.flags&=-517,a.lanes&=~h,hi(a,s,h)):(s.flags|=1,fi(a,s,d,h),s.child)}function pi(a,s,d,c,h){if(Ff(d)){var b=!0;Jf(s)}else b=!1;if(tg(s,h),s.stateNode===null)a!==null&&(a.alternate=null,s.alternate=null,s.flags|=2),Mg(s,d,c),Og(s,d,c,h),c=!0;else if(a===null){var _=s.stateNode,$=s.memoizedProps;_.props=$;var _e=_.context,tt=d.contextType;typeof tt=="object"&&tt!==null?tt=vg(tt):(tt=Ff(d)?Df:M.current,tt=Ef(s,tt));var rt=d.getDerivedStateFromProps,ot=typeof rt=="function"||typeof _.getSnapshotBeforeUpdate=="function";ot||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||($!==c||_e!==tt)&&Ng(s,_,c,tt),wg=!1;var it=s.memoizedState;_.state=it,Cg(s,c,_,h),_e=s.memoizedState,$!==c||it!==_e||N.current||wg?(typeof rt=="function"&&(Gg(s,d,rt,c),_e=s.memoizedState),($=wg||Lg(s,d,$,c,it,_e,tt))?(ot||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(s.flags|=4)):(typeof _.componentDidMount=="function"&&(s.flags|=4),s.memoizedProps=c,s.memoizedState=_e),_.props=c,_.state=_e,_.context=tt,c=$):(typeof _.componentDidMount=="function"&&(s.flags|=4),c=!1)}else{_=s.stateNode,yg(a,s),$=s.memoizedProps,tt=s.type===s.elementType?$:lg(s.type,$),_.props=tt,ot=s.pendingProps,it=_.context,_e=d.contextType,typeof _e=="object"&&_e!==null?_e=vg(_e):(_e=Ff(d)?Df:M.current,_e=Ef(s,_e));var st=d.getDerivedStateFromProps;(rt=typeof st=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||($!==ot||it!==_e)&&Ng(s,_,c,_e),wg=!1,it=s.memoizedState,_.state=it,Cg(s,c,_,h);var lt=s.memoizedState;$!==ot||it!==lt||N.current||wg?(typeof st=="function"&&(Gg(s,d,st,c),lt=s.memoizedState),(tt=wg||Lg(s,d,tt,c,it,lt,_e))?(rt||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(c,lt,_e),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(c,lt,_e)),typeof _.componentDidUpdate=="function"&&(s.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(s.flags|=256)):(typeof _.componentDidUpdate!="function"||$===a.memoizedProps&&it===a.memoizedState||(s.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||$===a.memoizedProps&&it===a.memoizedState||(s.flags|=256),s.memoizedProps=c,s.memoizedState=lt),_.props=c,_.state=lt,_.context=_e,c=tt):(typeof _.componentDidUpdate!="function"||$===a.memoizedProps&&it===a.memoizedState||(s.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||$===a.memoizedProps&&it===a.memoizedState||(s.flags|=256),c=!1)}return qi(a,s,d,c,b,h)}function qi(a,s,d,c,h,b){oi(a,s);var _=(s.flags&64)!==0;if(!c&&!_)return h&&Kf(s,d,!1),hi(a,s,b);c=s.stateNode,ei.current=s;var $=_&&typeof d.getDerivedStateFromError!="function"?null:c.render();return s.flags|=1,a!==null&&_?(s.child=Yg(s,a.child,null,b),s.child=Yg(s,null,$,b)):fi(a,s,$,b),s.memoizedState=c.state,h&&Kf(s,d,!0),s.child}function ri(a){var s=a.stateNode;s.pendingContext?Hf(a,s.pendingContext,s.pendingContext!==s.context):s.context&&Hf(a,s.context,!1),eh(a,s.containerInfo)}var si={dehydrated:null,retryLane:0};function ti(a,s,d){var c=s.pendingProps,h=P.current,b=!1,_;return(_=(s.flags&64)!==0)||(_=a!==null&&a.memoizedState===null?!1:(h&2)!==0),_?(b=!0,s.flags&=-65):a!==null&&a.memoizedState===null||c.fallback===void 0||c.unstable_avoidThisFallback===!0||(h|=1),I(P,h&1),a===null?(c.fallback!==void 0&&ph(s),a=c.children,h=c.fallback,b?(a=ui(s,a,h,d),s.child.memoizedState={baseLanes:d},s.memoizedState=si,a):typeof c.unstable_expectedLoadTime=="number"?(a=ui(s,a,h,d),s.child.memoizedState={baseLanes:d},s.memoizedState=si,s.lanes=33554432,a):(d=vi({mode:"visible",children:a},s.mode,d,null),d.return=s,s.child=d)):a.memoizedState!==null?b?(c=wi(a,s,c.children,c.fallback,d),b=s.child,h=a.child.memoizedState,b.memoizedState=h===null?{baseLanes:d}:{baseLanes:h.baseLanes|d},b.childLanes=a.childLanes&~d,s.memoizedState=si,c):(d=xi(a,s,c.children,d),s.memoizedState=null,d):b?(c=wi(a,s,c.children,c.fallback,d),b=s.child,h=a.child.memoizedState,b.memoizedState=h===null?{baseLanes:d}:{baseLanes:h.baseLanes|d},b.childLanes=a.childLanes&~d,s.memoizedState=si,c):(d=xi(a,s,c.children,d),s.memoizedState=null,d)}function ui(a,s,d,c){var h=a.mode,b=a.child;return s={mode:"hidden",children:s},(h&2)===0&&b!==null?(b.childLanes=0,b.pendingProps=s):b=vi(s,h,0,null),d=Xg(d,h,c,null),b.return=a,d.return=a,b.sibling=d,a.child=b,d}function xi(a,s,d,c){var h=a.child;return a=h.sibling,d=Tg(h,{mode:"visible",children:d}),(s.mode&2)===0&&(d.lanes=c),d.return=s,d.sibling=null,a!==null&&(a.nextEffect=null,a.flags=8,s.firstEffect=s.lastEffect=a),s.child=d}function wi(a,s,d,c,h){var b=s.mode,_=a.child;a=_.sibling;var $={mode:"hidden",children:d};return(b&2)===0&&s.child!==_?(d=s.child,d.childLanes=0,d.pendingProps=$,_=d.lastEffect,_!==null?(s.firstEffect=d.firstEffect,s.lastEffect=_,_.nextEffect=null):s.firstEffect=s.lastEffect=null):d=Tg(_,$),a!==null?c=Tg(a,c):(c=Xg(c,b,h,null),c.flags|=2),c.return=s,d.return=s,d.sibling=c,s.child=d,c}function yi(a,s){a.lanes|=s;var d=a.alternate;d!==null&&(d.lanes|=s),sg(a.return,s)}function zi(a,s,d,c,h,b){var _=a.memoizedState;_===null?a.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:c,tail:d,tailMode:h,lastEffect:b}:(_.isBackwards=s,_.rendering=null,_.renderingStartTime=0,_.last=c,_.tail=d,_.tailMode=h,_.lastEffect=b)}function Ai(a,s,d){var c=s.pendingProps,h=c.revealOrder,b=c.tail;if(fi(a,s,c.children,d),c=P.current,(c&2)!==0)c=c&1|2,s.flags|=64;else{if(a!==null&&(a.flags&64)!==0)e:for(a=s.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&yi(a,d);else if(a.tag===19)yi(a,d);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break e;for(;a.sibling===null;){if(a.return===null||a.return===s)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}c&=1}if(I(P,c),(s.mode&2)===0)s.memoizedState=null;else switch(h){case"forwards":for(d=s.child,h=null;d!==null;)a=d.alternate,a!==null&&ih(a)===null&&(h=d),d=d.sibling;d=h,d===null?(h=s.child,s.child=null):(h=d.sibling,d.sibling=null),zi(s,!1,h,d,b,s.lastEffect);break;case"backwards":for(d=null,h=s.child,s.child=null;h!==null;){if(a=h.alternate,a!==null&&ih(a)===null){s.child=h;break}a=h.sibling,h.sibling=d,d=h,h=a}zi(s,!0,d,null,b,s.lastEffect);break;case"together":zi(s,!1,null,null,void 0,s.lastEffect);break;default:s.memoizedState=null}return s.child}function hi(a,s,d){if(a!==null&&(s.dependencies=a.dependencies),Dg|=s.lanes,(d&s.childLanes)!==0){if(a!==null&&s.child!==a.child)throw Error(y(153));if(s.child!==null){for(a=s.child,d=Tg(a,a.pendingProps),s.child=d,d.return=s;a.sibling!==null;)a=a.sibling,d=d.sibling=Tg(a,a.pendingProps),d.return=s;d.sibling=null}return s.child}return null}var Bi,Ci,Di,Ei;Bi=function(a,s){for(var d=s.child;d!==null;){if(d.tag===5||d.tag===6)a.appendChild(d.stateNode);else if(d.tag!==4&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===s)break;for(;d.sibling===null;){if(d.return===null||d.return===s)return;d=d.return}d.sibling.return=d.return,d=d.sibling}};Ci=function(){};Di=function(a,s,d,c){var h=a.memoizedProps;if(h!==c){a=s.stateNode,dh(ah.current);var b=null;switch(d){case"input":h=Ya(a,h),c=Ya(a,c),b=[];break;case"option":h=eb(a,h),c=eb(a,c),b=[];break;case"select":h=m({},h,{value:void 0}),c=m({},c,{value:void 0}),b=[];break;case"textarea":h=gb(a,h),c=gb(a,c),b=[];break;default:typeof h.onClick!="function"&&typeof c.onClick=="function"&&(a.onclick=jf)}vb(d,c);var _;d=null;for(tt in h)if(!c.hasOwnProperty(tt)&&h.hasOwnProperty(tt)&&h[tt]!=null)if(tt==="style"){var $=h[tt];for(_ in $)$.hasOwnProperty(_)&&(d||(d={}),d[_]="")}else tt!=="dangerouslySetInnerHTML"&&tt!=="children"&&tt!=="suppressContentEditableWarning"&&tt!=="suppressHydrationWarning"&&tt!=="autoFocus"&&(ca.hasOwnProperty(tt)?b||(b=[]):(b=b||[]).push(tt,null));for(tt in c){var _e=c[tt];if($=h!=null?h[tt]:void 0,c.hasOwnProperty(tt)&&_e!==$&&(_e!=null||$!=null))if(tt==="style")if($){for(_ in $)!$.hasOwnProperty(_)||_e&&_e.hasOwnProperty(_)||(d||(d={}),d[_]="");for(_ in _e)_e.hasOwnProperty(_)&&$[_]!==_e[_]&&(d||(d={}),d[_]=_e[_])}else d||(b||(b=[]),b.push(tt,d)),d=_e;else tt==="dangerouslySetInnerHTML"?(_e=_e?_e.__html:void 0,$=$?$.__html:void 0,_e!=null&&$!==_e&&(b=b||[]).push(tt,_e)):tt==="children"?typeof _e!="string"&&typeof _e!="number"||(b=b||[]).push(tt,""+_e):tt!=="suppressContentEditableWarning"&&tt!=="suppressHydrationWarning"&&(ca.hasOwnProperty(tt)?(_e!=null&&tt==="onScroll"&&G("scroll",a),b||$===_e||(b=[])):typeof _e=="object"&&_e!==null&&_e.$$typeof===Ga?_e.toString():(b=b||[]).push(tt,_e))}d&&(b=b||[]).push("style",d);var tt=b;(s.updateQueue=tt)&&(s.flags|=4)}};Ei=function(a,s,d,c){d!==c&&(s.flags|=4)};function Fi(a,s){if(!lh)switch(a.tailMode){case"hidden":s=a.tail;for(var d=null;s!==null;)s.alternate!==null&&(d=s),s=s.sibling;d===null?a.tail=null:d.sibling=null;break;case"collapsed":d=a.tail;for(var c=null;d!==null;)d.alternate!==null&&(c=d),d=d.sibling;c===null?s||a.tail===null?a.tail=null:a.tail.sibling=null:c.sibling=null}}function Gi(a,s,d){var c=s.pendingProps;switch(s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return Ff(s.type)&&Gf(),null;case 3:return fh(),H(N),H(M),uh(),c=s.stateNode,c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(a===null||a.child===null)&&(rh(s)?s.flags|=4:c.hydrate||(s.flags|=256)),Ci(s),null;case 5:hh(s);var h=dh(ch.current);if(d=s.type,a!==null&&s.stateNode!=null)Di(a,s,d,c,h),a.ref!==s.ref&&(s.flags|=128);else{if(!c){if(s.stateNode===null)throw Error(y(166));return null}if(a=dh(ah.current),rh(s)){c=s.stateNode,d=s.type;var b=s.memoizedProps;switch(c[wf]=s,c[xf]=b,d){case"dialog":G("cancel",c),G("close",c);break;case"iframe":case"object":case"embed":G("load",c);break;case"video":case"audio":for(a=0;a<Xe.length;a++)G(Xe[a],c);break;case"source":G("error",c);break;case"img":case"image":case"link":G("error",c),G("load",c);break;case"details":G("toggle",c);break;case"input":Za(c,b),G("invalid",c);break;case"select":c._wrapperState={wasMultiple:!!b.multiple},G("invalid",c);break;case"textarea":hb(c,b),G("invalid",c)}vb(d,b),a=null;for(var _ in b)b.hasOwnProperty(_)&&(h=b[_],_==="children"?typeof h=="string"?c.textContent!==h&&(a=["children",h]):typeof h=="number"&&c.textContent!==""+h&&(a=["children",""+h]):ca.hasOwnProperty(_)&&h!=null&&_==="onScroll"&&G("scroll",c));switch(d){case"input":Va(c),cb(c,b,!0);break;case"textarea":Va(c),jb(c);break;case"select":case"option":break;default:typeof b.onClick=="function"&&(c.onclick=jf)}c=a,s.updateQueue=c,c!==null&&(s.flags|=4)}else{switch(_=h.nodeType===9?h:h.ownerDocument,a===kb.html&&(a=lb(d)),a===kb.html?d==="script"?(a=_.createElement("div"),a.innerHTML="<script><\/script>",a=a.removeChild(a.firstChild)):typeof c.is=="string"?a=_.createElement(d,{is:c.is}):(a=_.createElement(d),d==="select"&&(_=a,c.multiple?_.multiple=!0:c.size&&(_.size=c.size))):a=_.createElementNS(a,d),a[wf]=s,a[xf]=c,Bi(a,s,!1,!1),s.stateNode=a,_=wb(d,c),d){case"dialog":G("cancel",a),G("close",a),h=c;break;case"iframe":case"object":case"embed":G("load",a),h=c;break;case"video":case"audio":for(h=0;h<Xe.length;h++)G(Xe[h],a);h=c;break;case"source":G("error",a),h=c;break;case"img":case"image":case"link":G("error",a),G("load",a),h=c;break;case"details":G("toggle",a),h=c;break;case"input":Za(a,c),h=Ya(a,c),G("invalid",a);break;case"option":h=eb(a,c);break;case"select":a._wrapperState={wasMultiple:!!c.multiple},h=m({},c,{value:void 0}),G("invalid",a);break;case"textarea":hb(a,c),h=gb(a,c),G("invalid",a);break;default:h=c}vb(d,h);var $=h;for(b in $)if($.hasOwnProperty(b)){var _e=$[b];b==="style"?tb(a,_e):b==="dangerouslySetInnerHTML"?(_e=_e?_e.__html:void 0,_e!=null&&ob(a,_e)):b==="children"?typeof _e=="string"?(d!=="textarea"||_e!=="")&&pb(a,_e):typeof _e=="number"&&pb(a,""+_e):b!=="suppressContentEditableWarning"&&b!=="suppressHydrationWarning"&&b!=="autoFocus"&&(ca.hasOwnProperty(b)?_e!=null&&b==="onScroll"&&G("scroll",a):_e!=null&&qa(a,b,_e,_))}switch(d){case"input":Va(a),cb(a,c,!1);break;case"textarea":Va(a),jb(a);break;case"option":c.value!=null&&a.setAttribute("value",""+Sa(c.value));break;case"select":a.multiple=!!c.multiple,b=c.value,b!=null?fb(a,!!c.multiple,b,!1):c.defaultValue!=null&&fb(a,!!c.multiple,c.defaultValue,!0);break;default:typeof h.onClick=="function"&&(a.onclick=jf)}mf(d,c)&&(s.flags|=4)}s.ref!==null&&(s.flags|=128)}return null;case 6:if(a&&s.stateNode!=null)Ei(a,s,a.memoizedProps,c);else{if(typeof c!="string"&&s.stateNode===null)throw Error(y(166));d=dh(ch.current),dh(ah.current),rh(s)?(c=s.stateNode,d=s.memoizedProps,c[wf]=s,c.nodeValue!==d&&(s.flags|=4)):(c=(d.nodeType===9?d:d.ownerDocument).createTextNode(c),c[wf]=s,s.stateNode=c)}return null;case 13:return H(P),c=s.memoizedState,(s.flags&64)!==0?(s.lanes=d,s):(c=c!==null,d=!1,a===null?s.memoizedProps.fallback!==void 0&&rh(s):d=a.memoizedState!==null,c&&!d&&(s.mode&2)!==0&&(a===null&&s.memoizedProps.unstable_avoidThisFallback!==!0||(P.current&1)!==0?V===0&&(V=3):((V===0||V===3)&&(V=4),U===null||(Dg&134217727)===0&&(Hi&134217727)===0||Ii(U,W))),(c||d)&&(s.flags|=4),null);case 4:return fh(),Ci(s),a===null&&cf(s.stateNode.containerInfo),null;case 10:return rg(s),null;case 17:return Ff(s.type)&&Gf(),null;case 19:if(H(P),c=s.memoizedState,c===null)return null;if(b=(s.flags&64)!==0,_=c.rendering,_===null)if(b)Fi(c,!1);else{if(V!==0||a!==null&&(a.flags&64)!==0)for(a=s.child;a!==null;){if(_=ih(a),_!==null){for(s.flags|=64,Fi(c,!1),b=_.updateQueue,b!==null&&(s.updateQueue=b,s.flags|=4),c.lastEffect===null&&(s.firstEffect=null),s.lastEffect=c.lastEffect,c=d,d=s.child;d!==null;)b=d,a=c,b.flags&=2,b.nextEffect=null,b.firstEffect=null,b.lastEffect=null,_=b.alternate,_===null?(b.childLanes=0,b.lanes=a,b.child=null,b.memoizedProps=null,b.memoizedState=null,b.updateQueue=null,b.dependencies=null,b.stateNode=null):(b.childLanes=_.childLanes,b.lanes=_.lanes,b.child=_.child,b.memoizedProps=_.memoizedProps,b.memoizedState=_.memoizedState,b.updateQueue=_.updateQueue,b.type=_.type,a=_.dependencies,b.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),d=d.sibling;return I(P,P.current&1|2),s.child}a=a.sibling}c.tail!==null&&O()>Ji&&(s.flags|=64,b=!0,Fi(c,!1),s.lanes=33554432)}else{if(!b)if(a=ih(_),a!==null){if(s.flags|=64,b=!0,d=a.updateQueue,d!==null&&(s.updateQueue=d,s.flags|=4),Fi(c,!0),c.tail===null&&c.tailMode==="hidden"&&!_.alternate&&!lh)return s=s.lastEffect=c.lastEffect,s!==null&&(s.nextEffect=null),null}else 2*O()-c.renderingStartTime>Ji&&d!==1073741824&&(s.flags|=64,b=!0,Fi(c,!1),s.lanes=33554432);c.isBackwards?(_.sibling=s.child,s.child=_):(d=c.last,d!==null?d.sibling=_:s.child=_,c.last=_)}return c.tail!==null?(d=c.tail,c.rendering=d,c.tail=d.sibling,c.lastEffect=s.lastEffect,c.renderingStartTime=O(),d.sibling=null,s=P.current,I(P,b?s&1|2:s&1),d):null;case 23:case 24:return Ki(),a!==null&&a.memoizedState!==null!=(s.memoizedState!==null)&&c.mode!=="unstable-defer-without-hiding"&&(s.flags|=4),null}throw Error(y(156,s.tag))}function Li(a){switch(a.tag){case 1:Ff(a.type)&&Gf();var s=a.flags;return s&4096?(a.flags=s&-4097|64,a):null;case 3:if(fh(),H(N),H(M),uh(),s=a.flags,(s&64)!==0)throw Error(y(285));return a.flags=s&-4097|64,a;case 5:return hh(a),null;case 13:return H(P),s=a.flags,s&4096?(a.flags=s&-4097|64,a):null;case 19:return H(P),null;case 4:return fh(),null;case 10:return rg(a),null;case 23:case 24:return Ki(),null;default:return null}}function Mi(a,s){try{var d="",c=s;do d+=Qa(c),c=c.return;while(c);var h=d}catch(b){h=`
Error generating stack: `+b.message+`
`+b.stack}return{value:a,source:s,stack:h}}function Ni(a,s){try{console.error(s.value)}catch(d){setTimeout(function(){throw d})}}var Oi=typeof WeakMap=="function"?WeakMap:Map;function Pi(a,s,d){d=zg(-1,d),d.tag=3,d.payload={element:null};var c=s.value;return d.callback=function(){Qi||(Qi=!0,Ri=c),Ni(a,s)},d}function Si(a,s,d){d=zg(-1,d),d.tag=3;var c=a.type.getDerivedStateFromError;if(typeof c=="function"){var h=s.value;d.payload=function(){return Ni(a,s),c(h)}}var b=a.stateNode;return b!==null&&typeof b.componentDidCatch=="function"&&(d.callback=function(){typeof c!="function"&&(Ti===null?Ti=new Set([this]):Ti.add(this),Ni(a,s));var _=s.stack;this.componentDidCatch(s.value,{componentStack:_!==null?_:""})}),d}var Ui=typeof WeakSet=="function"?WeakSet:Set;function Vi(a){var s=a.ref;if(s!==null)if(typeof s=="function")try{s(null)}catch(d){Wi(a,d)}else s.current=null}function Xi(a,s){switch(s.tag){case 0:case 11:case 15:case 22:return;case 1:if(s.flags&256&&a!==null){var d=a.memoizedProps,c=a.memoizedState;a=s.stateNode,s=a.getSnapshotBeforeUpdate(s.elementType===s.type?d:lg(s.type,d),c),a.__reactInternalSnapshotBeforeUpdate=s}return;case 3:s.flags&256&&qf(s.stateNode.containerInfo);return;case 5:case 6:case 4:case 17:return}throw Error(y(163))}function Yi(a,s,d){switch(d.tag){case 0:case 11:case 15:case 22:if(s=d.updateQueue,s=s!==null?s.lastEffect:null,s!==null){a=s=s.next;do{if((a.tag&3)===3){var c=a.create;a.destroy=c()}a=a.next}while(a!==s)}if(s=d.updateQueue,s=s!==null?s.lastEffect:null,s!==null){a=s=s.next;do{var h=a;c=h.next,h=h.tag,(h&4)!==0&&(h&1)!==0&&(Zi(d,a),$i(d,a)),a=c}while(a!==s)}return;case 1:a=d.stateNode,d.flags&4&&(s===null?a.componentDidMount():(c=d.elementType===d.type?s.memoizedProps:lg(d.type,s.memoizedProps),a.componentDidUpdate(c,s.memoizedState,a.__reactInternalSnapshotBeforeUpdate))),s=d.updateQueue,s!==null&&Eg(d,s,a);return;case 3:if(s=d.updateQueue,s!==null){if(a=null,d.child!==null)switch(d.child.tag){case 5:a=d.child.stateNode;break;case 1:a=d.child.stateNode}Eg(d,s,a)}return;case 5:a=d.stateNode,s===null&&d.flags&4&&mf(d.type,d.memoizedProps)&&a.focus();return;case 6:return;case 4:return;case 12:return;case 13:d.memoizedState===null&&(d=d.alternate,d!==null&&(d=d.memoizedState,d!==null&&(d=d.dehydrated,d!==null&&Cc(d))));return;case 19:case 17:case 20:case 21:case 23:case 24:return}throw Error(y(163))}function aj(a,s){for(var d=a;;){if(d.tag===5){var c=d.stateNode;if(s)c=c.style,typeof c.setProperty=="function"?c.setProperty("display","none","important"):c.display="none";else{c=d.stateNode;var h=d.memoizedProps.style;h=h!=null&&h.hasOwnProperty("display")?h.display:null,c.style.display=sb("display",h)}}else if(d.tag===6)d.stateNode.nodeValue=s?"":d.memoizedProps;else if((d.tag!==23&&d.tag!==24||d.memoizedState===null||d===a)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===a)break;for(;d.sibling===null;){if(d.return===null||d.return===a)return;d=d.return}d.sibling.return=d.return,d=d.sibling}}function bj(a,s){if(Mf&&typeof Mf.onCommitFiberUnmount=="function")try{Mf.onCommitFiberUnmount(Lf,s)}catch{}switch(s.tag){case 0:case 11:case 14:case 15:case 22:if(a=s.updateQueue,a!==null&&(a=a.lastEffect,a!==null)){var d=a=a.next;do{var c=d,h=c.destroy;if(c=c.tag,h!==void 0)if((c&4)!==0)Zi(s,d);else{c=s;try{h()}catch(b){Wi(c,b)}}d=d.next}while(d!==a)}break;case 1:if(Vi(s),a=s.stateNode,typeof a.componentWillUnmount=="function")try{a.props=s.memoizedProps,a.state=s.memoizedState,a.componentWillUnmount()}catch(b){Wi(s,b)}break;case 5:Vi(s);break;case 4:cj(a,s)}}function dj(a){a.alternate=null,a.child=null,a.dependencies=null,a.firstEffect=null,a.lastEffect=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.return=null,a.updateQueue=null}function ej(a){return a.tag===5||a.tag===3||a.tag===4}function fj(a){e:{for(var s=a.return;s!==null;){if(ej(s))break e;s=s.return}throw Error(y(160))}var d=s;switch(s=d.stateNode,d.tag){case 5:var c=!1;break;case 3:s=s.containerInfo,c=!0;break;case 4:s=s.containerInfo,c=!0;break;default:throw Error(y(161))}d.flags&16&&(pb(s,""),d.flags&=-17);e:t:for(d=a;;){for(;d.sibling===null;){if(d.return===null||ej(d.return)){d=null;break e}d=d.return}for(d.sibling.return=d.return,d=d.sibling;d.tag!==5&&d.tag!==6&&d.tag!==18;){if(d.flags&2||d.child===null||d.tag===4)continue t;d.child.return=d,d=d.child}if(!(d.flags&2)){d=d.stateNode;break e}}c?gj(a,d,s):hj(a,d,s)}function gj(a,s,d){var c=a.tag,h=c===5||c===6;if(h)a=h?a.stateNode:a.stateNode.instance,s?d.nodeType===8?d.parentNode.insertBefore(a,s):d.insertBefore(a,s):(d.nodeType===8?(s=d.parentNode,s.insertBefore(a,d)):(s=d,s.appendChild(a)),d=d._reactRootContainer,d!=null||s.onclick!==null||(s.onclick=jf));else if(c!==4&&(a=a.child,a!==null))for(gj(a,s,d),a=a.sibling;a!==null;)gj(a,s,d),a=a.sibling}function hj(a,s,d){var c=a.tag,h=c===5||c===6;if(h)a=h?a.stateNode:a.stateNode.instance,s?d.insertBefore(a,s):d.appendChild(a);else if(c!==4&&(a=a.child,a!==null))for(hj(a,s,d),a=a.sibling;a!==null;)hj(a,s,d),a=a.sibling}function cj(a,s){for(var d=s,c=!1,h,b;;){if(!c){c=d.return;e:for(;;){if(c===null)throw Error(y(160));switch(h=c.stateNode,c.tag){case 5:b=!1;break e;case 3:h=h.containerInfo,b=!0;break e;case 4:h=h.containerInfo,b=!0;break e}c=c.return}c=!0}if(d.tag===5||d.tag===6){e:for(var _=a,$=d,_e=$;;)if(bj(_,_e),_e.child!==null&&_e.tag!==4)_e.child.return=_e,_e=_e.child;else{if(_e===$)break e;for(;_e.sibling===null;){if(_e.return===null||_e.return===$)break e;_e=_e.return}_e.sibling.return=_e.return,_e=_e.sibling}b?(_=h,$=d.stateNode,_.nodeType===8?_.parentNode.removeChild($):_.removeChild($)):h.removeChild(d.stateNode)}else if(d.tag===4){if(d.child!==null){h=d.stateNode.containerInfo,b=!0,d.child.return=d,d=d.child;continue}}else if(bj(a,d),d.child!==null){d.child.return=d,d=d.child;continue}if(d===s)break;for(;d.sibling===null;){if(d.return===null||d.return===s)return;d=d.return,d.tag===4&&(c=!1)}d.sibling.return=d.return,d=d.sibling}}function ij(a,s){switch(s.tag){case 0:case 11:case 14:case 15:case 22:var d=s.updateQueue;if(d=d!==null?d.lastEffect:null,d!==null){var c=d=d.next;do(c.tag&3)===3&&(a=c.destroy,c.destroy=void 0,a!==void 0&&a()),c=c.next;while(c!==d)}return;case 1:return;case 5:if(d=s.stateNode,d!=null){c=s.memoizedProps;var h=a!==null?a.memoizedProps:c;a=s.type;var b=s.updateQueue;if(s.updateQueue=null,b!==null){for(d[xf]=c,a==="input"&&c.type==="radio"&&c.name!=null&&$a(d,c),wb(a,h),s=wb(a,c),h=0;h<b.length;h+=2){var _=b[h],$=b[h+1];_==="style"?tb(d,$):_==="dangerouslySetInnerHTML"?ob(d,$):_==="children"?pb(d,$):qa(d,_,$,s)}switch(a){case"input":ab(d,c);break;case"textarea":ib(d,c);break;case"select":a=d._wrapperState.wasMultiple,d._wrapperState.wasMultiple=!!c.multiple,b=c.value,b!=null?fb(d,!!c.multiple,b,!1):a!==!!c.multiple&&(c.defaultValue!=null?fb(d,!!c.multiple,c.defaultValue,!0):fb(d,!!c.multiple,c.multiple?[]:"",!1))}}}return;case 6:if(s.stateNode===null)throw Error(y(162));s.stateNode.nodeValue=s.memoizedProps;return;case 3:d=s.stateNode,d.hydrate&&(d.hydrate=!1,Cc(d.containerInfo));return;case 12:return;case 13:s.memoizedState!==null&&(jj=O(),aj(s.child,!0)),kj(s);return;case 19:kj(s);return;case 17:return;case 23:case 24:aj(s,s.memoizedState!==null);return}throw Error(y(163))}function kj(a){var s=a.updateQueue;if(s!==null){a.updateQueue=null;var d=a.stateNode;d===null&&(d=a.stateNode=new Ui),s.forEach(function(c){var h=lj.bind(null,a,c);d.has(c)||(d.add(c),c.then(h,h))})}}function mj(a,s){return a!==null&&(a=a.memoizedState,a===null||a.dehydrated!==null)?(s=s.memoizedState,s!==null&&s.dehydrated===null):!1}var nj=Math.ceil,oj=ra.ReactCurrentDispatcher,pj=ra.ReactCurrentOwner,X=0,U=null,Y=null,W=0,qj=0,rj=Bf(0),V=0,sj=null,tj=0,Dg=0,Hi=0,uj=0,vj=null,jj=0,Ji=1/0;function wj(){Ji=O()+500}var Z=null,Qi=!1,Ri=null,Ti=null,xj=!1,yj=null,zj=90,Aj=[],Bj=[],Cj=null,Dj=0,Ej=null,Fj=-1,Gj=0,Hj=0,Ij=null,Jj=!1;function Hg(){return(X&48)!==0?O():Fj!==-1?Fj:Fj=O()}function Ig(a){if(a=a.mode,(a&2)===0)return 1;if((a&4)===0)return eg()===99?1:2;if(Gj===0&&(Gj=tj),kg.transition!==0){Hj!==0&&(Hj=vj!==null?vj.pendingLanes:0),a=Gj;var s=4186112&~Hj;return s&=-s,s===0&&(a=4186112&~a,s=a&-a,s===0&&(s=8192)),s}return a=eg(),(X&4)!==0&&a===98?a=Xc(12,Gj):(a=Sc(a),a=Xc(a,Gj)),a}function Jg(a,s,d){if(50<Dj)throw Dj=0,Ej=null,Error(y(185));if(a=Kj(a,s),a===null)return null;$c(a,s,d),a===U&&(Hi|=s,V===4&&Ii(a,W));var c=eg();s===1?(X&8)!==0&&(X&48)===0?Lj(a):(Mj(a,d),X===0&&(wj(),ig())):((X&4)===0||c!==98&&c!==99||(Cj===null?Cj=new Set([a]):Cj.add(a)),Mj(a,d)),vj=a}function Kj(a,s){a.lanes|=s;var d=a.alternate;for(d!==null&&(d.lanes|=s),d=a,a=a.return;a!==null;)a.childLanes|=s,d=a.alternate,d!==null&&(d.childLanes|=s),d=a,a=a.return;return d.tag===3?d.stateNode:null}function Mj(a,s){for(var d=a.callbackNode,c=a.suspendedLanes,h=a.pingedLanes,b=a.expirationTimes,_=a.pendingLanes;0<_;){var $=31-Vc(_),_e=1<<$,tt=b[$];if(tt===-1){if((_e&c)===0||(_e&h)!==0){tt=s,Rc(_e);var rt=F;b[$]=10<=rt?tt+250:6<=rt?tt+5e3:-1}}else tt<=s&&(a.expiredLanes|=_e);_&=~_e}if(c=Uc(a,a===U?W:0),s=F,c===0)d!==null&&(d!==Zf&&Pf(d),a.callbackNode=null,a.callbackPriority=0);else{if(d!==null){if(a.callbackPriority===s)return;d!==Zf&&Pf(d)}s===15?(d=Lj.bind(null,a),ag===null?(ag=[d],bg=Of(Uf,jg)):ag.push(d),d=Zf):s===14?d=hg(99,Lj.bind(null,a)):(d=Tc(s),d=hg(d,Nj.bind(null,a))),a.callbackPriority=s,a.callbackNode=d}}function Nj(a){if(Fj=-1,Hj=Gj=0,(X&48)!==0)throw Error(y(327));var s=a.callbackNode;if(Oj()&&a.callbackNode!==s)return null;var d=Uc(a,a===U?W:0);if(d===0)return null;var c=d,h=X;X|=16;var b=Pj();(U!==a||W!==c)&&(wj(),Qj(a,c));do try{Rj();break}catch($){Sj(a,$)}while(1);if(qg(),oj.current=b,X=h,Y!==null?c=0:(U=null,W=0,c=V),(tj&Hi)!==0)Qj(a,0);else if(c!==0){if(c===2&&(X|=64,a.hydrate&&(a.hydrate=!1,qf(a.containerInfo)),d=Wc(a),d!==0&&(c=Tj(a,d))),c===1)throw s=sj,Qj(a,0),Ii(a,d),Mj(a,O()),s;switch(a.finishedWork=a.current.alternate,a.finishedLanes=d,c){case 0:case 1:throw Error(y(345));case 2:Uj(a);break;case 3:if(Ii(a,d),(d&62914560)===d&&(c=jj+500-O(),10<c)){if(Uc(a,0)!==0)break;if(h=a.suspendedLanes,(h&d)!==d){Hg(),a.pingedLanes|=a.suspendedLanes&h;break}a.timeoutHandle=of$1(Uj.bind(null,a),c);break}Uj(a);break;case 4:if(Ii(a,d),(d&4186112)===d)break;for(c=a.eventTimes,h=-1;0<d;){var _=31-Vc(d);b=1<<_,_=c[_],_>h&&(h=_),d&=~b}if(d=h,d=O()-d,d=(120>d?120:480>d?480:1080>d?1080:1920>d?1920:3e3>d?3e3:4320>d?4320:1960*nj(d/1960))-d,10<d){a.timeoutHandle=of$1(Uj.bind(null,a),d);break}Uj(a);break;case 5:Uj(a);break;default:throw Error(y(329))}}return Mj(a,O()),a.callbackNode===s?Nj.bind(null,a):null}function Ii(a,s){for(s&=~uj,s&=~Hi,a.suspendedLanes|=s,a.pingedLanes&=~s,a=a.expirationTimes;0<s;){var d=31-Vc(s),c=1<<d;a[d]=-1,s&=~c}}function Lj(a){if((X&48)!==0)throw Error(y(327));if(Oj(),a===U&&(a.expiredLanes&W)!==0){var s=W,d=Tj(a,s);(tj&Hi)!==0&&(s=Uc(a,s),d=Tj(a,s))}else s=Uc(a,0),d=Tj(a,s);if(a.tag!==0&&d===2&&(X|=64,a.hydrate&&(a.hydrate=!1,qf(a.containerInfo)),s=Wc(a),s!==0&&(d=Tj(a,s))),d===1)throw d=sj,Qj(a,0),Ii(a,s),Mj(a,O()),d;return a.finishedWork=a.current.alternate,a.finishedLanes=s,Uj(a),Mj(a,O()),null}function Vj(){if(Cj!==null){var a=Cj;Cj=null,a.forEach(function(s){s.expiredLanes|=24&s.pendingLanes,Mj(s,O())})}ig()}function Wj(a,s){var d=X;X|=1;try{return a(s)}finally{X=d,X===0&&(wj(),ig())}}function Xj(a,s){var d=X;X&=-2,X|=8;try{return a(s)}finally{X=d,X===0&&(wj(),ig())}}function ni(a,s){I(rj,qj),qj|=s,tj|=s}function Ki(){qj=rj.current,H(rj)}function Qj(a,s){a.finishedWork=null,a.finishedLanes=0;var d=a.timeoutHandle;if(d!==-1&&(a.timeoutHandle=-1,pf(d)),Y!==null)for(d=Y.return;d!==null;){var c=d;switch(c.tag){case 1:c=c.type.childContextTypes,c!=null&&Gf();break;case 3:fh(),H(N),H(M),uh();break;case 5:hh(c);break;case 4:fh();break;case 13:H(P);break;case 19:H(P);break;case 10:rg(c);break;case 23:case 24:Ki()}d=d.return}U=a,Y=Tg(a.current,null),W=qj=tj=s,V=0,sj=null,uj=Hi=Dg=0}function Sj(a,s){do{var d=Y;try{if(qg(),vh.current=Gh,yh){for(var c=R.memoizedState;c!==null;){var h=c.queue;h!==null&&(h.pending=null),c=c.next}yh=!1}if(xh=0,T=S=R=null,zh=!1,pj.current=null,d===null||d.return===null){V=1,sj=s,Y=null;break}e:{var b=a,_=d.return,$=d,_e=s;if(s=W,$.flags|=2048,$.firstEffect=$.lastEffect=null,_e!==null&&typeof _e=="object"&&typeof _e.then=="function"){var tt=_e;if(($.mode&2)===0){var rt=$.alternate;rt?($.updateQueue=rt.updateQueue,$.memoizedState=rt.memoizedState,$.lanes=rt.lanes):($.updateQueue=null,$.memoizedState=null)}var ot=(P.current&1)!==0,it=_;do{var st;if(st=it.tag===13){var lt=it.memoizedState;if(lt!==null)st=lt.dehydrated!==null;else{var dt=it.memoizedProps;st=dt.fallback===void 0?!1:dt.unstable_avoidThisFallback!==!0?!0:!ot}}if(st){var ut=it.updateQueue;if(ut===null){var ht=new Set;ht.add(tt),it.updateQueue=ht}else ut.add(tt);if((it.mode&2)===0){if(it.flags|=64,$.flags|=16384,$.flags&=-2981,$.tag===1)if($.alternate===null)$.tag=17;else{var nt=zg(-1,1);nt.tag=2,Ag($,nt)}$.lanes|=1;break e}_e=void 0,$=s;var ct=b.pingCache;if(ct===null?(ct=b.pingCache=new Oi,_e=new Set,ct.set(tt,_e)):(_e=ct.get(tt),_e===void 0&&(_e=new Set,ct.set(tt,_e))),!_e.has($)){_e.add($);var mt=Yj.bind(null,b,tt,$);tt.then(mt,mt)}it.flags|=4096,it.lanes=s;break e}it=it.return}while(it!==null);_e=Error((Ra($.type)||"A React component")+` suspended while rendering, but no fallback UI was specified.

Add a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.`)}V!==5&&(V=2),_e=Mi(_e,$),it=_;do{switch(it.tag){case 3:b=_e,it.flags|=4096,s&=-s,it.lanes|=s;var kt=Pi(it,b,s);Bg(it,kt);break e;case 1:b=_e;var Tt=it.type,Pt=it.stateNode;if((it.flags&64)===0&&(typeof Tt.getDerivedStateFromError=="function"||Pt!==null&&typeof Pt.componentDidCatch=="function"&&(Ti===null||!Ti.has(Pt)))){it.flags|=4096,s&=-s,it.lanes|=s;var At=Si(it,b,s);Bg(it,At);break e}}it=it.return}while(it!==null)}Zj(d)}catch(gt){s=gt,Y===d&&d!==null&&(Y=d=d.return);continue}break}while(1)}function Pj(){var a=oj.current;return oj.current=Gh,a===null?Gh:a}function Tj(a,s){var d=X;X|=16;var c=Pj();U===a&&W===s||Qj(a,s);do try{ak();break}catch(h){Sj(a,h)}while(1);if(qg(),X=d,oj.current=c,Y!==null)throw Error(y(261));return U=null,W=0,V}function ak(){for(;Y!==null;)bk(Y)}function Rj(){for(;Y!==null&&!Qf();)bk(Y)}function bk(a){var s=ck(a.alternate,a,qj);a.memoizedProps=a.pendingProps,s===null?Zj(a):Y=s,pj.current=null}function Zj(a){var s=a;do{var d=s.alternate;if(a=s.return,(s.flags&2048)===0){if(d=Gi(d,s,qj),d!==null){Y=d;return}if(d=s,d.tag!==24&&d.tag!==23||d.memoizedState===null||(qj&1073741824)!==0||(d.mode&4)===0){for(var c=0,h=d.child;h!==null;)c|=h.lanes|h.childLanes,h=h.sibling;d.childLanes=c}a!==null&&(a.flags&2048)===0&&(a.firstEffect===null&&(a.firstEffect=s.firstEffect),s.lastEffect!==null&&(a.lastEffect!==null&&(a.lastEffect.nextEffect=s.firstEffect),a.lastEffect=s.lastEffect),1<s.flags&&(a.lastEffect!==null?a.lastEffect.nextEffect=s:a.firstEffect=s,a.lastEffect=s))}else{if(d=Li(s),d!==null){d.flags&=2047,Y=d;return}a!==null&&(a.firstEffect=a.lastEffect=null,a.flags|=2048)}if(s=s.sibling,s!==null){Y=s;return}Y=s=a}while(s!==null);V===0&&(V=5)}function Uj(a){var s=eg();return gg(99,dk.bind(null,a,s)),null}function dk(a,s){do Oj();while(yj!==null);if((X&48)!==0)throw Error(y(327));var d=a.finishedWork;if(d===null)return null;if(a.finishedWork=null,a.finishedLanes=0,d===a.current)throw Error(y(177));a.callbackNode=null;var c=d.lanes|d.childLanes,h=c,b=a.pendingLanes&~h;a.pendingLanes=h,a.suspendedLanes=0,a.pingedLanes=0,a.expiredLanes&=h,a.mutableReadLanes&=h,a.entangledLanes&=h,h=a.entanglements;for(var _=a.eventTimes,$=a.expirationTimes;0<b;){var _e=31-Vc(b),tt=1<<_e;h[_e]=0,_[_e]=-1,$[_e]=-1,b&=~tt}if(Cj!==null&&(c&24)===0&&Cj.has(a)&&Cj.delete(a),a===U&&(Y=U=null,W=0),1<d.flags?d.lastEffect!==null?(d.lastEffect.nextEffect=d,c=d.firstEffect):c=d:c=d.firstEffect,c!==null){if(h=X,X|=32,pj.current=null,kf=fd,_=Ne(),Oe(_)){if("selectionStart"in _)$={start:_.selectionStart,end:_.selectionEnd};else e:if($=($=_.ownerDocument)&&$.defaultView||window,(tt=$.getSelection&&$.getSelection())&&tt.rangeCount!==0){$=tt.anchorNode,b=tt.anchorOffset,_e=tt.focusNode,tt=tt.focusOffset;try{$.nodeType,_e.nodeType}catch{$=null;break e}var rt=0,ot=-1,it=-1,st=0,lt=0,dt=_,ut=null;t:for(;;){for(var ht;dt!==$||b!==0&&dt.nodeType!==3||(ot=rt+b),dt!==_e||tt!==0&&dt.nodeType!==3||(it=rt+tt),dt.nodeType===3&&(rt+=dt.nodeValue.length),(ht=dt.firstChild)!==null;)ut=dt,dt=ht;for(;;){if(dt===_)break t;if(ut===$&&++st===b&&(ot=rt),ut===_e&&++lt===tt&&(it=rt),(ht=dt.nextSibling)!==null)break;dt=ut,ut=dt.parentNode}dt=ht}$=ot===-1||it===-1?null:{start:ot,end:it}}else $=null;$=$||{start:0,end:0}}else $=null;lf={focusedElem:_,selectionRange:$},fd=!1,Ij=null,Jj=!1,Z=c;do try{ek()}catch(gt){if(Z===null)throw Error(y(330));Wi(Z,gt),Z=Z.nextEffect}while(Z!==null);Ij=null,Z=c;do try{for(_=a;Z!==null;){var nt=Z.flags;if(nt&16&&pb(Z.stateNode,""),nt&128){var ct=Z.alternate;if(ct!==null){var mt=ct.ref;mt!==null&&(typeof mt=="function"?mt(null):mt.current=null)}}switch(nt&1038){case 2:fj(Z),Z.flags&=-3;break;case 6:fj(Z),Z.flags&=-3,ij(Z.alternate,Z);break;case 1024:Z.flags&=-1025;break;case 1028:Z.flags&=-1025,ij(Z.alternate,Z);break;case 4:ij(Z.alternate,Z);break;case 8:$=Z,cj(_,$);var kt=$.alternate;dj($),kt!==null&&dj(kt)}Z=Z.nextEffect}}catch(gt){if(Z===null)throw Error(y(330));Wi(Z,gt),Z=Z.nextEffect}while(Z!==null);if(mt=lf,ct=Ne(),nt=mt.focusedElem,_=mt.selectionRange,ct!==nt&&nt&&nt.ownerDocument&&Me(nt.ownerDocument.documentElement,nt)){for(_!==null&&Oe(nt)&&(ct=_.start,mt=_.end,mt===void 0&&(mt=ct),"selectionStart"in nt?(nt.selectionStart=ct,nt.selectionEnd=Math.min(mt,nt.value.length)):(mt=(ct=nt.ownerDocument||document)&&ct.defaultView||window,mt.getSelection&&(mt=mt.getSelection(),$=nt.textContent.length,kt=Math.min(_.start,$),_=_.end===void 0?kt:Math.min(_.end,$),!mt.extend&&kt>_&&($=_,_=kt,kt=$),$=Le(nt,kt),b=Le(nt,_),$&&b&&(mt.rangeCount!==1||mt.anchorNode!==$.node||mt.anchorOffset!==$.offset||mt.focusNode!==b.node||mt.focusOffset!==b.offset)&&(ct=ct.createRange(),ct.setStart($.node,$.offset),mt.removeAllRanges(),kt>_?(mt.addRange(ct),mt.extend(b.node,b.offset)):(ct.setEnd(b.node,b.offset),mt.addRange(ct)))))),ct=[],mt=nt;mt=mt.parentNode;)mt.nodeType===1&&ct.push({element:mt,left:mt.scrollLeft,top:mt.scrollTop});for(typeof nt.focus=="function"&&nt.focus(),nt=0;nt<ct.length;nt++)mt=ct[nt],mt.element.scrollLeft=mt.left,mt.element.scrollTop=mt.top}fd=!!kf,lf=kf=null,a.current=d,Z=c;do try{for(nt=a;Z!==null;){var Tt=Z.flags;if(Tt&36&&Yi(nt,Z.alternate,Z),Tt&128){ct=void 0;var Pt=Z.ref;if(Pt!==null){var At=Z.stateNode;switch(Z.tag){case 5:ct=At;break;default:ct=At}typeof Pt=="function"?Pt(ct):Pt.current=ct}}Z=Z.nextEffect}}catch(gt){if(Z===null)throw Error(y(330));Wi(Z,gt),Z=Z.nextEffect}while(Z!==null);Z=null,$f(),X=h}else a.current=d;if(xj)xj=!1,yj=a,zj=s;else for(Z=c;Z!==null;)s=Z.nextEffect,Z.nextEffect=null,Z.flags&8&&(Tt=Z,Tt.sibling=null,Tt.stateNode=null),Z=s;if(c=a.pendingLanes,c===0&&(Ti=null),c===1?a===Ej?Dj++:(Dj=0,Ej=a):Dj=0,d=d.stateNode,Mf&&typeof Mf.onCommitFiberRoot=="function")try{Mf.onCommitFiberRoot(Lf,d,void 0,(d.current.flags&64)===64)}catch{}if(Mj(a,O()),Qi)throw Qi=!1,a=Ri,Ri=null,a;return(X&8)!==0||ig(),null}function ek(){for(;Z!==null;){var a=Z.alternate;Jj||Ij===null||((Z.flags&8)!==0?dc(Z,Ij)&&(Jj=!0):Z.tag===13&&mj(a,Z)&&dc(Z,Ij)&&(Jj=!0));var s=Z.flags;(s&256)!==0&&Xi(a,Z),(s&512)===0||xj||(xj=!0,hg(97,function(){return Oj(),null})),Z=Z.nextEffect}}function Oj(){if(zj!==90){var a=97<zj?97:zj;return zj=90,gg(a,fk)}return!1}function $i(a,s){Aj.push(s,a),xj||(xj=!0,hg(97,function(){return Oj(),null}))}function Zi(a,s){Bj.push(s,a),xj||(xj=!0,hg(97,function(){return Oj(),null}))}function fk(){if(yj===null)return!1;var a=yj;if(yj=null,(X&48)!==0)throw Error(y(331));var s=X;X|=32;var d=Bj;Bj=[];for(var c=0;c<d.length;c+=2){var h=d[c],b=d[c+1],_=h.destroy;if(h.destroy=void 0,typeof _=="function")try{_()}catch(_e){if(b===null)throw Error(y(330));Wi(b,_e)}}for(d=Aj,Aj=[],c=0;c<d.length;c+=2){h=d[c],b=d[c+1];try{var $=h.create;h.destroy=$()}catch(_e){if(b===null)throw Error(y(330));Wi(b,_e)}}for($=a.current.firstEffect;$!==null;)a=$.nextEffect,$.nextEffect=null,$.flags&8&&($.sibling=null,$.stateNode=null),$=a;return X=s,ig(),!0}function gk(a,s,d){s=Mi(d,s),s=Pi(a,s,1),Ag(a,s),s=Hg(),a=Kj(a,1),a!==null&&($c(a,1,s),Mj(a,s))}function Wi(a,s){if(a.tag===3)gk(a,a,s);else for(var d=a.return;d!==null;){if(d.tag===3){gk(d,a,s);break}else if(d.tag===1){var c=d.stateNode;if(typeof d.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(Ti===null||!Ti.has(c))){a=Mi(s,a);var h=Si(d,a,1);if(Ag(d,h),h=Hg(),d=Kj(d,1),d!==null)$c(d,1,h),Mj(d,h);else if(typeof c.componentDidCatch=="function"&&(Ti===null||!Ti.has(c)))try{c.componentDidCatch(s,a)}catch{}break}}d=d.return}}function Yj(a,s,d){var c=a.pingCache;c!==null&&c.delete(s),s=Hg(),a.pingedLanes|=a.suspendedLanes&d,U===a&&(W&d)===d&&(V===4||V===3&&(W&62914560)===W&&500>O()-jj?Qj(a,0):uj|=d),Mj(a,s)}function lj(a,s){var d=a.stateNode;d!==null&&d.delete(s),s=0,s===0&&(s=a.mode,(s&2)===0?s=1:(s&4)===0?s=eg()===99?1:2:(Gj===0&&(Gj=tj),s=Yc(62914560&~Gj),s===0&&(s=4194304))),d=Hg(),a=Kj(a,s),a!==null&&($c(a,s,d),Mj(a,d))}var ck;ck=function(a,s,d){var c=s.lanes;if(a!==null)if(a.memoizedProps!==s.pendingProps||N.current)ug=!0;else if((d&c)!==0)ug=(a.flags&16384)!==0;else{switch(ug=!1,s.tag){case 3:ri(s),sh();break;case 5:gh(s);break;case 1:Ff(s.type)&&Jf(s);break;case 4:eh(s,s.stateNode.containerInfo);break;case 10:c=s.memoizedProps.value;var h=s.type._context;I(mg,h._currentValue),h._currentValue=c;break;case 13:if(s.memoizedState!==null)return(d&s.child.childLanes)!==0?ti(a,s,d):(I(P,P.current&1),s=hi(a,s,d),s!==null?s.sibling:null);I(P,P.current&1);break;case 19:if(c=(d&s.childLanes)!==0,(a.flags&64)!==0){if(c)return Ai(a,s,d);s.flags|=64}if(h=s.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),I(P,P.current),c)break;return null;case 23:case 24:return s.lanes=0,mi(a,s,d)}return hi(a,s,d)}else ug=!1;switch(s.lanes=0,s.tag){case 2:if(c=s.type,a!==null&&(a.alternate=null,s.alternate=null,s.flags|=2),a=s.pendingProps,h=Ef(s,M.current),tg(s,d),h=Ch(null,s,c,a,h,d),s.flags|=1,typeof h=="object"&&h!==null&&typeof h.render=="function"&&h.$$typeof===void 0){if(s.tag=1,s.memoizedState=null,s.updateQueue=null,Ff(c)){var b=!0;Jf(s)}else b=!1;s.memoizedState=h.state!==null&&h.state!==void 0?h.state:null,xg(s);var _=c.getDerivedStateFromProps;typeof _=="function"&&Gg(s,c,_,a),h.updater=Kg,s.stateNode=h,h._reactInternals=s,Og(s,c,a,d),s=qi(null,s,c,!0,b,d)}else s.tag=0,fi(null,s,h,d),s=s.child;return s;case 16:h=s.elementType;e:{switch(a!==null&&(a.alternate=null,s.alternate=null,s.flags|=2),a=s.pendingProps,b=h._init,h=b(h._payload),s.type=h,b=s.tag=hk(h),a=lg(h,a),b){case 0:s=li(null,s,h,a,d);break e;case 1:s=pi(null,s,h,a,d);break e;case 11:s=gi(null,s,h,a,d);break e;case 14:s=ii(null,s,h,lg(h.type,a),c,d);break e}throw Error(y(306,h,""))}return s;case 0:return c=s.type,h=s.pendingProps,h=s.elementType===c?h:lg(c,h),li(a,s,c,h,d);case 1:return c=s.type,h=s.pendingProps,h=s.elementType===c?h:lg(c,h),pi(a,s,c,h,d);case 3:if(ri(s),c=s.updateQueue,a===null||c===null)throw Error(y(282));if(c=s.pendingProps,h=s.memoizedState,h=h!==null?h.element:null,yg(a,s),Cg(s,c,null,d),c=s.memoizedState.element,c===h)sh(),s=hi(a,s,d);else{if(h=s.stateNode,(b=h.hydrate)&&(kh=rf(s.stateNode.containerInfo.firstChild),jh=s,b=lh=!0),b){if(a=h.mutableSourceEagerHydrationData,a!=null)for(h=0;h<a.length;h+=2)b=a[h],b._workInProgressVersionPrimary=a[h+1],th.push(b);for(d=Zg(s,null,c,d),s.child=d;d;)d.flags=d.flags&-3|1024,d=d.sibling}else fi(a,s,c,d),sh();s=s.child}return s;case 5:return gh(s),a===null&&ph(s),c=s.type,h=s.pendingProps,b=a!==null?a.memoizedProps:null,_=h.children,nf(c,h)?_=null:b!==null&&nf(c,b)&&(s.flags|=16),oi(a,s),fi(a,s,_,d),s.child;case 6:return a===null&&ph(s),null;case 13:return ti(a,s,d);case 4:return eh(s,s.stateNode.containerInfo),c=s.pendingProps,a===null?s.child=Yg(s,null,c,d):fi(a,s,c,d),s.child;case 11:return c=s.type,h=s.pendingProps,h=s.elementType===c?h:lg(c,h),gi(a,s,c,h,d);case 7:return fi(a,s,s.pendingProps,d),s.child;case 8:return fi(a,s,s.pendingProps.children,d),s.child;case 12:return fi(a,s,s.pendingProps.children,d),s.child;case 10:e:{c=s.type._context,h=s.pendingProps,_=s.memoizedProps,b=h.value;var $=s.type._context;if(I(mg,$._currentValue),$._currentValue=b,_!==null)if($=_.value,b=He($,b)?0:(typeof c._calculateChangedBits=="function"?c._calculateChangedBits($,b):1073741823)|0,b===0){if(_.children===h.children&&!N.current){s=hi(a,s,d);break e}}else for($=s.child,$!==null&&($.return=s);$!==null;){var _e=$.dependencies;if(_e!==null){_=$.child;for(var tt=_e.firstContext;tt!==null;){if(tt.context===c&&(tt.observedBits&b)!==0){$.tag===1&&(tt=zg(-1,d&-d),tt.tag=2,Ag($,tt)),$.lanes|=d,tt=$.alternate,tt!==null&&(tt.lanes|=d),sg($.return,d),_e.lanes|=d;break}tt=tt.next}}else _=$.tag===10&&$.type===s.type?null:$.child;if(_!==null)_.return=$;else for(_=$;_!==null;){if(_===s){_=null;break}if($=_.sibling,$!==null){$.return=_.return,_=$;break}_=_.return}$=_}fi(a,s,h.children,d),s=s.child}return s;case 9:return h=s.type,b=s.pendingProps,c=b.children,tg(s,d),h=vg(h,b.unstable_observedBits),c=c(h),s.flags|=1,fi(a,s,c,d),s.child;case 14:return h=s.type,b=lg(h,s.pendingProps),b=lg(h.type,b),ii(a,s,h,b,c,d);case 15:return ki(a,s,s.type,s.pendingProps,c,d);case 17:return c=s.type,h=s.pendingProps,h=s.elementType===c?h:lg(c,h),a!==null&&(a.alternate=null,s.alternate=null,s.flags|=2),s.tag=1,Ff(c)?(a=!0,Jf(s)):a=!1,tg(s,d),Mg(s,c,h),Og(s,c,h,d),qi(null,s,c,!0,a,d);case 19:return Ai(a,s,d);case 23:return mi(a,s,d);case 24:return mi(a,s,d)}throw Error(y(156,s.tag))};function ik(a,s,d,c){this.tag=a,this.key=d,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function nh(a,s,d,c){return new ik(a,s,d,c)}function ji(a){return a=a.prototype,!(!a||!a.isReactComponent)}function hk(a){if(typeof a=="function")return ji(a)?1:0;if(a!=null){if(a=a.$$typeof,a===Aa)return 11;if(a===Da)return 14}return 2}function Tg(a,s){var d=a.alternate;return d===null?(d=nh(a.tag,s,a.key,a.mode),d.elementType=a.elementType,d.type=a.type,d.stateNode=a.stateNode,d.alternate=a,a.alternate=d):(d.pendingProps=s,d.type=a.type,d.flags=0,d.nextEffect=null,d.firstEffect=null,d.lastEffect=null),d.childLanes=a.childLanes,d.lanes=a.lanes,d.child=a.child,d.memoizedProps=a.memoizedProps,d.memoizedState=a.memoizedState,d.updateQueue=a.updateQueue,s=a.dependencies,d.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},d.sibling=a.sibling,d.index=a.index,d.ref=a.ref,d}function Vg(a,s,d,c,h,b){var _=2;if(c=a,typeof a=="function")ji(a)&&(_=1);else if(typeof a=="string")_=5;else e:switch(a){case ua:return Xg(d.children,h,b,s);case Ha:_=8,h|=16;break;case wa:_=8,h|=1;break;case xa:return a=nh(12,d,s,h|8),a.elementType=xa,a.type=xa,a.lanes=b,a;case Ba:return a=nh(13,d,s,h),a.type=Ba,a.elementType=Ba,a.lanes=b,a;case Ca:return a=nh(19,d,s,h),a.elementType=Ca,a.lanes=b,a;case Ia:return vi(d,h,b,s);case Ja:return a=nh(24,d,s,h),a.elementType=Ja,a.lanes=b,a;default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case ya:_=10;break e;case za:_=9;break e;case Aa:_=11;break e;case Da:_=14;break e;case Ea:_=16,c=null;break e;case Fa:_=22;break e}throw Error(y(130,a==null?a:typeof a,""))}return s=nh(_,d,s,h),s.elementType=a,s.type=c,s.lanes=b,s}function Xg(a,s,d,c){return a=nh(7,a,c,s),a.lanes=d,a}function vi(a,s,d,c){return a=nh(23,a,c,s),a.elementType=Ia,a.lanes=d,a}function Ug(a,s,d){return a=nh(6,a,null,s),a.lanes=d,a}function Wg(a,s,d){return s=nh(4,a.children!==null?a.children:[],a.key,s),s.lanes=d,s.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},s}function jk(a,s,d){this.tag=s,this.containerInfo=a,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=d,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=Zc(0),this.expirationTimes=Zc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Zc(0),this.mutableSourceEagerHydrationData=null}function kk(a,s,d){var c=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ta,key:c==null?null:""+c,children:a,containerInfo:s,implementation:d}}function lk(a,s,d,c){var h=s.current,b=Hg(),_=Ig(h);e:if(d){d=d._reactInternals;t:{if(Zb(d)!==d||d.tag!==1)throw Error(y(170));var $=d;do{switch($.tag){case 3:$=$.stateNode.context;break t;case 1:if(Ff($.type)){$=$.stateNode.__reactInternalMemoizedMergedChildContext;break t}}$=$.return}while($!==null);throw Error(y(171))}if(d.tag===1){var _e=d.type;if(Ff(_e)){d=If(d,_e,$);break e}}d=$}else d=Cf;return s.context===null?s.context=d:s.pendingContext=d,s=zg(b,_),s.payload={element:a},c=c===void 0?null:c,c!==null&&(s.callback=c),Ag(h,s),Jg(h,_,b),_}function mk(a){if(a=a.current,!a.child)return null;switch(a.child.tag){case 5:return a.child.stateNode;default:return a.child.stateNode}}function nk(a,s){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var d=a.retryLane;a.retryLane=d!==0&&d<s?d:s}}function ok(a,s){nk(a,s),(a=a.alternate)&&nk(a,s)}function pk(){return null}function qk(a,s,d){var c=d!=null&&d.hydrationOptions!=null&&d.hydrationOptions.mutableSources||null;if(d=new jk(a,s,d!=null&&d.hydrate===!0),s=nh(3,null,null,s===2?7:s===1?3:0),d.current=s,s.stateNode=d,xg(s),a[ff]=d.current,cf(a.nodeType===8?a.parentNode:a),c)for(a=0;a<c.length;a++){s=c[a];var h=s._getVersion;h=h(s._source),d.mutableSourceEagerHydrationData==null?d.mutableSourceEagerHydrationData=[s,h]:d.mutableSourceEagerHydrationData.push(s,h)}this._internalRoot=d}qk.prototype.render=function(a){lk(a,this._internalRoot,null,null)};qk.prototype.unmount=function(){var a=this._internalRoot,s=a.containerInfo;lk(null,a,null,function(){s[ff]=null})};function rk(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11&&(a.nodeType!==8||a.nodeValue!==" react-mount-point-unstable "))}function sk(a,s){if(s||(s=a?a.nodeType===9?a.documentElement:a.firstChild:null,s=!(!s||s.nodeType!==1||!s.hasAttribute("data-reactroot"))),!s)for(var d;d=a.lastChild;)a.removeChild(d);return new qk(a,0,s?{hydrate:!0}:void 0)}function tk(a,s,d,c,h){var b=d._reactRootContainer;if(b){var _=b._internalRoot;if(typeof h=="function"){var $=h;h=function(){var tt=mk(_);$.call(tt)}}lk(s,_,a,h)}else{if(b=d._reactRootContainer=sk(d,c),_=b._internalRoot,typeof h=="function"){var _e=h;h=function(){var tt=mk(_);_e.call(tt)}}Xj(function(){lk(s,_,a,h)})}return mk(_)}ec=function(a){if(a.tag===13){var s=Hg();Jg(a,4,s),ok(a,4)}};fc=function(a){if(a.tag===13){var s=Hg();Jg(a,67108864,s),ok(a,67108864)}};gc=function(a){if(a.tag===13){var s=Hg(),d=Ig(a);Jg(a,d,s),ok(a,d)}};hc=function(a,s){return s()};yb=function(a,s,d){switch(s){case"input":if(ab(a,d),s=d.name,d.type==="radio"&&s!=null){for(d=a;d.parentNode;)d=d.parentNode;for(d=d.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<d.length;s++){var c=d[s];if(c!==a&&c.form===a.form){var h=Db(c);if(!h)throw Error(y(90));Wa(c),ab(c,h)}}}break;case"textarea":ib(a,d);break;case"select":s=d.value,s!=null&&fb(a,!!d.multiple,s,!1)}};Gb=Wj;Hb=function(a,s,d,c,h){var b=X;X|=4;try{return gg(98,a.bind(null,s,d,c,h))}finally{X=b,X===0&&(wj(),ig())}};Ib=function(){(X&49)===0&&(Vj(),Oj())};Jb=function(a,s){var d=X;X|=2;try{return a(s)}finally{X=d,X===0&&(wj(),ig())}};function uk(a,s){var d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!rk(s))throw Error(y(200));return kk(a,s,null,d)}var vk={Events:[Cb,ue,Db,Eb,Fb,Oj,{current:!1}]},wk={findFiberByHostInstance:wc,bundleType:0,version:"17.0.2",rendererPackageName:"react-dom"},xk={bundleType:wk.bundleType,version:wk.version,rendererPackageName:wk.rendererPackageName,rendererConfig:wk.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ra.ReactCurrentDispatcher,findHostInstanceByFiber:function(a){return a=cc(a),a===null?null:a.stateNode},findFiberByHostInstance:wk.findFiberByHostInstance||pk,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__!="undefined"){var yk=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!yk.isDisabled&&yk.supportsFiber)try{Lf=yk.inject(xk),Mf=yk}catch{}}reactDom_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=vk;reactDom_production_min.createPortal=uk;reactDom_production_min.findDOMNode=function(a){if(a==null)return null;if(a.nodeType===1)return a;var s=a._reactInternals;if(s===void 0)throw typeof a.render=="function"?Error(y(188)):Error(y(268,Object.keys(a)));return a=cc(s),a=a===null?null:a.stateNode,a};reactDom_production_min.flushSync=function(a,s){var d=X;if((d&48)!==0)return a(s);X|=1;try{if(a)return gg(99,a.bind(null,s))}finally{X=d,ig()}};reactDom_production_min.hydrate=function(a,s,d){if(!rk(s))throw Error(y(200));return tk(null,a,s,!0,d)};reactDom_production_min.render=function(a,s,d){if(!rk(s))throw Error(y(200));return tk(null,a,s,!1,d)};reactDom_production_min.unmountComponentAtNode=function(a){if(!rk(a))throw Error(y(40));return a._reactRootContainer?(Xj(function(){tk(null,null,a,!1,function(){a._reactRootContainer=null,a[ff]=null})}),!0):!1};reactDom_production_min.unstable_batchedUpdates=Wj;reactDom_production_min.unstable_createPortal=function(a,s){return uk(a,s,2<arguments.length&&arguments[2]!==void 0?arguments[2]:null)};reactDom_production_min.unstable_renderSubtreeIntoContainer=function(a,s,d,c){if(!rk(d))throw Error(y(200));if(a==null||a._reactInternals===void 0)throw Error(y(38));return tk(a,s,d,!1,c)};reactDom_production_min.version="17.0.2";function checkDCE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__=="undefined"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(checkDCE)}catch(a){console.error(a)}}checkDCE(),reactDom.exports=reactDom_production_min;var ReactDOM=reactDom.exports;const RoomParticipant$1={name:"LS-Room-Participant",sourceType:"RoomParticipant",props:{isMuted:{type:Boolean,required:!1,default:!1},volume:{type:Number,required:!1,default:1}},useSource(a,s){return a.find(d=>isMatch(d.props,s.sourceProps))},create({onUpdate:a,onNewSource:s,onRemove:d},c){const h=document.createElement("div"),b=getProject(CoreContext.state.activeProjectId),_=getProjectRoom(CoreContext.state.activeProjectId);Object.assign(h.style,{position:"relative"});let $,_e=c;const tt=(it,st)=>{const lt=it/st.width;return lt>=.5?3:lt>.25?2:lt>.15?1:0},rt=({props:it,source:st})=>{var Tt,Pt,At;const lt=react.exports.useRef(),{volume:dt=1,isHidden:ut=!1}=it||{},[ht,nt]=react.exports.useState(0),mt=(st==null?void 0:st.id)===(_==null?void 0:_.participantId)||((Tt=st==null?void 0:st.props)==null?void 0:Tt.participantId)===(_==null?void 0:_.participantId)||(it==null?void 0:it.isMuted),kt=!(it!=null&&it.isHidden)&&((Pt=st==null?void 0:st.props)==null?void 0:Pt.videoEnabled);return react.exports.useEffect(()=>{!lt.current||(lt.current.play().catch(gt=>{document.addEventListener("click",()=>{var Ct;return(Ct=lt.current)==null?void 0:Ct.play()},{once:!0})}),(st==null?void 0:st.value)&&(st==null?void 0:st.value)!==lt.current.srcObject?lt.current.srcObject=st==null?void 0:st.value:st!=null&&st.value||(lt.current.srcObject=null))},[lt.current,st==null?void 0:st.value]),react.exports.useEffect(()=>{!it&&lt.current&&(lt.current.srcObject=null,lt.current=null)},[it]),react.exports.useLayoutEffect(()=>{if(!lt.current)return;const gt=()=>{const Nt=lt.current;Nt&&nt(tt(Nt.clientWidth,{width:b.compositor.getRoot().props.size.x,height:b.compositor.getRoot().props.size.y}))},Ct=new ResizeObserver(Nt=>{gt()});return gt(),Ct==null||Ct.observe(lt.current),()=>{lt.current&&(Ct==null||Ct.unobserve(lt.current),lt.current.srcObject=null)}},[lt.current,b]),react.exports.useEffect(()=>{!lt.current||(lt.current.volume=dt)},[lt.current,dt]),React.createElement("div",{style:{position:"relative",display:"flex",height:"100%",width:"100%"}},React.createElement("div",{style:{background:"#222",position:"absolute",height:"100%",width:"100%",fontSize:"43px",color:"rgba(255,255,255,0.6)",display:"flex",alignItems:"center",justifyContent:"center",opacity:kt?"0":"1"}},(st==null?void 0:st.props.displayName)&&React.createElement("div",{style:{borderRadius:"50%",background:"#555",width:"70px",height:"70px",textTransform:"uppercase",display:"flex",alignItems:"center",justifyContent:"center",lineHeight:"1em"}},(st==null?void 0:st.props.displayName.slice(0,1))||"")),React.createElement("div",{style:{position:"relative",display:"flex",height:"100%",width:"100%",...Boolean((At=st==null?void 0:st.props)==null?void 0:At.mirrored)&&{transform:"scaleX(-1)"}}},React.createElement("video",{ref:lt,autoPlay:!0,muted:mt,disablePictureInPicture:!0,playsInline:!0,style:{left:"50%",top:"50%",position:"relative",transform:"translate3d(-50%, -50%, 0)",height:"100%",opacity:kt?"1":"0",objectFit:(st==null?void 0:st.props.type)==="screen"?"contain":"cover",background:"rgba(0,0,0,0.6)"}})),(st==null?void 0:st.props.displayName)&&React.createElement("div",{className:"NameBannerContainer",style:{width:"100%",height:"100%",position:"absolute"}},React.createElement("div",{className:"NameBanner","data-size":ht,style:{padding:"12px 30px",width:"fit-content",height:"fit-content",top:"100%",transform:"translateY(-100%)",left:0}},React.createElement("div",{className:"NameBanner-body"},st.props.displayName))))},ot=()=>ReactDOM.render(React.createElement(rt,{source:$,props:_e}),h);return a(it=>{_e=it,ot()}),s(it=>{$=it,ot()}),d(it=>{_e=it,ot()}),{root:h}}},Square={name:"LS-Square",props:{color:{default:"green"}},create({onUpdate:a}){const s=document.createElement("div");return a(({color:d})=>{Object.assign(s.style,{width:"100%",height:"100%",background:d||"red"})}),{root:s}}},Image$1={name:"LS-Image",props:{src:{},fit:{}},create({onUpdate:a}){const s=document.createElement("img");return a(({src:d,fit:c})=>{s.setAttribute("src",d),Object.assign(s.style,{width:"100%",height:"100%",objectFit:c})}),{root:s}}},Element={name:"Element",sourceType:"Element",create({onUpdate:a},{tagName:s}){const d=document.createElement(s);return a(({tagName:c,attributes:h={},fields:b={}})=>{c==="img"?(d==null?void 0:d.src)!==h.src&&Object.keys(h).forEach(_=>{d.setAttribute(_,h[_])}):Object.keys(h).forEach(_=>{d.setAttribute(_,h[_])}),Object.keys(b).forEach(_=>{Object.assign(d[_],b[_])})}),{root:d}}},Video={name:"LS-Video",sourceType:"LS-Video",create({onUpdate:a,onEvent:s,onRemove:d}){d(()=>{clearInterval(h)});const c=document.createElement("video");let h;return a(({attributes:b={},fields:_={},sourceProps:$={},id:_e})=>{(c.src!==b.src||c.id!==b.id&&b.id)&&(h&&clearInterval(h),Object.keys(b).forEach(tt=>{c.setAttribute(tt,b[tt])}),c.onloadedmetadata=()=>{b.muted?(c.muted=!0,c.play()):c.muted=!1},h=setInterval(()=>{if(c.duration){const tt=c.duration-c.currentTime;trigger$1("VideoTimeUpdate",{category:_e,id:$==null?void 0:$.id,time:Math.floor(tt)})}},1e3),c.loop=Boolean(b.loop),c.onended=()=>{h&&clearInterval(h),trigger$1("VideoEnded",{id:$==null?void 0:$.id,category:_e})},Object.keys(_).forEach(tt=>{Object.assign(c[tt],_[tt])}))}),{root:c}}},Banner$1={name:"LS-Banner",sourceType:"Banner",props:{bannerId:{type:String,required:!0}},useSource(a,s){return a.find(d=>d.id===s.bannerId)},create({onUpdate:a,onNewSource:s},d){const c=document.createElement("div");let h,b,_;const $=({currentSource:tt,latestSource:rt})=>{const[ot,it]=react.exports.useState(!1),{headerText:st,bodyText:lt}=(rt==null?void 0:rt.value)||{};return react.exports.useEffect(()=>{window.setTimeout(()=>{it(Boolean(tt))}),tt||it(!1)},[tt]),React.createElement("div",{className:"BannerContainer",style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",display:"flex",flexDirection:"row",justifyContent:"flex-start",alignItems:"flex-end",transition:"200ms ease all",...ot?{zIndex:2,opacity:1,transform:"translateX(0)"}:{zIndex:1,opacity:0,transform:"translateX(-200px)"}}},React.createElement("div",{className:"Banner",style:{padding:10,background:"orange",width:"fit-content",height:"fit-content",maxWidth:"84%",position:"relative"}},st&&React.createElement("div",{className:"Banner-header",style:{marginBottom:6}},st),lt&&React.createElement("div",{className:"Banner-body"},lt)))},_e=()=>ReactDOM.render(React.createElement(React.Fragment,null,_&&_.id!==b.id&&React.createElement($,{key:_==null?void 0:_.id,currentSource:null,latestSource:_}),React.createElement($,{key:b==null?void 0:b.id,currentSource:h,latestSource:b})),c);return a(()=>{_e()}),s(tt=>{_=h,h=tt,h&&(b=h),_e()}),{root:c}}};function _extends(){return _extends=Object.assign?Object.assign.bind():function(a){for(var s=1;s<arguments.length;s++){var d=arguments[s];for(var c in d)Object.prototype.hasOwnProperty.call(d,c)&&(a[c]=d[c])}return a},_extends.apply(this,arguments)}function _objectWithoutPropertiesLoose(a,s){if(a==null)return{};var d={},c=Object.keys(a),h,b;for(b=0;b<c.length;b++)h=c[b],!(s.indexOf(h)>=0)&&(d[h]=a[h]);return d}function _setPrototypeOf(a,s){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(c,h){return c.__proto__=h,c},_setPrototypeOf(a,s)}function _inheritsLoose(a,s){a.prototype=Object.create(s.prototype),a.prototype.constructor=a,_setPrototypeOf(a,s)}function hasClass(a,s){return a.classList?!!s&&a.classList.contains(s):(" "+(a.className.baseVal||a.className)+" ").indexOf(" "+s+" ")!==-1}function addClass(a,s){a.classList?a.classList.add(s):hasClass(a,s)||(typeof a.className=="string"?a.className=a.className+" "+s:a.setAttribute("class",(a.className&&a.className.baseVal||"")+" "+s))}function replaceClassName(a,s){return a.replace(new RegExp("(^|\\s)"+s+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function removeClass$1(a,s){a.classList?a.classList.remove(s):typeof a.className=="string"?a.className=replaceClassName(a.className,s):a.setAttribute("class",replaceClassName(a.className&&a.className.baseVal||"",s))}var config={disabled:!1},TransitionGroupContext=React.createContext(null),UNMOUNTED="unmounted",EXITED="exited",ENTERING="entering",ENTERED="entered",EXITING="exiting",Transition=function(a){_inheritsLoose(s,a);function s(c,h){var b;b=a.call(this,c,h)||this;var _=h,$=_&&!_.isMounting?c.enter:c.appear,_e;return b.appearStatus=null,c.in?$?(_e=EXITED,b.appearStatus=ENTERING):_e=ENTERED:c.unmountOnExit||c.mountOnEnter?_e=UNMOUNTED:_e=EXITED,b.state={status:_e},b.nextCallback=null,b}s.getDerivedStateFromProps=function(h,b){var _=h.in;return _&&b.status===UNMOUNTED?{status:EXITED}:null};var d=s.prototype;return d.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},d.componentDidUpdate=function(h){var b=null;if(h!==this.props){var _=this.state.status;this.props.in?_!==ENTERING&&_!==ENTERED&&(b=ENTERING):(_===ENTERING||_===ENTERED)&&(b=EXITING)}this.updateStatus(!1,b)},d.componentWillUnmount=function(){this.cancelNextCallback()},d.getTimeouts=function(){var h=this.props.timeout,b,_,$;return b=_=$=h,h!=null&&typeof h!="number"&&(b=h.exit,_=h.enter,$=h.appear!==void 0?h.appear:_),{exit:b,enter:_,appear:$}},d.updateStatus=function(h,b){h===void 0&&(h=!1),b!==null?(this.cancelNextCallback(),b===ENTERING?this.performEnter(h):this.performExit()):this.props.unmountOnExit&&this.state.status===EXITED&&this.setState({status:UNMOUNTED})},d.performEnter=function(h){var b=this,_=this.props.enter,$=this.context?this.context.isMounting:h,_e=this.props.nodeRef?[$]:[ReactDOM.findDOMNode(this),$],tt=_e[0],rt=_e[1],ot=this.getTimeouts(),it=$?ot.appear:ot.enter;if(!h&&!_||config.disabled){this.safeSetState({status:ENTERED},function(){b.props.onEntered(tt)});return}this.props.onEnter(tt,rt),this.safeSetState({status:ENTERING},function(){b.props.onEntering(tt,rt),b.onTransitionEnd(it,function(){b.safeSetState({status:ENTERED},function(){b.props.onEntered(tt,rt)})})})},d.performExit=function(){var h=this,b=this.props.exit,_=this.getTimeouts(),$=this.props.nodeRef?void 0:ReactDOM.findDOMNode(this);if(!b||config.disabled){this.safeSetState({status:EXITED},function(){h.props.onExited($)});return}this.props.onExit($),this.safeSetState({status:EXITING},function(){h.props.onExiting($),h.onTransitionEnd(_.exit,function(){h.safeSetState({status:EXITED},function(){h.props.onExited($)})})})},d.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},d.safeSetState=function(h,b){b=this.setNextCallback(b),this.setState(h,b)},d.setNextCallback=function(h){var b=this,_=!0;return this.nextCallback=function($){_&&(_=!1,b.nextCallback=null,h($))},this.nextCallback.cancel=function(){_=!1},this.nextCallback},d.onTransitionEnd=function(h,b){this.setNextCallback(b);var _=this.props.nodeRef?this.props.nodeRef.current:ReactDOM.findDOMNode(this),$=h==null&&!this.props.addEndListener;if(!_||$){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var _e=this.props.nodeRef?[this.nextCallback]:[_,this.nextCallback],tt=_e[0],rt=_e[1];this.props.addEndListener(tt,rt)}h!=null&&setTimeout(this.nextCallback,h)},d.render=function(){var h=this.state.status;if(h===UNMOUNTED)return null;var b=this.props,_=b.children;b.in,b.mountOnEnter,b.unmountOnExit,b.appear,b.enter,b.exit,b.timeout,b.addEndListener,b.onEnter,b.onEntering,b.onEntered,b.onExit,b.onExiting,b.onExited,b.nodeRef;var $=_objectWithoutPropertiesLoose(b,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return React.createElement(TransitionGroupContext.Provider,{value:null},typeof _=="function"?_(h,$):React.cloneElement(React.Children.only(_),$))},s}(React.Component);Transition.contextType=TransitionGroupContext;Transition.propTypes={};function noop(){}Transition.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:noop,onEntering:noop,onEntered:noop,onExit:noop,onExiting:noop,onExited:noop};Transition.UNMOUNTED=UNMOUNTED;Transition.EXITED=EXITED;Transition.ENTERING=ENTERING;Transition.ENTERED=ENTERED;Transition.EXITING=EXITING;var Transition$1=Transition,_addClass=function a(s,d){return s&&d&&d.split(" ").forEach(function(c){return addClass(s,c)})},removeClass=function a(s,d){return s&&d&&d.split(" ").forEach(function(c){return removeClass$1(s,c)})},CSSTransition=function(a){_inheritsLoose(s,a);function s(){for(var c,h=arguments.length,b=new Array(h),_=0;_<h;_++)b[_]=arguments[_];return c=a.call.apply(a,[this].concat(b))||this,c.appliedClasses={appear:{},enter:{},exit:{}},c.onEnter=function($,_e){var tt=c.resolveArguments($,_e),rt=tt[0],ot=tt[1];c.removeClasses(rt,"exit"),c.addClass(rt,ot?"appear":"enter","base"),c.props.onEnter&&c.props.onEnter($,_e)},c.onEntering=function($,_e){var tt=c.resolveArguments($,_e),rt=tt[0],ot=tt[1],it=ot?"appear":"enter";c.addClass(rt,it,"active"),c.props.onEntering&&c.props.onEntering($,_e)},c.onEntered=function($,_e){var tt=c.resolveArguments($,_e),rt=tt[0],ot=tt[1],it=ot?"appear":"enter";c.removeClasses(rt,it),c.addClass(rt,it,"done"),c.props.onEntered&&c.props.onEntered($,_e)},c.onExit=function($){var _e=c.resolveArguments($),tt=_e[0];c.removeClasses(tt,"appear"),c.removeClasses(tt,"enter"),c.addClass(tt,"exit","base"),c.props.onExit&&c.props.onExit($)},c.onExiting=function($){var _e=c.resolveArguments($),tt=_e[0];c.addClass(tt,"exit","active"),c.props.onExiting&&c.props.onExiting($)},c.onExited=function($){var _e=c.resolveArguments($),tt=_e[0];c.removeClasses(tt,"exit"),c.addClass(tt,"exit","done"),c.props.onExited&&c.props.onExited($)},c.resolveArguments=function($,_e){return c.props.nodeRef?[c.props.nodeRef.current,$]:[$,_e]},c.getClassNames=function($){var _e=c.props.classNames,tt=typeof _e=="string",rt=tt&&_e?_e+"-":"",ot=tt?""+rt+$:_e[$],it=tt?ot+"-active":_e[$+"Active"],st=tt?ot+"-done":_e[$+"Done"];return{baseClassName:ot,activeClassName:it,doneClassName:st}},c}var d=s.prototype;return d.addClass=function(h,b,_){var $=this.getClassNames(b)[_+"ClassName"],_e=this.getClassNames("enter"),tt=_e.doneClassName;b==="appear"&&_==="done"&&tt&&($+=" "+tt),_==="active"&&h&&h.scrollTop,$&&(this.appliedClasses[b][_]=$,_addClass(h,$))},d.removeClasses=function(h,b){var _=this.appliedClasses[b],$=_.base,_e=_.active,tt=_.done;this.appliedClasses[b]={},$&&removeClass(h,$),_e&&removeClass(h,_e),tt&&removeClass(h,tt)},d.render=function(){var h=this.props;h.classNames;var b=_objectWithoutPropertiesLoose(h,["classNames"]);return React.createElement(Transition$1,_extends({},b,{onEnter:this.onEnter,onEntered:this.onEntered,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}))},s}(React.Component);CSSTransition.defaultProps={classNames:""};CSSTransition.propTypes={};var CSSTransition$1=CSSTransition,_leaveRenders,_enterRenders;function areChildrenDifferent(a,s){return!(a===s||React.isValidElement(a)&&React.isValidElement(s)&&a.key!=null&&a.key===s.key)}var modes={out:"out-in",in:"in-out"},callHook=function a(s,d,c){return function(){var h;s.props[d]&&(h=s.props)[d].apply(h,arguments),c()}},leaveRenders=(_leaveRenders={},_leaveRenders[modes.out]=function(a){var s=a.current,d=a.changeState;return React.cloneElement(s,{in:!1,onExited:callHook(s,"onExited",function(){d(ENTERING,null)})})},_leaveRenders[modes.in]=function(a){var s=a.current,d=a.changeState,c=a.children;return[s,React.cloneElement(c,{in:!0,onEntered:callHook(c,"onEntered",function(){d(ENTERING)})})]},_leaveRenders),enterRenders=(_enterRenders={},_enterRenders[modes.out]=function(a){var s=a.children,d=a.changeState;return React.cloneElement(s,{in:!0,onEntered:callHook(s,"onEntered",function(){d(ENTERED,React.cloneElement(s,{in:!0}))})})},_enterRenders[modes.in]=function(a){var s=a.current,d=a.children,c=a.changeState;return[React.cloneElement(s,{in:!1,onExited:callHook(s,"onExited",function(){c(ENTERED,React.cloneElement(d,{in:!0}))})}),React.cloneElement(d,{in:!0})]},_enterRenders),SwitchTransition=function(a){_inheritsLoose(s,a);function s(){for(var c,h=arguments.length,b=new Array(h),_=0;_<h;_++)b[_]=arguments[_];return c=a.call.apply(a,[this].concat(b))||this,c.state={status:ENTERED,current:null},c.appeared=!1,c.changeState=function($,_e){_e===void 0&&(_e=c.state.current),c.setState({status:$,current:_e})},c}var d=s.prototype;return d.componentDidMount=function(){this.appeared=!0},s.getDerivedStateFromProps=function(h,b){return h.children==null?{current:null}:b.status===ENTERING&&h.mode===modes.in?{status:ENTERING}:b.current&&areChildrenDifferent(b.current,h.children)?{status:EXITING}:{current:React.cloneElement(h.children,{in:!0})}},d.render=function(){var h=this.props,b=h.children,_=h.mode,$=this.state,_e=$.status,tt=$.current,rt={children:b,current:tt,changeState:this.changeState,status:_e},ot;switch(_e){case ENTERING:ot=enterRenders[_](rt);break;case EXITING:ot=leaveRenders[_](rt);break;case ENTERED:ot=tt}return React.createElement(TransitionGroupContext.Provider,{value:{isMounting:!this.appeared}},ot)},s}(React.Component);SwitchTransition.propTypes={};SwitchTransition.defaultProps={mode:modes.out};var SwitchTransition$1=SwitchTransition;const Animations={"fade-in":".fade-in{-webkit-animation:fade-in;animation:fade-in}@-webkit-keyframes fade-in{0%{opacity:0}100%{opacity:1}}@keyframes fade-in{0%{opacity:0}100%{opacity:1}}","fade-out":".fade-out{-webkit-animation:fade-out;animation:fade-out}@-webkit-keyframes fade-out{0%{opacity:1}100%{opacity:0}}@keyframes fade-out{0%{opacity:1}100%{opacity:0}}","slide-in-blurred-top":".slide-in-blurred-top{-webkit-animation:slide-in-blurred-top .6s cubic-bezier(.23,1.000,.32,1.000) both;animation:slide-in-blurred-top .6s cubic-bezier(.23,1.000,.32,1.000) both}@-webkit-keyframes slide-in-blurred-top{0%{-webkit-transform:translateY(-1000px) scaleY(2.5) scaleX(.2);transform:translateY(-1000px) scaleY(2.5) scaleX(.2);-webkit-transform-origin:50% 0;transform-origin:50% 0;-webkit-filter:blur(40px);filter:blur(40px);opacity:0}100%{-webkit-transform:translateY(0) scaleY(1) scaleX(1);transform:translateY(0) scaleY(1) scaleX(1);-webkit-transform-origin:50% 50%;transform-origin:50% 50%;-webkit-filter:blur(0);filter:blur(0);opacity:1}}@keyframes slide-in-blurred-top{0%{-webkit-transform:translateY(-1000px) scaleY(2.5) scaleX(.2);transform:translateY(-1000px) scaleY(2.5) scaleX(.2);-webkit-transform-origin:50% 0;transform-origin:50% 0;-webkit-filter:blur(40px);filter:blur(40px);opacity:0}100%{-webkit-transform:translateY(0) scaleY(1) scaleX(1);transform:translateY(0) scaleY(1) scaleX(1);-webkit-transform-origin:50% 50%;transform-origin:50% 50%;-webkit-filter:blur(0);filter:blur(0);opacity:1}}","slide-in-left":".slide-in-left{-webkit-animation:slide-in-left .5s cubic-bezier(.25,.46,.45,.94) both;animation:slide-in-left .5s cubic-bezier(.25,.46,.45,.94) both}@-webkit-keyframes slide-in-left{0%{-webkit-transform:translateX(-1000px);transform:translateX(-1000px);opacity:0}100%{-webkit-transform:translateX(0);transform:translateX(0);opacity:1}}@keyframes slide-in-left{0%{-webkit-transform:translateX(-1000px);transform:translateX(-1000px);opacity:0}100%{-webkit-transform:translateX(0);transform:translateX(0);opacity:1}}","slide-out-left":".slide-out-left{-webkit-animation:slide-out-left .5s cubic-bezier(.55,.085,.68,.53) both;animation:slide-out-left .5s cubic-bezier(.55,.085,.68,.53) both}@-webkit-keyframes slide-out-left{0%{-webkit-transform:translateX(0);transform:translateX(0);opacity:1}100%{-webkit-transform:translateX(-1000px);transform:translateX(-1000px);opacity:0}}@keyframes slide-out-left{0%{-webkit-transform:translateX(0);transform:translateX(0);opacity:1}100%{-webkit-transform:translateX(-1000px);transform:translateX(-1000px);opacity:0}}"},APIKitAnimation=a=>{const{enter:s,exit:d,children:c,tag:h="div",direction:b="normal",duration:_=500,id:$,type:_e}=a,tt=$?`${_e}-${$}`:`${_e}-api-kit-animation`;return React.createElement("div",{style:{height:"100%",width:"100%"}},React.createElement("style",{dangerouslySetInnerHTML:{__html:renderStyle(_e,s,d,_,b)}}),React.createElement(SwitchTransition$1,{mode:"out-in"},React.createElement(CSSTransition$1,{key:tt,addEndListener:(rt,ot)=>{rt.addEventListener("transitionend",ot,!1)},classNames:{enter:`${_e}-default-enter`,enterActive:s,exit:`${_e}-default-leave`,exitActive:d},timeout:_},React.createElement("div",{style:{height:"100%",width:"100%"}},c))))},renderStyle=(a,s,d,c,h)=>`
        body {
          margin: 0;
          padding: 0;
        }
        
        ${Animations[s]}
        
        ${Animations[d]}

        .${a}-transition {
          transition: opacity ${c}ms ease-out};
        }

        .${a}-default-enter {
          opacity: 0;
        }

        .${a}-default-enter.${s} {
          animation-direction: ${h};
          animation-duration: ${c/1e3}s;
          animation-fill-mode: both;
          animation-timing-function: ease-out;
        }

        .${a}-default-leave {
          opacity: 1;
        }

        .${a}-default-leave.${d} {
          animation-direction: ${h};
          animation-duration: ${c/1e3}s;
          animation-timing-function: ease-out;
          animation-fill-mode: both;
        }
        `;var APIKitAnimationTypes=(a=>(a.FADE_IN="fade-in",a.FADE_OUT="fade-out",a.SLIDE_IN_BLURRED_TOP="slide-in-blurred-top",a.SLIDE_IN_LEFT="slide-in-left",a.SLIDE_OUT_LEFT="slide-out-left",a))(APIKitAnimationTypes||{});const Logo$1={name:"LS-Logo",sourceType:"Logo",create({onUpdate:a},{sourceProps:s}){const d=document.createElement("div"),h=getProject(CoreContext.state.activeProjectId).compositor.getRoot(),{x:b}=h.props.size,_=(b!=null?b:1280)/1920,$=rt=>rt*_+"px",_e=({source:rt})=>{var mt;const{src:ot,meta:it}=(rt==null?void 0:rt.sourceProps)||{},{id:st}=rt||{},[lt,dt]=React.useState(!1);react.exports.useEffect(()=>{dt(!1)},[st]);const{offsetX:ut=40,offsetY:ht=40,height:nt=135,width:ct=240}=(it==null?void 0:it.style)||{};return React.createElement(APIKitAnimation,{type:"logo",id:st,enter:APIKitAnimationTypes.FADE_IN,exit:APIKitAnimationTypes.FADE_OUT,duration:400},React.createElement("div",{style:{opacity:lt?1:0,width:"100%",height:"100%"},className:"logo-transition"},ot&&React.createElement("div",{className:"logo wrapper",style:{padding:`${$(ht)} ${$(ut)}`}},React.createElement("img",{style:{height:"100%",width:"100%",maxHeight:nt?$(nt):"none",maxWidth:ct?$(ct):"none",...(mt=s==null?void 0:s.meta)==null?void 0:mt.style,...it==null?void 0:it.style},src:ot,onLoad:()=>dt(!0)}))))},tt=rt=>ReactDOM.render(React.createElement(_e,{source:rt}),d);return a(rt=>{tt({...rt})}),{root:d}}},Iframe=({url:a,allowFullScreen:s,position:d,display:c,height:h,width:b,overflow:_,styles:$,onLoad:_e,id:tt,frameBorder:rt,className:ot,name:it,target:st,iframeRef:lt,children:dt,src:ut})=>{const ht=Object.assign({src:ut||a,target:st||null,style:{position:d||null,display:c||"block",overflow:_||null,...$},name:it||null,className:ot||null,id:tt||null,onLoad:_e||null,height:h||"100%",width:b||"100%",allow:"autoplay"});let nt=Object.create(null);for(let ct of Object.keys(ht))ht[ct]!=null&&(nt[ct]=ht[ct]);for(let ct of Object.keys(nt.style))nt.style[ct]==null&&delete nt.style[ct];if(s)if("allow"in nt){const ct=nt.allow.replace("fullscreen","");nt.allow=`fullscreen ${ct.trim()}`.trim()}else nt.allow="fullscreen";return rt>=0&&(nt.style.hasOwnProperty("border")||(nt.style.border=rt)),React.createElement(React.Fragment,null,dt?React.createElement("iframe",{ref:lt,...nt},dt):React.createElement("iframe",{ref:lt,...nt}))},Overlay={name:"LS-Overlay",sourceType:"Overlay",create({onUpdate:a,onRemove:s},{sourceProps:d}){s(()=>{clearInterval(b)});const c=document.createElement("div"),h=getProject(CoreContext.state.activeProjectId).role;let b;const _=({source:ot,setStartAnimation:it})=>{const{src:st,meta:lt,height:dt,width:ut}=(ot==null?void 0:ot.sourceProps)||{},ht=React.useRef(null);react.exports.useEffect(()=>{ht.current&&(ht.current.style.removeProperty("transformOrigin"),ht.current.style.removeProperty("transform"))},[st]);const nt=()=>{if(ht.current){const mt=getProject(CoreContext.state.activeProjectId).compositor.getRoot(),{x:kt,y:Tt}=mt.props.size;let Pt=ht.current.clientWidth,At=ht.current.clientHeight,gt;Pt&&At?gt=Math.min(kt/Pt,Tt/At):gt=1,ht.current.style.willChange="transform",ht.current.style.transformOrigin="0 0",ht.current.style.transform=`scale(${gt}) translateZ(0)`,it(!0)}};return React.createElement(React.Fragment,null,React.createElement(Iframe,{key:ot.id,url:st,frameBorder:0,iframeRef:ht,height:dt,width:ut,onLoad:nt,styles:{...lt==null?void 0:lt.style}}))},$=({source:ot,setStartAnimation:it})=>{var gt;const{src:st,type:lt,meta:dt,loop:ut}=(ot==null?void 0:ot.sourceProps)||{},{id:ht,sourceType:nt}=ot||{},[ct,mt]=React.useState(null),kt=React.useRef(null);console.log("Updated current time",(gt=kt==null?void 0:kt.current)==null?void 0:gt.currentTime);const Tt=React.useCallback(Ct=>{kt.current=Ct,mt(Ct?Ct.id:null)},[]),Pt=React.useCallback(()=>{kt!=null&&kt.current&&kt.current.play().catch(()=>{var Ct;kt.current.muted=!0,(Ct=kt.current)==null||Ct.play()})},[st]),At=React.useCallback(()=>{b&&clearInterval(b),hasPermission(h,Permission.UpdateProject)&&trigger$1("VideoEnded",{id:ht,category:lt})},[st]);return React.useEffect(()=>{dt&&(kt==null?void 0:kt.current)&&ct&&hasPermission(h,Permission.ManageSelf)&&dt!=null&&dt.time&&(kt.current.currentTime=Number(dt==null?void 0:dt.time))},[dt==null?void 0:dt.time,ct]),React.useEffect(()=>()=>{b&&clearInterval(b)},[ht]),React.useEffect(()=>{ct?kt.current&&(kt.current.src=st,kt.current.play().catch(()=>{kt.current.muted=!0,kt.current.play()}),hasPermission(h,Permission.UpdateProject)&&(b=setInterval(()=>{if(kt.current.duration){const Ct=kt.current.duration-kt.current.currentTime;trigger$1("VideoTimeUpdate",{category:nt,id:ht,time:Math.floor(Ct)})}},1e3))):b&&clearInterval(b)},[ct]),React.createElement(React.Fragment,{key:ht},st&&React.createElement("video",{loop:ut,id:ht,ref:Tt,style:{...d.meta.style,...dt.style},onLoadedData:Pt,onEnded:At,onCanPlay:()=>it(!0)}))},_e=({source:ot,setStartAnimation:it})=>{const{src:st,meta:lt}=(ot==null?void 0:ot.sourceProps)||{},{id:dt}=ot||{};return React.createElement(React.Fragment,{key:dt},st&&React.createElement("img",{style:{...d.meta.style,...lt.style},src:st,onLoad:()=>it(!0)}))},tt=({source:ot})=>{const{type:it}=(ot==null?void 0:ot.sourceProps)||{},{id:st}=ot||{},[lt,dt]=React.useState(!1);return react.exports.useEffect(()=>{dt(!1)},[st]),React.createElement(APIKitAnimation,{id:st,type:"overlay",enter:APIKitAnimationTypes.FADE_IN,exit:APIKitAnimationTypes.FADE_OUT,duration:400},React.createElement("div",{style:{opacity:lt?1:0,width:"100%",height:"100%"},className:"overlayContainer overlay-transition"},st&&it==="image"&&React.createElement(_e,{source:ot,setStartAnimation:dt}),st&&it==="video"&&React.createElement($,{source:ot,setStartAnimation:dt}),st&&it==="custom"&&React.createElement(_,{source:ot,setStartAnimation:dt})))},rt=ot=>ReactDOM.render(React.createElement(React.Fragment,null,React.createElement(tt,{source:ot})),c);return a(ot=>{rt({...ot})}),{root:c}}};var functionExpression=/[\s]*([a-z-]+)[\s]*\([\s]*([^\)]+)[\s]*\)[\s]*/i,floatExpression=/^(\-?\d+\.?\d{0,5})/,toFloat=parseFloat;function ensurePercent(a){return typeof a=="number"?a:toFloat(a)*.01}function formatPercent(a){return formatFloat(a*100)+"%"}function formatFloat(a){return floatExpression.exec(a.toString())[1]}function parseCSSFunction(a){var s=functionExpression.exec(a);if(!(!s||!s.length))return[s[1]].concat(s[2].split(","))}function cssFunction(a,s){var d=Array.prototype.join.call(s,", ");return a+"("+d+")"}var math=Math,round=math.round;function roundFloat(a,s){return round(a*s)/s}var _a,RGB="rgb",HSL="hsl",converters=(_a={},_a[RGB+HSL]=RGBtoHSL,_a[HSL+RGB]=HSLtoRGB,_a),maxChannelValues={r:255,g:255,b:255,h:360,s:1,l:1,a:1};function color(a){return parseHexCode(a)||parseColorFunction(a)||rgb(255,0,0)}function rgb(a,s,d,c){return new ColorHelper(RGB,a,s,d,c===void 0?1:ensurePercent(c),c!==void 0)}function convertHelper(a,s,d){var c=s.f,h=s.r,b=s.g,_=s.b,$=s.a,_e=d===void 0?s.o:d;return c!==a?converters[c+a](h,b,_,$,_e):d===void 0?s:new ColorHelper(c,h,b,_,$,_e)}var ColorHelper=function(){function a(s,d,c,h,b,_){var $=this;$.f=s,$.o=_;var _e=s===HSL;$.r=clampColor(_e?"h":"r",d),$.g=clampColor(_e?"s":"g",c),$.b=clampColor(_e?"l":"b",h),$.a=clampColor("a",b)}return a.prototype.toString=function(){var s=this,d=s.o,c=s.f,h=s.r,b=s.g,_=s.b,$=s.a,_e,tt;if(c===RGB)_e=d?"rgba":RGB,tt=[round(h),round(b),round(_)];else if(c===HSL)_e=d?"hsla":HSL,tt=[round(h),formatPercent(roundFloat(b,100)),formatPercent(roundFloat(_,100))];else throw new Error("Invalid color format");return d&&tt.push(formatFloat(roundFloat($,1e5))),cssFunction(_e,tt)},a.prototype.toHexString=function(){var s=convertHelper(RGB,this);return"#"+(toHex(s.r)+toHex(s.g)+toHex(s.b)).toUpperCase()},a.prototype.toHSL=function(){return convertHelper(HSL,this,!1)},a.prototype.toHSLA=function(){return convertHelper(HSL,this,!0)},a.prototype.toRGB=function(){return convertHelper(RGB,this,!1)},a.prototype.toRGBA=function(){return convertHelper(RGB,this,!0)},a.prototype.red=function(){var s=this;return(s.f===RGB?s:s.toRGB()).r},a.prototype.green=function(){var s=this;return(s.f===RGB?s:s.toRGB()).g},a.prototype.blue=function(){var s=this;return(s.f===RGB?s:s.toRGB()).b},a.prototype.hue=function(){var s=this;return(s.f===HSL?s:s.toHSL()).r},a.prototype.saturation=function(){var s=this;return(s.f===HSL?s:s.toHSL()).g},a.prototype.lightness=function(){var s=this;return(s.f===HSL?s:s.toHSL()).b},a.prototype.alpha=function(){return this.a},a.prototype.opacity=function(){return this.a},a.prototype.invert=function(){var s=this,d=convertHelper(RGB,s);return convertHelper(s.f,new a(RGB,255-d.r,255-d.g,255-d.b,s.a,s.o))},a.prototype.lighten=function(s,d){var c=this,h=convertHelper(HSL,c),b=maxChannelValues.l,_=h.b+(d?b-h.b:b)*ensurePercent(s);return convertHelper(c.f,new a(HSL,h.r,h.g,_,c.a,c.o))},a.prototype.darken=function(s,d){var c=this,h=convertHelper(HSL,c),b=h.b-(d?h.b:maxChannelValues.l)*ensurePercent(s);return convertHelper(c.f,new a(HSL,h.r,h.g,b,c.a,c.o))},a.prototype.saturate=function(s,d){var c=this,h=convertHelper(HSL,c),b=maxChannelValues.s,_=h.g+(d?b-h.g:b)*ensurePercent(s);return convertHelper(c.f,new a(HSL,h.r,_,h.b,c.a,c.o))},a.prototype.desaturate=function(s,d){var c=this,h=convertHelper(HSL,c),b=maxChannelValues.s,_=h.g-(d?h.g:b)*ensurePercent(s);return convertHelper(c.f,new a(HSL,h.r,_,h.b,c.a,c.o))},a.prototype.grayscale=function(){return this.desaturate(1)},a.prototype.fade=function(s){var d=this,c=clampColor("a",ensurePercent(s));return convertHelper(d.f,new a(d.f,d.r,d.g,d.b,c,!0))},a.prototype.fadeOut=function(s,d){var c=this,h=1,b=clampColor("a",c.a-(d?c.a:h)*ensurePercent(s));return convertHelper(c.f,new a(c.f,c.r,c.g,c.b,b,!0))},a.prototype.fadeIn=function(s,d){var c=this,h=1,b=clampColor("a",c.a+(d?c.a:h)*ensurePercent(s));return convertHelper(c.f,new a(c.f,c.r,c.g,c.b,b,!0))},a.prototype.mix=function(s,d){var c=this,h=ensureColor(s),b=convertHelper(RGB,c),_=convertHelper(RGB,h),$=d===void 0?.5:d,_e=2*$-1,tt=Math.abs(b.a-_.a),rt=((_e*tt===-1?_e:(_e+tt)/(1+_e*tt))+1)/2,ot=1-rt,it=new a(RGB,round(b.r*rt+_.r*ot),round(b.g*rt+_.g*ot),round(b.b*rt+_.b*ot),b.a*$+_.a*(1-$),c.o||h.o);return convertHelper(this.f,it)},a.prototype.tint=function(s){return rgb(255,255,255).mix(this,s)},a.prototype.shade=function(s){return rgb(0,0,0).mix(this,s)},a.prototype.spin=function(s){var d=this,c=convertHelper(HSL,d);return convertHelper(d.f,new a(HSL,modDegrees(c.r+s),c.g,c.b,d.a,d.o))},a}();function toHex(a){var s=round(a);return(s<16?"0":"")+s.toString(16)}function modDegrees(a){return((a<0?360:0)+a%360)%360}function RGBtoHSL(a,s,d,c,h){var b=a/255,_=s/255,$=d/255,_e=Math.min(b,_,$),tt=Math.max(b,_,$),rt=(_e+tt)/2,ot=tt-_e,it;tt===_e?it=0:b===tt?it=(_-$)/ot:_===tt?it=2+($-b)/ot:$===tt?it=4+(b-_)/ot:it=0,it=Math.min(it*60,360),it<0&&(it+=360);var st;return tt===_e?st=0:rt<=.5?st=ot/(tt+_e):st=ot/(2-tt-_e),new ColorHelper(HSL,it,st,rt,c,h)}function HSLtoRGB(a,s,d,c,h){var b=a/360,_=s,$=d;if(_===0){var _e=$*255;return new ColorHelper(RGB,_e,_e,_e,c,h)}for(var tt=$<.5?$*(1+_):$+_-$*_,rt=2*$-tt,ot=0,it=0,st=0,lt=0;lt<3;lt++){var dt=b+.3333333333333333*-(lt-1);dt<0&&dt++,dt>1&&dt--;var _e=void 0;6*dt<1?_e=rt+(tt-rt)*6*dt:2*dt<1?_e=tt:3*dt<2?_e=rt+(tt-rt)*(2/3-dt)*6:_e=rt,_e*=255,lt===0?ot=_e:lt===1?it=_e:st=_e}return new ColorHelper(RGB,ot,it,st,c,h)}function clampColor(a,s){var d=0,c=maxChannelValues[a];return s<d?d:s>c?c:s}function ensureColor(a){return a instanceof ColorHelper?a:color(a)}function parseHexCode(a){var s=a.match(/#(([a-f0-9]{6})|([a-f0-9]{3}))$/i);if(!!s){var d=s[1],c=parseInt(d.length===3?d[0]+d[0]+d[1]+d[1]+d[2]+d[2]:d,16),h=c>>16&255,b=c>>8&255,_=c&255;return new ColorHelper(RGB,h,b,_,1,!1)}}function parseColorFunction(a){var s=parseCSSFunction(a);if(!(!s||!(s.length===4||s.length===5))){var d=s[0],c=d==="rgba",h=d==="hsla",b=d===RGB,_=d===HSL,$=h||c,_e;if(b||c)_e=RGB;else if(_||h)_e=HSL;else throw new Error("unsupported color string");var tt=toFloat(s[1]),rt=b||c?toFloat(s[2]):ensurePercent(s[2]),ot=b||c?toFloat(s[3]):ensurePercent(s[3]),it=$?toFloat(s[4]):1;return new ColorHelper(_e,tt,rt,ot,it,$)}}const of=color,transparent=color("rgba(0,0,0,0)"),white=color("#ffffff"),black=color("#000000"),weights={primary:{50:"#EAFAF5",100:"#D5F6EB",200:"#ABEDD7",300:"#82E3C3",400:"#58DAAF",500:"#26AD80",600:"#25A77C",700:"#1C7D5D",800:"#12543E"},secondary:{50:"#FBEAEA",100:"#F7D4D4",200:"#EFA9A9",300:"#E77E7E",400:"#FF6F64",500:"#E9554A",600:"#CB362B",700:"#811818",800:"#561010"},neutral:{0:"#ffffff",10:"#f5f5f5",200:"#d9d9d9",300:"#bababa",350:"#999999",400:"#9e9e9e",500:"#808080",600:"#666666",700:"#4d4d4d",800:"#303030",900:"#141414",1e3:"#000000"},warning:{400:"#FFC28A",500:"#FFAE64",600:"#F29540"}},types=Object.keys(weights),weight=a=>s=>{const d=weights[a];if(d[s])return d[s];const c=Object.keys(weights.primary).map(Number),h=c.find(b=>s<=b);return h?d[h]:d[c.slice(c.length-1)[0]]},primary=weight("primary"),neutral=weight("neutral"),secondary=weight("secondary"),warning=weight("warning"),lightstream=color("#26ad80"),twitch=color("#9156ff"),linkedin=color("#2867b2"),youtube=color("#ff0000"),facebook=color("#1877f2"),twitter=color("#1da1f2");var Color=Object.freeze(Object.defineProperty({__proto__:null,color,of,transparent,white,black,types,primary,neutral,secondary,warning,lightstream,twitch,linkedin,youtube,facebook,twitter},Symbol.toStringTag,{value:"Module"}));const YouTube=React.createElement("svg",{style:{flex:"0 0 100%"},viewBox:"0 0 24 24"},React.createElement("path",{d:"M19.6465 8.53711C19.4707 7.83398 18.9141 7.27734 18.2402 7.10156C16.9805 6.75 12 6.75 12 6.75C12 6.75 6.99023 6.75 5.73047 7.10156C5.05664 7.27734 4.5 7.83398 4.32422 8.53711C3.97266 9.76758 3.97266 12.4043 3.97266 12.4043C3.97266 12.4043 3.97266 15.0117 4.32422 16.2715C4.5 16.9746 5.05664 17.502 5.73047 17.6777C6.99023 18 12 18 12 18C12 18 16.9805 18 18.2402 17.6777C18.9141 17.502 19.4707 16.9746 19.6465 16.2715C19.998 15.0117 19.998 12.4043 19.998 12.4043C19.998 12.4043 19.998 9.76758 19.6465 8.53711ZM10.3594 14.7773V10.0312L14.5195 12.4043L10.3594 14.7773Z"})),YouTubeDuo=React.createElement("svg",{style:{flex:"0 0 100%"},viewBox:"0 0 24 24"},React.createElement("rect",{x:"8",y:"9",width:"9",height:"7",fill:neutral(0)}),React.createElement("path",{d:"M19.6465 8.53711C19.4707 7.83398 18.9141 7.27734 18.2402 7.10156C16.9805 6.75 12 6.75 12 6.75C12 6.75 6.99023 6.75 5.73047 7.10156C5.05664 7.27734 4.5 7.83398 4.32422 8.53711C3.97266 9.76758 3.97266 12.4043 3.97266 12.4043C3.97266 12.4043 3.97266 15.0117 4.32422 16.2715C4.5 16.9746 5.05664 17.502 5.73047 17.6777C6.99023 18 12 18 12 18C12 18 16.9805 18 18.2402 17.6777C18.9141 17.502 19.4707 16.9746 19.6465 16.2715C19.998 15.0117 19.998 12.4043 19.998 12.4043C19.998 12.4043 19.998 9.76758 19.6465 8.53711ZM10.3594 14.7773V10.0312L14.5195 12.4043L10.3594 14.7773Z"})),Facebook=React.createElement("svg",{style:{flex:"0 0 100%"},viewBox:"0 0 24 24"},React.createElement("path",{d:"M15.4863 13.3125L15.8965 10.6172H13.2891V8.85938C13.2891 8.09766 13.6406 7.39453 14.8125 7.39453H16.0137V5.08008C16.0137 5.08008 14.9297 4.875 13.9043 4.875C11.7656 4.875 10.3594 6.19336 10.3594 8.53711V10.6172H7.95703V13.3125H10.3594V19.875H13.2891V13.3125H15.4863Z"})),FacebookCircle=React.createElement("svg",{style:{flex:"0 0 100%"},viewBox:"0 0 24 24"},React.createElement("path",{d:"M19.2656 12.375C19.2656 8.36133 16.0137 5.10938 12 5.10938C7.98633 5.10938 4.73438 8.36133 4.73438 12.375C4.73438 16.0078 7.37109 19.0254 10.8574 19.5527V14.4844H9.01172V12.375H10.8574V10.793C10.8574 8.97656 11.9414 7.95117 13.582 7.95117C14.4023 7.95117 15.2227 8.09766 15.2227 8.09766V9.88477H14.3145C13.4062 9.88477 13.1133 10.4414 13.1133 11.0273V12.375H15.1348L14.8125 14.4844H13.1133V19.5527C16.5996 19.0254 19.2656 16.0078 19.2656 12.375Z"})),Twitch=React.createElement("svg",{style:{flex:"0 0 100%"},viewBox:"0 0 24 24"},React.createElement("path",{d:"M16.9551 8.92188H15.8125V12.1445H16.9551V8.92188ZM13.8496 8.89258H12.707V12.1152H13.8496V8.89258ZM9.01562 5.875L6.20312 8.57031V18.209H9.60156V20.875L12.4141 18.209H14.6699L19.7676 13.375V5.875H9.01562ZM18.6543 12.8477L16.3691 14.9863H14.1133L12.1504 16.8613V14.9863H9.60156V6.95898H18.6543V12.8477Z"})),TwitchDuo=React.createElement("svg",{style:{flex:"0 0 100%"},viewBox:"0 0 24 24"},React.createElement("path",{d:"M19 6.5H9L8.8125 17.5H13.5L19 13V6.5Z",fill:neutral(0)}),React.createElement("path",{d:"M16.9551 8.92188H15.8125V12.1445H16.9551V8.92188ZM13.8496 8.89258H12.707V12.1152H13.8496V8.89258ZM9.01562 5.875L6.20312 8.57031V18.209H9.60156V20.875L12.4141 18.209H14.6699L19.7676 13.375V5.875H9.01562ZM18.6543 12.8477L16.3691 14.9863H14.1133L12.1504 16.8613V14.9863H9.60156V6.95898H18.6543V12.8477Z"})),Twitter=React.createElement("svg",{style:{flex:"0 0 100%"},viewBox:"0 0 24 24"},React.createElement("path",{d:"M20.6681 7.98749C20.6806 8.16248 20.6806 8.33751 20.6806 8.5125C20.6806 13.85 16.6197 20 9.1976 20C6.91098 20 4.78681 19.3375 3 18.1875C3.32489 18.225 3.63723 18.2375 3.97462 18.2375C5.86136 18.2375 7.59821 17.6 8.98518 16.5125C7.21086 16.475 5.72393 15.3125 5.21162 13.7125C5.46155 13.75 5.71143 13.775 5.97386 13.775C6.33621 13.775 6.69859 13.725 7.03594 13.6375C5.18666 13.2625 3.79966 11.6375 3.79966 9.67499V9.62501C4.33693 9.92501 4.96174 10.1125 5.62393 10.1375C4.53685 9.41247 3.82466 8.17498 3.82466 6.77497C3.82466 6.02499 4.02454 5.33749 4.37443 4.73748C6.36117 7.18748 9.34753 8.78745 12.6962 8.96248C12.6337 8.66248 12.5962 8.35001 12.5962 8.03751C12.5962 5.81248 14.3955 4 16.6322 4C17.7942 4 18.8438 4.4875 19.581 5.275C20.4931 5.10001 21.3678 4.76249 22.1425 4.3C21.8426 5.23752 21.2054 6.02502 20.3682 6.52499C21.1804 6.43753 21.9676 6.21248 22.6923 5.90001C22.1426 6.69998 21.4553 7.41245 20.6681 7.98749Z"})),LinkedIn=React.createElement("svg",{style:{flex:"0 0 100%"},viewBox:"0 0 24 24"},React.createElement("path",{d:"M19.2 3H4.8C3.81 3 3.009 3.81 3.009 4.8L3 19.2C3 20.19 3.81 21 4.8 21H19.2C20.19 21 21 20.19 21 19.2V4.8C21 3.81 20.19 3 19.2 3ZM8.4 18.3H5.7V10.2H8.4V18.3ZM7.05 8.679C6.15 8.679 5.421 7.95 5.421 7.05C5.421 6.15 6.15 5.421 7.05 5.421C7.95 5.421 8.679 6.15 8.679 7.05C8.679 7.95 7.95 8.679 7.05 8.679ZM18.3 18.3H15.6V13.53C15.6 12.783 14.997 12.18 14.25 12.18C13.503 12.18 12.9 12.783 12.9 13.53V18.3H10.2V10.2H12.9V11.28C13.368 10.524 14.331 10.02 15.15 10.02C16.887 10.02 18.3 11.433 18.3 13.17V18.3Z"})),Lightstream=React.createElement("svg",{style:{flex:"0 0 100%"},viewBox:"0.144 0 27.712 24"},React.createElement("path",{d:"M16.0369 12.1232L14 15.6518L11.5642 11.4335L6.27356 10.6176L14 24L20.4627 12.805L16.0369 12.1232Z"}),React.createElement("path",{d:"M9.74033 8.27418L7.37317 4.17409H20.6268L19.0921 6.83194L24.3827 6.01602L27.8558 0H0.144165L5.31453 8.95665L9.74033 8.27418Z"})),LightstreamWithText=React.createElement("svg",{style:{flex:"0 0 100%"},viewBox:"0 0 3000 524"},React.createElement("polygon",{points:"330.56 263.5 299.73 316.91 262.86 253.06 182.78 240.71 299.73 443.27 397.55 273.82 330.56 263.5"}),React.createElement("polygon",{points:"235.25 205.24 199.42 143.18 400.03 143.18 376.8 183.41 456.88 171.06 509.45 80 90 80 168.26 215.57 235.25 205.24"}),React.createElement("path",{d:"M646.32,345.72h94.91v13.73H630V167.26h16.36Z"}),React.createElement("path",{d:"M846.24,359.45H830V167.26h16.23Z"}),React.createElement("path",{d:"M1091.16,336.61q-8.45,12-26.46,18.74t-40.33,6.73q-22.57,0-40.13-10.82t-27.19-30.62q-9.64-19.8-9.77-45.41V250.95q0-40,20.2-63.16t54.25-23.17q29.69,0,47.78,15.11T1091,221.38h-16.24q-3.56-21.18-17.23-32.11t-35.7-10.92q-26.92,0-42.64,19.15t-15.71,54v22.72q0,21.93,7.46,38.77t21.38,26.09q13.92,9.25,32,9.25,21,0,36-6.6,9.76-4.36,14.52-10.16V282h-51.61V268.24h67.85Z"}),React.createElement("path",{d:"M1333.71,359.45h-16.37V278.11H1207.53v81.33h-16.23V167.26h16.23v97.12h109.81V167.26h16.37Z"}),React.createElement("path",{d:"M1563.2,181h-65.87V359.45H1481.1V181h-65.73V167.26H1563.2Z"}),React.createElement("path",{d:"M1990.75,181h-65.87V359.45h-16.23V181h-65.73V167.26h147.83Z"}),React.createElement("path",{d:"M2147.65,279.33h-55.84v80.12h-16.36V167.26h62.43q30.75,0,48,14.9t17.29,41.66a52,52,0,0,1-10.83,32.56q-10.82,14.11-29,19.51l48,81.83v1.72h-17.29Zm-55.84-13.73h49.76q20.45,0,32.86-11.63t12.41-30.14q0-20.36-12.93-31.59T2137.61,181h-45.8Z"}),React.createElement("path",{d:"M2407.62,278.11h-89.88v67.61h103.35v13.73H2301.5V167.26h118.92V181H2317.73v83.39h89.88Z"}),React.createElement("polygon",{points:"2892.79 183.67 2892.79 183.67 2816.23 326.97 2724.06 154.45 2724.06 189.54 2724.06 359.75 2739.67 359.75 2739.67 218.3 2816.26 359.42 2892.79 218.32 2892.79 359.75 2908.4 359.75 2908.4 189.54 2908.4 154.45 2892.79 183.67"}),React.createElement("polygon",{points:"2649.77 359.45 2569.47 154.54 2569.47 154.53 2569.46 154.53 2569.46 154.53 2569.46 154.54 2489.16 359.45 2506.19 359.45 2569.46 194.32 2632.74 359.45 2649.77 359.45"}),React.createElement("path",{d:"M1764.57,287q-6.73-10.56-20.06-18.15a131.55,131.55,0,0,0-21.47-9.18l-7.64,13.49q19.65,6.61,28.32,13.77,11.22,9.3,11.22,25.28,0,16.37-13.6,26.26t-36,9.9c-11.35,0-21.05-1.94-29.35-5.51l-7,12.33a94,94,0,0,0,36.33,6.91q29.7,0,47.85-13.73t18.15-36.43Q1771.3,297.55,1764.57,287Z"}),React.createElement("path",{d:"M1659.11,250.93c7.28,5.25,18,10.18,32.13,14.79l7.72-13.38q-21-6.41-31.29-14.49Q1655.95,228.61,1656,214q0-15.83,13-25.66t35-9.83c13.12,0,23.78,3.19,32.26,9.21l7.23-12.51c-1.71-1-3.43-2.1-5.3-3q-15.09-7.38-34.18-7.38-28.19,0-46.31,13.76t-18.11,35.77Q1639.62,237,1659.11,250.93Z"}),React.createElement("path",{d:"M1744.34,268.78a129.23,129.23,0,0,0-21.68-9.32l-7.79,13.49c13.28,4.44,22.87,9.06,28.68,13.88q11.2,9.29,11.2,25.23,0,16.33-13.57,26.21t-36,9.88c-11.8,0-21.85-2-30.34-5.91l-7.08,12.26.2.1a93.63,93.63,0,0,0,37.22,7.25q29.64,0,47.75-13.7t18.11-36.36q0-14.36-6.72-24.9T1744.34,268.78Z"}));var IconMap=Object.freeze(Object.defineProperty({__proto__:null,YouTube,YouTubeDuo,Facebook,FacebookCircle,Twitch,TwitchDuo,Twitter,LinkedIn,Lightstream,LightstreamWithText},Symbol.toStringTag,{value:"Module"}));const nudge=a=>{if(!!(a.nudgeUp||a.nudgeDown||a.nudgeRight||a.nudgeLeft))return{position:"relative",top:a.nudgeDown,left:a.nudgeRight,right:a.nudgeLeft,bottom:a.nudgeUp}},SVGWrapper=({children:a,width:s,height:d,color:c,colorWeight:h=0,marginLeft:b,marginTop:_,marginRight:$,marginBottom:_e,className:tt,...rt})=>(c&&Color[c](h),React.createElement("div",{className:tt,style:{...nudge(rt),display:"flex",justifyContent:"center",flexBasis:s||"auto",flexShrink:0,width:s,height:d||s&&"fit-content",marginLeft:b,marginTop:_,marginBottom:_e,marginRight:$}},a)),Icon=({name:a,...s})=>React.createElement(SVGWrapper,{...s},IconMap[a]),dragImageSvg=`
  <svg height="75" width="120" viewBox="0 0 120 75" xmlns="http://www.w3.org/2000/svg" style="">
    <rect width="120" height="75" rx="3" style="
      opacity: 0.4;
      stroke: white;
      stroke-width: 3px;
      stroke-opacity: 0.7;
    "/>
  </svg>`;let dragImage;const loadDragImage=()=>dragImage||(dragImage=new Image,dragImage.src=URL.createObjectURL(new Blob([dragImageSvg],{type:"image/svg+xml"})),dragImage);class ErrorBoundary extends React.Component{constructor(s){super(s),this.state={error:null}}componentDidCatch(s,d){log$1.warn(s,d)}static getDerivedStateFromError(){return{error:!0}}render(){return this.state.error?null:this.props.children}}const onDrop=async(a,s)=>{s.preventDefault(),s.stopPropagation();const{dropNodeId:d,dropType:c,project:h}=a,b=s.dataTransfer.getData("text/plain");if(log$1.debug("Compositor: Dropping",{dropType:c,dragNodeId:b,dropNodeId:d}),d===b)return;const[_,$,_e,tt]=await Promise.all([h.compositor.get(b),h.compositor.get(d),h.compositor.getParent(b),h.compositor.getParent(d)]);if(c==="layout")return _e.id===d?void 0:CoreContext.Command.moveNode({projectId:h.id,nodeId:_.id,parentId:$.id});if(_e.id!==(tt==null?void 0:tt.id))return CoreContext.Command.swapNodes({projectId:h.id,nodeAId:_.id,nodeBId:$.id});const rt=_e.children.map(ot=>ot.id);return CoreContext.Command.reorderNodes({projectId:h.id,parentId:_e.id,childIds:swapItems(_.id,$.id,rt)})};let foundDropTarget=!1;const ElementTree=a=>{var ct,mt,kt;const s=react.exports.useRef(!1),d=react.exports.useRef(),c=react.exports.useRef(),h=react.exports.useRef(),{project:b,interactive:_=!0,onElementDoubleClick:$,checkIsDragTarget:_e,checkIsDropTarget:tt}=react.exports.useContext(CompositorContext),{nodeId:rt}=a,ot=b.compositor.get(rt);if(!ot)return null;const it=CoreContext.compositor.getElement(ot),st=ot.props.layout||"Row",lt=_&&_e(ot),dt=_&&tt(ot);let ut=dt?{onDrop:Tt=>(foundDropTarget=!0,onDrop({dropType:"layout",dropNodeId:ot.id,project:b},Tt)),onDragOver:Tt=>{var Pt;Tt.preventDefault(),Tt.stopPropagation(),(Pt=h.current)==null||Pt.toggleAttribute("data-layout-drop-target-active",!0)},onDragLeave:Tt=>{var Pt;Tt.preventDefault(),Tt.stopPropagation(),(Pt=h.current)==null||Pt.toggleAttribute("data-layout-drop-target-active",!1)}}:{},ht=lt?{draggable:!0,ondrop:Tt=>(foundDropTarget=!0,onDrop({dropType:"transform",dropNodeId:ot.id,project:b},Tt)),ondragstart:Tt=>{var Pt;s.current=!0,wrapperEl.toggleAttribute("data-dragging",!0),log$1.debug("Compositor: Dragging",ot.id),foundDropTarget=!1,Tt.dataTransfer.setData("text/plain",ot.id),Tt.dataTransfer.dropEffect="move",Tt.dataTransfer.setDragImage(dragImage,10,10),(Pt=h.current)==null||Pt.toggleAttribute("data-drag-target-active",!0),window.__dragging=!0},ondragend:Tt=>{var Pt;s.current=!1,foundDropTarget||(log$1.info("Compositor: No drop target - deleting node",ot),CoreContext.Command.deleteNode({nodeId:ot.id})),wrapperEl.toggleAttribute("data-dragging",!0),log$1.debug("Compositor: DragEnd",Tt),(Pt=h.current)==null||Pt.toggleAttribute("data-drag-target-active",!1),wrapperEl.querySelectorAll("[data-item]").forEach(At=>{At.toggleAttribute("data-drag-target-active",!1),At.toggleAttribute("data-layout-drop-target-active",!1),At.toggleAttribute("data-transform-drop-target-active",!1)}),window.__dragging=!1},ondragover:Tt=>{var Pt;Tt.preventDefault(),Tt.stopPropagation(),!s.current&&((Pt=h.current)==null||Pt.toggleAttribute("data-transform-drop-target-active",!0))},ondragleave:Tt=>{var Pt;Tt.preventDefault(),Tt.stopPropagation(),(Pt=h.current)==null||Pt.toggleAttribute("data-transform-drop-target-active",!1)}}:{};react.exports.useEffect(()=>{c.current&&it&&(c.current.appendChild(it.root),Object.assign(c.current.style,{width:"100%",height:"100%",position:"relative",overflow:"hidden"}),Object.assign(it.root.style,{pointerEvents:lt?"all":"none",width:"100%",height:"100%",position:"relative",...ot.props.style||{}}))},[c.current,it]),react.exports.useEffect(()=>{const Tt=lt?()=>$(ot):()=>{};return d.current&&(Object.assign(d.current,ht),Object.assign(d.current.style,{pointerEvents:lt?"all":"none"}),d.current.addEventListener("dblclick",Tt)),()=>{var Pt;(Pt=d.current)==null||Pt.removeEventListener("dblclick",Tt)}},[d.current]);const nt={layout:st,...(ct=ot.props.layoutProps)!=null?ct:{}};return React.createElement("div",{ref:h,"data-id":ot.id+"-x","data-item":!0,...lt&&{"data-drag-target":!0},...dt&&{"data-drop-target":!0},...ut,style:{position:"relative",width:((mt=ot.props.size)==null?void 0:mt.x)||"100%",height:((kt=ot.props.size)==null?void 0:kt.y)||"100%",pointerEvents:"none"}},React.createElement("div",{className:"interactive-overlay",ref:d,style:{height:"100%",width:"100%",position:"absolute",zIndex:2}}),React.createElement("div",{className:"item-element",style:{display:"flex",flex:"0 0 auto",justifyContent:"center",width:"100%",height:"100%"}},React.createElement("div",{ref:c}),React.createElement(ErrorBoundary,null,React.createElement("ls-layout",{"data-id":ot.id+"-x",props:JSON.stringify(nt),layout:st},ot.children.map(Tt=>React.createElement(ElementTree,{key:Tt.id,nodeId:Tt.id}))))))},Root=a=>{const{project:s}=react.exports.useContext(CompositorContext),[d,c]=react.exports.useState(null);return react.exports.useEffect(()=>(c(s.compositor.renderTree()),CoreContext.onInternal("NodeChanged",()=>{c(s.compositor.renderTree())})),[]),react.exports.useEffect(()=>{const h=s.compositor.getRoot(),{x:b}=h.props.size,_=()=>{var st,lt,dt,ut,ht,nt;const{bannerStyle:$=BannerStyle.DEFAULT,primaryColor:_e="#ABABAB",showNameBanners:tt}=(st=s.props)!=null?st:{},rt=(nt=(ht=(lt=s.props)==null?void 0:lt.logoPosition)!=null?ht:(ut=(dt=s.props)==null?void 0:dt.logo)==null?void 0:ut.logoPosition)!=null?nt:LogoPosition.TopRight;if(!$||!_e||!rt)return;const ot=themes[$](_e,tt,b/1920),it=themes[rt](b/1920);a.setStyle(`${ot} ${it}`||"")};return _(),CoreContext.onInternal("ProjectChanged",_)},[s]),d?React.createElement("div",{onDrop:h=>{foundDropTarget=!0,h.preventDefault()},onDragOver:h=>{h.preventDefault()},onDragLeave:h=>{h.preventDefault()},style:{userSelect:"none",width:`${d.props.size.x+PADDING*2}px`,height:`${d.props.size.y+PADDING*2}px`,margin:PADDING+"px"}},React.createElement("div",{style:{width:"100%",height:"100%",overflow:"hidden"}},React.createElement(ElementTree,{nodeId:d.id}))):null};let wrapperEl,customStyleEl;const PADDING=0,render$1=a=>{const{containerEl:s,projectId:d,dragAndDrop:c=!1,dblClickShowcase:h=c,checkDragTarget:b=scenelessProjectDragCheck,checkDropTarget:_=scenelessProjectDropCheck}=a,$=getProject(d);CoreContext.clients.LayoutApi().subscribeToLayout($.layoutApi.layoutId),loadDragImage();const _e=a.onElementDoubleClick||h&&scenelessProjectDoubleClick($);if(!s||!$)return;if(!s.shadowRoot){s.attachShadow({mode:"open"}),customStyleEl=document.createElement("style");const lt=document.createElement("style");lt.textContent=getStyle(),wrapperEl=document.createElement("div"),wrapperEl.id="compositor-root",Object.assign(wrapperEl.style,{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",transformOrigin:"center"}),s.shadowRoot.appendChild(lt),s.shadowRoot.appendChild(customStyleEl),s.shadowRoot.appendChild(wrapperEl),new ResizeObserver(ut=>{it()}).observe(s)}const tt=$.compositor.getRoot(),{x:rt,y:ot}=tt.props.size,it=()=>{let{width:lt,height:dt}=s.getBoundingClientRect();const ut=lt/dt,ht=rt/ot;let nt;lt&&dt?ht>ut?nt=lt/(rt+PADDING*2):nt=dt/(ot+PADDING*2):nt=1,wrapperEl.style.willChange="transform",wrapperEl.style.transform=`scale(${nt}) translateZ(0)`,window.__scale=nt,st()},st=()=>{ReactDOM.render(React.createElement(CompositorProvider,{project:$,interactive:c,onElementDoubleClick:_e,checkIsDropTarget:_,checkIsDragTarget:b},React.createElement(Root,{setStyle:lt=>{customStyleEl.textContent=lt}})),wrapperEl)};it()},scenelessProjectDragCheck=a=>a.props.name==="Participant"||a.props.sourceType==="RoomParticipant",scenelessProjectDropCheck=a=>a.props.name==="Content",scenelessProjectDoubleClick=a=>s=>{var c;const d=a.compositor.nodes.find(h=>h.props.name==="Content");if(d){const h=(c=d.props.layoutProps)==null?void 0:c.showcase;CoreContext.Command.updateNode({nodeId:d.id,props:{layoutProps:{...d.props.layoutProps,showcase:h===s.id?null:s.id}}})}},CompositorContext=React.createContext({interactive:!1,project:null,checkIsDragTarget:()=>!1,checkIsDropTarget:()=>!1,onElementDoubleClick:()=>{}}),CompositorProvider=({children:a,...s})=>React.createElement(CompositorContext.Provider,{value:{...s}},a),getStyle=()=>`
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
  font-family: 'Arial';
}

video {
  width: 100%;
  height: 100%;
  object-fit: contain;
}

.NameBanner {
  top: 100%;
  transform: translateY(-100%);
  left: 0;
  height: 30px;
  background: linear-gradient(90deg, rgba(0, 0, 0, 0.5) 50%, rgba(0, 0, 0, 0) 100%);
  padding: 0px 0px 0px 10px;
  color: rgba(255, 255, 255, 0.9);
  font-weight: bold;
  line-height: 30px;
  width: 100%;
  font-size: 28px;
  position: absolute;
}

ls-layout[layout="Presentation"][props*="\\"cover\\"\\:true"] > :first-child .NameBanner {
  top: 0% !important;
  transform: translateY(0%) !important;
}

[layout="Layered"] > [data-item] {
  transform: scale(1.003) !important;
}
[layout="Layered"] > [data-item]:nth-child(2) {
  transform: scale(1.0015) !important;
}
[layout="Layered"] > [data-item]:nth-child(1) {
  transform: scale(1) !important;
}

.logo {
  position: absolute !important;
}

#compositor-root[data-dragging] {}

[data-drag-target] {}
[data-drag-target]:hover > .interactive-overlay {
  box-shadow: 0 0 0 3px inset rgba(255, 255, 255, 0.5);
  cursor: grab;
}
[data-drop-target] {}
[data-drop-target]:hover {}
[data-drag-target][data-drag-target-active] > .interactive-overlay {
  box-shadow: 0 0 0 3px inset rgba(255, 255, 255, 0.2);
}
[data-drag-target][data-drag-target-active] > .item-element {
  opacity: 0.8;
}
[data-layout-drop-target-active] > .interactive-overlay {
  box-shadow: 0 0 0 3px inset yellow;
}
[data-transform-drop-target-active] > .interactive-overlay {
  box-shadow: 0 0 0 3px inset white;
}
`;var LogoPosition=(a=>(a.TopLeft="top-left",a.TopRight="top-right",a.BottomLeft="bottom-left",a.BottomRight="bottom-right",a))(LogoPosition||{}),BannerStyle=(a=>(a.DEFAULT="default",a.MINIMAL="minimal",a.BUBBLE="bubble",a))(BannerStyle||{});const themes={["top-left"]:(a=1280/1920)=>`
      .wrapper {
       top:0;
       left:0;
    }`,["top-right"]:(a=1280/1920)=>`
      .wrapper {
       top:0;
       right:0;
    }`,["bottom-left"]:(a=1280/1920)=>`
      .wrapper {
       bottom:0;
       left:0;
    }`,["bottom-right"]:(a=1280/1920)=>`
      .wrapper {
       bottom:0;
       right:0;
    }`,default:(a="#ABABAB",s=!0,d=1280/1920)=>{const c=color(a).lightness()<.6?"#FFF":"#000",h=color(a).lightness()<.6?"#FFF":"#000",b=color(a).lightness()<.6?"#000":"#FFF",_=$=>$*d+"px";return`
      .ChatOverlay {
        background: ${a} !important;
        margin-bottom: ${_(40)} !important;
        transition: 300ms ease all;
        left: 0;

        /* Default Size 4 */
        font-size: ${_(44)} !important;
        padding: ${_(40)} ${_(100)} !important;
        border-radius: ${_(20)} !important;
      }
      
      .ChatOverlay-badge-icon {
          width:${_(32)};
          height: ${_(32)};
          fill: currentcolor;
          color: ${b};
      }

       .ChatOverlay-badge-container {
          background-color:${h};
          display:flex;
          flex-direction:row;
          padding: ${_(6)} ${_(12)} ${_(6)} ${_(6)};
          border-radius: ${_(10)};
          align-items: center;
          border-bottom-left-radius: 0px !important;
          position: relative;
          border: none;
          cursor: pointer;
       }
      
       .ChatOverlay-badge-username {
          color:${b};
          padding:${_(6)};
          font-size:${_(18)};
          font-weight:700;
          text-transform: capitalize; 
       }
       
       .ChatOverlay-badge-container::before {
          content:"";
          width:15px;
          height:15px;
          background-color:${h};
          position: absolute;
          bottom:-14px;
          left:0;
          clip-path:polygon(0 100%, 12% 87%, 26% 73%, 45% 53%, 59% 40%, 71% 28%, 85% 14%, 100% 0, 0 0);
        }
       

       .ChatOverlay-avatar {
          height: ${_(120)};
          width: ${_(120)};
          left:0;
          right:0;
          top:0;
          bottom:0;
          border-radius:50%;
       }

      .Banner, .NameBanner, .ChatOverlay {
        background: ${a} !important;
        margin-bottom: ${_(40)} !important;
        transition: 300ms ease all;
        left: 0;

        /* Default Size 4 */
        font-size: ${_(44)} !important;
        padding: ${_(40)} ${_(100)} !important;
        border-top-right-radius: ${_(20)} !important;
        border-bottom-right-radius: ${_(20)} !important;
      }

      .Banner-body, .NameBanner-body, .ChatOverlay-body {
        color: ${c} !important;
        font-family: 'Roboto' !important;
        font-style: normal !important;
        font-weight: 700 !important;
        line-height: 120% !important;
      }

      .NameBanner {
        transform-origin: 0 100%;
        margin: 0 !important;
        transform: translateX(-100%);
        opacity: 0 !important;
        white-space: nowrap;
        ${s&&`
          opacity: 1 !important;
          transform: translateX(0);
        `}
      }

      .NameBanner[data-size="4"] {
        padding: ${_(40)} ${_(100)} !important;
        font-size: ${_(44)} !important;
        border-top-right-radius: ${_(20)} !important;
        border-bottom-right-radius: ${_(20)} !important;
      }
      .NameBanner[data-size="3"] {
        padding: ${_(12)} ${_(30)} !important;
        font-size: ${_(44)} !important;
        border-top-right-radius: ${_(20)} !important;
        border-bottom-right-radius: ${_(20)} !important;
      }
      .NameBanner[data-size="2"] {
        padding: ${_(12)} ${_(20)} !important;
        font-size: ${_(28)} !important;
        border-top-right-radius: ${_(16)} !important;
        border-bottom-right-radius: ${_(16)} !important;
      }
      .NameBanner[data-size="1"], .NameBanner[data-size="0"] {
        padding: ${_(8)} ${_(8)} !important;
        font-size: ${_(20)} !important;
        border-top-right-radius: ${_(8)} !important;
        border-bottom-right-radius: ${_(8)} !important;
      }
      .NameBanner[data-size="0"] {
        opacity: 0;
        transform: translateX(-100%);
      }
    `},minimal:(a="#ABABAB",s=!0,d=1280/1920)=>{const c="white",h="#fff",b="#000",_=$=>$*d+"px";return`

      .ChatOverlay-badge-icon {
          width:${_(32)};
          height: ${_(32)};
          fill: currentcolor;
          color: ${b};
      }

       .ChatOverlay-badge-container {
          background-color:${h};
          display:flex;
          flex-direction:row;
          padding: ${_(6)} ${_(12)} ${_(6)} ${_(6)};
          align-items: center;
          position: relative;
          border: none;
          cursor: pointer;
       }

       .ChatOverlay-badge-username {
          color:${b};
          padding:${_(6)};
          font-size:${_(18)};
          font-weight:700;
          text-transform: capitalize; 
       }

       .ChatOverlay-avatar {
          height: ${_(120)};
          width: ${_(120)};
          left:0;
          right:0;
          top:0;
          bottom:0;
          border-radius:50%;
       }


    .Banner, .NameBanner, .ChatOverlay {
        background: ${color(a).fade(color(a).alpha()*.7).toString()} !important;
        padding: ${_(40)} ${_(40)} ${_(40)} ${_(60)} !important;
        position: relative !important;
        margin-bottom: ${_(40)} !important;
        transition: 300ms ease all;
        font-size: ${_(34)} !important;
        left: 0;
      }

      .Banner:before, .NameBanner:before, .ChatOverlay:before {
        z-index: 1;
        content: "";
        position: absolute;
        left: 0;
        top: 0;
        width: 100%;
        height: 100%;
        background: rgba(0,0,0,0.6);
        transition: 300ms ease all;
        opacity: ${color(a).alpha()};
      }
      .Banner:after, .NameBanner:after, .ChatOverlay:after {
        z-index: 1;
        content: "";
        position: absolute;
        left: 0;
        top: 0;
        height: 100%;
        transition: 300ms ease all;
        width: ${_(20)};
        background: ${color(a)};
        opacity: ${color(a).alpha()};
      }
      .Banner-body, .NameBanner-body, .ChatOverlay-body {
        color: ${c} !important;
        font-family: 'Roboto' !important;
        font-style: normal !important;
        font-weight: 700 !important;
        line-height: 120% !important;
        position: relative;
        z-index: 2;
      }
      .Banner-header {
        font-size: ${_(90)};
        position: relative;
        z-index: 2;
      }
      .NameBanner {
        transform-origin: 0 100%;
        margin: 0 !important;
        transform: translateX(-100%);
        opacity: 0 !important;
        white-space: nowrap;
        ${s&&`
          opacity: 1 !important;
          transform: translateX(0);
        `}
      }

      .NameBanner[data-size="4"] {
        padding: ${_(40)} ${_(40)} ${_(40)} ${_(40+20)} !important;
        font-size: ${_(34)} !important;
      }
      .NameBanner[data-size="3"] {
        padding: ${_(16)} ${_(40)} ${_(16)} ${_(40+20)} !important;
        font-size: ${_(34)} !important;
      }
      .NameBanner[data-size="2"] {
        padding: ${_(12)} ${_(24)} ${_(12)} ${_(24+20)} !important;
        font-size: ${_(24)} !important;
      }
      .NameBanner[data-size="1"], .NameBanner[data-size="0"] {
        padding: ${_(12)} ${_(16)} ${_(12)} ${_(16+20)} !important;
        font-size: ${_(18)} !important;
      }
      .NameBanner[data-size="0"] {
        opacity: 0 !important;
        transform: translateX(-100%);
      }
    `},bubble:(a="#ABABAB",s=!0,d=1280/1920)=>{const c=color(a).lightness()<.6?"#FFF":"#000",h=color(a).lightness()<.6?"#FFF":"#000",b=color(a).lightness()<.6?"#000":"#FFF",_=$=>$*d+"px";return`
      .ChatOverlay-badge-icon {
          width:${_(32)};
          height: ${_(32)};
          fill: currentcolor;
          color: ${b};
      }


       .ChatOverlay-badge-container {
          background-color:${h};
          display:flex;
          flex-direction:row;
          padding: ${_(6)} ${_(12)} ${_(6)} ${_(6)};
          align-items: center;
          z-index: 1;
          border: none;
          cursor: pointer;
          top: 0;
          margin-bottom: 2px;
          margin-left: -${_(30)};
          border-radius: 30px;
       }

       .ChatOverlay-badge-username {
          color:${b};
          padding:${_(6)};
          font-size:${_(18)};
          font-weight:700;
          text-transform: capitalize; 
       }

       .ChatOverlayAvatar-container {
          height: ${_(120)};
          width: ${_(120)};
          top: 0;
       }
       .ChatOverlay-avatar {
          height: ${_(120)};
          width: ${_(120)};
          left:0;
          right:0;
          top:0;
          bottom:0;
          border-radius:50%;
       }


      .Banner, .ChatOverlay {
        transform: translateX(-50%);
        left: 50%;
        margin-bottom: ${_(40)} !important;
      }

      .Banner, .NameBanner, .ChatOverlay {
        background: ${color(a)} !important;
        color: ${c} !important;
        border-radius: 500px !important;
        transition: 300ms ease all;

        /* Default Style */
        border: 4px solid ${c} !important;
        padding: ${_(40)} ${_(80)} !important;
        font-size: ${_(40)} !important;
      }
      .Banner-body, .NameBanner-body, .ChatOverlay-body {
        color: ${c} !important;
        text-align: center !important;
        font-family: 'Roboto' !important;
        font-style: normal !important;
        font-weight: 700 !important;
        line-height: 120% !important;
      }
      .NameBanner {
        transform-origin: 0% 100%;
        transform: translateX(-100%);
        opacity: 0 !important;
        white-space: nowrap;
        ${s&&`
          opacity: 1 !important;
          transform: translateX(0);
        `}
      }

      ls-layout[layout="Presentation"][props*="\\"cover\\"\\:true"] > :first-child .NameBanner {
        top: 0% !important;
        transform: translateY(0%) !important;
        margin: ${_(20)} ${_(20)};
      }


      .NameBanner[data-size="4"] {
        padding: ${_(40)} ${_(80)} ${_(40)} ${_(80)} !important;
        font-size: ${_(40)} !important;
      }
      .NameBanner[data-size="3"] {
        padding: ${_(12)} ${_(30)} ${_(12)} ${_(30)} !important;
        font-size: ${_(40)} !important;
        margin: -${_(20)} ${_(20)};
      }
      .NameBanner[data-size="2"] {
        padding: ${_(12)} ${_(30)} ${_(12)} ${_(30)} !important;
        font-size: ${_(26)} !important;
        margin: -${_(8)} ${_(8)};
      }
      .NameBanner[data-size="1"], .NameBanner[data-size="0"] {
        padding: ${_(8)} ${_(16)} ${_(8)} ${_(16)} !important;
        font-size: ${_(18)} !important;
        border-width: ${_(2)} !important;
        margin: -${_(16)} ${_(8)};
      }
      .NameBanner[data-size="0"] {
        opacity: 0 !important;
        transform: translateX(-100%);
      }
    `}},iconStyles={twitch:{icon:"Twitch"},youtube:{icon:"YouTube"},facebook:{icon:"Facebook"}},fixLink=a=>!a.startsWith("http:")&&!a.startsWith("https:")?`https://${a}`:a,ChatOverlay={name:"LS-ChatOverlay",sourceType:"ChatOverlay",create({onUpdate:a,onEvent:s},d){const c=document.createElement("div"),h=getProject(CoreContext.state.activeProjectId),b=h.compositor.getRoot(),{x:_}=b.props.size,$=(_!=null?_:1280)/1920,_e=dt=>dt*$+"px";let tt;const rt=(dt,ut)=>{const ht=dt.width/ut.width;return dt.height/ut.height>=.25&&ht>=.75?4:ht>=.75?1:ht>=.5?-2:ht>.25?-3:-4};CoreContext.onInternal("ProjectChanged",()=>{var ut;const{bannerStyle:dt}=(ut=h.props)!=null?ut:{};dt&&lt({...tt,metadata:{...tt.metadata,bannerStyle:dt}})});const ot=React.memo(dt=>{var ut,ht,nt;return(dt==null?void 0:dt.type)==="emoticon"&&((ut=dt==null?void 0:dt.data)==null?void 0:ut.type)==="direct"?React.createElement("img",{src:(ht=dt==null?void 0:dt.data)==null?void 0:ht.url,style:{height:_e(36)},alt:dt==null?void 0:dt.text}):(dt==null?void 0:dt.type)==="link"?React.createElement("a",{style:{color:"#FFF",wordBreak:"break-all"},target:"_blank",rel:"noreferrer",href:fixLink((nt=dt==null?void 0:dt.data)==null?void 0:nt.url)},dt==null?void 0:dt.text):React.createElement("span",null,dt==null?void 0:dt.text)}),it=dt=>{const ut={height:`${dt.height}`,width:`${dt.width}`,background:dt.background||"transparent",display:"inline-block",verticalAlign:"middle",borderRadius:"50%",fontSize:`${dt.fontSize}`};return React.createElement("div",{style:{...ut,position:"relative",marginRight:dt==null?void 0:dt.marginRight}},React.createElement("div",{style:{left:"50%",position:"absolute",top:"50%",transform:"translate(-50%, -50%)"}},dt.username.substring(0,2).toUpperCase()))},st=dt=>{const{message:ut,id:ht,username:nt,metadata:ct}=dt||{},[mt,kt]=react.exports.useState(0),{index:Tt,platform:Pt,avatar:At,bannerStyle:gt}=ct||{},Ct=react.exports.useMemo(()=>iconStyles[Pt],[Pt]),Nt=react.exports.useRef();return react.exports.useLayoutEffect(()=>{if(!Nt.current)return;const vt=()=>{const It=Nt.current;It&&kt(rt({width:It.clientWidth,height:It.clientHeight},{width:h.compositor.getRoot().props.size.x,height:h.compositor.getRoot().props.size.y}))},Et=new ResizeObserver(It=>{vt()});return vt(),Et.observe(Nt.current),()=>{Nt!=null&&Nt.current&&Et.unobserve(Nt==null?void 0:Nt.current)}},[Nt.current,h]),React.createElement(APIKitAnimation,{id:`${ht}_${Tt}`,type:"chatoverlay",enter:APIKitAnimationTypes.SLIDE_IN_LEFT,exit:APIKitAnimationTypes.SLIDE_OUT_LEFT,duration:200},React.createElement("div",{className:"ChatOverlayContainer",style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",display:"flex",flexDirection:"row",justifyContent:"flex-start",alignItems:"flex-end",marginLeft:gt!==BannerStyle.BUBBLE?"5%":"0px"}},gt!==BannerStyle.BUBBLE?React.createElement("div",{style:{width:"100%",display:"flex"}},At?React.createElement("span",{style:{marginRight:"20px"}},React.createElement("img",{src:At,className:"ChatOverlay-avatar"})):React.createElement(it,{height:_e(110),width:_e(120),background:primary(500),username:nt,marginRight:20,fontSize:_e(30)}),React.createElement("div",{style:{width:"100%"}},nt&&React.createElement("button",{className:"ChatOverlay-badge-container"},(Ct==null?void 0:Ct.icon)&&React.createElement(Icon,{className:"ChatOverlay-badge-icon",name:Ct==null?void 0:Ct.icon}),React.createElement("div",{className:"ChatOverlay-badge-username"},nt)),React.createElement("div",{className:"ChatOverlay",style:{padding:10,background:"orange",width:"fit-content",height:"fit-content",maxWidth:"84%",position:"relative"}},ut&&React.createElement("div",{className:"ChatOverlay-body",style:{gap:10,display:"flex",alignItems:"center",flexWrap:"wrap",verticalAlign:"middle"}},ut.map((vt,Et)=>React.createElement(ot,{key:Et,...vt})))))):React.createElement("div",{style:{width:"100%",display:"flex"}},React.createElement("div",{className:"ChatOverlay",style:{padding:10,background:"orange",width:"fit-content",height:"fit-content",maxWidth:"84%",position:"relative"}},React.createElement("div",{style:{display:"flex",marginTop:`-${_e(160)}`,alignItems:"flex-end",padding:`${_e(14)} ${_e(0)} ${_e(14)} ${_e(0)}`,marginLeft:`${mt*10}px`}},At?React.createElement("div",{className:"ChatOverlayAvatar-container"},React.createElement("img",{src:At,className:"ChatOverlay-avatar"})):React.createElement("div",{className:"ChatOverlayAvatar-container"},React.createElement(it,{height:_e(120),width:_e(120),background:primary(500),username:nt,fontSize:_e(30)})),nt&&React.createElement("button",{className:"ChatOverlay-badge-container"},(Ct==null?void 0:Ct.icon)&&React.createElement(Icon,{className:"ChatOverlay-badge-icon",name:Ct==null?void 0:Ct.icon}),React.createElement("div",{className:"ChatOverlay-badge-username"},nt))),ut&&React.createElement("div",{ref:Nt,className:"ChatOverlay-body",style:{gap:10,alignItems:"center",flexWrap:"wrap",verticalAlign:"middle"}},ut.map((vt,Et)=>React.createElement(ot,{key:Et,...vt})))))))},lt=dt=>ReactDOM.render(React.createElement(st,{...dt}),c);return a(dt=>{var ht;const{bannerStyle:ut=BannerStyle.DEFAULT}=(ht=h.props)!=null?ht:{};tt={...dt,metadata:{...dt.metadata,bannerStyle:ut}},lt(tt)}),{root:c}}},Background$1={name:"LS-Background",sourceType:"Background",create({onUpdate:a,onRemove:s},{sourceProps:d}){s(()=>{clearInterval(b)});const c=document.createElement("div"),h=getProject(CoreContext.state.activeProjectId).role;let b;const _=({source:rt,setStartAnimation:ot})=>{var At,gt;const{src:it,type:st,meta:lt,loop:dt}=(rt==null?void 0:rt.sourceProps)||{},{id:ut,sourceType:ht}=rt||{},[nt,ct]=React.useState(null),mt=React.useRef(null);console.log("Updated current time",(At=mt==null?void 0:mt.current)==null?void 0:At.currentTime);const kt=React.useCallback(Ct=>{mt.current=Ct,ct(Ct?Ct.id:null)},[]),Tt=React.useCallback(()=>{mt!=null&&mt.current&&mt.current.play().catch(()=>{var Ct;mt.current.muted=!0,(Ct=mt.current)==null||Ct.play()})},[it]),Pt=React.useCallback(()=>{b&&clearInterval(b),hasPermission(h,Permission.UpdateProject)&&trigger$1("VideoEnded",{id:ut,category:st})},[it]);return React.useEffect(()=>{lt&&(mt==null?void 0:mt.current)&&nt&&hasPermission(h,Permission.ManageSelf)&&lt!=null&&lt.time&&(mt.current.currentTime=Number(lt==null?void 0:lt.time))},[lt==null?void 0:lt.time,nt]),React.useEffect(()=>()=>{b&&clearInterval(b)},[ut]),React.useEffect(()=>{nt?mt.current&&(mt.current.src=it,mt.current.play().catch(()=>{mt.current.muted=!0,mt.current.play()}),hasPermission(h,Permission.UpdateProject)&&(b=setInterval(()=>{if(mt.current.duration){const Ct=mt.current.duration-mt.current.currentTime;trigger$1("VideoTimeUpdate",{category:ht,id:ut,time:Math.floor(Ct)})}},1e3))):b&&clearInterval(b)},[nt]),React.createElement(React.Fragment,{key:ut},it&&React.createElement("video",{loop:dt,id:ut,ref:kt,style:{...(gt=d==null?void 0:d.meta)==null?void 0:gt.style,...lt.style},onLoadedData:Tt,onEnded:Pt,onCanPlay:()=>ot(!0)}))},$=({source:rt,setStartAnimation:ot})=>{var ut;const{src:it,meta:st,type:lt}=(rt==null?void 0:rt.sourceProps)||{},{id:dt}=rt||{};return React.createElement(React.Fragment,{key:dt},it&&React.createElement("img",{style:{...(ut=d==null?void 0:d.meta)==null?void 0:ut.style,...st==null?void 0:st.style},src:it,onLoad:()=>ot(!0)}))},_e=({source:rt})=>{const{type:ot}=rt.sourceProps,{id:it}=rt||{},[st,lt]=React.useState(!1);return react.exports.useEffect(()=>{lt(!1)},[it]),React.createElement(APIKitAnimation,{id:it,type:"background",enter:APIKitAnimationTypes.FADE_IN,exit:APIKitAnimationTypes.FADE_OUT,duration:400},React.createElement("div",{style:{opacity:st?1:0},className:"backgroundContainer background-transition"},it&&ot==="image"&&React.createElement($,{source:rt,setStartAnimation:lt}),it&&ot==="video"&&React.createElement(_,{source:rt,setStartAnimation:lt})))},tt=rt=>ReactDOM.render(React.createElement(React.Fragment,null,React.createElement(_e,{source:rt})),c);return a(rt=>{tt({...rt})}),{root:c}}},SourceTriggerMap=[{sourceType:"Overlay",trigger:"OverlayMetadataUpdate"},{sourceType:"Background",trigger:"BackgroundMetadataUpdate"}],Video2={name:"LS-Video-2",sourceType:"Video2",props:{id:{type:String,required:!0}},useSource(a,s){return a.find(d=>d.props.type===s.id)},create({onUpdate:a,onNewSource:s,onRemove:d},c){d(()=>{clearInterval(_e)});const h=document.createElement("div"),b=getProjectRoom(CoreContext.state.activeProjectId),_=getProject(CoreContext.state.activeProjectId).role;let $,_e;const tt=({source:ot})=>{var Ct;const it=SourceTriggerMap.find(Nt=>Nt.sourceType===c.proxySource),{src:st,type:lt,meta:dt,loop:ut}=(ot==null?void 0:ot.value)||{},{id:ht}=ot||{},[nt,ct]=React.useState(null),mt=React.useRef(null),[kt,Tt]=React.useState(!1);console.log("Updated current time",(Ct=mt==null?void 0:mt.current)==null?void 0:Ct.currentTime),React.useEffect(()=>{Tt(!1)},[ht]);const Pt=React.useCallback(Nt=>{mt.current=Nt,ct(Nt?Nt.id:null)},[]),At=React.useCallback(()=>{mt!=null&&mt.current&&mt.current.play().catch(()=>{var Nt;mt.current.muted=!0,(Nt=mt.current)==null||Nt.play()})},[st]),gt=React.useCallback(()=>{_e&&clearInterval(_e),trigger$1("VideoEnded",{id:ht,category:lt})},[st]);return React.useEffect(()=>{dt&&(mt==null?void 0:mt.current)&&nt&&hasPermission(_,Permission.ManageSelf)&&(mt.current.currentTime=Number(dt==null?void 0:dt.time))},[dt==null?void 0:dt.time,nt]),React.useEffect(()=>()=>{_e&&clearInterval(_e)},[ht]),React.useEffect(()=>{if(!nt)_e&&clearInterval(_e);else if(mt.current)return mt.current.src=st,ut&&(mt.current.loop=Boolean(ut)),mt.current.play().catch(()=>{mt.current.muted=!0,mt.current.play()}),_e=setInterval(()=>{if(mt.current.duration){const Nt=mt.current.duration-mt.current.currentTime;trigger$1("VideoTimeUpdate",{category:lt,id:ht,time:Math.floor(Nt)})}},1e3),b==null?void 0:b.onData((Nt,vt)=>{var Et,It;(Et=mt==null?void 0:mt.current)!=null&&Et.currentTime&&Nt.type==="UserJoined"&&hasPermission(_,Permission.ManageGuests)&&triggerInternal$1(it.trigger,{projectId:CoreContext.state.activeProjectId,role:_,sourceId:nt,doTrigger:!0,metadata:{time:Math.floor((It=mt==null?void 0:mt.current)==null?void 0:It.currentTime)||0,owner:b==null?void 0:b.participantId,guest:vt}})})},[nt]),React.createElement(APIKitAnimation,{id:ht,type:"video",enter:APIKitAnimationTypes.FADE_IN,exit:APIKitAnimationTypes.FADE_OUT,duration:400},React.createElement("div",{style:{opacity:kt?1:0,width:"100%",height:"100%"},className:"video-transition"},st&&React.createElement("video",{id:ht,ref:Pt,style:c.style,...c.props,onLoadedData:At,onEnded:gt,onCanPlayThrough:()=>Tt(!0)})))},rt=()=>ReactDOM.render(React.createElement(tt,{source:$}),h);return a(()=>{rt()}),s(ot=>{$=ot,rt()}),{root:h}}},Image2={name:"LS-Image-2",sourceType:"Image2",props:{id:{type:String,required:!0}},useSource(a,s){return a.find(d=>d.props.type===s.id)},create({onUpdate:a,onNewSource:s},d){const c=document.createElement("div");let h;const b=({source:$})=>{const{src:_e,meta:tt}=($==null?void 0:$.value)||{},{id:rt}=$||{},[ot,it]=React.useState(!1);return React.useEffect(()=>{it(!1)},[rt]),React.createElement(APIKitAnimation,{id:rt,type:"image",enter:APIKitAnimationTypes.FADE_IN,exit:APIKitAnimationTypes.FADE_OUT,duration:400},React.createElement("div",{style:{opacity:ot?1:0,width:"100%",height:"100%"},className:"image-transition"},_e&&React.createElement("img",{style:{...d==null?void 0:d.style,...tt==null?void 0:tt.style},src:_e,onLoad:()=>it(!0)})))},_=()=>ReactDOM.render(React.createElement(b,{source:h}),c);return a(()=>{_()}),s($=>{h=$,_()}),{root:c}}};var Transforms=Object.freeze(Object.defineProperty({__proto__:null,RoomParticipant:RoomParticipant$1,Square,Image:Image$1,Element,Video,Banner:Banner$1,Logo:Logo$1,Overlay,ChatOverlay,Background:Background$1,Video2,Image2},Symbol.toStringTag,{value:"Module"}));/*! (c) Andrea Giammarchi - ISC */var self$1={};try{self$1.WeakMap=WeakMap}catch(a){self$1.WeakMap=function(s,d){var c=d.defineProperty,h=d.hasOwnProperty,b=_.prototype;return b.delete=function(_e){return this.has(_e)&&delete _e[this._]},b.get=function(_e){return this.has(_e)?_e[this._]:void 0},b.has=function(_e){return h.call(_e,this._)},b.set=function(_e,tt){return c(_e,this._,{configurable:!0,value:tt}),this},_;function _(_e){c(this,"_",{value:"_@ungap/weakmap"+s++}),_e&&_e.forEach($,this)}function $(_e){this.set(_e[0],_e[1])}}(Math.random(),Object)}var WeakMap$1=self$1.WeakMap;/*! (c) Andrea Giammarchi - ISC */var UID="-"+Math.random().toFixed(6)+"%",UID_IE=!1;try{(function(a,s,d){return s in a&&(a.innerHTML="<p "+d+'="'+UID+'"></p>',a[s].childNodes[0].getAttribute(d)==UID)})(document.createElement("template"),"content","tabindex")||(UID="_dt: "+UID.slice(1,-1)+";",UID_IE=!0)}catch(a){}var UIDC="<!--"+UID+"-->",COMMENT_NODE=8,ELEMENT_NODE$1=1,TEXT_NODE=3,SHOULD_USE_TEXT_CONTENT=/^(?:plaintext|script|style|textarea|title|xmp)$/i,VOID_ELEMENTS=/^(?:area|base|br|col|embed|hr|img|input|keygen|link|menuitem|meta|param|source|track|wbr)$/i;/*! (c) Andrea Giammarchi - ISC */function domsanitizer(a){return a.join(UIDC).replace(selfClosing,fullClosing).replace(attrSeeker,attrReplacer)}var spaces=" \\f\\n\\r\\t",almostEverything="[^"+spaces+`\\/>"'=]+`,attrName="["+spaces+"]+"+almostEverything,tagName="<([A-Za-z]+[A-Za-z0-9:._-]*)((?:",attrPartials=`(?:\\s*=\\s*(?:'[^']*?'|"[^"]*?"|<[^>]*?>|`+almostEverything.replace("\\/","")+"))?)",attrSeeker=new RegExp(tagName+attrName+attrPartials+"+)(["+spaces+"]*/?>)","g"),selfClosing=new RegExp(tagName+attrName+attrPartials+"*)(["+spaces+"]*/>)","g"),findAttributes=new RegExp("("+attrName+`\\s*=\\s*)(['"]?)`+UIDC+"\\2","gi");function attrReplacer(a,s,d,c){return"<"+s+d.replace(findAttributes,replaceAttributes)+c}function replaceAttributes(a,s,d){return s+(d||'"')+UID+(d||'"')}function fullClosing(a,s,d){return VOID_ELEMENTS.test(s)?a:"<"+s+d+"></"+s+">"}const{isArray}=Array,{indexOf,slice}=[];var umap=a=>({get:s=>a.get(s),set:(s,d)=>(a.set(s,d),d)});const ELEMENT_NODE=1,nodeType=111,remove=({firstChild:a,lastChild:s})=>{const d=document.createRange();return d.setStartAfter(a),d.setEndAfter(s),d.deleteContents(),a},diffable=(a,s)=>a.nodeType===nodeType?1/s<0?s?remove(a):a.lastChild:s?a.valueOf():a.firstChild:a,persistent=a=>{const{childNodes:s}=a,{length:d}=s;if(d<2)return d?s[0]:a;const c=slice.call(s,0),h=c[0],b=c[d-1];return{ELEMENT_NODE,nodeType,firstChild:h,lastChild:b,valueOf(){if(s.length!==d){let _=0;for(;_<d;)a.appendChild(c[_++])}return a}}};/*! (c) Andrea Giammarchi - ISC */var createContent=function(a){var s="fragment",d="template",c="content"in _(d),h=c?function(_e){var tt=_(d);return tt.innerHTML=_e,tt.content}:function(_e){var tt=_(s),rt=_(d),ot=null;if(/^[^\S]*?<(col(?:group)?|t(?:head|body|foot|r|d|h))/i.test(_e)){var it=RegExp.$1;rt.innerHTML="<table>"+_e+"</table>",ot=rt.querySelectorAll(it)}else rt.innerHTML=_e,ot=rt.childNodes;return b(tt,ot),tt};return function(tt,rt){return(rt==="svg"?$:h)(tt)};function b(_e,tt){for(var rt=tt.length;rt--;)_e.appendChild(tt[0])}function _(_e){return _e===s?a.createDocumentFragment():a.createElementNS("http://www.w3.org/1999/xhtml",_e)}function $(_e){var tt=_(s),rt=_("div");return rt.innerHTML='<svg xmlns="http://www.w3.org/2000/svg">'+_e+"</svg>",b(tt,rt.firstChild.childNodes),tt}}(document),udomdiff=(a,s,d,c,h)=>{const b=d.length;let _=s.length,$=b,_e=0,tt=0,rt=null;for(;_e<_||tt<$;)if(_===_e){const ot=$<b?tt?c(d[tt-1],-0).nextSibling:c(d[$-tt],0):h;for(;tt<$;)a.insertBefore(c(d[tt++],1),ot)}else if($===tt)for(;_e<_;)(!rt||!rt.has(s[_e]))&&a.removeChild(c(s[_e],-1)),_e++;else if(s[_e]===d[tt])_e++,tt++;else if(s[_-1]===d[$-1])_--,$--;else if(s[_e]===d[$-1]&&d[tt]===s[_-1]){const ot=c(s[--_],-1).nextSibling;a.insertBefore(c(d[tt++],1),c(s[_e++],-1).nextSibling),a.insertBefore(c(d[--$],1),ot),s[_]=d[$]}else{if(!rt){rt=new Map;let ot=tt;for(;ot<$;)rt.set(d[ot],ot++)}if(rt.has(s[_e])){const ot=rt.get(s[_e]);if(tt<ot&&ot<$){let it=_e,st=1;for(;++it<_&&it<$&&rt.get(s[it])===ot+st;)st++;if(st>ot-tt){const lt=c(s[_e],0);for(;tt<ot;)a.insertBefore(c(d[tt++],1),lt)}else a.replaceChild(c(d[tt++],1),c(s[_e++],-1))}else _e++}else a.removeChild(c(s[_e++],-1))}return d};/*! (c) Andrea Giammarchi - ISC */var importNode=function(a,s,d,c,h){var b=h in a,_=a.createDocumentFragment();_[s](a[c]("g")),_[s](a[c](""));var $=b?a[h](_,!0):_[d](!0);return $.childNodes.length<2?function _e(tt,rt){for(var ot=tt[d](),it=tt.childNodes||[],st=it.length,lt=0;rt&&lt<st;lt++)ot[s](_e(it[lt],rt));return ot}:b?a[h]:function(_e,tt){return _e[d](!!tt)}}(document,"appendChild","cloneNode","createTextNode","importNode"),trim="".trim||function(){return String(this).replace(/^\s+|\s+/g,"")},normalizeAttributes=UID_IE?function(a,s){var d=s.join(" ");return s.slice.call(a,0).sort(function(c,h){return d.indexOf(c.name)<=d.indexOf(h.name)?-1:1})}:function(a,s){return s.slice.call(a,0)};function find(a,s){for(var d=s.length,c=0;c<d;)a=a.childNodes[s[c++]];return a}function parse(a,s,d,c){for(var h=a.childNodes,b=h.length,_=0;_<b;){var $=h[_];switch($.nodeType){case ELEMENT_NODE$1:var _e=c.concat(_);parseAttributes($,s,d,_e),parse($,s,d,_e);break;case COMMENT_NODE:var tt=$.textContent;if(tt===UID)d.shift(),s.push(SHOULD_USE_TEXT_CONTENT.test(a.nodeName)?Text(a,c):Any($,c.concat(_)));else switch(tt.slice(0,2)){case"/*":if(tt.slice(-2)!=="*/")break;case"\u{1F47B}":a.removeChild($),_--,b--}break;case TEXT_NODE:SHOULD_USE_TEXT_CONTENT.test(a.nodeName)&&trim.call($.textContent)===UIDC&&(d.shift(),s.push(Text(a,c)));break}_++}}function parseAttributes(a,s,d,c){for(var h=a.attributes,b=[],_=[],$=normalizeAttributes(h,d),_e=$.length,tt=0;tt<_e;){var rt=$[tt++],ot=rt.value===UID,it;if(ot||1<(it=rt.value.split(UIDC)).length){var st=rt.name;if(b.indexOf(st)<0){b.push(st);var lt=d.shift().replace(ot?/^(?:|[\S\s]*?\s)(\S+?)\s*=\s*('|")?$/:new RegExp("^(?:|[\\S\\s]*?\\s)("+st+`)\\s*=\\s*('|")[\\S\\s]*`,"i"),"$1"),dt=h[lt]||h[lt.toLowerCase()];if(ot)s.push(Attr(dt,c,lt,null));else{for(var ut=it.length-2;ut--;)d.shift();s.push(Attr(dt,c,lt,it))}}_.push(rt)}}_e=_.length,tt=0;for(var ht=0<_e&&UID_IE&&!("ownerSVGElement"in a);tt<_e;){var nt=_[tt++];ht&&(nt.value=""),a.removeAttribute(nt.name)}var ct=a.nodeName;if(/^script$/i.test(ct)){var mt=document.createElement(ct);for(_e=h.length,tt=0;tt<_e;)mt.setAttributeNode(h[tt++].cloneNode(!0));mt.textContent=a.textContent,a.parentNode.replaceChild(mt,a)}}function Any(a,s){return{type:"any",node:a,path:s}}function Attr(a,s,d,c){return{type:"attr",node:a,path:s,name:d,sparse:c}}function Text(a,s){return{type:"text",node:a,path:s}}var parsed=umap(new WeakMap$1);function createInfo(a,s){var d=(a.convert||domsanitizer)(s),c=a.transform;c&&(d=c(d));var h=createContent(d,a.type);cleanContent(h);var b=[];return parse(h,b,s.slice(0),[]),{content:h,updates:function(_){for(var $=[],_e=b.length,tt=0,rt=0;tt<_e;){var ot=b[tt++],it=find(_,ot.path);switch(ot.type){case"any":$.push({fn:a.any(it,[]),sparse:!1});break;case"attr":var st=ot.sparse,lt=a.attribute(it,ot.name,ot.node);st===null?$.push({fn:lt,sparse:!1}):(rt+=st.length-2,$.push({fn:lt,sparse:!0,values:st}));break;case"text":$.push({fn:a.text(it),sparse:!1}),it.textContent="";break}}return _e+=rt,function(){var dt=arguments.length;if(_e!==dt-1)throw new Error(dt-1+" values instead of "+_e+`
`+s.join("${value}"));for(var ut=1,ht=1;ut<dt;){var nt=$[ut-ht];if(nt.sparse){var ct=nt.values,mt=ct[0],kt=1,Tt=ct.length;for(ht+=Tt-2;kt<Tt;)mt+=arguments[ut++]+ct[kt++];nt.fn(mt)}else nt.fn(arguments[ut++])}return _}}}}function createDetails(a,s){var d=parsed.get(s)||parsed.set(s,createInfo(a,s));return d.updates(importNode.call(document,d.content,!0))}var empty=[];function domtagger(a){var s=empty,d=cleanContent;return function(c){return s!==c&&(d=createDetails(a,s=c)),d.apply(null,arguments)}}function cleanContent(a){for(var s=a.childNodes,d=s.length;d--;){var c=s[d];c.nodeType!==1&&trim.call(c.textContent).length===0&&a.removeChild(c)}}/*! (c) Andrea Giammarchi - ISC */var hyperStyle=function(){var a=/acit|ex(?:s|g|n|p|$)|rph|ows|mnc|ntw|ine[ch]|zoo|^ord/i,s=/([^A-Z])([A-Z]+)/g;return function($,_e){return"ownerSVGElement"in $?c($,_e):b($.style,!1)};function d(_,$,_e){return $+"-"+_e.toLowerCase()}function c(_,$){var _e;return $?_e=$.cloneNode(!0):(_.setAttribute("style","--hyper:style;"),_e=_.getAttributeNode("style")),_e.value="",_.setAttributeNode(_e),b(_e,!0)}function h(_){var $,_e=[];for($ in _)_e.push($.replace(s,d),":",_[$],";");return _e.join("")}function b(_,$){var _e,tt;return function(rt){var ot,it,st,lt;switch(typeof rt){case"object":if(rt){if(_e==="object"){if(!$&&tt!==rt)for(it in tt)it in rt||(_[it]="")}else $?_.value="":_.cssText="";ot=$?{}:_;for(it in rt)lt=rt[it],st=typeof lt=="number"&&!a.test(it)?lt+"px":lt,!$&&/^--/.test(it)?ot.setProperty(it,st):ot[it]=st;_e="object",$?_.value=h(tt=ot):tt=rt;break}default:tt!=rt&&(_e="string",tt=rt,$?_.value=rt||"":_.cssText=rt||"");break}}}}();const aria=a=>s=>{for(const d in s){const c=d==="role"?d:`aria-${d}`,h=s[d];h==null?a.removeAttribute(c):a.setAttribute(c,h)}},attribute=(a,s)=>{let d,c=!0;const h=document.createAttributeNS(null,s);return b=>{d!==b&&(d=b,d==null?c||(a.removeAttributeNode(h),c=!0):(h.value=b,c&&(a.setAttributeNodeNS(h),c=!1)))}},boolean=(a,s,d)=>c=>{d!==!!c&&((d=!!c)?a.setAttribute(s,""):a.removeAttribute(s))},data=({dataset:a})=>s=>{for(const d in s){const c=s[d];c==null?delete a[d]:a[d]=c}},event=(a,s)=>{let d,c=s.slice(2);return!(s in a)&&s.toLowerCase()in a&&(c=c.toLowerCase()),h=>{const b=isArray(h)?h:[h,!1];d!==b[0]&&(d&&a.removeEventListener(c,d,b[1]),(d=b[0])&&a.addEventListener(c,d,b[1]))}},ref=a=>s=>{typeof s=="function"?s(a):s.current=a},setter=(a,s)=>s==="dataset"?data(a):d=>{a[s]=d},hyperProperty=(a,s)=>{let d;return c=>{d!==c&&(d=c,a[s]!==c&&(c==null?(a[s]="",a.removeAttribute(s)):a[s]=c))}},readOnly=/^(?:form|list)$/i,text=(a,s)=>a.ownerDocument.createTextNode(s);function Tagger(a){return this.type=a,domtagger(this)}Tagger.prototype={attribute(a,s,d){const c=this.type==="svg";switch(s){case"class":if(c)return attribute(a,s);s="className";case"props":return setter(a,s);case"aria":return aria(a);case"style":return hyperStyle(a,d,c);case"ref":return ref(a);case".dataset":return data(a);default:return s.slice(0,1)==="."?setter(a,s.slice(1)):s.slice(0,1)==="?"?boolean(a,s.slice(1)):s.slice(0,2)==="on"?event(a,s):s in a&&!(c||readOnly.test(s))?hyperProperty(a,s):attribute(a,s)}},any(a,s){const{type:d}=this;let c=!1,h;const b=_=>{switch(typeof _){case"string":case"number":case"boolean":c?h!==_&&(h=_,s[0].textContent=_):(c=!0,h=_,s=udomdiff(a.parentNode,s,[text(a,_)],diffable,a));break;case"function":b(_(a));break;case"object":case"undefined":if(_==null){c=!1,s=udomdiff(a.parentNode,s,[],diffable,a);break}default:if(c=!1,h=_,isArray(_))if(_.length===0)s.length&&(s=udomdiff(a.parentNode,s,[],diffable,a));else switch(typeof _[0]){case"string":case"number":case"boolean":b(String(_));break;case"function":b(_.map(invoke,a));break;case"object":isArray(_[0])&&(_=_.concat.apply([],_));default:s=udomdiff(a.parentNode,s,_,diffable,a);break}else"ELEMENT_NODE"in _?s=udomdiff(a.parentNode,s,_.nodeType===11?slice.call(_.childNodes):[_],diffable,a):"text"in _?b(String(_.text)):"any"in _?b(_.any):"html"in _?s=udomdiff(a.parentNode,s,slice.call(createContent([].concat(_.html).join(""),d).childNodes),diffable,a):"length"in _&&b(slice.call(_));break}};return b},text(a){let s;const d=c=>{if(s!==c){s=c;const h=typeof c;h==="object"&&c?"text"in c?d(String(c.text)):"any"in c?d(c.any):"html"in c?d([].concat(c.html).join("")):"length"in c&&d(slice.call(c).join("")):h==="function"?d(c(a)):a.textContent=c==null?"":c}};return d}};function invoke(a){return a(this)}const{create,freeze,keys}=Object;Tagger.prototype;const cache=umap(new WeakMap$1),createRender=a=>({html:outer("html",a),svg:outer("svg",a),render(s,d){const c=typeof d=="function"?d():d,h=cache.get(s)||cache.set(s,createCache()),b=c instanceof LighterHole?unroll(a,h,c):c;return b!==h.wire&&(h.wire=b,s.textContent="",s.appendChild(b.valueOf())),s}}),createCache=()=>({stack:[],entry:null,wire:null}),outer=(a,s)=>{const d=umap(new WeakMap$1),c=b=>function(){return unroll(s,b,h.apply(null,arguments))};return h.for=(b,_)=>{const $=d.get(b)||d.set(b,create(null));return $[_]||($[_]=c(createCache()))},h.node=function(){return unroll(s,createCache(),h.apply(null,arguments)).valueOf()},h;function h(){return new LighterHole(a,tta.apply(null,arguments))}},unroll=(a,s,{type:d,template:c,values:h})=>{const{length:b}=h;unrollValues(a,s,h,b);let{entry:_}=s;if(!_||_.template!==c||_.type!==d){const $=new a(d);s.entry=_={type:d,template:c,tag:$,wire:persistent($(c,...h))}}else _.tag(c,...h);return _.wire},unrollValues=(a,{stack:s},d,c)=>{for(let h=0;h<c;h++){const b=d[h];b instanceof Hole?d[h]=unroll(a,s[h]||(s[h]=createCache()),b):isArray(b)?unrollValues(a,s[h]||(s[h]=createCache()),b,b.length):s[h]=null}c<s.length&&s.splice(c)};freeze(LighterHole);function LighterHole(a,s){this.type=a,this.template=s.shift(),this.values=s}const Hole=LighterHole,{render,html,svg}=createRender(Tagger);function tta(){let a=[],s=0,{length:d}=arguments;for(;s<d;)a.push(arguments[s++]);return a}const Free={name:"Free",layout:({props:a,children:s,size:d})=>s.reduce((c,h)=>{const{size:b={x:"100%",y:"100%"},position:_={x:0,y:0},opacity:$=1}=h.props;return{...c,[h.id]:{position:{x:_.x,y:_.y},size:{x:b.x,y:b.y},opacity:$}}},{})},Column={name:"Column",layout:({props:a={},children:s,size:d})=>{let{justify:c="center",align:h="center",cover:b=!1,margin:_={},dimensions:$=16/9,reverse:_e=!1}=a;const tt=b?0:Math.min(d.y/6,12);_={left:tt,right:tt,top:tt,bottom:tt,between:tt,..._};const rt=d.y-_.top-_.bottom,ot=d.x-_.left-_.right,it=_.between*((s.length||1)-1),st=Math.min(ot,(rt-it)/(s.length||1)*$),lt=st/$;return html.node`
      <div style=${{height:"100%",width:b?d.x+"px":"auto",display:"flex",flexDirection:_e?"column-reverse":"column",justifyContent:c,alignItems:h,paddingLeft:_.left+"px",paddingTop:_.top+"px",paddingBottom:_.bottom+"px",paddingRight:_.right+"px"}}>
      ${s.map((dt,ut)=>html.node`<div data-node-id=${dt.id} .data=${{entryTransition:{delay:400+ut*100,offset:{x:0,y:"100%"},scale:{x:.8,y:.8},opacity:0},exitTransition:{offset:{x:0,y:1e3},scale:{x:.8,y:.8},opacity:0},borderRadius:b?0:5}} style=${{display:"flex",width:b?"100%":st+"px",height:b?lt+"px":"auto",aspectRatio:$,marginBottom:ut===s.length-1?0:_.between+"px",flexGrow:0,flexShrink:1,flexBasis:lt+"px"}}></div>`)}
      </div>
    `}},Row={name:"Row",layout:({props:a={},children:s,size:d})=>{let{justify:c="center",align:h="center",cover:b=!1,margin:_={},dimensions:$,maxWidth:_e=1,reverse:tt=!1}=a;const rt=b?0:Math.min(d.y/6,12);_={left:rt,right:rt,top:rt,bottom:rt,between:rt,..._};const ot=d.y-_.top-_.bottom,it=d.x-_.left-_.right,st=_.between*((s.length||1)-1);let lt=ot,dt=Math.min((it-st)/(s.length||1),$?ot*$:it,_e*d.x);return $&&(lt=dt/$),html.node`
      <div style=${{height:b?d.y+"px":"auto",width:"100%",display:"flex",flexDirection:tt?"row-reverse":"row",justifyContent:c,alignItems:h,paddingLeft:_.left+"px",paddingTop:_.top+"px",paddingBottom:_.bottom+"px",paddingRight:_.right+"px"}}>
          ${s.map((ut,ht)=>html.node`<div data-node-id=${ut.id} .data=${{entryTransition:{delay:400+ht*100,offset:{x:0,y:"100%"},scale:{x:.8,y:.8},opacity:0},exitTransition:{offset:{x:0,y:1e3},scale:{x:.8,y:.8},opacity:0},borderRadius:b?0:5}} style=${{display:"flex",height:b?"100%":lt+"px",width:dt+"px",marginRight:ht===s.length-1?0:_.between+"px",flexGrow:0,flexShrink:1,flexBasis:dt+"px"}}></div>`)}
      </div>
    `}},toMatrix=(a,s)=>a.reduce((d,c,h)=>(h%s==0?d.push([h]):d[d.length-1].push(h))&&d,[]),Grid={name:"Grid",layout:({props:a={},children:s,size:d})=>{let{dimensions:c,numPerRow:h,margin:b,cover:_=!1,maxWidth:$,between:_e}=a;const tt=s.length===0||_?0:_e||Math.min(d.y/s.length/10,30);b=b!=null?b:tt;const rt=d.x<d.y;_e=typeof _e=="number"?_e:b;let ot=[];h?ot=toMatrix(s,h):ot=rt?getTallGrid(s.length):getWideGrid(s.length);const it=(d.y-(b*2+_e*(ot.length-1)))/ot.length,st=d.x-b*2;return html.node`
    <div style=${{display:"flex",width:"100%",height:"100%",flexDirection:"column",justifyContent:"center",padding:b+"px",gap:_e+"px",flexGrow:0}}>${ot.map((lt,dt)=>Row.layout({props:{justify:"center",dimensions:c,cover:_,maxWidth:$||1/(ot[0].length||1),margin:{top:0,right:0,left:0,bottom:0,between:_e}},children:lt.map(ut=>s[ut]),size:{y:it,x:st}}))}</div>`}},Presentation={name:"Presentation",layout:({props:a={},children:s,size:d})=>{let{margin:c,cover:h=!1,barWidth:b=.2,barPosition:_="side",presentationDimensions:$=16/9,viewerDimensions:_e=16/9,justifyViewers:tt="center",useGrid:rt=!1,reverse:ot=!1}=a;const it=_==="side"?d.x*b:d.y*b,st=s[0],lt=s.filter(kt=>kt!==st),dt=s.length<=1?0:Math.min(d.x/80,30);if(c=c!=null?c:dt,!st)return Grid.layout({props:a,children:s,size:d});const ut=s[1],ht={...d};ut&&(_==="side"?(ht.x=d.x-it,ht.y=ht.x/$):(ht.y=d.y-it,ht.x=ht.y*$));let nt,ct={};rt?(nt=Grid.layout,ct={cover:h,...h?{maxWidth:1}:{margin:c}}):(nt=_==="side"?Column.layout:Row.layout,ct={margin:{top:c,left:c,bottom:c,right:c,between:c},dimensions:_e,justify:tt,align:"flex-end"});const mt=_==="side"?ot?"left":"right":ot?"top":"bottom";return html.node`
      <div style=${{display:"flex",flexDirection:(_==="side"?"row":"column")+(ot?"-reverse":""),justifyContent:"space-around",alignItems:"center",position:"relative",padding:h?0:c,[`padding-${mt}`]:0}}>
        ${s[0]&&html.node`<div style=${{width:ht.x,height:ht.y,display:"flex",flexGrow:1}}>
            <div data-node-id=${st.id} .data=${{dimensions:$,borderRadius:h?0:5,entryTransition:{delay:0,offset:{x:0,y:1e3},scale:{x:.5,y:.5},opacity:0},exitTransition:{offset:{x:0,y:1e3},scale:{x:2,y:2},opacity:0}}} style=${{width:"100%",height:"100%",...h?{position:"absolute",top:0,left:0,width:rt&&ut?100-b*100+"%":"100%",height:"100%"}:{}}} />
          </div>`}
        ${html.node`<div style=${{..._==="side"?{maxWidth:b*100+"%",height:"100%"}:{maxHeight:b*100+"%",width:"100%"}}}>${ut&&nt({props:ct,children:lt,size:_==="side"?{x:it,y:d.y}:{x:d.x,y:it}})}</div>`}
      </div>
    `}},Layered={name:"Layered",layout:({props:a={},children:s,size:d})=>html.node`<div style=${{width:"100%",height:"100%",position:"relative"}}>
      ${s.map((c,h)=>html.node`<div data-node-id=${c.id} .data=${{zIndex:h+1}} style=${{position:"absolute",inset:"0px"}}></div>`)}
    </div>`},getWideGrid=(a=0)=>{switch(a){case 0:return[[]];case 1:return[[0]];case 2:return[[0,1]];case 3:return[[0,1],[2]];case 4:return[[0,1],[2,3]];case 5:return[[0,1,2],[3,4]];case 6:return[[0,1,2],[3,4,5]];case 7:return[[0,1,2],[3,4,5],[6]];case 8:return[[0,1,2],[3,4,5],[6,7]]}const s=Array(a).fill(null).map((d,c)=>c);return toMatrix(s,Math.round(Math.sqrt(a)))},getTallGrid=(a=0)=>{switch(a){case 0:return[[]];case 1:return[[0]];case 2:return[[0],[1]];case 3:return[[0,1],[2]];case 4:return[[0,1],[2,3]];case 5:return[[0,1],[2,3],[4]];case 6:return[[0,1],[2,3],[4,5]];case 7:return[[0,1],[2,3],[4,5],[6]];case 8:return[[0,1],[2,3],[4,5],[6,7]]}const s=Array(a).fill(null).map((d,c)=>c);return toMatrix(s,Math.ceil(Math.sqrt(s.length))-1)};var Layouts=Object.freeze(Object.defineProperty({__proto__:null,Free,Column,Row,Grid,Presentation,Layered},Symbol.toStringTag,{value:"Module"}));const updateMediaStreamTracks=(a,s)=>{const d={audio:a.getAudioTracks()[0],video:a.getVideoTracks()[0]};d.audio!==s.audio&&(d.audio&&a.removeTrack(d.audio),s.audio&&a.addTrack(s.audio)),d.video!==s.video&&(d.video&&a.removeTrack(d.video),s.video&&a.addTrack(s.video))},RoomParticipant={type:"RoomParticipant",valueType:MediaStream,props:{id:{},type:{},videoEnabled:{},audioEnabled:{}},init({addSource:a,removeSource:s,updateSource:d,getSource:c}){CoreContext.on("RoomJoined",({room:h})=>{let b={},_=[],$=[],_e={};const tt=()=>{_.filter(rt=>(rt==null?void 0:rt.type)==="camera"&&(rt==null?void 0:rt.isExternal)===!0).forEach(rt=>{var ot,it,st;if(rt.type==="camera"){const lt=_e[rt.id],dt=h.getParticipant(rt.participantId),ut=h.getTrack(rt.id);if(c(rt==null?void 0:rt.id)){const nt=h.getTrack((ot=dt==null?void 0:dt.meta[rt.id])==null?void 0:ot.microphone);updateMediaStreamTracks(lt,{video:ut==null?void 0:ut.mediaStreamTrack,audio:nt==null?void 0:nt.mediaStreamTrack}),d(rt.id,{videoEnabled:Boolean(ut&&!ut.isMuted),audioEnabled:Boolean(nt&&!nt.isMuted),displayName:((it=dt==null?void 0:dt.meta[rt.id])==null?void 0:it.displayName)||"External Track",mirrored:(st=dt==null?void 0:dt.meta[rt.id])==null?void 0:st.isMirrored,microphone:nt,external:rt==null?void 0:rt.isExternal})}}}),$.forEach(rt=>{var ct;const ot=_e[rt.id],it=_e[rt.id+"-screen"],st=rt.trackIds.find(mt=>{const kt=h.getTrack(mt);return(kt==null?void 0:kt.type)==="camera"&&!(kt!=null&&kt.isExternal)}),lt=rt.trackIds.find(mt=>{const kt=h.getTrack(mt);return(kt==null?void 0:kt.type)==="microphone"&&!(kt!=null&&kt.isExternal)}),dt=rt.trackIds.find(mt=>{const kt=h.getTrack(mt);return(kt==null?void 0:kt.type)==="screen_share"}),ut=h.getTrack(st),ht=h.getTrack(lt),nt=h.getTrack(dt);updateMediaStreamTracks(ot,{video:ut==null?void 0:ut.mediaStreamTrack,audio:ht==null?void 0:ht.mediaStreamTrack}),updateMediaStreamTracks(it,{video:nt==null?void 0:nt.mediaStreamTrack}),d(rt.id,{videoEnabled:Boolean(ut&&!ut.isMuted),audioEnabled:Boolean(ht&&!ht.isMuted),displayName:rt.displayName,mirrored:(ct=rt==null?void 0:rt.meta)==null?void 0:ct.isMirrored,external:ut==null?void 0:ut.isExternal}),d(rt.id+"-screen",{videoEnabled:Boolean(nt&&!nt.isMuted),displayName:rt.meta.screenDisplayName||`${rt.displayName}'s Screen`})})};h.useTracks(rt=>{const ot=rt.filter(st=>!_.some(lt=>lt.id===st.id)&&Boolean(st==null?void 0:st.mediaStreamTrack)),it=_.filter(st=>!rt.some(lt=>lt.id===st.id));_=rt.filter(st=>Boolean(st==null?void 0:st.mediaStreamTrack)),ot.forEach(st=>{const lt=new MediaStream([]);_e[st.id]=lt;const{id:dt,participantId:ut,type:ht,mediaStreamTrack:nt}=h.getTrack(st.id);nt&&a({id:dt,isActive:!0,value:lt,props:{id:dt,trackId:dt,participantId:ut,isMuted:st.isMuted,type:ht}})}),it.forEach(st=>{var lt;s(st.id),(lt=b[st.id])==null||lt.call(b)}),tt()}),h.useParticipants(rt=>{const ot=rt.filter(st=>!$.some(lt=>lt.id===st.id)),it=$.filter(st=>!rt.some(lt=>lt.id===st.id));$=rt,ot.forEach(st=>{var ht;const{id:lt}=st,dt=new MediaStream([]),ut=new MediaStream([]);_e[lt]=dt,_e[lt+"-screen"]=ut,a({id:lt,isActive:!0,value:dt,props:{id:lt,type:"camera",displayName:st.displayName||st.id,audioEnabled:!1,videoEnabled:!1,mirrored:(ht=st==null?void 0:st.meta)==null?void 0:ht.isMirrored}}),a({id:lt+"-screen",isActive:!0,value:ut,props:{id:lt,type:"screen",displayName:st.displayName||st.id,audioEnabled:!1,videoEnabled:!1}})}),tt(),it.forEach(st=>{var lt;s(st.id),(lt=b[st.id])==null||lt.call(b)})})})}},Banner={type:"Banner",valueType:Object,props:{},init({addSource:a,removeSource:s,updateSource:d,getSource:c,modifySourceValue:h}){let b=[];const _=($=[])=>{const _e=$.filter(ot=>!b.some(it=>it.id===ot.id)),tt=b.filter(ot=>!$.some(it=>it.id===ot.id)),rt=$.filter(ot=>{const it=b.find(st=>st.id===ot.id);return!fastDeepEqual(ot,it)});_e.forEach(ot=>a({id:ot.id,value:{headerText:ot.props.headerText,bodyText:ot.props.bodyText},props:ot.props})),tt.forEach(ot=>s(ot.id)),rt.forEach(ot=>{d(ot.id,ot.props),h(ot.id,it=>{it.headerText=ot.props.headerText,it.bodyText=ot.props.bodyText})}),b=$};CoreContext.on("ActiveProjectChanged",({projectId:$})=>{var tt,rt;if(b=[],!$)return;const _e=getProject($);_((rt=(tt=_e.props)==null?void 0:tt.banners)!=null?rt:[])}),CoreContext.on("ProjectChanged",({project:$})=>{var _e,tt;_((tt=(_e=$.props)==null?void 0:_e.banners)!=null?tt:[])})}},Overlays={type:"Overlay",valueType:Object,props:{},init({addSource:a,removeSource:s,updateSource:d,getSource:c,modifySourceValue:h}){let b=[];const _=($=[])=>{const _e=$.filter(ot=>!b.some(it=>it.id===ot.id)),tt=b.filter(ot=>!$.some(it=>it.id===ot.id)),rt=$.filter(ot=>{const it=b.find(st=>st.id===ot.id);return!fastDeepEqual(ot,it)});_e.forEach(ot=>a({id:ot.id,value:{...ot.props},props:ot.props})),tt.forEach(ot=>s(ot.id)),rt.forEach(ot=>{d(ot.id,ot.props),h(ot.id,it=>{Object.keys(ot.props).forEach(st=>{it[st]=ot.props[st]})})}),b=JSON.parse(JSON.stringify($))};CoreContext.on("ActiveProjectChanged",({projectId:$})=>{if(b=[],!$)return;const _e=getProject($);_(_e.props.overlays)}),CoreContext.on("ProjectChanged",({project:$})=>{_($.props.overlays)})}},Background={type:"Background",valueType:Object,props:{},init({addSource:a,removeSource:s,updateSource:d,getSource:c,modifySourceValue:h}){let b;const _=$=>{if(!$)return;const _e=(b==null?void 0:b.id)!==($==null?void 0:$.id)?$:null,tt=fastDeepEqual($,b)?null:$;_e&&(a({id:_e==null?void 0:_e.id,value:{..._e==null?void 0:_e.props},props:_e==null?void 0:_e.props}),s(b==null?void 0:b.id)),tt&&(d(tt==null?void 0:tt.id,tt==null?void 0:tt.props),h(tt==null?void 0:tt.id,rt=>{Object.keys(tt==null?void 0:tt.props).forEach(ot=>{rt[ot]=tt==null?void 0:tt.props[ot]})})),b=JSON.parse(JSON.stringify($))};CoreContext.on("ActiveProjectChanged",({projectId:$})=>{if(b=null,!$)return;const _e=getProject($);_(_e.props.background)}),CoreContext.on("ProjectChanged",({project:$})=>{_($.props.background)})}},Logo={type:"Logo",valueType:Object,props:{},init({addSource:a,removeSource:s,updateSource:d,getSource:c,modifySourceValue:h}){let b;const _=$=>{if(!$){b&&(s(b==null?void 0:b.id),b=null);return}const _e=(b==null?void 0:b.id)!==($==null?void 0:$.id)?$:null,tt=fastDeepEqual($,b)?null:$;_e&&(a({id:_e==null?void 0:_e.id,value:{..._e==null?void 0:_e.props},props:_e==null?void 0:_e.props}),s(b==null?void 0:b.id)),tt&&(d(tt==null?void 0:tt.id,tt==null?void 0:tt.props),h(tt==null?void 0:tt.id,rt=>{Object.keys(tt==null?void 0:tt.props).forEach(ot=>{rt[ot]=tt==null?void 0:tt.props[ot]})})),b=JSON.parse(JSON.stringify($))};CoreContext.on("ActiveProjectChanged",({projectId:$})=>{if(b=null,!$)return;const _e=getProject($);_(_e.props.logo)}),CoreContext.on("ProjectChanged",({project:$})=>{_($.props.logo)})}};var Sources=Object.freeze(Object.defineProperty({__proto__:null,RoomParticipant,Banner,Overlays,Background,Logo},Symbol.toStringTag,{value:"Module"}));const{state}=CoreContext;subscribeInternal(async(a,s)=>{var d,c,h,b,_,$;switch(a){case"UserChanged":{const{metadata:_e}=s;state.user.metadata=_e||{},state.user.props=(_e==null?void 0:_e.props)||{},trigger$1("UserChanged",{user:getBaseUser()});return}case"ActiveProjectChanged":{const{projectId:_e}=s;state.activeProjectId=_e,trigger$1("ActiveProjectChanged",{projectId:_e});return}case"ProjectAdded":{const tt=await hydrateProject(s,"ROLE_HOST"),rt=toBaseProject(tt);state.projects=[...state.projects,tt],trigger$1("ProjectAdded",{project:rt});return}case"ProjectRemoved":{const{projectId:_e}=s;state.projects=state.projects.filter(tt=>tt.id!==_e),trigger$1("ProjectRemoved",{projectId:_e});return}case"ProjectChanged":{const{project:_e,phase:tt,broadcastId:rt}=s,ot=getProject(_e.projectId);if(!ot)return;tt&&(ot.videoApi.phase=tt),typeof rt!="undefined"&&(ot.videoApi.broadcastId=rt);const it=(d=_e.metadata)==null?void 0:d.layoutId;it!==ot.layoutApi.layoutId&&(ot.layoutApi.layoutId=(c=_e.metadata)==null?void 0:c.layoutId,ot.compositor=await layoutToProject(it)),ot.videoApi.project=_e,ot.props=(b=(h=_e.metadata)==null?void 0:h.props)!=null?b:{},trigger$1("ProjectChanged",{project:toBaseProject(ot)});return}case"DestinationAdded":{const{projectId:_e}=s,tt=getProject(_e);if(!tt)return;tt.videoApi.project.destinations.push(s),trigger$1("DestinationAdded",{projectId:_e,destination:toBaseDestination(s)});return}case"DestinationRemoved":{const{projectId:_e,destinationId:tt}=s,rt=getProject(_e);if(!rt)return;rt.videoApi.project.destinations=rt.videoApi.project.destinations.filter(ot=>ot.destinationId!==tt),trigger$1("DestinationRemoved",{projectId:_e,destinationId:tt});return}case"DestinationChanged":{const _e=s,{projectId:tt,destinationId:rt}=_e,ot=getProject(tt);if(!ot)return;const it=ot.videoApi.project.destinations.find(st=>st.destinationId===rt);if(!it)return;Object.assign(it,_e),trigger$1("DestinationChanged",{projectId:tt,destination:toBaseDestination(it)});return}case"SourceAdded":return;case"SourceRemoved":return;case"SourceUpdated":return;case"NodeAdded":return;case"NodeRemoved":return;case"NodeUpdated":return;case"BackgroundMetadataUpdate":{const{Command:_e}=CoreContext,{projectId:tt,metadata:rt,sourceId:ot,doTrigger:it,role:st}=s;if(st==="ROLE_HOST"||st==="ROLE_COHOST"){const lt=getProject(tt);if(!lt||lt.props.background.id!==ot)return;let dt=(_=lt==null?void 0:lt.props)==null?void 0:_.background;dt&&(dt={...dt,props:{...dt.props,meta:{...dt.props.meta,...rt}}},it?_e.updateProjectProps({projectId:tt,props:{background:dt}}):_e.updateProjectPropsWithoutTrigger({projectId:tt,props:{background:dt}}))}return}case"OverlayMetadataUpdate":{const{Command:_e}=CoreContext,{projectId:tt,metadata:rt,sourceId:ot,doTrigger:it,role:st}=s;if(st==="ROLE_HOST"||st==="ROLE_COHOST"){const lt=getProject(tt);if(!lt)return;let dt=lt.props.overlays.find(ut=>ut.id===ot);if(dt){dt={...dt,props:{...dt.props,meta:{...dt.props.meta,...rt}}};const ut=lt.props.overlays.findIndex(ht=>ht.id===ot);if(ut>-1){const ht=JSON.parse(JSON.stringify(($=lt==null?void 0:lt.props)==null?void 0:$.overlays));ht.splice(ut,1,dt),it?_e.updateProjectProps({projectId:tt,props:{overlays:ht}}):_e.updateProjectPropsWithoutTrigger({projectId:tt,props:{overlays:ht}})}}}return}}});subscribeInternal(()=>log$1.debug({nextState:{...state}}));React.createContext({studio:null,project:null,room:null,webcamId:null,microphoneId:null,setStudio:()=>{},setProject:()=>{},setRoom:()=>{},setWebcamId:()=>{},setMicrophoneId:()=>{},projectCommands:{}});let stored={webcamId:null,microphoneId:null};try{stored.webcamId=localStorage==null?void 0:localStorage.getItem("__LS_webcam"),stored.microphoneId=localStorage==null?void 0:localStorage.getItem("__LS_microphone")}catch{}const runFilters=(a,s=[])=>s.reduce((d,c)=>c(d),a),createDefault=()=>({root:document.createElement("div")}),init$2=(a={},s,d)=>{const c={},h=a.defaultTransforms||{},b=ut=>{asArray(ut).forEach(ht=>{c[ht.name]=ht})},_={},$={},_e={},tt=ut=>_e[ut]||[],rt=ut=>$[ut]||[],ot=ut=>_[ut],it=ut=>c[ut];s.on("SourceChanged",ut=>{rt(ut.id).forEach(nt=>{const ct=s.getNode(nt.nodeId);nt._onUpdateHandlers.forEach(mt=>mt(ct.props||{}))})}),s.on("AvailableSourcesChanged",({type:ut,sources:ht})=>{tt(ut).forEach(ct=>{st(ct.nodeId)})});const st=ut=>{var gt,Ct,Nt;const ht=ot(ut);if(!ht)return;const nt=it(ht.transformName);if(!nt.useSource)return;const ct=s.getNode(ut),mt=ht.proxySource?ht.proxySource:ht.sourceType,kt=d.getSources(mt),Tt=nt.useSource(kt,ct.props),Pt=ht.sourceValue,At=Tt==null?void 0:Tt.value;ht.source!==Tt&&($[(gt=ht.source)==null?void 0:gt.id]&&($[(Ct=ht.source)==null?void 0:Ct.id]=$[(Nt=ht.source)==null?void 0:Nt.id].filter(vt=>vt.nodeId!==ut)),$[Tt==null?void 0:Tt.id]=[...$[Tt==null?void 0:Tt.id]||[],ht]),ht.source=Tt,ht.sourceValue=At,Object.is(Pt,At)||ht._onNewSourceHandlers.forEach(vt=>vt(Tt))},lt=ut=>{const ht=dt(ut),ct=runFilters(ut,[]);return st(ut.id),ht==null||ht._onUpdateHandlers.forEach(mt=>mt(ut.props||{})),{...ct,children:ct.children.map(lt)}},dt=ut=>{if(_[ut.id])return _[ut.id];const{props:ht={}}=ut,{sourceType:nt,proxySource:ct}=ht;if(!nt)return null;let mt=h[nt],kt;if(mt?kt=c[mt]:kt=Object.values(c).find(It=>It.sourceType===nt),!kt)throw new Error("Could not find matching transform for sourceType: "+nt);const Tt=[],Pt=[],At=[],gt=[],Nt={...(kt.create||createDefault)({onEvent:(It,xt,...Dt)=>{const Ot=s.on(It,xt,...Dt);return gt.push(Ot),Ot},onNewSource:It=>Tt.push(It),onUpdate:It=>Pt.push(It),onRemove:It=>At.push(It)},ut.props),proxySource:ct,sourceType:nt,nodeId:ut.id,transformName:kt.name,_onNewSourceHandlers:Tt,_onUpdateHandlers:Pt,_disposables:gt};_[ut.id]=Nt;const vt=ct||nt;_e[vt]=[..._e[vt]||[],Nt],kt.useSource&&st(ut.id);const Et=[s.on("NodeRemoved",({nodeId:It})=>{if(It===ut.id){const xt=s.getNode(It),{sourceType:Dt="Element"}=xt.props;Et.forEach(Jt=>Jt==null?void 0:Jt()),gt.forEach(Jt=>Jt==null?void 0:Jt()),At.forEach(Jt=>Jt==null?void 0:Jt()),delete _[xt.id];const Ot=ct||Dt;_e[Ot]=_e[Ot].filter(Jt=>Jt!==_[xt.id])}})];return Nt};return{transforms:c,nodeElementIndex:_,elementSourceTypeIndex:_e,registerTransform:b,getElementsBySourceType:tt,getElementByNodeId:ot,getTransformByName:it,updateSourceForNode:st,renderTree:lt,getElement:dt}},TRANSITION_DURATION=300,findLayoutUp=(a,s,d=0)=>{const h=a.parentElement;return h instanceof Layout&&(d=0,!s||s(h))?h:h?d>4?null:findLayoutUp(h,s,d+1):null},TRANSITION_FIELDS="opacity, transform, width, height, left, right, top, bottom, inset",layoutIndex={},parentIdIndex={},childIndex={};let rootLayout,_cid=1;const ignoredAttributes=["style","id","className"];let tickOps={};const tick=()=>{if(nextTick=null,window.__dragging){nextTick=nextTick||requestAnimationFrame(tick);return}const a=new Set,s=new Set,d=new Set;Object.entries(tickOps).forEach(([c,h])=>{h.forEach(([b,_,$])=>{switch(b){case"childInserted":{s.has($)?s.delete($):a.add($);break}case"childRemoved":{a.has($)?a.delete($):s.add($);break}case"childRemoveFinished":{d.add($);break}}})});try{s.forEach(h=>{var $,_e,tt;const b=childIndex[h],_=Array.from((($=b.parentEl)==null?void 0:$.children)||[]);b.nextSiblingEl&&_.includes(b.nextSiblingEl)?(_e=b.parentEl)==null||_e.insertBefore(b,b.nextSiblingEl):(b.nextSiblingEl=null,(tt=b.parentEl)==null||tt.append(b)),b.runRemove()}),d.forEach(h=>{const b=childIndex[h];if(b.removed){b.previousSiblingEl&&(b.previousSiblingEl.nextSiblingEl=b.nextSiblingEl),b.nextSiblingEl&&(b.nextSiblingEl.previousSiblingEl=b.previousSiblingEl);return}});const c=window.__scale;Object.entries(tickOps).forEach(([h,b])=>{const _=layoutIndex[h],$=_.getBoundingClientRect(),_e={x:$.width/c,y:$.height/c};_.updatePositions({size:_e,inserted:a,removed:s})})}catch(c){log$1.warn("Failed to run Layout ops",c)}tickOps={}};let nextTick;const queueOp=a=>{const[s,d]=a,c=tickOps[d]||[];tickOps[d]=[...c,a],nextTick=nextTick||requestAnimationFrame(tick)};class Layout extends HTMLElement{constructor(){super(),this.isFirst=!0,this.isUpdating=!1,this.cid=++_cid}log(...s){var d;log$1.debug(...s,{id:this.dataset.id,parent:(d=this.parentLayout)==null?void 0:d.dataset.id},this)}connectedCallback(){var s;this.parentEl=this.parentElement,this.parentLayout=findLayoutUp(this),this.slotEl=this.closest("[data-layout-child]"),Array.from(this.children).forEach(d=>this.initializeChild(d)),rootLayout||(rootLayout=this),layoutIndex[this.dataset.id]=this,parentIdIndex[this.dataset.id]=(s=this.parentLayout)==null?void 0:s.id,Object.assign(this.style,{width:"100%",height:"100%",position:"absolute",top:"0px",left:"0px",pointerEvents:"none",boxSizing:"border-box"}),this.mutationObserver&&this.mutationObserver.disconnect(),this.mutationObserver=new MutationObserver(d=>{!this.isConnected||d.forEach(c=>{c.type==="attributes"&&!ignoredAttributes.includes(c.attributeName)?queueOp(["attributesChanged",this.dataset.id]):c.type==="childList"&&(c.addedNodes.forEach(h=>{const b=childIndex[h.dataset.id];h.removed||(b?b!==h&&(this.initializeChild(h),h.setAttribute("style",b.getAttribute("style")),h.data=b.data):this.initializeChild(h),queueOp(["childInserted",this.dataset.id,h.dataset.id]))}),c.removedNodes.forEach(h=>{h.removed||queueOp(["childRemoved",this.dataset.id,h.dataset.id])}))})}),this.mutationObserver.observe(this,{childList:!0,attributes:!0}),this.latestSize||queueOp(["attributesChanged",this.dataset.id])}disconnectedCallback(){}adoptedCallback(){}updatePositions(s){if(this.isUpdating)return;this.isUpdating=!0;const{size:d,inserted:c=new Set,removed:h=new Set}=s;this.nodes=Array.from(this.children||[]).filter(_e=>!_e.removed).map((_e,tt)=>{const rt=getElementAttributes(_e);return{id:_e.dataset.id,props:rt,children:[]}});const b=JSON.parse(this.getAttribute("props")||"{}");this.latestSize=d;const _={id:this.dataset.id,props:b,children:this.nodes,size:d};let $=layoutChildren(_);Promise.all(Object.entries($).map(async([_e,tt])=>{var ct,mt,kt,Tt,Pt,At,gt,Ct,Nt,vt,Et;let rt=childIndex[_e]||this.querySelector(`[data-layout-child][data-id="${_e}"]`);const ot={...rt.data,...tt};rt.data=ot;const{size:it,position:st,zIndex:lt=1,opacity:dt=1,borderRadius:ut=0,entryTransition:ht={},exitTransition:nt={}}=ot;if(rt){if(rt.removed)return;nt&&(rt.data.exitTransition=nt),ht&&(rt.data.entryTransition=ht),rt.data.size=it,rt.data.position=st;const It=window.__scale,xt=this.getBoundingClientRect(),Dt=xt.width/It,Ot=Dt-sizeToNum(st.x,Dt)-sizeToNum(it.x,Dt),Jt=xt.height/It,Yt=Jt-sizeToNum(st.y,Jt)-sizeToNum(it.y,Jt);Object.assign(rt.style,{position:"absolute",transformOrigin:"50% 50%",transitionDuration:"0ms",transitionDelay:"0ms",transform:"translate3d(0, 0, 0) scaleX(1) scaleY(1)",visibility:"visible",boxSizing:"border-box",overflow:"hidden",borderRadius:ut+"px",width:"auto",height:"auto"});let Qt="0ms",Ft=this.isFirst?asDuration(0):asDuration(TRANSITION_DURATION);if(c.has(_e))Object.assign(rt.style,{transitionProperty:TRANSITION_FIELDS,transitionDuration:"0ms",transitionTimingFunction:(ct=ht.timingFn)!=null?ct:"ease",transform:`translate3d(calc(${asSize((kt=(mt=ht.offset)==null?void 0:mt.x)!=null?kt:0)}), calc(${asSize((Pt=(Tt=ht.offset)==null?void 0:Tt.y)!=null?Pt:0)}), 0) scaleX(${(gt=(At=ht.scale)==null?void 0:At.x)!=null?gt:1}) scaleY(${(Nt=(Ct=ht.scale)==null?void 0:Ct.y)!=null?Nt:1})`,opacity:(vt=ht.opacity)!=null?vt:dt,left:asSize(st.x)||0,right:asSize(Ot)||0,top:asSize(st.y)||0,bottom:asSize(Yt)||0}),Qt=asDuration((Et=ht.delay)!=null?Et:0);else if(rt.data.rootOffset){const Lt=rootLayout.getBoundingClientRect(),Gt=this.getBoundingClientRect(),Ut={x:Gt.x/It-Lt.x/It,y:Gt.y/It-Lt.y/It},$t=Ut.x+Gt.width/It,qt=rt.data.rootOffset.x+Number(rt.data.size.x),Wt=Ut.y+Gt.height/It,Ht=rt.data.rootOffset.y+Number(rt.data.size.y);rt.data.rootOffset.x-Ut.x,rt.data.rootOffset.y-Ut.y,$t-qt,Wt-Ht}rt.addEventListener("transitionstart",()=>{rt.style.zIndex=String(lt+1)}),await new Promise(Lt=>window.setTimeout(Lt)),Object.assign(rt.style,{transitionProperty:TRANSITION_FIELDS,transitionDuration:Ft,transitionDelay:Qt,transform:"translate3d(0, 0, 0) scaleX(1) scaleY(1)",opacity:dt,left:asSize(st.x)||0,top:asSize(st.y)||0,width:Dt?"auto":it.x,right:Dt?asSize(Ot)||0:"auto",height:Jt?"auto":it.y,bottom:Jt?asSize(Yt)||0:"auto",zIndex:lt});const _t=()=>{const Lt=rootLayout.getBoundingClientRect(),Gt=rt.getBoundingClientRect();rt.data.rootOffset={x:Gt.x/It-Lt.x/It,y:Gt.y/It-Lt.y/It}};_t(),rt.addEventListener("transitionend",()=>{rt.style.zIndex=String(lt),_t()})}})).then(()=>{this.isUpdating=!1}),this.isFirst=!1,Array.from(this.querySelectorAll("ls-layout")).forEach(_e=>{if(!$[_e.dataset.id])return;const tt=$[_e.dataset.id].size;_e.updatePositions({size:{x:sizeToNum(tt.x,d.x),y:sizeToNum(tt.y,d.y)}})})}initializeChild(s){var c;if(!((c=s.dataset)!=null&&c.id))return log$1.warn("Layout: Child requires `data-id` at the time it is added to a Layout");s._remove=s.remove,s.remove=()=>{this.removeChild(s)},s.mutationObserver||(s.mutationObserver=new MutationObserver(h=>{h.forEach(b=>{if(b.type==="attributes"){if(b.attributeName==="style")return;queueOp(["childAttributesChanged",this.dataset.id,s.dataset.id])}})}),s.mutationObserver.observe(s,{childList:!0,attributes:!0}));const d={entryTransition:{delay:0,opacity:0,scale:{x:1,y:1},offset:{x:0,y:0}},exitTransition:{delay:0,opacity:0,scale:{x:1,y:1},offset:{x:0,y:0}},position:{x:0,y:0},size:{x:0,y:0},opacity:0,fit:"cover",borderRadius:0,zIndex:1};s.data=d,s.parentEl=s.parentElement,s.nextSiblingEl=s.nextSibling,s.previousSiblingEl=s.previousSibling,s.previousSiblingEl&&(s.previousSiblingEl.nextSiblingEl=s),s.toggleAttribute("data-layout-child",!0),childIndex[s.dataset.id]=s,s.runRemove=async()=>{var b,_,$,_e,tt,rt,ot,it,st,lt;s.removed=!0;const h=TRANSITION_DURATION;return await new Promise(dt=>window.setTimeout(dt)),Object.assign(s.style,{zIndex:0,transitionDelay:asDuration(0),transitionDuration:asDuration(h),transitionProperty:TRANSITION_FIELDS,transitionTimingFunction:(b=d.exitTransition.timingFn)!=null?b:"ease",transform:`translate3d(calc(${asSize(($=(_=d.exitTransition.offset)==null?void 0:_.x)!=null?$:0)}), calc( ${asSize((tt=(_e=d.exitTransition.offset)==null?void 0:_e.y)!=null?tt:0)}), 0) scaleX(${(ot=(rt=d.exitTransition.scale)==null?void 0:rt.x)!=null?ot:1}) scaleY(${(st=(it=d.exitTransition.scale)==null?void 0:it.y)!=null?st:1})`,opacity:(lt=d.exitTransition.opacity)!=null?lt:0}),s.removed=!0,s.transition=new Promise(dt=>{const ut=()=>{s.transition=null,s._remove(),queueOp(["childRemoveFinished",this.dataset.id,s.dataset.id]),clearTimeout(ht),dt()},ht=window.setTimeout(ut,parseInt(String(h))+600);s.addEventListener("transitionend",ut,{once:!0})}),s.transition}}}const ensureLayoutContainer=a=>{const s=document.getElementById("__ls-layout-container");if(s)return Object.assign(s.style,{width:a.x+"px",height:a.y+"px"}),s;const d=document.createElement("div");return d.id="__ls-layout-container",Object.assign(d.style,{position:"fixed",visibility:"hidden",top:0+"px",left:0+"px",zIndex:-1,width:a.x+"px",height:a.y+"px"}),document.body.append(d),d},layoutChildren=({id:a,props:s={},children:d,size:c})=>{const h={props:s,children:d,size:c},b=htmlLayouts[s.layout]?htmlLayouts[s.layout].layout(h):htmlLayouts.Free.layout(h);if(!(b instanceof HTMLElement))return b;const _=Array.from(b.querySelectorAll("[data-node-id]")),$=document.createElement("div");$.style.height=b.style.height=c.y+"px",$.style.width=b.style.width=c.x+"px",$.style.position="absolute",$.style.top="0px",$.style.left="0px",$.style.boxSizing="border-box",$.setAttribute("data-wrapper-id",a),$.append(b);const _e=ensureLayoutContainer(c),tt=_e.querySelector(`[data-wrapper-id="${a}"]`);tt?tt.replaceWith($):_e.append($);const rt=b.getBoundingClientRect(),ot={};return _.forEach(it=>{var ht,nt,ct,mt,kt,Tt,Pt,At;const st=it.dataset.nodeId;if(!st)return;const lt=Number((ht=it.dataset.opacity)!=null?ht:it.style.opacity||1),dt=it.getBoundingClientRect();let ut={position:{x:dt.x-rt.x+"px",y:dt.y-rt.y+"px"},size:{x:dt.width+"px",y:dt.height+"px"},opacity:lt,zIndex:(nt=it.data)==null?void 0:nt.zIndex,entryTransition:(mt=(ct=it.data)==null?void 0:ct.entryTransition)!=null?mt:{},exitTransition:(Tt=(kt=it.data)==null?void 0:kt.exitTransition)!=null?Tt:{},borderRadius:(At=(Pt=it.data)==null?void 0:Pt.borderRadius)!=null?At:0};`${s.showcase}-x`===st&&(ut.position={x:rt.x+"px",y:rt.y+"px"},ut.size={x:rt.width+"px",y:rt.height+"px"},ut.zIndex=10),ot[st]=ut,positionIndex[it.dataset.nodeId]=ut}),ot},positionIndex={},htmlLayouts={},registerLayout=a=>{asArray(a).forEach(s=>{htmlLayouts[s.name]=s})},sourceTypes={},init$1=(a={},s)=>{const d={},c={},h=_e=>{s.triggerEvent("SourceChanged",_e)},b=_e=>{s.triggerEvent("AvailableSourcesChanged",{type:_e,sources:c[_e]})},$={sourceIndex:d,sourceTypeIndex:c,registerSource:_e=>{asArray(_e).forEach(tt=>{var ot;const rt=it=>{const st=d[it];if(!!st&&st.type!==tt.type)throw new Error(`Attempted to modify source of type ${st.type} from ${tt.type}`)};(ot=tt.init)==null||ot.call(tt,{getSource:it=>$.getSource(it),removeSource:it=>(rt(it),$.removeSource(it)),setSourceActive:(it,st)=>(rt(it),$.setSourceActive(it,st)),updateSource:(it,st)=>(rt(it),$.updateSource(it,st)),modifySourceValue(it,st){return rt(it),$.modifySourceValue(it,st)},addSource:it=>$.addSource(tt.type,it)}),sourceTypes[tt.type]=tt})},getSource:_e=>d[_e],getSources:_e=>c[_e]||[],useSource:(_e,tt)=>(tt(d[_e]),s.on("SourceChanged",rt=>{rt.id===_e&&tt(rt)})),useSources:(_e,tt)=>(tt(c[_e]||[]),s.on("AvailableSourcesChanged",rt=>{rt.type===_e&&tt(rt.sources)})),addSource:(_e,tt)=>{if(!tt.id)throw new Error('Cannot add source without field "id"');if(d[tt.id])return;if(!tt.value)throw new Error('Cannot add source with an empty field "value"');if(!sourceTypes[_e])throw new Error("Could not find definition for source type: "+_e);const{id:ot,value:it=null,props:st={},isActive:lt=!0}=tt;d[ot]={id:ot,type:_e,props:st,value:it,isActive:lt},c[_e]=[...c[_e]||[],d[ot]],h(d[ot]),b(_e)},removeSource:_e=>{const tt=d[_e];!tt||(delete d[_e],c[tt.type]=c[tt.type].filter(rt=>rt.id!==_e),b(tt.type))},updateSource:(_e,tt)=>{const rt=d[_e];rt.props={...rt.props,...tt},h(rt),b(rt.type)},modifySourceValue:async(_e,tt)=>{const rt=d[_e];await tt(rt.value),h(rt)},setSourceActive:(_e,tt=!0)=>{const rt=d[_e];rt.isActive=tt,b(rt.type)}};return $},{forEachDown,insertAt,toDataNode,pull,replaceItem}=Logic;let compositor;const start=a=>{if(compositor)return;const{dbAdapter:s,transformSettings:d={},sourceSettings:c={}}=a,h={},b={};try{customElements.define("ls-layout",Layout)}catch(ht){log$1.warn(ht)}const _={},$={},_e={};let tt=0;const rt=new Map,ot=(ht,nt)=>{if(typeof ht!="function")return;const ct=++tt;return rt.set(ct,ht),ht.nodeId=nt,()=>{rt.delete(ct)}},it=(ht,nt,ct)=>ot((mt,kt)=>{mt===ht&&nt(kt)},ct),st=(ht,nt)=>{rt.forEach(ct=>{ct.nodeId?(nt==null?void 0:nt.nodeId)&&(nt==null?void 0:nt.nodeId)===ct.nodeId&&ct(ht,nt):ct(ht,nt)})},lt={projects:b,subscribe:ot,on:it,triggerEvent:st,getProject:ht=>b[ht],getNodeProject:ht=>b[_[ht]],getNodeParent:ht=>_e[$[ht]],getNode:ht=>_e[ht],createProject:async(ht={},nt)=>{const{id:ct,props:mt={},children:kt=[]}=ht,Tt=await s(nt,{get:()=>null,getParent:()=>null}).insert(mt),Pt={id:Tt,props:mt,children:kt};return forEachDown(ht,At=>{}),_e[Tt]=Pt,compositor.loadProject(Pt,nt)},loadProject:(ht,nt)=>{if(!ht)return;if(nt=nt||ht.id,b[nt])return b[nt];forEachDown(ht,(Tt,Pt)=>{_e[Tt.id]=Tt,$[Tt.id]=Pt==null?void 0:Pt.id,_[Tt.id]=nt});const ct={insert:async(Tt,Pt,At=0)=>{if(Tt.id&&_e[Tt.id])return _e[Tt.id];if(Tt.children||(Tt.children=[]),Tt.props||(Tt.props={}),Pt){const gt=_e[Pt];if(!gt)throw"Parent node not found with ID";gt.children=insertAt(At,Tt,gt.children||[]),$[Tt.id]=Pt}return _e[Tt.id]=Tt,_[Tt.id]=nt,Tt.id},update:async(Tt,Pt={},At)=>{const gt=_e[Tt];if(At){const Ct=At.map(Nt=>{const vt=_e[Nt];return $[vt.id]=Tt,vt});gt.children=Ct}gt.props={...gt.props,...Pt}},remove:async Tt=>{const Pt=_e[$[Tt]];Pt&&(Pt.children=Pt.children.filter(gt=>gt.id!==Tt));const At=_e[Tt];forEachDown(At,gt=>{_e[gt.id]&&(_e[gt.id]._deleted=!0),st("NodeRemoved",{projectId:mt.id,nodeId:gt.id})})}},mt={id:nt,getRoot:()=>ht,get(Tt){return _e[Tt]},getParent(Tt){return _e[$[Tt]]},renderTree(){return ut.renderTree(ht)},local:ct,insert:async(Tt={},Pt,At=0)=>{const Ct={id:await kt.insert(Tt,Pt,At),props:Tt,children:[]};return ct.insert(Ct,Pt,At)},update:async(Tt,Pt)=>(await ct.update(Tt,Pt),kt.update(Tt,Pt)),remove:async Tt=>{await ct.remove(Tt);const Pt=_e[$[Tt]],At=Pt.children.filter(gt=>gt.id!==Tt);return kt.batch([["delete",{id:Tt}],["update",{...Pt,children:At}]])},reorder:async(Tt,Pt)=>{const At=_e[Tt];return At.children=Pt.map(gt=>At.children.find(Ct=>Ct.id===gt)),kt.batch([["update",At]])},move:async(Tt,Pt,At=0)=>{const gt=_e[Tt],Ct=_e[$[Tt]],Nt=_e[Pt];Ct.children=pull(Ct.children,gt),Nt.children=insertAt(At,gt,Nt.children),kt.batch([["update",Nt],["update",Ct]]),$[Tt]=Pt},swap:async(Tt,Pt)=>{const At=_e[Tt],gt=_e[Pt],Ct=_e[$[Tt]],Nt=_e[$[Pt]];Ct.children=replaceItem(vt=>vt.id===Tt,gt,Ct.children),Nt.children=replaceItem(vt=>vt.id===Pt,At,Nt.children),$[Tt]=Nt.id,$[Pt]=Ct.id,kt.batch([["update",Ct],["update",Nt]])}};Object.defineProperty(mt,"nodes",{get(){return Object.values(_e).filter(Tt=>_[Tt.id]===mt.id)}});const kt=h[nt]||s(nt,{get:Tt=>toDataNode(mt.get(Tt)),getParent:Tt=>toDataNode(mt.getParent(Tt))});return h[nt]=kt,b[nt]=mt,mt}},dt=init$1(c,lt),ut=init$2(d,lt,dt);return compositor={registerLayout,registerTransform:ut.registerTransform,registerSource:dt.registerSource,getElement:ut.getElement,getSource:dt.getSource,getSources:dt.getSources,useSource:dt.useSource,useSources:dt.useSources,...lt},compositor},BroadcastPhase=lib$2.LiveApiModel.ProjectBroadcastPhase,{trigger,triggerInternal}=CoreContext,EventType=lib$2.LiveApiModel.EventType,EventSubType=lib$2.LiveApiModel.EventSubType,init=async(a={})=>{const s=a.env||"prod",d=a.logLevel||"Warn";log$1.getLogger("livekit").setLevel(d),log$1.setLevel(d),log$1.info("Initializing Studio SDK...");const{layouts:h=[],transforms:b=[],sources:_=[],defaultTransforms:$={},useLatestRenderer:_e=!1,guestToken:tt}=a,rt=new lib$2.ApiStream({sdkVersion:CoreContext.version,env:s,logLevel:d}),ot=config$1(),it=start({dbAdapter:compositorAdapter,transformSettings:{defaultTransforms:{...$,...ot.defaults.transforms}}});CoreContext.config=ot,CoreContext.clients=rt,CoreContext.compositor=it,CoreContext.logLevel=d,CoreContext.Request=await __vitePreload(()=>import("./requests.0256f12a.js"),[]),CoreContext.Command=await __vitePreload(()=>import("./commands.9ca39e3c.js"),[]),CoreContext.rendererVersion=_e?"latest-v2":CoreContext.version,window.__StudioKit={...CoreContext},it&&(it.registerSource([...Object.values(Sources),..._]),it.registerTransform([...Object.values(Transforms),...b]),it.registerLayout([...Object.values(Layouts),...h]));const st=await rt.load(tt);let lt;st&&await rt.LiveApi().project.getProject({...st}).then(ut=>hydrateProject(ut.project,st.role)).then(async ut=>{setAppState({user:{id:st.collectionId,props:{},name:null,metadata:{}},sources:[],projects:[ut],activeProjectId:null}),ut.isInitial=!0,lt=await CoreContext.Command.setActiveProject({projectId:ut.id})}),rt.LiveApi().on(EventType.EVENT_TYPE_COLLECTION,(ut,ht)=>{switch(log$1.info("Received: Collection event",ht,ut),ht){case EventSubType.EVENT_SUB_TYPE_UPDATE:{triggerInternal("UserChanged",ut.update.collection);return}}}),rt.LiveApi().on(EventType.EVENT_TYPE_DESTINATION,(ut,ht)=>{switch(log$1.info("Received: Destination event",ht,ut),ht){case EventSubType.EVENT_SUB_TYPE_CREATE:{const{destination:nt}=ut.create;triggerInternal("DestinationAdded",nt);return}case EventSubType.EVENT_SUB_TYPE_UPDATE:{const{destination:nt}=ut.update;triggerInternal("DestinationChanged",nt);return}case EventSubType.EVENT_SUB_TYPE_DELETE:{triggerInternal("DestinationRemoved",ut.delete);return}}}),rt.LiveApi().on(EventType.EVENT_TYPE_SOURCE,(ut,ht)=>{switch(log$1.info("Received: Source event",ht,ut),ht){case EventSubType.EVENT_SUB_TYPE_CREATE:{triggerInternal("SourceAdded",ut.create.source);return}case EventSubType.EVENT_SUB_TYPE_UPDATE:{triggerInternal("SourceChanged",ut.update.source);return}case EventSubType.EVENT_SUB_TYPE_DELETE:{triggerInternal("SourceRemoved",ut.delete.sourceId);return}case EventSubType.EVENT_SUB_TYPE_ADD:{triggerInternal("ProjectSourceAdded",{projectId:ut.add.projectId,source:ut.add.source});return}case EventSubType.EVENT_SUB_TYPE_REMOVE:{triggerInternal("ProjectSourceRemoved",{projectId:ut.add.projectId,sourceId:ut.add.sourceId});return}}}),rt.LiveApi().on(EventType.EVENT_TYPE_PROJECT,(ut,ht)=>{var nt;switch(log$1.info("Received: Project event",ht,ut),ht){case EventSubType.EVENT_SUB_TYPE_CREATE:{const ct=ut.create.project;if(getProject(ct.projectId))return;triggerInternal("ProjectAdded",ct);return}case EventSubType.EVENT_SUB_TYPE_UPDATE:{const{projectId:ct,updateMask:mt,project:kt}=ut.update,Tt=getProject(kt.projectId);if(!Tt)return;mt.includes("metadata")&&trigger("ProjectMetaUpdated",{projectId:ct,meta:kt.metadata}),triggerInternal("ProjectChanged",{project:kt,phase:Tt.videoApi.phase});return}case EventSubType.EVENT_SUB_TYPE_DELETE:{triggerInternal("ProjectRemoved",{projectId:ut.delete.projectId});return}case EventSubType.EVENT_SUB_TYPE_STATE:{const ct=getProject((nt=ut.state)==null?void 0:nt.projectId);if(!ct)return;let mt=ut.state.broadcastId;if(ut.state.error&&trigger("BroadcastError",{projectId:ct.id,broadcastId:ut.state.broadcastId,error:ut.state.error}),ut.state.phase){const kt=ut.state.phase;kt===BroadcastPhase.PROJECT_BROADCAST_PHASE_RUNNING?trigger("BroadcastStarted",{projectId:ct.id,broadcastId:ut.state.broadcastId}):kt===BroadcastPhase.PROJECT_BROADCAST_PHASE_STOPPED&&(mt=null,trigger("BroadcastStopped",{projectId:ct.id,broadcastId:ut.state.broadcastId}))}triggerInternal("ProjectChanged",{project:ct.videoApi.project,phase:ut.state.phase,broadcastId:mt});return}}}),rt.LayoutApi().on(lib$2.LayoutApiModel.EventType.EVENT_TYPE_LAYER,(ut,ht)=>{var nt;if(ht===lib$2.LayoutApiModel.EventSubType.EVENT_SUB_TYPE_CREATE){log$1.debug("Received: Node Insert",ut.create);const{connectionId:ct,layoutId:mt}=ut.create.requestMetadata;if(CoreContext.connectionId===ct)return;const kt=layerToNode(ut.create),Tt=getProjectByLayoutId(mt),Pt=[kt,...Tt.compositor.nodes.map(toDataNode$1)],At=toSceneTree(Pt,kt.id);Tt.compositor.local.insert(At),triggerInternal("NodeAdded",{projectId:Tt.id,nodeId:kt.id})}else if(ht===lib$2.LayoutApiModel.EventSubType.EVENT_SUB_TYPE_UPDATE){log$1.debug("Received: Node Update",ut.update);const{connectionId:ct,layoutId:mt,updateVersions:kt={}}=((nt=ut.update)==null?void 0:nt.requestMetadata)||{};if(CoreContext.connectionId===ct)return;const Tt=layerToNode(ut.update);if((latestUpdateVersion[Tt.id]||0)>kt[Tt.id])return log$1.info("Ignoring node update - updateID is less than latest.");latestUpdateVersion[Tt.id]=kt[Tt.id];const At=getProjectByLayoutId(mt);At.compositor.local.update(ut.update.id,Tt.props,Tt.childIds),triggerInternal("NodeChanged",{projectId:At.id,nodeId:Tt.id})}else if(ht===lib$2.LayoutApiModel.EventSubType.EVENT_SUB_TYPE_DELETE){log$1.debug("Received: Node Delete",ut.delete);const{connectionId:ct,layoutId:mt}=ut.delete.requestMetadata;if(CoreContext.connectionId===ct)return;const kt=getProjectByLayoutId(mt);kt.compositor.local.remove(ut.delete.id),triggerInternal("NodeRemoved",{projectId:kt.id,nodeId:ut.delete.id})}else if(ht===lib$2.LayoutApiModel.EventSubType.EVENT_SUB_TYPE_BATCH){log$1.debug("Received: Node Batch Update",ut.batch);const{connectionId:ct,layoutId:mt,updateVersions:kt={}}=ut.batch.requestMetadata;if(CoreContext.connectionId===ct)return;const Tt=getProjectByLayoutId(mt);ut.batch.layers.forEach(Pt=>{try{const[At,gt]=Object.entries(Pt)[0];if(At==="create"){const Ct=layerToNode(gt);Tt.compositor.local.insert(Ct),triggerInternal("NodeAdded",{projectId:Tt.id,nodeId:Ct.id})}else if(At==="update"){const Ct=layerToNode(gt);if((latestUpdateVersion[Ct.id]||0)>kt[Ct.id])return log$1.info("Ignoring node update - updateID is less than latest.");latestUpdateVersion[Ct.id]=kt[Ct.id],Tt.compositor.local.update(Ct.id,Ct.props,Ct.childIds),triggerInternal("NodeChanged",{projectId:Tt.id,nodeId:Ct.id})}else At==="delete"&&(Tt.compositor.local.remove(gt.id),triggerInternal("NodeRemoved",{projectId:Tt.id,nodeId:gt.id}))}catch(At){log$1.warn("Error handling batch item",At,{item:Pt})}}),Tt&&triggerInternal("NodeChanged",{projectId:Tt.id,nodeId:Tt.compositor.getRoot().id})}});const dt=(ut={},ht)=>{const{displayName:nt,role:ct,maxDuration:mt=CoreContext.config.defaults.guestTokenDuration,projectId:kt=CoreContext.state.activeProjectId}=ut,Tt=getProject(kt),Pt=nt?{direct:{displayName:nt}}:{exchange:{maxDuration:mt}};return rt.LiveApi().authentication.createGuestAccessToken({projectId:kt,token:Pt,url:ht,collectionId:Tt.videoApi.project.collectionId,maxDuration:mt,role:ct||lib$2.LiveApiModel.Role.ROLE_GUEST})};return{...omit$1(CoreContext,["clients","config","connectionId","Request","state","trigger"]),createDemoToken:async()=>(console.warn("createDemoToken() is currently unavailable."),""),createPreviewLink:async(ut={})=>{const{maxDuration:ht,projectId:nt=CoreContext.state.activeProjectId}=ut,ct=getProject(nt),mt=ct.videoApi.project.composition.studioSdk.rendererUrl;return(await rt.LiveApi().authentication.createGuestAccessToken({projectId:nt,token:{direct:{displayName:"Preview"}},url:mt,collectionId:ct.videoApi.project.collectionId,maxDuration:ht||CoreContext.config.defaults.previewTokenDuration,role:lib$2.LiveApiModel.Role.ROLE_VIEWER})).url},createGuestLink:async(ut,ht={})=>(await dt(ht,ut)).url,createGuestToken:async(ut={})=>(await dt(ut)).accessToken,initialProject:lt,load,render:render$1}},load=async(a,s)=>{let d=getBaseUser();if(d)return log$1.info("Attempted to load user again - returning existing user"),d;if(!a){log$1.warn("Access token required for load()");return}log$1.info("Loading user..."),await CoreContext.clients.load(a);const h=await CoreContext.Request.loadUser(s);return setAppState({user:h.user,sources:h.sources,projects:h.projects,activeProjectId:null}),d=getBaseUser(),trigger("UserLoaded",d),d},hostname=window.location.hostname,prodHosts=["cloud.golightstream.com","api.stream"],getEnv=()=>prodHosts.some(s=>hostname.includes(s))?"prod":"stage",run=async()=>{const a=await init({env:getEnv(),logLevel:"Debug"}),s=a==null?void 0:a.initialProject;if(!s)return console.warn("Project not available");await s.joinRoom(),a.render({containerEl:document.getElementById("root"),projectId:s.id,dragAndDrop:!1})};run();export{CoreContext as C,ProjectBroadcastPhase as P,getAccessTokenData as a,getProject as b,toBaseProject as c,getRoom as d,trigger$1 as e,toBaseDestination as f,getUser as g,hydrateProject as h,o,triggerInternal$1 as t,webrtcManager as w};
//# sourceMappingURL=compositor.f532d618.js.map
