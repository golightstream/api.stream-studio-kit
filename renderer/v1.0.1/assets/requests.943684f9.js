var u=Object.defineProperty,I=Object.defineProperties;var w=Object.getOwnPropertyDescriptors;var d=Object.getOwnPropertySymbols;var P=Object.prototype.hasOwnProperty,g=Object.prototype.propertyIsEnumerable;var j=(e,t,o)=>t in e?u(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,l=(e,t)=>{for(var o in t||(t={}))P.call(t,o)&&j(e,o,t[o]);if(d)for(var o of d(t))g.call(t,o)&&j(e,o,t[o]);return e},m=(e,t)=>I(e,w(t));import{C as i,g as y,h as v}from"./compositor.8c6d7442.js";const L=async(e,t,o)=>{const{backgroundImage:n,layout:c,layoutProps:a={}}=o,s=await i.compositor.createProject({props:{name:"Root",type:"sceneless-project",layout:"Layered",size:t,isRoot:!0}},e),r=s.getRoot(),p=await Promise.all([s.insert({name:"Background",id:"bg",tagName:"img",sourceType:"Element",attributes:{src:n},style:{objectFit:"cover"}},r.id),s.insert({id:"content",name:"Content",layout:c,layoutProps:a},r.id),s.insert({id:"foreground",name:"Overlays",layout:"Free"},r.id)]);return await s.reorder(r.id,p),s},h=async e=>{const{projectId:t,collectionId:o,props:n={}}=e,{project:c}=await i.clients.LiveApi().project.getProject({collectionId:o,projectId:t}),a=c.metadata,s=a.props||{},r=l(l({},s),n);i.clients.LiveApi().project.updateProject({collectionId:c.collectionId,projectId:c.projectId,updateMask:["metadata"],metadata:{layoutId:a.layoutId,props:r}})},R=async e=>{const t=e.type||"sceneless",o=e.size||{x:1280,y:720},n=e.props||{};let c=await i.clients.LiveApi().project.createProject({collectionId:e.collectionId,rendering:{video:{width:o.x,height:o.y,framerate:30}},composition:{studioSdk:{}},metadata:{},webrtc:{hosted:{}}});const a=await i.clients.LayoutApi().layout.createLayout({layout:{projectId:c.project.projectId,collectionId:c.project.collectionId}}),{displayName:s}=y(),r=l({type:t,layoutId:a.id,hostDisplayName:s},e.meta||{});let p=await i.clients.LiveApi().project.updateProject({collectionId:e.collectionId,projectId:c.project.projectId,updateMask:["metadata"],metadata:r});return c.project=p.project,c.project.metadata=r,t==="sceneless"?await L(a.id,o,n):await i.compositor.createProject({props:m(l({name:"Root",layout:"Free"},n),{isRoot:!0,size:o})},a.id),c},k=async()=>{const e=await A();let t;const{displayName:o,serviceUserId:n}=y();e.length===0?t=(await i.clients.LiveApi().collection.createCollection({metadata:{serviceUserId:n,displayName:o}})).collection:t=e[0],await i.clients.LiveApi().subscribeToCollection(t.collectionId);const c=await Promise.all(t.projects.map(a=>v(a)));return{collectionId:t.collectionId,userProps:t.metadata||{},projects:c}},A=async()=>(await i.clients.LiveApi().collection.getCollections({})).collections;export{R as createProject,A as loadCollections,k as loadProjects,h as updateProject};
//# sourceMappingURL=requests.943684f9.js.map
