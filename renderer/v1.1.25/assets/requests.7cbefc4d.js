import{C as r,g as y,a as m,b,h as v}from"./compositor.e057477c.js";const h=async(o,t,s)=>{const{backgroundImage:a,layout:l,layoutProps:i={}}=s,e=await r.compositor.createProject({props:{name:"Root",type:"sceneless-project",sourceType:"Element",layout:"Layered",size:t,isRoot:!0,tagName:"div",fields:{style:{background:"black"}}}},o),n=e.getRoot(),d=await Promise.all([e.insert({name:"Background",id:"bg",layout:"Free"},n.id),e.insert({id:"content",name:"Content",layout:l,layoutProps:i},n.id),e.insert({id:"foreground",name:"Overlays",layout:"Free"},n.id)]);await e.reorder(n.id,d);const c=n.children.find(u=>u.props.id==="foreground"),g=await Promise.all([e.insert({name:"ImageOverlay",id:"fg-image",layout:"Free"},c.id),e.insert({name:"ImageOverlay2",sourceType:"Image2",proxySource:"Overlay",id:"image-overlay",layout:"Free",style:{width:"100%",height:"100%",position:"absolute",objectFit:"cover"}},c.id),e.insert({name:"BannerContainer",id:"fg-banners",layout:"Column",layoutProps:{cover:!0}},c.id),e.insert({name:"VideoOverlay",id:"fg-video",layout:"Free"},c.id),e.insert({name:"VideoOverlay2",layout:"Free",sourceType:"Video2",proxySource:"Overlay",id:"video-overlay",style:{width:"100%",height:"100%",position:"absolute",objectFit:"cover"}},c.id),e.insert({name:"Logo",layout:"Free",sourceType:"Logo",id:"logo",style:{width:"160px",height:"90px",objectFit:"contain",position:"unset"}},c.id)]);await e.reorder(c.id,g);const p=n.children.find(u=>u.props.id==="bg"),j=await Promise.all([e.insert({name:"ImageBackground",id:"bg-image",tagName:"img",sourceType:"Element",attributes:{src:a}},p.id),e.insert({name:"ImageBackground",sourceType:"Image2",proxySource:"Background",id:"image-background",layout:"Free",src:a,style:{width:"100%",height:"100%",position:"absolute",objectFit:"cover"}},p.id),e.insert({name:"VideoBackground",sourceType:"Video2",proxySource:"Background",id:"video-background",layout:"Free",style:{width:"100%",height:"100%",position:"absolute",objectFit:"cover"}},p.id)]);return await e.reorder(p.id,j),e},L=async o=>{const t=y().id,s=o.type||"sceneless",a=o.size||{x:1280,y:720},l=o.settings||{};let i=await r.clients.LiveApi().project.createProject({collectionId:t,rendering:{video:{width:a.x,height:a.y,framerate:30}},composition:{studioSdk:{}},metadata:{},webrtc:{hosted:{}}});const e=await r.clients.LayoutApi().layout.createLayout({layout:{projectId:i.project.projectId,collectionId:i.project.collectionId}}),{displayName:n}=m(),d={type:s,layoutId:e.id,hostDisplayName:n,props:o.props||{}};let c=await r.clients.LiveApi().project.updateProject({collectionId:t,projectId:i.project.projectId,updateMask:["metadata"],metadata:d});return i.project=c.project,i.project.metadata=d,s==="sceneless"?await h(e.id,a,l):await r.compositor.createProject({props:{name:"Root",layout:"Free",...l,isRoot:!0,size:a}},e.id),i},P=async o=>{const{projectId:t}=o,s=b(t),a=y().id;await Promise.all([r.clients.LiveApi().project.deleteProject({collectionId:a,projectId:t}),r.clients.LayoutApi().layout.deleteLayout({layoutId:s.layoutApi.layoutId})])},k=async()=>{var i;const o=await w();let t;const{displayName:s,serviceUserId:a}=m();o.length===0?t=(await r.clients.LiveApi().collection.createCollection({metadata:{serviceUserId:a,displayName:s,props:{}}})).collection:t=o[0],await r.clients.LiveApi().subscribeToCollection(t.collectionId);const l=await Promise.all(t.projects.map(e=>v(e,"ROLE_HOST")));return{user:{id:t.collectionId,metadata:t.metadata,props:((i=t.metadata)==null?void 0:i.props)||{},name:s},projects:l,sources:t.sources}},w=async()=>(await r.clients.LiveApi().collection.getCollections({})).collections;export{L as createProject,P as deleteProject,w as loadCollections,k as loadUser};
//# sourceMappingURL=requests.7cbefc4d.js.map
