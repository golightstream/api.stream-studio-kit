var ys=Object.defineProperty;var Ss=(a,c,b)=>c in a?ys(a,c,{enumerable:!0,configurable:!0,writable:!0,value:b}):a[c]=b;var Yn=(a,c,b)=>(Ss(a,typeof c!="symbol"?c+"":c,b),b);(function(){const c=document.createElement("link").relList;if(c&&c.supports&&c.supports("modulepreload"))return;for(const k of document.querySelectorAll('link[rel="modulepreload"]'))_(k);new MutationObserver(k=>{for(const j of k)if(j.type==="childList")for(const _e of j.addedNodes)_e.tagName==="LINK"&&_e.rel==="modulepreload"&&_(_e)}).observe(document,{childList:!0,subtree:!0});function b(k){const j={};return k.integrity&&(j.integrity=k.integrity),k.referrerPolicy&&(j.referrerPolicy=k.referrerPolicy),k.crossOrigin==="use-credentials"?j.credentials="include":k.crossOrigin==="anonymous"?j.credentials="omit":j.credentials="same-origin",j}function _(k){if(k.ep)return;k.ep=!0;const j=b(k);fetch(k.href,j)}})();const scriptRel="modulepreload",assetsURL=function(a){return"/studiokit/renderer/3.0.4/"+a},seen={},__vitePreload=function(c,b,_){let k=Promise.resolve();if(b&&b.length>0){const j=document.getElementsByTagName("link");k=Promise.all(b.map(_e=>{if(_e=assetsURL(_e),_e in seen)return;seen[_e]=!0;const et=_e.endsWith(".css"),nt=et?'[rel="stylesheet"]':"";if(!!_)for(let pt=j.length-1;pt>=0;pt--){const mt=j[pt];if(mt.href===_e&&(!et||mt.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${_e}"]${nt}`))return;const ft=document.createElement("link");if(ft.rel=et?"stylesheet":scriptRel,et||(ft.as="script",ft.crossOrigin=""),ft.href=_e,document.head.appendChild(ft),et)return new Promise((pt,mt)=>{ft.addEventListener("load",pt),ft.addEventListener("error",()=>mt(new Error(`Unable to preload CSS for ${_e}`)))})}))}return k.then(()=>c()).catch(j=>{const _e=new Event("vite:preloadError",{cancelable:!0});if(_e.payload=j,window.dispatchEvent(_e),!_e.defaultPrevented)throw j})};let currentSubId=0;const subscribers=new Map,subscribersInternal=new Map;function createSubscribe(a={}){return function(c){if(typeof c!="function")return;const b=a.internal?subscribersInternal:subscribers,_=++currentSubId;return b.set(_,c),()=>{b.delete(_)}}}function createOn(a={}){return function(c,b){return(a.internal?subscribeInternal:subscribe)((k,j)=>{if(c===k)return b(j)})}}function createTrigger(a={}){const c=a.internal?subscribersInternal:subscribers;return async function(b,..._){let k={type:b,payload:_[0]};const j=a.internal?"Internal":"External";log$1.info(`${j} Event:`,k),await Promise.all(Array.from(c.values()).map(_e=>_e(k.type,k.payload)))}}const trigger$1=createTrigger(),subscribe=createSubscribe(),on=createOn(),triggerInternal$1=createTrigger({internal:!0}),subscribeInternal=createSubscribe({internal:!0}),onInternal=createOn({internal:!0});var commonjsGlobal$1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs$1(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}function getAugmentedNamespace(a){if(a.__esModule)return a;var c=a.default;if(typeof c=="function"){var b=function _(){return this instanceof _?Reflect.construct(c,arguments,this.constructor):c.apply(this,arguments)};b.prototype=c.prototype}else b={};return Object.defineProperty(b,"__esModule",{value:!0}),Object.keys(a).forEach(function(_){var k=Object.getOwnPropertyDescriptor(a,_);Object.defineProperty(b,_,k.get?k:{enumerable:!0,get:function(){return a[_]}})}),b}var loglevel$1={exports:{}};(function(a){(function(c,b){a.exports?a.exports=b():c.log=b()})(commonjsGlobal$1,function(){var c=function(){},b="undefined",_=typeof window!==b&&typeof window.navigator!==b&&/Trident\/|MSIE /.test(window.navigator.userAgent),k=["trace","debug","info","warn","error"],j={},_e=null;function et(_t,Tt){var gt=_t[Tt];if(typeof gt.bind=="function")return gt.bind(_t);try{return Function.prototype.bind.call(gt,_t)}catch{return function(){return Function.prototype.apply.apply(gt,[_t,arguments])}}}function nt(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function it(_t){return _t==="debug"&&(_t="log"),typeof console===b?!1:_t==="trace"&&_?nt:console[_t]!==void 0?et(console,_t):console.log!==void 0?et(console,"log"):c}function ft(){for(var _t=this.getLevel(),Tt=0;Tt<k.length;Tt++){var gt=k[Tt];this[gt]=Tt<_t?c:this.methodFactory(gt,_t,this.name)}if(this.log=this.debug,typeof console===b&&_t<this.levels.SILENT)return"No console available for logging"}function pt(_t){return function(){typeof console!==b&&(ft.call(this),this[_t].apply(this,arguments))}}function mt(_t,Tt,gt){return it(_t)||pt.apply(this,arguments)}function St(_t,Tt){var gt=this,ht,Et,At,Bt="loglevel";typeof _t=="string"?Bt+=":"+_t:typeof _t=="symbol"&&(Bt=void 0);function qt(lt){var kt=(k[lt]||"silent").toUpperCase();if(!(typeof window===b||!Bt)){try{window.localStorage[Bt]=kt;return}catch{}try{window.document.cookie=encodeURIComponent(Bt)+"="+kt+";"}catch{}}}function zt(){var lt;if(!(typeof window===b||!Bt)){try{lt=window.localStorage[Bt]}catch{}if(typeof lt===b)try{var kt=window.document.cookie,Lt=encodeURIComponent(Bt),Jt=kt.indexOf(Lt+"=");Jt!==-1&&(lt=/^([^;]+)/.exec(kt.slice(Jt+Lt.length+1))[1])}catch{}return gt.levels[lt]===void 0&&(lt=void 0),lt}}function Ht(){if(!(typeof window===b||!Bt)){try{window.localStorage.removeItem(Bt)}catch{}try{window.document.cookie=encodeURIComponent(Bt)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch{}}}function ct(lt){var kt=lt;if(typeof kt=="string"&&gt.levels[kt.toUpperCase()]!==void 0&&(kt=gt.levels[kt.toUpperCase()]),typeof kt=="number"&&kt>=0&&kt<=gt.levels.SILENT)return kt;throw new TypeError("log.setLevel() called with invalid level: "+lt)}gt.name=_t,gt.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},gt.methodFactory=Tt||mt,gt.getLevel=function(){return At??Et??ht},gt.setLevel=function(lt,kt){return At=ct(lt),kt!==!1&&qt(At),ft.call(gt)},gt.setDefaultLevel=function(lt){Et=ct(lt),zt()||gt.setLevel(lt,!1)},gt.resetLevel=function(){At=null,Ht(),ft.call(gt)},gt.enableAll=function(lt){gt.setLevel(gt.levels.TRACE,lt)},gt.disableAll=function(lt){gt.setLevel(gt.levels.SILENT,lt)},gt.rebuild=function(){if(_e!==gt&&(ht=ct(_e.getLevel())),ft.call(gt),_e===gt)for(var lt in j)j[lt].rebuild()},ht=ct(_e?_e.getLevel():"WARN");var dt=zt();dt!=null&&(At=ct(dt)),ft.call(gt)}_e=new St,_e.getLogger=function(Tt){if(typeof Tt!="symbol"&&typeof Tt!="string"||Tt==="")throw new TypeError("You must supply a name when creating a logger.");var gt=j[Tt];return gt||(gt=j[Tt]=new St(Tt,_e.methodFactory)),gt};var yt=typeof window!==b?window.log:void 0;return _e.noConflict=function(){return typeof window!==b&&window.log===_e&&(window.log=yt),_e},_e.getLoggers=function(){return j},_e.default=_e,_e})})(loglevel$1);var loglevelExports$1=loglevel$1.exports;const log$1=getDefaultExportFromCjs$1(loglevelExports$1),connectionId$1=(Math.random()*1e20).toString(36),version$5="3.0.4",CoreContext={config:null,clients:null,Request:{},Command:{},on,subscribe,onInternal,subscribeInternal,trigger:trigger$1,triggerInternal:triggerInternal$1,state:{},compositor:{},connectionId:connectionId$1,version:version$5,rendererVersion:version$5,log:log$1,logLevel:null},setAppState=a=>{Object.keys(a).forEach(c=>{CoreContext.state[c]=a[c]})};var freeGlobal=typeof global=="object"&&global&&global.Object===Object&&global,freeSelf=typeof self=="object"&&self&&self.Object===Object&&self,root=freeGlobal||freeSelf||Function("return this")(),Symbol$1=root.Symbol,objectProto$m=Object.prototype,hasOwnProperty$g=objectProto$m.hasOwnProperty,nativeObjectToString$1=objectProto$m.toString,symToStringTag$1=Symbol$1?Symbol$1.toStringTag:void 0;function getRawTag(a){var c=hasOwnProperty$g.call(a,symToStringTag$1),b=a[symToStringTag$1];try{a[symToStringTag$1]=void 0;var _=!0}catch{}var k=nativeObjectToString$1.call(a);return _&&(c?a[symToStringTag$1]=b:delete a[symToStringTag$1]),k}var objectProto$l=Object.prototype,nativeObjectToString=objectProto$l.toString;function objectToString$7(a){return nativeObjectToString.call(a)}var nullTag="[object Null]",undefinedTag="[object Undefined]",symToStringTag=Symbol$1?Symbol$1.toStringTag:void 0;function baseGetTag(a){return a==null?a===void 0?undefinedTag:nullTag:symToStringTag&&symToStringTag in Object(a)?getRawTag(a):objectToString$7(a)}function isObjectLike$7(a){return a!=null&&typeof a=="object"}var symbolTag$6="[object Symbol]";function isSymbol$3(a){return typeof a=="symbol"||isObjectLike$7(a)&&baseGetTag(a)==symbolTag$6}function arrayMap$1(a,c){for(var b=-1,_=a==null?0:a.length,k=Array(_);++b<_;)k[b]=c(a[b],b,a);return k}var isArray$5=Array.isArray,INFINITY$4=1/0,symbolProto$2=Symbol$1?Symbol$1.prototype:void 0,symbolToString=symbolProto$2?symbolProto$2.toString:void 0;function baseToString(a){if(typeof a=="string")return a;if(isArray$5(a))return arrayMap$1(a,baseToString)+"";if(isSymbol$3(a))return symbolToString?symbolToString.call(a):"";var c=a+"";return c=="0"&&1/a==-INFINITY$4?"-0":c}var reWhitespace=/\s/;function trimmedEndIndex(a){for(var c=a.length;c--&&reWhitespace.test(a.charAt(c)););return c}var reTrimStart=/^\s+/;function baseTrim(a){return a&&a.slice(0,trimmedEndIndex(a)+1).replace(reTrimStart,"")}function isObject$9(a){var c=typeof a;return a!=null&&(c=="object"||c=="function")}var NAN$3=NaN,reIsBadHex$3=/^[-+]0x[0-9a-f]+$/i,reIsBinary$3=/^0b[01]+$/i,reIsOctal$3=/^0o[0-7]+$/i,freeParseInt$3=parseInt;function toNumber$3(a){if(typeof a=="number")return a;if(isSymbol$3(a))return NAN$3;if(isObject$9(a)){var c=typeof a.valueOf=="function"?a.valueOf():a;a=isObject$9(c)?c+"":c}if(typeof a!="string")return a===0?a:+a;a=baseTrim(a);var b=reIsBinary$3.test(a);return b||reIsOctal$3.test(a)?freeParseInt$3(a.slice(2),b?2:8):reIsBadHex$3.test(a)?NAN$3:+a}function identity$1(a){return a}var asyncTag="[object AsyncFunction]",funcTag$3="[object Function]",genTag$2="[object GeneratorFunction]",proxyTag="[object Proxy]";function isFunction$4(a){if(!isObject$9(a))return!1;var c=baseGetTag(a);return c==funcTag$3||c==genTag$2||c==asyncTag||c==proxyTag}var coreJsData=root["__core-js_shared__"],maskSrcKey=function(){var a=/[^.]+$/.exec(coreJsData&&coreJsData.keys&&coreJsData.keys.IE_PROTO||"");return a?"Symbol(src)_1."+a:""}();function isMasked(a){return!!maskSrcKey&&maskSrcKey in a}var funcProto$3=Function.prototype,funcToString$3=funcProto$3.toString;function toSource(a){if(a!=null){try{return funcToString$3.call(a)}catch{}try{return a+""}catch{}}return""}var reRegExpChar=/[\\^$.*+?()[\]{}|]/g,reIsHostCtor=/^\[object .+?Constructor\]$/,funcProto$2=Function.prototype,objectProto$k=Object.prototype,funcToString$2=funcProto$2.toString,hasOwnProperty$f=objectProto$k.hasOwnProperty,reIsNative=RegExp("^"+funcToString$2.call(hasOwnProperty$f).replace(reRegExpChar,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function baseIsNative(a){if(!isObject$9(a)||isMasked(a))return!1;var c=isFunction$4(a)?reIsNative:reIsHostCtor;return c.test(toSource(a))}function getValue(a,c){return a==null?void 0:a[c]}function getNative(a,c){var b=getValue(a,c);return baseIsNative(b)?b:void 0}var WeakMap$2=getNative(root,"WeakMap"),objectCreate$1=Object.create,baseCreate=function(){function a(){}return function(c){if(!isObject$9(c))return{};if(objectCreate$1)return objectCreate$1(c);a.prototype=c;var b=new a;return a.prototype=void 0,b}}();function apply(a,c,b){switch(b.length){case 0:return a.call(c);case 1:return a.call(c,b[0]);case 2:return a.call(c,b[0],b[1]);case 3:return a.call(c,b[0],b[1],b[2])}return a.apply(c,b)}function copyArray(a,c){var b=-1,_=a.length;for(c||(c=Array(_));++b<_;)c[b]=a[b];return c}var HOT_COUNT=800,HOT_SPAN=16,nativeNow=Date.now;function shortOut(a){var c=0,b=0;return function(){var _=nativeNow(),k=HOT_SPAN-(_-b);if(b=_,k>0){if(++c>=HOT_COUNT)return arguments[0]}else c=0;return a.apply(void 0,arguments)}}function constant(a){return function(){return a}}var defineProperty$1=function(){try{var a=getNative(Object,"defineProperty");return a({},"",{}),a}catch{}}(),baseSetToString=defineProperty$1?function(a,c){return defineProperty$1(a,"toString",{configurable:!0,enumerable:!1,value:constant(c),writable:!0})}:identity$1;const baseSetToString$1=baseSetToString;var setToString=shortOut(baseSetToString$1);function arrayEach(a,c){for(var b=-1,_=a==null?0:a.length;++b<_&&c(a[b],b,a)!==!1;);return a}function baseFindIndex$1(a,c,b,_){for(var k=a.length,j=b+(_?1:-1);_?j--:++j<k;)if(c(a[j],j,a))return j;return-1}function baseIsNaN$1(a){return a!==a}function strictIndexOf(a,c,b){for(var _=b-1,k=a.length;++_<k;)if(a[_]===c)return _;return-1}function baseIndexOf$1(a,c,b){return c===c?strictIndexOf(a,c,b):baseFindIndex$1(a,baseIsNaN$1,b)}var MAX_SAFE_INTEGER$2=9007199254740991,reIsUint$1=/^(?:0|[1-9]\d*)$/;function isIndex$1(a,c){var b=typeof a;return c=c??MAX_SAFE_INTEGER$2,!!c&&(b=="number"||b!="symbol"&&reIsUint$1.test(a))&&a>-1&&a%1==0&&a<c}function baseAssignValue(a,c,b){c=="__proto__"&&defineProperty$1?defineProperty$1(a,c,{configurable:!0,enumerable:!0,value:b,writable:!0}):a[c]=b}function eq(a,c){return a===c||a!==a&&c!==c}var objectProto$j=Object.prototype,hasOwnProperty$e=objectProto$j.hasOwnProperty;function assignValue(a,c,b){var _=a[c];(!(hasOwnProperty$e.call(a,c)&&eq(_,b))||b===void 0&&!(c in a))&&baseAssignValue(a,c,b)}function copyObject(a,c,b,_){var k=!b;b||(b={});for(var j=-1,_e=c.length;++j<_e;){var et=c[j],nt=_?_(b[et],a[et],et,b,a):void 0;nt===void 0&&(nt=a[et]),k?baseAssignValue(b,et,nt):assignValue(b,et,nt)}return b}var nativeMax$2=Math.max;function overRest(a,c,b){return c=nativeMax$2(c===void 0?a.length-1:c,0),function(){for(var _=arguments,k=-1,j=nativeMax$2(_.length-c,0),_e=Array(j);++k<j;)_e[k]=_[c+k];k=-1;for(var et=Array(c+1);++k<c;)et[k]=_[k];return et[c]=b(_e),apply(a,this,et)}}function baseRest(a,c){return setToString(overRest(a,c,identity$1),a+"")}var MAX_SAFE_INTEGER$1=9007199254740991;function isLength$1(a){return typeof a=="number"&&a>-1&&a%1==0&&a<=MAX_SAFE_INTEGER$1}function isArrayLike$2(a){return a!=null&&isLength$1(a.length)&&!isFunction$4(a)}function isIterateeCall(a,c,b){if(!isObject$9(b))return!1;var _=typeof c;return(_=="number"?isArrayLike$2(b)&&isIndex$1(c,b.length):_=="string"&&c in b)?eq(b[c],a):!1}var objectProto$i=Object.prototype;function isPrototype$1(a){var c=a&&a.constructor,b=typeof c=="function"&&c.prototype||objectProto$i;return a===b}function baseTimes$1(a,c){for(var b=-1,_=Array(a);++b<a;)_[b]=c(b);return _}var argsTag$4="[object Arguments]";function baseIsArguments(a){return isObjectLike$7(a)&&baseGetTag(a)==argsTag$4}var objectProto$h=Object.prototype,hasOwnProperty$d=objectProto$h.hasOwnProperty,propertyIsEnumerable$2=objectProto$h.propertyIsEnumerable,isArguments$2=baseIsArguments(function(){return arguments}())?baseIsArguments:function(a){return isObjectLike$7(a)&&hasOwnProperty$d.call(a,"callee")&&!propertyIsEnumerable$2.call(a,"callee")};function stubFalse(){return!1}var freeExports$2=typeof exports=="object"&&exports&&!exports.nodeType&&exports,freeModule$2=freeExports$2&&typeof module=="object"&&module&&!module.nodeType&&module,moduleExports$2=freeModule$2&&freeModule$2.exports===freeExports$2,Buffer$9=moduleExports$2?root.Buffer:void 0,nativeIsBuffer=Buffer$9?Buffer$9.isBuffer:void 0,isBuffer$1=nativeIsBuffer||stubFalse,argsTag$3="[object Arguments]",arrayTag$2="[object Array]",boolTag$4="[object Boolean]",dateTag$3="[object Date]",errorTag$2="[object Error]",funcTag$2="[object Function]",mapTag$5="[object Map]",numberTag$4="[object Number]",objectTag$5="[object Object]",regexpTag$3="[object RegExp]",setTag$5="[object Set]",stringTag$5="[object String]",weakMapTag$2="[object WeakMap]",arrayBufferTag$3="[object ArrayBuffer]",dataViewTag$4="[object DataView]",float32Tag$2="[object Float32Array]",float64Tag$2="[object Float64Array]",int8Tag$2="[object Int8Array]",int16Tag$2="[object Int16Array]",int32Tag$2="[object Int32Array]",uint8Tag$2="[object Uint8Array]",uint8ClampedTag$2="[object Uint8ClampedArray]",uint16Tag$2="[object Uint16Array]",uint32Tag$2="[object Uint32Array]",typedArrayTags={};typedArrayTags[float32Tag$2]=typedArrayTags[float64Tag$2]=typedArrayTags[int8Tag$2]=typedArrayTags[int16Tag$2]=typedArrayTags[int32Tag$2]=typedArrayTags[uint8Tag$2]=typedArrayTags[uint8ClampedTag$2]=typedArrayTags[uint16Tag$2]=typedArrayTags[uint32Tag$2]=!0;typedArrayTags[argsTag$3]=typedArrayTags[arrayTag$2]=typedArrayTags[arrayBufferTag$3]=typedArrayTags[boolTag$4]=typedArrayTags[dataViewTag$4]=typedArrayTags[dateTag$3]=typedArrayTags[errorTag$2]=typedArrayTags[funcTag$2]=typedArrayTags[mapTag$5]=typedArrayTags[numberTag$4]=typedArrayTags[objectTag$5]=typedArrayTags[regexpTag$3]=typedArrayTags[setTag$5]=typedArrayTags[stringTag$5]=typedArrayTags[weakMapTag$2]=!1;function baseIsTypedArray(a){return isObjectLike$7(a)&&isLength$1(a.length)&&!!typedArrayTags[baseGetTag(a)]}function baseUnary(a){return function(c){return a(c)}}var freeExports$1=typeof exports=="object"&&exports&&!exports.nodeType&&exports,freeModule$1=freeExports$1&&typeof module=="object"&&module&&!module.nodeType&&module,moduleExports$1=freeModule$1&&freeModule$1.exports===freeExports$1,freeProcess=moduleExports$1&&freeGlobal.process,nodeUtil=function(){try{var a=freeModule$1&&freeModule$1.require&&freeModule$1.require("util").types;return a||freeProcess&&freeProcess.binding&&freeProcess.binding("util")}catch{}}(),nodeIsTypedArray=nodeUtil&&nodeUtil.isTypedArray,isTypedArray$1=nodeIsTypedArray?baseUnary(nodeIsTypedArray):baseIsTypedArray,objectProto$g=Object.prototype,hasOwnProperty$c=objectProto$g.hasOwnProperty;function arrayLikeKeys$1(a,c){var b=isArray$5(a),_=!b&&isArguments$2(a),k=!b&&!_&&isBuffer$1(a),j=!b&&!_&&!k&&isTypedArray$1(a),_e=b||_||k||j,et=_e?baseTimes$1(a.length,String):[],nt=et.length;for(var it in a)(c||hasOwnProperty$c.call(a,it))&&!(_e&&(it=="length"||k&&(it=="offset"||it=="parent")||j&&(it=="buffer"||it=="byteLength"||it=="byteOffset")||isIndex$1(it,nt)))&&et.push(it);return et}function overArg$2(a,c){return function(b){return a(c(b))}}var nativeKeys$1=overArg$2(Object.keys,Object),objectProto$f=Object.prototype,hasOwnProperty$b=objectProto$f.hasOwnProperty;function baseKeys$1(a){if(!isPrototype$1(a))return nativeKeys$1(a);var c=[];for(var b in Object(a))hasOwnProperty$b.call(a,b)&&b!="constructor"&&c.push(b);return c}function keys$2(a){return isArrayLike$2(a)?arrayLikeKeys$1(a):baseKeys$1(a)}function nativeKeysIn(a){var c=[];if(a!=null)for(var b in Object(a))c.push(b);return c}var objectProto$e=Object.prototype,hasOwnProperty$a=objectProto$e.hasOwnProperty;function baseKeysIn(a){if(!isObject$9(a))return nativeKeysIn(a);var c=isPrototype$1(a),b=[];for(var _ in a)_=="constructor"&&(c||!hasOwnProperty$a.call(a,_))||b.push(_);return b}function keysIn(a){return isArrayLike$2(a)?arrayLikeKeys$1(a,!0):baseKeysIn(a)}var reIsDeepProp=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,reIsPlainProp=/^\w*$/;function isKey(a,c){if(isArray$5(a))return!1;var b=typeof a;return b=="number"||b=="symbol"||b=="boolean"||a==null||isSymbol$3(a)?!0:reIsPlainProp.test(a)||!reIsDeepProp.test(a)||c!=null&&a in Object(c)}var nativeCreate=getNative(Object,"create");function hashClear(){this.__data__=nativeCreate?nativeCreate(null):{},this.size=0}function hashDelete(a){var c=this.has(a)&&delete this.__data__[a];return this.size-=c?1:0,c}var HASH_UNDEFINED$2="__lodash_hash_undefined__",objectProto$d=Object.prototype,hasOwnProperty$9=objectProto$d.hasOwnProperty;function hashGet(a){var c=this.__data__;if(nativeCreate){var b=c[a];return b===HASH_UNDEFINED$2?void 0:b}return hasOwnProperty$9.call(c,a)?c[a]:void 0}var objectProto$c=Object.prototype,hasOwnProperty$8=objectProto$c.hasOwnProperty;function hashHas(a){var c=this.__data__;return nativeCreate?c[a]!==void 0:hasOwnProperty$8.call(c,a)}var HASH_UNDEFINED$1="__lodash_hash_undefined__";function hashSet(a,c){var b=this.__data__;return this.size+=this.has(a)?0:1,b[a]=nativeCreate&&c===void 0?HASH_UNDEFINED$1:c,this}function Hash(a){var c=-1,b=a==null?0:a.length;for(this.clear();++c<b;){var _=a[c];this.set(_[0],_[1])}}Hash.prototype.clear=hashClear;Hash.prototype.delete=hashDelete;Hash.prototype.get=hashGet;Hash.prototype.has=hashHas;Hash.prototype.set=hashSet;function listCacheClear(){this.__data__=[],this.size=0}function assocIndexOf(a,c){for(var b=a.length;b--;)if(eq(a[b][0],c))return b;return-1}var arrayProto$1=Array.prototype,splice$1=arrayProto$1.splice;function listCacheDelete(a){var c=this.__data__,b=assocIndexOf(c,a);if(b<0)return!1;var _=c.length-1;return b==_?c.pop():splice$1.call(c,b,1),--this.size,!0}function listCacheGet(a){var c=this.__data__,b=assocIndexOf(c,a);return b<0?void 0:c[b][1]}function listCacheHas(a){return assocIndexOf(this.__data__,a)>-1}function listCacheSet(a,c){var b=this.__data__,_=assocIndexOf(b,a);return _<0?(++this.size,b.push([a,c])):b[_][1]=c,this}function ListCache(a){var c=-1,b=a==null?0:a.length;for(this.clear();++c<b;){var _=a[c];this.set(_[0],_[1])}}ListCache.prototype.clear=listCacheClear;ListCache.prototype.delete=listCacheDelete;ListCache.prototype.get=listCacheGet;ListCache.prototype.has=listCacheHas;ListCache.prototype.set=listCacheSet;var Map$1=getNative(root,"Map");function mapCacheClear(){this.size=0,this.__data__={hash:new Hash,map:new(Map$1||ListCache),string:new Hash}}function isKeyable(a){var c=typeof a;return c=="string"||c=="number"||c=="symbol"||c=="boolean"?a!=="__proto__":a===null}function getMapData(a,c){var b=a.__data__;return isKeyable(c)?b[typeof c=="string"?"string":"hash"]:b.map}function mapCacheDelete(a){var c=getMapData(this,a).delete(a);return this.size-=c?1:0,c}function mapCacheGet(a){return getMapData(this,a).get(a)}function mapCacheHas(a){return getMapData(this,a).has(a)}function mapCacheSet(a,c){var b=getMapData(this,a),_=b.size;return b.set(a,c),this.size+=b.size==_?0:1,this}function MapCache(a){var c=-1,b=a==null?0:a.length;for(this.clear();++c<b;){var _=a[c];this.set(_[0],_[1])}}MapCache.prototype.clear=mapCacheClear;MapCache.prototype.delete=mapCacheDelete;MapCache.prototype.get=mapCacheGet;MapCache.prototype.has=mapCacheHas;MapCache.prototype.set=mapCacheSet;var FUNC_ERROR_TEXT$2="Expected a function";function memoize(a,c){if(typeof a!="function"||c!=null&&typeof c!="function")throw new TypeError(FUNC_ERROR_TEXT$2);var b=function(){var _=arguments,k=c?c.apply(this,_):_[0],j=b.cache;if(j.has(k))return j.get(k);var _e=a.apply(this,_);return b.cache=j.set(k,_e)||j,_e};return b.cache=new(memoize.Cache||MapCache),b}memoize.Cache=MapCache;var MAX_MEMOIZE_SIZE=500;function memoizeCapped(a){var c=memoize(a,function(_){return b.size===MAX_MEMOIZE_SIZE&&b.clear(),_}),b=c.cache;return c}var rePropName$1=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,reEscapeChar$1=/\\(\\)?/g,stringToPath$1=memoizeCapped(function(a){var c=[];return a.charCodeAt(0)===46&&c.push(""),a.replace(rePropName$1,function(b,_,k,j){c.push(k?j.replace(reEscapeChar$1,"$1"):_||b)}),c});function toString$3(a){return a==null?"":baseToString(a)}function castPath(a,c){return isArray$5(a)?a:isKey(a,c)?[a]:stringToPath$1(toString$3(a))}var INFINITY$3=1/0;function toKey(a){if(typeof a=="string"||isSymbol$3(a))return a;var c=a+"";return c=="0"&&1/a==-INFINITY$3?"-0":c}function baseGet(a,c){c=castPath(c,a);for(var b=0,_=c.length;a!=null&&b<_;)a=a[toKey(c[b++])];return b&&b==_?a:void 0}function get(a,c,b){var _=a==null?void 0:baseGet(a,c);return _===void 0?b:_}function arrayPush(a,c){for(var b=-1,_=c.length,k=a.length;++b<_;)a[k+b]=c[b];return a}var spreadableSymbol=Symbol$1?Symbol$1.isConcatSpreadable:void 0;function isFlattenable(a){return isArray$5(a)||isArguments$2(a)||!!(spreadableSymbol&&a&&a[spreadableSymbol])}function baseFlatten(a,c,b,_,k){var j=-1,_e=a.length;for(b||(b=isFlattenable),k||(k=[]);++j<_e;){var et=a[j];c>0&&b(et)?c>1?baseFlatten(et,c-1,b,_,k):arrayPush(k,et):_||(k[k.length]=et)}return k}function flatten(a){var c=a==null?0:a.length;return c?baseFlatten(a,1):[]}function flatRest(a){return setToString(overRest(a,void 0,flatten),a+"")}var getPrototype$1=overArg$2(Object.getPrototypeOf,Object),objectTag$4="[object Object]",funcProto$1=Function.prototype,objectProto$b=Object.prototype,funcToString$1=funcProto$1.toString,hasOwnProperty$7=objectProto$b.hasOwnProperty,objectCtorString$1=funcToString$1.call(Object);function isPlainObject$3(a){if(!isObjectLike$7(a)||baseGetTag(a)!=objectTag$4)return!1;var c=getPrototype$1(a);if(c===null)return!0;var b=hasOwnProperty$7.call(c,"constructor")&&c.constructor;return typeof b=="function"&&b instanceof b&&funcToString$1.call(b)==objectCtorString$1}function baseSlice(a,c,b){var _=-1,k=a.length;c<0&&(c=-c>k?0:k+c),b=b>k?k:b,b<0&&(b+=k),k=c>b?0:b-c>>>0,c>>>=0;for(var j=Array(k);++_<k;)j[_]=a[_+c];return j}function castSlice(a,c,b){var _=a.length;return b=b===void 0?_:b,!c&&b>=_?a:baseSlice(a,c,b)}var rsAstralRange$2="\\ud800-\\udfff",rsComboMarksRange$3="\\u0300-\\u036f",reComboHalfMarksRange$3="\\ufe20-\\ufe2f",rsComboSymbolsRange$3="\\u20d0-\\u20ff",rsComboRange$3=rsComboMarksRange$3+reComboHalfMarksRange$3+rsComboSymbolsRange$3,rsVarRange$2="\\ufe0e\\ufe0f",rsZWJ$2="\\u200d",reHasUnicode=RegExp("["+rsZWJ$2+rsAstralRange$2+rsComboRange$3+rsVarRange$2+"]");function hasUnicode(a){return reHasUnicode.test(a)}function asciiToArray(a){return a.split("")}var rsAstralRange$1="\\ud800-\\udfff",rsComboMarksRange$2="\\u0300-\\u036f",reComboHalfMarksRange$2="\\ufe20-\\ufe2f",rsComboSymbolsRange$2="\\u20d0-\\u20ff",rsComboRange$2=rsComboMarksRange$2+reComboHalfMarksRange$2+rsComboSymbolsRange$2,rsVarRange$1="\\ufe0e\\ufe0f",rsAstral="["+rsAstralRange$1+"]",rsCombo$2="["+rsComboRange$2+"]",rsFitz$1="\\ud83c[\\udffb-\\udfff]",rsModifier$1="(?:"+rsCombo$2+"|"+rsFitz$1+")",rsNonAstral$1="[^"+rsAstralRange$1+"]",rsRegional$1="(?:\\ud83c[\\udde6-\\uddff]){2}",rsSurrPair$1="[\\ud800-\\udbff][\\udc00-\\udfff]",rsZWJ$1="\\u200d",reOptMod$1=rsModifier$1+"?",rsOptVar$1="["+rsVarRange$1+"]?",rsOptJoin$1="(?:"+rsZWJ$1+"(?:"+[rsNonAstral$1,rsRegional$1,rsSurrPair$1].join("|")+")"+rsOptVar$1+reOptMod$1+")*",rsSeq$1=rsOptVar$1+reOptMod$1+rsOptJoin$1,rsSymbol="(?:"+[rsNonAstral$1+rsCombo$2+"?",rsCombo$2,rsRegional$1,rsSurrPair$1,rsAstral].join("|")+")",reUnicode=RegExp(rsFitz$1+"(?="+rsFitz$1+")|"+rsSymbol+rsSeq$1,"g");function unicodeToArray(a){return a.match(reUnicode)||[]}function stringToArray(a){return hasUnicode(a)?unicodeToArray(a):asciiToArray(a)}function createCaseFirst(a){return function(c){c=toString$3(c);var b=hasUnicode(c)?stringToArray(c):void 0,_=b?b[0]:c.charAt(0),k=b?castSlice(b,1).join(""):c.slice(1);return _[a]()+k}}var upperFirst=createCaseFirst("toUpperCase");function capitalize(a){return upperFirst(toString$3(a).toLowerCase())}function arrayReduce(a,c,b,_){var k=-1,j=a==null?0:a.length;for(_&&j&&(b=a[++k]);++k<j;)b=c(b,a[k],k,a);return b}function basePropertyOf(a){return function(c){return a==null?void 0:a[c]}}var deburredLetters={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},deburrLetter=basePropertyOf(deburredLetters);const deburrLetter$1=deburrLetter;var reLatin=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,rsComboMarksRange$1="\\u0300-\\u036f",reComboHalfMarksRange$1="\\ufe20-\\ufe2f",rsComboSymbolsRange$1="\\u20d0-\\u20ff",rsComboRange$1=rsComboMarksRange$1+reComboHalfMarksRange$1+rsComboSymbolsRange$1,rsCombo$1="["+rsComboRange$1+"]",reComboMark=RegExp(rsCombo$1,"g");function deburr(a){return a=toString$3(a),a&&a.replace(reLatin,deburrLetter$1).replace(reComboMark,"")}var reAsciiWord=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;function asciiWords(a){return a.match(reAsciiWord)||[]}var reHasUnicodeWord=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;function hasUnicodeWord(a){return reHasUnicodeWord.test(a)}var rsAstralRange="\\ud800-\\udfff",rsComboMarksRange="\\u0300-\\u036f",reComboHalfMarksRange="\\ufe20-\\ufe2f",rsComboSymbolsRange="\\u20d0-\\u20ff",rsComboRange=rsComboMarksRange+reComboHalfMarksRange+rsComboSymbolsRange,rsDingbatRange="\\u2700-\\u27bf",rsLowerRange="a-z\\xdf-\\xf6\\xf8-\\xff",rsMathOpRange="\\xac\\xb1\\xd7\\xf7",rsNonCharRange="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",rsPunctuationRange="\\u2000-\\u206f",rsSpaceRange=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",rsUpperRange="A-Z\\xc0-\\xd6\\xd8-\\xde",rsVarRange="\\ufe0e\\ufe0f",rsBreakRange=rsMathOpRange+rsNonCharRange+rsPunctuationRange+rsSpaceRange,rsApos$1="['’]",rsBreak="["+rsBreakRange+"]",rsCombo="["+rsComboRange+"]",rsDigits="\\d+",rsDingbat="["+rsDingbatRange+"]",rsLower="["+rsLowerRange+"]",rsMisc="[^"+rsAstralRange+rsBreakRange+rsDigits+rsDingbatRange+rsLowerRange+rsUpperRange+"]",rsFitz="\\ud83c[\\udffb-\\udfff]",rsModifier="(?:"+rsCombo+"|"+rsFitz+")",rsNonAstral="[^"+rsAstralRange+"]",rsRegional="(?:\\ud83c[\\udde6-\\uddff]){2}",rsSurrPair="[\\ud800-\\udbff][\\udc00-\\udfff]",rsUpper="["+rsUpperRange+"]",rsZWJ="\\u200d",rsMiscLower="(?:"+rsLower+"|"+rsMisc+")",rsMiscUpper="(?:"+rsUpper+"|"+rsMisc+")",rsOptContrLower="(?:"+rsApos$1+"(?:d|ll|m|re|s|t|ve))?",rsOptContrUpper="(?:"+rsApos$1+"(?:D|LL|M|RE|S|T|VE))?",reOptMod=rsModifier+"?",rsOptVar="["+rsVarRange+"]?",rsOptJoin="(?:"+rsZWJ+"(?:"+[rsNonAstral,rsRegional,rsSurrPair].join("|")+")"+rsOptVar+reOptMod+")*",rsOrdLower="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",rsOrdUpper="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",rsSeq=rsOptVar+reOptMod+rsOptJoin,rsEmoji="(?:"+[rsDingbat,rsRegional,rsSurrPair].join("|")+")"+rsSeq,reUnicodeWord=RegExp([rsUpper+"?"+rsLower+"+"+rsOptContrLower+"(?="+[rsBreak,rsUpper,"$"].join("|")+")",rsMiscUpper+"+"+rsOptContrUpper+"(?="+[rsBreak,rsUpper+rsMiscLower,"$"].join("|")+")",rsUpper+"?"+rsMiscLower+"+"+rsOptContrLower,rsUpper+"+"+rsOptContrUpper,rsOrdUpper,rsOrdLower,rsDigits,rsEmoji].join("|"),"g");function unicodeWords(a){return a.match(reUnicodeWord)||[]}function words(a,c,b){return a=toString$3(a),c=b?void 0:c,c===void 0?hasUnicodeWord(a)?unicodeWords(a):asciiWords(a):a.match(c)||[]}var rsApos="['’]",reApos=RegExp(rsApos,"g");function createCompounder(a){return function(c){return arrayReduce(words(deburr(c).replace(reApos,"")),a,"")}}var camelCase$2=createCompounder(function(a,c,b){return c=c.toLowerCase(),a+(b?capitalize(c):c)});const camelCase$3=camelCase$2;function stackClear(){this.__data__=new ListCache,this.size=0}function stackDelete(a){var c=this.__data__,b=c.delete(a);return this.size=c.size,b}function stackGet(a){return this.__data__.get(a)}function stackHas(a){return this.__data__.has(a)}var LARGE_ARRAY_SIZE=200;function stackSet(a,c){var b=this.__data__;if(b instanceof ListCache){var _=b.__data__;if(!Map$1||_.length<LARGE_ARRAY_SIZE-1)return _.push([a,c]),this.size=++b.size,this;b=this.__data__=new MapCache(_)}return b.set(a,c),this.size=b.size,this}function Stack(a){var c=this.__data__=new ListCache(a);this.size=c.size}Stack.prototype.clear=stackClear;Stack.prototype.delete=stackDelete;Stack.prototype.get=stackGet;Stack.prototype.has=stackHas;Stack.prototype.set=stackSet;function baseAssign(a,c){return a&&copyObject(c,keys$2(c),a)}function baseAssignIn(a,c){return a&&copyObject(c,keysIn(c),a)}var freeExports=typeof exports=="object"&&exports&&!exports.nodeType&&exports,freeModule=freeExports&&typeof module=="object"&&module&&!module.nodeType&&module,moduleExports=freeModule&&freeModule.exports===freeExports,Buffer$8=moduleExports?root.Buffer:void 0,allocUnsafe=Buffer$8?Buffer$8.allocUnsafe:void 0;function cloneBuffer(a,c){if(c)return a.slice();var b=a.length,_=allocUnsafe?allocUnsafe(b):new a.constructor(b);return a.copy(_),_}function arrayFilter(a,c){for(var b=-1,_=a==null?0:a.length,k=0,j=[];++b<_;){var _e=a[b];c(_e,b,a)&&(j[k++]=_e)}return j}function stubArray(){return[]}var objectProto$a=Object.prototype,propertyIsEnumerable$1=objectProto$a.propertyIsEnumerable,nativeGetSymbols$1=Object.getOwnPropertySymbols,getSymbols=nativeGetSymbols$1?function(a){return a==null?[]:(a=Object(a),arrayFilter(nativeGetSymbols$1(a),function(c){return propertyIsEnumerable$1.call(a,c)}))}:stubArray;function copySymbols(a,c){return copyObject(a,getSymbols(a),c)}var nativeGetSymbols=Object.getOwnPropertySymbols,getSymbolsIn=nativeGetSymbols?function(a){for(var c=[];a;)arrayPush(c,getSymbols(a)),a=getPrototype$1(a);return c}:stubArray;const getSymbolsIn$1=getSymbolsIn;function copySymbolsIn(a,c){return copyObject(a,getSymbolsIn$1(a),c)}function baseGetAllKeys(a,c,b){var _=c(a);return isArray$5(a)?_:arrayPush(_,b(a))}function getAllKeys(a){return baseGetAllKeys(a,keys$2,getSymbols)}function getAllKeysIn(a){return baseGetAllKeys(a,keysIn,getSymbolsIn$1)}var DataView$1=getNative(root,"DataView"),Promise$1=getNative(root,"Promise"),Set$1=getNative(root,"Set"),mapTag$4="[object Map]",objectTag$3="[object Object]",promiseTag="[object Promise]",setTag$4="[object Set]",weakMapTag$1="[object WeakMap]",dataViewTag$3="[object DataView]",dataViewCtorString=toSource(DataView$1),mapCtorString=toSource(Map$1),promiseCtorString=toSource(Promise$1),setCtorString=toSource(Set$1),weakMapCtorString=toSource(WeakMap$2),getTag=baseGetTag;(DataView$1&&getTag(new DataView$1(new ArrayBuffer(1)))!=dataViewTag$3||Map$1&&getTag(new Map$1)!=mapTag$4||Promise$1&&getTag(Promise$1.resolve())!=promiseTag||Set$1&&getTag(new Set$1)!=setTag$4||WeakMap$2&&getTag(new WeakMap$2)!=weakMapTag$1)&&(getTag=function(a){var c=baseGetTag(a),b=c==objectTag$3?a.constructor:void 0,_=b?toSource(b):"";if(_)switch(_){case dataViewCtorString:return dataViewTag$3;case mapCtorString:return mapTag$4;case promiseCtorString:return promiseTag;case setCtorString:return setTag$4;case weakMapCtorString:return weakMapTag$1}return c});const getTag$1=getTag;var objectProto$9=Object.prototype,hasOwnProperty$6=objectProto$9.hasOwnProperty;function initCloneArray(a){var c=a.length,b=new a.constructor(c);return c&&typeof a[0]=="string"&&hasOwnProperty$6.call(a,"index")&&(b.index=a.index,b.input=a.input),b}var Uint8Array$1=root.Uint8Array;function cloneArrayBuffer(a){var c=new a.constructor(a.byteLength);return new Uint8Array$1(c).set(new Uint8Array$1(a)),c}function cloneDataView(a,c){var b=c?cloneArrayBuffer(a.buffer):a.buffer;return new a.constructor(b,a.byteOffset,a.byteLength)}var reFlags=/\w*$/;function cloneRegExp(a){var c=new a.constructor(a.source,reFlags.exec(a));return c.lastIndex=a.lastIndex,c}var symbolProto$1=Symbol$1?Symbol$1.prototype:void 0,symbolValueOf$1=symbolProto$1?symbolProto$1.valueOf:void 0;function cloneSymbol(a){return symbolValueOf$1?Object(symbolValueOf$1.call(a)):{}}function cloneTypedArray(a,c){var b=c?cloneArrayBuffer(a.buffer):a.buffer;return new a.constructor(b,a.byteOffset,a.length)}var boolTag$3="[object Boolean]",dateTag$2="[object Date]",mapTag$3="[object Map]",numberTag$3="[object Number]",regexpTag$2="[object RegExp]",setTag$3="[object Set]",stringTag$4="[object String]",symbolTag$5="[object Symbol]",arrayBufferTag$2="[object ArrayBuffer]",dataViewTag$2="[object DataView]",float32Tag$1="[object Float32Array]",float64Tag$1="[object Float64Array]",int8Tag$1="[object Int8Array]",int16Tag$1="[object Int16Array]",int32Tag$1="[object Int32Array]",uint8Tag$1="[object Uint8Array]",uint8ClampedTag$1="[object Uint8ClampedArray]",uint16Tag$1="[object Uint16Array]",uint32Tag$1="[object Uint32Array]";function initCloneByTag(a,c,b){var _=a.constructor;switch(c){case arrayBufferTag$2:return cloneArrayBuffer(a);case boolTag$3:case dateTag$2:return new _(+a);case dataViewTag$2:return cloneDataView(a,b);case float32Tag$1:case float64Tag$1:case int8Tag$1:case int16Tag$1:case int32Tag$1:case uint8Tag$1:case uint8ClampedTag$1:case uint16Tag$1:case uint32Tag$1:return cloneTypedArray(a,b);case mapTag$3:return new _;case numberTag$3:case stringTag$4:return new _(a);case regexpTag$2:return cloneRegExp(a);case setTag$3:return new _;case symbolTag$5:return cloneSymbol(a)}}function initCloneObject(a){return typeof a.constructor=="function"&&!isPrototype$1(a)?baseCreate(getPrototype$1(a)):{}}var mapTag$2="[object Map]";function baseIsMap(a){return isObjectLike$7(a)&&getTag$1(a)==mapTag$2}var nodeIsMap=nodeUtil&&nodeUtil.isMap,isMap=nodeIsMap?baseUnary(nodeIsMap):baseIsMap,setTag$2="[object Set]";function baseIsSet(a){return isObjectLike$7(a)&&getTag$1(a)==setTag$2}var nodeIsSet=nodeUtil&&nodeUtil.isSet,isSet$5=nodeIsSet?baseUnary(nodeIsSet):baseIsSet,CLONE_DEEP_FLAG$3=1,CLONE_FLAT_FLAG$1=2,CLONE_SYMBOLS_FLAG$2=4,argsTag$2="[object Arguments]",arrayTag$1="[object Array]",boolTag$2="[object Boolean]",dateTag$1="[object Date]",errorTag$1="[object Error]",funcTag$1="[object Function]",genTag$1="[object GeneratorFunction]",mapTag$1="[object Map]",numberTag$2="[object Number]",objectTag$2="[object Object]",regexpTag$1="[object RegExp]",setTag$1="[object Set]",stringTag$3="[object String]",symbolTag$4="[object Symbol]",weakMapTag="[object WeakMap]",arrayBufferTag$1="[object ArrayBuffer]",dataViewTag$1="[object DataView]",float32Tag="[object Float32Array]",float64Tag="[object Float64Array]",int8Tag="[object Int8Array]",int16Tag="[object Int16Array]",int32Tag="[object Int32Array]",uint8Tag="[object Uint8Array]",uint8ClampedTag="[object Uint8ClampedArray]",uint16Tag="[object Uint16Array]",uint32Tag="[object Uint32Array]",cloneableTags={};cloneableTags[argsTag$2]=cloneableTags[arrayTag$1]=cloneableTags[arrayBufferTag$1]=cloneableTags[dataViewTag$1]=cloneableTags[boolTag$2]=cloneableTags[dateTag$1]=cloneableTags[float32Tag]=cloneableTags[float64Tag]=cloneableTags[int8Tag]=cloneableTags[int16Tag]=cloneableTags[int32Tag]=cloneableTags[mapTag$1]=cloneableTags[numberTag$2]=cloneableTags[objectTag$2]=cloneableTags[regexpTag$1]=cloneableTags[setTag$1]=cloneableTags[stringTag$3]=cloneableTags[symbolTag$4]=cloneableTags[uint8Tag]=cloneableTags[uint8ClampedTag]=cloneableTags[uint16Tag]=cloneableTags[uint32Tag]=!0;cloneableTags[errorTag$1]=cloneableTags[funcTag$1]=cloneableTags[weakMapTag]=!1;function baseClone(a,c,b,_,k,j){var _e,et=c&CLONE_DEEP_FLAG$3,nt=c&CLONE_FLAT_FLAG$1,it=c&CLONE_SYMBOLS_FLAG$2;if(b&&(_e=k?b(a,_,k,j):b(a)),_e!==void 0)return _e;if(!isObject$9(a))return a;var ft=isArray$5(a);if(ft){if(_e=initCloneArray(a),!et)return copyArray(a,_e)}else{var pt=getTag$1(a),mt=pt==funcTag$1||pt==genTag$1;if(isBuffer$1(a))return cloneBuffer(a,et);if(pt==objectTag$2||pt==argsTag$2||mt&&!k){if(_e=nt||mt?{}:initCloneObject(a),!et)return nt?copySymbolsIn(a,baseAssignIn(_e,a)):copySymbols(a,baseAssign(_e,a))}else{if(!cloneableTags[pt])return k?a:{};_e=initCloneByTag(a,pt,et)}}j||(j=new Stack);var St=j.get(a);if(St)return St;j.set(a,_e),isSet$5(a)?a.forEach(function(Tt){_e.add(baseClone(Tt,c,b,Tt,a,j))}):isMap(a)&&a.forEach(function(Tt,gt){_e.set(gt,baseClone(Tt,c,b,gt,a,j))});var yt=it?nt?getAllKeysIn:getAllKeys:nt?keysIn:keys$2,_t=ft?void 0:yt(a);return arrayEach(_t||a,function(Tt,gt){_t&&(gt=Tt,Tt=a[gt]),assignValue(_e,gt,baseClone(Tt,c,b,gt,a,j))}),_e}var CLONE_DEEP_FLAG$2=1,CLONE_SYMBOLS_FLAG$1=4;function cloneDeep$1(a){return baseClone(a,CLONE_DEEP_FLAG$2|CLONE_SYMBOLS_FLAG$1)}var HASH_UNDEFINED="__lodash_hash_undefined__";function setCacheAdd(a){return this.__data__.set(a,HASH_UNDEFINED),this}function setCacheHas(a){return this.__data__.has(a)}function SetCache(a){var c=-1,b=a==null?0:a.length;for(this.__data__=new MapCache;++c<b;)this.add(a[c])}SetCache.prototype.add=SetCache.prototype.push=setCacheAdd;SetCache.prototype.has=setCacheHas;function arraySome(a,c){for(var b=-1,_=a==null?0:a.length;++b<_;)if(c(a[b],b,a))return!0;return!1}function cacheHas(a,c){return a.has(c)}var COMPARE_PARTIAL_FLAG$5=1,COMPARE_UNORDERED_FLAG$3=2;function equalArrays(a,c,b,_,k,j){var _e=b&COMPARE_PARTIAL_FLAG$5,et=a.length,nt=c.length;if(et!=nt&&!(_e&&nt>et))return!1;var it=j.get(a),ft=j.get(c);if(it&&ft)return it==c&&ft==a;var pt=-1,mt=!0,St=b&COMPARE_UNORDERED_FLAG$3?new SetCache:void 0;for(j.set(a,c),j.set(c,a);++pt<et;){var yt=a[pt],_t=c[pt];if(_)var Tt=_e?_(_t,yt,pt,c,a,j):_(yt,_t,pt,a,c,j);if(Tt!==void 0){if(Tt)continue;mt=!1;break}if(St){if(!arraySome(c,function(gt,ht){if(!cacheHas(St,ht)&&(yt===gt||k(yt,gt,b,_,j)))return St.push(ht)})){mt=!1;break}}else if(!(yt===_t||k(yt,_t,b,_,j))){mt=!1;break}}return j.delete(a),j.delete(c),mt}function mapToArray(a){var c=-1,b=Array(a.size);return a.forEach(function(_,k){b[++c]=[k,_]}),b}function setToArray(a){var c=-1,b=Array(a.size);return a.forEach(function(_){b[++c]=_}),b}var COMPARE_PARTIAL_FLAG$4=1,COMPARE_UNORDERED_FLAG$2=2,boolTag$1="[object Boolean]",dateTag="[object Date]",errorTag="[object Error]",mapTag="[object Map]",numberTag$1="[object Number]",regexpTag="[object RegExp]",setTag="[object Set]",stringTag$2="[object String]",symbolTag$3="[object Symbol]",arrayBufferTag="[object ArrayBuffer]",dataViewTag="[object DataView]",symbolProto=Symbol$1?Symbol$1.prototype:void 0,symbolValueOf=symbolProto?symbolProto.valueOf:void 0;function equalByTag(a,c,b,_,k,j,_e){switch(b){case dataViewTag:if(a.byteLength!=c.byteLength||a.byteOffset!=c.byteOffset)return!1;a=a.buffer,c=c.buffer;case arrayBufferTag:return!(a.byteLength!=c.byteLength||!j(new Uint8Array$1(a),new Uint8Array$1(c)));case boolTag$1:case dateTag:case numberTag$1:return eq(+a,+c);case errorTag:return a.name==c.name&&a.message==c.message;case regexpTag:case stringTag$2:return a==c+"";case mapTag:var et=mapToArray;case setTag:var nt=_&COMPARE_PARTIAL_FLAG$4;if(et||(et=setToArray),a.size!=c.size&&!nt)return!1;var it=_e.get(a);if(it)return it==c;_|=COMPARE_UNORDERED_FLAG$2,_e.set(a,c);var ft=equalArrays(et(a),et(c),_,k,j,_e);return _e.delete(a),ft;case symbolTag$3:if(symbolValueOf)return symbolValueOf.call(a)==symbolValueOf.call(c)}return!1}var COMPARE_PARTIAL_FLAG$3=1,objectProto$8=Object.prototype,hasOwnProperty$5=objectProto$8.hasOwnProperty;function equalObjects(a,c,b,_,k,j){var _e=b&COMPARE_PARTIAL_FLAG$3,et=getAllKeys(a),nt=et.length,it=getAllKeys(c),ft=it.length;if(nt!=ft&&!_e)return!1;for(var pt=nt;pt--;){var mt=et[pt];if(!(_e?mt in c:hasOwnProperty$5.call(c,mt)))return!1}var St=j.get(a),yt=j.get(c);if(St&&yt)return St==c&&yt==a;var _t=!0;j.set(a,c),j.set(c,a);for(var Tt=_e;++pt<nt;){mt=et[pt];var gt=a[mt],ht=c[mt];if(_)var Et=_e?_(ht,gt,mt,c,a,j):_(gt,ht,mt,a,c,j);if(!(Et===void 0?gt===ht||k(gt,ht,b,_,j):Et)){_t=!1;break}Tt||(Tt=mt=="constructor")}if(_t&&!Tt){var At=a.constructor,Bt=c.constructor;At!=Bt&&"constructor"in a&&"constructor"in c&&!(typeof At=="function"&&At instanceof At&&typeof Bt=="function"&&Bt instanceof Bt)&&(_t=!1)}return j.delete(a),j.delete(c),_t}var COMPARE_PARTIAL_FLAG$2=1,argsTag$1="[object Arguments]",arrayTag="[object Array]",objectTag$1="[object Object]",objectProto$7=Object.prototype,hasOwnProperty$4=objectProto$7.hasOwnProperty;function baseIsEqualDeep(a,c,b,_,k,j){var _e=isArray$5(a),et=isArray$5(c),nt=_e?arrayTag:getTag$1(a),it=et?arrayTag:getTag$1(c);nt=nt==argsTag$1?objectTag$1:nt,it=it==argsTag$1?objectTag$1:it;var ft=nt==objectTag$1,pt=it==objectTag$1,mt=nt==it;if(mt&&isBuffer$1(a)){if(!isBuffer$1(c))return!1;_e=!0,ft=!1}if(mt&&!ft)return j||(j=new Stack),_e||isTypedArray$1(a)?equalArrays(a,c,b,_,k,j):equalByTag(a,c,nt,b,_,k,j);if(!(b&COMPARE_PARTIAL_FLAG$2)){var St=ft&&hasOwnProperty$4.call(a,"__wrapped__"),yt=pt&&hasOwnProperty$4.call(c,"__wrapped__");if(St||yt){var _t=St?a.value():a,Tt=yt?c.value():c;return j||(j=new Stack),k(_t,Tt,b,_,j)}}return mt?(j||(j=new Stack),equalObjects(a,c,b,_,k,j)):!1}function baseIsEqual(a,c,b,_,k){return a===c?!0:a==null||c==null||!isObjectLike$7(a)&&!isObjectLike$7(c)?a!==a&&c!==c:baseIsEqualDeep(a,c,b,_,baseIsEqual,k)}var COMPARE_PARTIAL_FLAG$1=1,COMPARE_UNORDERED_FLAG$1=2;function baseIsMatch(a,c,b,_){var k=b.length,j=k,_e=!_;if(a==null)return!j;for(a=Object(a);k--;){var et=b[k];if(_e&&et[2]?et[1]!==a[et[0]]:!(et[0]in a))return!1}for(;++k<j;){et=b[k];var nt=et[0],it=a[nt],ft=et[1];if(_e&&et[2]){if(it===void 0&&!(nt in a))return!1}else{var pt=new Stack;if(_)var mt=_(it,ft,nt,a,c,pt);if(!(mt===void 0?baseIsEqual(ft,it,COMPARE_PARTIAL_FLAG$1|COMPARE_UNORDERED_FLAG$1,_,pt):mt))return!1}}return!0}function isStrictComparable(a){return a===a&&!isObject$9(a)}function getMatchData(a){for(var c=keys$2(a),b=c.length;b--;){var _=c[b],k=a[_];c[b]=[_,k,isStrictComparable(k)]}return c}function matchesStrictComparable(a,c){return function(b){return b==null?!1:b[a]===c&&(c!==void 0||a in Object(b))}}function baseMatches(a){var c=getMatchData(a);return c.length==1&&c[0][2]?matchesStrictComparable(c[0][0],c[0][1]):function(b){return b===a||baseIsMatch(b,a,c)}}function baseHasIn(a,c){return a!=null&&c in Object(a)}function hasPath(a,c,b){c=castPath(c,a);for(var _=-1,k=c.length,j=!1;++_<k;){var _e=toKey(c[_]);if(!(j=a!=null&&b(a,_e)))break;a=a[_e]}return j||++_!=k?j:(k=a==null?0:a.length,!!k&&isLength$1(k)&&isIndex$1(_e,k)&&(isArray$5(a)||isArguments$2(a)))}function hasIn(a,c){return a!=null&&hasPath(a,c,baseHasIn)}var COMPARE_PARTIAL_FLAG=1,COMPARE_UNORDERED_FLAG=2;function baseMatchesProperty(a,c){return isKey(a)&&isStrictComparable(c)?matchesStrictComparable(toKey(a),c):function(b){var _=get(b,a);return _===void 0&&_===c?hasIn(b,a):baseIsEqual(c,_,COMPARE_PARTIAL_FLAG|COMPARE_UNORDERED_FLAG)}}function baseProperty(a){return function(c){return c==null?void 0:c[a]}}function basePropertyDeep(a){return function(c){return baseGet(c,a)}}function property(a){return isKey(a)?baseProperty(toKey(a)):basePropertyDeep(a)}function baseIteratee(a){return typeof a=="function"?a:a==null?identity$1:typeof a=="object"?isArray$5(a)?baseMatchesProperty(a[0],a[1]):baseMatches(a):property(a)}function createBaseFor(a){return function(c,b,_){for(var k=-1,j=Object(c),_e=_(c),et=_e.length;et--;){var nt=_e[a?et:++k];if(b(j[nt],nt,j)===!1)break}return c}}var baseFor=createBaseFor();const baseFor$1=baseFor;function baseForOwn(a,c){return a&&baseFor$1(a,c,keys$2)}function createBaseEach(a,c){return function(b,_){if(b==null)return b;if(!isArrayLike$2(b))return a(b,_);for(var k=b.length,j=c?k:-1,_e=Object(b);(c?j--:++j<k)&&_(_e[j],j,_e)!==!1;);return b}}var baseEach=createBaseEach(baseForOwn),now=function(){return root.Date.now()},FUNC_ERROR_TEXT$1="Expected a function",nativeMax$1=Math.max,nativeMin=Math.min;function debounce$1(a,c,b){var _,k,j,_e,et,nt,it=0,ft=!1,pt=!1,mt=!0;if(typeof a!="function")throw new TypeError(FUNC_ERROR_TEXT$1);c=toNumber$3(c)||0,isObject$9(b)&&(ft=!!b.leading,pt="maxWait"in b,j=pt?nativeMax$1(toNumber$3(b.maxWait)||0,c):j,mt="trailing"in b?!!b.trailing:mt);function St(qt){var zt=_,Ht=k;return _=k=void 0,it=qt,_e=a.apply(Ht,zt),_e}function yt(qt){return it=qt,et=setTimeout(gt,c),ft?St(qt):_e}function _t(qt){var zt=qt-nt,Ht=qt-it,ct=c-zt;return pt?nativeMin(ct,j-Ht):ct}function Tt(qt){var zt=qt-nt,Ht=qt-it;return nt===void 0||zt>=c||zt<0||pt&&Ht>=j}function gt(){var qt=now();if(Tt(qt))return ht(qt);et=setTimeout(gt,_t(qt))}function ht(qt){return et=void 0,mt&&_?St(qt):(_=k=void 0,_e)}function Et(){et!==void 0&&clearTimeout(et),it=0,_=nt=k=et=void 0}function At(){return et===void 0?_e:ht(now())}function Bt(){var qt=now(),zt=Tt(qt);if(_=arguments,k=this,nt=qt,zt){if(et===void 0)return yt(nt);if(pt)return clearTimeout(et),et=setTimeout(gt,c),St(nt)}return et===void 0&&(et=setTimeout(gt,c)),_e}return Bt.cancel=Et,Bt.flush=At,Bt}function last$1(a){var c=a==null?0:a.length;return c?a[c-1]:void 0}function arrayEvery(a,c){for(var b=-1,_=a==null?0:a.length;++b<_;)if(!c(a[b],b,a))return!1;return!0}function baseEvery(a,c){var b=!0;return baseEach(a,function(_,k,j){return b=!!c(_,k,j),b}),b}function every$1(a,c,b){var _=isArray$5(a)?arrayEvery:baseEvery;return b&&isIterateeCall(a,c,b)&&(c=void 0),_(a,baseIteratee(c))}function baseMap(a,c){var b=-1,_=isArrayLike$2(a)?Array(a.length):[];return baseEach(a,function(k,j,_e){_[++b]=c(k,j,_e)}),_}function parent(a,c){return c.length<2?a:baseGet(a,baseSlice(c,0,-1))}function isEqual(a,c){return baseIsEqual(a,c)}function isMatch(a,c){return a===c||baseIsMatch(a,c,getMatchData(c))}var CLONE_DEEP_FLAG$1=1;function iteratee(a){return baseIteratee(typeof a=="function"?a:baseClone(a,CLONE_DEEP_FLAG$1))}var kebabCase=createCompounder(function(a,c,b){return a+(b?"-":"")+c.toLowerCase()});const kebabCase$1=kebabCase;function baseUnset(a,c){return c=castPath(c,a),a=parent(a,c),a==null||delete a[toKey(last$1(c))]}function customOmitClone(a){return isPlainObject$3(a)?void 0:a}var CLONE_DEEP_FLAG=1,CLONE_FLAT_FLAG=2,CLONE_SYMBOLS_FLAG=4,omit=flatRest(function(a,c){var b={};if(a==null)return b;var _=!1;c=arrayMap$1(c,function(j){return j=castPath(j,a),_||(_=j.length>1),j}),copyObject(a,getAllKeysIn(a),b),_&&(b=baseClone(b,CLONE_DEEP_FLAG|CLONE_FLAT_FLAG|CLONE_SYMBOLS_FLAG,customOmitClone));for(var k=c.length;k--;)baseUnset(b,c[k]);return b});function baseSet(a,c,b,_){if(!isObject$9(a))return a;c=castPath(c,a);for(var k=-1,j=c.length,_e=j-1,et=a;et!=null&&++k<j;){var nt=toKey(c[k]),it=b;if(nt==="__proto__"||nt==="constructor"||nt==="prototype")return a;if(k!=_e){var ft=et[nt];it=_?_(ft,nt,et):void 0,it===void 0&&(it=isObject$9(ft)?ft:isIndex$1(c[k+1])?[]:{})}assignValue(et,nt,it),et=et[nt]}return a}function basePickBy(a,c,b){for(var _=-1,k=c.length,j={};++_<k;){var _e=c[_],et=baseGet(a,_e);b(et,_e)&&baseSet(j,castPath(_e,a),et)}return j}function baseSortBy(a,c){var b=a.length;for(a.sort(c);b--;)a[b]=a[b].value;return a}function compareAscending(a,c){if(a!==c){var b=a!==void 0,_=a===null,k=a===a,j=isSymbol$3(a),_e=c!==void 0,et=c===null,nt=c===c,it=isSymbol$3(c);if(!et&&!it&&!j&&a>c||j&&_e&&nt&&!et&&!it||_&&_e&&nt||!b&&nt||!k)return 1;if(!_&&!j&&!it&&a<c||it&&b&&k&&!_&&!j||et&&b&&k||!_e&&k||!nt)return-1}return 0}function compareMultiple(a,c,b){for(var _=-1,k=a.criteria,j=c.criteria,_e=k.length,et=b.length;++_<_e;){var nt=compareAscending(k[_],j[_]);if(nt){if(_>=et)return nt;var it=b[_];return nt*(it=="desc"?-1:1)}}return a.index-c.index}function baseOrderBy(a,c,b){c.length?c=arrayMap$1(c,function(j){return isArray$5(j)?function(_e){return baseGet(_e,j.length===1?j[0]:j)}:j}):c=[identity$1];var _=-1;c=arrayMap$1(c,baseUnary(baseIteratee));var k=baseMap(a,function(j,_e,et){var nt=arrayMap$1(c,function(it){return it(j)});return{criteria:nt,index:++_,value:j}});return baseSortBy(k,function(j,_e){return compareMultiple(j,_e,b)})}function basePick(a,c){return basePickBy(a,c,function(b,_){return hasIn(a,_)})}var pick=flatRest(function(a,c){return a==null?{}:basePick(a,c)});const pick$1=pick;function baseIndexOfWith(a,c,b,_){for(var k=b-1,j=a.length;++k<j;)if(_(a[k],c))return k;return-1}var arrayProto=Array.prototype,splice=arrayProto.splice;function basePullAll(a,c,b,_){var k=_?baseIndexOfWith:baseIndexOf$1,j=-1,_e=c.length,et=a;for(a===c&&(c=copyArray(c)),b&&(et=arrayMap$1(a,baseUnary(b)));++j<_e;)for(var nt=0,it=c[j],ft=b?b(it):it;(nt=k(et,ft,nt,_))>-1;)et!==a&&splice.call(et,nt,1),splice.call(a,nt,1);return a}function pullAll(a,c){return a&&a.length&&c&&c.length?basePullAll(a,c):a}var pull$1=baseRest(pullAll),sortBy=baseRest(function(a,c){if(a==null)return[];var b=c.length;return b>1&&isIterateeCall(a,c[0],c[1])?c=[]:b>2&&isIterateeCall(c[0],c[1],c[2])&&(c=[c[0]]),baseOrderBy(a,baseFlatten(c,1),[])});const sortBy$1=sortBy,convert=function(a){if(a==null)return ok$1;if(typeof a=="function")return castFactory(a);if(typeof a=="object")return Array.isArray(a)?anyFactory(a):propsFactory(a);if(typeof a=="string")return typeFactory(a);throw new Error("Expected function, string, or object as test")};function anyFactory(a){const c=[];let b=-1;for(;++b<a.length;)c[b]=convert(a[b]);return castFactory(_);function _(...k){let j=-1;for(;++j<c.length;)if(c[j].apply(this,k))return!0;return!1}}function propsFactory(a){const c=a;return castFactory(b);function b(_){const k=_;let j;for(j in a)if(k[j]!==c[j])return!1;return!0}}function typeFactory(a){return castFactory(c);function c(b){return b&&b.type===a}}function castFactory(a){return c;function c(b,_,k){return!!(looksLikeANode(b)&&a.call(this,b,typeof _=="number"?_:void 0,k||void 0))}}function ok$1(){return!0}function looksLikeANode(a){return a!==null&&typeof a=="object"&&"type"in a}function color$1(a){return a}const empty$3=[],CONTINUE=!0,EXIT=!1,SKIP="skip";function visitParents(a,c,b,_){let k;typeof c=="function"&&typeof b!="function"?(_=b,b=c):k=c;const j=convert(k),_e=_?-1:1;et(a,void 0,[])();function et(nt,it,ft){const pt=nt&&typeof nt=="object"?nt:{};if(typeof pt.type=="string"){const St=typeof pt.tagName=="string"?pt.tagName:typeof pt.name=="string"?pt.name:void 0;Object.defineProperty(mt,"name",{value:"node ("+(nt.type+(St?"<"+St+">":""))+")"})}return mt;function mt(){let St=empty$3,yt,_t,Tt;if((!c||j(nt,it,ft[ft.length-1]||void 0))&&(St=toResult(b(nt,ft)),St[0]===EXIT))return St;if("children"in nt&&nt.children){const gt=nt;if(gt.children&&St[0]!==SKIP)for(_t=(_?gt.children.length:-1)+_e,Tt=ft.concat(gt);_t>-1&&_t<gt.children.length;){const ht=gt.children[_t];if(yt=et(ht,_t,Tt)(),yt[0]===EXIT)return yt;_t=typeof yt[1]=="number"?yt[1]:_t+_e}}return St}}}function toResult(a){return Array.isArray(a)?a:typeof a=="number"?[CONTINUE,a]:a==null?empty$3:[a]}function visit(a,c,b,_){let k,j,_e;typeof c=="function"&&typeof b!="function"?(j=void 0,_e=c,k=b):(j=c,_e=b,k=_),visitParents(a,j,et,k);function et(nt,it){const ft=it[it.length-1],pt=ft?ft.children.indexOf(nt):void 0;return _e(nt,pt,ft)}}var fastDeepEqual=function a(c,b){if(c===b)return!0;if(c&&b&&typeof c=="object"&&typeof b=="object"){if(c.constructor!==b.constructor)return!1;var _,k,j;if(Array.isArray(c)){if(_=c.length,_!=b.length)return!1;for(k=_;k--!==0;)if(!a(c[k],b[k]))return!1;return!0}if(c.constructor===RegExp)return c.source===b.source&&c.flags===b.flags;if(c.valueOf!==Object.prototype.valueOf)return c.valueOf()===b.valueOf();if(c.toString!==Object.prototype.toString)return c.toString()===b.toString();if(j=Object.keys(c),_=j.length,_!==Object.keys(b).length)return!1;for(k=_;k--!==0;)if(!Object.prototype.hasOwnProperty.call(b,j[k]))return!1;for(k=_;k--!==0;){var _e=j[k];if(!a(c[_e],b[_e]))return!1}return!0}return c!==c&&b!==b};const deepEqual=getDefaultExportFromCjs$1(fastDeepEqual),generateId=()=>(Math.random()*1e20).toString(36),insertAt$1=(a=0,c,b,_=!1)=>[...b.slice(0,a),...[c].flat(),...b.slice(_?a+1:a)],replaceItem$1=(a,c,b)=>{a=typeof a=="function"?a:k=>k===a;const _=b.findIndex(a);return _<0?b:insertAt$1(_,c,b,!0)},swapIndex=(a,c,b)=>{if(!b[a]||!b[c])return b;b=[...b];const _=b[a];return b[a]=b[c],b[c]=_,b},swapItems=(a,c,b)=>{const _=b.findIndex(j=>j===a),k=b.findIndex(j=>j===c);return _<0||k<0?b:swapIndex(_,k,b)},toDataNode$1=a=>a?{id:a.id,props:a.props,childIds:(a.children||[]).map(c=>c.id)}:null,toSceneNode=a=>({id:a.id,props:a.props,children:[]}),toSceneTree=(a,c)=>{const b=a.find(k=>k.id===c);if(!b)return null;const _=b.childIds;return{id:b.id,props:b.props,children:_.map(k=>toSceneTree(a,k)).filter(Boolean)}},forEachDown$1=(a,c)=>{c(a),(a.children||[]).forEach(_=>forEachDown$1(_,(k,j)=>{c(k,j||a)}))},mapDown=(a,c)=>{const b=c(a);return{...b,children:((b==null?void 0:b.children)||(a==null?void 0:a.children)||[]).map(_=>mapDown(_,c))}},mapDownAsync=async(a,c)=>{const b=(a==null?void 0:a.children)??[];return{...await c(a),children:await Promise.all(b.map(_=>mapDownAsync(_,c)))}},getElementAttributes=a=>Object.values(a.attributes).reduce((c,b)=>({...c,[b.name]:b.value}),{}),asArray=a=>isArray$5(a)?a:[a],sizeToNum=(a,c)=>typeof a=="number"?a:typeof a=="string"?a.indexOf("%")>-1?parseFloat(a)/100*c:parseFloat(a):0,asSize=a=>typeof a=="number"?a+"px":typeof a=="string"?a.indexOf("%")>-1?parseFloat(a)+"%":a:"0px",asDuration=a=>typeof a=="string"?a:typeof a=="number"?a+"ms":"0ms",find$2=(a,c)=>{if(!a)throw new Error("requires a tree to search");if(!c)throw new Error("requires a condition");const b=iteratee(c);let _;return visit(a,function(k){if(b(k))return _=k,!1}),_},findAll=(a,c)=>{if(!a)throw new Error("requires a tree to search");if(!c)throw new Error("requires a condition");const b=iteratee(c);let _=[];return visit(a,function(k){b(k)&&_.push(k)}),_},values$1=a=>Array.from(a.values()),Logic=Object.freeze(Object.defineProperty({__proto__:null,asArray,asDuration,asSize,camelCase:camelCase$3,cloneDeep:cloneDeep$1,debounce:debounce$1,deepEqual,every:every$1,find:find$2,findAll,forEachDown:forEachDown$1,generateId,getElementAttributes,insertAt:insertAt$1,isArray:isArray$5,isEqual,kebabCase:kebabCase$1,mapDown,mapDownAsync,omit,pick:pick$1,pull:pull$1,replaceItem:replaceItem$1,sizeToNum,sortBy:sortBy$1,swapIndex,swapItems,toDataNode:toDataNode$1,toSceneNode,toSceneTree,values:values$1},Symbol.toStringTag,{value:"Module"}));var lib$2={};function e(a){this.message=a}e.prototype=new Error,e.prototype.name="InvalidCharacterError";var r$2=typeof window<"u"&&window.atob&&window.atob.bind(window)||function(a){var c=String(a).replace(/=+$/,"");if(c.length%4==1)throw new e("'atob' failed: The string to be decoded is not correctly encoded.");for(var b,_,k=0,j=0,_e="";_=c.charAt(j++);~_&&(b=k%4?64*b+_:_,k++%4)?_e+=String.fromCharCode(255&b>>(-2*k&6)):0)_="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(_);return _e};function t$1(a){var c=a.replace(/-/g,"+").replace(/_/g,"/");switch(c.length%4){case 0:break;case 2:c+="==";break;case 3:c+="=";break;default:throw"Illegal base64url string!"}try{return function(b){return decodeURIComponent(r$2(b).replace(/(.)/g,function(_,k){var j=k.charCodeAt(0).toString(16).toUpperCase();return j.length<2&&(j="0"+j),"%"+j}))}(c)}catch{return r$2(c)}}function n$1(a){this.message=a}function o(a,c){if(typeof a!="string")throw new n$1("Invalid token specified");var b=(c=c||{}).header===!0?0:1;try{return JSON.parse(t$1(a.split(".")[b]))}catch(_){throw new n$1("Invalid token specified: "+_.message)}}n$1.prototype=new Error,n$1.prototype.name="InvalidTokenError";const jwtDecode_esm=Object.freeze(Object.defineProperty({__proto__:null,InvalidTokenError:n$1,default:o},Symbol.toStringTag,{value:"Module"})),require$$0$2=getAugmentedNamespace(jwtDecode_esm);var getRandomValues,rnds8=new Uint8Array(16);function rng(){if(!getRandomValues&&(getRandomValues=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!getRandomValues))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return getRandomValues(rnds8)}const REGEX=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function validate$2(a){return typeof a=="string"&&REGEX.test(a)}var byteToHex=[];for(var i$1=0;i$1<256;++i$1)byteToHex.push((i$1+256).toString(16).substr(1));function stringify(a){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,b=(byteToHex[a[c+0]]+byteToHex[a[c+1]]+byteToHex[a[c+2]]+byteToHex[a[c+3]]+"-"+byteToHex[a[c+4]]+byteToHex[a[c+5]]+"-"+byteToHex[a[c+6]]+byteToHex[a[c+7]]+"-"+byteToHex[a[c+8]]+byteToHex[a[c+9]]+"-"+byteToHex[a[c+10]]+byteToHex[a[c+11]]+byteToHex[a[c+12]]+byteToHex[a[c+13]]+byteToHex[a[c+14]]+byteToHex[a[c+15]]).toLowerCase();if(!validate$2(b))throw TypeError("Stringified UUID is invalid");return b}var _nodeId,_clockseq,_lastMSecs=0,_lastNSecs=0;function v1(a,c,b){var _=c&&b||0,k=c||new Array(16);a=a||{};var j=a.node||_nodeId,_e=a.clockseq!==void 0?a.clockseq:_clockseq;if(j==null||_e==null){var et=a.random||(a.rng||rng)();j==null&&(j=_nodeId=[et[0]|1,et[1],et[2],et[3],et[4],et[5]]),_e==null&&(_e=_clockseq=(et[6]<<8|et[7])&16383)}var nt=a.msecs!==void 0?a.msecs:Date.now(),it=a.nsecs!==void 0?a.nsecs:_lastNSecs+1,ft=nt-_lastMSecs+(it-_lastNSecs)/1e4;if(ft<0&&a.clockseq===void 0&&(_e=_e+1&16383),(ft<0||nt>_lastMSecs)&&a.nsecs===void 0&&(it=0),it>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");_lastMSecs=nt,_lastNSecs=it,_clockseq=_e,nt+=122192928e5;var pt=((nt&268435455)*1e4+it)%4294967296;k[_++]=pt>>>24&255,k[_++]=pt>>>16&255,k[_++]=pt>>>8&255,k[_++]=pt&255;var mt=nt/4294967296*1e4&268435455;k[_++]=mt>>>8&255,k[_++]=mt&255,k[_++]=mt>>>24&15|16,k[_++]=mt>>>16&255,k[_++]=_e>>>8|128,k[_++]=_e&255;for(var St=0;St<6;++St)k[_+St]=j[St];return c||stringify(k)}function parse$3(a){if(!validate$2(a))throw TypeError("Invalid UUID");var c,b=new Uint8Array(16);return b[0]=(c=parseInt(a.slice(0,8),16))>>>24,b[1]=c>>>16&255,b[2]=c>>>8&255,b[3]=c&255,b[4]=(c=parseInt(a.slice(9,13),16))>>>8,b[5]=c&255,b[6]=(c=parseInt(a.slice(14,18),16))>>>8,b[7]=c&255,b[8]=(c=parseInt(a.slice(19,23),16))>>>8,b[9]=c&255,b[10]=(c=parseInt(a.slice(24,36),16))/1099511627776&255,b[11]=c/4294967296&255,b[12]=c>>>24&255,b[13]=c>>>16&255,b[14]=c>>>8&255,b[15]=c&255,b}function stringToBytes(a){a=unescape(encodeURIComponent(a));for(var c=[],b=0;b<a.length;++b)c.push(a.charCodeAt(b));return c}var DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",URL$1="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function v35(a,c,b){function _(k,j,_e,et){if(typeof k=="string"&&(k=stringToBytes(k)),typeof j=="string"&&(j=parse$3(j)),j.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var nt=new Uint8Array(16+k.length);if(nt.set(j),nt.set(k,j.length),nt=b(nt),nt[6]=nt[6]&15|c,nt[8]=nt[8]&63|128,_e){et=et||0;for(var it=0;it<16;++it)_e[et+it]=nt[it];return _e}return stringify(nt)}try{_.name=a}catch{}return _.DNS=DNS,_.URL=URL$1,_}function md5(a){if(typeof a=="string"){var c=unescape(encodeURIComponent(a));a=new Uint8Array(c.length);for(var b=0;b<c.length;++b)a[b]=c.charCodeAt(b)}return md5ToHexEncodedArray(wordsToMd5(bytesToWords(a),a.length*8))}function md5ToHexEncodedArray(a){for(var c=[],b=a.length*32,_="0123456789abcdef",k=0;k<b;k+=8){var j=a[k>>5]>>>k%32&255,_e=parseInt(_.charAt(j>>>4&15)+_.charAt(j&15),16);c.push(_e)}return c}function getOutputLength(a){return(a+64>>>9<<4)+14+1}function wordsToMd5(a,c){a[c>>5]|=128<<c%32,a[getOutputLength(c)-1]=c;for(var b=1732584193,_=-271733879,k=-1732584194,j=271733878,_e=0;_e<a.length;_e+=16){var et=b,nt=_,it=k,ft=j;b=md5ff(b,_,k,j,a[_e],7,-680876936),j=md5ff(j,b,_,k,a[_e+1],12,-389564586),k=md5ff(k,j,b,_,a[_e+2],17,606105819),_=md5ff(_,k,j,b,a[_e+3],22,-1044525330),b=md5ff(b,_,k,j,a[_e+4],7,-176418897),j=md5ff(j,b,_,k,a[_e+5],12,1200080426),k=md5ff(k,j,b,_,a[_e+6],17,-1473231341),_=md5ff(_,k,j,b,a[_e+7],22,-45705983),b=md5ff(b,_,k,j,a[_e+8],7,1770035416),j=md5ff(j,b,_,k,a[_e+9],12,-1958414417),k=md5ff(k,j,b,_,a[_e+10],17,-42063),_=md5ff(_,k,j,b,a[_e+11],22,-1990404162),b=md5ff(b,_,k,j,a[_e+12],7,1804603682),j=md5ff(j,b,_,k,a[_e+13],12,-40341101),k=md5ff(k,j,b,_,a[_e+14],17,-1502002290),_=md5ff(_,k,j,b,a[_e+15],22,1236535329),b=md5gg(b,_,k,j,a[_e+1],5,-165796510),j=md5gg(j,b,_,k,a[_e+6],9,-1069501632),k=md5gg(k,j,b,_,a[_e+11],14,643717713),_=md5gg(_,k,j,b,a[_e],20,-373897302),b=md5gg(b,_,k,j,a[_e+5],5,-701558691),j=md5gg(j,b,_,k,a[_e+10],9,38016083),k=md5gg(k,j,b,_,a[_e+15],14,-660478335),_=md5gg(_,k,j,b,a[_e+4],20,-405537848),b=md5gg(b,_,k,j,a[_e+9],5,568446438),j=md5gg(j,b,_,k,a[_e+14],9,-1019803690),k=md5gg(k,j,b,_,a[_e+3],14,-187363961),_=md5gg(_,k,j,b,a[_e+8],20,1163531501),b=md5gg(b,_,k,j,a[_e+13],5,-1444681467),j=md5gg(j,b,_,k,a[_e+2],9,-51403784),k=md5gg(k,j,b,_,a[_e+7],14,1735328473),_=md5gg(_,k,j,b,a[_e+12],20,-1926607734),b=md5hh(b,_,k,j,a[_e+5],4,-378558),j=md5hh(j,b,_,k,a[_e+8],11,-2022574463),k=md5hh(k,j,b,_,a[_e+11],16,1839030562),_=md5hh(_,k,j,b,a[_e+14],23,-35309556),b=md5hh(b,_,k,j,a[_e+1],4,-1530992060),j=md5hh(j,b,_,k,a[_e+4],11,1272893353),k=md5hh(k,j,b,_,a[_e+7],16,-155497632),_=md5hh(_,k,j,b,a[_e+10],23,-1094730640),b=md5hh(b,_,k,j,a[_e+13],4,681279174),j=md5hh(j,b,_,k,a[_e],11,-358537222),k=md5hh(k,j,b,_,a[_e+3],16,-722521979),_=md5hh(_,k,j,b,a[_e+6],23,76029189),b=md5hh(b,_,k,j,a[_e+9],4,-640364487),j=md5hh(j,b,_,k,a[_e+12],11,-421815835),k=md5hh(k,j,b,_,a[_e+15],16,530742520),_=md5hh(_,k,j,b,a[_e+2],23,-995338651),b=md5ii(b,_,k,j,a[_e],6,-198630844),j=md5ii(j,b,_,k,a[_e+7],10,1126891415),k=md5ii(k,j,b,_,a[_e+14],15,-1416354905),_=md5ii(_,k,j,b,a[_e+5],21,-57434055),b=md5ii(b,_,k,j,a[_e+12],6,1700485571),j=md5ii(j,b,_,k,a[_e+3],10,-1894986606),k=md5ii(k,j,b,_,a[_e+10],15,-1051523),_=md5ii(_,k,j,b,a[_e+1],21,-2054922799),b=md5ii(b,_,k,j,a[_e+8],6,1873313359),j=md5ii(j,b,_,k,a[_e+15],10,-30611744),k=md5ii(k,j,b,_,a[_e+6],15,-1560198380),_=md5ii(_,k,j,b,a[_e+13],21,1309151649),b=md5ii(b,_,k,j,a[_e+4],6,-145523070),j=md5ii(j,b,_,k,a[_e+11],10,-1120210379),k=md5ii(k,j,b,_,a[_e+2],15,718787259),_=md5ii(_,k,j,b,a[_e+9],21,-343485551),b=safeAdd(b,et),_=safeAdd(_,nt),k=safeAdd(k,it),j=safeAdd(j,ft)}return[b,_,k,j]}function bytesToWords(a){if(a.length===0)return[];for(var c=a.length*8,b=new Uint32Array(getOutputLength(c)),_=0;_<c;_+=8)b[_>>5]|=(a[_/8]&255)<<_%32;return b}function safeAdd(a,c){var b=(a&65535)+(c&65535),_=(a>>16)+(c>>16)+(b>>16);return _<<16|b&65535}function bitRotateLeft(a,c){return a<<c|a>>>32-c}function md5cmn(a,c,b,_,k,j){return safeAdd(bitRotateLeft(safeAdd(safeAdd(c,a),safeAdd(_,j)),k),b)}function md5ff(a,c,b,_,k,j,_e){return md5cmn(c&b|~c&_,a,c,k,j,_e)}function md5gg(a,c,b,_,k,j,_e){return md5cmn(c&_|b&~_,a,c,k,j,_e)}function md5hh(a,c,b,_,k,j,_e){return md5cmn(c^b^_,a,c,k,j,_e)}function md5ii(a,c,b,_,k,j,_e){return md5cmn(b^(c|~_),a,c,k,j,_e)}var v3=v35("v3",48,md5);const v3$1=v3;function v4(a,c,b){a=a||{};var _=a.random||(a.rng||rng)();if(_[6]=_[6]&15|64,_[8]=_[8]&63|128,c){b=b||0;for(var k=0;k<16;++k)c[b+k]=_[k];return c}return stringify(_)}function f(a,c,b,_){switch(a){case 0:return c&b^~c&_;case 1:return c^b^_;case 2:return c&b^c&_^b&_;case 3:return c^b^_}}function ROTL(a,c){return a<<c|a>>>32-c}function sha1(a){var c=[1518500249,1859775393,2400959708,3395469782],b=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof a=="string"){var _=unescape(encodeURIComponent(a));a=[];for(var k=0;k<_.length;++k)a.push(_.charCodeAt(k))}else Array.isArray(a)||(a=Array.prototype.slice.call(a));a.push(128);for(var j=a.length/4+2,_e=Math.ceil(j/16),et=new Array(_e),nt=0;nt<_e;++nt){for(var it=new Uint32Array(16),ft=0;ft<16;++ft)it[ft]=a[nt*64+ft*4]<<24|a[nt*64+ft*4+1]<<16|a[nt*64+ft*4+2]<<8|a[nt*64+ft*4+3];et[nt]=it}et[_e-1][14]=(a.length-1)*8/Math.pow(2,32),et[_e-1][14]=Math.floor(et[_e-1][14]),et[_e-1][15]=(a.length-1)*8&4294967295;for(var pt=0;pt<_e;++pt){for(var mt=new Uint32Array(80),St=0;St<16;++St)mt[St]=et[pt][St];for(var yt=16;yt<80;++yt)mt[yt]=ROTL(mt[yt-3]^mt[yt-8]^mt[yt-14]^mt[yt-16],1);for(var _t=b[0],Tt=b[1],gt=b[2],ht=b[3],Et=b[4],At=0;At<80;++At){var Bt=Math.floor(At/20),qt=ROTL(_t,5)+f(Bt,Tt,gt,ht)+Et+c[Bt]+mt[At]>>>0;Et=ht,ht=gt,gt=ROTL(Tt,30)>>>0,Tt=_t,_t=qt}b[0]=b[0]+_t>>>0,b[1]=b[1]+Tt>>>0,b[2]=b[2]+gt>>>0,b[3]=b[3]+ht>>>0,b[4]=b[4]+Et>>>0}return[b[0]>>24&255,b[0]>>16&255,b[0]>>8&255,b[0]&255,b[1]>>24&255,b[1]>>16&255,b[1]>>8&255,b[1]&255,b[2]>>24&255,b[2]>>16&255,b[2]>>8&255,b[2]&255,b[3]>>24&255,b[3]>>16&255,b[3]>>8&255,b[3]&255,b[4]>>24&255,b[4]>>16&255,b[4]>>8&255,b[4]&255]}var v5=v35("v5",80,sha1);const v5$1=v5,nil="00000000-0000-0000-0000-000000000000";function version$4(a){if(!validate$2(a))throw TypeError("Invalid UUID");return parseInt(a.substr(14,1),16)}const esmBrowser=Object.freeze(Object.defineProperty({__proto__:null,NIL:nil,parse:parse$3,stringify,v1,v3:v3$1,v4,v5:v5$1,validate:validate$2,version:version$4},Symbol.toStringTag,{value:"Module"})),require$$1$2=getAugmentedNamespace(esmBrowser);let EnhancedMap$1=class extends Map{computeIfAbsent(c,b){if(this.has(c))return this.get(c);const _=b(c);return this.set(c,_),_}computeIfPresent(c,b){const _=this.get(c);if(_===void 0)return;const k=b(c,_);return k!==void 0?this.set(c,k):this.delete(c),k}compute(c,b){const _=this.get(c),k=b(c,_);return k?this.set(c,k):this.delete(c),k}};var InternalLogLevel$1;(function(a){a[a.Trace=0]="Trace",a[a.Debug=1]="Debug",a[a.Info=2]="Info",a[a.Warn=3]="Warn",a[a.Error=4]="Error"})(InternalLogLevel$1||(InternalLogLevel$1={}));function getInternalLogger$1(a){return provider$1.getLogger(a)}const INTERNAL_LOGGING_SETTINGS$1={setInternalLogLevel:a=>provider$1.changeLogLevel(a),setOutput:a=>provider$1.changeOutput(a),reset:()=>provider$1.reset()};let InternalLoggerImpl$1=class{constructor(c,b,_){this._name=c,this._level=b,this._fnOutput=_}trace(c){this.log(InternalLogLevel$1.Trace,c)}debug(c){this.log(InternalLogLevel$1.Debug,c)}error(c,b){this.log(InternalLogLevel$1.Error,c,b)}info(c){this.log(InternalLogLevel$1.Info,c)}warn(c,b){this.log(InternalLogLevel$1.Warn,c,b)}setLevel(c){this._level=c}setOutput(c){this._fnOutput=c}log(c,b,_){this._level>c||this._fnOutput(`${InternalLogLevel$1[this._level].toString()} <INTERNAL LOGGER> ${this._name} ${b()}${_?`
`+_.stack:""}`)}},InternalProviderImpl$1=class gr{constructor(){this._loggers=new EnhancedMap$1,this._logLevel=InternalLogLevel$1.Error,this._fnOutput=gr.logConsole}getLogger(c){return this._loggers.computeIfAbsent(c,b=>new InternalLoggerImpl$1(b,this._logLevel,this._fnOutput))}changeLogLevel(c){this._logLevel=c,this._loggers.forEach(b=>b.setLevel(c))}changeOutput(c){this._fnOutput=c,this._loggers.forEach(b=>b.setOutput(this._fnOutput))}reset(){this.changeLogLevel(InternalLogLevel$1.Error),this._fnOutput=gr.logConsole,this._loggers.forEach(c=>c.setOutput(this._fnOutput))}static logConsole(c){console&&console.log&&console.log(c)}};const provider$1=new InternalProviderImpl$1;var InternalLogger$1=Object.freeze({__proto__:null,get InternalLogLevel(){return InternalLogLevel$1},getInternalLogger:getInternalLogger$1,INTERNAL_LOGGING_SETTINGS:INTERNAL_LOGGING_SETTINGS$1}),LogLevel$2;(function(a){a[a.Trace=0]="Trace",a[a.Debug=1]="Debug",a[a.Info=2]="Info",a[a.Warn=3]="Warn",a[a.Error=4]="Error",a[a.Fatal=5]="Fatal"})(LogLevel$2||(LogLevel$2={}));(function(a){function c(b){switch(b.toLowerCase()){case"trace":return a.Trace;case"debug":return a.Debug;case"info":return a.Info;case"warn":return a.Warn;case"error":return a.Error;case"fatal":return a.Fatal;default:return}}a.toLogLevel=c})(LogLevel$2||(LogLevel$2={}));let CoreLoggerImpl$1=class as{constructor(c){this._runtime=c}get id(){return this._runtime.id}get logLevel(){return this._runtime.level}get runtimeSettings(){return Object.assign({},this._runtime)}set runtimeSettings(c){this._runtime=c}trace(c,...b){this.logMessage(LogLevel$2.Trace,c,b)}debug(c,...b){this.logMessage(LogLevel$2.Debug,c,b)}info(c,...b){this.logMessage(LogLevel$2.Info,c,b)}warn(c,...b){this.logMessage(LogLevel$2.Warn,c,b)}error(c,...b){this.logMessage(LogLevel$2.Error,c,b)}fatal(c,...b){this.logMessage(LogLevel$2.Fatal,c,b)}logMessage(c,b,_){if(this._runtime.level>c)return;const k=Date.now(),j=typeof b=="string"?b:b(),_e=as.getErrorAndArgs(_);switch(this._runtime.channel.type){case"RawLogChannel":this._runtime.channel.write({message:j,exception:_e.error,args:_e.args,timeInMillis:k,level:c,logNames:this._runtime.name},this._runtime.argumentFormatter);return;case"LogChannel":this._runtime.channel.write(this.createLogMessage(j,c,_e,k));break}}formatArgValue(c){try{return this._runtime.argumentFormatter(c)}catch{return`>>ARG CONVERT FAILED: '${c!==void 0?c.toString():"undefined"}'<<`}}createLogMessage(c,b,_,k){let j;const _e=_.error,et=_.args;_e&&(j=`${_e.name}: ${_e.message}`,_e.stack&&(j+=`@
${_e.stack}`));const nt=this._runtime.dateFormatter(k);let it=LogLevel$2[b].toUpperCase();it.length<5&&(it+=" ");const ft=typeof this._runtime.name=="string"?this._runtime.name:this._runtime.name.join(", "),pt=typeof et<"u"&&et.length>0?" ["+et.map(St=>this.formatArgValue(St)).join(", ")+"]":"";return{message:nt+" "+it+" ["+ft+"] "+c+pt,error:j}}static getErrorAndArgs(c){if(c.length===0)return{};let b,_;const k=c[0];if(k instanceof Error)return b=k,_=c.length>1?c.slice(1):void 0,{error:b,args:_};if(typeof k=="function"){const j=k();return j instanceof Error?(b=j,_=c.length>1?c.slice(1):void 0,{error:b,args:_}):c.length===1?Array.isArray(j)?{args:j.length>0?j:void 0}:{args:j}:Array.isArray(j)?{args:[...j,...c.slice(1)]}:{args:[j,...c.slice(1)]}}return{args:c}}};function padStart$1(a,c,b=" "){return padInternal$1(a,c,"start",b)}function padEnd$1(a,c,b=" "){return padInternal$1(a,c,"end",b)}function maxLengthStringValueInArray$1(a){return a.map(c=>c.length).reduce((c,b)=>b>c?b:c,0)}function padInternal$1(a,c,b,_=" "){if(c<=a.length)return a;if(_.length>1)throw new Error(`Fill char must be one char exactly, it is: ${_.length}`);const k=c-a.length;let j="";for(let _e=0;_e<k;_e++)j+=_;return b==="start"?j+a:a+j}function formatArgument$1(a){return a===void 0?"undefined":JSON.stringify(a)}function formatDate$1(a){const c=new Date(a),b=c.getFullYear(),_=padStart$1((c.getMonth()+1).toString(),2,"0"),k=padStart$1(c.getDate().toString(),2,"0"),j=padStart$1(c.getHours().toString(),2,"0"),_e=padStart$1(c.getMinutes().toString(),2,"0"),et=padStart$1(c.getSeconds().toString(),2,"0"),nt=padStart$1(c.getMilliseconds().toString(),2,"0");return`${b}-${_}-${k} ${j}:${_e}:${et},${nt}`}let ConsoleLogChannel$1=class{constructor(){this.type="LogChannel"}write(c){console&&console.log&&console.log(c.message+(c.error?`
${c.error}`:""))}};var DefaultChannels$1;(function(a){function c(){return new ConsoleLogChannel$1}a.createConsoleChannel=c})(DefaultChannels$1||(DefaultChannels$1={}));let LogProviderImpl$1=class vr{constructor(c,b){this._log=getInternalLogger$1("core.impl.LogProviderImpl"),this._name=c,this._settings=b,this._loggers=new EnhancedMap$1,this._idToKeyMap=new EnhancedMap$1,this._globalRuntimeSettings={level:b.level,channel:b.channel},this._nextLoggerId=1,this._log.trace(()=>`Created LogProviderImpl with settings: ${JSON.stringify(this._settings)}`)}get runtimeSettings(){return Object.assign(Object.assign({},this._settings),{level:this._globalRuntimeSettings.level,channel:this._globalRuntimeSettings.channel})}getLogger(c){return this.getOrCreateLogger(c)}updateLoggerRuntime(c,b){this._log.debug(()=>`Updating logger ${c.id} runtime settings using: '${JSON.stringify(b)}'`);const _=this._idToKeyMap.get(c.id);return _===void 0?(this._log.warn(()=>`Cannot update logger with id: ${c.id}, it was not found.`),!1):(this._loggers.computeIfPresent(_,(k,j)=>(j.runtimeSettings=vr.mergeRuntimeSettingsIntoLogRuntime(j.runtimeSettings,b),j)),!0)}updateRuntimeSettings(c){this._log.debug(()=>`Updating global runtime settings and updating existing loggers runtime settings using: '${JSON.stringify(c)}'`),this._globalRuntimeSettings={level:c.level!==void 0?c.level:this._globalRuntimeSettings.level,channel:c.channel!==void 0?c.channel:this._globalRuntimeSettings.channel},this._loggers.forEach(b=>b.runtimeSettings=vr.mergeRuntimeSettingsIntoLogRuntime(b.runtimeSettings,c))}clear(){this._loggers.clear(),this._idToKeyMap.clear(),this._globalRuntimeSettings=Object.assign({},this._settings),this._nextLoggerId=1}getOrCreateLogger(c){const b=vr.createKey(c),_=this._loggers.computeIfAbsent(b,()=>{const k={level:this._globalRuntimeSettings.level,channel:this._globalRuntimeSettings.channel,id:this.nextLoggerId(),name:c,argumentFormatter:this._settings.argumentFormatter,dateFormatter:this._settings.dateFormatter};return new CoreLoggerImpl$1(k)});return this._idToKeyMap.computeIfAbsent(_.id,()=>b),_}nextLoggerId(){const c=this._name+"_"+this._nextLoggerId;return this._nextLoggerId++,c}static mergeRuntimeSettingsIntoLogRuntime(c,b){return Object.assign(Object.assign({},c),{level:b.level!==void 0?b.level:c.level,channel:b.channel!==void 0?b.channel:c.channel})}static createKey(c){return typeof c=="string"?c:c.join(",")}};function createLogProvider$1(a,c){return new LogProviderImpl$1(a,c)}var index$1=Object.freeze({__proto__:null,EnhancedMap:EnhancedMap$1,padStart:padStart$1,padEnd:padEnd$1,maxLengthStringValueInArray:maxLengthStringValueInArray$1});class ArrayLogChannel{constructor(){this._buffer=[],this.type="LogChannel"}write(c){this._buffer.push(c)}get logMessages(){return this._buffer}get messages(){return this._buffer.map(c=>c.message)}}class ArrayRawLogChannel{constructor(){this._buffer=[],this.type="RawLogChannel"}write(c,b){this._buffer.push(c)}get messages(){return this._buffer.map(c=>c.message)}get errors(){return this._buffer.map(c=>c.exception)}get size(){return this._buffer.length}get rawMessages(){return this._buffer}clear(){this._buffer=[]}}class TestControlMessage{constructor(){this._messages=[],this.write=this.write.bind(this)}get messages(){return this._messages}write(c){this._messages.push(c)}clear(){this._messages=[]}}var TestClasses=Object.freeze({__proto__:null,ArrayLogChannel,ArrayRawLogChannel,TestControlMessage});const typescriptLogging_esm=Object.freeze(Object.defineProperty({__proto__:null,$internal:InternalLogger$1,$test:TestClasses,get DefaultChannels(){return DefaultChannels$1},get LogLevel(){return LogLevel$2},createLogProvider:createLogProvider$1,formatArgument:formatArgument$1,formatDate:formatDate$1,util:index$1},Symbol.toStringTag,{value:"Module"})),require$$2$1=getAugmentedNamespace(typescriptLogging_esm);var layoutapi={},lib$1={},lib={},Metadata={};Object.defineProperty(Metadata,"__esModule",{value:!0});Metadata.Metadata=void 0;Metadata.Metadata=function(c){const b=new Map,_={set(k,j){if(k=normalizeKey(k),Array.isArray(j))if(j.length===0)b.delete(k);else{for(const _e of j)validate$1(k,_e);b.set(k,k.endsWith("-bin")?j:[j.join(", ")])}else validate$1(k,j),b.set(k,[j]);return _},append(k,j){k=normalizeKey(k),validate$1(k,j);let _e=b.get(k);return _e==null&&(_e=[],b.set(k,_e)),_e.push(j),k.endsWith("-bin")||b.set(k,[_e.join(", ")]),_},delete(k){k=normalizeKey(k),b.delete(k)},get(k){var j;return k=normalizeKey(k),(j=b.get(k))===null||j===void 0?void 0:j[0]},getAll(k){var j;return k=normalizeKey(k),(j=b.get(k))!==null&&j!==void 0?j:[]},has(k){return k=normalizeKey(k),b.has(k)},[Symbol.iterator](){return b[Symbol.iterator]()}};if(c!=null){const k=isIterable$1(c)?c:Object.entries(c);for(const[j,_e]of k)_.set(j,_e)}return _};function normalizeKey(a){return a.toLowerCase()}function validate$1(a,c){if(!/^[0-9a-z_.-]+$/.test(a))throw new Error(`Metadata key '${a}' contains illegal characters`);if(a.endsWith("-bin")){if(!(c instanceof Uint8Array))throw new Error(`Metadata key '${a}' ends with '-bin', thus it must have binary value`)}else{if(typeof c!="string")throw new Error(`Metadata key '${a}' doesn't end with '-bin', thus it must have string value`);if(!/^[ -~]*$/.test(c))throw new Error(`Metadata value '${c}' of key '${a}' contains illegal characters`)}}function isIterable$1(a){return Symbol.iterator in a}var Status={};(function(a){Object.defineProperty(a,"__esModule",{value:!0}),a.Status=void 0,function(c){c[c.OK=0]="OK",c[c.CANCELLED=1]="CANCELLED",c[c.UNKNOWN=2]="UNKNOWN",c[c.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",c[c.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",c[c.NOT_FOUND=5]="NOT_FOUND",c[c.ALREADY_EXISTS=6]="ALREADY_EXISTS",c[c.PERMISSION_DENIED=7]="PERMISSION_DENIED",c[c.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",c[c.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",c[c.ABORTED=10]="ABORTED",c[c.OUT_OF_RANGE=11]="OUT_OF_RANGE",c[c.UNIMPLEMENTED=12]="UNIMPLEMENTED",c[c.INTERNAL=13]="INTERNAL",c[c.UNAVAILABLE=14]="UNAVAILABLE",c[c.DATA_LOSS=15]="DATA_LOSS",c[c.UNAUTHENTICATED=16]="UNAUTHENTICATED"}(a.Status||(a.Status={}))})(Status);var MethodDescriptor={};Object.defineProperty(MethodDescriptor,"__esModule",{value:!0});var CallOptions={};Object.defineProperty(CallOptions,"__esModule",{value:!0});var ClientMiddleware={};Object.defineProperty(ClientMiddleware,"__esModule",{value:!0});var composeClientMiddleware$1={};Object.defineProperty(composeClientMiddleware$1,"__esModule",{value:!0});composeClientMiddleware$1.composeClientMiddleware=void 0;function composeClientMiddleware(a,c){return(b,_)=>c({...b,next:(k,j)=>a({...b,request:k},j)},_)}composeClientMiddleware$1.composeClientMiddleware=composeClientMiddleware;var ClientError$1={},cjs={},helpers={};helpers.__esModule=void 0;helpers.__esModule=!0;var objectSetPrototypeOfIsDefined=typeof Object.setPrototypeOf=="function",objectGetPrototypeOfIsDefined=typeof Object.getPrototypeOf=="function",objectDefinePropertyIsDefined=typeof Object.defineProperty=="function",objectCreateIsDefined=typeof Object.create=="function",objectHasOwnPropertyIsDefined=typeof Object.prototype.hasOwnProperty=="function",setPrototypeOf=function(c,b){objectSetPrototypeOfIsDefined?Object.setPrototypeOf(c,b):c.__proto__=b};helpers.setPrototypeOf=setPrototypeOf;var getPrototypeOf$1=function(c){return objectGetPrototypeOfIsDefined?Object.getPrototypeOf(c):c.__proto__||c.prototype};helpers.getPrototypeOf=getPrototypeOf$1;var ie8ObjectDefinePropertyBug=!1,defineProperty=function a(c,b,_){if(objectDefinePropertyIsDefined&&!ie8ObjectDefinePropertyBug)try{Object.defineProperty(c,b,_)}catch{ie8ObjectDefinePropertyBug=!0,a(c,b,_)}else c[b]=_.value};helpers.defineProperty=defineProperty;var hasOwnProperty$3=function(c,b){return objectHasOwnPropertyIsDefined?c.hasOwnProperty(c,b):c[b]===void 0};helpers.hasOwnProperty=hasOwnProperty$3;var objectCreate=function(c,b){if(objectCreateIsDefined)return Object.create(c,b);var _=function(){};_.prototype=c;var k=new _;if(typeof b>"u")return k;if(typeof b=="null")throw new Error("PropertyDescriptors must not be null.");if(typeof b=="object")for(var j in b)hasOwnProperty$3(b,j)&&(k[j]=b[j].value);return k};helpers.objectCreate=objectCreate;(function(a){a.__esModule=void 0,a.__esModule=!0;var c=helpers,b=c.setPrototypeOf,_=c.getPrototypeOf,k=c.defineProperty,j=c.objectCreate,_e=new Error().toString()==="[object Error]",et="";function nt(it){var ft=this.constructor,pt=ft.name||function(){var Tt=ft.toString().match(/^function\s*([^\s(]+)/);return Tt===null?et||"Error":Tt[1]}(),mt=pt==="Error",St=mt?et:pt,yt=Error.apply(this,arguments);if(b(yt,_(this)),!(yt instanceof ft)||!(yt instanceof nt)){var yt=this;Error.apply(this,arguments),k(yt,"message",{configurable:!0,enumerable:!1,value:it,writable:!0})}if(k(yt,"name",{configurable:!0,enumerable:!1,value:St,writable:!0}),Error.captureStackTrace&&Error.captureStackTrace(yt,mt?nt:ft),yt.stack===void 0){var _t=new Error(it);_t.name=yt.name,yt.stack=_t.stack}return _e&&k(yt,"toString",{configurable:!0,enumerable:!1,value:function(){return(this.name||"Error")+(typeof this.message>"u"?"":": "+this.message)},writable:!0}),yt}et=nt.name||"ExtendableError",nt.prototype=j(Error.prototype,{constructor:{value:Error,enumerable:!1,writable:!0,configurable:!0}}),a.ExtendableError=nt,a.default=a.ExtendableError})(cjs);Object.defineProperty(ClientError$1,"__esModule",{value:!0});ClientError$1.ClientError=void 0;const ts_error_1$1=cjs,Status_1$1=Status;class ClientError extends ts_error_1$1.ExtendableError{constructor(c,b,_){super(`${c} ${Status_1$1.Status[b]}: ${_}`),this.path=c,this.code=b,this.details=_,this.name="ClientError",Object.defineProperty(this,"@@nice-grpc",{value:!0}),Object.defineProperty(this,"@@nice-grpc:ClientError",{value:!0})}static[Symbol.hasInstance](c){return this!==ClientError?this.prototype.isPrototypeOf(c):typeof c=="object"&&c!==null&&(c.constructor===ClientError||c["@@nice-grpc:ClientError"]===!0||c.name==="ClientError"&&c["@@nice-grpc"]===!0)}}ClientError$1.ClientError=ClientError;var CallContext={};Object.defineProperty(CallContext,"__esModule",{value:!0});var ServerMiddleware={};Object.defineProperty(ServerMiddleware,"__esModule",{value:!0});var composeServerMiddleware$1={};Object.defineProperty(composeServerMiddleware$1,"__esModule",{value:!0});composeServerMiddleware$1.composeServerMiddleware=void 0;function composeServerMiddleware(a,c){return(b,_)=>a({...b,next:(k,j)=>c({...b,request:k},j)},_)}composeServerMiddleware$1.composeServerMiddleware=composeServerMiddleware;var ServerError$1={};Object.defineProperty(ServerError$1,"__esModule",{value:!0});ServerError$1.ServerError=void 0;const ts_error_1=cjs,Status_1=Status;class ServerError extends ts_error_1.ExtendableError{constructor(c,b){super(`${Status_1.Status[c]}: ${b}`),this.code=c,this.details=b,this.name="ServerError",Object.defineProperty(this,"@@nice-grpc",{value:!0}),Object.defineProperty(this,"@@nice-grpc:ServerError",{value:!0})}static[Symbol.hasInstance](c){return this!==ServerError?this.prototype.isPrototypeOf(c):typeof c=="object"&&c!==null&&(c.constructor===ServerError||c["@@nice-grpc:ServerError"]===!0||c.name==="ServerError"&&c["@@nice-grpc"]===!0)}}ServerError$1.ServerError=ServerError;(function(a){var c=commonjsGlobal$1&&commonjsGlobal$1.__createBinding||(Object.create?function(_,k,j,_e){_e===void 0&&(_e=j);var et=Object.getOwnPropertyDescriptor(k,j);(!et||("get"in et?!k.__esModule:et.writable||et.configurable))&&(et={enumerable:!0,get:function(){return k[j]}}),Object.defineProperty(_,_e,et)}:function(_,k,j,_e){_e===void 0&&(_e=j),_[_e]=k[j]}),b=commonjsGlobal$1&&commonjsGlobal$1.__exportStar||function(_,k){for(var j in _)j!=="default"&&!Object.prototype.hasOwnProperty.call(k,j)&&c(k,_,j)};Object.defineProperty(a,"__esModule",{value:!0}),b(Metadata,a),b(Status,a),b(MethodDescriptor,a),b(CallOptions,a),b(ClientMiddleware,a),b(composeClientMiddleware$1,a),b(ClientError$1,a),b(CallContext,a),b(ServerMiddleware,a),b(composeServerMiddleware$1,a),b(ServerError$1,a)})(lib);var serviceDefinitions={},grpcWeb={};Object.defineProperty(grpcWeb,"__esModule",{value:!0});grpcWeb.isGrpcWebServiceDefinition=grpcWeb.fromGrpcWebServiceDefinition=void 0;function fromGrpcWebServiceDefinition(a){const c={};for(const[b,_]of Object.entries(a)){if(b==="serviceName")continue;const k=_;c[uncapitalize(b)]={path:`/${a.serviceName}/${b}`,requestStream:k.requestStream,responseStream:k.responseStream,requestDeserialize:k.requestType.deserializeBinary,requestSerialize:j=>j.serializeBinary(),responseDeserialize:k.responseType.deserializeBinary,responseSerialize:j=>j.serializeBinary(),options:{}}}return c}grpcWeb.fromGrpcWebServiceDefinition=fromGrpcWebServiceDefinition;function isGrpcWebServiceDefinition(a){return"prototype"in a}grpcWeb.isGrpcWebServiceDefinition=isGrpcWebServiceDefinition;function uncapitalize(a){return a.length===0?a:a[0].toLowerCase()+a.slice(1)}var tsProto={};Object.defineProperty(tsProto,"__esModule",{value:!0});tsProto.isTsProtoServiceDefinition=tsProto.fromTsProtoServiceDefinition=void 0;function fromTsProtoServiceDefinition(a){const c={};for(const[b,_]of Object.entries(a.methods)){const k=_.requestType.encode,j=_.requestType.fromPartial,_e=_.responseType.encode,et=_.responseType.fromPartial;c[b]={path:`/${a.fullName}/${_.name}`,requestStream:_.requestStream,responseStream:_.responseStream,requestDeserialize:_.requestType.decode,requestSerialize:j!=null?nt=>k(j(nt)).finish():nt=>k(nt).finish(),responseDeserialize:_.responseType.decode,responseSerialize:et!=null?nt=>_e(et(nt)).finish():nt=>_e(nt).finish(),options:_.options}}return c}tsProto.fromTsProtoServiceDefinition=fromTsProtoServiceDefinition;function isTsProtoServiceDefinition(a){return"name"in a&&"fullName"in a&&"methods"in a}tsProto.isTsProtoServiceDefinition=isTsProtoServiceDefinition;Object.defineProperty(serviceDefinitions,"__esModule",{value:!0});serviceDefinitions.toGrpcWebMethodDefinition=serviceDefinitions.normalizeServiceDefinition=void 0;const grpc_web_1$5=grpcWeb,ts_proto_1=tsProto;function normalizeServiceDefinition(a){return(0,grpc_web_1$5.isGrpcWebServiceDefinition)(a)?(0,grpc_web_1$5.fromGrpcWebServiceDefinition)(a):(0,ts_proto_1.isTsProtoServiceDefinition)(a)?(0,ts_proto_1.fromTsProtoServiceDefinition)(a):a}serviceDefinitions.normalizeServiceDefinition=normalizeServiceDefinition;function toGrpcWebMethodDefinition(a){const[,c,b]=a.path.split("/");return{service:{serviceName:c},methodName:b,requestStream:a.requestStream,responseStream:a.responseStream,requestType:class{constructor(){throw new Error("Unexpected instantiation")}static deserializeBinary(_){return a.requestDeserialize(_)}},responseType:class{constructor(){throw new Error("Unexpected instantiation")}static deserializeBinary(_){return a.responseDeserialize(_)}}}}serviceDefinitions.toGrpcWebMethodDefinition=toGrpcWebMethodDefinition;var channel={};Object.defineProperty(channel,"__esModule",{value:!0});channel.createChannel=void 0;function createChannel(a,c){return{address:a,transport:c}}channel.createChannel=createChannel;var ClientFactory={},createBidiStreamingMethod$1={},grpcWebClient_umd={exports:{}};(function(a,c){(function(b,_){a.exports=_()})(commonjsGlobal$1,function(){return b={418:function(k,j){(function(_e,et){for(var nt in et)_e[nt]=et[nt]})(j,function(_e){var et={};function nt(it){if(et[it])return et[it].exports;var ft=et[it]={i:it,l:!1,exports:{}};return _e[it].call(ft.exports,ft,ft.exports,nt),ft.l=!0,ft.exports}return nt.m=_e,nt.c=et,nt.i=function(it){return it},nt.d=function(it,ft,pt){nt.o(it,ft)||Object.defineProperty(it,ft,{configurable:!1,enumerable:!0,get:pt})},nt.n=function(it){var ft=it&&it.__esModule?function(){return it.default}:function(){return it};return nt.d(ft,"a",ft),ft},nt.o=function(it,ft){return Object.prototype.hasOwnProperty.call(it,ft)},nt.p="",nt(nt.s=1)}([function(_e,et,nt){Object.defineProperty(et,"__esModule",{value:!0});var it=nt(3),ft=function(){function pt(mt,St){mt===void 0&&(mt={}),St===void 0&&(St={splitValues:!1});var yt,_t=this;this.headersMap={},mt&&(typeof Headers<"u"&&mt instanceof Headers?it.getHeaderKeys(mt).forEach(function(Tt){it.getHeaderValues(mt,Tt).forEach(function(gt){St.splitValues?_t.append(Tt,it.splitHeaderValue(gt)):_t.append(Tt,gt)})}):typeof(yt=mt)=="object"&&typeof yt.headersMap=="object"&&typeof yt.forEach=="function"?mt.forEach(function(Tt,gt){_t.append(Tt,gt)}):typeof Map<"u"&&mt instanceof Map?mt.forEach(function(Tt,gt){_t.append(gt,Tt)}):typeof mt=="string"?this.appendFromString(mt):typeof mt=="object"&&Object.getOwnPropertyNames(mt).forEach(function(Tt){var gt=mt[Tt];Array.isArray(gt)?gt.forEach(function(ht){_t.append(Tt,ht)}):_t.append(Tt,gt)}))}return pt.prototype.appendFromString=function(mt){for(var St=mt.split(`\r
`),yt=0;yt<St.length;yt++){var _t=St[yt],Tt=_t.indexOf(":");if(Tt>0){var gt=_t.substring(0,Tt).trim(),ht=_t.substring(Tt+1).trim();this.append(gt,ht)}}},pt.prototype.delete=function(mt,St){var yt=it.normalizeName(mt);if(St===void 0)delete this.headersMap[yt];else{var _t=this.headersMap[yt];if(_t){var Tt=_t.indexOf(St);Tt>=0&&_t.splice(Tt,1),_t.length===0&&delete this.headersMap[yt]}}},pt.prototype.append=function(mt,St){var yt=this,_t=it.normalizeName(mt);Array.isArray(this.headersMap[_t])||(this.headersMap[_t]=[]),Array.isArray(St)?St.forEach(function(Tt){yt.headersMap[_t].push(it.normalizeValue(Tt))}):this.headersMap[_t].push(it.normalizeValue(St))},pt.prototype.set=function(mt,St){var yt=it.normalizeName(mt);if(Array.isArray(St)){var _t=[];St.forEach(function(Tt){_t.push(it.normalizeValue(Tt))}),this.headersMap[yt]=_t}else this.headersMap[yt]=[it.normalizeValue(St)]},pt.prototype.has=function(mt,St){var yt=this.headersMap[it.normalizeName(mt)];if(!Array.isArray(yt))return!1;if(St!==void 0){var _t=it.normalizeValue(St);return yt.indexOf(_t)>=0}return!0},pt.prototype.get=function(mt){var St=this.headersMap[it.normalizeName(mt)];return St!==void 0?St.concat():[]},pt.prototype.forEach=function(mt){var St=this;Object.getOwnPropertyNames(this.headersMap).forEach(function(yt){mt(yt,St.headersMap[yt])},this)},pt.prototype.toHeaders=function(){if(typeof Headers<"u"){var mt=new Headers;return this.forEach(function(St,yt){yt.forEach(function(_t){mt.append(St,_t)})}),mt}throw new Error("Headers class is not defined")},pt}();et.BrowserHeaders=ft},function(_e,et,nt){Object.defineProperty(et,"__esModule",{value:!0});var it=nt(0);et.BrowserHeaders=it.BrowserHeaders},function(_e,et,nt){Object.defineProperty(et,"__esModule",{value:!0}),et.iterateHeaders=function(it,ft){for(var pt=it[Symbol.iterator](),mt=pt.next();!mt.done;)ft(mt.value[0]),mt=pt.next()},et.iterateHeadersKeys=function(it,ft){for(var pt=it.keys(),mt=pt.next();!mt.done;)ft(mt.value),mt=pt.next()}},function(_e,et,nt){Object.defineProperty(et,"__esModule",{value:!0});var it=nt(2);et.normalizeName=function(ft){if(typeof ft!="string"&&(ft=String(ft)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(ft))throw new TypeError("Invalid character in header field name");return ft.toLowerCase()},et.normalizeValue=function(ft){return typeof ft!="string"&&(ft=String(ft)),ft},et.getHeaderValues=function(ft,pt){var mt=ft;if(mt instanceof Headers&&mt.getAll)return mt.getAll(pt);var St=mt.get(pt);return St&&typeof St=="string"?[St]:St},et.getHeaderKeys=function(ft){var pt=ft,mt={},St=[];return pt.keys?it.iterateHeadersKeys(pt,function(yt){mt[yt]||(mt[yt]=!0,St.push(yt))}):pt.forEach?pt.forEach(function(yt,_t){mt[_t]||(mt[_t]=!0,St.push(_t))}):it.iterateHeaders(pt,function(yt){var _t=yt[0];mt[_t]||(mt[_t]=!0,St.push(_t))}),St},et.splitHeaderValue=function(ft){var pt=[];return ft.split(", ").forEach(function(mt){mt.split(",").forEach(function(St){pt.push(St)})}),pt}}]))},617:function(k,j,_e){Object.defineProperty(j,"__esModule",{value:!0}),j.ChunkParser=j.ChunkType=j.encodeASCII=j.decodeASCII=void 0;var et,nt=_e(65);function it(Tt){return(gt=Tt)===9||gt===10||gt===13||Tt>=32&&Tt<=126;var gt}function ft(Tt){for(var gt=0;gt!==Tt.length;++gt)if(!it(Tt[gt]))throw new Error("Metadata is not valid (printable) ASCII");return String.fromCharCode.apply(String,Array.prototype.slice.call(Tt))}function pt(Tt){return(128&Tt.getUint8(0))==128}function mt(Tt){return Tt.getUint32(1,!1)}function St(Tt,gt,ht){return Tt.byteLength-gt>=ht}function yt(Tt,gt,ht){if(Tt.slice)return Tt.slice(gt,ht);var Et=Tt.length;ht!==void 0&&(Et=ht);for(var At=new Uint8Array(Et-gt),Bt=0,qt=gt;qt<Et;qt++)At[Bt++]=Tt[qt];return At}j.decodeASCII=ft,j.encodeASCII=function(Tt){for(var gt=new Uint8Array(Tt.length),ht=0;ht!==Tt.length;++ht){var Et=Tt.charCodeAt(ht);if(!it(Et))throw new Error("Metadata contains invalid ASCII");gt[ht]=Et}return gt},function(Tt){Tt[Tt.MESSAGE=1]="MESSAGE",Tt[Tt.TRAILERS=2]="TRAILERS"}(et=j.ChunkType||(j.ChunkType={}));var _t=function(){function Tt(){this.buffer=null,this.position=0}return Tt.prototype.parse=function(gt,ht){if(gt.length===0&&ht)return[];var Et,At=[];if(this.buffer==null)this.buffer=gt,this.position=0;else if(this.position===this.buffer.byteLength)this.buffer=gt,this.position=0;else{var Bt=this.buffer.byteLength-this.position,qt=new Uint8Array(Bt+gt.byteLength),zt=yt(this.buffer,this.position);qt.set(zt,0);var Ht=new Uint8Array(gt);qt.set(Ht,Bt),this.buffer=qt,this.position=0}for(;;){if(!St(this.buffer,this.position,5))return At;var ct=yt(this.buffer,this.position,this.position+5),dt=new DataView(ct.buffer,ct.byteOffset,ct.byteLength),lt=mt(dt);if(!St(this.buffer,this.position,5+lt))return At;var kt=yt(this.buffer,this.position+5,this.position+5+lt);if(this.position+=5+lt,pt(dt))return At.push({chunkType:et.TRAILERS,trailers:(Et=kt,new nt.Metadata(ft(Et)))}),At;At.push({chunkType:et.MESSAGE,data:kt})}},Tt}();j.ChunkParser=_t},8:function(k,j){var _e;Object.defineProperty(j,"__esModule",{value:!0}),j.httpStatusToCode=j.Code=void 0,function(et){et[et.OK=0]="OK",et[et.Canceled=1]="Canceled",et[et.Unknown=2]="Unknown",et[et.InvalidArgument=3]="InvalidArgument",et[et.DeadlineExceeded=4]="DeadlineExceeded",et[et.NotFound=5]="NotFound",et[et.AlreadyExists=6]="AlreadyExists",et[et.PermissionDenied=7]="PermissionDenied",et[et.ResourceExhausted=8]="ResourceExhausted",et[et.FailedPrecondition=9]="FailedPrecondition",et[et.Aborted=10]="Aborted",et[et.OutOfRange=11]="OutOfRange",et[et.Unimplemented=12]="Unimplemented",et[et.Internal=13]="Internal",et[et.Unavailable=14]="Unavailable",et[et.DataLoss=15]="DataLoss",et[et.Unauthenticated=16]="Unauthenticated"}(_e=j.Code||(j.Code={})),j.httpStatusToCode=function(et){switch(et){case 0:return _e.Internal;case 200:return _e.OK;case 400:return _e.InvalidArgument;case 401:return _e.Unauthenticated;case 403:return _e.PermissionDenied;case 404:return _e.NotFound;case 409:return _e.Aborted;case 412:return _e.FailedPrecondition;case 429:return _e.ResourceExhausted;case 499:return _e.Canceled;case 500:return _e.Unknown;case 501:return _e.Unimplemented;case 503:return _e.Unavailable;case 504:return _e.DeadlineExceeded;default:return _e.Unknown}}},934:function(k,j,_e){Object.defineProperty(j,"__esModule",{value:!0}),j.client=void 0;var et=_e(65),nt=_e(617),it=_e(8),ft=_e(346),pt=_e(57),mt=_e(882);j.client=function(_t,Tt){return new St(_t,Tt)};var St=function(){function _t(Tt,gt){this.started=!1,this.sentFirstMessage=!1,this.completed=!1,this.closed=!1,this.finishedSending=!1,this.onHeadersCallbacks=[],this.onMessageCallbacks=[],this.onEndCallbacks=[],this.parser=new nt.ChunkParser,this.methodDefinition=Tt,this.props=gt,this.createTransport()}return _t.prototype.createTransport=function(){var Tt=this.props.host+"/"+this.methodDefinition.service.serviceName+"/"+this.methodDefinition.methodName,gt={methodDefinition:this.methodDefinition,debug:this.props.debug||!1,url:Tt,onHeaders:this.onTransportHeaders.bind(this),onChunk:this.onTransportChunk.bind(this),onEnd:this.onTransportEnd.bind(this)};this.props.transport?this.transport=this.props.transport(gt):this.transport=pt.makeDefaultTransport(gt)},_t.prototype.onTransportHeaders=function(Tt,gt){if(this.props.debug&&ft.debug("onHeaders",Tt,gt),this.closed)this.props.debug&&ft.debug("grpc.onHeaders received after request was closed - ignoring");else if(gt!==0){this.responseHeaders=Tt,this.props.debug&&ft.debug("onHeaders.responseHeaders",JSON.stringify(this.responseHeaders,null,2));var ht=yt(Tt);this.props.debug&&ft.debug("onHeaders.gRPCStatus",ht);var Et=ht&&ht>=0?ht:it.httpStatusToCode(gt);this.props.debug&&ft.debug("onHeaders.code",Et);var At=Tt.get("grpc-message")||[];if(this.props.debug&&ft.debug("onHeaders.gRPCMessage",At),this.rawOnHeaders(Tt),Et!==it.Code.OK){var Bt=this.decodeGRPCStatus(At[0]);this.rawOnError(Et,Bt,Tt)}}},_t.prototype.onTransportChunk=function(Tt){var gt=this;if(this.closed)this.props.debug&&ft.debug("grpc.onChunk received after request was closed - ignoring");else{var ht=[];try{ht=this.parser.parse(Tt)}catch(Et){return this.props.debug&&ft.debug("onChunk.parsing error",Et,Et.message),void this.rawOnError(it.Code.Internal,"parsing error: "+Et.message)}ht.forEach(function(Et){if(Et.chunkType===nt.ChunkType.MESSAGE){var At=gt.methodDefinition.responseType.deserializeBinary(Et.data);gt.rawOnMessage(At)}else Et.chunkType===nt.ChunkType.TRAILERS&&(gt.responseHeaders?(gt.responseTrailers=new et.Metadata(Et.trailers),gt.props.debug&&ft.debug("onChunk.trailers",gt.responseTrailers)):(gt.responseHeaders=new et.Metadata(Et.trailers),gt.rawOnHeaders(gt.responseHeaders)))})}},_t.prototype.onTransportEnd=function(){if(this.props.debug&&ft.debug("grpc.onEnd"),this.closed)this.props.debug&&ft.debug("grpc.onEnd received after request was closed - ignoring");else if(this.responseTrailers!==void 0){var Tt=yt(this.responseTrailers);if(Tt!==null){var gt=this.responseTrailers.get("grpc-message"),ht=this.decodeGRPCStatus(gt[0]);this.rawOnEnd(Tt,ht,this.responseTrailers)}else this.rawOnError(it.Code.Internal,"Response closed without grpc-status (Trailers provided)")}else{if(this.responseHeaders===void 0)return void this.rawOnError(it.Code.Unknown,"Response closed without headers");var Et=yt(this.responseHeaders),At=this.responseHeaders.get("grpc-message");if(this.props.debug&&ft.debug("grpc.headers only response ",Et,At),Et===null)return void this.rawOnEnd(it.Code.Unknown,"Response closed without grpc-status (Headers only)",this.responseHeaders);var Bt=this.decodeGRPCStatus(At[0]);this.rawOnEnd(Et,Bt,this.responseHeaders)}},_t.prototype.decodeGRPCStatus=function(Tt){if(!Tt)return"";try{return decodeURIComponent(Tt)}catch{return Tt}},_t.prototype.rawOnEnd=function(Tt,gt,ht){var Et=this;this.props.debug&&ft.debug("rawOnEnd",Tt,gt,ht),this.completed||(this.completed=!0,this.onEndCallbacks.forEach(function(At){if(!Et.closed)try{At(Tt,gt,ht)}catch(Bt){setTimeout(function(){throw Bt},0)}}))},_t.prototype.rawOnHeaders=function(Tt){this.props.debug&&ft.debug("rawOnHeaders",Tt),this.completed||this.onHeadersCallbacks.forEach(function(gt){try{gt(Tt)}catch(ht){setTimeout(function(){throw ht},0)}})},_t.prototype.rawOnError=function(Tt,gt,ht){var Et=this;ht===void 0&&(ht=new et.Metadata),this.props.debug&&ft.debug("rawOnError",Tt,gt),this.completed||(this.completed=!0,this.onEndCallbacks.forEach(function(At){if(!Et.closed)try{At(Tt,gt,ht)}catch(Bt){setTimeout(function(){throw Bt},0)}}))},_t.prototype.rawOnMessage=function(Tt){var gt=this;this.props.debug&&ft.debug("rawOnMessage",Tt.toObject()),this.completed||this.closed||this.onMessageCallbacks.forEach(function(ht){if(!gt.closed)try{ht(Tt)}catch(Et){setTimeout(function(){throw Et},0)}})},_t.prototype.onHeaders=function(Tt){this.onHeadersCallbacks.push(Tt)},_t.prototype.onMessage=function(Tt){this.onMessageCallbacks.push(Tt)},_t.prototype.onEnd=function(Tt){this.onEndCallbacks.push(Tt)},_t.prototype.start=function(Tt){if(this.started)throw new Error("Client already started - cannot .start()");this.started=!0;var gt=new et.Metadata(Tt||{});gt.set("content-type","application/grpc-web+proto"),gt.set("x-grpc-web","1"),this.transport.start(gt)},_t.prototype.send=function(Tt){if(!this.started)throw new Error("Client not started - .start() must be called before .send()");if(this.closed)throw new Error("Client already closed - cannot .send()");if(this.finishedSending)throw new Error("Client already finished sending - cannot .send()");if(!this.methodDefinition.requestStream&&this.sentFirstMessage)throw new Error("Message already sent for non-client-streaming method - cannot .send()");this.sentFirstMessage=!0;var gt=mt.frameRequest(Tt);this.transport.sendMessage(gt)},_t.prototype.finishSend=function(){if(!this.started)throw new Error("Client not started - .finishSend() must be called before .close()");if(this.closed)throw new Error("Client already closed - cannot .send()");if(this.finishedSending)throw new Error("Client already finished sending - cannot .finishSend()");this.finishedSending=!0,this.transport.finishSend()},_t.prototype.close=function(){if(!this.started)throw new Error("Client not started - .start() must be called before .close()");if(this.closed)throw new Error("Client already closed - cannot .close()");this.closed=!0,this.props.debug&&ft.debug("request.abort aborting request"),this.transport.cancel()},_t}();function yt(_t){var Tt=_t.get("grpc-status")||[];if(Tt.length>0)try{var gt=Tt[0];return parseInt(gt,10)}catch{return null}return null}},346:function(k,j){Object.defineProperty(j,"__esModule",{value:!0}),j.debug=void 0,j.debug=function(){for(var _e=[],et=0;et<arguments.length;et++)_e[et]=arguments[et];console.debug?console.debug.apply(null,_e):console.log.apply(null,_e)}},607:function(k,j,_e){Object.defineProperty(j,"__esModule",{value:!0}),j.grpc=void 0;var et,nt=_e(418),it=_e(57),ft=_e(229),pt=_e(540),mt=_e(210),St=_e(859),yt=_e(8),_t=_e(938),Tt=_e(35),gt=_e(934);(et=j.grpc||(j.grpc={})).setDefaultTransport=it.setDefaultTransportFactory,et.CrossBrowserHttpTransport=St.CrossBrowserHttpTransport,et.FetchReadableStreamTransport=ft.FetchReadableStreamTransport,et.XhrTransport=mt.XhrTransport,et.WebsocketTransport=pt.WebsocketTransport,et.Code=yt.Code,et.Metadata=nt.BrowserHeaders,et.client=function(ht,Et){return gt.client(ht,Et)},et.invoke=_t.invoke,et.unary=Tt.unary},938:function(k,j,_e){Object.defineProperty(j,"__esModule",{value:!0}),j.invoke=void 0;var et=_e(934);j.invoke=function(nt,it){if(nt.requestStream)throw new Error(".invoke cannot be used with client-streaming methods. Use .client instead.");var ft=et.client(nt,{host:it.host,transport:it.transport,debug:it.debug});return it.onHeaders&&ft.onHeaders(it.onHeaders),it.onMessage&&ft.onMessage(it.onMessage),it.onEnd&&ft.onEnd(it.onEnd),ft.start(it.metadata),ft.send(it.request),ft.finishSend(),{close:function(){ft.close()}}}},65:function(k,j,_e){Object.defineProperty(j,"__esModule",{value:!0}),j.Metadata=void 0;var et=_e(418);Object.defineProperty(j,"Metadata",{enumerable:!0,get:function(){return et.BrowserHeaders}})},57:function(k,j,_e){Object.defineProperty(j,"__esModule",{value:!0}),j.makeDefaultTransport=j.setDefaultTransportFactory=void 0;var et=_e(859),nt=function(it){return et.CrossBrowserHttpTransport({withCredentials:!1})(it)};j.setDefaultTransportFactory=function(it){nt=it},j.makeDefaultTransport=function(it){return nt(it)}},229:function(k,j,_e){var et=this&&this.__assign||function(){return(et=Object.assign||function(pt){for(var mt,St=1,yt=arguments.length;St<yt;St++)for(var _t in mt=arguments[St])Object.prototype.hasOwnProperty.call(mt,_t)&&(pt[_t]=mt[_t]);return pt}).apply(this,arguments)};Object.defineProperty(j,"__esModule",{value:!0}),j.detectFetchSupport=j.FetchReadableStreamTransport=void 0;var nt=_e(65),it=_e(346);j.FetchReadableStreamTransport=function(pt){return function(mt){return function(St,yt){return St.debug&&it.debug("fetchRequest",St),new ft(St,yt)}(mt,pt)}};var ft=function(){function pt(mt,St){this.cancelled=!1,this.controller=self.AbortController&&new AbortController,this.options=mt,this.init=St}return pt.prototype.pump=function(mt,St){var yt=this;if(this.reader=mt,this.cancelled)return this.options.debug&&it.debug("Fetch.pump.cancel at first pump"),void this.reader.cancel().catch(function(_t){yt.options.debug&&it.debug("Fetch.pump.reader.cancel exception",_t)});this.reader.read().then(function(_t){if(_t.done)return yt.options.onEnd(),St;yt.options.onChunk(_t.value),yt.pump(yt.reader,St)}).catch(function(_t){yt.cancelled?yt.options.debug&&it.debug("Fetch.catch - request cancelled"):(yt.cancelled=!0,yt.options.debug&&it.debug("Fetch.catch",_t.message),yt.options.onEnd(_t))})},pt.prototype.send=function(mt){var St=this;fetch(this.options.url,et(et({},this.init),{headers:this.metadata.toHeaders(),method:"POST",body:mt,signal:this.controller&&this.controller.signal})).then(function(yt){if(St.options.debug&&it.debug("Fetch.response",yt),St.options.onHeaders(new nt.Metadata(yt.headers),yt.status),!yt.body)return yt;St.pump(yt.body.getReader(),yt)}).catch(function(yt){St.cancelled?St.options.debug&&it.debug("Fetch.catch - request cancelled"):(St.cancelled=!0,St.options.debug&&it.debug("Fetch.catch",yt.message),St.options.onEnd(yt))})},pt.prototype.sendMessage=function(mt){this.send(mt)},pt.prototype.finishSend=function(){},pt.prototype.start=function(mt){this.metadata=mt},pt.prototype.cancel=function(){var mt=this;this.cancelled?this.options.debug&&it.debug("Fetch.cancel already cancelled"):(this.cancelled=!0,this.controller?(this.options.debug&&it.debug("Fetch.cancel.controller.abort"),this.controller.abort()):this.options.debug&&it.debug("Fetch.cancel.missing abort controller"),this.reader?(this.options.debug&&it.debug("Fetch.cancel.reader.cancel"),this.reader.cancel().catch(function(St){mt.options.debug&&it.debug("Fetch.cancel.reader.cancel exception",St)})):this.options.debug&&it.debug("Fetch.cancel before reader"))},pt}();j.detectFetchSupport=function(){return typeof Response<"u"&&Response.prototype.hasOwnProperty("body")&&typeof Headers=="function"}},859:function(k,j,_e){Object.defineProperty(j,"__esModule",{value:!0}),j.CrossBrowserHttpTransport=void 0;var et=_e(229),nt=_e(210);j.CrossBrowserHttpTransport=function(it){if(et.detectFetchSupport()){var ft={credentials:it.withCredentials?"include":"same-origin"};return et.FetchReadableStreamTransport(ft)}return nt.XhrTransport({withCredentials:it.withCredentials})}},210:function(k,j,_e){var et,nt=this&&this.__extends||(et=function(Tt,gt){return(et=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ht,Et){ht.__proto__=Et}||function(ht,Et){for(var At in Et)Object.prototype.hasOwnProperty.call(Et,At)&&(ht[At]=Et[At])})(Tt,gt)},function(Tt,gt){function ht(){this.constructor=Tt}et(Tt,gt),Tt.prototype=gt===null?Object.create(gt):(ht.prototype=gt.prototype,new ht)});Object.defineProperty(j,"__esModule",{value:!0}),j.stringToArrayBuffer=j.MozChunkedArrayBufferXHR=j.XHR=j.XhrTransport=void 0;var it=_e(65),ft=_e(346),pt=_e(849);j.XhrTransport=function(Tt){return function(gt){if(pt.detectMozXHRSupport())return new St(gt,Tt);if(pt.detectXHROverrideMimeTypeSupport())return new mt(gt,Tt);throw new Error("This environment's XHR implementation cannot support binary transfer.")}};var mt=function(){function Tt(gt,ht){this.options=gt,this.init=ht}return Tt.prototype.onProgressEvent=function(){this.options.debug&&ft.debug("XHR.onProgressEvent.length: ",this.xhr.response.length);var gt=this.xhr.response.substr(this.index);this.index=this.xhr.response.length;var ht=_t(gt);this.options.onChunk(ht)},Tt.prototype.onLoadEvent=function(){this.options.debug&&ft.debug("XHR.onLoadEvent"),this.options.onEnd()},Tt.prototype.onStateChange=function(){this.options.debug&&ft.debug("XHR.onStateChange",this.xhr.readyState),this.xhr.readyState===XMLHttpRequest.HEADERS_RECEIVED&&this.options.onHeaders(new it.Metadata(this.xhr.getAllResponseHeaders()),this.xhr.status)},Tt.prototype.sendMessage=function(gt){this.xhr.send(gt)},Tt.prototype.finishSend=function(){},Tt.prototype.start=function(gt){var ht=this;this.metadata=gt;var Et=new XMLHttpRequest;this.xhr=Et,Et.open("POST",this.options.url),this.configureXhr(),this.metadata.forEach(function(At,Bt){Et.setRequestHeader(At,Bt.join(", "))}),Et.withCredentials=!!this.init.withCredentials,Et.addEventListener("readystatechange",this.onStateChange.bind(this)),Et.addEventListener("progress",this.onProgressEvent.bind(this)),Et.addEventListener("loadend",this.onLoadEvent.bind(this)),Et.addEventListener("error",function(At){ht.options.debug&&ft.debug("XHR.error",At),ht.options.onEnd(At.error)})},Tt.prototype.configureXhr=function(){this.xhr.responseType="text",this.xhr.overrideMimeType("text/plain; charset=x-user-defined")},Tt.prototype.cancel=function(){this.options.debug&&ft.debug("XHR.abort"),this.xhr.abort()},Tt}();j.XHR=mt;var St=function(Tt){function gt(){return Tt!==null&&Tt.apply(this,arguments)||this}return nt(gt,Tt),gt.prototype.configureXhr=function(){this.options.debug&&ft.debug("MozXHR.configureXhr: setting responseType to 'moz-chunked-arraybuffer'"),this.xhr.responseType="moz-chunked-arraybuffer"},gt.prototype.onProgressEvent=function(){var ht=this.xhr.response;this.options.debug&&ft.debug("MozXHR.onProgressEvent: ",new Uint8Array(ht)),this.options.onChunk(new Uint8Array(ht))},gt}(mt);function yt(Tt,gt){var ht=Tt.charCodeAt(gt);if(ht>=55296&&ht<=56319){var Et=Tt.charCodeAt(gt+1);Et>=56320&&Et<=57343&&(ht=65536+(ht-55296<<10)+(Et-56320))}return ht}function _t(Tt){for(var gt=new Uint8Array(Tt.length),ht=0,Et=0;Et<Tt.length;Et++){var At=String.prototype.codePointAt?Tt.codePointAt(Et):yt(Tt,Et);gt[ht++]=255&At}return gt}j.MozChunkedArrayBufferXHR=St,j.stringToArrayBuffer=_t},849:function(k,j){var _e;function et(){if(_e!==void 0)return _e;if(XMLHttpRequest){_e=new XMLHttpRequest;try{_e.open("GET","https://localhost")}catch{}}return _e}function nt(it){var ft=et();if(!ft)return!1;try{return ft.responseType=it,ft.responseType===it}catch{}return!1}Object.defineProperty(j,"__esModule",{value:!0}),j.detectXHROverrideMimeTypeSupport=j.detectMozXHRSupport=j.xhrSupportsResponseType=void 0,j.xhrSupportsResponseType=nt,j.detectMozXHRSupport=function(){return typeof XMLHttpRequest<"u"&&nt("moz-chunked-arraybuffer")},j.detectXHROverrideMimeTypeSupport=function(){return typeof XMLHttpRequest<"u"&&XMLHttpRequest.prototype.hasOwnProperty("overrideMimeType")}},540:function(k,j,_e){Object.defineProperty(j,"__esModule",{value:!0}),j.WebsocketTransport=void 0;var et,nt=_e(346),it=_e(617);(function(pt){pt[pt.FINISH_SEND=1]="FINISH_SEND"})(et||(et={}));var ft=new Uint8Array([1]);j.WebsocketTransport=function(){return function(pt){return function(mt){mt.debug&&nt.debug("websocketRequest",mt);var St,yt=function(gt){if(gt.substr(0,8)==="https://")return"wss://"+gt.substr(8);if(gt.substr(0,7)==="http://")return"ws://"+gt.substr(7);throw new Error("Websocket transport constructed with non-https:// or http:// host.")}(mt.url),_t=[];function Tt(gt){if(gt===et.FINISH_SEND)St.send(ft);else{var ht=gt,Et=new Int8Array(ht.byteLength+1);Et.set(new Uint8Array([0])),Et.set(ht,1),St.send(Et)}}return{sendMessage:function(gt){St&&St.readyState!==St.CONNECTING?Tt(gt):_t.push(gt)},finishSend:function(){St&&St.readyState!==St.CONNECTING?Tt(et.FINISH_SEND):_t.push(et.FINISH_SEND)},start:function(gt){(St=new WebSocket(yt,["grpc-websockets"])).binaryType="arraybuffer",St.onopen=function(){var ht;mt.debug&&nt.debug("websocketRequest.onopen"),St.send((ht="",gt.forEach(function(Et,At){ht+=Et+": "+At.join(", ")+`\r
`}),it.encodeASCII(ht))),_t.forEach(function(Et){Tt(Et)})},St.onclose=function(ht){mt.debug&&nt.debug("websocketRequest.onclose",ht),mt.onEnd()},St.onerror=function(ht){mt.debug&&nt.debug("websocketRequest.onerror",ht)},St.onmessage=function(ht){mt.onChunk(new Uint8Array(ht.data))}},cancel:function(){mt.debug&&nt.debug("websocket.abort"),St.close()}}}(pt)}}},35:function(k,j,_e){Object.defineProperty(j,"__esModule",{value:!0}),j.unary=void 0;var et=_e(65),nt=_e(934);j.unary=function(it,ft){if(it.responseStream)throw new Error(".unary cannot be used with server-streaming methods. Use .invoke or .client instead.");if(it.requestStream)throw new Error(".unary cannot be used with client-streaming methods. Use .client instead.");var pt=null,mt=null,St=nt.client(it,{host:ft.host,transport:ft.transport,debug:ft.debug});return St.onHeaders(function(yt){pt=yt}),St.onMessage(function(yt){mt=yt}),St.onEnd(function(yt,_t,Tt){ft.onEnd({status:yt,statusMessage:_t,headers:pt||new et.Metadata,message:mt,trailers:Tt})}),St.start(ft.metadata),St.send(ft.request),St.finishSend(),{close:function(){St.close()}}}},882:function(k,j){Object.defineProperty(j,"__esModule",{value:!0}),j.frameRequest=void 0,j.frameRequest=function(_e){var et=_e.serializeBinary(),nt=new ArrayBuffer(et.byteLength+5);return new DataView(nt,1,4).setUint32(0,et.length,!1),new Uint8Array(nt,5).set(et),new Uint8Array(nt)}}},_={},function k(j){if(_[j])return _[j].exports;var _e=_[j]={exports:{}};return b[j].call(_e.exports,_e,_e.exports,k),_e.exports}(607);var b,_})})(grpcWebClient_umd);var grpcWebClient_umdExports=grpcWebClient_umd.exports;class AbortError extends Error{constructor(){super("The operation has been aborted"),this.message="The operation has been aborted",this.name="AbortError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,this.constructor)}}function isAbortError(a){return typeof a=="object"&&a!==null&&a.name==="AbortError"}function throwIfAborted(a){if(a.aborted)throw new AbortError}function rethrowAbortError(a){if(isAbortError(a))throw a}function catchAbortError(a){if(!isAbortError(a))throw a}function execute(a,c){return new Promise((b,_)=>{if(a.aborted){_(new AbortError);return}let k,j=!1;function _e(){j||(j=!0,k!=null&&k())}const et=c(nt=>{b(nt),_e()},nt=>{_(nt),_e()});if(!j){const nt=()=>{const it=et();it==null?_(new AbortError):it.then(()=>{_(new AbortError)},ft=>{_(ft)}),_e()};a.addEventListener("abort",nt),k=()=>{a.removeEventListener("abort",nt)}}})}function abortable(a,c){if(a.aborted){const b=()=>{};c.then(b,b)}return execute(a,(b,_)=>(c.then(b,_),()=>{}))}function delay$1(a,c){return execute(a,b=>{const _=typeof c=="number"?c:c.getTime()-Date.now(),k=setTimeout(b,_);return()=>{clearTimeout(k)}})}function forever(a){return execute(a,()=>()=>{})}function waitForEvent(a,c,b,_){return execute(a,k=>{let j,_e=!1;return j=listen(c,b,(...nt)=>{k(nt.length>1?nt:nt[0]),_e=!0,j!=null&&j()},_),_e&&j(),()=>{_e=!0,j!=null&&j()}})}function listen(a,c,b,_){if(isEventTarget(a))return a.addEventListener(c,b,_),()=>a.removeEventListener(c,b,_);if(isJQueryStyleEventEmitter(a))return a.on(c,b),()=>a.off(c,b);if(isNodeStyleEventEmitter(a))return a.addListener(c,b),()=>a.removeListener(c,b);throw new Error("Invalid event target")}function isNodeStyleEventEmitter(a){return isFunction$3(a.addListener)&&isFunction$3(a.removeListener)}function isJQueryStyleEventEmitter(a){return isFunction$3(a.on)&&isFunction$3(a.off)}function isEventTarget(a){return isFunction$3(a.addEventListener)&&isFunction$3(a.removeEventListener)}const isFunction$3=a=>typeof a=="function";var browser$3={exports:{}};const _global=typeof self<"u"?self:typeof window<"u"?window:void 0;if(!_global)throw new Error("Unable to find global scope. Are you sure this is running in the browser?");if(!_global.AbortController)throw new Error('Could not find "AbortController" in the global scope. You need to polyfill it first');browser$3.exports=_global.AbortController;browser$3.exports.default=_global.AbortController;var browserExports=browser$3.exports;const AbortController$1=getDefaultExportFromCjs$1(browserExports);function all(a,c){return new Promise((b,_)=>{if(a.aborted){_(new AbortError);return}const k=new AbortController$1,j=c(k.signal);if(j.length===0){b([]);return}const _e=()=>{k.abort()};a.addEventListener("abort",_e);let et;const nt=new Array(j.length);let it=0;function ft(){it+=1,it===j.length&&(a.removeEventListener("abort",_e),et!=null?_(et.reason):b(nt))}for(const[pt,mt]of j.entries())mt.then(St=>{nt[pt]=St,ft()},St=>{k.abort(),(et==null||!isAbortError(St)&&isAbortError(et.reason))&&(et={reason:St}),ft()})})}function race$2(a,c){return new Promise((b,_)=>{if(a.aborted){_(new AbortError);return}const k=new AbortController$1,j=c(k.signal),_e=()=>{k.abort()};a.addEventListener("abort",_e);let et=0;function nt(ft){k.abort(),et+=1,et===j.length&&(a.removeEventListener("abort",_e),ft.status==="fulfilled"?b(ft.value):_(ft.reason))}let it;for(const ft of j)ft.then(pt=>{it==null&&(it={status:"fulfilled",value:pt}),nt(it)},pt=>{(it==null||!isAbortError(pt)&&(it.status==="fulfilled"||isAbortError(it.reason)))&&(it={status:"rejected",reason:pt}),nt(it)})})}async function retry$1(a,c,b={}){const{baseMs:_=1e3,maxDelayMs:k=15e3,onError:j,maxAttempts:_e=1/0}=b;let et=0;const nt=()=>{et=-1};for(;;)try{return await c(a,et,nt)}catch(it){if(rethrowAbortError(it),et>=_e)throw it;let ft;if(et===-1)ft=0;else{const pt=Math.min(k,Math.pow(2,et)*_);ft=Math.round(pt*(1+Math.random())/2)}j&&j(it,et,ft),ft!==0&&await delay$1(a,ft),et+=1}}function spawn(a,c){if(a.aborted)return Promise.reject(new AbortError);const b=[],_=new AbortController$1,k=_.signal,j=()=>{_.abort()};a.addEventListener("abort",j);const _e=()=>{a.removeEventListener("abort",j)},et=new Set,nt=()=>{for(const pt of et)pt.abort()};k.addEventListener("abort",nt);const it=()=>{k.removeEventListener("abort",nt)};let ft=new Promise((pt,mt)=>{let St,yt;_t(Tt=>c(Tt,{defer(gt){b.push(gt)},fork:_t})).join().then(Tt=>{_.abort(),St={value:Tt}},Tt=>{_.abort(),(!isAbortError(Tt)||yt==null)&&(yt={error:Tt})});function _t(Tt){if(k.aborted)return{abort(){},async join(){throw new AbortError}};const gt=new AbortController$1,ht=gt.signal,Et=Tt(ht),At={abort(){gt.abort()},join:()=>Et};return et.add(At),Et.catch(catchAbortError).catch(Bt=>{yt={error:Bt},_.abort()}).finally(()=>{et.delete(At),et.size===0&&(yt!=null?mt(yt.error):pt(St.value))}),At}});return ft=ft.finally(()=>{_e(),it();let pt=Promise.resolve();for(let mt=b.length-1;mt>=0;mt--)pt=pt.finally(b[mt]);return pt}),ft}function run$1(a){const c=new AbortController$1,b=a(c.signal).catch(catchAbortError);return()=>(c.abort(),b)}const es=Object.freeze(Object.defineProperty({__proto__:null,AbortError,abortable,all,catchAbortError,delay:delay$1,execute,forever,isAbortError,race:race$2,rethrowAbortError,retry:retry$1,run:run$1,spawn,throwIfAborted,waitForEvent},Symbol.toStringTag,{value:"Module"})),require$$1$1=getAugmentedNamespace(es);var AsyncSink$1={};Object.defineProperty(AsyncSink$1,"__esModule",{value:!0});AsyncSink$1.AsyncSink=void 0;const ARRAY_VALUE="value",ARRAY_ERROR="error";class AsyncSink{constructor(){this._ended=!1,this._values=[],this._resolvers=[]}[Symbol.asyncIterator](){return this}write(c){this._push({type:ARRAY_VALUE,value:c})}error(c){this._push({type:ARRAY_ERROR,error:c})}_push(c){if(this._ended)throw new Error("AsyncSink already ended");if(this._resolvers.length>0){const{resolve:b,reject:_}=this._resolvers.shift();c.type===ARRAY_ERROR?_(c.error):b({done:!1,value:c.value})}else this._values.push(c)}next(){if(this._values.length>0){const{type:c,value:b,error:_}=this._values.shift();return c===ARRAY_ERROR?Promise.reject(_):Promise.resolve({done:!1,value:b})}return this._ended?Promise.resolve({done:!0}):new Promise((c,b)=>{this._resolvers.push({resolve:c,reject:b})})}end(){for(;this._resolvers.length>0;)this._resolvers.shift().resolve({done:!0});this._ended=!0}}AsyncSink$1.AsyncSink=AsyncSink;var isAsyncIterable$1={};Object.defineProperty(isAsyncIterable$1,"__esModule",{value:!0});isAsyncIterable$1.isAsyncIterable=void 0;function isAsyncIterable(a){return a!=null&&Symbol.asyncIterator in a}isAsyncIterable$1.isAsyncIterable=isAsyncIterable;var convertMetadata={},base64$2={exports:{}};(function(a,c){(function(b,_){a.exports=_()})(typeof self<"u"?self:typeof window<"u"?window:commonjsGlobal$1,function(){var b="3.7.2",_=b,k=typeof atob=="function",j=typeof btoa=="function",_e=typeof Buffer=="function",et=typeof TextDecoder=="function"?new TextDecoder:void 0,nt=typeof TextEncoder=="function"?new TextEncoder:void 0,it="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",ft=Array.prototype.slice.call(it),pt=function(sn){var vn={};return sn.forEach(function(Cn,Nn){return vn[Cn]=Nn}),vn}(ft),mt=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,St=String.fromCharCode.bind(String),yt=typeof Uint8Array.from=="function"?Uint8Array.from.bind(Uint8Array):function(sn,vn){return vn===void 0&&(vn=function(Cn){return Cn}),new Uint8Array(Array.prototype.slice.call(sn,0).map(vn))},_t=function(sn){return sn.replace(/=/g,"").replace(/[+\/]/g,function(vn){return vn=="+"?"-":"_"})},Tt=function(sn){return sn.replace(/[^A-Za-z0-9\+\/]/g,"")},gt=function(sn){for(var vn,Cn,Nn,fn,ut="",It=sn.length%3,Pt=0;Pt<sn.length;){if((Cn=sn.charCodeAt(Pt++))>255||(Nn=sn.charCodeAt(Pt++))>255||(fn=sn.charCodeAt(Pt++))>255)throw new TypeError("invalid character found");vn=Cn<<16|Nn<<8|fn,ut+=ft[vn>>18&63]+ft[vn>>12&63]+ft[vn>>6&63]+ft[vn&63]}return It?ut.slice(0,It-3)+"===".substring(It):ut},ht=j?function(sn){return btoa(sn)}:_e?function(sn){return Buffer.from(sn,"binary").toString("base64")}:gt,Et=_e?function(sn){return Buffer.from(sn).toString("base64")}:function(sn){for(var vn=4096,Cn=[],Nn=0,fn=sn.length;Nn<fn;Nn+=vn)Cn.push(St.apply(null,sn.subarray(Nn,Nn+vn)));return ht(Cn.join(""))},At=function(sn,vn){return vn===void 0&&(vn=!1),vn?_t(Et(sn)):Et(sn)},Bt=function(sn){if(sn.length<2){var vn=sn.charCodeAt(0);return vn<128?sn:vn<2048?St(192|vn>>>6)+St(128|vn&63):St(224|vn>>>12&15)+St(128|vn>>>6&63)+St(128|vn&63)}else{var vn=65536+(sn.charCodeAt(0)-55296)*1024+(sn.charCodeAt(1)-56320);return St(240|vn>>>18&7)+St(128|vn>>>12&63)+St(128|vn>>>6&63)+St(128|vn&63)}},qt=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,zt=function(sn){return sn.replace(qt,Bt)},Ht=_e?function(sn){return Buffer.from(sn,"utf8").toString("base64")}:nt?function(sn){return Et(nt.encode(sn))}:function(sn){return ht(zt(sn))},ct=function(sn,vn){return vn===void 0&&(vn=!1),vn?_t(Ht(sn)):Ht(sn)},dt=function(sn){return ct(sn,!0)},lt=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,kt=function(sn){switch(sn.length){case 4:var vn=(7&sn.charCodeAt(0))<<18|(63&sn.charCodeAt(1))<<12|(63&sn.charCodeAt(2))<<6|63&sn.charCodeAt(3),Cn=vn-65536;return St((Cn>>>10)+55296)+St((Cn&1023)+56320);case 3:return St((15&sn.charCodeAt(0))<<12|(63&sn.charCodeAt(1))<<6|63&sn.charCodeAt(2));default:return St((31&sn.charCodeAt(0))<<6|63&sn.charCodeAt(1))}},Lt=function(sn){return sn.replace(lt,kt)},Jt=function(sn){if(sn=sn.replace(/\s+/g,""),!mt.test(sn))throw new TypeError("malformed base64.");sn+="==".slice(2-(sn.length&3));for(var vn,Cn="",Nn,fn,ut=0;ut<sn.length;)vn=pt[sn.charAt(ut++)]<<18|pt[sn.charAt(ut++)]<<12|(Nn=pt[sn.charAt(ut++)])<<6|(fn=pt[sn.charAt(ut++)]),Cn+=Nn===64?St(vn>>16&255):fn===64?St(vn>>16&255,vn>>8&255):St(vn>>16&255,vn>>8&255,vn&255);return Cn},en=k?function(sn){return atob(Tt(sn))}:_e?function(sn){return Buffer.from(sn,"base64").toString("binary")}:Jt,Qt=_e?function(sn){return yt(Buffer.from(sn,"base64"))}:function(sn){return yt(en(sn),function(vn){return vn.charCodeAt(0)})},xt=function(sn){return Qt(Sn(sn))},rn=_e?function(sn){return Buffer.from(sn,"base64").toString("utf8")}:et?function(sn){return et.decode(Qt(sn))}:function(sn){return Lt(en(sn))},Sn=function(sn){return Tt(sn.replace(/[-_]/g,function(vn){return vn=="-"?"+":"/"}))},bn=function(sn){return rn(Sn(sn))},kn=function(sn){if(typeof sn!="string")return!1;var vn=sn.replace(/\s+/g,"").replace(/={0,2}$/,"");return!/[^\s0-9a-zA-Z\+/]/.test(vn)||!/[^\s0-9a-zA-Z\-_]/.test(vn)},_n=function(sn){return{value:sn,enumerable:!1,writable:!0,configurable:!0}},tn=function(){var sn=function(vn,Cn){return Object.defineProperty(String.prototype,vn,_n(Cn))};sn("fromBase64",function(){return bn(this)}),sn("toBase64",function(vn){return ct(this,vn)}),sn("toBase64URI",function(){return ct(this,!0)}),sn("toBase64URL",function(){return ct(this,!0)}),sn("toUint8Array",function(){return xt(this)})},pn=function(){var sn=function(vn,Cn){return Object.defineProperty(Uint8Array.prototype,vn,_n(Cn))};sn("toBase64",function(vn){return At(this,vn)}),sn("toBase64URI",function(){return At(this,!0)}),sn("toBase64URL",function(){return At(this,!0)})},yn=function(){tn(),pn()},In={version:b,VERSION:_,atob:en,atobPolyfill:Jt,btoa:ht,btoaPolyfill:gt,fromBase64:bn,toBase64:ct,encode:ct,encodeURI:dt,encodeURL:dt,utob:zt,btou:Lt,decode:bn,isValid:kn,fromUint8Array:At,toUint8Array:xt,extendString:tn,extendUint8Array:pn,extendBuiltins:yn};return In.Base64={},Object.keys(In).forEach(function(sn){return In.Base64[sn]=In[sn]}),In})})(base64$2);var base64Exports=base64$2.exports;Object.defineProperty(convertMetadata,"__esModule",{value:!0});convertMetadata.convertMetadataFromGrpcWeb=convertMetadata.convertMetadataToGrpcWeb=void 0;const grpc_web_1$4=grpcWebClient_umdExports,nice_grpc_common_1$5=lib,js_base64_1=base64Exports;function convertMetadataToGrpcWeb(a){const c=new grpc_web_1$4.grpc.Metadata;for(const[b,_]of a)for(const k of _)c.append(b,typeof k=="string"?k:js_base64_1.Base64.fromUint8Array(k));return c}convertMetadata.convertMetadataToGrpcWeb=convertMetadataToGrpcWeb;function convertMetadataFromGrpcWeb(a){const c=(0,nice_grpc_common_1$5.Metadata)();for(const[b,_]of Object.entries(a.headersMap))c.set(b,b.endsWith("-bin")?_.map(k=>js_base64_1.Base64.toUint8Array(k)):_);return c}convertMetadata.convertMetadataFromGrpcWeb=convertMetadataFromGrpcWeb;var __importDefault$h=commonjsGlobal$1&&commonjsGlobal$1.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(createBidiStreamingMethod$1,"__esModule",{value:!0});createBidiStreamingMethod$1.createBidiStreamingMethod=void 0;const nice_grpc_common_1$4=lib,grpc_web_1$3=grpcWebClient_umdExports,abort_controller_x_1$4=require$$1$1,node_abort_controller_1$3=__importDefault$h(browserExports),AsyncSink_1$1=AsyncSink$1,service_definitions_1$4=serviceDefinitions,isAsyncIterable_1$3=isAsyncIterable$1,convertMetadata_1$3=convertMetadata;function createBidiStreamingMethod(a,c,b,_){const k=(0,service_definitions_1$4.toGrpcWebMethodDefinition)(a),j={path:a.path,requestStream:a.requestStream,responseStream:a.responseStream,options:a.options};async function*_e(nt,it){if(!(0,isAsyncIterable_1$3.isAsyncIterable)(nt))throw new Error("A middleware passed invalid request to next(): expected a single message for bidirectional streaming method");const{metadata:ft=(0,nice_grpc_common_1$4.Metadata)(),signal:pt=new node_abort_controller_1$3.default().signal,onHeader:mt,onTrailer:St}=it,yt=new node_abort_controller_1$3.default,_t=new AsyncSink_1$1.AsyncSink,Tt=grpc_web_1$3.grpc.client(k,{host:c.address,transport:c.transport});Tt.onHeaders(Et=>{mt==null||mt((0,convertMetadata_1$3.convertMetadataFromGrpcWeb)(Et))}),Tt.onMessage(Et=>{_t.write(Et)}),Tt.onEnd((Et,At,Bt)=>{St==null||St((0,convertMetadata_1$3.convertMetadataFromGrpcWeb)(Bt)),Et===grpc_web_1$3.grpc.Code.OK?_t.end():_t.error(new nice_grpc_common_1$4.ClientError(a.path,+Et,At))}),Tt.start((0,convertMetadata_1$3.convertMetadataToGrpcWeb)(ft));let gt;pipeRequest$1(yt.signal,nt,Tt,a).then(()=>{Tt.finishSend()},Et=>{(0,abort_controller_x_1$4.isAbortError)(Et)||(gt=Et,Tt.close(),_t.end())});const ht=()=>{_t.error(new abort_controller_x_1$4.AbortError),yt.abort(),Tt.close()};pt.addEventListener("abort",ht);try{yield*_t}finally{if(yt.abort(),pt.removeEventListener("abort",ht),(0,abort_controller_x_1$4.throwIfAborted)(pt),gt)throw gt}}const et=b==null?_e:(nt,it)=>b({method:j,requestStream:!0,request:nt,responseStream:!0,next:_e},it);return(nt,it)=>{const pt=et(nt,{..._,...it})[Symbol.asyncIterator]();return{[Symbol.asyncIterator](){return{async next(){const mt=await pt.next();return mt.done&&mt.value!=null?await pt.throw(new Error("A middleware returned a message, but expected to return void for bidirectional streaming method")):mt},return(){return pt.return()},throw(mt){return pt.throw(mt)}}}}}}createBidiStreamingMethod$1.createBidiStreamingMethod=createBidiStreamingMethod;async function pipeRequest$1(a,c,b,_){for await(const k of c)(0,abort_controller_x_1$4.throwIfAborted)(a),b.send({serializeBinary:()=>_.requestSerialize(k)})}var createClientStreamingMethod$1={},__importDefault$g=commonjsGlobal$1&&commonjsGlobal$1.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(createClientStreamingMethod$1,"__esModule",{value:!0});createClientStreamingMethod$1.createClientStreamingMethod=void 0;const nice_grpc_common_1$3=lib,grpc_web_1$2=grpcWebClient_umdExports,abort_controller_x_1$3=require$$1$1,node_abort_controller_1$2=__importDefault$g(browserExports),service_definitions_1$3=serviceDefinitions,isAsyncIterable_1$2=isAsyncIterable$1,convertMetadata_1$2=convertMetadata;function createClientStreamingMethod(a,c,b,_){const k=(0,service_definitions_1$3.toGrpcWebMethodDefinition)(a),j={path:a.path,requestStream:a.requestStream,responseStream:a.responseStream,options:a.options};async function*_e(nt,it){if(!(0,isAsyncIterable_1$2.isAsyncIterable)(nt))throw new Error("A middleware passed invalid request to next(): expected a single message for client streaming method");const{metadata:ft=(0,nice_grpc_common_1$3.Metadata)(),signal:pt=new node_abort_controller_1$2.default().signal,onHeader:mt,onTrailer:St}=it;return await(0,abort_controller_x_1$3.execute)(pt,(yt,_t)=>{const Tt=new node_abort_controller_1$2.default;let gt;const ht=grpc_web_1$2.grpc.client(k,{host:c.address,transport:c.transport});return ht.onHeaders(Et=>{mt==null||mt((0,convertMetadata_1$2.convertMetadataFromGrpcWeb)(Et))}),ht.onMessage(Et=>{gt=Et}),ht.onEnd((Et,At,Bt)=>{St==null||St((0,convertMetadata_1$2.convertMetadataFromGrpcWeb)(Bt)),Tt.abort(),Et===grpc_web_1$2.grpc.Code.OK?yt(gt):_t(new nice_grpc_common_1$3.ClientError(a.path,+Et,At))}),ht.start((0,convertMetadata_1$2.convertMetadataToGrpcWeb)(ft)),pipeRequest(Tt.signal,nt,ht,a).then(()=>{ht.finishSend()},Et=>{(0,abort_controller_x_1$3.isAbortError)(Et)||(_t(Et),ht.close())}),()=>{Tt.abort(),ht.close()}})}const et=b==null?_e:(nt,it)=>b({method:j,requestStream:!0,request:nt,responseStream:!1,next:_e},it);return async(nt,it)=>{const pt=et(nt,{..._,...it})[Symbol.asyncIterator]();let mt=await pt.next();for(;;){if(!mt.done){mt=await pt.throw(new Error("A middleware yielded a message, but expected to only return a message for client streaming method"));continue}if(mt.value==null){mt=await pt.throw(new Error("A middleware returned void, but expected to return a message for client streaming method"));continue}return mt.value}}}createClientStreamingMethod$1.createClientStreamingMethod=createClientStreamingMethod;async function pipeRequest(a,c,b,_){for await(const k of c)(0,abort_controller_x_1$3.throwIfAborted)(a),b.send({serializeBinary:()=>_.requestSerialize(k)})}var createServerStreamingMethod$1={},__importDefault$f=commonjsGlobal$1&&commonjsGlobal$1.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(createServerStreamingMethod$1,"__esModule",{value:!0});createServerStreamingMethod$1.createServerStreamingMethod=void 0;const grpc_web_1$1=grpcWebClient_umdExports,abort_controller_x_1$2=require$$1$1,AsyncSink_1=AsyncSink$1,nice_grpc_common_1$2=lib,node_abort_controller_1$1=__importDefault$f(browserExports),service_definitions_1$2=serviceDefinitions,convertMetadata_1$1=convertMetadata,isAsyncIterable_1$1=isAsyncIterable$1;function createServerStreamingMethod(a,c,b,_){const k=(0,service_definitions_1$2.toGrpcWebMethodDefinition)(a),j={path:a.path,requestStream:a.requestStream,responseStream:a.responseStream,options:a.options};async function*_e(nt,it){if((0,isAsyncIterable_1$1.isAsyncIterable)(nt))throw new Error("A middleware passed invalid request to next(): expected a single message for server streaming method");const{metadata:ft=(0,nice_grpc_common_1$2.Metadata)(),signal:pt=new node_abort_controller_1$1.default().signal,onHeader:mt,onTrailer:St}=it,yt=new AsyncSink_1.AsyncSink,_t=grpc_web_1$1.grpc.client(k,{host:c.address,transport:c.transport});_t.onHeaders(gt=>{mt==null||mt((0,convertMetadata_1$1.convertMetadataFromGrpcWeb)(gt))}),_t.onMessage(gt=>{yt.write(gt)}),_t.onEnd((gt,ht,Et)=>{St==null||St((0,convertMetadata_1$1.convertMetadataFromGrpcWeb)(Et)),gt===grpc_web_1$1.grpc.Code.OK?yt.end():yt.error(new nice_grpc_common_1$2.ClientError(a.path,+gt,ht))}),_t.start((0,convertMetadata_1$1.convertMetadataToGrpcWeb)(ft)),_t.send({serializeBinary:()=>a.requestSerialize(nt)}),_t.finishSend();const Tt=()=>{yt.error(new abort_controller_x_1$2.AbortError),_t.close()};pt.addEventListener("abort",Tt);try{yield*yt}finally{pt.removeEventListener("abort",Tt),(0,abort_controller_x_1$2.throwIfAborted)(pt)}}const et=b==null?_e:(nt,it)=>b({method:j,requestStream:!1,request:nt,responseStream:!0,next:_e},it);return(nt,it)=>{const pt=et(nt,{..._,...it})[Symbol.asyncIterator]();return{[Symbol.asyncIterator](){return{async next(){const mt=await pt.next();return mt.done&&mt.value!=null?await pt.throw(new Error("A middleware returned a message, but expected to return void for server streaming method")):mt},return(){return pt.return()},throw(mt){return pt.throw(mt)}}}}}}createServerStreamingMethod$1.createServerStreamingMethod=createServerStreamingMethod;var createUnaryMethod$1={},__importDefault$e=commonjsGlobal$1&&commonjsGlobal$1.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(createUnaryMethod$1,"__esModule",{value:!0});createUnaryMethod$1.createUnaryMethod=void 0;const nice_grpc_common_1$1=lib,grpc_web_1=grpcWebClient_umdExports,abort_controller_x_1$1=require$$1$1,node_abort_controller_1=__importDefault$e(browserExports),service_definitions_1$1=serviceDefinitions,isAsyncIterable_1=isAsyncIterable$1,convertMetadata_1=convertMetadata;function createUnaryMethod(a,c,b,_){const k=(0,service_definitions_1$1.toGrpcWebMethodDefinition)(a),j={path:a.path,requestStream:a.requestStream,responseStream:a.responseStream,options:a.options};async function*_e(nt,it){if((0,isAsyncIterable_1.isAsyncIterable)(nt))throw new Error("A middleware passed invalid request to next(): expected a single message for unary method");const{metadata:ft=(0,nice_grpc_common_1$1.Metadata)(),signal:pt=new node_abort_controller_1.default().signal,onHeader:mt,onTrailer:St}=it;return await(0,abort_controller_x_1$1.execute)(pt,(yt,_t)=>{let Tt;const gt=grpc_web_1.grpc.client(k,{host:c.address,transport:c.transport});return gt.onHeaders(ht=>{mt==null||mt((0,convertMetadata_1.convertMetadataFromGrpcWeb)(ht))}),gt.onMessage(ht=>{Tt=ht}),gt.onEnd((ht,Et,At)=>{St==null||St((0,convertMetadata_1.convertMetadataFromGrpcWeb)(At)),ht===grpc_web_1.grpc.Code.OK?yt(Tt):_t(new nice_grpc_common_1$1.ClientError(a.path,+ht,Et))}),gt.start((0,convertMetadata_1.convertMetadataToGrpcWeb)(ft)),gt.send({serializeBinary:()=>a.requestSerialize(nt)}),gt.finishSend(),()=>{gt.close()}})}const et=b==null?_e:(nt,it)=>b({method:j,requestStream:!1,request:nt,responseStream:!1,next:_e},it);return async(nt,it)=>{const pt=et(nt,{..._,...it})[Symbol.asyncIterator]();let mt=await pt.next();for(;;){if(!mt.done){mt=await pt.throw(new Error("A middleware yielded a message, but expected to only return a message for unary method"));continue}if(mt.value==null){mt=await pt.throw(new Error("A middleware returned void, but expected to return a message for unary method"));continue}return mt.value}}}createUnaryMethod$1.createUnaryMethod=createUnaryMethod;Object.defineProperty(ClientFactory,"__esModule",{value:!0});ClientFactory.createClient=ClientFactory.createClientFactory=void 0;const nice_grpc_common_1=lib,service_definitions_1=serviceDefinitions,createBidiStreamingMethod_1=createBidiStreamingMethod$1,createClientStreamingMethod_1=createClientStreamingMethod$1,createServerStreamingMethod_1=createServerStreamingMethod$1,createUnaryMethod_1=createUnaryMethod$1;function createClientFactory(){return createClientFactoryWithMiddleware()}ClientFactory.createClientFactory=createClientFactory;function createClient(a,c,b){return createClientFactory().create(a,c,b)}ClientFactory.createClient=createClient;function createClientFactoryWithMiddleware(a){return{use(c){return createClientFactoryWithMiddleware(a==null?c:(0,nice_grpc_common_1.composeClientMiddleware)(a,c))},create(c,b,_={}){const k={},j=Object.entries((0,service_definitions_1.normalizeServiceDefinition)(c));for(const[_e,et]of j){const nt={..._["*"],..._[_e]};et.requestStream?et.responseStream?k[_e]=(0,createBidiStreamingMethod_1.createBidiStreamingMethod)(et,b,a,nt):k[_e]=(0,createClientStreamingMethod_1.createClientStreamingMethod)(et,b,a,nt):et.responseStream?k[_e]=(0,createServerStreamingMethod_1.createServerStreamingMethod)(et,b,a,nt):k[_e]=(0,createUnaryMethod_1.createUnaryMethod)(et,b,a,nt)}return k}}}var Client={};Object.defineProperty(Client,"__esModule",{value:!0});(function(a){var c=commonjsGlobal$1&&commonjsGlobal$1.__createBinding||(Object.create?function(k,j,_e,et){et===void 0&&(et=_e);var nt=Object.getOwnPropertyDescriptor(j,_e);(!nt||("get"in nt?!j.__esModule:nt.writable||nt.configurable))&&(nt={enumerable:!0,get:function(){return j[_e]}}),Object.defineProperty(k,et,nt)}:function(k,j,_e,et){et===void 0&&(et=_e),k[et]=j[_e]}),b=commonjsGlobal$1&&commonjsGlobal$1.__exportStar||function(k,j){for(var _e in k)_e!=="default"&&!Object.prototype.hasOwnProperty.call(j,_e)&&c(j,k,_e)};Object.defineProperty(a,"__esModule",{value:!0}),a.Status=a.Metadata=a.composeClientMiddleware=a.ClientError=void 0;var _=lib;Object.defineProperty(a,"ClientError",{enumerable:!0,get:function(){return _.ClientError}}),Object.defineProperty(a,"composeClientMiddleware",{enumerable:!0,get:function(){return _.composeClientMiddleware}}),Object.defineProperty(a,"Metadata",{enumerable:!0,get:function(){return _.Metadata}}),Object.defineProperty(a,"Status",{enumerable:!0,get:function(){return _.Status}}),b(serviceDefinitions,a),b(channel,a),b(ClientFactory,a),b(Client,a)})(lib$1);var dist$2={},api$3={},umd={exports:{}};(function(a,c){var b=function(_){Object.defineProperty(_,"__esModule",{value:!0}),_.default=void 0;/**
 * @license
 * Copyright 2009 The Closure Library Authors
 * Copyright 2020 Daniel Wirtz / The long.js Authors.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * SPDX-License-Identifier: Apache-2.0
 */var k=null;try{k=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function j(Qt,xt,rn){this.low=Qt|0,this.high=xt|0,this.unsigned=!!rn}j.prototype.__isLong__,Object.defineProperty(j.prototype,"__isLong__",{value:!0});function _e(Qt){return(Qt&&Qt.__isLong__)===!0}function et(Qt){var xt=Math.clz32(Qt&-Qt);return Qt?31-xt:xt}j.isLong=_e;var nt={},it={};function ft(Qt,xt){var rn,Sn,bn;return xt?(Qt>>>=0,(bn=0<=Qt&&Qt<256)&&(Sn=it[Qt],Sn)?Sn:(rn=mt(Qt,0,!0),bn&&(it[Qt]=rn),rn)):(Qt|=0,(bn=-128<=Qt&&Qt<128)&&(Sn=nt[Qt],Sn)?Sn:(rn=mt(Qt,Qt<0?-1:0,!1),bn&&(nt[Qt]=rn),rn))}j.fromInt=ft;function pt(Qt,xt){if(isNaN(Qt))return xt?zt:qt;if(xt){if(Qt<0)return zt;if(Qt>=Et)return kt}else{if(Qt<=-At)return Lt;if(Qt+1>=At)return lt}return Qt<0?pt(-Qt,xt).neg():mt(Qt%ht|0,Qt/ht|0,xt)}j.fromNumber=pt;function mt(Qt,xt,rn){return new j(Qt,xt,rn)}j.fromBits=mt;var St=Math.pow;function yt(Qt,xt,rn){if(Qt.length===0)throw Error("empty string");if(typeof xt=="number"?(rn=xt,xt=!1):xt=!!xt,Qt==="NaN"||Qt==="Infinity"||Qt==="+Infinity"||Qt==="-Infinity")return xt?zt:qt;if(rn=rn||10,rn<2||36<rn)throw RangeError("radix");var Sn;if((Sn=Qt.indexOf("-"))>0)throw Error("interior hyphen");if(Sn===0)return yt(Qt.substring(1),xt,rn).neg();for(var bn=pt(St(rn,8)),kn=qt,_n=0;_n<Qt.length;_n+=8){var tn=Math.min(8,Qt.length-_n),pn=parseInt(Qt.substring(_n,_n+tn),rn);if(tn<8){var yn=pt(St(rn,tn));kn=kn.mul(yn).add(pt(pn))}else kn=kn.mul(bn),kn=kn.add(pt(pn))}return kn.unsigned=xt,kn}j.fromString=yt;function _t(Qt,xt){return typeof Qt=="number"?pt(Qt,xt):typeof Qt=="string"?yt(Qt,xt):mt(Qt.low,Qt.high,typeof xt=="boolean"?xt:Qt.unsigned)}j.fromValue=_t;var Tt=65536,gt=1<<24,ht=Tt*Tt,Et=ht*ht,At=Et/2,Bt=ft(gt),qt=ft(0);j.ZERO=qt;var zt=ft(0,!0);j.UZERO=zt;var Ht=ft(1);j.ONE=Ht;var ct=ft(1,!0);j.UONE=ct;var dt=ft(-1);j.NEG_ONE=dt;var lt=mt(-1,2147483647,!1);j.MAX_VALUE=lt;var kt=mt(-1,-1,!0);j.MAX_UNSIGNED_VALUE=kt;var Lt=mt(0,-2147483648,!1);j.MIN_VALUE=Lt;var Jt=j.prototype;Jt.toInt=function(){return this.unsigned?this.low>>>0:this.low},Jt.toNumber=function(){return this.unsigned?(this.high>>>0)*ht+(this.low>>>0):this.high*ht+(this.low>>>0)},Jt.toString=function(xt){if(xt=xt||10,xt<2||36<xt)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(Lt)){var rn=pt(xt),Sn=this.div(rn),bn=Sn.mul(rn).sub(this);return Sn.toString(xt)+bn.toInt().toString(xt)}else return"-"+this.neg().toString(xt);for(var kn=pt(St(xt,6),this.unsigned),_n=this,tn="";;){var pn=_n.div(kn),yn=_n.sub(pn.mul(kn)).toInt()>>>0,In=yn.toString(xt);if(_n=pn,_n.isZero())return In+tn;for(;In.length<6;)In="0"+In;tn=""+In+tn}},Jt.getHighBits=function(){return this.high},Jt.getHighBitsUnsigned=function(){return this.high>>>0},Jt.getLowBits=function(){return this.low},Jt.getLowBitsUnsigned=function(){return this.low>>>0},Jt.getNumBitsAbs=function(){if(this.isNegative())return this.eq(Lt)?64:this.neg().getNumBitsAbs();for(var xt=this.high!=0?this.high:this.low,rn=31;rn>0&&!(xt&1<<rn);rn--);return this.high!=0?rn+33:rn+1},Jt.isZero=function(){return this.high===0&&this.low===0},Jt.eqz=Jt.isZero,Jt.isNegative=function(){return!this.unsigned&&this.high<0},Jt.isPositive=function(){return this.unsigned||this.high>=0},Jt.isOdd=function(){return(this.low&1)===1},Jt.isEven=function(){return(this.low&1)===0},Jt.equals=function(xt){return _e(xt)||(xt=_t(xt)),this.unsigned!==xt.unsigned&&this.high>>>31===1&&xt.high>>>31===1?!1:this.high===xt.high&&this.low===xt.low},Jt.eq=Jt.equals,Jt.notEquals=function(xt){return!this.eq(xt)},Jt.neq=Jt.notEquals,Jt.ne=Jt.notEquals,Jt.lessThan=function(xt){return this.comp(xt)<0},Jt.lt=Jt.lessThan,Jt.lessThanOrEqual=function(xt){return this.comp(xt)<=0},Jt.lte=Jt.lessThanOrEqual,Jt.le=Jt.lessThanOrEqual,Jt.greaterThan=function(xt){return this.comp(xt)>0},Jt.gt=Jt.greaterThan,Jt.greaterThanOrEqual=function(xt){return this.comp(xt)>=0},Jt.gte=Jt.greaterThanOrEqual,Jt.ge=Jt.greaterThanOrEqual,Jt.compare=function(xt){if(_e(xt)||(xt=_t(xt)),this.eq(xt))return 0;var rn=this.isNegative(),Sn=xt.isNegative();return rn&&!Sn?-1:!rn&&Sn?1:this.unsigned?xt.high>>>0>this.high>>>0||xt.high===this.high&&xt.low>>>0>this.low>>>0?-1:1:this.sub(xt).isNegative()?-1:1},Jt.comp=Jt.compare,Jt.negate=function(){return!this.unsigned&&this.eq(Lt)?Lt:this.not().add(Ht)},Jt.neg=Jt.negate,Jt.add=function(xt){_e(xt)||(xt=_t(xt));var rn=this.high>>>16,Sn=this.high&65535,bn=this.low>>>16,kn=this.low&65535,_n=xt.high>>>16,tn=xt.high&65535,pn=xt.low>>>16,yn=xt.low&65535,In=0,sn=0,vn=0,Cn=0;return Cn+=kn+yn,vn+=Cn>>>16,Cn&=65535,vn+=bn+pn,sn+=vn>>>16,vn&=65535,sn+=Sn+tn,In+=sn>>>16,sn&=65535,In+=rn+_n,In&=65535,mt(vn<<16|Cn,In<<16|sn,this.unsigned)},Jt.subtract=function(xt){return _e(xt)||(xt=_t(xt)),this.add(xt.neg())},Jt.sub=Jt.subtract,Jt.multiply=function(xt){if(this.isZero())return this;if(_e(xt)||(xt=_t(xt)),k){var rn=k.mul(this.low,this.high,xt.low,xt.high);return mt(rn,k.get_high(),this.unsigned)}if(xt.isZero())return this.unsigned?zt:qt;if(this.eq(Lt))return xt.isOdd()?Lt:qt;if(xt.eq(Lt))return this.isOdd()?Lt:qt;if(this.isNegative())return xt.isNegative()?this.neg().mul(xt.neg()):this.neg().mul(xt).neg();if(xt.isNegative())return this.mul(xt.neg()).neg();if(this.lt(Bt)&&xt.lt(Bt))return pt(this.toNumber()*xt.toNumber(),this.unsigned);var Sn=this.high>>>16,bn=this.high&65535,kn=this.low>>>16,_n=this.low&65535,tn=xt.high>>>16,pn=xt.high&65535,yn=xt.low>>>16,In=xt.low&65535,sn=0,vn=0,Cn=0,Nn=0;return Nn+=_n*In,Cn+=Nn>>>16,Nn&=65535,Cn+=kn*In,vn+=Cn>>>16,Cn&=65535,Cn+=_n*yn,vn+=Cn>>>16,Cn&=65535,vn+=bn*In,sn+=vn>>>16,vn&=65535,vn+=kn*yn,sn+=vn>>>16,vn&=65535,vn+=_n*pn,sn+=vn>>>16,vn&=65535,sn+=Sn*In+bn*yn+kn*pn+_n*tn,sn&=65535,mt(Cn<<16|Nn,sn<<16|vn,this.unsigned)},Jt.mul=Jt.multiply,Jt.divide=function(xt){if(_e(xt)||(xt=_t(xt)),xt.isZero())throw Error("division by zero");if(k){if(!this.unsigned&&this.high===-2147483648&&xt.low===-1&&xt.high===-1)return this;var rn=(this.unsigned?k.div_u:k.div_s)(this.low,this.high,xt.low,xt.high);return mt(rn,k.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?zt:qt;var Sn,bn,kn;if(this.unsigned){if(xt.unsigned||(xt=xt.toUnsigned()),xt.gt(this))return zt;if(xt.gt(this.shru(1)))return ct;kn=zt}else{if(this.eq(Lt)){if(xt.eq(Ht)||xt.eq(dt))return Lt;if(xt.eq(Lt))return Ht;var _n=this.shr(1);return Sn=_n.div(xt).shl(1),Sn.eq(qt)?xt.isNegative()?Ht:dt:(bn=this.sub(xt.mul(Sn)),kn=Sn.add(bn.div(xt)),kn)}else if(xt.eq(Lt))return this.unsigned?zt:qt;if(this.isNegative())return xt.isNegative()?this.neg().div(xt.neg()):this.neg().div(xt).neg();if(xt.isNegative())return this.div(xt.neg()).neg();kn=qt}for(bn=this;bn.gte(xt);){Sn=Math.max(1,Math.floor(bn.toNumber()/xt.toNumber()));for(var tn=Math.ceil(Math.log(Sn)/Math.LN2),pn=tn<=48?1:St(2,tn-48),yn=pt(Sn),In=yn.mul(xt);In.isNegative()||In.gt(bn);)Sn-=pn,yn=pt(Sn,this.unsigned),In=yn.mul(xt);yn.isZero()&&(yn=Ht),kn=kn.add(yn),bn=bn.sub(In)}return kn},Jt.div=Jt.divide,Jt.modulo=function(xt){if(_e(xt)||(xt=_t(xt)),k){var rn=(this.unsigned?k.rem_u:k.rem_s)(this.low,this.high,xt.low,xt.high);return mt(rn,k.get_high(),this.unsigned)}return this.sub(this.div(xt).mul(xt))},Jt.mod=Jt.modulo,Jt.rem=Jt.modulo,Jt.not=function(){return mt(~this.low,~this.high,this.unsigned)},Jt.countLeadingZeros=function(){return this.high?Math.clz32(this.high):Math.clz32(this.low)+32},Jt.clz=Jt.countLeadingZeros,Jt.countTrailingZeros=function(){return this.low?et(this.low):et(this.high)+32},Jt.ctz=Jt.countTrailingZeros,Jt.and=function(xt){return _e(xt)||(xt=_t(xt)),mt(this.low&xt.low,this.high&xt.high,this.unsigned)},Jt.or=function(xt){return _e(xt)||(xt=_t(xt)),mt(this.low|xt.low,this.high|xt.high,this.unsigned)},Jt.xor=function(xt){return _e(xt)||(xt=_t(xt)),mt(this.low^xt.low,this.high^xt.high,this.unsigned)},Jt.shiftLeft=function(xt){return _e(xt)&&(xt=xt.toInt()),(xt&=63)===0?this:xt<32?mt(this.low<<xt,this.high<<xt|this.low>>>32-xt,this.unsigned):mt(0,this.low<<xt-32,this.unsigned)},Jt.shl=Jt.shiftLeft,Jt.shiftRight=function(xt){return _e(xt)&&(xt=xt.toInt()),(xt&=63)===0?this:xt<32?mt(this.low>>>xt|this.high<<32-xt,this.high>>xt,this.unsigned):mt(this.high>>xt-32,this.high>=0?0:-1,this.unsigned)},Jt.shr=Jt.shiftRight,Jt.shiftRightUnsigned=function(xt){return _e(xt)&&(xt=xt.toInt()),(xt&=63)===0?this:xt<32?mt(this.low>>>xt|this.high<<32-xt,this.high>>>xt,this.unsigned):xt===32?mt(this.high,0,this.unsigned):mt(this.high>>>xt-32,0,this.unsigned)},Jt.shru=Jt.shiftRightUnsigned,Jt.shr_u=Jt.shiftRightUnsigned,Jt.rotateLeft=function(xt){var rn;return _e(xt)&&(xt=xt.toInt()),(xt&=63)===0?this:xt===32?mt(this.high,this.low,this.unsigned):xt<32?(rn=32-xt,mt(this.low<<xt|this.high>>>rn,this.high<<xt|this.low>>>rn,this.unsigned)):(xt-=32,rn=32-xt,mt(this.high<<xt|this.low>>>rn,this.low<<xt|this.high>>>rn,this.unsigned))},Jt.rotl=Jt.rotateLeft,Jt.rotateRight=function(xt){var rn;return _e(xt)&&(xt=xt.toInt()),(xt&=63)===0?this:xt===32?mt(this.high,this.low,this.unsigned):xt<32?(rn=32-xt,mt(this.high<<rn|this.low>>>xt,this.low<<rn|this.high>>>xt,this.unsigned)):(xt-=32,rn=32-xt,mt(this.low<<rn|this.high>>>xt,this.high<<rn|this.low>>>xt,this.unsigned))},Jt.rotr=Jt.rotateRight,Jt.toSigned=function(){return this.unsigned?mt(this.low,this.high,!1):this},Jt.toUnsigned=function(){return this.unsigned?this:mt(this.low,this.high,!0)},Jt.toBytes=function(xt){return xt?this.toBytesLE():this.toBytesBE()},Jt.toBytesLE=function(){var xt=this.high,rn=this.low;return[rn&255,rn>>>8&255,rn>>>16&255,rn>>>24,xt&255,xt>>>8&255,xt>>>16&255,xt>>>24]},Jt.toBytesBE=function(){var xt=this.high,rn=this.low;return[xt>>>24,xt>>>16&255,xt>>>8&255,xt&255,rn>>>24,rn>>>16&255,rn>>>8&255,rn&255]},j.fromBytes=function(xt,rn,Sn){return Sn?j.fromBytesLE(xt,rn):j.fromBytesBE(xt,rn)},j.fromBytesLE=function(xt,rn){return new j(xt[0]|xt[1]<<8|xt[2]<<16|xt[3]<<24,xt[4]|xt[5]<<8|xt[6]<<16|xt[7]<<24,rn)},j.fromBytesBE=function(xt,rn){return new j(xt[4]<<24|xt[5]<<16|xt[6]<<8|xt[7],xt[0]<<24|xt[1]<<16|xt[2]<<8|xt[3],rn)};var en=j;return _.default=en,"default"in _?_.default:_}({});a.exports=b})(umd);var umdExports=umd.exports,indexMinimal={},minimal$1={},aspromise=asPromise;function asPromise(a,c){for(var b=new Array(arguments.length-1),_=0,k=2,j=!0;k<arguments.length;)b[_++]=arguments[k++];return new Promise(function(et,nt){b[_]=function(ft){if(j)if(j=!1,ft)nt(ft);else{for(var pt=new Array(arguments.length-1),mt=0;mt<pt.length;)pt[mt++]=arguments[mt];et.apply(null,pt)}};try{a.apply(c||null,b)}catch(it){j&&(j=!1,nt(it))}})}var base64$1={};(function(a){var c=a;c.length=function(et){var nt=et.length;if(!nt)return 0;for(var it=0;--nt%4>1&&et.charAt(nt)==="=";)++it;return Math.ceil(et.length*3)/4-it};for(var b=new Array(64),_=new Array(123),k=0;k<64;)_[b[k]=k<26?k+65:k<52?k+71:k<62?k-4:k-59|43]=k++;c.encode=function(et,nt,it){for(var ft=null,pt=[],mt=0,St=0,yt;nt<it;){var _t=et[nt++];switch(St){case 0:pt[mt++]=b[_t>>2],yt=(_t&3)<<4,St=1;break;case 1:pt[mt++]=b[yt|_t>>4],yt=(_t&15)<<2,St=2;break;case 2:pt[mt++]=b[yt|_t>>6],pt[mt++]=b[_t&63],St=0;break}mt>8191&&((ft||(ft=[])).push(String.fromCharCode.apply(String,pt)),mt=0)}return St&&(pt[mt++]=b[yt],pt[mt++]=61,St===1&&(pt[mt++]=61)),ft?(mt&&ft.push(String.fromCharCode.apply(String,pt.slice(0,mt))),ft.join("")):String.fromCharCode.apply(String,pt.slice(0,mt))};var j="invalid encoding";c.decode=function(et,nt,it){for(var ft=it,pt=0,mt,St=0;St<et.length;){var yt=et.charCodeAt(St++);if(yt===61&&pt>1)break;if((yt=_[yt])===void 0)throw Error(j);switch(pt){case 0:mt=yt,pt=1;break;case 1:nt[it++]=mt<<2|(yt&48)>>4,mt=yt,pt=2;break;case 2:nt[it++]=(mt&15)<<4|(yt&60)>>2,mt=yt,pt=3;break;case 3:nt[it++]=(mt&3)<<6|yt,pt=0;break}}if(pt===1)throw Error(j);return it-ft},c.test=function(et){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(et)}})(base64$1);var eventemitter=EventEmitter$1;function EventEmitter$1(){this._listeners={}}EventEmitter$1.prototype.on=function(c,b,_){return(this._listeners[c]||(this._listeners[c]=[])).push({fn:b,ctx:_||this}),this};EventEmitter$1.prototype.off=function(c,b){if(c===void 0)this._listeners={};else if(b===void 0)this._listeners[c]=[];else for(var _=this._listeners[c],k=0;k<_.length;)_[k].fn===b?_.splice(k,1):++k;return this};EventEmitter$1.prototype.emit=function(c){var b=this._listeners[c];if(b){for(var _=[],k=1;k<arguments.length;)_.push(arguments[k++]);for(k=0;k<b.length;)b[k].fn.apply(b[k++].ctx,_)}return this};var float=factory(factory);function factory(a){return typeof Float32Array<"u"?function(){var c=new Float32Array([-0]),b=new Uint8Array(c.buffer),_=b[3]===128;function k(nt,it,ft){c[0]=nt,it[ft]=b[0],it[ft+1]=b[1],it[ft+2]=b[2],it[ft+3]=b[3]}function j(nt,it,ft){c[0]=nt,it[ft]=b[3],it[ft+1]=b[2],it[ft+2]=b[1],it[ft+3]=b[0]}a.writeFloatLE=_?k:j,a.writeFloatBE=_?j:k;function _e(nt,it){return b[0]=nt[it],b[1]=nt[it+1],b[2]=nt[it+2],b[3]=nt[it+3],c[0]}function et(nt,it){return b[3]=nt[it],b[2]=nt[it+1],b[1]=nt[it+2],b[0]=nt[it+3],c[0]}a.readFloatLE=_?_e:et,a.readFloatBE=_?et:_e}():function(){function c(_,k,j,_e){var et=k<0?1:0;if(et&&(k=-k),k===0)_(1/k>0?0:2147483648,j,_e);else if(isNaN(k))_(2143289344,j,_e);else if(k>34028234663852886e22)_((et<<31|2139095040)>>>0,j,_e);else if(k<11754943508222875e-54)_((et<<31|Math.round(k/1401298464324817e-60))>>>0,j,_e);else{var nt=Math.floor(Math.log(k)/Math.LN2),it=Math.round(k*Math.pow(2,-nt)*8388608)&8388607;_((et<<31|nt+127<<23|it)>>>0,j,_e)}}a.writeFloatLE=c.bind(null,writeUintLE),a.writeFloatBE=c.bind(null,writeUintBE);function b(_,k,j){var _e=_(k,j),et=(_e>>31)*2+1,nt=_e>>>23&255,it=_e&8388607;return nt===255?it?NaN:et*(1/0):nt===0?et*1401298464324817e-60*it:et*Math.pow(2,nt-150)*(it+8388608)}a.readFloatLE=b.bind(null,readUintLE),a.readFloatBE=b.bind(null,readUintBE)}(),typeof Float64Array<"u"?function(){var c=new Float64Array([-0]),b=new Uint8Array(c.buffer),_=b[7]===128;function k(nt,it,ft){c[0]=nt,it[ft]=b[0],it[ft+1]=b[1],it[ft+2]=b[2],it[ft+3]=b[3],it[ft+4]=b[4],it[ft+5]=b[5],it[ft+6]=b[6],it[ft+7]=b[7]}function j(nt,it,ft){c[0]=nt,it[ft]=b[7],it[ft+1]=b[6],it[ft+2]=b[5],it[ft+3]=b[4],it[ft+4]=b[3],it[ft+5]=b[2],it[ft+6]=b[1],it[ft+7]=b[0]}a.writeDoubleLE=_?k:j,a.writeDoubleBE=_?j:k;function _e(nt,it){return b[0]=nt[it],b[1]=nt[it+1],b[2]=nt[it+2],b[3]=nt[it+3],b[4]=nt[it+4],b[5]=nt[it+5],b[6]=nt[it+6],b[7]=nt[it+7],c[0]}function et(nt,it){return b[7]=nt[it],b[6]=nt[it+1],b[5]=nt[it+2],b[4]=nt[it+3],b[3]=nt[it+4],b[2]=nt[it+5],b[1]=nt[it+6],b[0]=nt[it+7],c[0]}a.readDoubleLE=_?_e:et,a.readDoubleBE=_?et:_e}():function(){function c(_,k,j,_e,et,nt){var it=_e<0?1:0;if(it&&(_e=-_e),_e===0)_(0,et,nt+k),_(1/_e>0?0:2147483648,et,nt+j);else if(isNaN(_e))_(0,et,nt+k),_(2146959360,et,nt+j);else if(_e>17976931348623157e292)_(0,et,nt+k),_((it<<31|2146435072)>>>0,et,nt+j);else{var ft;if(_e<22250738585072014e-324)ft=_e/5e-324,_(ft>>>0,et,nt+k),_((it<<31|ft/4294967296)>>>0,et,nt+j);else{var pt=Math.floor(Math.log(_e)/Math.LN2);pt===1024&&(pt=1023),ft=_e*Math.pow(2,-pt),_(ft*4503599627370496>>>0,et,nt+k),_((it<<31|pt+1023<<20|ft*1048576&1048575)>>>0,et,nt+j)}}}a.writeDoubleLE=c.bind(null,writeUintLE,0,4),a.writeDoubleBE=c.bind(null,writeUintBE,4,0);function b(_,k,j,_e,et){var nt=_(_e,et+k),it=_(_e,et+j),ft=(it>>31)*2+1,pt=it>>>20&2047,mt=4294967296*(it&1048575)+nt;return pt===2047?mt?NaN:ft*(1/0):pt===0?ft*5e-324*mt:ft*Math.pow(2,pt-1075)*(mt+4503599627370496)}a.readDoubleLE=b.bind(null,readUintLE,0,4),a.readDoubleBE=b.bind(null,readUintBE,4,0)}(),a}function writeUintLE(a,c,b){c[b]=a&255,c[b+1]=a>>>8&255,c[b+2]=a>>>16&255,c[b+3]=a>>>24}function writeUintBE(a,c,b){c[b]=a>>>24,c[b+1]=a>>>16&255,c[b+2]=a>>>8&255,c[b+3]=a&255}function readUintLE(a,c){return(a[c]|a[c+1]<<8|a[c+2]<<16|a[c+3]<<24)>>>0}function readUintBE(a,c){return(a[c]<<24|a[c+1]<<16|a[c+2]<<8|a[c+3])>>>0}var inquire_1=inquire;function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(a){}return null}var utf8$2={};(function(a){var c=a;c.length=function(_){for(var k=0,j=0,_e=0;_e<_.length;++_e)j=_.charCodeAt(_e),j<128?k+=1:j<2048?k+=2:(j&64512)===55296&&(_.charCodeAt(_e+1)&64512)===56320?(++_e,k+=4):k+=3;return k},c.read=function(_,k,j){var _e=j-k;if(_e<1)return"";for(var et=null,nt=[],it=0,ft;k<j;)ft=_[k++],ft<128?nt[it++]=ft:ft>191&&ft<224?nt[it++]=(ft&31)<<6|_[k++]&63:ft>239&&ft<365?(ft=((ft&7)<<18|(_[k++]&63)<<12|(_[k++]&63)<<6|_[k++]&63)-65536,nt[it++]=55296+(ft>>10),nt[it++]=56320+(ft&1023)):nt[it++]=(ft&15)<<12|(_[k++]&63)<<6|_[k++]&63,it>8191&&((et||(et=[])).push(String.fromCharCode.apply(String,nt)),it=0);return et?(it&&et.push(String.fromCharCode.apply(String,nt.slice(0,it))),et.join("")):String.fromCharCode.apply(String,nt.slice(0,it))},c.write=function(_,k,j){for(var _e=j,et,nt,it=0;it<_.length;++it)et=_.charCodeAt(it),et<128?k[j++]=et:et<2048?(k[j++]=et>>6|192,k[j++]=et&63|128):(et&64512)===55296&&((nt=_.charCodeAt(it+1))&64512)===56320?(et=65536+((et&1023)<<10)+(nt&1023),++it,k[j++]=et>>18|240,k[j++]=et>>12&63|128,k[j++]=et>>6&63|128,k[j++]=et&63|128):(k[j++]=et>>12|224,k[j++]=et>>6&63|128,k[j++]=et&63|128);return j-_e}})(utf8$2);var pool_1=pool;function pool(a,c,b){var _=b||8192,k=_>>>1,j=null,_e=_;return function(nt){if(nt<1||nt>k)return a(nt);_e+nt>_&&(j=a(_),_e=0);var it=c.call(j,_e,_e+=nt);return _e&7&&(_e=(_e|7)+1),it}}var longbits,hasRequiredLongbits;function requireLongbits(){if(hasRequiredLongbits)return longbits;hasRequiredLongbits=1,longbits=c;var a=requireMinimal();function c(j,_e){this.lo=j>>>0,this.hi=_e>>>0}var b=c.zero=new c(0,0);b.toNumber=function(){return 0},b.zzEncode=b.zzDecode=function(){return this},b.length=function(){return 1};var _=c.zeroHash="\0\0\0\0\0\0\0\0";c.fromNumber=function(_e){if(_e===0)return b;var et=_e<0;et&&(_e=-_e);var nt=_e>>>0,it=(_e-nt)/4294967296>>>0;return et&&(it=~it>>>0,nt=~nt>>>0,++nt>4294967295&&(nt=0,++it>4294967295&&(it=0))),new c(nt,it)},c.from=function(_e){if(typeof _e=="number")return c.fromNumber(_e);if(a.isString(_e))if(a.Long)_e=a.Long.fromString(_e);else return c.fromNumber(parseInt(_e,10));return _e.low||_e.high?new c(_e.low>>>0,_e.high>>>0):b},c.prototype.toNumber=function(_e){if(!_e&&this.hi>>>31){var et=~this.lo+1>>>0,nt=~this.hi>>>0;return et||(nt=nt+1>>>0),-(et+nt*4294967296)}return this.lo+this.hi*4294967296},c.prototype.toLong=function(_e){return a.Long?new a.Long(this.lo|0,this.hi|0,!!_e):{low:this.lo|0,high:this.hi|0,unsigned:!!_e}};var k=String.prototype.charCodeAt;return c.fromHash=function(_e){return _e===_?b:new c((k.call(_e,0)|k.call(_e,1)<<8|k.call(_e,2)<<16|k.call(_e,3)<<24)>>>0,(k.call(_e,4)|k.call(_e,5)<<8|k.call(_e,6)<<16|k.call(_e,7)<<24)>>>0)},c.prototype.toHash=function(){return String.fromCharCode(this.lo&255,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,this.hi&255,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},c.prototype.zzEncode=function(){var _e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^_e)>>>0,this.lo=(this.lo<<1^_e)>>>0,this},c.prototype.zzDecode=function(){var _e=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^_e)>>>0,this.hi=(this.hi>>>1^_e)>>>0,this},c.prototype.length=function(){var _e=this.lo,et=(this.lo>>>28|this.hi<<4)>>>0,nt=this.hi>>>24;return nt===0?et===0?_e<16384?_e<128?1:2:_e<2097152?3:4:et<16384?et<128?5:6:et<2097152?7:8:nt<128?9:10},longbits}var hasRequiredMinimal;function requireMinimal(){return hasRequiredMinimal||(hasRequiredMinimal=1,function(a){var c=a;c.asPromise=aspromise,c.base64=base64$1,c.EventEmitter=eventemitter,c.float=float,c.inquire=inquire_1,c.utf8=utf8$2,c.pool=pool_1,c.LongBits=requireLongbits(),c.isNode=!!(typeof commonjsGlobal$1<"u"&&commonjsGlobal$1&&commonjsGlobal$1.process&&commonjsGlobal$1.process.versions&&commonjsGlobal$1.process.versions.node),c.global=c.isNode&&commonjsGlobal$1||typeof window<"u"&&window||typeof self<"u"&&self||commonjsGlobal$1,c.emptyArray=Object.freeze?Object.freeze([]):[],c.emptyObject=Object.freeze?Object.freeze({}):{},c.isInteger=Number.isInteger||function(j){return typeof j=="number"&&isFinite(j)&&Math.floor(j)===j},c.isString=function(j){return typeof j=="string"||j instanceof String},c.isObject=function(j){return j&&typeof j=="object"},c.isset=c.isSet=function(j,_e){var et=j[_e];return et!=null&&j.hasOwnProperty(_e)?typeof et!="object"||(Array.isArray(et)?et.length:Object.keys(et).length)>0:!1},c.Buffer=function(){try{var k=c.inquire("buffer").Buffer;return k.prototype.utf8Write?k:null}catch{return null}}(),c._Buffer_from=null,c._Buffer_allocUnsafe=null,c.newBuffer=function(j){return typeof j=="number"?c.Buffer?c._Buffer_allocUnsafe(j):new c.Array(j):c.Buffer?c._Buffer_from(j):typeof Uint8Array>"u"?j:new Uint8Array(j)},c.Array=typeof Uint8Array<"u"?Uint8Array:Array,c.Long=c.global.dcodeIO&&c.global.dcodeIO.Long||c.global.Long||c.inquire("long"),c.key2Re=/^true|false|0|1$/,c.key32Re=/^-?(?:0|[1-9][0-9]*)$/,c.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,c.longToHash=function(j){return j?c.LongBits.from(j).toHash():c.LongBits.zeroHash},c.longFromHash=function(j,_e){var et=c.LongBits.fromHash(j);return c.Long?c.Long.fromBits(et.lo,et.hi,_e):et.toNumber(!!_e)};function b(k,j,_e){for(var et=Object.keys(j),nt=0;nt<et.length;++nt)(k[et[nt]]===void 0||!_e)&&(k[et[nt]]=j[et[nt]]);return k}c.merge=b,c.lcFirst=function(j){return j.charAt(0).toLowerCase()+j.substring(1)};function _(k){function j(_e,et){if(!(this instanceof j))return new j(_e,et);Object.defineProperty(this,"message",{get:function(){return _e}}),Error.captureStackTrace?Error.captureStackTrace(this,j):Object.defineProperty(this,"stack",{value:new Error().stack||""}),et&&b(this,et)}return(j.prototype=Object.create(Error.prototype)).constructor=j,Object.defineProperty(j.prototype,"name",{get:function(){return k}}),j.prototype.toString=function(){return this.name+": "+this.message},j}c.newError=_,c.ProtocolError=_("ProtocolError"),c.oneOfGetter=function(j){for(var _e={},et=0;et<j.length;++et)_e[j[et]]=1;return function(){for(var nt=Object.keys(this),it=nt.length-1;it>-1;--it)if(_e[nt[it]]===1&&this[nt[it]]!==void 0&&this[nt[it]]!==null)return nt[it]}},c.oneOfSetter=function(j){return function(_e){for(var et=0;et<j.length;++et)j[et]!==_e&&delete this[j[et]]}},c.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},c._configure=function(){var k=c.Buffer;if(!k){c._Buffer_from=c._Buffer_allocUnsafe=null;return}c._Buffer_from=k.from!==Uint8Array.from&&k.from||function(_e,et){return new k(_e,et)},c._Buffer_allocUnsafe=k.allocUnsafe||function(_e){return new k(_e)}}}(minimal$1)),minimal$1}var writer$2=Writer$1,util$9=requireMinimal(),BufferWriter$1,LongBits$1=util$9.LongBits,base64=util$9.base64,utf8$1=util$9.utf8;function Op(a,c,b){this.fn=a,this.len=c,this.next=void 0,this.val=b}function noop$2(){}function State(a){this.head=a.head,this.tail=a.tail,this.len=a.len,this.next=a.states}function Writer$1(){this.len=0,this.head=new Op(noop$2,0,0),this.tail=this.head,this.states=null}var create$2=function a(){return util$9.Buffer?function(){return(Writer$1.create=function(){return new BufferWriter$1})()}:function(){return new Writer$1}};Writer$1.create=create$2();Writer$1.alloc=function a(c){return new util$9.Array(c)};util$9.Array!==Array&&(Writer$1.alloc=util$9.pool(Writer$1.alloc,util$9.Array.prototype.subarray));Writer$1.prototype._push=function a(c,b,_){return this.tail=this.tail.next=new Op(c,b,_),this.len+=b,this};function writeByte(a,c,b){c[b]=a&255}function writeVarint32(a,c,b){for(;a>127;)c[b++]=a&127|128,a>>>=7;c[b]=a}function VarintOp(a,c){this.len=a,this.next=void 0,this.val=c}VarintOp.prototype=Object.create(Op.prototype);VarintOp.prototype.fn=writeVarint32;Writer$1.prototype.uint32=function a(c){return this.len+=(this.tail=this.tail.next=new VarintOp((c=c>>>0)<128?1:c<16384?2:c<2097152?3:c<268435456?4:5,c)).len,this};Writer$1.prototype.int32=function a(c){return c<0?this._push(writeVarint64,10,LongBits$1.fromNumber(c)):this.uint32(c)};Writer$1.prototype.sint32=function a(c){return this.uint32((c<<1^c>>31)>>>0)};function writeVarint64(a,c,b){for(;a.hi;)c[b++]=a.lo&127|128,a.lo=(a.lo>>>7|a.hi<<25)>>>0,a.hi>>>=7;for(;a.lo>127;)c[b++]=a.lo&127|128,a.lo=a.lo>>>7;c[b++]=a.lo}Writer$1.prototype.uint64=function a(c){var b=LongBits$1.from(c);return this._push(writeVarint64,b.length(),b)};Writer$1.prototype.int64=Writer$1.prototype.uint64;Writer$1.prototype.sint64=function a(c){var b=LongBits$1.from(c).zzEncode();return this._push(writeVarint64,b.length(),b)};Writer$1.prototype.bool=function a(c){return this._push(writeByte,1,c?1:0)};function writeFixed32(a,c,b){c[b]=a&255,c[b+1]=a>>>8&255,c[b+2]=a>>>16&255,c[b+3]=a>>>24}Writer$1.prototype.fixed32=function a(c){return this._push(writeFixed32,4,c>>>0)};Writer$1.prototype.sfixed32=Writer$1.prototype.fixed32;Writer$1.prototype.fixed64=function a(c){var b=LongBits$1.from(c);return this._push(writeFixed32,4,b.lo)._push(writeFixed32,4,b.hi)};Writer$1.prototype.sfixed64=Writer$1.prototype.fixed64;Writer$1.prototype.float=function a(c){return this._push(util$9.float.writeFloatLE,4,c)};Writer$1.prototype.double=function a(c){return this._push(util$9.float.writeDoubleLE,8,c)};var writeBytes=util$9.Array.prototype.set?function a(c,b,_){b.set(c,_)}:function a(c,b,_){for(var k=0;k<c.length;++k)b[_+k]=c[k]};Writer$1.prototype.bytes=function a(c){var b=c.length>>>0;if(!b)return this._push(writeByte,1,0);if(util$9.isString(c)){var _=Writer$1.alloc(b=base64.length(c));base64.decode(c,_,0),c=_}return this.uint32(b)._push(writeBytes,b,c)};Writer$1.prototype.string=function a(c){var b=utf8$1.length(c);return b?this.uint32(b)._push(utf8$1.write,b,c):this._push(writeByte,1,0)};Writer$1.prototype.fork=function a(){return this.states=new State(this),this.head=this.tail=new Op(noop$2,0,0),this.len=0,this};Writer$1.prototype.reset=function a(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new Op(noop$2,0,0),this.len=0),this};Writer$1.prototype.ldelim=function a(){var c=this.head,b=this.tail,_=this.len;return this.reset().uint32(_),_&&(this.tail.next=c.next,this.tail=b,this.len+=_),this};Writer$1.prototype.finish=function a(){for(var c=this.head.next,b=this.constructor.alloc(this.len),_=0;c;)c.fn(c.val,b,_),_+=c.len,c=c.next;return b};Writer$1._configure=function(a){BufferWriter$1=a,Writer$1.create=create$2(),BufferWriter$1._configure()};var writer_buffer=BufferWriter,Writer=writer$2;(BufferWriter.prototype=Object.create(Writer.prototype)).constructor=BufferWriter;var util$8=requireMinimal();function BufferWriter(){Writer.call(this)}BufferWriter._configure=function(){BufferWriter.alloc=util$8._Buffer_allocUnsafe,BufferWriter.writeBytesBuffer=util$8.Buffer&&util$8.Buffer.prototype instanceof Uint8Array&&util$8.Buffer.prototype.set.name==="set"?function(c,b,_){b.set(c,_)}:function(c,b,_){if(c.copy)c.copy(b,_,0,c.length);else for(var k=0;k<c.length;)b[_++]=c[k++]}};BufferWriter.prototype.bytes=function a(c){util$8.isString(c)&&(c=util$8._Buffer_from(c,"base64"));var b=c.length>>>0;return this.uint32(b),b&&this._push(BufferWriter.writeBytesBuffer,b,c),this};function writeStringBuffer(a,c,b){a.length<40?util$8.utf8.write(a,c,b):c.utf8Write?c.utf8Write(a,b):c.write(a,b)}BufferWriter.prototype.string=function a(c){var b=util$8.Buffer.byteLength(c);return this.uint32(b),b&&this._push(writeStringBuffer,b,c),this};BufferWriter._configure();var reader=Reader$1,util$7=requireMinimal(),BufferReader$1,LongBits=util$7.LongBits,utf8=util$7.utf8;function indexOutOfRange(a,c){return RangeError("index out of range: "+a.pos+" + "+(c||1)+" > "+a.len)}function Reader$1(a){this.buf=a,this.pos=0,this.len=a.length}var create_array=typeof Uint8Array<"u"?function a(c){if(c instanceof Uint8Array||Array.isArray(c))return new Reader$1(c);throw Error("illegal buffer")}:function a(c){if(Array.isArray(c))return new Reader$1(c);throw Error("illegal buffer")},create$1=function a(){return util$7.Buffer?function(b){return(Reader$1.create=function(k){return util$7.Buffer.isBuffer(k)?new BufferReader$1(k):create_array(k)})(b)}:create_array};Reader$1.create=create$1();Reader$1.prototype._slice=util$7.Array.prototype.subarray||util$7.Array.prototype.slice;Reader$1.prototype.uint32=function a(){var c=4294967295;return function(){if(c=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(c=(c|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(c=(c|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(c=(c|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(c=(c|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return c;if((this.pos+=5)>this.len)throw this.pos=this.len,indexOutOfRange(this,10);return c}}();Reader$1.prototype.int32=function a(){return this.uint32()|0};Reader$1.prototype.sint32=function a(){var c=this.uint32();return c>>>1^-(c&1)|0};function readLongVarint(){var a=new LongBits(0,0),c=0;if(this.len-this.pos>4){for(;c<4;++c)if(a.lo=(a.lo|(this.buf[this.pos]&127)<<c*7)>>>0,this.buf[this.pos++]<128)return a;if(a.lo=(a.lo|(this.buf[this.pos]&127)<<28)>>>0,a.hi=(a.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return a;c=0}else{for(;c<3;++c){if(this.pos>=this.len)throw indexOutOfRange(this);if(a.lo=(a.lo|(this.buf[this.pos]&127)<<c*7)>>>0,this.buf[this.pos++]<128)return a}return a.lo=(a.lo|(this.buf[this.pos++]&127)<<c*7)>>>0,a}if(this.len-this.pos>4){for(;c<5;++c)if(a.hi=(a.hi|(this.buf[this.pos]&127)<<c*7+3)>>>0,this.buf[this.pos++]<128)return a}else for(;c<5;++c){if(this.pos>=this.len)throw indexOutOfRange(this);if(a.hi=(a.hi|(this.buf[this.pos]&127)<<c*7+3)>>>0,this.buf[this.pos++]<128)return a}throw Error("invalid varint encoding")}Reader$1.prototype.bool=function a(){return this.uint32()!==0};function readFixed32_end(a,c){return(a[c-4]|a[c-3]<<8|a[c-2]<<16|a[c-1]<<24)>>>0}Reader$1.prototype.fixed32=function a(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);return readFixed32_end(this.buf,this.pos+=4)};Reader$1.prototype.sfixed32=function a(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);return readFixed32_end(this.buf,this.pos+=4)|0};function readFixed64(){if(this.pos+8>this.len)throw indexOutOfRange(this,8);return new LongBits(readFixed32_end(this.buf,this.pos+=4),readFixed32_end(this.buf,this.pos+=4))}Reader$1.prototype.float=function a(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);var c=util$7.float.readFloatLE(this.buf,this.pos);return this.pos+=4,c};Reader$1.prototype.double=function a(){if(this.pos+8>this.len)throw indexOutOfRange(this,4);var c=util$7.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,c};Reader$1.prototype.bytes=function a(){var c=this.uint32(),b=this.pos,_=this.pos+c;if(_>this.len)throw indexOutOfRange(this,c);return this.pos+=c,Array.isArray(this.buf)?this.buf.slice(b,_):b===_?new this.buf.constructor(0):this._slice.call(this.buf,b,_)};Reader$1.prototype.string=function a(){var c=this.bytes();return utf8.read(c,0,c.length)};Reader$1.prototype.skip=function a(c){if(typeof c=="number"){if(this.pos+c>this.len)throw indexOutOfRange(this,c);this.pos+=c}else do if(this.pos>=this.len)throw indexOutOfRange(this);while(this.buf[this.pos++]&128);return this};Reader$1.prototype.skipType=function(a){switch(a){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(a=this.uint32()&7)!==4;)this.skipType(a);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+a+" at offset "+this.pos)}return this};Reader$1._configure=function(a){BufferReader$1=a,Reader$1.create=create$1(),BufferReader$1._configure();var c=util$7.Long?"toLong":"toNumber";util$7.merge(Reader$1.prototype,{int64:function(){return readLongVarint.call(this)[c](!1)},uint64:function(){return readLongVarint.call(this)[c](!0)},sint64:function(){return readLongVarint.call(this).zzDecode()[c](!1)},fixed64:function(){return readFixed64.call(this)[c](!0)},sfixed64:function(){return readFixed64.call(this)[c](!1)}})};var reader_buffer=BufferReader,Reader=reader;(BufferReader.prototype=Object.create(Reader.prototype)).constructor=BufferReader;var util$6=requireMinimal();function BufferReader(a){Reader.call(this,a)}BufferReader._configure=function(){util$6.Buffer&&(BufferReader.prototype._slice=util$6.Buffer.prototype.slice)};BufferReader.prototype.string=function a(){var c=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+c,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+c,this.len))};BufferReader._configure();var rpc={},service=Service,util$5=requireMinimal();(Service.prototype=Object.create(util$5.EventEmitter.prototype)).constructor=Service;function Service(a,c,b){if(typeof a!="function")throw TypeError("rpcImpl must be a function");util$5.EventEmitter.call(this),this.rpcImpl=a,this.requestDelimited=!!c,this.responseDelimited=!!b}Service.prototype.rpcCall=function a(c,b,_,k,j){if(!k)throw TypeError("request must be specified");var _e=this;if(!j)return util$5.asPromise(a,_e,c,b,_,k);if(!_e.rpcImpl){setTimeout(function(){j(Error("already ended"))},0);return}try{return _e.rpcImpl(c,b[_e.requestDelimited?"encodeDelimited":"encode"](k).finish(),function(nt,it){if(nt)return _e.emit("error",nt,c),j(nt);if(it===null){_e.end(!0);return}if(!(it instanceof _))try{it=_[_e.responseDelimited?"decodeDelimited":"decode"](it)}catch(ft){return _e.emit("error",ft,c),j(ft)}return _e.emit("data",it,c),j(null,it)})}catch(et){_e.emit("error",et,c),setTimeout(function(){j(et)},0);return}};Service.prototype.end=function a(c){return this.rpcImpl&&(c||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this};(function(a){var c=a;c.Service=service})(rpc);var roots={};(function(a){var c=a;c.build="minimal",c.Writer=writer$2,c.BufferWriter=writer_buffer,c.Reader=reader,c.BufferReader=reader_buffer,c.util=requireMinimal(),c.rpc=rpc,c.roots=roots,c.configure=b;function b(){c.util._configure(),c.Writer._configure(c.BufferWriter),c.Reader._configure(c.BufferReader)}b()})(indexMinimal);var minimal=indexMinimal,struct$2={};(function(a){var c=commonjsGlobal$1&&commonjsGlobal$1.__createBinding||(Object.create?function(ht,Et,At,Bt){Bt===void 0&&(Bt=At),Object.defineProperty(ht,Bt,{enumerable:!0,get:function(){return Et[At]}})}:function(ht,Et,At,Bt){Bt===void 0&&(Bt=At),ht[Bt]=Et[At]}),b=commonjsGlobal$1&&commonjsGlobal$1.__setModuleDefault||(Object.create?function(ht,Et){Object.defineProperty(ht,"default",{enumerable:!0,value:Et})}:function(ht,Et){ht.default=Et}),_=commonjsGlobal$1&&commonjsGlobal$1.__importStar||function(ht){if(ht&&ht.__esModule)return ht;var Et={};if(ht!=null)for(var At in ht)At!=="default"&&Object.hasOwnProperty.call(ht,At)&&c(Et,ht,At);return b(Et,ht),Et},k=commonjsGlobal$1&&commonjsGlobal$1.__importDefault||function(ht){return ht&&ht.__esModule?ht:{default:ht}};Object.defineProperty(a,"__esModule",{value:!0}),a.ListValue=a.Value=a.Struct_FieldsEntry=a.Struct=a.nullValueToNumber=a.nullValueToJSON=a.nullValueFromJSON=a.NullValue=a.protobufPackage=void 0;const j=k(umdExports),_e=_(minimal);a.protobufPackage="google.protobuf";var et;(function(ht){ht.NULL_VALUE="NULL_VALUE"})(et=a.NullValue||(a.NullValue={}));function nt(ht){switch(ht){case 0:case"NULL_VALUE":return et.NULL_VALUE;default:throw new _t.Error("Unrecognized enum value "+ht+" for enum NullValue")}}a.nullValueFromJSON=nt;function it(ht){switch(ht){case et.NULL_VALUE:return"NULL_VALUE";default:return"UNKNOWN"}}a.nullValueToJSON=it;function ft(ht){switch(ht){case et.NULL_VALUE:return 0;default:return 0}}a.nullValueToNumber=ft;function pt(){return{fields:{}}}a.Struct={encode(ht,Et=_e.Writer.create()){return Object.entries(ht.fields).forEach(([At,Bt])=>{Bt!==void 0&&a.Struct_FieldsEntry.encode({key:At,value:Bt},Et.uint32(10).fork()).ldelim()}),Et},decode(ht,Et){const At=ht instanceof _e.Reader?ht:new _e.Reader(ht);let Bt=Et===void 0?At.len:At.pos+Et;const qt=pt();for(;At.pos<Bt;){const zt=At.uint32();switch(zt>>>3){case 1:const Ht=a.Struct_FieldsEntry.decode(At,At.uint32());Ht.value!==void 0&&(qt.fields[Ht.key]=Ht.value);break;default:At.skipType(zt&7);break}}return qt},fromJSON(ht){return{fields:Tt(ht.fields)?Object.entries(ht.fields).reduce((Et,[At,Bt])=>(Et[At]=Bt,Et),{}):{}}},toJSON(ht){const Et={};return Et.fields={},ht.fields&&Object.entries(ht.fields).forEach(([At,Bt])=>{Et.fields[At]=Bt}),Et},fromPartial(ht){var Et;const At=pt();return At.fields=Object.entries((Et=ht.fields)!==null&&Et!==void 0?Et:{}).reduce((Bt,[qt,zt])=>(zt!==void 0&&(Bt[qt]=zt),Bt),{}),At},wrap(ht){const Et=pt();return ht!==void 0&&Object.keys(ht).forEach(At=>{Et.fields[At]=ht[At]}),Et},unwrap(ht){const Et={};return Object.keys(ht.fields).forEach(At=>{Et[At]=ht.fields[At]}),Et}};function mt(){return{key:"",value:void 0}}a.Struct_FieldsEntry={encode(ht,Et=_e.Writer.create()){return ht.key!==""&&Et.uint32(10).string(ht.key),ht.value!==void 0&&a.Value.encode(a.Value.wrap(ht.value),Et.uint32(18).fork()).ldelim(),Et},decode(ht,Et){const At=ht instanceof _e.Reader?ht:new _e.Reader(ht);let Bt=Et===void 0?At.len:At.pos+Et;const qt=mt();for(;At.pos<Bt;){const zt=At.uint32();switch(zt>>>3){case 1:qt.key=At.string();break;case 2:qt.value=a.Value.unwrap(a.Value.decode(At,At.uint32()));break;default:At.skipType(zt&7);break}}return qt},fromJSON(ht){return{key:gt(ht.key)?String(ht.key):"",value:gt(ht==null?void 0:ht.value)?ht.value:void 0}},toJSON(ht){const Et={};return ht.key!==void 0&&(Et.key=ht.key),ht.value!==void 0&&(Et.value=ht.value),Et},fromPartial(ht){var Et,At;const Bt=mt();return Bt.key=(Et=ht.key)!==null&&Et!==void 0?Et:"",Bt.value=(At=ht.value)!==null&&At!==void 0?At:void 0,Bt}};function St(){return{nullValue:void 0,numberValue:void 0,stringValue:void 0,boolValue:void 0,structValue:void 0,listValue:void 0}}a.Value={encode(ht,Et=_e.Writer.create()){return ht.nullValue!==void 0&&Et.uint32(8).int32(ft(ht.nullValue)),ht.numberValue!==void 0&&Et.uint32(17).double(ht.numberValue),ht.stringValue!==void 0&&Et.uint32(26).string(ht.stringValue),ht.boolValue!==void 0&&Et.uint32(32).bool(ht.boolValue),ht.structValue!==void 0&&a.Struct.encode(a.Struct.wrap(ht.structValue),Et.uint32(42).fork()).ldelim(),ht.listValue!==void 0&&a.ListValue.encode(a.ListValue.wrap(ht.listValue),Et.uint32(50).fork()).ldelim(),Et},decode(ht,Et){const At=ht instanceof _e.Reader?ht:new _e.Reader(ht);let Bt=Et===void 0?At.len:At.pos+Et;const qt=St();for(;At.pos<Bt;){const zt=At.uint32();switch(zt>>>3){case 1:qt.nullValue=nt(At.int32());break;case 2:qt.numberValue=At.double();break;case 3:qt.stringValue=At.string();break;case 4:qt.boolValue=At.bool();break;case 5:qt.structValue=a.Struct.unwrap(a.Struct.decode(At,At.uint32()));break;case 6:qt.listValue=a.ListValue.unwrap(a.ListValue.decode(At,At.uint32()));break;default:At.skipType(zt&7);break}}return qt},fromJSON(ht){return{nullValue:gt(ht.nullValue)?nt(ht.nullValue):void 0,numberValue:gt(ht.numberValue)?Number(ht.numberValue):void 0,stringValue:gt(ht.stringValue)?String(ht.stringValue):void 0,boolValue:gt(ht.boolValue)?!!ht.boolValue:void 0,structValue:Tt(ht.structValue)?ht.structValue:void 0,listValue:Array.isArray(ht.listValue)?[...ht.listValue]:void 0}},toJSON(ht){const Et={};return ht.nullValue!==void 0&&(Et.nullValue=ht.nullValue!==void 0?it(ht.nullValue):void 0),ht.numberValue!==void 0&&(Et.numberValue=ht.numberValue),ht.stringValue!==void 0&&(Et.stringValue=ht.stringValue),ht.boolValue!==void 0&&(Et.boolValue=ht.boolValue),ht.structValue!==void 0&&(Et.structValue=ht.structValue),ht.listValue!==void 0&&(Et.listValue=ht.listValue),Et},fromPartial(ht){var Et,At,Bt,qt,zt,Ht;const ct=St();return ct.nullValue=(Et=ht.nullValue)!==null&&Et!==void 0?Et:void 0,ct.numberValue=(At=ht.numberValue)!==null&&At!==void 0?At:void 0,ct.stringValue=(Bt=ht.stringValue)!==null&&Bt!==void 0?Bt:void 0,ct.boolValue=(qt=ht.boolValue)!==null&&qt!==void 0?qt:void 0,ct.structValue=(zt=ht.structValue)!==null&&zt!==void 0?zt:void 0,ct.listValue=(Ht=ht.listValue)!==null&&Ht!==void 0?Ht:void 0,ct},wrap(ht){const Et=St();if(ht===null)Et.nullValue=et.NULL_VALUE;else if(typeof ht=="boolean")Et.boolValue=ht;else if(typeof ht=="number")Et.numberValue=ht;else if(typeof ht=="string")Et.stringValue=ht;else if(Array.isArray(ht))Et.listValue=ht;else if(typeof ht=="object")Et.structValue=ht;else if(typeof ht<"u")throw new Error("Unsupported any value type: "+typeof ht);return Et},unwrap(ht){if((ht==null?void 0:ht.stringValue)!==void 0)return ht.stringValue;if((ht==null?void 0:ht.numberValue)!==void 0)return ht.numberValue;if((ht==null?void 0:ht.boolValue)!==void 0)return ht.boolValue;if((ht==null?void 0:ht.structValue)!==void 0)return ht.structValue;if((ht==null?void 0:ht.listValue)!==void 0)return ht.listValue;if((ht==null?void 0:ht.nullValue)!==void 0)return null}};function yt(){return{values:[]}}a.ListValue={encode(ht,Et=_e.Writer.create()){for(const At of ht.values)a.Value.encode(a.Value.wrap(At),Et.uint32(10).fork()).ldelim();return Et},decode(ht,Et){const At=ht instanceof _e.Reader?ht:new _e.Reader(ht);let Bt=Et===void 0?At.len:At.pos+Et;const qt=yt();for(;At.pos<Bt;){const zt=At.uint32();switch(zt>>>3){case 1:qt.values.push(a.Value.unwrap(a.Value.decode(At,At.uint32())));break;default:At.skipType(zt&7);break}}return qt},fromJSON(ht){return{values:Array.isArray(ht==null?void 0:ht.values)?[...ht.values]:[]}},toJSON(ht){const Et={};return ht.values?Et.values=ht.values.map(At=>At):Et.values=[],Et},fromPartial(ht){var Et;const At=yt();return At.values=((Et=ht.values)===null||Et===void 0?void 0:Et.map(Bt=>Bt))||[],At},wrap(ht){const Et=yt();return Et.values=ht??[],Et},unwrap(ht){return ht.values}};var _t=(()=>{if(typeof _t<"u")return _t;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof commonjsGlobal$1<"u")return commonjsGlobal$1;throw"Unable to locate global object"})();_e.util.Long!==j.default&&(_e.util.Long=j.default,_e.configure());function Tt(ht){return typeof ht=="object"&&ht!==null}function gt(ht){return ht!=null}})(struct$2);(function(a){var c=commonjsGlobal$1&&commonjsGlobal$1.__createBinding||(Object.create?function(ot,bt,Ct,cn){cn===void 0&&(cn=Ct),Object.defineProperty(ot,cn,{enumerable:!0,get:function(){return bt[Ct]}})}:function(ot,bt,Ct,cn){cn===void 0&&(cn=Ct),ot[cn]=bt[Ct]}),b=commonjsGlobal$1&&commonjsGlobal$1.__setModuleDefault||(Object.create?function(ot,bt){Object.defineProperty(ot,"default",{enumerable:!0,value:bt})}:function(ot,bt){ot.default=bt}),_=commonjsGlobal$1&&commonjsGlobal$1.__importStar||function(ot){if(ot&&ot.__esModule)return ot;var bt={};if(ot!=null)for(var Ct in ot)Ct!=="default"&&Object.hasOwnProperty.call(ot,Ct)&&c(bt,ot,Ct);return b(bt,ot),bt},k=commonjsGlobal$1&&commonjsGlobal$1.__importDefault||function(ot){return ot&&ot.__esModule?ot:{default:ot}};Object.defineProperty(a,"__esModule",{value:!0}),a.LayoutServiceDefinition=a.LayoutServiceClientImpl=a.LayerServiceDefinition=a.LayerServiceClientImpl=a.Event=a.LayerEvent=a.LayoutEvent=a.BatchLayerRequest_BatchItem=a.BatchLayerRequest=a.BatchDeleteLayerRequest=a.DeleteLayerPayload=a.UpdateLayerRequest=a.GetLayerRequest=a.CreateLayerRequest=a.ListLayersResponse=a.ListLayersRequest=a.PartialLayerWithID=a.PartialLayer=a.LayerAnimation=a.DeleteLayoutResponse=a.DeleteLayoutRequest=a.DeleteLayoutPayload=a.UpdateLayoutRequest=a.GetLayoutRequest=a.CreateLayoutRequest=a.ListLayoutsResponse=a.ListLayoutsRequest=a.PartialLayout=a.BatchLayerResponse_BatchLayerItem=a.BatchLayerResponse=a.DeleteLayerResponse=a.DeleteLayerRequest=a.Layer=a.Layout=a.Transition_TransitionStinger=a.Transition_TransitionStingerCut=a.Transition_TransitionSwipe=a.Transition_TransitionCrossfade=a.Transition_TransitionFadeToColor=a.Transition_TransitionCut=a.Transition_TransitionMediaType=a.Transition=a.transition_TransitionSwipeTypeToNumber=a.transition_TransitionSwipeTypeToJSON=a.transition_TransitionSwipeTypeFromJSON=a.Transition_TransitionSwipeType=a.transition_TransitionDirectionToNumber=a.transition_TransitionDirectionToJSON=a.transition_TransitionDirectionFromJSON=a.Transition_TransitionDirection=a.eventTypeToNumber=a.eventTypeToJSON=a.eventTypeFromJSON=a.EventType=a.eventSubTypeToNumber=a.eventSubTypeToJSON=a.eventSubTypeFromJSON=a.EventSubType=a.requestAnimationModeToNumber=a.requestAnimationModeToJSON=a.requestAnimationModeFromJSON=a.RequestAnimationMode=a.layoutTypeToNumber=a.layoutTypeToJSON=a.layoutTypeFromJSON=a.LayoutType=a.protobufPackage=void 0;const j=k(umdExports),_e=_(minimal),et=struct$2;a.protobufPackage="apis.layout.v2";var nt;(function(ot){ot.LAYOUT_TYPE_UNSPECIFIED="LAYOUT_TYPE_UNSPECIFIED",ot.LAYOUT_TYPE_SCENELESS="LAYOUT_TYPE_SCENELESS",ot.LAYOUT_TYPE_SCENE="LAYOUT_TYPE_SCENE"})(nt=a.LayoutType||(a.LayoutType={}));function it(ot){switch(ot){case 0:case"LAYOUT_TYPE_UNSPECIFIED":return nt.LAYOUT_TYPE_UNSPECIFIED;case 1:case"LAYOUT_TYPE_SCENELESS":return nt.LAYOUT_TYPE_SCENELESS;case 2:case"LAYOUT_TYPE_SCENE":return nt.LAYOUT_TYPE_SCENE;default:throw new Jn.Error("Unrecognized enum value "+ot+" for enum LayoutType")}}a.layoutTypeFromJSON=it;function ft(ot){switch(ot){case nt.LAYOUT_TYPE_UNSPECIFIED:return"LAYOUT_TYPE_UNSPECIFIED";case nt.LAYOUT_TYPE_SCENELESS:return"LAYOUT_TYPE_SCENELESS";case nt.LAYOUT_TYPE_SCENE:return"LAYOUT_TYPE_SCENE";default:return"UNKNOWN"}}a.layoutTypeToJSON=ft;function pt(ot){switch(ot){case nt.LAYOUT_TYPE_UNSPECIFIED:return 0;case nt.LAYOUT_TYPE_SCENELESS:return 1;case nt.LAYOUT_TYPE_SCENE:return 2;default:return 0}}a.layoutTypeToNumber=pt;var mt;(function(ot){ot.REQUEST_ANIMATION_MODE_UNSPECIFIED="REQUEST_ANIMATION_MODE_UNSPECIFIED",ot.REQUEST_ANIMATION_MODE_PARALLEL="REQUEST_ANIMATION_MODE_PARALLEL",ot.REQUEST_ANIMATION_MODE_SERIES="REQUEST_ANIMATION_MODE_SERIES"})(mt=a.RequestAnimationMode||(a.RequestAnimationMode={}));function St(ot){switch(ot){case 0:case"REQUEST_ANIMATION_MODE_UNSPECIFIED":return mt.REQUEST_ANIMATION_MODE_UNSPECIFIED;case 1:case"REQUEST_ANIMATION_MODE_PARALLEL":return mt.REQUEST_ANIMATION_MODE_PARALLEL;case 2:case"REQUEST_ANIMATION_MODE_SERIES":return mt.REQUEST_ANIMATION_MODE_SERIES;default:throw new Jn.Error("Unrecognized enum value "+ot+" for enum RequestAnimationMode")}}a.requestAnimationModeFromJSON=St;function yt(ot){switch(ot){case mt.REQUEST_ANIMATION_MODE_UNSPECIFIED:return"REQUEST_ANIMATION_MODE_UNSPECIFIED";case mt.REQUEST_ANIMATION_MODE_PARALLEL:return"REQUEST_ANIMATION_MODE_PARALLEL";case mt.REQUEST_ANIMATION_MODE_SERIES:return"REQUEST_ANIMATION_MODE_SERIES";default:return"UNKNOWN"}}a.requestAnimationModeToJSON=yt;function _t(ot){switch(ot){case mt.REQUEST_ANIMATION_MODE_UNSPECIFIED:return 0;case mt.REQUEST_ANIMATION_MODE_PARALLEL:return 1;case mt.REQUEST_ANIMATION_MODE_SERIES:return 2;default:return 0}}a.requestAnimationModeToNumber=_t;var Tt;(function(ot){ot.EVENT_SUB_TYPE_UNSPECIFIED="EVENT_SUB_TYPE_UNSPECIFIED",ot.EVENT_SUB_TYPE_CREATE="EVENT_SUB_TYPE_CREATE",ot.EVENT_SUB_TYPE_UPDATE="EVENT_SUB_TYPE_UPDATE",ot.EVENT_SUB_TYPE_DELETE="EVENT_SUB_TYPE_DELETE",ot.EVENT_SUB_TYPE_BATCH="EVENT_SUB_TYPE_BATCH"})(Tt=a.EventSubType||(a.EventSubType={}));function gt(ot){switch(ot){case 0:case"EVENT_SUB_TYPE_UNSPECIFIED":return Tt.EVENT_SUB_TYPE_UNSPECIFIED;case 1:case"EVENT_SUB_TYPE_CREATE":return Tt.EVENT_SUB_TYPE_CREATE;case 2:case"EVENT_SUB_TYPE_UPDATE":return Tt.EVENT_SUB_TYPE_UPDATE;case 3:case"EVENT_SUB_TYPE_DELETE":return Tt.EVENT_SUB_TYPE_DELETE;case 4:case"EVENT_SUB_TYPE_BATCH":return Tt.EVENT_SUB_TYPE_BATCH;default:throw new Jn.Error("Unrecognized enum value "+ot+" for enum EventSubType")}}a.eventSubTypeFromJSON=gt;function ht(ot){switch(ot){case Tt.EVENT_SUB_TYPE_UNSPECIFIED:return"EVENT_SUB_TYPE_UNSPECIFIED";case Tt.EVENT_SUB_TYPE_CREATE:return"EVENT_SUB_TYPE_CREATE";case Tt.EVENT_SUB_TYPE_UPDATE:return"EVENT_SUB_TYPE_UPDATE";case Tt.EVENT_SUB_TYPE_DELETE:return"EVENT_SUB_TYPE_DELETE";case Tt.EVENT_SUB_TYPE_BATCH:return"EVENT_SUB_TYPE_BATCH";default:return"UNKNOWN"}}a.eventSubTypeToJSON=ht;function Et(ot){switch(ot){case Tt.EVENT_SUB_TYPE_UNSPECIFIED:return 0;case Tt.EVENT_SUB_TYPE_CREATE:return 1;case Tt.EVENT_SUB_TYPE_UPDATE:return 2;case Tt.EVENT_SUB_TYPE_DELETE:return 3;case Tt.EVENT_SUB_TYPE_BATCH:return 4;default:return 0}}a.eventSubTypeToNumber=Et;var At;(function(ot){ot.EVENT_TYPE_UNSPECIFIED="EVENT_TYPE_UNSPECIFIED",ot.EVENT_TYPE_LAYOUT="EVENT_TYPE_LAYOUT",ot.EVENT_TYPE_LAYER="EVENT_TYPE_LAYER"})(At=a.EventType||(a.EventType={}));function Bt(ot){switch(ot){case 0:case"EVENT_TYPE_UNSPECIFIED":return At.EVENT_TYPE_UNSPECIFIED;case 1:case"EVENT_TYPE_LAYOUT":return At.EVENT_TYPE_LAYOUT;case 2:case"EVENT_TYPE_LAYER":return At.EVENT_TYPE_LAYER;default:throw new Jn.Error("Unrecognized enum value "+ot+" for enum EventType")}}a.eventTypeFromJSON=Bt;function qt(ot){switch(ot){case At.EVENT_TYPE_UNSPECIFIED:return"EVENT_TYPE_UNSPECIFIED";case At.EVENT_TYPE_LAYOUT:return"EVENT_TYPE_LAYOUT";case At.EVENT_TYPE_LAYER:return"EVENT_TYPE_LAYER";default:return"UNKNOWN"}}a.eventTypeToJSON=qt;function zt(ot){switch(ot){case At.EVENT_TYPE_UNSPECIFIED:return 0;case At.EVENT_TYPE_LAYOUT:return 1;case At.EVENT_TYPE_LAYER:return 2;default:return 0}}a.eventTypeToNumber=zt;var Ht;(function(ot){ot.TRANSITION_DIRECTION_UNSPECIFIED="TRANSITION_DIRECTION_UNSPECIFIED",ot.TRANSITION_DIRECTION_LEFT="TRANSITION_DIRECTION_LEFT",ot.TRANSITION_DIRECTION_RIGHT="TRANSITION_DIRECTION_RIGHT",ot.TRANSITION_DIRECTION_UP="TRANSITION_DIRECTION_UP",ot.TRANSITION_DIRECTION_DOWN="TRANSITION_DIRECTION_DOWN"})(Ht=a.Transition_TransitionDirection||(a.Transition_TransitionDirection={}));function ct(ot){switch(ot){case 0:case"TRANSITION_DIRECTION_UNSPECIFIED":return Ht.TRANSITION_DIRECTION_UNSPECIFIED;case 1:case"TRANSITION_DIRECTION_LEFT":return Ht.TRANSITION_DIRECTION_LEFT;case 2:case"TRANSITION_DIRECTION_RIGHT":return Ht.TRANSITION_DIRECTION_RIGHT;case 3:case"TRANSITION_DIRECTION_UP":return Ht.TRANSITION_DIRECTION_UP;case 4:case"TRANSITION_DIRECTION_DOWN":return Ht.TRANSITION_DIRECTION_DOWN;default:throw new Jn.Error("Unrecognized enum value "+ot+" for enum Transition_TransitionDirection")}}a.transition_TransitionDirectionFromJSON=ct;function dt(ot){switch(ot){case Ht.TRANSITION_DIRECTION_UNSPECIFIED:return"TRANSITION_DIRECTION_UNSPECIFIED";case Ht.TRANSITION_DIRECTION_LEFT:return"TRANSITION_DIRECTION_LEFT";case Ht.TRANSITION_DIRECTION_RIGHT:return"TRANSITION_DIRECTION_RIGHT";case Ht.TRANSITION_DIRECTION_UP:return"TRANSITION_DIRECTION_UP";case Ht.TRANSITION_DIRECTION_DOWN:return"TRANSITION_DIRECTION_DOWN";default:return"UNKNOWN"}}a.transition_TransitionDirectionToJSON=dt;function lt(ot){switch(ot){case Ht.TRANSITION_DIRECTION_UNSPECIFIED:return 0;case Ht.TRANSITION_DIRECTION_LEFT:return 1;case Ht.TRANSITION_DIRECTION_RIGHT:return 2;case Ht.TRANSITION_DIRECTION_UP:return 3;case Ht.TRANSITION_DIRECTION_DOWN:return 4;default:return 0}}a.transition_TransitionDirectionToNumber=lt;var kt;(function(ot){ot.TRANSITION_SWIPE_TYPE_UNSPECIFIED="TRANSITION_SWIPE_TYPE_UNSPECIFIED",ot.TRANSITION_SWIPE_TYPE_COMBINED="TRANSITION_SWIPE_TYPE_COMBINED",ot.TRANSITION_SWIPE_TYPE_SOURCE="TRANSITION_SWIPE_TYPE_SOURCE",ot.TRANSITION_SWIPE_TYPE_DESTINATION="TRANSITION_SWIPE_TYPE_DESTINATION"})(kt=a.Transition_TransitionSwipeType||(a.Transition_TransitionSwipeType={}));function Lt(ot){switch(ot){case 0:case"TRANSITION_SWIPE_TYPE_UNSPECIFIED":return kt.TRANSITION_SWIPE_TYPE_UNSPECIFIED;case 1:case"TRANSITION_SWIPE_TYPE_COMBINED":return kt.TRANSITION_SWIPE_TYPE_COMBINED;case 2:case"TRANSITION_SWIPE_TYPE_SOURCE":return kt.TRANSITION_SWIPE_TYPE_SOURCE;case 3:case"TRANSITION_SWIPE_TYPE_DESTINATION":return kt.TRANSITION_SWIPE_TYPE_DESTINATION;default:throw new Jn.Error("Unrecognized enum value "+ot+" for enum Transition_TransitionSwipeType")}}a.transition_TransitionSwipeTypeFromJSON=Lt;function Jt(ot){switch(ot){case kt.TRANSITION_SWIPE_TYPE_UNSPECIFIED:return"TRANSITION_SWIPE_TYPE_UNSPECIFIED";case kt.TRANSITION_SWIPE_TYPE_COMBINED:return"TRANSITION_SWIPE_TYPE_COMBINED";case kt.TRANSITION_SWIPE_TYPE_SOURCE:return"TRANSITION_SWIPE_TYPE_SOURCE";case kt.TRANSITION_SWIPE_TYPE_DESTINATION:return"TRANSITION_SWIPE_TYPE_DESTINATION";default:return"UNKNOWN"}}a.transition_TransitionSwipeTypeToJSON=Jt;function en(ot){switch(ot){case kt.TRANSITION_SWIPE_TYPE_UNSPECIFIED:return 0;case kt.TRANSITION_SWIPE_TYPE_COMBINED:return 1;case kt.TRANSITION_SWIPE_TYPE_SOURCE:return 2;case kt.TRANSITION_SWIPE_TYPE_DESTINATION:return 3;default:return 0}}a.transition_TransitionSwipeTypeToNumber=en;function Qt(){return{fromLayoutIds:[],cut:void 0,crossfade:void 0,fadeToColor:void 0,swipe:void 0,stinger:void 0}}a.Transition={encode(ot,bt=_e.Writer.create()){for(const Ct of ot.fromLayoutIds)bt.uint32(10).string(Ct);return ot.cut!==void 0&&a.Transition_TransitionCut.encode(ot.cut,bt.uint32(82).fork()).ldelim(),ot.crossfade!==void 0&&a.Transition_TransitionCrossfade.encode(ot.crossfade,bt.uint32(90).fork()).ldelim(),ot.fadeToColor!==void 0&&a.Transition_TransitionFadeToColor.encode(ot.fadeToColor,bt.uint32(98).fork()).ldelim(),ot.swipe!==void 0&&a.Transition_TransitionSwipe.encode(ot.swipe,bt.uint32(106).fork()).ldelim(),ot.stinger!==void 0&&a.Transition_TransitionStinger.encode(ot.stinger,bt.uint32(114).fork()).ldelim(),bt},decode(ot,bt){const Ct=ot instanceof _e.Reader?ot:new _e.Reader(ot);let cn=bt===void 0?Ct.len:Ct.pos+bt;const Yt=Qt();for(;Ct.pos<cn;){const dn=Ct.uint32();switch(dn>>>3){case 1:Yt.fromLayoutIds.push(Ct.string());break;case 10:Yt.cut=a.Transition_TransitionCut.decode(Ct,Ct.uint32());break;case 11:Yt.crossfade=a.Transition_TransitionCrossfade.decode(Ct,Ct.uint32());break;case 12:Yt.fadeToColor=a.Transition_TransitionFadeToColor.decode(Ct,Ct.uint32());break;case 13:Yt.swipe=a.Transition_TransitionSwipe.decode(Ct,Ct.uint32());break;case 14:Yt.stinger=a.Transition_TransitionStinger.decode(Ct,Ct.uint32());break;default:Ct.skipType(dn&7);break}}return Yt},fromJSON(ot){return{fromLayoutIds:Array.isArray(ot==null?void 0:ot.fromLayoutIds)?ot.fromLayoutIds.map(bt=>String(bt)):[],cut:mn(ot.cut)?a.Transition_TransitionCut.fromJSON(ot.cut):void 0,crossfade:mn(ot.crossfade)?a.Transition_TransitionCrossfade.fromJSON(ot.crossfade):void 0,fadeToColor:mn(ot.fadeToColor)?a.Transition_TransitionFadeToColor.fromJSON(ot.fadeToColor):void 0,swipe:mn(ot.swipe)?a.Transition_TransitionSwipe.fromJSON(ot.swipe):void 0,stinger:mn(ot.stinger)?a.Transition_TransitionStinger.fromJSON(ot.stinger):void 0}},toJSON(ot){const bt={};return ot.fromLayoutIds?bt.fromLayoutIds=ot.fromLayoutIds.map(Ct=>Ct):bt.fromLayoutIds=[],ot.cut!==void 0&&(bt.cut=ot.cut?a.Transition_TransitionCut.toJSON(ot.cut):void 0),ot.crossfade!==void 0&&(bt.crossfade=ot.crossfade?a.Transition_TransitionCrossfade.toJSON(ot.crossfade):void 0),ot.fadeToColor!==void 0&&(bt.fadeToColor=ot.fadeToColor?a.Transition_TransitionFadeToColor.toJSON(ot.fadeToColor):void 0),ot.swipe!==void 0&&(bt.swipe=ot.swipe?a.Transition_TransitionSwipe.toJSON(ot.swipe):void 0),ot.stinger!==void 0&&(bt.stinger=ot.stinger?a.Transition_TransitionStinger.toJSON(ot.stinger):void 0),bt},fromPartial(ot){var bt;const Ct=Qt();return Ct.fromLayoutIds=((bt=ot.fromLayoutIds)===null||bt===void 0?void 0:bt.map(cn=>cn))||[],Ct.cut=ot.cut!==void 0&&ot.cut!==null?a.Transition_TransitionCut.fromPartial(ot.cut):void 0,Ct.crossfade=ot.crossfade!==void 0&&ot.crossfade!==null?a.Transition_TransitionCrossfade.fromPartial(ot.crossfade):void 0,Ct.fadeToColor=ot.fadeToColor!==void 0&&ot.fadeToColor!==null?a.Transition_TransitionFadeToColor.fromPartial(ot.fadeToColor):void 0,Ct.swipe=ot.swipe!==void 0&&ot.swipe!==null?a.Transition_TransitionSwipe.fromPartial(ot.swipe):void 0,Ct.stinger=ot.stinger!==void 0&&ot.stinger!==null?a.Transition_TransitionStinger.fromPartial(ot.stinger):void 0,Ct}};function xt(){return{url:"",volume:0}}a.Transition_TransitionMediaType={encode(ot,bt=_e.Writer.create()){return ot.url!==""&&bt.uint32(10).string(ot.url),ot.volume!==0&&bt.uint32(17).double(ot.volume),bt},decode(ot,bt){const Ct=ot instanceof _e.Reader?ot:new _e.Reader(ot);let cn=bt===void 0?Ct.len:Ct.pos+bt;const Yt=xt();for(;Ct.pos<cn;){const dn=Ct.uint32();switch(dn>>>3){case 1:Yt.url=Ct.string();break;case 2:Yt.volume=Ct.double();break;default:Ct.skipType(dn&7);break}}return Yt},fromJSON(ot){return{url:mn(ot.url)?String(ot.url):"",volume:mn(ot.volume)?Number(ot.volume):0}},toJSON(ot){const bt={};return ot.url!==void 0&&(bt.url=ot.url),ot.volume!==void 0&&(bt.volume=ot.volume),bt},fromPartial(ot){var bt,Ct;const cn=xt();return cn.url=(bt=ot.url)!==null&&bt!==void 0?bt:"",cn.volume=(Ct=ot.volume)!==null&&Ct!==void 0?Ct:0,cn}};function rn(){return{}}a.Transition_TransitionCut={encode(ot,bt=_e.Writer.create()){return bt},decode(ot,bt){const Ct=ot instanceof _e.Reader?ot:new _e.Reader(ot);let cn=bt===void 0?Ct.len:Ct.pos+bt;const Yt=rn();for(;Ct.pos<cn;){const dn=Ct.uint32();switch(dn>>>3){default:Ct.skipType(dn&7);break}}return Yt},fromJSON(ot){return{}},toJSON(ot){return{}},fromPartial(ot){return rn()}};function Sn(){return{durationMs:0,backgroundColor:""}}a.Transition_TransitionFadeToColor={encode(ot,bt=_e.Writer.create()){return ot.durationMs!==0&&bt.uint32(8).int32(ot.durationMs),ot.backgroundColor!==""&&bt.uint32(18).string(ot.backgroundColor),bt},decode(ot,bt){const Ct=ot instanceof _e.Reader?ot:new _e.Reader(ot);let cn=bt===void 0?Ct.len:Ct.pos+bt;const Yt=Sn();for(;Ct.pos<cn;){const dn=Ct.uint32();switch(dn>>>3){case 1:Yt.durationMs=Ct.int32();break;case 2:Yt.backgroundColor=Ct.string();break;default:Ct.skipType(dn&7);break}}return Yt},fromJSON(ot){return{durationMs:mn(ot.durationMs)?Number(ot.durationMs):0,backgroundColor:mn(ot.backgroundColor)?String(ot.backgroundColor):""}},toJSON(ot){const bt={};return ot.durationMs!==void 0&&(bt.durationMs=Math.round(ot.durationMs)),ot.backgroundColor!==void 0&&(bt.backgroundColor=ot.backgroundColor),bt},fromPartial(ot){var bt,Ct;const cn=Sn();return cn.durationMs=(bt=ot.durationMs)!==null&&bt!==void 0?bt:0,cn.backgroundColor=(Ct=ot.backgroundColor)!==null&&Ct!==void 0?Ct:"",cn}};function bn(){return{durationMs:0}}a.Transition_TransitionCrossfade={encode(ot,bt=_e.Writer.create()){return ot.durationMs!==0&&bt.uint32(8).int32(ot.durationMs),bt},decode(ot,bt){const Ct=ot instanceof _e.Reader?ot:new _e.Reader(ot);let cn=bt===void 0?Ct.len:Ct.pos+bt;const Yt=bn();for(;Ct.pos<cn;){const dn=Ct.uint32();switch(dn>>>3){case 1:Yt.durationMs=Ct.int32();break;default:Ct.skipType(dn&7);break}}return Yt},fromJSON(ot){return{durationMs:mn(ot.durationMs)?Number(ot.durationMs):0}},toJSON(ot){const bt={};return ot.durationMs!==void 0&&(bt.durationMs=Math.round(ot.durationMs)),bt},fromPartial(ot){var bt;const Ct=bn();return Ct.durationMs=(bt=ot.durationMs)!==null&&bt!==void 0?bt:0,Ct}};function kn(){return{durationMs:0,direction:Ht.TRANSITION_DIRECTION_UNSPECIFIED,combinedAnimation:kt.TRANSITION_SWIPE_TYPE_UNSPECIFIED}}a.Transition_TransitionSwipe={encode(ot,bt=_e.Writer.create()){return ot.durationMs!==0&&bt.uint32(8).int32(ot.durationMs),ot.direction!==Ht.TRANSITION_DIRECTION_UNSPECIFIED&&bt.uint32(16).int32(lt(ot.direction)),ot.combinedAnimation!==kt.TRANSITION_SWIPE_TYPE_UNSPECIFIED&&bt.uint32(24).int32(en(ot.combinedAnimation)),bt},decode(ot,bt){const Ct=ot instanceof _e.Reader?ot:new _e.Reader(ot);let cn=bt===void 0?Ct.len:Ct.pos+bt;const Yt=kn();for(;Ct.pos<cn;){const dn=Ct.uint32();switch(dn>>>3){case 1:Yt.durationMs=Ct.int32();break;case 2:Yt.direction=ct(Ct.int32());break;case 3:Yt.combinedAnimation=Lt(Ct.int32());break;default:Ct.skipType(dn&7);break}}return Yt},fromJSON(ot){return{durationMs:mn(ot.durationMs)?Number(ot.durationMs):0,direction:mn(ot.direction)?ct(ot.direction):Ht.TRANSITION_DIRECTION_UNSPECIFIED,combinedAnimation:mn(ot.combinedAnimation)?Lt(ot.combinedAnimation):kt.TRANSITION_SWIPE_TYPE_UNSPECIFIED}},toJSON(ot){const bt={};return ot.durationMs!==void 0&&(bt.durationMs=Math.round(ot.durationMs)),ot.direction!==void 0&&(bt.direction=dt(ot.direction)),ot.combinedAnimation!==void 0&&(bt.combinedAnimation=Jt(ot.combinedAnimation)),bt},fromPartial(ot){var bt,Ct,cn;const Yt=kn();return Yt.durationMs=(bt=ot.durationMs)!==null&&bt!==void 0?bt:0,Yt.direction=(Ct=ot.direction)!==null&&Ct!==void 0?Ct:Ht.TRANSITION_DIRECTION_UNSPECIFIED,Yt.combinedAnimation=(cn=ot.combinedAnimation)!==null&&cn!==void 0?cn:kt.TRANSITION_SWIPE_TYPE_UNSPECIFIED,Yt}};function _n(){return{cutPointMs:0,media:void 0}}a.Transition_TransitionStingerCut={encode(ot,bt=_e.Writer.create()){return ot.cutPointMs!==0&&bt.uint32(8).int32(ot.cutPointMs),ot.media!==void 0&&a.Transition_TransitionMediaType.encode(ot.media,bt.uint32(18).fork()).ldelim(),bt},decode(ot,bt){const Ct=ot instanceof _e.Reader?ot:new _e.Reader(ot);let cn=bt===void 0?Ct.len:Ct.pos+bt;const Yt=_n();for(;Ct.pos<cn;){const dn=Ct.uint32();switch(dn>>>3){case 1:Yt.cutPointMs=Ct.int32();break;case 2:Yt.media=a.Transition_TransitionMediaType.decode(Ct,Ct.uint32());break;default:Ct.skipType(dn&7);break}}return Yt},fromJSON(ot){return{cutPointMs:mn(ot.cutPointMs)?Number(ot.cutPointMs):0,media:mn(ot.media)?a.Transition_TransitionMediaType.fromJSON(ot.media):void 0}},toJSON(ot){const bt={};return ot.cutPointMs!==void 0&&(bt.cutPointMs=Math.round(ot.cutPointMs)),ot.media!==void 0&&(bt.media=ot.media?a.Transition_TransitionMediaType.toJSON(ot.media):void 0),bt},fromPartial(ot){var bt;const Ct=_n();return Ct.cutPointMs=(bt=ot.cutPointMs)!==null&&bt!==void 0?bt:0,Ct.media=ot.media!==void 0&&ot.media!==null?a.Transition_TransitionMediaType.fromPartial(ot.media):void 0,Ct}};function tn(){return{cut:void 0}}a.Transition_TransitionStinger={encode(ot,bt=_e.Writer.create()){return ot.cut!==void 0&&a.Transition_TransitionStingerCut.encode(ot.cut,bt.uint32(10).fork()).ldelim(),bt},decode(ot,bt){const Ct=ot instanceof _e.Reader?ot:new _e.Reader(ot);let cn=bt===void 0?Ct.len:Ct.pos+bt;const Yt=tn();for(;Ct.pos<cn;){const dn=Ct.uint32();switch(dn>>>3){case 1:Yt.cut=a.Transition_TransitionStingerCut.decode(Ct,Ct.uint32());break;default:Ct.skipType(dn&7);break}}return Yt},fromJSON(ot){return{cut:mn(ot.cut)?a.Transition_TransitionStingerCut.fromJSON(ot.cut):void 0}},toJSON(ot){const bt={};return ot.cut!==void 0&&(bt.cut=ot.cut?a.Transition_TransitionStingerCut.toJSON(ot.cut):void 0),bt},fromPartial(ot){const bt=tn();return bt.cut=ot.cut!==void 0&&ot.cut!==null?a.Transition_TransitionStingerCut.fromPartial(ot.cut):void 0,bt}};function pn(){return{id:"",width:0,height:0,metadata:void 0,projectId:void 0,collectionId:void 0,type:void 0,transitions:[],requestMetadata:void 0}}a.Layout={encode(ot,bt=_e.Writer.create()){ot.id!==""&&bt.uint32(10).string(ot.id),ot.width!==0&&bt.uint32(16).int32(ot.width),ot.height!==0&&bt.uint32(24).int32(ot.height),ot.metadata!==void 0&&et.Value.encode(et.Value.wrap(ot.metadata),bt.uint32(50).fork()).ldelim(),ot.projectId!==void 0&&bt.uint32(58).string(ot.projectId),ot.collectionId!==void 0&&bt.uint32(66).string(ot.collectionId),ot.type!==void 0&&bt.uint32(72).int32(pt(ot.type));for(const Ct of ot.transitions)a.Transition.encode(Ct,bt.uint32(82).fork()).ldelim();return ot.requestMetadata!==void 0&&et.Value.encode(et.Value.wrap(ot.requestMetadata),bt.uint32(810).fork()).ldelim(),bt},decode(ot,bt){const Ct=ot instanceof _e.Reader?ot:new _e.Reader(ot);let cn=bt===void 0?Ct.len:Ct.pos+bt;const Yt=pn();for(;Ct.pos<cn;){const dn=Ct.uint32();switch(dn>>>3){case 1:Yt.id=Ct.string();break;case 2:Yt.width=Ct.int32();break;case 3:Yt.height=Ct.int32();break;case 6:Yt.metadata=et.Value.unwrap(et.Value.decode(Ct,Ct.uint32()));break;case 7:Yt.projectId=Ct.string();break;case 8:Yt.collectionId=Ct.string();break;case 9:Yt.type=it(Ct.int32());break;case 10:Yt.transitions.push(a.Transition.decode(Ct,Ct.uint32()));break;case 101:Yt.requestMetadata=et.Value.unwrap(et.Value.decode(Ct,Ct.uint32()));break;default:Ct.skipType(dn&7);break}}return Yt},fromJSON(ot){return{id:mn(ot.id)?String(ot.id):"",width:mn(ot.width)?Number(ot.width):0,height:mn(ot.height)?Number(ot.height):0,metadata:mn(ot==null?void 0:ot.metadata)?ot.metadata:void 0,projectId:mn(ot.projectId)?String(ot.projectId):void 0,collectionId:mn(ot.collectionId)?String(ot.collectionId):void 0,type:mn(ot.type)?it(ot.type):void 0,transitions:Array.isArray(ot==null?void 0:ot.transitions)?ot.transitions.map(bt=>a.Transition.fromJSON(bt)):[],requestMetadata:mn(ot==null?void 0:ot.requestMetadata)?ot.requestMetadata:void 0}},toJSON(ot){const bt={};return ot.id!==void 0&&(bt.id=ot.id),ot.width!==void 0&&(bt.width=Math.round(ot.width)),ot.height!==void 0&&(bt.height=Math.round(ot.height)),ot.metadata!==void 0&&(bt.metadata=ot.metadata),ot.projectId!==void 0&&(bt.projectId=ot.projectId),ot.collectionId!==void 0&&(bt.collectionId=ot.collectionId),ot.type!==void 0&&(bt.type=ot.type!==void 0?ft(ot.type):void 0),ot.transitions?bt.transitions=ot.transitions.map(Ct=>Ct?a.Transition.toJSON(Ct):void 0):bt.transitions=[],ot.requestMetadata!==void 0&&(bt.requestMetadata=ot.requestMetadata),bt},fromPartial(ot){var bt,Ct,cn,Yt,dn,Bn,Kn,Qn,Vn;const qn=pn();return qn.id=(bt=ot.id)!==null&&bt!==void 0?bt:"",qn.width=(Ct=ot.width)!==null&&Ct!==void 0?Ct:0,qn.height=(cn=ot.height)!==null&&cn!==void 0?cn:0,qn.metadata=(Yt=ot.metadata)!==null&&Yt!==void 0?Yt:void 0,qn.projectId=(dn=ot.projectId)!==null&&dn!==void 0?dn:void 0,qn.collectionId=(Bn=ot.collectionId)!==null&&Bn!==void 0?Bn:void 0,qn.type=(Kn=ot.type)!==null&&Kn!==void 0?Kn:void 0,qn.transitions=((Qn=ot.transitions)===null||Qn===void 0?void 0:Qn.map(Xn=>a.Transition.fromPartial(Xn)))||[],qn.requestMetadata=(Vn=ot.requestMetadata)!==null&&Vn!==void 0?Vn:void 0,qn}};function yn(){return{type:"",data:void 0,x:void 0,y:void 0,width:void 0,height:void 0,rotation:0,opacity:0,scale:0,hidden:!1,children:void 0,metadata:void 0,id:"",layoutId:"",requestMetadata:void 0,requestAnimation:[]}}a.Layer={encode(ot,bt=_e.Writer.create()){ot.type!==""&&bt.uint32(10).string(ot.type),ot.data!==void 0&&et.Struct.encode(et.Struct.wrap(ot.data),bt.uint32(18).fork()).ldelim(),ot.x!==void 0&&et.Value.encode(et.Value.wrap(ot.x),bt.uint32(26).fork()).ldelim(),ot.y!==void 0&&et.Value.encode(et.Value.wrap(ot.y),bt.uint32(34).fork()).ldelim(),ot.width!==void 0&&et.Value.encode(et.Value.wrap(ot.width),bt.uint32(42).fork()).ldelim(),ot.height!==void 0&&et.Value.encode(et.Value.wrap(ot.height),bt.uint32(50).fork()).ldelim(),ot.rotation!==0&&bt.uint32(57).double(ot.rotation),ot.opacity!==0&&bt.uint32(65).double(ot.opacity),ot.scale!==0&&bt.uint32(73).double(ot.scale),ot.hidden===!0&&bt.uint32(80).bool(ot.hidden),ot.children!==void 0&&et.ListValue.encode(et.ListValue.wrap(ot.children),bt.uint32(98).fork()).ldelim(),ot.metadata!==void 0&&et.Value.encode(et.Value.wrap(ot.metadata),bt.uint32(114).fork()).ldelim(),ot.id!==""&&bt.uint32(802).string(ot.id),ot.layoutId!==""&&bt.uint32(818).string(ot.layoutId),ot.requestMetadata!==void 0&&et.Value.encode(et.Value.wrap(ot.requestMetadata),bt.uint32(810).fork()).ldelim();for(const Ct of ot.requestAnimation)a.LayerAnimation.encode(Ct,bt.uint32(826).fork()).ldelim();return bt},decode(ot,bt){const Ct=ot instanceof _e.Reader?ot:new _e.Reader(ot);let cn=bt===void 0?Ct.len:Ct.pos+bt;const Yt=yn();for(;Ct.pos<cn;){const dn=Ct.uint32();switch(dn>>>3){case 1:Yt.type=Ct.string();break;case 2:Yt.data=et.Struct.unwrap(et.Struct.decode(Ct,Ct.uint32()));break;case 3:Yt.x=et.Value.unwrap(et.Value.decode(Ct,Ct.uint32()));break;case 4:Yt.y=et.Value.unwrap(et.Value.decode(Ct,Ct.uint32()));break;case 5:Yt.width=et.Value.unwrap(et.Value.decode(Ct,Ct.uint32()));break;case 6:Yt.height=et.Value.unwrap(et.Value.decode(Ct,Ct.uint32()));break;case 7:Yt.rotation=Ct.double();break;case 8:Yt.opacity=Ct.double();break;case 9:Yt.scale=Ct.double();break;case 10:Yt.hidden=Ct.bool();break;case 12:Yt.children=et.ListValue.unwrap(et.ListValue.decode(Ct,Ct.uint32()));break;case 14:Yt.metadata=et.Value.unwrap(et.Value.decode(Ct,Ct.uint32()));break;case 100:Yt.id=Ct.string();break;case 102:Yt.layoutId=Ct.string();break;case 101:Yt.requestMetadata=et.Value.unwrap(et.Value.decode(Ct,Ct.uint32()));break;case 103:Yt.requestAnimation.push(a.LayerAnimation.decode(Ct,Ct.uint32()));break;default:Ct.skipType(dn&7);break}}return Yt},fromJSON(ot){return{type:mn(ot.type)?String(ot.type):"",data:zn(ot.data)?ot.data:void 0,x:mn(ot==null?void 0:ot.x)?ot.x:void 0,y:mn(ot==null?void 0:ot.y)?ot.y:void 0,width:mn(ot==null?void 0:ot.width)?ot.width:void 0,height:mn(ot==null?void 0:ot.height)?ot.height:void 0,rotation:mn(ot.rotation)?Number(ot.rotation):0,opacity:mn(ot.opacity)?Number(ot.opacity):0,scale:mn(ot.scale)?Number(ot.scale):0,hidden:mn(ot.hidden)?!!ot.hidden:!1,children:Array.isArray(ot.children)?[...ot.children]:void 0,metadata:mn(ot==null?void 0:ot.metadata)?ot.metadata:void 0,id:mn(ot.id)?String(ot.id):"",layoutId:mn(ot.layoutId)?String(ot.layoutId):"",requestMetadata:mn(ot==null?void 0:ot.requestMetadata)?ot.requestMetadata:void 0,requestAnimation:Array.isArray(ot==null?void 0:ot.requestAnimation)?ot.requestAnimation.map(bt=>a.LayerAnimation.fromJSON(bt)):[]}},toJSON(ot){const bt={};return ot.type!==void 0&&(bt.type=ot.type),ot.data!==void 0&&(bt.data=ot.data),ot.x!==void 0&&(bt.x=ot.x),ot.y!==void 0&&(bt.y=ot.y),ot.width!==void 0&&(bt.width=ot.width),ot.height!==void 0&&(bt.height=ot.height),ot.rotation!==void 0&&(bt.rotation=ot.rotation),ot.opacity!==void 0&&(bt.opacity=ot.opacity),ot.scale!==void 0&&(bt.scale=ot.scale),ot.hidden!==void 0&&(bt.hidden=ot.hidden),ot.children!==void 0&&(bt.children=ot.children),ot.metadata!==void 0&&(bt.metadata=ot.metadata),ot.id!==void 0&&(bt.id=ot.id),ot.layoutId!==void 0&&(bt.layoutId=ot.layoutId),ot.requestMetadata!==void 0&&(bt.requestMetadata=ot.requestMetadata),ot.requestAnimation?bt.requestAnimation=ot.requestAnimation.map(Ct=>Ct?a.LayerAnimation.toJSON(Ct):void 0):bt.requestAnimation=[],bt},fromPartial(ot){var bt,Ct,cn,Yt,dn,Bn,Kn,Qn,Vn,qn,Xn,jn,er,tr,Zn,Wn;const Mn=yn();return Mn.type=(bt=ot.type)!==null&&bt!==void 0?bt:"",Mn.data=(Ct=ot.data)!==null&&Ct!==void 0?Ct:void 0,Mn.x=(cn=ot.x)!==null&&cn!==void 0?cn:void 0,Mn.y=(Yt=ot.y)!==null&&Yt!==void 0?Yt:void 0,Mn.width=(dn=ot.width)!==null&&dn!==void 0?dn:void 0,Mn.height=(Bn=ot.height)!==null&&Bn!==void 0?Bn:void 0,Mn.rotation=(Kn=ot.rotation)!==null&&Kn!==void 0?Kn:0,Mn.opacity=(Qn=ot.opacity)!==null&&Qn!==void 0?Qn:0,Mn.scale=(Vn=ot.scale)!==null&&Vn!==void 0?Vn:0,Mn.hidden=(qn=ot.hidden)!==null&&qn!==void 0?qn:!1,Mn.children=(Xn=ot.children)!==null&&Xn!==void 0?Xn:void 0,Mn.metadata=(jn=ot.metadata)!==null&&jn!==void 0?jn:void 0,Mn.id=(er=ot.id)!==null&&er!==void 0?er:"",Mn.layoutId=(tr=ot.layoutId)!==null&&tr!==void 0?tr:"",Mn.requestMetadata=(Zn=ot.requestMetadata)!==null&&Zn!==void 0?Zn:void 0,Mn.requestAnimation=((Wn=ot.requestAnimation)===null||Wn===void 0?void 0:Wn.map(ar=>a.LayerAnimation.fromPartial(ar)))||[],Mn}};function In(){return{layoutId:"",layerId:"",payload:void 0}}a.DeleteLayerRequest={encode(ot,bt=_e.Writer.create()){return ot.layoutId!==""&&bt.uint32(10).string(ot.layoutId),ot.layerId!==""&&bt.uint32(18).string(ot.layerId),ot.payload!==void 0&&a.DeleteLayerPayload.encode(ot.payload,bt.uint32(26).fork()).ldelim(),bt},decode(ot,bt){const Ct=ot instanceof _e.Reader?ot:new _e.Reader(ot);let cn=bt===void 0?Ct.len:Ct.pos+bt;const Yt=In();for(;Ct.pos<cn;){const dn=Ct.uint32();switch(dn>>>3){case 1:Yt.layoutId=Ct.string();break;case 2:Yt.layerId=Ct.string();break;case 3:Yt.payload=a.DeleteLayerPayload.decode(Ct,Ct.uint32());break;default:Ct.skipType(dn&7);break}}return Yt},fromJSON(ot){return{layoutId:mn(ot.layoutId)?String(ot.layoutId):"",layerId:mn(ot.layerId)?String(ot.layerId):"",payload:mn(ot.payload)?a.DeleteLayerPayload.fromJSON(ot.payload):void 0}},toJSON(ot){const bt={};return ot.layoutId!==void 0&&(bt.layoutId=ot.layoutId),ot.layerId!==void 0&&(bt.layerId=ot.layerId),ot.payload!==void 0&&(bt.payload=ot.payload?a.DeleteLayerPayload.toJSON(ot.payload):void 0),bt},fromPartial(ot){var bt,Ct;const cn=In();return cn.layoutId=(bt=ot.layoutId)!==null&&bt!==void 0?bt:"",cn.layerId=(Ct=ot.layerId)!==null&&Ct!==void 0?Ct:"",cn.payload=ot.payload!==void 0&&ot.payload!==null?a.DeleteLayerPayload.fromPartial(ot.payload):void 0,cn}};function sn(){return{id:"",layoutId:"",requestMetadata:void 0}}a.DeleteLayerResponse={encode(ot,bt=_e.Writer.create()){return ot.id!==""&&bt.uint32(10).string(ot.id),ot.layoutId!==""&&bt.uint32(18).string(ot.layoutId),ot.requestMetadata!==void 0&&et.Value.encode(et.Value.wrap(ot.requestMetadata),bt.uint32(802).fork()).ldelim(),bt},decode(ot,bt){const Ct=ot instanceof _e.Reader?ot:new _e.Reader(ot);let cn=bt===void 0?Ct.len:Ct.pos+bt;const Yt=sn();for(;Ct.pos<cn;){const dn=Ct.uint32();switch(dn>>>3){case 1:Yt.id=Ct.string();break;case 2:Yt.layoutId=Ct.string();break;case 100:Yt.requestMetadata=et.Value.unwrap(et.Value.decode(Ct,Ct.uint32()));break;default:Ct.skipType(dn&7);break}}return Yt},fromJSON(ot){return{id:mn(ot.id)?String(ot.id):"",layoutId:mn(ot.layoutId)?String(ot.layoutId):"",requestMetadata:mn(ot==null?void 0:ot.requestMetadata)?ot.requestMetadata:void 0}},toJSON(ot){const bt={};return ot.id!==void 0&&(bt.id=ot.id),ot.layoutId!==void 0&&(bt.layoutId=ot.layoutId),ot.requestMetadata!==void 0&&(bt.requestMetadata=ot.requestMetadata),bt},fromPartial(ot){var bt,Ct,cn;const Yt=sn();return Yt.id=(bt=ot.id)!==null&&bt!==void 0?bt:"",Yt.layoutId=(Ct=ot.layoutId)!==null&&Ct!==void 0?Ct:"",Yt.requestMetadata=(cn=ot.requestMetadata)!==null&&cn!==void 0?cn:void 0,Yt}};function vn(){return{layers:[],layoutId:"",requestMetadata:void 0,requestAnimationMode:mt.REQUEST_ANIMATION_MODE_UNSPECIFIED}}a.BatchLayerResponse={encode(ot,bt=_e.Writer.create()){for(const Ct of ot.layers)a.BatchLayerResponse_BatchLayerItem.encode(Ct,bt.uint32(18).fork()).ldelim();return ot.layoutId!==""&&bt.uint32(26).string(ot.layoutId),ot.requestMetadata!==void 0&&et.Value.encode(et.Value.wrap(ot.requestMetadata),bt.uint32(802).fork()).ldelim(),ot.requestAnimationMode!==mt.REQUEST_ANIMATION_MODE_UNSPECIFIED&&bt.uint32(808).int32(_t(ot.requestAnimationMode)),bt},decode(ot,bt){const Ct=ot instanceof _e.Reader?ot:new _e.Reader(ot);let cn=bt===void 0?Ct.len:Ct.pos+bt;const Yt=vn();for(;Ct.pos<cn;){const dn=Ct.uint32();switch(dn>>>3){case 2:Yt.layers.push(a.BatchLayerResponse_BatchLayerItem.decode(Ct,Ct.uint32()));break;case 3:Yt.layoutId=Ct.string();break;case 100:Yt.requestMetadata=et.Value.unwrap(et.Value.decode(Ct,Ct.uint32()));break;case 101:Yt.requestAnimationMode=St(Ct.int32());break;default:Ct.skipType(dn&7);break}}return Yt},fromJSON(ot){return{layers:Array.isArray(ot==null?void 0:ot.layers)?ot.layers.map(bt=>a.BatchLayerResponse_BatchLayerItem.fromJSON(bt)):[],layoutId:mn(ot.layoutId)?String(ot.layoutId):"",requestMetadata:mn(ot==null?void 0:ot.requestMetadata)?ot.requestMetadata:void 0,requestAnimationMode:mn(ot.requestAnimationMode)?St(ot.requestAnimationMode):mt.REQUEST_ANIMATION_MODE_UNSPECIFIED}},toJSON(ot){const bt={};return ot.layers?bt.layers=ot.layers.map(Ct=>Ct?a.BatchLayerResponse_BatchLayerItem.toJSON(Ct):void 0):bt.layers=[],ot.layoutId!==void 0&&(bt.layoutId=ot.layoutId),ot.requestMetadata!==void 0&&(bt.requestMetadata=ot.requestMetadata),ot.requestAnimationMode!==void 0&&(bt.requestAnimationMode=yt(ot.requestAnimationMode)),bt},fromPartial(ot){var bt,Ct,cn,Yt;const dn=vn();return dn.layers=((bt=ot.layers)===null||bt===void 0?void 0:bt.map(Bn=>a.BatchLayerResponse_BatchLayerItem.fromPartial(Bn)))||[],dn.layoutId=(Ct=ot.layoutId)!==null&&Ct!==void 0?Ct:"",dn.requestMetadata=(cn=ot.requestMetadata)!==null&&cn!==void 0?cn:void 0,dn.requestAnimationMode=(Yt=ot.requestAnimationMode)!==null&&Yt!==void 0?Yt:mt.REQUEST_ANIMATION_MODE_UNSPECIFIED,dn}};function Cn(){return{create:void 0,update:void 0,delete:void 0}}a.BatchLayerResponse_BatchLayerItem={encode(ot,bt=_e.Writer.create()){return ot.create!==void 0&&a.Layer.encode(ot.create,bt.uint32(10).fork()).ldelim(),ot.update!==void 0&&a.Layer.encode(ot.update,bt.uint32(18).fork()).ldelim(),ot.delete!==void 0&&a.DeleteLayerResponse.encode(ot.delete,bt.uint32(26).fork()).ldelim(),bt},decode(ot,bt){const Ct=ot instanceof _e.Reader?ot:new _e.Reader(ot);let cn=bt===void 0?Ct.len:Ct.pos+bt;const Yt=Cn();for(;Ct.pos<cn;){const dn=Ct.uint32();switch(dn>>>3){case 1:Yt.create=a.Layer.decode(Ct,Ct.uint32());break;case 2:Yt.update=a.Layer.decode(Ct,Ct.uint32());break;case 3:Yt.delete=a.DeleteLayerResponse.decode(Ct,Ct.uint32());break;default:Ct.skipType(dn&7);break}}return Yt},fromJSON(ot){return{create:mn(ot.create)?a.Layer.fromJSON(ot.create):void 0,update:mn(ot.update)?a.Layer.fromJSON(ot.update):void 0,delete:mn(ot.delete)?a.DeleteLayerResponse.fromJSON(ot.delete):void 0}},toJSON(ot){const bt={};return ot.create!==void 0&&(bt.create=ot.create?a.Layer.toJSON(ot.create):void 0),ot.update!==void 0&&(bt.update=ot.update?a.Layer.toJSON(ot.update):void 0),ot.delete!==void 0&&(bt.delete=ot.delete?a.DeleteLayerResponse.toJSON(ot.delete):void 0),bt},fromPartial(ot){const bt=Cn();return bt.create=ot.create!==void 0&&ot.create!==null?a.Layer.fromPartial(ot.create):void 0,bt.update=ot.update!==void 0&&ot.update!==null?a.Layer.fromPartial(ot.update):void 0,bt.delete=ot.delete!==void 0&&ot.delete!==null?a.DeleteLayerResponse.fromPartial(ot.delete):void 0,bt}};function Nn(){return{width:void 0,height:void 0,metadata:void 0,projectId:void 0,collectionId:void 0,type:void 0,transitions:[],requestMetadata:void 0}}a.PartialLayout={encode(ot,bt=_e.Writer.create()){ot.width!==void 0&&bt.uint32(16).int32(ot.width),ot.height!==void 0&&bt.uint32(24).int32(ot.height),ot.metadata!==void 0&&et.Value.encode(et.Value.wrap(ot.metadata),bt.uint32(50).fork()).ldelim(),ot.projectId!==void 0&&bt.uint32(58).string(ot.projectId),ot.collectionId!==void 0&&bt.uint32(66).string(ot.collectionId),ot.type!==void 0&&bt.uint32(72).int32(pt(ot.type));for(const Ct of ot.transitions)a.Transition.encode(Ct,bt.uint32(82).fork()).ldelim();return ot.requestMetadata!==void 0&&et.Value.encode(et.Value.wrap(ot.requestMetadata),bt.uint32(810).fork()).ldelim(),bt},decode(ot,bt){const Ct=ot instanceof _e.Reader?ot:new _e.Reader(ot);let cn=bt===void 0?Ct.len:Ct.pos+bt;const Yt=Nn();for(;Ct.pos<cn;){const dn=Ct.uint32();switch(dn>>>3){case 2:Yt.width=Ct.int32();break;case 3:Yt.height=Ct.int32();break;case 6:Yt.metadata=et.Value.unwrap(et.Value.decode(Ct,Ct.uint32()));break;case 7:Yt.projectId=Ct.string();break;case 8:Yt.collectionId=Ct.string();break;case 9:Yt.type=it(Ct.int32());break;case 10:Yt.transitions.push(a.Transition.decode(Ct,Ct.uint32()));break;case 101:Yt.requestMetadata=et.Value.unwrap(et.Value.decode(Ct,Ct.uint32()));break;default:Ct.skipType(dn&7);break}}return Yt},fromJSON(ot){return{width:mn(ot.width)?Number(ot.width):void 0,height:mn(ot.height)?Number(ot.height):void 0,metadata:mn(ot==null?void 0:ot.metadata)?ot.metadata:void 0,projectId:mn(ot.projectId)?String(ot.projectId):void 0,collectionId:mn(ot.collectionId)?String(ot.collectionId):void 0,type:mn(ot.type)?it(ot.type):void 0,transitions:Array.isArray(ot==null?void 0:ot.transitions)?ot.transitions.map(bt=>a.Transition.fromJSON(bt)):[],requestMetadata:mn(ot==null?void 0:ot.requestMetadata)?ot.requestMetadata:void 0}},toJSON(ot){const bt={};return ot.width!==void 0&&(bt.width=Math.round(ot.width)),ot.height!==void 0&&(bt.height=Math.round(ot.height)),ot.metadata!==void 0&&(bt.metadata=ot.metadata),ot.projectId!==void 0&&(bt.projectId=ot.projectId),ot.collectionId!==void 0&&(bt.collectionId=ot.collectionId),ot.type!==void 0&&(bt.type=ot.type!==void 0?ft(ot.type):void 0),ot.transitions?bt.transitions=ot.transitions.map(Ct=>Ct?a.Transition.toJSON(Ct):void 0):bt.transitions=[],ot.requestMetadata!==void 0&&(bt.requestMetadata=ot.requestMetadata),bt},fromPartial(ot){var bt,Ct,cn,Yt,dn,Bn,Kn,Qn;const Vn=Nn();return Vn.width=(bt=ot.width)!==null&&bt!==void 0?bt:void 0,Vn.height=(Ct=ot.height)!==null&&Ct!==void 0?Ct:void 0,Vn.metadata=(cn=ot.metadata)!==null&&cn!==void 0?cn:void 0,Vn.projectId=(Yt=ot.projectId)!==null&&Yt!==void 0?Yt:void 0,Vn.collectionId=(dn=ot.collectionId)!==null&&dn!==void 0?dn:void 0,Vn.type=(Bn=ot.type)!==null&&Bn!==void 0?Bn:void 0,Vn.transitions=((Kn=ot.transitions)===null||Kn===void 0?void 0:Kn.map(qn=>a.Transition.fromPartial(qn)))||[],Vn.requestMetadata=(Qn=ot.requestMetadata)!==null&&Qn!==void 0?Qn:void 0,Vn}};function fn(){return{projectId:void 0,collectionId:void 0,type:void 0}}a.ListLayoutsRequest={encode(ot,bt=_e.Writer.create()){return ot.projectId!==void 0&&bt.uint32(10).string(ot.projectId),ot.collectionId!==void 0&&bt.uint32(18).string(ot.collectionId),ot.type!==void 0&&bt.uint32(24).int32(pt(ot.type)),bt},decode(ot,bt){const Ct=ot instanceof _e.Reader?ot:new _e.Reader(ot);let cn=bt===void 0?Ct.len:Ct.pos+bt;const Yt=fn();for(;Ct.pos<cn;){const dn=Ct.uint32();switch(dn>>>3){case 1:Yt.projectId=Ct.string();break;case 2:Yt.collectionId=Ct.string();break;case 3:Yt.type=it(Ct.int32());break;default:Ct.skipType(dn&7);break}}return Yt},fromJSON(ot){return{projectId:mn(ot.projectId)?String(ot.projectId):void 0,collectionId:mn(ot.collectionId)?String(ot.collectionId):void 0,type:mn(ot.type)?it(ot.type):void 0}},toJSON(ot){const bt={};return ot.projectId!==void 0&&(bt.projectId=ot.projectId),ot.collectionId!==void 0&&(bt.collectionId=ot.collectionId),ot.type!==void 0&&(bt.type=ot.type!==void 0?ft(ot.type):void 0),bt},fromPartial(ot){var bt,Ct,cn;const Yt=fn();return Yt.projectId=(bt=ot.projectId)!==null&&bt!==void 0?bt:void 0,Yt.collectionId=(Ct=ot.collectionId)!==null&&Ct!==void 0?Ct:void 0,Yt.type=(cn=ot.type)!==null&&cn!==void 0?cn:void 0,Yt}};function ut(){return{layouts:[]}}a.ListLayoutsResponse={encode(ot,bt=_e.Writer.create()){for(const Ct of ot.layouts)a.Layout.encode(Ct,bt.uint32(10).fork()).ldelim();return bt},decode(ot,bt){const Ct=ot instanceof _e.Reader?ot:new _e.Reader(ot);let cn=bt===void 0?Ct.len:Ct.pos+bt;const Yt=ut();for(;Ct.pos<cn;){const dn=Ct.uint32();switch(dn>>>3){case 1:Yt.layouts.push(a.Layout.decode(Ct,Ct.uint32()));break;default:Ct.skipType(dn&7);break}}return Yt},fromJSON(ot){return{layouts:Array.isArray(ot==null?void 0:ot.layouts)?ot.layouts.map(bt=>a.Layout.fromJSON(bt)):[]}},toJSON(ot){const bt={};return ot.layouts?bt.layouts=ot.layouts.map(Ct=>Ct?a.Layout.toJSON(Ct):void 0):bt.layouts=[],bt},fromPartial(ot){var bt;const Ct=ut();return Ct.layouts=((bt=ot.layouts)===null||bt===void 0?void 0:bt.map(cn=>a.Layout.fromPartial(cn)))||[],Ct}};function It(){return{layout:void 0}}a.CreateLayoutRequest={encode(ot,bt=_e.Writer.create()){return ot.layout!==void 0&&a.PartialLayout.encode(ot.layout,bt.uint32(18).fork()).ldelim(),bt},decode(ot,bt){const Ct=ot instanceof _e.Reader?ot:new _e.Reader(ot);let cn=bt===void 0?Ct.len:Ct.pos+bt;const Yt=It();for(;Ct.pos<cn;){const dn=Ct.uint32();switch(dn>>>3){case 2:Yt.layout=a.PartialLayout.decode(Ct,Ct.uint32());break;default:Ct.skipType(dn&7);break}}return Yt},fromJSON(ot){return{layout:mn(ot.layout)?a.PartialLayout.fromJSON(ot.layout):void 0}},toJSON(ot){const bt={};return ot.layout!==void 0&&(bt.layout=ot.layout?a.PartialLayout.toJSON(ot.layout):void 0),bt},fromPartial(ot){const bt=It();return bt.layout=ot.layout!==void 0&&ot.layout!==null?a.PartialLayout.fromPartial(ot.layout):void 0,bt}};function Pt(){return{layoutId:""}}a.GetLayoutRequest={encode(ot,bt=_e.Writer.create()){return ot.layoutId!==""&&bt.uint32(10).string(ot.layoutId),bt},decode(ot,bt){const Ct=ot instanceof _e.Reader?ot:new _e.Reader(ot);let cn=bt===void 0?Ct.len:Ct.pos+bt;const Yt=Pt();for(;Ct.pos<cn;){const dn=Ct.uint32();switch(dn>>>3){case 1:Yt.layoutId=Ct.string();break;default:Ct.skipType(dn&7);break}}return Yt},fromJSON(ot){return{layoutId:mn(ot.layoutId)?String(ot.layoutId):""}},toJSON(ot){const bt={};return ot.layoutId!==void 0&&(bt.layoutId=ot.layoutId),bt},fromPartial(ot){var bt;const Ct=Pt();return Ct.layoutId=(bt=ot.layoutId)!==null&&bt!==void 0?bt:"",Ct}};function Zt(){return{layoutId:"",layout:void 0}}a.UpdateLayoutRequest={encode(ot,bt=_e.Writer.create()){return ot.layoutId!==""&&bt.uint32(10).string(ot.layoutId),ot.layout!==void 0&&a.PartialLayout.encode(ot.layout,bt.uint32(26).fork()).ldelim(),bt},decode(ot,bt){const Ct=ot instanceof _e.Reader?ot:new _e.Reader(ot);let cn=bt===void 0?Ct.len:Ct.pos+bt;const Yt=Zt();for(;Ct.pos<cn;){const dn=Ct.uint32();switch(dn>>>3){case 1:Yt.layoutId=Ct.string();break;case 3:Yt.layout=a.PartialLayout.decode(Ct,Ct.uint32());break;default:Ct.skipType(dn&7);break}}return Yt},fromJSON(ot){return{layoutId:mn(ot.layoutId)?String(ot.layoutId):"",layout:mn(ot.layout)?a.PartialLayout.fromJSON(ot.layout):void 0}},toJSON(ot){const bt={};return ot.layoutId!==void 0&&(bt.layoutId=ot.layoutId),ot.layout!==void 0&&(bt.layout=ot.layout?a.PartialLayout.toJSON(ot.layout):void 0),bt},fromPartial(ot){var bt;const Ct=Zt();return Ct.layoutId=(bt=ot.layoutId)!==null&&bt!==void 0?bt:"",Ct.layout=ot.layout!==void 0&&ot.layout!==null?a.PartialLayout.fromPartial(ot.layout):void 0,Ct}};function Dt(){return{requestMetadata:void 0}}a.DeleteLayoutPayload={encode(ot,bt=_e.Writer.create()){return ot.requestMetadata!==void 0&&et.Value.encode(et.Value.wrap(ot.requestMetadata),bt.uint32(802).fork()).ldelim(),bt},decode(ot,bt){const Ct=ot instanceof _e.Reader?ot:new _e.Reader(ot);let cn=bt===void 0?Ct.len:Ct.pos+bt;const Yt=Dt();for(;Ct.pos<cn;){const dn=Ct.uint32();switch(dn>>>3){case 100:Yt.requestMetadata=et.Value.unwrap(et.Value.decode(Ct,Ct.uint32()));break;default:Ct.skipType(dn&7);break}}return Yt},fromJSON(ot){return{requestMetadata:mn(ot==null?void 0:ot.requestMetadata)?ot.requestMetadata:void 0}},toJSON(ot){const bt={};return ot.requestMetadata!==void 0&&(bt.requestMetadata=ot.requestMetadata),bt},fromPartial(ot){var bt;const Ct=Dt();return Ct.requestMetadata=(bt=ot.requestMetadata)!==null&&bt!==void 0?bt:void 0,Ct}};function Ot(){return{layoutId:"",payload:void 0}}a.DeleteLayoutRequest={encode(ot,bt=_e.Writer.create()){return ot.layoutId!==""&&bt.uint32(10).string(ot.layoutId),ot.payload!==void 0&&a.DeleteLayoutPayload.encode(ot.payload,bt.uint32(18).fork()).ldelim(),bt},decode(ot,bt){const Ct=ot instanceof _e.Reader?ot:new _e.Reader(ot);let cn=bt===void 0?Ct.len:Ct.pos+bt;const Yt=Ot();for(;Ct.pos<cn;){const dn=Ct.uint32();switch(dn>>>3){case 1:Yt.layoutId=Ct.string();break;case 2:Yt.payload=a.DeleteLayoutPayload.decode(Ct,Ct.uint32());break;default:Ct.skipType(dn&7);break}}return Yt},fromJSON(ot){return{layoutId:mn(ot.layoutId)?String(ot.layoutId):"",payload:mn(ot.payload)?a.DeleteLayoutPayload.fromJSON(ot.payload):void 0}},toJSON(ot){const bt={};return ot.layoutId!==void 0&&(bt.layoutId=ot.layoutId),ot.payload!==void 0&&(bt.payload=ot.payload?a.DeleteLayoutPayload.toJSON(ot.payload):void 0),bt},fromPartial(ot){var bt;const Ct=Ot();return Ct.layoutId=(bt=ot.layoutId)!==null&&bt!==void 0?bt:"",Ct.payload=ot.payload!==void 0&&ot.payload!==null?a.DeleteLayoutPayload.fromPartial(ot.payload):void 0,Ct}};function $t(){return{id:"",requestMetadata:void 0}}a.DeleteLayoutResponse={encode(ot,bt=_e.Writer.create()){return ot.id!==""&&bt.uint32(18).string(ot.id),ot.requestMetadata!==void 0&&et.Value.encode(et.Value.wrap(ot.requestMetadata),bt.uint32(802).fork()).ldelim(),bt},decode(ot,bt){const Ct=ot instanceof _e.Reader?ot:new _e.Reader(ot);let cn=bt===void 0?Ct.len:Ct.pos+bt;const Yt=$t();for(;Ct.pos<cn;){const dn=Ct.uint32();switch(dn>>>3){case 2:Yt.id=Ct.string();break;case 100:Yt.requestMetadata=et.Value.unwrap(et.Value.decode(Ct,Ct.uint32()));break;default:Ct.skipType(dn&7);break}}return Yt},fromJSON(ot){return{id:mn(ot.id)?String(ot.id):"",requestMetadata:mn(ot==null?void 0:ot.requestMetadata)?ot.requestMetadata:void 0}},toJSON(ot){const bt={};return ot.id!==void 0&&(bt.id=ot.id),ot.requestMetadata!==void 0&&(bt.requestMetadata=ot.requestMetadata),bt},fromPartial(ot){var bt,Ct;const cn=$t();return cn.id=(bt=ot.id)!==null&&bt!==void 0?bt:"",cn.requestMetadata=(Ct=ot.requestMetadata)!==null&&Ct!==void 0?Ct:void 0,cn}};function Gt(){return{properties:[],durationMs:0,delayMs:void 0,easingMode:void 0}}a.LayerAnimation={encode(ot,bt=_e.Writer.create()){for(const Ct of ot.properties)bt.uint32(10).string(Ct);return ot.durationMs!==0&&bt.uint32(16).int32(ot.durationMs),ot.delayMs!==void 0&&bt.uint32(32).int32(ot.delayMs),ot.easingMode!==void 0&&bt.uint32(42).string(ot.easingMode),bt},decode(ot,bt){const Ct=ot instanceof _e.Reader?ot:new _e.Reader(ot);let cn=bt===void 0?Ct.len:Ct.pos+bt;const Yt=Gt();for(;Ct.pos<cn;){const dn=Ct.uint32();switch(dn>>>3){case 1:Yt.properties.push(Ct.string());break;case 2:Yt.durationMs=Ct.int32();break;case 4:Yt.delayMs=Ct.int32();break;case 5:Yt.easingMode=Ct.string();break;default:Ct.skipType(dn&7);break}}return Yt},fromJSON(ot){return{properties:Array.isArray(ot==null?void 0:ot.properties)?ot.properties.map(bt=>String(bt)):[],durationMs:mn(ot.durationMs)?Number(ot.durationMs):0,delayMs:mn(ot.delayMs)?Number(ot.delayMs):void 0,easingMode:mn(ot.easingMode)?String(ot.easingMode):void 0}},toJSON(ot){const bt={};return ot.properties?bt.properties=ot.properties.map(Ct=>Ct):bt.properties=[],ot.durationMs!==void 0&&(bt.durationMs=Math.round(ot.durationMs)),ot.delayMs!==void 0&&(bt.delayMs=Math.round(ot.delayMs)),ot.easingMode!==void 0&&(bt.easingMode=ot.easingMode),bt},fromPartial(ot){var bt,Ct,cn,Yt;const dn=Gt();return dn.properties=((bt=ot.properties)===null||bt===void 0?void 0:bt.map(Bn=>Bn))||[],dn.durationMs=(Ct=ot.durationMs)!==null&&Ct!==void 0?Ct:0,dn.delayMs=(cn=ot.delayMs)!==null&&cn!==void 0?cn:void 0,dn.easingMode=(Yt=ot.easingMode)!==null&&Yt!==void 0?Yt:void 0,dn}};function nn(){return{type:void 0,data:void 0,x:void 0,y:void 0,width:void 0,height:void 0,rotation:void 0,opacity:void 0,scale:void 0,hidden:void 0,children:void 0,parentId:void 0,metadata:void 0,requestMetadata:void 0,requestAnimation:[]}}a.PartialLayer={encode(ot,bt=_e.Writer.create()){ot.type!==void 0&&bt.uint32(10).string(ot.type),ot.data!==void 0&&et.Struct.encode(et.Struct.wrap(ot.data),bt.uint32(18).fork()).ldelim(),ot.x!==void 0&&et.Value.encode(et.Value.wrap(ot.x),bt.uint32(26).fork()).ldelim(),ot.y!==void 0&&et.Value.encode(et.Value.wrap(ot.y),bt.uint32(34).fork()).ldelim(),ot.width!==void 0&&et.Value.encode(et.Value.wrap(ot.width),bt.uint32(42).fork()).ldelim(),ot.height!==void 0&&et.Value.encode(et.Value.wrap(ot.height),bt.uint32(50).fork()).ldelim(),ot.rotation!==void 0&&bt.uint32(57).double(ot.rotation),ot.opacity!==void 0&&bt.uint32(65).double(ot.opacity),ot.scale!==void 0&&bt.uint32(73).double(ot.scale),ot.hidden!==void 0&&bt.uint32(80).bool(ot.hidden),ot.children!==void 0&&et.ListValue.encode(et.ListValue.wrap(ot.children),bt.uint32(98).fork()).ldelim(),ot.parentId!==void 0&&bt.uint32(106).string(ot.parentId),ot.metadata!==void 0&&et.Value.encode(et.Value.wrap(ot.metadata),bt.uint32(114).fork()).ldelim(),ot.requestMetadata!==void 0&&et.Value.encode(et.Value.wrap(ot.requestMetadata),bt.uint32(802).fork()).ldelim();for(const Ct of ot.requestAnimation)a.LayerAnimation.encode(Ct,bt.uint32(826).fork()).ldelim();return bt},decode(ot,bt){const Ct=ot instanceof _e.Reader?ot:new _e.Reader(ot);let cn=bt===void 0?Ct.len:Ct.pos+bt;const Yt=nn();for(;Ct.pos<cn;){const dn=Ct.uint32();switch(dn>>>3){case 1:Yt.type=Ct.string();break;case 2:Yt.data=et.Struct.unwrap(et.Struct.decode(Ct,Ct.uint32()));break;case 3:Yt.x=et.Value.unwrap(et.Value.decode(Ct,Ct.uint32()));break;case 4:Yt.y=et.Value.unwrap(et.Value.decode(Ct,Ct.uint32()));break;case 5:Yt.width=et.Value.unwrap(et.Value.decode(Ct,Ct.uint32()));break;case 6:Yt.height=et.Value.unwrap(et.Value.decode(Ct,Ct.uint32()));break;case 7:Yt.rotation=Ct.double();break;case 8:Yt.opacity=Ct.double();break;case 9:Yt.scale=Ct.double();break;case 10:Yt.hidden=Ct.bool();break;case 12:Yt.children=et.ListValue.unwrap(et.ListValue.decode(Ct,Ct.uint32()));break;case 13:Yt.parentId=Ct.string();break;case 14:Yt.metadata=et.Value.unwrap(et.Value.decode(Ct,Ct.uint32()));break;case 100:Yt.requestMetadata=et.Value.unwrap(et.Value.decode(Ct,Ct.uint32()));break;case 103:Yt.requestAnimation.push(a.LayerAnimation.decode(Ct,Ct.uint32()));break;default:Ct.skipType(dn&7);break}}return Yt},fromJSON(ot){return{type:mn(ot.type)?String(ot.type):void 0,data:zn(ot.data)?ot.data:void 0,x:mn(ot==null?void 0:ot.x)?ot.x:void 0,y:mn(ot==null?void 0:ot.y)?ot.y:void 0,width:mn(ot==null?void 0:ot.width)?ot.width:void 0,height:mn(ot==null?void 0:ot.height)?ot.height:void 0,rotation:mn(ot.rotation)?Number(ot.rotation):void 0,opacity:mn(ot.opacity)?Number(ot.opacity):void 0,scale:mn(ot.scale)?Number(ot.scale):void 0,hidden:mn(ot.hidden)?!!ot.hidden:void 0,children:Array.isArray(ot.children)?[...ot.children]:void 0,parentId:mn(ot.parentId)?String(ot.parentId):void 0,metadata:mn(ot==null?void 0:ot.metadata)?ot.metadata:void 0,requestMetadata:mn(ot==null?void 0:ot.requestMetadata)?ot.requestMetadata:void 0,requestAnimation:Array.isArray(ot==null?void 0:ot.requestAnimation)?ot.requestAnimation.map(bt=>a.LayerAnimation.fromJSON(bt)):[]}},toJSON(ot){const bt={};return ot.type!==void 0&&(bt.type=ot.type),ot.data!==void 0&&(bt.data=ot.data),ot.x!==void 0&&(bt.x=ot.x),ot.y!==void 0&&(bt.y=ot.y),ot.width!==void 0&&(bt.width=ot.width),ot.height!==void 0&&(bt.height=ot.height),ot.rotation!==void 0&&(bt.rotation=ot.rotation),ot.opacity!==void 0&&(bt.opacity=ot.opacity),ot.scale!==void 0&&(bt.scale=ot.scale),ot.hidden!==void 0&&(bt.hidden=ot.hidden),ot.children!==void 0&&(bt.children=ot.children),ot.parentId!==void 0&&(bt.parentId=ot.parentId),ot.metadata!==void 0&&(bt.metadata=ot.metadata),ot.requestMetadata!==void 0&&(bt.requestMetadata=ot.requestMetadata),ot.requestAnimation?bt.requestAnimation=ot.requestAnimation.map(Ct=>Ct?a.LayerAnimation.toJSON(Ct):void 0):bt.requestAnimation=[],bt},fromPartial(ot){var bt,Ct,cn,Yt,dn,Bn,Kn,Qn,Vn,qn,Xn,jn,er,tr,Zn;const Wn=nn();return Wn.type=(bt=ot.type)!==null&&bt!==void 0?bt:void 0,Wn.data=(Ct=ot.data)!==null&&Ct!==void 0?Ct:void 0,Wn.x=(cn=ot.x)!==null&&cn!==void 0?cn:void 0,Wn.y=(Yt=ot.y)!==null&&Yt!==void 0?Yt:void 0,Wn.width=(dn=ot.width)!==null&&dn!==void 0?dn:void 0,Wn.height=(Bn=ot.height)!==null&&Bn!==void 0?Bn:void 0,Wn.rotation=(Kn=ot.rotation)!==null&&Kn!==void 0?Kn:void 0,Wn.opacity=(Qn=ot.opacity)!==null&&Qn!==void 0?Qn:void 0,Wn.scale=(Vn=ot.scale)!==null&&Vn!==void 0?Vn:void 0,Wn.hidden=(qn=ot.hidden)!==null&&qn!==void 0?qn:void 0,Wn.children=(Xn=ot.children)!==null&&Xn!==void 0?Xn:void 0,Wn.parentId=(jn=ot.parentId)!==null&&jn!==void 0?jn:void 0,Wn.metadata=(er=ot.metadata)!==null&&er!==void 0?er:void 0,Wn.requestMetadata=(tr=ot.requestMetadata)!==null&&tr!==void 0?tr:void 0,Wn.requestAnimation=((Zn=ot.requestAnimation)===null||Zn===void 0?void 0:Zn.map(Mn=>a.LayerAnimation.fromPartial(Mn)))||[],Wn}};function gn(){return{id:"",type:void 0,data:void 0,x:void 0,y:void 0,width:void 0,height:void 0,rotation:void 0,opacity:void 0,scale:void 0,hidden:void 0,children:void 0,parentId:void 0,metadata:void 0,requestMetadata:void 0,requestAnimation:[]}}a.PartialLayerWithID={encode(ot,bt=_e.Writer.create()){ot.id!==""&&bt.uint32(8002).string(ot.id),ot.type!==void 0&&bt.uint32(10).string(ot.type),ot.data!==void 0&&et.Struct.encode(et.Struct.wrap(ot.data),bt.uint32(18).fork()).ldelim(),ot.x!==void 0&&et.Value.encode(et.Value.wrap(ot.x),bt.uint32(26).fork()).ldelim(),ot.y!==void 0&&et.Value.encode(et.Value.wrap(ot.y),bt.uint32(34).fork()).ldelim(),ot.width!==void 0&&et.Value.encode(et.Value.wrap(ot.width),bt.uint32(42).fork()).ldelim(),ot.height!==void 0&&et.Value.encode(et.Value.wrap(ot.height),bt.uint32(50).fork()).ldelim(),ot.rotation!==void 0&&bt.uint32(57).double(ot.rotation),ot.opacity!==void 0&&bt.uint32(65).double(ot.opacity),ot.scale!==void 0&&bt.uint32(73).double(ot.scale),ot.hidden!==void 0&&bt.uint32(80).bool(ot.hidden),ot.children!==void 0&&et.ListValue.encode(et.ListValue.wrap(ot.children),bt.uint32(98).fork()).ldelim(),ot.parentId!==void 0&&bt.uint32(106).string(ot.parentId),ot.metadata!==void 0&&et.Value.encode(et.Value.wrap(ot.metadata),bt.uint32(114).fork()).ldelim(),ot.requestMetadata!==void 0&&et.Value.encode(et.Value.wrap(ot.requestMetadata),bt.uint32(802).fork()).ldelim();for(const Ct of ot.requestAnimation)a.LayerAnimation.encode(Ct,bt.uint32(826).fork()).ldelim();return bt},decode(ot,bt){const Ct=ot instanceof _e.Reader?ot:new _e.Reader(ot);let cn=bt===void 0?Ct.len:Ct.pos+bt;const Yt=gn();for(;Ct.pos<cn;){const dn=Ct.uint32();switch(dn>>>3){case 1e3:Yt.id=Ct.string();break;case 1:Yt.type=Ct.string();break;case 2:Yt.data=et.Struct.unwrap(et.Struct.decode(Ct,Ct.uint32()));break;case 3:Yt.x=et.Value.unwrap(et.Value.decode(Ct,Ct.uint32()));break;case 4:Yt.y=et.Value.unwrap(et.Value.decode(Ct,Ct.uint32()));break;case 5:Yt.width=et.Value.unwrap(et.Value.decode(Ct,Ct.uint32()));break;case 6:Yt.height=et.Value.unwrap(et.Value.decode(Ct,Ct.uint32()));break;case 7:Yt.rotation=Ct.double();break;case 8:Yt.opacity=Ct.double();break;case 9:Yt.scale=Ct.double();break;case 10:Yt.hidden=Ct.bool();break;case 12:Yt.children=et.ListValue.unwrap(et.ListValue.decode(Ct,Ct.uint32()));break;case 13:Yt.parentId=Ct.string();break;case 14:Yt.metadata=et.Value.unwrap(et.Value.decode(Ct,Ct.uint32()));break;case 100:Yt.requestMetadata=et.Value.unwrap(et.Value.decode(Ct,Ct.uint32()));break;case 103:Yt.requestAnimation.push(a.LayerAnimation.decode(Ct,Ct.uint32()));break;default:Ct.skipType(dn&7);break}}return Yt},fromJSON(ot){return{id:mn(ot.id)?String(ot.id):"",type:mn(ot.type)?String(ot.type):void 0,data:zn(ot.data)?ot.data:void 0,x:mn(ot==null?void 0:ot.x)?ot.x:void 0,y:mn(ot==null?void 0:ot.y)?ot.y:void 0,width:mn(ot==null?void 0:ot.width)?ot.width:void 0,height:mn(ot==null?void 0:ot.height)?ot.height:void 0,rotation:mn(ot.rotation)?Number(ot.rotation):void 0,opacity:mn(ot.opacity)?Number(ot.opacity):void 0,scale:mn(ot.scale)?Number(ot.scale):void 0,hidden:mn(ot.hidden)?!!ot.hidden:void 0,children:Array.isArray(ot.children)?[...ot.children]:void 0,parentId:mn(ot.parentId)?String(ot.parentId):void 0,metadata:mn(ot==null?void 0:ot.metadata)?ot.metadata:void 0,requestMetadata:mn(ot==null?void 0:ot.requestMetadata)?ot.requestMetadata:void 0,requestAnimation:Array.isArray(ot==null?void 0:ot.requestAnimation)?ot.requestAnimation.map(bt=>a.LayerAnimation.fromJSON(bt)):[]}},toJSON(ot){const bt={};return ot.id!==void 0&&(bt.id=ot.id),ot.type!==void 0&&(bt.type=ot.type),ot.data!==void 0&&(bt.data=ot.data),ot.x!==void 0&&(bt.x=ot.x),ot.y!==void 0&&(bt.y=ot.y),ot.width!==void 0&&(bt.width=ot.width),ot.height!==void 0&&(bt.height=ot.height),ot.rotation!==void 0&&(bt.rotation=ot.rotation),ot.opacity!==void 0&&(bt.opacity=ot.opacity),ot.scale!==void 0&&(bt.scale=ot.scale),ot.hidden!==void 0&&(bt.hidden=ot.hidden),ot.children!==void 0&&(bt.children=ot.children),ot.parentId!==void 0&&(bt.parentId=ot.parentId),ot.metadata!==void 0&&(bt.metadata=ot.metadata),ot.requestMetadata!==void 0&&(bt.requestMetadata=ot.requestMetadata),ot.requestAnimation?bt.requestAnimation=ot.requestAnimation.map(Ct=>Ct?a.LayerAnimation.toJSON(Ct):void 0):bt.requestAnimation=[],bt},fromPartial(ot){var bt,Ct,cn,Yt,dn,Bn,Kn,Qn,Vn,qn,Xn,jn,er,tr,Zn,Wn;const Mn=gn();return Mn.id=(bt=ot.id)!==null&&bt!==void 0?bt:"",Mn.type=(Ct=ot.type)!==null&&Ct!==void 0?Ct:void 0,Mn.data=(cn=ot.data)!==null&&cn!==void 0?cn:void 0,Mn.x=(Yt=ot.x)!==null&&Yt!==void 0?Yt:void 0,Mn.y=(dn=ot.y)!==null&&dn!==void 0?dn:void 0,Mn.width=(Bn=ot.width)!==null&&Bn!==void 0?Bn:void 0,Mn.height=(Kn=ot.height)!==null&&Kn!==void 0?Kn:void 0,Mn.rotation=(Qn=ot.rotation)!==null&&Qn!==void 0?Qn:void 0,Mn.opacity=(Vn=ot.opacity)!==null&&Vn!==void 0?Vn:void 0,Mn.scale=(qn=ot.scale)!==null&&qn!==void 0?qn:void 0,Mn.hidden=(Xn=ot.hidden)!==null&&Xn!==void 0?Xn:void 0,Mn.children=(jn=ot.children)!==null&&jn!==void 0?jn:void 0,Mn.parentId=(er=ot.parentId)!==null&&er!==void 0?er:void 0,Mn.metadata=(tr=ot.metadata)!==null&&tr!==void 0?tr:void 0,Mn.requestMetadata=(Zn=ot.requestMetadata)!==null&&Zn!==void 0?Zn:void 0,Mn.requestAnimation=((Wn=ot.requestAnimation)===null||Wn===void 0?void 0:Wn.map(ar=>a.LayerAnimation.fromPartial(ar)))||[],Mn}};function Xt(){return{layoutId:""}}a.ListLayersRequest={encode(ot,bt=_e.Writer.create()){return ot.layoutId!==""&&bt.uint32(10).string(ot.layoutId),bt},decode(ot,bt){const Ct=ot instanceof _e.Reader?ot:new _e.Reader(ot);let cn=bt===void 0?Ct.len:Ct.pos+bt;const Yt=Xt();for(;Ct.pos<cn;){const dn=Ct.uint32();switch(dn>>>3){case 1:Yt.layoutId=Ct.string();break;default:Ct.skipType(dn&7);break}}return Yt},fromJSON(ot){return{layoutId:mn(ot.layoutId)?String(ot.layoutId):""}},toJSON(ot){const bt={};return ot.layoutId!==void 0&&(bt.layoutId=ot.layoutId),bt},fromPartial(ot){var bt;const Ct=Xt();return Ct.layoutId=(bt=ot.layoutId)!==null&&bt!==void 0?bt:"",Ct}};function at(){return{layers:[]}}a.ListLayersResponse={encode(ot,bt=_e.Writer.create()){for(const Ct of ot.layers)a.Layer.encode(Ct,bt.uint32(10).fork()).ldelim();return bt},decode(ot,bt){const Ct=ot instanceof _e.Reader?ot:new _e.Reader(ot);let cn=bt===void 0?Ct.len:Ct.pos+bt;const Yt=at();for(;Ct.pos<cn;){const dn=Ct.uint32();switch(dn>>>3){case 1:Yt.layers.push(a.Layer.decode(Ct,Ct.uint32()));break;default:Ct.skipType(dn&7);break}}return Yt},fromJSON(ot){return{layers:Array.isArray(ot==null?void 0:ot.layers)?ot.layers.map(bt=>a.Layer.fromJSON(bt)):[]}},toJSON(ot){const bt={};return ot.layers?bt.layers=ot.layers.map(Ct=>Ct?a.Layer.toJSON(Ct):void 0):bt.layers=[],bt},fromPartial(ot){var bt;const Ct=at();return Ct.layers=((bt=ot.layers)===null||bt===void 0?void 0:bt.map(cn=>a.Layer.fromPartial(cn)))||[],Ct}};function Rt(){return{layoutId:"",layer:void 0}}a.CreateLayerRequest={encode(ot,bt=_e.Writer.create()){return ot.layoutId!==""&&bt.uint32(10).string(ot.layoutId),ot.layer!==void 0&&a.PartialLayer.encode(ot.layer,bt.uint32(18).fork()).ldelim(),bt},decode(ot,bt){const Ct=ot instanceof _e.Reader?ot:new _e.Reader(ot);let cn=bt===void 0?Ct.len:Ct.pos+bt;const Yt=Rt();for(;Ct.pos<cn;){const dn=Ct.uint32();switch(dn>>>3){case 1:Yt.layoutId=Ct.string();break;case 2:Yt.layer=a.PartialLayer.decode(Ct,Ct.uint32());break;default:Ct.skipType(dn&7);break}}return Yt},fromJSON(ot){return{layoutId:mn(ot.layoutId)?String(ot.layoutId):"",layer:mn(ot.layer)?a.PartialLayer.fromJSON(ot.layer):void 0}},toJSON(ot){const bt={};return ot.layoutId!==void 0&&(bt.layoutId=ot.layoutId),ot.layer!==void 0&&(bt.layer=ot.layer?a.PartialLayer.toJSON(ot.layer):void 0),bt},fromPartial(ot){var bt;const Ct=Rt();return Ct.layoutId=(bt=ot.layoutId)!==null&&bt!==void 0?bt:"",Ct.layer=ot.layer!==void 0&&ot.layer!==null?a.PartialLayer.fromPartial(ot.layer):void 0,Ct}};function Ut(){return{layoutId:"",layerId:""}}a.GetLayerRequest={encode(ot,bt=_e.Writer.create()){return ot.layoutId!==""&&bt.uint32(10).string(ot.layoutId),ot.layerId!==""&&bt.uint32(18).string(ot.layerId),bt},decode(ot,bt){const Ct=ot instanceof _e.Reader?ot:new _e.Reader(ot);let cn=bt===void 0?Ct.len:Ct.pos+bt;const Yt=Ut();for(;Ct.pos<cn;){const dn=Ct.uint32();switch(dn>>>3){case 1:Yt.layoutId=Ct.string();break;case 2:Yt.layerId=Ct.string();break;default:Ct.skipType(dn&7);break}}return Yt},fromJSON(ot){return{layoutId:mn(ot.layoutId)?String(ot.layoutId):"",layerId:mn(ot.layerId)?String(ot.layerId):""}},toJSON(ot){const bt={};return ot.layoutId!==void 0&&(bt.layoutId=ot.layoutId),ot.layerId!==void 0&&(bt.layerId=ot.layerId),bt},fromPartial(ot){var bt,Ct;const cn=Ut();return cn.layoutId=(bt=ot.layoutId)!==null&&bt!==void 0?bt:"",cn.layerId=(Ct=ot.layerId)!==null&&Ct!==void 0?Ct:"",cn}};function un(){return{layoutId:"",layerId:"",layer:void 0}}a.UpdateLayerRequest={encode(ot,bt=_e.Writer.create()){return ot.layoutId!==""&&bt.uint32(10).string(ot.layoutId),ot.layerId!==""&&bt.uint32(18).string(ot.layerId),ot.layer!==void 0&&a.PartialLayer.encode(ot.layer,bt.uint32(26).fork()).ldelim(),bt},decode(ot,bt){const Ct=ot instanceof _e.Reader?ot:new _e.Reader(ot);let cn=bt===void 0?Ct.len:Ct.pos+bt;const Yt=un();for(;Ct.pos<cn;){const dn=Ct.uint32();switch(dn>>>3){case 1:Yt.layoutId=Ct.string();break;case 2:Yt.layerId=Ct.string();break;case 3:Yt.layer=a.PartialLayer.decode(Ct,Ct.uint32());break;default:Ct.skipType(dn&7);break}}return Yt},fromJSON(ot){return{layoutId:mn(ot.layoutId)?String(ot.layoutId):"",layerId:mn(ot.layerId)?String(ot.layerId):"",layer:mn(ot.layer)?a.PartialLayer.fromJSON(ot.layer):void 0}},toJSON(ot){const bt={};return ot.layoutId!==void 0&&(bt.layoutId=ot.layoutId),ot.layerId!==void 0&&(bt.layerId=ot.layerId),ot.layer!==void 0&&(bt.layer=ot.layer?a.PartialLayer.toJSON(ot.layer):void 0),bt},fromPartial(ot){var bt,Ct;const cn=un();return cn.layoutId=(bt=ot.layoutId)!==null&&bt!==void 0?bt:"",cn.layerId=(Ct=ot.layerId)!==null&&Ct!==void 0?Ct:"",cn.layer=ot.layer!==void 0&&ot.layer!==null?a.PartialLayer.fromPartial(ot.layer):void 0,cn}};function Vt(){return{requestMetadata:void 0}}a.DeleteLayerPayload={encode(ot,bt=_e.Writer.create()){return ot.requestMetadata!==void 0&&et.Value.encode(et.Value.wrap(ot.requestMetadata),bt.uint32(802).fork()).ldelim(),bt},decode(ot,bt){const Ct=ot instanceof _e.Reader?ot:new _e.Reader(ot);let cn=bt===void 0?Ct.len:Ct.pos+bt;const Yt=Vt();for(;Ct.pos<cn;){const dn=Ct.uint32();switch(dn>>>3){case 100:Yt.requestMetadata=et.Value.unwrap(et.Value.decode(Ct,Ct.uint32()));break;default:Ct.skipType(dn&7);break}}return Yt},fromJSON(ot){return{requestMetadata:mn(ot==null?void 0:ot.requestMetadata)?ot.requestMetadata:void 0}},toJSON(ot){const bt={};return ot.requestMetadata!==void 0&&(bt.requestMetadata=ot.requestMetadata),bt},fromPartial(ot){var bt;const Ct=Vt();return Ct.requestMetadata=(bt=ot.requestMetadata)!==null&&bt!==void 0?bt:void 0,Ct}};function st(){return{id:"",requestMetadata:void 0}}a.BatchDeleteLayerRequest={encode(ot,bt=_e.Writer.create()){return ot.id!==""&&bt.uint32(10).string(ot.id),ot.requestMetadata!==void 0&&et.Value.encode(et.Value.wrap(ot.requestMetadata),bt.uint32(802).fork()).ldelim(),bt},decode(ot,bt){const Ct=ot instanceof _e.Reader?ot:new _e.Reader(ot);let cn=bt===void 0?Ct.len:Ct.pos+bt;const Yt=st();for(;Ct.pos<cn;){const dn=Ct.uint32();switch(dn>>>3){case 1:Yt.id=Ct.string();break;case 100:Yt.requestMetadata=et.Value.unwrap(et.Value.decode(Ct,Ct.uint32()));break;default:Ct.skipType(dn&7);break}}return Yt},fromJSON(ot){return{id:mn(ot.id)?String(ot.id):"",requestMetadata:mn(ot==null?void 0:ot.requestMetadata)?ot.requestMetadata:void 0}},toJSON(ot){const bt={};return ot.id!==void 0&&(bt.id=ot.id),ot.requestMetadata!==void 0&&(bt.requestMetadata=ot.requestMetadata),bt},fromPartial(ot){var bt,Ct;const cn=st();return cn.id=(bt=ot.id)!==null&&bt!==void 0?bt:"",cn.requestMetadata=(Ct=ot.requestMetadata)!==null&&Ct!==void 0?Ct:void 0,cn}};function wt(){return{layoutId:"",layers:[],requestMetadata:void 0,requestAnimationMode:void 0}}a.BatchLayerRequest={encode(ot,bt=_e.Writer.create()){ot.layoutId!==""&&bt.uint32(10).string(ot.layoutId);for(const Ct of ot.layers)a.BatchLayerRequest_BatchItem.encode(Ct,bt.uint32(18).fork()).ldelim();return ot.requestMetadata!==void 0&&et.Value.encode(et.Value.wrap(ot.requestMetadata),bt.uint32(802).fork()).ldelim(),ot.requestAnimationMode!==void 0&&bt.uint32(808).int32(_t(ot.requestAnimationMode)),bt},decode(ot,bt){const Ct=ot instanceof _e.Reader?ot:new _e.Reader(ot);let cn=bt===void 0?Ct.len:Ct.pos+bt;const Yt=wt();for(;Ct.pos<cn;){const dn=Ct.uint32();switch(dn>>>3){case 1:Yt.layoutId=Ct.string();break;case 2:Yt.layers.push(a.BatchLayerRequest_BatchItem.decode(Ct,Ct.uint32()));break;case 100:Yt.requestMetadata=et.Value.unwrap(et.Value.decode(Ct,Ct.uint32()));break;case 101:Yt.requestAnimationMode=St(Ct.int32());break;default:Ct.skipType(dn&7);break}}return Yt},fromJSON(ot){return{layoutId:mn(ot.layoutId)?String(ot.layoutId):"",layers:Array.isArray(ot==null?void 0:ot.layers)?ot.layers.map(bt=>a.BatchLayerRequest_BatchItem.fromJSON(bt)):[],requestMetadata:mn(ot==null?void 0:ot.requestMetadata)?ot.requestMetadata:void 0,requestAnimationMode:mn(ot.requestAnimationMode)?St(ot.requestAnimationMode):void 0}},toJSON(ot){const bt={};return ot.layoutId!==void 0&&(bt.layoutId=ot.layoutId),ot.layers?bt.layers=ot.layers.map(Ct=>Ct?a.BatchLayerRequest_BatchItem.toJSON(Ct):void 0):bt.layers=[],ot.requestMetadata!==void 0&&(bt.requestMetadata=ot.requestMetadata),ot.requestAnimationMode!==void 0&&(bt.requestAnimationMode=ot.requestAnimationMode!==void 0?yt(ot.requestAnimationMode):void 0),bt},fromPartial(ot){var bt,Ct,cn,Yt;const dn=wt();return dn.layoutId=(bt=ot.layoutId)!==null&&bt!==void 0?bt:"",dn.layers=((Ct=ot.layers)===null||Ct===void 0?void 0:Ct.map(Bn=>a.BatchLayerRequest_BatchItem.fromPartial(Bn)))||[],dn.requestMetadata=(cn=ot.requestMetadata)!==null&&cn!==void 0?cn:void 0,dn.requestAnimationMode=(Yt=ot.requestAnimationMode)!==null&&Yt!==void 0?Yt:void 0,dn}};function Ft(){return{create:void 0,update:void 0,delete:void 0}}a.BatchLayerRequest_BatchItem={encode(ot,bt=_e.Writer.create()){return ot.create!==void 0&&a.PartialLayer.encode(ot.create,bt.uint32(10).fork()).ldelim(),ot.update!==void 0&&a.PartialLayerWithID.encode(ot.update,bt.uint32(18).fork()).ldelim(),ot.delete!==void 0&&a.BatchDeleteLayerRequest.encode(ot.delete,bt.uint32(26).fork()).ldelim(),bt},decode(ot,bt){const Ct=ot instanceof _e.Reader?ot:new _e.Reader(ot);let cn=bt===void 0?Ct.len:Ct.pos+bt;const Yt=Ft();for(;Ct.pos<cn;){const dn=Ct.uint32();switch(dn>>>3){case 1:Yt.create=a.PartialLayer.decode(Ct,Ct.uint32());break;case 2:Yt.update=a.PartialLayerWithID.decode(Ct,Ct.uint32());break;case 3:Yt.delete=a.BatchDeleteLayerRequest.decode(Ct,Ct.uint32());break;default:Ct.skipType(dn&7);break}}return Yt},fromJSON(ot){return{create:mn(ot.create)?a.PartialLayer.fromJSON(ot.create):void 0,update:mn(ot.update)?a.PartialLayerWithID.fromJSON(ot.update):void 0,delete:mn(ot.delete)?a.BatchDeleteLayerRequest.fromJSON(ot.delete):void 0}},toJSON(ot){const bt={};return ot.create!==void 0&&(bt.create=ot.create?a.PartialLayer.toJSON(ot.create):void 0),ot.update!==void 0&&(bt.update=ot.update?a.PartialLayerWithID.toJSON(ot.update):void 0),ot.delete!==void 0&&(bt.delete=ot.delete?a.BatchDeleteLayerRequest.toJSON(ot.delete):void 0),bt},fromPartial(ot){const bt=Ft();return bt.create=ot.create!==void 0&&ot.create!==null?a.PartialLayer.fromPartial(ot.create):void 0,bt.update=ot.update!==void 0&&ot.update!==null?a.PartialLayerWithID.fromPartial(ot.update):void 0,bt.delete=ot.delete!==void 0&&ot.delete!==null?a.BatchDeleteLayerRequest.fromPartial(ot.delete):void 0,bt}};function ln(){return{create:void 0,update:void 0,delete:void 0}}a.LayoutEvent={encode(ot,bt=_e.Writer.create()){return ot.create!==void 0&&a.Layout.encode(ot.create,bt.uint32(10).fork()).ldelim(),ot.update!==void 0&&a.Layout.encode(ot.update,bt.uint32(18).fork()).ldelim(),ot.delete!==void 0&&a.DeleteLayoutResponse.encode(ot.delete,bt.uint32(26).fork()).ldelim(),bt},decode(ot,bt){const Ct=ot instanceof _e.Reader?ot:new _e.Reader(ot);let cn=bt===void 0?Ct.len:Ct.pos+bt;const Yt=ln();for(;Ct.pos<cn;){const dn=Ct.uint32();switch(dn>>>3){case 1:Yt.create=a.Layout.decode(Ct,Ct.uint32());break;case 2:Yt.update=a.Layout.decode(Ct,Ct.uint32());break;case 3:Yt.delete=a.DeleteLayoutResponse.decode(Ct,Ct.uint32());break;default:Ct.skipType(dn&7);break}}return Yt},fromJSON(ot){return{create:mn(ot.create)?a.Layout.fromJSON(ot.create):void 0,update:mn(ot.update)?a.Layout.fromJSON(ot.update):void 0,delete:mn(ot.delete)?a.DeleteLayoutResponse.fromJSON(ot.delete):void 0}},toJSON(ot){const bt={};return ot.create!==void 0&&(bt.create=ot.create?a.Layout.toJSON(ot.create):void 0),ot.update!==void 0&&(bt.update=ot.update?a.Layout.toJSON(ot.update):void 0),ot.delete!==void 0&&(bt.delete=ot.delete?a.DeleteLayoutResponse.toJSON(ot.delete):void 0),bt},fromPartial(ot){const bt=ln();return bt.create=ot.create!==void 0&&ot.create!==null?a.Layout.fromPartial(ot.create):void 0,bt.update=ot.update!==void 0&&ot.update!==null?a.Layout.fromPartial(ot.update):void 0,bt.delete=ot.delete!==void 0&&ot.delete!==null?a.DeleteLayoutResponse.fromPartial(ot.delete):void 0,bt}};function jt(){return{create:void 0,update:void 0,delete:void 0,batch:void 0}}a.LayerEvent={encode(ot,bt=_e.Writer.create()){return ot.create!==void 0&&a.Layer.encode(ot.create,bt.uint32(10).fork()).ldelim(),ot.update!==void 0&&a.Layer.encode(ot.update,bt.uint32(18).fork()).ldelim(),ot.delete!==void 0&&a.DeleteLayerResponse.encode(ot.delete,bt.uint32(26).fork()).ldelim(),ot.batch!==void 0&&a.BatchLayerResponse.encode(ot.batch,bt.uint32(34).fork()).ldelim(),bt},decode(ot,bt){const Ct=ot instanceof _e.Reader?ot:new _e.Reader(ot);let cn=bt===void 0?Ct.len:Ct.pos+bt;const Yt=jt();for(;Ct.pos<cn;){const dn=Ct.uint32();switch(dn>>>3){case 1:Yt.create=a.Layer.decode(Ct,Ct.uint32());break;case 2:Yt.update=a.Layer.decode(Ct,Ct.uint32());break;case 3:Yt.delete=a.DeleteLayerResponse.decode(Ct,Ct.uint32());break;case 4:Yt.batch=a.BatchLayerResponse.decode(Ct,Ct.uint32());break;default:Ct.skipType(dn&7);break}}return Yt},fromJSON(ot){return{create:mn(ot.create)?a.Layer.fromJSON(ot.create):void 0,update:mn(ot.update)?a.Layer.fromJSON(ot.update):void 0,delete:mn(ot.delete)?a.DeleteLayerResponse.fromJSON(ot.delete):void 0,batch:mn(ot.batch)?a.BatchLayerResponse.fromJSON(ot.batch):void 0}},toJSON(ot){const bt={};return ot.create!==void 0&&(bt.create=ot.create?a.Layer.toJSON(ot.create):void 0),ot.update!==void 0&&(bt.update=ot.update?a.Layer.toJSON(ot.update):void 0),ot.delete!==void 0&&(bt.delete=ot.delete?a.DeleteLayerResponse.toJSON(ot.delete):void 0),ot.batch!==void 0&&(bt.batch=ot.batch?a.BatchLayerResponse.toJSON(ot.batch):void 0),bt},fromPartial(ot){const bt=jt();return bt.create=ot.create!==void 0&&ot.create!==null?a.Layer.fromPartial(ot.create):void 0,bt.update=ot.update!==void 0&&ot.update!==null?a.Layer.fromPartial(ot.update):void 0,bt.delete=ot.delete!==void 0&&ot.delete!==null?a.DeleteLayerResponse.fromPartial(ot.delete):void 0,bt.batch=ot.batch!==void 0&&ot.batch!==null?a.BatchLayerResponse.fromPartial(ot.batch):void 0,bt}};function En(){return{layout:void 0,layer:void 0}}a.Event={encode(ot,bt=_e.Writer.create()){return ot.layout!==void 0&&a.LayoutEvent.encode(ot.layout,bt.uint32(10).fork()).ldelim(),ot.layer!==void 0&&a.LayerEvent.encode(ot.layer,bt.uint32(18).fork()).ldelim(),bt},decode(ot,bt){const Ct=ot instanceof _e.Reader?ot:new _e.Reader(ot);let cn=bt===void 0?Ct.len:Ct.pos+bt;const Yt=En();for(;Ct.pos<cn;){const dn=Ct.uint32();switch(dn>>>3){case 1:Yt.layout=a.LayoutEvent.decode(Ct,Ct.uint32());break;case 2:Yt.layer=a.LayerEvent.decode(Ct,Ct.uint32());break;default:Ct.skipType(dn&7);break}}return Yt},fromJSON(ot){return{layout:mn(ot.layout)?a.LayoutEvent.fromJSON(ot.layout):void 0,layer:mn(ot.layer)?a.LayerEvent.fromJSON(ot.layer):void 0}},toJSON(ot){const bt={};return ot.layout!==void 0&&(bt.layout=ot.layout?a.LayoutEvent.toJSON(ot.layout):void 0),ot.layer!==void 0&&(bt.layer=ot.layer?a.LayerEvent.toJSON(ot.layer):void 0),bt},fromPartial(ot){const bt=En();return bt.layout=ot.layout!==void 0&&ot.layout!==null?a.LayoutEvent.fromPartial(ot.layout):void 0,bt.layer=ot.layer!==void 0&&ot.layer!==null?a.LayerEvent.fromPartial(ot.layer):void 0,bt}};class Dn{constructor(bt){this.rpc=bt,this.ListLayers=this.ListLayers.bind(this),this.CreateLayer=this.CreateLayer.bind(this),this.GetLayer=this.GetLayer.bind(this),this.UpdateLayer=this.UpdateLayer.bind(this),this.DeleteLayer=this.DeleteLayer.bind(this),this.Batch=this.Batch.bind(this)}ListLayers(bt){const Ct=a.ListLayersRequest.encode(bt).finish();return this.rpc.request("apis.layout.v2.LayerService","ListLayers",Ct).then(Yt=>a.ListLayersResponse.decode(new _e.Reader(Yt)))}CreateLayer(bt){const Ct=a.CreateLayerRequest.encode(bt).finish();return this.rpc.request("apis.layout.v2.LayerService","CreateLayer",Ct).then(Yt=>a.Layer.decode(new _e.Reader(Yt)))}GetLayer(bt){const Ct=a.GetLayerRequest.encode(bt).finish();return this.rpc.request("apis.layout.v2.LayerService","GetLayer",Ct).then(Yt=>a.Layer.decode(new _e.Reader(Yt)))}UpdateLayer(bt){const Ct=a.UpdateLayerRequest.encode(bt).finish();return this.rpc.request("apis.layout.v2.LayerService","UpdateLayer",Ct).then(Yt=>a.Layer.decode(new _e.Reader(Yt)))}DeleteLayer(bt){const Ct=a.DeleteLayerRequest.encode(bt).finish();return this.rpc.request("apis.layout.v2.LayerService","DeleteLayer",Ct).then(Yt=>a.DeleteLayerResponse.decode(new _e.Reader(Yt)))}Batch(bt){const Ct=a.BatchLayerRequest.encode(bt).finish();return this.rpc.request("apis.layout.v2.LayerService","Batch",Ct).then(Yt=>a.BatchLayerResponse.decode(new _e.Reader(Yt)))}}a.LayerServiceClientImpl=Dn,a.LayerServiceDefinition={name:"LayerService",fullName:"apis.layout.v2.LayerService",methods:{listLayers:{name:"ListLayers",requestType:a.ListLayersRequest,requestStream:!1,responseType:a.ListLayersResponse,responseStream:!1,options:{}},createLayer:{name:"CreateLayer",requestType:a.CreateLayerRequest,requestStream:!1,responseType:a.Layer,responseStream:!1,options:{}},getLayer:{name:"GetLayer",requestType:a.GetLayerRequest,requestStream:!1,responseType:a.Layer,responseStream:!1,options:{}},updateLayer:{name:"UpdateLayer",requestType:a.UpdateLayerRequest,requestStream:!1,responseType:a.Layer,responseStream:!1,options:{}},deleteLayer:{name:"DeleteLayer",requestType:a.DeleteLayerRequest,requestStream:!1,responseType:a.DeleteLayerResponse,responseStream:!1,options:{}},batch:{name:"Batch",requestType:a.BatchLayerRequest,requestStream:!1,responseType:a.BatchLayerResponse,responseStream:!1,options:{}}}};class Ln{constructor(bt){this.rpc=bt,this.ListLayouts=this.ListLayouts.bind(this),this.CreateLayout=this.CreateLayout.bind(this),this.GetLayout=this.GetLayout.bind(this),this.UpdateLayout=this.UpdateLayout.bind(this),this.DeleteLayout=this.DeleteLayout.bind(this)}ListLayouts(bt){const Ct=a.ListLayoutsRequest.encode(bt).finish();return this.rpc.request("apis.layout.v2.LayoutService","ListLayouts",Ct).then(Yt=>a.ListLayoutsResponse.decode(new _e.Reader(Yt)))}CreateLayout(bt){const Ct=a.CreateLayoutRequest.encode(bt).finish();return this.rpc.request("apis.layout.v2.LayoutService","CreateLayout",Ct).then(Yt=>a.Layout.decode(new _e.Reader(Yt)))}GetLayout(bt){const Ct=a.GetLayoutRequest.encode(bt).finish();return this.rpc.request("apis.layout.v2.LayoutService","GetLayout",Ct).then(Yt=>a.Layout.decode(new _e.Reader(Yt)))}UpdateLayout(bt){const Ct=a.UpdateLayoutRequest.encode(bt).finish();return this.rpc.request("apis.layout.v2.LayoutService","UpdateLayout",Ct).then(Yt=>a.Layout.decode(new _e.Reader(Yt)))}DeleteLayout(bt){const Ct=a.DeleteLayoutRequest.encode(bt).finish();return this.rpc.request("apis.layout.v2.LayoutService","DeleteLayout",Ct).then(Yt=>a.DeleteLayoutResponse.decode(new _e.Reader(Yt)))}}a.LayoutServiceClientImpl=Ln,a.LayoutServiceDefinition={name:"LayoutService",fullName:"apis.layout.v2.LayoutService",methods:{listLayouts:{name:"ListLayouts",requestType:a.ListLayoutsRequest,requestStream:!1,responseType:a.ListLayoutsResponse,responseStream:!1,options:{}},createLayout:{name:"CreateLayout",requestType:a.CreateLayoutRequest,requestStream:!1,responseType:a.Layout,responseStream:!1,options:{}},getLayout:{name:"GetLayout",requestType:a.GetLayoutRequest,requestStream:!1,responseType:a.Layout,responseStream:!1,options:{}},updateLayout:{name:"UpdateLayout",requestType:a.UpdateLayoutRequest,requestStream:!1,responseType:a.Layout,responseStream:!1,options:{}},deleteLayout:{name:"DeleteLayout",requestType:a.DeleteLayoutRequest,requestStream:!1,responseType:a.DeleteLayoutResponse,responseStream:!1,options:{}}}};var Jn=(()=>{if(typeof Jn<"u")return Jn;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof commonjsGlobal$1<"u")return commonjsGlobal$1;throw"Unable to locate global object"})();_e.util.Long!==j.default&&(_e.util.Long=j.default,_e.configure());function zn(ot){return typeof ot=="object"&&ot!==null}function mn(ot){return ot!=null}})(api$3);(function(a){var c=commonjsGlobal$1&&commonjsGlobal$1.__createBinding||(Object.create?function(k,j,_e,et){et===void 0&&(et=_e),Object.defineProperty(k,et,{enumerable:!0,get:function(){return j[_e]}})}:function(k,j,_e,et){et===void 0&&(et=_e),k[et]=j[_e]}),b=commonjsGlobal$1&&commonjsGlobal$1.__exportStar||function(k,j){for(var _e in k)_e!=="default"&&!j.hasOwnProperty(_e)&&c(j,k,_e)};Object.defineProperty(a,"__esModule",{value:!0}),a.layoutApiEventMap=void 0;const _=api$3;b(api$3,a),a.layoutApiEventMap={[_.EventType.EVENT_TYPE_LAYOUT]:"layout",[_.EventType.EVENT_TYPE_LAYER]:"layer",[_.EventType.EVENT_TYPE_UNSPECIFIED]:"unspecified"}})(dist$2);var api$2={},browser$2=!1;const __viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$0$1=getAugmentedNamespace(__viteBrowserExternal$1);var logger={};class EnhancedMap extends Map{computeIfAbsent(c,b){if(this.has(c))return this.get(c);const _=b(c);return this.set(c,_),_}computeIfPresent(c,b){const _=this.get(c);if(_===void 0)return;const k=b(c,_);return k!==void 0?this.set(c,k):this.delete(c),k}compute(c,b){const _=this.get(c),k=b(c,_);return k?this.set(c,k):this.delete(c),k}}var InternalLogLevel;(function(a){a[a.Trace=0]="Trace",a[a.Debug=1]="Debug",a[a.Info=2]="Info",a[a.Warn=3]="Warn",a[a.Error=4]="Error"})(InternalLogLevel||(InternalLogLevel={}));function getInternalLogger(a){return provider.getLogger(a)}const INTERNAL_LOGGING_SETTINGS={setInternalLogLevel:a=>provider.changeLogLevel(a),setOutput:a=>provider.changeOutput(a),reset:()=>provider.reset()};class InternalLoggerImpl{constructor(c,b,_){this._name=c,this._level=b,this._fnOutput=_}trace(c){this.log(InternalLogLevel.Trace,c)}debug(c){this.log(InternalLogLevel.Debug,c)}error(c,b){this.log(InternalLogLevel.Error,c,b)}info(c){this.log(InternalLogLevel.Info,c)}warn(c,b){this.log(InternalLogLevel.Warn,c,b)}setLevel(c){this._level=c}setOutput(c){this._fnOutput=c}log(c,b,_){this._level>c||this._fnOutput(`${InternalLogLevel[this._level].toString()} <INTERNAL LOGGER> ${this._name} ${b()}${_?`
`+_.stack:""}`)}}class InternalProviderImpl{constructor(){this._loggers=new EnhancedMap,this._logLevel=InternalLogLevel.Error,this._fnOutput=InternalProviderImpl.logConsole}getLogger(c){return this._loggers.computeIfAbsent(c,b=>new InternalLoggerImpl(b,this._logLevel,this._fnOutput))}changeLogLevel(c){this._logLevel=c,this._loggers.forEach(b=>b.setLevel(c))}changeOutput(c){this._fnOutput=c,this._loggers.forEach(b=>b.setOutput(this._fnOutput))}reset(){this.changeLogLevel(InternalLogLevel.Error),this._fnOutput=InternalProviderImpl.logConsole,this._loggers.forEach(c=>c.setOutput(this._fnOutput))}static logConsole(c){console&&console.log&&console.log(c)}}const provider=new InternalProviderImpl;var InternalLogger=Object.freeze({__proto__:null,get InternalLogLevel(){return InternalLogLevel},getInternalLogger,INTERNAL_LOGGING_SETTINGS}),LogLevel$1;(function(a){a[a.Trace=0]="Trace",a[a.Debug=1]="Debug",a[a.Info=2]="Info",a[a.Warn=3]="Warn",a[a.Error=4]="Error",a[a.Fatal=5]="Fatal"})(LogLevel$1||(LogLevel$1={}));(function(a){function c(b){switch(b.toLowerCase()){case"trace":return a.Trace;case"debug":return a.Debug;case"info":return a.Info;case"warn":return a.Warn;case"error":return a.Error;case"fatal":return a.Fatal;default:return}}a.toLogLevel=c})(LogLevel$1||(LogLevel$1={}));class CoreLoggerImpl{constructor(c){this._runtime=c}get id(){return this._runtime.id}get logLevel(){return this._runtime.level}get runtimeSettings(){return Object.assign({},this._runtime)}set runtimeSettings(c){this._runtime=c}trace(c,...b){this.logMessage(LogLevel$1.Trace,c,b)}debug(c,...b){this.logMessage(LogLevel$1.Debug,c,b)}info(c,...b){this.logMessage(LogLevel$1.Info,c,b)}warn(c,...b){this.logMessage(LogLevel$1.Warn,c,b)}error(c,...b){this.logMessage(LogLevel$1.Error,c,b)}fatal(c,...b){this.logMessage(LogLevel$1.Fatal,c,b)}logMessage(c,b,_){if(this._runtime.level>c)return;const k=Date.now(),j=typeof b=="string"?b:b(),_e=CoreLoggerImpl.getErrorAndArgs(_);switch(this._runtime.channel.type){case"RawLogChannel":this._runtime.channel.write({message:j,exception:_e.error,args:_e.args,timeInMillis:k,level:c,logNames:this._runtime.name},this._runtime.argumentFormatter);return;case"LogChannel":this._runtime.channel.write(this.createLogMessage(j,c,_e,k));break}}formatArgValue(c){try{return this._runtime.argumentFormatter(c)}catch{return`>>ARG CONVERT FAILED: '${c!==void 0?c.toString():"undefined"}'<<`}}createLogMessage(c,b,_,k){let j;const _e=_.error,et=_.args;_e&&(j=`${_e.name}: ${_e.message}`,_e.stack&&(j+=`@
${_e.stack}`));const nt=this._runtime.dateFormatter(k);let it=LogLevel$1[b].toUpperCase();it.length<5&&(it+=" ");const ft=typeof this._runtime.name=="string"?this._runtime.name:this._runtime.name.join(", "),pt=typeof et<"u"&&et.length>0?" ["+et.map(St=>this.formatArgValue(St)).join(", ")+"]":"";return{message:nt+" "+it+" ["+ft+"] "+c+pt,error:j}}static getErrorAndArgs(c){if(c.length===0)return{};let b,_;const k=c[0];if(k instanceof Error)return b=k,_=c.length>1?c.slice(1):void 0,{error:b,args:_};if(typeof k=="function"){const j=k();return j instanceof Error?(b=j,_=c.length>1?c.slice(1):void 0,{error:b,args:_}):c.length===1?Array.isArray(j)?{args:j.length>0?j:void 0}:{args:j}:Array.isArray(j)?{args:[...j,...c.slice(1)]}:{args:[j,...c.slice(1)]}}return{args:c}}}function padStart(a,c,b=" "){return padInternal(a,c,"start",b)}function padEnd(a,c,b=" "){return padInternal(a,c,"end",b)}function maxLengthStringValueInArray(a){return a.map(c=>c.length).reduce((c,b)=>b>c?b:c,0)}function padInternal(a,c,b,_=" "){if(c<=a.length)return a;if(_.length>1)throw new Error(`Fill char must be one char exactly, it is: ${_.length}`);const k=c-a.length;let j="";for(let _e=0;_e<k;_e++)j+=_;return b==="start"?j+a:a+j}function formatArgument(a){return a===void 0?"undefined":JSON.stringify(a)}function formatDate(a){const c=new Date(a),b=c.getFullYear(),_=padStart((c.getMonth()+1).toString(),2,"0"),k=padStart(c.getDate().toString(),2,"0"),j=padStart(c.getHours().toString(),2,"0"),_e=padStart(c.getMinutes().toString(),2,"0"),et=padStart(c.getSeconds().toString(),2,"0"),nt=padStart(c.getMilliseconds().toString(),2,"0");return`${b}-${_}-${k} ${j}:${_e}:${et},${nt}`}class ConsoleLogChannel{constructor(){this.type="LogChannel"}write(c){console&&console.log&&console.log(c.message+(c.error?`
${c.error}`:""))}}var DefaultChannels;(function(a){function c(){return new ConsoleLogChannel}a.createConsoleChannel=c})(DefaultChannels||(DefaultChannels={}));class LogProviderImpl{constructor(c,b){this._log=getInternalLogger("core.impl.LogProviderImpl"),this._name=c,this._settings=b,this._loggers=new EnhancedMap,this._idToKeyMap=new EnhancedMap,this._globalRuntimeSettings={level:b.level,channel:b.channel},this._nextLoggerId=1,this._log.trace(()=>`Created LogProviderImpl with settings: ${JSON.stringify(this._settings)}`)}get runtimeSettings(){return Object.assign(Object.assign({},this._settings),{level:this._globalRuntimeSettings.level,channel:this._globalRuntimeSettings.channel})}getLogger(c){return this.getOrCreateLogger(c)}updateLoggerRuntime(c,b){this._log.debug(()=>`Updating logger ${c.id} runtime settings using: '${JSON.stringify(b)}'`);const _=this._idToKeyMap.get(c.id);return _===void 0?(this._log.warn(()=>`Cannot update logger with id: ${c.id}, it was not found.`),!1):(this._loggers.computeIfPresent(_,(k,j)=>(j.runtimeSettings=LogProviderImpl.mergeRuntimeSettingsIntoLogRuntime(j.runtimeSettings,b),j)),!0)}updateRuntimeSettings(c){this._log.debug(()=>`Updating global runtime settings and updating existing loggers runtime settings using: '${JSON.stringify(c)}'`),this._globalRuntimeSettings={level:c.level!==void 0?c.level:this._globalRuntimeSettings.level,channel:c.channel!==void 0?c.channel:this._globalRuntimeSettings.channel},this._loggers.forEach(b=>b.runtimeSettings=LogProviderImpl.mergeRuntimeSettingsIntoLogRuntime(b.runtimeSettings,c))}clear(){this._loggers.clear(),this._idToKeyMap.clear(),this._globalRuntimeSettings=Object.assign({},this._settings),this._nextLoggerId=1}getOrCreateLogger(c){const b=LogProviderImpl.createKey(c),_=this._loggers.computeIfAbsent(b,()=>{const k={level:this._globalRuntimeSettings.level,channel:this._globalRuntimeSettings.channel,id:this.nextLoggerId(),name:c,argumentFormatter:this._settings.argumentFormatter,dateFormatter:this._settings.dateFormatter};return new CoreLoggerImpl(k)});return this._idToKeyMap.computeIfAbsent(_.id,()=>b),_}nextLoggerId(){const c=this._name+"_"+this._nextLoggerId;return this._nextLoggerId++,c}static mergeRuntimeSettingsIntoLogRuntime(c,b){return Object.assign(Object.assign({},c),{level:b.level!==void 0?b.level:c.level,channel:b.channel!==void 0?b.channel:c.channel})}static createKey(c){return typeof c=="string"?c:c.join(",")}}function createLogProvider(a,c){return new LogProviderImpl(a,c)}var index=Object.freeze({__proto__:null,EnhancedMap,padStart,padEnd,maxLengthStringValueInArray});class CategoryImpl{constructor(c,b,_,k){this._children=[],this._logger=c,this._name=b,this._parent=_,this._fnGetOrCreateChildCategory=k}get name(){return this._name}get parent(){return this._parent}get path(){const c=[];let b=this;for(;b!==void 0;)c.push(b.name),b=b.parent;return c.reverse()}get children(){return[...this._children]}addChild(c){if(c.parent!==this)throw new Error(`Cannot add child '${c.name}', expected parent '${this._name} but got ${c.parent?c.parent.name:"undefined"}'`);this._children.push(c)}getChildCategory(c){const b=this._children.find(_=>_.name===c);return b!==void 0?b:this._fnGetOrCreateChildCategory(c,this)}get id(){return this._logger.id}get logLevel(){return this._logger.logLevel}get runtimeSettings(){return this._logger.runtimeSettings}get logger(){return this._logger}trace(c,...b){this._logger.trace(c,...b)}debug(c,...b){this._logger.debug(c,...b)}info(c,...b){this._logger.info(c,...b)}warn(c,...b){this._logger.warn(c,...b)}error(c,...b){this._logger.error(c,...b)}fatal(c,...b){this._logger.fatal(c,...b)}}const CATEGORY_PATH_SEPARATOR="#";class CategoryProviderImpl{constructor(c,b){this._name=c,this._initialConfig=b,this._categoryStorage=new CategoryStorage(c,b)}get name(){return this._name}get config(){return this._initialConfig}get runtimeConfig(){return this._categoryStorage.getCurrentRuntimeConfig()}getCategory(c,b){return this._categoryStorage.getOrCreateCategory(c,b)}updateRuntimeSettingsCategory(c,b){this._categoryStorage.updateRuntimeSettingsCategory(c,b)}updateRuntimeSettings(c){this._categoryStorage.updateRuntimeSettings(c)}getRegisteredCategories(){return this._categoryStorage.getRegisteredCategories()}getCategoryByPath(c){return this._categoryStorage.getCategoryByPath(c)}}class CategoryStorage{constructor(c,b){this._categoriesById=new Map,this._categoriesByPath=new Map,this._categoryProviderName=c,this._allowSameCategoryName=b.allowSameCategoryName,this._logProvider=createLogProvider(c,Object.assign({},b)),this.getOrCreateCategory=this.getOrCreateCategory.bind(this)}getOrCreateCategory(c,b){if(c.indexOf(CATEGORY_PATH_SEPARATOR)!==-1)throw new Error(`Cannot create category '${c}', name cannot contain a '${CATEGORY_PATH_SEPARATOR}'.`);const _=b!==void 0?this.getParentCategory(b):void 0;return _===void 0?this.getOrCreateRootCategory(c):this.getOrCreateChildCategory(c,_)}updateRuntimeSettingsCategory(c,b){if(!c.id.startsWith(this._categoryProviderName))throw new Error(`Category '${c.name}' with LogId '${c.id}' is from a different CategoryProvider, cannot mix categories between providers.`);const _=this._categoriesById.get(c.id);_!==void 0&&(this._logProvider.updateLoggerRuntime(_.logger,{level:b.level}),!(b.disableRecursion!==void 0&&b.disableRecursion)&&_.children.forEach(k=>this.updateRuntimeSettingsCategory(k,b)))}updateRuntimeSettings(c){this._logProvider.updateRuntimeSettings(c)}getCurrentRuntimeConfig(){return Object.assign(Object.assign({},this._logProvider.runtimeSettings),{allowSameCategoryName:this._allowSameCategoryName})}getRegisteredCategories(){return[...this._categoriesById.values()]}getCategoryByPath(c){return this._categoriesByPath.get(c)}getParentCategory(c){let b;if(CategoryStorage.isLogId(c)){if(b=this._categoriesById.get(c),b===void 0)throw new Error(`Parent category was not found by LogId '${c}'. Are you sure you passed in the correct argument?`)}else if(b=this._categoriesById.get(c.id),b===void 0)throw new Error(`Parent category '${c.name}' was not found by it's LogId '${c.id}'. Are you sure you passed in the correct parent category?`);return b}getOrCreateRootCategory(c){const b=this._categoriesByPath.get(c);if(b){if(!this._allowSameCategoryName)throw new Error(`Category '${c} already exists, config flag allowSameCategoryName=false - therefore matching version 1 behavior (hence this Error)`);return b}const _=this._logProvider.getLogger(c),k=new CategoryImpl(_,c,void 0,this.getOrCreateCategory);return this._categoriesById.set(k.id,k),this._categoriesByPath.set(c,k),k}getOrCreateChildCategory(c,b){if(!b.id.startsWith(this._categoryProviderName))throw new Error(`Parent category '${b.name}' with LogId '${b.id}' is from a different CategoryProvider, cannot mix categories between providers.`);const _=[...b.path,c].join(CATEGORY_PATH_SEPARATOR),k=this._categoriesByPath.get(_);if(k){if(!this._allowSameCategoryName)throw new Error(`Child category '${c} already exists for parent category ${b.name}, config flag allowSameCategoryName=false - therefore matching version 1 behavior (hence this Error)`);return k}const j=this._logProvider.getLogger(_);this._logProvider.updateLoggerRuntime(j,{level:b.logger.runtimeSettings.level,channel:b.logger.runtimeSettings.channel});const _e=new CategoryImpl(j,c,b,this.getOrCreateCategory);return this._categoriesById.set(_e.id,_e),this._categoriesByPath.set(_e.path.join(CATEGORY_PATH_SEPARATOR),_e),b.addChild(_e),_e}static isLogId(c){return typeof c=="string"}}class CategoryControlProviderImpl{constructor(c,b){this._provider=c,this._messageChannel=b,this._originalLogLevels=CategoryControlProviderImpl.loadCurrentGroupLogLevels(c)}get name(){return this._provider.name}showSettings(){let c=`Available categories (CategoryProvider '${this._provider.name}'):
`;const b=this.createCategoryInfoHierarchy(),_=b.size.toString().length,k=index.maxLengthStringValueInArray([...b.values()].map(_e=>_e.category.name+" ".repeat(_e.depth))),j=[...b.values()].map((_e,et)=>CategoryControlProviderImpl.createSettingLineCategory(_e,et,_,k));c+=j.join(`
`)+(j.length>0?`
`:""),this._messageChannel(c)}help(){const c=`You can use the following commands (CategoryProvider ${this._provider.name}):
  showSettings()
    Shows the current configuration settings.
  update(level: CategoryControlProviderLogLevel, categoryId?: number | string, noRecurse?: boolean)
    Change the log level for a category (by default recursively).
      @param level      The log level to set - must be one of 'trace', 'debug', 'info', 'warn', 'error' or 'fatal'
      @param categoryId The category id or path of a category (e.g. root#child1) to update. Use showSettings() for id and/or name.
                        When omitted, it applies the level to all categories recursively.
  reset()
    Resets the log levels of the config groups back to when this control provider was created.
  save()
    Saves the current log levels for all categories of this provider. Use restore() to load last saved state.
  restore()
    Restore stored saved state, if any. Log levels will be set according to the saved state.
  help()
    Shows this help.
`;this._messageChannel(c)}reset(){const c=new Map(this._provider.getRegisteredCategories().map(b=>[b.id,b]));this._originalLogLevels.forEach((b,_)=>{const k=c.get(_);k!==void 0&&this._provider.updateRuntimeSettingsCategory(k,{level:b,disableRecursion:!0}),c.delete(_)}),c.forEach(b=>{b.parent!==void 0&&this._provider.updateRuntimeSettingsCategory(b,{level:b.parent.logLevel,disableRecursion:!0})}),this._originalLogLevels=CategoryControlProviderImpl.loadCurrentGroupLogLevels(this._provider),this._messageChannel("Successfully reset log levels back to original state (from when this CategoryControlProvider was created).")}save(){if(!localStorage){this._messageChannel("Cannot save state, localStorage is not available.");return}const c=this._provider.getRegisteredCategories().filter(_=>_.parent===void 0).map(_=>CategoryControlProviderImpl.createCategorySaveData(_)),b={name:this._provider.name,rootCategories:c};localStorage.setItem(this.createKey(),JSON.stringify(b)),this._messageChannel(`Successfully saved state for CategoryControlProvider '${this._provider.name}'.`)}restore(c){const b=c!==void 0?c:!0;if(!localStorage){b&&this._messageChannel(`Will not attempt to restore state for CategoryControlProvider '${this._provider.name}', localStorage is not available.`);return}const _=this.createKey(),k=localStorage.getItem(_);if(k===null){b&&this._messageChannel(`Cannot restore state for CategoryControlProvider '${this._provider.name}', no data available.`);return}try{const j=JSON.parse(k);if(this._provider.name!==j.name){b&&this._messageChannel(`Cannot restore state for CategoryControlProvider '${this._provider.name}', data is not for provider - found name '${j.name}'.`);return}this.restoreBySaveData(j,b),this._messageChannel(`Successfully restored state for CategoryControlProvider '${this._provider.name}'`),this._originalLogLevels=CategoryControlProviderImpl.loadCurrentGroupLogLevels(this._provider)}catch{localStorage.removeItem(_),this._messageChannel(`Cannot restore state for CategoryControlProvider '${this._provider.name}', data is not valid. Invalid data removed from localStorage.`)}}update(c,b,_){typeof b>"u"?this.updateAll(c):typeof b=="number"?this.updateByIndex(c,b,_!==void 0?_:!1):this.updateByPath(c,b,_!==void 0?_:!1)}updateAll(c){const b=LogLevel$1.toLogLevel(c);this._provider.getRegisteredCategories().filter(_=>_.parent===void 0).forEach(_=>this._provider.updateRuntimeSettingsCategory(_,{level:b})),this._messageChannel(`Updated all categories to use log level '${c.toLowerCase()}'`)}updateByPath(c,b,_){const k=this._provider.getCategoryByPath(b);if(k===void 0){this._messageChannel(`Failed to find a provider by path '${b}', please make sure to separate the parts by a ${CATEGORY_PATH_SEPARATOR}.`);return}this._provider.updateRuntimeSettingsCategory(k,{level:LogLevel$1.toLogLevel(c),disableRecursion:_}),this._messageChannel(`Successfully updated category '${k.name}' with path '${b}' to log level '${c.toLowerCase()}'${_?"":" and recursively applied to children (if any)"}.`)}updateByIndex(c,b,_){if(b<0){this._messageChannel(`Cannot update category by index '${b}', it is negative.`);return}const k=this.createCategoryInfoHierarchy();if(b>=k.size){this._messageChannel(`Cannot update category by index '${b}', it is outside of the range of available categories, use showSettings() to see the indices.`);return}const j=[...k.values()][b].category;this._provider.updateRuntimeSettingsCategory(j,{level:LogLevel$1.toLogLevel(c),disableRecursion:_}),this._messageChannel(`Successfully updated category '${j.name}' by index '${b}' to log level '${c.toLowerCase()}'${_?"":" and recursively applied to children (if any)"}.`)}restoreBySaveData(c,b){const _=(k,j)=>{const _e=j.length>0?j+CATEGORY_PATH_SEPARATOR+k.name:k.name,et=this._provider.getCategoryByPath(_e);if(et!==void 0){const nt=LogLevel$1.toLogLevel(k.level);nt!==void 0?this._provider.updateRuntimeSettingsCategory(et,{level:nt,disableRecursion:!0}):b&&this._messageChannel(`CategoryControlProvider '${this._provider.name}' - cannot restore log level for category path '${_e}', log level is invalid.`);for(const it of k.children)_(it,_e)}else b&&this._messageChannel(`CategoryControlProvider '${this._provider.name}' - failed to find a Category by path '${_e}', will not restore category (and children)`)};for(const k of c.rootCategories)_(k,"")}createKey(){return`CategoryProvider-${this._provider.name}`}createCategoryInfoHierarchy(){const c=new Map;return this._provider.getRegisteredCategories().filter(_=>_.parent===void 0).forEach(_=>CategoryControlProviderImpl.addCategoryInfoHierarchy(_,0,c)),c}static createCategorySaveData(c){return{name:c.name,level:LogLevel$1[c.logLevel],children:c.children.map(b=>this.createCategorySaveData(b))}}static loadCurrentGroupLogLevels(c){return new Map(c.getRegisteredCategories().map(b=>[b.id,b.logLevel]))}static createSettingLineCategory(c,b,_,k){const _e=" ".repeat(c.depth)+c.category.name;return`  [${index.padStart(b.toString(),_)}, ${index.padEnd(_e,k)} (level=${index.padEnd(c.logLevel,5)})]`}static addCategoryInfoHierarchy(c,b,_){_.set(c.id,{category:c,logLevel:LogLevel$1[c.logLevel],depth:b}),c.children.forEach(k=>this.addCategoryInfoHierarchy(k,b+1,_))}}function categoryConfigDebug(a){return`CategoryConfig=level: ${LogLevel$1[a.level].toString()}, allowSameCategoryName=${a.allowSameCategoryName}`}class CategoryProviderService{constructor(){this._log=InternalLogger.getInternalLogger("category.impl.CategoryProviderService"),this._providers=new index.EnhancedMap}createLogProvider(c,b){const _=this._providers.compute(c,(k,j)=>{if(j)throw new Error(`CategoryProvider with name '${c}' already exists, cannot create another.`);const _e=mergeWithDefaults(b);return this._log.debug(()=>`Creating new CategoryProvider with name '${c}', using config settings '${categoryConfigDebug(_e)}'.`),new CategoryProviderImpl(c,_e)});if(_)return _;throw new Error("No CategoryProvider? This is a bug.")}getCategoryControl(c){const b=c||(_=>{if(console&&console.log)console.log(_);else throw new Error("Cannot use console (it is not present), please specify a custom function to write to.")});return{help:()=>b(CategoryProviderService.help()),showSettings:()=>b(this.showSettings()),getProvider:_=>this.getCategoryControlProviderByIdOrName(_,b)}}clear(){this._providers.clear()}showSettings(){let c=`Available CategoryProviders:
`;const b=this._providers.size.toString().length,_=index.maxLengthStringValueInArray([...this._providers.keys()]),k=[...this._providers.entries()].map((j,_e)=>{const et=j[0];return`  [${index.padStart(_e.toString(),b)}, ${index.padEnd(et,_)}]`});return c+=k.join(`
`)+(k.length>0?`
`:""),c}getCategoryControlProviderByIdOrName(c,b){if(typeof c=="string"){const k=this._providers.get(c);if(k===void 0)throw new Error(`Provider with name '${c}' does not exist.`);return new CategoryControlProviderImpl(k,b)}const _=[...this._providers.values()];if(c<0||c>=_.length)throw new Error(`Provider with index '${c}' does not exist (outside of range).`);return new CategoryControlProviderImpl(_[c],b)}static help(){return`You can use the following commands:
  showSettings()
    Shows the current configuration settings.
  getProvider: (id: number | string): CategoryControlProvider
    Get access to a CategoryControlProvider to change log levels.
      @param id The id (use showSettings to see) or name of the provider
  help()
    Shows this help.
`}}const CATEGORY_PROVIDER_SERVICE=new CategoryProviderService,CATEGORY_LOG_CONTROL=a=>CATEGORY_PROVIDER_SERVICE.getCategoryControl(a);function mergeWithDefaults(a){const c={channel:DefaultChannels.createConsoleChannel(),allowSameCategoryName:!0,level:LogLevel$1.Error,dateFormatter:formatDate,argumentFormatter:formatArgument};return a?{channel:a.channel?a.channel:c.channel,allowSameCategoryName:a.allowSameCategoryName!==void 0?a.allowSameCategoryName:c.allowSameCategoryName,level:a.level?a.level:c.level,dateFormatter:a.dateFormatter?a.dateFormatter:c.dateFormatter,argumentFormatter:a.argumentFormatter?a.argumentFormatter:c.argumentFormatter}:c}var CategoryProvider;(function(a){function c(_,k){return CATEGORY_PROVIDER_SERVICE.createLogProvider(_,k)}a.createProvider=c;function b(){CATEGORY_PROVIDER_SERVICE.clear()}a.clear=b})(CategoryProvider||(CategoryProvider={}));const typescriptLoggingCategory_esm=Object.freeze(Object.defineProperty({__proto__:null,CATEGORY_LOG_CONTROL,get CategoryProvider(){return CategoryProvider}},Symbol.toStringTag,{value:"Module"})),require$$1=getAugmentedNamespace(typescriptLoggingCategory_esm);Object.defineProperty(logger,"__esModule",{value:!0});logger.logger=void 0;const typescript_logging_1=require$$2$1,typescript_logging_category_style_1=require$$1;logger.logger=typescript_logging_category_style_1.CategoryProvider.createProvider("ApiStream",{allowSameCategoryName:!0,level:typescript_logging_1.LogLevel.Warn});var version$3="1.0.25",__createBinding$3=commonjsGlobal$1&&commonjsGlobal$1.__createBinding||(Object.create?function(a,c,b,_){_===void 0&&(_=b);var k=Object.getOwnPropertyDescriptor(c,b);(!k||("get"in k?!c.__esModule:k.writable||k.configurable))&&(k={enumerable:!0,get:function(){return c[b]}}),Object.defineProperty(a,_,k)}:function(a,c,b,_){_===void 0&&(_=b),a[_]=c[b]}),__setModuleDefault$3=commonjsGlobal$1&&commonjsGlobal$1.__setModuleDefault||(Object.create?function(a,c){Object.defineProperty(a,"default",{enumerable:!0,value:c})}:function(a,c){a.default=c}),__importStar$3=commonjsGlobal$1&&commonjsGlobal$1.__importStar||function(a){if(a&&a.__esModule)return a;var c={};if(a!=null)for(var b in a)b!=="default"&&Object.prototype.hasOwnProperty.call(a,b)&&__createBinding$3(c,a,b);return __setModuleDefault$3(c,a),c},__importDefault$d=commonjsGlobal$1&&commonjsGlobal$1.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(api$2,"__esModule",{value:!0});api$2.ApiClient=void 0;const NiceGrpc$1=__importStar$3(lib$1),abort_controller_x_1=require$$1$1,detect_node_1=__importDefault$d(browser$2),NodeTransport=__importStar$3(require$$0$1),logger_1=logger,clientVersion$1=version$3;class ApiClient{constructor(c,b,_,k,j,_e){this.sessionId=c,this.sdkVersion=_,this.version=clientVersion$1,this.apiLogCallback=j,this.eventLogCallback=_e,this.log=logger_1.logger.getCategory(k),this.channel=NiceGrpc$1.createChannel(b,detect_node_1.default?NodeTransport.NodeHttpTransport():void 0),this.clientFactory=NiceGrpc$1.createClientFactory().use(this.logMiddleware.bind(this))}async*logMiddleware(c,b){const{path:_}=c.method;try{const k=yield*c.next(c.request,b);if(this.log.debug(`-> ${_}: ok`),this.log.trace(`${JSON.stringify(c.request)} -> ${_}: ${JSON.stringify(k)}`),this.apiLogCallback){let j=_.split("/"),_e=j[1].split("."),et=_e[_e.length-1],nt=_e[_e.length-2],it=_e[_e.length-3],ft=j[2];this.apiLogCallback(it,et,ft,c.request,k)}return k}catch(k){throw this.log.trace(`${JSON.stringify(c.request)} -> ${_}`),k instanceof NiceGrpc$1.ClientError?this.log.warn(`-> ${_}: error: ${NiceGrpc$1.Status[k.code]}: ${k.details}`):(0,abort_controller_x_1.isAbortError)(k)?this.log.warn(`-> ${_}: cancel`):this.log.warn(`-> ${_}: error: ${k==null?void 0:k.stack}`),k}}setAccessToken(c){(this.accessToken==null||this.accessToken!=c)&&(this.log.debug("access token refreshed"),this.accessToken=c,this.setup())}makeGrpcMetadata(){let c=NiceGrpc$1.Metadata({Authorization:`Bearer ${this.accessToken}`,Version:this.version,SessionId:this.sessionId});return this.sdkVersion!=null&&c.set("SdkVersion",this.sdkVersion),c}setup(){let c={metadata:this.makeGrpcMetadata()};this._setup(c)}_setup(c){}}api$2.ApiClient=ApiClient;var decorator={};Object.defineProperty(decorator,"__esModule",{value:!0});decorator.RequiresSdkAuthentication=void 0;function RequiresSdkAuthentication(){return function(a,c){const b=Symbol(c);Object.defineProperty(a,c,{get:function(){if(!this[b])throw new Error("Please authenticate ApiStream by calling apiStream.load( accessToken )");return this[b]},set:function(_){this[b]=_}})}}decorator.RequiresSdkAuthentication=RequiresSdkAuthentication;var __createBinding$2=commonjsGlobal$1&&commonjsGlobal$1.__createBinding||(Object.create?function(a,c,b,_){_===void 0&&(_=b);var k=Object.getOwnPropertyDescriptor(c,b);(!k||("get"in k?!c.__esModule:k.writable||k.configurable))&&(k={enumerable:!0,get:function(){return c[b]}}),Object.defineProperty(a,_,k)}:function(a,c,b,_){_===void 0&&(_=b),a[_]=c[b]}),__setModuleDefault$2=commonjsGlobal$1&&commonjsGlobal$1.__setModuleDefault||(Object.create?function(a,c){Object.defineProperty(a,"default",{enumerable:!0,value:c})}:function(a,c){a.default=c}),__decorate=commonjsGlobal$1&&commonjsGlobal$1.__decorate||function(a,c,b,_){var k=arguments.length,j=k<3?c:_===null?_=Object.getOwnPropertyDescriptor(c,b):_,_e;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")j=Reflect.decorate(a,c,b,_);else for(var et=a.length-1;et>=0;et--)(_e=a[et])&&(j=(k<3?_e(j):k>3?_e(c,b,j):_e(c,b))||j);return k>3&&j&&Object.defineProperty(c,b,j),j},__importStar$2=commonjsGlobal$1&&commonjsGlobal$1.__importStar||function(a){if(a&&a.__esModule)return a;var c={};if(a!=null)for(var b in a)b!=="default"&&Object.prototype.hasOwnProperty.call(a,b)&&__createBinding$2(c,a,b);return __setModuleDefault$2(c,a),c},__metadata=commonjsGlobal$1&&commonjsGlobal$1.__metadata||function(a,c){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(a,c)};Object.defineProperty(layoutapi,"__esModule",{value:!0});layoutapi.LayoutApi=void 0;__importStar$2(lib$1);const LayoutApiModel=__importStar$2(dist$2),api_1$1=api$2,decorator_1=decorator,LOG_CATEGORY$1="LayoutApi";class LayoutApi extends api_1$1.ApiClient{constructor(c,b,_,k,j){super(c,_,k,LOG_CATEGORY$1,j),this.handlers={},this.eventApi=b,this.eventApi.on("event",{name:`${LayoutApi.LAYOUTAPI_EVENT_PREFIX}:*`,ignoreSessionEvents:!0},_e=>{var et;const[,nt]=_e.name.split(`${LayoutApi.LAYOUTAPI_EVENT_PREFIX}:`),[it,ft]=nt.split(":"),pt=_e.payload;for(const mt of(et=this.handlers[it])!==null&&et!==void 0?et:[])mt(Object.values(pt).find(St=>!!St),ft)})}_setup(c){this.layer=this.clientFactory.create(LayoutApiModel.LayerServiceDefinition,this.channel,{"*":c}),this.layout=this.clientFactory.create(LayoutApiModel.LayoutServiceDefinition,this.channel,{"*":c})}async subscribeToLayout(c){await Promise.all([this.eventApi.subscribe(`${LayoutApi.LAYOUTAPI_EVENT_PREFIX}:${LayoutApiModel.EventType.EVENT_TYPE_LAYER}:*`,{target:{layoutId:c}}),this.eventApi.subscribe(`${LayoutApi.LAYOUTAPI_EVENT_PREFIX}:${LayoutApiModel.EventType.EVENT_TYPE_LAYOUT}:*`,{target:{layoutId:c}})])}async unsubscribeFromLayout(c){await Promise.all([this.eventApi.unsubscribe(`${LayoutApi.LAYOUTAPI_EVENT_PREFIX}:${LayoutApiModel.EventType.EVENT_TYPE_LAYER}:*`,{target:{layoutId:c}}),this.eventApi.unsubscribe(`${LayoutApi.LAYOUTAPI_EVENT_PREFIX}:${LayoutApiModel.EventType.EVENT_TYPE_LAYOUT}:*`,{target:{layoutId:c}})])}async subscribeToLayoutsInProject(c,b){await Promise.all([this.eventApi.subscribe(`${LayoutApi.LAYOUTAPI_EVENT_PREFIX}:${LayoutApiModel.EventType.EVENT_TYPE_LAYER}:*`,{target:{collectionId:c,projectId:b}}),this.eventApi.subscribe(`${LayoutApi.LAYOUTAPI_EVENT_PREFIX}:${LayoutApiModel.EventType.EVENT_TYPE_LAYOUT}:*`,{target:{collectionId:c,projectId:b}})])}async unsubscribeFromLayoutsInProject(c,b){await Promise.all([this.eventApi.unsubscribe(`${LayoutApi.LAYOUTAPI_EVENT_PREFIX}:${LayoutApiModel.EventType.EVENT_TYPE_LAYER}:*`,{target:{collectionId:c,projectId:b}}),this.eventApi.unsubscribe(`${LayoutApi.LAYOUTAPI_EVENT_PREFIX}:${LayoutApiModel.EventType.EVENT_TYPE_LAYOUT}:*`,{target:{collectionId:c,projectId:b}})])}on(c,b){var _;this.handlers[c]=(_=this.handlers[c])!==null&&_!==void 0?_:[],this.handlers[c].push(b)}off(c,b){this.handlers[c]=this.handlers[c].filter(_=>_!==b)}}LayoutApi.LAYOUTAPI_EVENT_PREFIX="apistream:layout";__decorate([(0,decorator_1.RequiresSdkAuthentication)(),__metadata("design:type",Object)],LayoutApi.prototype,"layout",void 0);__decorate([(0,decorator_1.RequiresSdkAuthentication)(),__metadata("design:type",Object)],LayoutApi.prototype,"layer",void 0);layoutapi.LayoutApi=LayoutApi;var liveapi={},api$1={},httpbody={},any={},__importDefault$c=commonjsGlobal$1&&commonjsGlobal$1.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(any,"__esModule",{value:!0});any.Any=any.protobufPackage=void 0;const minimal_1$5=__importDefault$c(minimal);any.protobufPackage="google.protobuf";function createBaseAny(){return{typeUrl:"",value:new Uint8Array}}any.Any={encode(a,c=minimal_1$5.default.Writer.create()){return a.typeUrl!==""&&c.uint32(10).string(a.typeUrl),a.value.length!==0&&c.uint32(18).bytes(a.value),c},decode(a,c){const b=a instanceof minimal_1$5.default.Reader?a:new minimal_1$5.default.Reader(a);let _=c===void 0?b.len:b.pos+c;const k=createBaseAny();for(;b.pos<_;){const j=b.uint32();switch(j>>>3){case 1:k.typeUrl=b.string();break;case 2:k.value=b.bytes();break;default:b.skipType(j&7);break}}return k},fromJSON(a){return{typeUrl:isSet$4(a.typeUrl)?String(a.typeUrl):"",value:isSet$4(a.value)?bytesFromBase64$1(a.value):new Uint8Array}},toJSON(a){const c={};return a.typeUrl!==void 0&&(c.typeUrl=a.typeUrl),a.value!==void 0&&(c.value=base64FromBytes$1(a.value!==void 0?a.value:new Uint8Array)),c},fromPartial(a){var c,b;const _=createBaseAny();return _.typeUrl=(c=a.typeUrl)!==null&&c!==void 0?c:"",_.value=(b=a.value)!==null&&b!==void 0?b:new Uint8Array,_}};var globalThis$5=(()=>{if(typeof globalThis$5<"u")return globalThis$5;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof commonjsGlobal$1<"u")return commonjsGlobal$1;throw"Unable to locate global object"})();function bytesFromBase64$1(a){if(globalThis$5.Buffer)return Uint8Array.from(globalThis$5.Buffer.from(a,"base64"));{const c=globalThis$5.atob(a),b=new Uint8Array(c.length);for(let _=0;_<c.length;++_)b[_]=c.charCodeAt(_);return b}}function base64FromBytes$1(a){if(globalThis$5.Buffer)return globalThis$5.Buffer.from(a).toString("base64");{const c=[];return a.forEach(b=>{c.push(String.fromCharCode(b))}),globalThis$5.btoa(c.join(""))}}function isSet$4(a){return a!=null}var __importDefault$b=commonjsGlobal$1&&commonjsGlobal$1.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(httpbody,"__esModule",{value:!0});httpbody.HttpBody=httpbody.protobufPackage=void 0;const minimal_1$4=__importDefault$b(minimal),any_1=any;httpbody.protobufPackage="google.api";function createBaseHttpBody(){return{contentType:"",data:new Uint8Array,extensions:[]}}httpbody.HttpBody={encode(a,c=minimal_1$4.default.Writer.create()){a.contentType!==""&&c.uint32(10).string(a.contentType),a.data.length!==0&&c.uint32(18).bytes(a.data);for(const b of a.extensions)any_1.Any.encode(b,c.uint32(26).fork()).ldelim();return c},decode(a,c){const b=a instanceof minimal_1$4.default.Reader?a:new minimal_1$4.default.Reader(a);let _=c===void 0?b.len:b.pos+c;const k=createBaseHttpBody();for(;b.pos<_;){const j=b.uint32();switch(j>>>3){case 1:k.contentType=b.string();break;case 2:k.data=b.bytes();break;case 3:k.extensions.push(any_1.Any.decode(b,b.uint32()));break;default:b.skipType(j&7);break}}return k},fromJSON(a){return{contentType:isSet$3(a.contentType)?String(a.contentType):"",data:isSet$3(a.data)?bytesFromBase64(a.data):new Uint8Array,extensions:Array.isArray(a==null?void 0:a.extensions)?a.extensions.map(c=>any_1.Any.fromJSON(c)):[]}},toJSON(a){const c={};return a.contentType!==void 0&&(c.contentType=a.contentType),a.data!==void 0&&(c.data=base64FromBytes(a.data!==void 0?a.data:new Uint8Array)),a.extensions?c.extensions=a.extensions.map(b=>b?any_1.Any.toJSON(b):void 0):c.extensions=[],c},fromPartial(a){var c,b,_;const k=createBaseHttpBody();return k.contentType=(c=a.contentType)!==null&&c!==void 0?c:"",k.data=(b=a.data)!==null&&b!==void 0?b:new Uint8Array,k.extensions=((_=a.extensions)===null||_===void 0?void 0:_.map(j=>any_1.Any.fromPartial(j)))||[],k}};var globalThis$4=(()=>{if(typeof globalThis$4<"u")return globalThis$4;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof commonjsGlobal$1<"u")return commonjsGlobal$1;throw"Unable to locate global object"})();function bytesFromBase64(a){if(globalThis$4.Buffer)return Uint8Array.from(globalThis$4.Buffer.from(a,"base64"));{const c=globalThis$4.atob(a),b=new Uint8Array(c.length);for(let _=0;_<c.length;++_)b[_]=c.charCodeAt(_);return b}}function base64FromBytes(a){if(globalThis$4.Buffer)return globalThis$4.Buffer.from(a).toString("base64");{const c=[];return a.forEach(b=>{c.push(String.fromCharCode(b))}),globalThis$4.btoa(c.join(""))}}function isSet$3(a){return a!=null}var field_mask={},__importDefault$a=commonjsGlobal$1&&commonjsGlobal$1.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(field_mask,"__esModule",{value:!0});field_mask.FieldMask=field_mask.protobufPackage=void 0;const minimal_1$3=__importDefault$a(minimal);field_mask.protobufPackage="google.protobuf";function createBaseFieldMask(){return{paths:[]}}field_mask.FieldMask={encode(a,c=minimal_1$3.default.Writer.create()){for(const b of a.paths)c.uint32(10).string(b);return c},decode(a,c){const b=a instanceof minimal_1$3.default.Reader?a:new minimal_1$3.default.Reader(a);let _=c===void 0?b.len:b.pos+c;const k=createBaseFieldMask();for(;b.pos<_;){const j=b.uint32();switch(j>>>3){case 1:k.paths.push(b.string());break;default:b.skipType(j&7);break}}return k},fromJSON(a){return{paths:typeof a=="string"?a.split(",").filter(Boolean):Array.isArray(a==null?void 0:a.paths)?a.paths.map(String):[]}},toJSON(a){return a.paths.join(",")},fromPartial(a){var c;const b=createBaseFieldMask();return b.paths=((c=a.paths)===null||c===void 0?void 0:c.map(_=>_))||[],b},wrap(a){const c=createBaseFieldMask();return c.paths=a,c},unwrap(a){return a.paths}};var struct$1={};(function(a){var c=commonjsGlobal$1&&commonjsGlobal$1.__importDefault||function(yt){return yt&&yt.__esModule?yt:{default:yt}};Object.defineProperty(a,"__esModule",{value:!0}),a.ListValue=a.Value=a.Struct_FieldsEntry=a.Struct=a.nullValueToNumber=a.nullValueToJSON=a.nullValueFromJSON=a.NullValue=a.protobufPackage=void 0;const b=c(minimal);a.protobufPackage="google.protobuf";var _;(function(yt){yt.NULL_VALUE="NULL_VALUE"})(_=a.NullValue||(a.NullValue={}));function k(yt){switch(yt){case 0:case"NULL_VALUE":return _.NULL_VALUE;default:throw new pt.Error("Unrecognized enum value "+yt+" for enum NullValue")}}a.nullValueFromJSON=k;function j(yt){switch(yt){case _.NULL_VALUE:return"NULL_VALUE";default:throw new pt.Error("Unrecognized enum value "+yt+" for enum NullValue")}}a.nullValueToJSON=j;function _e(yt){switch(yt){case _.NULL_VALUE:return 0;default:throw new pt.Error("Unrecognized enum value "+yt+" for enum NullValue")}}a.nullValueToNumber=_e;function et(){return{fields:{}}}a.Struct={encode(yt,_t=b.default.Writer.create()){return Object.entries(yt.fields).forEach(([Tt,gt])=>{gt!==void 0&&a.Struct_FieldsEntry.encode({key:Tt,value:gt},_t.uint32(10).fork()).ldelim()}),_t},decode(yt,_t){const Tt=yt instanceof b.default.Reader?yt:new b.default.Reader(yt);let gt=_t===void 0?Tt.len:Tt.pos+_t;const ht=et();for(;Tt.pos<gt;){const Et=Tt.uint32();switch(Et>>>3){case 1:const At=a.Struct_FieldsEntry.decode(Tt,Tt.uint32());At.value!==void 0&&(ht.fields[At.key]=At.value);break;default:Tt.skipType(Et&7);break}}return ht},fromJSON(yt){return{fields:mt(yt.fields)?Object.entries(yt.fields).reduce((_t,[Tt,gt])=>(_t[Tt]=gt,_t),{}):{}}},toJSON(yt){const _t={};return _t.fields={},yt.fields&&Object.entries(yt.fields).forEach(([Tt,gt])=>{_t.fields[Tt]=gt}),_t},fromPartial(yt){var _t;const Tt=et();return Tt.fields=Object.entries((_t=yt.fields)!==null&&_t!==void 0?_t:{}).reduce((gt,[ht,Et])=>(Et!==void 0&&(gt[ht]=Et),gt),{}),Tt},wrap(yt){const _t=et();return yt!==void 0&&Object.keys(yt).forEach(Tt=>{_t.fields[Tt]=yt[Tt]}),_t},unwrap(yt){const _t={};return Object.keys(yt.fields).forEach(Tt=>{_t[Tt]=yt.fields[Tt]}),_t}};function nt(){return{key:"",value:void 0}}a.Struct_FieldsEntry={encode(yt,_t=b.default.Writer.create()){return yt.key!==""&&_t.uint32(10).string(yt.key),yt.value!==void 0&&a.Value.encode(a.Value.wrap(yt.value),_t.uint32(18).fork()).ldelim(),_t},decode(yt,_t){const Tt=yt instanceof b.default.Reader?yt:new b.default.Reader(yt);let gt=_t===void 0?Tt.len:Tt.pos+_t;const ht=nt();for(;Tt.pos<gt;){const Et=Tt.uint32();switch(Et>>>3){case 1:ht.key=Tt.string();break;case 2:ht.value=a.Value.unwrap(a.Value.decode(Tt,Tt.uint32()));break;default:Tt.skipType(Et&7);break}}return ht},fromJSON(yt){return{key:St(yt.key)?String(yt.key):"",value:St(yt==null?void 0:yt.value)?yt.value:void 0}},toJSON(yt){const _t={};return yt.key!==void 0&&(_t.key=yt.key),yt.value!==void 0&&(_t.value=yt.value),_t},fromPartial(yt){var _t,Tt;const gt=nt();return gt.key=(_t=yt.key)!==null&&_t!==void 0?_t:"",gt.value=(Tt=yt.value)!==null&&Tt!==void 0?Tt:void 0,gt}};function it(){return{nullValue:void 0,numberValue:void 0,stringValue:void 0,boolValue:void 0,structValue:void 0,listValue:void 0}}a.Value={encode(yt,_t=b.default.Writer.create()){return yt.nullValue!==void 0&&_t.uint32(8).int32(_e(yt.nullValue)),yt.numberValue!==void 0&&_t.uint32(17).double(yt.numberValue),yt.stringValue!==void 0&&_t.uint32(26).string(yt.stringValue),yt.boolValue!==void 0&&_t.uint32(32).bool(yt.boolValue),yt.structValue!==void 0&&a.Struct.encode(a.Struct.wrap(yt.structValue),_t.uint32(42).fork()).ldelim(),yt.listValue!==void 0&&a.ListValue.encode(a.ListValue.wrap(yt.listValue),_t.uint32(50).fork()).ldelim(),_t},decode(yt,_t){const Tt=yt instanceof b.default.Reader?yt:new b.default.Reader(yt);let gt=_t===void 0?Tt.len:Tt.pos+_t;const ht=it();for(;Tt.pos<gt;){const Et=Tt.uint32();switch(Et>>>3){case 1:ht.nullValue=k(Tt.int32());break;case 2:ht.numberValue=Tt.double();break;case 3:ht.stringValue=Tt.string();break;case 4:ht.boolValue=Tt.bool();break;case 5:ht.structValue=a.Struct.unwrap(a.Struct.decode(Tt,Tt.uint32()));break;case 6:ht.listValue=a.ListValue.unwrap(a.ListValue.decode(Tt,Tt.uint32()));break;default:Tt.skipType(Et&7);break}}return ht},fromJSON(yt){return{nullValue:St(yt.nullValue)?k(yt.nullValue):void 0,numberValue:St(yt.numberValue)?Number(yt.numberValue):void 0,stringValue:St(yt.stringValue)?String(yt.stringValue):void 0,boolValue:St(yt.boolValue)?!!yt.boolValue:void 0,structValue:mt(yt.structValue)?yt.structValue:void 0,listValue:Array.isArray(yt.listValue)?[...yt.listValue]:void 0}},toJSON(yt){const _t={};return yt.nullValue!==void 0&&(_t.nullValue=yt.nullValue!==void 0?j(yt.nullValue):void 0),yt.numberValue!==void 0&&(_t.numberValue=yt.numberValue),yt.stringValue!==void 0&&(_t.stringValue=yt.stringValue),yt.boolValue!==void 0&&(_t.boolValue=yt.boolValue),yt.structValue!==void 0&&(_t.structValue=yt.structValue),yt.listValue!==void 0&&(_t.listValue=yt.listValue),_t},fromPartial(yt){var _t,Tt,gt,ht,Et,At;const Bt=it();return Bt.nullValue=(_t=yt.nullValue)!==null&&_t!==void 0?_t:void 0,Bt.numberValue=(Tt=yt.numberValue)!==null&&Tt!==void 0?Tt:void 0,Bt.stringValue=(gt=yt.stringValue)!==null&&gt!==void 0?gt:void 0,Bt.boolValue=(ht=yt.boolValue)!==null&&ht!==void 0?ht:void 0,Bt.structValue=(Et=yt.structValue)!==null&&Et!==void 0?Et:void 0,Bt.listValue=(At=yt.listValue)!==null&&At!==void 0?At:void 0,Bt},wrap(yt){const _t=it();if(yt===null)_t.nullValue=_.NULL_VALUE;else if(typeof yt=="boolean")_t.boolValue=yt;else if(typeof yt=="number")_t.numberValue=yt;else if(typeof yt=="string")_t.stringValue=yt;else if(Array.isArray(yt))_t.listValue=yt;else if(typeof yt=="object")_t.structValue=yt;else if(typeof yt<"u")throw new Error("Unsupported any value type: "+typeof yt);return _t},unwrap(yt){if((yt==null?void 0:yt.stringValue)!==void 0)return yt.stringValue;if((yt==null?void 0:yt.numberValue)!==void 0)return yt.numberValue;if((yt==null?void 0:yt.boolValue)!==void 0)return yt.boolValue;if((yt==null?void 0:yt.structValue)!==void 0)return yt.structValue;if((yt==null?void 0:yt.listValue)!==void 0)return yt.listValue;if((yt==null?void 0:yt.nullValue)!==void 0)return null}};function ft(){return{values:[]}}a.ListValue={encode(yt,_t=b.default.Writer.create()){for(const Tt of yt.values)a.Value.encode(a.Value.wrap(Tt),_t.uint32(10).fork()).ldelim();return _t},decode(yt,_t){const Tt=yt instanceof b.default.Reader?yt:new b.default.Reader(yt);let gt=_t===void 0?Tt.len:Tt.pos+_t;const ht=ft();for(;Tt.pos<gt;){const Et=Tt.uint32();switch(Et>>>3){case 1:ht.values.push(a.Value.unwrap(a.Value.decode(Tt,Tt.uint32())));break;default:Tt.skipType(Et&7);break}}return ht},fromJSON(yt){return{values:Array.isArray(yt==null?void 0:yt.values)?[...yt.values]:[]}},toJSON(yt){const _t={};return yt.values?_t.values=yt.values.map(Tt=>Tt):_t.values=[],_t},fromPartial(yt){var _t;const Tt=ft();return Tt.values=((_t=yt.values)===null||_t===void 0?void 0:_t.map(gt=>gt))||[],Tt},wrap(yt){const _t=ft();return _t.values=yt??[],_t},unwrap(yt){return yt.values}};var pt=(()=>{if(typeof pt<"u")return pt;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof commonjsGlobal$1<"u")return commonjsGlobal$1;throw"Unable to locate global object"})();function mt(yt){return typeof yt=="object"&&yt!==null}function St(yt){return yt!=null}})(struct$1);var timestamp$2={},__importDefault$9=commonjsGlobal$1&&commonjsGlobal$1.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(timestamp$2,"__esModule",{value:!0});timestamp$2.Timestamp=timestamp$2.protobufPackage=void 0;const long_1$2=__importDefault$9(umdExports),minimal_1$2=__importDefault$9(minimal);timestamp$2.protobufPackage="google.protobuf";function createBaseTimestamp$1(){return{seconds:0,nanos:0}}timestamp$2.Timestamp={encode(a,c=minimal_1$2.default.Writer.create()){return a.seconds!==0&&c.uint32(8).int64(a.seconds),a.nanos!==0&&c.uint32(16).int32(a.nanos),c},decode(a,c){const b=a instanceof minimal_1$2.default.Reader?a:new minimal_1$2.default.Reader(a);let _=c===void 0?b.len:b.pos+c;const k=createBaseTimestamp$1();for(;b.pos<_;){const j=b.uint32();switch(j>>>3){case 1:k.seconds=longToNumber$2(b.int64());break;case 2:k.nanos=b.int32();break;default:b.skipType(j&7);break}}return k},fromJSON(a){return{seconds:isSet$2(a.seconds)?Number(a.seconds):0,nanos:isSet$2(a.nanos)?Number(a.nanos):0}},toJSON(a){const c={};return a.seconds!==void 0&&(c.seconds=Math.round(a.seconds)),a.nanos!==void 0&&(c.nanos=Math.round(a.nanos)),c},fromPartial(a){var c,b;const _=createBaseTimestamp$1();return _.seconds=(c=a.seconds)!==null&&c!==void 0?c:0,_.nanos=(b=a.nanos)!==null&&b!==void 0?b:0,_}};var globalThis$3=(()=>{if(typeof globalThis$3<"u")return globalThis$3;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof commonjsGlobal$1<"u")return commonjsGlobal$1;throw"Unable to locate global object"})();function longToNumber$2(a){if(a.gt(Number.MAX_SAFE_INTEGER))throw new globalThis$3.Error("Value is larger than Number.MAX_SAFE_INTEGER");return a.toNumber()}minimal_1$2.default.util.Long!==long_1$2.default&&(minimal_1$2.default.util.Long=long_1$2.default,minimal_1$2.default.configure());function isSet$2(a){return a!=null}(function(a){var c=commonjsGlobal$1&&commonjsGlobal$1.__importDefault||function($){return $&&$.__esModule?$:{default:$}};Object.defineProperty(a,"__esModule",{value:!0}),a.Role=a.regionToNumber=a.regionToJSON=a.regionFromJSON=a.Region=a.sourceTriggerActionToNumber=a.sourceTriggerActionToJSON=a.sourceTriggerActionFromJSON=a.SourceTriggerAction=a.s3ACLToNumber=a.s3ACLToJSON=a.s3ACLFromJSON=a.S3ACL=a.projectBroadcastPhaseToNumber=a.projectBroadcastPhaseToJSON=a.projectBroadcastPhaseFromJSON=a.ProjectBroadcastPhase=a.videoCodecRateControlModeToNumber=a.videoCodecRateControlModeToJSON=a.videoCodecRateControlModeFromJSON=a.VideoCodecRateControlMode=a.audioCodecToNumber=a.audioCodecToJSON=a.audioCodecFromJSON=a.AudioCodec=a.videoCodecProfileToNumber=a.videoCodecProfileToJSON=a.videoCodecProfileFromJSON=a.VideoCodecProfile=a.videoCodecToNumber=a.videoCodecToJSON=a.videoCodecFromJSON=a.VideoCodec=a.renderingQualityToNumber=a.renderingQualityToJSON=a.renderingQualityFromJSON=a.RenderingQuality=a.audioChannelLayoutToNumber=a.audioChannelLayoutToJSON=a.audioChannelLayoutFromJSON=a.AudioChannelLayout=a.videoColorSpaceToNumber=a.videoColorSpaceToJSON=a.videoColorSpaceFromJSON=a.VideoColorSpace=a.imageFormatToNumber=a.imageFormatToJSON=a.imageFormatFromJSON=a.ImageFormat=a.protobufPackage=void 0,a.ExternalComposition=a.SceneComposition=a.StudioSdkComposition=a.PreviewAddress=a.PreviewWebRtcAddress=a.PreviewHlsPullAddress=a.ProjectTrigger=a.WebRtcTrigger=a.SourceTrigger=a.DestinationAddress=a.S3StorageAddress=a.ObjectStoragePackaging=a.HlsPackaging=a.HlsLifecycle=a.HlsLifecycleVod=a.HlsLifecycleLive=a.DestinationAgoraPushAddress=a.DestinationSrtPushAddress=a.DestinationRtmpPushAddress=a.SourceAddress=a.SrtPullAddress=a.RtmpPullAddress=a.SrtPushAddress=a.SourceRtmpPushAddress=a.Encoding=a.AudioEncoding=a.VideoEncoding=a.VideoCodecRateControl=a.Rendering=a.AudioRendering=a.VideoRendering=a.eventTypeToNumber=a.eventTypeToJSON=a.eventTypeFromJSON=a.EventType=a.eventSubTypeToNumber=a.eventSubTypeToJSON=a.eventSubTypeFromJSON=a.EventSubType=a.connectStateToNumber=a.connectStateToJSON=a.connectStateFromJSON=a.ConnectState=a.projectBroadcastErrorToNumber=a.projectBroadcastErrorToJSON=a.projectBroadcastErrorFromJSON=a.ProjectBroadcastError=a.roleToNumber=a.roleToJSON=a.roleFromJSON=void 0,a.CreateSourceResponse=a.CreateSourceRequest=a.UpdateDestinationResponse=a.UpdateDestinationRequest=a.DeleteDestinationResponse=a.DeleteDestinationRequest=a.GetDestinationResponse=a.GetDestinationRequest=a.CreateDestinationResponse=a.CreateDestinationRequest=a.StopProjectWebRtcResponse=a.StopProjectWebRtcRequest=a.StartProjectWebRtcResponse=a.StartProjectWebRtcRequest=a.GetProjectBroadcastStatusResponse=a.GetProjectBroadcastStatusRequest=a.GetProjectBroadcastSnapshotResponse=a.GetProjectBroadcastSnapshotRequest=a.GetProjectResponse=a.GetProjectRequest=a.StopProjectBroadcastResponse=a.StopProjectBroadcastRequest=a.StartProjectBroadcastResponse=a.StartProjectBroadcastRequest=a.DeleteProjectResponse=a.DeleteProjectRequest=a.UpdateProjectResponse=a.UpdateProjectRequest=a.CreateProjectResponse=a.CreateProjectRequest=a.GetCollectionsResponse=a.GetCollectionsRequest=a.DeleteCollectionResponse=a.DeleteCollectionRequest=a.UpdateCollectionResponse=a.UpdateCollectionRequest=a.GetCollectionResponse=a.GetCollectionRequest=a.CreateCollectionResponse=a.CreateCollectionRequest=a.Collection=a.Project=a.Destination=a.Source=a.ProjectBroadcastStatus=a.LatLong=a.WebRtcAccess=a.WebRtc=a.HostedWebRtc=a.Composition=void 0,a.SourceAddEvent=a.SourceUpdateEvent=a.SourceDeleteEvent=a.SourceCreateEvent=a.CollectionUpdateEvent=a.CollectionDeleteEvent=a.CollectionCreateEvent=a.ProjectBroadcastStateEvent=a.ProjectUpdateEvent=a.ProjectDeleteEvent=a.ProjectCreateEvent=a.DestinationStateEvent=a.DestinationUpdateEvent=a.DestinationDeleteEvent=a.DestinationCreateEvent=a.GetTestTokenResponse=a.GetTestTokenRequest=a.GetJsonWebKeySetResponse=a.GetJsonWebKeySetRequest=a.JsonWebKey=a.GuestCodeRedirectResponse=a.GuestCodeRedirectRequest=a.GuestCode=a.RefreshAccessTokenResponse=a.RefreshAccessTokenRequest=a.CreateWebRtcAccessTokenResponse=a.CreateWebRtcAccessTokenRequest=a.CreateGuestAccessTokenResponse=a.CreateGuestAccessTokenRequest=a.GuestAccessToken=a.GuestAccessTokenExchange=a.GuestAccessTokenDirect=a.CreateAccessTokenResponse=a.CreateAccessTokenRequest=a.GetSourcePlaylistResponse=a.GetSourcePlaylistRequest=a.RemoveSourceFromProjectResponse=a.RemoveSourceFromProjectRequest=a.UpdateSourceResponse=a.UpdateSourceRequest=a.GetSourcesResponse=a.GetSourcesRequest=a.GetSourceResponse=a.GetSourceRequest=a.UpdateSourceInProjectResponse=a.UpdateSourceInProjectRequest=a.AddSourceToProjectResponse=a.AddSourceToProjectRequest=a.DeleteSourceResponse=a.DeleteSourceRequest=void 0,a.PublicAuthenticationServiceDefinition=a.PublicAuthenticationServiceClientImpl=a.AuthenticationServiceDefinition=a.AuthenticationServiceClientImpl=a.BackendAuthenticationServiceDefinition=a.BackendAuthenticationServiceClientImpl=a.SourceServiceDefinition=a.SourceServiceClientImpl=a.DestinationServiceDefinition=a.DestinationServiceClientImpl=a.ProjectServiceDefinition=a.ProjectServiceClientImpl=a.CollectionServiceDefinition=a.CollectionServiceClientImpl=a.LiveEvent=a.SourceEvent=a.ProjectEvent=a.DestinationEvent=a.CollectionEvent=a.SourceStateEvent=a.SourceRemoveEvent=void 0;const b=c(minimal),_=httpbody,k=field_mask,j=struct$1,_e=timestamp$2;a.protobufPackage="live.v21";var et;(function($){$.IMAGE_FORMAT_UNSPECIFIED="IMAGE_FORMAT_UNSPECIFIED",$.IMAGE_FORMAT_JPEG="IMAGE_FORMAT_JPEG"})(et=a.ImageFormat||(a.ImageFormat={}));function nt($){switch($){case 0:case"IMAGE_FORMAT_UNSPECIFIED":return et.IMAGE_FORMAT_UNSPECIFIED;case 1:case"IMAGE_FORMAT_JPEG":return et.IMAGE_FORMAT_JPEG;default:throw new An.Error("Unrecognized enum value "+$+" for enum ImageFormat")}}a.imageFormatFromJSON=nt;function it($){switch($){case et.IMAGE_FORMAT_UNSPECIFIED:return"IMAGE_FORMAT_UNSPECIFIED";case et.IMAGE_FORMAT_JPEG:return"IMAGE_FORMAT_JPEG";default:throw new An.Error("Unrecognized enum value "+$+" for enum ImageFormat")}}a.imageFormatToJSON=it;function ft($){switch($){case et.IMAGE_FORMAT_UNSPECIFIED:return 0;case et.IMAGE_FORMAT_JPEG:return 1;default:throw new An.Error("Unrecognized enum value "+$+" for enum ImageFormat")}}a.imageFormatToNumber=ft;var pt;(function($){$.VIDEO_COLOR_SPACE_UNSPECIFIED="VIDEO_COLOR_SPACE_UNSPECIFIED",$.VIDEO_COLOR_SPACE_YUV420="VIDEO_COLOR_SPACE_YUV420"})(pt=a.VideoColorSpace||(a.VideoColorSpace={}));function mt($){switch($){case 0:case"VIDEO_COLOR_SPACE_UNSPECIFIED":return pt.VIDEO_COLOR_SPACE_UNSPECIFIED;case 1:case"VIDEO_COLOR_SPACE_YUV420":return pt.VIDEO_COLOR_SPACE_YUV420;default:throw new An.Error("Unrecognized enum value "+$+" for enum VideoColorSpace")}}a.videoColorSpaceFromJSON=mt;function St($){switch($){case pt.VIDEO_COLOR_SPACE_UNSPECIFIED:return"VIDEO_COLOR_SPACE_UNSPECIFIED";case pt.VIDEO_COLOR_SPACE_YUV420:return"VIDEO_COLOR_SPACE_YUV420";default:throw new An.Error("Unrecognized enum value "+$+" for enum VideoColorSpace")}}a.videoColorSpaceToJSON=St;function yt($){switch($){case pt.VIDEO_COLOR_SPACE_UNSPECIFIED:return 0;case pt.VIDEO_COLOR_SPACE_YUV420:return 1;default:throw new An.Error("Unrecognized enum value "+$+" for enum VideoColorSpace")}}a.videoColorSpaceToNumber=yt;var _t;(function($){$.AUDIO_CHANNEL_LAYOUT_UNSPECIFIED="AUDIO_CHANNEL_LAYOUT_UNSPECIFIED",$.AUDIO_CHANNEL_LAYOUT_STEREO="AUDIO_CHANNEL_LAYOUT_STEREO"})(_t=a.AudioChannelLayout||(a.AudioChannelLayout={}));function Tt($){switch($){case 0:case"AUDIO_CHANNEL_LAYOUT_UNSPECIFIED":return _t.AUDIO_CHANNEL_LAYOUT_UNSPECIFIED;case 1:case"AUDIO_CHANNEL_LAYOUT_STEREO":return _t.AUDIO_CHANNEL_LAYOUT_STEREO;default:throw new An.Error("Unrecognized enum value "+$+" for enum AudioChannelLayout")}}a.audioChannelLayoutFromJSON=Tt;function gt($){switch($){case _t.AUDIO_CHANNEL_LAYOUT_UNSPECIFIED:return"AUDIO_CHANNEL_LAYOUT_UNSPECIFIED";case _t.AUDIO_CHANNEL_LAYOUT_STEREO:return"AUDIO_CHANNEL_LAYOUT_STEREO";default:throw new An.Error("Unrecognized enum value "+$+" for enum AudioChannelLayout")}}a.audioChannelLayoutToJSON=gt;function ht($){switch($){case _t.AUDIO_CHANNEL_LAYOUT_UNSPECIFIED:return 0;case _t.AUDIO_CHANNEL_LAYOUT_STEREO:return 1;default:throw new An.Error("Unrecognized enum value "+$+" for enum AudioChannelLayout")}}a.audioChannelLayoutToNumber=ht;var Et;(function($){$.RENDERING_QUALITY_UNSPECIFIED="RENDERING_QUALITY_UNSPECIFIED",$.RENDERING_QUALITY_STANDARD="RENDERING_QUALITY_STANDARD",$.RENDERING_QUALITY_HIGH="RENDERING_QUALITY_HIGH"})(Et=a.RenderingQuality||(a.RenderingQuality={}));function At($){switch($){case 0:case"RENDERING_QUALITY_UNSPECIFIED":return Et.RENDERING_QUALITY_UNSPECIFIED;case 1:case"RENDERING_QUALITY_STANDARD":return Et.RENDERING_QUALITY_STANDARD;case 2:case"RENDERING_QUALITY_HIGH":return Et.RENDERING_QUALITY_HIGH;default:throw new An.Error("Unrecognized enum value "+$+" for enum RenderingQuality")}}a.renderingQualityFromJSON=At;function Bt($){switch($){case Et.RENDERING_QUALITY_UNSPECIFIED:return"RENDERING_QUALITY_UNSPECIFIED";case Et.RENDERING_QUALITY_STANDARD:return"RENDERING_QUALITY_STANDARD";case Et.RENDERING_QUALITY_HIGH:return"RENDERING_QUALITY_HIGH";default:throw new An.Error("Unrecognized enum value "+$+" for enum RenderingQuality")}}a.renderingQualityToJSON=Bt;function qt($){switch($){case Et.RENDERING_QUALITY_UNSPECIFIED:return 0;case Et.RENDERING_QUALITY_STANDARD:return 1;case Et.RENDERING_QUALITY_HIGH:return 2;default:throw new An.Error("Unrecognized enum value "+$+" for enum RenderingQuality")}}a.renderingQualityToNumber=qt;var zt;(function($){$.VIDEO_CODEC_UNSPECIFIED="VIDEO_CODEC_UNSPECIFIED",$.VIDEO_CODEC_H264="VIDEO_CODEC_H264"})(zt=a.VideoCodec||(a.VideoCodec={}));function Ht($){switch($){case 0:case"VIDEO_CODEC_UNSPECIFIED":return zt.VIDEO_CODEC_UNSPECIFIED;case 1:case"VIDEO_CODEC_H264":return zt.VIDEO_CODEC_H264;default:throw new An.Error("Unrecognized enum value "+$+" for enum VideoCodec")}}a.videoCodecFromJSON=Ht;function ct($){switch($){case zt.VIDEO_CODEC_UNSPECIFIED:return"VIDEO_CODEC_UNSPECIFIED";case zt.VIDEO_CODEC_H264:return"VIDEO_CODEC_H264";default:throw new An.Error("Unrecognized enum value "+$+" for enum VideoCodec")}}a.videoCodecToJSON=ct;function dt($){switch($){case zt.VIDEO_CODEC_UNSPECIFIED:return 0;case zt.VIDEO_CODEC_H264:return 1;default:throw new An.Error("Unrecognized enum value "+$+" for enum VideoCodec")}}a.videoCodecToNumber=dt;var lt;(function($){$.VIDEO_CODEC_PROFILE_UNSPECIFIED="VIDEO_CODEC_PROFILE_UNSPECIFIED",$.VIDEO_CODEC_PROFILE_BASELINE="VIDEO_CODEC_PROFILE_BASELINE",$.VIDEO_CODEC_PROFILE_MAIN="VIDEO_CODEC_PROFILE_MAIN",$.VIDEO_CODEC_PROFILE_HIGH="VIDEO_CODEC_PROFILE_HIGH"})(lt=a.VideoCodecProfile||(a.VideoCodecProfile={}));function kt($){switch($){case 0:case"VIDEO_CODEC_PROFILE_UNSPECIFIED":return lt.VIDEO_CODEC_PROFILE_UNSPECIFIED;case 2:case"VIDEO_CODEC_PROFILE_BASELINE":return lt.VIDEO_CODEC_PROFILE_BASELINE;case 3:case"VIDEO_CODEC_PROFILE_MAIN":return lt.VIDEO_CODEC_PROFILE_MAIN;case 4:case"VIDEO_CODEC_PROFILE_HIGH":return lt.VIDEO_CODEC_PROFILE_HIGH;default:throw new An.Error("Unrecognized enum value "+$+" for enum VideoCodecProfile")}}a.videoCodecProfileFromJSON=kt;function Lt($){switch($){case lt.VIDEO_CODEC_PROFILE_UNSPECIFIED:return"VIDEO_CODEC_PROFILE_UNSPECIFIED";case lt.VIDEO_CODEC_PROFILE_BASELINE:return"VIDEO_CODEC_PROFILE_BASELINE";case lt.VIDEO_CODEC_PROFILE_MAIN:return"VIDEO_CODEC_PROFILE_MAIN";case lt.VIDEO_CODEC_PROFILE_HIGH:return"VIDEO_CODEC_PROFILE_HIGH";default:throw new An.Error("Unrecognized enum value "+$+" for enum VideoCodecProfile")}}a.videoCodecProfileToJSON=Lt;function Jt($){switch($){case lt.VIDEO_CODEC_PROFILE_UNSPECIFIED:return 0;case lt.VIDEO_CODEC_PROFILE_BASELINE:return 2;case lt.VIDEO_CODEC_PROFILE_MAIN:return 3;case lt.VIDEO_CODEC_PROFILE_HIGH:return 4;default:throw new An.Error("Unrecognized enum value "+$+" for enum VideoCodecProfile")}}a.videoCodecProfileToNumber=Jt;var en;(function($){$.AUDIO_CODEC_UNSPECIFIED="AUDIO_CODEC_UNSPECIFIED",$.AUDIO_CODEC_AAC="AUDIO_CODEC_AAC"})(en=a.AudioCodec||(a.AudioCodec={}));function Qt($){switch($){case 0:case"AUDIO_CODEC_UNSPECIFIED":return en.AUDIO_CODEC_UNSPECIFIED;case 1:case"AUDIO_CODEC_AAC":return en.AUDIO_CODEC_AAC;default:throw new An.Error("Unrecognized enum value "+$+" for enum AudioCodec")}}a.audioCodecFromJSON=Qt;function xt($){switch($){case en.AUDIO_CODEC_UNSPECIFIED:return"AUDIO_CODEC_UNSPECIFIED";case en.AUDIO_CODEC_AAC:return"AUDIO_CODEC_AAC";default:throw new An.Error("Unrecognized enum value "+$+" for enum AudioCodec")}}a.audioCodecToJSON=xt;function rn($){switch($){case en.AUDIO_CODEC_UNSPECIFIED:return 0;case en.AUDIO_CODEC_AAC:return 1;default:throw new An.Error("Unrecognized enum value "+$+" for enum AudioCodec")}}a.audioCodecToNumber=rn;var Sn;(function($){$.VIDEO_CODEC_RATE_CONTROL_MODE_UNSPECIFIED="VIDEO_CODEC_RATE_CONTROL_MODE_UNSPECIFIED",$.VIDEO_CODEC_RATE_CONTROL_MODE_CBR="VIDEO_CODEC_RATE_CONTROL_MODE_CBR"})(Sn=a.VideoCodecRateControlMode||(a.VideoCodecRateControlMode={}));function bn($){switch($){case 0:case"VIDEO_CODEC_RATE_CONTROL_MODE_UNSPECIFIED":return Sn.VIDEO_CODEC_RATE_CONTROL_MODE_UNSPECIFIED;case 1:case"VIDEO_CODEC_RATE_CONTROL_MODE_CBR":return Sn.VIDEO_CODEC_RATE_CONTROL_MODE_CBR;default:throw new An.Error("Unrecognized enum value "+$+" for enum VideoCodecRateControlMode")}}a.videoCodecRateControlModeFromJSON=bn;function kn($){switch($){case Sn.VIDEO_CODEC_RATE_CONTROL_MODE_UNSPECIFIED:return"VIDEO_CODEC_RATE_CONTROL_MODE_UNSPECIFIED";case Sn.VIDEO_CODEC_RATE_CONTROL_MODE_CBR:return"VIDEO_CODEC_RATE_CONTROL_MODE_CBR";default:throw new An.Error("Unrecognized enum value "+$+" for enum VideoCodecRateControlMode")}}a.videoCodecRateControlModeToJSON=kn;function _n($){switch($){case Sn.VIDEO_CODEC_RATE_CONTROL_MODE_UNSPECIFIED:return 0;case Sn.VIDEO_CODEC_RATE_CONTROL_MODE_CBR:return 1;default:throw new An.Error("Unrecognized enum value "+$+" for enum VideoCodecRateControlMode")}}a.videoCodecRateControlModeToNumber=_n;var tn;(function($){$.PROJECT_BROADCAST_PHASE_UNSPECIFIED="PROJECT_BROADCAST_PHASE_UNSPECIFIED",$.PROJECT_BROADCAST_PHASE_NOT_RUNNING="PROJECT_BROADCAST_PHASE_NOT_RUNNING",$.PROJECT_BROADCAST_PHASE_WAITING="PROJECT_BROADCAST_PHASE_WAITING",$.PROJECT_BROADCAST_PHASE_STARTING="PROJECT_BROADCAST_PHASE_STARTING",$.PROJECT_BROADCAST_PHASE_RUNNING="PROJECT_BROADCAST_PHASE_RUNNING",$.PROJECT_BROADCAST_PHASE_STOPPING="PROJECT_BROADCAST_PHASE_STOPPING",$.PROJECT_BROADCAST_PHASE_STOPPED="PROJECT_BROADCAST_PHASE_STOPPED",$.PROJECT_BROADCAST_PHASE_ARCHIVED="PROJECT_BROADCAST_PHASE_ARCHIVED"})(tn=a.ProjectBroadcastPhase||(a.ProjectBroadcastPhase={}));function pn($){switch($){case 0:case"PROJECT_BROADCAST_PHASE_UNSPECIFIED":return tn.PROJECT_BROADCAST_PHASE_UNSPECIFIED;case 1:case"PROJECT_BROADCAST_PHASE_NOT_RUNNING":return tn.PROJECT_BROADCAST_PHASE_NOT_RUNNING;case 2:case"PROJECT_BROADCAST_PHASE_WAITING":return tn.PROJECT_BROADCAST_PHASE_WAITING;case 3:case"PROJECT_BROADCAST_PHASE_STARTING":return tn.PROJECT_BROADCAST_PHASE_STARTING;case 4:case"PROJECT_BROADCAST_PHASE_RUNNING":return tn.PROJECT_BROADCAST_PHASE_RUNNING;case 5:case"PROJECT_BROADCAST_PHASE_STOPPING":return tn.PROJECT_BROADCAST_PHASE_STOPPING;case 6:case"PROJECT_BROADCAST_PHASE_STOPPED":return tn.PROJECT_BROADCAST_PHASE_STOPPED;case 7:case"PROJECT_BROADCAST_PHASE_ARCHIVED":return tn.PROJECT_BROADCAST_PHASE_ARCHIVED;default:throw new An.Error("Unrecognized enum value "+$+" for enum ProjectBroadcastPhase")}}a.projectBroadcastPhaseFromJSON=pn;function yn($){switch($){case tn.PROJECT_BROADCAST_PHASE_UNSPECIFIED:return"PROJECT_BROADCAST_PHASE_UNSPECIFIED";case tn.PROJECT_BROADCAST_PHASE_NOT_RUNNING:return"PROJECT_BROADCAST_PHASE_NOT_RUNNING";case tn.PROJECT_BROADCAST_PHASE_WAITING:return"PROJECT_BROADCAST_PHASE_WAITING";case tn.PROJECT_BROADCAST_PHASE_STARTING:return"PROJECT_BROADCAST_PHASE_STARTING";case tn.PROJECT_BROADCAST_PHASE_RUNNING:return"PROJECT_BROADCAST_PHASE_RUNNING";case tn.PROJECT_BROADCAST_PHASE_STOPPING:return"PROJECT_BROADCAST_PHASE_STOPPING";case tn.PROJECT_BROADCAST_PHASE_STOPPED:return"PROJECT_BROADCAST_PHASE_STOPPED";case tn.PROJECT_BROADCAST_PHASE_ARCHIVED:return"PROJECT_BROADCAST_PHASE_ARCHIVED";default:throw new An.Error("Unrecognized enum value "+$+" for enum ProjectBroadcastPhase")}}a.projectBroadcastPhaseToJSON=yn;function In($){switch($){case tn.PROJECT_BROADCAST_PHASE_UNSPECIFIED:return 0;case tn.PROJECT_BROADCAST_PHASE_NOT_RUNNING:return 1;case tn.PROJECT_BROADCAST_PHASE_WAITING:return 2;case tn.PROJECT_BROADCAST_PHASE_STARTING:return 3;case tn.PROJECT_BROADCAST_PHASE_RUNNING:return 4;case tn.PROJECT_BROADCAST_PHASE_STOPPING:return 5;case tn.PROJECT_BROADCAST_PHASE_STOPPED:return 6;case tn.PROJECT_BROADCAST_PHASE_ARCHIVED:return 7;default:throw new An.Error("Unrecognized enum value "+$+" for enum ProjectBroadcastPhase")}}a.projectBroadcastPhaseToNumber=In;var sn;(function($){$.S3ACL_UNSPECIFIED="S3ACL_UNSPECIFIED",$.S3ACL_PRIVATE="S3ACL_PRIVATE",$.S3ACL_PUBLIC_READ="S3ACL_PUBLIC_READ",$.S3ACL_PUBLIC_READ_WRITE="S3ACL_PUBLIC_READ_WRITE",$.S3ACL_AUTHENTICATED_READ="S3ACL_AUTHENTICATED_READ",$.S3ACL_BUCKET_OWNER_READ="S3ACL_BUCKET_OWNER_READ",$.S3ACL_BUCKET_OWNER_FULL_CONTROL="S3ACL_BUCKET_OWNER_FULL_CONTROL"})(sn=a.S3ACL||(a.S3ACL={}));function vn($){switch($){case 0:case"S3ACL_UNSPECIFIED":return sn.S3ACL_UNSPECIFIED;case 1:case"S3ACL_PRIVATE":return sn.S3ACL_PRIVATE;case 2:case"S3ACL_PUBLIC_READ":return sn.S3ACL_PUBLIC_READ;case 3:case"S3ACL_PUBLIC_READ_WRITE":return sn.S3ACL_PUBLIC_READ_WRITE;case 4:case"S3ACL_AUTHENTICATED_READ":return sn.S3ACL_AUTHENTICATED_READ;case 5:case"S3ACL_BUCKET_OWNER_READ":return sn.S3ACL_BUCKET_OWNER_READ;case 6:case"S3ACL_BUCKET_OWNER_FULL_CONTROL":return sn.S3ACL_BUCKET_OWNER_FULL_CONTROL;default:throw new An.Error("Unrecognized enum value "+$+" for enum S3ACL")}}a.s3ACLFromJSON=vn;function Cn($){switch($){case sn.S3ACL_UNSPECIFIED:return"S3ACL_UNSPECIFIED";case sn.S3ACL_PRIVATE:return"S3ACL_PRIVATE";case sn.S3ACL_PUBLIC_READ:return"S3ACL_PUBLIC_READ";case sn.S3ACL_PUBLIC_READ_WRITE:return"S3ACL_PUBLIC_READ_WRITE";case sn.S3ACL_AUTHENTICATED_READ:return"S3ACL_AUTHENTICATED_READ";case sn.S3ACL_BUCKET_OWNER_READ:return"S3ACL_BUCKET_OWNER_READ";case sn.S3ACL_BUCKET_OWNER_FULL_CONTROL:return"S3ACL_BUCKET_OWNER_FULL_CONTROL";default:throw new An.Error("Unrecognized enum value "+$+" for enum S3ACL")}}a.s3ACLToJSON=Cn;function Nn($){switch($){case sn.S3ACL_UNSPECIFIED:return 0;case sn.S3ACL_PRIVATE:return 1;case sn.S3ACL_PUBLIC_READ:return 2;case sn.S3ACL_PUBLIC_READ_WRITE:return 3;case sn.S3ACL_AUTHENTICATED_READ:return 4;case sn.S3ACL_BUCKET_OWNER_READ:return 5;case sn.S3ACL_BUCKET_OWNER_FULL_CONTROL:return 6;default:throw new An.Error("Unrecognized enum value "+$+" for enum S3ACL")}}a.s3ACLToNumber=Nn;var fn;(function($){$.SOURCE_TRIGGER_ACTION_UNSPECIFIED="SOURCE_TRIGGER_ACTION_UNSPECIFIED",$.SOURCE_TRIGGER_ACTION_IGNORE="SOURCE_TRIGGER_ACTION_IGNORE",$.SOURCE_TRIGGER_ACTION_OR="SOURCE_TRIGGER_ACTION_OR"})(fn=a.SourceTriggerAction||(a.SourceTriggerAction={}));function ut($){switch($){case 0:case"SOURCE_TRIGGER_ACTION_UNSPECIFIED":return fn.SOURCE_TRIGGER_ACTION_UNSPECIFIED;case 1:case"SOURCE_TRIGGER_ACTION_IGNORE":return fn.SOURCE_TRIGGER_ACTION_IGNORE;case 3:case"SOURCE_TRIGGER_ACTION_OR":return fn.SOURCE_TRIGGER_ACTION_OR;default:throw new An.Error("Unrecognized enum value "+$+" for enum SourceTriggerAction")}}a.sourceTriggerActionFromJSON=ut;function It($){switch($){case fn.SOURCE_TRIGGER_ACTION_UNSPECIFIED:return"SOURCE_TRIGGER_ACTION_UNSPECIFIED";case fn.SOURCE_TRIGGER_ACTION_IGNORE:return"SOURCE_TRIGGER_ACTION_IGNORE";case fn.SOURCE_TRIGGER_ACTION_OR:return"SOURCE_TRIGGER_ACTION_OR";default:throw new An.Error("Unrecognized enum value "+$+" for enum SourceTriggerAction")}}a.sourceTriggerActionToJSON=It;function Pt($){switch($){case fn.SOURCE_TRIGGER_ACTION_UNSPECIFIED:return 0;case fn.SOURCE_TRIGGER_ACTION_IGNORE:return 1;case fn.SOURCE_TRIGGER_ACTION_OR:return 3;default:throw new An.Error("Unrecognized enum value "+$+" for enum SourceTriggerAction")}}a.sourceTriggerActionToNumber=Pt;var Zt;(function($){$.REGION_UNSPECIFIED="REGION_UNSPECIFIED",$.REGION_US_EAST_1="REGION_US_EAST_1",$.REGION_US_EAST_2="REGION_US_EAST_2",$.REGION_US_WEST_1="REGION_US_WEST_1",$.REGION_US_WEST_2="REGION_US_WEST_2",$.REGION_US_CENTRAL_1="REGION_US_CENTRAL_1",$.REGION_AP_SOUTHEAST_1="REGION_AP_SOUTHEAST_1",$.REGION_AP_SOUTHEAST_2="REGION_AP_SOUTHEAST_2",$.REGION_AP_SOUTH_1="REGION_AP_SOUTH_1",$.REGION_CA_EAST_1="REGION_CA_EAST_1",$.REGION_EU_CENTRAL_1="REGION_EU_CENTRAL_1",$.REGION_EU_WEST_1="REGION_EU_WEST_1"})(Zt=a.Region||(a.Region={}));function Dt($){switch($){case 0:case"REGION_UNSPECIFIED":return Zt.REGION_UNSPECIFIED;case 1:case"REGION_US_EAST_1":return Zt.REGION_US_EAST_1;case 2:case"REGION_US_EAST_2":return Zt.REGION_US_EAST_2;case 3:case"REGION_US_WEST_1":return Zt.REGION_US_WEST_1;case 4:case"REGION_US_WEST_2":return Zt.REGION_US_WEST_2;case 5:case"REGION_US_CENTRAL_1":return Zt.REGION_US_CENTRAL_1;case 10:case"REGION_AP_SOUTHEAST_1":return Zt.REGION_AP_SOUTHEAST_1;case 11:case"REGION_AP_SOUTHEAST_2":return Zt.REGION_AP_SOUTHEAST_2;case 15:case"REGION_AP_SOUTH_1":return Zt.REGION_AP_SOUTH_1;case 20:case"REGION_CA_EAST_1":return Zt.REGION_CA_EAST_1;case 30:case"REGION_EU_CENTRAL_1":return Zt.REGION_EU_CENTRAL_1;case 31:case"REGION_EU_WEST_1":return Zt.REGION_EU_WEST_1;default:throw new An.Error("Unrecognized enum value "+$+" for enum Region")}}a.regionFromJSON=Dt;function Ot($){switch($){case Zt.REGION_UNSPECIFIED:return"REGION_UNSPECIFIED";case Zt.REGION_US_EAST_1:return"REGION_US_EAST_1";case Zt.REGION_US_EAST_2:return"REGION_US_EAST_2";case Zt.REGION_US_WEST_1:return"REGION_US_WEST_1";case Zt.REGION_US_WEST_2:return"REGION_US_WEST_2";case Zt.REGION_US_CENTRAL_1:return"REGION_US_CENTRAL_1";case Zt.REGION_AP_SOUTHEAST_1:return"REGION_AP_SOUTHEAST_1";case Zt.REGION_AP_SOUTHEAST_2:return"REGION_AP_SOUTHEAST_2";case Zt.REGION_AP_SOUTH_1:return"REGION_AP_SOUTH_1";case Zt.REGION_CA_EAST_1:return"REGION_CA_EAST_1";case Zt.REGION_EU_CENTRAL_1:return"REGION_EU_CENTRAL_1";case Zt.REGION_EU_WEST_1:return"REGION_EU_WEST_1";default:throw new An.Error("Unrecognized enum value "+$+" for enum Region")}}a.regionToJSON=Ot;function $t($){switch($){case Zt.REGION_UNSPECIFIED:return 0;case Zt.REGION_US_EAST_1:return 1;case Zt.REGION_US_EAST_2:return 2;case Zt.REGION_US_WEST_1:return 3;case Zt.REGION_US_WEST_2:return 4;case Zt.REGION_US_CENTRAL_1:return 5;case Zt.REGION_AP_SOUTHEAST_1:return 10;case Zt.REGION_AP_SOUTHEAST_2:return 11;case Zt.REGION_AP_SOUTH_1:return 15;case Zt.REGION_CA_EAST_1:return 20;case Zt.REGION_EU_CENTRAL_1:return 30;case Zt.REGION_EU_WEST_1:return 31;default:throw new An.Error("Unrecognized enum value "+$+" for enum Region")}}a.regionToNumber=$t;var Gt;(function($){$.ROLE_UNSPECIFIED="ROLE_UNSPECIFIED",$.ROLE_HOST="ROLE_HOST",$.ROLE_COHOST="ROLE_COHOST",$.ROLE_CONTRIBUTOR="ROLE_CONTRIBUTOR",$.ROLE_GUEST="ROLE_GUEST",$.ROLE_VIEWER="ROLE_VIEWER",$.ROLE_RENDERER="ROLE_RENDERER",$.ROLE_PLATFORM="ROLE_PLATFORM",$.ROLE_IMPERSONATE="ROLE_IMPERSONATE"})(Gt=a.Role||(a.Role={}));function nn($){switch($){case 0:case"ROLE_UNSPECIFIED":return Gt.ROLE_UNSPECIFIED;case 1:case"ROLE_HOST":return Gt.ROLE_HOST;case 2:case"ROLE_COHOST":return Gt.ROLE_COHOST;case 3:case"ROLE_CONTRIBUTOR":return Gt.ROLE_CONTRIBUTOR;case 4:case"ROLE_GUEST":return Gt.ROLE_GUEST;case 5:case"ROLE_VIEWER":return Gt.ROLE_VIEWER;case 6:case"ROLE_RENDERER":return Gt.ROLE_RENDERER;case 7:case"ROLE_PLATFORM":return Gt.ROLE_PLATFORM;case 8:case"ROLE_IMPERSONATE":return Gt.ROLE_IMPERSONATE;default:throw new An.Error("Unrecognized enum value "+$+" for enum Role")}}a.roleFromJSON=nn;function gn($){switch($){case Gt.ROLE_UNSPECIFIED:return"ROLE_UNSPECIFIED";case Gt.ROLE_HOST:return"ROLE_HOST";case Gt.ROLE_COHOST:return"ROLE_COHOST";case Gt.ROLE_CONTRIBUTOR:return"ROLE_CONTRIBUTOR";case Gt.ROLE_GUEST:return"ROLE_GUEST";case Gt.ROLE_VIEWER:return"ROLE_VIEWER";case Gt.ROLE_RENDERER:return"ROLE_RENDERER";case Gt.ROLE_PLATFORM:return"ROLE_PLATFORM";case Gt.ROLE_IMPERSONATE:return"ROLE_IMPERSONATE";default:throw new An.Error("Unrecognized enum value "+$+" for enum Role")}}a.roleToJSON=gn;function Xt($){switch($){case Gt.ROLE_UNSPECIFIED:return 0;case Gt.ROLE_HOST:return 1;case Gt.ROLE_COHOST:return 2;case Gt.ROLE_CONTRIBUTOR:return 3;case Gt.ROLE_GUEST:return 4;case Gt.ROLE_VIEWER:return 5;case Gt.ROLE_RENDERER:return 6;case Gt.ROLE_PLATFORM:return 7;case Gt.ROLE_IMPERSONATE:return 8;default:throw new An.Error("Unrecognized enum value "+$+" for enum Role")}}a.roleToNumber=Xt;var at;(function($){$.PROJECT_BROADCAST_ERROR_UNSPECIFIED="PROJECT_BROADCAST_ERROR_UNSPECIFIED",$.PROJECT_BROADCAST_ERROR_INTERNAL="PROJECT_BROADCAST_ERROR_INTERNAL",$.PROJECT_BROADCAST_ERROR_DURATION_EXCEEDED="PROJECT_BROADCAST_ERROR_DURATION_EXCEEDED"})(at=a.ProjectBroadcastError||(a.ProjectBroadcastError={}));function Rt($){switch($){case 0:case"PROJECT_BROADCAST_ERROR_UNSPECIFIED":return at.PROJECT_BROADCAST_ERROR_UNSPECIFIED;case 1:case"PROJECT_BROADCAST_ERROR_INTERNAL":return at.PROJECT_BROADCAST_ERROR_INTERNAL;case 2:case"PROJECT_BROADCAST_ERROR_DURATION_EXCEEDED":return at.PROJECT_BROADCAST_ERROR_DURATION_EXCEEDED;default:throw new An.Error("Unrecognized enum value "+$+" for enum ProjectBroadcastError")}}a.projectBroadcastErrorFromJSON=Rt;function Ut($){switch($){case at.PROJECT_BROADCAST_ERROR_UNSPECIFIED:return"PROJECT_BROADCAST_ERROR_UNSPECIFIED";case at.PROJECT_BROADCAST_ERROR_INTERNAL:return"PROJECT_BROADCAST_ERROR_INTERNAL";case at.PROJECT_BROADCAST_ERROR_DURATION_EXCEEDED:return"PROJECT_BROADCAST_ERROR_DURATION_EXCEEDED";default:throw new An.Error("Unrecognized enum value "+$+" for enum ProjectBroadcastError")}}a.projectBroadcastErrorToJSON=Ut;function un($){switch($){case at.PROJECT_BROADCAST_ERROR_UNSPECIFIED:return 0;case at.PROJECT_BROADCAST_ERROR_INTERNAL:return 1;case at.PROJECT_BROADCAST_ERROR_DURATION_EXCEEDED:return 2;default:throw new An.Error("Unrecognized enum value "+$+" for enum ProjectBroadcastError")}}a.projectBroadcastErrorToNumber=un;var Vt;(function($){$.CONNECT_STATE_UNSPECIFIED="CONNECT_STATE_UNSPECIFIED",$.CONNECT_STATE_CONNECTED="CONNECT_STATE_CONNECTED",$.CONNECT_STATE_DISCONNECTED="CONNECT_STATE_DISCONNECTED"})(Vt=a.ConnectState||(a.ConnectState={}));function st($){switch($){case 0:case"CONNECT_STATE_UNSPECIFIED":return Vt.CONNECT_STATE_UNSPECIFIED;case 1:case"CONNECT_STATE_CONNECTED":return Vt.CONNECT_STATE_CONNECTED;case 2:case"CONNECT_STATE_DISCONNECTED":return Vt.CONNECT_STATE_DISCONNECTED;default:throw new An.Error("Unrecognized enum value "+$+" for enum ConnectState")}}a.connectStateFromJSON=st;function wt($){switch($){case Vt.CONNECT_STATE_UNSPECIFIED:return"CONNECT_STATE_UNSPECIFIED";case Vt.CONNECT_STATE_CONNECTED:return"CONNECT_STATE_CONNECTED";case Vt.CONNECT_STATE_DISCONNECTED:return"CONNECT_STATE_DISCONNECTED";default:throw new An.Error("Unrecognized enum value "+$+" for enum ConnectState")}}a.connectStateToJSON=wt;function Ft($){switch($){case Vt.CONNECT_STATE_UNSPECIFIED:return 0;case Vt.CONNECT_STATE_CONNECTED:return 1;case Vt.CONNECT_STATE_DISCONNECTED:return 2;default:throw new An.Error("Unrecognized enum value "+$+" for enum ConnectState")}}a.connectStateToNumber=Ft;var ln;(function($){$.EVENT_SUB_TYPE_UNSPECIFIED="EVENT_SUB_TYPE_UNSPECIFIED",$.EVENT_SUB_TYPE_CREATE="EVENT_SUB_TYPE_CREATE",$.EVENT_SUB_TYPE_UPDATE="EVENT_SUB_TYPE_UPDATE",$.EVENT_SUB_TYPE_DELETE="EVENT_SUB_TYPE_DELETE",$.EVENT_SUB_TYPE_ADD="EVENT_SUB_TYPE_ADD",$.EVENT_SUB_TYPE_REMOVE="EVENT_SUB_TYPE_REMOVE",$.EVENT_SUB_TYPE_STATE="EVENT_SUB_TYPE_STATE"})(ln=a.EventSubType||(a.EventSubType={}));function jt($){switch($){case 0:case"EVENT_SUB_TYPE_UNSPECIFIED":return ln.EVENT_SUB_TYPE_UNSPECIFIED;case 1:case"EVENT_SUB_TYPE_CREATE":return ln.EVENT_SUB_TYPE_CREATE;case 2:case"EVENT_SUB_TYPE_UPDATE":return ln.EVENT_SUB_TYPE_UPDATE;case 3:case"EVENT_SUB_TYPE_DELETE":return ln.EVENT_SUB_TYPE_DELETE;case 4:case"EVENT_SUB_TYPE_ADD":return ln.EVENT_SUB_TYPE_ADD;case 5:case"EVENT_SUB_TYPE_REMOVE":return ln.EVENT_SUB_TYPE_REMOVE;case 6:case"EVENT_SUB_TYPE_STATE":return ln.EVENT_SUB_TYPE_STATE;default:throw new An.Error("Unrecognized enum value "+$+" for enum EventSubType")}}a.eventSubTypeFromJSON=jt;function En($){switch($){case ln.EVENT_SUB_TYPE_UNSPECIFIED:return"EVENT_SUB_TYPE_UNSPECIFIED";case ln.EVENT_SUB_TYPE_CREATE:return"EVENT_SUB_TYPE_CREATE";case ln.EVENT_SUB_TYPE_UPDATE:return"EVENT_SUB_TYPE_UPDATE";case ln.EVENT_SUB_TYPE_DELETE:return"EVENT_SUB_TYPE_DELETE";case ln.EVENT_SUB_TYPE_ADD:return"EVENT_SUB_TYPE_ADD";case ln.EVENT_SUB_TYPE_REMOVE:return"EVENT_SUB_TYPE_REMOVE";case ln.EVENT_SUB_TYPE_STATE:return"EVENT_SUB_TYPE_STATE";default:throw new An.Error("Unrecognized enum value "+$+" for enum EventSubType")}}a.eventSubTypeToJSON=En;function Dn($){switch($){case ln.EVENT_SUB_TYPE_UNSPECIFIED:return 0;case ln.EVENT_SUB_TYPE_CREATE:return 1;case ln.EVENT_SUB_TYPE_UPDATE:return 2;case ln.EVENT_SUB_TYPE_DELETE:return 3;case ln.EVENT_SUB_TYPE_ADD:return 4;case ln.EVENT_SUB_TYPE_REMOVE:return 5;case ln.EVENT_SUB_TYPE_STATE:return 6;default:throw new An.Error("Unrecognized enum value "+$+" for enum EventSubType")}}a.eventSubTypeToNumber=Dn;var Ln;(function($){$.EVENT_TYPE_UNSPECIFIED="EVENT_TYPE_UNSPECIFIED",$.EVENT_TYPE_COLLECTION="EVENT_TYPE_COLLECTION",$.EVENT_TYPE_PROJECT="EVENT_TYPE_PROJECT",$.EVENT_TYPE_SOURCE="EVENT_TYPE_SOURCE",$.EVENT_TYPE_DESTINATION="EVENT_TYPE_DESTINATION"})(Ln=a.EventType||(a.EventType={}));function Jn($){switch($){case 0:case"EVENT_TYPE_UNSPECIFIED":return Ln.EVENT_TYPE_UNSPECIFIED;case 1:case"EVENT_TYPE_COLLECTION":return Ln.EVENT_TYPE_COLLECTION;case 2:case"EVENT_TYPE_PROJECT":return Ln.EVENT_TYPE_PROJECT;case 4:case"EVENT_TYPE_SOURCE":return Ln.EVENT_TYPE_SOURCE;case 5:case"EVENT_TYPE_DESTINATION":return Ln.EVENT_TYPE_DESTINATION;default:throw new An.Error("Unrecognized enum value "+$+" for enum EventType")}}a.eventTypeFromJSON=Jn;function zn($){switch($){case Ln.EVENT_TYPE_UNSPECIFIED:return"EVENT_TYPE_UNSPECIFIED";case Ln.EVENT_TYPE_COLLECTION:return"EVENT_TYPE_COLLECTION";case Ln.EVENT_TYPE_PROJECT:return"EVENT_TYPE_PROJECT";case Ln.EVENT_TYPE_SOURCE:return"EVENT_TYPE_SOURCE";case Ln.EVENT_TYPE_DESTINATION:return"EVENT_TYPE_DESTINATION";default:throw new An.Error("Unrecognized enum value "+$+" for enum EventType")}}a.eventTypeToJSON=zn;function mn($){switch($){case Ln.EVENT_TYPE_UNSPECIFIED:return 0;case Ln.EVENT_TYPE_COLLECTION:return 1;case Ln.EVENT_TYPE_PROJECT:return 2;case Ln.EVENT_TYPE_SOURCE:return 4;case Ln.EVENT_TYPE_DESTINATION:return 5;default:throw new An.Error("Unrecognized enum value "+$+" for enum EventType")}}a.eventTypeToNumber=mn;function ot(){return{height:void 0,width:void 0,framerate:void 0,colorSpace:void 0}}a.VideoRendering={encode($,tt=b.default.Writer.create()){return $.height!==void 0&&tt.uint32(8).uint32($.height),$.width!==void 0&&tt.uint32(16).uint32($.width),$.framerate!==void 0&&tt.uint32(29).float($.framerate),$.colorSpace!==void 0&&tt.uint32(32).int32(yt($.colorSpace)),tt},decode($,tt){const rt=$ instanceof b.default.Reader?$:new b.default.Reader($);let Nt=tt===void 0?rt.len:rt.pos+tt;const vt=ot();for(;rt.pos<Nt;){const Mt=rt.uint32();switch(Mt>>>3){case 1:vt.height=rt.uint32();break;case 2:vt.width=rt.uint32();break;case 3:vt.framerate=rt.float();break;case 4:vt.colorSpace=mt(rt.int32());break;default:rt.skipType(Mt&7);break}}return vt},fromJSON($){return{height:Wt($.height)?Number($.height):void 0,width:Wt($.width)?Number($.width):void 0,framerate:Wt($.framerate)?Number($.framerate):void 0,colorSpace:Wt($.colorSpace)?mt($.colorSpace):void 0}},toJSON($){const tt={};return $.height!==void 0&&(tt.height=Math.round($.height)),$.width!==void 0&&(tt.width=Math.round($.width)),$.framerate!==void 0&&(tt.framerate=$.framerate),$.colorSpace!==void 0&&(tt.colorSpace=$.colorSpace!==void 0?St($.colorSpace):void 0),tt},fromPartial($){var tt,rt,Nt,vt;const Mt=ot();return Mt.height=(tt=$.height)!==null&&tt!==void 0?tt:void 0,Mt.width=(rt=$.width)!==null&&rt!==void 0?rt:void 0,Mt.framerate=(Nt=$.framerate)!==null&&Nt!==void 0?Nt:void 0,Mt.colorSpace=(vt=$.colorSpace)!==null&&vt!==void 0?vt:void 0,Mt}};function bt(){return{channelLayout:void 0}}a.AudioRendering={encode($,tt=b.default.Writer.create()){return $.channelLayout!==void 0&&tt.uint32(8).int32(ht($.channelLayout)),tt},decode($,tt){const rt=$ instanceof b.default.Reader?$:new b.default.Reader($);let Nt=tt===void 0?rt.len:rt.pos+tt;const vt=bt();for(;rt.pos<Nt;){const Mt=rt.uint32();switch(Mt>>>3){case 1:vt.channelLayout=Tt(rt.int32());break;default:rt.skipType(Mt&7);break}}return vt},fromJSON($){return{channelLayout:Wt($.channelLayout)?Tt($.channelLayout):void 0}},toJSON($){const tt={};return $.channelLayout!==void 0&&(tt.channelLayout=$.channelLayout!==void 0?gt($.channelLayout):void 0),tt},fromPartial($){var tt;const rt=bt();return rt.channelLayout=(tt=$.channelLayout)!==null&&tt!==void 0?tt:void 0,rt}};function Ct(){return{video:void 0,audio:void 0,quality:void 0,targetLatency:void 0,complexity:void 0}}a.Rendering={encode($,tt=b.default.Writer.create()){return $.video!==void 0&&a.VideoRendering.encode($.video,tt.uint32(10).fork()).ldelim(),$.audio!==void 0&&a.AudioRendering.encode($.audio,tt.uint32(18).fork()).ldelim(),$.quality!==void 0&&tt.uint32(24).int32(qt($.quality)),$.targetLatency!==void 0&&tt.uint32(32).uint32($.targetLatency),$.complexity!==void 0&&tt.uint32(40).int32($.complexity),tt},decode($,tt){const rt=$ instanceof b.default.Reader?$:new b.default.Reader($);let Nt=tt===void 0?rt.len:rt.pos+tt;const vt=Ct();for(;rt.pos<Nt;){const Mt=rt.uint32();switch(Mt>>>3){case 1:vt.video=a.VideoRendering.decode(rt,rt.uint32());break;case 2:vt.audio=a.AudioRendering.decode(rt,rt.uint32());break;case 3:vt.quality=At(rt.int32());break;case 4:vt.targetLatency=rt.uint32();break;case 5:vt.complexity=rt.int32();break;default:rt.skipType(Mt&7);break}}return vt},fromJSON($){return{video:Wt($.video)?a.VideoRendering.fromJSON($.video):void 0,audio:Wt($.audio)?a.AudioRendering.fromJSON($.audio):void 0,quality:Wt($.quality)?At($.quality):void 0,targetLatency:Wt($.targetLatency)?Number($.targetLatency):void 0,complexity:Wt($.complexity)?Number($.complexity):void 0}},toJSON($){const tt={};return $.video!==void 0&&(tt.video=$.video?a.VideoRendering.toJSON($.video):void 0),$.audio!==void 0&&(tt.audio=$.audio?a.AudioRendering.toJSON($.audio):void 0),$.quality!==void 0&&(tt.quality=$.quality!==void 0?Bt($.quality):void 0),$.targetLatency!==void 0&&(tt.targetLatency=Math.round($.targetLatency)),$.complexity!==void 0&&(tt.complexity=Math.round($.complexity)),tt},fromPartial($){var tt,rt,Nt;const vt=Ct();return vt.video=$.video!==void 0&&$.video!==null?a.VideoRendering.fromPartial($.video):void 0,vt.audio=$.audio!==void 0&&$.audio!==null?a.AudioRendering.fromPartial($.audio):void 0,vt.quality=(tt=$.quality)!==null&&tt!==void 0?tt:void 0,vt.targetLatency=(rt=$.targetLatency)!==null&&rt!==void 0?rt:void 0,vt.complexity=(Nt=$.complexity)!==null&&Nt!==void 0?Nt:void 0,vt}};function cn(){return{mode:void 0,targetBitrate:void 0,maxKeyFrameInterval:void 0}}a.VideoCodecRateControl={encode($,tt=b.default.Writer.create()){return $.mode!==void 0&&tt.uint32(8).int32(_n($.mode)),$.targetBitrate!==void 0&&tt.uint32(16).uint32($.targetBitrate),$.maxKeyFrameInterval!==void 0&&tt.uint32(24).uint32($.maxKeyFrameInterval),tt},decode($,tt){const rt=$ instanceof b.default.Reader?$:new b.default.Reader($);let Nt=tt===void 0?rt.len:rt.pos+tt;const vt=cn();for(;rt.pos<Nt;){const Mt=rt.uint32();switch(Mt>>>3){case 1:vt.mode=bn(rt.int32());break;case 2:vt.targetBitrate=rt.uint32();break;case 3:vt.maxKeyFrameInterval=rt.uint32();break;default:rt.skipType(Mt&7);break}}return vt},fromJSON($){return{mode:Wt($.mode)?bn($.mode):void 0,targetBitrate:Wt($.targetBitrate)?Number($.targetBitrate):void 0,maxKeyFrameInterval:Wt($.maxKeyFrameInterval)?Number($.maxKeyFrameInterval):void 0}},toJSON($){const tt={};return $.mode!==void 0&&(tt.mode=$.mode!==void 0?kn($.mode):void 0),$.targetBitrate!==void 0&&(tt.targetBitrate=Math.round($.targetBitrate)),$.maxKeyFrameInterval!==void 0&&(tt.maxKeyFrameInterval=Math.round($.maxKeyFrameInterval)),tt},fromPartial($){var tt,rt,Nt;const vt=cn();return vt.mode=(tt=$.mode)!==null&&tt!==void 0?tt:void 0,vt.targetBitrate=(rt=$.targetBitrate)!==null&&rt!==void 0?rt:void 0,vt.maxKeyFrameInterval=(Nt=$.maxKeyFrameInterval)!==null&&Nt!==void 0?Nt:void 0,vt}};function Yt(){return{codec:void 0,rateControl:void 0,profile:void 0}}a.VideoEncoding={encode($,tt=b.default.Writer.create()){return $.codec!==void 0&&tt.uint32(8).int32(dt($.codec)),$.rateControl!==void 0&&a.VideoCodecRateControl.encode($.rateControl,tt.uint32(18).fork()).ldelim(),$.profile!==void 0&&tt.uint32(32).int32(Jt($.profile)),tt},decode($,tt){const rt=$ instanceof b.default.Reader?$:new b.default.Reader($);let Nt=tt===void 0?rt.len:rt.pos+tt;const vt=Yt();for(;rt.pos<Nt;){const Mt=rt.uint32();switch(Mt>>>3){case 1:vt.codec=Ht(rt.int32());break;case 2:vt.rateControl=a.VideoCodecRateControl.decode(rt,rt.uint32());break;case 4:vt.profile=kt(rt.int32());break;default:rt.skipType(Mt&7);break}}return vt},fromJSON($){return{codec:Wt($.codec)?Ht($.codec):void 0,rateControl:Wt($.rateControl)?a.VideoCodecRateControl.fromJSON($.rateControl):void 0,profile:Wt($.profile)?kt($.profile):void 0}},toJSON($){const tt={};return $.codec!==void 0&&(tt.codec=$.codec!==void 0?ct($.codec):void 0),$.rateControl!==void 0&&(tt.rateControl=$.rateControl?a.VideoCodecRateControl.toJSON($.rateControl):void 0),$.profile!==void 0&&(tt.profile=$.profile!==void 0?Lt($.profile):void 0),tt},fromPartial($){var tt,rt;const Nt=Yt();return Nt.codec=(tt=$.codec)!==null&&tt!==void 0?tt:void 0,Nt.rateControl=$.rateControl!==void 0&&$.rateControl!==null?a.VideoCodecRateControl.fromPartial($.rateControl):void 0,Nt.profile=(rt=$.profile)!==null&&rt!==void 0?rt:void 0,Nt}};function dn(){return{codec:void 0}}a.AudioEncoding={encode($,tt=b.default.Writer.create()){return $.codec!==void 0&&tt.uint32(8).int32(rn($.codec)),tt},decode($,tt){const rt=$ instanceof b.default.Reader?$:new b.default.Reader($);let Nt=tt===void 0?rt.len:rt.pos+tt;const vt=dn();for(;rt.pos<Nt;){const Mt=rt.uint32();switch(Mt>>>3){case 1:vt.codec=Qt(rt.int32());break;default:rt.skipType(Mt&7);break}}return vt},fromJSON($){return{codec:Wt($.codec)?Qt($.codec):void 0}},toJSON($){const tt={};return $.codec!==void 0&&(tt.codec=$.codec!==void 0?xt($.codec):void 0),tt},fromPartial($){var tt;const rt=dn();return rt.codec=(tt=$.codec)!==null&&tt!==void 0?tt:void 0,rt}};function Bn(){return{video:void 0,audio:void 0}}a.Encoding={encode($,tt=b.default.Writer.create()){return $.video!==void 0&&a.VideoEncoding.encode($.video,tt.uint32(10).fork()).ldelim(),$.audio!==void 0&&a.AudioEncoding.encode($.audio,tt.uint32(18).fork()).ldelim(),tt},decode($,tt){const rt=$ instanceof b.default.Reader?$:new b.default.Reader($);let Nt=tt===void 0?rt.len:rt.pos+tt;const vt=Bn();for(;rt.pos<Nt;){const Mt=rt.uint32();switch(Mt>>>3){case 1:vt.video=a.VideoEncoding.decode(rt,rt.uint32());break;case 2:vt.audio=a.AudioEncoding.decode(rt,rt.uint32());break;default:rt.skipType(Mt&7);break}}return vt},fromJSON($){return{video:Wt($.video)?a.VideoEncoding.fromJSON($.video):void 0,audio:Wt($.audio)?a.AudioEncoding.fromJSON($.audio):void 0}},toJSON($){const tt={};return $.video!==void 0&&(tt.video=$.video?a.VideoEncoding.toJSON($.video):void 0),$.audio!==void 0&&(tt.audio=$.audio?a.AudioEncoding.toJSON($.audio):void 0),tt},fromPartial($){const tt=Bn();return tt.video=$.video!==void 0&&$.video!==null?a.VideoEncoding.fromPartial($.video):void 0,tt.audio=$.audio!==void 0&&$.audio!==null?a.AudioEncoding.fromPartial($.audio):void 0,tt}};function Kn(){return{enabled:void 0,key:void 0,url:void 0,baseUrl:void 0,previewUrl:void 0,ingestId:void 0,secure:void 0,ingestType:void 0}}a.SourceRtmpPushAddress={encode($,tt=b.default.Writer.create()){return $.enabled!==void 0&&tt.uint32(8).bool($.enabled),$.key!==void 0&&tt.uint32(18).string($.key),$.url!==void 0&&tt.uint32(26).string($.url),$.baseUrl!==void 0&&tt.uint32(34).string($.baseUrl),$.previewUrl!==void 0&&tt.uint32(42).string($.previewUrl),$.ingestId!==void 0&&tt.uint32(50).string($.ingestId),$.secure!==void 0&&tt.uint32(56).bool($.secure),$.ingestType!==void 0&&tt.uint32(66).string($.ingestType),tt},decode($,tt){const rt=$ instanceof b.default.Reader?$:new b.default.Reader($);let Nt=tt===void 0?rt.len:rt.pos+tt;const vt=Kn();for(;rt.pos<Nt;){const Mt=rt.uint32();switch(Mt>>>3){case 1:vt.enabled=rt.bool();break;case 2:vt.key=rt.string();break;case 3:vt.url=rt.string();break;case 4:vt.baseUrl=rt.string();break;case 5:vt.previewUrl=rt.string();break;case 6:vt.ingestId=rt.string();break;case 7:vt.secure=rt.bool();break;case 8:vt.ingestType=rt.string();break;default:rt.skipType(Mt&7);break}}return vt},fromJSON($){return{enabled:Wt($.enabled)?!!$.enabled:void 0,key:Wt($.key)?String($.key):void 0,url:Wt($.url)?String($.url):void 0,baseUrl:Wt($.baseUrl)?String($.baseUrl):void 0,previewUrl:Wt($.previewUrl)?String($.previewUrl):void 0,ingestId:Wt($.ingestId)?String($.ingestId):void 0,secure:Wt($.secure)?!!$.secure:void 0,ingestType:Wt($.ingestType)?String($.ingestType):void 0}},toJSON($){const tt={};return $.enabled!==void 0&&(tt.enabled=$.enabled),$.key!==void 0&&(tt.key=$.key),$.url!==void 0&&(tt.url=$.url),$.baseUrl!==void 0&&(tt.baseUrl=$.baseUrl),$.previewUrl!==void 0&&(tt.previewUrl=$.previewUrl),$.ingestId!==void 0&&(tt.ingestId=$.ingestId),$.secure!==void 0&&(tt.secure=$.secure),$.ingestType!==void 0&&(tt.ingestType=$.ingestType),tt},fromPartial($){var tt,rt,Nt,vt,Mt,Pn,Un,Gn;const Hn=Kn();return Hn.enabled=(tt=$.enabled)!==null&&tt!==void 0?tt:void 0,Hn.key=(rt=$.key)!==null&&rt!==void 0?rt:void 0,Hn.url=(Nt=$.url)!==null&&Nt!==void 0?Nt:void 0,Hn.baseUrl=(vt=$.baseUrl)!==null&&vt!==void 0?vt:void 0,Hn.previewUrl=(Mt=$.previewUrl)!==null&&Mt!==void 0?Mt:void 0,Hn.ingestId=(Pn=$.ingestId)!==null&&Pn!==void 0?Pn:void 0,Hn.secure=(Un=$.secure)!==null&&Un!==void 0?Un:void 0,Hn.ingestType=(Gn=$.ingestType)!==null&&Gn!==void 0?Gn:void 0,Hn}};function Qn(){return{enabled:void 0,streamId:void 0,url:void 0,baseUrl:void 0,previewUrl:void 0,ingestId:void 0,ingestType:void 0}}a.SrtPushAddress={encode($,tt=b.default.Writer.create()){return $.enabled!==void 0&&tt.uint32(8).bool($.enabled),$.streamId!==void 0&&tt.uint32(18).string($.streamId),$.url!==void 0&&tt.uint32(26).string($.url),$.baseUrl!==void 0&&tt.uint32(34).string($.baseUrl),$.previewUrl!==void 0&&tt.uint32(42).string($.previewUrl),$.ingestId!==void 0&&tt.uint32(50).string($.ingestId),$.ingestType!==void 0&&tt.uint32(58).string($.ingestType),tt},decode($,tt){const rt=$ instanceof b.default.Reader?$:new b.default.Reader($);let Nt=tt===void 0?rt.len:rt.pos+tt;const vt=Qn();for(;rt.pos<Nt;){const Mt=rt.uint32();switch(Mt>>>3){case 1:vt.enabled=rt.bool();break;case 2:vt.streamId=rt.string();break;case 3:vt.url=rt.string();break;case 4:vt.baseUrl=rt.string();break;case 5:vt.previewUrl=rt.string();break;case 6:vt.ingestId=rt.string();break;case 7:vt.ingestType=rt.string();break;default:rt.skipType(Mt&7);break}}return vt},fromJSON($){return{enabled:Wt($.enabled)?!!$.enabled:void 0,streamId:Wt($.streamId)?String($.streamId):void 0,url:Wt($.url)?String($.url):void 0,baseUrl:Wt($.baseUrl)?String($.baseUrl):void 0,previewUrl:Wt($.previewUrl)?String($.previewUrl):void 0,ingestId:Wt($.ingestId)?String($.ingestId):void 0,ingestType:Wt($.ingestType)?String($.ingestType):void 0}},toJSON($){const tt={};return $.enabled!==void 0&&(tt.enabled=$.enabled),$.streamId!==void 0&&(tt.streamId=$.streamId),$.url!==void 0&&(tt.url=$.url),$.baseUrl!==void 0&&(tt.baseUrl=$.baseUrl),$.previewUrl!==void 0&&(tt.previewUrl=$.previewUrl),$.ingestId!==void 0&&(tt.ingestId=$.ingestId),$.ingestType!==void 0&&(tt.ingestType=$.ingestType),tt},fromPartial($){var tt,rt,Nt,vt,Mt,Pn,Un;const Gn=Qn();return Gn.enabled=(tt=$.enabled)!==null&&tt!==void 0?tt:void 0,Gn.streamId=(rt=$.streamId)!==null&&rt!==void 0?rt:void 0,Gn.url=(Nt=$.url)!==null&&Nt!==void 0?Nt:void 0,Gn.baseUrl=(vt=$.baseUrl)!==null&&vt!==void 0?vt:void 0,Gn.previewUrl=(Mt=$.previewUrl)!==null&&Mt!==void 0?Mt:void 0,Gn.ingestId=(Pn=$.ingestId)!==null&&Pn!==void 0?Pn:void 0,Gn.ingestType=(Un=$.ingestType)!==null&&Un!==void 0?Un:void 0,Gn}};function Vn(){return{url:""}}a.RtmpPullAddress={encode($,tt=b.default.Writer.create()){return $.url!==""&&tt.uint32(10).string($.url),tt},decode($,tt){const rt=$ instanceof b.default.Reader?$:new b.default.Reader($);let Nt=tt===void 0?rt.len:rt.pos+tt;const vt=Vn();for(;rt.pos<Nt;){const Mt=rt.uint32();switch(Mt>>>3){case 1:vt.url=rt.string();break;default:rt.skipType(Mt&7);break}}return vt},fromJSON($){return{url:Wt($.url)?String($.url):""}},toJSON($){const tt={};return $.url!==void 0&&(tt.url=$.url),tt},fromPartial($){var tt;const rt=Vn();return rt.url=(tt=$.url)!==null&&tt!==void 0?tt:"",rt}};function qn(){return{url:""}}a.SrtPullAddress={encode($,tt=b.default.Writer.create()){return $.url!==""&&tt.uint32(10).string($.url),tt},decode($,tt){const rt=$ instanceof b.default.Reader?$:new b.default.Reader($);let Nt=tt===void 0?rt.len:rt.pos+tt;const vt=qn();for(;rt.pos<Nt;){const Mt=rt.uint32();switch(Mt>>>3){case 1:vt.url=rt.string();break;default:rt.skipType(Mt&7);break}}return vt},fromJSON($){return{url:Wt($.url)?String($.url):""}},toJSON($){const tt={};return $.url!==void 0&&(tt.url=$.url),tt},fromPartial($){var tt;const rt=qn();return rt.url=(tt=$.url)!==null&&tt!==void 0?tt:"",rt}};function Xn(){return{rtmpPush:void 0,srtPush:void 0,rtmpPull:void 0,srtPull:void 0}}a.SourceAddress={encode($,tt=b.default.Writer.create()){return $.rtmpPush!==void 0&&a.SourceRtmpPushAddress.encode($.rtmpPush,tt.uint32(10).fork()).ldelim(),$.srtPush!==void 0&&a.SrtPushAddress.encode($.srtPush,tt.uint32(18).fork()).ldelim(),$.rtmpPull!==void 0&&a.RtmpPullAddress.encode($.rtmpPull,tt.uint32(26).fork()).ldelim(),$.srtPull!==void 0&&a.SrtPullAddress.encode($.srtPull,tt.uint32(34).fork()).ldelim(),tt},decode($,tt){const rt=$ instanceof b.default.Reader?$:new b.default.Reader($);let Nt=tt===void 0?rt.len:rt.pos+tt;const vt=Xn();for(;rt.pos<Nt;){const Mt=rt.uint32();switch(Mt>>>3){case 1:vt.rtmpPush=a.SourceRtmpPushAddress.decode(rt,rt.uint32());break;case 2:vt.srtPush=a.SrtPushAddress.decode(rt,rt.uint32());break;case 3:vt.rtmpPull=a.RtmpPullAddress.decode(rt,rt.uint32());break;case 4:vt.srtPull=a.SrtPullAddress.decode(rt,rt.uint32());break;default:rt.skipType(Mt&7);break}}return vt},fromJSON($){return{rtmpPush:Wt($.rtmpPush)?a.SourceRtmpPushAddress.fromJSON($.rtmpPush):void 0,srtPush:Wt($.srtPush)?a.SrtPushAddress.fromJSON($.srtPush):void 0,rtmpPull:Wt($.rtmpPull)?a.RtmpPullAddress.fromJSON($.rtmpPull):void 0,srtPull:Wt($.srtPull)?a.SrtPullAddress.fromJSON($.srtPull):void 0}},toJSON($){const tt={};return $.rtmpPush!==void 0&&(tt.rtmpPush=$.rtmpPush?a.SourceRtmpPushAddress.toJSON($.rtmpPush):void 0),$.srtPush!==void 0&&(tt.srtPush=$.srtPush?a.SrtPushAddress.toJSON($.srtPush):void 0),$.rtmpPull!==void 0&&(tt.rtmpPull=$.rtmpPull?a.RtmpPullAddress.toJSON($.rtmpPull):void 0),$.srtPull!==void 0&&(tt.srtPull=$.srtPull?a.SrtPullAddress.toJSON($.srtPull):void 0),tt},fromPartial($){const tt=Xn();return tt.rtmpPush=$.rtmpPush!==void 0&&$.rtmpPush!==null?a.SourceRtmpPushAddress.fromPartial($.rtmpPush):void 0,tt.srtPush=$.srtPush!==void 0&&$.srtPush!==null?a.SrtPushAddress.fromPartial($.srtPush):void 0,tt.rtmpPull=$.rtmpPull!==void 0&&$.rtmpPull!==null?a.RtmpPullAddress.fromPartial($.rtmpPull):void 0,tt.srtPull=$.srtPull!==void 0&&$.srtPull!==null?a.SrtPullAddress.fromPartial($.srtPull):void 0,tt}};function jn(){return{key:void 0,url:""}}a.DestinationRtmpPushAddress={encode($,tt=b.default.Writer.create()){return $.key!==void 0&&tt.uint32(10).string($.key),$.url!==""&&tt.uint32(18).string($.url),tt},decode($,tt){const rt=$ instanceof b.default.Reader?$:new b.default.Reader($);let Nt=tt===void 0?rt.len:rt.pos+tt;const vt=jn();for(;rt.pos<Nt;){const Mt=rt.uint32();switch(Mt>>>3){case 1:vt.key=rt.string();break;case 2:vt.url=rt.string();break;default:rt.skipType(Mt&7);break}}return vt},fromJSON($){return{key:Wt($.key)?String($.key):void 0,url:Wt($.url)?String($.url):""}},toJSON($){const tt={};return $.key!==void 0&&(tt.key=$.key),$.url!==void 0&&(tt.url=$.url),tt},fromPartial($){var tt,rt;const Nt=jn();return Nt.key=(tt=$.key)!==null&&tt!==void 0?tt:void 0,Nt.url=(rt=$.url)!==null&&rt!==void 0?rt:"",Nt}};function er(){return{url:""}}a.DestinationSrtPushAddress={encode($,tt=b.default.Writer.create()){return $.url!==""&&tt.uint32(18).string($.url),tt},decode($,tt){const rt=$ instanceof b.default.Reader?$:new b.default.Reader($);let Nt=tt===void 0?rt.len:rt.pos+tt;const vt=er();for(;rt.pos<Nt;){const Mt=rt.uint32();switch(Mt>>>3){case 2:vt.url=rt.string();break;default:rt.skipType(Mt&7);break}}return vt},fromJSON($){return{url:Wt($.url)?String($.url):""}},toJSON($){const tt={};return $.url!==void 0&&(tt.url=$.url),tt},fromPartial($){var tt;const rt=er();return rt.url=(tt=$.url)!==null&&tt!==void 0?tt:"",rt}};function tr(){return{appId:"",channelId:"",userId:""}}a.DestinationAgoraPushAddress={encode($,tt=b.default.Writer.create()){return $.appId!==""&&tt.uint32(10).string($.appId),$.channelId!==""&&tt.uint32(18).string($.channelId),$.userId!==""&&tt.uint32(26).string($.userId),tt},decode($,tt){const rt=$ instanceof b.default.Reader?$:new b.default.Reader($);let Nt=tt===void 0?rt.len:rt.pos+tt;const vt=tr();for(;rt.pos<Nt;){const Mt=rt.uint32();switch(Mt>>>3){case 1:vt.appId=rt.string();break;case 2:vt.channelId=rt.string();break;case 3:vt.userId=rt.string();break;default:rt.skipType(Mt&7);break}}return vt},fromJSON($){return{appId:Wt($.appId)?String($.appId):"",channelId:Wt($.channelId)?String($.channelId):"",userId:Wt($.userId)?String($.userId):""}},toJSON($){const tt={};return $.appId!==void 0&&(tt.appId=$.appId),$.channelId!==void 0&&(tt.channelId=$.channelId),$.userId!==void 0&&(tt.userId=$.userId),tt},fromPartial($){var tt,rt,Nt;const vt=tr();return vt.appId=(tt=$.appId)!==null&&tt!==void 0?tt:"",vt.channelId=(rt=$.channelId)!==null&&rt!==void 0?rt:"",vt.userId=(Nt=$.userId)!==null&&Nt!==void 0?Nt:"",vt}};function Zn(){return{playlistCount:void 0,fileCount:void 0}}a.HlsLifecycleLive={encode($,tt=b.default.Writer.create()){return $.playlistCount!==void 0&&tt.uint32(8).int32($.playlistCount),$.fileCount!==void 0&&tt.uint32(16).int32($.fileCount),tt},decode($,tt){const rt=$ instanceof b.default.Reader?$:new b.default.Reader($);let Nt=tt===void 0?rt.len:rt.pos+tt;const vt=Zn();for(;rt.pos<Nt;){const Mt=rt.uint32();switch(Mt>>>3){case 1:vt.playlistCount=rt.int32();break;case 2:vt.fileCount=rt.int32();break;default:rt.skipType(Mt&7);break}}return vt},fromJSON($){return{playlistCount:Wt($.playlistCount)?Number($.playlistCount):void 0,fileCount:Wt($.fileCount)?Number($.fileCount):void 0}},toJSON($){const tt={};return $.playlistCount!==void 0&&(tt.playlistCount=Math.round($.playlistCount)),$.fileCount!==void 0&&(tt.fileCount=Math.round($.fileCount)),tt},fromPartial($){var tt,rt;const Nt=Zn();return Nt.playlistCount=(tt=$.playlistCount)!==null&&tt!==void 0?tt:void 0,Nt.fileCount=(rt=$.fileCount)!==null&&rt!==void 0?rt:void 0,Nt}};function Wn(){return{maxDuration:void 0}}a.HlsLifecycleVod={encode($,tt=b.default.Writer.create()){return $.maxDuration!==void 0&&tt.uint32(8).int32($.maxDuration),tt},decode($,tt){const rt=$ instanceof b.default.Reader?$:new b.default.Reader($);let Nt=tt===void 0?rt.len:rt.pos+tt;const vt=Wn();for(;rt.pos<Nt;){const Mt=rt.uint32();switch(Mt>>>3){case 1:vt.maxDuration=rt.int32();break;default:rt.skipType(Mt&7);break}}return vt},fromJSON($){return{maxDuration:Wt($.maxDuration)?Number($.maxDuration):void 0}},toJSON($){const tt={};return $.maxDuration!==void 0&&(tt.maxDuration=Math.round($.maxDuration)),tt},fromPartial($){var tt;const rt=Wn();return rt.maxDuration=(tt=$.maxDuration)!==null&&tt!==void 0?tt:void 0,rt}};function Mn(){return{vod:void 0,live:void 0}}a.HlsLifecycle={encode($,tt=b.default.Writer.create()){return $.vod!==void 0&&a.HlsLifecycleVod.encode($.vod,tt.uint32(10).fork()).ldelim(),$.live!==void 0&&a.HlsLifecycleLive.encode($.live,tt.uint32(18).fork()).ldelim(),tt},decode($,tt){const rt=$ instanceof b.default.Reader?$:new b.default.Reader($);let Nt=tt===void 0?rt.len:rt.pos+tt;const vt=Mn();for(;rt.pos<Nt;){const Mt=rt.uint32();switch(Mt>>>3){case 1:vt.vod=a.HlsLifecycleVod.decode(rt,rt.uint32());break;case 2:vt.live=a.HlsLifecycleLive.decode(rt,rt.uint32());break;default:rt.skipType(Mt&7);break}}return vt},fromJSON($){return{vod:Wt($.vod)?a.HlsLifecycleVod.fromJSON($.vod):void 0,live:Wt($.live)?a.HlsLifecycleLive.fromJSON($.live):void 0}},toJSON($){const tt={};return $.vod!==void 0&&(tt.vod=$.vod?a.HlsLifecycleVod.toJSON($.vod):void 0),$.live!==void 0&&(tt.live=$.live?a.HlsLifecycleLive.toJSON($.live):void 0),tt},fromPartial($){const tt=Mn();return tt.vod=$.vod!==void 0&&$.vod!==null?a.HlsLifecycleVod.fromPartial($.vod):void 0,tt.live=$.live!==void 0&&$.live!==null?a.HlsLifecycleLive.fromPartial($.live):void 0,tt}};function ar(){return{lifecycle:void 0,segmentDuration:void 0}}a.HlsPackaging={encode($,tt=b.default.Writer.create()){return $.lifecycle!==void 0&&a.HlsLifecycle.encode($.lifecycle,tt.uint32(10).fork()).ldelim(),$.segmentDuration!==void 0&&tt.uint32(16).int32($.segmentDuration),tt},decode($,tt){const rt=$ instanceof b.default.Reader?$:new b.default.Reader($);let Nt=tt===void 0?rt.len:rt.pos+tt;const vt=ar();for(;rt.pos<Nt;){const Mt=rt.uint32();switch(Mt>>>3){case 1:vt.lifecycle=a.HlsLifecycle.decode(rt,rt.uint32());break;case 2:vt.segmentDuration=rt.int32();break;default:rt.skipType(Mt&7);break}}return vt},fromJSON($){return{lifecycle:Wt($.lifecycle)?a.HlsLifecycle.fromJSON($.lifecycle):void 0,segmentDuration:Wt($.segmentDuration)?Number($.segmentDuration):void 0}},toJSON($){const tt={};return $.lifecycle!==void 0&&(tt.lifecycle=$.lifecycle?a.HlsLifecycle.toJSON($.lifecycle):void 0),$.segmentDuration!==void 0&&(tt.segmentDuration=Math.round($.segmentDuration)),tt},fromPartial($){var tt;const rt=ar();return rt.lifecycle=$.lifecycle!==void 0&&$.lifecycle!==null?a.HlsLifecycle.fromPartial($.lifecycle):void 0,rt.segmentDuration=(tt=$.segmentDuration)!==null&&tt!==void 0?tt:void 0,rt}};function dr(){return{hls:void 0}}a.ObjectStoragePackaging={encode($,tt=b.default.Writer.create()){return $.hls!==void 0&&a.HlsPackaging.encode($.hls,tt.uint32(10).fork()).ldelim(),tt},decode($,tt){const rt=$ instanceof b.default.Reader?$:new b.default.Reader($);let Nt=tt===void 0?rt.len:rt.pos+tt;const vt=dr();for(;rt.pos<Nt;){const Mt=rt.uint32();switch(Mt>>>3){case 1:vt.hls=a.HlsPackaging.decode(rt,rt.uint32());break;default:rt.skipType(Mt&7);break}}return vt},fromJSON($){return{hls:Wt($.hls)?a.HlsPackaging.fromJSON($.hls):void 0}},toJSON($){const tt={};return $.hls!==void 0&&(tt.hls=$.hls?a.HlsPackaging.toJSON($.hls):void 0),tt},fromPartial($){const tt=dr();return tt.hls=$.hls!==void 0&&$.hls!==null?a.HlsPackaging.fromPartial($.hls):void 0,tt}};function cr(){return{region:"",bucket:"",prefix:void 0,accessKey:"",secretKey:"",token:void 0,tokenDuration:void 0,acl:void 0,endpoint:void 0,packaging:void 0}}a.S3StorageAddress={encode($,tt=b.default.Writer.create()){return $.region!==""&&tt.uint32(10).string($.region),$.bucket!==""&&tt.uint32(18).string($.bucket),$.prefix!==void 0&&tt.uint32(26).string($.prefix),$.accessKey!==""&&tt.uint32(34).string($.accessKey),$.secretKey!==""&&tt.uint32(42).string($.secretKey),$.token!==void 0&&tt.uint32(50).string($.token),$.tokenDuration!==void 0&&tt.uint32(56).int32($.tokenDuration),$.acl!==void 0&&tt.uint32(64).int32(Nn($.acl)),$.endpoint!==void 0&&tt.uint32(74).string($.endpoint),$.packaging!==void 0&&a.ObjectStoragePackaging.encode($.packaging,tt.uint32(82).fork()).ldelim(),tt},decode($,tt){const rt=$ instanceof b.default.Reader?$:new b.default.Reader($);let Nt=tt===void 0?rt.len:rt.pos+tt;const vt=cr();for(;rt.pos<Nt;){const Mt=rt.uint32();switch(Mt>>>3){case 1:vt.region=rt.string();break;case 2:vt.bucket=rt.string();break;case 3:vt.prefix=rt.string();break;case 4:vt.accessKey=rt.string();break;case 5:vt.secretKey=rt.string();break;case 6:vt.token=rt.string();break;case 7:vt.tokenDuration=rt.int32();break;case 8:vt.acl=vn(rt.int32());break;case 9:vt.endpoint=rt.string();break;case 10:vt.packaging=a.ObjectStoragePackaging.decode(rt,rt.uint32());break;default:rt.skipType(Mt&7);break}}return vt},fromJSON($){return{region:Wt($.region)?String($.region):"",bucket:Wt($.bucket)?String($.bucket):"",prefix:Wt($.prefix)?String($.prefix):void 0,accessKey:Wt($.accessKey)?String($.accessKey):"",secretKey:Wt($.secretKey)?String($.secretKey):"",token:Wt($.token)?String($.token):void 0,tokenDuration:Wt($.tokenDuration)?Number($.tokenDuration):void 0,acl:Wt($.acl)?vn($.acl):void 0,endpoint:Wt($.endpoint)?String($.endpoint):void 0,packaging:Wt($.packaging)?a.ObjectStoragePackaging.fromJSON($.packaging):void 0}},toJSON($){const tt={};return $.region!==void 0&&(tt.region=$.region),$.bucket!==void 0&&(tt.bucket=$.bucket),$.prefix!==void 0&&(tt.prefix=$.prefix),$.accessKey!==void 0&&(tt.accessKey=$.accessKey),$.secretKey!==void 0&&(tt.secretKey=$.secretKey),$.token!==void 0&&(tt.token=$.token),$.tokenDuration!==void 0&&(tt.tokenDuration=Math.round($.tokenDuration)),$.acl!==void 0&&(tt.acl=$.acl!==void 0?Cn($.acl):void 0),$.endpoint!==void 0&&(tt.endpoint=$.endpoint),$.packaging!==void 0&&(tt.packaging=$.packaging?a.ObjectStoragePackaging.toJSON($.packaging):void 0),tt},fromPartial($){var tt,rt,Nt,vt,Mt,Pn,Un,Gn,Hn;const xn=cr();return xn.region=(tt=$.region)!==null&&tt!==void 0?tt:"",xn.bucket=(rt=$.bucket)!==null&&rt!==void 0?rt:"",xn.prefix=(Nt=$.prefix)!==null&&Nt!==void 0?Nt:void 0,xn.accessKey=(vt=$.accessKey)!==null&&vt!==void 0?vt:"",xn.secretKey=(Mt=$.secretKey)!==null&&Mt!==void 0?Mt:"",xn.token=(Pn=$.token)!==null&&Pn!==void 0?Pn:void 0,xn.tokenDuration=(Un=$.tokenDuration)!==null&&Un!==void 0?Un:void 0,xn.acl=(Gn=$.acl)!==null&&Gn!==void 0?Gn:void 0,xn.endpoint=(Hn=$.endpoint)!==null&&Hn!==void 0?Hn:void 0,xn.packaging=$.packaging!==void 0&&$.packaging!==null?a.ObjectStoragePackaging.fromPartial($.packaging):void 0,xn}};function lr(){return{rtmpPush:void 0,agora:void 0,s3Storage:void 0,srtPush:void 0}}a.DestinationAddress={encode($,tt=b.default.Writer.create()){return $.rtmpPush!==void 0&&a.DestinationRtmpPushAddress.encode($.rtmpPush,tt.uint32(10).fork()).ldelim(),$.agora!==void 0&&a.DestinationAgoraPushAddress.encode($.agora,tt.uint32(18).fork()).ldelim(),$.s3Storage!==void 0&&a.S3StorageAddress.encode($.s3Storage,tt.uint32(26).fork()).ldelim(),$.srtPush!==void 0&&a.DestinationSrtPushAddress.encode($.srtPush,tt.uint32(34).fork()).ldelim(),tt},decode($,tt){const rt=$ instanceof b.default.Reader?$:new b.default.Reader($);let Nt=tt===void 0?rt.len:rt.pos+tt;const vt=lr();for(;rt.pos<Nt;){const Mt=rt.uint32();switch(Mt>>>3){case 1:vt.rtmpPush=a.DestinationRtmpPushAddress.decode(rt,rt.uint32());break;case 2:vt.agora=a.DestinationAgoraPushAddress.decode(rt,rt.uint32());break;case 3:vt.s3Storage=a.S3StorageAddress.decode(rt,rt.uint32());break;case 4:vt.srtPush=a.DestinationSrtPushAddress.decode(rt,rt.uint32());break;default:rt.skipType(Mt&7);break}}return vt},fromJSON($){return{rtmpPush:Wt($.rtmpPush)?a.DestinationRtmpPushAddress.fromJSON($.rtmpPush):void 0,agora:Wt($.agora)?a.DestinationAgoraPushAddress.fromJSON($.agora):void 0,s3Storage:Wt($.s3Storage)?a.S3StorageAddress.fromJSON($.s3Storage):void 0,srtPush:Wt($.srtPush)?a.DestinationSrtPushAddress.fromJSON($.srtPush):void 0}},toJSON($){const tt={};return $.rtmpPush!==void 0&&(tt.rtmpPush=$.rtmpPush?a.DestinationRtmpPushAddress.toJSON($.rtmpPush):void 0),$.agora!==void 0&&(tt.agora=$.agora?a.DestinationAgoraPushAddress.toJSON($.agora):void 0),$.s3Storage!==void 0&&(tt.s3Storage=$.s3Storage?a.S3StorageAddress.toJSON($.s3Storage):void 0),$.srtPush!==void 0&&(tt.srtPush=$.srtPush?a.DestinationSrtPushAddress.toJSON($.srtPush):void 0),tt},fromPartial($){const tt=lr();return tt.rtmpPush=$.rtmpPush!==void 0&&$.rtmpPush!==null?a.DestinationRtmpPushAddress.fromPartial($.rtmpPush):void 0,tt.agora=$.agora!==void 0&&$.agora!==null?a.DestinationAgoraPushAddress.fromPartial($.agora):void 0,tt.s3Storage=$.s3Storage!==void 0&&$.s3Storage!==null?a.S3StorageAddress.fromPartial($.s3Storage):void 0,tt.srtPush=$.srtPush!==void 0&&$.srtPush!==null?a.DestinationSrtPushAddress.fromPartial($.srtPush):void 0,tt}};function ur(){return{sourceId:"",start:void 0,stop:void 0}}a.SourceTrigger={encode($,tt=b.default.Writer.create()){return $.sourceId!==""&&tt.uint32(10).string($.sourceId),$.start!==void 0&&tt.uint32(16).int32(Pt($.start)),$.stop!==void 0&&tt.uint32(24).int32(Pt($.stop)),tt},decode($,tt){const rt=$ instanceof b.default.Reader?$:new b.default.Reader($);let Nt=tt===void 0?rt.len:rt.pos+tt;const vt=ur();for(;rt.pos<Nt;){const Mt=rt.uint32();switch(Mt>>>3){case 1:vt.sourceId=rt.string();break;case 2:vt.start=ut(rt.int32());break;case 3:vt.stop=ut(rt.int32());break;default:rt.skipType(Mt&7);break}}return vt},fromJSON($){return{sourceId:Wt($.sourceId)?String($.sourceId):"",start:Wt($.start)?ut($.start):void 0,stop:Wt($.stop)?ut($.stop):void 0}},toJSON($){const tt={};return $.sourceId!==void 0&&(tt.sourceId=$.sourceId),$.start!==void 0&&(tt.start=$.start!==void 0?It($.start):void 0),$.stop!==void 0&&(tt.stop=$.stop!==void 0?It($.stop):void 0),tt},fromPartial($){var tt,rt,Nt;const vt=ur();return vt.sourceId=(tt=$.sourceId)!==null&&tt!==void 0?tt:"",vt.start=(rt=$.start)!==null&&rt!==void 0?rt:void 0,vt.stop=(Nt=$.stop)!==null&&Nt!==void 0?Nt:void 0,vt}};function fr(){return{stop:void 0}}a.WebRtcTrigger={encode($,tt=b.default.Writer.create()){return $.stop!==void 0&&tt.uint32(24).int32(Pt($.stop)),tt},decode($,tt){const rt=$ instanceof b.default.Reader?$:new b.default.Reader($);let Nt=tt===void 0?rt.len:rt.pos+tt;const vt=fr();for(;rt.pos<Nt;){const Mt=rt.uint32();switch(Mt>>>3){case 3:vt.stop=ut(rt.int32());break;default:rt.skipType(Mt&7);break}}return vt},fromJSON($){return{stop:Wt($.stop)?ut($.stop):void 0}},toJSON($){const tt={};return $.stop!==void 0&&(tt.stop=$.stop!==void 0?It($.stop):void 0),tt},fromPartial($){var tt;const rt=fr();return rt.stop=(tt=$.stop)!==null&&tt!==void 0?tt:void 0,rt}};function pr(){return{source:void 0}}a.ProjectTrigger={encode($,tt=b.default.Writer.create()){return $.source!==void 0&&a.SourceTrigger.encode($.source,tt.uint32(10).fork()).ldelim(),tt},decode($,tt){const rt=$ instanceof b.default.Reader?$:new b.default.Reader($);let Nt=tt===void 0?rt.len:rt.pos+tt;const vt=pr();for(;rt.pos<Nt;){const Mt=rt.uint32();switch(Mt>>>3){case 1:vt.source=a.SourceTrigger.decode(rt,rt.uint32());break;default:rt.skipType(Mt&7);break}}return vt},fromJSON($){return{source:Wt($.source)?a.SourceTrigger.fromJSON($.source):void 0}},toJSON($){const tt={};return $.source!==void 0&&(tt.source=$.source?a.SourceTrigger.toJSON($.source):void 0),tt},fromPartial($){const tt=pr();return tt.source=$.source!==void 0&&$.source!==null?a.SourceTrigger.fromPartial($.source):void 0,tt}};function hr(){return{enabled:void 0,url:void 0}}a.PreviewHlsPullAddress={encode($,tt=b.default.Writer.create()){return $.enabled!==void 0&&tt.uint32(8).bool($.enabled),$.url!==void 0&&tt.uint32(18).string($.url),tt},decode($,tt){const rt=$ instanceof b.default.Reader?$:new b.default.Reader($);let Nt=tt===void 0?rt.len:rt.pos+tt;const vt=hr();for(;rt.pos<Nt;){const Mt=rt.uint32();switch(Mt>>>3){case 1:vt.enabled=rt.bool();break;case 2:vt.url=rt.string();break;default:rt.skipType(Mt&7);break}}return vt},fromJSON($){return{enabled:Wt($.enabled)?!!$.enabled:void 0,url:Wt($.url)?String($.url):void 0}},toJSON($){const tt={};return $.enabled!==void 0&&(tt.enabled=$.enabled),$.url!==void 0&&(tt.url=$.url),tt},fromPartial($){var tt,rt;const Nt=hr();return Nt.enabled=(tt=$.enabled)!==null&&tt!==void 0?tt:void 0,Nt.url=(rt=$.url)!==null&&rt!==void 0?rt:void 0,Nt}};function Kt(){return{enabled:void 0,displayName:void 0,participantId:void 0}}a.PreviewWebRtcAddress={encode($,tt=b.default.Writer.create()){return $.enabled!==void 0&&tt.uint32(8).bool($.enabled),$.displayName!==void 0&&tt.uint32(18).string($.displayName),$.participantId!==void 0&&tt.uint32(26).string($.participantId),tt},decode($,tt){const rt=$ instanceof b.default.Reader?$:new b.default.Reader($);let Nt=tt===void 0?rt.len:rt.pos+tt;const vt=Kt();for(;rt.pos<Nt;){const Mt=rt.uint32();switch(Mt>>>3){case 1:vt.enabled=rt.bool();break;case 2:vt.displayName=rt.string();break;case 3:vt.participantId=rt.string();break;default:rt.skipType(Mt&7);break}}return vt},fromJSON($){return{enabled:Wt($.enabled)?!!$.enabled:void 0,displayName:Wt($.displayName)?String($.displayName):void 0,participantId:Wt($.participantId)?String($.participantId):void 0}},toJSON($){const tt={};return $.enabled!==void 0&&(tt.enabled=$.enabled),$.displayName!==void 0&&(tt.displayName=$.displayName),$.participantId!==void 0&&(tt.participantId=$.participantId),tt},fromPartial($){var tt,rt,Nt;const vt=Kt();return vt.enabled=(tt=$.enabled)!==null&&tt!==void 0?tt:void 0,vt.displayName=(rt=$.displayName)!==null&&rt!==void 0?rt:void 0,vt.participantId=(Nt=$.participantId)!==null&&Nt!==void 0?Nt:void 0,vt}};function an(){return{webrtc:void 0}}a.PreviewAddress={encode($,tt=b.default.Writer.create()){return $.webrtc!==void 0&&a.PreviewWebRtcAddress.encode($.webrtc,tt.uint32(18).fork()).ldelim(),tt},decode($,tt){const rt=$ instanceof b.default.Reader?$:new b.default.Reader($);let Nt=tt===void 0?rt.len:rt.pos+tt;const vt=an();for(;rt.pos<Nt;){const Mt=rt.uint32();switch(Mt>>>3){case 2:vt.webrtc=a.PreviewWebRtcAddress.decode(rt,rt.uint32());break;default:rt.skipType(Mt&7);break}}return vt},fromJSON($){return{webrtc:Wt($.webrtc)?a.PreviewWebRtcAddress.fromJSON($.webrtc):void 0}},toJSON($){const tt={};return $.webrtc!==void 0&&(tt.webrtc=$.webrtc?a.PreviewWebRtcAddress.toJSON($.webrtc):void 0),tt},fromPartial($){const tt=an();return tt.webrtc=$.webrtc!==void 0&&$.webrtc!==null?a.PreviewWebRtcAddress.fromPartial($.webrtc):void 0,tt}};function hn(){return{rendererUrl:void 0,version:void 0}}a.StudioSdkComposition={encode($,tt=b.default.Writer.create()){return $.rendererUrl!==void 0&&tt.uint32(10).string($.rendererUrl),$.version!==void 0&&tt.uint32(18).string($.version),tt},decode($,tt){const rt=$ instanceof b.default.Reader?$:new b.default.Reader($);let Nt=tt===void 0?rt.len:rt.pos+tt;const vt=hn();for(;rt.pos<Nt;){const Mt=rt.uint32();switch(Mt>>>3){case 1:vt.rendererUrl=rt.string();break;case 2:vt.version=rt.string();break;default:rt.skipType(Mt&7);break}}return vt},fromJSON($){return{rendererUrl:Wt($.rendererUrl)?String($.rendererUrl):void 0,version:Wt($.version)?String($.version):void 0}},toJSON($){const tt={};return $.rendererUrl!==void 0&&(tt.rendererUrl=$.rendererUrl),$.version!==void 0&&(tt.version=$.version),tt},fromPartial($){var tt,rt;const Nt=hn();return Nt.rendererUrl=(tt=$.rendererUrl)!==null&&tt!==void 0?tt:void 0,Nt.version=(rt=$.version)!==null&&rt!==void 0?rt:void 0,Nt}};function Rn(){return{rendererUrl:void 0,selectedLayoutId:void 0,debug:void 0}}a.SceneComposition={encode($,tt=b.default.Writer.create()){return $.rendererUrl!==void 0&&tt.uint32(10).string($.rendererUrl),$.selectedLayoutId!==void 0&&tt.uint32(18).string($.selectedLayoutId),$.debug!==void 0&&tt.uint32(24).bool($.debug),tt},decode($,tt){const rt=$ instanceof b.default.Reader?$:new b.default.Reader($);let Nt=tt===void 0?rt.len:rt.pos+tt;const vt=Rn();for(;rt.pos<Nt;){const Mt=rt.uint32();switch(Mt>>>3){case 1:vt.rendererUrl=rt.string();break;case 2:vt.selectedLayoutId=rt.string();break;case 3:vt.debug=rt.bool();break;default:rt.skipType(Mt&7);break}}return vt},fromJSON($){return{rendererUrl:Wt($.rendererUrl)?String($.rendererUrl):void 0,selectedLayoutId:Wt($.selectedLayoutId)?String($.selectedLayoutId):void 0,debug:Wt($.debug)?!!$.debug:void 0}},toJSON($){const tt={};return $.rendererUrl!==void 0&&(tt.rendererUrl=$.rendererUrl),$.selectedLayoutId!==void 0&&(tt.selectedLayoutId=$.selectedLayoutId),$.debug!==void 0&&(tt.debug=$.debug),tt},fromPartial($){var tt,rt,Nt;const vt=Rn();return vt.rendererUrl=(tt=$.rendererUrl)!==null&&tt!==void 0?tt:void 0,vt.selectedLayoutId=(rt=$.selectedLayoutId)!==null&&rt!==void 0?rt:void 0,vt.debug=(Nt=$.debug)!==null&&Nt!==void 0?Nt:void 0,vt}};function On(){return{url:""}}a.ExternalComposition={encode($,tt=b.default.Writer.create()){return $.url!==""&&tt.uint32(10).string($.url),tt},decode($,tt){const rt=$ instanceof b.default.Reader?$:new b.default.Reader($);let Nt=tt===void 0?rt.len:rt.pos+tt;const vt=On();for(;rt.pos<Nt;){const Mt=rt.uint32();switch(Mt>>>3){case 1:vt.url=rt.string();break;default:rt.skipType(Mt&7);break}}return vt},fromJSON($){return{url:Wt($.url)?String($.url):""}},toJSON($){const tt={};return $.url!==void 0&&(tt.url=$.url),tt},fromPartial($){var tt;const rt=On();return rt.url=(tt=$.url)!==null&&tt!==void 0?tt:"",rt}};function Tn(){return{external:void 0,studioSdk:void 0,scene:void 0}}a.Composition={encode($,tt=b.default.Writer.create()){return $.external!==void 0&&a.ExternalComposition.encode($.external,tt.uint32(10).fork()).ldelim(),$.studioSdk!==void 0&&a.StudioSdkComposition.encode($.studioSdk,tt.uint32(18).fork()).ldelim(),$.scene!==void 0&&a.SceneComposition.encode($.scene,tt.uint32(34).fork()).ldelim(),tt},decode($,tt){const rt=$ instanceof b.default.Reader?$:new b.default.Reader($);let Nt=tt===void 0?rt.len:rt.pos+tt;const vt=Tn();for(;rt.pos<Nt;){const Mt=rt.uint32();switch(Mt>>>3){case 1:vt.external=a.ExternalComposition.decode(rt,rt.uint32());break;case 2:vt.studioSdk=a.StudioSdkComposition.decode(rt,rt.uint32());break;case 4:vt.scene=a.SceneComposition.decode(rt,rt.uint32());break;default:rt.skipType(Mt&7);break}}return vt},fromJSON($){return{external:Wt($.external)?a.ExternalComposition.fromJSON($.external):void 0,studioSdk:Wt($.studioSdk)?a.StudioSdkComposition.fromJSON($.studioSdk):void 0,scene:Wt($.scene)?a.SceneComposition.fromJSON($.scene):void 0}},toJSON($){const tt={};return $.external!==void 0&&(tt.external=$.external?a.ExternalComposition.toJSON($.external):void 0),$.studioSdk!==void 0&&(tt.studioSdk=$.studioSdk?a.StudioSdkComposition.toJSON($.studioSdk):void 0),$.scene!==void 0&&(tt.scene=$.scene?a.SceneComposition.toJSON($.scene):void 0),tt},fromPartial($){const tt=Tn();return tt.external=$.external!==void 0&&$.external!==null?a.ExternalComposition.fromPartial($.external):void 0,tt.studioSdk=$.studioSdk!==void 0&&$.studioSdk!==null?a.StudioSdkComposition.fromPartial($.studioSdk):void 0,tt.scene=$.scene!==void 0&&$.scene!==null?a.SceneComposition.fromPartial($.scene):void 0,tt}};function wn(){return{enabled:void 0}}a.HostedWebRtc={encode($,tt=b.default.Writer.create()){return $.enabled!==void 0&&tt.uint32(8).bool($.enabled),tt},decode($,tt){const rt=$ instanceof b.default.Reader?$:new b.default.Reader($);let Nt=tt===void 0?rt.len:rt.pos+tt;const vt=wn();for(;rt.pos<Nt;){const Mt=rt.uint32();switch(Mt>>>3){case 1:vt.enabled=rt.bool();break;default:rt.skipType(Mt&7);break}}return vt},fromJSON($){return{enabled:Wt($.enabled)?!!$.enabled:void 0}},toJSON($){const tt={};return $.enabled!==void 0&&(tt.enabled=$.enabled),tt},fromPartial($){var tt;const rt=wn();return rt.enabled=(tt=$.enabled)!==null&&tt!==void 0?tt:void 0,rt}};function Fn(){return{hosted:void 0}}a.WebRtc={encode($,tt=b.default.Writer.create()){return $.hosted!==void 0&&a.HostedWebRtc.encode($.hosted,tt.uint32(10).fork()).ldelim(),tt},decode($,tt){const rt=$ instanceof b.default.Reader?$:new b.default.Reader($);let Nt=tt===void 0?rt.len:rt.pos+tt;const vt=Fn();for(;rt.pos<Nt;){const Mt=rt.uint32();switch(Mt>>>3){case 1:vt.hosted=a.HostedWebRtc.decode(rt,rt.uint32());break;default:rt.skipType(Mt&7);break}}return vt},fromJSON($){return{hosted:Wt($.hosted)?a.HostedWebRtc.fromJSON($.hosted):void 0}},toJSON($){const tt={};return $.hosted!==void 0&&(tt.hosted=$.hosted?a.HostedWebRtc.toJSON($.hosted):void 0),tt},fromPartial($){const tt=Fn();return tt.hosted=$.hosted!==void 0&&$.hosted!==null?a.HostedWebRtc.fromPartial($.hosted):void 0,tt}};function $n(){return{accessToken:"",participantId:void 0}}a.WebRtcAccess={encode($,tt=b.default.Writer.create()){return $.accessToken!==""&&tt.uint32(10).string($.accessToken),$.participantId!==void 0&&tt.uint32(26).string($.participantId),tt},decode($,tt){const rt=$ instanceof b.default.Reader?$:new b.default.Reader($);let Nt=tt===void 0?rt.len:rt.pos+tt;const vt=$n();for(;rt.pos<Nt;){const Mt=rt.uint32();switch(Mt>>>3){case 1:vt.accessToken=rt.string();break;case 3:vt.participantId=rt.string();break;default:rt.skipType(Mt&7);break}}return vt},fromJSON($){return{accessToken:Wt($.accessToken)?String($.accessToken):"",participantId:Wt($.participantId)?String($.participantId):void 0}},toJSON($){const tt={};return $.accessToken!==void 0&&(tt.accessToken=$.accessToken),$.participantId!==void 0&&(tt.participantId=$.participantId),tt},fromPartial($){var tt,rt;const Nt=$n();return Nt.accessToken=(tt=$.accessToken)!==null&&tt!==void 0?tt:"",Nt.participantId=(rt=$.participantId)!==null&&rt!==void 0?rt:void 0,Nt}};function ir(){return{latitude:0,longitude:0}}a.LatLong={encode($,tt=b.default.Writer.create()){return $.latitude!==0&&tt.uint32(9).double($.latitude),$.longitude!==0&&tt.uint32(17).double($.longitude),tt},decode($,tt){const rt=$ instanceof b.default.Reader?$:new b.default.Reader($);let Nt=tt===void 0?rt.len:rt.pos+tt;const vt=ir();for(;rt.pos<Nt;){const Mt=rt.uint32();switch(Mt>>>3){case 1:vt.latitude=rt.double();break;case 2:vt.longitude=rt.double();break;default:rt.skipType(Mt&7);break}}return vt},fromJSON($){return{latitude:Wt($.latitude)?Number($.latitude):0,longitude:Wt($.longitude)?Number($.longitude):0}},toJSON($){const tt={};return $.latitude!==void 0&&(tt.latitude=$.latitude),$.longitude!==void 0&&(tt.longitude=$.longitude),tt},fromPartial($){var tt,rt;const Nt=ir();return Nt.latitude=(tt=$.latitude)!==null&&tt!==void 0?tt:0,Nt.longitude=(rt=$.longitude)!==null&&rt!==void 0?rt:0,Nt}};function or(){return{collectionId:"",projectId:"",broadcastId:void 0,duration:void 0,start:void 0,stop:void 0,phase:tn.PROJECT_BROADCAST_PHASE_UNSPECIFIED,region:void 0,datacenter:void 0}}a.ProjectBroadcastStatus={encode($,tt=b.default.Writer.create()){return $.collectionId!==""&&tt.uint32(10).string($.collectionId),$.projectId!==""&&tt.uint32(18).string($.projectId),$.broadcastId!==void 0&&tt.uint32(26).string($.broadcastId),$.duration!==void 0&&tt.uint32(32).uint32($.duration),$.start!==void 0&&_e.Timestamp.encode(yr($.start),tt.uint32(42).fork()).ldelim(),$.stop!==void 0&&_e.Timestamp.encode(yr($.stop),tt.uint32(50).fork()).ldelim(),$.phase!==tn.PROJECT_BROADCAST_PHASE_UNSPECIFIED&&tt.uint32(56).int32(In($.phase)),$.region!==void 0&&tt.uint32(64).int32($t($.region)),$.datacenter!==void 0&&tt.uint32(74).string($.datacenter),tt},decode($,tt){const rt=$ instanceof b.default.Reader?$:new b.default.Reader($);let Nt=tt===void 0?rt.len:rt.pos+tt;const vt=or();for(;rt.pos<Nt;){const Mt=rt.uint32();switch(Mt>>>3){case 1:vt.collectionId=rt.string();break;case 2:vt.projectId=rt.string();break;case 3:vt.broadcastId=rt.string();break;case 4:vt.duration=rt.uint32();break;case 5:vt.start=Sr(_e.Timestamp.decode(rt,rt.uint32()));break;case 6:vt.stop=Sr(_e.Timestamp.decode(rt,rt.uint32()));break;case 7:vt.phase=pn(rt.int32());break;case 8:vt.region=Dt(rt.int32());break;case 9:vt.datacenter=rt.string();break;default:rt.skipType(Mt&7);break}}return vt},fromJSON($){return{collectionId:Wt($.collectionId)?String($.collectionId):"",projectId:Wt($.projectId)?String($.projectId):"",broadcastId:Wt($.broadcastId)?String($.broadcastId):void 0,duration:Wt($.duration)?Number($.duration):void 0,start:Wt($.start)?String($.start):void 0,stop:Wt($.stop)?String($.stop):void 0,phase:Wt($.phase)?pn($.phase):tn.PROJECT_BROADCAST_PHASE_UNSPECIFIED,region:Wt($.region)?Dt($.region):void 0,datacenter:Wt($.datacenter)?String($.datacenter):void 0}},toJSON($){const tt={};return $.collectionId!==void 0&&(tt.collectionId=$.collectionId),$.projectId!==void 0&&(tt.projectId=$.projectId),$.broadcastId!==void 0&&(tt.broadcastId=$.broadcastId),$.duration!==void 0&&(tt.duration=Math.round($.duration)),$.start!==void 0&&(tt.start=$.start),$.stop!==void 0&&(tt.stop=$.stop),$.phase!==void 0&&(tt.phase=yn($.phase)),$.region!==void 0&&(tt.region=$.region!==void 0?Ot($.region):void 0),$.datacenter!==void 0&&(tt.datacenter=$.datacenter),tt},fromPartial($){var tt,rt,Nt,vt,Mt,Pn,Un,Gn,Hn;const xn=or();return xn.collectionId=(tt=$.collectionId)!==null&&tt!==void 0?tt:"",xn.projectId=(rt=$.projectId)!==null&&rt!==void 0?rt:"",xn.broadcastId=(Nt=$.broadcastId)!==null&&Nt!==void 0?Nt:void 0,xn.duration=(vt=$.duration)!==null&&vt!==void 0?vt:void 0,xn.start=(Mt=$.start)!==null&&Mt!==void 0?Mt:void 0,xn.stop=(Pn=$.stop)!==null&&Pn!==void 0?Pn:void 0,xn.phase=(Un=$.phase)!==null&&Un!==void 0?Un:tn.PROJECT_BROADCAST_PHASE_UNSPECIFIED,xn.region=(Gn=$.region)!==null&&Gn!==void 0?Gn:void 0,xn.datacenter=(Hn=$.datacenter)!==null&&Hn!==void 0?Hn:void 0,xn}};function rr(){return{collectionId:"",sourceId:"",metadata:void 0,preview:void 0,address:void 0}}a.Source={encode($,tt=b.default.Writer.create()){return $.collectionId!==""&&tt.uint32(10).string($.collectionId),$.sourceId!==""&&tt.uint32(18).string($.sourceId),$.metadata!==void 0&&j.Value.encode(j.Value.wrap($.metadata),tt.uint32(26).fork()).ldelim(),$.preview!==void 0&&a.PreviewAddress.encode($.preview,tt.uint32(34).fork()).ldelim(),$.address!==void 0&&a.SourceAddress.encode($.address,tt.uint32(50).fork()).ldelim(),tt},decode($,tt){const rt=$ instanceof b.default.Reader?$:new b.default.Reader($);let Nt=tt===void 0?rt.len:rt.pos+tt;const vt=rr();for(;rt.pos<Nt;){const Mt=rt.uint32();switch(Mt>>>3){case 1:vt.collectionId=rt.string();break;case 2:vt.sourceId=rt.string();break;case 3:vt.metadata=j.Value.unwrap(j.Value.decode(rt,rt.uint32()));break;case 4:vt.preview=a.PreviewAddress.decode(rt,rt.uint32());break;case 6:vt.address=a.SourceAddress.decode(rt,rt.uint32());break;default:rt.skipType(Mt&7);break}}return vt},fromJSON($){return{collectionId:Wt($.collectionId)?String($.collectionId):"",sourceId:Wt($.sourceId)?String($.sourceId):"",metadata:Wt($==null?void 0:$.metadata)?$.metadata:void 0,preview:Wt($.preview)?a.PreviewAddress.fromJSON($.preview):void 0,address:Wt($.address)?a.SourceAddress.fromJSON($.address):void 0}},toJSON($){const tt={};return $.collectionId!==void 0&&(tt.collectionId=$.collectionId),$.sourceId!==void 0&&(tt.sourceId=$.sourceId),$.metadata!==void 0&&(tt.metadata=$.metadata),$.preview!==void 0&&(tt.preview=$.preview?a.PreviewAddress.toJSON($.preview):void 0),$.address!==void 0&&(tt.address=$.address?a.SourceAddress.toJSON($.address):void 0),tt},fromPartial($){var tt,rt,Nt;const vt=rr();return vt.collectionId=(tt=$.collectionId)!==null&&tt!==void 0?tt:"",vt.sourceId=(rt=$.sourceId)!==null&&rt!==void 0?rt:"",vt.metadata=(Nt=$.metadata)!==null&&Nt!==void 0?Nt:void 0,vt.preview=$.preview!==void 0&&$.preview!==null?a.PreviewAddress.fromPartial($.preview):void 0,vt.address=$.address!==void 0&&$.address!==null?a.SourceAddress.fromPartial($.address):void 0,vt}};function nr(){return{collectionId:"",projectId:"",destinationId:"",metadata:void 0,enabled:void 0,address:void 0,timeout:void 0}}a.Destination={encode($,tt=b.default.Writer.create()){return $.collectionId!==""&&tt.uint32(10).string($.collectionId),$.projectId!==""&&tt.uint32(18).string($.projectId),$.destinationId!==""&&tt.uint32(26).string($.destinationId),$.metadata!==void 0&&j.Value.encode(j.Value.wrap($.metadata),tt.uint32(34).fork()).ldelim(),$.enabled!==void 0&&tt.uint32(40).bool($.enabled),$.address!==void 0&&a.DestinationAddress.encode($.address,tt.uint32(50).fork()).ldelim(),$.timeout!==void 0&&tt.uint32(56).uint32($.timeout),tt},decode($,tt){const rt=$ instanceof b.default.Reader?$:new b.default.Reader($);let Nt=tt===void 0?rt.len:rt.pos+tt;const vt=nr();for(;rt.pos<Nt;){const Mt=rt.uint32();switch(Mt>>>3){case 1:vt.collectionId=rt.string();break;case 2:vt.projectId=rt.string();break;case 3:vt.destinationId=rt.string();break;case 4:vt.metadata=j.Value.unwrap(j.Value.decode(rt,rt.uint32()));break;case 5:vt.enabled=rt.bool();break;case 6:vt.address=a.DestinationAddress.decode(rt,rt.uint32());break;case 7:vt.timeout=rt.uint32();break;default:rt.skipType(Mt&7);break}}return vt},fromJSON($){return{collectionId:Wt($.collectionId)?String($.collectionId):"",projectId:Wt($.projectId)?String($.projectId):"",destinationId:Wt($.destinationId)?String($.destinationId):"",metadata:Wt($==null?void 0:$.metadata)?$.metadata:void 0,enabled:Wt($.enabled)?!!$.enabled:void 0,address:Wt($.address)?a.DestinationAddress.fromJSON($.address):void 0,timeout:Wt($.timeout)?Number($.timeout):void 0}},toJSON($){const tt={};return $.collectionId!==void 0&&(tt.collectionId=$.collectionId),$.projectId!==void 0&&(tt.projectId=$.projectId),$.destinationId!==void 0&&(tt.destinationId=$.destinationId),$.metadata!==void 0&&(tt.metadata=$.metadata),$.enabled!==void 0&&(tt.enabled=$.enabled),$.address!==void 0&&(tt.address=$.address?a.DestinationAddress.toJSON($.address):void 0),$.timeout!==void 0&&(tt.timeout=Math.round($.timeout)),tt},fromPartial($){var tt,rt,Nt,vt,Mt,Pn;const Un=nr();return Un.collectionId=(tt=$.collectionId)!==null&&tt!==void 0?tt:"",Un.projectId=(rt=$.projectId)!==null&&rt!==void 0?rt:"",Un.destinationId=(Nt=$.destinationId)!==null&&Nt!==void 0?Nt:"",Un.metadata=(vt=$.metadata)!==null&&vt!==void 0?vt:void 0,Un.enabled=(Mt=$.enabled)!==null&&Mt!==void 0?Mt:void 0,Un.address=$.address!==void 0&&$.address!==null?a.DestinationAddress.fromPartial($.address):void 0,Un.timeout=(Pn=$.timeout)!==null&&Pn!==void 0?Pn:void 0,Un}};function sr(){return{collectionId:"",projectId:"",metadata:void 0,rendering:void 0,encoding:void 0,sources:[],destinations:[],composition:void 0,maxDuration:void 0,webrtc:void 0,triggers:[],location:void 0,guestCodes:[]}}a.Project={encode($,tt=b.default.Writer.create()){$.collectionId!==""&&tt.uint32(10).string($.collectionId),$.projectId!==""&&tt.uint32(18).string($.projectId),$.metadata!==void 0&&j.Value.encode(j.Value.wrap($.metadata),tt.uint32(26).fork()).ldelim(),$.rendering!==void 0&&a.Rendering.encode($.rendering,tt.uint32(34).fork()).ldelim(),$.encoding!==void 0&&a.Encoding.encode($.encoding,tt.uint32(42).fork()).ldelim();for(const rt of $.sources)a.Source.encode(rt,tt.uint32(50).fork()).ldelim();for(const rt of $.destinations)a.Destination.encode(rt,tt.uint32(58).fork()).ldelim();$.composition!==void 0&&a.Composition.encode($.composition,tt.uint32(66).fork()).ldelim(),$.maxDuration!==void 0&&tt.uint32(72).uint32($.maxDuration),$.webrtc!==void 0&&a.WebRtc.encode($.webrtc,tt.uint32(82).fork()).ldelim();for(const rt of $.triggers)a.ProjectTrigger.encode(rt,tt.uint32(90).fork()).ldelim();$.location!==void 0&&a.LatLong.encode($.location,tt.uint32(98).fork()).ldelim();for(const rt of $.guestCodes)a.GuestCode.encode(rt,tt.uint32(106).fork()).ldelim();return tt},decode($,tt){const rt=$ instanceof b.default.Reader?$:new b.default.Reader($);let Nt=tt===void 0?rt.len:rt.pos+tt;const vt=sr();for(;rt.pos<Nt;){const Mt=rt.uint32();switch(Mt>>>3){case 1:vt.collectionId=rt.string();break;case 2:vt.projectId=rt.string();break;case 3:vt.metadata=j.Value.unwrap(j.Value.decode(rt,rt.uint32()));break;case 4:vt.rendering=a.Rendering.decode(rt,rt.uint32());break;case 5:vt.encoding=a.Encoding.decode(rt,rt.uint32());break;case 6:vt.sources.push(a.Source.decode(rt,rt.uint32()));break;case 7:vt.destinations.push(a.Destination.decode(rt,rt.uint32()));break;case 8:vt.composition=a.Composition.decode(rt,rt.uint32());break;case 9:vt.maxDuration=rt.uint32();break;case 10:vt.webrtc=a.WebRtc.decode(rt,rt.uint32());break;case 11:vt.triggers.push(a.ProjectTrigger.decode(rt,rt.uint32()));break;case 12:vt.location=a.LatLong.decode(rt,rt.uint32());break;case 13:vt.guestCodes.push(a.GuestCode.decode(rt,rt.uint32()));break;default:rt.skipType(Mt&7);break}}return vt},fromJSON($){return{collectionId:Wt($.collectionId)?String($.collectionId):"",projectId:Wt($.projectId)?String($.projectId):"",metadata:Wt($==null?void 0:$.metadata)?$.metadata:void 0,rendering:Wt($.rendering)?a.Rendering.fromJSON($.rendering):void 0,encoding:Wt($.encoding)?a.Encoding.fromJSON($.encoding):void 0,sources:Array.isArray($==null?void 0:$.sources)?$.sources.map(tt=>a.Source.fromJSON(tt)):[],destinations:Array.isArray($==null?void 0:$.destinations)?$.destinations.map(tt=>a.Destination.fromJSON(tt)):[],composition:Wt($.composition)?a.Composition.fromJSON($.composition):void 0,maxDuration:Wt($.maxDuration)?Number($.maxDuration):void 0,webrtc:Wt($.webrtc)?a.WebRtc.fromJSON($.webrtc):void 0,triggers:Array.isArray($==null?void 0:$.triggers)?$.triggers.map(tt=>a.ProjectTrigger.fromJSON(tt)):[],location:Wt($.location)?a.LatLong.fromJSON($.location):void 0,guestCodes:Array.isArray($==null?void 0:$.guestCodes)?$.guestCodes.map(tt=>a.GuestCode.fromJSON(tt)):[]}},toJSON($){const tt={};return $.collectionId!==void 0&&(tt.collectionId=$.collectionId),$.projectId!==void 0&&(tt.projectId=$.projectId),$.metadata!==void 0&&(tt.metadata=$.metadata),$.rendering!==void 0&&(tt.rendering=$.rendering?a.Rendering.toJSON($.rendering):void 0),$.encoding!==void 0&&(tt.encoding=$.encoding?a.Encoding.toJSON($.encoding):void 0),$.sources?tt.sources=$.sources.map(rt=>rt?a.Source.toJSON(rt):void 0):tt.sources=[],$.destinations?tt.destinations=$.destinations.map(rt=>rt?a.Destination.toJSON(rt):void 0):tt.destinations=[],$.composition!==void 0&&(tt.composition=$.composition?a.Composition.toJSON($.composition):void 0),$.maxDuration!==void 0&&(tt.maxDuration=Math.round($.maxDuration)),$.webrtc!==void 0&&(tt.webrtc=$.webrtc?a.WebRtc.toJSON($.webrtc):void 0),$.triggers?tt.triggers=$.triggers.map(rt=>rt?a.ProjectTrigger.toJSON(rt):void 0):tt.triggers=[],$.location!==void 0&&(tt.location=$.location?a.LatLong.toJSON($.location):void 0),$.guestCodes?tt.guestCodes=$.guestCodes.map(rt=>rt?a.GuestCode.toJSON(rt):void 0):tt.guestCodes=[],tt},fromPartial($){var tt,rt,Nt,vt,Mt,Pn,Un,Gn;const Hn=sr();return Hn.collectionId=(tt=$.collectionId)!==null&&tt!==void 0?tt:"",Hn.projectId=(rt=$.projectId)!==null&&rt!==void 0?rt:"",Hn.metadata=(Nt=$.metadata)!==null&&Nt!==void 0?Nt:void 0,Hn.rendering=$.rendering!==void 0&&$.rendering!==null?a.Rendering.fromPartial($.rendering):void 0,Hn.encoding=$.encoding!==void 0&&$.encoding!==null?a.Encoding.fromPartial($.encoding):void 0,Hn.sources=((vt=$.sources)===null||vt===void 0?void 0:vt.map(xn=>a.Source.fromPartial(xn)))||[],Hn.destinations=((Mt=$.destinations)===null||Mt===void 0?void 0:Mt.map(xn=>a.Destination.fromPartial(xn)))||[],Hn.composition=$.composition!==void 0&&$.composition!==null?a.Composition.fromPartial($.composition):void 0,Hn.maxDuration=(Pn=$.maxDuration)!==null&&Pn!==void 0?Pn:void 0,Hn.webrtc=$.webrtc!==void 0&&$.webrtc!==null?a.WebRtc.fromPartial($.webrtc):void 0,Hn.triggers=((Un=$.triggers)===null||Un===void 0?void 0:Un.map(xn=>a.ProjectTrigger.fromPartial(xn)))||[],Hn.location=$.location!==void 0&&$.location!==null?a.LatLong.fromPartial($.location):void 0,Hn.guestCodes=((Gn=$.guestCodes)===null||Gn===void 0?void 0:Gn.map(xn=>a.GuestCode.fromPartial(xn)))||[],Hn}};function Er(){return{collectionId:"",metadata:void 0,projects:[],sources:[]}}a.Collection={encode($,tt=b.default.Writer.create()){$.collectionId!==""&&tt.uint32(10).string($.collectionId),$.metadata!==void 0&&j.Value.encode(j.Value.wrap($.metadata),tt.uint32(18).fork()).ldelim();for(const rt of $.projects)a.Project.encode(rt,tt.uint32(26).fork()).ldelim();for(const rt of $.sources)a.Source.encode(rt,tt.uint32(34).fork()).ldelim();return tt},decode($,tt){const rt=$ instanceof b.default.Reader?$:new b.default.Reader($);let Nt=tt===void 0?rt.len:rt.pos+tt;const vt=Er();for(;rt.pos<Nt;){const Mt=rt.uint32();switch(Mt>>>3){case 1:vt.collectionId=rt.string();break;case 2:vt.metadata=j.Value.unwrap(j.Value.decode(rt,rt.uint32()));break;case 3:vt.projects.push(a.Project.decode(rt,rt.uint32()));break;case 4:vt.sources.push(a.Source.decode(rt,rt.uint32()));break;default:rt.skipType(Mt&7);break}}return vt},fromJSON($){return{collectionId:Wt($.collectionId)?String($.collectionId):"",metadata:Wt($==null?void 0:$.metadata)?$.metadata:void 0,projects:Array.isArray($==null?void 0:$.projects)?$.projects.map(tt=>a.Project.fromJSON(tt)):[],sources:Array.isArray($==null?void 0:$.sources)?$.sources.map(tt=>a.Source.fromJSON(tt)):[]}},toJSON($){const tt={};return $.collectionId!==void 0&&(tt.collectionId=$.collectionId),$.metadata!==void 0&&(tt.metadata=$.metadata),$.projects?tt.projects=$.projects.map(rt=>rt?a.Project.toJSON(rt):void 0):tt.projects=[],$.sources?tt.sources=$.sources.map(rt=>rt?a.Source.toJSON(rt):void 0):tt.sources=[],tt},fromPartial($){var tt,rt,Nt,vt;const Mt=Er();return Mt.collectionId=(tt=$.collectionId)!==null&&tt!==void 0?tt:"",Mt.metadata=(rt=$.metadata)!==null&&rt!==void 0?rt:void 0,Mt.projects=((Nt=$.projects)===null||Nt===void 0?void 0:Nt.map(Pn=>a.Project.fromPartial(Pn)))||[],Mt.sources=((vt=$.sources)===null||vt===void 0?void 0:vt.map(Pn=>a.Source.fromPartial(Pn)))||[],Mt}};function br(){return{metadata:void 0}}a.CreateCollectionRequest={encode($,tt=b.default.Writer.create()){return $.metadata!==void 0&&j.Value.encode(j.Value.wrap($.metadata),tt.uint32(10).fork()).ldelim(),tt},decode($,tt){const rt=$ instanceof b.default.Reader?$:new b.default.Reader($);let Nt=tt===void 0?rt.len:rt.pos+tt;const vt=br();for(;rt.pos<Nt;){const Mt=rt.uint32();switch(Mt>>>3){case 1:vt.metadata=j.Value.unwrap(j.Value.decode(rt,rt.uint32()));break;default:rt.skipType(Mt&7);break}}return vt},fromJSON($){return{metadata:Wt($==null?void 0:$.metadata)?$.metadata:void 0}},toJSON($){const tt={};return $.metadata!==void 0&&(tt.metadata=$.metadata),tt},fromPartial($){var tt;const rt=br();return rt.metadata=(tt=$.metadata)!==null&&tt!==void 0?tt:void 0,rt}};function Tr(){return{collection:void 0}}a.CreateCollectionResponse={encode($,tt=b.default.Writer.create()){return $.collection!==void 0&&a.Collection.encode($.collection,tt.uint32(10).fork()).ldelim(),tt},decode($,tt){const rt=$ instanceof b.default.Reader?$:new b.default.Reader($);let Nt=tt===void 0?rt.len:rt.pos+tt;const vt=Tr();for(;rt.pos<Nt;){const Mt=rt.uint32();switch(Mt>>>3){case 1:vt.collection=a.Collection.decode(rt,rt.uint32());break;default:rt.skipType(Mt&7);break}}return vt},fromJSON($){return{collection:Wt($.collection)?a.Collection.fromJSON($.collection):void 0}},toJSON($){const tt={};return $.collection!==void 0&&(tt.collection=$.collection?a.Collection.toJSON($.collection):void 0),tt},fromPartial($){const tt=Tr();return tt.collection=$.collection!==void 0&&$.collection!==null?a.Collection.fromPartial($.collection):void 0,tt}};function _r(){return{collectionId:"",populateProjects:void 0,populateSources:void 0}}a.GetCollectionRequest={encode($,tt=b.default.Writer.create()){return $.collectionId!==""&&tt.uint32(10).string($.collectionId),$.populateProjects!==void 0&&tt.uint32(16).bool($.populateProjects),$.populateSources!==void 0&&tt.uint32(24).bool($.populateSources),tt},decode($,tt){const rt=$ instanceof b.default.Reader?$:new b.default.Reader($);let Nt=tt===void 0?rt.len:rt.pos+tt;const vt=_r();for(;rt.pos<Nt;){const Mt=rt.uint32();switch(Mt>>>3){case 1:vt.collectionId=rt.string();break;case 2:vt.populateProjects=rt.bool();break;case 3:vt.populateSources=rt.bool();break;default:rt.skipType(Mt&7);break}}return vt},fromJSON($){return{collectionId:Wt($.collectionId)?String($.collectionId):"",populateProjects:Wt($.populateProjects)?!!$.populateProjects:void 0,populateSources:Wt($.populateSources)?!!$.populateSources:void 0}},toJSON($){const tt={};return $.collectionId!==void 0&&(tt.collectionId=$.collectionId),$.populateProjects!==void 0&&(tt.populateProjects=$.populateProjects),$.populateSources!==void 0&&(tt.populateSources=$.populateSources),tt},fromPartial($){var tt,rt,Nt;const vt=_r();return vt.collectionId=(tt=$.collectionId)!==null&&tt!==void 0?tt:"",vt.populateProjects=(rt=$.populateProjects)!==null&&rt!==void 0?rt:void 0,vt.populateSources=(Nt=$.populateSources)!==null&&Nt!==void 0?Nt:void 0,vt}};function kr(){return{collection:void 0}}a.GetCollectionResponse={encode($,tt=b.default.Writer.create()){return $.collection!==void 0&&a.Collection.encode($.collection,tt.uint32(10).fork()).ldelim(),tt},decode($,tt){const rt=$ instanceof b.default.Reader?$:new b.default.Reader($);let Nt=tt===void 0?rt.len:rt.pos+tt;const vt=kr();for(;rt.pos<Nt;){const Mt=rt.uint32();switch(Mt>>>3){case 1:vt.collection=a.Collection.decode(rt,rt.uint32());break;default:rt.skipType(Mt&7);break}}return vt},fromJSON($){return{collection:Wt($.collection)?a.Collection.fromJSON($.collection):void 0}},toJSON($){const tt={};return $.collection!==void 0&&(tt.collection=$.collection?a.Collection.toJSON($.collection):void 0),tt},fromPartial($){const tt=kr();return tt.collection=$.collection!==void 0&&$.collection!==null?a.Collection.fromPartial($.collection):void 0,tt}};function Ir(){return{collectionId:"",updateMask:void 0,metadata:void 0}}a.UpdateCollectionRequest={encode($,tt=b.default.Writer.create()){return $.collectionId!==""&&tt.uint32(10).string($.collectionId),$.updateMask!==void 0&&k.FieldMask.encode(k.FieldMask.wrap($.updateMask),tt.uint32(18).fork()).ldelim(),$.metadata!==void 0&&j.Value.encode(j.Value.wrap($.metadata),tt.uint32(26).fork()).ldelim(),tt},decode($,tt){const rt=$ instanceof b.default.Reader?$:new b.default.Reader($);let Nt=tt===void 0?rt.len:rt.pos+tt;const vt=Ir();for(;rt.pos<Nt;){const Mt=rt.uint32();switch(Mt>>>3){case 1:vt.collectionId=rt.string();break;case 2:vt.updateMask=k.FieldMask.unwrap(k.FieldMask.decode(rt,rt.uint32()));break;case 3:vt.metadata=j.Value.unwrap(j.Value.decode(rt,rt.uint32()));break;default:rt.skipType(Mt&7);break}}return vt},fromJSON($){return{collectionId:Wt($.collectionId)?String($.collectionId):"",updateMask:Wt($.updateMask)?k.FieldMask.unwrap(k.FieldMask.fromJSON($.updateMask)):void 0,metadata:Wt($==null?void 0:$.metadata)?$.metadata:void 0}},toJSON($){const tt={};return $.collectionId!==void 0&&(tt.collectionId=$.collectionId),$.updateMask!==void 0&&(tt.updateMask=k.FieldMask.toJSON(k.FieldMask.wrap($.updateMask))),$.metadata!==void 0&&(tt.metadata=$.metadata),tt},fromPartial($){var tt,rt,Nt;const vt=Ir();return vt.collectionId=(tt=$.collectionId)!==null&&tt!==void 0?tt:"",vt.updateMask=(rt=$.updateMask)!==null&&rt!==void 0?rt:void 0,vt.metadata=(Nt=$.metadata)!==null&&Nt!==void 0?Nt:void 0,vt}};function Cr(){return{collection:void 0}}a.UpdateCollectionResponse={encode($,tt=b.default.Writer.create()){return $.collection!==void 0&&a.Collection.encode($.collection,tt.uint32(10).fork()).ldelim(),tt},decode($,tt){const rt=$ instanceof b.default.Reader?$:new b.default.Reader($);let Nt=tt===void 0?rt.len:rt.pos+tt;const vt=Cr();for(;rt.pos<Nt;){const Mt=rt.uint32();switch(Mt>>>3){case 1:vt.collection=a.Collection.decode(rt,rt.uint32());break;default:rt.skipType(Mt&7);break}}return vt},fromJSON($){return{collection:Wt($.collection)?a.Collection.fromJSON($.collection):void 0}},toJSON($){const tt={};return $.collection!==void 0&&(tt.collection=$.collection?a.Collection.toJSON($.collection):void 0),tt},fromPartial($){const tt=Cr();return tt.collection=$.collection!==void 0&&$.collection!==null?a.Collection.fromPartial($.collection):void 0,tt}};function Rr(){return{collectionId:"",force:void 0}}a.DeleteCollectionRequest={encode($,tt=b.default.Writer.create()){return $.collectionId!==""&&tt.uint32(10).string($.collectionId),$.force!==void 0&&tt.uint32(16).bool($.force),tt},decode($,tt){const rt=$ instanceof b.default.Reader?$:new b.default.Reader($);let Nt=tt===void 0?rt.len:rt.pos+tt;const vt=Rr();for(;rt.pos<Nt;){const Mt=rt.uint32();switch(Mt>>>3){case 1:vt.collectionId=rt.string();break;case 2:vt.force=rt.bool();break;default:rt.skipType(Mt&7);break}}return vt},fromJSON($){return{collectionId:Wt($.collectionId)?String($.collectionId):"",force:Wt($.force)?!!$.force:void 0}},toJSON($){const tt={};return $.collectionId!==void 0&&(tt.collectionId=$.collectionId),$.force!==void 0&&(tt.force=$.force),tt},fromPartial($){var tt,rt;const Nt=Rr();return Nt.collectionId=(tt=$.collectionId)!==null&&tt!==void 0?tt:"",Nt.force=(rt=$.force)!==null&&rt!==void 0?rt:void 0,Nt}};function Or(){return{sourcesDeleted:0,projectsDeleted:0,projectIdsStopped:[]}}a.DeleteCollectionResponse={encode($,tt=b.default.Writer.create()){$.sourcesDeleted!==0&&tt.uint32(8).uint32($.sourcesDeleted),$.projectsDeleted!==0&&tt.uint32(16).uint32($.projectsDeleted);for(const rt of $.projectIdsStopped)tt.uint32(26).string(rt);return tt},decode($,tt){const rt=$ instanceof b.default.Reader?$:new b.default.Reader($);let Nt=tt===void 0?rt.len:rt.pos+tt;const vt=Or();for(;rt.pos<Nt;){const Mt=rt.uint32();switch(Mt>>>3){case 1:vt.sourcesDeleted=rt.uint32();break;case 2:vt.projectsDeleted=rt.uint32();break;case 3:vt.projectIdsStopped.push(rt.string());break;default:rt.skipType(Mt&7);break}}return vt},fromJSON($){return{sourcesDeleted:Wt($.sourcesDeleted)?Number($.sourcesDeleted):0,projectsDeleted:Wt($.projectsDeleted)?Number($.projectsDeleted):0,projectIdsStopped:Array.isArray($==null?void 0:$.projectIdsStopped)?$.projectIdsStopped.map(tt=>String(tt)):[]}},toJSON($){const tt={};return $.sourcesDeleted!==void 0&&(tt.sourcesDeleted=Math.round($.sourcesDeleted)),$.projectsDeleted!==void 0&&(tt.projectsDeleted=Math.round($.projectsDeleted)),$.projectIdsStopped?tt.projectIdsStopped=$.projectIdsStopped.map(rt=>rt):tt.projectIdsStopped=[],tt},fromPartial($){var tt,rt,Nt;const vt=Or();return vt.sourcesDeleted=(tt=$.sourcesDeleted)!==null&&tt!==void 0?tt:0,vt.projectsDeleted=(rt=$.projectsDeleted)!==null&&rt!==void 0?rt:0,vt.projectIdsStopped=((Nt=$.projectIdsStopped)===null||Nt===void 0?void 0:Nt.map(Mt=>Mt))||[],vt}};function Pr(){return{}}a.GetCollectionsRequest={encode($,tt=b.default.Writer.create()){return tt},decode($,tt){const rt=$ instanceof b.default.Reader?$:new b.default.Reader($);let Nt=tt===void 0?rt.len:rt.pos+tt;const vt=Pr();for(;rt.pos<Nt;){const Mt=rt.uint32();switch(Mt>>>3){default:rt.skipType(Mt&7);break}}return vt},fromJSON($){return{}},toJSON($){return{}},fromPartial($){return Pr()}};function Nr(){return{collections:[]}}a.GetCollectionsResponse={encode($,tt=b.default.Writer.create()){for(const rt of $.collections)a.Collection.encode(rt,tt.uint32(10).fork()).ldelim();return tt},decode($,tt){const rt=$ instanceof b.default.Reader?$:new b.default.Reader($);let Nt=tt===void 0?rt.len:rt.pos+tt;const vt=Nr();for(;rt.pos<Nt;){const Mt=rt.uint32();switch(Mt>>>3){case 1:vt.collections.push(a.Collection.decode(rt,rt.uint32()));break;default:rt.skipType(Mt&7);break}}return vt},fromJSON($){return{collections:Array.isArray($==null?void 0:$.collections)?$.collections.map(tt=>a.Collection.fromJSON(tt)):[]}},toJSON($){const tt={};return $.collections?tt.collections=$.collections.map(rt=>rt?a.Collection.toJSON(rt):void 0):tt.collections=[],tt},fromPartial($){var tt;const rt=Nr();return rt.collections=((tt=$.collections)===null||tt===void 0?void 0:tt.map(Nt=>a.Collection.fromPartial(Nt)))||[],rt}};function wr(){return{collectionId:"",metadata:void 0,rendering:void 0,encoding:void 0,composition:void 0,maxDuration:void 0,webrtc:void 0,location:void 0}}a.CreateProjectRequest={encode($,tt=b.default.Writer.create()){return $.collectionId!==""&&tt.uint32(10).string($.collectionId),$.metadata!==void 0&&j.Value.encode(j.Value.wrap($.metadata),tt.uint32(18).fork()).ldelim(),$.rendering!==void 0&&a.Rendering.encode($.rendering,tt.uint32(26).fork()).ldelim(),$.encoding!==void 0&&a.Encoding.encode($.encoding,tt.uint32(34).fork()).ldelim(),$.composition!==void 0&&a.Composition.encode($.composition,tt.uint32(42).fork()).ldelim(),$.maxDuration!==void 0&&tt.uint32(48).uint32($.maxDuration),$.webrtc!==void 0&&a.WebRtc.encode($.webrtc,tt.uint32(58).fork()).ldelim(),$.location!==void 0&&a.LatLong.encode($.location,tt.uint32(74).fork()).ldelim(),tt},decode($,tt){const rt=$ instanceof b.default.Reader?$:new b.default.Reader($);let Nt=tt===void 0?rt.len:rt.pos+tt;const vt=wr();for(;rt.pos<Nt;){const Mt=rt.uint32();switch(Mt>>>3){case 1:vt.collectionId=rt.string();break;case 2:vt.metadata=j.Value.unwrap(j.Value.decode(rt,rt.uint32()));break;case 3:vt.rendering=a.Rendering.decode(rt,rt.uint32());break;case 4:vt.encoding=a.Encoding.decode(rt,rt.uint32());break;case 5:vt.composition=a.Composition.decode(rt,rt.uint32());break;case 6:vt.maxDuration=rt.uint32();break;case 7:vt.webrtc=a.WebRtc.decode(rt,rt.uint32());break;case 9:vt.location=a.LatLong.decode(rt,rt.uint32());break;default:rt.skipType(Mt&7);break}}return vt},fromJSON($){return{collectionId:Wt($.collectionId)?String($.collectionId):"",metadata:Wt($==null?void 0:$.metadata)?$.metadata:void 0,rendering:Wt($.rendering)?a.Rendering.fromJSON($.rendering):void 0,encoding:Wt($.encoding)?a.Encoding.fromJSON($.encoding):void 0,composition:Wt($.composition)?a.Composition.fromJSON($.composition):void 0,maxDuration:Wt($.maxDuration)?Number($.maxDuration):void 0,webrtc:Wt($.webrtc)?a.WebRtc.fromJSON($.webrtc):void 0,location:Wt($.location)?a.LatLong.fromJSON($.location):void 0}},toJSON($){const tt={};return $.collectionId!==void 0&&(tt.collectionId=$.collectionId),$.metadata!==void 0&&(tt.metadata=$.metadata),$.rendering!==void 0&&(tt.rendering=$.rendering?a.Rendering.toJSON($.rendering):void 0),$.encoding!==void 0&&(tt.encoding=$.encoding?a.Encoding.toJSON($.encoding):void 0),$.composition!==void 0&&(tt.composition=$.composition?a.Composition.toJSON($.composition):void 0),$.maxDuration!==void 0&&(tt.maxDuration=Math.round($.maxDuration)),$.webrtc!==void 0&&(tt.webrtc=$.webrtc?a.WebRtc.toJSON($.webrtc):void 0),$.location!==void 0&&(tt.location=$.location?a.LatLong.toJSON($.location):void 0),tt},fromPartial($){var tt,rt,Nt;const vt=wr();return vt.collectionId=(tt=$.collectionId)!==null&&tt!==void 0?tt:"",vt.metadata=(rt=$.metadata)!==null&&rt!==void 0?rt:void 0,vt.rendering=$.rendering!==void 0&&$.rendering!==null?a.Rendering.fromPartial($.rendering):void 0,vt.encoding=$.encoding!==void 0&&$.encoding!==null?a.Encoding.fromPartial($.encoding):void 0,vt.composition=$.composition!==void 0&&$.composition!==null?a.Composition.fromPartial($.composition):void 0,vt.maxDuration=(Nt=$.maxDuration)!==null&&Nt!==void 0?Nt:void 0,vt.webrtc=$.webrtc!==void 0&&$.webrtc!==null?a.WebRtc.fromPartial($.webrtc):void 0,vt.location=$.location!==void 0&&$.location!==null?a.LatLong.fromPartial($.location):void 0,vt}};function Ar(){return{project:void 0}}a.CreateProjectResponse={encode($,tt=b.default.Writer.create()){return $.project!==void 0&&a.Project.encode($.project,tt.uint32(10).fork()).ldelim(),tt},decode($,tt){const rt=$ instanceof b.default.Reader?$:new b.default.Reader($);let Nt=tt===void 0?rt.len:rt.pos+tt;const vt=Ar();for(;rt.pos<Nt;){const Mt=rt.uint32();switch(Mt>>>3){case 1:vt.project=a.Project.decode(rt,rt.uint32());break;default:rt.skipType(Mt&7);break}}return vt},fromJSON($){return{project:Wt($.project)?a.Project.fromJSON($.project):void 0}},toJSON($){const tt={};return $.project!==void 0&&(tt.project=$.project?a.Project.toJSON($.project):void 0),tt},fromPartial($){const tt=Ar();return tt.project=$.project!==void 0&&$.project!==null?a.Project.fromPartial($.project):void 0,tt}};function Dr(){return{collectionId:"",projectId:"",updateMask:void 0,metadata:void 0,rendering:void 0,encoding:void 0,composition:void 0,maxDuration:void 0,webrtc:void 0,location:void 0}}a.UpdateProjectRequest={encode($,tt=b.default.Writer.create()){return $.collectionId!==""&&tt.uint32(10).string($.collectionId),$.projectId!==""&&tt.uint32(18).string($.projectId),$.updateMask!==void 0&&k.FieldMask.encode(k.FieldMask.wrap($.updateMask),tt.uint32(26).fork()).ldelim(),$.metadata!==void 0&&j.Value.encode(j.Value.wrap($.metadata),tt.uint32(34).fork()).ldelim(),$.rendering!==void 0&&a.Rendering.encode($.rendering,tt.uint32(42).fork()).ldelim(),$.encoding!==void 0&&a.Encoding.encode($.encoding,tt.uint32(50).fork()).ldelim(),$.composition!==void 0&&a.Composition.encode($.composition,tt.uint32(58).fork()).ldelim(),$.maxDuration!==void 0&&tt.uint32(64).uint32($.maxDuration),$.webrtc!==void 0&&a.WebRtc.encode($.webrtc,tt.uint32(74).fork()).ldelim(),$.location!==void 0&&a.LatLong.encode($.location,tt.uint32(82).fork()).ldelim(),tt},decode($,tt){const rt=$ instanceof b.default.Reader?$:new b.default.Reader($);let Nt=tt===void 0?rt.len:rt.pos+tt;const vt=Dr();for(;rt.pos<Nt;){const Mt=rt.uint32();switch(Mt>>>3){case 1:vt.collectionId=rt.string();break;case 2:vt.projectId=rt.string();break;case 3:vt.updateMask=k.FieldMask.unwrap(k.FieldMask.decode(rt,rt.uint32()));break;case 4:vt.metadata=j.Value.unwrap(j.Value.decode(rt,rt.uint32()));break;case 5:vt.rendering=a.Rendering.decode(rt,rt.uint32());break;case 6:vt.encoding=a.Encoding.decode(rt,rt.uint32());break;case 7:vt.composition=a.Composition.decode(rt,rt.uint32());break;case 8:vt.maxDuration=rt.uint32();break;case 9:vt.webrtc=a.WebRtc.decode(rt,rt.uint32());break;case 10:vt.location=a.LatLong.decode(rt,rt.uint32());break;default:rt.skipType(Mt&7);break}}return vt},fromJSON($){return{collectionId:Wt($.collectionId)?String($.collectionId):"",projectId:Wt($.projectId)?String($.projectId):"",updateMask:Wt($.updateMask)?k.FieldMask.unwrap(k.FieldMask.fromJSON($.updateMask)):void 0,metadata:Wt($==null?void 0:$.metadata)?$.metadata:void 0,rendering:Wt($.rendering)?a.Rendering.fromJSON($.rendering):void 0,encoding:Wt($.encoding)?a.Encoding.fromJSON($.encoding):void 0,composition:Wt($.composition)?a.Composition.fromJSON($.composition):void 0,maxDuration:Wt($.maxDuration)?Number($.maxDuration):void 0,webrtc:Wt($.webrtc)?a.WebRtc.fromJSON($.webrtc):void 0,location:Wt($.location)?a.LatLong.fromJSON($.location):void 0}},toJSON($){const tt={};return $.collectionId!==void 0&&(tt.collectionId=$.collectionId),$.projectId!==void 0&&(tt.projectId=$.projectId),$.updateMask!==void 0&&(tt.updateMask=k.FieldMask.toJSON(k.FieldMask.wrap($.updateMask))),$.metadata!==void 0&&(tt.metadata=$.metadata),$.rendering!==void 0&&(tt.rendering=$.rendering?a.Rendering.toJSON($.rendering):void 0),$.encoding!==void 0&&(tt.encoding=$.encoding?a.Encoding.toJSON($.encoding):void 0),$.composition!==void 0&&(tt.composition=$.composition?a.Composition.toJSON($.composition):void 0),$.maxDuration!==void 0&&(tt.maxDuration=Math.round($.maxDuration)),$.webrtc!==void 0&&(tt.webrtc=$.webrtc?a.WebRtc.toJSON($.webrtc):void 0),$.location!==void 0&&(tt.location=$.location?a.LatLong.toJSON($.location):void 0),tt},fromPartial($){var tt,rt,Nt,vt,Mt;const Pn=Dr();return Pn.collectionId=(tt=$.collectionId)!==null&&tt!==void 0?tt:"",Pn.projectId=(rt=$.projectId)!==null&&rt!==void 0?rt:"",Pn.updateMask=(Nt=$.updateMask)!==null&&Nt!==void 0?Nt:void 0,Pn.metadata=(vt=$.metadata)!==null&&vt!==void 0?vt:void 0,Pn.rendering=$.rendering!==void 0&&$.rendering!==null?a.Rendering.fromPartial($.rendering):void 0,Pn.encoding=$.encoding!==void 0&&$.encoding!==null?a.Encoding.fromPartial($.encoding):void 0,Pn.composition=$.composition!==void 0&&$.composition!==null?a.Composition.fromPartial($.composition):void 0,Pn.maxDuration=(Mt=$.maxDuration)!==null&&Mt!==void 0?Mt:void 0,Pn.webrtc=$.webrtc!==void 0&&$.webrtc!==null?a.WebRtc.fromPartial($.webrtc):void 0,Pn.location=$.location!==void 0&&$.location!==null?a.LatLong.fromPartial($.location):void 0,Pn}};function Lr(){return{project:void 0,broadcastUpdated:!1}}a.UpdateProjectResponse={encode($,tt=b.default.Writer.create()){return $.project!==void 0&&a.Project.encode($.project,tt.uint32(10).fork()).ldelim(),$.broadcastUpdated===!0&&tt.uint32(16).bool($.broadcastUpdated),tt},decode($,tt){const rt=$ instanceof b.default.Reader?$:new b.default.Reader($);let Nt=tt===void 0?rt.len:rt.pos+tt;const vt=Lr();for(;rt.pos<Nt;){const Mt=rt.uint32();switch(Mt>>>3){case 1:vt.project=a.Project.decode(rt,rt.uint32());break;case 2:vt.broadcastUpdated=rt.bool();break;default:rt.skipType(Mt&7);break}}return vt},fromJSON($){return{project:Wt($.project)?a.Project.fromJSON($.project):void 0,broadcastUpdated:Wt($.broadcastUpdated)?!!$.broadcastUpdated:!1}},toJSON($){const tt={};return $.project!==void 0&&(tt.project=$.project?a.Project.toJSON($.project):void 0),$.broadcastUpdated!==void 0&&(tt.broadcastUpdated=$.broadcastUpdated),tt},fromPartial($){var tt;const rt=Lr();return rt.project=$.project!==void 0&&$.project!==null?a.Project.fromPartial($.project):void 0,rt.broadcastUpdated=(tt=$.broadcastUpdated)!==null&&tt!==void 0?tt:!1,rt}};function Mr(){return{collectionId:"",projectId:"",force:void 0}}a.DeleteProjectRequest={encode($,tt=b.default.Writer.create()){return $.collectionId!==""&&tt.uint32(10).string($.collectionId),$.projectId!==""&&tt.uint32(18).string($.projectId),$.force!==void 0&&tt.uint32(24).bool($.force),tt},decode($,tt){const rt=$ instanceof b.default.Reader?$:new b.default.Reader($);let Nt=tt===void 0?rt.len:rt.pos+tt;const vt=Mr();for(;rt.pos<Nt;){const Mt=rt.uint32();switch(Mt>>>3){case 1:vt.collectionId=rt.string();break;case 2:vt.projectId=rt.string();break;case 3:vt.force=rt.bool();break;default:rt.skipType(Mt&7);break}}return vt},fromJSON($){return{collectionId:Wt($.collectionId)?String($.collectionId):"",projectId:Wt($.projectId)?String($.projectId):"",force:Wt($.force)?!!$.force:void 0}},toJSON($){const tt={};return $.collectionId!==void 0&&(tt.collectionId=$.collectionId),$.projectId!==void 0&&(tt.projectId=$.projectId),$.force!==void 0&&(tt.force=$.force),tt},fromPartial($){var tt,rt,Nt;const vt=Mr();return vt.collectionId=(tt=$.collectionId)!==null&&tt!==void 0?tt:"",vt.projectId=(rt=$.projectId)!==null&&rt!==void 0?rt:"",vt.force=(Nt=$.force)!==null&&Nt!==void 0?Nt:void 0,vt}};function $r(){return{broadcastStopped:!1,layoutsDeleted:0}}a.DeleteProjectResponse={encode($,tt=b.default.Writer.create()){return $.broadcastStopped===!0&&tt.uint32(8).bool($.broadcastStopped),$.layoutsDeleted!==0&&tt.uint32(16).uint32($.layoutsDeleted),tt},decode($,tt){const rt=$ instanceof b.default.Reader?$:new b.default.Reader($);let Nt=tt===void 0?rt.len:rt.pos+tt;const vt=$r();for(;rt.pos<Nt;){const Mt=rt.uint32();switch(Mt>>>3){case 1:vt.broadcastStopped=rt.bool();break;case 2:vt.layoutsDeleted=rt.uint32();break;default:rt.skipType(Mt&7);break}}return vt},fromJSON($){return{broadcastStopped:Wt($.broadcastStopped)?!!$.broadcastStopped:!1,layoutsDeleted:Wt($.layoutsDeleted)?Number($.layoutsDeleted):0}},toJSON($){const tt={};return $.broadcastStopped!==void 0&&(tt.broadcastStopped=$.broadcastStopped),$.layoutsDeleted!==void 0&&(tt.layoutsDeleted=Math.round($.layoutsDeleted)),tt},fromPartial($){var tt,rt;const Nt=$r();return Nt.broadcastStopped=(tt=$.broadcastStopped)!==null&&tt!==void 0?tt:!1,Nt.layoutsDeleted=(rt=$.layoutsDeleted)!==null&&rt!==void 0?rt:0,Nt}};function Ur(){return{collectionId:"",projectId:"",webrtcStart:void 0}}a.StartProjectBroadcastRequest={encode($,tt=b.default.Writer.create()){return $.collectionId!==""&&tt.uint32(10).string($.collectionId),$.projectId!==""&&tt.uint32(18).string($.projectId),$.webrtcStart!==void 0&&tt.uint32(24).bool($.webrtcStart),tt},decode($,tt){const rt=$ instanceof b.default.Reader?$:new b.default.Reader($);let Nt=tt===void 0?rt.len:rt.pos+tt;const vt=Ur();for(;rt.pos<Nt;){const Mt=rt.uint32();switch(Mt>>>3){case 1:vt.collectionId=rt.string();break;case 2:vt.projectId=rt.string();break;case 3:vt.webrtcStart=rt.bool();break;default:rt.skipType(Mt&7);break}}return vt},fromJSON($){return{collectionId:Wt($.collectionId)?String($.collectionId):"",projectId:Wt($.projectId)?String($.projectId):"",webrtcStart:Wt($.webrtcStart)?!!$.webrtcStart:void 0}},toJSON($){const tt={};return $.collectionId!==void 0&&(tt.collectionId=$.collectionId),$.projectId!==void 0&&(tt.projectId=$.projectId),$.webrtcStart!==void 0&&(tt.webrtcStart=$.webrtcStart),tt},fromPartial($){var tt,rt,Nt;const vt=Ur();return vt.collectionId=(tt=$.collectionId)!==null&&tt!==void 0?tt:"",vt.projectId=(rt=$.projectId)!==null&&rt!==void 0?rt:"",vt.webrtcStart=(Nt=$.webrtcStart)!==null&&Nt!==void 0?Nt:void 0,vt}};function Br(){return{broadcastId:""}}a.StartProjectBroadcastResponse={encode($,tt=b.default.Writer.create()){return $.broadcastId!==""&&tt.uint32(10).string($.broadcastId),tt},decode($,tt){const rt=$ instanceof b.default.Reader?$:new b.default.Reader($);let Nt=tt===void 0?rt.len:rt.pos+tt;const vt=Br();for(;rt.pos<Nt;){const Mt=rt.uint32();switch(Mt>>>3){case 1:vt.broadcastId=rt.string();break;default:rt.skipType(Mt&7);break}}return vt},fromJSON($){return{broadcastId:Wt($.broadcastId)?String($.broadcastId):""}},toJSON($){const tt={};return $.broadcastId!==void 0&&(tt.broadcastId=$.broadcastId),tt},fromPartial($){var tt;const rt=Br();return rt.broadcastId=(tt=$.broadcastId)!==null&&tt!==void 0?tt:"",rt}};function Fr(){return{collectionId:"",projectId:"",webrtcStop:void 0}}a.StopProjectBroadcastRequest={encode($,tt=b.default.Writer.create()){return $.collectionId!==""&&tt.uint32(10).string($.collectionId),$.projectId!==""&&tt.uint32(18).string($.projectId),$.webrtcStop!==void 0&&tt.uint32(24).bool($.webrtcStop),tt},decode($,tt){const rt=$ instanceof b.default.Reader?$:new b.default.Reader($);let Nt=tt===void 0?rt.len:rt.pos+tt;const vt=Fr();for(;rt.pos<Nt;){const Mt=rt.uint32();switch(Mt>>>3){case 1:vt.collectionId=rt.string();break;case 2:vt.projectId=rt.string();break;case 3:vt.webrtcStop=rt.bool();break;default:rt.skipType(Mt&7);break}}return vt},fromJSON($){return{collectionId:Wt($.collectionId)?String($.collectionId):"",projectId:Wt($.projectId)?String($.projectId):"",webrtcStop:Wt($.webrtcStop)?!!$.webrtcStop:void 0}},toJSON($){const tt={};return $.collectionId!==void 0&&(tt.collectionId=$.collectionId),$.projectId!==void 0&&(tt.projectId=$.projectId),$.webrtcStop!==void 0&&(tt.webrtcStop=$.webrtcStop),tt},fromPartial($){var tt,rt,Nt;const vt=Fr();return vt.collectionId=(tt=$.collectionId)!==null&&tt!==void 0?tt:"",vt.projectId=(rt=$.projectId)!==null&&rt!==void 0?rt:"",vt.webrtcStop=(Nt=$.webrtcStop)!==null&&Nt!==void 0?Nt:void 0,vt}};function Jr(){return{}}a.StopProjectBroadcastResponse={encode($,tt=b.default.Writer.create()){return tt},decode($,tt){const rt=$ instanceof b.default.Reader?$:new b.default.Reader($);let Nt=tt===void 0?rt.len:rt.pos+tt;const vt=Jr();for(;rt.pos<Nt;){const Mt=rt.uint32();switch(Mt>>>3){default:rt.skipType(Mt&7);break}}return vt},fromJSON($){return{}},toJSON($){return{}},fromPartial($){return Jr()}};function Vr(){return{collectionId:"",projectId:"",status:void 0}}a.GetProjectRequest={encode($,tt=b.default.Writer.create()){return $.collectionId!==""&&tt.uint32(10).string($.collectionId),$.projectId!==""&&tt.uint32(18).string($.projectId),$.status!==void 0&&tt.uint32(24).bool($.status),tt},decode($,tt){const rt=$ instanceof b.default.Reader?$:new b.default.Reader($);let Nt=tt===void 0?rt.len:rt.pos+tt;const vt=Vr();for(;rt.pos<Nt;){const Mt=rt.uint32();switch(Mt>>>3){case 1:vt.collectionId=rt.string();break;case 2:vt.projectId=rt.string();break;case 3:vt.status=rt.bool();break;default:rt.skipType(Mt&7);break}}return vt},fromJSON($){return{collectionId:Wt($.collectionId)?String($.collectionId):"",projectId:Wt($.projectId)?String($.projectId):"",status:Wt($.status)?!!$.status:void 0}},toJSON($){const tt={};return $.collectionId!==void 0&&(tt.collectionId=$.collectionId),$.projectId!==void 0&&(tt.projectId=$.projectId),$.status!==void 0&&(tt.status=$.status),tt},fromPartial($){var tt,rt,Nt;const vt=Vr();return vt.collectionId=(tt=$.collectionId)!==null&&tt!==void 0?tt:"",vt.projectId=(rt=$.projectId)!==null&&rt!==void 0?rt:"",vt.status=(Nt=$.status)!==null&&Nt!==void 0?Nt:void 0,vt}};function Gr(){return{project:void 0,status:void 0}}a.GetProjectResponse={encode($,tt=b.default.Writer.create()){return $.project!==void 0&&a.Project.encode($.project,tt.uint32(10).fork()).ldelim(),$.status!==void 0&&a.ProjectBroadcastStatus.encode($.status,tt.uint32(18).fork()).ldelim(),tt},decode($,tt){const rt=$ instanceof b.default.Reader?$:new b.default.Reader($);let Nt=tt===void 0?rt.len:rt.pos+tt;const vt=Gr();for(;rt.pos<Nt;){const Mt=rt.uint32();switch(Mt>>>3){case 1:vt.project=a.Project.decode(rt,rt.uint32());break;case 2:vt.status=a.ProjectBroadcastStatus.decode(rt,rt.uint32());break;default:rt.skipType(Mt&7);break}}return vt},fromJSON($){return{project:Wt($.project)?a.Project.fromJSON($.project):void 0,status:Wt($.status)?a.ProjectBroadcastStatus.fromJSON($.status):void 0}},toJSON($){const tt={};return $.project!==void 0&&(tt.project=$.project?a.Project.toJSON($.project):void 0),$.status!==void 0&&(tt.status=$.status?a.ProjectBroadcastStatus.toJSON($.status):void 0),tt},fromPartial($){const tt=Gr();return tt.project=$.project!==void 0&&$.project!==null?a.Project.fromPartial($.project):void 0,tt.status=$.status!==void 0&&$.status!==null?a.ProjectBroadcastStatus.fromPartial($.status):void 0,tt}};function qr(){return{collectionId:"",projectId:"",format:void 0}}a.GetProjectBroadcastSnapshotRequest={encode($,tt=b.default.Writer.create()){return $.collectionId!==""&&tt.uint32(10).string($.collectionId),$.projectId!==""&&tt.uint32(18).string($.projectId),$.format!==void 0&&tt.uint32(24).int32(ft($.format)),tt},decode($,tt){const rt=$ instanceof b.default.Reader?$:new b.default.Reader($);let Nt=tt===void 0?rt.len:rt.pos+tt;const vt=qr();for(;rt.pos<Nt;){const Mt=rt.uint32();switch(Mt>>>3){case 1:vt.collectionId=rt.string();break;case 2:vt.projectId=rt.string();break;case 3:vt.format=nt(rt.int32());break;default:rt.skipType(Mt&7);break}}return vt},fromJSON($){return{collectionId:Wt($.collectionId)?String($.collectionId):"",projectId:Wt($.projectId)?String($.projectId):"",format:Wt($.format)?nt($.format):void 0}},toJSON($){const tt={};return $.collectionId!==void 0&&(tt.collectionId=$.collectionId),$.projectId!==void 0&&(tt.projectId=$.projectId),$.format!==void 0&&(tt.format=$.format!==void 0?it($.format):void 0),tt},fromPartial($){var tt,rt,Nt;const vt=qr();return vt.collectionId=(tt=$.collectionId)!==null&&tt!==void 0?tt:"",vt.projectId=(rt=$.projectId)!==null&&rt!==void 0?rt:"",vt.format=(Nt=$.format)!==null&&Nt!==void 0?Nt:void 0,vt}};function Wr(){return{format:et.IMAGE_FORMAT_UNSPECIFIED,image:new Uint8Array}}a.GetProjectBroadcastSnapshotResponse={encode($,tt=b.default.Writer.create()){return $.format!==et.IMAGE_FORMAT_UNSPECIFIED&&tt.uint32(8).int32(ft($.format)),$.image.length!==0&&tt.uint32(18).bytes($.image),tt},decode($,tt){const rt=$ instanceof b.default.Reader?$:new b.default.Reader($);let Nt=tt===void 0?rt.len:rt.pos+tt;const vt=Wr();for(;rt.pos<Nt;){const Mt=rt.uint32();switch(Mt>>>3){case 1:vt.format=nt(rt.int32());break;case 2:vt.image=rt.bytes();break;default:rt.skipType(Mt&7);break}}return vt},fromJSON($){return{format:Wt($.format)?nt($.format):et.IMAGE_FORMAT_UNSPECIFIED,image:Wt($.image)?hs($.image):new Uint8Array}},toJSON($){const tt={};return $.format!==void 0&&(tt.format=it($.format)),$.image!==void 0&&(tt.image=vs($.image!==void 0?$.image:new Uint8Array)),tt},fromPartial($){var tt,rt;const Nt=Wr();return Nt.format=(tt=$.format)!==null&&tt!==void 0?tt:et.IMAGE_FORMAT_UNSPECIFIED,Nt.image=(rt=$.image)!==null&&rt!==void 0?rt:new Uint8Array,Nt}};function Hr(){return{collectionId:"",projectId:""}}a.GetProjectBroadcastStatusRequest={encode($,tt=b.default.Writer.create()){return $.collectionId!==""&&tt.uint32(10).string($.collectionId),$.projectId!==""&&tt.uint32(18).string($.projectId),tt},decode($,tt){const rt=$ instanceof b.default.Reader?$:new b.default.Reader($);let Nt=tt===void 0?rt.len:rt.pos+tt;const vt=Hr();for(;rt.pos<Nt;){const Mt=rt.uint32();switch(Mt>>>3){case 1:vt.collectionId=rt.string();break;case 2:vt.projectId=rt.string();break;default:rt.skipType(Mt&7);break}}return vt},fromJSON($){return{collectionId:Wt($.collectionId)?String($.collectionId):"",projectId:Wt($.projectId)?String($.projectId):""}},toJSON($){const tt={};return $.collectionId!==void 0&&(tt.collectionId=$.collectionId),$.projectId!==void 0&&(tt.projectId=$.projectId),tt},fromPartial($){var tt,rt;const Nt=Hr();return Nt.collectionId=(tt=$.collectionId)!==null&&tt!==void 0?tt:"",Nt.projectId=(rt=$.projectId)!==null&&rt!==void 0?rt:"",Nt}};function xr(){return{status:void 0}}a.GetProjectBroadcastStatusResponse={encode($,tt=b.default.Writer.create()){return $.status!==void 0&&a.ProjectBroadcastStatus.encode($.status,tt.uint32(10).fork()).ldelim(),tt},decode($,tt){const rt=$ instanceof b.default.Reader?$:new b.default.Reader($);let Nt=tt===void 0?rt.len:rt.pos+tt;const vt=xr();for(;rt.pos<Nt;){const Mt=rt.uint32();switch(Mt>>>3){case 1:vt.status=a.ProjectBroadcastStatus.decode(rt,rt.uint32());break;default:rt.skipType(Mt&7);break}}return vt},fromJSON($){return{status:Wt($.status)?a.ProjectBroadcastStatus.fromJSON($.status):void 0}},toJSON($){const tt={};return $.status!==void 0&&(tt.status=$.status?a.ProjectBroadcastStatus.toJSON($.status):void 0),tt},fromPartial($){const tt=xr();return tt.status=$.status!==void 0&&$.status!==null?a.ProjectBroadcastStatus.fromPartial($.status):void 0,tt}};function zr(){return{collectionId:"",projectId:""}}a.StartProjectWebRtcRequest={encode($,tt=b.default.Writer.create()){return $.collectionId!==""&&tt.uint32(10).string($.collectionId),$.projectId!==""&&tt.uint32(18).string($.projectId),tt},decode($,tt){const rt=$ instanceof b.default.Reader?$:new b.default.Reader($);let Nt=tt===void 0?rt.len:rt.pos+tt;const vt=zr();for(;rt.pos<Nt;){const Mt=rt.uint32();switch(Mt>>>3){case 1:vt.collectionId=rt.string();break;case 2:vt.projectId=rt.string();break;default:rt.skipType(Mt&7);break}}return vt},fromJSON($){return{collectionId:Wt($.collectionId)?String($.collectionId):"",projectId:Wt($.projectId)?String($.projectId):""}},toJSON($){const tt={};return $.collectionId!==void 0&&(tt.collectionId=$.collectionId),$.projectId!==void 0&&(tt.projectId=$.projectId),tt},fromPartial($){var tt,rt;const Nt=zr();return Nt.collectionId=(tt=$.collectionId)!==null&&tt!==void 0?tt:"",Nt.projectId=(rt=$.projectId)!==null&&rt!==void 0?rt:"",Nt}};function Yr(){return{}}a.StartProjectWebRtcResponse={encode($,tt=b.default.Writer.create()){return tt},decode($,tt){const rt=$ instanceof b.default.Reader?$:new b.default.Reader($);let Nt=tt===void 0?rt.len:rt.pos+tt;const vt=Yr();for(;rt.pos<Nt;){const Mt=rt.uint32();switch(Mt>>>3){default:rt.skipType(Mt&7);break}}return vt},fromJSON($){return{}},toJSON($){return{}},fromPartial($){return Yr()}};function Kr(){return{collectionId:"",projectId:""}}a.StopProjectWebRtcRequest={encode($,tt=b.default.Writer.create()){return $.collectionId!==""&&tt.uint32(10).string($.collectionId),$.projectId!==""&&tt.uint32(18).string($.projectId),tt},decode($,tt){const rt=$ instanceof b.default.Reader?$:new b.default.Reader($);let Nt=tt===void 0?rt.len:rt.pos+tt;const vt=Kr();for(;rt.pos<Nt;){const Mt=rt.uint32();switch(Mt>>>3){case 1:vt.collectionId=rt.string();break;case 2:vt.projectId=rt.string();break;default:rt.skipType(Mt&7);break}}return vt},fromJSON($){return{collectionId:Wt($.collectionId)?String($.collectionId):"",projectId:Wt($.projectId)?String($.projectId):""}},toJSON($){const tt={};return $.collectionId!==void 0&&(tt.collectionId=$.collectionId),$.projectId!==void 0&&(tt.projectId=$.projectId),tt},fromPartial($){var tt,rt;const Nt=Kr();return Nt.collectionId=(tt=$.collectionId)!==null&&tt!==void 0?tt:"",Nt.projectId=(rt=$.projectId)!==null&&rt!==void 0?rt:"",Nt}};function Qr(){return{}}a.StopProjectWebRtcResponse={encode($,tt=b.default.Writer.create()){return tt},decode($,tt){const rt=$ instanceof b.default.Reader?$:new b.default.Reader($);let Nt=tt===void 0?rt.len:rt.pos+tt;const vt=Qr();for(;rt.pos<Nt;){const Mt=rt.uint32();switch(Mt>>>3){default:rt.skipType(Mt&7);break}}return vt},fromJSON($){return{}},toJSON($){return{}},fromPartial($){return Qr()}};function Zr(){return{collectionId:"",projectId:"",metadata:void 0,address:void 0,enabled:void 0,timeout:void 0}}a.CreateDestinationRequest={encode($,tt=b.default.Writer.create()){return $.collectionId!==""&&tt.uint32(10).string($.collectionId),$.projectId!==""&&tt.uint32(18).string($.projectId),$.metadata!==void 0&&j.Value.encode(j.Value.wrap($.metadata),tt.uint32(26).fork()).ldelim(),$.address!==void 0&&a.DestinationAddress.encode($.address,tt.uint32(42).fork()).ldelim(),$.enabled!==void 0&&tt.uint32(48).bool($.enabled),$.timeout!==void 0&&tt.uint32(56).uint32($.timeout),tt},decode($,tt){const rt=$ instanceof b.default.Reader?$:new b.default.Reader($);let Nt=tt===void 0?rt.len:rt.pos+tt;const vt=Zr();for(;rt.pos<Nt;){const Mt=rt.uint32();switch(Mt>>>3){case 1:vt.collectionId=rt.string();break;case 2:vt.projectId=rt.string();break;case 3:vt.metadata=j.Value.unwrap(j.Value.decode(rt,rt.uint32()));break;case 5:vt.address=a.DestinationAddress.decode(rt,rt.uint32());break;case 6:vt.enabled=rt.bool();break;case 7:vt.timeout=rt.uint32();break;default:rt.skipType(Mt&7);break}}return vt},fromJSON($){return{collectionId:Wt($.collectionId)?String($.collectionId):"",projectId:Wt($.projectId)?String($.projectId):"",metadata:Wt($==null?void 0:$.metadata)?$.metadata:void 0,address:Wt($.address)?a.DestinationAddress.fromJSON($.address):void 0,enabled:Wt($.enabled)?!!$.enabled:void 0,timeout:Wt($.timeout)?Number($.timeout):void 0}},toJSON($){const tt={};return $.collectionId!==void 0&&(tt.collectionId=$.collectionId),$.projectId!==void 0&&(tt.projectId=$.projectId),$.metadata!==void 0&&(tt.metadata=$.metadata),$.address!==void 0&&(tt.address=$.address?a.DestinationAddress.toJSON($.address):void 0),$.enabled!==void 0&&(tt.enabled=$.enabled),$.timeout!==void 0&&(tt.timeout=Math.round($.timeout)),tt},fromPartial($){var tt,rt,Nt,vt,Mt;const Pn=Zr();return Pn.collectionId=(tt=$.collectionId)!==null&&tt!==void 0?tt:"",Pn.projectId=(rt=$.projectId)!==null&&rt!==void 0?rt:"",Pn.metadata=(Nt=$.metadata)!==null&&Nt!==void 0?Nt:void 0,Pn.address=$.address!==void 0&&$.address!==null?a.DestinationAddress.fromPartial($.address):void 0,Pn.enabled=(vt=$.enabled)!==null&&vt!==void 0?vt:void 0,Pn.timeout=(Mt=$.timeout)!==null&&Mt!==void 0?Mt:void 0,Pn}};function Xr(){return{destination:void 0}}a.CreateDestinationResponse={encode($,tt=b.default.Writer.create()){return $.destination!==void 0&&a.Destination.encode($.destination,tt.uint32(10).fork()).ldelim(),tt},decode($,tt){const rt=$ instanceof b.default.Reader?$:new b.default.Reader($);let Nt=tt===void 0?rt.len:rt.pos+tt;const vt=Xr();for(;rt.pos<Nt;){const Mt=rt.uint32();switch(Mt>>>3){case 1:vt.destination=a.Destination.decode(rt,rt.uint32());break;default:rt.skipType(Mt&7);break}}return vt},fromJSON($){return{destination:Wt($.destination)?a.Destination.fromJSON($.destination):void 0}},toJSON($){const tt={};return $.destination!==void 0&&(tt.destination=$.destination?a.Destination.toJSON($.destination):void 0),tt},fromPartial($){const tt=Xr();return tt.destination=$.destination!==void 0&&$.destination!==null?a.Destination.fromPartial($.destination):void 0,tt}};function jr(){return{collectionId:"",projectId:"",destinationId:""}}a.GetDestinationRequest={encode($,tt=b.default.Writer.create()){return $.collectionId!==""&&tt.uint32(10).string($.collectionId),$.projectId!==""&&tt.uint32(18).string($.projectId),$.destinationId!==""&&tt.uint32(26).string($.destinationId),tt},decode($,tt){const rt=$ instanceof b.default.Reader?$:new b.default.Reader($);let Nt=tt===void 0?rt.len:rt.pos+tt;const vt=jr();for(;rt.pos<Nt;){const Mt=rt.uint32();switch(Mt>>>3){case 1:vt.collectionId=rt.string();break;case 2:vt.projectId=rt.string();break;case 3:vt.destinationId=rt.string();break;default:rt.skipType(Mt&7);break}}return vt},fromJSON($){return{collectionId:Wt($.collectionId)?String($.collectionId):"",projectId:Wt($.projectId)?String($.projectId):"",destinationId:Wt($.destinationId)?String($.destinationId):""}},toJSON($){const tt={};return $.collectionId!==void 0&&(tt.collectionId=$.collectionId),$.projectId!==void 0&&(tt.projectId=$.projectId),$.destinationId!==void 0&&(tt.destinationId=$.destinationId),tt},fromPartial($){var tt,rt,Nt;const vt=jr();return vt.collectionId=(tt=$.collectionId)!==null&&tt!==void 0?tt:"",vt.projectId=(rt=$.projectId)!==null&&rt!==void 0?rt:"",vt.destinationId=(Nt=$.destinationId)!==null&&Nt!==void 0?Nt:"",vt}};function _i(){return{destination:void 0}}a.GetDestinationResponse={encode($,tt=b.default.Writer.create()){return $.destination!==void 0&&a.Destination.encode($.destination,tt.uint32(10).fork()).ldelim(),tt},decode($,tt){const rt=$ instanceof b.default.Reader?$:new b.default.Reader($);let Nt=tt===void 0?rt.len:rt.pos+tt;const vt=_i();for(;rt.pos<Nt;){const Mt=rt.uint32();switch(Mt>>>3){case 1:vt.destination=a.Destination.decode(rt,rt.uint32());break;default:rt.skipType(Mt&7);break}}return vt},fromJSON($){return{destination:Wt($.destination)?a.Destination.fromJSON($.destination):void 0}},toJSON($){const tt={};return $.destination!==void 0&&(tt.destination=$.destination?a.Destination.toJSON($.destination):void 0),tt},fromPartial($){const tt=_i();return tt.destination=$.destination!==void 0&&$.destination!==null?a.Destination.fromPartial($.destination):void 0,tt}};function eo(){return{collectionId:"",projectId:"",destinationId:"",force:void 0}}a.DeleteDestinationRequest={encode($,tt=b.default.Writer.create()){return $.collectionId!==""&&tt.uint32(10).string($.collectionId),$.projectId!==""&&tt.uint32(18).string($.projectId),$.destinationId!==""&&tt.uint32(26).string($.destinationId),$.force!==void 0&&tt.uint32(32).bool($.force),tt},decode($,tt){const rt=$ instanceof b.default.Reader?$:new b.default.Reader($);let Nt=tt===void 0?rt.len:rt.pos+tt;const vt=eo();for(;rt.pos<Nt;){const Mt=rt.uint32();switch(Mt>>>3){case 1:vt.collectionId=rt.string();break;case 2:vt.projectId=rt.string();break;case 3:vt.destinationId=rt.string();break;case 4:vt.force=rt.bool();break;default:rt.skipType(Mt&7);break}}return vt},fromJSON($){return{collectionId:Wt($.collectionId)?String($.collectionId):"",projectId:Wt($.projectId)?String($.projectId):"",destinationId:Wt($.destinationId)?String($.destinationId):"",force:Wt($.force)?!!$.force:void 0}},toJSON($){const tt={};return $.collectionId!==void 0&&(tt.collectionId=$.collectionId),$.projectId!==void 0&&(tt.projectId=$.projectId),$.destinationId!==void 0&&(tt.destinationId=$.destinationId),$.force!==void 0&&(tt.force=$.force),tt},fromPartial($){var tt,rt,Nt,vt;const Mt=eo();return Mt.collectionId=(tt=$.collectionId)!==null&&tt!==void 0?tt:"",Mt.projectId=(rt=$.projectId)!==null&&rt!==void 0?rt:"",Mt.destinationId=(Nt=$.destinationId)!==null&&Nt!==void 0?Nt:"",Mt.force=(vt=$.force)!==null&&vt!==void 0?vt:void 0,Mt}};function to(){return{broadcastUpdated:!1}}a.DeleteDestinationResponse={encode($,tt=b.default.Writer.create()){return $.broadcastUpdated===!0&&tt.uint32(8).bool($.broadcastUpdated),tt},decode($,tt){const rt=$ instanceof b.default.Reader?$:new b.default.Reader($);let Nt=tt===void 0?rt.len:rt.pos+tt;const vt=to();for(;rt.pos<Nt;){const Mt=rt.uint32();switch(Mt>>>3){case 1:vt.broadcastUpdated=rt.bool();break;default:rt.skipType(Mt&7);break}}return vt},fromJSON($){return{broadcastUpdated:Wt($.broadcastUpdated)?!!$.broadcastUpdated:!1}},toJSON($){const tt={};return $.broadcastUpdated!==void 0&&(tt.broadcastUpdated=$.broadcastUpdated),tt},fromPartial($){var tt;const rt=to();return rt.broadcastUpdated=(tt=$.broadcastUpdated)!==null&&tt!==void 0?tt:!1,rt}};function no(){return{collectionId:"",projectId:"",destinationId:"",updateMask:void 0,metadata:void 0,address:void 0,enabled:void 0,timeout:void 0}}a.UpdateDestinationRequest={encode($,tt=b.default.Writer.create()){return $.collectionId!==""&&tt.uint32(10).string($.collectionId),$.projectId!==""&&tt.uint32(18).string($.projectId),$.destinationId!==""&&tt.uint32(26).string($.destinationId),$.updateMask!==void 0&&k.FieldMask.encode(k.FieldMask.wrap($.updateMask),tt.uint32(34).fork()).ldelim(),$.metadata!==void 0&&j.Value.encode(j.Value.wrap($.metadata),tt.uint32(42).fork()).ldelim(),$.address!==void 0&&a.DestinationAddress.encode($.address,tt.uint32(50).fork()).ldelim(),$.enabled!==void 0&&tt.uint32(56).bool($.enabled),$.timeout!==void 0&&tt.uint32(64).uint32($.timeout),tt},decode($,tt){const rt=$ instanceof b.default.Reader?$:new b.default.Reader($);let Nt=tt===void 0?rt.len:rt.pos+tt;const vt=no();for(;rt.pos<Nt;){const Mt=rt.uint32();switch(Mt>>>3){case 1:vt.collectionId=rt.string();break;case 2:vt.projectId=rt.string();break;case 3:vt.destinationId=rt.string();break;case 4:vt.updateMask=k.FieldMask.unwrap(k.FieldMask.decode(rt,rt.uint32()));break;case 5:vt.metadata=j.Value.unwrap(j.Value.decode(rt,rt.uint32()));break;case 6:vt.address=a.DestinationAddress.decode(rt,rt.uint32());break;case 7:vt.enabled=rt.bool();break;case 8:vt.timeout=rt.uint32();break;default:rt.skipType(Mt&7);break}}return vt},fromJSON($){return{collectionId:Wt($.collectionId)?String($.collectionId):"",projectId:Wt($.projectId)?String($.projectId):"",destinationId:Wt($.destinationId)?String($.destinationId):"",updateMask:Wt($.updateMask)?k.FieldMask.unwrap(k.FieldMask.fromJSON($.updateMask)):void 0,metadata:Wt($==null?void 0:$.metadata)?$.metadata:void 0,address:Wt($.address)?a.DestinationAddress.fromJSON($.address):void 0,enabled:Wt($.enabled)?!!$.enabled:void 0,timeout:Wt($.timeout)?Number($.timeout):void 0}},toJSON($){const tt={};return $.collectionId!==void 0&&(tt.collectionId=$.collectionId),$.projectId!==void 0&&(tt.projectId=$.projectId),$.destinationId!==void 0&&(tt.destinationId=$.destinationId),$.updateMask!==void 0&&(tt.updateMask=k.FieldMask.toJSON(k.FieldMask.wrap($.updateMask))),$.metadata!==void 0&&(tt.metadata=$.metadata),$.address!==void 0&&(tt.address=$.address?a.DestinationAddress.toJSON($.address):void 0),$.enabled!==void 0&&(tt.enabled=$.enabled),$.timeout!==void 0&&(tt.timeout=Math.round($.timeout)),tt},fromPartial($){var tt,rt,Nt,vt,Mt,Pn,Un;const Gn=no();return Gn.collectionId=(tt=$.collectionId)!==null&&tt!==void 0?tt:"",Gn.projectId=(rt=$.projectId)!==null&&rt!==void 0?rt:"",Gn.destinationId=(Nt=$.destinationId)!==null&&Nt!==void 0?Nt:"",Gn.updateMask=(vt=$.updateMask)!==null&&vt!==void 0?vt:void 0,Gn.metadata=(Mt=$.metadata)!==null&&Mt!==void 0?Mt:void 0,Gn.address=$.address!==void 0&&$.address!==null?a.DestinationAddress.fromPartial($.address):void 0,Gn.enabled=(Pn=$.enabled)!==null&&Pn!==void 0?Pn:void 0,Gn.timeout=(Un=$.timeout)!==null&&Un!==void 0?Un:void 0,Gn}};function ro(){return{destination:void 0,broadcastUpdated:!1}}a.UpdateDestinationResponse={encode($,tt=b.default.Writer.create()){return $.destination!==void 0&&a.Destination.encode($.destination,tt.uint32(10).fork()).ldelim(),$.broadcastUpdated===!0&&tt.uint32(16).bool($.broadcastUpdated),tt},decode($,tt){const rt=$ instanceof b.default.Reader?$:new b.default.Reader($);let Nt=tt===void 0?rt.len:rt.pos+tt;const vt=ro();for(;rt.pos<Nt;){const Mt=rt.uint32();switch(Mt>>>3){case 1:vt.destination=a.Destination.decode(rt,rt.uint32());break;case 2:vt.broadcastUpdated=rt.bool();break;default:rt.skipType(Mt&7);break}}return vt},fromJSON($){return{destination:Wt($.destination)?a.Destination.fromJSON($.destination):void 0,broadcastUpdated:Wt($.broadcastUpdated)?!!$.broadcastUpdated:!1}},toJSON($){const tt={};return $.destination!==void 0&&(tt.destination=$.destination?a.Destination.toJSON($.destination):void 0),$.broadcastUpdated!==void 0&&(tt.broadcastUpdated=$.broadcastUpdated),tt},fromPartial($){var tt;const rt=ro();return rt.destination=$.destination!==void 0&&$.destination!==null?a.Destination.fromPartial($.destination):void 0,rt.broadcastUpdated=(tt=$.broadcastUpdated)!==null&&tt!==void 0?tt:!1,rt}};function io(){return{collectionId:"",metadata:void 0,address:void 0,preview:void 0}}a.CreateSourceRequest={encode($,tt=b.default.Writer.create()){return $.collectionId!==""&&tt.uint32(10).string($.collectionId),$.metadata!==void 0&&j.Value.encode(j.Value.wrap($.metadata),tt.uint32(18).fork()).ldelim(),$.address!==void 0&&a.SourceAddress.encode($.address,tt.uint32(26).fork()).ldelim(),$.preview!==void 0&&a.PreviewAddress.encode($.preview,tt.uint32(34).fork()).ldelim(),tt},decode($,tt){const rt=$ instanceof b.default.Reader?$:new b.default.Reader($);let Nt=tt===void 0?rt.len:rt.pos+tt;const vt=io();for(;rt.pos<Nt;){const Mt=rt.uint32();switch(Mt>>>3){case 1:vt.collectionId=rt.string();break;case 2:vt.metadata=j.Value.unwrap(j.Value.decode(rt,rt.uint32()));break;case 3:vt.address=a.SourceAddress.decode(rt,rt.uint32());break;case 4:vt.preview=a.PreviewAddress.decode(rt,rt.uint32());break;default:rt.skipType(Mt&7);break}}return vt},fromJSON($){return{collectionId:Wt($.collectionId)?String($.collectionId):"",metadata:Wt($==null?void 0:$.metadata)?$.metadata:void 0,address:Wt($.address)?a.SourceAddress.fromJSON($.address):void 0,preview:Wt($.preview)?a.PreviewAddress.fromJSON($.preview):void 0}},toJSON($){const tt={};return $.collectionId!==void 0&&(tt.collectionId=$.collectionId),$.metadata!==void 0&&(tt.metadata=$.metadata),$.address!==void 0&&(tt.address=$.address?a.SourceAddress.toJSON($.address):void 0),$.preview!==void 0&&(tt.preview=$.preview?a.PreviewAddress.toJSON($.preview):void 0),tt},fromPartial($){var tt,rt;const Nt=io();return Nt.collectionId=(tt=$.collectionId)!==null&&tt!==void 0?tt:"",Nt.metadata=(rt=$.metadata)!==null&&rt!==void 0?rt:void 0,Nt.address=$.address!==void 0&&$.address!==null?a.SourceAddress.fromPartial($.address):void 0,Nt.preview=$.preview!==void 0&&$.preview!==null?a.PreviewAddress.fromPartial($.preview):void 0,Nt}};function oo(){return{source:void 0}}a.CreateSourceResponse={encode($,tt=b.default.Writer.create()){return $.source!==void 0&&a.Source.encode($.source,tt.uint32(10).fork()).ldelim(),tt},decode($,tt){const rt=$ instanceof b.default.Reader?$:new b.default.Reader($);let Nt=tt===void 0?rt.len:rt.pos+tt;const vt=oo();for(;rt.pos<Nt;){const Mt=rt.uint32();switch(Mt>>>3){case 1:vt.source=a.Source.decode(rt,rt.uint32());break;default:rt.skipType(Mt&7);break}}return vt},fromJSON($){return{source:Wt($.source)?a.Source.fromJSON($.source):void 0}},toJSON($){const tt={};return $.source!==void 0&&(tt.source=$.source?a.Source.toJSON($.source):void 0),tt},fromPartial($){const tt=oo();return tt.source=$.source!==void 0&&$.source!==null?a.Source.fromPartial($.source):void 0,tt}};function ao(){return{collectionId:"",sourceId:"",force:void 0}}a.DeleteSourceRequest={encode($,tt=b.default.Writer.create()){return $.collectionId!==""&&tt.uint32(10).string($.collectionId),$.sourceId!==""&&tt.uint32(18).string($.sourceId),$.force!==void 0&&tt.uint32(24).bool($.force),tt},decode($,tt){const rt=$ instanceof b.default.Reader?$:new b.default.Reader($);let Nt=tt===void 0?rt.len:rt.pos+tt;const vt=ao();for(;rt.pos<Nt;){const Mt=rt.uint32();switch(Mt>>>3){case 1:vt.collectionId=rt.string();break;case 2:vt.sourceId=rt.string();break;case 3:vt.force=rt.bool();break;default:rt.skipType(Mt&7);break}}return vt},fromJSON($){return{collectionId:Wt($.collectionId)?String($.collectionId):"",sourceId:Wt($.sourceId)?String($.sourceId):"",force:Wt($.force)?!!$.force:void 0}},toJSON($){const tt={};return $.collectionId!==void 0&&(tt.collectionId=$.collectionId),$.sourceId!==void 0&&(tt.sourceId=$.sourceId),$.force!==void 0&&(tt.force=$.force),tt},fromPartial($){var tt,rt,Nt;const vt=ao();return vt.collectionId=(tt=$.collectionId)!==null&&tt!==void 0?tt:"",vt.sourceId=(rt=$.sourceId)!==null&&rt!==void 0?rt:"",vt.force=(Nt=$.force)!==null&&Nt!==void 0?Nt:void 0,vt}};function so(){return{projectIdsUpdated:[]}}a.DeleteSourceResponse={encode($,tt=b.default.Writer.create()){for(const rt of $.projectIdsUpdated)tt.uint32(26).string(rt);return tt},decode($,tt){const rt=$ instanceof b.default.Reader?$:new b.default.Reader($);let Nt=tt===void 0?rt.len:rt.pos+tt;const vt=so();for(;rt.pos<Nt;){const Mt=rt.uint32();switch(Mt>>>3){case 3:vt.projectIdsUpdated.push(rt.string());break;default:rt.skipType(Mt&7);break}}return vt},fromJSON($){return{projectIdsUpdated:Array.isArray($==null?void 0:$.projectIdsUpdated)?$.projectIdsUpdated.map(tt=>String(tt)):[]}},toJSON($){const tt={};return $.projectIdsUpdated?tt.projectIdsUpdated=$.projectIdsUpdated.map(rt=>rt):tt.projectIdsUpdated=[],tt},fromPartial($){var tt;const rt=so();return rt.projectIdsUpdated=((tt=$.projectIdsUpdated)===null||tt===void 0?void 0:tt.map(Nt=>Nt))||[],rt}};function uo(){return{collectionId:"",projectId:"",sourceId:"",trigger:void 0}}a.AddSourceToProjectRequest={encode($,tt=b.default.Writer.create()){return $.collectionId!==""&&tt.uint32(10).string($.collectionId),$.projectId!==""&&tt.uint32(18).string($.projectId),$.sourceId!==""&&tt.uint32(26).string($.sourceId),$.trigger!==void 0&&a.SourceTrigger.encode($.trigger,tt.uint32(34).fork()).ldelim(),tt},decode($,tt){const rt=$ instanceof b.default.Reader?$:new b.default.Reader($);let Nt=tt===void 0?rt.len:rt.pos+tt;const vt=uo();for(;rt.pos<Nt;){const Mt=rt.uint32();switch(Mt>>>3){case 1:vt.collectionId=rt.string();break;case 2:vt.projectId=rt.string();break;case 3:vt.sourceId=rt.string();break;case 4:vt.trigger=a.SourceTrigger.decode(rt,rt.uint32());break;default:rt.skipType(Mt&7);break}}return vt},fromJSON($){return{collectionId:Wt($.collectionId)?String($.collectionId):"",projectId:Wt($.projectId)?String($.projectId):"",sourceId:Wt($.sourceId)?String($.sourceId):"",trigger:Wt($.trigger)?a.SourceTrigger.fromJSON($.trigger):void 0}},toJSON($){const tt={};return $.collectionId!==void 0&&(tt.collectionId=$.collectionId),$.projectId!==void 0&&(tt.projectId=$.projectId),$.sourceId!==void 0&&(tt.sourceId=$.sourceId),$.trigger!==void 0&&(tt.trigger=$.trigger?a.SourceTrigger.toJSON($.trigger):void 0),tt},fromPartial($){var tt,rt,Nt;const vt=uo();return vt.collectionId=(tt=$.collectionId)!==null&&tt!==void 0?tt:"",vt.projectId=(rt=$.projectId)!==null&&rt!==void 0?rt:"",vt.sourceId=(Nt=$.sourceId)!==null&&Nt!==void 0?Nt:"",vt.trigger=$.trigger!==void 0&&$.trigger!==null?a.SourceTrigger.fromPartial($.trigger):void 0,vt}};function co(){return{project:void 0,broadcastUpdated:!1}}a.AddSourceToProjectResponse={encode($,tt=b.default.Writer.create()){return $.project!==void 0&&a.Project.encode($.project,tt.uint32(10).fork()).ldelim(),$.broadcastUpdated===!0&&tt.uint32(16).bool($.broadcastUpdated),tt},decode($,tt){const rt=$ instanceof b.default.Reader?$:new b.default.Reader($);let Nt=tt===void 0?rt.len:rt.pos+tt;const vt=co();for(;rt.pos<Nt;){const Mt=rt.uint32();switch(Mt>>>3){case 1:vt.project=a.Project.decode(rt,rt.uint32());break;case 2:vt.broadcastUpdated=rt.bool();break;default:rt.skipType(Mt&7);break}}return vt},fromJSON($){return{project:Wt($.project)?a.Project.fromJSON($.project):void 0,broadcastUpdated:Wt($.broadcastUpdated)?!!$.broadcastUpdated:!1}},toJSON($){const tt={};return $.project!==void 0&&(tt.project=$.project?a.Project.toJSON($.project):void 0),$.broadcastUpdated!==void 0&&(tt.broadcastUpdated=$.broadcastUpdated),tt},fromPartial($){var tt;const rt=co();return rt.project=$.project!==void 0&&$.project!==null?a.Project.fromPartial($.project):void 0,rt.broadcastUpdated=(tt=$.broadcastUpdated)!==null&&tt!==void 0?tt:!1,rt}};function lo(){return{collectionId:"",projectId:"",sourceId:"",updateMask:void 0,trigger:void 0}}a.UpdateSourceInProjectRequest={encode($,tt=b.default.Writer.create()){return $.collectionId!==""&&tt.uint32(10).string($.collectionId),$.projectId!==""&&tt.uint32(18).string($.projectId),$.sourceId!==""&&tt.uint32(26).string($.sourceId),$.updateMask!==void 0&&k.FieldMask.encode(k.FieldMask.wrap($.updateMask),tt.uint32(34).fork()).ldelim(),$.trigger!==void 0&&a.SourceTrigger.encode($.trigger,tt.uint32(42).fork()).ldelim(),tt},decode($,tt){const rt=$ instanceof b.default.Reader?$:new b.default.Reader($);let Nt=tt===void 0?rt.len:rt.pos+tt;const vt=lo();for(;rt.pos<Nt;){const Mt=rt.uint32();switch(Mt>>>3){case 1:vt.collectionId=rt.string();break;case 2:vt.projectId=rt.string();break;case 3:vt.sourceId=rt.string();break;case 4:vt.updateMask=k.FieldMask.unwrap(k.FieldMask.decode(rt,rt.uint32()));break;case 5:vt.trigger=a.SourceTrigger.decode(rt,rt.uint32());break;default:rt.skipType(Mt&7);break}}return vt},fromJSON($){return{collectionId:Wt($.collectionId)?String($.collectionId):"",projectId:Wt($.projectId)?String($.projectId):"",sourceId:Wt($.sourceId)?String($.sourceId):"",updateMask:Wt($.updateMask)?k.FieldMask.unwrap(k.FieldMask.fromJSON($.updateMask)):void 0,trigger:Wt($.trigger)?a.SourceTrigger.fromJSON($.trigger):void 0}},toJSON($){const tt={};return $.collectionId!==void 0&&(tt.collectionId=$.collectionId),$.projectId!==void 0&&(tt.projectId=$.projectId),$.sourceId!==void 0&&(tt.sourceId=$.sourceId),$.updateMask!==void 0&&(tt.updateMask=k.FieldMask.toJSON(k.FieldMask.wrap($.updateMask))),$.trigger!==void 0&&(tt.trigger=$.trigger?a.SourceTrigger.toJSON($.trigger):void 0),tt},fromPartial($){var tt,rt,Nt,vt;const Mt=lo();return Mt.collectionId=(tt=$.collectionId)!==null&&tt!==void 0?tt:"",Mt.projectId=(rt=$.projectId)!==null&&rt!==void 0?rt:"",Mt.sourceId=(Nt=$.sourceId)!==null&&Nt!==void 0?Nt:"",Mt.updateMask=(vt=$.updateMask)!==null&&vt!==void 0?vt:void 0,Mt.trigger=$.trigger!==void 0&&$.trigger!==null?a.SourceTrigger.fromPartial($.trigger):void 0,Mt}};function fo(){return{project:void 0}}a.UpdateSourceInProjectResponse={encode($,tt=b.default.Writer.create()){return $.project!==void 0&&a.Project.encode($.project,tt.uint32(10).fork()).ldelim(),tt},decode($,tt){const rt=$ instanceof b.default.Reader?$:new b.default.Reader($);let Nt=tt===void 0?rt.len:rt.pos+tt;const vt=fo();for(;rt.pos<Nt;){const Mt=rt.uint32();switch(Mt>>>3){case 1:vt.project=a.Project.decode(rt,rt.uint32());break;default:rt.skipType(Mt&7);break}}return vt},fromJSON($){return{project:Wt($.project)?a.Project.fromJSON($.project):void 0}},toJSON($){const tt={};return $.project!==void 0&&(tt.project=$.project?a.Project.toJSON($.project):void 0),tt},fromPartial($){const tt=fo();return tt.project=$.project!==void 0&&$.project!==null?a.Project.fromPartial($.project):void 0,tt}};function po(){return{collectionId:"",sourceId:""}}a.GetSourceRequest={encode($,tt=b.default.Writer.create()){return $.collectionId!==""&&tt.uint32(10).string($.collectionId),$.sourceId!==""&&tt.uint32(26).string($.sourceId),tt},decode($,tt){const rt=$ instanceof b.default.Reader?$:new b.default.Reader($);let Nt=tt===void 0?rt.len:rt.pos+tt;const vt=po();for(;rt.pos<Nt;){const Mt=rt.uint32();switch(Mt>>>3){case 1:vt.collectionId=rt.string();break;case 3:vt.sourceId=rt.string();break;default:rt.skipType(Mt&7);break}}return vt},fromJSON($){return{collectionId:Wt($.collectionId)?String($.collectionId):"",sourceId:Wt($.sourceId)?String($.sourceId):""}},toJSON($){const tt={};return $.collectionId!==void 0&&(tt.collectionId=$.collectionId),$.sourceId!==void 0&&(tt.sourceId=$.sourceId),tt},fromPartial($){var tt,rt;const Nt=po();return Nt.collectionId=(tt=$.collectionId)!==null&&tt!==void 0?tt:"",Nt.sourceId=(rt=$.sourceId)!==null&&rt!==void 0?rt:"",Nt}};function ho(){return{source:void 0}}a.GetSourceResponse={encode($,tt=b.default.Writer.create()){return $.source!==void 0&&a.Source.encode($.source,tt.uint32(10).fork()).ldelim(),tt},decode($,tt){const rt=$ instanceof b.default.Reader?$:new b.default.Reader($);let Nt=tt===void 0?rt.len:rt.pos+tt;const vt=ho();for(;rt.pos<Nt;){const Mt=rt.uint32();switch(Mt>>>3){case 1:vt.source=a.Source.decode(rt,rt.uint32());break;default:rt.skipType(Mt&7);break}}return vt},fromJSON($){return{source:Wt($.source)?a.Source.fromJSON($.source):void 0}},toJSON($){const tt={};return $.source!==void 0&&(tt.source=$.source?a.Source.toJSON($.source):void 0),tt},fromPartial($){const tt=ho();return tt.source=$.source!==void 0&&$.source!==null?a.Source.fromPartial($.source):void 0,tt}};function mo(){return{collectionId:""}}a.GetSourcesRequest={encode($,tt=b.default.Writer.create()){return $.collectionId!==""&&tt.uint32(10).string($.collectionId),tt},decode($,tt){const rt=$ instanceof b.default.Reader?$:new b.default.Reader($);let Nt=tt===void 0?rt.len:rt.pos+tt;const vt=mo();for(;rt.pos<Nt;){const Mt=rt.uint32();switch(Mt>>>3){case 1:vt.collectionId=rt.string();break;default:rt.skipType(Mt&7);break}}return vt},fromJSON($){return{collectionId:Wt($.collectionId)?String($.collectionId):""}},toJSON($){const tt={};return $.collectionId!==void 0&&(tt.collectionId=$.collectionId),tt},fromPartial($){var tt;const rt=mo();return rt.collectionId=(tt=$.collectionId)!==null&&tt!==void 0?tt:"",rt}};function vo(){return{sources:[]}}a.GetSourcesResponse={encode($,tt=b.default.Writer.create()){for(const rt of $.sources)a.Source.encode(rt,tt.uint32(10).fork()).ldelim();return tt},decode($,tt){const rt=$ instanceof b.default.Reader?$:new b.default.Reader($);let Nt=tt===void 0?rt.len:rt.pos+tt;const vt=vo();for(;rt.pos<Nt;){const Mt=rt.uint32();switch(Mt>>>3){case 1:vt.sources.push(a.Source.decode(rt,rt.uint32()));break;default:rt.skipType(Mt&7);break}}return vt},fromJSON($){return{sources:Array.isArray($==null?void 0:$.sources)?$.sources.map(tt=>a.Source.fromJSON(tt)):[]}},toJSON($){const tt={};return $.sources?tt.sources=$.sources.map(rt=>rt?a.Source.toJSON(rt):void 0):tt.sources=[],tt},fromPartial($){var tt;const rt=vo();return rt.sources=((tt=$.sources)===null||tt===void 0?void 0:tt.map(Nt=>a.Source.fromPartial(Nt)))||[],rt}};function yo(){return{collectionId:"",sourceId:"",updateMask:void 0,metadata:void 0,address:void 0,preview:void 0}}a.UpdateSourceRequest={encode($,tt=b.default.Writer.create()){return $.collectionId!==""&&tt.uint32(10).string($.collectionId),$.sourceId!==""&&tt.uint32(26).string($.sourceId),$.updateMask!==void 0&&k.FieldMask.encode(k.FieldMask.wrap($.updateMask),tt.uint32(34).fork()).ldelim(),$.metadata!==void 0&&j.Value.encode(j.Value.wrap($.metadata),tt.uint32(42).fork()).ldelim(),$.address!==void 0&&a.SourceAddress.encode($.address,tt.uint32(50).fork()).ldelim(),$.preview!==void 0&&a.PreviewAddress.encode($.preview,tt.uint32(58).fork()).ldelim(),tt},decode($,tt){const rt=$ instanceof b.default.Reader?$:new b.default.Reader($);let Nt=tt===void 0?rt.len:rt.pos+tt;const vt=yo();for(;rt.pos<Nt;){const Mt=rt.uint32();switch(Mt>>>3){case 1:vt.collectionId=rt.string();break;case 3:vt.sourceId=rt.string();break;case 4:vt.updateMask=k.FieldMask.unwrap(k.FieldMask.decode(rt,rt.uint32()));break;case 5:vt.metadata=j.Value.unwrap(j.Value.decode(rt,rt.uint32()));break;case 6:vt.address=a.SourceAddress.decode(rt,rt.uint32());break;case 7:vt.preview=a.PreviewAddress.decode(rt,rt.uint32());break;default:rt.skipType(Mt&7);break}}return vt},fromJSON($){return{collectionId:Wt($.collectionId)?String($.collectionId):"",sourceId:Wt($.sourceId)?String($.sourceId):"",updateMask:Wt($.updateMask)?k.FieldMask.unwrap(k.FieldMask.fromJSON($.updateMask)):void 0,metadata:Wt($==null?void 0:$.metadata)?$.metadata:void 0,address:Wt($.address)?a.SourceAddress.fromJSON($.address):void 0,preview:Wt($.preview)?a.PreviewAddress.fromJSON($.preview):void 0}},toJSON($){const tt={};return $.collectionId!==void 0&&(tt.collectionId=$.collectionId),$.sourceId!==void 0&&(tt.sourceId=$.sourceId),$.updateMask!==void 0&&(tt.updateMask=k.FieldMask.toJSON(k.FieldMask.wrap($.updateMask))),$.metadata!==void 0&&(tt.metadata=$.metadata),$.address!==void 0&&(tt.address=$.address?a.SourceAddress.toJSON($.address):void 0),$.preview!==void 0&&(tt.preview=$.preview?a.PreviewAddress.toJSON($.preview):void 0),tt},fromPartial($){var tt,rt,Nt,vt;const Mt=yo();return Mt.collectionId=(tt=$.collectionId)!==null&&tt!==void 0?tt:"",Mt.sourceId=(rt=$.sourceId)!==null&&rt!==void 0?rt:"",Mt.updateMask=(Nt=$.updateMask)!==null&&Nt!==void 0?Nt:void 0,Mt.metadata=(vt=$.metadata)!==null&&vt!==void 0?vt:void 0,Mt.address=$.address!==void 0&&$.address!==null?a.SourceAddress.fromPartial($.address):void 0,Mt.preview=$.preview!==void 0&&$.preview!==null?a.PreviewAddress.fromPartial($.preview):void 0,Mt}};function So(){return{source:void 0,broadcastUpdated:!1}}a.UpdateSourceResponse={encode($,tt=b.default.Writer.create()){return $.source!==void 0&&a.Source.encode($.source,tt.uint32(10).fork()).ldelim(),$.broadcastUpdated===!0&&tt.uint32(16).bool($.broadcastUpdated),tt},decode($,tt){const rt=$ instanceof b.default.Reader?$:new b.default.Reader($);let Nt=tt===void 0?rt.len:rt.pos+tt;const vt=So();for(;rt.pos<Nt;){const Mt=rt.uint32();switch(Mt>>>3){case 1:vt.source=a.Source.decode(rt,rt.uint32());break;case 2:vt.broadcastUpdated=rt.bool();break;default:rt.skipType(Mt&7);break}}return vt},fromJSON($){return{source:Wt($.source)?a.Source.fromJSON($.source):void 0,broadcastUpdated:Wt($.broadcastUpdated)?!!$.broadcastUpdated:!1}},toJSON($){const tt={};return $.source!==void 0&&(tt.source=$.source?a.Source.toJSON($.source):void 0),$.broadcastUpdated!==void 0&&(tt.broadcastUpdated=$.broadcastUpdated),tt},fromPartial($){var tt;const rt=So();return rt.source=$.source!==void 0&&$.source!==null?a.Source.fromPartial($.source):void 0,rt.broadcastUpdated=(tt=$.broadcastUpdated)!==null&&tt!==void 0?tt:!1,rt}};function go(){return{collectionId:"",projectId:"",sourceId:"",force:void 0}}a.RemoveSourceFromProjectRequest={encode($,tt=b.default.Writer.create()){return $.collectionId!==""&&tt.uint32(10).string($.collectionId),$.projectId!==""&&tt.uint32(18).string($.projectId),$.sourceId!==""&&tt.uint32(26).string($.sourceId),$.force!==void 0&&tt.uint32(32).bool($.force),tt},decode($,tt){const rt=$ instanceof b.default.Reader?$:new b.default.Reader($);let Nt=tt===void 0?rt.len:rt.pos+tt;const vt=go();for(;rt.pos<Nt;){const Mt=rt.uint32();switch(Mt>>>3){case 1:vt.collectionId=rt.string();break;case 2:vt.projectId=rt.string();break;case 3:vt.sourceId=rt.string();break;case 4:vt.force=rt.bool();break;default:rt.skipType(Mt&7);break}}return vt},fromJSON($){return{collectionId:Wt($.collectionId)?String($.collectionId):"",projectId:Wt($.projectId)?String($.projectId):"",sourceId:Wt($.sourceId)?String($.sourceId):"",force:Wt($.force)?!!$.force:void 0}},toJSON($){const tt={};return $.collectionId!==void 0&&(tt.collectionId=$.collectionId),$.projectId!==void 0&&(tt.projectId=$.projectId),$.sourceId!==void 0&&(tt.sourceId=$.sourceId),$.force!==void 0&&(tt.force=$.force),tt},fromPartial($){var tt,rt,Nt,vt;const Mt=go();return Mt.collectionId=(tt=$.collectionId)!==null&&tt!==void 0?tt:"",Mt.projectId=(rt=$.projectId)!==null&&rt!==void 0?rt:"",Mt.sourceId=(Nt=$.sourceId)!==null&&Nt!==void 0?Nt:"",Mt.force=(vt=$.force)!==null&&vt!==void 0?vt:void 0,Mt}};function Eo(){return{project:void 0,broadcastUpdated:!1}}a.RemoveSourceFromProjectResponse={encode($,tt=b.default.Writer.create()){return $.project!==void 0&&a.Project.encode($.project,tt.uint32(10).fork()).ldelim(),$.broadcastUpdated===!0&&tt.uint32(16).bool($.broadcastUpdated),tt},decode($,tt){const rt=$ instanceof b.default.Reader?$:new b.default.Reader($);let Nt=tt===void 0?rt.len:rt.pos+tt;const vt=Eo();for(;rt.pos<Nt;){const Mt=rt.uint32();switch(Mt>>>3){case 1:vt.project=a.Project.decode(rt,rt.uint32());break;case 2:vt.broadcastUpdated=rt.bool();break;default:rt.skipType(Mt&7);break}}return vt},fromJSON($){return{project:Wt($.project)?a.Project.fromJSON($.project):void 0,broadcastUpdated:Wt($.broadcastUpdated)?!!$.broadcastUpdated:!1}},toJSON($){const tt={};return $.project!==void 0&&(tt.project=$.project?a.Project.toJSON($.project):void 0),$.broadcastUpdated!==void 0&&(tt.broadcastUpdated=$.broadcastUpdated),tt},fromPartial($){var tt;const rt=Eo();return rt.project=$.project!==void 0&&$.project!==null?a.Project.fromPartial($.project):void 0,rt.broadcastUpdated=(tt=$.broadcastUpdated)!==null&&tt!==void 0?tt:!1,rt}};function bo(){return{collectionId:"",sourceId:"",accessToken:void 0}}a.GetSourcePlaylistRequest={encode($,tt=b.default.Writer.create()){return $.collectionId!==""&&tt.uint32(10).string($.collectionId),$.sourceId!==""&&tt.uint32(26).string($.sourceId),$.accessToken!==void 0&&tt.uint32(34).string($.accessToken),tt},decode($,tt){const rt=$ instanceof b.default.Reader?$:new b.default.Reader($);let Nt=tt===void 0?rt.len:rt.pos+tt;const vt=bo();for(;rt.pos<Nt;){const Mt=rt.uint32();switch(Mt>>>3){case 1:vt.collectionId=rt.string();break;case 3:vt.sourceId=rt.string();break;case 4:vt.accessToken=rt.string();break;default:rt.skipType(Mt&7);break}}return vt},fromJSON($){return{collectionId:Wt($.collectionId)?String($.collectionId):"",sourceId:Wt($.sourceId)?String($.sourceId):"",accessToken:Wt($.accessToken)?String($.accessToken):void 0}},toJSON($){const tt={};return $.collectionId!==void 0&&(tt.collectionId=$.collectionId),$.sourceId!==void 0&&(tt.sourceId=$.sourceId),$.accessToken!==void 0&&(tt.accessToken=$.accessToken),tt},fromPartial($){var tt,rt,Nt;const vt=bo();return vt.collectionId=(tt=$.collectionId)!==null&&tt!==void 0?tt:"",vt.sourceId=(rt=$.sourceId)!==null&&rt!==void 0?rt:"",vt.accessToken=(Nt=$.accessToken)!==null&&Nt!==void 0?Nt:void 0,vt}};function To(){return{manifest:""}}a.GetSourcePlaylistResponse={encode($,tt=b.default.Writer.create()){return $.manifest!==""&&tt.uint32(10).string($.manifest),tt},decode($,tt){const rt=$ instanceof b.default.Reader?$:new b.default.Reader($);let Nt=tt===void 0?rt.len:rt.pos+tt;const vt=To();for(;rt.pos<Nt;){const Mt=rt.uint32();switch(Mt>>>3){case 1:vt.manifest=rt.string();break;default:rt.skipType(Mt&7);break}}return vt},fromJSON($){return{manifest:Wt($.manifest)?String($.manifest):""}},toJSON($){const tt={};return $.manifest!==void 0&&(tt.manifest=$.manifest),tt},fromPartial($){var tt;const rt=To();return rt.manifest=(tt=$.manifest)!==null&&tt!==void 0?tt:"",rt}};function _o(){return{serviceUserId:"",displayName:void 0,role:void 0,maxDuration:void 0}}a.CreateAccessTokenRequest={encode($,tt=b.default.Writer.create()){return $.serviceUserId!==""&&tt.uint32(10).string($.serviceUserId),$.displayName!==void 0&&tt.uint32(34).string($.displayName),$.role!==void 0&&tt.uint32(16).int32(Xt($.role)),$.maxDuration!==void 0&&tt.uint32(24).uint32($.maxDuration),tt},decode($,tt){const rt=$ instanceof b.default.Reader?$:new b.default.Reader($);let Nt=tt===void 0?rt.len:rt.pos+tt;const vt=_o();for(;rt.pos<Nt;){const Mt=rt.uint32();switch(Mt>>>3){case 1:vt.serviceUserId=rt.string();break;case 4:vt.displayName=rt.string();break;case 2:vt.role=nn(rt.int32());break;case 3:vt.maxDuration=rt.uint32();break;default:rt.skipType(Mt&7);break}}return vt},fromJSON($){return{serviceUserId:Wt($.serviceUserId)?String($.serviceUserId):"",displayName:Wt($.displayName)?String($.displayName):void 0,role:Wt($.role)?nn($.role):void 0,maxDuration:Wt($.maxDuration)?Number($.maxDuration):void 0}},toJSON($){const tt={};return $.serviceUserId!==void 0&&(tt.serviceUserId=$.serviceUserId),$.displayName!==void 0&&(tt.displayName=$.displayName),$.role!==void 0&&(tt.role=$.role!==void 0?gn($.role):void 0),$.maxDuration!==void 0&&(tt.maxDuration=Math.round($.maxDuration)),tt},fromPartial($){var tt,rt,Nt,vt;const Mt=_o();return Mt.serviceUserId=(tt=$.serviceUserId)!==null&&tt!==void 0?tt:"",Mt.displayName=(rt=$.displayName)!==null&&rt!==void 0?rt:void 0,Mt.role=(Nt=$.role)!==null&&Nt!==void 0?Nt:void 0,Mt.maxDuration=(vt=$.maxDuration)!==null&&vt!==void 0?vt:void 0,Mt}};function ko(){return{accessToken:""}}a.CreateAccessTokenResponse={encode($,tt=b.default.Writer.create()){return $.accessToken!==""&&tt.uint32(10).string($.accessToken),tt},decode($,tt){const rt=$ instanceof b.default.Reader?$:new b.default.Reader($);let Nt=tt===void 0?rt.len:rt.pos+tt;const vt=ko();for(;rt.pos<Nt;){const Mt=rt.uint32();switch(Mt>>>3){case 1:vt.accessToken=rt.string();break;default:rt.skipType(Mt&7);break}}return vt},fromJSON($){return{accessToken:Wt($.accessToken)?String($.accessToken):""}},toJSON($){const tt={};return $.accessToken!==void 0&&(tt.accessToken=$.accessToken),tt},fromPartial($){var tt;const rt=ko();return rt.accessToken=(tt=$.accessToken)!==null&&tt!==void 0?tt:"",rt}};function Io(){return{displayName:"",serviceUserId:void 0}}a.GuestAccessTokenDirect={encode($,tt=b.default.Writer.create()){return $.displayName!==""&&tt.uint32(10).string($.displayName),$.serviceUserId!==void 0&&tt.uint32(18).string($.serviceUserId),tt},decode($,tt){const rt=$ instanceof b.default.Reader?$:new b.default.Reader($);let Nt=tt===void 0?rt.len:rt.pos+tt;const vt=Io();for(;rt.pos<Nt;){const Mt=rt.uint32();switch(Mt>>>3){case 1:vt.displayName=rt.string();break;case 2:vt.serviceUserId=rt.string();break;default:rt.skipType(Mt&7);break}}return vt},fromJSON($){return{displayName:Wt($.displayName)?String($.displayName):"",serviceUserId:Wt($.serviceUserId)?String($.serviceUserId):void 0}},toJSON($){const tt={};return $.displayName!==void 0&&(tt.displayName=$.displayName),$.serviceUserId!==void 0&&(tt.serviceUserId=$.serviceUserId),tt},fromPartial($){var tt,rt;const Nt=Io();return Nt.displayName=(tt=$.displayName)!==null&&tt!==void 0?tt:"",Nt.serviceUserId=(rt=$.serviceUserId)!==null&&rt!==void 0?rt:void 0,Nt}};function Co(){return{maxDuration:void 0}}a.GuestAccessTokenExchange={encode($,tt=b.default.Writer.create()){return $.maxDuration!==void 0&&tt.uint32(8).uint32($.maxDuration),tt},decode($,tt){const rt=$ instanceof b.default.Reader?$:new b.default.Reader($);let Nt=tt===void 0?rt.len:rt.pos+tt;const vt=Co();for(;rt.pos<Nt;){const Mt=rt.uint32();switch(Mt>>>3){case 1:vt.maxDuration=rt.uint32();break;default:rt.skipType(Mt&7);break}}return vt},fromJSON($){return{maxDuration:Wt($.maxDuration)?Number($.maxDuration):void 0}},toJSON($){const tt={};return $.maxDuration!==void 0&&(tt.maxDuration=Math.round($.maxDuration)),tt},fromPartial($){var tt;const rt=Co();return rt.maxDuration=(tt=$.maxDuration)!==null&&tt!==void 0?tt:void 0,rt}};function Ro(){return{direct:void 0,exchange:void 0}}a.GuestAccessToken={encode($,tt=b.default.Writer.create()){return $.direct!==void 0&&a.GuestAccessTokenDirect.encode($.direct,tt.uint32(10).fork()).ldelim(),$.exchange!==void 0&&a.GuestAccessTokenExchange.encode($.exchange,tt.uint32(18).fork()).ldelim(),tt},decode($,tt){const rt=$ instanceof b.default.Reader?$:new b.default.Reader($);let Nt=tt===void 0?rt.len:rt.pos+tt;const vt=Ro();for(;rt.pos<Nt;){const Mt=rt.uint32();switch(Mt>>>3){case 1:vt.direct=a.GuestAccessTokenDirect.decode(rt,rt.uint32());break;case 2:vt.exchange=a.GuestAccessTokenExchange.decode(rt,rt.uint32());break;default:rt.skipType(Mt&7);break}}return vt},fromJSON($){return{direct:Wt($.direct)?a.GuestAccessTokenDirect.fromJSON($.direct):void 0,exchange:Wt($.exchange)?a.GuestAccessTokenExchange.fromJSON($.exchange):void 0}},toJSON($){const tt={};return $.direct!==void 0&&(tt.direct=$.direct?a.GuestAccessTokenDirect.toJSON($.direct):void 0),$.exchange!==void 0&&(tt.exchange=$.exchange?a.GuestAccessTokenExchange.toJSON($.exchange):void 0),tt},fromPartial($){const tt=Ro();return tt.direct=$.direct!==void 0&&$.direct!==null?a.GuestAccessTokenDirect.fromPartial($.direct):void 0,tt.exchange=$.exchange!==void 0&&$.exchange!==null?a.GuestAccessTokenExchange.fromPartial($.exchange):void 0,tt}};function Oo(){return{collectionId:"",projectId:"",maxDuration:void 0,role:Gt.ROLE_UNSPECIFIED,token:void 0,url:void 0}}a.CreateGuestAccessTokenRequest={encode($,tt=b.default.Writer.create()){return $.collectionId!==""&&tt.uint32(10).string($.collectionId),$.projectId!==""&&tt.uint32(18).string($.projectId),$.maxDuration!==void 0&&tt.uint32(24).uint32($.maxDuration),$.role!==Gt.ROLE_UNSPECIFIED&&tt.uint32(32).int32(Xt($.role)),$.token!==void 0&&a.GuestAccessToken.encode($.token,tt.uint32(42).fork()).ldelim(),$.url!==void 0&&tt.uint32(50).string($.url),tt},decode($,tt){const rt=$ instanceof b.default.Reader?$:new b.default.Reader($);let Nt=tt===void 0?rt.len:rt.pos+tt;const vt=Oo();for(;rt.pos<Nt;){const Mt=rt.uint32();switch(Mt>>>3){case 1:vt.collectionId=rt.string();break;case 2:vt.projectId=rt.string();break;case 3:vt.maxDuration=rt.uint32();break;case 4:vt.role=nn(rt.int32());break;case 5:vt.token=a.GuestAccessToken.decode(rt,rt.uint32());break;case 6:vt.url=rt.string();break;default:rt.skipType(Mt&7);break}}return vt},fromJSON($){return{collectionId:Wt($.collectionId)?String($.collectionId):"",projectId:Wt($.projectId)?String($.projectId):"",maxDuration:Wt($.maxDuration)?Number($.maxDuration):void 0,role:Wt($.role)?nn($.role):Gt.ROLE_UNSPECIFIED,token:Wt($.token)?a.GuestAccessToken.fromJSON($.token):void 0,url:Wt($.url)?String($.url):void 0}},toJSON($){const tt={};return $.collectionId!==void 0&&(tt.collectionId=$.collectionId),$.projectId!==void 0&&(tt.projectId=$.projectId),$.maxDuration!==void 0&&(tt.maxDuration=Math.round($.maxDuration)),$.role!==void 0&&(tt.role=gn($.role)),$.token!==void 0&&(tt.token=$.token?a.GuestAccessToken.toJSON($.token):void 0),$.url!==void 0&&(tt.url=$.url),tt},fromPartial($){var tt,rt,Nt,vt,Mt;const Pn=Oo();return Pn.collectionId=(tt=$.collectionId)!==null&&tt!==void 0?tt:"",Pn.projectId=(rt=$.projectId)!==null&&rt!==void 0?rt:"",Pn.maxDuration=(Nt=$.maxDuration)!==null&&Nt!==void 0?Nt:void 0,Pn.role=(vt=$.role)!==null&&vt!==void 0?vt:Gt.ROLE_UNSPECIFIED,Pn.token=$.token!==void 0&&$.token!==null?a.GuestAccessToken.fromPartial($.token):void 0,Pn.url=(Mt=$.url)!==null&&Mt!==void 0?Mt:void 0,Pn}};function Po(){return{accessToken:"",url:void 0}}a.CreateGuestAccessTokenResponse={encode($,tt=b.default.Writer.create()){return $.accessToken!==""&&tt.uint32(10).string($.accessToken),$.url!==void 0&&tt.uint32(18).string($.url),tt},decode($,tt){const rt=$ instanceof b.default.Reader?$:new b.default.Reader($);let Nt=tt===void 0?rt.len:rt.pos+tt;const vt=Po();for(;rt.pos<Nt;){const Mt=rt.uint32();switch(Mt>>>3){case 1:vt.accessToken=rt.string();break;case 2:vt.url=rt.string();break;default:rt.skipType(Mt&7);break}}return vt},fromJSON($){return{accessToken:Wt($.accessToken)?String($.accessToken):"",url:Wt($.url)?String($.url):void 0}},toJSON($){const tt={};return $.accessToken!==void 0&&(tt.accessToken=$.accessToken),$.url!==void 0&&(tt.url=$.url),tt},fromPartial($){var tt,rt;const Nt=Po();return Nt.accessToken=(tt=$.accessToken)!==null&&tt!==void 0?tt:"",Nt.url=(rt=$.url)!==null&&rt!==void 0?rt:void 0,Nt}};function No(){return{collectionId:"",projectId:"",displayName:""}}a.CreateWebRtcAccessTokenRequest={encode($,tt=b.default.Writer.create()){return $.collectionId!==""&&tt.uint32(10).string($.collectionId),$.projectId!==""&&tt.uint32(18).string($.projectId),$.displayName!==""&&tt.uint32(26).string($.displayName),tt},decode($,tt){const rt=$ instanceof b.default.Reader?$:new b.default.Reader($);let Nt=tt===void 0?rt.len:rt.pos+tt;const vt=No();for(;rt.pos<Nt;){const Mt=rt.uint32();switch(Mt>>>3){case 1:vt.collectionId=rt.string();break;case 2:vt.projectId=rt.string();break;case 3:vt.displayName=rt.string();break;default:rt.skipType(Mt&7);break}}return vt},fromJSON($){return{collectionId:Wt($.collectionId)?String($.collectionId):"",projectId:Wt($.projectId)?String($.projectId):"",displayName:Wt($.displayName)?String($.displayName):""}},toJSON($){const tt={};return $.collectionId!==void 0&&(tt.collectionId=$.collectionId),$.projectId!==void 0&&(tt.projectId=$.projectId),$.displayName!==void 0&&(tt.displayName=$.displayName),tt},fromPartial($){var tt,rt,Nt;const vt=No();return vt.collectionId=(tt=$.collectionId)!==null&&tt!==void 0?tt:"",vt.projectId=(rt=$.projectId)!==null&&rt!==void 0?rt:"",vt.displayName=(Nt=$.displayName)!==null&&Nt!==void 0?Nt:"",vt}};function wo(){return{webrtcAccess:void 0}}a.CreateWebRtcAccessTokenResponse={encode($,tt=b.default.Writer.create()){return $.webrtcAccess!==void 0&&a.WebRtcAccess.encode($.webrtcAccess,tt.uint32(18).fork()).ldelim(),tt},decode($,tt){const rt=$ instanceof b.default.Reader?$:new b.default.Reader($);let Nt=tt===void 0?rt.len:rt.pos+tt;const vt=wo();for(;rt.pos<Nt;){const Mt=rt.uint32();switch(Mt>>>3){case 2:vt.webrtcAccess=a.WebRtcAccess.decode(rt,rt.uint32());break;default:rt.skipType(Mt&7);break}}return vt},fromJSON($){return{webrtcAccess:Wt($.webrtcAccess)?a.WebRtcAccess.fromJSON($.webrtcAccess):void 0}},toJSON($){const tt={};return $.webrtcAccess!==void 0&&(tt.webrtcAccess=$.webrtcAccess?a.WebRtcAccess.toJSON($.webrtcAccess):void 0),tt},fromPartial($){const tt=wo();return tt.webrtcAccess=$.webrtcAccess!==void 0&&$.webrtcAccess!==null?a.WebRtcAccess.fromPartial($.webrtcAccess):void 0,tt}};function Ao(){return{}}a.RefreshAccessTokenRequest={encode($,tt=b.default.Writer.create()){return tt},decode($,tt){const rt=$ instanceof b.default.Reader?$:new b.default.Reader($);let Nt=tt===void 0?rt.len:rt.pos+tt;const vt=Ao();for(;rt.pos<Nt;){const Mt=rt.uint32();switch(Mt>>>3){default:rt.skipType(Mt&7);break}}return vt},fromJSON($){return{}},toJSON($){return{}},fromPartial($){return Ao()}};function Do(){return{}}a.RefreshAccessTokenResponse={encode($,tt=b.default.Writer.create()){return tt},decode($,tt){const rt=$ instanceof b.default.Reader?$:new b.default.Reader($);let Nt=tt===void 0?rt.len:rt.pos+tt;const vt=Do();for(;rt.pos<Nt;){const Mt=rt.uint32();switch(Mt>>>3){default:rt.skipType(Mt&7);break}}return vt},fromJSON($){return{}},toJSON($){return{}},fromPartial($){return Do()}};function Lo(){return{collectionId:"",projectId:"",code:"",url:"",autoDelete:void 0}}a.GuestCode={encode($,tt=b.default.Writer.create()){return $.collectionId!==""&&tt.uint32(10).string($.collectionId),$.projectId!==""&&tt.uint32(18).string($.projectId),$.code!==""&&tt.uint32(26).string($.code),$.url!==""&&tt.uint32(34).string($.url),$.autoDelete!==void 0&&_e.Timestamp.encode(yr($.autoDelete),tt.uint32(42).fork()).ldelim(),tt},decode($,tt){const rt=$ instanceof b.default.Reader?$:new b.default.Reader($);let Nt=tt===void 0?rt.len:rt.pos+tt;const vt=Lo();for(;rt.pos<Nt;){const Mt=rt.uint32();switch(Mt>>>3){case 1:vt.collectionId=rt.string();break;case 2:vt.projectId=rt.string();break;case 3:vt.code=rt.string();break;case 4:vt.url=rt.string();break;case 5:vt.autoDelete=Sr(_e.Timestamp.decode(rt,rt.uint32()));break;default:rt.skipType(Mt&7);break}}return vt},fromJSON($){return{collectionId:Wt($.collectionId)?String($.collectionId):"",projectId:Wt($.projectId)?String($.projectId):"",code:Wt($.code)?String($.code):"",url:Wt($.url)?String($.url):"",autoDelete:Wt($.autoDelete)?String($.autoDelete):void 0}},toJSON($){const tt={};return $.collectionId!==void 0&&(tt.collectionId=$.collectionId),$.projectId!==void 0&&(tt.projectId=$.projectId),$.code!==void 0&&(tt.code=$.code),$.url!==void 0&&(tt.url=$.url),$.autoDelete!==void 0&&(tt.autoDelete=$.autoDelete),tt},fromPartial($){var tt,rt,Nt,vt,Mt;const Pn=Lo();return Pn.collectionId=(tt=$.collectionId)!==null&&tt!==void 0?tt:"",Pn.projectId=(rt=$.projectId)!==null&&rt!==void 0?rt:"",Pn.code=(Nt=$.code)!==null&&Nt!==void 0?Nt:"",Pn.url=(vt=$.url)!==null&&vt!==void 0?vt:"",Pn.autoDelete=(Mt=$.autoDelete)!==null&&Mt!==void 0?Mt:void 0,Pn}};function Mo(){return{serviceId:"",code:""}}a.GuestCodeRedirectRequest={encode($,tt=b.default.Writer.create()){return $.serviceId!==""&&tt.uint32(10).string($.serviceId),$.code!==""&&tt.uint32(18).string($.code),tt},decode($,tt){const rt=$ instanceof b.default.Reader?$:new b.default.Reader($);let Nt=tt===void 0?rt.len:rt.pos+tt;const vt=Mo();for(;rt.pos<Nt;){const Mt=rt.uint32();switch(Mt>>>3){case 1:vt.serviceId=rt.string();break;case 2:vt.code=rt.string();break;default:rt.skipType(Mt&7);break}}return vt},fromJSON($){return{serviceId:Wt($.serviceId)?String($.serviceId):"",code:Wt($.code)?String($.code):""}},toJSON($){const tt={};return $.serviceId!==void 0&&(tt.serviceId=$.serviceId),$.code!==void 0&&(tt.code=$.code),tt},fromPartial($){var tt,rt;const Nt=Mo();return Nt.serviceId=(tt=$.serviceId)!==null&&tt!==void 0?tt:"",Nt.code=(rt=$.code)!==null&&rt!==void 0?rt:"",Nt}};function $o(){return{}}a.GuestCodeRedirectResponse={encode($,tt=b.default.Writer.create()){return tt},decode($,tt){const rt=$ instanceof b.default.Reader?$:new b.default.Reader($);let Nt=tt===void 0?rt.len:rt.pos+tt;const vt=$o();for(;rt.pos<Nt;){const Mt=rt.uint32();switch(Mt>>>3){default:rt.skipType(Mt&7);break}}return vt},fromJSON($){return{}},toJSON($){return{}},fromPartial($){return $o()}};function Uo(){return{alg:"",kty:"",use:"",kid:"",e:"",n:""}}a.JsonWebKey={encode($,tt=b.default.Writer.create()){return $.alg!==""&&tt.uint32(10).string($.alg),$.kty!==""&&tt.uint32(18).string($.kty),$.use!==""&&tt.uint32(26).string($.use),$.kid!==""&&tt.uint32(34).string($.kid),$.e!==""&&tt.uint32(42).string($.e),$.n!==""&&tt.uint32(50).string($.n),tt},decode($,tt){const rt=$ instanceof b.default.Reader?$:new b.default.Reader($);let Nt=tt===void 0?rt.len:rt.pos+tt;const vt=Uo();for(;rt.pos<Nt;){const Mt=rt.uint32();switch(Mt>>>3){case 1:vt.alg=rt.string();break;case 2:vt.kty=rt.string();break;case 3:vt.use=rt.string();break;case 4:vt.kid=rt.string();break;case 5:vt.e=rt.string();break;case 6:vt.n=rt.string();break;default:rt.skipType(Mt&7);break}}return vt},fromJSON($){return{alg:Wt($.alg)?String($.alg):"",kty:Wt($.kty)?String($.kty):"",use:Wt($.use)?String($.use):"",kid:Wt($.kid)?String($.kid):"",e:Wt($.e)?String($.e):"",n:Wt($.n)?String($.n):""}},toJSON($){const tt={};return $.alg!==void 0&&(tt.alg=$.alg),$.kty!==void 0&&(tt.kty=$.kty),$.use!==void 0&&(tt.use=$.use),$.kid!==void 0&&(tt.kid=$.kid),$.e!==void 0&&(tt.e=$.e),$.n!==void 0&&(tt.n=$.n),tt},fromPartial($){var tt,rt,Nt,vt,Mt,Pn;const Un=Uo();return Un.alg=(tt=$.alg)!==null&&tt!==void 0?tt:"",Un.kty=(rt=$.kty)!==null&&rt!==void 0?rt:"",Un.use=(Nt=$.use)!==null&&Nt!==void 0?Nt:"",Un.kid=(vt=$.kid)!==null&&vt!==void 0?vt:"",Un.e=(Mt=$.e)!==null&&Mt!==void 0?Mt:"",Un.n=(Pn=$.n)!==null&&Pn!==void 0?Pn:"",Un}};function Bo(){return{}}a.GetJsonWebKeySetRequest={encode($,tt=b.default.Writer.create()){return tt},decode($,tt){const rt=$ instanceof b.default.Reader?$:new b.default.Reader($);let Nt=tt===void 0?rt.len:rt.pos+tt;const vt=Bo();for(;rt.pos<Nt;){const Mt=rt.uint32();switch(Mt>>>3){default:rt.skipType(Mt&7);break}}return vt},fromJSON($){return{}},toJSON($){return{}},fromPartial($){return Bo()}};function Fo(){return{keys:[]}}a.GetJsonWebKeySetResponse={encode($,tt=b.default.Writer.create()){for(const rt of $.keys)a.JsonWebKey.encode(rt,tt.uint32(10).fork()).ldelim();return tt},decode($,tt){const rt=$ instanceof b.default.Reader?$:new b.default.Reader($);let Nt=tt===void 0?rt.len:rt.pos+tt;const vt=Fo();for(;rt.pos<Nt;){const Mt=rt.uint32();switch(Mt>>>3){case 1:vt.keys.push(a.JsonWebKey.decode(rt,rt.uint32()));break;default:rt.skipType(Mt&7);break}}return vt},fromJSON($){return{keys:Array.isArray($==null?void 0:$.keys)?$.keys.map(tt=>a.JsonWebKey.fromJSON(tt)):[]}},toJSON($){const tt={};return $.keys?tt.keys=$.keys.map(rt=>rt?a.JsonWebKey.toJSON(rt):void 0):tt.keys=[],tt},fromPartial($){var tt;const rt=Fo();return rt.keys=((tt=$.keys)===null||tt===void 0?void 0:tt.map(Nt=>a.JsonWebKey.fromPartial(Nt)))||[],rt}};function Jo(){return{}}a.GetTestTokenRequest={encode($,tt=b.default.Writer.create()){return tt},decode($,tt){const rt=$ instanceof b.default.Reader?$:new b.default.Reader($);let Nt=tt===void 0?rt.len:rt.pos+tt;const vt=Jo();for(;rt.pos<Nt;){const Mt=rt.uint32();switch(Mt>>>3){default:rt.skipType(Mt&7);break}}return vt},fromJSON($){return{}},toJSON($){return{}},fromPartial($){return Jo()}};function Vo(){return{accessToken:""}}a.GetTestTokenResponse={encode($,tt=b.default.Writer.create()){return $.accessToken!==""&&tt.uint32(10).string($.accessToken),tt},decode($,tt){const rt=$ instanceof b.default.Reader?$:new b.default.Reader($);let Nt=tt===void 0?rt.len:rt.pos+tt;const vt=Vo();for(;rt.pos<Nt;){const Mt=rt.uint32();switch(Mt>>>3){case 1:vt.accessToken=rt.string();break;default:rt.skipType(Mt&7);break}}return vt},fromJSON($){return{accessToken:Wt($.accessToken)?String($.accessToken):""}},toJSON($){const tt={};return $.accessToken!==void 0&&(tt.accessToken=$.accessToken),tt},fromPartial($){var tt;const rt=Vo();return rt.accessToken=(tt=$.accessToken)!==null&&tt!==void 0?tt:"",rt}};function Go(){return{collectionId:"",projectId:"",destinationId:"",destination:void 0}}a.DestinationCreateEvent={encode($,tt=b.default.Writer.create()){return $.collectionId!==""&&tt.uint32(10).string($.collectionId),$.projectId!==""&&tt.uint32(18).string($.projectId),$.destinationId!==""&&tt.uint32(26).string($.destinationId),$.destination!==void 0&&a.Destination.encode($.destination,tt.uint32(34).fork()).ldelim(),tt},decode($,tt){const rt=$ instanceof b.default.Reader?$:new b.default.Reader($);let Nt=tt===void 0?rt.len:rt.pos+tt;const vt=Go();for(;rt.pos<Nt;){const Mt=rt.uint32();switch(Mt>>>3){case 1:vt.collectionId=rt.string();break;case 2:vt.projectId=rt.string();break;case 3:vt.destinationId=rt.string();break;case 4:vt.destination=a.Destination.decode(rt,rt.uint32());break;default:rt.skipType(Mt&7);break}}return vt},fromJSON($){return{collectionId:Wt($.collectionId)?String($.collectionId):"",projectId:Wt($.projectId)?String($.projectId):"",destinationId:Wt($.destinationId)?String($.destinationId):"",destination:Wt($.destination)?a.Destination.fromJSON($.destination):void 0}},toJSON($){const tt={};return $.collectionId!==void 0&&(tt.collectionId=$.collectionId),$.projectId!==void 0&&(tt.projectId=$.projectId),$.destinationId!==void 0&&(tt.destinationId=$.destinationId),$.destination!==void 0&&(tt.destination=$.destination?a.Destination.toJSON($.destination):void 0),tt},fromPartial($){var tt,rt,Nt;const vt=Go();return vt.collectionId=(tt=$.collectionId)!==null&&tt!==void 0?tt:"",vt.projectId=(rt=$.projectId)!==null&&rt!==void 0?rt:"",vt.destinationId=(Nt=$.destinationId)!==null&&Nt!==void 0?Nt:"",vt.destination=$.destination!==void 0&&$.destination!==null?a.Destination.fromPartial($.destination):void 0,vt}};function qo(){return{collectionId:"",projectId:"",destinationId:""}}a.DestinationDeleteEvent={encode($,tt=b.default.Writer.create()){return $.collectionId!==""&&tt.uint32(10).string($.collectionId),$.projectId!==""&&tt.uint32(18).string($.projectId),$.destinationId!==""&&tt.uint32(26).string($.destinationId),tt},decode($,tt){const rt=$ instanceof b.default.Reader?$:new b.default.Reader($);let Nt=tt===void 0?rt.len:rt.pos+tt;const vt=qo();for(;rt.pos<Nt;){const Mt=rt.uint32();switch(Mt>>>3){case 1:vt.collectionId=rt.string();break;case 2:vt.projectId=rt.string();break;case 3:vt.destinationId=rt.string();break;default:rt.skipType(Mt&7);break}}return vt},fromJSON($){return{collectionId:Wt($.collectionId)?String($.collectionId):"",projectId:Wt($.projectId)?String($.projectId):"",destinationId:Wt($.destinationId)?String($.destinationId):""}},toJSON($){const tt={};return $.collectionId!==void 0&&(tt.collectionId=$.collectionId),$.projectId!==void 0&&(tt.projectId=$.projectId),$.destinationId!==void 0&&(tt.destinationId=$.destinationId),tt},fromPartial($){var tt,rt,Nt;const vt=qo();return vt.collectionId=(tt=$.collectionId)!==null&&tt!==void 0?tt:"",vt.projectId=(rt=$.projectId)!==null&&rt!==void 0?rt:"",vt.destinationId=(Nt=$.destinationId)!==null&&Nt!==void 0?Nt:"",vt}};function Wo(){return{collectionId:"",projectId:"",destinationId:"",updateMask:[],destination:void 0}}a.DestinationUpdateEvent={encode($,tt=b.default.Writer.create()){$.collectionId!==""&&tt.uint32(10).string($.collectionId),$.projectId!==""&&tt.uint32(18).string($.projectId),$.destinationId!==""&&tt.uint32(26).string($.destinationId);for(const rt of $.updateMask)tt.uint32(34).string(rt);return $.destination!==void 0&&a.Destination.encode($.destination,tt.uint32(42).fork()).ldelim(),tt},decode($,tt){const rt=$ instanceof b.default.Reader?$:new b.default.Reader($);let Nt=tt===void 0?rt.len:rt.pos+tt;const vt=Wo();for(;rt.pos<Nt;){const Mt=rt.uint32();switch(Mt>>>3){case 1:vt.collectionId=rt.string();break;case 2:vt.projectId=rt.string();break;case 3:vt.destinationId=rt.string();break;case 4:vt.updateMask.push(rt.string());break;case 5:vt.destination=a.Destination.decode(rt,rt.uint32());break;default:rt.skipType(Mt&7);break}}return vt},fromJSON($){return{collectionId:Wt($.collectionId)?String($.collectionId):"",projectId:Wt($.projectId)?String($.projectId):"",destinationId:Wt($.destinationId)?String($.destinationId):"",updateMask:Array.isArray($==null?void 0:$.updateMask)?$.updateMask.map(tt=>String(tt)):[],destination:Wt($.destination)?a.Destination.fromJSON($.destination):void 0}},toJSON($){const tt={};return $.collectionId!==void 0&&(tt.collectionId=$.collectionId),$.projectId!==void 0&&(tt.projectId=$.projectId),$.destinationId!==void 0&&(tt.destinationId=$.destinationId),$.updateMask?tt.updateMask=$.updateMask.map(rt=>rt):tt.updateMask=[],$.destination!==void 0&&(tt.destination=$.destination?a.Destination.toJSON($.destination):void 0),tt},fromPartial($){var tt,rt,Nt,vt;const Mt=Wo();return Mt.collectionId=(tt=$.collectionId)!==null&&tt!==void 0?tt:"",Mt.projectId=(rt=$.projectId)!==null&&rt!==void 0?rt:"",Mt.destinationId=(Nt=$.destinationId)!==null&&Nt!==void 0?Nt:"",Mt.updateMask=((vt=$.updateMask)===null||vt===void 0?void 0:vt.map(Pn=>Pn))||[],Mt.destination=$.destination!==void 0&&$.destination!==null?a.Destination.fromPartial($.destination):void 0,Mt}};function Ho(){return{collectionId:"",projectId:"",destinationId:"",connect:void 0}}a.DestinationStateEvent={encode($,tt=b.default.Writer.create()){return $.collectionId!==""&&tt.uint32(10).string($.collectionId),$.projectId!==""&&tt.uint32(18).string($.projectId),$.destinationId!==""&&tt.uint32(26).string($.destinationId),$.connect!==void 0&&tt.uint32(32).int32(Ft($.connect)),tt},decode($,tt){const rt=$ instanceof b.default.Reader?$:new b.default.Reader($);let Nt=tt===void 0?rt.len:rt.pos+tt;const vt=Ho();for(;rt.pos<Nt;){const Mt=rt.uint32();switch(Mt>>>3){case 1:vt.collectionId=rt.string();break;case 2:vt.projectId=rt.string();break;case 3:vt.destinationId=rt.string();break;case 4:vt.connect=st(rt.int32());break;default:rt.skipType(Mt&7);break}}return vt},fromJSON($){return{collectionId:Wt($.collectionId)?String($.collectionId):"",projectId:Wt($.projectId)?String($.projectId):"",destinationId:Wt($.destinationId)?String($.destinationId):"",connect:Wt($.connect)?st($.connect):void 0}},toJSON($){const tt={};return $.collectionId!==void 0&&(tt.collectionId=$.collectionId),$.projectId!==void 0&&(tt.projectId=$.projectId),$.destinationId!==void 0&&(tt.destinationId=$.destinationId),$.connect!==void 0&&(tt.connect=$.connect!==void 0?wt($.connect):void 0),tt},fromPartial($){var tt,rt,Nt,vt;const Mt=Ho();return Mt.collectionId=(tt=$.collectionId)!==null&&tt!==void 0?tt:"",Mt.projectId=(rt=$.projectId)!==null&&rt!==void 0?rt:"",Mt.destinationId=(Nt=$.destinationId)!==null&&Nt!==void 0?Nt:"",Mt.connect=(vt=$.connect)!==null&&vt!==void 0?vt:void 0,Mt}};function xo(){return{collectionId:"",projectId:"",project:void 0}}a.ProjectCreateEvent={encode($,tt=b.default.Writer.create()){return $.collectionId!==""&&tt.uint32(10).string($.collectionId),$.projectId!==""&&tt.uint32(18).string($.projectId),$.project!==void 0&&a.Project.encode($.project,tt.uint32(26).fork()).ldelim(),tt},decode($,tt){const rt=$ instanceof b.default.Reader?$:new b.default.Reader($);let Nt=tt===void 0?rt.len:rt.pos+tt;const vt=xo();for(;rt.pos<Nt;){const Mt=rt.uint32();switch(Mt>>>3){case 1:vt.collectionId=rt.string();break;case 2:vt.projectId=rt.string();break;case 3:vt.project=a.Project.decode(rt,rt.uint32());break;default:rt.skipType(Mt&7);break}}return vt},fromJSON($){return{collectionId:Wt($.collectionId)?String($.collectionId):"",projectId:Wt($.projectId)?String($.projectId):"",project:Wt($.project)?a.Project.fromJSON($.project):void 0}},toJSON($){const tt={};return $.collectionId!==void 0&&(tt.collectionId=$.collectionId),$.projectId!==void 0&&(tt.projectId=$.projectId),$.project!==void 0&&(tt.project=$.project?a.Project.toJSON($.project):void 0),tt},fromPartial($){var tt,rt;const Nt=xo();return Nt.collectionId=(tt=$.collectionId)!==null&&tt!==void 0?tt:"",Nt.projectId=(rt=$.projectId)!==null&&rt!==void 0?rt:"",Nt.project=$.project!==void 0&&$.project!==null?a.Project.fromPartial($.project):void 0,Nt}};function zo(){return{collectionId:"",projectId:""}}a.ProjectDeleteEvent={encode($,tt=b.default.Writer.create()){return $.collectionId!==""&&tt.uint32(10).string($.collectionId),$.projectId!==""&&tt.uint32(18).string($.projectId),tt},decode($,tt){const rt=$ instanceof b.default.Reader?$:new b.default.Reader($);let Nt=tt===void 0?rt.len:rt.pos+tt;const vt=zo();for(;rt.pos<Nt;){const Mt=rt.uint32();switch(Mt>>>3){case 1:vt.collectionId=rt.string();break;case 2:vt.projectId=rt.string();break;default:rt.skipType(Mt&7);break}}return vt},fromJSON($){return{collectionId:Wt($.collectionId)?String($.collectionId):"",projectId:Wt($.projectId)?String($.projectId):""}},toJSON($){const tt={};return $.collectionId!==void 0&&(tt.collectionId=$.collectionId),$.projectId!==void 0&&(tt.projectId=$.projectId),tt},fromPartial($){var tt,rt;const Nt=zo();return Nt.collectionId=(tt=$.collectionId)!==null&&tt!==void 0?tt:"",Nt.projectId=(rt=$.projectId)!==null&&rt!==void 0?rt:"",Nt}};function Yo(){return{collectionId:"",projectId:"",updateMask:[],project:void 0}}a.ProjectUpdateEvent={encode($,tt=b.default.Writer.create()){$.collectionId!==""&&tt.uint32(10).string($.collectionId),$.projectId!==""&&tt.uint32(18).string($.projectId);for(const rt of $.updateMask)tt.uint32(26).string(rt);return $.project!==void 0&&a.Project.encode($.project,tt.uint32(34).fork()).ldelim(),tt},decode($,tt){const rt=$ instanceof b.default.Reader?$:new b.default.Reader($);let Nt=tt===void 0?rt.len:rt.pos+tt;const vt=Yo();for(;rt.pos<Nt;){const Mt=rt.uint32();switch(Mt>>>3){case 1:vt.collectionId=rt.string();break;case 2:vt.projectId=rt.string();break;case 3:vt.updateMask.push(rt.string());break;case 4:vt.project=a.Project.decode(rt,rt.uint32());break;default:rt.skipType(Mt&7);break}}return vt},fromJSON($){return{collectionId:Wt($.collectionId)?String($.collectionId):"",projectId:Wt($.projectId)?String($.projectId):"",updateMask:Array.isArray($==null?void 0:$.updateMask)?$.updateMask.map(tt=>String(tt)):[],project:Wt($.project)?a.Project.fromJSON($.project):void 0}},toJSON($){const tt={};return $.collectionId!==void 0&&(tt.collectionId=$.collectionId),$.projectId!==void 0&&(tt.projectId=$.projectId),$.updateMask?tt.updateMask=$.updateMask.map(rt=>rt):tt.updateMask=[],$.project!==void 0&&(tt.project=$.project?a.Project.toJSON($.project):void 0),tt},fromPartial($){var tt,rt,Nt;const vt=Yo();return vt.collectionId=(tt=$.collectionId)!==null&&tt!==void 0?tt:"",vt.projectId=(rt=$.projectId)!==null&&rt!==void 0?rt:"",vt.updateMask=((Nt=$.updateMask)===null||Nt===void 0?void 0:Nt.map(Mt=>Mt))||[],vt.project=$.project!==void 0&&$.project!==null?a.Project.fromPartial($.project):void 0,vt}};function Ko(){return{collectionId:"",projectId:"",broadcastId:"",phase:void 0,error:void 0}}a.ProjectBroadcastStateEvent={encode($,tt=b.default.Writer.create()){return $.collectionId!==""&&tt.uint32(10).string($.collectionId),$.projectId!==""&&tt.uint32(18).string($.projectId),$.broadcastId!==""&&tt.uint32(26).string($.broadcastId),$.phase!==void 0&&tt.uint32(32).int32(In($.phase)),$.error!==void 0&&tt.uint32(40).int32(un($.error)),tt},decode($,tt){const rt=$ instanceof b.default.Reader?$:new b.default.Reader($);let Nt=tt===void 0?rt.len:rt.pos+tt;const vt=Ko();for(;rt.pos<Nt;){const Mt=rt.uint32();switch(Mt>>>3){case 1:vt.collectionId=rt.string();break;case 2:vt.projectId=rt.string();break;case 3:vt.broadcastId=rt.string();break;case 4:vt.phase=pn(rt.int32());break;case 5:vt.error=Rt(rt.int32());break;default:rt.skipType(Mt&7);break}}return vt},fromJSON($){return{collectionId:Wt($.collectionId)?String($.collectionId):"",projectId:Wt($.projectId)?String($.projectId):"",broadcastId:Wt($.broadcastId)?String($.broadcastId):"",phase:Wt($.phase)?pn($.phase):void 0,error:Wt($.error)?Rt($.error):void 0}},toJSON($){const tt={};return $.collectionId!==void 0&&(tt.collectionId=$.collectionId),$.projectId!==void 0&&(tt.projectId=$.projectId),$.broadcastId!==void 0&&(tt.broadcastId=$.broadcastId),$.phase!==void 0&&(tt.phase=$.phase!==void 0?yn($.phase):void 0),$.error!==void 0&&(tt.error=$.error!==void 0?Ut($.error):void 0),tt},fromPartial($){var tt,rt,Nt,vt,Mt;const Pn=Ko();return Pn.collectionId=(tt=$.collectionId)!==null&&tt!==void 0?tt:"",Pn.projectId=(rt=$.projectId)!==null&&rt!==void 0?rt:"",Pn.broadcastId=(Nt=$.broadcastId)!==null&&Nt!==void 0?Nt:"",Pn.phase=(vt=$.phase)!==null&&vt!==void 0?vt:void 0,Pn.error=(Mt=$.error)!==null&&Mt!==void 0?Mt:void 0,Pn}};function Qo(){return{collectionId:"",collection:void 0}}a.CollectionCreateEvent={encode($,tt=b.default.Writer.create()){return $.collectionId!==""&&tt.uint32(10).string($.collectionId),$.collection!==void 0&&a.Collection.encode($.collection,tt.uint32(18).fork()).ldelim(),tt},decode($,tt){const rt=$ instanceof b.default.Reader?$:new b.default.Reader($);let Nt=tt===void 0?rt.len:rt.pos+tt;const vt=Qo();for(;rt.pos<Nt;){const Mt=rt.uint32();switch(Mt>>>3){case 1:vt.collectionId=rt.string();break;case 2:vt.collection=a.Collection.decode(rt,rt.uint32());break;default:rt.skipType(Mt&7);break}}return vt},fromJSON($){return{collectionId:Wt($.collectionId)?String($.collectionId):"",collection:Wt($.collection)?a.Collection.fromJSON($.collection):void 0}},toJSON($){const tt={};return $.collectionId!==void 0&&(tt.collectionId=$.collectionId),$.collection!==void 0&&(tt.collection=$.collection?a.Collection.toJSON($.collection):void 0),tt},fromPartial($){var tt;const rt=Qo();return rt.collectionId=(tt=$.collectionId)!==null&&tt!==void 0?tt:"",rt.collection=$.collection!==void 0&&$.collection!==null?a.Collection.fromPartial($.collection):void 0,rt}};function Zo(){return{collectionId:""}}a.CollectionDeleteEvent={encode($,tt=b.default.Writer.create()){return $.collectionId!==""&&tt.uint32(10).string($.collectionId),tt},decode($,tt){const rt=$ instanceof b.default.Reader?$:new b.default.Reader($);let Nt=tt===void 0?rt.len:rt.pos+tt;const vt=Zo();for(;rt.pos<Nt;){const Mt=rt.uint32();switch(Mt>>>3){case 1:vt.collectionId=rt.string();break;default:rt.skipType(Mt&7);break}}return vt},fromJSON($){return{collectionId:Wt($.collectionId)?String($.collectionId):""}},toJSON($){const tt={};return $.collectionId!==void 0&&(tt.collectionId=$.collectionId),tt},fromPartial($){var tt;const rt=Zo();return rt.collectionId=(tt=$.collectionId)!==null&&tt!==void 0?tt:"",rt}};function Xo(){return{collectionId:"",updateMask:[],collection:void 0}}a.CollectionUpdateEvent={encode($,tt=b.default.Writer.create()){$.collectionId!==""&&tt.uint32(10).string($.collectionId);for(const rt of $.updateMask)tt.uint32(18).string(rt);return $.collection!==void 0&&a.Collection.encode($.collection,tt.uint32(26).fork()).ldelim(),tt},decode($,tt){const rt=$ instanceof b.default.Reader?$:new b.default.Reader($);let Nt=tt===void 0?rt.len:rt.pos+tt;const vt=Xo();for(;rt.pos<Nt;){const Mt=rt.uint32();switch(Mt>>>3){case 1:vt.collectionId=rt.string();break;case 2:vt.updateMask.push(rt.string());break;case 3:vt.collection=a.Collection.decode(rt,rt.uint32());break;default:rt.skipType(Mt&7);break}}return vt},fromJSON($){return{collectionId:Wt($.collectionId)?String($.collectionId):"",updateMask:Array.isArray($==null?void 0:$.updateMask)?$.updateMask.map(tt=>String(tt)):[],collection:Wt($.collection)?a.Collection.fromJSON($.collection):void 0}},toJSON($){const tt={};return $.collectionId!==void 0&&(tt.collectionId=$.collectionId),$.updateMask?tt.updateMask=$.updateMask.map(rt=>rt):tt.updateMask=[],$.collection!==void 0&&(tt.collection=$.collection?a.Collection.toJSON($.collection):void 0),tt},fromPartial($){var tt,rt;const Nt=Xo();return Nt.collectionId=(tt=$.collectionId)!==null&&tt!==void 0?tt:"",Nt.updateMask=((rt=$.updateMask)===null||rt===void 0?void 0:rt.map(vt=>vt))||[],Nt.collection=$.collection!==void 0&&$.collection!==null?a.Collection.fromPartial($.collection):void 0,Nt}};function jo(){return{collectionId:"",sourceId:"",source:void 0}}a.SourceCreateEvent={encode($,tt=b.default.Writer.create()){return $.collectionId!==""&&tt.uint32(10).string($.collectionId),$.sourceId!==""&&tt.uint32(18).string($.sourceId),$.source!==void 0&&a.Source.encode($.source,tt.uint32(26).fork()).ldelim(),tt},decode($,tt){const rt=$ instanceof b.default.Reader?$:new b.default.Reader($);let Nt=tt===void 0?rt.len:rt.pos+tt;const vt=jo();for(;rt.pos<Nt;){const Mt=rt.uint32();switch(Mt>>>3){case 1:vt.collectionId=rt.string();break;case 2:vt.sourceId=rt.string();break;case 3:vt.source=a.Source.decode(rt,rt.uint32());break;default:rt.skipType(Mt&7);break}}return vt},fromJSON($){return{collectionId:Wt($.collectionId)?String($.collectionId):"",sourceId:Wt($.sourceId)?String($.sourceId):"",source:Wt($.source)?a.Source.fromJSON($.source):void 0}},toJSON($){const tt={};return $.collectionId!==void 0&&(tt.collectionId=$.collectionId),$.sourceId!==void 0&&(tt.sourceId=$.sourceId),$.source!==void 0&&(tt.source=$.source?a.Source.toJSON($.source):void 0),tt},fromPartial($){var tt,rt;const Nt=jo();return Nt.collectionId=(tt=$.collectionId)!==null&&tt!==void 0?tt:"",Nt.sourceId=(rt=$.sourceId)!==null&&rt!==void 0?rt:"",Nt.source=$.source!==void 0&&$.source!==null?a.Source.fromPartial($.source):void 0,Nt}};function na(){return{collectionId:"",sourceId:""}}a.SourceDeleteEvent={encode($,tt=b.default.Writer.create()){return $.collectionId!==""&&tt.uint32(10).string($.collectionId),$.sourceId!==""&&tt.uint32(18).string($.sourceId),tt},decode($,tt){const rt=$ instanceof b.default.Reader?$:new b.default.Reader($);let Nt=tt===void 0?rt.len:rt.pos+tt;const vt=na();for(;rt.pos<Nt;){const Mt=rt.uint32();switch(Mt>>>3){case 1:vt.collectionId=rt.string();break;case 2:vt.sourceId=rt.string();break;default:rt.skipType(Mt&7);break}}return vt},fromJSON($){return{collectionId:Wt($.collectionId)?String($.collectionId):"",sourceId:Wt($.sourceId)?String($.sourceId):""}},toJSON($){const tt={};return $.collectionId!==void 0&&(tt.collectionId=$.collectionId),$.sourceId!==void 0&&(tt.sourceId=$.sourceId),tt},fromPartial($){var tt,rt;const Nt=na();return Nt.collectionId=(tt=$.collectionId)!==null&&tt!==void 0?tt:"",Nt.sourceId=(rt=$.sourceId)!==null&&rt!==void 0?rt:"",Nt}};function ga(){return{collectionId:"",sourceId:"",updateMask:[],source:void 0}}a.SourceUpdateEvent={encode($,tt=b.default.Writer.create()){$.collectionId!==""&&tt.uint32(10).string($.collectionId),$.sourceId!==""&&tt.uint32(18).string($.sourceId);for(const rt of $.updateMask)tt.uint32(26).string(rt);return $.source!==void 0&&a.Source.encode($.source,tt.uint32(34).fork()).ldelim(),tt},decode($,tt){const rt=$ instanceof b.default.Reader?$:new b.default.Reader($);let Nt=tt===void 0?rt.len:rt.pos+tt;const vt=ga();for(;rt.pos<Nt;){const Mt=rt.uint32();switch(Mt>>>3){case 1:vt.collectionId=rt.string();break;case 2:vt.sourceId=rt.string();break;case 3:vt.updateMask.push(rt.string());break;case 4:vt.source=a.Source.decode(rt,rt.uint32());break;default:rt.skipType(Mt&7);break}}return vt},fromJSON($){return{collectionId:Wt($.collectionId)?String($.collectionId):"",sourceId:Wt($.sourceId)?String($.sourceId):"",updateMask:Array.isArray($==null?void 0:$.updateMask)?$.updateMask.map(tt=>String(tt)):[],source:Wt($.source)?a.Source.fromJSON($.source):void 0}},toJSON($){const tt={};return $.collectionId!==void 0&&(tt.collectionId=$.collectionId),$.sourceId!==void 0&&(tt.sourceId=$.sourceId),$.updateMask?tt.updateMask=$.updateMask.map(rt=>rt):tt.updateMask=[],$.source!==void 0&&(tt.source=$.source?a.Source.toJSON($.source):void 0),tt},fromPartial($){var tt,rt,Nt;const vt=ga();return vt.collectionId=(tt=$.collectionId)!==null&&tt!==void 0?tt:"",vt.sourceId=(rt=$.sourceId)!==null&&rt!==void 0?rt:"",vt.updateMask=((Nt=$.updateMask)===null||Nt===void 0?void 0:Nt.map(Mt=>Mt))||[],vt.source=$.source!==void 0&&$.source!==null?a.Source.fromPartial($.source):void 0,vt}};function ba(){return{collectionId:"",sourceId:"",projectId:"",source:void 0}}a.SourceAddEvent={encode($,tt=b.default.Writer.create()){return $.collectionId!==""&&tt.uint32(10).string($.collectionId),$.sourceId!==""&&tt.uint32(18).string($.sourceId),$.projectId!==""&&tt.uint32(26).string($.projectId),$.source!==void 0&&a.Source.encode($.source,tt.uint32(34).fork()).ldelim(),tt},decode($,tt){const rt=$ instanceof b.default.Reader?$:new b.default.Reader($);let Nt=tt===void 0?rt.len:rt.pos+tt;const vt=ba();for(;rt.pos<Nt;){const Mt=rt.uint32();switch(Mt>>>3){case 1:vt.collectionId=rt.string();break;case 2:vt.sourceId=rt.string();break;case 3:vt.projectId=rt.string();break;case 4:vt.source=a.Source.decode(rt,rt.uint32());break;default:rt.skipType(Mt&7);break}}return vt},fromJSON($){return{collectionId:Wt($.collectionId)?String($.collectionId):"",sourceId:Wt($.sourceId)?String($.sourceId):"",projectId:Wt($.projectId)?String($.projectId):"",source:Wt($.source)?a.Source.fromJSON($.source):void 0}},toJSON($){const tt={};return $.collectionId!==void 0&&(tt.collectionId=$.collectionId),$.sourceId!==void 0&&(tt.sourceId=$.sourceId),$.projectId!==void 0&&(tt.projectId=$.projectId),$.source!==void 0&&(tt.source=$.source?a.Source.toJSON($.source):void 0),tt},fromPartial($){var tt,rt,Nt;const vt=ba();return vt.collectionId=(tt=$.collectionId)!==null&&tt!==void 0?tt:"",vt.sourceId=(rt=$.sourceId)!==null&&rt!==void 0?rt:"",vt.projectId=(Nt=$.projectId)!==null&&Nt!==void 0?Nt:"",vt.source=$.source!==void 0&&$.source!==null?a.Source.fromPartial($.source):void 0,vt}};function $a(){return{collectionId:"",sourceId:"",projectId:""}}a.SourceRemoveEvent={encode($,tt=b.default.Writer.create()){return $.collectionId!==""&&tt.uint32(10).string($.collectionId),$.sourceId!==""&&tt.uint32(18).string($.sourceId),$.projectId!==""&&tt.uint32(26).string($.projectId),tt},decode($,tt){const rt=$ instanceof b.default.Reader?$:new b.default.Reader($);let Nt=tt===void 0?rt.len:rt.pos+tt;const vt=$a();for(;rt.pos<Nt;){const Mt=rt.uint32();switch(Mt>>>3){case 1:vt.collectionId=rt.string();break;case 2:vt.sourceId=rt.string();break;case 3:vt.projectId=rt.string();break;default:rt.skipType(Mt&7);break}}return vt},fromJSON($){return{collectionId:Wt($.collectionId)?String($.collectionId):"",sourceId:Wt($.sourceId)?String($.sourceId):"",projectId:Wt($.projectId)?String($.projectId):""}},toJSON($){const tt={};return $.collectionId!==void 0&&(tt.collectionId=$.collectionId),$.sourceId!==void 0&&(tt.sourceId=$.sourceId),$.projectId!==void 0&&(tt.projectId=$.projectId),tt},fromPartial($){var tt,rt,Nt;const vt=$a();return vt.collectionId=(tt=$.collectionId)!==null&&tt!==void 0?tt:"",vt.sourceId=(rt=$.sourceId)!==null&&rt!==void 0?rt:"",vt.projectId=(Nt=$.projectId)!==null&&Nt!==void 0?Nt:"",vt}};function xa(){return{collectionId:"",projectId:"",sourceId:"",connect:void 0}}a.SourceStateEvent={encode($,tt=b.default.Writer.create()){return $.collectionId!==""&&tt.uint32(10).string($.collectionId),$.projectId!==""&&tt.uint32(18).string($.projectId),$.sourceId!==""&&tt.uint32(26).string($.sourceId),$.connect!==void 0&&tt.uint32(32).int32(Ft($.connect)),tt},decode($,tt){const rt=$ instanceof b.default.Reader?$:new b.default.Reader($);let Nt=tt===void 0?rt.len:rt.pos+tt;const vt=xa();for(;rt.pos<Nt;){const Mt=rt.uint32();switch(Mt>>>3){case 1:vt.collectionId=rt.string();break;case 2:vt.projectId=rt.string();break;case 3:vt.sourceId=rt.string();break;case 4:vt.connect=st(rt.int32());break;default:rt.skipType(Mt&7);break}}return vt},fromJSON($){return{collectionId:Wt($.collectionId)?String($.collectionId):"",projectId:Wt($.projectId)?String($.projectId):"",sourceId:Wt($.sourceId)?String($.sourceId):"",connect:Wt($.connect)?st($.connect):void 0}},toJSON($){const tt={};return $.collectionId!==void 0&&(tt.collectionId=$.collectionId),$.projectId!==void 0&&(tt.projectId=$.projectId),$.sourceId!==void 0&&(tt.sourceId=$.sourceId),$.connect!==void 0&&(tt.connect=$.connect!==void 0?wt($.connect):void 0),tt},fromPartial($){var tt,rt,Nt,vt;const Mt=xa();return Mt.collectionId=(tt=$.collectionId)!==null&&tt!==void 0?tt:"",Mt.projectId=(rt=$.projectId)!==null&&rt!==void 0?rt:"",Mt.sourceId=(Nt=$.sourceId)!==null&&Nt!==void 0?Nt:"",Mt.connect=(vt=$.connect)!==null&&vt!==void 0?vt:void 0,Mt}};function ts(){return{create:void 0,update:void 0,delete:void 0}}a.CollectionEvent={encode($,tt=b.default.Writer.create()){return $.create!==void 0&&a.CollectionCreateEvent.encode($.create,tt.uint32(10).fork()).ldelim(),$.update!==void 0&&a.CollectionUpdateEvent.encode($.update,tt.uint32(18).fork()).ldelim(),$.delete!==void 0&&a.CollectionDeleteEvent.encode($.delete,tt.uint32(26).fork()).ldelim(),tt},decode($,tt){const rt=$ instanceof b.default.Reader?$:new b.default.Reader($);let Nt=tt===void 0?rt.len:rt.pos+tt;const vt=ts();for(;rt.pos<Nt;){const Mt=rt.uint32();switch(Mt>>>3){case 1:vt.create=a.CollectionCreateEvent.decode(rt,rt.uint32());break;case 2:vt.update=a.CollectionUpdateEvent.decode(rt,rt.uint32());break;case 3:vt.delete=a.CollectionDeleteEvent.decode(rt,rt.uint32());break;default:rt.skipType(Mt&7);break}}return vt},fromJSON($){return{create:Wt($.create)?a.CollectionCreateEvent.fromJSON($.create):void 0,update:Wt($.update)?a.CollectionUpdateEvent.fromJSON($.update):void 0,delete:Wt($.delete)?a.CollectionDeleteEvent.fromJSON($.delete):void 0}},toJSON($){const tt={};return $.create!==void 0&&(tt.create=$.create?a.CollectionCreateEvent.toJSON($.create):void 0),$.update!==void 0&&(tt.update=$.update?a.CollectionUpdateEvent.toJSON($.update):void 0),$.delete!==void 0&&(tt.delete=$.delete?a.CollectionDeleteEvent.toJSON($.delete):void 0),tt},fromPartial($){const tt=ts();return tt.create=$.create!==void 0&&$.create!==null?a.CollectionCreateEvent.fromPartial($.create):void 0,tt.update=$.update!==void 0&&$.update!==null?a.CollectionUpdateEvent.fromPartial($.update):void 0,tt.delete=$.delete!==void 0&&$.delete!==null?a.CollectionDeleteEvent.fromPartial($.delete):void 0,tt}};function ns(){return{create:void 0,update:void 0,delete:void 0,state:void 0}}a.DestinationEvent={encode($,tt=b.default.Writer.create()){return $.create!==void 0&&a.DestinationCreateEvent.encode($.create,tt.uint32(10).fork()).ldelim(),$.update!==void 0&&a.DestinationUpdateEvent.encode($.update,tt.uint32(18).fork()).ldelim(),$.delete!==void 0&&a.DestinationDeleteEvent.encode($.delete,tt.uint32(26).fork()).ldelim(),$.state!==void 0&&a.DestinationStateEvent.encode($.state,tt.uint32(34).fork()).ldelim(),tt},decode($,tt){const rt=$ instanceof b.default.Reader?$:new b.default.Reader($);let Nt=tt===void 0?rt.len:rt.pos+tt;const vt=ns();for(;rt.pos<Nt;){const Mt=rt.uint32();switch(Mt>>>3){case 1:vt.create=a.DestinationCreateEvent.decode(rt,rt.uint32());break;case 2:vt.update=a.DestinationUpdateEvent.decode(rt,rt.uint32());break;case 3:vt.delete=a.DestinationDeleteEvent.decode(rt,rt.uint32());break;case 4:vt.state=a.DestinationStateEvent.decode(rt,rt.uint32());break;default:rt.skipType(Mt&7);break}}return vt},fromJSON($){return{create:Wt($.create)?a.DestinationCreateEvent.fromJSON($.create):void 0,update:Wt($.update)?a.DestinationUpdateEvent.fromJSON($.update):void 0,delete:Wt($.delete)?a.DestinationDeleteEvent.fromJSON($.delete):void 0,state:Wt($.state)?a.DestinationStateEvent.fromJSON($.state):void 0}},toJSON($){const tt={};return $.create!==void 0&&(tt.create=$.create?a.DestinationCreateEvent.toJSON($.create):void 0),$.update!==void 0&&(tt.update=$.update?a.DestinationUpdateEvent.toJSON($.update):void 0),$.delete!==void 0&&(tt.delete=$.delete?a.DestinationDeleteEvent.toJSON($.delete):void 0),$.state!==void 0&&(tt.state=$.state?a.DestinationStateEvent.toJSON($.state):void 0),tt},fromPartial($){const tt=ns();return tt.create=$.create!==void 0&&$.create!==null?a.DestinationCreateEvent.fromPartial($.create):void 0,tt.update=$.update!==void 0&&$.update!==null?a.DestinationUpdateEvent.fromPartial($.update):void 0,tt.delete=$.delete!==void 0&&$.delete!==null?a.DestinationDeleteEvent.fromPartial($.delete):void 0,tt.state=$.state!==void 0&&$.state!==null?a.DestinationStateEvent.fromPartial($.state):void 0,tt}};function rs(){return{create:void 0,update:void 0,delete:void 0,state:void 0}}a.ProjectEvent={encode($,tt=b.default.Writer.create()){return $.create!==void 0&&a.ProjectCreateEvent.encode($.create,tt.uint32(10).fork()).ldelim(),$.update!==void 0&&a.ProjectUpdateEvent.encode($.update,tt.uint32(18).fork()).ldelim(),$.delete!==void 0&&a.ProjectDeleteEvent.encode($.delete,tt.uint32(26).fork()).ldelim(),$.state!==void 0&&a.ProjectBroadcastStateEvent.encode($.state,tt.uint32(34).fork()).ldelim(),tt},decode($,tt){const rt=$ instanceof b.default.Reader?$:new b.default.Reader($);let Nt=tt===void 0?rt.len:rt.pos+tt;const vt=rs();for(;rt.pos<Nt;){const Mt=rt.uint32();switch(Mt>>>3){case 1:vt.create=a.ProjectCreateEvent.decode(rt,rt.uint32());break;case 2:vt.update=a.ProjectUpdateEvent.decode(rt,rt.uint32());break;case 3:vt.delete=a.ProjectDeleteEvent.decode(rt,rt.uint32());break;case 4:vt.state=a.ProjectBroadcastStateEvent.decode(rt,rt.uint32());break;default:rt.skipType(Mt&7);break}}return vt},fromJSON($){return{create:Wt($.create)?a.ProjectCreateEvent.fromJSON($.create):void 0,update:Wt($.update)?a.ProjectUpdateEvent.fromJSON($.update):void 0,delete:Wt($.delete)?a.ProjectDeleteEvent.fromJSON($.delete):void 0,state:Wt($.state)?a.ProjectBroadcastStateEvent.fromJSON($.state):void 0}},toJSON($){const tt={};return $.create!==void 0&&(tt.create=$.create?a.ProjectCreateEvent.toJSON($.create):void 0),$.update!==void 0&&(tt.update=$.update?a.ProjectUpdateEvent.toJSON($.update):void 0),$.delete!==void 0&&(tt.delete=$.delete?a.ProjectDeleteEvent.toJSON($.delete):void 0),$.state!==void 0&&(tt.state=$.state?a.ProjectBroadcastStateEvent.toJSON($.state):void 0),tt},fromPartial($){const tt=rs();return tt.create=$.create!==void 0&&$.create!==null?a.ProjectCreateEvent.fromPartial($.create):void 0,tt.update=$.update!==void 0&&$.update!==null?a.ProjectUpdateEvent.fromPartial($.update):void 0,tt.delete=$.delete!==void 0&&$.delete!==null?a.ProjectDeleteEvent.fromPartial($.delete):void 0,tt.state=$.state!==void 0&&$.state!==null?a.ProjectBroadcastStateEvent.fromPartial($.state):void 0,tt}};function is(){return{create:void 0,update:void 0,delete:void 0,add:void 0,remove:void 0,state:void 0}}a.SourceEvent={encode($,tt=b.default.Writer.create()){return $.create!==void 0&&a.SourceCreateEvent.encode($.create,tt.uint32(10).fork()).ldelim(),$.update!==void 0&&a.SourceUpdateEvent.encode($.update,tt.uint32(18).fork()).ldelim(),$.delete!==void 0&&a.SourceDeleteEvent.encode($.delete,tt.uint32(26).fork()).ldelim(),$.add!==void 0&&a.SourceAddEvent.encode($.add,tt.uint32(34).fork()).ldelim(),$.remove!==void 0&&a.SourceRemoveEvent.encode($.remove,tt.uint32(42).fork()).ldelim(),$.state!==void 0&&a.SourceStateEvent.encode($.state,tt.uint32(50).fork()).ldelim(),tt},decode($,tt){const rt=$ instanceof b.default.Reader?$:new b.default.Reader($);let Nt=tt===void 0?rt.len:rt.pos+tt;const vt=is();for(;rt.pos<Nt;){const Mt=rt.uint32();switch(Mt>>>3){case 1:vt.create=a.SourceCreateEvent.decode(rt,rt.uint32());break;case 2:vt.update=a.SourceUpdateEvent.decode(rt,rt.uint32());break;case 3:vt.delete=a.SourceDeleteEvent.decode(rt,rt.uint32());break;case 4:vt.add=a.SourceAddEvent.decode(rt,rt.uint32());break;case 5:vt.remove=a.SourceRemoveEvent.decode(rt,rt.uint32());break;case 6:vt.state=a.SourceStateEvent.decode(rt,rt.uint32());break;default:rt.skipType(Mt&7);break}}return vt},fromJSON($){return{create:Wt($.create)?a.SourceCreateEvent.fromJSON($.create):void 0,update:Wt($.update)?a.SourceUpdateEvent.fromJSON($.update):void 0,delete:Wt($.delete)?a.SourceDeleteEvent.fromJSON($.delete):void 0,add:Wt($.add)?a.SourceAddEvent.fromJSON($.add):void 0,remove:Wt($.remove)?a.SourceRemoveEvent.fromJSON($.remove):void 0,state:Wt($.state)?a.SourceStateEvent.fromJSON($.state):void 0}},toJSON($){const tt={};return $.create!==void 0&&(tt.create=$.create?a.SourceCreateEvent.toJSON($.create):void 0),$.update!==void 0&&(tt.update=$.update?a.SourceUpdateEvent.toJSON($.update):void 0),$.delete!==void 0&&(tt.delete=$.delete?a.SourceDeleteEvent.toJSON($.delete):void 0),$.add!==void 0&&(tt.add=$.add?a.SourceAddEvent.toJSON($.add):void 0),$.remove!==void 0&&(tt.remove=$.remove?a.SourceRemoveEvent.toJSON($.remove):void 0),$.state!==void 0&&(tt.state=$.state?a.SourceStateEvent.toJSON($.state):void 0),tt},fromPartial($){const tt=is();return tt.create=$.create!==void 0&&$.create!==null?a.SourceCreateEvent.fromPartial($.create):void 0,tt.update=$.update!==void 0&&$.update!==null?a.SourceUpdateEvent.fromPartial($.update):void 0,tt.delete=$.delete!==void 0&&$.delete!==null?a.SourceDeleteEvent.fromPartial($.delete):void 0,tt.add=$.add!==void 0&&$.add!==null?a.SourceAddEvent.fromPartial($.add):void 0,tt.remove=$.remove!==void 0&&$.remove!==null?a.SourceRemoveEvent.fromPartial($.remove):void 0,tt.state=$.state!==void 0&&$.state!==null?a.SourceStateEvent.fromPartial($.state):void 0,tt}};function os(){return{collection:void 0,destination:void 0,project:void 0,source:void 0,unspecified:void 0}}a.LiveEvent={encode($,tt=b.default.Writer.create()){return $.collection!==void 0&&a.CollectionEvent.encode($.collection,tt.uint32(10).fork()).ldelim(),$.destination!==void 0&&a.DestinationEvent.encode($.destination,tt.uint32(18).fork()).ldelim(),$.project!==void 0&&a.ProjectEvent.encode($.project,tt.uint32(26).fork()).ldelim(),$.source!==void 0&&a.SourceEvent.encode($.source,tt.uint32(34).fork()).ldelim(),$.unspecified!==void 0&&tt.uint32(40).int32((0,j.nullValueToNumber)($.unspecified)),tt},decode($,tt){const rt=$ instanceof b.default.Reader?$:new b.default.Reader($);let Nt=tt===void 0?rt.len:rt.pos+tt;const vt=os();for(;rt.pos<Nt;){const Mt=rt.uint32();switch(Mt>>>3){case 1:vt.collection=a.CollectionEvent.decode(rt,rt.uint32());break;case 2:vt.destination=a.DestinationEvent.decode(rt,rt.uint32());break;case 3:vt.project=a.ProjectEvent.decode(rt,rt.uint32());break;case 4:vt.source=a.SourceEvent.decode(rt,rt.uint32());break;case 5:vt.unspecified=(0,j.nullValueFromJSON)(rt.int32());break;default:rt.skipType(Mt&7);break}}return vt},fromJSON($){return{collection:Wt($.collection)?a.CollectionEvent.fromJSON($.collection):void 0,destination:Wt($.destination)?a.DestinationEvent.fromJSON($.destination):void 0,project:Wt($.project)?a.ProjectEvent.fromJSON($.project):void 0,source:Wt($.source)?a.SourceEvent.fromJSON($.source):void 0,unspecified:Wt($.unspecified)?(0,j.nullValueFromJSON)($.unspecified):void 0}},toJSON($){const tt={};return $.collection!==void 0&&(tt.collection=$.collection?a.CollectionEvent.toJSON($.collection):void 0),$.destination!==void 0&&(tt.destination=$.destination?a.DestinationEvent.toJSON($.destination):void 0),$.project!==void 0&&(tt.project=$.project?a.ProjectEvent.toJSON($.project):void 0),$.source!==void 0&&(tt.source=$.source?a.SourceEvent.toJSON($.source):void 0),$.unspecified!==void 0&&(tt.unspecified=$.unspecified!==void 0?(0,j.nullValueToJSON)($.unspecified):void 0),tt},fromPartial($){var tt;const rt=os();return rt.collection=$.collection!==void 0&&$.collection!==null?a.CollectionEvent.fromPartial($.collection):void 0,rt.destination=$.destination!==void 0&&$.destination!==null?a.DestinationEvent.fromPartial($.destination):void 0,rt.project=$.project!==void 0&&$.project!==null?a.ProjectEvent.fromPartial($.project):void 0,rt.source=$.source!==void 0&&$.source!==null?a.SourceEvent.fromPartial($.source):void 0,rt.unspecified=(tt=$.unspecified)!==null&&tt!==void 0?tt:void 0,rt}};class ss{constructor(tt,rt){this.service=(rt==null?void 0:rt.service)||"live.v21.CollectionService",this.rpc=tt,this.CreateCollection=this.CreateCollection.bind(this),this.GetCollection=this.GetCollection.bind(this),this.GetCollections=this.GetCollections.bind(this),this.UpdateCollection=this.UpdateCollection.bind(this),this.DeleteCollection=this.DeleteCollection.bind(this)}CreateCollection(tt){const rt=a.CreateCollectionRequest.encode(tt).finish();return this.rpc.request(this.service,"CreateCollection",rt).then(vt=>a.CreateCollectionResponse.decode(new b.default.Reader(vt)))}GetCollection(tt){const rt=a.GetCollectionRequest.encode(tt).finish();return this.rpc.request(this.service,"GetCollection",rt).then(vt=>a.GetCollectionResponse.decode(new b.default.Reader(vt)))}GetCollections(tt){const rt=a.GetCollectionsRequest.encode(tt).finish();return this.rpc.request(this.service,"GetCollections",rt).then(vt=>a.GetCollectionsResponse.decode(new b.default.Reader(vt)))}UpdateCollection(tt){const rt=a.UpdateCollectionRequest.encode(tt).finish();return this.rpc.request(this.service,"UpdateCollection",rt).then(vt=>a.UpdateCollectionResponse.decode(new b.default.Reader(vt)))}DeleteCollection(tt){const rt=a.DeleteCollectionRequest.encode(tt).finish();return this.rpc.request(this.service,"DeleteCollection",rt).then(vt=>a.DeleteCollectionResponse.decode(new b.default.Reader(vt)))}}a.CollectionServiceClientImpl=ss,a.CollectionServiceDefinition={name:"CollectionService",fullName:"live.v21.CollectionService",methods:{createCollection:{name:"CreateCollection",requestType:a.CreateCollectionRequest,requestStream:!1,responseType:a.CreateCollectionResponse,responseStream:!1,options:{}},getCollection:{name:"GetCollection",requestType:a.GetCollectionRequest,requestStream:!1,responseType:a.GetCollectionResponse,responseStream:!1,options:{}},getCollections:{name:"GetCollections",requestType:a.GetCollectionsRequest,requestStream:!1,responseType:a.GetCollectionsResponse,responseStream:!1,options:{}},updateCollection:{name:"UpdateCollection",requestType:a.UpdateCollectionRequest,requestStream:!1,responseType:a.UpdateCollectionResponse,responseStream:!1,options:{}},deleteCollection:{name:"DeleteCollection",requestType:a.DeleteCollectionRequest,requestStream:!1,responseType:a.DeleteCollectionResponse,responseStream:!1,options:{}}}};class us{constructor(tt,rt){this.service=(rt==null?void 0:rt.service)||"live.v21.ProjectService",this.rpc=tt,this.CreateProject=this.CreateProject.bind(this),this.GetProject=this.GetProject.bind(this),this.DeleteProject=this.DeleteProject.bind(this),this.UpdateProject=this.UpdateProject.bind(this),this.StartProjectBroadcast=this.StartProjectBroadcast.bind(this),this.StopProjectBroadcast=this.StopProjectBroadcast.bind(this),this.StartProjectWebRtc=this.StartProjectWebRtc.bind(this),this.StopProjectWebRtc=this.StopProjectWebRtc.bind(this),this.GetProjectBroadcastSnapshot=this.GetProjectBroadcastSnapshot.bind(this),this.GetProjectBroadcastStatus=this.GetProjectBroadcastStatus.bind(this)}CreateProject(tt){const rt=a.CreateProjectRequest.encode(tt).finish();return this.rpc.request(this.service,"CreateProject",rt).then(vt=>a.CreateProjectResponse.decode(new b.default.Reader(vt)))}GetProject(tt){const rt=a.GetProjectRequest.encode(tt).finish();return this.rpc.request(this.service,"GetProject",rt).then(vt=>a.GetProjectResponse.decode(new b.default.Reader(vt)))}DeleteProject(tt){const rt=a.DeleteProjectRequest.encode(tt).finish();return this.rpc.request(this.service,"DeleteProject",rt).then(vt=>a.DeleteProjectResponse.decode(new b.default.Reader(vt)))}UpdateProject(tt){const rt=a.UpdateProjectRequest.encode(tt).finish();return this.rpc.request(this.service,"UpdateProject",rt).then(vt=>a.UpdateProjectResponse.decode(new b.default.Reader(vt)))}StartProjectBroadcast(tt){const rt=a.StartProjectBroadcastRequest.encode(tt).finish();return this.rpc.request(this.service,"StartProjectBroadcast",rt).then(vt=>a.StartProjectBroadcastResponse.decode(new b.default.Reader(vt)))}StopProjectBroadcast(tt){const rt=a.StopProjectBroadcastRequest.encode(tt).finish();return this.rpc.request(this.service,"StopProjectBroadcast",rt).then(vt=>a.StopProjectBroadcastResponse.decode(new b.default.Reader(vt)))}StartProjectWebRtc(tt){const rt=a.StartProjectWebRtcRequest.encode(tt).finish();return this.rpc.request(this.service,"StartProjectWebRtc",rt).then(vt=>a.StartProjectWebRtcResponse.decode(new b.default.Reader(vt)))}StopProjectWebRtc(tt){const rt=a.StopProjectWebRtcRequest.encode(tt).finish();return this.rpc.request(this.service,"StopProjectWebRtc",rt).then(vt=>a.StopProjectWebRtcResponse.decode(new b.default.Reader(vt)))}GetProjectBroadcastSnapshot(tt){const rt=a.GetProjectBroadcastSnapshotRequest.encode(tt).finish();return this.rpc.request(this.service,"GetProjectBroadcastSnapshot",rt).then(vt=>a.GetProjectBroadcastSnapshotResponse.decode(new b.default.Reader(vt)))}GetProjectBroadcastStatus(tt){const rt=a.GetProjectBroadcastStatusRequest.encode(tt).finish();return this.rpc.request(this.service,"GetProjectBroadcastStatus",rt).then(vt=>a.GetProjectBroadcastStatusResponse.decode(new b.default.Reader(vt)))}}a.ProjectServiceClientImpl=us,a.ProjectServiceDefinition={name:"ProjectService",fullName:"live.v21.ProjectService",methods:{createProject:{name:"CreateProject",requestType:a.CreateProjectRequest,requestStream:!1,responseType:a.CreateProjectResponse,responseStream:!1,options:{}},getProject:{name:"GetProject",requestType:a.GetProjectRequest,requestStream:!1,responseType:a.GetProjectResponse,responseStream:!1,options:{}},deleteProject:{name:"DeleteProject",requestType:a.DeleteProjectRequest,requestStream:!1,responseType:a.DeleteProjectResponse,responseStream:!1,options:{}},updateProject:{name:"UpdateProject",requestType:a.UpdateProjectRequest,requestStream:!1,responseType:a.UpdateProjectResponse,responseStream:!1,options:{}},startProjectBroadcast:{name:"StartProjectBroadcast",requestType:a.StartProjectBroadcastRequest,requestStream:!1,responseType:a.StartProjectBroadcastResponse,responseStream:!1,options:{}},stopProjectBroadcast:{name:"StopProjectBroadcast",requestType:a.StopProjectBroadcastRequest,requestStream:!1,responseType:a.StopProjectBroadcastResponse,responseStream:!1,options:{}},startProjectWebRtc:{name:"StartProjectWebRtc",requestType:a.StartProjectWebRtcRequest,requestStream:!1,responseType:a.StartProjectWebRtcResponse,responseStream:!1,options:{}},stopProjectWebRtc:{name:"StopProjectWebRtc",requestType:a.StopProjectWebRtcRequest,requestStream:!1,responseType:a.StopProjectWebRtcResponse,responseStream:!1,options:{}},getProjectBroadcastSnapshot:{name:"GetProjectBroadcastSnapshot",requestType:a.GetProjectBroadcastSnapshotRequest,requestStream:!1,responseType:a.GetProjectBroadcastSnapshotResponse,responseStream:!1,options:{}},getProjectBroadcastStatus:{name:"GetProjectBroadcastStatus",requestType:a.GetProjectBroadcastStatusRequest,requestStream:!1,responseType:a.GetProjectBroadcastStatusResponse,responseStream:!1,options:{}}}};class ds{constructor(tt,rt){this.service=(rt==null?void 0:rt.service)||"live.v21.DestinationService",this.rpc=tt,this.CreateDestination=this.CreateDestination.bind(this),this.GetDestination=this.GetDestination.bind(this),this.UpdateDestination=this.UpdateDestination.bind(this),this.DeleteDestination=this.DeleteDestination.bind(this)}CreateDestination(tt){const rt=a.CreateDestinationRequest.encode(tt).finish();return this.rpc.request(this.service,"CreateDestination",rt).then(vt=>a.CreateDestinationResponse.decode(new b.default.Reader(vt)))}GetDestination(tt){const rt=a.GetDestinationRequest.encode(tt).finish();return this.rpc.request(this.service,"GetDestination",rt).then(vt=>a.GetDestinationResponse.decode(new b.default.Reader(vt)))}UpdateDestination(tt){const rt=a.UpdateDestinationRequest.encode(tt).finish();return this.rpc.request(this.service,"UpdateDestination",rt).then(vt=>a.UpdateDestinationResponse.decode(new b.default.Reader(vt)))}DeleteDestination(tt){const rt=a.DeleteDestinationRequest.encode(tt).finish();return this.rpc.request(this.service,"DeleteDestination",rt).then(vt=>a.DeleteDestinationResponse.decode(new b.default.Reader(vt)))}}a.DestinationServiceClientImpl=ds,a.DestinationServiceDefinition={name:"DestinationService",fullName:"live.v21.DestinationService",methods:{createDestination:{name:"CreateDestination",requestType:a.CreateDestinationRequest,requestStream:!1,responseType:a.CreateDestinationResponse,responseStream:!1,options:{}},getDestination:{name:"GetDestination",requestType:a.GetDestinationRequest,requestStream:!1,responseType:a.GetDestinationResponse,responseStream:!1,options:{}},updateDestination:{name:"UpdateDestination",requestType:a.UpdateDestinationRequest,requestStream:!1,responseType:a.UpdateDestinationResponse,responseStream:!1,options:{}},deleteDestination:{name:"DeleteDestination",requestType:a.DeleteDestinationRequest,requestStream:!1,responseType:a.DeleteDestinationResponse,responseStream:!1,options:{}}}};class cs{constructor(tt,rt){this.service=(rt==null?void 0:rt.service)||"live.v21.SourceService",this.rpc=tt,this.CreateSource=this.CreateSource.bind(this),this.DeleteSource=this.DeleteSource.bind(this),this.UpdateSource=this.UpdateSource.bind(this),this.UpdateSourceInProject=this.UpdateSourceInProject.bind(this),this.GetSource=this.GetSource.bind(this),this.GetSources=this.GetSources.bind(this),this.AddSourceToProject=this.AddSourceToProject.bind(this),this.RemoveSourceFromProject=this.RemoveSourceFromProject.bind(this),this.GetSourcePlaylist=this.GetSourcePlaylist.bind(this)}CreateSource(tt){const rt=a.CreateSourceRequest.encode(tt).finish();return this.rpc.request(this.service,"CreateSource",rt).then(vt=>a.CreateSourceResponse.decode(new b.default.Reader(vt)))}DeleteSource(tt){const rt=a.DeleteSourceRequest.encode(tt).finish();return this.rpc.request(this.service,"DeleteSource",rt).then(vt=>a.DeleteSourceResponse.decode(new b.default.Reader(vt)))}UpdateSource(tt){const rt=a.UpdateSourceRequest.encode(tt).finish();return this.rpc.request(this.service,"UpdateSource",rt).then(vt=>a.UpdateSourceResponse.decode(new b.default.Reader(vt)))}UpdateSourceInProject(tt){const rt=a.UpdateSourceInProjectRequest.encode(tt).finish();return this.rpc.request(this.service,"UpdateSourceInProject",rt).then(vt=>a.UpdateSourceInProjectResponse.decode(new b.default.Reader(vt)))}GetSource(tt){const rt=a.GetSourceRequest.encode(tt).finish();return this.rpc.request(this.service,"GetSource",rt).then(vt=>a.GetSourceResponse.decode(new b.default.Reader(vt)))}GetSources(tt){const rt=a.GetSourcesRequest.encode(tt).finish();return this.rpc.request(this.service,"GetSources",rt).then(vt=>a.GetSourcesResponse.decode(new b.default.Reader(vt)))}AddSourceToProject(tt){const rt=a.AddSourceToProjectRequest.encode(tt).finish();return this.rpc.request(this.service,"AddSourceToProject",rt).then(vt=>a.AddSourceToProjectResponse.decode(new b.default.Reader(vt)))}RemoveSourceFromProject(tt){const rt=a.RemoveSourceFromProjectRequest.encode(tt).finish();return this.rpc.request(this.service,"RemoveSourceFromProject",rt).then(vt=>a.RemoveSourceFromProjectResponse.decode(new b.default.Reader(vt)))}GetSourcePlaylist(tt){const rt=a.GetSourcePlaylistRequest.encode(tt).finish();return this.rpc.request(this.service,"GetSourcePlaylist",rt).then(vt=>_.HttpBody.decode(new b.default.Reader(vt)))}}a.SourceServiceClientImpl=cs,a.SourceServiceDefinition={name:"SourceService",fullName:"live.v21.SourceService",methods:{createSource:{name:"CreateSource",requestType:a.CreateSourceRequest,requestStream:!1,responseType:a.CreateSourceResponse,responseStream:!1,options:{}},deleteSource:{name:"DeleteSource",requestType:a.DeleteSourceRequest,requestStream:!1,responseType:a.DeleteSourceResponse,responseStream:!1,options:{}},updateSource:{name:"UpdateSource",requestType:a.UpdateSourceRequest,requestStream:!1,responseType:a.UpdateSourceResponse,responseStream:!1,options:{}},updateSourceInProject:{name:"UpdateSourceInProject",requestType:a.UpdateSourceInProjectRequest,requestStream:!1,responseType:a.UpdateSourceInProjectResponse,responseStream:!1,options:{}},getSource:{name:"GetSource",requestType:a.GetSourceRequest,requestStream:!1,responseType:a.GetSourceResponse,responseStream:!1,options:{}},getSources:{name:"GetSources",requestType:a.GetSourcesRequest,requestStream:!1,responseType:a.GetSourcesResponse,responseStream:!1,options:{}},addSourceToProject:{name:"AddSourceToProject",requestType:a.AddSourceToProjectRequest,requestStream:!1,responseType:a.AddSourceToProjectResponse,responseStream:!1,options:{}},removeSourceFromProject:{name:"RemoveSourceFromProject",requestType:a.RemoveSourceFromProjectRequest,requestStream:!1,responseType:a.RemoveSourceFromProjectResponse,responseStream:!1,options:{}},getSourcePlaylist:{name:"GetSourcePlaylist",requestType:a.GetSourcePlaylistRequest,requestStream:!1,responseType:_.HttpBody,responseStream:!1,options:{}}}};class ls{constructor(tt,rt){this.service=(rt==null?void 0:rt.service)||"live.v21.BackendAuthenticationService",this.rpc=tt,this.CreateAccessToken=this.CreateAccessToken.bind(this)}CreateAccessToken(tt){const rt=a.CreateAccessTokenRequest.encode(tt).finish();return this.rpc.request(this.service,"CreateAccessToken",rt).then(vt=>a.CreateAccessTokenResponse.decode(new b.default.Reader(vt)))}}a.BackendAuthenticationServiceClientImpl=ls,a.BackendAuthenticationServiceDefinition={name:"BackendAuthenticationService",fullName:"live.v21.BackendAuthenticationService",methods:{createAccessToken:{name:"CreateAccessToken",requestType:a.CreateAccessTokenRequest,requestStream:!1,responseType:a.CreateAccessTokenResponse,responseStream:!1,options:{}}}};class fs{constructor(tt,rt){this.service=(rt==null?void 0:rt.service)||"live.v21.AuthenticationService",this.rpc=tt,this.CreateGuestAccessToken=this.CreateGuestAccessToken.bind(this),this.RefreshAccessToken=this.RefreshAccessToken.bind(this),this.CreateWebRtcAccessToken=this.CreateWebRtcAccessToken.bind(this)}CreateGuestAccessToken(tt){const rt=a.CreateGuestAccessTokenRequest.encode(tt).finish();return this.rpc.request(this.service,"CreateGuestAccessToken",rt).then(vt=>a.CreateGuestAccessTokenResponse.decode(new b.default.Reader(vt)))}RefreshAccessToken(tt){const rt=a.RefreshAccessTokenRequest.encode(tt).finish();return this.rpc.request(this.service,"RefreshAccessToken",rt).then(vt=>a.RefreshAccessTokenResponse.decode(new b.default.Reader(vt)))}CreateWebRtcAccessToken(tt){const rt=a.CreateWebRtcAccessTokenRequest.encode(tt).finish();return this.rpc.request(this.service,"CreateWebRtcAccessToken",rt).then(vt=>a.CreateWebRtcAccessTokenResponse.decode(new b.default.Reader(vt)))}}a.AuthenticationServiceClientImpl=fs,a.AuthenticationServiceDefinition={name:"AuthenticationService",fullName:"live.v21.AuthenticationService",methods:{createGuestAccessToken:{name:"CreateGuestAccessToken",requestType:a.CreateGuestAccessTokenRequest,requestStream:!1,responseType:a.CreateGuestAccessTokenResponse,responseStream:!1,options:{}},refreshAccessToken:{name:"RefreshAccessToken",requestType:a.RefreshAccessTokenRequest,requestStream:!1,responseType:a.RefreshAccessTokenResponse,responseStream:!1,options:{}},createWebRtcAccessToken:{name:"CreateWebRtcAccessToken",requestType:a.CreateWebRtcAccessTokenRequest,requestStream:!1,responseType:a.CreateWebRtcAccessTokenResponse,responseStream:!1,options:{}}}};class ps{constructor(tt,rt){this.service=(rt==null?void 0:rt.service)||"live.v21.PublicAuthenticationService",this.rpc=tt,this.GetJsonWebKeySet=this.GetJsonWebKeySet.bind(this),this.GuestCodeRedirect=this.GuestCodeRedirect.bind(this)}GetJsonWebKeySet(tt){const rt=a.GetJsonWebKeySetRequest.encode(tt).finish();return this.rpc.request(this.service,"GetJsonWebKeySet",rt).then(vt=>a.GetJsonWebKeySetResponse.decode(new b.default.Reader(vt)))}GuestCodeRedirect(tt){const rt=a.GuestCodeRedirectRequest.encode(tt).finish();return this.rpc.request(this.service,"GuestCodeRedirect",rt).then(vt=>a.GuestCodeRedirectResponse.decode(new b.default.Reader(vt)))}}a.PublicAuthenticationServiceClientImpl=ps,a.PublicAuthenticationServiceDefinition={name:"PublicAuthenticationService",fullName:"live.v21.PublicAuthenticationService",methods:{getJsonWebKeySet:{name:"GetJsonWebKeySet",requestType:a.GetJsonWebKeySetRequest,requestStream:!1,responseType:a.GetJsonWebKeySetResponse,responseStream:!1,options:{}},guestCodeRedirect:{name:"GuestCodeRedirect",requestType:a.GuestCodeRedirectRequest,requestStream:!1,responseType:a.GuestCodeRedirectResponse,responseStream:!1,options:{}}}};var An=(()=>{if(typeof An<"u")return An;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof commonjsGlobal$1<"u")return commonjsGlobal$1;throw"Unable to locate global object"})();function hs($){if(An.Buffer)return Uint8Array.from(An.Buffer.from($,"base64"));{const tt=An.atob($),rt=new Uint8Array(tt.length);for(let Nt=0;Nt<tt.length;++Nt)rt[Nt]=tt.charCodeAt(Nt);return rt}}function vs($){if(An.Buffer)return An.Buffer.from($).toString("base64");{const tt=[];return $.forEach(rt=>{tt.push(String.fromCharCode(rt))}),An.btoa(tt.join(""))}}function yr($){const tt=new Date($),rt=tt.getTime()/1e3,Nt=tt.getTime()%1e3*1e6;return{seconds:rt,nanos:Nt}}function Sr($){let tt=$.seconds*1e3;return tt+=$.nanos/1e6,new Date(tt).toISOString()}function Wt($){return $!=null}})(api$1);(function(a){var c=commonjsGlobal$1&&commonjsGlobal$1.__createBinding||(Object.create?function(mt,St,yt,_t){_t===void 0&&(_t=yt);var Tt=Object.getOwnPropertyDescriptor(St,yt);(!Tt||("get"in Tt?!St.__esModule:Tt.writable||Tt.configurable))&&(Tt={enumerable:!0,get:function(){return St[yt]}}),Object.defineProperty(mt,_t,Tt)}:function(mt,St,yt,_t){_t===void 0&&(_t=yt),mt[_t]=St[yt]}),b=commonjsGlobal$1&&commonjsGlobal$1.__setModuleDefault||(Object.create?function(mt,St){Object.defineProperty(mt,"default",{enumerable:!0,value:St})}:function(mt,St){mt.default=St}),_=commonjsGlobal$1&&commonjsGlobal$1.__decorate||function(mt,St,yt,_t){var Tt=arguments.length,gt=Tt<3?St:_t===null?_t=Object.getOwnPropertyDescriptor(St,yt):_t,ht;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")gt=Reflect.decorate(mt,St,yt,_t);else for(var Et=mt.length-1;Et>=0;Et--)(ht=mt[Et])&&(gt=(Tt<3?ht(gt):Tt>3?ht(St,yt,gt):ht(St,yt))||gt);return Tt>3&&gt&&Object.defineProperty(St,yt,gt),gt},k=commonjsGlobal$1&&commonjsGlobal$1.__importStar||function(mt){if(mt&&mt.__esModule)return mt;var St={};if(mt!=null)for(var yt in mt)yt!=="default"&&Object.prototype.hasOwnProperty.call(mt,yt)&&c(St,mt,yt);return b(St,mt),St},j=commonjsGlobal$1&&commonjsGlobal$1.__metadata||function(mt,St){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(mt,St)};Object.defineProperty(a,"__esModule",{value:!0}),a.LiveApi=void 0;const _e=k(lib$1),et=api$2,nt=k(api$1),it=decorator,ft="LiveApi";class pt extends et.ApiClient{constructor(St,yt,_t,Tt,gt,ht,Et){super(St,_t,ht,ft,Et),this.handlers={},this.eventApi=yt,this.accessTokenRefreshCallback=Tt,this.publicAuthentication=this.clientFactory.create(nt.PublicAuthenticationServiceDefinition,this.channel),gt!=null&&(this.backendAuthentication=this.clientFactory.create(nt.BackendAuthenticationServiceDefinition,this.channel,{"*":{metadata:_e.Metadata({"X-Api-Key":gt})}})),this.eventApi.on("event",{name:`${pt.LIVEAPI_EVENT_PREFIX}:*`,ignoreSessionEvents:!0,allowedSessionEvents:[`${pt.LIVEAPI_EVENT_PREFIX}:EVENT_TYPE_PROJECT:EVENT_SUB_TYPE_STATE`]},this.eventCallback.bind(this))}on(St,yt){var _t;this.handlers[St]=(_t=this.handlers[St])!==null&&_t!==void 0?_t:[],this.handlers[St].push(yt)}off(St,yt){this.handlers[St]=this.handlers[St].filter(_t=>_t!==yt)}emitToHandlers(St,yt,_t){var Tt;for(const gt of(Tt=this.handlers[St])!==null&&Tt!==void 0?Tt:[])gt(Object.values(_t).find(ht=>!!ht),yt)}async subscribeToCollection(St){await this.eventApi.subscribe(`${pt.LIVEAPI_EVENT_PREFIX}:*`,{target:{collectionId:St}})}async unsubscribeFromCollection(St){await this.eventApi.unsubscribe(`${pt.LIVEAPI_EVENT_PREFIX}:*`,{target:{collectionId:St}})}async subscribeToProject(St,yt){await this.eventApi.subscribe(`${pt.LIVEAPI_EVENT_PREFIX}:*`,{target:{collectionId:St,projectId:yt}})}async unsubscribeFromProject(St,yt){await this.eventApi.unsubscribe(`${pt.LIVEAPI_EVENT_PREFIX}:*`,{target:{collectionId:St,projectId:yt}})}eventCallback(St){let _t=St.name.split(`${pt.LIVEAPI_EVENT_PREFIX}:`)[1].split(":"),Tt=nt.eventTypeFromJSON(_t[0]),gt=nt.eventSubTypeFromJSON(_t[1]);this.log.info("processing event: "+Tt+"/"+gt),pt.liveApiEventMap[Tt]&&this.emitToHandlers(Tt,gt,St.payload)}_setup(St){let yt=this;St.onHeader=function(_t){let Tt=_t.get("Authorization");if(Tt!=null){const gt=Tt.split(" ");if(gt.length==2&&gt[0]=="Bearer"){let ht=gt[1];yt.log.info("received refresh token"),yt.accessTokenRefreshCallback(ht)}}},this.collection=this.clientFactory.create(nt.CollectionServiceDefinition,this.channel,{"*":St}),this.project=this.clientFactory.create(nt.ProjectServiceDefinition,this.channel,{"*":St}),this.source=this.clientFactory.create(nt.SourceServiceDefinition,this.channel,{"*":St}),this.destination=this.clientFactory.create(nt.DestinationServiceDefinition,this.channel,{"*":St}),this.authentication=this.clientFactory.create(nt.AuthenticationServiceDefinition,this.channel,{"*":St})}}pt.LIVEAPI_EVENT_PREFIX="apistream:live",_([(0,it.RequiresSdkAuthentication)(),j("design:type",Object)],pt.prototype,"collection",void 0),_([(0,it.RequiresSdkAuthentication)(),j("design:type",Object)],pt.prototype,"project",void 0),_([(0,it.RequiresSdkAuthentication)(),j("design:type",Object)],pt.prototype,"source",void 0),_([(0,it.RequiresSdkAuthentication)(),j("design:type",Object)],pt.prototype,"destination",void 0),_([(0,it.RequiresSdkAuthentication)(),j("design:type",Object)],pt.prototype,"authentication",void 0),a.LiveApi=pt,function(mt){mt.liveApiEventMap={[nt.EventType.EVENT_TYPE_COLLECTION]:"collection",[nt.EventType.EVENT_TYPE_PROJECT]:"project",[nt.EventType.EVENT_TYPE_SOURCE]:"source",[nt.EventType.EVENT_TYPE_DESTINATION]:"destination",[nt.EventType.EVENT_TYPE_UNSPECIFIED]:"unspecified"}}(pt=a.LiveApi||(a.LiveApi={}))})(liveapi);var eventapi={},dist$1={},api={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var extendStatics=function(a,c){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,_){b.__proto__=_}||function(b,_){for(var k in _)_.hasOwnProperty(k)&&(b[k]=_[k])},extendStatics(a,c)};function __extends(a,c){extendStatics(a,c);function b(){this.constructor=a}a.prototype=c===null?Object.create(c):(b.prototype=c.prototype,new b)}function isFunction$2(a){return typeof a=="function"}var _enable_super_gross_mode_that_will_cause_bad_things=!1,config$2={Promise:void 0,set useDeprecatedSynchronousErrorHandling(a){if(a){var c=new Error;""+c.stack}_enable_super_gross_mode_that_will_cause_bad_things=a},get useDeprecatedSynchronousErrorHandling(){return _enable_super_gross_mode_that_will_cause_bad_things}};function hostReportError(a){setTimeout(function(){throw a},0)}var empty$2={closed:!0,next:function(a){},error:function(a){if(config$2.useDeprecatedSynchronousErrorHandling)throw a;hostReportError(a)},complete:function(){}},isArray$4=function(){return Array.isArray||function(a){return a&&typeof a.length=="number"}}();function isObject$8(a){return a!==null&&typeof a=="object"}var UnsubscriptionErrorImpl=function(){function a(c){return Error.call(this),this.message=c?c.length+` errors occurred during unsubscription:
`+c.map(function(b,_){return _+1+") "+b.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=c,this}return a.prototype=Object.create(Error.prototype),a}(),UnsubscriptionError=UnsubscriptionErrorImpl,Subscription=function(){function a(c){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,c&&(this._ctorUnsubscribe=!0,this._unsubscribe=c)}return a.prototype.unsubscribe=function(){var c;if(!this.closed){var b=this,_=b._parentOrParents,k=b._ctorUnsubscribe,j=b._unsubscribe,_e=b._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,_ instanceof a)_.remove(this);else if(_!==null)for(var et=0;et<_.length;++et){var nt=_[et];nt.remove(this)}if(isFunction$2(j)){k&&(this._unsubscribe=void 0);try{j.call(this)}catch(pt){c=pt instanceof UnsubscriptionError?flattenUnsubscriptionErrors(pt.errors):[pt]}}if(isArray$4(_e))for(var et=-1,it=_e.length;++et<it;){var ft=_e[et];if(isObject$8(ft))try{ft.unsubscribe()}catch(mt){c=c||[],mt instanceof UnsubscriptionError?c=c.concat(flattenUnsubscriptionErrors(mt.errors)):c.push(mt)}}if(c)throw new UnsubscriptionError(c)}},a.prototype.add=function(c){var b=c;if(!c)return a.EMPTY;switch(typeof c){case"function":b=new a(c);case"object":if(b===this||b.closed||typeof b.unsubscribe!="function")return b;if(this.closed)return b.unsubscribe(),b;if(!(b instanceof a)){var _=b;b=new a,b._subscriptions=[_]}break;default:throw new Error("unrecognized teardown "+c+" added to Subscription.")}var k=b._parentOrParents;if(k===null)b._parentOrParents=this;else if(k instanceof a){if(k===this)return b;b._parentOrParents=[k,this]}else if(k.indexOf(this)===-1)k.push(this);else return b;var j=this._subscriptions;return j===null?this._subscriptions=[b]:j.push(b),b},a.prototype.remove=function(c){var b=this._subscriptions;if(b){var _=b.indexOf(c);_!==-1&&b.splice(_,1)}},a.EMPTY=function(c){return c.closed=!0,c}(new a),a}();function flattenUnsubscriptionErrors(a){return a.reduce(function(c,b){return c.concat(b instanceof UnsubscriptionError?b.errors:b)},[])}var rxSubscriber=function(){return typeof Symbol=="function"?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()}(),Subscriber=function(a){__extends(c,a);function c(b,_,k){var j=a.call(this)||this;switch(j.syncErrorValue=null,j.syncErrorThrown=!1,j.syncErrorThrowable=!1,j.isStopped=!1,arguments.length){case 0:j.destination=empty$2;break;case 1:if(!b){j.destination=empty$2;break}if(typeof b=="object"){b instanceof c?(j.syncErrorThrowable=b.syncErrorThrowable,j.destination=b,b.add(j)):(j.syncErrorThrowable=!0,j.destination=new SafeSubscriber(j,b));break}default:j.syncErrorThrowable=!0,j.destination=new SafeSubscriber(j,b,_,k);break}return j}return c.prototype[rxSubscriber]=function(){return this},c.create=function(b,_,k){var j=new c(b,_,k);return j.syncErrorThrowable=!1,j},c.prototype.next=function(b){this.isStopped||this._next(b)},c.prototype.error=function(b){this.isStopped||(this.isStopped=!0,this._error(b))},c.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},c.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,a.prototype.unsubscribe.call(this))},c.prototype._next=function(b){this.destination.next(b)},c.prototype._error=function(b){this.destination.error(b),this.unsubscribe()},c.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},c.prototype._unsubscribeAndRecycle=function(){var b=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=b,this},c}(Subscription),SafeSubscriber=function(a){__extends(c,a);function c(b,_,k,j){var _e=a.call(this)||this;_e._parentSubscriber=b;var et,nt=_e;return isFunction$2(_)?et=_:_&&(et=_.next,k=_.error,j=_.complete,_!==empty$2&&(nt=Object.create(_),isFunction$2(nt.unsubscribe)&&_e.add(nt.unsubscribe.bind(nt)),nt.unsubscribe=_e.unsubscribe.bind(_e))),_e._context=nt,_e._next=et,_e._error=k,_e._complete=j,_e}return c.prototype.next=function(b){if(!this.isStopped&&this._next){var _=this._parentSubscriber;!config$2.useDeprecatedSynchronousErrorHandling||!_.syncErrorThrowable?this.__tryOrUnsub(this._next,b):this.__tryOrSetError(_,this._next,b)&&this.unsubscribe()}},c.prototype.error=function(b){if(!this.isStopped){var _=this._parentSubscriber,k=config$2.useDeprecatedSynchronousErrorHandling;if(this._error)!k||!_.syncErrorThrowable?(this.__tryOrUnsub(this._error,b),this.unsubscribe()):(this.__tryOrSetError(_,this._error,b),this.unsubscribe());else if(_.syncErrorThrowable)k?(_.syncErrorValue=b,_.syncErrorThrown=!0):hostReportError(b),this.unsubscribe();else{if(this.unsubscribe(),k)throw b;hostReportError(b)}}},c.prototype.complete=function(){var b=this;if(!this.isStopped){var _=this._parentSubscriber;if(this._complete){var k=function(){return b._complete.call(b._context)};!config$2.useDeprecatedSynchronousErrorHandling||!_.syncErrorThrowable?(this.__tryOrUnsub(k),this.unsubscribe()):(this.__tryOrSetError(_,k),this.unsubscribe())}else this.unsubscribe()}},c.prototype.__tryOrUnsub=function(b,_){try{b.call(this._context,_)}catch(k){if(this.unsubscribe(),config$2.useDeprecatedSynchronousErrorHandling)throw k;hostReportError(k)}},c.prototype.__tryOrSetError=function(b,_,k){if(!config$2.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{_.call(this._context,k)}catch(j){return config$2.useDeprecatedSynchronousErrorHandling?(b.syncErrorValue=j,b.syncErrorThrown=!0,!0):(hostReportError(j),!0)}return!1},c.prototype._unsubscribe=function(){var b=this._parentSubscriber;this._context=null,this._parentSubscriber=null,b.unsubscribe()},c}(Subscriber);function canReportError(a){for(;a;){var c=a,b=c.closed,_=c.destination,k=c.isStopped;if(b||k)return!1;_&&_ instanceof Subscriber?a=_:a=null}return!0}function toSubscriber(a,c,b){if(a){if(a instanceof Subscriber)return a;if(a[rxSubscriber])return a[rxSubscriber]()}return!a&&!c&&!b?new Subscriber(empty$2):new Subscriber(a,c,b)}var observable=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function identity(a){return a}function pipe(){for(var a=[],c=0;c<arguments.length;c++)a[c]=arguments[c];return pipeFromArray(a)}function pipeFromArray(a){return a.length===0?identity:a.length===1?a[0]:function(b){return a.reduce(function(_,k){return k(_)},b)}}var Observable=function(){function a(c){this._isScalar=!1,c&&(this._subscribe=c)}return a.prototype.lift=function(c){var b=new a;return b.source=this,b.operator=c,b},a.prototype.subscribe=function(c,b,_){var k=this.operator,j=toSubscriber(c,b,_);if(k?j.add(k.call(j,this.source)):j.add(this.source||config$2.useDeprecatedSynchronousErrorHandling&&!j.syncErrorThrowable?this._subscribe(j):this._trySubscribe(j)),config$2.useDeprecatedSynchronousErrorHandling&&j.syncErrorThrowable&&(j.syncErrorThrowable=!1,j.syncErrorThrown))throw j.syncErrorValue;return j},a.prototype._trySubscribe=function(c){try{return this._subscribe(c)}catch(b){config$2.useDeprecatedSynchronousErrorHandling&&(c.syncErrorThrown=!0,c.syncErrorValue=b),canReportError(c)?c.error(b):console.warn(b)}},a.prototype.forEach=function(c,b){var _=this;return b=getPromiseCtor(b),new b(function(k,j){var _e;_e=_.subscribe(function(et){try{c(et)}catch(nt){j(nt),_e&&_e.unsubscribe()}},j,k)})},a.prototype._subscribe=function(c){var b=this.source;return b&&b.subscribe(c)},a.prototype[observable]=function(){return this},a.prototype.pipe=function(){for(var c=[],b=0;b<arguments.length;b++)c[b]=arguments[b];return c.length===0?this:pipeFromArray(c)(this)},a.prototype.toPromise=function(c){var b=this;return c=getPromiseCtor(c),new c(function(_,k){var j;b.subscribe(function(_e){return j=_e},function(_e){return k(_e)},function(){return _(j)})})},a.create=function(c){return new a(c)},a}();function getPromiseCtor(a){if(a||(a=Promise),!a)throw new Error("no Promise impl found");return a}var subscribeToArray=function(a){return function(c){for(var b=0,_=a.length;b<_&&!c.closed;b++)c.next(a[b]);c.complete()}},subscribeToPromise=function(a){return function(c){return a.then(function(b){c.closed||(c.next(b),c.complete())},function(b){return c.error(b)}).then(null,hostReportError),c}};function getSymbolIterator(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var iterator=getSymbolIterator(),subscribeToIterable=function(a){return function(c){var b=a[iterator]();do{var _=void 0;try{_=b.next()}catch(k){return c.error(k),c}if(_.done){c.complete();break}if(c.next(_.value),c.closed)break}while(!0);return typeof b.return=="function"&&c.add(function(){b.return&&b.return()}),c}},subscribeToObservable=function(a){return function(c){var b=a[observable]();if(typeof b.subscribe!="function")throw new TypeError("Provided object does not correctly implement Symbol.observable");return b.subscribe(c)}},isArrayLike$1=function(a){return a&&typeof a.length=="number"&&typeof a!="function"};function isPromise(a){return!!a&&typeof a.subscribe!="function"&&typeof a.then=="function"}var subscribeTo=function(a){if(a&&typeof a[observable]=="function")return subscribeToObservable(a);if(isArrayLike$1(a))return subscribeToArray(a);if(isPromise(a))return subscribeToPromise(a);if(a&&typeof a[iterator]=="function")return subscribeToIterable(a);var c=isObject$8(a)?"an invalid object":"'"+a+"'",b="You provided "+c+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.";throw new TypeError(b)},SimpleInnerSubscriber=function(a){__extends(c,a);function c(b){var _=a.call(this)||this;return _.parent=b,_}return c.prototype._next=function(b){this.parent.notifyNext(b)},c.prototype._error=function(b){this.parent.notifyError(b),this.unsubscribe()},c.prototype._complete=function(){this.parent.notifyComplete(),this.unsubscribe()},c}(Subscriber),SimpleOuterSubscriber=function(a){__extends(c,a);function c(){return a!==null&&a.apply(this,arguments)||this}return c.prototype.notifyNext=function(b){this.destination.next(b)},c.prototype.notifyError=function(b){this.destination.error(b)},c.prototype.notifyComplete=function(){this.destination.complete()},c}(Subscriber);function innerSubscribe(a,c){if(!c.closed){if(a instanceof Observable)return a.subscribe(c);var b;try{b=subscribeTo(a)(c)}catch(_){c.error(_)}return b}}function audit(a){return function(b){return b.lift(new AuditOperator(a))}}var AuditOperator=function(){function a(c){this.durationSelector=c}return a.prototype.call=function(c,b){return b.subscribe(new AuditSubscriber(c,this.durationSelector))},a}(),AuditSubscriber=function(a){__extends(c,a);function c(b,_){var k=a.call(this,b)||this;return k.durationSelector=_,k.hasValue=!1,k}return c.prototype._next=function(b){if(this.value=b,this.hasValue=!0,!this.throttled){var _=void 0;try{var k=this.durationSelector;_=k(b)}catch(_e){return this.destination.error(_e)}var j=innerSubscribe(_,new SimpleInnerSubscriber(this));!j||j.closed?this.clearThrottle():this.add(this.throttled=j)}},c.prototype.clearThrottle=function(){var b=this,_=b.value,k=b.hasValue,j=b.throttled;j&&(this.remove(j),this.throttled=void 0,j.unsubscribe()),k&&(this.value=void 0,this.hasValue=!1,this.destination.next(_))},c.prototype.notifyNext=function(){this.clearThrottle()},c.prototype.notifyComplete=function(){this.clearThrottle()},c}(SimpleOuterSubscriber),Action=function(a){__extends(c,a);function c(b,_){return a.call(this)||this}return c.prototype.schedule=function(b,_){return this},c}(Subscription),AsyncAction=function(a){__extends(c,a);function c(b,_){var k=a.call(this,b,_)||this;return k.scheduler=b,k.work=_,k.pending=!1,k}return c.prototype.schedule=function(b,_){if(_===void 0&&(_=0),this.closed)return this;this.state=b;var k=this.id,j=this.scheduler;return k!=null&&(this.id=this.recycleAsyncId(j,k,_)),this.pending=!0,this.delay=_,this.id=this.id||this.requestAsyncId(j,this.id,_),this},c.prototype.requestAsyncId=function(b,_,k){return k===void 0&&(k=0),setInterval(b.flush.bind(b,this),k)},c.prototype.recycleAsyncId=function(b,_,k){if(k===void 0&&(k=0),k!==null&&this.delay===k&&this.pending===!1)return _;clearInterval(_)},c.prototype.execute=function(b,_){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var k=this._execute(b,_);if(k)return k;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},c.prototype._execute=function(b,_){var k=!1,j=void 0;try{this.work(b)}catch(_e){k=!0,j=!!_e&&_e||new Error(_e)}if(k)return this.unsubscribe(),j},c.prototype._unsubscribe=function(){var b=this.id,_=this.scheduler,k=_.actions,j=k.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,j!==-1&&k.splice(j,1),b!=null&&(this.id=this.recycleAsyncId(_,b,null)),this.delay=null},c}(Action),Scheduler=function(){function a(c,b){b===void 0&&(b=a.now),this.SchedulerAction=c,this.now=b}return a.prototype.schedule=function(c,b,_){return b===void 0&&(b=0),new this.SchedulerAction(this,c).schedule(_,b)},a.now=function(){return Date.now()},a}(),AsyncScheduler=function(a){__extends(c,a);function c(b,_){_===void 0&&(_=Scheduler.now);var k=a.call(this,b,function(){return c.delegate&&c.delegate!==k?c.delegate.now():_()})||this;return k.actions=[],k.active=!1,k.scheduled=void 0,k}return c.prototype.schedule=function(b,_,k){return _===void 0&&(_=0),c.delegate&&c.delegate!==this?c.delegate.schedule(b,_,k):a.prototype.schedule.call(this,b,_,k)},c.prototype.flush=function(b){var _=this.actions;if(this.active){_.push(b);return}var k;this.active=!0;do if(k=b.execute(b.state,b.delay))break;while(b=_.shift());if(this.active=!1,k){for(;b=_.shift();)b.unsubscribe();throw k}},c}(Scheduler),asyncScheduler=new AsyncScheduler(AsyncAction),async=asyncScheduler;function isNumeric(a){return!isArray$4(a)&&a-parseFloat(a)+1>=0}function isScheduler(a){return a&&typeof a.schedule=="function"}function timer(a,c,b){a===void 0&&(a=0);var _=-1;return isNumeric(c)?_=Number(c)<1&&1||Number(c):isScheduler(c)&&(b=c),isScheduler(b)||(b=async),new Observable(function(k){var j=isNumeric(a)?a:+a-b.now();return b.schedule(dispatch$1,j,{index:0,period:_,subscriber:k})})}function dispatch$1(a){var c=a.index,b=a.period,_=a.subscriber;if(_.next(c),!_.closed){if(b===-1)return _.complete();a.index=c+1,this.schedule(a,b)}}function auditTime(a,c){return c===void 0&&(c=async),audit(function(){return timer(a,c)})}function buffer$1(a){return function(b){return b.lift(new BufferOperator(a))}}var BufferOperator=function(){function a(c){this.closingNotifier=c}return a.prototype.call=function(c,b){return b.subscribe(new BufferSubscriber(c,this.closingNotifier))},a}(),BufferSubscriber=function(a){__extends(c,a);function c(b,_){var k=a.call(this,b)||this;return k.buffer=[],k.add(innerSubscribe(_,new SimpleInnerSubscriber(k))),k}return c.prototype._next=function(b){this.buffer.push(b)},c.prototype.notifyNext=function(){var b=this.buffer;this.buffer=[],this.destination.next(b)},c}(SimpleOuterSubscriber);function bufferCount(a,c){return c===void 0&&(c=null),function(_){return _.lift(new BufferCountOperator(a,c))}}var BufferCountOperator=function(){function a(c,b){this.bufferSize=c,this.startBufferEvery=b,!b||c===b?this.subscriberClass=BufferCountSubscriber:this.subscriberClass=BufferSkipCountSubscriber}return a.prototype.call=function(c,b){return b.subscribe(new this.subscriberClass(c,this.bufferSize,this.startBufferEvery))},a}(),BufferCountSubscriber=function(a){__extends(c,a);function c(b,_){var k=a.call(this,b)||this;return k.bufferSize=_,k.buffer=[],k}return c.prototype._next=function(b){var _=this.buffer;_.push(b),_.length==this.bufferSize&&(this.destination.next(_),this.buffer=[])},c.prototype._complete=function(){var b=this.buffer;b.length>0&&this.destination.next(b),a.prototype._complete.call(this)},c}(Subscriber),BufferSkipCountSubscriber=function(a){__extends(c,a);function c(b,_,k){var j=a.call(this,b)||this;return j.bufferSize=_,j.startBufferEvery=k,j.buffers=[],j.count=0,j}return c.prototype._next=function(b){var _=this,k=_.bufferSize,j=_.startBufferEvery,_e=_.buffers,et=_.count;this.count++,et%j===0&&_e.push([]);for(var nt=_e.length;nt--;){var it=_e[nt];it.push(b),it.length===k&&(_e.splice(nt,1),this.destination.next(it))}},c.prototype._complete=function(){for(var b=this,_=b.buffers,k=b.destination;_.length>0;){var j=_.shift();j.length>0&&k.next(j)}a.prototype._complete.call(this)},c}(Subscriber);function bufferTime(a){var c=arguments.length,b=async;isScheduler(arguments[arguments.length-1])&&(b=arguments[arguments.length-1],c--);var _=null;c>=2&&(_=arguments[1]);var k=Number.POSITIVE_INFINITY;return c>=3&&(k=arguments[2]),function(_e){return _e.lift(new BufferTimeOperator(a,_,k,b))}}var BufferTimeOperator=function(){function a(c,b,_,k){this.bufferTimeSpan=c,this.bufferCreationInterval=b,this.maxBufferSize=_,this.scheduler=k}return a.prototype.call=function(c,b){return b.subscribe(new BufferTimeSubscriber(c,this.bufferTimeSpan,this.bufferCreationInterval,this.maxBufferSize,this.scheduler))},a}(),Context=function(){function a(){this.buffer=[]}return a}(),BufferTimeSubscriber=function(a){__extends(c,a);function c(b,_,k,j,_e){var et=a.call(this,b)||this;et.bufferTimeSpan=_,et.bufferCreationInterval=k,et.maxBufferSize=j,et.scheduler=_e,et.contexts=[];var nt=et.openContext();if(et.timespanOnly=k==null||k<0,et.timespanOnly){var it={subscriber:et,context:nt,bufferTimeSpan:_};et.add(nt.closeAction=_e.schedule(dispatchBufferTimeSpanOnly,_,it))}else{var ft={subscriber:et,context:nt},pt={bufferTimeSpan:_,bufferCreationInterval:k,subscriber:et,scheduler:_e};et.add(nt.closeAction=_e.schedule(dispatchBufferClose,_,ft)),et.add(_e.schedule(dispatchBufferCreation,k,pt))}return et}return c.prototype._next=function(b){for(var _=this.contexts,k=_.length,j,_e=0;_e<k;_e++){var et=_[_e],nt=et.buffer;nt.push(b),nt.length==this.maxBufferSize&&(j=et)}j&&this.onBufferFull(j)},c.prototype._error=function(b){this.contexts.length=0,a.prototype._error.call(this,b)},c.prototype._complete=function(){for(var b=this,_=b.contexts,k=b.destination;_.length>0;){var j=_.shift();k.next(j.buffer)}a.prototype._complete.call(this)},c.prototype._unsubscribe=function(){this.contexts=null},c.prototype.onBufferFull=function(b){this.closeContext(b);var _=b.closeAction;if(_.unsubscribe(),this.remove(_),!this.closed&&this.timespanOnly){b=this.openContext();var k=this.bufferTimeSpan,j={subscriber:this,context:b,bufferTimeSpan:k};this.add(b.closeAction=this.scheduler.schedule(dispatchBufferTimeSpanOnly,k,j))}},c.prototype.openContext=function(){var b=new Context;return this.contexts.push(b),b},c.prototype.closeContext=function(b){this.destination.next(b.buffer);var _=this.contexts,k=_?_.indexOf(b):-1;k>=0&&_.splice(_.indexOf(b),1)},c}(Subscriber);function dispatchBufferTimeSpanOnly(a){var c=a.subscriber,b=a.context;b&&c.closeContext(b),c.closed||(a.context=c.openContext(),a.context.closeAction=this.schedule(a,a.bufferTimeSpan))}function dispatchBufferCreation(a){var c=a.bufferCreationInterval,b=a.bufferTimeSpan,_=a.subscriber,k=a.scheduler,j=_.openContext(),_e=this;_.closed||(_.add(j.closeAction=k.schedule(dispatchBufferClose,b,{subscriber:_,context:j})),_e.schedule(a,c))}function dispatchBufferClose(a){var c=a.subscriber,b=a.context;c.closeContext(b)}var InnerSubscriber=function(a){__extends(c,a);function c(b,_,k){var j=a.call(this)||this;return j.parent=b,j.outerValue=_,j.outerIndex=k,j.index=0,j}return c.prototype._next=function(b){this.parent.notifyNext(this.outerValue,b,this.outerIndex,this.index++,this)},c.prototype._error=function(b){this.parent.notifyError(b,this),this.unsubscribe()},c.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},c}(Subscriber);function subscribeToResult(a,c,b,_,k){if(k===void 0&&(k=new InnerSubscriber(a,b,_)),!k.closed)return c instanceof Observable?c.subscribe(k):subscribeTo(c)(k)}var OuterSubscriber=function(a){__extends(c,a);function c(){return a!==null&&a.apply(this,arguments)||this}return c.prototype.notifyNext=function(b,_,k,j,_e){this.destination.next(_)},c.prototype.notifyError=function(b,_){this.destination.error(b)},c.prototype.notifyComplete=function(b){this.destination.complete()},c}(Subscriber);function bufferToggle(a,c){return function(_){return _.lift(new BufferToggleOperator(a,c))}}var BufferToggleOperator=function(){function a(c,b){this.openings=c,this.closingSelector=b}return a.prototype.call=function(c,b){return b.subscribe(new BufferToggleSubscriber(c,this.openings,this.closingSelector))},a}(),BufferToggleSubscriber=function(a){__extends(c,a);function c(b,_,k){var j=a.call(this,b)||this;return j.closingSelector=k,j.contexts=[],j.add(subscribeToResult(j,_)),j}return c.prototype._next=function(b){for(var _=this.contexts,k=_.length,j=0;j<k;j++)_[j].buffer.push(b)},c.prototype._error=function(b){for(var _=this.contexts;_.length>0;){var k=_.shift();k.subscription.unsubscribe(),k.buffer=null,k.subscription=null}this.contexts=null,a.prototype._error.call(this,b)},c.prototype._complete=function(){for(var b=this.contexts;b.length>0;){var _=b.shift();this.destination.next(_.buffer),_.subscription.unsubscribe(),_.buffer=null,_.subscription=null}this.contexts=null,a.prototype._complete.call(this)},c.prototype.notifyNext=function(b,_){b?this.closeBuffer(b):this.openBuffer(_)},c.prototype.notifyComplete=function(b){this.closeBuffer(b.context)},c.prototype.openBuffer=function(b){try{var _=this.closingSelector,k=_.call(this,b);k&&this.trySubscribe(k)}catch(j){this._error(j)}},c.prototype.closeBuffer=function(b){var _=this.contexts;if(_&&b){var k=b.buffer,j=b.subscription;this.destination.next(k),_.splice(_.indexOf(b),1),this.remove(j),j.unsubscribe()}},c.prototype.trySubscribe=function(b){var _=this.contexts,k=[],j=new Subscription,_e={buffer:k,subscription:j};_.push(_e);var et=subscribeToResult(this,b,_e);!et||et.closed?this.closeBuffer(_e):(et.context=_e,this.add(et),j.add(et))},c}(OuterSubscriber);function bufferWhen(a){return function(c){return c.lift(new BufferWhenOperator(a))}}var BufferWhenOperator=function(){function a(c){this.closingSelector=c}return a.prototype.call=function(c,b){return b.subscribe(new BufferWhenSubscriber(c,this.closingSelector))},a}(),BufferWhenSubscriber=function(a){__extends(c,a);function c(b,_){var k=a.call(this,b)||this;return k.closingSelector=_,k.subscribing=!1,k.openBuffer(),k}return c.prototype._next=function(b){this.buffer.push(b)},c.prototype._complete=function(){var b=this.buffer;b&&this.destination.next(b),a.prototype._complete.call(this)},c.prototype._unsubscribe=function(){this.buffer=void 0,this.subscribing=!1},c.prototype.notifyNext=function(){this.openBuffer()},c.prototype.notifyComplete=function(){this.subscribing?this.complete():this.openBuffer()},c.prototype.openBuffer=function(){var b=this.closingSubscription;b&&(this.remove(b),b.unsubscribe());var _=this.buffer;this.buffer&&this.destination.next(_),this.buffer=[];var k;try{var j=this.closingSelector;k=j()}catch(_e){return this.error(_e)}b=new Subscription,this.closingSubscription=b,this.add(b),this.subscribing=!0,b.add(innerSubscribe(k,new SimpleInnerSubscriber(this))),this.subscribing=!1},c}(SimpleOuterSubscriber);function catchError(a){return function(b){var _=new CatchOperator(a),k=b.lift(_);return _.caught=k}}var CatchOperator=function(){function a(c){this.selector=c}return a.prototype.call=function(c,b){return b.subscribe(new CatchSubscriber(c,this.selector,this.caught))},a}(),CatchSubscriber=function(a){__extends(c,a);function c(b,_,k){var j=a.call(this,b)||this;return j.selector=_,j.caught=k,j}return c.prototype.error=function(b){if(!this.isStopped){var _=void 0;try{_=this.selector(b,this.caught)}catch(_e){a.prototype.error.call(this,_e);return}this._unsubscribeAndRecycle();var k=new SimpleInnerSubscriber(this);this.add(k);var j=innerSubscribe(_,k);j!==k&&this.add(j)}},c}(SimpleOuterSubscriber);function scheduleArray(a,c){return new Observable(function(b){var _=new Subscription,k=0;return _.add(c.schedule(function(){if(k===a.length){b.complete();return}b.next(a[k++]),b.closed||_.add(this.schedule())})),_})}function fromArray(a,c){return c?scheduleArray(a,c):new Observable(subscribeToArray(a))}var NONE={},CombineLatestOperator=function(){function a(c){this.resultSelector=c}return a.prototype.call=function(c,b){return b.subscribe(new CombineLatestSubscriber(c,this.resultSelector))},a}(),CombineLatestSubscriber=function(a){__extends(c,a);function c(b,_){var k=a.call(this,b)||this;return k.resultSelector=_,k.active=0,k.values=[],k.observables=[],k}return c.prototype._next=function(b){this.values.push(NONE),this.observables.push(b)},c.prototype._complete=function(){var b=this.observables,_=b.length;if(_===0)this.destination.complete();else{this.active=_,this.toRespond=_;for(var k=0;k<_;k++){var j=b[k];this.add(subscribeToResult(this,j,void 0,k))}}},c.prototype.notifyComplete=function(b){(this.active-=1)===0&&this.destination.complete()},c.prototype.notifyNext=function(b,_,k){var j=this.values,_e=j[k],et=this.toRespond?_e===NONE?--this.toRespond:this.toRespond:0;j[k]=_,et===0&&(this.resultSelector?this._tryResultSelector(j):this.destination.next(j.slice()))},c.prototype._tryResultSelector=function(b){var _;try{_=this.resultSelector.apply(this,b)}catch(k){this.destination.error(k);return}this.destination.next(_)},c}(OuterSubscriber);function combineAll(a){return function(c){return c.lift(new CombineLatestOperator(a))}}function scheduleObservable(a,c){return new Observable(function(b){var _=new Subscription;return _.add(c.schedule(function(){var k=a[observable]();_.add(k.subscribe({next:function(j){_.add(c.schedule(function(){return b.next(j)}))},error:function(j){_.add(c.schedule(function(){return b.error(j)}))},complete:function(){_.add(c.schedule(function(){return b.complete()}))}}))})),_})}function schedulePromise(a,c){return new Observable(function(b){var _=new Subscription;return _.add(c.schedule(function(){return a.then(function(k){_.add(c.schedule(function(){b.next(k),_.add(c.schedule(function(){return b.complete()}))}))},function(k){_.add(c.schedule(function(){return b.error(k)}))})})),_})}function scheduleIterable(a,c){if(!a)throw new Error("Iterable cannot be null");return new Observable(function(b){var _=new Subscription,k;return _.add(function(){k&&typeof k.return=="function"&&k.return()}),_.add(c.schedule(function(){k=a[iterator](),_.add(c.schedule(function(){if(!b.closed){var j,_e;try{var et=k.next();j=et.value,_e=et.done}catch(nt){b.error(nt);return}_e?b.complete():(b.next(j),this.schedule())}}))})),_})}function isInteropObservable(a){return a&&typeof a[observable]=="function"}function isIterable(a){return a&&typeof a[iterator]=="function"}function scheduled(a,c){if(a!=null){if(isInteropObservable(a))return scheduleObservable(a,c);if(isPromise(a))return schedulePromise(a,c);if(isArrayLike$1(a))return scheduleArray(a,c);if(isIterable(a)||typeof a=="string")return scheduleIterable(a,c)}throw new TypeError((a!==null&&typeof a||a)+" is not observable")}function from(a,c){return c?scheduled(a,c):a instanceof Observable?a:new Observable(subscribeTo(a))}function combineLatest(){for(var a=[],c=0;c<arguments.length;c++)a[c]=arguments[c];var b=null;return typeof a[a.length-1]=="function"&&(b=a.pop()),a.length===1&&isArray$4(a[0])&&(a=a[0].slice()),function(_){return _.lift.call(from([_].concat(a)),new CombineLatestOperator(b))}}function of$2(){for(var a=[],c=0;c<arguments.length;c++)a[c]=arguments[c];var b=a[a.length-1];return isScheduler(b)?(a.pop(),scheduleArray(a,b)):fromArray(a)}function map(a,c){return function(_){if(typeof a!="function")throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return _.lift(new MapOperator(a,c))}}var MapOperator=function(){function a(c,b){this.project=c,this.thisArg=b}return a.prototype.call=function(c,b){return b.subscribe(new MapSubscriber(c,this.project,this.thisArg))},a}(),MapSubscriber=function(a){__extends(c,a);function c(b,_,k){var j=a.call(this,b)||this;return j.project=_,j.count=0,j.thisArg=k||j,j}return c.prototype._next=function(b){var _;try{_=this.project.call(this.thisArg,b,this.count++)}catch(k){this.destination.error(k);return}this.destination.next(_)},c}(Subscriber);function mergeMap(a,c,b){return b===void 0&&(b=Number.POSITIVE_INFINITY),typeof c=="function"?function(_){return _.pipe(mergeMap(function(k,j){return from(a(k,j)).pipe(map(function(_e,et){return c(k,_e,j,et)}))},b))}:(typeof c=="number"&&(b=c),function(_){return _.lift(new MergeMapOperator(a,b))})}var MergeMapOperator=function(){function a(c,b){b===void 0&&(b=Number.POSITIVE_INFINITY),this.project=c,this.concurrent=b}return a.prototype.call=function(c,b){return b.subscribe(new MergeMapSubscriber(c,this.project,this.concurrent))},a}(),MergeMapSubscriber=function(a){__extends(c,a);function c(b,_,k){k===void 0&&(k=Number.POSITIVE_INFINITY);var j=a.call(this,b)||this;return j.project=_,j.concurrent=k,j.hasCompleted=!1,j.buffer=[],j.active=0,j.index=0,j}return c.prototype._next=function(b){this.active<this.concurrent?this._tryNext(b):this.buffer.push(b)},c.prototype._tryNext=function(b){var _,k=this.index++;try{_=this.project(b,k)}catch(j){this.destination.error(j);return}this.active++,this._innerSub(_)},c.prototype._innerSub=function(b){var _=new SimpleInnerSubscriber(this),k=this.destination;k.add(_);var j=innerSubscribe(b,_);j!==_&&k.add(j)},c.prototype._complete=function(){this.hasCompleted=!0,this.active===0&&this.buffer.length===0&&this.destination.complete(),this.unsubscribe()},c.prototype.notifyNext=function(b){this.destination.next(b)},c.prototype.notifyComplete=function(){var b=this.buffer;this.active--,b.length>0?this._next(b.shift()):this.active===0&&this.hasCompleted&&this.destination.complete()},c}(SimpleOuterSubscriber),flatMap=mergeMap;function mergeAll(a){return a===void 0&&(a=Number.POSITIVE_INFINITY),mergeMap(identity,a)}function concatAll(){return mergeAll(1)}function concat$1(){for(var a=[],c=0;c<arguments.length;c++)a[c]=arguments[c];return concatAll()(of$2.apply(void 0,a))}function concat(){for(var a=[],c=0;c<arguments.length;c++)a[c]=arguments[c];return function(b){return b.lift.call(concat$1.apply(void 0,[b].concat(a)))}}function concatMap(a,c){return mergeMap(a,c,1)}function concatMapTo(a,c){return concatMap(function(){return a},c)}function count(a){return function(c){return c.lift(new CountOperator(a,c))}}var CountOperator=function(){function a(c,b){this.predicate=c,this.source=b}return a.prototype.call=function(c,b){return b.subscribe(new CountSubscriber(c,this.predicate,this.source))},a}(),CountSubscriber=function(a){__extends(c,a);function c(b,_,k){var j=a.call(this,b)||this;return j.predicate=_,j.source=k,j.count=0,j.index=0,j}return c.prototype._next=function(b){this.predicate?this._tryPredicate(b):this.count++},c.prototype._tryPredicate=function(b){var _;try{_=this.predicate(b,this.index++,this.source)}catch(k){this.destination.error(k);return}_&&this.count++},c.prototype._complete=function(){this.destination.next(this.count),this.destination.complete()},c}(Subscriber);function debounce(a){return function(c){return c.lift(new DebounceOperator(a))}}var DebounceOperator=function(){function a(c){this.durationSelector=c}return a.prototype.call=function(c,b){return b.subscribe(new DebounceSubscriber(c,this.durationSelector))},a}(),DebounceSubscriber=function(a){__extends(c,a);function c(b,_){var k=a.call(this,b)||this;return k.durationSelector=_,k.hasValue=!1,k}return c.prototype._next=function(b){try{var _=this.durationSelector.call(this,b);_&&this._tryNext(b,_)}catch(k){this.destination.error(k)}},c.prototype._complete=function(){this.emitValue(),this.destination.complete()},c.prototype._tryNext=function(b,_){var k=this.durationSubscription;this.value=b,this.hasValue=!0,k&&(k.unsubscribe(),this.remove(k)),k=innerSubscribe(_,new SimpleInnerSubscriber(this)),k&&!k.closed&&this.add(this.durationSubscription=k)},c.prototype.notifyNext=function(){this.emitValue()},c.prototype.notifyComplete=function(){this.emitValue()},c.prototype.emitValue=function(){if(this.hasValue){var b=this.value,_=this.durationSubscription;_&&(this.durationSubscription=void 0,_.unsubscribe(),this.remove(_)),this.value=void 0,this.hasValue=!1,a.prototype._next.call(this,b)}},c}(SimpleOuterSubscriber);function debounceTime(a,c){return c===void 0&&(c=async),function(b){return b.lift(new DebounceTimeOperator(a,c))}}var DebounceTimeOperator=function(){function a(c,b){this.dueTime=c,this.scheduler=b}return a.prototype.call=function(c,b){return b.subscribe(new DebounceTimeSubscriber(c,this.dueTime,this.scheduler))},a}(),DebounceTimeSubscriber=function(a){__extends(c,a);function c(b,_,k){var j=a.call(this,b)||this;return j.dueTime=_,j.scheduler=k,j.debouncedSubscription=null,j.lastValue=null,j.hasValue=!1,j}return c.prototype._next=function(b){this.clearDebounce(),this.lastValue=b,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(dispatchNext$1,this.dueTime,this))},c.prototype._complete=function(){this.debouncedNext(),this.destination.complete()},c.prototype.debouncedNext=function(){if(this.clearDebounce(),this.hasValue){var b=this.lastValue;this.lastValue=null,this.hasValue=!1,this.destination.next(b)}},c.prototype.clearDebounce=function(){var b=this.debouncedSubscription;b!==null&&(this.remove(b),b.unsubscribe(),this.debouncedSubscription=null)},c}(Subscriber);function dispatchNext$1(a){a.debouncedNext()}function defaultIfEmpty(a){return a===void 0&&(a=null),function(c){return c.lift(new DefaultIfEmptyOperator(a))}}var DefaultIfEmptyOperator=function(){function a(c){this.defaultValue=c}return a.prototype.call=function(c,b){return b.subscribe(new DefaultIfEmptySubscriber(c,this.defaultValue))},a}(),DefaultIfEmptySubscriber=function(a){__extends(c,a);function c(b,_){var k=a.call(this,b)||this;return k.defaultValue=_,k.isEmpty=!0,k}return c.prototype._next=function(b){this.isEmpty=!1,this.destination.next(b)},c.prototype._complete=function(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()},c}(Subscriber);function isDate$1(a){return a instanceof Date&&!isNaN(+a)}var EMPTY=new Observable(function(a){return a.complete()});function empty$1(a){return a?emptyScheduled(a):EMPTY}function emptyScheduled(a){return new Observable(function(c){return a.schedule(function(){return c.complete()})})}function throwError(a,c){return c?new Observable(function(b){return c.schedule(dispatch,0,{error:a,subscriber:b})}):new Observable(function(b){return b.error(a)})}function dispatch(a){var c=a.error,b=a.subscriber;b.error(c)}var Notification=function(){function a(c,b,_){this.kind=c,this.value=b,this.error=_,this.hasValue=c==="N"}return a.prototype.observe=function(c){switch(this.kind){case"N":return c.next&&c.next(this.value);case"E":return c.error&&c.error(this.error);case"C":return c.complete&&c.complete()}},a.prototype.do=function(c,b,_){var k=this.kind;switch(k){case"N":return c&&c(this.value);case"E":return b&&b(this.error);case"C":return _&&_()}},a.prototype.accept=function(c,b,_){return c&&typeof c.next=="function"?this.observe(c):this.do(c,b,_)},a.prototype.toObservable=function(){var c=this.kind;switch(c){case"N":return of$2(this.value);case"E":return throwError(this.error);case"C":return empty$1()}throw new Error("unexpected notification kind value")},a.createNext=function(c){return typeof c<"u"?new a("N",c):a.undefinedValueNotification},a.createError=function(c){return new a("E",void 0,c)},a.createComplete=function(){return a.completeNotification},a.completeNotification=new a("C"),a.undefinedValueNotification=new a("N",void 0),a}();function delay(a,c){c===void 0&&(c=async);var b=isDate$1(a),_=b?+a-c.now():Math.abs(a);return function(k){return k.lift(new DelayOperator(_,c))}}var DelayOperator=function(){function a(c,b){this.delay=c,this.scheduler=b}return a.prototype.call=function(c,b){return b.subscribe(new DelaySubscriber(c,this.delay,this.scheduler))},a}(),DelaySubscriber=function(a){__extends(c,a);function c(b,_,k){var j=a.call(this,b)||this;return j.delay=_,j.scheduler=k,j.queue=[],j.active=!1,j.errored=!1,j}return c.dispatch=function(b){for(var _=b.source,k=_.queue,j=b.scheduler,_e=b.destination;k.length>0&&k[0].time-j.now()<=0;)k.shift().notification.observe(_e);if(k.length>0){var et=Math.max(0,k[0].time-j.now());this.schedule(b,et)}else this.unsubscribe(),_.active=!1},c.prototype._schedule=function(b){this.active=!0;var _=this.destination;_.add(b.schedule(c.dispatch,this.delay,{source:this,destination:this.destination,scheduler:b}))},c.prototype.scheduleNotification=function(b){if(this.errored!==!0){var _=this.scheduler,k=new DelayMessage(_.now()+this.delay,b);this.queue.push(k),this.active===!1&&this._schedule(_)}},c.prototype._next=function(b){this.scheduleNotification(Notification.createNext(b))},c.prototype._error=function(b){this.errored=!0,this.queue=[],this.destination.error(b),this.unsubscribe()},c.prototype._complete=function(){this.scheduleNotification(Notification.createComplete()),this.unsubscribe()},c}(Subscriber),DelayMessage=function(){function a(c,b){this.time=c,this.notification=b}return a}();function delayWhen(a,c){return c?function(b){return new SubscriptionDelayObservable(b,c).lift(new DelayWhenOperator(a))}:function(b){return b.lift(new DelayWhenOperator(a))}}var DelayWhenOperator=function(){function a(c){this.delayDurationSelector=c}return a.prototype.call=function(c,b){return b.subscribe(new DelayWhenSubscriber(c,this.delayDurationSelector))},a}(),DelayWhenSubscriber=function(a){__extends(c,a);function c(b,_){var k=a.call(this,b)||this;return k.delayDurationSelector=_,k.completed=!1,k.delayNotifierSubscriptions=[],k.index=0,k}return c.prototype.notifyNext=function(b,_,k,j,_e){this.destination.next(b),this.removeSubscription(_e),this.tryComplete()},c.prototype.notifyError=function(b,_){this._error(b)},c.prototype.notifyComplete=function(b){var _=this.removeSubscription(b);_&&this.destination.next(_),this.tryComplete()},c.prototype._next=function(b){var _=this.index++;try{var k=this.delayDurationSelector(b,_);k&&this.tryDelay(k,b)}catch(j){this.destination.error(j)}},c.prototype._complete=function(){this.completed=!0,this.tryComplete(),this.unsubscribe()},c.prototype.removeSubscription=function(b){b.unsubscribe();var _=this.delayNotifierSubscriptions.indexOf(b);return _!==-1&&this.delayNotifierSubscriptions.splice(_,1),b.outerValue},c.prototype.tryDelay=function(b,_){var k=subscribeToResult(this,b,_);if(k&&!k.closed){var j=this.destination;j.add(k),this.delayNotifierSubscriptions.push(k)}},c.prototype.tryComplete=function(){this.completed&&this.delayNotifierSubscriptions.length===0&&this.destination.complete()},c}(OuterSubscriber),SubscriptionDelayObservable=function(a){__extends(c,a);function c(b,_){var k=a.call(this)||this;return k.source=b,k.subscriptionDelay=_,k}return c.prototype._subscribe=function(b){this.subscriptionDelay.subscribe(new SubscriptionDelaySubscriber(b,this.source))},c}(Observable),SubscriptionDelaySubscriber=function(a){__extends(c,a);function c(b,_){var k=a.call(this)||this;return k.parent=b,k.source=_,k.sourceSubscribed=!1,k}return c.prototype._next=function(b){this.subscribeToSource()},c.prototype._error=function(b){this.unsubscribe(),this.parent.error(b)},c.prototype._complete=function(){this.unsubscribe(),this.subscribeToSource()},c.prototype.subscribeToSource=function(){this.sourceSubscribed||(this.sourceSubscribed=!0,this.unsubscribe(),this.source.subscribe(this.parent))},c}(Subscriber);function dematerialize(){return function(c){return c.lift(new DeMaterializeOperator)}}var DeMaterializeOperator=function(){function a(){}return a.prototype.call=function(c,b){return b.subscribe(new DeMaterializeSubscriber(c))},a}(),DeMaterializeSubscriber=function(a){__extends(c,a);function c(b){return a.call(this,b)||this}return c.prototype._next=function(b){b.observe(this.destination)},c}(Subscriber);function distinct(a,c){return function(b){return b.lift(new DistinctOperator(a,c))}}var DistinctOperator=function(){function a(c,b){this.keySelector=c,this.flushes=b}return a.prototype.call=function(c,b){return b.subscribe(new DistinctSubscriber(c,this.keySelector,this.flushes))},a}(),DistinctSubscriber=function(a){__extends(c,a);function c(b,_,k){var j=a.call(this,b)||this;return j.keySelector=_,j.values=new Set,k&&j.add(innerSubscribe(k,new SimpleInnerSubscriber(j))),j}return c.prototype.notifyNext=function(){this.values.clear()},c.prototype.notifyError=function(b){this._error(b)},c.prototype._next=function(b){this.keySelector?this._useKeySelector(b):this._finalizeNext(b,b)},c.prototype._useKeySelector=function(b){var _,k=this.destination;try{_=this.keySelector(b)}catch(j){k.error(j);return}this._finalizeNext(_,b)},c.prototype._finalizeNext=function(b,_){var k=this.values;k.has(b)||(k.add(b),this.destination.next(_))},c}(SimpleOuterSubscriber);function distinctUntilChanged(a,c){return function(b){return b.lift(new DistinctUntilChangedOperator(a,c))}}var DistinctUntilChangedOperator=function(){function a(c,b){this.compare=c,this.keySelector=b}return a.prototype.call=function(c,b){return b.subscribe(new DistinctUntilChangedSubscriber(c,this.compare,this.keySelector))},a}(),DistinctUntilChangedSubscriber=function(a){__extends(c,a);function c(b,_,k){var j=a.call(this,b)||this;return j.keySelector=k,j.hasKey=!1,typeof _=="function"&&(j.compare=_),j}return c.prototype.compare=function(b,_){return b===_},c.prototype._next=function(b){var _;try{var k=this.keySelector;_=k?k(b):b}catch(et){return this.destination.error(et)}var j=!1;if(this.hasKey)try{var _e=this.compare;j=_e(this.key,_)}catch(et){return this.destination.error(et)}else this.hasKey=!0;j||(this.key=_,this.destination.next(b))},c}(Subscriber);function distinctUntilKeyChanged(a,c){return distinctUntilChanged(function(b,_){return c?c(b[a],_[a]):b[a]===_[a]})}var ArgumentOutOfRangeErrorImpl=function(){function a(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return a.prototype=Object.create(Error.prototype),a}(),ArgumentOutOfRangeError=ArgumentOutOfRangeErrorImpl;function filter(a,c){return function(_){return _.lift(new FilterOperator(a,c))}}var FilterOperator=function(){function a(c,b){this.predicate=c,this.thisArg=b}return a.prototype.call=function(c,b){return b.subscribe(new FilterSubscriber(c,this.predicate,this.thisArg))},a}(),FilterSubscriber=function(a){__extends(c,a);function c(b,_,k){var j=a.call(this,b)||this;return j.predicate=_,j.thisArg=k,j.count=0,j}return c.prototype._next=function(b){var _;try{_=this.predicate.call(this.thisArg,b,this.count++)}catch(k){this.destination.error(k);return}_&&this.destination.next(b)},c}(Subscriber),EmptyErrorImpl=function(){function a(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return a.prototype=Object.create(Error.prototype),a}(),EmptyError=EmptyErrorImpl;function throwIfEmpty(a){return a===void 0&&(a=defaultErrorFactory),function(c){return c.lift(new ThrowIfEmptyOperator(a))}}var ThrowIfEmptyOperator=function(){function a(c){this.errorFactory=c}return a.prototype.call=function(c,b){return b.subscribe(new ThrowIfEmptySubscriber(c,this.errorFactory))},a}(),ThrowIfEmptySubscriber=function(a){__extends(c,a);function c(b,_){var k=a.call(this,b)||this;return k.errorFactory=_,k.hasValue=!1,k}return c.prototype._next=function(b){this.hasValue=!0,this.destination.next(b)},c.prototype._complete=function(){if(this.hasValue)return this.destination.complete();var b=void 0;try{b=this.errorFactory()}catch(_){b=_}this.destination.error(b)},c}(Subscriber);function defaultErrorFactory(){return new EmptyError}function take(a){return function(c){return a===0?empty$1():c.lift(new TakeOperator(a))}}var TakeOperator=function(){function a(c){if(this.total=c,this.total<0)throw new ArgumentOutOfRangeError}return a.prototype.call=function(c,b){return b.subscribe(new TakeSubscriber(c,this.total))},a}(),TakeSubscriber=function(a){__extends(c,a);function c(b,_){var k=a.call(this,b)||this;return k.total=_,k.count=0,k}return c.prototype._next=function(b){var _=this.total,k=++this.count;k<=_&&(this.destination.next(b),k===_&&(this.destination.complete(),this.unsubscribe()))},c}(Subscriber);function elementAt(a,c){if(a<0)throw new ArgumentOutOfRangeError;var b=arguments.length>=2;return function(_){return _.pipe(filter(function(k,j){return j===a}),take(1),b?defaultIfEmpty(c):throwIfEmpty(function(){return new ArgumentOutOfRangeError}))}}function endWith(){for(var a=[],c=0;c<arguments.length;c++)a[c]=arguments[c];return function(b){return concat$1(b,of$2.apply(void 0,a))}}function every(a,c){return function(b){return b.lift(new EveryOperator(a,c,b))}}var EveryOperator=function(){function a(c,b,_){this.predicate=c,this.thisArg=b,this.source=_}return a.prototype.call=function(c,b){return b.subscribe(new EverySubscriber(c,this.predicate,this.thisArg,this.source))},a}(),EverySubscriber=function(a){__extends(c,a);function c(b,_,k,j){var _e=a.call(this,b)||this;return _e.predicate=_,_e.thisArg=k,_e.source=j,_e.index=0,_e.thisArg=k||_e,_e}return c.prototype.notifyComplete=function(b){this.destination.next(b),this.destination.complete()},c.prototype._next=function(b){var _=!1;try{_=this.predicate.call(this.thisArg,b,this.index++,this.source)}catch(k){this.destination.error(k);return}_||this.notifyComplete(!1)},c.prototype._complete=function(){this.notifyComplete(!0)},c}(Subscriber);function exhaust(){return function(a){return a.lift(new SwitchFirstOperator)}}var SwitchFirstOperator=function(){function a(){}return a.prototype.call=function(c,b){return b.subscribe(new SwitchFirstSubscriber(c))},a}(),SwitchFirstSubscriber=function(a){__extends(c,a);function c(b){var _=a.call(this,b)||this;return _.hasCompleted=!1,_.hasSubscription=!1,_}return c.prototype._next=function(b){this.hasSubscription||(this.hasSubscription=!0,this.add(innerSubscribe(b,new SimpleInnerSubscriber(this))))},c.prototype._complete=function(){this.hasCompleted=!0,this.hasSubscription||this.destination.complete()},c.prototype.notifyComplete=function(){this.hasSubscription=!1,this.hasCompleted&&this.destination.complete()},c}(SimpleOuterSubscriber);function exhaustMap(a,c){return c?function(b){return b.pipe(exhaustMap(function(_,k){return from(a(_,k)).pipe(map(function(j,_e){return c(_,j,k,_e)}))}))}:function(b){return b.lift(new ExhaustMapOperator(a))}}var ExhaustMapOperator=function(){function a(c){this.project=c}return a.prototype.call=function(c,b){return b.subscribe(new ExhaustMapSubscriber(c,this.project))},a}(),ExhaustMapSubscriber=function(a){__extends(c,a);function c(b,_){var k=a.call(this,b)||this;return k.project=_,k.hasSubscription=!1,k.hasCompleted=!1,k.index=0,k}return c.prototype._next=function(b){this.hasSubscription||this.tryNext(b)},c.prototype.tryNext=function(b){var _,k=this.index++;try{_=this.project(b,k)}catch(j){this.destination.error(j);return}this.hasSubscription=!0,this._innerSub(_)},c.prototype._innerSub=function(b){var _=new SimpleInnerSubscriber(this),k=this.destination;k.add(_);var j=innerSubscribe(b,_);j!==_&&k.add(j)},c.prototype._complete=function(){this.hasCompleted=!0,this.hasSubscription||this.destination.complete(),this.unsubscribe()},c.prototype.notifyNext=function(b){this.destination.next(b)},c.prototype.notifyError=function(b){this.destination.error(b)},c.prototype.notifyComplete=function(){this.hasSubscription=!1,this.hasCompleted&&this.destination.complete()},c}(SimpleOuterSubscriber);function expand(a,c,b){return c===void 0&&(c=Number.POSITIVE_INFINITY),c=(c||0)<1?Number.POSITIVE_INFINITY:c,function(_){return _.lift(new ExpandOperator(a,c,b))}}var ExpandOperator=function(){function a(c,b,_){this.project=c,this.concurrent=b,this.scheduler=_}return a.prototype.call=function(c,b){return b.subscribe(new ExpandSubscriber(c,this.project,this.concurrent,this.scheduler))},a}(),ExpandSubscriber=function(a){__extends(c,a);function c(b,_,k,j){var _e=a.call(this,b)||this;return _e.project=_,_e.concurrent=k,_e.scheduler=j,_e.index=0,_e.active=0,_e.hasCompleted=!1,k<Number.POSITIVE_INFINITY&&(_e.buffer=[]),_e}return c.dispatch=function(b){var _=b.subscriber,k=b.result,j=b.value,_e=b.index;_.subscribeToProjection(k,j,_e)},c.prototype._next=function(b){var _=this.destination;if(_.closed){this._complete();return}var k=this.index++;if(this.active<this.concurrent){_.next(b);try{var j=this.project,_e=j(b,k);if(!this.scheduler)this.subscribeToProjection(_e,b,k);else{var et={subscriber:this,result:_e,value:b,index:k},nt=this.destination;nt.add(this.scheduler.schedule(c.dispatch,0,et))}}catch(it){_.error(it)}}else this.buffer.push(b)},c.prototype.subscribeToProjection=function(b,_,k){this.active++;var j=this.destination;j.add(innerSubscribe(b,new SimpleInnerSubscriber(this)))},c.prototype._complete=function(){this.hasCompleted=!0,this.hasCompleted&&this.active===0&&this.destination.complete(),this.unsubscribe()},c.prototype.notifyNext=function(b){this._next(b)},c.prototype.notifyComplete=function(){var b=this.buffer;this.active--,b&&b.length>0&&this._next(b.shift()),this.hasCompleted&&this.active===0&&this.destination.complete()},c}(SimpleOuterSubscriber);function finalize(a){return function(c){return c.lift(new FinallyOperator(a))}}var FinallyOperator=function(){function a(c){this.callback=c}return a.prototype.call=function(c,b){return b.subscribe(new FinallySubscriber(c,this.callback))},a}(),FinallySubscriber=function(a){__extends(c,a);function c(b,_){var k=a.call(this,b)||this;return k.add(new Subscription(_)),k}return c}(Subscriber);function find$1(a,c){if(typeof a!="function")throw new TypeError("predicate is not a function");return function(b){return b.lift(new FindValueOperator(a,b,!1,c))}}var FindValueOperator=function(){function a(c,b,_,k){this.predicate=c,this.source=b,this.yieldIndex=_,this.thisArg=k}return a.prototype.call=function(c,b){return b.subscribe(new FindValueSubscriber(c,this.predicate,this.source,this.yieldIndex,this.thisArg))},a}(),FindValueSubscriber=function(a){__extends(c,a);function c(b,_,k,j,_e){var et=a.call(this,b)||this;return et.predicate=_,et.source=k,et.yieldIndex=j,et.thisArg=_e,et.index=0,et}return c.prototype.notifyComplete=function(b){var _=this.destination;_.next(b),_.complete(),this.unsubscribe()},c.prototype._next=function(b){var _=this,k=_.predicate,j=_.thisArg,_e=this.index++;try{var et=k.call(j||this,b,_e,this.source);et&&this.notifyComplete(this.yieldIndex?_e:b)}catch(nt){this.destination.error(nt)}},c.prototype._complete=function(){this.notifyComplete(this.yieldIndex?-1:void 0)},c}(Subscriber);function findIndex(a,c){return function(b){return b.lift(new FindValueOperator(a,b,!0,c))}}function first(a,c){var b=arguments.length>=2;return function(_){return _.pipe(a?filter(function(k,j){return a(k,j,_)}):identity,take(1),b?defaultIfEmpty(c):throwIfEmpty(function(){return new EmptyError}))}}var ObjectUnsubscribedErrorImpl=function(){function a(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return a.prototype=Object.create(Error.prototype),a}(),ObjectUnsubscribedError=ObjectUnsubscribedErrorImpl,SubjectSubscription=function(a){__extends(c,a);function c(b,_){var k=a.call(this)||this;return k.subject=b,k.subscriber=_,k.closed=!1,k}return c.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var b=this.subject,_=b.observers;if(this.subject=null,!(!_||_.length===0||b.isStopped||b.closed)){var k=_.indexOf(this.subscriber);k!==-1&&_.splice(k,1)}}},c}(Subscription),SubjectSubscriber=function(a){__extends(c,a);function c(b){var _=a.call(this,b)||this;return _.destination=b,_}return c}(Subscriber),Subject=function(a){__extends(c,a);function c(){var b=a.call(this)||this;return b.observers=[],b.closed=!1,b.isStopped=!1,b.hasError=!1,b.thrownError=null,b}return c.prototype[rxSubscriber]=function(){return new SubjectSubscriber(this)},c.prototype.lift=function(b){var _=new AnonymousSubject(this,this);return _.operator=b,_},c.prototype.next=function(b){if(this.closed)throw new ObjectUnsubscribedError;if(!this.isStopped)for(var _=this.observers,k=_.length,j=_.slice(),_e=0;_e<k;_e++)j[_e].next(b)},c.prototype.error=function(b){if(this.closed)throw new ObjectUnsubscribedError;this.hasError=!0,this.thrownError=b,this.isStopped=!0;for(var _=this.observers,k=_.length,j=_.slice(),_e=0;_e<k;_e++)j[_e].error(b);this.observers.length=0},c.prototype.complete=function(){if(this.closed)throw new ObjectUnsubscribedError;this.isStopped=!0;for(var b=this.observers,_=b.length,k=b.slice(),j=0;j<_;j++)k[j].complete();this.observers.length=0},c.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},c.prototype._trySubscribe=function(b){if(this.closed)throw new ObjectUnsubscribedError;return a.prototype._trySubscribe.call(this,b)},c.prototype._subscribe=function(b){if(this.closed)throw new ObjectUnsubscribedError;return this.hasError?(b.error(this.thrownError),Subscription.EMPTY):this.isStopped?(b.complete(),Subscription.EMPTY):(this.observers.push(b),new SubjectSubscription(this,b))},c.prototype.asObservable=function(){var b=new Observable;return b.source=this,b},c.create=function(b,_){return new AnonymousSubject(b,_)},c}(Observable),AnonymousSubject=function(a){__extends(c,a);function c(b,_){var k=a.call(this)||this;return k.destination=b,k.source=_,k}return c.prototype.next=function(b){var _=this.destination;_&&_.next&&_.next(b)},c.prototype.error=function(b){var _=this.destination;_&&_.error&&this.destination.error(b)},c.prototype.complete=function(){var b=this.destination;b&&b.complete&&this.destination.complete()},c.prototype._subscribe=function(b){var _=this.source;return _?this.source.subscribe(b):Subscription.EMPTY},c}(Subject);function groupBy(a,c,b,_){return function(k){return k.lift(new GroupByOperator(a,c,b,_))}}var GroupByOperator=function(){function a(c,b,_,k){this.keySelector=c,this.elementSelector=b,this.durationSelector=_,this.subjectSelector=k}return a.prototype.call=function(c,b){return b.subscribe(new GroupBySubscriber(c,this.keySelector,this.elementSelector,this.durationSelector,this.subjectSelector))},a}(),GroupBySubscriber=function(a){__extends(c,a);function c(b,_,k,j,_e){var et=a.call(this,b)||this;return et.keySelector=_,et.elementSelector=k,et.durationSelector=j,et.subjectSelector=_e,et.groups=null,et.attemptedToUnsubscribe=!1,et.count=0,et}return c.prototype._next=function(b){var _;try{_=this.keySelector(b)}catch(k){this.error(k);return}this._group(b,_)},c.prototype._group=function(b,_){var k=this.groups;k||(k=this.groups=new Map);var j=k.get(_),_e;if(this.elementSelector)try{_e=this.elementSelector(b)}catch(it){this.error(it)}else _e=b;if(!j){j=this.subjectSelector?this.subjectSelector():new Subject,k.set(_,j);var et=new GroupedObservable(_,j,this);if(this.destination.next(et),this.durationSelector){var nt=void 0;try{nt=this.durationSelector(new GroupedObservable(_,j))}catch(it){this.error(it);return}this.add(nt.subscribe(new GroupDurationSubscriber(_,j,this)))}}j.closed||j.next(_e)},c.prototype._error=function(b){var _=this.groups;_&&(_.forEach(function(k,j){k.error(b)}),_.clear()),this.destination.error(b)},c.prototype._complete=function(){var b=this.groups;b&&(b.forEach(function(_,k){_.complete()}),b.clear()),this.destination.complete()},c.prototype.removeGroup=function(b){this.groups.delete(b)},c.prototype.unsubscribe=function(){this.closed||(this.attemptedToUnsubscribe=!0,this.count===0&&a.prototype.unsubscribe.call(this))},c}(Subscriber),GroupDurationSubscriber=function(a){__extends(c,a);function c(b,_,k){var j=a.call(this,_)||this;return j.key=b,j.group=_,j.parent=k,j}return c.prototype._next=function(b){this.complete()},c.prototype._unsubscribe=function(){var b=this,_=b.parent,k=b.key;this.key=this.parent=null,_&&_.removeGroup(k)},c}(Subscriber),GroupedObservable=function(a){__extends(c,a);function c(b,_,k){var j=a.call(this)||this;return j.key=b,j.groupSubject=_,j.refCountSubscription=k,j}return c.prototype._subscribe=function(b){var _=new Subscription,k=this,j=k.refCountSubscription,_e=k.groupSubject;return j&&!j.closed&&_.add(new InnerRefCountSubscription(j)),_.add(_e.subscribe(b)),_},c}(Observable),InnerRefCountSubscription=function(a){__extends(c,a);function c(b){var _=a.call(this)||this;return _.parent=b,b.count++,_}return c.prototype.unsubscribe=function(){var b=this.parent;!b.closed&&!this.closed&&(a.prototype.unsubscribe.call(this),b.count-=1,b.count===0&&b.attemptedToUnsubscribe&&b.unsubscribe())},c}(Subscription);function ignoreElements(){return function(c){return c.lift(new IgnoreElementsOperator)}}var IgnoreElementsOperator=function(){function a(){}return a.prototype.call=function(c,b){return b.subscribe(new IgnoreElementsSubscriber(c))},a}(),IgnoreElementsSubscriber=function(a){__extends(c,a);function c(){return a!==null&&a.apply(this,arguments)||this}return c.prototype._next=function(b){},c}(Subscriber);function isEmpty(){return function(a){return a.lift(new IsEmptyOperator)}}var IsEmptyOperator=function(){function a(){}return a.prototype.call=function(c,b){return b.subscribe(new IsEmptySubscriber(c))},a}(),IsEmptySubscriber=function(a){__extends(c,a);function c(b){return a.call(this,b)||this}return c.prototype.notifyComplete=function(b){var _=this.destination;_.next(b),_.complete()},c.prototype._next=function(b){this.notifyComplete(!1)},c.prototype._complete=function(){this.notifyComplete(!0)},c}(Subscriber);function takeLast(a){return function(b){return a===0?empty$1():b.lift(new TakeLastOperator(a))}}var TakeLastOperator=function(){function a(c){if(this.total=c,this.total<0)throw new ArgumentOutOfRangeError}return a.prototype.call=function(c,b){return b.subscribe(new TakeLastSubscriber(c,this.total))},a}(),TakeLastSubscriber=function(a){__extends(c,a);function c(b,_){var k=a.call(this,b)||this;return k.total=_,k.ring=new Array,k.count=0,k}return c.prototype._next=function(b){var _=this.ring,k=this.total,j=this.count++;if(_.length<k)_.push(b);else{var _e=j%k;_[_e]=b}},c.prototype._complete=function(){var b=this.destination,_=this.count;if(_>0)for(var k=this.count>=this.total?this.total:this.count,j=this.ring,_e=0;_e<k;_e++){var et=_++%k;b.next(j[et])}b.complete()},c}(Subscriber);function last(a,c){var b=arguments.length>=2;return function(_){return _.pipe(a?filter(function(k,j){return a(k,j,_)}):identity,takeLast(1),b?defaultIfEmpty(c):throwIfEmpty(function(){return new EmptyError}))}}function mapTo(a){return function(c){return c.lift(new MapToOperator(a))}}var MapToOperator=function(){function a(c){this.value=c}return a.prototype.call=function(c,b){return b.subscribe(new MapToSubscriber(c,this.value))},a}(),MapToSubscriber=function(a){__extends(c,a);function c(b,_){var k=a.call(this,b)||this;return k.value=_,k}return c.prototype._next=function(b){this.destination.next(this.value)},c}(Subscriber);function materialize(){return function(c){return c.lift(new MaterializeOperator)}}var MaterializeOperator=function(){function a(){}return a.prototype.call=function(c,b){return b.subscribe(new MaterializeSubscriber(c))},a}(),MaterializeSubscriber=function(a){__extends(c,a);function c(b){return a.call(this,b)||this}return c.prototype._next=function(b){this.destination.next(Notification.createNext(b))},c.prototype._error=function(b){var _=this.destination;_.next(Notification.createError(b)),_.complete()},c.prototype._complete=function(){var b=this.destination;b.next(Notification.createComplete()),b.complete()},c}(Subscriber);function scan(a,c){var b=!1;return arguments.length>=2&&(b=!0),function(k){return k.lift(new ScanOperator(a,c,b))}}var ScanOperator=function(){function a(c,b,_){_===void 0&&(_=!1),this.accumulator=c,this.seed=b,this.hasSeed=_}return a.prototype.call=function(c,b){return b.subscribe(new ScanSubscriber(c,this.accumulator,this.seed,this.hasSeed))},a}(),ScanSubscriber=function(a){__extends(c,a);function c(b,_,k,j){var _e=a.call(this,b)||this;return _e.accumulator=_,_e._seed=k,_e.hasSeed=j,_e.index=0,_e}return Object.defineProperty(c.prototype,"seed",{get:function(){return this._seed},set:function(b){this.hasSeed=!0,this._seed=b},enumerable:!0,configurable:!0}),c.prototype._next=function(b){if(!this.hasSeed)this.seed=b,this.destination.next(b);else return this._tryNext(b)},c.prototype._tryNext=function(b){var _=this.index++,k;try{k=this.accumulator(this.seed,b,_)}catch(j){this.destination.error(j)}this.seed=k,this.destination.next(k)},c}(Subscriber);function reduce(a,c){return arguments.length>=2?function(_){return pipe(scan(a,c),takeLast(1),defaultIfEmpty(c))(_)}:function(_){return pipe(scan(function(k,j,_e){return a(k,j,_e+1)}),takeLast(1))(_)}}function max$1(a){var c=typeof a=="function"?function(b,_){return a(b,_)>0?b:_}:function(b,_){return b>_?b:_};return reduce(c)}function merge$2(){for(var a=[],c=0;c<arguments.length;c++)a[c]=arguments[c];var b=Number.POSITIVE_INFINITY,_=null,k=a[a.length-1];return isScheduler(k)?(_=a.pop(),a.length>1&&typeof a[a.length-1]=="number"&&(b=a.pop())):typeof k=="number"&&(b=a.pop()),_===null&&a.length===1&&a[0]instanceof Observable?a[0]:mergeAll(b)(fromArray(a,_))}function merge$1(){for(var a=[],c=0;c<arguments.length;c++)a[c]=arguments[c];return function(b){return b.lift.call(merge$2.apply(void 0,[b].concat(a)))}}function mergeMapTo(a,c,b){return b===void 0&&(b=Number.POSITIVE_INFINITY),typeof c=="function"?mergeMap(function(){return a},c,b):(typeof c=="number"&&(b=c),mergeMap(function(){return a},b))}function mergeScan(a,c,b){return b===void 0&&(b=Number.POSITIVE_INFINITY),function(_){return _.lift(new MergeScanOperator(a,c,b))}}var MergeScanOperator=function(){function a(c,b,_){this.accumulator=c,this.seed=b,this.concurrent=_}return a.prototype.call=function(c,b){return b.subscribe(new MergeScanSubscriber(c,this.accumulator,this.seed,this.concurrent))},a}(),MergeScanSubscriber=function(a){__extends(c,a);function c(b,_,k,j){var _e=a.call(this,b)||this;return _e.accumulator=_,_e.acc=k,_e.concurrent=j,_e.hasValue=!1,_e.hasCompleted=!1,_e.buffer=[],_e.active=0,_e.index=0,_e}return c.prototype._next=function(b){if(this.active<this.concurrent){var _=this.index++,k=this.destination,j=void 0;try{var _e=this.accumulator;j=_e(this.acc,b,_)}catch(et){return k.error(et)}this.active++,this._innerSub(j)}else this.buffer.push(b)},c.prototype._innerSub=function(b){var _=new SimpleInnerSubscriber(this),k=this.destination;k.add(_);var j=innerSubscribe(b,_);j!==_&&k.add(j)},c.prototype._complete=function(){this.hasCompleted=!0,this.active===0&&this.buffer.length===0&&(this.hasValue===!1&&this.destination.next(this.acc),this.destination.complete()),this.unsubscribe()},c.prototype.notifyNext=function(b){var _=this.destination;this.acc=b,this.hasValue=!0,_.next(b)},c.prototype.notifyComplete=function(){var b=this.buffer;this.active--,b.length>0?this._next(b.shift()):this.active===0&&this.hasCompleted&&(this.hasValue===!1&&this.destination.next(this.acc),this.destination.complete())},c}(SimpleOuterSubscriber);function min(a){var c=typeof a=="function"?function(b,_){return a(b,_)<0?b:_}:function(b,_){return b<_?b:_};return reduce(c)}function refCount(){return function(c){return c.lift(new RefCountOperator(c))}}var RefCountOperator=function(){function a(c){this.connectable=c}return a.prototype.call=function(c,b){var _=this.connectable;_._refCount++;var k=new RefCountSubscriber(c,_),j=b.subscribe(k);return k.closed||(k.connection=_.connect()),j},a}(),RefCountSubscriber=function(a){__extends(c,a);function c(b,_){var k=a.call(this,b)||this;return k.connectable=_,k}return c.prototype._unsubscribe=function(){var b=this.connectable;if(!b){this.connection=null;return}this.connectable=null;var _=b._refCount;if(_<=0){this.connection=null;return}if(b._refCount=_-1,_>1){this.connection=null;return}var k=this.connection,j=b._connection;this.connection=null,j&&(!k||j===k)&&j.unsubscribe()},c}(Subscriber),ConnectableObservable=function(a){__extends(c,a);function c(b,_){var k=a.call(this)||this;return k.source=b,k.subjectFactory=_,k._refCount=0,k._isComplete=!1,k}return c.prototype._subscribe=function(b){return this.getSubject().subscribe(b)},c.prototype.getSubject=function(){var b=this._subject;return(!b||b.isStopped)&&(this._subject=this.subjectFactory()),this._subject},c.prototype.connect=function(){var b=this._connection;return b||(this._isComplete=!1,b=this._connection=new Subscription,b.add(this.source.subscribe(new ConnectableSubscriber(this.getSubject(),this))),b.closed&&(this._connection=null,b=Subscription.EMPTY)),b},c.prototype.refCount=function(){return refCount()(this)},c}(Observable),connectableObservableDescriptor=function(){var a=ConnectableObservable.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:a._subscribe},_isComplete:{value:a._isComplete,writable:!0},getSubject:{value:a.getSubject},connect:{value:a.connect},refCount:{value:a.refCount}}}(),ConnectableSubscriber=function(a){__extends(c,a);function c(b,_){var k=a.call(this,b)||this;return k.connectable=_,k}return c.prototype._error=function(b){this._unsubscribe(),a.prototype._error.call(this,b)},c.prototype._complete=function(){this.connectable._isComplete=!0,this._unsubscribe(),a.prototype._complete.call(this)},c.prototype._unsubscribe=function(){var b=this.connectable;if(b){this.connectable=null;var _=b._connection;b._refCount=0,b._subject=null,b._connection=null,_&&_.unsubscribe()}},c}(SubjectSubscriber);function multicast(a,c){return function(_){var k;if(typeof a=="function"?k=a:k=function(){return a},typeof c=="function")return _.lift(new MulticastOperator(k,c));var j=Object.create(_,connectableObservableDescriptor);return j.source=_,j.subjectFactory=k,j}}var MulticastOperator=function(){function a(c,b){this.subjectFactory=c,this.selector=b}return a.prototype.call=function(c,b){var _=this.selector,k=this.subjectFactory(),j=_(k).subscribe(c);return j.add(b.subscribe(k)),j},a}();function observeOn(a,c){return c===void 0&&(c=0),function(_){return _.lift(new ObserveOnOperator(a,c))}}var ObserveOnOperator=function(){function a(c,b){b===void 0&&(b=0),this.scheduler=c,this.delay=b}return a.prototype.call=function(c,b){return b.subscribe(new ObserveOnSubscriber(c,this.scheduler,this.delay))},a}(),ObserveOnSubscriber=function(a){__extends(c,a);function c(b,_,k){k===void 0&&(k=0);var j=a.call(this,b)||this;return j.scheduler=_,j.delay=k,j}return c.dispatch=function(b){var _=b.notification,k=b.destination;_.observe(k),this.unsubscribe()},c.prototype.scheduleMessage=function(b){var _=this.destination;_.add(this.scheduler.schedule(c.dispatch,this.delay,new ObserveOnMessage(b,this.destination)))},c.prototype._next=function(b){this.scheduleMessage(Notification.createNext(b))},c.prototype._error=function(b){this.scheduleMessage(Notification.createError(b)),this.unsubscribe()},c.prototype._complete=function(){this.scheduleMessage(Notification.createComplete()),this.unsubscribe()},c}(Subscriber),ObserveOnMessage=function(){function a(c,b){this.notification=c,this.destination=b}return a}();function onErrorResumeNext(){for(var a=[],c=0;c<arguments.length;c++)a[c]=arguments[c];return a.length===1&&isArray$4(a[0])&&(a=a[0]),function(b){return b.lift(new OnErrorResumeNextOperator(a))}}var OnErrorResumeNextOperator=function(){function a(c){this.nextSources=c}return a.prototype.call=function(c,b){return b.subscribe(new OnErrorResumeNextSubscriber(c,this.nextSources))},a}(),OnErrorResumeNextSubscriber=function(a){__extends(c,a);function c(b,_){var k=a.call(this,b)||this;return k.destination=b,k.nextSources=_,k}return c.prototype.notifyError=function(){this.subscribeToNextSource()},c.prototype.notifyComplete=function(){this.subscribeToNextSource()},c.prototype._error=function(b){this.subscribeToNextSource(),this.unsubscribe()},c.prototype._complete=function(){this.subscribeToNextSource(),this.unsubscribe()},c.prototype.subscribeToNextSource=function(){var b=this.nextSources.shift();if(b){var _=new SimpleInnerSubscriber(this),k=this.destination;k.add(_);var j=innerSubscribe(b,_);j!==_&&k.add(j)}else this.destination.complete()},c}(SimpleOuterSubscriber);function pairwise(){return function(a){return a.lift(new PairwiseOperator)}}var PairwiseOperator=function(){function a(){}return a.prototype.call=function(c,b){return b.subscribe(new PairwiseSubscriber(c))},a}(),PairwiseSubscriber=function(a){__extends(c,a);function c(b){var _=a.call(this,b)||this;return _.hasPrev=!1,_}return c.prototype._next=function(b){var _;this.hasPrev?_=[this.prev,b]:this.hasPrev=!0,this.prev=b,_&&this.destination.next(_)},c}(Subscriber);function not(a,c){function b(){return!b.pred.apply(b.thisArg,arguments)}return b.pred=a,b.thisArg=c,b}function partition(a,c){return function(b){return[filter(a,c)(b),filter(not(a,c))(b)]}}function pluck(){for(var a=[],c=0;c<arguments.length;c++)a[c]=arguments[c];var b=a.length;if(b===0)throw new Error("list of properties cannot be empty.");return function(_){return map(plucker(a,b))(_)}}function plucker(a,c){var b=function(_){for(var k=_,j=0;j<c;j++){var _e=k!=null?k[a[j]]:void 0;if(_e!==void 0)k=_e;else return}return k};return b}function publish(a){return a?multicast(function(){return new Subject},a):multicast(new Subject)}var BehaviorSubject=function(a){__extends(c,a);function c(b){var _=a.call(this)||this;return _._value=b,_}return Object.defineProperty(c.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),c.prototype._subscribe=function(b){var _=a.prototype._subscribe.call(this,b);return _&&!_.closed&&b.next(this._value),_},c.prototype.getValue=function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new ObjectUnsubscribedError;return this._value},c.prototype.next=function(b){a.prototype.next.call(this,this._value=b)},c}(Subject);function publishBehavior(a){return function(c){return multicast(new BehaviorSubject(a))(c)}}var AsyncSubject=function(a){__extends(c,a);function c(){var b=a!==null&&a.apply(this,arguments)||this;return b.value=null,b.hasNext=!1,b.hasCompleted=!1,b}return c.prototype._subscribe=function(b){return this.hasError?(b.error(this.thrownError),Subscription.EMPTY):this.hasCompleted&&this.hasNext?(b.next(this.value),b.complete(),Subscription.EMPTY):a.prototype._subscribe.call(this,b)},c.prototype.next=function(b){this.hasCompleted||(this.value=b,this.hasNext=!0)},c.prototype.error=function(b){this.hasCompleted||a.prototype.error.call(this,b)},c.prototype.complete=function(){this.hasCompleted=!0,this.hasNext&&a.prototype.next.call(this,this.value),a.prototype.complete.call(this)},c}(Subject);function publishLast(){return function(a){return multicast(new AsyncSubject)(a)}}var QueueAction=function(a){__extends(c,a);function c(b,_){var k=a.call(this,b,_)||this;return k.scheduler=b,k.work=_,k}return c.prototype.schedule=function(b,_){return _===void 0&&(_=0),_>0?a.prototype.schedule.call(this,b,_):(this.delay=_,this.state=b,this.scheduler.flush(this),this)},c.prototype.execute=function(b,_){return _>0||this.closed?a.prototype.execute.call(this,b,_):this._execute(b,_)},c.prototype.requestAsyncId=function(b,_,k){return k===void 0&&(k=0),k!==null&&k>0||k===null&&this.delay>0?a.prototype.requestAsyncId.call(this,b,_,k):b.flush(this)},c}(AsyncAction),QueueScheduler=function(a){__extends(c,a);function c(){return a!==null&&a.apply(this,arguments)||this}return c}(AsyncScheduler),queueScheduler=new QueueScheduler(QueueAction),queue=queueScheduler,ReplaySubject=function(a){__extends(c,a);function c(b,_,k){b===void 0&&(b=Number.POSITIVE_INFINITY),_===void 0&&(_=Number.POSITIVE_INFINITY);var j=a.call(this)||this;return j.scheduler=k,j._events=[],j._infiniteTimeWindow=!1,j._bufferSize=b<1?1:b,j._windowTime=_<1?1:_,_===Number.POSITIVE_INFINITY?(j._infiniteTimeWindow=!0,j.next=j.nextInfiniteTimeWindow):j.next=j.nextTimeWindow,j}return c.prototype.nextInfiniteTimeWindow=function(b){if(!this.isStopped){var _=this._events;_.push(b),_.length>this._bufferSize&&_.shift()}a.prototype.next.call(this,b)},c.prototype.nextTimeWindow=function(b){this.isStopped||(this._events.push(new ReplayEvent(this._getNow(),b)),this._trimBufferThenGetEvents()),a.prototype.next.call(this,b)},c.prototype._subscribe=function(b){var _=this._infiniteTimeWindow,k=_?this._events:this._trimBufferThenGetEvents(),j=this.scheduler,_e=k.length,et;if(this.closed)throw new ObjectUnsubscribedError;if(this.isStopped||this.hasError?et=Subscription.EMPTY:(this.observers.push(b),et=new SubjectSubscription(this,b)),j&&b.add(b=new ObserveOnSubscriber(b,j)),_)for(var nt=0;nt<_e&&!b.closed;nt++)b.next(k[nt]);else for(var nt=0;nt<_e&&!b.closed;nt++)b.next(k[nt].value);return this.hasError?b.error(this.thrownError):this.isStopped&&b.complete(),et},c.prototype._getNow=function(){return(this.scheduler||queue).now()},c.prototype._trimBufferThenGetEvents=function(){for(var b=this._getNow(),_=this._bufferSize,k=this._windowTime,j=this._events,_e=j.length,et=0;et<_e&&!(b-j[et].time<k);)et++;return _e>_&&(et=Math.max(et,_e-_)),et>0&&j.splice(0,et),j},c}(Subject),ReplayEvent=function(){function a(c,b){this.time=c,this.value=b}return a}();function publishReplay(a,c,b,_){b&&typeof b!="function"&&(_=b);var k=typeof b=="function"?b:void 0,j=new ReplaySubject(a,c,_);return function(_e){return multicast(function(){return j},k)(_e)}}function race$1(){for(var a=[],c=0;c<arguments.length;c++)a[c]=arguments[c];if(a.length===1)if(isArray$4(a[0]))a=a[0];else return a[0];return fromArray(a,void 0).lift(new RaceOperator)}var RaceOperator=function(){function a(){}return a.prototype.call=function(c,b){return b.subscribe(new RaceSubscriber(c))},a}(),RaceSubscriber=function(a){__extends(c,a);function c(b){var _=a.call(this,b)||this;return _.hasFirst=!1,_.observables=[],_.subscriptions=[],_}return c.prototype._next=function(b){this.observables.push(b)},c.prototype._complete=function(){var b=this.observables,_=b.length;if(_===0)this.destination.complete();else{for(var k=0;k<_&&!this.hasFirst;k++){var j=b[k],_e=subscribeToResult(this,j,void 0,k);this.subscriptions&&this.subscriptions.push(_e),this.add(_e)}this.observables=null}},c.prototype.notifyNext=function(b,_,k){if(!this.hasFirst){this.hasFirst=!0;for(var j=0;j<this.subscriptions.length;j++)if(j!==k){var _e=this.subscriptions[j];_e.unsubscribe(),this.remove(_e)}this.subscriptions=null}this.destination.next(_)},c}(OuterSubscriber);function race(){for(var a=[],c=0;c<arguments.length;c++)a[c]=arguments[c];return function(_){return a.length===1&&isArray$4(a[0])&&(a=a[0]),_.lift.call(race$1.apply(void 0,[_].concat(a)))}}function repeat(a){return a===void 0&&(a=-1),function(c){return a===0?empty$1():a<0?c.lift(new RepeatOperator(-1,c)):c.lift(new RepeatOperator(a-1,c))}}var RepeatOperator=function(){function a(c,b){this.count=c,this.source=b}return a.prototype.call=function(c,b){return b.subscribe(new RepeatSubscriber(c,this.count,this.source))},a}(),RepeatSubscriber=function(a){__extends(c,a);function c(b,_,k){var j=a.call(this,b)||this;return j.count=_,j.source=k,j}return c.prototype.complete=function(){if(!this.isStopped){var b=this,_=b.source,k=b.count;if(k===0)return a.prototype.complete.call(this);k>-1&&(this.count=k-1),_.subscribe(this._unsubscribeAndRecycle())}},c}(Subscriber);function repeatWhen(a){return function(c){return c.lift(new RepeatWhenOperator(a))}}var RepeatWhenOperator=function(){function a(c){this.notifier=c}return a.prototype.call=function(c,b){return b.subscribe(new RepeatWhenSubscriber(c,this.notifier,b))},a}(),RepeatWhenSubscriber=function(a){__extends(c,a);function c(b,_,k){var j=a.call(this,b)||this;return j.notifier=_,j.source=k,j.sourceIsBeingSubscribedTo=!0,j}return c.prototype.notifyNext=function(){this.sourceIsBeingSubscribedTo=!0,this.source.subscribe(this)},c.prototype.notifyComplete=function(){if(this.sourceIsBeingSubscribedTo===!1)return a.prototype.complete.call(this)},c.prototype.complete=function(){if(this.sourceIsBeingSubscribedTo=!1,!this.isStopped){if(this.retries||this.subscribeToRetries(),!this.retriesSubscription||this.retriesSubscription.closed)return a.prototype.complete.call(this);this._unsubscribeAndRecycle(),this.notifications.next(void 0)}},c.prototype._unsubscribe=function(){var b=this,_=b.notifications,k=b.retriesSubscription;_&&(_.unsubscribe(),this.notifications=void 0),k&&(k.unsubscribe(),this.retriesSubscription=void 0),this.retries=void 0},c.prototype._unsubscribeAndRecycle=function(){var b=this._unsubscribe;return this._unsubscribe=null,a.prototype._unsubscribeAndRecycle.call(this),this._unsubscribe=b,this},c.prototype.subscribeToRetries=function(){this.notifications=new Subject;var b;try{var _=this.notifier;b=_(this.notifications)}catch{return a.prototype.complete.call(this)}this.retries=b,this.retriesSubscription=innerSubscribe(b,new SimpleInnerSubscriber(this))},c}(SimpleOuterSubscriber);function retry(a){return a===void 0&&(a=-1),function(c){return c.lift(new RetryOperator(a,c))}}var RetryOperator=function(){function a(c,b){this.count=c,this.source=b}return a.prototype.call=function(c,b){return b.subscribe(new RetrySubscriber(c,this.count,this.source))},a}(),RetrySubscriber=function(a){__extends(c,a);function c(b,_,k){var j=a.call(this,b)||this;return j.count=_,j.source=k,j}return c.prototype.error=function(b){if(!this.isStopped){var _=this,k=_.source,j=_.count;if(j===0)return a.prototype.error.call(this,b);j>-1&&(this.count=j-1),k.subscribe(this._unsubscribeAndRecycle())}},c}(Subscriber);function retryWhen(a){return function(c){return c.lift(new RetryWhenOperator(a,c))}}var RetryWhenOperator=function(){function a(c,b){this.notifier=c,this.source=b}return a.prototype.call=function(c,b){return b.subscribe(new RetryWhenSubscriber(c,this.notifier,this.source))},a}(),RetryWhenSubscriber=function(a){__extends(c,a);function c(b,_,k){var j=a.call(this,b)||this;return j.notifier=_,j.source=k,j}return c.prototype.error=function(b){if(!this.isStopped){var _=this.errors,k=this.retries,j=this.retriesSubscription;if(k)this.errors=void 0,this.retriesSubscription=void 0;else{_=new Subject;try{var _e=this.notifier;k=_e(_)}catch(et){return a.prototype.error.call(this,et)}j=innerSubscribe(k,new SimpleInnerSubscriber(this))}this._unsubscribeAndRecycle(),this.errors=_,this.retries=k,this.retriesSubscription=j,_.next(b)}},c.prototype._unsubscribe=function(){var b=this,_=b.errors,k=b.retriesSubscription;_&&(_.unsubscribe(),this.errors=void 0),k&&(k.unsubscribe(),this.retriesSubscription=void 0),this.retries=void 0},c.prototype.notifyNext=function(){var b=this._unsubscribe;this._unsubscribe=null,this._unsubscribeAndRecycle(),this._unsubscribe=b,this.source.subscribe(this)},c}(SimpleOuterSubscriber);function sample(a){return function(c){return c.lift(new SampleOperator(a))}}var SampleOperator=function(){function a(c){this.notifier=c}return a.prototype.call=function(c,b){var _=new SampleSubscriber(c),k=b.subscribe(_);return k.add(innerSubscribe(this.notifier,new SimpleInnerSubscriber(_))),k},a}(),SampleSubscriber=function(a){__extends(c,a);function c(){var b=a!==null&&a.apply(this,arguments)||this;return b.hasValue=!1,b}return c.prototype._next=function(b){this.value=b,this.hasValue=!0},c.prototype.notifyNext=function(){this.emitValue()},c.prototype.notifyComplete=function(){this.emitValue()},c.prototype.emitValue=function(){this.hasValue&&(this.hasValue=!1,this.destination.next(this.value))},c}(SimpleOuterSubscriber);function sampleTime(a,c){return c===void 0&&(c=async),function(b){return b.lift(new SampleTimeOperator(a,c))}}var SampleTimeOperator=function(){function a(c,b){this.period=c,this.scheduler=b}return a.prototype.call=function(c,b){return b.subscribe(new SampleTimeSubscriber(c,this.period,this.scheduler))},a}(),SampleTimeSubscriber=function(a){__extends(c,a);function c(b,_,k){var j=a.call(this,b)||this;return j.period=_,j.scheduler=k,j.hasValue=!1,j.add(k.schedule(dispatchNotification,_,{subscriber:j,period:_})),j}return c.prototype._next=function(b){this.lastValue=b,this.hasValue=!0},c.prototype.notifyNext=function(){this.hasValue&&(this.hasValue=!1,this.destination.next(this.lastValue))},c}(Subscriber);function dispatchNotification(a){var c=a.subscriber,b=a.period;c.notifyNext(),this.schedule(a,b)}function sequenceEqual(a,c){return function(b){return b.lift(new SequenceEqualOperator(a,c))}}var SequenceEqualOperator=function(){function a(c,b){this.compareTo=c,this.comparator=b}return a.prototype.call=function(c,b){return b.subscribe(new SequenceEqualSubscriber(c,this.compareTo,this.comparator))},a}(),SequenceEqualSubscriber=function(a){__extends(c,a);function c(b,_,k){var j=a.call(this,b)||this;return j.compareTo=_,j.comparator=k,j._a=[],j._b=[],j._oneComplete=!1,j.destination.add(_.subscribe(new SequenceEqualCompareToSubscriber(b,j))),j}return c.prototype._next=function(b){this._oneComplete&&this._b.length===0?this.emit(!1):(this._a.push(b),this.checkValues())},c.prototype._complete=function(){this._oneComplete?this.emit(this._a.length===0&&this._b.length===0):this._oneComplete=!0,this.unsubscribe()},c.prototype.checkValues=function(){for(var b=this,_=b._a,k=b._b,j=b.comparator;_.length>0&&k.length>0;){var _e=_.shift(),et=k.shift(),nt=!1;try{nt=j?j(_e,et):_e===et}catch(it){this.destination.error(it)}nt||this.emit(!1)}},c.prototype.emit=function(b){var _=this.destination;_.next(b),_.complete()},c.prototype.nextB=function(b){this._oneComplete&&this._a.length===0?this.emit(!1):(this._b.push(b),this.checkValues())},c.prototype.completeB=function(){this._oneComplete?this.emit(this._a.length===0&&this._b.length===0):this._oneComplete=!0},c}(Subscriber),SequenceEqualCompareToSubscriber=function(a){__extends(c,a);function c(b,_){var k=a.call(this,b)||this;return k.parent=_,k}return c.prototype._next=function(b){this.parent.nextB(b)},c.prototype._error=function(b){this.parent.error(b),this.unsubscribe()},c.prototype._complete=function(){this.parent.completeB(),this.unsubscribe()},c}(Subscriber);function shareSubjectFactory(){return new Subject}function share(){return function(a){return refCount()(multicast(shareSubjectFactory)(a))}}function shareReplay(a,c,b){var _;return a&&typeof a=="object"?_=a:_={bufferSize:a,windowTime:c,refCount:!1,scheduler:b},function(k){return k.lift(shareReplayOperator(_))}}function shareReplayOperator(a){var c=a.bufferSize,b=c===void 0?Number.POSITIVE_INFINITY:c,_=a.windowTime,k=_===void 0?Number.POSITIVE_INFINITY:_,j=a.refCount,_e=a.scheduler,et,nt=0,it,ft=!1,pt=!1;return function(St){nt++;var yt;!et||ft?(ft=!1,et=new ReplaySubject(b,k,_e),yt=et.subscribe(this),it=St.subscribe({next:function(_t){et.next(_t)},error:function(_t){ft=!0,et.error(_t)},complete:function(){pt=!0,it=void 0,et.complete()}}),pt&&(it=void 0)):yt=et.subscribe(this),this.add(function(){nt--,yt.unsubscribe(),yt=void 0,it&&!pt&&j&&nt===0&&(it.unsubscribe(),it=void 0,et=void 0)})}}function single(a){return function(c){return c.lift(new SingleOperator(a,c))}}var SingleOperator=function(){function a(c,b){this.predicate=c,this.source=b}return a.prototype.call=function(c,b){return b.subscribe(new SingleSubscriber(c,this.predicate,this.source))},a}(),SingleSubscriber=function(a){__extends(c,a);function c(b,_,k){var j=a.call(this,b)||this;return j.predicate=_,j.source=k,j.seenValue=!1,j.index=0,j}return c.prototype.applySingleValue=function(b){this.seenValue?this.destination.error("Sequence contains more than one element"):(this.seenValue=!0,this.singleValue=b)},c.prototype._next=function(b){var _=this.index++;this.predicate?this.tryNext(b,_):this.applySingleValue(b)},c.prototype.tryNext=function(b,_){try{this.predicate(b,_,this.source)&&this.applySingleValue(b)}catch(k){this.destination.error(k)}},c.prototype._complete=function(){var b=this.destination;this.index>0?(b.next(this.seenValue?this.singleValue:void 0),b.complete()):b.error(new EmptyError)},c}(Subscriber);function skip(a){return function(c){return c.lift(new SkipOperator(a))}}var SkipOperator=function(){function a(c){this.total=c}return a.prototype.call=function(c,b){return b.subscribe(new SkipSubscriber(c,this.total))},a}(),SkipSubscriber=function(a){__extends(c,a);function c(b,_){var k=a.call(this,b)||this;return k.total=_,k.count=0,k}return c.prototype._next=function(b){++this.count>this.total&&this.destination.next(b)},c}(Subscriber);function skipLast(a){return function(c){return c.lift(new SkipLastOperator(a))}}var SkipLastOperator=function(){function a(c){if(this._skipCount=c,this._skipCount<0)throw new ArgumentOutOfRangeError}return a.prototype.call=function(c,b){return this._skipCount===0?b.subscribe(new Subscriber(c)):b.subscribe(new SkipLastSubscriber(c,this._skipCount))},a}(),SkipLastSubscriber=function(a){__extends(c,a);function c(b,_){var k=a.call(this,b)||this;return k._skipCount=_,k._count=0,k._ring=new Array(_),k}return c.prototype._next=function(b){var _=this._skipCount,k=this._count++;if(k<_)this._ring[k]=b;else{var j=k%_,_e=this._ring,et=_e[j];_e[j]=b,this.destination.next(et)}},c}(Subscriber);function skipUntil(a){return function(c){return c.lift(new SkipUntilOperator(a))}}var SkipUntilOperator=function(){function a(c){this.notifier=c}return a.prototype.call=function(c,b){return b.subscribe(new SkipUntilSubscriber(c,this.notifier))},a}(),SkipUntilSubscriber=function(a){__extends(c,a);function c(b,_){var k=a.call(this,b)||this;k.hasValue=!1;var j=new SimpleInnerSubscriber(k);k.add(j),k.innerSubscription=j;var _e=innerSubscribe(_,j);return _e!==j&&(k.add(_e),k.innerSubscription=_e),k}return c.prototype._next=function(b){this.hasValue&&a.prototype._next.call(this,b)},c.prototype.notifyNext=function(){this.hasValue=!0,this.innerSubscription&&this.innerSubscription.unsubscribe()},c.prototype.notifyComplete=function(){},c}(SimpleOuterSubscriber);function skipWhile(a){return function(c){return c.lift(new SkipWhileOperator(a))}}var SkipWhileOperator=function(){function a(c){this.predicate=c}return a.prototype.call=function(c,b){return b.subscribe(new SkipWhileSubscriber(c,this.predicate))},a}(),SkipWhileSubscriber=function(a){__extends(c,a);function c(b,_){var k=a.call(this,b)||this;return k.predicate=_,k.skipping=!0,k.index=0,k}return c.prototype._next=function(b){var _=this.destination;this.skipping&&this.tryCallPredicate(b),this.skipping||_.next(b)},c.prototype.tryCallPredicate=function(b){try{var _=this.predicate(b,this.index++);this.skipping=!!_}catch(k){this.destination.error(k)}},c}(Subscriber);function startWith(){for(var a=[],c=0;c<arguments.length;c++)a[c]=arguments[c];var b=a[a.length-1];return isScheduler(b)?(a.pop(),function(_){return concat$1(a,_,b)}):function(_){return concat$1(a,_)}}var nextHandle=1,RESOLVED=function(){return Promise.resolve()}(),activeHandles={};function findAndClearHandle(a){return a in activeHandles?(delete activeHandles[a],!0):!1}var Immediate={setImmediate:function(a){var c=nextHandle++;return activeHandles[c]=!0,RESOLVED.then(function(){return findAndClearHandle(c)&&a()}),c},clearImmediate:function(a){findAndClearHandle(a)}},AsapAction=function(a){__extends(c,a);function c(b,_){var k=a.call(this,b,_)||this;return k.scheduler=b,k.work=_,k}return c.prototype.requestAsyncId=function(b,_,k){return k===void 0&&(k=0),k!==null&&k>0?a.prototype.requestAsyncId.call(this,b,_,k):(b.actions.push(this),b.scheduled||(b.scheduled=Immediate.setImmediate(b.flush.bind(b,null))))},c.prototype.recycleAsyncId=function(b,_,k){if(k===void 0&&(k=0),k!==null&&k>0||k===null&&this.delay>0)return a.prototype.recycleAsyncId.call(this,b,_,k);b.actions.length===0&&(Immediate.clearImmediate(_),b.scheduled=void 0)},c}(AsyncAction),AsapScheduler=function(a){__extends(c,a);function c(){return a!==null&&a.apply(this,arguments)||this}return c.prototype.flush=function(b){this.active=!0,this.scheduled=void 0;var _=this.actions,k,j=-1,_e=_.length;b=b||_.shift();do if(k=b.execute(b.state,b.delay))break;while(++j<_e&&(b=_.shift()));if(this.active=!1,k){for(;++j<_e&&(b=_.shift());)b.unsubscribe();throw k}},c}(AsyncScheduler),asapScheduler=new AsapScheduler(AsapAction),asap=asapScheduler,SubscribeOnObservable=function(a){__extends(c,a);function c(b,_,k){_===void 0&&(_=0),k===void 0&&(k=asap);var j=a.call(this)||this;return j.source=b,j.delayTime=_,j.scheduler=k,(!isNumeric(_)||_<0)&&(j.delayTime=0),(!k||typeof k.schedule!="function")&&(j.scheduler=asap),j}return c.create=function(b,_,k){return _===void 0&&(_=0),k===void 0&&(k=asap),new c(b,_,k)},c.dispatch=function(b){var _=b.source,k=b.subscriber;return this.add(_.subscribe(k))},c.prototype._subscribe=function(b){var _=this.delayTime,k=this.source,j=this.scheduler;return j.schedule(c.dispatch,_,{source:k,subscriber:b})},c}(Observable);function subscribeOn(a,c){return c===void 0&&(c=0),function(_){return _.lift(new SubscribeOnOperator(a,c))}}var SubscribeOnOperator=function(){function a(c,b){this.scheduler=c,this.delay=b}return a.prototype.call=function(c,b){return new SubscribeOnObservable(b,this.delay,this.scheduler).subscribe(c)},a}();function switchMap(a,c){return typeof c=="function"?function(b){return b.pipe(switchMap(function(_,k){return from(a(_,k)).pipe(map(function(j,_e){return c(_,j,k,_e)}))}))}:function(b){return b.lift(new SwitchMapOperator(a))}}var SwitchMapOperator=function(){function a(c){this.project=c}return a.prototype.call=function(c,b){return b.subscribe(new SwitchMapSubscriber(c,this.project))},a}(),SwitchMapSubscriber=function(a){__extends(c,a);function c(b,_){var k=a.call(this,b)||this;return k.project=_,k.index=0,k}return c.prototype._next=function(b){var _,k=this.index++;try{_=this.project(b,k)}catch(j){this.destination.error(j);return}this._innerSub(_)},c.prototype._innerSub=function(b){var _=this.innerSubscription;_&&_.unsubscribe();var k=new SimpleInnerSubscriber(this),j=this.destination;j.add(k),this.innerSubscription=innerSubscribe(b,k),this.innerSubscription!==k&&j.add(this.innerSubscription)},c.prototype._complete=function(){var b=this.innerSubscription;(!b||b.closed)&&a.prototype._complete.call(this),this.unsubscribe()},c.prototype._unsubscribe=function(){this.innerSubscription=void 0},c.prototype.notifyComplete=function(){this.innerSubscription=void 0,this.isStopped&&a.prototype._complete.call(this)},c.prototype.notifyNext=function(b){this.destination.next(b)},c}(SimpleOuterSubscriber);function switchAll(){return switchMap(identity)}function switchMapTo(a,c){return c?switchMap(function(){return a},c):switchMap(function(){return a})}function takeUntil(a){return function(c){return c.lift(new TakeUntilOperator(a))}}var TakeUntilOperator=function(){function a(c){this.notifier=c}return a.prototype.call=function(c,b){var _=new TakeUntilSubscriber(c),k=innerSubscribe(this.notifier,new SimpleInnerSubscriber(_));return k&&!_.seenValue?(_.add(k),b.subscribe(_)):_},a}(),TakeUntilSubscriber=function(a){__extends(c,a);function c(b){var _=a.call(this,b)||this;return _.seenValue=!1,_}return c.prototype.notifyNext=function(){this.seenValue=!0,this.complete()},c.prototype.notifyComplete=function(){},c}(SimpleOuterSubscriber);function takeWhile(a,c){return c===void 0&&(c=!1),function(b){return b.lift(new TakeWhileOperator(a,c))}}var TakeWhileOperator=function(){function a(c,b){this.predicate=c,this.inclusive=b}return a.prototype.call=function(c,b){return b.subscribe(new TakeWhileSubscriber(c,this.predicate,this.inclusive))},a}(),TakeWhileSubscriber=function(a){__extends(c,a);function c(b,_,k){var j=a.call(this,b)||this;return j.predicate=_,j.inclusive=k,j.index=0,j}return c.prototype._next=function(b){var _=this.destination,k;try{k=this.predicate(b,this.index++)}catch(j){_.error(j);return}this.nextOrComplete(b,k)},c.prototype.nextOrComplete=function(b,_){var k=this.destination;_?k.next(b):(this.inclusive&&k.next(b),k.complete())},c}(Subscriber);function noop$1(){}function tap(a,c,b){return function(k){return k.lift(new DoOperator(a,c,b))}}var DoOperator=function(){function a(c,b,_){this.nextOrObserver=c,this.error=b,this.complete=_}return a.prototype.call=function(c,b){return b.subscribe(new TapSubscriber(c,this.nextOrObserver,this.error,this.complete))},a}(),TapSubscriber=function(a){__extends(c,a);function c(b,_,k,j){var _e=a.call(this,b)||this;return _e._tapNext=noop$1,_e._tapError=noop$1,_e._tapComplete=noop$1,_e._tapError=k||noop$1,_e._tapComplete=j||noop$1,isFunction$2(_)?(_e._context=_e,_e._tapNext=_):_&&(_e._context=_,_e._tapNext=_.next||noop$1,_e._tapError=_.error||noop$1,_e._tapComplete=_.complete||noop$1),_e}return c.prototype._next=function(b){try{this._tapNext.call(this._context,b)}catch(_){this.destination.error(_);return}this.destination.next(b)},c.prototype._error=function(b){try{this._tapError.call(this._context,b)}catch(_){this.destination.error(_);return}this.destination.error(b)},c.prototype._complete=function(){try{this._tapComplete.call(this._context)}catch(b){this.destination.error(b);return}return this.destination.complete()},c}(Subscriber),defaultThrottleConfig={leading:!0,trailing:!1};function throttle(a,c){return c===void 0&&(c=defaultThrottleConfig),function(b){return b.lift(new ThrottleOperator(a,!!c.leading,!!c.trailing))}}var ThrottleOperator=function(){function a(c,b,_){this.durationSelector=c,this.leading=b,this.trailing=_}return a.prototype.call=function(c,b){return b.subscribe(new ThrottleSubscriber(c,this.durationSelector,this.leading,this.trailing))},a}(),ThrottleSubscriber=function(a){__extends(c,a);function c(b,_,k,j){var _e=a.call(this,b)||this;return _e.destination=b,_e.durationSelector=_,_e._leading=k,_e._trailing=j,_e._hasValue=!1,_e}return c.prototype._next=function(b){this._hasValue=!0,this._sendValue=b,this._throttled||(this._leading?this.send():this.throttle(b))},c.prototype.send=function(){var b=this,_=b._hasValue,k=b._sendValue;_&&(this.destination.next(k),this.throttle(k)),this._hasValue=!1,this._sendValue=void 0},c.prototype.throttle=function(b){var _=this.tryDurationSelector(b);_&&this.add(this._throttled=innerSubscribe(_,new SimpleInnerSubscriber(this)))},c.prototype.tryDurationSelector=function(b){try{return this.durationSelector(b)}catch(_){return this.destination.error(_),null}},c.prototype.throttlingDone=function(){var b=this,_=b._throttled,k=b._trailing;_&&_.unsubscribe(),this._throttled=void 0,k&&this.send()},c.prototype.notifyNext=function(){this.throttlingDone()},c.prototype.notifyComplete=function(){this.throttlingDone()},c}(SimpleOuterSubscriber);function throttleTime(a,c,b){return c===void 0&&(c=async),b===void 0&&(b=defaultThrottleConfig),function(_){return _.lift(new ThrottleTimeOperator(a,c,b.leading,b.trailing))}}var ThrottleTimeOperator=function(){function a(c,b,_,k){this.duration=c,this.scheduler=b,this.leading=_,this.trailing=k}return a.prototype.call=function(c,b){return b.subscribe(new ThrottleTimeSubscriber(c,this.duration,this.scheduler,this.leading,this.trailing))},a}(),ThrottleTimeSubscriber=function(a){__extends(c,a);function c(b,_,k,j,_e){var et=a.call(this,b)||this;return et.duration=_,et.scheduler=k,et.leading=j,et.trailing=_e,et._hasTrailingValue=!1,et._trailingValue=null,et}return c.prototype._next=function(b){this.throttled?this.trailing&&(this._trailingValue=b,this._hasTrailingValue=!0):(this.add(this.throttled=this.scheduler.schedule(dispatchNext,this.duration,{subscriber:this})),this.leading?this.destination.next(b):this.trailing&&(this._trailingValue=b,this._hasTrailingValue=!0))},c.prototype._complete=function(){this._hasTrailingValue?(this.destination.next(this._trailingValue),this.destination.complete()):this.destination.complete()},c.prototype.clearThrottle=function(){var b=this.throttled;b&&(this.trailing&&this._hasTrailingValue&&(this.destination.next(this._trailingValue),this._trailingValue=null,this._hasTrailingValue=!1),b.unsubscribe(),this.remove(b),this.throttled=null)},c}(Subscriber);function dispatchNext(a){var c=a.subscriber;c.clearThrottle()}function defer(a){return new Observable(function(c){var b;try{b=a()}catch(k){c.error(k);return}var _=b?from(b):empty$1();return _.subscribe(c)})}function timeInterval(a){return a===void 0&&(a=async),function(c){return defer(function(){return c.pipe(scan(function(b,_){var k=b.current;return{value:_,current:a.now(),last:k}},{current:a.now(),value:void 0,last:void 0}),map(function(b){var _=b.current,k=b.last,j=b.value;return new TimeInterval(j,_-k)}))})}}var TimeInterval=function(){function a(c,b){this.value=c,this.interval=b}return a}(),TimeoutErrorImpl=function(){function a(){return Error.call(this),this.message="Timeout has occurred",this.name="TimeoutError",this}return a.prototype=Object.create(Error.prototype),a}(),TimeoutError=TimeoutErrorImpl;function timeoutWith(a,c,b){return b===void 0&&(b=async),function(_){var k=isDate$1(a),j=k?+a-b.now():Math.abs(a);return _.lift(new TimeoutWithOperator(j,k,c,b))}}var TimeoutWithOperator=function(){function a(c,b,_,k){this.waitFor=c,this.absoluteTimeout=b,this.withObservable=_,this.scheduler=k}return a.prototype.call=function(c,b){return b.subscribe(new TimeoutWithSubscriber(c,this.absoluteTimeout,this.waitFor,this.withObservable,this.scheduler))},a}(),TimeoutWithSubscriber=function(a){__extends(c,a);function c(b,_,k,j,_e){var et=a.call(this,b)||this;return et.absoluteTimeout=_,et.waitFor=k,et.withObservable=j,et.scheduler=_e,et.scheduleTimeout(),et}return c.dispatchTimeout=function(b){var _=b.withObservable;b._unsubscribeAndRecycle(),b.add(innerSubscribe(_,new SimpleInnerSubscriber(b)))},c.prototype.scheduleTimeout=function(){var b=this.action;b?this.action=b.schedule(this,this.waitFor):this.add(this.action=this.scheduler.schedule(c.dispatchTimeout,this.waitFor,this))},c.prototype._next=function(b){this.absoluteTimeout||this.scheduleTimeout(),a.prototype._next.call(this,b)},c.prototype._unsubscribe=function(){this.action=void 0,this.scheduler=null,this.withObservable=null},c}(SimpleOuterSubscriber);function timeout(a,c){return c===void 0&&(c=async),timeoutWith(a,throwError(new TimeoutError),c)}function timestamp$1(a){return a===void 0&&(a=async),map(function(c){return new Timestamp$1(c,a.now())})}var Timestamp$1=function(){function a(c,b){this.value=c,this.timestamp=b}return a}();function toArrayReducer(a,c,b){return b===0?[c]:(a.push(c),a)}function toArray(){return reduce(toArrayReducer,[])}function window$1(a){return function(b){return b.lift(new WindowOperator$1(a))}}var WindowOperator$1=function(){function a(c){this.windowBoundaries=c}return a.prototype.call=function(c,b){var _=new WindowSubscriber$1(c),k=b.subscribe(_);return k.closed||_.add(innerSubscribe(this.windowBoundaries,new SimpleInnerSubscriber(_))),k},a}(),WindowSubscriber$1=function(a){__extends(c,a);function c(b){var _=a.call(this,b)||this;return _.window=new Subject,b.next(_.window),_}return c.prototype.notifyNext=function(){this.openWindow()},c.prototype.notifyError=function(b){this._error(b)},c.prototype.notifyComplete=function(){this._complete()},c.prototype._next=function(b){this.window.next(b)},c.prototype._error=function(b){this.window.error(b),this.destination.error(b)},c.prototype._complete=function(){this.window.complete(),this.destination.complete()},c.prototype._unsubscribe=function(){this.window=null},c.prototype.openWindow=function(){var b=this.window;b&&b.complete();var _=this.destination,k=this.window=new Subject;_.next(k)},c}(SimpleOuterSubscriber);function windowCount(a,c){return c===void 0&&(c=0),function(_){return _.lift(new WindowCountOperator(a,c))}}var WindowCountOperator=function(){function a(c,b){this.windowSize=c,this.startWindowEvery=b}return a.prototype.call=function(c,b){return b.subscribe(new WindowCountSubscriber(c,this.windowSize,this.startWindowEvery))},a}(),WindowCountSubscriber=function(a){__extends(c,a);function c(b,_,k){var j=a.call(this,b)||this;return j.destination=b,j.windowSize=_,j.startWindowEvery=k,j.windows=[new Subject],j.count=0,b.next(j.windows[0]),j}return c.prototype._next=function(b){for(var _=this.startWindowEvery>0?this.startWindowEvery:this.windowSize,k=this.destination,j=this.windowSize,_e=this.windows,et=_e.length,nt=0;nt<et&&!this.closed;nt++)_e[nt].next(b);var it=this.count-j+1;if(it>=0&&it%_===0&&!this.closed&&_e.shift().complete(),++this.count%_===0&&!this.closed){var ft=new Subject;_e.push(ft),k.next(ft)}},c.prototype._error=function(b){var _=this.windows;if(_)for(;_.length>0&&!this.closed;)_.shift().error(b);this.destination.error(b)},c.prototype._complete=function(){var b=this.windows;if(b)for(;b.length>0&&!this.closed;)b.shift().complete();this.destination.complete()},c.prototype._unsubscribe=function(){this.count=0,this.windows=null},c}(Subscriber);function windowTime(a){var c=async,b=null,_=Number.POSITIVE_INFINITY;return isScheduler(arguments[3])&&(c=arguments[3]),isScheduler(arguments[2])?c=arguments[2]:isNumeric(arguments[2])&&(_=Number(arguments[2])),isScheduler(arguments[1])?c=arguments[1]:isNumeric(arguments[1])&&(b=Number(arguments[1])),function(j){return j.lift(new WindowTimeOperator(a,b,_,c))}}var WindowTimeOperator=function(){function a(c,b,_,k){this.windowTimeSpan=c,this.windowCreationInterval=b,this.maxWindowSize=_,this.scheduler=k}return a.prototype.call=function(c,b){return b.subscribe(new WindowTimeSubscriber(c,this.windowTimeSpan,this.windowCreationInterval,this.maxWindowSize,this.scheduler))},a}(),CountedSubject=function(a){__extends(c,a);function c(){var b=a!==null&&a.apply(this,arguments)||this;return b._numberOfNextedValues=0,b}return c.prototype.next=function(b){this._numberOfNextedValues++,a.prototype.next.call(this,b)},Object.defineProperty(c.prototype,"numberOfNextedValues",{get:function(){return this._numberOfNextedValues},enumerable:!0,configurable:!0}),c}(Subject),WindowTimeSubscriber=function(a){__extends(c,a);function c(b,_,k,j,_e){var et=a.call(this,b)||this;et.destination=b,et.windowTimeSpan=_,et.windowCreationInterval=k,et.maxWindowSize=j,et.scheduler=_e,et.windows=[];var nt=et.openWindow();if(k!==null&&k>=0){var it={subscriber:et,window:nt,context:null},ft={windowTimeSpan:_,windowCreationInterval:k,subscriber:et,scheduler:_e};et.add(_e.schedule(dispatchWindowClose,_,it)),et.add(_e.schedule(dispatchWindowCreation,k,ft))}else{var pt={subscriber:et,window:nt,windowTimeSpan:_};et.add(_e.schedule(dispatchWindowTimeSpanOnly,_,pt))}return et}return c.prototype._next=function(b){for(var _=this.windows,k=_.length,j=0;j<k;j++){var _e=_[j];_e.closed||(_e.next(b),_e.numberOfNextedValues>=this.maxWindowSize&&this.closeWindow(_e))}},c.prototype._error=function(b){for(var _=this.windows;_.length>0;)_.shift().error(b);this.destination.error(b)},c.prototype._complete=function(){for(var b=this.windows;b.length>0;){var _=b.shift();_.closed||_.complete()}this.destination.complete()},c.prototype.openWindow=function(){var b=new CountedSubject;this.windows.push(b);var _=this.destination;return _.next(b),b},c.prototype.closeWindow=function(b){b.complete();var _=this.windows;_.splice(_.indexOf(b),1)},c}(Subscriber);function dispatchWindowTimeSpanOnly(a){var c=a.subscriber,b=a.windowTimeSpan,_=a.window;_&&c.closeWindow(_),a.window=c.openWindow(),this.schedule(a,b)}function dispatchWindowCreation(a){var c=a.windowTimeSpan,b=a.subscriber,_=a.scheduler,k=a.windowCreationInterval,j=b.openWindow(),_e=this,et={action:_e,subscription:null},nt={subscriber:b,window:j,context:et};et.subscription=_.schedule(dispatchWindowClose,c,nt),_e.add(et.subscription),_e.schedule(a,k)}function dispatchWindowClose(a){var c=a.subscriber,b=a.window,_=a.context;_&&_.action&&_.subscription&&_.action.remove(_.subscription),c.closeWindow(b)}function windowToggle(a,c){return function(b){return b.lift(new WindowToggleOperator(a,c))}}var WindowToggleOperator=function(){function a(c,b){this.openings=c,this.closingSelector=b}return a.prototype.call=function(c,b){return b.subscribe(new WindowToggleSubscriber(c,this.openings,this.closingSelector))},a}(),WindowToggleSubscriber=function(a){__extends(c,a);function c(b,_,k){var j=a.call(this,b)||this;return j.openings=_,j.closingSelector=k,j.contexts=[],j.add(j.openSubscription=subscribeToResult(j,_,_)),j}return c.prototype._next=function(b){var _=this.contexts;if(_)for(var k=_.length,j=0;j<k;j++)_[j].window.next(b)},c.prototype._error=function(b){var _=this.contexts;if(this.contexts=null,_)for(var k=_.length,j=-1;++j<k;){var _e=_[j];_e.window.error(b),_e.subscription.unsubscribe()}a.prototype._error.call(this,b)},c.prototype._complete=function(){var b=this.contexts;if(this.contexts=null,b)for(var _=b.length,k=-1;++k<_;){var j=b[k];j.window.complete(),j.subscription.unsubscribe()}a.prototype._complete.call(this)},c.prototype._unsubscribe=function(){var b=this.contexts;if(this.contexts=null,b)for(var _=b.length,k=-1;++k<_;){var j=b[k];j.window.unsubscribe(),j.subscription.unsubscribe()}},c.prototype.notifyNext=function(b,_,k,j,_e){if(b===this.openings){var et=void 0;try{var nt=this.closingSelector;et=nt(_)}catch(St){return this.error(St)}var it=new Subject,ft=new Subscription,pt={window:it,subscription:ft};this.contexts.push(pt);var mt=subscribeToResult(this,et,pt);mt.closed?this.closeWindow(this.contexts.length-1):(mt.context=pt,ft.add(mt)),this.destination.next(it)}else this.closeWindow(this.contexts.indexOf(b))},c.prototype.notifyError=function(b){this.error(b)},c.prototype.notifyComplete=function(b){b!==this.openSubscription&&this.closeWindow(this.contexts.indexOf(b.context))},c.prototype.closeWindow=function(b){if(b!==-1){var _=this.contexts,k=_[b],j=k.window,_e=k.subscription;_.splice(b,1),j.complete(),_e.unsubscribe()}},c}(OuterSubscriber);function windowWhen(a){return function(b){return b.lift(new WindowOperator(a))}}var WindowOperator=function(){function a(c){this.closingSelector=c}return a.prototype.call=function(c,b){return b.subscribe(new WindowSubscriber(c,this.closingSelector))},a}(),WindowSubscriber=function(a){__extends(c,a);function c(b,_){var k=a.call(this,b)||this;return k.destination=b,k.closingSelector=_,k.openWindow(),k}return c.prototype.notifyNext=function(b,_,k,j,_e){this.openWindow(_e)},c.prototype.notifyError=function(b){this._error(b)},c.prototype.notifyComplete=function(b){this.openWindow(b)},c.prototype._next=function(b){this.window.next(b)},c.prototype._error=function(b){this.window.error(b),this.destination.error(b),this.unsubscribeClosingNotification()},c.prototype._complete=function(){this.window.complete(),this.destination.complete(),this.unsubscribeClosingNotification()},c.prototype.unsubscribeClosingNotification=function(){this.closingNotification&&this.closingNotification.unsubscribe()},c.prototype.openWindow=function(b){b===void 0&&(b=null),b&&(this.remove(b),b.unsubscribe());var _=this.window;_&&_.complete();var k=this.window=new Subject;this.destination.next(k);var j;try{var _e=this.closingSelector;j=_e()}catch(et){this.destination.error(et),this.window.error(et);return}this.add(this.closingNotification=subscribeToResult(this,j))},c}(OuterSubscriber);function withLatestFrom(){for(var a=[],c=0;c<arguments.length;c++)a[c]=arguments[c];return function(b){var _;typeof a[a.length-1]=="function"&&(_=a.pop());var k=a;return b.lift(new WithLatestFromOperator(k,_))}}var WithLatestFromOperator=function(){function a(c,b){this.observables=c,this.project=b}return a.prototype.call=function(c,b){return b.subscribe(new WithLatestFromSubscriber(c,this.observables,this.project))},a}(),WithLatestFromSubscriber=function(a){__extends(c,a);function c(b,_,k){var j=a.call(this,b)||this;j.observables=_,j.project=k,j.toRespond=[];var _e=_.length;j.values=new Array(_e);for(var et=0;et<_e;et++)j.toRespond.push(et);for(var et=0;et<_e;et++){var nt=_[et];j.add(subscribeToResult(j,nt,void 0,et))}return j}return c.prototype.notifyNext=function(b,_,k){this.values[k]=_;var j=this.toRespond;if(j.length>0){var _e=j.indexOf(k);_e!==-1&&j.splice(_e,1)}},c.prototype.notifyComplete=function(){},c.prototype._next=function(b){if(this.toRespond.length===0){var _=[b].concat(this.values);this.project?this._tryProject(_):this.destination.next(_)}},c.prototype._tryProject=function(b){var _;try{_=this.project.apply(this,b)}catch(k){this.destination.error(k);return}this.destination.next(_)},c}(OuterSubscriber);function zip$1(){for(var a=[],c=0;c<arguments.length;c++)a[c]=arguments[c];var b=a[a.length-1];return typeof b=="function"&&a.pop(),fromArray(a,void 0).lift(new ZipOperator(b))}var ZipOperator=function(){function a(c){this.resultSelector=c}return a.prototype.call=function(c,b){return b.subscribe(new ZipSubscriber(c,this.resultSelector))},a}(),ZipSubscriber=function(a){__extends(c,a);function c(b,_,k){var j=a.call(this,b)||this;return j.resultSelector=_,j.iterators=[],j.active=0,j.resultSelector=typeof _=="function"?_:void 0,j}return c.prototype._next=function(b){var _=this.iterators;isArray$4(b)?_.push(new StaticArrayIterator(b)):typeof b[iterator]=="function"?_.push(new StaticIterator(b[iterator]())):_.push(new ZipBufferIterator(this.destination,this,b))},c.prototype._complete=function(){var b=this.iterators,_=b.length;if(this.unsubscribe(),_===0){this.destination.complete();return}this.active=_;for(var k=0;k<_;k++){var j=b[k];if(j.stillUnsubscribed){var _e=this.destination;_e.add(j.subscribe())}else this.active--}},c.prototype.notifyInactive=function(){this.active--,this.active===0&&this.destination.complete()},c.prototype.checkIterators=function(){for(var b=this.iterators,_=b.length,k=this.destination,j=0;j<_;j++){var _e=b[j];if(typeof _e.hasValue=="function"&&!_e.hasValue())return}for(var et=!1,nt=[],j=0;j<_;j++){var _e=b[j],it=_e.next();if(_e.hasCompleted()&&(et=!0),it.done){k.complete();return}nt.push(it.value)}this.resultSelector?this._tryresultSelector(nt):k.next(nt),et&&k.complete()},c.prototype._tryresultSelector=function(b){var _;try{_=this.resultSelector.apply(this,b)}catch(k){this.destination.error(k);return}this.destination.next(_)},c}(Subscriber),StaticIterator=function(){function a(c){this.iterator=c,this.nextResult=c.next()}return a.prototype.hasValue=function(){return!0},a.prototype.next=function(){var c=this.nextResult;return this.nextResult=this.iterator.next(),c},a.prototype.hasCompleted=function(){var c=this.nextResult;return!!(c&&c.done)},a}(),StaticArrayIterator=function(){function a(c){this.array=c,this.index=0,this.length=0,this.length=c.length}return a.prototype[iterator]=function(){return this},a.prototype.next=function(c){var b=this.index++,_=this.array;return b<this.length?{value:_[b],done:!1}:{value:null,done:!0}},a.prototype.hasValue=function(){return this.array.length>this.index},a.prototype.hasCompleted=function(){return this.array.length===this.index},a}(),ZipBufferIterator=function(a){__extends(c,a);function c(b,_,k){var j=a.call(this,b)||this;return j.parent=_,j.observable=k,j.stillUnsubscribed=!0,j.buffer=[],j.isComplete=!1,j}return c.prototype[iterator]=function(){return this},c.prototype.next=function(){var b=this.buffer;return b.length===0&&this.isComplete?{value:null,done:!0}:{value:b.shift(),done:!1}},c.prototype.hasValue=function(){return this.buffer.length>0},c.prototype.hasCompleted=function(){return this.buffer.length===0&&this.isComplete},c.prototype.notifyComplete=function(){this.buffer.length>0?(this.isComplete=!0,this.parent.notifyInactive()):this.destination.complete()},c.prototype.notifyNext=function(b){this.buffer.push(b),this.parent.checkIterators()},c.prototype.subscribe=function(){return innerSubscribe(this.observable,new SimpleInnerSubscriber(this))},c}(SimpleOuterSubscriber);function zip(){for(var a=[],c=0;c<arguments.length;c++)a[c]=arguments[c];return function(_){return _.lift.call(zip$1.apply(void 0,[_].concat(a)))}}function zipAll(a){return function(c){return c.lift(new ZipOperator(a))}}const operators=Object.freeze(Object.defineProperty({__proto__:null,audit,auditTime,buffer:buffer$1,bufferCount,bufferTime,bufferToggle,bufferWhen,catchError,combineAll,combineLatest,concat,concatAll,concatMap,concatMapTo,count,debounce,debounceTime,defaultIfEmpty,delay,delayWhen,dematerialize,distinct,distinctUntilChanged,distinctUntilKeyChanged,elementAt,endWith,every,exhaust,exhaustMap,expand,filter,finalize,find:find$1,findIndex,first,flatMap,groupBy,ignoreElements,isEmpty,last,map,mapTo,materialize,max:max$1,merge:merge$1,mergeAll,mergeMap,mergeMapTo,mergeScan,min,multicast,observeOn,onErrorResumeNext,pairwise,partition,pluck,publish,publishBehavior,publishLast,publishReplay,race,reduce,refCount,repeat,repeatWhen,retry,retryWhen,sample,sampleTime,scan,sequenceEqual,share,shareReplay,single,skip,skipLast,skipUntil,skipWhile,startWith,subscribeOn,switchAll,switchMap,switchMapTo,take,takeLast,takeUntil,takeWhile,tap,throttle,throttleTime,throwIfEmpty,timeInterval,timeout,timeoutWith,timestamp:timestamp$1,toArray,window:window$1,windowCount,windowTime,windowToggle,windowWhen,withLatestFrom,zip,zipAll},Symbol.toStringTag,{value:"Module"})),require$$2=getAugmentedNamespace(operators);var struct={};(function(a){var c=commonjsGlobal$1&&commonjsGlobal$1.__createBinding||(Object.create?function(ht,Et,At,Bt){Bt===void 0&&(Bt=At),Object.defineProperty(ht,Bt,{enumerable:!0,get:function(){return Et[At]}})}:function(ht,Et,At,Bt){Bt===void 0&&(Bt=At),ht[Bt]=Et[At]}),b=commonjsGlobal$1&&commonjsGlobal$1.__setModuleDefault||(Object.create?function(ht,Et){Object.defineProperty(ht,"default",{enumerable:!0,value:Et})}:function(ht,Et){ht.default=Et}),_=commonjsGlobal$1&&commonjsGlobal$1.__importStar||function(ht){if(ht&&ht.__esModule)return ht;var Et={};if(ht!=null)for(var At in ht)At!=="default"&&Object.hasOwnProperty.call(ht,At)&&c(Et,ht,At);return b(Et,ht),Et},k=commonjsGlobal$1&&commonjsGlobal$1.__importDefault||function(ht){return ht&&ht.__esModule?ht:{default:ht}};Object.defineProperty(a,"__esModule",{value:!0}),a.ListValue=a.Value=a.Struct_FieldsEntry=a.Struct=a.nullValueToNumber=a.nullValueToJSON=a.nullValueFromJSON=a.NullValue=a.protobufPackage=void 0;const j=k(umdExports),_e=_(minimal);a.protobufPackage="google.protobuf";var et;(function(ht){ht.NULL_VALUE="NULL_VALUE"})(et=a.NullValue||(a.NullValue={}));function nt(ht){switch(ht){case 0:case"NULL_VALUE":return et.NULL_VALUE;default:throw new _t.Error("Unrecognized enum value "+ht+" for enum NullValue")}}a.nullValueFromJSON=nt;function it(ht){switch(ht){case et.NULL_VALUE:return"NULL_VALUE";default:return"UNKNOWN"}}a.nullValueToJSON=it;function ft(ht){switch(ht){case et.NULL_VALUE:return 0;default:return 0}}a.nullValueToNumber=ft;function pt(){return{fields:{}}}a.Struct={encode(ht,Et=_e.Writer.create()){return Object.entries(ht.fields).forEach(([At,Bt])=>{Bt!==void 0&&a.Struct_FieldsEntry.encode({key:At,value:Bt},Et.uint32(10).fork()).ldelim()}),Et},decode(ht,Et){const At=ht instanceof _e.Reader?ht:new _e.Reader(ht);let Bt=Et===void 0?At.len:At.pos+Et;const qt=pt();for(;At.pos<Bt;){const zt=At.uint32();switch(zt>>>3){case 1:const Ht=a.Struct_FieldsEntry.decode(At,At.uint32());Ht.value!==void 0&&(qt.fields[Ht.key]=Ht.value);break;default:At.skipType(zt&7);break}}return qt},fromJSON(ht){return{fields:Tt(ht.fields)?Object.entries(ht.fields).reduce((Et,[At,Bt])=>(Et[At]=Bt,Et),{}):{}}},toJSON(ht){const Et={};return Et.fields={},ht.fields&&Object.entries(ht.fields).forEach(([At,Bt])=>{Et.fields[At]=Bt}),Et},fromPartial(ht){var Et;const At=pt();return At.fields=Object.entries((Et=ht.fields)!==null&&Et!==void 0?Et:{}).reduce((Bt,[qt,zt])=>(zt!==void 0&&(Bt[qt]=zt),Bt),{}),At},wrap(ht){const Et=pt();return ht!==void 0&&Object.keys(ht).forEach(At=>{Et.fields[At]=ht[At]}),Et},unwrap(ht){const Et={};return Object.keys(ht.fields).forEach(At=>{Et[At]=ht.fields[At]}),Et}};function mt(){return{key:"",value:void 0}}a.Struct_FieldsEntry={encode(ht,Et=_e.Writer.create()){return ht.key!==""&&Et.uint32(10).string(ht.key),ht.value!==void 0&&a.Value.encode(a.Value.wrap(ht.value),Et.uint32(18).fork()).ldelim(),Et},decode(ht,Et){const At=ht instanceof _e.Reader?ht:new _e.Reader(ht);let Bt=Et===void 0?At.len:At.pos+Et;const qt=mt();for(;At.pos<Bt;){const zt=At.uint32();switch(zt>>>3){case 1:qt.key=At.string();break;case 2:qt.value=a.Value.unwrap(a.Value.decode(At,At.uint32()));break;default:At.skipType(zt&7);break}}return qt},fromJSON(ht){return{key:gt(ht.key)?String(ht.key):"",value:gt(ht==null?void 0:ht.value)?ht.value:void 0}},toJSON(ht){const Et={};return ht.key!==void 0&&(Et.key=ht.key),ht.value!==void 0&&(Et.value=ht.value),Et},fromPartial(ht){var Et,At;const Bt=mt();return Bt.key=(Et=ht.key)!==null&&Et!==void 0?Et:"",Bt.value=(At=ht.value)!==null&&At!==void 0?At:void 0,Bt}};function St(){return{nullValue:void 0,numberValue:void 0,stringValue:void 0,boolValue:void 0,structValue:void 0,listValue:void 0}}a.Value={encode(ht,Et=_e.Writer.create()){return ht.nullValue!==void 0&&Et.uint32(8).int32(ft(ht.nullValue)),ht.numberValue!==void 0&&Et.uint32(17).double(ht.numberValue),ht.stringValue!==void 0&&Et.uint32(26).string(ht.stringValue),ht.boolValue!==void 0&&Et.uint32(32).bool(ht.boolValue),ht.structValue!==void 0&&a.Struct.encode(a.Struct.wrap(ht.structValue),Et.uint32(42).fork()).ldelim(),ht.listValue!==void 0&&a.ListValue.encode(a.ListValue.wrap(ht.listValue),Et.uint32(50).fork()).ldelim(),Et},decode(ht,Et){const At=ht instanceof _e.Reader?ht:new _e.Reader(ht);let Bt=Et===void 0?At.len:At.pos+Et;const qt=St();for(;At.pos<Bt;){const zt=At.uint32();switch(zt>>>3){case 1:qt.nullValue=nt(At.int32());break;case 2:qt.numberValue=At.double();break;case 3:qt.stringValue=At.string();break;case 4:qt.boolValue=At.bool();break;case 5:qt.structValue=a.Struct.unwrap(a.Struct.decode(At,At.uint32()));break;case 6:qt.listValue=a.ListValue.unwrap(a.ListValue.decode(At,At.uint32()));break;default:At.skipType(zt&7);break}}return qt},fromJSON(ht){return{nullValue:gt(ht.nullValue)?nt(ht.nullValue):void 0,numberValue:gt(ht.numberValue)?Number(ht.numberValue):void 0,stringValue:gt(ht.stringValue)?String(ht.stringValue):void 0,boolValue:gt(ht.boolValue)?!!ht.boolValue:void 0,structValue:Tt(ht.structValue)?ht.structValue:void 0,listValue:Array.isArray(ht.listValue)?[...ht.listValue]:void 0}},toJSON(ht){const Et={};return ht.nullValue!==void 0&&(Et.nullValue=ht.nullValue!==void 0?it(ht.nullValue):void 0),ht.numberValue!==void 0&&(Et.numberValue=ht.numberValue),ht.stringValue!==void 0&&(Et.stringValue=ht.stringValue),ht.boolValue!==void 0&&(Et.boolValue=ht.boolValue),ht.structValue!==void 0&&(Et.structValue=ht.structValue),ht.listValue!==void 0&&(Et.listValue=ht.listValue),Et},fromPartial(ht){var Et,At,Bt,qt,zt,Ht;const ct=St();return ct.nullValue=(Et=ht.nullValue)!==null&&Et!==void 0?Et:void 0,ct.numberValue=(At=ht.numberValue)!==null&&At!==void 0?At:void 0,ct.stringValue=(Bt=ht.stringValue)!==null&&Bt!==void 0?Bt:void 0,ct.boolValue=(qt=ht.boolValue)!==null&&qt!==void 0?qt:void 0,ct.structValue=(zt=ht.structValue)!==null&&zt!==void 0?zt:void 0,ct.listValue=(Ht=ht.listValue)!==null&&Ht!==void 0?Ht:void 0,ct},wrap(ht){const Et=St();if(ht===null)Et.nullValue=et.NULL_VALUE;else if(typeof ht=="boolean")Et.boolValue=ht;else if(typeof ht=="number")Et.numberValue=ht;else if(typeof ht=="string")Et.stringValue=ht;else if(Array.isArray(ht))Et.listValue=ht;else if(typeof ht=="object")Et.structValue=ht;else if(typeof ht<"u")throw new Error("Unsupported any value type: "+typeof ht);return Et},unwrap(ht){if((ht==null?void 0:ht.stringValue)!==void 0)return ht.stringValue;if((ht==null?void 0:ht.numberValue)!==void 0)return ht.numberValue;if((ht==null?void 0:ht.boolValue)!==void 0)return ht.boolValue;if((ht==null?void 0:ht.structValue)!==void 0)return ht.structValue;if((ht==null?void 0:ht.listValue)!==void 0)return ht.listValue;if((ht==null?void 0:ht.nullValue)!==void 0)return null}};function yt(){return{values:[]}}a.ListValue={encode(ht,Et=_e.Writer.create()){for(const At of ht.values)a.Value.encode(a.Value.wrap(At),Et.uint32(10).fork()).ldelim();return Et},decode(ht,Et){const At=ht instanceof _e.Reader?ht:new _e.Reader(ht);let Bt=Et===void 0?At.len:At.pos+Et;const qt=yt();for(;At.pos<Bt;){const zt=At.uint32();switch(zt>>>3){case 1:qt.values.push(a.Value.unwrap(a.Value.decode(At,At.uint32())));break;default:At.skipType(zt&7);break}}return qt},fromJSON(ht){return{values:Array.isArray(ht==null?void 0:ht.values)?[...ht.values]:[]}},toJSON(ht){const Et={};return ht.values?Et.values=ht.values.map(At=>At):Et.values=[],Et},fromPartial(ht){var Et;const At=yt();return At.values=((Et=ht.values)===null||Et===void 0?void 0:Et.map(Bt=>Bt))||[],At},wrap(ht){const Et=yt();return Et.values=ht??[],Et},unwrap(ht){return ht.values}};var _t=(()=>{if(typeof _t<"u")return _t;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof commonjsGlobal$1<"u")return commonjsGlobal$1;throw"Unable to locate global object"})();_e.util.Long!==j.default&&(_e.util.Long=j.default,_e.configure());function Tt(ht){return typeof ht=="object"&&ht!==null}function gt(ht){return ht!=null}})(struct);(function(a){var c=commonjsGlobal$1&&commonjsGlobal$1.__createBinding||(Object.create?function(ct,dt,lt,kt){kt===void 0&&(kt=lt),Object.defineProperty(ct,kt,{enumerable:!0,get:function(){return dt[lt]}})}:function(ct,dt,lt,kt){kt===void 0&&(kt=lt),ct[kt]=dt[lt]}),b=commonjsGlobal$1&&commonjsGlobal$1.__setModuleDefault||(Object.create?function(ct,dt){Object.defineProperty(ct,"default",{enumerable:!0,value:dt})}:function(ct,dt){ct.default=dt}),_=commonjsGlobal$1&&commonjsGlobal$1.__importStar||function(ct){if(ct&&ct.__esModule)return ct;var dt={};if(ct!=null)for(var lt in ct)lt!=="default"&&Object.hasOwnProperty.call(ct,lt)&&c(dt,ct,lt);return b(dt,ct),dt},k=commonjsGlobal$1&&commonjsGlobal$1.__importDefault||function(ct){return ct&&ct.__esModule?ct:{default:ct}};Object.defineProperty(a,"__esModule",{value:!0}),a.EventServiceDefinition=a.EventServiceClientImpl=a.EventsStreamResponse=a.EventsStreamRequest=a.EventsStreamReconnectRequest=a.EventsStreamError=a.SubscribePayload=a.PublishEventResponse=a.PublishEventRequest=a.EventTarget=a.eventsStreamMessageTypeToNumber=a.eventsStreamMessageTypeToJSON=a.eventsStreamMessageTypeFromJSON=a.EventsStreamMessageType=a.protobufPackage=void 0;const j=k(umdExports),_e=_(minimal),et=require$$2,nt=struct;a.protobufPackage="apis.event.v2";var it;(function(ct){ct.EVENTS_STREAM_MESSAGE_TYPE_UNSPECIFIED="EVENTS_STREAM_MESSAGE_TYPE_UNSPECIFIED",ct.EVENTS_STREAM_MESSAGE_TYPE_PING="EVENTS_STREAM_MESSAGE_TYPE_PING",ct.EVENTS_STREAM_MESSAGE_TYPE_ERROR="EVENTS_STREAM_MESSAGE_TYPE_ERROR",ct.EVENTS_STREAM_MESSAGE_TYPE_SUBSCRIBED="EVENTS_STREAM_MESSAGE_TYPE_SUBSCRIBED",ct.EVENTS_STREAM_MESSAGE_TYPE_UNSUBSCRIBED="EVENTS_STREAM_MESSAGE_TYPE_UNSUBSCRIBED",ct.EVENTS_STREAM_MESSAGE_TYPE_PUBLISHED="EVENTS_STREAM_MESSAGE_TYPE_PUBLISHED"})(it=a.EventsStreamMessageType||(a.EventsStreamMessageType={}));function ft(ct){switch(ct){case 0:case"EVENTS_STREAM_MESSAGE_TYPE_UNSPECIFIED":return it.EVENTS_STREAM_MESSAGE_TYPE_UNSPECIFIED;case 1:case"EVENTS_STREAM_MESSAGE_TYPE_PING":return it.EVENTS_STREAM_MESSAGE_TYPE_PING;case 2:case"EVENTS_STREAM_MESSAGE_TYPE_ERROR":return it.EVENTS_STREAM_MESSAGE_TYPE_ERROR;case 3:case"EVENTS_STREAM_MESSAGE_TYPE_SUBSCRIBED":return it.EVENTS_STREAM_MESSAGE_TYPE_SUBSCRIBED;case 4:case"EVENTS_STREAM_MESSAGE_TYPE_UNSUBSCRIBED":return it.EVENTS_STREAM_MESSAGE_TYPE_UNSUBSCRIBED;case 5:case"EVENTS_STREAM_MESSAGE_TYPE_PUBLISHED":return it.EVENTS_STREAM_MESSAGE_TYPE_PUBLISHED;default:throw new qt.Error("Unrecognized enum value "+ct+" for enum EventsStreamMessageType")}}a.eventsStreamMessageTypeFromJSON=ft;function pt(ct){switch(ct){case it.EVENTS_STREAM_MESSAGE_TYPE_UNSPECIFIED:return"EVENTS_STREAM_MESSAGE_TYPE_UNSPECIFIED";case it.EVENTS_STREAM_MESSAGE_TYPE_PING:return"EVENTS_STREAM_MESSAGE_TYPE_PING";case it.EVENTS_STREAM_MESSAGE_TYPE_ERROR:return"EVENTS_STREAM_MESSAGE_TYPE_ERROR";case it.EVENTS_STREAM_MESSAGE_TYPE_SUBSCRIBED:return"EVENTS_STREAM_MESSAGE_TYPE_SUBSCRIBED";case it.EVENTS_STREAM_MESSAGE_TYPE_UNSUBSCRIBED:return"EVENTS_STREAM_MESSAGE_TYPE_UNSUBSCRIBED";case it.EVENTS_STREAM_MESSAGE_TYPE_PUBLISHED:return"EVENTS_STREAM_MESSAGE_TYPE_PUBLISHED";default:return"UNKNOWN"}}a.eventsStreamMessageTypeToJSON=pt;function mt(ct){switch(ct){case it.EVENTS_STREAM_MESSAGE_TYPE_UNSPECIFIED:return 0;case it.EVENTS_STREAM_MESSAGE_TYPE_PING:return 1;case it.EVENTS_STREAM_MESSAGE_TYPE_ERROR:return 2;case it.EVENTS_STREAM_MESSAGE_TYPE_SUBSCRIBED:return 3;case it.EVENTS_STREAM_MESSAGE_TYPE_UNSUBSCRIBED:return 4;case it.EVENTS_STREAM_MESSAGE_TYPE_PUBLISHED:return 5;default:return 0}}a.eventsStreamMessageTypeToNumber=mt;function St(){return{collectionId:void 0,projectId:void 0,layoutId:void 0}}a.EventTarget={encode(ct,dt=_e.Writer.create()){return ct.collectionId!==void 0&&dt.uint32(42).string(ct.collectionId),ct.projectId!==void 0&&dt.uint32(34).string(ct.projectId),ct.layoutId!==void 0&&dt.uint32(10).string(ct.layoutId),dt},decode(ct,dt){const lt=ct instanceof _e.Reader?ct:new _e.Reader(ct);let kt=dt===void 0?lt.len:lt.pos+dt;const Lt=St();for(;lt.pos<kt;){const Jt=lt.uint32();switch(Jt>>>3){case 5:Lt.collectionId=lt.string();break;case 4:Lt.projectId=lt.string();break;case 1:Lt.layoutId=lt.string();break;default:lt.skipType(Jt&7);break}}return Lt},fromJSON(ct){return{collectionId:Ht(ct.collectionId)?String(ct.collectionId):void 0,projectId:Ht(ct.projectId)?String(ct.projectId):void 0,layoutId:Ht(ct.layoutId)?String(ct.layoutId):void 0}},toJSON(ct){const dt={};return ct.collectionId!==void 0&&(dt.collectionId=ct.collectionId),ct.projectId!==void 0&&(dt.projectId=ct.projectId),ct.layoutId!==void 0&&(dt.layoutId=ct.layoutId),dt},fromPartial(ct){var dt,lt,kt;const Lt=St();return Lt.collectionId=(dt=ct.collectionId)!==null&&dt!==void 0?dt:void 0,Lt.projectId=(lt=ct.projectId)!==null&&lt!==void 0?lt:void 0,Lt.layoutId=(kt=ct.layoutId)!==null&&kt!==void 0?kt:void 0,Lt}};function yt(){return{name:"",payload:void 0,requestMetadata:void 0,target:void 0}}a.PublishEventRequest={encode(ct,dt=_e.Writer.create()){return ct.name!==""&&dt.uint32(10).string(ct.name),ct.payload!==void 0&&nt.Struct.encode(nt.Struct.wrap(ct.payload),dt.uint32(18).fork()).ldelim(),ct.requestMetadata!==void 0&&nt.Value.encode(nt.Value.wrap(ct.requestMetadata),dt.uint32(34).fork()).ldelim(),ct.target!==void 0&&a.EventTarget.encode(ct.target,dt.uint32(26).fork()).ldelim(),dt},decode(ct,dt){const lt=ct instanceof _e.Reader?ct:new _e.Reader(ct);let kt=dt===void 0?lt.len:lt.pos+dt;const Lt=yt();for(;lt.pos<kt;){const Jt=lt.uint32();switch(Jt>>>3){case 1:Lt.name=lt.string();break;case 2:Lt.payload=nt.Struct.unwrap(nt.Struct.decode(lt,lt.uint32()));break;case 4:Lt.requestMetadata=nt.Value.unwrap(nt.Value.decode(lt,lt.uint32()));break;case 3:Lt.target=a.EventTarget.decode(lt,lt.uint32());break;default:lt.skipType(Jt&7);break}}return Lt},fromJSON(ct){return{name:Ht(ct.name)?String(ct.name):"",payload:zt(ct.payload)?ct.payload:void 0,requestMetadata:Ht(ct==null?void 0:ct.requestMetadata)?ct.requestMetadata:void 0,target:Ht(ct.target)?a.EventTarget.fromJSON(ct.target):void 0}},toJSON(ct){const dt={};return ct.name!==void 0&&(dt.name=ct.name),ct.payload!==void 0&&(dt.payload=ct.payload),ct.requestMetadata!==void 0&&(dt.requestMetadata=ct.requestMetadata),ct.target!==void 0&&(dt.target=ct.target?a.EventTarget.toJSON(ct.target):void 0),dt},fromPartial(ct){var dt,lt,kt;const Lt=yt();return Lt.name=(dt=ct.name)!==null&&dt!==void 0?dt:"",Lt.payload=(lt=ct.payload)!==null&&lt!==void 0?lt:void 0,Lt.requestMetadata=(kt=ct.requestMetadata)!==null&&kt!==void 0?kt:void 0,Lt.target=ct.target!==void 0&&ct.target!==null?a.EventTarget.fromPartial(ct.target):void 0,Lt}};function _t(){return{name:"",payload:void 0,target:void 0,requestMetadata:void 0,id:""}}a.PublishEventResponse={encode(ct,dt=_e.Writer.create()){return ct.name!==""&&dt.uint32(10).string(ct.name),ct.payload!==void 0&&nt.Struct.encode(nt.Struct.wrap(ct.payload),dt.uint32(18).fork()).ldelim(),ct.target!==void 0&&a.EventTarget.encode(ct.target,dt.uint32(26).fork()).ldelim(),ct.requestMetadata!==void 0&&nt.Value.encode(nt.Value.wrap(ct.requestMetadata),dt.uint32(34).fork()).ldelim(),ct.id!==""&&dt.uint32(42).string(ct.id),dt},decode(ct,dt){const lt=ct instanceof _e.Reader?ct:new _e.Reader(ct);let kt=dt===void 0?lt.len:lt.pos+dt;const Lt=_t();for(;lt.pos<kt;){const Jt=lt.uint32();switch(Jt>>>3){case 1:Lt.name=lt.string();break;case 2:Lt.payload=nt.Struct.unwrap(nt.Struct.decode(lt,lt.uint32()));break;case 3:Lt.target=a.EventTarget.decode(lt,lt.uint32());break;case 4:Lt.requestMetadata=nt.Value.unwrap(nt.Value.decode(lt,lt.uint32()));break;case 5:Lt.id=lt.string();break;default:lt.skipType(Jt&7);break}}return Lt},fromJSON(ct){return{name:Ht(ct.name)?String(ct.name):"",payload:zt(ct.payload)?ct.payload:void 0,target:Ht(ct.target)?a.EventTarget.fromJSON(ct.target):void 0,requestMetadata:Ht(ct==null?void 0:ct.requestMetadata)?ct.requestMetadata:void 0,id:Ht(ct.id)?String(ct.id):""}},toJSON(ct){const dt={};return ct.name!==void 0&&(dt.name=ct.name),ct.payload!==void 0&&(dt.payload=ct.payload),ct.target!==void 0&&(dt.target=ct.target?a.EventTarget.toJSON(ct.target):void 0),ct.requestMetadata!==void 0&&(dt.requestMetadata=ct.requestMetadata),ct.id!==void 0&&(dt.id=ct.id),dt},fromPartial(ct){var dt,lt,kt,Lt;const Jt=_t();return Jt.name=(dt=ct.name)!==null&&dt!==void 0?dt:"",Jt.payload=(lt=ct.payload)!==null&&lt!==void 0?lt:void 0,Jt.target=ct.target!==void 0&&ct.target!==null?a.EventTarget.fromPartial(ct.target):void 0,Jt.requestMetadata=(kt=ct.requestMetadata)!==null&&kt!==void 0?kt:void 0,Jt.id=(Lt=ct.id)!==null&&Lt!==void 0?Lt:"",Jt}};function Tt(){return{name:"",target:void 0}}a.SubscribePayload={encode(ct,dt=_e.Writer.create()){return ct.name!==""&&dt.uint32(10).string(ct.name),ct.target!==void 0&&a.EventTarget.encode(ct.target,dt.uint32(18).fork()).ldelim(),dt},decode(ct,dt){const lt=ct instanceof _e.Reader?ct:new _e.Reader(ct);let kt=dt===void 0?lt.len:lt.pos+dt;const Lt=Tt();for(;lt.pos<kt;){const Jt=lt.uint32();switch(Jt>>>3){case 1:Lt.name=lt.string();break;case 2:Lt.target=a.EventTarget.decode(lt,lt.uint32());break;default:lt.skipType(Jt&7);break}}return Lt},fromJSON(ct){return{name:Ht(ct.name)?String(ct.name):"",target:Ht(ct.target)?a.EventTarget.fromJSON(ct.target):void 0}},toJSON(ct){const dt={};return ct.name!==void 0&&(dt.name=ct.name),ct.target!==void 0&&(dt.target=ct.target?a.EventTarget.toJSON(ct.target):void 0),dt},fromPartial(ct){var dt;const lt=Tt();return lt.name=(dt=ct.name)!==null&&dt!==void 0?dt:"",lt.target=ct.target!==void 0&&ct.target!==null?a.EventTarget.fromPartial(ct.target):void 0,lt}};function gt(){return{code:0,message:""}}a.EventsStreamError={encode(ct,dt=_e.Writer.create()){return ct.code!==0&&dt.uint32(8).int32(ct.code),ct.message!==""&&dt.uint32(18).string(ct.message),dt},decode(ct,dt){const lt=ct instanceof _e.Reader?ct:new _e.Reader(ct);let kt=dt===void 0?lt.len:lt.pos+dt;const Lt=gt();for(;lt.pos<kt;){const Jt=lt.uint32();switch(Jt>>>3){case 1:Lt.code=lt.int32();break;case 2:Lt.message=lt.string();break;default:lt.skipType(Jt&7);break}}return Lt},fromJSON(ct){return{code:Ht(ct.code)?Number(ct.code):0,message:Ht(ct.message)?String(ct.message):""}},toJSON(ct){const dt={};return ct.code!==void 0&&(dt.code=Math.round(ct.code)),ct.message!==void 0&&(dt.message=ct.message),dt},fromPartial(ct){var dt,lt;const kt=gt();return kt.code=(dt=ct.code)!==null&&dt!==void 0?dt:0,kt.message=(lt=ct.message)!==null&&lt!==void 0?lt:"",kt}};function ht(){return{reauthenticate:!1,beforeTimestamp:""}}a.EventsStreamReconnectRequest={encode(ct,dt=_e.Writer.create()){return ct.reauthenticate===!0&&dt.uint32(8).bool(ct.reauthenticate),ct.beforeTimestamp!==""&&dt.uint32(18).string(ct.beforeTimestamp),dt},decode(ct,dt){const lt=ct instanceof _e.Reader?ct:new _e.Reader(ct);let kt=dt===void 0?lt.len:lt.pos+dt;const Lt=ht();for(;lt.pos<kt;){const Jt=lt.uint32();switch(Jt>>>3){case 1:Lt.reauthenticate=lt.bool();break;case 2:Lt.beforeTimestamp=lt.string();break;default:lt.skipType(Jt&7);break}}return Lt},fromJSON(ct){return{reauthenticate:Ht(ct.reauthenticate)?!!ct.reauthenticate:!1,beforeTimestamp:Ht(ct.beforeTimestamp)?String(ct.beforeTimestamp):""}},toJSON(ct){const dt={};return ct.reauthenticate!==void 0&&(dt.reauthenticate=ct.reauthenticate),ct.beforeTimestamp!==void 0&&(dt.beforeTimestamp=ct.beforeTimestamp),dt},fromPartial(ct){var dt,lt;const kt=ht();return kt.reauthenticate=(dt=ct.reauthenticate)!==null&&dt!==void 0?dt:!1,kt.beforeTimestamp=(lt=ct.beforeTimestamp)!==null&&lt!==void 0?lt:"",kt}};function Et(){return{correlationId:void 0,subscribe:void 0,unsubscribe:void 0,publish:void 0,ping:void 0}}a.EventsStreamRequest={encode(ct,dt=_e.Writer.create()){return ct.correlationId!==void 0&&dt.uint32(10).string(ct.correlationId),ct.subscribe!==void 0&&a.SubscribePayload.encode(ct.subscribe,dt.uint32(802).fork()).ldelim(),ct.unsubscribe!==void 0&&a.SubscribePayload.encode(ct.unsubscribe,dt.uint32(810).fork()).ldelim(),ct.publish!==void 0&&a.PublishEventRequest.encode(ct.publish,dt.uint32(818).fork()).ldelim(),ct.ping!==void 0&&dt.uint32(826).string(ct.ping),dt},decode(ct,dt){const lt=ct instanceof _e.Reader?ct:new _e.Reader(ct);let kt=dt===void 0?lt.len:lt.pos+dt;const Lt=Et();for(;lt.pos<kt;){const Jt=lt.uint32();switch(Jt>>>3){case 1:Lt.correlationId=lt.string();break;case 100:Lt.subscribe=a.SubscribePayload.decode(lt,lt.uint32());break;case 101:Lt.unsubscribe=a.SubscribePayload.decode(lt,lt.uint32());break;case 102:Lt.publish=a.PublishEventRequest.decode(lt,lt.uint32());break;case 103:Lt.ping=lt.string();break;default:lt.skipType(Jt&7);break}}return Lt},fromJSON(ct){return{correlationId:Ht(ct.correlationId)?String(ct.correlationId):void 0,subscribe:Ht(ct.subscribe)?a.SubscribePayload.fromJSON(ct.subscribe):void 0,unsubscribe:Ht(ct.unsubscribe)?a.SubscribePayload.fromJSON(ct.unsubscribe):void 0,publish:Ht(ct.publish)?a.PublishEventRequest.fromJSON(ct.publish):void 0,ping:Ht(ct.ping)?String(ct.ping):void 0}},toJSON(ct){const dt={};return ct.correlationId!==void 0&&(dt.correlationId=ct.correlationId),ct.subscribe!==void 0&&(dt.subscribe=ct.subscribe?a.SubscribePayload.toJSON(ct.subscribe):void 0),ct.unsubscribe!==void 0&&(dt.unsubscribe=ct.unsubscribe?a.SubscribePayload.toJSON(ct.unsubscribe):void 0),ct.publish!==void 0&&(dt.publish=ct.publish?a.PublishEventRequest.toJSON(ct.publish):void 0),ct.ping!==void 0&&(dt.ping=ct.ping),dt},fromPartial(ct){var dt,lt;const kt=Et();return kt.correlationId=(dt=ct.correlationId)!==null&&dt!==void 0?dt:void 0,kt.subscribe=ct.subscribe!==void 0&&ct.subscribe!==null?a.SubscribePayload.fromPartial(ct.subscribe):void 0,kt.unsubscribe=ct.unsubscribe!==void 0&&ct.unsubscribe!==null?a.SubscribePayload.fromPartial(ct.unsubscribe):void 0,kt.publish=ct.publish!==void 0&&ct.publish!==null?a.PublishEventRequest.fromPartial(ct.publish):void 0,kt.ping=(lt=ct.ping)!==null&&lt!==void 0?lt:void 0,kt}};function At(){return{correlationId:void 0,sessionId:void 0,event:void 0,pong:void 0,error:void 0,subscribed:void 0,unsubscribed:void 0,published:void 0,reconnectBefore:void 0}}a.EventsStreamResponse={encode(ct,dt=_e.Writer.create()){return ct.correlationId!==void 0&&dt.uint32(18).string(ct.correlationId),ct.sessionId!==void 0&&dt.uint32(26).string(ct.sessionId),ct.event!==void 0&&a.PublishEventResponse.encode(ct.event,dt.uint32(802).fork()).ldelim(),ct.pong!==void 0&&dt.uint32(1602).string(ct.pong),ct.error!==void 0&&a.EventsStreamError.encode(ct.error,dt.uint32(1610).fork()).ldelim(),ct.subscribed!==void 0&&a.SubscribePayload.encode(ct.subscribed,dt.uint32(1618).fork()).ldelim(),ct.unsubscribed!==void 0&&a.SubscribePayload.encode(ct.unsubscribed,dt.uint32(1626).fork()).ldelim(),ct.published!==void 0&&a.PublishEventResponse.encode(ct.published,dt.uint32(1634).fork()).ldelim(),ct.reconnectBefore!==void 0&&a.EventsStreamReconnectRequest.encode(ct.reconnectBefore,dt.uint32(1642).fork()).ldelim(),dt},decode(ct,dt){const lt=ct instanceof _e.Reader?ct:new _e.Reader(ct);let kt=dt===void 0?lt.len:lt.pos+dt;const Lt=At();for(;lt.pos<kt;){const Jt=lt.uint32();switch(Jt>>>3){case 2:Lt.correlationId=lt.string();break;case 3:Lt.sessionId=lt.string();break;case 100:Lt.event=a.PublishEventResponse.decode(lt,lt.uint32());break;case 200:Lt.pong=lt.string();break;case 201:Lt.error=a.EventsStreamError.decode(lt,lt.uint32());break;case 202:Lt.subscribed=a.SubscribePayload.decode(lt,lt.uint32());break;case 203:Lt.unsubscribed=a.SubscribePayload.decode(lt,lt.uint32());break;case 204:Lt.published=a.PublishEventResponse.decode(lt,lt.uint32());break;case 205:Lt.reconnectBefore=a.EventsStreamReconnectRequest.decode(lt,lt.uint32());break;default:lt.skipType(Jt&7);break}}return Lt},fromJSON(ct){return{correlationId:Ht(ct.correlationId)?String(ct.correlationId):void 0,sessionId:Ht(ct.sessionId)?String(ct.sessionId):void 0,event:Ht(ct.event)?a.PublishEventResponse.fromJSON(ct.event):void 0,pong:Ht(ct.pong)?String(ct.pong):void 0,error:Ht(ct.error)?a.EventsStreamError.fromJSON(ct.error):void 0,subscribed:Ht(ct.subscribed)?a.SubscribePayload.fromJSON(ct.subscribed):void 0,unsubscribed:Ht(ct.unsubscribed)?a.SubscribePayload.fromJSON(ct.unsubscribed):void 0,published:Ht(ct.published)?a.PublishEventResponse.fromJSON(ct.published):void 0,reconnectBefore:Ht(ct.reconnectBefore)?a.EventsStreamReconnectRequest.fromJSON(ct.reconnectBefore):void 0}},toJSON(ct){const dt={};return ct.correlationId!==void 0&&(dt.correlationId=ct.correlationId),ct.sessionId!==void 0&&(dt.sessionId=ct.sessionId),ct.event!==void 0&&(dt.event=ct.event?a.PublishEventResponse.toJSON(ct.event):void 0),ct.pong!==void 0&&(dt.pong=ct.pong),ct.error!==void 0&&(dt.error=ct.error?a.EventsStreamError.toJSON(ct.error):void 0),ct.subscribed!==void 0&&(dt.subscribed=ct.subscribed?a.SubscribePayload.toJSON(ct.subscribed):void 0),ct.unsubscribed!==void 0&&(dt.unsubscribed=ct.unsubscribed?a.SubscribePayload.toJSON(ct.unsubscribed):void 0),ct.published!==void 0&&(dt.published=ct.published?a.PublishEventResponse.toJSON(ct.published):void 0),ct.reconnectBefore!==void 0&&(dt.reconnectBefore=ct.reconnectBefore?a.EventsStreamReconnectRequest.toJSON(ct.reconnectBefore):void 0),dt},fromPartial(ct){var dt,lt,kt;const Lt=At();return Lt.correlationId=(dt=ct.correlationId)!==null&&dt!==void 0?dt:void 0,Lt.sessionId=(lt=ct.sessionId)!==null&&lt!==void 0?lt:void 0,Lt.event=ct.event!==void 0&&ct.event!==null?a.PublishEventResponse.fromPartial(ct.event):void 0,Lt.pong=(kt=ct.pong)!==null&&kt!==void 0?kt:void 0,Lt.error=ct.error!==void 0&&ct.error!==null?a.EventsStreamError.fromPartial(ct.error):void 0,Lt.subscribed=ct.subscribed!==void 0&&ct.subscribed!==null?a.SubscribePayload.fromPartial(ct.subscribed):void 0,Lt.unsubscribed=ct.unsubscribed!==void 0&&ct.unsubscribed!==null?a.SubscribePayload.fromPartial(ct.unsubscribed):void 0,Lt.published=ct.published!==void 0&&ct.published!==null?a.PublishEventResponse.fromPartial(ct.published):void 0,Lt.reconnectBefore=ct.reconnectBefore!==void 0&&ct.reconnectBefore!==null?a.EventsStreamReconnectRequest.fromPartial(ct.reconnectBefore):void 0,Lt}};class Bt{constructor(dt){this.rpc=dt,this.Stream=this.Stream.bind(this),this.Publish=this.Publish.bind(this)}Stream(dt){const lt=dt.pipe(et.map(Lt=>a.EventsStreamRequest.encode(Lt).finish()));return this.rpc.bidirectionalStreamingRequest("apis.event.v2.EventService","Stream",lt).pipe(et.map(Lt=>a.EventsStreamResponse.decode(new _e.Reader(Lt))))}Publish(dt){const lt=a.PublishEventRequest.encode(dt).finish();return this.rpc.request("apis.event.v2.EventService","Publish",lt).then(Lt=>a.PublishEventResponse.decode(new _e.Reader(Lt)))}}a.EventServiceClientImpl=Bt,a.EventServiceDefinition={name:"EventService",fullName:"apis.event.v2.EventService",methods:{stream:{name:"Stream",requestType:a.EventsStreamRequest,requestStream:!0,responseType:a.EventsStreamResponse,responseStream:!0,options:{}},publish:{name:"Publish",requestType:a.PublishEventRequest,requestStream:!1,responseType:a.PublishEventResponse,responseStream:!1,options:{}}}};var qt=(()=>{if(typeof qt<"u")return qt;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof commonjsGlobal$1<"u")return commonjsGlobal$1;throw"Unable to locate global object"})();_e.util.Long!==j.default&&(_e.util.Long=j.default,_e.configure());function zt(ct){return typeof ct=="object"&&ct!==null}function Ht(ct){return ct!=null}})(api);(function(a){var c=commonjsGlobal$1&&commonjsGlobal$1.__createBinding||(Object.create?function(_,k,j,_e){_e===void 0&&(_e=j),Object.defineProperty(_,_e,{enumerable:!0,get:function(){return k[j]}})}:function(_,k,j,_e){_e===void 0&&(_e=j),_[_e]=k[j]}),b=commonjsGlobal$1&&commonjsGlobal$1.__exportStar||function(_,k){for(var j in _)j!=="default"&&!k.hasOwnProperty(j)&&c(k,_,j)};Object.defineProperty(a,"__esModule",{value:!0}),a.eventsApiSupportedEvents=a.eventsApiEventRpcCalls=void 0,b(api,a),a.eventsApiEventRpcCalls={ping:"pong",publish:"published",subscribe:"subscribed",unsubscribe:"unsubscribed"},a.eventsApiSupportedEvents=[...Object.values(a.eventsApiEventRpcCalls),"error","event","reconnectBefore"]})(dist$1);var ws=null;typeof WebSocket<"u"?ws=WebSocket:typeof MozWebSocket<"u"?ws=MozWebSocket:typeof commonjsGlobal$1<"u"?ws=commonjsGlobal$1.WebSocket||commonjsGlobal$1.MozWebSocket:typeof window<"u"?ws=window.WebSocket||window.MozWebSocket:typeof self<"u"&&(ws=self.WebSocket||self.MozWebSocket);var browser$1=ws,matcher={exports:{}},escapeStringRegexp$1=a=>{if(typeof a!="string")throw new TypeError("Expected a string");return a.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")};const escapeStringRegexp=escapeStringRegexp$1,regexpCache=new Map;function sanitizeArray(a,c){if(!Array.isArray(a))switch(typeof a){case"string":a=[a];break;case"undefined":a=[];break;default:throw new TypeError(`Expected '${c}' to be a string or an array, but got a type of '${typeof a}'`)}return a.filter(b=>{if(typeof b!="string"){if(typeof b>"u")return!1;throw new TypeError(`Expected '${c}' to be an array of strings, but found a type of '${typeof b}' in the array`)}return!0})}function makeRegexp(a,c){c={caseSensitive:!1,...c};const b=a+JSON.stringify(c);if(regexpCache.has(b))return regexpCache.get(b);const _=a[0]==="!";_&&(a=a.slice(1)),a=escapeStringRegexp(a).replace(/\\\*/g,"[\\s\\S]*");const k=new RegExp(`^${a}$`,c.caseSensitive?"":"i");return k.negated=_,regexpCache.set(b,k),k}matcher.exports=(a,c,b)=>{if(a=sanitizeArray(a,"inputs"),c=sanitizeArray(c,"patterns"),c.length===0)return[];const _=c[0][0]==="!";c=c.map(j=>makeRegexp(j,b));const k=[];for(const j of a){let _e=_;for(const et of c)et.test(j)&&(_e=!et.negated);_e&&k.push(j)}return k};matcher.exports.isMatch=(a,c,b)=>(a=sanitizeArray(a,"inputs"),c=sanitizeArray(c,"patterns"),c.length===0?!1:a.some(_=>c.every(k=>{const j=makeRegexp(k,b),_e=j.test(_);return j.negated?!_e:_e})));var matcherExports=matcher.exports,__createBinding$1=commonjsGlobal$1&&commonjsGlobal$1.__createBinding||(Object.create?function(a,c,b,_){_===void 0&&(_=b);var k=Object.getOwnPropertyDescriptor(c,b);(!k||("get"in k?!c.__esModule:k.writable||k.configurable))&&(k={enumerable:!0,get:function(){return c[b]}}),Object.defineProperty(a,_,k)}:function(a,c,b,_){_===void 0&&(_=b),a[_]=c[b]}),__setModuleDefault$1=commonjsGlobal$1&&commonjsGlobal$1.__setModuleDefault||(Object.create?function(a,c){Object.defineProperty(a,"default",{enumerable:!0,value:c})}:function(a,c){a.default=c}),__importStar$1=commonjsGlobal$1&&commonjsGlobal$1.__importStar||function(a){if(a&&a.__esModule)return a;var c={};if(a!=null)for(var b in a)b!=="default"&&Object.prototype.hasOwnProperty.call(a,b)&&__createBinding$1(c,a,b);return __setModuleDefault$1(c,a),c},__importDefault$8=commonjsGlobal$1&&commonjsGlobal$1.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(eventapi,"__esModule",{value:!0});eventapi.EventApi=void 0;const EventApiModel=__importStar$1(dist$1),isomorphic_ws_1=__importDefault$8(browser$1),uuid_1=require$$1$2,NiceGrpc=__importStar$1(lib$1),matcher_1=matcherExports,api_1=api$2,clientVersion=version$3,WS_PING_INTERVAL=2e4,WS_PING_TIMEOUT=1e4,WS_RECONNECT_DELAY=2e3,WS_MAX_BADAUTH_ATTEMPTS=3,LOG_CATEGORY="EventApi";class EventApi extends api_1.ApiClient{constructor(c,b,_,k,j,_e){super(c,b,k,LOG_CATEGORY,j,_e),this.websocketServer=_,this.subscriptions=new Set,this.eventHandlers={},this.calls={},this.messageQueue=[],this.websocketReady=!1,this.reconnectionAttempts=0,this.badAuthentication=!1,this.eventsClient=null}publish(...c){return this.websocketReady?this.call("publish",c[0]):this.eventsClient.publish(...c)}connect(){if(!this.ws){this.cleanup();const c=this.accessToken,b=[`version=${clientVersion}`,`sessionid=${this.sessionId}`];this.sdkVersion&&b.push(`sdkversion=${this.sdkVersion}`),this.ws=new isomorphic_ws_1.default(`${this.websocketServer}/stream?${b.join("&")}`,["Bearer",this.accessToken]);let _;this.ws.addEventListener("message",k=>{const j=JSON.parse(k.data.toString()),_e=j.result;if(j.error&&(_=j.error,this.handleEvent("error",{error:{code:j.code,message:j.message}}),["You do not have permission to this resource","You do not have permission to this resource"].includes(j.message)&&(this.badAuthentication=!0)),!_e)return;_e.reconnectBefore&&_e.reconnectBefore.reauthenticate&&this.accessToken===c&&(this.badAuthentication=!0);const et=EventApiModel.eventsApiSupportedEvents.find(nt=>!!_e[nt]);et&&this.handleEvent(et,_e)}),this.ws.addEventListener("open",()=>{this.log.info("websocket connected"),this.call("ping","hello",{timeout:WS_PING_TIMEOUT,skipQueue:!0}).then(()=>{this.ready()}).catch(k=>{!_&&k.message!=="Stream connection closed"&&this.disconnect("hello timeout")})}),this.ws.addEventListener("close",k=>{var j;_?this.reconnect(`${(j=_==null?void 0:_.message)!==null&&j!==void 0?j:"unknown"}`):this.reconnect(`closed - ${k.reason||k.code}`)}),this.ws.addEventListener("error",k=>{_=k})}}async subscribe(c,b={}){return this.call("subscribe",{name:c,...b}).then(()=>{this.subscriptions.add(JSON.stringify({name:c,...b}))})}async unsubscribe(c,b={}){this.subscriptions.delete(JSON.stringify({name:c,payload:b})),await this.call("unsubscribe",{name:c,...b})}on(c,b,_){const k=_||b,j={ignoreSessionEvents:!1,allowedSessionEvents:[],..._?b:{}};this.eventHandlers[c]||(this.eventHandlers[c]=[]),this.eventHandlers[c].push({...j,handler:k})}off(c,b,_){var k;const j=_||b,_e={ignoreSessionEvents:!1,allowedSessionEvents:[],..._?b:{}};this.eventHandlers[c]=((k=this.eventHandlers[c])!==null&&k!==void 0?k:[]).filter(et=>!(et.ignoreSessionEvents===_e.ignoreSessionEvents&&et.allowedSessionEvents===_e.allowedSessionEvents&&et.handler===j&&et.name===_e.name))}disconnect(c){this.log.warn(`disconnected from events reason=${c}`),Object.values(this.calls).forEach(b=>{clearTimeout(b.timeout),b.reject(new Error("Stream connection closed"))}),this.calls={},this.cleanup()}_setup(c){this.eventsClient=this.clientFactory.create(EventApiModel.EventServiceDefinition,this.channel,{"*":c}),this.badAuthentication&&(this.badAuthentication=!1,this.reconnectionAttempts=0,this.reconnect("updated token"))}ready(){this.reconnectionAttempts=0,this.badAuthentication=!1,this.websocketReady=!0,this.handleEvent("connected",{connected:void 0});for(const c of this.subscriptions.values())this.send({subscribe:JSON.parse(c),correlationId:(0,uuid_1.v4)()});for(const c of this.messageQueue)this.send(c);this.messageQueue=[],this.pingLoop=setInterval(()=>{this.ping()},WS_PING_INTERVAL)}ping(){this.call("ping",`${+new Date}`,{timeout:WS_PING_TIMEOUT}).catch(()=>{this.reconnect("connection stalled")})}reconnect(c){this.disconnect(c),this.reconnectTimeout=setTimeout(()=>{if(this.reconnectionAttempts++,this.badAuthentication&&this.reconnectionAttempts>=WS_MAX_BADAUTH_ATTEMPTS){this.log.warn("Maximum number of reconnection attempts reached with bad authentication, please re-authenticate the SDK");return}this.connect()},WS_RECONNECT_DELAY)}send(c){this.ws&&this.ws.readyState===this.ws.OPEN?this.ws.send(JSON.stringify(c)):this.log.warn("Message sent to a disconnected stream")}handleEvent(c,b){var _;if(this.calls[b.correlationId]){const k=EventApiModel.eventsApiEventRpcCalls[this.calls[b.correlationId].method]===c,j=!!b.error;if(k||j){this.resolveCall(c,b);return}}for(const k of(_=this.eventHandlers[c])!==null&&_!==void 0?_:[]){if(c==="event"&&b.event){if(b.sessionId===this.sessionId&&k.ignoreSessionEvents&&!k.allowedSessionEvents.includes(b.event.name)){this.log.trace("ignoring user event from self: "+b.event.name+", payload.sessionId="+b.sessionId+", this.sessionId");continue}if(k.name&&!(0,matcher_1.isMatch)(b.event.name,k.name))continue;if(this.eventLogCallback){let j,_e=b.event.name,et;if(b.event.name.startsWith(EventApi.APISTREAM_EVENT_PREFIX)){let nt=b.event.name.split(":");nt.length==4&&(j=nt[1],_e=nt[2],et=nt[3]),this.eventLogCallback(j,_e,et,b)}}}else if(b.sessionId===this.sessionId&&k.ignoreSessionEvents){this.log.trace("ignoring event from self: "+b.event.name+", payload.sessionId="+b.sessionId+", this.sessionId");continue}this.log.trace("processing event: payload.sessionId="+b.sessionId+", this.sessionId"),k.handler(b?b[c]:void 0,{isFromCurrentSession:b.sessionId===this.sessionId})}}async call(c,b,_={timeout:2e4,skipQueue:!1}){this.ws||this.connect();const k=(0,uuid_1.v4)();return new Promise((j,_e)=>{const et=setTimeout(()=>{delete this.calls[k],_e(new Error("Request timed out"))},_.timeout);this.calls[k]={resolve:j,reject:_e,timeout:et,method:c},this.websocketReady||_.skipQueue?this.send({[c]:b,correlationId:k}):this.messageQueue.push({[c]:b,correlationId:k})})}resolveCall(c,b){const _=this.calls[b.correlationId];if(_){if(clearTimeout(_.timeout),delete this.calls[b.correlationId],c==="error"&&b.error){_.reject(new NiceGrpc.ClientError("error",b.error.code,b.error.message));return}_.resolve(b[c])}}cleanup(){clearTimeout(this.pingLoop),clearTimeout(this.reconnectTimeout),this.websocketReady=!1,this.ws&&(this.ws.onclose=function(){},this.ws.close(),this.ws=null)}}eventapi.EventApi=EventApi;EventApi.APISTREAM_EVENT_PREFIX="apistream";var livekit={},__importDefault$7=commonjsGlobal$1&&commonjsGlobal$1.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(livekit,"__esModule",{value:!0});livekit.LiveKitUtils=void 0;const jwt_decode_1=__importDefault$7(require$$0$2);class LiveKitUtils{static decodeJwt(c){return(0,jwt_decode_1.default)(c,{header:!1})}static isRoomAdmin(c){return LiveKitUtils.decodeJwt(c).video.roomAdmin}static getRoomName(c){return LiveKitUtils.decodeJwt(c).video.room}}livekit.LiveKitUtils=LiveKitUtils;(function(a){var c=commonjsGlobal$1&&commonjsGlobal$1.__createBinding||(Object.create?function(Ht,ct,dt,lt){lt===void 0&&(lt=dt);var kt=Object.getOwnPropertyDescriptor(ct,dt);(!kt||("get"in kt?!ct.__esModule:kt.writable||kt.configurable))&&(kt={enumerable:!0,get:function(){return ct[dt]}}),Object.defineProperty(Ht,lt,kt)}:function(Ht,ct,dt,lt){lt===void 0&&(lt=dt),Ht[lt]=ct[dt]}),b=commonjsGlobal$1&&commonjsGlobal$1.__setModuleDefault||(Object.create?function(Ht,ct){Object.defineProperty(Ht,"default",{enumerable:!0,value:ct})}:function(Ht,ct){Ht.default=ct}),_=commonjsGlobal$1&&commonjsGlobal$1.__importStar||function(Ht){if(Ht&&Ht.__esModule)return Ht;var ct={};if(Ht!=null)for(var dt in Ht)dt!=="default"&&Object.prototype.hasOwnProperty.call(Ht,dt)&&c(ct,Ht,dt);return b(ct,Ht),ct},k=commonjsGlobal$1&&commonjsGlobal$1.__importDefault||function(Ht){return Ht&&Ht.__esModule?Ht:{default:Ht}};Object.defineProperty(a,"__esModule",{value:!0}),a.ApiStream=a.LiveKitUtils=a.EventApiModel=a.LayoutApiModel=a.LiveApiModel=void 0;const j=k(require$$0$2),_e=require$$1$2,et=require$$2$1,nt=layoutapi,it=liveapi,ft=eventapi,pt=_(api$1);a.LiveApiModel=pt;const mt=_(dist$2);a.LayoutApiModel=mt;const St=_(dist$1);a.EventApiModel=St;const yt=livekit;Object.defineProperty(a,"LiveKitUtils",{enumerable:!0,get:function(){return yt.LiveKitUtils}});const _t=logger,Tt=version$3,gt={dev:"http://127.0.0.1:8081",stage:"https://live.silly.horse/grpcweb/live/v2",prod:"https://live.api.stream/grpcweb/live/v2"},ht={dev:"https://live.silly.horse/grpcweb/layout/v2",stage:"https://live.silly.horse/grpcweb/layout/v2",prod:"https://live.api.stream/grpcweb/layout/v2"},Et={dev:"wss://live.silly.horse/event/v2",stage:"wss://live.silly.horse/event/v2",prod:"wss://live.api.stream/event/v2"},At={dev:"https://live.silly.horse/grpcweb/event/v2",stage:"https://live.silly.horse/grpcweb/event/v2",prod:"https://live.api.stream/grpcweb/event/v2"},Bt={dev:"wss://live.silly.horse/webrtc/v2",stage:"wss://live.silly.horse/webrtc/v2",prod:"wss://live.api.stream/webrtc/v2"},qt={dev:"https://live.silly.horse/webrtc/v2",stage:"https://live.silly.horse/webrtc/v2",prod:"https://live.api.stream/webrtc/v2"};class zt{constructor(ct={}){var dt;const lt={env:"prod",logLevel:"Warn",...ct};this.env=lt.env;let kt=(0,_e.v4)();lt.sessionId!=null&&(kt=lt.sessionId),this.log=_t.logger.getCategory("ApiStream"),this.setLogLevel(lt.env=="dev"?"Trace":lt.logLevel);const Lt=(dt=lt.overrideEndpoints)!==null&&dt!==void 0?dt:{};Lt.liveApiServer==null&&(Lt.liveApiServer=gt[this.env]),Lt.layoutApiServer==null&&(Lt.layoutApiServer=ht[this.env]),Lt.eventApiServer==null&&(Lt.eventApiServer=At[this.env]),Lt.eventApiWebSocketServer==null&&(Lt.eventApiWebSocketServer=Et[this.env]),this.eventApi=new ft.EventApi(kt,Lt.eventApiServer,Lt.eventApiWebSocketServer,lt.sdkVersion,lt.apiLogCallback,lt.eventLogCallback),this.layoutApi=new nt.LayoutApi(kt,this.eventApi,Lt.layoutApiServer,lt.sdkVersion,lt.apiLogCallback),this.liveApi=new it.LiveApi(kt,this.eventApi,Lt.liveApiServer,this.setAccessToken.bind(this),lt.apiKey,lt.sdkVersion,lt.apiLogCallback),this.eventApi.on("reconnectBefore",Jt=>{Jt.reauthenticate&&this.liveApi.authentication.refreshAccessToken({}).catch(()=>{})}),this.log.info("api.stream: sessionid="+kt+", version="+Tt+", sdkVersion="+lt.sdkVersion)}LiveApi(){return this.liveApi}LayoutApi(){return this.layoutApi}EventApi(){return this.eventApi}setLogLevel(ct){try{let dt=et.LogLevel.toLogLevel(ct);_t.logger.updateRuntimeSettings({level:dt})}catch{this.log.warn(`unknown logging level ${ct}`)}}setAccessToken(ct){this.decodedAccessToken=zt.decodeAccessToken(ct),this.log.debug("setting accessToken",ct,this.decodedAccessToken),this.layoutApi.setAccessToken(ct),this.liveApi.setAccessToken(ct),this.eventApi.setAccessToken(ct)}getAccessToken(){return this.decodedAccessToken}getGuestProject(){return this.decodedAccessToken.guestControl}async load(ct){if(ct==null&&typeof window<"u"){let dt=this.parseQuery();dt.get(zt.ACCESS_TOKEN_QUERY_PARAM)!=null&&(ct=dt.get(zt.ACCESS_TOKEN_QUERY_PARAM))}return ct!=null&&(this.setAccessToken(ct),this.decodedAccessToken.guestControl!=null)?(this.log.info("loading guest token and exchanging"),await this.LiveApi().authentication.refreshAccessToken({}),this.log.info("auto-loading project = "+JSON.stringify(this.decodedAccessToken.guestControl)),this.decodedAccessToken.guestControl):null}getLiveKitServer(ct=!1){return ct?qt[this.env]:Bt[this.env]}parseQuery(){let ct=window.location.search,dt=new Map,lt=(ct[0]==="?"?ct.substr(1):ct).split("&");for(let kt=0;kt<lt.length;kt++){let Lt=lt[kt].split("=");Lt.length==2&&(dt.set(decodeURIComponent(Lt[0]),decodeURIComponent(Lt[1]||"")),this.log.debug(`found query param: ${decodeURIComponent(Lt[0])}=${decodeURIComponent(Lt[1]||"")}`))}return dt}static decodeAccessToken(ct){let dt=(0,j.default)(ct,{header:!1}),lt={serviceUserId:dt.user.serviceUserId,userId:dt.user.userId,displayName:dt.user.displayName,trial:dt.user.trial,demo:dt.user.demo};return dt.guestControl!=null&&(lt.guestControl={collectionId:dt.guestControl.collectionId,projectId:dt.guestControl.projectId,role:pt.roleFromJSON(dt.guestControl.role)}),lt}}a.ApiStream=zt,zt.ACCESS_TOKEN_QUERY_PARAM="at"})(lib$2);var dist={},AccessToken$1={},jws$3={},safeBuffer={exports:{}},buffer={},base64Js={};base64Js.byteLength=byteLength;base64Js.toByteArray=toByteArray;base64Js.fromByteArray=fromByteArray;var lookup=[],revLookup=[],Arr=typeof Uint8Array<"u"?Uint8Array:Array,code="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var i=0,len=code.length;i<len;++i)lookup[i]=code[i],revLookup[code.charCodeAt(i)]=i;revLookup[45]=62;revLookup[95]=63;function getLens(a){var c=a.length;if(c%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var b=a.indexOf("=");b===-1&&(b=c);var _=b===c?0:4-b%4;return[b,_]}function byteLength(a){var c=getLens(a),b=c[0],_=c[1];return(b+_)*3/4-_}function _byteLength(a,c,b){return(c+b)*3/4-b}function toByteArray(a){var c,b=getLens(a),_=b[0],k=b[1],j=new Arr(_byteLength(a,_,k)),_e=0,et=k>0?_-4:_,nt;for(nt=0;nt<et;nt+=4)c=revLookup[a.charCodeAt(nt)]<<18|revLookup[a.charCodeAt(nt+1)]<<12|revLookup[a.charCodeAt(nt+2)]<<6|revLookup[a.charCodeAt(nt+3)],j[_e++]=c>>16&255,j[_e++]=c>>8&255,j[_e++]=c&255;return k===2&&(c=revLookup[a.charCodeAt(nt)]<<2|revLookup[a.charCodeAt(nt+1)]>>4,j[_e++]=c&255),k===1&&(c=revLookup[a.charCodeAt(nt)]<<10|revLookup[a.charCodeAt(nt+1)]<<4|revLookup[a.charCodeAt(nt+2)]>>2,j[_e++]=c>>8&255,j[_e++]=c&255),j}function tripletToBase64(a){return lookup[a>>18&63]+lookup[a>>12&63]+lookup[a>>6&63]+lookup[a&63]}function encodeChunk(a,c,b){for(var _,k=[],j=c;j<b;j+=3)_=(a[j]<<16&16711680)+(a[j+1]<<8&65280)+(a[j+2]&255),k.push(tripletToBase64(_));return k.join("")}function fromByteArray(a){for(var c,b=a.length,_=b%3,k=[],j=16383,_e=0,et=b-_;_e<et;_e+=j)k.push(encodeChunk(a,_e,_e+j>et?et:_e+j));return _===1?(c=a[b-1],k.push(lookup[c>>2]+lookup[c<<4&63]+"==")):_===2&&(c=(a[b-2]<<8)+a[b-1],k.push(lookup[c>>10]+lookup[c>>4&63]+lookup[c<<2&63]+"=")),k.join("")}var ieee754={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */ieee754.read=function(a,c,b,_,k){var j,_e,et=k*8-_-1,nt=(1<<et)-1,it=nt>>1,ft=-7,pt=b?k-1:0,mt=b?-1:1,St=a[c+pt];for(pt+=mt,j=St&(1<<-ft)-1,St>>=-ft,ft+=et;ft>0;j=j*256+a[c+pt],pt+=mt,ft-=8);for(_e=j&(1<<-ft)-1,j>>=-ft,ft+=_;ft>0;_e=_e*256+a[c+pt],pt+=mt,ft-=8);if(j===0)j=1-it;else{if(j===nt)return _e?NaN:(St?-1:1)*(1/0);_e=_e+Math.pow(2,_),j=j-it}return(St?-1:1)*_e*Math.pow(2,j-_)};ieee754.write=function(a,c,b,_,k,j){var _e,et,nt,it=j*8-k-1,ft=(1<<it)-1,pt=ft>>1,mt=k===23?Math.pow(2,-24)-Math.pow(2,-77):0,St=_?0:j-1,yt=_?1:-1,_t=c<0||c===0&&1/c<0?1:0;for(c=Math.abs(c),isNaN(c)||c===1/0?(et=isNaN(c)?1:0,_e=ft):(_e=Math.floor(Math.log(c)/Math.LN2),c*(nt=Math.pow(2,-_e))<1&&(_e--,nt*=2),_e+pt>=1?c+=mt/nt:c+=mt*Math.pow(2,1-pt),c*nt>=2&&(_e++,nt/=2),_e+pt>=ft?(et=0,_e=ft):_e+pt>=1?(et=(c*nt-1)*Math.pow(2,k),_e=_e+pt):(et=c*Math.pow(2,pt-1)*Math.pow(2,k),_e=0));k>=8;a[b+St]=et&255,St+=yt,et/=256,k-=8);for(_e=_e<<k|et,it+=k;it>0;a[b+St]=_e&255,St+=yt,_e/=256,it-=8);a[b+St-yt]|=_t*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(a){var c=base64Js,b=ieee754,_=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;a.Buffer=et,a.SlowBuffer=ht,a.INSPECT_MAX_BYTES=50;var k=2147483647;a.kMaxLength=k,et.TYPED_ARRAY_SUPPORT=j(),!et.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function j(){try{var Dt=new Uint8Array(1),Ot={foo:function(){return 42}};return Object.setPrototypeOf(Ot,Uint8Array.prototype),Object.setPrototypeOf(Dt,Ot),Dt.foo()===42}catch{return!1}}Object.defineProperty(et.prototype,"parent",{enumerable:!0,get:function(){if(et.isBuffer(this))return this.buffer}}),Object.defineProperty(et.prototype,"offset",{enumerable:!0,get:function(){if(et.isBuffer(this))return this.byteOffset}});function _e(Dt){if(Dt>k)throw new RangeError('The value "'+Dt+'" is invalid for option "size"');var Ot=new Uint8Array(Dt);return Object.setPrototypeOf(Ot,et.prototype),Ot}function et(Dt,Ot,$t){if(typeof Dt=="number"){if(typeof Ot=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return pt(Dt)}return nt(Dt,Ot,$t)}et.poolSize=8192;function nt(Dt,Ot,$t){if(typeof Dt=="string")return mt(Dt,Ot);if(ArrayBuffer.isView(Dt))return yt(Dt);if(Dt==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof Dt);if(It(Dt,ArrayBuffer)||Dt&&It(Dt.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(It(Dt,SharedArrayBuffer)||Dt&&It(Dt.buffer,SharedArrayBuffer)))return _t(Dt,Ot,$t);if(typeof Dt=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var Gt=Dt.valueOf&&Dt.valueOf();if(Gt!=null&&Gt!==Dt)return et.from(Gt,Ot,$t);var nn=Tt(Dt);if(nn)return nn;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof Dt[Symbol.toPrimitive]=="function")return et.from(Dt[Symbol.toPrimitive]("string"),Ot,$t);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof Dt)}et.from=function(Dt,Ot,$t){return nt(Dt,Ot,$t)},Object.setPrototypeOf(et.prototype,Uint8Array.prototype),Object.setPrototypeOf(et,Uint8Array);function it(Dt){if(typeof Dt!="number")throw new TypeError('"size" argument must be of type number');if(Dt<0)throw new RangeError('The value "'+Dt+'" is invalid for option "size"')}function ft(Dt,Ot,$t){return it(Dt),Dt<=0?_e(Dt):Ot!==void 0?typeof $t=="string"?_e(Dt).fill(Ot,$t):_e(Dt).fill(Ot):_e(Dt)}et.alloc=function(Dt,Ot,$t){return ft(Dt,Ot,$t)};function pt(Dt){return it(Dt),_e(Dt<0?0:gt(Dt)|0)}et.allocUnsafe=function(Dt){return pt(Dt)},et.allocUnsafeSlow=function(Dt){return pt(Dt)};function mt(Dt,Ot){if((typeof Ot!="string"||Ot==="")&&(Ot="utf8"),!et.isEncoding(Ot))throw new TypeError("Unknown encoding: "+Ot);var $t=Et(Dt,Ot)|0,Gt=_e($t),nn=Gt.write(Dt,Ot);return nn!==$t&&(Gt=Gt.slice(0,nn)),Gt}function St(Dt){for(var Ot=Dt.length<0?0:gt(Dt.length)|0,$t=_e(Ot),Gt=0;Gt<Ot;Gt+=1)$t[Gt]=Dt[Gt]&255;return $t}function yt(Dt){if(It(Dt,Uint8Array)){var Ot=new Uint8Array(Dt);return _t(Ot.buffer,Ot.byteOffset,Ot.byteLength)}return St(Dt)}function _t(Dt,Ot,$t){if(Ot<0||Dt.byteLength<Ot)throw new RangeError('"offset" is outside of buffer bounds');if(Dt.byteLength<Ot+($t||0))throw new RangeError('"length" is outside of buffer bounds');var Gt;return Ot===void 0&&$t===void 0?Gt=new Uint8Array(Dt):$t===void 0?Gt=new Uint8Array(Dt,Ot):Gt=new Uint8Array(Dt,Ot,$t),Object.setPrototypeOf(Gt,et.prototype),Gt}function Tt(Dt){if(et.isBuffer(Dt)){var Ot=gt(Dt.length)|0,$t=_e(Ot);return $t.length===0||Dt.copy($t,0,0,Ot),$t}if(Dt.length!==void 0)return typeof Dt.length!="number"||Pt(Dt.length)?_e(0):St(Dt);if(Dt.type==="Buffer"&&Array.isArray(Dt.data))return St(Dt.data)}function gt(Dt){if(Dt>=k)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+k.toString(16)+" bytes");return Dt|0}function ht(Dt){return+Dt!=Dt&&(Dt=0),et.alloc(+Dt)}et.isBuffer=function(Ot){return Ot!=null&&Ot._isBuffer===!0&&Ot!==et.prototype},et.compare=function(Ot,$t){if(It(Ot,Uint8Array)&&(Ot=et.from(Ot,Ot.offset,Ot.byteLength)),It($t,Uint8Array)&&($t=et.from($t,$t.offset,$t.byteLength)),!et.isBuffer(Ot)||!et.isBuffer($t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(Ot===$t)return 0;for(var Gt=Ot.length,nn=$t.length,gn=0,Xt=Math.min(Gt,nn);gn<Xt;++gn)if(Ot[gn]!==$t[gn]){Gt=Ot[gn],nn=$t[gn];break}return Gt<nn?-1:nn<Gt?1:0},et.isEncoding=function(Ot){switch(String(Ot).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},et.concat=function(Ot,$t){if(!Array.isArray(Ot))throw new TypeError('"list" argument must be an Array of Buffers');if(Ot.length===0)return et.alloc(0);var Gt;if($t===void 0)for($t=0,Gt=0;Gt<Ot.length;++Gt)$t+=Ot[Gt].length;var nn=et.allocUnsafe($t),gn=0;for(Gt=0;Gt<Ot.length;++Gt){var Xt=Ot[Gt];if(It(Xt,Uint8Array))gn+Xt.length>nn.length?et.from(Xt).copy(nn,gn):Uint8Array.prototype.set.call(nn,Xt,gn);else if(et.isBuffer(Xt))Xt.copy(nn,gn);else throw new TypeError('"list" argument must be an Array of Buffers');gn+=Xt.length}return nn};function Et(Dt,Ot){if(et.isBuffer(Dt))return Dt.length;if(ArrayBuffer.isView(Dt)||It(Dt,ArrayBuffer))return Dt.byteLength;if(typeof Dt!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof Dt);var $t=Dt.length,Gt=arguments.length>2&&arguments[2]===!0;if(!Gt&&$t===0)return 0;for(var nn=!1;;)switch(Ot){case"ascii":case"latin1":case"binary":return $t;case"utf8":case"utf-8":return vn(Dt).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return $t*2;case"hex":return $t>>>1;case"base64":return fn(Dt).length;default:if(nn)return Gt?-1:vn(Dt).length;Ot=(""+Ot).toLowerCase(),nn=!0}}et.byteLength=Et;function At(Dt,Ot,$t){var Gt=!1;if((Ot===void 0||Ot<0)&&(Ot=0),Ot>this.length||(($t===void 0||$t>this.length)&&($t=this.length),$t<=0)||($t>>>=0,Ot>>>=0,$t<=Ot))return"";for(Dt||(Dt="utf8");;)switch(Dt){case"hex":return Sn(this,Ot,$t);case"utf8":case"utf-8":return Jt(this,Ot,$t);case"ascii":return xt(this,Ot,$t);case"latin1":case"binary":return rn(this,Ot,$t);case"base64":return Lt(this,Ot,$t);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return bn(this,Ot,$t);default:if(Gt)throw new TypeError("Unknown encoding: "+Dt);Dt=(Dt+"").toLowerCase(),Gt=!0}}et.prototype._isBuffer=!0;function Bt(Dt,Ot,$t){var Gt=Dt[Ot];Dt[Ot]=Dt[$t],Dt[$t]=Gt}et.prototype.swap16=function(){var Ot=this.length;if(Ot%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var $t=0;$t<Ot;$t+=2)Bt(this,$t,$t+1);return this},et.prototype.swap32=function(){var Ot=this.length;if(Ot%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var $t=0;$t<Ot;$t+=4)Bt(this,$t,$t+3),Bt(this,$t+1,$t+2);return this},et.prototype.swap64=function(){var Ot=this.length;if(Ot%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var $t=0;$t<Ot;$t+=8)Bt(this,$t,$t+7),Bt(this,$t+1,$t+6),Bt(this,$t+2,$t+5),Bt(this,$t+3,$t+4);return this},et.prototype.toString=function(){var Ot=this.length;return Ot===0?"":arguments.length===0?Jt(this,0,Ot):At.apply(this,arguments)},et.prototype.toLocaleString=et.prototype.toString,et.prototype.equals=function(Ot){if(!et.isBuffer(Ot))throw new TypeError("Argument must be a Buffer");return this===Ot?!0:et.compare(this,Ot)===0},et.prototype.inspect=function(){var Ot="",$t=a.INSPECT_MAX_BYTES;return Ot=this.toString("hex",0,$t).replace(/(.{2})/g,"$1 ").trim(),this.length>$t&&(Ot+=" ... "),"<Buffer "+Ot+">"},_&&(et.prototype[_]=et.prototype.inspect),et.prototype.compare=function(Ot,$t,Gt,nn,gn){if(It(Ot,Uint8Array)&&(Ot=et.from(Ot,Ot.offset,Ot.byteLength)),!et.isBuffer(Ot))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof Ot);if($t===void 0&&($t=0),Gt===void 0&&(Gt=Ot?Ot.length:0),nn===void 0&&(nn=0),gn===void 0&&(gn=this.length),$t<0||Gt>Ot.length||nn<0||gn>this.length)throw new RangeError("out of range index");if(nn>=gn&&$t>=Gt)return 0;if(nn>=gn)return-1;if($t>=Gt)return 1;if($t>>>=0,Gt>>>=0,nn>>>=0,gn>>>=0,this===Ot)return 0;for(var Xt=gn-nn,at=Gt-$t,Rt=Math.min(Xt,at),Ut=this.slice(nn,gn),un=Ot.slice($t,Gt),Vt=0;Vt<Rt;++Vt)if(Ut[Vt]!==un[Vt]){Xt=Ut[Vt],at=un[Vt];break}return Xt<at?-1:at<Xt?1:0};function qt(Dt,Ot,$t,Gt,nn){if(Dt.length===0)return-1;if(typeof $t=="string"?(Gt=$t,$t=0):$t>2147483647?$t=2147483647:$t<-2147483648&&($t=-2147483648),$t=+$t,Pt($t)&&($t=nn?0:Dt.length-1),$t<0&&($t=Dt.length+$t),$t>=Dt.length){if(nn)return-1;$t=Dt.length-1}else if($t<0)if(nn)$t=0;else return-1;if(typeof Ot=="string"&&(Ot=et.from(Ot,Gt)),et.isBuffer(Ot))return Ot.length===0?-1:zt(Dt,Ot,$t,Gt,nn);if(typeof Ot=="number")return Ot=Ot&255,typeof Uint8Array.prototype.indexOf=="function"?nn?Uint8Array.prototype.indexOf.call(Dt,Ot,$t):Uint8Array.prototype.lastIndexOf.call(Dt,Ot,$t):zt(Dt,[Ot],$t,Gt,nn);throw new TypeError("val must be string, number or Buffer")}function zt(Dt,Ot,$t,Gt,nn){var gn=1,Xt=Dt.length,at=Ot.length;if(Gt!==void 0&&(Gt=String(Gt).toLowerCase(),Gt==="ucs2"||Gt==="ucs-2"||Gt==="utf16le"||Gt==="utf-16le")){if(Dt.length<2||Ot.length<2)return-1;gn=2,Xt/=2,at/=2,$t/=2}function Rt(wt,Ft){return gn===1?wt[Ft]:wt.readUInt16BE(Ft*gn)}var Ut;if(nn){var un=-1;for(Ut=$t;Ut<Xt;Ut++)if(Rt(Dt,Ut)===Rt(Ot,un===-1?0:Ut-un)){if(un===-1&&(un=Ut),Ut-un+1===at)return un*gn}else un!==-1&&(Ut-=Ut-un),un=-1}else for($t+at>Xt&&($t=Xt-at),Ut=$t;Ut>=0;Ut--){for(var Vt=!0,st=0;st<at;st++)if(Rt(Dt,Ut+st)!==Rt(Ot,st)){Vt=!1;break}if(Vt)return Ut}return-1}et.prototype.includes=function(Ot,$t,Gt){return this.indexOf(Ot,$t,Gt)!==-1},et.prototype.indexOf=function(Ot,$t,Gt){return qt(this,Ot,$t,Gt,!0)},et.prototype.lastIndexOf=function(Ot,$t,Gt){return qt(this,Ot,$t,Gt,!1)};function Ht(Dt,Ot,$t,Gt){$t=Number($t)||0;var nn=Dt.length-$t;Gt?(Gt=Number(Gt),Gt>nn&&(Gt=nn)):Gt=nn;var gn=Ot.length;Gt>gn/2&&(Gt=gn/2);for(var Xt=0;Xt<Gt;++Xt){var at=parseInt(Ot.substr(Xt*2,2),16);if(Pt(at))return Xt;Dt[$t+Xt]=at}return Xt}function ct(Dt,Ot,$t,Gt){return ut(vn(Ot,Dt.length-$t),Dt,$t,Gt)}function dt(Dt,Ot,$t,Gt){return ut(Cn(Ot),Dt,$t,Gt)}function lt(Dt,Ot,$t,Gt){return ut(fn(Ot),Dt,$t,Gt)}function kt(Dt,Ot,$t,Gt){return ut(Nn(Ot,Dt.length-$t),Dt,$t,Gt)}et.prototype.write=function(Ot,$t,Gt,nn){if($t===void 0)nn="utf8",Gt=this.length,$t=0;else if(Gt===void 0&&typeof $t=="string")nn=$t,Gt=this.length,$t=0;else if(isFinite($t))$t=$t>>>0,isFinite(Gt)?(Gt=Gt>>>0,nn===void 0&&(nn="utf8")):(nn=Gt,Gt=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var gn=this.length-$t;if((Gt===void 0||Gt>gn)&&(Gt=gn),Ot.length>0&&(Gt<0||$t<0)||$t>this.length)throw new RangeError("Attempt to write outside buffer bounds");nn||(nn="utf8");for(var Xt=!1;;)switch(nn){case"hex":return Ht(this,Ot,$t,Gt);case"utf8":case"utf-8":return ct(this,Ot,$t,Gt);case"ascii":case"latin1":case"binary":return dt(this,Ot,$t,Gt);case"base64":return lt(this,Ot,$t,Gt);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return kt(this,Ot,$t,Gt);default:if(Xt)throw new TypeError("Unknown encoding: "+nn);nn=(""+nn).toLowerCase(),Xt=!0}},et.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function Lt(Dt,Ot,$t){return Ot===0&&$t===Dt.length?c.fromByteArray(Dt):c.fromByteArray(Dt.slice(Ot,$t))}function Jt(Dt,Ot,$t){$t=Math.min(Dt.length,$t);for(var Gt=[],nn=Ot;nn<$t;){var gn=Dt[nn],Xt=null,at=gn>239?4:gn>223?3:gn>191?2:1;if(nn+at<=$t){var Rt,Ut,un,Vt;switch(at){case 1:gn<128&&(Xt=gn);break;case 2:Rt=Dt[nn+1],(Rt&192)===128&&(Vt=(gn&31)<<6|Rt&63,Vt>127&&(Xt=Vt));break;case 3:Rt=Dt[nn+1],Ut=Dt[nn+2],(Rt&192)===128&&(Ut&192)===128&&(Vt=(gn&15)<<12|(Rt&63)<<6|Ut&63,Vt>2047&&(Vt<55296||Vt>57343)&&(Xt=Vt));break;case 4:Rt=Dt[nn+1],Ut=Dt[nn+2],un=Dt[nn+3],(Rt&192)===128&&(Ut&192)===128&&(un&192)===128&&(Vt=(gn&15)<<18|(Rt&63)<<12|(Ut&63)<<6|un&63,Vt>65535&&Vt<1114112&&(Xt=Vt))}}Xt===null?(Xt=65533,at=1):Xt>65535&&(Xt-=65536,Gt.push(Xt>>>10&1023|55296),Xt=56320|Xt&1023),Gt.push(Xt),nn+=at}return Qt(Gt)}var en=4096;function Qt(Dt){var Ot=Dt.length;if(Ot<=en)return String.fromCharCode.apply(String,Dt);for(var $t="",Gt=0;Gt<Ot;)$t+=String.fromCharCode.apply(String,Dt.slice(Gt,Gt+=en));return $t}function xt(Dt,Ot,$t){var Gt="";$t=Math.min(Dt.length,$t);for(var nn=Ot;nn<$t;++nn)Gt+=String.fromCharCode(Dt[nn]&127);return Gt}function rn(Dt,Ot,$t){var Gt="";$t=Math.min(Dt.length,$t);for(var nn=Ot;nn<$t;++nn)Gt+=String.fromCharCode(Dt[nn]);return Gt}function Sn(Dt,Ot,$t){var Gt=Dt.length;(!Ot||Ot<0)&&(Ot=0),(!$t||$t<0||$t>Gt)&&($t=Gt);for(var nn="",gn=Ot;gn<$t;++gn)nn+=Zt[Dt[gn]];return nn}function bn(Dt,Ot,$t){for(var Gt=Dt.slice(Ot,$t),nn="",gn=0;gn<Gt.length-1;gn+=2)nn+=String.fromCharCode(Gt[gn]+Gt[gn+1]*256);return nn}et.prototype.slice=function(Ot,$t){var Gt=this.length;Ot=~~Ot,$t=$t===void 0?Gt:~~$t,Ot<0?(Ot+=Gt,Ot<0&&(Ot=0)):Ot>Gt&&(Ot=Gt),$t<0?($t+=Gt,$t<0&&($t=0)):$t>Gt&&($t=Gt),$t<Ot&&($t=Ot);var nn=this.subarray(Ot,$t);return Object.setPrototypeOf(nn,et.prototype),nn};function kn(Dt,Ot,$t){if(Dt%1!==0||Dt<0)throw new RangeError("offset is not uint");if(Dt+Ot>$t)throw new RangeError("Trying to access beyond buffer length")}et.prototype.readUintLE=et.prototype.readUIntLE=function(Ot,$t,Gt){Ot=Ot>>>0,$t=$t>>>0,Gt||kn(Ot,$t,this.length);for(var nn=this[Ot],gn=1,Xt=0;++Xt<$t&&(gn*=256);)nn+=this[Ot+Xt]*gn;return nn},et.prototype.readUintBE=et.prototype.readUIntBE=function(Ot,$t,Gt){Ot=Ot>>>0,$t=$t>>>0,Gt||kn(Ot,$t,this.length);for(var nn=this[Ot+--$t],gn=1;$t>0&&(gn*=256);)nn+=this[Ot+--$t]*gn;return nn},et.prototype.readUint8=et.prototype.readUInt8=function(Ot,$t){return Ot=Ot>>>0,$t||kn(Ot,1,this.length),this[Ot]},et.prototype.readUint16LE=et.prototype.readUInt16LE=function(Ot,$t){return Ot=Ot>>>0,$t||kn(Ot,2,this.length),this[Ot]|this[Ot+1]<<8},et.prototype.readUint16BE=et.prototype.readUInt16BE=function(Ot,$t){return Ot=Ot>>>0,$t||kn(Ot,2,this.length),this[Ot]<<8|this[Ot+1]},et.prototype.readUint32LE=et.prototype.readUInt32LE=function(Ot,$t){return Ot=Ot>>>0,$t||kn(Ot,4,this.length),(this[Ot]|this[Ot+1]<<8|this[Ot+2]<<16)+this[Ot+3]*16777216},et.prototype.readUint32BE=et.prototype.readUInt32BE=function(Ot,$t){return Ot=Ot>>>0,$t||kn(Ot,4,this.length),this[Ot]*16777216+(this[Ot+1]<<16|this[Ot+2]<<8|this[Ot+3])},et.prototype.readIntLE=function(Ot,$t,Gt){Ot=Ot>>>0,$t=$t>>>0,Gt||kn(Ot,$t,this.length);for(var nn=this[Ot],gn=1,Xt=0;++Xt<$t&&(gn*=256);)nn+=this[Ot+Xt]*gn;return gn*=128,nn>=gn&&(nn-=Math.pow(2,8*$t)),nn},et.prototype.readIntBE=function(Ot,$t,Gt){Ot=Ot>>>0,$t=$t>>>0,Gt||kn(Ot,$t,this.length);for(var nn=$t,gn=1,Xt=this[Ot+--nn];nn>0&&(gn*=256);)Xt+=this[Ot+--nn]*gn;return gn*=128,Xt>=gn&&(Xt-=Math.pow(2,8*$t)),Xt},et.prototype.readInt8=function(Ot,$t){return Ot=Ot>>>0,$t||kn(Ot,1,this.length),this[Ot]&128?(255-this[Ot]+1)*-1:this[Ot]},et.prototype.readInt16LE=function(Ot,$t){Ot=Ot>>>0,$t||kn(Ot,2,this.length);var Gt=this[Ot]|this[Ot+1]<<8;return Gt&32768?Gt|4294901760:Gt},et.prototype.readInt16BE=function(Ot,$t){Ot=Ot>>>0,$t||kn(Ot,2,this.length);var Gt=this[Ot+1]|this[Ot]<<8;return Gt&32768?Gt|4294901760:Gt},et.prototype.readInt32LE=function(Ot,$t){return Ot=Ot>>>0,$t||kn(Ot,4,this.length),this[Ot]|this[Ot+1]<<8|this[Ot+2]<<16|this[Ot+3]<<24},et.prototype.readInt32BE=function(Ot,$t){return Ot=Ot>>>0,$t||kn(Ot,4,this.length),this[Ot]<<24|this[Ot+1]<<16|this[Ot+2]<<8|this[Ot+3]},et.prototype.readFloatLE=function(Ot,$t){return Ot=Ot>>>0,$t||kn(Ot,4,this.length),b.read(this,Ot,!0,23,4)},et.prototype.readFloatBE=function(Ot,$t){return Ot=Ot>>>0,$t||kn(Ot,4,this.length),b.read(this,Ot,!1,23,4)},et.prototype.readDoubleLE=function(Ot,$t){return Ot=Ot>>>0,$t||kn(Ot,8,this.length),b.read(this,Ot,!0,52,8)},et.prototype.readDoubleBE=function(Ot,$t){return Ot=Ot>>>0,$t||kn(Ot,8,this.length),b.read(this,Ot,!1,52,8)};function _n(Dt,Ot,$t,Gt,nn,gn){if(!et.isBuffer(Dt))throw new TypeError('"buffer" argument must be a Buffer instance');if(Ot>nn||Ot<gn)throw new RangeError('"value" argument is out of bounds');if($t+Gt>Dt.length)throw new RangeError("Index out of range")}et.prototype.writeUintLE=et.prototype.writeUIntLE=function(Ot,$t,Gt,nn){if(Ot=+Ot,$t=$t>>>0,Gt=Gt>>>0,!nn){var gn=Math.pow(2,8*Gt)-1;_n(this,Ot,$t,Gt,gn,0)}var Xt=1,at=0;for(this[$t]=Ot&255;++at<Gt&&(Xt*=256);)this[$t+at]=Ot/Xt&255;return $t+Gt},et.prototype.writeUintBE=et.prototype.writeUIntBE=function(Ot,$t,Gt,nn){if(Ot=+Ot,$t=$t>>>0,Gt=Gt>>>0,!nn){var gn=Math.pow(2,8*Gt)-1;_n(this,Ot,$t,Gt,gn,0)}var Xt=Gt-1,at=1;for(this[$t+Xt]=Ot&255;--Xt>=0&&(at*=256);)this[$t+Xt]=Ot/at&255;return $t+Gt},et.prototype.writeUint8=et.prototype.writeUInt8=function(Ot,$t,Gt){return Ot=+Ot,$t=$t>>>0,Gt||_n(this,Ot,$t,1,255,0),this[$t]=Ot&255,$t+1},et.prototype.writeUint16LE=et.prototype.writeUInt16LE=function(Ot,$t,Gt){return Ot=+Ot,$t=$t>>>0,Gt||_n(this,Ot,$t,2,65535,0),this[$t]=Ot&255,this[$t+1]=Ot>>>8,$t+2},et.prototype.writeUint16BE=et.prototype.writeUInt16BE=function(Ot,$t,Gt){return Ot=+Ot,$t=$t>>>0,Gt||_n(this,Ot,$t,2,65535,0),this[$t]=Ot>>>8,this[$t+1]=Ot&255,$t+2},et.prototype.writeUint32LE=et.prototype.writeUInt32LE=function(Ot,$t,Gt){return Ot=+Ot,$t=$t>>>0,Gt||_n(this,Ot,$t,4,4294967295,0),this[$t+3]=Ot>>>24,this[$t+2]=Ot>>>16,this[$t+1]=Ot>>>8,this[$t]=Ot&255,$t+4},et.prototype.writeUint32BE=et.prototype.writeUInt32BE=function(Ot,$t,Gt){return Ot=+Ot,$t=$t>>>0,Gt||_n(this,Ot,$t,4,4294967295,0),this[$t]=Ot>>>24,this[$t+1]=Ot>>>16,this[$t+2]=Ot>>>8,this[$t+3]=Ot&255,$t+4},et.prototype.writeIntLE=function(Ot,$t,Gt,nn){if(Ot=+Ot,$t=$t>>>0,!nn){var gn=Math.pow(2,8*Gt-1);_n(this,Ot,$t,Gt,gn-1,-gn)}var Xt=0,at=1,Rt=0;for(this[$t]=Ot&255;++Xt<Gt&&(at*=256);)Ot<0&&Rt===0&&this[$t+Xt-1]!==0&&(Rt=1),this[$t+Xt]=(Ot/at>>0)-Rt&255;return $t+Gt},et.prototype.writeIntBE=function(Ot,$t,Gt,nn){if(Ot=+Ot,$t=$t>>>0,!nn){var gn=Math.pow(2,8*Gt-1);_n(this,Ot,$t,Gt,gn-1,-gn)}var Xt=Gt-1,at=1,Rt=0;for(this[$t+Xt]=Ot&255;--Xt>=0&&(at*=256);)Ot<0&&Rt===0&&this[$t+Xt+1]!==0&&(Rt=1),this[$t+Xt]=(Ot/at>>0)-Rt&255;return $t+Gt},et.prototype.writeInt8=function(Ot,$t,Gt){return Ot=+Ot,$t=$t>>>0,Gt||_n(this,Ot,$t,1,127,-128),Ot<0&&(Ot=255+Ot+1),this[$t]=Ot&255,$t+1},et.prototype.writeInt16LE=function(Ot,$t,Gt){return Ot=+Ot,$t=$t>>>0,Gt||_n(this,Ot,$t,2,32767,-32768),this[$t]=Ot&255,this[$t+1]=Ot>>>8,$t+2},et.prototype.writeInt16BE=function(Ot,$t,Gt){return Ot=+Ot,$t=$t>>>0,Gt||_n(this,Ot,$t,2,32767,-32768),this[$t]=Ot>>>8,this[$t+1]=Ot&255,$t+2},et.prototype.writeInt32LE=function(Ot,$t,Gt){return Ot=+Ot,$t=$t>>>0,Gt||_n(this,Ot,$t,4,2147483647,-2147483648),this[$t]=Ot&255,this[$t+1]=Ot>>>8,this[$t+2]=Ot>>>16,this[$t+3]=Ot>>>24,$t+4},et.prototype.writeInt32BE=function(Ot,$t,Gt){return Ot=+Ot,$t=$t>>>0,Gt||_n(this,Ot,$t,4,2147483647,-2147483648),Ot<0&&(Ot=4294967295+Ot+1),this[$t]=Ot>>>24,this[$t+1]=Ot>>>16,this[$t+2]=Ot>>>8,this[$t+3]=Ot&255,$t+4};function tn(Dt,Ot,$t,Gt,nn,gn){if($t+Gt>Dt.length)throw new RangeError("Index out of range");if($t<0)throw new RangeError("Index out of range")}function pn(Dt,Ot,$t,Gt,nn){return Ot=+Ot,$t=$t>>>0,nn||tn(Dt,Ot,$t,4),b.write(Dt,Ot,$t,Gt,23,4),$t+4}et.prototype.writeFloatLE=function(Ot,$t,Gt){return pn(this,Ot,$t,!0,Gt)},et.prototype.writeFloatBE=function(Ot,$t,Gt){return pn(this,Ot,$t,!1,Gt)};function yn(Dt,Ot,$t,Gt,nn){return Ot=+Ot,$t=$t>>>0,nn||tn(Dt,Ot,$t,8),b.write(Dt,Ot,$t,Gt,52,8),$t+8}et.prototype.writeDoubleLE=function(Ot,$t,Gt){return yn(this,Ot,$t,!0,Gt)},et.prototype.writeDoubleBE=function(Ot,$t,Gt){return yn(this,Ot,$t,!1,Gt)},et.prototype.copy=function(Ot,$t,Gt,nn){if(!et.isBuffer(Ot))throw new TypeError("argument should be a Buffer");if(Gt||(Gt=0),!nn&&nn!==0&&(nn=this.length),$t>=Ot.length&&($t=Ot.length),$t||($t=0),nn>0&&nn<Gt&&(nn=Gt),nn===Gt||Ot.length===0||this.length===0)return 0;if($t<0)throw new RangeError("targetStart out of bounds");if(Gt<0||Gt>=this.length)throw new RangeError("Index out of range");if(nn<0)throw new RangeError("sourceEnd out of bounds");nn>this.length&&(nn=this.length),Ot.length-$t<nn-Gt&&(nn=Ot.length-$t+Gt);var gn=nn-Gt;return this===Ot&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin($t,Gt,nn):Uint8Array.prototype.set.call(Ot,this.subarray(Gt,nn),$t),gn},et.prototype.fill=function(Ot,$t,Gt,nn){if(typeof Ot=="string"){if(typeof $t=="string"?(nn=$t,$t=0,Gt=this.length):typeof Gt=="string"&&(nn=Gt,Gt=this.length),nn!==void 0&&typeof nn!="string")throw new TypeError("encoding must be a string");if(typeof nn=="string"&&!et.isEncoding(nn))throw new TypeError("Unknown encoding: "+nn);if(Ot.length===1){var gn=Ot.charCodeAt(0);(nn==="utf8"&&gn<128||nn==="latin1")&&(Ot=gn)}}else typeof Ot=="number"?Ot=Ot&255:typeof Ot=="boolean"&&(Ot=Number(Ot));if($t<0||this.length<$t||this.length<Gt)throw new RangeError("Out of range index");if(Gt<=$t)return this;$t=$t>>>0,Gt=Gt===void 0?this.length:Gt>>>0,Ot||(Ot=0);var Xt;if(typeof Ot=="number")for(Xt=$t;Xt<Gt;++Xt)this[Xt]=Ot;else{var at=et.isBuffer(Ot)?Ot:et.from(Ot,nn),Rt=at.length;if(Rt===0)throw new TypeError('The value "'+Ot+'" is invalid for argument "value"');for(Xt=0;Xt<Gt-$t;++Xt)this[Xt+$t]=at[Xt%Rt]}return this};var In=/[^+/0-9A-Za-z-_]/g;function sn(Dt){if(Dt=Dt.split("=")[0],Dt=Dt.trim().replace(In,""),Dt.length<2)return"";for(;Dt.length%4!==0;)Dt=Dt+"=";return Dt}function vn(Dt,Ot){Ot=Ot||1/0;for(var $t,Gt=Dt.length,nn=null,gn=[],Xt=0;Xt<Gt;++Xt){if($t=Dt.charCodeAt(Xt),$t>55295&&$t<57344){if(!nn){if($t>56319){(Ot-=3)>-1&&gn.push(239,191,189);continue}else if(Xt+1===Gt){(Ot-=3)>-1&&gn.push(239,191,189);continue}nn=$t;continue}if($t<56320){(Ot-=3)>-1&&gn.push(239,191,189),nn=$t;continue}$t=(nn-55296<<10|$t-56320)+65536}else nn&&(Ot-=3)>-1&&gn.push(239,191,189);if(nn=null,$t<128){if((Ot-=1)<0)break;gn.push($t)}else if($t<2048){if((Ot-=2)<0)break;gn.push($t>>6|192,$t&63|128)}else if($t<65536){if((Ot-=3)<0)break;gn.push($t>>12|224,$t>>6&63|128,$t&63|128)}else if($t<1114112){if((Ot-=4)<0)break;gn.push($t>>18|240,$t>>12&63|128,$t>>6&63|128,$t&63|128)}else throw new Error("Invalid code point")}return gn}function Cn(Dt){for(var Ot=[],$t=0;$t<Dt.length;++$t)Ot.push(Dt.charCodeAt($t)&255);return Ot}function Nn(Dt,Ot){for(var $t,Gt,nn,gn=[],Xt=0;Xt<Dt.length&&!((Ot-=2)<0);++Xt)$t=Dt.charCodeAt(Xt),Gt=$t>>8,nn=$t%256,gn.push(nn),gn.push(Gt);return gn}function fn(Dt){return c.toByteArray(sn(Dt))}function ut(Dt,Ot,$t,Gt){for(var nn=0;nn<Gt&&!(nn+$t>=Ot.length||nn>=Dt.length);++nn)Ot[nn+$t]=Dt[nn];return nn}function It(Dt,Ot){return Dt instanceof Ot||Dt!=null&&Dt.constructor!=null&&Dt.constructor.name!=null&&Dt.constructor.name===Ot.name}function Pt(Dt){return Dt!==Dt}var Zt=function(){for(var Dt="0123456789abcdef",Ot=new Array(256),$t=0;$t<16;++$t)for(var Gt=$t*16,nn=0;nn<16;++nn)Ot[Gt+nn]=Dt[$t]+Dt[nn];return Ot}()})(buffer);(function(a,c){var b=buffer,_=b.Buffer;function k(_e,et){for(var nt in _e)et[nt]=_e[nt]}_.from&&_.alloc&&_.allocUnsafe&&_.allocUnsafeSlow?a.exports=b:(k(b,c),c.Buffer=j);function j(_e,et,nt){return _(_e,et,nt)}k(_,j),j.from=function(_e,et,nt){if(typeof _e=="number")throw new TypeError("Argument must not be a number");return _(_e,et,nt)},j.alloc=function(_e,et,nt){if(typeof _e!="number")throw new TypeError("Argument must be a number");var it=_(_e);return et!==void 0?typeof nt=="string"?it.fill(et,nt):it.fill(et):it.fill(0),it},j.allocUnsafe=function(_e){if(typeof _e!="number")throw new TypeError("Argument must be a number");return _(_e)},j.allocUnsafeSlow=function(_e){if(typeof _e!="number")throw new TypeError("Argument must be a number");return b.SlowBuffer(_e)}})(safeBuffer,safeBuffer.exports);var safeBufferExports=safeBuffer.exports,util$4={},types$1={},shams$1=function a(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var c={},b=Symbol("test"),_=Object(b);if(typeof b=="string"||Object.prototype.toString.call(b)!=="[object Symbol]"||Object.prototype.toString.call(_)!=="[object Symbol]")return!1;var k=42;c[b]=k;for(b in c)return!1;if(typeof Object.keys=="function"&&Object.keys(c).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(c).length!==0)return!1;var j=Object.getOwnPropertySymbols(c);if(j.length!==1||j[0]!==b||!Object.prototype.propertyIsEnumerable.call(c,b))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var _e=Object.getOwnPropertyDescriptor(c,b);if(_e.value!==k||_e.enumerable!==!0)return!1}return!0},hasSymbols$2=shams$1,shams=function a(){return hasSymbols$2()&&!!Symbol.toStringTag},esErrors=Error,_eval=EvalError,range=RangeError,ref$1=ReferenceError,syntax=SyntaxError,type=TypeError,uri=URIError,origSymbol=typeof Symbol<"u"&&Symbol,hasSymbolSham=shams$1,hasSymbols$1=function a(){return typeof origSymbol!="function"||typeof Symbol!="function"||typeof origSymbol("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:hasSymbolSham()},test={foo:{}},$Object=Object,hasProto$1=function a(){return{__proto__:test}.foo===test.foo&&!({__proto__:null}instanceof $Object)},ERROR_MESSAGE="Function.prototype.bind called on incompatible ",toStr$3=Object.prototype.toString,max=Math.max,funcType="[object Function]",concatty=function a(c,b){for(var _=[],k=0;k<c.length;k+=1)_[k]=c[k];for(var j=0;j<b.length;j+=1)_[j+c.length]=b[j];return _},slicy=function a(c,b){for(var _=[],k=b||0,j=0;k<c.length;k+=1,j+=1)_[j]=c[k];return _},joiny=function(a,c){for(var b="",_=0;_<a.length;_+=1)b+=a[_],_+1<a.length&&(b+=c);return b},implementation$1=function a(c){var b=this;if(typeof b!="function"||toStr$3.apply(b)!==funcType)throw new TypeError(ERROR_MESSAGE+b);for(var _=slicy(arguments,1),k,j=function(){if(this instanceof k){var ft=b.apply(this,concatty(_,arguments));return Object(ft)===ft?ft:this}return b.apply(c,concatty(_,arguments))},_e=max(0,b.length-_.length),et=[],nt=0;nt<_e;nt++)et[nt]="$"+nt;if(k=Function("binder","return function ("+joiny(et,",")+"){ return binder.apply(this,arguments); }")(j),b.prototype){var it=function(){};it.prototype=b.prototype,k.prototype=new it,it.prototype=null}return k},implementation=implementation$1,functionBind=Function.prototype.bind||implementation,call=Function.prototype.call,$hasOwn=Object.prototype.hasOwnProperty,bind$4=functionBind,hasown=bind$4.call(call,$hasOwn),undefined$1,$Error=esErrors,$EvalError=_eval,$RangeError=range,$ReferenceError=ref$1,$SyntaxError$1=syntax,$TypeError$2=type,$URIError=uri,$Function=Function,getEvalledConstructor=function(a){try{return $Function('"use strict"; return ('+a+").constructor;")()}catch{}},$gOPD$1=Object.getOwnPropertyDescriptor;if($gOPD$1)try{$gOPD$1({},"")}catch{$gOPD$1=null}var throwTypeError=function(){throw new $TypeError$2},ThrowTypeError=$gOPD$1?function(){try{return arguments.callee,throwTypeError}catch{try{return $gOPD$1(arguments,"callee").get}catch{return throwTypeError}}}():throwTypeError,hasSymbols=hasSymbols$1(),hasProto=hasProto$1(),getProto$1=Object.getPrototypeOf||(hasProto?function(a){return a.__proto__}:null),needsEval={},TypedArray=typeof Uint8Array>"u"||!getProto$1?undefined$1:getProto$1(Uint8Array),INTRINSICS={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?undefined$1:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?undefined$1:ArrayBuffer,"%ArrayIteratorPrototype%":hasSymbols&&getProto$1?getProto$1([][Symbol.iterator]()):undefined$1,"%AsyncFromSyncIteratorPrototype%":undefined$1,"%AsyncFunction%":needsEval,"%AsyncGenerator%":needsEval,"%AsyncGeneratorFunction%":needsEval,"%AsyncIteratorPrototype%":needsEval,"%Atomics%":typeof Atomics>"u"?undefined$1:Atomics,"%BigInt%":typeof BigInt>"u"?undefined$1:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?undefined$1:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?undefined$1:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?undefined$1:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":$Error,"%eval%":eval,"%EvalError%":$EvalError,"%Float32Array%":typeof Float32Array>"u"?undefined$1:Float32Array,"%Float64Array%":typeof Float64Array>"u"?undefined$1:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?undefined$1:FinalizationRegistry,"%Function%":$Function,"%GeneratorFunction%":needsEval,"%Int8Array%":typeof Int8Array>"u"?undefined$1:Int8Array,"%Int16Array%":typeof Int16Array>"u"?undefined$1:Int16Array,"%Int32Array%":typeof Int32Array>"u"?undefined$1:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":hasSymbols&&getProto$1?getProto$1(getProto$1([][Symbol.iterator]())):undefined$1,"%JSON%":typeof JSON=="object"?JSON:undefined$1,"%Map%":typeof Map>"u"?undefined$1:Map,"%MapIteratorPrototype%":typeof Map>"u"||!hasSymbols||!getProto$1?undefined$1:getProto$1(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?undefined$1:Promise,"%Proxy%":typeof Proxy>"u"?undefined$1:Proxy,"%RangeError%":$RangeError,"%ReferenceError%":$ReferenceError,"%Reflect%":typeof Reflect>"u"?undefined$1:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?undefined$1:Set,"%SetIteratorPrototype%":typeof Set>"u"||!hasSymbols||!getProto$1?undefined$1:getProto$1(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?undefined$1:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":hasSymbols&&getProto$1?getProto$1(""[Symbol.iterator]()):undefined$1,"%Symbol%":hasSymbols?Symbol:undefined$1,"%SyntaxError%":$SyntaxError$1,"%ThrowTypeError%":ThrowTypeError,"%TypedArray%":TypedArray,"%TypeError%":$TypeError$2,"%Uint8Array%":typeof Uint8Array>"u"?undefined$1:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?undefined$1:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?undefined$1:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?undefined$1:Uint32Array,"%URIError%":$URIError,"%WeakMap%":typeof WeakMap>"u"?undefined$1:WeakMap,"%WeakRef%":typeof WeakRef>"u"?undefined$1:WeakRef,"%WeakSet%":typeof WeakSet>"u"?undefined$1:WeakSet};if(getProto$1)try{null.error}catch(a){var errorProto=getProto$1(getProto$1(a));INTRINSICS["%Error.prototype%"]=errorProto}var doEval=function a(c){var b;if(c==="%AsyncFunction%")b=getEvalledConstructor("async function () {}");else if(c==="%GeneratorFunction%")b=getEvalledConstructor("function* () {}");else if(c==="%AsyncGeneratorFunction%")b=getEvalledConstructor("async function* () {}");else if(c==="%AsyncGenerator%"){var _=a("%AsyncGeneratorFunction%");_&&(b=_.prototype)}else if(c==="%AsyncIteratorPrototype%"){var k=a("%AsyncGenerator%");k&&getProto$1&&(b=getProto$1(k.prototype))}return INTRINSICS[c]=b,b},LEGACY_ALIASES={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},bind$3=functionBind,hasOwn=hasown,$concat=bind$3.call(Function.call,Array.prototype.concat),$spliceApply=bind$3.call(Function.apply,Array.prototype.splice),$replace=bind$3.call(Function.call,String.prototype.replace),$strSlice=bind$3.call(Function.call,String.prototype.slice),$exec=bind$3.call(Function.call,RegExp.prototype.exec),rePropName=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,reEscapeChar=/\\(\\)?/g,stringToPath=function a(c){var b=$strSlice(c,0,1),_=$strSlice(c,-1);if(b==="%"&&_!=="%")throw new $SyntaxError$1("invalid intrinsic syntax, expected closing `%`");if(_==="%"&&b!=="%")throw new $SyntaxError$1("invalid intrinsic syntax, expected opening `%`");var k=[];return $replace(c,rePropName,function(j,_e,et,nt){k[k.length]=et?$replace(nt,reEscapeChar,"$1"):_e||j}),k},getBaseIntrinsic=function a(c,b){var _=c,k;if(hasOwn(LEGACY_ALIASES,_)&&(k=LEGACY_ALIASES[_],_="%"+k[0]+"%"),hasOwn(INTRINSICS,_)){var j=INTRINSICS[_];if(j===needsEval&&(j=doEval(_)),typeof j>"u"&&!b)throw new $TypeError$2("intrinsic "+c+" exists, but is not available. Please file an issue!");return{alias:k,name:_,value:j}}throw new $SyntaxError$1("intrinsic "+c+" does not exist!")},getIntrinsic=function a(c,b){if(typeof c!="string"||c.length===0)throw new $TypeError$2("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof b!="boolean")throw new $TypeError$2('"allowMissing" argument must be a boolean');if($exec(/^%?[^%]*%?$/,c)===null)throw new $SyntaxError$1("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var _=stringToPath(c),k=_.length>0?_[0]:"",j=getBaseIntrinsic("%"+k+"%",b),_e=j.name,et=j.value,nt=!1,it=j.alias;it&&(k=it[0],$spliceApply(_,$concat([0,1],it)));for(var ft=1,pt=!0;ft<_.length;ft+=1){var mt=_[ft],St=$strSlice(mt,0,1),yt=$strSlice(mt,-1);if((St==='"'||St==="'"||St==="`"||yt==='"'||yt==="'"||yt==="`")&&St!==yt)throw new $SyntaxError$1("property names with quotes must have matching quotes");if((mt==="constructor"||!pt)&&(nt=!0),k+="."+mt,_e="%"+k+"%",hasOwn(INTRINSICS,_e))et=INTRINSICS[_e];else if(et!=null){if(!(mt in et)){if(!b)throw new $TypeError$2("base intrinsic for "+c+" exists, but the property is not available.");return}if($gOPD$1&&ft+1>=_.length){var _t=$gOPD$1(et,mt);pt=!!_t,pt&&"get"in _t&&!("originalValue"in _t.get)?et=_t.get:et=et[mt]}else pt=hasOwn(et,mt),et=et[mt];pt&&!nt&&(INTRINSICS[_e]=et)}}return et},callBind$2={exports:{}},esDefineProperty,hasRequiredEsDefineProperty;function requireEsDefineProperty(){if(hasRequiredEsDefineProperty)return esDefineProperty;hasRequiredEsDefineProperty=1;var a=getIntrinsic,c=a("%Object.defineProperty%",!0)||!1;if(c)try{c({},"a",{value:1})}catch{c=!1}return esDefineProperty=c,esDefineProperty}var GetIntrinsic$2=getIntrinsic,$gOPD=GetIntrinsic$2("%Object.getOwnPropertyDescriptor%",!0);if($gOPD)try{$gOPD([],"length")}catch{$gOPD=null}var gopd$1=$gOPD,$defineProperty$1=requireEsDefineProperty(),$SyntaxError=syntax,$TypeError$1=type,gopd=gopd$1,defineDataProperty=function a(c,b,_){if(!c||typeof c!="object"&&typeof c!="function")throw new $TypeError$1("`obj` must be an object or a function`");if(typeof b!="string"&&typeof b!="symbol")throw new $TypeError$1("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new $TypeError$1("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new $TypeError$1("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new $TypeError$1("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new $TypeError$1("`loose`, if provided, must be a boolean");var k=arguments.length>3?arguments[3]:null,j=arguments.length>4?arguments[4]:null,_e=arguments.length>5?arguments[5]:null,et=arguments.length>6?arguments[6]:!1,nt=!!gopd&&gopd(c,b);if($defineProperty$1)$defineProperty$1(c,b,{configurable:_e===null&&nt?nt.configurable:!_e,enumerable:k===null&&nt?nt.enumerable:!k,value:_,writable:j===null&&nt?nt.writable:!j});else if(et||!k&&!j&&!_e)c[b]=_;else throw new $SyntaxError("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")},$defineProperty=requireEsDefineProperty(),hasPropertyDescriptors=function a(){return!!$defineProperty};hasPropertyDescriptors.hasArrayLengthDefineBug=function a(){if(!$defineProperty)return null;try{return $defineProperty([],"length",{value:1}).length!==1}catch{return!0}};var hasPropertyDescriptors_1=hasPropertyDescriptors,GetIntrinsic$1=getIntrinsic,define=defineDataProperty,hasDescriptors=hasPropertyDescriptors_1(),gOPD$1=gopd$1,$TypeError=type,$floor=GetIntrinsic$1("%Math.floor%"),setFunctionLength=function a(c,b){if(typeof c!="function")throw new $TypeError("`fn` is not a function");if(typeof b!="number"||b<0||b>4294967295||$floor(b)!==b)throw new $TypeError("`length` must be a positive 32-bit integer");var _=arguments.length>2&&!!arguments[2],k=!0,j=!0;if("length"in c&&gOPD$1){var _e=gOPD$1(c,"length");_e&&!_e.configurable&&(k=!1),_e&&!_e.writable&&(j=!1)}return(k||j||!_)&&(hasDescriptors?define(c,"length",b,!0,!0):define(c,"length",b)),c};(function(a){var c=functionBind,b=getIntrinsic,_=setFunctionLength,k=type,j=b("%Function.prototype.apply%"),_e=b("%Function.prototype.call%"),et=b("%Reflect.apply%",!0)||c.call(_e,j),nt=requireEsDefineProperty(),it=b("%Math.max%");a.exports=function(mt){if(typeof mt!="function")throw new k("a function is required");var St=et(c,_e,arguments);return _(St,1+it(0,mt.length-(arguments.length-1)),!0)};var ft=function(){return et(c,j,arguments)};nt?nt(a.exports,"apply",{value:ft}):a.exports.apply=ft})(callBind$2);var callBindExports=callBind$2.exports,GetIntrinsic=getIntrinsic,callBind$1=callBindExports,$indexOf$1=callBind$1(GetIntrinsic("String.prototype.indexOf")),callBound$2=function a(c,b){var _=GetIntrinsic(c,!!b);return typeof _=="function"&&$indexOf$1(c,".prototype.")>-1?callBind$1(_):_},hasToStringTag$3=shams(),callBound$1=callBound$2,$toString$1=callBound$1("Object.prototype.toString"),isStandardArguments=function a(c){return hasToStringTag$3&&c&&typeof c=="object"&&Symbol.toStringTag in c?!1:$toString$1(c)==="[object Arguments]"},isLegacyArguments=function a(c){return isStandardArguments(c)?!0:c!==null&&typeof c=="object"&&typeof c.length=="number"&&c.length>=0&&$toString$1(c)!=="[object Array]"&&$toString$1(c.callee)==="[object Function]"},supportsStandardArguments=function(){return isStandardArguments(arguments)}();isStandardArguments.isLegacyArguments=isLegacyArguments;var isArguments$1=supportsStandardArguments?isStandardArguments:isLegacyArguments,toStr$2=Object.prototype.toString,fnToStr$1=Function.prototype.toString,isFnRegex=/^\s*(?:function)?\*/,hasToStringTag$2=shams(),getProto=Object.getPrototypeOf,getGeneratorFunc=function(){if(!hasToStringTag$2)return!1;try{return Function("return function*() {}")()}catch{}},GeneratorFunction,isGeneratorFunction=function a(c){if(typeof c!="function")return!1;if(isFnRegex.test(fnToStr$1.call(c)))return!0;if(!hasToStringTag$2){var b=toStr$2.call(c);return b==="[object GeneratorFunction]"}if(!getProto)return!1;if(typeof GeneratorFunction>"u"){var _=getGeneratorFunc();GeneratorFunction=_?getProto(_):!1}return getProto(c)===GeneratorFunction},fnToStr=Function.prototype.toString,reflectApply=typeof Reflect=="object"&&Reflect!==null&&Reflect.apply,badArrayLike,isCallableMarker;if(typeof reflectApply=="function"&&typeof Object.defineProperty=="function")try{badArrayLike=Object.defineProperty({},"length",{get:function(){throw isCallableMarker}}),isCallableMarker={},reflectApply(function(){throw 42},null,badArrayLike)}catch(a){a!==isCallableMarker&&(reflectApply=null)}else reflectApply=null;var constructorRegex=/^\s*class\b/,isES6ClassFn=function a(c){try{var b=fnToStr.call(c);return constructorRegex.test(b)}catch{return!1}},tryFunctionObject=function a(c){try{return isES6ClassFn(c)?!1:(fnToStr.call(c),!0)}catch{return!1}},toStr$1=Object.prototype.toString,fnClass="[object Function]",genClass="[object GeneratorFunction]",hasToStringTag$1=typeof Symbol=="function"&&!!Symbol.toStringTag,documentDotAll=typeof document=="object"&&typeof document.all>"u"&&document.all!==void 0?document.all:{},isCallable$1=reflectApply?function a(c){if(c===documentDotAll)return!0;if(!c||typeof c!="function"&&typeof c!="object")return!1;if(typeof c=="function"&&!c.prototype)return!0;try{reflectApply(c,null,badArrayLike)}catch(b){if(b!==isCallableMarker)return!1}return!isES6ClassFn(c)}:function a(c){if(c===documentDotAll)return!0;if(!c||typeof c!="function"&&typeof c!="object")return!1;if(typeof c=="function"&&!c.prototype)return!0;if(hasToStringTag$1)return tryFunctionObject(c);if(isES6ClassFn(c))return!1;var b=toStr$1.call(c);return b===fnClass||b===genClass},isCallable=isCallable$1,toStr=Object.prototype.toString,hasOwnProperty$2=Object.prototype.hasOwnProperty,forEachArray=function a(c,b,_){for(var k=0,j=c.length;k<j;k++)hasOwnProperty$2.call(c,k)&&(_==null?b(c[k],k,c):b.call(_,c[k],k,c))},forEachString=function a(c,b,_){for(var k=0,j=c.length;k<j;k++)_==null?b(c.charAt(k),k,c):b.call(_,c.charAt(k),k,c)},forEachObject=function a(c,b,_){for(var k in c)hasOwnProperty$2.call(c,k)&&(_==null?b(c[k],k,c):b.call(_,c[k],k,c))},forEach$2=function a(c,b,_){if(!isCallable(b))throw new TypeError("iterator must be a function");var k;arguments.length>=3&&(k=_),toStr.call(c)==="[object Array]"?forEachArray(c,b,k):typeof c=="string"?forEachString(c,b,k):forEachObject(c,b,k)},forEach_1=forEach$2,possibleNames=["BigInt64Array","BigUint64Array","Float32Array","Float64Array","Int16Array","Int32Array","Int8Array","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray"],g$1=typeof globalThis>"u"?commonjsGlobal$1:globalThis,availableTypedArrays$1=function a(){for(var c=[],b=0;b<possibleNames.length;b++)typeof g$1[possibleNames[b]]=="function"&&(c[c.length]=possibleNames[b]);return c},forEach$1=forEach_1,availableTypedArrays=availableTypedArrays$1,callBind=callBindExports,callBound=callBound$2,gOPD=gopd$1,$toString=callBound("Object.prototype.toString"),hasToStringTag=shams(),g=typeof globalThis>"u"?commonjsGlobal$1:globalThis,typedArrays=availableTypedArrays(),$slice=callBound("String.prototype.slice"),getPrototypeOf=Object.getPrototypeOf,$indexOf=callBound("Array.prototype.indexOf",!0)||function a(c,b){for(var _=0;_<c.length;_+=1)if(c[_]===b)return _;return-1},cache$2={__proto__:null};hasToStringTag&&gOPD&&getPrototypeOf?forEach$1(typedArrays,function(a){var c=new g[a];if(Symbol.toStringTag in c){var b=getPrototypeOf(c),_=gOPD(b,Symbol.toStringTag);if(!_){var k=getPrototypeOf(b);_=gOPD(k,Symbol.toStringTag)}cache$2["$"+a]=callBind(_.get)}}):forEach$1(typedArrays,function(a){var c=new g[a],b=c.slice||c.set;b&&(cache$2["$"+a]=callBind(b))});var tryTypedArrays=function a(c){var b=!1;return forEach$1(cache$2,function(_,k){if(!b)try{"$"+_(c)===k&&(b=$slice(k,1))}catch{}}),b},trySlices=function a(c){var b=!1;return forEach$1(cache$2,function(_,k){if(!b)try{_(c),b=$slice(k,1)}catch{}}),b},whichTypedArray$1=function a(c){if(!c||typeof c!="object")return!1;if(!hasToStringTag){var b=$slice($toString(c),8,-1);return $indexOf(typedArrays,b)>-1?b:b!=="Object"?!1:trySlices(c)}return gOPD?tryTypedArrays(c):null},whichTypedArray=whichTypedArray$1,isTypedArray=function a(c){return!!whichTypedArray(c)};(function(a){var c=isArguments$1,b=isGeneratorFunction,_=whichTypedArray$1,k=isTypedArray;function j(Gt){return Gt.call.bind(Gt)}var _e=typeof BigInt<"u",et=typeof Symbol<"u",nt=j(Object.prototype.toString),it=j(Number.prototype.valueOf),ft=j(String.prototype.valueOf),pt=j(Boolean.prototype.valueOf);if(_e)var mt=j(BigInt.prototype.valueOf);if(et)var St=j(Symbol.prototype.valueOf);function yt(Gt,nn){if(typeof Gt!="object")return!1;try{return nn(Gt),!0}catch{return!1}}a.isArgumentsObject=c,a.isGeneratorFunction=b,a.isTypedArray=k;function _t(Gt){return typeof Promise<"u"&&Gt instanceof Promise||Gt!==null&&typeof Gt=="object"&&typeof Gt.then=="function"&&typeof Gt.catch=="function"}a.isPromise=_t;function Tt(Gt){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?ArrayBuffer.isView(Gt):k(Gt)||tn(Gt)}a.isArrayBufferView=Tt;function gt(Gt){return _(Gt)==="Uint8Array"}a.isUint8Array=gt;function ht(Gt){return _(Gt)==="Uint8ClampedArray"}a.isUint8ClampedArray=ht;function Et(Gt){return _(Gt)==="Uint16Array"}a.isUint16Array=Et;function At(Gt){return _(Gt)==="Uint32Array"}a.isUint32Array=At;function Bt(Gt){return _(Gt)==="Int8Array"}a.isInt8Array=Bt;function qt(Gt){return _(Gt)==="Int16Array"}a.isInt16Array=qt;function zt(Gt){return _(Gt)==="Int32Array"}a.isInt32Array=zt;function Ht(Gt){return _(Gt)==="Float32Array"}a.isFloat32Array=Ht;function ct(Gt){return _(Gt)==="Float64Array"}a.isFloat64Array=ct;function dt(Gt){return _(Gt)==="BigInt64Array"}a.isBigInt64Array=dt;function lt(Gt){return _(Gt)==="BigUint64Array"}a.isBigUint64Array=lt;function kt(Gt){return nt(Gt)==="[object Map]"}kt.working=typeof Map<"u"&&kt(new Map);function Lt(Gt){return typeof Map>"u"?!1:kt.working?kt(Gt):Gt instanceof Map}a.isMap=Lt;function Jt(Gt){return nt(Gt)==="[object Set]"}Jt.working=typeof Set<"u"&&Jt(new Set);function en(Gt){return typeof Set>"u"?!1:Jt.working?Jt(Gt):Gt instanceof Set}a.isSet=en;function Qt(Gt){return nt(Gt)==="[object WeakMap]"}Qt.working=typeof WeakMap<"u"&&Qt(new WeakMap);function xt(Gt){return typeof WeakMap>"u"?!1:Qt.working?Qt(Gt):Gt instanceof WeakMap}a.isWeakMap=xt;function rn(Gt){return nt(Gt)==="[object WeakSet]"}rn.working=typeof WeakSet<"u"&&rn(new WeakSet);function Sn(Gt){return rn(Gt)}a.isWeakSet=Sn;function bn(Gt){return nt(Gt)==="[object ArrayBuffer]"}bn.working=typeof ArrayBuffer<"u"&&bn(new ArrayBuffer);function kn(Gt){return typeof ArrayBuffer>"u"?!1:bn.working?bn(Gt):Gt instanceof ArrayBuffer}a.isArrayBuffer=kn;function _n(Gt){return nt(Gt)==="[object DataView]"}_n.working=typeof ArrayBuffer<"u"&&typeof DataView<"u"&&_n(new DataView(new ArrayBuffer(1),0,1));function tn(Gt){return typeof DataView>"u"?!1:_n.working?_n(Gt):Gt instanceof DataView}a.isDataView=tn;var pn=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:void 0;function yn(Gt){return nt(Gt)==="[object SharedArrayBuffer]"}function In(Gt){return typeof pn>"u"?!1:(typeof yn.working>"u"&&(yn.working=yn(new pn)),yn.working?yn(Gt):Gt instanceof pn)}a.isSharedArrayBuffer=In;function sn(Gt){return nt(Gt)==="[object AsyncFunction]"}a.isAsyncFunction=sn;function vn(Gt){return nt(Gt)==="[object Map Iterator]"}a.isMapIterator=vn;function Cn(Gt){return nt(Gt)==="[object Set Iterator]"}a.isSetIterator=Cn;function Nn(Gt){return nt(Gt)==="[object Generator]"}a.isGeneratorObject=Nn;function fn(Gt){return nt(Gt)==="[object WebAssembly.Module]"}a.isWebAssemblyCompiledModule=fn;function ut(Gt){return yt(Gt,it)}a.isNumberObject=ut;function It(Gt){return yt(Gt,ft)}a.isStringObject=It;function Pt(Gt){return yt(Gt,pt)}a.isBooleanObject=Pt;function Zt(Gt){return _e&&yt(Gt,mt)}a.isBigIntObject=Zt;function Dt(Gt){return et&&yt(Gt,St)}a.isSymbolObject=Dt;function Ot(Gt){return ut(Gt)||It(Gt)||Pt(Gt)||Zt(Gt)||Dt(Gt)}a.isBoxedPrimitive=Ot;function $t(Gt){return typeof Uint8Array<"u"&&(kn(Gt)||In(Gt))}a.isAnyArrayBuffer=$t,["isProxy","isExternal","isModuleNamespaceObject"].forEach(function(Gt){Object.defineProperty(a,Gt,{enumerable:!1,value:function(){throw new Error(Gt+" is not supported in userland")}})})})(types$1);var isBufferBrowser=function a(c){return c&&typeof c=="object"&&typeof c.copy=="function"&&typeof c.fill=="function"&&typeof c.readUInt8=="function"},inherits_browser={exports:{}};typeof Object.create=="function"?inherits_browser.exports=function(c,b){b&&(c.super_=b,c.prototype=Object.create(b.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}))}:inherits_browser.exports=function(c,b){if(b){c.super_=b;var _=function(){};_.prototype=b.prototype,c.prototype=new _,c.prototype.constructor=c}};var inherits_browserExports=inherits_browser.exports;(function(a){var c={},b=Object.getOwnPropertyDescriptors||function(pn){for(var yn=Object.keys(pn),In={},sn=0;sn<yn.length;sn++)In[yn[sn]]=Object.getOwnPropertyDescriptor(pn,yn[sn]);return In},_=/%[sdj%]/g;a.format=function(tn){if(!qt(tn)){for(var pn=[],yn=0;yn<arguments.length;yn++)pn.push(et(arguments[yn]));return pn.join(" ")}for(var yn=1,In=arguments,sn=In.length,vn=String(tn).replace(_,function(Nn){if(Nn==="%%")return"%";if(yn>=sn)return Nn;switch(Nn){case"%s":return String(In[yn++]);case"%d":return Number(In[yn++]);case"%j":try{return JSON.stringify(In[yn++])}catch{return"[Circular]"}default:return Nn}}),Cn=In[yn];yn<sn;Cn=In[++yn])Et(Cn)||!dt(Cn)?vn+=" "+Cn:vn+=" "+et(Cn);return vn},a.deprecate=function(tn,pn){if(typeof process<"u"&&process.noDeprecation===!0)return tn;if(typeof process>"u")return function(){return a.deprecate(tn,pn).apply(this,arguments)};var yn=!1;function In(){if(!yn){if(process.throwDeprecation)throw new Error(pn);process.traceDeprecation?console.trace(pn):console.error(pn),yn=!0}return tn.apply(this,arguments)}return In};var k={},j=/^$/;if(c.NODE_DEBUG){var _e=c.NODE_DEBUG;_e=_e.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),j=new RegExp("^"+_e+"$","i")}a.debuglog=function(tn){if(tn=tn.toUpperCase(),!k[tn])if(j.test(tn)){var pn=process.pid;k[tn]=function(){var yn=a.format.apply(a,arguments);console.error("%s %d: %s",tn,pn,yn)}}else k[tn]=function(){};return k[tn]};function et(tn,pn){var yn={seen:[],stylize:it};return arguments.length>=3&&(yn.depth=arguments[2]),arguments.length>=4&&(yn.colors=arguments[3]),ht(pn)?yn.showHidden=pn:pn&&a._extend(yn,pn),Ht(yn.showHidden)&&(yn.showHidden=!1),Ht(yn.depth)&&(yn.depth=2),Ht(yn.colors)&&(yn.colors=!1),Ht(yn.customInspect)&&(yn.customInspect=!0),yn.colors&&(yn.stylize=nt),pt(yn,tn,yn.depth)}a.inspect=et,et.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},et.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function nt(tn,pn){var yn=et.styles[pn];return yn?"\x1B["+et.colors[yn][0]+"m"+tn+"\x1B["+et.colors[yn][1]+"m":tn}function it(tn,pn){return tn}function ft(tn){var pn={};return tn.forEach(function(yn,In){pn[yn]=!0}),pn}function pt(tn,pn,yn){if(tn.customInspect&&pn&&Lt(pn.inspect)&&pn.inspect!==a.inspect&&!(pn.constructor&&pn.constructor.prototype===pn)){var In=pn.inspect(yn,tn);return qt(In)||(In=pt(tn,In,yn)),In}var sn=mt(tn,pn);if(sn)return sn;var vn=Object.keys(pn),Cn=ft(vn);if(tn.showHidden&&(vn=Object.getOwnPropertyNames(pn)),kt(pn)&&(vn.indexOf("message")>=0||vn.indexOf("description")>=0))return St(pn);if(vn.length===0){if(Lt(pn)){var Nn=pn.name?": "+pn.name:"";return tn.stylize("[Function"+Nn+"]","special")}if(ct(pn))return tn.stylize(RegExp.prototype.toString.call(pn),"regexp");if(lt(pn))return tn.stylize(Date.prototype.toString.call(pn),"date");if(kt(pn))return St(pn)}var fn="",ut=!1,It=["{","}"];if(gt(pn)&&(ut=!0,It=["[","]"]),Lt(pn)){var Pt=pn.name?": "+pn.name:"";fn=" [Function"+Pt+"]"}if(ct(pn)&&(fn=" "+RegExp.prototype.toString.call(pn)),lt(pn)&&(fn=" "+Date.prototype.toUTCString.call(pn)),kt(pn)&&(fn=" "+St(pn)),vn.length===0&&(!ut||pn.length==0))return It[0]+fn+It[1];if(yn<0)return ct(pn)?tn.stylize(RegExp.prototype.toString.call(pn),"regexp"):tn.stylize("[Object]","special");tn.seen.push(pn);var Zt;return ut?Zt=yt(tn,pn,yn,Cn,vn):Zt=vn.map(function(Dt){return _t(tn,pn,yn,Cn,Dt,ut)}),tn.seen.pop(),Tt(Zt,fn,It)}function mt(tn,pn){if(Ht(pn))return tn.stylize("undefined","undefined");if(qt(pn)){var yn="'"+JSON.stringify(pn).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return tn.stylize(yn,"string")}if(Bt(pn))return tn.stylize(""+pn,"number");if(ht(pn))return tn.stylize(""+pn,"boolean");if(Et(pn))return tn.stylize("null","null")}function St(tn){return"["+Error.prototype.toString.call(tn)+"]"}function yt(tn,pn,yn,In,sn){for(var vn=[],Cn=0,Nn=pn.length;Cn<Nn;++Cn)Sn(pn,String(Cn))?vn.push(_t(tn,pn,yn,In,String(Cn),!0)):vn.push("");return sn.forEach(function(fn){fn.match(/^\d+$/)||vn.push(_t(tn,pn,yn,In,fn,!0))}),vn}function _t(tn,pn,yn,In,sn,vn){var Cn,Nn,fn;if(fn=Object.getOwnPropertyDescriptor(pn,sn)||{value:pn[sn]},fn.get?fn.set?Nn=tn.stylize("[Getter/Setter]","special"):Nn=tn.stylize("[Getter]","special"):fn.set&&(Nn=tn.stylize("[Setter]","special")),Sn(In,sn)||(Cn="["+sn+"]"),Nn||(tn.seen.indexOf(fn.value)<0?(Et(yn)?Nn=pt(tn,fn.value,null):Nn=pt(tn,fn.value,yn-1),Nn.indexOf(`
`)>-1&&(vn?Nn=Nn.split(`
`).map(function(ut){return"  "+ut}).join(`
`).slice(2):Nn=`
`+Nn.split(`
`).map(function(ut){return"   "+ut}).join(`
`))):Nn=tn.stylize("[Circular]","special")),Ht(Cn)){if(vn&&sn.match(/^\d+$/))return Nn;Cn=JSON.stringify(""+sn),Cn.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(Cn=Cn.slice(1,-1),Cn=tn.stylize(Cn,"name")):(Cn=Cn.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),Cn=tn.stylize(Cn,"string"))}return Cn+": "+Nn}function Tt(tn,pn,yn){var In=tn.reduce(function(sn,vn){return vn.indexOf(`
`)>=0,sn+vn.replace(/\u001b\[\d\d?m/g,"").length+1},0);return In>60?yn[0]+(pn===""?"":pn+`
 `)+" "+tn.join(`,
  `)+" "+yn[1]:yn[0]+pn+" "+tn.join(", ")+" "+yn[1]}a.types=types$1;function gt(tn){return Array.isArray(tn)}a.isArray=gt;function ht(tn){return typeof tn=="boolean"}a.isBoolean=ht;function Et(tn){return tn===null}a.isNull=Et;function At(tn){return tn==null}a.isNullOrUndefined=At;function Bt(tn){return typeof tn=="number"}a.isNumber=Bt;function qt(tn){return typeof tn=="string"}a.isString=qt;function zt(tn){return typeof tn=="symbol"}a.isSymbol=zt;function Ht(tn){return tn===void 0}a.isUndefined=Ht;function ct(tn){return dt(tn)&&en(tn)==="[object RegExp]"}a.isRegExp=ct,a.types.isRegExp=ct;function dt(tn){return typeof tn=="object"&&tn!==null}a.isObject=dt;function lt(tn){return dt(tn)&&en(tn)==="[object Date]"}a.isDate=lt,a.types.isDate=lt;function kt(tn){return dt(tn)&&(en(tn)==="[object Error]"||tn instanceof Error)}a.isError=kt,a.types.isNativeError=kt;function Lt(tn){return typeof tn=="function"}a.isFunction=Lt;function Jt(tn){return tn===null||typeof tn=="boolean"||typeof tn=="number"||typeof tn=="string"||typeof tn=="symbol"||typeof tn>"u"}a.isPrimitive=Jt,a.isBuffer=isBufferBrowser;function en(tn){return Object.prototype.toString.call(tn)}function Qt(tn){return tn<10?"0"+tn.toString(10):tn.toString(10)}var xt=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function rn(){var tn=new Date,pn=[Qt(tn.getHours()),Qt(tn.getMinutes()),Qt(tn.getSeconds())].join(":");return[tn.getDate(),xt[tn.getMonth()],pn].join(" ")}a.log=function(){console.log("%s - %s",rn(),a.format.apply(a,arguments))},a.inherits=inherits_browserExports,a._extend=function(tn,pn){if(!pn||!dt(pn))return tn;for(var yn=Object.keys(pn),In=yn.length;In--;)tn[yn[In]]=pn[yn[In]];return tn};function Sn(tn,pn){return Object.prototype.hasOwnProperty.call(tn,pn)}var bn=typeof Symbol<"u"?Symbol("util.promisify.custom"):void 0;a.promisify=function(pn){if(typeof pn!="function")throw new TypeError('The "original" argument must be of type Function');if(bn&&pn[bn]){var yn=pn[bn];if(typeof yn!="function")throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(yn,bn,{value:yn,enumerable:!1,writable:!1,configurable:!0}),yn}function yn(){for(var In,sn,vn=new Promise(function(fn,ut){In=fn,sn=ut}),Cn=[],Nn=0;Nn<arguments.length;Nn++)Cn.push(arguments[Nn]);Cn.push(function(fn,ut){fn?sn(fn):In(ut)});try{pn.apply(this,Cn)}catch(fn){sn(fn)}return vn}return Object.setPrototypeOf(yn,Object.getPrototypeOf(pn)),bn&&Object.defineProperty(yn,bn,{value:yn,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(yn,b(pn))},a.promisify.custom=bn;function kn(tn,pn){if(!tn){var yn=new Error("Promise was rejected with a falsy value");yn.reason=tn,tn=yn}return pn(tn)}function _n(tn){if(typeof tn!="function")throw new TypeError('The "original" argument must be of type Function');function pn(){for(var yn=[],In=0;In<arguments.length;In++)yn.push(arguments[In]);var sn=yn.pop();if(typeof sn!="function")throw new TypeError("The last argument must be of type Function");var vn=this,Cn=function(){return sn.apply(vn,arguments)};tn.apply(this,yn).then(function(Nn){process.nextTick(Cn.bind(null,null,Nn))},function(Nn){process.nextTick(kn.bind(null,Nn,Cn))})}return Object.setPrototypeOf(pn,Object.getPrototypeOf(tn)),Object.defineProperties(pn,b(tn)),pn}a.callbackify=_n})(util$4);var Buffer$7=safeBufferExports.Buffer,Stream$2=require$$0$1,util$3=util$4;function DataStream$2(a){if(this.buffer=null,this.writable=!0,this.readable=!0,!a)return this.buffer=Buffer$7.alloc(0),this;if(typeof a.pipe=="function")return this.buffer=Buffer$7.alloc(0),a.pipe(this),this;if(a.length||typeof a=="object")return this.buffer=a,this.writable=!1,process.nextTick((function(){this.emit("end",a),this.readable=!1,this.emit("close")}).bind(this)),this;throw new TypeError("Unexpected data type ("+typeof a+")")}util$3.inherits(DataStream$2,Stream$2);DataStream$2.prototype.write=function a(c){this.buffer=Buffer$7.concat([this.buffer,Buffer$7.from(c)]),this.emit("data",c)};DataStream$2.prototype.end=function a(c){c&&this.write(c),this.emit("end",c),this.emit("close"),this.writable=!1,this.readable=!1};var dataStream=DataStream$2,Buffer$6=buffer.Buffer,SlowBuffer=buffer.SlowBuffer,bufferEqualConstantTime=bufferEq;function bufferEq(a,c){if(!Buffer$6.isBuffer(a)||!Buffer$6.isBuffer(c)||a.length!==c.length)return!1;for(var b=0,_=0;_<a.length;_++)b|=a[_]^c[_];return b===0}bufferEq.install=function(){Buffer$6.prototype.equal=SlowBuffer.prototype.equal=function(c){return bufferEq(this,c)}};var origBufEqual=Buffer$6.prototype.equal,origSlowBufEqual=SlowBuffer.prototype.equal;bufferEq.restore=function(){Buffer$6.prototype.equal=origBufEqual,SlowBuffer.prototype.equal=origSlowBufEqual};function getParamSize(a){var c=(a/8|0)+(a%8===0?0:1);return c}var paramBytesForAlg={ES256:getParamSize(256),ES384:getParamSize(384),ES512:getParamSize(521)};function getParamBytesForAlg$1(a){var c=paramBytesForAlg[a];if(c)return c;throw new Error('Unknown algorithm "'+a+'"')}var paramBytesForAlg_1=getParamBytesForAlg$1,Buffer$5=safeBufferExports.Buffer,getParamBytesForAlg=paramBytesForAlg_1,MAX_OCTET=128,CLASS_UNIVERSAL=0,PRIMITIVE_BIT=32,TAG_SEQ=16,TAG_INT=2,ENCODED_TAG_SEQ=TAG_SEQ|PRIMITIVE_BIT|CLASS_UNIVERSAL<<6,ENCODED_TAG_INT=TAG_INT|CLASS_UNIVERSAL<<6;function base64Url(a){return a.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function signatureAsBuffer(a){if(Buffer$5.isBuffer(a))return a;if(typeof a=="string")return Buffer$5.from(a,"base64");throw new TypeError("ECDSA signature must be a Base64 string or a Buffer")}function derToJose(a,c){a=signatureAsBuffer(a);var b=getParamBytesForAlg(c),_=b+1,k=a.length,j=0;if(a[j++]!==ENCODED_TAG_SEQ)throw new Error('Could not find expected "seq"');var _e=a[j++];if(_e===(MAX_OCTET|1)&&(_e=a[j++]),k-j<_e)throw new Error('"seq" specified length of "'+_e+'", only "'+(k-j)+'" remaining');if(a[j++]!==ENCODED_TAG_INT)throw new Error('Could not find expected "int" for "r"');var et=a[j++];if(k-j-2<et)throw new Error('"r" specified length of "'+et+'", only "'+(k-j-2)+'" available');if(_<et)throw new Error('"r" specified length of "'+et+'", max of "'+_+'" is acceptable');var nt=j;if(j+=et,a[j++]!==ENCODED_TAG_INT)throw new Error('Could not find expected "int" for "s"');var it=a[j++];if(k-j!==it)throw new Error('"s" specified length of "'+it+'", expected "'+(k-j)+'"');if(_<it)throw new Error('"s" specified length of "'+it+'", max of "'+_+'" is acceptable');var ft=j;if(j+=it,j!==k)throw new Error('Expected to consume entire buffer, but "'+(k-j)+'" bytes remain');var pt=b-et,mt=b-it,St=Buffer$5.allocUnsafe(pt+et+mt+it);for(j=0;j<pt;++j)St[j]=0;a.copy(St,j,nt+Math.max(-pt,0),nt+et),j=b;for(var yt=j;j<yt+mt;++j)St[j]=0;return a.copy(St,j,ft+Math.max(-mt,0),ft+it),St=St.toString("base64"),St=base64Url(St),St}function countPadding(a,c,b){for(var _=0;c+_<b&&a[c+_]===0;)++_;var k=a[c+_]>=MAX_OCTET;return k&&--_,_}function joseToDer(a,c){a=signatureAsBuffer(a);var b=getParamBytesForAlg(c),_=a.length;if(_!==b*2)throw new TypeError('"'+c+'" signatures must be "'+b*2+'" bytes, saw "'+_+'"');var k=countPadding(a,0,b),j=countPadding(a,b,a.length),_e=b-k,et=b-j,nt=2+_e+1+1+et,it=nt<MAX_OCTET,ft=Buffer$5.allocUnsafe((it?2:3)+nt),pt=0;return ft[pt++]=ENCODED_TAG_SEQ,it?ft[pt++]=nt:(ft[pt++]=MAX_OCTET|1,ft[pt++]=nt&255),ft[pt++]=ENCODED_TAG_INT,ft[pt++]=_e,k<0?(ft[pt++]=0,pt+=a.copy(ft,pt,0,b)):pt+=a.copy(ft,pt,k,b),ft[pt++]=ENCODED_TAG_INT,ft[pt++]=et,j<0?(ft[pt++]=0,a.copy(ft,pt,b)):a.copy(ft,pt,b+j),ft}var ecdsaSigFormatter={derToJose,joseToDer},bufferEqual=bufferEqualConstantTime,Buffer$4=safeBufferExports.Buffer,crypto$1=require$$0$1,formatEcdsa=ecdsaSigFormatter,util$2=util$4,MSG_INVALID_ALGORITHM=`"%s" is not a valid algorithm.
  Supported algorithms are:
  "HS256", "HS384", "HS512", "RS256", "RS384", "RS512", "PS256", "PS384", "PS512", "ES256", "ES384", "ES512" and "none".`,MSG_INVALID_SECRET="secret must be a string or buffer",MSG_INVALID_VERIFIER_KEY="key must be a string or a buffer",MSG_INVALID_SIGNER_KEY="key must be a string, a buffer or an object",supportsKeyObjects=typeof crypto$1.createPublicKey=="function";supportsKeyObjects&&(MSG_INVALID_VERIFIER_KEY+=" or a KeyObject",MSG_INVALID_SECRET+="or a KeyObject");function checkIsPublicKey(a){if(!Buffer$4.isBuffer(a)&&typeof a!="string"&&(!supportsKeyObjects||typeof a!="object"||typeof a.type!="string"||typeof a.asymmetricKeyType!="string"||typeof a.export!="function"))throw typeError(MSG_INVALID_VERIFIER_KEY)}function checkIsPrivateKey(a){if(!Buffer$4.isBuffer(a)&&typeof a!="string"&&typeof a!="object")throw typeError(MSG_INVALID_SIGNER_KEY)}function checkIsSecretKey(a){if(!Buffer$4.isBuffer(a)){if(typeof a=="string")return a;if(!supportsKeyObjects||typeof a!="object"||a.type!=="secret"||typeof a.export!="function")throw typeError(MSG_INVALID_SECRET)}}function fromBase64(a){return a.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function toBase64(a){a=a.toString();var c=4-a.length%4;if(c!==4)for(var b=0;b<c;++b)a+="=";return a.replace(/\-/g,"+").replace(/_/g,"/")}function typeError(a){var c=[].slice.call(arguments,1),b=util$2.format.bind(util$2,a).apply(null,c);return new TypeError(b)}function bufferOrString(a){return Buffer$4.isBuffer(a)||typeof a=="string"}function normalizeInput(a){return bufferOrString(a)||(a=JSON.stringify(a)),a}function createHmacSigner(a){return function(b,_){checkIsSecretKey(_),b=normalizeInput(b);var k=crypto$1.createHmac("sha"+a,_),j=(k.update(b),k.digest("base64"));return fromBase64(j)}}function createHmacVerifier(a){return function(b,_,k){var j=createHmacSigner(a)(b,k);return bufferEqual(Buffer$4.from(_),Buffer$4.from(j))}}function createKeySigner(a){return function(b,_){checkIsPrivateKey(_),b=normalizeInput(b);var k=crypto$1.createSign("RSA-SHA"+a),j=(k.update(b),k.sign(_,"base64"));return fromBase64(j)}}function createKeyVerifier(a){return function(b,_,k){checkIsPublicKey(k),b=normalizeInput(b),_=toBase64(_);var j=crypto$1.createVerify("RSA-SHA"+a);return j.update(b),j.verify(k,_,"base64")}}function createPSSKeySigner(a){return function(b,_){checkIsPrivateKey(_),b=normalizeInput(b);var k=crypto$1.createSign("RSA-SHA"+a),j=(k.update(b),k.sign({key:_,padding:crypto$1.constants.RSA_PKCS1_PSS_PADDING,saltLength:crypto$1.constants.RSA_PSS_SALTLEN_DIGEST},"base64"));return fromBase64(j)}}function createPSSKeyVerifier(a){return function(b,_,k){checkIsPublicKey(k),b=normalizeInput(b),_=toBase64(_);var j=crypto$1.createVerify("RSA-SHA"+a);return j.update(b),j.verify({key:k,padding:crypto$1.constants.RSA_PKCS1_PSS_PADDING,saltLength:crypto$1.constants.RSA_PSS_SALTLEN_DIGEST},_,"base64")}}function createECDSASigner(a){var c=createKeySigner(a);return function(){var _=c.apply(null,arguments);return _=formatEcdsa.derToJose(_,"ES"+a),_}}function createECDSAVerifer(a){var c=createKeyVerifier(a);return function(_,k,j){k=formatEcdsa.joseToDer(k,"ES"+a).toString("base64");var _e=c(_,k,j);return _e}}function createNoneSigner(){return function(){return""}}function createNoneVerifier(){return function(c,b){return b===""}}var jwa$2=function a(c){var b={hs:createHmacSigner,rs:createKeySigner,ps:createPSSKeySigner,es:createECDSASigner,none:createNoneSigner},_={hs:createHmacVerifier,rs:createKeyVerifier,ps:createPSSKeyVerifier,es:createECDSAVerifer,none:createNoneVerifier},k=c.match(/^(RS|PS|ES|HS)(256|384|512)$|^(none)$/i);if(!k)throw typeError(MSG_INVALID_ALGORITHM,c);var j=(k[1]||k[3]).toLowerCase(),_e=k[2];return{sign:b[j](_e),verify:_[j](_e)}},Buffer$3=buffer.Buffer,tostring=function a(c){return typeof c=="string"?c:typeof c=="number"||Buffer$3.isBuffer(c)?c.toString():JSON.stringify(c)},Buffer$2=safeBufferExports.Buffer,DataStream$1=dataStream,jwa$1=jwa$2,Stream$1=require$$0$1,toString$2=tostring,util$1=util$4;function base64url(a,c){return Buffer$2.from(a,c).toString("base64").replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function jwsSecuredInput(a,c,b){b=b||"utf8";var _=base64url(toString$2(a),"binary"),k=base64url(toString$2(c),b);return util$1.format("%s.%s",_,k)}function jwsSign(a){var c=a.header,b=a.payload,_=a.secret||a.privateKey,k=a.encoding,j=jwa$1(c.alg),_e=jwsSecuredInput(c,b,k),et=j.sign(_e,_);return util$1.format("%s.%s",_e,et)}function SignStream$1(a){var c=a.secret||a.privateKey||a.key,b=new DataStream$1(c);this.readable=!0,this.header=a.header,this.encoding=a.encoding,this.secret=this.privateKey=this.key=b,this.payload=new DataStream$1(a.payload),this.secret.once("close",(function(){!this.payload.writable&&this.readable&&this.sign()}).bind(this)),this.payload.once("close",(function(){!this.secret.writable&&this.readable&&this.sign()}).bind(this))}util$1.inherits(SignStream$1,Stream$1);SignStream$1.prototype.sign=function a(){try{var c=jwsSign({header:this.header,payload:this.payload.buffer,secret:this.secret.buffer,encoding:this.encoding});return this.emit("done",c),this.emit("data",c),this.emit("end"),this.readable=!1,c}catch(b){this.readable=!1,this.emit("error",b),this.emit("close")}};SignStream$1.sign=jwsSign;var signStream=SignStream$1,Buffer$1=safeBufferExports.Buffer,DataStream=dataStream,jwa=jwa$2,Stream=require$$0$1,toString$1=tostring,util=util$4,JWS_REGEX=/^[a-zA-Z0-9\-_]+?\.[a-zA-Z0-9\-_]+?\.([a-zA-Z0-9\-_]+)?$/;function isObject$7(a){return Object.prototype.toString.call(a)==="[object Object]"}function safeJsonParse(a){if(isObject$7(a))return a;try{return JSON.parse(a)}catch{return}}function headerFromJWS(a){var c=a.split(".",1)[0];return safeJsonParse(Buffer$1.from(c,"base64").toString("binary"))}function securedInputFromJWS(a){return a.split(".",2).join(".")}function signatureFromJWS(a){return a.split(".")[2]}function payloadFromJWS(a,c){c=c||"utf8";var b=a.split(".")[1];return Buffer$1.from(b,"base64").toString(c)}function isValidJws(a){return JWS_REGEX.test(a)&&!!headerFromJWS(a)}function jwsVerify(a,c,b){if(!c){var _=new Error("Missing algorithm parameter for jws.verify");throw _.code="MISSING_ALGORITHM",_}a=toString$1(a);var k=signatureFromJWS(a),j=securedInputFromJWS(a),_e=jwa(c);return _e.verify(j,k,b)}function jwsDecode(a,c){if(c=c||{},a=toString$1(a),!isValidJws(a))return null;var b=headerFromJWS(a);if(!b)return null;var _=payloadFromJWS(a);return(b.typ==="JWT"||c.json)&&(_=JSON.parse(_,c.encoding)),{header:b,payload:_,signature:signatureFromJWS(a)}}function VerifyStream$1(a){a=a||{};var c=a.secret||a.publicKey||a.key,b=new DataStream(c);this.readable=!0,this.algorithm=a.algorithm,this.encoding=a.encoding,this.secret=this.publicKey=this.key=b,this.signature=new DataStream(a.signature),this.secret.once("close",(function(){!this.signature.writable&&this.readable&&this.verify()}).bind(this)),this.signature.once("close",(function(){!this.secret.writable&&this.readable&&this.verify()}).bind(this))}util.inherits(VerifyStream$1,Stream);VerifyStream$1.prototype.verify=function a(){try{var c=jwsVerify(this.signature.buffer,this.algorithm,this.key.buffer),b=jwsDecode(this.signature.buffer,this.encoding);return this.emit("done",c,b),this.emit("data",c),this.emit("end"),this.readable=!1,c}catch(_){this.readable=!1,this.emit("error",_),this.emit("close")}};VerifyStream$1.decode=jwsDecode;VerifyStream$1.isValid=isValidJws;VerifyStream$1.verify=jwsVerify;var verifyStream=VerifyStream$1,SignStream=signStream,VerifyStream=verifyStream,ALGORITHMS=["HS256","HS384","HS512","RS256","RS384","RS512","PS256","PS384","PS512","ES256","ES384","ES512"];jws$3.ALGORITHMS=ALGORITHMS;jws$3.sign=SignStream.sign;jws$3.verify=VerifyStream.verify;jws$3.decode=VerifyStream.decode;jws$3.isValid=VerifyStream.isValid;jws$3.createSign=function a(c){return new SignStream(c)};jws$3.createVerify=function a(c){return new VerifyStream(c)};var jws$2=jws$3,decode$1=function(a,c){c=c||{};var b=jws$2.decode(a,c);if(!b)return null;var _=b.payload;if(typeof _=="string")try{var k=JSON.parse(_);k!==null&&typeof k=="object"&&(_=k)}catch{}return c.complete===!0?{header:b.header,payload:_,signature:b.signature}:_},JsonWebTokenError$3=function(a,c){Error.call(this,a),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor),this.name="JsonWebTokenError",this.message=a,c&&(this.inner=c)};JsonWebTokenError$3.prototype=Object.create(Error.prototype);JsonWebTokenError$3.prototype.constructor=JsonWebTokenError$3;var JsonWebTokenError_1=JsonWebTokenError$3,JsonWebTokenError$2=JsonWebTokenError_1,NotBeforeError$1=function(a,c){JsonWebTokenError$2.call(this,a),this.name="NotBeforeError",this.date=c};NotBeforeError$1.prototype=Object.create(JsonWebTokenError$2.prototype);NotBeforeError$1.prototype.constructor=NotBeforeError$1;var NotBeforeError_1=NotBeforeError$1,JsonWebTokenError$1=JsonWebTokenError_1,TokenExpiredError$1=function(a,c){JsonWebTokenError$1.call(this,a),this.name="TokenExpiredError",this.expiredAt=c};TokenExpiredError$1.prototype=Object.create(JsonWebTokenError$1.prototype);TokenExpiredError$1.prototype.constructor=TokenExpiredError$1;var TokenExpiredError_1=TokenExpiredError$1,s=1e3,m$1=s*60,h=m$1*60,d=h*24,w$1=d*7,y$1=d*365.25,ms$1=function(a,c){c=c||{};var b=typeof a;if(b==="string"&&a.length>0)return parse$2(a);if(b==="number"&&isFinite(a))return c.long?fmtLong(a):fmtShort(a);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(a))};function parse$2(a){if(a=String(a),!(a.length>100)){var c=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(a);if(c){var b=parseFloat(c[1]),_=(c[2]||"ms").toLowerCase();switch(_){case"years":case"year":case"yrs":case"yr":case"y":return b*y$1;case"weeks":case"week":case"w":return b*w$1;case"days":case"day":case"d":return b*d;case"hours":case"hour":case"hrs":case"hr":case"h":return b*h;case"minutes":case"minute":case"mins":case"min":case"m":return b*m$1;case"seconds":case"second":case"secs":case"sec":case"s":return b*s;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return b;default:return}}}}function fmtShort(a){var c=Math.abs(a);return c>=d?Math.round(a/d)+"d":c>=h?Math.round(a/h)+"h":c>=m$1?Math.round(a/m$1)+"m":c>=s?Math.round(a/s)+"s":a+"ms"}function fmtLong(a){var c=Math.abs(a);return c>=d?plural(a,c,d,"day"):c>=h?plural(a,c,h,"hour"):c>=m$1?plural(a,c,m$1,"minute"):c>=s?plural(a,c,s,"second"):a+" ms"}function plural(a,c,b,_){var k=c>=b*1.5;return Math.round(a/b)+" "+_+(k?"s":"")}var ms=ms$1,timespan$2=function(a,c){var b=c||Math.floor(Date.now()/1e3);if(typeof a=="string"){var _=ms(a);return typeof _>"u"?void 0:Math.floor(b+_/1e3)}else return typeof a=="number"?b+a:void 0},semver$1={exports:{}};(function(a,c){var b={};c=a.exports=$t;var _;typeof process=="object"&&b&&b.NODE_DEBUG&&/\bsemver\b/i.test(b.NODE_DEBUG)?_=function(){var Kt=Array.prototype.slice.call(arguments,0);Kt.unshift("SEMVER"),console.log.apply(console,Kt)}:_=function(){},c.SEMVER_SPEC_VERSION="2.0.0";var k=256,j=Number.MAX_SAFE_INTEGER||9007199254740991,_e=16,et=c.re=[],nt=c.src=[],it=0,ft=it++;nt[ft]="0|[1-9]\\d*";var pt=it++;nt[pt]="[0-9]+";var mt=it++;nt[mt]="\\d*[a-zA-Z-][a-zA-Z0-9-]*";var St=it++;nt[St]="("+nt[ft]+")\\.("+nt[ft]+")\\.("+nt[ft]+")";var yt=it++;nt[yt]="("+nt[pt]+")\\.("+nt[pt]+")\\.("+nt[pt]+")";var _t=it++;nt[_t]="(?:"+nt[ft]+"|"+nt[mt]+")";var Tt=it++;nt[Tt]="(?:"+nt[pt]+"|"+nt[mt]+")";var gt=it++;nt[gt]="(?:-("+nt[_t]+"(?:\\."+nt[_t]+")*))";var ht=it++;nt[ht]="(?:-?("+nt[Tt]+"(?:\\."+nt[Tt]+")*))";var Et=it++;nt[Et]="[0-9A-Za-z-]+";var At=it++;nt[At]="(?:\\+("+nt[Et]+"(?:\\."+nt[Et]+")*))";var Bt=it++,qt="v?"+nt[St]+nt[gt]+"?"+nt[At]+"?";nt[Bt]="^"+qt+"$";var zt="[v=\\s]*"+nt[yt]+nt[ht]+"?"+nt[At]+"?",Ht=it++;nt[Ht]="^"+zt+"$";var ct=it++;nt[ct]="((?:<|>)?=?)";var dt=it++;nt[dt]=nt[pt]+"|x|X|\\*";var lt=it++;nt[lt]=nt[ft]+"|x|X|\\*";var kt=it++;nt[kt]="[v=\\s]*("+nt[lt]+")(?:\\.("+nt[lt]+")(?:\\.("+nt[lt]+")(?:"+nt[gt]+")?"+nt[At]+"?)?)?";var Lt=it++;nt[Lt]="[v=\\s]*("+nt[dt]+")(?:\\.("+nt[dt]+")(?:\\.("+nt[dt]+")(?:"+nt[ht]+")?"+nt[At]+"?)?)?";var Jt=it++;nt[Jt]="^"+nt[ct]+"\\s*"+nt[kt]+"$";var en=it++;nt[en]="^"+nt[ct]+"\\s*"+nt[Lt]+"$";var Qt=it++;nt[Qt]="(?:^|[^\\d])(\\d{1,"+_e+"})(?:\\.(\\d{1,"+_e+"}))?(?:\\.(\\d{1,"+_e+"}))?(?:$|[^\\d])";var xt=it++;nt[xt]="(?:~>?)";var rn=it++;nt[rn]="(\\s*)"+nt[xt]+"\\s+",et[rn]=new RegExp(nt[rn],"g");var Sn="$1~",bn=it++;nt[bn]="^"+nt[xt]+nt[kt]+"$";var kn=it++;nt[kn]="^"+nt[xt]+nt[Lt]+"$";var _n=it++;nt[_n]="(?:\\^)";var tn=it++;nt[tn]="(\\s*)"+nt[_n]+"\\s+",et[tn]=new RegExp(nt[tn],"g");var pn="$1^",yn=it++;nt[yn]="^"+nt[_n]+nt[kt]+"$";var In=it++;nt[In]="^"+nt[_n]+nt[Lt]+"$";var sn=it++;nt[sn]="^"+nt[ct]+"\\s*("+zt+")$|^$";var vn=it++;nt[vn]="^"+nt[ct]+"\\s*("+qt+")$|^$";var Cn=it++;nt[Cn]="(\\s*)"+nt[ct]+"\\s*("+zt+"|"+nt[kt]+")",et[Cn]=new RegExp(nt[Cn],"g");var Nn="$1$2$3",fn=it++;nt[fn]="^\\s*("+nt[kt]+")\\s+-\\s+("+nt[kt]+")\\s*$";var ut=it++;nt[ut]="^\\s*("+nt[Lt]+")\\s+-\\s+("+nt[Lt]+")\\s*$";var It=it++;nt[It]="(<|>)?=?\\s*\\*";for(var Pt=0;Pt<it;Pt++)_(Pt,nt[Pt]),et[Pt]||(et[Pt]=new RegExp(nt[Pt]));c.parse=Zt;function Zt(Kt,an){if((!an||typeof an!="object")&&(an={loose:!!an,includePrerelease:!1}),Kt instanceof $t)return Kt;if(typeof Kt!="string"||Kt.length>k)return null;var hn=an.loose?et[Ht]:et[Bt];if(!hn.test(Kt))return null;try{return new $t(Kt,an)}catch{return null}}c.valid=Dt;function Dt(Kt,an){var hn=Zt(Kt,an);return hn?hn.version:null}c.clean=Ot;function Ot(Kt,an){var hn=Zt(Kt.trim().replace(/^[=v]+/,""),an);return hn?hn.version:null}c.SemVer=$t;function $t(Kt,an){if((!an||typeof an!="object")&&(an={loose:!!an,includePrerelease:!1}),Kt instanceof $t){if(Kt.loose===an.loose)return Kt;Kt=Kt.version}else if(typeof Kt!="string")throw new TypeError("Invalid Version: "+Kt);if(Kt.length>k)throw new TypeError("version is longer than "+k+" characters");if(!(this instanceof $t))return new $t(Kt,an);_("SemVer",Kt,an),this.options=an,this.loose=!!an.loose;var hn=Kt.trim().match(an.loose?et[Ht]:et[Bt]);if(!hn)throw new TypeError("Invalid Version: "+Kt);if(this.raw=Kt,this.major=+hn[1],this.minor=+hn[2],this.patch=+hn[3],this.major>j||this.major<0)throw new TypeError("Invalid major version");if(this.minor>j||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>j||this.patch<0)throw new TypeError("Invalid patch version");hn[4]?this.prerelease=hn[4].split(".").map(function(Rn){if(/^[0-9]+$/.test(Rn)){var On=+Rn;if(On>=0&&On<j)return On}return Rn}):this.prerelease=[],this.build=hn[5]?hn[5].split("."):[],this.format()}$t.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version},$t.prototype.toString=function(){return this.version},$t.prototype.compare=function(Kt){return _("SemVer.compare",this.version,this.options,Kt),Kt instanceof $t||(Kt=new $t(Kt,this.options)),this.compareMain(Kt)||this.comparePre(Kt)},$t.prototype.compareMain=function(Kt){return Kt instanceof $t||(Kt=new $t(Kt,this.options)),Xt(this.major,Kt.major)||Xt(this.minor,Kt.minor)||Xt(this.patch,Kt.patch)},$t.prototype.comparePre=function(Kt){if(Kt instanceof $t||(Kt=new $t(Kt,this.options)),this.prerelease.length&&!Kt.prerelease.length)return-1;if(!this.prerelease.length&&Kt.prerelease.length)return 1;if(!this.prerelease.length&&!Kt.prerelease.length)return 0;var an=0;do{var hn=this.prerelease[an],Rn=Kt.prerelease[an];if(_("prerelease compare",an,hn,Rn),hn===void 0&&Rn===void 0)return 0;if(Rn===void 0)return 1;if(hn===void 0)return-1;if(hn===Rn)continue;return Xt(hn,Rn)}while(++an)},$t.prototype.inc=function(Kt,an){switch(Kt){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",an);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",an);break;case"prepatch":this.prerelease.length=0,this.inc("patch",an),this.inc("pre",an);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",an),this.inc("pre",an);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{for(var hn=this.prerelease.length;--hn>=0;)typeof this.prerelease[hn]=="number"&&(this.prerelease[hn]++,hn=-2);hn===-1&&this.prerelease.push(0)}an&&(this.prerelease[0]===an?isNaN(this.prerelease[1])&&(this.prerelease=[an,0]):this.prerelease=[an,0]);break;default:throw new Error("invalid increment argument: "+Kt)}return this.format(),this.raw=this.version,this},c.inc=Gt;function Gt(Kt,an,hn,Rn){typeof hn=="string"&&(Rn=hn,hn=void 0);try{return new $t(Kt,hn).inc(an,Rn).version}catch{return null}}c.diff=nn;function nn(Kt,an){if(Dn(Kt,an))return null;var hn=Zt(Kt),Rn=Zt(an),On="";if(hn.prerelease.length||Rn.prerelease.length){On="pre";var Tn="prerelease"}for(var wn in hn)if((wn==="major"||wn==="minor"||wn==="patch")&&hn[wn]!==Rn[wn])return On+wn;return Tn}c.compareIdentifiers=Xt;var gn=/^[0-9]+$/;function Xt(Kt,an){var hn=gn.test(Kt),Rn=gn.test(an);return hn&&Rn&&(Kt=+Kt,an=+an),Kt===an?0:hn&&!Rn?-1:Rn&&!hn?1:Kt<an?-1:1}c.rcompareIdentifiers=at;function at(Kt,an){return Xt(an,Kt)}c.major=Rt;function Rt(Kt,an){return new $t(Kt,an).major}c.minor=Ut;function Ut(Kt,an){return new $t(Kt,an).minor}c.patch=un;function un(Kt,an){return new $t(Kt,an).patch}c.compare=Vt;function Vt(Kt,an,hn){return new $t(Kt,hn).compare(new $t(an,hn))}c.compareLoose=st;function st(Kt,an){return Vt(Kt,an,!0)}c.rcompare=wt;function wt(Kt,an,hn){return Vt(an,Kt,hn)}c.sort=Ft;function Ft(Kt,an){return Kt.sort(function(hn,Rn){return c.compare(hn,Rn,an)})}c.rsort=ln;function ln(Kt,an){return Kt.sort(function(hn,Rn){return c.rcompare(hn,Rn,an)})}c.gt=jt;function jt(Kt,an,hn){return Vt(Kt,an,hn)>0}c.lt=En;function En(Kt,an,hn){return Vt(Kt,an,hn)<0}c.eq=Dn;function Dn(Kt,an,hn){return Vt(Kt,an,hn)===0}c.neq=Ln;function Ln(Kt,an,hn){return Vt(Kt,an,hn)!==0}c.gte=Jn;function Jn(Kt,an,hn){return Vt(Kt,an,hn)>=0}c.lte=zn;function zn(Kt,an,hn){return Vt(Kt,an,hn)<=0}c.cmp=mn;function mn(Kt,an,hn,Rn){switch(an){case"===":return typeof Kt=="object"&&(Kt=Kt.version),typeof hn=="object"&&(hn=hn.version),Kt===hn;case"!==":return typeof Kt=="object"&&(Kt=Kt.version),typeof hn=="object"&&(hn=hn.version),Kt!==hn;case"":case"=":case"==":return Dn(Kt,hn,Rn);case"!=":return Ln(Kt,hn,Rn);case">":return jt(Kt,hn,Rn);case">=":return Jn(Kt,hn,Rn);case"<":return En(Kt,hn,Rn);case"<=":return zn(Kt,hn,Rn);default:throw new TypeError("Invalid operator: "+an)}}c.Comparator=ot;function ot(Kt,an){if((!an||typeof an!="object")&&(an={loose:!!an,includePrerelease:!1}),Kt instanceof ot){if(Kt.loose===!!an.loose)return Kt;Kt=Kt.value}if(!(this instanceof ot))return new ot(Kt,an);_("comparator",Kt,an),this.options=an,this.loose=!!an.loose,this.parse(Kt),this.semver===bt?this.value="":this.value=this.operator+this.semver.version,_("comp",this)}var bt={};ot.prototype.parse=function(Kt){var an=this.options.loose?et[sn]:et[vn],hn=Kt.match(an);if(!hn)throw new TypeError("Invalid comparator: "+Kt);this.operator=hn[1],this.operator==="="&&(this.operator=""),hn[2]?this.semver=new $t(hn[2],this.options.loose):this.semver=bt},ot.prototype.toString=function(){return this.value},ot.prototype.test=function(Kt){return _("Comparator.test",Kt,this.options.loose),this.semver===bt?!0:(typeof Kt=="string"&&(Kt=new $t(Kt,this.options)),mn(Kt,this.operator,this.semver,this.options))},ot.prototype.intersects=function(Kt,an){if(!(Kt instanceof ot))throw new TypeError("a Comparator is required");(!an||typeof an!="object")&&(an={loose:!!an,includePrerelease:!1});var hn;if(this.operator==="")return hn=new Ct(Kt.value,an),Zn(this.value,hn,an);if(Kt.operator==="")return hn=new Ct(this.value,an),Zn(Kt.semver,hn,an);var Rn=(this.operator===">="||this.operator===">")&&(Kt.operator===">="||Kt.operator===">"),On=(this.operator==="<="||this.operator==="<")&&(Kt.operator==="<="||Kt.operator==="<"),Tn=this.semver.version===Kt.semver.version,wn=(this.operator===">="||this.operator==="<=")&&(Kt.operator===">="||Kt.operator==="<="),Fn=mn(this.semver,"<",Kt.semver,an)&&(this.operator===">="||this.operator===">")&&(Kt.operator==="<="||Kt.operator==="<"),$n=mn(this.semver,">",Kt.semver,an)&&(this.operator==="<="||this.operator==="<")&&(Kt.operator===">="||Kt.operator===">");return Rn||On||Tn&&wn||Fn||$n},c.Range=Ct;function Ct(Kt,an){if((!an||typeof an!="object")&&(an={loose:!!an,includePrerelease:!1}),Kt instanceof Ct)return Kt.loose===!!an.loose&&Kt.includePrerelease===!!an.includePrerelease?Kt:new Ct(Kt.raw,an);if(Kt instanceof ot)return new Ct(Kt.value,an);if(!(this instanceof Ct))return new Ct(Kt,an);if(this.options=an,this.loose=!!an.loose,this.includePrerelease=!!an.includePrerelease,this.raw=Kt,this.set=Kt.split(/\s*\|\|\s*/).map(function(hn){return this.parseRange(hn.trim())},this).filter(function(hn){return hn.length}),!this.set.length)throw new TypeError("Invalid SemVer Range: "+Kt);this.format()}Ct.prototype.format=function(){return this.range=this.set.map(function(Kt){return Kt.join(" ").trim()}).join("||").trim(),this.range},Ct.prototype.toString=function(){return this.range},Ct.prototype.parseRange=function(Kt){var an=this.options.loose;Kt=Kt.trim();var hn=an?et[ut]:et[fn];Kt=Kt.replace(hn,er),_("hyphen replace",Kt),Kt=Kt.replace(et[Cn],Nn),_("comparator trim",Kt,et[Cn]),Kt=Kt.replace(et[rn],Sn),Kt=Kt.replace(et[tn],pn),Kt=Kt.split(/\s+/).join(" ");var Rn=an?et[sn]:et[vn],On=Kt.split(" ").map(function(Tn){return Yt(Tn,this.options)},this).join(" ").split(/\s+/);return this.options.loose&&(On=On.filter(function(Tn){return!!Tn.match(Rn)})),On=On.map(function(Tn){return new ot(Tn,this.options)},this),On},Ct.prototype.intersects=function(Kt,an){if(!(Kt instanceof Ct))throw new TypeError("a Range is required");return this.set.some(function(hn){return hn.every(function(Rn){return Kt.set.some(function(On){return On.every(function(Tn){return Rn.intersects(Tn,an)})})})})},c.toComparators=cn;function cn(Kt,an){return new Ct(Kt,an).set.map(function(hn){return hn.map(function(Rn){return Rn.value}).join(" ").trim().split(" ")})}function Yt(Kt,an){return _("comp",Kt,an),Kt=Qn(Kt,an),_("caret",Kt),Kt=Bn(Kt,an),_("tildes",Kt),Kt=qn(Kt,an),_("xrange",Kt),Kt=jn(Kt,an),_("stars",Kt),Kt}function dn(Kt){return!Kt||Kt.toLowerCase()==="x"||Kt==="*"}function Bn(Kt,an){return Kt.trim().split(/\s+/).map(function(hn){return Kn(hn,an)}).join(" ")}function Kn(Kt,an){var hn=an.loose?et[kn]:et[bn];return Kt.replace(hn,function(Rn,On,Tn,wn,Fn){_("tilde",Kt,Rn,On,Tn,wn,Fn);var $n;return dn(On)?$n="":dn(Tn)?$n=">="+On+".0.0 <"+(+On+1)+".0.0":dn(wn)?$n=">="+On+"."+Tn+".0 <"+On+"."+(+Tn+1)+".0":Fn?(_("replaceTilde pr",Fn),$n=">="+On+"."+Tn+"."+wn+"-"+Fn+" <"+On+"."+(+Tn+1)+".0"):$n=">="+On+"."+Tn+"."+wn+" <"+On+"."+(+Tn+1)+".0",_("tilde return",$n),$n})}function Qn(Kt,an){return Kt.trim().split(/\s+/).map(function(hn){return Vn(hn,an)}).join(" ")}function Vn(Kt,an){_("caret",Kt,an);var hn=an.loose?et[In]:et[yn];return Kt.replace(hn,function(Rn,On,Tn,wn,Fn){_("caret",Kt,Rn,On,Tn,wn,Fn);var $n;return dn(On)?$n="":dn(Tn)?$n=">="+On+".0.0 <"+(+On+1)+".0.0":dn(wn)?On==="0"?$n=">="+On+"."+Tn+".0 <"+On+"."+(+Tn+1)+".0":$n=">="+On+"."+Tn+".0 <"+(+On+1)+".0.0":Fn?(_("replaceCaret pr",Fn),On==="0"?Tn==="0"?$n=">="+On+"."+Tn+"."+wn+"-"+Fn+" <"+On+"."+Tn+"."+(+wn+1):$n=">="+On+"."+Tn+"."+wn+"-"+Fn+" <"+On+"."+(+Tn+1)+".0":$n=">="+On+"."+Tn+"."+wn+"-"+Fn+" <"+(+On+1)+".0.0"):(_("no pr"),On==="0"?Tn==="0"?$n=">="+On+"."+Tn+"."+wn+" <"+On+"."+Tn+"."+(+wn+1):$n=">="+On+"."+Tn+"."+wn+" <"+On+"."+(+Tn+1)+".0":$n=">="+On+"."+Tn+"."+wn+" <"+(+On+1)+".0.0"),_("caret return",$n),$n})}function qn(Kt,an){return _("replaceXRanges",Kt,an),Kt.split(/\s+/).map(function(hn){return Xn(hn,an)}).join(" ")}function Xn(Kt,an){Kt=Kt.trim();var hn=an.loose?et[en]:et[Jt];return Kt.replace(hn,function(Rn,On,Tn,wn,Fn,$n){_("xRange",Kt,Rn,On,Tn,wn,Fn,$n);var ir=dn(Tn),or=ir||dn(wn),rr=or||dn(Fn),nr=rr;return On==="="&&nr&&(On=""),ir?On===">"||On==="<"?Rn="<0.0.0":Rn="*":On&&nr?(or&&(wn=0),Fn=0,On===">"?(On=">=",or?(Tn=+Tn+1,wn=0,Fn=0):(wn=+wn+1,Fn=0)):On==="<="&&(On="<",or?Tn=+Tn+1:wn=+wn+1),Rn=On+Tn+"."+wn+"."+Fn):or?Rn=">="+Tn+".0.0 <"+(+Tn+1)+".0.0":rr&&(Rn=">="+Tn+"."+wn+".0 <"+Tn+"."+(+wn+1)+".0"),_("xRange return",Rn),Rn})}function jn(Kt,an){return _("replaceStars",Kt,an),Kt.trim().replace(et[It],"")}function er(Kt,an,hn,Rn,On,Tn,wn,Fn,$n,ir,or,rr,nr){return dn(hn)?an="":dn(Rn)?an=">="+hn+".0.0":dn(On)?an=">="+hn+"."+Rn+".0":an=">="+an,dn($n)?Fn="":dn(ir)?Fn="<"+(+$n+1)+".0.0":dn(or)?Fn="<"+$n+"."+(+ir+1)+".0":rr?Fn="<="+$n+"."+ir+"."+or+"-"+rr:Fn="<="+Fn,(an+" "+Fn).trim()}Ct.prototype.test=function(Kt){if(!Kt)return!1;typeof Kt=="string"&&(Kt=new $t(Kt,this.options));for(var an=0;an<this.set.length;an++)if(tr(this.set[an],Kt,this.options))return!0;return!1};function tr(Kt,an,hn){for(var Rn=0;Rn<Kt.length;Rn++)if(!Kt[Rn].test(an))return!1;if(an.prerelease.length&&!hn.includePrerelease){for(Rn=0;Rn<Kt.length;Rn++)if(_(Kt[Rn].semver),Kt[Rn].semver!==bt&&Kt[Rn].semver.prerelease.length>0){var On=Kt[Rn].semver;if(On.major===an.major&&On.minor===an.minor&&On.patch===an.patch)return!0}return!1}return!0}c.satisfies=Zn;function Zn(Kt,an,hn){try{an=new Ct(an,hn)}catch{return!1}return an.test(Kt)}c.maxSatisfying=Wn;function Wn(Kt,an,hn){var Rn=null,On=null;try{var Tn=new Ct(an,hn)}catch{return null}return Kt.forEach(function(wn){Tn.test(wn)&&(!Rn||On.compare(wn)===-1)&&(Rn=wn,On=new $t(Rn,hn))}),Rn}c.minSatisfying=Mn;function Mn(Kt,an,hn){var Rn=null,On=null;try{var Tn=new Ct(an,hn)}catch{return null}return Kt.forEach(function(wn){Tn.test(wn)&&(!Rn||On.compare(wn)===1)&&(Rn=wn,On=new $t(Rn,hn))}),Rn}c.minVersion=ar;function ar(Kt,an){Kt=new Ct(Kt,an);var hn=new $t("0.0.0");if(Kt.test(hn)||(hn=new $t("0.0.0-0"),Kt.test(hn)))return hn;hn=null;for(var Rn=0;Rn<Kt.set.length;++Rn){var On=Kt.set[Rn];On.forEach(function(Tn){var wn=new $t(Tn.semver.version);switch(Tn.operator){case">":wn.prerelease.length===0?wn.patch++:wn.prerelease.push(0),wn.raw=wn.format();case"":case">=":(!hn||jt(hn,wn))&&(hn=wn);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: "+Tn.operator)}})}return hn&&Kt.test(hn)?hn:null}c.validRange=dr;function dr(Kt,an){try{return new Ct(Kt,an).range||"*"}catch{return null}}c.ltr=cr;function cr(Kt,an,hn){return ur(Kt,an,"<",hn)}c.gtr=lr;function lr(Kt,an,hn){return ur(Kt,an,">",hn)}c.outside=ur;function ur(Kt,an,hn,Rn){Kt=new $t(Kt,Rn),an=new Ct(an,Rn);var On,Tn,wn,Fn,$n;switch(hn){case">":On=jt,Tn=zn,wn=En,Fn=">",$n=">=";break;case"<":On=En,Tn=Jn,wn=jt,Fn="<",$n="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(Zn(Kt,an,Rn))return!1;for(var ir=0;ir<an.set.length;++ir){var or=an.set[ir],rr=null,nr=null;if(or.forEach(function(sr){sr.semver===bt&&(sr=new ot(">=0.0.0")),rr=rr||sr,nr=nr||sr,On(sr.semver,rr.semver,Rn)?rr=sr:wn(sr.semver,nr.semver,Rn)&&(nr=sr)}),rr.operator===Fn||rr.operator===$n||(!nr.operator||nr.operator===Fn)&&Tn(Kt,nr.semver))return!1;if(nr.operator===$n&&wn(Kt,nr.semver))return!1}return!0}c.prerelease=fr;function fr(Kt,an){var hn=Zt(Kt,an);return hn&&hn.prerelease.length?hn.prerelease:null}c.intersects=pr;function pr(Kt,an,hn){return Kt=new Ct(Kt,hn),an=new Ct(an,hn),Kt.intersects(an)}c.coerce=hr;function hr(Kt){if(Kt instanceof $t)return Kt;if(typeof Kt!="string")return null;var an=Kt.match(et[Qt]);return an==null?null:Zt(an[1]+"."+(an[2]||"0")+"."+(an[3]||"0"))}})(semver$1,semver$1.exports);var semverExports=semver$1.exports,semver=semverExports,psSupported=semver.satisfies(process.version,"^6.12.0 || >=8.0.0"),JsonWebTokenError=JsonWebTokenError_1,NotBeforeError=NotBeforeError_1,TokenExpiredError=TokenExpiredError_1,decode=decode$1,timespan$1=timespan$2,PS_SUPPORTED$1=psSupported,jws$1=jws$3,PUB_KEY_ALGS=["RS256","RS384","RS512","ES256","ES384","ES512"],RSA_KEY_ALGS=["RS256","RS384","RS512"],HS_ALGS=["HS256","HS384","HS512"];PS_SUPPORTED$1&&(PUB_KEY_ALGS.splice(3,0,"PS256","PS384","PS512"),RSA_KEY_ALGS.splice(3,0,"PS256","PS384","PS512"));var verify=function(a,c,b,_){typeof b=="function"&&!_&&(_=b,b={}),b||(b={}),b=Object.assign({},b);var k;if(_?k=_:k=function(ft,pt){if(ft)throw ft;return pt},b.clockTimestamp&&typeof b.clockTimestamp!="number")return k(new JsonWebTokenError("clockTimestamp must be a number"));if(b.nonce!==void 0&&(typeof b.nonce!="string"||b.nonce.trim()===""))return k(new JsonWebTokenError("nonce must be a non-empty string"));var j=b.clockTimestamp||Math.floor(Date.now()/1e3);if(!a)return k(new JsonWebTokenError("jwt must be provided"));if(typeof a!="string")return k(new JsonWebTokenError("jwt must be a string"));var _e=a.split(".");if(_e.length!==3)return k(new JsonWebTokenError("jwt malformed"));var et;try{et=decode(a,{complete:!0})}catch(ft){return k(ft)}if(!et)return k(new JsonWebTokenError("invalid token"));var nt=et.header,it;if(typeof c=="function"){if(!_)return k(new JsonWebTokenError("verify must be called asynchronous if secret or public key is provided as a callback"));it=c}else it=function(ft,pt){return pt(null,c)};return it(nt,function(ft,pt){if(ft)return k(new JsonWebTokenError("error in secret or public key callback: "+ft.message));var mt=_e[2].trim()!=="";if(!mt&&pt)return k(new JsonWebTokenError("jwt signature is required"));if(mt&&!pt)return k(new JsonWebTokenError("secret or public key must be provided"));if(!mt&&!b.algorithms&&(b.algorithms=["none"]),b.algorithms||(b.algorithms=~pt.toString().indexOf("BEGIN CERTIFICATE")||~pt.toString().indexOf("BEGIN PUBLIC KEY")?PUB_KEY_ALGS:~pt.toString().indexOf("BEGIN RSA PUBLIC KEY")?RSA_KEY_ALGS:HS_ALGS),!~b.algorithms.indexOf(et.header.alg))return k(new JsonWebTokenError("invalid algorithm"));var St;try{St=jws$1.verify(a,et.header.alg,pt)}catch(Bt){return k(Bt)}if(!St)return k(new JsonWebTokenError("invalid signature"));var yt=et.payload;if(typeof yt.nbf<"u"&&!b.ignoreNotBefore){if(typeof yt.nbf!="number")return k(new JsonWebTokenError("invalid nbf value"));if(yt.nbf>j+(b.clockTolerance||0))return k(new NotBeforeError("jwt not active",new Date(yt.nbf*1e3)))}if(typeof yt.exp<"u"&&!b.ignoreExpiration){if(typeof yt.exp!="number")return k(new JsonWebTokenError("invalid exp value"));if(j>=yt.exp+(b.clockTolerance||0))return k(new TokenExpiredError("jwt expired",new Date(yt.exp*1e3)))}if(b.audience){var _t=Array.isArray(b.audience)?b.audience:[b.audience],Tt=Array.isArray(yt.aud)?yt.aud:[yt.aud],gt=Tt.some(function(Bt){return _t.some(function(qt){return qt instanceof RegExp?qt.test(Bt):qt===Bt})});if(!gt)return k(new JsonWebTokenError("jwt audience invalid. expected: "+_t.join(" or ")))}if(b.issuer){var ht=typeof b.issuer=="string"&&yt.iss!==b.issuer||Array.isArray(b.issuer)&&b.issuer.indexOf(yt.iss)===-1;if(ht)return k(new JsonWebTokenError("jwt issuer invalid. expected: "+b.issuer))}if(b.subject&&yt.sub!==b.subject)return k(new JsonWebTokenError("jwt subject invalid. expected: "+b.subject));if(b.jwtid&&yt.jti!==b.jwtid)return k(new JsonWebTokenError("jwt jwtid invalid. expected: "+b.jwtid));if(b.nonce&&yt.nonce!==b.nonce)return k(new JsonWebTokenError("jwt nonce invalid. expected: "+b.nonce));if(b.maxAge){if(typeof yt.iat!="number")return k(new JsonWebTokenError("iat required when maxAge is specified"));var Et=timespan$1(b.maxAge,yt.iat);if(typeof Et>"u")return k(new JsonWebTokenError('"maxAge" should be a number of seconds or string representing a timespan eg: "1d", "20h", 60'));if(j>=Et+(b.clockTolerance||0))return k(new TokenExpiredError("maxAge exceeded",new Date(Et*1e3)))}if(b.complete===!0){var At=et.signature;return k(null,{header:nt,payload:yt,signature:At})}return k(null,yt)})},INFINITY$2=1/0,MAX_SAFE_INTEGER=9007199254740991,MAX_INTEGER$2=17976931348623157e292,NAN$2=NaN,argsTag="[object Arguments]",funcTag="[object Function]",genTag="[object GeneratorFunction]",stringTag$1="[object String]",symbolTag$2="[object Symbol]",reTrim$2=/^\s+|\s+$/g,reIsBadHex$2=/^[-+]0x[0-9a-f]+$/i,reIsBinary$2=/^0b[01]+$/i,reIsOctal$2=/^0o[0-7]+$/i,reIsUint=/^(?:0|[1-9]\d*)$/,freeParseInt$2=parseInt;function arrayMap(a,c){for(var b=-1,_=a?a.length:0,k=Array(_);++b<_;)k[b]=c(a[b],b,a);return k}function baseFindIndex(a,c,b,_){for(var k=a.length,j=b+(_?1:-1);_?j--:++j<k;)if(c(a[j],j,a))return j;return-1}function baseIndexOf(a,c,b){if(c!==c)return baseFindIndex(a,baseIsNaN,b);for(var _=b-1,k=a.length;++_<k;)if(a[_]===c)return _;return-1}function baseIsNaN(a){return a!==a}function baseTimes(a,c){for(var b=-1,_=Array(a);++b<a;)_[b]=c(b);return _}function baseValues(a,c){return arrayMap(c,function(b){return a[b]})}function overArg$1(a,c){return function(b){return a(c(b))}}var objectProto$6=Object.prototype,hasOwnProperty$1=objectProto$6.hasOwnProperty,objectToString$6=objectProto$6.toString,propertyIsEnumerable=objectProto$6.propertyIsEnumerable,nativeKeys=overArg$1(Object.keys,Object),nativeMax=Math.max;function arrayLikeKeys(a,c){var b=isArray$3(a)||isArguments(a)?baseTimes(a.length,String):[],_=b.length,k=!!_;for(var j in a)(c||hasOwnProperty$1.call(a,j))&&!(k&&(j=="length"||isIndex(j,_)))&&b.push(j);return b}function baseKeys(a){if(!isPrototype(a))return nativeKeys(a);var c=[];for(var b in Object(a))hasOwnProperty$1.call(a,b)&&b!="constructor"&&c.push(b);return c}function isIndex(a,c){return c=c??MAX_SAFE_INTEGER,!!c&&(typeof a=="number"||reIsUint.test(a))&&a>-1&&a%1==0&&a<c}function isPrototype(a){var c=a&&a.constructor,b=typeof c=="function"&&c.prototype||objectProto$6;return a===b}function includes$1(a,c,b,_){a=isArrayLike(a)?a:values(a),b=b&&!_?toInteger$2(b):0;var k=a.length;return b<0&&(b=nativeMax(k+b,0)),isString$3(a)?b<=k&&a.indexOf(c,b)>-1:!!k&&baseIndexOf(a,c,b)>-1}function isArguments(a){return isArrayLikeObject(a)&&hasOwnProperty$1.call(a,"callee")&&(!propertyIsEnumerable.call(a,"callee")||objectToString$6.call(a)==argsTag)}var isArray$3=Array.isArray;function isArrayLike(a){return a!=null&&isLength(a.length)&&!isFunction$1(a)}function isArrayLikeObject(a){return isObjectLike$6(a)&&isArrayLike(a)}function isFunction$1(a){var c=isObject$6(a)?objectToString$6.call(a):"";return c==funcTag||c==genTag}function isLength(a){return typeof a=="number"&&a>-1&&a%1==0&&a<=MAX_SAFE_INTEGER}function isObject$6(a){var c=typeof a;return!!a&&(c=="object"||c=="function")}function isObjectLike$6(a){return!!a&&typeof a=="object"}function isString$3(a){return typeof a=="string"||!isArray$3(a)&&isObjectLike$6(a)&&objectToString$6.call(a)==stringTag$1}function isSymbol$2(a){return typeof a=="symbol"||isObjectLike$6(a)&&objectToString$6.call(a)==symbolTag$2}function toFinite$2(a){if(!a)return a===0?a:0;if(a=toNumber$2(a),a===INFINITY$2||a===-INFINITY$2){var c=a<0?-1:1;return c*MAX_INTEGER$2}return a===a?a:0}function toInteger$2(a){var c=toFinite$2(a),b=c%1;return c===c?b?c-b:c:0}function toNumber$2(a){if(typeof a=="number")return a;if(isSymbol$2(a))return NAN$2;if(isObject$6(a)){var c=typeof a.valueOf=="function"?a.valueOf():a;a=isObject$6(c)?c+"":c}if(typeof a!="string")return a===0?a:+a;a=a.replace(reTrim$2,"");var b=reIsBinary$2.test(a);return b||reIsOctal$2.test(a)?freeParseInt$2(a.slice(2),b?2:8):reIsBadHex$2.test(a)?NAN$2:+a}function keys$1(a){return isArrayLike(a)?arrayLikeKeys(a):baseKeys(a)}function values(a){return a?baseValues(a,keys$1(a)):[]}var lodash_includes=includes$1,boolTag="[object Boolean]",objectProto$5=Object.prototype,objectToString$5=objectProto$5.toString;function isBoolean$1(a){return a===!0||a===!1||isObjectLike$5(a)&&objectToString$5.call(a)==boolTag}function isObjectLike$5(a){return!!a&&typeof a=="object"}var lodash_isboolean=isBoolean$1,INFINITY$1=1/0,MAX_INTEGER$1=17976931348623157e292,NAN$1=NaN,symbolTag$1="[object Symbol]",reTrim$1=/^\s+|\s+$/g,reIsBadHex$1=/^[-+]0x[0-9a-f]+$/i,reIsBinary$1=/^0b[01]+$/i,reIsOctal$1=/^0o[0-7]+$/i,freeParseInt$1=parseInt,objectProto$4=Object.prototype,objectToString$4=objectProto$4.toString;function isInteger$1(a){return typeof a=="number"&&a==toInteger$1(a)}function isObject$5(a){var c=typeof a;return!!a&&(c=="object"||c=="function")}function isObjectLike$4(a){return!!a&&typeof a=="object"}function isSymbol$1(a){return typeof a=="symbol"||isObjectLike$4(a)&&objectToString$4.call(a)==symbolTag$1}function toFinite$1(a){if(!a)return a===0?a:0;if(a=toNumber$1(a),a===INFINITY$1||a===-INFINITY$1){var c=a<0?-1:1;return c*MAX_INTEGER$1}return a===a?a:0}function toInteger$1(a){var c=toFinite$1(a),b=c%1;return c===c?b?c-b:c:0}function toNumber$1(a){if(typeof a=="number")return a;if(isSymbol$1(a))return NAN$1;if(isObject$5(a)){var c=typeof a.valueOf=="function"?a.valueOf():a;a=isObject$5(c)?c+"":c}if(typeof a!="string")return a===0?a:+a;a=a.replace(reTrim$1,"");var b=reIsBinary$1.test(a);return b||reIsOctal$1.test(a)?freeParseInt$1(a.slice(2),b?2:8):reIsBadHex$1.test(a)?NAN$1:+a}var lodash_isinteger=isInteger$1,numberTag="[object Number]",objectProto$3=Object.prototype,objectToString$3=objectProto$3.toString;function isObjectLike$3(a){return!!a&&typeof a=="object"}function isNumber$2(a){return typeof a=="number"||isObjectLike$3(a)&&objectToString$3.call(a)==numberTag}var lodash_isnumber=isNumber$2,objectTag="[object Object]";function isHostObject(a){var c=!1;if(a!=null&&typeof a.toString!="function")try{c=!!(a+"")}catch{}return c}function overArg(a,c){return function(b){return a(c(b))}}var funcProto=Function.prototype,objectProto$2=Object.prototype,funcToString=funcProto.toString,hasOwnProperty=objectProto$2.hasOwnProperty,objectCtorString=funcToString.call(Object),objectToString$2=objectProto$2.toString,getPrototype=overArg(Object.getPrototypeOf,Object);function isObjectLike$2(a){return!!a&&typeof a=="object"}function isPlainObject$2(a){if(!isObjectLike$2(a)||objectToString$2.call(a)!=objectTag||isHostObject(a))return!1;var c=getPrototype(a);if(c===null)return!0;var b=hasOwnProperty.call(c,"constructor")&&c.constructor;return typeof b=="function"&&b instanceof b&&funcToString.call(b)==objectCtorString}var lodash_isplainobject=isPlainObject$2,stringTag="[object String]",objectProto$1=Object.prototype,objectToString$1=objectProto$1.toString,isArray$2=Array.isArray;function isObjectLike$1(a){return!!a&&typeof a=="object"}function isString$2(a){return typeof a=="string"||!isArray$2(a)&&isObjectLike$1(a)&&objectToString$1.call(a)==stringTag}var lodash_isstring=isString$2,FUNC_ERROR_TEXT="Expected a function",INFINITY=1/0,MAX_INTEGER=17976931348623157e292,NAN=NaN,symbolTag="[object Symbol]",reTrim=/^\s+|\s+$/g,reIsBadHex=/^[-+]0x[0-9a-f]+$/i,reIsBinary=/^0b[01]+$/i,reIsOctal=/^0o[0-7]+$/i,freeParseInt=parseInt,objectProto=Object.prototype,objectToString=objectProto.toString;function before(a,c){var b;if(typeof c!="function")throw new TypeError(FUNC_ERROR_TEXT);return a=toInteger(a),function(){return--a>0&&(b=c.apply(this,arguments)),a<=1&&(c=void 0),b}}function once$1(a){return before(2,a)}function isObject$4(a){var c=typeof a;return!!a&&(c=="object"||c=="function")}function isObjectLike(a){return!!a&&typeof a=="object"}function isSymbol(a){return typeof a=="symbol"||isObjectLike(a)&&objectToString.call(a)==symbolTag}function toFinite(a){if(!a)return a===0?a:0;if(a=toNumber(a),a===INFINITY||a===-INFINITY){var c=a<0?-1:1;return c*MAX_INTEGER}return a===a?a:0}function toInteger(a){var c=toFinite(a),b=c%1;return c===c?b?c-b:c:0}function toNumber(a){if(typeof a=="number")return a;if(isSymbol(a))return NAN;if(isObject$4(a)){var c=typeof a.valueOf=="function"?a.valueOf():a;a=isObject$4(c)?c+"":c}if(typeof a!="string")return a===0?a:+a;a=a.replace(reTrim,"");var b=reIsBinary.test(a);return b||reIsOctal.test(a)?freeParseInt(a.slice(2),b?2:8):reIsBadHex.test(a)?NAN:+a}var lodash_once=once$1,timespan=timespan$2,PS_SUPPORTED=psSupported,jws=jws$3,includes=lodash_includes,isBoolean=lodash_isboolean,isInteger=lodash_isinteger,isNumber$1=lodash_isnumber,isPlainObject$1=lodash_isplainobject,isString$1=lodash_isstring,once=lodash_once,SUPPORTED_ALGS=["RS256","RS384","RS512","ES256","ES384","ES512","HS256","HS384","HS512","none"];PS_SUPPORTED&&SUPPORTED_ALGS.splice(3,0,"PS256","PS384","PS512");var sign_options_schema={expiresIn:{isValid:function(a){return isInteger(a)||isString$1(a)&&a},message:'"expiresIn" should be a number of seconds or string representing a timespan'},notBefore:{isValid:function(a){return isInteger(a)||isString$1(a)&&a},message:'"notBefore" should be a number of seconds or string representing a timespan'},audience:{isValid:function(a){return isString$1(a)||Array.isArray(a)},message:'"audience" must be a string or array'},algorithm:{isValid:includes.bind(null,SUPPORTED_ALGS),message:'"algorithm" must be a valid string enum value'},header:{isValid:isPlainObject$1,message:'"header" must be an object'},encoding:{isValid:isString$1,message:'"encoding" must be a string'},issuer:{isValid:isString$1,message:'"issuer" must be a string'},subject:{isValid:isString$1,message:'"subject" must be a string'},jwtid:{isValid:isString$1,message:'"jwtid" must be a string'},noTimestamp:{isValid:isBoolean,message:'"noTimestamp" must be a boolean'},keyid:{isValid:isString$1,message:'"keyid" must be a string'},mutatePayload:{isValid:isBoolean,message:'"mutatePayload" must be a boolean'}},registered_claims_schema={iat:{isValid:isNumber$1,message:'"iat" should be a number of seconds'},exp:{isValid:isNumber$1,message:'"exp" should be a number of seconds'},nbf:{isValid:isNumber$1,message:'"nbf" should be a number of seconds'}};function validate(a,c,b,_){if(!isPlainObject$1(b))throw new Error('Expected "'+_+'" to be a plain object.');Object.keys(b).forEach(function(k){var j=a[k];if(!j){if(!c)throw new Error('"'+k+'" is not allowed in "'+_+'"');return}if(!j.isValid(b[k]))throw new Error(j.message)})}function validateOptions(a){return validate(sign_options_schema,!1,a,"options")}function validatePayload(a){return validate(registered_claims_schema,!0,a,"payload")}var options_to_payload={audience:"aud",issuer:"iss",subject:"sub",jwtid:"jti"},options_for_objects=["expiresIn","notBefore","noTimestamp","audience","issuer","subject","jwtid"],sign=function(a,c,b,_){typeof b=="function"?(_=b,b={}):b=b||{};var k=typeof a=="object"&&!Buffer.isBuffer(a),j=Object.assign({alg:b.algorithm||"HS256",typ:k?"JWT":void 0,kid:b.keyid},b.header);function _e(ft){if(_)return _(ft);throw ft}if(!c&&b.algorithm!=="none")return _e(new Error("secretOrPrivateKey must have a value"));if(typeof a>"u")return _e(new Error("payload is required"));if(k){try{validatePayload(a)}catch(ft){return _e(ft)}b.mutatePayload||(a=Object.assign({},a))}else{var et=options_for_objects.filter(function(ft){return typeof b[ft]<"u"});if(et.length>0)return _e(new Error("invalid "+et.join(",")+" option for "+typeof a+" payload"))}if(typeof a.exp<"u"&&typeof b.expiresIn<"u")return _e(new Error('Bad "options.expiresIn" option the payload already has an "exp" property.'));if(typeof a.nbf<"u"&&typeof b.notBefore<"u")return _e(new Error('Bad "options.notBefore" option the payload already has an "nbf" property.'));try{validateOptions(b)}catch(ft){return _e(ft)}var nt=a.iat||Math.floor(Date.now()/1e3);if(b.noTimestamp?delete a.iat:k&&(a.iat=nt),typeof b.notBefore<"u"){try{a.nbf=timespan(b.notBefore,nt)}catch(ft){return _e(ft)}if(typeof a.nbf>"u")return _e(new Error('"notBefore" should be a number of seconds or string representing a timespan eg: "1d", "20h", 60'))}if(typeof b.expiresIn<"u"&&typeof a=="object"){try{a.exp=timespan(b.expiresIn,nt)}catch(ft){return _e(ft)}if(typeof a.exp>"u")return _e(new Error('"expiresIn" should be a number of seconds or string representing a timespan eg: "1d", "20h", 60'))}Object.keys(options_to_payload).forEach(function(ft){var pt=options_to_payload[ft];if(typeof b[ft]<"u"){if(typeof a[pt]<"u")return _e(new Error('Bad "options.'+ft+'" option. The payload already has an "'+pt+'" property.'));a[pt]=b[ft]}});var it=b.encoding||"utf8";if(typeof _=="function")_=_&&once(_),jws.createSign({header:j,privateKey:c,payload:a,encoding:it}).once("error",_).once("done",function(ft){_(null,ft)});else return jws.sign({header:j,payload:a,secret:c,encoding:it})},jsonwebtoken={decode:decode$1,verify,sign,JsonWebTokenError:JsonWebTokenError_1,NotBeforeError:NotBeforeError_1,TokenExpiredError:TokenExpiredError_1},define_process_env_default$1={},__createBinding=commonjsGlobal$1&&commonjsGlobal$1.__createBinding||(Object.create?function(a,c,b,_){_===void 0&&(_=b),Object.defineProperty(a,_,{enumerable:!0,get:function(){return c[b]}})}:function(a,c,b,_){_===void 0&&(_=b),a[_]=c[b]}),__setModuleDefault=commonjsGlobal$1&&commonjsGlobal$1.__setModuleDefault||(Object.create?function(a,c){Object.defineProperty(a,"default",{enumerable:!0,value:c})}:function(a,c){a.default=c}),__importStar=commonjsGlobal$1&&commonjsGlobal$1.__importStar||function(a){if(a&&a.__esModule)return a;var c={};if(a!=null)for(var b in a)b!=="default"&&Object.prototype.hasOwnProperty.call(a,b)&&__createBinding(c,a,b);return __setModuleDefault(c,a),c};Object.defineProperty(AccessToken$1,"__esModule",{value:!0});AccessToken$1.TokenVerifier=AccessToken$1.AccessToken=void 0;const jwt=__importStar(jsonwebtoken),defaultTTL=6*60*60;class AccessToken{constructor(c,b,_){if(c||(c=define_process_env_default$1.LIVEKIT_API_KEY),b||(b=define_process_env_default$1.LIVEKIT_API_SECRET),!c||!b)throw Error("api-key and api-secret must be set");this.apiKey=c,this.apiSecret=b,this.grants={},this.identity=_==null?void 0:_.identity,this.ttl=(_==null?void 0:_.ttl)||defaultTTL,_!=null&&_.metadata&&(this.metadata=_.metadata),_!=null&&_.name&&(this.name=_.name)}addGrant(c){this.grants.video=c}set metadata(c){this.grants.metadata=c}set name(c){this.grants.name=c}get sha256(){return this.grants.sha256}set sha256(c){this.grants.sha256=c}toJwt(){var c;const b={issuer:this.apiKey,expiresIn:this.ttl,notBefore:0};if(this.identity)b.subject=this.identity,b.jwtid=this.identity;else if(!((c=this.grants.video)===null||c===void 0)&&c.roomJoin)throw Error("identity is required for join but not set");return jwt.sign(this.grants,this.apiSecret,b)}}AccessToken$1.AccessToken=AccessToken;class TokenVerifier{constructor(c,b){this.apiKey=c,this.apiSecret=b}verify(c){const b=jwt.verify(c,this.apiSecret,{issuer:this.apiKey});if(!b)throw Error("invalid token");return b}}AccessToken$1.TokenVerifier=TokenVerifier;var EgressClient$1={},livekit_egress={};(function(a){var c=commonjsGlobal$1&&commonjsGlobal$1.__importDefault||function(at){return at&&at.__esModule?at:{default:at}};Object.defineProperty(a,"__esModule",{value:!0}),a.AutoTrackEgress=a.SegmentsInfo=a.FileInfo=a.StreamInfo=a.StreamInfoList=a.EgressInfo=a.StopEgressRequest=a.ListEgressResponse=a.ListEgressRequest=a.UpdateStreamRequest=a.UpdateLayoutRequest=a.EncodingOptions=a.StreamOutput=a.AliOSSUpload=a.AzureBlobUpload=a.GCPUpload=a.S3Upload_MetadataEntry=a.S3Upload=a.DirectFileOutput=a.SegmentedFileOutput=a.EncodedFileOutput=a.WebEgressRequest=a.TrackEgressRequest=a.TrackCompositeEgressRequest=a.RoomCompositeEgressRequest=a.streamInfo_StatusToJSON=a.streamInfo_StatusFromJSON=a.StreamInfo_Status=a.egressStatusToJSON=a.egressStatusFromJSON=a.EgressStatus=a.encodingOptionsPresetToJSON=a.encodingOptionsPresetFromJSON=a.EncodingOptionsPreset=a.videoCodecToJSON=a.videoCodecFromJSON=a.VideoCodec=a.audioCodecToJSON=a.audioCodecFromJSON=a.AudioCodec=a.segmentedFileProtocolToJSON=a.segmentedFileProtocolFromJSON=a.SegmentedFileProtocol=a.streamProtocolToJSON=a.streamProtocolFromJSON=a.StreamProtocol=a.encodedFileTypeToJSON=a.encodedFileTypeFromJSON=a.EncodedFileType=a.protobufPackage=void 0;const b=c(umdExports),_=c(minimal);a.protobufPackage="livekit";var k;(function(at){at[at.DEFAULT_FILETYPE=0]="DEFAULT_FILETYPE",at[at.MP4=1]="MP4",at[at.OGG=2]="OGG",at[at.UNRECOGNIZED=-1]="UNRECOGNIZED"})(k=a.EncodedFileType||(a.EncodedFileType={}));function j(at){switch(at){case 0:case"DEFAULT_FILETYPE":return k.DEFAULT_FILETYPE;case 1:case"MP4":return k.MP4;case 2:case"OGG":return k.OGG;case-1:case"UNRECOGNIZED":default:return k.UNRECOGNIZED}}a.encodedFileTypeFromJSON=j;function _e(at){switch(at){case k.DEFAULT_FILETYPE:return"DEFAULT_FILETYPE";case k.MP4:return"MP4";case k.OGG:return"OGG";case k.UNRECOGNIZED:default:return"UNRECOGNIZED"}}a.encodedFileTypeToJSON=_e;var et;(function(at){at[at.DEFAULT_PROTOCOL=0]="DEFAULT_PROTOCOL",at[at.RTMP=1]="RTMP",at[at.UNRECOGNIZED=-1]="UNRECOGNIZED"})(et=a.StreamProtocol||(a.StreamProtocol={}));function nt(at){switch(at){case 0:case"DEFAULT_PROTOCOL":return et.DEFAULT_PROTOCOL;case 1:case"RTMP":return et.RTMP;case-1:case"UNRECOGNIZED":default:return et.UNRECOGNIZED}}a.streamProtocolFromJSON=nt;function it(at){switch(at){case et.DEFAULT_PROTOCOL:return"DEFAULT_PROTOCOL";case et.RTMP:return"RTMP";case et.UNRECOGNIZED:default:return"UNRECOGNIZED"}}a.streamProtocolToJSON=it;var ft;(function(at){at[at.DEFAULT_SEGMENTED_FILE_PROTOCOL=0]="DEFAULT_SEGMENTED_FILE_PROTOCOL",at[at.HLS_PROTOCOL=1]="HLS_PROTOCOL",at[at.UNRECOGNIZED=-1]="UNRECOGNIZED"})(ft=a.SegmentedFileProtocol||(a.SegmentedFileProtocol={}));function pt(at){switch(at){case 0:case"DEFAULT_SEGMENTED_FILE_PROTOCOL":return ft.DEFAULT_SEGMENTED_FILE_PROTOCOL;case 1:case"HLS_PROTOCOL":return ft.HLS_PROTOCOL;case-1:case"UNRECOGNIZED":default:return ft.UNRECOGNIZED}}a.segmentedFileProtocolFromJSON=pt;function mt(at){switch(at){case ft.DEFAULT_SEGMENTED_FILE_PROTOCOL:return"DEFAULT_SEGMENTED_FILE_PROTOCOL";case ft.HLS_PROTOCOL:return"HLS_PROTOCOL";case ft.UNRECOGNIZED:default:return"UNRECOGNIZED"}}a.segmentedFileProtocolToJSON=mt;var St;(function(at){at[at.DEFAULT_AC=0]="DEFAULT_AC",at[at.OPUS=1]="OPUS",at[at.AAC=2]="AAC",at[at.UNRECOGNIZED=-1]="UNRECOGNIZED"})(St=a.AudioCodec||(a.AudioCodec={}));function yt(at){switch(at){case 0:case"DEFAULT_AC":return St.DEFAULT_AC;case 1:case"OPUS":return St.OPUS;case 2:case"AAC":return St.AAC;case-1:case"UNRECOGNIZED":default:return St.UNRECOGNIZED}}a.audioCodecFromJSON=yt;function _t(at){switch(at){case St.DEFAULT_AC:return"DEFAULT_AC";case St.OPUS:return"OPUS";case St.AAC:return"AAC";case St.UNRECOGNIZED:default:return"UNRECOGNIZED"}}a.audioCodecToJSON=_t;var Tt;(function(at){at[at.DEFAULT_VC=0]="DEFAULT_VC",at[at.H264_BASELINE=1]="H264_BASELINE",at[at.H264_MAIN=2]="H264_MAIN",at[at.H264_HIGH=3]="H264_HIGH",at[at.UNRECOGNIZED=-1]="UNRECOGNIZED"})(Tt=a.VideoCodec||(a.VideoCodec={}));function gt(at){switch(at){case 0:case"DEFAULT_VC":return Tt.DEFAULT_VC;case 1:case"H264_BASELINE":return Tt.H264_BASELINE;case 2:case"H264_MAIN":return Tt.H264_MAIN;case 3:case"H264_HIGH":return Tt.H264_HIGH;case-1:case"UNRECOGNIZED":default:return Tt.UNRECOGNIZED}}a.videoCodecFromJSON=gt;function ht(at){switch(at){case Tt.DEFAULT_VC:return"DEFAULT_VC";case Tt.H264_BASELINE:return"H264_BASELINE";case Tt.H264_MAIN:return"H264_MAIN";case Tt.H264_HIGH:return"H264_HIGH";case Tt.UNRECOGNIZED:default:return"UNRECOGNIZED"}}a.videoCodecToJSON=ht;var Et;(function(at){at[at.H264_720P_30=0]="H264_720P_30",at[at.H264_720P_60=1]="H264_720P_60",at[at.H264_1080P_30=2]="H264_1080P_30",at[at.H264_1080P_60=3]="H264_1080P_60",at[at.PORTRAIT_H264_720P_30=4]="PORTRAIT_H264_720P_30",at[at.PORTRAIT_H264_720P_60=5]="PORTRAIT_H264_720P_60",at[at.PORTRAIT_H264_1080P_30=6]="PORTRAIT_H264_1080P_30",at[at.PORTRAIT_H264_1080P_60=7]="PORTRAIT_H264_1080P_60",at[at.UNRECOGNIZED=-1]="UNRECOGNIZED"})(Et=a.EncodingOptionsPreset||(a.EncodingOptionsPreset={}));function At(at){switch(at){case 0:case"H264_720P_30":return Et.H264_720P_30;case 1:case"H264_720P_60":return Et.H264_720P_60;case 2:case"H264_1080P_30":return Et.H264_1080P_30;case 3:case"H264_1080P_60":return Et.H264_1080P_60;case 4:case"PORTRAIT_H264_720P_30":return Et.PORTRAIT_H264_720P_30;case 5:case"PORTRAIT_H264_720P_60":return Et.PORTRAIT_H264_720P_60;case 6:case"PORTRAIT_H264_1080P_30":return Et.PORTRAIT_H264_1080P_30;case 7:case"PORTRAIT_H264_1080P_60":return Et.PORTRAIT_H264_1080P_60;case-1:case"UNRECOGNIZED":default:return Et.UNRECOGNIZED}}a.encodingOptionsPresetFromJSON=At;function Bt(at){switch(at){case Et.H264_720P_30:return"H264_720P_30";case Et.H264_720P_60:return"H264_720P_60";case Et.H264_1080P_30:return"H264_1080P_30";case Et.H264_1080P_60:return"H264_1080P_60";case Et.PORTRAIT_H264_720P_30:return"PORTRAIT_H264_720P_30";case Et.PORTRAIT_H264_720P_60:return"PORTRAIT_H264_720P_60";case Et.PORTRAIT_H264_1080P_30:return"PORTRAIT_H264_1080P_30";case Et.PORTRAIT_H264_1080P_60:return"PORTRAIT_H264_1080P_60";case Et.UNRECOGNIZED:default:return"UNRECOGNIZED"}}a.encodingOptionsPresetToJSON=Bt;var qt;(function(at){at[at.EGRESS_STARTING=0]="EGRESS_STARTING",at[at.EGRESS_ACTIVE=1]="EGRESS_ACTIVE",at[at.EGRESS_ENDING=2]="EGRESS_ENDING",at[at.EGRESS_COMPLETE=3]="EGRESS_COMPLETE",at[at.EGRESS_FAILED=4]="EGRESS_FAILED",at[at.EGRESS_ABORTED=5]="EGRESS_ABORTED",at[at.EGRESS_LIMIT_REACHED=6]="EGRESS_LIMIT_REACHED",at[at.UNRECOGNIZED=-1]="UNRECOGNIZED"})(qt=a.EgressStatus||(a.EgressStatus={}));function zt(at){switch(at){case 0:case"EGRESS_STARTING":return qt.EGRESS_STARTING;case 1:case"EGRESS_ACTIVE":return qt.EGRESS_ACTIVE;case 2:case"EGRESS_ENDING":return qt.EGRESS_ENDING;case 3:case"EGRESS_COMPLETE":return qt.EGRESS_COMPLETE;case 4:case"EGRESS_FAILED":return qt.EGRESS_FAILED;case 5:case"EGRESS_ABORTED":return qt.EGRESS_ABORTED;case 6:case"EGRESS_LIMIT_REACHED":return qt.EGRESS_LIMIT_REACHED;case-1:case"UNRECOGNIZED":default:return qt.UNRECOGNIZED}}a.egressStatusFromJSON=zt;function Ht(at){switch(at){case qt.EGRESS_STARTING:return"EGRESS_STARTING";case qt.EGRESS_ACTIVE:return"EGRESS_ACTIVE";case qt.EGRESS_ENDING:return"EGRESS_ENDING";case qt.EGRESS_COMPLETE:return"EGRESS_COMPLETE";case qt.EGRESS_FAILED:return"EGRESS_FAILED";case qt.EGRESS_ABORTED:return"EGRESS_ABORTED";case qt.EGRESS_LIMIT_REACHED:return"EGRESS_LIMIT_REACHED";case qt.UNRECOGNIZED:default:return"UNRECOGNIZED"}}a.egressStatusToJSON=Ht;var ct;(function(at){at[at.ACTIVE=0]="ACTIVE",at[at.FINISHED=1]="FINISHED",at[at.FAILED=2]="FAILED",at[at.UNRECOGNIZED=-1]="UNRECOGNIZED"})(ct=a.StreamInfo_Status||(a.StreamInfo_Status={}));function dt(at){switch(at){case 0:case"ACTIVE":return ct.ACTIVE;case 1:case"FINISHED":return ct.FINISHED;case 2:case"FAILED":return ct.FAILED;case-1:case"UNRECOGNIZED":default:return ct.UNRECOGNIZED}}a.streamInfo_StatusFromJSON=dt;function lt(at){switch(at){case ct.ACTIVE:return"ACTIVE";case ct.FINISHED:return"FINISHED";case ct.FAILED:return"FAILED";case ct.UNRECOGNIZED:default:return"UNRECOGNIZED"}}a.streamInfo_StatusToJSON=lt;function kt(){return{roomName:"",layout:"",audioOnly:!1,videoOnly:!1,customBaseUrl:"",file:void 0,stream:void 0,segments:void 0,preset:void 0,advanced:void 0}}a.RoomCompositeEgressRequest={encode(at,Rt=_.default.Writer.create()){return at.roomName!==void 0&&at.roomName!==""&&Rt.uint32(10).string(at.roomName),at.layout!==void 0&&at.layout!==""&&Rt.uint32(18).string(at.layout),at.audioOnly===!0&&Rt.uint32(24).bool(at.audioOnly),at.videoOnly===!0&&Rt.uint32(32).bool(at.videoOnly),at.customBaseUrl!==void 0&&at.customBaseUrl!==""&&Rt.uint32(42).string(at.customBaseUrl),at.file!==void 0&&a.EncodedFileOutput.encode(at.file,Rt.uint32(50).fork()).ldelim(),at.stream!==void 0&&a.StreamOutput.encode(at.stream,Rt.uint32(58).fork()).ldelim(),at.segments!==void 0&&a.SegmentedFileOutput.encode(at.segments,Rt.uint32(82).fork()).ldelim(),at.preset!==void 0&&Rt.uint32(64).int32(at.preset),at.advanced!==void 0&&a.EncodingOptions.encode(at.advanced,Rt.uint32(74).fork()).ldelim(),Rt},decode(at,Rt){const Ut=at instanceof _.default.Reader?at:new _.default.Reader(at);let un=Rt===void 0?Ut.len:Ut.pos+Rt;const Vt=kt();for(;Ut.pos<un;){const st=Ut.uint32();switch(st>>>3){case 1:Vt.roomName=Ut.string();break;case 2:Vt.layout=Ut.string();break;case 3:Vt.audioOnly=Ut.bool();break;case 4:Vt.videoOnly=Ut.bool();break;case 5:Vt.customBaseUrl=Ut.string();break;case 6:Vt.file=a.EncodedFileOutput.decode(Ut,Ut.uint32());break;case 7:Vt.stream=a.StreamOutput.decode(Ut,Ut.uint32());break;case 10:Vt.segments=a.SegmentedFileOutput.decode(Ut,Ut.uint32());break;case 8:Vt.preset=Ut.int32();break;case 9:Vt.advanced=a.EncodingOptions.decode(Ut,Ut.uint32());break;default:Ut.skipType(st&7);break}}return Vt},fromJSON(at){return{roomName:Xt(at.roomName)?String(at.roomName):"",layout:Xt(at.layout)?String(at.layout):"",audioOnly:Xt(at.audioOnly)?!!at.audioOnly:!1,videoOnly:Xt(at.videoOnly)?!!at.videoOnly:!1,customBaseUrl:Xt(at.customBaseUrl)?String(at.customBaseUrl):"",file:Xt(at.file)?a.EncodedFileOutput.fromJSON(at.file):void 0,stream:Xt(at.stream)?a.StreamOutput.fromJSON(at.stream):void 0,segments:Xt(at.segments)?a.SegmentedFileOutput.fromJSON(at.segments):void 0,preset:Xt(at.preset)?At(at.preset):void 0,advanced:Xt(at.advanced)?a.EncodingOptions.fromJSON(at.advanced):void 0}},toJSON(at){const Rt={};return at.roomName!==void 0&&(Rt.roomName=at.roomName),at.layout!==void 0&&(Rt.layout=at.layout),at.audioOnly!==void 0&&(Rt.audioOnly=at.audioOnly),at.videoOnly!==void 0&&(Rt.videoOnly=at.videoOnly),at.customBaseUrl!==void 0&&(Rt.customBaseUrl=at.customBaseUrl),at.file!==void 0&&(Rt.file=at.file?a.EncodedFileOutput.toJSON(at.file):void 0),at.stream!==void 0&&(Rt.stream=at.stream?a.StreamOutput.toJSON(at.stream):void 0),at.segments!==void 0&&(Rt.segments=at.segments?a.SegmentedFileOutput.toJSON(at.segments):void 0),at.preset!==void 0&&(Rt.preset=at.preset!==void 0?Bt(at.preset):void 0),at.advanced!==void 0&&(Rt.advanced=at.advanced?a.EncodingOptions.toJSON(at.advanced):void 0),Rt},fromPartial(at){var Rt,Ut,un,Vt,st,wt;const Ft=kt();return Ft.roomName=(Rt=at.roomName)!==null&&Rt!==void 0?Rt:"",Ft.layout=(Ut=at.layout)!==null&&Ut!==void 0?Ut:"",Ft.audioOnly=(un=at.audioOnly)!==null&&un!==void 0?un:!1,Ft.videoOnly=(Vt=at.videoOnly)!==null&&Vt!==void 0?Vt:!1,Ft.customBaseUrl=(st=at.customBaseUrl)!==null&&st!==void 0?st:"",Ft.file=at.file!==void 0&&at.file!==null?a.EncodedFileOutput.fromPartial(at.file):void 0,Ft.stream=at.stream!==void 0&&at.stream!==null?a.StreamOutput.fromPartial(at.stream):void 0,Ft.segments=at.segments!==void 0&&at.segments!==null?a.SegmentedFileOutput.fromPartial(at.segments):void 0,Ft.preset=(wt=at.preset)!==null&&wt!==void 0?wt:void 0,Ft.advanced=at.advanced!==void 0&&at.advanced!==null?a.EncodingOptions.fromPartial(at.advanced):void 0,Ft}};function Lt(){return{roomName:"",audioTrackId:"",videoTrackId:"",file:void 0,stream:void 0,segments:void 0,preset:void 0,advanced:void 0}}a.TrackCompositeEgressRequest={encode(at,Rt=_.default.Writer.create()){return at.roomName!==void 0&&at.roomName!==""&&Rt.uint32(10).string(at.roomName),at.audioTrackId!==void 0&&at.audioTrackId!==""&&Rt.uint32(18).string(at.audioTrackId),at.videoTrackId!==void 0&&at.videoTrackId!==""&&Rt.uint32(26).string(at.videoTrackId),at.file!==void 0&&a.EncodedFileOutput.encode(at.file,Rt.uint32(34).fork()).ldelim(),at.stream!==void 0&&a.StreamOutput.encode(at.stream,Rt.uint32(42).fork()).ldelim(),at.segments!==void 0&&a.SegmentedFileOutput.encode(at.segments,Rt.uint32(66).fork()).ldelim(),at.preset!==void 0&&Rt.uint32(48).int32(at.preset),at.advanced!==void 0&&a.EncodingOptions.encode(at.advanced,Rt.uint32(58).fork()).ldelim(),Rt},decode(at,Rt){const Ut=at instanceof _.default.Reader?at:new _.default.Reader(at);let un=Rt===void 0?Ut.len:Ut.pos+Rt;const Vt=Lt();for(;Ut.pos<un;){const st=Ut.uint32();switch(st>>>3){case 1:Vt.roomName=Ut.string();break;case 2:Vt.audioTrackId=Ut.string();break;case 3:Vt.videoTrackId=Ut.string();break;case 4:Vt.file=a.EncodedFileOutput.decode(Ut,Ut.uint32());break;case 5:Vt.stream=a.StreamOutput.decode(Ut,Ut.uint32());break;case 8:Vt.segments=a.SegmentedFileOutput.decode(Ut,Ut.uint32());break;case 6:Vt.preset=Ut.int32();break;case 7:Vt.advanced=a.EncodingOptions.decode(Ut,Ut.uint32());break;default:Ut.skipType(st&7);break}}return Vt},fromJSON(at){return{roomName:Xt(at.roomName)?String(at.roomName):"",audioTrackId:Xt(at.audioTrackId)?String(at.audioTrackId):"",videoTrackId:Xt(at.videoTrackId)?String(at.videoTrackId):"",file:Xt(at.file)?a.EncodedFileOutput.fromJSON(at.file):void 0,stream:Xt(at.stream)?a.StreamOutput.fromJSON(at.stream):void 0,segments:Xt(at.segments)?a.SegmentedFileOutput.fromJSON(at.segments):void 0,preset:Xt(at.preset)?At(at.preset):void 0,advanced:Xt(at.advanced)?a.EncodingOptions.fromJSON(at.advanced):void 0}},toJSON(at){const Rt={};return at.roomName!==void 0&&(Rt.roomName=at.roomName),at.audioTrackId!==void 0&&(Rt.audioTrackId=at.audioTrackId),at.videoTrackId!==void 0&&(Rt.videoTrackId=at.videoTrackId),at.file!==void 0&&(Rt.file=at.file?a.EncodedFileOutput.toJSON(at.file):void 0),at.stream!==void 0&&(Rt.stream=at.stream?a.StreamOutput.toJSON(at.stream):void 0),at.segments!==void 0&&(Rt.segments=at.segments?a.SegmentedFileOutput.toJSON(at.segments):void 0),at.preset!==void 0&&(Rt.preset=at.preset!==void 0?Bt(at.preset):void 0),at.advanced!==void 0&&(Rt.advanced=at.advanced?a.EncodingOptions.toJSON(at.advanced):void 0),Rt},fromPartial(at){var Rt,Ut,un,Vt;const st=Lt();return st.roomName=(Rt=at.roomName)!==null&&Rt!==void 0?Rt:"",st.audioTrackId=(Ut=at.audioTrackId)!==null&&Ut!==void 0?Ut:"",st.videoTrackId=(un=at.videoTrackId)!==null&&un!==void 0?un:"",st.file=at.file!==void 0&&at.file!==null?a.EncodedFileOutput.fromPartial(at.file):void 0,st.stream=at.stream!==void 0&&at.stream!==null?a.StreamOutput.fromPartial(at.stream):void 0,st.segments=at.segments!==void 0&&at.segments!==null?a.SegmentedFileOutput.fromPartial(at.segments):void 0,st.preset=(Vt=at.preset)!==null&&Vt!==void 0?Vt:void 0,st.advanced=at.advanced!==void 0&&at.advanced!==null?a.EncodingOptions.fromPartial(at.advanced):void 0,st}};function Jt(){return{roomName:"",trackId:"",file:void 0,websocketUrl:void 0}}a.TrackEgressRequest={encode(at,Rt=_.default.Writer.create()){return at.roomName!==void 0&&at.roomName!==""&&Rt.uint32(10).string(at.roomName),at.trackId!==void 0&&at.trackId!==""&&Rt.uint32(18).string(at.trackId),at.file!==void 0&&a.DirectFileOutput.encode(at.file,Rt.uint32(26).fork()).ldelim(),at.websocketUrl!==void 0&&Rt.uint32(34).string(at.websocketUrl),Rt},decode(at,Rt){const Ut=at instanceof _.default.Reader?at:new _.default.Reader(at);let un=Rt===void 0?Ut.len:Ut.pos+Rt;const Vt=Jt();for(;Ut.pos<un;){const st=Ut.uint32();switch(st>>>3){case 1:Vt.roomName=Ut.string();break;case 2:Vt.trackId=Ut.string();break;case 3:Vt.file=a.DirectFileOutput.decode(Ut,Ut.uint32());break;case 4:Vt.websocketUrl=Ut.string();break;default:Ut.skipType(st&7);break}}return Vt},fromJSON(at){return{roomName:Xt(at.roomName)?String(at.roomName):"",trackId:Xt(at.trackId)?String(at.trackId):"",file:Xt(at.file)?a.DirectFileOutput.fromJSON(at.file):void 0,websocketUrl:Xt(at.websocketUrl)?String(at.websocketUrl):void 0}},toJSON(at){const Rt={};return at.roomName!==void 0&&(Rt.roomName=at.roomName),at.trackId!==void 0&&(Rt.trackId=at.trackId),at.file!==void 0&&(Rt.file=at.file?a.DirectFileOutput.toJSON(at.file):void 0),at.websocketUrl!==void 0&&(Rt.websocketUrl=at.websocketUrl),Rt},fromPartial(at){var Rt,Ut,un;const Vt=Jt();return Vt.roomName=(Rt=at.roomName)!==null&&Rt!==void 0?Rt:"",Vt.trackId=(Ut=at.trackId)!==null&&Ut!==void 0?Ut:"",Vt.file=at.file!==void 0&&at.file!==null?a.DirectFileOutput.fromPartial(at.file):void 0,Vt.websocketUrl=(un=at.websocketUrl)!==null&&un!==void 0?un:void 0,Vt}};function en(){return{url:"",audioOnly:!1,videoOnly:!1,file:void 0,stream:void 0,segments:void 0,preset:void 0,advanced:void 0}}a.WebEgressRequest={encode(at,Rt=_.default.Writer.create()){return at.url!==void 0&&at.url!==""&&Rt.uint32(10).string(at.url),at.audioOnly===!0&&Rt.uint32(16).bool(at.audioOnly),at.videoOnly===!0&&Rt.uint32(24).bool(at.videoOnly),at.file!==void 0&&a.EncodedFileOutput.encode(at.file,Rt.uint32(34).fork()).ldelim(),at.stream!==void 0&&a.StreamOutput.encode(at.stream,Rt.uint32(42).fork()).ldelim(),at.segments!==void 0&&a.SegmentedFileOutput.encode(at.segments,Rt.uint32(50).fork()).ldelim(),at.preset!==void 0&&Rt.uint32(56).int32(at.preset),at.advanced!==void 0&&a.EncodingOptions.encode(at.advanced,Rt.uint32(66).fork()).ldelim(),Rt},decode(at,Rt){const Ut=at instanceof _.default.Reader?at:new _.default.Reader(at);let un=Rt===void 0?Ut.len:Ut.pos+Rt;const Vt=en();for(;Ut.pos<un;){const st=Ut.uint32();switch(st>>>3){case 1:Vt.url=Ut.string();break;case 2:Vt.audioOnly=Ut.bool();break;case 3:Vt.videoOnly=Ut.bool();break;case 4:Vt.file=a.EncodedFileOutput.decode(Ut,Ut.uint32());break;case 5:Vt.stream=a.StreamOutput.decode(Ut,Ut.uint32());break;case 6:Vt.segments=a.SegmentedFileOutput.decode(Ut,Ut.uint32());break;case 7:Vt.preset=Ut.int32();break;case 8:Vt.advanced=a.EncodingOptions.decode(Ut,Ut.uint32());break;default:Ut.skipType(st&7);break}}return Vt},fromJSON(at){return{url:Xt(at.url)?String(at.url):"",audioOnly:Xt(at.audioOnly)?!!at.audioOnly:!1,videoOnly:Xt(at.videoOnly)?!!at.videoOnly:!1,file:Xt(at.file)?a.EncodedFileOutput.fromJSON(at.file):void 0,stream:Xt(at.stream)?a.StreamOutput.fromJSON(at.stream):void 0,segments:Xt(at.segments)?a.SegmentedFileOutput.fromJSON(at.segments):void 0,preset:Xt(at.preset)?At(at.preset):void 0,advanced:Xt(at.advanced)?a.EncodingOptions.fromJSON(at.advanced):void 0}},toJSON(at){const Rt={};return at.url!==void 0&&(Rt.url=at.url),at.audioOnly!==void 0&&(Rt.audioOnly=at.audioOnly),at.videoOnly!==void 0&&(Rt.videoOnly=at.videoOnly),at.file!==void 0&&(Rt.file=at.file?a.EncodedFileOutput.toJSON(at.file):void 0),at.stream!==void 0&&(Rt.stream=at.stream?a.StreamOutput.toJSON(at.stream):void 0),at.segments!==void 0&&(Rt.segments=at.segments?a.SegmentedFileOutput.toJSON(at.segments):void 0),at.preset!==void 0&&(Rt.preset=at.preset!==void 0?Bt(at.preset):void 0),at.advanced!==void 0&&(Rt.advanced=at.advanced?a.EncodingOptions.toJSON(at.advanced):void 0),Rt},fromPartial(at){var Rt,Ut,un,Vt;const st=en();return st.url=(Rt=at.url)!==null&&Rt!==void 0?Rt:"",st.audioOnly=(Ut=at.audioOnly)!==null&&Ut!==void 0?Ut:!1,st.videoOnly=(un=at.videoOnly)!==null&&un!==void 0?un:!1,st.file=at.file!==void 0&&at.file!==null?a.EncodedFileOutput.fromPartial(at.file):void 0,st.stream=at.stream!==void 0&&at.stream!==null?a.StreamOutput.fromPartial(at.stream):void 0,st.segments=at.segments!==void 0&&at.segments!==null?a.SegmentedFileOutput.fromPartial(at.segments):void 0,st.preset=(Vt=at.preset)!==null&&Vt!==void 0?Vt:void 0,st.advanced=at.advanced!==void 0&&at.advanced!==null?a.EncodingOptions.fromPartial(at.advanced):void 0,st}};function Qt(){return{fileType:0,filepath:"",disableManifest:!1,s3:void 0,gcp:void 0,azure:void 0,aliOSS:void 0}}a.EncodedFileOutput={encode(at,Rt=_.default.Writer.create()){return at.fileType!==void 0&&at.fileType!==0&&Rt.uint32(8).int32(at.fileType),at.filepath!==void 0&&at.filepath!==""&&Rt.uint32(18).string(at.filepath),at.disableManifest===!0&&Rt.uint32(48).bool(at.disableManifest),at.s3!==void 0&&a.S3Upload.encode(at.s3,Rt.uint32(26).fork()).ldelim(),at.gcp!==void 0&&a.GCPUpload.encode(at.gcp,Rt.uint32(34).fork()).ldelim(),at.azure!==void 0&&a.AzureBlobUpload.encode(at.azure,Rt.uint32(42).fork()).ldelim(),at.aliOSS!==void 0&&a.AliOSSUpload.encode(at.aliOSS,Rt.uint32(58).fork()).ldelim(),Rt},decode(at,Rt){const Ut=at instanceof _.default.Reader?at:new _.default.Reader(at);let un=Rt===void 0?Ut.len:Ut.pos+Rt;const Vt=Qt();for(;Ut.pos<un;){const st=Ut.uint32();switch(st>>>3){case 1:Vt.fileType=Ut.int32();break;case 2:Vt.filepath=Ut.string();break;case 6:Vt.disableManifest=Ut.bool();break;case 3:Vt.s3=a.S3Upload.decode(Ut,Ut.uint32());break;case 4:Vt.gcp=a.GCPUpload.decode(Ut,Ut.uint32());break;case 5:Vt.azure=a.AzureBlobUpload.decode(Ut,Ut.uint32());break;case 7:Vt.aliOSS=a.AliOSSUpload.decode(Ut,Ut.uint32());break;default:Ut.skipType(st&7);break}}return Vt},fromJSON(at){return{fileType:Xt(at.fileType)?j(at.fileType):0,filepath:Xt(at.filepath)?String(at.filepath):"",disableManifest:Xt(at.disableManifest)?!!at.disableManifest:!1,s3:Xt(at.s3)?a.S3Upload.fromJSON(at.s3):void 0,gcp:Xt(at.gcp)?a.GCPUpload.fromJSON(at.gcp):void 0,azure:Xt(at.azure)?a.AzureBlobUpload.fromJSON(at.azure):void 0,aliOSS:Xt(at.aliOSS)?a.AliOSSUpload.fromJSON(at.aliOSS):void 0}},toJSON(at){const Rt={};return at.fileType!==void 0&&(Rt.fileType=_e(at.fileType)),at.filepath!==void 0&&(Rt.filepath=at.filepath),at.disableManifest!==void 0&&(Rt.disableManifest=at.disableManifest),at.s3!==void 0&&(Rt.s3=at.s3?a.S3Upload.toJSON(at.s3):void 0),at.gcp!==void 0&&(Rt.gcp=at.gcp?a.GCPUpload.toJSON(at.gcp):void 0),at.azure!==void 0&&(Rt.azure=at.azure?a.AzureBlobUpload.toJSON(at.azure):void 0),at.aliOSS!==void 0&&(Rt.aliOSS=at.aliOSS?a.AliOSSUpload.toJSON(at.aliOSS):void 0),Rt},fromPartial(at){var Rt,Ut,un;const Vt=Qt();return Vt.fileType=(Rt=at.fileType)!==null&&Rt!==void 0?Rt:0,Vt.filepath=(Ut=at.filepath)!==null&&Ut!==void 0?Ut:"",Vt.disableManifest=(un=at.disableManifest)!==null&&un!==void 0?un:!1,Vt.s3=at.s3!==void 0&&at.s3!==null?a.S3Upload.fromPartial(at.s3):void 0,Vt.gcp=at.gcp!==void 0&&at.gcp!==null?a.GCPUpload.fromPartial(at.gcp):void 0,Vt.azure=at.azure!==void 0&&at.azure!==null?a.AzureBlobUpload.fromPartial(at.azure):void 0,Vt.aliOSS=at.aliOSS!==void 0&&at.aliOSS!==null?a.AliOSSUpload.fromPartial(at.aliOSS):void 0,Vt}};function xt(){return{protocol:0,filenamePrefix:"",playlistName:"",segmentDuration:0,disableManifest:!1,s3:void 0,gcp:void 0,azure:void 0,aliOSS:void 0}}a.SegmentedFileOutput={encode(at,Rt=_.default.Writer.create()){return at.protocol!==void 0&&at.protocol!==0&&Rt.uint32(8).int32(at.protocol),at.filenamePrefix!==void 0&&at.filenamePrefix!==""&&Rt.uint32(18).string(at.filenamePrefix),at.playlistName!==void 0&&at.playlistName!==""&&Rt.uint32(26).string(at.playlistName),at.segmentDuration!==void 0&&at.segmentDuration!==0&&Rt.uint32(32).uint32(at.segmentDuration),at.disableManifest===!0&&Rt.uint32(64).bool(at.disableManifest),at.s3!==void 0&&a.S3Upload.encode(at.s3,Rt.uint32(42).fork()).ldelim(),at.gcp!==void 0&&a.GCPUpload.encode(at.gcp,Rt.uint32(50).fork()).ldelim(),at.azure!==void 0&&a.AzureBlobUpload.encode(at.azure,Rt.uint32(58).fork()).ldelim(),at.aliOSS!==void 0&&a.AliOSSUpload.encode(at.aliOSS,Rt.uint32(74).fork()).ldelim(),Rt},decode(at,Rt){const Ut=at instanceof _.default.Reader?at:new _.default.Reader(at);let un=Rt===void 0?Ut.len:Ut.pos+Rt;const Vt=xt();for(;Ut.pos<un;){const st=Ut.uint32();switch(st>>>3){case 1:Vt.protocol=Ut.int32();break;case 2:Vt.filenamePrefix=Ut.string();break;case 3:Vt.playlistName=Ut.string();break;case 4:Vt.segmentDuration=Ut.uint32();break;case 8:Vt.disableManifest=Ut.bool();break;case 5:Vt.s3=a.S3Upload.decode(Ut,Ut.uint32());break;case 6:Vt.gcp=a.GCPUpload.decode(Ut,Ut.uint32());break;case 7:Vt.azure=a.AzureBlobUpload.decode(Ut,Ut.uint32());break;case 9:Vt.aliOSS=a.AliOSSUpload.decode(Ut,Ut.uint32());break;default:Ut.skipType(st&7);break}}return Vt},fromJSON(at){return{protocol:Xt(at.protocol)?pt(at.protocol):0,filenamePrefix:Xt(at.filenamePrefix)?String(at.filenamePrefix):"",playlistName:Xt(at.playlistName)?String(at.playlistName):"",segmentDuration:Xt(at.segmentDuration)?Number(at.segmentDuration):0,disableManifest:Xt(at.disableManifest)?!!at.disableManifest:!1,s3:Xt(at.s3)?a.S3Upload.fromJSON(at.s3):void 0,gcp:Xt(at.gcp)?a.GCPUpload.fromJSON(at.gcp):void 0,azure:Xt(at.azure)?a.AzureBlobUpload.fromJSON(at.azure):void 0,aliOSS:Xt(at.aliOSS)?a.AliOSSUpload.fromJSON(at.aliOSS):void 0}},toJSON(at){const Rt={};return at.protocol!==void 0&&(Rt.protocol=mt(at.protocol)),at.filenamePrefix!==void 0&&(Rt.filenamePrefix=at.filenamePrefix),at.playlistName!==void 0&&(Rt.playlistName=at.playlistName),at.segmentDuration!==void 0&&(Rt.segmentDuration=Math.round(at.segmentDuration)),at.disableManifest!==void 0&&(Rt.disableManifest=at.disableManifest),at.s3!==void 0&&(Rt.s3=at.s3?a.S3Upload.toJSON(at.s3):void 0),at.gcp!==void 0&&(Rt.gcp=at.gcp?a.GCPUpload.toJSON(at.gcp):void 0),at.azure!==void 0&&(Rt.azure=at.azure?a.AzureBlobUpload.toJSON(at.azure):void 0),at.aliOSS!==void 0&&(Rt.aliOSS=at.aliOSS?a.AliOSSUpload.toJSON(at.aliOSS):void 0),Rt},fromPartial(at){var Rt,Ut,un,Vt,st;const wt=xt();return wt.protocol=(Rt=at.protocol)!==null&&Rt!==void 0?Rt:0,wt.filenamePrefix=(Ut=at.filenamePrefix)!==null&&Ut!==void 0?Ut:"",wt.playlistName=(un=at.playlistName)!==null&&un!==void 0?un:"",wt.segmentDuration=(Vt=at.segmentDuration)!==null&&Vt!==void 0?Vt:0,wt.disableManifest=(st=at.disableManifest)!==null&&st!==void 0?st:!1,wt.s3=at.s3!==void 0&&at.s3!==null?a.S3Upload.fromPartial(at.s3):void 0,wt.gcp=at.gcp!==void 0&&at.gcp!==null?a.GCPUpload.fromPartial(at.gcp):void 0,wt.azure=at.azure!==void 0&&at.azure!==null?a.AzureBlobUpload.fromPartial(at.azure):void 0,wt.aliOSS=at.aliOSS!==void 0&&at.aliOSS!==null?a.AliOSSUpload.fromPartial(at.aliOSS):void 0,wt}};function rn(){return{filepath:"",disableManifest:!1,s3:void 0,gcp:void 0,azure:void 0,aliOSS:void 0}}a.DirectFileOutput={encode(at,Rt=_.default.Writer.create()){return at.filepath!==void 0&&at.filepath!==""&&Rt.uint32(10).string(at.filepath),at.disableManifest===!0&&Rt.uint32(40).bool(at.disableManifest),at.s3!==void 0&&a.S3Upload.encode(at.s3,Rt.uint32(18).fork()).ldelim(),at.gcp!==void 0&&a.GCPUpload.encode(at.gcp,Rt.uint32(26).fork()).ldelim(),at.azure!==void 0&&a.AzureBlobUpload.encode(at.azure,Rt.uint32(34).fork()).ldelim(),at.aliOSS!==void 0&&a.AliOSSUpload.encode(at.aliOSS,Rt.uint32(50).fork()).ldelim(),Rt},decode(at,Rt){const Ut=at instanceof _.default.Reader?at:new _.default.Reader(at);let un=Rt===void 0?Ut.len:Ut.pos+Rt;const Vt=rn();for(;Ut.pos<un;){const st=Ut.uint32();switch(st>>>3){case 1:Vt.filepath=Ut.string();break;case 5:Vt.disableManifest=Ut.bool();break;case 2:Vt.s3=a.S3Upload.decode(Ut,Ut.uint32());break;case 3:Vt.gcp=a.GCPUpload.decode(Ut,Ut.uint32());break;case 4:Vt.azure=a.AzureBlobUpload.decode(Ut,Ut.uint32());break;case 6:Vt.aliOSS=a.AliOSSUpload.decode(Ut,Ut.uint32());break;default:Ut.skipType(st&7);break}}return Vt},fromJSON(at){return{filepath:Xt(at.filepath)?String(at.filepath):"",disableManifest:Xt(at.disableManifest)?!!at.disableManifest:!1,s3:Xt(at.s3)?a.S3Upload.fromJSON(at.s3):void 0,gcp:Xt(at.gcp)?a.GCPUpload.fromJSON(at.gcp):void 0,azure:Xt(at.azure)?a.AzureBlobUpload.fromJSON(at.azure):void 0,aliOSS:Xt(at.aliOSS)?a.AliOSSUpload.fromJSON(at.aliOSS):void 0}},toJSON(at){const Rt={};return at.filepath!==void 0&&(Rt.filepath=at.filepath),at.disableManifest!==void 0&&(Rt.disableManifest=at.disableManifest),at.s3!==void 0&&(Rt.s3=at.s3?a.S3Upload.toJSON(at.s3):void 0),at.gcp!==void 0&&(Rt.gcp=at.gcp?a.GCPUpload.toJSON(at.gcp):void 0),at.azure!==void 0&&(Rt.azure=at.azure?a.AzureBlobUpload.toJSON(at.azure):void 0),at.aliOSS!==void 0&&(Rt.aliOSS=at.aliOSS?a.AliOSSUpload.toJSON(at.aliOSS):void 0),Rt},fromPartial(at){var Rt,Ut;const un=rn();return un.filepath=(Rt=at.filepath)!==null&&Rt!==void 0?Rt:"",un.disableManifest=(Ut=at.disableManifest)!==null&&Ut!==void 0?Ut:!1,un.s3=at.s3!==void 0&&at.s3!==null?a.S3Upload.fromPartial(at.s3):void 0,un.gcp=at.gcp!==void 0&&at.gcp!==null?a.GCPUpload.fromPartial(at.gcp):void 0,un.azure=at.azure!==void 0&&at.azure!==null?a.AzureBlobUpload.fromPartial(at.azure):void 0,un.aliOSS=at.aliOSS!==void 0&&at.aliOSS!==null?a.AliOSSUpload.fromPartial(at.aliOSS):void 0,un}};function Sn(){return{accessKey:"",secret:"",region:"",endpoint:"",bucket:"",forcePathStyle:!1,metadata:{},tagging:""}}a.S3Upload={encode(at,Rt=_.default.Writer.create()){return at.accessKey!==void 0&&at.accessKey!==""&&Rt.uint32(10).string(at.accessKey),at.secret!==void 0&&at.secret!==""&&Rt.uint32(18).string(at.secret),at.region!==void 0&&at.region!==""&&Rt.uint32(26).string(at.region),at.endpoint!==void 0&&at.endpoint!==""&&Rt.uint32(34).string(at.endpoint),at.bucket!==void 0&&at.bucket!==""&&Rt.uint32(42).string(at.bucket),at.forcePathStyle===!0&&Rt.uint32(48).bool(at.forcePathStyle),Object.entries(at.metadata||{}).forEach(([Ut,un])=>{a.S3Upload_MetadataEntry.encode({key:Ut,value:un},Rt.uint32(58).fork()).ldelim()}),at.tagging!==void 0&&at.tagging!==""&&Rt.uint32(66).string(at.tagging),Rt},decode(at,Rt){const Ut=at instanceof _.default.Reader?at:new _.default.Reader(at);let un=Rt===void 0?Ut.len:Ut.pos+Rt;const Vt=Sn();for(;Ut.pos<un;){const st=Ut.uint32();switch(st>>>3){case 1:Vt.accessKey=Ut.string();break;case 2:Vt.secret=Ut.string();break;case 3:Vt.region=Ut.string();break;case 4:Vt.endpoint=Ut.string();break;case 5:Vt.bucket=Ut.string();break;case 6:Vt.forcePathStyle=Ut.bool();break;case 7:const wt=a.S3Upload_MetadataEntry.decode(Ut,Ut.uint32());wt.value!==void 0&&(Vt.metadata[wt.key]=wt.value);break;case 8:Vt.tagging=Ut.string();break;default:Ut.skipType(st&7);break}}return Vt},fromJSON(at){return{accessKey:Xt(at.accessKey)?String(at.accessKey):"",secret:Xt(at.secret)?String(at.secret):"",region:Xt(at.region)?String(at.region):"",endpoint:Xt(at.endpoint)?String(at.endpoint):"",bucket:Xt(at.bucket)?String(at.bucket):"",forcePathStyle:Xt(at.forcePathStyle)?!!at.forcePathStyle:!1,metadata:gn(at.metadata)?Object.entries(at.metadata).reduce((Rt,[Ut,un])=>(Rt[Ut]=String(un),Rt),{}):{},tagging:Xt(at.tagging)?String(at.tagging):""}},toJSON(at){const Rt={};return at.accessKey!==void 0&&(Rt.accessKey=at.accessKey),at.secret!==void 0&&(Rt.secret=at.secret),at.region!==void 0&&(Rt.region=at.region),at.endpoint!==void 0&&(Rt.endpoint=at.endpoint),at.bucket!==void 0&&(Rt.bucket=at.bucket),at.forcePathStyle!==void 0&&(Rt.forcePathStyle=at.forcePathStyle),Rt.metadata={},at.metadata&&Object.entries(at.metadata).forEach(([Ut,un])=>{Rt.metadata[Ut]=un}),at.tagging!==void 0&&(Rt.tagging=at.tagging),Rt},fromPartial(at){var Rt,Ut,un,Vt,st,wt,Ft,ln;const jt=Sn();return jt.accessKey=(Rt=at.accessKey)!==null&&Rt!==void 0?Rt:"",jt.secret=(Ut=at.secret)!==null&&Ut!==void 0?Ut:"",jt.region=(un=at.region)!==null&&un!==void 0?un:"",jt.endpoint=(Vt=at.endpoint)!==null&&Vt!==void 0?Vt:"",jt.bucket=(st=at.bucket)!==null&&st!==void 0?st:"",jt.forcePathStyle=(wt=at.forcePathStyle)!==null&&wt!==void 0?wt:!1,jt.metadata=Object.entries((Ft=at.metadata)!==null&&Ft!==void 0?Ft:{}).reduce((En,[Dn,Ln])=>(Ln!==void 0&&(En[Dn]=String(Ln)),En),{}),jt.tagging=(ln=at.tagging)!==null&&ln!==void 0?ln:"",jt}};function bn(){return{key:"",value:""}}a.S3Upload_MetadataEntry={encode(at,Rt=_.default.Writer.create()){return at.key!==""&&Rt.uint32(10).string(at.key),at.value!==""&&Rt.uint32(18).string(at.value),Rt},decode(at,Rt){const Ut=at instanceof _.default.Reader?at:new _.default.Reader(at);let un=Rt===void 0?Ut.len:Ut.pos+Rt;const Vt=bn();for(;Ut.pos<un;){const st=Ut.uint32();switch(st>>>3){case 1:Vt.key=Ut.string();break;case 2:Vt.value=Ut.string();break;default:Ut.skipType(st&7);break}}return Vt},fromJSON(at){return{key:Xt(at.key)?String(at.key):"",value:Xt(at.value)?String(at.value):""}},toJSON(at){const Rt={};return at.key!==void 0&&(Rt.key=at.key),at.value!==void 0&&(Rt.value=at.value),Rt},fromPartial(at){var Rt,Ut;const un=bn();return un.key=(Rt=at.key)!==null&&Rt!==void 0?Rt:"",un.value=(Ut=at.value)!==null&&Ut!==void 0?Ut:"",un}};function kn(){return{credentials:new Uint8Array,bucket:""}}a.GCPUpload={encode(at,Rt=_.default.Writer.create()){return at.credentials!==void 0&&at.credentials.length!==0&&Rt.uint32(10).bytes(at.credentials),at.bucket!==void 0&&at.bucket!==""&&Rt.uint32(18).string(at.bucket),Rt},decode(at,Rt){const Ut=at instanceof _.default.Reader?at:new _.default.Reader(at);let un=Rt===void 0?Ut.len:Ut.pos+Rt;const Vt=kn();for(;Ut.pos<un;){const st=Ut.uint32();switch(st>>>3){case 1:Vt.credentials=Ut.bytes();break;case 2:Vt.bucket=Ut.string();break;default:Ut.skipType(st&7);break}}return Vt},fromJSON(at){return{credentials:Xt(at.credentials)?$t(at.credentials):new Uint8Array,bucket:Xt(at.bucket)?String(at.bucket):""}},toJSON(at){const Rt={};return at.credentials!==void 0&&(Rt.credentials=Gt(at.credentials!==void 0?at.credentials:new Uint8Array)),at.bucket!==void 0&&(Rt.bucket=at.bucket),Rt},fromPartial(at){var Rt,Ut;const un=kn();return un.credentials=(Rt=at.credentials)!==null&&Rt!==void 0?Rt:new Uint8Array,un.bucket=(Ut=at.bucket)!==null&&Ut!==void 0?Ut:"",un}};function _n(){return{accountName:"",accountKey:"",containerName:""}}a.AzureBlobUpload={encode(at,Rt=_.default.Writer.create()){return at.accountName!==void 0&&at.accountName!==""&&Rt.uint32(10).string(at.accountName),at.accountKey!==void 0&&at.accountKey!==""&&Rt.uint32(18).string(at.accountKey),at.containerName!==void 0&&at.containerName!==""&&Rt.uint32(26).string(at.containerName),Rt},decode(at,Rt){const Ut=at instanceof _.default.Reader?at:new _.default.Reader(at);let un=Rt===void 0?Ut.len:Ut.pos+Rt;const Vt=_n();for(;Ut.pos<un;){const st=Ut.uint32();switch(st>>>3){case 1:Vt.accountName=Ut.string();break;case 2:Vt.accountKey=Ut.string();break;case 3:Vt.containerName=Ut.string();break;default:Ut.skipType(st&7);break}}return Vt},fromJSON(at){return{accountName:Xt(at.accountName)?String(at.accountName):"",accountKey:Xt(at.accountKey)?String(at.accountKey):"",containerName:Xt(at.containerName)?String(at.containerName):""}},toJSON(at){const Rt={};return at.accountName!==void 0&&(Rt.accountName=at.accountName),at.accountKey!==void 0&&(Rt.accountKey=at.accountKey),at.containerName!==void 0&&(Rt.containerName=at.containerName),Rt},fromPartial(at){var Rt,Ut,un;const Vt=_n();return Vt.accountName=(Rt=at.accountName)!==null&&Rt!==void 0?Rt:"",Vt.accountKey=(Ut=at.accountKey)!==null&&Ut!==void 0?Ut:"",Vt.containerName=(un=at.containerName)!==null&&un!==void 0?un:"",Vt}};function tn(){return{accessKey:"",secret:"",region:"",endpoint:"",bucket:""}}a.AliOSSUpload={encode(at,Rt=_.default.Writer.create()){return at.accessKey!==void 0&&at.accessKey!==""&&Rt.uint32(10).string(at.accessKey),at.secret!==void 0&&at.secret!==""&&Rt.uint32(18).string(at.secret),at.region!==void 0&&at.region!==""&&Rt.uint32(26).string(at.region),at.endpoint!==void 0&&at.endpoint!==""&&Rt.uint32(34).string(at.endpoint),at.bucket!==void 0&&at.bucket!==""&&Rt.uint32(42).string(at.bucket),Rt},decode(at,Rt){const Ut=at instanceof _.default.Reader?at:new _.default.Reader(at);let un=Rt===void 0?Ut.len:Ut.pos+Rt;const Vt=tn();for(;Ut.pos<un;){const st=Ut.uint32();switch(st>>>3){case 1:Vt.accessKey=Ut.string();break;case 2:Vt.secret=Ut.string();break;case 3:Vt.region=Ut.string();break;case 4:Vt.endpoint=Ut.string();break;case 5:Vt.bucket=Ut.string();break;default:Ut.skipType(st&7);break}}return Vt},fromJSON(at){return{accessKey:Xt(at.accessKey)?String(at.accessKey):"",secret:Xt(at.secret)?String(at.secret):"",region:Xt(at.region)?String(at.region):"",endpoint:Xt(at.endpoint)?String(at.endpoint):"",bucket:Xt(at.bucket)?String(at.bucket):""}},toJSON(at){const Rt={};return at.accessKey!==void 0&&(Rt.accessKey=at.accessKey),at.secret!==void 0&&(Rt.secret=at.secret),at.region!==void 0&&(Rt.region=at.region),at.endpoint!==void 0&&(Rt.endpoint=at.endpoint),at.bucket!==void 0&&(Rt.bucket=at.bucket),Rt},fromPartial(at){var Rt,Ut,un,Vt,st;const wt=tn();return wt.accessKey=(Rt=at.accessKey)!==null&&Rt!==void 0?Rt:"",wt.secret=(Ut=at.secret)!==null&&Ut!==void 0?Ut:"",wt.region=(un=at.region)!==null&&un!==void 0?un:"",wt.endpoint=(Vt=at.endpoint)!==null&&Vt!==void 0?Vt:"",wt.bucket=(st=at.bucket)!==null&&st!==void 0?st:"",wt}};function pn(){return{protocol:0,urls:[]}}a.StreamOutput={encode(at,Rt=_.default.Writer.create()){if(at.protocol!==void 0&&at.protocol!==0&&Rt.uint32(8).int32(at.protocol),at.urls!==void 0&&at.urls.length!==0)for(const Ut of at.urls)Rt.uint32(18).string(Ut);return Rt},decode(at,Rt){const Ut=at instanceof _.default.Reader?at:new _.default.Reader(at);let un=Rt===void 0?Ut.len:Ut.pos+Rt;const Vt=pn();for(;Ut.pos<un;){const st=Ut.uint32();switch(st>>>3){case 1:Vt.protocol=Ut.int32();break;case 2:Vt.urls.push(Ut.string());break;default:Ut.skipType(st&7);break}}return Vt},fromJSON(at){return{protocol:Xt(at.protocol)?nt(at.protocol):0,urls:Array.isArray(at==null?void 0:at.urls)?at.urls.map(Rt=>String(Rt)):[]}},toJSON(at){const Rt={};return at.protocol!==void 0&&(Rt.protocol=it(at.protocol)),at.urls?Rt.urls=at.urls.map(Ut=>Ut):Rt.urls=[],Rt},fromPartial(at){var Rt,Ut;const un=pn();return un.protocol=(Rt=at.protocol)!==null&&Rt!==void 0?Rt:0,un.urls=((Ut=at.urls)===null||Ut===void 0?void 0:Ut.map(Vt=>Vt))||[],un}};function yn(){return{width:0,height:0,depth:0,framerate:0,audioCodec:0,audioBitrate:0,audioFrequency:0,videoCodec:0,videoBitrate:0}}a.EncodingOptions={encode(at,Rt=_.default.Writer.create()){return at.width!==void 0&&at.width!==0&&Rt.uint32(8).int32(at.width),at.height!==void 0&&at.height!==0&&Rt.uint32(16).int32(at.height),at.depth!==void 0&&at.depth!==0&&Rt.uint32(24).int32(at.depth),at.framerate!==void 0&&at.framerate!==0&&Rt.uint32(32).int32(at.framerate),at.audioCodec!==void 0&&at.audioCodec!==0&&Rt.uint32(40).int32(at.audioCodec),at.audioBitrate!==void 0&&at.audioBitrate!==0&&Rt.uint32(48).int32(at.audioBitrate),at.audioFrequency!==void 0&&at.audioFrequency!==0&&Rt.uint32(56).int32(at.audioFrequency),at.videoCodec!==void 0&&at.videoCodec!==0&&Rt.uint32(64).int32(at.videoCodec),at.videoBitrate!==void 0&&at.videoBitrate!==0&&Rt.uint32(72).int32(at.videoBitrate),Rt},decode(at,Rt){const Ut=at instanceof _.default.Reader?at:new _.default.Reader(at);let un=Rt===void 0?Ut.len:Ut.pos+Rt;const Vt=yn();for(;Ut.pos<un;){const st=Ut.uint32();switch(st>>>3){case 1:Vt.width=Ut.int32();break;case 2:Vt.height=Ut.int32();break;case 3:Vt.depth=Ut.int32();break;case 4:Vt.framerate=Ut.int32();break;case 5:Vt.audioCodec=Ut.int32();break;case 6:Vt.audioBitrate=Ut.int32();break;case 7:Vt.audioFrequency=Ut.int32();break;case 8:Vt.videoCodec=Ut.int32();break;case 9:Vt.videoBitrate=Ut.int32();break;default:Ut.skipType(st&7);break}}return Vt},fromJSON(at){return{width:Xt(at.width)?Number(at.width):0,height:Xt(at.height)?Number(at.height):0,depth:Xt(at.depth)?Number(at.depth):0,framerate:Xt(at.framerate)?Number(at.framerate):0,audioCodec:Xt(at.audioCodec)?yt(at.audioCodec):0,audioBitrate:Xt(at.audioBitrate)?Number(at.audioBitrate):0,audioFrequency:Xt(at.audioFrequency)?Number(at.audioFrequency):0,videoCodec:Xt(at.videoCodec)?gt(at.videoCodec):0,videoBitrate:Xt(at.videoBitrate)?Number(at.videoBitrate):0}},toJSON(at){const Rt={};return at.width!==void 0&&(Rt.width=Math.round(at.width)),at.height!==void 0&&(Rt.height=Math.round(at.height)),at.depth!==void 0&&(Rt.depth=Math.round(at.depth)),at.framerate!==void 0&&(Rt.framerate=Math.round(at.framerate)),at.audioCodec!==void 0&&(Rt.audioCodec=_t(at.audioCodec)),at.audioBitrate!==void 0&&(Rt.audioBitrate=Math.round(at.audioBitrate)),at.audioFrequency!==void 0&&(Rt.audioFrequency=Math.round(at.audioFrequency)),at.videoCodec!==void 0&&(Rt.videoCodec=ht(at.videoCodec)),at.videoBitrate!==void 0&&(Rt.videoBitrate=Math.round(at.videoBitrate)),Rt},fromPartial(at){var Rt,Ut,un,Vt,st,wt,Ft,ln,jt;const En=yn();return En.width=(Rt=at.width)!==null&&Rt!==void 0?Rt:0,En.height=(Ut=at.height)!==null&&Ut!==void 0?Ut:0,En.depth=(un=at.depth)!==null&&un!==void 0?un:0,En.framerate=(Vt=at.framerate)!==null&&Vt!==void 0?Vt:0,En.audioCodec=(st=at.audioCodec)!==null&&st!==void 0?st:0,En.audioBitrate=(wt=at.audioBitrate)!==null&&wt!==void 0?wt:0,En.audioFrequency=(Ft=at.audioFrequency)!==null&&Ft!==void 0?Ft:0,En.videoCodec=(ln=at.videoCodec)!==null&&ln!==void 0?ln:0,En.videoBitrate=(jt=at.videoBitrate)!==null&&jt!==void 0?jt:0,En}};function In(){return{egressId:"",layout:""}}a.UpdateLayoutRequest={encode(at,Rt=_.default.Writer.create()){return at.egressId!==void 0&&at.egressId!==""&&Rt.uint32(10).string(at.egressId),at.layout!==void 0&&at.layout!==""&&Rt.uint32(18).string(at.layout),Rt},decode(at,Rt){const Ut=at instanceof _.default.Reader?at:new _.default.Reader(at);let un=Rt===void 0?Ut.len:Ut.pos+Rt;const Vt=In();for(;Ut.pos<un;){const st=Ut.uint32();switch(st>>>3){case 1:Vt.egressId=Ut.string();break;case 2:Vt.layout=Ut.string();break;default:Ut.skipType(st&7);break}}return Vt},fromJSON(at){return{egressId:Xt(at.egressId)?String(at.egressId):"",layout:Xt(at.layout)?String(at.layout):""}},toJSON(at){const Rt={};return at.egressId!==void 0&&(Rt.egressId=at.egressId),at.layout!==void 0&&(Rt.layout=at.layout),Rt},fromPartial(at){var Rt,Ut;const un=In();return un.egressId=(Rt=at.egressId)!==null&&Rt!==void 0?Rt:"",un.layout=(Ut=at.layout)!==null&&Ut!==void 0?Ut:"",un}};function sn(){return{egressId:"",addOutputUrls:[],removeOutputUrls:[]}}a.UpdateStreamRequest={encode(at,Rt=_.default.Writer.create()){if(at.egressId!==void 0&&at.egressId!==""&&Rt.uint32(10).string(at.egressId),at.addOutputUrls!==void 0&&at.addOutputUrls.length!==0)for(const Ut of at.addOutputUrls)Rt.uint32(18).string(Ut);if(at.removeOutputUrls!==void 0&&at.removeOutputUrls.length!==0)for(const Ut of at.removeOutputUrls)Rt.uint32(26).string(Ut);return Rt},decode(at,Rt){const Ut=at instanceof _.default.Reader?at:new _.default.Reader(at);let un=Rt===void 0?Ut.len:Ut.pos+Rt;const Vt=sn();for(;Ut.pos<un;){const st=Ut.uint32();switch(st>>>3){case 1:Vt.egressId=Ut.string();break;case 2:Vt.addOutputUrls.push(Ut.string());break;case 3:Vt.removeOutputUrls.push(Ut.string());break;default:Ut.skipType(st&7);break}}return Vt},fromJSON(at){return{egressId:Xt(at.egressId)?String(at.egressId):"",addOutputUrls:Array.isArray(at==null?void 0:at.addOutputUrls)?at.addOutputUrls.map(Rt=>String(Rt)):[],removeOutputUrls:Array.isArray(at==null?void 0:at.removeOutputUrls)?at.removeOutputUrls.map(Rt=>String(Rt)):[]}},toJSON(at){const Rt={};return at.egressId!==void 0&&(Rt.egressId=at.egressId),at.addOutputUrls?Rt.addOutputUrls=at.addOutputUrls.map(Ut=>Ut):Rt.addOutputUrls=[],at.removeOutputUrls?Rt.removeOutputUrls=at.removeOutputUrls.map(Ut=>Ut):Rt.removeOutputUrls=[],Rt},fromPartial(at){var Rt,Ut,un;const Vt=sn();return Vt.egressId=(Rt=at.egressId)!==null&&Rt!==void 0?Rt:"",Vt.addOutputUrls=((Ut=at.addOutputUrls)===null||Ut===void 0?void 0:Ut.map(st=>st))||[],Vt.removeOutputUrls=((un=at.removeOutputUrls)===null||un===void 0?void 0:un.map(st=>st))||[],Vt}};function vn(){return{roomName:""}}a.ListEgressRequest={encode(at,Rt=_.default.Writer.create()){return at.roomName!==void 0&&at.roomName!==""&&Rt.uint32(10).string(at.roomName),Rt},decode(at,Rt){const Ut=at instanceof _.default.Reader?at:new _.default.Reader(at);let un=Rt===void 0?Ut.len:Ut.pos+Rt;const Vt=vn();for(;Ut.pos<un;){const st=Ut.uint32();switch(st>>>3){case 1:Vt.roomName=Ut.string();break;default:Ut.skipType(st&7);break}}return Vt},fromJSON(at){return{roomName:Xt(at.roomName)?String(at.roomName):""}},toJSON(at){const Rt={};return at.roomName!==void 0&&(Rt.roomName=at.roomName),Rt},fromPartial(at){var Rt;const Ut=vn();return Ut.roomName=(Rt=at.roomName)!==null&&Rt!==void 0?Rt:"",Ut}};function Cn(){return{items:[]}}a.ListEgressResponse={encode(at,Rt=_.default.Writer.create()){if(at.items!==void 0&&at.items.length!==0)for(const Ut of at.items)a.EgressInfo.encode(Ut,Rt.uint32(10).fork()).ldelim();return Rt},decode(at,Rt){const Ut=at instanceof _.default.Reader?at:new _.default.Reader(at);let un=Rt===void 0?Ut.len:Ut.pos+Rt;const Vt=Cn();for(;Ut.pos<un;){const st=Ut.uint32();switch(st>>>3){case 1:Vt.items.push(a.EgressInfo.decode(Ut,Ut.uint32()));break;default:Ut.skipType(st&7);break}}return Vt},fromJSON(at){return{items:Array.isArray(at==null?void 0:at.items)?at.items.map(Rt=>a.EgressInfo.fromJSON(Rt)):[]}},toJSON(at){const Rt={};return at.items?Rt.items=at.items.map(Ut=>Ut?a.EgressInfo.toJSON(Ut):void 0):Rt.items=[],Rt},fromPartial(at){var Rt;const Ut=Cn();return Ut.items=((Rt=at.items)===null||Rt===void 0?void 0:Rt.map(un=>a.EgressInfo.fromPartial(un)))||[],Ut}};function Nn(){return{egressId:""}}a.StopEgressRequest={encode(at,Rt=_.default.Writer.create()){return at.egressId!==void 0&&at.egressId!==""&&Rt.uint32(10).string(at.egressId),Rt},decode(at,Rt){const Ut=at instanceof _.default.Reader?at:new _.default.Reader(at);let un=Rt===void 0?Ut.len:Ut.pos+Rt;const Vt=Nn();for(;Ut.pos<un;){const st=Ut.uint32();switch(st>>>3){case 1:Vt.egressId=Ut.string();break;default:Ut.skipType(st&7);break}}return Vt},fromJSON(at){return{egressId:Xt(at.egressId)?String(at.egressId):""}},toJSON(at){const Rt={};return at.egressId!==void 0&&(Rt.egressId=at.egressId),Rt},fromPartial(at){var Rt;const Ut=Nn();return Ut.egressId=(Rt=at.egressId)!==null&&Rt!==void 0?Rt:"",Ut}};function fn(){return{egressId:"",roomId:"",roomName:"",status:0,startedAt:0,endedAt:0,error:"",roomComposite:void 0,trackComposite:void 0,track:void 0,web:void 0,stream:void 0,file:void 0,segments:void 0}}a.EgressInfo={encode(at,Rt=_.default.Writer.create()){return at.egressId!==void 0&&at.egressId!==""&&Rt.uint32(10).string(at.egressId),at.roomId!==void 0&&at.roomId!==""&&Rt.uint32(18).string(at.roomId),at.roomName!==void 0&&at.roomName!==""&&Rt.uint32(106).string(at.roomName),at.status!==void 0&&at.status!==0&&Rt.uint32(24).int32(at.status),at.startedAt!==void 0&&at.startedAt!==0&&Rt.uint32(80).int64(at.startedAt),at.endedAt!==void 0&&at.endedAt!==0&&Rt.uint32(88).int64(at.endedAt),at.error!==void 0&&at.error!==""&&Rt.uint32(74).string(at.error),at.roomComposite!==void 0&&a.RoomCompositeEgressRequest.encode(at.roomComposite,Rt.uint32(34).fork()).ldelim(),at.trackComposite!==void 0&&a.TrackCompositeEgressRequest.encode(at.trackComposite,Rt.uint32(42).fork()).ldelim(),at.track!==void 0&&a.TrackEgressRequest.encode(at.track,Rt.uint32(50).fork()).ldelim(),at.web!==void 0&&a.WebEgressRequest.encode(at.web,Rt.uint32(114).fork()).ldelim(),at.stream!==void 0&&a.StreamInfoList.encode(at.stream,Rt.uint32(58).fork()).ldelim(),at.file!==void 0&&a.FileInfo.encode(at.file,Rt.uint32(66).fork()).ldelim(),at.segments!==void 0&&a.SegmentsInfo.encode(at.segments,Rt.uint32(98).fork()).ldelim(),Rt},decode(at,Rt){const Ut=at instanceof _.default.Reader?at:new _.default.Reader(at);let un=Rt===void 0?Ut.len:Ut.pos+Rt;const Vt=fn();for(;Ut.pos<un;){const st=Ut.uint32();switch(st>>>3){case 1:Vt.egressId=Ut.string();break;case 2:Vt.roomId=Ut.string();break;case 13:Vt.roomName=Ut.string();break;case 3:Vt.status=Ut.int32();break;case 10:Vt.startedAt=nn(Ut.int64());break;case 11:Vt.endedAt=nn(Ut.int64());break;case 9:Vt.error=Ut.string();break;case 4:Vt.roomComposite=a.RoomCompositeEgressRequest.decode(Ut,Ut.uint32());break;case 5:Vt.trackComposite=a.TrackCompositeEgressRequest.decode(Ut,Ut.uint32());break;case 6:Vt.track=a.TrackEgressRequest.decode(Ut,Ut.uint32());break;case 14:Vt.web=a.WebEgressRequest.decode(Ut,Ut.uint32());break;case 7:Vt.stream=a.StreamInfoList.decode(Ut,Ut.uint32());break;case 8:Vt.file=a.FileInfo.decode(Ut,Ut.uint32());break;case 12:Vt.segments=a.SegmentsInfo.decode(Ut,Ut.uint32());break;default:Ut.skipType(st&7);break}}return Vt},fromJSON(at){return{egressId:Xt(at.egressId)?String(at.egressId):"",roomId:Xt(at.roomId)?String(at.roomId):"",roomName:Xt(at.roomName)?String(at.roomName):"",status:Xt(at.status)?zt(at.status):0,startedAt:Xt(at.startedAt)?Number(at.startedAt):0,endedAt:Xt(at.endedAt)?Number(at.endedAt):0,error:Xt(at.error)?String(at.error):"",roomComposite:Xt(at.roomComposite)?a.RoomCompositeEgressRequest.fromJSON(at.roomComposite):void 0,trackComposite:Xt(at.trackComposite)?a.TrackCompositeEgressRequest.fromJSON(at.trackComposite):void 0,track:Xt(at.track)?a.TrackEgressRequest.fromJSON(at.track):void 0,web:Xt(at.web)?a.WebEgressRequest.fromJSON(at.web):void 0,stream:Xt(at.stream)?a.StreamInfoList.fromJSON(at.stream):void 0,file:Xt(at.file)?a.FileInfo.fromJSON(at.file):void 0,segments:Xt(at.segments)?a.SegmentsInfo.fromJSON(at.segments):void 0}},toJSON(at){const Rt={};return at.egressId!==void 0&&(Rt.egressId=at.egressId),at.roomId!==void 0&&(Rt.roomId=at.roomId),at.roomName!==void 0&&(Rt.roomName=at.roomName),at.status!==void 0&&(Rt.status=Ht(at.status)),at.startedAt!==void 0&&(Rt.startedAt=Math.round(at.startedAt)),at.endedAt!==void 0&&(Rt.endedAt=Math.round(at.endedAt)),at.error!==void 0&&(Rt.error=at.error),at.roomComposite!==void 0&&(Rt.roomComposite=at.roomComposite?a.RoomCompositeEgressRequest.toJSON(at.roomComposite):void 0),at.trackComposite!==void 0&&(Rt.trackComposite=at.trackComposite?a.TrackCompositeEgressRequest.toJSON(at.trackComposite):void 0),at.track!==void 0&&(Rt.track=at.track?a.TrackEgressRequest.toJSON(at.track):void 0),at.web!==void 0&&(Rt.web=at.web?a.WebEgressRequest.toJSON(at.web):void 0),at.stream!==void 0&&(Rt.stream=at.stream?a.StreamInfoList.toJSON(at.stream):void 0),at.file!==void 0&&(Rt.file=at.file?a.FileInfo.toJSON(at.file):void 0),at.segments!==void 0&&(Rt.segments=at.segments?a.SegmentsInfo.toJSON(at.segments):void 0),Rt},fromPartial(at){var Rt,Ut,un,Vt,st,wt,Ft;const ln=fn();return ln.egressId=(Rt=at.egressId)!==null&&Rt!==void 0?Rt:"",ln.roomId=(Ut=at.roomId)!==null&&Ut!==void 0?Ut:"",ln.roomName=(un=at.roomName)!==null&&un!==void 0?un:"",ln.status=(Vt=at.status)!==null&&Vt!==void 0?Vt:0,ln.startedAt=(st=at.startedAt)!==null&&st!==void 0?st:0,ln.endedAt=(wt=at.endedAt)!==null&&wt!==void 0?wt:0,ln.error=(Ft=at.error)!==null&&Ft!==void 0?Ft:"",ln.roomComposite=at.roomComposite!==void 0&&at.roomComposite!==null?a.RoomCompositeEgressRequest.fromPartial(at.roomComposite):void 0,ln.trackComposite=at.trackComposite!==void 0&&at.trackComposite!==null?a.TrackCompositeEgressRequest.fromPartial(at.trackComposite):void 0,ln.track=at.track!==void 0&&at.track!==null?a.TrackEgressRequest.fromPartial(at.track):void 0,ln.web=at.web!==void 0&&at.web!==null?a.WebEgressRequest.fromPartial(at.web):void 0,ln.stream=at.stream!==void 0&&at.stream!==null?a.StreamInfoList.fromPartial(at.stream):void 0,ln.file=at.file!==void 0&&at.file!==null?a.FileInfo.fromPartial(at.file):void 0,ln.segments=at.segments!==void 0&&at.segments!==null?a.SegmentsInfo.fromPartial(at.segments):void 0,ln}};function ut(){return{info:[]}}a.StreamInfoList={encode(at,Rt=_.default.Writer.create()){if(at.info!==void 0&&at.info.length!==0)for(const Ut of at.info)a.StreamInfo.encode(Ut,Rt.uint32(10).fork()).ldelim();return Rt},decode(at,Rt){const Ut=at instanceof _.default.Reader?at:new _.default.Reader(at);let un=Rt===void 0?Ut.len:Ut.pos+Rt;const Vt=ut();for(;Ut.pos<un;){const st=Ut.uint32();switch(st>>>3){case 1:Vt.info.push(a.StreamInfo.decode(Ut,Ut.uint32()));break;default:Ut.skipType(st&7);break}}return Vt},fromJSON(at){return{info:Array.isArray(at==null?void 0:at.info)?at.info.map(Rt=>a.StreamInfo.fromJSON(Rt)):[]}},toJSON(at){const Rt={};return at.info?Rt.info=at.info.map(Ut=>Ut?a.StreamInfo.toJSON(Ut):void 0):Rt.info=[],Rt},fromPartial(at){var Rt;const Ut=ut();return Ut.info=((Rt=at.info)===null||Rt===void 0?void 0:Rt.map(un=>a.StreamInfo.fromPartial(un)))||[],Ut}};function It(){return{url:"",startedAt:0,endedAt:0,duration:0,status:0}}a.StreamInfo={encode(at,Rt=_.default.Writer.create()){return at.url!==void 0&&at.url!==""&&Rt.uint32(10).string(at.url),at.startedAt!==void 0&&at.startedAt!==0&&Rt.uint32(16).int64(at.startedAt),at.endedAt!==void 0&&at.endedAt!==0&&Rt.uint32(24).int64(at.endedAt),at.duration!==void 0&&at.duration!==0&&Rt.uint32(32).int64(at.duration),at.status!==void 0&&at.status!==0&&Rt.uint32(40).int32(at.status),Rt},decode(at,Rt){const Ut=at instanceof _.default.Reader?at:new _.default.Reader(at);let un=Rt===void 0?Ut.len:Ut.pos+Rt;const Vt=It();for(;Ut.pos<un;){const st=Ut.uint32();switch(st>>>3){case 1:Vt.url=Ut.string();break;case 2:Vt.startedAt=nn(Ut.int64());break;case 3:Vt.endedAt=nn(Ut.int64());break;case 4:Vt.duration=nn(Ut.int64());break;case 5:Vt.status=Ut.int32();break;default:Ut.skipType(st&7);break}}return Vt},fromJSON(at){return{url:Xt(at.url)?String(at.url):"",startedAt:Xt(at.startedAt)?Number(at.startedAt):0,endedAt:Xt(at.endedAt)?Number(at.endedAt):0,duration:Xt(at.duration)?Number(at.duration):0,status:Xt(at.status)?dt(at.status):0}},toJSON(at){const Rt={};return at.url!==void 0&&(Rt.url=at.url),at.startedAt!==void 0&&(Rt.startedAt=Math.round(at.startedAt)),at.endedAt!==void 0&&(Rt.endedAt=Math.round(at.endedAt)),at.duration!==void 0&&(Rt.duration=Math.round(at.duration)),at.status!==void 0&&(Rt.status=lt(at.status)),Rt},fromPartial(at){var Rt,Ut,un,Vt,st;const wt=It();return wt.url=(Rt=at.url)!==null&&Rt!==void 0?Rt:"",wt.startedAt=(Ut=at.startedAt)!==null&&Ut!==void 0?Ut:0,wt.endedAt=(un=at.endedAt)!==null&&un!==void 0?un:0,wt.duration=(Vt=at.duration)!==null&&Vt!==void 0?Vt:0,wt.status=(st=at.status)!==null&&st!==void 0?st:0,wt}};function Pt(){return{filename:"",startedAt:0,endedAt:0,duration:0,size:0,location:""}}a.FileInfo={encode(at,Rt=_.default.Writer.create()){return at.filename!==void 0&&at.filename!==""&&Rt.uint32(10).string(at.filename),at.startedAt!==void 0&&at.startedAt!==0&&Rt.uint32(16).int64(at.startedAt),at.endedAt!==void 0&&at.endedAt!==0&&Rt.uint32(24).int64(at.endedAt),at.duration!==void 0&&at.duration!==0&&Rt.uint32(48).int64(at.duration),at.size!==void 0&&at.size!==0&&Rt.uint32(32).int64(at.size),at.location!==void 0&&at.location!==""&&Rt.uint32(42).string(at.location),Rt},decode(at,Rt){const Ut=at instanceof _.default.Reader?at:new _.default.Reader(at);let un=Rt===void 0?Ut.len:Ut.pos+Rt;const Vt=Pt();for(;Ut.pos<un;){const st=Ut.uint32();switch(st>>>3){case 1:Vt.filename=Ut.string();break;case 2:Vt.startedAt=nn(Ut.int64());break;case 3:Vt.endedAt=nn(Ut.int64());break;case 6:Vt.duration=nn(Ut.int64());break;case 4:Vt.size=nn(Ut.int64());break;case 5:Vt.location=Ut.string();break;default:Ut.skipType(st&7);break}}return Vt},fromJSON(at){return{filename:Xt(at.filename)?String(at.filename):"",startedAt:Xt(at.startedAt)?Number(at.startedAt):0,endedAt:Xt(at.endedAt)?Number(at.endedAt):0,duration:Xt(at.duration)?Number(at.duration):0,size:Xt(at.size)?Number(at.size):0,location:Xt(at.location)?String(at.location):""}},toJSON(at){const Rt={};return at.filename!==void 0&&(Rt.filename=at.filename),at.startedAt!==void 0&&(Rt.startedAt=Math.round(at.startedAt)),at.endedAt!==void 0&&(Rt.endedAt=Math.round(at.endedAt)),at.duration!==void 0&&(Rt.duration=Math.round(at.duration)),at.size!==void 0&&(Rt.size=Math.round(at.size)),at.location!==void 0&&(Rt.location=at.location),Rt},fromPartial(at){var Rt,Ut,un,Vt,st,wt;const Ft=Pt();return Ft.filename=(Rt=at.filename)!==null&&Rt!==void 0?Rt:"",Ft.startedAt=(Ut=at.startedAt)!==null&&Ut!==void 0?Ut:0,Ft.endedAt=(un=at.endedAt)!==null&&un!==void 0?un:0,Ft.duration=(Vt=at.duration)!==null&&Vt!==void 0?Vt:0,Ft.size=(st=at.size)!==null&&st!==void 0?st:0,Ft.location=(wt=at.location)!==null&&wt!==void 0?wt:"",Ft}};function Zt(){return{playlistName:"",duration:0,size:0,playlistLocation:"",segmentCount:0,startedAt:0,endedAt:0}}a.SegmentsInfo={encode(at,Rt=_.default.Writer.create()){return at.playlistName!==void 0&&at.playlistName!==""&&Rt.uint32(10).string(at.playlistName),at.duration!==void 0&&at.duration!==0&&Rt.uint32(16).int64(at.duration),at.size!==void 0&&at.size!==0&&Rt.uint32(24).int64(at.size),at.playlistLocation!==void 0&&at.playlistLocation!==""&&Rt.uint32(34).string(at.playlistLocation),at.segmentCount!==void 0&&at.segmentCount!==0&&Rt.uint32(40).int64(at.segmentCount),at.startedAt!==void 0&&at.startedAt!==0&&Rt.uint32(48).int64(at.startedAt),at.endedAt!==void 0&&at.endedAt!==0&&Rt.uint32(56).int64(at.endedAt),Rt},decode(at,Rt){const Ut=at instanceof _.default.Reader?at:new _.default.Reader(at);let un=Rt===void 0?Ut.len:Ut.pos+Rt;const Vt=Zt();for(;Ut.pos<un;){const st=Ut.uint32();switch(st>>>3){case 1:Vt.playlistName=Ut.string();break;case 2:Vt.duration=nn(Ut.int64());break;case 3:Vt.size=nn(Ut.int64());break;case 4:Vt.playlistLocation=Ut.string();break;case 5:Vt.segmentCount=nn(Ut.int64());break;case 6:Vt.startedAt=nn(Ut.int64());break;case 7:Vt.endedAt=nn(Ut.int64());break;default:Ut.skipType(st&7);break}}return Vt},fromJSON(at){return{playlistName:Xt(at.playlistName)?String(at.playlistName):"",duration:Xt(at.duration)?Number(at.duration):0,size:Xt(at.size)?Number(at.size):0,playlistLocation:Xt(at.playlistLocation)?String(at.playlistLocation):"",segmentCount:Xt(at.segmentCount)?Number(at.segmentCount):0,startedAt:Xt(at.startedAt)?Number(at.startedAt):0,endedAt:Xt(at.endedAt)?Number(at.endedAt):0}},toJSON(at){const Rt={};return at.playlistName!==void 0&&(Rt.playlistName=at.playlistName),at.duration!==void 0&&(Rt.duration=Math.round(at.duration)),at.size!==void 0&&(Rt.size=Math.round(at.size)),at.playlistLocation!==void 0&&(Rt.playlistLocation=at.playlistLocation),at.segmentCount!==void 0&&(Rt.segmentCount=Math.round(at.segmentCount)),at.startedAt!==void 0&&(Rt.startedAt=Math.round(at.startedAt)),at.endedAt!==void 0&&(Rt.endedAt=Math.round(at.endedAt)),Rt},fromPartial(at){var Rt,Ut,un,Vt,st,wt,Ft;const ln=Zt();return ln.playlistName=(Rt=at.playlistName)!==null&&Rt!==void 0?Rt:"",ln.duration=(Ut=at.duration)!==null&&Ut!==void 0?Ut:0,ln.size=(un=at.size)!==null&&un!==void 0?un:0,ln.playlistLocation=(Vt=at.playlistLocation)!==null&&Vt!==void 0?Vt:"",ln.segmentCount=(st=at.segmentCount)!==null&&st!==void 0?st:0,ln.startedAt=(wt=at.startedAt)!==null&&wt!==void 0?wt:0,ln.endedAt=(Ft=at.endedAt)!==null&&Ft!==void 0?Ft:0,ln}};function Dt(){return{filepath:"",disableManifest:!1,s3:void 0,gcp:void 0,azure:void 0}}a.AutoTrackEgress={encode(at,Rt=_.default.Writer.create()){return at.filepath!==void 0&&at.filepath!==""&&Rt.uint32(10).string(at.filepath),at.disableManifest===!0&&Rt.uint32(40).bool(at.disableManifest),at.s3!==void 0&&a.S3Upload.encode(at.s3,Rt.uint32(18).fork()).ldelim(),at.gcp!==void 0&&a.GCPUpload.encode(at.gcp,Rt.uint32(26).fork()).ldelim(),at.azure!==void 0&&a.AzureBlobUpload.encode(at.azure,Rt.uint32(34).fork()).ldelim(),Rt},decode(at,Rt){const Ut=at instanceof _.default.Reader?at:new _.default.Reader(at);let un=Rt===void 0?Ut.len:Ut.pos+Rt;const Vt=Dt();for(;Ut.pos<un;){const st=Ut.uint32();switch(st>>>3){case 1:Vt.filepath=Ut.string();break;case 5:Vt.disableManifest=Ut.bool();break;case 2:Vt.s3=a.S3Upload.decode(Ut,Ut.uint32());break;case 3:Vt.gcp=a.GCPUpload.decode(Ut,Ut.uint32());break;case 4:Vt.azure=a.AzureBlobUpload.decode(Ut,Ut.uint32());break;default:Ut.skipType(st&7);break}}return Vt},fromJSON(at){return{filepath:Xt(at.filepath)?String(at.filepath):"",disableManifest:Xt(at.disableManifest)?!!at.disableManifest:!1,s3:Xt(at.s3)?a.S3Upload.fromJSON(at.s3):void 0,gcp:Xt(at.gcp)?a.GCPUpload.fromJSON(at.gcp):void 0,azure:Xt(at.azure)?a.AzureBlobUpload.fromJSON(at.azure):void 0}},toJSON(at){const Rt={};return at.filepath!==void 0&&(Rt.filepath=at.filepath),at.disableManifest!==void 0&&(Rt.disableManifest=at.disableManifest),at.s3!==void 0&&(Rt.s3=at.s3?a.S3Upload.toJSON(at.s3):void 0),at.gcp!==void 0&&(Rt.gcp=at.gcp?a.GCPUpload.toJSON(at.gcp):void 0),at.azure!==void 0&&(Rt.azure=at.azure?a.AzureBlobUpload.toJSON(at.azure):void 0),Rt},fromPartial(at){var Rt,Ut;const un=Dt();return un.filepath=(Rt=at.filepath)!==null&&Rt!==void 0?Rt:"",un.disableManifest=(Ut=at.disableManifest)!==null&&Ut!==void 0?Ut:!1,un.s3=at.s3!==void 0&&at.s3!==null?a.S3Upload.fromPartial(at.s3):void 0,un.gcp=at.gcp!==void 0&&at.gcp!==null?a.GCPUpload.fromPartial(at.gcp):void 0,un.azure=at.azure!==void 0&&at.azure!==null?a.AzureBlobUpload.fromPartial(at.azure):void 0,un}};var Ot=(()=>{if(typeof Ot<"u")return Ot;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof commonjsGlobal$1<"u")return commonjsGlobal$1;throw"Unable to locate global object"})();function $t(at){if(Ot.Buffer)return Uint8Array.from(Ot.Buffer.from(at,"base64"));{const Rt=Ot.atob(at),Ut=new Uint8Array(Rt.length);for(let un=0;un<Rt.length;++un)Ut[un]=Rt.charCodeAt(un);return Ut}}function Gt(at){if(Ot.Buffer)return Ot.Buffer.from(at).toString("base64");{const Rt=[];return at.forEach(Ut=>{Rt.push(String.fromCharCode(Ut))}),Ot.btoa(Rt.join(""))}}function nn(at){if(at.gt(Number.MAX_SAFE_INTEGER))throw new Ot.Error("Value is larger than Number.MAX_SAFE_INTEGER");return at.toNumber()}_.default.util.Long!==b.default&&(_.default.util.Long=b.default,_.default.configure());function gn(at){return typeof at=="object"&&at!==null}function Xt(at){return at!=null}})(livekit_egress);var ServiceBase$1={};Object.defineProperty(ServiceBase$1,"__esModule",{value:!0});const AccessToken_1$1=AccessToken$1;class ServiceBase{constructor(c,b,_){this.apiKey=c,this.secret=b,this.ttl=_||"10m"}authHeader(c){const b=new AccessToken_1$1.AccessToken(this.apiKey,this.secret,{ttl:this.ttl});return b.addGrant(c),{Authorization:`Bearer ${b.toJwt()}`}}}ServiceBase$1.default=ServiceBase;var TwirpRPC={},axios$2={exports:{}},bind$2=function a(c,b){return function(){for(var k=new Array(arguments.length),j=0;j<k.length;j++)k[j]=arguments[j];return c.apply(b,k)}},bind$1=bind$2,toString=Object.prototype.toString;function isArray$1(a){return toString.call(a)==="[object Array]"}function isUndefined(a){return typeof a>"u"}function isBuffer(a){return a!==null&&!isUndefined(a)&&a.constructor!==null&&!isUndefined(a.constructor)&&typeof a.constructor.isBuffer=="function"&&a.constructor.isBuffer(a)}function isArrayBuffer(a){return toString.call(a)==="[object ArrayBuffer]"}function isFormData(a){return typeof FormData<"u"&&a instanceof FormData}function isArrayBufferView(a){var c;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?c=ArrayBuffer.isView(a):c=a&&a.buffer&&a.buffer instanceof ArrayBuffer,c}function isString(a){return typeof a=="string"}function isNumber(a){return typeof a=="number"}function isObject$3(a){return a!==null&&typeof a=="object"}function isPlainObject(a){if(toString.call(a)!=="[object Object]")return!1;var c=Object.getPrototypeOf(a);return c===null||c===Object.prototype}function isDate(a){return toString.call(a)==="[object Date]"}function isFile(a){return toString.call(a)==="[object File]"}function isBlob(a){return toString.call(a)==="[object Blob]"}function isFunction(a){return toString.call(a)==="[object Function]"}function isStream(a){return isObject$3(a)&&isFunction(a.pipe)}function isURLSearchParams(a){return typeof URLSearchParams<"u"&&a instanceof URLSearchParams}function trim$1(a){return a.trim?a.trim():a.replace(/^\s+|\s+$/g,"")}function isStandardBrowserEnv(){return typeof navigator<"u"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window<"u"&&typeof document<"u"}function forEach(a,c){if(!(a===null||typeof a>"u"))if(typeof a!="object"&&(a=[a]),isArray$1(a))for(var b=0,_=a.length;b<_;b++)c.call(null,a[b],b,a);else for(var k in a)Object.prototype.hasOwnProperty.call(a,k)&&c.call(null,a[k],k,a)}function merge(){var a={};function c(k,j){isPlainObject(a[j])&&isPlainObject(k)?a[j]=merge(a[j],k):isPlainObject(k)?a[j]=merge({},k):isArray$1(k)?a[j]=k.slice():a[j]=k}for(var b=0,_=arguments.length;b<_;b++)forEach(arguments[b],c);return a}function extend(a,c,b){return forEach(c,function(k,j){b&&typeof k=="function"?a[j]=bind$1(k,b):a[j]=k}),a}function stripBOM(a){return a.charCodeAt(0)===65279&&(a=a.slice(1)),a}var utils$9={isArray:isArray$1,isArrayBuffer,isBuffer,isFormData,isArrayBufferView,isString,isNumber,isObject:isObject$3,isPlainObject,isUndefined,isDate,isFile,isBlob,isFunction,isStream,isURLSearchParams,isStandardBrowserEnv,forEach,merge,extend,trim:trim$1,stripBOM},utils$8=utils$9;function encode(a){return encodeURIComponent(a).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var buildURL$1=function a(c,b,_){if(!b)return c;var k;if(_)k=_(b);else if(utils$8.isURLSearchParams(b))k=b.toString();else{var j=[];utils$8.forEach(b,function(nt,it){nt===null||typeof nt>"u"||(utils$8.isArray(nt)?it=it+"[]":nt=[nt],utils$8.forEach(nt,function(pt){utils$8.isDate(pt)?pt=pt.toISOString():utils$8.isObject(pt)&&(pt=JSON.stringify(pt)),j.push(encode(it)+"="+encode(pt))}))}),k=j.join("&")}if(k){var _e=c.indexOf("#");_e!==-1&&(c=c.slice(0,_e)),c+=(c.indexOf("?")===-1?"?":"&")+k}return c},utils$7=utils$9;function InterceptorManager$1(){this.handlers=[]}InterceptorManager$1.prototype.use=function a(c,b,_){return this.handlers.push({fulfilled:c,rejected:b,synchronous:_?_.synchronous:!1,runWhen:_?_.runWhen:null}),this.handlers.length-1};InterceptorManager$1.prototype.eject=function a(c){this.handlers[c]&&(this.handlers[c]=null)};InterceptorManager$1.prototype.forEach=function a(c){utils$7.forEach(this.handlers,function(_){_!==null&&c(_)})};var InterceptorManager_1=InterceptorManager$1,utils$6=utils$9,normalizeHeaderName$1=function a(c,b){utils$6.forEach(c,function(k,j){j!==b&&j.toUpperCase()===b.toUpperCase()&&(c[b]=k,delete c[j])})},enhanceError$1=function a(c,b,_,k,j){return c.config=b,_&&(c.code=_),c.request=k,c.response=j,c.isAxiosError=!0,c.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},c},createError,hasRequiredCreateError;function requireCreateError(){if(hasRequiredCreateError)return createError;hasRequiredCreateError=1;var a=enhanceError$1;return createError=function(b,_,k,j,_e){var et=new Error(b);return a(et,_,k,j,_e)},createError}var settle,hasRequiredSettle;function requireSettle(){if(hasRequiredSettle)return settle;hasRequiredSettle=1;var a=requireCreateError();return settle=function(b,_,k){var j=k.config.validateStatus;!k.status||!j||j(k.status)?b(k):_(a("Request failed with status code "+k.status,k.config,null,k.request,k))},settle}var cookies,hasRequiredCookies;function requireCookies(){if(hasRequiredCookies)return cookies;hasRequiredCookies=1;var a=utils$9;return cookies=a.isStandardBrowserEnv()?function(){return{write:function(_,k,j,_e,et,nt){var it=[];it.push(_+"="+encodeURIComponent(k)),a.isNumber(j)&&it.push("expires="+new Date(j).toGMTString()),a.isString(_e)&&it.push("path="+_e),a.isString(et)&&it.push("domain="+et),nt===!0&&it.push("secure"),document.cookie=it.join("; ")},read:function(_){var k=document.cookie.match(new RegExp("(^|;\\s*)("+_+")=([^;]*)"));return k?decodeURIComponent(k[3]):null},remove:function(_){this.write(_,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),cookies}var isAbsoluteURL,hasRequiredIsAbsoluteURL;function requireIsAbsoluteURL(){return hasRequiredIsAbsoluteURL||(hasRequiredIsAbsoluteURL=1,isAbsoluteURL=function(c){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(c)}),isAbsoluteURL}var combineURLs,hasRequiredCombineURLs;function requireCombineURLs(){return hasRequiredCombineURLs||(hasRequiredCombineURLs=1,combineURLs=function(c,b){return b?c.replace(/\/+$/,"")+"/"+b.replace(/^\/+/,""):c}),combineURLs}var buildFullPath,hasRequiredBuildFullPath;function requireBuildFullPath(){if(hasRequiredBuildFullPath)return buildFullPath;hasRequiredBuildFullPath=1;var a=requireIsAbsoluteURL(),c=requireCombineURLs();return buildFullPath=function(_,k){return _&&!a(k)?c(_,k):k},buildFullPath}var parseHeaders,hasRequiredParseHeaders;function requireParseHeaders(){if(hasRequiredParseHeaders)return parseHeaders;hasRequiredParseHeaders=1;var a=utils$9,c=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];return parseHeaders=function(_){var k={},j,_e,et;return _&&a.forEach(_.split(`
`),function(it){if(et=it.indexOf(":"),j=a.trim(it.substr(0,et)).toLowerCase(),_e=a.trim(it.substr(et+1)),j){if(k[j]&&c.indexOf(j)>=0)return;j==="set-cookie"?k[j]=(k[j]?k[j]:[]).concat([_e]):k[j]=k[j]?k[j]+", "+_e:_e}}),k},parseHeaders}var isURLSameOrigin,hasRequiredIsURLSameOrigin;function requireIsURLSameOrigin(){if(hasRequiredIsURLSameOrigin)return isURLSameOrigin;hasRequiredIsURLSameOrigin=1;var a=utils$9;return isURLSameOrigin=a.isStandardBrowserEnv()?function(){var b=/(msie|trident)/i.test(navigator.userAgent),_=document.createElement("a"),k;function j(_e){var et=_e;return b&&(_.setAttribute("href",et),et=_.href),_.setAttribute("href",et),{href:_.href,protocol:_.protocol?_.protocol.replace(/:$/,""):"",host:_.host,search:_.search?_.search.replace(/^\?/,""):"",hash:_.hash?_.hash.replace(/^#/,""):"",hostname:_.hostname,port:_.port,pathname:_.pathname.charAt(0)==="/"?_.pathname:"/"+_.pathname}}return k=j(window.location.href),function(et){var nt=a.isString(et)?j(et):et;return nt.protocol===k.protocol&&nt.host===k.host}}():function(){return function(){return!0}}(),isURLSameOrigin}var xhr,hasRequiredXhr;function requireXhr(){if(hasRequiredXhr)return xhr;hasRequiredXhr=1;var a=utils$9,c=requireSettle(),b=requireCookies(),_=buildURL$1,k=requireBuildFullPath(),j=requireParseHeaders(),_e=requireIsURLSameOrigin(),et=requireCreateError();return xhr=function(it){return new Promise(function(pt,mt){var St=it.data,yt=it.headers,_t=it.responseType;a.isFormData(St)&&delete yt["Content-Type"];var Tt=new XMLHttpRequest;if(it.auth){var gt=it.auth.username||"",ht=it.auth.password?unescape(encodeURIComponent(it.auth.password)):"";yt.Authorization="Basic "+btoa(gt+":"+ht)}var Et=k(it.baseURL,it.url);Tt.open(it.method.toUpperCase(),_(Et,it.params,it.paramsSerializer),!0),Tt.timeout=it.timeout;function At(){if(Tt){var qt="getAllResponseHeaders"in Tt?j(Tt.getAllResponseHeaders()):null,zt=!_t||_t==="text"||_t==="json"?Tt.responseText:Tt.response,Ht={data:zt,status:Tt.status,statusText:Tt.statusText,headers:qt,config:it,request:Tt};c(pt,mt,Ht),Tt=null}}if("onloadend"in Tt?Tt.onloadend=At:Tt.onreadystatechange=function(){!Tt||Tt.readyState!==4||Tt.status===0&&!(Tt.responseURL&&Tt.responseURL.indexOf("file:")===0)||setTimeout(At)},Tt.onabort=function(){Tt&&(mt(et("Request aborted",it,"ECONNABORTED",Tt)),Tt=null)},Tt.onerror=function(){mt(et("Network Error",it,null,Tt)),Tt=null},Tt.ontimeout=function(){var zt="timeout of "+it.timeout+"ms exceeded";it.timeoutErrorMessage&&(zt=it.timeoutErrorMessage),mt(et(zt,it,it.transitional&&it.transitional.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",Tt)),Tt=null},a.isStandardBrowserEnv()){var Bt=(it.withCredentials||_e(Et))&&it.xsrfCookieName?b.read(it.xsrfCookieName):void 0;Bt&&(yt[it.xsrfHeaderName]=Bt)}"setRequestHeader"in Tt&&a.forEach(yt,function(zt,Ht){typeof St>"u"&&Ht.toLowerCase()==="content-type"?delete yt[Ht]:Tt.setRequestHeader(Ht,zt)}),a.isUndefined(it.withCredentials)||(Tt.withCredentials=!!it.withCredentials),_t&&_t!=="json"&&(Tt.responseType=it.responseType),typeof it.onDownloadProgress=="function"&&Tt.addEventListener("progress",it.onDownloadProgress),typeof it.onUploadProgress=="function"&&Tt.upload&&Tt.upload.addEventListener("progress",it.onUploadProgress),it.cancelToken&&it.cancelToken.promise.then(function(zt){Tt&&(Tt.abort(),mt(zt),Tt=null)}),St||(St=null),Tt.send(St)})},xhr}var utils$5=utils$9,normalizeHeaderName=normalizeHeaderName$1,enhanceError=enhanceError$1,DEFAULT_CONTENT_TYPE={"Content-Type":"application/x-www-form-urlencoded"};function setContentTypeIfUnset(a,c){!utils$5.isUndefined(a)&&utils$5.isUndefined(a["Content-Type"])&&(a["Content-Type"]=c)}function getDefaultAdapter(){var a;return(typeof XMLHttpRequest<"u"||typeof process<"u"&&Object.prototype.toString.call(process)==="[object process]")&&(a=requireXhr()),a}function stringifySafely(a,c,b){if(utils$5.isString(a))try{return(c||JSON.parse)(a),utils$5.trim(a)}catch(_){if(_.name!=="SyntaxError")throw _}return(b||JSON.stringify)(a)}var defaults$3={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:getDefaultAdapter(),transformRequest:[function a(c,b){return normalizeHeaderName(b,"Accept"),normalizeHeaderName(b,"Content-Type"),utils$5.isFormData(c)||utils$5.isArrayBuffer(c)||utils$5.isBuffer(c)||utils$5.isStream(c)||utils$5.isFile(c)||utils$5.isBlob(c)?c:utils$5.isArrayBufferView(c)?c.buffer:utils$5.isURLSearchParams(c)?(setContentTypeIfUnset(b,"application/x-www-form-urlencoded;charset=utf-8"),c.toString()):utils$5.isObject(c)||b&&b["Content-Type"]==="application/json"?(setContentTypeIfUnset(b,"application/json"),stringifySafely(c)):c}],transformResponse:[function a(c){var b=this.transitional,_=b&&b.silentJSONParsing,k=b&&b.forcedJSONParsing,j=!_&&this.responseType==="json";if(j||k&&utils$5.isString(c)&&c.length)try{return JSON.parse(c)}catch(_e){if(j)throw _e.name==="SyntaxError"?enhanceError(_e,this,"E_JSON_PARSE"):_e}return c}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function a(c){return c>=200&&c<300}};defaults$3.headers={common:{Accept:"application/json, text/plain, */*"}};utils$5.forEach(["delete","get","head"],function a(c){defaults$3.headers[c]={}});utils$5.forEach(["post","put","patch"],function a(c){defaults$3.headers[c]=utils$5.merge(DEFAULT_CONTENT_TYPE)});var defaults_1=defaults$3,utils$4=utils$9,defaults$2=defaults_1,transformData$1=function a(c,b,_){var k=this||defaults$2;return utils$4.forEach(_,function(_e){c=_e.call(k,c,b)}),c},isCancel$1,hasRequiredIsCancel;function requireIsCancel(){return hasRequiredIsCancel||(hasRequiredIsCancel=1,isCancel$1=function(c){return!!(c&&c.__CANCEL__)}),isCancel$1}var utils$3=utils$9,transformData=transformData$1,isCancel=requireIsCancel(),defaults$1=defaults_1;function throwIfCancellationRequested(a){a.cancelToken&&a.cancelToken.throwIfRequested()}var dispatchRequest$1=function a(c){throwIfCancellationRequested(c),c.headers=c.headers||{},c.data=transformData.call(c,c.data,c.headers,c.transformRequest),c.headers=utils$3.merge(c.headers.common||{},c.headers[c.method]||{},c.headers),utils$3.forEach(["delete","get","head","post","put","patch","common"],function(k){delete c.headers[k]});var b=c.adapter||defaults$1.adapter;return b(c).then(function(k){return throwIfCancellationRequested(c),k.data=transformData.call(c,k.data,k.headers,c.transformResponse),k},function(k){return isCancel(k)||(throwIfCancellationRequested(c),k&&k.response&&(k.response.data=transformData.call(c,k.response.data,k.response.headers,c.transformResponse))),Promise.reject(k)})},utils$2=utils$9,mergeConfig$2=function a(c,b){b=b||{};var _={},k=["url","method","data"],j=["headers","auth","proxy","params"],_e=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],et=["validateStatus"];function nt(mt,St){return utils$2.isPlainObject(mt)&&utils$2.isPlainObject(St)?utils$2.merge(mt,St):utils$2.isPlainObject(St)?utils$2.merge({},St):utils$2.isArray(St)?St.slice():St}function it(mt){utils$2.isUndefined(b[mt])?utils$2.isUndefined(c[mt])||(_[mt]=nt(void 0,c[mt])):_[mt]=nt(c[mt],b[mt])}utils$2.forEach(k,function(St){utils$2.isUndefined(b[St])||(_[St]=nt(void 0,b[St]))}),utils$2.forEach(j,it),utils$2.forEach(_e,function(St){utils$2.isUndefined(b[St])?utils$2.isUndefined(c[St])||(_[St]=nt(void 0,c[St])):_[St]=nt(void 0,b[St])}),utils$2.forEach(et,function(St){St in b?_[St]=nt(c[St],b[St]):St in c&&(_[St]=nt(void 0,c[St]))});var ft=k.concat(j).concat(_e).concat(et),pt=Object.keys(c).concat(Object.keys(b)).filter(function(St){return ft.indexOf(St)===-1});return utils$2.forEach(pt,it),_};const name="axios",version$2="0.21.4",description="Promise based HTTP client for the browser and node.js",main="index.js",scripts={test:"grunt test",start:"node ./sandbox/server.js",build:"NODE_ENV=production grunt build",preversion:"npm test",version:"npm run build && grunt version && git add -A dist && git add CHANGELOG.md bower.json package.json",postversion:"git push && git push --tags",examples:"node ./examples/server.js",coveralls:"cat coverage/lcov.info | ./node_modules/coveralls/bin/coveralls.js",fix:"eslint --fix lib/**/*.js"},repository={type:"git",url:"https://github.com/axios/axios.git"},keywords=["xhr","http","ajax","promise","node"],author="Matt Zabriskie",license="MIT",bugs={url:"https://github.com/axios/axios/issues"},homepage="https://axios-http.com",devDependencies={coveralls:"^3.0.0","es6-promise":"^4.2.4",grunt:"^1.3.0","grunt-banner":"^0.6.0","grunt-cli":"^1.2.0","grunt-contrib-clean":"^1.1.0","grunt-contrib-watch":"^1.0.0","grunt-eslint":"^23.0.0","grunt-karma":"^4.0.0","grunt-mocha-test":"^0.13.3","grunt-ts":"^6.0.0-beta.19","grunt-webpack":"^4.0.2","istanbul-instrumenter-loader":"^1.0.0","jasmine-core":"^2.4.1",karma:"^6.3.2","karma-chrome-launcher":"^3.1.0","karma-firefox-launcher":"^2.1.0","karma-jasmine":"^1.1.1","karma-jasmine-ajax":"^0.1.13","karma-safari-launcher":"^1.0.0","karma-sauce-launcher":"^4.3.6","karma-sinon":"^1.0.5","karma-sourcemap-loader":"^0.3.8","karma-webpack":"^4.0.2","load-grunt-tasks":"^3.5.2",minimist:"^1.2.0",mocha:"^8.2.1",sinon:"^4.5.0","terser-webpack-plugin":"^4.2.3",typescript:"^4.0.5","url-search-params":"^0.10.0",webpack:"^4.44.2","webpack-dev-server":"^3.11.0"},browser={"./lib/adapters/http.js":"./lib/adapters/xhr.js"},jsdelivr="dist/axios.min.js",unpkg="dist/axios.min.js",typings="./index.d.ts",dependencies={"follow-redirects":"^1.14.0"},bundlesize=[{path:"./dist/axios.min.js",threshold:"5kB"}],require$$0={name,version:version$2,description,main,scripts,repository,keywords,author,license,bugs,homepage,devDependencies,browser,jsdelivr,unpkg,typings,dependencies,bundlesize};var pkg=require$$0,validators$1={};["object","boolean","number","function","string","symbol"].forEach(function(a,c){validators$1[a]=function(_){return typeof _===a||"a"+(c<1?"n ":" ")+a}});var deprecatedWarnings={},currentVerArr=pkg.version.split(".");function isOlderVersion(a,c){for(var b=c?c.split("."):currentVerArr,_=a.split("."),k=0;k<3;k++){if(b[k]>_[k])return!0;if(b[k]<_[k])return!1}return!1}validators$1.transitional=function a(c,b,_){var k=b&&isOlderVersion(b);function j(_e,et){return"[Axios v"+pkg.version+"] Transitional option '"+_e+"'"+et+(_?". "+_:"")}return function(_e,et,nt){if(c===!1)throw new Error(j(et," has been removed in "+b));return k&&!deprecatedWarnings[et]&&(deprecatedWarnings[et]=!0,console.warn(j(et," has been deprecated since v"+b+" and will be removed in the near future"))),c?c(_e,et,nt):!0}};function assertOptions(a,c,b){if(typeof a!="object")throw new TypeError("options must be an object");for(var _=Object.keys(a),k=_.length;k-- >0;){var j=_[k],_e=c[j];if(_e){var et=a[j],nt=et===void 0||_e(et,j,a);if(nt!==!0)throw new TypeError("option "+j+" must be "+nt);continue}if(b!==!0)throw Error("Unknown option "+j)}}var validator$1={isOlderVersion,assertOptions,validators:validators$1},utils$1=utils$9,buildURL=buildURL$1,InterceptorManager=InterceptorManager_1,dispatchRequest=dispatchRequest$1,mergeConfig$1=mergeConfig$2,validator=validator$1,validators=validator.validators;function Axios$1(a){this.defaults=a,this.interceptors={request:new InterceptorManager,response:new InterceptorManager}}Axios$1.prototype.request=function a(c){typeof c=="string"?(c=arguments[1]||{},c.url=arguments[0]):c=c||{},c=mergeConfig$1(this.defaults,c),c.method?c.method=c.method.toLowerCase():this.defaults.method?c.method=this.defaults.method.toLowerCase():c.method="get";var b=c.transitional;b!==void 0&&validator.assertOptions(b,{silentJSONParsing:validators.transitional(validators.boolean,"1.0.0"),forcedJSONParsing:validators.transitional(validators.boolean,"1.0.0"),clarifyTimeoutError:validators.transitional(validators.boolean,"1.0.0")},!1);var _=[],k=!0;this.interceptors.request.forEach(function(mt){typeof mt.runWhen=="function"&&mt.runWhen(c)===!1||(k=k&&mt.synchronous,_.unshift(mt.fulfilled,mt.rejected))});var j=[];this.interceptors.response.forEach(function(mt){j.push(mt.fulfilled,mt.rejected)});var _e;if(!k){var et=[dispatchRequest,void 0];for(Array.prototype.unshift.apply(et,_),et=et.concat(j),_e=Promise.resolve(c);et.length;)_e=_e.then(et.shift(),et.shift());return _e}for(var nt=c;_.length;){var it=_.shift(),ft=_.shift();try{nt=it(nt)}catch(pt){ft(pt);break}}try{_e=dispatchRequest(nt)}catch(pt){return Promise.reject(pt)}for(;j.length;)_e=_e.then(j.shift(),j.shift());return _e};Axios$1.prototype.getUri=function a(c){return c=mergeConfig$1(this.defaults,c),buildURL(c.url,c.params,c.paramsSerializer).replace(/^\?/,"")};utils$1.forEach(["delete","get","head","options"],function a(c){Axios$1.prototype[c]=function(b,_){return this.request(mergeConfig$1(_||{},{method:c,url:b,data:(_||{}).data}))}});utils$1.forEach(["post","put","patch"],function a(c){Axios$1.prototype[c]=function(b,_,k){return this.request(mergeConfig$1(k||{},{method:c,url:b,data:_}))}});var Axios_1=Axios$1,Cancel_1,hasRequiredCancel;function requireCancel(){if(hasRequiredCancel)return Cancel_1;hasRequiredCancel=1;function a(c){this.message=c}return a.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},a.prototype.__CANCEL__=!0,Cancel_1=a,Cancel_1}var CancelToken_1,hasRequiredCancelToken;function requireCancelToken(){if(hasRequiredCancelToken)return CancelToken_1;hasRequiredCancelToken=1;var a=requireCancel();function c(b){if(typeof b!="function")throw new TypeError("executor must be a function.");var _;this.promise=new Promise(function(_e){_=_e});var k=this;b(function(_e){k.reason||(k.reason=new a(_e),_(k.reason))})}return c.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},c.source=function(){var _,k=new c(function(_e){_=_e});return{token:k,cancel:_}},CancelToken_1=c,CancelToken_1}var spread,hasRequiredSpread;function requireSpread(){return hasRequiredSpread||(hasRequiredSpread=1,spread=function(c){return function(_){return c.apply(null,_)}}),spread}var isAxiosError,hasRequiredIsAxiosError;function requireIsAxiosError(){return hasRequiredIsAxiosError||(hasRequiredIsAxiosError=1,isAxiosError=function(c){return typeof c=="object"&&c.isAxiosError===!0}),isAxiosError}var utils=utils$9,bind=bind$2,Axios=Axios_1,mergeConfig=mergeConfig$2,defaults=defaults_1;function createInstance(a){var c=new Axios(a),b=bind(Axios.prototype.request,c);return utils.extend(b,Axios.prototype,c),utils.extend(b,c),b}var axios$1=createInstance(defaults);axios$1.Axios=Axios;axios$1.create=function a(c){return createInstance(mergeConfig(axios$1.defaults,c))};axios$1.Cancel=requireCancel();axios$1.CancelToken=requireCancelToken();axios$1.isCancel=requireIsCancel();axios$1.all=function a(c){return Promise.all(c)};axios$1.spread=requireSpread();axios$1.isAxiosError=requireIsAxiosError();axios$2.exports=axios$1;axios$2.exports.default=axios$1;var axiosExports=axios$2.exports,axios=axiosExports,mapObj$1={exports:{}};const isObject$2=a=>typeof a=="object"&&a!==null,mapObjectSkip=Symbol("skip"),isObjectCustom=a=>isObject$2(a)&&!(a instanceof RegExp)&&!(a instanceof Error)&&!(a instanceof Date),mapObject=(a,c,b,_=new WeakMap)=>{if(b={deep:!1,target:{},...b},_.has(a))return _.get(a);_.set(a,b.target);const{target:k}=b;delete b.target;const j=_e=>_e.map(et=>isObjectCustom(et)?mapObject(et,c,b,_):et);if(Array.isArray(a))return j(a);for(const[_e,et]of Object.entries(a)){const nt=c(_e,et,a);if(nt===mapObjectSkip)continue;let[it,ft,{shouldRecurse:pt=!0}={}]=nt;it!=="__proto__"&&(b.deep&&pt&&isObjectCustom(ft)&&(ft=Array.isArray(ft)?j(ft):mapObject(ft,c,b,_)),k[it]=ft)}return k};mapObj$1.exports=(a,c,b)=>{if(!isObject$2(a))throw new TypeError(`Expected an object, got \`${a}\` (${typeof a})`);return mapObject(a,c,b)};mapObj$1.exports.mapObjectSkip=mapObjectSkip;var mapObjExports=mapObj$1.exports,camelcase={exports:{}};const UPPERCASE=/[\p{Lu}]/u,LOWERCASE=/[\p{Ll}]/u,LEADING_CAPITAL=/^[\p{Lu}](?![\p{Lu}])/gu,IDENTIFIER=/([\p{Alpha}\p{N}_]|$)/u,SEPARATORS=/[_.\- ]+/,LEADING_SEPARATORS=new RegExp("^"+SEPARATORS.source),SEPARATORS_AND_IDENTIFIER=new RegExp(SEPARATORS.source+IDENTIFIER.source,"gu"),NUMBERS_AND_IDENTIFIER=new RegExp("\\d+"+IDENTIFIER.source,"gu"),preserveCamelCase=(a,c,b)=>{let _=!1,k=!1,j=!1;for(let _e=0;_e<a.length;_e++){const et=a[_e];_&&UPPERCASE.test(et)?(a=a.slice(0,_e)+"-"+a.slice(_e),_=!1,j=k,k=!0,_e++):k&&j&&LOWERCASE.test(et)?(a=a.slice(0,_e-1)+"-"+a.slice(_e-1),j=k,k=!1,_=!0):(_=c(et)===et&&b(et)!==et,j=k,k=b(et)===et&&c(et)!==et)}return a},preserveConsecutiveUppercase=(a,c)=>(LEADING_CAPITAL.lastIndex=0,a.replace(LEADING_CAPITAL,b=>c(b))),postProcess=(a,c)=>(SEPARATORS_AND_IDENTIFIER.lastIndex=0,NUMBERS_AND_IDENTIFIER.lastIndex=0,a.replace(SEPARATORS_AND_IDENTIFIER,(b,_)=>c(_)).replace(NUMBERS_AND_IDENTIFIER,b=>c(b))),camelCase$1=(a,c)=>{if(!(typeof a=="string"||Array.isArray(a)))throw new TypeError("Expected the input to be `string | string[]`");if(c={pascalCase:!1,preserveConsecutiveUppercase:!1,...c},Array.isArray(a)?a=a.map(j=>j.trim()).filter(j=>j.length).join("-"):a=a.trim(),a.length===0)return"";const b=c.locale===!1?j=>j.toLowerCase():j=>j.toLocaleLowerCase(c.locale),_=c.locale===!1?j=>j.toUpperCase():j=>j.toLocaleUpperCase(c.locale);return a.length===1?c.pascalCase?_(a):b(a):(a!==b(a)&&(a=preserveCamelCase(a,b,_)),a=a.replace(LEADING_SEPARATORS,""),c.preserveConsecutiveUppercase?a=preserveConsecutiveUppercase(a,b):a=b(a),c.pascalCase&&(a=_(a.charAt(0))+a.slice(1)),postProcess(a,_))};camelcase.exports=camelCase$1;camelcase.exports.default=camelCase$1;var camelcaseExports=camelcase.exports;class QuickLRU{constructor(c={}){if(!(c.maxSize&&c.maxSize>0))throw new TypeError("`maxSize` must be a number greater than 0");this.maxSize=c.maxSize,this.onEviction=c.onEviction,this.cache=new Map,this.oldCache=new Map,this._size=0}_set(c,b){if(this.cache.set(c,b),this._size++,this._size>=this.maxSize){if(this._size=0,typeof this.onEviction=="function")for(const[_,k]of this.oldCache.entries())this.onEviction(_,k);this.oldCache=this.cache,this.cache=new Map}}get(c){if(this.cache.has(c))return this.cache.get(c);if(this.oldCache.has(c)){const b=this.oldCache.get(c);return this.oldCache.delete(c),this._set(c,b),b}}set(c,b){return this.cache.has(c)?this.cache.set(c,b):this._set(c,b),this}has(c){return this.cache.has(c)||this.oldCache.has(c)}peek(c){if(this.cache.has(c))return this.cache.get(c);if(this.oldCache.has(c))return this.oldCache.get(c)}delete(c){const b=this.cache.delete(c);return b&&this._size--,this.oldCache.delete(c)||b}clear(){this.cache.clear(),this.oldCache.clear(),this._size=0}*keys(){for(const[c]of this)yield c}*values(){for(const[,c]of this)yield c}*[Symbol.iterator](){for(const c of this.cache)yield c;for(const c of this.oldCache){const[b]=c;this.cache.has(b)||(yield c)}}get size(){let c=0;for(const b of this.oldCache.keys())this.cache.has(b)||c++;return Math.min(this._size+c,this.maxSize)}}var quickLru=QuickLRU;const mapObj=mapObjExports,camelCase=camelcaseExports,QuickLru=quickLru,has=(a,c)=>a.some(b=>typeof b=="string"?b===c:(b.lastIndex=0,b.test(c))),cache$1=new QuickLru({maxSize:1e5}),isObject$1=a=>typeof a=="object"&&a!==null&&!(a instanceof RegExp)&&!(a instanceof Error)&&!(a instanceof Date),camelCaseConvert=(a,c)=>{if(!isObject$1(a))return a;c={deep:!1,pascalCase:!1,...c};const{exclude:b,pascalCase:_,stopPaths:k,deep:j}=c,_e=new Set(k),et=nt=>(it,ft)=>{if(j&&isObject$1(ft)){const pt=nt===void 0?it:`${nt}.${it}`;_e.has(pt)||(ft=mapObj(ft,et(pt)))}if(!(b&&has(b,it))){const pt=_?`${it}_`:it;if(cache$1.has(pt))it=cache$1.get(pt);else{const mt=camelCase(it,{pascalCase:_,locale:!1});it.length<100&&cache$1.set(pt,mt),it=mt}}return[it,ft]};return mapObj(a,et(void 0))};var camelcaseKeys=(a,c)=>Array.isArray(a)?Object.keys(a).map(b=>camelCaseConvert(a[b],c)):camelCaseConvert(a,c),__importDefault$6=commonjsGlobal$1&&commonjsGlobal$1.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(TwirpRPC,"__esModule",{value:!0});TwirpRPC.TwirpRpc=TwirpRPC.livekitPackage=void 0;const axios_1=__importDefault$6(axios),camelcase_keys_1=__importDefault$6(camelcaseKeys),defaultPrefix="/twirp";TwirpRPC.livekitPackage="livekit";class TwirpRpc{constructor(c,b,_,k){this.host=c,this.pkg=b,this.prefix=_||defaultPrefix,this.instance=axios_1.default.create({baseURL:c,headers:Object.assign({},k?{Host:k}:{})})}request(c,b,_,k){return new Promise((j,_e)=>{const et=`${this.prefix}/${this.pkg}.${c}/${b}`;this.instance.post(et,_,{headers:k}).then(nt=>{j(camelcase_keys_1.default(nt.data,{deep:!0}))}).catch(_e)})}}TwirpRPC.TwirpRpc=TwirpRpc;var __awaiter$3=commonjsGlobal$1&&commonjsGlobal$1.__awaiter||function(a,c,b,_){function k(j){return j instanceof b?j:new b(function(_e){_e(j)})}return new(b||(b=Promise))(function(j,_e){function et(ft){try{it(_.next(ft))}catch(pt){_e(pt)}}function nt(ft){try{it(_.throw(ft))}catch(pt){_e(pt)}}function it(ft){ft.done?j(ft.value):k(ft.value).then(et,nt)}it((_=_.apply(a,c||[])).next())})},__importDefault$5=commonjsGlobal$1&&commonjsGlobal$1.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(EgressClient$1,"__esModule",{value:!0});EgressClient$1.EgressClient=void 0;const livekit_egress_1$1=livekit_egress,ServiceBase_1$2=__importDefault$5(ServiceBase$1),TwirpRPC_1$2=TwirpRPC,svc$2="Egress";class EgressClient extends ServiceBase_1$2.default{constructor(c,b,_){super(b,_),this.rpc=new TwirpRPC_1$2.TwirpRpc(c,TwirpRPC_1$2.livekitPackage)}startRoomCompositeEgress(c,b,_,k,j,_e,et){return __awaiter$3(this,void 0,void 0,function*(){let nt;if(_!==void 0)if(typeof _=="string")nt=_;else{const Tt=_;nt=Tt.layout,k=Tt.encodingOptions,j=Tt.audioOnly,_e=Tt.videoOnly,et=Tt.customBaseUrl}nt??(nt=""),j??(j=!1),_e??(_e=!1),et??(et="");const{file:it,segments:ft,stream:pt,preset:mt,advanced:St}=this.getOutputParams(b,k),yt=livekit_egress_1$1.RoomCompositeEgressRequest.toJSON({roomName:c,layout:nt,audioOnly:j,videoOnly:_e,customBaseUrl:et,file:it,stream:pt,segments:ft,preset:mt,advanced:St}),_t=yield this.rpc.request(svc$2,"StartRoomCompositeEgress",yt,this.authHeader({roomRecord:!0}));return livekit_egress_1$1.EgressInfo.fromJSON(_t)})}startWebEgress(c,b,_){return __awaiter$3(this,void 0,void 0,function*(){const k=(_==null?void 0:_.audioOnly)||!1,j=(_==null?void 0:_.videoOnly)||!1,{file:_e,segments:et,stream:nt,preset:it,advanced:ft}=this.getOutputParams(b,_==null?void 0:_.encodingOptions),pt=livekit_egress_1$1.WebEgressRequest.toJSON({url:c,audioOnly:k,videoOnly:j,file:_e,stream:nt,segments:et,preset:it,advanced:ft}),mt=yield this.rpc.request(svc$2,"StartWebEgress",pt,this.authHeader({roomRecord:!0}));return livekit_egress_1$1.EgressInfo.fromJSON(mt)})}startTrackCompositeEgress(c,b,_,k,j){return __awaiter$3(this,void 0,void 0,function*(){let _e;if(_!==void 0)if(typeof _=="string")_e=_;else{const yt=_;_e=yt.audioTrackId,k=yt.videoTrackId,j=yt.encodingOptions}_e??(_e=""),k??(k="");const{file:et,segments:nt,stream:it,preset:ft,advanced:pt}=this.getOutputParams(b,j),mt=livekit_egress_1$1.TrackCompositeEgressRequest.toJSON({roomName:c,audioTrackId:_e,videoTrackId:k,file:et,stream:it,segments:nt,preset:ft,advanced:pt}),St=yield this.rpc.request(svc$2,"StartTrackCompositeEgress",mt,this.authHeader({roomRecord:!0}));return livekit_egress_1$1.EgressInfo.fromJSON(St)})}getOutputParams(c,b){let _,k,j,_e,et;return c.filepath!==void 0?_=c:c.filenamePrefix!==void 0?j=c:k=c,b&&(typeof b=="number"?_e=b:et=b),{file:_,segments:j,stream:k,preset:_e,advanced:et}}startTrackEgress(c,b,_){return __awaiter$3(this,void 0,void 0,function*(){let k,j;b.filepath!==void 0?k=b:j=b;const _e=livekit_egress_1$1.TrackEgressRequest.toJSON({roomName:c,trackId:_,file:k,websocketUrl:j}),et=yield this.rpc.request(svc$2,"StartTrackEgress",_e,this.authHeader({roomRecord:!0}));return livekit_egress_1$1.EgressInfo.fromJSON(et)})}updateLayout(c,b){return __awaiter$3(this,void 0,void 0,function*(){const _=yield this.rpc.request(svc$2,"UpdateLayout",livekit_egress_1$1.UpdateLayoutRequest.toJSON({egressId:c,layout:b}),this.authHeader({roomRecord:!0}));return livekit_egress_1$1.EgressInfo.fromJSON(_)})}updateStream(c,b,_){return __awaiter$3(this,void 0,void 0,function*(){b??(b=[]),_??(_=[]);const k=yield this.rpc.request(svc$2,"UpdateStream",livekit_egress_1$1.UpdateStreamRequest.toJSON({egressId:c,addOutputUrls:b,removeOutputUrls:_}),this.authHeader({roomRecord:!0}));return livekit_egress_1$1.EgressInfo.fromJSON(k)})}listEgress(c){var b;return __awaiter$3(this,void 0,void 0,function*(){c??(c="");const _=yield this.rpc.request(svc$2,"ListEgress",livekit_egress_1$1.ListEgressRequest.toJSON({roomName:c}),this.authHeader({roomRecord:!0}));return(b=livekit_egress_1$1.ListEgressResponse.fromJSON(_).items)!==null&&b!==void 0?b:[]})}stopEgress(c){return __awaiter$3(this,void 0,void 0,function*(){const b=yield this.rpc.request(svc$2,"StopEgress",livekit_egress_1$1.StopEgressRequest.toJSON({egressId:c}),this.authHeader({roomRecord:!0}));return livekit_egress_1$1.EgressInfo.fromJSON(b)})}}EgressClient$1.EgressClient=EgressClient;var grants={};Object.defineProperty(grants,"__esModule",{value:!0});var IngressClient$1={},livekit_ingress={},livekit_models={},timestamp={},__importDefault$4=commonjsGlobal$1&&commonjsGlobal$1.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(timestamp,"__esModule",{value:!0});timestamp.Timestamp=timestamp.protobufPackage=void 0;const long_1$1=__importDefault$4(umdExports),minimal_1$1=__importDefault$4(minimal);timestamp.protobufPackage="google.protobuf";function createBaseTimestamp(){return{seconds:0,nanos:0}}timestamp.Timestamp={encode(a,c=minimal_1$1.default.Writer.create()){return a.seconds!==0&&c.uint32(8).int64(a.seconds),a.nanos!==0&&c.uint32(16).int32(a.nanos),c},decode(a,c){const b=a instanceof minimal_1$1.default.Reader?a:new minimal_1$1.default.Reader(a);let _=c===void 0?b.len:b.pos+c;const k=createBaseTimestamp();for(;b.pos<_;){const j=b.uint32();switch(j>>>3){case 1:k.seconds=longToNumber$1(b.int64());break;case 2:k.nanos=b.int32();break;default:b.skipType(j&7);break}}return k},fromJSON(a){return{seconds:isSet$1(a.seconds)?Number(a.seconds):0,nanos:isSet$1(a.nanos)?Number(a.nanos):0}},toJSON(a){const c={};return a.seconds!==void 0&&(c.seconds=Math.round(a.seconds)),a.nanos!==void 0&&(c.nanos=Math.round(a.nanos)),c},fromPartial(a){var c,b;const _=createBaseTimestamp();return _.seconds=(c=a.seconds)!==null&&c!==void 0?c:0,_.nanos=(b=a.nanos)!==null&&b!==void 0?b:0,_}};var globalThis$2=(()=>{if(typeof globalThis$2<"u")return globalThis$2;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof commonjsGlobal$1<"u")return commonjsGlobal$1;throw"Unable to locate global object"})();function longToNumber$1(a){if(a.gt(Number.MAX_SAFE_INTEGER))throw new globalThis$2.Error("Value is larger than Number.MAX_SAFE_INTEGER");return a.toNumber()}minimal_1$1.default.util.Long!==long_1$1.default&&(minimal_1$1.default.util.Long=long_1$1.default,minimal_1$1.default.configure());function isSet$1(a){return a!=null}(function(a){var c=commonjsGlobal$1&&commonjsGlobal$1.__importDefault||function(st){return st&&st.__esModule?st:{default:st}};Object.defineProperty(a,"__esModule",{value:!0}),a.RTPStats_GapHistogramEntry=a.RTPStats=a.DisabledCodecs=a.VideoConfiguration=a.ClientConfiguration=a.ClientInfo=a.ServerInfo=a.ParticipantTracks=a.UserPacket=a.SpeakerInfo=a.ActiveSpeakerUpdate=a.DataPacket=a.VideoLayer=a.TrackInfo=a.SimulcastCodecInfo=a.ParticipantInfo=a.ParticipantPermission=a.Codec=a.Room=a.clientInfo_SDKToJSON=a.clientInfo_SDKFromJSON=a.ClientInfo_SDK=a.serverInfo_EditionToJSON=a.serverInfo_EditionFromJSON=a.ServerInfo_Edition=a.dataPacket_KindToJSON=a.dataPacket_KindFromJSON=a.DataPacket_Kind=a.participantInfo_StateToJSON=a.participantInfo_StateFromJSON=a.ParticipantInfo_State=a.disconnectReasonToJSON=a.disconnectReasonFromJSON=a.DisconnectReason=a.clientConfigSettingToJSON=a.clientConfigSettingFromJSON=a.ClientConfigSetting=a.connectionQualityToJSON=a.connectionQualityFromJSON=a.ConnectionQuality=a.videoQualityToJSON=a.videoQualityFromJSON=a.VideoQuality=a.trackSourceToJSON=a.trackSourceFromJSON=a.TrackSource=a.trackTypeToJSON=a.trackTypeFromJSON=a.TrackType=a.protobufPackage=void 0,a.TimedVersion=void 0;const b=c(umdExports),_=c(minimal),k=timestamp;a.protobufPackage="livekit";var j;(function(st){st[st.AUDIO=0]="AUDIO",st[st.VIDEO=1]="VIDEO",st[st.DATA=2]="DATA",st[st.UNRECOGNIZED=-1]="UNRECOGNIZED"})(j=a.TrackType||(a.TrackType={}));function _e(st){switch(st){case 0:case"AUDIO":return j.AUDIO;case 1:case"VIDEO":return j.VIDEO;case 2:case"DATA":return j.DATA;case-1:case"UNRECOGNIZED":default:return j.UNRECOGNIZED}}a.trackTypeFromJSON=_e;function et(st){switch(st){case j.AUDIO:return"AUDIO";case j.VIDEO:return"VIDEO";case j.DATA:return"DATA";case j.UNRECOGNIZED:default:return"UNRECOGNIZED"}}a.trackTypeToJSON=et;var nt;(function(st){st[st.UNKNOWN=0]="UNKNOWN",st[st.CAMERA=1]="CAMERA",st[st.MICROPHONE=2]="MICROPHONE",st[st.SCREEN_SHARE=3]="SCREEN_SHARE",st[st.SCREEN_SHARE_AUDIO=4]="SCREEN_SHARE_AUDIO",st[st.UNRECOGNIZED=-1]="UNRECOGNIZED"})(nt=a.TrackSource||(a.TrackSource={}));function it(st){switch(st){case 0:case"UNKNOWN":return nt.UNKNOWN;case 1:case"CAMERA":return nt.CAMERA;case 2:case"MICROPHONE":return nt.MICROPHONE;case 3:case"SCREEN_SHARE":return nt.SCREEN_SHARE;case 4:case"SCREEN_SHARE_AUDIO":return nt.SCREEN_SHARE_AUDIO;case-1:case"UNRECOGNIZED":default:return nt.UNRECOGNIZED}}a.trackSourceFromJSON=it;function ft(st){switch(st){case nt.UNKNOWN:return"UNKNOWN";case nt.CAMERA:return"CAMERA";case nt.MICROPHONE:return"MICROPHONE";case nt.SCREEN_SHARE:return"SCREEN_SHARE";case nt.SCREEN_SHARE_AUDIO:return"SCREEN_SHARE_AUDIO";case nt.UNRECOGNIZED:default:return"UNRECOGNIZED"}}a.trackSourceToJSON=ft;var pt;(function(st){st[st.LOW=0]="LOW",st[st.MEDIUM=1]="MEDIUM",st[st.HIGH=2]="HIGH",st[st.OFF=3]="OFF",st[st.UNRECOGNIZED=-1]="UNRECOGNIZED"})(pt=a.VideoQuality||(a.VideoQuality={}));function mt(st){switch(st){case 0:case"LOW":return pt.LOW;case 1:case"MEDIUM":return pt.MEDIUM;case 2:case"HIGH":return pt.HIGH;case 3:case"OFF":return pt.OFF;case-1:case"UNRECOGNIZED":default:return pt.UNRECOGNIZED}}a.videoQualityFromJSON=mt;function St(st){switch(st){case pt.LOW:return"LOW";case pt.MEDIUM:return"MEDIUM";case pt.HIGH:return"HIGH";case pt.OFF:return"OFF";case pt.UNRECOGNIZED:default:return"UNRECOGNIZED"}}a.videoQualityToJSON=St;var yt;(function(st){st[st.POOR=0]="POOR",st[st.GOOD=1]="GOOD",st[st.EXCELLENT=2]="EXCELLENT",st[st.UNRECOGNIZED=-1]="UNRECOGNIZED"})(yt=a.ConnectionQuality||(a.ConnectionQuality={}));function _t(st){switch(st){case 0:case"POOR":return yt.POOR;case 1:case"GOOD":return yt.GOOD;case 2:case"EXCELLENT":return yt.EXCELLENT;case-1:case"UNRECOGNIZED":default:return yt.UNRECOGNIZED}}a.connectionQualityFromJSON=_t;function Tt(st){switch(st){case yt.POOR:return"POOR";case yt.GOOD:return"GOOD";case yt.EXCELLENT:return"EXCELLENT";case yt.UNRECOGNIZED:default:return"UNRECOGNIZED"}}a.connectionQualityToJSON=Tt;var gt;(function(st){st[st.UNSET=0]="UNSET",st[st.DISABLED=1]="DISABLED",st[st.ENABLED=2]="ENABLED",st[st.UNRECOGNIZED=-1]="UNRECOGNIZED"})(gt=a.ClientConfigSetting||(a.ClientConfigSetting={}));function ht(st){switch(st){case 0:case"UNSET":return gt.UNSET;case 1:case"DISABLED":return gt.DISABLED;case 2:case"ENABLED":return gt.ENABLED;case-1:case"UNRECOGNIZED":default:return gt.UNRECOGNIZED}}a.clientConfigSettingFromJSON=ht;function Et(st){switch(st){case gt.UNSET:return"UNSET";case gt.DISABLED:return"DISABLED";case gt.ENABLED:return"ENABLED";case gt.UNRECOGNIZED:default:return"UNRECOGNIZED"}}a.clientConfigSettingToJSON=Et;var At;(function(st){st[st.UNKNOWN_REASON=0]="UNKNOWN_REASON",st[st.CLIENT_INITIATED=1]="CLIENT_INITIATED",st[st.DUPLICATE_IDENTITY=2]="DUPLICATE_IDENTITY",st[st.SERVER_SHUTDOWN=3]="SERVER_SHUTDOWN",st[st.PARTICIPANT_REMOVED=4]="PARTICIPANT_REMOVED",st[st.ROOM_DELETED=5]="ROOM_DELETED",st[st.STATE_MISMATCH=6]="STATE_MISMATCH",st[st.JOIN_FAILURE=7]="JOIN_FAILURE",st[st.UNRECOGNIZED=-1]="UNRECOGNIZED"})(At=a.DisconnectReason||(a.DisconnectReason={}));function Bt(st){switch(st){case 0:case"UNKNOWN_REASON":return At.UNKNOWN_REASON;case 1:case"CLIENT_INITIATED":return At.CLIENT_INITIATED;case 2:case"DUPLICATE_IDENTITY":return At.DUPLICATE_IDENTITY;case 3:case"SERVER_SHUTDOWN":return At.SERVER_SHUTDOWN;case 4:case"PARTICIPANT_REMOVED":return At.PARTICIPANT_REMOVED;case 5:case"ROOM_DELETED":return At.ROOM_DELETED;case 6:case"STATE_MISMATCH":return At.STATE_MISMATCH;case 7:case"JOIN_FAILURE":return At.JOIN_FAILURE;case-1:case"UNRECOGNIZED":default:return At.UNRECOGNIZED}}a.disconnectReasonFromJSON=Bt;function qt(st){switch(st){case At.UNKNOWN_REASON:return"UNKNOWN_REASON";case At.CLIENT_INITIATED:return"CLIENT_INITIATED";case At.DUPLICATE_IDENTITY:return"DUPLICATE_IDENTITY";case At.SERVER_SHUTDOWN:return"SERVER_SHUTDOWN";case At.PARTICIPANT_REMOVED:return"PARTICIPANT_REMOVED";case At.ROOM_DELETED:return"ROOM_DELETED";case At.STATE_MISMATCH:return"STATE_MISMATCH";case At.JOIN_FAILURE:return"JOIN_FAILURE";case At.UNRECOGNIZED:default:return"UNRECOGNIZED"}}a.disconnectReasonToJSON=qt;var zt;(function(st){st[st.JOINING=0]="JOINING",st[st.JOINED=1]="JOINED",st[st.ACTIVE=2]="ACTIVE",st[st.DISCONNECTED=3]="DISCONNECTED",st[st.UNRECOGNIZED=-1]="UNRECOGNIZED"})(zt=a.ParticipantInfo_State||(a.ParticipantInfo_State={}));function Ht(st){switch(st){case 0:case"JOINING":return zt.JOINING;case 1:case"JOINED":return zt.JOINED;case 2:case"ACTIVE":return zt.ACTIVE;case 3:case"DISCONNECTED":return zt.DISCONNECTED;case-1:case"UNRECOGNIZED":default:return zt.UNRECOGNIZED}}a.participantInfo_StateFromJSON=Ht;function ct(st){switch(st){case zt.JOINING:return"JOINING";case zt.JOINED:return"JOINED";case zt.ACTIVE:return"ACTIVE";case zt.DISCONNECTED:return"DISCONNECTED";case zt.UNRECOGNIZED:default:return"UNRECOGNIZED"}}a.participantInfo_StateToJSON=ct;var dt;(function(st){st[st.RELIABLE=0]="RELIABLE",st[st.LOSSY=1]="LOSSY",st[st.UNRECOGNIZED=-1]="UNRECOGNIZED"})(dt=a.DataPacket_Kind||(a.DataPacket_Kind={}));function lt(st){switch(st){case 0:case"RELIABLE":return dt.RELIABLE;case 1:case"LOSSY":return dt.LOSSY;case-1:case"UNRECOGNIZED":default:return dt.UNRECOGNIZED}}a.dataPacket_KindFromJSON=lt;function kt(st){switch(st){case dt.RELIABLE:return"RELIABLE";case dt.LOSSY:return"LOSSY";case dt.UNRECOGNIZED:default:return"UNRECOGNIZED"}}a.dataPacket_KindToJSON=kt;var Lt;(function(st){st[st.Standard=0]="Standard",st[st.Cloud=1]="Cloud",st[st.UNRECOGNIZED=-1]="UNRECOGNIZED"})(Lt=a.ServerInfo_Edition||(a.ServerInfo_Edition={}));function Jt(st){switch(st){case 0:case"Standard":return Lt.Standard;case 1:case"Cloud":return Lt.Cloud;case-1:case"UNRECOGNIZED":default:return Lt.UNRECOGNIZED}}a.serverInfo_EditionFromJSON=Jt;function en(st){switch(st){case Lt.Standard:return"Standard";case Lt.Cloud:return"Cloud";case Lt.UNRECOGNIZED:default:return"UNRECOGNIZED"}}a.serverInfo_EditionToJSON=en;var Qt;(function(st){st[st.UNKNOWN=0]="UNKNOWN",st[st.JS=1]="JS",st[st.SWIFT=2]="SWIFT",st[st.ANDROID=3]="ANDROID",st[st.FLUTTER=4]="FLUTTER",st[st.GO=5]="GO",st[st.UNITY=6]="UNITY",st[st.UNRECOGNIZED=-1]="UNRECOGNIZED"})(Qt=a.ClientInfo_SDK||(a.ClientInfo_SDK={}));function xt(st){switch(st){case 0:case"UNKNOWN":return Qt.UNKNOWN;case 1:case"JS":return Qt.JS;case 2:case"SWIFT":return Qt.SWIFT;case 3:case"ANDROID":return Qt.ANDROID;case 4:case"FLUTTER":return Qt.FLUTTER;case 5:case"GO":return Qt.GO;case 6:case"UNITY":return Qt.UNITY;case-1:case"UNRECOGNIZED":default:return Qt.UNRECOGNIZED}}a.clientInfo_SDKFromJSON=xt;function rn(st){switch(st){case Qt.UNKNOWN:return"UNKNOWN";case Qt.JS:return"JS";case Qt.SWIFT:return"SWIFT";case Qt.ANDROID:return"ANDROID";case Qt.FLUTTER:return"FLUTTER";case Qt.GO:return"GO";case Qt.UNITY:return"UNITY";case Qt.UNRECOGNIZED:default:return"UNRECOGNIZED"}}a.clientInfo_SDKToJSON=rn;function Sn(){return{sid:"",name:"",emptyTimeout:0,maxParticipants:0,creationTime:0,turnPassword:"",enabledCodecs:[],metadata:"",numParticipants:0,activeRecording:!1}}a.Room={encode(st,wt=_.default.Writer.create()){st.sid!==""&&wt.uint32(10).string(st.sid),st.name!==""&&wt.uint32(18).string(st.name),st.emptyTimeout!==0&&wt.uint32(24).uint32(st.emptyTimeout),st.maxParticipants!==0&&wt.uint32(32).uint32(st.maxParticipants),st.creationTime!==0&&wt.uint32(40).int64(st.creationTime),st.turnPassword!==""&&wt.uint32(50).string(st.turnPassword);for(const Ft of st.enabledCodecs)a.Codec.encode(Ft,wt.uint32(58).fork()).ldelim();return st.metadata!==""&&wt.uint32(66).string(st.metadata),st.numParticipants!==0&&wt.uint32(72).uint32(st.numParticipants),st.activeRecording===!0&&wt.uint32(80).bool(st.activeRecording),wt},decode(st,wt){const Ft=st instanceof _.default.Reader?st:new _.default.Reader(st);let ln=wt===void 0?Ft.len:Ft.pos+wt;const jt=Sn();for(;Ft.pos<ln;){const En=Ft.uint32();switch(En>>>3){case 1:jt.sid=Ft.string();break;case 2:jt.name=Ft.string();break;case 3:jt.emptyTimeout=Ft.uint32();break;case 4:jt.maxParticipants=Ft.uint32();break;case 5:jt.creationTime=Ut(Ft.int64());break;case 6:jt.turnPassword=Ft.string();break;case 7:jt.enabledCodecs.push(a.Codec.decode(Ft,Ft.uint32()));break;case 8:jt.metadata=Ft.string();break;case 9:jt.numParticipants=Ft.uint32();break;case 10:jt.activeRecording=Ft.bool();break;default:Ft.skipType(En&7);break}}return jt},fromJSON(st){return{sid:Vt(st.sid)?String(st.sid):"",name:Vt(st.name)?String(st.name):"",emptyTimeout:Vt(st.emptyTimeout)?Number(st.emptyTimeout):0,maxParticipants:Vt(st.maxParticipants)?Number(st.maxParticipants):0,creationTime:Vt(st.creationTime)?Number(st.creationTime):0,turnPassword:Vt(st.turnPassword)?String(st.turnPassword):"",enabledCodecs:Array.isArray(st==null?void 0:st.enabledCodecs)?st.enabledCodecs.map(wt=>a.Codec.fromJSON(wt)):[],metadata:Vt(st.metadata)?String(st.metadata):"",numParticipants:Vt(st.numParticipants)?Number(st.numParticipants):0,activeRecording:Vt(st.activeRecording)?!!st.activeRecording:!1}},toJSON(st){const wt={};return st.sid!==void 0&&(wt.sid=st.sid),st.name!==void 0&&(wt.name=st.name),st.emptyTimeout!==void 0&&(wt.emptyTimeout=Math.round(st.emptyTimeout)),st.maxParticipants!==void 0&&(wt.maxParticipants=Math.round(st.maxParticipants)),st.creationTime!==void 0&&(wt.creationTime=Math.round(st.creationTime)),st.turnPassword!==void 0&&(wt.turnPassword=st.turnPassword),st.enabledCodecs?wt.enabledCodecs=st.enabledCodecs.map(Ft=>Ft?a.Codec.toJSON(Ft):void 0):wt.enabledCodecs=[],st.metadata!==void 0&&(wt.metadata=st.metadata),st.numParticipants!==void 0&&(wt.numParticipants=Math.round(st.numParticipants)),st.activeRecording!==void 0&&(wt.activeRecording=st.activeRecording),wt},fromPartial(st){var wt,Ft,ln,jt,En,Dn,Ln,Jn,zn,mn;const ot=Sn();return ot.sid=(wt=st.sid)!==null&&wt!==void 0?wt:"",ot.name=(Ft=st.name)!==null&&Ft!==void 0?Ft:"",ot.emptyTimeout=(ln=st.emptyTimeout)!==null&&ln!==void 0?ln:0,ot.maxParticipants=(jt=st.maxParticipants)!==null&&jt!==void 0?jt:0,ot.creationTime=(En=st.creationTime)!==null&&En!==void 0?En:0,ot.turnPassword=(Dn=st.turnPassword)!==null&&Dn!==void 0?Dn:"",ot.enabledCodecs=((Ln=st.enabledCodecs)===null||Ln===void 0?void 0:Ln.map(bt=>a.Codec.fromPartial(bt)))||[],ot.metadata=(Jn=st.metadata)!==null&&Jn!==void 0?Jn:"",ot.numParticipants=(zn=st.numParticipants)!==null&&zn!==void 0?zn:0,ot.activeRecording=(mn=st.activeRecording)!==null&&mn!==void 0?mn:!1,ot}};function bn(){return{mime:"",fmtpLine:""}}a.Codec={encode(st,wt=_.default.Writer.create()){return st.mime!==""&&wt.uint32(10).string(st.mime),st.fmtpLine!==""&&wt.uint32(18).string(st.fmtpLine),wt},decode(st,wt){const Ft=st instanceof _.default.Reader?st:new _.default.Reader(st);let ln=wt===void 0?Ft.len:Ft.pos+wt;const jt=bn();for(;Ft.pos<ln;){const En=Ft.uint32();switch(En>>>3){case 1:jt.mime=Ft.string();break;case 2:jt.fmtpLine=Ft.string();break;default:Ft.skipType(En&7);break}}return jt},fromJSON(st){return{mime:Vt(st.mime)?String(st.mime):"",fmtpLine:Vt(st.fmtpLine)?String(st.fmtpLine):""}},toJSON(st){const wt={};return st.mime!==void 0&&(wt.mime=st.mime),st.fmtpLine!==void 0&&(wt.fmtpLine=st.fmtpLine),wt},fromPartial(st){var wt,Ft;const ln=bn();return ln.mime=(wt=st.mime)!==null&&wt!==void 0?wt:"",ln.fmtpLine=(Ft=st.fmtpLine)!==null&&Ft!==void 0?Ft:"",ln}};function kn(){return{canSubscribe:!1,canPublish:!1,canPublishData:!1,hidden:!1,recorder:!1}}a.ParticipantPermission={encode(st,wt=_.default.Writer.create()){return st.canSubscribe===!0&&wt.uint32(8).bool(st.canSubscribe),st.canPublish===!0&&wt.uint32(16).bool(st.canPublish),st.canPublishData===!0&&wt.uint32(24).bool(st.canPublishData),st.hidden===!0&&wt.uint32(56).bool(st.hidden),st.recorder===!0&&wt.uint32(64).bool(st.recorder),wt},decode(st,wt){const Ft=st instanceof _.default.Reader?st:new _.default.Reader(st);let ln=wt===void 0?Ft.len:Ft.pos+wt;const jt=kn();for(;Ft.pos<ln;){const En=Ft.uint32();switch(En>>>3){case 1:jt.canSubscribe=Ft.bool();break;case 2:jt.canPublish=Ft.bool();break;case 3:jt.canPublishData=Ft.bool();break;case 7:jt.hidden=Ft.bool();break;case 8:jt.recorder=Ft.bool();break;default:Ft.skipType(En&7);break}}return jt},fromJSON(st){return{canSubscribe:Vt(st.canSubscribe)?!!st.canSubscribe:!1,canPublish:Vt(st.canPublish)?!!st.canPublish:!1,canPublishData:Vt(st.canPublishData)?!!st.canPublishData:!1,hidden:Vt(st.hidden)?!!st.hidden:!1,recorder:Vt(st.recorder)?!!st.recorder:!1}},toJSON(st){const wt={};return st.canSubscribe!==void 0&&(wt.canSubscribe=st.canSubscribe),st.canPublish!==void 0&&(wt.canPublish=st.canPublish),st.canPublishData!==void 0&&(wt.canPublishData=st.canPublishData),st.hidden!==void 0&&(wt.hidden=st.hidden),st.recorder!==void 0&&(wt.recorder=st.recorder),wt},fromPartial(st){var wt,Ft,ln,jt,En;const Dn=kn();return Dn.canSubscribe=(wt=st.canSubscribe)!==null&&wt!==void 0?wt:!1,Dn.canPublish=(Ft=st.canPublish)!==null&&Ft!==void 0?Ft:!1,Dn.canPublishData=(ln=st.canPublishData)!==null&&ln!==void 0?ln:!1,Dn.hidden=(jt=st.hidden)!==null&&jt!==void 0?jt:!1,Dn.recorder=(En=st.recorder)!==null&&En!==void 0?En:!1,Dn}};function _n(){return{sid:"",identity:"",state:0,tracks:[],metadata:"",joinedAt:0,name:"",version:0,permission:void 0,region:"",isPublisher:!1}}a.ParticipantInfo={encode(st,wt=_.default.Writer.create()){st.sid!==""&&wt.uint32(10).string(st.sid),st.identity!==""&&wt.uint32(18).string(st.identity),st.state!==0&&wt.uint32(24).int32(st.state);for(const Ft of st.tracks)a.TrackInfo.encode(Ft,wt.uint32(34).fork()).ldelim();return st.metadata!==""&&wt.uint32(42).string(st.metadata),st.joinedAt!==0&&wt.uint32(48).int64(st.joinedAt),st.name!==""&&wt.uint32(74).string(st.name),st.version!==0&&wt.uint32(80).uint32(st.version),st.permission!==void 0&&a.ParticipantPermission.encode(st.permission,wt.uint32(90).fork()).ldelim(),st.region!==""&&wt.uint32(98).string(st.region),st.isPublisher===!0&&wt.uint32(104).bool(st.isPublisher),wt},decode(st,wt){const Ft=st instanceof _.default.Reader?st:new _.default.Reader(st);let ln=wt===void 0?Ft.len:Ft.pos+wt;const jt=_n();for(;Ft.pos<ln;){const En=Ft.uint32();switch(En>>>3){case 1:jt.sid=Ft.string();break;case 2:jt.identity=Ft.string();break;case 3:jt.state=Ft.int32();break;case 4:jt.tracks.push(a.TrackInfo.decode(Ft,Ft.uint32()));break;case 5:jt.metadata=Ft.string();break;case 6:jt.joinedAt=Ut(Ft.int64());break;case 9:jt.name=Ft.string();break;case 10:jt.version=Ft.uint32();break;case 11:jt.permission=a.ParticipantPermission.decode(Ft,Ft.uint32());break;case 12:jt.region=Ft.string();break;case 13:jt.isPublisher=Ft.bool();break;default:Ft.skipType(En&7);break}}return jt},fromJSON(st){return{sid:Vt(st.sid)?String(st.sid):"",identity:Vt(st.identity)?String(st.identity):"",state:Vt(st.state)?Ht(st.state):0,tracks:Array.isArray(st==null?void 0:st.tracks)?st.tracks.map(wt=>a.TrackInfo.fromJSON(wt)):[],metadata:Vt(st.metadata)?String(st.metadata):"",joinedAt:Vt(st.joinedAt)?Number(st.joinedAt):0,name:Vt(st.name)?String(st.name):"",version:Vt(st.version)?Number(st.version):0,permission:Vt(st.permission)?a.ParticipantPermission.fromJSON(st.permission):void 0,region:Vt(st.region)?String(st.region):"",isPublisher:Vt(st.isPublisher)?!!st.isPublisher:!1}},toJSON(st){const wt={};return st.sid!==void 0&&(wt.sid=st.sid),st.identity!==void 0&&(wt.identity=st.identity),st.state!==void 0&&(wt.state=ct(st.state)),st.tracks?wt.tracks=st.tracks.map(Ft=>Ft?a.TrackInfo.toJSON(Ft):void 0):wt.tracks=[],st.metadata!==void 0&&(wt.metadata=st.metadata),st.joinedAt!==void 0&&(wt.joinedAt=Math.round(st.joinedAt)),st.name!==void 0&&(wt.name=st.name),st.version!==void 0&&(wt.version=Math.round(st.version)),st.permission!==void 0&&(wt.permission=st.permission?a.ParticipantPermission.toJSON(st.permission):void 0),st.region!==void 0&&(wt.region=st.region),st.isPublisher!==void 0&&(wt.isPublisher=st.isPublisher),wt},fromPartial(st){var wt,Ft,ln,jt,En,Dn,Ln,Jn,zn,mn;const ot=_n();return ot.sid=(wt=st.sid)!==null&&wt!==void 0?wt:"",ot.identity=(Ft=st.identity)!==null&&Ft!==void 0?Ft:"",ot.state=(ln=st.state)!==null&&ln!==void 0?ln:0,ot.tracks=((jt=st.tracks)===null||jt===void 0?void 0:jt.map(bt=>a.TrackInfo.fromPartial(bt)))||[],ot.metadata=(En=st.metadata)!==null&&En!==void 0?En:"",ot.joinedAt=(Dn=st.joinedAt)!==null&&Dn!==void 0?Dn:0,ot.name=(Ln=st.name)!==null&&Ln!==void 0?Ln:"",ot.version=(Jn=st.version)!==null&&Jn!==void 0?Jn:0,ot.permission=st.permission!==void 0&&st.permission!==null?a.ParticipantPermission.fromPartial(st.permission):void 0,ot.region=(zn=st.region)!==null&&zn!==void 0?zn:"",ot.isPublisher=(mn=st.isPublisher)!==null&&mn!==void 0?mn:!1,ot}};function tn(){return{mimeType:"",mid:"",cid:"",layers:[]}}a.SimulcastCodecInfo={encode(st,wt=_.default.Writer.create()){st.mimeType!==""&&wt.uint32(10).string(st.mimeType),st.mid!==""&&wt.uint32(18).string(st.mid),st.cid!==""&&wt.uint32(26).string(st.cid);for(const Ft of st.layers)a.VideoLayer.encode(Ft,wt.uint32(34).fork()).ldelim();return wt},decode(st,wt){const Ft=st instanceof _.default.Reader?st:new _.default.Reader(st);let ln=wt===void 0?Ft.len:Ft.pos+wt;const jt=tn();for(;Ft.pos<ln;){const En=Ft.uint32();switch(En>>>3){case 1:jt.mimeType=Ft.string();break;case 2:jt.mid=Ft.string();break;case 3:jt.cid=Ft.string();break;case 4:jt.layers.push(a.VideoLayer.decode(Ft,Ft.uint32()));break;default:Ft.skipType(En&7);break}}return jt},fromJSON(st){return{mimeType:Vt(st.mimeType)?String(st.mimeType):"",mid:Vt(st.mid)?String(st.mid):"",cid:Vt(st.cid)?String(st.cid):"",layers:Array.isArray(st==null?void 0:st.layers)?st.layers.map(wt=>a.VideoLayer.fromJSON(wt)):[]}},toJSON(st){const wt={};return st.mimeType!==void 0&&(wt.mimeType=st.mimeType),st.mid!==void 0&&(wt.mid=st.mid),st.cid!==void 0&&(wt.cid=st.cid),st.layers?wt.layers=st.layers.map(Ft=>Ft?a.VideoLayer.toJSON(Ft):void 0):wt.layers=[],wt},fromPartial(st){var wt,Ft,ln,jt;const En=tn();return En.mimeType=(wt=st.mimeType)!==null&&wt!==void 0?wt:"",En.mid=(Ft=st.mid)!==null&&Ft!==void 0?Ft:"",En.cid=(ln=st.cid)!==null&&ln!==void 0?ln:"",En.layers=((jt=st.layers)===null||jt===void 0?void 0:jt.map(Dn=>a.VideoLayer.fromPartial(Dn)))||[],En}};function pn(){return{sid:"",type:0,name:"",muted:!1,width:0,height:0,simulcast:!1,disableDtx:!1,source:0,layers:[],mimeType:"",mid:"",codecs:[],stereo:!1,disableRed:!1}}a.TrackInfo={encode(st,wt=_.default.Writer.create()){st.sid!==""&&wt.uint32(10).string(st.sid),st.type!==0&&wt.uint32(16).int32(st.type),st.name!==""&&wt.uint32(26).string(st.name),st.muted===!0&&wt.uint32(32).bool(st.muted),st.width!==0&&wt.uint32(40).uint32(st.width),st.height!==0&&wt.uint32(48).uint32(st.height),st.simulcast===!0&&wt.uint32(56).bool(st.simulcast),st.disableDtx===!0&&wt.uint32(64).bool(st.disableDtx),st.source!==0&&wt.uint32(72).int32(st.source);for(const Ft of st.layers)a.VideoLayer.encode(Ft,wt.uint32(82).fork()).ldelim();st.mimeType!==""&&wt.uint32(90).string(st.mimeType),st.mid!==""&&wt.uint32(98).string(st.mid);for(const Ft of st.codecs)a.SimulcastCodecInfo.encode(Ft,wt.uint32(106).fork()).ldelim();return st.stereo===!0&&wt.uint32(112).bool(st.stereo),st.disableRed===!0&&wt.uint32(120).bool(st.disableRed),wt},decode(st,wt){const Ft=st instanceof _.default.Reader?st:new _.default.Reader(st);let ln=wt===void 0?Ft.len:Ft.pos+wt;const jt=pn();for(;Ft.pos<ln;){const En=Ft.uint32();switch(En>>>3){case 1:jt.sid=Ft.string();break;case 2:jt.type=Ft.int32();break;case 3:jt.name=Ft.string();break;case 4:jt.muted=Ft.bool();break;case 5:jt.width=Ft.uint32();break;case 6:jt.height=Ft.uint32();break;case 7:jt.simulcast=Ft.bool();break;case 8:jt.disableDtx=Ft.bool();break;case 9:jt.source=Ft.int32();break;case 10:jt.layers.push(a.VideoLayer.decode(Ft,Ft.uint32()));break;case 11:jt.mimeType=Ft.string();break;case 12:jt.mid=Ft.string();break;case 13:jt.codecs.push(a.SimulcastCodecInfo.decode(Ft,Ft.uint32()));break;case 14:jt.stereo=Ft.bool();break;case 15:jt.disableRed=Ft.bool();break;default:Ft.skipType(En&7);break}}return jt},fromJSON(st){return{sid:Vt(st.sid)?String(st.sid):"",type:Vt(st.type)?_e(st.type):0,name:Vt(st.name)?String(st.name):"",muted:Vt(st.muted)?!!st.muted:!1,width:Vt(st.width)?Number(st.width):0,height:Vt(st.height)?Number(st.height):0,simulcast:Vt(st.simulcast)?!!st.simulcast:!1,disableDtx:Vt(st.disableDtx)?!!st.disableDtx:!1,source:Vt(st.source)?it(st.source):0,layers:Array.isArray(st==null?void 0:st.layers)?st.layers.map(wt=>a.VideoLayer.fromJSON(wt)):[],mimeType:Vt(st.mimeType)?String(st.mimeType):"",mid:Vt(st.mid)?String(st.mid):"",codecs:Array.isArray(st==null?void 0:st.codecs)?st.codecs.map(wt=>a.SimulcastCodecInfo.fromJSON(wt)):[],stereo:Vt(st.stereo)?!!st.stereo:!1,disableRed:Vt(st.disableRed)?!!st.disableRed:!1}},toJSON(st){const wt={};return st.sid!==void 0&&(wt.sid=st.sid),st.type!==void 0&&(wt.type=et(st.type)),st.name!==void 0&&(wt.name=st.name),st.muted!==void 0&&(wt.muted=st.muted),st.width!==void 0&&(wt.width=Math.round(st.width)),st.height!==void 0&&(wt.height=Math.round(st.height)),st.simulcast!==void 0&&(wt.simulcast=st.simulcast),st.disableDtx!==void 0&&(wt.disableDtx=st.disableDtx),st.source!==void 0&&(wt.source=ft(st.source)),st.layers?wt.layers=st.layers.map(Ft=>Ft?a.VideoLayer.toJSON(Ft):void 0):wt.layers=[],st.mimeType!==void 0&&(wt.mimeType=st.mimeType),st.mid!==void 0&&(wt.mid=st.mid),st.codecs?wt.codecs=st.codecs.map(Ft=>Ft?a.SimulcastCodecInfo.toJSON(Ft):void 0):wt.codecs=[],st.stereo!==void 0&&(wt.stereo=st.stereo),st.disableRed!==void 0&&(wt.disableRed=st.disableRed),wt},fromPartial(st){var wt,Ft,ln,jt,En,Dn,Ln,Jn,zn,mn,ot,bt,Ct,cn,Yt;const dn=pn();return dn.sid=(wt=st.sid)!==null&&wt!==void 0?wt:"",dn.type=(Ft=st.type)!==null&&Ft!==void 0?Ft:0,dn.name=(ln=st.name)!==null&&ln!==void 0?ln:"",dn.muted=(jt=st.muted)!==null&&jt!==void 0?jt:!1,dn.width=(En=st.width)!==null&&En!==void 0?En:0,dn.height=(Dn=st.height)!==null&&Dn!==void 0?Dn:0,dn.simulcast=(Ln=st.simulcast)!==null&&Ln!==void 0?Ln:!1,dn.disableDtx=(Jn=st.disableDtx)!==null&&Jn!==void 0?Jn:!1,dn.source=(zn=st.source)!==null&&zn!==void 0?zn:0,dn.layers=((mn=st.layers)===null||mn===void 0?void 0:mn.map(Bn=>a.VideoLayer.fromPartial(Bn)))||[],dn.mimeType=(ot=st.mimeType)!==null&&ot!==void 0?ot:"",dn.mid=(bt=st.mid)!==null&&bt!==void 0?bt:"",dn.codecs=((Ct=st.codecs)===null||Ct===void 0?void 0:Ct.map(Bn=>a.SimulcastCodecInfo.fromPartial(Bn)))||[],dn.stereo=(cn=st.stereo)!==null&&cn!==void 0?cn:!1,dn.disableRed=(Yt=st.disableRed)!==null&&Yt!==void 0?Yt:!1,dn}};function yn(){return{quality:0,width:0,height:0,bitrate:0,ssrc:0}}a.VideoLayer={encode(st,wt=_.default.Writer.create()){return st.quality!==0&&wt.uint32(8).int32(st.quality),st.width!==0&&wt.uint32(16).uint32(st.width),st.height!==0&&wt.uint32(24).uint32(st.height),st.bitrate!==0&&wt.uint32(32).uint32(st.bitrate),st.ssrc!==0&&wt.uint32(40).uint32(st.ssrc),wt},decode(st,wt){const Ft=st instanceof _.default.Reader?st:new _.default.Reader(st);let ln=wt===void 0?Ft.len:Ft.pos+wt;const jt=yn();for(;Ft.pos<ln;){const En=Ft.uint32();switch(En>>>3){case 1:jt.quality=Ft.int32();break;case 2:jt.width=Ft.uint32();break;case 3:jt.height=Ft.uint32();break;case 4:jt.bitrate=Ft.uint32();break;case 5:jt.ssrc=Ft.uint32();break;default:Ft.skipType(En&7);break}}return jt},fromJSON(st){return{quality:Vt(st.quality)?mt(st.quality):0,width:Vt(st.width)?Number(st.width):0,height:Vt(st.height)?Number(st.height):0,bitrate:Vt(st.bitrate)?Number(st.bitrate):0,ssrc:Vt(st.ssrc)?Number(st.ssrc):0}},toJSON(st){const wt={};return st.quality!==void 0&&(wt.quality=St(st.quality)),st.width!==void 0&&(wt.width=Math.round(st.width)),st.height!==void 0&&(wt.height=Math.round(st.height)),st.bitrate!==void 0&&(wt.bitrate=Math.round(st.bitrate)),st.ssrc!==void 0&&(wt.ssrc=Math.round(st.ssrc)),wt},fromPartial(st){var wt,Ft,ln,jt,En;const Dn=yn();return Dn.quality=(wt=st.quality)!==null&&wt!==void 0?wt:0,Dn.width=(Ft=st.width)!==null&&Ft!==void 0?Ft:0,Dn.height=(ln=st.height)!==null&&ln!==void 0?ln:0,Dn.bitrate=(jt=st.bitrate)!==null&&jt!==void 0?jt:0,Dn.ssrc=(En=st.ssrc)!==null&&En!==void 0?En:0,Dn}};function In(){return{kind:0,user:void 0,speaker:void 0}}a.DataPacket={encode(st,wt=_.default.Writer.create()){return st.kind!==0&&wt.uint32(8).int32(st.kind),st.user!==void 0&&a.UserPacket.encode(st.user,wt.uint32(18).fork()).ldelim(),st.speaker!==void 0&&a.ActiveSpeakerUpdate.encode(st.speaker,wt.uint32(26).fork()).ldelim(),wt},decode(st,wt){const Ft=st instanceof _.default.Reader?st:new _.default.Reader(st);let ln=wt===void 0?Ft.len:Ft.pos+wt;const jt=In();for(;Ft.pos<ln;){const En=Ft.uint32();switch(En>>>3){case 1:jt.kind=Ft.int32();break;case 2:jt.user=a.UserPacket.decode(Ft,Ft.uint32());break;case 3:jt.speaker=a.ActiveSpeakerUpdate.decode(Ft,Ft.uint32());break;default:Ft.skipType(En&7);break}}return jt},fromJSON(st){return{kind:Vt(st.kind)?lt(st.kind):0,user:Vt(st.user)?a.UserPacket.fromJSON(st.user):void 0,speaker:Vt(st.speaker)?a.ActiveSpeakerUpdate.fromJSON(st.speaker):void 0}},toJSON(st){const wt={};return st.kind!==void 0&&(wt.kind=kt(st.kind)),st.user!==void 0&&(wt.user=st.user?a.UserPacket.toJSON(st.user):void 0),st.speaker!==void 0&&(wt.speaker=st.speaker?a.ActiveSpeakerUpdate.toJSON(st.speaker):void 0),wt},fromPartial(st){var wt;const Ft=In();return Ft.kind=(wt=st.kind)!==null&&wt!==void 0?wt:0,Ft.user=st.user!==void 0&&st.user!==null?a.UserPacket.fromPartial(st.user):void 0,Ft.speaker=st.speaker!==void 0&&st.speaker!==null?a.ActiveSpeakerUpdate.fromPartial(st.speaker):void 0,Ft}};function sn(){return{speakers:[]}}a.ActiveSpeakerUpdate={encode(st,wt=_.default.Writer.create()){for(const Ft of st.speakers)a.SpeakerInfo.encode(Ft,wt.uint32(10).fork()).ldelim();return wt},decode(st,wt){const Ft=st instanceof _.default.Reader?st:new _.default.Reader(st);let ln=wt===void 0?Ft.len:Ft.pos+wt;const jt=sn();for(;Ft.pos<ln;){const En=Ft.uint32();switch(En>>>3){case 1:jt.speakers.push(a.SpeakerInfo.decode(Ft,Ft.uint32()));break;default:Ft.skipType(En&7);break}}return jt},fromJSON(st){return{speakers:Array.isArray(st==null?void 0:st.speakers)?st.speakers.map(wt=>a.SpeakerInfo.fromJSON(wt)):[]}},toJSON(st){const wt={};return st.speakers?wt.speakers=st.speakers.map(Ft=>Ft?a.SpeakerInfo.toJSON(Ft):void 0):wt.speakers=[],wt},fromPartial(st){var wt;const Ft=sn();return Ft.speakers=((wt=st.speakers)===null||wt===void 0?void 0:wt.map(ln=>a.SpeakerInfo.fromPartial(ln)))||[],Ft}};function vn(){return{sid:"",level:0,active:!1}}a.SpeakerInfo={encode(st,wt=_.default.Writer.create()){return st.sid!==""&&wt.uint32(10).string(st.sid),st.level!==0&&wt.uint32(21).float(st.level),st.active===!0&&wt.uint32(24).bool(st.active),wt},decode(st,wt){const Ft=st instanceof _.default.Reader?st:new _.default.Reader(st);let ln=wt===void 0?Ft.len:Ft.pos+wt;const jt=vn();for(;Ft.pos<ln;){const En=Ft.uint32();switch(En>>>3){case 1:jt.sid=Ft.string();break;case 2:jt.level=Ft.float();break;case 3:jt.active=Ft.bool();break;default:Ft.skipType(En&7);break}}return jt},fromJSON(st){return{sid:Vt(st.sid)?String(st.sid):"",level:Vt(st.level)?Number(st.level):0,active:Vt(st.active)?!!st.active:!1}},toJSON(st){const wt={};return st.sid!==void 0&&(wt.sid=st.sid),st.level!==void 0&&(wt.level=st.level),st.active!==void 0&&(wt.active=st.active),wt},fromPartial(st){var wt,Ft,ln;const jt=vn();return jt.sid=(wt=st.sid)!==null&&wt!==void 0?wt:"",jt.level=(Ft=st.level)!==null&&Ft!==void 0?Ft:0,jt.active=(ln=st.active)!==null&&ln!==void 0?ln:!1,jt}};function Cn(){return{participantSid:"",payload:new Uint8Array,destinationSids:[]}}a.UserPacket={encode(st,wt=_.default.Writer.create()){st.participantSid!==""&&wt.uint32(10).string(st.participantSid),st.payload.length!==0&&wt.uint32(18).bytes(st.payload);for(const Ft of st.destinationSids)wt.uint32(26).string(Ft);return wt},decode(st,wt){const Ft=st instanceof _.default.Reader?st:new _.default.Reader(st);let ln=wt===void 0?Ft.len:Ft.pos+wt;const jt=Cn();for(;Ft.pos<ln;){const En=Ft.uint32();switch(En>>>3){case 1:jt.participantSid=Ft.string();break;case 2:jt.payload=Ft.bytes();break;case 3:jt.destinationSids.push(Ft.string());break;default:Ft.skipType(En&7);break}}return jt},fromJSON(st){return{participantSid:Vt(st.participantSid)?String(st.participantSid):"",payload:Vt(st.payload)?nn(st.payload):new Uint8Array,destinationSids:Array.isArray(st==null?void 0:st.destinationSids)?st.destinationSids.map(wt=>String(wt)):[]}},toJSON(st){const wt={};return st.participantSid!==void 0&&(wt.participantSid=st.participantSid),st.payload!==void 0&&(wt.payload=gn(st.payload!==void 0?st.payload:new Uint8Array)),st.destinationSids?wt.destinationSids=st.destinationSids.map(Ft=>Ft):wt.destinationSids=[],wt},fromPartial(st){var wt,Ft,ln;const jt=Cn();return jt.participantSid=(wt=st.participantSid)!==null&&wt!==void 0?wt:"",jt.payload=(Ft=st.payload)!==null&&Ft!==void 0?Ft:new Uint8Array,jt.destinationSids=((ln=st.destinationSids)===null||ln===void 0?void 0:ln.map(En=>En))||[],jt}};function Nn(){return{participantSid:"",trackSids:[]}}a.ParticipantTracks={encode(st,wt=_.default.Writer.create()){st.participantSid!==""&&wt.uint32(10).string(st.participantSid);for(const Ft of st.trackSids)wt.uint32(18).string(Ft);return wt},decode(st,wt){const Ft=st instanceof _.default.Reader?st:new _.default.Reader(st);let ln=wt===void 0?Ft.len:Ft.pos+wt;const jt=Nn();for(;Ft.pos<ln;){const En=Ft.uint32();switch(En>>>3){case 1:jt.participantSid=Ft.string();break;case 2:jt.trackSids.push(Ft.string());break;default:Ft.skipType(En&7);break}}return jt},fromJSON(st){return{participantSid:Vt(st.participantSid)?String(st.participantSid):"",trackSids:Array.isArray(st==null?void 0:st.trackSids)?st.trackSids.map(wt=>String(wt)):[]}},toJSON(st){const wt={};return st.participantSid!==void 0&&(wt.participantSid=st.participantSid),st.trackSids?wt.trackSids=st.trackSids.map(Ft=>Ft):wt.trackSids=[],wt},fromPartial(st){var wt,Ft;const ln=Nn();return ln.participantSid=(wt=st.participantSid)!==null&&wt!==void 0?wt:"",ln.trackSids=((Ft=st.trackSids)===null||Ft===void 0?void 0:Ft.map(jt=>jt))||[],ln}};function fn(){return{edition:0,version:"",protocol:0,region:"",nodeId:"",debugInfo:""}}a.ServerInfo={encode(st,wt=_.default.Writer.create()){return st.edition!==0&&wt.uint32(8).int32(st.edition),st.version!==""&&wt.uint32(18).string(st.version),st.protocol!==0&&wt.uint32(24).int32(st.protocol),st.region!==""&&wt.uint32(34).string(st.region),st.nodeId!==""&&wt.uint32(42).string(st.nodeId),st.debugInfo!==""&&wt.uint32(50).string(st.debugInfo),wt},decode(st,wt){const Ft=st instanceof _.default.Reader?st:new _.default.Reader(st);let ln=wt===void 0?Ft.len:Ft.pos+wt;const jt=fn();for(;Ft.pos<ln;){const En=Ft.uint32();switch(En>>>3){case 1:jt.edition=Ft.int32();break;case 2:jt.version=Ft.string();break;case 3:jt.protocol=Ft.int32();break;case 4:jt.region=Ft.string();break;case 5:jt.nodeId=Ft.string();break;case 6:jt.debugInfo=Ft.string();break;default:Ft.skipType(En&7);break}}return jt},fromJSON(st){return{edition:Vt(st.edition)?Jt(st.edition):0,version:Vt(st.version)?String(st.version):"",protocol:Vt(st.protocol)?Number(st.protocol):0,region:Vt(st.region)?String(st.region):"",nodeId:Vt(st.nodeId)?String(st.nodeId):"",debugInfo:Vt(st.debugInfo)?String(st.debugInfo):""}},toJSON(st){const wt={};return st.edition!==void 0&&(wt.edition=en(st.edition)),st.version!==void 0&&(wt.version=st.version),st.protocol!==void 0&&(wt.protocol=Math.round(st.protocol)),st.region!==void 0&&(wt.region=st.region),st.nodeId!==void 0&&(wt.nodeId=st.nodeId),st.debugInfo!==void 0&&(wt.debugInfo=st.debugInfo),wt},fromPartial(st){var wt,Ft,ln,jt,En,Dn;const Ln=fn();return Ln.edition=(wt=st.edition)!==null&&wt!==void 0?wt:0,Ln.version=(Ft=st.version)!==null&&Ft!==void 0?Ft:"",Ln.protocol=(ln=st.protocol)!==null&&ln!==void 0?ln:0,Ln.region=(jt=st.region)!==null&&jt!==void 0?jt:"",Ln.nodeId=(En=st.nodeId)!==null&&En!==void 0?En:"",Ln.debugInfo=(Dn=st.debugInfo)!==null&&Dn!==void 0?Dn:"",Ln}};function ut(){return{sdk:0,version:"",protocol:0,os:"",osVersion:"",deviceModel:"",browser:"",browserVersion:"",address:"",network:""}}a.ClientInfo={encode(st,wt=_.default.Writer.create()){return st.sdk!==0&&wt.uint32(8).int32(st.sdk),st.version!==""&&wt.uint32(18).string(st.version),st.protocol!==0&&wt.uint32(24).int32(st.protocol),st.os!==""&&wt.uint32(34).string(st.os),st.osVersion!==""&&wt.uint32(42).string(st.osVersion),st.deviceModel!==""&&wt.uint32(50).string(st.deviceModel),st.browser!==""&&wt.uint32(58).string(st.browser),st.browserVersion!==""&&wt.uint32(66).string(st.browserVersion),st.address!==""&&wt.uint32(74).string(st.address),st.network!==""&&wt.uint32(82).string(st.network),wt},decode(st,wt){const Ft=st instanceof _.default.Reader?st:new _.default.Reader(st);let ln=wt===void 0?Ft.len:Ft.pos+wt;const jt=ut();for(;Ft.pos<ln;){const En=Ft.uint32();switch(En>>>3){case 1:jt.sdk=Ft.int32();break;case 2:jt.version=Ft.string();break;case 3:jt.protocol=Ft.int32();break;case 4:jt.os=Ft.string();break;case 5:jt.osVersion=Ft.string();break;case 6:jt.deviceModel=Ft.string();break;case 7:jt.browser=Ft.string();break;case 8:jt.browserVersion=Ft.string();break;case 9:jt.address=Ft.string();break;case 10:jt.network=Ft.string();break;default:Ft.skipType(En&7);break}}return jt},fromJSON(st){return{sdk:Vt(st.sdk)?xt(st.sdk):0,version:Vt(st.version)?String(st.version):"",protocol:Vt(st.protocol)?Number(st.protocol):0,os:Vt(st.os)?String(st.os):"",osVersion:Vt(st.osVersion)?String(st.osVersion):"",deviceModel:Vt(st.deviceModel)?String(st.deviceModel):"",browser:Vt(st.browser)?String(st.browser):"",browserVersion:Vt(st.browserVersion)?String(st.browserVersion):"",address:Vt(st.address)?String(st.address):"",network:Vt(st.network)?String(st.network):""}},toJSON(st){const wt={};return st.sdk!==void 0&&(wt.sdk=rn(st.sdk)),st.version!==void 0&&(wt.version=st.version),st.protocol!==void 0&&(wt.protocol=Math.round(st.protocol)),st.os!==void 0&&(wt.os=st.os),st.osVersion!==void 0&&(wt.osVersion=st.osVersion),st.deviceModel!==void 0&&(wt.deviceModel=st.deviceModel),st.browser!==void 0&&(wt.browser=st.browser),st.browserVersion!==void 0&&(wt.browserVersion=st.browserVersion),st.address!==void 0&&(wt.address=st.address),st.network!==void 0&&(wt.network=st.network),wt},fromPartial(st){var wt,Ft,ln,jt,En,Dn,Ln,Jn,zn,mn;const ot=ut();return ot.sdk=(wt=st.sdk)!==null&&wt!==void 0?wt:0,ot.version=(Ft=st.version)!==null&&Ft!==void 0?Ft:"",ot.protocol=(ln=st.protocol)!==null&&ln!==void 0?ln:0,ot.os=(jt=st.os)!==null&&jt!==void 0?jt:"",ot.osVersion=(En=st.osVersion)!==null&&En!==void 0?En:"",ot.deviceModel=(Dn=st.deviceModel)!==null&&Dn!==void 0?Dn:"",ot.browser=(Ln=st.browser)!==null&&Ln!==void 0?Ln:"",ot.browserVersion=(Jn=st.browserVersion)!==null&&Jn!==void 0?Jn:"",ot.address=(zn=st.address)!==null&&zn!==void 0?zn:"",ot.network=(mn=st.network)!==null&&mn!==void 0?mn:"",ot}};function It(){return{video:void 0,screen:void 0,resumeConnection:0,disabledCodecs:void 0,forceRelay:0}}a.ClientConfiguration={encode(st,wt=_.default.Writer.create()){return st.video!==void 0&&a.VideoConfiguration.encode(st.video,wt.uint32(10).fork()).ldelim(),st.screen!==void 0&&a.VideoConfiguration.encode(st.screen,wt.uint32(18).fork()).ldelim(),st.resumeConnection!==0&&wt.uint32(24).int32(st.resumeConnection),st.disabledCodecs!==void 0&&a.DisabledCodecs.encode(st.disabledCodecs,wt.uint32(34).fork()).ldelim(),st.forceRelay!==0&&wt.uint32(40).int32(st.forceRelay),wt},decode(st,wt){const Ft=st instanceof _.default.Reader?st:new _.default.Reader(st);let ln=wt===void 0?Ft.len:Ft.pos+wt;const jt=It();for(;Ft.pos<ln;){const En=Ft.uint32();switch(En>>>3){case 1:jt.video=a.VideoConfiguration.decode(Ft,Ft.uint32());break;case 2:jt.screen=a.VideoConfiguration.decode(Ft,Ft.uint32());break;case 3:jt.resumeConnection=Ft.int32();break;case 4:jt.disabledCodecs=a.DisabledCodecs.decode(Ft,Ft.uint32());break;case 5:jt.forceRelay=Ft.int32();break;default:Ft.skipType(En&7);break}}return jt},fromJSON(st){return{video:Vt(st.video)?a.VideoConfiguration.fromJSON(st.video):void 0,screen:Vt(st.screen)?a.VideoConfiguration.fromJSON(st.screen):void 0,resumeConnection:Vt(st.resumeConnection)?ht(st.resumeConnection):0,disabledCodecs:Vt(st.disabledCodecs)?a.DisabledCodecs.fromJSON(st.disabledCodecs):void 0,forceRelay:Vt(st.forceRelay)?ht(st.forceRelay):0}},toJSON(st){const wt={};return st.video!==void 0&&(wt.video=st.video?a.VideoConfiguration.toJSON(st.video):void 0),st.screen!==void 0&&(wt.screen=st.screen?a.VideoConfiguration.toJSON(st.screen):void 0),st.resumeConnection!==void 0&&(wt.resumeConnection=Et(st.resumeConnection)),st.disabledCodecs!==void 0&&(wt.disabledCodecs=st.disabledCodecs?a.DisabledCodecs.toJSON(st.disabledCodecs):void 0),st.forceRelay!==void 0&&(wt.forceRelay=Et(st.forceRelay)),wt},fromPartial(st){var wt,Ft;const ln=It();return ln.video=st.video!==void 0&&st.video!==null?a.VideoConfiguration.fromPartial(st.video):void 0,ln.screen=st.screen!==void 0&&st.screen!==null?a.VideoConfiguration.fromPartial(st.screen):void 0,ln.resumeConnection=(wt=st.resumeConnection)!==null&&wt!==void 0?wt:0,ln.disabledCodecs=st.disabledCodecs!==void 0&&st.disabledCodecs!==null?a.DisabledCodecs.fromPartial(st.disabledCodecs):void 0,ln.forceRelay=(Ft=st.forceRelay)!==null&&Ft!==void 0?Ft:0,ln}};function Pt(){return{hardwareEncoder:0}}a.VideoConfiguration={encode(st,wt=_.default.Writer.create()){return st.hardwareEncoder!==0&&wt.uint32(8).int32(st.hardwareEncoder),wt},decode(st,wt){const Ft=st instanceof _.default.Reader?st:new _.default.Reader(st);let ln=wt===void 0?Ft.len:Ft.pos+wt;const jt=Pt();for(;Ft.pos<ln;){const En=Ft.uint32();switch(En>>>3){case 1:jt.hardwareEncoder=Ft.int32();break;default:Ft.skipType(En&7);break}}return jt},fromJSON(st){return{hardwareEncoder:Vt(st.hardwareEncoder)?ht(st.hardwareEncoder):0}},toJSON(st){const wt={};return st.hardwareEncoder!==void 0&&(wt.hardwareEncoder=Et(st.hardwareEncoder)),wt},fromPartial(st){var wt;const Ft=Pt();return Ft.hardwareEncoder=(wt=st.hardwareEncoder)!==null&&wt!==void 0?wt:0,Ft}};function Zt(){return{codecs:[]}}a.DisabledCodecs={encode(st,wt=_.default.Writer.create()){for(const Ft of st.codecs)a.Codec.encode(Ft,wt.uint32(10).fork()).ldelim();return wt},decode(st,wt){const Ft=st instanceof _.default.Reader?st:new _.default.Reader(st);let ln=wt===void 0?Ft.len:Ft.pos+wt;const jt=Zt();for(;Ft.pos<ln;){const En=Ft.uint32();switch(En>>>3){case 1:jt.codecs.push(a.Codec.decode(Ft,Ft.uint32()));break;default:Ft.skipType(En&7);break}}return jt},fromJSON(st){return{codecs:Array.isArray(st==null?void 0:st.codecs)?st.codecs.map(wt=>a.Codec.fromJSON(wt)):[]}},toJSON(st){const wt={};return st.codecs?wt.codecs=st.codecs.map(Ft=>Ft?a.Codec.toJSON(Ft):void 0):wt.codecs=[],wt},fromPartial(st){var wt;const Ft=Zt();return Ft.codecs=((wt=st.codecs)===null||wt===void 0?void 0:wt.map(ln=>a.Codec.fromPartial(ln)))||[],Ft}};function Dt(){return{startTime:void 0,endTime:void 0,duration:0,packets:0,packetRate:0,bytes:0,headerBytes:0,bitrate:0,packetsLost:0,packetLossRate:0,packetLossPercentage:0,packetsDuplicate:0,packetDuplicateRate:0,bytesDuplicate:0,headerBytesDuplicate:0,bitrateDuplicate:0,packetsPadding:0,packetPaddingRate:0,bytesPadding:0,headerBytesPadding:0,bitratePadding:0,packetsOutOfOrder:0,frames:0,frameRate:0,jitterCurrent:0,jitterMax:0,gapHistogram:{},nacks:0,nackAcks:0,nackMisses:0,nackRepeated:0,plis:0,lastPli:void 0,firs:0,lastFir:void 0,rttCurrent:0,rttMax:0,keyFrames:0,lastKeyFrame:void 0,layerLockPlis:0,lastLayerLockPli:void 0}}a.RTPStats={encode(st,wt=_.default.Writer.create()){return st.startTime!==void 0&&k.Timestamp.encode(Xt(st.startTime),wt.uint32(10).fork()).ldelim(),st.endTime!==void 0&&k.Timestamp.encode(Xt(st.endTime),wt.uint32(18).fork()).ldelim(),st.duration!==0&&wt.uint32(25).double(st.duration),st.packets!==0&&wt.uint32(32).uint32(st.packets),st.packetRate!==0&&wt.uint32(41).double(st.packetRate),st.bytes!==0&&wt.uint32(48).uint64(st.bytes),st.headerBytes!==0&&wt.uint32(312).uint64(st.headerBytes),st.bitrate!==0&&wt.uint32(57).double(st.bitrate),st.packetsLost!==0&&wt.uint32(64).uint32(st.packetsLost),st.packetLossRate!==0&&wt.uint32(73).double(st.packetLossRate),st.packetLossPercentage!==0&&wt.uint32(85).float(st.packetLossPercentage),st.packetsDuplicate!==0&&wt.uint32(88).uint32(st.packetsDuplicate),st.packetDuplicateRate!==0&&wt.uint32(97).double(st.packetDuplicateRate),st.bytesDuplicate!==0&&wt.uint32(104).uint64(st.bytesDuplicate),st.headerBytesDuplicate!==0&&wt.uint32(320).uint64(st.headerBytesDuplicate),st.bitrateDuplicate!==0&&wt.uint32(113).double(st.bitrateDuplicate),st.packetsPadding!==0&&wt.uint32(120).uint32(st.packetsPadding),st.packetPaddingRate!==0&&wt.uint32(129).double(st.packetPaddingRate),st.bytesPadding!==0&&wt.uint32(136).uint64(st.bytesPadding),st.headerBytesPadding!==0&&wt.uint32(328).uint64(st.headerBytesPadding),st.bitratePadding!==0&&wt.uint32(145).double(st.bitratePadding),st.packetsOutOfOrder!==0&&wt.uint32(152).uint32(st.packetsOutOfOrder),st.frames!==0&&wt.uint32(160).uint32(st.frames),st.frameRate!==0&&wt.uint32(169).double(st.frameRate),st.jitterCurrent!==0&&wt.uint32(177).double(st.jitterCurrent),st.jitterMax!==0&&wt.uint32(185).double(st.jitterMax),Object.entries(st.gapHistogram).forEach(([Ft,ln])=>{a.RTPStats_GapHistogramEntry.encode({key:Ft,value:ln},wt.uint32(194).fork()).ldelim()}),st.nacks!==0&&wt.uint32(200).uint32(st.nacks),st.nackAcks!==0&&wt.uint32(296).uint32(st.nackAcks),st.nackMisses!==0&&wt.uint32(208).uint32(st.nackMisses),st.nackRepeated!==0&&wt.uint32(304).uint32(st.nackRepeated),st.plis!==0&&wt.uint32(216).uint32(st.plis),st.lastPli!==void 0&&k.Timestamp.encode(Xt(st.lastPli),wt.uint32(226).fork()).ldelim(),st.firs!==0&&wt.uint32(232).uint32(st.firs),st.lastFir!==void 0&&k.Timestamp.encode(Xt(st.lastFir),wt.uint32(242).fork()).ldelim(),st.rttCurrent!==0&&wt.uint32(248).uint32(st.rttCurrent),st.rttMax!==0&&wt.uint32(256).uint32(st.rttMax),st.keyFrames!==0&&wt.uint32(264).uint32(st.keyFrames),st.lastKeyFrame!==void 0&&k.Timestamp.encode(Xt(st.lastKeyFrame),wt.uint32(274).fork()).ldelim(),st.layerLockPlis!==0&&wt.uint32(280).uint32(st.layerLockPlis),st.lastLayerLockPli!==void 0&&k.Timestamp.encode(Xt(st.lastLayerLockPli),wt.uint32(290).fork()).ldelim(),wt},decode(st,wt){const Ft=st instanceof _.default.Reader?st:new _.default.Reader(st);let ln=wt===void 0?Ft.len:Ft.pos+wt;const jt=Dt();for(;Ft.pos<ln;){const En=Ft.uint32();switch(En>>>3){case 1:jt.startTime=at(k.Timestamp.decode(Ft,Ft.uint32()));break;case 2:jt.endTime=at(k.Timestamp.decode(Ft,Ft.uint32()));break;case 3:jt.duration=Ft.double();break;case 4:jt.packets=Ft.uint32();break;case 5:jt.packetRate=Ft.double();break;case 6:jt.bytes=Ut(Ft.uint64());break;case 39:jt.headerBytes=Ut(Ft.uint64());break;case 7:jt.bitrate=Ft.double();break;case 8:jt.packetsLost=Ft.uint32();break;case 9:jt.packetLossRate=Ft.double();break;case 10:jt.packetLossPercentage=Ft.float();break;case 11:jt.packetsDuplicate=Ft.uint32();break;case 12:jt.packetDuplicateRate=Ft.double();break;case 13:jt.bytesDuplicate=Ut(Ft.uint64());break;case 40:jt.headerBytesDuplicate=Ut(Ft.uint64());break;case 14:jt.bitrateDuplicate=Ft.double();break;case 15:jt.packetsPadding=Ft.uint32();break;case 16:jt.packetPaddingRate=Ft.double();break;case 17:jt.bytesPadding=Ut(Ft.uint64());break;case 41:jt.headerBytesPadding=Ut(Ft.uint64());break;case 18:jt.bitratePadding=Ft.double();break;case 19:jt.packetsOutOfOrder=Ft.uint32();break;case 20:jt.frames=Ft.uint32();break;case 21:jt.frameRate=Ft.double();break;case 22:jt.jitterCurrent=Ft.double();break;case 23:jt.jitterMax=Ft.double();break;case 24:const Dn=a.RTPStats_GapHistogramEntry.decode(Ft,Ft.uint32());Dn.value!==void 0&&(jt.gapHistogram[Dn.key]=Dn.value);break;case 25:jt.nacks=Ft.uint32();break;case 37:jt.nackAcks=Ft.uint32();break;case 26:jt.nackMisses=Ft.uint32();break;case 38:jt.nackRepeated=Ft.uint32();break;case 27:jt.plis=Ft.uint32();break;case 28:jt.lastPli=at(k.Timestamp.decode(Ft,Ft.uint32()));break;case 29:jt.firs=Ft.uint32();break;case 30:jt.lastFir=at(k.Timestamp.decode(Ft,Ft.uint32()));break;case 31:jt.rttCurrent=Ft.uint32();break;case 32:jt.rttMax=Ft.uint32();break;case 33:jt.keyFrames=Ft.uint32();break;case 34:jt.lastKeyFrame=at(k.Timestamp.decode(Ft,Ft.uint32()));break;case 35:jt.layerLockPlis=Ft.uint32();break;case 36:jt.lastLayerLockPli=at(k.Timestamp.decode(Ft,Ft.uint32()));break;default:Ft.skipType(En&7);break}}return jt},fromJSON(st){return{startTime:Vt(st.startTime)?Rt(st.startTime):void 0,endTime:Vt(st.endTime)?Rt(st.endTime):void 0,duration:Vt(st.duration)?Number(st.duration):0,packets:Vt(st.packets)?Number(st.packets):0,packetRate:Vt(st.packetRate)?Number(st.packetRate):0,bytes:Vt(st.bytes)?Number(st.bytes):0,headerBytes:Vt(st.headerBytes)?Number(st.headerBytes):0,bitrate:Vt(st.bitrate)?Number(st.bitrate):0,packetsLost:Vt(st.packetsLost)?Number(st.packetsLost):0,packetLossRate:Vt(st.packetLossRate)?Number(st.packetLossRate):0,packetLossPercentage:Vt(st.packetLossPercentage)?Number(st.packetLossPercentage):0,packetsDuplicate:Vt(st.packetsDuplicate)?Number(st.packetsDuplicate):0,packetDuplicateRate:Vt(st.packetDuplicateRate)?Number(st.packetDuplicateRate):0,bytesDuplicate:Vt(st.bytesDuplicate)?Number(st.bytesDuplicate):0,headerBytesDuplicate:Vt(st.headerBytesDuplicate)?Number(st.headerBytesDuplicate):0,bitrateDuplicate:Vt(st.bitrateDuplicate)?Number(st.bitrateDuplicate):0,packetsPadding:Vt(st.packetsPadding)?Number(st.packetsPadding):0,packetPaddingRate:Vt(st.packetPaddingRate)?Number(st.packetPaddingRate):0,bytesPadding:Vt(st.bytesPadding)?Number(st.bytesPadding):0,headerBytesPadding:Vt(st.headerBytesPadding)?Number(st.headerBytesPadding):0,bitratePadding:Vt(st.bitratePadding)?Number(st.bitratePadding):0,packetsOutOfOrder:Vt(st.packetsOutOfOrder)?Number(st.packetsOutOfOrder):0,frames:Vt(st.frames)?Number(st.frames):0,frameRate:Vt(st.frameRate)?Number(st.frameRate):0,jitterCurrent:Vt(st.jitterCurrent)?Number(st.jitterCurrent):0,jitterMax:Vt(st.jitterMax)?Number(st.jitterMax):0,gapHistogram:un(st.gapHistogram)?Object.entries(st.gapHistogram).reduce((wt,[Ft,ln])=>(wt[Number(Ft)]=Number(ln),wt),{}):{},nacks:Vt(st.nacks)?Number(st.nacks):0,nackAcks:Vt(st.nackAcks)?Number(st.nackAcks):0,nackMisses:Vt(st.nackMisses)?Number(st.nackMisses):0,nackRepeated:Vt(st.nackRepeated)?Number(st.nackRepeated):0,plis:Vt(st.plis)?Number(st.plis):0,lastPli:Vt(st.lastPli)?Rt(st.lastPli):void 0,firs:Vt(st.firs)?Number(st.firs):0,lastFir:Vt(st.lastFir)?Rt(st.lastFir):void 0,rttCurrent:Vt(st.rttCurrent)?Number(st.rttCurrent):0,rttMax:Vt(st.rttMax)?Number(st.rttMax):0,keyFrames:Vt(st.keyFrames)?Number(st.keyFrames):0,lastKeyFrame:Vt(st.lastKeyFrame)?Rt(st.lastKeyFrame):void 0,layerLockPlis:Vt(st.layerLockPlis)?Number(st.layerLockPlis):0,lastLayerLockPli:Vt(st.lastLayerLockPli)?Rt(st.lastLayerLockPli):void 0}},toJSON(st){const wt={};return st.startTime!==void 0&&(wt.startTime=st.startTime.toISOString()),st.endTime!==void 0&&(wt.endTime=st.endTime.toISOString()),st.duration!==void 0&&(wt.duration=st.duration),st.packets!==void 0&&(wt.packets=Math.round(st.packets)),st.packetRate!==void 0&&(wt.packetRate=st.packetRate),st.bytes!==void 0&&(wt.bytes=Math.round(st.bytes)),st.headerBytes!==void 0&&(wt.headerBytes=Math.round(st.headerBytes)),st.bitrate!==void 0&&(wt.bitrate=st.bitrate),st.packetsLost!==void 0&&(wt.packetsLost=Math.round(st.packetsLost)),st.packetLossRate!==void 0&&(wt.packetLossRate=st.packetLossRate),st.packetLossPercentage!==void 0&&(wt.packetLossPercentage=st.packetLossPercentage),st.packetsDuplicate!==void 0&&(wt.packetsDuplicate=Math.round(st.packetsDuplicate)),st.packetDuplicateRate!==void 0&&(wt.packetDuplicateRate=st.packetDuplicateRate),st.bytesDuplicate!==void 0&&(wt.bytesDuplicate=Math.round(st.bytesDuplicate)),st.headerBytesDuplicate!==void 0&&(wt.headerBytesDuplicate=Math.round(st.headerBytesDuplicate)),st.bitrateDuplicate!==void 0&&(wt.bitrateDuplicate=st.bitrateDuplicate),st.packetsPadding!==void 0&&(wt.packetsPadding=Math.round(st.packetsPadding)),st.packetPaddingRate!==void 0&&(wt.packetPaddingRate=st.packetPaddingRate),st.bytesPadding!==void 0&&(wt.bytesPadding=Math.round(st.bytesPadding)),st.headerBytesPadding!==void 0&&(wt.headerBytesPadding=Math.round(st.headerBytesPadding)),st.bitratePadding!==void 0&&(wt.bitratePadding=st.bitratePadding),st.packetsOutOfOrder!==void 0&&(wt.packetsOutOfOrder=Math.round(st.packetsOutOfOrder)),st.frames!==void 0&&(wt.frames=Math.round(st.frames)),st.frameRate!==void 0&&(wt.frameRate=st.frameRate),st.jitterCurrent!==void 0&&(wt.jitterCurrent=st.jitterCurrent),st.jitterMax!==void 0&&(wt.jitterMax=st.jitterMax),wt.gapHistogram={},st.gapHistogram&&Object.entries(st.gapHistogram).forEach(([Ft,ln])=>{wt.gapHistogram[Ft]=Math.round(ln)}),st.nacks!==void 0&&(wt.nacks=Math.round(st.nacks)),st.nackAcks!==void 0&&(wt.nackAcks=Math.round(st.nackAcks)),st.nackMisses!==void 0&&(wt.nackMisses=Math.round(st.nackMisses)),st.nackRepeated!==void 0&&(wt.nackRepeated=Math.round(st.nackRepeated)),st.plis!==void 0&&(wt.plis=Math.round(st.plis)),st.lastPli!==void 0&&(wt.lastPli=st.lastPli.toISOString()),st.firs!==void 0&&(wt.firs=Math.round(st.firs)),st.lastFir!==void 0&&(wt.lastFir=st.lastFir.toISOString()),st.rttCurrent!==void 0&&(wt.rttCurrent=Math.round(st.rttCurrent)),st.rttMax!==void 0&&(wt.rttMax=Math.round(st.rttMax)),st.keyFrames!==void 0&&(wt.keyFrames=Math.round(st.keyFrames)),st.lastKeyFrame!==void 0&&(wt.lastKeyFrame=st.lastKeyFrame.toISOString()),st.layerLockPlis!==void 0&&(wt.layerLockPlis=Math.round(st.layerLockPlis)),st.lastLayerLockPli!==void 0&&(wt.lastLayerLockPli=st.lastLayerLockPli.toISOString()),wt},fromPartial(st){var wt,Ft,ln,jt,En,Dn,Ln,Jn,zn,mn,ot,bt,Ct,cn,Yt,dn,Bn,Kn,Qn,Vn,qn,Xn,jn,er,tr,Zn,Wn,Mn,ar,dr,cr,lr,ur,fr,pr,hr,Kt,an,hn,Rn,On;const Tn=Dt();return Tn.startTime=(wt=st.startTime)!==null&&wt!==void 0?wt:void 0,Tn.endTime=(Ft=st.endTime)!==null&&Ft!==void 0?Ft:void 0,Tn.duration=(ln=st.duration)!==null&&ln!==void 0?ln:0,Tn.packets=(jt=st.packets)!==null&&jt!==void 0?jt:0,Tn.packetRate=(En=st.packetRate)!==null&&En!==void 0?En:0,Tn.bytes=(Dn=st.bytes)!==null&&Dn!==void 0?Dn:0,Tn.headerBytes=(Ln=st.headerBytes)!==null&&Ln!==void 0?Ln:0,Tn.bitrate=(Jn=st.bitrate)!==null&&Jn!==void 0?Jn:0,Tn.packetsLost=(zn=st.packetsLost)!==null&&zn!==void 0?zn:0,Tn.packetLossRate=(mn=st.packetLossRate)!==null&&mn!==void 0?mn:0,Tn.packetLossPercentage=(ot=st.packetLossPercentage)!==null&&ot!==void 0?ot:0,Tn.packetsDuplicate=(bt=st.packetsDuplicate)!==null&&bt!==void 0?bt:0,Tn.packetDuplicateRate=(Ct=st.packetDuplicateRate)!==null&&Ct!==void 0?Ct:0,Tn.bytesDuplicate=(cn=st.bytesDuplicate)!==null&&cn!==void 0?cn:0,Tn.headerBytesDuplicate=(Yt=st.headerBytesDuplicate)!==null&&Yt!==void 0?Yt:0,Tn.bitrateDuplicate=(dn=st.bitrateDuplicate)!==null&&dn!==void 0?dn:0,Tn.packetsPadding=(Bn=st.packetsPadding)!==null&&Bn!==void 0?Bn:0,Tn.packetPaddingRate=(Kn=st.packetPaddingRate)!==null&&Kn!==void 0?Kn:0,Tn.bytesPadding=(Qn=st.bytesPadding)!==null&&Qn!==void 0?Qn:0,Tn.headerBytesPadding=(Vn=st.headerBytesPadding)!==null&&Vn!==void 0?Vn:0,Tn.bitratePadding=(qn=st.bitratePadding)!==null&&qn!==void 0?qn:0,Tn.packetsOutOfOrder=(Xn=st.packetsOutOfOrder)!==null&&Xn!==void 0?Xn:0,Tn.frames=(jn=st.frames)!==null&&jn!==void 0?jn:0,Tn.frameRate=(er=st.frameRate)!==null&&er!==void 0?er:0,Tn.jitterCurrent=(tr=st.jitterCurrent)!==null&&tr!==void 0?tr:0,Tn.jitterMax=(Zn=st.jitterMax)!==null&&Zn!==void 0?Zn:0,Tn.gapHistogram=Object.entries((Wn=st.gapHistogram)!==null&&Wn!==void 0?Wn:{}).reduce((wn,[Fn,$n])=>($n!==void 0&&(wn[Number(Fn)]=Number($n)),wn),{}),Tn.nacks=(Mn=st.nacks)!==null&&Mn!==void 0?Mn:0,Tn.nackAcks=(ar=st.nackAcks)!==null&&ar!==void 0?ar:0,Tn.nackMisses=(dr=st.nackMisses)!==null&&dr!==void 0?dr:0,Tn.nackRepeated=(cr=st.nackRepeated)!==null&&cr!==void 0?cr:0,Tn.plis=(lr=st.plis)!==null&&lr!==void 0?lr:0,Tn.lastPli=(ur=st.lastPli)!==null&&ur!==void 0?ur:void 0,Tn.firs=(fr=st.firs)!==null&&fr!==void 0?fr:0,Tn.lastFir=(pr=st.lastFir)!==null&&pr!==void 0?pr:void 0,Tn.rttCurrent=(hr=st.rttCurrent)!==null&&hr!==void 0?hr:0,Tn.rttMax=(Kt=st.rttMax)!==null&&Kt!==void 0?Kt:0,Tn.keyFrames=(an=st.keyFrames)!==null&&an!==void 0?an:0,Tn.lastKeyFrame=(hn=st.lastKeyFrame)!==null&&hn!==void 0?hn:void 0,Tn.layerLockPlis=(Rn=st.layerLockPlis)!==null&&Rn!==void 0?Rn:0,Tn.lastLayerLockPli=(On=st.lastLayerLockPli)!==null&&On!==void 0?On:void 0,Tn}};function Ot(){return{key:0,value:0}}a.RTPStats_GapHistogramEntry={encode(st,wt=_.default.Writer.create()){return st.key!==0&&wt.uint32(8).int32(st.key),st.value!==0&&wt.uint32(16).uint32(st.value),wt},decode(st,wt){const Ft=st instanceof _.default.Reader?st:new _.default.Reader(st);let ln=wt===void 0?Ft.len:Ft.pos+wt;const jt=Ot();for(;Ft.pos<ln;){const En=Ft.uint32();switch(En>>>3){case 1:jt.key=Ft.int32();break;case 2:jt.value=Ft.uint32();break;default:Ft.skipType(En&7);break}}return jt},fromJSON(st){return{key:Vt(st.key)?Number(st.key):0,value:Vt(st.value)?Number(st.value):0}},toJSON(st){const wt={};return st.key!==void 0&&(wt.key=Math.round(st.key)),st.value!==void 0&&(wt.value=Math.round(st.value)),wt},fromPartial(st){var wt,Ft;const ln=Ot();return ln.key=(wt=st.key)!==null&&wt!==void 0?wt:0,ln.value=(Ft=st.value)!==null&&Ft!==void 0?Ft:0,ln}};function $t(){return{unixMicro:0,ticks:0}}a.TimedVersion={encode(st,wt=_.default.Writer.create()){return st.unixMicro!==0&&wt.uint32(8).int64(st.unixMicro),st.ticks!==0&&wt.uint32(16).int32(st.ticks),wt},decode(st,wt){const Ft=st instanceof _.default.Reader?st:new _.default.Reader(st);let ln=wt===void 0?Ft.len:Ft.pos+wt;const jt=$t();for(;Ft.pos<ln;){const En=Ft.uint32();switch(En>>>3){case 1:jt.unixMicro=Ut(Ft.int64());break;case 2:jt.ticks=Ft.int32();break;default:Ft.skipType(En&7);break}}return jt},fromJSON(st){return{unixMicro:Vt(st.unixMicro)?Number(st.unixMicro):0,ticks:Vt(st.ticks)?Number(st.ticks):0}},toJSON(st){const wt={};return st.unixMicro!==void 0&&(wt.unixMicro=Math.round(st.unixMicro)),st.ticks!==void 0&&(wt.ticks=Math.round(st.ticks)),wt},fromPartial(st){var wt,Ft;const ln=$t();return ln.unixMicro=(wt=st.unixMicro)!==null&&wt!==void 0?wt:0,ln.ticks=(Ft=st.ticks)!==null&&Ft!==void 0?Ft:0,ln}};var Gt=(()=>{if(typeof Gt<"u")return Gt;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof commonjsGlobal$1<"u")return commonjsGlobal$1;throw"Unable to locate global object"})();function nn(st){if(Gt.Buffer)return Uint8Array.from(Gt.Buffer.from(st,"base64"));{const wt=Gt.atob(st),Ft=new Uint8Array(wt.length);for(let ln=0;ln<wt.length;++ln)Ft[ln]=wt.charCodeAt(ln);return Ft}}function gn(st){if(Gt.Buffer)return Gt.Buffer.from(st).toString("base64");{const wt=[];return st.forEach(Ft=>{wt.push(String.fromCharCode(Ft))}),Gt.btoa(wt.join(""))}}function Xt(st){const wt=st.getTime()/1e3,Ft=st.getTime()%1e3*1e6;return{seconds:wt,nanos:Ft}}function at(st){let wt=st.seconds*1e3;return wt+=st.nanos/1e6,new Date(wt)}function Rt(st){return st instanceof Date?st:typeof st=="string"?new Date(st):at(k.Timestamp.fromJSON(st))}function Ut(st){if(st.gt(Number.MAX_SAFE_INTEGER))throw new Gt.Error("Value is larger than Number.MAX_SAFE_INTEGER");return st.toNumber()}_.default.util.Long!==b.default&&(_.default.util.Long=b.default,_.default.configure());function un(st){return typeof st=="object"&&st!==null}function Vt(st){return st!=null}})(livekit_models);(function(a){var c=commonjsGlobal$1&&commonjsGlobal$1.__importDefault||function(ct){return ct&&ct.__esModule?ct:{default:ct}};Object.defineProperty(a,"__esModule",{value:!0}),a.DeleteIngressRequest=a.ListIngressResponse=a.ListIngressRequest=a.UpdateIngressRequest=a.InputAudioState=a.InputVideoState=a.IngressState=a.IngressInfo=a.IngressVideoOptions=a.IngressAudioOptions=a.CreateIngressRequest=a.ingressState_StatusToJSON=a.ingressState_StatusFromJSON=a.IngressState_Status=a.ingressInputToJSON=a.ingressInputFromJSON=a.IngressInput=a.protobufPackage=void 0;const b=c(umdExports),_=c(minimal),k=livekit_models;a.protobufPackage="livekit";var j;(function(ct){ct[ct.RTMP_INPUT=0]="RTMP_INPUT",ct[ct.UNRECOGNIZED=-1]="UNRECOGNIZED"})(j=a.IngressInput||(a.IngressInput={}));function _e(ct){switch(ct){case 0:case"RTMP_INPUT":return j.RTMP_INPUT;case-1:case"UNRECOGNIZED":default:return j.UNRECOGNIZED}}a.ingressInputFromJSON=_e;function et(ct){switch(ct){case j.RTMP_INPUT:return"RTMP_INPUT";case j.UNRECOGNIZED:default:return"UNRECOGNIZED"}}a.ingressInputToJSON=et;var nt;(function(ct){ct[ct.ENDPOINT_INACTIVE=0]="ENDPOINT_INACTIVE",ct[ct.ENDPOINT_BUFFERING=1]="ENDPOINT_BUFFERING",ct[ct.ENDPOINT_PUBLISHING=2]="ENDPOINT_PUBLISHING",ct[ct.ENDPOINT_ERROR=3]="ENDPOINT_ERROR",ct[ct.UNRECOGNIZED=-1]="UNRECOGNIZED"})(nt=a.IngressState_Status||(a.IngressState_Status={}));function it(ct){switch(ct){case 0:case"ENDPOINT_INACTIVE":return nt.ENDPOINT_INACTIVE;case 1:case"ENDPOINT_BUFFERING":return nt.ENDPOINT_BUFFERING;case 2:case"ENDPOINT_PUBLISHING":return nt.ENDPOINT_PUBLISHING;case 3:case"ENDPOINT_ERROR":return nt.ENDPOINT_ERROR;case-1:case"UNRECOGNIZED":default:return nt.UNRECOGNIZED}}a.ingressState_StatusFromJSON=it;function ft(ct){switch(ct){case nt.ENDPOINT_INACTIVE:return"ENDPOINT_INACTIVE";case nt.ENDPOINT_BUFFERING:return"ENDPOINT_BUFFERING";case nt.ENDPOINT_PUBLISHING:return"ENDPOINT_PUBLISHING";case nt.ENDPOINT_ERROR:return"ENDPOINT_ERROR";case nt.UNRECOGNIZED:default:return"UNRECOGNIZED"}}a.ingressState_StatusToJSON=ft;function pt(){return{inputType:0,name:"",roomName:"",participantIdentity:"",participantName:"",audio:void 0,video:void 0}}a.CreateIngressRequest={encode(ct,dt=_.default.Writer.create()){return ct.inputType!==void 0&&ct.inputType!==0&&dt.uint32(8).int32(ct.inputType),ct.name!==void 0&&ct.name!==""&&dt.uint32(18).string(ct.name),ct.roomName!==void 0&&ct.roomName!==""&&dt.uint32(26).string(ct.roomName),ct.participantIdentity!==void 0&&ct.participantIdentity!==""&&dt.uint32(34).string(ct.participantIdentity),ct.participantName!==void 0&&ct.participantName!==""&&dt.uint32(42).string(ct.participantName),ct.audio!==void 0&&a.IngressAudioOptions.encode(ct.audio,dt.uint32(50).fork()).ldelim(),ct.video!==void 0&&a.IngressVideoOptions.encode(ct.video,dt.uint32(58).fork()).ldelim(),dt},decode(ct,dt){const lt=ct instanceof _.default.Reader?ct:new _.default.Reader(ct);let kt=dt===void 0?lt.len:lt.pos+dt;const Lt=pt();for(;lt.pos<kt;){const Jt=lt.uint32();switch(Jt>>>3){case 1:Lt.inputType=lt.int32();break;case 2:Lt.name=lt.string();break;case 3:Lt.roomName=lt.string();break;case 4:Lt.participantIdentity=lt.string();break;case 5:Lt.participantName=lt.string();break;case 6:Lt.audio=a.IngressAudioOptions.decode(lt,lt.uint32());break;case 7:Lt.video=a.IngressVideoOptions.decode(lt,lt.uint32());break;default:lt.skipType(Jt&7);break}}return Lt},fromJSON(ct){return{inputType:Ht(ct.inputType)?_e(ct.inputType):0,name:Ht(ct.name)?String(ct.name):"",roomName:Ht(ct.roomName)?String(ct.roomName):"",participantIdentity:Ht(ct.participantIdentity)?String(ct.participantIdentity):"",participantName:Ht(ct.participantName)?String(ct.participantName):"",audio:Ht(ct.audio)?a.IngressAudioOptions.fromJSON(ct.audio):void 0,video:Ht(ct.video)?a.IngressVideoOptions.fromJSON(ct.video):void 0}},toJSON(ct){const dt={};return ct.inputType!==void 0&&(dt.inputType=et(ct.inputType)),ct.name!==void 0&&(dt.name=ct.name),ct.roomName!==void 0&&(dt.roomName=ct.roomName),ct.participantIdentity!==void 0&&(dt.participantIdentity=ct.participantIdentity),ct.participantName!==void 0&&(dt.participantName=ct.participantName),ct.audio!==void 0&&(dt.audio=ct.audio?a.IngressAudioOptions.toJSON(ct.audio):void 0),ct.video!==void 0&&(dt.video=ct.video?a.IngressVideoOptions.toJSON(ct.video):void 0),dt},fromPartial(ct){var dt,lt,kt,Lt,Jt;const en=pt();return en.inputType=(dt=ct.inputType)!==null&&dt!==void 0?dt:0,en.name=(lt=ct.name)!==null&&lt!==void 0?lt:"",en.roomName=(kt=ct.roomName)!==null&&kt!==void 0?kt:"",en.participantIdentity=(Lt=ct.participantIdentity)!==null&&Lt!==void 0?Lt:"",en.participantName=(Jt=ct.participantName)!==null&&Jt!==void 0?Jt:"",en.audio=ct.audio!==void 0&&ct.audio!==null?a.IngressAudioOptions.fromPartial(ct.audio):void 0,en.video=ct.video!==void 0&&ct.video!==null?a.IngressVideoOptions.fromPartial(ct.video):void 0,en}};function mt(){return{name:"",source:0,mimeType:"",bitrate:0,disableDtx:!1,channels:0}}a.IngressAudioOptions={encode(ct,dt=_.default.Writer.create()){return ct.name!==void 0&&ct.name!==""&&dt.uint32(10).string(ct.name),ct.source!==void 0&&ct.source!==0&&dt.uint32(16).int32(ct.source),ct.mimeType!==void 0&&ct.mimeType!==""&&dt.uint32(26).string(ct.mimeType),ct.bitrate!==void 0&&ct.bitrate!==0&&dt.uint32(32).uint32(ct.bitrate),ct.disableDtx===!0&&dt.uint32(40).bool(ct.disableDtx),ct.channels!==void 0&&ct.channels!==0&&dt.uint32(48).uint32(ct.channels),dt},decode(ct,dt){const lt=ct instanceof _.default.Reader?ct:new _.default.Reader(ct);let kt=dt===void 0?lt.len:lt.pos+dt;const Lt=mt();for(;lt.pos<kt;){const Jt=lt.uint32();switch(Jt>>>3){case 1:Lt.name=lt.string();break;case 2:Lt.source=lt.int32();break;case 3:Lt.mimeType=lt.string();break;case 4:Lt.bitrate=lt.uint32();break;case 5:Lt.disableDtx=lt.bool();break;case 6:Lt.channels=lt.uint32();break;default:lt.skipType(Jt&7);break}}return Lt},fromJSON(ct){return{name:Ht(ct.name)?String(ct.name):"",source:Ht(ct.source)?k.trackSourceFromJSON(ct.source):0,mimeType:Ht(ct.mimeType)?String(ct.mimeType):"",bitrate:Ht(ct.bitrate)?Number(ct.bitrate):0,disableDtx:Ht(ct.disableDtx)?!!ct.disableDtx:!1,channels:Ht(ct.channels)?Number(ct.channels):0}},toJSON(ct){const dt={};return ct.name!==void 0&&(dt.name=ct.name),ct.source!==void 0&&(dt.source=k.trackSourceToJSON(ct.source)),ct.mimeType!==void 0&&(dt.mimeType=ct.mimeType),ct.bitrate!==void 0&&(dt.bitrate=Math.round(ct.bitrate)),ct.disableDtx!==void 0&&(dt.disableDtx=ct.disableDtx),ct.channels!==void 0&&(dt.channels=Math.round(ct.channels)),dt},fromPartial(ct){var dt,lt,kt,Lt,Jt,en;const Qt=mt();return Qt.name=(dt=ct.name)!==null&&dt!==void 0?dt:"",Qt.source=(lt=ct.source)!==null&&lt!==void 0?lt:0,Qt.mimeType=(kt=ct.mimeType)!==null&&kt!==void 0?kt:"",Qt.bitrate=(Lt=ct.bitrate)!==null&&Lt!==void 0?Lt:0,Qt.disableDtx=(Jt=ct.disableDtx)!==null&&Jt!==void 0?Jt:!1,Qt.channels=(en=ct.channels)!==null&&en!==void 0?en:0,Qt}};function St(){return{name:"",source:0,mimeType:"",layers:[]}}a.IngressVideoOptions={encode(ct,dt=_.default.Writer.create()){if(ct.name!==void 0&&ct.name!==""&&dt.uint32(10).string(ct.name),ct.source!==void 0&&ct.source!==0&&dt.uint32(16).int32(ct.source),ct.mimeType!==void 0&&ct.mimeType!==""&&dt.uint32(26).string(ct.mimeType),ct.layers!==void 0&&ct.layers.length!==0)for(const lt of ct.layers)k.VideoLayer.encode(lt,dt.uint32(34).fork()).ldelim();return dt},decode(ct,dt){const lt=ct instanceof _.default.Reader?ct:new _.default.Reader(ct);let kt=dt===void 0?lt.len:lt.pos+dt;const Lt=St();for(;lt.pos<kt;){const Jt=lt.uint32();switch(Jt>>>3){case 1:Lt.name=lt.string();break;case 2:Lt.source=lt.int32();break;case 3:Lt.mimeType=lt.string();break;case 4:Lt.layers.push(k.VideoLayer.decode(lt,lt.uint32()));break;default:lt.skipType(Jt&7);break}}return Lt},fromJSON(ct){return{name:Ht(ct.name)?String(ct.name):"",source:Ht(ct.source)?k.trackSourceFromJSON(ct.source):0,mimeType:Ht(ct.mimeType)?String(ct.mimeType):"",layers:Array.isArray(ct==null?void 0:ct.layers)?ct.layers.map(dt=>k.VideoLayer.fromJSON(dt)):[]}},toJSON(ct){const dt={};return ct.name!==void 0&&(dt.name=ct.name),ct.source!==void 0&&(dt.source=k.trackSourceToJSON(ct.source)),ct.mimeType!==void 0&&(dt.mimeType=ct.mimeType),ct.layers?dt.layers=ct.layers.map(lt=>lt?k.VideoLayer.toJSON(lt):void 0):dt.layers=[],dt},fromPartial(ct){var dt,lt,kt,Lt;const Jt=St();return Jt.name=(dt=ct.name)!==null&&dt!==void 0?dt:"",Jt.source=(lt=ct.source)!==null&&lt!==void 0?lt:0,Jt.mimeType=(kt=ct.mimeType)!==null&&kt!==void 0?kt:"",Jt.layers=((Lt=ct.layers)===null||Lt===void 0?void 0:Lt.map(en=>k.VideoLayer.fromPartial(en)))||[],Jt}};function yt(){return{ingressId:"",name:"",streamKey:"",url:"",inputType:0,audio:void 0,video:void 0,roomName:"",participantIdentity:"",participantName:"",reusable:!1,state:void 0}}a.IngressInfo={encode(ct,dt=_.default.Writer.create()){return ct.ingressId!==void 0&&ct.ingressId!==""&&dt.uint32(10).string(ct.ingressId),ct.name!==void 0&&ct.name!==""&&dt.uint32(18).string(ct.name),ct.streamKey!==void 0&&ct.streamKey!==""&&dt.uint32(26).string(ct.streamKey),ct.url!==void 0&&ct.url!==""&&dt.uint32(34).string(ct.url),ct.inputType!==void 0&&ct.inputType!==0&&dt.uint32(40).int32(ct.inputType),ct.audio!==void 0&&a.IngressAudioOptions.encode(ct.audio,dt.uint32(50).fork()).ldelim(),ct.video!==void 0&&a.IngressVideoOptions.encode(ct.video,dt.uint32(58).fork()).ldelim(),ct.roomName!==void 0&&ct.roomName!==""&&dt.uint32(66).string(ct.roomName),ct.participantIdentity!==void 0&&ct.participantIdentity!==""&&dt.uint32(74).string(ct.participantIdentity),ct.participantName!==void 0&&ct.participantName!==""&&dt.uint32(82).string(ct.participantName),ct.reusable===!0&&dt.uint32(88).bool(ct.reusable),ct.state!==void 0&&a.IngressState.encode(ct.state,dt.uint32(98).fork()).ldelim(),dt},decode(ct,dt){const lt=ct instanceof _.default.Reader?ct:new _.default.Reader(ct);let kt=dt===void 0?lt.len:lt.pos+dt;const Lt=yt();for(;lt.pos<kt;){const Jt=lt.uint32();switch(Jt>>>3){case 1:Lt.ingressId=lt.string();break;case 2:Lt.name=lt.string();break;case 3:Lt.streamKey=lt.string();break;case 4:Lt.url=lt.string();break;case 5:Lt.inputType=lt.int32();break;case 6:Lt.audio=a.IngressAudioOptions.decode(lt,lt.uint32());break;case 7:Lt.video=a.IngressVideoOptions.decode(lt,lt.uint32());break;case 8:Lt.roomName=lt.string();break;case 9:Lt.participantIdentity=lt.string();break;case 10:Lt.participantName=lt.string();break;case 11:Lt.reusable=lt.bool();break;case 12:Lt.state=a.IngressState.decode(lt,lt.uint32());break;default:lt.skipType(Jt&7);break}}return Lt},fromJSON(ct){return{ingressId:Ht(ct.ingressId)?String(ct.ingressId):"",name:Ht(ct.name)?String(ct.name):"",streamKey:Ht(ct.streamKey)?String(ct.streamKey):"",url:Ht(ct.url)?String(ct.url):"",inputType:Ht(ct.inputType)?_e(ct.inputType):0,audio:Ht(ct.audio)?a.IngressAudioOptions.fromJSON(ct.audio):void 0,video:Ht(ct.video)?a.IngressVideoOptions.fromJSON(ct.video):void 0,roomName:Ht(ct.roomName)?String(ct.roomName):"",participantIdentity:Ht(ct.participantIdentity)?String(ct.participantIdentity):"",participantName:Ht(ct.participantName)?String(ct.participantName):"",reusable:Ht(ct.reusable)?!!ct.reusable:!1,state:Ht(ct.state)?a.IngressState.fromJSON(ct.state):void 0}},toJSON(ct){const dt={};return ct.ingressId!==void 0&&(dt.ingressId=ct.ingressId),ct.name!==void 0&&(dt.name=ct.name),ct.streamKey!==void 0&&(dt.streamKey=ct.streamKey),ct.url!==void 0&&(dt.url=ct.url),ct.inputType!==void 0&&(dt.inputType=et(ct.inputType)),ct.audio!==void 0&&(dt.audio=ct.audio?a.IngressAudioOptions.toJSON(ct.audio):void 0),ct.video!==void 0&&(dt.video=ct.video?a.IngressVideoOptions.toJSON(ct.video):void 0),ct.roomName!==void 0&&(dt.roomName=ct.roomName),ct.participantIdentity!==void 0&&(dt.participantIdentity=ct.participantIdentity),ct.participantName!==void 0&&(dt.participantName=ct.participantName),ct.reusable!==void 0&&(dt.reusable=ct.reusable),ct.state!==void 0&&(dt.state=ct.state?a.IngressState.toJSON(ct.state):void 0),dt},fromPartial(ct){var dt,lt,kt,Lt,Jt,en,Qt,xt,rn;const Sn=yt();return Sn.ingressId=(dt=ct.ingressId)!==null&&dt!==void 0?dt:"",Sn.name=(lt=ct.name)!==null&&lt!==void 0?lt:"",Sn.streamKey=(kt=ct.streamKey)!==null&&kt!==void 0?kt:"",Sn.url=(Lt=ct.url)!==null&&Lt!==void 0?Lt:"",Sn.inputType=(Jt=ct.inputType)!==null&&Jt!==void 0?Jt:0,Sn.audio=ct.audio!==void 0&&ct.audio!==null?a.IngressAudioOptions.fromPartial(ct.audio):void 0,Sn.video=ct.video!==void 0&&ct.video!==null?a.IngressVideoOptions.fromPartial(ct.video):void 0,Sn.roomName=(en=ct.roomName)!==null&&en!==void 0?en:"",Sn.participantIdentity=(Qt=ct.participantIdentity)!==null&&Qt!==void 0?Qt:"",Sn.participantName=(xt=ct.participantName)!==null&&xt!==void 0?xt:"",Sn.reusable=(rn=ct.reusable)!==null&&rn!==void 0?rn:!1,Sn.state=ct.state!==void 0&&ct.state!==null?a.IngressState.fromPartial(ct.state):void 0,Sn}};function _t(){return{status:0,error:"",video:void 0,audio:void 0,roomId:"",startedAt:0,tracks:[]}}a.IngressState={encode(ct,dt=_.default.Writer.create()){if(ct.status!==void 0&&ct.status!==0&&dt.uint32(8).int32(ct.status),ct.error!==void 0&&ct.error!==""&&dt.uint32(18).string(ct.error),ct.video!==void 0&&a.InputVideoState.encode(ct.video,dt.uint32(26).fork()).ldelim(),ct.audio!==void 0&&a.InputAudioState.encode(ct.audio,dt.uint32(34).fork()).ldelim(),ct.roomId!==void 0&&ct.roomId!==""&&dt.uint32(42).string(ct.roomId),ct.startedAt!==void 0&&ct.startedAt!==0&&dt.uint32(56).int64(ct.startedAt),ct.tracks!==void 0&&ct.tracks.length!==0)for(const lt of ct.tracks)k.TrackInfo.encode(lt,dt.uint32(50).fork()).ldelim();return dt},decode(ct,dt){const lt=ct instanceof _.default.Reader?ct:new _.default.Reader(ct);let kt=dt===void 0?lt.len:lt.pos+dt;const Lt=_t();for(;lt.pos<kt;){const Jt=lt.uint32();switch(Jt>>>3){case 1:Lt.status=lt.int32();break;case 2:Lt.error=lt.string();break;case 3:Lt.video=a.InputVideoState.decode(lt,lt.uint32());break;case 4:Lt.audio=a.InputAudioState.decode(lt,lt.uint32());break;case 5:Lt.roomId=lt.string();break;case 7:Lt.startedAt=zt(lt.int64());break;case 6:Lt.tracks.push(k.TrackInfo.decode(lt,lt.uint32()));break;default:lt.skipType(Jt&7);break}}return Lt},fromJSON(ct){return{status:Ht(ct.status)?it(ct.status):0,error:Ht(ct.error)?String(ct.error):"",video:Ht(ct.video)?a.InputVideoState.fromJSON(ct.video):void 0,audio:Ht(ct.audio)?a.InputAudioState.fromJSON(ct.audio):void 0,roomId:Ht(ct.roomId)?String(ct.roomId):"",startedAt:Ht(ct.startedAt)?Number(ct.startedAt):0,tracks:Array.isArray(ct==null?void 0:ct.tracks)?ct.tracks.map(dt=>k.TrackInfo.fromJSON(dt)):[]}},toJSON(ct){const dt={};return ct.status!==void 0&&(dt.status=ft(ct.status)),ct.error!==void 0&&(dt.error=ct.error),ct.video!==void 0&&(dt.video=ct.video?a.InputVideoState.toJSON(ct.video):void 0),ct.audio!==void 0&&(dt.audio=ct.audio?a.InputAudioState.toJSON(ct.audio):void 0),ct.roomId!==void 0&&(dt.roomId=ct.roomId),ct.startedAt!==void 0&&(dt.startedAt=Math.round(ct.startedAt)),ct.tracks?dt.tracks=ct.tracks.map(lt=>lt?k.TrackInfo.toJSON(lt):void 0):dt.tracks=[],dt},fromPartial(ct){var dt,lt,kt,Lt,Jt;const en=_t();return en.status=(dt=ct.status)!==null&&dt!==void 0?dt:0,en.error=(lt=ct.error)!==null&&lt!==void 0?lt:"",en.video=ct.video!==void 0&&ct.video!==null?a.InputVideoState.fromPartial(ct.video):void 0,en.audio=ct.audio!==void 0&&ct.audio!==null?a.InputAudioState.fromPartial(ct.audio):void 0,en.roomId=(kt=ct.roomId)!==null&&kt!==void 0?kt:"",en.startedAt=(Lt=ct.startedAt)!==null&&Lt!==void 0?Lt:0,en.tracks=((Jt=ct.tracks)===null||Jt===void 0?void 0:Jt.map(Qt=>k.TrackInfo.fromPartial(Qt)))||[],en}};function Tt(){return{mimeType:0,width:0,height:0,framerate:0}}a.InputVideoState={encode(ct,dt=_.default.Writer.create()){return ct.mimeType!==void 0&&ct.mimeType!==0&&dt.uint32(8).uint32(ct.mimeType),ct.width!==void 0&&ct.width!==0&&dt.uint32(24).uint32(ct.width),ct.height!==void 0&&ct.height!==0&&dt.uint32(32).uint32(ct.height),ct.framerate!==void 0&&ct.framerate!==0&&dt.uint32(40).uint32(ct.framerate),dt},decode(ct,dt){const lt=ct instanceof _.default.Reader?ct:new _.default.Reader(ct);let kt=dt===void 0?lt.len:lt.pos+dt;const Lt=Tt();for(;lt.pos<kt;){const Jt=lt.uint32();switch(Jt>>>3){case 1:Lt.mimeType=lt.uint32();break;case 3:Lt.width=lt.uint32();break;case 4:Lt.height=lt.uint32();break;case 5:Lt.framerate=lt.uint32();break;default:lt.skipType(Jt&7);break}}return Lt},fromJSON(ct){return{mimeType:Ht(ct.mimeType)?Number(ct.mimeType):0,width:Ht(ct.width)?Number(ct.width):0,height:Ht(ct.height)?Number(ct.height):0,framerate:Ht(ct.framerate)?Number(ct.framerate):0}},toJSON(ct){const dt={};return ct.mimeType!==void 0&&(dt.mimeType=Math.round(ct.mimeType)),ct.width!==void 0&&(dt.width=Math.round(ct.width)),ct.height!==void 0&&(dt.height=Math.round(ct.height)),ct.framerate!==void 0&&(dt.framerate=Math.round(ct.framerate)),dt},fromPartial(ct){var dt,lt,kt,Lt;const Jt=Tt();return Jt.mimeType=(dt=ct.mimeType)!==null&&dt!==void 0?dt:0,Jt.width=(lt=ct.width)!==null&&lt!==void 0?lt:0,Jt.height=(kt=ct.height)!==null&&kt!==void 0?kt:0,Jt.framerate=(Lt=ct.framerate)!==null&&Lt!==void 0?Lt:0,Jt}};function gt(){return{mimeType:0,channels:0,sampleRate:0}}a.InputAudioState={encode(ct,dt=_.default.Writer.create()){return ct.mimeType!==void 0&&ct.mimeType!==0&&dt.uint32(8).uint32(ct.mimeType),ct.channels!==void 0&&ct.channels!==0&&dt.uint32(24).uint32(ct.channels),ct.sampleRate!==void 0&&ct.sampleRate!==0&&dt.uint32(32).uint32(ct.sampleRate),dt},decode(ct,dt){const lt=ct instanceof _.default.Reader?ct:new _.default.Reader(ct);let kt=dt===void 0?lt.len:lt.pos+dt;const Lt=gt();for(;lt.pos<kt;){const Jt=lt.uint32();switch(Jt>>>3){case 1:Lt.mimeType=lt.uint32();break;case 3:Lt.channels=lt.uint32();break;case 4:Lt.sampleRate=lt.uint32();break;default:lt.skipType(Jt&7);break}}return Lt},fromJSON(ct){return{mimeType:Ht(ct.mimeType)?Number(ct.mimeType):0,channels:Ht(ct.channels)?Number(ct.channels):0,sampleRate:Ht(ct.sampleRate)?Number(ct.sampleRate):0}},toJSON(ct){const dt={};return ct.mimeType!==void 0&&(dt.mimeType=Math.round(ct.mimeType)),ct.channels!==void 0&&(dt.channels=Math.round(ct.channels)),ct.sampleRate!==void 0&&(dt.sampleRate=Math.round(ct.sampleRate)),dt},fromPartial(ct){var dt,lt,kt;const Lt=gt();return Lt.mimeType=(dt=ct.mimeType)!==null&&dt!==void 0?dt:0,Lt.channels=(lt=ct.channels)!==null&&lt!==void 0?lt:0,Lt.sampleRate=(kt=ct.sampleRate)!==null&&kt!==void 0?kt:0,Lt}};function ht(){return{ingressId:"",name:"",roomName:"",participantIdentity:"",participantName:"",audio:void 0,video:void 0}}a.UpdateIngressRequest={encode(ct,dt=_.default.Writer.create()){return ct.ingressId!==void 0&&ct.ingressId!==""&&dt.uint32(10).string(ct.ingressId),ct.name!==void 0&&ct.name!==""&&dt.uint32(18).string(ct.name),ct.roomName!==void 0&&ct.roomName!==""&&dt.uint32(26).string(ct.roomName),ct.participantIdentity!==void 0&&ct.participantIdentity!==""&&dt.uint32(34).string(ct.participantIdentity),ct.participantName!==void 0&&ct.participantName!==""&&dt.uint32(42).string(ct.participantName),ct.audio!==void 0&&a.IngressAudioOptions.encode(ct.audio,dt.uint32(50).fork()).ldelim(),ct.video!==void 0&&a.IngressVideoOptions.encode(ct.video,dt.uint32(58).fork()).ldelim(),dt},decode(ct,dt){const lt=ct instanceof _.default.Reader?ct:new _.default.Reader(ct);let kt=dt===void 0?lt.len:lt.pos+dt;const Lt=ht();for(;lt.pos<kt;){const Jt=lt.uint32();switch(Jt>>>3){case 1:Lt.ingressId=lt.string();break;case 2:Lt.name=lt.string();break;case 3:Lt.roomName=lt.string();break;case 4:Lt.participantIdentity=lt.string();break;case 5:Lt.participantName=lt.string();break;case 6:Lt.audio=a.IngressAudioOptions.decode(lt,lt.uint32());break;case 7:Lt.video=a.IngressVideoOptions.decode(lt,lt.uint32());break;default:lt.skipType(Jt&7);break}}return Lt},fromJSON(ct){return{ingressId:Ht(ct.ingressId)?String(ct.ingressId):"",name:Ht(ct.name)?String(ct.name):"",roomName:Ht(ct.roomName)?String(ct.roomName):"",participantIdentity:Ht(ct.participantIdentity)?String(ct.participantIdentity):"",participantName:Ht(ct.participantName)?String(ct.participantName):"",audio:Ht(ct.audio)?a.IngressAudioOptions.fromJSON(ct.audio):void 0,video:Ht(ct.video)?a.IngressVideoOptions.fromJSON(ct.video):void 0}},toJSON(ct){const dt={};return ct.ingressId!==void 0&&(dt.ingressId=ct.ingressId),ct.name!==void 0&&(dt.name=ct.name),ct.roomName!==void 0&&(dt.roomName=ct.roomName),ct.participantIdentity!==void 0&&(dt.participantIdentity=ct.participantIdentity),ct.participantName!==void 0&&(dt.participantName=ct.participantName),ct.audio!==void 0&&(dt.audio=ct.audio?a.IngressAudioOptions.toJSON(ct.audio):void 0),ct.video!==void 0&&(dt.video=ct.video?a.IngressVideoOptions.toJSON(ct.video):void 0),dt},fromPartial(ct){var dt,lt,kt,Lt,Jt;const en=ht();return en.ingressId=(dt=ct.ingressId)!==null&&dt!==void 0?dt:"",en.name=(lt=ct.name)!==null&&lt!==void 0?lt:"",en.roomName=(kt=ct.roomName)!==null&&kt!==void 0?kt:"",en.participantIdentity=(Lt=ct.participantIdentity)!==null&&Lt!==void 0?Lt:"",en.participantName=(Jt=ct.participantName)!==null&&Jt!==void 0?Jt:"",en.audio=ct.audio!==void 0&&ct.audio!==null?a.IngressAudioOptions.fromPartial(ct.audio):void 0,en.video=ct.video!==void 0&&ct.video!==null?a.IngressVideoOptions.fromPartial(ct.video):void 0,en}};function Et(){return{roomName:""}}a.ListIngressRequest={encode(ct,dt=_.default.Writer.create()){return ct.roomName!==void 0&&ct.roomName!==""&&dt.uint32(10).string(ct.roomName),dt},decode(ct,dt){const lt=ct instanceof _.default.Reader?ct:new _.default.Reader(ct);let kt=dt===void 0?lt.len:lt.pos+dt;const Lt=Et();for(;lt.pos<kt;){const Jt=lt.uint32();switch(Jt>>>3){case 1:Lt.roomName=lt.string();break;default:lt.skipType(Jt&7);break}}return Lt},fromJSON(ct){return{roomName:Ht(ct.roomName)?String(ct.roomName):""}},toJSON(ct){const dt={};return ct.roomName!==void 0&&(dt.roomName=ct.roomName),dt},fromPartial(ct){var dt;const lt=Et();return lt.roomName=(dt=ct.roomName)!==null&&dt!==void 0?dt:"",lt}};function At(){return{items:[]}}a.ListIngressResponse={encode(ct,dt=_.default.Writer.create()){if(ct.items!==void 0&&ct.items.length!==0)for(const lt of ct.items)a.IngressInfo.encode(lt,dt.uint32(10).fork()).ldelim();return dt},decode(ct,dt){const lt=ct instanceof _.default.Reader?ct:new _.default.Reader(ct);let kt=dt===void 0?lt.len:lt.pos+dt;const Lt=At();for(;lt.pos<kt;){const Jt=lt.uint32();switch(Jt>>>3){case 1:Lt.items.push(a.IngressInfo.decode(lt,lt.uint32()));break;default:lt.skipType(Jt&7);break}}return Lt},fromJSON(ct){return{items:Array.isArray(ct==null?void 0:ct.items)?ct.items.map(dt=>a.IngressInfo.fromJSON(dt)):[]}},toJSON(ct){const dt={};return ct.items?dt.items=ct.items.map(lt=>lt?a.IngressInfo.toJSON(lt):void 0):dt.items=[],dt},fromPartial(ct){var dt;const lt=At();return lt.items=((dt=ct.items)===null||dt===void 0?void 0:dt.map(kt=>a.IngressInfo.fromPartial(kt)))||[],lt}};function Bt(){return{ingressId:""}}a.DeleteIngressRequest={encode(ct,dt=_.default.Writer.create()){return ct.ingressId!==void 0&&ct.ingressId!==""&&dt.uint32(10).string(ct.ingressId),dt},decode(ct,dt){const lt=ct instanceof _.default.Reader?ct:new _.default.Reader(ct);let kt=dt===void 0?lt.len:lt.pos+dt;const Lt=Bt();for(;lt.pos<kt;){const Jt=lt.uint32();switch(Jt>>>3){case 1:Lt.ingressId=lt.string();break;default:lt.skipType(Jt&7);break}}return Lt},fromJSON(ct){return{ingressId:Ht(ct.ingressId)?String(ct.ingressId):""}},toJSON(ct){const dt={};return ct.ingressId!==void 0&&(dt.ingressId=ct.ingressId),dt},fromPartial(ct){var dt;const lt=Bt();return lt.ingressId=(dt=ct.ingressId)!==null&&dt!==void 0?dt:"",lt}};var qt=(()=>{if(typeof qt<"u")return qt;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof commonjsGlobal$1<"u")return commonjsGlobal$1;throw"Unable to locate global object"})();function zt(ct){if(ct.gt(Number.MAX_SAFE_INTEGER))throw new qt.Error("Value is larger than Number.MAX_SAFE_INTEGER");return ct.toNumber()}_.default.util.Long!==b.default&&(_.default.util.Long=b.default,_.default.configure());function Ht(ct){return ct!=null}})(livekit_ingress);var __awaiter$2=commonjsGlobal$1&&commonjsGlobal$1.__awaiter||function(a,c,b,_){function k(j){return j instanceof b?j:new b(function(_e){_e(j)})}return new(b||(b=Promise))(function(j,_e){function et(ft){try{it(_.next(ft))}catch(pt){_e(pt)}}function nt(ft){try{it(_.throw(ft))}catch(pt){_e(pt)}}function it(ft){ft.done?j(ft.value):k(ft.value).then(et,nt)}it((_=_.apply(a,c||[])).next())})},__importDefault$3=commonjsGlobal$1&&commonjsGlobal$1.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(IngressClient$1,"__esModule",{value:!0});IngressClient$1.IngressClient=void 0;const livekit_ingress_1$1=livekit_ingress,ServiceBase_1$1=__importDefault$3(ServiceBase$1),TwirpRPC_1$1=TwirpRPC,svc$1="Ingress";class IngressClient extends ServiceBase_1$1.default{constructor(c,b,_){super(b,_),this.rpc=new TwirpRPC_1$1.TwirpRpc(c,TwirpRPC_1$1.livekitPackage)}createIngress(c,b){return __awaiter$2(this,void 0,void 0,function*(){let _="",k="",j="",_e="",et,nt;b!==void 0&&(_=b.name||"",k=b.roomName||"",j=b.participantName||"",_e=b.participantIdentity||"",et=b.audioParams,nt=b.videoParams);const it=livekit_ingress_1$1.CreateIngressRequest.toJSON({inputType:c,name:_,roomName:k,participantIdentity:_e,participantName:j,audio:et,video:nt}),ft=yield this.rpc.request(svc$1,"CreateIngress",it,this.authHeader({ingressAdmin:!0}));return livekit_ingress_1$1.IngressInfo.fromJSON(ft)})}updateIngress(c,b){return __awaiter$2(this,void 0,void 0,function*(){const _=b.name||"",k=b.roomName||"",j=b.participantName||"",_e=b.participantIdentity||"",et=b.audioParams,nt=b.videoParams,it=livekit_ingress_1$1.UpdateIngressRequest.toJSON({ingressId:c,name:_,roomName:k,participantIdentity:_e,participantName:j,audio:et,video:nt}),ft=yield this.rpc.request(svc$1,"UpdateIngress",it,this.authHeader({ingressAdmin:!0}));return livekit_ingress_1$1.IngressInfo.fromJSON(ft)})}listIngress(c){var b;return __awaiter$2(this,void 0,void 0,function*(){c??(c="");const _=yield this.rpc.request(svc$1,"ListIngress",livekit_ingress_1$1.ListIngressRequest.toJSON({roomName:c}),this.authHeader({ingressAdmin:!0}));return(b=livekit_ingress_1$1.ListIngressResponse.fromJSON(_).items)!==null&&b!==void 0?b:[]})}deleteIngress(c){return __awaiter$2(this,void 0,void 0,function*(){const b=yield this.rpc.request(svc$1,"DeleteIngress",livekit_ingress_1$1.DeleteIngressRequest.toJSON({ingressId:c}),this.authHeader({ingressAdmin:!0}));return livekit_ingress_1$1.IngressInfo.fromJSON(b)})}}IngressClient$1.IngressClient=IngressClient;var RoomServiceClient$1={},livekit_room={};(function(a){var c=commonjsGlobal$1&&commonjsGlobal$1.__importDefault||function(lt){return lt&&lt.__esModule?lt:{default:lt}};Object.defineProperty(a,"__esModule",{value:!0}),a.UpdateRoomMetadataRequest=a.SendDataResponse=a.SendDataRequest=a.UpdateSubscriptionsResponse=a.UpdateSubscriptionsRequest=a.UpdateParticipantRequest=a.MuteRoomTrackResponse=a.MuteRoomTrackRequest=a.RemoveParticipantResponse=a.RoomParticipantIdentity=a.ListParticipantsResponse=a.ListParticipantsRequest=a.DeleteRoomResponse=a.DeleteRoomRequest=a.ListRoomsResponse=a.ListRoomsRequest=a.RoomEgress=a.CreateRoomRequest=a.protobufPackage=void 0;const b=c(minimal),_=livekit_egress,k=livekit_models;a.protobufPackage="livekit";function j(){return{name:"",emptyTimeout:0,maxParticipants:0,nodeId:"",metadata:"",egress:void 0}}a.CreateRoomRequest={encode(lt,kt=b.default.Writer.create()){return lt.name!==void 0&&lt.name!==""&&kt.uint32(10).string(lt.name),lt.emptyTimeout!==void 0&&lt.emptyTimeout!==0&&kt.uint32(16).uint32(lt.emptyTimeout),lt.maxParticipants!==void 0&&lt.maxParticipants!==0&&kt.uint32(24).uint32(lt.maxParticipants),lt.nodeId!==void 0&&lt.nodeId!==""&&kt.uint32(34).string(lt.nodeId),lt.metadata!==void 0&&lt.metadata!==""&&kt.uint32(42).string(lt.metadata),lt.egress!==void 0&&a.RoomEgress.encode(lt.egress,kt.uint32(50).fork()).ldelim(),kt},decode(lt,kt){const Lt=lt instanceof b.default.Reader?lt:new b.default.Reader(lt);let Jt=kt===void 0?Lt.len:Lt.pos+kt;const en=j();for(;Lt.pos<Jt;){const Qt=Lt.uint32();switch(Qt>>>3){case 1:en.name=Lt.string();break;case 2:en.emptyTimeout=Lt.uint32();break;case 3:en.maxParticipants=Lt.uint32();break;case 4:en.nodeId=Lt.string();break;case 5:en.metadata=Lt.string();break;case 6:en.egress=a.RoomEgress.decode(Lt,Lt.uint32());break;default:Lt.skipType(Qt&7);break}}return en},fromJSON(lt){return{name:dt(lt.name)?String(lt.name):"",emptyTimeout:dt(lt.emptyTimeout)?Number(lt.emptyTimeout):0,maxParticipants:dt(lt.maxParticipants)?Number(lt.maxParticipants):0,nodeId:dt(lt.nodeId)?String(lt.nodeId):"",metadata:dt(lt.metadata)?String(lt.metadata):"",egress:dt(lt.egress)?a.RoomEgress.fromJSON(lt.egress):void 0}},toJSON(lt){const kt={};return lt.name!==void 0&&(kt.name=lt.name),lt.emptyTimeout!==void 0&&(kt.emptyTimeout=Math.round(lt.emptyTimeout)),lt.maxParticipants!==void 0&&(kt.maxParticipants=Math.round(lt.maxParticipants)),lt.nodeId!==void 0&&(kt.nodeId=lt.nodeId),lt.metadata!==void 0&&(kt.metadata=lt.metadata),lt.egress!==void 0&&(kt.egress=lt.egress?a.RoomEgress.toJSON(lt.egress):void 0),kt},fromPartial(lt){var kt,Lt,Jt,en,Qt;const xt=j();return xt.name=(kt=lt.name)!==null&&kt!==void 0?kt:"",xt.emptyTimeout=(Lt=lt.emptyTimeout)!==null&&Lt!==void 0?Lt:0,xt.maxParticipants=(Jt=lt.maxParticipants)!==null&&Jt!==void 0?Jt:0,xt.nodeId=(en=lt.nodeId)!==null&&en!==void 0?en:"",xt.metadata=(Qt=lt.metadata)!==null&&Qt!==void 0?Qt:"",xt.egress=lt.egress!==void 0&&lt.egress!==null?a.RoomEgress.fromPartial(lt.egress):void 0,xt}};function _e(){return{room:void 0,tracks:void 0}}a.RoomEgress={encode(lt,kt=b.default.Writer.create()){return lt.room!==void 0&&_.RoomCompositeEgressRequest.encode(lt.room,kt.uint32(10).fork()).ldelim(),lt.tracks!==void 0&&_.AutoTrackEgress.encode(lt.tracks,kt.uint32(18).fork()).ldelim(),kt},decode(lt,kt){const Lt=lt instanceof b.default.Reader?lt:new b.default.Reader(lt);let Jt=kt===void 0?Lt.len:Lt.pos+kt;const en=_e();for(;Lt.pos<Jt;){const Qt=Lt.uint32();switch(Qt>>>3){case 1:en.room=_.RoomCompositeEgressRequest.decode(Lt,Lt.uint32());break;case 2:en.tracks=_.AutoTrackEgress.decode(Lt,Lt.uint32());break;default:Lt.skipType(Qt&7);break}}return en},fromJSON(lt){return{room:dt(lt.room)?_.RoomCompositeEgressRequest.fromJSON(lt.room):void 0,tracks:dt(lt.tracks)?_.AutoTrackEgress.fromJSON(lt.tracks):void 0}},toJSON(lt){const kt={};return lt.room!==void 0&&(kt.room=lt.room?_.RoomCompositeEgressRequest.toJSON(lt.room):void 0),lt.tracks!==void 0&&(kt.tracks=lt.tracks?_.AutoTrackEgress.toJSON(lt.tracks):void 0),kt},fromPartial(lt){const kt=_e();return kt.room=lt.room!==void 0&&lt.room!==null?_.RoomCompositeEgressRequest.fromPartial(lt.room):void 0,kt.tracks=lt.tracks!==void 0&&lt.tracks!==null?_.AutoTrackEgress.fromPartial(lt.tracks):void 0,kt}};function et(){return{names:[]}}a.ListRoomsRequest={encode(lt,kt=b.default.Writer.create()){if(lt.names!==void 0&&lt.names.length!==0)for(const Lt of lt.names)kt.uint32(10).string(Lt);return kt},decode(lt,kt){const Lt=lt instanceof b.default.Reader?lt:new b.default.Reader(lt);let Jt=kt===void 0?Lt.len:Lt.pos+kt;const en=et();for(;Lt.pos<Jt;){const Qt=Lt.uint32();switch(Qt>>>3){case 1:en.names.push(Lt.string());break;default:Lt.skipType(Qt&7);break}}return en},fromJSON(lt){return{names:Array.isArray(lt==null?void 0:lt.names)?lt.names.map(kt=>String(kt)):[]}},toJSON(lt){const kt={};return lt.names?kt.names=lt.names.map(Lt=>Lt):kt.names=[],kt},fromPartial(lt){var kt;const Lt=et();return Lt.names=((kt=lt.names)===null||kt===void 0?void 0:kt.map(Jt=>Jt))||[],Lt}};function nt(){return{rooms:[]}}a.ListRoomsResponse={encode(lt,kt=b.default.Writer.create()){if(lt.rooms!==void 0&&lt.rooms.length!==0)for(const Lt of lt.rooms)k.Room.encode(Lt,kt.uint32(10).fork()).ldelim();return kt},decode(lt,kt){const Lt=lt instanceof b.default.Reader?lt:new b.default.Reader(lt);let Jt=kt===void 0?Lt.len:Lt.pos+kt;const en=nt();for(;Lt.pos<Jt;){const Qt=Lt.uint32();switch(Qt>>>3){case 1:en.rooms.push(k.Room.decode(Lt,Lt.uint32()));break;default:Lt.skipType(Qt&7);break}}return en},fromJSON(lt){return{rooms:Array.isArray(lt==null?void 0:lt.rooms)?lt.rooms.map(kt=>k.Room.fromJSON(kt)):[]}},toJSON(lt){const kt={};return lt.rooms?kt.rooms=lt.rooms.map(Lt=>Lt?k.Room.toJSON(Lt):void 0):kt.rooms=[],kt},fromPartial(lt){var kt;const Lt=nt();return Lt.rooms=((kt=lt.rooms)===null||kt===void 0?void 0:kt.map(Jt=>k.Room.fromPartial(Jt)))||[],Lt}};function it(){return{room:""}}a.DeleteRoomRequest={encode(lt,kt=b.default.Writer.create()){return lt.room!==void 0&&lt.room!==""&&kt.uint32(10).string(lt.room),kt},decode(lt,kt){const Lt=lt instanceof b.default.Reader?lt:new b.default.Reader(lt);let Jt=kt===void 0?Lt.len:Lt.pos+kt;const en=it();for(;Lt.pos<Jt;){const Qt=Lt.uint32();switch(Qt>>>3){case 1:en.room=Lt.string();break;default:Lt.skipType(Qt&7);break}}return en},fromJSON(lt){return{room:dt(lt.room)?String(lt.room):""}},toJSON(lt){const kt={};return lt.room!==void 0&&(kt.room=lt.room),kt},fromPartial(lt){var kt;const Lt=it();return Lt.room=(kt=lt.room)!==null&&kt!==void 0?kt:"",Lt}};function ft(){return{}}a.DeleteRoomResponse={encode(lt,kt=b.default.Writer.create()){return kt},decode(lt,kt){const Lt=lt instanceof b.default.Reader?lt:new b.default.Reader(lt);let Jt=kt===void 0?Lt.len:Lt.pos+kt;const en=ft();for(;Lt.pos<Jt;){const Qt=Lt.uint32();switch(Qt>>>3){default:Lt.skipType(Qt&7);break}}return en},fromJSON(lt){return{}},toJSON(lt){return{}},fromPartial(lt){return ft()}};function pt(){return{room:""}}a.ListParticipantsRequest={encode(lt,kt=b.default.Writer.create()){return lt.room!==void 0&&lt.room!==""&&kt.uint32(10).string(lt.room),kt},decode(lt,kt){const Lt=lt instanceof b.default.Reader?lt:new b.default.Reader(lt);let Jt=kt===void 0?Lt.len:Lt.pos+kt;const en=pt();for(;Lt.pos<Jt;){const Qt=Lt.uint32();switch(Qt>>>3){case 1:en.room=Lt.string();break;default:Lt.skipType(Qt&7);break}}return en},fromJSON(lt){return{room:dt(lt.room)?String(lt.room):""}},toJSON(lt){const kt={};return lt.room!==void 0&&(kt.room=lt.room),kt},fromPartial(lt){var kt;const Lt=pt();return Lt.room=(kt=lt.room)!==null&&kt!==void 0?kt:"",Lt}};function mt(){return{participants:[]}}a.ListParticipantsResponse={encode(lt,kt=b.default.Writer.create()){if(lt.participants!==void 0&&lt.participants.length!==0)for(const Lt of lt.participants)k.ParticipantInfo.encode(Lt,kt.uint32(10).fork()).ldelim();return kt},decode(lt,kt){const Lt=lt instanceof b.default.Reader?lt:new b.default.Reader(lt);let Jt=kt===void 0?Lt.len:Lt.pos+kt;const en=mt();for(;Lt.pos<Jt;){const Qt=Lt.uint32();switch(Qt>>>3){case 1:en.participants.push(k.ParticipantInfo.decode(Lt,Lt.uint32()));break;default:Lt.skipType(Qt&7);break}}return en},fromJSON(lt){return{participants:Array.isArray(lt==null?void 0:lt.participants)?lt.participants.map(kt=>k.ParticipantInfo.fromJSON(kt)):[]}},toJSON(lt){const kt={};return lt.participants?kt.participants=lt.participants.map(Lt=>Lt?k.ParticipantInfo.toJSON(Lt):void 0):kt.participants=[],kt},fromPartial(lt){var kt;const Lt=mt();return Lt.participants=((kt=lt.participants)===null||kt===void 0?void 0:kt.map(Jt=>k.ParticipantInfo.fromPartial(Jt)))||[],Lt}};function St(){return{room:"",identity:""}}a.RoomParticipantIdentity={encode(lt,kt=b.default.Writer.create()){return lt.room!==void 0&&lt.room!==""&&kt.uint32(10).string(lt.room),lt.identity!==void 0&&lt.identity!==""&&kt.uint32(18).string(lt.identity),kt},decode(lt,kt){const Lt=lt instanceof b.default.Reader?lt:new b.default.Reader(lt);let Jt=kt===void 0?Lt.len:Lt.pos+kt;const en=St();for(;Lt.pos<Jt;){const Qt=Lt.uint32();switch(Qt>>>3){case 1:en.room=Lt.string();break;case 2:en.identity=Lt.string();break;default:Lt.skipType(Qt&7);break}}return en},fromJSON(lt){return{room:dt(lt.room)?String(lt.room):"",identity:dt(lt.identity)?String(lt.identity):""}},toJSON(lt){const kt={};return lt.room!==void 0&&(kt.room=lt.room),lt.identity!==void 0&&(kt.identity=lt.identity),kt},fromPartial(lt){var kt,Lt;const Jt=St();return Jt.room=(kt=lt.room)!==null&&kt!==void 0?kt:"",Jt.identity=(Lt=lt.identity)!==null&&Lt!==void 0?Lt:"",Jt}};function yt(){return{}}a.RemoveParticipantResponse={encode(lt,kt=b.default.Writer.create()){return kt},decode(lt,kt){const Lt=lt instanceof b.default.Reader?lt:new b.default.Reader(lt);let Jt=kt===void 0?Lt.len:Lt.pos+kt;const en=yt();for(;Lt.pos<Jt;){const Qt=Lt.uint32();switch(Qt>>>3){default:Lt.skipType(Qt&7);break}}return en},fromJSON(lt){return{}},toJSON(lt){return{}},fromPartial(lt){return yt()}};function _t(){return{room:"",identity:"",trackSid:"",muted:!1}}a.MuteRoomTrackRequest={encode(lt,kt=b.default.Writer.create()){return lt.room!==void 0&&lt.room!==""&&kt.uint32(10).string(lt.room),lt.identity!==void 0&&lt.identity!==""&&kt.uint32(18).string(lt.identity),lt.trackSid!==void 0&&lt.trackSid!==""&&kt.uint32(26).string(lt.trackSid),lt.muted===!0&&kt.uint32(32).bool(lt.muted),kt},decode(lt,kt){const Lt=lt instanceof b.default.Reader?lt:new b.default.Reader(lt);let Jt=kt===void 0?Lt.len:Lt.pos+kt;const en=_t();for(;Lt.pos<Jt;){const Qt=Lt.uint32();switch(Qt>>>3){case 1:en.room=Lt.string();break;case 2:en.identity=Lt.string();break;case 3:en.trackSid=Lt.string();break;case 4:en.muted=Lt.bool();break;default:Lt.skipType(Qt&7);break}}return en},fromJSON(lt){return{room:dt(lt.room)?String(lt.room):"",identity:dt(lt.identity)?String(lt.identity):"",trackSid:dt(lt.trackSid)?String(lt.trackSid):"",muted:dt(lt.muted)?!!lt.muted:!1}},toJSON(lt){const kt={};return lt.room!==void 0&&(kt.room=lt.room),lt.identity!==void 0&&(kt.identity=lt.identity),lt.trackSid!==void 0&&(kt.trackSid=lt.trackSid),lt.muted!==void 0&&(kt.muted=lt.muted),kt},fromPartial(lt){var kt,Lt,Jt,en;const Qt=_t();return Qt.room=(kt=lt.room)!==null&&kt!==void 0?kt:"",Qt.identity=(Lt=lt.identity)!==null&&Lt!==void 0?Lt:"",Qt.trackSid=(Jt=lt.trackSid)!==null&&Jt!==void 0?Jt:"",Qt.muted=(en=lt.muted)!==null&&en!==void 0?en:!1,Qt}};function Tt(){return{track:void 0}}a.MuteRoomTrackResponse={encode(lt,kt=b.default.Writer.create()){return lt.track!==void 0&&k.TrackInfo.encode(lt.track,kt.uint32(10).fork()).ldelim(),kt},decode(lt,kt){const Lt=lt instanceof b.default.Reader?lt:new b.default.Reader(lt);let Jt=kt===void 0?Lt.len:Lt.pos+kt;const en=Tt();for(;Lt.pos<Jt;){const Qt=Lt.uint32();switch(Qt>>>3){case 1:en.track=k.TrackInfo.decode(Lt,Lt.uint32());break;default:Lt.skipType(Qt&7);break}}return en},fromJSON(lt){return{track:dt(lt.track)?k.TrackInfo.fromJSON(lt.track):void 0}},toJSON(lt){const kt={};return lt.track!==void 0&&(kt.track=lt.track?k.TrackInfo.toJSON(lt.track):void 0),kt},fromPartial(lt){const kt=Tt();return kt.track=lt.track!==void 0&&lt.track!==null?k.TrackInfo.fromPartial(lt.track):void 0,kt}};function gt(){return{room:"",identity:"",metadata:"",permission:void 0,name:""}}a.UpdateParticipantRequest={encode(lt,kt=b.default.Writer.create()){return lt.room!==void 0&&lt.room!==""&&kt.uint32(10).string(lt.room),lt.identity!==void 0&&lt.identity!==""&&kt.uint32(18).string(lt.identity),lt.metadata!==void 0&&lt.metadata!==""&&kt.uint32(26).string(lt.metadata),lt.permission!==void 0&&k.ParticipantPermission.encode(lt.permission,kt.uint32(34).fork()).ldelim(),lt.name!==void 0&&lt.name!==""&&kt.uint32(42).string(lt.name),kt},decode(lt,kt){const Lt=lt instanceof b.default.Reader?lt:new b.default.Reader(lt);let Jt=kt===void 0?Lt.len:Lt.pos+kt;const en=gt();for(;Lt.pos<Jt;){const Qt=Lt.uint32();switch(Qt>>>3){case 1:en.room=Lt.string();break;case 2:en.identity=Lt.string();break;case 3:en.metadata=Lt.string();break;case 4:en.permission=k.ParticipantPermission.decode(Lt,Lt.uint32());break;case 5:en.name=Lt.string();break;default:Lt.skipType(Qt&7);break}}return en},fromJSON(lt){return{room:dt(lt.room)?String(lt.room):"",identity:dt(lt.identity)?String(lt.identity):"",metadata:dt(lt.metadata)?String(lt.metadata):"",permission:dt(lt.permission)?k.ParticipantPermission.fromJSON(lt.permission):void 0,name:dt(lt.name)?String(lt.name):""}},toJSON(lt){const kt={};return lt.room!==void 0&&(kt.room=lt.room),lt.identity!==void 0&&(kt.identity=lt.identity),lt.metadata!==void 0&&(kt.metadata=lt.metadata),lt.permission!==void 0&&(kt.permission=lt.permission?k.ParticipantPermission.toJSON(lt.permission):void 0),lt.name!==void 0&&(kt.name=lt.name),kt},fromPartial(lt){var kt,Lt,Jt,en;const Qt=gt();return Qt.room=(kt=lt.room)!==null&&kt!==void 0?kt:"",Qt.identity=(Lt=lt.identity)!==null&&Lt!==void 0?Lt:"",Qt.metadata=(Jt=lt.metadata)!==null&&Jt!==void 0?Jt:"",Qt.permission=lt.permission!==void 0&&lt.permission!==null?k.ParticipantPermission.fromPartial(lt.permission):void 0,Qt.name=(en=lt.name)!==null&&en!==void 0?en:"",Qt}};function ht(){return{room:"",identity:"",trackSids:[],subscribe:!1,participantTracks:[]}}a.UpdateSubscriptionsRequest={encode(lt,kt=b.default.Writer.create()){if(lt.room!==void 0&&lt.room!==""&&kt.uint32(10).string(lt.room),lt.identity!==void 0&&lt.identity!==""&&kt.uint32(18).string(lt.identity),lt.trackSids!==void 0&&lt.trackSids.length!==0)for(const Lt of lt.trackSids)kt.uint32(26).string(Lt);if(lt.subscribe===!0&&kt.uint32(32).bool(lt.subscribe),lt.participantTracks!==void 0&&lt.participantTracks.length!==0)for(const Lt of lt.participantTracks)k.ParticipantTracks.encode(Lt,kt.uint32(42).fork()).ldelim();return kt},decode(lt,kt){const Lt=lt instanceof b.default.Reader?lt:new b.default.Reader(lt);let Jt=kt===void 0?Lt.len:Lt.pos+kt;const en=ht();for(;Lt.pos<Jt;){const Qt=Lt.uint32();switch(Qt>>>3){case 1:en.room=Lt.string();break;case 2:en.identity=Lt.string();break;case 3:en.trackSids.push(Lt.string());break;case 4:en.subscribe=Lt.bool();break;case 5:en.participantTracks.push(k.ParticipantTracks.decode(Lt,Lt.uint32()));break;default:Lt.skipType(Qt&7);break}}return en},fromJSON(lt){return{room:dt(lt.room)?String(lt.room):"",identity:dt(lt.identity)?String(lt.identity):"",trackSids:Array.isArray(lt==null?void 0:lt.trackSids)?lt.trackSids.map(kt=>String(kt)):[],subscribe:dt(lt.subscribe)?!!lt.subscribe:!1,participantTracks:Array.isArray(lt==null?void 0:lt.participantTracks)?lt.participantTracks.map(kt=>k.ParticipantTracks.fromJSON(kt)):[]}},toJSON(lt){const kt={};return lt.room!==void 0&&(kt.room=lt.room),lt.identity!==void 0&&(kt.identity=lt.identity),lt.trackSids?kt.trackSids=lt.trackSids.map(Lt=>Lt):kt.trackSids=[],lt.subscribe!==void 0&&(kt.subscribe=lt.subscribe),lt.participantTracks?kt.participantTracks=lt.participantTracks.map(Lt=>Lt?k.ParticipantTracks.toJSON(Lt):void 0):kt.participantTracks=[],kt},fromPartial(lt){var kt,Lt,Jt,en,Qt;const xt=ht();return xt.room=(kt=lt.room)!==null&&kt!==void 0?kt:"",xt.identity=(Lt=lt.identity)!==null&&Lt!==void 0?Lt:"",xt.trackSids=((Jt=lt.trackSids)===null||Jt===void 0?void 0:Jt.map(rn=>rn))||[],xt.subscribe=(en=lt.subscribe)!==null&&en!==void 0?en:!1,xt.participantTracks=((Qt=lt.participantTracks)===null||Qt===void 0?void 0:Qt.map(rn=>k.ParticipantTracks.fromPartial(rn)))||[],xt}};function Et(){return{}}a.UpdateSubscriptionsResponse={encode(lt,kt=b.default.Writer.create()){return kt},decode(lt,kt){const Lt=lt instanceof b.default.Reader?lt:new b.default.Reader(lt);let Jt=kt===void 0?Lt.len:Lt.pos+kt;const en=Et();for(;Lt.pos<Jt;){const Qt=Lt.uint32();switch(Qt>>>3){default:Lt.skipType(Qt&7);break}}return en},fromJSON(lt){return{}},toJSON(lt){return{}},fromPartial(lt){return Et()}};function At(){return{room:"",data:new Uint8Array,kind:0,destinationSids:[]}}a.SendDataRequest={encode(lt,kt=b.default.Writer.create()){if(lt.room!==void 0&&lt.room!==""&&kt.uint32(10).string(lt.room),lt.data!==void 0&&lt.data.length!==0&&kt.uint32(18).bytes(lt.data),lt.kind!==void 0&&lt.kind!==0&&kt.uint32(24).int32(lt.kind),lt.destinationSids!==void 0&&lt.destinationSids.length!==0)for(const Lt of lt.destinationSids)kt.uint32(34).string(Lt);return kt},decode(lt,kt){const Lt=lt instanceof b.default.Reader?lt:new b.default.Reader(lt);let Jt=kt===void 0?Lt.len:Lt.pos+kt;const en=At();for(;Lt.pos<Jt;){const Qt=Lt.uint32();switch(Qt>>>3){case 1:en.room=Lt.string();break;case 2:en.data=Lt.bytes();break;case 3:en.kind=Lt.int32();break;case 4:en.destinationSids.push(Lt.string());break;default:Lt.skipType(Qt&7);break}}return en},fromJSON(lt){return{room:dt(lt.room)?String(lt.room):"",data:dt(lt.data)?Ht(lt.data):new Uint8Array,kind:dt(lt.kind)?k.dataPacket_KindFromJSON(lt.kind):0,destinationSids:Array.isArray(lt==null?void 0:lt.destinationSids)?lt.destinationSids.map(kt=>String(kt)):[]}},toJSON(lt){const kt={};return lt.room!==void 0&&(kt.room=lt.room),lt.data!==void 0&&(kt.data=ct(lt.data!==void 0?lt.data:new Uint8Array)),lt.kind!==void 0&&(kt.kind=k.dataPacket_KindToJSON(lt.kind)),lt.destinationSids?kt.destinationSids=lt.destinationSids.map(Lt=>Lt):kt.destinationSids=[],kt},fromPartial(lt){var kt,Lt,Jt,en;const Qt=At();return Qt.room=(kt=lt.room)!==null&&kt!==void 0?kt:"",Qt.data=(Lt=lt.data)!==null&&Lt!==void 0?Lt:new Uint8Array,Qt.kind=(Jt=lt.kind)!==null&&Jt!==void 0?Jt:0,Qt.destinationSids=((en=lt.destinationSids)===null||en===void 0?void 0:en.map(xt=>xt))||[],Qt}};function Bt(){return{}}a.SendDataResponse={encode(lt,kt=b.default.Writer.create()){return kt},decode(lt,kt){const Lt=lt instanceof b.default.Reader?lt:new b.default.Reader(lt);let Jt=kt===void 0?Lt.len:Lt.pos+kt;const en=Bt();for(;Lt.pos<Jt;){const Qt=Lt.uint32();switch(Qt>>>3){default:Lt.skipType(Qt&7);break}}return en},fromJSON(lt){return{}},toJSON(lt){return{}},fromPartial(lt){return Bt()}};function qt(){return{room:"",metadata:""}}a.UpdateRoomMetadataRequest={encode(lt,kt=b.default.Writer.create()){return lt.room!==void 0&&lt.room!==""&&kt.uint32(10).string(lt.room),lt.metadata!==void 0&&lt.metadata!==""&&kt.uint32(18).string(lt.metadata),kt},decode(lt,kt){const Lt=lt instanceof b.default.Reader?lt:new b.default.Reader(lt);let Jt=kt===void 0?Lt.len:Lt.pos+kt;const en=qt();for(;Lt.pos<Jt;){const Qt=Lt.uint32();switch(Qt>>>3){case 1:en.room=Lt.string();break;case 2:en.metadata=Lt.string();break;default:Lt.skipType(Qt&7);break}}return en},fromJSON(lt){return{room:dt(lt.room)?String(lt.room):"",metadata:dt(lt.metadata)?String(lt.metadata):""}},toJSON(lt){const kt={};return lt.room!==void 0&&(kt.room=lt.room),lt.metadata!==void 0&&(kt.metadata=lt.metadata),kt},fromPartial(lt){var kt,Lt;const Jt=qt();return Jt.room=(kt=lt.room)!==null&&kt!==void 0?kt:"",Jt.metadata=(Lt=lt.metadata)!==null&&Lt!==void 0?Lt:"",Jt}};var zt=(()=>{if(typeof zt<"u")return zt;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof commonjsGlobal$1<"u")return commonjsGlobal$1;throw"Unable to locate global object"})();function Ht(lt){if(zt.Buffer)return Uint8Array.from(zt.Buffer.from(lt,"base64"));{const kt=zt.atob(lt),Lt=new Uint8Array(kt.length);for(let Jt=0;Jt<kt.length;++Jt)Lt[Jt]=kt.charCodeAt(Jt);return Lt}}function ct(lt){if(zt.Buffer)return zt.Buffer.from(lt).toString("base64");{const kt=[];return lt.forEach(Lt=>{kt.push(String.fromCharCode(Lt))}),zt.btoa(kt.join(""))}}function dt(lt){return lt!=null}})(livekit_room);var __awaiter$1=commonjsGlobal$1&&commonjsGlobal$1.__awaiter||function(a,c,b,_){function k(j){return j instanceof b?j:new b(function(_e){_e(j)})}return new(b||(b=Promise))(function(j,_e){function et(ft){try{it(_.next(ft))}catch(pt){_e(pt)}}function nt(ft){try{it(_.throw(ft))}catch(pt){_e(pt)}}function it(ft){ft.done?j(ft.value):k(ft.value).then(et,nt)}it((_=_.apply(a,c||[])).next())})},__importDefault$2=commonjsGlobal$1&&commonjsGlobal$1.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(RoomServiceClient$1,"__esModule",{value:!0});RoomServiceClient$1.RoomServiceClient=void 0;const livekit_models_1$1=livekit_models,livekit_room_1=livekit_room,ServiceBase_1=__importDefault$2(ServiceBase$1),TwirpRPC_1=TwirpRPC,svc="RoomService";class RoomServiceClient extends ServiceBase_1.default{constructor(c,b,_,k,j){super(b,_),this.jwt=k,this.rpc=new TwirpRPC_1.TwirpRpc(c,TwirpRPC_1.livekitPackage,void 0,j)}createRoom(c){return __awaiter$1(this,void 0,void 0,function*(){const b=yield this.rpc.request(svc,"CreateRoom",livekit_room_1.CreateRoomRequest.toJSON(livekit_room_1.CreateRoomRequest.fromPartial(c)),this.authHeader({roomCreate:!0}));return livekit_models_1$1.Room.fromJSON(b)})}listRooms(c){var b;return __awaiter$1(this,void 0,void 0,function*(){const _=yield this.rpc.request(svc,"ListRooms",livekit_room_1.ListRoomsRequest.toJSON({names:c??[]}),this.authHeader({roomList:!0}));return(b=livekit_room_1.ListRoomsResponse.fromJSON(_).rooms)!==null&&b!==void 0?b:[]})}deleteRoom(c){return __awaiter$1(this,void 0,void 0,function*(){yield this.rpc.request(svc,"DeleteRoom",livekit_room_1.DeleteRoomRequest.toJSON({room:c}),this.authHeader({roomCreate:!0}))})}updateRoomMetadata(c,b){return __awaiter$1(this,void 0,void 0,function*(){const _=yield this.rpc.request(svc,"UpdateRoomMetadata",livekit_room_1.UpdateRoomMetadataRequest.toJSON({room:c,metadata:b}),this.authHeader({roomAdmin:!0,room:c}));return livekit_models_1$1.Room.fromJSON(_)})}listParticipants(c){var b;return __awaiter$1(this,void 0,void 0,function*(){const _=yield this.rpc.request(svc,"ListParticipants",livekit_room_1.ListParticipantsRequest.toJSON({room:c}),this.authHeader({roomAdmin:!0,room:c}));return(b=livekit_room_1.ListParticipantsResponse.fromJSON(_).participants)!==null&&b!==void 0?b:[]})}getParticipant(c,b){return __awaiter$1(this,void 0,void 0,function*(){const _=yield this.rpc.request(svc,"GetParticipant",livekit_room_1.RoomParticipantIdentity.toJSON({room:c,identity:b}),this.authHeader({roomAdmin:!0,room:c}));return livekit_models_1$1.ParticipantInfo.fromJSON(_)})}removeParticipant(c,b){return __awaiter$1(this,void 0,void 0,function*(){yield this.rpc.request(svc,"RemoveParticipant",livekit_room_1.RoomParticipantIdentity.toJSON({room:c,identity:b}),this.authHeader({roomAdmin:!0,room:c}))})}mutePublishedTrack(c,b,_,k){return __awaiter$1(this,void 0,void 0,function*(){const j=livekit_room_1.MuteRoomTrackRequest.toJSON({room:c,identity:b,trackSid:_,muted:k}),_e=yield this.rpc.request(svc,"MutePublishedTrack",j,this.authHeader({roomAdmin:!0,room:c}));return livekit_room_1.MuteRoomTrackResponse.fromJSON(_e).track})}updateParticipant(c,b,_,k,j){return __awaiter$1(this,void 0,void 0,function*(){const _e={room:c,identity:b,metadata:_||"",permission:k,name:j||""},et=yield this.rpc.request(svc,"UpdateParticipant",livekit_room_1.UpdateParticipantRequest.toJSON(_e),this.authHeader({roomAdmin:!0,room:c}));return livekit_models_1$1.ParticipantInfo.fromJSON(et)})}updateSubscriptions(c,b,_,k){return __awaiter$1(this,void 0,void 0,function*(){const j=livekit_room_1.UpdateSubscriptionsRequest.toJSON({room:c,identity:b,trackSids:_,subscribe:k,participantTracks:[]});yield this.rpc.request(svc,"UpdateSubscriptions",j,this.authHeader({roomAdmin:!0,room:c}))})}sendData(c,b,_,k=[]){return __awaiter$1(this,void 0,void 0,function*(){const j=livekit_room_1.SendDataRequest.toJSON({room:c,data:b,kind:_,destinationSids:k});yield this.rpc.request(svc,"SendData",j,this.authHeader({roomAdmin:!0,room:c}))})}authHeader(c){return this.jwt?{Authorization:`Bearer ${this.jwt}`}:super.authHeader(c)}}RoomServiceClient$1.RoomServiceClient=RoomServiceClient;var WebhookReceiver$1={},livekit_webhook={},__importDefault$1=commonjsGlobal$1&&commonjsGlobal$1.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(livekit_webhook,"__esModule",{value:!0});livekit_webhook.WebhookEvent=livekit_webhook.protobufPackage=void 0;const long_1=__importDefault$1(umdExports),minimal_1=__importDefault$1(minimal),livekit_egress_1=livekit_egress,livekit_ingress_1=livekit_ingress,livekit_models_1=livekit_models;livekit_webhook.protobufPackage="livekit";function createBaseWebhookEvent(){return{event:"",room:void 0,participant:void 0,egressInfo:void 0,ingressInfo:void 0,track:void 0,id:"",createdAt:0}}livekit_webhook.WebhookEvent={encode(a,c=minimal_1.default.Writer.create()){return a.event!==void 0&&a.event!==""&&c.uint32(10).string(a.event),a.room!==void 0&&livekit_models_1.Room.encode(a.room,c.uint32(18).fork()).ldelim(),a.participant!==void 0&&livekit_models_1.ParticipantInfo.encode(a.participant,c.uint32(26).fork()).ldelim(),a.egressInfo!==void 0&&livekit_egress_1.EgressInfo.encode(a.egressInfo,c.uint32(74).fork()).ldelim(),a.ingressInfo!==void 0&&livekit_ingress_1.IngressInfo.encode(a.ingressInfo,c.uint32(82).fork()).ldelim(),a.track!==void 0&&livekit_models_1.TrackInfo.encode(a.track,c.uint32(66).fork()).ldelim(),a.id!==void 0&&a.id!==""&&c.uint32(50).string(a.id),a.createdAt!==void 0&&a.createdAt!==0&&c.uint32(56).int64(a.createdAt),c},decode(a,c){const b=a instanceof minimal_1.default.Reader?a:new minimal_1.default.Reader(a);let _=c===void 0?b.len:b.pos+c;const k=createBaseWebhookEvent();for(;b.pos<_;){const j=b.uint32();switch(j>>>3){case 1:k.event=b.string();break;case 2:k.room=livekit_models_1.Room.decode(b,b.uint32());break;case 3:k.participant=livekit_models_1.ParticipantInfo.decode(b,b.uint32());break;case 9:k.egressInfo=livekit_egress_1.EgressInfo.decode(b,b.uint32());break;case 10:k.ingressInfo=livekit_ingress_1.IngressInfo.decode(b,b.uint32());break;case 8:k.track=livekit_models_1.TrackInfo.decode(b,b.uint32());break;case 6:k.id=b.string();break;case 7:k.createdAt=longToNumber(b.int64());break;default:b.skipType(j&7);break}}return k},fromJSON(a){return{event:isSet(a.event)?String(a.event):"",room:isSet(a.room)?livekit_models_1.Room.fromJSON(a.room):void 0,participant:isSet(a.participant)?livekit_models_1.ParticipantInfo.fromJSON(a.participant):void 0,egressInfo:isSet(a.egressInfo)?livekit_egress_1.EgressInfo.fromJSON(a.egressInfo):void 0,ingressInfo:isSet(a.ingressInfo)?livekit_ingress_1.IngressInfo.fromJSON(a.ingressInfo):void 0,track:isSet(a.track)?livekit_models_1.TrackInfo.fromJSON(a.track):void 0,id:isSet(a.id)?String(a.id):"",createdAt:isSet(a.createdAt)?Number(a.createdAt):0}},toJSON(a){const c={};return a.event!==void 0&&(c.event=a.event),a.room!==void 0&&(c.room=a.room?livekit_models_1.Room.toJSON(a.room):void 0),a.participant!==void 0&&(c.participant=a.participant?livekit_models_1.ParticipantInfo.toJSON(a.participant):void 0),a.egressInfo!==void 0&&(c.egressInfo=a.egressInfo?livekit_egress_1.EgressInfo.toJSON(a.egressInfo):void 0),a.ingressInfo!==void 0&&(c.ingressInfo=a.ingressInfo?livekit_ingress_1.IngressInfo.toJSON(a.ingressInfo):void 0),a.track!==void 0&&(c.track=a.track?livekit_models_1.TrackInfo.toJSON(a.track):void 0),a.id!==void 0&&(c.id=a.id),a.createdAt!==void 0&&(c.createdAt=Math.round(a.createdAt)),c},fromPartial(a){var c,b,_;const k=createBaseWebhookEvent();return k.event=(c=a.event)!==null&&c!==void 0?c:"",k.room=a.room!==void 0&&a.room!==null?livekit_models_1.Room.fromPartial(a.room):void 0,k.participant=a.participant!==void 0&&a.participant!==null?livekit_models_1.ParticipantInfo.fromPartial(a.participant):void 0,k.egressInfo=a.egressInfo!==void 0&&a.egressInfo!==null?livekit_egress_1.EgressInfo.fromPartial(a.egressInfo):void 0,k.ingressInfo=a.ingressInfo!==void 0&&a.ingressInfo!==null?livekit_ingress_1.IngressInfo.fromPartial(a.ingressInfo):void 0,k.track=a.track!==void 0&&a.track!==null?livekit_models_1.TrackInfo.fromPartial(a.track):void 0,k.id=(b=a.id)!==null&&b!==void 0?b:"",k.createdAt=(_=a.createdAt)!==null&&_!==void 0?_:0,k}};var globalThis$1=(()=>{if(typeof globalThis$1<"u")return globalThis$1;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof commonjsGlobal$1<"u")return commonjsGlobal$1;throw"Unable to locate global object"})();function longToNumber(a){if(a.gt(Number.MAX_SAFE_INTEGER))throw new globalThis$1.Error("Value is larger than Number.MAX_SAFE_INTEGER");return a.toNumber()}minimal_1.default.util.Long!==long_1.default&&(minimal_1.default.util.Long=long_1.default,minimal_1.default.configure());function isSet(a){return a!=null}var __importDefault=commonjsGlobal$1&&commonjsGlobal$1.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(WebhookReceiver$1,"__esModule",{value:!0});WebhookReceiver$1.WebhookReceiver=WebhookReceiver$1.authorizeHeader=void 0;const crypto_1=__importDefault(require$$0$1),AccessToken_1=AccessToken$1,livekit_webhook_1=livekit_webhook;WebhookReceiver$1.authorizeHeader="Authorize";class WebhookReceiver{constructor(c,b){this.verifier=new AccessToken_1.TokenVerifier(c,b)}receive(c,b,_=!1){if(!_){if(!b)throw new Error("authorization header is empty");const k=this.verifier.verify(b),j=crypto_1.default.createHash("sha256");if(j.update(c),k.sha256!==j.digest("base64"))throw new Error("sha256 checksum of body does not match")}return livekit_webhook_1.WebhookEvent.fromJSON(JSON.parse(c))}}WebhookReceiver$1.WebhookReceiver=WebhookReceiver;var livekit_internal={},livekit_rtc={};(function(a){var c=commonjsGlobal$1&&commonjsGlobal$1.__importDefault||function(ut){return ut&&ut.__esModule?ut:{default:ut}};Object.defineProperty(a,"__esModule",{value:!0}),a.SimulateScenario=a.DataChannelInfo=a.SyncState=a.SubscriptionPermissionUpdate=a.SubscriptionPermission=a.TrackPermission=a.SubscribedQualityUpdate=a.SubscribedCodec=a.SubscribedQuality=a.StreamStateUpdate=a.StreamStateInfo=a.ConnectionQualityUpdate=a.ConnectionQualityInfo=a.RoomUpdate=a.SpeakersChanged=a.ICEServer=a.UpdateVideoLayers=a.LeaveRequest=a.UpdateTrackSettings=a.UpdateSubscription=a.ParticipantUpdate=a.SessionDescription=a.TrackUnpublishedResponse=a.TrackPublishedResponse=a.JoinResponse=a.MuteTrackRequest=a.TrickleRequest=a.AddTrackRequest=a.SimulcastCodec=a.SignalResponse=a.SignalRequest=a.candidateProtocolToJSON=a.candidateProtocolFromJSON=a.CandidateProtocol=a.streamStateToJSON=a.streamStateFromJSON=a.StreamState=a.signalTargetToJSON=a.signalTargetFromJSON=a.SignalTarget=a.protobufPackage=void 0;const b=c(umdExports),_=c(minimal),k=livekit_models;a.protobufPackage="livekit";var j;(function(ut){ut[ut.PUBLISHER=0]="PUBLISHER",ut[ut.SUBSCRIBER=1]="SUBSCRIBER",ut[ut.UNRECOGNIZED=-1]="UNRECOGNIZED"})(j=a.SignalTarget||(a.SignalTarget={}));function _e(ut){switch(ut){case 0:case"PUBLISHER":return j.PUBLISHER;case 1:case"SUBSCRIBER":return j.SUBSCRIBER;case-1:case"UNRECOGNIZED":default:return j.UNRECOGNIZED}}a.signalTargetFromJSON=_e;function et(ut){switch(ut){case j.PUBLISHER:return"PUBLISHER";case j.SUBSCRIBER:return"SUBSCRIBER";case j.UNRECOGNIZED:default:return"UNRECOGNIZED"}}a.signalTargetToJSON=et;var nt;(function(ut){ut[ut.ACTIVE=0]="ACTIVE",ut[ut.PAUSED=1]="PAUSED",ut[ut.UNRECOGNIZED=-1]="UNRECOGNIZED"})(nt=a.StreamState||(a.StreamState={}));function it(ut){switch(ut){case 0:case"ACTIVE":return nt.ACTIVE;case 1:case"PAUSED":return nt.PAUSED;case-1:case"UNRECOGNIZED":default:return nt.UNRECOGNIZED}}a.streamStateFromJSON=it;function ft(ut){switch(ut){case nt.ACTIVE:return"ACTIVE";case nt.PAUSED:return"PAUSED";case nt.UNRECOGNIZED:default:return"UNRECOGNIZED"}}a.streamStateToJSON=ft;var pt;(function(ut){ut[ut.UDP=0]="UDP",ut[ut.TCP=1]="TCP",ut[ut.TLS=2]="TLS",ut[ut.UNRECOGNIZED=-1]="UNRECOGNIZED"})(pt=a.CandidateProtocol||(a.CandidateProtocol={}));function mt(ut){switch(ut){case 0:case"UDP":return pt.UDP;case 1:case"TCP":return pt.TCP;case 2:case"TLS":return pt.TLS;case-1:case"UNRECOGNIZED":default:return pt.UNRECOGNIZED}}a.candidateProtocolFromJSON=mt;function St(ut){switch(ut){case pt.UDP:return"UDP";case pt.TCP:return"TCP";case pt.TLS:return"TLS";case pt.UNRECOGNIZED:default:return"UNRECOGNIZED"}}a.candidateProtocolToJSON=St;function yt(){return{offer:void 0,answer:void 0,trickle:void 0,addTrack:void 0,mute:void 0,subscription:void 0,trackSetting:void 0,leave:void 0,updateLayers:void 0,subscriptionPermission:void 0,syncState:void 0,simulate:void 0,ping:void 0}}a.SignalRequest={encode(ut,It=_.default.Writer.create()){return ut.offer!==void 0&&a.SessionDescription.encode(ut.offer,It.uint32(10).fork()).ldelim(),ut.answer!==void 0&&a.SessionDescription.encode(ut.answer,It.uint32(18).fork()).ldelim(),ut.trickle!==void 0&&a.TrickleRequest.encode(ut.trickle,It.uint32(26).fork()).ldelim(),ut.addTrack!==void 0&&a.AddTrackRequest.encode(ut.addTrack,It.uint32(34).fork()).ldelim(),ut.mute!==void 0&&a.MuteTrackRequest.encode(ut.mute,It.uint32(42).fork()).ldelim(),ut.subscription!==void 0&&a.UpdateSubscription.encode(ut.subscription,It.uint32(50).fork()).ldelim(),ut.trackSetting!==void 0&&a.UpdateTrackSettings.encode(ut.trackSetting,It.uint32(58).fork()).ldelim(),ut.leave!==void 0&&a.LeaveRequest.encode(ut.leave,It.uint32(66).fork()).ldelim(),ut.updateLayers!==void 0&&a.UpdateVideoLayers.encode(ut.updateLayers,It.uint32(82).fork()).ldelim(),ut.subscriptionPermission!==void 0&&a.SubscriptionPermission.encode(ut.subscriptionPermission,It.uint32(90).fork()).ldelim(),ut.syncState!==void 0&&a.SyncState.encode(ut.syncState,It.uint32(98).fork()).ldelim(),ut.simulate!==void 0&&a.SimulateScenario.encode(ut.simulate,It.uint32(106).fork()).ldelim(),ut.ping!==void 0&&It.uint32(112).int64(ut.ping),It},decode(ut,It){const Pt=ut instanceof _.default.Reader?ut:new _.default.Reader(ut);let Zt=It===void 0?Pt.len:Pt.pos+It;const Dt=yt();for(;Pt.pos<Zt;){const Ot=Pt.uint32();switch(Ot>>>3){case 1:Dt.offer=a.SessionDescription.decode(Pt,Pt.uint32());break;case 2:Dt.answer=a.SessionDescription.decode(Pt,Pt.uint32());break;case 3:Dt.trickle=a.TrickleRequest.decode(Pt,Pt.uint32());break;case 4:Dt.addTrack=a.AddTrackRequest.decode(Pt,Pt.uint32());break;case 5:Dt.mute=a.MuteTrackRequest.decode(Pt,Pt.uint32());break;case 6:Dt.subscription=a.UpdateSubscription.decode(Pt,Pt.uint32());break;case 7:Dt.trackSetting=a.UpdateTrackSettings.decode(Pt,Pt.uint32());break;case 8:Dt.leave=a.LeaveRequest.decode(Pt,Pt.uint32());break;case 10:Dt.updateLayers=a.UpdateVideoLayers.decode(Pt,Pt.uint32());break;case 11:Dt.subscriptionPermission=a.SubscriptionPermission.decode(Pt,Pt.uint32());break;case 12:Dt.syncState=a.SyncState.decode(Pt,Pt.uint32());break;case 13:Dt.simulate=a.SimulateScenario.decode(Pt,Pt.uint32());break;case 14:Dt.ping=Nn(Pt.int64());break;default:Pt.skipType(Ot&7);break}}return Dt},fromJSON(ut){return{offer:fn(ut.offer)?a.SessionDescription.fromJSON(ut.offer):void 0,answer:fn(ut.answer)?a.SessionDescription.fromJSON(ut.answer):void 0,trickle:fn(ut.trickle)?a.TrickleRequest.fromJSON(ut.trickle):void 0,addTrack:fn(ut.addTrack)?a.AddTrackRequest.fromJSON(ut.addTrack):void 0,mute:fn(ut.mute)?a.MuteTrackRequest.fromJSON(ut.mute):void 0,subscription:fn(ut.subscription)?a.UpdateSubscription.fromJSON(ut.subscription):void 0,trackSetting:fn(ut.trackSetting)?a.UpdateTrackSettings.fromJSON(ut.trackSetting):void 0,leave:fn(ut.leave)?a.LeaveRequest.fromJSON(ut.leave):void 0,updateLayers:fn(ut.updateLayers)?a.UpdateVideoLayers.fromJSON(ut.updateLayers):void 0,subscriptionPermission:fn(ut.subscriptionPermission)?a.SubscriptionPermission.fromJSON(ut.subscriptionPermission):void 0,syncState:fn(ut.syncState)?a.SyncState.fromJSON(ut.syncState):void 0,simulate:fn(ut.simulate)?a.SimulateScenario.fromJSON(ut.simulate):void 0,ping:fn(ut.ping)?Number(ut.ping):void 0}},toJSON(ut){const It={};return ut.offer!==void 0&&(It.offer=ut.offer?a.SessionDescription.toJSON(ut.offer):void 0),ut.answer!==void 0&&(It.answer=ut.answer?a.SessionDescription.toJSON(ut.answer):void 0),ut.trickle!==void 0&&(It.trickle=ut.trickle?a.TrickleRequest.toJSON(ut.trickle):void 0),ut.addTrack!==void 0&&(It.addTrack=ut.addTrack?a.AddTrackRequest.toJSON(ut.addTrack):void 0),ut.mute!==void 0&&(It.mute=ut.mute?a.MuteTrackRequest.toJSON(ut.mute):void 0),ut.subscription!==void 0&&(It.subscription=ut.subscription?a.UpdateSubscription.toJSON(ut.subscription):void 0),ut.trackSetting!==void 0&&(It.trackSetting=ut.trackSetting?a.UpdateTrackSettings.toJSON(ut.trackSetting):void 0),ut.leave!==void 0&&(It.leave=ut.leave?a.LeaveRequest.toJSON(ut.leave):void 0),ut.updateLayers!==void 0&&(It.updateLayers=ut.updateLayers?a.UpdateVideoLayers.toJSON(ut.updateLayers):void 0),ut.subscriptionPermission!==void 0&&(It.subscriptionPermission=ut.subscriptionPermission?a.SubscriptionPermission.toJSON(ut.subscriptionPermission):void 0),ut.syncState!==void 0&&(It.syncState=ut.syncState?a.SyncState.toJSON(ut.syncState):void 0),ut.simulate!==void 0&&(It.simulate=ut.simulate?a.SimulateScenario.toJSON(ut.simulate):void 0),ut.ping!==void 0&&(It.ping=Math.round(ut.ping)),It},fromPartial(ut){var It;const Pt=yt();return Pt.offer=ut.offer!==void 0&&ut.offer!==null?a.SessionDescription.fromPartial(ut.offer):void 0,Pt.answer=ut.answer!==void 0&&ut.answer!==null?a.SessionDescription.fromPartial(ut.answer):void 0,Pt.trickle=ut.trickle!==void 0&&ut.trickle!==null?a.TrickleRequest.fromPartial(ut.trickle):void 0,Pt.addTrack=ut.addTrack!==void 0&&ut.addTrack!==null?a.AddTrackRequest.fromPartial(ut.addTrack):void 0,Pt.mute=ut.mute!==void 0&&ut.mute!==null?a.MuteTrackRequest.fromPartial(ut.mute):void 0,Pt.subscription=ut.subscription!==void 0&&ut.subscription!==null?a.UpdateSubscription.fromPartial(ut.subscription):void 0,Pt.trackSetting=ut.trackSetting!==void 0&&ut.trackSetting!==null?a.UpdateTrackSettings.fromPartial(ut.trackSetting):void 0,Pt.leave=ut.leave!==void 0&&ut.leave!==null?a.LeaveRequest.fromPartial(ut.leave):void 0,Pt.updateLayers=ut.updateLayers!==void 0&&ut.updateLayers!==null?a.UpdateVideoLayers.fromPartial(ut.updateLayers):void 0,Pt.subscriptionPermission=ut.subscriptionPermission!==void 0&&ut.subscriptionPermission!==null?a.SubscriptionPermission.fromPartial(ut.subscriptionPermission):void 0,Pt.syncState=ut.syncState!==void 0&&ut.syncState!==null?a.SyncState.fromPartial(ut.syncState):void 0,Pt.simulate=ut.simulate!==void 0&&ut.simulate!==null?a.SimulateScenario.fromPartial(ut.simulate):void 0,Pt.ping=(It=ut.ping)!==null&&It!==void 0?It:void 0,Pt}};function _t(){return{join:void 0,answer:void 0,offer:void 0,trickle:void 0,update:void 0,trackPublished:void 0,leave:void 0,mute:void 0,speakersChanged:void 0,roomUpdate:void 0,connectionQuality:void 0,streamStateUpdate:void 0,subscribedQualityUpdate:void 0,subscriptionPermissionUpdate:void 0,refreshToken:void 0,trackUnpublished:void 0,pong:void 0}}a.SignalResponse={encode(ut,It=_.default.Writer.create()){return ut.join!==void 0&&a.JoinResponse.encode(ut.join,It.uint32(10).fork()).ldelim(),ut.answer!==void 0&&a.SessionDescription.encode(ut.answer,It.uint32(18).fork()).ldelim(),ut.offer!==void 0&&a.SessionDescription.encode(ut.offer,It.uint32(26).fork()).ldelim(),ut.trickle!==void 0&&a.TrickleRequest.encode(ut.trickle,It.uint32(34).fork()).ldelim(),ut.update!==void 0&&a.ParticipantUpdate.encode(ut.update,It.uint32(42).fork()).ldelim(),ut.trackPublished!==void 0&&a.TrackPublishedResponse.encode(ut.trackPublished,It.uint32(50).fork()).ldelim(),ut.leave!==void 0&&a.LeaveRequest.encode(ut.leave,It.uint32(66).fork()).ldelim(),ut.mute!==void 0&&a.MuteTrackRequest.encode(ut.mute,It.uint32(74).fork()).ldelim(),ut.speakersChanged!==void 0&&a.SpeakersChanged.encode(ut.speakersChanged,It.uint32(82).fork()).ldelim(),ut.roomUpdate!==void 0&&a.RoomUpdate.encode(ut.roomUpdate,It.uint32(90).fork()).ldelim(),ut.connectionQuality!==void 0&&a.ConnectionQualityUpdate.encode(ut.connectionQuality,It.uint32(98).fork()).ldelim(),ut.streamStateUpdate!==void 0&&a.StreamStateUpdate.encode(ut.streamStateUpdate,It.uint32(106).fork()).ldelim(),ut.subscribedQualityUpdate!==void 0&&a.SubscribedQualityUpdate.encode(ut.subscribedQualityUpdate,It.uint32(114).fork()).ldelim(),ut.subscriptionPermissionUpdate!==void 0&&a.SubscriptionPermissionUpdate.encode(ut.subscriptionPermissionUpdate,It.uint32(122).fork()).ldelim(),ut.refreshToken!==void 0&&It.uint32(130).string(ut.refreshToken),ut.trackUnpublished!==void 0&&a.TrackUnpublishedResponse.encode(ut.trackUnpublished,It.uint32(138).fork()).ldelim(),ut.pong!==void 0&&It.uint32(144).int64(ut.pong),It},decode(ut,It){const Pt=ut instanceof _.default.Reader?ut:new _.default.Reader(ut);let Zt=It===void 0?Pt.len:Pt.pos+It;const Dt=_t();for(;Pt.pos<Zt;){const Ot=Pt.uint32();switch(Ot>>>3){case 1:Dt.join=a.JoinResponse.decode(Pt,Pt.uint32());break;case 2:Dt.answer=a.SessionDescription.decode(Pt,Pt.uint32());break;case 3:Dt.offer=a.SessionDescription.decode(Pt,Pt.uint32());break;case 4:Dt.trickle=a.TrickleRequest.decode(Pt,Pt.uint32());break;case 5:Dt.update=a.ParticipantUpdate.decode(Pt,Pt.uint32());break;case 6:Dt.trackPublished=a.TrackPublishedResponse.decode(Pt,Pt.uint32());break;case 8:Dt.leave=a.LeaveRequest.decode(Pt,Pt.uint32());break;case 9:Dt.mute=a.MuteTrackRequest.decode(Pt,Pt.uint32());break;case 10:Dt.speakersChanged=a.SpeakersChanged.decode(Pt,Pt.uint32());break;case 11:Dt.roomUpdate=a.RoomUpdate.decode(Pt,Pt.uint32());break;case 12:Dt.connectionQuality=a.ConnectionQualityUpdate.decode(Pt,Pt.uint32());break;case 13:Dt.streamStateUpdate=a.StreamStateUpdate.decode(Pt,Pt.uint32());break;case 14:Dt.subscribedQualityUpdate=a.SubscribedQualityUpdate.decode(Pt,Pt.uint32());break;case 15:Dt.subscriptionPermissionUpdate=a.SubscriptionPermissionUpdate.decode(Pt,Pt.uint32());break;case 16:Dt.refreshToken=Pt.string();break;case 17:Dt.trackUnpublished=a.TrackUnpublishedResponse.decode(Pt,Pt.uint32());break;case 18:Dt.pong=Nn(Pt.int64());break;default:Pt.skipType(Ot&7);break}}return Dt},fromJSON(ut){return{join:fn(ut.join)?a.JoinResponse.fromJSON(ut.join):void 0,answer:fn(ut.answer)?a.SessionDescription.fromJSON(ut.answer):void 0,offer:fn(ut.offer)?a.SessionDescription.fromJSON(ut.offer):void 0,trickle:fn(ut.trickle)?a.TrickleRequest.fromJSON(ut.trickle):void 0,update:fn(ut.update)?a.ParticipantUpdate.fromJSON(ut.update):void 0,trackPublished:fn(ut.trackPublished)?a.TrackPublishedResponse.fromJSON(ut.trackPublished):void 0,leave:fn(ut.leave)?a.LeaveRequest.fromJSON(ut.leave):void 0,mute:fn(ut.mute)?a.MuteTrackRequest.fromJSON(ut.mute):void 0,speakersChanged:fn(ut.speakersChanged)?a.SpeakersChanged.fromJSON(ut.speakersChanged):void 0,roomUpdate:fn(ut.roomUpdate)?a.RoomUpdate.fromJSON(ut.roomUpdate):void 0,connectionQuality:fn(ut.connectionQuality)?a.ConnectionQualityUpdate.fromJSON(ut.connectionQuality):void 0,streamStateUpdate:fn(ut.streamStateUpdate)?a.StreamStateUpdate.fromJSON(ut.streamStateUpdate):void 0,subscribedQualityUpdate:fn(ut.subscribedQualityUpdate)?a.SubscribedQualityUpdate.fromJSON(ut.subscribedQualityUpdate):void 0,subscriptionPermissionUpdate:fn(ut.subscriptionPermissionUpdate)?a.SubscriptionPermissionUpdate.fromJSON(ut.subscriptionPermissionUpdate):void 0,refreshToken:fn(ut.refreshToken)?String(ut.refreshToken):void 0,trackUnpublished:fn(ut.trackUnpublished)?a.TrackUnpublishedResponse.fromJSON(ut.trackUnpublished):void 0,pong:fn(ut.pong)?Number(ut.pong):void 0}},toJSON(ut){const It={};return ut.join!==void 0&&(It.join=ut.join?a.JoinResponse.toJSON(ut.join):void 0),ut.answer!==void 0&&(It.answer=ut.answer?a.SessionDescription.toJSON(ut.answer):void 0),ut.offer!==void 0&&(It.offer=ut.offer?a.SessionDescription.toJSON(ut.offer):void 0),ut.trickle!==void 0&&(It.trickle=ut.trickle?a.TrickleRequest.toJSON(ut.trickle):void 0),ut.update!==void 0&&(It.update=ut.update?a.ParticipantUpdate.toJSON(ut.update):void 0),ut.trackPublished!==void 0&&(It.trackPublished=ut.trackPublished?a.TrackPublishedResponse.toJSON(ut.trackPublished):void 0),ut.leave!==void 0&&(It.leave=ut.leave?a.LeaveRequest.toJSON(ut.leave):void 0),ut.mute!==void 0&&(It.mute=ut.mute?a.MuteTrackRequest.toJSON(ut.mute):void 0),ut.speakersChanged!==void 0&&(It.speakersChanged=ut.speakersChanged?a.SpeakersChanged.toJSON(ut.speakersChanged):void 0),ut.roomUpdate!==void 0&&(It.roomUpdate=ut.roomUpdate?a.RoomUpdate.toJSON(ut.roomUpdate):void 0),ut.connectionQuality!==void 0&&(It.connectionQuality=ut.connectionQuality?a.ConnectionQualityUpdate.toJSON(ut.connectionQuality):void 0),ut.streamStateUpdate!==void 0&&(It.streamStateUpdate=ut.streamStateUpdate?a.StreamStateUpdate.toJSON(ut.streamStateUpdate):void 0),ut.subscribedQualityUpdate!==void 0&&(It.subscribedQualityUpdate=ut.subscribedQualityUpdate?a.SubscribedQualityUpdate.toJSON(ut.subscribedQualityUpdate):void 0),ut.subscriptionPermissionUpdate!==void 0&&(It.subscriptionPermissionUpdate=ut.subscriptionPermissionUpdate?a.SubscriptionPermissionUpdate.toJSON(ut.subscriptionPermissionUpdate):void 0),ut.refreshToken!==void 0&&(It.refreshToken=ut.refreshToken),ut.trackUnpublished!==void 0&&(It.trackUnpublished=ut.trackUnpublished?a.TrackUnpublishedResponse.toJSON(ut.trackUnpublished):void 0),ut.pong!==void 0&&(It.pong=Math.round(ut.pong)),It},fromPartial(ut){var It,Pt;const Zt=_t();return Zt.join=ut.join!==void 0&&ut.join!==null?a.JoinResponse.fromPartial(ut.join):void 0,Zt.answer=ut.answer!==void 0&&ut.answer!==null?a.SessionDescription.fromPartial(ut.answer):void 0,Zt.offer=ut.offer!==void 0&&ut.offer!==null?a.SessionDescription.fromPartial(ut.offer):void 0,Zt.trickle=ut.trickle!==void 0&&ut.trickle!==null?a.TrickleRequest.fromPartial(ut.trickle):void 0,Zt.update=ut.update!==void 0&&ut.update!==null?a.ParticipantUpdate.fromPartial(ut.update):void 0,Zt.trackPublished=ut.trackPublished!==void 0&&ut.trackPublished!==null?a.TrackPublishedResponse.fromPartial(ut.trackPublished):void 0,Zt.leave=ut.leave!==void 0&&ut.leave!==null?a.LeaveRequest.fromPartial(ut.leave):void 0,Zt.mute=ut.mute!==void 0&&ut.mute!==null?a.MuteTrackRequest.fromPartial(ut.mute):void 0,Zt.speakersChanged=ut.speakersChanged!==void 0&&ut.speakersChanged!==null?a.SpeakersChanged.fromPartial(ut.speakersChanged):void 0,Zt.roomUpdate=ut.roomUpdate!==void 0&&ut.roomUpdate!==null?a.RoomUpdate.fromPartial(ut.roomUpdate):void 0,Zt.connectionQuality=ut.connectionQuality!==void 0&&ut.connectionQuality!==null?a.ConnectionQualityUpdate.fromPartial(ut.connectionQuality):void 0,Zt.streamStateUpdate=ut.streamStateUpdate!==void 0&&ut.streamStateUpdate!==null?a.StreamStateUpdate.fromPartial(ut.streamStateUpdate):void 0,Zt.subscribedQualityUpdate=ut.subscribedQualityUpdate!==void 0&&ut.subscribedQualityUpdate!==null?a.SubscribedQualityUpdate.fromPartial(ut.subscribedQualityUpdate):void 0,Zt.subscriptionPermissionUpdate=ut.subscriptionPermissionUpdate!==void 0&&ut.subscriptionPermissionUpdate!==null?a.SubscriptionPermissionUpdate.fromPartial(ut.subscriptionPermissionUpdate):void 0,Zt.refreshToken=(It=ut.refreshToken)!==null&&It!==void 0?It:void 0,Zt.trackUnpublished=ut.trackUnpublished!==void 0&&ut.trackUnpublished!==null?a.TrackUnpublishedResponse.fromPartial(ut.trackUnpublished):void 0,Zt.pong=(Pt=ut.pong)!==null&&Pt!==void 0?Pt:void 0,Zt}};function Tt(){return{codec:"",cid:"",enableSimulcastLayers:!1}}a.SimulcastCodec={encode(ut,It=_.default.Writer.create()){return ut.codec!==void 0&&ut.codec!==""&&It.uint32(10).string(ut.codec),ut.cid!==void 0&&ut.cid!==""&&It.uint32(18).string(ut.cid),ut.enableSimulcastLayers===!0&&It.uint32(24).bool(ut.enableSimulcastLayers),It},decode(ut,It){const Pt=ut instanceof _.default.Reader?ut:new _.default.Reader(ut);let Zt=It===void 0?Pt.len:Pt.pos+It;const Dt=Tt();for(;Pt.pos<Zt;){const Ot=Pt.uint32();switch(Ot>>>3){case 1:Dt.codec=Pt.string();break;case 2:Dt.cid=Pt.string();break;case 3:Dt.enableSimulcastLayers=Pt.bool();break;default:Pt.skipType(Ot&7);break}}return Dt},fromJSON(ut){return{codec:fn(ut.codec)?String(ut.codec):"",cid:fn(ut.cid)?String(ut.cid):"",enableSimulcastLayers:fn(ut.enableSimulcastLayers)?!!ut.enableSimulcastLayers:!1}},toJSON(ut){const It={};return ut.codec!==void 0&&(It.codec=ut.codec),ut.cid!==void 0&&(It.cid=ut.cid),ut.enableSimulcastLayers!==void 0&&(It.enableSimulcastLayers=ut.enableSimulcastLayers),It},fromPartial(ut){var It,Pt,Zt;const Dt=Tt();return Dt.codec=(It=ut.codec)!==null&&It!==void 0?It:"",Dt.cid=(Pt=ut.cid)!==null&&Pt!==void 0?Pt:"",Dt.enableSimulcastLayers=(Zt=ut.enableSimulcastLayers)!==null&&Zt!==void 0?Zt:!1,Dt}};function gt(){return{cid:"",name:"",type:0,width:0,height:0,muted:!1,disableDtx:!1,source:0,layers:[],simulcastCodecs:[],sid:"",stereo:!1,disableRed:!1}}a.AddTrackRequest={encode(ut,It=_.default.Writer.create()){if(ut.cid!==void 0&&ut.cid!==""&&It.uint32(10).string(ut.cid),ut.name!==void 0&&ut.name!==""&&It.uint32(18).string(ut.name),ut.type!==void 0&&ut.type!==0&&It.uint32(24).int32(ut.type),ut.width!==void 0&&ut.width!==0&&It.uint32(32).uint32(ut.width),ut.height!==void 0&&ut.height!==0&&It.uint32(40).uint32(ut.height),ut.muted===!0&&It.uint32(48).bool(ut.muted),ut.disableDtx===!0&&It.uint32(56).bool(ut.disableDtx),ut.source!==void 0&&ut.source!==0&&It.uint32(64).int32(ut.source),ut.layers!==void 0&&ut.layers.length!==0)for(const Pt of ut.layers)k.VideoLayer.encode(Pt,It.uint32(74).fork()).ldelim();if(ut.simulcastCodecs!==void 0&&ut.simulcastCodecs.length!==0)for(const Pt of ut.simulcastCodecs)a.SimulcastCodec.encode(Pt,It.uint32(82).fork()).ldelim();return ut.sid!==void 0&&ut.sid!==""&&It.uint32(90).string(ut.sid),ut.stereo===!0&&It.uint32(96).bool(ut.stereo),ut.disableRed===!0&&It.uint32(104).bool(ut.disableRed),It},decode(ut,It){const Pt=ut instanceof _.default.Reader?ut:new _.default.Reader(ut);let Zt=It===void 0?Pt.len:Pt.pos+It;const Dt=gt();for(;Pt.pos<Zt;){const Ot=Pt.uint32();switch(Ot>>>3){case 1:Dt.cid=Pt.string();break;case 2:Dt.name=Pt.string();break;case 3:Dt.type=Pt.int32();break;case 4:Dt.width=Pt.uint32();break;case 5:Dt.height=Pt.uint32();break;case 6:Dt.muted=Pt.bool();break;case 7:Dt.disableDtx=Pt.bool();break;case 8:Dt.source=Pt.int32();break;case 9:Dt.layers.push(k.VideoLayer.decode(Pt,Pt.uint32()));break;case 10:Dt.simulcastCodecs.push(a.SimulcastCodec.decode(Pt,Pt.uint32()));break;case 11:Dt.sid=Pt.string();break;case 12:Dt.stereo=Pt.bool();break;case 13:Dt.disableRed=Pt.bool();break;default:Pt.skipType(Ot&7);break}}return Dt},fromJSON(ut){return{cid:fn(ut.cid)?String(ut.cid):"",name:fn(ut.name)?String(ut.name):"",type:fn(ut.type)?k.trackTypeFromJSON(ut.type):0,width:fn(ut.width)?Number(ut.width):0,height:fn(ut.height)?Number(ut.height):0,muted:fn(ut.muted)?!!ut.muted:!1,disableDtx:fn(ut.disableDtx)?!!ut.disableDtx:!1,source:fn(ut.source)?k.trackSourceFromJSON(ut.source):0,layers:Array.isArray(ut==null?void 0:ut.layers)?ut.layers.map(It=>k.VideoLayer.fromJSON(It)):[],simulcastCodecs:Array.isArray(ut==null?void 0:ut.simulcastCodecs)?ut.simulcastCodecs.map(It=>a.SimulcastCodec.fromJSON(It)):[],sid:fn(ut.sid)?String(ut.sid):"",stereo:fn(ut.stereo)?!!ut.stereo:!1,disableRed:fn(ut.disableRed)?!!ut.disableRed:!1}},toJSON(ut){const It={};return ut.cid!==void 0&&(It.cid=ut.cid),ut.name!==void 0&&(It.name=ut.name),ut.type!==void 0&&(It.type=k.trackTypeToJSON(ut.type)),ut.width!==void 0&&(It.width=Math.round(ut.width)),ut.height!==void 0&&(It.height=Math.round(ut.height)),ut.muted!==void 0&&(It.muted=ut.muted),ut.disableDtx!==void 0&&(It.disableDtx=ut.disableDtx),ut.source!==void 0&&(It.source=k.trackSourceToJSON(ut.source)),ut.layers?It.layers=ut.layers.map(Pt=>Pt?k.VideoLayer.toJSON(Pt):void 0):It.layers=[],ut.simulcastCodecs?It.simulcastCodecs=ut.simulcastCodecs.map(Pt=>Pt?a.SimulcastCodec.toJSON(Pt):void 0):It.simulcastCodecs=[],ut.sid!==void 0&&(It.sid=ut.sid),ut.stereo!==void 0&&(It.stereo=ut.stereo),ut.disableRed!==void 0&&(It.disableRed=ut.disableRed),It},fromPartial(ut){var It,Pt,Zt,Dt,Ot,$t,Gt,nn,gn,Xt,at,Rt,Ut;const un=gt();return un.cid=(It=ut.cid)!==null&&It!==void 0?It:"",un.name=(Pt=ut.name)!==null&&Pt!==void 0?Pt:"",un.type=(Zt=ut.type)!==null&&Zt!==void 0?Zt:0,un.width=(Dt=ut.width)!==null&&Dt!==void 0?Dt:0,un.height=(Ot=ut.height)!==null&&Ot!==void 0?Ot:0,un.muted=($t=ut.muted)!==null&&$t!==void 0?$t:!1,un.disableDtx=(Gt=ut.disableDtx)!==null&&Gt!==void 0?Gt:!1,un.source=(nn=ut.source)!==null&&nn!==void 0?nn:0,un.layers=((gn=ut.layers)===null||gn===void 0?void 0:gn.map(Vt=>k.VideoLayer.fromPartial(Vt)))||[],un.simulcastCodecs=((Xt=ut.simulcastCodecs)===null||Xt===void 0?void 0:Xt.map(Vt=>a.SimulcastCodec.fromPartial(Vt)))||[],un.sid=(at=ut.sid)!==null&&at!==void 0?at:"",un.stereo=(Rt=ut.stereo)!==null&&Rt!==void 0?Rt:!1,un.disableRed=(Ut=ut.disableRed)!==null&&Ut!==void 0?Ut:!1,un}};function ht(){return{candidateInit:"",target:0}}a.TrickleRequest={encode(ut,It=_.default.Writer.create()){return ut.candidateInit!==void 0&&ut.candidateInit!==""&&It.uint32(10).string(ut.candidateInit),ut.target!==void 0&&ut.target!==0&&It.uint32(16).int32(ut.target),It},decode(ut,It){const Pt=ut instanceof _.default.Reader?ut:new _.default.Reader(ut);let Zt=It===void 0?Pt.len:Pt.pos+It;const Dt=ht();for(;Pt.pos<Zt;){const Ot=Pt.uint32();switch(Ot>>>3){case 1:Dt.candidateInit=Pt.string();break;case 2:Dt.target=Pt.int32();break;default:Pt.skipType(Ot&7);break}}return Dt},fromJSON(ut){return{candidateInit:fn(ut.candidateInit)?String(ut.candidateInit):"",target:fn(ut.target)?_e(ut.target):0}},toJSON(ut){const It={};return ut.candidateInit!==void 0&&(It.candidateInit=ut.candidateInit),ut.target!==void 0&&(It.target=et(ut.target)),It},fromPartial(ut){var It,Pt;const Zt=ht();return Zt.candidateInit=(It=ut.candidateInit)!==null&&It!==void 0?It:"",Zt.target=(Pt=ut.target)!==null&&Pt!==void 0?Pt:0,Zt}};function Et(){return{sid:"",muted:!1}}a.MuteTrackRequest={encode(ut,It=_.default.Writer.create()){return ut.sid!==void 0&&ut.sid!==""&&It.uint32(10).string(ut.sid),ut.muted===!0&&It.uint32(16).bool(ut.muted),It},decode(ut,It){const Pt=ut instanceof _.default.Reader?ut:new _.default.Reader(ut);let Zt=It===void 0?Pt.len:Pt.pos+It;const Dt=Et();for(;Pt.pos<Zt;){const Ot=Pt.uint32();switch(Ot>>>3){case 1:Dt.sid=Pt.string();break;case 2:Dt.muted=Pt.bool();break;default:Pt.skipType(Ot&7);break}}return Dt},fromJSON(ut){return{sid:fn(ut.sid)?String(ut.sid):"",muted:fn(ut.muted)?!!ut.muted:!1}},toJSON(ut){const It={};return ut.sid!==void 0&&(It.sid=ut.sid),ut.muted!==void 0&&(It.muted=ut.muted),It},fromPartial(ut){var It,Pt;const Zt=Et();return Zt.sid=(It=ut.sid)!==null&&It!==void 0?It:"",Zt.muted=(Pt=ut.muted)!==null&&Pt!==void 0?Pt:!1,Zt}};function At(){return{room:void 0,participant:void 0,otherParticipants:[],serverVersion:"",iceServers:[],subscriberPrimary:!1,alternativeUrl:"",clientConfiguration:void 0,serverRegion:"",pingTimeout:0,pingInterval:0,serverInfo:void 0}}a.JoinResponse={encode(ut,It=_.default.Writer.create()){if(ut.room!==void 0&&k.Room.encode(ut.room,It.uint32(10).fork()).ldelim(),ut.participant!==void 0&&k.ParticipantInfo.encode(ut.participant,It.uint32(18).fork()).ldelim(),ut.otherParticipants!==void 0&&ut.otherParticipants.length!==0)for(const Pt of ut.otherParticipants)k.ParticipantInfo.encode(Pt,It.uint32(26).fork()).ldelim();if(ut.serverVersion!==void 0&&ut.serverVersion!==""&&It.uint32(34).string(ut.serverVersion),ut.iceServers!==void 0&&ut.iceServers.length!==0)for(const Pt of ut.iceServers)a.ICEServer.encode(Pt,It.uint32(42).fork()).ldelim();return ut.subscriberPrimary===!0&&It.uint32(48).bool(ut.subscriberPrimary),ut.alternativeUrl!==void 0&&ut.alternativeUrl!==""&&It.uint32(58).string(ut.alternativeUrl),ut.clientConfiguration!==void 0&&k.ClientConfiguration.encode(ut.clientConfiguration,It.uint32(66).fork()).ldelim(),ut.serverRegion!==void 0&&ut.serverRegion!==""&&It.uint32(74).string(ut.serverRegion),ut.pingTimeout!==void 0&&ut.pingTimeout!==0&&It.uint32(80).int32(ut.pingTimeout),ut.pingInterval!==void 0&&ut.pingInterval!==0&&It.uint32(88).int32(ut.pingInterval),ut.serverInfo!==void 0&&k.ServerInfo.encode(ut.serverInfo,It.uint32(98).fork()).ldelim(),It},decode(ut,It){const Pt=ut instanceof _.default.Reader?ut:new _.default.Reader(ut);let Zt=It===void 0?Pt.len:Pt.pos+It;const Dt=At();for(;Pt.pos<Zt;){const Ot=Pt.uint32();switch(Ot>>>3){case 1:Dt.room=k.Room.decode(Pt,Pt.uint32());break;case 2:Dt.participant=k.ParticipantInfo.decode(Pt,Pt.uint32());break;case 3:Dt.otherParticipants.push(k.ParticipantInfo.decode(Pt,Pt.uint32()));break;case 4:Dt.serverVersion=Pt.string();break;case 5:Dt.iceServers.push(a.ICEServer.decode(Pt,Pt.uint32()));break;case 6:Dt.subscriberPrimary=Pt.bool();break;case 7:Dt.alternativeUrl=Pt.string();break;case 8:Dt.clientConfiguration=k.ClientConfiguration.decode(Pt,Pt.uint32());break;case 9:Dt.serverRegion=Pt.string();break;case 10:Dt.pingTimeout=Pt.int32();break;case 11:Dt.pingInterval=Pt.int32();break;case 12:Dt.serverInfo=k.ServerInfo.decode(Pt,Pt.uint32());break;default:Pt.skipType(Ot&7);break}}return Dt},fromJSON(ut){return{room:fn(ut.room)?k.Room.fromJSON(ut.room):void 0,participant:fn(ut.participant)?k.ParticipantInfo.fromJSON(ut.participant):void 0,otherParticipants:Array.isArray(ut==null?void 0:ut.otherParticipants)?ut.otherParticipants.map(It=>k.ParticipantInfo.fromJSON(It)):[],serverVersion:fn(ut.serverVersion)?String(ut.serverVersion):"",iceServers:Array.isArray(ut==null?void 0:ut.iceServers)?ut.iceServers.map(It=>a.ICEServer.fromJSON(It)):[],subscriberPrimary:fn(ut.subscriberPrimary)?!!ut.subscriberPrimary:!1,alternativeUrl:fn(ut.alternativeUrl)?String(ut.alternativeUrl):"",clientConfiguration:fn(ut.clientConfiguration)?k.ClientConfiguration.fromJSON(ut.clientConfiguration):void 0,serverRegion:fn(ut.serverRegion)?String(ut.serverRegion):"",pingTimeout:fn(ut.pingTimeout)?Number(ut.pingTimeout):0,pingInterval:fn(ut.pingInterval)?Number(ut.pingInterval):0,serverInfo:fn(ut.serverInfo)?k.ServerInfo.fromJSON(ut.serverInfo):void 0}},toJSON(ut){const It={};return ut.room!==void 0&&(It.room=ut.room?k.Room.toJSON(ut.room):void 0),ut.participant!==void 0&&(It.participant=ut.participant?k.ParticipantInfo.toJSON(ut.participant):void 0),ut.otherParticipants?It.otherParticipants=ut.otherParticipants.map(Pt=>Pt?k.ParticipantInfo.toJSON(Pt):void 0):It.otherParticipants=[],ut.serverVersion!==void 0&&(It.serverVersion=ut.serverVersion),ut.iceServers?It.iceServers=ut.iceServers.map(Pt=>Pt?a.ICEServer.toJSON(Pt):void 0):It.iceServers=[],ut.subscriberPrimary!==void 0&&(It.subscriberPrimary=ut.subscriberPrimary),ut.alternativeUrl!==void 0&&(It.alternativeUrl=ut.alternativeUrl),ut.clientConfiguration!==void 0&&(It.clientConfiguration=ut.clientConfiguration?k.ClientConfiguration.toJSON(ut.clientConfiguration):void 0),ut.serverRegion!==void 0&&(It.serverRegion=ut.serverRegion),ut.pingTimeout!==void 0&&(It.pingTimeout=Math.round(ut.pingTimeout)),ut.pingInterval!==void 0&&(It.pingInterval=Math.round(ut.pingInterval)),ut.serverInfo!==void 0&&(It.serverInfo=ut.serverInfo?k.ServerInfo.toJSON(ut.serverInfo):void 0),It},fromPartial(ut){var It,Pt,Zt,Dt,Ot,$t,Gt,nn;const gn=At();return gn.room=ut.room!==void 0&&ut.room!==null?k.Room.fromPartial(ut.room):void 0,gn.participant=ut.participant!==void 0&&ut.participant!==null?k.ParticipantInfo.fromPartial(ut.participant):void 0,gn.otherParticipants=((It=ut.otherParticipants)===null||It===void 0?void 0:It.map(Xt=>k.ParticipantInfo.fromPartial(Xt)))||[],gn.serverVersion=(Pt=ut.serverVersion)!==null&&Pt!==void 0?Pt:"",gn.iceServers=((Zt=ut.iceServers)===null||Zt===void 0?void 0:Zt.map(Xt=>a.ICEServer.fromPartial(Xt)))||[],gn.subscriberPrimary=(Dt=ut.subscriberPrimary)!==null&&Dt!==void 0?Dt:!1,gn.alternativeUrl=(Ot=ut.alternativeUrl)!==null&&Ot!==void 0?Ot:"",gn.clientConfiguration=ut.clientConfiguration!==void 0&&ut.clientConfiguration!==null?k.ClientConfiguration.fromPartial(ut.clientConfiguration):void 0,gn.serverRegion=($t=ut.serverRegion)!==null&&$t!==void 0?$t:"",gn.pingTimeout=(Gt=ut.pingTimeout)!==null&&Gt!==void 0?Gt:0,gn.pingInterval=(nn=ut.pingInterval)!==null&&nn!==void 0?nn:0,gn.serverInfo=ut.serverInfo!==void 0&&ut.serverInfo!==null?k.ServerInfo.fromPartial(ut.serverInfo):void 0,gn}};function Bt(){return{cid:"",track:void 0}}a.TrackPublishedResponse={encode(ut,It=_.default.Writer.create()){return ut.cid!==void 0&&ut.cid!==""&&It.uint32(10).string(ut.cid),ut.track!==void 0&&k.TrackInfo.encode(ut.track,It.uint32(18).fork()).ldelim(),It},decode(ut,It){const Pt=ut instanceof _.default.Reader?ut:new _.default.Reader(ut);let Zt=It===void 0?Pt.len:Pt.pos+It;const Dt=Bt();for(;Pt.pos<Zt;){const Ot=Pt.uint32();switch(Ot>>>3){case 1:Dt.cid=Pt.string();break;case 2:Dt.track=k.TrackInfo.decode(Pt,Pt.uint32());break;default:Pt.skipType(Ot&7);break}}return Dt},fromJSON(ut){return{cid:fn(ut.cid)?String(ut.cid):"",track:fn(ut.track)?k.TrackInfo.fromJSON(ut.track):void 0}},toJSON(ut){const It={};return ut.cid!==void 0&&(It.cid=ut.cid),ut.track!==void 0&&(It.track=ut.track?k.TrackInfo.toJSON(ut.track):void 0),It},fromPartial(ut){var It;const Pt=Bt();return Pt.cid=(It=ut.cid)!==null&&It!==void 0?It:"",Pt.track=ut.track!==void 0&&ut.track!==null?k.TrackInfo.fromPartial(ut.track):void 0,Pt}};function qt(){return{trackSid:""}}a.TrackUnpublishedResponse={encode(ut,It=_.default.Writer.create()){return ut.trackSid!==void 0&&ut.trackSid!==""&&It.uint32(10).string(ut.trackSid),It},decode(ut,It){const Pt=ut instanceof _.default.Reader?ut:new _.default.Reader(ut);let Zt=It===void 0?Pt.len:Pt.pos+It;const Dt=qt();for(;Pt.pos<Zt;){const Ot=Pt.uint32();switch(Ot>>>3){case 1:Dt.trackSid=Pt.string();break;default:Pt.skipType(Ot&7);break}}return Dt},fromJSON(ut){return{trackSid:fn(ut.trackSid)?String(ut.trackSid):""}},toJSON(ut){const It={};return ut.trackSid!==void 0&&(It.trackSid=ut.trackSid),It},fromPartial(ut){var It;const Pt=qt();return Pt.trackSid=(It=ut.trackSid)!==null&&It!==void 0?It:"",Pt}};function zt(){return{type:"",sdp:""}}a.SessionDescription={encode(ut,It=_.default.Writer.create()){return ut.type!==void 0&&ut.type!==""&&It.uint32(10).string(ut.type),ut.sdp!==void 0&&ut.sdp!==""&&It.uint32(18).string(ut.sdp),It},decode(ut,It){const Pt=ut instanceof _.default.Reader?ut:new _.default.Reader(ut);let Zt=It===void 0?Pt.len:Pt.pos+It;const Dt=zt();for(;Pt.pos<Zt;){const Ot=Pt.uint32();switch(Ot>>>3){case 1:Dt.type=Pt.string();break;case 2:Dt.sdp=Pt.string();break;default:Pt.skipType(Ot&7);break}}return Dt},fromJSON(ut){return{type:fn(ut.type)?String(ut.type):"",sdp:fn(ut.sdp)?String(ut.sdp):""}},toJSON(ut){const It={};return ut.type!==void 0&&(It.type=ut.type),ut.sdp!==void 0&&(It.sdp=ut.sdp),It},fromPartial(ut){var It,Pt;const Zt=zt();return Zt.type=(It=ut.type)!==null&&It!==void 0?It:"",Zt.sdp=(Pt=ut.sdp)!==null&&Pt!==void 0?Pt:"",Zt}};function Ht(){return{participants:[]}}a.ParticipantUpdate={encode(ut,It=_.default.Writer.create()){if(ut.participants!==void 0&&ut.participants.length!==0)for(const Pt of ut.participants)k.ParticipantInfo.encode(Pt,It.uint32(10).fork()).ldelim();return It},decode(ut,It){const Pt=ut instanceof _.default.Reader?ut:new _.default.Reader(ut);let Zt=It===void 0?Pt.len:Pt.pos+It;const Dt=Ht();for(;Pt.pos<Zt;){const Ot=Pt.uint32();switch(Ot>>>3){case 1:Dt.participants.push(k.ParticipantInfo.decode(Pt,Pt.uint32()));break;default:Pt.skipType(Ot&7);break}}return Dt},fromJSON(ut){return{participants:Array.isArray(ut==null?void 0:ut.participants)?ut.participants.map(It=>k.ParticipantInfo.fromJSON(It)):[]}},toJSON(ut){const It={};return ut.participants?It.participants=ut.participants.map(Pt=>Pt?k.ParticipantInfo.toJSON(Pt):void 0):It.participants=[],It},fromPartial(ut){var It;const Pt=Ht();return Pt.participants=((It=ut.participants)===null||It===void 0?void 0:It.map(Zt=>k.ParticipantInfo.fromPartial(Zt)))||[],Pt}};function ct(){return{trackSids:[],subscribe:!1,participantTracks:[]}}a.UpdateSubscription={encode(ut,It=_.default.Writer.create()){if(ut.trackSids!==void 0&&ut.trackSids.length!==0)for(const Pt of ut.trackSids)It.uint32(10).string(Pt);if(ut.subscribe===!0&&It.uint32(16).bool(ut.subscribe),ut.participantTracks!==void 0&&ut.participantTracks.length!==0)for(const Pt of ut.participantTracks)k.ParticipantTracks.encode(Pt,It.uint32(26).fork()).ldelim();return It},decode(ut,It){const Pt=ut instanceof _.default.Reader?ut:new _.default.Reader(ut);let Zt=It===void 0?Pt.len:Pt.pos+It;const Dt=ct();for(;Pt.pos<Zt;){const Ot=Pt.uint32();switch(Ot>>>3){case 1:Dt.trackSids.push(Pt.string());break;case 2:Dt.subscribe=Pt.bool();break;case 3:Dt.participantTracks.push(k.ParticipantTracks.decode(Pt,Pt.uint32()));break;default:Pt.skipType(Ot&7);break}}return Dt},fromJSON(ut){return{trackSids:Array.isArray(ut==null?void 0:ut.trackSids)?ut.trackSids.map(It=>String(It)):[],subscribe:fn(ut.subscribe)?!!ut.subscribe:!1,participantTracks:Array.isArray(ut==null?void 0:ut.participantTracks)?ut.participantTracks.map(It=>k.ParticipantTracks.fromJSON(It)):[]}},toJSON(ut){const It={};return ut.trackSids?It.trackSids=ut.trackSids.map(Pt=>Pt):It.trackSids=[],ut.subscribe!==void 0&&(It.subscribe=ut.subscribe),ut.participantTracks?It.participantTracks=ut.participantTracks.map(Pt=>Pt?k.ParticipantTracks.toJSON(Pt):void 0):It.participantTracks=[],It},fromPartial(ut){var It,Pt,Zt;const Dt=ct();return Dt.trackSids=((It=ut.trackSids)===null||It===void 0?void 0:It.map(Ot=>Ot))||[],Dt.subscribe=(Pt=ut.subscribe)!==null&&Pt!==void 0?Pt:!1,Dt.participantTracks=((Zt=ut.participantTracks)===null||Zt===void 0?void 0:Zt.map(Ot=>k.ParticipantTracks.fromPartial(Ot)))||[],Dt}};function dt(){return{trackSids:[],disabled:!1,quality:0,width:0,height:0,fps:0}}a.UpdateTrackSettings={encode(ut,It=_.default.Writer.create()){if(ut.trackSids!==void 0&&ut.trackSids.length!==0)for(const Pt of ut.trackSids)It.uint32(10).string(Pt);return ut.disabled===!0&&It.uint32(24).bool(ut.disabled),ut.quality!==void 0&&ut.quality!==0&&It.uint32(32).int32(ut.quality),ut.width!==void 0&&ut.width!==0&&It.uint32(40).uint32(ut.width),ut.height!==void 0&&ut.height!==0&&It.uint32(48).uint32(ut.height),ut.fps!==void 0&&ut.fps!==0&&It.uint32(56).uint32(ut.fps),It},decode(ut,It){const Pt=ut instanceof _.default.Reader?ut:new _.default.Reader(ut);let Zt=It===void 0?Pt.len:Pt.pos+It;const Dt=dt();for(;Pt.pos<Zt;){const Ot=Pt.uint32();switch(Ot>>>3){case 1:Dt.trackSids.push(Pt.string());break;case 3:Dt.disabled=Pt.bool();break;case 4:Dt.quality=Pt.int32();break;case 5:Dt.width=Pt.uint32();break;case 6:Dt.height=Pt.uint32();break;case 7:Dt.fps=Pt.uint32();break;default:Pt.skipType(Ot&7);break}}return Dt},fromJSON(ut){return{trackSids:Array.isArray(ut==null?void 0:ut.trackSids)?ut.trackSids.map(It=>String(It)):[],disabled:fn(ut.disabled)?!!ut.disabled:!1,quality:fn(ut.quality)?k.videoQualityFromJSON(ut.quality):0,width:fn(ut.width)?Number(ut.width):0,height:fn(ut.height)?Number(ut.height):0,fps:fn(ut.fps)?Number(ut.fps):0}},toJSON(ut){const It={};return ut.trackSids?It.trackSids=ut.trackSids.map(Pt=>Pt):It.trackSids=[],ut.disabled!==void 0&&(It.disabled=ut.disabled),ut.quality!==void 0&&(It.quality=k.videoQualityToJSON(ut.quality)),ut.width!==void 0&&(It.width=Math.round(ut.width)),ut.height!==void 0&&(It.height=Math.round(ut.height)),ut.fps!==void 0&&(It.fps=Math.round(ut.fps)),It},fromPartial(ut){var It,Pt,Zt,Dt,Ot,$t;const Gt=dt();return Gt.trackSids=((It=ut.trackSids)===null||It===void 0?void 0:It.map(nn=>nn))||[],Gt.disabled=(Pt=ut.disabled)!==null&&Pt!==void 0?Pt:!1,Gt.quality=(Zt=ut.quality)!==null&&Zt!==void 0?Zt:0,Gt.width=(Dt=ut.width)!==null&&Dt!==void 0?Dt:0,Gt.height=(Ot=ut.height)!==null&&Ot!==void 0?Ot:0,Gt.fps=($t=ut.fps)!==null&&$t!==void 0?$t:0,Gt}};function lt(){return{canReconnect:!1,reason:0}}a.LeaveRequest={encode(ut,It=_.default.Writer.create()){return ut.canReconnect===!0&&It.uint32(8).bool(ut.canReconnect),ut.reason!==void 0&&ut.reason!==0&&It.uint32(16).int32(ut.reason),It},decode(ut,It){const Pt=ut instanceof _.default.Reader?ut:new _.default.Reader(ut);let Zt=It===void 0?Pt.len:Pt.pos+It;const Dt=lt();for(;Pt.pos<Zt;){const Ot=Pt.uint32();switch(Ot>>>3){case 1:Dt.canReconnect=Pt.bool();break;case 2:Dt.reason=Pt.int32();break;default:Pt.skipType(Ot&7);break}}return Dt},fromJSON(ut){return{canReconnect:fn(ut.canReconnect)?!!ut.canReconnect:!1,reason:fn(ut.reason)?k.disconnectReasonFromJSON(ut.reason):0}},toJSON(ut){const It={};return ut.canReconnect!==void 0&&(It.canReconnect=ut.canReconnect),ut.reason!==void 0&&(It.reason=k.disconnectReasonToJSON(ut.reason)),It},fromPartial(ut){var It,Pt;const Zt=lt();return Zt.canReconnect=(It=ut.canReconnect)!==null&&It!==void 0?It:!1,Zt.reason=(Pt=ut.reason)!==null&&Pt!==void 0?Pt:0,Zt}};function kt(){return{trackSid:"",layers:[]}}a.UpdateVideoLayers={encode(ut,It=_.default.Writer.create()){if(ut.trackSid!==void 0&&ut.trackSid!==""&&It.uint32(10).string(ut.trackSid),ut.layers!==void 0&&ut.layers.length!==0)for(const Pt of ut.layers)k.VideoLayer.encode(Pt,It.uint32(18).fork()).ldelim();return It},decode(ut,It){const Pt=ut instanceof _.default.Reader?ut:new _.default.Reader(ut);let Zt=It===void 0?Pt.len:Pt.pos+It;const Dt=kt();for(;Pt.pos<Zt;){const Ot=Pt.uint32();switch(Ot>>>3){case 1:Dt.trackSid=Pt.string();break;case 2:Dt.layers.push(k.VideoLayer.decode(Pt,Pt.uint32()));break;default:Pt.skipType(Ot&7);break}}return Dt},fromJSON(ut){return{trackSid:fn(ut.trackSid)?String(ut.trackSid):"",layers:Array.isArray(ut==null?void 0:ut.layers)?ut.layers.map(It=>k.VideoLayer.fromJSON(It)):[]}},toJSON(ut){const It={};return ut.trackSid!==void 0&&(It.trackSid=ut.trackSid),ut.layers?It.layers=ut.layers.map(Pt=>Pt?k.VideoLayer.toJSON(Pt):void 0):It.layers=[],It},fromPartial(ut){var It,Pt;const Zt=kt();return Zt.trackSid=(It=ut.trackSid)!==null&&It!==void 0?It:"",Zt.layers=((Pt=ut.layers)===null||Pt===void 0?void 0:Pt.map(Dt=>k.VideoLayer.fromPartial(Dt)))||[],Zt}};function Lt(){return{urls:[],username:"",credential:""}}a.ICEServer={encode(ut,It=_.default.Writer.create()){if(ut.urls!==void 0&&ut.urls.length!==0)for(const Pt of ut.urls)It.uint32(10).string(Pt);return ut.username!==void 0&&ut.username!==""&&It.uint32(18).string(ut.username),ut.credential!==void 0&&ut.credential!==""&&It.uint32(26).string(ut.credential),It},decode(ut,It){const Pt=ut instanceof _.default.Reader?ut:new _.default.Reader(ut);let Zt=It===void 0?Pt.len:Pt.pos+It;const Dt=Lt();for(;Pt.pos<Zt;){const Ot=Pt.uint32();switch(Ot>>>3){case 1:Dt.urls.push(Pt.string());break;case 2:Dt.username=Pt.string();break;case 3:Dt.credential=Pt.string();break;default:Pt.skipType(Ot&7);break}}return Dt},fromJSON(ut){return{urls:Array.isArray(ut==null?void 0:ut.urls)?ut.urls.map(It=>String(It)):[],username:fn(ut.username)?String(ut.username):"",credential:fn(ut.credential)?String(ut.credential):""}},toJSON(ut){const It={};return ut.urls?It.urls=ut.urls.map(Pt=>Pt):It.urls=[],ut.username!==void 0&&(It.username=ut.username),ut.credential!==void 0&&(It.credential=ut.credential),It},fromPartial(ut){var It,Pt,Zt;const Dt=Lt();return Dt.urls=((It=ut.urls)===null||It===void 0?void 0:It.map(Ot=>Ot))||[],Dt.username=(Pt=ut.username)!==null&&Pt!==void 0?Pt:"",Dt.credential=(Zt=ut.credential)!==null&&Zt!==void 0?Zt:"",Dt}};function Jt(){return{speakers:[]}}a.SpeakersChanged={encode(ut,It=_.default.Writer.create()){if(ut.speakers!==void 0&&ut.speakers.length!==0)for(const Pt of ut.speakers)k.SpeakerInfo.encode(Pt,It.uint32(10).fork()).ldelim();return It},decode(ut,It){const Pt=ut instanceof _.default.Reader?ut:new _.default.Reader(ut);let Zt=It===void 0?Pt.len:Pt.pos+It;const Dt=Jt();for(;Pt.pos<Zt;){const Ot=Pt.uint32();switch(Ot>>>3){case 1:Dt.speakers.push(k.SpeakerInfo.decode(Pt,Pt.uint32()));break;default:Pt.skipType(Ot&7);break}}return Dt},fromJSON(ut){return{speakers:Array.isArray(ut==null?void 0:ut.speakers)?ut.speakers.map(It=>k.SpeakerInfo.fromJSON(It)):[]}},toJSON(ut){const It={};return ut.speakers?It.speakers=ut.speakers.map(Pt=>Pt?k.SpeakerInfo.toJSON(Pt):void 0):It.speakers=[],It},fromPartial(ut){var It;const Pt=Jt();return Pt.speakers=((It=ut.speakers)===null||It===void 0?void 0:It.map(Zt=>k.SpeakerInfo.fromPartial(Zt)))||[],Pt}};function en(){return{room:void 0}}a.RoomUpdate={encode(ut,It=_.default.Writer.create()){return ut.room!==void 0&&k.Room.encode(ut.room,It.uint32(10).fork()).ldelim(),It},decode(ut,It){const Pt=ut instanceof _.default.Reader?ut:new _.default.Reader(ut);let Zt=It===void 0?Pt.len:Pt.pos+It;const Dt=en();for(;Pt.pos<Zt;){const Ot=Pt.uint32();switch(Ot>>>3){case 1:Dt.room=k.Room.decode(Pt,Pt.uint32());break;default:Pt.skipType(Ot&7);break}}return Dt},fromJSON(ut){return{room:fn(ut.room)?k.Room.fromJSON(ut.room):void 0}},toJSON(ut){const It={};return ut.room!==void 0&&(It.room=ut.room?k.Room.toJSON(ut.room):void 0),It},fromPartial(ut){const It=en();return It.room=ut.room!==void 0&&ut.room!==null?k.Room.fromPartial(ut.room):void 0,It}};function Qt(){return{participantSid:"",quality:0,score:0}}a.ConnectionQualityInfo={encode(ut,It=_.default.Writer.create()){return ut.participantSid!==void 0&&ut.participantSid!==""&&It.uint32(10).string(ut.participantSid),ut.quality!==void 0&&ut.quality!==0&&It.uint32(16).int32(ut.quality),ut.score!==void 0&&ut.score!==0&&It.uint32(29).float(ut.score),It},decode(ut,It){const Pt=ut instanceof _.default.Reader?ut:new _.default.Reader(ut);let Zt=It===void 0?Pt.len:Pt.pos+It;const Dt=Qt();for(;Pt.pos<Zt;){const Ot=Pt.uint32();switch(Ot>>>3){case 1:Dt.participantSid=Pt.string();break;case 2:Dt.quality=Pt.int32();break;case 3:Dt.score=Pt.float();break;default:Pt.skipType(Ot&7);break}}return Dt},fromJSON(ut){return{participantSid:fn(ut.participantSid)?String(ut.participantSid):"",quality:fn(ut.quality)?k.connectionQualityFromJSON(ut.quality):0,score:fn(ut.score)?Number(ut.score):0}},toJSON(ut){const It={};return ut.participantSid!==void 0&&(It.participantSid=ut.participantSid),ut.quality!==void 0&&(It.quality=k.connectionQualityToJSON(ut.quality)),ut.score!==void 0&&(It.score=ut.score),It},fromPartial(ut){var It,Pt,Zt;const Dt=Qt();return Dt.participantSid=(It=ut.participantSid)!==null&&It!==void 0?It:"",Dt.quality=(Pt=ut.quality)!==null&&Pt!==void 0?Pt:0,Dt.score=(Zt=ut.score)!==null&&Zt!==void 0?Zt:0,Dt}};function xt(){return{updates:[]}}a.ConnectionQualityUpdate={encode(ut,It=_.default.Writer.create()){if(ut.updates!==void 0&&ut.updates.length!==0)for(const Pt of ut.updates)a.ConnectionQualityInfo.encode(Pt,It.uint32(10).fork()).ldelim();return It},decode(ut,It){const Pt=ut instanceof _.default.Reader?ut:new _.default.Reader(ut);let Zt=It===void 0?Pt.len:Pt.pos+It;const Dt=xt();for(;Pt.pos<Zt;){const Ot=Pt.uint32();switch(Ot>>>3){case 1:Dt.updates.push(a.ConnectionQualityInfo.decode(Pt,Pt.uint32()));break;default:Pt.skipType(Ot&7);break}}return Dt},fromJSON(ut){return{updates:Array.isArray(ut==null?void 0:ut.updates)?ut.updates.map(It=>a.ConnectionQualityInfo.fromJSON(It)):[]}},toJSON(ut){const It={};return ut.updates?It.updates=ut.updates.map(Pt=>Pt?a.ConnectionQualityInfo.toJSON(Pt):void 0):It.updates=[],It},fromPartial(ut){var It;const Pt=xt();return Pt.updates=((It=ut.updates)===null||It===void 0?void 0:It.map(Zt=>a.ConnectionQualityInfo.fromPartial(Zt)))||[],Pt}};function rn(){return{participantSid:"",trackSid:"",state:0}}a.StreamStateInfo={encode(ut,It=_.default.Writer.create()){return ut.participantSid!==void 0&&ut.participantSid!==""&&It.uint32(10).string(ut.participantSid),ut.trackSid!==void 0&&ut.trackSid!==""&&It.uint32(18).string(ut.trackSid),ut.state!==void 0&&ut.state!==0&&It.uint32(24).int32(ut.state),It},decode(ut,It){const Pt=ut instanceof _.default.Reader?ut:new _.default.Reader(ut);let Zt=It===void 0?Pt.len:Pt.pos+It;const Dt=rn();for(;Pt.pos<Zt;){const Ot=Pt.uint32();switch(Ot>>>3){case 1:Dt.participantSid=Pt.string();break;case 2:Dt.trackSid=Pt.string();break;case 3:Dt.state=Pt.int32();break;default:Pt.skipType(Ot&7);break}}return Dt},fromJSON(ut){return{participantSid:fn(ut.participantSid)?String(ut.participantSid):"",trackSid:fn(ut.trackSid)?String(ut.trackSid):"",state:fn(ut.state)?it(ut.state):0}},toJSON(ut){const It={};return ut.participantSid!==void 0&&(It.participantSid=ut.participantSid),ut.trackSid!==void 0&&(It.trackSid=ut.trackSid),ut.state!==void 0&&(It.state=ft(ut.state)),It},fromPartial(ut){var It,Pt,Zt;const Dt=rn();return Dt.participantSid=(It=ut.participantSid)!==null&&It!==void 0?It:"",Dt.trackSid=(Pt=ut.trackSid)!==null&&Pt!==void 0?Pt:"",Dt.state=(Zt=ut.state)!==null&&Zt!==void 0?Zt:0,Dt}};function Sn(){return{streamStates:[]}}a.StreamStateUpdate={encode(ut,It=_.default.Writer.create()){if(ut.streamStates!==void 0&&ut.streamStates.length!==0)for(const Pt of ut.streamStates)a.StreamStateInfo.encode(Pt,It.uint32(10).fork()).ldelim();return It},decode(ut,It){const Pt=ut instanceof _.default.Reader?ut:new _.default.Reader(ut);let Zt=It===void 0?Pt.len:Pt.pos+It;const Dt=Sn();for(;Pt.pos<Zt;){const Ot=Pt.uint32();switch(Ot>>>3){case 1:Dt.streamStates.push(a.StreamStateInfo.decode(Pt,Pt.uint32()));break;default:Pt.skipType(Ot&7);break}}return Dt},fromJSON(ut){return{streamStates:Array.isArray(ut==null?void 0:ut.streamStates)?ut.streamStates.map(It=>a.StreamStateInfo.fromJSON(It)):[]}},toJSON(ut){const It={};return ut.streamStates?It.streamStates=ut.streamStates.map(Pt=>Pt?a.StreamStateInfo.toJSON(Pt):void 0):It.streamStates=[],It},fromPartial(ut){var It;const Pt=Sn();return Pt.streamStates=((It=ut.streamStates)===null||It===void 0?void 0:It.map(Zt=>a.StreamStateInfo.fromPartial(Zt)))||[],Pt}};function bn(){return{quality:0,enabled:!1}}a.SubscribedQuality={encode(ut,It=_.default.Writer.create()){return ut.quality!==void 0&&ut.quality!==0&&It.uint32(8).int32(ut.quality),ut.enabled===!0&&It.uint32(16).bool(ut.enabled),It},decode(ut,It){const Pt=ut instanceof _.default.Reader?ut:new _.default.Reader(ut);let Zt=It===void 0?Pt.len:Pt.pos+It;const Dt=bn();for(;Pt.pos<Zt;){const Ot=Pt.uint32();switch(Ot>>>3){case 1:Dt.quality=Pt.int32();break;case 2:Dt.enabled=Pt.bool();break;default:Pt.skipType(Ot&7);break}}return Dt},fromJSON(ut){return{quality:fn(ut.quality)?k.videoQualityFromJSON(ut.quality):0,enabled:fn(ut.enabled)?!!ut.enabled:!1}},toJSON(ut){const It={};return ut.quality!==void 0&&(It.quality=k.videoQualityToJSON(ut.quality)),ut.enabled!==void 0&&(It.enabled=ut.enabled),It},fromPartial(ut){var It,Pt;const Zt=bn();return Zt.quality=(It=ut.quality)!==null&&It!==void 0?It:0,Zt.enabled=(Pt=ut.enabled)!==null&&Pt!==void 0?Pt:!1,Zt}};function kn(){return{codec:"",qualities:[]}}a.SubscribedCodec={encode(ut,It=_.default.Writer.create()){if(ut.codec!==void 0&&ut.codec!==""&&It.uint32(10).string(ut.codec),ut.qualities!==void 0&&ut.qualities.length!==0)for(const Pt of ut.qualities)a.SubscribedQuality.encode(Pt,It.uint32(18).fork()).ldelim();return It},decode(ut,It){const Pt=ut instanceof _.default.Reader?ut:new _.default.Reader(ut);let Zt=It===void 0?Pt.len:Pt.pos+It;const Dt=kn();for(;Pt.pos<Zt;){const Ot=Pt.uint32();switch(Ot>>>3){case 1:Dt.codec=Pt.string();break;case 2:Dt.qualities.push(a.SubscribedQuality.decode(Pt,Pt.uint32()));break;default:Pt.skipType(Ot&7);break}}return Dt},fromJSON(ut){return{codec:fn(ut.codec)?String(ut.codec):"",qualities:Array.isArray(ut==null?void 0:ut.qualities)?ut.qualities.map(It=>a.SubscribedQuality.fromJSON(It)):[]}},toJSON(ut){const It={};return ut.codec!==void 0&&(It.codec=ut.codec),ut.qualities?It.qualities=ut.qualities.map(Pt=>Pt?a.SubscribedQuality.toJSON(Pt):void 0):It.qualities=[],It},fromPartial(ut){var It,Pt;const Zt=kn();return Zt.codec=(It=ut.codec)!==null&&It!==void 0?It:"",Zt.qualities=((Pt=ut.qualities)===null||Pt===void 0?void 0:Pt.map(Dt=>a.SubscribedQuality.fromPartial(Dt)))||[],Zt}};function _n(){return{trackSid:"",subscribedQualities:[],subscribedCodecs:[]}}a.SubscribedQualityUpdate={encode(ut,It=_.default.Writer.create()){if(ut.trackSid!==void 0&&ut.trackSid!==""&&It.uint32(10).string(ut.trackSid),ut.subscribedQualities!==void 0&&ut.subscribedQualities.length!==0)for(const Pt of ut.subscribedQualities)a.SubscribedQuality.encode(Pt,It.uint32(18).fork()).ldelim();if(ut.subscribedCodecs!==void 0&&ut.subscribedCodecs.length!==0)for(const Pt of ut.subscribedCodecs)a.SubscribedCodec.encode(Pt,It.uint32(26).fork()).ldelim();return It},decode(ut,It){const Pt=ut instanceof _.default.Reader?ut:new _.default.Reader(ut);let Zt=It===void 0?Pt.len:Pt.pos+It;const Dt=_n();for(;Pt.pos<Zt;){const Ot=Pt.uint32();switch(Ot>>>3){case 1:Dt.trackSid=Pt.string();break;case 2:Dt.subscribedQualities.push(a.SubscribedQuality.decode(Pt,Pt.uint32()));break;case 3:Dt.subscribedCodecs.push(a.SubscribedCodec.decode(Pt,Pt.uint32()));break;default:Pt.skipType(Ot&7);break}}return Dt},fromJSON(ut){return{trackSid:fn(ut.trackSid)?String(ut.trackSid):"",subscribedQualities:Array.isArray(ut==null?void 0:ut.subscribedQualities)?ut.subscribedQualities.map(It=>a.SubscribedQuality.fromJSON(It)):[],subscribedCodecs:Array.isArray(ut==null?void 0:ut.subscribedCodecs)?ut.subscribedCodecs.map(It=>a.SubscribedCodec.fromJSON(It)):[]}},toJSON(ut){const It={};return ut.trackSid!==void 0&&(It.trackSid=ut.trackSid),ut.subscribedQualities?It.subscribedQualities=ut.subscribedQualities.map(Pt=>Pt?a.SubscribedQuality.toJSON(Pt):void 0):It.subscribedQualities=[],ut.subscribedCodecs?It.subscribedCodecs=ut.subscribedCodecs.map(Pt=>Pt?a.SubscribedCodec.toJSON(Pt):void 0):It.subscribedCodecs=[],It},fromPartial(ut){var It,Pt,Zt;const Dt=_n();return Dt.trackSid=(It=ut.trackSid)!==null&&It!==void 0?It:"",Dt.subscribedQualities=((Pt=ut.subscribedQualities)===null||Pt===void 0?void 0:Pt.map(Ot=>a.SubscribedQuality.fromPartial(Ot)))||[],Dt.subscribedCodecs=((Zt=ut.subscribedCodecs)===null||Zt===void 0?void 0:Zt.map(Ot=>a.SubscribedCodec.fromPartial(Ot)))||[],Dt}};function tn(){return{participantSid:"",allTracks:!1,trackSids:[],participantIdentity:""}}a.TrackPermission={encode(ut,It=_.default.Writer.create()){if(ut.participantSid!==void 0&&ut.participantSid!==""&&It.uint32(10).string(ut.participantSid),ut.allTracks===!0&&It.uint32(16).bool(ut.allTracks),ut.trackSids!==void 0&&ut.trackSids.length!==0)for(const Pt of ut.trackSids)It.uint32(26).string(Pt);return ut.participantIdentity!==void 0&&ut.participantIdentity!==""&&It.uint32(34).string(ut.participantIdentity),It},decode(ut,It){const Pt=ut instanceof _.default.Reader?ut:new _.default.Reader(ut);let Zt=It===void 0?Pt.len:Pt.pos+It;const Dt=tn();for(;Pt.pos<Zt;){const Ot=Pt.uint32();switch(Ot>>>3){case 1:Dt.participantSid=Pt.string();break;case 2:Dt.allTracks=Pt.bool();break;case 3:Dt.trackSids.push(Pt.string());break;case 4:Dt.participantIdentity=Pt.string();break;default:Pt.skipType(Ot&7);break}}return Dt},fromJSON(ut){return{participantSid:fn(ut.participantSid)?String(ut.participantSid):"",allTracks:fn(ut.allTracks)?!!ut.allTracks:!1,trackSids:Array.isArray(ut==null?void 0:ut.trackSids)?ut.trackSids.map(It=>String(It)):[],participantIdentity:fn(ut.participantIdentity)?String(ut.participantIdentity):""}},toJSON(ut){const It={};return ut.participantSid!==void 0&&(It.participantSid=ut.participantSid),ut.allTracks!==void 0&&(It.allTracks=ut.allTracks),ut.trackSids?It.trackSids=ut.trackSids.map(Pt=>Pt):It.trackSids=[],ut.participantIdentity!==void 0&&(It.participantIdentity=ut.participantIdentity),It},fromPartial(ut){var It,Pt,Zt,Dt;const Ot=tn();return Ot.participantSid=(It=ut.participantSid)!==null&&It!==void 0?It:"",Ot.allTracks=(Pt=ut.allTracks)!==null&&Pt!==void 0?Pt:!1,Ot.trackSids=((Zt=ut.trackSids)===null||Zt===void 0?void 0:Zt.map($t=>$t))||[],Ot.participantIdentity=(Dt=ut.participantIdentity)!==null&&Dt!==void 0?Dt:"",Ot}};function pn(){return{allParticipants:!1,trackPermissions:[]}}a.SubscriptionPermission={encode(ut,It=_.default.Writer.create()){if(ut.allParticipants===!0&&It.uint32(8).bool(ut.allParticipants),ut.trackPermissions!==void 0&&ut.trackPermissions.length!==0)for(const Pt of ut.trackPermissions)a.TrackPermission.encode(Pt,It.uint32(18).fork()).ldelim();return It},decode(ut,It){const Pt=ut instanceof _.default.Reader?ut:new _.default.Reader(ut);let Zt=It===void 0?Pt.len:Pt.pos+It;const Dt=pn();for(;Pt.pos<Zt;){const Ot=Pt.uint32();switch(Ot>>>3){case 1:Dt.allParticipants=Pt.bool();break;case 2:Dt.trackPermissions.push(a.TrackPermission.decode(Pt,Pt.uint32()));break;default:Pt.skipType(Ot&7);break}}return Dt},fromJSON(ut){return{allParticipants:fn(ut.allParticipants)?!!ut.allParticipants:!1,trackPermissions:Array.isArray(ut==null?void 0:ut.trackPermissions)?ut.trackPermissions.map(It=>a.TrackPermission.fromJSON(It)):[]}},toJSON(ut){const It={};return ut.allParticipants!==void 0&&(It.allParticipants=ut.allParticipants),ut.trackPermissions?It.trackPermissions=ut.trackPermissions.map(Pt=>Pt?a.TrackPermission.toJSON(Pt):void 0):It.trackPermissions=[],It},fromPartial(ut){var It,Pt;const Zt=pn();return Zt.allParticipants=(It=ut.allParticipants)!==null&&It!==void 0?It:!1,Zt.trackPermissions=((Pt=ut.trackPermissions)===null||Pt===void 0?void 0:Pt.map(Dt=>a.TrackPermission.fromPartial(Dt)))||[],Zt}};function yn(){return{participantSid:"",trackSid:"",allowed:!1}}a.SubscriptionPermissionUpdate={encode(ut,It=_.default.Writer.create()){return ut.participantSid!==void 0&&ut.participantSid!==""&&It.uint32(10).string(ut.participantSid),ut.trackSid!==void 0&&ut.trackSid!==""&&It.uint32(18).string(ut.trackSid),ut.allowed===!0&&It.uint32(24).bool(ut.allowed),It},decode(ut,It){const Pt=ut instanceof _.default.Reader?ut:new _.default.Reader(ut);let Zt=It===void 0?Pt.len:Pt.pos+It;const Dt=yn();for(;Pt.pos<Zt;){const Ot=Pt.uint32();switch(Ot>>>3){case 1:Dt.participantSid=Pt.string();break;case 2:Dt.trackSid=Pt.string();break;case 3:Dt.allowed=Pt.bool();break;default:Pt.skipType(Ot&7);break}}return Dt},fromJSON(ut){return{participantSid:fn(ut.participantSid)?String(ut.participantSid):"",trackSid:fn(ut.trackSid)?String(ut.trackSid):"",allowed:fn(ut.allowed)?!!ut.allowed:!1}},toJSON(ut){const It={};return ut.participantSid!==void 0&&(It.participantSid=ut.participantSid),ut.trackSid!==void 0&&(It.trackSid=ut.trackSid),ut.allowed!==void 0&&(It.allowed=ut.allowed),It},fromPartial(ut){var It,Pt,Zt;const Dt=yn();return Dt.participantSid=(It=ut.participantSid)!==null&&It!==void 0?It:"",Dt.trackSid=(Pt=ut.trackSid)!==null&&Pt!==void 0?Pt:"",Dt.allowed=(Zt=ut.allowed)!==null&&Zt!==void 0?Zt:!1,Dt}};function In(){return{answer:void 0,subscription:void 0,publishTracks:[],dataChannels:[],offer:void 0}}a.SyncState={encode(ut,It=_.default.Writer.create()){if(ut.answer!==void 0&&a.SessionDescription.encode(ut.answer,It.uint32(10).fork()).ldelim(),ut.subscription!==void 0&&a.UpdateSubscription.encode(ut.subscription,It.uint32(18).fork()).ldelim(),ut.publishTracks!==void 0&&ut.publishTracks.length!==0)for(const Pt of ut.publishTracks)a.TrackPublishedResponse.encode(Pt,It.uint32(26).fork()).ldelim();if(ut.dataChannels!==void 0&&ut.dataChannels.length!==0)for(const Pt of ut.dataChannels)a.DataChannelInfo.encode(Pt,It.uint32(34).fork()).ldelim();return ut.offer!==void 0&&a.SessionDescription.encode(ut.offer,It.uint32(42).fork()).ldelim(),It},decode(ut,It){const Pt=ut instanceof _.default.Reader?ut:new _.default.Reader(ut);let Zt=It===void 0?Pt.len:Pt.pos+It;const Dt=In();for(;Pt.pos<Zt;){const Ot=Pt.uint32();switch(Ot>>>3){case 1:Dt.answer=a.SessionDescription.decode(Pt,Pt.uint32());break;case 2:Dt.subscription=a.UpdateSubscription.decode(Pt,Pt.uint32());break;case 3:Dt.publishTracks.push(a.TrackPublishedResponse.decode(Pt,Pt.uint32()));break;case 4:Dt.dataChannels.push(a.DataChannelInfo.decode(Pt,Pt.uint32()));break;case 5:Dt.offer=a.SessionDescription.decode(Pt,Pt.uint32());break;default:Pt.skipType(Ot&7);break}}return Dt},fromJSON(ut){return{answer:fn(ut.answer)?a.SessionDescription.fromJSON(ut.answer):void 0,subscription:fn(ut.subscription)?a.UpdateSubscription.fromJSON(ut.subscription):void 0,publishTracks:Array.isArray(ut==null?void 0:ut.publishTracks)?ut.publishTracks.map(It=>a.TrackPublishedResponse.fromJSON(It)):[],dataChannels:Array.isArray(ut==null?void 0:ut.dataChannels)?ut.dataChannels.map(It=>a.DataChannelInfo.fromJSON(It)):[],offer:fn(ut.offer)?a.SessionDescription.fromJSON(ut.offer):void 0}},toJSON(ut){const It={};return ut.answer!==void 0&&(It.answer=ut.answer?a.SessionDescription.toJSON(ut.answer):void 0),ut.subscription!==void 0&&(It.subscription=ut.subscription?a.UpdateSubscription.toJSON(ut.subscription):void 0),ut.publishTracks?It.publishTracks=ut.publishTracks.map(Pt=>Pt?a.TrackPublishedResponse.toJSON(Pt):void 0):It.publishTracks=[],ut.dataChannels?It.dataChannels=ut.dataChannels.map(Pt=>Pt?a.DataChannelInfo.toJSON(Pt):void 0):It.dataChannels=[],ut.offer!==void 0&&(It.offer=ut.offer?a.SessionDescription.toJSON(ut.offer):void 0),It},fromPartial(ut){var It,Pt;const Zt=In();return Zt.answer=ut.answer!==void 0&&ut.answer!==null?a.SessionDescription.fromPartial(ut.answer):void 0,Zt.subscription=ut.subscription!==void 0&&ut.subscription!==null?a.UpdateSubscription.fromPartial(ut.subscription):void 0,Zt.publishTracks=((It=ut.publishTracks)===null||It===void 0?void 0:It.map(Dt=>a.TrackPublishedResponse.fromPartial(Dt)))||[],Zt.dataChannels=((Pt=ut.dataChannels)===null||Pt===void 0?void 0:Pt.map(Dt=>a.DataChannelInfo.fromPartial(Dt)))||[],Zt.offer=ut.offer!==void 0&&ut.offer!==null?a.SessionDescription.fromPartial(ut.offer):void 0,Zt}};function sn(){return{label:"",id:0,target:0}}a.DataChannelInfo={encode(ut,It=_.default.Writer.create()){return ut.label!==void 0&&ut.label!==""&&It.uint32(10).string(ut.label),ut.id!==void 0&&ut.id!==0&&It.uint32(16).uint32(ut.id),ut.target!==void 0&&ut.target!==0&&It.uint32(24).int32(ut.target),It},decode(ut,It){const Pt=ut instanceof _.default.Reader?ut:new _.default.Reader(ut);let Zt=It===void 0?Pt.len:Pt.pos+It;const Dt=sn();for(;Pt.pos<Zt;){const Ot=Pt.uint32();switch(Ot>>>3){case 1:Dt.label=Pt.string();break;case 2:Dt.id=Pt.uint32();break;case 3:Dt.target=Pt.int32();break;default:Pt.skipType(Ot&7);break}}return Dt},fromJSON(ut){return{label:fn(ut.label)?String(ut.label):"",id:fn(ut.id)?Number(ut.id):0,target:fn(ut.target)?_e(ut.target):0}},toJSON(ut){const It={};return ut.label!==void 0&&(It.label=ut.label),ut.id!==void 0&&(It.id=Math.round(ut.id)),ut.target!==void 0&&(It.target=et(ut.target)),It},fromPartial(ut){var It,Pt,Zt;const Dt=sn();return Dt.label=(It=ut.label)!==null&&It!==void 0?It:"",Dt.id=(Pt=ut.id)!==null&&Pt!==void 0?Pt:0,Dt.target=(Zt=ut.target)!==null&&Zt!==void 0?Zt:0,Dt}};function vn(){return{speakerUpdate:void 0,nodeFailure:void 0,migration:void 0,serverLeave:void 0,switchCandidateProtocol:void 0}}a.SimulateScenario={encode(ut,It=_.default.Writer.create()){return ut.speakerUpdate!==void 0&&It.uint32(8).int32(ut.speakerUpdate),ut.nodeFailure!==void 0&&It.uint32(16).bool(ut.nodeFailure),ut.migration!==void 0&&It.uint32(24).bool(ut.migration),ut.serverLeave!==void 0&&It.uint32(32).bool(ut.serverLeave),ut.switchCandidateProtocol!==void 0&&It.uint32(40).int32(ut.switchCandidateProtocol),It},decode(ut,It){const Pt=ut instanceof _.default.Reader?ut:new _.default.Reader(ut);let Zt=It===void 0?Pt.len:Pt.pos+It;const Dt=vn();for(;Pt.pos<Zt;){const Ot=Pt.uint32();switch(Ot>>>3){case 1:Dt.speakerUpdate=Pt.int32();break;case 2:Dt.nodeFailure=Pt.bool();break;case 3:Dt.migration=Pt.bool();break;case 4:Dt.serverLeave=Pt.bool();break;case 5:Dt.switchCandidateProtocol=Pt.int32();break;default:Pt.skipType(Ot&7);break}}return Dt},fromJSON(ut){return{speakerUpdate:fn(ut.speakerUpdate)?Number(ut.speakerUpdate):void 0,nodeFailure:fn(ut.nodeFailure)?!!ut.nodeFailure:void 0,migration:fn(ut.migration)?!!ut.migration:void 0,serverLeave:fn(ut.serverLeave)?!!ut.serverLeave:void 0,switchCandidateProtocol:fn(ut.switchCandidateProtocol)?mt(ut.switchCandidateProtocol):void 0}},toJSON(ut){const It={};return ut.speakerUpdate!==void 0&&(It.speakerUpdate=Math.round(ut.speakerUpdate)),ut.nodeFailure!==void 0&&(It.nodeFailure=ut.nodeFailure),ut.migration!==void 0&&(It.migration=ut.migration),ut.serverLeave!==void 0&&(It.serverLeave=ut.serverLeave),ut.switchCandidateProtocol!==void 0&&(It.switchCandidateProtocol=ut.switchCandidateProtocol!==void 0?St(ut.switchCandidateProtocol):void 0),It},fromPartial(ut){var It,Pt,Zt,Dt,Ot;const $t=vn();return $t.speakerUpdate=(It=ut.speakerUpdate)!==null&&It!==void 0?It:void 0,$t.nodeFailure=(Pt=ut.nodeFailure)!==null&&Pt!==void 0?Pt:void 0,$t.migration=(Zt=ut.migration)!==null&&Zt!==void 0?Zt:void 0,$t.serverLeave=(Dt=ut.serverLeave)!==null&&Dt!==void 0?Dt:void 0,$t.switchCandidateProtocol=(Ot=ut.switchCandidateProtocol)!==null&&Ot!==void 0?Ot:void 0,$t}};var Cn=(()=>{if(typeof Cn<"u")return Cn;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof commonjsGlobal$1<"u")return commonjsGlobal$1;throw"Unable to locate global object"})();function Nn(ut){if(ut.gt(Number.MAX_SAFE_INTEGER))throw new Cn.Error("Value is larger than Number.MAX_SAFE_INTEGER");return ut.toNumber()}_.default.util.Long!==b.default&&(_.default.util.Long=b.default,_.default.configure());function fn(ut){return ut!=null}})(livekit_rtc);(function(a){var c=commonjsGlobal$1&&commonjsGlobal$1.__importDefault||function(dt){return dt&&dt.__esModule?dt:{default:dt}};Object.defineProperty(a,"__esModule",{value:!0}),a.RoomInternal=a.KeepAlive=a.RemoveParticipant=a.EndSession=a.StartSession=a.SignalNodeMessage=a.RTCNodeMessage=a.NodeStats=a.Node=a.nodeStateToJSON=a.nodeStateFromJSON=a.NodeState=a.nodeTypeToJSON=a.nodeTypeFromJSON=a.NodeType=a.protobufPackage=void 0;const b=c(umdExports),_=c(minimal),k=livekit_egress,j=livekit_models,_e=livekit_room,et=livekit_rtc;a.protobufPackage="livekit";var nt;(function(dt){dt[dt.SERVER=0]="SERVER",dt[dt.CONTROLLER=1]="CONTROLLER",dt[dt.MEDIA=2]="MEDIA",dt[dt.TURN=4]="TURN",dt[dt.UNRECOGNIZED=-1]="UNRECOGNIZED"})(nt=a.NodeType||(a.NodeType={}));function it(dt){switch(dt){case 0:case"SERVER":return nt.SERVER;case 1:case"CONTROLLER":return nt.CONTROLLER;case 2:case"MEDIA":return nt.MEDIA;case 4:case"TURN":return nt.TURN;case-1:case"UNRECOGNIZED":default:return nt.UNRECOGNIZED}}a.nodeTypeFromJSON=it;function ft(dt){switch(dt){case nt.SERVER:return"SERVER";case nt.CONTROLLER:return"CONTROLLER";case nt.MEDIA:return"MEDIA";case nt.TURN:return"TURN";case nt.UNRECOGNIZED:default:return"UNRECOGNIZED"}}a.nodeTypeToJSON=ft;var pt;(function(dt){dt[dt.STARTING_UP=0]="STARTING_UP",dt[dt.SERVING=1]="SERVING",dt[dt.SHUTTING_DOWN=2]="SHUTTING_DOWN",dt[dt.UNRECOGNIZED=-1]="UNRECOGNIZED"})(pt=a.NodeState||(a.NodeState={}));function mt(dt){switch(dt){case 0:case"STARTING_UP":return pt.STARTING_UP;case 1:case"SERVING":return pt.SERVING;case 2:case"SHUTTING_DOWN":return pt.SHUTTING_DOWN;case-1:case"UNRECOGNIZED":default:return pt.UNRECOGNIZED}}a.nodeStateFromJSON=mt;function St(dt){switch(dt){case pt.STARTING_UP:return"STARTING_UP";case pt.SERVING:return"SERVING";case pt.SHUTTING_DOWN:return"SHUTTING_DOWN";case pt.UNRECOGNIZED:default:return"UNRECOGNIZED"}}a.nodeStateToJSON=St;function yt(){return{id:"",ip:"",numCpus:0,stats:void 0,type:0,state:0,region:""}}a.Node={encode(dt,lt=_.default.Writer.create()){return dt.id!==void 0&&dt.id!==""&&lt.uint32(10).string(dt.id),dt.ip!==void 0&&dt.ip!==""&&lt.uint32(18).string(dt.ip),dt.numCpus!==void 0&&dt.numCpus!==0&&lt.uint32(24).uint32(dt.numCpus),dt.stats!==void 0&&a.NodeStats.encode(dt.stats,lt.uint32(34).fork()).ldelim(),dt.type!==void 0&&dt.type!==0&&lt.uint32(40).int32(dt.type),dt.state!==void 0&&dt.state!==0&&lt.uint32(48).int32(dt.state),dt.region!==void 0&&dt.region!==""&&lt.uint32(58).string(dt.region),lt},decode(dt,lt){const kt=dt instanceof _.default.Reader?dt:new _.default.Reader(dt);let Lt=lt===void 0?kt.len:kt.pos+lt;const Jt=yt();for(;kt.pos<Lt;){const en=kt.uint32();switch(en>>>3){case 1:Jt.id=kt.string();break;case 2:Jt.ip=kt.string();break;case 3:Jt.numCpus=kt.uint32();break;case 4:Jt.stats=a.NodeStats.decode(kt,kt.uint32());break;case 5:Jt.type=kt.int32();break;case 6:Jt.state=kt.int32();break;case 7:Jt.region=kt.string();break;default:kt.skipType(en&7);break}}return Jt},fromJSON(dt){return{id:ct(dt.id)?String(dt.id):"",ip:ct(dt.ip)?String(dt.ip):"",numCpus:ct(dt.numCpus)?Number(dt.numCpus):0,stats:ct(dt.stats)?a.NodeStats.fromJSON(dt.stats):void 0,type:ct(dt.type)?it(dt.type):0,state:ct(dt.state)?mt(dt.state):0,region:ct(dt.region)?String(dt.region):""}},toJSON(dt){const lt={};return dt.id!==void 0&&(lt.id=dt.id),dt.ip!==void 0&&(lt.ip=dt.ip),dt.numCpus!==void 0&&(lt.numCpus=Math.round(dt.numCpus)),dt.stats!==void 0&&(lt.stats=dt.stats?a.NodeStats.toJSON(dt.stats):void 0),dt.type!==void 0&&(lt.type=ft(dt.type)),dt.state!==void 0&&(lt.state=St(dt.state)),dt.region!==void 0&&(lt.region=dt.region),lt},fromPartial(dt){var lt,kt,Lt,Jt,en,Qt;const xt=yt();return xt.id=(lt=dt.id)!==null&&lt!==void 0?lt:"",xt.ip=(kt=dt.ip)!==null&&kt!==void 0?kt:"",xt.numCpus=(Lt=dt.numCpus)!==null&&Lt!==void 0?Lt:0,xt.stats=dt.stats!==void 0&&dt.stats!==null?a.NodeStats.fromPartial(dt.stats):void 0,xt.type=(Jt=dt.type)!==null&&Jt!==void 0?Jt:0,xt.state=(en=dt.state)!==null&&en!==void 0?en:0,xt.region=(Qt=dt.region)!==null&&Qt!==void 0?Qt:"",xt}};function _t(){return{startedAt:0,updatedAt:0,numRooms:0,numClients:0,numTracksIn:0,numTracksOut:0,bytesIn:0,bytesOut:0,packetsIn:0,packetsOut:0,nackTotal:0,bytesInPerSec:0,bytesOutPerSec:0,packetsInPerSec:0,packetsOutPerSec:0,nackPerSec:0,numCpus:0,loadAvgLast1min:0,loadAvgLast5min:0,loadAvgLast15min:0,cpuLoad:0,memoryLoad:0,sysPacketsOut:0,sysPacketsDropped:0,sysPacketsOutPerSec:0,sysPacketsDroppedPerSec:0,sysPacketsDroppedPctPerSec:0,retransmitBytesOut:0,retransmitPacketsOut:0,retransmitBytesOutPerSec:0,retransmitPacketsOutPerSec:0,participantJoin:0,participantJoinPerSec:0}}a.NodeStats={encode(dt,lt=_.default.Writer.create()){return dt.startedAt!==void 0&&dt.startedAt!==0&&lt.uint32(8).int64(dt.startedAt),dt.updatedAt!==void 0&&dt.updatedAt!==0&&lt.uint32(16).int64(dt.updatedAt),dt.numRooms!==void 0&&dt.numRooms!==0&&lt.uint32(24).int32(dt.numRooms),dt.numClients!==void 0&&dt.numClients!==0&&lt.uint32(32).int32(dt.numClients),dt.numTracksIn!==void 0&&dt.numTracksIn!==0&&lt.uint32(40).int32(dt.numTracksIn),dt.numTracksOut!==void 0&&dt.numTracksOut!==0&&lt.uint32(48).int32(dt.numTracksOut),dt.bytesIn!==void 0&&dt.bytesIn!==0&&lt.uint32(56).uint64(dt.bytesIn),dt.bytesOut!==void 0&&dt.bytesOut!==0&&lt.uint32(64).uint64(dt.bytesOut),dt.packetsIn!==void 0&&dt.packetsIn!==0&&lt.uint32(72).uint64(dt.packetsIn),dt.packetsOut!==void 0&&dt.packetsOut!==0&&lt.uint32(80).uint64(dt.packetsOut),dt.nackTotal!==void 0&&dt.nackTotal!==0&&lt.uint32(88).uint64(dt.nackTotal),dt.bytesInPerSec!==void 0&&dt.bytesInPerSec!==0&&lt.uint32(101).float(dt.bytesInPerSec),dt.bytesOutPerSec!==void 0&&dt.bytesOutPerSec!==0&&lt.uint32(109).float(dt.bytesOutPerSec),dt.packetsInPerSec!==void 0&&dt.packetsInPerSec!==0&&lt.uint32(117).float(dt.packetsInPerSec),dt.packetsOutPerSec!==void 0&&dt.packetsOutPerSec!==0&&lt.uint32(125).float(dt.packetsOutPerSec),dt.nackPerSec!==void 0&&dt.nackPerSec!==0&&lt.uint32(133).float(dt.nackPerSec),dt.numCpus!==void 0&&dt.numCpus!==0&&lt.uint32(136).uint32(dt.numCpus),dt.loadAvgLast1min!==void 0&&dt.loadAvgLast1min!==0&&lt.uint32(149).float(dt.loadAvgLast1min),dt.loadAvgLast5min!==void 0&&dt.loadAvgLast5min!==0&&lt.uint32(157).float(dt.loadAvgLast5min),dt.loadAvgLast15min!==void 0&&dt.loadAvgLast15min!==0&&lt.uint32(165).float(dt.loadAvgLast15min),dt.cpuLoad!==void 0&&dt.cpuLoad!==0&&lt.uint32(173).float(dt.cpuLoad),dt.memoryLoad!==void 0&&dt.memoryLoad!==0&&lt.uint32(269).float(dt.memoryLoad),dt.sysPacketsOut!==void 0&&dt.sysPacketsOut!==0&&lt.uint32(224).uint32(dt.sysPacketsOut),dt.sysPacketsDropped!==void 0&&dt.sysPacketsDropped!==0&&lt.uint32(232).uint32(dt.sysPacketsDropped),dt.sysPacketsOutPerSec!==void 0&&dt.sysPacketsOutPerSec!==0&&lt.uint32(245).float(dt.sysPacketsOutPerSec),dt.sysPacketsDroppedPerSec!==void 0&&dt.sysPacketsDroppedPerSec!==0&&lt.uint32(253).float(dt.sysPacketsDroppedPerSec),dt.sysPacketsDroppedPctPerSec!==void 0&&dt.sysPacketsDroppedPctPerSec!==0&&lt.uint32(261).float(dt.sysPacketsDroppedPctPerSec),dt.retransmitBytesOut!==void 0&&dt.retransmitBytesOut!==0&&lt.uint32(176).uint64(dt.retransmitBytesOut),dt.retransmitPacketsOut!==void 0&&dt.retransmitPacketsOut!==0&&lt.uint32(184).uint64(dt.retransmitPacketsOut),dt.retransmitBytesOutPerSec!==void 0&&dt.retransmitBytesOutPerSec!==0&&lt.uint32(197).float(dt.retransmitBytesOutPerSec),dt.retransmitPacketsOutPerSec!==void 0&&dt.retransmitPacketsOutPerSec!==0&&lt.uint32(205).float(dt.retransmitPacketsOutPerSec),dt.participantJoin!==void 0&&dt.participantJoin!==0&&lt.uint32(208).uint64(dt.participantJoin),dt.participantJoinPerSec!==void 0&&dt.participantJoinPerSec!==0&&lt.uint32(221).float(dt.participantJoinPerSec),lt},decode(dt,lt){const kt=dt instanceof _.default.Reader?dt:new _.default.Reader(dt);let Lt=lt===void 0?kt.len:kt.pos+lt;const Jt=_t();for(;kt.pos<Lt;){const en=kt.uint32();switch(en>>>3){case 1:Jt.startedAt=Ht(kt.int64());break;case 2:Jt.updatedAt=Ht(kt.int64());break;case 3:Jt.numRooms=kt.int32();break;case 4:Jt.numClients=kt.int32();break;case 5:Jt.numTracksIn=kt.int32();break;case 6:Jt.numTracksOut=kt.int32();break;case 7:Jt.bytesIn=Ht(kt.uint64());break;case 8:Jt.bytesOut=Ht(kt.uint64());break;case 9:Jt.packetsIn=Ht(kt.uint64());break;case 10:Jt.packetsOut=Ht(kt.uint64());break;case 11:Jt.nackTotal=Ht(kt.uint64());break;case 12:Jt.bytesInPerSec=kt.float();break;case 13:Jt.bytesOutPerSec=kt.float();break;case 14:Jt.packetsInPerSec=kt.float();break;case 15:Jt.packetsOutPerSec=kt.float();break;case 16:Jt.nackPerSec=kt.float();break;case 17:Jt.numCpus=kt.uint32();break;case 18:Jt.loadAvgLast1min=kt.float();break;case 19:Jt.loadAvgLast5min=kt.float();break;case 20:Jt.loadAvgLast15min=kt.float();break;case 21:Jt.cpuLoad=kt.float();break;case 33:Jt.memoryLoad=kt.float();break;case 28:Jt.sysPacketsOut=kt.uint32();break;case 29:Jt.sysPacketsDropped=kt.uint32();break;case 30:Jt.sysPacketsOutPerSec=kt.float();break;case 31:Jt.sysPacketsDroppedPerSec=kt.float();break;case 32:Jt.sysPacketsDroppedPctPerSec=kt.float();break;case 22:Jt.retransmitBytesOut=Ht(kt.uint64());break;case 23:Jt.retransmitPacketsOut=Ht(kt.uint64());break;case 24:Jt.retransmitBytesOutPerSec=kt.float();break;case 25:Jt.retransmitPacketsOutPerSec=kt.float();break;case 26:Jt.participantJoin=Ht(kt.uint64());break;case 27:Jt.participantJoinPerSec=kt.float();break;default:kt.skipType(en&7);break}}return Jt},fromJSON(dt){return{startedAt:ct(dt.startedAt)?Number(dt.startedAt):0,updatedAt:ct(dt.updatedAt)?Number(dt.updatedAt):0,numRooms:ct(dt.numRooms)?Number(dt.numRooms):0,numClients:ct(dt.numClients)?Number(dt.numClients):0,numTracksIn:ct(dt.numTracksIn)?Number(dt.numTracksIn):0,numTracksOut:ct(dt.numTracksOut)?Number(dt.numTracksOut):0,bytesIn:ct(dt.bytesIn)?Number(dt.bytesIn):0,bytesOut:ct(dt.bytesOut)?Number(dt.bytesOut):0,packetsIn:ct(dt.packetsIn)?Number(dt.packetsIn):0,packetsOut:ct(dt.packetsOut)?Number(dt.packetsOut):0,nackTotal:ct(dt.nackTotal)?Number(dt.nackTotal):0,bytesInPerSec:ct(dt.bytesInPerSec)?Number(dt.bytesInPerSec):0,bytesOutPerSec:ct(dt.bytesOutPerSec)?Number(dt.bytesOutPerSec):0,packetsInPerSec:ct(dt.packetsInPerSec)?Number(dt.packetsInPerSec):0,packetsOutPerSec:ct(dt.packetsOutPerSec)?Number(dt.packetsOutPerSec):0,nackPerSec:ct(dt.nackPerSec)?Number(dt.nackPerSec):0,numCpus:ct(dt.numCpus)?Number(dt.numCpus):0,loadAvgLast1min:ct(dt.loadAvgLast1min)?Number(dt.loadAvgLast1min):0,loadAvgLast5min:ct(dt.loadAvgLast5min)?Number(dt.loadAvgLast5min):0,loadAvgLast15min:ct(dt.loadAvgLast15min)?Number(dt.loadAvgLast15min):0,cpuLoad:ct(dt.cpuLoad)?Number(dt.cpuLoad):0,memoryLoad:ct(dt.memoryLoad)?Number(dt.memoryLoad):0,sysPacketsOut:ct(dt.sysPacketsOut)?Number(dt.sysPacketsOut):0,sysPacketsDropped:ct(dt.sysPacketsDropped)?Number(dt.sysPacketsDropped):0,sysPacketsOutPerSec:ct(dt.sysPacketsOutPerSec)?Number(dt.sysPacketsOutPerSec):0,sysPacketsDroppedPerSec:ct(dt.sysPacketsDroppedPerSec)?Number(dt.sysPacketsDroppedPerSec):0,sysPacketsDroppedPctPerSec:ct(dt.sysPacketsDroppedPctPerSec)?Number(dt.sysPacketsDroppedPctPerSec):0,retransmitBytesOut:ct(dt.retransmitBytesOut)?Number(dt.retransmitBytesOut):0,retransmitPacketsOut:ct(dt.retransmitPacketsOut)?Number(dt.retransmitPacketsOut):0,retransmitBytesOutPerSec:ct(dt.retransmitBytesOutPerSec)?Number(dt.retransmitBytesOutPerSec):0,retransmitPacketsOutPerSec:ct(dt.retransmitPacketsOutPerSec)?Number(dt.retransmitPacketsOutPerSec):0,participantJoin:ct(dt.participantJoin)?Number(dt.participantJoin):0,participantJoinPerSec:ct(dt.participantJoinPerSec)?Number(dt.participantJoinPerSec):0}},toJSON(dt){const lt={};return dt.startedAt!==void 0&&(lt.startedAt=Math.round(dt.startedAt)),dt.updatedAt!==void 0&&(lt.updatedAt=Math.round(dt.updatedAt)),dt.numRooms!==void 0&&(lt.numRooms=Math.round(dt.numRooms)),dt.numClients!==void 0&&(lt.numClients=Math.round(dt.numClients)),dt.numTracksIn!==void 0&&(lt.numTracksIn=Math.round(dt.numTracksIn)),dt.numTracksOut!==void 0&&(lt.numTracksOut=Math.round(dt.numTracksOut)),dt.bytesIn!==void 0&&(lt.bytesIn=Math.round(dt.bytesIn)),dt.bytesOut!==void 0&&(lt.bytesOut=Math.round(dt.bytesOut)),dt.packetsIn!==void 0&&(lt.packetsIn=Math.round(dt.packetsIn)),dt.packetsOut!==void 0&&(lt.packetsOut=Math.round(dt.packetsOut)),dt.nackTotal!==void 0&&(lt.nackTotal=Math.round(dt.nackTotal)),dt.bytesInPerSec!==void 0&&(lt.bytesInPerSec=dt.bytesInPerSec),dt.bytesOutPerSec!==void 0&&(lt.bytesOutPerSec=dt.bytesOutPerSec),dt.packetsInPerSec!==void 0&&(lt.packetsInPerSec=dt.packetsInPerSec),dt.packetsOutPerSec!==void 0&&(lt.packetsOutPerSec=dt.packetsOutPerSec),dt.nackPerSec!==void 0&&(lt.nackPerSec=dt.nackPerSec),dt.numCpus!==void 0&&(lt.numCpus=Math.round(dt.numCpus)),dt.loadAvgLast1min!==void 0&&(lt.loadAvgLast1min=dt.loadAvgLast1min),dt.loadAvgLast5min!==void 0&&(lt.loadAvgLast5min=dt.loadAvgLast5min),dt.loadAvgLast15min!==void 0&&(lt.loadAvgLast15min=dt.loadAvgLast15min),dt.cpuLoad!==void 0&&(lt.cpuLoad=dt.cpuLoad),dt.memoryLoad!==void 0&&(lt.memoryLoad=dt.memoryLoad),dt.sysPacketsOut!==void 0&&(lt.sysPacketsOut=Math.round(dt.sysPacketsOut)),dt.sysPacketsDropped!==void 0&&(lt.sysPacketsDropped=Math.round(dt.sysPacketsDropped)),dt.sysPacketsOutPerSec!==void 0&&(lt.sysPacketsOutPerSec=dt.sysPacketsOutPerSec),dt.sysPacketsDroppedPerSec!==void 0&&(lt.sysPacketsDroppedPerSec=dt.sysPacketsDroppedPerSec),dt.sysPacketsDroppedPctPerSec!==void 0&&(lt.sysPacketsDroppedPctPerSec=dt.sysPacketsDroppedPctPerSec),dt.retransmitBytesOut!==void 0&&(lt.retransmitBytesOut=Math.round(dt.retransmitBytesOut)),dt.retransmitPacketsOut!==void 0&&(lt.retransmitPacketsOut=Math.round(dt.retransmitPacketsOut)),dt.retransmitBytesOutPerSec!==void 0&&(lt.retransmitBytesOutPerSec=dt.retransmitBytesOutPerSec),dt.retransmitPacketsOutPerSec!==void 0&&(lt.retransmitPacketsOutPerSec=dt.retransmitPacketsOutPerSec),dt.participantJoin!==void 0&&(lt.participantJoin=Math.round(dt.participantJoin)),dt.participantJoinPerSec!==void 0&&(lt.participantJoinPerSec=dt.participantJoinPerSec),lt},fromPartial(dt){var lt,kt,Lt,Jt,en,Qt,xt,rn,Sn,bn,kn,_n,tn,pn,yn,In,sn,vn,Cn,Nn,fn,ut,It,Pt,Zt,Dt,Ot,$t,Gt,nn,gn,Xt,at;const Rt=_t();return Rt.startedAt=(lt=dt.startedAt)!==null&&lt!==void 0?lt:0,Rt.updatedAt=(kt=dt.updatedAt)!==null&&kt!==void 0?kt:0,Rt.numRooms=(Lt=dt.numRooms)!==null&&Lt!==void 0?Lt:0,Rt.numClients=(Jt=dt.numClients)!==null&&Jt!==void 0?Jt:0,Rt.numTracksIn=(en=dt.numTracksIn)!==null&&en!==void 0?en:0,Rt.numTracksOut=(Qt=dt.numTracksOut)!==null&&Qt!==void 0?Qt:0,Rt.bytesIn=(xt=dt.bytesIn)!==null&&xt!==void 0?xt:0,Rt.bytesOut=(rn=dt.bytesOut)!==null&&rn!==void 0?rn:0,Rt.packetsIn=(Sn=dt.packetsIn)!==null&&Sn!==void 0?Sn:0,Rt.packetsOut=(bn=dt.packetsOut)!==null&&bn!==void 0?bn:0,Rt.nackTotal=(kn=dt.nackTotal)!==null&&kn!==void 0?kn:0,Rt.bytesInPerSec=(_n=dt.bytesInPerSec)!==null&&_n!==void 0?_n:0,Rt.bytesOutPerSec=(tn=dt.bytesOutPerSec)!==null&&tn!==void 0?tn:0,Rt.packetsInPerSec=(pn=dt.packetsInPerSec)!==null&&pn!==void 0?pn:0,Rt.packetsOutPerSec=(yn=dt.packetsOutPerSec)!==null&&yn!==void 0?yn:0,Rt.nackPerSec=(In=dt.nackPerSec)!==null&&In!==void 0?In:0,Rt.numCpus=(sn=dt.numCpus)!==null&&sn!==void 0?sn:0,Rt.loadAvgLast1min=(vn=dt.loadAvgLast1min)!==null&&vn!==void 0?vn:0,Rt.loadAvgLast5min=(Cn=dt.loadAvgLast5min)!==null&&Cn!==void 0?Cn:0,Rt.loadAvgLast15min=(Nn=dt.loadAvgLast15min)!==null&&Nn!==void 0?Nn:0,Rt.cpuLoad=(fn=dt.cpuLoad)!==null&&fn!==void 0?fn:0,Rt.memoryLoad=(ut=dt.memoryLoad)!==null&&ut!==void 0?ut:0,Rt.sysPacketsOut=(It=dt.sysPacketsOut)!==null&&It!==void 0?It:0,Rt.sysPacketsDropped=(Pt=dt.sysPacketsDropped)!==null&&Pt!==void 0?Pt:0,Rt.sysPacketsOutPerSec=(Zt=dt.sysPacketsOutPerSec)!==null&&Zt!==void 0?Zt:0,Rt.sysPacketsDroppedPerSec=(Dt=dt.sysPacketsDroppedPerSec)!==null&&Dt!==void 0?Dt:0,Rt.sysPacketsDroppedPctPerSec=(Ot=dt.sysPacketsDroppedPctPerSec)!==null&&Ot!==void 0?Ot:0,Rt.retransmitBytesOut=($t=dt.retransmitBytesOut)!==null&&$t!==void 0?$t:0,Rt.retransmitPacketsOut=(Gt=dt.retransmitPacketsOut)!==null&&Gt!==void 0?Gt:0,Rt.retransmitBytesOutPerSec=(nn=dt.retransmitBytesOutPerSec)!==null&&nn!==void 0?nn:0,Rt.retransmitPacketsOutPerSec=(gn=dt.retransmitPacketsOutPerSec)!==null&&gn!==void 0?gn:0,Rt.participantJoin=(Xt=dt.participantJoin)!==null&&Xt!==void 0?Xt:0,Rt.participantJoinPerSec=(at=dt.participantJoinPerSec)!==null&&at!==void 0?at:0,Rt}};function Tt(){return{participantKey:"",senderTime:0,connectionId:"",startSession:void 0,request:void 0,removeParticipant:void 0,muteTrack:void 0,updateParticipant:void 0,deleteRoom:void 0,updateSubscriptions:void 0,sendData:void 0,updateRoomMetadata:void 0,keepAlive:void 0}}a.RTCNodeMessage={encode(dt,lt=_.default.Writer.create()){return dt.participantKey!==void 0&&dt.participantKey!==""&&lt.uint32(10).string(dt.participantKey),dt.senderTime!==void 0&&dt.senderTime!==0&&lt.uint32(88).int64(dt.senderTime),dt.connectionId!==void 0&&dt.connectionId!==""&&lt.uint32(106).string(dt.connectionId),dt.startSession!==void 0&&a.StartSession.encode(dt.startSession,lt.uint32(18).fork()).ldelim(),dt.request!==void 0&&et.SignalRequest.encode(dt.request,lt.uint32(26).fork()).ldelim(),dt.removeParticipant!==void 0&&_e.RoomParticipantIdentity.encode(dt.removeParticipant,lt.uint32(34).fork()).ldelim(),dt.muteTrack!==void 0&&_e.MuteRoomTrackRequest.encode(dt.muteTrack,lt.uint32(42).fork()).ldelim(),dt.updateParticipant!==void 0&&_e.UpdateParticipantRequest.encode(dt.updateParticipant,lt.uint32(50).fork()).ldelim(),dt.deleteRoom!==void 0&&_e.DeleteRoomRequest.encode(dt.deleteRoom,lt.uint32(58).fork()).ldelim(),dt.updateSubscriptions!==void 0&&_e.UpdateSubscriptionsRequest.encode(dt.updateSubscriptions,lt.uint32(66).fork()).ldelim(),dt.sendData!==void 0&&_e.SendDataRequest.encode(dt.sendData,lt.uint32(74).fork()).ldelim(),dt.updateRoomMetadata!==void 0&&_e.UpdateRoomMetadataRequest.encode(dt.updateRoomMetadata,lt.uint32(82).fork()).ldelim(),dt.keepAlive!==void 0&&a.KeepAlive.encode(dt.keepAlive,lt.uint32(98).fork()).ldelim(),lt},decode(dt,lt){const kt=dt instanceof _.default.Reader?dt:new _.default.Reader(dt);let Lt=lt===void 0?kt.len:kt.pos+lt;const Jt=Tt();for(;kt.pos<Lt;){const en=kt.uint32();switch(en>>>3){case 1:Jt.participantKey=kt.string();break;case 11:Jt.senderTime=Ht(kt.int64());break;case 13:Jt.connectionId=kt.string();break;case 2:Jt.startSession=a.StartSession.decode(kt,kt.uint32());break;case 3:Jt.request=et.SignalRequest.decode(kt,kt.uint32());break;case 4:Jt.removeParticipant=_e.RoomParticipantIdentity.decode(kt,kt.uint32());break;case 5:Jt.muteTrack=_e.MuteRoomTrackRequest.decode(kt,kt.uint32());break;case 6:Jt.updateParticipant=_e.UpdateParticipantRequest.decode(kt,kt.uint32());break;case 7:Jt.deleteRoom=_e.DeleteRoomRequest.decode(kt,kt.uint32());break;case 8:Jt.updateSubscriptions=_e.UpdateSubscriptionsRequest.decode(kt,kt.uint32());break;case 9:Jt.sendData=_e.SendDataRequest.decode(kt,kt.uint32());break;case 10:Jt.updateRoomMetadata=_e.UpdateRoomMetadataRequest.decode(kt,kt.uint32());break;case 12:Jt.keepAlive=a.KeepAlive.decode(kt,kt.uint32());break;default:kt.skipType(en&7);break}}return Jt},fromJSON(dt){return{participantKey:ct(dt.participantKey)?String(dt.participantKey):"",senderTime:ct(dt.senderTime)?Number(dt.senderTime):0,connectionId:ct(dt.connectionId)?String(dt.connectionId):"",startSession:ct(dt.startSession)?a.StartSession.fromJSON(dt.startSession):void 0,request:ct(dt.request)?et.SignalRequest.fromJSON(dt.request):void 0,removeParticipant:ct(dt.removeParticipant)?_e.RoomParticipantIdentity.fromJSON(dt.removeParticipant):void 0,muteTrack:ct(dt.muteTrack)?_e.MuteRoomTrackRequest.fromJSON(dt.muteTrack):void 0,updateParticipant:ct(dt.updateParticipant)?_e.UpdateParticipantRequest.fromJSON(dt.updateParticipant):void 0,deleteRoom:ct(dt.deleteRoom)?_e.DeleteRoomRequest.fromJSON(dt.deleteRoom):void 0,updateSubscriptions:ct(dt.updateSubscriptions)?_e.UpdateSubscriptionsRequest.fromJSON(dt.updateSubscriptions):void 0,sendData:ct(dt.sendData)?_e.SendDataRequest.fromJSON(dt.sendData):void 0,updateRoomMetadata:ct(dt.updateRoomMetadata)?_e.UpdateRoomMetadataRequest.fromJSON(dt.updateRoomMetadata):void 0,keepAlive:ct(dt.keepAlive)?a.KeepAlive.fromJSON(dt.keepAlive):void 0}},toJSON(dt){const lt={};return dt.participantKey!==void 0&&(lt.participantKey=dt.participantKey),dt.senderTime!==void 0&&(lt.senderTime=Math.round(dt.senderTime)),dt.connectionId!==void 0&&(lt.connectionId=dt.connectionId),dt.startSession!==void 0&&(lt.startSession=dt.startSession?a.StartSession.toJSON(dt.startSession):void 0),dt.request!==void 0&&(lt.request=dt.request?et.SignalRequest.toJSON(dt.request):void 0),dt.removeParticipant!==void 0&&(lt.removeParticipant=dt.removeParticipant?_e.RoomParticipantIdentity.toJSON(dt.removeParticipant):void 0),dt.muteTrack!==void 0&&(lt.muteTrack=dt.muteTrack?_e.MuteRoomTrackRequest.toJSON(dt.muteTrack):void 0),dt.updateParticipant!==void 0&&(lt.updateParticipant=dt.updateParticipant?_e.UpdateParticipantRequest.toJSON(dt.updateParticipant):void 0),dt.deleteRoom!==void 0&&(lt.deleteRoom=dt.deleteRoom?_e.DeleteRoomRequest.toJSON(dt.deleteRoom):void 0),dt.updateSubscriptions!==void 0&&(lt.updateSubscriptions=dt.updateSubscriptions?_e.UpdateSubscriptionsRequest.toJSON(dt.updateSubscriptions):void 0),dt.sendData!==void 0&&(lt.sendData=dt.sendData?_e.SendDataRequest.toJSON(dt.sendData):void 0),dt.updateRoomMetadata!==void 0&&(lt.updateRoomMetadata=dt.updateRoomMetadata?_e.UpdateRoomMetadataRequest.toJSON(dt.updateRoomMetadata):void 0),dt.keepAlive!==void 0&&(lt.keepAlive=dt.keepAlive?a.KeepAlive.toJSON(dt.keepAlive):void 0),lt},fromPartial(dt){var lt,kt,Lt;const Jt=Tt();return Jt.participantKey=(lt=dt.participantKey)!==null&&lt!==void 0?lt:"",Jt.senderTime=(kt=dt.senderTime)!==null&&kt!==void 0?kt:0,Jt.connectionId=(Lt=dt.connectionId)!==null&&Lt!==void 0?Lt:"",Jt.startSession=dt.startSession!==void 0&&dt.startSession!==null?a.StartSession.fromPartial(dt.startSession):void 0,Jt.request=dt.request!==void 0&&dt.request!==null?et.SignalRequest.fromPartial(dt.request):void 0,Jt.removeParticipant=dt.removeParticipant!==void 0&&dt.removeParticipant!==null?_e.RoomParticipantIdentity.fromPartial(dt.removeParticipant):void 0,Jt.muteTrack=dt.muteTrack!==void 0&&dt.muteTrack!==null?_e.MuteRoomTrackRequest.fromPartial(dt.muteTrack):void 0,Jt.updateParticipant=dt.updateParticipant!==void 0&&dt.updateParticipant!==null?_e.UpdateParticipantRequest.fromPartial(dt.updateParticipant):void 0,Jt.deleteRoom=dt.deleteRoom!==void 0&&dt.deleteRoom!==null?_e.DeleteRoomRequest.fromPartial(dt.deleteRoom):void 0,Jt.updateSubscriptions=dt.updateSubscriptions!==void 0&&dt.updateSubscriptions!==null?_e.UpdateSubscriptionsRequest.fromPartial(dt.updateSubscriptions):void 0,Jt.sendData=dt.sendData!==void 0&&dt.sendData!==null?_e.SendDataRequest.fromPartial(dt.sendData):void 0,Jt.updateRoomMetadata=dt.updateRoomMetadata!==void 0&&dt.updateRoomMetadata!==null?_e.UpdateRoomMetadataRequest.fromPartial(dt.updateRoomMetadata):void 0,Jt.keepAlive=dt.keepAlive!==void 0&&dt.keepAlive!==null?a.KeepAlive.fromPartial(dt.keepAlive):void 0,Jt}};function gt(){return{connectionId:"",response:void 0,endSession:void 0}}a.SignalNodeMessage={encode(dt,lt=_.default.Writer.create()){return dt.connectionId!==void 0&&dt.connectionId!==""&&lt.uint32(10).string(dt.connectionId),dt.response!==void 0&&et.SignalResponse.encode(dt.response,lt.uint32(18).fork()).ldelim(),dt.endSession!==void 0&&a.EndSession.encode(dt.endSession,lt.uint32(26).fork()).ldelim(),lt},decode(dt,lt){const kt=dt instanceof _.default.Reader?dt:new _.default.Reader(dt);let Lt=lt===void 0?kt.len:kt.pos+lt;const Jt=gt();for(;kt.pos<Lt;){const en=kt.uint32();switch(en>>>3){case 1:Jt.connectionId=kt.string();break;case 2:Jt.response=et.SignalResponse.decode(kt,kt.uint32());break;case 3:Jt.endSession=a.EndSession.decode(kt,kt.uint32());break;default:kt.skipType(en&7);break}}return Jt},fromJSON(dt){return{connectionId:ct(dt.connectionId)?String(dt.connectionId):"",response:ct(dt.response)?et.SignalResponse.fromJSON(dt.response):void 0,endSession:ct(dt.endSession)?a.EndSession.fromJSON(dt.endSession):void 0}},toJSON(dt){const lt={};return dt.connectionId!==void 0&&(lt.connectionId=dt.connectionId),dt.response!==void 0&&(lt.response=dt.response?et.SignalResponse.toJSON(dt.response):void 0),dt.endSession!==void 0&&(lt.endSession=dt.endSession?a.EndSession.toJSON(dt.endSession):void 0),lt},fromPartial(dt){var lt;const kt=gt();return kt.connectionId=(lt=dt.connectionId)!==null&&lt!==void 0?lt:"",kt.response=dt.response!==void 0&&dt.response!==null?et.SignalResponse.fromPartial(dt.response):void 0,kt.endSession=dt.endSession!==void 0&&dt.endSession!==null?a.EndSession.fromPartial(dt.endSession):void 0,kt}};function ht(){return{roomName:"",identity:"",connectionId:"",reconnect:!1,autoSubscribe:!1,hidden:!1,client:void 0,recorder:!1,name:"",grantsJson:"",adaptiveStream:!1,participantId:""}}a.StartSession={encode(dt,lt=_.default.Writer.create()){return dt.roomName!==void 0&&dt.roomName!==""&&lt.uint32(10).string(dt.roomName),dt.identity!==void 0&&dt.identity!==""&&lt.uint32(18).string(dt.identity),dt.connectionId!==void 0&&dt.connectionId!==""&&lt.uint32(26).string(dt.connectionId),dt.reconnect===!0&&lt.uint32(32).bool(dt.reconnect),dt.autoSubscribe===!0&&lt.uint32(72).bool(dt.autoSubscribe),dt.hidden===!0&&lt.uint32(80).bool(dt.hidden),dt.client!==void 0&&j.ClientInfo.encode(dt.client,lt.uint32(90).fork()).ldelim(),dt.recorder===!0&&lt.uint32(96).bool(dt.recorder),dt.name!==void 0&&dt.name!==""&&lt.uint32(106).string(dt.name),dt.grantsJson!==void 0&&dt.grantsJson!==""&&lt.uint32(114).string(dt.grantsJson),dt.adaptiveStream===!0&&lt.uint32(120).bool(dt.adaptiveStream),dt.participantId!==void 0&&dt.participantId!==""&&lt.uint32(130).string(dt.participantId),lt},decode(dt,lt){const kt=dt instanceof _.default.Reader?dt:new _.default.Reader(dt);let Lt=lt===void 0?kt.len:kt.pos+lt;const Jt=ht();for(;kt.pos<Lt;){const en=kt.uint32();switch(en>>>3){case 1:Jt.roomName=kt.string();break;case 2:Jt.identity=kt.string();break;case 3:Jt.connectionId=kt.string();break;case 4:Jt.reconnect=kt.bool();break;case 9:Jt.autoSubscribe=kt.bool();break;case 10:Jt.hidden=kt.bool();break;case 11:Jt.client=j.ClientInfo.decode(kt,kt.uint32());break;case 12:Jt.recorder=kt.bool();break;case 13:Jt.name=kt.string();break;case 14:Jt.grantsJson=kt.string();break;case 15:Jt.adaptiveStream=kt.bool();break;case 16:Jt.participantId=kt.string();break;default:kt.skipType(en&7);break}}return Jt},fromJSON(dt){return{roomName:ct(dt.roomName)?String(dt.roomName):"",identity:ct(dt.identity)?String(dt.identity):"",connectionId:ct(dt.connectionId)?String(dt.connectionId):"",reconnect:ct(dt.reconnect)?!!dt.reconnect:!1,autoSubscribe:ct(dt.autoSubscribe)?!!dt.autoSubscribe:!1,hidden:ct(dt.hidden)?!!dt.hidden:!1,client:ct(dt.client)?j.ClientInfo.fromJSON(dt.client):void 0,recorder:ct(dt.recorder)?!!dt.recorder:!1,name:ct(dt.name)?String(dt.name):"",grantsJson:ct(dt.grantsJson)?String(dt.grantsJson):"",adaptiveStream:ct(dt.adaptiveStream)?!!dt.adaptiveStream:!1,participantId:ct(dt.participantId)?String(dt.participantId):""}},toJSON(dt){const lt={};return dt.roomName!==void 0&&(lt.roomName=dt.roomName),dt.identity!==void 0&&(lt.identity=dt.identity),dt.connectionId!==void 0&&(lt.connectionId=dt.connectionId),dt.reconnect!==void 0&&(lt.reconnect=dt.reconnect),dt.autoSubscribe!==void 0&&(lt.autoSubscribe=dt.autoSubscribe),dt.hidden!==void 0&&(lt.hidden=dt.hidden),dt.client!==void 0&&(lt.client=dt.client?j.ClientInfo.toJSON(dt.client):void 0),dt.recorder!==void 0&&(lt.recorder=dt.recorder),dt.name!==void 0&&(lt.name=dt.name),dt.grantsJson!==void 0&&(lt.grantsJson=dt.grantsJson),dt.adaptiveStream!==void 0&&(lt.adaptiveStream=dt.adaptiveStream),dt.participantId!==void 0&&(lt.participantId=dt.participantId),lt},fromPartial(dt){var lt,kt,Lt,Jt,en,Qt,xt,rn,Sn,bn,kn;const _n=ht();return _n.roomName=(lt=dt.roomName)!==null&&lt!==void 0?lt:"",_n.identity=(kt=dt.identity)!==null&&kt!==void 0?kt:"",_n.connectionId=(Lt=dt.connectionId)!==null&&Lt!==void 0?Lt:"",_n.reconnect=(Jt=dt.reconnect)!==null&&Jt!==void 0?Jt:!1,_n.autoSubscribe=(en=dt.autoSubscribe)!==null&&en!==void 0?en:!1,_n.hidden=(Qt=dt.hidden)!==null&&Qt!==void 0?Qt:!1,_n.client=dt.client!==void 0&&dt.client!==null?j.ClientInfo.fromPartial(dt.client):void 0,_n.recorder=(xt=dt.recorder)!==null&&xt!==void 0?xt:!1,_n.name=(rn=dt.name)!==null&&rn!==void 0?rn:"",_n.grantsJson=(Sn=dt.grantsJson)!==null&&Sn!==void 0?Sn:"",_n.adaptiveStream=(bn=dt.adaptiveStream)!==null&&bn!==void 0?bn:!1,_n.participantId=(kn=dt.participantId)!==null&&kn!==void 0?kn:"",_n}};function Et(){return{}}a.EndSession={encode(dt,lt=_.default.Writer.create()){return lt},decode(dt,lt){const kt=dt instanceof _.default.Reader?dt:new _.default.Reader(dt);let Lt=lt===void 0?kt.len:kt.pos+lt;const Jt=Et();for(;kt.pos<Lt;){const en=kt.uint32();switch(en>>>3){default:kt.skipType(en&7);break}}return Jt},fromJSON(dt){return{}},toJSON(dt){return{}},fromPartial(dt){return Et()}};function At(){return{participantId:""}}a.RemoveParticipant={encode(dt,lt=_.default.Writer.create()){return dt.participantId!==void 0&&dt.participantId!==""&&lt.uint32(10).string(dt.participantId),lt},decode(dt,lt){const kt=dt instanceof _.default.Reader?dt:new _.default.Reader(dt);let Lt=lt===void 0?kt.len:kt.pos+lt;const Jt=At();for(;kt.pos<Lt;){const en=kt.uint32();switch(en>>>3){case 1:Jt.participantId=kt.string();break;default:kt.skipType(en&7);break}}return Jt},fromJSON(dt){return{participantId:ct(dt.participantId)?String(dt.participantId):""}},toJSON(dt){const lt={};return dt.participantId!==void 0&&(lt.participantId=dt.participantId),lt},fromPartial(dt){var lt;const kt=At();return kt.participantId=(lt=dt.participantId)!==null&&lt!==void 0?lt:"",kt}};function Bt(){return{}}a.KeepAlive={encode(dt,lt=_.default.Writer.create()){return lt},decode(dt,lt){const kt=dt instanceof _.default.Reader?dt:new _.default.Reader(dt);let Lt=lt===void 0?kt.len:kt.pos+lt;const Jt=Bt();for(;kt.pos<Lt;){const en=kt.uint32();switch(en>>>3){default:kt.skipType(en&7);break}}return Jt},fromJSON(dt){return{}},toJSON(dt){return{}},fromPartial(dt){return Bt()}};function qt(){return{trackEgress:void 0}}a.RoomInternal={encode(dt,lt=_.default.Writer.create()){return dt.trackEgress!==void 0&&k.AutoTrackEgress.encode(dt.trackEgress,lt.uint32(10).fork()).ldelim(),lt},decode(dt,lt){const kt=dt instanceof _.default.Reader?dt:new _.default.Reader(dt);let Lt=lt===void 0?kt.len:kt.pos+lt;const Jt=qt();for(;kt.pos<Lt;){const en=kt.uint32();switch(en>>>3){case 1:Jt.trackEgress=k.AutoTrackEgress.decode(kt,kt.uint32());break;default:kt.skipType(en&7);break}}return Jt},fromJSON(dt){return{trackEgress:ct(dt.trackEgress)?k.AutoTrackEgress.fromJSON(dt.trackEgress):void 0}},toJSON(dt){const lt={};return dt.trackEgress!==void 0&&(lt.trackEgress=dt.trackEgress?k.AutoTrackEgress.toJSON(dt.trackEgress):void 0),lt},fromPartial(dt){const lt=qt();return lt.trackEgress=dt.trackEgress!==void 0&&dt.trackEgress!==null?k.AutoTrackEgress.fromPartial(dt.trackEgress):void 0,lt}};var zt=(()=>{if(typeof zt<"u")return zt;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof commonjsGlobal$1<"u")return commonjsGlobal$1;throw"Unable to locate global object"})();function Ht(dt){if(dt.gt(Number.MAX_SAFE_INTEGER))throw new zt.Error("Value is larger than Number.MAX_SAFE_INTEGER");return dt.toNumber()}_.default.util.Long!==b.default&&(_.default.util.Long=b.default,_.default.configure());function ct(dt){return dt!=null}})(livekit_internal);(function(a){var c=commonjsGlobal$1&&commonjsGlobal$1.__createBinding||(Object.create?function(nt,it,ft,pt){pt===void 0&&(pt=ft),Object.defineProperty(nt,pt,{enumerable:!0,get:function(){return it[ft]}})}:function(nt,it,ft,pt){pt===void 0&&(pt=ft),nt[pt]=it[ft]}),b=commonjsGlobal$1&&commonjsGlobal$1.__setModuleDefault||(Object.create?function(nt,it){Object.defineProperty(nt,"default",{enumerable:!0,value:it})}:function(nt,it){nt.default=it}),_=commonjsGlobal$1&&commonjsGlobal$1.__exportStar||function(nt,it){for(var ft in nt)ft!=="default"&&!Object.prototype.hasOwnProperty.call(it,ft)&&c(it,nt,ft)},k=commonjsGlobal$1&&commonjsGlobal$1.__importStar||function(nt){if(nt&&nt.__esModule)return nt;var it={};if(nt!=null)for(var ft in nt)ft!=="default"&&Object.prototype.hasOwnProperty.call(nt,ft)&&c(it,nt,ft);return b(it,nt),it};Object.defineProperty(a,"__esModule",{value:!0}),a.LivekitInternal=a.TrackType=a.TrackInfo=a.Room=a.ParticipantPermission=a.ParticipantInfo_State=a.ParticipantInfo=a.DataPacket_Kind=a.IngressVideoOptions=a.IngressState=a.IngressInput=a.IngressInfo=a.IngressAudioOptions=a.StreamProtocol=a.StreamOutput=a.SegmentedFileProtocol=a.SegmentedFileOutput=a.EncodingOptionsPreset=a.EncodingOptions=a.EncodedFileType=a.EncodedFileOutput=a.EgressInfo=a.DirectFileOutput=void 0,_(AccessToken$1,a),_(EgressClient$1,a),_(grants,a),_(IngressClient$1,a);var j=livekit_egress;Object.defineProperty(a,"DirectFileOutput",{enumerable:!0,get:function(){return j.DirectFileOutput}}),Object.defineProperty(a,"EgressInfo",{enumerable:!0,get:function(){return j.EgressInfo}}),Object.defineProperty(a,"EncodedFileOutput",{enumerable:!0,get:function(){return j.EncodedFileOutput}}),Object.defineProperty(a,"EncodedFileType",{enumerable:!0,get:function(){return j.EncodedFileType}}),Object.defineProperty(a,"EncodingOptions",{enumerable:!0,get:function(){return j.EncodingOptions}}),Object.defineProperty(a,"EncodingOptionsPreset",{enumerable:!0,get:function(){return j.EncodingOptionsPreset}}),Object.defineProperty(a,"SegmentedFileOutput",{enumerable:!0,get:function(){return j.SegmentedFileOutput}}),Object.defineProperty(a,"SegmentedFileProtocol",{enumerable:!0,get:function(){return j.SegmentedFileProtocol}}),Object.defineProperty(a,"StreamOutput",{enumerable:!0,get:function(){return j.StreamOutput}}),Object.defineProperty(a,"StreamProtocol",{enumerable:!0,get:function(){return j.StreamProtocol}});var _e=livekit_ingress;Object.defineProperty(a,"IngressAudioOptions",{enumerable:!0,get:function(){return _e.IngressAudioOptions}}),Object.defineProperty(a,"IngressInfo",{enumerable:!0,get:function(){return _e.IngressInfo}}),Object.defineProperty(a,"IngressInput",{enumerable:!0,get:function(){return _e.IngressInput}}),Object.defineProperty(a,"IngressState",{enumerable:!0,get:function(){return _e.IngressState}}),Object.defineProperty(a,"IngressVideoOptions",{enumerable:!0,get:function(){return _e.IngressVideoOptions}});var et=livekit_models;Object.defineProperty(a,"DataPacket_Kind",{enumerable:!0,get:function(){return et.DataPacket_Kind}}),Object.defineProperty(a,"ParticipantInfo",{enumerable:!0,get:function(){return et.ParticipantInfo}}),Object.defineProperty(a,"ParticipantInfo_State",{enumerable:!0,get:function(){return et.ParticipantInfo_State}}),Object.defineProperty(a,"ParticipantPermission",{enumerable:!0,get:function(){return et.ParticipantPermission}}),Object.defineProperty(a,"Room",{enumerable:!0,get:function(){return et.Room}}),Object.defineProperty(a,"TrackInfo",{enumerable:!0,get:function(){return et.TrackInfo}}),Object.defineProperty(a,"TrackType",{enumerable:!0,get:function(){return et.TrackType}}),_(RoomServiceClient$1,a),_(WebhookReceiver$1,a),a.LivekitInternal=k(livekit_internal)})(dist);class InvalidTokenError extends Error{}InvalidTokenError.prototype.name="InvalidTokenError";function b64DecodeUnicode(a){return decodeURIComponent(atob(a).replace(/(.)/g,(c,b)=>{let _=b.charCodeAt(0).toString(16).toUpperCase();return _.length<2&&(_="0"+_),"%"+_}))}function base64UrlDecode(a){let c=a.replace(/-/g,"+").replace(/_/g,"/");switch(c.length%4){case 0:break;case 2:c+="==";break;case 3:c+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return b64DecodeUnicode(c)}catch{return atob(c)}}function jwtDecode(a,c){if(typeof a!="string")throw new InvalidTokenError("Invalid token specified: must be a string");c||(c={});const b=c.header===!0?0:1,_=a.split(".")[b];if(typeof _!="string")throw new InvalidTokenError(`Invalid token specified: missing part #${b+1}`);let k;try{k=base64UrlDecode(_)}catch(j){throw new InvalidTokenError(`Invalid token specified: invalid base64 for part #${b+1} (${j.message})`)}try{return JSON.parse(k)}catch(j){throw new InvalidTokenError(`Invalid token specified: invalid json for part #${b+1} (${j.message})`)}}var define_process_env_default={};function _mergeNamespaces(a,c){return c.forEach(function(b){b&&typeof b!="string"&&!Array.isArray(b)&&Object.keys(b).forEach(function(_){if(_!=="default"&&!(_ in a)){var k=Object.getOwnPropertyDescriptor(b,_);Object.defineProperty(a,_,k.get?k:{enumerable:!0,get:function(){return b[_]}})}})}),Object.freeze(a)}var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}var loglevel={exports:{}};(function(a){(function(c,b){a.exports?a.exports=b():c.log=b()})(commonjsGlobal,function(){var c=function(){},b="undefined",_=typeof window!==b&&typeof window.navigator!==b&&/Trident\/|MSIE /.test(window.navigator.userAgent),k=["trace","debug","info","warn","error"];function j(_t,Tt){var gt=_t[Tt];if(typeof gt.bind=="function")return gt.bind(_t);try{return Function.prototype.bind.call(gt,_t)}catch{return function(){return Function.prototype.apply.apply(gt,[_t,arguments])}}}function _e(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function et(_t){return _t==="debug"&&(_t="log"),typeof console===b?!1:_t==="trace"&&_?_e:console[_t]!==void 0?j(console,_t):console.log!==void 0?j(console,"log"):c}function nt(_t,Tt){for(var gt=0;gt<k.length;gt++){var ht=k[gt];this[ht]=gt<_t?c:this.methodFactory(ht,_t,Tt)}this.log=this.debug}function it(_t,Tt,gt){return function(){typeof console!==b&&(nt.call(this,Tt,gt),this[_t].apply(this,arguments))}}function ft(_t,Tt,gt){return et(_t)||it.apply(this,arguments)}function pt(_t,Tt,gt){var ht=this,Et;Tt=Tt??"WARN";var At="loglevel";typeof _t=="string"?At+=":"+_t:typeof _t=="symbol"&&(At=void 0);function Bt(ct){var dt=(k[ct]||"silent").toUpperCase();if(!(typeof window===b||!At)){try{window.localStorage[At]=dt;return}catch{}try{window.document.cookie=encodeURIComponent(At)+"="+dt+";"}catch{}}}function qt(){var ct;if(!(typeof window===b||!At)){try{ct=window.localStorage[At]}catch{}if(typeof ct===b)try{var dt=window.document.cookie,lt=dt.indexOf(encodeURIComponent(At)+"=");lt!==-1&&(ct=/^([^;]+)/.exec(dt.slice(lt))[1])}catch{}return ht.levels[ct]===void 0&&(ct=void 0),ct}}function zt(){if(!(typeof window===b||!At)){try{window.localStorage.removeItem(At);return}catch{}try{window.document.cookie=encodeURIComponent(At)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch{}}}ht.name=_t,ht.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},ht.methodFactory=gt||ft,ht.getLevel=function(){return Et},ht.setLevel=function(ct,dt){if(typeof ct=="string"&&ht.levels[ct.toUpperCase()]!==void 0&&(ct=ht.levels[ct.toUpperCase()]),typeof ct=="number"&&ct>=0&&ct<=ht.levels.SILENT){if(Et=ct,dt!==!1&&Bt(ct),nt.call(ht,ct,_t),typeof console===b&&ct<ht.levels.SILENT)return"No console available for logging"}else throw"log.setLevel() called with invalid level: "+ct},ht.setDefaultLevel=function(ct){Tt=ct,qt()||ht.setLevel(ct,!1)},ht.resetLevel=function(){ht.setLevel(Tt,!1),zt()},ht.enableAll=function(ct){ht.setLevel(ht.levels.TRACE,ct)},ht.disableAll=function(ct){ht.setLevel(ht.levels.SILENT,ct)};var Ht=qt();Ht==null&&(Ht=Tt),ht.setLevel(Ht,!1)}var mt=new pt,St={};mt.getLogger=function(Tt){if(typeof Tt!="symbol"&&typeof Tt!="string"||Tt==="")throw new TypeError("You must supply a name when creating a logger.");var gt=St[Tt];return gt||(gt=St[Tt]=new pt(Tt,mt.getLevel(),mt.methodFactory)),gt};var yt=typeof window!==b?window.log:void 0;return mt.noConflict=function(){return typeof window!==b&&window.log===mt&&(window.log=yt),mt},mt.getLoggers=function(){return St},mt.default=mt,mt})})(loglevel);var loglevelExports=loglevel.exports,LogLevel;(function(a){a[a.trace=0]="trace",a[a.debug=1]="debug",a[a.info=2]="info",a[a.warn=3]="warn",a[a.error=4]="error",a[a.silent=5]="silent"})(LogLevel||(LogLevel={}));var LoggerNames;(function(a){a.Default="livekit",a.Room="livekit-room",a.Participant="livekit-participant",a.Track="livekit-track",a.Publication="livekit-track-publication",a.Engine="livekit-engine",a.Signal="livekit-signal",a.PCManager="livekit-pc-manager",a.PCTransport="livekit-pc-transport",a.E2EE="lk-e2ee"})(LoggerNames||(LoggerNames={}));let livekitLogger=loglevelExports.getLogger("livekit");livekitLogger.setDefaultLevel(LogLevel.info);function getLogger(a){const c=loglevelExports.getLogger(a);return c.setDefaultLevel(livekitLogger.getLevel()),c}function setLogLevel(a,c){c&&loglevelExports.getLogger(c).setLevel(a);for(const b of Object.entries(loglevelExports.getLoggers()).filter(_=>{let[k]=_;return k.startsWith("livekit")}).map(_=>{let[,k]=_;return k}))b.setLevel(a)}loglevelExports.getLogger("lk-e2ee");function assert(a,c){if(!a)throw new Error(c)}const FLOAT32_MAX=34028234663852886e22,FLOAT32_MIN=-34028234663852886e22,UINT32_MAX=4294967295,INT32_MAX=2147483647,INT32_MIN=-2147483648;function assertInt32(a){if(typeof a!="number")throw new Error("invalid int 32: "+typeof a);if(!Number.isInteger(a)||a>INT32_MAX||a<INT32_MIN)throw new Error("invalid int 32: "+a)}function assertUInt32(a){if(typeof a!="number")throw new Error("invalid uint 32: "+typeof a);if(!Number.isInteger(a)||a>UINT32_MAX||a<0)throw new Error("invalid uint 32: "+a)}function assertFloat32(a){if(typeof a!="number")throw new Error("invalid float 32: "+typeof a);if(Number.isFinite(a)&&(a>FLOAT32_MAX||a<FLOAT32_MIN))throw new Error("invalid float 32: "+a)}const enumTypeSymbol=Symbol("@bufbuild/protobuf/enum-type");function getEnumType(a){const c=a[enumTypeSymbol];return assert(c,"missing enum type on enum object"),c}function setEnumType(a,c,b,_){a[enumTypeSymbol]=makeEnumType(c,b.map(k=>({no:k.no,name:k.name,localName:a[k.no]})))}function makeEnumType(a,c,b){const _=Object.create(null),k=Object.create(null),j=[];for(const _e of c){const et=normalizeEnumValue(_e);j.push(et),_[_e.name]=et,k[_e.no]=et}return{typeName:a,values:j,findName(_e){return _[_e]},findNumber(_e){return k[_e]}}}function makeEnum(a,c,b){const _={};for(const k of c){const j=normalizeEnumValue(k);_[j.localName]=j.no,_[j.no]=j.localName}return setEnumType(_,a,c),_}function normalizeEnumValue(a){return"localName"in a?a:Object.assign(Object.assign({},a),{localName:a.name})}class Message{equals(c){return this.getType().runtime.util.equals(this.getType(),this,c)}clone(){return this.getType().runtime.util.clone(this)}fromBinary(c,b){const _=this.getType(),k=_.runtime.bin,j=k.makeReadOptions(b);return k.readMessage(this,j.readerFactory(c),c.byteLength,j),this}fromJson(c,b){const _=this.getType(),k=_.runtime.json,j=k.makeReadOptions(b);return k.readMessage(_,c,j,this),this}fromJsonString(c,b){let _;try{_=JSON.parse(c)}catch(k){throw new Error("cannot decode ".concat(this.getType().typeName," from JSON: ").concat(k instanceof Error?k.message:String(k)))}return this.fromJson(_,b)}toBinary(c){const b=this.getType(),_=b.runtime.bin,k=_.makeWriteOptions(c),j=k.writerFactory();return _.writeMessage(this,j,k),j.finish()}toJson(c){const b=this.getType(),_=b.runtime.json,k=_.makeWriteOptions(c);return _.writeMessage(this,k)}toJsonString(c){var b;const _=this.toJson(c);return JSON.stringify(_,null,(b=c==null?void 0:c.prettySpaces)!==null&&b!==void 0?b:0)}toJSON(){return this.toJson({emitDefaultValues:!0})}getType(){return Object.getPrototypeOf(this).constructor}}function makeMessageType(a,c,b,_){var k;const j=(k=_==null?void 0:_.localName)!==null&&k!==void 0?k:c.substring(c.lastIndexOf(".")+1),_e={[j]:function(et){a.util.initFields(this),a.util.initPartial(et,this)}}[j];return Object.setPrototypeOf(_e.prototype,new Message),Object.assign(_e,{runtime:a,typeName:c,fields:a.util.newFieldList(b),fromBinary(et,nt){return new _e().fromBinary(et,nt)},fromJson(et,nt){return new _e().fromJson(et,nt)},fromJsonString(et,nt){return new _e().fromJsonString(et,nt)},equals(et,nt){return a.util.equals(_e,et,nt)}}),_e}function makeProtoRuntime(a,c,b,_){return{syntax:a,json:c,bin:b,util:_,makeMessageType(k,j,_e){return makeMessageType(this,k,j,_e)},makeEnum,makeEnumType,getEnumType}}var ScalarType;(function(a){a[a.DOUBLE=1]="DOUBLE",a[a.FLOAT=2]="FLOAT",a[a.INT64=3]="INT64",a[a.UINT64=4]="UINT64",a[a.INT32=5]="INT32",a[a.FIXED64=6]="FIXED64",a[a.FIXED32=7]="FIXED32",a[a.BOOL=8]="BOOL",a[a.STRING=9]="STRING",a[a.BYTES=12]="BYTES",a[a.UINT32=13]="UINT32",a[a.SFIXED32=15]="SFIXED32",a[a.SFIXED64=16]="SFIXED64",a[a.SINT32=17]="SINT32",a[a.SINT64=18]="SINT64"})(ScalarType||(ScalarType={}));var LongType;(function(a){a[a.BIGINT=0]="BIGINT",a[a.STRING=1]="STRING"})(LongType||(LongType={}));function varint64read(){let a=0,c=0;for(let _=0;_<28;_+=7){let k=this.buf[this.pos++];if(a|=(k&127)<<_,!(k&128))return this.assertBounds(),[a,c]}let b=this.buf[this.pos++];if(a|=(b&15)<<28,c=(b&112)>>4,!(b&128))return this.assertBounds(),[a,c];for(let _=3;_<=31;_+=7){let k=this.buf[this.pos++];if(c|=(k&127)<<_,!(k&128))return this.assertBounds(),[a,c]}throw new Error("invalid varint")}function varint64write(a,c,b){for(let j=0;j<28;j=j+7){const _e=a>>>j,et=!(!(_e>>>7)&&c==0),nt=(et?_e|128:_e)&255;if(b.push(nt),!et)return}const _=a>>>28&15|(c&7)<<4,k=!!(c>>3);if(b.push((k?_|128:_)&255),!!k){for(let j=3;j<31;j=j+7){const _e=c>>>j,et=!!(_e>>>7),nt=(et?_e|128:_e)&255;if(b.push(nt),!et)return}b.push(c>>>31&1)}}const TWO_PWR_32_DBL=4294967296;function int64FromString(a){const c=a[0]==="-";c&&(a=a.slice(1));const b=1e6;let _=0,k=0;function j(_e,et){const nt=Number(a.slice(_e,et));k*=b,_=_*b+nt,_>=TWO_PWR_32_DBL&&(k=k+(_/TWO_PWR_32_DBL|0),_=_%TWO_PWR_32_DBL)}return j(-24,-18),j(-18,-12),j(-12,-6),j(-6),c?negate(_,k):newBits(_,k)}function int64ToString(a,c){let b=newBits(a,c);const _=b.hi&2147483648;_&&(b=negate(b.lo,b.hi));const k=uInt64ToString(b.lo,b.hi);return _?"-"+k:k}function uInt64ToString(a,c){if({lo:a,hi:c}=toUnsigned(a,c),c<=2097151)return String(TWO_PWR_32_DBL*c+a);const b=a&16777215,_=(a>>>24|c<<8)&16777215,k=c>>16&65535;let j=b+_*6777216+k*6710656,_e=_+k*8147497,et=k*2;const nt=1e7;return j>=nt&&(_e+=Math.floor(j/nt),j%=nt),_e>=nt&&(et+=Math.floor(_e/nt),_e%=nt),et.toString()+decimalFrom1e7WithLeadingZeros(_e)+decimalFrom1e7WithLeadingZeros(j)}function toUnsigned(a,c){return{lo:a>>>0,hi:c>>>0}}function newBits(a,c){return{lo:a|0,hi:c|0}}function negate(a,c){return c=~c,a?a=~a+1:c+=1,newBits(a,c)}const decimalFrom1e7WithLeadingZeros=a=>{const c=String(a);return"0000000".slice(c.length)+c};function varint32write(a,c){if(a>=0){for(;a>127;)c.push(a&127|128),a=a>>>7;c.push(a)}else{for(let b=0;b<9;b++)c.push(a&127|128),a=a>>7;c.push(1)}}function varint32read(){let a=this.buf[this.pos++],c=a&127;if(!(a&128))return this.assertBounds(),c;if(a=this.buf[this.pos++],c|=(a&127)<<7,!(a&128))return this.assertBounds(),c;if(a=this.buf[this.pos++],c|=(a&127)<<14,!(a&128))return this.assertBounds(),c;if(a=this.buf[this.pos++],c|=(a&127)<<21,!(a&128))return this.assertBounds(),c;a=this.buf[this.pos++],c|=(a&15)<<28;for(let b=5;a&128&&b<10;b++)a=this.buf[this.pos++];if(a&128)throw new Error("invalid varint");return this.assertBounds(),c>>>0}function makeInt64Support(){const a=new DataView(new ArrayBuffer(8));if(typeof BigInt=="function"&&typeof a.getBigInt64=="function"&&typeof a.getBigUint64=="function"&&typeof a.setBigInt64=="function"&&typeof a.setBigUint64=="function"&&(typeof process!="object"||typeof define_process_env_default!="object"||define_process_env_default.BUF_BIGINT_DISABLE!=="1")){const k=BigInt("-9223372036854775808"),j=BigInt("9223372036854775807"),_e=BigInt("0"),et=BigInt("18446744073709551615");return{zero:BigInt(0),supported:!0,parse(nt){const it=typeof nt=="bigint"?nt:BigInt(nt);if(it>j||it<k)throw new Error("int64 invalid: ".concat(nt));return it},uParse(nt){const it=typeof nt=="bigint"?nt:BigInt(nt);if(it>et||it<_e)throw new Error("uint64 invalid: ".concat(nt));return it},enc(nt){return a.setBigInt64(0,this.parse(nt),!0),{lo:a.getInt32(0,!0),hi:a.getInt32(4,!0)}},uEnc(nt){return a.setBigInt64(0,this.uParse(nt),!0),{lo:a.getInt32(0,!0),hi:a.getInt32(4,!0)}},dec(nt,it){return a.setInt32(0,nt,!0),a.setInt32(4,it,!0),a.getBigInt64(0,!0)},uDec(nt,it){return a.setInt32(0,nt,!0),a.setInt32(4,it,!0),a.getBigUint64(0,!0)}}}const b=k=>assert(/^-?[0-9]+$/.test(k),"int64 invalid: ".concat(k)),_=k=>assert(/^[0-9]+$/.test(k),"uint64 invalid: ".concat(k));return{zero:"0",supported:!1,parse(k){return typeof k!="string"&&(k=k.toString()),b(k),k},uParse(k){return typeof k!="string"&&(k=k.toString()),_(k),k},enc(k){return typeof k!="string"&&(k=k.toString()),b(k),int64FromString(k)},uEnc(k){return typeof k!="string"&&(k=k.toString()),_(k),int64FromString(k)},dec(k,j){return int64ToString(k,j)},uDec(k,j){return uInt64ToString(k,j)}}}const protoInt64=makeInt64Support();var WireType;(function(a){a[a.Varint=0]="Varint",a[a.Bit64=1]="Bit64",a[a.LengthDelimited=2]="LengthDelimited",a[a.StartGroup=3]="StartGroup",a[a.EndGroup=4]="EndGroup",a[a.Bit32=5]="Bit32"})(WireType||(WireType={}));class BinaryWriter{constructor(c){this.stack=[],this.textEncoder=c??new TextEncoder,this.chunks=[],this.buf=[]}finish(){this.chunks.push(new Uint8Array(this.buf));let c=0;for(let k=0;k<this.chunks.length;k++)c+=this.chunks[k].length;let b=new Uint8Array(c),_=0;for(let k=0;k<this.chunks.length;k++)b.set(this.chunks[k],_),_+=this.chunks[k].length;return this.chunks=[],b}fork(){return this.stack.push({chunks:this.chunks,buf:this.buf}),this.chunks=[],this.buf=[],this}join(){let c=this.finish(),b=this.stack.pop();if(!b)throw new Error("invalid state, fork stack empty");return this.chunks=b.chunks,this.buf=b.buf,this.uint32(c.byteLength),this.raw(c)}tag(c,b){return this.uint32((c<<3|b)>>>0)}raw(c){return this.buf.length&&(this.chunks.push(new Uint8Array(this.buf)),this.buf=[]),this.chunks.push(c),this}uint32(c){for(assertUInt32(c);c>127;)this.buf.push(c&127|128),c=c>>>7;return this.buf.push(c),this}int32(c){return assertInt32(c),varint32write(c,this.buf),this}bool(c){return this.buf.push(c?1:0),this}bytes(c){return this.uint32(c.byteLength),this.raw(c)}string(c){let b=this.textEncoder.encode(c);return this.uint32(b.byteLength),this.raw(b)}float(c){assertFloat32(c);let b=new Uint8Array(4);return new DataView(b.buffer).setFloat32(0,c,!0),this.raw(b)}double(c){let b=new Uint8Array(8);return new DataView(b.buffer).setFloat64(0,c,!0),this.raw(b)}fixed32(c){assertUInt32(c);let b=new Uint8Array(4);return new DataView(b.buffer).setUint32(0,c,!0),this.raw(b)}sfixed32(c){assertInt32(c);let b=new Uint8Array(4);return new DataView(b.buffer).setInt32(0,c,!0),this.raw(b)}sint32(c){return assertInt32(c),c=(c<<1^c>>31)>>>0,varint32write(c,this.buf),this}sfixed64(c){let b=new Uint8Array(8),_=new DataView(b.buffer),k=protoInt64.enc(c);return _.setInt32(0,k.lo,!0),_.setInt32(4,k.hi,!0),this.raw(b)}fixed64(c){let b=new Uint8Array(8),_=new DataView(b.buffer),k=protoInt64.uEnc(c);return _.setInt32(0,k.lo,!0),_.setInt32(4,k.hi,!0),this.raw(b)}int64(c){let b=protoInt64.enc(c);return varint64write(b.lo,b.hi,this.buf),this}sint64(c){let b=protoInt64.enc(c),_=b.hi>>31,k=b.lo<<1^_,j=(b.hi<<1|b.lo>>>31)^_;return varint64write(k,j,this.buf),this}uint64(c){let b=protoInt64.uEnc(c);return varint64write(b.lo,b.hi,this.buf),this}}class BinaryReader{constructor(c,b){this.varint64=varint64read,this.uint32=varint32read,this.buf=c,this.len=c.length,this.pos=0,this.view=new DataView(c.buffer,c.byteOffset,c.byteLength),this.textDecoder=b??new TextDecoder}tag(){let c=this.uint32(),b=c>>>3,_=c&7;if(b<=0||_<0||_>5)throw new Error("illegal tag: field no "+b+" wire type "+_);return[b,_]}skip(c){let b=this.pos;switch(c){case WireType.Varint:for(;this.buf[this.pos++]&128;);break;case WireType.Bit64:this.pos+=4;case WireType.Bit32:this.pos+=4;break;case WireType.LengthDelimited:let _=this.uint32();this.pos+=_;break;case WireType.StartGroup:let k;for(;(k=this.tag()[1])!==WireType.EndGroup;)this.skip(k);break;default:throw new Error("cant skip wire type "+c)}return this.assertBounds(),this.buf.subarray(b,this.pos)}assertBounds(){if(this.pos>this.len)throw new RangeError("premature EOF")}int32(){return this.uint32()|0}sint32(){let c=this.uint32();return c>>>1^-(c&1)}int64(){return protoInt64.dec(...this.varint64())}uint64(){return protoInt64.uDec(...this.varint64())}sint64(){let[c,b]=this.varint64(),_=-(c&1);return c=(c>>>1|(b&1)<<31)^_,b=b>>>1^_,protoInt64.dec(c,b)}bool(){let[c,b]=this.varint64();return c!==0||b!==0}fixed32(){return this.view.getUint32((this.pos+=4)-4,!0)}sfixed32(){return this.view.getInt32((this.pos+=4)-4,!0)}fixed64(){return protoInt64.uDec(this.sfixed32(),this.sfixed32())}sfixed64(){return protoInt64.dec(this.sfixed32(),this.sfixed32())}float(){return this.view.getFloat32((this.pos+=4)-4,!0)}double(){return this.view.getFloat64((this.pos+=8)-8,!0)}bytes(){let c=this.uint32(),b=this.pos;return this.pos+=c,this.assertBounds(),this.buf.subarray(b,b+c)}string(){return this.textDecoder.decode(this.bytes())}}function wrapField(a,c){return c instanceof Message||!a.fieldWrapper?c:a.fieldWrapper.wrapField(c)}ScalarType.DOUBLE,ScalarType.FLOAT,ScalarType.INT64,ScalarType.UINT64,ScalarType.INT32,ScalarType.UINT32,ScalarType.BOOL,ScalarType.STRING,ScalarType.BYTES;function scalarEquals(a,c,b){if(c===b)return!0;if(a==ScalarType.BYTES){if(!(c instanceof Uint8Array)||!(b instanceof Uint8Array)||c.length!==b.length)return!1;for(let _=0;_<c.length;_++)if(c[_]!==b[_])return!1;return!0}switch(a){case ScalarType.UINT64:case ScalarType.FIXED64:case ScalarType.INT64:case ScalarType.SFIXED64:case ScalarType.SINT64:return c==b}return!1}function scalarDefaultValue(a,c){switch(a){case ScalarType.BOOL:return!1;case ScalarType.UINT64:case ScalarType.FIXED64:case ScalarType.INT64:case ScalarType.SFIXED64:case ScalarType.SINT64:return c==0?protoInt64.zero:"0";case ScalarType.DOUBLE:case ScalarType.FLOAT:return 0;case ScalarType.BYTES:return new Uint8Array(0);case ScalarType.STRING:return"";default:return 0}}function scalarTypeInfo(a,c){const b=c===void 0;let _=WireType.Varint,k=c===0;switch(a){case ScalarType.STRING:k=b||!c.length,_=WireType.LengthDelimited;break;case ScalarType.BOOL:k=c===!1;break;case ScalarType.DOUBLE:_=WireType.Bit64;break;case ScalarType.FLOAT:_=WireType.Bit32;break;case ScalarType.INT64:k=b||c==0;break;case ScalarType.UINT64:k=b||c==0;break;case ScalarType.FIXED64:k=b||c==0,_=WireType.Bit64;break;case ScalarType.BYTES:k=b||!c.byteLength,_=WireType.LengthDelimited;break;case ScalarType.FIXED32:_=WireType.Bit32;break;case ScalarType.SFIXED32:_=WireType.Bit32;break;case ScalarType.SFIXED64:k=b||c==0,_=WireType.Bit64;break;case ScalarType.SINT64:k=b||c==0;break}const j=ScalarType[a].toLowerCase();return[_,j,b||k]}const unknownFieldsSymbol=Symbol("@bufbuild/protobuf/unknown-fields"),readDefaults={readUnknownFields:!0,readerFactory:a=>new BinaryReader(a)},writeDefaults={writeUnknownFields:!0,writerFactory:()=>new BinaryWriter};function makeReadOptions$1(a){return a?Object.assign(Object.assign({},readDefaults),a):readDefaults}function makeWriteOptions$1(a){return a?Object.assign(Object.assign({},writeDefaults),a):writeDefaults}function makeBinaryFormatCommon(){return{makeReadOptions:makeReadOptions$1,makeWriteOptions:makeWriteOptions$1,listUnknownFields(a){var c;return(c=a[unknownFieldsSymbol])!==null&&c!==void 0?c:[]},discardUnknownFields(a){delete a[unknownFieldsSymbol]},writeUnknownFields(a,c){const _=a[unknownFieldsSymbol];if(_)for(const k of _)c.tag(k.no,k.wireType).raw(k.data)},onUnknownField(a,c,b,_){const k=a;Array.isArray(k[unknownFieldsSymbol])||(k[unknownFieldsSymbol]=[]),k[unknownFieldsSymbol].push({no:c,wireType:b,data:_})},readMessage(a,c,b,_){const k=a.getType(),j=b===void 0?c.len:c.pos+b;for(;c.pos<j;){const[_e,et]=c.tag(),nt=k.fields.find(_e);if(!nt){const mt=c.skip(et);_.readUnknownFields&&this.onUnknownField(a,_e,et,mt);continue}let it=a,ft=nt.repeated,pt=nt.localName;switch(nt.oneof&&(it=it[nt.oneof.localName],it.case!=pt&&delete it.value,it.case=pt,pt="value"),nt.kind){case"scalar":case"enum":const mt=nt.kind=="enum"?ScalarType.INT32:nt.T;let St=readScalar$1;if(nt.kind=="scalar"&&nt.L>0&&(St=readScalarLTString),ft){let gt=it[pt];if(et==WireType.LengthDelimited&&mt!=ScalarType.STRING&&mt!=ScalarType.BYTES){let ht=c.uint32()+c.pos;for(;c.pos<ht;)gt.push(St(c,mt))}else gt.push(St(c,mt))}else it[pt]=St(c,mt);break;case"message":const yt=nt.T;ft?it[pt].push(readMessageField(c,new yt,_)):it[pt]instanceof Message?readMessageField(c,it[pt],_):(it[pt]=readMessageField(c,new yt,_),yt.fieldWrapper&&!nt.oneof&&!nt.repeated&&(it[pt]=yt.fieldWrapper.unwrapField(it[pt])));break;case"map":let[_t,Tt]=readMapEntry(nt,c,_);it[pt][_t]=Tt;break}}}}}function readMessageField(a,c,b){return c.getType().runtime.bin.readMessage(c,a,a.uint32(),b),c}function readMapEntry(a,c,b){const _=c.uint32(),k=c.pos+_;let j,_e;for(;c.pos<k;){let[et]=c.tag();switch(et){case 1:j=readScalar$1(c,a.K);break;case 2:switch(a.V.kind){case"scalar":_e=readScalar$1(c,a.V.T);break;case"enum":_e=c.int32();break;case"message":_e=readMessageField(c,new a.V.T,b);break}break}}if(j===void 0){let et=scalarDefaultValue(a.K,LongType.BIGINT);j=a.K==ScalarType.BOOL?et.toString():et}if(typeof j!="string"&&typeof j!="number"&&(j=j.toString()),_e===void 0)switch(a.V.kind){case"scalar":_e=scalarDefaultValue(a.V.T,LongType.BIGINT);break;case"enum":_e=0;break;case"message":_e=new a.V.T;break}return[j,_e]}function readScalarLTString(a,c){const b=readScalar$1(a,c);return typeof b=="bigint"?b.toString():b}function readScalar$1(a,c){switch(c){case ScalarType.STRING:return a.string();case ScalarType.BOOL:return a.bool();case ScalarType.DOUBLE:return a.double();case ScalarType.FLOAT:return a.float();case ScalarType.INT32:return a.int32();case ScalarType.INT64:return a.int64();case ScalarType.UINT64:return a.uint64();case ScalarType.FIXED64:return a.fixed64();case ScalarType.BYTES:return a.bytes();case ScalarType.FIXED32:return a.fixed32();case ScalarType.SFIXED32:return a.sfixed32();case ScalarType.SFIXED64:return a.sfixed64();case ScalarType.SINT64:return a.sint64();case ScalarType.UINT32:return a.uint32();case ScalarType.SINT32:return a.sint32()}}function writeMapEntry(a,c,b,_,k){a.tag(b.no,WireType.LengthDelimited),a.fork();let j=_;switch(b.K){case ScalarType.INT32:case ScalarType.FIXED32:case ScalarType.UINT32:case ScalarType.SFIXED32:case ScalarType.SINT32:j=Number.parseInt(_);break;case ScalarType.BOOL:assert(_=="true"||_=="false"),j=_=="true";break}switch(writeScalar$1(a,b.K,1,j,!0),b.V.kind){case"scalar":writeScalar$1(a,b.V.T,2,k,!0);break;case"enum":writeScalar$1(a,ScalarType.INT32,2,k,!0);break;case"message":writeMessageField(a,c,b.V.T,2,k);break}a.join()}function writeMessageField(a,c,b,_,k){if(k!==void 0){const j=wrapField(b,k);a.tag(_,WireType.LengthDelimited).bytes(j.toBinary(c))}}function writeScalar$1(a,c,b,_,k){let[j,_e,et]=scalarTypeInfo(c,_);(!et||k)&&a.tag(b,j)[_e](_)}function writePacked(a,c,b,_){if(!_.length)return;a.tag(b,WireType.LengthDelimited).fork();let[,k]=scalarTypeInfo(c);for(let j=0;j<_.length;j++)a[k](_[j]);a.join()}function makeBinaryFormatProto3(){return Object.assign(Object.assign({},makeBinaryFormatCommon()),{writeMessage(a,c,b){const _=a.getType();for(const k of _.fields.byNumber()){let j,_e=k.repeated,et=k.localName;if(k.oneof){const nt=a[k.oneof.localName];if(nt.case!==et)continue;j=nt.value}else j=a[et];switch(k.kind){case"scalar":case"enum":let nt=k.kind=="enum"?ScalarType.INT32:k.T;if(_e)if(k.packed)writePacked(c,nt,k.no,j);else for(const it of j)writeScalar$1(c,nt,k.no,it,!0);else j!==void 0&&writeScalar$1(c,nt,k.no,j,!!k.oneof||k.opt);break;case"message":if(_e)for(const it of j)writeMessageField(c,b,k.T,k.no,it);else writeMessageField(c,b,k.T,k.no,j);break;case"map":for(const[it,ft]of Object.entries(j))writeMapEntry(c,b,k,it,ft);break}}return b.writeUnknownFields&&this.writeUnknownFields(a,c),c}})}let encTable="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),decTable=[];for(let a=0;a<encTable.length;a++)decTable[encTable[a].charCodeAt(0)]=a;decTable[45]=encTable.indexOf("+");decTable[95]=encTable.indexOf("/");const protoBase64={dec(a){let c=a.length*3/4;a[a.length-2]=="="?c-=2:a[a.length-1]=="="&&(c-=1);let b=new Uint8Array(c),_=0,k=0,j,_e=0;for(let et=0;et<a.length;et++){if(j=decTable[a.charCodeAt(et)],j===void 0)switch(a[et]){case"=":k=0;case`
`:case"\r":case"	":case" ":continue;default:throw Error("invalid base64 string.")}switch(k){case 0:_e=j,k=1;break;case 1:b[_++]=_e<<2|(j&48)>>4,_e=j,k=2;break;case 2:b[_++]=(_e&15)<<4|(j&60)>>2,_e=j,k=3;break;case 3:b[_++]=(_e&3)<<6|j,k=0;break}}if(k==1)throw Error("invalid base64 string.");return b.subarray(0,_)},enc(a){let c="",b=0,_,k=0;for(let j=0;j<a.length;j++)switch(_=a[j],b){case 0:c+=encTable[_>>2],k=(_&3)<<4,b=1;break;case 1:c+=encTable[k|_>>4],k=(_&15)<<2,b=2;break;case 2:c+=encTable[k|_>>6],c+=encTable[_&63],b=0;break}return b&&(c+=encTable[k],c+="=",b==1&&(c+="=")),c}},jsonReadDefaults={ignoreUnknownFields:!1},jsonWriteDefaults={emitDefaultValues:!1,enumAsInteger:!1,useProtoFieldName:!1,prettySpaces:0};function makeReadOptions(a){return a?Object.assign(Object.assign({},jsonReadDefaults),a):jsonReadDefaults}function makeWriteOptions(a){return a?Object.assign(Object.assign({},jsonWriteDefaults),a):jsonWriteDefaults}function makeJsonFormatCommon(a){const c=a(writeEnum,writeScalar);return{makeReadOptions,makeWriteOptions,readMessage(b,_,k,j){if(_==null||Array.isArray(_)||typeof _!="object")throw new Error("cannot decode message ".concat(b.typeName," from JSON: ").concat(this.debug(_)));j=j??new b;const _e={};for(const[et,nt]of Object.entries(_)){const it=b.fields.findJsonName(et);if(!it){if(!k.ignoreUnknownFields)throw new Error("cannot decode message ".concat(b.typeName,' from JSON: key "').concat(et,'" is unknown'));continue}let ft=it.localName,pt=j;if(it.oneof){if(nt===null&&it.kind=="scalar")continue;const mt=_e[it.oneof.localName];if(mt)throw new Error("cannot decode message ".concat(b.typeName,' from JSON: multiple keys for oneof "').concat(it.oneof.name,'" present: "').concat(mt,'", "').concat(et,'"'));_e[it.oneof.localName]=et,pt=pt[it.oneof.localName]={case:ft},ft="value"}if(it.repeated){if(nt===null)continue;if(!Array.isArray(nt))throw new Error("cannot decode field ".concat(b.typeName,".").concat(it.name," from JSON: ").concat(this.debug(nt)));const mt=pt[ft];for(const St of nt){if(St===null)throw new Error("cannot decode field ".concat(b.typeName,".").concat(it.name," from JSON: ").concat(this.debug(St)));let yt;switch(it.kind){case"message":yt=it.T.fromJson(St,k);break;case"enum":if(yt=readEnum(it.T,St,k.ignoreUnknownFields),yt===void 0)continue;break;case"scalar":try{yt=readScalar(it.T,St,it.L)}catch(_t){let Tt="cannot decode field ".concat(b.typeName,".").concat(it.name," from JSON: ").concat(this.debug(St));throw _t instanceof Error&&_t.message.length>0&&(Tt+=": ".concat(_t.message)),new Error(Tt)}break}mt.push(yt)}}else if(it.kind=="map"){if(nt===null)continue;if(Array.isArray(nt)||typeof nt!="object")throw new Error("cannot decode field ".concat(b.typeName,".").concat(it.name," from JSON: ").concat(this.debug(nt)));const mt=pt[ft];for(const[St,yt]of Object.entries(nt)){if(yt===null)throw new Error("cannot decode field ".concat(b.typeName,".").concat(it.name," from JSON: map value null"));let _t;switch(it.V.kind){case"message":_t=it.V.T.fromJson(yt,k);break;case"enum":if(_t=readEnum(it.V.T,yt,k.ignoreUnknownFields),_t===void 0)continue;break;case"scalar":try{_t=readScalar(it.V.T,yt,LongType.BIGINT)}catch(Tt){let gt="cannot decode map value for field ".concat(b.typeName,".").concat(it.name," from JSON: ").concat(this.debug(nt));throw Tt instanceof Error&&Tt.message.length>0&&(gt+=": ".concat(Tt.message)),new Error(gt)}break}try{mt[readScalar(it.K,it.K==ScalarType.BOOL?St=="true"?!0:St=="false"?!1:St:St,LongType.BIGINT).toString()]=_t}catch(Tt){let gt="cannot decode map key for field ".concat(b.typeName,".").concat(it.name," from JSON: ").concat(this.debug(nt));throw Tt instanceof Error&&Tt.message.length>0&&(gt+=": ".concat(Tt.message)),new Error(gt)}}}else switch(it.kind){case"message":const mt=it.T;if(nt===null&&mt.typeName!="google.protobuf.Value"){if(it.oneof)throw new Error("cannot decode field ".concat(b.typeName,".").concat(it.name,' from JSON: null is invalid for oneof field "').concat(et,'"'));continue}pt[ft]instanceof Message?pt[ft].fromJson(nt,k):(pt[ft]=mt.fromJson(nt,k),mt.fieldWrapper&&!it.oneof&&(pt[ft]=mt.fieldWrapper.unwrapField(pt[ft])));break;case"enum":const St=readEnum(it.T,nt,k.ignoreUnknownFields);St!==void 0&&(pt[ft]=St);break;case"scalar":try{pt[ft]=readScalar(it.T,nt,it.L)}catch(yt){let _t="cannot decode field ".concat(b.typeName,".").concat(it.name," from JSON: ").concat(this.debug(nt));throw yt instanceof Error&&yt.message.length>0&&(_t+=": ".concat(yt.message)),new Error(_t)}break}}return j},writeMessage(b,_){const k=b.getType(),j={};let _e;try{for(const et of k.fields.byMember()){let nt;if(et.kind=="oneof"){const it=b[et.localName];if(it.value===void 0)continue;if(_e=et.findField(it.case),!_e)throw"oneof case not found: "+it.case;nt=c(_e,it.value,_)}else _e=et,nt=c(_e,b[_e.localName],_);nt!==void 0&&(j[_.useProtoFieldName?_e.name:_e.jsonName]=nt)}}catch(et){const nt=_e?"cannot encode field ".concat(k.typeName,".").concat(_e.name," to JSON"):"cannot encode message ".concat(k.typeName," to JSON"),it=et instanceof Error?et.message:String(et);throw new Error(nt+(it.length>0?": ".concat(it):""))}return j},readScalar,writeScalar,debug:debugJsonValue}}function debugJsonValue(a){if(a===null)return"null";switch(typeof a){case"object":return Array.isArray(a)?"array":"object";case"string":return a.length>100?"string":'"'.concat(a.split('"').join('\\"'),'"');default:return String(a)}}function readScalar(a,c,b){switch(a){case ScalarType.DOUBLE:case ScalarType.FLOAT:if(c===null)return 0;if(c==="NaN")return Number.NaN;if(c==="Infinity")return Number.POSITIVE_INFINITY;if(c==="-Infinity")return Number.NEGATIVE_INFINITY;if(c===""||typeof c=="string"&&c.trim().length!==c.length||typeof c!="string"&&typeof c!="number")break;const _=Number(c);if(Number.isNaN(_)||!Number.isFinite(_))break;return a==ScalarType.FLOAT&&assertFloat32(_),_;case ScalarType.INT32:case ScalarType.FIXED32:case ScalarType.SFIXED32:case ScalarType.SINT32:case ScalarType.UINT32:if(c===null)return 0;let k;if(typeof c=="number"?k=c:typeof c=="string"&&c.length>0&&c.trim().length===c.length&&(k=Number(c)),k===void 0)break;return a==ScalarType.UINT32?assertUInt32(k):assertInt32(k),k;case ScalarType.INT64:case ScalarType.SFIXED64:case ScalarType.SINT64:if(c===null)return protoInt64.zero;if(typeof c!="number"&&typeof c!="string")break;const j=protoInt64.parse(c);return b?j.toString():j;case ScalarType.FIXED64:case ScalarType.UINT64:if(c===null)return protoInt64.zero;if(typeof c!="number"&&typeof c!="string")break;const _e=protoInt64.uParse(c);return b?_e.toString():_e;case ScalarType.BOOL:if(c===null)return!1;if(typeof c!="boolean")break;return c;case ScalarType.STRING:if(c===null)return"";if(typeof c!="string")break;try{encodeURIComponent(c)}catch{throw new Error("invalid UTF8")}return c;case ScalarType.BYTES:if(c===null||c==="")return new Uint8Array(0);if(typeof c!="string")break;return protoBase64.dec(c)}throw new Error}function readEnum(a,c,b){if(c===null)return 0;switch(typeof c){case"number":if(Number.isInteger(c))return c;break;case"string":const _=a.findName(c);if(_||b)return _==null?void 0:_.no;break}throw new Error("cannot decode enum ".concat(a.typeName," from JSON: ").concat(debugJsonValue(c)))}function writeEnum(a,c,b,_){var k;if(c===void 0)return c;if(c===0&&!b)return;if(_)return c;if(a.typeName=="google.protobuf.NullValue")return null;const j=a.findNumber(c);return(k=j==null?void 0:j.name)!==null&&k!==void 0?k:c}function writeScalar(a,c,b){if(c!==void 0)switch(a){case ScalarType.INT32:case ScalarType.SFIXED32:case ScalarType.SINT32:case ScalarType.FIXED32:case ScalarType.UINT32:return assert(typeof c=="number"),c!=0||b?c:void 0;case ScalarType.FLOAT:case ScalarType.DOUBLE:return assert(typeof c=="number"),Number.isNaN(c)?"NaN":c===Number.POSITIVE_INFINITY?"Infinity":c===Number.NEGATIVE_INFINITY?"-Infinity":c!==0||b?c:void 0;case ScalarType.STRING:return assert(typeof c=="string"),c.length>0||b?c:void 0;case ScalarType.BOOL:return assert(typeof c=="boolean"),c||b?c:void 0;case ScalarType.UINT64:case ScalarType.FIXED64:case ScalarType.INT64:case ScalarType.SFIXED64:case ScalarType.SINT64:return assert(typeof c=="bigint"||typeof c=="string"||typeof c=="number"),b||c!=0?c.toString(10):void 0;case ScalarType.BYTES:return assert(c instanceof Uint8Array),b||c.byteLength>0?protoBase64.enc(c):void 0}}function makeJsonFormatProto3(){return makeJsonFormatCommon((a,c)=>function(_,k,j){if(_.kind=="map"){const _e={};switch(_.V.kind){case"scalar":for(const[nt,it]of Object.entries(k)){const ft=c(_.V.T,it,!0);assert(ft!==void 0),_e[nt.toString()]=ft}break;case"message":for(const[nt,it]of Object.entries(k))_e[nt.toString()]=it.toJson(j);break;case"enum":const et=_.V.T;for(const[nt,it]of Object.entries(k)){assert(it===void 0||typeof it=="number");const ft=a(et,it,!0,j.enumAsInteger);assert(ft!==void 0),_e[nt.toString()]=ft}break}return j.emitDefaultValues||Object.keys(_e).length>0?_e:void 0}else if(_.repeated){const _e=[];switch(_.kind){case"scalar":for(let et=0;et<k.length;et++)_e.push(c(_.T,k[et],!0));break;case"enum":for(let et=0;et<k.length;et++)_e.push(a(_.T,k[et],!0,j.enumAsInteger));break;case"message":for(let et=0;et<k.length;et++)_e.push(wrapField(_.T,k[et]).toJson(j));break}return j.emitDefaultValues||_e.length>0?_e:void 0}else switch(_.kind){case"scalar":return c(_.T,k,!!_.oneof||_.opt||j.emitDefaultValues);case"enum":return a(_.T,k,!!_.oneof||_.opt||j.emitDefaultValues,j.enumAsInteger);case"message":return k!==void 0?wrapField(_.T,k).toJson(j):void 0}})}function makeUtilCommon(){return{setEnumType,initPartial(a,c){if(a===void 0)return;const b=c.getType();for(const _ of b.fields.byMember()){const k=_.localName,j=c,_e=a;if(_e[k]!==void 0)switch(_.kind){case"oneof":const et=_e[k].case;if(et===void 0)continue;const nt=_.findField(et);let it=_e[k].value;nt&&nt.kind=="message"&&!(it instanceof nt.T)?it=new nt.T(it):nt&&nt.kind==="scalar"&&nt.T===ScalarType.BYTES&&(it=toU8Arr(it)),j[k]={case:et,value:it};break;case"scalar":case"enum":let ft=_e[k];_.T===ScalarType.BYTES&&(ft=_.repeated?ft.map(toU8Arr):toU8Arr(ft)),j[k]=ft;break;case"map":switch(_.V.kind){case"scalar":case"enum":if(_.V.T===ScalarType.BYTES)for(const[St,yt]of Object.entries(_e[k]))j[k][St]=toU8Arr(yt);else Object.assign(j[k],_e[k]);break;case"message":const mt=_.V.T;for(const St of Object.keys(_e[k])){let yt=_e[k][St];mt.fieldWrapper||(yt=new mt(yt)),j[k][St]=yt}break}break;case"message":const pt=_.T;if(_.repeated)j[k]=_e[k].map(mt=>mt instanceof pt?mt:new pt(mt));else if(_e[k]!==void 0){const mt=_e[k];pt.fieldWrapper?pt.typeName==="google.protobuf.BytesValue"?j[k]=toU8Arr(mt):j[k]=mt:j[k]=mt instanceof pt?mt:new pt(mt)}break}}},equals(a,c,b){return c===b?!0:!c||!b?!1:a.fields.byMember().every(_=>{const k=c[_.localName],j=b[_.localName];if(_.repeated){if(k.length!==j.length)return!1;switch(_.kind){case"message":return k.every((_e,et)=>_.T.equals(_e,j[et]));case"scalar":return k.every((_e,et)=>scalarEquals(_.T,_e,j[et]));case"enum":return k.every((_e,et)=>scalarEquals(ScalarType.INT32,_e,j[et]))}throw new Error("repeated cannot contain ".concat(_.kind))}switch(_.kind){case"message":return _.T.equals(k,j);case"enum":return scalarEquals(ScalarType.INT32,k,j);case"scalar":return scalarEquals(_.T,k,j);case"oneof":if(k.case!==j.case)return!1;const _e=_.findField(k.case);if(_e===void 0)return!0;switch(_e.kind){case"message":return _e.T.equals(k.value,j.value);case"enum":return scalarEquals(ScalarType.INT32,k.value,j.value);case"scalar":return scalarEquals(_e.T,k.value,j.value)}throw new Error("oneof cannot contain ".concat(_e.kind));case"map":const et=Object.keys(k).concat(Object.keys(j));switch(_.V.kind){case"message":const nt=_.V.T;return et.every(ft=>nt.equals(k[ft],j[ft]));case"enum":return et.every(ft=>scalarEquals(ScalarType.INT32,k[ft],j[ft]));case"scalar":const it=_.V.T;return et.every(ft=>scalarEquals(it,k[ft],j[ft]))}break}})},clone(a){const c=a.getType(),b=new c,_=b;for(const k of c.fields.byMember()){const j=a[k.localName];let _e;if(k.repeated)_e=j.map(cloneSingularField);else if(k.kind=="map"){_e=_[k.localName];for(const[et,nt]of Object.entries(j))_e[et]=cloneSingularField(nt)}else k.kind=="oneof"?_e=k.findField(j.case)?{case:j.case,value:cloneSingularField(j.value)}:{case:void 0}:_e=cloneSingularField(j);_[k.localName]=_e}return b}}}function cloneSingularField(a){if(a===void 0)return a;if(a instanceof Message)return a.clone();if(a instanceof Uint8Array){const c=new Uint8Array(a.byteLength);return c.set(a),c}return a}function toU8Arr(a){return a instanceof Uint8Array?a:new Uint8Array(a)}class InternalFieldList{constructor(c,b){this._fields=c,this._normalizer=b}findJsonName(c){if(!this.jsonNames){const b={};for(const _ of this.list())b[_.jsonName]=b[_.name]=_;this.jsonNames=b}return this.jsonNames[c]}find(c){if(!this.numbers){const b={};for(const _ of this.list())b[_.no]=_;this.numbers=b}return this.numbers[c]}list(){return this.all||(this.all=this._normalizer(this._fields)),this.all}byNumber(){return this.numbersAsc||(this.numbersAsc=this.list().concat().sort((c,b)=>c.no-b.no)),this.numbersAsc}byMember(){if(!this.members){this.members=[];const c=this.members;let b;for(const _ of this.list())_.oneof?_.oneof!==b&&(b=_.oneof,c.push(b)):c.push(_)}return this.members}}function localFieldName(a,c){const b=protoCamelCase(a);return c?b:safeObjectProperty(safeMessageProperty(b))}function localOneofName(a){return localFieldName(a,!1)}const fieldJsonName=protoCamelCase;function protoCamelCase(a){let c=!1;const b=[];for(let _=0;_<a.length;_++){let k=a.charAt(_);switch(k){case"_":c=!0;break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":b.push(k),c=!1;break;default:c&&(c=!1,k=k.toUpperCase()),b.push(k);break}}return b.join("")}const reservedObjectProperties=new Set(["constructor","toString","toJSON","valueOf"]),reservedMessageProperties=new Set(["getType","clone","equals","fromBinary","fromJson","fromJsonString","toBinary","toJson","toJsonString","toObject"]),fallback=a=>"".concat(a,"$"),safeMessageProperty=a=>reservedMessageProperties.has(a)?fallback(a):a,safeObjectProperty=a=>reservedObjectProperties.has(a)?fallback(a):a;class InternalOneofInfo{constructor(c){this.kind="oneof",this.repeated=!1,this.packed=!1,this.opt=!1,this.default=void 0,this.fields=[],this.name=c,this.localName=localOneofName(c)}addField(c){assert(c.oneof===this,"field ".concat(c.name," not one of ").concat(this.name)),this.fields.push(c)}findField(c){if(!this._lookup){this._lookup=Object.create(null);for(let b=0;b<this.fields.length;b++)this._lookup[this.fields[b].localName]=this.fields[b]}return this._lookup[c]}}const proto3=makeProtoRuntime("proto3",makeJsonFormatProto3(),makeBinaryFormatProto3(),Object.assign(Object.assign({},makeUtilCommon()),{newFieldList(a){return new InternalFieldList(a,normalizeFieldInfosProto3)},initFields(a){for(const c of a.getType().fields.byMember()){if(c.opt)continue;const b=c.localName,_=a;if(c.repeated){_[b]=[];continue}switch(c.kind){case"oneof":_[b]={case:void 0};break;case"enum":_[b]=0;break;case"map":_[b]={};break;case"scalar":_[b]=scalarDefaultValue(c.T,c.L);break}}}}));function normalizeFieldInfosProto3(a){var c,b,_,k;const j=[];let _e;for(const et of typeof a=="function"?a():a){const nt=et;if(nt.localName=localFieldName(et.name,et.oneof!==void 0),nt.jsonName=(c=et.jsonName)!==null&&c!==void 0?c:fieldJsonName(et.name),nt.repeated=(b=et.repeated)!==null&&b!==void 0?b:!1,et.kind=="scalar"&&(nt.L=(_=et.L)!==null&&_!==void 0?_:LongType.BIGINT),nt.packed=(k=et.packed)!==null&&k!==void 0?k:et.kind=="enum"||et.kind=="scalar"&&et.T!=ScalarType.BYTES&&et.T!=ScalarType.STRING,et.oneof!==void 0){const it=typeof et.oneof=="string"?et.oneof:et.oneof.name;(!_e||_e.name!=it)&&(_e=new InternalOneofInfo(it)),nt.oneof=_e,_e.addField(nt)}j.push(nt)}return j}class Timestamp extends Message{constructor(c){super(),this.seconds=protoInt64.zero,this.nanos=0,proto3.util.initPartial(c,this)}fromJson(c,b){if(typeof c!="string")throw new Error("cannot decode google.protobuf.Timestamp from JSON: ".concat(proto3.json.debug(c)));const _=c.match(/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2}):([0-9]{2})(?:Z|\.([0-9]{3,9})Z|([+-][0-9][0-9]:[0-9][0-9]))$/);if(!_)throw new Error("cannot decode google.protobuf.Timestamp from JSON: invalid RFC 3339 string");const k=Date.parse(_[1]+"-"+_[2]+"-"+_[3]+"T"+_[4]+":"+_[5]+":"+_[6]+(_[8]?_[8]:"Z"));if(Number.isNaN(k))throw new Error("cannot decode google.protobuf.Timestamp from JSON: invalid RFC 3339 string");if(k<Date.parse("0001-01-01T00:00:00Z")||k>Date.parse("9999-12-31T23:59:59Z"))throw new Error("cannot decode message google.protobuf.Timestamp from JSON: must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive");return this.seconds=protoInt64.parse(k/1e3),this.nanos=0,_[7]&&(this.nanos=parseInt("1"+_[7]+"0".repeat(9-_[7].length))-1e9),this}toJson(c){const b=Number(this.seconds)*1e3;if(b<Date.parse("0001-01-01T00:00:00Z")||b>Date.parse("9999-12-31T23:59:59Z"))throw new Error("cannot encode google.protobuf.Timestamp to JSON: must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive");if(this.nanos<0)throw new Error("cannot encode google.protobuf.Timestamp to JSON: nanos must not be negative");let _="Z";if(this.nanos>0){const k=(this.nanos+1e9).toString().substring(1);k.substring(3)==="000000"?_="."+k.substring(0,3)+"Z":k.substring(6)==="000"?_="."+k.substring(0,6)+"Z":_="."+k+"Z"}return new Date(b).toISOString().replace(".000Z",_)}toDate(){return new Date(Number(this.seconds)*1e3+Math.ceil(this.nanos/1e6))}static now(){return Timestamp.fromDate(new Date)}static fromDate(c){const b=c.getTime();return new Timestamp({seconds:protoInt64.parse(Math.floor(b/1e3)),nanos:b%1e3*1e6})}static fromBinary(c,b){return new Timestamp().fromBinary(c,b)}static fromJson(c,b){return new Timestamp().fromJson(c,b)}static fromJsonString(c,b){return new Timestamp().fromJsonString(c,b)}static equals(c,b){return proto3.util.equals(Timestamp,c,b)}}Timestamp.runtime=proto3;Timestamp.typeName="google.protobuf.Timestamp";Timestamp.fields=proto3.util.newFieldList(()=>[{no:1,name:"seconds",kind:"scalar",T:3},{no:2,name:"nanos",kind:"scalar",T:5}]);var AudioCodec;(function(a){a[a.DEFAULT_AC=0]="DEFAULT_AC",a[a.OPUS=1]="OPUS",a[a.AAC=2]="AAC"})(AudioCodec||(AudioCodec={}));proto3.util.setEnumType(AudioCodec,"livekit.AudioCodec",[{no:0,name:"DEFAULT_AC"},{no:1,name:"OPUS"},{no:2,name:"AAC"}]);var VideoCodec;(function(a){a[a.DEFAULT_VC=0]="DEFAULT_VC",a[a.H264_BASELINE=1]="H264_BASELINE",a[a.H264_MAIN=2]="H264_MAIN",a[a.H264_HIGH=3]="H264_HIGH",a[a.VP8=4]="VP8"})(VideoCodec||(VideoCodec={}));proto3.util.setEnumType(VideoCodec,"livekit.VideoCodec",[{no:0,name:"DEFAULT_VC"},{no:1,name:"H264_BASELINE"},{no:2,name:"H264_MAIN"},{no:3,name:"H264_HIGH"},{no:4,name:"VP8"}]);var ImageCodec;(function(a){a[a.IC_DEFAULT=0]="IC_DEFAULT",a[a.IC_JPEG=1]="IC_JPEG"})(ImageCodec||(ImageCodec={}));proto3.util.setEnumType(ImageCodec,"livekit.ImageCodec",[{no:0,name:"IC_DEFAULT"},{no:1,name:"IC_JPEG"}]);var TrackType;(function(a){a[a.AUDIO=0]="AUDIO",a[a.VIDEO=1]="VIDEO",a[a.DATA=2]="DATA"})(TrackType||(TrackType={}));proto3.util.setEnumType(TrackType,"livekit.TrackType",[{no:0,name:"AUDIO"},{no:1,name:"VIDEO"},{no:2,name:"DATA"}]);var TrackSource;(function(a){a[a.UNKNOWN=0]="UNKNOWN",a[a.CAMERA=1]="CAMERA",a[a.MICROPHONE=2]="MICROPHONE",a[a.SCREEN_SHARE=3]="SCREEN_SHARE",a[a.SCREEN_SHARE_AUDIO=4]="SCREEN_SHARE_AUDIO"})(TrackSource||(TrackSource={}));proto3.util.setEnumType(TrackSource,"livekit.TrackSource",[{no:0,name:"UNKNOWN"},{no:1,name:"CAMERA"},{no:2,name:"MICROPHONE"},{no:3,name:"SCREEN_SHARE"},{no:4,name:"SCREEN_SHARE_AUDIO"}]);var VideoQuality$1;(function(a){a[a.LOW=0]="LOW",a[a.MEDIUM=1]="MEDIUM",a[a.HIGH=2]="HIGH",a[a.OFF=3]="OFF"})(VideoQuality$1||(VideoQuality$1={}));proto3.util.setEnumType(VideoQuality$1,"livekit.VideoQuality",[{no:0,name:"LOW"},{no:1,name:"MEDIUM"},{no:2,name:"HIGH"},{no:3,name:"OFF"}]);var ConnectionQuality$1;(function(a){a[a.POOR=0]="POOR",a[a.GOOD=1]="GOOD",a[a.EXCELLENT=2]="EXCELLENT",a[a.LOST=3]="LOST"})(ConnectionQuality$1||(ConnectionQuality$1={}));proto3.util.setEnumType(ConnectionQuality$1,"livekit.ConnectionQuality",[{no:0,name:"POOR"},{no:1,name:"GOOD"},{no:2,name:"EXCELLENT"},{no:3,name:"LOST"}]);var ClientConfigSetting;(function(a){a[a.UNSET=0]="UNSET",a[a.DISABLED=1]="DISABLED",a[a.ENABLED=2]="ENABLED"})(ClientConfigSetting||(ClientConfigSetting={}));proto3.util.setEnumType(ClientConfigSetting,"livekit.ClientConfigSetting",[{no:0,name:"UNSET"},{no:1,name:"DISABLED"},{no:2,name:"ENABLED"}]);var DisconnectReason;(function(a){a[a.UNKNOWN_REASON=0]="UNKNOWN_REASON",a[a.CLIENT_INITIATED=1]="CLIENT_INITIATED",a[a.DUPLICATE_IDENTITY=2]="DUPLICATE_IDENTITY",a[a.SERVER_SHUTDOWN=3]="SERVER_SHUTDOWN",a[a.PARTICIPANT_REMOVED=4]="PARTICIPANT_REMOVED",a[a.ROOM_DELETED=5]="ROOM_DELETED",a[a.STATE_MISMATCH=6]="STATE_MISMATCH",a[a.JOIN_FAILURE=7]="JOIN_FAILURE",a[a.MIGRATION=8]="MIGRATION",a[a.SIGNAL_CLOSE=9]="SIGNAL_CLOSE"})(DisconnectReason||(DisconnectReason={}));proto3.util.setEnumType(DisconnectReason,"livekit.DisconnectReason",[{no:0,name:"UNKNOWN_REASON"},{no:1,name:"CLIENT_INITIATED"},{no:2,name:"DUPLICATE_IDENTITY"},{no:3,name:"SERVER_SHUTDOWN"},{no:4,name:"PARTICIPANT_REMOVED"},{no:5,name:"ROOM_DELETED"},{no:6,name:"STATE_MISMATCH"},{no:7,name:"JOIN_FAILURE"},{no:8,name:"MIGRATION"},{no:9,name:"SIGNAL_CLOSE"}]);var ReconnectReason;(function(a){a[a.RR_UNKNOWN=0]="RR_UNKNOWN",a[a.RR_SIGNAL_DISCONNECTED=1]="RR_SIGNAL_DISCONNECTED",a[a.RR_PUBLISHER_FAILED=2]="RR_PUBLISHER_FAILED",a[a.RR_SUBSCRIBER_FAILED=3]="RR_SUBSCRIBER_FAILED",a[a.RR_SWITCH_CANDIDATE=4]="RR_SWITCH_CANDIDATE"})(ReconnectReason||(ReconnectReason={}));proto3.util.setEnumType(ReconnectReason,"livekit.ReconnectReason",[{no:0,name:"RR_UNKNOWN"},{no:1,name:"RR_SIGNAL_DISCONNECTED"},{no:2,name:"RR_PUBLISHER_FAILED"},{no:3,name:"RR_SUBSCRIBER_FAILED"},{no:4,name:"RR_SWITCH_CANDIDATE"}]);var SubscriptionError;(function(a){a[a.SE_UNKNOWN=0]="SE_UNKNOWN",a[a.SE_CODEC_UNSUPPORTED=1]="SE_CODEC_UNSUPPORTED",a[a.SE_TRACK_NOTFOUND=2]="SE_TRACK_NOTFOUND"})(SubscriptionError||(SubscriptionError={}));proto3.util.setEnumType(SubscriptionError,"livekit.SubscriptionError",[{no:0,name:"SE_UNKNOWN"},{no:1,name:"SE_CODEC_UNSUPPORTED"},{no:2,name:"SE_TRACK_NOTFOUND"}]);let Room$1=class mr extends Message{constructor(c){super(),this.sid="",this.name="",this.emptyTimeout=0,this.maxParticipants=0,this.creationTime=protoInt64.zero,this.turnPassword="",this.enabledCodecs=[],this.metadata="",this.numParticipants=0,this.numPublishers=0,this.activeRecording=!1,proto3.util.initPartial(c,this)}static fromBinary(c,b){return new mr().fromBinary(c,b)}static fromJson(c,b){return new mr().fromJson(c,b)}static fromJsonString(c,b){return new mr().fromJsonString(c,b)}static equals(c,b){return proto3.util.equals(mr,c,b)}};Room$1.runtime=proto3;Room$1.typeName="livekit.Room";Room$1.fields=proto3.util.newFieldList(()=>[{no:1,name:"sid",kind:"scalar",T:9},{no:2,name:"name",kind:"scalar",T:9},{no:3,name:"empty_timeout",kind:"scalar",T:13},{no:4,name:"max_participants",kind:"scalar",T:13},{no:5,name:"creation_time",kind:"scalar",T:3},{no:6,name:"turn_password",kind:"scalar",T:9},{no:7,name:"enabled_codecs",kind:"message",T:Codec,repeated:!0},{no:8,name:"metadata",kind:"scalar",T:9},{no:9,name:"num_participants",kind:"scalar",T:13},{no:11,name:"num_publishers",kind:"scalar",T:13},{no:10,name:"active_recording",kind:"scalar",T:8},{no:13,name:"version",kind:"message",T:TimedVersion}]);class Codec extends Message{constructor(c){super(),this.mime="",this.fmtpLine="",proto3.util.initPartial(c,this)}static fromBinary(c,b){return new Codec().fromBinary(c,b)}static fromJson(c,b){return new Codec().fromJson(c,b)}static fromJsonString(c,b){return new Codec().fromJsonString(c,b)}static equals(c,b){return proto3.util.equals(Codec,c,b)}}Codec.runtime=proto3;Codec.typeName="livekit.Codec";Codec.fields=proto3.util.newFieldList(()=>[{no:1,name:"mime",kind:"scalar",T:9},{no:2,name:"fmtp_line",kind:"scalar",T:9}]);class PlayoutDelay extends Message{constructor(c){super(),this.enabled=!1,this.min=0,this.max=0,proto3.util.initPartial(c,this)}static fromBinary(c,b){return new PlayoutDelay().fromBinary(c,b)}static fromJson(c,b){return new PlayoutDelay().fromJson(c,b)}static fromJsonString(c,b){return new PlayoutDelay().fromJsonString(c,b)}static equals(c,b){return proto3.util.equals(PlayoutDelay,c,b)}}PlayoutDelay.runtime=proto3;PlayoutDelay.typeName="livekit.PlayoutDelay";PlayoutDelay.fields=proto3.util.newFieldList(()=>[{no:1,name:"enabled",kind:"scalar",T:8},{no:2,name:"min",kind:"scalar",T:13},{no:3,name:"max",kind:"scalar",T:13}]);class ParticipantPermission extends Message{constructor(c){super(),this.canSubscribe=!1,this.canPublish=!1,this.canPublishData=!1,this.canPublishSources=[],this.hidden=!1,this.recorder=!1,this.canUpdateMetadata=!1,this.agent=!1,proto3.util.initPartial(c,this)}static fromBinary(c,b){return new ParticipantPermission().fromBinary(c,b)}static fromJson(c,b){return new ParticipantPermission().fromJson(c,b)}static fromJsonString(c,b){return new ParticipantPermission().fromJsonString(c,b)}static equals(c,b){return proto3.util.equals(ParticipantPermission,c,b)}}ParticipantPermission.runtime=proto3;ParticipantPermission.typeName="livekit.ParticipantPermission";ParticipantPermission.fields=proto3.util.newFieldList(()=>[{no:1,name:"can_subscribe",kind:"scalar",T:8},{no:2,name:"can_publish",kind:"scalar",T:8},{no:3,name:"can_publish_data",kind:"scalar",T:8},{no:9,name:"can_publish_sources",kind:"enum",T:proto3.getEnumType(TrackSource),repeated:!0},{no:7,name:"hidden",kind:"scalar",T:8},{no:8,name:"recorder",kind:"scalar",T:8},{no:10,name:"can_update_metadata",kind:"scalar",T:8},{no:11,name:"agent",kind:"scalar",T:8}]);class ParticipantInfo extends Message{constructor(c){super(),this.sid="",this.identity="",this.state=ParticipantInfo_State.JOINING,this.tracks=[],this.metadata="",this.joinedAt=protoInt64.zero,this.name="",this.version=0,this.region="",this.isPublisher=!1,this.kind=ParticipantInfo_Kind.STANDARD,proto3.util.initPartial(c,this)}static fromBinary(c,b){return new ParticipantInfo().fromBinary(c,b)}static fromJson(c,b){return new ParticipantInfo().fromJson(c,b)}static fromJsonString(c,b){return new ParticipantInfo().fromJsonString(c,b)}static equals(c,b){return proto3.util.equals(ParticipantInfo,c,b)}}ParticipantInfo.runtime=proto3;ParticipantInfo.typeName="livekit.ParticipantInfo";ParticipantInfo.fields=proto3.util.newFieldList(()=>[{no:1,name:"sid",kind:"scalar",T:9},{no:2,name:"identity",kind:"scalar",T:9},{no:3,name:"state",kind:"enum",T:proto3.getEnumType(ParticipantInfo_State)},{no:4,name:"tracks",kind:"message",T:TrackInfo,repeated:!0},{no:5,name:"metadata",kind:"scalar",T:9},{no:6,name:"joined_at",kind:"scalar",T:3},{no:9,name:"name",kind:"scalar",T:9},{no:10,name:"version",kind:"scalar",T:13},{no:11,name:"permission",kind:"message",T:ParticipantPermission},{no:12,name:"region",kind:"scalar",T:9},{no:13,name:"is_publisher",kind:"scalar",T:8},{no:14,name:"kind",kind:"enum",T:proto3.getEnumType(ParticipantInfo_Kind)}]);var ParticipantInfo_State;(function(a){a[a.JOINING=0]="JOINING",a[a.JOINED=1]="JOINED",a[a.ACTIVE=2]="ACTIVE",a[a.DISCONNECTED=3]="DISCONNECTED"})(ParticipantInfo_State||(ParticipantInfo_State={}));proto3.util.setEnumType(ParticipantInfo_State,"livekit.ParticipantInfo.State",[{no:0,name:"JOINING"},{no:1,name:"JOINED"},{no:2,name:"ACTIVE"},{no:3,name:"DISCONNECTED"}]);var ParticipantInfo_Kind;(function(a){a[a.STANDARD=0]="STANDARD",a[a.INGRESS=1]="INGRESS",a[a.EGRESS=2]="EGRESS",a[a.SIP=3]="SIP",a[a.AGENT=4]="AGENT"})(ParticipantInfo_Kind||(ParticipantInfo_Kind={}));proto3.util.setEnumType(ParticipantInfo_Kind,"livekit.ParticipantInfo.Kind",[{no:0,name:"STANDARD"},{no:1,name:"INGRESS"},{no:2,name:"EGRESS"},{no:3,name:"SIP"},{no:4,name:"AGENT"}]);class Encryption extends Message{constructor(c){super(),proto3.util.initPartial(c,this)}static fromBinary(c,b){return new Encryption().fromBinary(c,b)}static fromJson(c,b){return new Encryption().fromJson(c,b)}static fromJsonString(c,b){return new Encryption().fromJsonString(c,b)}static equals(c,b){return proto3.util.equals(Encryption,c,b)}}Encryption.runtime=proto3;Encryption.typeName="livekit.Encryption";Encryption.fields=proto3.util.newFieldList(()=>[]);var Encryption_Type;(function(a){a[a.NONE=0]="NONE",a[a.GCM=1]="GCM",a[a.CUSTOM=2]="CUSTOM"})(Encryption_Type||(Encryption_Type={}));proto3.util.setEnumType(Encryption_Type,"livekit.Encryption.Type",[{no:0,name:"NONE"},{no:1,name:"GCM"},{no:2,name:"CUSTOM"}]);class SimulcastCodecInfo extends Message{constructor(c){super(),this.mimeType="",this.mid="",this.cid="",this.layers=[],proto3.util.initPartial(c,this)}static fromBinary(c,b){return new SimulcastCodecInfo().fromBinary(c,b)}static fromJson(c,b){return new SimulcastCodecInfo().fromJson(c,b)}static fromJsonString(c,b){return new SimulcastCodecInfo().fromJsonString(c,b)}static equals(c,b){return proto3.util.equals(SimulcastCodecInfo,c,b)}}SimulcastCodecInfo.runtime=proto3;SimulcastCodecInfo.typeName="livekit.SimulcastCodecInfo";SimulcastCodecInfo.fields=proto3.util.newFieldList(()=>[{no:1,name:"mime_type",kind:"scalar",T:9},{no:2,name:"mid",kind:"scalar",T:9},{no:3,name:"cid",kind:"scalar",T:9},{no:4,name:"layers",kind:"message",T:VideoLayer,repeated:!0}]);class TrackInfo extends Message{constructor(c){super(),this.sid="",this.type=TrackType.AUDIO,this.name="",this.muted=!1,this.width=0,this.height=0,this.simulcast=!1,this.disableDtx=!1,this.source=TrackSource.UNKNOWN,this.layers=[],this.mimeType="",this.mid="",this.codecs=[],this.stereo=!1,this.disableRed=!1,this.encryption=Encryption_Type.NONE,this.stream="",proto3.util.initPartial(c,this)}static fromBinary(c,b){return new TrackInfo().fromBinary(c,b)}static fromJson(c,b){return new TrackInfo().fromJson(c,b)}static fromJsonString(c,b){return new TrackInfo().fromJsonString(c,b)}static equals(c,b){return proto3.util.equals(TrackInfo,c,b)}}TrackInfo.runtime=proto3;TrackInfo.typeName="livekit.TrackInfo";TrackInfo.fields=proto3.util.newFieldList(()=>[{no:1,name:"sid",kind:"scalar",T:9},{no:2,name:"type",kind:"enum",T:proto3.getEnumType(TrackType)},{no:3,name:"name",kind:"scalar",T:9},{no:4,name:"muted",kind:"scalar",T:8},{no:5,name:"width",kind:"scalar",T:13},{no:6,name:"height",kind:"scalar",T:13},{no:7,name:"simulcast",kind:"scalar",T:8},{no:8,name:"disable_dtx",kind:"scalar",T:8},{no:9,name:"source",kind:"enum",T:proto3.getEnumType(TrackSource)},{no:10,name:"layers",kind:"message",T:VideoLayer,repeated:!0},{no:11,name:"mime_type",kind:"scalar",T:9},{no:12,name:"mid",kind:"scalar",T:9},{no:13,name:"codecs",kind:"message",T:SimulcastCodecInfo,repeated:!0},{no:14,name:"stereo",kind:"scalar",T:8},{no:15,name:"disable_red",kind:"scalar",T:8},{no:16,name:"encryption",kind:"enum",T:proto3.getEnumType(Encryption_Type)},{no:17,name:"stream",kind:"scalar",T:9},{no:18,name:"version",kind:"message",T:TimedVersion}]);class VideoLayer extends Message{constructor(c){super(),this.quality=VideoQuality$1.LOW,this.width=0,this.height=0,this.bitrate=0,this.ssrc=0,proto3.util.initPartial(c,this)}static fromBinary(c,b){return new VideoLayer().fromBinary(c,b)}static fromJson(c,b){return new VideoLayer().fromJson(c,b)}static fromJsonString(c,b){return new VideoLayer().fromJsonString(c,b)}static equals(c,b){return proto3.util.equals(VideoLayer,c,b)}}VideoLayer.runtime=proto3;VideoLayer.typeName="livekit.VideoLayer";VideoLayer.fields=proto3.util.newFieldList(()=>[{no:1,name:"quality",kind:"enum",T:proto3.getEnumType(VideoQuality$1)},{no:2,name:"width",kind:"scalar",T:13},{no:3,name:"height",kind:"scalar",T:13},{no:4,name:"bitrate",kind:"scalar",T:13},{no:5,name:"ssrc",kind:"scalar",T:13}]);class DataPacket extends Message{constructor(c){super(),this.kind=DataPacket_Kind.RELIABLE,this.value={case:void 0},proto3.util.initPartial(c,this)}static fromBinary(c,b){return new DataPacket().fromBinary(c,b)}static fromJson(c,b){return new DataPacket().fromJson(c,b)}static fromJsonString(c,b){return new DataPacket().fromJsonString(c,b)}static equals(c,b){return proto3.util.equals(DataPacket,c,b)}}DataPacket.runtime=proto3;DataPacket.typeName="livekit.DataPacket";DataPacket.fields=proto3.util.newFieldList(()=>[{no:1,name:"kind",kind:"enum",T:proto3.getEnumType(DataPacket_Kind)},{no:2,name:"user",kind:"message",T:UserPacket,oneof:"value"},{no:3,name:"speaker",kind:"message",T:ActiveSpeakerUpdate,oneof:"value"}]);var DataPacket_Kind;(function(a){a[a.RELIABLE=0]="RELIABLE",a[a.LOSSY=1]="LOSSY"})(DataPacket_Kind||(DataPacket_Kind={}));proto3.util.setEnumType(DataPacket_Kind,"livekit.DataPacket.Kind",[{no:0,name:"RELIABLE"},{no:1,name:"LOSSY"}]);class ActiveSpeakerUpdate extends Message{constructor(c){super(),this.speakers=[],proto3.util.initPartial(c,this)}static fromBinary(c,b){return new ActiveSpeakerUpdate().fromBinary(c,b)}static fromJson(c,b){return new ActiveSpeakerUpdate().fromJson(c,b)}static fromJsonString(c,b){return new ActiveSpeakerUpdate().fromJsonString(c,b)}static equals(c,b){return proto3.util.equals(ActiveSpeakerUpdate,c,b)}}ActiveSpeakerUpdate.runtime=proto3;ActiveSpeakerUpdate.typeName="livekit.ActiveSpeakerUpdate";ActiveSpeakerUpdate.fields=proto3.util.newFieldList(()=>[{no:1,name:"speakers",kind:"message",T:SpeakerInfo,repeated:!0}]);class SpeakerInfo extends Message{constructor(c){super(),this.sid="",this.level=0,this.active=!1,proto3.util.initPartial(c,this)}static fromBinary(c,b){return new SpeakerInfo().fromBinary(c,b)}static fromJson(c,b){return new SpeakerInfo().fromJson(c,b)}static fromJsonString(c,b){return new SpeakerInfo().fromJsonString(c,b)}static equals(c,b){return proto3.util.equals(SpeakerInfo,c,b)}}SpeakerInfo.runtime=proto3;SpeakerInfo.typeName="livekit.SpeakerInfo";SpeakerInfo.fields=proto3.util.newFieldList(()=>[{no:1,name:"sid",kind:"scalar",T:9},{no:2,name:"level",kind:"scalar",T:2},{no:3,name:"active",kind:"scalar",T:8}]);class UserPacket extends Message{constructor(c){super(),this.participantSid="",this.participantIdentity="",this.payload=new Uint8Array(0),this.destinationSids=[],this.destinationIdentities=[],proto3.util.initPartial(c,this)}static fromBinary(c,b){return new UserPacket().fromBinary(c,b)}static fromJson(c,b){return new UserPacket().fromJson(c,b)}static fromJsonString(c,b){return new UserPacket().fromJsonString(c,b)}static equals(c,b){return proto3.util.equals(UserPacket,c,b)}}UserPacket.runtime=proto3;UserPacket.typeName="livekit.UserPacket";UserPacket.fields=proto3.util.newFieldList(()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:5,name:"participant_identity",kind:"scalar",T:9},{no:2,name:"payload",kind:"scalar",T:12},{no:3,name:"destination_sids",kind:"scalar",T:9,repeated:!0},{no:6,name:"destination_identities",kind:"scalar",T:9,repeated:!0},{no:4,name:"topic",kind:"scalar",T:9,opt:!0}]);class ParticipantTracks extends Message{constructor(c){super(),this.participantSid="",this.trackSids=[],proto3.util.initPartial(c,this)}static fromBinary(c,b){return new ParticipantTracks().fromBinary(c,b)}static fromJson(c,b){return new ParticipantTracks().fromJson(c,b)}static fromJsonString(c,b){return new ParticipantTracks().fromJsonString(c,b)}static equals(c,b){return proto3.util.equals(ParticipantTracks,c,b)}}ParticipantTracks.runtime=proto3;ParticipantTracks.typeName="livekit.ParticipantTracks";ParticipantTracks.fields=proto3.util.newFieldList(()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:2,name:"track_sids",kind:"scalar",T:9,repeated:!0}]);class ServerInfo extends Message{constructor(c){super(),this.edition=ServerInfo_Edition.Standard,this.version="",this.protocol=0,this.region="",this.nodeId="",this.debugInfo="",proto3.util.initPartial(c,this)}static fromBinary(c,b){return new ServerInfo().fromBinary(c,b)}static fromJson(c,b){return new ServerInfo().fromJson(c,b)}static fromJsonString(c,b){return new ServerInfo().fromJsonString(c,b)}static equals(c,b){return proto3.util.equals(ServerInfo,c,b)}}ServerInfo.runtime=proto3;ServerInfo.typeName="livekit.ServerInfo";ServerInfo.fields=proto3.util.newFieldList(()=>[{no:1,name:"edition",kind:"enum",T:proto3.getEnumType(ServerInfo_Edition)},{no:2,name:"version",kind:"scalar",T:9},{no:3,name:"protocol",kind:"scalar",T:5},{no:4,name:"region",kind:"scalar",T:9},{no:5,name:"node_id",kind:"scalar",T:9},{no:6,name:"debug_info",kind:"scalar",T:9}]);var ServerInfo_Edition;(function(a){a[a.Standard=0]="Standard",a[a.Cloud=1]="Cloud"})(ServerInfo_Edition||(ServerInfo_Edition={}));proto3.util.setEnumType(ServerInfo_Edition,"livekit.ServerInfo.Edition",[{no:0,name:"Standard"},{no:1,name:"Cloud"}]);class ClientInfo extends Message{constructor(c){super(),this.sdk=ClientInfo_SDK.UNKNOWN,this.version="",this.protocol=0,this.os="",this.osVersion="",this.deviceModel="",this.browser="",this.browserVersion="",this.address="",this.network="",proto3.util.initPartial(c,this)}static fromBinary(c,b){return new ClientInfo().fromBinary(c,b)}static fromJson(c,b){return new ClientInfo().fromJson(c,b)}static fromJsonString(c,b){return new ClientInfo().fromJsonString(c,b)}static equals(c,b){return proto3.util.equals(ClientInfo,c,b)}}ClientInfo.runtime=proto3;ClientInfo.typeName="livekit.ClientInfo";ClientInfo.fields=proto3.util.newFieldList(()=>[{no:1,name:"sdk",kind:"enum",T:proto3.getEnumType(ClientInfo_SDK)},{no:2,name:"version",kind:"scalar",T:9},{no:3,name:"protocol",kind:"scalar",T:5},{no:4,name:"os",kind:"scalar",T:9},{no:5,name:"os_version",kind:"scalar",T:9},{no:6,name:"device_model",kind:"scalar",T:9},{no:7,name:"browser",kind:"scalar",T:9},{no:8,name:"browser_version",kind:"scalar",T:9},{no:9,name:"address",kind:"scalar",T:9},{no:10,name:"network",kind:"scalar",T:9}]);var ClientInfo_SDK;(function(a){a[a.UNKNOWN=0]="UNKNOWN",a[a.JS=1]="JS",a[a.SWIFT=2]="SWIFT",a[a.ANDROID=3]="ANDROID",a[a.FLUTTER=4]="FLUTTER",a[a.GO=5]="GO",a[a.UNITY=6]="UNITY",a[a.REACT_NATIVE=7]="REACT_NATIVE",a[a.RUST=8]="RUST",a[a.PYTHON=9]="PYTHON",a[a.CPP=10]="CPP"})(ClientInfo_SDK||(ClientInfo_SDK={}));proto3.util.setEnumType(ClientInfo_SDK,"livekit.ClientInfo.SDK",[{no:0,name:"UNKNOWN"},{no:1,name:"JS"},{no:2,name:"SWIFT"},{no:3,name:"ANDROID"},{no:4,name:"FLUTTER"},{no:5,name:"GO"},{no:6,name:"UNITY"},{no:7,name:"REACT_NATIVE"},{no:8,name:"RUST"},{no:9,name:"PYTHON"},{no:10,name:"CPP"}]);class ClientConfiguration extends Message{constructor(c){super(),this.resumeConnection=ClientConfigSetting.UNSET,this.forceRelay=ClientConfigSetting.UNSET,proto3.util.initPartial(c,this)}static fromBinary(c,b){return new ClientConfiguration().fromBinary(c,b)}static fromJson(c,b){return new ClientConfiguration().fromJson(c,b)}static fromJsonString(c,b){return new ClientConfiguration().fromJsonString(c,b)}static equals(c,b){return proto3.util.equals(ClientConfiguration,c,b)}}ClientConfiguration.runtime=proto3;ClientConfiguration.typeName="livekit.ClientConfiguration";ClientConfiguration.fields=proto3.util.newFieldList(()=>[{no:1,name:"video",kind:"message",T:VideoConfiguration},{no:2,name:"screen",kind:"message",T:VideoConfiguration},{no:3,name:"resume_connection",kind:"enum",T:proto3.getEnumType(ClientConfigSetting)},{no:4,name:"disabled_codecs",kind:"message",T:DisabledCodecs},{no:5,name:"force_relay",kind:"enum",T:proto3.getEnumType(ClientConfigSetting)}]);class VideoConfiguration extends Message{constructor(c){super(),this.hardwareEncoder=ClientConfigSetting.UNSET,proto3.util.initPartial(c,this)}static fromBinary(c,b){return new VideoConfiguration().fromBinary(c,b)}static fromJson(c,b){return new VideoConfiguration().fromJson(c,b)}static fromJsonString(c,b){return new VideoConfiguration().fromJsonString(c,b)}static equals(c,b){return proto3.util.equals(VideoConfiguration,c,b)}}VideoConfiguration.runtime=proto3;VideoConfiguration.typeName="livekit.VideoConfiguration";VideoConfiguration.fields=proto3.util.newFieldList(()=>[{no:1,name:"hardware_encoder",kind:"enum",T:proto3.getEnumType(ClientConfigSetting)}]);class DisabledCodecs extends Message{constructor(c){super(),this.codecs=[],this.publish=[],proto3.util.initPartial(c,this)}static fromBinary(c,b){return new DisabledCodecs().fromBinary(c,b)}static fromJson(c,b){return new DisabledCodecs().fromJson(c,b)}static fromJsonString(c,b){return new DisabledCodecs().fromJsonString(c,b)}static equals(c,b){return proto3.util.equals(DisabledCodecs,c,b)}}DisabledCodecs.runtime=proto3;DisabledCodecs.typeName="livekit.DisabledCodecs";DisabledCodecs.fields=proto3.util.newFieldList(()=>[{no:1,name:"codecs",kind:"message",T:Codec,repeated:!0},{no:2,name:"publish",kind:"message",T:Codec,repeated:!0}]);class RTPDrift extends Message{constructor(c){super(),this.duration=0,this.startTimestamp=protoInt64.zero,this.endTimestamp=protoInt64.zero,this.rtpClockTicks=protoInt64.zero,this.driftSamples=protoInt64.zero,this.driftMs=0,this.clockRate=0,proto3.util.initPartial(c,this)}static fromBinary(c,b){return new RTPDrift().fromBinary(c,b)}static fromJson(c,b){return new RTPDrift().fromJson(c,b)}static fromJsonString(c,b){return new RTPDrift().fromJsonString(c,b)}static equals(c,b){return proto3.util.equals(RTPDrift,c,b)}}RTPDrift.runtime=proto3;RTPDrift.typeName="livekit.RTPDrift";RTPDrift.fields=proto3.util.newFieldList(()=>[{no:1,name:"start_time",kind:"message",T:Timestamp},{no:2,name:"end_time",kind:"message",T:Timestamp},{no:3,name:"duration",kind:"scalar",T:1},{no:4,name:"start_timestamp",kind:"scalar",T:4},{no:5,name:"end_timestamp",kind:"scalar",T:4},{no:6,name:"rtp_clock_ticks",kind:"scalar",T:4},{no:7,name:"drift_samples",kind:"scalar",T:3},{no:8,name:"drift_ms",kind:"scalar",T:1},{no:9,name:"clock_rate",kind:"scalar",T:1}]);class RTPStats extends Message{constructor(c){super(),this.duration=0,this.packets=0,this.packetRate=0,this.bytes=protoInt64.zero,this.headerBytes=protoInt64.zero,this.bitrate=0,this.packetsLost=0,this.packetLossRate=0,this.packetLossPercentage=0,this.packetsDuplicate=0,this.packetDuplicateRate=0,this.bytesDuplicate=protoInt64.zero,this.headerBytesDuplicate=protoInt64.zero,this.bitrateDuplicate=0,this.packetsPadding=0,this.packetPaddingRate=0,this.bytesPadding=protoInt64.zero,this.headerBytesPadding=protoInt64.zero,this.bitratePadding=0,this.packetsOutOfOrder=0,this.frames=0,this.frameRate=0,this.jitterCurrent=0,this.jitterMax=0,this.gapHistogram={},this.nacks=0,this.nackAcks=0,this.nackMisses=0,this.nackRepeated=0,this.plis=0,this.firs=0,this.rttCurrent=0,this.rttMax=0,this.keyFrames=0,this.layerLockPlis=0,proto3.util.initPartial(c,this)}static fromBinary(c,b){return new RTPStats().fromBinary(c,b)}static fromJson(c,b){return new RTPStats().fromJson(c,b)}static fromJsonString(c,b){return new RTPStats().fromJsonString(c,b)}static equals(c,b){return proto3.util.equals(RTPStats,c,b)}}RTPStats.runtime=proto3;RTPStats.typeName="livekit.RTPStats";RTPStats.fields=proto3.util.newFieldList(()=>[{no:1,name:"start_time",kind:"message",T:Timestamp},{no:2,name:"end_time",kind:"message",T:Timestamp},{no:3,name:"duration",kind:"scalar",T:1},{no:4,name:"packets",kind:"scalar",T:13},{no:5,name:"packet_rate",kind:"scalar",T:1},{no:6,name:"bytes",kind:"scalar",T:4},{no:39,name:"header_bytes",kind:"scalar",T:4},{no:7,name:"bitrate",kind:"scalar",T:1},{no:8,name:"packets_lost",kind:"scalar",T:13},{no:9,name:"packet_loss_rate",kind:"scalar",T:1},{no:10,name:"packet_loss_percentage",kind:"scalar",T:2},{no:11,name:"packets_duplicate",kind:"scalar",T:13},{no:12,name:"packet_duplicate_rate",kind:"scalar",T:1},{no:13,name:"bytes_duplicate",kind:"scalar",T:4},{no:40,name:"header_bytes_duplicate",kind:"scalar",T:4},{no:14,name:"bitrate_duplicate",kind:"scalar",T:1},{no:15,name:"packets_padding",kind:"scalar",T:13},{no:16,name:"packet_padding_rate",kind:"scalar",T:1},{no:17,name:"bytes_padding",kind:"scalar",T:4},{no:41,name:"header_bytes_padding",kind:"scalar",T:4},{no:18,name:"bitrate_padding",kind:"scalar",T:1},{no:19,name:"packets_out_of_order",kind:"scalar",T:13},{no:20,name:"frames",kind:"scalar",T:13},{no:21,name:"frame_rate",kind:"scalar",T:1},{no:22,name:"jitter_current",kind:"scalar",T:1},{no:23,name:"jitter_max",kind:"scalar",T:1},{no:24,name:"gap_histogram",kind:"map",K:5,V:{kind:"scalar",T:13}},{no:25,name:"nacks",kind:"scalar",T:13},{no:37,name:"nack_acks",kind:"scalar",T:13},{no:26,name:"nack_misses",kind:"scalar",T:13},{no:38,name:"nack_repeated",kind:"scalar",T:13},{no:27,name:"plis",kind:"scalar",T:13},{no:28,name:"last_pli",kind:"message",T:Timestamp},{no:29,name:"firs",kind:"scalar",T:13},{no:30,name:"last_fir",kind:"message",T:Timestamp},{no:31,name:"rtt_current",kind:"scalar",T:13},{no:32,name:"rtt_max",kind:"scalar",T:13},{no:33,name:"key_frames",kind:"scalar",T:13},{no:34,name:"last_key_frame",kind:"message",T:Timestamp},{no:35,name:"layer_lock_plis",kind:"scalar",T:13},{no:36,name:"last_layer_lock_pli",kind:"message",T:Timestamp},{no:44,name:"packet_drift",kind:"message",T:RTPDrift},{no:45,name:"report_drift",kind:"message",T:RTPDrift}]);class TimedVersion extends Message{constructor(c){super(),this.unixMicro=protoInt64.zero,this.ticks=0,proto3.util.initPartial(c,this)}static fromBinary(c,b){return new TimedVersion().fromBinary(c,b)}static fromJson(c,b){return new TimedVersion().fromJson(c,b)}static fromJsonString(c,b){return new TimedVersion().fromJsonString(c,b)}static equals(c,b){return proto3.util.equals(TimedVersion,c,b)}}TimedVersion.runtime=proto3;TimedVersion.typeName="livekit.TimedVersion";TimedVersion.fields=proto3.util.newFieldList(()=>[{no:1,name:"unix_micro",kind:"scalar",T:3},{no:2,name:"ticks",kind:"scalar",T:5}]);const maxRetryDelay=7e3,DEFAULT_RETRY_DELAYS_IN_MS=[0,300,2*2*300,3*3*300,4*4*300,maxRetryDelay,maxRetryDelay,maxRetryDelay,maxRetryDelay,maxRetryDelay];class DefaultReconnectPolicy{constructor(c){this._retryDelays=c!==void 0?[...c]:DEFAULT_RETRY_DELAYS_IN_MS}nextRetryDelayInMs(c){if(c.retryCount>=this._retryDelays.length)return null;const b=this._retryDelays[c.retryCount];return c.retryCount<=1?b:b+Math.random()*1e3}}function __awaiter(a,c,b,_){function k(j){return j instanceof b?j:new b(function(_e){_e(j)})}return new(b||(b=Promise))(function(j,_e){function et(ft){try{it(_.next(ft))}catch(pt){_e(pt)}}function nt(ft){try{it(_.throw(ft))}catch(pt){_e(pt)}}function it(ft){ft.done?j(ft.value):k(ft.value).then(et,nt)}it((_=_.apply(a,c||[])).next())})}function __values(a){var c=typeof Symbol=="function"&&Symbol.iterator,b=c&&a[c],_=0;if(b)return b.call(a);if(a&&typeof a.length=="number")return{next:function(){return a&&_>=a.length&&(a=void 0),{value:a&&a[_++],done:!a}}};throw new TypeError(c?"Object is not iterable.":"Symbol.iterator is not defined.")}function __asyncValues(a){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var c=a[Symbol.asyncIterator],b;return c?c.call(a):(a=typeof __values=="function"?__values(a):a[Symbol.iterator](),b={},_("next"),_("throw"),_("return"),b[Symbol.asyncIterator]=function(){return this},b);function _(j){b[j]=a[j]&&function(_e){return new Promise(function(et,nt){_e=a[j](_e),k(et,nt,_e.done,_e.value)})}}function k(j,_e,et,nt){Promise.resolve(nt).then(function(it){j({value:it,done:et})},_e)}}typeof SuppressedError=="function"&&SuppressedError;var events={exports:{}},R$2=typeof Reflect=="object"?Reflect:null,ReflectApply=R$2&&typeof R$2.apply=="function"?R$2.apply:function a(c,b,_){return Function.prototype.apply.call(c,b,_)},ReflectOwnKeys;R$2&&typeof R$2.ownKeys=="function"?ReflectOwnKeys=R$2.ownKeys:Object.getOwnPropertySymbols?ReflectOwnKeys=function(c){return Object.getOwnPropertyNames(c).concat(Object.getOwnPropertySymbols(c))}:ReflectOwnKeys=function(c){return Object.getOwnPropertyNames(c)};function ProcessEmitWarning(a){console&&console.warn&&console.warn(a)}var NumberIsNaN=Number.isNaN||function a(c){return c!==c};function EventEmitter(){EventEmitter.init.call(this)}events.exports=EventEmitter;events.exports.once=once2;EventEmitter.EventEmitter=EventEmitter;EventEmitter.prototype._events=void 0;EventEmitter.prototype._eventsCount=0;EventEmitter.prototype._maxListeners=void 0;var defaultMaxListeners=10;function checkListener(a){if(typeof a!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof a)}Object.defineProperty(EventEmitter,"defaultMaxListeners",{enumerable:!0,get:function(){return defaultMaxListeners},set:function(a){if(typeof a!="number"||a<0||NumberIsNaN(a))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+a+".");defaultMaxListeners=a}});EventEmitter.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};EventEmitter.prototype.setMaxListeners=function a(c){if(typeof c!="number"||c<0||NumberIsNaN(c))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+c+".");return this._maxListeners=c,this};function _getMaxListeners(a){return a._maxListeners===void 0?EventEmitter.defaultMaxListeners:a._maxListeners}EventEmitter.prototype.getMaxListeners=function a(){return _getMaxListeners(this)};EventEmitter.prototype.emit=function a(c){for(var b=[],_=1;_<arguments.length;_++)b.push(arguments[_]);var k=c==="error",j=this._events;if(j!==void 0)k=k&&j.error===void 0;else if(!k)return!1;if(k){var _e;if(b.length>0&&(_e=b[0]),_e instanceof Error)throw _e;var et=new Error("Unhandled error."+(_e?" ("+_e.message+")":""));throw et.context=_e,et}var nt=j[c];if(nt===void 0)return!1;if(typeof nt=="function")ReflectApply(nt,this,b);else for(var it=nt.length,ft=arrayClone(nt,it),_=0;_<it;++_)ReflectApply(ft[_],this,b);return!0};function _addListener(a,c,b,_){var k,j,_e;if(checkListener(b),j=a._events,j===void 0?(j=a._events=Object.create(null),a._eventsCount=0):(j.newListener!==void 0&&(a.emit("newListener",c,b.listener?b.listener:b),j=a._events),_e=j[c]),_e===void 0)_e=j[c]=b,++a._eventsCount;else if(typeof _e=="function"?_e=j[c]=_?[b,_e]:[_e,b]:_?_e.unshift(b):_e.push(b),k=_getMaxListeners(a),k>0&&_e.length>k&&!_e.warned){_e.warned=!0;var et=new Error("Possible EventEmitter memory leak detected. "+_e.length+" "+String(c)+" listeners added. Use emitter.setMaxListeners() to increase limit");et.name="MaxListenersExceededWarning",et.emitter=a,et.type=c,et.count=_e.length,ProcessEmitWarning(et)}return a}EventEmitter.prototype.addListener=function a(c,b){return _addListener(this,c,b,!1)};EventEmitter.prototype.on=EventEmitter.prototype.addListener;EventEmitter.prototype.prependListener=function a(c,b){return _addListener(this,c,b,!0)};function onceWrapper(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function _onceWrap(a,c,b){var _={fired:!1,wrapFn:void 0,target:a,type:c,listener:b},k=onceWrapper.bind(_);return k.listener=b,_.wrapFn=k,k}EventEmitter.prototype.once=function a(c,b){return checkListener(b),this.on(c,_onceWrap(this,c,b)),this};EventEmitter.prototype.prependOnceListener=function a(c,b){return checkListener(b),this.prependListener(c,_onceWrap(this,c,b)),this};EventEmitter.prototype.removeListener=function a(c,b){var _,k,j,_e,et;if(checkListener(b),k=this._events,k===void 0)return this;if(_=k[c],_===void 0)return this;if(_===b||_.listener===b)--this._eventsCount===0?this._events=Object.create(null):(delete k[c],k.removeListener&&this.emit("removeListener",c,_.listener||b));else if(typeof _!="function"){for(j=-1,_e=_.length-1;_e>=0;_e--)if(_[_e]===b||_[_e].listener===b){et=_[_e].listener,j=_e;break}if(j<0)return this;j===0?_.shift():spliceOne(_,j),_.length===1&&(k[c]=_[0]),k.removeListener!==void 0&&this.emit("removeListener",c,et||b)}return this};EventEmitter.prototype.off=EventEmitter.prototype.removeListener;EventEmitter.prototype.removeAllListeners=function a(c){var b,_,k;if(_=this._events,_===void 0)return this;if(_.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):_[c]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete _[c]),this;if(arguments.length===0){var j=Object.keys(_),_e;for(k=0;k<j.length;++k)_e=j[k],_e!=="removeListener"&&this.removeAllListeners(_e);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(b=_[c],typeof b=="function")this.removeListener(c,b);else if(b!==void 0)for(k=b.length-1;k>=0;k--)this.removeListener(c,b[k]);return this};function _listeners(a,c,b){var _=a._events;if(_===void 0)return[];var k=_[c];return k===void 0?[]:typeof k=="function"?b?[k.listener||k]:[k]:b?unwrapListeners(k):arrayClone(k,k.length)}EventEmitter.prototype.listeners=function a(c){return _listeners(this,c,!0)};EventEmitter.prototype.rawListeners=function a(c){return _listeners(this,c,!1)};EventEmitter.listenerCount=function(a,c){return typeof a.listenerCount=="function"?a.listenerCount(c):listenerCount.call(a,c)};EventEmitter.prototype.listenerCount=listenerCount;function listenerCount(a){var c=this._events;if(c!==void 0){var b=c[a];if(typeof b=="function")return 1;if(b!==void 0)return b.length}return 0}EventEmitter.prototype.eventNames=function a(){return this._eventsCount>0?ReflectOwnKeys(this._events):[]};function arrayClone(a,c){for(var b=new Array(c),_=0;_<c;++_)b[_]=a[_];return b}function spliceOne(a,c){for(;c+1<a.length;c++)a[c]=a[c+1];a.pop()}function unwrapListeners(a){for(var c=new Array(a.length),b=0;b<c.length;++b)c[b]=a[b].listener||a[b];return c}function once2(a,c){return new Promise(function(b,_){function k(_e){a.removeListener(c,j),_(_e)}function j(){typeof a.removeListener=="function"&&a.removeListener("error",k),b([].slice.call(arguments))}eventTargetAgnosticAddListener(a,c,j,{once:!0}),c!=="error"&&addErrorHandlerIfEventEmitter(a,k,{once:!0})})}function addErrorHandlerIfEventEmitter(a,c,b){typeof a.on=="function"&&eventTargetAgnosticAddListener(a,"error",c,b)}function eventTargetAgnosticAddListener(a,c,b,_){if(typeof a.on=="function")_.once?a.once(c,b):a.on(c,b);else if(typeof a.addEventListener=="function")a.addEventListener(c,function k(j){_.once&&a.removeEventListener(c,k),b(j)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof a)}var eventsExports=events.exports;let logDisabled_=!0,deprecationWarnings_=!0;function extractVersion(a,c,b){const _=a.match(c);return _&&_.length>=b&&parseInt(_[b],10)}function wrapPeerConnectionEvent(a,c,b){if(!a.RTCPeerConnection)return;const _=a.RTCPeerConnection.prototype,k=_.addEventListener;_.addEventListener=function(_e,et){if(_e!==c)return k.apply(this,arguments);const nt=it=>{const ft=b(it);ft&&(et.handleEvent?et.handleEvent(ft):et(ft))};return this._eventMap=this._eventMap||{},this._eventMap[c]||(this._eventMap[c]=new Map),this._eventMap[c].set(et,nt),k.apply(this,[_e,nt])};const j=_.removeEventListener;_.removeEventListener=function(_e,et){if(_e!==c||!this._eventMap||!this._eventMap[c])return j.apply(this,arguments);if(!this._eventMap[c].has(et))return j.apply(this,arguments);const nt=this._eventMap[c].get(et);return this._eventMap[c].delete(et),this._eventMap[c].size===0&&delete this._eventMap[c],Object.keys(this._eventMap).length===0&&delete this._eventMap,j.apply(this,[_e,nt])},Object.defineProperty(_,"on"+c,{get(){return this["_on"+c]},set(_e){this["_on"+c]&&(this.removeEventListener(c,this["_on"+c]),delete this["_on"+c]),_e&&this.addEventListener(c,this["_on"+c]=_e)},enumerable:!0,configurable:!0})}function disableLog(a){return typeof a!="boolean"?new Error("Argument type: "+typeof a+". Please use a boolean."):(logDisabled_=a,a?"adapter.js logging disabled":"adapter.js logging enabled")}function disableWarnings(a){return typeof a!="boolean"?new Error("Argument type: "+typeof a+". Please use a boolean."):(deprecationWarnings_=!a,"adapter.js deprecation warnings "+(a?"disabled":"enabled"))}function log(){if(typeof window=="object"){if(logDisabled_)return;typeof console<"u"&&typeof console.log=="function"&&console.log.apply(console,arguments)}}function deprecated(a,c){deprecationWarnings_&&console.warn(a+" is deprecated, please use "+c+" instead.")}function detectBrowser(a){const c={browser:null,version:null};if(typeof a>"u"||!a.navigator||!a.navigator.userAgent)return c.browser="Not a browser.",c;const{navigator:b}=a;if(b.mozGetUserMedia)c.browser="firefox",c.version=extractVersion(b.userAgent,/Firefox\/(\d+)\./,1);else if(b.webkitGetUserMedia||a.isSecureContext===!1&&a.webkitRTCPeerConnection)c.browser="chrome",c.version=extractVersion(b.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else if(a.RTCPeerConnection&&b.userAgent.match(/AppleWebKit\/(\d+)\./))c.browser="safari",c.version=extractVersion(b.userAgent,/AppleWebKit\/(\d+)\./,1),c.supportsUnifiedPlan=a.RTCRtpTransceiver&&"currentDirection"in a.RTCRtpTransceiver.prototype;else return c.browser="Not a supported browser.",c;return c}function isObject(a){return Object.prototype.toString.call(a)==="[object Object]"}function compactObject(a){return isObject(a)?Object.keys(a).reduce(function(c,b){const _=isObject(a[b]),k=_?compactObject(a[b]):a[b],j=_&&!Object.keys(k).length;return k===void 0||j?c:Object.assign(c,{[b]:k})},{}):a}function walkStats(a,c,b){!c||b.has(c.id)||(b.set(c.id,c),Object.keys(c).forEach(_=>{_.endsWith("Id")?walkStats(a,a.get(c[_]),b):_.endsWith("Ids")&&c[_].forEach(k=>{walkStats(a,a.get(k),b)})}))}function filterStats(a,c,b){const _=b?"outbound-rtp":"inbound-rtp",k=new Map;if(c===null)return k;const j=[];return a.forEach(_e=>{_e.type==="track"&&_e.trackIdentifier===c.id&&j.push(_e)}),j.forEach(_e=>{a.forEach(et=>{et.type===_&&et.trackId===_e.id&&walkStats(a,et,k)})}),k}const logging=log;function shimGetUserMedia$2(a,c){const b=a&&a.navigator;if(!b.mediaDevices)return;const _=function(et){if(typeof et!="object"||et.mandatory||et.optional)return et;const nt={};return Object.keys(et).forEach(it=>{if(it==="require"||it==="advanced"||it==="mediaSource")return;const ft=typeof et[it]=="object"?et[it]:{ideal:et[it]};ft.exact!==void 0&&typeof ft.exact=="number"&&(ft.min=ft.max=ft.exact);const pt=function(mt,St){return mt?mt+St.charAt(0).toUpperCase()+St.slice(1):St==="deviceId"?"sourceId":St};if(ft.ideal!==void 0){nt.optional=nt.optional||[];let mt={};typeof ft.ideal=="number"?(mt[pt("min",it)]=ft.ideal,nt.optional.push(mt),mt={},mt[pt("max",it)]=ft.ideal,nt.optional.push(mt)):(mt[pt("",it)]=ft.ideal,nt.optional.push(mt))}ft.exact!==void 0&&typeof ft.exact!="number"?(nt.mandatory=nt.mandatory||{},nt.mandatory[pt("",it)]=ft.exact):["min","max"].forEach(mt=>{ft[mt]!==void 0&&(nt.mandatory=nt.mandatory||{},nt.mandatory[pt(mt,it)]=ft[mt])})}),et.advanced&&(nt.optional=(nt.optional||[]).concat(et.advanced)),nt},k=function(et,nt){if(c.version>=61)return nt(et);if(et=JSON.parse(JSON.stringify(et)),et&&typeof et.audio=="object"){const it=function(ft,pt,mt){pt in ft&&!(mt in ft)&&(ft[mt]=ft[pt],delete ft[pt])};et=JSON.parse(JSON.stringify(et)),it(et.audio,"autoGainControl","googAutoGainControl"),it(et.audio,"noiseSuppression","googNoiseSuppression"),et.audio=_(et.audio)}if(et&&typeof et.video=="object"){let it=et.video.facingMode;it=it&&(typeof it=="object"?it:{ideal:it});const ft=c.version<66;if(it&&(it.exact==="user"||it.exact==="environment"||it.ideal==="user"||it.ideal==="environment")&&!(b.mediaDevices.getSupportedConstraints&&b.mediaDevices.getSupportedConstraints().facingMode&&!ft)){delete et.video.facingMode;let pt;if(it.exact==="environment"||it.ideal==="environment"?pt=["back","rear"]:(it.exact==="user"||it.ideal==="user")&&(pt=["front"]),pt)return b.mediaDevices.enumerateDevices().then(mt=>{mt=mt.filter(yt=>yt.kind==="videoinput");let St=mt.find(yt=>pt.some(_t=>yt.label.toLowerCase().includes(_t)));return!St&&mt.length&&pt.includes("back")&&(St=mt[mt.length-1]),St&&(et.video.deviceId=it.exact?{exact:St.deviceId}:{ideal:St.deviceId}),et.video=_(et.video),logging("chrome: "+JSON.stringify(et)),nt(et)})}et.video=_(et.video)}return logging("chrome: "+JSON.stringify(et)),nt(et)},j=function(et){return c.version>=64?et:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[et.name]||et.name,message:et.message,constraint:et.constraint||et.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}},_e=function(et,nt,it){k(et,ft=>{b.webkitGetUserMedia(ft,nt,pt=>{it&&it(j(pt))})})};if(b.getUserMedia=_e.bind(b),b.mediaDevices.getUserMedia){const et=b.mediaDevices.getUserMedia.bind(b.mediaDevices);b.mediaDevices.getUserMedia=function(nt){return k(nt,it=>et(it).then(ft=>{if(it.audio&&!ft.getAudioTracks().length||it.video&&!ft.getVideoTracks().length)throw ft.getTracks().forEach(pt=>{pt.stop()}),new DOMException("","NotFoundError");return ft},ft=>Promise.reject(j(ft))))}}}function shimGetDisplayMedia$1(a,c){if(!(a.navigator.mediaDevices&&"getDisplayMedia"in a.navigator.mediaDevices)&&a.navigator.mediaDevices){if(typeof c!="function"){console.error("shimGetDisplayMedia: getSourceId argument is not a function");return}a.navigator.mediaDevices.getDisplayMedia=function(_){return c(_).then(k=>{const j=_.video&&_.video.width,_e=_.video&&_.video.height,et=_.video&&_.video.frameRate;return _.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:k,maxFrameRate:et||3}},j&&(_.video.mandatory.maxWidth=j),_e&&(_.video.mandatory.maxHeight=_e),a.navigator.mediaDevices.getUserMedia(_)})}}}function shimMediaStream(a){a.MediaStream=a.MediaStream||a.webkitMediaStream}function shimOnTrack$1(a){if(typeof a=="object"&&a.RTCPeerConnection&&!("ontrack"in a.RTCPeerConnection.prototype)){Object.defineProperty(a.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(b){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=b)},enumerable:!0,configurable:!0});const c=a.RTCPeerConnection.prototype.setRemoteDescription;a.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=_=>{_.stream.addEventListener("addtrack",k=>{let j;a.RTCPeerConnection.prototype.getReceivers?j=this.getReceivers().find(et=>et.track&&et.track.id===k.track.id):j={track:k.track};const _e=new Event("track");_e.track=k.track,_e.receiver=j,_e.transceiver={receiver:j},_e.streams=[_.stream],this.dispatchEvent(_e)}),_.stream.getTracks().forEach(k=>{let j;a.RTCPeerConnection.prototype.getReceivers?j=this.getReceivers().find(et=>et.track&&et.track.id===k.id):j={track:k};const _e=new Event("track");_e.track=k,_e.receiver=j,_e.transceiver={receiver:j},_e.streams=[_.stream],this.dispatchEvent(_e)})},this.addEventListener("addstream",this._ontrackpoly)),c.apply(this,arguments)}}else wrapPeerConnectionEvent(a,"track",c=>(c.transceiver||Object.defineProperty(c,"transceiver",{value:{receiver:c.receiver}}),c))}function shimGetSendersWithDtmf(a){if(typeof a=="object"&&a.RTCPeerConnection&&!("getSenders"in a.RTCPeerConnection.prototype)&&"createDTMFSender"in a.RTCPeerConnection.prototype){const c=function(k,j){return{track:j,get dtmf(){return this._dtmf===void 0&&(j.kind==="audio"?this._dtmf=k.createDTMFSender(j):this._dtmf=null),this._dtmf},_pc:k}};if(!a.RTCPeerConnection.prototype.getSenders){a.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const k=a.RTCPeerConnection.prototype.addTrack;a.RTCPeerConnection.prototype.addTrack=function(et,nt){let it=k.apply(this,arguments);return it||(it=c(this,et),this._senders.push(it)),it};const j=a.RTCPeerConnection.prototype.removeTrack;a.RTCPeerConnection.prototype.removeTrack=function(et){j.apply(this,arguments);const nt=this._senders.indexOf(et);nt!==-1&&this._senders.splice(nt,1)}}const b=a.RTCPeerConnection.prototype.addStream;a.RTCPeerConnection.prototype.addStream=function(j){this._senders=this._senders||[],b.apply(this,[j]),j.getTracks().forEach(_e=>{this._senders.push(c(this,_e))})};const _=a.RTCPeerConnection.prototype.removeStream;a.RTCPeerConnection.prototype.removeStream=function(j){this._senders=this._senders||[],_.apply(this,[j]),j.getTracks().forEach(_e=>{const et=this._senders.find(nt=>nt.track===_e);et&&this._senders.splice(this._senders.indexOf(et),1)})}}else if(typeof a=="object"&&a.RTCPeerConnection&&"getSenders"in a.RTCPeerConnection.prototype&&"createDTMFSender"in a.RTCPeerConnection.prototype&&a.RTCRtpSender&&!("dtmf"in a.RTCRtpSender.prototype)){const c=a.RTCPeerConnection.prototype.getSenders;a.RTCPeerConnection.prototype.getSenders=function(){const _=c.apply(this,[]);return _.forEach(k=>k._pc=this),_},Object.defineProperty(a.RTCRtpSender.prototype,"dtmf",{get(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function shimGetStats(a){if(!a.RTCPeerConnection)return;const c=a.RTCPeerConnection.prototype.getStats;a.RTCPeerConnection.prototype.getStats=function(){const[_,k,j]=arguments;if(arguments.length>0&&typeof _=="function")return c.apply(this,arguments);if(c.length===0&&(arguments.length===0||typeof _!="function"))return c.apply(this,[]);const _e=function(nt){const it={};return nt.result().forEach(pt=>{const mt={id:pt.id,timestamp:pt.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[pt.type]||pt.type};pt.names().forEach(St=>{mt[St]=pt.stat(St)}),it[mt.id]=mt}),it},et=function(nt){return new Map(Object.keys(nt).map(it=>[it,nt[it]]))};if(arguments.length>=2){const nt=function(it){k(et(_e(it)))};return c.apply(this,[nt,_])}return new Promise((nt,it)=>{c.apply(this,[function(ft){nt(et(_e(ft)))},it])}).then(k,j)}}function shimSenderReceiverGetStats(a){if(!(typeof a=="object"&&a.RTCPeerConnection&&a.RTCRtpSender&&a.RTCRtpReceiver))return;if(!("getStats"in a.RTCRtpSender.prototype)){const b=a.RTCPeerConnection.prototype.getSenders;b&&(a.RTCPeerConnection.prototype.getSenders=function(){const j=b.apply(this,[]);return j.forEach(_e=>_e._pc=this),j});const _=a.RTCPeerConnection.prototype.addTrack;_&&(a.RTCPeerConnection.prototype.addTrack=function(){const j=_.apply(this,arguments);return j._pc=this,j}),a.RTCRtpSender.prototype.getStats=function(){const j=this;return this._pc.getStats().then(_e=>filterStats(_e,j.track,!0))}}if(!("getStats"in a.RTCRtpReceiver.prototype)){const b=a.RTCPeerConnection.prototype.getReceivers;b&&(a.RTCPeerConnection.prototype.getReceivers=function(){const k=b.apply(this,[]);return k.forEach(j=>j._pc=this),k}),wrapPeerConnectionEvent(a,"track",_=>(_.receiver._pc=_.srcElement,_)),a.RTCRtpReceiver.prototype.getStats=function(){const k=this;return this._pc.getStats().then(j=>filterStats(j,k.track,!1))}}if(!("getStats"in a.RTCRtpSender.prototype&&"getStats"in a.RTCRtpReceiver.prototype))return;const c=a.RTCPeerConnection.prototype.getStats;a.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof a.MediaStreamTrack){const _=arguments[0];let k,j,_e;return this.getSenders().forEach(et=>{et.track===_&&(k?_e=!0:k=et)}),this.getReceivers().forEach(et=>(et.track===_&&(j?_e=!0:j=et),et.track===_)),_e||k&&j?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):k?k.getStats():j?j.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return c.apply(this,arguments)}}function shimAddTrackRemoveTrackWithNative(a){a.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(_e=>this._shimmedLocalStreams[_e][0])};const c=a.RTCPeerConnection.prototype.addTrack;a.RTCPeerConnection.prototype.addTrack=function(_e,et){if(!et)return c.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const nt=c.apply(this,arguments);return this._shimmedLocalStreams[et.id]?this._shimmedLocalStreams[et.id].indexOf(nt)===-1&&this._shimmedLocalStreams[et.id].push(nt):this._shimmedLocalStreams[et.id]=[et,nt],nt};const b=a.RTCPeerConnection.prototype.addStream;a.RTCPeerConnection.prototype.addStream=function(_e){this._shimmedLocalStreams=this._shimmedLocalStreams||{},_e.getTracks().forEach(it=>{if(this.getSenders().find(pt=>pt.track===it))throw new DOMException("Track already exists.","InvalidAccessError")});const et=this.getSenders();b.apply(this,arguments);const nt=this.getSenders().filter(it=>et.indexOf(it)===-1);this._shimmedLocalStreams[_e.id]=[_e].concat(nt)};const _=a.RTCPeerConnection.prototype.removeStream;a.RTCPeerConnection.prototype.removeStream=function(_e){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[_e.id],_.apply(this,arguments)};const k=a.RTCPeerConnection.prototype.removeTrack;a.RTCPeerConnection.prototype.removeTrack=function(_e){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},_e&&Object.keys(this._shimmedLocalStreams).forEach(et=>{const nt=this._shimmedLocalStreams[et].indexOf(_e);nt!==-1&&this._shimmedLocalStreams[et].splice(nt,1),this._shimmedLocalStreams[et].length===1&&delete this._shimmedLocalStreams[et]}),k.apply(this,arguments)}}function shimAddTrackRemoveTrack(a,c){if(!a.RTCPeerConnection)return;if(a.RTCPeerConnection.prototype.addTrack&&c.version>=65)return shimAddTrackRemoveTrackWithNative(a);const b=a.RTCPeerConnection.prototype.getLocalStreams;a.RTCPeerConnection.prototype.getLocalStreams=function(){const ft=b.apply(this);return this._reverseStreams=this._reverseStreams||{},ft.map(pt=>this._reverseStreams[pt.id])};const _=a.RTCPeerConnection.prototype.addStream;a.RTCPeerConnection.prototype.addStream=function(ft){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},ft.getTracks().forEach(pt=>{if(this.getSenders().find(St=>St.track===pt))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[ft.id]){const pt=new a.MediaStream(ft.getTracks());this._streams[ft.id]=pt,this._reverseStreams[pt.id]=ft,ft=pt}_.apply(this,[ft])};const k=a.RTCPeerConnection.prototype.removeStream;a.RTCPeerConnection.prototype.removeStream=function(ft){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},k.apply(this,[this._streams[ft.id]||ft]),delete this._reverseStreams[this._streams[ft.id]?this._streams[ft.id].id:ft.id],delete this._streams[ft.id]},a.RTCPeerConnection.prototype.addTrack=function(ft,pt){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const mt=[].slice.call(arguments,1);if(mt.length!==1||!mt[0].getTracks().find(_t=>_t===ft))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(_t=>_t.track===ft))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const yt=this._streams[pt.id];if(yt)yt.addTrack(ft),Promise.resolve().then(()=>{this.dispatchEvent(new Event("negotiationneeded"))});else{const _t=new a.MediaStream([ft]);this._streams[pt.id]=_t,this._reverseStreams[_t.id]=pt,this.addStream(_t)}return this.getSenders().find(_t=>_t.track===ft)};function j(it,ft){let pt=ft.sdp;return Object.keys(it._reverseStreams||[]).forEach(mt=>{const St=it._reverseStreams[mt],yt=it._streams[St.id];pt=pt.replace(new RegExp(yt.id,"g"),St.id)}),new RTCSessionDescription({type:ft.type,sdp:pt})}function _e(it,ft){let pt=ft.sdp;return Object.keys(it._reverseStreams||[]).forEach(mt=>{const St=it._reverseStreams[mt],yt=it._streams[St.id];pt=pt.replace(new RegExp(St.id,"g"),yt.id)}),new RTCSessionDescription({type:ft.type,sdp:pt})}["createOffer","createAnswer"].forEach(function(it){const ft=a.RTCPeerConnection.prototype[it],pt={[it](){const mt=arguments;return arguments.length&&typeof arguments[0]=="function"?ft.apply(this,[yt=>{const _t=j(this,yt);mt[0].apply(null,[_t])},yt=>{mt[1]&&mt[1].apply(null,yt)},arguments[2]]):ft.apply(this,arguments).then(yt=>j(this,yt))}};a.RTCPeerConnection.prototype[it]=pt[it]});const et=a.RTCPeerConnection.prototype.setLocalDescription;a.RTCPeerConnection.prototype.setLocalDescription=function(){return!arguments.length||!arguments[0].type?et.apply(this,arguments):(arguments[0]=_e(this,arguments[0]),et.apply(this,arguments))};const nt=Object.getOwnPropertyDescriptor(a.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(a.RTCPeerConnection.prototype,"localDescription",{get(){const it=nt.get.apply(this);return it.type===""?it:j(this,it)}}),a.RTCPeerConnection.prototype.removeTrack=function(ft){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!ft._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(!(ft._pc===this))throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{};let mt;Object.keys(this._streams).forEach(St=>{this._streams[St].getTracks().find(_t=>ft.track===_t)&&(mt=this._streams[St])}),mt&&(mt.getTracks().length===1?this.removeStream(this._reverseStreams[mt.id]):mt.removeTrack(ft.track),this.dispatchEvent(new Event("negotiationneeded")))}}function shimPeerConnection$1(a,c){!a.RTCPeerConnection&&a.webkitRTCPeerConnection&&(a.RTCPeerConnection=a.webkitRTCPeerConnection),a.RTCPeerConnection&&c.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(b){const _=a.RTCPeerConnection.prototype[b],k={[b](){return arguments[0]=new(b==="addIceCandidate"?a.RTCIceCandidate:a.RTCSessionDescription)(arguments[0]),_.apply(this,arguments)}};a.RTCPeerConnection.prototype[b]=k[b]})}function fixNegotiationNeeded(a,c){wrapPeerConnectionEvent(a,"negotiationneeded",b=>{const _=b.target;if(!((c.version<72||_.getConfiguration&&_.getConfiguration().sdpSemantics==="plan-b")&&_.signalingState!=="stable"))return b})}var chromeShim=Object.freeze({__proto__:null,fixNegotiationNeeded,shimAddTrackRemoveTrack,shimAddTrackRemoveTrackWithNative,shimGetDisplayMedia:shimGetDisplayMedia$1,shimGetSendersWithDtmf,shimGetStats,shimGetUserMedia:shimGetUserMedia$2,shimMediaStream,shimOnTrack:shimOnTrack$1,shimPeerConnection:shimPeerConnection$1,shimSenderReceiverGetStats});function shimGetUserMedia$1(a,c){const b=a&&a.navigator,_=a&&a.MediaStreamTrack;if(b.getUserMedia=function(k,j,_e){deprecated("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),b.mediaDevices.getUserMedia(k).then(j,_e)},!(c.version>55&&"autoGainControl"in b.mediaDevices.getSupportedConstraints())){const k=function(_e,et,nt){et in _e&&!(nt in _e)&&(_e[nt]=_e[et],delete _e[et])},j=b.mediaDevices.getUserMedia.bind(b.mediaDevices);if(b.mediaDevices.getUserMedia=function(_e){return typeof _e=="object"&&typeof _e.audio=="object"&&(_e=JSON.parse(JSON.stringify(_e)),k(_e.audio,"autoGainControl","mozAutoGainControl"),k(_e.audio,"noiseSuppression","mozNoiseSuppression")),j(_e)},_&&_.prototype.getSettings){const _e=_.prototype.getSettings;_.prototype.getSettings=function(){const et=_e.apply(this,arguments);return k(et,"mozAutoGainControl","autoGainControl"),k(et,"mozNoiseSuppression","noiseSuppression"),et}}if(_&&_.prototype.applyConstraints){const _e=_.prototype.applyConstraints;_.prototype.applyConstraints=function(et){return this.kind==="audio"&&typeof et=="object"&&(et=JSON.parse(JSON.stringify(et)),k(et,"autoGainControl","mozAutoGainControl"),k(et,"noiseSuppression","mozNoiseSuppression")),_e.apply(this,[et])}}}}function shimGetDisplayMedia(a,c){a.navigator.mediaDevices&&"getDisplayMedia"in a.navigator.mediaDevices||a.navigator.mediaDevices&&(a.navigator.mediaDevices.getDisplayMedia=function(_){if(!(_&&_.video)){const k=new DOMException("getDisplayMedia without video constraints is undefined");return k.name="NotFoundError",k.code=8,Promise.reject(k)}return _.video===!0?_.video={mediaSource:c}:_.video.mediaSource=c,a.navigator.mediaDevices.getUserMedia(_)})}function shimOnTrack(a){typeof a=="object"&&a.RTCTrackEvent&&"receiver"in a.RTCTrackEvent.prototype&&!("transceiver"in a.RTCTrackEvent.prototype)&&Object.defineProperty(a.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function shimPeerConnection(a,c){if(typeof a!="object"||!(a.RTCPeerConnection||a.mozRTCPeerConnection))return;!a.RTCPeerConnection&&a.mozRTCPeerConnection&&(a.RTCPeerConnection=a.mozRTCPeerConnection),c.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(k){const j=a.RTCPeerConnection.prototype[k],_e={[k](){return arguments[0]=new(k==="addIceCandidate"?a.RTCIceCandidate:a.RTCSessionDescription)(arguments[0]),j.apply(this,arguments)}};a.RTCPeerConnection.prototype[k]=_e[k]});const b={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},_=a.RTCPeerConnection.prototype.getStats;a.RTCPeerConnection.prototype.getStats=function(){const[j,_e,et]=arguments;return _.apply(this,[j||null]).then(nt=>{if(c.version<53&&!_e)try{nt.forEach(it=>{it.type=b[it.type]||it.type})}catch(it){if(it.name!=="TypeError")throw it;nt.forEach((ft,pt)=>{nt.set(pt,Object.assign({},ft,{type:b[ft.type]||ft.type}))})}return nt}).then(_e,et)}}function shimSenderGetStats(a){if(!(typeof a=="object"&&a.RTCPeerConnection&&a.RTCRtpSender)||a.RTCRtpSender&&"getStats"in a.RTCRtpSender.prototype)return;const c=a.RTCPeerConnection.prototype.getSenders;c&&(a.RTCPeerConnection.prototype.getSenders=function(){const k=c.apply(this,[]);return k.forEach(j=>j._pc=this),k});const b=a.RTCPeerConnection.prototype.addTrack;b&&(a.RTCPeerConnection.prototype.addTrack=function(){const k=b.apply(this,arguments);return k._pc=this,k}),a.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function shimReceiverGetStats(a){if(!(typeof a=="object"&&a.RTCPeerConnection&&a.RTCRtpSender)||a.RTCRtpSender&&"getStats"in a.RTCRtpReceiver.prototype)return;const c=a.RTCPeerConnection.prototype.getReceivers;c&&(a.RTCPeerConnection.prototype.getReceivers=function(){const _=c.apply(this,[]);return _.forEach(k=>k._pc=this),_}),wrapPeerConnectionEvent(a,"track",b=>(b.receiver._pc=b.srcElement,b)),a.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function shimRemoveStream(a){!a.RTCPeerConnection||"removeStream"in a.RTCPeerConnection.prototype||(a.RTCPeerConnection.prototype.removeStream=function(b){deprecated("removeStream","removeTrack"),this.getSenders().forEach(_=>{_.track&&b.getTracks().includes(_.track)&&this.removeTrack(_)})})}function shimRTCDataChannel(a){a.DataChannel&&!a.RTCDataChannel&&(a.RTCDataChannel=a.DataChannel)}function shimAddTransceiver(a){if(!(typeof a=="object"&&a.RTCPeerConnection))return;const c=a.RTCPeerConnection.prototype.addTransceiver;c&&(a.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];let _=arguments[1]&&arguments[1].sendEncodings;_===void 0&&(_=[]),_=[..._];const k=_.length>0;k&&_.forEach(_e=>{if("rid"in _e&&!/^[a-z0-9]{0,16}$/i.test(_e.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in _e&&!(parseFloat(_e.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in _e&&!(parseFloat(_e.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});const j=c.apply(this,arguments);if(k){const{sender:_e}=j,et=_e.getParameters();(!("encodings"in et)||et.encodings.length===1&&Object.keys(et.encodings[0]).length===0)&&(et.encodings=_,_e.sendEncodings=_,this.setParametersPromises.push(_e.setParameters(et).then(()=>{delete _e.sendEncodings}).catch(()=>{delete _e.sendEncodings})))}return j})}function shimGetParameters(a){if(!(typeof a=="object"&&a.RTCRtpSender))return;const c=a.RTCRtpSender.prototype.getParameters;c&&(a.RTCRtpSender.prototype.getParameters=function(){const _=c.apply(this,arguments);return"encodings"in _||(_.encodings=[].concat(this.sendEncodings||[{}])),_})}function shimCreateOffer(a){if(!(typeof a=="object"&&a.RTCPeerConnection))return;const c=a.RTCPeerConnection.prototype.createOffer;a.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>c.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):c.apply(this,arguments)}}function shimCreateAnswer(a){if(!(typeof a=="object"&&a.RTCPeerConnection))return;const c=a.RTCPeerConnection.prototype.createAnswer;a.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>c.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):c.apply(this,arguments)}}var firefoxShim=Object.freeze({__proto__:null,shimAddTransceiver,shimCreateAnswer,shimCreateOffer,shimGetDisplayMedia,shimGetParameters,shimGetUserMedia:shimGetUserMedia$1,shimOnTrack,shimPeerConnection,shimRTCDataChannel,shimReceiverGetStats,shimRemoveStream,shimSenderGetStats});function shimLocalStreamsAPI(a){if(!(typeof a!="object"||!a.RTCPeerConnection)){if("getLocalStreams"in a.RTCPeerConnection.prototype||(a.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in a.RTCPeerConnection.prototype)){const c=a.RTCPeerConnection.prototype.addTrack;a.RTCPeerConnection.prototype.addStream=function(_){this._localStreams||(this._localStreams=[]),this._localStreams.includes(_)||this._localStreams.push(_),_.getAudioTracks().forEach(k=>c.call(this,k,_)),_.getVideoTracks().forEach(k=>c.call(this,k,_))},a.RTCPeerConnection.prototype.addTrack=function(_){for(var k=arguments.length,j=new Array(k>1?k-1:0),_e=1;_e<k;_e++)j[_e-1]=arguments[_e];return j&&j.forEach(et=>{this._localStreams?this._localStreams.includes(et)||this._localStreams.push(et):this._localStreams=[et]}),c.apply(this,arguments)}}"removeStream"in a.RTCPeerConnection.prototype||(a.RTCPeerConnection.prototype.removeStream=function(b){this._localStreams||(this._localStreams=[]);const _=this._localStreams.indexOf(b);if(_===-1)return;this._localStreams.splice(_,1);const k=b.getTracks();this.getSenders().forEach(j=>{k.includes(j.track)&&this.removeTrack(j)})})}}function shimRemoteStreamsAPI(a){if(!(typeof a!="object"||!a.RTCPeerConnection)&&("getRemoteStreams"in a.RTCPeerConnection.prototype||(a.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in a.RTCPeerConnection.prototype))){Object.defineProperty(a.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(b){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=b),this.addEventListener("track",this._onaddstreampoly=_=>{_.streams.forEach(k=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(k))return;this._remoteStreams.push(k);const j=new Event("addstream");j.stream=k,this.dispatchEvent(j)})})}});const c=a.RTCPeerConnection.prototype.setRemoteDescription;a.RTCPeerConnection.prototype.setRemoteDescription=function(){const _=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(k){k.streams.forEach(j=>{if(_._remoteStreams||(_._remoteStreams=[]),_._remoteStreams.indexOf(j)>=0)return;_._remoteStreams.push(j);const _e=new Event("addstream");_e.stream=j,_.dispatchEvent(_e)})}),c.apply(_,arguments)}}}function shimCallbacksAPI(a){if(typeof a!="object"||!a.RTCPeerConnection)return;const c=a.RTCPeerConnection.prototype,b=c.createOffer,_=c.createAnswer,k=c.setLocalDescription,j=c.setRemoteDescription,_e=c.addIceCandidate;c.createOffer=function(it,ft){const pt=arguments.length>=2?arguments[2]:arguments[0],mt=b.apply(this,[pt]);return ft?(mt.then(it,ft),Promise.resolve()):mt},c.createAnswer=function(it,ft){const pt=arguments.length>=2?arguments[2]:arguments[0],mt=_.apply(this,[pt]);return ft?(mt.then(it,ft),Promise.resolve()):mt};let et=function(nt,it,ft){const pt=k.apply(this,[nt]);return ft?(pt.then(it,ft),Promise.resolve()):pt};c.setLocalDescription=et,et=function(nt,it,ft){const pt=j.apply(this,[nt]);return ft?(pt.then(it,ft),Promise.resolve()):pt},c.setRemoteDescription=et,et=function(nt,it,ft){const pt=_e.apply(this,[nt]);return ft?(pt.then(it,ft),Promise.resolve()):pt},c.addIceCandidate=et}function shimGetUserMedia(a){const c=a&&a.navigator;if(c.mediaDevices&&c.mediaDevices.getUserMedia){const b=c.mediaDevices,_=b.getUserMedia.bind(b);c.mediaDevices.getUserMedia=k=>_(shimConstraints(k))}!c.getUserMedia&&c.mediaDevices&&c.mediaDevices.getUserMedia&&(c.getUserMedia=(function(_,k,j){c.mediaDevices.getUserMedia(_).then(k,j)}).bind(c))}function shimConstraints(a){return a&&a.video!==void 0?Object.assign({},a,{video:compactObject(a.video)}):a}function shimRTCIceServerUrls(a){if(!a.RTCPeerConnection)return;const c=a.RTCPeerConnection;a.RTCPeerConnection=function(_,k){if(_&&_.iceServers){const j=[];for(let _e=0;_e<_.iceServers.length;_e++){let et=_.iceServers[_e];et.urls===void 0&&et.url?(deprecated("RTCIceServer.url","RTCIceServer.urls"),et=JSON.parse(JSON.stringify(et)),et.urls=et.url,delete et.url,j.push(et)):j.push(_.iceServers[_e])}_.iceServers=j}return new c(_,k)},a.RTCPeerConnection.prototype=c.prototype,"generateCertificate"in c&&Object.defineProperty(a.RTCPeerConnection,"generateCertificate",{get(){return c.generateCertificate}})}function shimTrackEventTransceiver(a){typeof a=="object"&&a.RTCTrackEvent&&"receiver"in a.RTCTrackEvent.prototype&&!("transceiver"in a.RTCTrackEvent.prototype)&&Object.defineProperty(a.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function shimCreateOfferLegacy(a){const c=a.RTCPeerConnection.prototype.createOffer;a.RTCPeerConnection.prototype.createOffer=function(_){if(_){typeof _.offerToReceiveAudio<"u"&&(_.offerToReceiveAudio=!!_.offerToReceiveAudio);const k=this.getTransceivers().find(_e=>_e.receiver.track.kind==="audio");_.offerToReceiveAudio===!1&&k?k.direction==="sendrecv"?k.setDirection?k.setDirection("sendonly"):k.direction="sendonly":k.direction==="recvonly"&&(k.setDirection?k.setDirection("inactive"):k.direction="inactive"):_.offerToReceiveAudio===!0&&!k&&this.addTransceiver("audio",{direction:"recvonly"}),typeof _.offerToReceiveVideo<"u"&&(_.offerToReceiveVideo=!!_.offerToReceiveVideo);const j=this.getTransceivers().find(_e=>_e.receiver.track.kind==="video");_.offerToReceiveVideo===!1&&j?j.direction==="sendrecv"?j.setDirection?j.setDirection("sendonly"):j.direction="sendonly":j.direction==="recvonly"&&(j.setDirection?j.setDirection("inactive"):j.direction="inactive"):_.offerToReceiveVideo===!0&&!j&&this.addTransceiver("video",{direction:"recvonly"})}return c.apply(this,arguments)}}function shimAudioContext(a){typeof a!="object"||a.AudioContext||(a.AudioContext=a.webkitAudioContext)}var safariShim=Object.freeze({__proto__:null,shimAudioContext,shimCallbacksAPI,shimConstraints,shimCreateOfferLegacy,shimGetUserMedia,shimLocalStreamsAPI,shimRTCIceServerUrls,shimRemoteStreamsAPI,shimTrackEventTransceiver}),sdp$1={exports:{}};(function(a){const c={};c.generateIdentifier=function(){return Math.random().toString(36).substring(2,12)},c.localCName=c.generateIdentifier(),c.splitLines=function(b){return b.trim().split(`
`).map(_=>_.trim())},c.splitSections=function(b){return b.split(`
m=`).map((k,j)=>(j>0?"m="+k:k).trim()+`\r
`)},c.getDescription=function(b){const _=c.splitSections(b);return _&&_[0]},c.getMediaSections=function(b){const _=c.splitSections(b);return _.shift(),_},c.matchPrefix=function(b,_){return c.splitLines(b).filter(k=>k.indexOf(_)===0)},c.parseCandidate=function(b){let _;b.indexOf("a=candidate:")===0?_=b.substring(12).split(" "):_=b.substring(10).split(" ");const k={foundation:_[0],component:{1:"rtp",2:"rtcp"}[_[1]]||_[1],protocol:_[2].toLowerCase(),priority:parseInt(_[3],10),ip:_[4],address:_[4],port:parseInt(_[5],10),type:_[7]};for(let j=8;j<_.length;j+=2)switch(_[j]){case"raddr":k.relatedAddress=_[j+1];break;case"rport":k.relatedPort=parseInt(_[j+1],10);break;case"tcptype":k.tcpType=_[j+1];break;case"ufrag":k.ufrag=_[j+1],k.usernameFragment=_[j+1];break;default:k[_[j]]===void 0&&(k[_[j]]=_[j+1]);break}return k},c.writeCandidate=function(b){const _=[];_.push(b.foundation);const k=b.component;k==="rtp"?_.push(1):k==="rtcp"?_.push(2):_.push(k),_.push(b.protocol.toUpperCase()),_.push(b.priority),_.push(b.address||b.ip),_.push(b.port);const j=b.type;return _.push("typ"),_.push(j),j!=="host"&&b.relatedAddress&&b.relatedPort&&(_.push("raddr"),_.push(b.relatedAddress),_.push("rport"),_.push(b.relatedPort)),b.tcpType&&b.protocol.toLowerCase()==="tcp"&&(_.push("tcptype"),_.push(b.tcpType)),(b.usernameFragment||b.ufrag)&&(_.push("ufrag"),_.push(b.usernameFragment||b.ufrag)),"candidate:"+_.join(" ")},c.parseIceOptions=function(b){return b.substring(14).split(" ")},c.parseRtpMap=function(b){let _=b.substring(9).split(" ");const k={payloadType:parseInt(_.shift(),10)};return _=_[0].split("/"),k.name=_[0],k.clockRate=parseInt(_[1],10),k.channels=_.length===3?parseInt(_[2],10):1,k.numChannels=k.channels,k},c.writeRtpMap=function(b){let _=b.payloadType;b.preferredPayloadType!==void 0&&(_=b.preferredPayloadType);const k=b.channels||b.numChannels||1;return"a=rtpmap:"+_+" "+b.name+"/"+b.clockRate+(k!==1?"/"+k:"")+`\r
`},c.parseExtmap=function(b){const _=b.substring(9).split(" ");return{id:parseInt(_[0],10),direction:_[0].indexOf("/")>0?_[0].split("/")[1]:"sendrecv",uri:_[1],attributes:_.slice(2).join(" ")}},c.writeExtmap=function(b){return"a=extmap:"+(b.id||b.preferredId)+(b.direction&&b.direction!=="sendrecv"?"/"+b.direction:"")+" "+b.uri+(b.attributes?" "+b.attributes:"")+`\r
`},c.parseFmtp=function(b){const _={};let k;const j=b.substring(b.indexOf(" ")+1).split(";");for(let _e=0;_e<j.length;_e++)k=j[_e].trim().split("="),_[k[0].trim()]=k[1];return _},c.writeFmtp=function(b){let _="",k=b.payloadType;if(b.preferredPayloadType!==void 0&&(k=b.preferredPayloadType),b.parameters&&Object.keys(b.parameters).length){const j=[];Object.keys(b.parameters).forEach(_e=>{b.parameters[_e]!==void 0?j.push(_e+"="+b.parameters[_e]):j.push(_e)}),_+="a=fmtp:"+k+" "+j.join(";")+`\r
`}return _},c.parseRtcpFb=function(b){const _=b.substring(b.indexOf(" ")+1).split(" ");return{type:_.shift(),parameter:_.join(" ")}},c.writeRtcpFb=function(b){let _="",k=b.payloadType;return b.preferredPayloadType!==void 0&&(k=b.preferredPayloadType),b.rtcpFeedback&&b.rtcpFeedback.length&&b.rtcpFeedback.forEach(j=>{_+="a=rtcp-fb:"+k+" "+j.type+(j.parameter&&j.parameter.length?" "+j.parameter:"")+`\r
`}),_},c.parseSsrcMedia=function(b){const _=b.indexOf(" "),k={ssrc:parseInt(b.substring(7,_),10)},j=b.indexOf(":",_);return j>-1?(k.attribute=b.substring(_+1,j),k.value=b.substring(j+1)):k.attribute=b.substring(_+1),k},c.parseSsrcGroup=function(b){const _=b.substring(13).split(" ");return{semantics:_.shift(),ssrcs:_.map(k=>parseInt(k,10))}},c.getMid=function(b){const _=c.matchPrefix(b,"a=mid:")[0];if(_)return _.substring(6)},c.parseFingerprint=function(b){const _=b.substring(14).split(" ");return{algorithm:_[0].toLowerCase(),value:_[1].toUpperCase()}},c.getDtlsParameters=function(b,_){return{role:"auto",fingerprints:c.matchPrefix(b+_,"a=fingerprint:").map(c.parseFingerprint)}},c.writeDtlsParameters=function(b,_){let k="a=setup:"+_+`\r
`;return b.fingerprints.forEach(j=>{k+="a=fingerprint:"+j.algorithm+" "+j.value+`\r
`}),k},c.parseCryptoLine=function(b){const _=b.substring(9).split(" ");return{tag:parseInt(_[0],10),cryptoSuite:_[1],keyParams:_[2],sessionParams:_.slice(3)}},c.writeCryptoLine=function(b){return"a=crypto:"+b.tag+" "+b.cryptoSuite+" "+(typeof b.keyParams=="object"?c.writeCryptoKeyParams(b.keyParams):b.keyParams)+(b.sessionParams?" "+b.sessionParams.join(" "):"")+`\r
`},c.parseCryptoKeyParams=function(b){if(b.indexOf("inline:")!==0)return null;const _=b.substring(7).split("|");return{keyMethod:"inline",keySalt:_[0],lifeTime:_[1],mkiValue:_[2]?_[2].split(":")[0]:void 0,mkiLength:_[2]?_[2].split(":")[1]:void 0}},c.writeCryptoKeyParams=function(b){return b.keyMethod+":"+b.keySalt+(b.lifeTime?"|"+b.lifeTime:"")+(b.mkiValue&&b.mkiLength?"|"+b.mkiValue+":"+b.mkiLength:"")},c.getCryptoParameters=function(b,_){return c.matchPrefix(b+_,"a=crypto:").map(c.parseCryptoLine)},c.getIceParameters=function(b,_){const k=c.matchPrefix(b+_,"a=ice-ufrag:")[0],j=c.matchPrefix(b+_,"a=ice-pwd:")[0];return k&&j?{usernameFragment:k.substring(12),password:j.substring(10)}:null},c.writeIceParameters=function(b){let _="a=ice-ufrag:"+b.usernameFragment+`\r
a=ice-pwd:`+b.password+`\r
`;return b.iceLite&&(_+=`a=ice-lite\r
`),_},c.parseRtpParameters=function(b){const _={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},j=c.splitLines(b)[0].split(" ");_.profile=j[2];for(let et=3;et<j.length;et++){const nt=j[et],it=c.matchPrefix(b,"a=rtpmap:"+nt+" ")[0];if(it){const ft=c.parseRtpMap(it),pt=c.matchPrefix(b,"a=fmtp:"+nt+" ");switch(ft.parameters=pt.length?c.parseFmtp(pt[0]):{},ft.rtcpFeedback=c.matchPrefix(b,"a=rtcp-fb:"+nt+" ").map(c.parseRtcpFb),_.codecs.push(ft),ft.name.toUpperCase()){case"RED":case"ULPFEC":_.fecMechanisms.push(ft.name.toUpperCase());break}}}c.matchPrefix(b,"a=extmap:").forEach(et=>{_.headerExtensions.push(c.parseExtmap(et))});const _e=c.matchPrefix(b,"a=rtcp-fb:* ").map(c.parseRtcpFb);return _.codecs.forEach(et=>{_e.forEach(nt=>{et.rtcpFeedback.find(ft=>ft.type===nt.type&&ft.parameter===nt.parameter)||et.rtcpFeedback.push(nt)})}),_},c.writeRtpDescription=function(b,_){let k="";k+="m="+b+" ",k+=_.codecs.length>0?"9":"0",k+=" "+(_.profile||"UDP/TLS/RTP/SAVPF")+" ",k+=_.codecs.map(_e=>_e.preferredPayloadType!==void 0?_e.preferredPayloadType:_e.payloadType).join(" ")+`\r
`,k+=`c=IN IP4 0.0.0.0\r
`,k+=`a=rtcp:9 IN IP4 0.0.0.0\r
`,_.codecs.forEach(_e=>{k+=c.writeRtpMap(_e),k+=c.writeFmtp(_e),k+=c.writeRtcpFb(_e)});let j=0;return _.codecs.forEach(_e=>{_e.maxptime>j&&(j=_e.maxptime)}),j>0&&(k+="a=maxptime:"+j+`\r
`),_.headerExtensions&&_.headerExtensions.forEach(_e=>{k+=c.writeExtmap(_e)}),k},c.parseRtpEncodingParameters=function(b){const _=[],k=c.parseRtpParameters(b),j=k.fecMechanisms.indexOf("RED")!==-1,_e=k.fecMechanisms.indexOf("ULPFEC")!==-1,et=c.matchPrefix(b,"a=ssrc:").map(mt=>c.parseSsrcMedia(mt)).filter(mt=>mt.attribute==="cname"),nt=et.length>0&&et[0].ssrc;let it;const ft=c.matchPrefix(b,"a=ssrc-group:FID").map(mt=>mt.substring(17).split(" ").map(yt=>parseInt(yt,10)));ft.length>0&&ft[0].length>1&&ft[0][0]===nt&&(it=ft[0][1]),k.codecs.forEach(mt=>{if(mt.name.toUpperCase()==="RTX"&&mt.parameters.apt){let St={ssrc:nt,codecPayloadType:parseInt(mt.parameters.apt,10)};nt&&it&&(St.rtx={ssrc:it}),_.push(St),j&&(St=JSON.parse(JSON.stringify(St)),St.fec={ssrc:nt,mechanism:_e?"red+ulpfec":"red"},_.push(St))}}),_.length===0&&nt&&_.push({ssrc:nt});let pt=c.matchPrefix(b,"b=");return pt.length&&(pt[0].indexOf("b=TIAS:")===0?pt=parseInt(pt[0].substring(7),10):pt[0].indexOf("b=AS:")===0?pt=parseInt(pt[0].substring(5),10)*1e3*.95-50*40*8:pt=void 0,_.forEach(mt=>{mt.maxBitrate=pt})),_},c.parseRtcpParameters=function(b){const _={},k=c.matchPrefix(b,"a=ssrc:").map(et=>c.parseSsrcMedia(et)).filter(et=>et.attribute==="cname")[0];k&&(_.cname=k.value,_.ssrc=k.ssrc);const j=c.matchPrefix(b,"a=rtcp-rsize");_.reducedSize=j.length>0,_.compound=j.length===0;const _e=c.matchPrefix(b,"a=rtcp-mux");return _.mux=_e.length>0,_},c.writeRtcpParameters=function(b){let _="";return b.reducedSize&&(_+=`a=rtcp-rsize\r
`),b.mux&&(_+=`a=rtcp-mux\r
`),b.ssrc!==void 0&&b.cname&&(_+="a=ssrc:"+b.ssrc+" cname:"+b.cname+`\r
`),_},c.parseMsid=function(b){let _;const k=c.matchPrefix(b,"a=msid:");if(k.length===1)return _=k[0].substring(7).split(" "),{stream:_[0],track:_[1]};const j=c.matchPrefix(b,"a=ssrc:").map(_e=>c.parseSsrcMedia(_e)).filter(_e=>_e.attribute==="msid");if(j.length>0)return _=j[0].value.split(" "),{stream:_[0],track:_[1]}},c.parseSctpDescription=function(b){const _=c.parseMLine(b),k=c.matchPrefix(b,"a=max-message-size:");let j;k.length>0&&(j=parseInt(k[0].substring(19),10)),isNaN(j)&&(j=65536);const _e=c.matchPrefix(b,"a=sctp-port:");if(_e.length>0)return{port:parseInt(_e[0].substring(12),10),protocol:_.fmt,maxMessageSize:j};const et=c.matchPrefix(b,"a=sctpmap:");if(et.length>0){const nt=et[0].substring(10).split(" ");return{port:parseInt(nt[0],10),protocol:nt[1],maxMessageSize:j}}},c.writeSctpDescription=function(b,_){let k=[];return b.protocol!=="DTLS/SCTP"?k=["m="+b.kind+" 9 "+b.protocol+" "+_.protocol+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctp-port:"+_.port+`\r
`]:k=["m="+b.kind+" 9 "+b.protocol+" "+_.port+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctpmap:"+_.port+" "+_.protocol+` 65535\r
`],_.maxMessageSize!==void 0&&k.push("a=max-message-size:"+_.maxMessageSize+`\r
`),k.join("")},c.generateSessionId=function(){return Math.random().toString().substr(2,22)},c.writeSessionBoilerplate=function(b,_,k){let j;const _e=_!==void 0?_:2;return b?j=b:j=c.generateSessionId(),`v=0\r
o=`+(k||"thisisadapterortc")+" "+j+" "+_e+` IN IP4 127.0.0.1\r
s=-\r
t=0 0\r
`},c.getDirection=function(b,_){const k=c.splitLines(b);for(let j=0;j<k.length;j++)switch(k[j]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return k[j].substring(2)}return _?c.getDirection(_):"sendrecv"},c.getKind=function(b){return c.splitLines(b)[0].split(" ")[0].substring(2)},c.isRejected=function(b){return b.split(" ",2)[1]==="0"},c.parseMLine=function(b){const k=c.splitLines(b)[0].substring(2).split(" ");return{kind:k[0],port:parseInt(k[1],10),protocol:k[2],fmt:k.slice(3).join(" ")}},c.parseOLine=function(b){const k=c.matchPrefix(b,"o=")[0].substring(2).split(" ");return{username:k[0],sessionId:k[1],sessionVersion:parseInt(k[2],10),netType:k[3],addressType:k[4],address:k[5]}},c.isValidSDP=function(b){if(typeof b!="string"||b.length===0)return!1;const _=c.splitLines(b);for(let k=0;k<_.length;k++)if(_[k].length<2||_[k].charAt(1)!=="=")return!1;return!0},a.exports=c})(sdp$1);var sdpExports=sdp$1.exports,SDPUtils=getDefaultExportFromCjs(sdpExports),sdp=_mergeNamespaces({__proto__:null,default:SDPUtils},[sdpExports]);function shimRTCIceCandidate(a){if(!a.RTCIceCandidate||a.RTCIceCandidate&&"foundation"in a.RTCIceCandidate.prototype)return;const c=a.RTCIceCandidate;a.RTCIceCandidate=function(_){if(typeof _=="object"&&_.candidate&&_.candidate.indexOf("a=")===0&&(_=JSON.parse(JSON.stringify(_)),_.candidate=_.candidate.substring(2)),_.candidate&&_.candidate.length){const k=new c(_),j=SDPUtils.parseCandidate(_.candidate);for(const _e in j)_e in k||Object.defineProperty(k,_e,{value:j[_e]});return k.toJSON=function(){return{candidate:k.candidate,sdpMid:k.sdpMid,sdpMLineIndex:k.sdpMLineIndex,usernameFragment:k.usernameFragment}},k}return new c(_)},a.RTCIceCandidate.prototype=c.prototype,wrapPeerConnectionEvent(a,"icecandidate",b=>(b.candidate&&Object.defineProperty(b,"candidate",{value:new a.RTCIceCandidate(b.candidate),writable:"false"}),b))}function shimRTCIceCandidateRelayProtocol(a){!a.RTCIceCandidate||a.RTCIceCandidate&&"relayProtocol"in a.RTCIceCandidate.prototype||wrapPeerConnectionEvent(a,"icecandidate",c=>{if(c.candidate){const b=SDPUtils.parseCandidate(c.candidate.candidate);b.type==="relay"&&(c.candidate.relayProtocol={0:"tls",1:"tcp",2:"udp"}[b.priority>>24])}return c})}function shimMaxMessageSize(a,c){if(!a.RTCPeerConnection)return;"sctp"in a.RTCPeerConnection.prototype||Object.defineProperty(a.RTCPeerConnection.prototype,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp}});const b=function(et){if(!et||!et.sdp)return!1;const nt=SDPUtils.splitSections(et.sdp);return nt.shift(),nt.some(it=>{const ft=SDPUtils.parseMLine(it);return ft&&ft.kind==="application"&&ft.protocol.indexOf("SCTP")!==-1})},_=function(et){const nt=et.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(nt===null||nt.length<2)return-1;const it=parseInt(nt[1],10);return it!==it?-1:it},k=function(et){let nt=65536;return c.browser==="firefox"&&(c.version<57?et===-1?nt=16384:nt=2147483637:c.version<60?nt=c.version===57?65535:65536:nt=2147483637),nt},j=function(et,nt){let it=65536;c.browser==="firefox"&&c.version===57&&(it=65535);const ft=SDPUtils.matchPrefix(et.sdp,"a=max-message-size:");return ft.length>0?it=parseInt(ft[0].substring(19),10):c.browser==="firefox"&&nt!==-1&&(it=2147483637),it},_e=a.RTCPeerConnection.prototype.setRemoteDescription;a.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,c.browser==="chrome"&&c.version>=76){const{sdpSemantics:nt}=this.getConfiguration();nt==="plan-b"&&Object.defineProperty(this,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp},enumerable:!0,configurable:!0})}if(b(arguments[0])){const nt=_(arguments[0]),it=k(nt),ft=j(arguments[0],nt);let pt;it===0&&ft===0?pt=Number.POSITIVE_INFINITY:it===0||ft===0?pt=Math.max(it,ft):pt=Math.min(it,ft);const mt={};Object.defineProperty(mt,"maxMessageSize",{get(){return pt}}),this._sctp=mt}return _e.apply(this,arguments)}}function shimSendThrowTypeError(a){if(!(a.RTCPeerConnection&&"createDataChannel"in a.RTCPeerConnection.prototype))return;function c(_,k){const j=_.send;_.send=function(){const et=arguments[0],nt=et.length||et.size||et.byteLength;if(_.readyState==="open"&&k.sctp&&nt>k.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+k.sctp.maxMessageSize+" bytes)");return j.apply(_,arguments)}}const b=a.RTCPeerConnection.prototype.createDataChannel;a.RTCPeerConnection.prototype.createDataChannel=function(){const k=b.apply(this,arguments);return c(k,this),k},wrapPeerConnectionEvent(a,"datachannel",_=>(c(_.channel,_.target),_))}function shimConnectionState(a){if(!a.RTCPeerConnection||"connectionState"in a.RTCPeerConnection.prototype)return;const c=a.RTCPeerConnection.prototype;Object.defineProperty(c,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(c,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(b){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),b&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=b)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(b=>{const _=c[b];c[b]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=k=>{const j=k.target;if(j._lastConnectionState!==j.connectionState){j._lastConnectionState=j.connectionState;const _e=new Event("connectionstatechange",k);j.dispatchEvent(_e)}return k},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),_.apply(this,arguments)}})}function removeExtmapAllowMixed(a,c){if(!a.RTCPeerConnection||c.browser==="chrome"&&c.version>=71||c.browser==="safari"&&c.version>=605)return;const b=a.RTCPeerConnection.prototype.setRemoteDescription;a.RTCPeerConnection.prototype.setRemoteDescription=function(k){if(k&&k.sdp&&k.sdp.indexOf(`
a=extmap-allow-mixed`)!==-1){const j=k.sdp.split(`
`).filter(_e=>_e.trim()!=="a=extmap-allow-mixed").join(`
`);a.RTCSessionDescription&&k instanceof a.RTCSessionDescription?arguments[0]=new a.RTCSessionDescription({type:k.type,sdp:j}):k.sdp=j}return b.apply(this,arguments)}}function shimAddIceCandidateNullOrEmpty(a,c){if(!(a.RTCPeerConnection&&a.RTCPeerConnection.prototype))return;const b=a.RTCPeerConnection.prototype.addIceCandidate;!b||b.length===0||(a.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?(c.browser==="chrome"&&c.version<78||c.browser==="firefox"&&c.version<68||c.browser==="safari")&&arguments[0]&&arguments[0].candidate===""?Promise.resolve():b.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}function shimParameterlessSetLocalDescription(a,c){if(!(a.RTCPeerConnection&&a.RTCPeerConnection.prototype))return;const b=a.RTCPeerConnection.prototype.setLocalDescription;!b||b.length===0||(a.RTCPeerConnection.prototype.setLocalDescription=function(){let k=arguments[0]||{};if(typeof k!="object"||k.type&&k.sdp)return b.apply(this,arguments);if(k={type:k.type,sdp:k.sdp},!k.type)switch(this.signalingState){case"stable":case"have-local-offer":case"have-remote-pranswer":k.type="offer";break;default:k.type="answer";break}return k.sdp||k.type!=="offer"&&k.type!=="answer"?b.apply(this,[k]):(k.type==="offer"?this.createOffer:this.createAnswer).apply(this).then(_e=>b.apply(this,[_e]))})}var commonShim=Object.freeze({__proto__:null,removeExtmapAllowMixed,shimAddIceCandidateNullOrEmpty,shimConnectionState,shimMaxMessageSize,shimParameterlessSetLocalDescription,shimRTCIceCandidate,shimRTCIceCandidateRelayProtocol,shimSendThrowTypeError});function adapterFactory(){let{window:a}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{shimChrome:!0,shimFirefox:!0,shimSafari:!0};const b=log,_=detectBrowser(a),k={browserDetails:_,commonShim,extractVersion,disableLog,disableWarnings,sdp};switch(_.browser){case"chrome":if(!chromeShim||!shimPeerConnection$1||!c.shimChrome)return b("Chrome shim is not included in this adapter release."),k;if(_.version===null)return b("Chrome shim can not determine version, not shimming."),k;b("adapter.js shimming chrome."),k.browserShim=chromeShim,shimAddIceCandidateNullOrEmpty(a,_),shimParameterlessSetLocalDescription(a),shimGetUserMedia$2(a,_),shimMediaStream(a),shimPeerConnection$1(a,_),shimOnTrack$1(a),shimAddTrackRemoveTrack(a,_),shimGetSendersWithDtmf(a),shimGetStats(a),shimSenderReceiverGetStats(a),fixNegotiationNeeded(a,_),shimRTCIceCandidate(a),shimRTCIceCandidateRelayProtocol(a),shimConnectionState(a),shimMaxMessageSize(a,_),shimSendThrowTypeError(a),removeExtmapAllowMixed(a,_);break;case"firefox":if(!firefoxShim||!shimPeerConnection||!c.shimFirefox)return b("Firefox shim is not included in this adapter release."),k;b("adapter.js shimming firefox."),k.browserShim=firefoxShim,shimAddIceCandidateNullOrEmpty(a,_),shimParameterlessSetLocalDescription(a),shimGetUserMedia$1(a,_),shimPeerConnection(a,_),shimOnTrack(a),shimRemoveStream(a),shimSenderGetStats(a),shimReceiverGetStats(a),shimRTCDataChannel(a),shimAddTransceiver(a),shimGetParameters(a),shimCreateOffer(a),shimCreateAnswer(a),shimRTCIceCandidate(a),shimConnectionState(a),shimMaxMessageSize(a,_),shimSendThrowTypeError(a);break;case"safari":if(!safariShim||!c.shimSafari)return b("Safari shim is not included in this adapter release."),k;b("adapter.js shimming safari."),k.browserShim=safariShim,shimAddIceCandidateNullOrEmpty(a,_),shimParameterlessSetLocalDescription(a),shimRTCIceServerUrls(a),shimCreateOfferLegacy(a),shimCallbacksAPI(a),shimLocalStreamsAPI(a),shimRemoteStreamsAPI(a),shimTrackEventTransceiver(a),shimGetUserMedia(a),shimAudioContext(a),shimRTCIceCandidate(a),shimRTCIceCandidateRelayProtocol(a),shimMaxMessageSize(a,_),shimSendThrowTypeError(a),removeExtmapAllowMixed(a,_);break;default:b("Unsupported browser!");break}return k}adapterFactory({window:typeof window>"u"?void 0:window});const DECRYPTION_FAILURE_TOLERANCE=10,E2EE_FLAG="lk_e2ee",SALT="LKFrameEncryptionKey",KEY_PROVIDER_DEFAULTS={sharedKey:!1,ratchetSalt:SALT,ratchetWindowSize:8,failureTolerance:DECRYPTION_FAILURE_TOLERANCE};var KeyProviderEvent;(function(a){a.SetKey="setKey",a.RatchetRequest="ratchetRequest",a.KeyRatcheted="keyRatcheted"})(KeyProviderEvent||(KeyProviderEvent={}));var KeyHandlerEvent;(function(a){a.KeyRatcheted="keyRatcheted"})(KeyHandlerEvent||(KeyHandlerEvent={}));var EncryptionEvent;(function(a){a.ParticipantEncryptionStatusChanged="participantEncryptionStatusChanged",a.EncryptionError="encryptionError"})(EncryptionEvent||(EncryptionEvent={}));var CryptorEvent;(function(a){a.Error="cryptorError"})(CryptorEvent||(CryptorEvent={}));function isE2EESupported(){return isInsertableStreamSupported()||isScriptTransformSupported()}function isScriptTransformSupported(){return typeof window.RTCRtpScriptTransform<"u"}function isInsertableStreamSupported(){return typeof window.RTCRtpSender<"u"&&typeof window.RTCRtpSender.prototype.createEncodedStreams<"u"}class BaseKeyProvider extends eventsExports.EventEmitter{constructor(){let c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super(),this.onKeyRatcheted=(b,_)=>{livekitLogger.debug("key ratcheted event received",{material:b,keyIndex:_})},this.keyInfoMap=new Map,this.options=Object.assign(Object.assign({},KEY_PROVIDER_DEFAULTS),c),this.on(KeyProviderEvent.KeyRatcheted,this.onKeyRatcheted)}onSetEncryptionKey(c,b,_){const k={key:c,participantIdentity:b,keyIndex:_};this.keyInfoMap.set("".concat(b??"shared","-").concat(_??0),k),this.emit(KeyProviderEvent.SetKey,k)}getKeys(){return Array.from(this.keyInfoMap.values())}getOptions(){return this.options}ratchetKey(c,b){this.emit(KeyProviderEvent.RatchetRequest,c,b)}}class LivekitError extends Error{constructor(c,b){super(b||"an error has occured"),this.code=c}}class ConnectionError extends LivekitError{constructor(c,b,_){super(1,c),this.status=_,this.reason=b}}class DeviceUnsupportedError extends LivekitError{constructor(c){super(21,c??"device is unsupported")}}class TrackInvalidError extends LivekitError{constructor(c){super(20,c??"track is invalid")}}class UnsupportedServer extends LivekitError{constructor(c){super(10,c??"unsupported server")}}class UnexpectedConnectionState extends LivekitError{constructor(c){super(12,c??"unexpected connection state")}}class NegotiationError extends LivekitError{constructor(c){super(13,c??"unable to negotiate")}}var MediaDeviceFailure;(function(a){a.PermissionDenied="PermissionDenied",a.NotFound="NotFound",a.DeviceInUse="DeviceInUse",a.Other="Other"})(MediaDeviceFailure||(MediaDeviceFailure={}));(function(a){function c(b){if(b&&"name"in b)return b.name==="NotFoundError"||b.name==="DevicesNotFoundError"?a.NotFound:b.name==="NotAllowedError"||b.name==="PermissionDeniedError"?a.PermissionDenied:b.name==="NotReadableError"||b.name==="TrackStartError"?a.DeviceInUse:a.Other}a.getFailure=c})(MediaDeviceFailure||(MediaDeviceFailure={}));var RoomEvent;(function(a){a.Connected="connected",a.Reconnecting="reconnecting",a.Reconnected="reconnected",a.Disconnected="disconnected",a.ConnectionStateChanged="connectionStateChanged",a.MediaDevicesChanged="mediaDevicesChanged",a.ParticipantConnected="participantConnected",a.ParticipantDisconnected="participantDisconnected",a.TrackPublished="trackPublished",a.TrackSubscribed="trackSubscribed",a.TrackSubscriptionFailed="trackSubscriptionFailed",a.TrackUnpublished="trackUnpublished",a.TrackUnsubscribed="trackUnsubscribed",a.TrackMuted="trackMuted",a.TrackUnmuted="trackUnmuted",a.LocalTrackPublished="localTrackPublished",a.LocalTrackUnpublished="localTrackUnpublished",a.LocalAudioSilenceDetected="localAudioSilenceDetected",a.ActiveSpeakersChanged="activeSpeakersChanged",a.ParticipantMetadataChanged="participantMetadataChanged",a.ParticipantNameChanged="participantNameChanged",a.RoomMetadataChanged="roomMetadataChanged",a.DataReceived="dataReceived",a.ConnectionQualityChanged="connectionQualityChanged",a.TrackStreamStateChanged="trackStreamStateChanged",a.TrackSubscriptionPermissionChanged="trackSubscriptionPermissionChanged",a.TrackSubscriptionStatusChanged="trackSubscriptionStatusChanged",a.AudioPlaybackStatusChanged="audioPlaybackChanged",a.VideoPlaybackStatusChanged="videoPlaybackChanged",a.MediaDevicesError="mediaDevicesError",a.ParticipantPermissionsChanged="participantPermissionsChanged",a.SignalConnected="signalConnected",a.RecordingStatusChanged="recordingStatusChanged",a.ParticipantEncryptionStatusChanged="participantEncryptionStatusChanged",a.EncryptionError="encryptionError",a.DCBufferStatusChanged="dcBufferStatusChanged",a.ActiveDeviceChanged="activeDeviceChanged"})(RoomEvent||(RoomEvent={}));var ParticipantEvent;(function(a){a.TrackPublished="trackPublished",a.TrackSubscribed="trackSubscribed",a.TrackSubscriptionFailed="trackSubscriptionFailed",a.TrackUnpublished="trackUnpublished",a.TrackUnsubscribed="trackUnsubscribed",a.TrackMuted="trackMuted",a.TrackUnmuted="trackUnmuted",a.LocalTrackPublished="localTrackPublished",a.LocalTrackUnpublished="localTrackUnpublished",a.ParticipantMetadataChanged="participantMetadataChanged",a.ParticipantNameChanged="participantNameChanged",a.DataReceived="dataReceived",a.IsSpeakingChanged="isSpeakingChanged",a.ConnectionQualityChanged="connectionQualityChanged",a.TrackStreamStateChanged="trackStreamStateChanged",a.TrackSubscriptionPermissionChanged="trackSubscriptionPermissionChanged",a.TrackSubscriptionStatusChanged="trackSubscriptionStatusChanged",a.MediaDevicesError="mediaDevicesError",a.AudioStreamAcquired="audioStreamAcquired",a.ParticipantPermissionsChanged="participantPermissionsChanged",a.PCTrackAdded="pcTrackAdded"})(ParticipantEvent||(ParticipantEvent={}));var EngineEvent;(function(a){a.TransportsCreated="transportsCreated",a.Connected="connected",a.Disconnected="disconnected",a.Resuming="resuming",a.Resumed="resumed",a.Restarting="restarting",a.Restarted="restarted",a.SignalResumed="signalResumed",a.SignalRestarted="signalRestarted",a.Closing="closing",a.MediaTrackAdded="mediaTrackAdded",a.ActiveSpeakersUpdate="activeSpeakersUpdate",a.DataPacketReceived="dataPacketReceived",a.RTPVideoMapUpdate="rtpVideoMapUpdate",a.DCBufferStatusChanged="dcBufferStatusChanged",a.ParticipantUpdate="participantUpdate",a.RoomUpdate="roomUpdate",a.SpeakersChanged="speakersChanged",a.StreamStateChanged="streamStateChanged",a.ConnectionQualityUpdate="connectionQualityUpdate",a.SubscriptionError="subscriptionError",a.SubscriptionPermissionUpdate="subscriptionPermissionUpdate",a.RemoteMute="remoteMute",a.SubscribedQualityUpdate="subscribedQualityUpdate",a.LocalTrackUnpublished="localTrackUnpublished"})(EngineEvent||(EngineEvent={}));var TrackEvent;(function(a){a.Message="message",a.Muted="muted",a.Unmuted="unmuted",a.Restarted="restarted",a.Ended="ended",a.Subscribed="subscribed",a.Unsubscribed="unsubscribed",a.UpdateSettings="updateSettings",a.UpdateSubscription="updateSubscription",a.AudioPlaybackStarted="audioPlaybackStarted",a.AudioPlaybackFailed="audioPlaybackFailed",a.AudioSilenceDetected="audioSilenceDetected",a.VisibilityChanged="visibilityChanged",a.VideoDimensionsChanged="videoDimensionsChanged",a.VideoPlaybackStarted="videoPlaybackStarted",a.VideoPlaybackFailed="videoPlaybackFailed",a.ElementAttached="elementAttached",a.ElementDetached="elementDetached",a.UpstreamPaused="upstreamPaused",a.UpstreamResumed="upstreamResumed",a.SubscriptionPermissionChanged="subscriptionPermissionChanged",a.SubscriptionStatusChanged="subscriptionStatusChanged",a.SubscriptionFailed="subscriptionFailed"})(TrackEvent||(TrackEvent={}));function r$1(a,c,b){var _,k,j;c===void 0&&(c=50),b===void 0&&(b={});var _e=(_=b.isImmediate)!=null&&_,et=(k=b.callback)!=null&&k,nt=b.maxWait,it=Date.now(),ft=[];function pt(){if(nt!==void 0){var St=Date.now()-it;if(St+c>=nt)return nt-St}return c}var mt=function(){var St=[].slice.call(arguments),yt=this;return new Promise(function(_t,Tt){var gt=_e&&j===void 0;if(j!==void 0&&clearTimeout(j),j=setTimeout(function(){if(j=void 0,it=Date.now(),!_e){var Et=a.apply(yt,St);et&&et(Et),ft.forEach(function(At){return(0,At.resolve)(Et)}),ft=[]}},pt()),gt){var ht=a.apply(yt,St);return et&&et(ht),_t(ht)}ft.push({resolve:_t,reject:Tt})})};return mt.cancel=function(St){j!==void 0&&clearTimeout(j),ft.forEach(function(yt){return(0,yt.reject)(St)}),ft=[]},mt}const commonVersionIdentifier=/version\/(\d+(\.?_?\d+)+)/i;let browserDetails;function getBrowser(a){let c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(typeof a>"u"&&typeof navigator>"u")return;const b=(a??navigator.userAgent).toLowerCase();if(browserDetails===void 0||c){const _=browsersList.find(k=>{let{test:j}=k;return j.test(b)});browserDetails=_==null?void 0:_.describe(b)}return browserDetails}const browsersList=[{test:/firefox|iceweasel|fxios/i,describe(a){return{name:"Firefox",version:getMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,a),os:a.toLowerCase().includes("fxios")?"iOS":void 0}}},{test:/chrom|crios|crmo/i,describe(a){return{name:"Chrome",version:getMatch(/(?:chrome|chromium|crios|crmo)\/(\d+(\.?_?\d+)+)/i,a),os:a.toLowerCase().includes("crios")?"iOS":void 0}}},{test:/safari|applewebkit/i,describe(a){return{name:"Safari",version:getMatch(commonVersionIdentifier,a),os:a.includes("mobile/")?"iOS":"macOS"}}}];function getMatch(a,c){let b=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1;const _=c.match(a);return _&&_.length>=b&&_[b]||""}var version$1="2.0.1";const version=version$1,protocolVersion=12;class CriticalTimers{}CriticalTimers.setTimeout=function(){return setTimeout(...arguments)};CriticalTimers.setInterval=function(){return setInterval(...arguments)};CriticalTimers.clearTimeout=function(){return clearTimeout(...arguments)};CriticalTimers.clearInterval=function(){return clearInterval(...arguments)};class VideoPreset{constructor(c,b,_,k,j){this.width=c,this.height=b,this.encoding={maxBitrate:_,maxFramerate:k,priority:j}}get resolution(){return{width:this.width,height:this.height,frameRate:this.encoding.maxFramerate,aspectRatio:this.width/this.height}}}const backupCodecs=["vp8","h264"],videoCodecs=["vp8","h264","vp9","av1"];function isBackupCodec(a){return!!backupCodecs.find(c=>c===a)}var AudioPresets;(function(a){a.telephone={maxBitrate:12e3},a.speech={maxBitrate:2e4},a.music={maxBitrate:32e3},a.musicStereo={maxBitrate:48e3},a.musicHighQuality={maxBitrate:64e3},a.musicHighQualityStereo={maxBitrate:96e3}})(AudioPresets||(AudioPresets={}));const VideoPresets={h90:new VideoPreset(160,90,9e4,20),h180:new VideoPreset(320,180,16e4,20),h216:new VideoPreset(384,216,18e4,20),h360:new VideoPreset(640,360,45e4,20),h540:new VideoPreset(960,540,8e5,25),h720:new VideoPreset(1280,720,17e5,30),h1080:new VideoPreset(1920,1080,3e6,30),h1440:new VideoPreset(2560,1440,5e6,30),h2160:new VideoPreset(3840,2160,8e6,30)},VideoPresets43={h120:new VideoPreset(160,120,7e4,20),h180:new VideoPreset(240,180,125e3,20),h240:new VideoPreset(320,240,14e4,20),h360:new VideoPreset(480,360,33e4,20),h480:new VideoPreset(640,480,5e5,20),h540:new VideoPreset(720,540,6e5,25),h720:new VideoPreset(960,720,13e5,30),h1080:new VideoPreset(1440,1080,23e5,30),h1440:new VideoPreset(1920,1440,38e5,30)},ScreenSharePresets={h360fps3:new VideoPreset(640,360,2e5,3,"medium"),h360fps15:new VideoPreset(640,360,4e5,15,"medium"),h720fps5:new VideoPreset(1280,720,8e5,5,"medium"),h720fps15:new VideoPreset(1280,720,15e5,15,"medium"),h720fps30:new VideoPreset(1280,720,2e6,30,"medium"),h1080fps15:new VideoPreset(1920,1080,25e5,15,"medium"),h1080fps30:new VideoPreset(1920,1080,5e6,30,"medium"),original:new VideoPreset(0,0,7e6,30,"medium")};var SignalTarget;(function(a){a[a.PUBLISHER=0]="PUBLISHER",a[a.SUBSCRIBER=1]="SUBSCRIBER"})(SignalTarget||(SignalTarget={}));proto3.util.setEnumType(SignalTarget,"livekit.SignalTarget",[{no:0,name:"PUBLISHER"},{no:1,name:"SUBSCRIBER"}]);var StreamState;(function(a){a[a.ACTIVE=0]="ACTIVE",a[a.PAUSED=1]="PAUSED"})(StreamState||(StreamState={}));proto3.util.setEnumType(StreamState,"livekit.StreamState",[{no:0,name:"ACTIVE"},{no:1,name:"PAUSED"}]);var CandidateProtocol;(function(a){a[a.UDP=0]="UDP",a[a.TCP=1]="TCP",a[a.TLS=2]="TLS"})(CandidateProtocol||(CandidateProtocol={}));proto3.util.setEnumType(CandidateProtocol,"livekit.CandidateProtocol",[{no:0,name:"UDP"},{no:1,name:"TCP"},{no:2,name:"TLS"}]);class SignalRequest extends Message{constructor(c){super(),this.message={case:void 0},proto3.util.initPartial(c,this)}static fromBinary(c,b){return new SignalRequest().fromBinary(c,b)}static fromJson(c,b){return new SignalRequest().fromJson(c,b)}static fromJsonString(c,b){return new SignalRequest().fromJsonString(c,b)}static equals(c,b){return proto3.util.equals(SignalRequest,c,b)}}SignalRequest.runtime=proto3;SignalRequest.typeName="livekit.SignalRequest";SignalRequest.fields=proto3.util.newFieldList(()=>[{no:1,name:"offer",kind:"message",T:SessionDescription,oneof:"message"},{no:2,name:"answer",kind:"message",T:SessionDescription,oneof:"message"},{no:3,name:"trickle",kind:"message",T:TrickleRequest,oneof:"message"},{no:4,name:"add_track",kind:"message",T:AddTrackRequest,oneof:"message"},{no:5,name:"mute",kind:"message",T:MuteTrackRequest,oneof:"message"},{no:6,name:"subscription",kind:"message",T:UpdateSubscription,oneof:"message"},{no:7,name:"track_setting",kind:"message",T:UpdateTrackSettings,oneof:"message"},{no:8,name:"leave",kind:"message",T:LeaveRequest,oneof:"message"},{no:10,name:"update_layers",kind:"message",T:UpdateVideoLayers,oneof:"message"},{no:11,name:"subscription_permission",kind:"message",T:SubscriptionPermission,oneof:"message"},{no:12,name:"sync_state",kind:"message",T:SyncState,oneof:"message"},{no:13,name:"simulate",kind:"message",T:SimulateScenario,oneof:"message"},{no:14,name:"ping",kind:"scalar",T:3,oneof:"message"},{no:15,name:"update_metadata",kind:"message",T:UpdateParticipantMetadata,oneof:"message"},{no:16,name:"ping_req",kind:"message",T:Ping,oneof:"message"}]);class SignalResponse extends Message{constructor(c){super(),this.message={case:void 0},proto3.util.initPartial(c,this)}static fromBinary(c,b){return new SignalResponse().fromBinary(c,b)}static fromJson(c,b){return new SignalResponse().fromJson(c,b)}static fromJsonString(c,b){return new SignalResponse().fromJsonString(c,b)}static equals(c,b){return proto3.util.equals(SignalResponse,c,b)}}SignalResponse.runtime=proto3;SignalResponse.typeName="livekit.SignalResponse";SignalResponse.fields=proto3.util.newFieldList(()=>[{no:1,name:"join",kind:"message",T:JoinResponse,oneof:"message"},{no:2,name:"answer",kind:"message",T:SessionDescription,oneof:"message"},{no:3,name:"offer",kind:"message",T:SessionDescription,oneof:"message"},{no:4,name:"trickle",kind:"message",T:TrickleRequest,oneof:"message"},{no:5,name:"update",kind:"message",T:ParticipantUpdate,oneof:"message"},{no:6,name:"track_published",kind:"message",T:TrackPublishedResponse,oneof:"message"},{no:8,name:"leave",kind:"message",T:LeaveRequest,oneof:"message"},{no:9,name:"mute",kind:"message",T:MuteTrackRequest,oneof:"message"},{no:10,name:"speakers_changed",kind:"message",T:SpeakersChanged,oneof:"message"},{no:11,name:"room_update",kind:"message",T:RoomUpdate,oneof:"message"},{no:12,name:"connection_quality",kind:"message",T:ConnectionQualityUpdate,oneof:"message"},{no:13,name:"stream_state_update",kind:"message",T:StreamStateUpdate,oneof:"message"},{no:14,name:"subscribed_quality_update",kind:"message",T:SubscribedQualityUpdate,oneof:"message"},{no:15,name:"subscription_permission_update",kind:"message",T:SubscriptionPermissionUpdate,oneof:"message"},{no:16,name:"refresh_token",kind:"scalar",T:9,oneof:"message"},{no:17,name:"track_unpublished",kind:"message",T:TrackUnpublishedResponse,oneof:"message"},{no:18,name:"pong",kind:"scalar",T:3,oneof:"message"},{no:19,name:"reconnect",kind:"message",T:ReconnectResponse,oneof:"message"},{no:20,name:"pong_resp",kind:"message",T:Pong,oneof:"message"},{no:21,name:"subscription_response",kind:"message",T:SubscriptionResponse,oneof:"message"}]);class SimulcastCodec extends Message{constructor(c){super(),this.codec="",this.cid="",proto3.util.initPartial(c,this)}static fromBinary(c,b){return new SimulcastCodec().fromBinary(c,b)}static fromJson(c,b){return new SimulcastCodec().fromJson(c,b)}static fromJsonString(c,b){return new SimulcastCodec().fromJsonString(c,b)}static equals(c,b){return proto3.util.equals(SimulcastCodec,c,b)}}SimulcastCodec.runtime=proto3;SimulcastCodec.typeName="livekit.SimulcastCodec";SimulcastCodec.fields=proto3.util.newFieldList(()=>[{no:1,name:"codec",kind:"scalar",T:9},{no:2,name:"cid",kind:"scalar",T:9}]);class AddTrackRequest extends Message{constructor(c){super(),this.cid="",this.name="",this.type=TrackType.AUDIO,this.width=0,this.height=0,this.muted=!1,this.disableDtx=!1,this.source=TrackSource.UNKNOWN,this.layers=[],this.simulcastCodecs=[],this.sid="",this.stereo=!1,this.disableRed=!1,this.encryption=Encryption_Type.NONE,this.stream="",proto3.util.initPartial(c,this)}static fromBinary(c,b){return new AddTrackRequest().fromBinary(c,b)}static fromJson(c,b){return new AddTrackRequest().fromJson(c,b)}static fromJsonString(c,b){return new AddTrackRequest().fromJsonString(c,b)}static equals(c,b){return proto3.util.equals(AddTrackRequest,c,b)}}AddTrackRequest.runtime=proto3;AddTrackRequest.typeName="livekit.AddTrackRequest";AddTrackRequest.fields=proto3.util.newFieldList(()=>[{no:1,name:"cid",kind:"scalar",T:9},{no:2,name:"name",kind:"scalar",T:9},{no:3,name:"type",kind:"enum",T:proto3.getEnumType(TrackType)},{no:4,name:"width",kind:"scalar",T:13},{no:5,name:"height",kind:"scalar",T:13},{no:6,name:"muted",kind:"scalar",T:8},{no:7,name:"disable_dtx",kind:"scalar",T:8},{no:8,name:"source",kind:"enum",T:proto3.getEnumType(TrackSource)},{no:9,name:"layers",kind:"message",T:VideoLayer,repeated:!0},{no:10,name:"simulcast_codecs",kind:"message",T:SimulcastCodec,repeated:!0},{no:11,name:"sid",kind:"scalar",T:9},{no:12,name:"stereo",kind:"scalar",T:8},{no:13,name:"disable_red",kind:"scalar",T:8},{no:14,name:"encryption",kind:"enum",T:proto3.getEnumType(Encryption_Type)},{no:15,name:"stream",kind:"scalar",T:9}]);class TrickleRequest extends Message{constructor(c){super(),this.candidateInit="",this.target=SignalTarget.PUBLISHER,proto3.util.initPartial(c,this)}static fromBinary(c,b){return new TrickleRequest().fromBinary(c,b)}static fromJson(c,b){return new TrickleRequest().fromJson(c,b)}static fromJsonString(c,b){return new TrickleRequest().fromJsonString(c,b)}static equals(c,b){return proto3.util.equals(TrickleRequest,c,b)}}TrickleRequest.runtime=proto3;TrickleRequest.typeName="livekit.TrickleRequest";TrickleRequest.fields=proto3.util.newFieldList(()=>[{no:1,name:"candidateInit",kind:"scalar",T:9},{no:2,name:"target",kind:"enum",T:proto3.getEnumType(SignalTarget)}]);class MuteTrackRequest extends Message{constructor(c){super(),this.sid="",this.muted=!1,proto3.util.initPartial(c,this)}static fromBinary(c,b){return new MuteTrackRequest().fromBinary(c,b)}static fromJson(c,b){return new MuteTrackRequest().fromJson(c,b)}static fromJsonString(c,b){return new MuteTrackRequest().fromJsonString(c,b)}static equals(c,b){return proto3.util.equals(MuteTrackRequest,c,b)}}MuteTrackRequest.runtime=proto3;MuteTrackRequest.typeName="livekit.MuteTrackRequest";MuteTrackRequest.fields=proto3.util.newFieldList(()=>[{no:1,name:"sid",kind:"scalar",T:9},{no:2,name:"muted",kind:"scalar",T:8}]);class JoinResponse extends Message{constructor(c){super(),this.otherParticipants=[],this.serverVersion="",this.iceServers=[],this.subscriberPrimary=!1,this.alternativeUrl="",this.serverRegion="",this.pingTimeout=0,this.pingInterval=0,this.sifTrailer=new Uint8Array(0),proto3.util.initPartial(c,this)}static fromBinary(c,b){return new JoinResponse().fromBinary(c,b)}static fromJson(c,b){return new JoinResponse().fromJson(c,b)}static fromJsonString(c,b){return new JoinResponse().fromJsonString(c,b)}static equals(c,b){return proto3.util.equals(JoinResponse,c,b)}}JoinResponse.runtime=proto3;JoinResponse.typeName="livekit.JoinResponse";JoinResponse.fields=proto3.util.newFieldList(()=>[{no:1,name:"room",kind:"message",T:Room$1},{no:2,name:"participant",kind:"message",T:ParticipantInfo},{no:3,name:"other_participants",kind:"message",T:ParticipantInfo,repeated:!0},{no:4,name:"server_version",kind:"scalar",T:9},{no:5,name:"ice_servers",kind:"message",T:ICEServer,repeated:!0},{no:6,name:"subscriber_primary",kind:"scalar",T:8},{no:7,name:"alternative_url",kind:"scalar",T:9},{no:8,name:"client_configuration",kind:"message",T:ClientConfiguration},{no:9,name:"server_region",kind:"scalar",T:9},{no:10,name:"ping_timeout",kind:"scalar",T:5},{no:11,name:"ping_interval",kind:"scalar",T:5},{no:12,name:"server_info",kind:"message",T:ServerInfo},{no:13,name:"sif_trailer",kind:"scalar",T:12}]);class ReconnectResponse extends Message{constructor(c){super(),this.iceServers=[],proto3.util.initPartial(c,this)}static fromBinary(c,b){return new ReconnectResponse().fromBinary(c,b)}static fromJson(c,b){return new ReconnectResponse().fromJson(c,b)}static fromJsonString(c,b){return new ReconnectResponse().fromJsonString(c,b)}static equals(c,b){return proto3.util.equals(ReconnectResponse,c,b)}}ReconnectResponse.runtime=proto3;ReconnectResponse.typeName="livekit.ReconnectResponse";ReconnectResponse.fields=proto3.util.newFieldList(()=>[{no:1,name:"ice_servers",kind:"message",T:ICEServer,repeated:!0},{no:2,name:"client_configuration",kind:"message",T:ClientConfiguration}]);class TrackPublishedResponse extends Message{constructor(c){super(),this.cid="",proto3.util.initPartial(c,this)}static fromBinary(c,b){return new TrackPublishedResponse().fromBinary(c,b)}static fromJson(c,b){return new TrackPublishedResponse().fromJson(c,b)}static fromJsonString(c,b){return new TrackPublishedResponse().fromJsonString(c,b)}static equals(c,b){return proto3.util.equals(TrackPublishedResponse,c,b)}}TrackPublishedResponse.runtime=proto3;TrackPublishedResponse.typeName="livekit.TrackPublishedResponse";TrackPublishedResponse.fields=proto3.util.newFieldList(()=>[{no:1,name:"cid",kind:"scalar",T:9},{no:2,name:"track",kind:"message",T:TrackInfo}]);class TrackUnpublishedResponse extends Message{constructor(c){super(),this.trackSid="",proto3.util.initPartial(c,this)}static fromBinary(c,b){return new TrackUnpublishedResponse().fromBinary(c,b)}static fromJson(c,b){return new TrackUnpublishedResponse().fromJson(c,b)}static fromJsonString(c,b){return new TrackUnpublishedResponse().fromJsonString(c,b)}static equals(c,b){return proto3.util.equals(TrackUnpublishedResponse,c,b)}}TrackUnpublishedResponse.runtime=proto3;TrackUnpublishedResponse.typeName="livekit.TrackUnpublishedResponse";TrackUnpublishedResponse.fields=proto3.util.newFieldList(()=>[{no:1,name:"track_sid",kind:"scalar",T:9}]);class SessionDescription extends Message{constructor(c){super(),this.type="",this.sdp="",proto3.util.initPartial(c,this)}static fromBinary(c,b){return new SessionDescription().fromBinary(c,b)}static fromJson(c,b){return new SessionDescription().fromJson(c,b)}static fromJsonString(c,b){return new SessionDescription().fromJsonString(c,b)}static equals(c,b){return proto3.util.equals(SessionDescription,c,b)}}SessionDescription.runtime=proto3;SessionDescription.typeName="livekit.SessionDescription";SessionDescription.fields=proto3.util.newFieldList(()=>[{no:1,name:"type",kind:"scalar",T:9},{no:2,name:"sdp",kind:"scalar",T:9}]);class ParticipantUpdate extends Message{constructor(c){super(),this.participants=[],proto3.util.initPartial(c,this)}static fromBinary(c,b){return new ParticipantUpdate().fromBinary(c,b)}static fromJson(c,b){return new ParticipantUpdate().fromJson(c,b)}static fromJsonString(c,b){return new ParticipantUpdate().fromJsonString(c,b)}static equals(c,b){return proto3.util.equals(ParticipantUpdate,c,b)}}ParticipantUpdate.runtime=proto3;ParticipantUpdate.typeName="livekit.ParticipantUpdate";ParticipantUpdate.fields=proto3.util.newFieldList(()=>[{no:1,name:"participants",kind:"message",T:ParticipantInfo,repeated:!0}]);class UpdateSubscription extends Message{constructor(c){super(),this.trackSids=[],this.subscribe=!1,this.participantTracks=[],proto3.util.initPartial(c,this)}static fromBinary(c,b){return new UpdateSubscription().fromBinary(c,b)}static fromJson(c,b){return new UpdateSubscription().fromJson(c,b)}static fromJsonString(c,b){return new UpdateSubscription().fromJsonString(c,b)}static equals(c,b){return proto3.util.equals(UpdateSubscription,c,b)}}UpdateSubscription.runtime=proto3;UpdateSubscription.typeName="livekit.UpdateSubscription";UpdateSubscription.fields=proto3.util.newFieldList(()=>[{no:1,name:"track_sids",kind:"scalar",T:9,repeated:!0},{no:2,name:"subscribe",kind:"scalar",T:8},{no:3,name:"participant_tracks",kind:"message",T:ParticipantTracks,repeated:!0}]);class UpdateTrackSettings extends Message{constructor(c){super(),this.trackSids=[],this.disabled=!1,this.quality=VideoQuality$1.LOW,this.width=0,this.height=0,this.fps=0,this.priority=0,proto3.util.initPartial(c,this)}static fromBinary(c,b){return new UpdateTrackSettings().fromBinary(c,b)}static fromJson(c,b){return new UpdateTrackSettings().fromJson(c,b)}static fromJsonString(c,b){return new UpdateTrackSettings().fromJsonString(c,b)}static equals(c,b){return proto3.util.equals(UpdateTrackSettings,c,b)}}UpdateTrackSettings.runtime=proto3;UpdateTrackSettings.typeName="livekit.UpdateTrackSettings";UpdateTrackSettings.fields=proto3.util.newFieldList(()=>[{no:1,name:"track_sids",kind:"scalar",T:9,repeated:!0},{no:3,name:"disabled",kind:"scalar",T:8},{no:4,name:"quality",kind:"enum",T:proto3.getEnumType(VideoQuality$1)},{no:5,name:"width",kind:"scalar",T:13},{no:6,name:"height",kind:"scalar",T:13},{no:7,name:"fps",kind:"scalar",T:13},{no:8,name:"priority",kind:"scalar",T:13}]);class LeaveRequest extends Message{constructor(c){super(),this.canReconnect=!1,this.reason=DisconnectReason.UNKNOWN_REASON,this.action=LeaveRequest_Action.DISCONNECT,proto3.util.initPartial(c,this)}static fromBinary(c,b){return new LeaveRequest().fromBinary(c,b)}static fromJson(c,b){return new LeaveRequest().fromJson(c,b)}static fromJsonString(c,b){return new LeaveRequest().fromJsonString(c,b)}static equals(c,b){return proto3.util.equals(LeaveRequest,c,b)}}LeaveRequest.runtime=proto3;LeaveRequest.typeName="livekit.LeaveRequest";LeaveRequest.fields=proto3.util.newFieldList(()=>[{no:1,name:"can_reconnect",kind:"scalar",T:8},{no:2,name:"reason",kind:"enum",T:proto3.getEnumType(DisconnectReason)},{no:3,name:"action",kind:"enum",T:proto3.getEnumType(LeaveRequest_Action)},{no:4,name:"regions",kind:"message",T:RegionSettings}]);var LeaveRequest_Action;(function(a){a[a.DISCONNECT=0]="DISCONNECT",a[a.RESUME=1]="RESUME",a[a.RECONNECT=2]="RECONNECT"})(LeaveRequest_Action||(LeaveRequest_Action={}));proto3.util.setEnumType(LeaveRequest_Action,"livekit.LeaveRequest.Action",[{no:0,name:"DISCONNECT"},{no:1,name:"RESUME"},{no:2,name:"RECONNECT"}]);class UpdateVideoLayers extends Message{constructor(c){super(),this.trackSid="",this.layers=[],proto3.util.initPartial(c,this)}static fromBinary(c,b){return new UpdateVideoLayers().fromBinary(c,b)}static fromJson(c,b){return new UpdateVideoLayers().fromJson(c,b)}static fromJsonString(c,b){return new UpdateVideoLayers().fromJsonString(c,b)}static equals(c,b){return proto3.util.equals(UpdateVideoLayers,c,b)}}UpdateVideoLayers.runtime=proto3;UpdateVideoLayers.typeName="livekit.UpdateVideoLayers";UpdateVideoLayers.fields=proto3.util.newFieldList(()=>[{no:1,name:"track_sid",kind:"scalar",T:9},{no:2,name:"layers",kind:"message",T:VideoLayer,repeated:!0}]);class UpdateParticipantMetadata extends Message{constructor(c){super(),this.metadata="",this.name="",proto3.util.initPartial(c,this)}static fromBinary(c,b){return new UpdateParticipantMetadata().fromBinary(c,b)}static fromJson(c,b){return new UpdateParticipantMetadata().fromJson(c,b)}static fromJsonString(c,b){return new UpdateParticipantMetadata().fromJsonString(c,b)}static equals(c,b){return proto3.util.equals(UpdateParticipantMetadata,c,b)}}UpdateParticipantMetadata.runtime=proto3;UpdateParticipantMetadata.typeName="livekit.UpdateParticipantMetadata";UpdateParticipantMetadata.fields=proto3.util.newFieldList(()=>[{no:1,name:"metadata",kind:"scalar",T:9},{no:2,name:"name",kind:"scalar",T:9}]);class ICEServer extends Message{constructor(c){super(),this.urls=[],this.username="",this.credential="",proto3.util.initPartial(c,this)}static fromBinary(c,b){return new ICEServer().fromBinary(c,b)}static fromJson(c,b){return new ICEServer().fromJson(c,b)}static fromJsonString(c,b){return new ICEServer().fromJsonString(c,b)}static equals(c,b){return proto3.util.equals(ICEServer,c,b)}}ICEServer.runtime=proto3;ICEServer.typeName="livekit.ICEServer";ICEServer.fields=proto3.util.newFieldList(()=>[{no:1,name:"urls",kind:"scalar",T:9,repeated:!0},{no:2,name:"username",kind:"scalar",T:9},{no:3,name:"credential",kind:"scalar",T:9}]);class SpeakersChanged extends Message{constructor(c){super(),this.speakers=[],proto3.util.initPartial(c,this)}static fromBinary(c,b){return new SpeakersChanged().fromBinary(c,b)}static fromJson(c,b){return new SpeakersChanged().fromJson(c,b)}static fromJsonString(c,b){return new SpeakersChanged().fromJsonString(c,b)}static equals(c,b){return proto3.util.equals(SpeakersChanged,c,b)}}SpeakersChanged.runtime=proto3;SpeakersChanged.typeName="livekit.SpeakersChanged";SpeakersChanged.fields=proto3.util.newFieldList(()=>[{no:1,name:"speakers",kind:"message",T:SpeakerInfo,repeated:!0}]);class RoomUpdate extends Message{constructor(c){super(),proto3.util.initPartial(c,this)}static fromBinary(c,b){return new RoomUpdate().fromBinary(c,b)}static fromJson(c,b){return new RoomUpdate().fromJson(c,b)}static fromJsonString(c,b){return new RoomUpdate().fromJsonString(c,b)}static equals(c,b){return proto3.util.equals(RoomUpdate,c,b)}}RoomUpdate.runtime=proto3;RoomUpdate.typeName="livekit.RoomUpdate";RoomUpdate.fields=proto3.util.newFieldList(()=>[{no:1,name:"room",kind:"message",T:Room$1}]);class ConnectionQualityInfo extends Message{constructor(c){super(),this.participantSid="",this.quality=ConnectionQuality$1.POOR,this.score=0,proto3.util.initPartial(c,this)}static fromBinary(c,b){return new ConnectionQualityInfo().fromBinary(c,b)}static fromJson(c,b){return new ConnectionQualityInfo().fromJson(c,b)}static fromJsonString(c,b){return new ConnectionQualityInfo().fromJsonString(c,b)}static equals(c,b){return proto3.util.equals(ConnectionQualityInfo,c,b)}}ConnectionQualityInfo.runtime=proto3;ConnectionQualityInfo.typeName="livekit.ConnectionQualityInfo";ConnectionQualityInfo.fields=proto3.util.newFieldList(()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:2,name:"quality",kind:"enum",T:proto3.getEnumType(ConnectionQuality$1)},{no:3,name:"score",kind:"scalar",T:2}]);class ConnectionQualityUpdate extends Message{constructor(c){super(),this.updates=[],proto3.util.initPartial(c,this)}static fromBinary(c,b){return new ConnectionQualityUpdate().fromBinary(c,b)}static fromJson(c,b){return new ConnectionQualityUpdate().fromJson(c,b)}static fromJsonString(c,b){return new ConnectionQualityUpdate().fromJsonString(c,b)}static equals(c,b){return proto3.util.equals(ConnectionQualityUpdate,c,b)}}ConnectionQualityUpdate.runtime=proto3;ConnectionQualityUpdate.typeName="livekit.ConnectionQualityUpdate";ConnectionQualityUpdate.fields=proto3.util.newFieldList(()=>[{no:1,name:"updates",kind:"message",T:ConnectionQualityInfo,repeated:!0}]);class StreamStateInfo extends Message{constructor(c){super(),this.participantSid="",this.trackSid="",this.state=StreamState.ACTIVE,proto3.util.initPartial(c,this)}static fromBinary(c,b){return new StreamStateInfo().fromBinary(c,b)}static fromJson(c,b){return new StreamStateInfo().fromJson(c,b)}static fromJsonString(c,b){return new StreamStateInfo().fromJsonString(c,b)}static equals(c,b){return proto3.util.equals(StreamStateInfo,c,b)}}StreamStateInfo.runtime=proto3;StreamStateInfo.typeName="livekit.StreamStateInfo";StreamStateInfo.fields=proto3.util.newFieldList(()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:2,name:"track_sid",kind:"scalar",T:9},{no:3,name:"state",kind:"enum",T:proto3.getEnumType(StreamState)}]);class StreamStateUpdate extends Message{constructor(c){super(),this.streamStates=[],proto3.util.initPartial(c,this)}static fromBinary(c,b){return new StreamStateUpdate().fromBinary(c,b)}static fromJson(c,b){return new StreamStateUpdate().fromJson(c,b)}static fromJsonString(c,b){return new StreamStateUpdate().fromJsonString(c,b)}static equals(c,b){return proto3.util.equals(StreamStateUpdate,c,b)}}StreamStateUpdate.runtime=proto3;StreamStateUpdate.typeName="livekit.StreamStateUpdate";StreamStateUpdate.fields=proto3.util.newFieldList(()=>[{no:1,name:"stream_states",kind:"message",T:StreamStateInfo,repeated:!0}]);class SubscribedQuality extends Message{constructor(c){super(),this.quality=VideoQuality$1.LOW,this.enabled=!1,proto3.util.initPartial(c,this)}static fromBinary(c,b){return new SubscribedQuality().fromBinary(c,b)}static fromJson(c,b){return new SubscribedQuality().fromJson(c,b)}static fromJsonString(c,b){return new SubscribedQuality().fromJsonString(c,b)}static equals(c,b){return proto3.util.equals(SubscribedQuality,c,b)}}SubscribedQuality.runtime=proto3;SubscribedQuality.typeName="livekit.SubscribedQuality";SubscribedQuality.fields=proto3.util.newFieldList(()=>[{no:1,name:"quality",kind:"enum",T:proto3.getEnumType(VideoQuality$1)},{no:2,name:"enabled",kind:"scalar",T:8}]);class SubscribedCodec extends Message{constructor(c){super(),this.codec="",this.qualities=[],proto3.util.initPartial(c,this)}static fromBinary(c,b){return new SubscribedCodec().fromBinary(c,b)}static fromJson(c,b){return new SubscribedCodec().fromJson(c,b)}static fromJsonString(c,b){return new SubscribedCodec().fromJsonString(c,b)}static equals(c,b){return proto3.util.equals(SubscribedCodec,c,b)}}SubscribedCodec.runtime=proto3;SubscribedCodec.typeName="livekit.SubscribedCodec";SubscribedCodec.fields=proto3.util.newFieldList(()=>[{no:1,name:"codec",kind:"scalar",T:9},{no:2,name:"qualities",kind:"message",T:SubscribedQuality,repeated:!0}]);class SubscribedQualityUpdate extends Message{constructor(c){super(),this.trackSid="",this.subscribedQualities=[],this.subscribedCodecs=[],proto3.util.initPartial(c,this)}static fromBinary(c,b){return new SubscribedQualityUpdate().fromBinary(c,b)}static fromJson(c,b){return new SubscribedQualityUpdate().fromJson(c,b)}static fromJsonString(c,b){return new SubscribedQualityUpdate().fromJsonString(c,b)}static equals(c,b){return proto3.util.equals(SubscribedQualityUpdate,c,b)}}SubscribedQualityUpdate.runtime=proto3;SubscribedQualityUpdate.typeName="livekit.SubscribedQualityUpdate";SubscribedQualityUpdate.fields=proto3.util.newFieldList(()=>[{no:1,name:"track_sid",kind:"scalar",T:9},{no:2,name:"subscribed_qualities",kind:"message",T:SubscribedQuality,repeated:!0},{no:3,name:"subscribed_codecs",kind:"message",T:SubscribedCodec,repeated:!0}]);class TrackPermission extends Message{constructor(c){super(),this.participantSid="",this.allTracks=!1,this.trackSids=[],this.participantIdentity="",proto3.util.initPartial(c,this)}static fromBinary(c,b){return new TrackPermission().fromBinary(c,b)}static fromJson(c,b){return new TrackPermission().fromJson(c,b)}static fromJsonString(c,b){return new TrackPermission().fromJsonString(c,b)}static equals(c,b){return proto3.util.equals(TrackPermission,c,b)}}TrackPermission.runtime=proto3;TrackPermission.typeName="livekit.TrackPermission";TrackPermission.fields=proto3.util.newFieldList(()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:2,name:"all_tracks",kind:"scalar",T:8},{no:3,name:"track_sids",kind:"scalar",T:9,repeated:!0},{no:4,name:"participant_identity",kind:"scalar",T:9}]);class SubscriptionPermission extends Message{constructor(c){super(),this.allParticipants=!1,this.trackPermissions=[],proto3.util.initPartial(c,this)}static fromBinary(c,b){return new SubscriptionPermission().fromBinary(c,b)}static fromJson(c,b){return new SubscriptionPermission().fromJson(c,b)}static fromJsonString(c,b){return new SubscriptionPermission().fromJsonString(c,b)}static equals(c,b){return proto3.util.equals(SubscriptionPermission,c,b)}}SubscriptionPermission.runtime=proto3;SubscriptionPermission.typeName="livekit.SubscriptionPermission";SubscriptionPermission.fields=proto3.util.newFieldList(()=>[{no:1,name:"all_participants",kind:"scalar",T:8},{no:2,name:"track_permissions",kind:"message",T:TrackPermission,repeated:!0}]);class SubscriptionPermissionUpdate extends Message{constructor(c){super(),this.participantSid="",this.trackSid="",this.allowed=!1,proto3.util.initPartial(c,this)}static fromBinary(c,b){return new SubscriptionPermissionUpdate().fromBinary(c,b)}static fromJson(c,b){return new SubscriptionPermissionUpdate().fromJson(c,b)}static fromJsonString(c,b){return new SubscriptionPermissionUpdate().fromJsonString(c,b)}static equals(c,b){return proto3.util.equals(SubscriptionPermissionUpdate,c,b)}}SubscriptionPermissionUpdate.runtime=proto3;SubscriptionPermissionUpdate.typeName="livekit.SubscriptionPermissionUpdate";SubscriptionPermissionUpdate.fields=proto3.util.newFieldList(()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:2,name:"track_sid",kind:"scalar",T:9},{no:3,name:"allowed",kind:"scalar",T:8}]);class SyncState extends Message{constructor(c){super(),this.publishTracks=[],this.dataChannels=[],this.trackSidsDisabled=[],proto3.util.initPartial(c,this)}static fromBinary(c,b){return new SyncState().fromBinary(c,b)}static fromJson(c,b){return new SyncState().fromJson(c,b)}static fromJsonString(c,b){return new SyncState().fromJsonString(c,b)}static equals(c,b){return proto3.util.equals(SyncState,c,b)}}SyncState.runtime=proto3;SyncState.typeName="livekit.SyncState";SyncState.fields=proto3.util.newFieldList(()=>[{no:1,name:"answer",kind:"message",T:SessionDescription},{no:2,name:"subscription",kind:"message",T:UpdateSubscription},{no:3,name:"publish_tracks",kind:"message",T:TrackPublishedResponse,repeated:!0},{no:4,name:"data_channels",kind:"message",T:DataChannelInfo,repeated:!0},{no:5,name:"offer",kind:"message",T:SessionDescription},{no:6,name:"track_sids_disabled",kind:"scalar",T:9,repeated:!0}]);class DataChannelInfo extends Message{constructor(c){super(),this.label="",this.id=0,this.target=SignalTarget.PUBLISHER,proto3.util.initPartial(c,this)}static fromBinary(c,b){return new DataChannelInfo().fromBinary(c,b)}static fromJson(c,b){return new DataChannelInfo().fromJson(c,b)}static fromJsonString(c,b){return new DataChannelInfo().fromJsonString(c,b)}static equals(c,b){return proto3.util.equals(DataChannelInfo,c,b)}}DataChannelInfo.runtime=proto3;DataChannelInfo.typeName="livekit.DataChannelInfo";DataChannelInfo.fields=proto3.util.newFieldList(()=>[{no:1,name:"label",kind:"scalar",T:9},{no:2,name:"id",kind:"scalar",T:13},{no:3,name:"target",kind:"enum",T:proto3.getEnumType(SignalTarget)}]);class SimulateScenario extends Message{constructor(c){super(),this.scenario={case:void 0},proto3.util.initPartial(c,this)}static fromBinary(c,b){return new SimulateScenario().fromBinary(c,b)}static fromJson(c,b){return new SimulateScenario().fromJson(c,b)}static fromJsonString(c,b){return new SimulateScenario().fromJsonString(c,b)}static equals(c,b){return proto3.util.equals(SimulateScenario,c,b)}}SimulateScenario.runtime=proto3;SimulateScenario.typeName="livekit.SimulateScenario";SimulateScenario.fields=proto3.util.newFieldList(()=>[{no:1,name:"speaker_update",kind:"scalar",T:5,oneof:"scenario"},{no:2,name:"node_failure",kind:"scalar",T:8,oneof:"scenario"},{no:3,name:"migration",kind:"scalar",T:8,oneof:"scenario"},{no:4,name:"server_leave",kind:"scalar",T:8,oneof:"scenario"},{no:5,name:"switch_candidate_protocol",kind:"enum",T:proto3.getEnumType(CandidateProtocol),oneof:"scenario"},{no:6,name:"subscriber_bandwidth",kind:"scalar",T:3,oneof:"scenario"},{no:7,name:"disconnect_signal_on_resume",kind:"scalar",T:8,oneof:"scenario"},{no:8,name:"disconnect_signal_on_resume_no_messages",kind:"scalar",T:8,oneof:"scenario"}]);class Ping extends Message{constructor(c){super(),this.timestamp=protoInt64.zero,this.rtt=protoInt64.zero,proto3.util.initPartial(c,this)}static fromBinary(c,b){return new Ping().fromBinary(c,b)}static fromJson(c,b){return new Ping().fromJson(c,b)}static fromJsonString(c,b){return new Ping().fromJsonString(c,b)}static equals(c,b){return proto3.util.equals(Ping,c,b)}}Ping.runtime=proto3;Ping.typeName="livekit.Ping";Ping.fields=proto3.util.newFieldList(()=>[{no:1,name:"timestamp",kind:"scalar",T:3},{no:2,name:"rtt",kind:"scalar",T:3}]);class Pong extends Message{constructor(c){super(),this.lastPingTimestamp=protoInt64.zero,this.timestamp=protoInt64.zero,proto3.util.initPartial(c,this)}static fromBinary(c,b){return new Pong().fromBinary(c,b)}static fromJson(c,b){return new Pong().fromJson(c,b)}static fromJsonString(c,b){return new Pong().fromJsonString(c,b)}static equals(c,b){return proto3.util.equals(Pong,c,b)}}Pong.runtime=proto3;Pong.typeName="livekit.Pong";Pong.fields=proto3.util.newFieldList(()=>[{no:1,name:"last_ping_timestamp",kind:"scalar",T:3},{no:2,name:"timestamp",kind:"scalar",T:3}]);class RegionSettings extends Message{constructor(c){super(),this.regions=[],proto3.util.initPartial(c,this)}static fromBinary(c,b){return new RegionSettings().fromBinary(c,b)}static fromJson(c,b){return new RegionSettings().fromJson(c,b)}static fromJsonString(c,b){return new RegionSettings().fromJsonString(c,b)}static equals(c,b){return proto3.util.equals(RegionSettings,c,b)}}RegionSettings.runtime=proto3;RegionSettings.typeName="livekit.RegionSettings";RegionSettings.fields=proto3.util.newFieldList(()=>[{no:1,name:"regions",kind:"message",T:RegionInfo,repeated:!0}]);class RegionInfo extends Message{constructor(c){super(),this.region="",this.url="",this.distance=protoInt64.zero,proto3.util.initPartial(c,this)}static fromBinary(c,b){return new RegionInfo().fromBinary(c,b)}static fromJson(c,b){return new RegionInfo().fromJson(c,b)}static fromJsonString(c,b){return new RegionInfo().fromJsonString(c,b)}static equals(c,b){return proto3.util.equals(RegionInfo,c,b)}}RegionInfo.runtime=proto3;RegionInfo.typeName="livekit.RegionInfo";RegionInfo.fields=proto3.util.newFieldList(()=>[{no:1,name:"region",kind:"scalar",T:9},{no:2,name:"url",kind:"scalar",T:9},{no:3,name:"distance",kind:"scalar",T:3}]);class SubscriptionResponse extends Message{constructor(c){super(),this.trackSid="",this.err=SubscriptionError.SE_UNKNOWN,proto3.util.initPartial(c,this)}static fromBinary(c,b){return new SubscriptionResponse().fromBinary(c,b)}static fromJson(c,b){return new SubscriptionResponse().fromJson(c,b)}static fromJsonString(c,b){return new SubscriptionResponse().fromJsonString(c,b)}static equals(c,b){return proto3.util.equals(SubscriptionResponse,c,b)}}SubscriptionResponse.runtime=proto3;SubscriptionResponse.typeName="livekit.SubscriptionResponse";SubscriptionResponse.fields=proto3.util.newFieldList(()=>[{no:1,name:"track_sid",kind:"scalar",T:9},{no:2,name:"err",kind:"enum",T:proto3.getEnumType(SubscriptionError)}]);function cloneDeep(a){if(!(typeof a>"u"))return typeof structuredClone=="function"?structuredClone(a):JSON.parse(JSON.stringify(a))}const BACKGROUND_REACTION_DELAY=5e3,recycledElements=[];var VideoQuality;(function(a){a[a.LOW=0]="LOW",a[a.MEDIUM=1]="MEDIUM",a[a.HIGH=2]="HIGH"})(VideoQuality||(VideoQuality={}));class Track extends eventsExports.EventEmitter{constructor(c,b){let _=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};var k;super(),this.attachedElements=[],this.isMuted=!1,this.streamState=Track.StreamState.Active,this.isInBackground=!1,this._currentBitrate=0,this.log=livekitLogger,this.appVisibilityChangedListener=()=>{this.backgroundTimeout&&clearTimeout(this.backgroundTimeout),document.visibilityState==="hidden"?this.backgroundTimeout=setTimeout(()=>this.handleAppVisibilityChanged(),BACKGROUND_REACTION_DELAY):this.handleAppVisibilityChanged()},this.log=getLogger((k=_.loggerName)!==null&&k!==void 0?k:LoggerNames.Track),this.loggerContextCb=_.loggerContextCb,this.setMaxListeners(100),this.kind=b,this._mediaStreamTrack=c,this._mediaStreamID=c.id,this.source=Track.Source.Unknown}get logContext(){var c;return Object.assign(Object.assign({},(c=this.loggerContextCb)===null||c===void 0?void 0:c.call(this)),getLogContextFromTrack(this))}get currentBitrate(){return this._currentBitrate}get mediaStreamTrack(){return this._mediaStreamTrack}get mediaStreamID(){return this._mediaStreamID}attach(c){let b="audio";this.kind===Track.Kind.Video&&(b="video"),this.attachedElements.length===0&&Track.Kind.Video&&this.addAppVisibilityListener(),c||(b==="audio"&&(recycledElements.forEach(j=>{j.parentElement===null&&!c&&(c=j)}),c&&recycledElements.splice(recycledElements.indexOf(c),1)),c||(c=document.createElement(b))),this.attachedElements.includes(c)||this.attachedElements.push(c),attachToElement(this.mediaStreamTrack,c);const _=c.srcObject.getTracks(),k=_.some(j=>j.kind==="audio");return c.play().then(()=>{this.emit(k?TrackEvent.AudioPlaybackStarted:TrackEvent.VideoPlaybackStarted)}).catch(j=>{j.name==="NotAllowedError"?this.emit(k?TrackEvent.AudioPlaybackFailed:TrackEvent.VideoPlaybackFailed,j):j.name==="AbortError"?livekitLogger.debug("".concat(k?"audio":"video"," playback aborted, likely due to new play request")):livekitLogger.warn("could not playback ".concat(k?"audio":"video"),j),k&&c&&_.some(_e=>_e.kind==="video")&&j.name==="NotAllowedError"&&(c.muted=!0,c.play().catch(()=>{}))}),this.emit(TrackEvent.ElementAttached,c),c}detach(c){try{if(c){detachTrack(this.mediaStreamTrack,c);const _=this.attachedElements.indexOf(c);return _>=0&&(this.attachedElements.splice(_,1),this.recycleElement(c),this.emit(TrackEvent.ElementDetached,c)),c}const b=[];return this.attachedElements.forEach(_=>{detachTrack(this.mediaStreamTrack,_),b.push(_),this.recycleElement(_),this.emit(TrackEvent.ElementDetached,_)}),this.attachedElements=[],b}finally{this.attachedElements.length===0&&this.removeAppVisibilityListener()}}stop(){this.stopMonitor(),this._mediaStreamTrack.stop()}enable(){this._mediaStreamTrack.enabled=!0}disable(){this._mediaStreamTrack.enabled=!1}stopMonitor(){this.monitorInterval&&clearInterval(this.monitorInterval)}updateLoggerOptions(c){c.loggerName&&(this.log=getLogger(c.loggerName)),c.loggerContextCb&&(this.loggerContextCb=c.loggerContextCb)}recycleElement(c){if(c instanceof HTMLAudioElement){let b=!0;c.pause(),recycledElements.forEach(_=>{_.parentElement||(b=!1)}),b&&recycledElements.push(c)}}handleAppVisibilityChanged(){return __awaiter(this,void 0,void 0,function*(){this.isInBackground=document.visibilityState==="hidden"})}addAppVisibilityListener(){isWeb()?(this.isInBackground=document.visibilityState==="hidden",document.addEventListener("visibilitychange",this.appVisibilityChangedListener)):this.isInBackground=!1}removeAppVisibilityListener(){isWeb()&&document.removeEventListener("visibilitychange",this.appVisibilityChangedListener)}}function attachToElement(a,c){let b;c.srcObject instanceof MediaStream?b=c.srcObject:b=new MediaStream;let _;a.kind==="audio"?_=b.getAudioTracks():_=b.getVideoTracks(),_.includes(a)||(_.forEach(k=>{b.removeTrack(k)}),b.addTrack(a)),(!isSafari()||!(c instanceof HTMLVideoElement))&&(c.autoplay=!0),c.muted=b.getAudioTracks().length===0,c instanceof HTMLVideoElement&&(c.playsInline=!0),c.srcObject!==b&&(c.srcObject=b,(isSafari()||isFireFox())&&c instanceof HTMLVideoElement&&setTimeout(()=>{c.srcObject=b,c.play().catch(()=>{})},0))}function detachTrack(a,c){if(c.srcObject instanceof MediaStream){const b=c.srcObject;b.removeTrack(a),b.getTracks().length>0?c.srcObject=b:c.srcObject=null}}(function(a){let c;(function(it){it.Audio="audio",it.Video="video",it.Unknown="unknown"})(c=a.Kind||(a.Kind={}));let b;(function(it){it.Camera="camera",it.Microphone="microphone",it.ScreenShare="screen_share",it.ScreenShareAudio="screen_share_audio",it.Unknown="unknown"})(b=a.Source||(a.Source={}));let _;(function(it){it.Active="active",it.Paused="paused",it.Unknown="unknown"})(_=a.StreamState||(a.StreamState={}));function k(it){switch(it){case c.Audio:return TrackType.AUDIO;case c.Video:return TrackType.VIDEO;default:return TrackType.DATA}}a.kindToProto=k;function j(it){switch(it){case TrackType.AUDIO:return c.Audio;case TrackType.VIDEO:return c.Video;default:return c.Unknown}}a.kindFromProto=j;function _e(it){switch(it){case b.Camera:return TrackSource.CAMERA;case b.Microphone:return TrackSource.MICROPHONE;case b.ScreenShare:return TrackSource.SCREEN_SHARE;case b.ScreenShareAudio:return TrackSource.SCREEN_SHARE_AUDIO;default:return TrackSource.UNKNOWN}}a.sourceToProto=_e;function et(it){switch(it){case TrackSource.CAMERA:return b.Camera;case TrackSource.MICROPHONE:return b.Microphone;case TrackSource.SCREEN_SHARE:return b.ScreenShare;case TrackSource.SCREEN_SHARE_AUDIO:return b.ScreenShareAudio;default:return b.Unknown}}a.sourceFromProto=et;function nt(it){switch(it){case StreamState.ACTIVE:return _.Active;case StreamState.PAUSED:return _.Paused;default:return _.Unknown}}a.streamStateFromProto=nt})(Track||(Track={}));function mergeDefaultOptions(a,c,b){var _;const k=(_=cloneDeep(a))!==null&&_!==void 0?_:{};return k.audio===!0&&(k.audio={}),k.video===!0&&(k.video={}),k.audio&&mergeObjectWithoutOverwriting(k.audio,c),k.video&&mergeObjectWithoutOverwriting(k.video,b),k}function mergeObjectWithoutOverwriting(a,c){return Object.keys(c).forEach(b=>{a[b]===void 0&&(a[b]=c[b])}),a}function constraintsForOptions(a){const c={};if(a.video)if(typeof a.video=="object"){const b={},_=b,k=a.video;Object.keys(k).forEach(j=>{switch(j){case"resolution":mergeObjectWithoutOverwriting(_,k.resolution);break;default:_[j]=k[j]}}),c.video=b}else c.video=a.video;else c.video=!1;return a.audio?typeof a.audio=="object"?c.audio=a.audio:c.audio=!0:c.audio=!1,c}function detectSilence(a){let c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:200;return __awaiter(this,void 0,void 0,function*(){const b=getNewAudioContext();if(b){const _=b.createAnalyser();_.fftSize=2048;const k=_.frequencyBinCount,j=new Uint8Array(k);b.createMediaStreamSource(new MediaStream([a.mediaStreamTrack])).connect(_),yield sleep(c),_.getByteTimeDomainData(j);const et=j.some(nt=>nt!==128&&nt!==0);return b.close(),!et}return!1})}function getNewAudioContext(){const a=typeof window<"u"&&(window.AudioContext||window.webkitAudioContext);if(a)return new a({latencyHint:"interactive"})}function sourceToKind(a){return a===Track.Source.Microphone?"audioinput":a===Track.Source.Camera?"videoinput":void 0}function screenCaptureToDisplayMediaStreamOptions(a){var c,b;let _=(c=a.video)!==null&&c!==void 0?c:!0;return a.resolution&&a.resolution.width>0&&a.resolution.height>0&&(_=typeof _=="boolean"?{}:_,isSafari()?_=Object.assign(Object.assign({},_),{width:{max:a.resolution.width},height:{max:a.resolution.height},frameRate:a.resolution.frameRate}):_=Object.assign(Object.assign({},_),{width:{ideal:a.resolution.width},height:{ideal:a.resolution.height},frameRate:a.resolution.frameRate})),{audio:(b=a.audio)!==null&&b!==void 0?b:!1,video:_,controller:a.controller,selfBrowserSurface:a.selfBrowserSurface,surfaceSwitching:a.surfaceSwitching,systemAudio:a.systemAudio}}function mimeTypeToVideoCodecString(a){const c=a.split("/")[1].toLowerCase();if(!videoCodecs.includes(c))throw Error("Video codec not supported: ".concat(c));return c}function getTrackPublicationInfo(a){const c=[];return a.forEach(b=>{b.track!==void 0&&c.push(new TrackPublishedResponse({cid:b.track.mediaStreamID,track:b.trackInfo}))}),c}function getLogContextFromTrack(a){return a instanceof Track?{trackSid:a.sid,trackSource:a.source,trackMuted:a.isMuted,trackEnabled:a.mediaStreamTrack.enabled,trackKind:a.kind}:{trackSid:a.trackSid,trackName:a.trackName,track:a.track?getLogContextFromTrack(a.track):void 0,trackEnabled:a.isEnabled,trackEncrypted:a.isEncrypted,trackMimeType:a.mimeType}}const separator="|",ddExtensionURI="https://aomediacodec.github.io/av1-rtp-spec/#dependency-descriptor-rtp-header-extension";function unpackStreamId(a){const c=a.split(separator);return c.length>1?[c[0],a.substr(c[0].length+1)]:[a,""]}function sleep(a){return __awaiter(this,void 0,void 0,function*(){return new Promise(c=>CriticalTimers.setTimeout(c,a))})}function supportsTransceiver(){return"addTransceiver"in RTCPeerConnection.prototype}function supportsAddTrack(){return"addTrack"in RTCPeerConnection.prototype}function supportsAV1(){if(!("getCapabilities"in RTCRtpSender)||isSafari())return!1;const a=RTCRtpSender.getCapabilities("video");let c=!1;if(a){for(const b of a.codecs)if(b.mimeType==="video/AV1"){c=!0;break}}return c}function supportsVP9(){if(!("getCapabilities"in RTCRtpSender)||isFireFox())return!1;if(isSafari()){const b=getBrowser();if(b!=null&&b.version&&compareVersions(b.version,"16")<0)return!1}const a=RTCRtpSender.getCapabilities("video");let c=!1;if(a){for(const b of a.codecs)if(b.mimeType==="video/VP9"){c=!0;break}}return c}function isSVCCodec(a){return a==="av1"||a==="vp9"}function supportsSetSinkId(a){return document?(a||(a=document.createElement("audio")),"setSinkId"in a):!1}const setCodecPreferencesVersions={Chrome:"100",Safari:"15",Firefox:"100"};function supportsSetCodecPreferences(a){if(!isWeb()||!("setCodecPreferences"in a))return!1;const c=getBrowser();if(!(c!=null&&c.name)||!c.version)return!1;const b=setCodecPreferencesVersions[c.name];return b?compareVersions(c.version,b)>=0:!1}function isFireFox(){var a;return((a=getBrowser())===null||a===void 0?void 0:a.name)==="Firefox"}function isSafari(){var a;return((a=getBrowser())===null||a===void 0?void 0:a.name)==="Safari"}function isSafari17(){const a=getBrowser();return(a==null?void 0:a.name)==="Safari"&&a.version.startsWith("17.")}function isMobile(){return isWeb()?/Tablet|iPad|Mobile|Android|BlackBerry/.test(navigator.userAgent):!1}function isWeb(){return typeof document<"u"}function isReactNative(){return navigator.product=="ReactNative"}function isCloud(a){return a.hostname.endsWith(".livekit.cloud")||a.hostname.endsWith(".livekit.run")}function getLKReactNativeInfo(){if(global&&global.LiveKitReactNativeGlobal)return global.LiveKitReactNativeGlobal}function getReactNativeOs(){if(!isReactNative())return;let a=getLKReactNativeInfo();if(a)return a.platform}function getDevicePixelRatio(){if(isWeb())return window.devicePixelRatio;if(isReactNative()){let a=getLKReactNativeInfo();if(a)return a.devicePixelRatio}return 1}function compareVersions(a,c){const b=a.split("."),_=c.split("."),k=Math.min(b.length,_.length);for(let j=0;j<k;++j){const _e=parseInt(b[j],10),et=parseInt(_[j],10);if(_e>et)return 1;if(_e<et)return-1;if(j===k-1&&_e===et)return 0}return a===""&&c!==""?-1:c===""?1:b.length==_.length?0:b.length<_.length?-1:1}function roDispatchCallback(a){for(const c of a)c.target.handleResize(c)}function ioDispatchCallback(a){for(const c of a)c.target.handleVisibilityChanged(c)}let resizeObserver=null;const getResizeObserver=()=>(resizeObserver||(resizeObserver=new ResizeObserver(roDispatchCallback)),resizeObserver);let intersectionObserver=null;const getIntersectionObserver=()=>(intersectionObserver||(intersectionObserver=new IntersectionObserver(ioDispatchCallback,{root:null,rootMargin:"0px"})),intersectionObserver);function getClientInfo(){var a;const c=new ClientInfo({sdk:ClientInfo_SDK.JS,protocol:protocolVersion,version});return isReactNative()&&(c.os=(a=getReactNativeOs())!==null&&a!==void 0?a:""),c}function createDummyVideoStreamTrack(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:16,c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:16,b=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,_=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;const k=document.createElement("canvas");k.width=a,k.height=c;const j=k.getContext("2d");j==null||j.fillRect(0,0,k.width,k.height),_&&j&&(j.beginPath(),j.arc(a/2,c/2,50,0,Math.PI*2,!0),j.closePath(),j.fillStyle="grey",j.fill());const _e=k.captureStream(),[et]=_e.getTracks();if(!et)throw Error("Could not get empty media stream video track");return et.enabled=b,et}let emptyAudioStreamTrack;function getEmptyAudioStreamTrack(){if(!emptyAudioStreamTrack){const a=new AudioContext,c=a.createOscillator(),b=a.createGain();b.gain.setValueAtTime(0,0);const _=a.createMediaStreamDestination();if(c.connect(b),b.connect(_),c.start(),[emptyAudioStreamTrack]=_.stream.getAudioTracks(),!emptyAudioStreamTrack)throw Error("Could not get empty media stream audio track");emptyAudioStreamTrack.enabled=!1}return emptyAudioStreamTrack.clone()}class Future{constructor(c,b){this.onFinally=b,this.promise=new Promise((_,k)=>__awaiter(this,void 0,void 0,function*(){this.resolve=_,this.reject=k,c&&(yield c(_,k))})).finally(()=>{var _;return(_=this.onFinally)===null||_===void 0?void 0:_.call(this)})}}class Mutex{constructor(){this._locking=Promise.resolve(),this._locks=0}isLocked(){return this._locks>0}lock(){this._locks+=1;let c;const b=new Promise(k=>c=()=>{this._locks-=1,k()}),_=this._locking.then(()=>c);return this._locking=this._locking.then(()=>b),_}}function isVideoCodec(a){return videoCodecs.includes(a)}function unwrapConstraint(a){if(typeof a=="string")return a;if(Array.isArray(a))return a[0];if(a.exact)return Array.isArray(a.exact)?a.exact[0]:a.exact;if(a.ideal)return Array.isArray(a.ideal)?a.ideal[0]:a.ideal;throw Error("could not unwrap constraint")}function toWebsocketUrl(a){return a.startsWith("http")?a.replace(/^(http)/,"ws"):a}function toHttpUrl(a){return a.startsWith("ws")?a.replace(/^(ws)/,"http"):a}const defaultId="default";class DeviceManager{static getInstance(){return this.instance===void 0&&(this.instance=new DeviceManager),this.instance}getDevices(c){let b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;var _;return __awaiter(this,void 0,void 0,function*(){if(((_=DeviceManager.userMediaPromiseMap)===null||_===void 0?void 0:_.size)>0){livekitLogger.debug("awaiting getUserMedia promise");try{c?yield DeviceManager.userMediaPromiseMap.get(c):yield Promise.all(DeviceManager.userMediaPromiseMap.values())}catch{livekitLogger.warn("error waiting for media permissons")}}let k=yield navigator.mediaDevices.enumerateDevices();if(b&&!(isSafari()&&this.hasDeviceInUse(c))&&(k.length===0||k.some(_e=>{const et=_e.label==="",nt=c?_e.kind===c:!0;return et&&nt}))){const _e={video:c!=="audioinput"&&c!=="audiooutput",audio:c!=="videoinput"},et=yield navigator.mediaDevices.getUserMedia(_e);k=yield navigator.mediaDevices.enumerateDevices(),et.getTracks().forEach(nt=>{nt.stop()})}return c&&(k=k.filter(j=>j.kind===c)),k})}normalizeDeviceId(c,b,_){return __awaiter(this,void 0,void 0,function*(){if(b!==defaultId)return b;const j=(yield this.getDevices(c)).find(_e=>_e.groupId===_&&_e.deviceId!==defaultId);return j==null?void 0:j.deviceId})}hasDeviceInUse(c){return c?DeviceManager.userMediaPromiseMap.has(c):DeviceManager.userMediaPromiseMap.size>0}}DeviceManager.mediaDeviceKinds=["audioinput","audiooutput","videoinput"];DeviceManager.userMediaPromiseMap=new Map;const defaultDimensionsTimeout=1e3;class LocalTrack extends Track{get constraints(){return this._constraints}constructor(c,b,_){let k=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,j=arguments.length>4?arguments[4]:void 0;super(c,b,j),this._isUpstreamPaused=!1,this.handleTrackMuteEvent=()=>this.debouncedTrackMuteHandler().catch(()=>this.log.debug("track mute bounce got cancelled by an unmute event",this.logContext)),this.debouncedTrackMuteHandler=r$1(()=>__awaiter(this,void 0,void 0,function*(){yield this.pauseUpstream()}),5e3),this.handleTrackUnmuteEvent=()=>__awaiter(this,void 0,void 0,function*(){this.debouncedTrackMuteHandler.cancel("unmute"),yield this.resumeUpstream()}),this.handleEnded=()=>{this.isInBackground&&(this.reacquireTrack=!0),this._mediaStreamTrack.removeEventListener("mute",this.handleTrackMuteEvent),this._mediaStreamTrack.removeEventListener("unmute",this.handleTrackUnmuteEvent),this.emit(TrackEvent.Ended,this)},this.reacquireTrack=!1,this.providedByUser=k,this.muteLock=new Mutex,this.pauseUpstreamLock=new Mutex,this.processorLock=new Mutex,this.setMediaStreamTrack(c,!0),this._constraints=c.getConstraints(),_&&(this._constraints=_)}get id(){return this._mediaStreamTrack.id}get dimensions(){if(this.kind!==Track.Kind.Video)return;const{width:c,height:b}=this._mediaStreamTrack.getSettings();if(c&&b)return{width:c,height:b}}get isUpstreamPaused(){return this._isUpstreamPaused}get isUserProvided(){return this.providedByUser}get mediaStreamTrack(){var c,b;return(b=(c=this.processor)===null||c===void 0?void 0:c.processedTrack)!==null&&b!==void 0?b:this._mediaStreamTrack}setMediaStreamTrack(c,b){return __awaiter(this,void 0,void 0,function*(){if(c===this._mediaStreamTrack&&!b)return;this._mediaStreamTrack&&(this.attachedElements.forEach(k=>{detachTrack(this._mediaStreamTrack,k)}),this.debouncedTrackMuteHandler.cancel("new-track"),this._mediaStreamTrack.removeEventListener("ended",this.handleEnded),this._mediaStreamTrack.removeEventListener("mute",this.handleTrackMuteEvent),this._mediaStreamTrack.removeEventListener("unmute",this.handleTrackUnmuteEvent)),this.mediaStream=new MediaStream([c]),c&&(c.addEventListener("ended",this.handleEnded),c.addEventListener("mute",this.handleTrackMuteEvent),c.addEventListener("unmute",this.handleTrackUnmuteEvent),this._constraints=c.getConstraints());let _;if(this.processor&&c&&this.processorElement){if(this.log.debug("restarting processor",this.logContext),this.kind==="unknown")throw TypeError("cannot set processor on track of unknown kind");attachToElement(c,this.processorElement),this.processorElement.muted=!0,yield this.processor.restart({track:c,kind:this.kind,element:this.processorElement}),_=this.processor.processedTrack}this.sender&&(yield this.sender.replaceTrack(_??c)),!this.providedByUser&&this._mediaStreamTrack!==c&&this._mediaStreamTrack.stop(),this._mediaStreamTrack=c,c&&(this._mediaStreamTrack.enabled=!this.isMuted,yield this.resumeUpstream(),this.attachedElements.forEach(k=>{attachToElement(_??c,k)}))})}waitForDimensions(){let c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:defaultDimensionsTimeout;var b;return __awaiter(this,void 0,void 0,function*(){if(this.kind===Track.Kind.Audio)throw new Error("cannot get dimensions for audio tracks");((b=getBrowser())===null||b===void 0?void 0:b.os)==="iOS"&&(yield sleep(10));const _=Date.now();for(;Date.now()-_<c;){const k=this.dimensions;if(k)return k;yield sleep(50)}throw new TrackInvalidError("unable to get track dimensions after timeout")})}getDeviceId(){return __awaiter(this,void 0,void 0,function*(){if(this.source===Track.Source.ScreenShare)return;const{deviceId:c,groupId:b}=this._mediaStreamTrack.getSettings(),_=this.kind===Track.Kind.Audio?"audioinput":"videoinput";return DeviceManager.getInstance().normalizeDeviceId(_,c,b)})}mute(){return __awaiter(this,void 0,void 0,function*(){return this.setTrackMuted(!0),this})}unmute(){return __awaiter(this,void 0,void 0,function*(){return this.setTrackMuted(!1),this})}replaceTrack(c){let b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return __awaiter(this,void 0,void 0,function*(){if(!this.sender)throw new TrackInvalidError("unable to replace an unpublished track");return this.log.debug("replace MediaStreamTrack",this.logContext),yield this.setMediaStreamTrack(c),this.providedByUser=b,this.processor&&(yield this.stopProcessor()),this})}restart(c){return __awaiter(this,void 0,void 0,function*(){c||(c=this._constraints),this.log.debug("restarting track with constraints",Object.assign(Object.assign({},this.logContext),{constraints:c}));const b={audio:!1,video:!1};this.kind===Track.Kind.Video?b.video=c:b.audio=c,this.attachedElements.forEach(j=>{detachTrack(this.mediaStreamTrack,j)}),this._mediaStreamTrack.removeEventListener("ended",this.handleEnded),this._mediaStreamTrack.stop();const k=(yield navigator.mediaDevices.getUserMedia(b)).getTracks()[0];return k.addEventListener("ended",this.handleEnded),this.log.debug("re-acquired MediaStreamTrack",this.logContext),yield this.setMediaStreamTrack(k),this._constraints=c,this.emit(TrackEvent.Restarted,this),this})}setTrackMuted(c){this.log.debug("setting ".concat(this.kind," track ").concat(c?"muted":"unmuted"),this.logContext),!(this.isMuted===c&&this._mediaStreamTrack.enabled!==c)&&(this.isMuted=c,this._mediaStreamTrack.enabled=!c,this.emit(c?TrackEvent.Muted:TrackEvent.Unmuted,this))}get needsReAcquisition(){return this._mediaStreamTrack.readyState!=="live"||this._mediaStreamTrack.muted||!this._mediaStreamTrack.enabled||this.reacquireTrack}handleAppVisibilityChanged(){const c=Object.create(null,{handleAppVisibilityChanged:{get:()=>super.handleAppVisibilityChanged}});return __awaiter(this,void 0,void 0,function*(){yield c.handleAppVisibilityChanged.call(this),isMobile()&&(this.log.debug("visibility changed, is in Background: ".concat(this.isInBackground),this.logContext),!this.isInBackground&&this.needsReAcquisition&&!this.isUserProvided&&!this.isMuted&&(this.log.debug("track needs to be reacquired, restarting ".concat(this.source),this.logContext),yield this.restart(),this.reacquireTrack=!1))})}stop(){var c;super.stop(),this._mediaStreamTrack.removeEventListener("ended",this.handleEnded),this._mediaStreamTrack.removeEventListener("mute",this.handleTrackMuteEvent),this._mediaStreamTrack.removeEventListener("unmute",this.handleTrackUnmuteEvent),(c=this.processor)===null||c===void 0||c.destroy(),this.processor=void 0}pauseUpstream(){return __awaiter(this,void 0,void 0,function*(){const c=yield this.pauseUpstreamLock.lock();try{if(this._isUpstreamPaused===!0)return;if(!this.sender){this.log.warn("unable to pause upstream for an unpublished track",this.logContext);return}this._isUpstreamPaused=!0,this.emit(TrackEvent.UpstreamPaused,this);const b=getBrowser();if((b==null?void 0:b.name)==="Safari"&&compareVersions(b.version,"12.0")<0)throw new DeviceUnsupportedError("pauseUpstream is not supported on Safari < 12.");yield this.sender.replaceTrack(null)}finally{c()}})}resumeUpstream(){return __awaiter(this,void 0,void 0,function*(){const c=yield this.pauseUpstreamLock.lock();try{if(this._isUpstreamPaused===!1)return;if(!this.sender){this.log.warn("unable to resume upstream for an unpublished track",this.logContext);return}this._isUpstreamPaused=!1,this.emit(TrackEvent.UpstreamResumed,this),yield this.sender.replaceTrack(this._mediaStreamTrack)}finally{c()}})}getRTCStatsReport(){var c;return __awaiter(this,void 0,void 0,function*(){return!((c=this.sender)===null||c===void 0)&&c.getStats?yield this.sender.getStats():void 0})}setProcessor(c){let b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;var _,k;return __awaiter(this,void 0,void 0,function*(){const j=yield this.processorLock.lock();try{if(this.log.debug("setting up processor",this.logContext),this.processor&&(yield this.stopProcessor()),this.kind==="unknown")throw TypeError("cannot set processor on track of unknown kind");this.processorElement=(_=this.processorElement)!==null&&_!==void 0?_:document.createElement(this.kind),attachToElement(this._mediaStreamTrack,this.processorElement),this.processorElement.muted=!0,this.processorElement.play().catch(et=>this.log.error("failed to play processor element",Object.assign(Object.assign({},this.logContext),{error:et})));const _e={kind:this.kind,track:this._mediaStreamTrack,element:this.processorElement};if(yield c.init(_e),this.processor=c,this.processor.processedTrack){for(const et of this.attachedElements)et!==this.processorElement&&b&&(detachTrack(this._mediaStreamTrack,et),attachToElement(this.processor.processedTrack,et));yield(k=this.sender)===null||k===void 0?void 0:k.replaceTrack(this.processor.processedTrack)}}finally{j()}})}getProcessor(){return this.processor}stopProcessor(){var c,b;return __awaiter(this,void 0,void 0,function*(){this.processor&&(this.log.debug("stopping processor",this.logContext),(c=this.processor.processedTrack)===null||c===void 0||c.stop(),yield this.processor.destroy(),this.processor=void 0,(b=this.processorElement)===null||b===void 0||b.remove(),this.processorElement=void 0,yield this.restart())})}}class E2EEManager extends eventsExports.EventEmitter{constructor(c){super(),this.onWorkerMessage=b=>{var _,k;const{kind:j,data:_e}=b.data;switch(j){case"error":livekitLogger.error(_e.error.message),this.emit(EncryptionEvent.EncryptionError,_e.error);break;case"initAck":_e.enabled&&this.keyProvider.getKeys().forEach(et=>{this.postKey(et)});break;case"enable":if(this.encryptionEnabled!==_e.enabled&&_e.participantIdentity===((_=this.room)===null||_===void 0?void 0:_.localParticipant.identity))this.emit(EncryptionEvent.ParticipantEncryptionStatusChanged,_e.enabled,this.room.localParticipant),this.encryptionEnabled=_e.enabled;else if(_e.participantIdentity){const et=(k=this.room)===null||k===void 0?void 0:k.getParticipantByIdentity(_e.participantIdentity);if(!et)throw TypeError("couldn't set encryption status, participant not found".concat(_e.participantIdentity));this.emit(EncryptionEvent.ParticipantEncryptionStatusChanged,_e.enabled,et)}this.encryptionEnabled&&this.keyProvider.getKeys().forEach(et=>{this.postKey(et)});break;case"ratchetKey":this.keyProvider.emit(KeyProviderEvent.KeyRatcheted,_e.material,_e.keyIndex);break}},this.onWorkerError=b=>{livekitLogger.error("e2ee worker encountered an error:",{error:b.error}),this.emit(EncryptionEvent.EncryptionError,b.error)},this.keyProvider=c.keyProvider,this.worker=c.worker,this.encryptionEnabled=!1}setup(c){if(!isE2EESupported())throw new DeviceUnsupportedError("tried to setup end-to-end encryption on an unsupported browser");if(livekitLogger.info("setting up e2ee"),c!==this.room){this.room=c,this.setupEventListeners(c,this.keyProvider);const b={kind:"init",data:{keyProviderOptions:this.keyProvider.getOptions()}};this.worker&&(livekitLogger.info("initializing worker",{worker:this.worker}),this.worker.onmessage=this.onWorkerMessage,this.worker.onerror=this.onWorkerError,this.worker.postMessage(b))}}setParticipantCryptorEnabled(c,b){livekitLogger.debug("set e2ee to ".concat(c," for participant ").concat(b)),this.postEnable(c,b)}setSifTrailer(c){!c||c.length===0?livekitLogger.warn("ignoring server sent trailer as it's empty"):this.postSifTrailer(c)}setupEngine(c){c.on(EngineEvent.RTPVideoMapUpdate,b=>{this.postRTPMap(b)})}setupEventListeners(c,b){c.on(RoomEvent.TrackPublished,(_,k)=>this.setParticipantCryptorEnabled(_.trackInfo.encryption!==Encryption_Type.NONE,k.identity)),c.on(RoomEvent.ConnectionStateChanged,_=>{_===ConnectionState.Connected&&c.remoteParticipants.forEach(k=>{k.trackPublications.forEach(j=>{this.setParticipantCryptorEnabled(j.trackInfo.encryption!==Encryption_Type.NONE,k.identity)})})}).on(RoomEvent.TrackUnsubscribed,(_,k,j)=>{var _e;const et={kind:"removeTransform",data:{participantIdentity:j.identity,trackId:_.mediaStreamID}};(_e=this.worker)===null||_e===void 0||_e.postMessage(et)}).on(RoomEvent.TrackSubscribed,(_,k,j)=>{this.setupE2EEReceiver(_,j.identity,k.trackInfo)}).on(RoomEvent.SignalConnected,()=>{if(!this.room)throw new TypeError("expected room to be present on signal connect");this.setParticipantCryptorEnabled(this.room.localParticipant.isE2EEEnabled,this.room.localParticipant.identity),b.getKeys().forEach(_=>{this.postKey(_)})}),c.localParticipant.on(ParticipantEvent.LocalTrackPublished,_=>__awaiter(this,void 0,void 0,function*(){this.setupE2EESender(_.track,_.track.sender)})),b.on(KeyProviderEvent.SetKey,_=>this.postKey(_)).on(KeyProviderEvent.RatchetRequest,(_,k)=>this.postRatchetRequest(_,k))}postRatchetRequest(c,b){if(!this.worker)throw Error("could not ratchet key, worker is missing");const _={kind:"ratchetRequest",data:{participantIdentity:c,keyIndex:b}};this.worker.postMessage(_)}postKey(c){let{key:b,participantIdentity:_,keyIndex:k}=c;var j;if(!this.worker)throw Error("could not set key, worker is missing");const _e={kind:"setKey",data:{participantIdentity:_,isPublisher:_===((j=this.room)===null||j===void 0?void 0:j.localParticipant.identity),key:b,keyIndex:k}};this.worker.postMessage(_e)}postEnable(c,b){if(this.worker){const _={kind:"enable",data:{enabled:c,participantIdentity:b}};this.worker.postMessage(_)}else throw new ReferenceError("failed to enable e2ee, worker is not ready")}postRTPMap(c){var b;if(!this.worker)throw TypeError("could not post rtp map, worker is missing");if(!(!((b=this.room)===null||b===void 0)&&b.localParticipant.identity))throw TypeError("could not post rtp map, local participant identity is missing");const _={kind:"setRTPMap",data:{map:c,participantIdentity:this.room.localParticipant.identity}};this.worker.postMessage(_)}postSifTrailer(c){if(!this.worker)throw Error("could not post SIF trailer, worker is missing");const b={kind:"setSifTrailer",data:{trailer:c}};this.worker.postMessage(b)}setupE2EEReceiver(c,b,_){if(c.receiver){if(!(_!=null&&_.mimeType)||_.mimeType==="")throw new TypeError("MimeType missing from trackInfo, cannot set up E2EE cryptor");this.handleReceiver(c.receiver,c.mediaStreamID,b,c.kind==="video"?mimeTypeToVideoCodecString(_.mimeType):void 0)}}setupE2EESender(c,b){if(!(c instanceof LocalTrack)||!b){b||livekitLogger.warn("early return because sender is not ready");return}this.handleSender(b,c.mediaStreamID,void 0)}handleReceiver(c,b,_,k){return __awaiter(this,void 0,void 0,function*(){if(this.worker){if(isScriptTransformSupported()){const j={kind:"decode",participantIdentity:_,trackId:b,codec:k};c.transform=new RTCRtpScriptTransform(this.worker,j)}else{if(E2EE_FLAG in c&&k){const nt={kind:"updateCodec",data:{trackId:b,codec:k,participantIdentity:_}};this.worker.postMessage(nt);return}let j=c.writableStream,_e=c.readableStream;if(!j||!_e){const nt=c.createEncodedStreams();c.writableStream=nt.writable,j=nt.writable,c.readableStream=nt.readable,_e=nt.readable}const et={kind:"decode",data:{readableStream:_e,writableStream:j,trackId:b,codec:k,participantIdentity:_}};this.worker.postMessage(et,[_e,j])}c[E2EE_FLAG]=!0}})}handleSender(c,b,_){var k;if(!(E2EE_FLAG in c||!this.worker)){if(!(!((k=this.room)===null||k===void 0)&&k.localParticipant.identity)||this.room.localParticipant.identity==="")throw TypeError("local identity needs to be known in order to set up encrypted sender");if(isScriptTransformSupported()){livekitLogger.info("initialize script transform");const j={kind:"encode",participantIdentity:this.room.localParticipant.identity,trackId:b,codec:_};c.transform=new RTCRtpScriptTransform(this.worker,j)}else{livekitLogger.info("initialize encoded streams");const j=c.createEncodedStreams(),_e={kind:"encode",data:{readableStream:j.readable,writableStream:j.writable,codec:_,trackId:b,participantIdentity:this.room.localParticipant.identity}};this.worker.postMessage(_e,[j.readable,j.writable])}c[E2EE_FLAG]=!0}}}var QueueTaskStatus;(function(a){a[a.WAITING=0]="WAITING",a[a.RUNNING=1]="RUNNING",a[a.COMPLETED=2]="COMPLETED"})(QueueTaskStatus||(QueueTaskStatus={}));class AsyncQueue{constructor(){this.pendingTasks=new Map,this.taskMutex=new Mutex,this.nextTaskIndex=0}run(c){return __awaiter(this,void 0,void 0,function*(){const b={id:this.nextTaskIndex++,enqueuedAt:Date.now(),status:QueueTaskStatus.WAITING};this.pendingTasks.set(b.id,b);const _=yield this.taskMutex.lock();try{return b.executedAt=Date.now(),b.status=QueueTaskStatus.RUNNING,yield c()}finally{b.status=QueueTaskStatus.COMPLETED,this.pendingTasks.delete(b.id),_()}})}flush(){return __awaiter(this,void 0,void 0,function*(){return this.run(()=>__awaiter(this,void 0,void 0,function*(){}))})}snapshot(){return Array.from(this.pendingTasks.values())}}const passThroughQueueSignals=["syncState","trickle","offer","answer","simulate","leave"];function canPassThroughQueue(a){const c=passThroughQueueSignals.indexOf(a.case)>=0;return livekitLogger.trace("request allowed to bypass queue:",{canPass:c,req:a}),c}var SignalConnectionState;(function(a){a[a.CONNECTING=0]="CONNECTING",a[a.CONNECTED=1]="CONNECTED",a[a.RECONNECTING=2]="RECONNECTING",a[a.DISCONNECTING=3]="DISCONNECTING",a[a.DISCONNECTED=4]="DISCONNECTED"})(SignalConnectionState||(SignalConnectionState={}));class SignalClient{get currentState(){return this.state}get isDisconnected(){return this.state===SignalConnectionState.DISCONNECTING||this.state===SignalConnectionState.DISCONNECTED}get isEstablishingConnection(){return this.state===SignalConnectionState.CONNECTING||this.state===SignalConnectionState.RECONNECTING}constructor(){let c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};var _;this.rtt=0,this.state=SignalConnectionState.DISCONNECTED,this.log=livekitLogger,this.resetCallbacks=()=>{this.onAnswer=void 0,this.onLeave=void 0,this.onLocalTrackPublished=void 0,this.onLocalTrackUnpublished=void 0,this.onNegotiateRequested=void 0,this.onOffer=void 0,this.onRemoteMuteChanged=void 0,this.onSubscribedQualityUpdate=void 0,this.onTokenRefresh=void 0,this.onTrickle=void 0,this.onClose=void 0},this.log=getLogger((_=b.loggerName)!==null&&_!==void 0?_:LoggerNames.Signal),this.loggerContextCb=b.loggerContextCb,this.useJSON=c,this.requestQueue=new AsyncQueue,this.queuedRequests=[],this.closingLock=new Mutex,this.connectionLock=new Mutex,this.state=SignalConnectionState.DISCONNECTED}get logContext(){var c,b;return(b=(c=this.loggerContextCb)===null||c===void 0?void 0:c.call(this))!==null&&b!==void 0?b:{}}join(c,b,_,k){return __awaiter(this,void 0,void 0,function*(){return this.state=SignalConnectionState.CONNECTING,this.options=_,yield this.connect(c,b,_,k)})}reconnect(c,b,_,k){return __awaiter(this,void 0,void 0,function*(){if(!this.options){this.log.warn("attempted to reconnect without signal options being set, ignoring",this.logContext);return}return this.state=SignalConnectionState.RECONNECTING,this.clearPingInterval(),yield this.connect(c,b,Object.assign(Object.assign({},this.options),{reconnect:!0,sid:_,reconnectReason:k}))})}connect(c,b,_,k){this.connectOptions=_,c=toWebsocketUrl(c),c=c.replace(/\/$/,""),c+="/rtc";const j=getClientInfo(),_e=createConnectionParams(b,j,_);return new Promise((et,nt)=>__awaiter(this,void 0,void 0,function*(){const it=yield this.connectionLock.lock();try{const ft=()=>__awaiter(this,void 0,void 0,function*(){this.close(),clearTimeout(pt),nt(new ConnectionError("room connection has been cancelled (signal)"))}),pt=setTimeout(()=>{this.close(),nt(new ConnectionError("room connection has timed out (signal)"))},_.websocketTimeout);k!=null&&k.aborted&&ft(),k==null||k.addEventListener("abort",ft),this.log.debug("connecting to ".concat(c+_e),this.logContext),this.ws&&(yield this.close(!1)),this.ws=new WebSocket(c+_e),this.ws.binaryType="arraybuffer",this.ws.onopen=()=>{clearTimeout(pt)},this.ws.onerror=mt=>__awaiter(this,void 0,void 0,function*(){if(this.state!==SignalConnectionState.CONNECTED){clearTimeout(pt);try{const St=yield fetch("http".concat(c.substring(2),"/validate").concat(_e));if(St.status.toFixed(0).startsWith("4")){const yt=yield St.text();nt(new ConnectionError(yt,0,St.status))}else nt(new ConnectionError("Internal error",2,St.status))}catch{nt(new ConnectionError("server was not reachable",1))}return}this.handleWSError(mt)}),this.ws.onmessage=mt=>__awaiter(this,void 0,void 0,function*(){var St,yt,_t,Tt;let gt;if(typeof mt.data=="string"){const ht=JSON.parse(mt.data);gt=SignalResponse.fromJson(ht)}else if(mt.data instanceof ArrayBuffer)gt=SignalResponse.fromBinary(new Uint8Array(mt.data));else{this.log.error("could not decode websocket message: ".concat(typeof mt.data),this.logContext);return}if(this.state!==SignalConnectionState.CONNECTED){let ht=!1;if(((St=gt.message)===null||St===void 0?void 0:St.case)==="join"?(this.state=SignalConnectionState.CONNECTED,k==null||k.removeEventListener("abort",ft),this.pingTimeoutDuration=gt.message.value.pingTimeout,this.pingIntervalDuration=gt.message.value.pingInterval,this.pingTimeoutDuration&&this.pingTimeoutDuration>0&&(this.log.debug("ping config",Object.assign(Object.assign({},this.logContext),{timeout:this.pingTimeoutDuration,interval:this.pingIntervalDuration})),this.startPingInterval()),et(gt.message.value)):this.state===SignalConnectionState.RECONNECTING&&gt.message.case!=="leave"?(this.state=SignalConnectionState.CONNECTED,k==null||k.removeEventListener("abort",ft),this.startPingInterval(),((yt=gt.message)===null||yt===void 0?void 0:yt.case)==="reconnect"?et((_t=gt.message)===null||_t===void 0?void 0:_t.value):(et(),ht=!0)):this.isEstablishingConnection&&gt.message.case==="leave"?nt(new ConnectionError("Received leave request while trying to (re)connect",4)):_.reconnect||nt(new ConnectionError("did not receive join response, got ".concat((Tt=gt.message)===null||Tt===void 0?void 0:Tt.case," instead"))),!ht)return}this.signalLatency&&(yield sleep(this.signalLatency)),this.handleSignalResponse(gt)}),this.ws.onclose=mt=>{this.isEstablishingConnection&&nt(new ConnectionError("Websocket got closed during a (re)connection attempt")),this.log.warn("websocket closed",Object.assign(Object.assign({},this.logContext),{reason:mt.reason,code:mt.code,wasClean:mt.wasClean,state:this.state})),this.handleOnClose(mt.reason)}}finally{it()}}))}close(){let c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return __awaiter(this,void 0,void 0,function*(){const b=yield this.closingLock.lock();try{if(c&&(this.state=SignalConnectionState.DISCONNECTING),this.ws){this.ws.onmessage=null,this.ws.onopen=null,this.ws.onclose=null;const _=new Promise(k=>{this.ws?this.ws.onclose=()=>{k()}:k()});this.ws.readyState<this.ws.CLOSING&&(this.ws.close(),yield Promise.race([_,sleep(250)])),this.ws=void 0}}finally{c&&(this.state=SignalConnectionState.DISCONNECTED),this.clearPingInterval(),b()}})}sendOffer(c){this.log.debug("sending offer",Object.assign(Object.assign({},this.logContext),{offerSdp:c.sdp})),this.sendRequest({case:"offer",value:toProtoSessionDescription(c)})}sendAnswer(c){return this.log.debug("sending answer",Object.assign(Object.assign({},this.logContext),{answerSdp:c.sdp})),this.sendRequest({case:"answer",value:toProtoSessionDescription(c)})}sendIceCandidate(c,b){return this.log.trace("sending ice candidate",Object.assign(Object.assign({},this.logContext),{candidate:c})),this.sendRequest({case:"trickle",value:new TrickleRequest({candidateInit:JSON.stringify(c),target:b})})}sendMuteTrack(c,b){return this.sendRequest({case:"mute",value:new MuteTrackRequest({sid:c,muted:b})})}sendAddTrack(c){return this.sendRequest({case:"addTrack",value:c})}sendUpdateLocalMetadata(c,b){return this.sendRequest({case:"updateMetadata",value:new UpdateParticipantMetadata({metadata:c,name:b})})}sendUpdateTrackSettings(c){this.sendRequest({case:"trackSetting",value:c})}sendUpdateSubscription(c){return this.sendRequest({case:"subscription",value:c})}sendSyncState(c){return this.sendRequest({case:"syncState",value:c})}sendUpdateVideoLayers(c,b){return this.sendRequest({case:"updateLayers",value:new UpdateVideoLayers({trackSid:c,layers:b})})}sendUpdateSubscriptionPermissions(c,b){return this.sendRequest({case:"subscriptionPermission",value:new SubscriptionPermission({allParticipants:c,trackPermissions:b})})}sendSimulateScenario(c){return this.sendRequest({case:"simulate",value:c})}sendPing(){return Promise.all([this.sendRequest({case:"ping",value:protoInt64.parse(Date.now())}),this.sendRequest({case:"pingReq",value:new Ping({timestamp:protoInt64.parse(Date.now()),rtt:protoInt64.parse(this.rtt)})})])}sendLeave(){return this.sendRequest({case:"leave",value:new LeaveRequest({canReconnect:!1,reason:DisconnectReason.CLIENT_INITIATED})})}sendRequest(c){let b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return __awaiter(this,void 0,void 0,function*(){if(!b&&!canPassThroughQueue(c)&&this.state===SignalConnectionState.RECONNECTING){this.queuedRequests.push(()=>__awaiter(this,void 0,void 0,function*(){yield this.sendRequest(c,!0)}));return}if(b||(yield this.requestQueue.flush()),this.signalLatency&&(yield sleep(this.signalLatency)),!this.ws||this.ws.readyState!==this.ws.OPEN){this.log.error("cannot send signal request before connected, type: ".concat(c==null?void 0:c.case),this.logContext);return}const k=new SignalRequest({message:c});try{this.useJSON?this.ws.send(k.toJsonString()):this.ws.send(k.toBinary())}catch(j){this.log.error("error sending signal message",Object.assign(Object.assign({},this.logContext),{error:j}))}})}handleSignalResponse(c){var b,_;const k=c.message;if(k==null){this.log.debug("received unsupported message",this.logContext);return}let j=!1;if(k.case==="answer"){const _e=fromProtoSessionDescription(k.value);this.onAnswer&&this.onAnswer(_e)}else if(k.case==="offer"){const _e=fromProtoSessionDescription(k.value);this.onOffer&&this.onOffer(_e)}else if(k.case==="trickle"){const _e=JSON.parse(k.value.candidateInit);this.onTrickle&&this.onTrickle(_e,k.value.target)}else k.case==="update"?this.onParticipantUpdate&&this.onParticipantUpdate((b=k.value.participants)!==null&&b!==void 0?b:[]):k.case==="trackPublished"?this.onLocalTrackPublished&&this.onLocalTrackPublished(k.value):k.case==="speakersChanged"?this.onSpeakersChanged&&this.onSpeakersChanged((_=k.value.speakers)!==null&&_!==void 0?_:[]):k.case==="leave"?this.onLeave&&this.onLeave(k.value):k.case==="mute"?this.onRemoteMuteChanged&&this.onRemoteMuteChanged(k.value.sid,k.value.muted):k.case==="roomUpdate"?this.onRoomUpdate&&k.value.room&&this.onRoomUpdate(k.value.room):k.case==="connectionQuality"?this.onConnectionQuality&&this.onConnectionQuality(k.value):k.case==="streamStateUpdate"?this.onStreamStateUpdate&&this.onStreamStateUpdate(k.value):k.case==="subscribedQualityUpdate"?this.onSubscribedQualityUpdate&&this.onSubscribedQualityUpdate(k.value):k.case==="subscriptionPermissionUpdate"?this.onSubscriptionPermissionUpdate&&this.onSubscriptionPermissionUpdate(k.value):k.case==="refreshToken"?this.onTokenRefresh&&this.onTokenRefresh(k.value):k.case==="trackUnpublished"?this.onLocalTrackUnpublished&&this.onLocalTrackUnpublished(k.value):k.case==="subscriptionResponse"?this.onSubscriptionError&&this.onSubscriptionError(k.value):k.case==="pong"||(k.case==="pongResp"?(this.rtt=Date.now()-Number.parseInt(k.value.lastPingTimestamp.toString()),this.resetPingTimeout(),j=!0):this.log.debug("unsupported message",Object.assign(Object.assign({},this.logContext),{msgCase:k.case})));j||this.resetPingTimeout()}setReconnected(){for(;this.queuedRequests.length>0;){const c=this.queuedRequests.shift();c&&this.requestQueue.run(c)}}handleOnClose(c){return __awaiter(this,void 0,void 0,function*(){if(this.state===SignalConnectionState.DISCONNECTED)return;const b=this.onClose;yield this.close(),this.log.debug("websocket connection closed: ".concat(c),Object.assign(Object.assign({},this.logContext),{reason:c})),b&&b(c)})}handleWSError(c){this.log.error("websocket error",Object.assign(Object.assign({},this.logContext),{error:c}))}resetPingTimeout(){if(this.clearPingTimeout(),!this.pingTimeoutDuration){this.log.warn("ping timeout duration not set",this.logContext);return}this.pingTimeout=CriticalTimers.setTimeout(()=>{this.log.warn("ping timeout triggered. last pong received at: ".concat(new Date(Date.now()-this.pingTimeoutDuration*1e3).toUTCString()),this.logContext),this.handleOnClose("ping timeout")},this.pingTimeoutDuration*1e3)}clearPingTimeout(){this.pingTimeout&&CriticalTimers.clearTimeout(this.pingTimeout)}startPingInterval(){if(this.clearPingInterval(),this.resetPingTimeout(),!this.pingIntervalDuration){this.log.warn("ping interval duration not set",this.logContext);return}this.log.debug("start ping interval",this.logContext),this.pingInterval=CriticalTimers.setInterval(()=>{this.sendPing()},this.pingIntervalDuration*1e3)}clearPingInterval(){this.log.debug("clearing ping interval",this.logContext),this.clearPingTimeout(),this.pingInterval&&CriticalTimers.clearInterval(this.pingInterval)}}function fromProtoSessionDescription(a){const c={type:"offer",sdp:a.sdp};switch(a.type){case"answer":case"offer":case"pranswer":case"rollback":c.type=a.type;break}return c}function toProtoSessionDescription(a){return new SessionDescription({sdp:a.sdp,type:a.type})}function createConnectionParams(a,c,b){var _;const k=new URLSearchParams;return k.set("access_token",a),b.reconnect&&(k.set("reconnect","1"),b.sid&&k.set("sid",b.sid)),k.set("auto_subscribe",b.autoSubscribe?"1":"0"),k.set("sdk",isReactNative()?"reactnative":"js"),k.set("version",c.version),k.set("protocol",c.protocol.toString()),c.deviceModel&&k.set("device_model",c.deviceModel),c.os&&k.set("os",c.os),c.osVersion&&k.set("os_version",c.osVersion),c.browser&&k.set("browser",c.browser),c.browserVersion&&k.set("browser_version",c.browserVersion),b.adaptiveStream&&k.set("adaptive_stream","1"),b.reconnectReason&&k.set("reconnect_reason",b.reconnectReason.toString()),!((_=navigator.connection)===null||_===void 0)&&_.type&&k.set("network",navigator.connection.type),"?".concat(k.toString())}var parser$1={},grammar$2={exports:{}},grammar$1=grammar$2.exports={v:[{name:"version",reg:/^(\d*)$/}],o:[{name:"origin",reg:/^(\S*) (\d*) (\d*) (\S*) IP(\d) (\S*)/,names:["username","sessionId","sessionVersion","netType","ipVer","address"],format:"%s %s %d %s IP%d %s"}],s:[{name:"name"}],i:[{name:"description"}],u:[{name:"uri"}],e:[{name:"email"}],p:[{name:"phone"}],z:[{name:"timezones"}],r:[{name:"repeats"}],t:[{name:"timing",reg:/^(\d*) (\d*)/,names:["start","stop"],format:"%d %d"}],c:[{name:"connection",reg:/^IN IP(\d) (\S*)/,names:["version","ip"],format:"IN IP%d %s"}],b:[{push:"bandwidth",reg:/^(TIAS|AS|CT|RR|RS):(\d*)/,names:["type","limit"],format:"%s:%s"}],m:[{reg:/^(\w*) (\d*) ([\w/]*)(?: (.*))?/,names:["type","port","protocol","payloads"],format:"%s %d %s %s"}],a:[{push:"rtp",reg:/^rtpmap:(\d*) ([\w\-.]*)(?:\s*\/(\d*)(?:\s*\/(\S*))?)?/,names:["payload","codec","rate","encoding"],format:function(a){return a.encoding?"rtpmap:%d %s/%s/%s":a.rate?"rtpmap:%d %s/%s":"rtpmap:%d %s"}},{push:"fmtp",reg:/^fmtp:(\d*) ([\S| ]*)/,names:["payload","config"],format:"fmtp:%d %s"},{name:"control",reg:/^control:(.*)/,format:"control:%s"},{name:"rtcp",reg:/^rtcp:(\d*)(?: (\S*) IP(\d) (\S*))?/,names:["port","netType","ipVer","address"],format:function(a){return a.address!=null?"rtcp:%d %s IP%d %s":"rtcp:%d"}},{push:"rtcpFbTrrInt",reg:/^rtcp-fb:(\*|\d*) trr-int (\d*)/,names:["payload","value"],format:"rtcp-fb:%s trr-int %d"},{push:"rtcpFb",reg:/^rtcp-fb:(\*|\d*) ([\w-_]*)(?: ([\w-_]*))?/,names:["payload","type","subtype"],format:function(a){return a.subtype!=null?"rtcp-fb:%s %s %s":"rtcp-fb:%s %s"}},{push:"ext",reg:/^extmap:(\d+)(?:\/(\w+))?(?: (urn:ietf:params:rtp-hdrext:encrypt))? (\S*)(?: (\S*))?/,names:["value","direction","encrypt-uri","uri","config"],format:function(a){return"extmap:%d"+(a.direction?"/%s":"%v")+(a["encrypt-uri"]?" %s":"%v")+" %s"+(a.config?" %s":"")}},{name:"extmapAllowMixed",reg:/^(extmap-allow-mixed)/},{push:"crypto",reg:/^crypto:(\d*) ([\w_]*) (\S*)(?: (\S*))?/,names:["id","suite","config","sessionConfig"],format:function(a){return a.sessionConfig!=null?"crypto:%d %s %s %s":"crypto:%d %s %s"}},{name:"setup",reg:/^setup:(\w*)/,format:"setup:%s"},{name:"connectionType",reg:/^connection:(new|existing)/,format:"connection:%s"},{name:"mid",reg:/^mid:([^\s]*)/,format:"mid:%s"},{name:"msid",reg:/^msid:(.*)/,format:"msid:%s"},{name:"ptime",reg:/^ptime:(\d*(?:\.\d*)*)/,format:"ptime:%d"},{name:"maxptime",reg:/^maxptime:(\d*(?:\.\d*)*)/,format:"maxptime:%d"},{name:"direction",reg:/^(sendrecv|recvonly|sendonly|inactive)/},{name:"icelite",reg:/^(ice-lite)/},{name:"iceUfrag",reg:/^ice-ufrag:(\S*)/,format:"ice-ufrag:%s"},{name:"icePwd",reg:/^ice-pwd:(\S*)/,format:"ice-pwd:%s"},{name:"fingerprint",reg:/^fingerprint:(\S*) (\S*)/,names:["type","hash"],format:"fingerprint:%s %s"},{push:"candidates",reg:/^candidate:(\S*) (\d*) (\S*) (\d*) (\S*) (\d*) typ (\S*)(?: raddr (\S*) rport (\d*))?(?: tcptype (\S*))?(?: generation (\d*))?(?: network-id (\d*))?(?: network-cost (\d*))?/,names:["foundation","component","transport","priority","ip","port","type","raddr","rport","tcptype","generation","network-id","network-cost"],format:function(a){var c="candidate:%s %d %s %d %s %d typ %s";return c+=a.raddr!=null?" raddr %s rport %d":"%v%v",c+=a.tcptype!=null?" tcptype %s":"%v",a.generation!=null&&(c+=" generation %d"),c+=a["network-id"]!=null?" network-id %d":"%v",c+=a["network-cost"]!=null?" network-cost %d":"%v",c}},{name:"endOfCandidates",reg:/^(end-of-candidates)/},{name:"remoteCandidates",reg:/^remote-candidates:(.*)/,format:"remote-candidates:%s"},{name:"iceOptions",reg:/^ice-options:(\S*)/,format:"ice-options:%s"},{push:"ssrcs",reg:/^ssrc:(\d*) ([\w_-]*)(?::(.*))?/,names:["id","attribute","value"],format:function(a){var c="ssrc:%d";return a.attribute!=null&&(c+=" %s",a.value!=null&&(c+=":%s")),c}},{push:"ssrcGroups",reg:/^ssrc-group:([\x21\x23\x24\x25\x26\x27\x2A\x2B\x2D\x2E\w]*) (.*)/,names:["semantics","ssrcs"],format:"ssrc-group:%s %s"},{name:"msidSemantic",reg:/^msid-semantic:\s?(\w*) (\S*)/,names:["semantic","token"],format:"msid-semantic: %s %s"},{push:"groups",reg:/^group:(\w*) (.*)/,names:["type","mids"],format:"group:%s %s"},{name:"rtcpMux",reg:/^(rtcp-mux)/},{name:"rtcpRsize",reg:/^(rtcp-rsize)/},{name:"sctpmap",reg:/^sctpmap:([\w_/]*) (\S*)(?: (\S*))?/,names:["sctpmapNumber","app","maxMessageSize"],format:function(a){return a.maxMessageSize!=null?"sctpmap:%s %s %s":"sctpmap:%s %s"}},{name:"xGoogleFlag",reg:/^x-google-flag:([^\s]*)/,format:"x-google-flag:%s"},{push:"rids",reg:/^rid:([\d\w]+) (\w+)(?: ([\S| ]*))?/,names:["id","direction","params"],format:function(a){return a.params?"rid:%s %s %s":"rid:%s %s"}},{push:"imageattrs",reg:new RegExp("^imageattr:(\\d+|\\*)[\\s\\t]+(send|recv)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*)(?:[\\s\\t]+(recv|send)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*))?"),names:["pt","dir1","attrs1","dir2","attrs2"],format:function(a){return"imageattr:%s %s %s"+(a.dir2?" %s %s":"")}},{name:"simulcast",reg:new RegExp("^simulcast:(send|recv) ([a-zA-Z0-9\\-_~;,]+)(?:\\s?(send|recv) ([a-zA-Z0-9\\-_~;,]+))?$"),names:["dir1","list1","dir2","list2"],format:function(a){return"simulcast:%s %s"+(a.dir2?" %s %s":"")}},{name:"simulcast_03",reg:/^simulcast:[\s\t]+([\S+\s\t]+)$/,names:["value"],format:"simulcast: %s"},{name:"framerate",reg:/^framerate:(\d+(?:$|\.\d+))/,format:"framerate:%s"},{name:"sourceFilter",reg:/^source-filter: *(excl|incl) (\S*) (IP4|IP6|\*) (\S*) (.*)/,names:["filterMode","netType","addressTypes","destAddress","srcList"],format:"source-filter: %s %s %s %s %s"},{name:"bundleOnly",reg:/^(bundle-only)/},{name:"label",reg:/^label:(.+)/,format:"label:%s"},{name:"sctpPort",reg:/^sctp-port:(\d+)$/,format:"sctp-port:%s"},{name:"maxMessageSize",reg:/^max-message-size:(\d+)$/,format:"max-message-size:%s"},{push:"tsRefClocks",reg:/^ts-refclk:([^\s=]*)(?:=(\S*))?/,names:["clksrc","clksrcExt"],format:function(a){return"ts-refclk:%s"+(a.clksrcExt!=null?"=%s":"")}},{name:"mediaClk",reg:/^mediaclk:(?:id=(\S*))? *([^\s=]*)(?:=(\S*))?(?: *rate=(\d+)\/(\d+))?/,names:["id","mediaClockName","mediaClockValue","rateNumerator","rateDenominator"],format:function(a){var c="mediaclk:";return c+=a.id!=null?"id=%s %s":"%v%s",c+=a.mediaClockValue!=null?"=%s":"",c+=a.rateNumerator!=null?" rate=%s":"",c+=a.rateDenominator!=null?"/%s":"",c}},{name:"keywords",reg:/^keywds:(.+)$/,format:"keywds:%s"},{name:"content",reg:/^content:(.+)/,format:"content:%s"},{name:"bfcpFloorCtrl",reg:/^floorctrl:(c-only|s-only|c-s)/,format:"floorctrl:%s"},{name:"bfcpConfId",reg:/^confid:(\d+)/,format:"confid:%s"},{name:"bfcpUserId",reg:/^userid:(\d+)/,format:"userid:%s"},{name:"bfcpFloorId",reg:/^floorid:(.+) (?:m-stream|mstrm):(.+)/,names:["id","mStream"],format:"floorid:%s mstrm:%s"},{push:"invalid",names:["value"]}]};Object.keys(grammar$1).forEach(function(a){var c=grammar$1[a];c.forEach(function(b){b.reg||(b.reg=/(.*)/),b.format||(b.format="%s")})});var grammarExports=grammar$2.exports;(function(a){var c=function(et){return String(Number(et))===et?Number(et):et},b=function(et,nt,it,ft){if(ft&&!it)nt[ft]=c(et[1]);else for(var pt=0;pt<it.length;pt+=1)et[pt+1]!=null&&(nt[it[pt]]=c(et[pt+1]))},_=function(et,nt,it){var ft=et.name&&et.names;et.push&&!nt[et.push]?nt[et.push]=[]:ft&&!nt[et.name]&&(nt[et.name]={});var pt=et.push?{}:ft?nt[et.name]:nt;b(it.match(et.reg),pt,et.names,et.name),et.push&&nt[et.push].push(pt)},k=grammarExports,j=RegExp.prototype.test.bind(/^([a-z])=(.*)/);a.parse=function(et){var nt={},it=[],ft=nt;return et.split(/(\r\n|\r|\n)/).filter(j).forEach(function(pt){var mt=pt[0],St=pt.slice(2);mt==="m"&&(it.push({rtp:[],fmtp:[]}),ft=it[it.length-1]);for(var yt=0;yt<(k[mt]||[]).length;yt+=1){var _t=k[mt][yt];if(_t.reg.test(St))return _(_t,ft,St)}}),nt.media=it,nt};var _e=function(et,nt){var it=nt.split(/=(.+)/,2);return it.length===2?et[it[0]]=c(it[1]):it.length===1&&nt.length>1&&(et[it[0]]=void 0),et};a.parseParams=function(et){return et.split(/;\s?/).reduce(_e,{})},a.parseFmtpConfig=a.parseParams,a.parsePayloads=function(et){return et.toString().split(" ").map(Number)},a.parseRemoteCandidates=function(et){for(var nt=[],it=et.split(" ").map(c),ft=0;ft<it.length;ft+=3)nt.push({component:it[ft],ip:it[ft+1],port:it[ft+2]});return nt},a.parseImageAttributes=function(et){return et.split(" ").map(function(nt){return nt.substring(1,nt.length-1).split(",").reduce(_e,{})})},a.parseSimulcastStreamList=function(et){return et.split(";").map(function(nt){return nt.split(",").map(function(it){var ft,pt=!1;return it[0]!=="~"?ft=c(it):(ft=c(it.substring(1,it.length)),pt=!0),{scid:ft,paused:pt}})})}})(parser$1);var grammar=grammarExports,formatRegExp=/%[sdv%]/g,format=function(a){var c=1,b=arguments,_=b.length;return a.replace(formatRegExp,function(k){if(c>=_)return k;var j=b[c];switch(c+=1,k){case"%%":return"%";case"%s":return String(j);case"%d":return Number(j);case"%v":return""}})},makeLine=function(a,c,b){var _=c.format instanceof Function?c.format(c.push?b:b[c.name]):c.format,k=[a+"="+_];if(c.names)for(var j=0;j<c.names.length;j+=1){var _e=c.names[j];c.name?k.push(b[c.name][_e]):k.push(b[c.names[j]])}else k.push(b[c.name]);return format.apply(null,k)},defaultOuterOrder=["v","o","s","i","u","e","p","c","b","t","r","z","a"],defaultInnerOrder=["i","c","b","a"],writer$1=function(a,c){c=c||{},a.version==null&&(a.version=0),a.name==null&&(a.name=" "),a.media.forEach(function(j){j.payloads==null&&(j.payloads="")});var b=c.outerOrder||defaultOuterOrder,_=c.innerOrder||defaultInnerOrder,k=[];return b.forEach(function(j){grammar[j].forEach(function(_e){_e.name in a&&a[_e.name]!=null?k.push(makeLine(j,_e,a)):_e.push in a&&a[_e.push]!=null&&a[_e.push].forEach(function(et){k.push(makeLine(j,_e,et))})})}),a.media.forEach(function(j){k.push(makeLine("m",grammar.m[0],j)),_.forEach(function(_e){grammar[_e].forEach(function(et){et.name in j&&j[et.name]!=null?k.push(makeLine(_e,et,j)):et.push in j&&j[et.push]!=null&&j[et.push].forEach(function(nt){k.push(makeLine(_e,et,nt))})})})}),k.join(`\r
`)+`\r
`},parser=parser$1,writer=writer$1,write=writer,parse$1=parser.parse;const startBitrateForSVC=.7,PCEvents={NegotiationStarted:"negotiationStarted",NegotiationComplete:"negotiationComplete",RTPVideoPayloadTypes:"rtpVideoPayloadTypes"};class PCTransport extends eventsExports.EventEmitter{get pc(){return this._pc||(this._pc=this.createPC()),this._pc}constructor(c){let b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};var _;super(),this.log=livekitLogger,this.pendingCandidates=[],this.restartingIce=!1,this.renegotiate=!1,this.trackBitrates=[],this.remoteStereoMids=[],this.remoteNackMids=[],this.negotiate=r$1(k=>__awaiter(this,void 0,void 0,function*(){this.emit(PCEvents.NegotiationStarted);try{yield this.createAndSendOffer()}catch(j){if(k)k(j);else throw j}}),100),this.close=()=>{this._pc&&(this._pc.close(),this._pc.onconnectionstatechange=null,this._pc.oniceconnectionstatechange=null,this._pc.onicegatheringstatechange=null,this._pc.ondatachannel=null,this._pc.onnegotiationneeded=null,this._pc.onsignalingstatechange=null,this._pc.onicecandidate=null,this._pc.ondatachannel=null,this._pc.ontrack=null,this._pc.onconnectionstatechange=null,this._pc.oniceconnectionstatechange=null,this._pc=null)},this.log=getLogger((_=b.loggerName)!==null&&_!==void 0?_:LoggerNames.PCTransport),this.loggerOptions=b,this.config=c,this._pc=this.createPC()}createPC(){const c=new RTCPeerConnection(this.config);return c.onicecandidate=b=>{var _;b.candidate&&((_=this.onIceCandidate)===null||_===void 0||_.call(this,b.candidate))},c.onicecandidateerror=b=>{var _;(_=this.onIceCandidateError)===null||_===void 0||_.call(this,b)},c.oniceconnectionstatechange=()=>{var b;(b=this.onIceConnectionStateChange)===null||b===void 0||b.call(this,c.iceConnectionState)},c.onsignalingstatechange=()=>{var b;(b=this.onSignalingStatechange)===null||b===void 0||b.call(this,c.signalingState)},c.onconnectionstatechange=()=>{var b;(b=this.onConnectionStateChange)===null||b===void 0||b.call(this,c.connectionState)},c.ondatachannel=b=>{var _;(_=this.onDataChannel)===null||_===void 0||_.call(this,b)},c.ontrack=b=>{var _;(_=this.onTrack)===null||_===void 0||_.call(this,b)},c}get logContext(){var c,b;return Object.assign({},(b=(c=this.loggerOptions).loggerContextCb)===null||b===void 0?void 0:b.call(c))}get isICEConnected(){return this._pc!==null&&(this.pc.iceConnectionState==="connected"||this.pc.iceConnectionState==="completed")}addIceCandidate(c){return __awaiter(this,void 0,void 0,function*(){if(this.pc.remoteDescription&&!this.restartingIce)return this.pc.addIceCandidate(c);this.pendingCandidates.push(c)})}setRemoteDescription(c){var b;return __awaiter(this,void 0,void 0,function*(){let _;if(c.type==="offer"){let{stereoMids:k,nackMids:j}=extractStereoAndNackAudioFromOffer(c);this.remoteStereoMids=k,this.remoteNackMids=j}else if(c.type==="answer"){const k=parse$1((b=c.sdp)!==null&&b!==void 0?b:"");k.media.forEach(j=>{j.type==="audio"&&this.trackBitrates.some(_e=>{if(!_e.transceiver||j.mid!=_e.transceiver.mid)return!1;let et=0;if(j.rtp.some(it=>it.codec.toUpperCase()===_e.codec.toUpperCase()?(et=it.payload,!0):!1),et===0)return!0;let nt=!1;for(const it of j.fmtp)if(it.payload===et){it.config=it.config.split(";").filter(ft=>!ft.includes("maxaveragebitrate")).join(";"),_e.maxbr>0&&(it.config+=";maxaveragebitrate=".concat(_e.maxbr*1e3)),nt=!0;break}return nt||_e.maxbr>0&&j.fmtp.push({payload:et,config:"maxaveragebitrate=".concat(_e.maxbr*1e3)}),!0})}),_=write(k)}yield this.setMungedSDP(c,_,!0),this.pendingCandidates.forEach(k=>{this.pc.addIceCandidate(k)}),this.pendingCandidates=[],this.restartingIce=!1,this.renegotiate?(this.renegotiate=!1,yield this.createAndSendOffer()):c.type==="answer"&&(this.emit(PCEvents.NegotiationComplete),c.sdp&&parse$1(c.sdp).media.forEach(j=>{j.type==="video"&&this.emit(PCEvents.RTPVideoPayloadTypes,j.rtp)}))})}createAndSendOffer(c){var b;return __awaiter(this,void 0,void 0,function*(){if(this.onOffer===void 0)return;if(c!=null&&c.iceRestart&&(this.log.debug("restarting ICE",this.logContext),this.restartingIce=!0),this._pc&&this._pc.signalingState==="have-local-offer"){const j=this._pc.remoteDescription;if(c!=null&&c.iceRestart&&j)yield this._pc.setRemoteDescription(j);else{this.renegotiate=!0;return}}else if(!this._pc||this._pc.signalingState==="closed"){this.log.warn("could not createOffer with closed peer connection",this.logContext);return}this.log.debug("starting to negotiate",this.logContext);const _=yield this.pc.createOffer(c),k=parse$1((b=_.sdp)!==null&&b!==void 0?b:"");k.media.forEach(j=>{j.type==="audio"?ensureAudioNackAndStereo(j,[],[]):j.type==="video"&&(ensureVideoDDExtensionForSVC(j),this.trackBitrates.some(_e=>{if(!j.msid||!_e.cid||!j.msid.includes(_e.cid))return!1;let et=0;if(j.rtp.some(it=>it.codec.toUpperCase()===_e.codec.toUpperCase()?(et=it.payload,!0):!1),et===0)return!0;let nt=!1;for(const it of j.fmtp)if(it.payload===et){it.config.includes("x-google-start-bitrate")||(it.config+=";x-google-start-bitrate=".concat(Math.round(_e.maxbr*startBitrateForSVC))),it.config.includes("x-google-max-bitrate")||(it.config+=";x-google-max-bitrate=".concat(_e.maxbr)),nt=!0;break}return nt||j.fmtp.push({payload:et,config:"x-google-start-bitrate=".concat(Math.round(_e.maxbr*startBitrateForSVC),";x-google-max-bitrate=").concat(_e.maxbr)}),!0}))}),yield this.setMungedSDP(_,write(k)),this.onOffer(_)})}createAndSetAnswer(){var c;return __awaiter(this,void 0,void 0,function*(){const b=yield this.pc.createAnswer(),_=parse$1((c=b.sdp)!==null&&c!==void 0?c:"");return _.media.forEach(k=>{k.type==="audio"&&ensureAudioNackAndStereo(k,this.remoteStereoMids,this.remoteNackMids)}),yield this.setMungedSDP(b,write(_)),b})}createDataChannel(c,b){return this.pc.createDataChannel(c,b)}addTransceiver(c,b){return this.pc.addTransceiver(c,b)}addTrack(c){if(!this._pc)throw new UnexpectedConnectionState("PC closed, cannot add track");return this._pc.addTrack(c)}setTrackCodecBitrate(c){this.trackBitrates.push(c)}setConfiguration(c){var b;if(!this._pc)throw new UnexpectedConnectionState("PC closed, cannot configure");return(b=this._pc)===null||b===void 0?void 0:b.setConfiguration(c)}canRemoveTrack(){var c;return!!(!((c=this._pc)===null||c===void 0)&&c.removeTrack)}removeTrack(c){var b;return(b=this._pc)===null||b===void 0?void 0:b.removeTrack(c)}getConnectionState(){var c,b;return(b=(c=this._pc)===null||c===void 0?void 0:c.connectionState)!==null&&b!==void 0?b:"closed"}getICEConnectionState(){var c,b;return(b=(c=this._pc)===null||c===void 0?void 0:c.iceConnectionState)!==null&&b!==void 0?b:"closed"}getSignallingState(){var c,b;return(b=(c=this._pc)===null||c===void 0?void 0:c.signalingState)!==null&&b!==void 0?b:"closed"}getTransceivers(){var c,b;return(b=(c=this._pc)===null||c===void 0?void 0:c.getTransceivers())!==null&&b!==void 0?b:[]}getSenders(){var c,b;return(b=(c=this._pc)===null||c===void 0?void 0:c.getSenders())!==null&&b!==void 0?b:[]}getLocalDescription(){var c;return(c=this._pc)===null||c===void 0?void 0:c.localDescription}getRemoteDescription(){var c;return(c=this.pc)===null||c===void 0?void 0:c.remoteDescription}getStats(){return this.pc.getStats()}getConnectedAddress(){var c;return __awaiter(this,void 0,void 0,function*(){if(!this._pc)return;let b="";const _=new Map,k=new Map;if((yield this._pc.getStats()).forEach(et=>{switch(et.type){case"transport":b=et.selectedCandidatePairId;break;case"candidate-pair":b===""&&et.selected&&(b=et.id),_.set(et.id,et);break;case"remote-candidate":k.set(et.id,"".concat(et.address,":").concat(et.port));break}}),b==="")return;const _e=(c=_.get(b))===null||c===void 0?void 0:c.remoteCandidateId;if(_e!==void 0)return k.get(_e)})}setMungedSDP(c,b,_){return __awaiter(this,void 0,void 0,function*(){if(b){const k=c.sdp;c.sdp=b;try{this.log.debug("setting munged ".concat(_?"remote":"local"," description"),this.logContext),_?yield this.pc.setRemoteDescription(c):yield this.pc.setLocalDescription(c);return}catch(j){this.log.warn("not able to set ".concat(c.type,", falling back to unmodified sdp"),Object.assign(Object.assign({},this.logContext),{error:j,sdp:b})),c.sdp=k}}try{_?yield this.pc.setRemoteDescription(c):yield this.pc.setLocalDescription(c)}catch(k){let j="unknown error";k instanceof Error?j=k.message:typeof k=="string"&&(j=k);const _e={error:j,sdp:c.sdp};throw!_&&this.pc.remoteDescription&&(_e.remoteSdp=this.pc.remoteDescription),this.log.error("unable to set ".concat(c.type),Object.assign(Object.assign({},this.logContext),{fields:_e})),new NegotiationError(j)}})}}function ensureAudioNackAndStereo(a,c,b){let _=0;a.rtp.some(k=>k.codec==="opus"?(_=k.payload,!0):!1),_>0&&(a.rtcpFb||(a.rtcpFb=[]),b.includes(a.mid)&&!a.rtcpFb.some(k=>k.payload===_&&k.type==="nack")&&a.rtcpFb.push({payload:_,type:"nack"}),c.includes(a.mid)&&a.fmtp.some(k=>k.payload===_?(k.config.includes("stereo=1")||(k.config+=";stereo=1"),!0):!1))}function ensureVideoDDExtensionForSVC(a){var c,b,_,k;const j=(b=(c=a.rtp[0])===null||c===void 0?void 0:c.codec)===null||b===void 0?void 0:b.toLowerCase();if(!isSVCCodec(j))return;let _e=0;((_=a.ext)===null||_===void 0?void 0:_.some(nt=>nt.uri===ddExtensionURI?!0:(nt.value>_e&&(_e=nt.value),!1)))||(k=a.ext)===null||k===void 0||k.push({value:_e+1,uri:ddExtensionURI})}function extractStereoAndNackAudioFromOffer(a){var c;const b=[],_=[],k=parse$1((c=a.sdp)!==null&&c!==void 0?c:"");let j=0;return k.media.forEach(_e=>{var et;_e.type==="audio"&&(_e.rtp.some(nt=>nt.codec==="opus"?(j=nt.payload,!0):!1),!((et=_e.rtcpFb)===null||et===void 0)&&et.some(nt=>nt.payload===j&&nt.type==="nack")&&_.push(_e.mid),_e.fmtp.some(nt=>nt.payload===j?(nt.config.includes("sprop-stereo=1")&&b.push(_e.mid),!0):!1))}),{stereoMids:b,nackMids:_}}const defaultVideoCodec="vp8",publishDefaults={audioPreset:AudioPresets.music,dtx:!0,red:!0,forceStereo:!1,simulcast:!0,screenShareEncoding:ScreenSharePresets.h1080fps15.encoding,stopMicTrackOnMute:!1,videoCodec:defaultVideoCodec,backupCodec:!0},audioDefaults={autoGainControl:!0,echoCancellation:!0,noiseSuppression:!0},videoDefaults={resolution:VideoPresets.h720.resolution},roomOptionDefaults={adaptiveStream:!1,dynacast:!1,stopLocalTrackOnUnpublish:!0,reconnectPolicy:new DefaultReconnectPolicy,disconnectOnPageLeave:!0,webAudioMix:!0},roomConnectOptionDefaults={autoSubscribe:!0,maxRetries:1,peerConnectionTimeout:15e3,websocketTimeout:15e3};var PCTransportState;(function(a){a[a.NEW=0]="NEW",a[a.CONNECTING=1]="CONNECTING",a[a.CONNECTED=2]="CONNECTED",a[a.FAILED=3]="FAILED",a[a.CLOSING=4]="CLOSING",a[a.CLOSED=5]="CLOSED"})(PCTransportState||(PCTransportState={}));class PCTransportManager{get needsPublisher(){return this.isPublisherConnectionRequired}get needsSubscriber(){return this.isSubscriberConnectionRequired}get currentState(){return this.state}constructor(c,b,_){var k;this.peerConnectionTimeout=roomConnectOptionDefaults.peerConnectionTimeout,this.log=livekitLogger,this.updateState=()=>{var j;const _e=this.state,et=this.requiredTransports.map(nt=>nt.getConnectionState());et.every(nt=>nt==="connected")?this.state=PCTransportState.CONNECTED:et.some(nt=>nt==="failed")?this.state=PCTransportState.FAILED:et.some(nt=>nt==="connecting")?this.state=PCTransportState.CONNECTING:et.every(nt=>nt==="closed")?this.state=PCTransportState.CLOSED:et.some(nt=>nt==="closed")?this.state=PCTransportState.CLOSING:et.every(nt=>nt==="new")&&(this.state=PCTransportState.NEW),_e!==this.state&&(this.log.debug("pc state change: from ".concat(PCTransportState[_e]," to ").concat(PCTransportState[this.state]),this.logContext),(j=this.onStateChange)===null||j===void 0||j.call(this,this.state,this.publisher.getConnectionState(),this.subscriber.getConnectionState()))},this.log=getLogger((k=_.loggerName)!==null&&k!==void 0?k:LoggerNames.PCManager),this.loggerOptions=_,this.isPublisherConnectionRequired=!b,this.isSubscriberConnectionRequired=b,this.publisher=new PCTransport(c,_),this.subscriber=new PCTransport(c,_),this.publisher.onConnectionStateChange=this.updateState,this.subscriber.onConnectionStateChange=this.updateState,this.publisher.onIceConnectionStateChange=this.updateState,this.subscriber.onIceConnectionStateChange=this.updateState,this.publisher.onSignalingStatechange=this.updateState,this.subscriber.onSignalingStatechange=this.updateState,this.publisher.onIceCandidate=j=>{var _e;(_e=this.onIceCandidate)===null||_e===void 0||_e.call(this,j,SignalTarget.PUBLISHER)},this.subscriber.onIceCandidate=j=>{var _e;(_e=this.onIceCandidate)===null||_e===void 0||_e.call(this,j,SignalTarget.SUBSCRIBER)},this.subscriber.onDataChannel=j=>{var _e;(_e=this.onDataChannel)===null||_e===void 0||_e.call(this,j)},this.subscriber.onTrack=j=>{var _e;(_e=this.onTrack)===null||_e===void 0||_e.call(this,j)},this.publisher.onOffer=j=>{var _e;(_e=this.onPublisherOffer)===null||_e===void 0||_e.call(this,j)},this.state=PCTransportState.NEW,this.connectionLock=new Mutex}get logContext(){var c,b;return Object.assign({},(b=(c=this.loggerOptions).loggerContextCb)===null||b===void 0?void 0:b.call(c))}requirePublisher(){let c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.isPublisherConnectionRequired=c,this.updateState()}requireSubscriber(){let c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.isSubscriberConnectionRequired=c,this.updateState()}createAndSendPublisherOffer(c){return this.publisher.createAndSendOffer(c)}setPublisherAnswer(c){return this.publisher.setRemoteDescription(c)}removeTrack(c){return this.publisher.removeTrack(c)}close(){return __awaiter(this,void 0,void 0,function*(){if(this.publisher&&this.publisher.getSignallingState()!=="closed"){const c=this.publisher;for(const b of c.getSenders())try{c.canRemoveTrack()&&c.removeTrack(b)}catch(_){this.log.warn("could not removeTrack",Object.assign(Object.assign({},this.logContext),{error:_}))}}yield Promise.all([this.publisher.close(),this.subscriber.close()]),this.updateState()})}triggerIceRestart(){return __awaiter(this,void 0,void 0,function*(){this.subscriber.restartingIce=!0,this.needsPublisher&&(yield this.createAndSendPublisherOffer({iceRestart:!0}))})}addIceCandidate(c,b){return __awaiter(this,void 0,void 0,function*(){b===SignalTarget.PUBLISHER?yield this.publisher.addIceCandidate(c):yield this.subscriber.addIceCandidate(c)})}createSubscriberAnswerFromOffer(c){return __awaiter(this,void 0,void 0,function*(){return this.log.debug("received server offer",Object.assign(Object.assign({},this.logContext),{RTCSdpType:c.type,sdp:c.sdp,signalingState:this.subscriber.getSignallingState().toString()})),yield this.subscriber.setRemoteDescription(c),yield this.subscriber.createAndSetAnswer()})}updateConfiguration(c,b){this.publisher.setConfiguration(c),this.subscriber.setConfiguration(c),b&&this.triggerIceRestart()}ensurePCTransportConnection(c,b){var _;return __awaiter(this,void 0,void 0,function*(){const k=yield this.connectionLock.lock();try{this.isPublisherConnectionRequired&&this.publisher.getConnectionState()!=="connected"&&this.publisher.getConnectionState()!=="connecting"&&(this.log.debug("negotiation required, start negotiating",this.logContext),this.publisher.negotiate()),yield Promise.all((_=this.requiredTransports)===null||_===void 0?void 0:_.map(j=>this.ensureTransportConnected(j,c,b)))}finally{k()}})}negotiate(c){return __awaiter(this,void 0,void 0,function*(){return new Promise((b,_)=>__awaiter(this,void 0,void 0,function*(){const k=setTimeout(()=>{_("negotiation timed out")},this.peerConnectionTimeout),j=()=>{clearTimeout(k),_("negotiation aborted")};c.signal.addEventListener("abort",j),this.publisher.once(PCEvents.NegotiationStarted,()=>{c.signal.aborted||this.publisher.once(PCEvents.NegotiationComplete,()=>{clearTimeout(k),b()})}),yield this.publisher.negotiate(_e=>{clearTimeout(k),_(_e)})}))})}addPublisherTransceiver(c,b){return this.publisher.addTransceiver(c,b)}addPublisherTrack(c){return this.publisher.addTrack(c)}createPublisherDataChannel(c,b){return this.publisher.createDataChannel(c,b)}getConnectedAddress(c){return c===SignalTarget.PUBLISHER?this.publisher.getConnectedAddress():c===SignalTarget.SUBSCRIBER?this.publisher.getConnectedAddress():this.requiredTransports[0].getConnectedAddress()}get requiredTransports(){const c=[];return this.isPublisherConnectionRequired&&c.push(this.publisher),this.isSubscriberConnectionRequired&&c.push(this.subscriber),c}ensureTransportConnected(c,b){let _=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.peerConnectionTimeout;return __awaiter(this,void 0,void 0,function*(){if(c.getConnectionState()!=="connected")return new Promise((j,_e)=>__awaiter(this,void 0,void 0,function*(){const et=()=>{this.log.warn("abort transport connection",this.logContext),CriticalTimers.clearTimeout(nt),_e(new ConnectionError("room connection has been cancelled",3))};b!=null&&b.signal.aborted&&et(),b==null||b.signal.addEventListener("abort",et);const nt=CriticalTimers.setTimeout(()=>{b==null||b.signal.removeEventListener("abort",et),_e(new ConnectionError("could not establish pc connection"))},_);for(;this.state!==PCTransportState.CONNECTED;)if(yield sleep(50),b!=null&&b.signal.aborted){_e(new ConnectionError("room connection has been cancelled",3));return}CriticalTimers.clearTimeout(nt),b==null||b.signal.removeEventListener("abort",et),j()}))})}}const lossyDataChannel="_lossy",reliableDataChannel="_reliable",minReconnectWait=2*1e3,leaveReconnect="leave-reconnect";var PCState;(function(a){a[a.New=0]="New",a[a.Connected=1]="Connected",a[a.Disconnected=2]="Disconnected",a[a.Reconnecting=3]="Reconnecting",a[a.Closed=4]="Closed"})(PCState||(PCState={}));class RTCEngine extends eventsExports.EventEmitter{get isClosed(){return this._isClosed}get pendingReconnect(){return!!this.reconnectTimeout}constructor(c){var b;super(),this.options=c,this.rtcConfig={},this.peerConnectionTimeout=roomConnectOptionDefaults.peerConnectionTimeout,this.fullReconnectOnNext=!1,this.subscriberPrimary=!1,this.pcState=PCState.New,this._isClosed=!0,this.pendingTrackResolvers={},this.reconnectAttempts=0,this.reconnectStart=0,this.attemptingReconnect=!1,this.joinAttempts=0,this.maxJoinAttempts=1,this.shouldFailNext=!1,this.log=livekitLogger,this.handleDataChannel=_=>{let{channel:k}=_;return __awaiter(this,void 0,void 0,function*(){if(k){if(k.label===reliableDataChannel)this.reliableDCSub=k;else if(k.label===lossyDataChannel)this.lossyDCSub=k;else return;this.log.debug("on data channel ".concat(k.id,", ").concat(k.label),this.logContext),k.onmessage=this.handleDataMessage}})},this.handleDataMessage=_=>__awaiter(this,void 0,void 0,function*(){var k,j;const _e=yield this.dataProcessLock.lock();try{let et;if(_.data instanceof ArrayBuffer)et=_.data;else if(_.data instanceof Blob)et=yield _.data.arrayBuffer();else{this.log.error("unsupported data type",Object.assign(Object.assign({},this.logContext),{data:_.data}));return}const nt=DataPacket.fromBinary(new Uint8Array(et));((k=nt.value)===null||k===void 0?void 0:k.case)==="speaker"?this.emit(EngineEvent.ActiveSpeakersUpdate,nt.value.value.speakers):((j=nt.value)===null||j===void 0?void 0:j.case)==="user"&&this.emit(EngineEvent.DataPacketReceived,nt.value.value,nt.kind)}finally{_e()}}),this.handleDataError=_=>{const j=_.currentTarget.maxRetransmits===0?"lossy":"reliable";if(_ instanceof ErrorEvent&&_.error){const{error:_e}=_.error;this.log.error("DataChannel error on ".concat(j,": ").concat(_.message),Object.assign(Object.assign({},this.logContext),{error:_e}))}else this.log.error("Unknown DataChannel error on ".concat(j),Object.assign(Object.assign({},this.logContext),{event:_}))},this.handleBufferedAmountLow=_=>{const j=_.currentTarget.maxRetransmits===0?DataPacket_Kind.LOSSY:DataPacket_Kind.RELIABLE;this.updateAndEmitDCBufferStatus(j)},this.handleDisconnect=(_,k)=>{if(this._isClosed)return;this.log.warn("".concat(_," disconnected"),this.logContext),this.reconnectAttempts===0&&(this.reconnectStart=Date.now());const j=nt=>{this.log.warn("could not recover connection after ".concat(this.reconnectAttempts," attempts, ").concat(nt,"ms. giving up"),this.logContext),this.emit(EngineEvent.Disconnected),this.close()},_e=Date.now()-this.reconnectStart;let et=this.getNextRetryDelay({elapsedMs:_e,retryCount:this.reconnectAttempts});if(et===null){j(_e);return}_===leaveReconnect&&(et=0),this.log.debug("reconnecting in ".concat(et,"ms"),this.logContext),this.clearReconnectTimeout(),this.token&&this.regionUrlProvider&&this.regionUrlProvider.updateToken(this.token),this.reconnectTimeout=CriticalTimers.setTimeout(()=>this.attemptReconnect(k).finally(()=>this.reconnectTimeout=void 0),et)},this.waitForRestarted=()=>new Promise((_,k)=>{this.pcState===PCState.Connected&&_();const j=()=>{this.off(EngineEvent.Disconnected,_e),_()},_e=()=>{this.off(EngineEvent.Restarted,j),k()};this.once(EngineEvent.Restarted,j),this.once(EngineEvent.Disconnected,_e)}),this.updateAndEmitDCBufferStatus=_=>{const k=this.isBufferStatusLow(_);typeof k<"u"&&k!==this.dcBufferStatus.get(_)&&(this.dcBufferStatus.set(_,k),this.emit(EngineEvent.DCBufferStatusChanged,k,_))},this.isBufferStatusLow=_=>{const k=this.dataChannelForKind(_);if(k)return k.bufferedAmount<=k.bufferedAmountLowThreshold},this.handleBrowserOnLine=()=>{this.client.currentState===SignalConnectionState.RECONNECTING&&(this.clearReconnectTimeout(),this.attemptReconnect(ReconnectReason.RR_SIGNAL_DISCONNECTED))},this.log=getLogger((b=c.loggerName)!==null&&b!==void 0?b:LoggerNames.Engine),this.loggerOptions={loggerName:c.loggerName,loggerContextCb:()=>this.logContext},this.client=new SignalClient(void 0,this.loggerOptions),this.client.signalLatency=this.options.expSignalLatency,this.reconnectPolicy=this.options.reconnectPolicy,this.registerOnLineListener(),this.closingLock=new Mutex,this.dataProcessLock=new Mutex,this.dcBufferStatus=new Map([[DataPacket_Kind.LOSSY,!0],[DataPacket_Kind.RELIABLE,!0]]),this.client.onParticipantUpdate=_=>this.emit(EngineEvent.ParticipantUpdate,_),this.client.onConnectionQuality=_=>this.emit(EngineEvent.ConnectionQualityUpdate,_),this.client.onRoomUpdate=_=>this.emit(EngineEvent.RoomUpdate,_),this.client.onSubscriptionError=_=>this.emit(EngineEvent.SubscriptionError,_),this.client.onSubscriptionPermissionUpdate=_=>this.emit(EngineEvent.SubscriptionPermissionUpdate,_),this.client.onSpeakersChanged=_=>this.emit(EngineEvent.SpeakersChanged,_),this.client.onStreamStateUpdate=_=>this.emit(EngineEvent.StreamStateChanged,_)}get logContext(){var c,b,_,k,j,_e;return{room:(b=(c=this.latestJoinResponse)===null||c===void 0?void 0:c.room)===null||b===void 0?void 0:b.name,roomSid:(k=(_=this.latestJoinResponse)===null||_===void 0?void 0:_.room)===null||k===void 0?void 0:k.sid,identity:(_e=(j=this.latestJoinResponse)===null||j===void 0?void 0:j.participant)===null||_e===void 0?void 0:_e.identity}}join(c,b,_,k){return __awaiter(this,void 0,void 0,function*(){this.url=c,this.token=b,this.signalOpts=_,this.maxJoinAttempts=_.maxRetries;try{this.joinAttempts+=1,this.setupSignalClientCallbacks();const j=yield this.client.join(c,b,_,k);return this._isClosed=!1,this.latestJoinResponse=j,this.subscriberPrimary=j.subscriberPrimary,this.pcManager||(yield this.configure(j)),this.subscriberPrimary||this.negotiate(),this.clientConfiguration=j.clientConfiguration,j}catch(j){if(j instanceof ConnectionError&&j.reason===1&&(this.log.warn("Couldn't connect to server, attempt ".concat(this.joinAttempts," of ").concat(this.maxJoinAttempts),this.logContext),this.joinAttempts<this.maxJoinAttempts))return this.join(c,b,_,k);throw j}})}close(){return __awaiter(this,void 0,void 0,function*(){const c=yield this.closingLock.lock();if(this.isClosed){c();return}try{this._isClosed=!0,this.emit(EngineEvent.Closing),this.removeAllListeners(),this.deregisterOnLineListener(),this.clearPendingReconnect(),yield this.cleanupPeerConnections(),yield this.cleanupClient()}finally{c()}})}cleanupPeerConnections(){var c;return __awaiter(this,void 0,void 0,function*(){yield(c=this.pcManager)===null||c===void 0?void 0:c.close(),this.pcManager=void 0;const b=_=>{_&&(_.close(),_.onbufferedamountlow=null,_.onclose=null,_.onclosing=null,_.onerror=null,_.onmessage=null,_.onopen=null)};b(this.lossyDC),b(this.lossyDCSub),b(this.reliableDC),b(this.reliableDCSub),this.lossyDC=void 0,this.lossyDCSub=void 0,this.reliableDC=void 0,this.reliableDCSub=void 0})}cleanupClient(){return __awaiter(this,void 0,void 0,function*(){yield this.client.close(),this.client.resetCallbacks()})}addTrack(c){if(this.pendingTrackResolvers[c.cid])throw new TrackInvalidError("a track with the same ID has already been published");return new Promise((b,_)=>{const k=setTimeout(()=>{delete this.pendingTrackResolvers[c.cid],_(new ConnectionError("publication of local track timed out, no response from server"))},1e4);this.pendingTrackResolvers[c.cid]={resolve:j=>{clearTimeout(k),b(j)},reject:()=>{clearTimeout(k),_(new Error("Cancelled publication by calling unpublish"))}},this.client.sendAddTrack(c)})}removeTrack(c){if(c.track&&this.pendingTrackResolvers[c.track.id]){const{reject:b}=this.pendingTrackResolvers[c.track.id];b&&b(),delete this.pendingTrackResolvers[c.track.id]}try{return this.pcManager.removeTrack(c),!0}catch(b){this.log.warn("failed to remove track",Object.assign(Object.assign({},this.logContext),{error:b}))}return!1}updateMuteStatus(c,b){this.client.sendMuteTrack(c,b)}get dataSubscriberReadyState(){var c;return(c=this.reliableDCSub)===null||c===void 0?void 0:c.readyState}getConnectedServerAddress(){var c;return __awaiter(this,void 0,void 0,function*(){return(c=this.pcManager)===null||c===void 0?void 0:c.getConnectedAddress()})}setRegionUrlProvider(c){this.regionUrlProvider=c}configure(c){var b;return __awaiter(this,void 0,void 0,function*(){if(this.pcManager&&this.pcManager.currentState!==PCTransportState.NEW)return;this.participantSid=(b=c.participant)===null||b===void 0?void 0:b.sid;const _=this.makeRTCConfiguration(c);this.pcManager=new PCTransportManager(_,c.subscriberPrimary,this.loggerOptions),this.emit(EngineEvent.TransportsCreated,this.pcManager.publisher,this.pcManager.subscriber),this.pcManager.onIceCandidate=(k,j)=>{this.client.sendIceCandidate(k,j)},this.pcManager.onPublisherOffer=k=>{this.client.sendOffer(k)},this.pcManager.onDataChannel=this.handleDataChannel,this.pcManager.onStateChange=(k,j,_e)=>__awaiter(this,void 0,void 0,function*(){if(this.log.debug("primary PC state changed ".concat(k),this.logContext),k===PCTransportState.CONNECTED){const et=this.pcState===PCState.New;this.pcState=PCState.Connected,et&&this.emit(EngineEvent.Connected,c)}else k===PCTransportState.FAILED&&this.pcState===PCState.Connected&&(this.pcState=PCState.Disconnected,this.handleDisconnect("peerconnection failed",_e==="failed"?ReconnectReason.RR_SUBSCRIBER_FAILED:ReconnectReason.RR_PUBLISHER_FAILED))}),this.pcManager.onTrack=k=>{this.emit(EngineEvent.MediaTrackAdded,k.track,k.streams[0],k.receiver)},this.createDataChannels()})}setupSignalClientCallbacks(){this.client.onAnswer=c=>__awaiter(this,void 0,void 0,function*(){this.pcManager&&(this.log.debug("received server answer",Object.assign(Object.assign({},this.logContext),{RTCSdpType:c.type})),yield this.pcManager.setPublisherAnswer(c))}),this.client.onTrickle=(c,b)=>{this.pcManager&&(this.log.trace("got ICE candidate from peer",Object.assign(Object.assign({},this.logContext),{candidate:c,target:b})),this.pcManager.addIceCandidate(c,b))},this.client.onOffer=c=>__awaiter(this,void 0,void 0,function*(){if(!this.pcManager)return;const b=yield this.pcManager.createSubscriberAnswerFromOffer(c);this.client.sendAnswer(b)}),this.client.onLocalTrackPublished=c=>{var b;if(this.log.debug("received trackPublishedResponse",Object.assign(Object.assign({},this.logContext),{cid:c.cid,track:(b=c.track)===null||b===void 0?void 0:b.sid})),!this.pendingTrackResolvers[c.cid]){this.log.error("missing track resolver for ".concat(c.cid),Object.assign(Object.assign({},this.logContext),{cid:c.cid}));return}const{resolve:_}=this.pendingTrackResolvers[c.cid];delete this.pendingTrackResolvers[c.cid],_(c.track)},this.client.onLocalTrackUnpublished=c=>{this.emit(EngineEvent.LocalTrackUnpublished,c)},this.client.onTokenRefresh=c=>{this.token=c},this.client.onRemoteMuteChanged=(c,b)=>{this.emit(EngineEvent.RemoteMute,c,b)},this.client.onSubscribedQualityUpdate=c=>{this.emit(EngineEvent.SubscribedQualityUpdate,c)},this.client.onClose=()=>{this.handleDisconnect("signal",ReconnectReason.RR_SIGNAL_DISCONNECTED)},this.client.onLeave=c=>{c!=null&&c.canReconnect?(this.fullReconnectOnNext=!0,this.handleDisconnect(leaveReconnect)):(this.emit(EngineEvent.Disconnected,c==null?void 0:c.reason),this.close()),this.log.debug("client leave request",Object.assign(Object.assign({},this.logContext),{reason:c==null?void 0:c.reason}))}}makeRTCConfiguration(c){var b;const _=Object.assign({},this.rtcConfig);if(!((b=this.signalOpts)===null||b===void 0)&&b.e2eeEnabled&&(this.log.debug("E2EE - setting up transports with insertable streams",this.logContext),_.encodedInsertableStreams=!0),c.iceServers&&!_.iceServers){const k=[];c.iceServers.forEach(j=>{const _e={urls:j.urls};j.username&&(_e.username=j.username),j.credential&&(_e.credential=j.credential),k.push(_e)}),_.iceServers=k}return c.clientConfiguration&&c.clientConfiguration.forceRelay===ClientConfigSetting.ENABLED&&(_.iceTransportPolicy="relay"),_.sdpSemantics="unified-plan",_.continualGatheringPolicy="gather_continually",_}createDataChannels(){this.pcManager&&(this.lossyDC&&(this.lossyDC.onmessage=null,this.lossyDC.onerror=null),this.reliableDC&&(this.reliableDC.onmessage=null,this.reliableDC.onerror=null),this.lossyDC=this.pcManager.createPublisherDataChannel(lossyDataChannel,{ordered:!0,maxRetransmits:0}),this.reliableDC=this.pcManager.createPublisherDataChannel(reliableDataChannel,{ordered:!0}),this.lossyDC.onmessage=this.handleDataMessage,this.reliableDC.onmessage=this.handleDataMessage,this.lossyDC.onerror=this.handleDataError,this.reliableDC.onerror=this.handleDataError,this.lossyDC.bufferedAmountLowThreshold=65535,this.reliableDC.bufferedAmountLowThreshold=65535,this.lossyDC.onbufferedamountlow=this.handleBufferedAmountLow,this.reliableDC.onbufferedamountlow=this.handleBufferedAmountLow)}setPreferredCodec(c,b,_){if(!("getCapabilities"in RTCRtpSender))return;const k=RTCRtpSender.getCapabilities(b);if(!k)return;this.log.debug("get sender capabilities",Object.assign(Object.assign({},this.logContext),{cap:k}));const j=[],_e=[],et=[];k.codecs.forEach(nt=>{const it=nt.mimeType.toLowerCase();if(it==="audio/opus"){j.push(nt);return}if(!(it==="video/".concat(_))){et.push(nt);return}if(_==="h264"){nt.sdpFmtpLine&&nt.sdpFmtpLine.includes("profile-level-id=42e01f")?j.push(nt):_e.push(nt);return}j.push(nt)}),supportsSetCodecPreferences(c)&&c.setCodecPreferences(j.concat(_e,et))}createSender(c,b,_){return __awaiter(this,void 0,void 0,function*(){if(supportsTransceiver())return yield this.createTransceiverRTCRtpSender(c,b,_);if(supportsAddTrack())return this.log.warn("using add-track fallback",this.logContext),yield this.createRTCRtpSender(c.mediaStreamTrack);throw new UnexpectedConnectionState("Required webRTC APIs not supported on this device")})}createSimulcastSender(c,b,_,k){return __awaiter(this,void 0,void 0,function*(){if(supportsTransceiver())return this.createSimulcastTransceiverSender(c,b,_,k);if(supportsAddTrack())return this.log.debug("using add-track fallback",this.logContext),this.createRTCRtpSender(c.mediaStreamTrack);throw new UnexpectedConnectionState("Cannot stream on this device")})}createTransceiverRTCRtpSender(c,b,_){return __awaiter(this,void 0,void 0,function*(){if(!this.pcManager)throw new UnexpectedConnectionState("publisher is closed");const k=[];c.mediaStream&&k.push(c.mediaStream);const j={direction:"sendonly",streams:k};_&&(j.sendEncodings=_);const _e=yield this.pcManager.addPublisherTransceiver(c.mediaStreamTrack,j);return c.kind===Track.Kind.Video&&b.videoCodec&&(this.setPreferredCodec(_e,c.kind,b.videoCodec),c.codec=b.videoCodec),_e.sender})}createSimulcastTransceiverSender(c,b,_,k){return __awaiter(this,void 0,void 0,function*(){if(!this.pcManager)throw new UnexpectedConnectionState("publisher is closed");const j={direction:"sendonly"};k&&(j.sendEncodings=k);const _e=yield this.pcManager.addPublisherTransceiver(b.mediaStreamTrack,j);if(_.videoCodec)return this.setPreferredCodec(_e,c.kind,_.videoCodec),c.setSimulcastTrackSender(_.videoCodec,_e.sender),_e.sender})}createRTCRtpSender(c){return __awaiter(this,void 0,void 0,function*(){if(!this.pcManager)throw new UnexpectedConnectionState("publisher is closed");return this.pcManager.addPublisherTrack(c)})}attemptReconnect(c){var b,_,k;return __awaiter(this,void 0,void 0,function*(){if(!this._isClosed){if(this.attemptingReconnect){livekitLogger.warn("already attempting reconnect, returning early",this.logContext);return}(((b=this.clientConfiguration)===null||b===void 0?void 0:b.resumeConnection)===ClientConfigSetting.DISABLED||((k=(_=this.pcManager)===null||_===void 0?void 0:_.currentState)!==null&&k!==void 0?k:PCTransportState.NEW)===PCTransportState.NEW)&&(this.fullReconnectOnNext=!0);try{this.attemptingReconnect=!0,this.fullReconnectOnNext?yield this.restartConnection():yield this.resumeConnection(c),this.clearPendingReconnect(),this.fullReconnectOnNext=!1}catch(j){this.reconnectAttempts+=1;let _e=!0;j instanceof UnexpectedConnectionState?(this.log.debug("received unrecoverable error",Object.assign(Object.assign({},this.logContext),{error:j})),_e=!1):j instanceof SignalReconnectError||(this.fullReconnectOnNext=!0),_e?this.handleDisconnect("reconnect",ReconnectReason.RR_UNKNOWN):(this.log.info("could not recover connection after ".concat(this.reconnectAttempts," attempts, ").concat(Date.now()-this.reconnectStart,"ms. giving up"),this.logContext),this.emit(EngineEvent.Disconnected),yield this.close())}finally{this.attemptingReconnect=!1}}})}getNextRetryDelay(c){try{return this.reconnectPolicy.nextRetryDelayInMs(c)}catch(b){this.log.warn("encountered error in reconnect policy",Object.assign(Object.assign({},this.logContext),{error:b}))}return null}restartConnection(c){var b,_,k;return __awaiter(this,void 0,void 0,function*(){try{if(!this.url||!this.token)throw new UnexpectedConnectionState("could not reconnect, url or token not saved");this.log.info("reconnecting, attempt: ".concat(this.reconnectAttempts),this.logContext),this.emit(EngineEvent.Restarting),this.client.isDisconnected||(yield this.client.sendLeave()),yield this.cleanupPeerConnections(),yield this.cleanupClient();let j;try{if(!this.signalOpts)throw this.log.warn("attempted connection restart, without signal options present",this.logContext),new SignalReconnectError;j=yield this.join(c??this.url,this.token,this.signalOpts)}catch(_e){throw _e instanceof ConnectionError&&_e.reason===0?new UnexpectedConnectionState("could not reconnect, token might be expired"):new SignalReconnectError}if(this.shouldFailNext)throw this.shouldFailNext=!1,new Error("simulated failure");if(this.client.setReconnected(),this.emit(EngineEvent.SignalRestarted,j),yield this.waitForPCReconnected(),this.client.currentState!==SignalConnectionState.CONNECTED)throw new SignalReconnectError("Signal connection got severed during reconnect");(b=this.regionUrlProvider)===null||b===void 0||b.resetAttempts(),this.emit(EngineEvent.Restarted)}catch(j){const _e=yield(_=this.regionUrlProvider)===null||_===void 0?void 0:_.getNextBestRegionUrl();if(_e){yield this.restartConnection(_e);return}else throw(k=this.regionUrlProvider)===null||k===void 0||k.resetAttempts(),j}})}resumeConnection(c){var b;return __awaiter(this,void 0,void 0,function*(){if(!this.url||!this.token)throw new UnexpectedConnectionState("could not reconnect, url or token not saved");if(!this.pcManager)throw new UnexpectedConnectionState("publisher and subscriber connections unset");this.log.info("resuming signal connection, attempt ".concat(this.reconnectAttempts),this.logContext),this.emit(EngineEvent.Resuming);try{this.setupSignalClientCallbacks();const _=yield this.client.reconnect(this.url,this.token,this.participantSid,c);if(_){const k=this.makeRTCConfiguration(_);this.pcManager.updateConfiguration(k)}}catch(_){let k="";throw _ instanceof Error&&(k=_.message,this.log.error(_.message,Object.assign(Object.assign({},this.logContext),{error:_}))),_ instanceof ConnectionError&&_.reason===0?new UnexpectedConnectionState("could not reconnect, token might be expired"):_ instanceof ConnectionError&&_.reason===4?_:new SignalReconnectError(k)}if(this.emit(EngineEvent.SignalResumed),this.shouldFailNext)throw this.shouldFailNext=!1,new Error("simulated failure");if(yield this.pcManager.triggerIceRestart(),yield this.waitForPCReconnected(),this.client.currentState!==SignalConnectionState.CONNECTED)throw new SignalReconnectError("Signal connection got severed during reconnect");this.client.setReconnected(),((b=this.reliableDC)===null||b===void 0?void 0:b.readyState)==="open"&&this.reliableDC.id===null&&this.createDataChannels(),this.emit(EngineEvent.Resumed)})}waitForPCInitialConnection(c,b){return __awaiter(this,void 0,void 0,function*(){if(!this.pcManager)throw new UnexpectedConnectionState("PC manager is closed");yield this.pcManager.ensurePCTransportConnection(b,c)})}waitForPCReconnected(){return __awaiter(this,void 0,void 0,function*(){this.pcState=PCState.Reconnecting,this.log.debug("waiting for peer connection to reconnect",this.logContext);try{if(yield sleep(minReconnectWait),!this.pcManager)throw new UnexpectedConnectionState("PC manager is closed");yield this.pcManager.ensurePCTransportConnection(void 0,this.peerConnectionTimeout),this.pcState=PCState.Connected}catch(c){throw this.pcState=PCState.Disconnected,new ConnectionError("could not establish PC connection, ".concat(c.message))}})}sendDataPacket(c,b){return __awaiter(this,void 0,void 0,function*(){const _=c.toBinary();yield this.ensurePublisherConnected(b);const k=this.dataChannelForKind(b);k&&k.send(_),this.updateAndEmitDCBufferStatus(b)})}ensureDataTransportConnected(c){let b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.subscriberPrimary;var _;return __awaiter(this,void 0,void 0,function*(){if(!this.pcManager)throw new UnexpectedConnectionState("PC manager is closed");const k=b?this.pcManager.subscriber:this.pcManager.publisher,j=b?"Subscriber":"Publisher";if(!k)throw new ConnectionError("".concat(j," connection not set"));!b&&!this.pcManager.publisher.isICEConnected&&this.pcManager.publisher.getICEConnectionState()!=="checking"&&this.negotiate();const _e=this.dataChannelForKind(c,b);if((_e==null?void 0:_e.readyState)==="open")return;const et=new Date().getTime()+this.peerConnectionTimeout;for(;new Date().getTime()<et;){if(k.isICEConnected&&((_=this.dataChannelForKind(c,b))===null||_===void 0?void 0:_.readyState)==="open")return;yield sleep(50)}throw new ConnectionError("could not establish ".concat(j," connection, state: ").concat(k.getICEConnectionState()))})}ensurePublisherConnected(c){return __awaiter(this,void 0,void 0,function*(){yield this.ensureDataTransportConnected(c,!1)})}verifyTransport(){return!(!this.pcManager||this.pcManager.currentState!==PCTransportState.CONNECTED||!this.client.ws||this.client.ws.readyState===WebSocket.CLOSED)}negotiate(){return __awaiter(this,void 0,void 0,function*(){return new Promise((c,b)=>__awaiter(this,void 0,void 0,function*(){if(!this.pcManager){b(new NegotiationError("PC manager is closed"));return}this.pcManager.requirePublisher();const _=new AbortController,k=()=>{_.abort(),this.log.debug("engine disconnected while negotiation was ongoing",this.logContext),c()};this.isClosed&&b("cannot negotiate on closed engine"),this.on(EngineEvent.Closing,k),this.pcManager.publisher.once(PCEvents.RTPVideoPayloadTypes,j=>{const _e=new Map;j.forEach(et=>{const nt=et.codec.toLowerCase();isVideoCodec(nt)&&_e.set(et.payload,nt)}),this.emit(EngineEvent.RTPVideoMapUpdate,_e)});try{yield this.pcManager.negotiate(_),c()}catch(j){j instanceof NegotiationError&&(this.fullReconnectOnNext=!0),this.handleDisconnect("negotiation",ReconnectReason.RR_UNKNOWN),b(j)}finally{this.off(EngineEvent.Closing,k)}}))})}dataChannelForKind(c,b){if(b){if(c===DataPacket_Kind.LOSSY)return this.lossyDCSub;if(c===DataPacket_Kind.RELIABLE)return this.reliableDCSub}else{if(c===DataPacket_Kind.LOSSY)return this.lossyDC;if(c===DataPacket_Kind.RELIABLE)return this.reliableDC}}sendSyncState(c,b){var _,k;if(!this.pcManager){this.log.warn("sync state cannot be sent without peer connection setup",this.logContext);return}const j=this.pcManager.subscriber.getLocalDescription(),_e=this.pcManager.subscriber.getRemoteDescription(),et=(k=(_=this.signalOpts)===null||_===void 0?void 0:_.autoSubscribe)!==null&&k!==void 0?k:!0,nt=new Array,it=new Array;c.forEach(ft=>{ft.isDesired!==et&&nt.push(ft.trackSid),ft.isEnabled||it.push(ft.trackSid)}),this.client.sendSyncState(new SyncState({answer:j?toProtoSessionDescription({sdp:j.sdp,type:j.type}):void 0,offer:_e?toProtoSessionDescription({sdp:_e.sdp,type:_e.type}):void 0,subscription:new UpdateSubscription({trackSids:nt,subscribe:!et,participantTracks:[]}),publishTracks:getTrackPublicationInfo(b),dataChannels:this.dataChannelsInfo(),trackSidsDisabled:it}))}failNext(){this.shouldFailNext=!0}dataChannelsInfo(){const c=[],b=(_,k)=>{(_==null?void 0:_.id)!==void 0&&_.id!==null&&c.push(new DataChannelInfo({label:_.label,id:_.id,target:k}))};return b(this.dataChannelForKind(DataPacket_Kind.LOSSY),SignalTarget.PUBLISHER),b(this.dataChannelForKind(DataPacket_Kind.RELIABLE),SignalTarget.PUBLISHER),b(this.dataChannelForKind(DataPacket_Kind.LOSSY,!0),SignalTarget.SUBSCRIBER),b(this.dataChannelForKind(DataPacket_Kind.RELIABLE,!0),SignalTarget.SUBSCRIBER),c}clearReconnectTimeout(){this.reconnectTimeout&&CriticalTimers.clearTimeout(this.reconnectTimeout)}clearPendingReconnect(){this.clearReconnectTimeout(),this.reconnectAttempts=0}registerOnLineListener(){isWeb()&&window.addEventListener("online",this.handleBrowserOnLine)}deregisterOnLineListener(){isWeb()&&window.removeEventListener("online",this.handleBrowserOnLine)}}class SignalReconnectError extends Error{}class RegionUrlProvider{constructor(c,b){this.lastUpdateAt=0,this.settingsCacheTime=3e3,this.attemptedRegions=[],this.serverUrl=new URL(c),this.token=b}updateToken(c){this.token=c}isCloud(){return isCloud(this.serverUrl)}getServerUrl(){return this.serverUrl}getNextBestRegionUrl(c){return __awaiter(this,void 0,void 0,function*(){if(!this.isCloud())throw Error("region availability is only supported for LiveKit Cloud domains");(!this.regionSettings||Date.now()-this.lastUpdateAt>this.settingsCacheTime)&&(this.regionSettings=yield this.fetchRegionSettings(c));const b=this.regionSettings.regions.filter(_=>!this.attemptedRegions.find(k=>k.url===_.url));if(b.length>0){const _=b[0];return this.attemptedRegions.push(_),livekitLogger.debug("next region: ".concat(_.region)),_.url}else return null})}resetAttempts(){this.attemptedRegions=[]}fetchRegionSettings(c){return __awaiter(this,void 0,void 0,function*(){const b=yield fetch("".concat(getCloudConfigUrl(this.serverUrl),"/regions"),{headers:{authorization:"Bearer ".concat(this.token)},signal:c});if(b.ok){const _=yield b.json();return this.lastUpdateAt=Date.now(),_}else throw new ConnectionError("Could not fetch region settings: ".concat(b.statusText),b.status===401?0:void 0,b.status)})}}function getCloudConfigUrl(a){return"".concat(a.protocol.replace("ws","http"),"//").concat(a.host,"/settings")}const monitorFrequency=2e3;function computeBitrate(a,c){if(!c)return 0;let b,_;return"bytesReceived"in a?(b=a.bytesReceived,_=c.bytesReceived):"bytesSent"in a&&(b=a.bytesSent,_=c.bytesSent),b===void 0||_===void 0||a.timestamp===void 0||c.timestamp===void 0?0:(b-_)*8*1e3/(a.timestamp-c.timestamp)}class LocalAudioTrack extends LocalTrack{constructor(c,b){let _=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,k=arguments.length>3?arguments[3]:void 0,j=arguments.length>4?arguments[4]:void 0;super(c,Track.Kind.Audio,b,_,j),this.stopOnMute=!1,this.monitorSender=()=>__awaiter(this,void 0,void 0,function*(){if(!this.sender){this._currentBitrate=0;return}let _e;try{_e=yield this.getSenderStats()}catch(et){this.log.error("could not get audio sender stats",Object.assign(Object.assign({},this.logContext),{error:et}));return}_e&&this.prevStats&&(this._currentBitrate=computeBitrate(_e,this.prevStats)),this.prevStats=_e}),this.audioContext=k,this.checkForSilence()}setDeviceId(c){return __awaiter(this,void 0,void 0,function*(){return this._constraints.deviceId===c?!0:(this._constraints.deviceId=c,this.isMuted||(yield this.restartTrack()),this.isMuted||unwrapConstraint(c)===this.mediaStreamTrack.getSettings().deviceId)})}mute(){const c=Object.create(null,{mute:{get:()=>super.mute}});return __awaiter(this,void 0,void 0,function*(){const b=yield this.muteLock.lock();try{return this.source===Track.Source.Microphone&&this.stopOnMute&&!this.isUserProvided&&(this.log.debug("stopping mic track",this.logContext),this._mediaStreamTrack.stop()),yield c.mute.call(this),this}finally{b()}})}unmute(){const c=Object.create(null,{unmute:{get:()=>super.unmute}});return __awaiter(this,void 0,void 0,function*(){const b=yield this.muteLock.lock();try{const _=this._constraints.deviceId&&this._mediaStreamTrack.getSettings().deviceId!==unwrapConstraint(this._constraints.deviceId);return this.source===Track.Source.Microphone&&(this.stopOnMute||this._mediaStreamTrack.readyState==="ended"||_)&&!this.isUserProvided&&(this.log.debug("reacquiring mic track",this.logContext),yield this.restartTrack()),yield c.unmute.call(this),this}finally{b()}})}restartTrack(c){return __awaiter(this,void 0,void 0,function*(){let b;if(c){const _=constraintsForOptions({audio:c});typeof _.audio!="boolean"&&(b=_.audio)}yield this.restart(b)})}restart(c){const b=Object.create(null,{restart:{get:()=>super.restart}});return __awaiter(this,void 0,void 0,function*(){const _=yield b.restart.call(this,c);return this.checkForSilence(),_})}startMonitor(){isWeb()&&(this.monitorInterval||(this.monitorInterval=setInterval(()=>{this.monitorSender()},monitorFrequency)))}setProcessor(c){var b;return __awaiter(this,void 0,void 0,function*(){const _=yield this.processorLock.lock();try{if(!this.audioContext)throw Error("Audio context needs to be set on LocalAudioTrack in order to enable processors");if(this.processor&&(yield this.stopProcessor()),this.kind==="unknown")throw TypeError("cannot set processor on track of unknown kind");const k={kind:this.kind,track:this._mediaStreamTrack,audioContext:this.audioContext};this.log.debug("setting up audio processor ".concat(c.name),this.logContext),yield c.init(k),this.processor=c,this.processor.processedTrack&&(yield(b=this.sender)===null||b===void 0?void 0:b.replaceTrack(this.processor.processedTrack))}finally{_()}})}setAudioContext(c){this.audioContext=c}getSenderStats(){var c;return __awaiter(this,void 0,void 0,function*(){if(!(!((c=this.sender)===null||c===void 0)&&c.getStats))return;const b=yield this.sender.getStats();let _;return b.forEach(k=>{k.type==="outbound-rtp"&&(_={type:"audio",streamId:k.id,packetsSent:k.packetsSent,packetsLost:k.packetsLost,bytesSent:k.bytesSent,timestamp:k.timestamp,roundTripTime:k.roundTripTime,jitter:k.jitter})}),_})}checkForSilence(){return __awaiter(this,void 0,void 0,function*(){const c=yield detectSilence(this);return c&&(this.isMuted||this.log.warn("silence detected on local audio track",this.logContext),this.emit(TrackEvent.AudioSilenceDetected)),c})}}function mediaTrackToLocalTrack(a,c,b){switch(a.kind){case"audio":return new LocalAudioTrack(a,c,!1,void 0,b);case"video":return new LocalVideoTrack(a,c,!1,b);default:throw new TrackInvalidError("unsupported track type: ".concat(a.kind))}}const presets169=Object.values(VideoPresets),presets43=Object.values(VideoPresets43),presetsScreenShare=Object.values(ScreenSharePresets),defaultSimulcastPresets169=[VideoPresets.h180,VideoPresets.h360],defaultSimulcastPresets43=[VideoPresets43.h180,VideoPresets43.h360],computeDefaultScreenShareSimulcastPresets=a=>[{scaleResolutionDownBy:2,fps:a.encoding.maxFramerate}].map(b=>{var _,k;return new VideoPreset(Math.floor(a.width/b.scaleResolutionDownBy),Math.floor(a.height/b.scaleResolutionDownBy),Math.max(15e4,Math.floor(a.encoding.maxBitrate/(Math.pow(b.scaleResolutionDownBy,2)*(((_=a.encoding.maxFramerate)!==null&&_!==void 0?_:30)/((k=b.fps)!==null&&k!==void 0?k:30))))),b.fps,a.encoding.priority)}),videoRids=["q","h","f"];function computeVideoEncodings(a,c,b,_){var k,j;let _e=_==null?void 0:_.videoEncoding;a&&(_e=_==null?void 0:_.screenShareEncoding);const et=_==null?void 0:_.simulcast,nt=_==null?void 0:_.scalabilityMode,it=_==null?void 0:_.videoCodec;if(!_e&&!et&&!nt||!c||!b)return[{}];_e||(_e=determineAppropriateEncoding(a,c,b,it),livekitLogger.debug("using video encoding",_e));const ft=new VideoPreset(c,b,_e.maxBitrate,_e.maxFramerate,_e.priority);if(nt&&isSVCCodec(it)){livekitLogger.debug("using svc with scalabilityMode ".concat(nt));const St=new ScalabilityMode(nt),yt=[];if(St.spatial>3)throw new Error("unsupported scalabilityMode: ".concat(nt));for(let _t=0;_t<St.spatial;_t+=1)yt.push({rid:videoRids[2-_t],maxBitrate:_e.maxBitrate/Math.pow(3,_t),maxFramerate:ft.encoding.maxFramerate});return yt[0].scalabilityMode=nt,livekitLogger.debug("encodings",yt),yt}if(!et)return[_e];let pt=[];a?pt=(k=sortPresets(_==null?void 0:_.screenShareSimulcastLayers))!==null&&k!==void 0?k:defaultSimulcastLayers(a,ft):pt=(j=sortPresets(_==null?void 0:_.videoSimulcastLayers))!==null&&j!==void 0?j:defaultSimulcastLayers(a,ft);let mt;if(pt.length>0){const St=pt[0];pt.length>1&&([,mt]=pt);const yt=Math.max(c,b);if(yt>=960&&mt)return encodingsFromPresets(c,b,[St,mt,ft]);if(yt>=480)return encodingsFromPresets(c,b,[St,ft])}return encodingsFromPresets(c,b,[ft])}function computeTrackBackupEncodings(a,c,b){var _,k,j,_e;if(!b.backupCodec||b.backupCodec===!0||b.backupCodec.codec===b.videoCodec)return;c!==b.backupCodec.codec&&livekitLogger.warn("requested a different codec than specified as backup",{serverRequested:c,backup:b.backupCodec.codec}),b.videoCodec=c,b.videoEncoding=b.backupCodec.encoding;const et=a.mediaStreamTrack.getSettings(),nt=(_=et.width)!==null&&_!==void 0?_:(k=a.dimensions)===null||k===void 0?void 0:k.width,it=(j=et.height)!==null&&j!==void 0?j:(_e=a.dimensions)===null||_e===void 0?void 0:_e.height;return computeVideoEncodings(a.source===Track.Source.ScreenShare,nt,it,b)}function determineAppropriateEncoding(a,c,b,_){const k=presetsForResolution(a,c,b);let{encoding:j}=k[0];const _e=Math.max(c,b);for(let et=0;et<k.length;et+=1){const nt=k[et];if(j=nt.encoding,nt.width>=_e)break}if(_)switch(_){case"av1":j=Object.assign({},j),j.maxBitrate=j.maxBitrate*.7;break;case"vp9":j=Object.assign({},j),j.maxBitrate=j.maxBitrate*.85;break}return j}function presetsForResolution(a,c,b){if(a)return presetsScreenShare;const _=c>b?c/b:b/c;return Math.abs(_-16/9)<Math.abs(_-4/3)?presets169:presets43}function defaultSimulcastLayers(a,c){if(a)return computeDefaultScreenShareSimulcastPresets(c);const{width:b,height:_}=c,k=b>_?b/_:_/b;return Math.abs(k-16/9)<Math.abs(k-4/3)?defaultSimulcastPresets169:defaultSimulcastPresets43}function encodingsFromPresets(a,c,b){const _=[];if(b.forEach((k,j)=>{if(j>=videoRids.length)return;const _e=Math.min(a,c),nt={rid:videoRids[j],scaleResolutionDownBy:Math.max(1,_e/Math.min(k.width,k.height)),maxBitrate:k.encoding.maxBitrate};k.encoding.maxFramerate&&(nt.maxFramerate=k.encoding.maxFramerate);const it=isFireFox()||j===0;k.encoding.priority&&it&&(nt.priority=k.encoding.priority,nt.networkPriority=k.encoding.priority),_.push(nt)}),isReactNative()&&getReactNativeOs()==="ios"){let k;_.forEach(_e=>{k?_e.maxFramerate&&_e.maxFramerate>k&&(k=_e.maxFramerate):k=_e.maxFramerate});let j=!0;_.forEach(_e=>{var et;_e.maxFramerate!=k&&(j&&(j=!1,livekitLogger.info("Simulcast on iOS React-Native requires all encodings to share the same framerate.")),livekitLogger.info('Setting framerate of encoding "'.concat((et=_e.rid)!==null&&et!==void 0?et:"",'" to ').concat(k)),_e.maxFramerate=k)})}return _}function sortPresets(a){if(a)return a.sort((c,b)=>{const{encoding:_}=c,{encoding:k}=b;return _.maxBitrate>k.maxBitrate?1:_.maxBitrate<k.maxBitrate?-1:_.maxBitrate===k.maxBitrate&&_.maxFramerate&&k.maxFramerate?_.maxFramerate>k.maxFramerate?1:-1:0})}class ScalabilityMode{constructor(c){const b=c.match(/^L(\d)T(\d)(h|_KEY|_KEY_SHIFT){0,1}$/);if(!b)throw new Error("invalid scalability mode");if(this.spatial=parseInt(b[1]),this.temporal=parseInt(b[2]),b.length>3)switch(b[3]){case"h":case"_KEY":case"_KEY_SHIFT":this.suffix=b[3]}}toString(){var c;return"L".concat(this.spatial,"T").concat(this.temporal).concat((c=this.suffix)!==null&&c!==void 0?c:"")}}const refreshSubscribedCodecAfterNewCodec=5e3;class LocalVideoTrack extends LocalTrack{constructor(c,b){let _=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,k=arguments.length>3?arguments[3]:void 0;super(c,Track.Kind.Video,b,_,k),this.simulcastCodecs=new Map,this.monitorSender=()=>__awaiter(this,void 0,void 0,function*(){if(!this.sender){this._currentBitrate=0;return}let j;try{j=yield this.getSenderStats()}catch(et){this.log.error("could not get audio sender stats",Object.assign(Object.assign({},this.logContext),{error:et}));return}const _e=new Map(j.map(et=>[et.rid,et]));if(this.prevStats){let et=0;_e.forEach((nt,it)=>{var ft;const pt=(ft=this.prevStats)===null||ft===void 0?void 0:ft.get(it);et+=computeBitrate(nt,pt)}),this._currentBitrate=et}this.prevStats=_e}),this.senderLock=new Mutex}get isSimulcast(){return!!(this.sender&&this.sender.getParameters().encodings.length>1)}startMonitor(c){var b;if(this.signalClient=c,!isWeb())return;const _=(b=this.sender)===null||b===void 0?void 0:b.getParameters();_&&(this.encodings=_.encodings),!this.monitorInterval&&(this.monitorInterval=setInterval(()=>{this.monitorSender()},monitorFrequency))}stop(){this._mediaStreamTrack.getConstraints(),this.simulcastCodecs.forEach(c=>{c.mediaStreamTrack.stop()}),super.stop()}pauseUpstream(){const c=Object.create(null,{pauseUpstream:{get:()=>super.pauseUpstream}});var b,_,k,j,_e;return __awaiter(this,void 0,void 0,function*(){yield c.pauseUpstream.call(this);try{for(var et=!0,nt=__asyncValues(this.simulcastCodecs.values()),it;it=yield nt.next(),b=it.done,!b;et=!0)j=it.value,et=!1,yield(_e=j.sender)===null||_e===void 0?void 0:_e.replaceTrack(null)}catch(ft){_={error:ft}}finally{try{!et&&!b&&(k=nt.return)&&(yield k.call(nt))}finally{if(_)throw _.error}}})}resumeUpstream(){const c=Object.create(null,{resumeUpstream:{get:()=>super.resumeUpstream}});var b,_,k,j,_e;return __awaiter(this,void 0,void 0,function*(){yield c.resumeUpstream.call(this);try{for(var et=!0,nt=__asyncValues(this.simulcastCodecs.values()),it;it=yield nt.next(),b=it.done,!b;et=!0){j=it.value,et=!1;const ft=j;yield(_e=ft.sender)===null||_e===void 0?void 0:_e.replaceTrack(ft.mediaStreamTrack)}}catch(ft){_={error:ft}}finally{try{!et&&!b&&(k=nt.return)&&(yield k.call(nt))}finally{if(_)throw _.error}}})}mute(){const c=Object.create(null,{mute:{get:()=>super.mute}});return __awaiter(this,void 0,void 0,function*(){const b=yield this.muteLock.lock();try{return this.source===Track.Source.Camera&&!this.isUserProvided&&(this.log.debug("stopping camera track",this.logContext),this._mediaStreamTrack.stop()),yield c.mute.call(this),this}finally{b()}})}unmute(){const c=Object.create(null,{unmute:{get:()=>super.unmute}});return __awaiter(this,void 0,void 0,function*(){const b=yield this.muteLock.lock();try{return this.source===Track.Source.Camera&&!this.isUserProvided&&(this.log.debug("reacquiring camera track",this.logContext),yield this.restartTrack()),yield c.unmute.call(this),this}finally{b()}})}setTrackMuted(c){super.setTrackMuted(c);for(const b of this.simulcastCodecs.values())b.mediaStreamTrack.enabled=!c}getSenderStats(){var c;return __awaiter(this,void 0,void 0,function*(){if(!(!((c=this.sender)===null||c===void 0)&&c.getStats))return[];const b=[],_=yield this.sender.getStats();return _.forEach(k=>{var j;if(k.type==="outbound-rtp"){const _e={type:"video",streamId:k.id,frameHeight:k.frameHeight,frameWidth:k.frameWidth,firCount:k.firCount,pliCount:k.pliCount,nackCount:k.nackCount,packetsSent:k.packetsSent,bytesSent:k.bytesSent,framesSent:k.framesSent,timestamp:k.timestamp,rid:(j=k.rid)!==null&&j!==void 0?j:k.id,retransmittedPacketsSent:k.retransmittedPacketsSent,qualityLimitationReason:k.qualityLimitationReason,qualityLimitationResolutionChanges:k.qualityLimitationResolutionChanges},et=_.get(k.remoteId);et&&(_e.jitter=et.jitter,_e.packetsLost=et.packetsLost,_e.roundTripTime=et.roundTripTime),b.push(_e)}}),b})}setPublishingQuality(c){const b=[];for(let _=VideoQuality.LOW;_<=VideoQuality.HIGH;_+=1)b.push(new SubscribedQuality({quality:_,enabled:_<=c}));this.log.debug("setting publishing quality. max quality ".concat(c),this.logContext),this.setPublishingLayers(b)}setDeviceId(c){return __awaiter(this,void 0,void 0,function*(){return this._constraints.deviceId===c&&this._mediaStreamTrack.getSettings().deviceId===unwrapConstraint(c)?!0:(this._constraints.deviceId=c,this.isMuted||(yield this.restartTrack()),this.isMuted||unwrapConstraint(c)===this._mediaStreamTrack.getSettings().deviceId)})}restartTrack(c){var b,_,k,j;return __awaiter(this,void 0,void 0,function*(){let _e;if(c){const ft=constraintsForOptions({video:c});typeof ft.video!="boolean"&&(_e=ft.video)}yield this.restart(_e);try{for(var et=!0,nt=__asyncValues(this.simulcastCodecs.values()),it;it=yield nt.next(),b=it.done,!b;et=!0){j=it.value,et=!1;const ft=j;ft.sender&&(ft.mediaStreamTrack=this.mediaStreamTrack.clone(),yield ft.sender.replaceTrack(ft.mediaStreamTrack))}}catch(ft){_={error:ft}}finally{try{!et&&!b&&(k=nt.return)&&(yield k.call(nt))}finally{if(_)throw _.error}}})}setProcessor(c){let b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;const _=Object.create(null,{setProcessor:{get:()=>super.setProcessor}});var k,j,_e,et,nt,it;return __awaiter(this,void 0,void 0,function*(){if(yield _.setProcessor.call(this,c,b),!((nt=this.processor)===null||nt===void 0)&&nt.processedTrack)try{for(var ft=!0,pt=__asyncValues(this.simulcastCodecs.values()),mt;mt=yield pt.next(),k=mt.done,!k;ft=!0)et=mt.value,ft=!1,yield(it=et.sender)===null||it===void 0?void 0:it.replaceTrack(this.processor.processedTrack)}catch(St){j={error:St}}finally{try{!ft&&!k&&(_e=pt.return)&&(yield _e.call(pt))}finally{if(j)throw j.error}}})}addSimulcastTrack(c,b){if(this.simulcastCodecs.has(c)){this.log.error("".concat(c," already added, skipping adding simulcast codec"),this.logContext);return}const _={codec:c,mediaStreamTrack:this.mediaStreamTrack.clone(),sender:void 0,encodings:b};return this.simulcastCodecs.set(c,_),_}setSimulcastTrackSender(c,b){const _=this.simulcastCodecs.get(c);_&&(_.sender=b,setTimeout(()=>{this.subscribedCodecs&&this.setPublishingCodecs(this.subscribedCodecs)},refreshSubscribedCodecAfterNewCodec))}setPublishingCodecs(c){var b,_,k,j,_e,et,nt;return __awaiter(this,void 0,void 0,function*(){if(this.log.debug("setting publishing codecs",Object.assign(Object.assign({},this.logContext),{codecs:c,currentCodec:this.codec})),!this.codec&&c.length>0)return yield this.setPublishingLayers(c[0].qualities),[];this.subscribedCodecs=c;const it=[];try{for(b=!0,_=__asyncValues(c);k=yield _.next(),j=k.done,!j;b=!0){nt=k.value,b=!1;const ft=nt;if(!this.codec||this.codec===ft.codec)yield this.setPublishingLayers(ft.qualities);else{const pt=this.simulcastCodecs.get(ft.codec);if(this.log.debug("try setPublishingCodec for ".concat(ft.codec),Object.assign(Object.assign({},this.logContext),{simulcastCodecInfo:pt})),!pt||!pt.sender){for(const mt of ft.qualities)if(mt.enabled){it.push(ft.codec);break}}else pt.encodings&&(this.log.debug("try setPublishingLayersForSender ".concat(ft.codec),this.logContext),yield setPublishingLayersForSender(pt.sender,pt.encodings,ft.qualities,this.senderLock,this.log,this.logContext))}}}catch(ft){_e={error:ft}}finally{try{!b&&!j&&(et=_.return)&&(yield et.call(_))}finally{if(_e)throw _e.error}}return it})}setPublishingLayers(c){return __awaiter(this,void 0,void 0,function*(){this.log.debug("setting publishing layers",Object.assign(Object.assign({},this.logContext),{qualities:c})),!(!this.sender||!this.encodings)&&(yield setPublishingLayersForSender(this.sender,this.encodings,c,this.senderLock,this.log,this.logContext))})}handleAppVisibilityChanged(){const c=Object.create(null,{handleAppVisibilityChanged:{get:()=>super.handleAppVisibilityChanged}});return __awaiter(this,void 0,void 0,function*(){yield c.handleAppVisibilityChanged.call(this),isMobile()&&this.isInBackground&&this.source===Track.Source.Camera&&(this._mediaStreamTrack.enabled=!1)})}}function setPublishingLayersForSender(a,c,b,_,k,j){return __awaiter(this,void 0,void 0,function*(){const _e=yield _.lock();k.debug("setPublishingLayersForSender",Object.assign(Object.assign({},j),{sender:a,qualities:b,senderEncodings:c}));try{const et=a.getParameters(),{encodings:nt}=et;if(!nt)return;if(nt.length!==c.length){k.warn("cannot set publishing layers, encodings mismatch");return}let it=!1;!1&&nt[0].scalabilityMode||nt.forEach((pt,mt)=>{var St;let yt=(St=pt.rid)!==null&&St!==void 0?St:"";yt===""&&(yt="q");const _t=videoQualityForRid(yt),Tt=b.find(gt=>gt.quality===_t);Tt&&pt.active!==Tt.enabled&&(it=!0,pt.active=Tt.enabled,k.debug("setting layer ".concat(Tt.quality," to ").concat(pt.active?"enabled":"disabled"),j),isFireFox()&&(Tt.enabled?(pt.scaleResolutionDownBy=c[mt].scaleResolutionDownBy,pt.maxBitrate=c[mt].maxBitrate,pt.maxFrameRate=c[mt].maxFrameRate):(pt.scaleResolutionDownBy=4,pt.maxBitrate=10,pt.maxFrameRate=2)))}),it&&(et.encodings=nt,k.debug("setting encodings",Object.assign(Object.assign({},j),{encodings:et.encodings})),yield a.setParameters(et))}finally{_e()}})}function videoQualityForRid(a){switch(a){case"f":return VideoQuality.HIGH;case"h":return VideoQuality.MEDIUM;case"q":return VideoQuality.LOW;default:return VideoQuality.HIGH}}function videoLayersFromEncodings(a,c,b,_){if(!b)return[new VideoLayer({quality:VideoQuality.HIGH,width:a,height:c,bitrate:0,ssrc:0})];if(_){const k=b[0].scalabilityMode,j=new ScalabilityMode(k),_e=[];for(let et=0;et<j.spatial;et+=1)_e.push(new VideoLayer({quality:VideoQuality.HIGH-et,width:Math.ceil(a/Math.pow(2,et)),height:Math.ceil(c/Math.pow(2,et)),bitrate:b[0].maxBitrate?Math.ceil(b[0].maxBitrate/Math.pow(3,et)):0,ssrc:0}));return _e}return b.map(k=>{var j,_e,et;const nt=(j=k.scaleResolutionDownBy)!==null&&j!==void 0?j:1;let it=videoQualityForRid((_e=k.rid)!==null&&_e!==void 0?_e:"");return new VideoLayer({quality:it,width:Math.ceil(a/nt),height:Math.ceil(c/nt),bitrate:(et=k.maxBitrate)!==null&&et!==void 0?et:0,ssrc:0})})}class RemoteTrack extends Track{constructor(c,b,_,k,j){super(c,_,j),this.sid=b,this.receiver=k}setMuted(c){this.isMuted!==c&&(this.isMuted=c,this._mediaStreamTrack.enabled=!c,this.emit(c?TrackEvent.Muted:TrackEvent.Unmuted,this))}setMediaStream(c){this.mediaStream=c;const b=_=>{_.track===this._mediaStreamTrack&&(c.removeEventListener("removetrack",b),this.receiver=void 0,this._currentBitrate=0,this.emit(TrackEvent.Ended,this))};c.addEventListener("removetrack",b)}start(){this.startMonitor(),super.enable()}stop(){this.stopMonitor(),super.disable()}getRTCStatsReport(){var c;return __awaiter(this,void 0,void 0,function*(){return!((c=this.receiver)===null||c===void 0)&&c.getStats?yield this.receiver.getStats():void 0})}startMonitor(){this.monitorInterval||(this.monitorInterval=setInterval(()=>this.monitorReceiver(),monitorFrequency))}}class RemoteAudioTrack extends RemoteTrack{constructor(c,b,_,k,j,_e){super(c,b,Track.Kind.Audio,_,_e),this.monitorReceiver=()=>__awaiter(this,void 0,void 0,function*(){if(!this.receiver){this._currentBitrate=0;return}const et=yield this.getReceiverStats();et&&this.prevStats&&this.receiver&&(this._currentBitrate=computeBitrate(et,this.prevStats)),this.prevStats=et}),this.audioContext=k,this.webAudioPluginNodes=[],j&&(this.sinkId=j.deviceId)}setVolume(c){var b;for(const _ of this.attachedElements)this.audioContext?(b=this.gainNode)===null||b===void 0||b.gain.setTargetAtTime(c,0,.1):_.volume=c;isReactNative()&&this._mediaStreamTrack._setVolume(c),this.elementVolume=c}getVolume(){if(this.elementVolume)return this.elementVolume;if(isReactNative())return 1;let c=0;return this.attachedElements.forEach(b=>{b.volume>c&&(c=b.volume)}),c}setSinkId(c){return __awaiter(this,void 0,void 0,function*(){this.sinkId=c,yield Promise.all(this.attachedElements.map(b=>{if(supportsSetSinkId(b))return b.setSinkId(c)}))})}attach(c){const b=this.attachedElements.length===0;return c?super.attach(c):c=super.attach(),this.sinkId&&supportsSetSinkId(c)&&c.setSinkId(this.sinkId),this.audioContext&&b&&(this.log.debug("using audio context mapping",this.logContext),this.connectWebAudio(this.audioContext,c),c.volume=0,c.muted=!0),this.elementVolume&&this.setVolume(this.elementVolume),c}detach(c){let b;return c?(b=super.detach(c),this.audioContext&&(this.attachedElements.length>0?this.connectWebAudio(this.audioContext,this.attachedElements[0]):this.disconnectWebAudio())):(b=super.detach(),this.disconnectWebAudio()),b}setAudioContext(c){this.audioContext=c,c&&this.attachedElements.length>0?this.connectWebAudio(c,this.attachedElements[0]):c||this.disconnectWebAudio()}setWebAudioPlugins(c){this.webAudioPluginNodes=c,this.attachedElements.length>0&&this.audioContext&&this.connectWebAudio(this.audioContext,this.attachedElements[0])}connectWebAudio(c,b){this.disconnectWebAudio(),this.sourceNode=c.createMediaStreamSource(b.srcObject);let _=this.sourceNode;this.webAudioPluginNodes.forEach(k=>{_.connect(k),_=k}),this.gainNode=c.createGain(),_.connect(this.gainNode),this.gainNode.connect(c.destination),this.elementVolume&&this.gainNode.gain.setTargetAtTime(this.elementVolume,0,.1),c.state!=="running"&&c.resume().then(()=>{c.state!=="running"&&this.emit(TrackEvent.AudioPlaybackFailed,new Error("Audio Context couldn't be started automatically"))}).catch(k=>{this.emit(TrackEvent.AudioPlaybackFailed,k)})}disconnectWebAudio(){var c,b;(c=this.gainNode)===null||c===void 0||c.disconnect(),(b=this.sourceNode)===null||b===void 0||b.disconnect(),this.gainNode=void 0,this.sourceNode=void 0}getReceiverStats(){return __awaiter(this,void 0,void 0,function*(){if(!this.receiver||!this.receiver.getStats)return;const c=yield this.receiver.getStats();let b;return c.forEach(_=>{_.type==="inbound-rtp"&&(b={type:"audio",timestamp:_.timestamp,jitter:_.jitter,bytesReceived:_.bytesReceived,concealedSamples:_.concealedSamples,concealmentEvents:_.concealmentEvents,silentConcealedSamples:_.silentConcealedSamples,silentConcealmentEvents:_.silentConcealmentEvents,totalAudioEnergy:_.totalAudioEnergy,totalSamplesDuration:_.totalSamplesDuration})}),b})}}const REACTION_DELAY=100;class RemoteVideoTrack extends RemoteTrack{constructor(c,b,_,k,j){super(c,b,Track.Kind.Video,_,j),this.elementInfos=[],this.monitorReceiver=()=>__awaiter(this,void 0,void 0,function*(){if(!this.receiver){this._currentBitrate=0;return}const _e=yield this.getReceiverStats();_e&&this.prevStats&&this.receiver&&(this._currentBitrate=computeBitrate(_e,this.prevStats)),this.prevStats=_e}),this.debouncedHandleResize=r$1(()=>{this.updateDimensions()},REACTION_DELAY),this.adaptiveStreamSettings=k}get isAdaptiveStream(){return this.adaptiveStreamSettings!==void 0}get mediaStreamTrack(){return this._mediaStreamTrack}setMuted(c){super.setMuted(c),this.attachedElements.forEach(b=>{c?detachTrack(this._mediaStreamTrack,b):attachToElement(this._mediaStreamTrack,b)})}attach(c){if(c?super.attach(c):c=super.attach(),this.adaptiveStreamSettings&&this.elementInfos.find(b=>b.element===c)===void 0){const b=new HTMLElementInfo(c);this.observeElementInfo(b)}return c}observeElementInfo(c){this.adaptiveStreamSettings&&this.elementInfos.find(b=>b===c)===void 0?(c.handleResize=()=>{this.debouncedHandleResize()},c.handleVisibilityChanged=()=>{this.updateVisibility()},this.elementInfos.push(c),c.observe(),this.debouncedHandleResize(),this.updateVisibility()):this.log.warn("visibility resize observer not triggered",this.logContext)}stopObservingElementInfo(c){if(!this.isAdaptiveStream){this.log.warn("stopObservingElementInfo ignored",this.logContext);return}const b=this.elementInfos.filter(_=>_===c);for(const _ of b)_.stopObserving();this.elementInfos=this.elementInfos.filter(_=>_!==c),this.updateVisibility(),this.debouncedHandleResize()}detach(c){let b=[];if(c)return this.stopObservingElement(c),super.detach(c);b=super.detach();for(const _ of b)this.stopObservingElement(_);return b}getDecoderImplementation(){var c;return(c=this.prevStats)===null||c===void 0?void 0:c.decoderImplementation}getReceiverStats(){return __awaiter(this,void 0,void 0,function*(){if(!this.receiver||!this.receiver.getStats)return;const c=yield this.receiver.getStats();let b,_="",k=new Map;return c.forEach(j=>{j.type==="inbound-rtp"?(_=j.codecId,b={type:"video",framesDecoded:j.framesDecoded,framesDropped:j.framesDropped,framesReceived:j.framesReceived,packetsReceived:j.packetsReceived,packetsLost:j.packetsLost,frameWidth:j.frameWidth,frameHeight:j.frameHeight,pliCount:j.pliCount,firCount:j.firCount,nackCount:j.nackCount,jitter:j.jitter,timestamp:j.timestamp,bytesReceived:j.bytesReceived,decoderImplementation:j.decoderImplementation}):j.type==="codec"&&k.set(j.id,j)}),b&&_!==""&&k.get(_)&&(b.mimeType=k.get(_).mimeType),b})}stopObservingElement(c){const b=this.elementInfos.filter(_=>_.element===c);for(const _ of b)this.stopObservingElementInfo(_)}handleAppVisibilityChanged(){const c=Object.create(null,{handleAppVisibilityChanged:{get:()=>super.handleAppVisibilityChanged}});return __awaiter(this,void 0,void 0,function*(){yield c.handleAppVisibilityChanged.call(this),this.isAdaptiveStream&&this.updateVisibility()})}updateVisibility(){var c,b;const _=this.elementInfos.reduce((et,nt)=>Math.max(et,nt.visibilityChangedAt||0),0),k=!((b=(c=this.adaptiveStreamSettings)===null||c===void 0?void 0:c.pauseVideoInBackground)!==null&&b!==void 0)||b?this.isInBackground:!1,j=this.elementInfos.some(et=>et.pictureInPicture),_e=this.elementInfos.some(et=>et.visible)&&!k||j;if(this.lastVisible!==_e){if(!_e&&Date.now()-_<REACTION_DELAY){CriticalTimers.setTimeout(()=>{this.updateVisibility()},REACTION_DELAY);return}this.lastVisible=_e,this.emit(TrackEvent.VisibilityChanged,_e,this)}}updateDimensions(){var c,b;let _=0,k=0;const j=this.getPixelDensity();for(const _e of this.elementInfos){const et=_e.width()*j,nt=_e.height()*j;et+nt>_+k&&(_=et,k=nt)}((c=this.lastDimensions)===null||c===void 0?void 0:c.width)===_&&((b=this.lastDimensions)===null||b===void 0?void 0:b.height)===k||(this.lastDimensions={width:_,height:k},this.emit(TrackEvent.VideoDimensionsChanged,this.lastDimensions,this))}getPixelDensity(){var c;const b=(c=this.adaptiveStreamSettings)===null||c===void 0?void 0:c.pixelDensity;return b==="screen"?getDevicePixelRatio():b||(getDevicePixelRatio()>2?2:1)}}class HTMLElementInfo{get visible(){return this.isPiP||this.isIntersecting}get pictureInPicture(){return this.isPiP}constructor(c,b){this.onVisibilityChanged=_=>{var k;const{target:j,isIntersecting:_e}=_;j===this.element&&(this.isIntersecting=_e,this.visibilityChangedAt=Date.now(),(k=this.handleVisibilityChanged)===null||k===void 0||k.call(this))},this.onEnterPiP=()=>{var _;this.isPiP=!0,(_=this.handleVisibilityChanged)===null||_===void 0||_.call(this)},this.onLeavePiP=()=>{var _;this.isPiP=!1,(_=this.handleVisibilityChanged)===null||_===void 0||_.call(this)},this.element=c,this.isIntersecting=b??isElementInViewport(c),this.isPiP=isWeb()&&document.pictureInPictureElement===c,this.visibilityChangedAt=0}width(){return this.element.clientWidth}height(){return this.element.clientHeight}observe(){this.isIntersecting=isElementInViewport(this.element),this.isPiP=document.pictureInPictureElement===this.element,this.element.handleResize=()=>{var c;(c=this.handleResize)===null||c===void 0||c.call(this)},this.element.handleVisibilityChanged=this.onVisibilityChanged,getIntersectionObserver().observe(this.element),getResizeObserver().observe(this.element),this.element.addEventListener("enterpictureinpicture",this.onEnterPiP),this.element.addEventListener("leavepictureinpicture",this.onLeavePiP)}stopObserving(){var c,b;(c=getIntersectionObserver())===null||c===void 0||c.unobserve(this.element),(b=getResizeObserver())===null||b===void 0||b.unobserve(this.element),this.element.removeEventListener("enterpictureinpicture",this.onEnterPiP),this.element.removeEventListener("leavepictureinpicture",this.onLeavePiP)}}function isElementInViewport(a){let c=a.offsetTop,b=a.offsetLeft;const _=a.offsetWidth,k=a.offsetHeight,{hidden:j}=a,{opacity:_e,display:et}=getComputedStyle(a);for(;a.offsetParent;)a=a.offsetParent,c+=a.offsetTop,b+=a.offsetLeft;return c<window.pageYOffset+window.innerHeight&&b<window.pageXOffset+window.innerWidth&&c+k>window.pageYOffset&&b+_>window.pageXOffset&&!j&&(_e!==""?parseFloat(_e)>0:!0)&&et!=="none"}class TrackPublication extends eventsExports.EventEmitter{constructor(c,b,_,k){var j;super(),this.metadataMuted=!1,this.encryption=Encryption_Type.NONE,this.log=livekitLogger,this.handleMuted=()=>{this.emit(TrackEvent.Muted)},this.handleUnmuted=()=>{this.emit(TrackEvent.Unmuted)},this.log=getLogger((j=k==null?void 0:k.loggerName)!==null&&j!==void 0?j:LoggerNames.Publication),this.loggerContextCb=this.loggerContextCb,this.setMaxListeners(100),this.kind=c,this.trackSid=b,this.trackName=_,this.source=Track.Source.Unknown}setTrack(c){this.track&&(this.track.off(TrackEvent.Muted,this.handleMuted),this.track.off(TrackEvent.Unmuted,this.handleUnmuted)),this.track=c,c&&(c.on(TrackEvent.Muted,this.handleMuted),c.on(TrackEvent.Unmuted,this.handleUnmuted))}get logContext(){var c;return Object.assign(Object.assign({},(c=this.loggerContextCb)===null||c===void 0?void 0:c.call(this)),getLogContextFromTrack(this))}get isMuted(){return this.metadataMuted}get isEnabled(){return!0}get isSubscribed(){return this.track!==void 0}get isEncrypted(){return this.encryption!==Encryption_Type.NONE}get audioTrack(){if(this.track instanceof LocalAudioTrack||this.track instanceof RemoteAudioTrack)return this.track}get videoTrack(){if(this.track instanceof LocalVideoTrack||this.track instanceof RemoteVideoTrack)return this.track}updateInfo(c){this.trackSid=c.sid,this.trackName=c.name,this.source=Track.sourceFromProto(c.source),this.mimeType=c.mimeType,this.kind===Track.Kind.Video&&c.width>0&&(this.dimensions={width:c.width,height:c.height},this.simulcasted=c.simulcast),this.encryption=c.encryption,this.trackInfo=c,this.log.debug("update publication info",Object.assign(Object.assign({},this.logContext),{info:c}))}}(function(a){(function(c){c.Desired="desired",c.Subscribed="subscribed",c.Unsubscribed="unsubscribed"})(a.SubscriptionStatus||(a.SubscriptionStatus={})),function(c){c.Allowed="allowed",c.NotAllowed="not_allowed"}(a.PermissionStatus||(a.PermissionStatus={}))})(TrackPublication||(TrackPublication={}));class LocalTrackPublication extends TrackPublication{get isUpstreamPaused(){var c;return(c=this.track)===null||c===void 0?void 0:c.isUpstreamPaused}constructor(c,b,_,k){super(c,b.sid,b.name,k),this.track=void 0,this.handleTrackEnded=()=>{this.emit(TrackEvent.Ended)},this.updateInfo(b),this.setTrack(_)}setTrack(c){this.track&&this.track.off(TrackEvent.Ended,this.handleTrackEnded),super.setTrack(c),c&&c.on(TrackEvent.Ended,this.handleTrackEnded)}get isMuted(){return this.track?this.track.isMuted:super.isMuted}get audioTrack(){return super.audioTrack}get videoTrack(){return super.videoTrack}mute(){var c;return __awaiter(this,void 0,void 0,function*(){return(c=this.track)===null||c===void 0?void 0:c.mute()})}unmute(){var c;return __awaiter(this,void 0,void 0,function*(){return(c=this.track)===null||c===void 0?void 0:c.unmute()})}pauseUpstream(){var c;return __awaiter(this,void 0,void 0,function*(){yield(c=this.track)===null||c===void 0?void 0:c.pauseUpstream()})}resumeUpstream(){var c;return __awaiter(this,void 0,void 0,function*(){yield(c=this.track)===null||c===void 0?void 0:c.resumeUpstream()})}}var ConnectionQuality;(function(a){a.Excellent="excellent",a.Good="good",a.Poor="poor",a.Lost="lost",a.Unknown="unknown"})(ConnectionQuality||(ConnectionQuality={}));function qualityFromProto(a){switch(a){case ConnectionQuality$1.EXCELLENT:return ConnectionQuality.Excellent;case ConnectionQuality$1.GOOD:return ConnectionQuality.Good;case ConnectionQuality$1.POOR:return ConnectionQuality.Poor;case ConnectionQuality$1.LOST:return ConnectionQuality.Lost;default:return ConnectionQuality.Unknown}}class Participant extends eventsExports.EventEmitter{get logContext(){var c,b;return Object.assign(Object.assign({},(b=(c=this.loggerOptions)===null||c===void 0?void 0:c.loggerContextCb)===null||b===void 0?void 0:b.call(c)),{participantSid:this.sid,participantId:this.identity})}get isEncrypted(){return this.trackPublications.size>0&&Array.from(this.trackPublications.values()).every(c=>c.isEncrypted)}get isAgent(){var c,b;return(b=(c=this.permissions)===null||c===void 0?void 0:c.agent)!==null&&b!==void 0?b:!1}constructor(c,b,_,k,j){var _e;super(),this.audioLevel=0,this.isSpeaking=!1,this._connectionQuality=ConnectionQuality.Unknown,this.log=livekitLogger,this.log=getLogger((_e=j==null?void 0:j.loggerName)!==null&&_e!==void 0?_e:LoggerNames.Participant),this.loggerOptions=j,this.setMaxListeners(100),this.sid=c,this.identity=b,this.name=_,this.metadata=k,this.audioTrackPublications=new Map,this.videoTrackPublications=new Map,this.trackPublications=new Map}getTrackPublications(){return Array.from(this.trackPublications.values())}getTrackPublication(c){for(const[,b]of this.trackPublications)if(b.source===c)return b}getTrackPublicationByName(c){for(const[,b]of this.trackPublications)if(b.trackName===c)return b}get connectionQuality(){return this._connectionQuality}get isCameraEnabled(){var c;const b=this.getTrackPublication(Track.Source.Camera);return!(!((c=b==null?void 0:b.isMuted)!==null&&c!==void 0)||c)}get isMicrophoneEnabled(){var c;const b=this.getTrackPublication(Track.Source.Microphone);return!(!((c=b==null?void 0:b.isMuted)!==null&&c!==void 0)||c)}get isScreenShareEnabled(){return!!this.getTrackPublication(Track.Source.ScreenShare)}get isLocal(){return!1}get joinedAt(){return this.participantInfo?new Date(Number.parseInt(this.participantInfo.joinedAt.toString())*1e3):new Date}updateInfo(c){return this.participantInfo&&this.participantInfo.sid===c.sid&&this.participantInfo.version>c.version?!1:(this.identity=c.identity,this.sid=c.sid,this._setName(c.name),this._setMetadata(c.metadata),c.permission&&this.setPermissions(c.permission),this.participantInfo=c,this.log.trace("update participant info",Object.assign(Object.assign({},this.logContext),{info:c})),!0)}_setMetadata(c){const b=this.metadata!==c,_=this.metadata;this.metadata=c,b&&this.emit(ParticipantEvent.ParticipantMetadataChanged,_)}_setName(c){const b=this.name!==c;this.name=c,b&&this.emit(ParticipantEvent.ParticipantNameChanged,c)}setPermissions(c){var b,_,k,j,_e;const et=this.permissions,nt=c.canPublish!==((b=this.permissions)===null||b===void 0?void 0:b.canPublish)||c.canSubscribe!==((_=this.permissions)===null||_===void 0?void 0:_.canSubscribe)||c.canPublishData!==((k=this.permissions)===null||k===void 0?void 0:k.canPublishData)||c.hidden!==((j=this.permissions)===null||j===void 0?void 0:j.hidden)||c.recorder!==((_e=this.permissions)===null||_e===void 0?void 0:_e.recorder)||c.canPublishSources.length!==this.permissions.canPublishSources.length||c.canPublishSources.some((it,ft)=>{var pt;return it!==((pt=this.permissions)===null||pt===void 0?void 0:pt.canPublishSources[ft])});return this.permissions=c,nt&&this.emit(ParticipantEvent.ParticipantPermissionsChanged,et),nt}setIsSpeaking(c){c!==this.isSpeaking&&(this.isSpeaking=c,c&&(this.lastSpokeAt=new Date),this.emit(ParticipantEvent.IsSpeakingChanged,c))}setConnectionQuality(c){const b=this._connectionQuality;this._connectionQuality=qualityFromProto(c),b!==this._connectionQuality&&this.emit(ParticipantEvent.ConnectionQualityChanged,this._connectionQuality)}setAudioContext(c){this.audioContext=c,this.audioTrackPublications.forEach(b=>(b.track instanceof RemoteAudioTrack||b.track instanceof LocalAudioTrack)&&b.track.setAudioContext(c))}addTrackPublication(c){c.on(TrackEvent.Muted,()=>{this.emit(ParticipantEvent.TrackMuted,c)}),c.on(TrackEvent.Unmuted,()=>{this.emit(ParticipantEvent.TrackUnmuted,c)});const b=c;switch(b.track&&(b.track.sid=c.trackSid),this.trackPublications.set(c.trackSid,c),c.kind){case Track.Kind.Audio:this.audioTrackPublications.set(c.trackSid,c);break;case Track.Kind.Video:this.videoTrackPublications.set(c.trackSid,c);break}}}function trackPermissionToProto(a){var c,b,_;if(!a.participantSid&&!a.participantIdentity)throw new Error("Invalid track permission, must provide at least one of participantIdentity and participantSid");return new TrackPermission({participantIdentity:(c=a.participantIdentity)!==null&&c!==void 0?c:"",participantSid:(b=a.participantSid)!==null&&b!==void 0?b:"",allTracks:(_=a.allowAll)!==null&&_!==void 0?_:!1,trackSids:a.allowedTrackSids||[]})}class LocalParticipant extends Participant{constructor(c,b,_,k){super(c,b,void 0,void 0,{loggerName:k.loggerName,loggerContextCb:()=>this.engine.logContext}),this.pendingPublishing=new Set,this.pendingPublishPromises=new Map,this.participantTrackPermissions=[],this.allParticipantsAllowedToSubscribe=!0,this.encryptionType=Encryption_Type.NONE,this.handleReconnecting=()=>{this.reconnectFuture||(this.reconnectFuture=new Future)},this.handleReconnected=()=>{var j,_e;(_e=(j=this.reconnectFuture)===null||j===void 0?void 0:j.resolve)===null||_e===void 0||_e.call(j),this.reconnectFuture=void 0,this.updateTrackSubscriptionPermissions()},this.handleDisconnected=()=>{var j,_e;this.reconnectFuture&&(this.reconnectFuture.promise.catch(et=>this.log.warn(et.message,this.logContext)),(_e=(j=this.reconnectFuture)===null||j===void 0?void 0:j.reject)===null||_e===void 0||_e.call(j,"Got disconnected during reconnection attempt"),this.reconnectFuture=void 0)},this.updateTrackSubscriptionPermissions=()=>{this.log.debug("updating track subscription permissions",Object.assign(Object.assign({},this.logContext),{allParticipantsAllowed:this.allParticipantsAllowedToSubscribe,participantTrackPermissions:this.participantTrackPermissions})),this.engine.client.sendUpdateSubscriptionPermissions(this.allParticipantsAllowedToSubscribe,this.participantTrackPermissions.map(j=>trackPermissionToProto(j)))},this.onTrackUnmuted=j=>{this.onTrackMuted(j,j.isUpstreamPaused)},this.onTrackMuted=(j,_e)=>{if(_e===void 0&&(_e=!0),!j.sid){this.log.error("could not update mute status for unpublished track",Object.assign(Object.assign({},this.logContext),getLogContextFromTrack(j)));return}this.engine.updateMuteStatus(j.sid,_e)},this.onTrackUpstreamPaused=j=>{this.log.debug("upstream paused",Object.assign(Object.assign({},this.logContext),getLogContextFromTrack(j))),this.onTrackMuted(j,!0)},this.onTrackUpstreamResumed=j=>{this.log.debug("upstream resumed",Object.assign(Object.assign({},this.logContext),getLogContextFromTrack(j))),this.onTrackMuted(j,j.isMuted)},this.handleSubscribedQualityUpdate=j=>__awaiter(this,void 0,void 0,function*(){var _e,et,nt,it,ft,pt;if(!(!((ft=this.roomOptions)===null||ft===void 0)&&ft.dynacast))return;const mt=this.videoTrackPublications.get(j.trackSid);if(!mt){this.log.warn("received subscribed quality update for unknown track",Object.assign(Object.assign({},this.logContext),{trackSid:j.trackSid}));return}if(j.subscribedCodecs.length>0){if(!mt.videoTrack)return;const Tt=yield mt.videoTrack.setPublishingCodecs(j.subscribedCodecs);try{for(var St=!0,yt=__asyncValues(Tt),_t;_t=yield yt.next(),_e=_t.done,!_e;St=!0){it=_t.value,St=!1;const gt=it;isBackupCodec(gt)&&(this.log.debug("publish ".concat(gt," for ").concat(mt.videoTrack.sid),Object.assign(Object.assign({},this.logContext),getLogContextFromTrack(mt))),yield this.publishAdditionalCodecForTrack(mt.videoTrack,gt,mt.options))}}catch(gt){et={error:gt}}finally{try{!St&&!_e&&(nt=yt.return)&&(yield nt.call(yt))}finally{if(et)throw et.error}}}else j.subscribedQualities.length>0&&(yield(pt=mt.videoTrack)===null||pt===void 0?void 0:pt.setPublishingLayers(j.subscribedQualities))}),this.handleLocalTrackUnpublished=j=>{const _e=this.trackPublications.get(j.trackSid);if(!_e){this.log.warn("received unpublished event for unknown track",Object.assign(Object.assign({},this.logContext),{trackSid:j.trackSid}));return}this.unpublishTrack(_e.track)},this.handleTrackEnded=j=>__awaiter(this,void 0,void 0,function*(){if(j.source===Track.Source.ScreenShare||j.source===Track.Source.ScreenShareAudio)this.log.debug("unpublishing local track due to TrackEnded",Object.assign(Object.assign({},this.logContext),getLogContextFromTrack(j))),this.unpublishTrack(j);else if(j.isUserProvided)yield j.mute();else if(j instanceof LocalAudioTrack||j instanceof LocalVideoTrack)try{if(isWeb())try{const _e=yield navigator==null?void 0:navigator.permissions.query({name:j.source===Track.Source.Camera?"camera":"microphone"});if(_e&&_e.state==="denied")throw this.log.warn("user has revoked access to ".concat(j.source),Object.assign(Object.assign({},this.logContext),getLogContextFromTrack(j))),_e.onchange=()=>{_e.state!=="denied"&&(j.isMuted||j.restartTrack(),_e.onchange=null)},new Error("GetUserMedia Permission denied")}catch{}j.isMuted||(this.log.debug("track ended, attempting to use a different device",Object.assign(Object.assign({},this.logContext),getLogContextFromTrack(j))),yield j.restartTrack())}catch{this.log.warn("could not restart track, muting instead",Object.assign(Object.assign({},this.logContext),getLogContextFromTrack(j))),yield j.mute()}}),this.audioTrackPublications=new Map,this.videoTrackPublications=new Map,this.trackPublications=new Map,this.engine=_,this.roomOptions=k,this.setupEngine(_),this.activeDeviceMap=new Map}get lastCameraError(){return this.cameraError}get lastMicrophoneError(){return this.microphoneError}get isE2EEEnabled(){return this.encryptionType!==Encryption_Type.NONE}getTrackPublication(c){const b=super.getTrackPublication(c);if(b)return b}getTrackPublicationByName(c){const b=super.getTrackPublicationByName(c);if(b)return b}setupEngine(c){this.engine=c,this.engine.on(EngineEvent.RemoteMute,(b,_)=>{const k=this.trackPublications.get(b);!k||!k.track||(_?k.mute():k.unmute())}),this.engine.on(EngineEvent.Connected,this.handleReconnected).on(EngineEvent.SignalRestarted,this.handleReconnected).on(EngineEvent.SignalResumed,this.handleReconnected).on(EngineEvent.Restarting,this.handleReconnecting).on(EngineEvent.Resuming,this.handleReconnecting).on(EngineEvent.LocalTrackUnpublished,this.handleLocalTrackUnpublished).on(EngineEvent.SubscribedQualityUpdate,this.handleSubscribedQualityUpdate).on(EngineEvent.Disconnected,this.handleDisconnected)}setMetadata(c){var b;this.engine.client.sendUpdateLocalMetadata(c,(b=this.name)!==null&&b!==void 0?b:"")}setName(c){var b;this.engine.client.sendUpdateLocalMetadata((b=this.metadata)!==null&&b!==void 0?b:"",c)}setCameraEnabled(c,b,_){return this.setTrackEnabled(Track.Source.Camera,c,b,_)}setMicrophoneEnabled(c,b,_){return this.setTrackEnabled(Track.Source.Microphone,c,b,_)}setScreenShareEnabled(c,b,_){return this.setTrackEnabled(Track.Source.ScreenShare,c,b,_)}setPermissions(c){const b=this.permissions,_=super.setPermissions(c);return _&&b&&this.emit(ParticipantEvent.ParticipantPermissionsChanged,b),_}setE2EEEnabled(c){return __awaiter(this,void 0,void 0,function*(){this.encryptionType=c?Encryption_Type.GCM:Encryption_Type.NONE,yield this.republishAllTracks(void 0,!1)})}setTrackEnabled(c,b,_,k){var j,_e;return __awaiter(this,void 0,void 0,function*(){this.log.debug("setTrackEnabled",Object.assign(Object.assign({},this.logContext),{source:c,enabled:b}));let et=this.getTrackPublication(c);if(b)if(et)yield et.unmute();else{let nt;if(this.pendingPublishing.has(c)){this.log.info("skipping duplicate published source",Object.assign(Object.assign({},this.logContext),{source:c}));return}this.pendingPublishing.add(c);try{switch(c){case Track.Source.Camera:nt=yield this.createTracks({video:(j=_)!==null&&j!==void 0?j:!0});break;case Track.Source.Microphone:nt=yield this.createTracks({audio:(_e=_)!==null&&_e!==void 0?_e:!0});break;case Track.Source.ScreenShare:nt=yield this.createScreenTracks(Object.assign({},_));break;default:throw new TrackInvalidError(c)}const it=[];for(const pt of nt)this.log.info("publishing track",Object.assign(Object.assign({},this.logContext),getLogContextFromTrack(pt))),it.push(this.publishTrack(pt,k));[et]=yield Promise.all(it)}catch(it){throw nt==null||nt.forEach(ft=>{ft.stop()}),it instanceof Error&&!(it instanceof TrackInvalidError)&&this.emit(ParticipantEvent.MediaDevicesError,it),it}finally{this.pendingPublishing.delete(c)}}else if(et&&et.track)if(c===Track.Source.ScreenShare){et=yield this.unpublishTrack(et.track);const nt=this.getTrackPublication(Track.Source.ScreenShareAudio);nt&&nt.track&&this.unpublishTrack(nt.track)}else yield et.mute();return et})}enableCameraAndMicrophone(){return __awaiter(this,void 0,void 0,function*(){if(!(this.pendingPublishing.has(Track.Source.Camera)||this.pendingPublishing.has(Track.Source.Microphone))){this.pendingPublishing.add(Track.Source.Camera),this.pendingPublishing.add(Track.Source.Microphone);try{const c=yield this.createTracks({audio:!0,video:!0});yield Promise.all(c.map(b=>this.publishTrack(b)))}finally{this.pendingPublishing.delete(Track.Source.Camera),this.pendingPublishing.delete(Track.Source.Microphone)}}})}createTracks(c){var b,_;return __awaiter(this,void 0,void 0,function*(){const k=mergeDefaultOptions(c,(b=this.roomOptions)===null||b===void 0?void 0:b.audioCaptureDefaults,(_=this.roomOptions)===null||_===void 0?void 0:_.videoCaptureDefaults),j=constraintsForOptions(k);let _e;try{_e=yield navigator.mediaDevices.getUserMedia(j)}catch(et){throw et instanceof Error&&(j.audio&&(this.microphoneError=et),j.video&&(this.cameraError=et)),et}return j.audio&&(this.microphoneError=void 0,this.emit(ParticipantEvent.AudioStreamAcquired)),j.video&&(this.cameraError=void 0),_e.getTracks().map(et=>{const nt=et.kind==="audio";nt?c.audio:c.video;let it;const ft=nt?j.audio:j.video;typeof ft!="boolean"&&(it=ft);const pt=mediaTrackToLocalTrack(et,it,{loggerName:this.roomOptions.loggerName,loggerContextCb:()=>this.logContext});return pt.kind===Track.Kind.Video?pt.source=Track.Source.Camera:pt.kind===Track.Kind.Audio&&(pt.source=Track.Source.Microphone),pt.mediaStream=_e,pt})})}createScreenTracks(c){return __awaiter(this,void 0,void 0,function*(){if(c===void 0&&(c={}),navigator.mediaDevices.getDisplayMedia===void 0)throw new DeviceUnsupportedError("getDisplayMedia not supported");c.resolution===void 0&&!isSafari17()&&(c.resolution=ScreenSharePresets.h1080fps30.resolution);const b=screenCaptureToDisplayMediaStreamOptions(c),_=yield navigator.mediaDevices.getDisplayMedia(b),k=_.getVideoTracks();if(k.length===0)throw new TrackInvalidError("no video track found");const j=new LocalVideoTrack(k[0],void 0,!1,{loggerName:this.roomOptions.loggerName,loggerContextCb:()=>this.logContext});j.source=Track.Source.ScreenShare,c.contentHint&&(j.mediaStreamTrack.contentHint=c.contentHint);const _e=[j];if(_.getAudioTracks().length>0){this.emit(ParticipantEvent.AudioStreamAcquired);const et=new LocalAudioTrack(_.getAudioTracks()[0],void 0,!1,this.audioContext,{loggerName:this.roomOptions.loggerName,loggerContextCb:()=>this.logContext});et.source=Track.Source.ScreenShareAudio,_e.push(et)}return _e})}publishTrack(c,b){var _,k,j,_e;return __awaiter(this,void 0,void 0,function*(){yield(_=this.reconnectFuture)===null||_===void 0?void 0:_.promise,c instanceof LocalTrack&&this.pendingPublishPromises.has(c)&&(yield this.pendingPublishPromises.get(c));let et;if(c instanceof MediaStreamTrack)et=c.getConstraints();else{et=c.constraints;let St;switch(c.source){case Track.Source.Microphone:St="audioinput";break;case Track.Source.Camera:St="videoinput"}St&&this.activeDeviceMap.has(St)&&(et=Object.assign(Object.assign({},et),{deviceId:this.activeDeviceMap.get(St)}))}if(c instanceof MediaStreamTrack)switch(c.kind){case"audio":c=new LocalAudioTrack(c,et,!0,this.audioContext,{loggerName:this.roomOptions.loggerName,loggerContextCb:()=>this.logContext});break;case"video":c=new LocalVideoTrack(c,et,!0,{loggerName:this.roomOptions.loggerName,loggerContextCb:()=>this.logContext});break;default:throw new TrackInvalidError("unsupported MediaStreamTrack kind ".concat(c.kind))}else c.updateLoggerOptions({loggerName:this.roomOptions.loggerName,loggerContextCb:()=>this.logContext});c instanceof LocalAudioTrack&&c.setAudioContext(this.audioContext);let nt;if(this.trackPublications.forEach(St=>{St.track&&St.track===c&&(nt=St)}),nt)return this.log.warn("track has already been published, skipping",Object.assign(Object.assign({},this.logContext),getLogContextFromTrack(nt))),nt;const it="channelCount"in c.mediaStreamTrack.getSettings()&&c.mediaStreamTrack.getSettings().channelCount===2||c.mediaStreamTrack.getConstraints().channelCount===2,ft=(k=b==null?void 0:b.forceStereo)!==null&&k!==void 0?k:it;ft&&(b||(b={}),b.dtx===void 0&&this.log.info("Opus DTX will be disabled for stereo tracks by default. Enable them explicitly to make it work.",Object.assign(Object.assign({},this.logContext),getLogContextFromTrack(c))),b.red===void 0&&this.log.info("Opus RED will be disabled for stereo tracks by default. Enable them explicitly to make it work."),(j=b.dtx)!==null&&j!==void 0||(b.dtx=!1),(_e=b.red)!==null&&_e!==void 0||(b.red=!1));const pt=Object.assign(Object.assign({},this.roomOptions.publishDefaults),b);isSafari()&&this.roomOptions.e2ee&&(this.log.info("End-to-end encryption is set up, simulcast publishing will be disabled on Safari",Object.assign({},this.logContext)),pt.simulcast=!1),pt.source&&(c.source=pt.source);const mt=this.publish(c,pt,ft);this.pendingPublishPromises.set(c,mt);try{return yield mt}catch(St){throw St}finally{this.pendingPublishPromises.delete(c)}})}publish(c,b,_){var k,j,_e,et,nt,it,ft,pt,mt,St,yt,_t;return __awaiter(this,void 0,void 0,function*(){Array.from(this.trackPublications.values()).find(zt=>c instanceof LocalTrack&&zt.source===c.source)&&c.source!==Track.Source.Unknown&&this.log.info("publishing a second track with the same source: ".concat(c.source),Object.assign(Object.assign({},this.logContext),getLogContextFromTrack(c))),b.stopMicTrackOnMute&&c instanceof LocalAudioTrack&&(c.stopOnMute=!0),c.source===Track.Source.ScreenShare&&isFireFox()&&(b.simulcast=!1),b.videoCodec==="av1"&&!supportsAV1()&&(b.videoCodec=void 0),b.videoCodec==="vp9"&&!supportsVP9()&&(b.videoCodec=void 0),b.videoCodec===void 0&&(b.videoCodec=defaultVideoCodec);const gt=b.videoCodec;c.on(TrackEvent.Muted,this.onTrackMuted),c.on(TrackEvent.Unmuted,this.onTrackUnmuted),c.on(TrackEvent.Ended,this.handleTrackEnded),c.on(TrackEvent.UpstreamPaused,this.onTrackUpstreamPaused),c.on(TrackEvent.UpstreamResumed,this.onTrackUpstreamResumed);const ht=new AddTrackRequest({cid:c.mediaStreamTrack.id,name:b.name,type:Track.kindToProto(c.kind),muted:c.isMuted,source:Track.sourceToProto(c.source),disableDtx:!(!((k=b.dtx)!==null&&k!==void 0)||k),encryption:this.encryptionType,stereo:_,disableRed:this.isE2EEEnabled||!(!((j=b.red)!==null&&j!==void 0)||j),stream:b==null?void 0:b.stream});let Et;if(c.kind===Track.Kind.Video){let zt={width:0,height:0};try{zt=yield c.waitForDimensions()}catch{const ct=(et=(_e=this.roomOptions.videoCaptureDefaults)===null||_e===void 0?void 0:_e.resolution)!==null&&et!==void 0?et:VideoPresets.h720.resolution;zt={width:ct.width,height:ct.height},this.log.error("could not determine track dimensions, using defaults",Object.assign(Object.assign(Object.assign({},this.logContext),getLogContextFromTrack(c)),{dims:zt}))}ht.width=zt.width,ht.height=zt.height,c instanceof LocalVideoTrack&&(isSVCCodec(gt)&&(c.source===Track.Source.ScreenShare&&gt==="vp9"&&(b.scalabilityMode="L1T3"),b.scalabilityMode=(nt=b.scalabilityMode)!==null&&nt!==void 0?nt:"L3T3_KEY"),ht.simulcastCodecs=[new SimulcastCodec({codec:gt,cid:c.mediaStreamTrack.id})],b.backupCodec===!0&&(b.backupCodec={codec:defaultVideoCodec}),b.backupCodec&&gt!==b.backupCodec.codec&&ht.encryption===Encryption_Type.NONE&&(this.roomOptions.dynacast||(this.roomOptions.dynacast=!0),ht.simulcastCodecs.push(new SimulcastCodec({codec:b.backupCodec.codec,cid:""})))),Et=computeVideoEncodings(c.source===Track.Source.ScreenShare,ht.width,ht.height,b),ht.layers=videoLayersFromEncodings(ht.width,ht.height,Et,isSVCCodec(b.videoCodec))}else c.kind===Track.Kind.Audio&&(Et=[{maxBitrate:(it=b.audioPreset)===null||it===void 0?void 0:it.maxBitrate,priority:(pt=(ft=b.audioPreset)===null||ft===void 0?void 0:ft.priority)!==null&&pt!==void 0?pt:"high",networkPriority:(St=(mt=b.audioPreset)===null||mt===void 0?void 0:mt.priority)!==null&&St!==void 0?St:"high"}]);if(!this.engine||this.engine.isClosed)throw new UnexpectedConnectionState("cannot publish track when not connected");const At=yield this.engine.addTrack(ht);let Bt;if(At.codecs.forEach(zt=>{Bt===void 0&&(Bt=zt.mimeType)}),Bt&&c.kind===Track.Kind.Video){const zt=mimeTypeToVideoCodecString(Bt);zt!==gt&&(this.log.debug("falling back to server selected codec",Object.assign(Object.assign(Object.assign({},this.logContext),getLogContextFromTrack(c)),{codec:zt})),b.videoCodec=zt,Et=computeVideoEncodings(c.source===Track.Source.ScreenShare,ht.width,ht.height,b))}const qt=new LocalTrackPublication(c.kind,At,c,{loggerName:this.roomOptions.loggerName,loggerContextCb:()=>this.logContext});if(qt.options=b,c.sid=At.sid,!this.engine.pcManager)throw new UnexpectedConnectionState("pcManager is not ready");if(this.log.debug("publishing ".concat(c.kind," with encodings"),Object.assign(Object.assign({},this.logContext),{encodings:Et,trackInfo:At})),c.sender=yield this.engine.createSender(c,b,Et),Et)if(isFireFox()&&c.kind===Track.Kind.Audio){let zt;for(const Ht of this.engine.pcManager.publisher.getTransceivers())if(Ht.sender===c.sender){zt=Ht;break}zt&&this.engine.pcManager.publisher.setTrackCodecBitrate({transceiver:zt,codec:"opus",maxbr:!((yt=Et[0])===null||yt===void 0)&&yt.maxBitrate?Et[0].maxBitrate/1e3:0})}else c.codec&&isSVCCodec(c.codec)&&(!((_t=Et[0])===null||_t===void 0)&&_t.maxBitrate)&&this.engine.pcManager.publisher.setTrackCodecBitrate({cid:ht.cid,codec:c.codec,maxbr:Et[0].maxBitrate/1e3});return yield this.engine.negotiate(),c instanceof LocalVideoTrack?c.startMonitor(this.engine.client):c instanceof LocalAudioTrack&&c.startMonitor(),this.addTrackPublication(qt),this.emit(ParticipantEvent.LocalTrackPublished,qt),qt})}get isLocal(){return!0}publishAdditionalCodecForTrack(c,b,_){var k;return __awaiter(this,void 0,void 0,function*(){if(this.encryptionType!==Encryption_Type.NONE)return;let j;if(this.trackPublications.forEach(pt=>{pt.track&&pt.track===c&&(j=pt)}),!j)throw new TrackInvalidError("track is not published");if(!(c instanceof LocalVideoTrack))throw new TrackInvalidError("track is not a video track");const _e=Object.assign(Object.assign({},(k=this.roomOptions)===null||k===void 0?void 0:k.publishDefaults),_),et=computeTrackBackupEncodings(c,b,_e);if(!et){this.log.info("backup codec has been disabled, ignoring request to add additional codec for track",Object.assign(Object.assign({},this.logContext),getLogContextFromTrack(c)));return}const nt=c.addSimulcastTrack(b,et);if(!nt)return;const it=new AddTrackRequest({cid:nt.mediaStreamTrack.id,type:Track.kindToProto(c.kind),muted:c.isMuted,source:Track.sourceToProto(c.source),sid:c.sid,simulcastCodecs:[{codec:_e.videoCodec,cid:nt.mediaStreamTrack.id}]});if(it.layers=videoLayersFromEncodings(it.width,it.height,et),!this.engine||this.engine.isClosed)throw new UnexpectedConnectionState("cannot publish track when not connected");const ft=yield this.engine.addTrack(it);yield this.engine.createSimulcastSender(c,nt,_e,et),yield this.engine.negotiate(),this.log.debug("published ".concat(b," for track ").concat(c.sid),Object.assign(Object.assign({},this.logContext),{encodings:et,trackInfo:ft}))})}unpublishTrack(c,b){var _,k;return __awaiter(this,void 0,void 0,function*(){const j=this.getPublicationForTrack(c),_e=j?getLogContextFromTrack(j):void 0;if(this.log.debug("unpublishing track",Object.assign(Object.assign({},this.logContext),_e)),!j||!j.track){this.log.warn("track was not unpublished because no publication was found",Object.assign(Object.assign({},this.logContext),_e));return}c=j.track,c.off(TrackEvent.Muted,this.onTrackMuted),c.off(TrackEvent.Unmuted,this.onTrackUnmuted),c.off(TrackEvent.Ended,this.handleTrackEnded),c.off(TrackEvent.UpstreamPaused,this.onTrackUpstreamPaused),c.off(TrackEvent.UpstreamResumed,this.onTrackUpstreamResumed),b===void 0&&(b=(k=(_=this.roomOptions)===null||_===void 0?void 0:_.stopLocalTrackOnUnpublish)!==null&&k!==void 0?k:!0),b&&c.stop();let et=!1;const nt=c.sender;if(c.sender=void 0,this.engine.pcManager&&this.engine.pcManager.currentState<PCTransportState.FAILED&&nt)try{for(const it of this.engine.pcManager.publisher.getTransceivers())it.sender===nt&&(it.direction="inactive",et=!0);if(this.engine.removeTrack(nt)&&(et=!0),c instanceof LocalVideoTrack){for(const[,it]of c.simulcastCodecs)it.sender&&(this.engine.removeTrack(it.sender)&&(et=!0),it.sender=void 0);c.simulcastCodecs.clear()}}catch(it){this.log.warn("failed to unpublish track",Object.assign(Object.assign(Object.assign({},this.logContext),_e),{error:it}))}switch(this.trackPublications.delete(j.trackSid),j.kind){case Track.Kind.Audio:this.audioTrackPublications.delete(j.trackSid);break;case Track.Kind.Video:this.videoTrackPublications.delete(j.trackSid);break}return this.emit(ParticipantEvent.LocalTrackUnpublished,j),j.setTrack(void 0),et&&(yield this.engine.negotiate()),j})}unpublishTracks(c){return __awaiter(this,void 0,void 0,function*(){return(yield Promise.all(c.map(_=>this.unpublishTrack(_)))).filter(_=>_ instanceof LocalTrackPublication)})}republishAllTracks(c){let b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return __awaiter(this,void 0,void 0,function*(){const _=[];this.trackPublications.forEach(k=>{k.track&&(c&&(k.options=Object.assign(Object.assign({},k.options),c)),_.push(k))}),yield Promise.all(_.map(k=>__awaiter(this,void 0,void 0,function*(){const j=k.track;yield this.unpublishTrack(j,!1),b&&!j.isMuted&&j.source!==Track.Source.ScreenShare&&j.source!==Track.Source.ScreenShareAudio&&(j instanceof LocalAudioTrack||j instanceof LocalVideoTrack)&&!j.isUserProvided&&(this.log.debug("restarting existing track",Object.assign(Object.assign({},this.logContext),{track:k.trackSid})),yield j.restartTrack()),yield this.publishTrack(j,k.options)})))})}publishData(c){let b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return __awaiter(this,void 0,void 0,function*(){const _=b.reliable?DataPacket_Kind.RELIABLE:DataPacket_Kind.LOSSY,k=b.destinationIdentities,j=b.topic,_e=new DataPacket({kind:_,value:{case:"user",value:new UserPacket({participantIdentity:this.identity,payload:c,destinationIdentities:k,topic:j})}});yield this.engine.sendDataPacket(_e,_)})}setTrackSubscriptionPermissions(c){let b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];this.participantTrackPermissions=b,this.allParticipantsAllowedToSubscribe=c,this.engine.client.isDisconnected||this.updateTrackSubscriptionPermissions()}updateInfo(c){return c.sid!==this.sid||!super.updateInfo(c)?!1:(c.tracks.forEach(b=>{var _,k;const j=this.trackPublications.get(b.sid);if(j){const _e=j.isMuted||((k=(_=j.track)===null||_===void 0?void 0:_.isUpstreamPaused)!==null&&k!==void 0?k:!1);_e!==b.muted&&(this.log.debug("updating server mute state after reconcile",Object.assign(Object.assign(Object.assign({},this.logContext),getLogContextFromTrack(j)),{mutedOnServer:_e})),this.engine.client.sendMuteTrack(b.sid,_e))}}),!0)}getPublicationForTrack(c){let b;return this.trackPublications.forEach(_=>{const k=_.track;k&&(c instanceof MediaStreamTrack?(k instanceof LocalAudioTrack||k instanceof LocalVideoTrack)&&k.mediaStreamTrack===c&&(b=_):c===k&&(b=_))}),b}}class RemoteTrackPublication extends TrackPublication{constructor(c,b,_,k){super(c,b.sid,b.name,k),this.track=void 0,this.allowed=!0,this.disabled=!1,this.currentVideoQuality=VideoQuality.HIGH,this.handleEnded=j=>{this.setTrack(void 0),this.emit(TrackEvent.Ended,j)},this.handleVisibilityChange=j=>{this.log.debug("adaptivestream video visibility ".concat(this.trackSid,", visible=").concat(j),this.logContext),this.disabled=!j,this.emitTrackUpdate()},this.handleVideoDimensionsChange=j=>{this.log.debug("adaptivestream video dimensions ".concat(j.width,"x").concat(j.height),this.logContext),this.videoDimensions=j,this.emitTrackUpdate()},this.subscribed=_,this.updateInfo(b)}setSubscribed(c){const b=this.subscriptionStatus,_=this.permissionStatus;this.subscribed=c,c&&(this.allowed=!0);const k=new UpdateSubscription({trackSids:[this.trackSid],subscribe:this.subscribed,participantTracks:[new ParticipantTracks({participantSid:"",trackSids:[this.trackSid]})]});this.emit(TrackEvent.UpdateSubscription,k),this.emitSubscriptionUpdateIfChanged(b),this.emitPermissionUpdateIfChanged(_)}get subscriptionStatus(){return this.subscribed===!1?TrackPublication.SubscriptionStatus.Unsubscribed:super.isSubscribed?TrackPublication.SubscriptionStatus.Subscribed:TrackPublication.SubscriptionStatus.Desired}get permissionStatus(){return this.allowed?TrackPublication.PermissionStatus.Allowed:TrackPublication.PermissionStatus.NotAllowed}get isSubscribed(){return this.subscribed===!1?!1:super.isSubscribed}get isDesired(){return this.subscribed!==!1}get isEnabled(){return!this.disabled}setEnabled(c){!this.isManualOperationAllowed()||this.disabled===!c||(this.disabled=!c,this.emitTrackUpdate())}setVideoQuality(c){!this.isManualOperationAllowed()||this.currentVideoQuality===c||(this.currentVideoQuality=c,this.videoDimensions=void 0,this.emitTrackUpdate())}setVideoDimensions(c){var b,_;this.isManualOperationAllowed()&&(((b=this.videoDimensions)===null||b===void 0?void 0:b.width)===c.width&&((_=this.videoDimensions)===null||_===void 0?void 0:_.height)===c.height||(this.track instanceof RemoteVideoTrack&&(this.videoDimensions=c),this.currentVideoQuality=void 0,this.emitTrackUpdate()))}setVideoFPS(c){this.isManualOperationAllowed()&&this.track instanceof RemoteVideoTrack&&this.fps!==c&&(this.fps=c,this.emitTrackUpdate())}get videoQuality(){return this.currentVideoQuality}setTrack(c){const b=this.subscriptionStatus,_=this.permissionStatus,k=this.track;k!==c&&(k&&(k.off(TrackEvent.VideoDimensionsChanged,this.handleVideoDimensionsChange),k.off(TrackEvent.VisibilityChanged,this.handleVisibilityChange),k.off(TrackEvent.Ended,this.handleEnded),k.detach(),k.stopMonitor(),this.emit(TrackEvent.Unsubscribed,k)),super.setTrack(c),c&&(c.sid=this.trackSid,c.on(TrackEvent.VideoDimensionsChanged,this.handleVideoDimensionsChange),c.on(TrackEvent.VisibilityChanged,this.handleVisibilityChange),c.on(TrackEvent.Ended,this.handleEnded),this.emit(TrackEvent.Subscribed,c)),this.emitPermissionUpdateIfChanged(_),this.emitSubscriptionUpdateIfChanged(b))}setAllowed(c){const b=this.subscriptionStatus,_=this.permissionStatus;this.allowed=c,this.emitPermissionUpdateIfChanged(_),this.emitSubscriptionUpdateIfChanged(b)}setSubscriptionError(c){this.emit(TrackEvent.SubscriptionFailed,c)}updateInfo(c){super.updateInfo(c);const b=this.metadataMuted;this.metadataMuted=c.muted,this.track?this.track.setMuted(c.muted):b!==c.muted&&this.emit(c.muted?TrackEvent.Muted:TrackEvent.Unmuted)}emitSubscriptionUpdateIfChanged(c){const b=this.subscriptionStatus;c!==b&&this.emit(TrackEvent.SubscriptionStatusChanged,b,c)}emitPermissionUpdateIfChanged(c){this.permissionStatus!==c&&this.emit(TrackEvent.SubscriptionPermissionChanged,this.permissionStatus,c)}isManualOperationAllowed(){return this.kind===Track.Kind.Video&&this.isAdaptiveStream?(this.log.warn("adaptive stream is enabled, cannot change video track settings",this.logContext),!1):this.isDesired?!0:(this.log.warn("cannot update track settings when not subscribed",this.logContext),!1)}get isAdaptiveStream(){return this.track instanceof RemoteVideoTrack&&this.track.isAdaptiveStream}emitTrackUpdate(){const c=new UpdateTrackSettings({trackSids:[this.trackSid],disabled:this.disabled,fps:this.fps});this.videoDimensions?(c.width=Math.ceil(this.videoDimensions.width),c.height=Math.ceil(this.videoDimensions.height)):this.currentVideoQuality!==void 0?c.quality=this.currentVideoQuality:c.quality=VideoQuality.HIGH,this.emit(TrackEvent.UpdateSettings,c)}}class RemoteParticipant extends Participant{static fromParticipantInfo(c,b){return new RemoteParticipant(c,b.sid,b.identity,b.name,b.metadata)}constructor(c,b,_,k,j,_e){super(b,_||"",k,j,_e),this.signalClient=c,this.trackPublications=new Map,this.audioTrackPublications=new Map,this.videoTrackPublications=new Map,this.volumeMap=new Map}addTrackPublication(c){super.addTrackPublication(c),c.on(TrackEvent.UpdateSettings,b=>{this.log.debug("send update settings",Object.assign(Object.assign({},this.logContext),getLogContextFromTrack(c))),this.signalClient.sendUpdateTrackSettings(b)}),c.on(TrackEvent.UpdateSubscription,b=>{b.participantTracks.forEach(_=>{_.participantSid=this.sid}),this.signalClient.sendUpdateSubscription(b)}),c.on(TrackEvent.SubscriptionPermissionChanged,b=>{this.emit(ParticipantEvent.TrackSubscriptionPermissionChanged,c,b)}),c.on(TrackEvent.SubscriptionStatusChanged,b=>{this.emit(ParticipantEvent.TrackSubscriptionStatusChanged,c,b)}),c.on(TrackEvent.Subscribed,b=>{this.emit(ParticipantEvent.TrackSubscribed,b,c)}),c.on(TrackEvent.Unsubscribed,b=>{this.emit(ParticipantEvent.TrackUnsubscribed,b,c)}),c.on(TrackEvent.SubscriptionFailed,b=>{this.emit(ParticipantEvent.TrackSubscriptionFailed,c.trackSid,b)})}getTrackPublication(c){const b=super.getTrackPublication(c);if(b)return b}getTrackPublicationByName(c){const b=super.getTrackPublicationByName(c);if(b)return b}setVolume(c){let b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Track.Source.Microphone;this.volumeMap.set(b,c);const _=this.getTrackPublication(b);_&&_.track&&_.track.setVolume(c)}getVolume(){let c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Track.Source.Microphone;const b=this.getTrackPublication(c);return b&&b.track?b.track.getVolume():this.volumeMap.get(c)}addSubscribedMediaTrack(c,b,_,k,j,_e){let et=this.getTrackPublicationBySid(b);if(et||b.startsWith("TR")||this.trackPublications.forEach(ft=>{!et&&c.kind===ft.kind.toString()&&(et=ft)}),!et){if(_e===0){this.log.error("could not find published track",Object.assign(Object.assign({},this.logContext),{trackSid:b})),this.emit(ParticipantEvent.TrackSubscriptionFailed,b);return}_e===void 0&&(_e=20),setTimeout(()=>{this.addSubscribedMediaTrack(c,b,_,k,j,_e-1)},150);return}if(c.readyState==="ended"){this.log.error("unable to subscribe because MediaStreamTrack is ended. Do not call MediaStreamTrack.stop()",Object.assign(Object.assign({},this.logContext),getLogContextFromTrack(et))),this.emit(ParticipantEvent.TrackSubscriptionFailed,b);return}const nt=c.kind==="video";let it;return nt?it=new RemoteVideoTrack(c,b,k,j):it=new RemoteAudioTrack(c,b,k,this.audioContext,this.audioOutput),it.source=et.source,it.isMuted=et.isMuted,it.setMediaStream(_),it.start(),et.setTrack(it),this.volumeMap.has(et.source)&&it instanceof RemoteAudioTrack&&it.setVolume(this.volumeMap.get(et.source)),et}get hasMetadata(){return!!this.participantInfo}getTrackPublicationBySid(c){return this.trackPublications.get(c)}updateInfo(c){if(!super.updateInfo(c))return!1;const b=new Map,_=new Map;return c.tracks.forEach(k=>{var j,_e;let et=this.getTrackPublicationBySid(k.sid);if(et)et.updateInfo(k);else{const nt=Track.kindFromProto(k.type);if(!nt)return;et=new RemoteTrackPublication(nt,k,(j=this.signalClient.connectOptions)===null||j===void 0?void 0:j.autoSubscribe,{loggerContextCb:()=>this.logContext,loggerName:(_e=this.loggerOptions)===null||_e===void 0?void 0:_e.loggerName}),et.updateInfo(k),_.set(k.sid,et);const it=Array.from(this.trackPublications.values()).find(ft=>ft.source===(et==null?void 0:et.source));it&&et.source!==Track.Source.Unknown&&this.log.debug("received a second track publication for ".concat(this.identity," with the same source: ").concat(et.source),Object.assign(Object.assign({},this.logContext),{oldTrack:getLogContextFromTrack(it),newTrack:getLogContextFromTrack(et)})),this.addTrackPublication(et)}b.set(k.sid,et)}),this.trackPublications.forEach(k=>{b.has(k.trackSid)||(this.log.trace("detected removed track on remote participant, unpublishing",Object.assign(Object.assign({},this.logContext),getLogContextFromTrack(k))),this.unpublishTrack(k.trackSid,!0))}),_.forEach(k=>{this.emit(ParticipantEvent.TrackPublished,k)}),!0}unpublishTrack(c,b){const _=this.trackPublications.get(c);if(!_)return;const{track:k}=_;switch(k&&(k.stop(),_.setTrack(void 0)),this.trackPublications.delete(c),_.kind){case Track.Kind.Audio:this.audioTrackPublications.delete(c);break;case Track.Kind.Video:this.videoTrackPublications.delete(c);break}b&&this.emit(ParticipantEvent.TrackUnpublished,_)}setAudioOutput(c){return __awaiter(this,void 0,void 0,function*(){this.audioOutput=c;const b=[];this.audioTrackPublications.forEach(_=>{var k;_.track instanceof RemoteAudioTrack&&b.push(_.track.setSinkId((k=c.deviceId)!==null&&k!==void 0?k:"default"))}),yield Promise.all(b)})}emit(c){for(var b=arguments.length,_=new Array(b>1?b-1:0),k=1;k<b;k++)_[k-1]=arguments[k];return this.log.trace("participant event",Object.assign(Object.assign({},this.logContext),{event:c,args:_})),super.emit(c,..._)}}var ConnectionState;(function(a){a.Disconnected="disconnected",a.Connecting="connecting",a.Connected="connected",a.Reconnecting="reconnecting"})(ConnectionState||(ConnectionState={}));const connectionReconcileFrequency=2*1e3;class Room2 extends eventsExports.EventEmitter{constructor(c){var b,_,k;super(),b=this,this.state=ConnectionState.Disconnected,this.activeSpeakers=[],this.isE2EEEnabled=!1,this.audioEnabled=!0,this.isVideoPlaybackBlocked=!1,this.log=livekitLogger,this.bufferedEvents=[],this.isResuming=!1,this.connect=(j,_e,et)=>__awaiter(this,void 0,void 0,function*(){var nt;const it=yield this.disconnectLock.lock();if(this.state===ConnectionState.Connected)return this.log.info("already connected to room ".concat(this.name),this.logContext),it(),Promise.resolve();if(this.connectFuture)return it(),this.connectFuture.promise;this.setAndEmitConnectionState(ConnectionState.Connecting),((nt=this.regionUrlProvider)===null||nt===void 0?void 0:nt.getServerUrl().toString())!==j&&(this.regionUrl=void 0,this.regionUrlProvider=void 0),isCloud(new URL(j))&&(this.regionUrlProvider===void 0?this.regionUrlProvider=new RegionUrlProvider(j,_e):this.regionUrlProvider.updateToken(_e),this.regionUrlProvider.fetchRegionSettings().catch(mt=>{this.log.warn("could not fetch region settings",Object.assign(Object.assign({},this.logContext),{error:mt}))}));const ft=(mt,St,yt)=>__awaiter(this,void 0,void 0,function*(){var _t;this.abortController&&this.abortController.abort();const Tt=new AbortController;this.abortController=Tt,it==null||it();try{yield this.attemptConnection(yt??j,_e,et,Tt),this.abortController=void 0,mt()}catch(gt){if(this.regionUrlProvider&&gt instanceof ConnectionError&&gt.reason!==3&&gt.reason!==0){let ht=null;try{ht=yield this.regionUrlProvider.getNextBestRegionUrl((_t=this.abortController)===null||_t===void 0?void 0:_t.signal)}catch(Et){if(Et instanceof ConnectionError&&(Et.status===401||Et.reason===3)){this.handleDisconnect(this.options.stopLocalTrackOnUnpublish),St(Et);return}}ht?(this.log.info("Initial connection failed with ConnectionError: ".concat(gt.message,". Retrying with another region: ").concat(ht),this.logContext),yield ft(mt,St,ht)):(this.handleDisconnect(this.options.stopLocalTrackOnUnpublish),St(gt))}else this.handleDisconnect(this.options.stopLocalTrackOnUnpublish),St(gt)}}),pt=this.regionUrl;return this.regionUrl=void 0,this.connectFuture=new Future((mt,St)=>{ft(mt,St,pt)},()=>{this.clearConnectionFutures()}),this.connectFuture.promise}),this.connectSignal=(j,_e,et,nt,it,ft)=>__awaiter(this,void 0,void 0,function*(){var pt,mt,St;const yt=yield et.join(j,_e,{autoSubscribe:nt.autoSubscribe,adaptiveStream:typeof it.adaptiveStream=="object"?!0:it.adaptiveStream,maxRetries:nt.maxRetries,e2eeEnabled:!!this.e2eeManager,websocketTimeout:nt.websocketTimeout},ft.signal);let _t=yt.serverInfo;if(_t||(_t={version:yt.serverVersion,region:yt.serverRegion}),this.log.debug("connected to Livekit Server ".concat(Object.entries(_t).map(Tt=>{let[gt,ht]=Tt;return"".concat(gt,": ").concat(ht)}).join(", ")),{room:(pt=yt.room)===null||pt===void 0?void 0:pt.name,roomSid:(mt=yt.room)===null||mt===void 0?void 0:mt.sid,identity:(St=yt.participant)===null||St===void 0?void 0:St.identity}),!yt.serverVersion)throw new UnsupportedServer("unknown server version");return yt.serverVersion==="0.15.1"&&this.options.dynacast&&(this.log.debug("disabling dynacast due to server version",this.logContext),it.dynacast=!1),yt}),this.applyJoinResponse=j=>{const _e=j.participant;this.localParticipant.sid=_e.sid,this.localParticipant.identity=_e.identity,this.handleParticipantUpdates([_e,...j.otherParticipants]),j.room&&this.handleRoomUpdate(j.room),this.options.e2ee&&this.e2eeManager&&this.e2eeManager.setSifTrailer(j.sifTrailer)},this.attemptConnection=(j,_e,et,nt)=>__awaiter(this,void 0,void 0,function*(){var it,ft,pt;this.state===ConnectionState.Reconnecting||this.isResuming||!((it=this.engine)===null||it===void 0)&&it.pendingReconnect?(this.log.info("Reconnection attempt replaced by new connection attempt",this.logContext),this.recreateEngine()):this.maybeCreateEngine(),!((ft=this.regionUrlProvider)===null||ft===void 0)&&ft.isCloud()&&this.engine.setRegionUrlProvider(this.regionUrlProvider),this.acquireAudioContext(),this.connOptions=Object.assign(Object.assign({},roomConnectOptionDefaults),et),this.connOptions.rtcConfig&&(this.engine.rtcConfig=this.connOptions.rtcConfig),this.connOptions.peerConnectionTimeout&&(this.engine.peerConnectionTimeout=this.connOptions.peerConnectionTimeout);try{const mt=yield this.connectSignal(j,_e,this.engine,this.connOptions,this.options,nt);this.applyJoinResponse(mt),this.setupLocalParticipantEvents(),this.emit(RoomEvent.SignalConnected)}catch(mt){yield this.engine.close(),this.recreateEngine();const St=new ConnectionError("could not establish signal connection");throw mt instanceof Error&&(St.message="".concat(St.message,": ").concat(mt.message)),mt instanceof ConnectionError&&(St.reason=mt.reason,St.status=mt.status),this.log.debug("error trying to establish signal connection",Object.assign(Object.assign({},this.logContext),{error:mt})),St}if(nt.signal.aborted)throw yield this.engine.close(),this.recreateEngine(),new ConnectionError("Connection attempt aborted");try{yield this.engine.waitForPCInitialConnection(this.connOptions.peerConnectionTimeout,nt)}catch(mt){throw yield this.engine.close(),this.recreateEngine(),mt}isWeb()&&this.options.disconnectOnPageLeave&&(window.addEventListener("pagehide",this.onPageLeave),window.addEventListener("beforeunload",this.onPageLeave)),isWeb()&&(document.addEventListener("freeze",this.onPageLeave),(pt=navigator.mediaDevices)===null||pt===void 0||pt.addEventListener("devicechange",this.handleDeviceChange)),this.setAndEmitConnectionState(ConnectionState.Connected),this.emit(RoomEvent.Connected),this.registerConnectionReconcile()}),this.disconnect=function(){let j=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return __awaiter(b,void 0,void 0,function*(){var _e,et,nt,it;const ft=yield this.disconnectLock.lock();try{if(this.state===ConnectionState.Disconnected){this.log.debug("already disconnected",this.logContext);return}this.log.info("disconnect from room",Object.assign({},this.logContext)),(this.state===ConnectionState.Connecting||this.state===ConnectionState.Reconnecting||this.isResuming)&&(this.log.warn("abort connection attempt",this.logContext),(_e=this.abortController)===null||_e===void 0||_e.abort(),(nt=(et=this.connectFuture)===null||et===void 0?void 0:et.reject)===null||nt===void 0||nt.call(et,new ConnectionError("Client initiated disconnect")),this.connectFuture=void 0),!((it=this.engine)===null||it===void 0)&&it.client.isDisconnected||(yield this.engine.client.sendLeave()),this.engine&&(yield this.engine.close()),this.handleDisconnect(j,DisconnectReason.CLIENT_INITIATED),this.engine=void 0}finally{ft()}})},this.onPageLeave=()=>__awaiter(this,void 0,void 0,function*(){yield this.disconnect()}),this.startAudio=()=>__awaiter(this,void 0,void 0,function*(){const j=[],_e=getBrowser();if(_e&&_e.os==="iOS"){const et="livekit-dummy-audio-el";let nt=document.getElementById(et);if(!nt){nt=document.createElement("audio"),nt.id=et,nt.autoplay=!0,nt.hidden=!0;const it=getEmptyAudioStreamTrack();it.enabled=!0;const ft=new MediaStream([it]);nt.srcObject=ft,document.addEventListener("visibilitychange",()=>{nt&&(nt.srcObject=document.hidden?null:ft,document.hidden||(this.log.debug("page visible again, triggering startAudio to resume playback and update playback status",this.logContext),this.startAudio()))}),document.body.append(nt),this.once(RoomEvent.Disconnected,()=>{nt==null||nt.remove(),nt=null})}j.push(nt)}this.remoteParticipants.forEach(et=>{et.audioTrackPublications.forEach(nt=>{nt.track&&nt.track.attachedElements.forEach(it=>{j.push(it)})})});try{yield Promise.all([this.acquireAudioContext(),...j.map(et=>(et.muted=!1,et.play()))]),this.handleAudioPlaybackStarted()}catch(et){throw this.handleAudioPlaybackFailed(et),et}}),this.startVideo=()=>__awaiter(this,void 0,void 0,function*(){const j=[];for(const _e of this.remoteParticipants.values())_e.videoTrackPublications.forEach(et=>{var nt;(nt=et.track)===null||nt===void 0||nt.attachedElements.forEach(it=>{j.includes(it)||j.push(it)})});yield Promise.all(j.map(_e=>_e.play())).then(()=>{this.handleVideoPlaybackStarted()}).catch(_e=>{_e.name==="NotAllowedError"?this.handleVideoPlaybackFailed():this.log.warn("Resuming video playback failed, make sure you call `startVideo` directly in a user gesture handler",this.logContext)})}),this.handleRestarting=()=>{this.clearConnectionReconcile(),this.isResuming=!1;for(const j of this.remoteParticipants.values())this.handleParticipantDisconnected(j.identity,j);this.setAndEmitConnectionState(ConnectionState.Reconnecting)&&this.emit(RoomEvent.Reconnecting)},this.handleSignalRestarted=j=>__awaiter(this,void 0,void 0,function*(){this.log.debug("signal reconnected to server, region ".concat(j.serverRegion),Object.assign(Object.assign({},this.logContext),{region:j.serverRegion})),this.bufferedEvents=[],this.applyJoinResponse(j);try{yield this.localParticipant.republishAllTracks(void 0,!0)}catch(_e){this.log.error("error trying to re-publish tracks after reconnection",Object.assign(Object.assign({},this.logContext),{error:_e}))}try{yield this.engine.waitForRestarted(),this.log.debug("fully reconnected to server",Object.assign(Object.assign({},this.logContext),{region:j.serverRegion}))}catch{return}this.setAndEmitConnectionState(ConnectionState.Connected),this.emit(RoomEvent.Reconnected),this.registerConnectionReconcile(),this.emitBufferedEvents()}),this.handleParticipantUpdates=j=>{j.forEach(_e=>{var et;if(_e.identity===this.localParticipant.identity){this.localParticipant.updateInfo(_e);return}_e.identity===""&&(_e.identity=(et=this.sidToIdentity.get(_e.sid))!==null&&et!==void 0?et:"");let nt=this.remoteParticipants.get(_e.identity);_e.state===ParticipantInfo_State.DISCONNECTED?this.handleParticipantDisconnected(_e.identity,nt):nt=this.getOrCreateParticipant(_e.identity,_e)})},this.handleActiveSpeakersUpdate=j=>{const _e=[],et={};j.forEach(nt=>{if(et[nt.sid]=!0,nt.sid===this.localParticipant.sid)this.localParticipant.audioLevel=nt.level,this.localParticipant.setIsSpeaking(!0),_e.push(this.localParticipant);else{const it=this.getRemoteParticipantBySid(nt.sid);it&&(it.audioLevel=nt.level,it.setIsSpeaking(!0),_e.push(it))}}),et[this.localParticipant.sid]||(this.localParticipant.audioLevel=0,this.localParticipant.setIsSpeaking(!1)),this.remoteParticipants.forEach(nt=>{et[nt.sid]||(nt.audioLevel=0,nt.setIsSpeaking(!1))}),this.activeSpeakers=_e,this.emitWhenConnected(RoomEvent.ActiveSpeakersChanged,_e)},this.handleSpeakersChanged=j=>{const _e=new Map;this.activeSpeakers.forEach(nt=>{_e.set(nt.sid,nt)}),j.forEach(nt=>{let it=this.getRemoteParticipantBySid(nt.sid);nt.sid===this.localParticipant.sid&&(it=this.localParticipant),it&&(it.audioLevel=nt.level,it.setIsSpeaking(nt.active),nt.active?_e.set(nt.sid,it):_e.delete(nt.sid))});const et=Array.from(_e.values());et.sort((nt,it)=>it.audioLevel-nt.audioLevel),this.activeSpeakers=et,this.emitWhenConnected(RoomEvent.ActiveSpeakersChanged,et)},this.handleStreamStateUpdate=j=>{j.streamStates.forEach(_e=>{const et=this.getRemoteParticipantBySid(_e.participantSid);if(!et)return;const nt=et.getTrackPublicationBySid(_e.trackSid);!nt||!nt.track||(nt.track.streamState=Track.streamStateFromProto(_e.state),et.emit(ParticipantEvent.TrackStreamStateChanged,nt,nt.track.streamState),this.emitWhenConnected(RoomEvent.TrackStreamStateChanged,nt,nt.track.streamState,et))})},this.handleSubscriptionPermissionUpdate=j=>{const _e=this.getRemoteParticipantBySid(j.participantSid);if(!_e)return;const et=_e.getTrackPublicationBySid(j.trackSid);et&&et.setAllowed(j.allowed)},this.handleSubscriptionError=j=>{const _e=Array.from(this.remoteParticipants.values()).find(nt=>nt.trackPublications.has(j.trackSid));if(!_e)return;const et=_e.getTrackPublicationBySid(j.trackSid);et&&et.setSubscriptionError(j.err)},this.handleDataPacket=(j,_e)=>{const et=this.remoteParticipants.get(j.participantIdentity);this.emit(RoomEvent.DataReceived,j.payload,et,_e,j.topic),et==null||et.emit(ParticipantEvent.DataReceived,j.payload,_e)},this.handleAudioPlaybackStarted=()=>{this.canPlaybackAudio||(this.audioEnabled=!0,this.emit(RoomEvent.AudioPlaybackStatusChanged,!0))},this.handleAudioPlaybackFailed=j=>{this.log.warn("could not playback audio",Object.assign(Object.assign({},this.logContext),{error:j})),this.canPlaybackAudio&&(this.audioEnabled=!1,this.emit(RoomEvent.AudioPlaybackStatusChanged,!1))},this.handleVideoPlaybackStarted=()=>{this.isVideoPlaybackBlocked&&(this.isVideoPlaybackBlocked=!1,this.emit(RoomEvent.VideoPlaybackStatusChanged,!0))},this.handleVideoPlaybackFailed=()=>{this.isVideoPlaybackBlocked||(this.isVideoPlaybackBlocked=!0,this.emit(RoomEvent.VideoPlaybackStatusChanged,!1))},this.handleDeviceChange=()=>__awaiter(this,void 0,void 0,function*(){this.emit(RoomEvent.MediaDevicesChanged)}),this.handleRoomUpdate=j=>{const _e=this.roomInfo;this.roomInfo=j,_e&&_e.metadata!==j.metadata&&this.emitWhenConnected(RoomEvent.RoomMetadataChanged,j.metadata),(_e==null?void 0:_e.activeRecording)!==j.activeRecording&&this.emitWhenConnected(RoomEvent.RecordingStatusChanged,j.activeRecording)},this.handleConnectionQualityUpdate=j=>{j.updates.forEach(_e=>{if(_e.participantSid===this.localParticipant.sid){this.localParticipant.setConnectionQuality(_e.quality);return}const et=this.getRemoteParticipantBySid(_e.participantSid);et&&et.setConnectionQuality(_e.quality)})},this.onLocalParticipantMetadataChanged=j=>{this.emit(RoomEvent.ParticipantMetadataChanged,j,this.localParticipant)},this.onLocalParticipantNameChanged=j=>{this.emit(RoomEvent.ParticipantNameChanged,j,this.localParticipant)},this.onLocalTrackMuted=j=>{this.emit(RoomEvent.TrackMuted,j,this.localParticipant)},this.onLocalTrackUnmuted=j=>{this.emit(RoomEvent.TrackUnmuted,j,this.localParticipant)},this.onLocalTrackPublished=j=>__awaiter(this,void 0,void 0,function*(){var _e;this.emit(RoomEvent.LocalTrackPublished,j,this.localParticipant),j.track instanceof LocalAudioTrack&&(yield j.track.checkForSilence())&&this.emit(RoomEvent.LocalAudioSilenceDetected,j);const et=yield(_e=j.track)===null||_e===void 0?void 0:_e.getDeviceId(),nt=sourceToKind(j.source);nt&&et&&et!==this.localParticipant.activeDeviceMap.get(nt)&&(this.localParticipant.activeDeviceMap.set(nt,et),this.emit(RoomEvent.ActiveDeviceChanged,nt,et))}),this.onLocalTrackUnpublished=j=>{this.emit(RoomEvent.LocalTrackUnpublished,j,this.localParticipant)},this.onLocalConnectionQualityChanged=j=>{this.emit(RoomEvent.ConnectionQualityChanged,j,this.localParticipant)},this.onMediaDevicesError=j=>{this.emit(RoomEvent.MediaDevicesError,j)},this.onLocalParticipantPermissionsChanged=j=>{this.emit(RoomEvent.ParticipantPermissionsChanged,j,this.localParticipant)},this.setMaxListeners(100),this.remoteParticipants=new Map,this.sidToIdentity=new Map,this.options=Object.assign(Object.assign({},roomOptionDefaults),c),this.log=getLogger((_=this.options.loggerName)!==null&&_!==void 0?_:LoggerNames.Room),this.options.audioCaptureDefaults=Object.assign(Object.assign({},audioDefaults),c==null?void 0:c.audioCaptureDefaults),this.options.videoCaptureDefaults=Object.assign(Object.assign({},videoDefaults),c==null?void 0:c.videoCaptureDefaults),this.options.publishDefaults=Object.assign(Object.assign({},publishDefaults),c==null?void 0:c.publishDefaults),this.maybeCreateEngine(),this.disconnectLock=new Mutex,this.localParticipant=new LocalParticipant("","",this.engine,this.options),this.options.videoCaptureDefaults.deviceId&&this.localParticipant.activeDeviceMap.set("videoinput",unwrapConstraint(this.options.videoCaptureDefaults.deviceId)),this.options.audioCaptureDefaults.deviceId&&this.localParticipant.activeDeviceMap.set("audioinput",unwrapConstraint(this.options.audioCaptureDefaults.deviceId)),!((k=this.options.audioOutput)===null||k===void 0)&&k.deviceId&&this.switchActiveDevice("audiooutput",unwrapConstraint(this.options.audioOutput.deviceId)).catch(j=>this.log.warn("Could not set audio output: ".concat(j.message),this.logContext)),this.options.e2ee&&this.setupE2EE()}setE2EEEnabled(c){return __awaiter(this,void 0,void 0,function*(){if(this.e2eeManager)yield Promise.all([this.localParticipant.setE2EEEnabled(c)]),this.localParticipant.identity!==""&&this.e2eeManager.setParticipantCryptorEnabled(c,this.localParticipant.identity);else throw Error("e2ee not configured, please set e2ee settings within the room options")})}setupE2EE(){var c;this.options.e2ee&&(this.e2eeManager=new E2EEManager(this.options.e2ee),this.e2eeManager.on(EncryptionEvent.ParticipantEncryptionStatusChanged,(b,_)=>{_ instanceof LocalParticipant&&(this.isE2EEEnabled=b),this.emit(RoomEvent.ParticipantEncryptionStatusChanged,b,_)}),this.e2eeManager.on(EncryptionEvent.EncryptionError,b=>this.emit(RoomEvent.EncryptionError,b)),(c=this.e2eeManager)===null||c===void 0||c.setup(this))}get logContext(){var c;return{room:this.name,roomSid:(c=this.roomInfo)===null||c===void 0?void 0:c.sid,identity:this.localParticipant.identity}}get isRecording(){var c,b;return(b=(c=this.roomInfo)===null||c===void 0?void 0:c.activeRecording)!==null&&b!==void 0?b:!1}getSid(){return __awaiter(this,void 0,void 0,function*(){return this.state===ConnectionState.Disconnected?"":this.roomInfo&&this.roomInfo.sid!==""?this.roomInfo.sid:new Promise((c,b)=>{const _=k=>{k.sid!==""&&(this.engine.off(EngineEvent.RoomUpdate,_),c(k.sid))};this.engine.on(EngineEvent.RoomUpdate,_),this.once(RoomEvent.Disconnected,()=>{this.engine.off(EngineEvent.RoomUpdate,_),b("Room disconnected before room server id was available")})})})}get name(){var c,b;return(b=(c=this.roomInfo)===null||c===void 0?void 0:c.name)!==null&&b!==void 0?b:""}get metadata(){var c;return(c=this.roomInfo)===null||c===void 0?void 0:c.metadata}get numParticipants(){var c,b;return(b=(c=this.roomInfo)===null||c===void 0?void 0:c.numParticipants)!==null&&b!==void 0?b:0}get numPublishers(){var c,b;return(b=(c=this.roomInfo)===null||c===void 0?void 0:c.numPublishers)!==null&&b!==void 0?b:0}maybeCreateEngine(){this.engine&&!this.engine.isClosed||(this.engine=new RTCEngine(this.options),this.engine.on(EngineEvent.ParticipantUpdate,this.handleParticipantUpdates).on(EngineEvent.RoomUpdate,this.handleRoomUpdate).on(EngineEvent.SpeakersChanged,this.handleSpeakersChanged).on(EngineEvent.StreamStateChanged,this.handleStreamStateUpdate).on(EngineEvent.ConnectionQualityUpdate,this.handleConnectionQualityUpdate).on(EngineEvent.SubscriptionError,this.handleSubscriptionError).on(EngineEvent.SubscriptionPermissionUpdate,this.handleSubscriptionPermissionUpdate).on(EngineEvent.MediaTrackAdded,(c,b,_)=>{this.onTrackAdded(c,b,_)}).on(EngineEvent.Disconnected,c=>{this.handleDisconnect(this.options.stopLocalTrackOnUnpublish,c)}).on(EngineEvent.ActiveSpeakersUpdate,this.handleActiveSpeakersUpdate).on(EngineEvent.DataPacketReceived,this.handleDataPacket).on(EngineEvent.Resuming,()=>{this.clearConnectionReconcile(),this.isResuming=!0,this.log.info("Resuming signal connection",this.logContext)}).on(EngineEvent.Resumed,()=>{this.registerConnectionReconcile(),this.isResuming=!1,this.log.info("Resumed signal connection",this.logContext),this.updateSubscriptions(),this.emitBufferedEvents()}).on(EngineEvent.SignalResumed,()=>{this.bufferedEvents=[],(this.state===ConnectionState.Reconnecting||this.isResuming)&&this.sendSyncState()}).on(EngineEvent.Restarting,this.handleRestarting).on(EngineEvent.SignalRestarted,this.handleSignalRestarted).on(EngineEvent.DCBufferStatusChanged,(c,b)=>{this.emit(RoomEvent.DCBufferStatusChanged,c,b)}),this.localParticipant&&this.localParticipant.setupEngine(this.engine),this.e2eeManager&&this.e2eeManager.setupEngine(this.engine))}static getLocalDevices(c){let b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return DeviceManager.getInstance().getDevices(c,b)}prepareConnection(c,b){return __awaiter(this,void 0,void 0,function*(){if(this.state===ConnectionState.Disconnected){this.log.debug("prepareConnection to ".concat(c),this.logContext);try{if(isCloud(new URL(c))&&b){this.regionUrlProvider=new RegionUrlProvider(c,b);const _=yield this.regionUrlProvider.getNextBestRegionUrl();_&&this.state===ConnectionState.Disconnected&&(this.regionUrl=_,yield fetch(toHttpUrl(_),{method:"HEAD"}),this.log.debug("prepared connection to ".concat(_),this.logContext))}else yield fetch(toHttpUrl(c),{method:"HEAD"})}catch(_){this.log.warn("could not prepare connection",Object.assign(Object.assign({},this.logContext),{error:_}))}}})}getParticipantByIdentity(c){return this.localParticipant.identity===c?this.localParticipant:this.remoteParticipants.get(c)}clearConnectionFutures(){this.connectFuture=void 0}simulateScenario(c,b){return __awaiter(this,void 0,void 0,function*(){let _=()=>{},k;switch(c){case"signal-reconnect":yield this.engine.client.handleOnClose("simulate disconnect");break;case"speaker":k=new SimulateScenario({scenario:{case:"speakerUpdate",value:3}});break;case"node-failure":k=new SimulateScenario({scenario:{case:"nodeFailure",value:!0}});break;case"server-leave":k=new SimulateScenario({scenario:{case:"serverLeave",value:!0}});break;case"migration":k=new SimulateScenario({scenario:{case:"migration",value:!0}});break;case"resume-reconnect":this.engine.failNext(),yield this.engine.client.handleOnClose("simulate resume-disconnect");break;case"disconnect-signal-on-resume":_=()=>__awaiter(this,void 0,void 0,function*(){yield this.engine.client.handleOnClose("simulate resume-disconnect")}),k=new SimulateScenario({scenario:{case:"disconnectSignalOnResume",value:!0}});break;case"disconnect-signal-on-resume-no-messages":_=()=>__awaiter(this,void 0,void 0,function*(){yield this.engine.client.handleOnClose("simulate resume-disconnect")}),k=new SimulateScenario({scenario:{case:"disconnectSignalOnResumeNoMessages",value:!0}});break;case"full-reconnect":this.engine.fullReconnectOnNext=!0,yield this.engine.client.handleOnClose("simulate full-reconnect");break;case"force-tcp":case"force-tls":k=new SimulateScenario({scenario:{case:"switchCandidateProtocol",value:c==="force-tls"?2:1}}),_=()=>__awaiter(this,void 0,void 0,function*(){const j=this.engine.client.onLeave;j&&j(new LeaveRequest({reason:DisconnectReason.CLIENT_INITIATED,canReconnect:!0}))});break;case"subscriber-bandwidth":if(b===void 0||typeof b!="number")throw new Error("subscriber-bandwidth requires a number as argument");k=new SimulateScenario({scenario:{case:"subscriberBandwidth",value:BigInt(b)}});break}k&&(yield this.engine.client.sendSimulateScenario(k),yield _())})}get canPlaybackAudio(){return this.audioEnabled}get canPlaybackVideo(){return!this.isVideoPlaybackBlocked}getActiveDevice(c){return this.localParticipant.activeDeviceMap.get(c)}switchActiveDevice(c,b){let _=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;var k,j,_e;return __awaiter(this,void 0,void 0,function*(){let et=!1,nt=!0;const it=_?{exact:b}:b;if(c==="audioinput"){const ft=this.options.audioCaptureDefaults.deviceId;this.options.audioCaptureDefaults.deviceId=it,et=ft!==it;const pt=Array.from(this.localParticipant.audioTrackPublications.values()).filter(mt=>mt.source===Track.Source.Microphone);try{nt=(yield Promise.all(pt.map(mt=>{var St;return(St=mt.audioTrack)===null||St===void 0?void 0:St.setDeviceId(it)}))).every(mt=>mt===!0)}catch(mt){throw this.options.audioCaptureDefaults.deviceId=ft,mt}}else if(c==="videoinput"){const ft=this.options.videoCaptureDefaults.deviceId;this.options.videoCaptureDefaults.deviceId=it,et=ft!==it;const pt=Array.from(this.localParticipant.videoTrackPublications.values()).filter(mt=>mt.source===Track.Source.Camera);try{nt=(yield Promise.all(pt.map(mt=>{var St;return(St=mt.videoTrack)===null||St===void 0?void 0:St.setDeviceId(it)}))).every(mt=>mt===!0)}catch(mt){throw this.options.videoCaptureDefaults.deviceId=ft,mt}}else if(c==="audiooutput"){if(!supportsSetSinkId()&&!this.options.webAudioMix||this.options.webAudioMix&&this.audioContext&&!("setSinkId"in this.audioContext))throw new Error("cannot switch audio output, setSinkId not supported");(k=(_e=this.options).audioOutput)!==null&&k!==void 0||(_e.audioOutput={});const ft=this.options.audioOutput.deviceId;this.options.audioOutput.deviceId=b,et=ft!==it;try{this.options.webAudioMix?(j=this.audioContext)===null||j===void 0||j.setSinkId(b):yield Promise.all(Array.from(this.remoteParticipants.values()).map(pt=>pt.setAudioOutput({deviceId:b})))}catch(pt){throw this.options.audioOutput.deviceId=ft,pt}}return et&&nt&&(this.localParticipant.activeDeviceMap.set(c,b),this.emit(RoomEvent.ActiveDeviceChanged,c,b)),nt})}setupLocalParticipantEvents(){this.localParticipant.on(ParticipantEvent.ParticipantMetadataChanged,this.onLocalParticipantMetadataChanged).on(ParticipantEvent.ParticipantNameChanged,this.onLocalParticipantNameChanged).on(ParticipantEvent.TrackMuted,this.onLocalTrackMuted).on(ParticipantEvent.TrackUnmuted,this.onLocalTrackUnmuted).on(ParticipantEvent.LocalTrackPublished,this.onLocalTrackPublished).on(ParticipantEvent.LocalTrackUnpublished,this.onLocalTrackUnpublished).on(ParticipantEvent.ConnectionQualityChanged,this.onLocalConnectionQualityChanged).on(ParticipantEvent.MediaDevicesError,this.onMediaDevicesError).on(ParticipantEvent.AudioStreamAcquired,this.startAudio).on(ParticipantEvent.ParticipantPermissionsChanged,this.onLocalParticipantPermissionsChanged)}recreateEngine(){var c;(c=this.engine)===null||c===void 0||c.close(),this.engine=void 0,this.isResuming=!1,this.remoteParticipants.clear(),this.sidToIdentity.clear(),this.bufferedEvents=[],this.maybeCreateEngine()}onTrackAdded(c,b,_){if(this.state===ConnectionState.Connecting||this.state===ConnectionState.Reconnecting){const ft=()=>{this.onTrackAdded(c,b,_),pt()},pt=()=>{this.off(RoomEvent.Reconnected,ft),this.off(RoomEvent.Connected,ft),this.off(RoomEvent.Disconnected,pt)};this.once(RoomEvent.Reconnected,ft),this.once(RoomEvent.Connected,ft),this.once(RoomEvent.Disconnected,pt);return}if(this.state===ConnectionState.Disconnected){this.log.warn("skipping incoming track after Room disconnected",this.logContext);return}const k=unpackStreamId(b.id),j=k[0];let _e=k[1],et=c.id;if(_e&&_e.startsWith("TR")&&(et=_e),j===this.localParticipant.sid){this.log.warn("tried to create RemoteParticipant for local participant",this.logContext);return}const nt=Array.from(this.remoteParticipants.values()).find(ft=>ft.sid===j);if(!nt){this.log.error("Tried to add a track for a participant, that's not present. Sid: ".concat(j),this.logContext);return}let it;this.options.adaptiveStream&&(typeof this.options.adaptiveStream=="object"?it=this.options.adaptiveStream:it={}),nt.addSubscribedMediaTrack(c,et,b,_,it)}handleDisconnect(){let c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,b=arguments.length>1?arguments[1]:void 0;var _;if(this.clearConnectionReconcile(),this.isResuming=!1,this.bufferedEvents=[],this.state!==ConnectionState.Disconnected){this.regionUrl=void 0;try{this.remoteParticipants.forEach(k=>{k.trackPublications.forEach(j=>{k.unpublishTrack(j.trackSid)})}),this.localParticipant.trackPublications.forEach(k=>{var j,_e;k.track&&this.localParticipant.unpublishTrack(k.track,c),c&&((j=k.track)===null||j===void 0||j.detach(),(_e=k.track)===null||_e===void 0||_e.stop())}),this.localParticipant.off(ParticipantEvent.ParticipantMetadataChanged,this.onLocalParticipantMetadataChanged).off(ParticipantEvent.ParticipantNameChanged,this.onLocalParticipantNameChanged).off(ParticipantEvent.TrackMuted,this.onLocalTrackMuted).off(ParticipantEvent.TrackUnmuted,this.onLocalTrackUnmuted).off(ParticipantEvent.LocalTrackPublished,this.onLocalTrackPublished).off(ParticipantEvent.LocalTrackUnpublished,this.onLocalTrackUnpublished).off(ParticipantEvent.ConnectionQualityChanged,this.onLocalConnectionQualityChanged).off(ParticipantEvent.MediaDevicesError,this.onMediaDevicesError).off(ParticipantEvent.AudioStreamAcquired,this.startAudio).off(ParticipantEvent.ParticipantPermissionsChanged,this.onLocalParticipantPermissionsChanged),this.localParticipant.trackPublications.clear(),this.localParticipant.videoTrackPublications.clear(),this.localParticipant.audioTrackPublications.clear(),this.remoteParticipants.clear(),this.sidToIdentity.clear(),this.activeSpeakers=[],this.audioContext&&typeof this.options.webAudioMix=="boolean"&&(this.audioContext.close(),this.audioContext=void 0),isWeb()&&(window.removeEventListener("beforeunload",this.onPageLeave),window.removeEventListener("pagehide",this.onPageLeave),window.removeEventListener("freeze",this.onPageLeave),(_=navigator.mediaDevices)===null||_===void 0||_.removeEventListener("devicechange",this.handleDeviceChange))}finally{this.setAndEmitConnectionState(ConnectionState.Disconnected),this.emit(RoomEvent.Disconnected,b)}}}handleParticipantDisconnected(c,b){this.remoteParticipants.delete(c),b&&(b.trackPublications.forEach(_=>{b.unpublishTrack(_.trackSid,!0)}),this.emit(RoomEvent.ParticipantDisconnected,b))}acquireAudioContext(){var c,b;return __awaiter(this,void 0,void 0,function*(){if(typeof this.options.webAudioMix!="boolean"&&this.options.webAudioMix.audioContext?this.audioContext=this.options.webAudioMix.audioContext:(!this.audioContext||this.audioContext.state==="closed")&&(this.audioContext=(c=getNewAudioContext())!==null&&c!==void 0?c:void 0),this.audioContext&&this.audioContext.state==="suspended")try{yield this.audioContext.resume()}catch(k){this.log.warn("Could not resume audio context",Object.assign(Object.assign({},this.logContext),{error:k}))}this.options.webAudioMix&&this.remoteParticipants.forEach(k=>k.setAudioContext(this.audioContext)),this.localParticipant.setAudioContext(this.audioContext);const _=((b=this.audioContext)===null||b===void 0?void 0:b.state)==="running";_!==this.canPlaybackAudio&&(this.audioEnabled=_,this.emit(RoomEvent.AudioPlaybackStatusChanged,_))})}createParticipant(c,b){var _;let k;return b?k=RemoteParticipant.fromParticipantInfo(this.engine.client,b):k=new RemoteParticipant(this.engine.client,"",c,void 0,void 0,{loggerContextCb:()=>this.logContext,loggerName:this.options.loggerName}),this.options.webAudioMix&&k.setAudioContext(this.audioContext),!((_=this.options.audioOutput)===null||_===void 0)&&_.deviceId&&k.setAudioOutput(this.options.audioOutput).catch(j=>this.log.warn("Could not set audio output: ".concat(j.message),this.logContext)),k}getOrCreateParticipant(c,b){if(this.remoteParticipants.has(c)){const k=this.remoteParticipants.get(c);return b&&k.updateInfo(b)&&this.sidToIdentity.set(b.sid,b.identity),k}const _=this.createParticipant(c,b);return this.remoteParticipants.set(c,_),this.sidToIdentity.set(b.sid,b.identity),this.emitWhenConnected(RoomEvent.ParticipantConnected,_),_.on(ParticipantEvent.TrackPublished,k=>{this.emitWhenConnected(RoomEvent.TrackPublished,k,_)}).on(ParticipantEvent.TrackSubscribed,(k,j)=>{k.kind===Track.Kind.Audio?(k.on(TrackEvent.AudioPlaybackStarted,this.handleAudioPlaybackStarted),k.on(TrackEvent.AudioPlaybackFailed,this.handleAudioPlaybackFailed)):k.kind===Track.Kind.Video&&(k.on(TrackEvent.VideoPlaybackFailed,this.handleVideoPlaybackFailed),k.on(TrackEvent.VideoPlaybackStarted,this.handleVideoPlaybackStarted)),this.emit(RoomEvent.TrackSubscribed,k,j,_)}).on(ParticipantEvent.TrackUnpublished,k=>{this.emit(RoomEvent.TrackUnpublished,k,_)}).on(ParticipantEvent.TrackUnsubscribed,(k,j)=>{this.emit(RoomEvent.TrackUnsubscribed,k,j,_)}).on(ParticipantEvent.TrackSubscriptionFailed,k=>{this.emit(RoomEvent.TrackSubscriptionFailed,k,_)}).on(ParticipantEvent.TrackMuted,k=>{this.emitWhenConnected(RoomEvent.TrackMuted,k,_)}).on(ParticipantEvent.TrackUnmuted,k=>{this.emitWhenConnected(RoomEvent.TrackUnmuted,k,_)}).on(ParticipantEvent.ParticipantMetadataChanged,k=>{this.emitWhenConnected(RoomEvent.ParticipantMetadataChanged,k,_)}).on(ParticipantEvent.ParticipantNameChanged,k=>{this.emitWhenConnected(RoomEvent.ParticipantNameChanged,k,_)}).on(ParticipantEvent.ConnectionQualityChanged,k=>{this.emitWhenConnected(RoomEvent.ConnectionQualityChanged,k,_)}).on(ParticipantEvent.ParticipantPermissionsChanged,k=>{this.emitWhenConnected(RoomEvent.ParticipantPermissionsChanged,k,_)}).on(ParticipantEvent.TrackSubscriptionStatusChanged,(k,j)=>{this.emitWhenConnected(RoomEvent.TrackSubscriptionStatusChanged,k,j,_)}).on(ParticipantEvent.TrackSubscriptionFailed,(k,j)=>{this.emit(RoomEvent.TrackSubscriptionFailed,k,_,j)}).on(ParticipantEvent.TrackSubscriptionPermissionChanged,(k,j)=>{this.emitWhenConnected(RoomEvent.TrackSubscriptionPermissionChanged,k,j,_)}),b&&_.updateInfo(b),_}sendSyncState(){const c=Array.from(this.remoteParticipants.values()).reduce((_,k)=>(_.push(...k.getTrackPublications()),_),[]),b=this.localParticipant.getTrackPublications();this.engine.sendSyncState(c,b)}updateSubscriptions(){for(const c of this.remoteParticipants.values())for(const b of c.videoTrackPublications.values())b.isSubscribed&&b instanceof RemoteTrackPublication&&b.emitTrackUpdate()}getRemoteParticipantBySid(c){const b=this.sidToIdentity.get(c);if(b)return this.remoteParticipants.get(b)}registerConnectionReconcile(){this.clearConnectionReconcile();let c=0;this.connectionReconcileInterval=CriticalTimers.setInterval(()=>{!this.engine||this.engine.isClosed||!this.engine.verifyTransport()?(c++,this.log.warn("detected connection state mismatch",Object.assign(Object.assign({},this.logContext),{numFailures:c,engine:{closed:this.engine.isClosed,transportsConnected:this.engine.verifyTransport()}})),c>=3&&(this.recreateEngine(),this.handleDisconnect(this.options.stopLocalTrackOnUnpublish,DisconnectReason.STATE_MISMATCH))):c=0},connectionReconcileFrequency)}clearConnectionReconcile(){this.connectionReconcileInterval&&CriticalTimers.clearInterval(this.connectionReconcileInterval)}setAndEmitConnectionState(c){return c===this.state?!1:(this.state=c,this.emit(RoomEvent.ConnectionStateChanged,this.state),!0)}emitBufferedEvents(){this.bufferedEvents.forEach(c=>{let[b,_]=c;this.emit(b,..._)}),this.bufferedEvents=[]}emitWhenConnected(c){for(var b=arguments.length,_=new Array(b>1?b-1:0),k=1;k<b;k++)_[k-1]=arguments[k];if(this.state===ConnectionState.Reconnecting||this.isResuming||!this.engine||this.engine.pendingReconnect)this.bufferedEvents.push([c,_]);else if(this.state===ConnectionState.Connected)return this.emit(c,..._);return!1}simulateParticipants(c){var b,_;return __awaiter(this,void 0,void 0,function*(){const k=Object.assign({audio:!0,video:!0,useRealTracks:!1},c.publish),j=Object.assign({count:9,audio:!1,video:!0,aspectRatios:[1.66,1.7,1.3]},c.participants);if(this.handleDisconnect(),this.roomInfo=new Room$1({sid:"RM_SIMULATED",name:"simulated-room",emptyTimeout:0,maxParticipants:0,creationTime:protoInt64.parse(new Date().getTime()),metadata:"",numParticipants:1,numPublishers:1,turnPassword:"",enabledCodecs:[],activeRecording:!1}),this.localParticipant.updateInfo(new ParticipantInfo({identity:"simulated-local",name:"local-name"})),this.setupLocalParticipantEvents(),this.emit(RoomEvent.SignalConnected),this.emit(RoomEvent.Connected),this.setAndEmitConnectionState(ConnectionState.Connected),k.video){const _e=new LocalTrackPublication(Track.Kind.Video,new TrackInfo({source:TrackSource.CAMERA,sid:Math.floor(Math.random()*1e4).toString(),type:TrackType.AUDIO,name:"video-dummy"}),new LocalVideoTrack(k.useRealTracks?(yield window.navigator.mediaDevices.getUserMedia({video:!0})).getVideoTracks()[0]:createDummyVideoStreamTrack(160*((b=j.aspectRatios[0])!==null&&b!==void 0?b:1),160,!0,!0),void 0,!1,{loggerName:this.options.loggerName,loggerContextCb:()=>this.logContext}),{loggerName:this.options.loggerName,loggerContextCb:()=>this.logContext});this.localParticipant.addTrackPublication(_e),this.localParticipant.emit(ParticipantEvent.LocalTrackPublished,_e)}if(k.audio){const _e=new LocalTrackPublication(Track.Kind.Audio,new TrackInfo({source:TrackSource.MICROPHONE,sid:Math.floor(Math.random()*1e4).toString(),type:TrackType.AUDIO}),new LocalAudioTrack(k.useRealTracks?(yield navigator.mediaDevices.getUserMedia({audio:!0})).getAudioTracks()[0]:getEmptyAudioStreamTrack(),void 0,!1,this.audioContext,{loggerName:this.options.loggerName,loggerContextCb:()=>this.logContext}),{loggerName:this.options.loggerName,loggerContextCb:()=>this.logContext});this.localParticipant.addTrackPublication(_e),this.localParticipant.emit(ParticipantEvent.LocalTrackPublished,_e)}for(let _e=0;_e<j.count-1;_e+=1){let et=new ParticipantInfo({sid:Math.floor(Math.random()*1e4).toString(),identity:"simulated-".concat(_e),state:ParticipantInfo_State.ACTIVE,tracks:[],joinedAt:protoInt64.parse(Date.now())});const nt=this.getOrCreateParticipant(et.identity,et);if(j.video){const it=createDummyVideoStreamTrack(160*((_=j.aspectRatios[_e%j.aspectRatios.length])!==null&&_!==void 0?_:1),160,!1,!0),ft=new TrackInfo({source:TrackSource.CAMERA,sid:Math.floor(Math.random()*1e4).toString(),type:TrackType.AUDIO});nt.addSubscribedMediaTrack(it,ft.sid,new MediaStream([it])),et.tracks=[...et.tracks,ft]}if(j.audio){const it=getEmptyAudioStreamTrack(),ft=new TrackInfo({source:TrackSource.MICROPHONE,sid:Math.floor(Math.random()*1e4).toString(),type:TrackType.AUDIO});nt.addSubscribedMediaTrack(it,ft.sid,new MediaStream([it])),et.tracks=[...et.tracks,ft]}nt.updateInfo(et)}})}emit(c){for(var b=arguments.length,_=new Array(b>1?b-1:0),k=1;k<b;k++)_[k-1]=arguments[k];if(c!==RoomEvent.ActiveSpeakersChanged){const j=mapArgs(_).filter(_e=>_e!==void 0);this.log.debug("room event ".concat(c),Object.assign(Object.assign({},this.logContext),{event:c,args:j}))}return super.emit(c,..._)}}function mapArgs(a){return a.map(c=>{if(c)return Array.isArray(c)?mapArgs(c):typeof c=="object"?"logContext"in c&&c.logContext:c})}var CheckStatus;(function(a){a[a.IDLE=0]="IDLE",a[a.RUNNING=1]="RUNNING",a[a.SKIPPED=2]="SKIPPED",a[a.SUCCESS=3]="SUCCESS",a[a.FAILED=4]="FAILED"})(CheckStatus||(CheckStatus={}));class Checker extends eventsExports.EventEmitter{constructor(c,b){let _=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};super(),this.status=CheckStatus.IDLE,this.logs=[],this.errorsAsWarnings=!1,this.url=c,this.token=b,this.name=this.constructor.name,this.room=new Room2(_.roomOptions),this.connectOptions=_.connectOptions,_.errorsAsWarnings&&(this.errorsAsWarnings=_.errorsAsWarnings)}run(c){return __awaiter(this,void 0,void 0,function*(){if(this.status!==CheckStatus.IDLE)throw Error("check is running already");this.setStatus(CheckStatus.RUNNING);try{yield this.perform()}catch(b){b instanceof Error&&(this.errorsAsWarnings?this.appendWarning(b.message):this.appendError(b.message))}return yield this.disconnect(),yield new Promise(b=>setTimeout(b,500)),this.status!==CheckStatus.SKIPPED&&this.setStatus(this.isSuccess()?CheckStatus.SUCCESS:CheckStatus.FAILED),c&&c(),this.getInfo()})}isSuccess(){return!this.logs.some(c=>c.level==="error")}connect(){return __awaiter(this,void 0,void 0,function*(){return this.room.state===ConnectionState.Connected?this.room:(yield this.room.connect(this.url,this.token),this.room)})}disconnect(){return __awaiter(this,void 0,void 0,function*(){this.room&&this.room.state!==ConnectionState.Disconnected&&(yield this.room.disconnect(),yield new Promise(c=>setTimeout(c,500)))})}skip(){this.setStatus(CheckStatus.SKIPPED)}appendMessage(c){this.logs.push({level:"info",message:c}),this.emit("update",this.getInfo())}appendWarning(c){this.logs.push({level:"warning",message:c}),this.emit("update",this.getInfo())}appendError(c){this.logs.push({level:"error",message:c}),this.emit("update",this.getInfo())}setStatus(c){this.status=c,this.emit("update",this.getInfo())}get engine(){var c;return(c=this.room)===null||c===void 0?void 0:c.engine}getInfo(){return{logs:this.logs,name:this.name,status:this.status,description:this.description}}}function createLocalTracks(a){var c,b;return __awaiter(this,void 0,void 0,function*(){a??(a={}),(c=a.audio)!==null&&c!==void 0||(a.audio=!0),(b=a.video)!==null&&b!==void 0||(a.video=!0);const _=mergeDefaultOptions(a,audioDefaults,videoDefaults),k=constraintsForOptions(_),j=navigator.mediaDevices.getUserMedia(k);a.audio&&(DeviceManager.userMediaPromiseMap.set("audioinput",j),j.catch(()=>DeviceManager.userMediaPromiseMap.delete("audioinput"))),a.video&&(DeviceManager.userMediaPromiseMap.set("videoinput",j),j.catch(()=>DeviceManager.userMediaPromiseMap.delete("videoinput")));const _e=yield j;return _e.getTracks().map(et=>{const nt=et.kind==="audio";nt?a.audio:a.video;let it;const ft=nt?k.audio:k.video;typeof ft!="boolean"&&(it=ft),it?it.deviceId=et.getSettings().deviceId:it={deviceId:et.getSettings().deviceId};const pt=mediaTrackToLocalTrack(et,it);return pt.kind===Track.Kind.Video?pt.source=Track.Source.Camera:pt.kind===Track.Kind.Audio&&(pt.source=Track.Source.Microphone),pt.mediaStream=_e,pt})})}function createLocalVideoTrack(a){return __awaiter(this,void 0,void 0,function*(){return(yield createLocalTracks({audio:!1,video:a}))[0]})}function createLocalAudioTrack(a){return __awaiter(this,void 0,void 0,function*(){return(yield createLocalTracks({audio:a,video:!1}))[0]})}class PublishAudioCheck extends Checker{get description(){return"Can publish audio"}perform(){var c;return __awaiter(this,void 0,void 0,function*(){const b=yield this.connect(),_=yield createLocalAudioTrack();b.localParticipant.publishTrack(_),yield new Promise(_e=>setTimeout(_e,3e3));const k=yield(c=_.sender)===null||c===void 0?void 0:c.getStats();if(!k)throw new Error("Could not get RTCStats");let j=0;if(k.forEach(_e=>{_e.type==="outbound-rtp"&&_e.mediaType==="audio"&&(j=_e.packetsSent)}),j===0)throw new Error("Could not determine packets are sent");this.appendMessage("published ".concat(j," audio packets"))})}}class PublishVideoCheck extends Checker{get description(){return"Can publish video"}perform(){var c;return __awaiter(this,void 0,void 0,function*(){const b=yield this.connect(),_=yield createLocalVideoTrack();b.localParticipant.publishTrack(_),yield new Promise(_e=>setTimeout(_e,3e3));const k=yield(c=_.sender)===null||c===void 0?void 0:c.getStats();if(!k)throw new Error("Could not get RTCStats");let j=0;if(k.forEach(_e=>{_e.type==="outbound-rtp"&&_e.mediaType==="video"&&(j=_e.packetsSent)}),j===0)throw new Error("Could not determine packets are sent");this.appendMessage("published ".concat(j," video packets"))})}}class ReconnectCheck extends Checker{get description(){return"Resuming connection after interruption"}perform(){var c;return __awaiter(this,void 0,void 0,function*(){const b=yield this.connect();let _=!1,k=!1,j;const _e=new Promise(nt=>{setTimeout(nt,5e3),j=nt});b.on(RoomEvent.Reconnecting,()=>{_=!0}).on(RoomEvent.Reconnected,()=>{k=!0,j(!0)}),(c=b.engine.client.ws)===null||c===void 0||c.close();const et=b.engine.client.onClose;if(et&&et(""),yield _e,_){if(!k||b.state!==ConnectionState.Connected)throw this.appendWarning("reconnection is only possible in Redis-based configurations"),new Error("Not able to reconnect")}else throw new Error("Did not attempt to reconnect")})}}class TURNCheck extends Checker{get description(){return"Can connect via TURN"}perform(){var c,b;return __awaiter(this,void 0,void 0,function*(){const _=new SignalClient,k=yield _.join(this.url,this.token,{autoSubscribe:!0,maxRetries:0,e2eeEnabled:!1,websocketTimeout:15e3});let j=!1,_e=!1,et=!1;for(let nt of k.iceServers)for(let it of nt.urls)it.startsWith("turn:")?(_e=!0,et=!0):it.startsWith("turns:")&&(_e=!0,et=!0,j=!0),it.startsWith("stun:")&&(et=!0);et?_e&&!j&&this.appendWarning("TURN is configured server side, but TURN/TLS is unavailable."):this.appendWarning("No STUN servers configured on server side."),yield _.close(),!((b=(c=this.connectOptions)===null||c===void 0?void 0:c.rtcConfig)===null||b===void 0)&&b.iceServers||_e?yield this.room.connect(this.url,this.token,{rtcConfig:{iceTransportPolicy:"relay"}}):(this.appendWarning("No TURN servers configured."),this.skip(),yield new Promise(nt=>setTimeout(nt,0)))})}}class WebRTCCheck extends Checker{get description(){return"Establishing WebRTC connection"}perform(){return __awaiter(this,void 0,void 0,function*(){let c=!1,b=!1;this.room.on(RoomEvent.SignalConnected,()=>{const _=this.room.engine.client.onTrickle;this.room.engine.client.onTrickle=(k,j)=>{if(k.candidate){const _e=new RTCIceCandidate(k);let et="".concat(_e.protocol," ").concat(_e.address,":").concat(_e.port," ").concat(_e.type);_e.address&&(isIPPrivate(_e.address)?et+=" (private)":_e.protocol==="tcp"&&_e.tcpType==="passive"?(c=!0,et+=" (passive)"):_e.protocol==="udp"&&(b=!0)),this.appendMessage(et)}_&&_(k,j)},this.room.engine.pcManager&&(this.room.engine.pcManager.subscriber.onIceCandidateError=k=>{k instanceof RTCPeerConnectionIceErrorEvent&&this.appendWarning("error with ICE candidate: ".concat(k.errorCode," ").concat(k.errorText," ").concat(k.url))})});try{yield this.connect(),livekitLogger.info("now the room is connected")}catch(_){throw this.appendWarning("ports need to be open on firewall in order to connect."),_}c||this.appendWarning("Server is not configured for ICE/TCP"),b||this.appendWarning("No public IPv4 UDP candidates were found. Your server is likely not configured correctly")})}}function isIPPrivate(a){const c=a.split(".");if(c.length===4){if(c[0]==="10")return!0;if(c[0]==="192"&&c[1]==="168")return!0;if(c[0]==="172"){const b=parseInt(c[1],10);if(b>=16&&b<=31)return!0}}return!1}class WebSocketCheck extends Checker{get description(){return"Connecting to signal connection via WebSocket"}perform(){var c,b,_;return __awaiter(this,void 0,void 0,function*(){(this.url.startsWith("ws:")||this.url.startsWith("http:"))&&this.appendWarning("Server is insecure, clients may block connections to it");let k=new SignalClient;const j=yield k.join(this.url,this.token,{autoSubscribe:!0,maxRetries:0,e2eeEnabled:!1,websocketTimeout:15e3});this.appendMessage("Connected to server, version ".concat(j.serverVersion,".")),((c=j.serverInfo)===null||c===void 0?void 0:c.edition)===ServerInfo_Edition.Cloud&&(!((b=j.serverInfo)===null||b===void 0)&&b.region)&&this.appendMessage("LiveKit Cloud: ".concat((_=j.serverInfo)===null||_===void 0?void 0:_.region)),yield k.close()})}}class ConnectionCheck extends eventsExports.EventEmitter{constructor(c,b){super(),this.checkResults=new Map,this.url=c,this.token=b}getNextCheckId(){const c=this.checkResults.size;return this.checkResults.set(c,{logs:[],status:CheckStatus.IDLE,name:"",description:""}),c}updateCheck(c,b){this.checkResults.set(c,b),this.emit("checkUpdate",c,b)}isSuccess(){return Array.from(this.checkResults.values()).every(c=>c.status!==CheckStatus.FAILED)}getResults(){return Array.from(this.checkResults.values())}createAndRunCheck(c){return __awaiter(this,void 0,void 0,function*(){const b=this.getNextCheckId(),_=new c(this.url,this.token),k=_e=>{this.updateCheck(b,_e)};_.on("update",k);const j=yield _.run();return _.off("update",k),j})}checkWebsocket(){return __awaiter(this,void 0,void 0,function*(){return this.createAndRunCheck(WebSocketCheck)})}checkWebRTC(){return __awaiter(this,void 0,void 0,function*(){return this.createAndRunCheck(WebRTCCheck)})}checkTURN(){return __awaiter(this,void 0,void 0,function*(){return this.createAndRunCheck(TURNCheck)})}checkReconnect(){return __awaiter(this,void 0,void 0,function*(){return this.createAndRunCheck(ReconnectCheck)})}checkPublishAudio(){return __awaiter(this,void 0,void 0,function*(){return this.createAndRunCheck(PublishAudioCheck)})}checkPublishVideo(){return __awaiter(this,void 0,void 0,function*(){return this.createAndRunCheck(PublishVideoCheck)})}}lib$2.LiveApiModel.Rendering;lib$2.LiveApiModel.VideoRendering;lib$2.LiveApiModel.AudioRendering;lib$2.LiveApiModel.RenderingQuality;lib$2.LiveApiModel.Encoding;lib$2.LiveApiModel.VideoEncoding;lib$2.LiveApiModel.AudioEncoding;const ProjectBroadcastPhase=lib$2.LiveApiModel.ProjectBroadcastPhase,Role=lib$2.LiveApiModel.Role;lib$2.LiveApiModel.DestinationAddress;lib$2.LiveApiModel.VideoCodec;lib$2.LiveApiModel.AudioCodec;lib$2.LiveApiModel.VideoCodecRateControl;lib$2.LiveApiModel.VideoCodecProfile;var Permission=(a=>(a[a.ReadProject=0]="ReadProject",a[a.UpdateProject=1]="UpdateProject",a[a.JoinRoom=2]="JoinRoom",a[a.InviteGuests=3]="InviteGuests",a[a.ManageGuests=4]="ManageGuests",a[a.ManageBroadcast=5]="ManageBroadcast",a[a.ManageSelf=6]="ManageSelf",a))(Permission||{});const permissions={[Role.ROLE_HOST]:[0,1,2,3,4,5],[Role.ROLE_COHOST]:[0,1,2,3,4,5],[Role.ROLE_CONTRIBUTOR]:[0,1,2,3],[Role.ROLE_GUEST]:[0,2,6],[Role.ROLE_VIEWER]:[0,2],[Role.ROLE_IMPERSONATE]:[0,1,3,4,5]},hasPermission=(a,c)=>{var b;return a?!!((b=permissions[a])!=null&&b.find(_=>_===c)):!1};var DataType=(a=>(a.ChatMessage="ChatMessage",a.ParticipantMetadataUpdate="ParticipantMetadataUpdate",a))(DataType||{}),SpecialEvent=(a=>(a.Chat="Chat",a))(SpecialEvent||{});const decoder$1=new TextDecoder,encoder$1=new TextEncoder;class RoomsManager{constructor(){Yn(this,"rooms");this.rooms=new Map,this.addRoom=this.addRoom.bind(this),this.ensureRoom=this.ensureRoom.bind(this),this.removeRoom=this.removeRoom.bind(this)}addRoom(c,b,_){const k=new RoomContext(c,b,_,this);return this.rooms.set(b,k),k}ensureRoom(c,b,_){return this.rooms.get(b)?(this.rooms.get(b).token=_,this.rooms.get(b)):this.addRoom(c,b,_)}async removeRoom(c){const b=this.rooms.get(c);if(!Room2)throw new Error("room not found!");if(b.isConnecting)throw new Error("Cannot remove room: Room is in connecting state");b.livekitRoom&&await b.livekitRoom.disconnect(!0),this.rooms.delete(c)}}class RoomContext{constructor(c,b,_,k){Yn(this,"_baseUrl");Yn(this,"_chatHistory");Yn(this,"_connectListeners");Yn(this,"_roomEventListenerRegistry");Yn(this,"_localParticipantEventListenerRegistry");Yn(this,"_specialEventListenerRegistry");Yn(this,"_jwt");Yn(this,"_manager");Yn(this,"_apiClient");Yn(this,"audioTracks");Yn(this,"isConnecting");Yn(this,"livekitRoom");Yn(this,"participants");Yn(this,"guestParticipantMetadata");Yn(this,"roomName");Yn(this,"_admin");let j=CoreContext.logLevel.toLowerCase();setLogLevel(j),this.livekitRoom=new Room2({dynacast:!0,videoCaptureDefaults:{resolution:VideoPresets.h720.resolution}}),this._baseUrl=c,this._connectListeners=[],this._roomEventListenerRegistry={},this._jwt=_,Object.values(RoomEvent).forEach(_e=>{this._roomEventListenerRegistry[_e]=new Set}),this._localParticipantEventListenerRegistry={},Object.values(ParticipantEvent).forEach(_e=>{this._localParticipantEventListenerRegistry[_e]=new Set}),this._specialEventListenerRegistry={},this._manager=k,this._chatHistory=[],this.roomName=b,this.audioTracks=[],this.participants=[],this.guestParticipantMetadata=[],this.isConnecting=!1,this.subscribeToRoomEvent(RoomEvent.DataReceived,(_e,et)=>{var ft;const nt=decoder$1.decode(_e);switch(JSON.parse(nt).type){case"ChatMessage":return this._appendChat(_e,et);case"ParticipantMetadataUpdate":{const pt=decoder$1.decode(_e),mt=JSON.parse(pt);hasPermission((ft=mt==null?void 0:mt.metadata)==null?void 0:ft.participantRole,Permission.ManageSelf)&&this._updateGuestParticipantsStore(mt);return}default:return}}),this.connect=this.connect.bind(this),this.subscribeToRoomEvent=this.subscribeToRoomEvent.bind(this),this.subscribeToConnect=this.subscribeToConnect.bind(this),this.subscribeToLocalParticipantEvent=this.subscribeToLocalParticipantEvent.bind(this),this.subscribeToSpecialEvent=this.subscribeToSpecialEvent.bind(this),this.unsubscribeFromRoomEvent=this.unsubscribeFromRoomEvent.bind(this),this.unsubscribeFromSpecialEvent=this.unsubscribeFromSpecialEvent.bind(this),this.unsubscribeFromConnect=this.unsubscribeFromConnect.bind(this),this.unsubscribeFromLocalParticipantEvent=this.unsubscribeFromLocalParticipantEvent.bind(this),this.sendChatMessage=this.sendChatMessage.bind(this),this.kickParticipant=this.kickParticipant.bind(this),this.updateParticipant=this.updateParticipant.bind(this),this.muteTrackAsAdmin=this.muteTrackAsAdmin.bind(this),this._updateParticipants=this._updateParticipants.bind(this),this.subscribeToRoomEvent(RoomEvent.ParticipantConnected,this._updateParticipants),this.subscribeToRoomEvent(RoomEvent.ParticipantDisconnected,this._updateParticipants),this.subscribeToRoomEvent(RoomEvent.TrackSubscribed,this._updateParticipants),this.subscribeToRoomEvent(RoomEvent.TrackUnsubscribed,this._updateParticipants),this.subscribeToRoomEvent(RoomEvent.LocalTrackPublished,this._updateParticipants),this.subscribeToRoomEvent(RoomEvent.LocalTrackUnpublished,this._updateParticipants),this.subscribeToRoomEvent(RoomEvent.Disconnected,()=>{this._updateParticipants()}),this.subscribeToRoomEvent(RoomEvent.ParticipantMetadataChanged,(_e,et)=>{if(_e!==(et==null?void 0:et.metadata)){const nt=JSON.parse(et==null?void 0:et.metadata);if(hasPermission(nt==null?void 0:nt.participantRole,Permission.ManageSelf)){if(nt.hasOwnProperty("isMirrored")){const it={participantId:et==null?void 0:et.identity,metadata:nt,type:"ParticipantMetadataUpdate"};this._updateGuestParticipantsStore(it)}return}}})}bindApiClient(c){this._apiClient=c}get isAdmin(){return jwtDecode(this._jwt).video.roomAdmin}set isAdmin(c){log$1.warn("isAdmin cannot be set")}get token(){return this._jwt}set token(c){this._jwt=c}get url(){return this._baseUrl}set url(c){}get chatHistory(){return this._chatHistory}set chatHistory(c){this._chatHistory=c}_updateGuestParticipantsStore(c){if(!this.guestParticipantMetadata.length)this.guestParticipantMetadata.push(c);else{const b=this.guestParticipantMetadata.findIndex(_=>_.participantId===(c==null?void 0:c.participantId));b>-1?this.guestParticipantMetadata[b]=c:this.guestParticipantMetadata.push(c)}}_updateParticipants(){if(!this.livekitRoom||this.livekitRoom.state===ConnectionState.Disconnected){this.participants=[];return}else{const c=Array.from(this.livekitRoom.remoteParticipants.values()),b=[this.livekitRoom.localParticipant];b.push(...c),this.guestParticipantMetadata=this.guestParticipantMetadata.filter(_=>b.find(k=>(k==null?void 0:k.identity)===(_==null?void 0:_.participantId))),this.participants=b}}async kickParticipant(c){if(this._admin)this._admin.removeParticipant(this.roomName,c);else throw new Error("no admin permissions")}updateParticipant(c,b){if(this._admin){const _=JSON.stringify(b);this._admin.updateParticipant(this.roomName,c,_)}else throw new Error("no admin permissions")}muteTrackAsAdmin(c,b=!0){if(this._admin){const _=this.participants.find(k=>[...k.audioTrackPublications.values(),...k.videoTrackPublications.values()].find(j=>j.trackSid===c));if(!_){log$1.warn("Could not find participant for track:",{trackSid:c});return}this._admin.mutePublishedTrack(this.roomName,_==null?void 0:_.identity,c,b)}else throw new Error("no admin permissions")}_appendChat(c,b){const _=decoder$1.decode(c),k=JSON.parse(_),j=b.identity,_e=b.name,et={...k,displayName:_e,sender:j};this.chatHistory=[...this.chatHistory,et],this._triggerSpecialEvents("Chat",et)}subscribeToConnect(c){return this._connectListeners.push(c),()=>this.unsubscribeFromConnect(c)}unsubscribeFromConnect(c){this._connectListeners=this._connectListeners.filter(b=>b!==c)}subscribeToSpecialEvent(c,b){return this._specialEventListenerRegistry[c]||(this._specialEventListenerRegistry[c]=new Set),this._specialEventListenerRegistry[c].add(b),()=>{this.unsubscribeFromSpecialEvent(c,b)}}unsubscribeFromSpecialEvent(c,b){this._specialEventListenerRegistry[c]||(this._specialEventListenerRegistry[c]=new Set),this._specialEventListenerRegistry[c].delete(b)}_triggerSpecialEvents(c,...b){this._specialEventListenerRegistry[c]||(this._specialEventListenerRegistry[c]=new Set),this._specialEventListenerRegistry[c].forEach(_=>{_(...b)})}async connect(c={}){var b,_;try{if(this.livekitRoom.state==="connected"||this.isConnecting)return;this.isConnecting=!0,await this.livekitRoom.connect(`wss://${this._baseUrl}`,this._jwt,{...c}),this.isConnecting=!1,Object.values(RoomEvent).forEach(k=>{this.livekitRoom.on(k,(...j)=>{this._roomEventListenerRegistry[k].forEach(_e=>{_e(...j)})})}),Object.values(ParticipantEvent).forEach(k=>{this.livekitRoom.localParticipant.on(k,(...j)=>{this._localParticipantEventListenerRegistry[k].forEach(_e=>{_e(...j)})})}),this._updateParticipants(),this._connectListeners.forEach(k=>k(this.livekitRoom)),lib$2.LiveKitUtils.isRoomAdmin(this._jwt)?(log$1.info("Room: Granting admin permissions"),log$1.debug("Livekit server: ",(b=this._apiClient)==null?void 0:b.getLiveKitServer(!0)),this._admin=new dist.RoomServiceClient((_=this._apiClient)==null?void 0:_.getLiveKitServer(!0),void 0,void 0,this._jwt)):log$1.debug("Room: Not an admin")}catch(k){this.isConnecting=!1,log$1.error(k)}}subscribeToLocalParticipantEvent(c,b){return this._localParticipantEventListenerRegistry[c]||(this._localParticipantEventListenerRegistry[c]=new Set),this._localParticipantEventListenerRegistry[c].add(b),()=>{this.unsubscribeFromLocalParticipantEvent(c,b)}}unsubscribeFromLocalParticipantEvent(c,b){this._localParticipantEventListenerRegistry[c]||(this._localParticipantEventListenerRegistry[c]=new Set),this._localParticipantEventListenerRegistry[c].delete(b)}subscribeToRoomEvent(c,b){return this._roomEventListenerRegistry[c]||(this._roomEventListenerRegistry[c]=new Set),this._roomEventListenerRegistry[c].add(b),()=>{this.unsubscribeFromRoomEvent(c,b)}}unsubscribeFromRoomEvent(c,b){this._roomEventListenerRegistry[c]||(this._roomEventListenerRegistry[c]=new Set),this._roomEventListenerRegistry[c].delete(b)}sendChatMessage(c){const{message:b,recipients:_,metadata:k}=c;if(!this.livekitRoom||this.livekitRoom.state!=="connected")return;const j={type:"ChatMessage",recipients:_,metadata:k,content:b,timestamp:Date.now()},_e=JSON.stringify(j),et=encoder$1.encode(_e);if({...j,sender:this.livekitRoom.localParticipant.identity,displayName:this.livekitRoom.localParticipant.identity},_){const nt=_.map(this.livekitRoom.getParticipantByIdentity);return this.livekitRoom.localParticipant.publishData(et,{reliable:!0,destinationIdentities:nt.map(it=>it.identity)}).then(()=>{this._appendChat(et,this.livekitRoom.localParticipant)})}else return this.livekitRoom.localParticipant.publishData(et,{reliable:!0}).then(()=>{this._appendChat(et,this.livekitRoom.localParticipant)})}}const webrtcManager=new RoomsManager,encoder=new TextEncoder,decoder=new TextDecoder,simpleRooms=new Map,getRoom=a=>{if(!a)return null;if(simpleRooms.get(a))return simpleRooms.get(a);const c=webrtcManager.rooms.get(a);if(!c)return null;const b=c.livekitRoom,_=b==null?void 0:b.localParticipant;window.__StudioRoom=b,_||log$1.warn("No local participant!");const k={useTracks:new Set,useTrack:new Map,useParticipants:new Set,useParticipant:new Map,useChatHistory:new Set};let j={tracks:[],participants:[],result:{participants:[],tracks:[]},chat:c.chatHistory};const _e=()=>{const _t=c.participants,Tt=c.guestParticipantMetadata,gt=_t.flatMap(Et=>Et.getTrackPublications().map(At=>({...At,participant:Et}))),ht={participants:_t.map(Et=>{const At=Tt.find(qt=>qt.participantId===Et.identity);if(At){let qt=JSON.parse(Et.metadata);qt={...qt,...At.metadata},Et.metadata=JSON.stringify(qt)}const Bt=JSON.parse(Et.metadata);return{id:Et.identity,isSelf:Et===_,connectionQuality:Et.connectionQuality,displayName:Bt.displayName||Et.name,joinedAt:Et.joinedAt,role:Bt.participantRole,meta:Bt,trackIds:gt.filter(qt=>qt.participant.sid===Et.sid).map(qt=>qt.trackSid)}}),tracks:gt.map(Et=>{var Bt,qt,zt,Ht;const At=JSON.parse((Bt=Et==null?void 0:Et.participant)==null?void 0:Bt.metadata);return{mediaStreamTrack:(qt=Et.track)==null?void 0:qt.mediaStreamTrack,id:Et.trackSid,participantId:(zt=Et.participant)==null?void 0:zt.identity,isMuted:(Ht=Et.track)==null?void 0:Ht.isMuted,type:Et.source,isExternal:!!(At!=null&&At[Et.trackSid])}})};j={tracks:gt,participants:_t,result:ht,chat:c.chatHistory},k.useTracks.forEach(Et=>Et(ht.tracks)),k.useTrack.forEach((Et,At)=>{At(it(Et))}),k.useParticipants.forEach(Et=>Et(ht.participants)),k.useParticipant.forEach((Et,At)=>{At(ft(Et))}),k.useChatHistory.forEach(Et=>{Et(j.chat)})},et=[RoomEvent.ParticipantConnected,RoomEvent.ParticipantDisconnected,RoomEvent.ParticipantMetadataChanged,RoomEvent.Disconnected,RoomEvent.TrackSubscribed,RoomEvent.TrackUnsubscribed,RoomEvent.LocalTrackPublished,RoomEvent.LocalTrackUnpublished,RoomEvent.ConnectionQualityChanged,RoomEvent.TrackMuted,RoomEvent.TrackUnmuted,RoomEvent.TrackStreamStateChanged];c.subscribeToRoomEvent(RoomEvent.DataReceived,(_t,Tt,gt)=>{const ht=decoder.decode(_t);JSON.parse(ht).type===DataType.ParticipantMetadataUpdate&&_e()}),et.map(_t=>c.subscribeToRoomEvent(_t,()=>_e())).push(c.subscribeToSpecialEvent(SpecialEvent.Chat,_e));const it=_t=>j.result.tracks.find(Tt=>Tt.id===_t),ft=_t=>j.result.participants.find(Tt=>Tt.id===_t),pt=(_t,Tt)=>{const gt=_.getTrackPublications().find(ht=>ht.trackSid===_t);gt&&(Tt?gt.mute():gt.unmute())};let mt,St;const yt={id:c.roomName,participantId:_.identity,setTrackEnabled:pt,setCameraEnabled:(_t=!0)=>_.setCameraEnabled(_t),setMicrophoneEnabled:(_t=!0)=>_.setMicrophoneEnabled(_t),setCamera:async(_t={})=>{var gt;if(mt){log$1.warn("Cannot set camera until previous has resolved");return}mt=!0;let Tt;try{const Et=_.getTrackPublications().filter(Bt=>(Bt==null?void 0:Bt.source)===Track.Source.Camera).find(Bt=>!it(Bt==null?void 0:Bt.trackSid).isExternal),At=await _.createTracks({video:{deviceId:_t.deviceId,resolution:_t.resolution||{width:1280,height:720,frameRate:30,aspectRatio:16/9}}});Et!=null&&Et.isMuted&&At.forEach(Bt=>{Bt.mute()}),Tt=await Promise.all(At.map(Bt=>_.publishTrack(Bt))),Et&&_.unpublishTrack(Et.track)}catch(ht){throw ht}finally{return mt=!1,it((gt=Tt[0])==null?void 0:gt.trackSid)}},setMicrophone:async _t=>{var gt;if(St){log$1.warn("Cannot set microphone until previous has resolved");return}St=!0;let Tt;try{const Et=_.getTrackPublications().filter(Bt=>Bt.source===Track.Source.Microphone).find(Bt=>!it(Bt==null?void 0:Bt.trackSid).isExternal),At=await _.createTracks({audio:_t||!0});Et!=null&&Et.isMuted&&At.forEach(Bt=>{Bt.mute()}),Tt=await Promise.all(At.map(Bt=>_.publishTrack(Bt))),Et&&_.unpublishTrack(Et.track)}catch(ht){throw ht}finally{return St=!1,it((gt=Tt[0])==null?void 0:gt.trackSid)}},addMicrophone:async _t=>{var At;if(St){log$1.warn("Cannot set microphone until previous has resolved");return}St=!0;const Tt=await _.createTracks({audio:_t||!0}),ht=_.getTrackPublications().filter(Bt=>Bt.source===Track.Source.Microphone).find(Bt=>{var zt,Ht;const qt=it(Bt==null?void 0:Bt.trackSid);((Ht=(zt=qt==null?void 0:qt.mediaStreamTrack)==null?void 0:zt.getSettings())==null?void 0:Ht.deviceId)===_t.deviceId&&(qt==null||qt.isExternal)});ht!=null&&ht.isMuted&&Tt.forEach(Bt=>{Bt.mute()});const Et=await Promise.all(Tt.map(Bt=>_.publishTrack(Bt)));return ht&&_.unpublishTrack(ht.track),St=!1,it((At=Et[0])==null?void 0:At.trackSid)},addCamera:async(_t={})=>{var Et;const Tt=await _.createTracks({video:{deviceId:_t.deviceId,resolution:_t.resolution||{width:1280,height:720,frameRate:30,aspectRatio:1.7777777777777777}}}),gt=_.getTrackPublications().find(At=>{var Bt,qt,zt;return(At==null?void 0:At.source)===Track.Source.Camera&&((zt=(qt=(Bt=At==null?void 0:At.track)==null?void 0:Bt.mediaStreamTrack)==null?void 0:qt.getSettings())==null?void 0:zt.deviceId)===_t.deviceId});gt!=null&&gt.isMuted&&Tt.forEach(At=>{At.mute()});const ht=await Promise.all(Tt.map(At=>_.publishTrack(At)));return gt&&_.unpublishTrack(gt.track),St=!1,it((Et=ht[0])==null?void 0:Et.trackSid)},addScreen:async(_t={audio:!1})=>{const Tt=await _.createScreenTracks(_t),gt=await Promise.all(Tt.map(At=>_.publishTrack(At))),ht=gt.find(At=>At.kind==="video"),Et=gt.find(At=>At.kind==="audio");return{screen:it(ht==null?void 0:ht.trackSid),audio:it(Et==null?void 0:Et.trackSid)}},removeTrack:async _t=>{const Tt=j.tracks.find(gt=>gt.trackSid===_t);_.unpublishTrack(Tt.track)},setLocalParticipantMetadata:async(_t,Tt)=>{const gt=JSON.stringify(Tt),ht=encoder.encode(JSON.stringify({metadata:Tt,type:DataType.ParticipantMetadataUpdate,participantId:_t}));return _.setMetadata(gt),await _.publishData(ht,{reliable:!0})},setParticipantMetadata:(_t,Tt)=>c.updateParticipant(_t,Tt),kickParticipant:c.kickParticipant,muteTrackAsAdmin:c.muteTrackAsAdmin,sendChatMessage:c.sendChatMessage,getTracks:()=>j.result.tracks,useTracks:_t=>(k.useTracks.add(_t),_t(j.result.tracks),()=>{k.useTracks.delete(_t)}),getTrack:it,useTrack:(_t,Tt)=>(k.useTrack.set(Tt,_t),Tt(it(_t)),()=>{k.useTrack.delete(Tt)}),getParticipant:ft,getParticipants:()=>j.result.participants,useParticipants:_t=>(k.useParticipants.add(_t),_t(j.result.participants),()=>{k.useParticipants.delete(_t)}),useParticipant:(_t,Tt)=>(k.useParticipant.set(Tt,_t),Tt(ft(_t)),()=>{k.useTrack.delete(Tt)}),useChatHistory:_t=>(k.useChatHistory.add(_t),_t(j.chat),()=>{k.useChatHistory.delete(_t)}),useActiveSpeakers:_t=>{var gt,ht;const Tt=Et=>{_t(Et.map(At=>At.identity))};return(gt=c.livekitRoom)==null||gt.on(RoomEvent.ActiveSpeakersChanged,Tt),Tt((ht=c.livekitRoom)==null?void 0:ht.activeSpeakers),()=>{var Et;(Et=c.livekitRoom)==null||Et.off(RoomEvent.ActiveSpeakersChanged,Tt)}},sendData:(_t,Tt=[])=>{const gt=encoder.encode(JSON.stringify(_t)),ht=Tt==null?void 0:Tt.map(Et=>{var At;return(At=c.livekitRoom)==null?void 0:At.getParticipantByIdentity(Et)}).filter(Boolean);return _.publishData(gt,{reliable:!0,destinationIdentities:ht.map(Et=>Et.identity)})},onData:_t=>{var gt;const Tt=(ht,Et)=>{const At=JSON.parse(decoder.decode(ht));_t(At,Et==null?void 0:Et.identity)};return(gt=c.livekitRoom)==null||gt.on(RoomEvent.DataReceived,Tt),()=>{var ht;(ht=c.livekitRoom)==null||ht.off(RoomEvent.DataReceived,Tt)}},connect:()=>c.connect(),disconnect:()=>{var _t;return(_t=c.livekitRoom)==null?void 0:_t.disconnect()},onDisconnected:_t=>{var Tt;return(Tt=c.livekitRoom)==null||Tt.on(RoomEvent.Disconnected,_t),()=>{var gt;(gt=c.livekitRoom)==null||gt.off(RoomEvent.DataReceived,_t)}},setAudioOutput:_t=>{var Tt;return(Tt=c.livekitRoom)==null?void 0:Tt.switchActiveDevice("audiooutput",_t)}};return _e(),simpleRooms.set(a,yt),yt},{state:state$1}=CoreContext,getAccessTokenData=()=>{var a;return((a=CoreContext.clients.accessTokenClaims)==null?void 0:a.user)||{}},getBaseUser=()=>state$1.user?{id:state$1.user.id,props:state$1.user.props,name:state$1.user.name,projects:state$1.projects.map(toBaseProject),sources:state$1.sources.map(toBaseSource)}:null,toBaseProject=a=>{const{compositor:c,videoApi:b,props:_={},role:k}=a,{destinations:j,encoding:_e,rendering:et,sources:nt}=b.project,it={get:c.get,getRoot:c.getRoot,getParent:c.getParent};Object.defineProperty(it,"nodes",{get(){return c.nodes.filter(mt=>!mt._deleted)}});const ft=a.videoApi.phase,pt=a.videoApi.broadcastId||null;return{broadcastPhase:ft,role:k,broadcastId:pt,isLive:[ProjectBroadcastPhase.PROJECT_BROADCAST_PHASE_RUNNING,ProjectBroadcastPhase.PROJECT_BROADCAST_PHASE_STOPPING].includes(ft),scene:it,joinRoom:async(mt={})=>CoreContext.Command.joinRoom({projectId:a.id,...mt}),subscribe:mt=>CoreContext.subscribe((St,yt)=>{yt.projectId&&(yt==null?void 0:yt.projectId)===a.id&&mt(St,yt)}),destinations:j.map(toBaseDestination),sources:nt.map(toBaseSource),encoding:_e,rendering:et,id:a.id,hostDisplayName:a.props.hostDisplayName,props:_}},toBaseDestination=a=>{var c;return{id:a.destinationId,enabled:a.enabled,address:a.address,props:((c=a.metadata)==null?void 0:c.props)||(a==null?void 0:a.metadata)||{}}},toBaseSource=a=>{var c;return{id:a.sourceId,address:a.address,props:((c=a.metadata)==null?void 0:c.props)||{}}},hydrateProject=async(a,c,b)=>{const _=a.metadata||{},k={collectionId:a.collectionId,projectId:a.projectId,updateMask:[]};hasPermission(c,Permission.ManageBroadcast)&&a.composition.studioSdk.version!==CoreContext.rendererVersion&&(k.composition={studioSdk:{version:CoreContext.rendererVersion}},k.updateMask.push("composition.studioSdk.version")),b&&(k.rendering={video:{width:b.x,height:b.y,framerate:30}},k.updateMask.push("rendering")),k.updateMask.length&&await CoreContext.clients.LiveApi().project.updateProject(k);const _e=await layoutToProject(_.layoutId,b);return{id:a.projectId,compositor:_e,role:c,videoApi:{project:a,phase:ProjectBroadcastPhase.PROJECT_BROADCAST_PHASE_UNSPECIFIED},layoutApi:{layoutId:_.layoutId},props:(_==null?void 0:_.props)||_}},sceneNodeToLayer=a=>{const{id:c,props:b={},children:_=[]}=a;return{...c?{id:c}:{},type:b.type,data:{...b},children:_.map(k=>k.id)}},nodeToLayer=a=>({id:a.id,type:a.props.type,data:{...a.props},children:a.childIds.map(c=>c)}),layerToNode=a=>({id:String(a.id),props:{type:a.type,...a.data},childIds:a.children.map(c=>String(c))}),layoutToProject=async(a,c)=>{const{layers:b}=await CoreContext.clients.LayoutApi().layer.listLayers({layoutId:a});if(c&&b){const{x:_e,y:et}=c,nt=b==null?void 0:b.reduce((it,ft)=>it?it.data.isRoot?it:ft.data.isRoot||!b.some(pt=>pt.children.includes(ft.id))?ft:it:ft,null);if(nt){const it=await CoreContext.clients.LayoutApi().layer.updateLayer({layoutId:nt.layoutId,layerId:nt.id,layer:{x:_e,y:et,data:{...nt.data,size:{x:_e,y:et}}}}),ft=b.findIndex(pt=>pt.id===it.id);b[ft]=it}}const _=b.map(layerToNode),k=_.reduce((_e,et)=>_e?_e.props.isRoot?_e:et.props.isRoot||!_.some(nt=>nt.childIds.includes(et.id))?et:_e:et,null),j=k?toSceneTree(_,k.id):null;return CoreContext.compositor.loadProject(j,a)},getUser=()=>{const a=state$1.user;if(!a)throw new Error("User not loaded");return a},getProject=a=>state$1.projects.find(c=>c.id===a),getProjectByLayoutId=a=>state$1.projects.find(c=>c.compositor.id===a),getProjectRoom=a=>{var c;return getRoom((c=getProject(a))==null?void 0:c.roomId)},{connectionId}=CoreContext,latestUpdateVersion={},getNextNodeVersion=a=>(latestUpdateVersion[a]||(latestUpdateVersion[a]=0),++latestUpdateVersion[a]),request=(a,c)=>{const b=c.map(_=>{const[k,j]=_;return{[k]:j}});return log$1.debug("Batch request",b),CoreContext.clients.LayoutApi().layer.batch({layoutId:a,layers:b,requestMetadata:{connectionId,layoutId:a,updateVersions:c.filter(([_])=>_==="update").map(([_,k])=>({[k.id]:getNextNodeVersion(k.id)})).reduce((_,k)=>({...k,..._}),{})}})},compositorAdapter=(a,c)=>({async insert(b={},_,k){const j=nodeToLayer({id:null,props:b,childIds:[]});_?j.type="child":j.type="root",log$1.debug("Insert layer",j);const _e=await CoreContext.clients.LayoutApi().layer.createLayer({layoutId:a,layer:{...j,requestMetadata:{connectionId,layoutId:a}}});if(_e.code)throw new Error(_e.message);const et=await c.get(_);if(_&&!et)throw Error("Parent not found with ID");if(et){const nt=nodeToLayer(et),it=insertAt$1(k,_e.id,nt.children),ft={layoutId:a,layerId:nt.id,layer:{children:it,requestMetadata:{connectionId,layoutId:a,updateVersion:{[j.id]:getNextNodeVersion(j.id)}}}};await CoreContext.clients.LayoutApi().layer.updateLayer(ft)}return String(_e.id)},async update(b,_={}){const k=c.get(b),j=nodeToLayer({...k,props:{...k.props,..._}}),_e={layoutId:a,layerId:j.id,layer:{...j,requestMetadata:{connectionId,layoutId:a,updateVersions:{[j.id]:getNextNodeVersion(j.id)}}}};log$1.debug("Update layer",_e),await CoreContext.clients.LayoutApi().layer.updateLayer(_e)},async remove(b){const _=await c.getParent(b);if(_){const k=nodeToLayer(_),j=k.children.filter(et=>et!==b),_e={layoutId:a,layerId:k.id,layer:{children:j,requestMetadata:{connectionId,layoutId:a,updateVersions:{[k.id]:getNextNodeVersion(k.id)}}}};await CoreContext.clients.LayoutApi().layer.updateLayer(_e)}await CoreContext.clients.LayoutApi().layer.deleteLayer({layoutId:a,layerId:b,payload:{requestMetadata:{connectionId,layoutId:a}}})},async reorder(b,_){const k=c.get(b),j=nodeToLayer({...k,childIds:_});log$1.debug("Reorder layer children",j),await CoreContext.clients.LayoutApi().layer.updateLayer({layoutId:a,layerId:j.id,layer:{children:j.children,requestMetadata:{connectionId,layoutId:a,updateVersions:{[j.id]:getNextNodeVersion(j.id)}}}})},async move(b,_,k){const j=c.get(b),_e=c.get(c.getParent(b).id),et=nodeToLayer({..._e,childIds:pull$1(_e.childIds,j.id)}),nt=c.get(_),it=nodeToLayer({...nt,childIds:insertAt$1(k,j.id,nt.childIds)});log$1.debug("Move layers"),await Promise.all([CoreContext.clients.LayoutApi().layer.updateLayer({layoutId:a,layerId:et.id,layer:{children:et.children,requestMetadata:{connectionId,layoutId:a,updateVersions:{[et.id]:getNextNodeVersion(et.id)}}}}),CoreContext.clients.LayoutApi().layer.updateLayer({layoutId:a,layerId:it.id,layer:{children:it.children,requestMetadata:{connectionId,layoutId:a,updateVersions:{[it.id]:getNextNodeVersion(it.id)}}}})])},async batch(b){const _=b.map(([j,_e])=>[j,sceneNodeToLayer(_e)]),k=await request(a,_);return log$1.debug("Batch response",k),k}}),config$1=a=>({defaults:{previewTokenDuration:1e3*60*60,guestTokenDuration:1e3*60*60*12,transforms:{RoomParticipant:"LS-Room-Participant",Image:"LS-Image",Banner:"LS-Banner",Text:"LS-Text"}}});var reactDom={exports:{}},reactDom_production_min={},react={exports:{}},react_production_min={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l=Symbol.for("react.element"),n=Symbol.for("react.portal"),p$1=Symbol.for("react.fragment"),q=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),t=Symbol.for("react.provider"),u=Symbol.for("react.context"),v$1=Symbol.for("react.forward_ref"),w=Symbol.for("react.suspense"),x=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),z$1=Symbol.iterator;function A$1(a){return a===null||typeof a!="object"?null:(a=z$1&&a[z$1]||a["@@iterator"],typeof a=="function"?a:null)}var B$1={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C$1=Object.assign,D$1={};function E$1(a,c,b){this.props=a,this.context=c,this.refs=D$1,this.updater=b||B$1}E$1.prototype.isReactComponent={};E$1.prototype.setState=function(a,c){if(typeof a!="object"&&typeof a!="function"&&a!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,a,c,"setState")};E$1.prototype.forceUpdate=function(a){this.updater.enqueueForceUpdate(this,a,"forceUpdate")};function F(){}F.prototype=E$1.prototype;function G$1(a,c,b){this.props=a,this.context=c,this.refs=D$1,this.updater=b||B$1}var H$1=G$1.prototype=new F;H$1.constructor=G$1;C$1(H$1,E$1.prototype);H$1.isPureReactComponent=!0;var I$1=Array.isArray,J=Object.prototype.hasOwnProperty,K$1={current:null},L$1={key:!0,ref:!0,__self:!0,__source:!0};function M$1(a,c,b){var _,k={},j=null,_e=null;if(c!=null)for(_ in c.ref!==void 0&&(_e=c.ref),c.key!==void 0&&(j=""+c.key),c)J.call(c,_)&&!L$1.hasOwnProperty(_)&&(k[_]=c[_]);var et=arguments.length-2;if(et===1)k.children=b;else if(1<et){for(var nt=Array(et),it=0;it<et;it++)nt[it]=arguments[it+2];k.children=nt}if(a&&a.defaultProps)for(_ in et=a.defaultProps,et)k[_]===void 0&&(k[_]=et[_]);return{$$typeof:l,type:a,key:j,ref:_e,props:k,_owner:K$1.current}}function N$1(a,c){return{$$typeof:l,type:a.type,key:c,ref:a.ref,props:a.props,_owner:a._owner}}function O$1(a){return typeof a=="object"&&a!==null&&a.$$typeof===l}function escape(a){var c={"=":"=0",":":"=2"};return"$"+a.replace(/[=:]/g,function(b){return c[b]})}var P$1=/\/+/g;function Q$1(a,c){return typeof a=="object"&&a!==null&&a.key!=null?escape(""+a.key):c.toString(36)}function R$1(a,c,b,_,k){var j=typeof a;(j==="undefined"||j==="boolean")&&(a=null);var _e=!1;if(a===null)_e=!0;else switch(j){case"string":case"number":_e=!0;break;case"object":switch(a.$$typeof){case l:case n:_e=!0}}if(_e)return _e=a,k=k(_e),a=_===""?"."+Q$1(_e,0):_,I$1(k)?(b="",a!=null&&(b=a.replace(P$1,"$&/")+"/"),R$1(k,c,b,"",function(it){return it})):k!=null&&(O$1(k)&&(k=N$1(k,b+(!k.key||_e&&_e.key===k.key?"":(""+k.key).replace(P$1,"$&/")+"/")+a)),c.push(k)),1;if(_e=0,_=_===""?".":_+":",I$1(a))for(var et=0;et<a.length;et++){j=a[et];var nt=_+Q$1(j,et);_e+=R$1(j,c,b,nt,k)}else if(nt=A$1(a),typeof nt=="function")for(a=nt.call(a),et=0;!(j=a.next()).done;)j=j.value,nt=_+Q$1(j,et++),_e+=R$1(j,c,b,nt,k);else if(j==="object")throw c=String(a),Error("Objects are not valid as a React child (found: "+(c==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":c)+"). If you meant to render a collection of children, use an array instead.");return _e}function S$1(a,c,b){if(a==null)return a;var _=[],k=0;return R$1(a,_,"","",function(j){return c.call(b,j,k++)}),_}function T$1(a){if(a._status===-1){var c=a._result;c=c(),c.then(function(b){(a._status===0||a._status===-1)&&(a._status=1,a._result=b)},function(b){(a._status===0||a._status===-1)&&(a._status=2,a._result=b)}),a._status===-1&&(a._status=0,a._result=c)}if(a._status===1)return a._result.default;throw a._result}var U$1={current:null},V$1={transition:null},W$1={ReactCurrentDispatcher:U$1,ReactCurrentBatchConfig:V$1,ReactCurrentOwner:K$1};react_production_min.Children={map:S$1,forEach:function(a,c,b){S$1(a,function(){c.apply(this,arguments)},b)},count:function(a){var c=0;return S$1(a,function(){c++}),c},toArray:function(a){return S$1(a,function(c){return c})||[]},only:function(a){if(!O$1(a))throw Error("React.Children.only expected to receive a single React element child.");return a}};react_production_min.Component=E$1;react_production_min.Fragment=p$1;react_production_min.Profiler=r;react_production_min.PureComponent=G$1;react_production_min.StrictMode=q;react_production_min.Suspense=w;react_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=W$1;react_production_min.cloneElement=function(a,c,b){if(a==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+a+".");var _=C$1({},a.props),k=a.key,j=a.ref,_e=a._owner;if(c!=null){if(c.ref!==void 0&&(j=c.ref,_e=K$1.current),c.key!==void 0&&(k=""+c.key),a.type&&a.type.defaultProps)var et=a.type.defaultProps;for(nt in c)J.call(c,nt)&&!L$1.hasOwnProperty(nt)&&(_[nt]=c[nt]===void 0&&et!==void 0?et[nt]:c[nt])}var nt=arguments.length-2;if(nt===1)_.children=b;else if(1<nt){et=Array(nt);for(var it=0;it<nt;it++)et[it]=arguments[it+2];_.children=et}return{$$typeof:l,type:a.type,key:k,ref:j,props:_,_owner:_e}};react_production_min.createContext=function(a){return a={$$typeof:u,_currentValue:a,_currentValue2:a,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},a.Provider={$$typeof:t,_context:a},a.Consumer=a};react_production_min.createElement=M$1;react_production_min.createFactory=function(a){var c=M$1.bind(null,a);return c.type=a,c};react_production_min.createRef=function(){return{current:null}};react_production_min.forwardRef=function(a){return{$$typeof:v$1,render:a}};react_production_min.isValidElement=O$1;react_production_min.lazy=function(a){return{$$typeof:y,_payload:{_status:-1,_result:a},_init:T$1}};react_production_min.memo=function(a,c){return{$$typeof:x,type:a,compare:c===void 0?null:c}};react_production_min.startTransition=function(a){var c=V$1.transition;V$1.transition={};try{a()}finally{V$1.transition=c}};react_production_min.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};react_production_min.useCallback=function(a,c){return U$1.current.useCallback(a,c)};react_production_min.useContext=function(a){return U$1.current.useContext(a)};react_production_min.useDebugValue=function(){};react_production_min.useDeferredValue=function(a){return U$1.current.useDeferredValue(a)};react_production_min.useEffect=function(a,c){return U$1.current.useEffect(a,c)};react_production_min.useId=function(){return U$1.current.useId()};react_production_min.useImperativeHandle=function(a,c,b){return U$1.current.useImperativeHandle(a,c,b)};react_production_min.useInsertionEffect=function(a,c){return U$1.current.useInsertionEffect(a,c)};react_production_min.useLayoutEffect=function(a,c){return U$1.current.useLayoutEffect(a,c)};react_production_min.useMemo=function(a,c){return U$1.current.useMemo(a,c)};react_production_min.useReducer=function(a,c,b){return U$1.current.useReducer(a,c,b)};react_production_min.useRef=function(a){return U$1.current.useRef(a)};react_production_min.useState=function(a){return U$1.current.useState(a)};react_production_min.useSyncExternalStore=function(a,c,b){return U$1.current.useSyncExternalStore(a,c,b)};react_production_min.useTransition=function(){return U$1.current.useTransition()};react_production_min.version="18.2.0";react.exports=react_production_min;var reactExports=react.exports;const React=getDefaultExportFromCjs$1(reactExports);var scheduler={exports:{}},scheduler_production_min={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(a){function c(rn,Sn){var bn=rn.length;rn.push(Sn);e:for(;0<bn;){var kn=bn-1>>>1,_n=rn[kn];if(0<k(_n,Sn))rn[kn]=Sn,rn[bn]=_n,bn=kn;else break e}}function b(rn){return rn.length===0?null:rn[0]}function _(rn){if(rn.length===0)return null;var Sn=rn[0],bn=rn.pop();if(bn!==Sn){rn[0]=bn;e:for(var kn=0,_n=rn.length,tn=_n>>>1;kn<tn;){var pn=2*(kn+1)-1,yn=rn[pn],In=pn+1,sn=rn[In];if(0>k(yn,bn))In<_n&&0>k(sn,yn)?(rn[kn]=sn,rn[In]=bn,kn=In):(rn[kn]=yn,rn[pn]=bn,kn=pn);else if(In<_n&&0>k(sn,bn))rn[kn]=sn,rn[In]=bn,kn=In;else break e}}return Sn}function k(rn,Sn){var bn=rn.sortIndex-Sn.sortIndex;return bn!==0?bn:rn.id-Sn.id}if(typeof performance=="object"&&typeof performance.now=="function"){var j=performance;a.unstable_now=function(){return j.now()}}else{var _e=Date,et=_e.now();a.unstable_now=function(){return _e.now()-et}}var nt=[],it=[],ft=1,pt=null,mt=3,St=!1,yt=!1,_t=!1,Tt=typeof setTimeout=="function"?setTimeout:null,gt=typeof clearTimeout=="function"?clearTimeout:null,ht=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function Et(rn){for(var Sn=b(it);Sn!==null;){if(Sn.callback===null)_(it);else if(Sn.startTime<=rn)_(it),Sn.sortIndex=Sn.expirationTime,c(nt,Sn);else break;Sn=b(it)}}function At(rn){if(_t=!1,Et(rn),!yt)if(b(nt)!==null)yt=!0,Qt(Bt);else{var Sn=b(it);Sn!==null&&xt(At,Sn.startTime-rn)}}function Bt(rn,Sn){yt=!1,_t&&(_t=!1,gt(Ht),Ht=-1),St=!0;var bn=mt;try{for(Et(Sn),pt=b(nt);pt!==null&&(!(pt.expirationTime>Sn)||rn&&!lt());){var kn=pt.callback;if(typeof kn=="function"){pt.callback=null,mt=pt.priorityLevel;var _n=kn(pt.expirationTime<=Sn);Sn=a.unstable_now(),typeof _n=="function"?pt.callback=_n:pt===b(nt)&&_(nt),Et(Sn)}else _(nt);pt=b(nt)}if(pt!==null)var tn=!0;else{var pn=b(it);pn!==null&&xt(At,pn.startTime-Sn),tn=!1}return tn}finally{pt=null,mt=bn,St=!1}}var qt=!1,zt=null,Ht=-1,ct=5,dt=-1;function lt(){return!(a.unstable_now()-dt<ct)}function kt(){if(zt!==null){var rn=a.unstable_now();dt=rn;var Sn=!0;try{Sn=zt(!0,rn)}finally{Sn?Lt():(qt=!1,zt=null)}}else qt=!1}var Lt;if(typeof ht=="function")Lt=function(){ht(kt)};else if(typeof MessageChannel<"u"){var Jt=new MessageChannel,en=Jt.port2;Jt.port1.onmessage=kt,Lt=function(){en.postMessage(null)}}else Lt=function(){Tt(kt,0)};function Qt(rn){zt=rn,qt||(qt=!0,Lt())}function xt(rn,Sn){Ht=Tt(function(){rn(a.unstable_now())},Sn)}a.unstable_IdlePriority=5,a.unstable_ImmediatePriority=1,a.unstable_LowPriority=4,a.unstable_NormalPriority=3,a.unstable_Profiling=null,a.unstable_UserBlockingPriority=2,a.unstable_cancelCallback=function(rn){rn.callback=null},a.unstable_continueExecution=function(){yt||St||(yt=!0,Qt(Bt))},a.unstable_forceFrameRate=function(rn){0>rn||125<rn?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ct=0<rn?Math.floor(1e3/rn):5},a.unstable_getCurrentPriorityLevel=function(){return mt},a.unstable_getFirstCallbackNode=function(){return b(nt)},a.unstable_next=function(rn){switch(mt){case 1:case 2:case 3:var Sn=3;break;default:Sn=mt}var bn=mt;mt=Sn;try{return rn()}finally{mt=bn}},a.unstable_pauseExecution=function(){},a.unstable_requestPaint=function(){},a.unstable_runWithPriority=function(rn,Sn){switch(rn){case 1:case 2:case 3:case 4:case 5:break;default:rn=3}var bn=mt;mt=rn;try{return Sn()}finally{mt=bn}},a.unstable_scheduleCallback=function(rn,Sn,bn){var kn=a.unstable_now();switch(typeof bn=="object"&&bn!==null?(bn=bn.delay,bn=typeof bn=="number"&&0<bn?kn+bn:kn):bn=kn,rn){case 1:var _n=-1;break;case 2:_n=250;break;case 5:_n=1073741823;break;case 4:_n=1e4;break;default:_n=5e3}return _n=bn+_n,rn={id:ft++,callback:Sn,priorityLevel:rn,startTime:bn,expirationTime:_n,sortIndex:-1},bn>kn?(rn.sortIndex=bn,c(it,rn),b(nt)===null&&rn===b(it)&&(_t?(gt(Ht),Ht=-1):_t=!0,xt(At,bn-kn))):(rn.sortIndex=_n,c(nt,rn),yt||St||(yt=!0,Qt(Bt))),rn},a.unstable_shouldYield=lt,a.unstable_wrapCallback=function(rn){var Sn=mt;return function(){var bn=mt;mt=Sn;try{return rn.apply(this,arguments)}finally{mt=bn}}}})(scheduler_production_min);scheduler.exports=scheduler_production_min;var schedulerExports=scheduler.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aa=reactExports,ca=schedulerExports;function p(a){for(var c="https://reactjs.org/docs/error-decoder.html?invariant="+a,b=1;b<arguments.length;b++)c+="&args[]="+encodeURIComponent(arguments[b]);return"Minified React error #"+a+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var da=new Set,ea={};function fa(a,c){ha(a,c),ha(a+"Capture",c)}function ha(a,c){for(ea[a]=c,a=0;a<c.length;a++)da.add(c[a])}var ia=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ja=Object.prototype.hasOwnProperty,ka=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,la={},ma={};function oa(a){return ja.call(ma,a)?!0:ja.call(la,a)?!1:ka.test(a)?ma[a]=!0:(la[a]=!0,!1)}function pa(a,c,b,_){if(b!==null&&b.type===0)return!1;switch(typeof c){case"function":case"symbol":return!0;case"boolean":return _?!1:b!==null?!b.acceptsBooleans:(a=a.toLowerCase().slice(0,5),a!=="data-"&&a!=="aria-");default:return!1}}function qa(a,c,b,_){if(c===null||typeof c>"u"||pa(a,c,b,_))return!0;if(_)return!1;if(b!==null)switch(b.type){case 3:return!c;case 4:return c===!1;case 5:return isNaN(c);case 6:return isNaN(c)||1>c}return!1}function v(a,c,b,_,k,j,_e){this.acceptsBooleans=c===2||c===3||c===4,this.attributeName=_,this.attributeNamespace=k,this.mustUseProperty=b,this.propertyName=a,this.type=c,this.sanitizeURL=j,this.removeEmptyString=_e}var z={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(a){z[a]=new v(a,0,!1,a,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(a){var c=a[0];z[c]=new v(c,1,!1,a[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(a){z[a]=new v(a,2,!1,a.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(a){z[a]=new v(a,2,!1,a,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(a){z[a]=new v(a,3,!1,a.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(a){z[a]=new v(a,3,!0,a,null,!1,!1)});["capture","download"].forEach(function(a){z[a]=new v(a,4,!1,a,null,!1,!1)});["cols","rows","size","span"].forEach(function(a){z[a]=new v(a,6,!1,a,null,!1,!1)});["rowSpan","start"].forEach(function(a){z[a]=new v(a,5,!1,a.toLowerCase(),null,!1,!1)});var ra=/[\-:]([a-z])/g;function sa(a){return a[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(a){var c=a.replace(ra,sa);z[c]=new v(c,1,!1,a,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(a){var c=a.replace(ra,sa);z[c]=new v(c,1,!1,a,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(a){var c=a.replace(ra,sa);z[c]=new v(c,1,!1,a,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(a){z[a]=new v(a,1,!1,a.toLowerCase(),null,!1,!1)});z.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(a){z[a]=new v(a,1,!1,a.toLowerCase(),null,!0,!0)});function ta(a,c,b,_){var k=z.hasOwnProperty(c)?z[c]:null;(k!==null?k.type!==0:_||!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(qa(c,b,k,_)&&(b=null),_||k===null?oa(c)&&(b===null?a.removeAttribute(c):a.setAttribute(c,""+b)):k.mustUseProperty?a[k.propertyName]=b===null?k.type===3?!1:"":b:(c=k.attributeName,_=k.attributeNamespace,b===null?a.removeAttribute(c):(k=k.type,b=k===3||k===4&&b===!0?"":""+b,_?a.setAttributeNS(_,c,b):a.setAttribute(c,b))))}var ua=aa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,va=Symbol.for("react.element"),wa=Symbol.for("react.portal"),ya=Symbol.for("react.fragment"),za=Symbol.for("react.strict_mode"),Aa=Symbol.for("react.profiler"),Ba=Symbol.for("react.provider"),Ca=Symbol.for("react.context"),Da=Symbol.for("react.forward_ref"),Ea=Symbol.for("react.suspense"),Fa=Symbol.for("react.suspense_list"),Ga=Symbol.for("react.memo"),Ha=Symbol.for("react.lazy"),Ia=Symbol.for("react.offscreen"),Ja=Symbol.iterator;function Ka(a){return a===null||typeof a!="object"?null:(a=Ja&&a[Ja]||a["@@iterator"],typeof a=="function"?a:null)}var A=Object.assign,La;function Ma(a){if(La===void 0)try{throw Error()}catch(b){var c=b.stack.trim().match(/\n( *(at )?)/);La=c&&c[1]||""}return`
`+La+a}var Na=!1;function Oa(a,c){if(!a||Na)return"";Na=!0;var b=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(c)if(c=function(){throw Error()},Object.defineProperty(c.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(c,[])}catch(it){var _=it}Reflect.construct(a,[],c)}else{try{c.call()}catch(it){_=it}a.call(c.prototype)}else{try{throw Error()}catch(it){_=it}a()}}catch(it){if(it&&_&&typeof it.stack=="string"){for(var k=it.stack.split(`
`),j=_.stack.split(`
`),_e=k.length-1,et=j.length-1;1<=_e&&0<=et&&k[_e]!==j[et];)et--;for(;1<=_e&&0<=et;_e--,et--)if(k[_e]!==j[et]){if(_e!==1||et!==1)do if(_e--,et--,0>et||k[_e]!==j[et]){var nt=`
`+k[_e].replace(" at new "," at ");return a.displayName&&nt.includes("<anonymous>")&&(nt=nt.replace("<anonymous>",a.displayName)),nt}while(1<=_e&&0<=et);break}}}finally{Na=!1,Error.prepareStackTrace=b}return(a=a?a.displayName||a.name:"")?Ma(a):""}function Pa(a){switch(a.tag){case 5:return Ma(a.type);case 16:return Ma("Lazy");case 13:return Ma("Suspense");case 19:return Ma("SuspenseList");case 0:case 2:case 15:return a=Oa(a.type,!1),a;case 11:return a=Oa(a.type.render,!1),a;case 1:return a=Oa(a.type,!0),a;default:return""}}function Qa(a){if(a==null)return null;if(typeof a=="function")return a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case ya:return"Fragment";case wa:return"Portal";case Aa:return"Profiler";case za:return"StrictMode";case Ea:return"Suspense";case Fa:return"SuspenseList"}if(typeof a=="object")switch(a.$$typeof){case Ca:return(a.displayName||"Context")+".Consumer";case Ba:return(a._context.displayName||"Context")+".Provider";case Da:var c=a.render;return a=a.displayName,a||(a=c.displayName||c.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case Ga:return c=a.displayName||null,c!==null?c:Qa(a.type)||"Memo";case Ha:c=a._payload,a=a._init;try{return Qa(a(c))}catch{}}return null}function Ra(a){var c=a.type;switch(a.tag){case 24:return"Cache";case 9:return(c.displayName||"Context")+".Consumer";case 10:return(c._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return a=c.render,a=a.displayName||a.name||"",c.displayName||(a!==""?"ForwardRef("+a+")":"ForwardRef");case 7:return"Fragment";case 5:return c;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Qa(c);case 8:return c===za?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof c=="function")return c.displayName||c.name||null;if(typeof c=="string")return c}return null}function Sa(a){switch(typeof a){case"boolean":case"number":case"string":case"undefined":return a;case"object":return a;default:return""}}function Ta(a){var c=a.type;return(a=a.nodeName)&&a.toLowerCase()==="input"&&(c==="checkbox"||c==="radio")}function Ua(a){var c=Ta(a)?"checked":"value",b=Object.getOwnPropertyDescriptor(a.constructor.prototype,c),_=""+a[c];if(!a.hasOwnProperty(c)&&typeof b<"u"&&typeof b.get=="function"&&typeof b.set=="function"){var k=b.get,j=b.set;return Object.defineProperty(a,c,{configurable:!0,get:function(){return k.call(this)},set:function(_e){_=""+_e,j.call(this,_e)}}),Object.defineProperty(a,c,{enumerable:b.enumerable}),{getValue:function(){return _},setValue:function(_e){_=""+_e},stopTracking:function(){a._valueTracker=null,delete a[c]}}}}function Va(a){a._valueTracker||(a._valueTracker=Ua(a))}function Wa(a){if(!a)return!1;var c=a._valueTracker;if(!c)return!0;var b=c.getValue(),_="";return a&&(_=Ta(a)?a.checked?"true":"false":a.value),a=_,a!==b?(c.setValue(a),!0):!1}function Xa(a){if(a=a||(typeof document<"u"?document:void 0),typeof a>"u")return null;try{return a.activeElement||a.body}catch{return a.body}}function Ya(a,c){var b=c.checked;return A({},c,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:b??a._wrapperState.initialChecked})}function Za(a,c){var b=c.defaultValue==null?"":c.defaultValue,_=c.checked!=null?c.checked:c.defaultChecked;b=Sa(c.value!=null?c.value:b),a._wrapperState={initialChecked:_,initialValue:b,controlled:c.type==="checkbox"||c.type==="radio"?c.checked!=null:c.value!=null}}function ab(a,c){c=c.checked,c!=null&&ta(a,"checked",c,!1)}function bb(a,c){ab(a,c);var b=Sa(c.value),_=c.type;if(b!=null)_==="number"?(b===0&&a.value===""||a.value!=b)&&(a.value=""+b):a.value!==""+b&&(a.value=""+b);else if(_==="submit"||_==="reset"){a.removeAttribute("value");return}c.hasOwnProperty("value")?cb(a,c.type,b):c.hasOwnProperty("defaultValue")&&cb(a,c.type,Sa(c.defaultValue)),c.checked==null&&c.defaultChecked!=null&&(a.defaultChecked=!!c.defaultChecked)}function db(a,c,b){if(c.hasOwnProperty("value")||c.hasOwnProperty("defaultValue")){var _=c.type;if(!(_!=="submit"&&_!=="reset"||c.value!==void 0&&c.value!==null))return;c=""+a._wrapperState.initialValue,b||c===a.value||(a.value=c),a.defaultValue=c}b=a.name,b!==""&&(a.name=""),a.defaultChecked=!!a._wrapperState.initialChecked,b!==""&&(a.name=b)}function cb(a,c,b){(c!=="number"||Xa(a.ownerDocument)!==a)&&(b==null?a.defaultValue=""+a._wrapperState.initialValue:a.defaultValue!==""+b&&(a.defaultValue=""+b))}var eb=Array.isArray;function fb(a,c,b,_){if(a=a.options,c){c={};for(var k=0;k<b.length;k++)c["$"+b[k]]=!0;for(b=0;b<a.length;b++)k=c.hasOwnProperty("$"+a[b].value),a[b].selected!==k&&(a[b].selected=k),k&&_&&(a[b].defaultSelected=!0)}else{for(b=""+Sa(b),c=null,k=0;k<a.length;k++){if(a[k].value===b){a[k].selected=!0,_&&(a[k].defaultSelected=!0);return}c!==null||a[k].disabled||(c=a[k])}c!==null&&(c.selected=!0)}}function gb(a,c){if(c.dangerouslySetInnerHTML!=null)throw Error(p(91));return A({},c,{value:void 0,defaultValue:void 0,children:""+a._wrapperState.initialValue})}function hb(a,c){var b=c.value;if(b==null){if(b=c.children,c=c.defaultValue,b!=null){if(c!=null)throw Error(p(92));if(eb(b)){if(1<b.length)throw Error(p(93));b=b[0]}c=b}c==null&&(c=""),b=c}a._wrapperState={initialValue:Sa(b)}}function ib(a,c){var b=Sa(c.value),_=Sa(c.defaultValue);b!=null&&(b=""+b,b!==a.value&&(a.value=b),c.defaultValue==null&&a.defaultValue!==b&&(a.defaultValue=b)),_!=null&&(a.defaultValue=""+_)}function jb(a){var c=a.textContent;c===a._wrapperState.initialValue&&c!==""&&c!==null&&(a.value=c)}function kb(a){switch(a){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lb(a,c){return a==null||a==="http://www.w3.org/1999/xhtml"?kb(c):a==="http://www.w3.org/2000/svg"&&c==="foreignObject"?"http://www.w3.org/1999/xhtml":a}var mb,nb=function(a){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(c,b,_,k){MSApp.execUnsafeLocalFunction(function(){return a(c,b,_,k)})}:a}(function(a,c){if(a.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in a)a.innerHTML=c;else{for(mb=mb||document.createElement("div"),mb.innerHTML="<svg>"+c.valueOf().toString()+"</svg>",c=mb.firstChild;a.firstChild;)a.removeChild(a.firstChild);for(;c.firstChild;)a.appendChild(c.firstChild)}});function ob(a,c){if(c){var b=a.firstChild;if(b&&b===a.lastChild&&b.nodeType===3){b.nodeValue=c;return}}a.textContent=c}var pb={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},qb=["Webkit","ms","Moz","O"];Object.keys(pb).forEach(function(a){qb.forEach(function(c){c=c+a.charAt(0).toUpperCase()+a.substring(1),pb[c]=pb[a]})});function rb(a,c,b){return c==null||typeof c=="boolean"||c===""?"":b||typeof c!="number"||c===0||pb.hasOwnProperty(a)&&pb[a]?(""+c).trim():c+"px"}function sb(a,c){a=a.style;for(var b in c)if(c.hasOwnProperty(b)){var _=b.indexOf("--")===0,k=rb(b,c[b],_);b==="float"&&(b="cssFloat"),_?a.setProperty(b,k):a[b]=k}}var tb=A({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ub(a,c){if(c){if(tb[a]&&(c.children!=null||c.dangerouslySetInnerHTML!=null))throw Error(p(137,a));if(c.dangerouslySetInnerHTML!=null){if(c.children!=null)throw Error(p(60));if(typeof c.dangerouslySetInnerHTML!="object"||!("__html"in c.dangerouslySetInnerHTML))throw Error(p(61))}if(c.style!=null&&typeof c.style!="object")throw Error(p(62))}}function vb(a,c){if(a.indexOf("-")===-1)return typeof c.is=="string";switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wb=null;function xb(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&&(a=a.correspondingUseElement),a.nodeType===3?a.parentNode:a}var yb=null,zb=null,Ab=null;function Bb(a){if(a=Cb(a)){if(typeof yb!="function")throw Error(p(280));var c=a.stateNode;c&&(c=Db(c),yb(a.stateNode,a.type,c))}}function Eb(a){zb?Ab?Ab.push(a):Ab=[a]:zb=a}function Fb(){if(zb){var a=zb,c=Ab;if(Ab=zb=null,Bb(a),c)for(a=0;a<c.length;a++)Bb(c[a])}}function Gb(a,c){return a(c)}function Hb(){}var Ib=!1;function Jb(a,c,b){if(Ib)return a(c,b);Ib=!0;try{return Gb(a,c,b)}finally{Ib=!1,(zb!==null||Ab!==null)&&(Hb(),Fb())}}function Kb(a,c){var b=a.stateNode;if(b===null)return null;var _=Db(b);if(_===null)return null;b=_[c];e:switch(c){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(_=!_.disabled)||(a=a.type,_=!(a==="button"||a==="input"||a==="select"||a==="textarea")),a=!_;break e;default:a=!1}if(a)return null;if(b&&typeof b!="function")throw Error(p(231,c,typeof b));return b}var Lb=!1;if(ia)try{var Mb={};Object.defineProperty(Mb,"passive",{get:function(){Lb=!0}}),window.addEventListener("test",Mb,Mb),window.removeEventListener("test",Mb,Mb)}catch(a){Lb=!1}function Nb(a,c,b,_,k,j,_e,et,nt){var it=Array.prototype.slice.call(arguments,3);try{c.apply(b,it)}catch(ft){this.onError(ft)}}var Ob=!1,Pb=null,Qb=!1,Rb=null,Sb={onError:function(a){Ob=!0,Pb=a}};function Tb(a,c,b,_,k,j,_e,et,nt){Ob=!1,Pb=null,Nb.apply(Sb,arguments)}function Ub(a,c,b,_,k,j,_e,et,nt){if(Tb.apply(this,arguments),Ob){if(Ob){var it=Pb;Ob=!1,Pb=null}else throw Error(p(198));Qb||(Qb=!0,Rb=it)}}function Vb(a){var c=a,b=a;if(a.alternate)for(;c.return;)c=c.return;else{a=c;do c=a,c.flags&4098&&(b=c.return),a=c.return;while(a)}return c.tag===3?b:null}function Wb(a){if(a.tag===13){var c=a.memoizedState;if(c===null&&(a=a.alternate,a!==null&&(c=a.memoizedState)),c!==null)return c.dehydrated}return null}function Xb(a){if(Vb(a)!==a)throw Error(p(188))}function Yb(a){var c=a.alternate;if(!c){if(c=Vb(a),c===null)throw Error(p(188));return c!==a?null:a}for(var b=a,_=c;;){var k=b.return;if(k===null)break;var j=k.alternate;if(j===null){if(_=k.return,_!==null){b=_;continue}break}if(k.child===j.child){for(j=k.child;j;){if(j===b)return Xb(k),a;if(j===_)return Xb(k),c;j=j.sibling}throw Error(p(188))}if(b.return!==_.return)b=k,_=j;else{for(var _e=!1,et=k.child;et;){if(et===b){_e=!0,b=k,_=j;break}if(et===_){_e=!0,_=k,b=j;break}et=et.sibling}if(!_e){for(et=j.child;et;){if(et===b){_e=!0,b=j,_=k;break}if(et===_){_e=!0,_=j,b=k;break}et=et.sibling}if(!_e)throw Error(p(189))}}if(b.alternate!==_)throw Error(p(190))}if(b.tag!==3)throw Error(p(188));return b.stateNode.current===b?a:c}function Zb(a){return a=Yb(a),a!==null?$b(a):null}function $b(a){if(a.tag===5||a.tag===6)return a;for(a=a.child;a!==null;){var c=$b(a);if(c!==null)return c;a=a.sibling}return null}var ac=ca.unstable_scheduleCallback,bc=ca.unstable_cancelCallback,cc=ca.unstable_shouldYield,dc=ca.unstable_requestPaint,B=ca.unstable_now,ec=ca.unstable_getCurrentPriorityLevel,fc=ca.unstable_ImmediatePriority,gc=ca.unstable_UserBlockingPriority,hc=ca.unstable_NormalPriority,ic=ca.unstable_LowPriority,jc=ca.unstable_IdlePriority,kc=null,lc=null;function mc(a){if(lc&&typeof lc.onCommitFiberRoot=="function")try{lc.onCommitFiberRoot(kc,a,void 0,(a.current.flags&128)===128)}catch{}}var oc=Math.clz32?Math.clz32:nc,pc=Math.log,qc=Math.LN2;function nc(a){return a>>>=0,a===0?32:31-(pc(a)/qc|0)|0}var rc=64,sc=4194304;function tc(a){switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return a&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return a}}function uc(a,c){var b=a.pendingLanes;if(b===0)return 0;var _=0,k=a.suspendedLanes,j=a.pingedLanes,_e=b&268435455;if(_e!==0){var et=_e&~k;et!==0?_=tc(et):(j&=_e,j!==0&&(_=tc(j)))}else _e=b&~k,_e!==0?_=tc(_e):j!==0&&(_=tc(j));if(_===0)return 0;if(c!==0&&c!==_&&!(c&k)&&(k=_&-_,j=c&-c,k>=j||k===16&&(j&4194240)!==0))return c;if(_&4&&(_|=b&16),c=a.entangledLanes,c!==0)for(a=a.entanglements,c&=_;0<c;)b=31-oc(c),k=1<<b,_|=a[b],c&=~k;return _}function vc(a,c){switch(a){case 1:case 2:case 4:return c+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wc(a,c){for(var b=a.suspendedLanes,_=a.pingedLanes,k=a.expirationTimes,j=a.pendingLanes;0<j;){var _e=31-oc(j),et=1<<_e,nt=k[_e];nt===-1?(!(et&b)||et&_)&&(k[_e]=vc(et,c)):nt<=c&&(a.expiredLanes|=et),j&=~et}}function xc(a){return a=a.pendingLanes&-1073741825,a!==0?a:a&1073741824?1073741824:0}function yc(){var a=rc;return rc<<=1,!(rc&4194240)&&(rc=64),a}function zc(a){for(var c=[],b=0;31>b;b++)c.push(a);return c}function Ac(a,c,b){a.pendingLanes|=c,c!==536870912&&(a.suspendedLanes=0,a.pingedLanes=0),a=a.eventTimes,c=31-oc(c),a[c]=b}function Bc(a,c){var b=a.pendingLanes&~c;a.pendingLanes=c,a.suspendedLanes=0,a.pingedLanes=0,a.expiredLanes&=c,a.mutableReadLanes&=c,a.entangledLanes&=c,c=a.entanglements;var _=a.eventTimes;for(a=a.expirationTimes;0<b;){var k=31-oc(b),j=1<<k;c[k]=0,_[k]=-1,a[k]=-1,b&=~j}}function Cc(a,c){var b=a.entangledLanes|=c;for(a=a.entanglements;b;){var _=31-oc(b),k=1<<_;k&c|a[_]&c&&(a[_]|=c),b&=~k}}var C=0;function Dc(a){return a&=-a,1<a?4<a?a&268435455?16:536870912:4:1}var Ec,Fc,Gc,Hc,Ic,Jc=!1,Kc=[],Lc=null,Mc=null,Nc=null,Oc=new Map,Pc=new Map,Qc=[],Rc="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Sc(a,c){switch(a){case"focusin":case"focusout":Lc=null;break;case"dragenter":case"dragleave":Mc=null;break;case"mouseover":case"mouseout":Nc=null;break;case"pointerover":case"pointerout":Oc.delete(c.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pc.delete(c.pointerId)}}function Tc(a,c,b,_,k,j){return a===null||a.nativeEvent!==j?(a={blockedOn:c,domEventName:b,eventSystemFlags:_,nativeEvent:j,targetContainers:[k]},c!==null&&(c=Cb(c),c!==null&&Fc(c)),a):(a.eventSystemFlags|=_,c=a.targetContainers,k!==null&&c.indexOf(k)===-1&&c.push(k),a)}function Uc(a,c,b,_,k){switch(c){case"focusin":return Lc=Tc(Lc,a,c,b,_,k),!0;case"dragenter":return Mc=Tc(Mc,a,c,b,_,k),!0;case"mouseover":return Nc=Tc(Nc,a,c,b,_,k),!0;case"pointerover":var j=k.pointerId;return Oc.set(j,Tc(Oc.get(j)||null,a,c,b,_,k)),!0;case"gotpointercapture":return j=k.pointerId,Pc.set(j,Tc(Pc.get(j)||null,a,c,b,_,k)),!0}return!1}function Vc(a){var c=Wc(a.target);if(c!==null){var b=Vb(c);if(b!==null){if(c=b.tag,c===13){if(c=Wb(b),c!==null){a.blockedOn=c,Ic(a.priority,function(){Gc(b)});return}}else if(c===3&&b.stateNode.current.memoizedState.isDehydrated){a.blockedOn=b.tag===3?b.stateNode.containerInfo:null;return}}}a.blockedOn=null}function Xc(a){if(a.blockedOn!==null)return!1;for(var c=a.targetContainers;0<c.length;){var b=Yc(a.domEventName,a.eventSystemFlags,c[0],a.nativeEvent);if(b===null){b=a.nativeEvent;var _=new b.constructor(b.type,b);wb=_,b.target.dispatchEvent(_),wb=null}else return c=Cb(b),c!==null&&Fc(c),a.blockedOn=b,!1;c.shift()}return!0}function Zc(a,c,b){Xc(a)&&b.delete(c)}function $c(){Jc=!1,Lc!==null&&Xc(Lc)&&(Lc=null),Mc!==null&&Xc(Mc)&&(Mc=null),Nc!==null&&Xc(Nc)&&(Nc=null),Oc.forEach(Zc),Pc.forEach(Zc)}function ad(a,c){a.blockedOn===c&&(a.blockedOn=null,Jc||(Jc=!0,ca.unstable_scheduleCallback(ca.unstable_NormalPriority,$c)))}function bd(a){function c(k){return ad(k,a)}if(0<Kc.length){ad(Kc[0],a);for(var b=1;b<Kc.length;b++){var _=Kc[b];_.blockedOn===a&&(_.blockedOn=null)}}for(Lc!==null&&ad(Lc,a),Mc!==null&&ad(Mc,a),Nc!==null&&ad(Nc,a),Oc.forEach(c),Pc.forEach(c),b=0;b<Qc.length;b++)_=Qc[b],_.blockedOn===a&&(_.blockedOn=null);for(;0<Qc.length&&(b=Qc[0],b.blockedOn===null);)Vc(b),b.blockedOn===null&&Qc.shift()}var cd=ua.ReactCurrentBatchConfig,dd=!0;function ed(a,c,b,_){var k=C,j=cd.transition;cd.transition=null;try{C=1,fd(a,c,b,_)}finally{C=k,cd.transition=j}}function gd(a,c,b,_){var k=C,j=cd.transition;cd.transition=null;try{C=4,fd(a,c,b,_)}finally{C=k,cd.transition=j}}function fd(a,c,b,_){if(dd){var k=Yc(a,c,b,_);if(k===null)hd(a,c,_,id,b),Sc(a,_);else if(Uc(k,a,c,b,_))_.stopPropagation();else if(Sc(a,_),c&4&&-1<Rc.indexOf(a)){for(;k!==null;){var j=Cb(k);if(j!==null&&Ec(j),j=Yc(a,c,b,_),j===null&&hd(a,c,_,id,b),j===k)break;k=j}k!==null&&_.stopPropagation()}else hd(a,c,_,null,b)}}var id=null;function Yc(a,c,b,_){if(id=null,a=xb(_),a=Wc(a),a!==null)if(c=Vb(a),c===null)a=null;else if(b=c.tag,b===13){if(a=Wb(c),a!==null)return a;a=null}else if(b===3){if(c.stateNode.current.memoizedState.isDehydrated)return c.tag===3?c.stateNode.containerInfo:null;a=null}else c!==a&&(a=null);return id=a,null}function jd(a){switch(a){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ec()){case fc:return 1;case gc:return 4;case hc:case ic:return 16;case jc:return 536870912;default:return 16}default:return 16}}var kd=null,ld=null,md=null;function nd(){if(md)return md;var a,c=ld,b=c.length,_,k="value"in kd?kd.value:kd.textContent,j=k.length;for(a=0;a<b&&c[a]===k[a];a++);var _e=b-a;for(_=1;_<=_e&&c[b-_]===k[j-_];_++);return md=k.slice(a,1<_?1-_:void 0)}function od(a){var c=a.keyCode;return"charCode"in a?(a=a.charCode,a===0&&c===13&&(a=13)):a=c,a===10&&(a=13),32<=a||a===13?a:0}function pd(){return!0}function qd(){return!1}function rd(a){function c(b,_,k,j,_e){this._reactName=b,this._targetInst=k,this.type=_,this.nativeEvent=j,this.target=_e,this.currentTarget=null;for(var et in a)a.hasOwnProperty(et)&&(b=a[et],this[et]=b?b(j):j[et]);return this.isDefaultPrevented=(j.defaultPrevented!=null?j.defaultPrevented:j.returnValue===!1)?pd:qd,this.isPropagationStopped=qd,this}return A(c.prototype,{preventDefault:function(){this.defaultPrevented=!0;var b=this.nativeEvent;b&&(b.preventDefault?b.preventDefault():typeof b.returnValue!="unknown"&&(b.returnValue=!1),this.isDefaultPrevented=pd)},stopPropagation:function(){var b=this.nativeEvent;b&&(b.stopPropagation?b.stopPropagation():typeof b.cancelBubble!="unknown"&&(b.cancelBubble=!0),this.isPropagationStopped=pd)},persist:function(){},isPersistent:pd}),c}var sd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},td=rd(sd),ud=A({},sd,{view:0,detail:0}),vd=rd(ud),wd,xd,yd,Ad=A({},ud,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zd,button:0,buttons:0,relatedTarget:function(a){return a.relatedTarget===void 0?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){return"movementX"in a?a.movementX:(a!==yd&&(yd&&a.type==="mousemove"?(wd=a.screenX-yd.screenX,xd=a.screenY-yd.screenY):xd=wd=0,yd=a),wd)},movementY:function(a){return"movementY"in a?a.movementY:xd}}),Bd=rd(Ad),Cd=A({},Ad,{dataTransfer:0}),Dd=rd(Cd),Ed=A({},ud,{relatedTarget:0}),Fd=rd(Ed),Gd=A({},sd,{animationName:0,elapsedTime:0,pseudoElement:0}),Hd=rd(Gd),Id=A({},sd,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),Jd=rd(Id),Kd=A({},sd,{data:0}),Ld=rd(Kd),Md={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Nd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Od={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pd(a){var c=this.nativeEvent;return c.getModifierState?c.getModifierState(a):(a=Od[a])?!!c[a]:!1}function zd(){return Pd}var Qd=A({},ud,{key:function(a){if(a.key){var c=Md[a.key]||a.key;if(c!=="Unidentified")return c}return a.type==="keypress"?(a=od(a),a===13?"Enter":String.fromCharCode(a)):a.type==="keydown"||a.type==="keyup"?Nd[a.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zd,charCode:function(a){return a.type==="keypress"?od(a):0},keyCode:function(a){return a.type==="keydown"||a.type==="keyup"?a.keyCode:0},which:function(a){return a.type==="keypress"?od(a):a.type==="keydown"||a.type==="keyup"?a.keyCode:0}}),Rd=rd(Qd),Sd=A({},Ad,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Td=rd(Sd),Ud=A({},ud,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zd}),Vd=rd(Ud),Wd=A({},sd,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xd=rd(Wd),Yd=A({},Ad,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),Zd=rd(Yd),$d=[9,13,27,32],ae=ia&&"CompositionEvent"in window,be=null;ia&&"documentMode"in document&&(be=document.documentMode);var ce=ia&&"TextEvent"in window&&!be,de=ia&&(!ae||be&&8<be&&11>=be),ee=" ",fe=!1;function ge(a,c){switch(a){case"keyup":return $d.indexOf(c.keyCode)!==-1;case"keydown":return c.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function he(a){return a=a.detail,typeof a=="object"&&"data"in a?a.data:null}var ie=!1;function je(a,c){switch(a){case"compositionend":return he(c);case"keypress":return c.which!==32?null:(fe=!0,ee);case"textInput":return a=c.data,a===ee&&fe?null:a;default:return null}}function ke(a,c){if(ie)return a==="compositionend"||!ae&&ge(a,c)?(a=nd(),md=ld=kd=null,ie=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(c.ctrlKey||c.altKey||c.metaKey)||c.ctrlKey&&c.altKey){if(c.char&&1<c.char.length)return c.char;if(c.which)return String.fromCharCode(c.which)}return null;case"compositionend":return de&&c.locale!=="ko"?null:c.data;default:return null}}var le={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function me(a){var c=a&&a.nodeName&&a.nodeName.toLowerCase();return c==="input"?!!le[a.type]:c==="textarea"}function ne(a,c,b,_){Eb(_),c=oe(c,"onChange"),0<c.length&&(b=new td("onChange","change",null,b,_),a.push({event:b,listeners:c}))}var pe=null,qe=null;function re(a){se(a,0)}function te(a){var c=ue(a);if(Wa(c))return a}function ve(a,c){if(a==="change")return c}var we=!1;if(ia){var xe;if(ia){var ye="oninput"in document;if(!ye){var ze=document.createElement("div");ze.setAttribute("oninput","return;"),ye=typeof ze.oninput=="function"}xe=ye}else xe=!1;we=xe&&(!document.documentMode||9<document.documentMode)}function Ae(){pe&&(pe.detachEvent("onpropertychange",Be),qe=pe=null)}function Be(a){if(a.propertyName==="value"&&te(qe)){var c=[];ne(c,qe,a,xb(a)),Jb(re,c)}}function Ce(a,c,b){a==="focusin"?(Ae(),pe=c,qe=b,pe.attachEvent("onpropertychange",Be)):a==="focusout"&&Ae()}function De(a){if(a==="selectionchange"||a==="keyup"||a==="keydown")return te(qe)}function Ee(a,c){if(a==="click")return te(c)}function Fe(a,c){if(a==="input"||a==="change")return te(c)}function Ge(a,c){return a===c&&(a!==0||1/a===1/c)||a!==a&&c!==c}var He=typeof Object.is=="function"?Object.is:Ge;function Ie(a,c){if(He(a,c))return!0;if(typeof a!="object"||a===null||typeof c!="object"||c===null)return!1;var b=Object.keys(a),_=Object.keys(c);if(b.length!==_.length)return!1;for(_=0;_<b.length;_++){var k=b[_];if(!ja.call(c,k)||!He(a[k],c[k]))return!1}return!0}function Je(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function Ke(a,c){var b=Je(a);a=0;for(var _;b;){if(b.nodeType===3){if(_=a+b.textContent.length,a<=c&&_>=c)return{node:b,offset:c-a};a=_}e:{for(;b;){if(b.nextSibling){b=b.nextSibling;break e}b=b.parentNode}b=void 0}b=Je(b)}}function Le(a,c){return a&&c?a===c?!0:a&&a.nodeType===3?!1:c&&c.nodeType===3?Le(a,c.parentNode):"contains"in a?a.contains(c):a.compareDocumentPosition?!!(a.compareDocumentPosition(c)&16):!1:!1}function Me(){for(var a=window,c=Xa();c instanceof a.HTMLIFrameElement;){try{var b=typeof c.contentWindow.location.href=="string"}catch{b=!1}if(b)a=c.contentWindow;else break;c=Xa(a.document)}return c}function Ne(a){var c=a&&a.nodeName&&a.nodeName.toLowerCase();return c&&(c==="input"&&(a.type==="text"||a.type==="search"||a.type==="tel"||a.type==="url"||a.type==="password")||c==="textarea"||a.contentEditable==="true")}function Oe(a){var c=Me(),b=a.focusedElem,_=a.selectionRange;if(c!==b&&b&&b.ownerDocument&&Le(b.ownerDocument.documentElement,b)){if(_!==null&&Ne(b)){if(c=_.start,a=_.end,a===void 0&&(a=c),"selectionStart"in b)b.selectionStart=c,b.selectionEnd=Math.min(a,b.value.length);else if(a=(c=b.ownerDocument||document)&&c.defaultView||window,a.getSelection){a=a.getSelection();var k=b.textContent.length,j=Math.min(_.start,k);_=_.end===void 0?j:Math.min(_.end,k),!a.extend&&j>_&&(k=_,_=j,j=k),k=Ke(b,j);var _e=Ke(b,_);k&&_e&&(a.rangeCount!==1||a.anchorNode!==k.node||a.anchorOffset!==k.offset||a.focusNode!==_e.node||a.focusOffset!==_e.offset)&&(c=c.createRange(),c.setStart(k.node,k.offset),a.removeAllRanges(),j>_?(a.addRange(c),a.extend(_e.node,_e.offset)):(c.setEnd(_e.node,_e.offset),a.addRange(c)))}}for(c=[],a=b;a=a.parentNode;)a.nodeType===1&&c.push({element:a,left:a.scrollLeft,top:a.scrollTop});for(typeof b.focus=="function"&&b.focus(),b=0;b<c.length;b++)a=c[b],a.element.scrollLeft=a.left,a.element.scrollTop=a.top}}var Pe=ia&&"documentMode"in document&&11>=document.documentMode,Qe=null,Re=null,Se=null,Te=!1;function Ue(a,c,b){var _=b.window===b?b.document:b.nodeType===9?b:b.ownerDocument;Te||Qe==null||Qe!==Xa(_)||(_=Qe,"selectionStart"in _&&Ne(_)?_={start:_.selectionStart,end:_.selectionEnd}:(_=(_.ownerDocument&&_.ownerDocument.defaultView||window).getSelection(),_={anchorNode:_.anchorNode,anchorOffset:_.anchorOffset,focusNode:_.focusNode,focusOffset:_.focusOffset}),Se&&Ie(Se,_)||(Se=_,_=oe(Re,"onSelect"),0<_.length&&(c=new td("onSelect","select",null,c,b),a.push({event:c,listeners:_}),c.target=Qe)))}function Ve(a,c){var b={};return b[a.toLowerCase()]=c.toLowerCase(),b["Webkit"+a]="webkit"+c,b["Moz"+a]="moz"+c,b}var We={animationend:Ve("Animation","AnimationEnd"),animationiteration:Ve("Animation","AnimationIteration"),animationstart:Ve("Animation","AnimationStart"),transitionend:Ve("Transition","TransitionEnd")},Xe={},Ye={};ia&&(Ye=document.createElement("div").style,"AnimationEvent"in window||(delete We.animationend.animation,delete We.animationiteration.animation,delete We.animationstart.animation),"TransitionEvent"in window||delete We.transitionend.transition);function Ze(a){if(Xe[a])return Xe[a];if(!We[a])return a;var c=We[a],b;for(b in c)if(c.hasOwnProperty(b)&&b in Ye)return Xe[a]=c[b];return a}var $e=Ze("animationend"),af=Ze("animationiteration"),bf=Ze("animationstart"),cf=Ze("transitionend"),df=new Map,ef="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ff(a,c){df.set(a,c),fa(c,[a])}for(var gf=0;gf<ef.length;gf++){var hf=ef[gf],jf=hf.toLowerCase(),kf=hf[0].toUpperCase()+hf.slice(1);ff(jf,"on"+kf)}ff($e,"onAnimationEnd");ff(af,"onAnimationIteration");ff(bf,"onAnimationStart");ff("dblclick","onDoubleClick");ff("focusin","onFocus");ff("focusout","onBlur");ff(cf,"onTransitionEnd");ha("onMouseEnter",["mouseout","mouseover"]);ha("onMouseLeave",["mouseout","mouseover"]);ha("onPointerEnter",["pointerout","pointerover"]);ha("onPointerLeave",["pointerout","pointerover"]);fa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));fa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));fa("onBeforeInput",["compositionend","keypress","textInput","paste"]);fa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));fa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));fa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var lf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mf=new Set("cancel close invalid load scroll toggle".split(" ").concat(lf));function nf(a,c,b){var _=a.type||"unknown-event";a.currentTarget=b,Ub(_,c,void 0,a),a.currentTarget=null}function se(a,c){c=(c&4)!==0;for(var b=0;b<a.length;b++){var _=a[b],k=_.event;_=_.listeners;e:{var j=void 0;if(c)for(var _e=_.length-1;0<=_e;_e--){var et=_[_e],nt=et.instance,it=et.currentTarget;if(et=et.listener,nt!==j&&k.isPropagationStopped())break e;nf(k,et,it),j=nt}else for(_e=0;_e<_.length;_e++){if(et=_[_e],nt=et.instance,it=et.currentTarget,et=et.listener,nt!==j&&k.isPropagationStopped())break e;nf(k,et,it),j=nt}}}if(Qb)throw a=Rb,Qb=!1,Rb=null,a}function D(a,c){var b=c[of$1];b===void 0&&(b=c[of$1]=new Set);var _=a+"__bubble";b.has(_)||(pf(c,a,2,!1),b.add(_))}function qf(a,c,b){var _=0;c&&(_|=4),pf(b,a,_,c)}var rf="_reactListening"+Math.random().toString(36).slice(2);function sf(a){if(!a[rf]){a[rf]=!0,da.forEach(function(b){b!=="selectionchange"&&(mf.has(b)||qf(b,!1,a),qf(b,!0,a))});var c=a.nodeType===9?a:a.ownerDocument;c===null||c[rf]||(c[rf]=!0,qf("selectionchange",!1,c))}}function pf(a,c,b,_){switch(jd(c)){case 1:var k=ed;break;case 4:k=gd;break;default:k=fd}b=k.bind(null,c,b,a),k=void 0,!Lb||c!=="touchstart"&&c!=="touchmove"&&c!=="wheel"||(k=!0),_?k!==void 0?a.addEventListener(c,b,{capture:!0,passive:k}):a.addEventListener(c,b,!0):k!==void 0?a.addEventListener(c,b,{passive:k}):a.addEventListener(c,b,!1)}function hd(a,c,b,_,k){var j=_;if(!(c&1)&&!(c&2)&&_!==null)e:for(;;){if(_===null)return;var _e=_.tag;if(_e===3||_e===4){var et=_.stateNode.containerInfo;if(et===k||et.nodeType===8&&et.parentNode===k)break;if(_e===4)for(_e=_.return;_e!==null;){var nt=_e.tag;if((nt===3||nt===4)&&(nt=_e.stateNode.containerInfo,nt===k||nt.nodeType===8&&nt.parentNode===k))return;_e=_e.return}for(;et!==null;){if(_e=Wc(et),_e===null)return;if(nt=_e.tag,nt===5||nt===6){_=j=_e;continue e}et=et.parentNode}}_=_.return}Jb(function(){var it=j,ft=xb(b),pt=[];e:{var mt=df.get(a);if(mt!==void 0){var St=td,yt=a;switch(a){case"keypress":if(od(b)===0)break e;case"keydown":case"keyup":St=Rd;break;case"focusin":yt="focus",St=Fd;break;case"focusout":yt="blur",St=Fd;break;case"beforeblur":case"afterblur":St=Fd;break;case"click":if(b.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":St=Bd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":St=Dd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":St=Vd;break;case $e:case af:case bf:St=Hd;break;case cf:St=Xd;break;case"scroll":St=vd;break;case"wheel":St=Zd;break;case"copy":case"cut":case"paste":St=Jd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":St=Td}var _t=(c&4)!==0,Tt=!_t&&a==="scroll",gt=_t?mt!==null?mt+"Capture":null:mt;_t=[];for(var ht=it,Et;ht!==null;){Et=ht;var At=Et.stateNode;if(Et.tag===5&&At!==null&&(Et=At,gt!==null&&(At=Kb(ht,gt),At!=null&&_t.push(tf(ht,At,Et)))),Tt)break;ht=ht.return}0<_t.length&&(mt=new St(mt,yt,null,b,ft),pt.push({event:mt,listeners:_t}))}}if(!(c&7)){e:{if(mt=a==="mouseover"||a==="pointerover",St=a==="mouseout"||a==="pointerout",mt&&b!==wb&&(yt=b.relatedTarget||b.fromElement)&&(Wc(yt)||yt[uf]))break e;if((St||mt)&&(mt=ft.window===ft?ft:(mt=ft.ownerDocument)?mt.defaultView||mt.parentWindow:window,St?(yt=b.relatedTarget||b.toElement,St=it,yt=yt?Wc(yt):null,yt!==null&&(Tt=Vb(yt),yt!==Tt||yt.tag!==5&&yt.tag!==6)&&(yt=null)):(St=null,yt=it),St!==yt)){if(_t=Bd,At="onMouseLeave",gt="onMouseEnter",ht="mouse",(a==="pointerout"||a==="pointerover")&&(_t=Td,At="onPointerLeave",gt="onPointerEnter",ht="pointer"),Tt=St==null?mt:ue(St),Et=yt==null?mt:ue(yt),mt=new _t(At,ht+"leave",St,b,ft),mt.target=Tt,mt.relatedTarget=Et,At=null,Wc(ft)===it&&(_t=new _t(gt,ht+"enter",yt,b,ft),_t.target=Et,_t.relatedTarget=Tt,At=_t),Tt=At,St&&yt)t:{for(_t=St,gt=yt,ht=0,Et=_t;Et;Et=vf(Et))ht++;for(Et=0,At=gt;At;At=vf(At))Et++;for(;0<ht-Et;)_t=vf(_t),ht--;for(;0<Et-ht;)gt=vf(gt),Et--;for(;ht--;){if(_t===gt||gt!==null&&_t===gt.alternate)break t;_t=vf(_t),gt=vf(gt)}_t=null}else _t=null;St!==null&&wf(pt,mt,St,_t,!1),yt!==null&&Tt!==null&&wf(pt,Tt,yt,_t,!0)}}e:{if(mt=it?ue(it):window,St=mt.nodeName&&mt.nodeName.toLowerCase(),St==="select"||St==="input"&&mt.type==="file")var Bt=ve;else if(me(mt))if(we)Bt=Fe;else{Bt=De;var qt=Ce}else(St=mt.nodeName)&&St.toLowerCase()==="input"&&(mt.type==="checkbox"||mt.type==="radio")&&(Bt=Ee);if(Bt&&(Bt=Bt(a,it))){ne(pt,Bt,b,ft);break e}qt&&qt(a,mt,it),a==="focusout"&&(qt=mt._wrapperState)&&qt.controlled&&mt.type==="number"&&cb(mt,"number",mt.value)}switch(qt=it?ue(it):window,a){case"focusin":(me(qt)||qt.contentEditable==="true")&&(Qe=qt,Re=it,Se=null);break;case"focusout":Se=Re=Qe=null;break;case"mousedown":Te=!0;break;case"contextmenu":case"mouseup":case"dragend":Te=!1,Ue(pt,b,ft);break;case"selectionchange":if(Pe)break;case"keydown":case"keyup":Ue(pt,b,ft)}var zt;if(ae)e:{switch(a){case"compositionstart":var Ht="onCompositionStart";break e;case"compositionend":Ht="onCompositionEnd";break e;case"compositionupdate":Ht="onCompositionUpdate";break e}Ht=void 0}else ie?ge(a,b)&&(Ht="onCompositionEnd"):a==="keydown"&&b.keyCode===229&&(Ht="onCompositionStart");Ht&&(de&&b.locale!=="ko"&&(ie||Ht!=="onCompositionStart"?Ht==="onCompositionEnd"&&ie&&(zt=nd()):(kd=ft,ld="value"in kd?kd.value:kd.textContent,ie=!0)),qt=oe(it,Ht),0<qt.length&&(Ht=new Ld(Ht,a,null,b,ft),pt.push({event:Ht,listeners:qt}),zt?Ht.data=zt:(zt=he(b),zt!==null&&(Ht.data=zt)))),(zt=ce?je(a,b):ke(a,b))&&(it=oe(it,"onBeforeInput"),0<it.length&&(ft=new Ld("onBeforeInput","beforeinput",null,b,ft),pt.push({event:ft,listeners:it}),ft.data=zt))}se(pt,c)})}function tf(a,c,b){return{instance:a,listener:c,currentTarget:b}}function oe(a,c){for(var b=c+"Capture",_=[];a!==null;){var k=a,j=k.stateNode;k.tag===5&&j!==null&&(k=j,j=Kb(a,b),j!=null&&_.unshift(tf(a,j,k)),j=Kb(a,c),j!=null&&_.push(tf(a,j,k))),a=a.return}return _}function vf(a){if(a===null)return null;do a=a.return;while(a&&a.tag!==5);return a||null}function wf(a,c,b,_,k){for(var j=c._reactName,_e=[];b!==null&&b!==_;){var et=b,nt=et.alternate,it=et.stateNode;if(nt!==null&&nt===_)break;et.tag===5&&it!==null&&(et=it,k?(nt=Kb(b,j),nt!=null&&_e.unshift(tf(b,nt,et))):k||(nt=Kb(b,j),nt!=null&&_e.push(tf(b,nt,et)))),b=b.return}_e.length!==0&&a.push({event:c,listeners:_e})}var xf=/\r\n?/g,yf=/\u0000|\uFFFD/g;function zf(a){return(typeof a=="string"?a:""+a).replace(xf,`
`).replace(yf,"")}function Af(a,c,b){if(c=zf(c),zf(a)!==c&&b)throw Error(p(425))}function Bf(){}var Cf=null,Df=null;function Ef(a,c){return a==="textarea"||a==="noscript"||typeof c.children=="string"||typeof c.children=="number"||typeof c.dangerouslySetInnerHTML=="object"&&c.dangerouslySetInnerHTML!==null&&c.dangerouslySetInnerHTML.__html!=null}var Ff=typeof setTimeout=="function"?setTimeout:void 0,Gf=typeof clearTimeout=="function"?clearTimeout:void 0,Hf=typeof Promise=="function"?Promise:void 0,Jf=typeof queueMicrotask=="function"?queueMicrotask:typeof Hf<"u"?function(a){return Hf.resolve(null).then(a).catch(If)}:Ff;function If(a){setTimeout(function(){throw a})}function Kf(a,c){var b=c,_=0;do{var k=b.nextSibling;if(a.removeChild(b),k&&k.nodeType===8)if(b=k.data,b==="/$"){if(_===0){a.removeChild(k),bd(c);return}_--}else b!=="$"&&b!=="$?"&&b!=="$!"||_++;b=k}while(b);bd(c)}function Lf(a){for(;a!=null;a=a.nextSibling){var c=a.nodeType;if(c===1||c===3)break;if(c===8){if(c=a.data,c==="$"||c==="$!"||c==="$?")break;if(c==="/$")return null}}return a}function Mf(a){a=a.previousSibling;for(var c=0;a;){if(a.nodeType===8){var b=a.data;if(b==="$"||b==="$!"||b==="$?"){if(c===0)return a;c--}else b==="/$"&&c++}a=a.previousSibling}return null}var Nf=Math.random().toString(36).slice(2),Of="__reactFiber$"+Nf,Pf="__reactProps$"+Nf,uf="__reactContainer$"+Nf,of$1="__reactEvents$"+Nf,Qf="__reactListeners$"+Nf,Rf="__reactHandles$"+Nf;function Wc(a){var c=a[Of];if(c)return c;for(var b=a.parentNode;b;){if(c=b[uf]||b[Of]){if(b=c.alternate,c.child!==null||b!==null&&b.child!==null)for(a=Mf(a);a!==null;){if(b=a[Of])return b;a=Mf(a)}return c}a=b,b=a.parentNode}return null}function Cb(a){return a=a[Of]||a[uf],!a||a.tag!==5&&a.tag!==6&&a.tag!==13&&a.tag!==3?null:a}function ue(a){if(a.tag===5||a.tag===6)return a.stateNode;throw Error(p(33))}function Db(a){return a[Pf]||null}var Sf=[],Tf=-1;function Uf(a){return{current:a}}function E(a){0>Tf||(a.current=Sf[Tf],Sf[Tf]=null,Tf--)}function G(a,c){Tf++,Sf[Tf]=a.current,a.current=c}var Vf={},H=Uf(Vf),Wf=Uf(!1),Xf=Vf;function Yf(a,c){var b=a.type.contextTypes;if(!b)return Vf;var _=a.stateNode;if(_&&_.__reactInternalMemoizedUnmaskedChildContext===c)return _.__reactInternalMemoizedMaskedChildContext;var k={},j;for(j in b)k[j]=c[j];return _&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=c,a.__reactInternalMemoizedMaskedChildContext=k),k}function Zf(a){return a=a.childContextTypes,a!=null}function $f(){E(Wf),E(H)}function ag(a,c,b){if(H.current!==Vf)throw Error(p(168));G(H,c),G(Wf,b)}function bg(a,c,b){var _=a.stateNode;if(c=c.childContextTypes,typeof _.getChildContext!="function")return b;_=_.getChildContext();for(var k in _)if(!(k in c))throw Error(p(108,Ra(a)||"Unknown",k));return A({},b,_)}function cg(a){return a=(a=a.stateNode)&&a.__reactInternalMemoizedMergedChildContext||Vf,Xf=H.current,G(H,a),G(Wf,Wf.current),!0}function dg(a,c,b){var _=a.stateNode;if(!_)throw Error(p(169));b?(a=bg(a,c,Xf),_.__reactInternalMemoizedMergedChildContext=a,E(Wf),E(H),G(H,a)):E(Wf),G(Wf,b)}var eg=null,fg=!1,gg=!1;function hg(a){eg===null?eg=[a]:eg.push(a)}function ig(a){fg=!0,hg(a)}function jg(){if(!gg&&eg!==null){gg=!0;var a=0,c=C;try{var b=eg;for(C=1;a<b.length;a++){var _=b[a];do _=_(!0);while(_!==null)}eg=null,fg=!1}catch(k){throw eg!==null&&(eg=eg.slice(a+1)),ac(fc,jg),k}finally{C=c,gg=!1}}return null}var kg=[],lg=0,mg=null,ng=0,og=[],pg=0,qg=null,rg=1,sg="";function tg(a,c){kg[lg++]=ng,kg[lg++]=mg,mg=a,ng=c}function ug(a,c,b){og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,qg=a;var _=rg;a=sg;var k=32-oc(_)-1;_&=~(1<<k),b+=1;var j=32-oc(c)+k;if(30<j){var _e=k-k%5;j=(_&(1<<_e)-1).toString(32),_>>=_e,k-=_e,rg=1<<32-oc(c)+k|b<<k|_,sg=j+a}else rg=1<<j|b<<k|_,sg=a}function vg(a){a.return!==null&&(tg(a,1),ug(a,1,0))}function wg(a){for(;a===mg;)mg=kg[--lg],kg[lg]=null,ng=kg[--lg],kg[lg]=null;for(;a===qg;)qg=og[--pg],og[pg]=null,sg=og[--pg],og[pg]=null,rg=og[--pg],og[pg]=null}var xg=null,yg=null,I=!1,zg=null;function Ag(a,c){var b=Bg(5,null,null,0);b.elementType="DELETED",b.stateNode=c,b.return=a,c=a.deletions,c===null?(a.deletions=[b],a.flags|=16):c.push(b)}function Cg(a,c){switch(a.tag){case 5:var b=a.type;return c=c.nodeType!==1||b.toLowerCase()!==c.nodeName.toLowerCase()?null:c,c!==null?(a.stateNode=c,xg=a,yg=Lf(c.firstChild),!0):!1;case 6:return c=a.pendingProps===""||c.nodeType!==3?null:c,c!==null?(a.stateNode=c,xg=a,yg=null,!0):!1;case 13:return c=c.nodeType!==8?null:c,c!==null?(b=qg!==null?{id:rg,overflow:sg}:null,a.memoizedState={dehydrated:c,treeContext:b,retryLane:1073741824},b=Bg(18,null,null,0),b.stateNode=c,b.return=a,a.child=b,xg=a,yg=null,!0):!1;default:return!1}}function Dg(a){return(a.mode&1)!==0&&(a.flags&128)===0}function Eg(a){if(I){var c=yg;if(c){var b=c;if(!Cg(a,c)){if(Dg(a))throw Error(p(418));c=Lf(b.nextSibling);var _=xg;c&&Cg(a,c)?Ag(_,b):(a.flags=a.flags&-4097|2,I=!1,xg=a)}}else{if(Dg(a))throw Error(p(418));a.flags=a.flags&-4097|2,I=!1,xg=a}}}function Fg(a){for(a=a.return;a!==null&&a.tag!==5&&a.tag!==3&&a.tag!==13;)a=a.return;xg=a}function Gg(a){if(a!==xg)return!1;if(!I)return Fg(a),I=!0,!1;var c;if((c=a.tag!==3)&&!(c=a.tag!==5)&&(c=a.type,c=c!=="head"&&c!=="body"&&!Ef(a.type,a.memoizedProps)),c&&(c=yg)){if(Dg(a))throw Hg(),Error(p(418));for(;c;)Ag(a,c),c=Lf(c.nextSibling)}if(Fg(a),a.tag===13){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(p(317));e:{for(a=a.nextSibling,c=0;a;){if(a.nodeType===8){var b=a.data;if(b==="/$"){if(c===0){yg=Lf(a.nextSibling);break e}c--}else b!=="$"&&b!=="$!"&&b!=="$?"||c++}a=a.nextSibling}yg=null}}else yg=xg?Lf(a.stateNode.nextSibling):null;return!0}function Hg(){for(var a=yg;a;)a=Lf(a.nextSibling)}function Ig(){yg=xg=null,I=!1}function Jg(a){zg===null?zg=[a]:zg.push(a)}var Kg=ua.ReactCurrentBatchConfig;function Lg(a,c){if(a&&a.defaultProps){c=A({},c),a=a.defaultProps;for(var b in a)c[b]===void 0&&(c[b]=a[b]);return c}return c}var Mg=Uf(null),Ng=null,Og=null,Pg=null;function Qg(){Pg=Og=Ng=null}function Rg(a){var c=Mg.current;E(Mg),a._currentValue=c}function Sg(a,c,b){for(;a!==null;){var _=a.alternate;if((a.childLanes&c)!==c?(a.childLanes|=c,_!==null&&(_.childLanes|=c)):_!==null&&(_.childLanes&c)!==c&&(_.childLanes|=c),a===b)break;a=a.return}}function Tg(a,c){Ng=a,Pg=Og=null,a=a.dependencies,a!==null&&a.firstContext!==null&&(a.lanes&c&&(Ug=!0),a.firstContext=null)}function Vg(a){var c=a._currentValue;if(Pg!==a)if(a={context:a,memoizedValue:c,next:null},Og===null){if(Ng===null)throw Error(p(308));Og=a,Ng.dependencies={lanes:0,firstContext:a}}else Og=Og.next=a;return c}var Wg=null;function Xg(a){Wg===null?Wg=[a]:Wg.push(a)}function Yg(a,c,b,_){var k=c.interleaved;return k===null?(b.next=b,Xg(c)):(b.next=k.next,k.next=b),c.interleaved=b,Zg(a,_)}function Zg(a,c){a.lanes|=c;var b=a.alternate;for(b!==null&&(b.lanes|=c),b=a,a=a.return;a!==null;)a.childLanes|=c,b=a.alternate,b!==null&&(b.childLanes|=c),b=a,a=a.return;return b.tag===3?b.stateNode:null}var $g=!1;function ah(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function bh(a,c){a=a.updateQueue,c.updateQueue===a&&(c.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,effects:a.effects})}function ch(a,c){return{eventTime:a,lane:c,tag:0,payload:null,callback:null,next:null}}function dh(a,c,b){var _=a.updateQueue;if(_===null)return null;if(_=_.shared,K&2){var k=_.pending;return k===null?c.next=c:(c.next=k.next,k.next=c),_.pending=c,Zg(a,b)}return k=_.interleaved,k===null?(c.next=c,Xg(_)):(c.next=k.next,k.next=c),_.interleaved=c,Zg(a,b)}function eh(a,c,b){if(c=c.updateQueue,c!==null&&(c=c.shared,(b&4194240)!==0)){var _=c.lanes;_&=a.pendingLanes,b|=_,c.lanes=b,Cc(a,b)}}function fh(a,c){var b=a.updateQueue,_=a.alternate;if(_!==null&&(_=_.updateQueue,b===_)){var k=null,j=null;if(b=b.firstBaseUpdate,b!==null){do{var _e={eventTime:b.eventTime,lane:b.lane,tag:b.tag,payload:b.payload,callback:b.callback,next:null};j===null?k=j=_e:j=j.next=_e,b=b.next}while(b!==null);j===null?k=j=c:j=j.next=c}else k=j=c;b={baseState:_.baseState,firstBaseUpdate:k,lastBaseUpdate:j,shared:_.shared,effects:_.effects},a.updateQueue=b;return}a=b.lastBaseUpdate,a===null?b.firstBaseUpdate=c:a.next=c,b.lastBaseUpdate=c}function gh(a,c,b,_){var k=a.updateQueue;$g=!1;var j=k.firstBaseUpdate,_e=k.lastBaseUpdate,et=k.shared.pending;if(et!==null){k.shared.pending=null;var nt=et,it=nt.next;nt.next=null,_e===null?j=it:_e.next=it,_e=nt;var ft=a.alternate;ft!==null&&(ft=ft.updateQueue,et=ft.lastBaseUpdate,et!==_e&&(et===null?ft.firstBaseUpdate=it:et.next=it,ft.lastBaseUpdate=nt))}if(j!==null){var pt=k.baseState;_e=0,ft=it=nt=null,et=j;do{var mt=et.lane,St=et.eventTime;if((_&mt)===mt){ft!==null&&(ft=ft.next={eventTime:St,lane:0,tag:et.tag,payload:et.payload,callback:et.callback,next:null});e:{var yt=a,_t=et;switch(mt=c,St=b,_t.tag){case 1:if(yt=_t.payload,typeof yt=="function"){pt=yt.call(St,pt,mt);break e}pt=yt;break e;case 3:yt.flags=yt.flags&-65537|128;case 0:if(yt=_t.payload,mt=typeof yt=="function"?yt.call(St,pt,mt):yt,mt==null)break e;pt=A({},pt,mt);break e;case 2:$g=!0}}et.callback!==null&&et.lane!==0&&(a.flags|=64,mt=k.effects,mt===null?k.effects=[et]:mt.push(et))}else St={eventTime:St,lane:mt,tag:et.tag,payload:et.payload,callback:et.callback,next:null},ft===null?(it=ft=St,nt=pt):ft=ft.next=St,_e|=mt;if(et=et.next,et===null){if(et=k.shared.pending,et===null)break;mt=et,et=mt.next,mt.next=null,k.lastBaseUpdate=mt,k.shared.pending=null}}while(!0);if(ft===null&&(nt=pt),k.baseState=nt,k.firstBaseUpdate=it,k.lastBaseUpdate=ft,c=k.shared.interleaved,c!==null){k=c;do _e|=k.lane,k=k.next;while(k!==c)}else j===null&&(k.shared.lanes=0);hh|=_e,a.lanes=_e,a.memoizedState=pt}}function ih(a,c,b){if(a=c.effects,c.effects=null,a!==null)for(c=0;c<a.length;c++){var _=a[c],k=_.callback;if(k!==null){if(_.callback=null,_=b,typeof k!="function")throw Error(p(191,k));k.call(_)}}}var jh=new aa.Component().refs;function kh(a,c,b,_){c=a.memoizedState,b=b(_,c),b=b==null?c:A({},c,b),a.memoizedState=b,a.lanes===0&&(a.updateQueue.baseState=b)}var nh={isMounted:function(a){return(a=a._reactInternals)?Vb(a)===a:!1},enqueueSetState:function(a,c,b){a=a._reactInternals;var _=L(),k=lh(a),j=ch(_,k);j.payload=c,b!=null&&(j.callback=b),c=dh(a,j,k),c!==null&&(mh(c,a,k,_),eh(c,a,k))},enqueueReplaceState:function(a,c,b){a=a._reactInternals;var _=L(),k=lh(a),j=ch(_,k);j.tag=1,j.payload=c,b!=null&&(j.callback=b),c=dh(a,j,k),c!==null&&(mh(c,a,k,_),eh(c,a,k))},enqueueForceUpdate:function(a,c){a=a._reactInternals;var b=L(),_=lh(a),k=ch(b,_);k.tag=2,c!=null&&(k.callback=c),c=dh(a,k,_),c!==null&&(mh(c,a,_,b),eh(c,a,_))}};function oh(a,c,b,_,k,j,_e){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(_,j,_e):c.prototype&&c.prototype.isPureReactComponent?!Ie(b,_)||!Ie(k,j):!0}function ph(a,c,b){var _=!1,k=Vf,j=c.contextType;return typeof j=="object"&&j!==null?j=Vg(j):(k=Zf(c)?Xf:H.current,_=c.contextTypes,j=(_=_!=null)?Yf(a,k):Vf),c=new c(b,j),a.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,c.updater=nh,a.stateNode=c,c._reactInternals=a,_&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=k,a.__reactInternalMemoizedMaskedChildContext=j),c}function qh(a,c,b,_){a=c.state,typeof c.componentWillReceiveProps=="function"&&c.componentWillReceiveProps(b,_),typeof c.UNSAFE_componentWillReceiveProps=="function"&&c.UNSAFE_componentWillReceiveProps(b,_),c.state!==a&&nh.enqueueReplaceState(c,c.state,null)}function rh(a,c,b,_){var k=a.stateNode;k.props=b,k.state=a.memoizedState,k.refs=jh,ah(a);var j=c.contextType;typeof j=="object"&&j!==null?k.context=Vg(j):(j=Zf(c)?Xf:H.current,k.context=Yf(a,j)),k.state=a.memoizedState,j=c.getDerivedStateFromProps,typeof j=="function"&&(kh(a,c,j,b),k.state=a.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof k.getSnapshotBeforeUpdate=="function"||typeof k.UNSAFE_componentWillMount!="function"&&typeof k.componentWillMount!="function"||(c=k.state,typeof k.componentWillMount=="function"&&k.componentWillMount(),typeof k.UNSAFE_componentWillMount=="function"&&k.UNSAFE_componentWillMount(),c!==k.state&&nh.enqueueReplaceState(k,k.state,null),gh(a,b,k,_),k.state=a.memoizedState),typeof k.componentDidMount=="function"&&(a.flags|=4194308)}function sh(a,c,b){if(a=b.ref,a!==null&&typeof a!="function"&&typeof a!="object"){if(b._owner){if(b=b._owner,b){if(b.tag!==1)throw Error(p(309));var _=b.stateNode}if(!_)throw Error(p(147,a));var k=_,j=""+a;return c!==null&&c.ref!==null&&typeof c.ref=="function"&&c.ref._stringRef===j?c.ref:(c=function(_e){var et=k.refs;et===jh&&(et=k.refs={}),_e===null?delete et[j]:et[j]=_e},c._stringRef=j,c)}if(typeof a!="string")throw Error(p(284));if(!b._owner)throw Error(p(290,a))}return a}function th(a,c){throw a=Object.prototype.toString.call(c),Error(p(31,a==="[object Object]"?"object with keys {"+Object.keys(c).join(", ")+"}":a))}function uh(a){var c=a._init;return c(a._payload)}function vh(a){function c(gt,ht){if(a){var Et=gt.deletions;Et===null?(gt.deletions=[ht],gt.flags|=16):Et.push(ht)}}function b(gt,ht){if(!a)return null;for(;ht!==null;)c(gt,ht),ht=ht.sibling;return null}function _(gt,ht){for(gt=new Map;ht!==null;)ht.key!==null?gt.set(ht.key,ht):gt.set(ht.index,ht),ht=ht.sibling;return gt}function k(gt,ht){return gt=wh(gt,ht),gt.index=0,gt.sibling=null,gt}function j(gt,ht,Et){return gt.index=Et,a?(Et=gt.alternate,Et!==null?(Et=Et.index,Et<ht?(gt.flags|=2,ht):Et):(gt.flags|=2,ht)):(gt.flags|=1048576,ht)}function _e(gt){return a&&gt.alternate===null&&(gt.flags|=2),gt}function et(gt,ht,Et,At){return ht===null||ht.tag!==6?(ht=xh(Et,gt.mode,At),ht.return=gt,ht):(ht=k(ht,Et),ht.return=gt,ht)}function nt(gt,ht,Et,At){var Bt=Et.type;return Bt===ya?ft(gt,ht,Et.props.children,At,Et.key):ht!==null&&(ht.elementType===Bt||typeof Bt=="object"&&Bt!==null&&Bt.$$typeof===Ha&&uh(Bt)===ht.type)?(At=k(ht,Et.props),At.ref=sh(gt,ht,Et),At.return=gt,At):(At=yh(Et.type,Et.key,Et.props,null,gt.mode,At),At.ref=sh(gt,ht,Et),At.return=gt,At)}function it(gt,ht,Et,At){return ht===null||ht.tag!==4||ht.stateNode.containerInfo!==Et.containerInfo||ht.stateNode.implementation!==Et.implementation?(ht=zh(Et,gt.mode,At),ht.return=gt,ht):(ht=k(ht,Et.children||[]),ht.return=gt,ht)}function ft(gt,ht,Et,At,Bt){return ht===null||ht.tag!==7?(ht=Ah(Et,gt.mode,At,Bt),ht.return=gt,ht):(ht=k(ht,Et),ht.return=gt,ht)}function pt(gt,ht,Et){if(typeof ht=="string"&&ht!==""||typeof ht=="number")return ht=xh(""+ht,gt.mode,Et),ht.return=gt,ht;if(typeof ht=="object"&&ht!==null){switch(ht.$$typeof){case va:return Et=yh(ht.type,ht.key,ht.props,null,gt.mode,Et),Et.ref=sh(gt,null,ht),Et.return=gt,Et;case wa:return ht=zh(ht,gt.mode,Et),ht.return=gt,ht;case Ha:var At=ht._init;return pt(gt,At(ht._payload),Et)}if(eb(ht)||Ka(ht))return ht=Ah(ht,gt.mode,Et,null),ht.return=gt,ht;th(gt,ht)}return null}function mt(gt,ht,Et,At){var Bt=ht!==null?ht.key:null;if(typeof Et=="string"&&Et!==""||typeof Et=="number")return Bt!==null?null:et(gt,ht,""+Et,At);if(typeof Et=="object"&&Et!==null){switch(Et.$$typeof){case va:return Et.key===Bt?nt(gt,ht,Et,At):null;case wa:return Et.key===Bt?it(gt,ht,Et,At):null;case Ha:return Bt=Et._init,mt(gt,ht,Bt(Et._payload),At)}if(eb(Et)||Ka(Et))return Bt!==null?null:ft(gt,ht,Et,At,null);th(gt,Et)}return null}function St(gt,ht,Et,At,Bt){if(typeof At=="string"&&At!==""||typeof At=="number")return gt=gt.get(Et)||null,et(ht,gt,""+At,Bt);if(typeof At=="object"&&At!==null){switch(At.$$typeof){case va:return gt=gt.get(At.key===null?Et:At.key)||null,nt(ht,gt,At,Bt);case wa:return gt=gt.get(At.key===null?Et:At.key)||null,it(ht,gt,At,Bt);case Ha:var qt=At._init;return St(gt,ht,Et,qt(At._payload),Bt)}if(eb(At)||Ka(At))return gt=gt.get(Et)||null,ft(ht,gt,At,Bt,null);th(ht,At)}return null}function yt(gt,ht,Et,At){for(var Bt=null,qt=null,zt=ht,Ht=ht=0,ct=null;zt!==null&&Ht<Et.length;Ht++){zt.index>Ht?(ct=zt,zt=null):ct=zt.sibling;var dt=mt(gt,zt,Et[Ht],At);if(dt===null){zt===null&&(zt=ct);break}a&&zt&&dt.alternate===null&&c(gt,zt),ht=j(dt,ht,Ht),qt===null?Bt=dt:qt.sibling=dt,qt=dt,zt=ct}if(Ht===Et.length)return b(gt,zt),I&&tg(gt,Ht),Bt;if(zt===null){for(;Ht<Et.length;Ht++)zt=pt(gt,Et[Ht],At),zt!==null&&(ht=j(zt,ht,Ht),qt===null?Bt=zt:qt.sibling=zt,qt=zt);return I&&tg(gt,Ht),Bt}for(zt=_(gt,zt);Ht<Et.length;Ht++)ct=St(zt,gt,Ht,Et[Ht],At),ct!==null&&(a&&ct.alternate!==null&&zt.delete(ct.key===null?Ht:ct.key),ht=j(ct,ht,Ht),qt===null?Bt=ct:qt.sibling=ct,qt=ct);return a&&zt.forEach(function(lt){return c(gt,lt)}),I&&tg(gt,Ht),Bt}function _t(gt,ht,Et,At){var Bt=Ka(Et);if(typeof Bt!="function")throw Error(p(150));if(Et=Bt.call(Et),Et==null)throw Error(p(151));for(var qt=Bt=null,zt=ht,Ht=ht=0,ct=null,dt=Et.next();zt!==null&&!dt.done;Ht++,dt=Et.next()){zt.index>Ht?(ct=zt,zt=null):ct=zt.sibling;var lt=mt(gt,zt,dt.value,At);if(lt===null){zt===null&&(zt=ct);break}a&&zt&&lt.alternate===null&&c(gt,zt),ht=j(lt,ht,Ht),qt===null?Bt=lt:qt.sibling=lt,qt=lt,zt=ct}if(dt.done)return b(gt,zt),I&&tg(gt,Ht),Bt;if(zt===null){for(;!dt.done;Ht++,dt=Et.next())dt=pt(gt,dt.value,At),dt!==null&&(ht=j(dt,ht,Ht),qt===null?Bt=dt:qt.sibling=dt,qt=dt);return I&&tg(gt,Ht),Bt}for(zt=_(gt,zt);!dt.done;Ht++,dt=Et.next())dt=St(zt,gt,Ht,dt.value,At),dt!==null&&(a&&dt.alternate!==null&&zt.delete(dt.key===null?Ht:dt.key),ht=j(dt,ht,Ht),qt===null?Bt=dt:qt.sibling=dt,qt=dt);return a&&zt.forEach(function(kt){return c(gt,kt)}),I&&tg(gt,Ht),Bt}function Tt(gt,ht,Et,At){if(typeof Et=="object"&&Et!==null&&Et.type===ya&&Et.key===null&&(Et=Et.props.children),typeof Et=="object"&&Et!==null){switch(Et.$$typeof){case va:e:{for(var Bt=Et.key,qt=ht;qt!==null;){if(qt.key===Bt){if(Bt=Et.type,Bt===ya){if(qt.tag===7){b(gt,qt.sibling),ht=k(qt,Et.props.children),ht.return=gt,gt=ht;break e}}else if(qt.elementType===Bt||typeof Bt=="object"&&Bt!==null&&Bt.$$typeof===Ha&&uh(Bt)===qt.type){b(gt,qt.sibling),ht=k(qt,Et.props),ht.ref=sh(gt,qt,Et),ht.return=gt,gt=ht;break e}b(gt,qt);break}else c(gt,qt);qt=qt.sibling}Et.type===ya?(ht=Ah(Et.props.children,gt.mode,At,Et.key),ht.return=gt,gt=ht):(At=yh(Et.type,Et.key,Et.props,null,gt.mode,At),At.ref=sh(gt,ht,Et),At.return=gt,gt=At)}return _e(gt);case wa:e:{for(qt=Et.key;ht!==null;){if(ht.key===qt)if(ht.tag===4&&ht.stateNode.containerInfo===Et.containerInfo&&ht.stateNode.implementation===Et.implementation){b(gt,ht.sibling),ht=k(ht,Et.children||[]),ht.return=gt,gt=ht;break e}else{b(gt,ht);break}else c(gt,ht);ht=ht.sibling}ht=zh(Et,gt.mode,At),ht.return=gt,gt=ht}return _e(gt);case Ha:return qt=Et._init,Tt(gt,ht,qt(Et._payload),At)}if(eb(Et))return yt(gt,ht,Et,At);if(Ka(Et))return _t(gt,ht,Et,At);th(gt,Et)}return typeof Et=="string"&&Et!==""||typeof Et=="number"?(Et=""+Et,ht!==null&&ht.tag===6?(b(gt,ht.sibling),ht=k(ht,Et),ht.return=gt,gt=ht):(b(gt,ht),ht=xh(Et,gt.mode,At),ht.return=gt,gt=ht),_e(gt)):b(gt,ht)}return Tt}var Bh=vh(!0),Ch=vh(!1),Dh={},Eh=Uf(Dh),Fh=Uf(Dh),Gh=Uf(Dh);function Hh(a){if(a===Dh)throw Error(p(174));return a}function Ih(a,c){switch(G(Gh,c),G(Fh,a),G(Eh,Dh),a=c.nodeType,a){case 9:case 11:c=(c=c.documentElement)?c.namespaceURI:lb(null,"");break;default:a=a===8?c.parentNode:c,c=a.namespaceURI||null,a=a.tagName,c=lb(c,a)}E(Eh),G(Eh,c)}function Jh(){E(Eh),E(Fh),E(Gh)}function Kh(a){Hh(Gh.current);var c=Hh(Eh.current),b=lb(c,a.type);c!==b&&(G(Fh,a),G(Eh,b))}function Lh(a){Fh.current===a&&(E(Eh),E(Fh))}var M=Uf(0);function Mh(a){for(var c=a;c!==null;){if(c.tag===13){var b=c.memoizedState;if(b!==null&&(b=b.dehydrated,b===null||b.data==="$?"||b.data==="$!"))return c}else if(c.tag===19&&c.memoizedProps.revealOrder!==void 0){if(c.flags&128)return c}else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===a)break;for(;c.sibling===null;){if(c.return===null||c.return===a)return null;c=c.return}c.sibling.return=c.return,c=c.sibling}return null}var Nh=[];function Oh(){for(var a=0;a<Nh.length;a++)Nh[a]._workInProgressVersionPrimary=null;Nh.length=0}var Ph=ua.ReactCurrentDispatcher,Qh=ua.ReactCurrentBatchConfig,Rh=0,N=null,O=null,P=null,Sh=!1,Th=!1,Uh=0,Vh=0;function Q(){throw Error(p(321))}function Wh(a,c){if(c===null)return!1;for(var b=0;b<c.length&&b<a.length;b++)if(!He(a[b],c[b]))return!1;return!0}function Xh(a,c,b,_,k,j){if(Rh=j,N=c,c.memoizedState=null,c.updateQueue=null,c.lanes=0,Ph.current=a===null||a.memoizedState===null?Yh:Zh,a=b(_,k),Th){j=0;do{if(Th=!1,Uh=0,25<=j)throw Error(p(301));j+=1,P=O=null,c.updateQueue=null,Ph.current=$h,a=b(_,k)}while(Th)}if(Ph.current=ai,c=O!==null&&O.next!==null,Rh=0,P=O=N=null,Sh=!1,c)throw Error(p(300));return a}function bi(){var a=Uh!==0;return Uh=0,a}function ci(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return P===null?N.memoizedState=P=a:P=P.next=a,P}function di(){if(O===null){var a=N.alternate;a=a!==null?a.memoizedState:null}else a=O.next;var c=P===null?N.memoizedState:P.next;if(c!==null)P=c,O=a;else{if(a===null)throw Error(p(310));O=a,a={memoizedState:O.memoizedState,baseState:O.baseState,baseQueue:O.baseQueue,queue:O.queue,next:null},P===null?N.memoizedState=P=a:P=P.next=a}return P}function ei(a,c){return typeof c=="function"?c(a):c}function fi(a){var c=di(),b=c.queue;if(b===null)throw Error(p(311));b.lastRenderedReducer=a;var _=O,k=_.baseQueue,j=b.pending;if(j!==null){if(k!==null){var _e=k.next;k.next=j.next,j.next=_e}_.baseQueue=k=j,b.pending=null}if(k!==null){j=k.next,_=_.baseState;var et=_e=null,nt=null,it=j;do{var ft=it.lane;if((Rh&ft)===ft)nt!==null&&(nt=nt.next={lane:0,action:it.action,hasEagerState:it.hasEagerState,eagerState:it.eagerState,next:null}),_=it.hasEagerState?it.eagerState:a(_,it.action);else{var pt={lane:ft,action:it.action,hasEagerState:it.hasEagerState,eagerState:it.eagerState,next:null};nt===null?(et=nt=pt,_e=_):nt=nt.next=pt,N.lanes|=ft,hh|=ft}it=it.next}while(it!==null&&it!==j);nt===null?_e=_:nt.next=et,He(_,c.memoizedState)||(Ug=!0),c.memoizedState=_,c.baseState=_e,c.baseQueue=nt,b.lastRenderedState=_}if(a=b.interleaved,a!==null){k=a;do j=k.lane,N.lanes|=j,hh|=j,k=k.next;while(k!==a)}else k===null&&(b.lanes=0);return[c.memoizedState,b.dispatch]}function gi(a){var c=di(),b=c.queue;if(b===null)throw Error(p(311));b.lastRenderedReducer=a;var _=b.dispatch,k=b.pending,j=c.memoizedState;if(k!==null){b.pending=null;var _e=k=k.next;do j=a(j,_e.action),_e=_e.next;while(_e!==k);He(j,c.memoizedState)||(Ug=!0),c.memoizedState=j,c.baseQueue===null&&(c.baseState=j),b.lastRenderedState=j}return[j,_]}function hi(){}function ii(a,c){var b=N,_=di(),k=c(),j=!He(_.memoizedState,k);if(j&&(_.memoizedState=k,Ug=!0),_=_.queue,ji(ki.bind(null,b,_,a),[a]),_.getSnapshot!==c||j||P!==null&&P.memoizedState.tag&1){if(b.flags|=2048,li(9,mi.bind(null,b,_,k,c),void 0,null),R===null)throw Error(p(349));Rh&30||ni(b,c,k)}return k}function ni(a,c,b){a.flags|=16384,a={getSnapshot:c,value:b},c=N.updateQueue,c===null?(c={lastEffect:null,stores:null},N.updateQueue=c,c.stores=[a]):(b=c.stores,b===null?c.stores=[a]:b.push(a))}function mi(a,c,b,_){c.value=b,c.getSnapshot=_,oi(c)&&pi(a)}function ki(a,c,b){return b(function(){oi(c)&&pi(a)})}function oi(a){var c=a.getSnapshot;a=a.value;try{var b=c();return!He(a,b)}catch{return!0}}function pi(a){var c=Zg(a,1);c!==null&&mh(c,a,1,-1)}function qi(a){var c=ci();return typeof a=="function"&&(a=a()),c.memoizedState=c.baseState=a,a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ei,lastRenderedState:a},c.queue=a,a=a.dispatch=ri.bind(null,N,a),[c.memoizedState,a]}function li(a,c,b,_){return a={tag:a,create:c,destroy:b,deps:_,next:null},c=N.updateQueue,c===null?(c={lastEffect:null,stores:null},N.updateQueue=c,c.lastEffect=a.next=a):(b=c.lastEffect,b===null?c.lastEffect=a.next=a:(_=b.next,b.next=a,a.next=_,c.lastEffect=a)),a}function si(){return di().memoizedState}function ti(a,c,b,_){var k=ci();N.flags|=a,k.memoizedState=li(1|c,b,void 0,_===void 0?null:_)}function ui(a,c,b,_){var k=di();_=_===void 0?null:_;var j=void 0;if(O!==null){var _e=O.memoizedState;if(j=_e.destroy,_!==null&&Wh(_,_e.deps)){k.memoizedState=li(c,b,j,_);return}}N.flags|=a,k.memoizedState=li(1|c,b,j,_)}function vi(a,c){return ti(8390656,8,a,c)}function ji(a,c){return ui(2048,8,a,c)}function wi(a,c){return ui(4,2,a,c)}function xi(a,c){return ui(4,4,a,c)}function yi(a,c){if(typeof c=="function")return a=a(),c(a),function(){c(null)};if(c!=null)return a=a(),c.current=a,function(){c.current=null}}function zi(a,c,b){return b=b!=null?b.concat([a]):null,ui(4,4,yi.bind(null,c,a),b)}function Ai(){}function Bi(a,c){var b=di();c=c===void 0?null:c;var _=b.memoizedState;return _!==null&&c!==null&&Wh(c,_[1])?_[0]:(b.memoizedState=[a,c],a)}function Ci(a,c){var b=di();c=c===void 0?null:c;var _=b.memoizedState;return _!==null&&c!==null&&Wh(c,_[1])?_[0]:(a=a(),b.memoizedState=[a,c],a)}function Di(a,c,b){return Rh&21?(He(b,c)||(b=yc(),N.lanes|=b,hh|=b,a.baseState=!0),c):(a.baseState&&(a.baseState=!1,Ug=!0),a.memoizedState=b)}function Ei(a,c){var b=C;C=b!==0&&4>b?b:4,a(!0);var _=Qh.transition;Qh.transition={};try{a(!1),c()}finally{C=b,Qh.transition=_}}function Fi(){return di().memoizedState}function Gi(a,c,b){var _=lh(a);if(b={lane:_,action:b,hasEagerState:!1,eagerState:null,next:null},Hi(a))Ii(c,b);else if(b=Yg(a,c,b,_),b!==null){var k=L();mh(b,a,_,k),Ji(b,c,_)}}function ri(a,c,b){var _=lh(a),k={lane:_,action:b,hasEagerState:!1,eagerState:null,next:null};if(Hi(a))Ii(c,k);else{var j=a.alternate;if(a.lanes===0&&(j===null||j.lanes===0)&&(j=c.lastRenderedReducer,j!==null))try{var _e=c.lastRenderedState,et=j(_e,b);if(k.hasEagerState=!0,k.eagerState=et,He(et,_e)){var nt=c.interleaved;nt===null?(k.next=k,Xg(c)):(k.next=nt.next,nt.next=k),c.interleaved=k;return}}catch{}finally{}b=Yg(a,c,k,_),b!==null&&(k=L(),mh(b,a,_,k),Ji(b,c,_))}}function Hi(a){var c=a.alternate;return a===N||c!==null&&c===N}function Ii(a,c){Th=Sh=!0;var b=a.pending;b===null?c.next=c:(c.next=b.next,b.next=c),a.pending=c}function Ji(a,c,b){if(b&4194240){var _=c.lanes;_&=a.pendingLanes,b|=_,c.lanes=b,Cc(a,b)}}var ai={readContext:Vg,useCallback:Q,useContext:Q,useEffect:Q,useImperativeHandle:Q,useInsertionEffect:Q,useLayoutEffect:Q,useMemo:Q,useReducer:Q,useRef:Q,useState:Q,useDebugValue:Q,useDeferredValue:Q,useTransition:Q,useMutableSource:Q,useSyncExternalStore:Q,useId:Q,unstable_isNewReconciler:!1},Yh={readContext:Vg,useCallback:function(a,c){return ci().memoizedState=[a,c===void 0?null:c],a},useContext:Vg,useEffect:vi,useImperativeHandle:function(a,c,b){return b=b!=null?b.concat([a]):null,ti(4194308,4,yi.bind(null,c,a),b)},useLayoutEffect:function(a,c){return ti(4194308,4,a,c)},useInsertionEffect:function(a,c){return ti(4,2,a,c)},useMemo:function(a,c){var b=ci();return c=c===void 0?null:c,a=a(),b.memoizedState=[a,c],a},useReducer:function(a,c,b){var _=ci();return c=b!==void 0?b(c):c,_.memoizedState=_.baseState=c,a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:c},_.queue=a,a=a.dispatch=Gi.bind(null,N,a),[_.memoizedState,a]},useRef:function(a){var c=ci();return a={current:a},c.memoizedState=a},useState:qi,useDebugValue:Ai,useDeferredValue:function(a){return ci().memoizedState=a},useTransition:function(){var a=qi(!1),c=a[0];return a=Ei.bind(null,a[1]),ci().memoizedState=a,[c,a]},useMutableSource:function(){},useSyncExternalStore:function(a,c,b){var _=N,k=ci();if(I){if(b===void 0)throw Error(p(407));b=b()}else{if(b=c(),R===null)throw Error(p(349));Rh&30||ni(_,c,b)}k.memoizedState=b;var j={value:b,getSnapshot:c};return k.queue=j,vi(ki.bind(null,_,j,a),[a]),_.flags|=2048,li(9,mi.bind(null,_,j,b,c),void 0,null),b},useId:function(){var a=ci(),c=R.identifierPrefix;if(I){var b=sg,_=rg;b=(_&~(1<<32-oc(_)-1)).toString(32)+b,c=":"+c+"R"+b,b=Uh++,0<b&&(c+="H"+b.toString(32)),c+=":"}else b=Vh++,c=":"+c+"r"+b.toString(32)+":";return a.memoizedState=c},unstable_isNewReconciler:!1},Zh={readContext:Vg,useCallback:Bi,useContext:Vg,useEffect:ji,useImperativeHandle:zi,useInsertionEffect:wi,useLayoutEffect:xi,useMemo:Ci,useReducer:fi,useRef:si,useState:function(){return fi(ei)},useDebugValue:Ai,useDeferredValue:function(a){var c=di();return Di(c,O.memoizedState,a)},useTransition:function(){var a=fi(ei)[0],c=di().memoizedState;return[a,c]},useMutableSource:hi,useSyncExternalStore:ii,useId:Fi,unstable_isNewReconciler:!1},$h={readContext:Vg,useCallback:Bi,useContext:Vg,useEffect:ji,useImperativeHandle:zi,useInsertionEffect:wi,useLayoutEffect:xi,useMemo:Ci,useReducer:gi,useRef:si,useState:function(){return gi(ei)},useDebugValue:Ai,useDeferredValue:function(a){var c=di();return O===null?c.memoizedState=a:Di(c,O.memoizedState,a)},useTransition:function(){var a=gi(ei)[0],c=di().memoizedState;return[a,c]},useMutableSource:hi,useSyncExternalStore:ii,useId:Fi,unstable_isNewReconciler:!1};function Ki(a,c){try{var b="",_=c;do b+=Pa(_),_=_.return;while(_);var k=b}catch(j){k=`
Error generating stack: `+j.message+`
`+j.stack}return{value:a,source:c,stack:k,digest:null}}function Li(a,c,b){return{value:a,source:null,stack:b??null,digest:c??null}}function Mi(a,c){try{console.error(c.value)}catch(b){setTimeout(function(){throw b})}}var Ni=typeof WeakMap=="function"?WeakMap:Map;function Oi(a,c,b){b=ch(-1,b),b.tag=3,b.payload={element:null};var _=c.value;return b.callback=function(){Pi||(Pi=!0,Qi=_),Mi(a,c)},b}function Ri(a,c,b){b=ch(-1,b),b.tag=3;var _=a.type.getDerivedStateFromError;if(typeof _=="function"){var k=c.value;b.payload=function(){return _(k)},b.callback=function(){Mi(a,c)}}var j=a.stateNode;return j!==null&&typeof j.componentDidCatch=="function"&&(b.callback=function(){Mi(a,c),typeof _!="function"&&(Si===null?Si=new Set([this]):Si.add(this));var _e=c.stack;this.componentDidCatch(c.value,{componentStack:_e!==null?_e:""})}),b}function Ti(a,c,b){var _=a.pingCache;if(_===null){_=a.pingCache=new Ni;var k=new Set;_.set(c,k)}else k=_.get(c),k===void 0&&(k=new Set,_.set(c,k));k.has(b)||(k.add(b),a=Ui.bind(null,a,c,b),c.then(a,a))}function Vi(a){do{var c;if((c=a.tag===13)&&(c=a.memoizedState,c=c!==null?c.dehydrated!==null:!0),c)return a;a=a.return}while(a!==null);return null}function Wi(a,c,b,_,k){return a.mode&1?(a.flags|=65536,a.lanes=k,a):(a===c?a.flags|=65536:(a.flags|=128,b.flags|=131072,b.flags&=-52805,b.tag===1&&(b.alternate===null?b.tag=17:(c=ch(-1,1),c.tag=2,dh(b,c,1))),b.lanes|=1),a)}var Xi=ua.ReactCurrentOwner,Ug=!1;function Yi(a,c,b,_){c.child=a===null?Ch(c,null,b,_):Bh(c,a.child,b,_)}function Zi(a,c,b,_,k){b=b.render;var j=c.ref;return Tg(c,k),_=Xh(a,c,b,_,j,k),b=bi(),a!==null&&!Ug?(c.updateQueue=a.updateQueue,c.flags&=-2053,a.lanes&=~k,$i(a,c,k)):(I&&b&&vg(c),c.flags|=1,Yi(a,c,_,k),c.child)}function aj(a,c,b,_,k){if(a===null){var j=b.type;return typeof j=="function"&&!bj(j)&&j.defaultProps===void 0&&b.compare===null&&b.defaultProps===void 0?(c.tag=15,c.type=j,cj(a,c,j,_,k)):(a=yh(b.type,null,_,c,c.mode,k),a.ref=c.ref,a.return=c,c.child=a)}if(j=a.child,!(a.lanes&k)){var _e=j.memoizedProps;if(b=b.compare,b=b!==null?b:Ie,b(_e,_)&&a.ref===c.ref)return $i(a,c,k)}return c.flags|=1,a=wh(j,_),a.ref=c.ref,a.return=c,c.child=a}function cj(a,c,b,_,k){if(a!==null){var j=a.memoizedProps;if(Ie(j,_)&&a.ref===c.ref)if(Ug=!1,c.pendingProps=_=j,(a.lanes&k)!==0)a.flags&131072&&(Ug=!0);else return c.lanes=a.lanes,$i(a,c,k)}return dj(a,c,b,_,k)}function ej(a,c,b){var _=c.pendingProps,k=_.children,j=a!==null?a.memoizedState:null;if(_.mode==="hidden")if(!(c.mode&1))c.memoizedState={baseLanes:0,cachePool:null,transitions:null},G(fj,gj),gj|=b;else{if(!(b&1073741824))return a=j!==null?j.baseLanes|b:b,c.lanes=c.childLanes=1073741824,c.memoizedState={baseLanes:a,cachePool:null,transitions:null},c.updateQueue=null,G(fj,gj),gj|=a,null;c.memoizedState={baseLanes:0,cachePool:null,transitions:null},_=j!==null?j.baseLanes:b,G(fj,gj),gj|=_}else j!==null?(_=j.baseLanes|b,c.memoizedState=null):_=b,G(fj,gj),gj|=_;return Yi(a,c,k,b),c.child}function hj(a,c){var b=c.ref;(a===null&&b!==null||a!==null&&a.ref!==b)&&(c.flags|=512,c.flags|=2097152)}function dj(a,c,b,_,k){var j=Zf(b)?Xf:H.current;return j=Yf(c,j),Tg(c,k),b=Xh(a,c,b,_,j,k),_=bi(),a!==null&&!Ug?(c.updateQueue=a.updateQueue,c.flags&=-2053,a.lanes&=~k,$i(a,c,k)):(I&&_&&vg(c),c.flags|=1,Yi(a,c,b,k),c.child)}function ij(a,c,b,_,k){if(Zf(b)){var j=!0;cg(c)}else j=!1;if(Tg(c,k),c.stateNode===null)jj(a,c),ph(c,b,_),rh(c,b,_,k),_=!0;else if(a===null){var _e=c.stateNode,et=c.memoizedProps;_e.props=et;var nt=_e.context,it=b.contextType;typeof it=="object"&&it!==null?it=Vg(it):(it=Zf(b)?Xf:H.current,it=Yf(c,it));var ft=b.getDerivedStateFromProps,pt=typeof ft=="function"||typeof _e.getSnapshotBeforeUpdate=="function";pt||typeof _e.UNSAFE_componentWillReceiveProps!="function"&&typeof _e.componentWillReceiveProps!="function"||(et!==_||nt!==it)&&qh(c,_e,_,it),$g=!1;var mt=c.memoizedState;_e.state=mt,gh(c,_,_e,k),nt=c.memoizedState,et!==_||mt!==nt||Wf.current||$g?(typeof ft=="function"&&(kh(c,b,ft,_),nt=c.memoizedState),(et=$g||oh(c,b,et,_,mt,nt,it))?(pt||typeof _e.UNSAFE_componentWillMount!="function"&&typeof _e.componentWillMount!="function"||(typeof _e.componentWillMount=="function"&&_e.componentWillMount(),typeof _e.UNSAFE_componentWillMount=="function"&&_e.UNSAFE_componentWillMount()),typeof _e.componentDidMount=="function"&&(c.flags|=4194308)):(typeof _e.componentDidMount=="function"&&(c.flags|=4194308),c.memoizedProps=_,c.memoizedState=nt),_e.props=_,_e.state=nt,_e.context=it,_=et):(typeof _e.componentDidMount=="function"&&(c.flags|=4194308),_=!1)}else{_e=c.stateNode,bh(a,c),et=c.memoizedProps,it=c.type===c.elementType?et:Lg(c.type,et),_e.props=it,pt=c.pendingProps,mt=_e.context,nt=b.contextType,typeof nt=="object"&&nt!==null?nt=Vg(nt):(nt=Zf(b)?Xf:H.current,nt=Yf(c,nt));var St=b.getDerivedStateFromProps;(ft=typeof St=="function"||typeof _e.getSnapshotBeforeUpdate=="function")||typeof _e.UNSAFE_componentWillReceiveProps!="function"&&typeof _e.componentWillReceiveProps!="function"||(et!==pt||mt!==nt)&&qh(c,_e,_,nt),$g=!1,mt=c.memoizedState,_e.state=mt,gh(c,_,_e,k);var yt=c.memoizedState;et!==pt||mt!==yt||Wf.current||$g?(typeof St=="function"&&(kh(c,b,St,_),yt=c.memoizedState),(it=$g||oh(c,b,it,_,mt,yt,nt)||!1)?(ft||typeof _e.UNSAFE_componentWillUpdate!="function"&&typeof _e.componentWillUpdate!="function"||(typeof _e.componentWillUpdate=="function"&&_e.componentWillUpdate(_,yt,nt),typeof _e.UNSAFE_componentWillUpdate=="function"&&_e.UNSAFE_componentWillUpdate(_,yt,nt)),typeof _e.componentDidUpdate=="function"&&(c.flags|=4),typeof _e.getSnapshotBeforeUpdate=="function"&&(c.flags|=1024)):(typeof _e.componentDidUpdate!="function"||et===a.memoizedProps&&mt===a.memoizedState||(c.flags|=4),typeof _e.getSnapshotBeforeUpdate!="function"||et===a.memoizedProps&&mt===a.memoizedState||(c.flags|=1024),c.memoizedProps=_,c.memoizedState=yt),_e.props=_,_e.state=yt,_e.context=nt,_=it):(typeof _e.componentDidUpdate!="function"||et===a.memoizedProps&&mt===a.memoizedState||(c.flags|=4),typeof _e.getSnapshotBeforeUpdate!="function"||et===a.memoizedProps&&mt===a.memoizedState||(c.flags|=1024),_=!1)}return kj(a,c,b,_,j,k)}function kj(a,c,b,_,k,j){hj(a,c);var _e=(c.flags&128)!==0;if(!_&&!_e)return k&&dg(c,b,!1),$i(a,c,j);_=c.stateNode,Xi.current=c;var et=_e&&typeof b.getDerivedStateFromError!="function"?null:_.render();return c.flags|=1,a!==null&&_e?(c.child=Bh(c,a.child,null,j),c.child=Bh(c,null,et,j)):Yi(a,c,et,j),c.memoizedState=_.state,k&&dg(c,b,!0),c.child}function lj(a){var c=a.stateNode;c.pendingContext?ag(a,c.pendingContext,c.pendingContext!==c.context):c.context&&ag(a,c.context,!1),Ih(a,c.containerInfo)}function mj(a,c,b,_,k){return Ig(),Jg(k),c.flags|=256,Yi(a,c,b,_),c.child}var nj={dehydrated:null,treeContext:null,retryLane:0};function oj(a){return{baseLanes:a,cachePool:null,transitions:null}}function pj(a,c,b){var _=c.pendingProps,k=M.current,j=!1,_e=(c.flags&128)!==0,et;if((et=_e)||(et=a!==null&&a.memoizedState===null?!1:(k&2)!==0),et?(j=!0,c.flags&=-129):(a===null||a.memoizedState!==null)&&(k|=1),G(M,k&1),a===null)return Eg(c),a=c.memoizedState,a!==null&&(a=a.dehydrated,a!==null)?(c.mode&1?a.data==="$!"?c.lanes=8:c.lanes=1073741824:c.lanes=1,null):(_e=_.children,a=_.fallback,j?(_=c.mode,j=c.child,_e={mode:"hidden",children:_e},!(_&1)&&j!==null?(j.childLanes=0,j.pendingProps=_e):j=qj(_e,_,0,null),a=Ah(a,_,b,null),j.return=c,a.return=c,j.sibling=a,c.child=j,c.child.memoizedState=oj(b),c.memoizedState=nj,a):rj(c,_e));if(k=a.memoizedState,k!==null&&(et=k.dehydrated,et!==null))return sj(a,c,_e,_,et,k,b);if(j){j=_.fallback,_e=c.mode,k=a.child,et=k.sibling;var nt={mode:"hidden",children:_.children};return!(_e&1)&&c.child!==k?(_=c.child,_.childLanes=0,_.pendingProps=nt,c.deletions=null):(_=wh(k,nt),_.subtreeFlags=k.subtreeFlags&14680064),et!==null?j=wh(et,j):(j=Ah(j,_e,b,null),j.flags|=2),j.return=c,_.return=c,_.sibling=j,c.child=_,_=j,j=c.child,_e=a.child.memoizedState,_e=_e===null?oj(b):{baseLanes:_e.baseLanes|b,cachePool:null,transitions:_e.transitions},j.memoizedState=_e,j.childLanes=a.childLanes&~b,c.memoizedState=nj,_}return j=a.child,a=j.sibling,_=wh(j,{mode:"visible",children:_.children}),!(c.mode&1)&&(_.lanes=b),_.return=c,_.sibling=null,a!==null&&(b=c.deletions,b===null?(c.deletions=[a],c.flags|=16):b.push(a)),c.child=_,c.memoizedState=null,_}function rj(a,c){return c=qj({mode:"visible",children:c},a.mode,0,null),c.return=a,a.child=c}function tj(a,c,b,_){return _!==null&&Jg(_),Bh(c,a.child,null,b),a=rj(c,c.pendingProps.children),a.flags|=2,c.memoizedState=null,a}function sj(a,c,b,_,k,j,_e){if(b)return c.flags&256?(c.flags&=-257,_=Li(Error(p(422))),tj(a,c,_e,_)):c.memoizedState!==null?(c.child=a.child,c.flags|=128,null):(j=_.fallback,k=c.mode,_=qj({mode:"visible",children:_.children},k,0,null),j=Ah(j,k,_e,null),j.flags|=2,_.return=c,j.return=c,_.sibling=j,c.child=_,c.mode&1&&Bh(c,a.child,null,_e),c.child.memoizedState=oj(_e),c.memoizedState=nj,j);if(!(c.mode&1))return tj(a,c,_e,null);if(k.data==="$!"){if(_=k.nextSibling&&k.nextSibling.dataset,_)var et=_.dgst;return _=et,j=Error(p(419)),_=Li(j,_,void 0),tj(a,c,_e,_)}if(et=(_e&a.childLanes)!==0,Ug||et){if(_=R,_!==null){switch(_e&-_e){case 4:k=2;break;case 16:k=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:k=32;break;case 536870912:k=268435456;break;default:k=0}k=k&(_.suspendedLanes|_e)?0:k,k!==0&&k!==j.retryLane&&(j.retryLane=k,Zg(a,k),mh(_,a,k,-1))}return uj(),_=Li(Error(p(421))),tj(a,c,_e,_)}return k.data==="$?"?(c.flags|=128,c.child=a.child,c=vj.bind(null,a),k._reactRetry=c,null):(a=j.treeContext,yg=Lf(k.nextSibling),xg=c,I=!0,zg=null,a!==null&&(og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,rg=a.id,sg=a.overflow,qg=c),c=rj(c,_.children),c.flags|=4096,c)}function wj(a,c,b){a.lanes|=c;var _=a.alternate;_!==null&&(_.lanes|=c),Sg(a.return,c,b)}function xj(a,c,b,_,k){var j=a.memoizedState;j===null?a.memoizedState={isBackwards:c,rendering:null,renderingStartTime:0,last:_,tail:b,tailMode:k}:(j.isBackwards=c,j.rendering=null,j.renderingStartTime=0,j.last=_,j.tail=b,j.tailMode=k)}function yj(a,c,b){var _=c.pendingProps,k=_.revealOrder,j=_.tail;if(Yi(a,c,_.children,b),_=M.current,_&2)_=_&1|2,c.flags|=128;else{if(a!==null&&a.flags&128)e:for(a=c.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&wj(a,b,c);else if(a.tag===19)wj(a,b,c);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===c)break e;for(;a.sibling===null;){if(a.return===null||a.return===c)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}_&=1}if(G(M,_),!(c.mode&1))c.memoizedState=null;else switch(k){case"forwards":for(b=c.child,k=null;b!==null;)a=b.alternate,a!==null&&Mh(a)===null&&(k=b),b=b.sibling;b=k,b===null?(k=c.child,c.child=null):(k=b.sibling,b.sibling=null),xj(c,!1,k,b,j);break;case"backwards":for(b=null,k=c.child,c.child=null;k!==null;){if(a=k.alternate,a!==null&&Mh(a)===null){c.child=k;break}a=k.sibling,k.sibling=b,b=k,k=a}xj(c,!0,b,null,j);break;case"together":xj(c,!1,null,null,void 0);break;default:c.memoizedState=null}return c.child}function jj(a,c){!(c.mode&1)&&a!==null&&(a.alternate=null,c.alternate=null,c.flags|=2)}function $i(a,c,b){if(a!==null&&(c.dependencies=a.dependencies),hh|=c.lanes,!(b&c.childLanes))return null;if(a!==null&&c.child!==a.child)throw Error(p(153));if(c.child!==null){for(a=c.child,b=wh(a,a.pendingProps),c.child=b,b.return=c;a.sibling!==null;)a=a.sibling,b=b.sibling=wh(a,a.pendingProps),b.return=c;b.sibling=null}return c.child}function zj(a,c,b){switch(c.tag){case 3:lj(c),Ig();break;case 5:Kh(c);break;case 1:Zf(c.type)&&cg(c);break;case 4:Ih(c,c.stateNode.containerInfo);break;case 10:var _=c.type._context,k=c.memoizedProps.value;G(Mg,_._currentValue),_._currentValue=k;break;case 13:if(_=c.memoizedState,_!==null)return _.dehydrated!==null?(G(M,M.current&1),c.flags|=128,null):b&c.child.childLanes?pj(a,c,b):(G(M,M.current&1),a=$i(a,c,b),a!==null?a.sibling:null);G(M,M.current&1);break;case 19:if(_=(b&c.childLanes)!==0,a.flags&128){if(_)return yj(a,c,b);c.flags|=128}if(k=c.memoizedState,k!==null&&(k.rendering=null,k.tail=null,k.lastEffect=null),G(M,M.current),_)break;return null;case 22:case 23:return c.lanes=0,ej(a,c,b)}return $i(a,c,b)}var Aj,Bj,Cj,Dj;Aj=function(a,c){for(var b=c.child;b!==null;){if(b.tag===5||b.tag===6)a.appendChild(b.stateNode);else if(b.tag!==4&&b.child!==null){b.child.return=b,b=b.child;continue}if(b===c)break;for(;b.sibling===null;){if(b.return===null||b.return===c)return;b=b.return}b.sibling.return=b.return,b=b.sibling}};Bj=function(){};Cj=function(a,c,b,_){var k=a.memoizedProps;if(k!==_){a=c.stateNode,Hh(Eh.current);var j=null;switch(b){case"input":k=Ya(a,k),_=Ya(a,_),j=[];break;case"select":k=A({},k,{value:void 0}),_=A({},_,{value:void 0}),j=[];break;case"textarea":k=gb(a,k),_=gb(a,_),j=[];break;default:typeof k.onClick!="function"&&typeof _.onClick=="function"&&(a.onclick=Bf)}ub(b,_);var _e;b=null;for(it in k)if(!_.hasOwnProperty(it)&&k.hasOwnProperty(it)&&k[it]!=null)if(it==="style"){var et=k[it];for(_e in et)et.hasOwnProperty(_e)&&(b||(b={}),b[_e]="")}else it!=="dangerouslySetInnerHTML"&&it!=="children"&&it!=="suppressContentEditableWarning"&&it!=="suppressHydrationWarning"&&it!=="autoFocus"&&(ea.hasOwnProperty(it)?j||(j=[]):(j=j||[]).push(it,null));for(it in _){var nt=_[it];if(et=k!=null?k[it]:void 0,_.hasOwnProperty(it)&&nt!==et&&(nt!=null||et!=null))if(it==="style")if(et){for(_e in et)!et.hasOwnProperty(_e)||nt&&nt.hasOwnProperty(_e)||(b||(b={}),b[_e]="");for(_e in nt)nt.hasOwnProperty(_e)&&et[_e]!==nt[_e]&&(b||(b={}),b[_e]=nt[_e])}else b||(j||(j=[]),j.push(it,b)),b=nt;else it==="dangerouslySetInnerHTML"?(nt=nt?nt.__html:void 0,et=et?et.__html:void 0,nt!=null&&et!==nt&&(j=j||[]).push(it,nt)):it==="children"?typeof nt!="string"&&typeof nt!="number"||(j=j||[]).push(it,""+nt):it!=="suppressContentEditableWarning"&&it!=="suppressHydrationWarning"&&(ea.hasOwnProperty(it)?(nt!=null&&it==="onScroll"&&D("scroll",a),j||et===nt||(j=[])):(j=j||[]).push(it,nt))}b&&(j=j||[]).push("style",b);var it=j;(c.updateQueue=it)&&(c.flags|=4)}};Dj=function(a,c,b,_){b!==_&&(c.flags|=4)};function Ej(a,c){if(!I)switch(a.tailMode){case"hidden":c=a.tail;for(var b=null;c!==null;)c.alternate!==null&&(b=c),c=c.sibling;b===null?a.tail=null:b.sibling=null;break;case"collapsed":b=a.tail;for(var _=null;b!==null;)b.alternate!==null&&(_=b),b=b.sibling;_===null?c||a.tail===null?a.tail=null:a.tail.sibling=null:_.sibling=null}}function S(a){var c=a.alternate!==null&&a.alternate.child===a.child,b=0,_=0;if(c)for(var k=a.child;k!==null;)b|=k.lanes|k.childLanes,_|=k.subtreeFlags&14680064,_|=k.flags&14680064,k.return=a,k=k.sibling;else for(k=a.child;k!==null;)b|=k.lanes|k.childLanes,_|=k.subtreeFlags,_|=k.flags,k.return=a,k=k.sibling;return a.subtreeFlags|=_,a.childLanes=b,c}function Fj(a,c,b){var _=c.pendingProps;switch(wg(c),c.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return S(c),null;case 1:return Zf(c.type)&&$f(),S(c),null;case 3:return _=c.stateNode,Jh(),E(Wf),E(H),Oh(),_.pendingContext&&(_.context=_.pendingContext,_.pendingContext=null),(a===null||a.child===null)&&(Gg(c)?c.flags|=4:a===null||a.memoizedState.isDehydrated&&!(c.flags&256)||(c.flags|=1024,zg!==null&&(Gj(zg),zg=null))),Bj(a,c),S(c),null;case 5:Lh(c);var k=Hh(Gh.current);if(b=c.type,a!==null&&c.stateNode!=null)Cj(a,c,b,_,k),a.ref!==c.ref&&(c.flags|=512,c.flags|=2097152);else{if(!_){if(c.stateNode===null)throw Error(p(166));return S(c),null}if(a=Hh(Eh.current),Gg(c)){_=c.stateNode,b=c.type;var j=c.memoizedProps;switch(_[Of]=c,_[Pf]=j,a=(c.mode&1)!==0,b){case"dialog":D("cancel",_),D("close",_);break;case"iframe":case"object":case"embed":D("load",_);break;case"video":case"audio":for(k=0;k<lf.length;k++)D(lf[k],_);break;case"source":D("error",_);break;case"img":case"image":case"link":D("error",_),D("load",_);break;case"details":D("toggle",_);break;case"input":Za(_,j),D("invalid",_);break;case"select":_._wrapperState={wasMultiple:!!j.multiple},D("invalid",_);break;case"textarea":hb(_,j),D("invalid",_)}ub(b,j),k=null;for(var _e in j)if(j.hasOwnProperty(_e)){var et=j[_e];_e==="children"?typeof et=="string"?_.textContent!==et&&(j.suppressHydrationWarning!==!0&&Af(_.textContent,et,a),k=["children",et]):typeof et=="number"&&_.textContent!==""+et&&(j.suppressHydrationWarning!==!0&&Af(_.textContent,et,a),k=["children",""+et]):ea.hasOwnProperty(_e)&&et!=null&&_e==="onScroll"&&D("scroll",_)}switch(b){case"input":Va(_),db(_,j,!0);break;case"textarea":Va(_),jb(_);break;case"select":case"option":break;default:typeof j.onClick=="function"&&(_.onclick=Bf)}_=k,c.updateQueue=_,_!==null&&(c.flags|=4)}else{_e=k.nodeType===9?k:k.ownerDocument,a==="http://www.w3.org/1999/xhtml"&&(a=kb(b)),a==="http://www.w3.org/1999/xhtml"?b==="script"?(a=_e.createElement("div"),a.innerHTML="<script><\/script>",a=a.removeChild(a.firstChild)):typeof _.is=="string"?a=_e.createElement(b,{is:_.is}):(a=_e.createElement(b),b==="select"&&(_e=a,_.multiple?_e.multiple=!0:_.size&&(_e.size=_.size))):a=_e.createElementNS(a,b),a[Of]=c,a[Pf]=_,Aj(a,c,!1,!1),c.stateNode=a;e:{switch(_e=vb(b,_),b){case"dialog":D("cancel",a),D("close",a),k=_;break;case"iframe":case"object":case"embed":D("load",a),k=_;break;case"video":case"audio":for(k=0;k<lf.length;k++)D(lf[k],a);k=_;break;case"source":D("error",a),k=_;break;case"img":case"image":case"link":D("error",a),D("load",a),k=_;break;case"details":D("toggle",a),k=_;break;case"input":Za(a,_),k=Ya(a,_),D("invalid",a);break;case"option":k=_;break;case"select":a._wrapperState={wasMultiple:!!_.multiple},k=A({},_,{value:void 0}),D("invalid",a);break;case"textarea":hb(a,_),k=gb(a,_),D("invalid",a);break;default:k=_}ub(b,k),et=k;for(j in et)if(et.hasOwnProperty(j)){var nt=et[j];j==="style"?sb(a,nt):j==="dangerouslySetInnerHTML"?(nt=nt?nt.__html:void 0,nt!=null&&nb(a,nt)):j==="children"?typeof nt=="string"?(b!=="textarea"||nt!=="")&&ob(a,nt):typeof nt=="number"&&ob(a,""+nt):j!=="suppressContentEditableWarning"&&j!=="suppressHydrationWarning"&&j!=="autoFocus"&&(ea.hasOwnProperty(j)?nt!=null&&j==="onScroll"&&D("scroll",a):nt!=null&&ta(a,j,nt,_e))}switch(b){case"input":Va(a),db(a,_,!1);break;case"textarea":Va(a),jb(a);break;case"option":_.value!=null&&a.setAttribute("value",""+Sa(_.value));break;case"select":a.multiple=!!_.multiple,j=_.value,j!=null?fb(a,!!_.multiple,j,!1):_.defaultValue!=null&&fb(a,!!_.multiple,_.defaultValue,!0);break;default:typeof k.onClick=="function"&&(a.onclick=Bf)}switch(b){case"button":case"input":case"select":case"textarea":_=!!_.autoFocus;break e;case"img":_=!0;break e;default:_=!1}}_&&(c.flags|=4)}c.ref!==null&&(c.flags|=512,c.flags|=2097152)}return S(c),null;case 6:if(a&&c.stateNode!=null)Dj(a,c,a.memoizedProps,_);else{if(typeof _!="string"&&c.stateNode===null)throw Error(p(166));if(b=Hh(Gh.current),Hh(Eh.current),Gg(c)){if(_=c.stateNode,b=c.memoizedProps,_[Of]=c,(j=_.nodeValue!==b)&&(a=xg,a!==null))switch(a.tag){case 3:Af(_.nodeValue,b,(a.mode&1)!==0);break;case 5:a.memoizedProps.suppressHydrationWarning!==!0&&Af(_.nodeValue,b,(a.mode&1)!==0)}j&&(c.flags|=4)}else _=(b.nodeType===9?b:b.ownerDocument).createTextNode(_),_[Of]=c,c.stateNode=_}return S(c),null;case 13:if(E(M),_=c.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(I&&yg!==null&&c.mode&1&&!(c.flags&128))Hg(),Ig(),c.flags|=98560,j=!1;else if(j=Gg(c),_!==null&&_.dehydrated!==null){if(a===null){if(!j)throw Error(p(318));if(j=c.memoizedState,j=j!==null?j.dehydrated:null,!j)throw Error(p(317));j[Of]=c}else Ig(),!(c.flags&128)&&(c.memoizedState=null),c.flags|=4;S(c),j=!1}else zg!==null&&(Gj(zg),zg=null),j=!0;if(!j)return c.flags&65536?c:null}return c.flags&128?(c.lanes=b,c):(_=_!==null,_!==(a!==null&&a.memoizedState!==null)&&_&&(c.child.flags|=8192,c.mode&1&&(a===null||M.current&1?T===0&&(T=3):uj())),c.updateQueue!==null&&(c.flags|=4),S(c),null);case 4:return Jh(),Bj(a,c),a===null&&sf(c.stateNode.containerInfo),S(c),null;case 10:return Rg(c.type._context),S(c),null;case 17:return Zf(c.type)&&$f(),S(c),null;case 19:if(E(M),j=c.memoizedState,j===null)return S(c),null;if(_=(c.flags&128)!==0,_e=j.rendering,_e===null)if(_)Ej(j,!1);else{if(T!==0||a!==null&&a.flags&128)for(a=c.child;a!==null;){if(_e=Mh(a),_e!==null){for(c.flags|=128,Ej(j,!1),_=_e.updateQueue,_!==null&&(c.updateQueue=_,c.flags|=4),c.subtreeFlags=0,_=b,b=c.child;b!==null;)j=b,a=_,j.flags&=14680066,_e=j.alternate,_e===null?(j.childLanes=0,j.lanes=a,j.child=null,j.subtreeFlags=0,j.memoizedProps=null,j.memoizedState=null,j.updateQueue=null,j.dependencies=null,j.stateNode=null):(j.childLanes=_e.childLanes,j.lanes=_e.lanes,j.child=_e.child,j.subtreeFlags=0,j.deletions=null,j.memoizedProps=_e.memoizedProps,j.memoizedState=_e.memoizedState,j.updateQueue=_e.updateQueue,j.type=_e.type,a=_e.dependencies,j.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),b=b.sibling;return G(M,M.current&1|2),c.child}a=a.sibling}j.tail!==null&&B()>Hj&&(c.flags|=128,_=!0,Ej(j,!1),c.lanes=4194304)}else{if(!_)if(a=Mh(_e),a!==null){if(c.flags|=128,_=!0,b=a.updateQueue,b!==null&&(c.updateQueue=b,c.flags|=4),Ej(j,!0),j.tail===null&&j.tailMode==="hidden"&&!_e.alternate&&!I)return S(c),null}else 2*B()-j.renderingStartTime>Hj&&b!==1073741824&&(c.flags|=128,_=!0,Ej(j,!1),c.lanes=4194304);j.isBackwards?(_e.sibling=c.child,c.child=_e):(b=j.last,b!==null?b.sibling=_e:c.child=_e,j.last=_e)}return j.tail!==null?(c=j.tail,j.rendering=c,j.tail=c.sibling,j.renderingStartTime=B(),c.sibling=null,b=M.current,G(M,_?b&1|2:b&1),c):(S(c),null);case 22:case 23:return Ij(),_=c.memoizedState!==null,a!==null&&a.memoizedState!==null!==_&&(c.flags|=8192),_&&c.mode&1?gj&1073741824&&(S(c),c.subtreeFlags&6&&(c.flags|=8192)):S(c),null;case 24:return null;case 25:return null}throw Error(p(156,c.tag))}function Jj(a,c){switch(wg(c),c.tag){case 1:return Zf(c.type)&&$f(),a=c.flags,a&65536?(c.flags=a&-65537|128,c):null;case 3:return Jh(),E(Wf),E(H),Oh(),a=c.flags,a&65536&&!(a&128)?(c.flags=a&-65537|128,c):null;case 5:return Lh(c),null;case 13:if(E(M),a=c.memoizedState,a!==null&&a.dehydrated!==null){if(c.alternate===null)throw Error(p(340));Ig()}return a=c.flags,a&65536?(c.flags=a&-65537|128,c):null;case 19:return E(M),null;case 4:return Jh(),null;case 10:return Rg(c.type._context),null;case 22:case 23:return Ij(),null;case 24:return null;default:return null}}var Kj=!1,U=!1,Lj=typeof WeakSet=="function"?WeakSet:Set,V=null;function Mj(a,c){var b=a.ref;if(b!==null)if(typeof b=="function")try{b(null)}catch(_){W(a,c,_)}else b.current=null}function Nj(a,c,b){try{b()}catch(_){W(a,c,_)}}var Oj=!1;function Pj(a,c){if(Cf=dd,a=Me(),Ne(a)){if("selectionStart"in a)var b={start:a.selectionStart,end:a.selectionEnd};else e:{b=(b=a.ownerDocument)&&b.defaultView||window;var _=b.getSelection&&b.getSelection();if(_&&_.rangeCount!==0){b=_.anchorNode;var k=_.anchorOffset,j=_.focusNode;_=_.focusOffset;try{b.nodeType,j.nodeType}catch{b=null;break e}var _e=0,et=-1,nt=-1,it=0,ft=0,pt=a,mt=null;t:for(;;){for(var St;pt!==b||k!==0&&pt.nodeType!==3||(et=_e+k),pt!==j||_!==0&&pt.nodeType!==3||(nt=_e+_),pt.nodeType===3&&(_e+=pt.nodeValue.length),(St=pt.firstChild)!==null;)mt=pt,pt=St;for(;;){if(pt===a)break t;if(mt===b&&++it===k&&(et=_e),mt===j&&++ft===_&&(nt=_e),(St=pt.nextSibling)!==null)break;pt=mt,mt=pt.parentNode}pt=St}b=et===-1||nt===-1?null:{start:et,end:nt}}else b=null}b=b||{start:0,end:0}}else b=null;for(Df={focusedElem:a,selectionRange:b},dd=!1,V=c;V!==null;)if(c=V,a=c.child,(c.subtreeFlags&1028)!==0&&a!==null)a.return=c,V=a;else for(;V!==null;){c=V;try{var yt=c.alternate;if(c.flags&1024)switch(c.tag){case 0:case 11:case 15:break;case 1:if(yt!==null){var _t=yt.memoizedProps,Tt=yt.memoizedState,gt=c.stateNode,ht=gt.getSnapshotBeforeUpdate(c.elementType===c.type?_t:Lg(c.type,_t),Tt);gt.__reactInternalSnapshotBeforeUpdate=ht}break;case 3:var Et=c.stateNode.containerInfo;Et.nodeType===1?Et.textContent="":Et.nodeType===9&&Et.documentElement&&Et.removeChild(Et.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(p(163))}}catch(At){W(c,c.return,At)}if(a=c.sibling,a!==null){a.return=c.return,V=a;break}V=c.return}return yt=Oj,Oj=!1,yt}function Qj(a,c,b){var _=c.updateQueue;if(_=_!==null?_.lastEffect:null,_!==null){var k=_=_.next;do{if((k.tag&a)===a){var j=k.destroy;k.destroy=void 0,j!==void 0&&Nj(c,b,j)}k=k.next}while(k!==_)}}function Rj(a,c){if(c=c.updateQueue,c=c!==null?c.lastEffect:null,c!==null){var b=c=c.next;do{if((b.tag&a)===a){var _=b.create;b.destroy=_()}b=b.next}while(b!==c)}}function Sj(a){var c=a.ref;if(c!==null){var b=a.stateNode;switch(a.tag){case 5:a=b;break;default:a=b}typeof c=="function"?c(a):c.current=a}}function Tj(a){var c=a.alternate;c!==null&&(a.alternate=null,Tj(c)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(c=a.stateNode,c!==null&&(delete c[Of],delete c[Pf],delete c[of$1],delete c[Qf],delete c[Rf])),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}function Uj(a){return a.tag===5||a.tag===3||a.tag===4}function Vj(a){e:for(;;){for(;a.sibling===null;){if(a.return===null||Uj(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.flags&2||a.child===null||a.tag===4)continue e;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function Wj(a,c,b){var _=a.tag;if(_===5||_===6)a=a.stateNode,c?b.nodeType===8?b.parentNode.insertBefore(a,c):b.insertBefore(a,c):(b.nodeType===8?(c=b.parentNode,c.insertBefore(a,b)):(c=b,c.appendChild(a)),b=b._reactRootContainer,b!=null||c.onclick!==null||(c.onclick=Bf));else if(_!==4&&(a=a.child,a!==null))for(Wj(a,c,b),a=a.sibling;a!==null;)Wj(a,c,b),a=a.sibling}function Xj(a,c,b){var _=a.tag;if(_===5||_===6)a=a.stateNode,c?b.insertBefore(a,c):b.appendChild(a);else if(_!==4&&(a=a.child,a!==null))for(Xj(a,c,b),a=a.sibling;a!==null;)Xj(a,c,b),a=a.sibling}var X=null,Yj=!1;function Zj(a,c,b){for(b=b.child;b!==null;)ak(a,c,b),b=b.sibling}function ak(a,c,b){if(lc&&typeof lc.onCommitFiberUnmount=="function")try{lc.onCommitFiberUnmount(kc,b)}catch{}switch(b.tag){case 5:U||Mj(b,c);case 6:var _=X,k=Yj;X=null,Zj(a,c,b),X=_,Yj=k,X!==null&&(Yj?(a=X,b=b.stateNode,a.nodeType===8?a.parentNode.removeChild(b):a.removeChild(b)):X.removeChild(b.stateNode));break;case 18:X!==null&&(Yj?(a=X,b=b.stateNode,a.nodeType===8?Kf(a.parentNode,b):a.nodeType===1&&Kf(a,b),bd(a)):Kf(X,b.stateNode));break;case 4:_=X,k=Yj,X=b.stateNode.containerInfo,Yj=!0,Zj(a,c,b),X=_,Yj=k;break;case 0:case 11:case 14:case 15:if(!U&&(_=b.updateQueue,_!==null&&(_=_.lastEffect,_!==null))){k=_=_.next;do{var j=k,_e=j.destroy;j=j.tag,_e!==void 0&&(j&2||j&4)&&Nj(b,c,_e),k=k.next}while(k!==_)}Zj(a,c,b);break;case 1:if(!U&&(Mj(b,c),_=b.stateNode,typeof _.componentWillUnmount=="function"))try{_.props=b.memoizedProps,_.state=b.memoizedState,_.componentWillUnmount()}catch(et){W(b,c,et)}Zj(a,c,b);break;case 21:Zj(a,c,b);break;case 22:b.mode&1?(U=(_=U)||b.memoizedState!==null,Zj(a,c,b),U=_):Zj(a,c,b);break;default:Zj(a,c,b)}}function bk(a){var c=a.updateQueue;if(c!==null){a.updateQueue=null;var b=a.stateNode;b===null&&(b=a.stateNode=new Lj),c.forEach(function(_){var k=ck.bind(null,a,_);b.has(_)||(b.add(_),_.then(k,k))})}}function dk(a,c){var b=c.deletions;if(b!==null)for(var _=0;_<b.length;_++){var k=b[_];try{var j=a,_e=c,et=_e;e:for(;et!==null;){switch(et.tag){case 5:X=et.stateNode,Yj=!1;break e;case 3:X=et.stateNode.containerInfo,Yj=!0;break e;case 4:X=et.stateNode.containerInfo,Yj=!0;break e}et=et.return}if(X===null)throw Error(p(160));ak(j,_e,k),X=null,Yj=!1;var nt=k.alternate;nt!==null&&(nt.return=null),k.return=null}catch(it){W(k,c,it)}}if(c.subtreeFlags&12854)for(c=c.child;c!==null;)ek(c,a),c=c.sibling}function ek(a,c){var b=a.alternate,_=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:if(dk(c,a),fk(a),_&4){try{Qj(3,a,a.return),Rj(3,a)}catch(_t){W(a,a.return,_t)}try{Qj(5,a,a.return)}catch(_t){W(a,a.return,_t)}}break;case 1:dk(c,a),fk(a),_&512&&b!==null&&Mj(b,b.return);break;case 5:if(dk(c,a),fk(a),_&512&&b!==null&&Mj(b,b.return),a.flags&32){var k=a.stateNode;try{ob(k,"")}catch(_t){W(a,a.return,_t)}}if(_&4&&(k=a.stateNode,k!=null)){var j=a.memoizedProps,_e=b!==null?b.memoizedProps:j,et=a.type,nt=a.updateQueue;if(a.updateQueue=null,nt!==null)try{et==="input"&&j.type==="radio"&&j.name!=null&&ab(k,j),vb(et,_e);var it=vb(et,j);for(_e=0;_e<nt.length;_e+=2){var ft=nt[_e],pt=nt[_e+1];ft==="style"?sb(k,pt):ft==="dangerouslySetInnerHTML"?nb(k,pt):ft==="children"?ob(k,pt):ta(k,ft,pt,it)}switch(et){case"input":bb(k,j);break;case"textarea":ib(k,j);break;case"select":var mt=k._wrapperState.wasMultiple;k._wrapperState.wasMultiple=!!j.multiple;var St=j.value;St!=null?fb(k,!!j.multiple,St,!1):mt!==!!j.multiple&&(j.defaultValue!=null?fb(k,!!j.multiple,j.defaultValue,!0):fb(k,!!j.multiple,j.multiple?[]:"",!1))}k[Pf]=j}catch(_t){W(a,a.return,_t)}}break;case 6:if(dk(c,a),fk(a),_&4){if(a.stateNode===null)throw Error(p(162));k=a.stateNode,j=a.memoizedProps;try{k.nodeValue=j}catch(_t){W(a,a.return,_t)}}break;case 3:if(dk(c,a),fk(a),_&4&&b!==null&&b.memoizedState.isDehydrated)try{bd(c.containerInfo)}catch(_t){W(a,a.return,_t)}break;case 4:dk(c,a),fk(a);break;case 13:dk(c,a),fk(a),k=a.child,k.flags&8192&&(j=k.memoizedState!==null,k.stateNode.isHidden=j,!j||k.alternate!==null&&k.alternate.memoizedState!==null||(gk=B())),_&4&&bk(a);break;case 22:if(ft=b!==null&&b.memoizedState!==null,a.mode&1?(U=(it=U)||ft,dk(c,a),U=it):dk(c,a),fk(a),_&8192){if(it=a.memoizedState!==null,(a.stateNode.isHidden=it)&&!ft&&a.mode&1)for(V=a,ft=a.child;ft!==null;){for(pt=V=ft;V!==null;){switch(mt=V,St=mt.child,mt.tag){case 0:case 11:case 14:case 15:Qj(4,mt,mt.return);break;case 1:Mj(mt,mt.return);var yt=mt.stateNode;if(typeof yt.componentWillUnmount=="function"){_=mt,b=mt.return;try{c=_,yt.props=c.memoizedProps,yt.state=c.memoizedState,yt.componentWillUnmount()}catch(_t){W(_,b,_t)}}break;case 5:Mj(mt,mt.return);break;case 22:if(mt.memoizedState!==null){hk(pt);continue}}St!==null?(St.return=mt,V=St):hk(pt)}ft=ft.sibling}e:for(ft=null,pt=a;;){if(pt.tag===5){if(ft===null){ft=pt;try{k=pt.stateNode,it?(j=k.style,typeof j.setProperty=="function"?j.setProperty("display","none","important"):j.display="none"):(et=pt.stateNode,nt=pt.memoizedProps.style,_e=nt!=null&&nt.hasOwnProperty("display")?nt.display:null,et.style.display=rb("display",_e))}catch(_t){W(a,a.return,_t)}}}else if(pt.tag===6){if(ft===null)try{pt.stateNode.nodeValue=it?"":pt.memoizedProps}catch(_t){W(a,a.return,_t)}}else if((pt.tag!==22&&pt.tag!==23||pt.memoizedState===null||pt===a)&&pt.child!==null){pt.child.return=pt,pt=pt.child;continue}if(pt===a)break e;for(;pt.sibling===null;){if(pt.return===null||pt.return===a)break e;ft===pt&&(ft=null),pt=pt.return}ft===pt&&(ft=null),pt.sibling.return=pt.return,pt=pt.sibling}}break;case 19:dk(c,a),fk(a),_&4&&bk(a);break;case 21:break;default:dk(c,a),fk(a)}}function fk(a){var c=a.flags;if(c&2){try{e:{for(var b=a.return;b!==null;){if(Uj(b)){var _=b;break e}b=b.return}throw Error(p(160))}switch(_.tag){case 5:var k=_.stateNode;_.flags&32&&(ob(k,""),_.flags&=-33);var j=Vj(a);Xj(a,j,k);break;case 3:case 4:var _e=_.stateNode.containerInfo,et=Vj(a);Wj(a,et,_e);break;default:throw Error(p(161))}}catch(nt){W(a,a.return,nt)}a.flags&=-3}c&4096&&(a.flags&=-4097)}function ik(a,c,b){V=a,jk(a)}function jk(a,c,b){for(var _=(a.mode&1)!==0;V!==null;){var k=V,j=k.child;if(k.tag===22&&_){var _e=k.memoizedState!==null||Kj;if(!_e){var et=k.alternate,nt=et!==null&&et.memoizedState!==null||U;et=Kj;var it=U;if(Kj=_e,(U=nt)&&!it)for(V=k;V!==null;)_e=V,nt=_e.child,_e.tag===22&&_e.memoizedState!==null?kk(k):nt!==null?(nt.return=_e,V=nt):kk(k);for(;j!==null;)V=j,jk(j),j=j.sibling;V=k,Kj=et,U=it}lk(a)}else k.subtreeFlags&8772&&j!==null?(j.return=k,V=j):lk(a)}}function lk(a){for(;V!==null;){var c=V;if(c.flags&8772){var b=c.alternate;try{if(c.flags&8772)switch(c.tag){case 0:case 11:case 15:U||Rj(5,c);break;case 1:var _=c.stateNode;if(c.flags&4&&!U)if(b===null)_.componentDidMount();else{var k=c.elementType===c.type?b.memoizedProps:Lg(c.type,b.memoizedProps);_.componentDidUpdate(k,b.memoizedState,_.__reactInternalSnapshotBeforeUpdate)}var j=c.updateQueue;j!==null&&ih(c,j,_);break;case 3:var _e=c.updateQueue;if(_e!==null){if(b=null,c.child!==null)switch(c.child.tag){case 5:b=c.child.stateNode;break;case 1:b=c.child.stateNode}ih(c,_e,b)}break;case 5:var et=c.stateNode;if(b===null&&c.flags&4){b=et;var nt=c.memoizedProps;switch(c.type){case"button":case"input":case"select":case"textarea":nt.autoFocus&&b.focus();break;case"img":nt.src&&(b.src=nt.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(c.memoizedState===null){var it=c.alternate;if(it!==null){var ft=it.memoizedState;if(ft!==null){var pt=ft.dehydrated;pt!==null&&bd(pt)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(p(163))}U||c.flags&512&&Sj(c)}catch(mt){W(c,c.return,mt)}}if(c===a){V=null;break}if(b=c.sibling,b!==null){b.return=c.return,V=b;break}V=c.return}}function hk(a){for(;V!==null;){var c=V;if(c===a){V=null;break}var b=c.sibling;if(b!==null){b.return=c.return,V=b;break}V=c.return}}function kk(a){for(;V!==null;){var c=V;try{switch(c.tag){case 0:case 11:case 15:var b=c.return;try{Rj(4,c)}catch(nt){W(c,b,nt)}break;case 1:var _=c.stateNode;if(typeof _.componentDidMount=="function"){var k=c.return;try{_.componentDidMount()}catch(nt){W(c,k,nt)}}var j=c.return;try{Sj(c)}catch(nt){W(c,j,nt)}break;case 5:var _e=c.return;try{Sj(c)}catch(nt){W(c,_e,nt)}}}catch(nt){W(c,c.return,nt)}if(c===a){V=null;break}var et=c.sibling;if(et!==null){et.return=c.return,V=et;break}V=c.return}}var mk=Math.ceil,nk=ua.ReactCurrentDispatcher,ok=ua.ReactCurrentOwner,pk=ua.ReactCurrentBatchConfig,K=0,R=null,Y=null,Z=0,gj=0,fj=Uf(0),T=0,qk=null,hh=0,rk=0,sk=0,tk=null,uk=null,gk=0,Hj=1/0,vk=null,Pi=!1,Qi=null,Si=null,wk=!1,xk=null,yk=0,zk=0,Ak=null,Bk=-1,Ck=0;function L(){return K&6?B():Bk!==-1?Bk:Bk=B()}function lh(a){return a.mode&1?K&2&&Z!==0?Z&-Z:Kg.transition!==null?(Ck===0&&(Ck=yc()),Ck):(a=C,a!==0||(a=window.event,a=a===void 0?16:jd(a.type)),a):1}function mh(a,c,b,_){if(50<zk)throw zk=0,Ak=null,Error(p(185));Ac(a,b,_),(!(K&2)||a!==R)&&(a===R&&(!(K&2)&&(rk|=b),T===4&&Dk(a,Z)),Ek(a,_),b===1&&K===0&&!(c.mode&1)&&(Hj=B()+500,fg&&jg()))}function Ek(a,c){var b=a.callbackNode;wc(a,c);var _=uc(a,a===R?Z:0);if(_===0)b!==null&&bc(b),a.callbackNode=null,a.callbackPriority=0;else if(c=_&-_,a.callbackPriority!==c){if(b!=null&&bc(b),c===1)a.tag===0?ig(Fk.bind(null,a)):hg(Fk.bind(null,a)),Jf(function(){!(K&6)&&jg()}),b=null;else{switch(Dc(_)){case 1:b=fc;break;case 4:b=gc;break;case 16:b=hc;break;case 536870912:b=jc;break;default:b=hc}b=Gk(b,Hk.bind(null,a))}a.callbackPriority=c,a.callbackNode=b}}function Hk(a,c){if(Bk=-1,Ck=0,K&6)throw Error(p(327));var b=a.callbackNode;if(Ik()&&a.callbackNode!==b)return null;var _=uc(a,a===R?Z:0);if(_===0)return null;if(_&30||_&a.expiredLanes||c)c=Jk(a,_);else{c=_;var k=K;K|=2;var j=Kk();(R!==a||Z!==c)&&(vk=null,Hj=B()+500,Lk(a,c));do try{Mk();break}catch(et){Nk(a,et)}while(!0);Qg(),nk.current=j,K=k,Y!==null?c=0:(R=null,Z=0,c=T)}if(c!==0){if(c===2&&(k=xc(a),k!==0&&(_=k,c=Ok(a,k))),c===1)throw b=qk,Lk(a,0),Dk(a,_),Ek(a,B()),b;if(c===6)Dk(a,_);else{if(k=a.current.alternate,!(_&30)&&!Pk(k)&&(c=Jk(a,_),c===2&&(j=xc(a),j!==0&&(_=j,c=Ok(a,j))),c===1))throw b=qk,Lk(a,0),Dk(a,_),Ek(a,B()),b;switch(a.finishedWork=k,a.finishedLanes=_,c){case 0:case 1:throw Error(p(345));case 2:Qk(a,uk,vk);break;case 3:if(Dk(a,_),(_&130023424)===_&&(c=gk+500-B(),10<c)){if(uc(a,0)!==0)break;if(k=a.suspendedLanes,(k&_)!==_){L(),a.pingedLanes|=a.suspendedLanes&k;break}a.timeoutHandle=Ff(Qk.bind(null,a,uk,vk),c);break}Qk(a,uk,vk);break;case 4:if(Dk(a,_),(_&4194240)===_)break;for(c=a.eventTimes,k=-1;0<_;){var _e=31-oc(_);j=1<<_e,_e=c[_e],_e>k&&(k=_e),_&=~j}if(_=k,_=B()-_,_=(120>_?120:480>_?480:1080>_?1080:1920>_?1920:3e3>_?3e3:4320>_?4320:1960*mk(_/1960))-_,10<_){a.timeoutHandle=Ff(Qk.bind(null,a,uk,vk),_);break}Qk(a,uk,vk);break;case 5:Qk(a,uk,vk);break;default:throw Error(p(329))}}}return Ek(a,B()),a.callbackNode===b?Hk.bind(null,a):null}function Ok(a,c){var b=tk;return a.current.memoizedState.isDehydrated&&(Lk(a,c).flags|=256),a=Jk(a,c),a!==2&&(c=uk,uk=b,c!==null&&Gj(c)),a}function Gj(a){uk===null?uk=a:uk.push.apply(uk,a)}function Pk(a){for(var c=a;;){if(c.flags&16384){var b=c.updateQueue;if(b!==null&&(b=b.stores,b!==null))for(var _=0;_<b.length;_++){var k=b[_],j=k.getSnapshot;k=k.value;try{if(!He(j(),k))return!1}catch{return!1}}}if(b=c.child,c.subtreeFlags&16384&&b!==null)b.return=c,c=b;else{if(c===a)break;for(;c.sibling===null;){if(c.return===null||c.return===a)return!0;c=c.return}c.sibling.return=c.return,c=c.sibling}}return!0}function Dk(a,c){for(c&=~sk,c&=~rk,a.suspendedLanes|=c,a.pingedLanes&=~c,a=a.expirationTimes;0<c;){var b=31-oc(c),_=1<<b;a[b]=-1,c&=~_}}function Fk(a){if(K&6)throw Error(p(327));Ik();var c=uc(a,0);if(!(c&1))return Ek(a,B()),null;var b=Jk(a,c);if(a.tag!==0&&b===2){var _=xc(a);_!==0&&(c=_,b=Ok(a,_))}if(b===1)throw b=qk,Lk(a,0),Dk(a,c),Ek(a,B()),b;if(b===6)throw Error(p(345));return a.finishedWork=a.current.alternate,a.finishedLanes=c,Qk(a,uk,vk),Ek(a,B()),null}function Rk(a,c){var b=K;K|=1;try{return a(c)}finally{K=b,K===0&&(Hj=B()+500,fg&&jg())}}function Sk(a){xk!==null&&xk.tag===0&&!(K&6)&&Ik();var c=K;K|=1;var b=pk.transition,_=C;try{if(pk.transition=null,C=1,a)return a()}finally{C=_,pk.transition=b,K=c,!(K&6)&&jg()}}function Ij(){gj=fj.current,E(fj)}function Lk(a,c){a.finishedWork=null,a.finishedLanes=0;var b=a.timeoutHandle;if(b!==-1&&(a.timeoutHandle=-1,Gf(b)),Y!==null)for(b=Y.return;b!==null;){var _=b;switch(wg(_),_.tag){case 1:_=_.type.childContextTypes,_!=null&&$f();break;case 3:Jh(),E(Wf),E(H),Oh();break;case 5:Lh(_);break;case 4:Jh();break;case 13:E(M);break;case 19:E(M);break;case 10:Rg(_.type._context);break;case 22:case 23:Ij()}b=b.return}if(R=a,Y=a=wh(a.current,null),Z=gj=c,T=0,qk=null,sk=rk=hh=0,uk=tk=null,Wg!==null){for(c=0;c<Wg.length;c++)if(b=Wg[c],_=b.interleaved,_!==null){b.interleaved=null;var k=_.next,j=b.pending;if(j!==null){var _e=j.next;j.next=k,_.next=_e}b.pending=_}Wg=null}return a}function Nk(a,c){do{var b=Y;try{if(Qg(),Ph.current=ai,Sh){for(var _=N.memoizedState;_!==null;){var k=_.queue;k!==null&&(k.pending=null),_=_.next}Sh=!1}if(Rh=0,P=O=N=null,Th=!1,Uh=0,ok.current=null,b===null||b.return===null){T=1,qk=c,Y=null;break}e:{var j=a,_e=b.return,et=b,nt=c;if(c=Z,et.flags|=32768,nt!==null&&typeof nt=="object"&&typeof nt.then=="function"){var it=nt,ft=et,pt=ft.tag;if(!(ft.mode&1)&&(pt===0||pt===11||pt===15)){var mt=ft.alternate;mt?(ft.updateQueue=mt.updateQueue,ft.memoizedState=mt.memoizedState,ft.lanes=mt.lanes):(ft.updateQueue=null,ft.memoizedState=null)}var St=Vi(_e);if(St!==null){St.flags&=-257,Wi(St,_e,et,j,c),St.mode&1&&Ti(j,it,c),c=St,nt=it;var yt=c.updateQueue;if(yt===null){var _t=new Set;_t.add(nt),c.updateQueue=_t}else yt.add(nt);break e}else{if(!(c&1)){Ti(j,it,c),uj();break e}nt=Error(p(426))}}else if(I&&et.mode&1){var Tt=Vi(_e);if(Tt!==null){!(Tt.flags&65536)&&(Tt.flags|=256),Wi(Tt,_e,et,j,c),Jg(Ki(nt,et));break e}}j=nt=Ki(nt,et),T!==4&&(T=2),tk===null?tk=[j]:tk.push(j),j=_e;do{switch(j.tag){case 3:j.flags|=65536,c&=-c,j.lanes|=c;var gt=Oi(j,nt,c);fh(j,gt);break e;case 1:et=nt;var ht=j.type,Et=j.stateNode;if(!(j.flags&128)&&(typeof ht.getDerivedStateFromError=="function"||Et!==null&&typeof Et.componentDidCatch=="function"&&(Si===null||!Si.has(Et)))){j.flags|=65536,c&=-c,j.lanes|=c;var At=Ri(j,et,c);fh(j,At);break e}}j=j.return}while(j!==null)}Tk(b)}catch(Bt){c=Bt,Y===b&&b!==null&&(Y=b=b.return);continue}break}while(!0)}function Kk(){var a=nk.current;return nk.current=ai,a===null?ai:a}function uj(){(T===0||T===3||T===2)&&(T=4),R===null||!(hh&268435455)&&!(rk&268435455)||Dk(R,Z)}function Jk(a,c){var b=K;K|=2;var _=Kk();(R!==a||Z!==c)&&(vk=null,Lk(a,c));do try{Uk();break}catch(k){Nk(a,k)}while(!0);if(Qg(),K=b,nk.current=_,Y!==null)throw Error(p(261));return R=null,Z=0,T}function Uk(){for(;Y!==null;)Vk(Y)}function Mk(){for(;Y!==null&&!cc();)Vk(Y)}function Vk(a){var c=Wk(a.alternate,a,gj);a.memoizedProps=a.pendingProps,c===null?Tk(a):Y=c,ok.current=null}function Tk(a){var c=a;do{var b=c.alternate;if(a=c.return,c.flags&32768){if(b=Jj(b,c),b!==null){b.flags&=32767,Y=b;return}if(a!==null)a.flags|=32768,a.subtreeFlags=0,a.deletions=null;else{T=6,Y=null;return}}else if(b=Fj(b,c,gj),b!==null){Y=b;return}if(c=c.sibling,c!==null){Y=c;return}Y=c=a}while(c!==null);T===0&&(T=5)}function Qk(a,c,b){var _=C,k=pk.transition;try{pk.transition=null,C=1,Xk(a,c,b,_)}finally{pk.transition=k,C=_}return null}function Xk(a,c,b,_){do Ik();while(xk!==null);if(K&6)throw Error(p(327));b=a.finishedWork;var k=a.finishedLanes;if(b===null)return null;if(a.finishedWork=null,a.finishedLanes=0,b===a.current)throw Error(p(177));a.callbackNode=null,a.callbackPriority=0;var j=b.lanes|b.childLanes;if(Bc(a,j),a===R&&(Y=R=null,Z=0),!(b.subtreeFlags&2064)&&!(b.flags&2064)||wk||(wk=!0,Gk(hc,function(){return Ik(),null})),j=(b.flags&15990)!==0,b.subtreeFlags&15990||j){j=pk.transition,pk.transition=null;var _e=C;C=1;var et=K;K|=4,ok.current=null,Pj(a,b),ek(b,a),Oe(Df),dd=!!Cf,Df=Cf=null,a.current=b,ik(b),dc(),K=et,C=_e,pk.transition=j}else a.current=b;if(wk&&(wk=!1,xk=a,yk=k),j=a.pendingLanes,j===0&&(Si=null),mc(b.stateNode),Ek(a,B()),c!==null)for(_=a.onRecoverableError,b=0;b<c.length;b++)k=c[b],_(k.value,{componentStack:k.stack,digest:k.digest});if(Pi)throw Pi=!1,a=Qi,Qi=null,a;return yk&1&&a.tag!==0&&Ik(),j=a.pendingLanes,j&1?a===Ak?zk++:(zk=0,Ak=a):zk=0,jg(),null}function Ik(){if(xk!==null){var a=Dc(yk),c=pk.transition,b=C;try{if(pk.transition=null,C=16>a?16:a,xk===null)var _=!1;else{if(a=xk,xk=null,yk=0,K&6)throw Error(p(331));var k=K;for(K|=4,V=a.current;V!==null;){var j=V,_e=j.child;if(V.flags&16){var et=j.deletions;if(et!==null){for(var nt=0;nt<et.length;nt++){var it=et[nt];for(V=it;V!==null;){var ft=V;switch(ft.tag){case 0:case 11:case 15:Qj(8,ft,j)}var pt=ft.child;if(pt!==null)pt.return=ft,V=pt;else for(;V!==null;){ft=V;var mt=ft.sibling,St=ft.return;if(Tj(ft),ft===it){V=null;break}if(mt!==null){mt.return=St,V=mt;break}V=St}}}var yt=j.alternate;if(yt!==null){var _t=yt.child;if(_t!==null){yt.child=null;do{var Tt=_t.sibling;_t.sibling=null,_t=Tt}while(_t!==null)}}V=j}}if(j.subtreeFlags&2064&&_e!==null)_e.return=j,V=_e;else e:for(;V!==null;){if(j=V,j.flags&2048)switch(j.tag){case 0:case 11:case 15:Qj(9,j,j.return)}var gt=j.sibling;if(gt!==null){gt.return=j.return,V=gt;break e}V=j.return}}var ht=a.current;for(V=ht;V!==null;){_e=V;var Et=_e.child;if(_e.subtreeFlags&2064&&Et!==null)Et.return=_e,V=Et;else e:for(_e=ht;V!==null;){if(et=V,et.flags&2048)try{switch(et.tag){case 0:case 11:case 15:Rj(9,et)}}catch(Bt){W(et,et.return,Bt)}if(et===_e){V=null;break e}var At=et.sibling;if(At!==null){At.return=et.return,V=At;break e}V=et.return}}if(K=k,jg(),lc&&typeof lc.onPostCommitFiberRoot=="function")try{lc.onPostCommitFiberRoot(kc,a)}catch{}_=!0}return _}finally{C=b,pk.transition=c}}return!1}function Yk(a,c,b){c=Ki(b,c),c=Oi(a,c,1),a=dh(a,c,1),c=L(),a!==null&&(Ac(a,1,c),Ek(a,c))}function W(a,c,b){if(a.tag===3)Yk(a,a,b);else for(;c!==null;){if(c.tag===3){Yk(c,a,b);break}else if(c.tag===1){var _=c.stateNode;if(typeof c.type.getDerivedStateFromError=="function"||typeof _.componentDidCatch=="function"&&(Si===null||!Si.has(_))){a=Ki(b,a),a=Ri(c,a,1),c=dh(c,a,1),a=L(),c!==null&&(Ac(c,1,a),Ek(c,a));break}}c=c.return}}function Ui(a,c,b){var _=a.pingCache;_!==null&&_.delete(c),c=L(),a.pingedLanes|=a.suspendedLanes&b,R===a&&(Z&b)===b&&(T===4||T===3&&(Z&130023424)===Z&&500>B()-gk?Lk(a,0):sk|=b),Ek(a,c)}function Zk(a,c){c===0&&(a.mode&1?(c=sc,sc<<=1,!(sc&130023424)&&(sc=4194304)):c=1);var b=L();a=Zg(a,c),a!==null&&(Ac(a,c,b),Ek(a,b))}function vj(a){var c=a.memoizedState,b=0;c!==null&&(b=c.retryLane),Zk(a,b)}function ck(a,c){var b=0;switch(a.tag){case 13:var _=a.stateNode,k=a.memoizedState;k!==null&&(b=k.retryLane);break;case 19:_=a.stateNode;break;default:throw Error(p(314))}_!==null&&_.delete(c),Zk(a,b)}var Wk;Wk=function(a,c,b){if(a!==null)if(a.memoizedProps!==c.pendingProps||Wf.current)Ug=!0;else{if(!(a.lanes&b)&&!(c.flags&128))return Ug=!1,zj(a,c,b);Ug=!!(a.flags&131072)}else Ug=!1,I&&c.flags&1048576&&ug(c,ng,c.index);switch(c.lanes=0,c.tag){case 2:var _=c.type;jj(a,c),a=c.pendingProps;var k=Yf(c,H.current);Tg(c,b),k=Xh(null,c,_,a,k,b);var j=bi();return c.flags|=1,typeof k=="object"&&k!==null&&typeof k.render=="function"&&k.$$typeof===void 0?(c.tag=1,c.memoizedState=null,c.updateQueue=null,Zf(_)?(j=!0,cg(c)):j=!1,c.memoizedState=k.state!==null&&k.state!==void 0?k.state:null,ah(c),k.updater=nh,c.stateNode=k,k._reactInternals=c,rh(c,_,a,b),c=kj(null,c,_,!0,j,b)):(c.tag=0,I&&j&&vg(c),Yi(null,c,k,b),c=c.child),c;case 16:_=c.elementType;e:{switch(jj(a,c),a=c.pendingProps,k=_._init,_=k(_._payload),c.type=_,k=c.tag=$k(_),a=Lg(_,a),k){case 0:c=dj(null,c,_,a,b);break e;case 1:c=ij(null,c,_,a,b);break e;case 11:c=Zi(null,c,_,a,b);break e;case 14:c=aj(null,c,_,Lg(_.type,a),b);break e}throw Error(p(306,_,""))}return c;case 0:return _=c.type,k=c.pendingProps,k=c.elementType===_?k:Lg(_,k),dj(a,c,_,k,b);case 1:return _=c.type,k=c.pendingProps,k=c.elementType===_?k:Lg(_,k),ij(a,c,_,k,b);case 3:e:{if(lj(c),a===null)throw Error(p(387));_=c.pendingProps,j=c.memoizedState,k=j.element,bh(a,c),gh(c,_,null,b);var _e=c.memoizedState;if(_=_e.element,j.isDehydrated)if(j={element:_,isDehydrated:!1,cache:_e.cache,pendingSuspenseBoundaries:_e.pendingSuspenseBoundaries,transitions:_e.transitions},c.updateQueue.baseState=j,c.memoizedState=j,c.flags&256){k=Ki(Error(p(423)),c),c=mj(a,c,_,b,k);break e}else if(_!==k){k=Ki(Error(p(424)),c),c=mj(a,c,_,b,k);break e}else for(yg=Lf(c.stateNode.containerInfo.firstChild),xg=c,I=!0,zg=null,b=Ch(c,null,_,b),c.child=b;b;)b.flags=b.flags&-3|4096,b=b.sibling;else{if(Ig(),_===k){c=$i(a,c,b);break e}Yi(a,c,_,b)}c=c.child}return c;case 5:return Kh(c),a===null&&Eg(c),_=c.type,k=c.pendingProps,j=a!==null?a.memoizedProps:null,_e=k.children,Ef(_,k)?_e=null:j!==null&&Ef(_,j)&&(c.flags|=32),hj(a,c),Yi(a,c,_e,b),c.child;case 6:return a===null&&Eg(c),null;case 13:return pj(a,c,b);case 4:return Ih(c,c.stateNode.containerInfo),_=c.pendingProps,a===null?c.child=Bh(c,null,_,b):Yi(a,c,_,b),c.child;case 11:return _=c.type,k=c.pendingProps,k=c.elementType===_?k:Lg(_,k),Zi(a,c,_,k,b);case 7:return Yi(a,c,c.pendingProps,b),c.child;case 8:return Yi(a,c,c.pendingProps.children,b),c.child;case 12:return Yi(a,c,c.pendingProps.children,b),c.child;case 10:e:{if(_=c.type._context,k=c.pendingProps,j=c.memoizedProps,_e=k.value,G(Mg,_._currentValue),_._currentValue=_e,j!==null)if(He(j.value,_e)){if(j.children===k.children&&!Wf.current){c=$i(a,c,b);break e}}else for(j=c.child,j!==null&&(j.return=c);j!==null;){var et=j.dependencies;if(et!==null){_e=j.child;for(var nt=et.firstContext;nt!==null;){if(nt.context===_){if(j.tag===1){nt=ch(-1,b&-b),nt.tag=2;var it=j.updateQueue;if(it!==null){it=it.shared;var ft=it.pending;ft===null?nt.next=nt:(nt.next=ft.next,ft.next=nt),it.pending=nt}}j.lanes|=b,nt=j.alternate,nt!==null&&(nt.lanes|=b),Sg(j.return,b,c),et.lanes|=b;break}nt=nt.next}}else if(j.tag===10)_e=j.type===c.type?null:j.child;else if(j.tag===18){if(_e=j.return,_e===null)throw Error(p(341));_e.lanes|=b,et=_e.alternate,et!==null&&(et.lanes|=b),Sg(_e,b,c),_e=j.sibling}else _e=j.child;if(_e!==null)_e.return=j;else for(_e=j;_e!==null;){if(_e===c){_e=null;break}if(j=_e.sibling,j!==null){j.return=_e.return,_e=j;break}_e=_e.return}j=_e}Yi(a,c,k.children,b),c=c.child}return c;case 9:return k=c.type,_=c.pendingProps.children,Tg(c,b),k=Vg(k),_=_(k),c.flags|=1,Yi(a,c,_,b),c.child;case 14:return _=c.type,k=Lg(_,c.pendingProps),k=Lg(_.type,k),aj(a,c,_,k,b);case 15:return cj(a,c,c.type,c.pendingProps,b);case 17:return _=c.type,k=c.pendingProps,k=c.elementType===_?k:Lg(_,k),jj(a,c),c.tag=1,Zf(_)?(a=!0,cg(c)):a=!1,Tg(c,b),ph(c,_,k),rh(c,_,k,b),kj(null,c,_,!0,a,b);case 19:return yj(a,c,b);case 22:return ej(a,c,b)}throw Error(p(156,c.tag))};function Gk(a,c){return ac(a,c)}function al(a,c,b,_){this.tag=a,this.key=b,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=c,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=_,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Bg(a,c,b,_){return new al(a,c,b,_)}function bj(a){return a=a.prototype,!(!a||!a.isReactComponent)}function $k(a){if(typeof a=="function")return bj(a)?1:0;if(a!=null){if(a=a.$$typeof,a===Da)return 11;if(a===Ga)return 14}return 2}function wh(a,c){var b=a.alternate;return b===null?(b=Bg(a.tag,c,a.key,a.mode),b.elementType=a.elementType,b.type=a.type,b.stateNode=a.stateNode,b.alternate=a,a.alternate=b):(b.pendingProps=c,b.type=a.type,b.flags=0,b.subtreeFlags=0,b.deletions=null),b.flags=a.flags&14680064,b.childLanes=a.childLanes,b.lanes=a.lanes,b.child=a.child,b.memoizedProps=a.memoizedProps,b.memoizedState=a.memoizedState,b.updateQueue=a.updateQueue,c=a.dependencies,b.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext},b.sibling=a.sibling,b.index=a.index,b.ref=a.ref,b}function yh(a,c,b,_,k,j){var _e=2;if(_=a,typeof a=="function")bj(a)&&(_e=1);else if(typeof a=="string")_e=5;else e:switch(a){case ya:return Ah(b.children,k,j,c);case za:_e=8,k|=8;break;case Aa:return a=Bg(12,b,c,k|2),a.elementType=Aa,a.lanes=j,a;case Ea:return a=Bg(13,b,c,k),a.elementType=Ea,a.lanes=j,a;case Fa:return a=Bg(19,b,c,k),a.elementType=Fa,a.lanes=j,a;case Ia:return qj(b,k,j,c);default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case Ba:_e=10;break e;case Ca:_e=9;break e;case Da:_e=11;break e;case Ga:_e=14;break e;case Ha:_e=16,_=null;break e}throw Error(p(130,a==null?a:typeof a,""))}return c=Bg(_e,b,c,k),c.elementType=a,c.type=_,c.lanes=j,c}function Ah(a,c,b,_){return a=Bg(7,a,_,c),a.lanes=b,a}function qj(a,c,b,_){return a=Bg(22,a,_,c),a.elementType=Ia,a.lanes=b,a.stateNode={isHidden:!1},a}function xh(a,c,b){return a=Bg(6,a,null,c),a.lanes=b,a}function zh(a,c,b){return c=Bg(4,a.children!==null?a.children:[],a.key,c),c.lanes=b,c.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},c}function bl(a,c,b,_,k){this.tag=c,this.containerInfo=a,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=zc(0),this.expirationTimes=zc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zc(0),this.identifierPrefix=_,this.onRecoverableError=k,this.mutableSourceEagerHydrationData=null}function cl(a,c,b,_,k,j,_e,et,nt){return a=new bl(a,c,b,et,nt),c===1?(c=1,j===!0&&(c|=8)):c=0,j=Bg(3,null,null,c),a.current=j,j.stateNode=a,j.memoizedState={element:_,isDehydrated:b,cache:null,transitions:null,pendingSuspenseBoundaries:null},ah(j),a}function dl(a,c,b){var _=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:wa,key:_==null?null:""+_,children:a,containerInfo:c,implementation:b}}function el(a){if(!a)return Vf;a=a._reactInternals;e:{if(Vb(a)!==a||a.tag!==1)throw Error(p(170));var c=a;do{switch(c.tag){case 3:c=c.stateNode.context;break e;case 1:if(Zf(c.type)){c=c.stateNode.__reactInternalMemoizedMergedChildContext;break e}}c=c.return}while(c!==null);throw Error(p(171))}if(a.tag===1){var b=a.type;if(Zf(b))return bg(a,b,c)}return c}function fl(a,c,b,_,k,j,_e,et,nt){return a=cl(b,_,!0,a,k,j,_e,et,nt),a.context=el(null),b=a.current,_=L(),k=lh(b),j=ch(_,k),j.callback=c??null,dh(b,j,k),a.current.lanes=k,Ac(a,k,_),Ek(a,_),a}function gl(a,c,b,_){var k=c.current,j=L(),_e=lh(k);return b=el(b),c.context===null?c.context=b:c.pendingContext=b,c=ch(j,_e),c.payload={element:a},_=_===void 0?null:_,_!==null&&(c.callback=_),a=dh(k,c,_e),a!==null&&(mh(a,k,_e,j),eh(a,k,_e)),_e}function hl(a){if(a=a.current,!a.child)return null;switch(a.child.tag){case 5:return a.child.stateNode;default:return a.child.stateNode}}function il(a,c){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var b=a.retryLane;a.retryLane=b!==0&&b<c?b:c}}function jl(a,c){il(a,c),(a=a.alternate)&&il(a,c)}function kl(){return null}var ll=typeof reportError=="function"?reportError:function(a){console.error(a)};function ml(a){this._internalRoot=a}nl.prototype.render=ml.prototype.render=function(a){var c=this._internalRoot;if(c===null)throw Error(p(409));gl(a,c,null,null)};nl.prototype.unmount=ml.prototype.unmount=function(){var a=this._internalRoot;if(a!==null){this._internalRoot=null;var c=a.containerInfo;Sk(function(){gl(null,a,null,null)}),c[uf]=null}};function nl(a){this._internalRoot=a}nl.prototype.unstable_scheduleHydration=function(a){if(a){var c=Hc();a={blockedOn:null,target:a,priority:c};for(var b=0;b<Qc.length&&c!==0&&c<Qc[b].priority;b++);Qc.splice(b,0,a),b===0&&Vc(a)}};function ol(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11)}function pl(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11&&(a.nodeType!==8||a.nodeValue!==" react-mount-point-unstable "))}function ql(){}function rl(a,c,b,_,k){if(k){if(typeof _=="function"){var j=_;_=function(){var it=hl(_e);j.call(it)}}var _e=fl(c,_,a,0,null,!1,!1,"",ql);return a._reactRootContainer=_e,a[uf]=_e.current,sf(a.nodeType===8?a.parentNode:a),Sk(),_e}for(;k=a.lastChild;)a.removeChild(k);if(typeof _=="function"){var et=_;_=function(){var it=hl(nt);et.call(it)}}var nt=cl(a,0,!1,null,null,!1,!1,"",ql);return a._reactRootContainer=nt,a[uf]=nt.current,sf(a.nodeType===8?a.parentNode:a),Sk(function(){gl(c,nt,b,_)}),nt}function sl(a,c,b,_,k){var j=b._reactRootContainer;if(j){var _e=j;if(typeof k=="function"){var et=k;k=function(){var nt=hl(_e);et.call(nt)}}gl(c,_e,a,k)}else _e=rl(b,c,a,k,_);return hl(_e)}Ec=function(a){switch(a.tag){case 3:var c=a.stateNode;if(c.current.memoizedState.isDehydrated){var b=tc(c.pendingLanes);b!==0&&(Cc(c,b|1),Ek(c,B()),!(K&6)&&(Hj=B()+500,jg()))}break;case 13:Sk(function(){var _=Zg(a,1);if(_!==null){var k=L();mh(_,a,1,k)}}),jl(a,1)}};Fc=function(a){if(a.tag===13){var c=Zg(a,134217728);if(c!==null){var b=L();mh(c,a,134217728,b)}jl(a,134217728)}};Gc=function(a){if(a.tag===13){var c=lh(a),b=Zg(a,c);if(b!==null){var _=L();mh(b,a,c,_)}jl(a,c)}};Hc=function(){return C};Ic=function(a,c){var b=C;try{return C=a,c()}finally{C=b}};yb=function(a,c,b){switch(c){case"input":if(bb(a,b),c=b.name,b.type==="radio"&&c!=null){for(b=a;b.parentNode;)b=b.parentNode;for(b=b.querySelectorAll("input[name="+JSON.stringify(""+c)+'][type="radio"]'),c=0;c<b.length;c++){var _=b[c];if(_!==a&&_.form===a.form){var k=Db(_);if(!k)throw Error(p(90));Wa(_),bb(_,k)}}}break;case"textarea":ib(a,b);break;case"select":c=b.value,c!=null&&fb(a,!!b.multiple,c,!1)}};Gb=Rk;Hb=Sk;var tl={usingClientEntryPoint:!1,Events:[Cb,ue,Db,Eb,Fb,Rk]},ul={findFiberByHostInstance:Wc,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},vl={bundleType:ul.bundleType,version:ul.version,rendererPackageName:ul.rendererPackageName,rendererConfig:ul.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ua.ReactCurrentDispatcher,findHostInstanceByFiber:function(a){return a=Zb(a),a===null?null:a.stateNode},findFiberByHostInstance:ul.findFiberByHostInstance||kl,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var wl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!wl.isDisabled&&wl.supportsFiber)try{kc=wl.inject(vl),lc=wl}catch{}}reactDom_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tl;reactDom_production_min.createPortal=function(a,c){var b=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ol(c))throw Error(p(200));return dl(a,c,null,b)};reactDom_production_min.createRoot=function(a,c){if(!ol(a))throw Error(p(299));var b=!1,_="",k=ll;return c!=null&&(c.unstable_strictMode===!0&&(b=!0),c.identifierPrefix!==void 0&&(_=c.identifierPrefix),c.onRecoverableError!==void 0&&(k=c.onRecoverableError)),c=cl(a,1,!1,null,null,b,!1,_,k),a[uf]=c.current,sf(a.nodeType===8?a.parentNode:a),new ml(c)};reactDom_production_min.findDOMNode=function(a){if(a==null)return null;if(a.nodeType===1)return a;var c=a._reactInternals;if(c===void 0)throw typeof a.render=="function"?Error(p(188)):(a=Object.keys(a).join(","),Error(p(268,a)));return a=Zb(c),a=a===null?null:a.stateNode,a};reactDom_production_min.flushSync=function(a){return Sk(a)};reactDom_production_min.hydrate=function(a,c,b){if(!pl(c))throw Error(p(200));return sl(null,a,c,!0,b)};reactDom_production_min.hydrateRoot=function(a,c,b){if(!ol(a))throw Error(p(405));var _=b!=null&&b.hydratedSources||null,k=!1,j="",_e=ll;if(b!=null&&(b.unstable_strictMode===!0&&(k=!0),b.identifierPrefix!==void 0&&(j=b.identifierPrefix),b.onRecoverableError!==void 0&&(_e=b.onRecoverableError)),c=fl(c,null,a,1,b??null,k,!1,j,_e),a[uf]=c.current,sf(a),_)for(a=0;a<_.length;a++)b=_[a],k=b._getVersion,k=k(b._source),c.mutableSourceEagerHydrationData==null?c.mutableSourceEagerHydrationData=[b,k]:c.mutableSourceEagerHydrationData.push(b,k);return new nl(c)};reactDom_production_min.render=function(a,c,b){if(!pl(c))throw Error(p(200));return sl(null,a,c,!1,b)};reactDom_production_min.unmountComponentAtNode=function(a){if(!pl(a))throw Error(p(40));return a._reactRootContainer?(Sk(function(){sl(null,null,a,!1,function(){a._reactRootContainer=null,a[uf]=null})}),!0):!1};reactDom_production_min.unstable_batchedUpdates=Rk;reactDom_production_min.unstable_renderSubtreeIntoContainer=function(a,c,b,_){if(!pl(b))throw Error(p(200));if(a==null||a._reactInternals===void 0)throw Error(p(38));return sl(a,c,b,!1,_)};reactDom_production_min.version="18.2.0-next-9e3b772b8-20220608";function checkDCE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(checkDCE)}catch(a){console.error(a)}}checkDCE(),reactDom.exports=reactDom_production_min;var reactDomExports=reactDom.exports;const ReactDOM=getDefaultExportFromCjs$1(reactDomExports);var createRoot,m=reactDomExports;createRoot=m.createRoot,m.hydrateRoot;const RoomParticipant$1={name:"LS-Room-Participant",sourceType:"RoomParticipant",props:{isMuted:{type:Boolean,required:!1,default:!1},volume:{type:Number,required:!1,default:1}},useSource(a,c){return a.find(b=>isMatch(b.props,c.sourceProps))},create({onUpdate:a,onNewSource:c,onRemove:b},_){const k=document.createElement("div"),j=getProject(CoreContext.state.activeProjectId),_e=getProjectRoom(CoreContext.state.activeProjectId);Object.assign(k.style,{position:"relative"});let et,nt=_;const it=(St,yt)=>{const _t=St/yt.width;return _t>=.5?3:_t>.25?2:_t>.15?1:0},ft=({props:St,source:yt})=>{var zt,Ht,ct;const _t=reactExports.useRef(),{volume:Tt=1,isHidden:gt=!1}=St||{},[ht,Et]=reactExports.useState(0),Bt=(yt==null?void 0:yt.id)===(_e==null?void 0:_e.participantId)||((zt=yt==null?void 0:yt.props)==null?void 0:zt.participantId)===(_e==null?void 0:_e.participantId)||(St==null?void 0:St.isMuted),qt=!(St!=null&&St.isHidden)&&((Ht=yt==null?void 0:yt.props)==null?void 0:Ht.videoEnabled);return reactExports.useEffect(()=>{_t.current&&(_t.current.play().catch(dt=>{document.addEventListener("click",()=>{var lt;return(lt=_t.current)==null?void 0:lt.play()},{once:!0})}),yt!=null&&yt.value&&(yt==null?void 0:yt.value)!==_t.current.srcObject?_t.current.srcObject=yt==null?void 0:yt.value:yt!=null&&yt.value||(_t.current.srcObject=null))},[_t.current,yt==null?void 0:yt.value]),reactExports.useEffect(()=>{!St&&_t.current&&(_t.current.srcObject=null,_t.current=null)},[St]),reactExports.useLayoutEffect(()=>{if(!_t.current)return;const dt=()=>{const kt=_t.current;kt&&Et(it(kt.clientWidth,{width:j.compositor.getRoot().props.size.x,height:j.compositor.getRoot().props.size.y}))},lt=new ResizeObserver(kt=>{dt()});return dt(),lt==null||lt.observe(_t.current),()=>{_t.current&&(lt==null||lt.unobserve(_t.current),_t.current.srcObject=null)}},[_t.current,j]),reactExports.useEffect(()=>{_t.current&&(_t.current.volume=Tt)},[_t.current,Tt]),React.createElement("div",{style:{position:"relative",display:"flex",height:"100%",width:"100%"}},React.createElement("div",{style:{background:"#222",position:"absolute",height:"100%",width:"100%",fontSize:"43px",color:"rgba(255,255,255,0.6)",display:"flex",alignItems:"center",justifyContent:"center",opacity:qt?"0":"1"}},(yt==null?void 0:yt.props.displayName)&&React.createElement("div",{style:{borderRadius:"50%",background:"#555",width:"70px",height:"70px",textTransform:"uppercase",display:"flex",alignItems:"center",justifyContent:"center",lineHeight:"1em"}},(yt==null?void 0:yt.props.displayName.slice(0,1))||"")),React.createElement("div",{style:{position:"relative",display:"flex",height:"100%",width:"100%",...!!((ct=yt==null?void 0:yt.props)!=null&&ct.mirrored)&&{transform:"scaleX(-1)"}}},React.createElement("video",{ref:_t,autoPlay:!0,muted:Bt,disablePictureInPicture:!0,playsInline:!0,style:{left:"50%",top:"50%",position:"relative",transform:"translate3d(-50%, -50%, 0)",height:"100%",opacity:qt?"1":"0",objectFit:(yt==null?void 0:yt.props.type)==="screen"?"contain":"cover",background:"rgba(0,0,0,0.6)"}})),(yt==null?void 0:yt.props.displayName)&&React.createElement("div",{className:"NameBannerContainer",style:{width:"100%",height:"100%",position:"absolute"}},React.createElement("div",{className:"NameBanner","data-size":ht,style:{padding:"12px 30px",width:"fit-content",height:"fit-content",top:"100%",transform:"translateY(-100%)",left:0}},React.createElement("div",{className:"NameBanner-body"},yt.props.displayName))))},pt=createRoot(k),mt=()=>pt.render(React.createElement(ft,{source:et,props:nt}));return a(St=>{nt=St,mt()}),c(St=>{et=St,mt()}),b(St=>{nt=St,mt()}),{root:k}}},Square={name:"LS-Square",props:{color:{default:"green"}},create({onUpdate:a}){const c=document.createElement("div");return a(({color:b})=>{Object.assign(c.style,{width:"100%",height:"100%",background:b||"red"})}),{root:c}}},Image$1={name:"LS-Image",props:{src:{},fit:{}},create({onUpdate:a}){const c=document.createElement("img");return a(({src:b,fit:_})=>{c.setAttribute("src",b),Object.assign(c.style,{width:"100%",height:"100%",objectFit:_})}),{root:c}}},Element={name:"Element",sourceType:"Element",create({onUpdate:a},{tagName:c}){const b=document.createElement(c);return a(({tagName:_,attributes:k={},fields:j={}})=>{_==="img"?(b==null?void 0:b.src)!==k.src&&Object.keys(k).forEach(_e=>{b.setAttribute(_e,k[_e])}):Object.keys(k).forEach(_e=>{b.setAttribute(_e,k[_e])}),Object.keys(j).forEach(_e=>{Object.assign(b[_e],j[_e])})}),{root:b}}},Video={name:"LS-Video",sourceType:"LS-Video",create({onUpdate:a,onEvent:c,onRemove:b}){b(()=>{clearInterval(k)});const _=document.createElement("video");let k;return a(({attributes:j={},fields:_e={},sourceProps:et={},id:nt})=>{(_.src!==j.src||_.id!==j.id&&j.id)&&(k&&clearInterval(k),Object.keys(j).forEach(it=>{_.setAttribute(it,j[it])}),_.onloadedmetadata=()=>{j.muted?(_.muted=!0,_.play()):_.muted=!1},k=setInterval(()=>{if(_.duration){const it=_.duration-_.currentTime;trigger$1("VideoTimeUpdate",{category:nt,id:et==null?void 0:et.id,time:Math.floor(it)})}},1e3),_.loop=!!j.loop,_.onended=()=>{k&&clearInterval(k),trigger$1("VideoEnded",{id:et==null?void 0:et.id,category:nt})},Object.keys(_e).forEach(it=>{Object.assign(_[it],_e[it])}))}),{root:_}}},Banner$1={name:"LS-Banner",sourceType:"Banner",props:{bannerId:{type:String,required:!0}},useSource(a,c){return a.find(b=>b.id===c.bannerId)},create({onUpdate:a,onNewSource:c},b){const _=document.createElement("div");let k,j,_e;const et=({currentSource:ft,latestSource:pt})=>{const[mt,St]=reactExports.useState(!1),{headerText:yt,bodyText:_t}=(pt==null?void 0:pt.value)||{};return reactExports.useEffect(()=>{window.setTimeout(()=>{St(!!ft)}),ft||St(!1)},[ft]),React.createElement("div",{className:"BannerContainer",style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",display:"flex",flexDirection:"row",justifyContent:"flex-start",alignItems:"flex-end",transition:"200ms ease all",...mt?{zIndex:2,opacity:1,transform:"translateX(0)"}:{zIndex:1,opacity:0,transform:"translateX(-200px)"}}},React.createElement("div",{className:"Banner",style:{padding:10,background:"orange",width:"fit-content",height:"fit-content",maxWidth:"84%",position:"relative"}},yt&&React.createElement("div",{className:"Banner-header",style:{marginBottom:6}},yt),_t&&React.createElement("div",{className:"Banner-body"},_t)))},nt=createRoot(_),it=()=>nt.render(React.createElement(React.Fragment,null,_e&&_e.id!==j.id&&React.createElement(et,{key:_e==null?void 0:_e.id,currentSource:null,latestSource:_e}),React.createElement(et,{key:j==null?void 0:j.id,currentSource:k,latestSource:j})));return a(()=>{it()}),c(ft=>{_e=k,k=ft,k&&(j=k),it()}),{root:_}}};function _extends(){return _extends=Object.assign?Object.assign.bind():function(a){for(var c=1;c<arguments.length;c++){var b=arguments[c];for(var _ in b)Object.prototype.hasOwnProperty.call(b,_)&&(a[_]=b[_])}return a},_extends.apply(this,arguments)}function _objectWithoutPropertiesLoose(a,c){if(a==null)return{};var b={},_=Object.keys(a),k,j;for(j=0;j<_.length;j++)k=_[j],!(c.indexOf(k)>=0)&&(b[k]=a[k]);return b}function _setPrototypeOf(a,c){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(_,k){return _.__proto__=k,_},_setPrototypeOf(a,c)}function _inheritsLoose(a,c){a.prototype=Object.create(c.prototype),a.prototype.constructor=a,_setPrototypeOf(a,c)}function hasClass(a,c){return a.classList?!!c&&a.classList.contains(c):(" "+(a.className.baseVal||a.className)+" ").indexOf(" "+c+" ")!==-1}function addClass(a,c){a.classList?a.classList.add(c):hasClass(a,c)||(typeof a.className=="string"?a.className=a.className+" "+c:a.setAttribute("class",(a.className&&a.className.baseVal||"")+" "+c))}function replaceClassName(a,c){return a.replace(new RegExp("(^|\\s)"+c+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function removeClass$1(a,c){a.classList?a.classList.remove(c):typeof a.className=="string"?a.className=replaceClassName(a.className,c):a.setAttribute("class",replaceClassName(a.className&&a.className.baseVal||"",c))}const config={disabled:!1},TransitionGroupContext=React.createContext(null);var forceReflow=function a(c){return c.scrollTop},UNMOUNTED="unmounted",EXITED="exited",ENTERING="entering",ENTERED="entered",EXITING="exiting",Transition=function(a){_inheritsLoose(c,a);function c(_,k){var j;j=a.call(this,_,k)||this;var _e=k,et=_e&&!_e.isMounting?_.enter:_.appear,nt;return j.appearStatus=null,_.in?et?(nt=EXITED,j.appearStatus=ENTERING):nt=ENTERED:_.unmountOnExit||_.mountOnEnter?nt=UNMOUNTED:nt=EXITED,j.state={status:nt},j.nextCallback=null,j}c.getDerivedStateFromProps=function(k,j){var _e=k.in;return _e&&j.status===UNMOUNTED?{status:EXITED}:null};var b=c.prototype;return b.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},b.componentDidUpdate=function(k){var j=null;if(k!==this.props){var _e=this.state.status;this.props.in?_e!==ENTERING&&_e!==ENTERED&&(j=ENTERING):(_e===ENTERING||_e===ENTERED)&&(j=EXITING)}this.updateStatus(!1,j)},b.componentWillUnmount=function(){this.cancelNextCallback()},b.getTimeouts=function(){var k=this.props.timeout,j,_e,et;return j=_e=et=k,k!=null&&typeof k!="number"&&(j=k.exit,_e=k.enter,et=k.appear!==void 0?k.appear:_e),{exit:j,enter:_e,appear:et}},b.updateStatus=function(k,j){if(k===void 0&&(k=!1),j!==null)if(this.cancelNextCallback(),j===ENTERING){if(this.props.unmountOnExit||this.props.mountOnEnter){var _e=this.props.nodeRef?this.props.nodeRef.current:ReactDOM.findDOMNode(this);_e&&forceReflow(_e)}this.performEnter(k)}else this.performExit();else this.props.unmountOnExit&&this.state.status===EXITED&&this.setState({status:UNMOUNTED})},b.performEnter=function(k){var j=this,_e=this.props.enter,et=this.context?this.context.isMounting:k,nt=this.props.nodeRef?[et]:[ReactDOM.findDOMNode(this),et],it=nt[0],ft=nt[1],pt=this.getTimeouts(),mt=et?pt.appear:pt.enter;if(!k&&!_e||config.disabled){this.safeSetState({status:ENTERED},function(){j.props.onEntered(it)});return}this.props.onEnter(it,ft),this.safeSetState({status:ENTERING},function(){j.props.onEntering(it,ft),j.onTransitionEnd(mt,function(){j.safeSetState({status:ENTERED},function(){j.props.onEntered(it,ft)})})})},b.performExit=function(){var k=this,j=this.props.exit,_e=this.getTimeouts(),et=this.props.nodeRef?void 0:ReactDOM.findDOMNode(this);if(!j||config.disabled){this.safeSetState({status:EXITED},function(){k.props.onExited(et)});return}this.props.onExit(et),this.safeSetState({status:EXITING},function(){k.props.onExiting(et),k.onTransitionEnd(_e.exit,function(){k.safeSetState({status:EXITED},function(){k.props.onExited(et)})})})},b.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},b.safeSetState=function(k,j){j=this.setNextCallback(j),this.setState(k,j)},b.setNextCallback=function(k){var j=this,_e=!0;return this.nextCallback=function(et){_e&&(_e=!1,j.nextCallback=null,k(et))},this.nextCallback.cancel=function(){_e=!1},this.nextCallback},b.onTransitionEnd=function(k,j){this.setNextCallback(j);var _e=this.props.nodeRef?this.props.nodeRef.current:ReactDOM.findDOMNode(this),et=k==null&&!this.props.addEndListener;if(!_e||et){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var nt=this.props.nodeRef?[this.nextCallback]:[_e,this.nextCallback],it=nt[0],ft=nt[1];this.props.addEndListener(it,ft)}k!=null&&setTimeout(this.nextCallback,k)},b.render=function(){var k=this.state.status;if(k===UNMOUNTED)return null;var j=this.props,_e=j.children;j.in,j.mountOnEnter,j.unmountOnExit,j.appear,j.enter,j.exit,j.timeout,j.addEndListener,j.onEnter,j.onEntering,j.onEntered,j.onExit,j.onExiting,j.onExited,j.nodeRef;var et=_objectWithoutPropertiesLoose(j,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return React.createElement(TransitionGroupContext.Provider,{value:null},typeof _e=="function"?_e(k,et):React.cloneElement(React.Children.only(_e),et))},c}(React.Component);Transition.contextType=TransitionGroupContext;Transition.propTypes={};function noop(){}Transition.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:noop,onEntering:noop,onEntered:noop,onExit:noop,onExiting:noop,onExited:noop};Transition.UNMOUNTED=UNMOUNTED;Transition.EXITED=EXITED;Transition.ENTERING=ENTERING;Transition.ENTERED=ENTERED;Transition.EXITING=EXITING;const Transition$1=Transition;var _addClass=function a(c,b){return c&&b&&b.split(" ").forEach(function(_){return addClass(c,_)})},removeClass=function a(c,b){return c&&b&&b.split(" ").forEach(function(_){return removeClass$1(c,_)})},CSSTransition=function(a){_inheritsLoose(c,a);function c(){for(var _,k=arguments.length,j=new Array(k),_e=0;_e<k;_e++)j[_e]=arguments[_e];return _=a.call.apply(a,[this].concat(j))||this,_.appliedClasses={appear:{},enter:{},exit:{}},_.onEnter=function(et,nt){var it=_.resolveArguments(et,nt),ft=it[0],pt=it[1];_.removeClasses(ft,"exit"),_.addClass(ft,pt?"appear":"enter","base"),_.props.onEnter&&_.props.onEnter(et,nt)},_.onEntering=function(et,nt){var it=_.resolveArguments(et,nt),ft=it[0],pt=it[1],mt=pt?"appear":"enter";_.addClass(ft,mt,"active"),_.props.onEntering&&_.props.onEntering(et,nt)},_.onEntered=function(et,nt){var it=_.resolveArguments(et,nt),ft=it[0],pt=it[1],mt=pt?"appear":"enter";_.removeClasses(ft,mt),_.addClass(ft,mt,"done"),_.props.onEntered&&_.props.onEntered(et,nt)},_.onExit=function(et){var nt=_.resolveArguments(et),it=nt[0];_.removeClasses(it,"appear"),_.removeClasses(it,"enter"),_.addClass(it,"exit","base"),_.props.onExit&&_.props.onExit(et)},_.onExiting=function(et){var nt=_.resolveArguments(et),it=nt[0];_.addClass(it,"exit","active"),_.props.onExiting&&_.props.onExiting(et)},_.onExited=function(et){var nt=_.resolveArguments(et),it=nt[0];_.removeClasses(it,"exit"),_.addClass(it,"exit","done"),_.props.onExited&&_.props.onExited(et)},_.resolveArguments=function(et,nt){return _.props.nodeRef?[_.props.nodeRef.current,et]:[et,nt]},_.getClassNames=function(et){var nt=_.props.classNames,it=typeof nt=="string",ft=it&&nt?nt+"-":"",pt=it?""+ft+et:nt[et],mt=it?pt+"-active":nt[et+"Active"],St=it?pt+"-done":nt[et+"Done"];return{baseClassName:pt,activeClassName:mt,doneClassName:St}},_}var b=c.prototype;return b.addClass=function(k,j,_e){var et=this.getClassNames(j)[_e+"ClassName"],nt=this.getClassNames("enter"),it=nt.doneClassName;j==="appear"&&_e==="done"&&it&&(et+=" "+it),_e==="active"&&k&&forceReflow(k),et&&(this.appliedClasses[j][_e]=et,_addClass(k,et))},b.removeClasses=function(k,j){var _e=this.appliedClasses[j],et=_e.base,nt=_e.active,it=_e.done;this.appliedClasses[j]={},et&&removeClass(k,et),nt&&removeClass(k,nt),it&&removeClass(k,it)},b.render=function(){var k=this.props;k.classNames;var j=_objectWithoutPropertiesLoose(k,["classNames"]);return React.createElement(Transition$1,_extends({},j,{onEnter:this.onEnter,onEntered:this.onEntered,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}))},c}(React.Component);CSSTransition.defaultProps={classNames:""};CSSTransition.propTypes={};const CSSTransition$1=CSSTransition;var _leaveRenders,_enterRenders;function areChildrenDifferent(a,c){return!(a===c||React.isValidElement(a)&&React.isValidElement(c)&&a.key!=null&&a.key===c.key)}var modes={out:"out-in",in:"in-out"},callHook=function a(c,b,_){return function(){var k;c.props[b]&&(k=c.props)[b].apply(k,arguments),_()}},leaveRenders=(_leaveRenders={},_leaveRenders[modes.out]=function(a){var c=a.current,b=a.changeState;return React.cloneElement(c,{in:!1,onExited:callHook(c,"onExited",function(){b(ENTERING,null)})})},_leaveRenders[modes.in]=function(a){var c=a.current,b=a.changeState,_=a.children;return[c,React.cloneElement(_,{in:!0,onEntered:callHook(_,"onEntered",function(){b(ENTERING)})})]},_leaveRenders),enterRenders=(_enterRenders={},_enterRenders[modes.out]=function(a){var c=a.children,b=a.changeState;return React.cloneElement(c,{in:!0,onEntered:callHook(c,"onEntered",function(){b(ENTERED,React.cloneElement(c,{in:!0}))})})},_enterRenders[modes.in]=function(a){var c=a.current,b=a.children,_=a.changeState;return[React.cloneElement(c,{in:!1,onExited:callHook(c,"onExited",function(){_(ENTERED,React.cloneElement(b,{in:!0}))})}),React.cloneElement(b,{in:!0})]},_enterRenders),SwitchTransition=function(a){_inheritsLoose(c,a);function c(){for(var _,k=arguments.length,j=new Array(k),_e=0;_e<k;_e++)j[_e]=arguments[_e];return _=a.call.apply(a,[this].concat(j))||this,_.state={status:ENTERED,current:null},_.appeared=!1,_.changeState=function(et,nt){nt===void 0&&(nt=_.state.current),_.setState({status:et,current:nt})},_}var b=c.prototype;return b.componentDidMount=function(){this.appeared=!0},c.getDerivedStateFromProps=function(k,j){return k.children==null?{current:null}:j.status===ENTERING&&k.mode===modes.in?{status:ENTERING}:j.current&&areChildrenDifferent(j.current,k.children)?{status:EXITING}:{current:React.cloneElement(k.children,{in:!0})}},b.render=function(){var k=this.props,j=k.children,_e=k.mode,et=this.state,nt=et.status,it=et.current,ft={children:j,current:it,changeState:this.changeState,status:nt},pt;switch(nt){case ENTERING:pt=enterRenders[_e](ft);break;case EXITING:pt=leaveRenders[_e](ft);break;case ENTERED:pt=it}return React.createElement(TransitionGroupContext.Provider,{value:{isMounting:!this.appeared}},pt)},c}(React.Component);SwitchTransition.propTypes={};SwitchTransition.defaultProps={mode:modes.out};const SwitchTransition$1=SwitchTransition,Animations={"fade-in":".fade-in{-webkit-animation:fade-in;animation:fade-in}@-webkit-keyframes fade-in{0%{opacity:0}100%{opacity:1}}@keyframes fade-in{0%{opacity:0}100%{opacity:1}}","fade-out":".fade-out{-webkit-animation:fade-out;animation:fade-out}@-webkit-keyframes fade-out{0%{opacity:1}100%{opacity:0}}@keyframes fade-out{0%{opacity:1}100%{opacity:0}}","slide-in-blurred-top":".slide-in-blurred-top{-webkit-animation:slide-in-blurred-top .6s cubic-bezier(.23,1.000,.32,1.000) both;animation:slide-in-blurred-top .6s cubic-bezier(.23,1.000,.32,1.000) both}@-webkit-keyframes slide-in-blurred-top{0%{-webkit-transform:translateY(-1000px) scaleY(2.5) scaleX(.2);transform:translateY(-1000px) scaleY(2.5) scaleX(.2);-webkit-transform-origin:50% 0;transform-origin:50% 0;-webkit-filter:blur(40px);filter:blur(40px);opacity:0}100%{-webkit-transform:translateY(0) scaleY(1) scaleX(1);transform:translateY(0) scaleY(1) scaleX(1);-webkit-transform-origin:50% 50%;transform-origin:50% 50%;-webkit-filter:blur(0);filter:blur(0);opacity:1}}@keyframes slide-in-blurred-top{0%{-webkit-transform:translateY(-1000px) scaleY(2.5) scaleX(.2);transform:translateY(-1000px) scaleY(2.5) scaleX(.2);-webkit-transform-origin:50% 0;transform-origin:50% 0;-webkit-filter:blur(40px);filter:blur(40px);opacity:0}100%{-webkit-transform:translateY(0) scaleY(1) scaleX(1);transform:translateY(0) scaleY(1) scaleX(1);-webkit-transform-origin:50% 50%;transform-origin:50% 50%;-webkit-filter:blur(0);filter:blur(0);opacity:1}}","slide-in-left":".slide-in-left{-webkit-animation:slide-in-left .5s cubic-bezier(.25,.46,.45,.94) both;animation:slide-in-left .5s cubic-bezier(.25,.46,.45,.94) both}@-webkit-keyframes slide-in-left{0%{-webkit-transform:translateX(-1000px);transform:translateX(-1000px);opacity:0}100%{-webkit-transform:translateX(0);transform:translateX(0);opacity:1}}@keyframes slide-in-left{0%{-webkit-transform:translateX(-1000px);transform:translateX(-1000px);opacity:0}100%{-webkit-transform:translateX(0);transform:translateX(0);opacity:1}}","slide-out-left":".slide-out-left{-webkit-animation:slide-out-left .5s cubic-bezier(.55,.085,.68,.53) both;animation:slide-out-left .5s cubic-bezier(.55,.085,.68,.53) both}@-webkit-keyframes slide-out-left{0%{-webkit-transform:translateX(0);transform:translateX(0);opacity:1}100%{-webkit-transform:translateX(-1000px);transform:translateX(-1000px);opacity:0}}@keyframes slide-out-left{0%{-webkit-transform:translateX(0);transform:translateX(0);opacity:1}100%{-webkit-transform:translateX(-1000px);transform:translateX(-1000px);opacity:0}}"},APIKitAnimation=a=>{const{enter:c,exit:b,children:_,tag:k="div",direction:j="normal",duration:_e=500,id:et,type:nt}=a,it=et?`${nt}-${et}`:`${nt}-api-kit-animation`;return React.createElement("div",{style:{height:"100%",width:"100%"}},React.createElement("style",{dangerouslySetInnerHTML:{__html:renderStyle(nt,c,b,_e,j)}}),React.createElement(SwitchTransition$1,{mode:"out-in"},React.createElement(CSSTransition$1,{key:it,addEndListener:(ft,pt)=>{ft.addEventListener("transitionend",pt,!1)},classNames:{enter:`${nt}-default-enter`,enterActive:c,exit:`${nt}-default-leave`,exitActive:b},timeout:_e},React.createElement("div",{style:{height:"100%",width:"100%"}},_))))},renderStyle=(a,c,b,_,k)=>`
        body {
          margin: 0;
          padding: 0;
        }
        
        ${Animations[c]}
        
        ${Animations[b]}

        .${a}-transition {
          transition: opacity ${_}ms ease-out};
        }

        .${a}-default-enter {
          opacity: 0;
        }

        .${a}-default-enter.${c} {
          animation-direction: ${k};
          animation-duration: ${_/1e3}s;
          animation-fill-mode: both;
          animation-timing-function: ease-out;
        }

        .${a}-default-leave {
          opacity: 1;
        }

        .${a}-default-leave.${b} {
          animation-direction: ${k};
          animation-duration: ${_/1e3}s;
          animation-timing-function: ease-out;
          animation-fill-mode: both;
        }
        `,APIKitAnimation$1=APIKitAnimation;var APIKitAnimationTypes=(a=>(a.FADE_IN="fade-in",a.FADE_OUT="fade-out",a.SLIDE_IN_BLURRED_TOP="slide-in-blurred-top",a.SLIDE_IN_LEFT="slide-in-left",a.SLIDE_OUT_LEFT="slide-out-left",a))(APIKitAnimationTypes||{});const Logo$1={name:"LS-Logo",sourceType:"Logo",create({onUpdate:a},{sourceProps:c}){const b=document.createElement("div"),k=getProject(CoreContext.state.activeProjectId).compositor.getRoot(),{x:j}=k.props.size,_e=(j??1280)/1920,et=pt=>pt*_e+"px",nt=({source:pt})=>{var Bt;const{src:mt,meta:St}=(pt==null?void 0:pt.sourceProps)||{},{id:yt}=pt||{},[_t,Tt]=React.useState(!1);reactExports.useEffect(()=>{Tt(!1)},[yt]);const{offsetX:gt=40,offsetY:ht=40,height:Et=135,width:At=240}=(St==null?void 0:St.style)||{};return React.createElement(APIKitAnimation$1,{type:"logo",id:yt,enter:APIKitAnimationTypes.FADE_IN,exit:APIKitAnimationTypes.FADE_OUT,duration:400},React.createElement("div",{style:{opacity:_t?1:0,width:"100%",height:"100%"},className:"logo-transition"},mt&&React.createElement("div",{className:"logo wrapper",style:{padding:`${et(ht)} ${et(gt)}`}},React.createElement("img",{style:{height:"100%",width:"100%",maxHeight:Et?et(Et):"none",maxWidth:At?et(At):"none",...(Bt=c==null?void 0:c.meta)==null?void 0:Bt.style,...St==null?void 0:St.style},src:mt,onLoad:()=>Tt(!0)}))))},it=createRoot(b),ft=pt=>it.render(React.createElement(nt,{source:pt}));return a(pt=>{ft({...pt})}),{root:b}}},Iframe=({url:a,allowFullScreen:c,position:b,display:_,height:k,width:j,overflow:_e,styles:et,onLoad:nt,id:it,frameBorder:ft,className:pt,name:mt,target:St,iframeRef:yt,children:_t,src:Tt})=>{const gt=Object.assign({src:Tt||a,target:St||null,style:{position:b||null,display:_||"block",overflow:_e||null,...et},name:mt||null,className:pt||null,id:it||null,onLoad:nt||null,height:k||"100%",width:j||"100%",allow:"autoplay"});let ht=Object.create(null);for(let Et of Object.keys(gt))gt[Et]!=null&&(ht[Et]=gt[Et]);for(let Et of Object.keys(ht.style))ht.style[Et]==null&&delete ht.style[Et];if(c)if("allow"in ht){const Et=ht.allow.replace("fullscreen","");ht.allow=`fullscreen ${Et.trim()}`.trim()}else ht.allow="fullscreen";return ft>=0&&(ht.style.hasOwnProperty("border")||(ht.style.border=ft)),React.createElement(React.Fragment,null,_t?React.createElement("iframe",{ref:yt,...ht},_t):React.createElement("iframe",{ref:yt,...ht}))},Iframe$1=Iframe,Overlay={name:"LS-Overlay",sourceType:"Overlay",create({onUpdate:a,onRemove:c},{sourceProps:b}){c(()=>{clearInterval(j)});const _=document.createElement("div"),k=getProject(CoreContext.state.activeProjectId).role;let j;const _e=({source:mt,setStartAnimation:St})=>{const{src:yt,meta:_t,height:Tt,width:gt}=(mt==null?void 0:mt.sourceProps)||{},ht=React.useRef(null);reactExports.useEffect(()=>{ht.current&&(ht.current.style.removeProperty("transformOrigin"),ht.current.style.removeProperty("transform"))},[yt]);const Et=()=>{if(ht.current){const Bt=getProject(CoreContext.state.activeProjectId).compositor.getRoot(),{x:qt,y:zt}=Bt.props.size;let Ht=ht.current.clientWidth,ct=ht.current.clientHeight,dt;Ht&&ct?dt=Math.min(qt/Ht,zt/ct):dt=1,ht.current.style.willChange="transform",ht.current.style.transformOrigin="0 0",ht.current.style.transform=`scale(${dt}) translateZ(0)`,St(!0)}};return React.createElement(React.Fragment,null,React.createElement(Iframe$1,{key:mt.id,url:yt,frameBorder:0,iframeRef:ht,height:Tt,width:gt,onLoad:Et,styles:{..._t==null?void 0:_t.style}}))},et=({source:mt,setStartAnimation:St})=>{var dt;const{src:yt,type:_t,meta:Tt,loop:gt}=(mt==null?void 0:mt.sourceProps)||{},{id:ht,sourceType:Et}=mt||{},[At,Bt]=React.useState(null),qt=React.useRef(null);console.log("Updated current time",(dt=qt==null?void 0:qt.current)==null?void 0:dt.currentTime);const zt=React.useCallback(lt=>{qt.current=lt,Bt(lt?lt.id:null)},[]),Ht=React.useCallback(()=>{qt!=null&&qt.current&&qt.current.play().catch(()=>{var lt;qt.current.muted=!0,(lt=qt.current)==null||lt.play()})},[yt]),ct=React.useCallback(()=>{j&&clearInterval(j),hasPermission(k,Permission.UpdateProject)&&trigger$1("VideoEnded",{id:ht,category:_t})},[yt]);return React.useEffect(()=>{Tt&&(qt!=null&&qt.current)&&At&&hasPermission(k,Permission.ManageSelf)&&Tt!=null&&Tt.time&&(qt.current.currentTime=Number(Tt==null?void 0:Tt.time))},[Tt==null?void 0:Tt.time,At]),React.useEffect(()=>()=>{j&&clearInterval(j)},[ht]),React.useEffect(()=>{At?qt.current&&(qt.current.src=yt,qt.current.play().catch(()=>{qt.current.muted=!0,qt.current.play()}),hasPermission(k,Permission.UpdateProject)&&(j=setInterval(()=>{if(qt.current.duration){const lt=qt.current.duration-qt.current.currentTime;trigger$1("VideoTimeUpdate",{category:Et,id:ht,time:Math.floor(lt)})}},1e3))):j&&clearInterval(j)},[At]),React.createElement(React.Fragment,{key:ht},yt&&React.createElement("video",{loop:gt,id:ht,ref:zt,style:{...b.meta.style,...Tt.style},onLoadedData:Ht,onEnded:ct,onCanPlay:()=>St(!0)}))},nt=({source:mt,setStartAnimation:St})=>{const{src:yt,meta:_t}=(mt==null?void 0:mt.sourceProps)||{},{id:Tt}=mt||{};return React.createElement(React.Fragment,{key:Tt},yt&&React.createElement("img",{style:{...b.meta.style,..._t.style},src:yt,onLoad:()=>St(!0)}))},it=({source:mt})=>{const{type:St}=(mt==null?void 0:mt.sourceProps)||{},{id:yt}=mt||{},[_t,Tt]=React.useState(!1);return reactExports.useEffect(()=>{Tt(!1)},[yt]),React.createElement(APIKitAnimation$1,{id:yt,type:"overlay",enter:APIKitAnimationTypes.FADE_IN,exit:APIKitAnimationTypes.FADE_OUT,duration:400},React.createElement("div",{style:{opacity:_t?1:0},className:"overlayContainer overlay-transition"},yt&&St==="image"&&React.createElement(nt,{source:mt,setStartAnimation:Tt}),yt&&St==="video"&&React.createElement(et,{source:mt,setStartAnimation:Tt}),yt&&St==="custom"&&React.createElement(_e,{source:mt,setStartAnimation:Tt})))},ft=createRoot(_),pt=mt=>ft.render(React.createElement(React.Fragment,null,React.createElement(it,{source:mt})));return a(mt=>{pt({...mt})}),{root:_}}};var functionExpression=/[\s]*([a-z-]+)[\s]*\([\s]*([^\)]+)[\s]*\)[\s]*/i,floatExpression=/^(\-?\d+\.?\d{0,5})/,toFloat=parseFloat;function ensurePercent(a){return typeof a=="number"?a:toFloat(a)*.01}function formatPercent(a){return formatFloat(a*100)+"%"}function formatFloat(a){return floatExpression.exec(a.toString())[1]}function parseCSSFunction(a){var c=functionExpression.exec(a);if(!(!c||!c.length))return[c[1]].concat(c[2].split(","))}function cssFunction(a,c){var b=Array.prototype.join.call(c,", ");return a+"("+b+")"}var math=Math,round=math.round;function roundFloat(a,c){return round(a*c)/c}var _a,RGB="rgb",HSL="hsl",converters=(_a={},_a[RGB+HSL]=RGBtoHSL,_a[HSL+RGB]=HSLtoRGB,_a),maxChannelValues={r:255,g:255,b:255,h:360,s:1,l:1,a:1};function color(a){return parseHexCode(a)||parseColorFunction(a)||rgb(255,0,0)}function rgb(a,c,b,_){return new ColorHelper(RGB,a,c,b,_===void 0?1:ensurePercent(_),_!==void 0)}function convertHelper(a,c,b){var _=c.f,k=c.r,j=c.g,_e=c.b,et=c.a,nt=b===void 0?c.o:b;return _!==a?converters[_+a](k,j,_e,et,nt):b===void 0?c:new ColorHelper(_,k,j,_e,et,nt)}var ColorHelper=function(){function a(c,b,_,k,j,_e){var et=this;et.f=c,et.o=_e;var nt=c===HSL;et.r=clampColor(nt?"h":"r",b),et.g=clampColor(nt?"s":"g",_),et.b=clampColor(nt?"l":"b",k),et.a=clampColor("a",j)}return a.prototype.toString=function(){var c=this,b=c.o,_=c.f,k=c.r,j=c.g,_e=c.b,et=c.a,nt,it;if(_===RGB)nt=b?"rgba":RGB,it=[round(k),round(j),round(_e)];else if(_===HSL)nt=b?"hsla":HSL,it=[round(k),formatPercent(roundFloat(j,100)),formatPercent(roundFloat(_e,100))];else throw new Error("Invalid color format");return b&&it.push(formatFloat(roundFloat(et,1e5))),cssFunction(nt,it)},a.prototype.toHexString=function(){var c=convertHelper(RGB,this);return"#"+(toHex(c.r)+toHex(c.g)+toHex(c.b)).toUpperCase()},a.prototype.toHSL=function(){return convertHelper(HSL,this,!1)},a.prototype.toHSLA=function(){return convertHelper(HSL,this,!0)},a.prototype.toRGB=function(){return convertHelper(RGB,this,!1)},a.prototype.toRGBA=function(){return convertHelper(RGB,this,!0)},a.prototype.red=function(){var c=this;return(c.f===RGB?c:c.toRGB()).r},a.prototype.green=function(){var c=this;return(c.f===RGB?c:c.toRGB()).g},a.prototype.blue=function(){var c=this;return(c.f===RGB?c:c.toRGB()).b},a.prototype.hue=function(){var c=this;return(c.f===HSL?c:c.toHSL()).r},a.prototype.saturation=function(){var c=this;return(c.f===HSL?c:c.toHSL()).g},a.prototype.lightness=function(){var c=this;return(c.f===HSL?c:c.toHSL()).b},a.prototype.alpha=function(){return this.a},a.prototype.opacity=function(){return this.a},a.prototype.invert=function(){var c=this,b=convertHelper(RGB,c);return convertHelper(c.f,new a(RGB,255-b.r,255-b.g,255-b.b,c.a,c.o))},a.prototype.lighten=function(c,b){var _=this,k=convertHelper(HSL,_),j=maxChannelValues.l,_e=k.b+(b?j-k.b:j)*ensurePercent(c);return convertHelper(_.f,new a(HSL,k.r,k.g,_e,_.a,_.o))},a.prototype.darken=function(c,b){var _=this,k=convertHelper(HSL,_),j=k.b-(b?k.b:maxChannelValues.l)*ensurePercent(c);return convertHelper(_.f,new a(HSL,k.r,k.g,j,_.a,_.o))},a.prototype.saturate=function(c,b){var _=this,k=convertHelper(HSL,_),j=maxChannelValues.s,_e=k.g+(b?j-k.g:j)*ensurePercent(c);return convertHelper(_.f,new a(HSL,k.r,_e,k.b,_.a,_.o))},a.prototype.desaturate=function(c,b){var _=this,k=convertHelper(HSL,_),j=maxChannelValues.s,_e=k.g-(b?k.g:j)*ensurePercent(c);return convertHelper(_.f,new a(HSL,k.r,_e,k.b,_.a,_.o))},a.prototype.grayscale=function(){return this.desaturate(1)},a.prototype.fade=function(c){var b=this,_=clampColor("a",ensurePercent(c));return convertHelper(b.f,new a(b.f,b.r,b.g,b.b,_,!0))},a.prototype.fadeOut=function(c,b){var _=this,k=1,j=clampColor("a",_.a-(b?_.a:k)*ensurePercent(c));return convertHelper(_.f,new a(_.f,_.r,_.g,_.b,j,!0))},a.prototype.fadeIn=function(c,b){var _=this,k=1,j=clampColor("a",_.a+(b?_.a:k)*ensurePercent(c));return convertHelper(_.f,new a(_.f,_.r,_.g,_.b,j,!0))},a.prototype.mix=function(c,b){var _=this,k=ensureColor(c),j=convertHelper(RGB,_),_e=convertHelper(RGB,k),et=b===void 0?.5:b,nt=2*et-1,it=Math.abs(j.a-_e.a),ft=((nt*it===-1?nt:(nt+it)/(1+nt*it))+1)/2,pt=1-ft,mt=new a(RGB,round(j.r*ft+_e.r*pt),round(j.g*ft+_e.g*pt),round(j.b*ft+_e.b*pt),j.a*et+_e.a*(1-et),_.o||k.o);return convertHelper(this.f,mt)},a.prototype.tint=function(c){return rgb(255,255,255).mix(this,c)},a.prototype.shade=function(c){return rgb(0,0,0).mix(this,c)},a.prototype.spin=function(c){var b=this,_=convertHelper(HSL,b);return convertHelper(b.f,new a(HSL,modDegrees(_.r+c),_.g,_.b,b.a,b.o))},a}();function toHex(a){var c=round(a);return(c<16?"0":"")+c.toString(16)}function modDegrees(a){return((a<0?360:0)+a%360)%360}function RGBtoHSL(a,c,b,_,k){var j=a/255,_e=c/255,et=b/255,nt=Math.min(j,_e,et),it=Math.max(j,_e,et),ft=(nt+it)/2,pt=it-nt,mt;it===nt?mt=0:j===it?mt=(_e-et)/pt:_e===it?mt=2+(et-j)/pt:et===it?mt=4+(j-_e)/pt:mt=0,mt=Math.min(mt*60,360),mt<0&&(mt+=360);var St;return it===nt?St=0:ft<=.5?St=pt/(it+nt):St=pt/(2-it-nt),new ColorHelper(HSL,mt,St,ft,_,k)}function HSLtoRGB(a,c,b,_,k){var j=a/360,_e=c,et=b;if(_e===0){var nt=et*255;return new ColorHelper(RGB,nt,nt,nt,_,k)}for(var it=et<.5?et*(1+_e):et+_e-et*_e,ft=2*et-it,pt=0,mt=0,St=0,yt=0;yt<3;yt++){var _t=j+.3333333333333333*-(yt-1);_t<0&&_t++,_t>1&&_t--;var nt=void 0;6*_t<1?nt=ft+(it-ft)*6*_t:2*_t<1?nt=it:3*_t<2?nt=ft+(it-ft)*(2/3-_t)*6:nt=ft,nt*=255,yt===0?pt=nt:yt===1?mt=nt:St=nt}return new ColorHelper(RGB,pt,mt,St,_,k)}function clampColor(a,c){var b=0,_=maxChannelValues[a];return c<b?b:c>_?_:c}function ensureColor(a){return a instanceof ColorHelper?a:color(a)}function parseHexCode(a){var c=a.match(/#(([a-f0-9]{6})|([a-f0-9]{3}))$/i);if(c){var b=c[1],_=parseInt(b.length===3?b[0]+b[0]+b[1]+b[1]+b[2]+b[2]:b,16),k=_>>16&255,j=_>>8&255,_e=_&255;return new ColorHelper(RGB,k,j,_e,1,!1)}}function parseColorFunction(a){var c=parseCSSFunction(a);if(!(!c||!(c.length===4||c.length===5))){var b=c[0],_=b==="rgba",k=b==="hsla",j=b===RGB,_e=b===HSL,et=k||_,nt;if(j||_)nt=RGB;else if(_e||k)nt=HSL;else throw new Error("unsupported color string");var it=toFloat(c[1]),ft=j||_?toFloat(c[2]):ensurePercent(c[2]),pt=j||_?toFloat(c[3]):ensurePercent(c[3]),mt=et?toFloat(c[4]):1;return new ColorHelper(nt,it,ft,pt,mt,et)}}const of=color,transparent=color("rgba(0,0,0,0)"),white=color("#ffffff"),black=color("#000000"),weights={primary:{50:"#EAFAF5",100:"#D5F6EB",200:"#ABEDD7",300:"#82E3C3",400:"#58DAAF",500:"#26AD80",600:"#25A77C",700:"#1C7D5D",800:"#12543E"},secondary:{50:"#FBEAEA",100:"#F7D4D4",200:"#EFA9A9",300:"#E77E7E",400:"#FF6F64",500:"#E9554A",600:"#CB362B",700:"#811818",800:"#561010"},neutral:{0:"#ffffff",10:"#f5f5f5",200:"#d9d9d9",300:"#bababa",350:"#999999",400:"#9e9e9e",500:"#808080",600:"#666666",700:"#4d4d4d",800:"#303030",900:"#141414",1e3:"#000000"},warning:{400:"#FFC28A",500:"#FFAE64",600:"#F29540"}},types=Object.keys(weights),weight=a=>c=>{const b=weights[a];if(b[c])return b[c];const _=Object.keys(weights.primary).map(Number),k=_.find(j=>c<=j);return k?b[k]:b[_.slice(_.length-1)[0]]},primary=weight("primary"),neutral=weight("neutral"),secondary=weight("secondary"),warning=weight("warning"),lightstream=color("#26ad80"),twitch=color("#9156ff"),linkedin=color("#2867b2"),youtube=color("#ff0000"),facebook=color("#1877f2"),twitter=color("#1da1f2"),Color=Object.freeze(Object.defineProperty({__proto__:null,black,color,facebook,lightstream,linkedin,neutral,of,primary,secondary,transparent,twitch,twitter,types,warning,white,youtube},Symbol.toStringTag,{value:"Module"})),YouTube=React.createElement("svg",{style:{flex:"0 0 100%"},viewBox:"0 0 24 24"},React.createElement("path",{d:"M19.6465 8.53711C19.4707 7.83398 18.9141 7.27734 18.2402 7.10156C16.9805 6.75 12 6.75 12 6.75C12 6.75 6.99023 6.75 5.73047 7.10156C5.05664 7.27734 4.5 7.83398 4.32422 8.53711C3.97266 9.76758 3.97266 12.4043 3.97266 12.4043C3.97266 12.4043 3.97266 15.0117 4.32422 16.2715C4.5 16.9746 5.05664 17.502 5.73047 17.6777C6.99023 18 12 18 12 18C12 18 16.9805 18 18.2402 17.6777C18.9141 17.502 19.4707 16.9746 19.6465 16.2715C19.998 15.0117 19.998 12.4043 19.998 12.4043C19.998 12.4043 19.998 9.76758 19.6465 8.53711ZM10.3594 14.7773V10.0312L14.5195 12.4043L10.3594 14.7773Z"})),YouTubeDuo=React.createElement("svg",{style:{flex:"0 0 100%"},viewBox:"0 0 24 24"},React.createElement("rect",{x:"8",y:"9",width:"9",height:"7",fill:neutral(0)}),React.createElement("path",{d:"M19.6465 8.53711C19.4707 7.83398 18.9141 7.27734 18.2402 7.10156C16.9805 6.75 12 6.75 12 6.75C12 6.75 6.99023 6.75 5.73047 7.10156C5.05664 7.27734 4.5 7.83398 4.32422 8.53711C3.97266 9.76758 3.97266 12.4043 3.97266 12.4043C3.97266 12.4043 3.97266 15.0117 4.32422 16.2715C4.5 16.9746 5.05664 17.502 5.73047 17.6777C6.99023 18 12 18 12 18C12 18 16.9805 18 18.2402 17.6777C18.9141 17.502 19.4707 16.9746 19.6465 16.2715C19.998 15.0117 19.998 12.4043 19.998 12.4043C19.998 12.4043 19.998 9.76758 19.6465 8.53711ZM10.3594 14.7773V10.0312L14.5195 12.4043L10.3594 14.7773Z"})),Facebook=React.createElement("svg",{style:{flex:"0 0 100%"},viewBox:"0 0 24 24"},React.createElement("path",{d:"M15.4863 13.3125L15.8965 10.6172H13.2891V8.85938C13.2891 8.09766 13.6406 7.39453 14.8125 7.39453H16.0137V5.08008C16.0137 5.08008 14.9297 4.875 13.9043 4.875C11.7656 4.875 10.3594 6.19336 10.3594 8.53711V10.6172H7.95703V13.3125H10.3594V19.875H13.2891V13.3125H15.4863Z"})),FacebookCircle=React.createElement("svg",{style:{flex:"0 0 100%"},viewBox:"0 0 24 24"},React.createElement("path",{d:"M19.2656 12.375C19.2656 8.36133 16.0137 5.10938 12 5.10938C7.98633 5.10938 4.73438 8.36133 4.73438 12.375C4.73438 16.0078 7.37109 19.0254 10.8574 19.5527V14.4844H9.01172V12.375H10.8574V10.793C10.8574 8.97656 11.9414 7.95117 13.582 7.95117C14.4023 7.95117 15.2227 8.09766 15.2227 8.09766V9.88477H14.3145C13.4062 9.88477 13.1133 10.4414 13.1133 11.0273V12.375H15.1348L14.8125 14.4844H13.1133V19.5527C16.5996 19.0254 19.2656 16.0078 19.2656 12.375Z"})),Twitch=React.createElement("svg",{style:{flex:"0 0 100%"},viewBox:"0 0 24 24"},React.createElement("path",{d:"M16.9551 8.92188H15.8125V12.1445H16.9551V8.92188ZM13.8496 8.89258H12.707V12.1152H13.8496V8.89258ZM9.01562 5.875L6.20312 8.57031V18.209H9.60156V20.875L12.4141 18.209H14.6699L19.7676 13.375V5.875H9.01562ZM18.6543 12.8477L16.3691 14.9863H14.1133L12.1504 16.8613V14.9863H9.60156V6.95898H18.6543V12.8477Z"})),TwitchDuo=React.createElement("svg",{style:{flex:"0 0 100%"},viewBox:"0 0 24 24"},React.createElement("path",{d:"M19 6.5H9L8.8125 17.5H13.5L19 13V6.5Z",fill:neutral(0)}),React.createElement("path",{d:"M16.9551 8.92188H15.8125V12.1445H16.9551V8.92188ZM13.8496 8.89258H12.707V12.1152H13.8496V8.89258ZM9.01562 5.875L6.20312 8.57031V18.209H9.60156V20.875L12.4141 18.209H14.6699L19.7676 13.375V5.875H9.01562ZM18.6543 12.8477L16.3691 14.9863H14.1133L12.1504 16.8613V14.9863H9.60156V6.95898H18.6543V12.8477Z"})),Twitter=React.createElement("svg",{style:{flex:"0 0 100%"},viewBox:"0 0 24 24"},React.createElement("path",{d:"M20.6681 7.98749C20.6806 8.16248 20.6806 8.33751 20.6806 8.5125C20.6806 13.85 16.6197 20 9.1976 20C6.91098 20 4.78681 19.3375 3 18.1875C3.32489 18.225 3.63723 18.2375 3.97462 18.2375C5.86136 18.2375 7.59821 17.6 8.98518 16.5125C7.21086 16.475 5.72393 15.3125 5.21162 13.7125C5.46155 13.75 5.71143 13.775 5.97386 13.775C6.33621 13.775 6.69859 13.725 7.03594 13.6375C5.18666 13.2625 3.79966 11.6375 3.79966 9.67499V9.62501C4.33693 9.92501 4.96174 10.1125 5.62393 10.1375C4.53685 9.41247 3.82466 8.17498 3.82466 6.77497C3.82466 6.02499 4.02454 5.33749 4.37443 4.73748C6.36117 7.18748 9.34753 8.78745 12.6962 8.96248C12.6337 8.66248 12.5962 8.35001 12.5962 8.03751C12.5962 5.81248 14.3955 4 16.6322 4C17.7942 4 18.8438 4.4875 19.581 5.275C20.4931 5.10001 21.3678 4.76249 22.1425 4.3C21.8426 5.23752 21.2054 6.02502 20.3682 6.52499C21.1804 6.43753 21.9676 6.21248 22.6923 5.90001C22.1426 6.69998 21.4553 7.41245 20.6681 7.98749Z"})),LinkedIn=React.createElement("svg",{style:{flex:"0 0 100%"},viewBox:"0 0 24 24"},React.createElement("path",{d:"M19.2 3H4.8C3.81 3 3.009 3.81 3.009 4.8L3 19.2C3 20.19 3.81 21 4.8 21H19.2C20.19 21 21 20.19 21 19.2V4.8C21 3.81 20.19 3 19.2 3ZM8.4 18.3H5.7V10.2H8.4V18.3ZM7.05 8.679C6.15 8.679 5.421 7.95 5.421 7.05C5.421 6.15 6.15 5.421 7.05 5.421C7.95 5.421 8.679 6.15 8.679 7.05C8.679 7.95 7.95 8.679 7.05 8.679ZM18.3 18.3H15.6V13.53C15.6 12.783 14.997 12.18 14.25 12.18C13.503 12.18 12.9 12.783 12.9 13.53V18.3H10.2V10.2H12.9V11.28C13.368 10.524 14.331 10.02 15.15 10.02C16.887 10.02 18.3 11.433 18.3 13.17V18.3Z"})),Lightstream=React.createElement("svg",{style:{flex:"0 0 100%"},viewBox:"0.144 0 27.712 24"},React.createElement("path",{d:"M16.0369 12.1232L14 15.6518L11.5642 11.4335L6.27356 10.6176L14 24L20.4627 12.805L16.0369 12.1232Z"}),React.createElement("path",{d:"M9.74033 8.27418L7.37317 4.17409H20.6268L19.0921 6.83194L24.3827 6.01602L27.8558 0H0.144165L5.31453 8.95665L9.74033 8.27418Z"})),LightstreamWithText=React.createElement("svg",{style:{flex:"0 0 100%"},viewBox:"0 0 3000 524"},React.createElement("polygon",{points:"330.56 263.5 299.73 316.91 262.86 253.06 182.78 240.71 299.73 443.27 397.55 273.82 330.56 263.5"}),React.createElement("polygon",{points:"235.25 205.24 199.42 143.18 400.03 143.18 376.8 183.41 456.88 171.06 509.45 80 90 80 168.26 215.57 235.25 205.24"}),React.createElement("path",{d:"M646.32,345.72h94.91v13.73H630V167.26h16.36Z"}),React.createElement("path",{d:"M846.24,359.45H830V167.26h16.23Z"}),React.createElement("path",{d:"M1091.16,336.61q-8.45,12-26.46,18.74t-40.33,6.73q-22.57,0-40.13-10.82t-27.19-30.62q-9.64-19.8-9.77-45.41V250.95q0-40,20.2-63.16t54.25-23.17q29.69,0,47.78,15.11T1091,221.38h-16.24q-3.56-21.18-17.23-32.11t-35.7-10.92q-26.92,0-42.64,19.15t-15.71,54v22.72q0,21.93,7.46,38.77t21.38,26.09q13.92,9.25,32,9.25,21,0,36-6.6,9.76-4.36,14.52-10.16V282h-51.61V268.24h67.85Z"}),React.createElement("path",{d:"M1333.71,359.45h-16.37V278.11H1207.53v81.33h-16.23V167.26h16.23v97.12h109.81V167.26h16.37Z"}),React.createElement("path",{d:"M1563.2,181h-65.87V359.45H1481.1V181h-65.73V167.26H1563.2Z"}),React.createElement("path",{d:"M1990.75,181h-65.87V359.45h-16.23V181h-65.73V167.26h147.83Z"}),React.createElement("path",{d:"M2147.65,279.33h-55.84v80.12h-16.36V167.26h62.43q30.75,0,48,14.9t17.29,41.66a52,52,0,0,1-10.83,32.56q-10.82,14.11-29,19.51l48,81.83v1.72h-17.29Zm-55.84-13.73h49.76q20.45,0,32.86-11.63t12.41-30.14q0-20.36-12.93-31.59T2137.61,181h-45.8Z"}),React.createElement("path",{d:"M2407.62,278.11h-89.88v67.61h103.35v13.73H2301.5V167.26h118.92V181H2317.73v83.39h89.88Z"}),React.createElement("polygon",{points:"2892.79 183.67 2892.79 183.67 2816.23 326.97 2724.06 154.45 2724.06 189.54 2724.06 359.75 2739.67 359.75 2739.67 218.3 2816.26 359.42 2892.79 218.32 2892.79 359.75 2908.4 359.75 2908.4 189.54 2908.4 154.45 2892.79 183.67"}),React.createElement("polygon",{points:"2649.77 359.45 2569.47 154.54 2569.47 154.53 2569.46 154.53 2569.46 154.53 2569.46 154.54 2489.16 359.45 2506.19 359.45 2569.46 194.32 2632.74 359.45 2649.77 359.45"}),React.createElement("path",{d:"M1764.57,287q-6.73-10.56-20.06-18.15a131.55,131.55,0,0,0-21.47-9.18l-7.64,13.49q19.65,6.61,28.32,13.77,11.22,9.3,11.22,25.28,0,16.37-13.6,26.26t-36,9.9c-11.35,0-21.05-1.94-29.35-5.51l-7,12.33a94,94,0,0,0,36.33,6.91q29.7,0,47.85-13.73t18.15-36.43Q1771.3,297.55,1764.57,287Z"}),React.createElement("path",{d:"M1659.11,250.93c7.28,5.25,18,10.18,32.13,14.79l7.72-13.38q-21-6.41-31.29-14.49Q1655.95,228.61,1656,214q0-15.83,13-25.66t35-9.83c13.12,0,23.78,3.19,32.26,9.21l7.23-12.51c-1.71-1-3.43-2.1-5.3-3q-15.09-7.38-34.18-7.38-28.19,0-46.31,13.76t-18.11,35.77Q1639.62,237,1659.11,250.93Z"}),React.createElement("path",{d:"M1744.34,268.78a129.23,129.23,0,0,0-21.68-9.32l-7.79,13.49c13.28,4.44,22.87,9.06,28.68,13.88q11.2,9.29,11.2,25.23,0,16.33-13.57,26.21t-36,9.88c-11.8,0-21.85-2-30.34-5.91l-7.08,12.26.2.1a93.63,93.63,0,0,0,37.22,7.25q29.64,0,47.75-13.7t18.11-36.36q0-14.36-6.72-24.9T1744.34,268.78Z"})),IconMap=Object.freeze(Object.defineProperty({__proto__:null,Facebook,FacebookCircle,Lightstream,LightstreamWithText,LinkedIn,Twitch,TwitchDuo,Twitter,YouTube,YouTubeDuo},Symbol.toStringTag,{value:"Module"})),nudge=a=>{if(a.nudgeUp||a.nudgeDown||a.nudgeRight||a.nudgeLeft)return{position:"relative",top:a.nudgeDown,left:a.nudgeRight,right:a.nudgeLeft,bottom:a.nudgeUp}},SVGWrapper=({children:a,width:c,height:b,color:_,colorWeight:k=0,marginLeft:j,marginTop:_e,marginRight:et,marginBottom:nt,className:it,...ft})=>(_&&Color[_](k),React.createElement("div",{className:it,style:{...nudge(ft),display:"flex",justifyContent:"center",flexBasis:c||"auto",flexShrink:0,width:c,height:b||c&&"fit-content",marginLeft:j,marginTop:_e,marginBottom:nt,marginRight:et}},a)),Icon=({name:a,...c})=>React.createElement(SVGWrapper,{...c},IconMap[a]),Icon$1=Icon,dragImageSvg=`
  <svg height="75" width="120" viewBox="0 0 120 75" xmlns="http://www.w3.org/2000/svg" style="">
    <rect width="120" height="75" rx="3" style="
      opacity: 0.4;
      stroke: white;
      stroke-width: 3px;
      stroke-opacity: 0.7;
    "/>
  </svg>`;let dragImage;const loadDragImage=()=>dragImage||(dragImage=new Image,dragImage.src=URL.createObjectURL(new Blob([dragImageSvg],{type:"image/svg+xml"})),dragImage);class ErrorBoundary extends React.Component{constructor(c){super(c),this.state={error:null}}componentDidCatch(c,b){log$1.warn(c,b)}static getDerivedStateFromError(){return{error:!0}}render(){return this.state.error?null:this.props.children}}const onDrop=async(a,c)=>{c.preventDefault(),c.stopPropagation();const{dropNodeId:b,dropType:_,project:k}=a,j=c.dataTransfer.getData("text/plain");if(log$1.debug("Compositor: Dropping",{dropType:_,dragNodeId:j,dropNodeId:b}),b===j)return;const[_e,et,nt,it]=await Promise.all([k.compositor.get(j),k.compositor.get(b),k.compositor.getParent(j),k.compositor.getParent(b)]);if(_==="layout")return nt.id===b?void 0:CoreContext.Command.moveNode({projectId:k.id,nodeId:_e.id,parentId:et.id});if(nt.id!==(it==null?void 0:it.id))return CoreContext.Command.swapNodes({projectId:k.id,nodeAId:_e.id,nodeBId:et.id});const ft=nt.children.map(pt=>pt.id);return CoreContext.Command.reorderNodes({projectId:k.id,parentId:nt.id,childIds:swapItems(_e.id,et.id,ft)})};let foundDropTarget=!1;const ElementTree=a=>{var Et,At;const c=reactExports.useRef(!1),b=reactExports.useRef(),_=reactExports.useRef(),k=reactExports.useRef(),{project:j,interactive:_e=!0,onElementDoubleClick:et,checkIsDragTarget:nt,checkIsDropTarget:it}=reactExports.useContext(CompositorContext),{nodeId:ft}=a,pt=j.compositor.get(ft);if(!pt)return null;const mt=CoreContext.compositor.getElement(pt),St=pt.props.layout||"Row",yt=_e&&nt(pt),_t=_e&&it(pt);let Tt=_t?{onDrop:Bt=>(foundDropTarget=!0,onDrop({dropType:"layout",dropNodeId:pt.id,project:j},Bt)),onDragOver:Bt=>{var qt;Bt.preventDefault(),Bt.stopPropagation(),(qt=k.current)==null||qt.toggleAttribute("data-layout-drop-target-active",!0)},onDragLeave:Bt=>{var qt;Bt.preventDefault(),Bt.stopPropagation(),(qt=k.current)==null||qt.toggleAttribute("data-layout-drop-target-active",!1)}}:{},gt=yt?{draggable:!0,ondrop:Bt=>(foundDropTarget=!0,onDrop({dropType:"transform",dropNodeId:pt.id,project:j},Bt)),ondragstart:Bt=>{var qt;c.current=!0,wrapperEl.toggleAttribute("data-dragging",!0),log$1.debug("Compositor: Dragging",pt.id),foundDropTarget=!1,Bt.dataTransfer.setData("text/plain",pt.id),Bt.dataTransfer.dropEffect="move",Bt.dataTransfer.setDragImage(dragImage,10,10),(qt=k.current)==null||qt.toggleAttribute("data-drag-target-active",!0),window.__dragging=!0},ondragend:Bt=>{var qt;c.current=!1,foundDropTarget||(log$1.info("Compositor: No drop target - deleting node",pt),CoreContext.Command.deleteNode({nodeId:pt.id})),wrapperEl.toggleAttribute("data-dragging",!0),log$1.debug("Compositor: DragEnd",Bt),(qt=k.current)==null||qt.toggleAttribute("data-drag-target-active",!1),wrapperEl.querySelectorAll("[data-item]").forEach(zt=>{zt.toggleAttribute("data-drag-target-active",!1),zt.toggleAttribute("data-layout-drop-target-active",!1),zt.toggleAttribute("data-transform-drop-target-active",!1)}),window.__dragging=!1},ondragover:Bt=>{var qt;Bt.preventDefault(),Bt.stopPropagation(),!c.current&&((qt=k.current)==null||qt.toggleAttribute("data-transform-drop-target-active",!0))},ondragleave:Bt=>{var qt;Bt.preventDefault(),Bt.stopPropagation(),(qt=k.current)==null||qt.toggleAttribute("data-transform-drop-target-active",!1)}}:{};reactExports.useEffect(()=>{_.current&&mt&&(_.current.appendChild(mt.root),Object.assign(_.current.style,{width:"100%",height:"100%",position:"relative",overflow:"hidden"}),Object.assign(mt.root.style,{pointerEvents:yt?"all":"none",width:"100%",height:"100%",position:"relative",...pt.props.style||{}}))},[_.current,mt]),reactExports.useEffect(()=>{const Bt=yt?()=>et(pt):()=>{};return b.current&&(Object.assign(b.current,gt),Object.assign(b.current.style,{pointerEvents:yt?"all":"none"}),b.current.addEventListener("dblclick",Bt)),()=>{var qt;(qt=b.current)==null||qt.removeEventListener("dblclick",Bt)}},[b.current]);const ht={layout:St,...pt.props.layoutProps??{}};return React.createElement("div",{ref:k,"data-id":pt.id+"-x","data-item":!0,...yt&&{"data-drag-target":!0},..._t&&{"data-drop-target":!0},...Tt,style:{position:"relative",width:((Et=pt.props.size)==null?void 0:Et.x)||"100%",height:((At=pt.props.size)==null?void 0:At.y)||"100%",pointerEvents:"none"}},React.createElement("div",{className:"interactive-overlay",ref:b,style:{height:"100%",width:"100%",position:"absolute",zIndex:2}}),React.createElement("div",{className:"item-element",style:{display:"flex",flex:"0 0 auto",justifyContent:"center",width:"100%",height:"100%"}},React.createElement("div",{ref:_}),React.createElement(ErrorBoundary,null,React.createElement("ls-layout",{"data-id":pt.id+"-x",props:JSON.stringify(ht),layout:St},pt.children.map(Bt=>React.createElement(ElementTree,{key:Bt.id,nodeId:Bt.id}))))))},Root=a=>{const{project:c}=reactExports.useContext(CompositorContext),[b,_]=reactExports.useState(null);return reactExports.useEffect(()=>(_(c.compositor.renderTree()),CoreContext.onInternal("NodeChanged",()=>{_(c.compositor.renderTree())})),[]),reactExports.useEffect(()=>{const k=c.compositor.getRoot(),{x:j}=k.props.size,_e=()=>{var St,yt,_t;const{bannerStyle:et="default",primaryColor:nt="#ABABAB",showNameBanners:it}=c.props??{},ft=((St=c.props)==null?void 0:St.logoPosition)??((_t=(yt=c.props)==null?void 0:yt.logo)==null?void 0:_t.logoPosition)??"top-right";if(!et||!nt||!ft)return;const pt=themes[et](nt,it,j/1920),mt=themes[ft](j/1920);a.setStyle(`${pt} ${mt}`||"")};return _e(),CoreContext.onInternal("ProjectChanged",_e)},[c]),b?React.createElement("div",{onDrop:k=>{foundDropTarget=!0,k.preventDefault()},onDragOver:k=>{k.preventDefault()},onDragLeave:k=>{k.preventDefault()},style:{userSelect:"none",width:`${b.props.size.x+PADDING*2}px`,height:`${b.props.size.y+PADDING*2}px`,margin:PADDING+"px"}},React.createElement("div",{style:{width:"100%",height:"100%",overflow:"hidden"}},React.createElement(ElementTree,{nodeId:b.id}))):null};let wrapperEl,customStyleEl;const PADDING=0,render$1=a=>{const{containerEl:c,projectId:b,dragAndDrop:_=!1,checkDragTarget:k=scenelessProjectDragCheck,checkDropTarget:j=scenelessProjectDropCheck}=a,_e=getProject(b);CoreContext.clients.LayoutApi().subscribeToLayout(_e.layoutApi.layoutId),loadDragImage();const et=a.onElementDoubleClick??(()=>{});if(!c||!_e)return;if(!c.shadowRoot){c.attachShadow({mode:"open"}),customStyleEl=document.createElement("style");const yt=document.createElement("style");yt.textContent=getStyle(),wrapperEl=document.createElement("div"),wrapperEl.id="compositor-root",Object.assign(wrapperEl.style,{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",transformOrigin:"center"}),c.shadowRoot.appendChild(yt),c.shadowRoot.appendChild(customStyleEl),c.shadowRoot.appendChild(wrapperEl),new ResizeObserver(Tt=>{pt()}).observe(c)}const nt=_e.compositor.getRoot(),{x:it,y:ft}=nt.props.size,pt=()=>{let{width:yt,height:_t}=c.getBoundingClientRect();const Tt=yt/_t,gt=it/ft;let ht;yt&&_t?gt>Tt?ht=yt/(it+PADDING*2):ht=_t/(ft+PADDING*2):ht=1,wrapperEl.style.willChange="transform",wrapperEl.style.transform=`scale(${ht}) translateZ(0)`,window.__scale=ht,St()},mt=createRoot(wrapperEl),St=()=>{mt.render(React.createElement(CompositorProvider,{project:_e,interactive:_,onElementDoubleClick:et,checkIsDropTarget:j,checkIsDragTarget:k},React.createElement(Root,{setStyle:yt=>{customStyleEl.textContent=yt}})))};pt()},scenelessProjectDragCheck=a=>a.props.name==="Participant"||a.props.sourceType==="RoomParticipant"||a.props.sourceType==="RTMP",scenelessProjectDropCheck=a=>a.props.name==="Content",CompositorContext=React.createContext({interactive:!1,project:null,checkIsDragTarget:()=>!1,checkIsDropTarget:()=>!1,onElementDoubleClick:()=>{}}),CompositorProvider=({children:a,...c})=>React.createElement(CompositorContext.Provider,{value:{...c}},a),getStyle=()=>`
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
  font-family: 'Arial';
}

video {
  width: 100%;
  height: 100%;
  object-fit: contain;
}

.NameBanner {
  top: 100%;
  transform: translateY(-100%);
  left: 0;
  height: 30px;
  background: linear-gradient(90deg, rgba(0, 0, 0, 0.5) 50%, rgba(0, 0, 0, 0) 100%);
  padding: 0px 0px 0px 10px;
  color: rgba(255, 255, 255, 0.9);
  font-weight: bold;
  line-height: 30px;
  width: 100%;
  font-size: 28px;
  position: absolute;
}

ls-layout[layout="Presentation"][props*="\\"cover\\"\\:true"] > :first-child .NameBanner {
  top: 0% !important;
  transform: translateY(0%) !important;
}

[layout="Layered"] > [data-item] {
  transform: scale(1.003) !important;
}
[layout="Layered"] > [data-item]:nth-child(2) {
  transform: scale(1.0015) !important;
}
[layout="Layered"] > [data-item]:nth-child(1) {
  transform: scale(1) !important;
}

.logo {
  position: absolute !important;
}

#compositor-root[data-dragging] {}

[data-drag-target] {}
[data-drag-target]:hover > .interactive-overlay {
  box-shadow: 0 0 0 3px inset rgba(255, 255, 255, 0.5);
  cursor: grab;
}
[data-drop-target] {}
[data-drop-target]:hover {}
[data-drag-target][data-drag-target-active] > .interactive-overlay {
  box-shadow: 0 0 0 3px inset rgba(255, 255, 255, 0.2);
}
[data-drag-target][data-drag-target-active] > .item-element {
  opacity: 0.8;
}
[data-layout-drop-target-active] > .interactive-overlay {
  box-shadow: 0 0 0 3px inset yellow;
}
[data-transform-drop-target-active] > .interactive-overlay {
  box-shadow: 0 0 0 3px inset white;
}
`;var BannerStyle=(a=>(a.DEFAULT="default",a.MINIMAL="minimal",a.BUBBLE="bubble",a))(BannerStyle||{});const themes={"top-left":(a=1280/1920)=>`
      .wrapper {
       top:0;
       left:0;
    }`,"top-right":(a=1280/1920)=>`
      .wrapper {
       top:0;
       right:0;
    }`,"bottom-left":(a=1280/1920)=>`
      .wrapper {
       bottom:0;
       left:0;
    }`,"bottom-right":(a=1280/1920)=>`
      .wrapper {
       bottom:0;
       right:0;
    }`,default:(a="#ABABAB",c=!0,b=1280/1920)=>{const _=color(a).lightness()<.6?"#FFF":"#000",k=color(a).lightness()<.6?"#FFF":"#000",j=color(a).lightness()<.6?"#000":"#FFF",_e=et=>et*b+"px";return`
      .ChatOverlay {
        background: ${a} !important;
        margin-bottom: ${_e(40)} !important;
        transition: 300ms ease all;
        left: 0;

        /* Default Size 4 */
        font-size: ${_e(44)} !important;
        padding: ${_e(40)} ${_e(100)} !important;
        border-radius: ${_e(20)} !important;
      }
      
      .ChatOverlay-badge-icon {
          width:${_e(32)};
          height: ${_e(32)};
          fill: currentcolor;
          color: ${j};
      }

       .ChatOverlay-badge-container {
          background-color:${k};
          display:flex;
          flex-direction:row;
          padding: ${_e(6)} ${_e(12)} ${_e(6)} ${_e(6)};
          border-radius: ${_e(10)};
          align-items: center;
          border-bottom-left-radius: 0px !important;
          position: relative;
          border: none;
          cursor: pointer;
       }
      
       .ChatOverlay-badge-username {
          color:${j};
          padding:${_e(6)};
          font-size:${_e(18)};
          font-weight:700;
          text-transform: capitalize; 
       }
       
       .ChatOverlay-badge-container::before {
          content:"";
          width:15px;
          height:15px;
          background-color:${k};
          position: absolute;
          bottom:-14px;
          left:0;
          clip-path:polygon(0 100%, 12% 87%, 26% 73%, 45% 53%, 59% 40%, 71% 28%, 85% 14%, 100% 0, 0 0);
        }
       

       .ChatOverlay-avatar {
          height: ${_e(120)};
          width: ${_e(120)};
          left:0;
          right:0;
          top:0;
          bottom:0;
          border-radius:50%;
       }

      .Banner, .NameBanner, .ChatOverlay {
        background: ${a} !important;
        margin-bottom: ${_e(40)} !important;
        transition: 300ms ease all;
        left: 0;

        /* Default Size 4 */
        font-size: ${_e(44)} !important;
        padding: ${_e(40)} ${_e(100)} !important;
        border-top-right-radius: ${_e(20)} !important;
        border-bottom-right-radius: ${_e(20)} !important;
      }

      .Banner-body, .NameBanner-body, .ChatOverlay-body {
        color: ${_} !important;
        font-family: 'Roboto' !important;
        font-style: normal !important;
        font-weight: 700 !important;
        line-height: 120% !important;
      }

      .NameBanner {
        transform-origin: 0 100%;
        margin: 0 !important;
        transform: translateX(-100%);
        opacity: 0 !important;
        white-space: nowrap;
        ${c&&`
          opacity: 1 !important;
          transform: translateX(0);
        `}
      }

      .NameBanner[data-size="4"] {
        padding: ${_e(40)} ${_e(100)} !important;
        font-size: ${_e(44)} !important;
        border-top-right-radius: ${_e(20)} !important;
        border-bottom-right-radius: ${_e(20)} !important;
      }
      .NameBanner[data-size="3"] {
        padding: ${_e(12)} ${_e(30)} !important;
        font-size: ${_e(44)} !important;
        border-top-right-radius: ${_e(20)} !important;
        border-bottom-right-radius: ${_e(20)} !important;
      }
      .NameBanner[data-size="2"] {
        padding: ${_e(12)} ${_e(20)} !important;
        font-size: ${_e(28)} !important;
        border-top-right-radius: ${_e(16)} !important;
        border-bottom-right-radius: ${_e(16)} !important;
      }
      .NameBanner[data-size="1"], .NameBanner[data-size="0"] {
        padding: ${_e(8)} ${_e(8)} !important;
        font-size: ${_e(20)} !important;
        border-top-right-radius: ${_e(8)} !important;
        border-bottom-right-radius: ${_e(8)} !important;
      }
      .NameBanner[data-size="0"] {
        opacity: 0;
        transform: translateX(-100%);
      }
    `},minimal:(a="#ABABAB",c=!0,b=1280/1920)=>{const _="white",k="#fff",j="#000",_e=et=>et*b+"px";return`

      .ChatOverlay-badge-icon {
          width:${_e(32)};
          height: ${_e(32)};
          fill: currentcolor;
          color: ${j};
      }

       .ChatOverlay-badge-container {
          background-color:${k};
          display:flex;
          flex-direction:row;
          padding: ${_e(6)} ${_e(12)} ${_e(6)} ${_e(6)};
          align-items: center;
          position: relative;
          border: none;
          cursor: pointer;
       }

       .ChatOverlay-badge-username {
          color:${j};
          padding:${_e(6)};
          font-size:${_e(18)};
          font-weight:700;
          text-transform: capitalize; 
       }

       .ChatOverlay-avatar {
          height: ${_e(120)};
          width: ${_e(120)};
          left:0;
          right:0;
          top:0;
          bottom:0;
          border-radius:50%;
       }


    .Banner, .NameBanner, .ChatOverlay {
        background: ${color(a).fade(color(a).alpha()*.7).toString()} !important;
        padding: ${_e(40)} ${_e(40)} ${_e(40)} ${_e(60)} !important;
        position: relative !important;
        margin-bottom: ${_e(40)} !important;
        transition: 300ms ease all;
        font-size: ${_e(34)} !important;
        left: 0;
      }

      .Banner:before, .NameBanner:before, .ChatOverlay:before {
        z-index: 1;
        content: "";
        position: absolute;
        left: 0;
        top: 0;
        width: 100%;
        height: 100%;
        background: rgba(0,0,0,0.6);
        transition: 300ms ease all;
        opacity: ${color(a).alpha()};
      }
      .Banner:after, .NameBanner:after, .ChatOverlay:after {
        z-index: 1;
        content: "";
        position: absolute;
        left: 0;
        top: 0;
        height: 100%;
        transition: 300ms ease all;
        width: ${_e(20)};
        background: ${color(a)};
        opacity: ${color(a).alpha()};
      }
      .Banner-body, .NameBanner-body, .ChatOverlay-body {
        color: ${_} !important;
        font-family: 'Roboto' !important;
        font-style: normal !important;
        font-weight: 700 !important;
        line-height: 120% !important;
        position: relative;
        z-index: 2;
      }
      .Banner-header {
        font-size: ${_e(90)};
        position: relative;
        z-index: 2;
      }
      .NameBanner {
        transform-origin: 0 100%;
        margin: 0 !important;
        transform: translateX(-100%);
        opacity: 0 !important;
        white-space: nowrap;
        ${c&&`
          opacity: 1 !important;
          transform: translateX(0);
        `}
      }

      .NameBanner[data-size="4"] {
        padding: ${_e(40)} ${_e(40)} ${_e(40)} ${_e(60)} !important;
        font-size: ${_e(34)} !important;
      }
      .NameBanner[data-size="3"] {
        padding: ${_e(16)} ${_e(40)} ${_e(16)} ${_e(60)} !important;
        font-size: ${_e(34)} !important;
      }
      .NameBanner[data-size="2"] {
        padding: ${_e(12)} ${_e(24)} ${_e(12)} ${_e(44)} !important;
        font-size: ${_e(24)} !important;
      }
      .NameBanner[data-size="1"], .NameBanner[data-size="0"] {
        padding: ${_e(12)} ${_e(16)} ${_e(12)} ${_e(36)} !important;
        font-size: ${_e(18)} !important;
      }
      .NameBanner[data-size="0"] {
        opacity: 0 !important;
        transform: translateX(-100%);
      }
    `},bubble:(a="#ABABAB",c=!0,b=1280/1920)=>{const _=color(a).lightness()<.6?"#FFF":"#000",k=color(a).lightness()<.6?"#FFF":"#000",j=color(a).lightness()<.6?"#000":"#FFF",_e=et=>et*b+"px";return`
      .ChatOverlay-badge-icon {
          width:${_e(32)};
          height: ${_e(32)};
          fill: currentcolor;
          color: ${j};
      }


       .ChatOverlay-badge-container {
          background-color:${k};
          display:flex;
          flex-direction:row;
          padding: ${_e(6)} ${_e(12)} ${_e(6)} ${_e(6)};
          align-items: center;
          z-index: 1;
          border: none;
          cursor: pointer;
          top: 0;
          margin-bottom: 2px;
          margin-left: -${_e(30)};
          border-radius: 30px;
       }

       .ChatOverlay-badge-username {
          color:${j};
          padding:${_e(6)};
          font-size:${_e(18)};
          font-weight:700;
          text-transform: capitalize; 
       }

       .ChatOverlayAvatar-container {
          height: ${_e(120)};
          width: ${_e(120)};
          top: 0;
       }
       .ChatOverlay-avatar {
          height: ${_e(120)};
          width: ${_e(120)};
          left:0;
          right:0;
          top:0;
          bottom:0;
          border-radius:50%;
       }


      .Banner, .ChatOverlay {
        transform: translateX(-50%);
        left: 50%;
        margin-bottom: ${_e(40)} !important;
      }

      .Banner, .NameBanner, .ChatOverlay {
        background: ${color(a)} !important;
        color: ${_} !important;
        border-radius: 500px !important;
        transition: 300ms ease all;

        /* Default Style */
        border: 4px solid ${_} !important;
        padding: ${_e(40)} ${_e(80)} !important;
        font-size: ${_e(40)} !important;
      }
      .Banner-body, .NameBanner-body, .ChatOverlay-body {
        color: ${_} !important;
        text-align: center !important;
        font-family: 'Roboto' !important;
        font-style: normal !important;
        font-weight: 700 !important;
        line-height: 120% !important;
      }
      .NameBanner {
        transform-origin: 0% 100%;
        transform: translateX(-100%);
        opacity: 0 !important;
        white-space: nowrap;
        ${c&&`
          opacity: 1 !important;
          transform: translateX(0);
        `}
      }

      ls-layout[layout="Presentation"][props*="\\"cover\\"\\:true"] > :first-child .NameBanner {
        top: 0% !important;
        transform: translateY(0%) !important;
        margin: ${_e(20)} ${_e(20)};
      }


      .NameBanner[data-size="4"] {
        padding: ${_e(40)} ${_e(80)} ${_e(40)} ${_e(80)} !important;
        font-size: ${_e(40)} !important;
      }
      .NameBanner[data-size="3"] {
        padding: ${_e(12)} ${_e(30)} ${_e(12)} ${_e(30)} !important;
        font-size: ${_e(40)} !important;
        margin: -${_e(20)} ${_e(20)};
      }
      .NameBanner[data-size="2"] {
        padding: ${_e(12)} ${_e(30)} ${_e(12)} ${_e(30)} !important;
        font-size: ${_e(26)} !important;
        margin: -${_e(8)} ${_e(8)};
      }
      .NameBanner[data-size="1"], .NameBanner[data-size="0"] {
        padding: ${_e(8)} ${_e(16)} ${_e(8)} ${_e(16)} !important;
        font-size: ${_e(18)} !important;
        border-width: ${_e(2)} !important;
        margin: -${_e(16)} ${_e(8)};
      }
      .NameBanner[data-size="0"] {
        opacity: 0 !important;
        transform: translateX(-100%);
      }
    `}},iconStyles={twitch:{icon:"Twitch"},youtube:{icon:"YouTube"},facebook:{icon:"Facebook"}},fixLink=a=>!a.startsWith("http:")&&!a.startsWith("https:")?`https://${a}`:a,ChatOverlay={name:"LS-ChatOverlay",sourceType:"ChatOverlay",create({onUpdate:a,onEvent:c},b){const _=document.createElement("div"),k=getProject(CoreContext.state.activeProjectId),j=k.compositor.getRoot(),{x:_e}=j.props.size,et=(_e??1280)/1920,nt=Tt=>Tt*et+"px";let it;const ft=(Tt,gt)=>{const ht=Tt.width/gt.width;return Tt.height/gt.height>=.25&&ht>=.75?4:ht>=.75?1:ht>=.5?-2:ht>.25?-3:-4};CoreContext.onInternal("ProjectChanged",()=>{const{bannerStyle:Tt}=k.props??{};Tt&&_t({...it,metadata:{...it.metadata,bannerStyle:Tt}})});const pt=React.memo(Tt=>{var gt,ht,Et;return(Tt==null?void 0:Tt.type)==="emoticon"&&((gt=Tt==null?void 0:Tt.data)==null?void 0:gt.type)==="direct"?React.createElement("img",{src:(ht=Tt==null?void 0:Tt.data)==null?void 0:ht.url,style:{height:nt(36)},alt:Tt==null?void 0:Tt.text}):(Tt==null?void 0:Tt.type)==="link"?React.createElement("a",{style:{color:"#FFF",wordBreak:"break-all"},target:"_blank",rel:"noreferrer",href:fixLink((Et=Tt==null?void 0:Tt.data)==null?void 0:Et.url)},Tt==null?void 0:Tt.text):React.createElement("span",null,Tt==null?void 0:Tt.text)}),mt=Tt=>{const gt={height:`${Tt.height}`,width:`${Tt.width}`,background:Tt.background||"transparent",display:"inline-block",verticalAlign:"middle",borderRadius:"50%",fontSize:`${Tt.fontSize}`};return React.createElement("div",{style:{...gt,position:"relative",marginRight:Tt==null?void 0:Tt.marginRight}},React.createElement("div",{style:{left:"50%",position:"absolute",top:"50%",transform:"translate(-50%, -50%)"}},Tt.username.substring(0,2).toUpperCase()))},St=Tt=>{const{message:gt,id:ht,username:Et,metadata:At}=Tt||{},[Bt,qt]=reactExports.useState(0),{index:zt,platform:Ht,avatar:ct,bannerStyle:dt}=At||{},lt=reactExports.useMemo(()=>iconStyles[Ht],[Ht]),kt=reactExports.useRef();return reactExports.useLayoutEffect(()=>{if(!kt.current)return;const Lt=()=>{const en=kt.current;en&&qt(ft({width:en.clientWidth,height:en.clientHeight},{width:k.compositor.getRoot().props.size.x,height:k.compositor.getRoot().props.size.y}))},Jt=new ResizeObserver(en=>{Lt()});return Lt(),Jt.observe(kt.current),()=>{kt!=null&&kt.current&&Jt.unobserve(kt==null?void 0:kt.current)}},[kt.current,k]),React.createElement(APIKitAnimation$1,{id:`${ht}_${zt}`,type:"chatoverlay",enter:APIKitAnimationTypes.SLIDE_IN_LEFT,exit:APIKitAnimationTypes.SLIDE_OUT_LEFT,duration:200},React.createElement("div",{className:"ChatOverlayContainer",style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",display:"flex",flexDirection:"row",justifyContent:"flex-start",alignItems:"flex-end",marginLeft:dt!==BannerStyle.BUBBLE?"5%":"0px"}},dt!==BannerStyle.BUBBLE?React.createElement("div",{style:{width:"100%",display:"flex"}},ct?React.createElement("span",{style:{marginRight:"20px"}},React.createElement("img",{src:ct,className:"ChatOverlay-avatar"})):React.createElement(mt,{height:nt(110),width:nt(120),background:primary(500),username:Et,marginRight:20,fontSize:nt(30)}),React.createElement("div",{style:{width:"100%"}},Et&&React.createElement("button",{className:"ChatOverlay-badge-container"},(lt==null?void 0:lt.icon)&&React.createElement(Icon$1,{className:"ChatOverlay-badge-icon",name:lt==null?void 0:lt.icon}),React.createElement("div",{className:"ChatOverlay-badge-username"},Et)),React.createElement("div",{className:"ChatOverlay",style:{padding:10,background:"orange",width:"fit-content",height:"fit-content",maxWidth:"84%",position:"relative"}},gt&&React.createElement("div",{className:"ChatOverlay-body",style:{gap:10,display:"flex",alignItems:"center",flexWrap:"wrap",verticalAlign:"middle"}},gt.map((Lt,Jt)=>React.createElement(pt,{key:Jt,...Lt})))))):React.createElement("div",{style:{width:"100%",display:"flex"}},React.createElement("div",{className:"ChatOverlay",style:{padding:10,background:"orange",width:"fit-content",height:"fit-content",maxWidth:"84%",position:"relative"}},React.createElement("div",{style:{display:"flex",marginTop:`-${nt(160)}`,alignItems:"flex-end",padding:`${nt(14)} ${nt(0)} ${nt(14)} ${nt(0)}`,marginLeft:`${Bt*10}px`}},ct?React.createElement("div",{className:"ChatOverlayAvatar-container"},React.createElement("img",{src:ct,className:"ChatOverlay-avatar"})):React.createElement("div",{className:"ChatOverlayAvatar-container"},React.createElement(mt,{height:nt(120),width:nt(120),background:primary(500),username:Et,fontSize:nt(30)})),Et&&React.createElement("button",{className:"ChatOverlay-badge-container"},(lt==null?void 0:lt.icon)&&React.createElement(Icon$1,{className:"ChatOverlay-badge-icon",name:lt==null?void 0:lt.icon}),React.createElement("div",{className:"ChatOverlay-badge-username"},Et))),gt&&React.createElement("div",{ref:kt,className:"ChatOverlay-body",style:{gap:10,alignItems:"center",flexWrap:"wrap",verticalAlign:"middle"}},gt.map((Lt,Jt)=>React.createElement(pt,{key:Jt,...Lt})))))))},yt=createRoot(_),_t=Tt=>yt.render(React.createElement(St,{...Tt}));return a(Tt=>{const{bannerStyle:gt=BannerStyle.DEFAULT}=k.props??{};it={...Tt,metadata:{...Tt.metadata,bannerStyle:gt}},_t(it)}),{root:_}}},Background$1={name:"LS-Background",sourceType:"Background",create({onUpdate:a,onRemove:c},{sourceProps:b}){c(()=>{clearInterval(j)});const _=document.createElement("div"),k=getProject(CoreContext.state.activeProjectId).role;let j;const _e=({source:pt,setStartAnimation:mt})=>{var ct,dt;const{src:St,type:yt,meta:_t,loop:Tt}=(pt==null?void 0:pt.sourceProps)||{},{id:gt,sourceType:ht}=pt||{},[Et,At]=React.useState(null),Bt=React.useRef(null);console.log("Updated current time",(ct=Bt==null?void 0:Bt.current)==null?void 0:ct.currentTime);const qt=React.useCallback(lt=>{Bt.current=lt,At(lt?lt.id:null)},[]),zt=React.useCallback(()=>{Bt!=null&&Bt.current&&Bt.current.play().catch(()=>{var lt;Bt.current.muted=!0,(lt=Bt.current)==null||lt.play()})},[St]),Ht=React.useCallback(()=>{j&&clearInterval(j),hasPermission(k,Permission.UpdateProject)&&trigger$1("VideoEnded",{id:gt,category:yt})},[St]);return React.useEffect(()=>{_t&&(Bt!=null&&Bt.current)&&Et&&hasPermission(k,Permission.ManageSelf)&&_t!=null&&_t.time&&(Bt.current.currentTime=Number(_t==null?void 0:_t.time))},[_t==null?void 0:_t.time,Et]),React.useEffect(()=>()=>{j&&clearInterval(j)},[gt]),React.useEffect(()=>{Et?Bt.current&&(Bt.current.src=St,Bt.current.play().catch(()=>{Bt.current.muted=!0,Bt.current.play()}),hasPermission(k,Permission.UpdateProject)&&(j=setInterval(()=>{if(Bt.current.duration){const lt=Bt.current.duration-Bt.current.currentTime;trigger$1("VideoTimeUpdate",{category:ht,id:gt,time:Math.floor(lt)})}},1e3))):j&&clearInterval(j)},[Et]),React.createElement(React.Fragment,{key:gt},St&&React.createElement("video",{loop:Tt,id:gt,ref:qt,style:{...(dt=b==null?void 0:b.meta)==null?void 0:dt.style,..._t.style},onLoadedData:zt,onEnded:Ht,onCanPlay:()=>mt(!0)}))},et=({source:pt,setStartAnimation:mt})=>{var gt;const{src:St,meta:yt,type:_t}=(pt==null?void 0:pt.sourceProps)||{},{id:Tt}=pt||{};return React.createElement(React.Fragment,{key:Tt},St&&React.createElement("img",{style:{...(gt=b==null?void 0:b.meta)==null?void 0:gt.style,...yt==null?void 0:yt.style},src:St,onLoad:()=>mt(!0)}))},nt=({source:pt})=>{const{type:mt}=pt.sourceProps,{id:St}=pt||{},[yt,_t]=React.useState(!1);return reactExports.useEffect(()=>{_t(!1)},[St]),React.createElement(APIKitAnimation$1,{id:St,type:"background",enter:APIKitAnimationTypes.FADE_IN,exit:APIKitAnimationTypes.FADE_OUT,duration:400},React.createElement("div",{style:{opacity:yt?1:0},className:"backgroundContainer background-transition"},St&&mt==="image"&&React.createElement(et,{source:pt,setStartAnimation:_t}),St&&mt==="video"&&React.createElement(_e,{source:pt,setStartAnimation:_t})))},it=createRoot(_),ft=pt=>it.render(React.createElement(React.Fragment,null,React.createElement(nt,{source:pt})));return a(pt=>{ft({...pt})}),{root:_}}},SourceTriggerMap=[{sourceType:"Overlay",trigger:"OverlayMetadataUpdate"},{sourceType:"Background",trigger:"BackgroundMetadataUpdate"}],Video2={name:"LS-Video-2",sourceType:"Video2",props:{id:{type:String,required:!0}},useSource(a,c){return a.find(b=>b.props.type===c.id)},create({onUpdate:a,onNewSource:c,onRemove:b},_){b(()=>{clearInterval(nt)});const k=document.createElement("div"),j=getProjectRoom(CoreContext.state.activeProjectId),_e=getProject(CoreContext.state.activeProjectId).role;let et,nt;const it=({source:mt})=>{var lt;const St=SourceTriggerMap.find(kt=>kt.sourceType===_.proxySource),{src:yt,type:_t,meta:Tt,loop:gt}=(mt==null?void 0:mt.value)||{},{id:ht}=mt||{},[Et,At]=React.useState(null),Bt=React.useRef(null),[qt,zt]=React.useState(!1);console.log("Updated current time",(lt=Bt==null?void 0:Bt.current)==null?void 0:lt.currentTime),React.useEffect(()=>{zt(!1)},[ht]);const Ht=React.useCallback(kt=>{Bt.current=kt,At(kt?kt.id:null)},[]),ct=React.useCallback(()=>{Bt!=null&&Bt.current&&Bt.current.play().catch(()=>{var kt;Bt.current.muted=!0,(kt=Bt.current)==null||kt.play()})},[yt]),dt=React.useCallback(()=>{nt&&clearInterval(nt),trigger$1("VideoEnded",{id:ht,category:_t})},[yt]);return React.useEffect(()=>{Tt&&(Bt!=null&&Bt.current)&&Et&&hasPermission(_e,Permission.ManageSelf)&&(Bt.current.currentTime=Number(Tt==null?void 0:Tt.time))},[Tt==null?void 0:Tt.time,Et]),React.useEffect(()=>()=>{nt&&clearInterval(nt)},[ht]),React.useEffect(()=>{if(!Et)nt&&clearInterval(nt);else if(Bt.current)return Bt.current.src=yt,gt&&(Bt.current.loop=!!gt),Bt.current.play().catch(()=>{Bt.current.muted=!0,Bt.current.play()}),nt=setInterval(()=>{if(Bt.current.duration){const kt=Bt.current.duration-Bt.current.currentTime;trigger$1("VideoTimeUpdate",{category:_t,id:ht,time:Math.floor(kt)})}},1e3),j==null?void 0:j.onData((kt,Lt)=>{var Jt,en;(Jt=Bt==null?void 0:Bt.current)!=null&&Jt.currentTime&&kt.type==="UserJoined"&&hasPermission(_e,Permission.ManageGuests)&&triggerInternal$1(St.trigger,{projectId:CoreContext.state.activeProjectId,role:_e,sourceId:Et,doTrigger:!0,metadata:{time:Math.floor((en=Bt==null?void 0:Bt.current)==null?void 0:en.currentTime)||0,owner:j==null?void 0:j.participantId,guest:Lt}})})},[Et]),React.createElement(APIKitAnimation$1,{id:ht,type:"video",enter:APIKitAnimationTypes.FADE_IN,exit:APIKitAnimationTypes.FADE_OUT,duration:400},React.createElement("div",{style:{opacity:qt?1:0,width:"100%",height:"100%"},className:"video-transition"},yt&&React.createElement("video",{id:ht,ref:Ht,style:_.style,..._.props,onLoadedData:ct,onEnded:dt,onCanPlayThrough:()=>zt(!0)})))},ft=createRoot(k),pt=()=>ft.render(React.createElement(it,{source:et}));return a(()=>{pt()}),c(mt=>{et=mt,pt()}),{root:k}}},Image2={name:"LS-Image-2",sourceType:"Image2",props:{id:{type:String,required:!0}},useSource(a,c){return a.find(b=>b.props.type===c.id)},create({onUpdate:a,onNewSource:c},b){const _=document.createElement("div");let k;const j=({source:nt})=>{const{src:it,meta:ft}=(nt==null?void 0:nt.value)||{},{id:pt}=nt||{},[mt,St]=React.useState(!1);return React.useEffect(()=>{St(!1)},[pt]),React.createElement(APIKitAnimation$1,{id:pt,type:"image",enter:APIKitAnimationTypes.FADE_IN,exit:APIKitAnimationTypes.FADE_OUT,duration:400},React.createElement("div",{style:{opacity:mt?1:0,width:"100%",height:"100%"},className:"image-transition"},it&&React.createElement("img",{style:{...b==null?void 0:b.style,...ft==null?void 0:ft.style},src:it,onLoad:()=>St(!0)})))},_e=createRoot(_),et=()=>_e.render(React.createElement(j,{source:k}));return a(()=>{et()}),c(nt=>{k=nt,et()}),{root:_}}},RTMPSource={name:"LS-RTMP-Source",sourceType:"RTMP",props:{},useSource(a,c){return a.find(b=>isMatch(b.props,c.sourceProps))},create({onUpdate:a,onNewSource:c,onRemove:b},_){const k=document.createElement("div"),j=getProject(CoreContext.state.activeProjectId);getProjectRoom(CoreContext.state.activeProjectId),Object.assign(k.style,{position:"relative"});let _e,et=_;const nt=(mt,St)=>{const yt=mt/St.width;return yt>=.5?3:yt>.25?2:yt>.15?1:0},it=({props:mt,source:St})=>{var Bt,qt;const yt=reactExports.useRef(),{volume:_t=1,isHidden:Tt=!1}=mt||{},[gt,ht]=reactExports.useState(0),Et=mt==null?void 0:mt.isMuted,At=!(mt!=null&&mt.isHidden)&&((Bt=St==null?void 0:St.props)==null?void 0:Bt.videoEnabled);return reactExports.useEffect(()=>{yt.current&&(yt.current.play().catch(zt=>{document.addEventListener("click",()=>{var Ht;return(Ht=yt.current)==null?void 0:Ht.play()},{once:!0})}),St!=null&&St.value&&(St==null?void 0:St.value)!==yt.current.srcObject?yt.current.srcObject=St==null?void 0:St.value:St!=null&&St.value||(yt.current.srcObject=null))},[yt.current,St==null?void 0:St.value]),reactExports.useEffect(()=>{!mt&&yt.current&&(yt.current.srcObject=null,yt.current=null)},[mt]),reactExports.useLayoutEffect(()=>{if(!yt.current)return;const zt=()=>{const ct=yt.current;ct&&ht(nt(ct.clientWidth,{width:j.compositor.getRoot().props.size.x,height:j.compositor.getRoot().props.size.y}))},Ht=new ResizeObserver(ct=>{zt()});return zt(),Ht==null||Ht.observe(yt.current),()=>{yt.current&&(Ht==null||Ht.unobserve(yt.current),yt.current.srcObject=null)}},[yt.current,j]),reactExports.useEffect(()=>{yt.current&&(yt.current.volume=_t)},[yt.current,_t]),React.createElement("div",{style:{position:"relative",display:"flex",height:"100%",width:"100%"}},React.createElement("div",{style:{background:"#222",position:"absolute",height:"100%",width:"100%",fontSize:"43px",color:"rgba(255,255,255,0.6)",display:"flex",alignItems:"center",justifyContent:"center",opacity:At?"0":"1"}},!!St&&React.createElement("div",{style:{borderRadius:"50%",background:"#555",width:"70px",height:"70px",textTransform:"uppercase",display:"flex",alignItems:"center",justifyContent:"center",lineHeight:"1em"}},"RTMP")),React.createElement("div",{style:{position:"relative",display:"flex",height:"100%",width:"100%",...!!((qt=St==null?void 0:St.props)!=null&&qt.mirrored)&&{transform:"scaleX(-1)"}}},React.createElement("video",{ref:yt,autoPlay:!0,muted:Et,disablePictureInPicture:!0,playsInline:!0,style:{left:"50%",top:"50%",position:"relative",transform:"translate3d(-50%, -50%, 0)",height:"100%",opacity:At?"1":"0",objectFit:"cover",background:"rgba(0,0,0,0.6)"}})),!!(St!=null&&St.props.displayName)&&React.createElement("div",{className:"NameBannerContainer",style:{width:"100%",height:"100%",position:"absolute"}},React.createElement("div",{className:"NameBanner","data-size":gt,style:{padding:"12px 30px",width:"fit-content",height:"fit-content",top:"100%",transform:"translateY(-100%)",left:0}},React.createElement("div",{className:"NameBanner-body"},St==null?void 0:St.props.displayName))))},ft=createRoot(k),pt=()=>ft.render(React.createElement(it,{source:_e,props:et}));return a(mt=>{et=mt,pt()}),c(mt=>{_e=mt,pt()}),b(mt=>{et=mt,pt()}),{root:k}}},Transforms=Object.freeze(Object.defineProperty({__proto__:null,Background:Background$1,Banner:Banner$1,ChatOverlay,Element,Image:Image$1,Image2,Logo:Logo$1,Overlay,RTMPSource,RoomParticipant:RoomParticipant$1,Square,Video,Video2},Symbol.toStringTag,{value:"Module"}));/*! (c) Andrea Giammarchi - ISC */var self$1={};try{self$1.WeakMap=WeakMap}catch(a){self$1.WeakMap=function(c,b){var _=b.defineProperty,k=b.hasOwnProperty,j=_e.prototype;return j.delete=function(nt){return this.has(nt)&&delete nt[this._]},j.get=function(nt){return this.has(nt)?nt[this._]:void 0},j.has=function(nt){return k.call(nt,this._)},j.set=function(nt,it){return _(nt,this._,{configurable:!0,value:it}),this},_e;function _e(nt){_(this,"_",{value:"_@ungap/weakmap"+c++}),nt&&nt.forEach(et,this)}function et(nt){this.set(nt[0],nt[1])}}(Math.random(),Object)}const WeakMap$1=self$1.WeakMap;/*! (c) Andrea Giammarchi - ISC */var UID="-"+Math.random().toFixed(6)+"%",UID_IE=!1;try{(function(a,c,b){return c in a&&(a.innerHTML="<p "+b+'="'+UID+'"></p>',a[c].childNodes[0].getAttribute(b)==UID)})(document.createElement("template"),"content","tabindex")||(UID="_dt: "+UID.slice(1,-1)+";",UID_IE=!0)}catch(a){}var UIDC="<!--"+UID+"-->",COMMENT_NODE=8,ELEMENT_NODE$1=1,TEXT_NODE=3,SHOULD_USE_TEXT_CONTENT=/^(?:plaintext|script|style|textarea|title|xmp)$/i,VOID_ELEMENTS=/^(?:area|base|br|col|embed|hr|img|input|keygen|link|menuitem|meta|param|source|track|wbr)$/i;/*! (c) Andrea Giammarchi - ISC */function domsanitizer(a){return a.join(UIDC).replace(selfClosing,fullClosing).replace(attrSeeker,attrReplacer)}var spaces=" \\f\\n\\r\\t",almostEverything="[^"+spaces+`\\/>"'=]+`,attrName="["+spaces+"]+"+almostEverything,tagName="<([A-Za-z]+[A-Za-z0-9:._-]*)((?:",attrPartials=`(?:\\s*=\\s*(?:'[^']*?'|"[^"]*?"|<[^>]*?>|`+almostEverything.replace("\\/","")+"))?)",attrSeeker=new RegExp(tagName+attrName+attrPartials+"+)(["+spaces+"]*/?>)","g"),selfClosing=new RegExp(tagName+attrName+attrPartials+"*)(["+spaces+"]*/>)","g"),findAttributes=new RegExp("("+attrName+`\\s*=\\s*)(['"]?)`+UIDC+"\\2","gi");function attrReplacer(a,c,b,_){return"<"+c+b.replace(findAttributes,replaceAttributes)+_}function replaceAttributes(a,c,b){return c+(b||'"')+UID+(b||'"')}function fullClosing(a,c,b){return VOID_ELEMENTS.test(c)?a:"<"+c+b+"></"+c+">"}const{isArray}=Array,{indexOf,slice}=[],umap=a=>({get:c=>a.get(c),set:(c,b)=>(a.set(c,b),b)}),ELEMENT_NODE=1,nodeType=111,remove=({firstChild:a,lastChild:c})=>{const b=document.createRange();return b.setStartAfter(a),b.setEndAfter(c),b.deleteContents(),a},diffable=(a,c)=>a.nodeType===nodeType?1/c<0?c?remove(a):a.lastChild:c?a.valueOf():a.firstChild:a,persistent=a=>{const{childNodes:c}=a,{length:b}=c;if(b<2)return b?c[0]:a;const _=slice.call(c,0),k=_[0],j=_[b-1];return{ELEMENT_NODE,nodeType,firstChild:k,lastChild:j,valueOf(){if(c.length!==b){let _e=0;for(;_e<b;)a.appendChild(_[_e++])}return a}}};/*! (c) Andrea Giammarchi - ISC */var createContent=function(a){var c="fragment",b="template",_="content"in _e(b),k=_?function(nt){var it=_e(b);return it.innerHTML=nt,it.content}:function(nt){var it=_e(c),ft=_e(b),pt=null;if(/^[^\S]*?<(col(?:group)?|t(?:head|body|foot|r|d|h))/i.test(nt)){var mt=RegExp.$1;ft.innerHTML="<table>"+nt+"</table>",pt=ft.querySelectorAll(mt)}else ft.innerHTML=nt,pt=ft.childNodes;return j(it,pt),it};return function(it,ft){return(ft==="svg"?et:k)(it)};function j(nt,it){for(var ft=it.length;ft--;)nt.appendChild(it[0])}function _e(nt){return nt===c?a.createDocumentFragment():a.createElementNS("http://www.w3.org/1999/xhtml",nt)}function et(nt){var it=_e(c),ft=_e("div");return ft.innerHTML='<svg xmlns="http://www.w3.org/2000/svg">'+nt+"</svg>",j(it,ft.firstChild.childNodes),it}}(document);const udomdiff=(a,c,b,_,k)=>{const j=b.length;let _e=c.length,et=j,nt=0,it=0,ft=null;for(;nt<_e||it<et;)if(_e===nt){const pt=et<j?it?_(b[it-1],-0).nextSibling:_(b[et-it],0):k;for(;it<et;)a.insertBefore(_(b[it++],1),pt)}else if(et===it)for(;nt<_e;)(!ft||!ft.has(c[nt]))&&a.removeChild(_(c[nt],-1)),nt++;else if(c[nt]===b[it])nt++,it++;else if(c[_e-1]===b[et-1])_e--,et--;else if(c[nt]===b[et-1]&&b[it]===c[_e-1]){const pt=_(c[--_e],-1).nextSibling;a.insertBefore(_(b[it++],1),_(c[nt++],-1).nextSibling),a.insertBefore(_(b[--et],1),pt),c[_e]=b[et]}else{if(!ft){ft=new Map;let pt=it;for(;pt<et;)ft.set(b[pt],pt++)}if(ft.has(c[nt])){const pt=ft.get(c[nt]);if(it<pt&&pt<et){let mt=nt,St=1;for(;++mt<_e&&mt<et&&ft.get(c[mt])===pt+St;)St++;if(St>pt-it){const yt=_(c[nt],0);for(;it<pt;)a.insertBefore(_(b[it++],1),yt)}else a.replaceChild(_(b[it++],1),_(c[nt++],-1))}else nt++}else a.removeChild(_(c[nt++],-1))}return b};/*! (c) Andrea Giammarchi - ISC */var importNode=function(a,c,b,_,k){var j=k in a,_e=a.createDocumentFragment();_e[c](a[_]("g")),_e[c](a[_](""));var et=j?a[k](_e,!0):_e[b](!0);return et.childNodes.length<2?function nt(it,ft){for(var pt=it[b](),mt=it.childNodes||[],St=mt.length,yt=0;ft&&yt<St;yt++)pt[c](nt(mt[yt],ft));return pt}:j?a[k]:function(nt,it){return nt[b](!!it)}}(document,"appendChild","cloneNode","createTextNode","importNode"),trim="".trim||function(){return String(this).replace(/^\s+|\s+/g,"")},normalizeAttributes=UID_IE?function(a,c){var b=c.join(" ");return c.slice.call(a,0).sort(function(_,k){return b.indexOf(_.name)<=b.indexOf(k.name)?-1:1})}:function(a,c){return c.slice.call(a,0)};function find(a,c){for(var b=c.length,_=0;_<b;)a=a.childNodes[c[_++]];return a}function parse(a,c,b,_){for(var k=a.childNodes,j=k.length,_e=0;_e<j;){var et=k[_e];switch(et.nodeType){case ELEMENT_NODE$1:var nt=_.concat(_e);parseAttributes(et,c,b,nt),parse(et,c,b,nt);break;case COMMENT_NODE:var it=et.textContent;if(it===UID)b.shift(),c.push(SHOULD_USE_TEXT_CONTENT.test(a.nodeName)?Text(a,_):Any(et,_.concat(_e)));else switch(it.slice(0,2)){case"/*":if(it.slice(-2)!=="*/")break;case"👻":a.removeChild(et),_e--,j--}break;case TEXT_NODE:SHOULD_USE_TEXT_CONTENT.test(a.nodeName)&&trim.call(et.textContent)===UIDC&&(b.shift(),c.push(Text(a,_)));break}_e++}}function parseAttributes(a,c,b,_){for(var k=a.attributes,j=[],_e=[],et=normalizeAttributes(k,b),nt=et.length,it=0;it<nt;){var ft=et[it++],pt=ft.value===UID,mt;if(pt||1<(mt=ft.value.split(UIDC)).length){var St=ft.name;if(j.indexOf(St)<0){j.push(St);var yt=b.shift().replace(pt?/^(?:|[\S\s]*?\s)(\S+?)\s*=\s*('|")?$/:new RegExp("^(?:|[\\S\\s]*?\\s)("+St+`)\\s*=\\s*('|")[\\S\\s]*`,"i"),"$1"),_t=k[yt]||k[yt.toLowerCase()];if(pt)c.push(Attr(_t,_,yt,null));else{for(var Tt=mt.length-2;Tt--;)b.shift();c.push(Attr(_t,_,yt,mt))}}_e.push(ft)}}nt=_e.length,it=0;for(var gt=0<nt&&UID_IE&&!("ownerSVGElement"in a);it<nt;){var ht=_e[it++];gt&&(ht.value=""),a.removeAttribute(ht.name)}var Et=a.nodeName;if(/^script$/i.test(Et)){var At=document.createElement(Et);for(nt=k.length,it=0;it<nt;)At.setAttributeNode(k[it++].cloneNode(!0));At.textContent=a.textContent,a.parentNode.replaceChild(At,a)}}function Any(a,c){return{type:"any",node:a,path:c}}function Attr(a,c,b,_){return{type:"attr",node:a,path:c,name:b,sparse:_}}function Text(a,c){return{type:"text",node:a,path:c}}var parsed=umap(new WeakMap$1);function createInfo(a,c){var b=(a.convert||domsanitizer)(c),_=a.transform;_&&(b=_(b));var k=createContent(b,a.type);cleanContent(k);var j=[];return parse(k,j,c.slice(0),[]),{content:k,updates:function(_e){for(var et=[],nt=j.length,it=0,ft=0;it<nt;){var pt=j[it++],mt=find(_e,pt.path);switch(pt.type){case"any":et.push({fn:a.any(mt,[]),sparse:!1});break;case"attr":var St=pt.sparse,yt=a.attribute(mt,pt.name,pt.node);St===null?et.push({fn:yt,sparse:!1}):(ft+=St.length-2,et.push({fn:yt,sparse:!0,values:St}));break;case"text":et.push({fn:a.text(mt),sparse:!1}),mt.textContent="";break}}return nt+=ft,function(){var _t=arguments.length;if(nt!==_t-1)throw new Error(_t-1+" values instead of "+nt+`
`+c.join("${value}"));for(var Tt=1,gt=1;Tt<_t;){var ht=et[Tt-gt];if(ht.sparse){var Et=ht.values,At=Et[0],Bt=1,qt=Et.length;for(gt+=qt-2;Bt<qt;)At+=arguments[Tt++]+Et[Bt++];ht.fn(At)}else ht.fn(arguments[Tt++])}return _e}}}}function createDetails(a,c){var b=parsed.get(c)||parsed.set(c,createInfo(a,c));return b.updates(importNode.call(document,b.content,!0))}var empty=[];function domtagger(a){var c=empty,b=cleanContent;return function(_){return c!==_&&(b=createDetails(a,c=_)),b.apply(null,arguments)}}function cleanContent(a){for(var c=a.childNodes,b=c.length;b--;){var _=c[b];_.nodeType!==1&&trim.call(_.textContent).length===0&&a.removeChild(_)}}/*! (c) Andrea Giammarchi - ISC */var hyperStyle=function(){var a=/acit|ex(?:s|g|n|p|$)|rph|ows|mnc|ntw|ine[ch]|zoo|^ord/i,c=/([^A-Z])([A-Z]+)/g;return function(et,nt){return"ownerSVGElement"in et?_(et,nt):j(et.style,!1)};function b(_e,et,nt){return et+"-"+nt.toLowerCase()}function _(_e,et){var nt;return et?nt=et.cloneNode(!0):(_e.setAttribute("style","--hyper:style;"),nt=_e.getAttributeNode("style")),nt.value="",_e.setAttributeNode(nt),j(nt,!0)}function k(_e){var et,nt=[];for(et in _e)nt.push(et.replace(c,b),":",_e[et],";");return nt.join("")}function j(_e,et){var nt,it;return function(ft){var pt,mt,St,yt;switch(typeof ft){case"object":if(ft){if(nt==="object"){if(!et&&it!==ft)for(mt in it)mt in ft||(_e[mt]="")}else et?_e.value="":_e.cssText="";pt=et?{}:_e;for(mt in ft)yt=ft[mt],St=typeof yt=="number"&&!a.test(mt)?yt+"px":yt,!et&&/^--/.test(mt)?pt.setProperty(mt,St):pt[mt]=St;nt="object",et?_e.value=k(it=pt):it=ft;break}default:it!=ft&&(nt="string",it=ft,et?_e.value=ft||"":_e.cssText=ft||"");break}}}}();const aria=a=>c=>{for(const b in c){const _=b==="role"?b:`aria-${b}`,k=c[b];k==null?a.removeAttribute(_):a.setAttribute(_,k)}},attribute=(a,c)=>{let b,_=!0;const k=document.createAttributeNS(null,c);return j=>{b!==j&&(b=j,b==null?_||(a.removeAttributeNode(k),_=!0):(k.value=j,_&&(a.setAttributeNodeNS(k),_=!1)))}},boolean=(a,c,b)=>_=>{b!==!!_&&((b=!!_)?a.setAttribute(c,""):a.removeAttribute(c))},data=({dataset:a})=>c=>{for(const b in c){const _=c[b];_==null?delete a[b]:a[b]=_}},event=(a,c)=>{let b,_=c.slice(2);return!(c in a)&&c.toLowerCase()in a&&(_=_.toLowerCase()),k=>{const j=isArray(k)?k:[k,!1];b!==j[0]&&(b&&a.removeEventListener(_,b,j[1]),(b=j[0])&&a.addEventListener(_,b,j[1]))}},ref=a=>c=>{typeof c=="function"?c(a):c.current=a},setter=(a,c)=>c==="dataset"?data(a):b=>{a[c]=b},hyperProperty=(a,c)=>{let b;return _=>{b!==_&&(b=_,a[c]!==_&&(_==null?(a[c]="",a.removeAttribute(c)):a[c]=_))}},readOnly=/^(?:form|list)$/i,text=(a,c)=>a.ownerDocument.createTextNode(c);function Tagger(a){return this.type=a,domtagger(this)}Tagger.prototype={attribute(a,c,b){const _=this.type==="svg";switch(c){case"class":if(_)return attribute(a,c);c="className";case"props":return setter(a,c);case"aria":return aria(a);case"style":return hyperStyle(a,b,_);case"ref":return ref(a);case".dataset":return data(a);default:return c.slice(0,1)==="."?setter(a,c.slice(1)):c.slice(0,1)==="?"?boolean(a,c.slice(1)):c.slice(0,2)==="on"?event(a,c):c in a&&!(_||readOnly.test(c))?hyperProperty(a,c):attribute(a,c)}},any(a,c){const{type:b}=this;let _=!1,k;const j=_e=>{switch(typeof _e){case"string":case"number":case"boolean":_?k!==_e&&(k=_e,c[0].textContent=_e):(_=!0,k=_e,c=udomdiff(a.parentNode,c,[text(a,_e)],diffable,a));break;case"function":j(_e(a));break;case"object":case"undefined":if(_e==null){_=!1,c=udomdiff(a.parentNode,c,[],diffable,a);break}default:if(_=!1,k=_e,isArray(_e))if(_e.length===0)c.length&&(c=udomdiff(a.parentNode,c,[],diffable,a));else switch(typeof _e[0]){case"string":case"number":case"boolean":j(String(_e));break;case"function":j(_e.map(invoke,a));break;case"object":isArray(_e[0])&&(_e=_e.concat.apply([],_e));default:c=udomdiff(a.parentNode,c,_e,diffable,a);break}else"ELEMENT_NODE"in _e?c=udomdiff(a.parentNode,c,_e.nodeType===11?slice.call(_e.childNodes):[_e],diffable,a):"text"in _e?j(String(_e.text)):"any"in _e?j(_e.any):"html"in _e?c=udomdiff(a.parentNode,c,slice.call(createContent([].concat(_e.html).join(""),b).childNodes),diffable,a):"length"in _e&&j(slice.call(_e));break}};return j},text(a){let c;const b=_=>{if(c!==_){c=_;const k=typeof _;k==="object"&&_?"text"in _?b(String(_.text)):"any"in _?b(_.any):"html"in _?b([].concat(_.html).join("")):"length"in _&&b(slice.call(_).join("")):k==="function"?b(_(a)):a.textContent=_??""}};return b}};function invoke(a){return a(this)}const{create,freeze,keys}=Object,cache=umap(new WeakMap$1),createRender=a=>({html:outer("html",a),svg:outer("svg",a),render(c,b){const _=typeof b=="function"?b():b,k=cache.get(c)||cache.set(c,createCache()),j=_ instanceof LighterHole?unroll(a,k,_):_;return j!==k.wire&&(k.wire=j,c.textContent="",c.appendChild(j.valueOf())),c}}),createCache=()=>({stack:[],entry:null,wire:null}),outer=(a,c)=>{const b=umap(new WeakMap$1),_=j=>function(){return unroll(c,j,k.apply(null,arguments))};return k.for=(j,_e)=>{const et=b.get(j)||b.set(j,create(null));return et[_e]||(et[_e]=_(createCache()))},k.node=function(){return unroll(c,createCache(),k.apply(null,arguments)).valueOf()},k;function k(){return new LighterHole(a,tta.apply(null,arguments))}},unroll=(a,c,{type:b,template:_,values:k})=>{const{length:j}=k;unrollValues(a,c,k,j);let{entry:_e}=c;if(!_e||_e.template!==_||_e.type!==b){const et=new a(b);c.entry=_e={type:b,template:_,tag:et,wire:persistent(et(_,...k))}}else _e.tag(_,...k);return _e.wire},unrollValues=(a,{stack:c},b,_)=>{for(let k=0;k<_;k++){const j=b[k];j instanceof Hole?b[k]=unroll(a,c[k]||(c[k]=createCache()),j):isArray(j)?unrollValues(a,c[k]||(c[k]=createCache()),j,j.length):c[k]=null}_<c.length&&c.splice(_)};freeze(LighterHole);function LighterHole(a,c){this.type=a,this.template=c.shift(),this.values=c}const Hole=LighterHole,{render,html,svg}=createRender(Tagger);function tta(){let a=[],c=0,{length:b}=arguments;for(;c<b;)a.push(arguments[c++]);return a}const Free={name:"Free",layout:({props:a,children:c,size:b})=>c.reduce((_,k)=>{const{size:j={x:"100%",y:"100%"},position:_e={x:0,y:0},opacity:et=1}=k.props;return{..._,[k.id]:{position:{x:_e.x,y:_e.y},size:{x:j.x,y:j.y},opacity:et}}},{})},Column={name:"Column",layout:({props:a={},children:c,size:b})=>{let{justify:_="center",align:k="center",cover:j=!1,margin:_e={},dimensions:et=16/9,reverse:nt=!1}=a;const it=j?0:Math.min(b.y/6,12);_e={left:it,right:it,top:it,bottom:it,between:it,..._e};const ft=b.y-_e.top-_e.bottom,pt=b.x-_e.left-_e.right,mt=_e.between*((c.length||1)-1),St=Math.min(pt,(ft-mt)/(c.length||1)*et),yt=St/et;return html.node`
      <div style=${{height:"100%",width:j?b.x+"px":"auto",display:"flex",flexDirection:nt?"column-reverse":"column",justifyContent:_,alignItems:k,paddingLeft:_e.left+"px",paddingTop:_e.top+"px",paddingBottom:_e.bottom+"px",paddingRight:_e.right+"px"}}>
      ${c.map((_t,Tt)=>html.node`<div data-node-id=${_t.id} .data=${{entryTransition:{delay:400+Tt*100,offset:{x:0,y:"100%"},scale:{x:.8,y:.8},opacity:0},exitTransition:{offset:{x:0,y:1e3},scale:{x:.8,y:.8},opacity:0},borderRadius:j?0:5}} style=${{display:"flex",width:j?"100%":St+"px",height:j?yt+"px":"auto",aspectRatio:et,marginBottom:Tt===c.length-1?0:_e.between+"px",flexGrow:0,flexShrink:1,flexBasis:yt+"px"}}></div>`)}
      </div>
    `}},Row={name:"Row",layout:({props:a={},children:c,size:b})=>{let{justify:_="center",align:k="center",cover:j=!1,margin:_e={},dimensions:et,maxWidth:nt=1,reverse:it=!1}=a;const ft=j?0:Math.min(b.y/6,12);_e={left:ft,right:ft,top:ft,bottom:ft,between:ft,..._e};const pt=b.y-_e.top-_e.bottom,mt=b.x-_e.left-_e.right,St=_e.between*((c.length||1)-1);let yt=pt,_t=Math.min((mt-St)/(c.length||1),et?pt*et:mt,nt*b.x);return et&&(yt=_t/et),html.node`
      <div style=${{height:j?b.y+"px":"auto",width:"100%",display:"flex",flexDirection:it?"row-reverse":"row",justifyContent:_,alignItems:k,paddingLeft:_e.left+"px",paddingTop:_e.top+"px",paddingBottom:_e.bottom+"px",paddingRight:_e.right+"px"}}>
          ${c.map((Tt,gt)=>html.node`<div data-node-id=${Tt.id} .data=${{entryTransition:{delay:400+gt*100,offset:{x:0,y:"100%"},scale:{x:.8,y:.8},opacity:0},exitTransition:{offset:{x:0,y:1e3},scale:{x:.8,y:.8},opacity:0},borderRadius:j?0:5}} style=${{display:"flex",height:j?"100%":yt+"px",width:_t+"px",marginRight:gt===c.length-1?0:_e.between+"px",flexGrow:0,flexShrink:1,flexBasis:_t+"px"}}></div>`)}
      </div>
    `}},toMatrix=(a,c)=>a.reduce((b,_,k)=>(k%c==0?b.push([k]):b[b.length-1].push(k))&&b,[]),Grid={name:"Grid",layout:({props:a={},children:c,size:b})=>{let{dimensions:_,numPerRow:k,margin:j,cover:_e=!1,maxWidth:et,between:nt}=a;const it=c.length===0||_e?0:nt||Math.min(b.y/c.length/10,30);j=j??it;const ft=b.x<b.y;nt=typeof nt=="number"?nt:j;let pt=[];k?pt=toMatrix(c,k):pt=ft?getTallGrid(c.length):getWideGrid(c.length);const mt=(b.y-(j*2+nt*(pt.length-1)))/pt.length,St=b.x-j*2;return html.node`
    <div style=${{display:"flex",width:"100%",height:"100%",flexDirection:"column",justifyContent:"center",padding:j+"px",gap:nt+"px",flexGrow:0}}>${pt.map((yt,_t)=>Row.layout({props:{justify:"center",dimensions:_,cover:_e,maxWidth:et||1/(pt[0].length||1),margin:{top:0,right:0,left:0,bottom:0,between:nt}},children:yt.map(Tt=>c[Tt]),size:{y:mt,x:St}}))}</div>`}},Presentation={name:"Presentation",layout:({props:a={},children:c,size:b})=>{let{margin:_,cover:k=!1,barWidth:j=.2,barPosition:_e="side",presentationDimensions:et=16/9,viewerDimensions:nt=16/9,justifyViewers:it="center",useGrid:ft=!1,reverse:pt=!1}=a;const mt=_e==="side"?b.x*j:b.y*j,St=c[0],yt=c.filter(Bt=>Bt!==St),_t=c.length<=1?0:Math.min(b.x/80,30);if(_=_??_t,!St)return Grid.layout({props:a,children:c,size:b});const Tt=c[1],gt={...b};Tt&&(_e==="side"?(gt.x=b.x-mt,gt.y=gt.x/et):(gt.y=b.y-mt,gt.x=gt.y*et));let ht,Et={};ft?(ht=Grid.layout,Et={cover:k,...k?{maxWidth:1}:{margin:_}}):(ht=_e==="side"?Column.layout:Row.layout,Et={margin:{top:_,left:_,bottom:_,right:_,between:_},dimensions:nt,justify:it,align:"flex-end"});const At=_e==="side"?pt?"left":"right":pt?"top":"bottom";return html.node`
      <div style=${{display:"flex",flexDirection:(_e==="side"?"row":"column")+(pt?"-reverse":""),justifyContent:"space-around",alignItems:"center",position:"relative",padding:k?0:_,[`padding-${At}`]:0}}>
        ${c[0]&&html.node`<div style=${{width:gt.x,height:gt.y,display:"flex",flexGrow:1}}>
            <div data-node-id=${St.id} .data=${{dimensions:et,borderRadius:k?0:5,entryTransition:{delay:0,offset:{x:0,y:1e3},scale:{x:.5,y:.5},opacity:0},exitTransition:{offset:{x:0,y:1e3},scale:{x:2,y:2},opacity:0}}} style=${{width:"100%",height:"100%",...k?{position:"absolute",top:0,left:0,width:ft&&Tt?100-j*100+"%":"100%",height:"100%"}:{}}} />
          </div>`}
        ${html.node`<div style=${{..._e==="side"?{maxWidth:j*100+"%",height:"100%"}:{maxHeight:j*100+"%",width:"100%"}}}>${Tt&&ht({props:Et,children:yt,size:_e==="side"?{x:mt,y:b.y}:{x:b.x,y:mt}})}</div>`}
      </div>
    `}},Layered={name:"Layered",layout:({props:a={},children:c,size:b})=>html.node`<div style=${{width:"100%",height:"100%",position:"relative"}}>
      ${c.map((_,k)=>html.node`<div data-node-id=${_.id} .data=${{zIndex:k+1}} style=${{position:"absolute",inset:"0px"}}></div>`)}
    </div>`},getWideGrid=(a=0)=>{switch(a){case 0:return[[]];case 1:return[[0]];case 2:return[[0,1]];case 3:return[[0,1],[2]];case 4:return[[0,1],[2,3]];case 5:return[[0,1,2],[3,4]];case 6:return[[0,1,2],[3,4,5]];case 7:return[[0,1,2],[3,4,5],[6]];case 8:return[[0,1,2],[3,4,5],[6,7]]}const c=Array(a).fill(null).map((b,_)=>_);return toMatrix(c,Math.round(Math.sqrt(a)))},getTallGrid=(a=0)=>{switch(a){case 0:return[[]];case 1:return[[0]];case 2:return[[0],[1]];case 3:return[[0,1],[2]];case 4:return[[0,1],[2,3]];case 5:return[[0,1],[2,3],[4]];case 6:return[[0,1],[2,3],[4,5]];case 7:return[[0,1],[2,3],[4,5],[6]];case 8:return[[0,1],[2,3],[4,5],[6,7]]}const c=Array(a).fill(null).map((b,_)=>_);return toMatrix(c,Math.ceil(Math.sqrt(c.length))-1)},Layouts=Object.freeze(Object.defineProperty({__proto__:null,Column,Free,Grid,Layered,Presentation,Row},Symbol.toStringTag,{value:"Module"})),updateMediaStreamTracks=(a,c)=>{const b={audio:a.getAudioTracks()[0],video:a.getVideoTracks()[0]};b.audio!==c.audio&&(b.audio&&a.removeTrack(b.audio),c.audio&&a.addTrack(c.audio)),b.video!==c.video&&(b.video&&a.removeTrack(b.video),c.video&&a.addTrack(c.video))},RoomParticipant={type:"RoomParticipant",valueType:MediaStream,props:{id:{},type:{},videoEnabled:{},audioEnabled:{}},init({addSource:a,removeSource:c,updateSource:b,getSource:_}){CoreContext.on("RoomJoined",({room:k})=>{let j={},_e=[],et=[],nt={};const it=()=>{_e.filter(ft=>(ft==null?void 0:ft.type)==="camera"&&(ft==null?void 0:ft.isExternal)===!0).forEach(ft=>{var pt,mt,St;if(ft.type==="camera"){const yt=nt[ft.id],_t=k.getParticipant(ft.participantId),Tt=k.getTrack(ft.id);if(_(ft==null?void 0:ft.id)){const ht=k.getTrack((pt=_t==null?void 0:_t.meta[ft.id])==null?void 0:pt.microphone);updateMediaStreamTracks(yt,{video:Tt==null?void 0:Tt.mediaStreamTrack,audio:ht==null?void 0:ht.mediaStreamTrack}),b(ft.id,{videoEnabled:!!(Tt&&!Tt.isMuted),audioEnabled:!!(ht&&!ht.isMuted),displayName:((mt=_t==null?void 0:_t.meta[ft.id])==null?void 0:mt.displayName)||"External Track",mirrored:(St=_t==null?void 0:_t.meta[ft.id])==null?void 0:St.isMirrored,microphone:ht,external:ft==null?void 0:ft.isExternal})}}}),et.forEach(ft=>{var Et;const pt=nt[ft.id],mt=nt[ft.id+"-screen"],St=ft.trackIds.find(At=>{const Bt=k.getTrack(At);return(Bt==null?void 0:Bt.type)==="camera"&&!(Bt!=null&&Bt.isExternal)}),yt=ft.trackIds.find(At=>{const Bt=k.getTrack(At);return(Bt==null?void 0:Bt.type)==="microphone"&&!(Bt!=null&&Bt.isExternal)}),_t=ft.trackIds.find(At=>{const Bt=k.getTrack(At);return(Bt==null?void 0:Bt.type)==="screen_share"}),Tt=k.getTrack(St),gt=k.getTrack(yt),ht=k.getTrack(_t);updateMediaStreamTracks(pt,{video:Tt==null?void 0:Tt.mediaStreamTrack,audio:gt==null?void 0:gt.mediaStreamTrack}),updateMediaStreamTracks(mt,{video:ht==null?void 0:ht.mediaStreamTrack}),b(ft.id,{videoEnabled:!!(Tt&&!Tt.isMuted),audioEnabled:!!(gt&&!gt.isMuted),displayName:ft.displayName,mirrored:(Et=ft==null?void 0:ft.meta)==null?void 0:Et.isMirrored,external:Tt==null?void 0:Tt.isExternal}),b(ft.id+"-screen",{videoEnabled:!!(ht&&!ht.isMuted),displayName:ft.meta.screenDisplayName||`${ft.displayName}'s Screen`})})};k.useTracks(ft=>{const pt=ft.filter(St=>!_e.some(yt=>yt.id===St.id)&&!!(St!=null&&St.mediaStreamTrack)),mt=_e.filter(St=>!ft.some(yt=>yt.id===St.id));_e=ft.filter(St=>!!(St!=null&&St.mediaStreamTrack)),pt.forEach(St=>{const yt=new MediaStream([]);nt[St.id]=yt;const{id:_t,participantId:Tt,type:gt,mediaStreamTrack:ht}=k.getTrack(St.id);ht&&a({id:_t,isActive:!0,value:yt,props:{id:_t,trackId:_t,participantId:Tt,isMuted:St.isMuted,type:gt}})}),mt.forEach(St=>{var yt;c(St.id),(yt=j[St.id])==null||yt.call(j)}),it()}),k.useParticipants(ft=>{const pt=ft.filter(St=>!et.some(yt=>yt.id===St.id)),mt=et.filter(St=>!ft.some(yt=>yt.id===St.id));et=ft,pt.forEach(St=>{var gt;const{id:yt}=St,_t=new MediaStream([]),Tt=new MediaStream([]);nt[yt]=_t,nt[yt+"-screen"]=Tt,a({id:yt,isActive:!0,value:_t,props:{id:yt,type:"camera",displayName:St.displayName||St.id,audioEnabled:!1,videoEnabled:!1,mirrored:(gt=St==null?void 0:St.meta)==null?void 0:gt.isMirrored}}),a({id:yt+"-screen",isActive:!0,value:Tt,props:{id:yt,type:"screen",displayName:St.displayName||St.id,audioEnabled:!1,videoEnabled:!1}})}),it(),mt.forEach(St=>{var yt;c(St.id),(yt=j[St.id])==null||yt.call(j)})})})}},Banner={type:"Banner",valueType:Object,props:{},init({addSource:a,removeSource:c,updateSource:b,getSource:_,modifySourceValue:k}){let j=[];const _e=(et=[])=>{const nt=et.filter(pt=>!j.some(mt=>mt.id===pt.id)),it=j.filter(pt=>!et.some(mt=>mt.id===pt.id)),ft=et.filter(pt=>{const mt=j.find(St=>St.id===pt.id);return!deepEqual(pt,mt)});nt.forEach(pt=>a({id:pt.id,value:{headerText:pt.props.headerText,bodyText:pt.props.bodyText},props:pt.props})),it.forEach(pt=>c(pt.id)),ft.forEach(pt=>{b(pt.id,pt.props),k(pt.id,mt=>{mt.headerText=pt.props.headerText,mt.bodyText=pt.props.bodyText})}),j=et};CoreContext.on("ActiveProjectChanged",({projectId:et})=>{var it;if(j=[],!et)return;const nt=getProject(et);_e(((it=nt.props)==null?void 0:it.banners)??[])}),CoreContext.on("ProjectChanged",({project:et})=>{var nt;_e(((nt=et.props)==null?void 0:nt.banners)??[])})}},Overlays={type:"Overlay",valueType:Object,props:{},init({addSource:a,removeSource:c,updateSource:b,getSource:_,modifySourceValue:k}){let j=[];const _e=(et=[])=>{const nt=et.filter(pt=>!j.some(mt=>mt.id===pt.id)),it=j.filter(pt=>!et.some(mt=>mt.id===pt.id)),ft=et.filter(pt=>{const mt=j.find(St=>St.id===pt.id);return!deepEqual(pt,mt)});nt.forEach(pt=>a({id:pt.id,value:{...pt.props},props:pt.props})),it.forEach(pt=>c(pt.id)),ft.forEach(pt=>{b(pt.id,pt.props),k(pt.id,mt=>{Object.keys(pt.props).forEach(St=>{mt[St]=pt.props[St]})})}),j=JSON.parse(JSON.stringify(et))};CoreContext.on("ActiveProjectChanged",({projectId:et})=>{if(j=[],!et)return;const nt=getProject(et);_e(nt.props.overlays)}),CoreContext.on("ProjectChanged",({project:et})=>{_e(et.props.overlays)})}},Background={type:"Background",valueType:Object,props:{},init({addSource:a,removeSource:c,updateSource:b,getSource:_,modifySourceValue:k}){let j;const _e=et=>{if(!et)return;const nt=(j==null?void 0:j.id)!==(et==null?void 0:et.id)?et:null,it=deepEqual(et,j)?null:et;nt&&(a({id:nt==null?void 0:nt.id,value:{...nt==null?void 0:nt.props},props:nt==null?void 0:nt.props}),c(j==null?void 0:j.id)),it&&(b(it==null?void 0:it.id,it==null?void 0:it.props),k(it==null?void 0:it.id,ft=>{Object.keys(it==null?void 0:it.props).forEach(pt=>{ft[pt]=it==null?void 0:it.props[pt]})})),j=JSON.parse(JSON.stringify(et))};CoreContext.on("ActiveProjectChanged",({projectId:et})=>{if(j=null,!et)return;const nt=getProject(et);_e(nt.props.background)}),CoreContext.on("ProjectChanged",({project:et})=>{_e(et.props.background)})}},Logo={type:"Logo",valueType:Object,props:{},init({addSource:a,removeSource:c,updateSource:b,getSource:_,modifySourceValue:k}){let j;const _e=et=>{if(!et){j&&(c(j==null?void 0:j.id),j=null);return}const nt=(j==null?void 0:j.id)!==(et==null?void 0:et.id)?et:null,it=deepEqual(et,j)?null:et;nt&&(a({id:nt==null?void 0:nt.id,value:{...nt==null?void 0:nt.props},props:nt==null?void 0:nt.props}),c(j==null?void 0:j.id)),it&&(b(it==null?void 0:it.id,it==null?void 0:it.props),k(it==null?void 0:it.id,ft=>{Object.keys(it==null?void 0:it.props).forEach(pt=>{ft[pt]=it==null?void 0:it.props[pt]})})),j=JSON.parse(JSON.stringify(et))};CoreContext.on("ActiveProjectChanged",({projectId:et})=>{if(j=null,!et)return;const nt=getProject(et);_e(nt.props.logo)}),CoreContext.on("ProjectChanged",({project:et})=>{_e(et.props.logo)})}},runFilters=(a,c=[])=>c.reduce((b,_)=>_(b),a),createDefault=()=>({root:document.createElement("div")}),init$2=(a={},c,b)=>{const _={},k=a.defaultTransforms||{},j=Tt=>{asArray(Tt).forEach(gt=>{_[gt.name]=gt})},_e={},et={},nt={},it=Tt=>nt[Tt]||[],ft=Tt=>et[Tt]||[],pt=Tt=>_e[Tt],mt=Tt=>_[Tt];c.on("SourceChanged",Tt=>{ft(Tt.id).forEach(ht=>{const Et=c.getNode(ht.nodeId);ht._onUpdateHandlers.forEach(At=>At(Et.props||{}))})}),c.on("AvailableSourcesChanged",({type:Tt,sources:gt})=>{it(Tt).forEach(Et=>{St(Et.nodeId)})});const St=Tt=>{var ct,dt,lt;const gt=pt(Tt);if(!gt)return;const ht=mt(gt.transformName);if(!ht.useSource)return;const Et=c.getNode(Tt),At=gt.proxySource?gt.proxySource:gt.sourceType,Bt=b.getSources(At),qt=ht.useSource(Bt,Et.props),zt=gt.sourceValue,Ht=qt==null?void 0:qt.value;gt.source!==qt&&(et[(ct=gt.source)==null?void 0:ct.id]&&(et[(dt=gt.source)==null?void 0:dt.id]=et[(lt=gt.source)==null?void 0:lt.id].filter(kt=>kt.nodeId!==Tt)),et[qt==null?void 0:qt.id]=[...et[qt==null?void 0:qt.id]||[],gt]),gt.source=qt,gt.sourceValue=Ht,Object.is(zt,Ht)||gt._onNewSourceHandlers.forEach(kt=>kt(qt))},yt=Tt=>{const gt=_t(Tt),Et=runFilters(Tt,[]);return St(Tt.id),gt==null||gt._onUpdateHandlers.forEach(At=>At(Tt.props||{})),{...Et,children:Et.children.map(yt)}},_t=Tt=>{if(_e[Tt.id])return _e[Tt.id];const{props:gt={}}=Tt,{sourceType:ht,proxySource:Et}=gt;if(!ht)return null;let At=k[ht],Bt;if(At?Bt=_[At]:Bt=Object.values(_).find(Jt=>Jt.sourceType===ht),!Bt)throw new Error("Could not find matching transform for sourceType: "+ht);const qt=[],zt=[],Ht=[],ct=[],lt={...(Bt.create||createDefault)({onEvent:(Jt,en,...Qt)=>{const xt=c.on(Jt,en,...Qt);return ct.push(xt),xt},onNewSource:Jt=>qt.push(Jt),onUpdate:Jt=>zt.push(Jt),onRemove:Jt=>Ht.push(Jt)},Tt.props),proxySource:Et,sourceType:ht,nodeId:Tt.id,transformName:Bt.name,_onNewSourceHandlers:qt,_onUpdateHandlers:zt,_disposables:ct};_e[Tt.id]=lt;const kt=Et||ht;nt[kt]=[...nt[kt]||[],lt],Bt.useSource&&St(Tt.id);const Lt=[c.on("NodeRemoved",({nodeId:Jt})=>{if(Jt===Tt.id){const en=c.getNode(Jt),{sourceType:Qt="Element"}=en.props;Lt.forEach(rn=>rn==null?void 0:rn()),ct.forEach(rn=>rn==null?void 0:rn()),Ht.forEach(rn=>rn==null?void 0:rn()),delete _e[en.id];const xt=Et||Qt;nt[xt]=nt[xt].filter(rn=>rn!==_e[en.id])}})];return lt};return{transforms:_,nodeElementIndex:_e,elementSourceTypeIndex:nt,registerTransform:j,getElementsBySourceType:it,getElementByNodeId:pt,getTransformByName:mt,updateSourceForNode:St,renderTree:yt,getElement:_t}},TRANSITION_DURATION=300,findLayoutUp=(a,c,b=0)=>{const k=a.parentElement;return k instanceof Layout&&(b=0,!c||c(k))?k:k?b>4?null:findLayoutUp(k,c,b+1):null},TRANSITION_FIELDS="opacity, transform, width, height, left, right, top, bottom, inset",layoutIndex={},parentIdIndex={},childIndex={};let rootLayout,_cid=1;const ignoredAttributes=["style","id","className"];let tickOps={};const tick=()=>{if(nextTick=null,window.__dragging){nextTick=nextTick||requestAnimationFrame(tick);return}const a=new Set,c=new Set,b=new Set;Object.entries(tickOps).forEach(([_,k])=>{k.forEach(([j,_e,et])=>{switch(j){case"childInserted":{c.has(et)?c.delete(et):a.add(et);break}case"childRemoved":{a.has(et)?a.delete(et):c.add(et);break}case"childRemoveFinished":{b.add(et);break}}})});try{c.forEach(k=>{var et,nt,it;const j=childIndex[k],_e=Array.from(((et=j.parentEl)==null?void 0:et.children)||[]);j.nextSiblingEl&&_e.includes(j.nextSiblingEl)?(nt=j.parentEl)==null||nt.insertBefore(j,j.nextSiblingEl):(j.nextSiblingEl=null,(it=j.parentEl)==null||it.append(j)),j.runRemove()}),b.forEach(k=>{const j=childIndex[k];if(j.removed){j.previousSiblingEl&&(j.previousSiblingEl.nextSiblingEl=j.nextSiblingEl),j.nextSiblingEl&&(j.nextSiblingEl.previousSiblingEl=j.previousSiblingEl);return}});const _=window.__scale;Object.entries(tickOps).forEach(([k,j])=>{const _e=layoutIndex[k],et=_e.getBoundingClientRect(),nt={x:et.width/_,y:et.height/_};_e.updatePositions({size:nt,inserted:a,removed:c})})}catch(_){log$1.warn("Failed to run Layout ops",_)}tickOps={}};let nextTick;const queueOp=a=>{const[c,b]=a,_=tickOps[b]||[];tickOps[b]=[..._,a],nextTick=nextTick||requestAnimationFrame(tick)};class Layout extends HTMLElement{constructor(){super();Yn(this,"parentEl");Yn(this,"slotEl");Yn(this,"parentLayout");Yn(this,"nodes");Yn(this,"mutationObserver");Yn(this,"latestSize");Yn(this,"isFirst",!0);Yn(this,"isUpdating",!1);Yn(this,"cid");this.cid=++_cid}log(...b){var _;log$1.debug(...b,{id:this.dataset.id,parent:(_=this.parentLayout)==null?void 0:_.dataset.id},this)}connectedCallback(){var b;this.parentEl=this.parentElement,this.parentLayout=findLayoutUp(this),this.slotEl=this.closest("[data-layout-child]"),Array.from(this.children).forEach(_=>this.initializeChild(_)),rootLayout||(rootLayout=this),layoutIndex[this.dataset.id]=this,parentIdIndex[this.dataset.id]=(b=this.parentLayout)==null?void 0:b.id,Object.assign(this.style,{width:"100%",height:"100%",position:"absolute",top:"0px",left:"0px",pointerEvents:"none",boxSizing:"border-box"}),this.mutationObserver&&this.mutationObserver.disconnect(),this.mutationObserver=new MutationObserver(_=>{this.isConnected&&_.forEach(k=>{k.type==="attributes"&&!ignoredAttributes.includes(k.attributeName)?queueOp(["attributesChanged",this.dataset.id]):k.type==="childList"&&(k.addedNodes.forEach(j=>{const _e=childIndex[j.dataset.id];j.removed||(_e?_e!==j&&(this.initializeChild(j),j.setAttribute("style",_e.getAttribute("style")),j.data=_e.data):this.initializeChild(j),queueOp(["childInserted",this.dataset.id,j.dataset.id]))}),k.removedNodes.forEach(j=>{j.removed||queueOp(["childRemoved",this.dataset.id,j.dataset.id])}))})}),this.mutationObserver.observe(this,{childList:!0,attributes:!0}),this.latestSize||queueOp(["attributesChanged",this.dataset.id])}disconnectedCallback(){}adoptedCallback(){}updatePositions(b){if(this.isUpdating)return;this.isUpdating=!0;const{size:_,inserted:k=new Set,removed:j=new Set}=b;this.nodes=Array.from(this.children||[]).filter(it=>!it.removed).map((it,ft)=>{const pt=getElementAttributes(it);return{id:it.dataset.id,props:pt,children:[]}});const _e=JSON.parse(this.getAttribute("props")||"{}");this.latestSize=_;const et={id:this.dataset.id,props:_e,children:this.nodes,size:_};let nt=layoutChildren(et);Promise.all(Object.entries(nt).map(async([it,ft])=>{var At,Bt,qt,zt;let pt=childIndex[it]||this.querySelector(`[data-layout-child][data-id="${it}"]`);const mt={...pt.data,...ft};pt.data=mt;const{size:St,position:yt,zIndex:_t=1,opacity:Tt=1,borderRadius:gt=0,entryTransition:ht={},exitTransition:Et={}}=mt;if(pt){if(pt.removed)return;Et&&(pt.data.exitTransition=Et),ht&&(pt.data.entryTransition=ht),pt.data.size=St,pt.data.position=yt;const Ht=window.__scale,ct=this.getBoundingClientRect(),dt=ct.width/Ht,lt=dt-sizeToNum(yt.x,dt)-sizeToNum(St.x,dt),kt=ct.height/Ht,Lt=kt-sizeToNum(yt.y,kt)-sizeToNum(St.y,kt);Object.assign(pt.style,{position:"absolute",transformOrigin:"50% 50%",transitionDuration:"0ms",transitionDelay:"0ms",transform:"translate3d(0, 0, 0) scaleX(1) scaleY(1)",visibility:"visible",boxSizing:"border-box",overflow:"hidden",borderRadius:gt+"px",width:"auto",height:"auto"});let Jt="0ms",en=this.isFirst?asDuration(0):asDuration(TRANSITION_DURATION);if(k.has(it))Object.assign(pt.style,{transitionProperty:TRANSITION_FIELDS,transitionDuration:"0ms",transitionTimingFunction:ht.timingFn??"ease",transform:`translate3d(calc(${asSize(((At=ht.offset)==null?void 0:At.x)??0)}), calc(${asSize(((Bt=ht.offset)==null?void 0:Bt.y)??0)}), 0) scaleX(${((qt=ht.scale)==null?void 0:qt.x)??1}) scaleY(${((zt=ht.scale)==null?void 0:zt.y)??1})`,opacity:ht.opacity??Tt,left:asSize(yt.x)||0,right:asSize(lt)||0,top:asSize(yt.y)||0,bottom:asSize(Lt)||0}),Jt=asDuration(ht.delay??0);else if(pt.data.rootOffset){const rn=rootLayout.getBoundingClientRect(),Sn=this.getBoundingClientRect(),bn={x:Sn.x/Ht-rn.x/Ht,y:Sn.y/Ht-rn.y/Ht},kn=bn.x+Sn.width/Ht,_n=pt.data.rootOffset.x+Number(pt.data.size.x),tn=bn.y+Sn.height/Ht,pn=pt.data.rootOffset.y+Number(pt.data.size.y);pt.data.rootOffset.x-bn.x,pt.data.rootOffset.y-bn.y,kn-_n,tn-pn}pt.addEventListener("transitionstart",()=>{pt.style.zIndex=String(_t+1)}),await new Promise(rn=>window.setTimeout(rn)),Object.assign(pt.style,{transitionProperty:TRANSITION_FIELDS,transitionDuration:en,transitionDelay:Jt,transform:"translate3d(0, 0, 0) scaleX(1) scaleY(1)",opacity:Tt,left:asSize(yt.x)||0,top:asSize(yt.y)||0,width:dt?"auto":St.x,right:dt?asSize(lt)||0:"auto",height:kt?"auto":St.y,bottom:kt?asSize(Lt)||0:"auto",zIndex:_t});const xt=()=>{const rn=rootLayout.getBoundingClientRect(),Sn=pt.getBoundingClientRect();pt.data.rootOffset={x:Sn.x/Ht-rn.x/Ht,y:Sn.y/Ht-rn.y/Ht}};xt(),pt.addEventListener("transitionend",()=>{pt.style.zIndex=String(_t),xt()})}})).then(()=>{this.isUpdating=!1}),this.isFirst=!1,Array.from(this.querySelectorAll("ls-layout")).forEach(it=>{if(!nt[it.dataset.id])return;const ft=nt[it.dataset.id].size;it.updatePositions({size:{x:sizeToNum(ft.x,_.x),y:sizeToNum(ft.y,_.y)}})})}initializeChild(b){var k;if(!((k=b.dataset)!=null&&k.id))return log$1.warn("Layout: Child requires `data-id` at the time it is added to a Layout");b._remove=b.remove,b.remove=()=>{this.removeChild(b)},b.mutationObserver||(b.mutationObserver=new MutationObserver(j=>{j.forEach(_e=>{if(_e.type==="attributes"){if(_e.attributeName==="style")return;queueOp(["childAttributesChanged",this.dataset.id,b.dataset.id])}})}),b.mutationObserver.observe(b,{childList:!0,attributes:!0}));const _={entryTransition:{delay:0,opacity:0,scale:{x:1,y:1},offset:{x:0,y:0}},exitTransition:{delay:0,opacity:0,scale:{x:1,y:1},offset:{x:0,y:0}},position:{x:0,y:0},size:{x:0,y:0},opacity:0,fit:"cover",borderRadius:0,zIndex:1};b.data=_,b.parentEl=b.parentElement,b.nextSiblingEl=b.nextSibling,b.previousSiblingEl=b.previousSibling,b.previousSiblingEl&&(b.previousSiblingEl.nextSiblingEl=b),b.toggleAttribute("data-layout-child",!0),childIndex[b.dataset.id]=b,b.runRemove=async()=>{var _e,et,nt,it;b.removed=!0;const j=TRANSITION_DURATION;return await new Promise(ft=>window.setTimeout(ft)),Object.assign(b.style,{zIndex:0,transitionDelay:asDuration(0),transitionDuration:asDuration(j),transitionProperty:TRANSITION_FIELDS,transitionTimingFunction:_.exitTransition.timingFn??"ease",transform:`translate3d(calc(${asSize(((_e=_.exitTransition.offset)==null?void 0:_e.x)??0)}), calc( ${asSize(((et=_.exitTransition.offset)==null?void 0:et.y)??0)}), 0) scaleX(${((nt=_.exitTransition.scale)==null?void 0:nt.x)??1}) scaleY(${((it=_.exitTransition.scale)==null?void 0:it.y)??1})`,opacity:_.exitTransition.opacity??0}),b.removed=!0,b.transition=new Promise(ft=>{const pt=()=>{b.transition=null,b._remove(),queueOp(["childRemoveFinished",this.dataset.id,b.dataset.id]),clearTimeout(mt),ft()},mt=window.setTimeout(pt,parseInt(String(j))+600);b.addEventListener("transitionend",pt,{once:!0})}),b.transition}}}const ensureLayoutContainer=a=>{const c=document.getElementById("__ls-layout-container");if(c)return Object.assign(c.style,{width:a.x+"px",height:a.y+"px"}),c;const b=document.createElement("div");return b.id="__ls-layout-container",Object.assign(b.style,{position:"fixed",visibility:"hidden",top:"0px",left:"0px",zIndex:-1,width:a.x+"px",height:a.y+"px"}),document.body.append(b),b},layoutChildren=({id:a,props:c={},children:b,size:_})=>{const k={props:c,children:b,size:_},j=htmlLayouts[c.layout]?htmlLayouts[c.layout].layout(k):htmlLayouts.Free.layout(k);if(!(j instanceof HTMLElement))return j;const _e=Array.from(j.querySelectorAll("[data-node-id]")),et=document.createElement("div");et.style.height=j.style.height=_.y+"px",et.style.width=j.style.width=_.x+"px",et.style.position="absolute",et.style.top="0px",et.style.left="0px",et.style.boxSizing="border-box",et.setAttribute("data-wrapper-id",a),et.append(j);const nt=ensureLayoutContainer(_),it=nt.querySelector(`[data-wrapper-id="${a}"]`);it?it.replaceWith(et):nt.append(et);const ft=j.getBoundingClientRect(),pt={};return _e.forEach(mt=>{var gt,ht,Et,At;const St=mt.dataset.nodeId;if(!St)return;const yt=Number(mt.dataset.opacity??(mt.style.opacity||1)),_t=mt.getBoundingClientRect();let Tt={position:{x:_t.x-ft.x+"px",y:_t.y-ft.y+"px"},size:{x:_t.width+"px",y:_t.height+"px"},opacity:yt,zIndex:(gt=mt.data)==null?void 0:gt.zIndex,entryTransition:((ht=mt.data)==null?void 0:ht.entryTransition)??{},exitTransition:((Et=mt.data)==null?void 0:Et.exitTransition)??{},borderRadius:((At=mt.data)==null?void 0:At.borderRadius)??0};`${c.showcase}-x`===St&&(Tt.position={x:ft.x+"px",y:ft.y+"px"},Tt.size={x:ft.width+"px",y:ft.height+"px"},Tt.zIndex=10),pt[St]=Tt,positionIndex[mt.dataset.nodeId]=Tt}),pt},positionIndex={},htmlLayouts={},registerLayout=a=>{asArray(a).forEach(c=>{htmlLayouts[c.name]=c})},sourceTypes={},init$1=(a={},c)=>{const b={},_={},k=nt=>{c.triggerEvent("SourceChanged",nt)},j=nt=>{c.triggerEvent("AvailableSourcesChanged",{type:nt,sources:_[nt]})},et={sourceIndex:b,sourceTypeIndex:_,registerSource:nt=>{asArray(nt).forEach(it=>{var pt;const ft=mt=>{const St=b[mt];if(St&&St.type!==it.type)throw new Error(`Attempted to modify source of type ${St.type} from ${it.type}`)};(pt=it.init)==null||pt.call(it,{getSource:mt=>et.getSource(mt),removeSource:mt=>(ft(mt),et.removeSource(mt)),setSourceActive:(mt,St)=>(ft(mt),et.setSourceActive(mt,St)),updateSource:(mt,St)=>(ft(mt),et.updateSource(mt,St)),modifySourceValue(mt,St){return ft(mt),et.modifySourceValue(mt,St)},addSource:mt=>et.addSource(it.type,mt)}),sourceTypes[it.type]=it})},getSource:nt=>b[nt],getSources:nt=>_[nt]||[],useSource:(nt,it)=>(it(b[nt]),c.on("SourceChanged",ft=>{ft.id===nt&&it(ft)})),useSources:(nt,it)=>(it(_[nt]||[]),c.on("AvailableSourcesChanged",ft=>{ft.type===nt&&it(ft.sources)})),addSource:(nt,it)=>{if(!it.id)throw new Error('Cannot add source without field "id"');if(b[it.id])return;if(!it.value)throw new Error('Cannot add source with an empty field "value"');if(!sourceTypes[nt])throw new Error("Could not find definition for source type: "+nt);const{id:pt,value:mt=null,props:St={},isActive:yt=!0}=it;b[pt]={id:pt,type:nt,props:St,value:mt,isActive:yt},_[nt]=[..._[nt]||[],b[pt]],k(b[pt]),j(nt)},removeSource:nt=>{const it=b[nt];it&&(delete b[nt],_[it.type]=_[it.type].filter(ft=>ft.id!==nt),j(it.type))},updateSource:(nt,it)=>{const ft=b[nt];ft.props={...ft.props,...it},k(ft),j(ft.type)},modifySourceValue:async(nt,it)=>{const ft=b[nt];await it(ft.value),k(ft)},setSourceActive:(nt,it=!0)=>{const ft=b[nt];ft.isActive=it,j(ft.type)}};return et},{forEachDown,insertAt,toDataNode,pull,replaceItem}=Logic;let compositor;const start=a=>{if(compositor)return compositor;const{dbAdapter:c,transformSettings:b={},sourceSettings:_={}}=a,k={},j={};try{customElements.define("ls-layout",Layout)}catch(gt){log$1.warn(gt)}const _e={},et={},nt={};let it=0;const ft=new Map,pt=(gt,ht)=>{if(typeof gt!="function")return;const Et=++it;return ft.set(Et,gt),gt.nodeId=ht,()=>{ft.delete(Et)}},mt=(gt,ht,Et)=>pt((At,Bt)=>{At===gt&&ht(Bt)},Et),St=(gt,ht)=>{ft.forEach(Et=>{Et.nodeId?ht!=null&&ht.nodeId&&(ht==null?void 0:ht.nodeId)===Et.nodeId&&Et(gt,ht):Et(gt,ht)})},yt={projects:j,subscribe:pt,on:mt,triggerEvent:St,getProject:gt=>j[gt],getNodeProject:gt=>j[_e[gt]],getNodeParent:gt=>nt[et[gt]],getNode:gt=>nt[gt],createProject:async(gt={},ht)=>{const{id:Et,props:At={},children:Bt=[]}=gt,qt=await c(ht,{get:()=>null,getParent:()=>null}).insert(At),zt={id:qt,props:At,children:Bt};return forEachDown(gt,Ht=>{}),nt[qt]=zt,compositor.loadProject(zt,ht)},loadProject:(gt,ht)=>{if(!gt)return;if(ht=ht||gt.id,j[ht])return j[ht];forEachDown(gt,(qt,zt)=>{nt[qt.id]=qt,et[qt.id]=zt==null?void 0:zt.id,_e[qt.id]=ht});const Et={insert:async(qt,zt,Ht=0)=>{if(qt.id&&nt[qt.id])return nt[qt.id];if(qt.children||(qt.children=[]),qt.props||(qt.props={}),zt){const ct=nt[zt];if(!ct)throw"Parent node not found with ID";ct.children=insertAt(Ht,qt,ct.children||[]),et[qt.id]=zt}return nt[qt.id]=qt,_e[qt.id]=ht,qt.id},update:async(qt,zt={},Ht)=>{const ct=nt[qt];if(Ht){const dt=Ht.map(lt=>{const kt=nt[lt];return et[kt.id]=qt,kt});ct.children=dt}ct.props={...ct.props,...zt}},remove:async qt=>{const zt=nt[et[qt]];zt&&(zt.children=zt.children.filter(ct=>ct.id!==qt));const Ht=nt[qt];forEachDown(Ht,ct=>{nt[ct.id]&&(nt[ct.id]._deleted=!0),St("NodeRemoved",{projectId:At.id,nodeId:ct.id})})}},At={id:ht,getRoot:()=>gt,get(qt){return nt[qt]},getParent(qt){return nt[et[qt]]},renderTree(){return Tt.renderTree(gt)},local:Et,insert:async(qt={},zt,Ht=0)=>{const dt={id:await Bt.insert(qt,zt,Ht),props:qt,children:[]};return Et.insert(dt,zt,Ht)},update:async(qt,zt)=>(await Et.update(qt,zt),Bt.update(qt,zt)),remove:async qt=>{await Et.remove(qt);const zt=nt[et[qt]],Ht=zt.children.filter(ct=>ct.id!==qt);return Bt.batch([["delete",{id:qt}],["update",{...zt,children:Ht}]])},reorder:async(qt,zt)=>{const Ht=nt[qt];return Ht.children=zt.map(ct=>Ht.children.find(dt=>dt.id===ct)),Bt.batch([["update",Ht]])},move:async(qt,zt,Ht=0)=>{const ct=nt[qt],dt=nt[et[qt]],lt=nt[zt];dt.children=pull(dt.children,ct),lt.children=insertAt(Ht,ct,lt.children),Bt.batch([["update",lt],["update",dt]]),et[qt]=zt},swap:async(qt,zt)=>{const Ht=nt[qt],ct=nt[zt],dt=nt[et[qt]],lt=nt[et[zt]];dt.children=replaceItem(kt=>kt.id===qt,ct,dt.children),lt.children=replaceItem(kt=>kt.id===zt,Ht,lt.children),et[qt]=lt.id,et[zt]=dt.id,Bt.batch([["update",dt],["update",lt]])}};Object.defineProperty(At,"nodes",{get(){return Object.values(nt).filter(qt=>_e[qt.id]===At.id)}});const Bt=k[ht]||c(ht,{get:qt=>toDataNode(At.get(qt)),getParent:qt=>toDataNode(At.getParent(qt))});return k[ht]=Bt,j[ht]=At,At}},_t=init$1(_,yt),Tt=init$2(b,yt,_t);return compositor={registerLayout,registerTransform:Tt.registerTransform,registerSource:_t.registerSource,getElement:Tt.getElement,getSource:_t.getSource,getSources:_t.getSources,useSource:_t.useSource,useSources:_t.useSources,...yt},compositor};class EngineWebsocket{constructor(c,b){Yn(this,"ws",null);Yn(this,"sources",new Set);this.connectSource=c,this.disconnectSource=b,this.connect=this.connect.bind(this),this.handleMessage=this.handleMessage.bind(this)}connect(){const c=this.handleMessage.bind(this);this.ws=new WebSocket("ws://127.0.0.1:8000"),this.ws.addEventListener("message",c),this.ws.addEventListener("error",b=>{console.error("Unable to connect to websocket",b)}),this.ws.addEventListener("close",()=>{var b,_;(b=this.ws)==null||b.removeEventListener("message",c);try{(_=this.ws)==null||_.close(),this.ws=null}catch{}setTimeout(()=>{this.connect()},1e3)})}handleMessage(c){try{const b=JSON.parse(c.data);if(b.name==="state"){this.sources.clear(),console.info("[Engine]: state",b.payload);for(const _ of b.payload.sources)_.connected&&(this.sources.has(_.id)||(this.sources.add(_.id),this.connectSource(_.id)))}else b.name==="source.disconnect"?(console.info("[Engine]: source disconnect",b.payload.id),this.sources.delete(b.payload.id),this.disconnectSource(b.payload.id)):b.name==="source.connect"&&(console.info("[Engine]: source connect",b.payload.id),this.sources.add(b.payload.id),this.connectSource(b.payload.id))}catch(b){console.error("unable to handle message: ",b)}}}function setupEngineWebsocket(a,c){return new EngineWebsocket(a,c)}const lookupDevice=(a,c)=>{const b=a.find(k=>k.label===c&&k.kind==="videoinput"),_=a.find(k=>k.label===`Monitor of ${c}`&&k.kind==="audioinput");if(b&&_)return{videoDevice:b,audioDevice:_};if(b){if(b.label==="Logitech BRIO (046d:085e)"){const k=a.find(j=>j.kind==="audioinput"&&j.label==="Loopback Audio 2 (Virtual)");return{videoDevice:b,audioDevice:k}}if(b.label==="OBS Virtual Camera (m-de:vice)"){const k=a.find(j=>j.kind==="audioinput"&&j.label==="Loopback Audio (Virtual)");return{videoDevice:b,audioDevice:k}}return{videoDevice:b,audioDevice:null}}return null},connectDevice=async a=>{new MediaStream([]);const c=await navigator.mediaDevices.enumerateDevices(),b=lookupDevice(c,a);if(b){const _={video:{width:999999,height:999999,deviceId:{exact:b.videoDevice.deviceId}}};b.audioDevice&&(_.audio={autoGainControl:!1,channelCount:2,echoCancellation:!1,latency:0,noiseSuppression:!1,sampleRate:128e3,sampleSize:16,deviceId:{exact:b.audioDevice.deviceId}});const k=await navigator.mediaDevices.getUserMedia(_);if(k)return k;console.warn(`No stream found for source ${a}.`)}else console.warn(`No device found for source ${a}.`)},RTMP={type:"RTMP",valueType:MediaStream,props:{id:{},type:{},videoEnabled:{},audioEnabled:{}},init({addSource:a,removeSource:c,updateSource:b,getSource:_}){let k,j={},_e=[],et=[];const nt=it=>{const ft=it.filter(mt=>!et.some(St=>St.id===mt.id)),pt=et.filter(mt=>!it.some(St=>St.id===mt.id));et=it,ft.forEach(async mt=>{const St=new MediaStream([]);j[mt.id]=St;const yt=St.getVideoTracks();a({id:`rtmp-${mt.id}`,isActive:!0,value:St,props:{id:mt.id,isMuted:!1,participantId:mt.id,type:"rtmp",videoEnabled:!!yt.length,audioEnabled:!0}})}),pt.forEach(mt=>{c(`rtmp-${mt.id}`)})};CoreContext.on("ActiveProjectChanged",({projectId:it})=>{const ft=toBaseProject(getProject(it));nt(ft.sources),ft.role===Role.ROLE_RENDERER&&(k||(k=setupEngineWebsocket(async function(mt){const St=j[mt];toBaseProject(getProject(it));const yt=await connectDevice(mt);if(_(`rtmp-${mt}`)&&yt){const Tt=yt.getAudioTracks()[0],gt=yt.getVideoTracks()[0];updateMediaStreamTracks(St,{video:gt,audio:Tt}),b(`rtmp-${mt}`,{videoEnabled:!!gt,audioEnabled:!!Tt,mirrored:!1,external:!0})}},async function(mt){toBaseProject(getProject(it)).sources.find(Tt=>Tt.id===mt);const yt=j[mt];(yt==null?void 0:yt.getTracks()).forEach(Tt=>{j[mt].removeTrack(Tt)})}),k.connect()))}),CoreContext.on("RoomJoined",({projectId:it,room:ft})=>{if(toBaseProject(getProject(it)).role!==Role.ROLE_RENDERER){const mt=()=>{_e.filter(St=>(St==null?void 0:St.type)==="screen_share"&&(St==null?void 0:St.isExternal)===!0).forEach(St=>{var yt;if(St.type==="screen_share"){const _t=j[St.participantId],Tt=ft.getParticipant(St.participantId);if(et.some(gt=>gt.id===Tt.id)){const gt=ft.getTrack(St.id);if(_(`rtmp-${Tt==null?void 0:Tt.id}`)){const Et=ft.getTracks().find(At=>At.participantId===Tt.id&&At.mediaStreamTrack.kind==="audio");updateMediaStreamTracks(_t,{video:gt==null?void 0:gt.mediaStreamTrack,audio:Et==null?void 0:Et.mediaStreamTrack}),b(`rtmp-${Tt==null?void 0:Tt.id}`,{videoEnabled:!!(gt!=null&&gt.mediaStreamTrack&&!gt.isMuted),audioEnabled:!!(Et&&!Et.isMuted),mirrored:(yt=Tt==null?void 0:Tt.meta[St.id])==null?void 0:yt.isMirrored,external:St==null?void 0:St.isExternal})}}}})};ft.useTracks(St=>{const yt=St.filter(gt=>et.some(ht=>ht.id===gt.participantId)).filter(gt=>["screen_share"].includes(gt.type)),_t=yt.filter(gt=>!_e.some(ht=>ht.id===gt.id)&&!!(gt!=null&&gt.mediaStreamTrack)),Tt=_e.filter(gt=>!yt.some(ht=>ht.id===gt.id));_e=yt.filter(gt=>!!(gt!=null&&gt.mediaStreamTrack)),Tt.forEach(gt=>{const ht=j[gt.participantId];gt.mediaStreamTrack.kind==="video"&&(updateMediaStreamTracks(ht,{video:null}),b(`rtmp-${gt.participantId}`,{videoEnabled:!1})),gt.mediaStreamTrack.kind==="audio"&&(updateMediaStreamTracks(ht,{audio:null}),b(`rtmp-${gt.participantId}`,{audioEnabled:!1}))}),_t.forEach(gt=>{if(gt.type==="screen_share"&&gt.mediaStreamTrack.kind==="video"){const ht=j[gt.participantId],Et=_e.find(At=>{var Bt;return At.participantId===gt.participantId&&((Bt=At.mediaStreamTrack)==null?void 0:Bt.kind)==="audio"});updateMediaStreamTracks(ht,{video:gt==null?void 0:gt.mediaStreamTrack,audio:Et==null?void 0:Et.mediaStreamTrack}),b(`rtmp-${gt.participantId}`,{videoEnabled:!!(gt&&!(gt!=null&&gt.isMuted)),audioEnabled:!!(Et&&!(Et!=null&&Et.isMuted))})}}),mt()})}}),CoreContext.on("ProjectSourceAdded",({source:it,projectId:ft})=>{const pt=toBaseProject(getProject(ft));nt(pt==null?void 0:pt.sources)}),CoreContext.on("ProjectSourceRemoved",({sourceId:it,projectId:ft})=>{const pt=toBaseProject(getProject(ft));nt(pt==null?void 0:pt.sources)})}},Sources=Object.freeze(Object.defineProperty({__proto__:null,Background,Banner,Logo,Overlays,RTMP,RoomParticipant},Symbol.toStringTag,{value:"Module"})),{state}=CoreContext,prepareInternalEvents=()=>{subscribeInternal(async(a,c)=>{var b,_,k,j,_e;switch(a){case"UserChanged":{const{metadata:et}=c;state.user.metadata=et||{},state.user.props=(et==null?void 0:et.props)||{},trigger$1("UserChanged",{user:getBaseUser()});return}case"ActiveProjectChanged":{const{projectId:et}=c;state.activeProjectId=et,trigger$1("ActiveProjectChanged",{projectId:et});return}case"ProjectAdded":{const nt=await hydrateProject(c,"ROLE_HOST"),it=toBaseProject(nt);state.projects=[...state.projects,nt],trigger$1("ProjectAdded",{project:it});return}case"ProjectRemoved":{const{projectId:et}=c;state.projects=state.projects.filter(nt=>nt.id!==et),trigger$1("ProjectRemoved",{projectId:et});return}case"ProjectChanged":{const{project:et,phase:nt,broadcastId:it}=c,ft=getProject(et.projectId);if(!ft)return;nt&&(ft.videoApi.phase=nt),typeof it<"u"&&(ft.videoApi.broadcastId=it);const pt=(b=et.metadata)==null?void 0:b.layoutId;pt!==ft.layoutApi.layoutId&&(ft.layoutApi.layoutId=(_=et.metadata)==null?void 0:_.layoutId,ft.compositor=await layoutToProject(pt)),ft.videoApi.project=et,ft.props=((k=et.metadata)==null?void 0:k.props)??{},trigger$1("ProjectChanged",{project:toBaseProject(ft)});return}case"DestinationAdded":{const{projectId:et}=c,nt=getProject(et);if(!nt)return;nt.videoApi.project.destinations.push(c),trigger$1("DestinationAdded",{projectId:et,destination:toBaseDestination(c)});return}case"DestinationRemoved":{const{projectId:et,destinationId:nt}=c,it=getProject(et);if(!it)return;it.videoApi.project.destinations=it.videoApi.project.destinations.filter(ft=>ft.destinationId!==nt),trigger$1("DestinationRemoved",{projectId:et,destinationId:nt});return}case"DestinationChanged":{const et=c,{projectId:nt,destinationId:it}=et,ft=getProject(nt);if(!ft)return;const pt=ft.videoApi.project.destinations.find(mt=>mt.destinationId===it);if(!pt)return;Object.assign(pt,et),trigger$1("DestinationChanged",{projectId:nt,destination:toBaseDestination(pt)});return}case"SourceAdded":{const et=c;trigger$1("SourceAdded",{source:{id:et.sourceId,props:et.metadata,address:et.address}});return}case"SourceRemoved":return;case"SourceChanged":return;case"ProjectSourceAdded":{const{projectId:et,source:nt}=c,it=getProject(et);if(!it)return;it.videoApi.project.sources.push(nt),trigger$1("ProjectSourceAdded",{source:{id:nt.sourceId,address:nt.address,preview:nt.preview,props:nt.metadata??{}},projectId:et});return}case"ProjectSourceRemoved":{const{projectId:et,sourceId:nt}=c,it=getProject(et);if(!it)return;it.videoApi.project.sources=it.videoApi.project.sources.filter(ft=>ft.sourceId!==nt),trigger$1("ProjectSourceRemoved",{sourceId:nt,projectId:et})}case"NodeAdded":return;case"NodeRemoved":return;case"NodeChanged":return;case"BackgroundMetadataUpdate":{const{Command:et}=CoreContext,{projectId:nt,metadata:it,sourceId:ft,doTrigger:pt,role:mt}=c;if(mt==="ROLE_HOST"||mt==="ROLE_COHOST"){const St=getProject(nt);if(!St||St.props.background.id!==ft)return;let yt=(j=St==null?void 0:St.props)==null?void 0:j.background;yt&&(yt={...yt,props:{...yt.props,meta:{...yt.props.meta,...it}}},pt?et.updateProjectProps({projectId:nt,props:{background:yt}}):et.updateProjectPropsWithoutTrigger({projectId:nt,props:{background:yt}}))}return}case"OverlayMetadataUpdate":{const{Command:et}=CoreContext,{projectId:nt,metadata:it,sourceId:ft,doTrigger:pt,role:mt}=c;if(mt==="ROLE_HOST"||mt==="ROLE_COHOST"){const St=getProject(nt);if(!St)return;let yt=St.props.overlays.find(_t=>_t.id===ft);if(yt){yt={...yt,props:{...yt.props,meta:{...yt.props.meta,...it}}};const _t=St.props.overlays.findIndex(Tt=>Tt.id===ft);if(_t>-1){const Tt=JSON.parse(JSON.stringify((_e=St==null?void 0:St.props)==null?void 0:_e.overlays));Tt.splice(_t,1,yt),pt?et.updateProjectProps({projectId:nt,props:{overlays:Tt}}):et.updateProjectPropsWithoutTrigger({projectId:nt,props:{overlays:Tt}})}}}return}}}),subscribeInternal(()=>log$1.debug({nextState:{...state}}))},BroadcastPhase=lib$2.LiveApiModel.ProjectBroadcastPhase,{trigger,triggerInternal}=CoreContext,EventType=lib$2.LiveApiModel.EventType,EventSubType=lib$2.LiveApiModel.EventSubType,init=async(a={})=>{prepareInternalEvents();const c=a.env||"prod",b=a.logLevel||"Warn";log$1.getLogger("livekit").setLevel(b),log$1.setLevel(b),log$1.info("Initializing Studio SDK...");const{layouts:k=[],transforms:j=[],sources:_e=[],defaultTransforms:et={},useLatestRenderer:nt=!1,guestToken:it,rendererVersion:ft}=a,pt=new lib$2.ApiStream({sdkVersion:CoreContext.version,env:c,logLevel:b}),mt=config$1(),St=start({dbAdapter:compositorAdapter,transformSettings:{defaultTransforms:{...et,...mt.defaults.transforms}}});CoreContext.config=mt,CoreContext.clients=pt,CoreContext.compositor=St,CoreContext.logLevel=b,CoreContext.Request=await __vitePreload(()=>import("./requests-Dt9Rms5A.js"),__vite__mapDeps([])),CoreContext.Command=await __vitePreload(()=>import("./commands-CSTj0ASX.js"),__vite__mapDeps([])),CoreContext.rendererVersion=nt?"latest-v2":ft||CoreContext.version,window.__StudioKit={...CoreContext},St&&(St.registerSource([...Object.values(Sources),..._e]),St.registerTransform([...Object.values(Transforms),...j]),St.registerLayout([...Object.values(Layouts),...k]));const yt=await pt.load(it);let _t;yt&&await pt.LiveApi().project.getProject({...yt}).then(gt=>hydrateProject(gt.project,yt.role)).then(async gt=>{setAppState({user:{id:yt.collectionId,props:{},name:null,metadata:{}},sources:[],projects:[gt],activeProjectId:null}),gt.isInitial=!0,_t=await CoreContext.Command.setActiveProject({projectId:gt.id})}),pt.LiveApi().on(EventType.EVENT_TYPE_COLLECTION,(gt,ht)=>{switch(log$1.info("Received: Collection event",ht,gt),ht){case EventSubType.EVENT_SUB_TYPE_UPDATE:{triggerInternal("UserChanged",gt.update.collection);return}}}),pt.LiveApi().on(EventType.EVENT_TYPE_DESTINATION,(gt,ht)=>{switch(log$1.info("Received: Destination event",ht,gt),ht){case EventSubType.EVENT_SUB_TYPE_CREATE:{const{destination:Et}=gt.create;triggerInternal("DestinationAdded",Et);return}case EventSubType.EVENT_SUB_TYPE_UPDATE:{const{destination:Et}=gt.update;triggerInternal("DestinationChanged",Et);return}case EventSubType.EVENT_SUB_TYPE_DELETE:{triggerInternal("DestinationRemoved",gt.delete);return}}}),pt.LiveApi().on(EventType.EVENT_TYPE_SOURCE,(gt,ht)=>{switch(log$1.info("Received: Source event",ht,gt),ht){case EventSubType.EVENT_SUB_TYPE_CREATE:{triggerInternal("SourceAdded",gt.create.source);return}case EventSubType.EVENT_SUB_TYPE_UPDATE:{triggerInternal("SourceChanged",gt.update.source);return}case EventSubType.EVENT_SUB_TYPE_DELETE:{triggerInternal("SourceRemoved",gt.delete.sourceId);return}case EventSubType.EVENT_SUB_TYPE_ADD:{triggerInternal("ProjectSourceAdded",{projectId:gt.add.projectId,source:gt.add.source});return}case EventSubType.EVENT_SUB_TYPE_REMOVE:{triggerInternal("ProjectSourceRemoved",{projectId:gt.add.projectId,sourceId:gt.add.sourceId});return}}}),pt.LiveApi().on(EventType.EVENT_TYPE_PROJECT,(gt,ht)=>{var Et;switch(log$1.info("Received: Project event",ht,gt),ht){case EventSubType.EVENT_SUB_TYPE_CREATE:{const At=gt.create.project;if(getProject(At.projectId))return;triggerInternal("ProjectAdded",At);return}case EventSubType.EVENT_SUB_TYPE_UPDATE:{const{project:At}=gt.update,Bt=getProject(At.projectId);if(!Bt)return;triggerInternal("ProjectChanged",{project:At,phase:Bt.videoApi.phase});return}case EventSubType.EVENT_SUB_TYPE_DELETE:{triggerInternal("ProjectRemoved",{projectId:gt.delete.projectId});return}case EventSubType.EVENT_SUB_TYPE_STATE:{const At=getProject((Et=gt.state)==null?void 0:Et.projectId);if(!At)return;let Bt=gt.state.broadcastId;if(gt.state.error&&trigger("BroadcastError",{projectId:At.id,broadcastId:gt.state.broadcastId,error:gt.state.error}),gt.state.phase){const qt=gt.state.phase;qt===BroadcastPhase.PROJECT_BROADCAST_PHASE_RUNNING?trigger("BroadcastStarted",{projectId:At.id,broadcastId:gt.state.broadcastId}):qt===BroadcastPhase.PROJECT_BROADCAST_PHASE_STOPPED&&(Bt=null,trigger("BroadcastStopped",{projectId:At.id,broadcastId:gt.state.broadcastId}))}triggerInternal("ProjectChanged",{project:At.videoApi.project,phase:gt.state.phase,broadcastId:Bt});return}}}),pt.LayoutApi().on(lib$2.LayoutApiModel.EventType.EVENT_TYPE_LAYER,(gt,ht)=>{var Et;if(ht===lib$2.LayoutApiModel.EventSubType.EVENT_SUB_TYPE_CREATE){log$1.debug("Received: Node Insert",gt.create);const{connectionId:At,layoutId:Bt}=gt.create.requestMetadata;if(CoreContext.connectionId===At)return;const qt=layerToNode(gt.create),zt=getProjectByLayoutId(Bt),Ht=[qt,...zt.compositor.nodes.map(toDataNode$1)],ct=toSceneTree(Ht,qt.id);zt.compositor.local.insert(ct),triggerInternal("NodeAdded",{projectId:zt.id,nodeId:qt.id})}else if(ht===lib$2.LayoutApiModel.EventSubType.EVENT_SUB_TYPE_UPDATE){log$1.debug("Received: Node Update",gt.update);const{connectionId:At,layoutId:Bt,updateVersions:qt={}}=((Et=gt.update)==null?void 0:Et.requestMetadata)||{};if(CoreContext.connectionId===At)return;const zt=layerToNode(gt.update);if((latestUpdateVersion[zt.id]||0)>qt[zt.id])return log$1.info("Ignoring node update - updateID is less than latest.");latestUpdateVersion[zt.id]=qt[zt.id];const ct=getProjectByLayoutId(Bt);ct.compositor.local.update(gt.update.id,zt.props,zt.childIds),triggerInternal("NodeChanged",{projectId:ct.id,nodeId:zt.id})}else if(ht===lib$2.LayoutApiModel.EventSubType.EVENT_SUB_TYPE_DELETE){log$1.debug("Received: Node Delete",gt.delete);const{connectionId:At,layoutId:Bt}=gt.delete.requestMetadata;if(CoreContext.connectionId===At)return;const qt=getProjectByLayoutId(Bt);qt.compositor.local.remove(gt.delete.id),triggerInternal("NodeRemoved",{projectId:qt.id,nodeId:gt.delete.id})}else if(ht===lib$2.LayoutApiModel.EventSubType.EVENT_SUB_TYPE_BATCH){log$1.debug("Received: Node Batch Update",gt.batch);const{connectionId:At,layoutId:Bt,updateVersions:qt={}}=gt.batch.requestMetadata;if(CoreContext.connectionId===At)return;const zt=getProjectByLayoutId(Bt);gt.batch.layers.forEach(Ht=>{try{const[ct,dt]=Object.entries(Ht)[0];if(ct==="create"){const lt=layerToNode(dt);zt.compositor.local.insert(lt),triggerInternal("NodeAdded",{projectId:zt.id,nodeId:lt.id})}else if(ct==="update"){const lt=layerToNode(dt);if((latestUpdateVersion[lt.id]||0)>qt[lt.id])return log$1.info("Ignoring node update - updateID is less than latest.");latestUpdateVersion[lt.id]=qt[lt.id],zt.compositor.local.update(lt.id,lt.props,lt.childIds),triggerInternal("NodeChanged",{projectId:zt.id,nodeId:lt.id})}else ct==="delete"&&(zt.compositor.local.remove(dt.id),triggerInternal("NodeRemoved",{projectId:zt.id,nodeId:dt.id}))}catch(ct){log$1.warn("Error handling batch item",ct,{item:Ht})}}),zt&&triggerInternal("NodeChanged",{projectId:zt.id,nodeId:zt.compositor.getRoot().id})}});const Tt=(gt={},ht)=>{const{displayName:Et,role:At,maxDuration:Bt=CoreContext.config.defaults.guestTokenDuration,projectId:qt=CoreContext.state.activeProjectId}=gt,zt=getProject(qt),Ht=Et?{direct:{displayName:Et}}:{exchange:{maxDuration:Bt}};return pt.LiveApi().authentication.createGuestAccessToken({projectId:qt,token:Ht,url:ht,collectionId:zt.videoApi.project.collectionId,maxDuration:Bt,role:At||lib$2.LiveApiModel.Role.ROLE_GUEST})};return{...omit(CoreContext,["clients","config","connectionId","Request","state","trigger"]),createDemoToken:async()=>(console.warn("createDemoToken() is currently unavailable."),""),createPreviewLink:async(gt={})=>{const{maxDuration:ht,projectId:Et=CoreContext.state.activeProjectId}=gt,At=getProject(Et),Bt=At.videoApi.project.composition.studioSdk.rendererUrl;return(await pt.LiveApi().authentication.createGuestAccessToken({projectId:Et,token:{direct:{displayName:"Preview"}},url:Bt,collectionId:At.videoApi.project.collectionId,maxDuration:ht||CoreContext.config.defaults.previewTokenDuration,role:lib$2.LiveApiModel.Role.ROLE_VIEWER})).url},createGuestLink:async(gt,ht={})=>(await Tt(ht,gt)).url,createGuestToken:async(gt={})=>(await Tt(gt)).accessToken,initialProject:_t,load,render:render$1}},load=async(a,c)=>{let b=getBaseUser();if(b)return log$1.info("Attempted to load user again - returning existing user"),b;if(!a){log$1.warn("Access token required for load()");return}log$1.info("Loading user..."),await CoreContext.clients.load(a);const k=await CoreContext.Request.loadUser(c);return setAppState({user:k.user,sources:k.sources,projects:k.projects,activeProjectId:null}),b=getBaseUser(),trigger("UserLoaded",b),b},hostname=window.location.hostname,prodHosts=["cloud.golightstream.com","api.stream"],getEnv=()=>prodHosts.some(c=>hostname.includes(c))?"prod":"stage",run=async()=>{const a=await init({env:getEnv(),logLevel:"Debug"}),c=a==null?void 0:a.initialProject;if(!c)return console.warn("Project not available");await c.joinRoom(),a.render({containerEl:document.getElementById("root"),projectId:c.id,dragAndDrop:!1})};run();export{CoreContext as C,ProjectBroadcastPhase as P,getAccessTokenData as a,getProject as b,toBaseProject as c,getRoom as d,trigger$1 as e,toBaseDestination as f,getUser as g,hydrateProject as h,jwtDecode as j,triggerInternal$1 as t,webrtcManager as w};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = []
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
//# sourceMappingURL=compositor-C8Gcco0y.js.map
