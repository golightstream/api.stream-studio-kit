var os=Object.defineProperty,as=Object.defineProperties;var ss=Object.getOwnPropertyDescriptors;var jo=Object.getOwnPropertySymbols;var us=Object.prototype.hasOwnProperty,ds=Object.prototype.propertyIsEnumerable;var Jn=(a,s,d)=>s in a?os(a,s,{enumerable:!0,configurable:!0,writable:!0,value:d}):a[s]=d,jt=(a,s)=>{for(var d in s||(s={}))us.call(s,d)&&Jn(a,d,s[d]);if(jo)for(var d of jo(s))ds.call(s,d)&&Jn(a,d,s[d]);return a},vn=(a,s)=>as(a,ss(s));var yn=(a,s,d)=>(Jn(a,typeof s!="symbol"?s+"":s,d),d);function _mergeNamespaces(a,s){return s.forEach(function(d){d&&typeof d!="string"&&!Array.isArray(d)&&Object.keys(d).forEach(function(c){if(c!=="default"&&!(c in a)){var m=Object.getOwnPropertyDescriptor(d,c);Object.defineProperty(a,c,m.get?m:{enumerable:!0,get:function(){return d[c]}})}})}),Object.freeze(Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}))}const p$2=function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const m of document.querySelectorAll('link[rel="modulepreload"]'))c(m);new MutationObserver(m=>{for(const g of m)if(g.type==="childList")for(const b of g.addedNodes)b.tagName==="LINK"&&b.rel==="modulepreload"&&c(b)}).observe(document,{childList:!0,subtree:!0});function d(m){const g={};return m.integrity&&(g.integrity=m.integrity),m.referrerpolicy&&(g.referrerPolicy=m.referrerpolicy),m.crossorigin==="use-credentials"?g.credentials="include":m.crossorigin==="anonymous"?g.credentials="omit":g.credentials="same-origin",g}function c(m){if(m.ep)return;m.ep=!0;const g=d(m);fetch(m.href,g)}};p$2();var renderer="";const scriptRel="modulepreload",seen={},base="/studiosdk/v2/renderer/v1.9.0/",__vitePreload=function(s,d){return!d||d.length===0?s():Promise.all(d.map(c=>{if(c=`${base}${c}`,c in seen)return;seen[c]=!0;const m=c.endsWith(".css"),g=m?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${g}`))return;const b=document.createElement("link");if(b.rel=m?"stylesheet":scriptRel,m||(b.as="script",b.crossOrigin=""),b.href=c,document.head.appendChild(b),m)return new Promise((k,et)=>{b.addEventListener("load",k),b.addEventListener("error",()=>et(new Error(`Unable to preload CSS for ${c}`)))})})).then(()=>s())};let currentSubId=0;const subscribers=new Map;function createSubscribe(){return function(a){if(typeof a!="function")return;const s=++currentSubId;return subscribers.set(s,a),()=>{subscribers.delete(s)}}}function createOn(){return function(a,s){return subscribe((d,c)=>{if(a===d)return s(c)})}}function createTrigger(){return function(a,...s){let d={type:a,payload:s[0]};log$1.debug("Event:",d),subscribers.forEach(c=>c(d.type,d.payload))}}const trigger$1=createTrigger(),subscribe=createSubscribe(),on=createOn();var commonjsGlobal=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function getAugmentedNamespace(a){if(a.__esModule)return a;var s=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(a).forEach(function(d){var c=Object.getOwnPropertyDescriptor(a,d);Object.defineProperty(s,d,c.get?c:{enumerable:!0,get:function(){return a[d]}})}),s}var loglevel={exports:{}};(function(a){(function(s,d){a.exports?a.exports=d():s.log=d()})(commonjsGlobal,function(){var s=function(){},d="undefined",c=typeof window!==d&&typeof window.navigator!==d&&/Trident\/|MSIE /.test(window.navigator.userAgent),m=["trace","debug","info","warn","error"];function g(St,_t){var ht=St[_t];if(typeof ht.bind=="function")return ht.bind(St);try{return Function.prototype.bind.call(ht,St)}catch{return function(){return Function.prototype.apply.apply(ht,[St,arguments])}}}function b(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function k(St){return St==="debug"&&(St="log"),typeof console===d?!1:St==="trace"&&c?b:console[St]!==void 0?g(console,St):console.log!==void 0?g(console,"log"):s}function et(St,_t){for(var ht=0;ht<m.length;ht++){var _e=m[ht];this[_e]=ht<St?s:this.methodFactory(_e,St,_t)}this.log=this.debug}function nt(St,_t,ht){return function(){typeof console!==d&&(et.call(this,_t,ht),this[St].apply(this,arguments))}}function it(St,_t,ht){return k(St)||nt.apply(this,arguments)}function ct(St,_t,ht){var _e=this,ot;_t=_t==null?"WARN":_t;var lt="loglevel";typeof St=="string"?lt+=":"+St:typeof St=="symbol"&&(lt=void 0);function Ot(bt){var Rt=(m[bt]||"silent").toUpperCase();if(!(typeof window===d||!lt)){try{window.localStorage[lt]=Rt;return}catch{}try{window.document.cookie=encodeURIComponent(lt)+"="+Rt+";"}catch{}}}function It(){var bt;if(!(typeof window===d||!lt)){try{bt=window.localStorage[lt]}catch{}if(typeof bt===d)try{var Rt=window.document.cookie,Ct=Rt.indexOf(encodeURIComponent(lt)+"=");Ct!==-1&&(bt=/^([^;]+)/.exec(Rt.slice(Ct))[1])}catch{}return _e.levels[bt]===void 0&&(bt=void 0),bt}}function Pt(){if(!(typeof window===d||!lt)){try{window.localStorage.removeItem(lt);return}catch{}try{window.document.cookie=encodeURIComponent(lt)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch{}}}_e.name=St,_e.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},_e.methodFactory=ht||it,_e.getLevel=function(){return ot},_e.setLevel=function(bt,Rt){if(typeof bt=="string"&&_e.levels[bt.toUpperCase()]!==void 0&&(bt=_e.levels[bt.toUpperCase()]),typeof bt=="number"&&bt>=0&&bt<=_e.levels.SILENT){if(ot=bt,Rt!==!1&&Ot(bt),et.call(_e,bt,St),typeof console===d&&bt<_e.levels.SILENT)return"No console available for logging"}else throw"log.setLevel() called with invalid level: "+bt},_e.setDefaultLevel=function(bt){_t=bt,It()||_e.setLevel(bt,!1)},_e.resetLevel=function(){_e.setLevel(_t,!1),Pt()},_e.enableAll=function(bt){_e.setLevel(_e.levels.TRACE,bt)},_e.disableAll=function(bt){_e.setLevel(_e.levels.SILENT,bt)};var $t=It();$t==null&&($t=_t),_e.setLevel($t,!1)}var st=new ct,ut={};st.getLogger=function(_t){if(typeof _t!="symbol"&&typeof _t!="string"||_t==="")throw new TypeError("You must supply a name when creating a logger.");var ht=ut[_t];return ht||(ht=ut[_t]=new ct(_t,st.getLevel(),st.methodFactory)),ht};var pt=typeof window!==d?window.log:void 0;return st.noConflict=function(){return typeof window!==d&&window.log===st&&(window.log=pt),st},st.getLoggers=function(){return ut},st.default=st,st})})(loglevel);var log$1=loglevel.exports;const connectionId$1=(Math.random()*1e20).toString(36),version$4="1.9.0",CoreContext={config:null,clients:null,on,subscribe,compositor:{},Request:{},Command:{},trigger:trigger$1,state:{},connectionId:connectionId$1,version:version$4,log:log$1,logLevel:null};window.LS_trigger=CoreContext.trigger;const setAppState=a=>{Object.keys(a).forEach(s=>{CoreContext.state[s]=a[s]})};var freeGlobal=typeof global=="object"&&global&&global.Object===Object&&global,freeGlobal$1=freeGlobal,freeSelf=typeof self=="object"&&self&&self.Object===Object&&self,root=freeGlobal$1||freeSelf||Function("return this")(),root$1=root,Symbol$1=root$1.Symbol,Symbol$2=Symbol$1,objectProto$g=Object.prototype,hasOwnProperty$d=objectProto$g.hasOwnProperty,nativeObjectToString$1=objectProto$g.toString,symToStringTag$1=Symbol$2?Symbol$2.toStringTag:void 0;function getRawTag(a){var s=hasOwnProperty$d.call(a,symToStringTag$1),d=a[symToStringTag$1];try{a[symToStringTag$1]=void 0;var c=!0}catch{}var m=nativeObjectToString$1.call(a);return c&&(s?a[symToStringTag$1]=d:delete a[symToStringTag$1]),m}var objectProto$f=Object.prototype,nativeObjectToString=objectProto$f.toString;function objectToString(a){return nativeObjectToString.call(a)}var nullTag="[object Null]",undefinedTag="[object Undefined]",symToStringTag=Symbol$2?Symbol$2.toStringTag:void 0;function baseGetTag(a){return a==null?a===void 0?undefinedTag:nullTag:symToStringTag&&symToStringTag in Object(a)?getRawTag(a):objectToString(a)}function isObjectLike(a){return a!=null&&typeof a=="object"}var symbolTag$3="[object Symbol]";function isSymbol(a){return typeof a=="symbol"||isObjectLike(a)&&baseGetTag(a)==symbolTag$3}function arrayMap(a,s){for(var d=-1,c=a==null?0:a.length,m=Array(c);++d<c;)m[d]=s(a[d],d,a);return m}var isArray$6=Array.isArray,isArray$7=isArray$6,INFINITY$1=1/0,symbolProto$2=Symbol$2?Symbol$2.prototype:void 0,symbolToString=symbolProto$2?symbolProto$2.toString:void 0;function baseToString(a){if(typeof a=="string")return a;if(isArray$7(a))return arrayMap(a,baseToString)+"";if(isSymbol(a))return symbolToString?symbolToString.call(a):"";var s=a+"";return s=="0"&&1/a==-INFINITY$1?"-0":s}var reWhitespace=/\s/;function trimmedEndIndex(a){for(var s=a.length;s--&&reWhitespace.test(a.charAt(s)););return s}var reTrimStart=/^\s+/;function baseTrim(a){return a&&a.slice(0,trimmedEndIndex(a)+1).replace(reTrimStart,"")}function isObject$5(a){var s=typeof a;return a!=null&&(s=="object"||s=="function")}var NAN=0/0,reIsBadHex=/^[-+]0x[0-9a-f]+$/i,reIsBinary=/^0b[01]+$/i,reIsOctal=/^0o[0-7]+$/i,freeParseInt=parseInt;function toNumber(a){if(typeof a=="number")return a;if(isSymbol(a))return NAN;if(isObject$5(a)){var s=typeof a.valueOf=="function"?a.valueOf():a;a=isObject$5(s)?s+"":s}if(typeof a!="string")return a===0?a:+a;a=baseTrim(a);var d=reIsBinary.test(a);return d||reIsOctal.test(a)?freeParseInt(a.slice(2),d?2:8):reIsBadHex.test(a)?NAN:+a}function identity$2(a){return a}var asyncTag="[object AsyncFunction]",funcTag$2="[object Function]",genTag$1="[object GeneratorFunction]",proxyTag="[object Proxy]";function isFunction$4(a){if(!isObject$5(a))return!1;var s=baseGetTag(a);return s==funcTag$2||s==genTag$1||s==asyncTag||s==proxyTag}var coreJsData=root$1["__core-js_shared__"],coreJsData$1=coreJsData,maskSrcKey=function(){var a=/[^.]+$/.exec(coreJsData$1&&coreJsData$1.keys&&coreJsData$1.keys.IE_PROTO||"");return a?"Symbol(src)_1."+a:""}();function isMasked(a){return!!maskSrcKey&&maskSrcKey in a}var funcProto$2=Function.prototype,funcToString$2=funcProto$2.toString;function toSource(a){if(a!=null){try{return funcToString$2.call(a)}catch{}try{return a+""}catch{}}return""}var reRegExpChar=/[\\^$.*+?()[\]{}|]/g,reIsHostCtor=/^\[object .+?Constructor\]$/,funcProto$1=Function.prototype,objectProto$e=Object.prototype,funcToString$1=funcProto$1.toString,hasOwnProperty$c=objectProto$e.hasOwnProperty,reIsNative=RegExp("^"+funcToString$1.call(hasOwnProperty$c).replace(reRegExpChar,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function baseIsNative(a){if(!isObject$5(a)||isMasked(a))return!1;var s=isFunction$4(a)?reIsNative:reIsHostCtor;return s.test(toSource(a))}function getValue(a,s){return a==null?void 0:a[s]}function getNative(a,s){var d=getValue(a,s);return baseIsNative(d)?d:void 0}var WeakMap$2=getNative(root$1,"WeakMap"),WeakMap$3=WeakMap$2,objectCreate$1=Object.create,baseCreate=function(){function a(){}return function(s){if(!isObject$5(s))return{};if(objectCreate$1)return objectCreate$1(s);a.prototype=s;var d=new a;return a.prototype=void 0,d}}(),baseCreate$1=baseCreate;function apply(a,s,d){switch(d.length){case 0:return a.call(s);case 1:return a.call(s,d[0]);case 2:return a.call(s,d[0],d[1]);case 3:return a.call(s,d[0],d[1],d[2])}return a.apply(s,d)}function copyArray(a,s){var d=-1,c=a.length;for(s||(s=Array(c));++d<c;)s[d]=a[d];return s}var HOT_COUNT=800,HOT_SPAN=16,nativeNow=Date.now;function shortOut(a){var s=0,d=0;return function(){var c=nativeNow(),m=HOT_SPAN-(c-d);if(d=c,m>0){if(++s>=HOT_COUNT)return arguments[0]}else s=0;return a.apply(void 0,arguments)}}function constant(a){return function(){return a}}var defineProperty$1=function(){try{var a=getNative(Object,"defineProperty");return a({},"",{}),a}catch{}}(),defineProperty$2=defineProperty$1,baseSetToString=defineProperty$2?function(a,s){return defineProperty$2(a,"toString",{configurable:!0,enumerable:!1,value:constant(s),writable:!0})}:identity$2,baseSetToString$1=baseSetToString,setToString=shortOut(baseSetToString$1),setToString$1=setToString;function arrayEach(a,s){for(var d=-1,c=a==null?0:a.length;++d<c&&s(a[d],d,a)!==!1;);return a}function baseFindIndex(a,s,d,c){for(var m=a.length,g=d+(c?1:-1);c?g--:++g<m;)if(s(a[g],g,a))return g;return-1}function baseIsNaN(a){return a!==a}function strictIndexOf(a,s,d){for(var c=d-1,m=a.length;++c<m;)if(a[c]===s)return c;return-1}function baseIndexOf(a,s,d){return s===s?strictIndexOf(a,s,d):baseFindIndex(a,baseIsNaN,d)}var MAX_SAFE_INTEGER$1=9007199254740991,reIsUint=/^(?:0|[1-9]\d*)$/;function isIndex(a,s){var d=typeof a;return s=s==null?MAX_SAFE_INTEGER$1:s,!!s&&(d=="number"||d!="symbol"&&reIsUint.test(a))&&a>-1&&a%1==0&&a<s}function baseAssignValue(a,s,d){s=="__proto__"&&defineProperty$2?defineProperty$2(a,s,{configurable:!0,enumerable:!0,value:d,writable:!0}):a[s]=d}function eq(a,s){return a===s||a!==a&&s!==s}var objectProto$d=Object.prototype,hasOwnProperty$b=objectProto$d.hasOwnProperty;function assignValue(a,s,d){var c=a[s];(!(hasOwnProperty$b.call(a,s)&&eq(c,d))||d===void 0&&!(s in a))&&baseAssignValue(a,s,d)}function copyObject(a,s,d,c){var m=!d;d||(d={});for(var g=-1,b=s.length;++g<b;){var k=s[g],et=c?c(d[k],a[k],k,d,a):void 0;et===void 0&&(et=a[k]),m?baseAssignValue(d,k,et):assignValue(d,k,et)}return d}var nativeMax$1=Math.max;function overRest(a,s,d){return s=nativeMax$1(s===void 0?a.length-1:s,0),function(){for(var c=arguments,m=-1,g=nativeMax$1(c.length-s,0),b=Array(g);++m<g;)b[m]=c[s+m];m=-1;for(var k=Array(s+1);++m<s;)k[m]=c[m];return k[s]=d(b),apply(a,this,k)}}function baseRest(a,s){return setToString$1(overRest(a,s,identity$2),a+"")}var MAX_SAFE_INTEGER=9007199254740991;function isLength(a){return typeof a=="number"&&a>-1&&a%1==0&&a<=MAX_SAFE_INTEGER}function isArrayLike$2(a){return a!=null&&isLength(a.length)&&!isFunction$4(a)}function isIterateeCall(a,s,d){if(!isObject$5(d))return!1;var c=typeof s;return(c=="number"?isArrayLike$2(d)&&isIndex(s,d.length):c=="string"&&s in d)?eq(d[s],a):!1}var objectProto$c=Object.prototype;function isPrototype(a){var s=a&&a.constructor,d=typeof s=="function"&&s.prototype||objectProto$c;return a===d}function baseTimes(a,s){for(var d=-1,c=Array(a);++d<a;)c[d]=s(d);return c}var argsTag$3="[object Arguments]";function baseIsArguments(a){return isObjectLike(a)&&baseGetTag(a)==argsTag$3}var objectProto$b=Object.prototype,hasOwnProperty$a=objectProto$b.hasOwnProperty,propertyIsEnumerable$1=objectProto$b.propertyIsEnumerable,isArguments=baseIsArguments(function(){return arguments}())?baseIsArguments:function(a){return isObjectLike(a)&&hasOwnProperty$a.call(a,"callee")&&!propertyIsEnumerable$1.call(a,"callee")},isArguments$1=isArguments;function stubFalse(){return!1}var freeExports$2=typeof exports=="object"&&exports&&!exports.nodeType&&exports,freeModule$2=freeExports$2&&typeof module=="object"&&module&&!module.nodeType&&module,moduleExports$2=freeModule$2&&freeModule$2.exports===freeExports$2,Buffer$2=moduleExports$2?root$1.Buffer:void 0,nativeIsBuffer=Buffer$2?Buffer$2.isBuffer:void 0,isBuffer$1=nativeIsBuffer||stubFalse,isBuffer$2=isBuffer$1,argsTag$2="[object Arguments]",arrayTag$2="[object Array]",boolTag$3="[object Boolean]",dateTag$3="[object Date]",errorTag$2="[object Error]",funcTag$1="[object Function]",mapTag$5="[object Map]",numberTag$3="[object Number]",objectTag$4="[object Object]",regexpTag$3="[object RegExp]",setTag$5="[object Set]",stringTag$3="[object String]",weakMapTag$2="[object WeakMap]",arrayBufferTag$3="[object ArrayBuffer]",dataViewTag$4="[object DataView]",float32Tag$2="[object Float32Array]",float64Tag$2="[object Float64Array]",int8Tag$2="[object Int8Array]",int16Tag$2="[object Int16Array]",int32Tag$2="[object Int32Array]",uint8Tag$2="[object Uint8Array]",uint8ClampedTag$2="[object Uint8ClampedArray]",uint16Tag$2="[object Uint16Array]",uint32Tag$2="[object Uint32Array]",typedArrayTags={};typedArrayTags[float32Tag$2]=typedArrayTags[float64Tag$2]=typedArrayTags[int8Tag$2]=typedArrayTags[int16Tag$2]=typedArrayTags[int32Tag$2]=typedArrayTags[uint8Tag$2]=typedArrayTags[uint8ClampedTag$2]=typedArrayTags[uint16Tag$2]=typedArrayTags[uint32Tag$2]=!0;typedArrayTags[argsTag$2]=typedArrayTags[arrayTag$2]=typedArrayTags[arrayBufferTag$3]=typedArrayTags[boolTag$3]=typedArrayTags[dataViewTag$4]=typedArrayTags[dateTag$3]=typedArrayTags[errorTag$2]=typedArrayTags[funcTag$1]=typedArrayTags[mapTag$5]=typedArrayTags[numberTag$3]=typedArrayTags[objectTag$4]=typedArrayTags[regexpTag$3]=typedArrayTags[setTag$5]=typedArrayTags[stringTag$3]=typedArrayTags[weakMapTag$2]=!1;function baseIsTypedArray(a){return isObjectLike(a)&&isLength(a.length)&&!!typedArrayTags[baseGetTag(a)]}function baseUnary(a){return function(s){return a(s)}}var freeExports$1=typeof exports=="object"&&exports&&!exports.nodeType&&exports,freeModule$1=freeExports$1&&typeof module=="object"&&module&&!module.nodeType&&module,moduleExports$1=freeModule$1&&freeModule$1.exports===freeExports$1,freeProcess=moduleExports$1&&freeGlobal$1.process,nodeUtil=function(){try{var a=freeModule$1&&freeModule$1.require&&freeModule$1.require("util").types;return a||freeProcess&&freeProcess.binding&&freeProcess.binding("util")}catch{}}(),nodeUtil$1=nodeUtil,nodeIsTypedArray=nodeUtil$1&&nodeUtil$1.isTypedArray,isTypedArray=nodeIsTypedArray?baseUnary(nodeIsTypedArray):baseIsTypedArray,isTypedArray$1=isTypedArray,objectProto$a=Object.prototype,hasOwnProperty$9=objectProto$a.hasOwnProperty;function arrayLikeKeys(a,s){var d=isArray$7(a),c=!d&&isArguments$1(a),m=!d&&!c&&isBuffer$2(a),g=!d&&!c&&!m&&isTypedArray$1(a),b=d||c||m||g,k=b?baseTimes(a.length,String):[],et=k.length;for(var nt in a)(s||hasOwnProperty$9.call(a,nt))&&!(b&&(nt=="length"||m&&(nt=="offset"||nt=="parent")||g&&(nt=="buffer"||nt=="byteLength"||nt=="byteOffset")||isIndex(nt,et)))&&k.push(nt);return k}function overArg(a,s){return function(d){return a(s(d))}}var nativeKeys=overArg(Object.keys,Object),nativeKeys$1=nativeKeys,objectProto$9=Object.prototype,hasOwnProperty$8=objectProto$9.hasOwnProperty;function baseKeys(a){if(!isPrototype(a))return nativeKeys$1(a);var s=[];for(var d in Object(a))hasOwnProperty$8.call(a,d)&&d!="constructor"&&s.push(d);return s}function keys$1(a){return isArrayLike$2(a)?arrayLikeKeys(a):baseKeys(a)}function nativeKeysIn(a){var s=[];if(a!=null)for(var d in Object(a))s.push(d);return s}var objectProto$8=Object.prototype,hasOwnProperty$7=objectProto$8.hasOwnProperty;function baseKeysIn(a){if(!isObject$5(a))return nativeKeysIn(a);var s=isPrototype(a),d=[];for(var c in a)c=="constructor"&&(s||!hasOwnProperty$7.call(a,c))||d.push(c);return d}function keysIn(a){return isArrayLike$2(a)?arrayLikeKeys(a,!0):baseKeysIn(a)}var reIsDeepProp=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,reIsPlainProp=/^\w*$/;function isKey(a,s){if(isArray$7(a))return!1;var d=typeof a;return d=="number"||d=="symbol"||d=="boolean"||a==null||isSymbol(a)?!0:reIsPlainProp.test(a)||!reIsDeepProp.test(a)||s!=null&&a in Object(s)}var nativeCreate=getNative(Object,"create"),nativeCreate$1=nativeCreate;function hashClear(){this.__data__=nativeCreate$1?nativeCreate$1(null):{},this.size=0}function hashDelete(a){var s=this.has(a)&&delete this.__data__[a];return this.size-=s?1:0,s}var HASH_UNDEFINED$2="__lodash_hash_undefined__",objectProto$7=Object.prototype,hasOwnProperty$6=objectProto$7.hasOwnProperty;function hashGet(a){var s=this.__data__;if(nativeCreate$1){var d=s[a];return d===HASH_UNDEFINED$2?void 0:d}return hasOwnProperty$6.call(s,a)?s[a]:void 0}var objectProto$6=Object.prototype,hasOwnProperty$5=objectProto$6.hasOwnProperty;function hashHas(a){var s=this.__data__;return nativeCreate$1?s[a]!==void 0:hasOwnProperty$5.call(s,a)}var HASH_UNDEFINED$1="__lodash_hash_undefined__";function hashSet(a,s){var d=this.__data__;return this.size+=this.has(a)?0:1,d[a]=nativeCreate$1&&s===void 0?HASH_UNDEFINED$1:s,this}function Hash(a){var s=-1,d=a==null?0:a.length;for(this.clear();++s<d;){var c=a[s];this.set(c[0],c[1])}}Hash.prototype.clear=hashClear;Hash.prototype.delete=hashDelete;Hash.prototype.get=hashGet;Hash.prototype.has=hashHas;Hash.prototype.set=hashSet;function listCacheClear(){this.__data__=[],this.size=0}function assocIndexOf(a,s){for(var d=a.length;d--;)if(eq(a[d][0],s))return d;return-1}var arrayProto$1=Array.prototype,splice$1=arrayProto$1.splice;function listCacheDelete(a){var s=this.__data__,d=assocIndexOf(s,a);if(d<0)return!1;var c=s.length-1;return d==c?s.pop():splice$1.call(s,d,1),--this.size,!0}function listCacheGet(a){var s=this.__data__,d=assocIndexOf(s,a);return d<0?void 0:s[d][1]}function listCacheHas(a){return assocIndexOf(this.__data__,a)>-1}function listCacheSet(a,s){var d=this.__data__,c=assocIndexOf(d,a);return c<0?(++this.size,d.push([a,s])):d[c][1]=s,this}function ListCache(a){var s=-1,d=a==null?0:a.length;for(this.clear();++s<d;){var c=a[s];this.set(c[0],c[1])}}ListCache.prototype.clear=listCacheClear;ListCache.prototype.delete=listCacheDelete;ListCache.prototype.get=listCacheGet;ListCache.prototype.has=listCacheHas;ListCache.prototype.set=listCacheSet;var Map$1=getNative(root$1,"Map"),Map$2=Map$1;function mapCacheClear(){this.size=0,this.__data__={hash:new Hash,map:new(Map$2||ListCache),string:new Hash}}function isKeyable(a){var s=typeof a;return s=="string"||s=="number"||s=="symbol"||s=="boolean"?a!=="__proto__":a===null}function getMapData(a,s){var d=a.__data__;return isKeyable(s)?d[typeof s=="string"?"string":"hash"]:d.map}function mapCacheDelete(a){var s=getMapData(this,a).delete(a);return this.size-=s?1:0,s}function mapCacheGet(a){return getMapData(this,a).get(a)}function mapCacheHas(a){return getMapData(this,a).has(a)}function mapCacheSet(a,s){var d=getMapData(this,a),c=d.size;return d.set(a,s),this.size+=d.size==c?0:1,this}function MapCache(a){var s=-1,d=a==null?0:a.length;for(this.clear();++s<d;){var c=a[s];this.set(c[0],c[1])}}MapCache.prototype.clear=mapCacheClear;MapCache.prototype.delete=mapCacheDelete;MapCache.prototype.get=mapCacheGet;MapCache.prototype.has=mapCacheHas;MapCache.prototype.set=mapCacheSet;var FUNC_ERROR_TEXT$1="Expected a function";function memoize(a,s){if(typeof a!="function"||s!=null&&typeof s!="function")throw new TypeError(FUNC_ERROR_TEXT$1);var d=function(){var c=arguments,m=s?s.apply(this,c):c[0],g=d.cache;if(g.has(m))return g.get(m);var b=a.apply(this,c);return d.cache=g.set(m,b)||g,b};return d.cache=new(memoize.Cache||MapCache),d}memoize.Cache=MapCache;var MAX_MEMOIZE_SIZE=500;function memoizeCapped(a){var s=memoize(a,function(c){return d.size===MAX_MEMOIZE_SIZE&&d.clear(),c}),d=s.cache;return s}var rePropName=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,reEscapeChar=/\\(\\)?/g,stringToPath=memoizeCapped(function(a){var s=[];return a.charCodeAt(0)===46&&s.push(""),a.replace(rePropName,function(d,c,m,g){s.push(m?g.replace(reEscapeChar,"$1"):c||d)}),s}),stringToPath$1=stringToPath;function toString$1(a){return a==null?"":baseToString(a)}function castPath(a,s){return isArray$7(a)?a:isKey(a,s)?[a]:stringToPath$1(toString$1(a))}var INFINITY=1/0;function toKey(a){if(typeof a=="string"||isSymbol(a))return a;var s=a+"";return s=="0"&&1/a==-INFINITY?"-0":s}function baseGet(a,s){s=castPath(s,a);for(var d=0,c=s.length;a!=null&&d<c;)a=a[toKey(s[d++])];return d&&d==c?a:void 0}function get(a,s,d){var c=a==null?void 0:baseGet(a,s);return c===void 0?d:c}function arrayPush(a,s){for(var d=-1,c=s.length,m=a.length;++d<c;)a[m+d]=s[d];return a}var spreadableSymbol=Symbol$2?Symbol$2.isConcatSpreadable:void 0;function isFlattenable(a){return isArray$7(a)||isArguments$1(a)||!!(spreadableSymbol&&a&&a[spreadableSymbol])}function baseFlatten(a,s,d,c,m){var g=-1,b=a.length;for(d||(d=isFlattenable),m||(m=[]);++g<b;){var k=a[g];s>0&&d(k)?s>1?baseFlatten(k,s-1,d,c,m):arrayPush(m,k):c||(m[m.length]=k)}return m}function flatten(a){var s=a==null?0:a.length;return s?baseFlatten(a,1):[]}function flatRest(a){return setToString$1(overRest(a,void 0,flatten),a+"")}var getPrototype=overArg(Object.getPrototypeOf,Object),getPrototype$1=getPrototype,objectTag$3="[object Object]",funcProto=Function.prototype,objectProto$5=Object.prototype,funcToString=funcProto.toString,hasOwnProperty$4=objectProto$5.hasOwnProperty,objectCtorString=funcToString.call(Object);function isPlainObject$1(a){if(!isObjectLike(a)||baseGetTag(a)!=objectTag$3)return!1;var s=getPrototype$1(a);if(s===null)return!0;var d=hasOwnProperty$4.call(s,"constructor")&&s.constructor;return typeof d=="function"&&d instanceof d&&funcToString.call(d)==objectCtorString}function baseSlice(a,s,d){var c=-1,m=a.length;s<0&&(s=-s>m?0:m+s),d=d>m?m:d,d<0&&(d+=m),m=s>d?0:d-s>>>0,s>>>=0;for(var g=Array(m);++c<m;)g[c]=a[c+s];return g}function castSlice(a,s,d){var c=a.length;return d=d===void 0?c:d,!s&&d>=c?a:baseSlice(a,s,d)}var rsAstralRange$2="\\ud800-\\udfff",rsComboMarksRange$3="\\u0300-\\u036f",reComboHalfMarksRange$3="\\ufe20-\\ufe2f",rsComboSymbolsRange$3="\\u20d0-\\u20ff",rsComboRange$3=rsComboMarksRange$3+reComboHalfMarksRange$3+rsComboSymbolsRange$3,rsVarRange$2="\\ufe0e\\ufe0f",rsZWJ$2="\\u200d",reHasUnicode=RegExp("["+rsZWJ$2+rsAstralRange$2+rsComboRange$3+rsVarRange$2+"]");function hasUnicode(a){return reHasUnicode.test(a)}function asciiToArray(a){return a.split("")}var rsAstralRange$1="\\ud800-\\udfff",rsComboMarksRange$2="\\u0300-\\u036f",reComboHalfMarksRange$2="\\ufe20-\\ufe2f",rsComboSymbolsRange$2="\\u20d0-\\u20ff",rsComboRange$2=rsComboMarksRange$2+reComboHalfMarksRange$2+rsComboSymbolsRange$2,rsVarRange$1="\\ufe0e\\ufe0f",rsAstral="["+rsAstralRange$1+"]",rsCombo$2="["+rsComboRange$2+"]",rsFitz$1="\\ud83c[\\udffb-\\udfff]",rsModifier$1="(?:"+rsCombo$2+"|"+rsFitz$1+")",rsNonAstral$1="[^"+rsAstralRange$1+"]",rsRegional$1="(?:\\ud83c[\\udde6-\\uddff]){2}",rsSurrPair$1="[\\ud800-\\udbff][\\udc00-\\udfff]",rsZWJ$1="\\u200d",reOptMod$1=rsModifier$1+"?",rsOptVar$1="["+rsVarRange$1+"]?",rsOptJoin$1="(?:"+rsZWJ$1+"(?:"+[rsNonAstral$1,rsRegional$1,rsSurrPair$1].join("|")+")"+rsOptVar$1+reOptMod$1+")*",rsSeq$1=rsOptVar$1+reOptMod$1+rsOptJoin$1,rsSymbol="(?:"+[rsNonAstral$1+rsCombo$2+"?",rsCombo$2,rsRegional$1,rsSurrPair$1,rsAstral].join("|")+")",reUnicode=RegExp(rsFitz$1+"(?="+rsFitz$1+")|"+rsSymbol+rsSeq$1,"g");function unicodeToArray(a){return a.match(reUnicode)||[]}function stringToArray(a){return hasUnicode(a)?unicodeToArray(a):asciiToArray(a)}function createCaseFirst(a){return function(s){s=toString$1(s);var d=hasUnicode(s)?stringToArray(s):void 0,c=d?d[0]:s.charAt(0),m=d?castSlice(d,1).join(""):s.slice(1);return c[a]()+m}}var upperFirst=createCaseFirst("toUpperCase"),upperFirst$1=upperFirst;function capitalize(a){return upperFirst$1(toString$1(a).toLowerCase())}function arrayReduce(a,s,d,c){var m=-1,g=a==null?0:a.length;for(c&&g&&(d=a[++m]);++m<g;)d=s(d,a[m],m,a);return d}function basePropertyOf(a){return function(s){return a==null?void 0:a[s]}}var deburredLetters={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},deburrLetter=basePropertyOf(deburredLetters),deburrLetter$1=deburrLetter,reLatin=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,rsComboMarksRange$1="\\u0300-\\u036f",reComboHalfMarksRange$1="\\ufe20-\\ufe2f",rsComboSymbolsRange$1="\\u20d0-\\u20ff",rsComboRange$1=rsComboMarksRange$1+reComboHalfMarksRange$1+rsComboSymbolsRange$1,rsCombo$1="["+rsComboRange$1+"]",reComboMark=RegExp(rsCombo$1,"g");function deburr(a){return a=toString$1(a),a&&a.replace(reLatin,deburrLetter$1).replace(reComboMark,"")}var reAsciiWord=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;function asciiWords(a){return a.match(reAsciiWord)||[]}var reHasUnicodeWord=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;function hasUnicodeWord(a){return reHasUnicodeWord.test(a)}var rsAstralRange="\\ud800-\\udfff",rsComboMarksRange="\\u0300-\\u036f",reComboHalfMarksRange="\\ufe20-\\ufe2f",rsComboSymbolsRange="\\u20d0-\\u20ff",rsComboRange=rsComboMarksRange+reComboHalfMarksRange+rsComboSymbolsRange,rsDingbatRange="\\u2700-\\u27bf",rsLowerRange="a-z\\xdf-\\xf6\\xf8-\\xff",rsMathOpRange="\\xac\\xb1\\xd7\\xf7",rsNonCharRange="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",rsPunctuationRange="\\u2000-\\u206f",rsSpaceRange=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",rsUpperRange="A-Z\\xc0-\\xd6\\xd8-\\xde",rsVarRange="\\ufe0e\\ufe0f",rsBreakRange=rsMathOpRange+rsNonCharRange+rsPunctuationRange+rsSpaceRange,rsApos$1="['\u2019]",rsBreak="["+rsBreakRange+"]",rsCombo="["+rsComboRange+"]",rsDigits="\\d+",rsDingbat="["+rsDingbatRange+"]",rsLower="["+rsLowerRange+"]",rsMisc="[^"+rsAstralRange+rsBreakRange+rsDigits+rsDingbatRange+rsLowerRange+rsUpperRange+"]",rsFitz="\\ud83c[\\udffb-\\udfff]",rsModifier="(?:"+rsCombo+"|"+rsFitz+")",rsNonAstral="[^"+rsAstralRange+"]",rsRegional="(?:\\ud83c[\\udde6-\\uddff]){2}",rsSurrPair="[\\ud800-\\udbff][\\udc00-\\udfff]",rsUpper="["+rsUpperRange+"]",rsZWJ="\\u200d",rsMiscLower="(?:"+rsLower+"|"+rsMisc+")",rsMiscUpper="(?:"+rsUpper+"|"+rsMisc+")",rsOptContrLower="(?:"+rsApos$1+"(?:d|ll|m|re|s|t|ve))?",rsOptContrUpper="(?:"+rsApos$1+"(?:D|LL|M|RE|S|T|VE))?",reOptMod=rsModifier+"?",rsOptVar="["+rsVarRange+"]?",rsOptJoin="(?:"+rsZWJ+"(?:"+[rsNonAstral,rsRegional,rsSurrPair].join("|")+")"+rsOptVar+reOptMod+")*",rsOrdLower="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",rsOrdUpper="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",rsSeq=rsOptVar+reOptMod+rsOptJoin,rsEmoji="(?:"+[rsDingbat,rsRegional,rsSurrPair].join("|")+")"+rsSeq,reUnicodeWord=RegExp([rsUpper+"?"+rsLower+"+"+rsOptContrLower+"(?="+[rsBreak,rsUpper,"$"].join("|")+")",rsMiscUpper+"+"+rsOptContrUpper+"(?="+[rsBreak,rsUpper+rsMiscLower,"$"].join("|")+")",rsUpper+"?"+rsMiscLower+"+"+rsOptContrLower,rsUpper+"+"+rsOptContrUpper,rsOrdUpper,rsOrdLower,rsDigits,rsEmoji].join("|"),"g");function unicodeWords(a){return a.match(reUnicodeWord)||[]}function words(a,s,d){return a=toString$1(a),s=d?void 0:s,s===void 0?hasUnicodeWord(a)?unicodeWords(a):asciiWords(a):a.match(s)||[]}var rsApos="['\u2019]",reApos=RegExp(rsApos,"g");function createCompounder(a){return function(s){return arrayReduce(words(deburr(s).replace(reApos,"")),a,"")}}var camelCase$2=createCompounder(function(a,s,d){return s=s.toLowerCase(),a+(d?capitalize(s):s)}),camelCase$3=camelCase$2;function stackClear(){this.__data__=new ListCache,this.size=0}function stackDelete(a){var s=this.__data__,d=s.delete(a);return this.size=s.size,d}function stackGet(a){return this.__data__.get(a)}function stackHas(a){return this.__data__.has(a)}var LARGE_ARRAY_SIZE=200;function stackSet(a,s){var d=this.__data__;if(d instanceof ListCache){var c=d.__data__;if(!Map$2||c.length<LARGE_ARRAY_SIZE-1)return c.push([a,s]),this.size=++d.size,this;d=this.__data__=new MapCache(c)}return d.set(a,s),this.size=d.size,this}function Stack(a){var s=this.__data__=new ListCache(a);this.size=s.size}Stack.prototype.clear=stackClear;Stack.prototype.delete=stackDelete;Stack.prototype.get=stackGet;Stack.prototype.has=stackHas;Stack.prototype.set=stackSet;function baseAssign(a,s){return a&&copyObject(s,keys$1(s),a)}function baseAssignIn(a,s){return a&&copyObject(s,keysIn(s),a)}var freeExports=typeof exports=="object"&&exports&&!exports.nodeType&&exports,freeModule=freeExports&&typeof module=="object"&&module&&!module.nodeType&&module,moduleExports=freeModule&&freeModule.exports===freeExports,Buffer$1=moduleExports?root$1.Buffer:void 0,allocUnsafe=Buffer$1?Buffer$1.allocUnsafe:void 0;function cloneBuffer(a,s){if(s)return a.slice();var d=a.length,c=allocUnsafe?allocUnsafe(d):new a.constructor(d);return a.copy(c),c}function arrayFilter(a,s){for(var d=-1,c=a==null?0:a.length,m=0,g=[];++d<c;){var b=a[d];s(b,d,a)&&(g[m++]=b)}return g}function stubArray(){return[]}var objectProto$4=Object.prototype,propertyIsEnumerable=objectProto$4.propertyIsEnumerable,nativeGetSymbols$1=Object.getOwnPropertySymbols,getSymbols=nativeGetSymbols$1?function(a){return a==null?[]:(a=Object(a),arrayFilter(nativeGetSymbols$1(a),function(s){return propertyIsEnumerable.call(a,s)}))}:stubArray,getSymbols$1=getSymbols;function copySymbols(a,s){return copyObject(a,getSymbols$1(a),s)}var nativeGetSymbols=Object.getOwnPropertySymbols,getSymbolsIn=nativeGetSymbols?function(a){for(var s=[];a;)arrayPush(s,getSymbols$1(a)),a=getPrototype$1(a);return s}:stubArray,getSymbolsIn$1=getSymbolsIn;function copySymbolsIn(a,s){return copyObject(a,getSymbolsIn$1(a),s)}function baseGetAllKeys(a,s,d){var c=s(a);return isArray$7(a)?c:arrayPush(c,d(a))}function getAllKeys(a){return baseGetAllKeys(a,keys$1,getSymbols$1)}function getAllKeysIn(a){return baseGetAllKeys(a,keysIn,getSymbolsIn$1)}var DataView$1=getNative(root$1,"DataView"),DataView$2=DataView$1,Promise$1=getNative(root$1,"Promise"),Promise$2=Promise$1,Set$1=getNative(root$1,"Set"),Set$2=Set$1,mapTag$4="[object Map]",objectTag$2="[object Object]",promiseTag="[object Promise]",setTag$4="[object Set]",weakMapTag$1="[object WeakMap]",dataViewTag$3="[object DataView]",dataViewCtorString=toSource(DataView$2),mapCtorString=toSource(Map$2),promiseCtorString=toSource(Promise$2),setCtorString=toSource(Set$2),weakMapCtorString=toSource(WeakMap$3),getTag=baseGetTag;(DataView$2&&getTag(new DataView$2(new ArrayBuffer(1)))!=dataViewTag$3||Map$2&&getTag(new Map$2)!=mapTag$4||Promise$2&&getTag(Promise$2.resolve())!=promiseTag||Set$2&&getTag(new Set$2)!=setTag$4||WeakMap$3&&getTag(new WeakMap$3)!=weakMapTag$1)&&(getTag=function(a){var s=baseGetTag(a),d=s==objectTag$2?a.constructor:void 0,c=d?toSource(d):"";if(c)switch(c){case dataViewCtorString:return dataViewTag$3;case mapCtorString:return mapTag$4;case promiseCtorString:return promiseTag;case setCtorString:return setTag$4;case weakMapCtorString:return weakMapTag$1}return s});var getTag$1=getTag,objectProto$3=Object.prototype,hasOwnProperty$3=objectProto$3.hasOwnProperty;function initCloneArray(a){var s=a.length,d=new a.constructor(s);return s&&typeof a[0]=="string"&&hasOwnProperty$3.call(a,"index")&&(d.index=a.index,d.input=a.input),d}var Uint8Array$1=root$1.Uint8Array,Uint8Array$2=Uint8Array$1;function cloneArrayBuffer(a){var s=new a.constructor(a.byteLength);return new Uint8Array$2(s).set(new Uint8Array$2(a)),s}function cloneDataView(a,s){var d=s?cloneArrayBuffer(a.buffer):a.buffer;return new a.constructor(d,a.byteOffset,a.byteLength)}var reFlags=/\w*$/;function cloneRegExp(a){var s=new a.constructor(a.source,reFlags.exec(a));return s.lastIndex=a.lastIndex,s}var symbolProto$1=Symbol$2?Symbol$2.prototype:void 0,symbolValueOf$1=symbolProto$1?symbolProto$1.valueOf:void 0;function cloneSymbol(a){return symbolValueOf$1?Object(symbolValueOf$1.call(a)):{}}function cloneTypedArray(a,s){var d=s?cloneArrayBuffer(a.buffer):a.buffer;return new a.constructor(d,a.byteOffset,a.length)}var boolTag$2="[object Boolean]",dateTag$2="[object Date]",mapTag$3="[object Map]",numberTag$2="[object Number]",regexpTag$2="[object RegExp]",setTag$3="[object Set]",stringTag$2="[object String]",symbolTag$2="[object Symbol]",arrayBufferTag$2="[object ArrayBuffer]",dataViewTag$2="[object DataView]",float32Tag$1="[object Float32Array]",float64Tag$1="[object Float64Array]",int8Tag$1="[object Int8Array]",int16Tag$1="[object Int16Array]",int32Tag$1="[object Int32Array]",uint8Tag$1="[object Uint8Array]",uint8ClampedTag$1="[object Uint8ClampedArray]",uint16Tag$1="[object Uint16Array]",uint32Tag$1="[object Uint32Array]";function initCloneByTag(a,s,d){var c=a.constructor;switch(s){case arrayBufferTag$2:return cloneArrayBuffer(a);case boolTag$2:case dateTag$2:return new c(+a);case dataViewTag$2:return cloneDataView(a,d);case float32Tag$1:case float64Tag$1:case int8Tag$1:case int16Tag$1:case int32Tag$1:case uint8Tag$1:case uint8ClampedTag$1:case uint16Tag$1:case uint32Tag$1:return cloneTypedArray(a,d);case mapTag$3:return new c;case numberTag$2:case stringTag$2:return new c(a);case regexpTag$2:return cloneRegExp(a);case setTag$3:return new c;case symbolTag$2:return cloneSymbol(a)}}function initCloneObject(a){return typeof a.constructor=="function"&&!isPrototype(a)?baseCreate$1(getPrototype$1(a)):{}}var mapTag$2="[object Map]";function baseIsMap(a){return isObjectLike(a)&&getTag$1(a)==mapTag$2}var nodeIsMap=nodeUtil$1&&nodeUtil$1.isMap,isMap=nodeIsMap?baseUnary(nodeIsMap):baseIsMap,isMap$1=isMap,setTag$2="[object Set]";function baseIsSet(a){return isObjectLike(a)&&getTag$1(a)==setTag$2}var nodeIsSet=nodeUtil$1&&nodeUtil$1.isSet,isSet$1=nodeIsSet?baseUnary(nodeIsSet):baseIsSet,isSet$2=isSet$1,CLONE_DEEP_FLAG$2=1,CLONE_FLAT_FLAG$1=2,CLONE_SYMBOLS_FLAG$2=4,argsTag$1="[object Arguments]",arrayTag$1="[object Array]",boolTag$1="[object Boolean]",dateTag$1="[object Date]",errorTag$1="[object Error]",funcTag="[object Function]",genTag="[object GeneratorFunction]",mapTag$1="[object Map]",numberTag$1="[object Number]",objectTag$1="[object Object]",regexpTag$1="[object RegExp]",setTag$1="[object Set]",stringTag$1="[object String]",symbolTag$1="[object Symbol]",weakMapTag="[object WeakMap]",arrayBufferTag$1="[object ArrayBuffer]",dataViewTag$1="[object DataView]",float32Tag="[object Float32Array]",float64Tag="[object Float64Array]",int8Tag="[object Int8Array]",int16Tag="[object Int16Array]",int32Tag="[object Int32Array]",uint8Tag="[object Uint8Array]",uint8ClampedTag="[object Uint8ClampedArray]",uint16Tag="[object Uint16Array]",uint32Tag="[object Uint32Array]",cloneableTags={};cloneableTags[argsTag$1]=cloneableTags[arrayTag$1]=cloneableTags[arrayBufferTag$1]=cloneableTags[dataViewTag$1]=cloneableTags[boolTag$1]=cloneableTags[dateTag$1]=cloneableTags[float32Tag]=cloneableTags[float64Tag]=cloneableTags[int8Tag]=cloneableTags[int16Tag]=cloneableTags[int32Tag]=cloneableTags[mapTag$1]=cloneableTags[numberTag$1]=cloneableTags[objectTag$1]=cloneableTags[regexpTag$1]=cloneableTags[setTag$1]=cloneableTags[stringTag$1]=cloneableTags[symbolTag$1]=cloneableTags[uint8Tag]=cloneableTags[uint8ClampedTag]=cloneableTags[uint16Tag]=cloneableTags[uint32Tag]=!0;cloneableTags[errorTag$1]=cloneableTags[funcTag]=cloneableTags[weakMapTag]=!1;function baseClone(a,s,d,c,m,g){var b,k=s&CLONE_DEEP_FLAG$2,et=s&CLONE_FLAT_FLAG$1,nt=s&CLONE_SYMBOLS_FLAG$2;if(d&&(b=m?d(a,c,m,g):d(a)),b!==void 0)return b;if(!isObject$5(a))return a;var it=isArray$7(a);if(it){if(b=initCloneArray(a),!k)return copyArray(a,b)}else{var ct=getTag$1(a),st=ct==funcTag||ct==genTag;if(isBuffer$2(a))return cloneBuffer(a,k);if(ct==objectTag$1||ct==argsTag$1||st&&!m){if(b=et||st?{}:initCloneObject(a),!k)return et?copySymbolsIn(a,baseAssignIn(b,a)):copySymbols(a,baseAssign(b,a))}else{if(!cloneableTags[ct])return m?a:{};b=initCloneByTag(a,ct,k)}}g||(g=new Stack);var ut=g.get(a);if(ut)return ut;g.set(a,b),isSet$2(a)?a.forEach(function(_t){b.add(baseClone(_t,s,d,_t,a,g))}):isMap$1(a)&&a.forEach(function(_t,ht){b.set(ht,baseClone(_t,s,d,ht,a,g))});var pt=nt?et?getAllKeysIn:getAllKeys:et?keysIn:keys$1,St=it?void 0:pt(a);return arrayEach(St||a,function(_t,ht){St&&(ht=_t,_t=a[ht]),assignValue(b,ht,baseClone(_t,s,d,ht,a,g))}),b}var CLONE_DEEP_FLAG$1=1,CLONE_SYMBOLS_FLAG$1=4;function cloneDeep(a){return baseClone(a,CLONE_DEEP_FLAG$1|CLONE_SYMBOLS_FLAG$1)}var HASH_UNDEFINED="__lodash_hash_undefined__";function setCacheAdd(a){return this.__data__.set(a,HASH_UNDEFINED),this}function setCacheHas(a){return this.__data__.has(a)}function SetCache(a){var s=-1,d=a==null?0:a.length;for(this.__data__=new MapCache;++s<d;)this.add(a[s])}SetCache.prototype.add=SetCache.prototype.push=setCacheAdd;SetCache.prototype.has=setCacheHas;function arraySome(a,s){for(var d=-1,c=a==null?0:a.length;++d<c;)if(s(a[d],d,a))return!0;return!1}function cacheHas(a,s){return a.has(s)}var COMPARE_PARTIAL_FLAG$5=1,COMPARE_UNORDERED_FLAG$3=2;function equalArrays(a,s,d,c,m,g){var b=d&COMPARE_PARTIAL_FLAG$5,k=a.length,et=s.length;if(k!=et&&!(b&&et>k))return!1;var nt=g.get(a),it=g.get(s);if(nt&&it)return nt==s&&it==a;var ct=-1,st=!0,ut=d&COMPARE_UNORDERED_FLAG$3?new SetCache:void 0;for(g.set(a,s),g.set(s,a);++ct<k;){var pt=a[ct],St=s[ct];if(c)var _t=b?c(St,pt,ct,s,a,g):c(pt,St,ct,a,s,g);if(_t!==void 0){if(_t)continue;st=!1;break}if(ut){if(!arraySome(s,function(ht,_e){if(!cacheHas(ut,_e)&&(pt===ht||m(pt,ht,d,c,g)))return ut.push(_e)})){st=!1;break}}else if(!(pt===St||m(pt,St,d,c,g))){st=!1;break}}return g.delete(a),g.delete(s),st}function mapToArray(a){var s=-1,d=Array(a.size);return a.forEach(function(c,m){d[++s]=[m,c]}),d}function setToArray(a){var s=-1,d=Array(a.size);return a.forEach(function(c){d[++s]=c}),d}var COMPARE_PARTIAL_FLAG$4=1,COMPARE_UNORDERED_FLAG$2=2,boolTag="[object Boolean]",dateTag="[object Date]",errorTag="[object Error]",mapTag="[object Map]",numberTag="[object Number]",regexpTag="[object RegExp]",setTag="[object Set]",stringTag="[object String]",symbolTag="[object Symbol]",arrayBufferTag="[object ArrayBuffer]",dataViewTag="[object DataView]",symbolProto=Symbol$2?Symbol$2.prototype:void 0,symbolValueOf=symbolProto?symbolProto.valueOf:void 0;function equalByTag(a,s,d,c,m,g,b){switch(d){case dataViewTag:if(a.byteLength!=s.byteLength||a.byteOffset!=s.byteOffset)return!1;a=a.buffer,s=s.buffer;case arrayBufferTag:return!(a.byteLength!=s.byteLength||!g(new Uint8Array$2(a),new Uint8Array$2(s)));case boolTag:case dateTag:case numberTag:return eq(+a,+s);case errorTag:return a.name==s.name&&a.message==s.message;case regexpTag:case stringTag:return a==s+"";case mapTag:var k=mapToArray;case setTag:var et=c&COMPARE_PARTIAL_FLAG$4;if(k||(k=setToArray),a.size!=s.size&&!et)return!1;var nt=b.get(a);if(nt)return nt==s;c|=COMPARE_UNORDERED_FLAG$2,b.set(a,s);var it=equalArrays(k(a),k(s),c,m,g,b);return b.delete(a),it;case symbolTag:if(symbolValueOf)return symbolValueOf.call(a)==symbolValueOf.call(s)}return!1}var COMPARE_PARTIAL_FLAG$3=1,objectProto$2=Object.prototype,hasOwnProperty$2=objectProto$2.hasOwnProperty;function equalObjects(a,s,d,c,m,g){var b=d&COMPARE_PARTIAL_FLAG$3,k=getAllKeys(a),et=k.length,nt=getAllKeys(s),it=nt.length;if(et!=it&&!b)return!1;for(var ct=et;ct--;){var st=k[ct];if(!(b?st in s:hasOwnProperty$2.call(s,st)))return!1}var ut=g.get(a),pt=g.get(s);if(ut&&pt)return ut==s&&pt==a;var St=!0;g.set(a,s),g.set(s,a);for(var _t=b;++ct<et;){st=k[ct];var ht=a[st],_e=s[st];if(c)var ot=b?c(_e,ht,st,s,a,g):c(ht,_e,st,a,s,g);if(!(ot===void 0?ht===_e||m(ht,_e,d,c,g):ot)){St=!1;break}_t||(_t=st=="constructor")}if(St&&!_t){var lt=a.constructor,Ot=s.constructor;lt!=Ot&&"constructor"in a&&"constructor"in s&&!(typeof lt=="function"&&lt instanceof lt&&typeof Ot=="function"&&Ot instanceof Ot)&&(St=!1)}return g.delete(a),g.delete(s),St}var COMPARE_PARTIAL_FLAG$2=1,argsTag="[object Arguments]",arrayTag="[object Array]",objectTag="[object Object]",objectProto$1=Object.prototype,hasOwnProperty$1=objectProto$1.hasOwnProperty;function baseIsEqualDeep(a,s,d,c,m,g){var b=isArray$7(a),k=isArray$7(s),et=b?arrayTag:getTag$1(a),nt=k?arrayTag:getTag$1(s);et=et==argsTag?objectTag:et,nt=nt==argsTag?objectTag:nt;var it=et==objectTag,ct=nt==objectTag,st=et==nt;if(st&&isBuffer$2(a)){if(!isBuffer$2(s))return!1;b=!0,it=!1}if(st&&!it)return g||(g=new Stack),b||isTypedArray$1(a)?equalArrays(a,s,d,c,m,g):equalByTag(a,s,et,d,c,m,g);if(!(d&COMPARE_PARTIAL_FLAG$2)){var ut=it&&hasOwnProperty$1.call(a,"__wrapped__"),pt=ct&&hasOwnProperty$1.call(s,"__wrapped__");if(ut||pt){var St=ut?a.value():a,_t=pt?s.value():s;return g||(g=new Stack),m(St,_t,d,c,g)}}return st?(g||(g=new Stack),equalObjects(a,s,d,c,m,g)):!1}function baseIsEqual(a,s,d,c,m){return a===s?!0:a==null||s==null||!isObjectLike(a)&&!isObjectLike(s)?a!==a&&s!==s:baseIsEqualDeep(a,s,d,c,baseIsEqual,m)}var COMPARE_PARTIAL_FLAG$1=1,COMPARE_UNORDERED_FLAG$1=2;function baseIsMatch(a,s,d,c){var m=d.length,g=m,b=!c;if(a==null)return!g;for(a=Object(a);m--;){var k=d[m];if(b&&k[2]?k[1]!==a[k[0]]:!(k[0]in a))return!1}for(;++m<g;){k=d[m];var et=k[0],nt=a[et],it=k[1];if(b&&k[2]){if(nt===void 0&&!(et in a))return!1}else{var ct=new Stack;if(c)var st=c(nt,it,et,a,s,ct);if(!(st===void 0?baseIsEqual(it,nt,COMPARE_PARTIAL_FLAG$1|COMPARE_UNORDERED_FLAG$1,c,ct):st))return!1}}return!0}function isStrictComparable(a){return a===a&&!isObject$5(a)}function getMatchData(a){for(var s=keys$1(a),d=s.length;d--;){var c=s[d],m=a[c];s[d]=[c,m,isStrictComparable(m)]}return s}function matchesStrictComparable(a,s){return function(d){return d==null?!1:d[a]===s&&(s!==void 0||a in Object(d))}}function baseMatches(a){var s=getMatchData(a);return s.length==1&&s[0][2]?matchesStrictComparable(s[0][0],s[0][1]):function(d){return d===a||baseIsMatch(d,a,s)}}function baseHasIn(a,s){return a!=null&&s in Object(a)}function hasPath(a,s,d){s=castPath(s,a);for(var c=-1,m=s.length,g=!1;++c<m;){var b=toKey(s[c]);if(!(g=a!=null&&d(a,b)))break;a=a[b]}return g||++c!=m?g:(m=a==null?0:a.length,!!m&&isLength(m)&&isIndex(b,m)&&(isArray$7(a)||isArguments$1(a)))}function hasIn(a,s){return a!=null&&hasPath(a,s,baseHasIn)}var COMPARE_PARTIAL_FLAG=1,COMPARE_UNORDERED_FLAG=2;function baseMatchesProperty(a,s){return isKey(a)&&isStrictComparable(s)?matchesStrictComparable(toKey(a),s):function(d){var c=get(d,a);return c===void 0&&c===s?hasIn(d,a):baseIsEqual(s,c,COMPARE_PARTIAL_FLAG|COMPARE_UNORDERED_FLAG)}}function baseProperty(a){return function(s){return s==null?void 0:s[a]}}function basePropertyDeep(a){return function(s){return baseGet(s,a)}}function property(a){return isKey(a)?baseProperty(toKey(a)):basePropertyDeep(a)}function baseIteratee(a){return typeof a=="function"?a:a==null?identity$2:typeof a=="object"?isArray$7(a)?baseMatchesProperty(a[0],a[1]):baseMatches(a):property(a)}function createBaseFor(a){return function(s,d,c){for(var m=-1,g=Object(s),b=c(s),k=b.length;k--;){var et=b[a?k:++m];if(d(g[et],et,g)===!1)break}return s}}var baseFor=createBaseFor(),baseFor$1=baseFor;function baseForOwn(a,s){return a&&baseFor$1(a,s,keys$1)}function createBaseEach(a,s){return function(d,c){if(d==null)return d;if(!isArrayLike$2(d))return a(d,c);for(var m=d.length,g=s?m:-1,b=Object(d);(s?g--:++g<m)&&c(b[g],g,b)!==!1;);return d}}var baseEach=createBaseEach(baseForOwn),baseEach$1=baseEach,now=function(){return root$1.Date.now()},now$1=now,FUNC_ERROR_TEXT="Expected a function",nativeMax=Math.max,nativeMin=Math.min;function debounce$2(a,s,d){var c,m,g,b,k,et,nt=0,it=!1,ct=!1,st=!0;if(typeof a!="function")throw new TypeError(FUNC_ERROR_TEXT);s=toNumber(s)||0,isObject$5(d)&&(it=!!d.leading,ct="maxWait"in d,g=ct?nativeMax(toNumber(d.maxWait)||0,s):g,st="trailing"in d?!!d.trailing:st);function ut(It){var Pt=c,$t=m;return c=m=void 0,nt=It,b=a.apply($t,Pt),b}function pt(It){return nt=It,k=setTimeout(ht,s),it?ut(It):b}function St(It){var Pt=It-et,$t=It-nt,bt=s-Pt;return ct?nativeMin(bt,g-$t):bt}function _t(It){var Pt=It-et,$t=It-nt;return et===void 0||Pt>=s||Pt<0||ct&&$t>=g}function ht(){var It=now$1();if(_t(It))return _e(It);k=setTimeout(ht,St(It))}function _e(It){return k=void 0,st&&c?ut(It):(c=m=void 0,b)}function ot(){k!==void 0&&clearTimeout(k),nt=0,c=et=m=k=void 0}function lt(){return k===void 0?b:_e(now$1())}function Ot(){var It=now$1(),Pt=_t(It);if(c=arguments,m=this,et=It,Pt){if(k===void 0)return pt(et);if(ct)return clearTimeout(k),k=setTimeout(ht,s),ut(et)}return k===void 0&&(k=setTimeout(ht,s)),b}return Ot.cancel=ot,Ot.flush=lt,Ot}function last$3(a){var s=a==null?0:a.length;return s?a[s-1]:void 0}function baseMap(a,s){var d=-1,c=isArrayLike$2(a)?Array(a.length):[];return baseEach$1(a,function(m,g,b){c[++d]=s(m,g,b)}),c}function parent(a,s){return s.length<2?a:baseGet(a,baseSlice(s,0,-1))}function isEqual(a,s){return baseIsEqual(a,s)}function isMatch(a,s){return a===s||baseIsMatch(a,s,getMatchData(s))}var kebabCase=createCompounder(function(a,s,d){return a+(d?"-":"")+s.toLowerCase()}),kebabCase$1=kebabCase;function baseUnset(a,s){return s=castPath(s,a),a=parent(a,s),a==null||delete a[toKey(last$3(s))]}function customOmitClone(a){return isPlainObject$1(a)?void 0:a}var CLONE_DEEP_FLAG=1,CLONE_FLAT_FLAG=2,CLONE_SYMBOLS_FLAG=4,omit=flatRest(function(a,s){var d={};if(a==null)return d;var c=!1;s=arrayMap(s,function(g){return g=castPath(g,a),c||(c=g.length>1),g}),copyObject(a,getAllKeysIn(a),d),c&&(d=baseClone(d,CLONE_DEEP_FLAG|CLONE_FLAT_FLAG|CLONE_SYMBOLS_FLAG,customOmitClone));for(var m=s.length;m--;)baseUnset(d,s[m]);return d}),omit$1=omit;function baseSet(a,s,d,c){if(!isObject$5(a))return a;s=castPath(s,a);for(var m=-1,g=s.length,b=g-1,k=a;k!=null&&++m<g;){var et=toKey(s[m]),nt=d;if(et==="__proto__"||et==="constructor"||et==="prototype")return a;if(m!=b){var it=k[et];nt=c?c(it,et,k):void 0,nt===void 0&&(nt=isObject$5(it)?it:isIndex(s[m+1])?[]:{})}assignValue(k,et,nt),k=k[et]}return a}function basePickBy(a,s,d){for(var c=-1,m=s.length,g={};++c<m;){var b=s[c],k=baseGet(a,b);d(k,b)&&baseSet(g,castPath(b,a),k)}return g}function baseSortBy(a,s){var d=a.length;for(a.sort(s);d--;)a[d]=a[d].value;return a}function compareAscending(a,s){if(a!==s){var d=a!==void 0,c=a===null,m=a===a,g=isSymbol(a),b=s!==void 0,k=s===null,et=s===s,nt=isSymbol(s);if(!k&&!nt&&!g&&a>s||g&&b&&et&&!k&&!nt||c&&b&&et||!d&&et||!m)return 1;if(!c&&!g&&!nt&&a<s||nt&&d&&m&&!c&&!g||k&&d&&m||!b&&m||!et)return-1}return 0}function compareMultiple(a,s,d){for(var c=-1,m=a.criteria,g=s.criteria,b=m.length,k=d.length;++c<b;){var et=compareAscending(m[c],g[c]);if(et){if(c>=k)return et;var nt=d[c];return et*(nt=="desc"?-1:1)}}return a.index-s.index}function baseOrderBy(a,s,d){s.length?s=arrayMap(s,function(g){return isArray$7(g)?function(b){return baseGet(b,g.length===1?g[0]:g)}:g}):s=[identity$2];var c=-1;s=arrayMap(s,baseUnary(baseIteratee));var m=baseMap(a,function(g,b,k){var et=arrayMap(s,function(nt){return nt(g)});return{criteria:et,index:++c,value:g}});return baseSortBy(m,function(g,b){return compareMultiple(g,b,d)})}function basePick(a,s){return basePickBy(a,s,function(d,c){return hasIn(a,c)})}var pick=flatRest(function(a,s){return a==null?{}:basePick(a,s)}),pick$1=pick;function baseIndexOfWith(a,s,d,c){for(var m=d-1,g=a.length;++m<g;)if(c(a[m],s))return m;return-1}var arrayProto=Array.prototype,splice=arrayProto.splice;function basePullAll(a,s,d,c){var m=c?baseIndexOfWith:baseIndexOf,g=-1,b=s.length,k=a;for(a===s&&(s=copyArray(s)),d&&(k=arrayMap(a,baseUnary(d)));++g<b;)for(var et=0,nt=s[g],it=d?d(nt):nt;(et=m(k,it,et,c))>-1;)k!==a&&splice.call(k,et,1),splice.call(a,et,1);return a}function pullAll(a,s){return a&&a.length&&s&&s.length?basePullAll(a,s):a}var pull$1=baseRest(pullAll),pull$2=pull$1,sortBy=baseRest(function(a,s){if(a==null)return[];var d=s.length;return d>1&&isIterateeCall(a,s[0],s[1])?s=[]:d>2&&isIterateeCall(s[0],s[1],s[2])&&(s=[s[0]]),baseOrderBy(a,baseFlatten(s,1),[])}),sortBy$1=sortBy,fastDeepEqual=function a(s,d){if(s===d)return!0;if(s&&d&&typeof s=="object"&&typeof d=="object"){if(s.constructor!==d.constructor)return!1;var c,m,g;if(Array.isArray(s)){if(c=s.length,c!=d.length)return!1;for(m=c;m--!==0;)if(!a(s[m],d[m]))return!1;return!0}if(s.constructor===RegExp)return s.source===d.source&&s.flags===d.flags;if(s.valueOf!==Object.prototype.valueOf)return s.valueOf()===d.valueOf();if(s.toString!==Object.prototype.toString)return s.toString()===d.toString();if(g=Object.keys(s),c=g.length,c!==Object.keys(d).length)return!1;for(m=c;m--!==0;)if(!Object.prototype.hasOwnProperty.call(d,g[m]))return!1;for(m=c;m--!==0;){var b=g[m];if(!a(s[b],d[b]))return!1}return!0}return s!==s&&d!==d};const generateId=()=>(Math.random()*1e20).toString(36),insertAt$1=(a=0,s,d,c=!1)=>[...d.slice(0,a),...[s].flat(),...d.slice(c?a+1:a)],replaceItem$1=(a,s,d)=>{a=typeof a=="function"?a:m=>m===a;const c=d.findIndex(a);return c<0?d:insertAt$1(c,s,d,!0)},swapIndex=(a,s,d)=>{if(!d[a]||!d[s])return d;d=[...d];const c=d[a];return d[a]=d[s],d[s]=c,d},swapItems=(a,s,d)=>{const c=d.findIndex(g=>g===a),m=d.findIndex(g=>g===s);return c<0||m<0?d:swapIndex(c,m,d)},toDataNode$1=a=>a?{id:a.id,props:a.props,childIds:(a.children||[]).map(s=>s.id)}:null,toSceneNode=a=>({id:a.id,props:a.props,children:[]}),toSceneTree=(a,s)=>{const d=a.find(m=>m.id===s);if(!d)return null;const c=d.childIds;return{id:d.id,props:d.props,children:c.map(m=>toSceneTree(a,m)).filter(Boolean)}},forEachDown$1=(a,s)=>{s(a),(a.children||[]).forEach(c=>forEachDown$1(c,(m,g)=>{s(m,g||a)}))},mapDown=(a,s)=>{const d=s(a);return vn(jt({},d),{children:((d==null?void 0:d.children)||(a==null?void 0:a.children)||[]).map(c=>mapDown(c,s))})},mapDownAsync=async(a,s)=>{var c;const d=(c=a==null?void 0:a.children)!=null?c:[];return vn(jt({},await s(a)),{children:await Promise.all(d.map(m=>mapDownAsync(m,s)))})},getElementAttributes=a=>Object.values(a.attributes).reduce((s,d)=>vn(jt({},s),{[d.name]:d.value}),{}),asArray=a=>isArray$7(a)?a:[a],sizeToNum=(a,s)=>typeof a=="number"?a:typeof a=="string"?a.indexOf("%")>-1?parseFloat(a)/100*s:parseFloat(a):0,asSize=a=>typeof a=="number"?a+"px":typeof a=="string"?a.indexOf("%")>-1?parseFloat(a)+"%":a:"0px",asDuration=a=>typeof a=="string"?a:typeof a=="number"?a+"ms":"0ms",values=a=>Array.from(a.values());var Logic=Object.freeze(Object.defineProperty({__proto__:null,deepEqual:fastDeepEqual,generateId,insertAt:insertAt$1,replaceItem:replaceItem$1,swapIndex,swapItems,toDataNode:toDataNode$1,toSceneNode,toSceneTree,forEachDown:forEachDown$1,mapDown,mapDownAsync,getElementAttributes,asArray,sizeToNum,asSize,asDuration,values,pick:pick$1,pull:pull$2,omit:omit$1,isEqual,cloneDeep,sortBy:sortBy$1,debounce:debounce$2,camelCase:camelCase$3,kebabCase:kebabCase$1,isArray:isArray$7},Symbol.toStringTag,{value:"Module"})),lib$2={};function e(a){this.message=a}e.prototype=new Error,e.prototype.name="InvalidCharacterError";var r$2=typeof window!="undefined"&&window.atob&&window.atob.bind(window)||function(a){var s=String(a).replace(/=+$/,"");if(s.length%4==1)throw new e("'atob' failed: The string to be decoded is not correctly encoded.");for(var d,c,m=0,g=0,b="";c=s.charAt(g++);~c&&(d=m%4?64*d+c:c,m++%4)?b+=String.fromCharCode(255&d>>(-2*m&6)):0)c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(c);return b};function t$1(a){var s=a.replace(/-/g,"+").replace(/_/g,"/");switch(s.length%4){case 0:break;case 2:s+="==";break;case 3:s+="=";break;default:throw"Illegal base64url string!"}try{return function(d){return decodeURIComponent(r$2(d).replace(/(.)/g,function(c,m){var g=m.charCodeAt(0).toString(16).toUpperCase();return g.length<2&&(g="0"+g),"%"+g}))}(s)}catch{return r$2(s)}}function n$1(a){this.message=a}function o(a,s){if(typeof a!="string")throw new n$1("Invalid token specified");var d=(s=s||{}).header===!0?0:1;try{return JSON.parse(t$1(a.split(".")[d]))}catch(c){throw new n$1("Invalid token specified: "+c.message)}}n$1.prototype=new Error,n$1.prototype.name="InvalidTokenError";var jwtDecode_esm=Object.freeze(Object.defineProperty({__proto__:null,default:o,InvalidTokenError:n$1},Symbol.toStringTag,{value:"Module"})),require$$0$2=getAugmentedNamespace(jwtDecode_esm),getRandomValues,rnds8=new Uint8Array(16);function rng(){if(!getRandomValues&&(getRandomValues=typeof crypto!="undefined"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto!="undefined"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!getRandomValues))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return getRandomValues(rnds8)}var REGEX=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function validate$1(a){return typeof a=="string"&&REGEX.test(a)}var byteToHex=[];for(var i=0;i<256;++i)byteToHex.push((i+256).toString(16).substr(1));function stringify(a){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,d=(byteToHex[a[s+0]]+byteToHex[a[s+1]]+byteToHex[a[s+2]]+byteToHex[a[s+3]]+"-"+byteToHex[a[s+4]]+byteToHex[a[s+5]]+"-"+byteToHex[a[s+6]]+byteToHex[a[s+7]]+"-"+byteToHex[a[s+8]]+byteToHex[a[s+9]]+"-"+byteToHex[a[s+10]]+byteToHex[a[s+11]]+byteToHex[a[s+12]]+byteToHex[a[s+13]]+byteToHex[a[s+14]]+byteToHex[a[s+15]]).toLowerCase();if(!validate$1(d))throw TypeError("Stringified UUID is invalid");return d}var _nodeId,_clockseq,_lastMSecs=0,_lastNSecs=0;function v1(a,s,d){var c=s&&d||0,m=s||new Array(16);a=a||{};var g=a.node||_nodeId,b=a.clockseq!==void 0?a.clockseq:_clockseq;if(g==null||b==null){var k=a.random||(a.rng||rng)();g==null&&(g=_nodeId=[k[0]|1,k[1],k[2],k[3],k[4],k[5]]),b==null&&(b=_clockseq=(k[6]<<8|k[7])&16383)}var et=a.msecs!==void 0?a.msecs:Date.now(),nt=a.nsecs!==void 0?a.nsecs:_lastNSecs+1,it=et-_lastMSecs+(nt-_lastNSecs)/1e4;if(it<0&&a.clockseq===void 0&&(b=b+1&16383),(it<0||et>_lastMSecs)&&a.nsecs===void 0&&(nt=0),nt>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");_lastMSecs=et,_lastNSecs=nt,_clockseq=b,et+=122192928e5;var ct=((et&268435455)*1e4+nt)%4294967296;m[c++]=ct>>>24&255,m[c++]=ct>>>16&255,m[c++]=ct>>>8&255,m[c++]=ct&255;var st=et/4294967296*1e4&268435455;m[c++]=st>>>8&255,m[c++]=st&255,m[c++]=st>>>24&15|16,m[c++]=st>>>16&255,m[c++]=b>>>8|128,m[c++]=b&255;for(var ut=0;ut<6;++ut)m[c+ut]=g[ut];return s||stringify(m)}function parse$1(a){if(!validate$1(a))throw TypeError("Invalid UUID");var s,d=new Uint8Array(16);return d[0]=(s=parseInt(a.slice(0,8),16))>>>24,d[1]=s>>>16&255,d[2]=s>>>8&255,d[3]=s&255,d[4]=(s=parseInt(a.slice(9,13),16))>>>8,d[5]=s&255,d[6]=(s=parseInt(a.slice(14,18),16))>>>8,d[7]=s&255,d[8]=(s=parseInt(a.slice(19,23),16))>>>8,d[9]=s&255,d[10]=(s=parseInt(a.slice(24,36),16))/1099511627776&255,d[11]=s/4294967296&255,d[12]=s>>>24&255,d[13]=s>>>16&255,d[14]=s>>>8&255,d[15]=s&255,d}function stringToBytes(a){a=unescape(encodeURIComponent(a));for(var s=[],d=0;d<a.length;++d)s.push(a.charCodeAt(d));return s}var DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function v35(a,s,d){function c(m,g,b,k){if(typeof m=="string"&&(m=stringToBytes(m)),typeof g=="string"&&(g=parse$1(g)),g.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var et=new Uint8Array(16+m.length);if(et.set(g),et.set(m,g.length),et=d(et),et[6]=et[6]&15|s,et[8]=et[8]&63|128,b){k=k||0;for(var nt=0;nt<16;++nt)b[k+nt]=et[nt];return b}return stringify(et)}try{c.name=a}catch{}return c.DNS=DNS,c.URL=URL,c}function md5(a){if(typeof a=="string"){var s=unescape(encodeURIComponent(a));a=new Uint8Array(s.length);for(var d=0;d<s.length;++d)a[d]=s.charCodeAt(d)}return md5ToHexEncodedArray(wordsToMd5(bytesToWords(a),a.length*8))}function md5ToHexEncodedArray(a){for(var s=[],d=a.length*32,c="0123456789abcdef",m=0;m<d;m+=8){var g=a[m>>5]>>>m%32&255,b=parseInt(c.charAt(g>>>4&15)+c.charAt(g&15),16);s.push(b)}return s}function getOutputLength(a){return(a+64>>>9<<4)+14+1}function wordsToMd5(a,s){a[s>>5]|=128<<s%32,a[getOutputLength(s)-1]=s;for(var d=1732584193,c=-271733879,m=-1732584194,g=271733878,b=0;b<a.length;b+=16){var k=d,et=c,nt=m,it=g;d=md5ff(d,c,m,g,a[b],7,-680876936),g=md5ff(g,d,c,m,a[b+1],12,-389564586),m=md5ff(m,g,d,c,a[b+2],17,606105819),c=md5ff(c,m,g,d,a[b+3],22,-1044525330),d=md5ff(d,c,m,g,a[b+4],7,-176418897),g=md5ff(g,d,c,m,a[b+5],12,1200080426),m=md5ff(m,g,d,c,a[b+6],17,-1473231341),c=md5ff(c,m,g,d,a[b+7],22,-45705983),d=md5ff(d,c,m,g,a[b+8],7,1770035416),g=md5ff(g,d,c,m,a[b+9],12,-1958414417),m=md5ff(m,g,d,c,a[b+10],17,-42063),c=md5ff(c,m,g,d,a[b+11],22,-1990404162),d=md5ff(d,c,m,g,a[b+12],7,1804603682),g=md5ff(g,d,c,m,a[b+13],12,-40341101),m=md5ff(m,g,d,c,a[b+14],17,-1502002290),c=md5ff(c,m,g,d,a[b+15],22,1236535329),d=md5gg(d,c,m,g,a[b+1],5,-165796510),g=md5gg(g,d,c,m,a[b+6],9,-1069501632),m=md5gg(m,g,d,c,a[b+11],14,643717713),c=md5gg(c,m,g,d,a[b],20,-373897302),d=md5gg(d,c,m,g,a[b+5],5,-701558691),g=md5gg(g,d,c,m,a[b+10],9,38016083),m=md5gg(m,g,d,c,a[b+15],14,-660478335),c=md5gg(c,m,g,d,a[b+4],20,-405537848),d=md5gg(d,c,m,g,a[b+9],5,568446438),g=md5gg(g,d,c,m,a[b+14],9,-1019803690),m=md5gg(m,g,d,c,a[b+3],14,-187363961),c=md5gg(c,m,g,d,a[b+8],20,1163531501),d=md5gg(d,c,m,g,a[b+13],5,-1444681467),g=md5gg(g,d,c,m,a[b+2],9,-51403784),m=md5gg(m,g,d,c,a[b+7],14,1735328473),c=md5gg(c,m,g,d,a[b+12],20,-1926607734),d=md5hh(d,c,m,g,a[b+5],4,-378558),g=md5hh(g,d,c,m,a[b+8],11,-2022574463),m=md5hh(m,g,d,c,a[b+11],16,1839030562),c=md5hh(c,m,g,d,a[b+14],23,-35309556),d=md5hh(d,c,m,g,a[b+1],4,-1530992060),g=md5hh(g,d,c,m,a[b+4],11,1272893353),m=md5hh(m,g,d,c,a[b+7],16,-155497632),c=md5hh(c,m,g,d,a[b+10],23,-1094730640),d=md5hh(d,c,m,g,a[b+13],4,681279174),g=md5hh(g,d,c,m,a[b],11,-358537222),m=md5hh(m,g,d,c,a[b+3],16,-722521979),c=md5hh(c,m,g,d,a[b+6],23,76029189),d=md5hh(d,c,m,g,a[b+9],4,-640364487),g=md5hh(g,d,c,m,a[b+12],11,-421815835),m=md5hh(m,g,d,c,a[b+15],16,530742520),c=md5hh(c,m,g,d,a[b+2],23,-995338651),d=md5ii(d,c,m,g,a[b],6,-198630844),g=md5ii(g,d,c,m,a[b+7],10,1126891415),m=md5ii(m,g,d,c,a[b+14],15,-1416354905),c=md5ii(c,m,g,d,a[b+5],21,-57434055),d=md5ii(d,c,m,g,a[b+12],6,1700485571),g=md5ii(g,d,c,m,a[b+3],10,-1894986606),m=md5ii(m,g,d,c,a[b+10],15,-1051523),c=md5ii(c,m,g,d,a[b+1],21,-2054922799),d=md5ii(d,c,m,g,a[b+8],6,1873313359),g=md5ii(g,d,c,m,a[b+15],10,-30611744),m=md5ii(m,g,d,c,a[b+6],15,-1560198380),c=md5ii(c,m,g,d,a[b+13],21,1309151649),d=md5ii(d,c,m,g,a[b+4],6,-145523070),g=md5ii(g,d,c,m,a[b+11],10,-1120210379),m=md5ii(m,g,d,c,a[b+2],15,718787259),c=md5ii(c,m,g,d,a[b+9],21,-343485551),d=safeAdd(d,k),c=safeAdd(c,et),m=safeAdd(m,nt),g=safeAdd(g,it)}return[d,c,m,g]}function bytesToWords(a){if(a.length===0)return[];for(var s=a.length*8,d=new Uint32Array(getOutputLength(s)),c=0;c<s;c+=8)d[c>>5]|=(a[c/8]&255)<<c%32;return d}function safeAdd(a,s){var d=(a&65535)+(s&65535),c=(a>>16)+(s>>16)+(d>>16);return c<<16|d&65535}function bitRotateLeft(a,s){return a<<s|a>>>32-s}function md5cmn(a,s,d,c,m,g){return safeAdd(bitRotateLeft(safeAdd(safeAdd(s,a),safeAdd(c,g)),m),d)}function md5ff(a,s,d,c,m,g,b){return md5cmn(s&d|~s&c,a,s,m,g,b)}function md5gg(a,s,d,c,m,g,b){return md5cmn(s&c|d&~c,a,s,m,g,b)}function md5hh(a,s,d,c,m,g,b){return md5cmn(s^d^c,a,s,m,g,b)}function md5ii(a,s,d,c,m,g,b){return md5cmn(d^(s|~c),a,s,m,g,b)}var v3=v35("v3",48,md5),v3$1=v3;function v4(a,s,d){a=a||{};var c=a.random||(a.rng||rng)();if(c[6]=c[6]&15|64,c[8]=c[8]&63|128,s){d=d||0;for(var m=0;m<16;++m)s[d+m]=c[m];return s}return stringify(c)}function f(a,s,d,c){switch(a){case 0:return s&d^~s&c;case 1:return s^d^c;case 2:return s&d^s&c^d&c;case 3:return s^d^c}}function ROTL(a,s){return a<<s|a>>>32-s}function sha1(a){var s=[1518500249,1859775393,2400959708,3395469782],d=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof a=="string"){var c=unescape(encodeURIComponent(a));a=[];for(var m=0;m<c.length;++m)a.push(c.charCodeAt(m))}else Array.isArray(a)||(a=Array.prototype.slice.call(a));a.push(128);for(var g=a.length/4+2,b=Math.ceil(g/16),k=new Array(b),et=0;et<b;++et){for(var nt=new Uint32Array(16),it=0;it<16;++it)nt[it]=a[et*64+it*4]<<24|a[et*64+it*4+1]<<16|a[et*64+it*4+2]<<8|a[et*64+it*4+3];k[et]=nt}k[b-1][14]=(a.length-1)*8/Math.pow(2,32),k[b-1][14]=Math.floor(k[b-1][14]),k[b-1][15]=(a.length-1)*8&4294967295;for(var ct=0;ct<b;++ct){for(var st=new Uint32Array(80),ut=0;ut<16;++ut)st[ut]=k[ct][ut];for(var pt=16;pt<80;++pt)st[pt]=ROTL(st[pt-3]^st[pt-8]^st[pt-14]^st[pt-16],1);for(var St=d[0],_t=d[1],ht=d[2],_e=d[3],ot=d[4],lt=0;lt<80;++lt){var Ot=Math.floor(lt/20),It=ROTL(St,5)+f(Ot,_t,ht,_e)+ot+s[Ot]+st[lt]>>>0;ot=_e,_e=ht,ht=ROTL(_t,30)>>>0,_t=St,St=It}d[0]=d[0]+St>>>0,d[1]=d[1]+_t>>>0,d[2]=d[2]+ht>>>0,d[3]=d[3]+_e>>>0,d[4]=d[4]+ot>>>0}return[d[0]>>24&255,d[0]>>16&255,d[0]>>8&255,d[0]&255,d[1]>>24&255,d[1]>>16&255,d[1]>>8&255,d[1]&255,d[2]>>24&255,d[2]>>16&255,d[2]>>8&255,d[2]&255,d[3]>>24&255,d[3]>>16&255,d[3]>>8&255,d[3]&255,d[4]>>24&255,d[4]>>16&255,d[4]>>8&255,d[4]&255]}var v5=v35("v5",80,sha1),v5$1=v5,nil="00000000-0000-0000-0000-000000000000";function version$3(a){if(!validate$1(a))throw TypeError("Invalid UUID");return parseInt(a.substr(14,1),16)}var esmBrowser=Object.freeze(Object.defineProperty({__proto__:null,v1,v3:v3$1,v4,v5:v5$1,NIL:nil,version:version$3,validate:validate$1,stringify,parse:parse$1},Symbol.toStringTag,{value:"Module"})),require$$1$2=getAugmentedNamespace(esmBrowser);class EnhancedMap$1 extends Map{computeIfAbsent(s,d){if(this.has(s))return this.get(s);const c=d(s);return this.set(s,c),c}computeIfPresent(s,d){const c=this.get(s);if(c===void 0)return;const m=d(s,c);return m!==void 0?this.set(s,m):this.delete(s),m}compute(s,d){const c=this.get(s),m=d(s,c);return m?this.set(s,m):this.delete(s),m}}var InternalLogLevel$1;(function(a){a[a.Trace=0]="Trace",a[a.Debug=1]="Debug",a[a.Info=2]="Info",a[a.Warn=3]="Warn",a[a.Error=4]="Error"})(InternalLogLevel$1||(InternalLogLevel$1={}));function getInternalLogger$1(a){return provider$1.getLogger(a)}const INTERNAL_LOGGING_SETTINGS$1={setInternalLogLevel:a=>provider$1.changeLogLevel(a),setOutput:a=>provider$1.changeOutput(a),reset:()=>provider$1.reset()};class InternalLoggerImpl$1{constructor(s,d,c){this._name=s,this._level=d,this._fnOutput=c}trace(s){this.log(InternalLogLevel$1.Trace,s)}debug(s){this.log(InternalLogLevel$1.Debug,s)}error(s,d){this.log(InternalLogLevel$1.Error,s,d)}info(s){this.log(InternalLogLevel$1.Info,s)}warn(s,d){this.log(InternalLogLevel$1.Warn,s,d)}setLevel(s){this._level=s}setOutput(s){this._fnOutput=s}log(s,d,c){this._level>s||this._fnOutput(`${InternalLogLevel$1[this._level].toString()} <INTERNAL LOGGER> ${this._name} ${d()}${c?`
`+c.stack:""}`)}}class InternalProviderImpl$1{constructor(){this._loggers=new EnhancedMap$1,this._logLevel=InternalLogLevel$1.Error,this._fnOutput=InternalProviderImpl$1.logConsole}getLogger(s){return this._loggers.computeIfAbsent(s,d=>new InternalLoggerImpl$1(d,this._logLevel,this._fnOutput))}changeLogLevel(s){this._logLevel=s,this._loggers.forEach(d=>d.setLevel(s))}changeOutput(s){this._fnOutput=s,this._loggers.forEach(d=>d.setOutput(this._fnOutput))}reset(){this.changeLogLevel(InternalLogLevel$1.Error),this._fnOutput=InternalProviderImpl$1.logConsole,this._loggers.forEach(s=>s.setOutput(this._fnOutput))}static logConsole(s){console&&console.log&&console.log(s)}}const provider$1=new InternalProviderImpl$1;var InternalLogger$1=Object.freeze({__proto__:null,get InternalLogLevel(){return InternalLogLevel$1},getInternalLogger:getInternalLogger$1,INTERNAL_LOGGING_SETTINGS:INTERNAL_LOGGING_SETTINGS$1}),LogLevel$1;(function(a){a[a.Trace=0]="Trace",a[a.Debug=1]="Debug",a[a.Info=2]="Info",a[a.Warn=3]="Warn",a[a.Error=4]="Error",a[a.Fatal=5]="Fatal"})(LogLevel$1||(LogLevel$1={}));(function(a){function s(d){switch(d.toLowerCase()){case"trace":return a.Trace;case"debug":return a.Debug;case"info":return a.Info;case"warn":return a.Warn;case"error":return a.Error;case"fatal":return a.Fatal;default:return}}a.toLogLevel=s})(LogLevel$1||(LogLevel$1={}));class CoreLoggerImpl$1{constructor(s){this._runtime=s}get id(){return this._runtime.id}get logLevel(){return this._runtime.level}get runtimeSettings(){return Object.assign({},this._runtime)}set runtimeSettings(s){this._runtime=s}trace(s,...d){this.logMessage(LogLevel$1.Trace,s,d)}debug(s,...d){this.logMessage(LogLevel$1.Debug,s,d)}info(s,...d){this.logMessage(LogLevel$1.Info,s,d)}warn(s,...d){this.logMessage(LogLevel$1.Warn,s,d)}error(s,...d){this.logMessage(LogLevel$1.Error,s,d)}fatal(s,...d){this.logMessage(LogLevel$1.Fatal,s,d)}logMessage(s,d,c){if(this._runtime.level>s)return;const m=Date.now(),g=typeof d=="string"?d:d(),b=CoreLoggerImpl$1.getErrorAndArgs(c);switch(this._runtime.channel.type){case"RawLogChannel":this._runtime.channel.write({message:g,exception:b.error,args:b.args,timeInMillis:m,level:s,logNames:this._runtime.name},this._runtime.argumentFormatter);return;case"LogChannel":this._runtime.channel.write(this.createLogMessage(g,s,b,m));break}}formatArgValue(s){try{return this._runtime.argumentFormatter(s)}catch{return`>>ARG CONVERT FAILED: '${s!==void 0?s.toString():"undefined"}'<<`}}createLogMessage(s,d,c,m){let g;const b=c.error,k=c.args;b&&(g=`${b.name}: ${b.message}`,b.stack&&(g+=`@
${b.stack}`));const et=this._runtime.dateFormatter(m);let nt=LogLevel$1[d].toUpperCase();nt.length<5&&(nt+=" ");const it=typeof this._runtime.name=="string"?this._runtime.name:this._runtime.name.join(", "),ct=typeof k!="undefined"&&k.length>0?" ["+k.map(ut=>this.formatArgValue(ut)).join(", ")+"]":"";return{message:et+" "+nt+" ["+it+"] "+s+ct,error:g}}static getErrorAndArgs(s){if(s.length===0)return{};let d,c;const m=s[0];if(m instanceof Error)return d=m,c=s.length>1?s.slice(1):void 0,{error:d,args:c};if(typeof m=="function"){const g=m();return g instanceof Error?(d=g,c=s.length>1?s.slice(1):void 0,{error:d,args:c}):s.length===1?Array.isArray(g)?{args:g.length>0?g:void 0}:{args:g}:Array.isArray(g)?{args:[...g,...s.slice(1)]}:{args:[g,...s.slice(1)]}}return{args:s}}}function padStart$1(a,s,d=" "){return padInternal$1(a,s,"start",d)}function padEnd$1(a,s,d=" "){return padInternal$1(a,s,"end",d)}function maxLengthStringValueInArray$1(a){return a.map(s=>s.length).reduce((s,d)=>d>s?d:s,0)}function padInternal$1(a,s,d,c=" "){if(s<=a.length)return a;if(c.length>1)throw new Error(`Fill char must be one char exactly, it is: ${c.length}`);const m=s-a.length;let g="";for(let b=0;b<m;b++)g+=c;return d==="start"?g+a:a+g}function formatArgument$1(a){return a===void 0?"undefined":JSON.stringify(a)}function formatDate$1(a){const s=new Date(a),d=s.getFullYear(),c=padStart$1((s.getMonth()+1).toString(),2,"0"),m=padStart$1(s.getDate().toString(),2,"0"),g=padStart$1(s.getHours().toString(),2,"0"),b=padStart$1(s.getMinutes().toString(),2,"0"),k=padStart$1(s.getSeconds().toString(),2,"0"),et=padStart$1(s.getMilliseconds().toString(),2,"0");return`${d}-${c}-${m} ${g}:${b}:${k},${et}`}class ConsoleLogChannel$1{constructor(){this.type="LogChannel"}write(s){console&&console.log&&console.log(s.message+(s.error?`
${s.error}`:""))}}var DefaultChannels$1;(function(a){function s(){return new ConsoleLogChannel$1}a.createConsoleChannel=s})(DefaultChannels$1||(DefaultChannels$1={}));class LogProviderImpl$1{constructor(s,d){this._log=getInternalLogger$1("core.impl.LogProviderImpl"),this._name=s,this._settings=d,this._loggers=new EnhancedMap$1,this._idToKeyMap=new EnhancedMap$1,this._globalRuntimeSettings={level:d.level,channel:d.channel},this._nextLoggerId=1,this._log.trace(()=>`Created LogProviderImpl with settings: ${JSON.stringify(this._settings)}`)}get runtimeSettings(){return Object.assign(Object.assign({},this._settings),{level:this._globalRuntimeSettings.level,channel:this._globalRuntimeSettings.channel})}getLogger(s){return this.getOrCreateLogger(s)}updateLoggerRuntime(s,d){this._log.debug(()=>`Updating logger ${s.id} runtime settings using: '${JSON.stringify(d)}'`);const c=this._idToKeyMap.get(s.id);return c===void 0?(this._log.warn(()=>`Cannot update logger with id: ${s.id}, it was not found.`),!1):(this._loggers.computeIfPresent(c,(m,g)=>(g.runtimeSettings=LogProviderImpl$1.mergeRuntimeSettingsIntoLogRuntime(g.runtimeSettings,d),g)),!0)}updateRuntimeSettings(s){this._log.debug(()=>`Updating global runtime settings and updating existing loggers runtime settings using: '${JSON.stringify(s)}'`),this._globalRuntimeSettings={level:s.level!==void 0?s.level:this._globalRuntimeSettings.level,channel:s.channel!==void 0?s.channel:this._globalRuntimeSettings.channel},this._loggers.forEach(d=>d.runtimeSettings=LogProviderImpl$1.mergeRuntimeSettingsIntoLogRuntime(d.runtimeSettings,s))}clear(){this._loggers.clear(),this._idToKeyMap.clear(),this._globalRuntimeSettings=Object.assign({},this._settings),this._nextLoggerId=1}getOrCreateLogger(s){const d=LogProviderImpl$1.createKey(s),c=this._loggers.computeIfAbsent(d,()=>{const m={level:this._globalRuntimeSettings.level,channel:this._globalRuntimeSettings.channel,id:this.nextLoggerId(),name:s,argumentFormatter:this._settings.argumentFormatter,dateFormatter:this._settings.dateFormatter};return new CoreLoggerImpl$1(m)});return this._idToKeyMap.computeIfAbsent(c.id,()=>d),c}nextLoggerId(){const s=this._name+"_"+this._nextLoggerId;return this._nextLoggerId++,s}static mergeRuntimeSettingsIntoLogRuntime(s,d){return Object.assign(Object.assign({},s),{level:d.level!==void 0?d.level:s.level,channel:d.channel!==void 0?d.channel:s.channel})}static createKey(s){return typeof s=="string"?s:s.join(",")}}function createLogProvider$1(a,s){return new LogProviderImpl$1(a,s)}var index$1=Object.freeze({__proto__:null,EnhancedMap:EnhancedMap$1,padStart:padStart$1,padEnd:padEnd$1,maxLengthStringValueInArray:maxLengthStringValueInArray$1});class ArrayLogChannel{constructor(){this._buffer=[],this.type="LogChannel"}write(s){this._buffer.push(s)}get logMessages(){return this._buffer}get messages(){return this._buffer.map(s=>s.message)}}class ArrayRawLogChannel{constructor(){this._buffer=[],this.type="RawLogChannel"}write(s,d){this._buffer.push(s)}get messages(){return this._buffer.map(s=>s.message)}get errors(){return this._buffer.map(s=>s.exception)}get size(){return this._buffer.length}get rawMessages(){return this._buffer}clear(){this._buffer=[]}}class TestControlMessage{constructor(){this._messages=[],this.write=this.write.bind(this)}get messages(){return this._messages}write(s){this._messages.push(s)}clear(){this._messages=[]}}var TestClasses=Object.freeze({__proto__:null,ArrayLogChannel,ArrayRawLogChannel,TestControlMessage}),typescriptLogging_esm=Object.freeze(Object.defineProperty({__proto__:null,$internal:InternalLogger$1,$test:TestClasses,get DefaultChannels(){return DefaultChannels$1},get LogLevel(){return LogLevel$1},createLogProvider:createLogProvider$1,formatArgument:formatArgument$1,formatDate:formatDate$1,util:index$1},Symbol.toStringTag,{value:"Module"})),require$$2$2=getAugmentedNamespace(typescriptLogging_esm),layoutapi={},lib$1={},lib={},Metadata={};Object.defineProperty(Metadata,"__esModule",{value:!0});Metadata.Metadata=void 0;Metadata.Metadata=function(s){const d=new Map,c={set(m,g){if(m=normalizeKey(m),Array.isArray(g))if(g.length===0)d.delete(m);else{for(const b of g)validate(m,b);d.set(m,m.endsWith("-bin")?g:[g.join(", ")])}else validate(m,g),d.set(m,[g]);return c},append(m,g){m=normalizeKey(m),validate(m,g);let b=d.get(m);return b==null&&(b=[],d.set(m,b)),b.push(g),m.endsWith("-bin")||d.set(m,[b.join(", ")]),c},delete(m){m=normalizeKey(m),d.delete(m)},get(m){var g;return m=normalizeKey(m),(g=d.get(m))===null||g===void 0?void 0:g[0]},getAll(m){var g;return m=normalizeKey(m),(g=d.get(m))!==null&&g!==void 0?g:[]},has(m){return m=normalizeKey(m),d.has(m)},[Symbol.iterator](){return d[Symbol.iterator]()}};if(s!=null){const m=isIterable$2(s)?s:Object.entries(s);for(const[g,b]of m)c.set(g,b)}return c};function normalizeKey(a){return a.toLowerCase()}function validate(a,s){if(!/^[0-9a-z_.-]+$/.test(a))throw new Error(`Metadata key '${a}' contains illegal characters`);if(a.endsWith("-bin")){if(!(s instanceof Uint8Array))throw new Error(`Metadata key '${a}' ends with '-bin', thus it must have binary value`)}else{if(typeof s!="string")throw new Error(`Metadata key '${a}' doesn't end with '-bin', thus it must have string value`);if(!/^[ -~]*$/.test(s))throw new Error(`Metadata value '${s}' of key '${a}' contains illegal characters`)}}function isIterable$2(a){return Symbol.iterator in a}var Status={};(function(a){Object.defineProperty(a,"__esModule",{value:!0}),a.Status=void 0,function(s){s[s.OK=0]="OK",s[s.CANCELLED=1]="CANCELLED",s[s.UNKNOWN=2]="UNKNOWN",s[s.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",s[s.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",s[s.NOT_FOUND=5]="NOT_FOUND",s[s.ALREADY_EXISTS=6]="ALREADY_EXISTS",s[s.PERMISSION_DENIED=7]="PERMISSION_DENIED",s[s.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",s[s.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",s[s.ABORTED=10]="ABORTED",s[s.OUT_OF_RANGE=11]="OUT_OF_RANGE",s[s.UNIMPLEMENTED=12]="UNIMPLEMENTED",s[s.INTERNAL=13]="INTERNAL",s[s.UNAVAILABLE=14]="UNAVAILABLE",s[s.DATA_LOSS=15]="DATA_LOSS",s[s.UNAUTHENTICATED=16]="UNAUTHENTICATED"}(a.Status||(a.Status={}))})(Status);var MethodDescriptor={};Object.defineProperty(MethodDescriptor,"__esModule",{value:!0});var CallOptions={};Object.defineProperty(CallOptions,"__esModule",{value:!0});var ClientMiddleware={};Object.defineProperty(ClientMiddleware,"__esModule",{value:!0});var composeClientMiddleware$1={};Object.defineProperty(composeClientMiddleware$1,"__esModule",{value:!0});composeClientMiddleware$1.composeClientMiddleware=void 0;function composeClientMiddleware(a,s){return(d,c)=>s(vn(jt({},d),{next:(m,g)=>a(vn(jt({},d),{request:m}),g)}),c)}composeClientMiddleware$1.composeClientMiddleware=composeClientMiddleware;var ClientError$1={},cjs={},helpers={};helpers.__esModule=void 0;helpers.__esModule=!0;var objectSetPrototypeOfIsDefined=typeof Object.setPrototypeOf=="function",objectGetPrototypeOfIsDefined=typeof Object.getPrototypeOf=="function",objectDefinePropertyIsDefined=typeof Object.defineProperty=="function",objectCreateIsDefined=typeof Object.create=="function",objectHasOwnPropertyIsDefined=typeof Object.prototype.hasOwnProperty=="function",setPrototypeOf=function(s,d){objectSetPrototypeOfIsDefined?Object.setPrototypeOf(s,d):s.__proto__=d};helpers.setPrototypeOf=setPrototypeOf;var getPrototypeOf$1=function(s){return objectGetPrototypeOfIsDefined?Object.getPrototypeOf(s):s.__proto__||s.prototype};helpers.getPrototypeOf=getPrototypeOf$1;var ie8ObjectDefinePropertyBug=!1,defineProperty=function a(s,d,c){if(objectDefinePropertyIsDefined&&!ie8ObjectDefinePropertyBug)try{Object.defineProperty(s,d,c)}catch{ie8ObjectDefinePropertyBug=!0,a(s,d,c)}else s[d]=c.value};helpers.defineProperty=defineProperty;var hasOwnProperty=function(s,d){return objectHasOwnPropertyIsDefined?s.hasOwnProperty(s,d):s[d]===void 0};helpers.hasOwnProperty=hasOwnProperty;var objectCreate=function(s,d){if(objectCreateIsDefined)return Object.create(s,d);var c=function(){};c.prototype=s;var m=new c;if(typeof d=="undefined")return m;if(typeof d=="null")throw new Error("PropertyDescriptors must not be null.");if(typeof d=="object")for(var g in d)hasOwnProperty(d,g)&&(m[g]=d[g].value);return m};helpers.objectCreate=objectCreate;(function(a){a.__esModule=void 0,a.__esModule=!0;var s=helpers,d=s.setPrototypeOf,c=s.getPrototypeOf,m=s.defineProperty,g=s.objectCreate,b=new Error().toString()==="[object Error]",k="";function et(nt){var it=this.constructor,ct=it.name||function(){var _t=it.toString().match(/^function\s*([^\s(]+)/);return _t===null?k||"Error":_t[1]}(),st=ct==="Error",ut=st?k:ct,pt=Error.apply(this,arguments);if(d(pt,c(this)),!(pt instanceof it)||!(pt instanceof et)){var pt=this;Error.apply(this,arguments),m(pt,"message",{configurable:!0,enumerable:!1,value:nt,writable:!0})}if(m(pt,"name",{configurable:!0,enumerable:!1,value:ut,writable:!0}),Error.captureStackTrace&&Error.captureStackTrace(pt,st?et:it),pt.stack===void 0){var St=new Error(nt);St.name=pt.name,pt.stack=St.stack}return b&&m(pt,"toString",{configurable:!0,enumerable:!1,value:function(){return(this.name||"Error")+(typeof this.message=="undefined"?"":": "+this.message)},writable:!0}),pt}k=et.name||"ExtendableError",et.prototype=g(Error.prototype,{constructor:{value:Error,enumerable:!1,writable:!0,configurable:!0}}),a.ExtendableError=et,a.default=a.ExtendableError})(cjs);Object.defineProperty(ClientError$1,"__esModule",{value:!0});ClientError$1.ClientError=void 0;const ts_error_1$1=cjs,Status_1$1=Status;class ClientError extends ts_error_1$1.ExtendableError{constructor(s,d,c){super(`${s} ${Status_1$1.Status[d]}: ${c}`),this.path=s,this.code=d,this.details=c,this.name="ClientError",Object.defineProperty(this,"@@nice-grpc",{value:!0})}static[Symbol.hasInstance](s){return typeof s=="object"&&s!==null&&(s.constructor===ClientError||s.name==="ClientError"&&s["@@nice-grpc"]===!0)}}ClientError$1.ClientError=ClientError;var CallContext={};Object.defineProperty(CallContext,"__esModule",{value:!0});var ServerMiddleware={};Object.defineProperty(ServerMiddleware,"__esModule",{value:!0});var composeServerMiddleware$1={};Object.defineProperty(composeServerMiddleware$1,"__esModule",{value:!0});composeServerMiddleware$1.composeServerMiddleware=void 0;function composeServerMiddleware(a,s){return(d,c)=>a(vn(jt({},d),{next:(m,g)=>s(vn(jt({},d),{request:m}),g)}),c)}composeServerMiddleware$1.composeServerMiddleware=composeServerMiddleware;var ServerError$1={};Object.defineProperty(ServerError$1,"__esModule",{value:!0});ServerError$1.ServerError=void 0;const ts_error_1=cjs,Status_1=Status;class ServerError extends ts_error_1.ExtendableError{constructor(s,d){super(`${Status_1.Status[s]}: ${d}`),this.code=s,this.details=d,this.name="ServerError",Object.defineProperty(this,"@@nice-grpc",{value:!0})}static[Symbol.hasInstance](s){return typeof s=="object"&&s!==null&&(s.constructor===ServerError||s.name==="ServerError"&&s["@@nice-grpc"]===!0)}}ServerError$1.ServerError=ServerError;(function(a){var s=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(c,m,g,b){b===void 0&&(b=g),Object.defineProperty(c,b,{enumerable:!0,get:function(){return m[g]}})}:function(c,m,g,b){b===void 0&&(b=g),c[b]=m[g]}),d=commonjsGlobal&&commonjsGlobal.__exportStar||function(c,m){for(var g in c)g!=="default"&&!Object.prototype.hasOwnProperty.call(m,g)&&s(m,c,g)};Object.defineProperty(a,"__esModule",{value:!0}),d(Metadata,a),d(Status,a),d(MethodDescriptor,a),d(CallOptions,a),d(ClientMiddleware,a),d(composeClientMiddleware$1,a),d(ClientError$1,a),d(CallContext,a),d(ServerMiddleware,a),d(composeServerMiddleware$1,a),d(ServerError$1,a)})(lib);var serviceDefinitions={},grpcWeb={};Object.defineProperty(grpcWeb,"__esModule",{value:!0});grpcWeb.isGrpcWebServiceDefinition=grpcWeb.fromGrpcWebServiceDefinition=void 0;function fromGrpcWebServiceDefinition(a){const s={};for(const[d,c]of Object.entries(a)){if(d==="serviceName")continue;const m=c;s[uncapitalize(d)]={path:`/${a.serviceName}/${d}`,requestStream:m.requestStream,responseStream:m.responseStream,requestDeserialize:m.requestType.deserializeBinary,requestSerialize:g=>g.serializeBinary(),responseDeserialize:m.responseType.deserializeBinary,responseSerialize:g=>g.serializeBinary(),options:{}}}return s}grpcWeb.fromGrpcWebServiceDefinition=fromGrpcWebServiceDefinition;function isGrpcWebServiceDefinition(a){return"prototype"in a}grpcWeb.isGrpcWebServiceDefinition=isGrpcWebServiceDefinition;function uncapitalize(a){return a.length===0?a:a[0].toLowerCase()+a.slice(1)}var tsProto={};Object.defineProperty(tsProto,"__esModule",{value:!0});tsProto.isTsProtoServiceDefinition=tsProto.fromTsProtoServiceDefinition=void 0;function fromTsProtoServiceDefinition(a){const s={};for(const[d,c]of Object.entries(a.methods)){const m=c.requestType.encode,g=c.requestType.fromPartial,b=c.responseType.encode,k=c.responseType.fromPartial;s[d]={path:`/${a.fullName}/${c.name}`,requestStream:c.requestStream,responseStream:c.responseStream,requestDeserialize:c.requestType.decode,requestSerialize:g!=null?et=>m(g(et)).finish():et=>m(et).finish(),responseDeserialize:c.responseType.decode,responseSerialize:k!=null?et=>b(k(et)).finish():et=>b(et).finish(),options:c.options}}return s}tsProto.fromTsProtoServiceDefinition=fromTsProtoServiceDefinition;function isTsProtoServiceDefinition(a){return"name"in a&&"fullName"in a&&"methods"in a}tsProto.isTsProtoServiceDefinition=isTsProtoServiceDefinition;Object.defineProperty(serviceDefinitions,"__esModule",{value:!0});serviceDefinitions.toGrpcWebMethodDefinition=serviceDefinitions.normalizeServiceDefinition=void 0;const grpc_web_1$5=grpcWeb,ts_proto_1=tsProto;function normalizeServiceDefinition(a){return(0,grpc_web_1$5.isGrpcWebServiceDefinition)(a)?(0,grpc_web_1$5.fromGrpcWebServiceDefinition)(a):(0,ts_proto_1.isTsProtoServiceDefinition)(a)?(0,ts_proto_1.fromTsProtoServiceDefinition)(a):a}serviceDefinitions.normalizeServiceDefinition=normalizeServiceDefinition;function toGrpcWebMethodDefinition(a){const[,s,d]=a.path.split("/");return{service:{serviceName:s},methodName:d,requestStream:a.requestStream,responseStream:a.responseStream,requestType:class{constructor(){throw new Error("Unexpected instantiation")}static deserializeBinary(c){return a.requestDeserialize(c)}},responseType:class{constructor(){throw new Error("Unexpected instantiation")}static deserializeBinary(c){return a.responseDeserialize(c)}}}}serviceDefinitions.toGrpcWebMethodDefinition=toGrpcWebMethodDefinition;var channel={};Object.defineProperty(channel,"__esModule",{value:!0});channel.createChannel=void 0;function createChannel(a,s){return{address:a,transport:s}}channel.createChannel=createChannel;var ClientFactory={},createBidiStreamingMethod$1={},grpcWebClient_umd={exports:{}};(function(a,s){(function(d,c){a.exports=c()})(commonjsGlobal,function(){return d={418:function(m,g){(function(b,k){for(var et in k)b[et]=k[et]})(g,function(b){var k={};function et(nt){if(k[nt])return k[nt].exports;var it=k[nt]={i:nt,l:!1,exports:{}};return b[nt].call(it.exports,it,it.exports,et),it.l=!0,it.exports}return et.m=b,et.c=k,et.i=function(nt){return nt},et.d=function(nt,it,ct){et.o(nt,it)||Object.defineProperty(nt,it,{configurable:!1,enumerable:!0,get:ct})},et.n=function(nt){var it=nt&&nt.__esModule?function(){return nt.default}:function(){return nt};return et.d(it,"a",it),it},et.o=function(nt,it){return Object.prototype.hasOwnProperty.call(nt,it)},et.p="",et(et.s=1)}([function(b,k,et){Object.defineProperty(k,"__esModule",{value:!0});var nt=et(3),it=function(){function ct(st,ut){st===void 0&&(st={}),ut===void 0&&(ut={splitValues:!1});var pt,St=this;this.headersMap={},st&&(typeof Headers!="undefined"&&st instanceof Headers?nt.getHeaderKeys(st).forEach(function(_t){nt.getHeaderValues(st,_t).forEach(function(ht){ut.splitValues?St.append(_t,nt.splitHeaderValue(ht)):St.append(_t,ht)})}):typeof(pt=st)=="object"&&typeof pt.headersMap=="object"&&typeof pt.forEach=="function"?st.forEach(function(_t,ht){St.append(_t,ht)}):typeof Map!="undefined"&&st instanceof Map?st.forEach(function(_t,ht){St.append(ht,_t)}):typeof st=="string"?this.appendFromString(st):typeof st=="object"&&Object.getOwnPropertyNames(st).forEach(function(_t){var ht=st[_t];Array.isArray(ht)?ht.forEach(function(_e){St.append(_t,_e)}):St.append(_t,ht)}))}return ct.prototype.appendFromString=function(st){for(var ut=st.split(`\r
`),pt=0;pt<ut.length;pt++){var St=ut[pt],_t=St.indexOf(":");if(_t>0){var ht=St.substring(0,_t).trim(),_e=St.substring(_t+1).trim();this.append(ht,_e)}}},ct.prototype.delete=function(st,ut){var pt=nt.normalizeName(st);if(ut===void 0)delete this.headersMap[pt];else{var St=this.headersMap[pt];if(St){var _t=St.indexOf(ut);_t>=0&&St.splice(_t,1),St.length===0&&delete this.headersMap[pt]}}},ct.prototype.append=function(st,ut){var pt=this,St=nt.normalizeName(st);Array.isArray(this.headersMap[St])||(this.headersMap[St]=[]),Array.isArray(ut)?ut.forEach(function(_t){pt.headersMap[St].push(nt.normalizeValue(_t))}):this.headersMap[St].push(nt.normalizeValue(ut))},ct.prototype.set=function(st,ut){var pt=nt.normalizeName(st);if(Array.isArray(ut)){var St=[];ut.forEach(function(_t){St.push(nt.normalizeValue(_t))}),this.headersMap[pt]=St}else this.headersMap[pt]=[nt.normalizeValue(ut)]},ct.prototype.has=function(st,ut){var pt=this.headersMap[nt.normalizeName(st)];if(!Array.isArray(pt))return!1;if(ut!==void 0){var St=nt.normalizeValue(ut);return pt.indexOf(St)>=0}return!0},ct.prototype.get=function(st){var ut=this.headersMap[nt.normalizeName(st)];return ut!==void 0?ut.concat():[]},ct.prototype.forEach=function(st){var ut=this;Object.getOwnPropertyNames(this.headersMap).forEach(function(pt){st(pt,ut.headersMap[pt])},this)},ct.prototype.toHeaders=function(){if(typeof Headers!="undefined"){var st=new Headers;return this.forEach(function(ut,pt){pt.forEach(function(St){st.append(ut,St)})}),st}throw new Error("Headers class is not defined")},ct}();k.BrowserHeaders=it},function(b,k,et){Object.defineProperty(k,"__esModule",{value:!0});var nt=et(0);k.BrowserHeaders=nt.BrowserHeaders},function(b,k,et){Object.defineProperty(k,"__esModule",{value:!0}),k.iterateHeaders=function(nt,it){for(var ct=nt[Symbol.iterator](),st=ct.next();!st.done;)it(st.value[0]),st=ct.next()},k.iterateHeadersKeys=function(nt,it){for(var ct=nt.keys(),st=ct.next();!st.done;)it(st.value),st=ct.next()}},function(b,k,et){Object.defineProperty(k,"__esModule",{value:!0});var nt=et(2);k.normalizeName=function(it){if(typeof it!="string"&&(it=String(it)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(it))throw new TypeError("Invalid character in header field name");return it.toLowerCase()},k.normalizeValue=function(it){return typeof it!="string"&&(it=String(it)),it},k.getHeaderValues=function(it,ct){var st=it;if(st instanceof Headers&&st.getAll)return st.getAll(ct);var ut=st.get(ct);return ut&&typeof ut=="string"?[ut]:ut},k.getHeaderKeys=function(it){var ct=it,st={},ut=[];return ct.keys?nt.iterateHeadersKeys(ct,function(pt){st[pt]||(st[pt]=!0,ut.push(pt))}):ct.forEach?ct.forEach(function(pt,St){st[St]||(st[St]=!0,ut.push(St))}):nt.iterateHeaders(ct,function(pt){var St=pt[0];st[St]||(st[St]=!0,ut.push(St))}),ut},k.splitHeaderValue=function(it){var ct=[];return it.split(", ").forEach(function(st){st.split(",").forEach(function(ut){ct.push(ut)})}),ct}}]))},617:function(m,g,b){Object.defineProperty(g,"__esModule",{value:!0}),g.ChunkParser=g.ChunkType=g.encodeASCII=g.decodeASCII=void 0;var k,et=b(65);function nt(_t){return(ht=_t)===9||ht===10||ht===13||_t>=32&&_t<=126;var ht}function it(_t){for(var ht=0;ht!==_t.length;++ht)if(!nt(_t[ht]))throw new Error("Metadata is not valid (printable) ASCII");return String.fromCharCode.apply(String,Array.prototype.slice.call(_t))}function ct(_t){return(128&_t.getUint8(0))==128}function st(_t){return _t.getUint32(1,!1)}function ut(_t,ht,_e){return _t.byteLength-ht>=_e}function pt(_t,ht,_e){if(_t.slice)return _t.slice(ht,_e);var ot=_t.length;_e!==void 0&&(ot=_e);for(var lt=new Uint8Array(ot-ht),Ot=0,It=ht;It<ot;It++)lt[Ot++]=_t[It];return lt}g.decodeASCII=it,g.encodeASCII=function(_t){for(var ht=new Uint8Array(_t.length),_e=0;_e!==_t.length;++_e){var ot=_t.charCodeAt(_e);if(!nt(ot))throw new Error("Metadata contains invalid ASCII");ht[_e]=ot}return ht},function(_t){_t[_t.MESSAGE=1]="MESSAGE",_t[_t.TRAILERS=2]="TRAILERS"}(k=g.ChunkType||(g.ChunkType={}));var St=function(){function _t(){this.buffer=null,this.position=0}return _t.prototype.parse=function(ht,_e){if(ht.length===0&&_e)return[];var ot,lt=[];if(this.buffer==null)this.buffer=ht,this.position=0;else if(this.position===this.buffer.byteLength)this.buffer=ht,this.position=0;else{var Ot=this.buffer.byteLength-this.position,It=new Uint8Array(Ot+ht.byteLength),Pt=pt(this.buffer,this.position);It.set(Pt,0);var $t=new Uint8Array(ht);It.set($t,Ot),this.buffer=It,this.position=0}for(;;){if(!ut(this.buffer,this.position,5))return lt;var bt=pt(this.buffer,this.position,this.position+5),Rt=new DataView(bt.buffer,bt.byteOffset,bt.byteLength),Ct=st(Rt);if(!ut(this.buffer,this.position,5+Ct))return lt;var vt=pt(this.buffer,this.position+5,this.position+5+Ct);if(this.position+=5+Ct,ct(Rt))return lt.push({chunkType:k.TRAILERS,trailers:(ot=vt,new et.Metadata(it(ot)))}),lt;lt.push({chunkType:k.MESSAGE,data:vt})}},_t}();g.ChunkParser=St},8:function(m,g){var b;Object.defineProperty(g,"__esModule",{value:!0}),g.httpStatusToCode=g.Code=void 0,function(k){k[k.OK=0]="OK",k[k.Canceled=1]="Canceled",k[k.Unknown=2]="Unknown",k[k.InvalidArgument=3]="InvalidArgument",k[k.DeadlineExceeded=4]="DeadlineExceeded",k[k.NotFound=5]="NotFound",k[k.AlreadyExists=6]="AlreadyExists",k[k.PermissionDenied=7]="PermissionDenied",k[k.ResourceExhausted=8]="ResourceExhausted",k[k.FailedPrecondition=9]="FailedPrecondition",k[k.Aborted=10]="Aborted",k[k.OutOfRange=11]="OutOfRange",k[k.Unimplemented=12]="Unimplemented",k[k.Internal=13]="Internal",k[k.Unavailable=14]="Unavailable",k[k.DataLoss=15]="DataLoss",k[k.Unauthenticated=16]="Unauthenticated"}(b=g.Code||(g.Code={})),g.httpStatusToCode=function(k){switch(k){case 0:return b.Internal;case 200:return b.OK;case 400:return b.InvalidArgument;case 401:return b.Unauthenticated;case 403:return b.PermissionDenied;case 404:return b.NotFound;case 409:return b.Aborted;case 412:return b.FailedPrecondition;case 429:return b.ResourceExhausted;case 499:return b.Canceled;case 500:return b.Unknown;case 501:return b.Unimplemented;case 503:return b.Unavailable;case 504:return b.DeadlineExceeded;default:return b.Unknown}}},934:function(m,g,b){Object.defineProperty(g,"__esModule",{value:!0}),g.client=void 0;var k=b(65),et=b(617),nt=b(8),it=b(346),ct=b(57),st=b(882);g.client=function(St,_t){return new ut(St,_t)};var ut=function(){function St(_t,ht){this.started=!1,this.sentFirstMessage=!1,this.completed=!1,this.closed=!1,this.finishedSending=!1,this.onHeadersCallbacks=[],this.onMessageCallbacks=[],this.onEndCallbacks=[],this.parser=new et.ChunkParser,this.methodDefinition=_t,this.props=ht,this.createTransport()}return St.prototype.createTransport=function(){var _t=this.props.host+"/"+this.methodDefinition.service.serviceName+"/"+this.methodDefinition.methodName,ht={methodDefinition:this.methodDefinition,debug:this.props.debug||!1,url:_t,onHeaders:this.onTransportHeaders.bind(this),onChunk:this.onTransportChunk.bind(this),onEnd:this.onTransportEnd.bind(this)};this.props.transport?this.transport=this.props.transport(ht):this.transport=ct.makeDefaultTransport(ht)},St.prototype.onTransportHeaders=function(_t,ht){if(this.props.debug&&it.debug("onHeaders",_t,ht),this.closed)this.props.debug&&it.debug("grpc.onHeaders received after request was closed - ignoring");else if(ht!==0){this.responseHeaders=_t,this.props.debug&&it.debug("onHeaders.responseHeaders",JSON.stringify(this.responseHeaders,null,2));var _e=pt(_t);this.props.debug&&it.debug("onHeaders.gRPCStatus",_e);var ot=_e&&_e>=0?_e:nt.httpStatusToCode(ht);this.props.debug&&it.debug("onHeaders.code",ot);var lt=_t.get("grpc-message")||[];if(this.props.debug&&it.debug("onHeaders.gRPCMessage",lt),this.rawOnHeaders(_t),ot!==nt.Code.OK){var Ot=this.decodeGRPCStatus(lt[0]);this.rawOnError(ot,Ot,_t)}}},St.prototype.onTransportChunk=function(_t){var ht=this;if(this.closed)this.props.debug&&it.debug("grpc.onChunk received after request was closed - ignoring");else{var _e=[];try{_e=this.parser.parse(_t)}catch(ot){return this.props.debug&&it.debug("onChunk.parsing error",ot,ot.message),void this.rawOnError(nt.Code.Internal,"parsing error: "+ot.message)}_e.forEach(function(ot){if(ot.chunkType===et.ChunkType.MESSAGE){var lt=ht.methodDefinition.responseType.deserializeBinary(ot.data);ht.rawOnMessage(lt)}else ot.chunkType===et.ChunkType.TRAILERS&&(ht.responseHeaders?(ht.responseTrailers=new k.Metadata(ot.trailers),ht.props.debug&&it.debug("onChunk.trailers",ht.responseTrailers)):(ht.responseHeaders=new k.Metadata(ot.trailers),ht.rawOnHeaders(ht.responseHeaders)))})}},St.prototype.onTransportEnd=function(){if(this.props.debug&&it.debug("grpc.onEnd"),this.closed)this.props.debug&&it.debug("grpc.onEnd received after request was closed - ignoring");else if(this.responseTrailers!==void 0){var _t=pt(this.responseTrailers);if(_t!==null){var ht=this.responseTrailers.get("grpc-message"),_e=this.decodeGRPCStatus(ht[0]);this.rawOnEnd(_t,_e,this.responseTrailers)}else this.rawOnError(nt.Code.Internal,"Response closed without grpc-status (Trailers provided)")}else{if(this.responseHeaders===void 0)return void this.rawOnError(nt.Code.Unknown,"Response closed without headers");var ot=pt(this.responseHeaders),lt=this.responseHeaders.get("grpc-message");if(this.props.debug&&it.debug("grpc.headers only response ",ot,lt),ot===null)return void this.rawOnEnd(nt.Code.Unknown,"Response closed without grpc-status (Headers only)",this.responseHeaders);var Ot=this.decodeGRPCStatus(lt[0]);this.rawOnEnd(ot,Ot,this.responseHeaders)}},St.prototype.decodeGRPCStatus=function(_t){if(!_t)return"";try{return decodeURIComponent(_t)}catch{return _t}},St.prototype.rawOnEnd=function(_t,ht,_e){var ot=this;this.props.debug&&it.debug("rawOnEnd",_t,ht,_e),this.completed||(this.completed=!0,this.onEndCallbacks.forEach(function(lt){if(!ot.closed)try{lt(_t,ht,_e)}catch(Ot){setTimeout(function(){throw Ot},0)}}))},St.prototype.rawOnHeaders=function(_t){this.props.debug&&it.debug("rawOnHeaders",_t),this.completed||this.onHeadersCallbacks.forEach(function(ht){try{ht(_t)}catch(_e){setTimeout(function(){throw _e},0)}})},St.prototype.rawOnError=function(_t,ht,_e){var ot=this;_e===void 0&&(_e=new k.Metadata),this.props.debug&&it.debug("rawOnError",_t,ht),this.completed||(this.completed=!0,this.onEndCallbacks.forEach(function(lt){if(!ot.closed)try{lt(_t,ht,_e)}catch(Ot){setTimeout(function(){throw Ot},0)}}))},St.prototype.rawOnMessage=function(_t){var ht=this;this.props.debug&&it.debug("rawOnMessage",_t.toObject()),this.completed||this.closed||this.onMessageCallbacks.forEach(function(_e){if(!ht.closed)try{_e(_t)}catch(ot){setTimeout(function(){throw ot},0)}})},St.prototype.onHeaders=function(_t){this.onHeadersCallbacks.push(_t)},St.prototype.onMessage=function(_t){this.onMessageCallbacks.push(_t)},St.prototype.onEnd=function(_t){this.onEndCallbacks.push(_t)},St.prototype.start=function(_t){if(this.started)throw new Error("Client already started - cannot .start()");this.started=!0;var ht=new k.Metadata(_t||{});ht.set("content-type","application/grpc-web+proto"),ht.set("x-grpc-web","1"),this.transport.start(ht)},St.prototype.send=function(_t){if(!this.started)throw new Error("Client not started - .start() must be called before .send()");if(this.closed)throw new Error("Client already closed - cannot .send()");if(this.finishedSending)throw new Error("Client already finished sending - cannot .send()");if(!this.methodDefinition.requestStream&&this.sentFirstMessage)throw new Error("Message already sent for non-client-streaming method - cannot .send()");this.sentFirstMessage=!0;var ht=st.frameRequest(_t);this.transport.sendMessage(ht)},St.prototype.finishSend=function(){if(!this.started)throw new Error("Client not started - .finishSend() must be called before .close()");if(this.closed)throw new Error("Client already closed - cannot .send()");if(this.finishedSending)throw new Error("Client already finished sending - cannot .finishSend()");this.finishedSending=!0,this.transport.finishSend()},St.prototype.close=function(){if(!this.started)throw new Error("Client not started - .start() must be called before .close()");if(this.closed)throw new Error("Client already closed - cannot .close()");this.closed=!0,this.props.debug&&it.debug("request.abort aborting request"),this.transport.cancel()},St}();function pt(St){var _t=St.get("grpc-status")||[];if(_t.length>0)try{var ht=_t[0];return parseInt(ht,10)}catch{return null}return null}},346:function(m,g){Object.defineProperty(g,"__esModule",{value:!0}),g.debug=void 0,g.debug=function(){for(var b=[],k=0;k<arguments.length;k++)b[k]=arguments[k];console.debug?console.debug.apply(null,b):console.log.apply(null,b)}},607:function(m,g,b){Object.defineProperty(g,"__esModule",{value:!0}),g.grpc=void 0;var k,et=b(418),nt=b(57),it=b(229),ct=b(540),st=b(210),ut=b(859),pt=b(8),St=b(938),_t=b(35),ht=b(934);(k=g.grpc||(g.grpc={})).setDefaultTransport=nt.setDefaultTransportFactory,k.CrossBrowserHttpTransport=ut.CrossBrowserHttpTransport,k.FetchReadableStreamTransport=it.FetchReadableStreamTransport,k.XhrTransport=st.XhrTransport,k.WebsocketTransport=ct.WebsocketTransport,k.Code=pt.Code,k.Metadata=et.BrowserHeaders,k.client=function(_e,ot){return ht.client(_e,ot)},k.invoke=St.invoke,k.unary=_t.unary},938:function(m,g,b){Object.defineProperty(g,"__esModule",{value:!0}),g.invoke=void 0;var k=b(934);g.invoke=function(et,nt){if(et.requestStream)throw new Error(".invoke cannot be used with client-streaming methods. Use .client instead.");var it=k.client(et,{host:nt.host,transport:nt.transport,debug:nt.debug});return nt.onHeaders&&it.onHeaders(nt.onHeaders),nt.onMessage&&it.onMessage(nt.onMessage),nt.onEnd&&it.onEnd(nt.onEnd),it.start(nt.metadata),it.send(nt.request),it.finishSend(),{close:function(){it.close()}}}},65:function(m,g,b){Object.defineProperty(g,"__esModule",{value:!0}),g.Metadata=void 0;var k=b(418);Object.defineProperty(g,"Metadata",{enumerable:!0,get:function(){return k.BrowserHeaders}})},57:function(m,g,b){Object.defineProperty(g,"__esModule",{value:!0}),g.makeDefaultTransport=g.setDefaultTransportFactory=void 0;var k=b(859),et=function(nt){return k.CrossBrowserHttpTransport({withCredentials:!1})(nt)};g.setDefaultTransportFactory=function(nt){et=nt},g.makeDefaultTransport=function(nt){return et(nt)}},229:function(m,g,b){var k=this&&this.__assign||function(){return(k=Object.assign||function(ct){for(var st,ut=1,pt=arguments.length;ut<pt;ut++)for(var St in st=arguments[ut])Object.prototype.hasOwnProperty.call(st,St)&&(ct[St]=st[St]);return ct}).apply(this,arguments)};Object.defineProperty(g,"__esModule",{value:!0}),g.detectFetchSupport=g.FetchReadableStreamTransport=void 0;var et=b(65),nt=b(346);g.FetchReadableStreamTransport=function(ct){return function(st){return function(ut,pt){return ut.debug&&nt.debug("fetchRequest",ut),new it(ut,pt)}(st,ct)}};var it=function(){function ct(st,ut){this.cancelled=!1,this.controller=self.AbortController&&new AbortController,this.options=st,this.init=ut}return ct.prototype.pump=function(st,ut){var pt=this;if(this.reader=st,this.cancelled)return this.options.debug&&nt.debug("Fetch.pump.cancel at first pump"),void this.reader.cancel().catch(function(St){pt.options.debug&&nt.debug("Fetch.pump.reader.cancel exception",St)});this.reader.read().then(function(St){if(St.done)return pt.options.onEnd(),ut;pt.options.onChunk(St.value),pt.pump(pt.reader,ut)}).catch(function(St){pt.cancelled?pt.options.debug&&nt.debug("Fetch.catch - request cancelled"):(pt.cancelled=!0,pt.options.debug&&nt.debug("Fetch.catch",St.message),pt.options.onEnd(St))})},ct.prototype.send=function(st){var ut=this;fetch(this.options.url,k(k({},this.init),{headers:this.metadata.toHeaders(),method:"POST",body:st,signal:this.controller&&this.controller.signal})).then(function(pt){if(ut.options.debug&&nt.debug("Fetch.response",pt),ut.options.onHeaders(new et.Metadata(pt.headers),pt.status),!pt.body)return pt;ut.pump(pt.body.getReader(),pt)}).catch(function(pt){ut.cancelled?ut.options.debug&&nt.debug("Fetch.catch - request cancelled"):(ut.cancelled=!0,ut.options.debug&&nt.debug("Fetch.catch",pt.message),ut.options.onEnd(pt))})},ct.prototype.sendMessage=function(st){this.send(st)},ct.prototype.finishSend=function(){},ct.prototype.start=function(st){this.metadata=st},ct.prototype.cancel=function(){var st=this;this.cancelled?this.options.debug&&nt.debug("Fetch.cancel already cancelled"):(this.cancelled=!0,this.controller?(this.options.debug&&nt.debug("Fetch.cancel.controller.abort"),this.controller.abort()):this.options.debug&&nt.debug("Fetch.cancel.missing abort controller"),this.reader?(this.options.debug&&nt.debug("Fetch.cancel.reader.cancel"),this.reader.cancel().catch(function(ut){st.options.debug&&nt.debug("Fetch.cancel.reader.cancel exception",ut)})):this.options.debug&&nt.debug("Fetch.cancel before reader"))},ct}();g.detectFetchSupport=function(){return typeof Response!="undefined"&&Response.prototype.hasOwnProperty("body")&&typeof Headers=="function"}},859:function(m,g,b){Object.defineProperty(g,"__esModule",{value:!0}),g.CrossBrowserHttpTransport=void 0;var k=b(229),et=b(210);g.CrossBrowserHttpTransport=function(nt){if(k.detectFetchSupport()){var it={credentials:nt.withCredentials?"include":"same-origin"};return k.FetchReadableStreamTransport(it)}return et.XhrTransport({withCredentials:nt.withCredentials})}},210:function(m,g,b){var k,et=this&&this.__extends||(k=function(_t,ht){return(k=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_e,ot){_e.__proto__=ot}||function(_e,ot){for(var lt in ot)Object.prototype.hasOwnProperty.call(ot,lt)&&(_e[lt]=ot[lt])})(_t,ht)},function(_t,ht){function _e(){this.constructor=_t}k(_t,ht),_t.prototype=ht===null?Object.create(ht):(_e.prototype=ht.prototype,new _e)});Object.defineProperty(g,"__esModule",{value:!0}),g.stringToArrayBuffer=g.MozChunkedArrayBufferXHR=g.XHR=g.XhrTransport=void 0;var nt=b(65),it=b(346),ct=b(849);g.XhrTransport=function(_t){return function(ht){if(ct.detectMozXHRSupport())return new ut(ht,_t);if(ct.detectXHROverrideMimeTypeSupport())return new st(ht,_t);throw new Error("This environment's XHR implementation cannot support binary transfer.")}};var st=function(){function _t(ht,_e){this.options=ht,this.init=_e}return _t.prototype.onProgressEvent=function(){this.options.debug&&it.debug("XHR.onProgressEvent.length: ",this.xhr.response.length);var ht=this.xhr.response.substr(this.index);this.index=this.xhr.response.length;var _e=St(ht);this.options.onChunk(_e)},_t.prototype.onLoadEvent=function(){this.options.debug&&it.debug("XHR.onLoadEvent"),this.options.onEnd()},_t.prototype.onStateChange=function(){this.options.debug&&it.debug("XHR.onStateChange",this.xhr.readyState),this.xhr.readyState===XMLHttpRequest.HEADERS_RECEIVED&&this.options.onHeaders(new nt.Metadata(this.xhr.getAllResponseHeaders()),this.xhr.status)},_t.prototype.sendMessage=function(ht){this.xhr.send(ht)},_t.prototype.finishSend=function(){},_t.prototype.start=function(ht){var _e=this;this.metadata=ht;var ot=new XMLHttpRequest;this.xhr=ot,ot.open("POST",this.options.url),this.configureXhr(),this.metadata.forEach(function(lt,Ot){ot.setRequestHeader(lt,Ot.join(", "))}),ot.withCredentials=Boolean(this.init.withCredentials),ot.addEventListener("readystatechange",this.onStateChange.bind(this)),ot.addEventListener("progress",this.onProgressEvent.bind(this)),ot.addEventListener("loadend",this.onLoadEvent.bind(this)),ot.addEventListener("error",function(lt){_e.options.debug&&it.debug("XHR.error",lt),_e.options.onEnd(lt.error)})},_t.prototype.configureXhr=function(){this.xhr.responseType="text",this.xhr.overrideMimeType("text/plain; charset=x-user-defined")},_t.prototype.cancel=function(){this.options.debug&&it.debug("XHR.abort"),this.xhr.abort()},_t}();g.XHR=st;var ut=function(_t){function ht(){return _t!==null&&_t.apply(this,arguments)||this}return et(ht,_t),ht.prototype.configureXhr=function(){this.options.debug&&it.debug("MozXHR.configureXhr: setting responseType to 'moz-chunked-arraybuffer'"),this.xhr.responseType="moz-chunked-arraybuffer"},ht.prototype.onProgressEvent=function(){var _e=this.xhr.response;this.options.debug&&it.debug("MozXHR.onProgressEvent: ",new Uint8Array(_e)),this.options.onChunk(new Uint8Array(_e))},ht}(st);function pt(_t,ht){var _e=_t.charCodeAt(ht);if(_e>=55296&&_e<=56319){var ot=_t.charCodeAt(ht+1);ot>=56320&&ot<=57343&&(_e=65536+(_e-55296<<10)+(ot-56320))}return _e}function St(_t){for(var ht=new Uint8Array(_t.length),_e=0,ot=0;ot<_t.length;ot++){var lt=String.prototype.codePointAt?_t.codePointAt(ot):pt(_t,ot);ht[_e++]=255&lt}return ht}g.MozChunkedArrayBufferXHR=ut,g.stringToArrayBuffer=St},849:function(m,g){var b;function k(){if(b!==void 0)return b;if(XMLHttpRequest){b=new XMLHttpRequest;try{b.open("GET","https://localhost")}catch{}}return b}function et(nt){var it=k();if(!it)return!1;try{return it.responseType=nt,it.responseType===nt}catch{}return!1}Object.defineProperty(g,"__esModule",{value:!0}),g.detectXHROverrideMimeTypeSupport=g.detectMozXHRSupport=g.xhrSupportsResponseType=void 0,g.xhrSupportsResponseType=et,g.detectMozXHRSupport=function(){return typeof XMLHttpRequest!="undefined"&&et("moz-chunked-arraybuffer")},g.detectXHROverrideMimeTypeSupport=function(){return typeof XMLHttpRequest!="undefined"&&XMLHttpRequest.prototype.hasOwnProperty("overrideMimeType")}},540:function(m,g,b){Object.defineProperty(g,"__esModule",{value:!0}),g.WebsocketTransport=void 0;var k,et=b(346),nt=b(617);(function(ct){ct[ct.FINISH_SEND=1]="FINISH_SEND"})(k||(k={}));var it=new Uint8Array([1]);g.WebsocketTransport=function(){return function(ct){return function(st){st.debug&&et.debug("websocketRequest",st);var ut,pt=function(ht){if(ht.substr(0,8)==="https://")return"wss://"+ht.substr(8);if(ht.substr(0,7)==="http://")return"ws://"+ht.substr(7);throw new Error("Websocket transport constructed with non-https:// or http:// host.")}(st.url),St=[];function _t(ht){if(ht===k.FINISH_SEND)ut.send(it);else{var _e=ht,ot=new Int8Array(_e.byteLength+1);ot.set(new Uint8Array([0])),ot.set(_e,1),ut.send(ot)}}return{sendMessage:function(ht){ut&&ut.readyState!==ut.CONNECTING?_t(ht):St.push(ht)},finishSend:function(){ut&&ut.readyState!==ut.CONNECTING?_t(k.FINISH_SEND):St.push(k.FINISH_SEND)},start:function(ht){(ut=new WebSocket(pt,["grpc-websockets"])).binaryType="arraybuffer",ut.onopen=function(){var _e;st.debug&&et.debug("websocketRequest.onopen"),ut.send((_e="",ht.forEach(function(ot,lt){_e+=ot+": "+lt.join(", ")+`\r
`}),nt.encodeASCII(_e))),St.forEach(function(ot){_t(ot)})},ut.onclose=function(_e){st.debug&&et.debug("websocketRequest.onclose",_e),st.onEnd()},ut.onerror=function(_e){st.debug&&et.debug("websocketRequest.onerror",_e)},ut.onmessage=function(_e){st.onChunk(new Uint8Array(_e.data))}},cancel:function(){st.debug&&et.debug("websocket.abort"),ut.close()}}}(ct)}}},35:function(m,g,b){Object.defineProperty(g,"__esModule",{value:!0}),g.unary=void 0;var k=b(65),et=b(934);g.unary=function(nt,it){if(nt.responseStream)throw new Error(".unary cannot be used with server-streaming methods. Use .invoke or .client instead.");if(nt.requestStream)throw new Error(".unary cannot be used with client-streaming methods. Use .client instead.");var ct=null,st=null,ut=et.client(nt,{host:it.host,transport:it.transport,debug:it.debug});return ut.onHeaders(function(pt){ct=pt}),ut.onMessage(function(pt){st=pt}),ut.onEnd(function(pt,St,_t){it.onEnd({status:pt,statusMessage:St,headers:ct||new k.Metadata,message:st,trailers:_t})}),ut.start(it.metadata),ut.send(it.request),ut.finishSend(),{close:function(){ut.close()}}}},882:function(m,g){Object.defineProperty(g,"__esModule",{value:!0}),g.frameRequest=void 0,g.frameRequest=function(b){var k=b.serializeBinary(),et=new ArrayBuffer(k.byteLength+5);return new DataView(et,1,4).setUint32(0,k.length,!1),new Uint8Array(et,5).set(k),new Uint8Array(et)}}},c={},function m(g){if(c[g])return c[g].exports;var b=c[g]={exports:{}};return d[g].call(b.exports,b,b.exports,m),b.exports}(607);var d,c})})(grpcWebClient_umd);class AbortError extends Error{constructor(){super("The operation has been aborted"),this.message="The operation has been aborted",this.name="AbortError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,this.constructor)}}function isAbortError(a){return typeof a=="object"&&a!==null&&a.name==="AbortError"}function throwIfAborted(a){if(a.aborted)throw new AbortError}function rethrowAbortError(a){if(isAbortError(a))throw a}function catchAbortError(a){if(!isAbortError(a))throw a}function execute(a,s){return new Promise((d,c)=>{if(a.aborted){c(new AbortError);return}let m,g=!1;function b(){g||(g=!0,m!=null&&m())}const k=s(et=>{d(et),b()},et=>{c(et),b()});if(!g){const et=()=>{const nt=k();nt==null?c(new AbortError):nt.then(()=>{c(new AbortError)},it=>{c(it)}),b()};a.addEventListener("abort",et),m=()=>{a.removeEventListener("abort",et)}}})}function abortable(a,s){if(a.aborted){const d=()=>{};s.then(d,d)}return execute(a,(d,c)=>(s.then(d,c),()=>{}))}function delay$2(a,s){return execute(a,d=>{const c=typeof s=="number"?s:s.getTime()-Date.now(),m=setTimeout(d,c);return()=>{clearTimeout(m)}})}function forever(a){return execute(a,()=>()=>{})}function waitForEvent(a,s,d,c){return execute(a,m=>{let g,b=!1;return g=listen(s,d,(...et)=>{m(et.length>1?et:et[0]),b=!0,g!=null&&g()},c),b&&g(),()=>{b=!0,g!=null&&g()}})}function listen(a,s,d,c){if(isEventTarget(a))return a.addEventListener(s,d,c),()=>a.removeEventListener(s,d,c);if(isJQueryStyleEventEmitter(a))return a.on(s,d),()=>a.off(s,d);if(isNodeStyleEventEmitter(a))return a.addListener(s,d),()=>a.removeListener(s,d);throw new Error("Invalid event target")}function isNodeStyleEventEmitter(a){return isFunction$3(a.addListener)&&isFunction$3(a.removeListener)}function isJQueryStyleEventEmitter(a){return isFunction$3(a.on)&&isFunction$3(a.off)}function isEventTarget(a){return isFunction$3(a.addEventListener)&&isFunction$3(a.removeEventListener)}const isFunction$3=a=>typeof a=="function";var browser$3={exports:{}};const _global=typeof self!="undefined"?self:typeof window!="undefined"?window:void 0;if(!_global)throw new Error("Unable to find global scope. Are you sure this is running in the browser?");if(!_global.AbortController)throw new Error('Could not find "AbortController" in the global scope. You need to polyfill it first');browser$3.exports=_global.AbortController;browser$3.exports.default=_global.AbortController;var AbortController$1=browser$3.exports;function all(a,s){return new Promise((d,c)=>{if(a.aborted){c(new AbortError);return}const m=new AbortController$1,g=s(m.signal);if(g.length===0){d([]);return}const b=()=>{m.abort()};a.addEventListener("abort",b);let k;const et=new Array(g.length);let nt=0;function it(){nt+=1,nt===g.length&&(a.removeEventListener("abort",b),k!=null?c(k.reason):d(et))}for(const[ct,st]of g.entries())st.then(ut=>{et[ct]=ut,it()},ut=>{m.abort(),(k==null||!isAbortError(ut)&&isAbortError(k.reason))&&(k={reason:ut}),it()})})}function race$3(a,s){return new Promise((d,c)=>{if(a.aborted){c(new AbortError);return}const m=new AbortController$1,g=s(m.signal),b=()=>{m.abort()};a.addEventListener("abort",b);let k=0;function et(it){m.abort(),k+=1,k===g.length&&(a.removeEventListener("abort",b),it.status==="fulfilled"?d(it.value):c(it.reason))}let nt;for(const it of g)it.then(ct=>{nt==null&&(nt={status:"fulfilled",value:ct}),et(nt)},ct=>{(nt==null||!isAbortError(ct)&&(nt.status==="fulfilled"||isAbortError(nt.reason)))&&(nt={status:"rejected",reason:ct}),et(nt)})})}async function retry$2(a,s,d={}){const{baseMs:c=1e3,maxDelayMs:m=15e3,onError:g,maxAttempts:b=1/0}=d;for(let k=0;;k++)try{return await s(a,k)}catch(et){if(rethrowAbortError(et),k>=b)throw et;const nt=Math.min(m,Math.pow(2,k)*c),it=Math.round(nt*(1+Math.random())/2);g&&g(et,k,it),await delay$2(a,it)}}function spawn(a,s){if(a.aborted)return Promise.reject(new AbortError);const d=[],c=new AbortController$1,m=c.signal,g=()=>{c.abort()};a.addEventListener("abort",g);const b=()=>{a.removeEventListener("abort",g)},k=new Set,et=()=>{for(const ct of k)ct.abort()};m.addEventListener("abort",et);const nt=()=>{m.removeEventListener("abort",et)};let it=new Promise((ct,st)=>{let ut,pt;St(_t=>s(_t,{defer(ht){d.push(ht)},fork:St})).join().then(_t=>{c.abort(),ut={value:_t}},_t=>{c.abort(),(!isAbortError(_t)||pt==null)&&(pt={error:_t})});function St(_t){if(m.aborted)return{abort(){},async join(){throw new AbortError}};const ht=new AbortController$1,_e=ht.signal,ot=_t(_e),lt={abort(){ht.abort()},join:()=>ot};return k.add(lt),ot.catch(catchAbortError).catch(Ot=>{pt={error:Ot},c.abort()}).finally(()=>{k.delete(lt),k.size===0&&(pt!=null?st(pt.error):ct(ut.value))}),lt}});return it=it.finally(()=>{b(),nt();let ct=Promise.resolve();for(let st=d.length-1;st>=0;st--)ct=ct.finally(d[st]);return ct}),it}function run$1(a){const s=new AbortController$1,d=a(s.signal).catch(catchAbortError);return()=>(s.abort(),d)}var es=Object.freeze(Object.defineProperty({__proto__:null,abortable,AbortError,isAbortError,throwIfAborted,rethrowAbortError,catchAbortError,delay:delay$2,execute,forever,waitForEvent,all,race:race$3,retry:retry$2,spawn,run:run$1},Symbol.toStringTag,{value:"Module"})),require$$1$1=getAugmentedNamespace(es),AsyncSink$1={};Object.defineProperty(AsyncSink$1,"__esModule",{value:!0});AsyncSink$1.AsyncSink=void 0;const ARRAY_VALUE="value",ARRAY_ERROR="error";class AsyncSink{constructor(){this._ended=!1,this._values=[],this._resolvers=[]}[Symbol.asyncIterator](){return this}write(s){this._push({type:ARRAY_VALUE,value:s})}error(s){this._push({type:ARRAY_ERROR,error:s})}_push(s){if(this._ended)throw new Error("AsyncSink already ended");if(this._resolvers.length>0){const{resolve:d,reject:c}=this._resolvers.shift();s.type===ARRAY_ERROR?c(s.error):d({done:!1,value:s.value})}else this._values.push(s)}next(){if(this._values.length>0){const{type:s,value:d,error:c}=this._values.shift();return s===ARRAY_ERROR?Promise.reject(c):Promise.resolve({done:!1,value:d})}return this._ended?Promise.resolve({done:!0}):new Promise((s,d)=>{this._resolvers.push({resolve:s,reject:d})})}end(){for(;this._resolvers.length>0;)this._resolvers.shift().resolve({done:!0});this._ended=!0}}AsyncSink$1.AsyncSink=AsyncSink;var isAsyncIterable$2={};Object.defineProperty(isAsyncIterable$2,"__esModule",{value:!0});isAsyncIterable$2.isAsyncIterable=void 0;function isAsyncIterable$1(a){return a!=null&&Symbol.asyncIterator in a}isAsyncIterable$2.isAsyncIterable=isAsyncIterable$1;var convertMetadata={},base64$4={exports:{}};(function(a,s){(function(d,c){a.exports=c()})(typeof self!="undefined"?self:typeof window!="undefined"?window:commonjsGlobal,function(){var d="3.7.2",c=d,m=typeof atob=="function",g=typeof btoa=="function",b=typeof Buffer=="function",k=typeof TextDecoder=="function"?new TextDecoder:void 0,et=typeof TextEncoder=="function"?new TextEncoder:void 0,nt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",it=Array.prototype.slice.call(nt),ct=function(yt){var Dt={};return yt.forEach(function(Gt,Bt){return Dt[Gt]=Bt}),Dt}(it),st=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,ut=String.fromCharCode.bind(String),pt=typeof Uint8Array.from=="function"?Uint8Array.from.bind(Uint8Array):function(yt,Dt){return Dt===void 0&&(Dt=function(Gt){return Gt}),new Uint8Array(Array.prototype.slice.call(yt,0).map(Dt))},St=function(yt){return yt.replace(/=/g,"").replace(/[+\/]/g,function(Dt){return Dt=="+"?"-":"_"})},_t=function(yt){return yt.replace(/[^A-Za-z0-9\+\/]/g,"")},ht=function(yt){for(var Dt,Gt,Bt,xt,tn="",dn=yt.length%3,Qt=0;Qt<yt.length;){if((Gt=yt.charCodeAt(Qt++))>255||(Bt=yt.charCodeAt(Qt++))>255||(xt=yt.charCodeAt(Qt++))>255)throw new TypeError("invalid character found");Dt=Gt<<16|Bt<<8|xt,tn+=it[Dt>>18&63]+it[Dt>>12&63]+it[Dt>>6&63]+it[Dt&63]}return dn?tn.slice(0,dn-3)+"===".substring(dn):tn},_e=g?function(yt){return btoa(yt)}:b?function(yt){return Buffer.from(yt,"binary").toString("base64")}:ht,ot=b?function(yt){return Buffer.from(yt).toString("base64")}:function(yt){for(var Dt=4096,Gt=[],Bt=0,xt=yt.length;Bt<xt;Bt+=Dt)Gt.push(ut.apply(null,yt.subarray(Bt,Bt+Dt)));return _e(Gt.join(""))},lt=function(yt,Dt){return Dt===void 0&&(Dt=!1),Dt?St(ot(yt)):ot(yt)},Ot=function(yt){if(yt.length<2){var Dt=yt.charCodeAt(0);return Dt<128?yt:Dt<2048?ut(192|Dt>>>6)+ut(128|Dt&63):ut(224|Dt>>>12&15)+ut(128|Dt>>>6&63)+ut(128|Dt&63)}else{var Dt=65536+(yt.charCodeAt(0)-55296)*1024+(yt.charCodeAt(1)-56320);return ut(240|Dt>>>18&7)+ut(128|Dt>>>12&63)+ut(128|Dt>>>6&63)+ut(128|Dt&63)}},It=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,Pt=function(yt){return yt.replace(It,Ot)},$t=b?function(yt){return Buffer.from(yt,"utf8").toString("base64")}:et?function(yt){return ot(et.encode(yt))}:function(yt){return _e(Pt(yt))},bt=function(yt,Dt){return Dt===void 0&&(Dt=!1),Dt?St($t(yt)):$t(yt)},Rt=function(yt){return bt(yt,!0)},Ct=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,vt=function(yt){switch(yt.length){case 4:var Dt=(7&yt.charCodeAt(0))<<18|(63&yt.charCodeAt(1))<<12|(63&yt.charCodeAt(2))<<6|63&yt.charCodeAt(3),Gt=Dt-65536;return ut((Gt>>>10)+55296)+ut((Gt&1023)+56320);case 3:return ut((15&yt.charCodeAt(0))<<12|(63&yt.charCodeAt(1))<<6|63&yt.charCodeAt(2));default:return ut((31&yt.charCodeAt(0))<<6|63&yt.charCodeAt(1))}},Tt=function(yt){return yt.replace(Ct,vt)},wt=function(yt){if(yt=yt.replace(/\s+/g,""),!st.test(yt))throw new TypeError("malformed base64.");yt+="==".slice(2-(yt.length&3));for(var Dt,Gt="",Bt,xt,tn=0;tn<yt.length;)Dt=ct[yt.charAt(tn++)]<<18|ct[yt.charAt(tn++)]<<12|(Bt=ct[yt.charAt(tn++)])<<6|(xt=ct[yt.charAt(tn++)]),Gt+=Bt===64?ut(Dt>>16&255):xt===64?ut(Dt>>16&255,Dt>>8&255):ut(Dt>>16&255,Dt>>8&255,Dt&255);return Gt},zt=m?function(yt){return atob(_t(yt))}:b?function(yt){return Buffer.from(yt,"base64").toString("binary")}:wt,Mt=b?function(yt){return pt(Buffer.from(yt,"base64"))}:function(yt){return pt(zt(yt),function(Dt){return Dt.charCodeAt(0)})},Nt=function(yt){return Mt(Wt(yt))},Ft=b?function(yt){return Buffer.from(yt,"base64").toString("utf8")}:k?function(yt){return k.decode(Mt(yt))}:function(yt){return Tt(zt(yt))},Wt=function(yt){return _t(yt.replace(/[-_]/g,function(Dt){return Dt=="-"?"+":"/"}))},Ht=function(yt){return Ft(Wt(yt))},Yt=function(yt){if(typeof yt!="string")return!1;var Dt=yt.replace(/\s+/g,"").replace(/={0,2}$/,"");return!/[^\s0-9a-zA-Z\+/]/.test(Dt)||!/[^\s0-9a-zA-Z\-_]/.test(Dt)},$=function(yt){return{value:yt,enumerable:!1,writable:!0,configurable:!0}},rt=function(){var yt=function(Dt,Gt){return Object.defineProperty(String.prototype,Dt,$(Gt))};yt("fromBase64",function(){return Ht(this)}),yt("toBase64",function(Dt){return bt(this,Dt)}),yt("toBase64URI",function(){return bt(this,!0)}),yt("toBase64URL",function(){return bt(this,!0)}),yt("toUint8Array",function(){return Nt(this)})},mt=function(){var yt=function(Dt,Gt){return Object.defineProperty(Uint8Array.prototype,Dt,$(Gt))};yt("toBase64",function(Dt){return lt(this,Dt)}),yt("toBase64URI",function(){return lt(this,!0)}),yt("toBase64URL",function(){return lt(this,!0)})},Vt=function(){rt(),mt()},at={version:d,VERSION:c,atob:zt,atobPolyfill:wt,btoa:_e,btoaPolyfill:ht,fromBase64:Ht,toBase64:bt,encode:bt,encodeURI:Rt,encodeURL:Rt,utob:Pt,btou:Tt,decode:Ht,isValid:Yt,fromUint8Array:lt,toUint8Array:Nt,extendString:rt,extendUint8Array:mt,extendBuiltins:Vt};return at.Base64={},Object.keys(at).forEach(function(yt){return at.Base64[yt]=at[yt]}),at})})(base64$4);Object.defineProperty(convertMetadata,"__esModule",{value:!0});convertMetadata.convertMetadataFromGrpcWeb=convertMetadata.convertMetadataToGrpcWeb=void 0;const grpc_web_1$4=grpcWebClient_umd.exports,nice_grpc_common_1$5=lib,js_base64_1=base64$4.exports;function convertMetadataToGrpcWeb(a){const s=new grpc_web_1$4.grpc.Metadata;for(const[d,c]of a)for(const m of c)s.append(d,typeof m=="string"?m:js_base64_1.Base64.fromUint8Array(m));return s}convertMetadata.convertMetadataToGrpcWeb=convertMetadataToGrpcWeb;function convertMetadataFromGrpcWeb(a){const s=(0,nice_grpc_common_1$5.Metadata)();for(const[d,c]of Object.entries(a.headersMap))s.set(d,d.endsWith("-bin")?c.map(m=>js_base64_1.Base64.toUint8Array(m)):c);return s}convertMetadata.convertMetadataFromGrpcWeb=convertMetadataFromGrpcWeb;var __importDefault$l=commonjsGlobal&&commonjsGlobal.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(createBidiStreamingMethod$1,"__esModule",{value:!0});createBidiStreamingMethod$1.createBidiStreamingMethod=void 0;const nice_grpc_common_1$4=lib,grpc_web_1$3=grpcWebClient_umd.exports,abort_controller_x_1$4=require$$1$1,node_abort_controller_1$3=__importDefault$l(browser$3.exports),AsyncSink_1$1=AsyncSink$1,service_definitions_1$4=serviceDefinitions,isAsyncIterable_1$3=isAsyncIterable$2,convertMetadata_1$3=convertMetadata;function createBidiStreamingMethod(a,s,d,c){const m=(0,service_definitions_1$4.toGrpcWebMethodDefinition)(a),g={path:a.path,requestStream:a.requestStream,responseStream:a.responseStream,options:a.options};async function*b(et,nt){if(!(0,isAsyncIterable_1$3.isAsyncIterable)(et))throw new Error("A middleware passed invalid request to next(): expected a single message for bidirectional streaming method");const{metadata:it=(0,nice_grpc_common_1$4.Metadata)(),signal:ct=new node_abort_controller_1$3.default().signal,onHeader:st,onTrailer:ut}=nt,pt=new node_abort_controller_1$3.default,St=new AsyncSink_1$1.AsyncSink,_t=grpc_web_1$3.grpc.client(m,{host:s.address,transport:s.transport});_t.onHeaders(ot=>{st==null||st((0,convertMetadata_1$3.convertMetadataFromGrpcWeb)(ot))}),_t.onMessage(ot=>{St.write(ot)}),_t.onEnd((ot,lt,Ot)=>{ut==null||ut((0,convertMetadata_1$3.convertMetadataFromGrpcWeb)(Ot)),ot===grpc_web_1$3.grpc.Code.OK?St.end():St.error(new nice_grpc_common_1$4.ClientError(a.path,+ot,lt))}),_t.start((0,convertMetadata_1$3.convertMetadataToGrpcWeb)(it));let ht;pipeRequest$1(pt.signal,et,_t,a).then(()=>{_t.finishSend()},ot=>{(0,abort_controller_x_1$4.isAbortError)(ot)||(ht=ot,_t.close(),St.end())});const _e=()=>{St.error(new abort_controller_x_1$4.AbortError),pt.abort(),_t.close()};ct.addEventListener("abort",_e);try{yield*St}finally{if(pt.abort(),ct.removeEventListener("abort",_e),(0,abort_controller_x_1$4.throwIfAborted)(ct),ht)throw ht}}const k=d==null?b:(et,nt)=>d({method:g,requestStream:!0,request:et,responseStream:!0,next:b},nt);return(et,nt)=>{const ct=k(et,jt(jt({},c),nt))[Symbol.asyncIterator]();return{[Symbol.asyncIterator](){return{async next(){const st=await ct.next();return st.done&&st.value!=null?await ct.throw(new Error("A middleware returned a message, but expected to return void for bidirectional streaming method")):st},return(){return ct.return()},throw(st){return ct.throw(st)}}}}}}createBidiStreamingMethod$1.createBidiStreamingMethod=createBidiStreamingMethod;async function pipeRequest$1(a,s,d,c){for await(const m of s)(0,abort_controller_x_1$4.throwIfAborted)(a),d.send({serializeBinary:()=>c.requestSerialize(m)})}var createClientStreamingMethod$1={},__importDefault$k=commonjsGlobal&&commonjsGlobal.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(createClientStreamingMethod$1,"__esModule",{value:!0});createClientStreamingMethod$1.createClientStreamingMethod=void 0;const nice_grpc_common_1$3=lib,grpc_web_1$2=grpcWebClient_umd.exports,abort_controller_x_1$3=require$$1$1,node_abort_controller_1$2=__importDefault$k(browser$3.exports),service_definitions_1$3=serviceDefinitions,isAsyncIterable_1$2=isAsyncIterable$2,convertMetadata_1$2=convertMetadata;function createClientStreamingMethod(a,s,d,c){const m=(0,service_definitions_1$3.toGrpcWebMethodDefinition)(a),g={path:a.path,requestStream:a.requestStream,responseStream:a.responseStream,options:a.options};async function*b(et,nt){if(!(0,isAsyncIterable_1$2.isAsyncIterable)(et))throw new Error("A middleware passed invalid request to next(): expected a single message for client streaming method");const{metadata:it=(0,nice_grpc_common_1$3.Metadata)(),signal:ct=new node_abort_controller_1$2.default().signal,onHeader:st,onTrailer:ut}=nt;return await(0,abort_controller_x_1$3.execute)(ct,(pt,St)=>{const _t=new node_abort_controller_1$2.default;let ht;const _e=grpc_web_1$2.grpc.client(m,{host:s.address,transport:s.transport});return _e.onHeaders(ot=>{st==null||st((0,convertMetadata_1$2.convertMetadataFromGrpcWeb)(ot))}),_e.onMessage(ot=>{ht=ot}),_e.onEnd((ot,lt,Ot)=>{ut==null||ut((0,convertMetadata_1$2.convertMetadataFromGrpcWeb)(Ot)),_t.abort(),ot===grpc_web_1$2.grpc.Code.OK?pt(ht):St(new nice_grpc_common_1$3.ClientError(a.path,+ot,lt))}),_e.start((0,convertMetadata_1$2.convertMetadataToGrpcWeb)(it)),pipeRequest(_t.signal,et,_e,a).then(()=>{_e.finishSend()},ot=>{(0,abort_controller_x_1$3.isAbortError)(ot)||(St(ot),_e.close())}),()=>{_t.abort(),_e.close()}})}const k=d==null?b:(et,nt)=>d({method:g,requestStream:!0,request:et,responseStream:!1,next:b},nt);return async(et,nt)=>{const ct=k(et,jt(jt({},c),nt))[Symbol.asyncIterator]();let st=await ct.next();for(;;){if(!st.done){st=await ct.throw(new Error("A middleware yielded a message, but expected to only return a message for client streaming method"));continue}if(st.value==null){st=await ct.throw(new Error("A middleware returned void, but expected to return a message for client streaming method"));continue}return st.value}}}createClientStreamingMethod$1.createClientStreamingMethod=createClientStreamingMethod;async function pipeRequest(a,s,d,c){for await(const m of s)(0,abort_controller_x_1$3.throwIfAborted)(a),d.send({serializeBinary:()=>c.requestSerialize(m)})}var createServerStreamingMethod$1={},__importDefault$j=commonjsGlobal&&commonjsGlobal.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(createServerStreamingMethod$1,"__esModule",{value:!0});createServerStreamingMethod$1.createServerStreamingMethod=void 0;const grpc_web_1$1=grpcWebClient_umd.exports,abort_controller_x_1$2=require$$1$1,AsyncSink_1=AsyncSink$1,nice_grpc_common_1$2=lib,node_abort_controller_1$1=__importDefault$j(browser$3.exports),service_definitions_1$2=serviceDefinitions,convertMetadata_1$1=convertMetadata,isAsyncIterable_1$1=isAsyncIterable$2;function createServerStreamingMethod(a,s,d,c){const m=(0,service_definitions_1$2.toGrpcWebMethodDefinition)(a),g={path:a.path,requestStream:a.requestStream,responseStream:a.responseStream,options:a.options};async function*b(et,nt){if((0,isAsyncIterable_1$1.isAsyncIterable)(et))throw new Error("A middleware passed invalid request to next(): expected a single message for server streaming method");const{metadata:it=(0,nice_grpc_common_1$2.Metadata)(),signal:ct=new node_abort_controller_1$1.default().signal,onHeader:st,onTrailer:ut}=nt,pt=new AsyncSink_1.AsyncSink,St=grpc_web_1$1.grpc.client(m,{host:s.address,transport:s.transport});St.onHeaders(ht=>{st==null||st((0,convertMetadata_1$1.convertMetadataFromGrpcWeb)(ht))}),St.onMessage(ht=>{pt.write(ht)}),St.onEnd((ht,_e,ot)=>{ut==null||ut((0,convertMetadata_1$1.convertMetadataFromGrpcWeb)(ot)),ht===grpc_web_1$1.grpc.Code.OK?pt.end():pt.error(new nice_grpc_common_1$2.ClientError(a.path,+ht,_e))}),St.start((0,convertMetadata_1$1.convertMetadataToGrpcWeb)(it)),St.send({serializeBinary:()=>a.requestSerialize(et)}),St.finishSend();const _t=()=>{pt.error(new abort_controller_x_1$2.AbortError),St.close()};ct.addEventListener("abort",_t);try{yield*pt}finally{ct.removeEventListener("abort",_t),(0,abort_controller_x_1$2.throwIfAborted)(ct)}}const k=d==null?b:(et,nt)=>d({method:g,requestStream:!1,request:et,responseStream:!0,next:b},nt);return(et,nt)=>{const ct=k(et,jt(jt({},c),nt))[Symbol.asyncIterator]();return{[Symbol.asyncIterator](){return{async next(){const st=await ct.next();return st.done&&st.value!=null?await ct.throw(new Error("A middleware returned a message, but expected to return void for server streaming method")):st},return(){return ct.return()},throw(st){return ct.throw(st)}}}}}}createServerStreamingMethod$1.createServerStreamingMethod=createServerStreamingMethod;var createUnaryMethod$1={},__importDefault$i=commonjsGlobal&&commonjsGlobal.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(createUnaryMethod$1,"__esModule",{value:!0});createUnaryMethod$1.createUnaryMethod=void 0;const nice_grpc_common_1$1=lib,grpc_web_1=grpcWebClient_umd.exports,abort_controller_x_1$1=require$$1$1,node_abort_controller_1=__importDefault$i(browser$3.exports),service_definitions_1$1=serviceDefinitions,isAsyncIterable_1=isAsyncIterable$2,convertMetadata_1=convertMetadata;function createUnaryMethod(a,s,d,c){const m=(0,service_definitions_1$1.toGrpcWebMethodDefinition)(a),g={path:a.path,requestStream:a.requestStream,responseStream:a.responseStream,options:a.options};async function*b(et,nt){if((0,isAsyncIterable_1.isAsyncIterable)(et))throw new Error("A middleware passed invalid request to next(): expected a single message for unary method");const{metadata:it=(0,nice_grpc_common_1$1.Metadata)(),signal:ct=new node_abort_controller_1.default().signal,onHeader:st,onTrailer:ut}=nt;return await(0,abort_controller_x_1$1.execute)(ct,(pt,St)=>{let _t;const ht=grpc_web_1.grpc.client(m,{host:s.address,transport:s.transport});return ht.onHeaders(_e=>{st==null||st((0,convertMetadata_1.convertMetadataFromGrpcWeb)(_e))}),ht.onMessage(_e=>{_t=_e}),ht.onEnd((_e,ot,lt)=>{ut==null||ut((0,convertMetadata_1.convertMetadataFromGrpcWeb)(lt)),_e===grpc_web_1.grpc.Code.OK?pt(_t):St(new nice_grpc_common_1$1.ClientError(a.path,+_e,ot))}),ht.start((0,convertMetadata_1.convertMetadataToGrpcWeb)(it)),ht.send({serializeBinary:()=>a.requestSerialize(et)}),ht.finishSend(),()=>{ht.close()}})}const k=d==null?b:(et,nt)=>d({method:g,requestStream:!1,request:et,responseStream:!1,next:b},nt);return async(et,nt)=>{const ct=k(et,jt(jt({},c),nt))[Symbol.asyncIterator]();let st=await ct.next();for(;;){if(!st.done){st=await ct.throw(new Error("A middleware yielded a message, but expected to only return a message for unary method"));continue}if(st.value==null){st=await ct.throw(new Error("A middleware returned void, but expected to return a message for unary method"));continue}return st.value}}}createUnaryMethod$1.createUnaryMethod=createUnaryMethod;Object.defineProperty(ClientFactory,"__esModule",{value:!0});ClientFactory.createClient=ClientFactory.createClientFactory=void 0;const nice_grpc_common_1=lib,service_definitions_1=serviceDefinitions,createBidiStreamingMethod_1=createBidiStreamingMethod$1,createClientStreamingMethod_1=createClientStreamingMethod$1,createServerStreamingMethod_1=createServerStreamingMethod$1,createUnaryMethod_1=createUnaryMethod$1;function createClientFactory(){return createClientFactoryWithMiddleware()}ClientFactory.createClientFactory=createClientFactory;function createClient(a,s,d){return createClientFactory().create(a,s,d)}ClientFactory.createClient=createClient;function createClientFactoryWithMiddleware(a){return{use(s){return createClientFactoryWithMiddleware(a==null?s:(0,nice_grpc_common_1.composeClientMiddleware)(a,s))},create(s,d,c={}){const m={},g=Object.entries((0,service_definitions_1.normalizeServiceDefinition)(s));for(const[b,k]of g){const et=jt(jt({},c["*"]),c[b]);k.requestStream?k.responseStream?m[b]=(0,createBidiStreamingMethod_1.createBidiStreamingMethod)(k,d,a,et):m[b]=(0,createClientStreamingMethod_1.createClientStreamingMethod)(k,d,a,et):k.responseStream?m[b]=(0,createServerStreamingMethod_1.createServerStreamingMethod)(k,d,a,et):m[b]=(0,createUnaryMethod_1.createUnaryMethod)(k,d,a,et)}return m}}}var Client={};Object.defineProperty(Client,"__esModule",{value:!0});(function(a){var s=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(m,g,b,k){k===void 0&&(k=b),Object.defineProperty(m,k,{enumerable:!0,get:function(){return g[b]}})}:function(m,g,b,k){k===void 0&&(k=b),m[k]=g[b]}),d=commonjsGlobal&&commonjsGlobal.__exportStar||function(m,g){for(var b in m)b!=="default"&&!Object.prototype.hasOwnProperty.call(g,b)&&s(g,m,b)};Object.defineProperty(a,"__esModule",{value:!0}),a.Status=a.Metadata=a.composeClientMiddleware=a.ClientError=void 0;var c=lib;Object.defineProperty(a,"ClientError",{enumerable:!0,get:function(){return c.ClientError}}),Object.defineProperty(a,"composeClientMiddleware",{enumerable:!0,get:function(){return c.composeClientMiddleware}}),Object.defineProperty(a,"Metadata",{enumerable:!0,get:function(){return c.Metadata}}),Object.defineProperty(a,"Status",{enumerable:!0,get:function(){return c.Status}}),d(serviceDefinitions,a),d(channel,a),d(ClientFactory,a),d(Client,a)})(lib$1);var dist$3={},api$3={},long=Long,wasm=null;try{wasm=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function Long(a,s,d){this.low=a|0,this.high=s|0,this.unsigned=!!d}Long.prototype.__isLong__;Object.defineProperty(Long.prototype,"__isLong__",{value:!0});function isLong(a){return(a&&a.__isLong__)===!0}Long.isLong=isLong;var INT_CACHE={},UINT_CACHE={};function fromInt(a,s){var d,c,m;return s?(a>>>=0,(m=0<=a&&a<256)&&(c=UINT_CACHE[a],c)?c:(d=fromBits(a,(a|0)<0?-1:0,!0),m&&(UINT_CACHE[a]=d),d)):(a|=0,(m=-128<=a&&a<128)&&(c=INT_CACHE[a],c)?c:(d=fromBits(a,a<0?-1:0,!1),m&&(INT_CACHE[a]=d),d))}Long.fromInt=fromInt;function fromNumber(a,s){if(isNaN(a))return s?UZERO:ZERO;if(s){if(a<0)return UZERO;if(a>=TWO_PWR_64_DBL)return MAX_UNSIGNED_VALUE}else{if(a<=-TWO_PWR_63_DBL)return MIN_VALUE;if(a+1>=TWO_PWR_63_DBL)return MAX_VALUE}return a<0?fromNumber(-a,s).neg():fromBits(a%TWO_PWR_32_DBL|0,a/TWO_PWR_32_DBL|0,s)}Long.fromNumber=fromNumber;function fromBits(a,s,d){return new Long(a,s,d)}Long.fromBits=fromBits;var pow_dbl=Math.pow;function fromString(a,s,d){if(a.length===0)throw Error("empty string");if(a==="NaN"||a==="Infinity"||a==="+Infinity"||a==="-Infinity")return ZERO;if(typeof s=="number"?(d=s,s=!1):s=!!s,d=d||10,d<2||36<d)throw RangeError("radix");var c;if((c=a.indexOf("-"))>0)throw Error("interior hyphen");if(c===0)return fromString(a.substring(1),s,d).neg();for(var m=fromNumber(pow_dbl(d,8)),g=ZERO,b=0;b<a.length;b+=8){var k=Math.min(8,a.length-b),et=parseInt(a.substring(b,b+k),d);if(k<8){var nt=fromNumber(pow_dbl(d,k));g=g.mul(nt).add(fromNumber(et))}else g=g.mul(m),g=g.add(fromNumber(et))}return g.unsigned=s,g}Long.fromString=fromString;function fromValue(a,s){return typeof a=="number"?fromNumber(a,s):typeof a=="string"?fromString(a,s):fromBits(a.low,a.high,typeof s=="boolean"?s:a.unsigned)}Long.fromValue=fromValue;var TWO_PWR_16_DBL=1<<16,TWO_PWR_24_DBL=1<<24,TWO_PWR_32_DBL=TWO_PWR_16_DBL*TWO_PWR_16_DBL,TWO_PWR_64_DBL=TWO_PWR_32_DBL*TWO_PWR_32_DBL,TWO_PWR_63_DBL=TWO_PWR_64_DBL/2,TWO_PWR_24=fromInt(TWO_PWR_24_DBL),ZERO=fromInt(0);Long.ZERO=ZERO;var UZERO=fromInt(0,!0);Long.UZERO=UZERO;var ONE=fromInt(1);Long.ONE=ONE;var UONE=fromInt(1,!0);Long.UONE=UONE;var NEG_ONE=fromInt(-1);Long.NEG_ONE=NEG_ONE;var MAX_VALUE=fromBits(-1,2147483647,!1);Long.MAX_VALUE=MAX_VALUE;var MAX_UNSIGNED_VALUE=fromBits(-1,-1,!0);Long.MAX_UNSIGNED_VALUE=MAX_UNSIGNED_VALUE;var MIN_VALUE=fromBits(0,-2147483648,!1);Long.MIN_VALUE=MIN_VALUE;var LongPrototype=Long.prototype;LongPrototype.toInt=function(){return this.unsigned?this.low>>>0:this.low};LongPrototype.toNumber=function(){return this.unsigned?(this.high>>>0)*TWO_PWR_32_DBL+(this.low>>>0):this.high*TWO_PWR_32_DBL+(this.low>>>0)};LongPrototype.toString=function(s){if(s=s||10,s<2||36<s)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(MIN_VALUE)){var d=fromNumber(s),c=this.div(d),m=c.mul(d).sub(this);return c.toString(s)+m.toInt().toString(s)}else return"-"+this.neg().toString(s);for(var g=fromNumber(pow_dbl(s,6),this.unsigned),b=this,k="";;){var et=b.div(g),nt=b.sub(et.mul(g)).toInt()>>>0,it=nt.toString(s);if(b=et,b.isZero())return it+k;for(;it.length<6;)it="0"+it;k=""+it+k}};LongPrototype.getHighBits=function(){return this.high};LongPrototype.getHighBitsUnsigned=function(){return this.high>>>0};LongPrototype.getLowBits=function(){return this.low};LongPrototype.getLowBitsUnsigned=function(){return this.low>>>0};LongPrototype.getNumBitsAbs=function(){if(this.isNegative())return this.eq(MIN_VALUE)?64:this.neg().getNumBitsAbs();for(var s=this.high!=0?this.high:this.low,d=31;d>0&&(s&1<<d)==0;d--);return this.high!=0?d+33:d+1};LongPrototype.isZero=function(){return this.high===0&&this.low===0};LongPrototype.eqz=LongPrototype.isZero;LongPrototype.isNegative=function(){return!this.unsigned&&this.high<0};LongPrototype.isPositive=function(){return this.unsigned||this.high>=0};LongPrototype.isOdd=function(){return(this.low&1)===1};LongPrototype.isEven=function(){return(this.low&1)===0};LongPrototype.equals=function(s){return isLong(s)||(s=fromValue(s)),this.unsigned!==s.unsigned&&this.high>>>31===1&&s.high>>>31===1?!1:this.high===s.high&&this.low===s.low};LongPrototype.eq=LongPrototype.equals;LongPrototype.notEquals=function(s){return!this.eq(s)};LongPrototype.neq=LongPrototype.notEquals;LongPrototype.ne=LongPrototype.notEquals;LongPrototype.lessThan=function(s){return this.comp(s)<0};LongPrototype.lt=LongPrototype.lessThan;LongPrototype.lessThanOrEqual=function(s){return this.comp(s)<=0};LongPrototype.lte=LongPrototype.lessThanOrEqual;LongPrototype.le=LongPrototype.lessThanOrEqual;LongPrototype.greaterThan=function(s){return this.comp(s)>0};LongPrototype.gt=LongPrototype.greaterThan;LongPrototype.greaterThanOrEqual=function(s){return this.comp(s)>=0};LongPrototype.gte=LongPrototype.greaterThanOrEqual;LongPrototype.ge=LongPrototype.greaterThanOrEqual;LongPrototype.compare=function(s){if(isLong(s)||(s=fromValue(s)),this.eq(s))return 0;var d=this.isNegative(),c=s.isNegative();return d&&!c?-1:!d&&c?1:this.unsigned?s.high>>>0>this.high>>>0||s.high===this.high&&s.low>>>0>this.low>>>0?-1:1:this.sub(s).isNegative()?-1:1};LongPrototype.comp=LongPrototype.compare;LongPrototype.negate=function(){return!this.unsigned&&this.eq(MIN_VALUE)?MIN_VALUE:this.not().add(ONE)};LongPrototype.neg=LongPrototype.negate;LongPrototype.add=function(s){isLong(s)||(s=fromValue(s));var d=this.high>>>16,c=this.high&65535,m=this.low>>>16,g=this.low&65535,b=s.high>>>16,k=s.high&65535,et=s.low>>>16,nt=s.low&65535,it=0,ct=0,st=0,ut=0;return ut+=g+nt,st+=ut>>>16,ut&=65535,st+=m+et,ct+=st>>>16,st&=65535,ct+=c+k,it+=ct>>>16,ct&=65535,it+=d+b,it&=65535,fromBits(st<<16|ut,it<<16|ct,this.unsigned)};LongPrototype.subtract=function(s){return isLong(s)||(s=fromValue(s)),this.add(s.neg())};LongPrototype.sub=LongPrototype.subtract;LongPrototype.multiply=function(s){if(this.isZero())return ZERO;if(isLong(s)||(s=fromValue(s)),wasm){var d=wasm.mul(this.low,this.high,s.low,s.high);return fromBits(d,wasm.get_high(),this.unsigned)}if(s.isZero())return ZERO;if(this.eq(MIN_VALUE))return s.isOdd()?MIN_VALUE:ZERO;if(s.eq(MIN_VALUE))return this.isOdd()?MIN_VALUE:ZERO;if(this.isNegative())return s.isNegative()?this.neg().mul(s.neg()):this.neg().mul(s).neg();if(s.isNegative())return this.mul(s.neg()).neg();if(this.lt(TWO_PWR_24)&&s.lt(TWO_PWR_24))return fromNumber(this.toNumber()*s.toNumber(),this.unsigned);var c=this.high>>>16,m=this.high&65535,g=this.low>>>16,b=this.low&65535,k=s.high>>>16,et=s.high&65535,nt=s.low>>>16,it=s.low&65535,ct=0,st=0,ut=0,pt=0;return pt+=b*it,ut+=pt>>>16,pt&=65535,ut+=g*it,st+=ut>>>16,ut&=65535,ut+=b*nt,st+=ut>>>16,ut&=65535,st+=m*it,ct+=st>>>16,st&=65535,st+=g*nt,ct+=st>>>16,st&=65535,st+=b*et,ct+=st>>>16,st&=65535,ct+=c*it+m*nt+g*et+b*k,ct&=65535,fromBits(ut<<16|pt,ct<<16|st,this.unsigned)};LongPrototype.mul=LongPrototype.multiply;LongPrototype.divide=function(s){if(isLong(s)||(s=fromValue(s)),s.isZero())throw Error("division by zero");if(wasm){if(!this.unsigned&&this.high===-2147483648&&s.low===-1&&s.high===-1)return this;var d=(this.unsigned?wasm.div_u:wasm.div_s)(this.low,this.high,s.low,s.high);return fromBits(d,wasm.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?UZERO:ZERO;var c,m,g;if(this.unsigned){if(s.unsigned||(s=s.toUnsigned()),s.gt(this))return UZERO;if(s.gt(this.shru(1)))return UONE;g=UZERO}else{if(this.eq(MIN_VALUE)){if(s.eq(ONE)||s.eq(NEG_ONE))return MIN_VALUE;if(s.eq(MIN_VALUE))return ONE;var b=this.shr(1);return c=b.div(s).shl(1),c.eq(ZERO)?s.isNegative()?ONE:NEG_ONE:(m=this.sub(s.mul(c)),g=c.add(m.div(s)),g)}else if(s.eq(MIN_VALUE))return this.unsigned?UZERO:ZERO;if(this.isNegative())return s.isNegative()?this.neg().div(s.neg()):this.neg().div(s).neg();if(s.isNegative())return this.div(s.neg()).neg();g=ZERO}for(m=this;m.gte(s);){c=Math.max(1,Math.floor(m.toNumber()/s.toNumber()));for(var k=Math.ceil(Math.log(c)/Math.LN2),et=k<=48?1:pow_dbl(2,k-48),nt=fromNumber(c),it=nt.mul(s);it.isNegative()||it.gt(m);)c-=et,nt=fromNumber(c,this.unsigned),it=nt.mul(s);nt.isZero()&&(nt=ONE),g=g.add(nt),m=m.sub(it)}return g};LongPrototype.div=LongPrototype.divide;LongPrototype.modulo=function(s){if(isLong(s)||(s=fromValue(s)),wasm){var d=(this.unsigned?wasm.rem_u:wasm.rem_s)(this.low,this.high,s.low,s.high);return fromBits(d,wasm.get_high(),this.unsigned)}return this.sub(this.div(s).mul(s))};LongPrototype.mod=LongPrototype.modulo;LongPrototype.rem=LongPrototype.modulo;LongPrototype.not=function(){return fromBits(~this.low,~this.high,this.unsigned)};LongPrototype.and=function(s){return isLong(s)||(s=fromValue(s)),fromBits(this.low&s.low,this.high&s.high,this.unsigned)};LongPrototype.or=function(s){return isLong(s)||(s=fromValue(s)),fromBits(this.low|s.low,this.high|s.high,this.unsigned)};LongPrototype.xor=function(s){return isLong(s)||(s=fromValue(s)),fromBits(this.low^s.low,this.high^s.high,this.unsigned)};LongPrototype.shiftLeft=function(s){return isLong(s)&&(s=s.toInt()),(s&=63)===0?this:s<32?fromBits(this.low<<s,this.high<<s|this.low>>>32-s,this.unsigned):fromBits(0,this.low<<s-32,this.unsigned)};LongPrototype.shl=LongPrototype.shiftLeft;LongPrototype.shiftRight=function(s){return isLong(s)&&(s=s.toInt()),(s&=63)===0?this:s<32?fromBits(this.low>>>s|this.high<<32-s,this.high>>s,this.unsigned):fromBits(this.high>>s-32,this.high>=0?0:-1,this.unsigned)};LongPrototype.shr=LongPrototype.shiftRight;LongPrototype.shiftRightUnsigned=function(s){if(isLong(s)&&(s=s.toInt()),s&=63,s===0)return this;var d=this.high;if(s<32){var c=this.low;return fromBits(c>>>s|d<<32-s,d>>>s,this.unsigned)}else return s===32?fromBits(d,0,this.unsigned):fromBits(d>>>s-32,0,this.unsigned)};LongPrototype.shru=LongPrototype.shiftRightUnsigned;LongPrototype.shr_u=LongPrototype.shiftRightUnsigned;LongPrototype.toSigned=function(){return this.unsigned?fromBits(this.low,this.high,!1):this};LongPrototype.toUnsigned=function(){return this.unsigned?this:fromBits(this.low,this.high,!0)};LongPrototype.toBytes=function(s){return s?this.toBytesLE():this.toBytesBE()};LongPrototype.toBytesLE=function(){var s=this.high,d=this.low;return[d&255,d>>>8&255,d>>>16&255,d>>>24,s&255,s>>>8&255,s>>>16&255,s>>>24]};LongPrototype.toBytesBE=function(){var s=this.high,d=this.low;return[s>>>24,s>>>16&255,s>>>8&255,s&255,d>>>24,d>>>16&255,d>>>8&255,d&255]};Long.fromBytes=function(s,d,c){return c?Long.fromBytesLE(s,d):Long.fromBytesBE(s,d)};Long.fromBytesLE=function(s,d){return new Long(s[0]|s[1]<<8|s[2]<<16|s[3]<<24,s[4]|s[5]<<8|s[6]<<16|s[7]<<24,d)};Long.fromBytesBE=function(s,d){return new Long(s[4]<<24|s[5]<<16|s[6]<<8|s[7],s[0]<<24|s[1]<<16|s[2]<<8|s[3],d)};var indexMinimal$1={},minimal$3={},aspromise$1=asPromise$1;function asPromise$1(a,s){for(var d=new Array(arguments.length-1),c=0,m=2,g=!0;m<arguments.length;)d[c++]=arguments[m++];return new Promise(function(k,et){d[c]=function(it){if(g)if(g=!1,it)et(it);else{for(var ct=new Array(arguments.length-1),st=0;st<ct.length;)ct[st++]=arguments[st];k.apply(null,ct)}};try{a.apply(s||null,d)}catch(nt){g&&(g=!1,et(nt))}})}var base64$3={};(function(a){var s=a;s.length=function(k){var et=k.length;if(!et)return 0;for(var nt=0;--et%4>1&&k.charAt(et)==="=";)++nt;return Math.ceil(k.length*3)/4-nt};for(var d=new Array(64),c=new Array(123),m=0;m<64;)c[d[m]=m<26?m+65:m<52?m+71:m<62?m-4:m-59|43]=m++;s.encode=function(k,et,nt){for(var it=null,ct=[],st=0,ut=0,pt;et<nt;){var St=k[et++];switch(ut){case 0:ct[st++]=d[St>>2],pt=(St&3)<<4,ut=1;break;case 1:ct[st++]=d[pt|St>>4],pt=(St&15)<<2,ut=2;break;case 2:ct[st++]=d[pt|St>>6],ct[st++]=d[St&63],ut=0;break}st>8191&&((it||(it=[])).push(String.fromCharCode.apply(String,ct)),st=0)}return ut&&(ct[st++]=d[pt],ct[st++]=61,ut===1&&(ct[st++]=61)),it?(st&&it.push(String.fromCharCode.apply(String,ct.slice(0,st))),it.join("")):String.fromCharCode.apply(String,ct.slice(0,st))};var g="invalid encoding";s.decode=function(k,et,nt){for(var it=nt,ct=0,st,ut=0;ut<k.length;){var pt=k.charCodeAt(ut++);if(pt===61&&ct>1)break;if((pt=c[pt])===void 0)throw Error(g);switch(ct){case 0:st=pt,ct=1;break;case 1:et[nt++]=st<<2|(pt&48)>>4,st=pt,ct=2;break;case 2:et[nt++]=(st&15)<<4|(pt&60)>>2,st=pt,ct=3;break;case 3:et[nt++]=(st&3)<<6|pt,ct=0;break}}if(ct===1)throw Error(g);return nt-it},s.test=function(k){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(k)}})(base64$3);var eventemitter$1=EventEmitter$2;function EventEmitter$2(){this._listeners={}}EventEmitter$2.prototype.on=function(s,d,c){return(this._listeners[s]||(this._listeners[s]=[])).push({fn:d,ctx:c||this}),this};EventEmitter$2.prototype.off=function(s,d){if(s===void 0)this._listeners={};else if(d===void 0)this._listeners[s]=[];else for(var c=this._listeners[s],m=0;m<c.length;)c[m].fn===d?c.splice(m,1):++m;return this};EventEmitter$2.prototype.emit=function(s){var d=this._listeners[s];if(d){for(var c=[],m=1;m<arguments.length;)c.push(arguments[m++]);for(m=0;m<d.length;)d[m].fn.apply(d[m++].ctx,c)}return this};var float$1=factory$1(factory$1);function factory$1(a){return typeof Float32Array!="undefined"?function(){var s=new Float32Array([-0]),d=new Uint8Array(s.buffer),c=d[3]===128;function m(et,nt,it){s[0]=et,nt[it]=d[0],nt[it+1]=d[1],nt[it+2]=d[2],nt[it+3]=d[3]}function g(et,nt,it){s[0]=et,nt[it]=d[3],nt[it+1]=d[2],nt[it+2]=d[1],nt[it+3]=d[0]}a.writeFloatLE=c?m:g,a.writeFloatBE=c?g:m;function b(et,nt){return d[0]=et[nt],d[1]=et[nt+1],d[2]=et[nt+2],d[3]=et[nt+3],s[0]}function k(et,nt){return d[3]=et[nt],d[2]=et[nt+1],d[1]=et[nt+2],d[0]=et[nt+3],s[0]}a.readFloatLE=c?b:k,a.readFloatBE=c?k:b}():function(){function s(c,m,g,b){var k=m<0?1:0;if(k&&(m=-m),m===0)c(1/m>0?0:2147483648,g,b);else if(isNaN(m))c(2143289344,g,b);else if(m>34028234663852886e22)c((k<<31|2139095040)>>>0,g,b);else if(m<11754943508222875e-54)c((k<<31|Math.round(m/1401298464324817e-60))>>>0,g,b);else{var et=Math.floor(Math.log(m)/Math.LN2),nt=Math.round(m*Math.pow(2,-et)*8388608)&8388607;c((k<<31|et+127<<23|nt)>>>0,g,b)}}a.writeFloatLE=s.bind(null,writeUintLE$1),a.writeFloatBE=s.bind(null,writeUintBE$1);function d(c,m,g){var b=c(m,g),k=(b>>31)*2+1,et=b>>>23&255,nt=b&8388607;return et===255?nt?NaN:k*(1/0):et===0?k*1401298464324817e-60*nt:k*Math.pow(2,et-150)*(nt+8388608)}a.readFloatLE=d.bind(null,readUintLE$1),a.readFloatBE=d.bind(null,readUintBE$1)}(),typeof Float64Array!="undefined"?function(){var s=new Float64Array([-0]),d=new Uint8Array(s.buffer),c=d[7]===128;function m(et,nt,it){s[0]=et,nt[it]=d[0],nt[it+1]=d[1],nt[it+2]=d[2],nt[it+3]=d[3],nt[it+4]=d[4],nt[it+5]=d[5],nt[it+6]=d[6],nt[it+7]=d[7]}function g(et,nt,it){s[0]=et,nt[it]=d[7],nt[it+1]=d[6],nt[it+2]=d[5],nt[it+3]=d[4],nt[it+4]=d[3],nt[it+5]=d[2],nt[it+6]=d[1],nt[it+7]=d[0]}a.writeDoubleLE=c?m:g,a.writeDoubleBE=c?g:m;function b(et,nt){return d[0]=et[nt],d[1]=et[nt+1],d[2]=et[nt+2],d[3]=et[nt+3],d[4]=et[nt+4],d[5]=et[nt+5],d[6]=et[nt+6],d[7]=et[nt+7],s[0]}function k(et,nt){return d[7]=et[nt],d[6]=et[nt+1],d[5]=et[nt+2],d[4]=et[nt+3],d[3]=et[nt+4],d[2]=et[nt+5],d[1]=et[nt+6],d[0]=et[nt+7],s[0]}a.readDoubleLE=c?b:k,a.readDoubleBE=c?k:b}():function(){function s(c,m,g,b,k,et){var nt=b<0?1:0;if(nt&&(b=-b),b===0)c(0,k,et+m),c(1/b>0?0:2147483648,k,et+g);else if(isNaN(b))c(0,k,et+m),c(2146959360,k,et+g);else if(b>17976931348623157e292)c(0,k,et+m),c((nt<<31|2146435072)>>>0,k,et+g);else{var it;if(b<22250738585072014e-324)it=b/5e-324,c(it>>>0,k,et+m),c((nt<<31|it/4294967296)>>>0,k,et+g);else{var ct=Math.floor(Math.log(b)/Math.LN2);ct===1024&&(ct=1023),it=b*Math.pow(2,-ct),c(it*4503599627370496>>>0,k,et+m),c((nt<<31|ct+1023<<20|it*1048576&1048575)>>>0,k,et+g)}}}a.writeDoubleLE=s.bind(null,writeUintLE$1,0,4),a.writeDoubleBE=s.bind(null,writeUintBE$1,4,0);function d(c,m,g,b,k){var et=c(b,k+m),nt=c(b,k+g),it=(nt>>31)*2+1,ct=nt>>>20&2047,st=4294967296*(nt&1048575)+et;return ct===2047?st?NaN:it*(1/0):ct===0?it*5e-324*st:it*Math.pow(2,ct-1075)*(st+4503599627370496)}a.readDoubleLE=d.bind(null,readUintLE$1,0,4),a.readDoubleBE=d.bind(null,readUintBE$1,4,0)}(),a}function writeUintLE$1(a,s,d){s[d]=a&255,s[d+1]=a>>>8&255,s[d+2]=a>>>16&255,s[d+3]=a>>>24}function writeUintBE$1(a,s,d){s[d]=a>>>24,s[d+1]=a>>>16&255,s[d+2]=a>>>8&255,s[d+3]=a&255}function readUintLE$1(a,s){return(a[s]|a[s+1]<<8|a[s+2]<<16|a[s+3]<<24)>>>0}function readUintBE$1(a,s){return(a[s]<<24|a[s+1]<<16|a[s+2]<<8|a[s+3])>>>0}var inquire_1$1=inquire$1;function inquire$1(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(a){}return null}var utf8$5={};(function(a){var s=a;s.length=function(c){for(var m=0,g=0,b=0;b<c.length;++b)g=c.charCodeAt(b),g<128?m+=1:g<2048?m+=2:(g&64512)===55296&&(c.charCodeAt(b+1)&64512)===56320?(++b,m+=4):m+=3;return m},s.read=function(c,m,g){var b=g-m;if(b<1)return"";for(var k=null,et=[],nt=0,it;m<g;)it=c[m++],it<128?et[nt++]=it:it>191&&it<224?et[nt++]=(it&31)<<6|c[m++]&63:it>239&&it<365?(it=((it&7)<<18|(c[m++]&63)<<12|(c[m++]&63)<<6|c[m++]&63)-65536,et[nt++]=55296+(it>>10),et[nt++]=56320+(it&1023)):et[nt++]=(it&15)<<12|(c[m++]&63)<<6|c[m++]&63,nt>8191&&((k||(k=[])).push(String.fromCharCode.apply(String,et)),nt=0);return k?(nt&&k.push(String.fromCharCode.apply(String,et.slice(0,nt))),k.join("")):String.fromCharCode.apply(String,et.slice(0,nt))},s.write=function(c,m,g){for(var b=g,k,et,nt=0;nt<c.length;++nt)k=c.charCodeAt(nt),k<128?m[g++]=k:k<2048?(m[g++]=k>>6|192,m[g++]=k&63|128):(k&64512)===55296&&((et=c.charCodeAt(nt+1))&64512)===56320?(k=65536+((k&1023)<<10)+(et&1023),++nt,m[g++]=k>>18|240,m[g++]=k>>12&63|128,m[g++]=k>>6&63|128,m[g++]=k&63|128):(m[g++]=k>>12|224,m[g++]=k>>6&63|128,m[g++]=k&63|128);return g-b}})(utf8$5);var pool_1$1=pool$1;function pool$1(a,s,d){var c=d||8192,m=c>>>1,g=null,b=c;return function(et){if(et<1||et>m)return a(et);b+et>c&&(g=a(c),b=0);var nt=s.call(g,b,b+=et);return b&7&&(b=(b|7)+1),nt}}var longbits$1=LongBits$5,util$b=minimal$3;function LongBits$5(a,s){this.lo=a>>>0,this.hi=s>>>0}var zero$1=LongBits$5.zero=new LongBits$5(0,0);zero$1.toNumber=function(){return 0};zero$1.zzEncode=zero$1.zzDecode=function(){return this};zero$1.length=function(){return 1};var zeroHash$1=LongBits$5.zeroHash="\0\0\0\0\0\0\0\0";LongBits$5.fromNumber=function a(s){if(s===0)return zero$1;var d=s<0;d&&(s=-s);var c=s>>>0,m=(s-c)/4294967296>>>0;return d&&(m=~m>>>0,c=~c>>>0,++c>4294967295&&(c=0,++m>4294967295&&(m=0))),new LongBits$5(c,m)};LongBits$5.from=function a(s){if(typeof s=="number")return LongBits$5.fromNumber(s);if(util$b.isString(s))if(util$b.Long)s=util$b.Long.fromString(s);else return LongBits$5.fromNumber(parseInt(s,10));return s.low||s.high?new LongBits$5(s.low>>>0,s.high>>>0):zero$1};LongBits$5.prototype.toNumber=function a(s){if(!s&&this.hi>>>31){var d=~this.lo+1>>>0,c=~this.hi>>>0;return d||(c=c+1>>>0),-(d+c*4294967296)}return this.lo+this.hi*4294967296};LongBits$5.prototype.toLong=function a(s){return util$b.Long?new util$b.Long(this.lo|0,this.hi|0,Boolean(s)):{low:this.lo|0,high:this.hi|0,unsigned:Boolean(s)}};var charCodeAt$1=String.prototype.charCodeAt;LongBits$5.fromHash=function a(s){return s===zeroHash$1?zero$1:new LongBits$5((charCodeAt$1.call(s,0)|charCodeAt$1.call(s,1)<<8|charCodeAt$1.call(s,2)<<16|charCodeAt$1.call(s,3)<<24)>>>0,(charCodeAt$1.call(s,4)|charCodeAt$1.call(s,5)<<8|charCodeAt$1.call(s,6)<<16|charCodeAt$1.call(s,7)<<24)>>>0)};LongBits$5.prototype.toHash=function a(){return String.fromCharCode(this.lo&255,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,this.hi&255,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)};LongBits$5.prototype.zzEncode=function a(){var s=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^s)>>>0,this.lo=(this.lo<<1^s)>>>0,this};LongBits$5.prototype.zzDecode=function a(){var s=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^s)>>>0,this.hi=(this.hi>>>1^s)>>>0,this};LongBits$5.prototype.length=function a(){var s=this.lo,d=(this.lo>>>28|this.hi<<4)>>>0,c=this.hi>>>24;return c===0?d===0?s<16384?s<128?1:2:s<2097152?3:4:d<16384?d<128?5:6:d<2097152?7:8:c<128?9:10};(function(a){var s=a;s.asPromise=aspromise$1,s.base64=base64$3,s.EventEmitter=eventemitter$1,s.float=float$1,s.inquire=inquire_1$1,s.utf8=utf8$5,s.pool=pool_1$1,s.LongBits=longbits$1,s.isNode=Boolean(typeof commonjsGlobal!="undefined"&&commonjsGlobal&&commonjsGlobal.process&&commonjsGlobal.process.versions&&commonjsGlobal.process.versions.node),s.global=s.isNode&&commonjsGlobal||typeof window!="undefined"&&window||typeof self!="undefined"&&self||commonjsGlobal,s.emptyArray=Object.freeze?Object.freeze([]):[],s.emptyObject=Object.freeze?Object.freeze({}):{},s.isInteger=Number.isInteger||function(g){return typeof g=="number"&&isFinite(g)&&Math.floor(g)===g},s.isString=function(g){return typeof g=="string"||g instanceof String},s.isObject=function(g){return g&&typeof g=="object"},s.isset=s.isSet=function(g,b){var k=g[b];return k!=null&&g.hasOwnProperty(b)?typeof k!="object"||(Array.isArray(k)?k.length:Object.keys(k).length)>0:!1},s.Buffer=function(){try{var m=s.inquire("buffer").Buffer;return m.prototype.utf8Write?m:null}catch{return null}}(),s._Buffer_from=null,s._Buffer_allocUnsafe=null,s.newBuffer=function(g){return typeof g=="number"?s.Buffer?s._Buffer_allocUnsafe(g):new s.Array(g):s.Buffer?s._Buffer_from(g):typeof Uint8Array=="undefined"?g:new Uint8Array(g)},s.Array=typeof Uint8Array!="undefined"?Uint8Array:Array,s.Long=s.global.dcodeIO&&s.global.dcodeIO.Long||s.global.Long||s.inquire("long"),s.key2Re=/^true|false|0|1$/,s.key32Re=/^-?(?:0|[1-9][0-9]*)$/,s.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,s.longToHash=function(g){return g?s.LongBits.from(g).toHash():s.LongBits.zeroHash},s.longFromHash=function(g,b){var k=s.LongBits.fromHash(g);return s.Long?s.Long.fromBits(k.lo,k.hi,b):k.toNumber(Boolean(b))};function d(m,g,b){for(var k=Object.keys(g),et=0;et<k.length;++et)(m[k[et]]===void 0||!b)&&(m[k[et]]=g[k[et]]);return m}s.merge=d,s.lcFirst=function(g){return g.charAt(0).toLowerCase()+g.substring(1)};function c(m){function g(b,k){if(!(this instanceof g))return new g(b,k);Object.defineProperty(this,"message",{get:function(){return b}}),Error.captureStackTrace?Error.captureStackTrace(this,g):Object.defineProperty(this,"stack",{value:new Error().stack||""}),k&&d(this,k)}return(g.prototype=Object.create(Error.prototype)).constructor=g,Object.defineProperty(g.prototype,"name",{get:function(){return m}}),g.prototype.toString=function(){return this.name+": "+this.message},g}s.newError=c,s.ProtocolError=c("ProtocolError"),s.oneOfGetter=function(g){for(var b={},k=0;k<g.length;++k)b[g[k]]=1;return function(){for(var et=Object.keys(this),nt=et.length-1;nt>-1;--nt)if(b[et[nt]]===1&&this[et[nt]]!==void 0&&this[et[nt]]!==null)return et[nt]}},s.oneOfSetter=function(g){return function(b){for(var k=0;k<g.length;++k)g[k]!==b&&delete this[g[k]]}},s.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},s._configure=function(){var m=s.Buffer;if(!m){s._Buffer_from=s._Buffer_allocUnsafe=null;return}s._Buffer_from=m.from!==Uint8Array.from&&m.from||function(b,k){return new m(b,k)},s._Buffer_allocUnsafe=m.allocUnsafe||function(b){return new m(b)}}})(minimal$3);var writer$1=Writer$3,util$a=minimal$3,BufferWriter$3,LongBits$4=util$a.LongBits,base64$2=util$a.base64,utf8$4=util$a.utf8;function Op$1(a,s,d){this.fn=a,this.len=s,this.next=void 0,this.val=d}function noop$3(){}function State$1(a){this.head=a.head,this.tail=a.tail,this.len=a.len,this.next=a.states}function Writer$3(){this.len=0,this.head=new Op$1(noop$3,0,0),this.tail=this.head,this.states=null}var create$5=function a(){return util$a.Buffer?function(){return(Writer$3.create=function(){return new BufferWriter$3})()}:function(){return new Writer$3}};Writer$3.create=create$5();Writer$3.alloc=function a(s){return new util$a.Array(s)};util$a.Array!==Array&&(Writer$3.alloc=util$a.pool(Writer$3.alloc,util$a.Array.prototype.subarray));Writer$3.prototype._push=function a(s,d,c){return this.tail=this.tail.next=new Op$1(s,d,c),this.len+=d,this};function writeByte$1(a,s,d){s[d]=a&255}function writeVarint32$1(a,s,d){for(;a>127;)s[d++]=a&127|128,a>>>=7;s[d]=a}function VarintOp$1(a,s){this.len=a,this.next=void 0,this.val=s}VarintOp$1.prototype=Object.create(Op$1.prototype);VarintOp$1.prototype.fn=writeVarint32$1;Writer$3.prototype.uint32=function a(s){return this.len+=(this.tail=this.tail.next=new VarintOp$1((s=s>>>0)<128?1:s<16384?2:s<2097152?3:s<268435456?4:5,s)).len,this};Writer$3.prototype.int32=function a(s){return s<0?this._push(writeVarint64$1,10,LongBits$4.fromNumber(s)):this.uint32(s)};Writer$3.prototype.sint32=function a(s){return this.uint32((s<<1^s>>31)>>>0)};function writeVarint64$1(a,s,d){for(;a.hi;)s[d++]=a.lo&127|128,a.lo=(a.lo>>>7|a.hi<<25)>>>0,a.hi>>>=7;for(;a.lo>127;)s[d++]=a.lo&127|128,a.lo=a.lo>>>7;s[d++]=a.lo}Writer$3.prototype.uint64=function a(s){var d=LongBits$4.from(s);return this._push(writeVarint64$1,d.length(),d)};Writer$3.prototype.int64=Writer$3.prototype.uint64;Writer$3.prototype.sint64=function a(s){var d=LongBits$4.from(s).zzEncode();return this._push(writeVarint64$1,d.length(),d)};Writer$3.prototype.bool=function a(s){return this._push(writeByte$1,1,s?1:0)};function writeFixed32$1(a,s,d){s[d]=a&255,s[d+1]=a>>>8&255,s[d+2]=a>>>16&255,s[d+3]=a>>>24}Writer$3.prototype.fixed32=function a(s){return this._push(writeFixed32$1,4,s>>>0)};Writer$3.prototype.sfixed32=Writer$3.prototype.fixed32;Writer$3.prototype.fixed64=function a(s){var d=LongBits$4.from(s);return this._push(writeFixed32$1,4,d.lo)._push(writeFixed32$1,4,d.hi)};Writer$3.prototype.sfixed64=Writer$3.prototype.fixed64;Writer$3.prototype.float=function a(s){return this._push(util$a.float.writeFloatLE,4,s)};Writer$3.prototype.double=function a(s){return this._push(util$a.float.writeDoubleLE,8,s)};var writeBytes$1=util$a.Array.prototype.set?function a(s,d,c){d.set(s,c)}:function a(s,d,c){for(var m=0;m<s.length;++m)d[c+m]=s[m]};Writer$3.prototype.bytes=function a(s){var d=s.length>>>0;if(!d)return this._push(writeByte$1,1,0);if(util$a.isString(s)){var c=Writer$3.alloc(d=base64$2.length(s));base64$2.decode(s,c,0),s=c}return this.uint32(d)._push(writeBytes$1,d,s)};Writer$3.prototype.string=function a(s){var d=utf8$4.length(s);return d?this.uint32(d)._push(utf8$4.write,d,s):this._push(writeByte$1,1,0)};Writer$3.prototype.fork=function a(){return this.states=new State$1(this),this.head=this.tail=new Op$1(noop$3,0,0),this.len=0,this};Writer$3.prototype.reset=function a(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new Op$1(noop$3,0,0),this.len=0),this};Writer$3.prototype.ldelim=function a(){var s=this.head,d=this.tail,c=this.len;return this.reset().uint32(c),c&&(this.tail.next=s.next,this.tail=d,this.len+=c),this};Writer$3.prototype.finish=function a(){for(var s=this.head.next,d=this.constructor.alloc(this.len),c=0;s;)s.fn(s.val,d,c),c+=s.len,s=s.next;return d};Writer$3._configure=function(a){BufferWriter$3=a,Writer$3.create=create$5(),BufferWriter$3._configure()};var writer_buffer$1=BufferWriter$2,Writer$2=writer$1;(BufferWriter$2.prototype=Object.create(Writer$2.prototype)).constructor=BufferWriter$2;var util$9=minimal$3;function BufferWriter$2(){Writer$2.call(this)}BufferWriter$2._configure=function(){BufferWriter$2.alloc=util$9._Buffer_allocUnsafe,BufferWriter$2.writeBytesBuffer=util$9.Buffer&&util$9.Buffer.prototype instanceof Uint8Array&&util$9.Buffer.prototype.set.name==="set"?function(s,d,c){d.set(s,c)}:function(s,d,c){if(s.copy)s.copy(d,c,0,s.length);else for(var m=0;m<s.length;)d[c++]=s[m++]}};BufferWriter$2.prototype.bytes=function a(s){util$9.isString(s)&&(s=util$9._Buffer_from(s,"base64"));var d=s.length>>>0;return this.uint32(d),d&&this._push(BufferWriter$2.writeBytesBuffer,d,s),this};function writeStringBuffer$1(a,s,d){a.length<40?util$9.utf8.write(a,s,d):s.utf8Write?s.utf8Write(a,d):s.write(a,d)}BufferWriter$2.prototype.string=function a(s){var d=util$9.Buffer.byteLength(s);return this.uint32(d),d&&this._push(writeStringBuffer$1,d,s),this};BufferWriter$2._configure();var reader$1=Reader$3,util$8=minimal$3,BufferReader$3,LongBits$3=util$8.LongBits,utf8$3=util$8.utf8;function indexOutOfRange$1(a,s){return RangeError("index out of range: "+a.pos+" + "+(s||1)+" > "+a.len)}function Reader$3(a){this.buf=a,this.pos=0,this.len=a.length}var create_array$1=typeof Uint8Array!="undefined"?function a(s){if(s instanceof Uint8Array||Array.isArray(s))return new Reader$3(s);throw Error("illegal buffer")}:function a(s){if(Array.isArray(s))return new Reader$3(s);throw Error("illegal buffer")},create$4=function a(){return util$8.Buffer?function(d){return(Reader$3.create=function(m){return util$8.Buffer.isBuffer(m)?new BufferReader$3(m):create_array$1(m)})(d)}:create_array$1};Reader$3.create=create$4();Reader$3.prototype._slice=util$8.Array.prototype.subarray||util$8.Array.prototype.slice;Reader$3.prototype.uint32=function a(){var s=4294967295;return function(){if(s=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(s=(s|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(s=(s|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(s=(s|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(s=(s|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return s;if((this.pos+=5)>this.len)throw this.pos=this.len,indexOutOfRange$1(this,10);return s}}();Reader$3.prototype.int32=function a(){return this.uint32()|0};Reader$3.prototype.sint32=function a(){var s=this.uint32();return s>>>1^-(s&1)|0};function readLongVarint$1(){var a=new LongBits$3(0,0),s=0;if(this.len-this.pos>4){for(;s<4;++s)if(a.lo=(a.lo|(this.buf[this.pos]&127)<<s*7)>>>0,this.buf[this.pos++]<128)return a;if(a.lo=(a.lo|(this.buf[this.pos]&127)<<28)>>>0,a.hi=(a.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return a;s=0}else{for(;s<3;++s){if(this.pos>=this.len)throw indexOutOfRange$1(this);if(a.lo=(a.lo|(this.buf[this.pos]&127)<<s*7)>>>0,this.buf[this.pos++]<128)return a}return a.lo=(a.lo|(this.buf[this.pos++]&127)<<s*7)>>>0,a}if(this.len-this.pos>4){for(;s<5;++s)if(a.hi=(a.hi|(this.buf[this.pos]&127)<<s*7+3)>>>0,this.buf[this.pos++]<128)return a}else for(;s<5;++s){if(this.pos>=this.len)throw indexOutOfRange$1(this);if(a.hi=(a.hi|(this.buf[this.pos]&127)<<s*7+3)>>>0,this.buf[this.pos++]<128)return a}throw Error("invalid varint encoding")}Reader$3.prototype.bool=function a(){return this.uint32()!==0};function readFixed32_end$1(a,s){return(a[s-4]|a[s-3]<<8|a[s-2]<<16|a[s-1]<<24)>>>0}Reader$3.prototype.fixed32=function a(){if(this.pos+4>this.len)throw indexOutOfRange$1(this,4);return readFixed32_end$1(this.buf,this.pos+=4)};Reader$3.prototype.sfixed32=function a(){if(this.pos+4>this.len)throw indexOutOfRange$1(this,4);return readFixed32_end$1(this.buf,this.pos+=4)|0};function readFixed64$1(){if(this.pos+8>this.len)throw indexOutOfRange$1(this,8);return new LongBits$3(readFixed32_end$1(this.buf,this.pos+=4),readFixed32_end$1(this.buf,this.pos+=4))}Reader$3.prototype.float=function a(){if(this.pos+4>this.len)throw indexOutOfRange$1(this,4);var s=util$8.float.readFloatLE(this.buf,this.pos);return this.pos+=4,s};Reader$3.prototype.double=function a(){if(this.pos+8>this.len)throw indexOutOfRange$1(this,4);var s=util$8.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,s};Reader$3.prototype.bytes=function a(){var s=this.uint32(),d=this.pos,c=this.pos+s;if(c>this.len)throw indexOutOfRange$1(this,s);return this.pos+=s,Array.isArray(this.buf)?this.buf.slice(d,c):d===c?new this.buf.constructor(0):this._slice.call(this.buf,d,c)};Reader$3.prototype.string=function a(){var s=this.bytes();return utf8$3.read(s,0,s.length)};Reader$3.prototype.skip=function a(s){if(typeof s=="number"){if(this.pos+s>this.len)throw indexOutOfRange$1(this,s);this.pos+=s}else do if(this.pos>=this.len)throw indexOutOfRange$1(this);while(this.buf[this.pos++]&128);return this};Reader$3.prototype.skipType=function(a){switch(a){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(a=this.uint32()&7)!==4;)this.skipType(a);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+a+" at offset "+this.pos)}return this};Reader$3._configure=function(a){BufferReader$3=a,Reader$3.create=create$4(),BufferReader$3._configure();var s=util$8.Long?"toLong":"toNumber";util$8.merge(Reader$3.prototype,{int64:function(){return readLongVarint$1.call(this)[s](!1)},uint64:function(){return readLongVarint$1.call(this)[s](!0)},sint64:function(){return readLongVarint$1.call(this).zzDecode()[s](!1)},fixed64:function(){return readFixed64$1.call(this)[s](!0)},sfixed64:function(){return readFixed64$1.call(this)[s](!1)}})};var reader_buffer$1=BufferReader$2,Reader$2=reader$1;(BufferReader$2.prototype=Object.create(Reader$2.prototype)).constructor=BufferReader$2;var util$7=minimal$3;function BufferReader$2(a){Reader$2.call(this,a)}BufferReader$2._configure=function(){util$7.Buffer&&(BufferReader$2.prototype._slice=util$7.Buffer.prototype.slice)};BufferReader$2.prototype.string=function a(){var s=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+s,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+s,this.len))};BufferReader$2._configure();var rpc$1={},service$1=Service$1,util$6=minimal$3;(Service$1.prototype=Object.create(util$6.EventEmitter.prototype)).constructor=Service$1;function Service$1(a,s,d){if(typeof a!="function")throw TypeError("rpcImpl must be a function");util$6.EventEmitter.call(this),this.rpcImpl=a,this.requestDelimited=Boolean(s),this.responseDelimited=Boolean(d)}Service$1.prototype.rpcCall=function a(s,d,c,m,g){if(!m)throw TypeError("request must be specified");var b=this;if(!g)return util$6.asPromise(a,b,s,d,c,m);if(!b.rpcImpl){setTimeout(function(){g(Error("already ended"))},0);return}try{return b.rpcImpl(s,d[b.requestDelimited?"encodeDelimited":"encode"](m).finish(),function(et,nt){if(et)return b.emit("error",et,s),g(et);if(nt===null){b.end(!0);return}if(!(nt instanceof c))try{nt=c[b.responseDelimited?"decodeDelimited":"decode"](nt)}catch(it){return b.emit("error",it,s),g(it)}return b.emit("data",nt,s),g(null,nt)})}catch(k){b.emit("error",k,s),setTimeout(function(){g(k)},0);return}};Service$1.prototype.end=function a(s){return this.rpcImpl&&(s||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this};(function(a){var s=a;s.Service=service$1})(rpc$1);var roots$1={};(function(a){var s=a;s.build="minimal",s.Writer=writer$1,s.BufferWriter=writer_buffer$1,s.Reader=reader$1,s.BufferReader=reader_buffer$1,s.util=minimal$3,s.rpc=rpc$1,s.roots=roots$1,s.configure=d;function d(){s.util._configure(),s.Writer._configure(s.BufferWriter),s.Reader._configure(s.BufferReader)}d()})(indexMinimal$1);var minimal$2=indexMinimal$1;function isFunction$2(a){return typeof a=="function"}function hasLift(a){return isFunction$2(a==null?void 0:a.lift)}function operate(a){return function(s){if(hasLift(s))return s.lift(function(d){try{return a(d,this)}catch(c){this.error(c)}});throw new TypeError("Unable to lift unknown Observable type")}}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var extendStatics$1=function(a,s){return extendStatics$1=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,c){d.__proto__=c}||function(d,c){for(var m in c)Object.prototype.hasOwnProperty.call(c,m)&&(d[m]=c[m])},extendStatics$1(a,s)};function __extends$1(a,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");extendStatics$1(a,s);function d(){this.constructor=a}a.prototype=s===null?Object.create(s):(d.prototype=s.prototype,new d)}function __awaiter$d(a,s,d,c){function m(g){return g instanceof d?g:new d(function(b){b(g)})}return new(d||(d=Promise))(function(g,b){function k(it){try{nt(c.next(it))}catch(ct){b(ct)}}function et(it){try{nt(c.throw(it))}catch(ct){b(ct)}}function nt(it){it.done?g(it.value):m(it.value).then(k,et)}nt((c=c.apply(a,s||[])).next())})}function __generator(a,s){var d={label:0,sent:function(){if(g[0]&1)throw g[1];return g[1]},trys:[],ops:[]},c,m,g,b;return b={next:k(0),throw:k(1),return:k(2)},typeof Symbol=="function"&&(b[Symbol.iterator]=function(){return this}),b;function k(nt){return function(it){return et([nt,it])}}function et(nt){if(c)throw new TypeError("Generator is already executing.");for(;d;)try{if(c=1,m&&(g=nt[0]&2?m.return:nt[0]?m.throw||((g=m.return)&&g.call(m),0):m.next)&&!(g=g.call(m,nt[1])).done)return g;switch(m=0,g&&(nt=[nt[0]&2,g.value]),nt[0]){case 0:case 1:g=nt;break;case 4:return d.label++,{value:nt[1],done:!1};case 5:d.label++,m=nt[1],nt=[0];continue;case 7:nt=d.ops.pop(),d.trys.pop();continue;default:if(g=d.trys,!(g=g.length>0&&g[g.length-1])&&(nt[0]===6||nt[0]===2)){d=0;continue}if(nt[0]===3&&(!g||nt[1]>g[0]&&nt[1]<g[3])){d.label=nt[1];break}if(nt[0]===6&&d.label<g[1]){d.label=g[1],g=nt;break}if(g&&d.label<g[2]){d.label=g[2],d.ops.push(nt);break}g[2]&&d.ops.pop(),d.trys.pop();continue}nt=s.call(a,d)}catch(it){nt=[6,it],m=0}finally{c=g=0}if(nt[0]&5)throw nt[1];return{value:nt[0]?nt[1]:void 0,done:!0}}}function __values(a){var s=typeof Symbol=="function"&&Symbol.iterator,d=s&&a[s],c=0;if(d)return d.call(a);if(a&&typeof a.length=="number")return{next:function(){return a&&c>=a.length&&(a=void 0),{value:a&&a[c++],done:!a}}};throw new TypeError(s?"Object is not iterable.":"Symbol.iterator is not defined.")}function __read(a,s){var d=typeof Symbol=="function"&&a[Symbol.iterator];if(!d)return a;var c=d.call(a),m,g=[],b;try{for(;(s===void 0||s-- >0)&&!(m=c.next()).done;)g.push(m.value)}catch(k){b={error:k}}finally{try{m&&!m.done&&(d=c.return)&&d.call(c)}finally{if(b)throw b.error}}return g}function __spreadArray(a,s,d){if(d||arguments.length===2)for(var c=0,m=s.length,g;c<m;c++)(g||!(c in s))&&(g||(g=Array.prototype.slice.call(s,0,c)),g[c]=s[c]);return a.concat(g||Array.prototype.slice.call(s))}function __await(a){return this instanceof __await?(this.v=a,this):new __await(a)}function __asyncGenerator(a,s,d){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var c=d.apply(a,s||[]),m,g=[];return m={},b("next"),b("throw"),b("return"),m[Symbol.asyncIterator]=function(){return this},m;function b(st){c[st]&&(m[st]=function(ut){return new Promise(function(pt,St){g.push([st,ut,pt,St])>1||k(st,ut)})})}function k(st,ut){try{et(c[st](ut))}catch(pt){ct(g[0][3],pt)}}function et(st){st.value instanceof __await?Promise.resolve(st.value.v).then(nt,it):ct(g[0][2],st)}function nt(st){k("next",st)}function it(st){k("throw",st)}function ct(st,ut){st(ut),g.shift(),g.length&&k(g[0][0],g[0][1])}}function __asyncValues(a){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=a[Symbol.asyncIterator],d;return s?s.call(a):(a=typeof __values=="function"?__values(a):a[Symbol.iterator](),d={},c("next"),c("throw"),c("return"),d[Symbol.asyncIterator]=function(){return this},d);function c(g){d[g]=a[g]&&function(b){return new Promise(function(k,et){b=a[g](b),m(k,et,b.done,b.value)})}}function m(g,b,k,et){Promise.resolve(et).then(function(nt){g({value:nt,done:k})},b)}}var isArrayLike$1=function(a){return a&&typeof a.length=="number"&&typeof a!="function"};function isPromise$1(a){return isFunction$2(a==null?void 0:a.then)}function createErrorClass(a){var s=function(c){Error.call(c),c.stack=new Error().stack},d=a(s);return d.prototype=Object.create(Error.prototype),d.prototype.constructor=d,d}var UnsubscriptionError$1=createErrorClass(function(a){return function(d){a(this),this.message=d?d.length+` errors occurred during unsubscription:
`+d.map(function(c,m){return m+1+") "+c.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=d}});function arrRemove(a,s){if(a){var d=a.indexOf(s);0<=d&&a.splice(d,1)}}var Subscription$1=function(){function a(s){this.initialTeardown=s,this.closed=!1,this._parentage=null,this._finalizers=null}return a.prototype.unsubscribe=function(){var s,d,c,m,g;if(!this.closed){this.closed=!0;var b=this._parentage;if(b)if(this._parentage=null,Array.isArray(b))try{for(var k=__values(b),et=k.next();!et.done;et=k.next()){var nt=et.value;nt.remove(this)}}catch(St){s={error:St}}finally{try{et&&!et.done&&(d=k.return)&&d.call(k)}finally{if(s)throw s.error}}else b.remove(this);var it=this.initialTeardown;if(isFunction$2(it))try{it()}catch(St){g=St instanceof UnsubscriptionError$1?St.errors:[St]}var ct=this._finalizers;if(ct){this._finalizers=null;try{for(var st=__values(ct),ut=st.next();!ut.done;ut=st.next()){var pt=ut.value;try{execFinalizer(pt)}catch(St){g=g!=null?g:[],St instanceof UnsubscriptionError$1?g=__spreadArray(__spreadArray([],__read(g)),__read(St.errors)):g.push(St)}}}catch(St){c={error:St}}finally{try{ut&&!ut.done&&(m=st.return)&&m.call(st)}finally{if(c)throw c.error}}}if(g)throw new UnsubscriptionError$1(g)}},a.prototype.add=function(s){var d;if(s&&s!==this)if(this.closed)execFinalizer(s);else{if(s instanceof a){if(s.closed||s._hasParent(this))return;s._addParent(this)}(this._finalizers=(d=this._finalizers)!==null&&d!==void 0?d:[]).push(s)}},a.prototype._hasParent=function(s){var d=this._parentage;return d===s||Array.isArray(d)&&d.includes(s)},a.prototype._addParent=function(s){var d=this._parentage;this._parentage=Array.isArray(d)?(d.push(s),d):d?[d,s]:s},a.prototype._removeParent=function(s){var d=this._parentage;d===s?this._parentage=null:Array.isArray(d)&&arrRemove(d,s)},a.prototype.remove=function(s){var d=this._finalizers;d&&arrRemove(d,s),s instanceof a&&s._removeParent(this)},a.EMPTY=function(){var s=new a;return s.closed=!0,s}(),a}(),EMPTY_SUBSCRIPTION=Subscription$1.EMPTY;function isSubscription(a){return a instanceof Subscription$1||a&&"closed"in a&&isFunction$2(a.remove)&&isFunction$2(a.add)&&isFunction$2(a.unsubscribe)}function execFinalizer(a){isFunction$2(a)?a():a.unsubscribe()}var config$2={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},timeoutProvider={setTimeout:function(a,s){for(var d=[],c=2;c<arguments.length;c++)d[c-2]=arguments[c];var m=timeoutProvider.delegate;return m!=null&&m.setTimeout?m.setTimeout.apply(m,__spreadArray([a,s],__read(d))):setTimeout.apply(void 0,__spreadArray([a,s],__read(d)))},clearTimeout:function(a){var s=timeoutProvider.delegate;return((s==null?void 0:s.clearTimeout)||clearTimeout)(a)},delegate:void 0};function reportUnhandledError(a){timeoutProvider.setTimeout(function(){throw a})}function noop$2(){}var COMPLETE_NOTIFICATION=function(){return createNotification("C",void 0,void 0)}();function errorNotification(a){return createNotification("E",void 0,a)}function nextNotification(a){return createNotification("N",a,void 0)}function createNotification(a,s,d){return{kind:a,value:s,error:d}}var context=null;function errorContext(a){if(config$2.useDeprecatedSynchronousErrorHandling){var s=!context;if(s&&(context={errorThrown:!1,error:null}),a(),s){var d=context,c=d.errorThrown,m=d.error;if(context=null,c)throw m}}else a()}var Subscriber$1=function(a){__extends$1(s,a);function s(d){var c=a.call(this)||this;return c.isStopped=!1,d?(c.destination=d,isSubscription(d)&&d.add(c)):c.destination=EMPTY_OBSERVER,c}return s.create=function(d,c,m){return new SafeSubscriber$1(d,c,m)},s.prototype.next=function(d){this.isStopped?handleStoppedNotification(nextNotification(d),this):this._next(d)},s.prototype.error=function(d){this.isStopped?handleStoppedNotification(errorNotification(d),this):(this.isStopped=!0,this._error(d))},s.prototype.complete=function(){this.isStopped?handleStoppedNotification(COMPLETE_NOTIFICATION,this):(this.isStopped=!0,this._complete())},s.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,a.prototype.unsubscribe.call(this),this.destination=null)},s.prototype._next=function(d){this.destination.next(d)},s.prototype._error=function(d){try{this.destination.error(d)}finally{this.unsubscribe()}},s.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},s}(Subscription$1),_bind=Function.prototype.bind;function bind$3(a,s){return _bind.call(a,s)}var ConsumerObserver=function(){function a(s){this.partialObserver=s}return a.prototype.next=function(s){var d=this.partialObserver;if(d.next)try{d.next(s)}catch(c){handleUnhandledError(c)}},a.prototype.error=function(s){var d=this.partialObserver;if(d.error)try{d.error(s)}catch(c){handleUnhandledError(c)}else handleUnhandledError(s)},a.prototype.complete=function(){var s=this.partialObserver;if(s.complete)try{s.complete()}catch(d){handleUnhandledError(d)}},a}(),SafeSubscriber$1=function(a){__extends$1(s,a);function s(d,c,m){var g=a.call(this)||this,b;if(isFunction$2(d)||!d)b={next:d!=null?d:void 0,error:c!=null?c:void 0,complete:m!=null?m:void 0};else{var k;g&&config$2.useDeprecatedNextContext?(k=Object.create(d),k.unsubscribe=function(){return g.unsubscribe()},b={next:d.next&&bind$3(d.next,k),error:d.error&&bind$3(d.error,k),complete:d.complete&&bind$3(d.complete,k)}):b=d}return g.destination=new ConsumerObserver(b),g}return s}(Subscriber$1);function handleUnhandledError(a){reportUnhandledError(a)}function defaultErrorHandler(a){throw a}function handleStoppedNotification(a,s){var d=config$2.onStoppedNotification;d&&timeoutProvider.setTimeout(function(){return d(a,s)})}var EMPTY_OBSERVER={closed:!0,next:noop$2,error:defaultErrorHandler,complete:noop$2},observable$1=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function identity$1(a){return a}function pipe$1(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];return pipeFromArray$1(a)}function pipeFromArray$1(a){return a.length===0?identity$1:a.length===1?a[0]:function(d){return a.reduce(function(c,m){return m(c)},d)}}var Observable$1=function(){function a(s){s&&(this._subscribe=s)}return a.prototype.lift=function(s){var d=new a;return d.source=this,d.operator=s,d},a.prototype.subscribe=function(s,d,c){var m=this,g=isSubscriber(s)?s:new SafeSubscriber$1(s,d,c);return errorContext(function(){var b=m,k=b.operator,et=b.source;g.add(k?k.call(g,et):et?m._subscribe(g):m._trySubscribe(g))}),g},a.prototype._trySubscribe=function(s){try{return this._subscribe(s)}catch(d){s.error(d)}},a.prototype.forEach=function(s,d){var c=this;return d=getPromiseCtor$1(d),new d(function(m,g){var b=new SafeSubscriber$1({next:function(k){try{s(k)}catch(et){g(et),b.unsubscribe()}},error:g,complete:m});c.subscribe(b)})},a.prototype._subscribe=function(s){var d;return(d=this.source)===null||d===void 0?void 0:d.subscribe(s)},a.prototype[observable$1]=function(){return this},a.prototype.pipe=function(){for(var s=[],d=0;d<arguments.length;d++)s[d]=arguments[d];return pipeFromArray$1(s)(this)},a.prototype.toPromise=function(s){var d=this;return s=getPromiseCtor$1(s),new s(function(c,m){var g;d.subscribe(function(b){return g=b},function(b){return m(b)},function(){return c(g)})})},a.create=function(s){return new a(s)},a}();function getPromiseCtor$1(a){var s;return(s=a!=null?a:config$2.Promise)!==null&&s!==void 0?s:Promise}function isObserver(a){return a&&isFunction$2(a.next)&&isFunction$2(a.error)&&isFunction$2(a.complete)}function isSubscriber(a){return a&&a instanceof Subscriber$1||isObserver(a)&&isSubscription(a)}function isInteropObservable$1(a){return isFunction$2(a[observable$1])}function isAsyncIterable(a){return Symbol.asyncIterator&&isFunction$2(a==null?void 0:a[Symbol.asyncIterator])}function createInvalidObservableTypeError(a){return new TypeError("You provided "+(a!==null&&typeof a=="object"?"an invalid object":"'"+a+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}function getSymbolIterator$1(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var iterator$1=getSymbolIterator$1();function isIterable$1(a){return isFunction$2(a==null?void 0:a[iterator$1])}function readableStreamLikeToAsyncGenerator(a){return __asyncGenerator(this,arguments,function(){var d,c,m,g;return __generator(this,function(b){switch(b.label){case 0:d=a.getReader(),b.label=1;case 1:b.trys.push([1,,9,10]),b.label=2;case 2:return[4,__await(d.read())];case 3:return c=b.sent(),m=c.value,g=c.done,g?[4,__await(void 0)]:[3,5];case 4:return[2,b.sent()];case 5:return[4,__await(m)];case 6:return[4,b.sent()];case 7:return b.sent(),[3,2];case 8:return[3,10];case 9:return d.releaseLock(),[7];case 10:return[2]}})})}function isReadableStreamLike(a){return isFunction$2(a==null?void 0:a.getReader)}function innerFrom(a){if(a instanceof Observable$1)return a;if(a!=null){if(isInteropObservable$1(a))return fromInteropObservable(a);if(isArrayLike$1(a))return fromArrayLike(a);if(isPromise$1(a))return fromPromise(a);if(isAsyncIterable(a))return fromAsyncIterable(a);if(isIterable$1(a))return fromIterable(a);if(isReadableStreamLike(a))return fromReadableStreamLike(a)}throw createInvalidObservableTypeError(a)}function fromInteropObservable(a){return new Observable$1(function(s){var d=a[observable$1]();if(isFunction$2(d.subscribe))return d.subscribe(s);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function fromArrayLike(a){return new Observable$1(function(s){for(var d=0;d<a.length&&!s.closed;d++)s.next(a[d]);s.complete()})}function fromPromise(a){return new Observable$1(function(s){a.then(function(d){s.closed||(s.next(d),s.complete())},function(d){return s.error(d)}).then(null,reportUnhandledError)})}function fromIterable(a){return new Observable$1(function(s){var d,c;try{for(var m=__values(a),g=m.next();!g.done;g=m.next()){var b=g.value;if(s.next(b),s.closed)return}}catch(k){d={error:k}}finally{try{g&&!g.done&&(c=m.return)&&c.call(m)}finally{if(d)throw d.error}}s.complete()})}function fromAsyncIterable(a){return new Observable$1(function(s){process$1(a,s).catch(function(d){return s.error(d)})})}function fromReadableStreamLike(a){return fromAsyncIterable(readableStreamLikeToAsyncGenerator(a))}function process$1(a,s){var d,c,m,g;return __awaiter$d(this,void 0,void 0,function(){var b,k;return __generator(this,function(et){switch(et.label){case 0:et.trys.push([0,5,6,11]),d=__asyncValues(a),et.label=1;case 1:return[4,d.next()];case 2:if(c=et.sent(),!!c.done)return[3,4];if(b=c.value,s.next(b),s.closed)return[2];et.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return k=et.sent(),m={error:k},[3,11];case 6:return et.trys.push([6,,9,10]),c&&!c.done&&(g=d.return)?[4,g.call(d)]:[3,8];case 7:et.sent(),et.label=8;case 8:return[3,10];case 9:if(m)throw m.error;return[7];case 10:return[7];case 11:return s.complete(),[2]}})})}function createOperatorSubscriber(a,s,d,c,m){return new OperatorSubscriber(a,s,d,c,m)}var OperatorSubscriber=function(a){__extends$1(s,a);function s(d,c,m,g,b,k){var et=a.call(this,d)||this;return et.onFinalize=b,et.shouldUnsubscribe=k,et._next=c?function(nt){try{c(nt)}catch(it){d.error(it)}}:a.prototype._next,et._error=g?function(nt){try{g(nt)}catch(it){d.error(it)}finally{this.unsubscribe()}}:a.prototype._error,et._complete=m?function(){try{m()}catch(nt){d.error(nt)}finally{this.unsubscribe()}}:a.prototype._complete,et}return s.prototype.unsubscribe=function(){var d;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var c=this.closed;a.prototype.unsubscribe.call(this),!c&&((d=this.onFinalize)===null||d===void 0||d.call(this))}},s}(Subscriber$1);function audit$1(a){return operate(function(s,d){var c=!1,m=null,g=null,b=!1,k=function(){if(g==null||g.unsubscribe(),g=null,c){c=!1;var nt=m;m=null,d.next(nt)}b&&d.complete()},et=function(){g=null,b&&d.complete()};s.subscribe(createOperatorSubscriber(d,function(nt){c=!0,m=nt,g||innerFrom(a(nt)).subscribe(g=createOperatorSubscriber(d,k,et))},function(){b=!0,(!c||!g||g.closed)&&d.complete()}))})}var Action$1=function(a){__extends$1(s,a);function s(d,c){return a.call(this)||this}return s.prototype.schedule=function(d,c){return this},s}(Subscription$1),intervalProvider={setInterval:function(a,s){for(var d=[],c=2;c<arguments.length;c++)d[c-2]=arguments[c];var m=intervalProvider.delegate;return m!=null&&m.setInterval?m.setInterval.apply(m,__spreadArray([a,s],__read(d))):setInterval.apply(void 0,__spreadArray([a,s],__read(d)))},clearInterval:function(a){var s=intervalProvider.delegate;return((s==null?void 0:s.clearInterval)||clearInterval)(a)},delegate:void 0},AsyncAction$1=function(a){__extends$1(s,a);function s(d,c){var m=a.call(this,d,c)||this;return m.scheduler=d,m.work=c,m.pending=!1,m}return s.prototype.schedule=function(d,c){if(c===void 0&&(c=0),this.closed)return this;this.state=d;var m=this.id,g=this.scheduler;return m!=null&&(this.id=this.recycleAsyncId(g,m,c)),this.pending=!0,this.delay=c,this.id=this.id||this.requestAsyncId(g,this.id,c),this},s.prototype.requestAsyncId=function(d,c,m){return m===void 0&&(m=0),intervalProvider.setInterval(d.flush.bind(d,this),m)},s.prototype.recycleAsyncId=function(d,c,m){if(m===void 0&&(m=0),m!=null&&this.delay===m&&this.pending===!1)return c;intervalProvider.clearInterval(c)},s.prototype.execute=function(d,c){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var m=this._execute(d,c);if(m)return m;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},s.prototype._execute=function(d,c){var m=!1,g;try{this.work(d)}catch(b){m=!0,g=b||new Error("Scheduled action threw falsy error")}if(m)return this.unsubscribe(),g},s.prototype.unsubscribe=function(){if(!this.closed){var d=this,c=d.id,m=d.scheduler,g=m.actions;this.work=this.state=this.scheduler=null,this.pending=!1,arrRemove(g,this),c!=null&&(this.id=this.recycleAsyncId(m,c,null)),this.delay=null,a.prototype.unsubscribe.call(this)}},s}(Action$1),dateTimestampProvider={now:function(){return(dateTimestampProvider.delegate||Date).now()},delegate:void 0},Scheduler$1=function(){function a(s,d){d===void 0&&(d=a.now),this.schedulerActionCtor=s,this.now=d}return a.prototype.schedule=function(s,d,c){return d===void 0&&(d=0),new this.schedulerActionCtor(this,s).schedule(c,d)},a.now=dateTimestampProvider.now,a}(),AsyncScheduler$1=function(a){__extends$1(s,a);function s(d,c){c===void 0&&(c=Scheduler$1.now);var m=a.call(this,d,c)||this;return m.actions=[],m._active=!1,m._scheduled=void 0,m}return s.prototype.flush=function(d){var c=this.actions;if(this._active){c.push(d);return}var m;this._active=!0;do if(m=d.execute(d.state,d.delay))break;while(d=c.shift());if(this._active=!1,m){for(;d=c.shift();)d.unsubscribe();throw m}},s}(Scheduler$1),asyncScheduler$1=new AsyncScheduler$1(AsyncAction$1),async$1=asyncScheduler$1;function isScheduler$1(a){return a&&isFunction$2(a.schedule)}function isValidDate(a){return a instanceof Date&&!isNaN(a)}function timer$1(a,s,d){a===void 0&&(a=0),d===void 0&&(d=async$1);var c=-1;return s!=null&&(isScheduler$1(s)?d=s:c=s),new Observable$1(function(m){var g=isValidDate(a)?+a-d.now():a;g<0&&(g=0);var b=0;return d.schedule(function(){m.closed||(m.next(b++),0<=c?this.schedule(void 0,c):m.complete())},g)})}function auditTime$1(a,s){return s===void 0&&(s=asyncScheduler$1),audit$1(function(){return timer$1(a,s)})}function buffer$1(a){return operate(function(s,d){var c=[];return s.subscribe(createOperatorSubscriber(d,function(m){return c.push(m)},function(){d.next(c),d.complete()})),a.subscribe(createOperatorSubscriber(d,function(){var m=c;c=[],d.next(m)},noop$2)),function(){c=null}})}function bufferCount$1(a,s){return s===void 0&&(s=null),s=s!=null?s:a,operate(function(d,c){var m=[],g=0;d.subscribe(createOperatorSubscriber(c,function(b){var k,et,nt,it,ct=null;g++%s===0&&m.push([]);try{for(var st=__values(m),ut=st.next();!ut.done;ut=st.next()){var pt=ut.value;pt.push(b),a<=pt.length&&(ct=ct!=null?ct:[],ct.push(pt))}}catch(ht){k={error:ht}}finally{try{ut&&!ut.done&&(et=st.return)&&et.call(st)}finally{if(k)throw k.error}}if(ct)try{for(var St=__values(ct),_t=St.next();!_t.done;_t=St.next()){var pt=_t.value;arrRemove(m,pt),c.next(pt)}}catch(ht){nt={error:ht}}finally{try{_t&&!_t.done&&(it=St.return)&&it.call(St)}finally{if(nt)throw nt.error}}},function(){var b,k;try{for(var et=__values(m),nt=et.next();!nt.done;nt=et.next()){var it=nt.value;c.next(it)}}catch(ct){b={error:ct}}finally{try{nt&&!nt.done&&(k=et.return)&&k.call(et)}finally{if(b)throw b.error}}c.complete()},void 0,function(){m=null}))})}function last$2(a){return a[a.length-1]}function popResultSelector(a){return isFunction$2(last$2(a))?a.pop():void 0}function popScheduler(a){return isScheduler$1(last$2(a))?a.pop():void 0}function popNumber(a,s){return typeof last$2(a)=="number"?a.pop():s}function executeSchedule(a,s,d,c,m){c===void 0&&(c=0),m===void 0&&(m=!1);var g=s.schedule(function(){d(),m?a.add(this.schedule(null,c)):this.unsubscribe()},c);if(a.add(g),!m)return g}function bufferTime$1(a){for(var s,d,c=[],m=1;m<arguments.length;m++)c[m-1]=arguments[m];var g=(s=popScheduler(c))!==null&&s!==void 0?s:asyncScheduler$1,b=(d=c[0])!==null&&d!==void 0?d:null,k=c[1]||1/0;return operate(function(et,nt){var it=[],ct=!1,st=function(St){var _t=St.buffer,ht=St.subs;ht.unsubscribe(),arrRemove(it,St),nt.next(_t),ct&&ut()},ut=function(){if(it){var St=new Subscription$1;nt.add(St);var _t=[],ht={buffer:_t,subs:St};it.push(ht),executeSchedule(St,g,function(){return st(ht)},a)}};b!==null&&b>=0?executeSchedule(nt,g,ut,b,!0):ct=!0,ut();var pt=createOperatorSubscriber(nt,function(St){var _t,ht,_e=it.slice();try{for(var ot=__values(_e),lt=ot.next();!lt.done;lt=ot.next()){var Ot=lt.value,It=Ot.buffer;It.push(St),k<=It.length&&st(Ot)}}catch(Pt){_t={error:Pt}}finally{try{lt&&!lt.done&&(ht=ot.return)&&ht.call(ot)}finally{if(_t)throw _t.error}}},function(){for(;it!=null&&it.length;)nt.next(it.shift().buffer);pt==null||pt.unsubscribe(),nt.complete(),nt.unsubscribe()},void 0,function(){return it=null});et.subscribe(pt)})}function bufferToggle$1(a,s){return operate(function(d,c){var m=[];innerFrom(a).subscribe(createOperatorSubscriber(c,function(g){var b=[];m.push(b);var k=new Subscription$1,et=function(){arrRemove(m,b),c.next(b),k.unsubscribe()};k.add(innerFrom(s(g)).subscribe(createOperatorSubscriber(c,et,noop$2)))},noop$2)),d.subscribe(createOperatorSubscriber(c,function(g){var b,k;try{for(var et=__values(m),nt=et.next();!nt.done;nt=et.next()){var it=nt.value;it.push(g)}}catch(ct){b={error:ct}}finally{try{nt&&!nt.done&&(k=et.return)&&k.call(et)}finally{if(b)throw b.error}}},function(){for(;m.length>0;)c.next(m.shift());c.complete()}))})}function bufferWhen$1(a){return operate(function(s,d){var c=null,m=null,g=function(){m==null||m.unsubscribe();var b=c;c=[],b&&d.next(b),innerFrom(a()).subscribe(m=createOperatorSubscriber(d,g,noop$2))};g(),s.subscribe(createOperatorSubscriber(d,function(b){return c==null?void 0:c.push(b)},function(){c&&d.next(c),d.complete()},void 0,function(){return c=m=null}))})}function catchError$1(a){return operate(function(s,d){var c=null,m=!1,g;c=s.subscribe(createOperatorSubscriber(d,void 0,void 0,function(b){g=innerFrom(a(b,catchError$1(a)(s))),c?(c.unsubscribe(),c=null,g.subscribe(d)):m=!0})),m&&(c.unsubscribe(),c=null,g.subscribe(d))})}var isArray$5=Array.isArray,getPrototypeOf=Object.getPrototypeOf,objectProto=Object.prototype,getKeys=Object.keys;function argsArgArrayOrObject(a){if(a.length===1){var s=a[0];if(isArray$5(s))return{args:s,keys:null};if(isPOJO(s)){var d=getKeys(s);return{args:d.map(function(c){return s[c]}),keys:d}}}return{args:a,keys:null}}function isPOJO(a){return a&&typeof a=="object"&&getPrototypeOf(a)===objectProto}function observeOn$1(a,s){return s===void 0&&(s=0),operate(function(d,c){d.subscribe(createOperatorSubscriber(c,function(m){return executeSchedule(c,a,function(){return c.next(m)},s)},function(){return executeSchedule(c,a,function(){return c.complete()},s)},function(m){return executeSchedule(c,a,function(){return c.error(m)},s)}))})}function subscribeOn$1(a,s){return s===void 0&&(s=0),operate(function(d,c){c.add(a.schedule(function(){return d.subscribe(c)},s))})}function scheduleObservable$1(a,s){return innerFrom(a).pipe(subscribeOn$1(s),observeOn$1(s))}function schedulePromise$1(a,s){return innerFrom(a).pipe(subscribeOn$1(s),observeOn$1(s))}function scheduleArray$1(a,s){return new Observable$1(function(d){var c=0;return s.schedule(function(){c===a.length?d.complete():(d.next(a[c++]),d.closed||this.schedule())})})}function scheduleIterable$1(a,s){return new Observable$1(function(d){var c;return executeSchedule(d,s,function(){c=a[iterator$1](),executeSchedule(d,s,function(){var m,g,b;try{m=c.next(),g=m.value,b=m.done}catch(k){d.error(k);return}b?d.complete():d.next(g)},0,!0)}),function(){return isFunction$2(c==null?void 0:c.return)&&c.return()}})}function scheduleAsyncIterable(a,s){if(!a)throw new Error("Iterable cannot be null");return new Observable$1(function(d){executeSchedule(d,s,function(){var c=a[Symbol.asyncIterator]();executeSchedule(d,s,function(){c.next().then(function(m){m.done?d.complete():d.next(m.value)})},0,!0)})})}function scheduleReadableStreamLike(a,s){return scheduleAsyncIterable(readableStreamLikeToAsyncGenerator(a),s)}function scheduled$1(a,s){if(a!=null){if(isInteropObservable$1(a))return scheduleObservable$1(a,s);if(isArrayLike$1(a))return scheduleArray$1(a,s);if(isPromise$1(a))return schedulePromise$1(a,s);if(isAsyncIterable(a))return scheduleAsyncIterable(a,s);if(isIterable$1(a))return scheduleIterable$1(a,s);if(isReadableStreamLike(a))return scheduleReadableStreamLike(a,s)}throw createInvalidObservableTypeError(a)}function from$1(a,s){return s?scheduled$1(a,s):innerFrom(a)}function map$1(a,s){return operate(function(d,c){var m=0;d.subscribe(createOperatorSubscriber(c,function(g){c.next(a.call(s,g,m++))}))})}var isArray$4=Array.isArray;function callOrApply(a,s){return isArray$4(s)?a.apply(void 0,__spreadArray([],__read(s))):a(s)}function mapOneOrManyArgs(a){return map$1(function(s){return callOrApply(a,s)})}function createObject(a,s){return a.reduce(function(d,c,m){return d[c]=s[m],d},{})}function combineLatest$2(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];var d=popScheduler(a),c=popResultSelector(a),m=argsArgArrayOrObject(a),g=m.args,b=m.keys;if(g.length===0)return from$1([],d);var k=new Observable$1(combineLatestInit(g,d,b?function(et){return createObject(b,et)}:identity$1));return c?k.pipe(mapOneOrManyArgs(c)):k}function combineLatestInit(a,s,d){return d===void 0&&(d=identity$1),function(c){maybeSchedule(s,function(){for(var m=a.length,g=new Array(m),b=m,k=m,et=function(it){maybeSchedule(s,function(){var ct=from$1(a[it],s),st=!1;ct.subscribe(createOperatorSubscriber(c,function(ut){g[it]=ut,st||(st=!0,k--),k||c.next(d(g.slice()))},function(){--b||c.complete()}))},c)},nt=0;nt<m;nt++)et(nt)},c)}}function maybeSchedule(a,s,d){a?executeSchedule(d,a,s):s()}function mergeInternals(a,s,d,c,m,g,b,k){var et=[],nt=0,it=0,ct=!1,st=function(){ct&&!et.length&&!nt&&s.complete()},ut=function(St){return nt<c?pt(St):et.push(St)},pt=function(St){g&&s.next(St),nt++;var _t=!1;innerFrom(d(St,it++)).subscribe(createOperatorSubscriber(s,function(ht){m==null||m(ht),g?ut(ht):s.next(ht)},function(){_t=!0},void 0,function(){if(_t)try{nt--;for(var ht=function(){var _e=et.shift();b?executeSchedule(s,b,function(){return pt(_e)}):pt(_e)};et.length&&nt<c;)ht();st()}catch(_e){s.error(_e)}}))};return a.subscribe(createOperatorSubscriber(s,ut,function(){ct=!0,st()})),function(){k==null||k()}}function mergeMap$1(a,s,d){return d===void 0&&(d=1/0),isFunction$2(s)?mergeMap$1(function(c,m){return map$1(function(g,b){return s(c,g,m,b)})(innerFrom(a(c,m)))},d):(typeof s=="number"&&(d=s),operate(function(c,m){return mergeInternals(c,m,a,d)}))}function scanInternals(a,s,d,c,m){return function(g,b){var k=d,et=s,nt=0;g.subscribe(createOperatorSubscriber(b,function(it){var ct=nt++;et=k?a(et,it,ct):(k=!0,it),c&&b.next(et)},m&&function(){k&&b.next(et),b.complete()}))}}function reduce$1(a,s){return operate(scanInternals(a,s,arguments.length>=2,!1,!0))}var arrReducer=function(a,s){return a.push(s),a};function toArray$1(){return operate(function(a,s){reduce$1(arrReducer,[])(a).subscribe(s)})}function joinAllInternals(a,s){return pipe$1(toArray$1(),mergeMap$1(function(d){return a(d)}),s?mapOneOrManyArgs(s):identity$1)}function combineLatestAll(a){return joinAllInternals(combineLatest$2,a)}var combineAll$1=combineLatestAll,isArray$3=Array.isArray;function argsOrArgArray(a){return a.length===1&&isArray$3(a[0])?a[0]:a}function combineLatest$1(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];var d=popResultSelector(a);return d?pipe$1(combineLatest$1.apply(void 0,__spreadArray([],__read(a))),mapOneOrManyArgs(d)):operate(function(c,m){combineLatestInit(__spreadArray([c],__read(argsOrArgArray(a))))(m)})}function combineLatestWith(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];return combineLatest$1.apply(void 0,__spreadArray([],__read(a)))}function mergeAll$1(a){return a===void 0&&(a=1/0),mergeMap$1(identity$1,a)}function concatAll$1(){return mergeAll$1(1)}function concat$3(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];var d=popScheduler(a);return operate(function(c,m){concatAll$1()(from$1(__spreadArray([c],__read(a)),d)).subscribe(m)})}function concatMap$1(a,s){return isFunction$2(s)?mergeMap$1(a,s,1):mergeMap$1(a,1)}function concatMapTo$1(a,s){return isFunction$2(s)?concatMap$1(function(){return a},s):concatMap$1(function(){return a})}function concatWith(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];return concat$3.apply(void 0,__spreadArray([],__read(a)))}var ObjectUnsubscribedError$1=createErrorClass(function(a){return function(){a(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}}),Subject$1=function(a){__extends$1(s,a);function s(){var d=a.call(this)||this;return d.closed=!1,d.currentObservers=null,d.observers=[],d.isStopped=!1,d.hasError=!1,d.thrownError=null,d}return s.prototype.lift=function(d){var c=new AnonymousSubject$1(this,this);return c.operator=d,c},s.prototype._throwIfClosed=function(){if(this.closed)throw new ObjectUnsubscribedError$1},s.prototype.next=function(d){var c=this;errorContext(function(){var m,g;if(c._throwIfClosed(),!c.isStopped){c.currentObservers||(c.currentObservers=Array.from(c.observers));try{for(var b=__values(c.currentObservers),k=b.next();!k.done;k=b.next()){var et=k.value;et.next(d)}}catch(nt){m={error:nt}}finally{try{k&&!k.done&&(g=b.return)&&g.call(b)}finally{if(m)throw m.error}}}})},s.prototype.error=function(d){var c=this;errorContext(function(){if(c._throwIfClosed(),!c.isStopped){c.hasError=c.isStopped=!0,c.thrownError=d;for(var m=c.observers;m.length;)m.shift().error(d)}})},s.prototype.complete=function(){var d=this;errorContext(function(){if(d._throwIfClosed(),!d.isStopped){d.isStopped=!0;for(var c=d.observers;c.length;)c.shift().complete()}})},s.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(s.prototype,"observed",{get:function(){var d;return((d=this.observers)===null||d===void 0?void 0:d.length)>0},enumerable:!1,configurable:!0}),s.prototype._trySubscribe=function(d){return this._throwIfClosed(),a.prototype._trySubscribe.call(this,d)},s.prototype._subscribe=function(d){return this._throwIfClosed(),this._checkFinalizedStatuses(d),this._innerSubscribe(d)},s.prototype._innerSubscribe=function(d){var c=this,m=this,g=m.hasError,b=m.isStopped,k=m.observers;return g||b?EMPTY_SUBSCRIPTION:(this.currentObservers=null,k.push(d),new Subscription$1(function(){c.currentObservers=null,arrRemove(k,d)}))},s.prototype._checkFinalizedStatuses=function(d){var c=this,m=c.hasError,g=c.thrownError,b=c.isStopped;m?d.error(g):b&&d.complete()},s.prototype.asObservable=function(){var d=new Observable$1;return d.source=this,d},s.create=function(d,c){return new AnonymousSubject$1(d,c)},s}(Observable$1),AnonymousSubject$1=function(a){__extends$1(s,a);function s(d,c){var m=a.call(this)||this;return m.destination=d,m.source=c,m}return s.prototype.next=function(d){var c,m;(m=(c=this.destination)===null||c===void 0?void 0:c.next)===null||m===void 0||m.call(c,d)},s.prototype.error=function(d){var c,m;(m=(c=this.destination)===null||c===void 0?void 0:c.error)===null||m===void 0||m.call(c,d)},s.prototype.complete=function(){var d,c;(c=(d=this.destination)===null||d===void 0?void 0:d.complete)===null||c===void 0||c.call(d)},s.prototype._subscribe=function(d){var c,m;return(m=(c=this.source)===null||c===void 0?void 0:c.subscribe(d))!==null&&m!==void 0?m:EMPTY_SUBSCRIPTION},s}(Subject$1);function fromSubscribable(a){return new Observable$1(function(s){return a.subscribe(s)})}var DEFAULT_CONFIG={connector:function(){return new Subject$1}};function connect$1(a,s){s===void 0&&(s=DEFAULT_CONFIG);var d=s.connector;return operate(function(c,m){var g=d();from$1(a(fromSubscribable(g))).subscribe(m),m.add(c.subscribe(g))})}function count$1(a){return reduce$1(function(s,d,c){return!a||a(d,c)?s+1:s},0)}function debounce$1(a){return operate(function(s,d){var c=!1,m=null,g=null,b=function(){if(g==null||g.unsubscribe(),g=null,c){c=!1;var k=m;m=null,d.next(k)}};s.subscribe(createOperatorSubscriber(d,function(k){g==null||g.unsubscribe(),c=!0,m=k,g=createOperatorSubscriber(d,b,noop$2),innerFrom(a(k)).subscribe(g)},function(){b(),d.complete()},void 0,function(){m=g=null}))})}function debounceTime$1(a,s){return s===void 0&&(s=asyncScheduler$1),operate(function(d,c){var m=null,g=null,b=null,k=function(){if(m){m.unsubscribe(),m=null;var nt=g;g=null,c.next(nt)}};function et(){var nt=b+a,it=s.now();if(it<nt){m=this.schedule(void 0,nt-it),c.add(m);return}k()}d.subscribe(createOperatorSubscriber(c,function(nt){g=nt,b=s.now(),m||(m=s.schedule(et,a),c.add(m))},function(){k(),c.complete()},void 0,function(){g=m=null}))})}function defaultIfEmpty$1(a){return operate(function(s,d){var c=!1;s.subscribe(createOperatorSubscriber(d,function(m){c=!0,d.next(m)},function(){c||d.next(a),d.complete()}))})}function concat$2(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];return concatAll$1()(from$1(a,popScheduler(a)))}var EMPTY$1=new Observable$1(function(a){return a.complete()});function take$1(a){return a<=0?function(){return EMPTY$1}:operate(function(s,d){var c=0;s.subscribe(createOperatorSubscriber(d,function(m){++c<=a&&(d.next(m),a<=c&&d.complete())}))})}function ignoreElements$1(){return operate(function(a,s){a.subscribe(createOperatorSubscriber(s,noop$2))})}function mapTo$1(a){return map$1(function(){return a})}function delayWhen$1(a,s){return s?function(d){return concat$2(s.pipe(take$1(1),ignoreElements$1()),d.pipe(delayWhen$1(a)))}:mergeMap$1(function(d,c){return a(d,c).pipe(take$1(1),mapTo$1(d))})}function delay$1(a,s){s===void 0&&(s=asyncScheduler$1);var d=timer$1(a,s);return delayWhen$1(function(){return d})}function of$2(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];var d=popScheduler(a);return from$1(a,d)}function throwError$1(a,s){var d=isFunction$2(a)?a:function(){return a},c=function(m){return m.error(d())};return new Observable$1(s?function(m){return s.schedule(c,0,m)}:c)}var NotificationKind;(function(a){a.NEXT="N",a.ERROR="E",a.COMPLETE="C"})(NotificationKind||(NotificationKind={}));var Notification$1=function(){function a(s,d,c){this.kind=s,this.value=d,this.error=c,this.hasValue=s==="N"}return a.prototype.observe=function(s){return observeNotification(this,s)},a.prototype.do=function(s,d,c){var m=this,g=m.kind,b=m.value,k=m.error;return g==="N"?s==null?void 0:s(b):g==="E"?d==null?void 0:d(k):c==null?void 0:c()},a.prototype.accept=function(s,d,c){var m;return isFunction$2((m=s)===null||m===void 0?void 0:m.next)?this.observe(s):this.do(s,d,c)},a.prototype.toObservable=function(){var s=this,d=s.kind,c=s.value,m=s.error,g=d==="N"?of$2(c):d==="E"?throwError$1(function(){return m}):d==="C"?EMPTY$1:0;if(!g)throw new TypeError("Unexpected notification kind "+d);return g},a.createNext=function(s){return new a("N",s)},a.createError=function(s){return new a("E",void 0,s)},a.createComplete=function(){return a.completeNotification},a.completeNotification=new a("C"),a}();function observeNotification(a,s){var d,c,m,g=a,b=g.kind,k=g.value,et=g.error;if(typeof b!="string")throw new TypeError('Invalid notification, missing "kind"');b==="N"?(d=s.next)===null||d===void 0||d.call(s,k):b==="E"?(c=s.error)===null||c===void 0||c.call(s,et):(m=s.complete)===null||m===void 0||m.call(s)}function dematerialize$1(){return operate(function(a,s){a.subscribe(createOperatorSubscriber(s,function(d){return observeNotification(d,s)}))})}function distinct$1(a,s){return operate(function(d,c){var m=new Set;d.subscribe(createOperatorSubscriber(c,function(g){var b=a?a(g):g;m.has(b)||(m.add(b),c.next(g))})),s==null||s.subscribe(createOperatorSubscriber(c,function(){return m.clear()},noop$2))})}function distinctUntilChanged$1(a,s){return s===void 0&&(s=identity$1),a=a!=null?a:defaultCompare,operate(function(d,c){var m,g=!0;d.subscribe(createOperatorSubscriber(c,function(b){var k=s(b);(g||!a(m,k))&&(g=!1,m=k,c.next(b))}))})}function defaultCompare(a,s){return a===s}function distinctUntilKeyChanged$1(a,s){return distinctUntilChanged$1(function(d,c){return s?s(d[a],c[a]):d[a]===c[a]})}var ArgumentOutOfRangeError$1=createErrorClass(function(a){return function(){a(this),this.name="ArgumentOutOfRangeError",this.message="argument out of range"}});function filter$1(a,s){return operate(function(d,c){var m=0;d.subscribe(createOperatorSubscriber(c,function(g){return a.call(s,g,m++)&&c.next(g)}))})}var EmptyError$1=createErrorClass(function(a){return function(){a(this),this.name="EmptyError",this.message="no elements in sequence"}});function throwIfEmpty$1(a){return a===void 0&&(a=defaultErrorFactory$1),operate(function(s,d){var c=!1;s.subscribe(createOperatorSubscriber(d,function(m){c=!0,d.next(m)},function(){return c?d.complete():d.error(a())}))})}function defaultErrorFactory$1(){return new EmptyError$1}function elementAt$1(a,s){if(a<0)throw new ArgumentOutOfRangeError$1;var d=arguments.length>=2;return function(c){return c.pipe(filter$1(function(m,g){return g===a}),take$1(1),d?defaultIfEmpty$1(s):throwIfEmpty$1(function(){return new ArgumentOutOfRangeError$1}))}}function endWith$1(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];return function(d){return concat$2(d,of$2.apply(void 0,__spreadArray([],__read(a))))}}function every$1(a,s){return operate(function(d,c){var m=0;d.subscribe(createOperatorSubscriber(c,function(g){a.call(s,g,m++,d)||(c.next(!1),c.complete())},function(){c.next(!0),c.complete()}))})}function exhaustAll(){return operate(function(a,s){var d=!1,c=null;a.subscribe(createOperatorSubscriber(s,function(m){c||(c=innerFrom(m).subscribe(createOperatorSubscriber(s,void 0,function(){c=null,d&&s.complete()})))},function(){d=!0,!c&&s.complete()}))})}var exhaust$1=exhaustAll;function exhaustMap$1(a,s){return s?function(d){return d.pipe(exhaustMap$1(function(c,m){return innerFrom(a(c,m)).pipe(map$1(function(g,b){return s(c,g,m,b)}))}))}:operate(function(d,c){var m=0,g=null,b=!1;d.subscribe(createOperatorSubscriber(c,function(k){g||(g=createOperatorSubscriber(c,void 0,function(){g=null,b&&c.complete()}),innerFrom(a(k,m++)).subscribe(g))},function(){b=!0,!g&&c.complete()}))})}function expand$1(a,s,d){return s===void 0&&(s=1/0),s=(s||0)<1?1/0:s,operate(function(c,m){return mergeInternals(c,m,a,s,void 0,!0,d)})}function finalize$1(a){return operate(function(s,d){try{s.subscribe(d)}finally{d.add(a)}})}function find$2(a,s){return operate(createFind(a,s,"value"))}function createFind(a,s,d){var c=d==="index";return function(m,g){var b=0;m.subscribe(createOperatorSubscriber(g,function(k){var et=b++;a.call(s,k,et,m)&&(g.next(c?et:k),g.complete())},function(){g.next(c?-1:void 0),g.complete()}))}}function findIndex$1(a,s){return operate(createFind(a,s,"index"))}function first$1(a,s){var d=arguments.length>=2;return function(c){return c.pipe(a?filter$1(function(m,g){return a(m,g,c)}):identity$1,take$1(1),d?defaultIfEmpty$1(s):throwIfEmpty$1(function(){return new EmptyError$1}))}}function groupBy$1(a,s,d,c){return operate(function(m,g){var b;!s||typeof s=="function"?b=s:(d=s.duration,b=s.element,c=s.connector);var k=new Map,et=function(pt){k.forEach(pt),pt(g)},nt=function(pt){return et(function(St){return St.error(pt)})},it=0,ct=!1,st=new OperatorSubscriber(g,function(pt){try{var St=a(pt),_t=k.get(St);if(!_t){k.set(St,_t=c?c():new Subject$1);var ht=ut(St,_t);if(g.next(ht),d){var _e=createOperatorSubscriber(_t,function(){_t.complete(),_e==null||_e.unsubscribe()},void 0,void 0,function(){return k.delete(St)});st.add(innerFrom(d(ht)).subscribe(_e))}}_t.next(b?b(pt):pt)}catch(ot){nt(ot)}},function(){return et(function(pt){return pt.complete()})},nt,function(){return k.clear()},function(){return ct=!0,it===0});m.subscribe(st);function ut(pt,St){var _t=new Observable$1(function(ht){it++;var _e=St.subscribe(ht);return function(){_e.unsubscribe(),--it===0&&ct&&st.unsubscribe()}});return _t.key=pt,_t}})}function isEmpty$1(){return operate(function(a,s){a.subscribe(createOperatorSubscriber(s,function(){s.next(!1),s.complete()},function(){s.next(!0),s.complete()}))})}function takeLast$1(a){return a<=0?function(){return EMPTY$1}:operate(function(s,d){var c=[];s.subscribe(createOperatorSubscriber(d,function(m){c.push(m),a<c.length&&c.shift()},function(){var m,g;try{for(var b=__values(c),k=b.next();!k.done;k=b.next()){var et=k.value;d.next(et)}}catch(nt){m={error:nt}}finally{try{k&&!k.done&&(g=b.return)&&g.call(b)}finally{if(m)throw m.error}}d.complete()},void 0,function(){c=null}))})}function last$1(a,s){var d=arguments.length>=2;return function(c){return c.pipe(a?filter$1(function(m,g){return a(m,g,c)}):identity$1,takeLast$1(1),d?defaultIfEmpty$1(s):throwIfEmpty$1(function(){return new EmptyError$1}))}}function materialize$1(){return operate(function(a,s){a.subscribe(createOperatorSubscriber(s,function(d){s.next(Notification$1.createNext(d))},function(){s.next(Notification$1.createComplete()),s.complete()},function(d){s.next(Notification$1.createError(d)),s.complete()}))})}function max$1(a){return reduce$1(isFunction$2(a)?function(s,d){return a(s,d)>0?s:d}:function(s,d){return s>d?s:d})}function merge$3(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];var d=popScheduler(a),c=popNumber(a,1/0);return a=argsOrArgArray(a),operate(function(m,g){mergeAll$1(c)(from$1(__spreadArray([m],__read(a)),d)).subscribe(g)})}var flatMap$1=mergeMap$1;function mergeMapTo$1(a,s,d){return d===void 0&&(d=1/0),isFunction$2(s)?mergeMap$1(function(){return a},s,d):(typeof s=="number"&&(d=s),mergeMap$1(function(){return a},d))}function mergeScan$1(a,s,d){return d===void 0&&(d=1/0),operate(function(c,m){var g=s;return mergeInternals(c,m,function(b,k){return a(g,b,k)},d,function(b){g=b},!1,void 0,function(){return g=null})})}function mergeWith(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];return merge$3.apply(void 0,__spreadArray([],__read(a)))}function min$1(a){return reduce$1(isFunction$2(a)?function(s,d){return a(s,d)<0?s:d}:function(s,d){return s<d?s:d})}function refCount$1(){return operate(function(a,s){var d=null;a._refCount++;var c=createOperatorSubscriber(s,void 0,void 0,void 0,function(){if(!a||a._refCount<=0||0<--a._refCount){d=null;return}var m=a._connection,g=d;d=null,m&&(!g||m===g)&&m.unsubscribe(),s.unsubscribe()});a.subscribe(c),c.closed||(d=a.connect())})}var ConnectableObservable$1=function(a){__extends$1(s,a);function s(d,c){var m=a.call(this)||this;return m.source=d,m.subjectFactory=c,m._subject=null,m._refCount=0,m._connection=null,hasLift(d)&&(m.lift=d.lift),m}return s.prototype._subscribe=function(d){return this.getSubject().subscribe(d)},s.prototype.getSubject=function(){var d=this._subject;return(!d||d.isStopped)&&(this._subject=this.subjectFactory()),this._subject},s.prototype._teardown=function(){this._refCount=0;var d=this._connection;this._subject=this._connection=null,d==null||d.unsubscribe()},s.prototype.connect=function(){var d=this,c=this._connection;if(!c){c=this._connection=new Subscription$1;var m=this.getSubject();c.add(this.source.subscribe(createOperatorSubscriber(m,void 0,function(){d._teardown(),m.complete()},function(g){d._teardown(),m.error(g)},function(){return d._teardown()}))),c.closed&&(this._connection=null,c=Subscription$1.EMPTY)}return c},s.prototype.refCount=function(){return refCount$1()(this)},s}(Observable$1);function multicast$1(a,s){var d=isFunction$2(a)?a:function(){return a};return isFunction$2(s)?connect$1(s,{connector:d}):function(c){return new ConnectableObservable$1(c,d)}}function onErrorResumeNext$1(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];var d=argsOrArgArray(a);return operate(function(c,m){var g=__spreadArray([c],__read(d)),b=function(){if(!m.closed)if(g.length>0){var k=void 0;try{k=innerFrom(g.shift())}catch{b();return}var et=createOperatorSubscriber(m,void 0,noop$2,noop$2);k.subscribe(et),et.add(b)}else m.complete()};b()})}function pairwise$1(){return operate(function(a,s){var d,c=!1;a.subscribe(createOperatorSubscriber(s,function(m){var g=d;d=m,c&&s.next([g,m]),c=!0}))})}function not$1(a,s){return function(d,c){return!a.call(s,d,c)}}function partition$1(a,s){return function(d){return[filter$1(a,s)(d),filter$1(not$1(a,s))(d)]}}function pluck$1(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];var d=a.length;if(d===0)throw new Error("list of properties cannot be empty.");return map$1(function(c){for(var m=c,g=0;g<d;g++){var b=m==null?void 0:m[a[g]];if(typeof b!="undefined")m=b;else return}return m})}function publish$1(a){return a?function(s){return connect$1(a)(s)}:function(s){return multicast$1(new Subject$1)(s)}}var BehaviorSubject$1=function(a){__extends$1(s,a);function s(d){var c=a.call(this)||this;return c._value=d,c}return Object.defineProperty(s.prototype,"value",{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),s.prototype._subscribe=function(d){var c=a.prototype._subscribe.call(this,d);return!c.closed&&d.next(this._value),c},s.prototype.getValue=function(){var d=this,c=d.hasError,m=d.thrownError,g=d._value;if(c)throw m;return this._throwIfClosed(),g},s.prototype.next=function(d){a.prototype.next.call(this,this._value=d)},s}(Subject$1);function publishBehavior$1(a){return function(s){var d=new BehaviorSubject$1(a);return new ConnectableObservable$1(s,function(){return d})}}var AsyncSubject$1=function(a){__extends$1(s,a);function s(){var d=a!==null&&a.apply(this,arguments)||this;return d._value=null,d._hasValue=!1,d._isComplete=!1,d}return s.prototype._checkFinalizedStatuses=function(d){var c=this,m=c.hasError,g=c._hasValue,b=c._value,k=c.thrownError,et=c.isStopped,nt=c._isComplete;m?d.error(k):(et||nt)&&(g&&d.next(b),d.complete())},s.prototype.next=function(d){this.isStopped||(this._value=d,this._hasValue=!0)},s.prototype.complete=function(){var d=this,c=d._hasValue,m=d._value,g=d._isComplete;g||(this._isComplete=!0,c&&a.prototype.next.call(this,m),a.prototype.complete.call(this))},s}(Subject$1);function publishLast$1(){return function(a){var s=new AsyncSubject$1;return new ConnectableObservable$1(a,function(){return s})}}var ReplaySubject$1=function(a){__extends$1(s,a);function s(d,c,m){d===void 0&&(d=1/0),c===void 0&&(c=1/0),m===void 0&&(m=dateTimestampProvider);var g=a.call(this)||this;return g._bufferSize=d,g._windowTime=c,g._timestampProvider=m,g._buffer=[],g._infiniteTimeWindow=!0,g._infiniteTimeWindow=c===1/0,g._bufferSize=Math.max(1,d),g._windowTime=Math.max(1,c),g}return s.prototype.next=function(d){var c=this,m=c.isStopped,g=c._buffer,b=c._infiniteTimeWindow,k=c._timestampProvider,et=c._windowTime;m||(g.push(d),!b&&g.push(k.now()+et)),this._trimBuffer(),a.prototype.next.call(this,d)},s.prototype._subscribe=function(d){this._throwIfClosed(),this._trimBuffer();for(var c=this._innerSubscribe(d),m=this,g=m._infiniteTimeWindow,b=m._buffer,k=b.slice(),et=0;et<k.length&&!d.closed;et+=g?1:2)d.next(k[et]);return this._checkFinalizedStatuses(d),c},s.prototype._trimBuffer=function(){var d=this,c=d._bufferSize,m=d._timestampProvider,g=d._buffer,b=d._infiniteTimeWindow,k=(b?1:2)*c;if(c<1/0&&k<g.length&&g.splice(0,g.length-k),!b){for(var et=m.now(),nt=0,it=1;it<g.length&&g[it]<=et;it+=2)nt=it;nt&&g.splice(0,nt+1)}},s}(Subject$1);function publishReplay$1(a,s,d,c){d&&!isFunction$2(d)&&(c=d);var m=isFunction$2(d)?d:void 0;return function(g){return multicast$1(new ReplaySubject$1(a,s,c),m)(g)}}function raceInit(a){return function(s){for(var d=[],c=function(g){d.push(innerFrom(a[g]).subscribe(createOperatorSubscriber(s,function(b){if(d){for(var k=0;k<d.length;k++)k!==g&&d[k].unsubscribe();d=null}s.next(b)})))},m=0;d&&!s.closed&&m<a.length;m++)c(m)}}function raceWith(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];return a.length?operate(function(d,c){raceInit(__spreadArray([d],__read(a)))(c)}):identity$1}function race$2(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];return raceWith.apply(void 0,__spreadArray([],__read(argsOrArgArray(a))))}function repeat$1(a){var s,d=1/0,c;return a!=null&&(typeof a=="object"?(s=a.count,d=s===void 0?1/0:s,c=a.delay):d=a),d<=0?function(){return EMPTY$1}:operate(function(m,g){var b=0,k,et=function(){if(k==null||k.unsubscribe(),k=null,c!=null){var it=typeof c=="number"?timer$1(c):innerFrom(c(b)),ct=createOperatorSubscriber(g,function(){ct.unsubscribe(),nt()});it.subscribe(ct)}else nt()},nt=function(){var it=!1;k=m.subscribe(createOperatorSubscriber(g,void 0,function(){++b<d?k?et():it=!0:g.complete()})),it&&et()};nt()})}function repeatWhen$1(a){return operate(function(s,d){var c,m=!1,g,b=!1,k=!1,et=function(){return k&&b&&(d.complete(),!0)},nt=function(){return g||(g=new Subject$1,a(g).subscribe(createOperatorSubscriber(d,function(){c?it():m=!0},function(){b=!0,et()}))),g},it=function(){k=!1,c=s.subscribe(createOperatorSubscriber(d,void 0,function(){k=!0,!et()&&nt().next()})),m&&(c.unsubscribe(),c=null,m=!1,it())};it()})}function retry$1(a){a===void 0&&(a=1/0);var s;a&&typeof a=="object"?s=a:s={count:a};var d=s.count,c=d===void 0?1/0:d,m=s.delay,g=s.resetOnSuccess,b=g===void 0?!1:g;return c<=0?identity$1:operate(function(k,et){var nt=0,it,ct=function(){var st=!1;it=k.subscribe(createOperatorSubscriber(et,function(ut){b&&(nt=0),et.next(ut)},void 0,function(ut){if(nt++<c){var pt=function(){it?(it.unsubscribe(),it=null,ct()):st=!0};if(m!=null){var St=typeof m=="number"?timer$1(m):innerFrom(m(ut,nt)),_t=createOperatorSubscriber(et,function(){_t.unsubscribe(),pt()},function(){et.complete()});St.subscribe(_t)}else pt()}else et.error(ut)})),st&&(it.unsubscribe(),it=null,ct())};ct()})}function retryWhen$1(a){return operate(function(s,d){var c,m=!1,g,b=function(){c=s.subscribe(createOperatorSubscriber(d,void 0,void 0,function(k){g||(g=new Subject$1,a(g).subscribe(createOperatorSubscriber(d,function(){return c?b():m=!0}))),g&&g.next(k)})),m&&(c.unsubscribe(),c=null,m=!1,b())};b()})}function sample$1(a){return operate(function(s,d){var c=!1,m=null;s.subscribe(createOperatorSubscriber(d,function(g){c=!0,m=g})),a.subscribe(createOperatorSubscriber(d,function(){if(c){c=!1;var g=m;m=null,d.next(g)}},noop$2))})}function interval(a,s){return a===void 0&&(a=0),s===void 0&&(s=asyncScheduler$1),a<0&&(a=0),timer$1(a,a,s)}function sampleTime$1(a,s){return s===void 0&&(s=asyncScheduler$1),sample$1(interval(a,s))}function scan$1(a,s){return operate(scanInternals(a,s,arguments.length>=2,!0))}function sequenceEqual$1(a,s){return s===void 0&&(s=function(d,c){return d===c}),operate(function(d,c){var m=createState(),g=createState(),b=function(et){c.next(et),c.complete()},k=function(et,nt){var it=createOperatorSubscriber(c,function(ct){var st=nt.buffer,ut=nt.complete;st.length===0?ut?b(!1):et.buffer.push(ct):!s(ct,st.shift())&&b(!1)},function(){et.complete=!0;var ct=nt.complete,st=nt.buffer;ct&&b(st.length===0),it==null||it.unsubscribe()});return it};d.subscribe(k(m,g)),a.subscribe(k(g,m))})}function createState(){return{buffer:[],complete:!1}}function share$1(a){a===void 0&&(a={});var s=a.connector,d=s===void 0?function(){return new Subject$1}:s,c=a.resetOnError,m=c===void 0?!0:c,g=a.resetOnComplete,b=g===void 0?!0:g,k=a.resetOnRefCountZero,et=k===void 0?!0:k;return function(nt){var it=null,ct=null,st=null,ut=0,pt=!1,St=!1,_t=function(){ct==null||ct.unsubscribe(),ct=null},ht=function(){_t(),it=st=null,pt=St=!1},_e=function(){var ot=it;ht(),ot==null||ot.unsubscribe()};return operate(function(ot,lt){ut++,!St&&!pt&&_t();var Ot=st=st!=null?st:d();lt.add(function(){ut--,ut===0&&!St&&!pt&&(ct=handleReset(_e,et))}),Ot.subscribe(lt),it||(it=new SafeSubscriber$1({next:function(It){return Ot.next(It)},error:function(It){St=!0,_t(),ct=handleReset(ht,m,It),Ot.error(It)},complete:function(){pt=!0,_t(),ct=handleReset(ht,b),Ot.complete()}}),from$1(ot).subscribe(it))})(nt)}}function handleReset(a,s){for(var d=[],c=2;c<arguments.length;c++)d[c-2]=arguments[c];return s===!0?(a(),null):s===!1?null:s.apply(void 0,__spreadArray([],__read(d))).pipe(take$1(1)).subscribe(function(){return a()})}function shareReplay$1(a,s,d){var c,m,g,b,k=!1;return a&&typeof a=="object"?(c=a.bufferSize,b=c===void 0?1/0:c,m=a.windowTime,s=m===void 0?1/0:m,g=a.refCount,k=g===void 0?!1:g,d=a.scheduler):b=a!=null?a:1/0,share$1({connector:function(){return new ReplaySubject$1(b,s,d)},resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:k})}var SequenceError=createErrorClass(function(a){return function(d){a(this),this.name="SequenceError",this.message=d}}),NotFoundError=createErrorClass(function(a){return function(d){a(this),this.name="NotFoundError",this.message=d}});function single$1(a){return operate(function(s,d){var c=!1,m,g=!1,b=0;s.subscribe(createOperatorSubscriber(d,function(k){g=!0,(!a||a(k,b++,s))&&(c&&d.error(new SequenceError("Too many matching values")),c=!0,m=k)},function(){c?(d.next(m),d.complete()):d.error(g?new NotFoundError("No matching values"):new EmptyError$1)}))})}function skip$1(a){return filter$1(function(s,d){return a<=d})}function skipLast$1(a){return a<=0?identity$1:operate(function(s,d){var c=new Array(a),m=0;return s.subscribe(createOperatorSubscriber(d,function(g){var b=m++;if(b<a)c[b]=g;else{var k=b%a,et=c[k];c[k]=g,d.next(et)}})),function(){c=null}})}function skipUntil$1(a){return operate(function(s,d){var c=!1,m=createOperatorSubscriber(d,function(){m==null||m.unsubscribe(),c=!0},noop$2);innerFrom(a).subscribe(m),s.subscribe(createOperatorSubscriber(d,function(g){return c&&d.next(g)}))})}function skipWhile$1(a){return operate(function(s,d){var c=!1,m=0;s.subscribe(createOperatorSubscriber(d,function(g){return(c||(c=!a(g,m++)))&&d.next(g)}))})}function startWith$1(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];var d=popScheduler(a);return operate(function(c,m){(d?concat$2(a,c,d):concat$2(a,c)).subscribe(m)})}function switchMap$1(a,s){return operate(function(d,c){var m=null,g=0,b=!1,k=function(){return b&&!m&&c.complete()};d.subscribe(createOperatorSubscriber(c,function(et){m==null||m.unsubscribe();var nt=0,it=g++;innerFrom(a(et,it)).subscribe(m=createOperatorSubscriber(c,function(ct){return c.next(s?s(et,ct,it,nt++):ct)},function(){m=null,k()}))},function(){b=!0,k()}))})}function switchAll$1(){return switchMap$1(identity$1)}function switchMapTo$1(a,s){return isFunction$2(s)?switchMap$1(function(){return a},s):switchMap$1(function(){return a})}function switchScan(a,s){return operate(function(d,c){var m=s;return switchMap$1(function(g,b){return a(m,g,b)},function(g,b){return m=b,b})(d).subscribe(c),function(){m=null}})}function takeUntil$1(a){return operate(function(s,d){innerFrom(a).subscribe(createOperatorSubscriber(d,function(){return d.complete()},noop$2)),!d.closed&&s.subscribe(d)})}function takeWhile$1(a,s){return s===void 0&&(s=!1),operate(function(d,c){var m=0;d.subscribe(createOperatorSubscriber(c,function(g){var b=a(g,m++);(b||s)&&c.next(g),!b&&c.complete()}))})}function tap$1(a,s,d){var c=isFunction$2(a)||s||d?{next:a,error:s,complete:d}:a;return c?operate(function(m,g){var b;(b=c.subscribe)===null||b===void 0||b.call(c);var k=!0;m.subscribe(createOperatorSubscriber(g,function(et){var nt;(nt=c.next)===null||nt===void 0||nt.call(c,et),g.next(et)},function(){var et;k=!1,(et=c.complete)===null||et===void 0||et.call(c),g.complete()},function(et){var nt;k=!1,(nt=c.error)===null||nt===void 0||nt.call(c,et),g.error(et)},function(){var et,nt;k&&((et=c.unsubscribe)===null||et===void 0||et.call(c)),(nt=c.finalize)===null||nt===void 0||nt.call(c)}))}):identity$1}var defaultThrottleConfig$1={leading:!0,trailing:!1};function throttle$1(a,s){return s===void 0&&(s=defaultThrottleConfig$1),operate(function(d,c){var m=s.leading,g=s.trailing,b=!1,k=null,et=null,nt=!1,it=function(){et==null||et.unsubscribe(),et=null,g&&(ut(),nt&&c.complete())},ct=function(){et=null,nt&&c.complete()},st=function(pt){return et=innerFrom(a(pt)).subscribe(createOperatorSubscriber(c,it,ct))},ut=function(){if(b){b=!1;var pt=k;k=null,c.next(pt),!nt&&st(pt)}};d.subscribe(createOperatorSubscriber(c,function(pt){b=!0,k=pt,!(et&&!et.closed)&&(m?ut():st(pt))},function(){nt=!0,!(g&&b&&et&&!et.closed)&&c.complete()}))})}function throttleTime$1(a,s,d){s===void 0&&(s=asyncScheduler$1),d===void 0&&(d=defaultThrottleConfig$1);var c=timer$1(a,s);return throttle$1(function(){return c},d)}function timeInterval$1(a){return a===void 0&&(a=asyncScheduler$1),operate(function(s,d){var c=a.now();s.subscribe(createOperatorSubscriber(d,function(m){var g=a.now(),b=g-c;c=g,d.next(new TimeInterval$1(m,b))}))})}var TimeInterval$1=function(){function a(s,d){this.value=s,this.interval=d}return a}(),TimeoutError$1=createErrorClass(function(a){return function(d){d===void 0&&(d=null),a(this),this.message="Timeout has occurred",this.name="TimeoutError",this.info=d}});function timeout$1(a,s){var d=isValidDate(a)?{first:a}:typeof a=="number"?{each:a}:a,c=d.first,m=d.each,g=d.with,b=g===void 0?timeoutErrorFactory:g,k=d.scheduler,et=k===void 0?s!=null?s:asyncScheduler$1:k,nt=d.meta,it=nt===void 0?null:nt;if(c==null&&m==null)throw new TypeError("No timeout provided.");return operate(function(ct,st){var ut,pt,St=null,_t=0,ht=function(_e){pt=executeSchedule(st,et,function(){try{ut.unsubscribe(),innerFrom(b({meta:it,lastValue:St,seen:_t})).subscribe(st)}catch(ot){st.error(ot)}},_e)};ut=ct.subscribe(createOperatorSubscriber(st,function(_e){pt==null||pt.unsubscribe(),_t++,st.next(St=_e),m>0&&ht(m)},void 0,void 0,function(){pt!=null&&pt.closed||pt==null||pt.unsubscribe(),St=null})),!_t&&ht(c!=null?typeof c=="number"?c:+c-et.now():m)})}function timeoutErrorFactory(a){throw new TimeoutError$1(a)}function timeoutWith$1(a,s,d){var c,m,g;if(d=d!=null?d:async$1,isValidDate(a)?c=a:typeof a=="number"&&(m=a),s)g=function(){return s};else throw new TypeError("No observable provided to switch to");if(c==null&&m==null)throw new TypeError("No timeout provided.");return timeout$1({first:c,each:m,scheduler:d,with:g})}function timestamp$2(a){return a===void 0&&(a=dateTimestampProvider),map$1(function(s){return{value:s,timestamp:a.now()}})}function window$2(a){return operate(function(s,d){var c=new Subject$1;d.next(c.asObservable());var m=function(g){c.error(g),d.error(g)};return s.subscribe(createOperatorSubscriber(d,function(g){return c==null?void 0:c.next(g)},function(){c.complete(),d.complete()},m)),a.subscribe(createOperatorSubscriber(d,function(){c.complete(),d.next(c=new Subject$1)},noop$2,m)),function(){c==null||c.unsubscribe(),c=null}})}function windowCount$1(a,s){s===void 0&&(s=0);var d=s>0?s:a;return operate(function(c,m){var g=[new Subject$1],b=[],k=0;m.next(g[0].asObservable()),c.subscribe(createOperatorSubscriber(m,function(et){var nt,it;try{for(var ct=__values(g),st=ct.next();!st.done;st=ct.next()){var ut=st.value;ut.next(et)}}catch(_t){nt={error:_t}}finally{try{st&&!st.done&&(it=ct.return)&&it.call(ct)}finally{if(nt)throw nt.error}}var pt=k-a+1;if(pt>=0&&pt%d===0&&g.shift().complete(),++k%d===0){var St=new Subject$1;g.push(St),m.next(St.asObservable())}},function(){for(;g.length>0;)g.shift().complete();m.complete()},function(et){for(;g.length>0;)g.shift().error(et);m.error(et)},function(){b=null,g=null}))})}function windowTime$1(a){for(var s,d,c=[],m=1;m<arguments.length;m++)c[m-1]=arguments[m];var g=(s=popScheduler(c))!==null&&s!==void 0?s:asyncScheduler$1,b=(d=c[0])!==null&&d!==void 0?d:null,k=c[1]||1/0;return operate(function(et,nt){var it=[],ct=!1,st=function(_t){var ht=_t.window,_e=_t.subs;ht.complete(),_e.unsubscribe(),arrRemove(it,_t),ct&&ut()},ut=function(){if(it){var _t=new Subscription$1;nt.add(_t);var ht=new Subject$1,_e={window:ht,subs:_t,seen:0};it.push(_e),nt.next(ht.asObservable()),executeSchedule(_t,g,function(){return st(_e)},a)}};b!==null&&b>=0?executeSchedule(nt,g,ut,b,!0):ct=!0,ut();var pt=function(_t){return it.slice().forEach(_t)},St=function(_t){pt(function(ht){var _e=ht.window;return _t(_e)}),_t(nt),nt.unsubscribe()};return et.subscribe(createOperatorSubscriber(nt,function(_t){pt(function(ht){ht.window.next(_t),k<=++ht.seen&&st(ht)})},function(){return St(function(_t){return _t.complete()})},function(_t){return St(function(ht){return ht.error(_t)})})),function(){it=null}})}function windowToggle$1(a,s){return operate(function(d,c){var m=[],g=function(b){for(;0<m.length;)m.shift().error(b);c.error(b)};innerFrom(a).subscribe(createOperatorSubscriber(c,function(b){var k=new Subject$1;m.push(k);var et=new Subscription$1,nt=function(){arrRemove(m,k),k.complete(),et.unsubscribe()},it;try{it=innerFrom(s(b))}catch(ct){g(ct);return}c.next(k.asObservable()),et.add(it.subscribe(createOperatorSubscriber(c,nt,noop$2,g)))},noop$2)),d.subscribe(createOperatorSubscriber(c,function(b){var k,et,nt=m.slice();try{for(var it=__values(nt),ct=it.next();!ct.done;ct=it.next()){var st=ct.value;st.next(b)}}catch(ut){k={error:ut}}finally{try{ct&&!ct.done&&(et=it.return)&&et.call(it)}finally{if(k)throw k.error}}},function(){for(;0<m.length;)m.shift().complete();c.complete()},g,function(){for(;0<m.length;)m.shift().unsubscribe()}))})}function windowWhen$1(a){return operate(function(s,d){var c,m,g=function(k){c.error(k),d.error(k)},b=function(){m==null||m.unsubscribe(),c==null||c.complete(),c=new Subject$1,d.next(c.asObservable());var k;try{k=innerFrom(a())}catch(et){g(et);return}k.subscribe(m=createOperatorSubscriber(d,b,b,g))};b(),s.subscribe(createOperatorSubscriber(d,function(k){return c.next(k)},function(){c.complete(),d.complete()},g,function(){m==null||m.unsubscribe(),c=null}))})}function withLatestFrom$1(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];var d=popResultSelector(a);return operate(function(c,m){for(var g=a.length,b=new Array(g),k=a.map(function(){return!1}),et=!1,nt=function(ct){innerFrom(a[ct]).subscribe(createOperatorSubscriber(m,function(st){b[ct]=st,!et&&!k[ct]&&(k[ct]=!0,(et=k.every(identity$1))&&(k=null))},noop$2))},it=0;it<g;it++)nt(it);c.subscribe(createOperatorSubscriber(m,function(ct){if(et){var st=__spreadArray([ct],__read(b));m.next(d?d.apply(void 0,__spreadArray([],__read(st))):st)}}))})}function zip$3(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];var d=popResultSelector(a),c=argsOrArgArray(a);return c.length?new Observable$1(function(m){var g=c.map(function(){return[]}),b=c.map(function(){return!1});m.add(function(){g=b=null});for(var k=function(nt){innerFrom(c[nt]).subscribe(createOperatorSubscriber(m,function(it){if(g[nt].push(it),g.every(function(st){return st.length})){var ct=g.map(function(st){return st.shift()});m.next(d?d.apply(void 0,__spreadArray([],__read(ct))):ct),g.some(function(st,ut){return!st.length&&b[ut]})&&m.complete()}},function(){b[nt]=!0,!g[nt].length&&m.complete()}))},et=0;!m.closed&&et<c.length;et++)k(et);return function(){g=b=null}}):EMPTY$1}function zip$2(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];return operate(function(d,c){zip$3.apply(void 0,__spreadArray([d],__read(a))).subscribe(c)})}function zipAll$1(a){return joinAllInternals(zip$3,a)}function zipWith(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];return zip$2.apply(void 0,__spreadArray([],__read(a)))}var operators$1=Object.freeze(Object.defineProperty({__proto__:null,audit:audit$1,auditTime:auditTime$1,buffer:buffer$1,bufferCount:bufferCount$1,bufferTime:bufferTime$1,bufferToggle:bufferToggle$1,bufferWhen:bufferWhen$1,catchError:catchError$1,combineAll:combineAll$1,combineLatestAll,combineLatest:combineLatest$1,combineLatestWith,concat:concat$3,concatAll:concatAll$1,concatMap:concatMap$1,concatMapTo:concatMapTo$1,concatWith,connect:connect$1,count:count$1,debounce:debounce$1,debounceTime:debounceTime$1,defaultIfEmpty:defaultIfEmpty$1,delay:delay$1,delayWhen:delayWhen$1,dematerialize:dematerialize$1,distinct:distinct$1,distinctUntilChanged:distinctUntilChanged$1,distinctUntilKeyChanged:distinctUntilKeyChanged$1,elementAt:elementAt$1,endWith:endWith$1,every:every$1,exhaust:exhaust$1,exhaustAll,exhaustMap:exhaustMap$1,expand:expand$1,filter:filter$1,finalize:finalize$1,find:find$2,findIndex:findIndex$1,first:first$1,groupBy:groupBy$1,ignoreElements:ignoreElements$1,isEmpty:isEmpty$1,last:last$1,map:map$1,mapTo:mapTo$1,materialize:materialize$1,max:max$1,merge:merge$3,mergeAll:mergeAll$1,flatMap:flatMap$1,mergeMap:mergeMap$1,mergeMapTo:mergeMapTo$1,mergeScan:mergeScan$1,mergeWith,min:min$1,multicast:multicast$1,observeOn:observeOn$1,onErrorResumeNext:onErrorResumeNext$1,pairwise:pairwise$1,partition:partition$1,pluck:pluck$1,publish:publish$1,publishBehavior:publishBehavior$1,publishLast:publishLast$1,publishReplay:publishReplay$1,race:race$2,raceWith,reduce:reduce$1,repeat:repeat$1,repeatWhen:repeatWhen$1,retry:retry$1,retryWhen:retryWhen$1,refCount:refCount$1,sample:sample$1,sampleTime:sampleTime$1,scan:scan$1,sequenceEqual:sequenceEqual$1,share:share$1,shareReplay:shareReplay$1,single:single$1,skip:skip$1,skipLast:skipLast$1,skipUntil:skipUntil$1,skipWhile:skipWhile$1,startWith:startWith$1,subscribeOn:subscribeOn$1,switchAll:switchAll$1,switchMap:switchMap$1,switchMapTo:switchMapTo$1,switchScan,take:take$1,takeLast:takeLast$1,takeUntil:takeUntil$1,takeWhile:takeWhile$1,tap:tap$1,throttle:throttle$1,throttleTime:throttleTime$1,throwIfEmpty:throwIfEmpty$1,timeInterval:timeInterval$1,timeout:timeout$1,timeoutWith:timeoutWith$1,timestamp:timestamp$2,toArray:toArray$1,window:window$2,windowCount:windowCount$1,windowTime:windowTime$1,windowToggle:windowToggle$1,windowWhen:windowWhen$1,withLatestFrom:withLatestFrom$1,zip:zip$2,zipAll:zipAll$1,zipWith},Symbol.toStringTag,{value:"Module"})),require$$2$1=getAugmentedNamespace(operators$1),struct$2={};(function(a){var s=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(_e,ot,lt,Ot){Ot===void 0&&(Ot=lt),Object.defineProperty(_e,Ot,{enumerable:!0,get:function(){return ot[lt]}})}:function(_e,ot,lt,Ot){Ot===void 0&&(Ot=lt),_e[Ot]=ot[lt]}),d=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(_e,ot){Object.defineProperty(_e,"default",{enumerable:!0,value:ot})}:function(_e,ot){_e.default=ot}),c=commonjsGlobal&&commonjsGlobal.__importStar||function(_e){if(_e&&_e.__esModule)return _e;var ot={};if(_e!=null)for(var lt in _e)lt!=="default"&&Object.hasOwnProperty.call(_e,lt)&&s(ot,_e,lt);return d(ot,_e),ot},m=commonjsGlobal&&commonjsGlobal.__importDefault||function(_e){return _e&&_e.__esModule?_e:{default:_e}};Object.defineProperty(a,"__esModule",{value:!0}),a.ListValue=a.Value=a.Struct_FieldsEntry=a.Struct=a.nullValueToNumber=a.nullValueToJSON=a.nullValueFromJSON=a.NullValue=a.protobufPackage=void 0;const g=m(long),b=c(minimal$2);a.protobufPackage="google.protobuf";var k;(function(_e){_e.NULL_VALUE="NULL_VALUE"})(k=a.NullValue||(a.NullValue={}));function et(_e){switch(_e){case 0:case"NULL_VALUE":return k.NULL_VALUE;default:throw new St.Error("Unrecognized enum value "+_e+" for enum NullValue")}}a.nullValueFromJSON=et;function nt(_e){switch(_e){case k.NULL_VALUE:return"NULL_VALUE";default:return"UNKNOWN"}}a.nullValueToJSON=nt;function it(_e){switch(_e){case k.NULL_VALUE:return 0;default:return 0}}a.nullValueToNumber=it;function ct(){return{fields:{}}}a.Struct={encode(_e,ot=b.Writer.create()){return Object.entries(_e.fields).forEach(([lt,Ot])=>{Ot!==void 0&&a.Struct_FieldsEntry.encode({key:lt,value:Ot},ot.uint32(10).fork()).ldelim()}),ot},decode(_e,ot){const lt=_e instanceof b.Reader?_e:new b.Reader(_e);let Ot=ot===void 0?lt.len:lt.pos+ot;const It=ct();for(;lt.pos<Ot;){const Pt=lt.uint32();switch(Pt>>>3){case 1:const $t=a.Struct_FieldsEntry.decode(lt,lt.uint32());$t.value!==void 0&&(It.fields[$t.key]=$t.value);break;default:lt.skipType(Pt&7);break}}return It},fromJSON(_e){return{fields:_t(_e.fields)?Object.entries(_e.fields).reduce((ot,[lt,Ot])=>(ot[lt]=Ot,ot),{}):{}}},toJSON(_e){const ot={};return ot.fields={},_e.fields&&Object.entries(_e.fields).forEach(([lt,Ot])=>{ot.fields[lt]=Ot}),ot},fromPartial(_e){var ot;const lt=ct();return lt.fields=Object.entries((ot=_e.fields)!==null&&ot!==void 0?ot:{}).reduce((Ot,[It,Pt])=>(Pt!==void 0&&(Ot[It]=Pt),Ot),{}),lt},wrap(_e){const ot=ct();return _e!==void 0&&Object.keys(_e).forEach(lt=>{ot.fields[lt]=_e[lt]}),ot},unwrap(_e){const ot={};return Object.keys(_e.fields).forEach(lt=>{ot[lt]=_e.fields[lt]}),ot}};function st(){return{key:"",value:void 0}}a.Struct_FieldsEntry={encode(_e,ot=b.Writer.create()){return _e.key!==""&&ot.uint32(10).string(_e.key),_e.value!==void 0&&a.Value.encode(a.Value.wrap(_e.value),ot.uint32(18).fork()).ldelim(),ot},decode(_e,ot){const lt=_e instanceof b.Reader?_e:new b.Reader(_e);let Ot=ot===void 0?lt.len:lt.pos+ot;const It=st();for(;lt.pos<Ot;){const Pt=lt.uint32();switch(Pt>>>3){case 1:It.key=lt.string();break;case 2:It.value=a.Value.unwrap(a.Value.decode(lt,lt.uint32()));break;default:lt.skipType(Pt&7);break}}return It},fromJSON(_e){return{key:ht(_e.key)?String(_e.key):"",value:ht(_e==null?void 0:_e.value)?_e.value:void 0}},toJSON(_e){const ot={};return _e.key!==void 0&&(ot.key=_e.key),_e.value!==void 0&&(ot.value=_e.value),ot},fromPartial(_e){var ot,lt;const Ot=st();return Ot.key=(ot=_e.key)!==null&&ot!==void 0?ot:"",Ot.value=(lt=_e.value)!==null&&lt!==void 0?lt:void 0,Ot}};function ut(){return{nullValue:void 0,numberValue:void 0,stringValue:void 0,boolValue:void 0,structValue:void 0,listValue:void 0}}a.Value={encode(_e,ot=b.Writer.create()){return _e.nullValue!==void 0&&ot.uint32(8).int32(it(_e.nullValue)),_e.numberValue!==void 0&&ot.uint32(17).double(_e.numberValue),_e.stringValue!==void 0&&ot.uint32(26).string(_e.stringValue),_e.boolValue!==void 0&&ot.uint32(32).bool(_e.boolValue),_e.structValue!==void 0&&a.Struct.encode(a.Struct.wrap(_e.structValue),ot.uint32(42).fork()).ldelim(),_e.listValue!==void 0&&a.ListValue.encode(a.ListValue.wrap(_e.listValue),ot.uint32(50).fork()).ldelim(),ot},decode(_e,ot){const lt=_e instanceof b.Reader?_e:new b.Reader(_e);let Ot=ot===void 0?lt.len:lt.pos+ot;const It=ut();for(;lt.pos<Ot;){const Pt=lt.uint32();switch(Pt>>>3){case 1:It.nullValue=et(lt.int32());break;case 2:It.numberValue=lt.double();break;case 3:It.stringValue=lt.string();break;case 4:It.boolValue=lt.bool();break;case 5:It.structValue=a.Struct.unwrap(a.Struct.decode(lt,lt.uint32()));break;case 6:It.listValue=a.ListValue.unwrap(a.ListValue.decode(lt,lt.uint32()));break;default:lt.skipType(Pt&7);break}}return It},fromJSON(_e){return{nullValue:ht(_e.nullValue)?et(_e.nullValue):void 0,numberValue:ht(_e.numberValue)?Number(_e.numberValue):void 0,stringValue:ht(_e.stringValue)?String(_e.stringValue):void 0,boolValue:ht(_e.boolValue)?Boolean(_e.boolValue):void 0,structValue:_t(_e.structValue)?_e.structValue:void 0,listValue:Array.isArray(_e.listValue)?[..._e.listValue]:void 0}},toJSON(_e){const ot={};return _e.nullValue!==void 0&&(ot.nullValue=_e.nullValue!==void 0?nt(_e.nullValue):void 0),_e.numberValue!==void 0&&(ot.numberValue=_e.numberValue),_e.stringValue!==void 0&&(ot.stringValue=_e.stringValue),_e.boolValue!==void 0&&(ot.boolValue=_e.boolValue),_e.structValue!==void 0&&(ot.structValue=_e.structValue),_e.listValue!==void 0&&(ot.listValue=_e.listValue),ot},fromPartial(_e){var ot,lt,Ot,It,Pt,$t;const bt=ut();return bt.nullValue=(ot=_e.nullValue)!==null&&ot!==void 0?ot:void 0,bt.numberValue=(lt=_e.numberValue)!==null&&lt!==void 0?lt:void 0,bt.stringValue=(Ot=_e.stringValue)!==null&&Ot!==void 0?Ot:void 0,bt.boolValue=(It=_e.boolValue)!==null&&It!==void 0?It:void 0,bt.structValue=(Pt=_e.structValue)!==null&&Pt!==void 0?Pt:void 0,bt.listValue=($t=_e.listValue)!==null&&$t!==void 0?$t:void 0,bt},wrap(_e){const ot=ut();if(_e===null)ot.nullValue=k.NULL_VALUE;else if(typeof _e=="boolean")ot.boolValue=_e;else if(typeof _e=="number")ot.numberValue=_e;else if(typeof _e=="string")ot.stringValue=_e;else if(Array.isArray(_e))ot.listValue=_e;else if(typeof _e=="object")ot.structValue=_e;else if(typeof _e!="undefined")throw new Error("Unsupported any value type: "+typeof _e);return ot},unwrap(_e){if((_e==null?void 0:_e.stringValue)!==void 0)return _e.stringValue;if((_e==null?void 0:_e.numberValue)!==void 0)return _e.numberValue;if((_e==null?void 0:_e.boolValue)!==void 0)return _e.boolValue;if((_e==null?void 0:_e.structValue)!==void 0)return _e.structValue;if((_e==null?void 0:_e.listValue)!==void 0)return _e.listValue;if((_e==null?void 0:_e.nullValue)!==void 0)return null}};function pt(){return{values:[]}}a.ListValue={encode(_e,ot=b.Writer.create()){for(const lt of _e.values)a.Value.encode(a.Value.wrap(lt),ot.uint32(10).fork()).ldelim();return ot},decode(_e,ot){const lt=_e instanceof b.Reader?_e:new b.Reader(_e);let Ot=ot===void 0?lt.len:lt.pos+ot;const It=pt();for(;lt.pos<Ot;){const Pt=lt.uint32();switch(Pt>>>3){case 1:It.values.push(a.Value.unwrap(a.Value.decode(lt,lt.uint32())));break;default:lt.skipType(Pt&7);break}}return It},fromJSON(_e){return{values:Array.isArray(_e==null?void 0:_e.values)?[..._e.values]:[]}},toJSON(_e){const ot={};return _e.values?ot.values=_e.values.map(lt=>lt):ot.values=[],ot},fromPartial(_e){var ot;const lt=pt();return lt.values=((ot=_e.values)===null||ot===void 0?void 0:ot.map(Ot=>Ot))||[],lt},wrap(_e){const ot=pt();return ot.values=_e!=null?_e:[],ot},unwrap(_e){return _e.values}};var St=(()=>{if(typeof St!="undefined")return St;if(typeof self!="undefined")return self;if(typeof window!="undefined")return window;if(typeof commonjsGlobal!="undefined")return commonjsGlobal;throw"Unable to locate global object"})();b.util.Long!==g.default&&(b.util.Long=g.default,b.configure());function _t(_e){return typeof _e=="object"&&_e!==null}function ht(_e){return _e!=null}})(struct$2);(function(a){var s=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(tt,ft,gt,Ut){Ut===void 0&&(Ut=gt),Object.defineProperty(tt,Ut,{enumerable:!0,get:function(){return ft[gt]}})}:function(tt,ft,gt,Ut){Ut===void 0&&(Ut=gt),tt[Ut]=ft[gt]}),d=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(tt,ft){Object.defineProperty(tt,"default",{enumerable:!0,value:ft})}:function(tt,ft){tt.default=ft}),c=commonjsGlobal&&commonjsGlobal.__importStar||function(tt){if(tt&&tt.__esModule)return tt;var ft={};if(tt!=null)for(var gt in tt)gt!=="default"&&Object.hasOwnProperty.call(tt,gt)&&s(ft,tt,gt);return d(ft,tt),ft},m=commonjsGlobal&&commonjsGlobal.__importDefault||function(tt){return tt&&tt.__esModule?tt:{default:tt}};Object.defineProperty(a,"__esModule",{value:!0}),a.LayoutServiceDefinition=a.LayoutServiceClientImpl=a.LayerServiceDefinition=a.LayerServiceClientImpl=a.EventsServiceDefinition=a.EventsServiceClientImpl=a.EventsStreamResponse=a.EventsStreamReconnectRequest=a.EventsStreamError=a.EventsStreamRequest=a.SubscribePayload=a.Event=a.LayerEvent=a.LayoutEvent=a.BatchLayerRequest_BatchItem=a.BatchLayerRequest=a.BatchDeleteLayerRequest=a.DeleteLayerRequest=a.DeleteLayerPayload=a.UpdateLayerRequest=a.GetLayerRequest=a.CreateLayerRequest=a.ListLayersResponse=a.ListLayersRequest=a.PartialLayerWithID=a.PartialLayer=a.LayerAnimation=a.DeleteLayoutResponse=a.DeleteLayoutRequest=a.DeleteLayoutPayload=a.UpdateLayoutRequest=a.GetLayoutRequest=a.CreateLayoutRequest=a.ListLayoutsResponse=a.ListLayoutsRequest=a.PartialLayout=a.PublishEventResponse=a.PublishEventRequest=a.EventTarget=a.BatchLayerResponse_BatchLayerItem=a.BatchLayerResponse=a.DeleteLayerResponse=a.Layer=a.Layout=a.eventsStreamMessageTypeToNumber=a.eventsStreamMessageTypeToJSON=a.eventsStreamMessageTypeFromJSON=a.EventsStreamMessageType=a.eventTypeToNumber=a.eventTypeToJSON=a.eventTypeFromJSON=a.EventType=a.eventSubTypeToNumber=a.eventSubTypeToJSON=a.eventSubTypeFromJSON=a.EventSubType=a.layoutTypeToNumber=a.layoutTypeToJSON=a.layoutTypeFromJSON=a.LayoutType=a.protobufPackage=void 0;const g=m(long),b=c(minimal$2),k=require$$2$1,et=struct$2;a.protobufPackage="apis.layout.v2";var nt;(function(tt){tt.LAYOUT_TYPE_UNSPECIFIED="LAYOUT_TYPE_UNSPECIFIED",tt.LAYOUT_TYPE_SCENELESS="LAYOUT_TYPE_SCENELESS",tt.LAYOUT_TYPE_SCENE="LAYOUT_TYPE_SCENE"})(nt=a.LayoutType||(a.LayoutType={}));function it(tt){switch(tt){case 0:case"LAYOUT_TYPE_UNSPECIFIED":return nt.LAYOUT_TYPE_UNSPECIFIED;case 1:case"LAYOUT_TYPE_SCENELESS":return nt.LAYOUT_TYPE_SCENELESS;case 2:case"LAYOUT_TYPE_SCENE":return nt.LAYOUT_TYPE_SCENE;default:throw new an.Error("Unrecognized enum value "+tt+" for enum LayoutType")}}a.layoutTypeFromJSON=it;function ct(tt){switch(tt){case nt.LAYOUT_TYPE_UNSPECIFIED:return"LAYOUT_TYPE_UNSPECIFIED";case nt.LAYOUT_TYPE_SCENELESS:return"LAYOUT_TYPE_SCENELESS";case nt.LAYOUT_TYPE_SCENE:return"LAYOUT_TYPE_SCENE";default:return"UNKNOWN"}}a.layoutTypeToJSON=ct;function st(tt){switch(tt){case nt.LAYOUT_TYPE_UNSPECIFIED:return 0;case nt.LAYOUT_TYPE_SCENELESS:return 1;case nt.LAYOUT_TYPE_SCENE:return 2;default:return 0}}a.layoutTypeToNumber=st;var ut;(function(tt){tt.EVENT_SUB_TYPE_UNSPECIFIED="EVENT_SUB_TYPE_UNSPECIFIED",tt.EVENT_SUB_TYPE_CREATE="EVENT_SUB_TYPE_CREATE",tt.EVENT_SUB_TYPE_UPDATE="EVENT_SUB_TYPE_UPDATE",tt.EVENT_SUB_TYPE_DELETE="EVENT_SUB_TYPE_DELETE",tt.EVENT_SUB_TYPE_BATCH="EVENT_SUB_TYPE_BATCH"})(ut=a.EventSubType||(a.EventSubType={}));function pt(tt){switch(tt){case 0:case"EVENT_SUB_TYPE_UNSPECIFIED":return ut.EVENT_SUB_TYPE_UNSPECIFIED;case 1:case"EVENT_SUB_TYPE_CREATE":return ut.EVENT_SUB_TYPE_CREATE;case 2:case"EVENT_SUB_TYPE_UPDATE":return ut.EVENT_SUB_TYPE_UPDATE;case 3:case"EVENT_SUB_TYPE_DELETE":return ut.EVENT_SUB_TYPE_DELETE;case 4:case"EVENT_SUB_TYPE_BATCH":return ut.EVENT_SUB_TYPE_BATCH;default:throw new an.Error("Unrecognized enum value "+tt+" for enum EventSubType")}}a.eventSubTypeFromJSON=pt;function St(tt){switch(tt){case ut.EVENT_SUB_TYPE_UNSPECIFIED:return"EVENT_SUB_TYPE_UNSPECIFIED";case ut.EVENT_SUB_TYPE_CREATE:return"EVENT_SUB_TYPE_CREATE";case ut.EVENT_SUB_TYPE_UPDATE:return"EVENT_SUB_TYPE_UPDATE";case ut.EVENT_SUB_TYPE_DELETE:return"EVENT_SUB_TYPE_DELETE";case ut.EVENT_SUB_TYPE_BATCH:return"EVENT_SUB_TYPE_BATCH";default:return"UNKNOWN"}}a.eventSubTypeToJSON=St;function _t(tt){switch(tt){case ut.EVENT_SUB_TYPE_UNSPECIFIED:return 0;case ut.EVENT_SUB_TYPE_CREATE:return 1;case ut.EVENT_SUB_TYPE_UPDATE:return 2;case ut.EVENT_SUB_TYPE_DELETE:return 3;case ut.EVENT_SUB_TYPE_BATCH:return 4;default:return 0}}a.eventSubTypeToNumber=_t;var ht;(function(tt){tt.EVENT_TYPE_UNSPECIFIED="EVENT_TYPE_UNSPECIFIED",tt.EVENT_TYPE_LAYOUT="EVENT_TYPE_LAYOUT",tt.EVENT_TYPE_LAYER="EVENT_TYPE_LAYER"})(ht=a.EventType||(a.EventType={}));function _e(tt){switch(tt){case 0:case"EVENT_TYPE_UNSPECIFIED":return ht.EVENT_TYPE_UNSPECIFIED;case 1:case"EVENT_TYPE_LAYOUT":return ht.EVENT_TYPE_LAYOUT;case 2:case"EVENT_TYPE_LAYER":return ht.EVENT_TYPE_LAYER;default:throw new an.Error("Unrecognized enum value "+tt+" for enum EventType")}}a.eventTypeFromJSON=_e;function ot(tt){switch(tt){case ht.EVENT_TYPE_UNSPECIFIED:return"EVENT_TYPE_UNSPECIFIED";case ht.EVENT_TYPE_LAYOUT:return"EVENT_TYPE_LAYOUT";case ht.EVENT_TYPE_LAYER:return"EVENT_TYPE_LAYER";default:return"UNKNOWN"}}a.eventTypeToJSON=ot;function lt(tt){switch(tt){case ht.EVENT_TYPE_UNSPECIFIED:return 0;case ht.EVENT_TYPE_LAYOUT:return 1;case ht.EVENT_TYPE_LAYER:return 2;default:return 0}}a.eventTypeToNumber=lt;var Ot;(function(tt){tt.EVENTS_STREAM_MESSAGE_TYPE_UNSPECIFIED="EVENTS_STREAM_MESSAGE_TYPE_UNSPECIFIED",tt.EVENTS_STREAM_MESSAGE_TYPE_PING="EVENTS_STREAM_MESSAGE_TYPE_PING",tt.EVENTS_STREAM_MESSAGE_TYPE_ERROR="EVENTS_STREAM_MESSAGE_TYPE_ERROR",tt.EVENTS_STREAM_MESSAGE_TYPE_SUBSCRIBED="EVENTS_STREAM_MESSAGE_TYPE_SUBSCRIBED",tt.EVENTS_STREAM_MESSAGE_TYPE_UNSUBSCRIBED="EVENTS_STREAM_MESSAGE_TYPE_UNSUBSCRIBED",tt.EVENTS_STREAM_MESSAGE_TYPE_PUBLISHED="EVENTS_STREAM_MESSAGE_TYPE_PUBLISHED"})(Ot=a.EventsStreamMessageType||(a.EventsStreamMessageType={}));function It(tt){switch(tt){case 0:case"EVENTS_STREAM_MESSAGE_TYPE_UNSPECIFIED":return Ot.EVENTS_STREAM_MESSAGE_TYPE_UNSPECIFIED;case 1:case"EVENTS_STREAM_MESSAGE_TYPE_PING":return Ot.EVENTS_STREAM_MESSAGE_TYPE_PING;case 2:case"EVENTS_STREAM_MESSAGE_TYPE_ERROR":return Ot.EVENTS_STREAM_MESSAGE_TYPE_ERROR;case 3:case"EVENTS_STREAM_MESSAGE_TYPE_SUBSCRIBED":return Ot.EVENTS_STREAM_MESSAGE_TYPE_SUBSCRIBED;case 4:case"EVENTS_STREAM_MESSAGE_TYPE_UNSUBSCRIBED":return Ot.EVENTS_STREAM_MESSAGE_TYPE_UNSUBSCRIBED;case 5:case"EVENTS_STREAM_MESSAGE_TYPE_PUBLISHED":return Ot.EVENTS_STREAM_MESSAGE_TYPE_PUBLISHED;default:throw new an.Error("Unrecognized enum value "+tt+" for enum EventsStreamMessageType")}}a.eventsStreamMessageTypeFromJSON=It;function Pt(tt){switch(tt){case Ot.EVENTS_STREAM_MESSAGE_TYPE_UNSPECIFIED:return"EVENTS_STREAM_MESSAGE_TYPE_UNSPECIFIED";case Ot.EVENTS_STREAM_MESSAGE_TYPE_PING:return"EVENTS_STREAM_MESSAGE_TYPE_PING";case Ot.EVENTS_STREAM_MESSAGE_TYPE_ERROR:return"EVENTS_STREAM_MESSAGE_TYPE_ERROR";case Ot.EVENTS_STREAM_MESSAGE_TYPE_SUBSCRIBED:return"EVENTS_STREAM_MESSAGE_TYPE_SUBSCRIBED";case Ot.EVENTS_STREAM_MESSAGE_TYPE_UNSUBSCRIBED:return"EVENTS_STREAM_MESSAGE_TYPE_UNSUBSCRIBED";case Ot.EVENTS_STREAM_MESSAGE_TYPE_PUBLISHED:return"EVENTS_STREAM_MESSAGE_TYPE_PUBLISHED";default:return"UNKNOWN"}}a.eventsStreamMessageTypeToJSON=Pt;function $t(tt){switch(tt){case Ot.EVENTS_STREAM_MESSAGE_TYPE_UNSPECIFIED:return 0;case Ot.EVENTS_STREAM_MESSAGE_TYPE_PING:return 1;case Ot.EVENTS_STREAM_MESSAGE_TYPE_ERROR:return 2;case Ot.EVENTS_STREAM_MESSAGE_TYPE_SUBSCRIBED:return 3;case Ot.EVENTS_STREAM_MESSAGE_TYPE_UNSUBSCRIBED:return 4;case Ot.EVENTS_STREAM_MESSAGE_TYPE_PUBLISHED:return 5;default:return 0}}a.eventsStreamMessageTypeToNumber=$t;function bt(){return{id:"",width:0,height:0,metadata:void 0,projectId:void 0,collectionId:void 0,requestMetadata:void 0,type:void 0}}a.Layout={encode(tt,ft=b.Writer.create()){return tt.id!==""&&ft.uint32(10).string(tt.id),tt.width!==0&&ft.uint32(16).int32(tt.width),tt.height!==0&&ft.uint32(24).int32(tt.height),tt.metadata!==void 0&&et.Value.encode(et.Value.wrap(tt.metadata),ft.uint32(50).fork()).ldelim(),tt.projectId!==void 0&&ft.uint32(58).string(tt.projectId),tt.collectionId!==void 0&&ft.uint32(66).string(tt.collectionId),tt.requestMetadata!==void 0&&et.Value.encode(et.Value.wrap(tt.requestMetadata),ft.uint32(810).fork()).ldelim(),tt.type!==void 0&&ft.uint32(72).int32(st(tt.type)),ft},decode(tt,ft){const gt=tt instanceof b.Reader?tt:new b.Reader(tt);let Ut=ft===void 0?gt.len:gt.pos+ft;const Lt=bt();for(;gt.pos<Ut;){const Jt=gt.uint32();switch(Jt>>>3){case 1:Lt.id=gt.string();break;case 2:Lt.width=gt.int32();break;case 3:Lt.height=gt.int32();break;case 6:Lt.metadata=et.Value.unwrap(et.Value.decode(gt,gt.uint32()));break;case 7:Lt.projectId=gt.string();break;case 8:Lt.collectionId=gt.string();break;case 101:Lt.requestMetadata=et.Value.unwrap(et.Value.decode(gt,gt.uint32()));break;case 9:Lt.type=it(gt.int32());break;default:gt.skipType(Jt&7);break}}return Lt},fromJSON(tt){return{id:qt(tt.id)?String(tt.id):"",width:qt(tt.width)?Number(tt.width):0,height:qt(tt.height)?Number(tt.height):0,metadata:qt(tt==null?void 0:tt.metadata)?tt.metadata:void 0,projectId:qt(tt.projectId)?String(tt.projectId):void 0,collectionId:qt(tt.collectionId)?String(tt.collectionId):void 0,requestMetadata:qt(tt==null?void 0:tt.requestMetadata)?tt.requestMetadata:void 0,type:qt(tt.type)?it(tt.type):void 0}},toJSON(tt){const ft={};return tt.id!==void 0&&(ft.id=tt.id),tt.width!==void 0&&(ft.width=Math.round(tt.width)),tt.height!==void 0&&(ft.height=Math.round(tt.height)),tt.metadata!==void 0&&(ft.metadata=tt.metadata),tt.projectId!==void 0&&(ft.projectId=tt.projectId),tt.collectionId!==void 0&&(ft.collectionId=tt.collectionId),tt.requestMetadata!==void 0&&(ft.requestMetadata=tt.requestMetadata),tt.type!==void 0&&(ft.type=tt.type!==void 0?ct(tt.type):void 0),ft},fromPartial(tt){var ft,gt,Ut,Lt,Jt,Sn,_n,pn;const gn=bt();return gn.id=(ft=tt.id)!==null&&ft!==void 0?ft:"",gn.width=(gt=tt.width)!==null&&gt!==void 0?gt:0,gn.height=(Ut=tt.height)!==null&&Ut!==void 0?Ut:0,gn.metadata=(Lt=tt.metadata)!==null&&Lt!==void 0?Lt:void 0,gn.projectId=(Jt=tt.projectId)!==null&&Jt!==void 0?Jt:void 0,gn.collectionId=(Sn=tt.collectionId)!==null&&Sn!==void 0?Sn:void 0,gn.requestMetadata=(_n=tt.requestMetadata)!==null&&_n!==void 0?_n:void 0,gn.type=(pn=tt.type)!==null&&pn!==void 0?pn:void 0,gn}};function Rt(){return{type:"",data:void 0,x:void 0,y:void 0,width:void 0,height:void 0,rotation:0,opacity:0,scale:0,hidden:!1,locked:!1,children:void 0,id:"",layoutId:"",requestMetadata:void 0,requestAnimation:[]}}a.Layer={encode(tt,ft=b.Writer.create()){tt.type!==""&&ft.uint32(10).string(tt.type),tt.data!==void 0&&et.Struct.encode(et.Struct.wrap(tt.data),ft.uint32(18).fork()).ldelim(),tt.x!==void 0&&et.Value.encode(et.Value.wrap(tt.x),ft.uint32(26).fork()).ldelim(),tt.y!==void 0&&et.Value.encode(et.Value.wrap(tt.y),ft.uint32(34).fork()).ldelim(),tt.width!==void 0&&et.Value.encode(et.Value.wrap(tt.width),ft.uint32(42).fork()).ldelim(),tt.height!==void 0&&et.Value.encode(et.Value.wrap(tt.height),ft.uint32(50).fork()).ldelim(),tt.rotation!==0&&ft.uint32(57).double(tt.rotation),tt.opacity!==0&&ft.uint32(65).double(tt.opacity),tt.scale!==0&&ft.uint32(73).double(tt.scale),tt.hidden===!0&&ft.uint32(80).bool(tt.hidden),tt.locked===!0&&ft.uint32(88).bool(tt.locked),tt.children!==void 0&&et.ListValue.encode(et.ListValue.wrap(tt.children),ft.uint32(98).fork()).ldelim(),tt.id!==""&&ft.uint32(802).string(tt.id),tt.layoutId!==""&&ft.uint32(818).string(tt.layoutId),tt.requestMetadata!==void 0&&et.Value.encode(et.Value.wrap(tt.requestMetadata),ft.uint32(810).fork()).ldelim();for(const gt of tt.requestAnimation)a.LayerAnimation.encode(gt,ft.uint32(826).fork()).ldelim();return ft},decode(tt,ft){const gt=tt instanceof b.Reader?tt:new b.Reader(tt);let Ut=ft===void 0?gt.len:gt.pos+ft;const Lt=Rt();for(;gt.pos<Ut;){const Jt=gt.uint32();switch(Jt>>>3){case 1:Lt.type=gt.string();break;case 2:Lt.data=et.Struct.unwrap(et.Struct.decode(gt,gt.uint32()));break;case 3:Lt.x=et.Value.unwrap(et.Value.decode(gt,gt.uint32()));break;case 4:Lt.y=et.Value.unwrap(et.Value.decode(gt,gt.uint32()));break;case 5:Lt.width=et.Value.unwrap(et.Value.decode(gt,gt.uint32()));break;case 6:Lt.height=et.Value.unwrap(et.Value.decode(gt,gt.uint32()));break;case 7:Lt.rotation=gt.double();break;case 8:Lt.opacity=gt.double();break;case 9:Lt.scale=gt.double();break;case 10:Lt.hidden=gt.bool();break;case 11:Lt.locked=gt.bool();break;case 12:Lt.children=et.ListValue.unwrap(et.ListValue.decode(gt,gt.uint32()));break;case 100:Lt.id=gt.string();break;case 102:Lt.layoutId=gt.string();break;case 101:Lt.requestMetadata=et.Value.unwrap(et.Value.decode(gt,gt.uint32()));break;case 103:Lt.requestAnimation.push(a.LayerAnimation.decode(gt,gt.uint32()));break;default:gt.skipType(Jt&7);break}}return Lt},fromJSON(tt){return{type:qt(tt.type)?String(tt.type):"",data:Un(tt.data)?tt.data:void 0,x:qt(tt==null?void 0:tt.x)?tt.x:void 0,y:qt(tt==null?void 0:tt.y)?tt.y:void 0,width:qt(tt==null?void 0:tt.width)?tt.width:void 0,height:qt(tt==null?void 0:tt.height)?tt.height:void 0,rotation:qt(tt.rotation)?Number(tt.rotation):0,opacity:qt(tt.opacity)?Number(tt.opacity):0,scale:qt(tt.scale)?Number(tt.scale):0,hidden:qt(tt.hidden)?Boolean(tt.hidden):!1,locked:qt(tt.locked)?Boolean(tt.locked):!1,children:Array.isArray(tt.children)?[...tt.children]:void 0,id:qt(tt.id)?String(tt.id):"",layoutId:qt(tt.layoutId)?String(tt.layoutId):"",requestMetadata:qt(tt==null?void 0:tt.requestMetadata)?tt.requestMetadata:void 0,requestAnimation:Array.isArray(tt==null?void 0:tt.requestAnimation)?tt.requestAnimation.map(ft=>a.LayerAnimation.fromJSON(ft)):[]}},toJSON(tt){const ft={};return tt.type!==void 0&&(ft.type=tt.type),tt.data!==void 0&&(ft.data=tt.data),tt.x!==void 0&&(ft.x=tt.x),tt.y!==void 0&&(ft.y=tt.y),tt.width!==void 0&&(ft.width=tt.width),tt.height!==void 0&&(ft.height=tt.height),tt.rotation!==void 0&&(ft.rotation=tt.rotation),tt.opacity!==void 0&&(ft.opacity=tt.opacity),tt.scale!==void 0&&(ft.scale=tt.scale),tt.hidden!==void 0&&(ft.hidden=tt.hidden),tt.locked!==void 0&&(ft.locked=tt.locked),tt.children!==void 0&&(ft.children=tt.children),tt.id!==void 0&&(ft.id=tt.id),tt.layoutId!==void 0&&(ft.layoutId=tt.layoutId),tt.requestMetadata!==void 0&&(ft.requestMetadata=tt.requestMetadata),tt.requestAnimation?ft.requestAnimation=tt.requestAnimation.map(gt=>gt?a.LayerAnimation.toJSON(gt):void 0):ft.requestAnimation=[],ft},fromPartial(tt){var ft,gt,Ut,Lt,Jt,Sn,_n,pn,gn,Rn,wn,Cn,Pn,Nn,An,hn;const sn=Rt();return sn.type=(ft=tt.type)!==null&&ft!==void 0?ft:"",sn.data=(gt=tt.data)!==null&&gt!==void 0?gt:void 0,sn.x=(Ut=tt.x)!==null&&Ut!==void 0?Ut:void 0,sn.y=(Lt=tt.y)!==null&&Lt!==void 0?Lt:void 0,sn.width=(Jt=tt.width)!==null&&Jt!==void 0?Jt:void 0,sn.height=(Sn=tt.height)!==null&&Sn!==void 0?Sn:void 0,sn.rotation=(_n=tt.rotation)!==null&&_n!==void 0?_n:0,sn.opacity=(pn=tt.opacity)!==null&&pn!==void 0?pn:0,sn.scale=(gn=tt.scale)!==null&&gn!==void 0?gn:0,sn.hidden=(Rn=tt.hidden)!==null&&Rn!==void 0?Rn:!1,sn.locked=(wn=tt.locked)!==null&&wn!==void 0?wn:!1,sn.children=(Cn=tt.children)!==null&&Cn!==void 0?Cn:void 0,sn.id=(Pn=tt.id)!==null&&Pn!==void 0?Pn:"",sn.layoutId=(Nn=tt.layoutId)!==null&&Nn!==void 0?Nn:"",sn.requestMetadata=(An=tt.requestMetadata)!==null&&An!==void 0?An:void 0,sn.requestAnimation=((hn=tt.requestAnimation)===null||hn===void 0?void 0:hn.map(Vn=>a.LayerAnimation.fromPartial(Vn)))||[],sn}};function Ct(){return{id:"",layoutId:"",requestMetadata:void 0}}a.DeleteLayerResponse={encode(tt,ft=b.Writer.create()){return tt.id!==""&&ft.uint32(10).string(tt.id),tt.layoutId!==""&&ft.uint32(18).string(tt.layoutId),tt.requestMetadata!==void 0&&et.Value.encode(et.Value.wrap(tt.requestMetadata),ft.uint32(802).fork()).ldelim(),ft},decode(tt,ft){const gt=tt instanceof b.Reader?tt:new b.Reader(tt);let Ut=ft===void 0?gt.len:gt.pos+ft;const Lt=Ct();for(;gt.pos<Ut;){const Jt=gt.uint32();switch(Jt>>>3){case 1:Lt.id=gt.string();break;case 2:Lt.layoutId=gt.string();break;case 100:Lt.requestMetadata=et.Value.unwrap(et.Value.decode(gt,gt.uint32()));break;default:gt.skipType(Jt&7);break}}return Lt},fromJSON(tt){return{id:qt(tt.id)?String(tt.id):"",layoutId:qt(tt.layoutId)?String(tt.layoutId):"",requestMetadata:qt(tt==null?void 0:tt.requestMetadata)?tt.requestMetadata:void 0}},toJSON(tt){const ft={};return tt.id!==void 0&&(ft.id=tt.id),tt.layoutId!==void 0&&(ft.layoutId=tt.layoutId),tt.requestMetadata!==void 0&&(ft.requestMetadata=tt.requestMetadata),ft},fromPartial(tt){var ft,gt,Ut;const Lt=Ct();return Lt.id=(ft=tt.id)!==null&&ft!==void 0?ft:"",Lt.layoutId=(gt=tt.layoutId)!==null&&gt!==void 0?gt:"",Lt.requestMetadata=(Ut=tt.requestMetadata)!==null&&Ut!==void 0?Ut:void 0,Lt}};function vt(){return{layers:[],requestMetadata:void 0}}a.BatchLayerResponse={encode(tt,ft=b.Writer.create()){for(const gt of tt.layers)a.BatchLayerResponse_BatchLayerItem.encode(gt,ft.uint32(18).fork()).ldelim();return tt.requestMetadata!==void 0&&et.Value.encode(et.Value.wrap(tt.requestMetadata),ft.uint32(802).fork()).ldelim(),ft},decode(tt,ft){const gt=tt instanceof b.Reader?tt:new b.Reader(tt);let Ut=ft===void 0?gt.len:gt.pos+ft;const Lt=vt();for(;gt.pos<Ut;){const Jt=gt.uint32();switch(Jt>>>3){case 2:Lt.layers.push(a.BatchLayerResponse_BatchLayerItem.decode(gt,gt.uint32()));break;case 100:Lt.requestMetadata=et.Value.unwrap(et.Value.decode(gt,gt.uint32()));break;default:gt.skipType(Jt&7);break}}return Lt},fromJSON(tt){return{layers:Array.isArray(tt==null?void 0:tt.layers)?tt.layers.map(ft=>a.BatchLayerResponse_BatchLayerItem.fromJSON(ft)):[],requestMetadata:qt(tt==null?void 0:tt.requestMetadata)?tt.requestMetadata:void 0}},toJSON(tt){const ft={};return tt.layers?ft.layers=tt.layers.map(gt=>gt?a.BatchLayerResponse_BatchLayerItem.toJSON(gt):void 0):ft.layers=[],tt.requestMetadata!==void 0&&(ft.requestMetadata=tt.requestMetadata),ft},fromPartial(tt){var ft,gt;const Ut=vt();return Ut.layers=((ft=tt.layers)===null||ft===void 0?void 0:ft.map(Lt=>a.BatchLayerResponse_BatchLayerItem.fromPartial(Lt)))||[],Ut.requestMetadata=(gt=tt.requestMetadata)!==null&&gt!==void 0?gt:void 0,Ut}};function Tt(){return{create:void 0,update:void 0,delete:void 0}}a.BatchLayerResponse_BatchLayerItem={encode(tt,ft=b.Writer.create()){return tt.create!==void 0&&a.Layer.encode(tt.create,ft.uint32(10).fork()).ldelim(),tt.update!==void 0&&a.Layer.encode(tt.update,ft.uint32(18).fork()).ldelim(),tt.delete!==void 0&&a.DeleteLayerResponse.encode(tt.delete,ft.uint32(26).fork()).ldelim(),ft},decode(tt,ft){const gt=tt instanceof b.Reader?tt:new b.Reader(tt);let Ut=ft===void 0?gt.len:gt.pos+ft;const Lt=Tt();for(;gt.pos<Ut;){const Jt=gt.uint32();switch(Jt>>>3){case 1:Lt.create=a.Layer.decode(gt,gt.uint32());break;case 2:Lt.update=a.Layer.decode(gt,gt.uint32());break;case 3:Lt.delete=a.DeleteLayerResponse.decode(gt,gt.uint32());break;default:gt.skipType(Jt&7);break}}return Lt},fromJSON(tt){return{create:qt(tt.create)?a.Layer.fromJSON(tt.create):void 0,update:qt(tt.update)?a.Layer.fromJSON(tt.update):void 0,delete:qt(tt.delete)?a.DeleteLayerResponse.fromJSON(tt.delete):void 0}},toJSON(tt){const ft={};return tt.create!==void 0&&(ft.create=tt.create?a.Layer.toJSON(tt.create):void 0),tt.update!==void 0&&(ft.update=tt.update?a.Layer.toJSON(tt.update):void 0),tt.delete!==void 0&&(ft.delete=tt.delete?a.DeleteLayerResponse.toJSON(tt.delete):void 0),ft},fromPartial(tt){const ft=Tt();return ft.create=tt.create!==void 0&&tt.create!==null?a.Layer.fromPartial(tt.create):void 0,ft.update=tt.update!==void 0&&tt.update!==null?a.Layer.fromPartial(tt.update):void 0,ft.delete=tt.delete!==void 0&&tt.delete!==null?a.DeleteLayerResponse.fromPartial(tt.delete):void 0,ft}};function wt(){return{collectionId:void 0,projectId:void 0,layoutId:void 0}}a.EventTarget={encode(tt,ft=b.Writer.create()){return tt.collectionId!==void 0&&ft.uint32(42).string(tt.collectionId),tt.projectId!==void 0&&ft.uint32(34).string(tt.projectId),tt.layoutId!==void 0&&ft.uint32(10).string(tt.layoutId),ft},decode(tt,ft){const gt=tt instanceof b.Reader?tt:new b.Reader(tt);let Ut=ft===void 0?gt.len:gt.pos+ft;const Lt=wt();for(;gt.pos<Ut;){const Jt=gt.uint32();switch(Jt>>>3){case 5:Lt.collectionId=gt.string();break;case 4:Lt.projectId=gt.string();break;case 1:Lt.layoutId=gt.string();break;default:gt.skipType(Jt&7);break}}return Lt},fromJSON(tt){return{collectionId:qt(tt.collectionId)?String(tt.collectionId):void 0,projectId:qt(tt.projectId)?String(tt.projectId):void 0,layoutId:qt(tt.layoutId)?String(tt.layoutId):void 0}},toJSON(tt){const ft={};return tt.collectionId!==void 0&&(ft.collectionId=tt.collectionId),tt.projectId!==void 0&&(ft.projectId=tt.projectId),tt.layoutId!==void 0&&(ft.layoutId=tt.layoutId),ft},fromPartial(tt){var ft,gt,Ut;const Lt=wt();return Lt.collectionId=(ft=tt.collectionId)!==null&&ft!==void 0?ft:void 0,Lt.projectId=(gt=tt.projectId)!==null&&gt!==void 0?gt:void 0,Lt.layoutId=(Ut=tt.layoutId)!==null&&Ut!==void 0?Ut:void 0,Lt}};function zt(){return{name:"",payload:void 0,requestMetadata:void 0,target:void 0}}a.PublishEventRequest={encode(tt,ft=b.Writer.create()){return tt.name!==""&&ft.uint32(10).string(tt.name),tt.payload!==void 0&&et.Struct.encode(et.Struct.wrap(tt.payload),ft.uint32(18).fork()).ldelim(),tt.requestMetadata!==void 0&&et.Value.encode(et.Value.wrap(tt.requestMetadata),ft.uint32(34).fork()).ldelim(),tt.target!==void 0&&a.EventTarget.encode(tt.target,ft.uint32(26).fork()).ldelim(),ft},decode(tt,ft){const gt=tt instanceof b.Reader?tt:new b.Reader(tt);let Ut=ft===void 0?gt.len:gt.pos+ft;const Lt=zt();for(;gt.pos<Ut;){const Jt=gt.uint32();switch(Jt>>>3){case 1:Lt.name=gt.string();break;case 2:Lt.payload=et.Struct.unwrap(et.Struct.decode(gt,gt.uint32()));break;case 4:Lt.requestMetadata=et.Value.unwrap(et.Value.decode(gt,gt.uint32()));break;case 3:Lt.target=a.EventTarget.decode(gt,gt.uint32());break;default:gt.skipType(Jt&7);break}}return Lt},fromJSON(tt){return{name:qt(tt.name)?String(tt.name):"",payload:Un(tt.payload)?tt.payload:void 0,requestMetadata:qt(tt==null?void 0:tt.requestMetadata)?tt.requestMetadata:void 0,target:qt(tt.target)?a.EventTarget.fromJSON(tt.target):void 0}},toJSON(tt){const ft={};return tt.name!==void 0&&(ft.name=tt.name),tt.payload!==void 0&&(ft.payload=tt.payload),tt.requestMetadata!==void 0&&(ft.requestMetadata=tt.requestMetadata),tt.target!==void 0&&(ft.target=tt.target?a.EventTarget.toJSON(tt.target):void 0),ft},fromPartial(tt){var ft,gt,Ut;const Lt=zt();return Lt.name=(ft=tt.name)!==null&&ft!==void 0?ft:"",Lt.payload=(gt=tt.payload)!==null&&gt!==void 0?gt:void 0,Lt.requestMetadata=(Ut=tt.requestMetadata)!==null&&Ut!==void 0?Ut:void 0,Lt.target=tt.target!==void 0&&tt.target!==null?a.EventTarget.fromPartial(tt.target):void 0,Lt}};function Mt(){return{name:"",payload:void 0,target:void 0,requestMetadata:void 0,id:""}}a.PublishEventResponse={encode(tt,ft=b.Writer.create()){return tt.name!==""&&ft.uint32(10).string(tt.name),tt.payload!==void 0&&et.Struct.encode(et.Struct.wrap(tt.payload),ft.uint32(18).fork()).ldelim(),tt.target!==void 0&&a.EventTarget.encode(tt.target,ft.uint32(26).fork()).ldelim(),tt.requestMetadata!==void 0&&et.Value.encode(et.Value.wrap(tt.requestMetadata),ft.uint32(34).fork()).ldelim(),tt.id!==""&&ft.uint32(42).string(tt.id),ft},decode(tt,ft){const gt=tt instanceof b.Reader?tt:new b.Reader(tt);let Ut=ft===void 0?gt.len:gt.pos+ft;const Lt=Mt();for(;gt.pos<Ut;){const Jt=gt.uint32();switch(Jt>>>3){case 1:Lt.name=gt.string();break;case 2:Lt.payload=et.Struct.unwrap(et.Struct.decode(gt,gt.uint32()));break;case 3:Lt.target=a.EventTarget.decode(gt,gt.uint32());break;case 4:Lt.requestMetadata=et.Value.unwrap(et.Value.decode(gt,gt.uint32()));break;case 5:Lt.id=gt.string();break;default:gt.skipType(Jt&7);break}}return Lt},fromJSON(tt){return{name:qt(tt.name)?String(tt.name):"",payload:Un(tt.payload)?tt.payload:void 0,target:qt(tt.target)?a.EventTarget.fromJSON(tt.target):void 0,requestMetadata:qt(tt==null?void 0:tt.requestMetadata)?tt.requestMetadata:void 0,id:qt(tt.id)?String(tt.id):""}},toJSON(tt){const ft={};return tt.name!==void 0&&(ft.name=tt.name),tt.payload!==void 0&&(ft.payload=tt.payload),tt.target!==void 0&&(ft.target=tt.target?a.EventTarget.toJSON(tt.target):void 0),tt.requestMetadata!==void 0&&(ft.requestMetadata=tt.requestMetadata),tt.id!==void 0&&(ft.id=tt.id),ft},fromPartial(tt){var ft,gt,Ut,Lt;const Jt=Mt();return Jt.name=(ft=tt.name)!==null&&ft!==void 0?ft:"",Jt.payload=(gt=tt.payload)!==null&&gt!==void 0?gt:void 0,Jt.target=tt.target!==void 0&&tt.target!==null?a.EventTarget.fromPartial(tt.target):void 0,Jt.requestMetadata=(Ut=tt.requestMetadata)!==null&&Ut!==void 0?Ut:void 0,Jt.id=(Lt=tt.id)!==null&&Lt!==void 0?Lt:"",Jt}};function Nt(){return{width:void 0,height:void 0,metadata:void 0,projectId:void 0,collectionId:void 0,type:void 0,requestMetadata:void 0}}a.PartialLayout={encode(tt,ft=b.Writer.create()){return tt.width!==void 0&&ft.uint32(16).int32(tt.width),tt.height!==void 0&&ft.uint32(24).int32(tt.height),tt.metadata!==void 0&&et.Value.encode(et.Value.wrap(tt.metadata),ft.uint32(50).fork()).ldelim(),tt.projectId!==void 0&&ft.uint32(58).string(tt.projectId),tt.collectionId!==void 0&&ft.uint32(66).string(tt.collectionId),tt.type!==void 0&&ft.uint32(72).int32(st(tt.type)),tt.requestMetadata!==void 0&&et.Value.encode(et.Value.wrap(tt.requestMetadata),ft.uint32(810).fork()).ldelim(),ft},decode(tt,ft){const gt=tt instanceof b.Reader?tt:new b.Reader(tt);let Ut=ft===void 0?gt.len:gt.pos+ft;const Lt=Nt();for(;gt.pos<Ut;){const Jt=gt.uint32();switch(Jt>>>3){case 2:Lt.width=gt.int32();break;case 3:Lt.height=gt.int32();break;case 6:Lt.metadata=et.Value.unwrap(et.Value.decode(gt,gt.uint32()));break;case 7:Lt.projectId=gt.string();break;case 8:Lt.collectionId=gt.string();break;case 9:Lt.type=it(gt.int32());break;case 101:Lt.requestMetadata=et.Value.unwrap(et.Value.decode(gt,gt.uint32()));break;default:gt.skipType(Jt&7);break}}return Lt},fromJSON(tt){return{width:qt(tt.width)?Number(tt.width):void 0,height:qt(tt.height)?Number(tt.height):void 0,metadata:qt(tt==null?void 0:tt.metadata)?tt.metadata:void 0,projectId:qt(tt.projectId)?String(tt.projectId):void 0,collectionId:qt(tt.collectionId)?String(tt.collectionId):void 0,type:qt(tt.type)?it(tt.type):void 0,requestMetadata:qt(tt==null?void 0:tt.requestMetadata)?tt.requestMetadata:void 0}},toJSON(tt){const ft={};return tt.width!==void 0&&(ft.width=Math.round(tt.width)),tt.height!==void 0&&(ft.height=Math.round(tt.height)),tt.metadata!==void 0&&(ft.metadata=tt.metadata),tt.projectId!==void 0&&(ft.projectId=tt.projectId),tt.collectionId!==void 0&&(ft.collectionId=tt.collectionId),tt.type!==void 0&&(ft.type=tt.type!==void 0?ct(tt.type):void 0),tt.requestMetadata!==void 0&&(ft.requestMetadata=tt.requestMetadata),ft},fromPartial(tt){var ft,gt,Ut,Lt,Jt,Sn,_n;const pn=Nt();return pn.width=(ft=tt.width)!==null&&ft!==void 0?ft:void 0,pn.height=(gt=tt.height)!==null&&gt!==void 0?gt:void 0,pn.metadata=(Ut=tt.metadata)!==null&&Ut!==void 0?Ut:void 0,pn.projectId=(Lt=tt.projectId)!==null&&Lt!==void 0?Lt:void 0,pn.collectionId=(Jt=tt.collectionId)!==null&&Jt!==void 0?Jt:void 0,pn.type=(Sn=tt.type)!==null&&Sn!==void 0?Sn:void 0,pn.requestMetadata=(_n=tt.requestMetadata)!==null&&_n!==void 0?_n:void 0,pn}};function Ft(){return{projectId:void 0,collectionId:void 0,type:void 0}}a.ListLayoutsRequest={encode(tt,ft=b.Writer.create()){return tt.projectId!==void 0&&ft.uint32(10).string(tt.projectId),tt.collectionId!==void 0&&ft.uint32(18).string(tt.collectionId),tt.type!==void 0&&ft.uint32(24).int32(st(tt.type)),ft},decode(tt,ft){const gt=tt instanceof b.Reader?tt:new b.Reader(tt);let Ut=ft===void 0?gt.len:gt.pos+ft;const Lt=Ft();for(;gt.pos<Ut;){const Jt=gt.uint32();switch(Jt>>>3){case 1:Lt.projectId=gt.string();break;case 2:Lt.collectionId=gt.string();break;case 3:Lt.type=it(gt.int32());break;default:gt.skipType(Jt&7);break}}return Lt},fromJSON(tt){return{projectId:qt(tt.projectId)?String(tt.projectId):void 0,collectionId:qt(tt.collectionId)?String(tt.collectionId):void 0,type:qt(tt.type)?it(tt.type):void 0}},toJSON(tt){const ft={};return tt.projectId!==void 0&&(ft.projectId=tt.projectId),tt.collectionId!==void 0&&(ft.collectionId=tt.collectionId),tt.type!==void 0&&(ft.type=tt.type!==void 0?ct(tt.type):void 0),ft},fromPartial(tt){var ft,gt,Ut;const Lt=Ft();return Lt.projectId=(ft=tt.projectId)!==null&&ft!==void 0?ft:void 0,Lt.collectionId=(gt=tt.collectionId)!==null&&gt!==void 0?gt:void 0,Lt.type=(Ut=tt.type)!==null&&Ut!==void 0?Ut:void 0,Lt}};function Wt(){return{layouts:[]}}a.ListLayoutsResponse={encode(tt,ft=b.Writer.create()){for(const gt of tt.layouts)a.Layout.encode(gt,ft.uint32(10).fork()).ldelim();return ft},decode(tt,ft){const gt=tt instanceof b.Reader?tt:new b.Reader(tt);let Ut=ft===void 0?gt.len:gt.pos+ft;const Lt=Wt();for(;gt.pos<Ut;){const Jt=gt.uint32();switch(Jt>>>3){case 1:Lt.layouts.push(a.Layout.decode(gt,gt.uint32()));break;default:gt.skipType(Jt&7);break}}return Lt},fromJSON(tt){return{layouts:Array.isArray(tt==null?void 0:tt.layouts)?tt.layouts.map(ft=>a.Layout.fromJSON(ft)):[]}},toJSON(tt){const ft={};return tt.layouts?ft.layouts=tt.layouts.map(gt=>gt?a.Layout.toJSON(gt):void 0):ft.layouts=[],ft},fromPartial(tt){var ft;const gt=Wt();return gt.layouts=((ft=tt.layouts)===null||ft===void 0?void 0:ft.map(Ut=>a.Layout.fromPartial(Ut)))||[],gt}};function Ht(){return{layout:void 0}}a.CreateLayoutRequest={encode(tt,ft=b.Writer.create()){return tt.layout!==void 0&&a.PartialLayout.encode(tt.layout,ft.uint32(18).fork()).ldelim(),ft},decode(tt,ft){const gt=tt instanceof b.Reader?tt:new b.Reader(tt);let Ut=ft===void 0?gt.len:gt.pos+ft;const Lt=Ht();for(;gt.pos<Ut;){const Jt=gt.uint32();switch(Jt>>>3){case 2:Lt.layout=a.PartialLayout.decode(gt,gt.uint32());break;default:gt.skipType(Jt&7);break}}return Lt},fromJSON(tt){return{layout:qt(tt.layout)?a.PartialLayout.fromJSON(tt.layout):void 0}},toJSON(tt){const ft={};return tt.layout!==void 0&&(ft.layout=tt.layout?a.PartialLayout.toJSON(tt.layout):void 0),ft},fromPartial(tt){const ft=Ht();return ft.layout=tt.layout!==void 0&&tt.layout!==null?a.PartialLayout.fromPartial(tt.layout):void 0,ft}};function Yt(){return{layoutId:""}}a.GetLayoutRequest={encode(tt,ft=b.Writer.create()){return tt.layoutId!==""&&ft.uint32(10).string(tt.layoutId),ft},decode(tt,ft){const gt=tt instanceof b.Reader?tt:new b.Reader(tt);let Ut=ft===void 0?gt.len:gt.pos+ft;const Lt=Yt();for(;gt.pos<Ut;){const Jt=gt.uint32();switch(Jt>>>3){case 1:Lt.layoutId=gt.string();break;default:gt.skipType(Jt&7);break}}return Lt},fromJSON(tt){return{layoutId:qt(tt.layoutId)?String(tt.layoutId):""}},toJSON(tt){const ft={};return tt.layoutId!==void 0&&(ft.layoutId=tt.layoutId),ft},fromPartial(tt){var ft;const gt=Yt();return gt.layoutId=(ft=tt.layoutId)!==null&&ft!==void 0?ft:"",gt}};function $(){return{layoutId:"",layout:void 0}}a.UpdateLayoutRequest={encode(tt,ft=b.Writer.create()){return tt.layoutId!==""&&ft.uint32(10).string(tt.layoutId),tt.layout!==void 0&&a.PartialLayout.encode(tt.layout,ft.uint32(26).fork()).ldelim(),ft},decode(tt,ft){const gt=tt instanceof b.Reader?tt:new b.Reader(tt);let Ut=ft===void 0?gt.len:gt.pos+ft;const Lt=$();for(;gt.pos<Ut;){const Jt=gt.uint32();switch(Jt>>>3){case 1:Lt.layoutId=gt.string();break;case 3:Lt.layout=a.PartialLayout.decode(gt,gt.uint32());break;default:gt.skipType(Jt&7);break}}return Lt},fromJSON(tt){return{layoutId:qt(tt.layoutId)?String(tt.layoutId):"",layout:qt(tt.layout)?a.PartialLayout.fromJSON(tt.layout):void 0}},toJSON(tt){const ft={};return tt.layoutId!==void 0&&(ft.layoutId=tt.layoutId),tt.layout!==void 0&&(ft.layout=tt.layout?a.PartialLayout.toJSON(tt.layout):void 0),ft},fromPartial(tt){var ft;const gt=$();return gt.layoutId=(ft=tt.layoutId)!==null&&ft!==void 0?ft:"",gt.layout=tt.layout!==void 0&&tt.layout!==null?a.PartialLayout.fromPartial(tt.layout):void 0,gt}};function rt(){return{requestMetadata:void 0}}a.DeleteLayoutPayload={encode(tt,ft=b.Writer.create()){return tt.requestMetadata!==void 0&&et.Value.encode(et.Value.wrap(tt.requestMetadata),ft.uint32(802).fork()).ldelim(),ft},decode(tt,ft){const gt=tt instanceof b.Reader?tt:new b.Reader(tt);let Ut=ft===void 0?gt.len:gt.pos+ft;const Lt=rt();for(;gt.pos<Ut;){const Jt=gt.uint32();switch(Jt>>>3){case 100:Lt.requestMetadata=et.Value.unwrap(et.Value.decode(gt,gt.uint32()));break;default:gt.skipType(Jt&7);break}}return Lt},fromJSON(tt){return{requestMetadata:qt(tt==null?void 0:tt.requestMetadata)?tt.requestMetadata:void 0}},toJSON(tt){const ft={};return tt.requestMetadata!==void 0&&(ft.requestMetadata=tt.requestMetadata),ft},fromPartial(tt){var ft;const gt=rt();return gt.requestMetadata=(ft=tt.requestMetadata)!==null&&ft!==void 0?ft:void 0,gt}};function mt(){return{layoutId:"",payload:void 0}}a.DeleteLayoutRequest={encode(tt,ft=b.Writer.create()){return tt.layoutId!==""&&ft.uint32(10).string(tt.layoutId),tt.payload!==void 0&&a.DeleteLayoutPayload.encode(tt.payload,ft.uint32(18).fork()).ldelim(),ft},decode(tt,ft){const gt=tt instanceof b.Reader?tt:new b.Reader(tt);let Ut=ft===void 0?gt.len:gt.pos+ft;const Lt=mt();for(;gt.pos<Ut;){const Jt=gt.uint32();switch(Jt>>>3){case 1:Lt.layoutId=gt.string();break;case 2:Lt.payload=a.DeleteLayoutPayload.decode(gt,gt.uint32());break;default:gt.skipType(Jt&7);break}}return Lt},fromJSON(tt){return{layoutId:qt(tt.layoutId)?String(tt.layoutId):"",payload:qt(tt.payload)?a.DeleteLayoutPayload.fromJSON(tt.payload):void 0}},toJSON(tt){const ft={};return tt.layoutId!==void 0&&(ft.layoutId=tt.layoutId),tt.payload!==void 0&&(ft.payload=tt.payload?a.DeleteLayoutPayload.toJSON(tt.payload):void 0),ft},fromPartial(tt){var ft;const gt=mt();return gt.layoutId=(ft=tt.layoutId)!==null&&ft!==void 0?ft:"",gt.payload=tt.payload!==void 0&&tt.payload!==null?a.DeleteLayoutPayload.fromPartial(tt.payload):void 0,gt}};function Vt(){return{id:"",requestMetadata:void 0}}a.DeleteLayoutResponse={encode(tt,ft=b.Writer.create()){return tt.id!==""&&ft.uint32(18).string(tt.id),tt.requestMetadata!==void 0&&et.Value.encode(et.Value.wrap(tt.requestMetadata),ft.uint32(802).fork()).ldelim(),ft},decode(tt,ft){const gt=tt instanceof b.Reader?tt:new b.Reader(tt);let Ut=ft===void 0?gt.len:gt.pos+ft;const Lt=Vt();for(;gt.pos<Ut;){const Jt=gt.uint32();switch(Jt>>>3){case 2:Lt.id=gt.string();break;case 100:Lt.requestMetadata=et.Value.unwrap(et.Value.decode(gt,gt.uint32()));break;default:gt.skipType(Jt&7);break}}return Lt},fromJSON(tt){return{id:qt(tt.id)?String(tt.id):"",requestMetadata:qt(tt==null?void 0:tt.requestMetadata)?tt.requestMetadata:void 0}},toJSON(tt){const ft={};return tt.id!==void 0&&(ft.id=tt.id),tt.requestMetadata!==void 0&&(ft.requestMetadata=tt.requestMetadata),ft},fromPartial(tt){var ft,gt;const Ut=Vt();return Ut.id=(ft=tt.id)!==null&&ft!==void 0?ft:"",Ut.requestMetadata=(gt=tt.requestMetadata)!==null&&gt!==void 0?gt:void 0,Ut}};function at(){return{properties:[],durationMs:0,delayMs:void 0,easingMode:void 0}}a.LayerAnimation={encode(tt,ft=b.Writer.create()){for(const gt of tt.properties)ft.uint32(10).string(gt);return tt.durationMs!==0&&ft.uint32(16).int32(tt.durationMs),tt.delayMs!==void 0&&ft.uint32(32).int32(tt.delayMs),tt.easingMode!==void 0&&ft.uint32(42).string(tt.easingMode),ft},decode(tt,ft){const gt=tt instanceof b.Reader?tt:new b.Reader(tt);let Ut=ft===void 0?gt.len:gt.pos+ft;const Lt=at();for(;gt.pos<Ut;){const Jt=gt.uint32();switch(Jt>>>3){case 1:Lt.properties.push(gt.string());break;case 2:Lt.durationMs=gt.int32();break;case 4:Lt.delayMs=gt.int32();break;case 5:Lt.easingMode=gt.string();break;default:gt.skipType(Jt&7);break}}return Lt},fromJSON(tt){return{properties:Array.isArray(tt==null?void 0:tt.properties)?tt.properties.map(ft=>String(ft)):[],durationMs:qt(tt.durationMs)?Number(tt.durationMs):0,delayMs:qt(tt.delayMs)?Number(tt.delayMs):void 0,easingMode:qt(tt.easingMode)?String(tt.easingMode):void 0}},toJSON(tt){const ft={};return tt.properties?ft.properties=tt.properties.map(gt=>gt):ft.properties=[],tt.durationMs!==void 0&&(ft.durationMs=Math.round(tt.durationMs)),tt.delayMs!==void 0&&(ft.delayMs=Math.round(tt.delayMs)),tt.easingMode!==void 0&&(ft.easingMode=tt.easingMode),ft},fromPartial(tt){var ft,gt,Ut,Lt;const Jt=at();return Jt.properties=((ft=tt.properties)===null||ft===void 0?void 0:ft.map(Sn=>Sn))||[],Jt.durationMs=(gt=tt.durationMs)!==null&&gt!==void 0?gt:0,Jt.delayMs=(Ut=tt.delayMs)!==null&&Ut!==void 0?Ut:void 0,Jt.easingMode=(Lt=tt.easingMode)!==null&&Lt!==void 0?Lt:void 0,Jt}};function yt(){return{type:void 0,data:void 0,x:void 0,y:void 0,width:void 0,height:void 0,rotation:void 0,opacity:void 0,scale:void 0,hidden:void 0,locked:void 0,children:void 0,parentId:void 0,requestMetadata:void 0,requestAnimation:[]}}a.PartialLayer={encode(tt,ft=b.Writer.create()){tt.type!==void 0&&ft.uint32(10).string(tt.type),tt.data!==void 0&&et.Struct.encode(et.Struct.wrap(tt.data),ft.uint32(18).fork()).ldelim(),tt.x!==void 0&&et.Value.encode(et.Value.wrap(tt.x),ft.uint32(26).fork()).ldelim(),tt.y!==void 0&&et.Value.encode(et.Value.wrap(tt.y),ft.uint32(34).fork()).ldelim(),tt.width!==void 0&&et.Value.encode(et.Value.wrap(tt.width),ft.uint32(42).fork()).ldelim(),tt.height!==void 0&&et.Value.encode(et.Value.wrap(tt.height),ft.uint32(50).fork()).ldelim(),tt.rotation!==void 0&&ft.uint32(57).double(tt.rotation),tt.opacity!==void 0&&ft.uint32(65).double(tt.opacity),tt.scale!==void 0&&ft.uint32(73).double(tt.scale),tt.hidden!==void 0&&ft.uint32(80).bool(tt.hidden),tt.locked!==void 0&&ft.uint32(88).bool(tt.locked),tt.children!==void 0&&et.ListValue.encode(et.ListValue.wrap(tt.children),ft.uint32(98).fork()).ldelim(),tt.parentId!==void 0&&ft.uint32(106).string(tt.parentId),tt.requestMetadata!==void 0&&et.Value.encode(et.Value.wrap(tt.requestMetadata),ft.uint32(802).fork()).ldelim();for(const gt of tt.requestAnimation)a.LayerAnimation.encode(gt,ft.uint32(826).fork()).ldelim();return ft},decode(tt,ft){const gt=tt instanceof b.Reader?tt:new b.Reader(tt);let Ut=ft===void 0?gt.len:gt.pos+ft;const Lt=yt();for(;gt.pos<Ut;){const Jt=gt.uint32();switch(Jt>>>3){case 1:Lt.type=gt.string();break;case 2:Lt.data=et.Struct.unwrap(et.Struct.decode(gt,gt.uint32()));break;case 3:Lt.x=et.Value.unwrap(et.Value.decode(gt,gt.uint32()));break;case 4:Lt.y=et.Value.unwrap(et.Value.decode(gt,gt.uint32()));break;case 5:Lt.width=et.Value.unwrap(et.Value.decode(gt,gt.uint32()));break;case 6:Lt.height=et.Value.unwrap(et.Value.decode(gt,gt.uint32()));break;case 7:Lt.rotation=gt.double();break;case 8:Lt.opacity=gt.double();break;case 9:Lt.scale=gt.double();break;case 10:Lt.hidden=gt.bool();break;case 11:Lt.locked=gt.bool();break;case 12:Lt.children=et.ListValue.unwrap(et.ListValue.decode(gt,gt.uint32()));break;case 13:Lt.parentId=gt.string();break;case 100:Lt.requestMetadata=et.Value.unwrap(et.Value.decode(gt,gt.uint32()));break;case 103:Lt.requestAnimation.push(a.LayerAnimation.decode(gt,gt.uint32()));break;default:gt.skipType(Jt&7);break}}return Lt},fromJSON(tt){return{type:qt(tt.type)?String(tt.type):void 0,data:Un(tt.data)?tt.data:void 0,x:qt(tt==null?void 0:tt.x)?tt.x:void 0,y:qt(tt==null?void 0:tt.y)?tt.y:void 0,width:qt(tt==null?void 0:tt.width)?tt.width:void 0,height:qt(tt==null?void 0:tt.height)?tt.height:void 0,rotation:qt(tt.rotation)?Number(tt.rotation):void 0,opacity:qt(tt.opacity)?Number(tt.opacity):void 0,scale:qt(tt.scale)?Number(tt.scale):void 0,hidden:qt(tt.hidden)?Boolean(tt.hidden):void 0,locked:qt(tt.locked)?Boolean(tt.locked):void 0,children:Array.isArray(tt.children)?[...tt.children]:void 0,parentId:qt(tt.parentId)?String(tt.parentId):void 0,requestMetadata:qt(tt==null?void 0:tt.requestMetadata)?tt.requestMetadata:void 0,requestAnimation:Array.isArray(tt==null?void 0:tt.requestAnimation)?tt.requestAnimation.map(ft=>a.LayerAnimation.fromJSON(ft)):[]}},toJSON(tt){const ft={};return tt.type!==void 0&&(ft.type=tt.type),tt.data!==void 0&&(ft.data=tt.data),tt.x!==void 0&&(ft.x=tt.x),tt.y!==void 0&&(ft.y=tt.y),tt.width!==void 0&&(ft.width=tt.width),tt.height!==void 0&&(ft.height=tt.height),tt.rotation!==void 0&&(ft.rotation=tt.rotation),tt.opacity!==void 0&&(ft.opacity=tt.opacity),tt.scale!==void 0&&(ft.scale=tt.scale),tt.hidden!==void 0&&(ft.hidden=tt.hidden),tt.locked!==void 0&&(ft.locked=tt.locked),tt.children!==void 0&&(ft.children=tt.children),tt.parentId!==void 0&&(ft.parentId=tt.parentId),tt.requestMetadata!==void 0&&(ft.requestMetadata=tt.requestMetadata),tt.requestAnimation?ft.requestAnimation=tt.requestAnimation.map(gt=>gt?a.LayerAnimation.toJSON(gt):void 0):ft.requestAnimation=[],ft},fromPartial(tt){var ft,gt,Ut,Lt,Jt,Sn,_n,pn,gn,Rn,wn,Cn,Pn,Nn,An;const hn=yt();return hn.type=(ft=tt.type)!==null&&ft!==void 0?ft:void 0,hn.data=(gt=tt.data)!==null&&gt!==void 0?gt:void 0,hn.x=(Ut=tt.x)!==null&&Ut!==void 0?Ut:void 0,hn.y=(Lt=tt.y)!==null&&Lt!==void 0?Lt:void 0,hn.width=(Jt=tt.width)!==null&&Jt!==void 0?Jt:void 0,hn.height=(Sn=tt.height)!==null&&Sn!==void 0?Sn:void 0,hn.rotation=(_n=tt.rotation)!==null&&_n!==void 0?_n:void 0,hn.opacity=(pn=tt.opacity)!==null&&pn!==void 0?pn:void 0,hn.scale=(gn=tt.scale)!==null&&gn!==void 0?gn:void 0,hn.hidden=(Rn=tt.hidden)!==null&&Rn!==void 0?Rn:void 0,hn.locked=(wn=tt.locked)!==null&&wn!==void 0?wn:void 0,hn.children=(Cn=tt.children)!==null&&Cn!==void 0?Cn:void 0,hn.parentId=(Pn=tt.parentId)!==null&&Pn!==void 0?Pn:void 0,hn.requestMetadata=(Nn=tt.requestMetadata)!==null&&Nn!==void 0?Nn:void 0,hn.requestAnimation=((An=tt.requestAnimation)===null||An===void 0?void 0:An.map(sn=>a.LayerAnimation.fromPartial(sn)))||[],hn}};function Dt(){return{id:"",type:void 0,data:void 0,x:void 0,y:void 0,width:void 0,height:void 0,rotation:void 0,opacity:void 0,scale:void 0,hidden:void 0,locked:void 0,children:void 0,parentId:void 0,requestMetadata:void 0,requestAnimation:[]}}a.PartialLayerWithID={encode(tt,ft=b.Writer.create()){tt.id!==""&&ft.uint32(8002).string(tt.id),tt.type!==void 0&&ft.uint32(10).string(tt.type),tt.data!==void 0&&et.Struct.encode(et.Struct.wrap(tt.data),ft.uint32(18).fork()).ldelim(),tt.x!==void 0&&et.Value.encode(et.Value.wrap(tt.x),ft.uint32(26).fork()).ldelim(),tt.y!==void 0&&et.Value.encode(et.Value.wrap(tt.y),ft.uint32(34).fork()).ldelim(),tt.width!==void 0&&et.Value.encode(et.Value.wrap(tt.width),ft.uint32(42).fork()).ldelim(),tt.height!==void 0&&et.Value.encode(et.Value.wrap(tt.height),ft.uint32(50).fork()).ldelim(),tt.rotation!==void 0&&ft.uint32(57).double(tt.rotation),tt.opacity!==void 0&&ft.uint32(65).double(tt.opacity),tt.scale!==void 0&&ft.uint32(73).double(tt.scale),tt.hidden!==void 0&&ft.uint32(80).bool(tt.hidden),tt.locked!==void 0&&ft.uint32(88).bool(tt.locked),tt.children!==void 0&&et.ListValue.encode(et.ListValue.wrap(tt.children),ft.uint32(98).fork()).ldelim(),tt.parentId!==void 0&&ft.uint32(106).string(tt.parentId),tt.requestMetadata!==void 0&&et.Value.encode(et.Value.wrap(tt.requestMetadata),ft.uint32(802).fork()).ldelim();for(const gt of tt.requestAnimation)a.LayerAnimation.encode(gt,ft.uint32(826).fork()).ldelim();return ft},decode(tt,ft){const gt=tt instanceof b.Reader?tt:new b.Reader(tt);let Ut=ft===void 0?gt.len:gt.pos+ft;const Lt=Dt();for(;gt.pos<Ut;){const Jt=gt.uint32();switch(Jt>>>3){case 1e3:Lt.id=gt.string();break;case 1:Lt.type=gt.string();break;case 2:Lt.data=et.Struct.unwrap(et.Struct.decode(gt,gt.uint32()));break;case 3:Lt.x=et.Value.unwrap(et.Value.decode(gt,gt.uint32()));break;case 4:Lt.y=et.Value.unwrap(et.Value.decode(gt,gt.uint32()));break;case 5:Lt.width=et.Value.unwrap(et.Value.decode(gt,gt.uint32()));break;case 6:Lt.height=et.Value.unwrap(et.Value.decode(gt,gt.uint32()));break;case 7:Lt.rotation=gt.double();break;case 8:Lt.opacity=gt.double();break;case 9:Lt.scale=gt.double();break;case 10:Lt.hidden=gt.bool();break;case 11:Lt.locked=gt.bool();break;case 12:Lt.children=et.ListValue.unwrap(et.ListValue.decode(gt,gt.uint32()));break;case 13:Lt.parentId=gt.string();break;case 100:Lt.requestMetadata=et.Value.unwrap(et.Value.decode(gt,gt.uint32()));break;case 103:Lt.requestAnimation.push(a.LayerAnimation.decode(gt,gt.uint32()));break;default:gt.skipType(Jt&7);break}}return Lt},fromJSON(tt){return{id:qt(tt.id)?String(tt.id):"",type:qt(tt.type)?String(tt.type):void 0,data:Un(tt.data)?tt.data:void 0,x:qt(tt==null?void 0:tt.x)?tt.x:void 0,y:qt(tt==null?void 0:tt.y)?tt.y:void 0,width:qt(tt==null?void 0:tt.width)?tt.width:void 0,height:qt(tt==null?void 0:tt.height)?tt.height:void 0,rotation:qt(tt.rotation)?Number(tt.rotation):void 0,opacity:qt(tt.opacity)?Number(tt.opacity):void 0,scale:qt(tt.scale)?Number(tt.scale):void 0,hidden:qt(tt.hidden)?Boolean(tt.hidden):void 0,locked:qt(tt.locked)?Boolean(tt.locked):void 0,children:Array.isArray(tt.children)?[...tt.children]:void 0,parentId:qt(tt.parentId)?String(tt.parentId):void 0,requestMetadata:qt(tt==null?void 0:tt.requestMetadata)?tt.requestMetadata:void 0,requestAnimation:Array.isArray(tt==null?void 0:tt.requestAnimation)?tt.requestAnimation.map(ft=>a.LayerAnimation.fromJSON(ft)):[]}},toJSON(tt){const ft={};return tt.id!==void 0&&(ft.id=tt.id),tt.type!==void 0&&(ft.type=tt.type),tt.data!==void 0&&(ft.data=tt.data),tt.x!==void 0&&(ft.x=tt.x),tt.y!==void 0&&(ft.y=tt.y),tt.width!==void 0&&(ft.width=tt.width),tt.height!==void 0&&(ft.height=tt.height),tt.rotation!==void 0&&(ft.rotation=tt.rotation),tt.opacity!==void 0&&(ft.opacity=tt.opacity),tt.scale!==void 0&&(ft.scale=tt.scale),tt.hidden!==void 0&&(ft.hidden=tt.hidden),tt.locked!==void 0&&(ft.locked=tt.locked),tt.children!==void 0&&(ft.children=tt.children),tt.parentId!==void 0&&(ft.parentId=tt.parentId),tt.requestMetadata!==void 0&&(ft.requestMetadata=tt.requestMetadata),tt.requestAnimation?ft.requestAnimation=tt.requestAnimation.map(gt=>gt?a.LayerAnimation.toJSON(gt):void 0):ft.requestAnimation=[],ft},fromPartial(tt){var ft,gt,Ut,Lt,Jt,Sn,_n,pn,gn,Rn,wn,Cn,Pn,Nn,An,hn;const sn=Dt();return sn.id=(ft=tt.id)!==null&&ft!==void 0?ft:"",sn.type=(gt=tt.type)!==null&&gt!==void 0?gt:void 0,sn.data=(Ut=tt.data)!==null&&Ut!==void 0?Ut:void 0,sn.x=(Lt=tt.x)!==null&&Lt!==void 0?Lt:void 0,sn.y=(Jt=tt.y)!==null&&Jt!==void 0?Jt:void 0,sn.width=(Sn=tt.width)!==null&&Sn!==void 0?Sn:void 0,sn.height=(_n=tt.height)!==null&&_n!==void 0?_n:void 0,sn.rotation=(pn=tt.rotation)!==null&&pn!==void 0?pn:void 0,sn.opacity=(gn=tt.opacity)!==null&&gn!==void 0?gn:void 0,sn.scale=(Rn=tt.scale)!==null&&Rn!==void 0?Rn:void 0,sn.hidden=(wn=tt.hidden)!==null&&wn!==void 0?wn:void 0,sn.locked=(Cn=tt.locked)!==null&&Cn!==void 0?Cn:void 0,sn.children=(Pn=tt.children)!==null&&Pn!==void 0?Pn:void 0,sn.parentId=(Nn=tt.parentId)!==null&&Nn!==void 0?Nn:void 0,sn.requestMetadata=(An=tt.requestMetadata)!==null&&An!==void 0?An:void 0,sn.requestAnimation=((hn=tt.requestAnimation)===null||hn===void 0?void 0:hn.map(Vn=>a.LayerAnimation.fromPartial(Vn)))||[],sn}};function Gt(){return{layoutId:""}}a.ListLayersRequest={encode(tt,ft=b.Writer.create()){return tt.layoutId!==""&&ft.uint32(10).string(tt.layoutId),ft},decode(tt,ft){const gt=tt instanceof b.Reader?tt:new b.Reader(tt);let Ut=ft===void 0?gt.len:gt.pos+ft;const Lt=Gt();for(;gt.pos<Ut;){const Jt=gt.uint32();switch(Jt>>>3){case 1:Lt.layoutId=gt.string();break;default:gt.skipType(Jt&7);break}}return Lt},fromJSON(tt){return{layoutId:qt(tt.layoutId)?String(tt.layoutId):""}},toJSON(tt){const ft={};return tt.layoutId!==void 0&&(ft.layoutId=tt.layoutId),ft},fromPartial(tt){var ft;const gt=Gt();return gt.layoutId=(ft=tt.layoutId)!==null&&ft!==void 0?ft:"",gt}};function Bt(){return{layers:[]}}a.ListLayersResponse={encode(tt,ft=b.Writer.create()){for(const gt of tt.layers)a.Layer.encode(gt,ft.uint32(10).fork()).ldelim();return ft},decode(tt,ft){const gt=tt instanceof b.Reader?tt:new b.Reader(tt);let Ut=ft===void 0?gt.len:gt.pos+ft;const Lt=Bt();for(;gt.pos<Ut;){const Jt=gt.uint32();switch(Jt>>>3){case 1:Lt.layers.push(a.Layer.decode(gt,gt.uint32()));break;default:gt.skipType(Jt&7);break}}return Lt},fromJSON(tt){return{layers:Array.isArray(tt==null?void 0:tt.layers)?tt.layers.map(ft=>a.Layer.fromJSON(ft)):[]}},toJSON(tt){const ft={};return tt.layers?ft.layers=tt.layers.map(gt=>gt?a.Layer.toJSON(gt):void 0):ft.layers=[],ft},fromPartial(tt){var ft;const gt=Bt();return gt.layers=((ft=tt.layers)===null||ft===void 0?void 0:ft.map(Ut=>a.Layer.fromPartial(Ut)))||[],gt}};function xt(){return{layoutId:"",layer:void 0}}a.CreateLayerRequest={encode(tt,ft=b.Writer.create()){return tt.layoutId!==""&&ft.uint32(10).string(tt.layoutId),tt.layer!==void 0&&a.PartialLayer.encode(tt.layer,ft.uint32(18).fork()).ldelim(),ft},decode(tt,ft){const gt=tt instanceof b.Reader?tt:new b.Reader(tt);let Ut=ft===void 0?gt.len:gt.pos+ft;const Lt=xt();for(;gt.pos<Ut;){const Jt=gt.uint32();switch(Jt>>>3){case 1:Lt.layoutId=gt.string();break;case 2:Lt.layer=a.PartialLayer.decode(gt,gt.uint32());break;default:gt.skipType(Jt&7);break}}return Lt},fromJSON(tt){return{layoutId:qt(tt.layoutId)?String(tt.layoutId):"",layer:qt(tt.layer)?a.PartialLayer.fromJSON(tt.layer):void 0}},toJSON(tt){const ft={};return tt.layoutId!==void 0&&(ft.layoutId=tt.layoutId),tt.layer!==void 0&&(ft.layer=tt.layer?a.PartialLayer.toJSON(tt.layer):void 0),ft},fromPartial(tt){var ft;const gt=xt();return gt.layoutId=(ft=tt.layoutId)!==null&&ft!==void 0?ft:"",gt.layer=tt.layer!==void 0&&tt.layer!==null?a.PartialLayer.fromPartial(tt.layer):void 0,gt}};function tn(){return{layoutId:"",layerId:""}}a.GetLayerRequest={encode(tt,ft=b.Writer.create()){return tt.layoutId!==""&&ft.uint32(10).string(tt.layoutId),tt.layerId!==""&&ft.uint32(18).string(tt.layerId),ft},decode(tt,ft){const gt=tt instanceof b.Reader?tt:new b.Reader(tt);let Ut=ft===void 0?gt.len:gt.pos+ft;const Lt=tn();for(;gt.pos<Ut;){const Jt=gt.uint32();switch(Jt>>>3){case 1:Lt.layoutId=gt.string();break;case 2:Lt.layerId=gt.string();break;default:gt.skipType(Jt&7);break}}return Lt},fromJSON(tt){return{layoutId:qt(tt.layoutId)?String(tt.layoutId):"",layerId:qt(tt.layerId)?String(tt.layerId):""}},toJSON(tt){const ft={};return tt.layoutId!==void 0&&(ft.layoutId=tt.layoutId),tt.layerId!==void 0&&(ft.layerId=tt.layerId),ft},fromPartial(tt){var ft,gt;const Ut=tn();return Ut.layoutId=(ft=tt.layoutId)!==null&&ft!==void 0?ft:"",Ut.layerId=(gt=tt.layerId)!==null&&gt!==void 0?gt:"",Ut}};function dn(){return{layoutId:"",layerId:"",layer:void 0}}a.UpdateLayerRequest={encode(tt,ft=b.Writer.create()){return tt.layoutId!==""&&ft.uint32(10).string(tt.layoutId),tt.layerId!==""&&ft.uint32(18).string(tt.layerId),tt.layer!==void 0&&a.PartialLayer.encode(tt.layer,ft.uint32(26).fork()).ldelim(),ft},decode(tt,ft){const gt=tt instanceof b.Reader?tt:new b.Reader(tt);let Ut=ft===void 0?gt.len:gt.pos+ft;const Lt=dn();for(;gt.pos<Ut;){const Jt=gt.uint32();switch(Jt>>>3){case 1:Lt.layoutId=gt.string();break;case 2:Lt.layerId=gt.string();break;case 3:Lt.layer=a.PartialLayer.decode(gt,gt.uint32());break;default:gt.skipType(Jt&7);break}}return Lt},fromJSON(tt){return{layoutId:qt(tt.layoutId)?String(tt.layoutId):"",layerId:qt(tt.layerId)?String(tt.layerId):"",layer:qt(tt.layer)?a.PartialLayer.fromJSON(tt.layer):void 0}},toJSON(tt){const ft={};return tt.layoutId!==void 0&&(ft.layoutId=tt.layoutId),tt.layerId!==void 0&&(ft.layerId=tt.layerId),tt.layer!==void 0&&(ft.layer=tt.layer?a.PartialLayer.toJSON(tt.layer):void 0),ft},fromPartial(tt){var ft,gt;const Ut=dn();return Ut.layoutId=(ft=tt.layoutId)!==null&&ft!==void 0?ft:"",Ut.layerId=(gt=tt.layerId)!==null&&gt!==void 0?gt:"",Ut.layer=tt.layer!==void 0&&tt.layer!==null?a.PartialLayer.fromPartial(tt.layer):void 0,Ut}};function Qt(){return{requestMetadata:void 0}}a.DeleteLayerPayload={encode(tt,ft=b.Writer.create()){return tt.requestMetadata!==void 0&&et.Value.encode(et.Value.wrap(tt.requestMetadata),ft.uint32(802).fork()).ldelim(),ft},decode(tt,ft){const gt=tt instanceof b.Reader?tt:new b.Reader(tt);let Ut=ft===void 0?gt.len:gt.pos+ft;const Lt=Qt();for(;gt.pos<Ut;){const Jt=gt.uint32();switch(Jt>>>3){case 100:Lt.requestMetadata=et.Value.unwrap(et.Value.decode(gt,gt.uint32()));break;default:gt.skipType(Jt&7);break}}return Lt},fromJSON(tt){return{requestMetadata:qt(tt==null?void 0:tt.requestMetadata)?tt.requestMetadata:void 0}},toJSON(tt){const ft={};return tt.requestMetadata!==void 0&&(ft.requestMetadata=tt.requestMetadata),ft},fromPartial(tt){var ft;const gt=Qt();return gt.requestMetadata=(ft=tt.requestMetadata)!==null&&ft!==void 0?ft:void 0,gt}};function rn(){return{layoutId:"",layerId:"",payload:void 0}}a.DeleteLayerRequest={encode(tt,ft=b.Writer.create()){return tt.layoutId!==""&&ft.uint32(10).string(tt.layoutId),tt.layerId!==""&&ft.uint32(18).string(tt.layerId),tt.payload!==void 0&&a.DeleteLayerPayload.encode(tt.payload,ft.uint32(26).fork()).ldelim(),ft},decode(tt,ft){const gt=tt instanceof b.Reader?tt:new b.Reader(tt);let Ut=ft===void 0?gt.len:gt.pos+ft;const Lt=rn();for(;gt.pos<Ut;){const Jt=gt.uint32();switch(Jt>>>3){case 1:Lt.layoutId=gt.string();break;case 2:Lt.layerId=gt.string();break;case 3:Lt.payload=a.DeleteLayerPayload.decode(gt,gt.uint32());break;default:gt.skipType(Jt&7);break}}return Lt},fromJSON(tt){return{layoutId:qt(tt.layoutId)?String(tt.layoutId):"",layerId:qt(tt.layerId)?String(tt.layerId):"",payload:qt(tt.payload)?a.DeleteLayerPayload.fromJSON(tt.payload):void 0}},toJSON(tt){const ft={};return tt.layoutId!==void 0&&(ft.layoutId=tt.layoutId),tt.layerId!==void 0&&(ft.layerId=tt.layerId),tt.payload!==void 0&&(ft.payload=tt.payload?a.DeleteLayerPayload.toJSON(tt.payload):void 0),ft},fromPartial(tt){var ft,gt;const Ut=rn();return Ut.layoutId=(ft=tt.layoutId)!==null&&ft!==void 0?ft:"",Ut.layerId=(gt=tt.layerId)!==null&&gt!==void 0?gt:"",Ut.payload=tt.payload!==void 0&&tt.payload!==null?a.DeleteLayerPayload.fromPartial(tt.payload):void 0,Ut}};function mn(){return{id:"",requestMetadata:void 0}}a.BatchDeleteLayerRequest={encode(tt,ft=b.Writer.create()){return tt.id!==""&&ft.uint32(10).string(tt.id),tt.requestMetadata!==void 0&&et.Value.encode(et.Value.wrap(tt.requestMetadata),ft.uint32(802).fork()).ldelim(),ft},decode(tt,ft){const gt=tt instanceof b.Reader?tt:new b.Reader(tt);let Ut=ft===void 0?gt.len:gt.pos+ft;const Lt=mn();for(;gt.pos<Ut;){const Jt=gt.uint32();switch(Jt>>>3){case 1:Lt.id=gt.string();break;case 100:Lt.requestMetadata=et.Value.unwrap(et.Value.decode(gt,gt.uint32()));break;default:gt.skipType(Jt&7);break}}return Lt},fromJSON(tt){return{id:qt(tt.id)?String(tt.id):"",requestMetadata:qt(tt==null?void 0:tt.requestMetadata)?tt.requestMetadata:void 0}},toJSON(tt){const ft={};return tt.id!==void 0&&(ft.id=tt.id),tt.requestMetadata!==void 0&&(ft.requestMetadata=tt.requestMetadata),ft},fromPartial(tt){var ft,gt;const Ut=mn();return Ut.id=(ft=tt.id)!==null&&ft!==void 0?ft:"",Ut.requestMetadata=(gt=tt.requestMetadata)!==null&&gt!==void 0?gt:void 0,Ut}};function On(){return{layoutId:"",layers:[],requestMetadata:void 0}}a.BatchLayerRequest={encode(tt,ft=b.Writer.create()){tt.layoutId!==""&&ft.uint32(10).string(tt.layoutId);for(const gt of tt.layers)a.BatchLayerRequest_BatchItem.encode(gt,ft.uint32(18).fork()).ldelim();return tt.requestMetadata!==void 0&&et.Value.encode(et.Value.wrap(tt.requestMetadata),ft.uint32(802).fork()).ldelim(),ft},decode(tt,ft){const gt=tt instanceof b.Reader?tt:new b.Reader(tt);let Ut=ft===void 0?gt.len:gt.pos+ft;const Lt=On();for(;gt.pos<Ut;){const Jt=gt.uint32();switch(Jt>>>3){case 1:Lt.layoutId=gt.string();break;case 2:Lt.layers.push(a.BatchLayerRequest_BatchItem.decode(gt,gt.uint32()));break;case 100:Lt.requestMetadata=et.Value.unwrap(et.Value.decode(gt,gt.uint32()));break;default:gt.skipType(Jt&7);break}}return Lt},fromJSON(tt){return{layoutId:qt(tt.layoutId)?String(tt.layoutId):"",layers:Array.isArray(tt==null?void 0:tt.layers)?tt.layers.map(ft=>a.BatchLayerRequest_BatchItem.fromJSON(ft)):[],requestMetadata:qt(tt==null?void 0:tt.requestMetadata)?tt.requestMetadata:void 0}},toJSON(tt){const ft={};return tt.layoutId!==void 0&&(ft.layoutId=tt.layoutId),tt.layers?ft.layers=tt.layers.map(gt=>gt?a.BatchLayerRequest_BatchItem.toJSON(gt):void 0):ft.layers=[],tt.requestMetadata!==void 0&&(ft.requestMetadata=tt.requestMetadata),ft},fromPartial(tt){var ft,gt,Ut;const Lt=On();return Lt.layoutId=(ft=tt.layoutId)!==null&&ft!==void 0?ft:"",Lt.layers=((gt=tt.layers)===null||gt===void 0?void 0:gt.map(Jt=>a.BatchLayerRequest_BatchItem.fromPartial(Jt)))||[],Lt.requestMetadata=(Ut=tt.requestMetadata)!==null&&Ut!==void 0?Ut:void 0,Lt}};function Xt(){return{create:void 0,update:void 0,delete:void 0}}a.BatchLayerRequest_BatchItem={encode(tt,ft=b.Writer.create()){return tt.create!==void 0&&a.PartialLayer.encode(tt.create,ft.uint32(10).fork()).ldelim(),tt.update!==void 0&&a.PartialLayerWithID.encode(tt.update,ft.uint32(18).fork()).ldelim(),tt.delete!==void 0&&a.BatchDeleteLayerRequest.encode(tt.delete,ft.uint32(26).fork()).ldelim(),ft},decode(tt,ft){const gt=tt instanceof b.Reader?tt:new b.Reader(tt);let Ut=ft===void 0?gt.len:gt.pos+ft;const Lt=Xt();for(;gt.pos<Ut;){const Jt=gt.uint32();switch(Jt>>>3){case 1:Lt.create=a.PartialLayer.decode(gt,gt.uint32());break;case 2:Lt.update=a.PartialLayerWithID.decode(gt,gt.uint32());break;case 3:Lt.delete=a.BatchDeleteLayerRequest.decode(gt,gt.uint32());break;default:gt.skipType(Jt&7);break}}return Lt},fromJSON(tt){return{create:qt(tt.create)?a.PartialLayer.fromJSON(tt.create):void 0,update:qt(tt.update)?a.PartialLayerWithID.fromJSON(tt.update):void 0,delete:qt(tt.delete)?a.BatchDeleteLayerRequest.fromJSON(tt.delete):void 0}},toJSON(tt){const ft={};return tt.create!==void 0&&(ft.create=tt.create?a.PartialLayer.toJSON(tt.create):void 0),tt.update!==void 0&&(ft.update=tt.update?a.PartialLayerWithID.toJSON(tt.update):void 0),tt.delete!==void 0&&(ft.delete=tt.delete?a.BatchDeleteLayerRequest.toJSON(tt.delete):void 0),ft},fromPartial(tt){const ft=Xt();return ft.create=tt.create!==void 0&&tt.create!==null?a.PartialLayer.fromPartial(tt.create):void 0,ft.update=tt.update!==void 0&&tt.update!==null?a.PartialLayerWithID.fromPartial(tt.update):void 0,ft.delete=tt.delete!==void 0&&tt.delete!==null?a.BatchDeleteLayerRequest.fromPartial(tt.delete):void 0,ft}};function bn(){return{create:void 0,update:void 0,delete:void 0}}a.LayoutEvent={encode(tt,ft=b.Writer.create()){return tt.create!==void 0&&a.Layout.encode(tt.create,ft.uint32(10).fork()).ldelim(),tt.update!==void 0&&a.Layout.encode(tt.update,ft.uint32(18).fork()).ldelim(),tt.delete!==void 0&&a.DeleteLayoutResponse.encode(tt.delete,ft.uint32(26).fork()).ldelim(),ft},decode(tt,ft){const gt=tt instanceof b.Reader?tt:new b.Reader(tt);let Ut=ft===void 0?gt.len:gt.pos+ft;const Lt=bn();for(;gt.pos<Ut;){const Jt=gt.uint32();switch(Jt>>>3){case 1:Lt.create=a.Layout.decode(gt,gt.uint32());break;case 2:Lt.update=a.Layout.decode(gt,gt.uint32());break;case 3:Lt.delete=a.DeleteLayoutResponse.decode(gt,gt.uint32());break;default:gt.skipType(Jt&7);break}}return Lt},fromJSON(tt){return{create:qt(tt.create)?a.Layout.fromJSON(tt.create):void 0,update:qt(tt.update)?a.Layout.fromJSON(tt.update):void 0,delete:qt(tt.delete)?a.DeleteLayoutResponse.fromJSON(tt.delete):void 0}},toJSON(tt){const ft={};return tt.create!==void 0&&(ft.create=tt.create?a.Layout.toJSON(tt.create):void 0),tt.update!==void 0&&(ft.update=tt.update?a.Layout.toJSON(tt.update):void 0),tt.delete!==void 0&&(ft.delete=tt.delete?a.DeleteLayoutResponse.toJSON(tt.delete):void 0),ft},fromPartial(tt){const ft=bn();return ft.create=tt.create!==void 0&&tt.create!==null?a.Layout.fromPartial(tt.create):void 0,ft.update=tt.update!==void 0&&tt.update!==null?a.Layout.fromPartial(tt.update):void 0,ft.delete=tt.delete!==void 0&&tt.delete!==null?a.DeleteLayoutResponse.fromPartial(tt.delete):void 0,ft}};function $n(){return{create:void 0,update:void 0,delete:void 0,batch:void 0}}a.LayerEvent={encode(tt,ft=b.Writer.create()){return tt.create!==void 0&&a.Layer.encode(tt.create,ft.uint32(10).fork()).ldelim(),tt.update!==void 0&&a.Layer.encode(tt.update,ft.uint32(18).fork()).ldelim(),tt.delete!==void 0&&a.DeleteLayerResponse.encode(tt.delete,ft.uint32(26).fork()).ldelim(),tt.batch!==void 0&&a.BatchLayerResponse.encode(tt.batch,ft.uint32(34).fork()).ldelim(),ft},decode(tt,ft){const gt=tt instanceof b.Reader?tt:new b.Reader(tt);let Ut=ft===void 0?gt.len:gt.pos+ft;const Lt=$n();for(;gt.pos<Ut;){const Jt=gt.uint32();switch(Jt>>>3){case 1:Lt.create=a.Layer.decode(gt,gt.uint32());break;case 2:Lt.update=a.Layer.decode(gt,gt.uint32());break;case 3:Lt.delete=a.DeleteLayerResponse.decode(gt,gt.uint32());break;case 4:Lt.batch=a.BatchLayerResponse.decode(gt,gt.uint32());break;default:gt.skipType(Jt&7);break}}return Lt},fromJSON(tt){return{create:qt(tt.create)?a.Layer.fromJSON(tt.create):void 0,update:qt(tt.update)?a.Layer.fromJSON(tt.update):void 0,delete:qt(tt.delete)?a.DeleteLayerResponse.fromJSON(tt.delete):void 0,batch:qt(tt.batch)?a.BatchLayerResponse.fromJSON(tt.batch):void 0}},toJSON(tt){const ft={};return tt.create!==void 0&&(ft.create=tt.create?a.Layer.toJSON(tt.create):void 0),tt.update!==void 0&&(ft.update=tt.update?a.Layer.toJSON(tt.update):void 0),tt.delete!==void 0&&(ft.delete=tt.delete?a.DeleteLayerResponse.toJSON(tt.delete):void 0),tt.batch!==void 0&&(ft.batch=tt.batch?a.BatchLayerResponse.toJSON(tt.batch):void 0),ft},fromPartial(tt){const ft=$n();return ft.create=tt.create!==void 0&&tt.create!==null?a.Layer.fromPartial(tt.create):void 0,ft.update=tt.update!==void 0&&tt.update!==null?a.Layer.fromPartial(tt.update):void 0,ft.delete=tt.delete!==void 0&&tt.delete!==null?a.DeleteLayerResponse.fromPartial(tt.delete):void 0,ft.batch=tt.batch!==void 0&&tt.batch!==null?a.BatchLayerResponse.fromPartial(tt.batch):void 0,ft}};function Ln(){return{layout:void 0,layer:void 0}}a.Event={encode(tt,ft=b.Writer.create()){return tt.layout!==void 0&&a.LayoutEvent.encode(tt.layout,ft.uint32(10).fork()).ldelim(),tt.layer!==void 0&&a.LayerEvent.encode(tt.layer,ft.uint32(18).fork()).ldelim(),ft},decode(tt,ft){const gt=tt instanceof b.Reader?tt:new b.Reader(tt);let Ut=ft===void 0?gt.len:gt.pos+ft;const Lt=Ln();for(;gt.pos<Ut;){const Jt=gt.uint32();switch(Jt>>>3){case 1:Lt.layout=a.LayoutEvent.decode(gt,gt.uint32());break;case 2:Lt.layer=a.LayerEvent.decode(gt,gt.uint32());break;default:gt.skipType(Jt&7);break}}return Lt},fromJSON(tt){return{layout:qt(tt.layout)?a.LayoutEvent.fromJSON(tt.layout):void 0,layer:qt(tt.layer)?a.LayerEvent.fromJSON(tt.layer):void 0}},toJSON(tt){const ft={};return tt.layout!==void 0&&(ft.layout=tt.layout?a.LayoutEvent.toJSON(tt.layout):void 0),tt.layer!==void 0&&(ft.layer=tt.layer?a.LayerEvent.toJSON(tt.layer):void 0),ft},fromPartial(tt){const ft=Ln();return ft.layout=tt.layout!==void 0&&tt.layout!==null?a.LayoutEvent.fromPartial(tt.layout):void 0,ft.layer=tt.layer!==void 0&&tt.layer!==null?a.LayerEvent.fromPartial(tt.layer):void 0,ft}};function Zt(){return{name:"",target:void 0}}a.SubscribePayload={encode(tt,ft=b.Writer.create()){return tt.name!==""&&ft.uint32(10).string(tt.name),tt.target!==void 0&&a.EventTarget.encode(tt.target,ft.uint32(18).fork()).ldelim(),ft},decode(tt,ft){const gt=tt instanceof b.Reader?tt:new b.Reader(tt);let Ut=ft===void 0?gt.len:gt.pos+ft;const Lt=Zt();for(;gt.pos<Ut;){const Jt=gt.uint32();switch(Jt>>>3){case 1:Lt.name=gt.string();break;case 2:Lt.target=a.EventTarget.decode(gt,gt.uint32());break;default:gt.skipType(Jt&7);break}}return Lt},fromJSON(tt){return{name:qt(tt.name)?String(tt.name):"",target:qt(tt.target)?a.EventTarget.fromJSON(tt.target):void 0}},toJSON(tt){const ft={};return tt.name!==void 0&&(ft.name=tt.name),tt.target!==void 0&&(ft.target=tt.target?a.EventTarget.toJSON(tt.target):void 0),ft},fromPartial(tt){var ft;const gt=Zt();return gt.name=(ft=tt.name)!==null&&ft!==void 0?ft:"",gt.target=tt.target!==void 0&&tt.target!==null?a.EventTarget.fromPartial(tt.target):void 0,gt}};function un(){return{correlationId:void 0,subscribe:void 0,unsubscribe:void 0,publish:void 0,ping:void 0}}a.EventsStreamRequest={encode(tt,ft=b.Writer.create()){return tt.correlationId!==void 0&&ft.uint32(10).string(tt.correlationId),tt.subscribe!==void 0&&a.SubscribePayload.encode(tt.subscribe,ft.uint32(802).fork()).ldelim(),tt.unsubscribe!==void 0&&a.SubscribePayload.encode(tt.unsubscribe,ft.uint32(810).fork()).ldelim(),tt.publish!==void 0&&a.PublishEventRequest.encode(tt.publish,ft.uint32(818).fork()).ldelim(),tt.ping!==void 0&&ft.uint32(826).string(tt.ping),ft},decode(tt,ft){const gt=tt instanceof b.Reader?tt:new b.Reader(tt);let Ut=ft===void 0?gt.len:gt.pos+ft;const Lt=un();for(;gt.pos<Ut;){const Jt=gt.uint32();switch(Jt>>>3){case 1:Lt.correlationId=gt.string();break;case 100:Lt.subscribe=a.SubscribePayload.decode(gt,gt.uint32());break;case 101:Lt.unsubscribe=a.SubscribePayload.decode(gt,gt.uint32());break;case 102:Lt.publish=a.PublishEventRequest.decode(gt,gt.uint32());break;case 103:Lt.ping=gt.string();break;default:gt.skipType(Jt&7);break}}return Lt},fromJSON(tt){return{correlationId:qt(tt.correlationId)?String(tt.correlationId):void 0,subscribe:qt(tt.subscribe)?a.SubscribePayload.fromJSON(tt.subscribe):void 0,unsubscribe:qt(tt.unsubscribe)?a.SubscribePayload.fromJSON(tt.unsubscribe):void 0,publish:qt(tt.publish)?a.PublishEventRequest.fromJSON(tt.publish):void 0,ping:qt(tt.ping)?String(tt.ping):void 0}},toJSON(tt){const ft={};return tt.correlationId!==void 0&&(ft.correlationId=tt.correlationId),tt.subscribe!==void 0&&(ft.subscribe=tt.subscribe?a.SubscribePayload.toJSON(tt.subscribe):void 0),tt.unsubscribe!==void 0&&(ft.unsubscribe=tt.unsubscribe?a.SubscribePayload.toJSON(tt.unsubscribe):void 0),tt.publish!==void 0&&(ft.publish=tt.publish?a.PublishEventRequest.toJSON(tt.publish):void 0),tt.ping!==void 0&&(ft.ping=tt.ping),ft},fromPartial(tt){var ft,gt;const Ut=un();return Ut.correlationId=(ft=tt.correlationId)!==null&&ft!==void 0?ft:void 0,Ut.subscribe=tt.subscribe!==void 0&&tt.subscribe!==null?a.SubscribePayload.fromPartial(tt.subscribe):void 0,Ut.unsubscribe=tt.unsubscribe!==void 0&&tt.unsubscribe!==null?a.SubscribePayload.fromPartial(tt.unsubscribe):void 0,Ut.publish=tt.publish!==void 0&&tt.publish!==null?a.PublishEventRequest.fromPartial(tt.publish):void 0,Ut.ping=(gt=tt.ping)!==null&&gt!==void 0?gt:void 0,Ut}};function nn(){return{code:0,message:""}}a.EventsStreamError={encode(tt,ft=b.Writer.create()){return tt.code!==0&&ft.uint32(8).int32(tt.code),tt.message!==""&&ft.uint32(18).string(tt.message),ft},decode(tt,ft){const gt=tt instanceof b.Reader?tt:new b.Reader(tt);let Ut=ft===void 0?gt.len:gt.pos+ft;const Lt=nn();for(;gt.pos<Ut;){const Jt=gt.uint32();switch(Jt>>>3){case 1:Lt.code=gt.int32();break;case 2:Lt.message=gt.string();break;default:gt.skipType(Jt&7);break}}return Lt},fromJSON(tt){return{code:qt(tt.code)?Number(tt.code):0,message:qt(tt.message)?String(tt.message):""}},toJSON(tt){const ft={};return tt.code!==void 0&&(ft.code=Math.round(tt.code)),tt.message!==void 0&&(ft.message=tt.message),ft},fromPartial(tt){var ft,gt;const Ut=nn();return Ut.code=(ft=tt.code)!==null&&ft!==void 0?ft:0,Ut.message=(gt=tt.message)!==null&&gt!==void 0?gt:"",Ut}};function fn(){return{reauthenticate:!1,beforeTimestamp:""}}a.EventsStreamReconnectRequest={encode(tt,ft=b.Writer.create()){return tt.reauthenticate===!0&&ft.uint32(8).bool(tt.reauthenticate),tt.beforeTimestamp!==""&&ft.uint32(18).string(tt.beforeTimestamp),ft},decode(tt,ft){const gt=tt instanceof b.Reader?tt:new b.Reader(tt);let Ut=ft===void 0?gt.len:gt.pos+ft;const Lt=fn();for(;gt.pos<Ut;){const Jt=gt.uint32();switch(Jt>>>3){case 1:Lt.reauthenticate=gt.bool();break;case 2:Lt.beforeTimestamp=gt.string();break;default:gt.skipType(Jt&7);break}}return Lt},fromJSON(tt){return{reauthenticate:qt(tt.reauthenticate)?Boolean(tt.reauthenticate):!1,beforeTimestamp:qt(tt.beforeTimestamp)?String(tt.beforeTimestamp):""}},toJSON(tt){const ft={};return tt.reauthenticate!==void 0&&(ft.reauthenticate=tt.reauthenticate),tt.beforeTimestamp!==void 0&&(ft.beforeTimestamp=tt.beforeTimestamp),ft},fromPartial(tt){var ft,gt;const Ut=fn();return Ut.reauthenticate=(ft=tt.reauthenticate)!==null&&ft!==void 0?ft:!1,Ut.beforeTimestamp=(gt=tt.beforeTimestamp)!==null&&gt!==void 0?gt:"",Ut}};function en(){return{correlationId:void 0,sessionId:void 0,event:void 0,pong:void 0,error:void 0,subscribed:void 0,unsubscribed:void 0,published:void 0,reconnectBefore:void 0}}a.EventsStreamResponse={encode(tt,ft=b.Writer.create()){return tt.correlationId!==void 0&&ft.uint32(18).string(tt.correlationId),tt.sessionId!==void 0&&ft.uint32(26).string(tt.sessionId),tt.event!==void 0&&a.PublishEventResponse.encode(tt.event,ft.uint32(802).fork()).ldelim(),tt.pong!==void 0&&ft.uint32(1602).string(tt.pong),tt.error!==void 0&&a.EventsStreamError.encode(tt.error,ft.uint32(1610).fork()).ldelim(),tt.subscribed!==void 0&&a.SubscribePayload.encode(tt.subscribed,ft.uint32(1618).fork()).ldelim(),tt.unsubscribed!==void 0&&a.SubscribePayload.encode(tt.unsubscribed,ft.uint32(1626).fork()).ldelim(),tt.published!==void 0&&a.PublishEventResponse.encode(tt.published,ft.uint32(1634).fork()).ldelim(),tt.reconnectBefore!==void 0&&a.EventsStreamReconnectRequest.encode(tt.reconnectBefore,ft.uint32(1642).fork()).ldelim(),ft},decode(tt,ft){const gt=tt instanceof b.Reader?tt:new b.Reader(tt);let Ut=ft===void 0?gt.len:gt.pos+ft;const Lt=en();for(;gt.pos<Ut;){const Jt=gt.uint32();switch(Jt>>>3){case 2:Lt.correlationId=gt.string();break;case 3:Lt.sessionId=gt.string();break;case 100:Lt.event=a.PublishEventResponse.decode(gt,gt.uint32());break;case 200:Lt.pong=gt.string();break;case 201:Lt.error=a.EventsStreamError.decode(gt,gt.uint32());break;case 202:Lt.subscribed=a.SubscribePayload.decode(gt,gt.uint32());break;case 203:Lt.unsubscribed=a.SubscribePayload.decode(gt,gt.uint32());break;case 204:Lt.published=a.PublishEventResponse.decode(gt,gt.uint32());break;case 205:Lt.reconnectBefore=a.EventsStreamReconnectRequest.decode(gt,gt.uint32());break;default:gt.skipType(Jt&7);break}}return Lt},fromJSON(tt){return{correlationId:qt(tt.correlationId)?String(tt.correlationId):void 0,sessionId:qt(tt.sessionId)?String(tt.sessionId):void 0,event:qt(tt.event)?a.PublishEventResponse.fromJSON(tt.event):void 0,pong:qt(tt.pong)?String(tt.pong):void 0,error:qt(tt.error)?a.EventsStreamError.fromJSON(tt.error):void 0,subscribed:qt(tt.subscribed)?a.SubscribePayload.fromJSON(tt.subscribed):void 0,unsubscribed:qt(tt.unsubscribed)?a.SubscribePayload.fromJSON(tt.unsubscribed):void 0,published:qt(tt.published)?a.PublishEventResponse.fromJSON(tt.published):void 0,reconnectBefore:qt(tt.reconnectBefore)?a.EventsStreamReconnectRequest.fromJSON(tt.reconnectBefore):void 0}},toJSON(tt){const ft={};return tt.correlationId!==void 0&&(ft.correlationId=tt.correlationId),tt.sessionId!==void 0&&(ft.sessionId=tt.sessionId),tt.event!==void 0&&(ft.event=tt.event?a.PublishEventResponse.toJSON(tt.event):void 0),tt.pong!==void 0&&(ft.pong=tt.pong),tt.error!==void 0&&(ft.error=tt.error?a.EventsStreamError.toJSON(tt.error):void 0),tt.subscribed!==void 0&&(ft.subscribed=tt.subscribed?a.SubscribePayload.toJSON(tt.subscribed):void 0),tt.unsubscribed!==void 0&&(ft.unsubscribed=tt.unsubscribed?a.SubscribePayload.toJSON(tt.unsubscribed):void 0),tt.published!==void 0&&(ft.published=tt.published?a.PublishEventResponse.toJSON(tt.published):void 0),tt.reconnectBefore!==void 0&&(ft.reconnectBefore=tt.reconnectBefore?a.EventsStreamReconnectRequest.toJSON(tt.reconnectBefore):void 0),ft},fromPartial(tt){var ft,gt,Ut;const Lt=en();return Lt.correlationId=(ft=tt.correlationId)!==null&&ft!==void 0?ft:void 0,Lt.sessionId=(gt=tt.sessionId)!==null&&gt!==void 0?gt:void 0,Lt.event=tt.event!==void 0&&tt.event!==null?a.PublishEventResponse.fromPartial(tt.event):void 0,Lt.pong=(Ut=tt.pong)!==null&&Ut!==void 0?Ut:void 0,Lt.error=tt.error!==void 0&&tt.error!==null?a.EventsStreamError.fromPartial(tt.error):void 0,Lt.subscribed=tt.subscribed!==void 0&&tt.subscribed!==null?a.SubscribePayload.fromPartial(tt.subscribed):void 0,Lt.unsubscribed=tt.unsubscribed!==void 0&&tt.unsubscribed!==null?a.SubscribePayload.fromPartial(tt.unsubscribed):void 0,Lt.published=tt.published!==void 0&&tt.published!==null?a.PublishEventResponse.fromPartial(tt.published):void 0,Lt.reconnectBefore=tt.reconnectBefore!==void 0&&tt.reconnectBefore!==null?a.EventsStreamReconnectRequest.fromPartial(tt.reconnectBefore):void 0,Lt}};class Dn{constructor(ft){this.rpc=ft,this.Stream=this.Stream.bind(this),this.Publish=this.Publish.bind(this)}Stream(ft){const gt=ft.pipe(k.map(Lt=>a.EventsStreamRequest.encode(Lt).finish()));return this.rpc.bidirectionalStreamingRequest("apis.layout.v2.EventsService","Stream",gt).pipe(k.map(Lt=>a.EventsStreamResponse.decode(new b.Reader(Lt))))}Publish(ft){const gt=a.PublishEventRequest.encode(ft).finish();return this.rpc.request("apis.layout.v2.EventsService","Publish",gt).then(Lt=>a.PublishEventResponse.decode(new b.Reader(Lt)))}}a.EventsServiceClientImpl=Dn,a.EventsServiceDefinition={name:"EventsService",fullName:"apis.layout.v2.EventsService",methods:{stream:{name:"Stream",requestType:a.EventsStreamRequest,requestStream:!0,responseType:a.EventsStreamResponse,responseStream:!0,options:{}},publish:{name:"Publish",requestType:a.PublishEventRequest,requestStream:!1,responseType:a.PublishEventResponse,responseStream:!1,options:{}}}};class cn{constructor(ft){this.rpc=ft,this.ListLayers=this.ListLayers.bind(this),this.CreateLayer=this.CreateLayer.bind(this),this.GetLayer=this.GetLayer.bind(this),this.UpdateLayer=this.UpdateLayer.bind(this),this.DeleteLayer=this.DeleteLayer.bind(this),this.Batch=this.Batch.bind(this)}ListLayers(ft){const gt=a.ListLayersRequest.encode(ft).finish();return this.rpc.request("apis.layout.v2.LayerService","ListLayers",gt).then(Lt=>a.ListLayersResponse.decode(new b.Reader(Lt)))}CreateLayer(ft){const gt=a.CreateLayerRequest.encode(ft).finish();return this.rpc.request("apis.layout.v2.LayerService","CreateLayer",gt).then(Lt=>a.Layer.decode(new b.Reader(Lt)))}GetLayer(ft){const gt=a.GetLayerRequest.encode(ft).finish();return this.rpc.request("apis.layout.v2.LayerService","GetLayer",gt).then(Lt=>a.Layer.decode(new b.Reader(Lt)))}UpdateLayer(ft){const gt=a.UpdateLayerRequest.encode(ft).finish();return this.rpc.request("apis.layout.v2.LayerService","UpdateLayer",gt).then(Lt=>a.Layer.decode(new b.Reader(Lt)))}DeleteLayer(ft){const gt=a.DeleteLayerRequest.encode(ft).finish();return this.rpc.request("apis.layout.v2.LayerService","DeleteLayer",gt).then(Lt=>a.DeleteLayerResponse.decode(new b.Reader(Lt)))}Batch(ft){const gt=a.BatchLayerRequest.encode(ft).finish();return this.rpc.request("apis.layout.v2.LayerService","Batch",gt).then(Lt=>a.BatchLayerResponse.decode(new b.Reader(Lt)))}}a.LayerServiceClientImpl=cn,a.LayerServiceDefinition={name:"LayerService",fullName:"apis.layout.v2.LayerService",methods:{listLayers:{name:"ListLayers",requestType:a.ListLayersRequest,requestStream:!1,responseType:a.ListLayersResponse,responseStream:!1,options:{}},createLayer:{name:"CreateLayer",requestType:a.CreateLayerRequest,requestStream:!1,responseType:a.Layer,responseStream:!1,options:{}},getLayer:{name:"GetLayer",requestType:a.GetLayerRequest,requestStream:!1,responseType:a.Layer,responseStream:!1,options:{}},updateLayer:{name:"UpdateLayer",requestType:a.UpdateLayerRequest,requestStream:!1,responseType:a.Layer,responseStream:!1,options:{}},deleteLayer:{name:"DeleteLayer",requestType:a.DeleteLayerRequest,requestStream:!1,responseType:a.DeleteLayerResponse,responseStream:!1,options:{}},batch:{name:"Batch",requestType:a.BatchLayerRequest,requestStream:!1,responseType:a.BatchLayerResponse,responseStream:!1,options:{}}}};class Mn{constructor(ft){this.rpc=ft,this.ListLayouts=this.ListLayouts.bind(this),this.CreateLayout=this.CreateLayout.bind(this),this.GetLayout=this.GetLayout.bind(this),this.UpdateLayout=this.UpdateLayout.bind(this),this.DeleteLayout=this.DeleteLayout.bind(this)}ListLayouts(ft){const gt=a.ListLayoutsRequest.encode(ft).finish();return this.rpc.request("apis.layout.v2.LayoutService","ListLayouts",gt).then(Lt=>a.ListLayoutsResponse.decode(new b.Reader(Lt)))}CreateLayout(ft){const gt=a.CreateLayoutRequest.encode(ft).finish();return this.rpc.request("apis.layout.v2.LayoutService","CreateLayout",gt).then(Lt=>a.Layout.decode(new b.Reader(Lt)))}GetLayout(ft){const gt=a.GetLayoutRequest.encode(ft).finish();return this.rpc.request("apis.layout.v2.LayoutService","GetLayout",gt).then(Lt=>a.Layout.decode(new b.Reader(Lt)))}UpdateLayout(ft){const gt=a.UpdateLayoutRequest.encode(ft).finish();return this.rpc.request("apis.layout.v2.LayoutService","UpdateLayout",gt).then(Lt=>a.Layout.decode(new b.Reader(Lt)))}DeleteLayout(ft){const gt=a.DeleteLayoutRequest.encode(ft).finish();return this.rpc.request("apis.layout.v2.LayoutService","DeleteLayout",gt).then(Lt=>a.DeleteLayoutResponse.decode(new b.Reader(Lt)))}}a.LayoutServiceClientImpl=Mn,a.LayoutServiceDefinition={name:"LayoutService",fullName:"apis.layout.v2.LayoutService",methods:{listLayouts:{name:"ListLayouts",requestType:a.ListLayoutsRequest,requestStream:!1,responseType:a.ListLayoutsResponse,responseStream:!1,options:{}},createLayout:{name:"CreateLayout",requestType:a.CreateLayoutRequest,requestStream:!1,responseType:a.Layout,responseStream:!1,options:{}},getLayout:{name:"GetLayout",requestType:a.GetLayoutRequest,requestStream:!1,responseType:a.Layout,responseStream:!1,options:{}},updateLayout:{name:"UpdateLayout",requestType:a.UpdateLayoutRequest,requestStream:!1,responseType:a.Layout,responseStream:!1,options:{}},deleteLayout:{name:"DeleteLayout",requestType:a.DeleteLayoutRequest,requestStream:!1,responseType:a.DeleteLayoutResponse,responseStream:!1,options:{}}}};var an=(()=>{if(typeof an!="undefined")return an;if(typeof self!="undefined")return self;if(typeof window!="undefined")return window;if(typeof commonjsGlobal!="undefined")return commonjsGlobal;throw"Unable to locate global object"})();b.util.Long!==g.default&&(b.util.Long=g.default,b.configure());function Un(tt){return typeof tt=="object"&&tt!==null}function qt(tt){return tt!=null}})(api$3);(function(a){var s=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(m,g,b,k){k===void 0&&(k=b),Object.defineProperty(m,k,{enumerable:!0,get:function(){return g[b]}})}:function(m,g,b,k){k===void 0&&(k=b),m[k]=g[b]}),d=commonjsGlobal&&commonjsGlobal.__exportStar||function(m,g){for(var b in m)b!=="default"&&!g.hasOwnProperty(b)&&s(g,m,b)};Object.defineProperty(a,"__esModule",{value:!0}),a.layoutApiEventMap=a.eventsApiSupportedEvents=a.eventsApiEventRpcCalls=void 0;const c=api$3;d(api$3,a),a.eventsApiEventRpcCalls={ping:"pong",publish:"published",subscribe:"subscribed",unsubscribe:"unsubscribed"},a.eventsApiSupportedEvents=[...Object.values(a.eventsApiEventRpcCalls),"error","event","reconnectBefore"],a.layoutApiEventMap={[c.EventType.EVENT_TYPE_LAYOUT]:"layout",[c.EventType.EVENT_TYPE_LAYER]:"layer",[c.EventType.EVENT_TYPE_UNSPECIFIED]:"unspecified"}})(dist$3);var api$2={},browser$2=!1,__viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$3=getAugmentedNamespace(__viteBrowserExternal$1),logger$1={};class EnhancedMap extends Map{computeIfAbsent(s,d){if(this.has(s))return this.get(s);const c=d(s);return this.set(s,c),c}computeIfPresent(s,d){const c=this.get(s);if(c===void 0)return;const m=d(s,c);return m!==void 0?this.set(s,m):this.delete(s),m}compute(s,d){const c=this.get(s),m=d(s,c);return m?this.set(s,m):this.delete(s),m}}var InternalLogLevel;(function(a){a[a.Trace=0]="Trace",a[a.Debug=1]="Debug",a[a.Info=2]="Info",a[a.Warn=3]="Warn",a[a.Error=4]="Error"})(InternalLogLevel||(InternalLogLevel={}));function getInternalLogger(a){return provider.getLogger(a)}const INTERNAL_LOGGING_SETTINGS={setInternalLogLevel:a=>provider.changeLogLevel(a),setOutput:a=>provider.changeOutput(a),reset:()=>provider.reset()};class InternalLoggerImpl{constructor(s,d,c){this._name=s,this._level=d,this._fnOutput=c}trace(s){this.log(InternalLogLevel.Trace,s)}debug(s){this.log(InternalLogLevel.Debug,s)}error(s,d){this.log(InternalLogLevel.Error,s,d)}info(s){this.log(InternalLogLevel.Info,s)}warn(s,d){this.log(InternalLogLevel.Warn,s,d)}setLevel(s){this._level=s}setOutput(s){this._fnOutput=s}log(s,d,c){this._level>s||this._fnOutput(`${InternalLogLevel[this._level].toString()} <INTERNAL LOGGER> ${this._name} ${d()}${c?`
`+c.stack:""}`)}}class InternalProviderImpl{constructor(){this._loggers=new EnhancedMap,this._logLevel=InternalLogLevel.Error,this._fnOutput=InternalProviderImpl.logConsole}getLogger(s){return this._loggers.computeIfAbsent(s,d=>new InternalLoggerImpl(d,this._logLevel,this._fnOutput))}changeLogLevel(s){this._logLevel=s,this._loggers.forEach(d=>d.setLevel(s))}changeOutput(s){this._fnOutput=s,this._loggers.forEach(d=>d.setOutput(this._fnOutput))}reset(){this.changeLogLevel(InternalLogLevel.Error),this._fnOutput=InternalProviderImpl.logConsole,this._loggers.forEach(s=>s.setOutput(this._fnOutput))}static logConsole(s){console&&console.log&&console.log(s)}}const provider=new InternalProviderImpl;var InternalLogger=Object.freeze({__proto__:null,get InternalLogLevel(){return InternalLogLevel},getInternalLogger,INTERNAL_LOGGING_SETTINGS}),LogLevel;(function(a){a[a.Trace=0]="Trace",a[a.Debug=1]="Debug",a[a.Info=2]="Info",a[a.Warn=3]="Warn",a[a.Error=4]="Error",a[a.Fatal=5]="Fatal"})(LogLevel||(LogLevel={}));(function(a){function s(d){switch(d.toLowerCase()){case"trace":return a.Trace;case"debug":return a.Debug;case"info":return a.Info;case"warn":return a.Warn;case"error":return a.Error;case"fatal":return a.Fatal;default:return}}a.toLogLevel=s})(LogLevel||(LogLevel={}));class CoreLoggerImpl{constructor(s){this._runtime=s}get id(){return this._runtime.id}get logLevel(){return this._runtime.level}get runtimeSettings(){return Object.assign({},this._runtime)}set runtimeSettings(s){this._runtime=s}trace(s,...d){this.logMessage(LogLevel.Trace,s,d)}debug(s,...d){this.logMessage(LogLevel.Debug,s,d)}info(s,...d){this.logMessage(LogLevel.Info,s,d)}warn(s,...d){this.logMessage(LogLevel.Warn,s,d)}error(s,...d){this.logMessage(LogLevel.Error,s,d)}fatal(s,...d){this.logMessage(LogLevel.Fatal,s,d)}logMessage(s,d,c){if(this._runtime.level>s)return;const m=Date.now(),g=typeof d=="string"?d:d(),b=CoreLoggerImpl.getErrorAndArgs(c);switch(this._runtime.channel.type){case"RawLogChannel":this._runtime.channel.write({message:g,exception:b.error,args:b.args,timeInMillis:m,level:s,logNames:this._runtime.name},this._runtime.argumentFormatter);return;case"LogChannel":this._runtime.channel.write(this.createLogMessage(g,s,b,m));break}}formatArgValue(s){try{return this._runtime.argumentFormatter(s)}catch{return`>>ARG CONVERT FAILED: '${s!==void 0?s.toString():"undefined"}'<<`}}createLogMessage(s,d,c,m){let g;const b=c.error,k=c.args;b&&(g=`${b.name}: ${b.message}`,b.stack&&(g+=`@
${b.stack}`));const et=this._runtime.dateFormatter(m);let nt=LogLevel[d].toUpperCase();nt.length<5&&(nt+=" ");const it=typeof this._runtime.name=="string"?this._runtime.name:this._runtime.name.join(", "),ct=typeof k!="undefined"&&k.length>0?" ["+k.map(ut=>this.formatArgValue(ut)).join(", ")+"]":"";return{message:et+" "+nt+" ["+it+"] "+s+ct,error:g}}static getErrorAndArgs(s){if(s.length===0)return{};let d,c;const m=s[0];if(m instanceof Error)return d=m,c=s.length>1?s.slice(1):void 0,{error:d,args:c};if(typeof m=="function"){const g=m();return g instanceof Error?(d=g,c=s.length>1?s.slice(1):void 0,{error:d,args:c}):s.length===1?Array.isArray(g)?{args:g.length>0?g:void 0}:{args:g}:Array.isArray(g)?{args:[...g,...s.slice(1)]}:{args:[g,...s.slice(1)]}}return{args:s}}}function padStart(a,s,d=" "){return padInternal(a,s,"start",d)}function padEnd(a,s,d=" "){return padInternal(a,s,"end",d)}function maxLengthStringValueInArray(a){return a.map(s=>s.length).reduce((s,d)=>d>s?d:s,0)}function padInternal(a,s,d,c=" "){if(s<=a.length)return a;if(c.length>1)throw new Error(`Fill char must be one char exactly, it is: ${c.length}`);const m=s-a.length;let g="";for(let b=0;b<m;b++)g+=c;return d==="start"?g+a:a+g}function formatArgument(a){return a===void 0?"undefined":JSON.stringify(a)}function formatDate(a){const s=new Date(a),d=s.getFullYear(),c=padStart((s.getMonth()+1).toString(),2,"0"),m=padStart(s.getDate().toString(),2,"0"),g=padStart(s.getHours().toString(),2,"0"),b=padStart(s.getMinutes().toString(),2,"0"),k=padStart(s.getSeconds().toString(),2,"0"),et=padStart(s.getMilliseconds().toString(),2,"0");return`${d}-${c}-${m} ${g}:${b}:${k},${et}`}class ConsoleLogChannel{constructor(){this.type="LogChannel"}write(s){console&&console.log&&console.log(s.message+(s.error?`
${s.error}`:""))}}var DefaultChannels;(function(a){function s(){return new ConsoleLogChannel}a.createConsoleChannel=s})(DefaultChannels||(DefaultChannels={}));class LogProviderImpl{constructor(s,d){this._log=getInternalLogger("core.impl.LogProviderImpl"),this._name=s,this._settings=d,this._loggers=new EnhancedMap,this._idToKeyMap=new EnhancedMap,this._globalRuntimeSettings={level:d.level,channel:d.channel},this._nextLoggerId=1,this._log.trace(()=>`Created LogProviderImpl with settings: ${JSON.stringify(this._settings)}`)}get runtimeSettings(){return Object.assign(Object.assign({},this._settings),{level:this._globalRuntimeSettings.level,channel:this._globalRuntimeSettings.channel})}getLogger(s){return this.getOrCreateLogger(s)}updateLoggerRuntime(s,d){this._log.debug(()=>`Updating logger ${s.id} runtime settings using: '${JSON.stringify(d)}'`);const c=this._idToKeyMap.get(s.id);return c===void 0?(this._log.warn(()=>`Cannot update logger with id: ${s.id}, it was not found.`),!1):(this._loggers.computeIfPresent(c,(m,g)=>(g.runtimeSettings=LogProviderImpl.mergeRuntimeSettingsIntoLogRuntime(g.runtimeSettings,d),g)),!0)}updateRuntimeSettings(s){this._log.debug(()=>`Updating global runtime settings and updating existing loggers runtime settings using: '${JSON.stringify(s)}'`),this._globalRuntimeSettings={level:s.level!==void 0?s.level:this._globalRuntimeSettings.level,channel:s.channel!==void 0?s.channel:this._globalRuntimeSettings.channel},this._loggers.forEach(d=>d.runtimeSettings=LogProviderImpl.mergeRuntimeSettingsIntoLogRuntime(d.runtimeSettings,s))}clear(){this._loggers.clear(),this._idToKeyMap.clear(),this._globalRuntimeSettings=Object.assign({},this._settings),this._nextLoggerId=1}getOrCreateLogger(s){const d=LogProviderImpl.createKey(s),c=this._loggers.computeIfAbsent(d,()=>{const m={level:this._globalRuntimeSettings.level,channel:this._globalRuntimeSettings.channel,id:this.nextLoggerId(),name:s,argumentFormatter:this._settings.argumentFormatter,dateFormatter:this._settings.dateFormatter};return new CoreLoggerImpl(m)});return this._idToKeyMap.computeIfAbsent(c.id,()=>d),c}nextLoggerId(){const s=this._name+"_"+this._nextLoggerId;return this._nextLoggerId++,s}static mergeRuntimeSettingsIntoLogRuntime(s,d){return Object.assign(Object.assign({},s),{level:d.level!==void 0?d.level:s.level,channel:d.channel!==void 0?d.channel:s.channel})}static createKey(s){return typeof s=="string"?s:s.join(",")}}function createLogProvider(a,s){return new LogProviderImpl(a,s)}var index=Object.freeze({__proto__:null,EnhancedMap,padStart,padEnd,maxLengthStringValueInArray});class CategoryImpl{constructor(s,d,c,m){this._children=[],this._logger=s,this._name=d,this._parent=c,this._fnGetOrCreateChildCategory=m}get name(){return this._name}get parent(){return this._parent}get path(){const s=[];let d=this;for(;d!==void 0;)s.push(d.name),d=d.parent;return s.reverse()}get children(){return[...this._children]}addChild(s){if(s.parent!==this)throw new Error(`Cannot add child '${s.name}', expected parent '${this._name} but got ${s.parent?s.parent.name:"undefined"}'`);this._children.push(s)}getChildCategory(s){const d=this._children.find(c=>c.name===s);return d!==void 0?d:this._fnGetOrCreateChildCategory(s,this)}get id(){return this._logger.id}get logLevel(){return this._logger.logLevel}get runtimeSettings(){return this._logger.runtimeSettings}get logger(){return this._logger}trace(s,...d){this._logger.trace(s,...d)}debug(s,...d){this._logger.debug(s,...d)}info(s,...d){this._logger.info(s,...d)}warn(s,...d){this._logger.warn(s,...d)}error(s,...d){this._logger.error(s,...d)}fatal(s,...d){this._logger.fatal(s,...d)}}const CATEGORY_PATH_SEPARATOR="#";class CategoryProviderImpl{constructor(s,d){this._name=s,this._initialConfig=d,this._categoryStorage=new CategoryStorage(s,d)}get name(){return this._name}get config(){return this._initialConfig}get runtimeConfig(){return this._categoryStorage.getCurrentRuntimeConfig()}getCategory(s,d){return this._categoryStorage.getOrCreateCategory(s,d)}updateRuntimeSettingsCategory(s,d){this._categoryStorage.updateRuntimeSettingsCategory(s,d)}updateRuntimeSettings(s){this._categoryStorage.updateRuntimeSettings(s)}getRegisteredCategories(){return this._categoryStorage.getRegisteredCategories()}getCategoryByPath(s){return this._categoryStorage.getCategoryByPath(s)}}class CategoryStorage{constructor(s,d){this._categoriesById=new Map,this._categoriesByPath=new Map,this._categoryProviderName=s,this._allowSameCategoryName=d.allowSameCategoryName,this._logProvider=createLogProvider(s,Object.assign({},d)),this.getOrCreateCategory=this.getOrCreateCategory.bind(this)}getOrCreateCategory(s,d){if(s.indexOf(CATEGORY_PATH_SEPARATOR)!==-1)throw new Error(`Cannot create category '${s}', name cannot contain a '${CATEGORY_PATH_SEPARATOR}'.`);const c=d!==void 0?this.getParentCategory(d):void 0;return c===void 0?this.getOrCreateRootCategory(s):this.getOrCreateChildCategory(s,c)}updateRuntimeSettingsCategory(s,d){if(!s.id.startsWith(this._categoryProviderName))throw new Error(`Category '${s.name}' with LogId '${s.id}' is from a different CategoryProvider, cannot mix categories between providers.`);const c=this._categoriesById.get(s.id);c!==void 0&&(this._logProvider.updateLoggerRuntime(c.logger,{level:d.level}),!(d.disableRecursion!==void 0&&d.disableRecursion)&&c.children.forEach(m=>this.updateRuntimeSettingsCategory(m,d)))}updateRuntimeSettings(s){this._logProvider.updateRuntimeSettings(s)}getCurrentRuntimeConfig(){return Object.assign(Object.assign({},this._logProvider.runtimeSettings),{allowSameCategoryName:this._allowSameCategoryName})}getRegisteredCategories(){return[...this._categoriesById.values()]}getCategoryByPath(s){return this._categoriesByPath.get(s)}getParentCategory(s){let d;if(CategoryStorage.isLogId(s)){if(d=this._categoriesById.get(s),d===void 0)throw new Error(`Parent category was not found by LogId '${s}'. Are you sure you passed in the correct argument?`)}else if(d=this._categoriesById.get(s.id),d===void 0)throw new Error(`Parent category '${s.name}' was not found by it's LogId '${s.id}'. Are you sure you passed in the correct parent category?`);return d}getOrCreateRootCategory(s){const d=this._categoriesByPath.get(s);if(d){if(!this._allowSameCategoryName)throw new Error(`Category '${s} already exists, config flag allowSameCategoryName=false - therefore matching version 1 behavior (hence this Error)`);return d}const c=this._logProvider.getLogger(s),m=new CategoryImpl(c,s,void 0,this.getOrCreateCategory);return this._categoriesById.set(m.id,m),this._categoriesByPath.set(s,m),m}getOrCreateChildCategory(s,d){if(!d.id.startsWith(this._categoryProviderName))throw new Error(`Parent category '${d.name}' with LogId '${d.id}' is from a different CategoryProvider, cannot mix categories between providers.`);const c=[...d.path,s].join(CATEGORY_PATH_SEPARATOR),m=this._categoriesByPath.get(c);if(m){if(!this._allowSameCategoryName)throw new Error(`Child category '${s} already exists for parent category ${d.name}, config flag allowSameCategoryName=false - therefore matching version 1 behavior (hence this Error)`);return m}const g=this._logProvider.getLogger(c);this._logProvider.updateLoggerRuntime(g,{level:d.logger.runtimeSettings.level,channel:d.logger.runtimeSettings.channel});const b=new CategoryImpl(g,s,d,this.getOrCreateCategory);return this._categoriesById.set(b.id,b),this._categoriesByPath.set(b.path.join(CATEGORY_PATH_SEPARATOR),b),d.addChild(b),b}static isLogId(s){return typeof s=="string"}}class CategoryControlProviderImpl{constructor(s,d){this._provider=s,this._messageChannel=d,this._originalLogLevels=CategoryControlProviderImpl.loadCurrentGroupLogLevels(s)}get name(){return this._provider.name}showSettings(){let s=`Available categories (CategoryProvider '${this._provider.name}'):
`;const d=this.createCategoryInfoHierarchy(),c=d.size.toString().length,m=index.maxLengthStringValueInArray([...d.values()].map(b=>b.category.name+" ".repeat(b.depth))),g=[...d.values()].map((b,k)=>CategoryControlProviderImpl.createSettingLineCategory(b,k,c,m));s+=g.join(`
`)+(g.length>0?`
`:""),this._messageChannel(s)}help(){const s=`You can use the following commands (CategoryProvider ${this._provider.name}):
  showSettings()
    Shows the current configuration settings.
  update(level: CategoryControlProviderLogLevel, categoryId?: number | string, noRecurse?: boolean)
    Change the log level for a category (by default recursively).
      @param level      The log level to set - must be one of 'trace', 'debug', 'info', 'warn', 'error' or 'fatal'
      @param categoryId The category id or path of a category (e.g. root#child1) to update. Use showSettings() for id and/or name.
                        When omitted, it applies the level to all categories recursively.
  reset()
    Resets the log levels of the config groups back to when this control provider was created.
  save()
    Saves the current log levels for all categories of this provider. Use restore() to load last saved state.
  restore()
    Restore stored saved state, if any. Log levels will be set according to the saved state.
  help()
    Shows this help.
`;this._messageChannel(s)}reset(){const s=new Map(this._provider.getRegisteredCategories().map(d=>[d.id,d]));this._originalLogLevels.forEach((d,c)=>{const m=s.get(c);m!==void 0&&this._provider.updateRuntimeSettingsCategory(m,{level:d,disableRecursion:!0}),s.delete(c)}),s.forEach(d=>{d.parent!==void 0&&this._provider.updateRuntimeSettingsCategory(d,{level:d.parent.logLevel,disableRecursion:!0})}),this._originalLogLevels=CategoryControlProviderImpl.loadCurrentGroupLogLevels(this._provider),this._messageChannel("Successfully reset log levels back to original state (from when this CategoryControlProvider was created).")}save(){if(!localStorage){this._messageChannel("Cannot save state, localStorage is not available.");return}const s=this._provider.getRegisteredCategories().filter(c=>c.parent===void 0).map(c=>CategoryControlProviderImpl.createCategorySaveData(c)),d={name:this._provider.name,rootCategories:s};localStorage.setItem(this.createKey(),JSON.stringify(d)),this._messageChannel(`Successfully saved state for CategoryControlProvider '${this._provider.name}'.`)}restore(s){const d=s!==void 0?s:!0;if(!localStorage){d&&this._messageChannel(`Will not attempt to restore state for CategoryControlProvider '${this._provider.name}', localStorage is not available.`);return}const c=this.createKey(),m=localStorage.getItem(c);if(m===null){d&&this._messageChannel(`Cannot restore state for CategoryControlProvider '${this._provider.name}', no data available.`);return}try{const g=JSON.parse(m);if(this._provider.name!==g.name){d&&this._messageChannel(`Cannot restore state for CategoryControlProvider '${this._provider.name}', data is not for provider - found name '${g.name}'.`);return}this.restoreBySaveData(g,d),this._messageChannel(`Successfully restored state for CategoryControlProvider '${this._provider.name}'`),this._originalLogLevels=CategoryControlProviderImpl.loadCurrentGroupLogLevels(this._provider)}catch{localStorage.removeItem(c),this._messageChannel(`Cannot restore state for CategoryControlProvider '${this._provider.name}', data is not valid. Invalid data removed from localStorage.`)}}update(s,d,c){typeof d=="undefined"?this.updateAll(s):typeof d=="number"?this.updateByIndex(s,d,c!==void 0?c:!1):this.updateByPath(s,d,c!==void 0?c:!1)}updateAll(s){const d=LogLevel.toLogLevel(s);this._provider.getRegisteredCategories().filter(c=>c.parent===void 0).forEach(c=>this._provider.updateRuntimeSettingsCategory(c,{level:d})),this._messageChannel(`Updated all categories to use log level '${s.toLowerCase()}'`)}updateByPath(s,d,c){const m=this._provider.getCategoryByPath(d);if(m===void 0){this._messageChannel(`Failed to find a provider by path '${d}', please make sure to separate the parts by a ${CATEGORY_PATH_SEPARATOR}.`);return}this._provider.updateRuntimeSettingsCategory(m,{level:LogLevel.toLogLevel(s),disableRecursion:c}),this._messageChannel(`Successfully updated category '${m.name}' with path '${d}' to log level '${s.toLowerCase()}'${c?"":" and recursively applied to children (if any)"}.`)}updateByIndex(s,d,c){if(d<0){this._messageChannel(`Cannot update category by index '${d}', it is negative.`);return}const m=this.createCategoryInfoHierarchy();if(d>=m.size){this._messageChannel(`Cannot update category by index '${d}', it is outside of the range of available categories, use showSettings() to see the indices.`);return}const g=[...m.values()][d].category;this._provider.updateRuntimeSettingsCategory(g,{level:LogLevel.toLogLevel(s),disableRecursion:c}),this._messageChannel(`Successfully updated category '${g.name}' by index '${d}' to log level '${s.toLowerCase()}'${c?"":" and recursively applied to children (if any)"}.`)}restoreBySaveData(s,d){const c=(m,g)=>{const b=g.length>0?g+CATEGORY_PATH_SEPARATOR+m.name:m.name,k=this._provider.getCategoryByPath(b);if(k!==void 0){const et=LogLevel.toLogLevel(m.level);et!==void 0?this._provider.updateRuntimeSettingsCategory(k,{level:et,disableRecursion:!0}):d&&this._messageChannel(`CategoryControlProvider '${this._provider.name}' - cannot restore log level for category path '${b}', log level is invalid.`);for(const nt of m.children)c(nt,b)}else d&&this._messageChannel(`CategoryControlProvider '${this._provider.name}' - failed to find a Category by path '${b}', will not restore category (and children)`)};for(const m of s.rootCategories)c(m,"")}createKey(){return`CategoryProvider-${this._provider.name}`}createCategoryInfoHierarchy(){const s=new Map;return this._provider.getRegisteredCategories().filter(c=>c.parent===void 0).forEach(c=>CategoryControlProviderImpl.addCategoryInfoHierarchy(c,0,s)),s}static createCategorySaveData(s){return{name:s.name,level:LogLevel[s.logLevel],children:s.children.map(d=>this.createCategorySaveData(d))}}static loadCurrentGroupLogLevels(s){return new Map(s.getRegisteredCategories().map(d=>[d.id,d.logLevel]))}static createSettingLineCategory(s,d,c,m){const b=" ".repeat(s.depth)+s.category.name;return`  [${index.padStart(d.toString(),c)}, ${index.padEnd(b,m)} (level=${index.padEnd(s.logLevel,5)})]`}static addCategoryInfoHierarchy(s,d,c){c.set(s.id,{category:s,logLevel:LogLevel[s.logLevel],depth:d}),s.children.forEach(m=>this.addCategoryInfoHierarchy(m,d+1,c))}}function categoryConfigDebug(a){return`CategoryConfig=level: ${LogLevel[a.level].toString()}, allowSameCategoryName=${a.allowSameCategoryName}`}class CategoryProviderService{constructor(){this._log=InternalLogger.getInternalLogger("category.impl.CategoryProviderService"),this._providers=new index.EnhancedMap}createLogProvider(s,d){const c=this._providers.compute(s,(m,g)=>{if(g)throw new Error(`CategoryProvider with name '${s}' already exists, cannot create another.`);const b=mergeWithDefaults(d);return this._log.debug(()=>`Creating new CategoryProvider with name '${s}', using config settings '${categoryConfigDebug(b)}'.`),new CategoryProviderImpl(s,b)});if(c)return c;throw new Error("No CategoryProvider? This is a bug.")}getCategoryControl(s){const d=s||(c=>{if(console&&console.log)console.log(c);else throw new Error("Cannot use console (it is not present), please specify a custom function to write to.")});return{help:()=>d(CategoryProviderService.help()),showSettings:()=>d(this.showSettings()),getProvider:c=>this.getCategoryControlProviderByIdOrName(c,d)}}clear(){this._providers.clear()}showSettings(){let s=`Available CategoryProviders:
`;const d=this._providers.size.toString().length,c=index.maxLengthStringValueInArray([...this._providers.keys()]),m=[...this._providers.entries()].map((g,b)=>{const k=g[0];return`  [${index.padStart(b.toString(),d)}, ${index.padEnd(k,c)}]`});return s+=m.join(`
`)+(m.length>0?`
`:""),s}getCategoryControlProviderByIdOrName(s,d){if(typeof s=="string"){const m=this._providers.get(s);if(m===void 0)throw new Error(`Provider with name '${s}' does not exist.`);return new CategoryControlProviderImpl(m,d)}const c=[...this._providers.values()];if(s<0||s>=c.length)throw new Error(`Provider with index '${s}' does not exist (outside of range).`);return new CategoryControlProviderImpl(c[s],d)}static help(){return`You can use the following commands:
  showSettings()
    Shows the current configuration settings.
  getProvider: (id: number | string): CategoryControlProvider
    Get access to a CategoryControlProvider to change log levels.
      @param id The id (use showSettings to see) or name of the provider
  help()
    Shows this help.
`}}const CATEGORY_PROVIDER_SERVICE=new CategoryProviderService,CATEGORY_LOG_CONTROL=a=>CATEGORY_PROVIDER_SERVICE.getCategoryControl(a);function mergeWithDefaults(a){const s={channel:DefaultChannels.createConsoleChannel(),allowSameCategoryName:!0,level:LogLevel.Error,dateFormatter:formatDate,argumentFormatter:formatArgument};return a?{channel:a.channel?a.channel:s.channel,allowSameCategoryName:a.allowSameCategoryName!==void 0?a.allowSameCategoryName:s.allowSameCategoryName,level:a.level?a.level:s.level,dateFormatter:a.dateFormatter?a.dateFormatter:s.dateFormatter,argumentFormatter:a.argumentFormatter?a.argumentFormatter:s.argumentFormatter}:s}var CategoryProvider;(function(a){function s(c,m){return CATEGORY_PROVIDER_SERVICE.createLogProvider(c,m)}a.createProvider=s;function d(){CATEGORY_PROVIDER_SERVICE.clear()}a.clear=d})(CategoryProvider||(CategoryProvider={}));var typescriptLoggingCategory_esm=Object.freeze(Object.defineProperty({__proto__:null,CATEGORY_LOG_CONTROL,get CategoryProvider(){return CategoryProvider}},Symbol.toStringTag,{value:"Module"})),require$$1=getAugmentedNamespace(typescriptLoggingCategory_esm);Object.defineProperty(logger$1,"__esModule",{value:!0});logger$1.logger=void 0;const typescript_logging_1=require$$2$2,typescript_logging_category_style_1=require$$1;logger$1.logger=typescript_logging_category_style_1.CategoryProvider.createProvider("ApiStream",{allowSameCategoryName:!0,level:typescript_logging_1.LogLevel.Warn});var version$2="2.2.1",__createBinding$5=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(a,s,d,c){c===void 0&&(c=d);var m=Object.getOwnPropertyDescriptor(s,d);(!m||("get"in m?!s.__esModule:m.writable||m.configurable))&&(m={enumerable:!0,get:function(){return s[d]}}),Object.defineProperty(a,c,m)}:function(a,s,d,c){c===void 0&&(c=d),a[c]=s[d]}),__setModuleDefault$5=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(a,s){Object.defineProperty(a,"default",{enumerable:!0,value:s})}:function(a,s){a.default=s}),__importStar$5=commonjsGlobal&&commonjsGlobal.__importStar||function(a){if(a&&a.__esModule)return a;var s={};if(a!=null)for(var d in a)d!=="default"&&Object.prototype.hasOwnProperty.call(a,d)&&__createBinding$5(s,a,d);return __setModuleDefault$5(s,a),s},__importDefault$h=commonjsGlobal&&commonjsGlobal.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(api$2,"__esModule",{value:!0});api$2.ApiClient=void 0;const NiceGrpc$1=__importStar$5(lib$1),abort_controller_x_1=require$$1$1,detect_node_1=__importDefault$h(browser$2),NodeTransport=__importStar$5(require$$3),logger_1$8=logger$1,clientVersion$1=version$2;class ApiClient{constructor(s,d,c,m){this.sessionId=s,this.sdkVersion=c,this.version=clientVersion$1,this.log=logger_1$8.logger.getCategory(m),this.channel=NiceGrpc$1.createChannel(d,detect_node_1.default?NodeTransport.NodeHttpTransport():void 0),this.clientFactory=NiceGrpc$1.createClientFactory().use(this.logMiddleware.bind(this))}async*logMiddleware(s,d){const{path:c}=s.method;try{const m=yield*s.next(s.request,d);return this.log.debug(`-> ${c}: ok`),this.log.trace(`${JSON.stringify(s.request)} -> ${c}: ${JSON.stringify(m)}`),m}catch(m){throw this.log.trace(`${JSON.stringify(s.request)} -> ${c}`),m instanceof NiceGrpc$1.ClientError?this.log.warn(`-> ${c}: error: ${NiceGrpc$1.Status[m.code]}: ${m.details}`):(0,abort_controller_x_1.isAbortError)(m)?this.log.warn(`-> ${c}: cancel`):this.log.warn(`-> ${c}: error: ${m==null?void 0:m.stack}`),m}}setAccessToken(s){(this.accessToken==null||this.accessToken!=s)&&(this.log.debug("access token refreshed"),this.accessToken=s,this.setup())}makeGrpcMetadata(){let s=NiceGrpc$1.Metadata({Authorization:`Bearer ${this.accessToken}`,Version:this.version,SessionId:this.sessionId});return this.sdkVersion!=null&&s.set("SdkVersion",this.sdkVersion),s}setup(){let s={metadata:this.makeGrpcMetadata()};this._setup(s)}_setup(s){}}api$2.ApiClient=ApiClient;var decorator={};Object.defineProperty(decorator,"__esModule",{value:!0});decorator.RequiresSdkAuthentication=void 0;function RequiresSdkAuthentication(){return function(a,s){let d;Object.defineProperty(a,s,{get:()=>{if(!d)throw new Error("Please authenticate the SDK by calling sdk.setAccessToken().");return d},set:c=>{d=c}})}}decorator.RequiresSdkAuthentication=RequiresSdkAuthentication;var __createBinding$4=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(a,s,d,c){c===void 0&&(c=d);var m=Object.getOwnPropertyDescriptor(s,d);(!m||("get"in m?!s.__esModule:m.writable||m.configurable))&&(m={enumerable:!0,get:function(){return s[d]}}),Object.defineProperty(a,c,m)}:function(a,s,d,c){c===void 0&&(c=d),a[c]=s[d]}),__setModuleDefault$4=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(a,s){Object.defineProperty(a,"default",{enumerable:!0,value:s})}:function(a,s){a.default=s}),__decorate=commonjsGlobal&&commonjsGlobal.__decorate||function(a,s,d,c){var m=arguments.length,g=m<3?s:c===null?c=Object.getOwnPropertyDescriptor(s,d):c,b;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")g=Reflect.decorate(a,s,d,c);else for(var k=a.length-1;k>=0;k--)(b=a[k])&&(g=(m<3?b(g):m>3?b(s,d,g):b(s,d))||g);return m>3&&g&&Object.defineProperty(s,d,g),g},__importStar$4=commonjsGlobal&&commonjsGlobal.__importStar||function(a){if(a&&a.__esModule)return a;var s={};if(a!=null)for(var d in a)d!=="default"&&Object.prototype.hasOwnProperty.call(a,d)&&__createBinding$4(s,a,d);return __setModuleDefault$4(s,a),s},__metadata=commonjsGlobal&&commonjsGlobal.__metadata||function(a,s){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(a,s)};Object.defineProperty(layoutapi,"__esModule",{value:!0});layoutapi.LayoutApi=void 0;__importStar$4(lib$1);const LayoutApiModel=__importStar$4(dist$3),api_1$1=api$2,decorator_1=decorator,LOG_CATEGORY$1="LayoutApi";class LayoutApi extends api_1$1.ApiClient{constructor(s,d,c,m){super(s,c,m,LOG_CATEGORY$1),this.handlers={},this.eventApi=d,this.eventApi.on("event",{name:`${LayoutApi.LAYOUTAPI_EVENT_PREFIX}:*`,ignoreSessionEvents:!0},g=>{var b;const[,k,et]=g.name.split(":"),nt=g.payload;for(const it of(b=this.handlers[k])!==null&&b!==void 0?b:[])it(Object.values(nt).find(ct=>!!ct),et)})}_setup(s){this.layer=this.clientFactory.create(LayoutApiModel.LayerServiceDefinition,this.channel,{"*":s}),this.layout=this.clientFactory.create(LayoutApiModel.LayoutServiceDefinition,this.channel,{"*":s})}async subscribeToLayout(s){await Promise.all([this.eventApi.subscribe(`${LayoutApi.LAYOUTAPI_EVENT_PREFIX}:${LayoutApiModel.EventType.EVENT_TYPE_LAYER}:*`,{target:{layoutId:s}}),this.eventApi.subscribe(`${LayoutApi.LAYOUTAPI_EVENT_PREFIX}:${LayoutApiModel.EventType.EVENT_TYPE_LAYOUT}:*`,{target:{layoutId:s}})])}async unsubscribeFromLayout(s){await Promise.all([this.eventApi.unsubscribe(`${LayoutApi.LAYOUTAPI_EVENT_PREFIX}:${LayoutApiModel.EventType.EVENT_TYPE_LAYER}:*`,{target:{layoutId:s}}),this.eventApi.unsubscribe(`${LayoutApi.LAYOUTAPI_EVENT_PREFIX}:${LayoutApiModel.EventType.EVENT_TYPE_LAYOUT}:*`,{target:{layoutId:s}})])}on(s,d){var c;this.handlers[s]=(c=this.handlers[s])!==null&&c!==void 0?c:[],this.handlers[s].push(d)}off(s,d){this.handlers[s]=this.handlers[s].filter(c=>c!==d)}}LayoutApi.LAYOUTAPI_EVENT_PREFIX="lapi";__decorate([(0,decorator_1.RequiresSdkAuthentication)(),__metadata("design:type",Object)],LayoutApi.prototype,"layout",void 0);__decorate([(0,decorator_1.RequiresSdkAuthentication)(),__metadata("design:type",Object)],LayoutApi.prototype,"layer",void 0);layoutapi.LayoutApi=LayoutApi;var liveapi={},api$1={},timestamp$1={},__createBinding$3=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(a,s,d,c){c===void 0&&(c=d);var m=Object.getOwnPropertyDescriptor(s,d);(!m||("get"in m?!s.__esModule:m.writable||m.configurable))&&(m={enumerable:!0,get:function(){return s[d]}}),Object.defineProperty(a,c,m)}:function(a,s,d,c){c===void 0&&(c=d),a[c]=s[d]}),__setModuleDefault$3=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(a,s){Object.defineProperty(a,"default",{enumerable:!0,value:s})}:function(a,s){a.default=s}),__importStar$3=commonjsGlobal&&commonjsGlobal.__importStar||function(a){if(a&&a.__esModule)return a;var s={};if(a!=null)for(var d in a)d!=="default"&&Object.prototype.hasOwnProperty.call(a,d)&&__createBinding$3(s,a,d);return __setModuleDefault$3(s,a),s},__importDefault$g=commonjsGlobal&&commonjsGlobal.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(timestamp$1,"__esModule",{value:!0});timestamp$1.Timestamp=timestamp$1.protobufPackage=void 0;const long_1$1=__importDefault$g(long),_m0$1=__importStar$3(minimal$2);timestamp$1.protobufPackage="google.protobuf";function createBaseTimestamp(){return{seconds:0,nanos:0}}timestamp$1.Timestamp={encode(a,s=_m0$1.Writer.create()){return a.seconds!==0&&s.uint32(8).int64(a.seconds),a.nanos!==0&&s.uint32(16).int32(a.nanos),s},decode(a,s){const d=a instanceof _m0$1.Reader?a:new _m0$1.Reader(a);let c=s===void 0?d.len:d.pos+s;const m=createBaseTimestamp();for(;d.pos<c;){const g=d.uint32();switch(g>>>3){case 1:m.seconds=longToNumber(d.int64());break;case 2:m.nanos=d.int32();break;default:d.skipType(g&7);break}}return m},fromJSON(a){return{seconds:isSet(a.seconds)?Number(a.seconds):0,nanos:isSet(a.nanos)?Number(a.nanos):0}},toJSON(a){const s={};return a.seconds!==void 0&&(s.seconds=Math.round(a.seconds)),a.nanos!==void 0&&(s.nanos=Math.round(a.nanos)),s},fromPartial(a){var s,d;const c=createBaseTimestamp();return c.seconds=(s=a.seconds)!==null&&s!==void 0?s:0,c.nanos=(d=a.nanos)!==null&&d!==void 0?d:0,c}};var globalThis$1=(()=>{if(typeof globalThis$1!="undefined")return globalThis$1;if(typeof self!="undefined")return self;if(typeof window!="undefined")return window;if(typeof commonjsGlobal!="undefined")return commonjsGlobal;throw"Unable to locate global object"})();function longToNumber(a){if(a.gt(Number.MAX_SAFE_INTEGER))throw new globalThis$1.Error("Value is larger than Number.MAX_SAFE_INTEGER");return a.toNumber()}_m0$1.util.Long!==long_1$1.default&&(_m0$1.util.Long=long_1$1.default,_m0$1.configure());function isSet(a){return a!=null}var struct$1={};(function(a){var s=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(_e,ot,lt,Ot){Ot===void 0&&(Ot=lt);var It=Object.getOwnPropertyDescriptor(ot,lt);(!It||("get"in It?!ot.__esModule:It.writable||It.configurable))&&(It={enumerable:!0,get:function(){return ot[lt]}}),Object.defineProperty(_e,Ot,It)}:function(_e,ot,lt,Ot){Ot===void 0&&(Ot=lt),_e[Ot]=ot[lt]}),d=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(_e,ot){Object.defineProperty(_e,"default",{enumerable:!0,value:ot})}:function(_e,ot){_e.default=ot}),c=commonjsGlobal&&commonjsGlobal.__importStar||function(_e){if(_e&&_e.__esModule)return _e;var ot={};if(_e!=null)for(var lt in _e)lt!=="default"&&Object.prototype.hasOwnProperty.call(_e,lt)&&s(ot,_e,lt);return d(ot,_e),ot},m=commonjsGlobal&&commonjsGlobal.__importDefault||function(_e){return _e&&_e.__esModule?_e:{default:_e}};Object.defineProperty(a,"__esModule",{value:!0}),a.ListValue=a.Value=a.Struct_FieldsEntry=a.Struct=a.nullValueToNumber=a.nullValueToJSON=a.nullValueFromJSON=a.NullValue=a.protobufPackage=void 0;const g=m(long),b=c(minimal$2);a.protobufPackage="google.protobuf";var k;(function(_e){_e.NULL_VALUE="NULL_VALUE"})(k=a.NullValue||(a.NullValue={}));function et(_e){switch(_e){case 0:case"NULL_VALUE":return k.NULL_VALUE;default:throw new St.Error("Unrecognized enum value "+_e+" for enum NullValue")}}a.nullValueFromJSON=et;function nt(_e){switch(_e){case k.NULL_VALUE:return"NULL_VALUE";default:return"UNKNOWN"}}a.nullValueToJSON=nt;function it(_e){switch(_e){case k.NULL_VALUE:return 0;default:return 0}}a.nullValueToNumber=it;function ct(){return{fields:{}}}a.Struct={encode(_e,ot=b.Writer.create()){return Object.entries(_e.fields).forEach(([lt,Ot])=>{Ot!==void 0&&a.Struct_FieldsEntry.encode({key:lt,value:Ot},ot.uint32(10).fork()).ldelim()}),ot},decode(_e,ot){const lt=_e instanceof b.Reader?_e:new b.Reader(_e);let Ot=ot===void 0?lt.len:lt.pos+ot;const It=ct();for(;lt.pos<Ot;){const Pt=lt.uint32();switch(Pt>>>3){case 1:const $t=a.Struct_FieldsEntry.decode(lt,lt.uint32());$t.value!==void 0&&(It.fields[$t.key]=$t.value);break;default:lt.skipType(Pt&7);break}}return It},fromJSON(_e){return{fields:_t(_e.fields)?Object.entries(_e.fields).reduce((ot,[lt,Ot])=>(ot[lt]=Ot,ot),{}):{}}},toJSON(_e){const ot={};return ot.fields={},_e.fields&&Object.entries(_e.fields).forEach(([lt,Ot])=>{ot.fields[lt]=Ot}),ot},fromPartial(_e){var ot;const lt=ct();return lt.fields=Object.entries((ot=_e.fields)!==null&&ot!==void 0?ot:{}).reduce((Ot,[It,Pt])=>(Pt!==void 0&&(Ot[It]=Pt),Ot),{}),lt},wrap(_e){const ot=ct();return _e!==void 0&&Object.keys(_e).forEach(lt=>{ot.fields[lt]=_e[lt]}),ot},unwrap(_e){const ot={};return Object.keys(_e.fields).forEach(lt=>{ot[lt]=_e.fields[lt]}),ot}};function st(){return{key:"",value:void 0}}a.Struct_FieldsEntry={encode(_e,ot=b.Writer.create()){return _e.key!==""&&ot.uint32(10).string(_e.key),_e.value!==void 0&&a.Value.encode(a.Value.wrap(_e.value),ot.uint32(18).fork()).ldelim(),ot},decode(_e,ot){const lt=_e instanceof b.Reader?_e:new b.Reader(_e);let Ot=ot===void 0?lt.len:lt.pos+ot;const It=st();for(;lt.pos<Ot;){const Pt=lt.uint32();switch(Pt>>>3){case 1:It.key=lt.string();break;case 2:It.value=a.Value.unwrap(a.Value.decode(lt,lt.uint32()));break;default:lt.skipType(Pt&7);break}}return It},fromJSON(_e){return{key:ht(_e.key)?String(_e.key):"",value:ht(_e==null?void 0:_e.value)?_e.value:void 0}},toJSON(_e){const ot={};return _e.key!==void 0&&(ot.key=_e.key),_e.value!==void 0&&(ot.value=_e.value),ot},fromPartial(_e){var ot,lt;const Ot=st();return Ot.key=(ot=_e.key)!==null&&ot!==void 0?ot:"",Ot.value=(lt=_e.value)!==null&&lt!==void 0?lt:void 0,Ot}};function ut(){return{nullValue:void 0,numberValue:void 0,stringValue:void 0,boolValue:void 0,structValue:void 0,listValue:void 0}}a.Value={encode(_e,ot=b.Writer.create()){return _e.nullValue!==void 0&&ot.uint32(8).int32(it(_e.nullValue)),_e.numberValue!==void 0&&ot.uint32(17).double(_e.numberValue),_e.stringValue!==void 0&&ot.uint32(26).string(_e.stringValue),_e.boolValue!==void 0&&ot.uint32(32).bool(_e.boolValue),_e.structValue!==void 0&&a.Struct.encode(a.Struct.wrap(_e.structValue),ot.uint32(42).fork()).ldelim(),_e.listValue!==void 0&&a.ListValue.encode(a.ListValue.wrap(_e.listValue),ot.uint32(50).fork()).ldelim(),ot},decode(_e,ot){const lt=_e instanceof b.Reader?_e:new b.Reader(_e);let Ot=ot===void 0?lt.len:lt.pos+ot;const It=ut();for(;lt.pos<Ot;){const Pt=lt.uint32();switch(Pt>>>3){case 1:It.nullValue=et(lt.int32());break;case 2:It.numberValue=lt.double();break;case 3:It.stringValue=lt.string();break;case 4:It.boolValue=lt.bool();break;case 5:It.structValue=a.Struct.unwrap(a.Struct.decode(lt,lt.uint32()));break;case 6:It.listValue=a.ListValue.unwrap(a.ListValue.decode(lt,lt.uint32()));break;default:lt.skipType(Pt&7);break}}return It},fromJSON(_e){return{nullValue:ht(_e.nullValue)?et(_e.nullValue):void 0,numberValue:ht(_e.numberValue)?Number(_e.numberValue):void 0,stringValue:ht(_e.stringValue)?String(_e.stringValue):void 0,boolValue:ht(_e.boolValue)?Boolean(_e.boolValue):void 0,structValue:_t(_e.structValue)?_e.structValue:void 0,listValue:Array.isArray(_e.listValue)?[..._e.listValue]:void 0}},toJSON(_e){const ot={};return _e.nullValue!==void 0&&(ot.nullValue=_e.nullValue!==void 0?nt(_e.nullValue):void 0),_e.numberValue!==void 0&&(ot.numberValue=_e.numberValue),_e.stringValue!==void 0&&(ot.stringValue=_e.stringValue),_e.boolValue!==void 0&&(ot.boolValue=_e.boolValue),_e.structValue!==void 0&&(ot.structValue=_e.structValue),_e.listValue!==void 0&&(ot.listValue=_e.listValue),ot},fromPartial(_e){var ot,lt,Ot,It,Pt,$t;const bt=ut();return bt.nullValue=(ot=_e.nullValue)!==null&&ot!==void 0?ot:void 0,bt.numberValue=(lt=_e.numberValue)!==null&&lt!==void 0?lt:void 0,bt.stringValue=(Ot=_e.stringValue)!==null&&Ot!==void 0?Ot:void 0,bt.boolValue=(It=_e.boolValue)!==null&&It!==void 0?It:void 0,bt.structValue=(Pt=_e.structValue)!==null&&Pt!==void 0?Pt:void 0,bt.listValue=($t=_e.listValue)!==null&&$t!==void 0?$t:void 0,bt},wrap(_e){const ot=ut();if(_e===null)ot.nullValue=k.NULL_VALUE;else if(typeof _e=="boolean")ot.boolValue=_e;else if(typeof _e=="number")ot.numberValue=_e;else if(typeof _e=="string")ot.stringValue=_e;else if(Array.isArray(_e))ot.listValue=_e;else if(typeof _e=="object")ot.structValue=_e;else if(typeof _e!="undefined")throw new Error("Unsupported any value type: "+typeof _e);return ot},unwrap(_e){if((_e==null?void 0:_e.stringValue)!==void 0)return _e.stringValue;if((_e==null?void 0:_e.numberValue)!==void 0)return _e.numberValue;if((_e==null?void 0:_e.boolValue)!==void 0)return _e.boolValue;if((_e==null?void 0:_e.structValue)!==void 0)return _e.structValue;if((_e==null?void 0:_e.listValue)!==void 0)return _e.listValue;if((_e==null?void 0:_e.nullValue)!==void 0)return null}};function pt(){return{values:[]}}a.ListValue={encode(_e,ot=b.Writer.create()){for(const lt of _e.values)a.Value.encode(a.Value.wrap(lt),ot.uint32(10).fork()).ldelim();return ot},decode(_e,ot){const lt=_e instanceof b.Reader?_e:new b.Reader(_e);let Ot=ot===void 0?lt.len:lt.pos+ot;const It=pt();for(;lt.pos<Ot;){const Pt=lt.uint32();switch(Pt>>>3){case 1:It.values.push(a.Value.unwrap(a.Value.decode(lt,lt.uint32())));break;default:lt.skipType(Pt&7);break}}return It},fromJSON(_e){return{values:Array.isArray(_e==null?void 0:_e.values)?[..._e.values]:[]}},toJSON(_e){const ot={};return _e.values?ot.values=_e.values.map(lt=>lt):ot.values=[],ot},fromPartial(_e){var ot;const lt=pt();return lt.values=((ot=_e.values)===null||ot===void 0?void 0:ot.map(Ot=>Ot))||[],lt},wrap(_e){const ot=pt();return ot.values=_e!=null?_e:[],ot},unwrap(_e){return _e.values}};var St=(()=>{if(typeof St!="undefined")return St;if(typeof self!="undefined")return self;if(typeof window!="undefined")return window;if(typeof commonjsGlobal!="undefined")return commonjsGlobal;throw"Unable to locate global object"})();b.util.Long!==g.default&&(b.util.Long=g.default,b.configure());function _t(_e){return typeof _e=="object"&&_e!==null}function ht(_e){return _e!=null}})(struct$1);var field_mask={},__createBinding$2=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(a,s,d,c){c===void 0&&(c=d);var m=Object.getOwnPropertyDescriptor(s,d);(!m||("get"in m?!s.__esModule:m.writable||m.configurable))&&(m={enumerable:!0,get:function(){return s[d]}}),Object.defineProperty(a,c,m)}:function(a,s,d,c){c===void 0&&(c=d),a[c]=s[d]}),__setModuleDefault$2=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(a,s){Object.defineProperty(a,"default",{enumerable:!0,value:s})}:function(a,s){a.default=s}),__importStar$2=commonjsGlobal&&commonjsGlobal.__importStar||function(a){if(a&&a.__esModule)return a;var s={};if(a!=null)for(var d in a)d!=="default"&&Object.prototype.hasOwnProperty.call(a,d)&&__createBinding$2(s,a,d);return __setModuleDefault$2(s,a),s},__importDefault$f=commonjsGlobal&&commonjsGlobal.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(field_mask,"__esModule",{value:!0});field_mask.FieldMask=field_mask.protobufPackage=void 0;const long_1=__importDefault$f(long),_m0=__importStar$2(minimal$2);field_mask.protobufPackage="google.protobuf";function createBaseFieldMask(){return{paths:[]}}field_mask.FieldMask={encode(a,s=_m0.Writer.create()){for(const d of a.paths)s.uint32(10).string(d);return s},decode(a,s){const d=a instanceof _m0.Reader?a:new _m0.Reader(a);let c=s===void 0?d.len:d.pos+s;const m=createBaseFieldMask();for(;d.pos<c;){const g=d.uint32();switch(g>>>3){case 1:m.paths.push(d.string());break;default:d.skipType(g&7);break}}return m},fromJSON(a){return{paths:typeof a=="string"?a.split(",").filter(Boolean):Array.isArray(a==null?void 0:a.paths)?a.paths.map(String):[]}},toJSON(a){return a.paths.join(",")},fromPartial(a){var s;const d=createBaseFieldMask();return d.paths=((s=a.paths)===null||s===void 0?void 0:s.map(c=>c))||[],d},wrap(a){return{paths:a}},unwrap(a){return a.paths}};_m0.util.Long!==long_1.default&&(_m0.util.Long=long_1.default,_m0.configure());(function(a){var s=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(h,_,j,Et){Et===void 0&&(Et=j);var dt=Object.getOwnPropertyDescriptor(_,j);(!dt||("get"in dt?!_.__esModule:dt.writable||dt.configurable))&&(dt={enumerable:!0,get:function(){return _[j]}}),Object.defineProperty(h,Et,dt)}:function(h,_,j,Et){Et===void 0&&(Et=j),h[Et]=_[j]}),d=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(h,_){Object.defineProperty(h,"default",{enumerable:!0,value:_})}:function(h,_){h.default=_}),c=commonjsGlobal&&commonjsGlobal.__importStar||function(h){if(h&&h.__esModule)return h;var _={};if(h!=null)for(var j in h)j!=="default"&&Object.prototype.hasOwnProperty.call(h,j)&&s(_,h,j);return d(_,h),_},m=commonjsGlobal&&commonjsGlobal.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(a,"__esModule",{value:!0}),a.ProjectBroadcastError=a.roleToNumber=a.roleToJSON=a.roleFromJSON=a.Role=a.regionToNumber=a.regionToJSON=a.regionFromJSON=a.Region=a.sourceTriggerActionToNumber=a.sourceTriggerActionToJSON=a.sourceTriggerActionFromJSON=a.SourceTriggerAction=a.projectBroadcastPhaseToNumber=a.projectBroadcastPhaseToJSON=a.projectBroadcastPhaseFromJSON=a.ProjectBroadcastPhase=a.videoCodecRateControlModeToNumber=a.videoCodecRateControlModeToJSON=a.videoCodecRateControlModeFromJSON=a.VideoCodecRateControlMode=a.audioCodecToNumber=a.audioCodecToJSON=a.audioCodecFromJSON=a.AudioCodec=a.videoCodecProfileToNumber=a.videoCodecProfileToJSON=a.videoCodecProfileFromJSON=a.VideoCodecProfile=a.videoCodecToNumber=a.videoCodecToJSON=a.videoCodecFromJSON=a.VideoCodec=a.renderingQualityToNumber=a.renderingQualityToJSON=a.renderingQualityFromJSON=a.RenderingQuality=a.audioChannelLayoutToNumber=a.audioChannelLayoutToJSON=a.audioChannelLayoutFromJSON=a.AudioChannelLayout=a.videoColorSpaceToNumber=a.videoColorSpaceToJSON=a.videoColorSpaceFromJSON=a.VideoColorSpace=a.imageFormatToNumber=a.imageFormatToJSON=a.imageFormatFromJSON=a.ImageFormat=a.protobufPackage=void 0,a.CreateCollectionResponse=a.CreateCollectionRequest=a.Collection=a.Project=a.Destination=a.Source=a.ProjectBroadcastStatus=a.LatLong=a.WebRtcAccess=a.WebRtc=a.HostedWebRtc=a.Composition=a.ExternalComposition=a.SceneComposition=a.SceneCompositionLegacy=a.StudioSdkComposition=a.PreviewAddress=a.PreviewWebRtcAddress=a.PreviewHlsPullAddress=a.ProjectTrigger=a.WebRtcTrigger=a.SourceTrigger=a.DestinationAddress=a.DestinationAgoraPushAddress=a.DestinationRtmpPushAddress=a.SourceAddress=a.SrtPushAddress=a.SourceRtmpPushAddress=a.Encoding=a.AudioEncoding=a.VideoEncoding=a.VideoCodecRateControl=a.Rendering=a.AudioRendering=a.VideoRendering=a.eventTypeToNumber=a.eventTypeToJSON=a.eventTypeFromJSON=a.EventType=a.eventSubTypeToNumber=a.eventSubTypeToJSON=a.eventSubTypeFromJSON=a.EventSubType=a.connectStateToNumber=a.connectStateToJSON=a.connectStateFromJSON=a.ConnectState=a.projectBroadcastErrorToNumber=a.projectBroadcastErrorToJSON=a.projectBroadcastErrorFromJSON=void 0,a.UpdateSourceResponse=a.UpdateSourceRequest=a.GetSourcesResponse=a.GetSourcesRequest=a.GetSourceResponse=a.GetSourceRequest=a.UpdateSourceInProjectResponse=a.UpdateSourceInProjectRequest=a.AddSourceToProjectResponse=a.AddSourceToProjectRequest=a.DeleteSourceResponse=a.DeleteSourceRequest=a.CreateSourceResponse=a.CreateSourceRequest=a.UpdateDestinationResponse=a.UpdateDestinationRequest=a.DeleteDestinationResponse=a.DeleteDestinationRequest=a.GetDestinationResponse=a.GetDestinationRequest=a.CreateDestinationResponse=a.CreateDestinationRequest=a.StopProjectWebRtcResponse=a.StopProjectWebRtcRequest=a.StartProjectWebRtcResponse=a.StartProjectWebRtcRequest=a.GetProjectBroadcastStatusResponse=a.GetProjectBroadcastStatusRequest=a.GetProjectBroadcastSnapshotResponse=a.GetProjectBroadcastSnapshotRequest=a.GetProjectResponse=a.GetProjectRequest=a.StopProjectBroadcastResponse=a.StopProjectBroadcastRequest=a.StartProjectBroadcastResponse=a.StartProjectBroadcastRequest=a.DeleteProjectResponse=a.DeleteProjectRequest=a.UpdateProjectResponse=a.UpdateProjectRequest=a.CreateProjectResponse=a.CreateProjectRequest=a.GetCollectionsResponse=a.GetCollectionsRequest=a.DeleteCollectionResponse=a.DeleteCollectionRequest=a.UpdateCollectionResponse=a.UpdateCollectionRequest=a.GetCollectionResponse=a.GetCollectionRequest=void 0,a.DestinationServiceDefinition=a.DestinationServiceClientImpl=a.ProjectServiceDefinition=a.ProjectServiceClientImpl=a.CollectionServiceDefinition=a.CollectionServiceClientImpl=a.LiveEvent=a.SourceEvent=a.ProjectEvent=a.DestinationEvent=a.CollectionEvent=a.SourceRemoveEvent=a.SourceAddEvent=a.SourceUpdateEvent=a.SourceDeleteEvent=a.SourceCreateEvent=a.CollectionUpdateEvent=a.CollectionDeleteEvent=a.CollectionCreateEvent=a.ProjectBroadcastStateEvent=a.ProjectUpdateEvent=a.ProjectDeleteEvent=a.ProjectCreateEvent=a.DestinationStateEvent=a.DestinationUpdateEvent=a.DestinationDeleteEvent=a.DestinationCreateEvent=a.GetTestTokenResponse=a.GetTestTokenRequest=a.GetJsonWebKeySetResponse=a.GetJsonWebKeySetRequest=a.JsonWebKey=a.CreateDemoAccessTokenResponse=a.CreateDemoAccessTokenRequest=a.GuestCodeRedirectResponse=a.GuestCodeRedirectRequest=a.GuestCode=a.RefreshAccessTokenResponse=a.RefreshAccessTokenRequest=a.CreateWebRtcAccessTokenResponse=a.CreateWebRtcAccessTokenRequest=a.CreateGuestAccessTokenResponse=a.CreateGuestAccessTokenRequest=a.GuestAccessToken=a.GuestAccessTokenExchange=a.GuestAccessTokenDirect=a.CreateAccessTokenResponse=a.CreateAccessTokenRequest=a.RemoveSourceFromProjectResponse=a.RemoveSourceFromProjectRequest=void 0,a.PublicAuthenticationServiceDefinition=a.PublicAuthenticationServiceClientImpl=a.AuthenticationServiceDefinition=a.AuthenticationServiceClientImpl=a.BackendAuthenticationServiceDefinition=a.BackendAuthenticationServiceClientImpl=a.SourceServiceDefinition=a.SourceServiceClientImpl=void 0;const g=m(long),b=c(minimal$2),k=timestamp$1,et=struct$1,nt=field_mask;a.protobufPackage="live.v21";var it;(function(h){h.IMAGE_FORMAT_UNSPECIFIED="IMAGE_FORMAT_UNSPECIFIED",h.IMAGE_FORMAT_JPEG="IMAGE_FORMAT_JPEG"})(it=a.ImageFormat||(a.ImageFormat={}));function ct(h){switch(h){case 0:case"IMAGE_FORMAT_UNSPECIFIED":return it.IMAGE_FORMAT_UNSPECIFIED;case 1:case"IMAGE_FORMAT_JPEG":return it.IMAGE_FORMAT_JPEG;default:throw new En.Error("Unrecognized enum value "+h+" for enum ImageFormat")}}a.imageFormatFromJSON=ct;function st(h){switch(h){case it.IMAGE_FORMAT_UNSPECIFIED:return"IMAGE_FORMAT_UNSPECIFIED";case it.IMAGE_FORMAT_JPEG:return"IMAGE_FORMAT_JPEG";default:return"UNKNOWN"}}a.imageFormatToJSON=st;function ut(h){switch(h){case it.IMAGE_FORMAT_UNSPECIFIED:return 0;case it.IMAGE_FORMAT_JPEG:return 1;default:return 0}}a.imageFormatToNumber=ut;var pt;(function(h){h.VIDEO_COLOR_SPACE_UNSPECIFIED="VIDEO_COLOR_SPACE_UNSPECIFIED",h.VIDEO_COLOR_SPACE_YUV420="VIDEO_COLOR_SPACE_YUV420"})(pt=a.VideoColorSpace||(a.VideoColorSpace={}));function St(h){switch(h){case 0:case"VIDEO_COLOR_SPACE_UNSPECIFIED":return pt.VIDEO_COLOR_SPACE_UNSPECIFIED;case 1:case"VIDEO_COLOR_SPACE_YUV420":return pt.VIDEO_COLOR_SPACE_YUV420;default:throw new En.Error("Unrecognized enum value "+h+" for enum VideoColorSpace")}}a.videoColorSpaceFromJSON=St;function _t(h){switch(h){case pt.VIDEO_COLOR_SPACE_UNSPECIFIED:return"VIDEO_COLOR_SPACE_UNSPECIFIED";case pt.VIDEO_COLOR_SPACE_YUV420:return"VIDEO_COLOR_SPACE_YUV420";default:return"UNKNOWN"}}a.videoColorSpaceToJSON=_t;function ht(h){switch(h){case pt.VIDEO_COLOR_SPACE_UNSPECIFIED:return 0;case pt.VIDEO_COLOR_SPACE_YUV420:return 1;default:return 0}}a.videoColorSpaceToNumber=ht;var _e;(function(h){h.AUDIO_CHANNEL_LAYOUT_UNSPECIFIED="AUDIO_CHANNEL_LAYOUT_UNSPECIFIED",h.AUDIO_CHANNEL_LAYOUT_STEREO="AUDIO_CHANNEL_LAYOUT_STEREO"})(_e=a.AudioChannelLayout||(a.AudioChannelLayout={}));function ot(h){switch(h){case 0:case"AUDIO_CHANNEL_LAYOUT_UNSPECIFIED":return _e.AUDIO_CHANNEL_LAYOUT_UNSPECIFIED;case 1:case"AUDIO_CHANNEL_LAYOUT_STEREO":return _e.AUDIO_CHANNEL_LAYOUT_STEREO;default:throw new En.Error("Unrecognized enum value "+h+" for enum AudioChannelLayout")}}a.audioChannelLayoutFromJSON=ot;function lt(h){switch(h){case _e.AUDIO_CHANNEL_LAYOUT_UNSPECIFIED:return"AUDIO_CHANNEL_LAYOUT_UNSPECIFIED";case _e.AUDIO_CHANNEL_LAYOUT_STEREO:return"AUDIO_CHANNEL_LAYOUT_STEREO";default:return"UNKNOWN"}}a.audioChannelLayoutToJSON=lt;function Ot(h){switch(h){case _e.AUDIO_CHANNEL_LAYOUT_UNSPECIFIED:return 0;case _e.AUDIO_CHANNEL_LAYOUT_STEREO:return 1;default:return 0}}a.audioChannelLayoutToNumber=Ot;var It;(function(h){h.RENDERING_QUALITY_UNSPECIFIED="RENDERING_QUALITY_UNSPECIFIED",h.RENDERING_QUALITY_STANDARD="RENDERING_QUALITY_STANDARD",h.RENDERING_QUALITY_HIGH="RENDERING_QUALITY_HIGH"})(It=a.RenderingQuality||(a.RenderingQuality={}));function Pt(h){switch(h){case 0:case"RENDERING_QUALITY_UNSPECIFIED":return It.RENDERING_QUALITY_UNSPECIFIED;case 1:case"RENDERING_QUALITY_STANDARD":return It.RENDERING_QUALITY_STANDARD;case 2:case"RENDERING_QUALITY_HIGH":return It.RENDERING_QUALITY_HIGH;default:throw new En.Error("Unrecognized enum value "+h+" for enum RenderingQuality")}}a.renderingQualityFromJSON=Pt;function $t(h){switch(h){case It.RENDERING_QUALITY_UNSPECIFIED:return"RENDERING_QUALITY_UNSPECIFIED";case It.RENDERING_QUALITY_STANDARD:return"RENDERING_QUALITY_STANDARD";case It.RENDERING_QUALITY_HIGH:return"RENDERING_QUALITY_HIGH";default:return"UNKNOWN"}}a.renderingQualityToJSON=$t;function bt(h){switch(h){case It.RENDERING_QUALITY_UNSPECIFIED:return 0;case It.RENDERING_QUALITY_STANDARD:return 1;case It.RENDERING_QUALITY_HIGH:return 2;default:return 0}}a.renderingQualityToNumber=bt;var Rt;(function(h){h.VIDEO_CODEC_UNSPECIFIED="VIDEO_CODEC_UNSPECIFIED",h.VIDEO_CODEC_H264="VIDEO_CODEC_H264"})(Rt=a.VideoCodec||(a.VideoCodec={}));function Ct(h){switch(h){case 0:case"VIDEO_CODEC_UNSPECIFIED":return Rt.VIDEO_CODEC_UNSPECIFIED;case 1:case"VIDEO_CODEC_H264":return Rt.VIDEO_CODEC_H264;default:throw new En.Error("Unrecognized enum value "+h+" for enum VideoCodec")}}a.videoCodecFromJSON=Ct;function vt(h){switch(h){case Rt.VIDEO_CODEC_UNSPECIFIED:return"VIDEO_CODEC_UNSPECIFIED";case Rt.VIDEO_CODEC_H264:return"VIDEO_CODEC_H264";default:return"UNKNOWN"}}a.videoCodecToJSON=vt;function Tt(h){switch(h){case Rt.VIDEO_CODEC_UNSPECIFIED:return 0;case Rt.VIDEO_CODEC_H264:return 1;default:return 0}}a.videoCodecToNumber=Tt;var wt;(function(h){h.VIDEO_CODEC_PROFILE_UNSPECIFIED="VIDEO_CODEC_PROFILE_UNSPECIFIED",h.VIDEO_CODEC_PROFILE_CONSTRAINED_BASELINE="VIDEO_CODEC_PROFILE_CONSTRAINED_BASELINE",h.VIDEO_CODEC_PROFILE_BASELINE="VIDEO_CODEC_PROFILE_BASELINE",h.VIDEO_CODEC_PROFILE_MAIN="VIDEO_CODEC_PROFILE_MAIN",h.VIDEO_CODEC_PROFILE_HIGH="VIDEO_CODEC_PROFILE_HIGH"})(wt=a.VideoCodecProfile||(a.VideoCodecProfile={}));function zt(h){switch(h){case 0:case"VIDEO_CODEC_PROFILE_UNSPECIFIED":return wt.VIDEO_CODEC_PROFILE_UNSPECIFIED;case 1:case"VIDEO_CODEC_PROFILE_CONSTRAINED_BASELINE":return wt.VIDEO_CODEC_PROFILE_CONSTRAINED_BASELINE;case 2:case"VIDEO_CODEC_PROFILE_BASELINE":return wt.VIDEO_CODEC_PROFILE_BASELINE;case 3:case"VIDEO_CODEC_PROFILE_MAIN":return wt.VIDEO_CODEC_PROFILE_MAIN;case 4:case"VIDEO_CODEC_PROFILE_HIGH":return wt.VIDEO_CODEC_PROFILE_HIGH;default:throw new En.Error("Unrecognized enum value "+h+" for enum VideoCodecProfile")}}a.videoCodecProfileFromJSON=zt;function Mt(h){switch(h){case wt.VIDEO_CODEC_PROFILE_UNSPECIFIED:return"VIDEO_CODEC_PROFILE_UNSPECIFIED";case wt.VIDEO_CODEC_PROFILE_CONSTRAINED_BASELINE:return"VIDEO_CODEC_PROFILE_CONSTRAINED_BASELINE";case wt.VIDEO_CODEC_PROFILE_BASELINE:return"VIDEO_CODEC_PROFILE_BASELINE";case wt.VIDEO_CODEC_PROFILE_MAIN:return"VIDEO_CODEC_PROFILE_MAIN";case wt.VIDEO_CODEC_PROFILE_HIGH:return"VIDEO_CODEC_PROFILE_HIGH";default:return"UNKNOWN"}}a.videoCodecProfileToJSON=Mt;function Nt(h){switch(h){case wt.VIDEO_CODEC_PROFILE_UNSPECIFIED:return 0;case wt.VIDEO_CODEC_PROFILE_CONSTRAINED_BASELINE:return 1;case wt.VIDEO_CODEC_PROFILE_BASELINE:return 2;case wt.VIDEO_CODEC_PROFILE_MAIN:return 3;case wt.VIDEO_CODEC_PROFILE_HIGH:return 4;default:return 0}}a.videoCodecProfileToNumber=Nt;var Ft;(function(h){h.AUDIO_CODEC_UNSPECIFIED="AUDIO_CODEC_UNSPECIFIED",h.AUDIO_CODEC_AAC="AUDIO_CODEC_AAC"})(Ft=a.AudioCodec||(a.AudioCodec={}));function Wt(h){switch(h){case 0:case"AUDIO_CODEC_UNSPECIFIED":return Ft.AUDIO_CODEC_UNSPECIFIED;case 1:case"AUDIO_CODEC_AAC":return Ft.AUDIO_CODEC_AAC;default:throw new En.Error("Unrecognized enum value "+h+" for enum AudioCodec")}}a.audioCodecFromJSON=Wt;function Ht(h){switch(h){case Ft.AUDIO_CODEC_UNSPECIFIED:return"AUDIO_CODEC_UNSPECIFIED";case Ft.AUDIO_CODEC_AAC:return"AUDIO_CODEC_AAC";default:return"UNKNOWN"}}a.audioCodecToJSON=Ht;function Yt(h){switch(h){case Ft.AUDIO_CODEC_UNSPECIFIED:return 0;case Ft.AUDIO_CODEC_AAC:return 1;default:return 0}}a.audioCodecToNumber=Yt;var $;(function(h){h.VIDEO_CODEC_RATE_CONTROL_MODE_UNSPECIFIED="VIDEO_CODEC_RATE_CONTROL_MODE_UNSPECIFIED",h.VIDEO_CODEC_RATE_CONTROL_MODE_CBR="VIDEO_CODEC_RATE_CONTROL_MODE_CBR"})($=a.VideoCodecRateControlMode||(a.VideoCodecRateControlMode={}));function rt(h){switch(h){case 0:case"VIDEO_CODEC_RATE_CONTROL_MODE_UNSPECIFIED":return $.VIDEO_CODEC_RATE_CONTROL_MODE_UNSPECIFIED;case 1:case"VIDEO_CODEC_RATE_CONTROL_MODE_CBR":return $.VIDEO_CODEC_RATE_CONTROL_MODE_CBR;default:throw new En.Error("Unrecognized enum value "+h+" for enum VideoCodecRateControlMode")}}a.videoCodecRateControlModeFromJSON=rt;function mt(h){switch(h){case $.VIDEO_CODEC_RATE_CONTROL_MODE_UNSPECIFIED:return"VIDEO_CODEC_RATE_CONTROL_MODE_UNSPECIFIED";case $.VIDEO_CODEC_RATE_CONTROL_MODE_CBR:return"VIDEO_CODEC_RATE_CONTROL_MODE_CBR";default:return"UNKNOWN"}}a.videoCodecRateControlModeToJSON=mt;function Vt(h){switch(h){case $.VIDEO_CODEC_RATE_CONTROL_MODE_UNSPECIFIED:return 0;case $.VIDEO_CODEC_RATE_CONTROL_MODE_CBR:return 1;default:return 0}}a.videoCodecRateControlModeToNumber=Vt;var at;(function(h){h.PROJECT_BROADCAST_PHASE_UNSPECIFIED="PROJECT_BROADCAST_PHASE_UNSPECIFIED",h.PROJECT_BROADCAST_PHASE_NOT_RUNNING="PROJECT_BROADCAST_PHASE_NOT_RUNNING",h.PROJECT_BROADCAST_PHASE_WAITING="PROJECT_BROADCAST_PHASE_WAITING",h.PROJECT_BROADCAST_PHASE_STARTING="PROJECT_BROADCAST_PHASE_STARTING",h.PROJECT_BROADCAST_PHASE_RUNNING="PROJECT_BROADCAST_PHASE_RUNNING",h.PROJECT_BROADCAST_PHASE_STOPPING="PROJECT_BROADCAST_PHASE_STOPPING",h.PROJECT_BROADCAST_PHASE_STOPPED="PROJECT_BROADCAST_PHASE_STOPPED",h.PROJECT_BROADCAST_PHASE_ARCHIVED="PROJECT_BROADCAST_PHASE_ARCHIVED"})(at=a.ProjectBroadcastPhase||(a.ProjectBroadcastPhase={}));function yt(h){switch(h){case 0:case"PROJECT_BROADCAST_PHASE_UNSPECIFIED":return at.PROJECT_BROADCAST_PHASE_UNSPECIFIED;case 1:case"PROJECT_BROADCAST_PHASE_NOT_RUNNING":return at.PROJECT_BROADCAST_PHASE_NOT_RUNNING;case 2:case"PROJECT_BROADCAST_PHASE_WAITING":return at.PROJECT_BROADCAST_PHASE_WAITING;case 3:case"PROJECT_BROADCAST_PHASE_STARTING":return at.PROJECT_BROADCAST_PHASE_STARTING;case 4:case"PROJECT_BROADCAST_PHASE_RUNNING":return at.PROJECT_BROADCAST_PHASE_RUNNING;case 5:case"PROJECT_BROADCAST_PHASE_STOPPING":return at.PROJECT_BROADCAST_PHASE_STOPPING;case 6:case"PROJECT_BROADCAST_PHASE_STOPPED":return at.PROJECT_BROADCAST_PHASE_STOPPED;case 7:case"PROJECT_BROADCAST_PHASE_ARCHIVED":return at.PROJECT_BROADCAST_PHASE_ARCHIVED;default:throw new En.Error("Unrecognized enum value "+h+" for enum ProjectBroadcastPhase")}}a.projectBroadcastPhaseFromJSON=yt;function Dt(h){switch(h){case at.PROJECT_BROADCAST_PHASE_UNSPECIFIED:return"PROJECT_BROADCAST_PHASE_UNSPECIFIED";case at.PROJECT_BROADCAST_PHASE_NOT_RUNNING:return"PROJECT_BROADCAST_PHASE_NOT_RUNNING";case at.PROJECT_BROADCAST_PHASE_WAITING:return"PROJECT_BROADCAST_PHASE_WAITING";case at.PROJECT_BROADCAST_PHASE_STARTING:return"PROJECT_BROADCAST_PHASE_STARTING";case at.PROJECT_BROADCAST_PHASE_RUNNING:return"PROJECT_BROADCAST_PHASE_RUNNING";case at.PROJECT_BROADCAST_PHASE_STOPPING:return"PROJECT_BROADCAST_PHASE_STOPPING";case at.PROJECT_BROADCAST_PHASE_STOPPED:return"PROJECT_BROADCAST_PHASE_STOPPED";case at.PROJECT_BROADCAST_PHASE_ARCHIVED:return"PROJECT_BROADCAST_PHASE_ARCHIVED";default:return"UNKNOWN"}}a.projectBroadcastPhaseToJSON=Dt;function Gt(h){switch(h){case at.PROJECT_BROADCAST_PHASE_UNSPECIFIED:return 0;case at.PROJECT_BROADCAST_PHASE_NOT_RUNNING:return 1;case at.PROJECT_BROADCAST_PHASE_WAITING:return 2;case at.PROJECT_BROADCAST_PHASE_STARTING:return 3;case at.PROJECT_BROADCAST_PHASE_RUNNING:return 4;case at.PROJECT_BROADCAST_PHASE_STOPPING:return 5;case at.PROJECT_BROADCAST_PHASE_STOPPED:return 6;case at.PROJECT_BROADCAST_PHASE_ARCHIVED:return 7;default:return 0}}a.projectBroadcastPhaseToNumber=Gt;var Bt;(function(h){h.SOURCE_TRIGGER_ACTION_UNSPECIFIED="SOURCE_TRIGGER_ACTION_UNSPECIFIED",h.SOURCE_TRIGGER_ACTION_IGNORE="SOURCE_TRIGGER_ACTION_IGNORE",h.SOURCE_TRIGGER_ACTION_OR="SOURCE_TRIGGER_ACTION_OR"})(Bt=a.SourceTriggerAction||(a.SourceTriggerAction={}));function xt(h){switch(h){case 0:case"SOURCE_TRIGGER_ACTION_UNSPECIFIED":return Bt.SOURCE_TRIGGER_ACTION_UNSPECIFIED;case 1:case"SOURCE_TRIGGER_ACTION_IGNORE":return Bt.SOURCE_TRIGGER_ACTION_IGNORE;case 3:case"SOURCE_TRIGGER_ACTION_OR":return Bt.SOURCE_TRIGGER_ACTION_OR;default:throw new En.Error("Unrecognized enum value "+h+" for enum SourceTriggerAction")}}a.sourceTriggerActionFromJSON=xt;function tn(h){switch(h){case Bt.SOURCE_TRIGGER_ACTION_UNSPECIFIED:return"SOURCE_TRIGGER_ACTION_UNSPECIFIED";case Bt.SOURCE_TRIGGER_ACTION_IGNORE:return"SOURCE_TRIGGER_ACTION_IGNORE";case Bt.SOURCE_TRIGGER_ACTION_OR:return"SOURCE_TRIGGER_ACTION_OR";default:return"UNKNOWN"}}a.sourceTriggerActionToJSON=tn;function dn(h){switch(h){case Bt.SOURCE_TRIGGER_ACTION_UNSPECIFIED:return 0;case Bt.SOURCE_TRIGGER_ACTION_IGNORE:return 1;case Bt.SOURCE_TRIGGER_ACTION_OR:return 3;default:return 0}}a.sourceTriggerActionToNumber=dn;var Qt;(function(h){h.REGION_UNSPECIFIED="REGION_UNSPECIFIED",h.REGION_US_EAST="REGION_US_EAST",h.REGION_US_WEST="REGION_US_WEST",h.REGION_AP_SOUTHEAST="REGION_AP_SOUTHEAST",h.REGION_CA_EAST="REGION_CA_EAST",h.REGION_EU_CENTRAL="REGION_EU_CENTRAL",h.REGION_EU_WEST="REGION_EU_WEST"})(Qt=a.Region||(a.Region={}));function rn(h){switch(h){case 0:case"REGION_UNSPECIFIED":return Qt.REGION_UNSPECIFIED;case 1:case"REGION_US_EAST":return Qt.REGION_US_EAST;case 2:case"REGION_US_WEST":return Qt.REGION_US_WEST;case 10:case"REGION_AP_SOUTHEAST":return Qt.REGION_AP_SOUTHEAST;case 20:case"REGION_CA_EAST":return Qt.REGION_CA_EAST;case 30:case"REGION_EU_CENTRAL":return Qt.REGION_EU_CENTRAL;case 31:case"REGION_EU_WEST":return Qt.REGION_EU_WEST;default:throw new En.Error("Unrecognized enum value "+h+" for enum Region")}}a.regionFromJSON=rn;function mn(h){switch(h){case Qt.REGION_UNSPECIFIED:return"REGION_UNSPECIFIED";case Qt.REGION_US_EAST:return"REGION_US_EAST";case Qt.REGION_US_WEST:return"REGION_US_WEST";case Qt.REGION_AP_SOUTHEAST:return"REGION_AP_SOUTHEAST";case Qt.REGION_CA_EAST:return"REGION_CA_EAST";case Qt.REGION_EU_CENTRAL:return"REGION_EU_CENTRAL";case Qt.REGION_EU_WEST:return"REGION_EU_WEST";default:return"UNKNOWN"}}a.regionToJSON=mn;function On(h){switch(h){case Qt.REGION_UNSPECIFIED:return 0;case Qt.REGION_US_EAST:return 1;case Qt.REGION_US_WEST:return 2;case Qt.REGION_AP_SOUTHEAST:return 10;case Qt.REGION_CA_EAST:return 20;case Qt.REGION_EU_CENTRAL:return 30;case Qt.REGION_EU_WEST:return 31;default:return 0}}a.regionToNumber=On;var Xt;(function(h){h.ROLE_UNSPECIFIED="ROLE_UNSPECIFIED",h.ROLE_HOST="ROLE_HOST",h.ROLE_COHOST="ROLE_COHOST",h.ROLE_CONTRIBUTOR="ROLE_CONTRIBUTOR",h.ROLE_GUEST="ROLE_GUEST",h.ROLE_VIEWER="ROLE_VIEWER",h.ROLE_RENDERER="ROLE_RENDERER",h.ROLE_PLATFORM="ROLE_PLATFORM"})(Xt=a.Role||(a.Role={}));function bn(h){switch(h){case 0:case"ROLE_UNSPECIFIED":return Xt.ROLE_UNSPECIFIED;case 1:case"ROLE_HOST":return Xt.ROLE_HOST;case 2:case"ROLE_COHOST":return Xt.ROLE_COHOST;case 3:case"ROLE_CONTRIBUTOR":return Xt.ROLE_CONTRIBUTOR;case 4:case"ROLE_GUEST":return Xt.ROLE_GUEST;case 5:case"ROLE_VIEWER":return Xt.ROLE_VIEWER;case 6:case"ROLE_RENDERER":return Xt.ROLE_RENDERER;case 7:case"ROLE_PLATFORM":return Xt.ROLE_PLATFORM;default:throw new En.Error("Unrecognized enum value "+h+" for enum Role")}}a.roleFromJSON=bn;function $n(h){switch(h){case Xt.ROLE_UNSPECIFIED:return"ROLE_UNSPECIFIED";case Xt.ROLE_HOST:return"ROLE_HOST";case Xt.ROLE_COHOST:return"ROLE_COHOST";case Xt.ROLE_CONTRIBUTOR:return"ROLE_CONTRIBUTOR";case Xt.ROLE_GUEST:return"ROLE_GUEST";case Xt.ROLE_VIEWER:return"ROLE_VIEWER";case Xt.ROLE_RENDERER:return"ROLE_RENDERER";case Xt.ROLE_PLATFORM:return"ROLE_PLATFORM";default:return"UNKNOWN"}}a.roleToJSON=$n;function Ln(h){switch(h){case Xt.ROLE_UNSPECIFIED:return 0;case Xt.ROLE_HOST:return 1;case Xt.ROLE_COHOST:return 2;case Xt.ROLE_CONTRIBUTOR:return 3;case Xt.ROLE_GUEST:return 4;case Xt.ROLE_VIEWER:return 5;case Xt.ROLE_RENDERER:return 6;case Xt.ROLE_PLATFORM:return 7;default:return 0}}a.roleToNumber=Ln;var Zt;(function(h){h.PROJECT_BROADCAST_ERROR_UNSPECIFIED="PROJECT_BROADCAST_ERROR_UNSPECIFIED",h.PROJECT_BROADCAST_ERROR_INTERNAL="PROJECT_BROADCAST_ERROR_INTERNAL",h.PROJECT_BROADCAST_ERROR_DURATION_EXCEEDED="PROJECT_BROADCAST_ERROR_DURATION_EXCEEDED"})(Zt=a.ProjectBroadcastError||(a.ProjectBroadcastError={}));function un(h){switch(h){case 0:case"PROJECT_BROADCAST_ERROR_UNSPECIFIED":return Zt.PROJECT_BROADCAST_ERROR_UNSPECIFIED;case 1:case"PROJECT_BROADCAST_ERROR_INTERNAL":return Zt.PROJECT_BROADCAST_ERROR_INTERNAL;case 2:case"PROJECT_BROADCAST_ERROR_DURATION_EXCEEDED":return Zt.PROJECT_BROADCAST_ERROR_DURATION_EXCEEDED;default:throw new En.Error("Unrecognized enum value "+h+" for enum ProjectBroadcastError")}}a.projectBroadcastErrorFromJSON=un;function nn(h){switch(h){case Zt.PROJECT_BROADCAST_ERROR_UNSPECIFIED:return"PROJECT_BROADCAST_ERROR_UNSPECIFIED";case Zt.PROJECT_BROADCAST_ERROR_INTERNAL:return"PROJECT_BROADCAST_ERROR_INTERNAL";case Zt.PROJECT_BROADCAST_ERROR_DURATION_EXCEEDED:return"PROJECT_BROADCAST_ERROR_DURATION_EXCEEDED";default:return"UNKNOWN"}}a.projectBroadcastErrorToJSON=nn;function fn(h){switch(h){case Zt.PROJECT_BROADCAST_ERROR_UNSPECIFIED:return 0;case Zt.PROJECT_BROADCAST_ERROR_INTERNAL:return 1;case Zt.PROJECT_BROADCAST_ERROR_DURATION_EXCEEDED:return 2;default:return 0}}a.projectBroadcastErrorToNumber=fn;var en;(function(h){h.CONNECT_STATE_UNSPECIFIED="CONNECT_STATE_UNSPECIFIED",h.CONNECT_STATE_CONNECTED="CONNECT_STATE_CONNECTED",h.CONNECT_STATE_DISCONNECTED="CONNECT_STATE_DISCONNECTED"})(en=a.ConnectState||(a.ConnectState={}));function Dn(h){switch(h){case 0:case"CONNECT_STATE_UNSPECIFIED":return en.CONNECT_STATE_UNSPECIFIED;case 1:case"CONNECT_STATE_CONNECTED":return en.CONNECT_STATE_CONNECTED;case 2:case"CONNECT_STATE_DISCONNECTED":return en.CONNECT_STATE_DISCONNECTED;default:throw new En.Error("Unrecognized enum value "+h+" for enum ConnectState")}}a.connectStateFromJSON=Dn;function cn(h){switch(h){case en.CONNECT_STATE_UNSPECIFIED:return"CONNECT_STATE_UNSPECIFIED";case en.CONNECT_STATE_CONNECTED:return"CONNECT_STATE_CONNECTED";case en.CONNECT_STATE_DISCONNECTED:return"CONNECT_STATE_DISCONNECTED";default:return"UNKNOWN"}}a.connectStateToJSON=cn;function Mn(h){switch(h){case en.CONNECT_STATE_UNSPECIFIED:return 0;case en.CONNECT_STATE_CONNECTED:return 1;case en.CONNECT_STATE_DISCONNECTED:return 2;default:return 0}}a.connectStateToNumber=Mn;var an;(function(h){h.EVENT_SUB_TYPE_UNSPECIFIED="EVENT_SUB_TYPE_UNSPECIFIED",h.EVENT_SUB_TYPE_CREATE="EVENT_SUB_TYPE_CREATE",h.EVENT_SUB_TYPE_UPDATE="EVENT_SUB_TYPE_UPDATE",h.EVENT_SUB_TYPE_DELETE="EVENT_SUB_TYPE_DELETE",h.EVENT_SUB_TYPE_ADD="EVENT_SUB_TYPE_ADD",h.EVENT_SUB_TYPE_REMOVE="EVENT_SUB_TYPE_REMOVE",h.EVENT_SUB_TYPE_STATE="EVENT_SUB_TYPE_STATE"})(an=a.EventSubType||(a.EventSubType={}));function Un(h){switch(h){case 0:case"EVENT_SUB_TYPE_UNSPECIFIED":return an.EVENT_SUB_TYPE_UNSPECIFIED;case 1:case"EVENT_SUB_TYPE_CREATE":return an.EVENT_SUB_TYPE_CREATE;case 2:case"EVENT_SUB_TYPE_UPDATE":return an.EVENT_SUB_TYPE_UPDATE;case 3:case"EVENT_SUB_TYPE_DELETE":return an.EVENT_SUB_TYPE_DELETE;case 4:case"EVENT_SUB_TYPE_ADD":return an.EVENT_SUB_TYPE_ADD;case 5:case"EVENT_SUB_TYPE_REMOVE":return an.EVENT_SUB_TYPE_REMOVE;case 6:case"EVENT_SUB_TYPE_STATE":return an.EVENT_SUB_TYPE_STATE;default:throw new En.Error("Unrecognized enum value "+h+" for enum EventSubType")}}a.eventSubTypeFromJSON=Un;function qt(h){switch(h){case an.EVENT_SUB_TYPE_UNSPECIFIED:return"EVENT_SUB_TYPE_UNSPECIFIED";case an.EVENT_SUB_TYPE_CREATE:return"EVENT_SUB_TYPE_CREATE";case an.EVENT_SUB_TYPE_UPDATE:return"EVENT_SUB_TYPE_UPDATE";case an.EVENT_SUB_TYPE_DELETE:return"EVENT_SUB_TYPE_DELETE";case an.EVENT_SUB_TYPE_ADD:return"EVENT_SUB_TYPE_ADD";case an.EVENT_SUB_TYPE_REMOVE:return"EVENT_SUB_TYPE_REMOVE";case an.EVENT_SUB_TYPE_STATE:return"EVENT_SUB_TYPE_STATE";default:return"UNKNOWN"}}a.eventSubTypeToJSON=qt;function tt(h){switch(h){case an.EVENT_SUB_TYPE_UNSPECIFIED:return 0;case an.EVENT_SUB_TYPE_CREATE:return 1;case an.EVENT_SUB_TYPE_UPDATE:return 2;case an.EVENT_SUB_TYPE_DELETE:return 3;case an.EVENT_SUB_TYPE_ADD:return 4;case an.EVENT_SUB_TYPE_REMOVE:return 5;case an.EVENT_SUB_TYPE_STATE:return 6;default:return 0}}a.eventSubTypeToNumber=tt;var ft;(function(h){h.EVENT_TYPE_UNSPECIFIED="EVENT_TYPE_UNSPECIFIED",h.EVENT_TYPE_COLLECTION="EVENT_TYPE_COLLECTION",h.EVENT_TYPE_PROJECT="EVENT_TYPE_PROJECT",h.EVENT_TYPE_SOURCE="EVENT_TYPE_SOURCE",h.EVENT_TYPE_DESTINATION="EVENT_TYPE_DESTINATION"})(ft=a.EventType||(a.EventType={}));function gt(h){switch(h){case 0:case"EVENT_TYPE_UNSPECIFIED":return ft.EVENT_TYPE_UNSPECIFIED;case 1:case"EVENT_TYPE_COLLECTION":return ft.EVENT_TYPE_COLLECTION;case 2:case"EVENT_TYPE_PROJECT":return ft.EVENT_TYPE_PROJECT;case 4:case"EVENT_TYPE_SOURCE":return ft.EVENT_TYPE_SOURCE;case 5:case"EVENT_TYPE_DESTINATION":return ft.EVENT_TYPE_DESTINATION;default:throw new En.Error("Unrecognized enum value "+h+" for enum EventType")}}a.eventTypeFromJSON=gt;function Ut(h){switch(h){case ft.EVENT_TYPE_UNSPECIFIED:return"EVENT_TYPE_UNSPECIFIED";case ft.EVENT_TYPE_COLLECTION:return"EVENT_TYPE_COLLECTION";case ft.EVENT_TYPE_PROJECT:return"EVENT_TYPE_PROJECT";case ft.EVENT_TYPE_SOURCE:return"EVENT_TYPE_SOURCE";case ft.EVENT_TYPE_DESTINATION:return"EVENT_TYPE_DESTINATION";default:return"UNKNOWN"}}a.eventTypeToJSON=Ut;function Lt(h){switch(h){case ft.EVENT_TYPE_UNSPECIFIED:return 0;case ft.EVENT_TYPE_COLLECTION:return 1;case ft.EVENT_TYPE_PROJECT:return 2;case ft.EVENT_TYPE_SOURCE:return 4;case ft.EVENT_TYPE_DESTINATION:return 5;default:return 0}}a.eventTypeToNumber=Lt;function Jt(){return{height:void 0,width:void 0,framerate:void 0,colorSpace:void 0}}a.VideoRendering={encode(h,_=b.Writer.create()){return h.height!==void 0&&_.uint32(8).uint32(h.height),h.width!==void 0&&_.uint32(16).uint32(h.width),h.framerate!==void 0&&_.uint32(29).float(h.framerate),h.colorSpace!==void 0&&_.uint32(32).int32(ht(h.colorSpace)),_},decode(h,_){const j=h instanceof b.Reader?h:new b.Reader(h);let Et=_===void 0?j.len:j.pos+_;const dt=Jt();for(;j.pos<Et;){const kt=j.uint32();switch(kt>>>3){case 1:dt.height=j.uint32();break;case 2:dt.width=j.uint32();break;case 3:dt.framerate=j.float();break;case 4:dt.colorSpace=St(j.int32());break;default:j.skipType(kt&7);break}}return dt},fromJSON(h){return{height:At(h.height)?Number(h.height):void 0,width:At(h.width)?Number(h.width):void 0,framerate:At(h.framerate)?Number(h.framerate):void 0,colorSpace:At(h.colorSpace)?St(h.colorSpace):void 0}},toJSON(h){const _={};return h.height!==void 0&&(_.height=Math.round(h.height)),h.width!==void 0&&(_.width=Math.round(h.width)),h.framerate!==void 0&&(_.framerate=h.framerate),h.colorSpace!==void 0&&(_.colorSpace=h.colorSpace!==void 0?_t(h.colorSpace):void 0),_},fromPartial(h){var _,j,Et,dt;const kt=Jt();return kt.height=(_=h.height)!==null&&_!==void 0?_:void 0,kt.width=(j=h.width)!==null&&j!==void 0?j:void 0,kt.framerate=(Et=h.framerate)!==null&&Et!==void 0?Et:void 0,kt.colorSpace=(dt=h.colorSpace)!==null&&dt!==void 0?dt:void 0,kt}};function Sn(){return{channelLayout:void 0}}a.AudioRendering={encode(h,_=b.Writer.create()){return h.channelLayout!==void 0&&_.uint32(8).int32(Ot(h.channelLayout)),_},decode(h,_){const j=h instanceof b.Reader?h:new b.Reader(h);let Et=_===void 0?j.len:j.pos+_;const dt=Sn();for(;j.pos<Et;){const kt=j.uint32();switch(kt>>>3){case 1:dt.channelLayout=ot(j.int32());break;default:j.skipType(kt&7);break}}return dt},fromJSON(h){return{channelLayout:At(h.channelLayout)?ot(h.channelLayout):void 0}},toJSON(h){const _={};return h.channelLayout!==void 0&&(_.channelLayout=h.channelLayout!==void 0?lt(h.channelLayout):void 0),_},fromPartial(h){var _;const j=Sn();return j.channelLayout=(_=h.channelLayout)!==null&&_!==void 0?_:void 0,j}};function _n(){return{video:void 0,audio:void 0,quality:void 0,targetLatency:void 0,complexity:void 0}}a.Rendering={encode(h,_=b.Writer.create()){return h.video!==void 0&&a.VideoRendering.encode(h.video,_.uint32(10).fork()).ldelim(),h.audio!==void 0&&a.AudioRendering.encode(h.audio,_.uint32(18).fork()).ldelim(),h.quality!==void 0&&_.uint32(24).int32(bt(h.quality)),h.targetLatency!==void 0&&_.uint32(32).uint32(h.targetLatency),h.complexity!==void 0&&_.uint32(40).int32(h.complexity),_},decode(h,_){const j=h instanceof b.Reader?h:new b.Reader(h);let Et=_===void 0?j.len:j.pos+_;const dt=_n();for(;j.pos<Et;){const kt=j.uint32();switch(kt>>>3){case 1:dt.video=a.VideoRendering.decode(j,j.uint32());break;case 2:dt.audio=a.AudioRendering.decode(j,j.uint32());break;case 3:dt.quality=Pt(j.int32());break;case 4:dt.targetLatency=j.uint32();break;case 5:dt.complexity=j.int32();break;default:j.skipType(kt&7);break}}return dt},fromJSON(h){return{video:At(h.video)?a.VideoRendering.fromJSON(h.video):void 0,audio:At(h.audio)?a.AudioRendering.fromJSON(h.audio):void 0,quality:At(h.quality)?Pt(h.quality):void 0,targetLatency:At(h.targetLatency)?Number(h.targetLatency):void 0,complexity:At(h.complexity)?Number(h.complexity):void 0}},toJSON(h){const _={};return h.video!==void 0&&(_.video=h.video?a.VideoRendering.toJSON(h.video):void 0),h.audio!==void 0&&(_.audio=h.audio?a.AudioRendering.toJSON(h.audio):void 0),h.quality!==void 0&&(_.quality=h.quality!==void 0?$t(h.quality):void 0),h.targetLatency!==void 0&&(_.targetLatency=Math.round(h.targetLatency)),h.complexity!==void 0&&(_.complexity=Math.round(h.complexity)),_},fromPartial(h){var _,j,Et;const dt=_n();return dt.video=h.video!==void 0&&h.video!==null?a.VideoRendering.fromPartial(h.video):void 0,dt.audio=h.audio!==void 0&&h.audio!==null?a.AudioRendering.fromPartial(h.audio):void 0,dt.quality=(_=h.quality)!==null&&_!==void 0?_:void 0,dt.targetLatency=(j=h.targetLatency)!==null&&j!==void 0?j:void 0,dt.complexity=(Et=h.complexity)!==null&&Et!==void 0?Et:void 0,dt}};function pn(){return{mode:void 0,targetBitrate:void 0,maxKeyFrameInterval:void 0}}a.VideoCodecRateControl={encode(h,_=b.Writer.create()){return h.mode!==void 0&&_.uint32(8).int32(Vt(h.mode)),h.targetBitrate!==void 0&&_.uint32(16).uint32(h.targetBitrate),h.maxKeyFrameInterval!==void 0&&_.uint32(24).uint32(h.maxKeyFrameInterval),_},decode(h,_){const j=h instanceof b.Reader?h:new b.Reader(h);let Et=_===void 0?j.len:j.pos+_;const dt=pn();for(;j.pos<Et;){const kt=j.uint32();switch(kt>>>3){case 1:dt.mode=rt(j.int32());break;case 2:dt.targetBitrate=j.uint32();break;case 3:dt.maxKeyFrameInterval=j.uint32();break;default:j.skipType(kt&7);break}}return dt},fromJSON(h){return{mode:At(h.mode)?rt(h.mode):void 0,targetBitrate:At(h.targetBitrate)?Number(h.targetBitrate):void 0,maxKeyFrameInterval:At(h.maxKeyFrameInterval)?Number(h.maxKeyFrameInterval):void 0}},toJSON(h){const _={};return h.mode!==void 0&&(_.mode=h.mode!==void 0?mt(h.mode):void 0),h.targetBitrate!==void 0&&(_.targetBitrate=Math.round(h.targetBitrate)),h.maxKeyFrameInterval!==void 0&&(_.maxKeyFrameInterval=Math.round(h.maxKeyFrameInterval)),_},fromPartial(h){var _,j,Et;const dt=pn();return dt.mode=(_=h.mode)!==null&&_!==void 0?_:void 0,dt.targetBitrate=(j=h.targetBitrate)!==null&&j!==void 0?j:void 0,dt.maxKeyFrameInterval=(Et=h.maxKeyFrameInterval)!==null&&Et!==void 0?Et:void 0,dt}};function gn(){return{codec:void 0,rateControl:void 0,profile:void 0}}a.VideoEncoding={encode(h,_=b.Writer.create()){return h.codec!==void 0&&_.uint32(8).int32(Tt(h.codec)),h.rateControl!==void 0&&a.VideoCodecRateControl.encode(h.rateControl,_.uint32(18).fork()).ldelim(),h.profile!==void 0&&_.uint32(32).int32(Nt(h.profile)),_},decode(h,_){const j=h instanceof b.Reader?h:new b.Reader(h);let Et=_===void 0?j.len:j.pos+_;const dt=gn();for(;j.pos<Et;){const kt=j.uint32();switch(kt>>>3){case 1:dt.codec=Ct(j.int32());break;case 2:dt.rateControl=a.VideoCodecRateControl.decode(j,j.uint32());break;case 4:dt.profile=zt(j.int32());break;default:j.skipType(kt&7);break}}return dt},fromJSON(h){return{codec:At(h.codec)?Ct(h.codec):void 0,rateControl:At(h.rateControl)?a.VideoCodecRateControl.fromJSON(h.rateControl):void 0,profile:At(h.profile)?zt(h.profile):void 0}},toJSON(h){const _={};return h.codec!==void 0&&(_.codec=h.codec!==void 0?vt(h.codec):void 0),h.rateControl!==void 0&&(_.rateControl=h.rateControl?a.VideoCodecRateControl.toJSON(h.rateControl):void 0),h.profile!==void 0&&(_.profile=h.profile!==void 0?Mt(h.profile):void 0),_},fromPartial(h){var _,j;const Et=gn();return Et.codec=(_=h.codec)!==null&&_!==void 0?_:void 0,Et.rateControl=h.rateControl!==void 0&&h.rateControl!==null?a.VideoCodecRateControl.fromPartial(h.rateControl):void 0,Et.profile=(j=h.profile)!==null&&j!==void 0?j:void 0,Et}};function Rn(){return{codec:void 0}}a.AudioEncoding={encode(h,_=b.Writer.create()){return h.codec!==void 0&&_.uint32(8).int32(Yt(h.codec)),_},decode(h,_){const j=h instanceof b.Reader?h:new b.Reader(h);let Et=_===void 0?j.len:j.pos+_;const dt=Rn();for(;j.pos<Et;){const kt=j.uint32();switch(kt>>>3){case 1:dt.codec=Wt(j.int32());break;default:j.skipType(kt&7);break}}return dt},fromJSON(h){return{codec:At(h.codec)?Wt(h.codec):void 0}},toJSON(h){const _={};return h.codec!==void 0&&(_.codec=h.codec!==void 0?Ht(h.codec):void 0),_},fromPartial(h){var _;const j=Rn();return j.codec=(_=h.codec)!==null&&_!==void 0?_:void 0,j}};function wn(){return{video:void 0,audio:void 0}}a.Encoding={encode(h,_=b.Writer.create()){return h.video!==void 0&&a.VideoEncoding.encode(h.video,_.uint32(10).fork()).ldelim(),h.audio!==void 0&&a.AudioEncoding.encode(h.audio,_.uint32(18).fork()).ldelim(),_},decode(h,_){const j=h instanceof b.Reader?h:new b.Reader(h);let Et=_===void 0?j.len:j.pos+_;const dt=wn();for(;j.pos<Et;){const kt=j.uint32();switch(kt>>>3){case 1:dt.video=a.VideoEncoding.decode(j,j.uint32());break;case 2:dt.audio=a.AudioEncoding.decode(j,j.uint32());break;default:j.skipType(kt&7);break}}return dt},fromJSON(h){return{video:At(h.video)?a.VideoEncoding.fromJSON(h.video):void 0,audio:At(h.audio)?a.AudioEncoding.fromJSON(h.audio):void 0}},toJSON(h){const _={};return h.video!==void 0&&(_.video=h.video?a.VideoEncoding.toJSON(h.video):void 0),h.audio!==void 0&&(_.audio=h.audio?a.AudioEncoding.toJSON(h.audio):void 0),_},fromPartial(h){const _=wn();return _.video=h.video!==void 0&&h.video!==null?a.VideoEncoding.fromPartial(h.video):void 0,_.audio=h.audio!==void 0&&h.audio!==null?a.AudioEncoding.fromPartial(h.audio):void 0,_}};function Cn(){return{enabled:void 0,key:void 0,url:void 0,baseUrl:void 0}}a.SourceRtmpPushAddress={encode(h,_=b.Writer.create()){return h.enabled!==void 0&&_.uint32(8).bool(h.enabled),h.key!==void 0&&_.uint32(18).string(h.key),h.url!==void 0&&_.uint32(26).string(h.url),h.baseUrl!==void 0&&_.uint32(34).string(h.baseUrl),_},decode(h,_){const j=h instanceof b.Reader?h:new b.Reader(h);let Et=_===void 0?j.len:j.pos+_;const dt=Cn();for(;j.pos<Et;){const kt=j.uint32();switch(kt>>>3){case 1:dt.enabled=j.bool();break;case 2:dt.key=j.string();break;case 3:dt.url=j.string();break;case 4:dt.baseUrl=j.string();break;default:j.skipType(kt&7);break}}return dt},fromJSON(h){return{enabled:At(h.enabled)?Boolean(h.enabled):void 0,key:At(h.key)?String(h.key):void 0,url:At(h.url)?String(h.url):void 0,baseUrl:At(h.baseUrl)?String(h.baseUrl):void 0}},toJSON(h){const _={};return h.enabled!==void 0&&(_.enabled=h.enabled),h.key!==void 0&&(_.key=h.key),h.url!==void 0&&(_.url=h.url),h.baseUrl!==void 0&&(_.baseUrl=h.baseUrl),_},fromPartial(h){var _,j,Et,dt;const kt=Cn();return kt.enabled=(_=h.enabled)!==null&&_!==void 0?_:void 0,kt.key=(j=h.key)!==null&&j!==void 0?j:void 0,kt.url=(Et=h.url)!==null&&Et!==void 0?Et:void 0,kt.baseUrl=(dt=h.baseUrl)!==null&&dt!==void 0?dt:void 0,kt}};function Pn(){return{enabled:void 0,streamId:void 0,url:void 0,baseUrl:void 0}}a.SrtPushAddress={encode(h,_=b.Writer.create()){return h.enabled!==void 0&&_.uint32(8).bool(h.enabled),h.streamId!==void 0&&_.uint32(18).string(h.streamId),h.url!==void 0&&_.uint32(26).string(h.url),h.baseUrl!==void 0&&_.uint32(34).string(h.baseUrl),_},decode(h,_){const j=h instanceof b.Reader?h:new b.Reader(h);let Et=_===void 0?j.len:j.pos+_;const dt=Pn();for(;j.pos<Et;){const kt=j.uint32();switch(kt>>>3){case 1:dt.enabled=j.bool();break;case 2:dt.streamId=j.string();break;case 3:dt.url=j.string();break;case 4:dt.baseUrl=j.string();break;default:j.skipType(kt&7);break}}return dt},fromJSON(h){return{enabled:At(h.enabled)?Boolean(h.enabled):void 0,streamId:At(h.streamId)?String(h.streamId):void 0,url:At(h.url)?String(h.url):void 0,baseUrl:At(h.baseUrl)?String(h.baseUrl):void 0}},toJSON(h){const _={};return h.enabled!==void 0&&(_.enabled=h.enabled),h.streamId!==void 0&&(_.streamId=h.streamId),h.url!==void 0&&(_.url=h.url),h.baseUrl!==void 0&&(_.baseUrl=h.baseUrl),_},fromPartial(h){var _,j,Et,dt;const kt=Pn();return kt.enabled=(_=h.enabled)!==null&&_!==void 0?_:void 0,kt.streamId=(j=h.streamId)!==null&&j!==void 0?j:void 0,kt.url=(Et=h.url)!==null&&Et!==void 0?Et:void 0,kt.baseUrl=(dt=h.baseUrl)!==null&&dt!==void 0?dt:void 0,kt}};function Nn(){return{rtmpPush:void 0,srtPush:void 0}}a.SourceAddress={encode(h,_=b.Writer.create()){return h.rtmpPush!==void 0&&a.SourceRtmpPushAddress.encode(h.rtmpPush,_.uint32(10).fork()).ldelim(),h.srtPush!==void 0&&a.SrtPushAddress.encode(h.srtPush,_.uint32(18).fork()).ldelim(),_},decode(h,_){const j=h instanceof b.Reader?h:new b.Reader(h);let Et=_===void 0?j.len:j.pos+_;const dt=Nn();for(;j.pos<Et;){const kt=j.uint32();switch(kt>>>3){case 1:dt.rtmpPush=a.SourceRtmpPushAddress.decode(j,j.uint32());break;case 2:dt.srtPush=a.SrtPushAddress.decode(j,j.uint32());break;default:j.skipType(kt&7);break}}return dt},fromJSON(h){return{rtmpPush:At(h.rtmpPush)?a.SourceRtmpPushAddress.fromJSON(h.rtmpPush):void 0,srtPush:At(h.srtPush)?a.SrtPushAddress.fromJSON(h.srtPush):void 0}},toJSON(h){const _={};return h.rtmpPush!==void 0&&(_.rtmpPush=h.rtmpPush?a.SourceRtmpPushAddress.toJSON(h.rtmpPush):void 0),h.srtPush!==void 0&&(_.srtPush=h.srtPush?a.SrtPushAddress.toJSON(h.srtPush):void 0),_},fromPartial(h){const _=Nn();return _.rtmpPush=h.rtmpPush!==void 0&&h.rtmpPush!==null?a.SourceRtmpPushAddress.fromPartial(h.rtmpPush):void 0,_.srtPush=h.srtPush!==void 0&&h.srtPush!==null?a.SrtPushAddress.fromPartial(h.srtPush):void 0,_}};function An(){return{key:void 0,url:""}}a.DestinationRtmpPushAddress={encode(h,_=b.Writer.create()){return h.key!==void 0&&_.uint32(10).string(h.key),h.url!==""&&_.uint32(18).string(h.url),_},decode(h,_){const j=h instanceof b.Reader?h:new b.Reader(h);let Et=_===void 0?j.len:j.pos+_;const dt=An();for(;j.pos<Et;){const kt=j.uint32();switch(kt>>>3){case 1:dt.key=j.string();break;case 2:dt.url=j.string();break;default:j.skipType(kt&7);break}}return dt},fromJSON(h){return{key:At(h.key)?String(h.key):void 0,url:At(h.url)?String(h.url):""}},toJSON(h){const _={};return h.key!==void 0&&(_.key=h.key),h.url!==void 0&&(_.url=h.url),_},fromPartial(h){var _,j;const Et=An();return Et.key=(_=h.key)!==null&&_!==void 0?_:void 0,Et.url=(j=h.url)!==null&&j!==void 0?j:"",Et}};function hn(){return{appId:"",channelId:"",userId:""}}a.DestinationAgoraPushAddress={encode(h,_=b.Writer.create()){return h.appId!==""&&_.uint32(10).string(h.appId),h.channelId!==""&&_.uint32(18).string(h.channelId),h.userId!==""&&_.uint32(26).string(h.userId),_},decode(h,_){const j=h instanceof b.Reader?h:new b.Reader(h);let Et=_===void 0?j.len:j.pos+_;const dt=hn();for(;j.pos<Et;){const kt=j.uint32();switch(kt>>>3){case 1:dt.appId=j.string();break;case 2:dt.channelId=j.string();break;case 3:dt.userId=j.string();break;default:j.skipType(kt&7);break}}return dt},fromJSON(h){return{appId:At(h.appId)?String(h.appId):"",channelId:At(h.channelId)?String(h.channelId):"",userId:At(h.userId)?String(h.userId):""}},toJSON(h){const _={};return h.appId!==void 0&&(_.appId=h.appId),h.channelId!==void 0&&(_.channelId=h.channelId),h.userId!==void 0&&(_.userId=h.userId),_},fromPartial(h){var _,j,Et;const dt=hn();return dt.appId=(_=h.appId)!==null&&_!==void 0?_:"",dt.channelId=(j=h.channelId)!==null&&j!==void 0?j:"",dt.userId=(Et=h.userId)!==null&&Et!==void 0?Et:"",dt}};function sn(){return{rtmpPush:void 0,agora:void 0}}a.DestinationAddress={encode(h,_=b.Writer.create()){return h.rtmpPush!==void 0&&a.DestinationRtmpPushAddress.encode(h.rtmpPush,_.uint32(10).fork()).ldelim(),h.agora!==void 0&&a.DestinationAgoraPushAddress.encode(h.agora,_.uint32(18).fork()).ldelim(),_},decode(h,_){const j=h instanceof b.Reader?h:new b.Reader(h);let Et=_===void 0?j.len:j.pos+_;const dt=sn();for(;j.pos<Et;){const kt=j.uint32();switch(kt>>>3){case 1:dt.rtmpPush=a.DestinationRtmpPushAddress.decode(j,j.uint32());break;case 2:dt.agora=a.DestinationAgoraPushAddress.decode(j,j.uint32());break;default:j.skipType(kt&7);break}}return dt},fromJSON(h){return{rtmpPush:At(h.rtmpPush)?a.DestinationRtmpPushAddress.fromJSON(h.rtmpPush):void 0,agora:At(h.agora)?a.DestinationAgoraPushAddress.fromJSON(h.agora):void 0}},toJSON(h){const _={};return h.rtmpPush!==void 0&&(_.rtmpPush=h.rtmpPush?a.DestinationRtmpPushAddress.toJSON(h.rtmpPush):void 0),h.agora!==void 0&&(_.agora=h.agora?a.DestinationAgoraPushAddress.toJSON(h.agora):void 0),_},fromPartial(h){const _=sn();return _.rtmpPush=h.rtmpPush!==void 0&&h.rtmpPush!==null?a.DestinationRtmpPushAddress.fromPartial(h.rtmpPush):void 0,_.agora=h.agora!==void 0&&h.agora!==null?a.DestinationAgoraPushAddress.fromPartial(h.agora):void 0,_}};function Vn(){return{sourceId:"",start:void 0,stop:void 0}}a.SourceTrigger={encode(h,_=b.Writer.create()){return h.sourceId!==""&&_.uint32(10).string(h.sourceId),h.start!==void 0&&_.uint32(16).int32(dn(h.start)),h.stop!==void 0&&_.uint32(24).int32(dn(h.stop)),_},decode(h,_){const j=h instanceof b.Reader?h:new b.Reader(h);let Et=_===void 0?j.len:j.pos+_;const dt=Vn();for(;j.pos<Et;){const kt=j.uint32();switch(kt>>>3){case 1:dt.sourceId=j.string();break;case 2:dt.start=xt(j.int32());break;case 3:dt.stop=xt(j.int32());break;default:j.skipType(kt&7);break}}return dt},fromJSON(h){return{sourceId:At(h.sourceId)?String(h.sourceId):"",start:At(h.start)?xt(h.start):void 0,stop:At(h.stop)?xt(h.stop):void 0}},toJSON(h){const _={};return h.sourceId!==void 0&&(_.sourceId=h.sourceId),h.start!==void 0&&(_.start=h.start!==void 0?tn(h.start):void 0),h.stop!==void 0&&(_.stop=h.stop!==void 0?tn(h.stop):void 0),_},fromPartial(h){var _,j,Et;const dt=Vn();return dt.sourceId=(_=h.sourceId)!==null&&_!==void 0?_:"",dt.start=(j=h.start)!==null&&j!==void 0?j:void 0,dt.stop=(Et=h.stop)!==null&&Et!==void 0?Et:void 0,dt}};function qn(){return{stop:void 0}}a.WebRtcTrigger={encode(h,_=b.Writer.create()){return h.stop!==void 0&&_.uint32(24).int32(dn(h.stop)),_},decode(h,_){const j=h instanceof b.Reader?h:new b.Reader(h);let Et=_===void 0?j.len:j.pos+_;const dt=qn();for(;j.pos<Et;){const kt=j.uint32();switch(kt>>>3){case 3:dt.stop=xt(j.int32());break;default:j.skipType(kt&7);break}}return dt},fromJSON(h){return{stop:At(h.stop)?xt(h.stop):void 0}},toJSON(h){const _={};return h.stop!==void 0&&(_.stop=h.stop!==void 0?tn(h.stop):void 0),_},fromPartial(h){var _;const j=qn();return j.stop=(_=h.stop)!==null&&_!==void 0?_:void 0,j}};function Gn(){return{source:void 0}}a.ProjectTrigger={encode(h,_=b.Writer.create()){return h.source!==void 0&&a.SourceTrigger.encode(h.source,_.uint32(10).fork()).ldelim(),_},decode(h,_){const j=h instanceof b.Reader?h:new b.Reader(h);let Et=_===void 0?j.len:j.pos+_;const dt=Gn();for(;j.pos<Et;){const kt=j.uint32();switch(kt>>>3){case 1:dt.source=a.SourceTrigger.decode(j,j.uint32());break;default:j.skipType(kt&7);break}}return dt},fromJSON(h){return{source:At(h.source)?a.SourceTrigger.fromJSON(h.source):void 0}},toJSON(h){const _={};return h.source!==void 0&&(_.source=h.source?a.SourceTrigger.toJSON(h.source):void 0),_},fromPartial(h){const _=Gn();return _.source=h.source!==void 0&&h.source!==null?a.SourceTrigger.fromPartial(h.source):void 0,_}};function Wn(){return{enabled:void 0,url:void 0}}a.PreviewHlsPullAddress={encode(h,_=b.Writer.create()){return h.enabled!==void 0&&_.uint32(8).bool(h.enabled),h.url!==void 0&&_.uint32(18).string(h.url),_},decode(h,_){const j=h instanceof b.Reader?h:new b.Reader(h);let Et=_===void 0?j.len:j.pos+_;const dt=Wn();for(;j.pos<Et;){const kt=j.uint32();switch(kt>>>3){case 1:dt.enabled=j.bool();break;case 2:dt.url=j.string();break;default:j.skipType(kt&7);break}}return dt},fromJSON(h){return{enabled:At(h.enabled)?Boolean(h.enabled):void 0,url:At(h.url)?String(h.url):void 0}},toJSON(h){const _={};return h.enabled!==void 0&&(_.enabled=h.enabled),h.url!==void 0&&(_.url=h.url),_},fromPartial(h){var _,j;const Et=Wn();return Et.enabled=(_=h.enabled)!==null&&_!==void 0?_:void 0,Et.url=(j=h.url)!==null&&j!==void 0?j:void 0,Et}};function Hn(){return{enabled:void 0,displayName:void 0,participantId:void 0}}a.PreviewWebRtcAddress={encode(h,_=b.Writer.create()){return h.enabled!==void 0&&_.uint32(8).bool(h.enabled),h.displayName!==void 0&&_.uint32(18).string(h.displayName),h.participantId!==void 0&&_.uint32(26).string(h.participantId),_},decode(h,_){const j=h instanceof b.Reader?h:new b.Reader(h);let Et=_===void 0?j.len:j.pos+_;const dt=Hn();for(;j.pos<Et;){const kt=j.uint32();switch(kt>>>3){case 1:dt.enabled=j.bool();break;case 2:dt.displayName=j.string();break;case 3:dt.participantId=j.string();break;default:j.skipType(kt&7);break}}return dt},fromJSON(h){return{enabled:At(h.enabled)?Boolean(h.enabled):void 0,displayName:At(h.displayName)?String(h.displayName):void 0,participantId:At(h.participantId)?String(h.participantId):void 0}},toJSON(h){const _={};return h.enabled!==void 0&&(_.enabled=h.enabled),h.displayName!==void 0&&(_.displayName=h.displayName),h.participantId!==void 0&&(_.participantId=h.participantId),_},fromPartial(h){var _,j,Et;const dt=Hn();return dt.enabled=(_=h.enabled)!==null&&_!==void 0?_:void 0,dt.displayName=(j=h.displayName)!==null&&j!==void 0?j:void 0,dt.participantId=(Et=h.participantId)!==null&&Et!==void 0?Et:void 0,dt}};function zn(){return{webrtc:void 0}}a.PreviewAddress={encode(h,_=b.Writer.create()){return h.webrtc!==void 0&&a.PreviewWebRtcAddress.encode(h.webrtc,_.uint32(18).fork()).ldelim(),_},decode(h,_){const j=h instanceof b.Reader?h:new b.Reader(h);let Et=_===void 0?j.len:j.pos+_;const dt=zn();for(;j.pos<Et;){const kt=j.uint32();switch(kt>>>3){case 2:dt.webrtc=a.PreviewWebRtcAddress.decode(j,j.uint32());break;default:j.skipType(kt&7);break}}return dt},fromJSON(h){return{webrtc:At(h.webrtc)?a.PreviewWebRtcAddress.fromJSON(h.webrtc):void 0}},toJSON(h){const _={};return h.webrtc!==void 0&&(_.webrtc=h.webrtc?a.PreviewWebRtcAddress.toJSON(h.webrtc):void 0),_},fromPartial(h){const _=zn();return _.webrtc=h.webrtc!==void 0&&h.webrtc!==null?a.PreviewWebRtcAddress.fromPartial(h.webrtc):void 0,_}};function xn(){return{rendererUrl:""}}a.StudioSdkComposition={encode(h,_=b.Writer.create()){return h.rendererUrl!==""&&_.uint32(10).string(h.rendererUrl),_},decode(h,_){const j=h instanceof b.Reader?h:new b.Reader(h);let Et=_===void 0?j.len:j.pos+_;const dt=xn();for(;j.pos<Et;){const kt=j.uint32();switch(kt>>>3){case 1:dt.rendererUrl=j.string();break;default:j.skipType(kt&7);break}}return dt},fromJSON(h){return{rendererUrl:At(h.rendererUrl)?String(h.rendererUrl):""}},toJSON(h){const _={};return h.rendererUrl!==void 0&&(_.rendererUrl=h.rendererUrl),_},fromPartial(h){var _;const j=xn();return j.rendererUrl=(_=h.rendererUrl)!==null&&_!==void 0?_:"",j}};function Yn(){return{selectedLayoutId:void 0}}a.SceneCompositionLegacy={encode(h,_=b.Writer.create()){return h.selectedLayoutId!==void 0&&_.uint32(18).string(h.selectedLayoutId),_},decode(h,_){const j=h instanceof b.Reader?h:new b.Reader(h);let Et=_===void 0?j.len:j.pos+_;const dt=Yn();for(;j.pos<Et;){const kt=j.uint32();switch(kt>>>3){case 2:dt.selectedLayoutId=j.string();break;default:j.skipType(kt&7);break}}return dt},fromJSON(h){return{selectedLayoutId:At(h.selectedLayoutId)?String(h.selectedLayoutId):void 0}},toJSON(h){const _={};return h.selectedLayoutId!==void 0&&(_.selectedLayoutId=h.selectedLayoutId),_},fromPartial(h){var _;const j=Yn();return j.selectedLayoutId=(_=h.selectedLayoutId)!==null&&_!==void 0?_:void 0,j}};function jn(){return{rendererUrl:void 0,selectedLayoutId:void 0}}a.SceneComposition={encode(h,_=b.Writer.create()){return h.rendererUrl!==void 0&&_.uint32(10).string(h.rendererUrl),h.selectedLayoutId!==void 0&&_.uint32(18).string(h.selectedLayoutId),_},decode(h,_){const j=h instanceof b.Reader?h:new b.Reader(h);let Et=_===void 0?j.len:j.pos+_;const dt=jn();for(;j.pos<Et;){const kt=j.uint32();switch(kt>>>3){case 1:dt.rendererUrl=j.string();break;case 2:dt.selectedLayoutId=j.string();break;default:j.skipType(kt&7);break}}return dt},fromJSON(h){return{rendererUrl:At(h.rendererUrl)?String(h.rendererUrl):void 0,selectedLayoutId:At(h.selectedLayoutId)?String(h.selectedLayoutId):void 0}},toJSON(h){const _={};return h.rendererUrl!==void 0&&(_.rendererUrl=h.rendererUrl),h.selectedLayoutId!==void 0&&(_.selectedLayoutId=h.selectedLayoutId),_},fromPartial(h){var _,j;const Et=jn();return Et.rendererUrl=(_=h.rendererUrl)!==null&&_!==void 0?_:void 0,Et.selectedLayoutId=(j=h.selectedLayoutId)!==null&&j!==void 0?j:void 0,Et}};function Kn(){return{url:""}}a.ExternalComposition={encode(h,_=b.Writer.create()){return h.url!==""&&_.uint32(10).string(h.url),_},decode(h,_){const j=h instanceof b.Reader?h:new b.Reader(h);let Et=_===void 0?j.len:j.pos+_;const dt=Kn();for(;j.pos<Et;){const kt=j.uint32();switch(kt>>>3){case 1:dt.url=j.string();break;default:j.skipType(kt&7);break}}return dt},fromJSON(h){return{url:At(h.url)?String(h.url):""}},toJSON(h){const _={};return h.url!==void 0&&(_.url=h.url),_},fromPartial(h){var _;const j=Kn();return j.url=(_=h.url)!==null&&_!==void 0?_:"",j}};function Qn(){return{external:void 0,studioSdk:void 0,sceneLegacy:void 0,scene:void 0}}a.Composition={encode(h,_=b.Writer.create()){return h.external!==void 0&&a.ExternalComposition.encode(h.external,_.uint32(10).fork()).ldelim(),h.studioSdk!==void 0&&a.StudioSdkComposition.encode(h.studioSdk,_.uint32(18).fork()).ldelim(),h.sceneLegacy!==void 0&&a.SceneCompositionLegacy.encode(h.sceneLegacy,_.uint32(26).fork()).ldelim(),h.scene!==void 0&&a.SceneComposition.encode(h.scene,_.uint32(34).fork()).ldelim(),_},decode(h,_){const j=h instanceof b.Reader?h:new b.Reader(h);let Et=_===void 0?j.len:j.pos+_;const dt=Qn();for(;j.pos<Et;){const kt=j.uint32();switch(kt>>>3){case 1:dt.external=a.ExternalComposition.decode(j,j.uint32());break;case 2:dt.studioSdk=a.StudioSdkComposition.decode(j,j.uint32());break;case 3:dt.sceneLegacy=a.SceneCompositionLegacy.decode(j,j.uint32());break;case 4:dt.scene=a.SceneComposition.decode(j,j.uint32());break;default:j.skipType(kt&7);break}}return dt},fromJSON(h){return{external:At(h.external)?a.ExternalComposition.fromJSON(h.external):void 0,studioSdk:At(h.studioSdk)?a.StudioSdkComposition.fromJSON(h.studioSdk):void 0,sceneLegacy:At(h.sceneLegacy)?a.SceneCompositionLegacy.fromJSON(h.sceneLegacy):void 0,scene:At(h.scene)?a.SceneComposition.fromJSON(h.scene):void 0}},toJSON(h){const _={};return h.external!==void 0&&(_.external=h.external?a.ExternalComposition.toJSON(h.external):void 0),h.studioSdk!==void 0&&(_.studioSdk=h.studioSdk?a.StudioSdkComposition.toJSON(h.studioSdk):void 0),h.sceneLegacy!==void 0&&(_.sceneLegacy=h.sceneLegacy?a.SceneCompositionLegacy.toJSON(h.sceneLegacy):void 0),h.scene!==void 0&&(_.scene=h.scene?a.SceneComposition.toJSON(h.scene):void 0),_},fromPartial(h){const _=Qn();return _.external=h.external!==void 0&&h.external!==null?a.ExternalComposition.fromPartial(h.external):void 0,_.studioSdk=h.studioSdk!==void 0&&h.studioSdk!==null?a.StudioSdkComposition.fromPartial(h.studioSdk):void 0,_.sceneLegacy=h.sceneLegacy!==void 0&&h.sceneLegacy!==null?a.SceneCompositionLegacy.fromPartial(h.sceneLegacy):void 0,_.scene=h.scene!==void 0&&h.scene!==null?a.SceneComposition.fromPartial(h.scene):void 0,_}};function Xn(){return{enabled:void 0}}a.HostedWebRtc={encode(h,_=b.Writer.create()){return h.enabled!==void 0&&_.uint32(8).bool(h.enabled),_},decode(h,_){const j=h instanceof b.Reader?h:new b.Reader(h);let Et=_===void 0?j.len:j.pos+_;const dt=Xn();for(;j.pos<Et;){const kt=j.uint32();switch(kt>>>3){case 1:dt.enabled=j.bool();break;default:j.skipType(kt&7);break}}return dt},fromJSON(h){return{enabled:At(h.enabled)?Boolean(h.enabled):void 0}},toJSON(h){const _={};return h.enabled!==void 0&&(_.enabled=h.enabled),_},fromPartial(h){var _;const j=Xn();return j.enabled=(_=h.enabled)!==null&&_!==void 0?_:void 0,j}};function Zn(){return{hosted:void 0}}a.WebRtc={encode(h,_=b.Writer.create()){return h.hosted!==void 0&&a.HostedWebRtc.encode(h.hosted,_.uint32(10).fork()).ldelim(),_},decode(h,_){const j=h instanceof b.Reader?h:new b.Reader(h);let Et=_===void 0?j.len:j.pos+_;const dt=Zn();for(;j.pos<Et;){const kt=j.uint32();switch(kt>>>3){case 1:dt.hosted=a.HostedWebRtc.decode(j,j.uint32());break;default:j.skipType(kt&7);break}}return dt},fromJSON(h){return{hosted:At(h.hosted)?a.HostedWebRtc.fromJSON(h.hosted):void 0}},toJSON(h){const _={};return h.hosted!==void 0&&(_.hosted=h.hosted?a.HostedWebRtc.toJSON(h.hosted):void 0),_},fromPartial(h){const _=Zn();return _.hosted=h.hosted!==void 0&&h.hosted!==null?a.HostedWebRtc.fromPartial(h.hosted):void 0,_}};function er(){return{accessToken:"",participantId:void 0}}a.WebRtcAccess={encode(h,_=b.Writer.create()){return h.accessToken!==""&&_.uint32(10).string(h.accessToken),h.participantId!==void 0&&_.uint32(26).string(h.participantId),_},decode(h,_){const j=h instanceof b.Reader?h:new b.Reader(h);let Et=_===void 0?j.len:j.pos+_;const dt=er();for(;j.pos<Et;){const kt=j.uint32();switch(kt>>>3){case 1:dt.accessToken=j.string();break;case 3:dt.participantId=j.string();break;default:j.skipType(kt&7);break}}return dt},fromJSON(h){return{accessToken:At(h.accessToken)?String(h.accessToken):"",participantId:At(h.participantId)?String(h.participantId):void 0}},toJSON(h){const _={};return h.accessToken!==void 0&&(_.accessToken=h.accessToken),h.participantId!==void 0&&(_.participantId=h.participantId),_},fromPartial(h){var _,j;const Et=er();return Et.accessToken=(_=h.accessToken)!==null&&_!==void 0?_:"",Et.participantId=(j=h.participantId)!==null&&j!==void 0?j:void 0,Et}};function tr(){return{latitude:0,longitude:0}}a.LatLong={encode(h,_=b.Writer.create()){return h.latitude!==0&&_.uint32(9).double(h.latitude),h.longitude!==0&&_.uint32(17).double(h.longitude),_},decode(h,_){const j=h instanceof b.Reader?h:new b.Reader(h);let Et=_===void 0?j.len:j.pos+_;const dt=tr();for(;j.pos<Et;){const kt=j.uint32();switch(kt>>>3){case 1:dt.latitude=j.double();break;case 2:dt.longitude=j.double();break;default:j.skipType(kt&7);break}}return dt},fromJSON(h){return{latitude:At(h.latitude)?Number(h.latitude):0,longitude:At(h.longitude)?Number(h.longitude):0}},toJSON(h){const _={};return h.latitude!==void 0&&(_.latitude=h.latitude),h.longitude!==void 0&&(_.longitude=h.longitude),_},fromPartial(h){var _,j;const Et=tr();return Et.latitude=(_=h.latitude)!==null&&_!==void 0?_:0,Et.longitude=(j=h.longitude)!==null&&j!==void 0?j:0,Et}};function nr(){return{collectionId:"",projectId:"",broadcastId:void 0,duration:void 0,start:void 0,stop:void 0,phase:at.PROJECT_BROADCAST_PHASE_UNSPECIFIED,region:void 0,datacenter:void 0}}a.ProjectBroadcastStatus={encode(h,_=b.Writer.create()){return h.collectionId!==""&&_.uint32(10).string(h.collectionId),h.projectId!==""&&_.uint32(18).string(h.projectId),h.broadcastId!==void 0&&_.uint32(26).string(h.broadcastId),h.duration!==void 0&&_.uint32(32).uint32(h.duration),h.start!==void 0&&k.Timestamp.encode(Fn(h.start),_.uint32(42).fork()).ldelim(),h.stop!==void 0&&k.Timestamp.encode(Fn(h.stop),_.uint32(50).fork()).ldelim(),h.phase!==at.PROJECT_BROADCAST_PHASE_UNSPECIFIED&&_.uint32(56).int32(Gt(h.phase)),h.region!==void 0&&_.uint32(64).int32(On(h.region)),h.datacenter!==void 0&&_.uint32(74).string(h.datacenter),_},decode(h,_){const j=h instanceof b.Reader?h:new b.Reader(h);let Et=_===void 0?j.len:j.pos+_;const dt=nr();for(;j.pos<Et;){const kt=j.uint32();switch(kt>>>3){case 1:dt.collectionId=j.string();break;case 2:dt.projectId=j.string();break;case 3:dt.broadcastId=j.string();break;case 4:dt.duration=j.uint32();break;case 5:dt.start=Bn(k.Timestamp.decode(j,j.uint32()));break;case 6:dt.stop=Bn(k.Timestamp.decode(j,j.uint32()));break;case 7:dt.phase=yt(j.int32());break;case 8:dt.region=rn(j.int32());break;case 9:dt.datacenter=j.string();break;default:j.skipType(kt&7);break}}return dt},fromJSON(h){return{collectionId:At(h.collectionId)?String(h.collectionId):"",projectId:At(h.projectId)?String(h.projectId):"",broadcastId:At(h.broadcastId)?String(h.broadcastId):void 0,duration:At(h.duration)?Number(h.duration):void 0,start:At(h.start)?String(h.start):void 0,stop:At(h.stop)?String(h.stop):void 0,phase:At(h.phase)?yt(h.phase):at.PROJECT_BROADCAST_PHASE_UNSPECIFIED,region:At(h.region)?rn(h.region):void 0,datacenter:At(h.datacenter)?String(h.datacenter):void 0}},toJSON(h){const _={};return h.collectionId!==void 0&&(_.collectionId=h.collectionId),h.projectId!==void 0&&(_.projectId=h.projectId),h.broadcastId!==void 0&&(_.broadcastId=h.broadcastId),h.duration!==void 0&&(_.duration=Math.round(h.duration)),h.start!==void 0&&(_.start=h.start),h.stop!==void 0&&(_.stop=h.stop),h.phase!==void 0&&(_.phase=Dt(h.phase)),h.region!==void 0&&(_.region=h.region!==void 0?mn(h.region):void 0),h.datacenter!==void 0&&(_.datacenter=h.datacenter),_},fromPartial(h){var _,j,Et,dt,kt,Kt,ln,In,Tn;const kn=nr();return kn.collectionId=(_=h.collectionId)!==null&&_!==void 0?_:"",kn.projectId=(j=h.projectId)!==null&&j!==void 0?j:"",kn.broadcastId=(Et=h.broadcastId)!==null&&Et!==void 0?Et:void 0,kn.duration=(dt=h.duration)!==null&&dt!==void 0?dt:void 0,kn.start=(kt=h.start)!==null&&kt!==void 0?kt:void 0,kn.stop=(Kt=h.stop)!==null&&Kt!==void 0?Kt:void 0,kn.phase=(ln=h.phase)!==null&&ln!==void 0?ln:at.PROJECT_BROADCAST_PHASE_UNSPECIFIED,kn.region=(In=h.region)!==null&&In!==void 0?In:void 0,kn.datacenter=(Tn=h.datacenter)!==null&&Tn!==void 0?Tn:void 0,kn}};function rr(){return{collectionId:"",sourceId:"",metadata:void 0,preview:void 0,address:void 0}}a.Source={encode(h,_=b.Writer.create()){return h.collectionId!==""&&_.uint32(10).string(h.collectionId),h.sourceId!==""&&_.uint32(18).string(h.sourceId),h.metadata!==void 0&&et.Value.encode(et.Value.wrap(h.metadata),_.uint32(26).fork()).ldelim(),h.preview!==void 0&&a.PreviewAddress.encode(h.preview,_.uint32(34).fork()).ldelim(),h.address!==void 0&&a.SourceAddress.encode(h.address,_.uint32(50).fork()).ldelim(),_},decode(h,_){const j=h instanceof b.Reader?h:new b.Reader(h);let Et=_===void 0?j.len:j.pos+_;const dt=rr();for(;j.pos<Et;){const kt=j.uint32();switch(kt>>>3){case 1:dt.collectionId=j.string();break;case 2:dt.sourceId=j.string();break;case 3:dt.metadata=et.Value.unwrap(et.Value.decode(j,j.uint32()));break;case 4:dt.preview=a.PreviewAddress.decode(j,j.uint32());break;case 6:dt.address=a.SourceAddress.decode(j,j.uint32());break;default:j.skipType(kt&7);break}}return dt},fromJSON(h){return{collectionId:At(h.collectionId)?String(h.collectionId):"",sourceId:At(h.sourceId)?String(h.sourceId):"",metadata:At(h==null?void 0:h.metadata)?h.metadata:void 0,preview:At(h.preview)?a.PreviewAddress.fromJSON(h.preview):void 0,address:At(h.address)?a.SourceAddress.fromJSON(h.address):void 0}},toJSON(h){const _={};return h.collectionId!==void 0&&(_.collectionId=h.collectionId),h.sourceId!==void 0&&(_.sourceId=h.sourceId),h.metadata!==void 0&&(_.metadata=h.metadata),h.preview!==void 0&&(_.preview=h.preview?a.PreviewAddress.toJSON(h.preview):void 0),h.address!==void 0&&(_.address=h.address?a.SourceAddress.toJSON(h.address):void 0),_},fromPartial(h){var _,j,Et;const dt=rr();return dt.collectionId=(_=h.collectionId)!==null&&_!==void 0?_:"",dt.sourceId=(j=h.sourceId)!==null&&j!==void 0?j:"",dt.metadata=(Et=h.metadata)!==null&&Et!==void 0?Et:void 0,dt.preview=h.preview!==void 0&&h.preview!==null?a.PreviewAddress.fromPartial(h.preview):void 0,dt.address=h.address!==void 0&&h.address!==null?a.SourceAddress.fromPartial(h.address):void 0,dt}};function ir(){return{collectionId:"",projectId:"",destinationId:"",metadata:void 0,enabled:void 0,address:void 0,timeout:void 0}}a.Destination={encode(h,_=b.Writer.create()){return h.collectionId!==""&&_.uint32(10).string(h.collectionId),h.projectId!==""&&_.uint32(18).string(h.projectId),h.destinationId!==""&&_.uint32(26).string(h.destinationId),h.metadata!==void 0&&et.Value.encode(et.Value.wrap(h.metadata),_.uint32(34).fork()).ldelim(),h.enabled!==void 0&&_.uint32(40).bool(h.enabled),h.address!==void 0&&a.DestinationAddress.encode(h.address,_.uint32(50).fork()).ldelim(),h.timeout!==void 0&&_.uint32(56).uint32(h.timeout),_},decode(h,_){const j=h instanceof b.Reader?h:new b.Reader(h);let Et=_===void 0?j.len:j.pos+_;const dt=ir();for(;j.pos<Et;){const kt=j.uint32();switch(kt>>>3){case 1:dt.collectionId=j.string();break;case 2:dt.projectId=j.string();break;case 3:dt.destinationId=j.string();break;case 4:dt.metadata=et.Value.unwrap(et.Value.decode(j,j.uint32()));break;case 5:dt.enabled=j.bool();break;case 6:dt.address=a.DestinationAddress.decode(j,j.uint32());break;case 7:dt.timeout=j.uint32();break;default:j.skipType(kt&7);break}}return dt},fromJSON(h){return{collectionId:At(h.collectionId)?String(h.collectionId):"",projectId:At(h.projectId)?String(h.projectId):"",destinationId:At(h.destinationId)?String(h.destinationId):"",metadata:At(h==null?void 0:h.metadata)?h.metadata:void 0,enabled:At(h.enabled)?Boolean(h.enabled):void 0,address:At(h.address)?a.DestinationAddress.fromJSON(h.address):void 0,timeout:At(h.timeout)?Number(h.timeout):void 0}},toJSON(h){const _={};return h.collectionId!==void 0&&(_.collectionId=h.collectionId),h.projectId!==void 0&&(_.projectId=h.projectId),h.destinationId!==void 0&&(_.destinationId=h.destinationId),h.metadata!==void 0&&(_.metadata=h.metadata),h.enabled!==void 0&&(_.enabled=h.enabled),h.address!==void 0&&(_.address=h.address?a.DestinationAddress.toJSON(h.address):void 0),h.timeout!==void 0&&(_.timeout=Math.round(h.timeout)),_},fromPartial(h){var _,j,Et,dt,kt,Kt;const ln=ir();return ln.collectionId=(_=h.collectionId)!==null&&_!==void 0?_:"",ln.projectId=(j=h.projectId)!==null&&j!==void 0?j:"",ln.destinationId=(Et=h.destinationId)!==null&&Et!==void 0?Et:"",ln.metadata=(dt=h.metadata)!==null&&dt!==void 0?dt:void 0,ln.enabled=(kt=h.enabled)!==null&&kt!==void 0?kt:void 0,ln.address=h.address!==void 0&&h.address!==null?a.DestinationAddress.fromPartial(h.address):void 0,ln.timeout=(Kt=h.timeout)!==null&&Kt!==void 0?Kt:void 0,ln}};function or(){return{collectionId:"",projectId:"",metadata:void 0,rendering:void 0,encoding:void 0,sources:[],destinations:[],composition:void 0,maxDuration:void 0,webrtc:void 0,triggers:[],location:void 0,guestCodes:[]}}a.Project={encode(h,_=b.Writer.create()){h.collectionId!==""&&_.uint32(10).string(h.collectionId),h.projectId!==""&&_.uint32(18).string(h.projectId),h.metadata!==void 0&&et.Value.encode(et.Value.wrap(h.metadata),_.uint32(26).fork()).ldelim(),h.rendering!==void 0&&a.Rendering.encode(h.rendering,_.uint32(34).fork()).ldelim(),h.encoding!==void 0&&a.Encoding.encode(h.encoding,_.uint32(42).fork()).ldelim();for(const j of h.sources)a.Source.encode(j,_.uint32(50).fork()).ldelim();for(const j of h.destinations)a.Destination.encode(j,_.uint32(58).fork()).ldelim();h.composition!==void 0&&a.Composition.encode(h.composition,_.uint32(66).fork()).ldelim(),h.maxDuration!==void 0&&_.uint32(72).uint32(h.maxDuration),h.webrtc!==void 0&&a.WebRtc.encode(h.webrtc,_.uint32(82).fork()).ldelim();for(const j of h.triggers)a.ProjectTrigger.encode(j,_.uint32(90).fork()).ldelim();h.location!==void 0&&a.LatLong.encode(h.location,_.uint32(98).fork()).ldelim();for(const j of h.guestCodes)a.GuestCode.encode(j,_.uint32(106).fork()).ldelim();return _},decode(h,_){const j=h instanceof b.Reader?h:new b.Reader(h);let Et=_===void 0?j.len:j.pos+_;const dt=or();for(;j.pos<Et;){const kt=j.uint32();switch(kt>>>3){case 1:dt.collectionId=j.string();break;case 2:dt.projectId=j.string();break;case 3:dt.metadata=et.Value.unwrap(et.Value.decode(j,j.uint32()));break;case 4:dt.rendering=a.Rendering.decode(j,j.uint32());break;case 5:dt.encoding=a.Encoding.decode(j,j.uint32());break;case 6:dt.sources.push(a.Source.decode(j,j.uint32()));break;case 7:dt.destinations.push(a.Destination.decode(j,j.uint32()));break;case 8:dt.composition=a.Composition.decode(j,j.uint32());break;case 9:dt.maxDuration=j.uint32();break;case 10:dt.webrtc=a.WebRtc.decode(j,j.uint32());break;case 11:dt.triggers.push(a.ProjectTrigger.decode(j,j.uint32()));break;case 12:dt.location=a.LatLong.decode(j,j.uint32());break;case 13:dt.guestCodes.push(a.GuestCode.decode(j,j.uint32()));break;default:j.skipType(kt&7);break}}return dt},fromJSON(h){return{collectionId:At(h.collectionId)?String(h.collectionId):"",projectId:At(h.projectId)?String(h.projectId):"",metadata:At(h==null?void 0:h.metadata)?h.metadata:void 0,rendering:At(h.rendering)?a.Rendering.fromJSON(h.rendering):void 0,encoding:At(h.encoding)?a.Encoding.fromJSON(h.encoding):void 0,sources:Array.isArray(h==null?void 0:h.sources)?h.sources.map(_=>a.Source.fromJSON(_)):[],destinations:Array.isArray(h==null?void 0:h.destinations)?h.destinations.map(_=>a.Destination.fromJSON(_)):[],composition:At(h.composition)?a.Composition.fromJSON(h.composition):void 0,maxDuration:At(h.maxDuration)?Number(h.maxDuration):void 0,webrtc:At(h.webrtc)?a.WebRtc.fromJSON(h.webrtc):void 0,triggers:Array.isArray(h==null?void 0:h.triggers)?h.triggers.map(_=>a.ProjectTrigger.fromJSON(_)):[],location:At(h.location)?a.LatLong.fromJSON(h.location):void 0,guestCodes:Array.isArray(h==null?void 0:h.guestCodes)?h.guestCodes.map(_=>a.GuestCode.fromJSON(_)):[]}},toJSON(h){const _={};return h.collectionId!==void 0&&(_.collectionId=h.collectionId),h.projectId!==void 0&&(_.projectId=h.projectId),h.metadata!==void 0&&(_.metadata=h.metadata),h.rendering!==void 0&&(_.rendering=h.rendering?a.Rendering.toJSON(h.rendering):void 0),h.encoding!==void 0&&(_.encoding=h.encoding?a.Encoding.toJSON(h.encoding):void 0),h.sources?_.sources=h.sources.map(j=>j?a.Source.toJSON(j):void 0):_.sources=[],h.destinations?_.destinations=h.destinations.map(j=>j?a.Destination.toJSON(j):void 0):_.destinations=[],h.composition!==void 0&&(_.composition=h.composition?a.Composition.toJSON(h.composition):void 0),h.maxDuration!==void 0&&(_.maxDuration=Math.round(h.maxDuration)),h.webrtc!==void 0&&(_.webrtc=h.webrtc?a.WebRtc.toJSON(h.webrtc):void 0),h.triggers?_.triggers=h.triggers.map(j=>j?a.ProjectTrigger.toJSON(j):void 0):_.triggers=[],h.location!==void 0&&(_.location=h.location?a.LatLong.toJSON(h.location):void 0),h.guestCodes?_.guestCodes=h.guestCodes.map(j=>j?a.GuestCode.toJSON(j):void 0):_.guestCodes=[],_},fromPartial(h){var _,j,Et,dt,kt,Kt,ln,In;const Tn=or();return Tn.collectionId=(_=h.collectionId)!==null&&_!==void 0?_:"",Tn.projectId=(j=h.projectId)!==null&&j!==void 0?j:"",Tn.metadata=(Et=h.metadata)!==null&&Et!==void 0?Et:void 0,Tn.rendering=h.rendering!==void 0&&h.rendering!==null?a.Rendering.fromPartial(h.rendering):void 0,Tn.encoding=h.encoding!==void 0&&h.encoding!==null?a.Encoding.fromPartial(h.encoding):void 0,Tn.sources=((dt=h.sources)===null||dt===void 0?void 0:dt.map(kn=>a.Source.fromPartial(kn)))||[],Tn.destinations=((kt=h.destinations)===null||kt===void 0?void 0:kt.map(kn=>a.Destination.fromPartial(kn)))||[],Tn.composition=h.composition!==void 0&&h.composition!==null?a.Composition.fromPartial(h.composition):void 0,Tn.maxDuration=(Kt=h.maxDuration)!==null&&Kt!==void 0?Kt:void 0,Tn.webrtc=h.webrtc!==void 0&&h.webrtc!==null?a.WebRtc.fromPartial(h.webrtc):void 0,Tn.triggers=((ln=h.triggers)===null||ln===void 0?void 0:ln.map(kn=>a.ProjectTrigger.fromPartial(kn)))||[],Tn.location=h.location!==void 0&&h.location!==null?a.LatLong.fromPartial(h.location):void 0,Tn.guestCodes=((In=h.guestCodes)===null||In===void 0?void 0:In.map(kn=>a.GuestCode.fromPartial(kn)))||[],Tn}};function ar(){return{collectionId:"",metadata:void 0,projects:[],sources:[]}}a.Collection={encode(h,_=b.Writer.create()){h.collectionId!==""&&_.uint32(10).string(h.collectionId),h.metadata!==void 0&&et.Value.encode(et.Value.wrap(h.metadata),_.uint32(18).fork()).ldelim();for(const j of h.projects)a.Project.encode(j,_.uint32(26).fork()).ldelim();for(const j of h.sources)a.Source.encode(j,_.uint32(34).fork()).ldelim();return _},decode(h,_){const j=h instanceof b.Reader?h:new b.Reader(h);let Et=_===void 0?j.len:j.pos+_;const dt=ar();for(;j.pos<Et;){const kt=j.uint32();switch(kt>>>3){case 1:dt.collectionId=j.string();break;case 2:dt.metadata=et.Value.unwrap(et.Value.decode(j,j.uint32()));break;case 3:dt.projects.push(a.Project.decode(j,j.uint32()));break;case 4:dt.sources.push(a.Source.decode(j,j.uint32()));break;default:j.skipType(kt&7);break}}return dt},fromJSON(h){return{collectionId:At(h.collectionId)?String(h.collectionId):"",metadata:At(h==null?void 0:h.metadata)?h.metadata:void 0,projects:Array.isArray(h==null?void 0:h.projects)?h.projects.map(_=>a.Project.fromJSON(_)):[],sources:Array.isArray(h==null?void 0:h.sources)?h.sources.map(_=>a.Source.fromJSON(_)):[]}},toJSON(h){const _={};return h.collectionId!==void 0&&(_.collectionId=h.collectionId),h.metadata!==void 0&&(_.metadata=h.metadata),h.projects?_.projects=h.projects.map(j=>j?a.Project.toJSON(j):void 0):_.projects=[],h.sources?_.sources=h.sources.map(j=>j?a.Source.toJSON(j):void 0):_.sources=[],_},fromPartial(h){var _,j,Et,dt;const kt=ar();return kt.collectionId=(_=h.collectionId)!==null&&_!==void 0?_:"",kt.metadata=(j=h.metadata)!==null&&j!==void 0?j:void 0,kt.projects=((Et=h.projects)===null||Et===void 0?void 0:Et.map(Kt=>a.Project.fromPartial(Kt)))||[],kt.sources=((dt=h.sources)===null||dt===void 0?void 0:dt.map(Kt=>a.Source.fromPartial(Kt)))||[],kt}};function sr(){return{metadata:void 0}}a.CreateCollectionRequest={encode(h,_=b.Writer.create()){return h.metadata!==void 0&&et.Value.encode(et.Value.wrap(h.metadata),_.uint32(10).fork()).ldelim(),_},decode(h,_){const j=h instanceof b.Reader?h:new b.Reader(h);let Et=_===void 0?j.len:j.pos+_;const dt=sr();for(;j.pos<Et;){const kt=j.uint32();switch(kt>>>3){case 1:dt.metadata=et.Value.unwrap(et.Value.decode(j,j.uint32()));break;default:j.skipType(kt&7);break}}return dt},fromJSON(h){return{metadata:At(h==null?void 0:h.metadata)?h.metadata:void 0}},toJSON(h){const _={};return h.metadata!==void 0&&(_.metadata=h.metadata),_},fromPartial(h){var _;const j=sr();return j.metadata=(_=h.metadata)!==null&&_!==void 0?_:void 0,j}};function ur(){return{collection:void 0}}a.CreateCollectionResponse={encode(h,_=b.Writer.create()){return h.collection!==void 0&&a.Collection.encode(h.collection,_.uint32(10).fork()).ldelim(),_},decode(h,_){const j=h instanceof b.Reader?h:new b.Reader(h);let Et=_===void 0?j.len:j.pos+_;const dt=ur();for(;j.pos<Et;){const kt=j.uint32();switch(kt>>>3){case 1:dt.collection=a.Collection.decode(j,j.uint32());break;default:j.skipType(kt&7);break}}return dt},fromJSON(h){return{collection:At(h.collection)?a.Collection.fromJSON(h.collection):void 0}},toJSON(h){const _={};return h.collection!==void 0&&(_.collection=h.collection?a.Collection.toJSON(h.collection):void 0),_},fromPartial(h){const _=ur();return _.collection=h.collection!==void 0&&h.collection!==null?a.Collection.fromPartial(h.collection):void 0,_}};function dr(){return{collectionId:"",populateProjects:void 0,populateSources:void 0}}a.GetCollectionRequest={encode(h,_=b.Writer.create()){return h.collectionId!==""&&_.uint32(10).string(h.collectionId),h.populateProjects!==void 0&&_.uint32(16).bool(h.populateProjects),h.populateSources!==void 0&&_.uint32(24).bool(h.populateSources),_},decode(h,_){const j=h instanceof b.Reader?h:new b.Reader(h);let Et=_===void 0?j.len:j.pos+_;const dt=dr();for(;j.pos<Et;){const kt=j.uint32();switch(kt>>>3){case 1:dt.collectionId=j.string();break;case 2:dt.populateProjects=j.bool();break;case 3:dt.populateSources=j.bool();break;default:j.skipType(kt&7);break}}return dt},fromJSON(h){return{collectionId:At(h.collectionId)?String(h.collectionId):"",populateProjects:At(h.populateProjects)?Boolean(h.populateProjects):void 0,populateSources:At(h.populateSources)?Boolean(h.populateSources):void 0}},toJSON(h){const _={};return h.collectionId!==void 0&&(_.collectionId=h.collectionId),h.populateProjects!==void 0&&(_.populateProjects=h.populateProjects),h.populateSources!==void 0&&(_.populateSources=h.populateSources),_},fromPartial(h){var _,j,Et;const dt=dr();return dt.collectionId=(_=h.collectionId)!==null&&_!==void 0?_:"",dt.populateProjects=(j=h.populateProjects)!==null&&j!==void 0?j:void 0,dt.populateSources=(Et=h.populateSources)!==null&&Et!==void 0?Et:void 0,dt}};function cr(){return{collection:void 0}}a.GetCollectionResponse={encode(h,_=b.Writer.create()){return h.collection!==void 0&&a.Collection.encode(h.collection,_.uint32(10).fork()).ldelim(),_},decode(h,_){const j=h instanceof b.Reader?h:new b.Reader(h);let Et=_===void 0?j.len:j.pos+_;const dt=cr();for(;j.pos<Et;){const kt=j.uint32();switch(kt>>>3){case 1:dt.collection=a.Collection.decode(j,j.uint32());break;default:j.skipType(kt&7);break}}return dt},fromJSON(h){return{collection:At(h.collection)?a.Collection.fromJSON(h.collection):void 0}},toJSON(h){const _={};return h.collection!==void 0&&(_.collection=h.collection?a.Collection.toJSON(h.collection):void 0),_},fromPartial(h){const _=cr();return _.collection=h.collection!==void 0&&h.collection!==null?a.Collection.fromPartial(h.collection):void 0,_}};function lr(){return{collectionId:"",updateMask:void 0,metadata:void 0}}a.UpdateCollectionRequest={encode(h,_=b.Writer.create()){return h.collectionId!==""&&_.uint32(10).string(h.collectionId),h.updateMask!==void 0&&nt.FieldMask.encode(nt.FieldMask.wrap(h.updateMask),_.uint32(18).fork()).ldelim(),h.metadata!==void 0&&et.Value.encode(et.Value.wrap(h.metadata),_.uint32(26).fork()).ldelim(),_},decode(h,_){const j=h instanceof b.Reader?h:new b.Reader(h);let Et=_===void 0?j.len:j.pos+_;const dt=lr();for(;j.pos<Et;){const kt=j.uint32();switch(kt>>>3){case 1:dt.collectionId=j.string();break;case 2:dt.updateMask=nt.FieldMask.unwrap(nt.FieldMask.decode(j,j.uint32()));break;case 3:dt.metadata=et.Value.unwrap(et.Value.decode(j,j.uint32()));break;default:j.skipType(kt&7);break}}return dt},fromJSON(h){return{collectionId:At(h.collectionId)?String(h.collectionId):"",updateMask:At(h.updateMask)?nt.FieldMask.unwrap(nt.FieldMask.fromJSON(h.updateMask)):void 0,metadata:At(h==null?void 0:h.metadata)?h.metadata:void 0}},toJSON(h){const _={};return h.collectionId!==void 0&&(_.collectionId=h.collectionId),h.updateMask!==void 0&&(_.updateMask=nt.FieldMask.toJSON(nt.FieldMask.wrap(h.updateMask))),h.metadata!==void 0&&(_.metadata=h.metadata),_},fromPartial(h){var _,j,Et;const dt=lr();return dt.collectionId=(_=h.collectionId)!==null&&_!==void 0?_:"",dt.updateMask=(j=h.updateMask)!==null&&j!==void 0?j:void 0,dt.metadata=(Et=h.metadata)!==null&&Et!==void 0?Et:void 0,dt}};function fr(){return{collection:void 0}}a.UpdateCollectionResponse={encode(h,_=b.Writer.create()){return h.collection!==void 0&&a.Collection.encode(h.collection,_.uint32(10).fork()).ldelim(),_},decode(h,_){const j=h instanceof b.Reader?h:new b.Reader(h);let Et=_===void 0?j.len:j.pos+_;const dt=fr();for(;j.pos<Et;){const kt=j.uint32();switch(kt>>>3){case 1:dt.collection=a.Collection.decode(j,j.uint32());break;default:j.skipType(kt&7);break}}return dt},fromJSON(h){return{collection:At(h.collection)?a.Collection.fromJSON(h.collection):void 0}},toJSON(h){const _={};return h.collection!==void 0&&(_.collection=h.collection?a.Collection.toJSON(h.collection):void 0),_},fromPartial(h){const _=fr();return _.collection=h.collection!==void 0&&h.collection!==null?a.Collection.fromPartial(h.collection):void 0,_}};function pr(){return{collectionId:"",force:void 0}}a.DeleteCollectionRequest={encode(h,_=b.Writer.create()){return h.collectionId!==""&&_.uint32(10).string(h.collectionId),h.force!==void 0&&_.uint32(16).bool(h.force),_},decode(h,_){const j=h instanceof b.Reader?h:new b.Reader(h);let Et=_===void 0?j.len:j.pos+_;const dt=pr();for(;j.pos<Et;){const kt=j.uint32();switch(kt>>>3){case 1:dt.collectionId=j.string();break;case 2:dt.force=j.bool();break;default:j.skipType(kt&7);break}}return dt},fromJSON(h){return{collectionId:At(h.collectionId)?String(h.collectionId):"",force:At(h.force)?Boolean(h.force):void 0}},toJSON(h){const _={};return h.collectionId!==void 0&&(_.collectionId=h.collectionId),h.force!==void 0&&(_.force=h.force),_},fromPartial(h){var _,j;const Et=pr();return Et.collectionId=(_=h.collectionId)!==null&&_!==void 0?_:"",Et.force=(j=h.force)!==null&&j!==void 0?j:void 0,Et}};function hr(){return{sourcesDeleted:0,projectsDeleted:0,projectIdsStopped:[]}}a.DeleteCollectionResponse={encode(h,_=b.Writer.create()){h.sourcesDeleted!==0&&_.uint32(8).uint32(h.sourcesDeleted),h.projectsDeleted!==0&&_.uint32(16).uint32(h.projectsDeleted);for(const j of h.projectIdsStopped)_.uint32(26).string(j);return _},decode(h,_){const j=h instanceof b.Reader?h:new b.Reader(h);let Et=_===void 0?j.len:j.pos+_;const dt=hr();for(;j.pos<Et;){const kt=j.uint32();switch(kt>>>3){case 1:dt.sourcesDeleted=j.uint32();break;case 2:dt.projectsDeleted=j.uint32();break;case 3:dt.projectIdsStopped.push(j.string());break;default:j.skipType(kt&7);break}}return dt},fromJSON(h){return{sourcesDeleted:At(h.sourcesDeleted)?Number(h.sourcesDeleted):0,projectsDeleted:At(h.projectsDeleted)?Number(h.projectsDeleted):0,projectIdsStopped:Array.isArray(h==null?void 0:h.projectIdsStopped)?h.projectIdsStopped.map(_=>String(_)):[]}},toJSON(h){const _={};return h.sourcesDeleted!==void 0&&(_.sourcesDeleted=Math.round(h.sourcesDeleted)),h.projectsDeleted!==void 0&&(_.projectsDeleted=Math.round(h.projectsDeleted)),h.projectIdsStopped?_.projectIdsStopped=h.projectIdsStopped.map(j=>j):_.projectIdsStopped=[],_},fromPartial(h){var _,j,Et;const dt=hr();return dt.sourcesDeleted=(_=h.sourcesDeleted)!==null&&_!==void 0?_:0,dt.projectsDeleted=(j=h.projectsDeleted)!==null&&j!==void 0?j:0,dt.projectIdsStopped=((Et=h.projectIdsStopped)===null||Et===void 0?void 0:Et.map(kt=>kt))||[],dt}};function mr(){return{}}a.GetCollectionsRequest={encode(h,_=b.Writer.create()){return _},decode(h,_){const j=h instanceof b.Reader?h:new b.Reader(h);let Et=_===void 0?j.len:j.pos+_;const dt=mr();for(;j.pos<Et;){const kt=j.uint32();switch(kt>>>3){default:j.skipType(kt&7);break}}return dt},fromJSON(h){return{}},toJSON(h){return{}},fromPartial(h){return mr()}};function vr(){return{collections:[]}}a.GetCollectionsResponse={encode(h,_=b.Writer.create()){for(const j of h.collections)a.Collection.encode(j,_.uint32(10).fork()).ldelim();return _},decode(h,_){const j=h instanceof b.Reader?h:new b.Reader(h);let Et=_===void 0?j.len:j.pos+_;const dt=vr();for(;j.pos<Et;){const kt=j.uint32();switch(kt>>>3){case 1:dt.collections.push(a.Collection.decode(j,j.uint32()));break;default:j.skipType(kt&7);break}}return dt},fromJSON(h){return{collections:Array.isArray(h==null?void 0:h.collections)?h.collections.map(_=>a.Collection.fromJSON(_)):[]}},toJSON(h){const _={};return h.collections?_.collections=h.collections.map(j=>j?a.Collection.toJSON(j):void 0):_.collections=[],_},fromPartial(h){var _;const j=vr();return j.collections=((_=h.collections)===null||_===void 0?void 0:_.map(Et=>a.Collection.fromPartial(Et)))||[],j}};function yr(){return{collectionId:"",metadata:void 0,rendering:void 0,encoding:void 0,composition:void 0,maxDuration:void 0,webrtc:void 0,location:void 0}}a.CreateProjectRequest={encode(h,_=b.Writer.create()){return h.collectionId!==""&&_.uint32(10).string(h.collectionId),h.metadata!==void 0&&et.Value.encode(et.Value.wrap(h.metadata),_.uint32(18).fork()).ldelim(),h.rendering!==void 0&&a.Rendering.encode(h.rendering,_.uint32(26).fork()).ldelim(),h.encoding!==void 0&&a.Encoding.encode(h.encoding,_.uint32(34).fork()).ldelim(),h.composition!==void 0&&a.Composition.encode(h.composition,_.uint32(42).fork()).ldelim(),h.maxDuration!==void 0&&_.uint32(48).uint32(h.maxDuration),h.webrtc!==void 0&&a.WebRtc.encode(h.webrtc,_.uint32(58).fork()).ldelim(),h.location!==void 0&&a.LatLong.encode(h.location,_.uint32(74).fork()).ldelim(),_},decode(h,_){const j=h instanceof b.Reader?h:new b.Reader(h);let Et=_===void 0?j.len:j.pos+_;const dt=yr();for(;j.pos<Et;){const kt=j.uint32();switch(kt>>>3){case 1:dt.collectionId=j.string();break;case 2:dt.metadata=et.Value.unwrap(et.Value.decode(j,j.uint32()));break;case 3:dt.rendering=a.Rendering.decode(j,j.uint32());break;case 4:dt.encoding=a.Encoding.decode(j,j.uint32());break;case 5:dt.composition=a.Composition.decode(j,j.uint32());break;case 6:dt.maxDuration=j.uint32();break;case 7:dt.webrtc=a.WebRtc.decode(j,j.uint32());break;case 9:dt.location=a.LatLong.decode(j,j.uint32());break;default:j.skipType(kt&7);break}}return dt},fromJSON(h){return{collectionId:At(h.collectionId)?String(h.collectionId):"",metadata:At(h==null?void 0:h.metadata)?h.metadata:void 0,rendering:At(h.rendering)?a.Rendering.fromJSON(h.rendering):void 0,encoding:At(h.encoding)?a.Encoding.fromJSON(h.encoding):void 0,composition:At(h.composition)?a.Composition.fromJSON(h.composition):void 0,maxDuration:At(h.maxDuration)?Number(h.maxDuration):void 0,webrtc:At(h.webrtc)?a.WebRtc.fromJSON(h.webrtc):void 0,location:At(h.location)?a.LatLong.fromJSON(h.location):void 0}},toJSON(h){const _={};return h.collectionId!==void 0&&(_.collectionId=h.collectionId),h.metadata!==void 0&&(_.metadata=h.metadata),h.rendering!==void 0&&(_.rendering=h.rendering?a.Rendering.toJSON(h.rendering):void 0),h.encoding!==void 0&&(_.encoding=h.encoding?a.Encoding.toJSON(h.encoding):void 0),h.composition!==void 0&&(_.composition=h.composition?a.Composition.toJSON(h.composition):void 0),h.maxDuration!==void 0&&(_.maxDuration=Math.round(h.maxDuration)),h.webrtc!==void 0&&(_.webrtc=h.webrtc?a.WebRtc.toJSON(h.webrtc):void 0),h.location!==void 0&&(_.location=h.location?a.LatLong.toJSON(h.location):void 0),_},fromPartial(h){var _,j,Et;const dt=yr();return dt.collectionId=(_=h.collectionId)!==null&&_!==void 0?_:"",dt.metadata=(j=h.metadata)!==null&&j!==void 0?j:void 0,dt.rendering=h.rendering!==void 0&&h.rendering!==null?a.Rendering.fromPartial(h.rendering):void 0,dt.encoding=h.encoding!==void 0&&h.encoding!==null?a.Encoding.fromPartial(h.encoding):void 0,dt.composition=h.composition!==void 0&&h.composition!==null?a.Composition.fromPartial(h.composition):void 0,dt.maxDuration=(Et=h.maxDuration)!==null&&Et!==void 0?Et:void 0,dt.webrtc=h.webrtc!==void 0&&h.webrtc!==null?a.WebRtc.fromPartial(h.webrtc):void 0,dt.location=h.location!==void 0&&h.location!==null?a.LatLong.fromPartial(h.location):void 0,dt}};function Sr(){return{project:void 0}}a.CreateProjectResponse={encode(h,_=b.Writer.create()){return h.project!==void 0&&a.Project.encode(h.project,_.uint32(10).fork()).ldelim(),_},decode(h,_){const j=h instanceof b.Reader?h:new b.Reader(h);let Et=_===void 0?j.len:j.pos+_;const dt=Sr();for(;j.pos<Et;){const kt=j.uint32();switch(kt>>>3){case 1:dt.project=a.Project.decode(j,j.uint32());break;default:j.skipType(kt&7);break}}return dt},fromJSON(h){return{project:At(h.project)?a.Project.fromJSON(h.project):void 0}},toJSON(h){const _={};return h.project!==void 0&&(_.project=h.project?a.Project.toJSON(h.project):void 0),_},fromPartial(h){const _=Sr();return _.project=h.project!==void 0&&h.project!==null?a.Project.fromPartial(h.project):void 0,_}};function gr(){return{collectionId:"",projectId:"",updateMask:void 0,metadata:void 0,rendering:void 0,encoding:void 0,composition:void 0,maxDuration:void 0,webrtc:void 0,location:void 0}}a.UpdateProjectRequest={encode(h,_=b.Writer.create()){return h.collectionId!==""&&_.uint32(10).string(h.collectionId),h.projectId!==""&&_.uint32(18).string(h.projectId),h.updateMask!==void 0&&nt.FieldMask.encode(nt.FieldMask.wrap(h.updateMask),_.uint32(26).fork()).ldelim(),h.metadata!==void 0&&et.Value.encode(et.Value.wrap(h.metadata),_.uint32(34).fork()).ldelim(),h.rendering!==void 0&&a.Rendering.encode(h.rendering,_.uint32(42).fork()).ldelim(),h.encoding!==void 0&&a.Encoding.encode(h.encoding,_.uint32(50).fork()).ldelim(),h.composition!==void 0&&a.Composition.encode(h.composition,_.uint32(58).fork()).ldelim(),h.maxDuration!==void 0&&_.uint32(64).uint32(h.maxDuration),h.webrtc!==void 0&&a.WebRtc.encode(h.webrtc,_.uint32(74).fork()).ldelim(),h.location!==void 0&&a.LatLong.encode(h.location,_.uint32(82).fork()).ldelim(),_},decode(h,_){const j=h instanceof b.Reader?h:new b.Reader(h);let Et=_===void 0?j.len:j.pos+_;const dt=gr();for(;j.pos<Et;){const kt=j.uint32();switch(kt>>>3){case 1:dt.collectionId=j.string();break;case 2:dt.projectId=j.string();break;case 3:dt.updateMask=nt.FieldMask.unwrap(nt.FieldMask.decode(j,j.uint32()));break;case 4:dt.metadata=et.Value.unwrap(et.Value.decode(j,j.uint32()));break;case 5:dt.rendering=a.Rendering.decode(j,j.uint32());break;case 6:dt.encoding=a.Encoding.decode(j,j.uint32());break;case 7:dt.composition=a.Composition.decode(j,j.uint32());break;case 8:dt.maxDuration=j.uint32();break;case 9:dt.webrtc=a.WebRtc.decode(j,j.uint32());break;case 10:dt.location=a.LatLong.decode(j,j.uint32());break;default:j.skipType(kt&7);break}}return dt},fromJSON(h){return{collectionId:At(h.collectionId)?String(h.collectionId):"",projectId:At(h.projectId)?String(h.projectId):"",updateMask:At(h.updateMask)?nt.FieldMask.unwrap(nt.FieldMask.fromJSON(h.updateMask)):void 0,metadata:At(h==null?void 0:h.metadata)?h.metadata:void 0,rendering:At(h.rendering)?a.Rendering.fromJSON(h.rendering):void 0,encoding:At(h.encoding)?a.Encoding.fromJSON(h.encoding):void 0,composition:At(h.composition)?a.Composition.fromJSON(h.composition):void 0,maxDuration:At(h.maxDuration)?Number(h.maxDuration):void 0,webrtc:At(h.webrtc)?a.WebRtc.fromJSON(h.webrtc):void 0,location:At(h.location)?a.LatLong.fromJSON(h.location):void 0}},toJSON(h){const _={};return h.collectionId!==void 0&&(_.collectionId=h.collectionId),h.projectId!==void 0&&(_.projectId=h.projectId),h.updateMask!==void 0&&(_.updateMask=nt.FieldMask.toJSON(nt.FieldMask.wrap(h.updateMask))),h.metadata!==void 0&&(_.metadata=h.metadata),h.rendering!==void 0&&(_.rendering=h.rendering?a.Rendering.toJSON(h.rendering):void 0),h.encoding!==void 0&&(_.encoding=h.encoding?a.Encoding.toJSON(h.encoding):void 0),h.composition!==void 0&&(_.composition=h.composition?a.Composition.toJSON(h.composition):void 0),h.maxDuration!==void 0&&(_.maxDuration=Math.round(h.maxDuration)),h.webrtc!==void 0&&(_.webrtc=h.webrtc?a.WebRtc.toJSON(h.webrtc):void 0),h.location!==void 0&&(_.location=h.location?a.LatLong.toJSON(h.location):void 0),_},fromPartial(h){var _,j,Et,dt,kt;const Kt=gr();return Kt.collectionId=(_=h.collectionId)!==null&&_!==void 0?_:"",Kt.projectId=(j=h.projectId)!==null&&j!==void 0?j:"",Kt.updateMask=(Et=h.updateMask)!==null&&Et!==void 0?Et:void 0,Kt.metadata=(dt=h.metadata)!==null&&dt!==void 0?dt:void 0,Kt.rendering=h.rendering!==void 0&&h.rendering!==null?a.Rendering.fromPartial(h.rendering):void 0,Kt.encoding=h.encoding!==void 0&&h.encoding!==null?a.Encoding.fromPartial(h.encoding):void 0,Kt.composition=h.composition!==void 0&&h.composition!==null?a.Composition.fromPartial(h.composition):void 0,Kt.maxDuration=(kt=h.maxDuration)!==null&&kt!==void 0?kt:void 0,Kt.webrtc=h.webrtc!==void 0&&h.webrtc!==null?a.WebRtc.fromPartial(h.webrtc):void 0,Kt.location=h.location!==void 0&&h.location!==null?a.LatLong.fromPartial(h.location):void 0,Kt}};function br(){return{project:void 0,broadcastUpdated:!1}}a.UpdateProjectResponse={encode(h,_=b.Writer.create()){return h.project!==void 0&&a.Project.encode(h.project,_.uint32(10).fork()).ldelim(),h.broadcastUpdated===!0&&_.uint32(16).bool(h.broadcastUpdated),_},decode(h,_){const j=h instanceof b.Reader?h:new b.Reader(h);let Et=_===void 0?j.len:j.pos+_;const dt=br();for(;j.pos<Et;){const kt=j.uint32();switch(kt>>>3){case 1:dt.project=a.Project.decode(j,j.uint32());break;case 2:dt.broadcastUpdated=j.bool();break;default:j.skipType(kt&7);break}}return dt},fromJSON(h){return{project:At(h.project)?a.Project.fromJSON(h.project):void 0,broadcastUpdated:At(h.broadcastUpdated)?Boolean(h.broadcastUpdated):!1}},toJSON(h){const _={};return h.project!==void 0&&(_.project=h.project?a.Project.toJSON(h.project):void 0),h.broadcastUpdated!==void 0&&(_.broadcastUpdated=h.broadcastUpdated),_},fromPartial(h){var _;const j=br();return j.project=h.project!==void 0&&h.project!==null?a.Project.fromPartial(h.project):void 0,j.broadcastUpdated=(_=h.broadcastUpdated)!==null&&_!==void 0?_:!1,j}};function _r(){return{collectionId:"",projectId:"",force:void 0}}a.DeleteProjectRequest={encode(h,_=b.Writer.create()){return h.collectionId!==""&&_.uint32(10).string(h.collectionId),h.projectId!==""&&_.uint32(18).string(h.projectId),h.force!==void 0&&_.uint32(24).bool(h.force),_},decode(h,_){const j=h instanceof b.Reader?h:new b.Reader(h);let Et=_===void 0?j.len:j.pos+_;const dt=_r();for(;j.pos<Et;){const kt=j.uint32();switch(kt>>>3){case 1:dt.collectionId=j.string();break;case 2:dt.projectId=j.string();break;case 3:dt.force=j.bool();break;default:j.skipType(kt&7);break}}return dt},fromJSON(h){return{collectionId:At(h.collectionId)?String(h.collectionId):"",projectId:At(h.projectId)?String(h.projectId):"",force:At(h.force)?Boolean(h.force):void 0}},toJSON(h){const _={};return h.collectionId!==void 0&&(_.collectionId=h.collectionId),h.projectId!==void 0&&(_.projectId=h.projectId),h.force!==void 0&&(_.force=h.force),_},fromPartial(h){var _,j,Et;const dt=_r();return dt.collectionId=(_=h.collectionId)!==null&&_!==void 0?_:"",dt.projectId=(j=h.projectId)!==null&&j!==void 0?j:"",dt.force=(Et=h.force)!==null&&Et!==void 0?Et:void 0,dt}};function Er(){return{broadcastStopped:!1,layoutsDeleted:0}}a.DeleteProjectResponse={encode(h,_=b.Writer.create()){return h.broadcastStopped===!0&&_.uint32(8).bool(h.broadcastStopped),h.layoutsDeleted!==0&&_.uint32(16).uint32(h.layoutsDeleted),_},decode(h,_){const j=h instanceof b.Reader?h:new b.Reader(h);let Et=_===void 0?j.len:j.pos+_;const dt=Er();for(;j.pos<Et;){const kt=j.uint32();switch(kt>>>3){case 1:dt.broadcastStopped=j.bool();break;case 2:dt.layoutsDeleted=j.uint32();break;default:j.skipType(kt&7);break}}return dt},fromJSON(h){return{broadcastStopped:At(h.broadcastStopped)?Boolean(h.broadcastStopped):!1,layoutsDeleted:At(h.layoutsDeleted)?Number(h.layoutsDeleted):0}},toJSON(h){const _={};return h.broadcastStopped!==void 0&&(_.broadcastStopped=h.broadcastStopped),h.layoutsDeleted!==void 0&&(_.layoutsDeleted=Math.round(h.layoutsDeleted)),_},fromPartial(h){var _,j;const Et=Er();return Et.broadcastStopped=(_=h.broadcastStopped)!==null&&_!==void 0?_:!1,Et.layoutsDeleted=(j=h.layoutsDeleted)!==null&&j!==void 0?j:0,Et}};function Tr(){return{collectionId:"",projectId:"",webrtcStart:void 0}}a.StartProjectBroadcastRequest={encode(h,_=b.Writer.create()){return h.collectionId!==""&&_.uint32(10).string(h.collectionId),h.projectId!==""&&_.uint32(18).string(h.projectId),h.webrtcStart!==void 0&&_.uint32(24).bool(h.webrtcStart),_},decode(h,_){const j=h instanceof b.Reader?h:new b.Reader(h);let Et=_===void 0?j.len:j.pos+_;const dt=Tr();for(;j.pos<Et;){const kt=j.uint32();switch(kt>>>3){case 1:dt.collectionId=j.string();break;case 2:dt.projectId=j.string();break;case 3:dt.webrtcStart=j.bool();break;default:j.skipType(kt&7);break}}return dt},fromJSON(h){return{collectionId:At(h.collectionId)?String(h.collectionId):"",projectId:At(h.projectId)?String(h.projectId):"",webrtcStart:At(h.webrtcStart)?Boolean(h.webrtcStart):void 0}},toJSON(h){const _={};return h.collectionId!==void 0&&(_.collectionId=h.collectionId),h.projectId!==void 0&&(_.projectId=h.projectId),h.webrtcStart!==void 0&&(_.webrtcStart=h.webrtcStart),_},fromPartial(h){var _,j,Et;const dt=Tr();return dt.collectionId=(_=h.collectionId)!==null&&_!==void 0?_:"",dt.projectId=(j=h.projectId)!==null&&j!==void 0?j:"",dt.webrtcStart=(Et=h.webrtcStart)!==null&&Et!==void 0?Et:void 0,dt}};function kr(){return{broadcastId:""}}a.StartProjectBroadcastResponse={encode(h,_=b.Writer.create()){return h.broadcastId!==""&&_.uint32(10).string(h.broadcastId),_},decode(h,_){const j=h instanceof b.Reader?h:new b.Reader(h);let Et=_===void 0?j.len:j.pos+_;const dt=kr();for(;j.pos<Et;){const kt=j.uint32();switch(kt>>>3){case 1:dt.broadcastId=j.string();break;default:j.skipType(kt&7);break}}return dt},fromJSON(h){return{broadcastId:At(h.broadcastId)?String(h.broadcastId):""}},toJSON(h){const _={};return h.broadcastId!==void 0&&(_.broadcastId=h.broadcastId),_},fromPartial(h){var _;const j=kr();return j.broadcastId=(_=h.broadcastId)!==null&&_!==void 0?_:"",j}};function Ir(){return{collectionId:"",projectId:"",webrtcStop:void 0}}a.StopProjectBroadcastRequest={encode(h,_=b.Writer.create()){return h.collectionId!==""&&_.uint32(10).string(h.collectionId),h.projectId!==""&&_.uint32(18).string(h.projectId),h.webrtcStop!==void 0&&_.uint32(24).bool(h.webrtcStop),_},decode(h,_){const j=h instanceof b.Reader?h:new b.Reader(h);let Et=_===void 0?j.len:j.pos+_;const dt=Ir();for(;j.pos<Et;){const kt=j.uint32();switch(kt>>>3){case 1:dt.collectionId=j.string();break;case 2:dt.projectId=j.string();break;case 3:dt.webrtcStop=j.bool();break;default:j.skipType(kt&7);break}}return dt},fromJSON(h){return{collectionId:At(h.collectionId)?String(h.collectionId):"",projectId:At(h.projectId)?String(h.projectId):"",webrtcStop:At(h.webrtcStop)?Boolean(h.webrtcStop):void 0}},toJSON(h){const _={};return h.collectionId!==void 0&&(_.collectionId=h.collectionId),h.projectId!==void 0&&(_.projectId=h.projectId),h.webrtcStop!==void 0&&(_.webrtcStop=h.webrtcStop),_},fromPartial(h){var _,j,Et;const dt=Ir();return dt.collectionId=(_=h.collectionId)!==null&&_!==void 0?_:"",dt.projectId=(j=h.projectId)!==null&&j!==void 0?j:"",dt.webrtcStop=(Et=h.webrtcStop)!==null&&Et!==void 0?Et:void 0,dt}};function Or(){return{}}a.StopProjectBroadcastResponse={encode(h,_=b.Writer.create()){return _},decode(h,_){const j=h instanceof b.Reader?h:new b.Reader(h);let Et=_===void 0?j.len:j.pos+_;const dt=Or();for(;j.pos<Et;){const kt=j.uint32();switch(kt>>>3){default:j.skipType(kt&7);break}}return dt},fromJSON(h){return{}},toJSON(h){return{}},fromPartial(h){return Or()}};function Rr(){return{collectionId:"",projectId:"",status:void 0}}a.GetProjectRequest={encode(h,_=b.Writer.create()){return h.collectionId!==""&&_.uint32(10).string(h.collectionId),h.projectId!==""&&_.uint32(18).string(h.projectId),h.status!==void 0&&_.uint32(24).bool(h.status),_},decode(h,_){const j=h instanceof b.Reader?h:new b.Reader(h);let Et=_===void 0?j.len:j.pos+_;const dt=Rr();for(;j.pos<Et;){const kt=j.uint32();switch(kt>>>3){case 1:dt.collectionId=j.string();break;case 2:dt.projectId=j.string();break;case 3:dt.status=j.bool();break;default:j.skipType(kt&7);break}}return dt},fromJSON(h){return{collectionId:At(h.collectionId)?String(h.collectionId):"",projectId:At(h.projectId)?String(h.projectId):"",status:At(h.status)?Boolean(h.status):void 0}},toJSON(h){const _={};return h.collectionId!==void 0&&(_.collectionId=h.collectionId),h.projectId!==void 0&&(_.projectId=h.projectId),h.status!==void 0&&(_.status=h.status),_},fromPartial(h){var _,j,Et;const dt=Rr();return dt.collectionId=(_=h.collectionId)!==null&&_!==void 0?_:"",dt.projectId=(j=h.projectId)!==null&&j!==void 0?j:"",dt.status=(Et=h.status)!==null&&Et!==void 0?Et:void 0,dt}};function wr(){return{project:void 0,status:void 0}}a.GetProjectResponse={encode(h,_=b.Writer.create()){return h.project!==void 0&&a.Project.encode(h.project,_.uint32(10).fork()).ldelim(),h.status!==void 0&&a.ProjectBroadcastStatus.encode(h.status,_.uint32(18).fork()).ldelim(),_},decode(h,_){const j=h instanceof b.Reader?h:new b.Reader(h);let Et=_===void 0?j.len:j.pos+_;const dt=wr();for(;j.pos<Et;){const kt=j.uint32();switch(kt>>>3){case 1:dt.project=a.Project.decode(j,j.uint32());break;case 2:dt.status=a.ProjectBroadcastStatus.decode(j,j.uint32());break;default:j.skipType(kt&7);break}}return dt},fromJSON(h){return{project:At(h.project)?a.Project.fromJSON(h.project):void 0,status:At(h.status)?a.ProjectBroadcastStatus.fromJSON(h.status):void 0}},toJSON(h){const _={};return h.project!==void 0&&(_.project=h.project?a.Project.toJSON(h.project):void 0),h.status!==void 0&&(_.status=h.status?a.ProjectBroadcastStatus.toJSON(h.status):void 0),_},fromPartial(h){const _=wr();return _.project=h.project!==void 0&&h.project!==null?a.Project.fromPartial(h.project):void 0,_.status=h.status!==void 0&&h.status!==null?a.ProjectBroadcastStatus.fromPartial(h.status):void 0,_}};function Cr(){return{collectionId:"",projectId:"",format:void 0}}a.GetProjectBroadcastSnapshotRequest={encode(h,_=b.Writer.create()){return h.collectionId!==""&&_.uint32(10).string(h.collectionId),h.projectId!==""&&_.uint32(18).string(h.projectId),h.format!==void 0&&_.uint32(24).int32(ut(h.format)),_},decode(h,_){const j=h instanceof b.Reader?h:new b.Reader(h);let Et=_===void 0?j.len:j.pos+_;const dt=Cr();for(;j.pos<Et;){const kt=j.uint32();switch(kt>>>3){case 1:dt.collectionId=j.string();break;case 2:dt.projectId=j.string();break;case 3:dt.format=ct(j.int32());break;default:j.skipType(kt&7);break}}return dt},fromJSON(h){return{collectionId:At(h.collectionId)?String(h.collectionId):"",projectId:At(h.projectId)?String(h.projectId):"",format:At(h.format)?ct(h.format):void 0}},toJSON(h){const _={};return h.collectionId!==void 0&&(_.collectionId=h.collectionId),h.projectId!==void 0&&(_.projectId=h.projectId),h.format!==void 0&&(_.format=h.format!==void 0?st(h.format):void 0),_},fromPartial(h){var _,j,Et;const dt=Cr();return dt.collectionId=(_=h.collectionId)!==null&&_!==void 0?_:"",dt.projectId=(j=h.projectId)!==null&&j!==void 0?j:"",dt.format=(Et=h.format)!==null&&Et!==void 0?Et:void 0,dt}};function Pr(){return{format:it.IMAGE_FORMAT_UNSPECIFIED,image:new Uint8Array}}a.GetProjectBroadcastSnapshotResponse={encode(h,_=b.Writer.create()){return h.format!==it.IMAGE_FORMAT_UNSPECIFIED&&_.uint32(8).int32(ut(h.format)),h.image.length!==0&&_.uint32(18).bytes(h.image),_},decode(h,_){const j=h instanceof b.Reader?h:new b.Reader(h);let Et=_===void 0?j.len:j.pos+_;const dt=Pr();for(;j.pos<Et;){const kt=j.uint32();switch(kt>>>3){case 1:dt.format=ct(j.int32());break;case 2:dt.image=j.bytes();break;default:j.skipType(kt&7);break}}return dt},fromJSON(h){return{format:At(h.format)?ct(h.format):it.IMAGE_FORMAT_UNSPECIFIED,image:At(h.image)?ns(h.image):new Uint8Array}},toJSON(h){const _={};return h.format!==void 0&&(_.format=st(h.format)),h.image!==void 0&&(_.image=is(h.image!==void 0?h.image:new Uint8Array)),_},fromPartial(h){var _,j;const Et=Pr();return Et.format=(_=h.format)!==null&&_!==void 0?_:it.IMAGE_FORMAT_UNSPECIFIED,Et.image=(j=h.image)!==null&&j!==void 0?j:new Uint8Array,Et}};function Nr(){return{collectionId:"",projectId:""}}a.GetProjectBroadcastStatusRequest={encode(h,_=b.Writer.create()){return h.collectionId!==""&&_.uint32(10).string(h.collectionId),h.projectId!==""&&_.uint32(18).string(h.projectId),_},decode(h,_){const j=h instanceof b.Reader?h:new b.Reader(h);let Et=_===void 0?j.len:j.pos+_;const dt=Nr();for(;j.pos<Et;){const kt=j.uint32();switch(kt>>>3){case 1:dt.collectionId=j.string();break;case 2:dt.projectId=j.string();break;default:j.skipType(kt&7);break}}return dt},fromJSON(h){return{collectionId:At(h.collectionId)?String(h.collectionId):"",projectId:At(h.projectId)?String(h.projectId):""}},toJSON(h){const _={};return h.collectionId!==void 0&&(_.collectionId=h.collectionId),h.projectId!==void 0&&(_.projectId=h.projectId),_},fromPartial(h){var _,j;const Et=Nr();return Et.collectionId=(_=h.collectionId)!==null&&_!==void 0?_:"",Et.projectId=(j=h.projectId)!==null&&j!==void 0?j:"",Et}};function Ar(){return{status:void 0}}a.GetProjectBroadcastStatusResponse={encode(h,_=b.Writer.create()){return h.status!==void 0&&a.ProjectBroadcastStatus.encode(h.status,_.uint32(10).fork()).ldelim(),_},decode(h,_){const j=h instanceof b.Reader?h:new b.Reader(h);let Et=_===void 0?j.len:j.pos+_;const dt=Ar();for(;j.pos<Et;){const kt=j.uint32();switch(kt>>>3){case 1:dt.status=a.ProjectBroadcastStatus.decode(j,j.uint32());break;default:j.skipType(kt&7);break}}return dt},fromJSON(h){return{status:At(h.status)?a.ProjectBroadcastStatus.fromJSON(h.status):void 0}},toJSON(h){const _={};return h.status!==void 0&&(_.status=h.status?a.ProjectBroadcastStatus.toJSON(h.status):void 0),_},fromPartial(h){const _=Ar();return _.status=h.status!==void 0&&h.status!==null?a.ProjectBroadcastStatus.fromPartial(h.status):void 0,_}};function $r(){return{collectionId:"",projectId:""}}a.StartProjectWebRtcRequest={encode(h,_=b.Writer.create()){return h.collectionId!==""&&_.uint32(10).string(h.collectionId),h.projectId!==""&&_.uint32(18).string(h.projectId),_},decode(h,_){const j=h instanceof b.Reader?h:new b.Reader(h);let Et=_===void 0?j.len:j.pos+_;const dt=$r();for(;j.pos<Et;){const kt=j.uint32();switch(kt>>>3){case 1:dt.collectionId=j.string();break;case 2:dt.projectId=j.string();break;default:j.skipType(kt&7);break}}return dt},fromJSON(h){return{collectionId:At(h.collectionId)?String(h.collectionId):"",projectId:At(h.projectId)?String(h.projectId):""}},toJSON(h){const _={};return h.collectionId!==void 0&&(_.collectionId=h.collectionId),h.projectId!==void 0&&(_.projectId=h.projectId),_},fromPartial(h){var _,j;const Et=$r();return Et.collectionId=(_=h.collectionId)!==null&&_!==void 0?_:"",Et.projectId=(j=h.projectId)!==null&&j!==void 0?j:"",Et}};function Lr(){return{}}a.StartProjectWebRtcResponse={encode(h,_=b.Writer.create()){return _},decode(h,_){const j=h instanceof b.Reader?h:new b.Reader(h);let Et=_===void 0?j.len:j.pos+_;const dt=Lr();for(;j.pos<Et;){const kt=j.uint32();switch(kt>>>3){default:j.skipType(kt&7);break}}return dt},fromJSON(h){return{}},toJSON(h){return{}},fromPartial(h){return Lr()}};function Dr(){return{collectionId:"",projectId:""}}a.StopProjectWebRtcRequest={encode(h,_=b.Writer.create()){return h.collectionId!==""&&_.uint32(10).string(h.collectionId),h.projectId!==""&&_.uint32(18).string(h.projectId),_},decode(h,_){const j=h instanceof b.Reader?h:new b.Reader(h);let Et=_===void 0?j.len:j.pos+_;const dt=Dr();for(;j.pos<Et;){const kt=j.uint32();switch(kt>>>3){case 1:dt.collectionId=j.string();break;case 2:dt.projectId=j.string();break;default:j.skipType(kt&7);break}}return dt},fromJSON(h){return{collectionId:At(h.collectionId)?String(h.collectionId):"",projectId:At(h.projectId)?String(h.projectId):""}},toJSON(h){const _={};return h.collectionId!==void 0&&(_.collectionId=h.collectionId),h.projectId!==void 0&&(_.projectId=h.projectId),_},fromPartial(h){var _,j;const Et=Dr();return Et.collectionId=(_=h.collectionId)!==null&&_!==void 0?_:"",Et.projectId=(j=h.projectId)!==null&&j!==void 0?j:"",Et}};function Mr(){return{}}a.StopProjectWebRtcResponse={encode(h,_=b.Writer.create()){return _},decode(h,_){const j=h instanceof b.Reader?h:new b.Reader(h);let Et=_===void 0?j.len:j.pos+_;const dt=Mr();for(;j.pos<Et;){const kt=j.uint32();switch(kt>>>3){default:j.skipType(kt&7);break}}return dt},fromJSON(h){return{}},toJSON(h){return{}},fromPartial(h){return Mr()}};function Ur(){return{collectionId:"",projectId:"",metadata:void 0,address:void 0,enabled:void 0,timeout:void 0}}a.CreateDestinationRequest={encode(h,_=b.Writer.create()){return h.collectionId!==""&&_.uint32(10).string(h.collectionId),h.projectId!==""&&_.uint32(18).string(h.projectId),h.metadata!==void 0&&et.Value.encode(et.Value.wrap(h.metadata),_.uint32(26).fork()).ldelim(),h.address!==void 0&&a.DestinationAddress.encode(h.address,_.uint32(42).fork()).ldelim(),h.enabled!==void 0&&_.uint32(48).bool(h.enabled),h.timeout!==void 0&&_.uint32(56).uint32(h.timeout),_},decode(h,_){const j=h instanceof b.Reader?h:new b.Reader(h);let Et=_===void 0?j.len:j.pos+_;const dt=Ur();for(;j.pos<Et;){const kt=j.uint32();switch(kt>>>3){case 1:dt.collectionId=j.string();break;case 2:dt.projectId=j.string();break;case 3:dt.metadata=et.Value.unwrap(et.Value.decode(j,j.uint32()));break;case 5:dt.address=a.DestinationAddress.decode(j,j.uint32());break;case 6:dt.enabled=j.bool();break;case 7:dt.timeout=j.uint32();break;default:j.skipType(kt&7);break}}return dt},fromJSON(h){return{collectionId:At(h.collectionId)?String(h.collectionId):"",projectId:At(h.projectId)?String(h.projectId):"",metadata:At(h==null?void 0:h.metadata)?h.metadata:void 0,address:At(h.address)?a.DestinationAddress.fromJSON(h.address):void 0,enabled:At(h.enabled)?Boolean(h.enabled):void 0,timeout:At(h.timeout)?Number(h.timeout):void 0}},toJSON(h){const _={};return h.collectionId!==void 0&&(_.collectionId=h.collectionId),h.projectId!==void 0&&(_.projectId=h.projectId),h.metadata!==void 0&&(_.metadata=h.metadata),h.address!==void 0&&(_.address=h.address?a.DestinationAddress.toJSON(h.address):void 0),h.enabled!==void 0&&(_.enabled=h.enabled),h.timeout!==void 0&&(_.timeout=Math.round(h.timeout)),_},fromPartial(h){var _,j,Et,dt,kt;const Kt=Ur();return Kt.collectionId=(_=h.collectionId)!==null&&_!==void 0?_:"",Kt.projectId=(j=h.projectId)!==null&&j!==void 0?j:"",Kt.metadata=(Et=h.metadata)!==null&&Et!==void 0?Et:void 0,Kt.address=h.address!==void 0&&h.address!==null?a.DestinationAddress.fromPartial(h.address):void 0,Kt.enabled=(dt=h.enabled)!==null&&dt!==void 0?dt:void 0,Kt.timeout=(kt=h.timeout)!==null&&kt!==void 0?kt:void 0,Kt}};function Vr(){return{destination:void 0}}a.CreateDestinationResponse={encode(h,_=b.Writer.create()){return h.destination!==void 0&&a.Destination.encode(h.destination,_.uint32(10).fork()).ldelim(),_},decode(h,_){const j=h instanceof b.Reader?h:new b.Reader(h);let Et=_===void 0?j.len:j.pos+_;const dt=Vr();for(;j.pos<Et;){const kt=j.uint32();switch(kt>>>3){case 1:dt.destination=a.Destination.decode(j,j.uint32());break;default:j.skipType(kt&7);break}}return dt},fromJSON(h){return{destination:At(h.destination)?a.Destination.fromJSON(h.destination):void 0}},toJSON(h){const _={};return h.destination!==void 0&&(_.destination=h.destination?a.Destination.toJSON(h.destination):void 0),_},fromPartial(h){const _=Vr();return _.destination=h.destination!==void 0&&h.destination!==null?a.Destination.fromPartial(h.destination):void 0,_}};function Fr(){return{collectionId:"",projectId:"",destinationId:""}}a.GetDestinationRequest={encode(h,_=b.Writer.create()){return h.collectionId!==""&&_.uint32(10).string(h.collectionId),h.projectId!==""&&_.uint32(18).string(h.projectId),h.destinationId!==""&&_.uint32(26).string(h.destinationId),_},decode(h,_){const j=h instanceof b.Reader?h:new b.Reader(h);let Et=_===void 0?j.len:j.pos+_;const dt=Fr();for(;j.pos<Et;){const kt=j.uint32();switch(kt>>>3){case 1:dt.collectionId=j.string();break;case 2:dt.projectId=j.string();break;case 3:dt.destinationId=j.string();break;default:j.skipType(kt&7);break}}return dt},fromJSON(h){return{collectionId:At(h.collectionId)?String(h.collectionId):"",projectId:At(h.projectId)?String(h.projectId):"",destinationId:At(h.destinationId)?String(h.destinationId):""}},toJSON(h){const _={};return h.collectionId!==void 0&&(_.collectionId=h.collectionId),h.projectId!==void 0&&(_.projectId=h.projectId),h.destinationId!==void 0&&(_.destinationId=h.destinationId),_},fromPartial(h){var _,j,Et;const dt=Fr();return dt.collectionId=(_=h.collectionId)!==null&&_!==void 0?_:"",dt.projectId=(j=h.projectId)!==null&&j!==void 0?j:"",dt.destinationId=(Et=h.destinationId)!==null&&Et!==void 0?Et:"",dt}};function Br(){return{destination:void 0}}a.GetDestinationResponse={encode(h,_=b.Writer.create()){return h.destination!==void 0&&a.Destination.encode(h.destination,_.uint32(10).fork()).ldelim(),_},decode(h,_){const j=h instanceof b.Reader?h:new b.Reader(h);let Et=_===void 0?j.len:j.pos+_;const dt=Br();for(;j.pos<Et;){const kt=j.uint32();switch(kt>>>3){case 1:dt.destination=a.Destination.decode(j,j.uint32());break;default:j.skipType(kt&7);break}}return dt},fromJSON(h){return{destination:At(h.destination)?a.Destination.fromJSON(h.destination):void 0}},toJSON(h){const _={};return h.destination!==void 0&&(_.destination=h.destination?a.Destination.toJSON(h.destination):void 0),_},fromPartial(h){const _=Br();return _.destination=h.destination!==void 0&&h.destination!==null?a.Destination.fromPartial(h.destination):void 0,_}};function Jr(){return{collectionId:"",projectId:"",destinationId:"",force:void 0}}a.DeleteDestinationRequest={encode(h,_=b.Writer.create()){return h.collectionId!==""&&_.uint32(10).string(h.collectionId),h.projectId!==""&&_.uint32(18).string(h.projectId),h.destinationId!==""&&_.uint32(26).string(h.destinationId),h.force!==void 0&&_.uint32(32).bool(h.force),_},decode(h,_){const j=h instanceof b.Reader?h:new b.Reader(h);let Et=_===void 0?j.len:j.pos+_;const dt=Jr();for(;j.pos<Et;){const kt=j.uint32();switch(kt>>>3){case 1:dt.collectionId=j.string();break;case 2:dt.projectId=j.string();break;case 3:dt.destinationId=j.string();break;case 4:dt.force=j.bool();break;default:j.skipType(kt&7);break}}return dt},fromJSON(h){return{collectionId:At(h.collectionId)?String(h.collectionId):"",projectId:At(h.projectId)?String(h.projectId):"",destinationId:At(h.destinationId)?String(h.destinationId):"",force:At(h.force)?Boolean(h.force):void 0}},toJSON(h){const _={};return h.collectionId!==void 0&&(_.collectionId=h.collectionId),h.projectId!==void 0&&(_.projectId=h.projectId),h.destinationId!==void 0&&(_.destinationId=h.destinationId),h.force!==void 0&&(_.force=h.force),_},fromPartial(h){var _,j,Et,dt;const kt=Jr();return kt.collectionId=(_=h.collectionId)!==null&&_!==void 0?_:"",kt.projectId=(j=h.projectId)!==null&&j!==void 0?j:"",kt.destinationId=(Et=h.destinationId)!==null&&Et!==void 0?Et:"",kt.force=(dt=h.force)!==null&&dt!==void 0?dt:void 0,kt}};function qr(){return{broadcastUpdated:!1}}a.DeleteDestinationResponse={encode(h,_=b.Writer.create()){return h.broadcastUpdated===!0&&_.uint32(8).bool(h.broadcastUpdated),_},decode(h,_){const j=h instanceof b.Reader?h:new b.Reader(h);let Et=_===void 0?j.len:j.pos+_;const dt=qr();for(;j.pos<Et;){const kt=j.uint32();switch(kt>>>3){case 1:dt.broadcastUpdated=j.bool();break;default:j.skipType(kt&7);break}}return dt},fromJSON(h){return{broadcastUpdated:At(h.broadcastUpdated)?Boolean(h.broadcastUpdated):!1}},toJSON(h){const _={};return h.broadcastUpdated!==void 0&&(_.broadcastUpdated=h.broadcastUpdated),_},fromPartial(h){var _;const j=qr();return j.broadcastUpdated=(_=h.broadcastUpdated)!==null&&_!==void 0?_:!1,j}};function Gr(){return{collectionId:"",projectId:"",destinationId:"",updateMask:void 0,metadata:void 0,address:void 0,enabled:void 0,timeout:void 0}}a.UpdateDestinationRequest={encode(h,_=b.Writer.create()){return h.collectionId!==""&&_.uint32(10).string(h.collectionId),h.projectId!==""&&_.uint32(18).string(h.projectId),h.destinationId!==""&&_.uint32(26).string(h.destinationId),h.updateMask!==void 0&&nt.FieldMask.encode(nt.FieldMask.wrap(h.updateMask),_.uint32(34).fork()).ldelim(),h.metadata!==void 0&&et.Value.encode(et.Value.wrap(h.metadata),_.uint32(42).fork()).ldelim(),h.address!==void 0&&a.DestinationAddress.encode(h.address,_.uint32(50).fork()).ldelim(),h.enabled!==void 0&&_.uint32(56).bool(h.enabled),h.timeout!==void 0&&_.uint32(64).uint32(h.timeout),_},decode(h,_){const j=h instanceof b.Reader?h:new b.Reader(h);let Et=_===void 0?j.len:j.pos+_;const dt=Gr();for(;j.pos<Et;){const kt=j.uint32();switch(kt>>>3){case 1:dt.collectionId=j.string();break;case 2:dt.projectId=j.string();break;case 3:dt.destinationId=j.string();break;case 4:dt.updateMask=nt.FieldMask.unwrap(nt.FieldMask.decode(j,j.uint32()));break;case 5:dt.metadata=et.Value.unwrap(et.Value.decode(j,j.uint32()));break;case 6:dt.address=a.DestinationAddress.decode(j,j.uint32());break;case 7:dt.enabled=j.bool();break;case 8:dt.timeout=j.uint32();break;default:j.skipType(kt&7);break}}return dt},fromJSON(h){return{collectionId:At(h.collectionId)?String(h.collectionId):"",projectId:At(h.projectId)?String(h.projectId):"",destinationId:At(h.destinationId)?String(h.destinationId):"",updateMask:At(h.updateMask)?nt.FieldMask.unwrap(nt.FieldMask.fromJSON(h.updateMask)):void 0,metadata:At(h==null?void 0:h.metadata)?h.metadata:void 0,address:At(h.address)?a.DestinationAddress.fromJSON(h.address):void 0,enabled:At(h.enabled)?Boolean(h.enabled):void 0,timeout:At(h.timeout)?Number(h.timeout):void 0}},toJSON(h){const _={};return h.collectionId!==void 0&&(_.collectionId=h.collectionId),h.projectId!==void 0&&(_.projectId=h.projectId),h.destinationId!==void 0&&(_.destinationId=h.destinationId),h.updateMask!==void 0&&(_.updateMask=nt.FieldMask.toJSON(nt.FieldMask.wrap(h.updateMask))),h.metadata!==void 0&&(_.metadata=h.metadata),h.address!==void 0&&(_.address=h.address?a.DestinationAddress.toJSON(h.address):void 0),h.enabled!==void 0&&(_.enabled=h.enabled),h.timeout!==void 0&&(_.timeout=Math.round(h.timeout)),_},fromPartial(h){var _,j,Et,dt,kt,Kt,ln;const In=Gr();return In.collectionId=(_=h.collectionId)!==null&&_!==void 0?_:"",In.projectId=(j=h.projectId)!==null&&j!==void 0?j:"",In.destinationId=(Et=h.destinationId)!==null&&Et!==void 0?Et:"",In.updateMask=(dt=h.updateMask)!==null&&dt!==void 0?dt:void 0,In.metadata=(kt=h.metadata)!==null&&kt!==void 0?kt:void 0,In.address=h.address!==void 0&&h.address!==null?a.DestinationAddress.fromPartial(h.address):void 0,In.enabled=(Kt=h.enabled)!==null&&Kt!==void 0?Kt:void 0,In.timeout=(ln=h.timeout)!==null&&ln!==void 0?ln:void 0,In}};function Wr(){return{destination:void 0,broadcastUpdated:!1}}a.UpdateDestinationResponse={encode(h,_=b.Writer.create()){return h.destination!==void 0&&a.Destination.encode(h.destination,_.uint32(10).fork()).ldelim(),h.broadcastUpdated===!0&&_.uint32(16).bool(h.broadcastUpdated),_},decode(h,_){const j=h instanceof b.Reader?h:new b.Reader(h);let Et=_===void 0?j.len:j.pos+_;const dt=Wr();for(;j.pos<Et;){const kt=j.uint32();switch(kt>>>3){case 1:dt.destination=a.Destination.decode(j,j.uint32());break;case 2:dt.broadcastUpdated=j.bool();break;default:j.skipType(kt&7);break}}return dt},fromJSON(h){return{destination:At(h.destination)?a.Destination.fromJSON(h.destination):void 0,broadcastUpdated:At(h.broadcastUpdated)?Boolean(h.broadcastUpdated):!1}},toJSON(h){const _={};return h.destination!==void 0&&(_.destination=h.destination?a.Destination.toJSON(h.destination):void 0),h.broadcastUpdated!==void 0&&(_.broadcastUpdated=h.broadcastUpdated),_},fromPartial(h){var _;const j=Wr();return j.destination=h.destination!==void 0&&h.destination!==null?a.Destination.fromPartial(h.destination):void 0,j.broadcastUpdated=(_=h.broadcastUpdated)!==null&&_!==void 0?_:!1,j}};function Hr(){return{collectionId:"",metadata:void 0,address:void 0,preview:void 0}}a.CreateSourceRequest={encode(h,_=b.Writer.create()){return h.collectionId!==""&&_.uint32(10).string(h.collectionId),h.metadata!==void 0&&et.Value.encode(et.Value.wrap(h.metadata),_.uint32(18).fork()).ldelim(),h.address!==void 0&&a.SourceAddress.encode(h.address,_.uint32(26).fork()).ldelim(),h.preview!==void 0&&a.PreviewAddress.encode(h.preview,_.uint32(34).fork()).ldelim(),_},decode(h,_){const j=h instanceof b.Reader?h:new b.Reader(h);let Et=_===void 0?j.len:j.pos+_;const dt=Hr();for(;j.pos<Et;){const kt=j.uint32();switch(kt>>>3){case 1:dt.collectionId=j.string();break;case 2:dt.metadata=et.Value.unwrap(et.Value.decode(j,j.uint32()));break;case 3:dt.address=a.SourceAddress.decode(j,j.uint32());break;case 4:dt.preview=a.PreviewAddress.decode(j,j.uint32());break;default:j.skipType(kt&7);break}}return dt},fromJSON(h){return{collectionId:At(h.collectionId)?String(h.collectionId):"",metadata:At(h==null?void 0:h.metadata)?h.metadata:void 0,address:At(h.address)?a.SourceAddress.fromJSON(h.address):void 0,preview:At(h.preview)?a.PreviewAddress.fromJSON(h.preview):void 0}},toJSON(h){const _={};return h.collectionId!==void 0&&(_.collectionId=h.collectionId),h.metadata!==void 0&&(_.metadata=h.metadata),h.address!==void 0&&(_.address=h.address?a.SourceAddress.toJSON(h.address):void 0),h.preview!==void 0&&(_.preview=h.preview?a.PreviewAddress.toJSON(h.preview):void 0),_},fromPartial(h){var _,j;const Et=Hr();return Et.collectionId=(_=h.collectionId)!==null&&_!==void 0?_:"",Et.metadata=(j=h.metadata)!==null&&j!==void 0?j:void 0,Et.address=h.address!==void 0&&h.address!==null?a.SourceAddress.fromPartial(h.address):void 0,Et.preview=h.preview!==void 0&&h.preview!==null?a.PreviewAddress.fromPartial(h.preview):void 0,Et}};function zr(){return{source:void 0}}a.CreateSourceResponse={encode(h,_=b.Writer.create()){return h.source!==void 0&&a.Source.encode(h.source,_.uint32(10).fork()).ldelim(),_},decode(h,_){const j=h instanceof b.Reader?h:new b.Reader(h);let Et=_===void 0?j.len:j.pos+_;const dt=zr();for(;j.pos<Et;){const kt=j.uint32();switch(kt>>>3){case 1:dt.source=a.Source.decode(j,j.uint32());break;default:j.skipType(kt&7);break}}return dt},fromJSON(h){return{source:At(h.source)?a.Source.fromJSON(h.source):void 0}},toJSON(h){const _={};return h.source!==void 0&&(_.source=h.source?a.Source.toJSON(h.source):void 0),_},fromPartial(h){const _=zr();return _.source=h.source!==void 0&&h.source!==null?a.Source.fromPartial(h.source):void 0,_}};function xr(){return{collectionId:"",sourceId:"",force:void 0}}a.DeleteSourceRequest={encode(h,_=b.Writer.create()){return h.collectionId!==""&&_.uint32(10).string(h.collectionId),h.sourceId!==""&&_.uint32(18).string(h.sourceId),h.force!==void 0&&_.uint32(24).bool(h.force),_},decode(h,_){const j=h instanceof b.Reader?h:new b.Reader(h);let Et=_===void 0?j.len:j.pos+_;const dt=xr();for(;j.pos<Et;){const kt=j.uint32();switch(kt>>>3){case 1:dt.collectionId=j.string();break;case 2:dt.sourceId=j.string();break;case 3:dt.force=j.bool();break;default:j.skipType(kt&7);break}}return dt},fromJSON(h){return{collectionId:At(h.collectionId)?String(h.collectionId):"",sourceId:At(h.sourceId)?String(h.sourceId):"",force:At(h.force)?Boolean(h.force):void 0}},toJSON(h){const _={};return h.collectionId!==void 0&&(_.collectionId=h.collectionId),h.sourceId!==void 0&&(_.sourceId=h.sourceId),h.force!==void 0&&(_.force=h.force),_},fromPartial(h){var _,j,Et;const dt=xr();return dt.collectionId=(_=h.collectionId)!==null&&_!==void 0?_:"",dt.sourceId=(j=h.sourceId)!==null&&j!==void 0?j:"",dt.force=(Et=h.force)!==null&&Et!==void 0?Et:void 0,dt}};function Yr(){return{projectIdsUpdated:[]}}a.DeleteSourceResponse={encode(h,_=b.Writer.create()){for(const j of h.projectIdsUpdated)_.uint32(26).string(j);return _},decode(h,_){const j=h instanceof b.Reader?h:new b.Reader(h);let Et=_===void 0?j.len:j.pos+_;const dt=Yr();for(;j.pos<Et;){const kt=j.uint32();switch(kt>>>3){case 3:dt.projectIdsUpdated.push(j.string());break;default:j.skipType(kt&7);break}}return dt},fromJSON(h){return{projectIdsUpdated:Array.isArray(h==null?void 0:h.projectIdsUpdated)?h.projectIdsUpdated.map(_=>String(_)):[]}},toJSON(h){const _={};return h.projectIdsUpdated?_.projectIdsUpdated=h.projectIdsUpdated.map(j=>j):_.projectIdsUpdated=[],_},fromPartial(h){var _;const j=Yr();return j.projectIdsUpdated=((_=h.projectIdsUpdated)===null||_===void 0?void 0:_.map(Et=>Et))||[],j}};function jr(){return{collectionId:"",projectId:"",sourceId:"",trigger:void 0}}a.AddSourceToProjectRequest={encode(h,_=b.Writer.create()){return h.collectionId!==""&&_.uint32(10).string(h.collectionId),h.projectId!==""&&_.uint32(18).string(h.projectId),h.sourceId!==""&&_.uint32(26).string(h.sourceId),h.trigger!==void 0&&a.SourceTrigger.encode(h.trigger,_.uint32(34).fork()).ldelim(),_},decode(h,_){const j=h instanceof b.Reader?h:new b.Reader(h);let Et=_===void 0?j.len:j.pos+_;const dt=jr();for(;j.pos<Et;){const kt=j.uint32();switch(kt>>>3){case 1:dt.collectionId=j.string();break;case 2:dt.projectId=j.string();break;case 3:dt.sourceId=j.string();break;case 4:dt.trigger=a.SourceTrigger.decode(j,j.uint32());break;default:j.skipType(kt&7);break}}return dt},fromJSON(h){return{collectionId:At(h.collectionId)?String(h.collectionId):"",projectId:At(h.projectId)?String(h.projectId):"",sourceId:At(h.sourceId)?String(h.sourceId):"",trigger:At(h.trigger)?a.SourceTrigger.fromJSON(h.trigger):void 0}},toJSON(h){const _={};return h.collectionId!==void 0&&(_.collectionId=h.collectionId),h.projectId!==void 0&&(_.projectId=h.projectId),h.sourceId!==void 0&&(_.sourceId=h.sourceId),h.trigger!==void 0&&(_.trigger=h.trigger?a.SourceTrigger.toJSON(h.trigger):void 0),_},fromPartial(h){var _,j,Et;const dt=jr();return dt.collectionId=(_=h.collectionId)!==null&&_!==void 0?_:"",dt.projectId=(j=h.projectId)!==null&&j!==void 0?j:"",dt.sourceId=(Et=h.sourceId)!==null&&Et!==void 0?Et:"",dt.trigger=h.trigger!==void 0&&h.trigger!==null?a.SourceTrigger.fromPartial(h.trigger):void 0,dt}};function Kr(){return{project:void 0,broadcastUpdated:!1}}a.AddSourceToProjectResponse={encode(h,_=b.Writer.create()){return h.project!==void 0&&a.Project.encode(h.project,_.uint32(10).fork()).ldelim(),h.broadcastUpdated===!0&&_.uint32(16).bool(h.broadcastUpdated),_},decode(h,_){const j=h instanceof b.Reader?h:new b.Reader(h);let Et=_===void 0?j.len:j.pos+_;const dt=Kr();for(;j.pos<Et;){const kt=j.uint32();switch(kt>>>3){case 1:dt.project=a.Project.decode(j,j.uint32());break;case 2:dt.broadcastUpdated=j.bool();break;default:j.skipType(kt&7);break}}return dt},fromJSON(h){return{project:At(h.project)?a.Project.fromJSON(h.project):void 0,broadcastUpdated:At(h.broadcastUpdated)?Boolean(h.broadcastUpdated):!1}},toJSON(h){const _={};return h.project!==void 0&&(_.project=h.project?a.Project.toJSON(h.project):void 0),h.broadcastUpdated!==void 0&&(_.broadcastUpdated=h.broadcastUpdated),_},fromPartial(h){var _;const j=Kr();return j.project=h.project!==void 0&&h.project!==null?a.Project.fromPartial(h.project):void 0,j.broadcastUpdated=(_=h.broadcastUpdated)!==null&&_!==void 0?_:!1,j}};function Qr(){return{collectionId:"",projectId:"",sourceId:"",updateMask:void 0,trigger:void 0}}a.UpdateSourceInProjectRequest={encode(h,_=b.Writer.create()){return h.collectionId!==""&&_.uint32(10).string(h.collectionId),h.projectId!==""&&_.uint32(18).string(h.projectId),h.sourceId!==""&&_.uint32(26).string(h.sourceId),h.updateMask!==void 0&&nt.FieldMask.encode(nt.FieldMask.wrap(h.updateMask),_.uint32(34).fork()).ldelim(),h.trigger!==void 0&&a.SourceTrigger.encode(h.trigger,_.uint32(42).fork()).ldelim(),_},decode(h,_){const j=h instanceof b.Reader?h:new b.Reader(h);let Et=_===void 0?j.len:j.pos+_;const dt=Qr();for(;j.pos<Et;){const kt=j.uint32();switch(kt>>>3){case 1:dt.collectionId=j.string();break;case 2:dt.projectId=j.string();break;case 3:dt.sourceId=j.string();break;case 4:dt.updateMask=nt.FieldMask.unwrap(nt.FieldMask.decode(j,j.uint32()));break;case 5:dt.trigger=a.SourceTrigger.decode(j,j.uint32());break;default:j.skipType(kt&7);break}}return dt},fromJSON(h){return{collectionId:At(h.collectionId)?String(h.collectionId):"",projectId:At(h.projectId)?String(h.projectId):"",sourceId:At(h.sourceId)?String(h.sourceId):"",updateMask:At(h.updateMask)?nt.FieldMask.unwrap(nt.FieldMask.fromJSON(h.updateMask)):void 0,trigger:At(h.trigger)?a.SourceTrigger.fromJSON(h.trigger):void 0}},toJSON(h){const _={};return h.collectionId!==void 0&&(_.collectionId=h.collectionId),h.projectId!==void 0&&(_.projectId=h.projectId),h.sourceId!==void 0&&(_.sourceId=h.sourceId),h.updateMask!==void 0&&(_.updateMask=nt.FieldMask.toJSON(nt.FieldMask.wrap(h.updateMask))),h.trigger!==void 0&&(_.trigger=h.trigger?a.SourceTrigger.toJSON(h.trigger):void 0),_},fromPartial(h){var _,j,Et,dt;const kt=Qr();return kt.collectionId=(_=h.collectionId)!==null&&_!==void 0?_:"",kt.projectId=(j=h.projectId)!==null&&j!==void 0?j:"",kt.sourceId=(Et=h.sourceId)!==null&&Et!==void 0?Et:"",kt.updateMask=(dt=h.updateMask)!==null&&dt!==void 0?dt:void 0,kt.trigger=h.trigger!==void 0&&h.trigger!==null?a.SourceTrigger.fromPartial(h.trigger):void 0,kt}};function Xr(){return{project:void 0}}a.UpdateSourceInProjectResponse={encode(h,_=b.Writer.create()){return h.project!==void 0&&a.Project.encode(h.project,_.uint32(10).fork()).ldelim(),_},decode(h,_){const j=h instanceof b.Reader?h:new b.Reader(h);let Et=_===void 0?j.len:j.pos+_;const dt=Xr();for(;j.pos<Et;){const kt=j.uint32();switch(kt>>>3){case 1:dt.project=a.Project.decode(j,j.uint32());break;default:j.skipType(kt&7);break}}return dt},fromJSON(h){return{project:At(h.project)?a.Project.fromJSON(h.project):void 0}},toJSON(h){const _={};return h.project!==void 0&&(_.project=h.project?a.Project.toJSON(h.project):void 0),_},fromPartial(h){const _=Xr();return _.project=h.project!==void 0&&h.project!==null?a.Project.fromPartial(h.project):void 0,_}};function Zr(){return{collectionId:"",sourceId:""}}a.GetSourceRequest={encode(h,_=b.Writer.create()){return h.collectionId!==""&&_.uint32(10).string(h.collectionId),h.sourceId!==""&&_.uint32(26).string(h.sourceId),_},decode(h,_){const j=h instanceof b.Reader?h:new b.Reader(h);let Et=_===void 0?j.len:j.pos+_;const dt=Zr();for(;j.pos<Et;){const kt=j.uint32();switch(kt>>>3){case 1:dt.collectionId=j.string();break;case 3:dt.sourceId=j.string();break;default:j.skipType(kt&7);break}}return dt},fromJSON(h){return{collectionId:At(h.collectionId)?String(h.collectionId):"",sourceId:At(h.sourceId)?String(h.sourceId):""}},toJSON(h){const _={};return h.collectionId!==void 0&&(_.collectionId=h.collectionId),h.sourceId!==void 0&&(_.sourceId=h.sourceId),_},fromPartial(h){var _,j;const Et=Zr();return Et.collectionId=(_=h.collectionId)!==null&&_!==void 0?_:"",Et.sourceId=(j=h.sourceId)!==null&&j!==void 0?j:"",Et}};function _i(){return{source:void 0}}a.GetSourceResponse={encode(h,_=b.Writer.create()){return h.source!==void 0&&a.Source.encode(h.source,_.uint32(10).fork()).ldelim(),_},decode(h,_){const j=h instanceof b.Reader?h:new b.Reader(h);let Et=_===void 0?j.len:j.pos+_;const dt=_i();for(;j.pos<Et;){const kt=j.uint32();switch(kt>>>3){case 1:dt.source=a.Source.decode(j,j.uint32());break;default:j.skipType(kt&7);break}}return dt},fromJSON(h){return{source:At(h.source)?a.Source.fromJSON(h.source):void 0}},toJSON(h){const _={};return h.source!==void 0&&(_.source=h.source?a.Source.toJSON(h.source):void 0),_},fromPartial(h){const _=_i();return _.source=h.source!==void 0&&h.source!==null?a.Source.fromPartial(h.source):void 0,_}};function eo(){return{collectionId:""}}a.GetSourcesRequest={encode(h,_=b.Writer.create()){return h.collectionId!==""&&_.uint32(10).string(h.collectionId),_},decode(h,_){const j=h instanceof b.Reader?h:new b.Reader(h);let Et=_===void 0?j.len:j.pos+_;const dt=eo();for(;j.pos<Et;){const kt=j.uint32();switch(kt>>>3){case 1:dt.collectionId=j.string();break;default:j.skipType(kt&7);break}}return dt},fromJSON(h){return{collectionId:At(h.collectionId)?String(h.collectionId):""}},toJSON(h){const _={};return h.collectionId!==void 0&&(_.collectionId=h.collectionId),_},fromPartial(h){var _;const j=eo();return j.collectionId=(_=h.collectionId)!==null&&_!==void 0?_:"",j}};function to(){return{sources:[]}}a.GetSourcesResponse={encode(h,_=b.Writer.create()){for(const j of h.sources)a.Source.encode(j,_.uint32(10).fork()).ldelim();return _},decode(h,_){const j=h instanceof b.Reader?h:new b.Reader(h);let Et=_===void 0?j.len:j.pos+_;const dt=to();for(;j.pos<Et;){const kt=j.uint32();switch(kt>>>3){case 1:dt.sources.push(a.Source.decode(j,j.uint32()));break;default:j.skipType(kt&7);break}}return dt},fromJSON(h){return{sources:Array.isArray(h==null?void 0:h.sources)?h.sources.map(_=>a.Source.fromJSON(_)):[]}},toJSON(h){const _={};return h.sources?_.sources=h.sources.map(j=>j?a.Source.toJSON(j):void 0):_.sources=[],_},fromPartial(h){var _;const j=to();return j.sources=((_=h.sources)===null||_===void 0?void 0:_.map(Et=>a.Source.fromPartial(Et)))||[],j}};function no(){return{collectionId:"",sourceId:"",updateMask:void 0,metadata:void 0,address:void 0,preview:void 0}}a.UpdateSourceRequest={encode(h,_=b.Writer.create()){return h.collectionId!==""&&_.uint32(10).string(h.collectionId),h.sourceId!==""&&_.uint32(26).string(h.sourceId),h.updateMask!==void 0&&nt.FieldMask.encode(nt.FieldMask.wrap(h.updateMask),_.uint32(34).fork()).ldelim(),h.metadata!==void 0&&et.Value.encode(et.Value.wrap(h.metadata),_.uint32(42).fork()).ldelim(),h.address!==void 0&&a.SourceAddress.encode(h.address,_.uint32(50).fork()).ldelim(),h.preview!==void 0&&a.PreviewAddress.encode(h.preview,_.uint32(58).fork()).ldelim(),_},decode(h,_){const j=h instanceof b.Reader?h:new b.Reader(h);let Et=_===void 0?j.len:j.pos+_;const dt=no();for(;j.pos<Et;){const kt=j.uint32();switch(kt>>>3){case 1:dt.collectionId=j.string();break;case 3:dt.sourceId=j.string();break;case 4:dt.updateMask=nt.FieldMask.unwrap(nt.FieldMask.decode(j,j.uint32()));break;case 5:dt.metadata=et.Value.unwrap(et.Value.decode(j,j.uint32()));break;case 6:dt.address=a.SourceAddress.decode(j,j.uint32());break;case 7:dt.preview=a.PreviewAddress.decode(j,j.uint32());break;default:j.skipType(kt&7);break}}return dt},fromJSON(h){return{collectionId:At(h.collectionId)?String(h.collectionId):"",sourceId:At(h.sourceId)?String(h.sourceId):"",updateMask:At(h.updateMask)?nt.FieldMask.unwrap(nt.FieldMask.fromJSON(h.updateMask)):void 0,metadata:At(h==null?void 0:h.metadata)?h.metadata:void 0,address:At(h.address)?a.SourceAddress.fromJSON(h.address):void 0,preview:At(h.preview)?a.PreviewAddress.fromJSON(h.preview):void 0}},toJSON(h){const _={};return h.collectionId!==void 0&&(_.collectionId=h.collectionId),h.sourceId!==void 0&&(_.sourceId=h.sourceId),h.updateMask!==void 0&&(_.updateMask=nt.FieldMask.toJSON(nt.FieldMask.wrap(h.updateMask))),h.metadata!==void 0&&(_.metadata=h.metadata),h.address!==void 0&&(_.address=h.address?a.SourceAddress.toJSON(h.address):void 0),h.preview!==void 0&&(_.preview=h.preview?a.PreviewAddress.toJSON(h.preview):void 0),_},fromPartial(h){var _,j,Et,dt;const kt=no();return kt.collectionId=(_=h.collectionId)!==null&&_!==void 0?_:"",kt.sourceId=(j=h.sourceId)!==null&&j!==void 0?j:"",kt.updateMask=(Et=h.updateMask)!==null&&Et!==void 0?Et:void 0,kt.metadata=(dt=h.metadata)!==null&&dt!==void 0?dt:void 0,kt.address=h.address!==void 0&&h.address!==null?a.SourceAddress.fromPartial(h.address):void 0,kt.preview=h.preview!==void 0&&h.preview!==null?a.PreviewAddress.fromPartial(h.preview):void 0,kt}};function ro(){return{source:void 0,broadcastUpdated:!1}}a.UpdateSourceResponse={encode(h,_=b.Writer.create()){return h.source!==void 0&&a.Source.encode(h.source,_.uint32(10).fork()).ldelim(),h.broadcastUpdated===!0&&_.uint32(16).bool(h.broadcastUpdated),_},decode(h,_){const j=h instanceof b.Reader?h:new b.Reader(h);let Et=_===void 0?j.len:j.pos+_;const dt=ro();for(;j.pos<Et;){const kt=j.uint32();switch(kt>>>3){case 1:dt.source=a.Source.decode(j,j.uint32());break;case 2:dt.broadcastUpdated=j.bool();break;default:j.skipType(kt&7);break}}return dt},fromJSON(h){return{source:At(h.source)?a.Source.fromJSON(h.source):void 0,broadcastUpdated:At(h.broadcastUpdated)?Boolean(h.broadcastUpdated):!1}},toJSON(h){const _={};return h.source!==void 0&&(_.source=h.source?a.Source.toJSON(h.source):void 0),h.broadcastUpdated!==void 0&&(_.broadcastUpdated=h.broadcastUpdated),_},fromPartial(h){var _;const j=ro();return j.source=h.source!==void 0&&h.source!==null?a.Source.fromPartial(h.source):void 0,j.broadcastUpdated=(_=h.broadcastUpdated)!==null&&_!==void 0?_:!1,j}};function io(){return{collectionId:"",projectId:"",sourceId:"",force:void 0}}a.RemoveSourceFromProjectRequest={encode(h,_=b.Writer.create()){return h.collectionId!==""&&_.uint32(10).string(h.collectionId),h.projectId!==""&&_.uint32(18).string(h.projectId),h.sourceId!==""&&_.uint32(26).string(h.sourceId),h.force!==void 0&&_.uint32(32).bool(h.force),_},decode(h,_){const j=h instanceof b.Reader?h:new b.Reader(h);let Et=_===void 0?j.len:j.pos+_;const dt=io();for(;j.pos<Et;){const kt=j.uint32();switch(kt>>>3){case 1:dt.collectionId=j.string();break;case 2:dt.projectId=j.string();break;case 3:dt.sourceId=j.string();break;case 4:dt.force=j.bool();break;default:j.skipType(kt&7);break}}return dt},fromJSON(h){return{collectionId:At(h.collectionId)?String(h.collectionId):"",projectId:At(h.projectId)?String(h.projectId):"",sourceId:At(h.sourceId)?String(h.sourceId):"",force:At(h.force)?Boolean(h.force):void 0}},toJSON(h){const _={};return h.collectionId!==void 0&&(_.collectionId=h.collectionId),h.projectId!==void 0&&(_.projectId=h.projectId),h.sourceId!==void 0&&(_.sourceId=h.sourceId),h.force!==void 0&&(_.force=h.force),_},fromPartial(h){var _,j,Et,dt;const kt=io();return kt.collectionId=(_=h.collectionId)!==null&&_!==void 0?_:"",kt.projectId=(j=h.projectId)!==null&&j!==void 0?j:"",kt.sourceId=(Et=h.sourceId)!==null&&Et!==void 0?Et:"",kt.force=(dt=h.force)!==null&&dt!==void 0?dt:void 0,kt}};function oo(){return{project:void 0,broadcastUpdated:!1}}a.RemoveSourceFromProjectResponse={encode(h,_=b.Writer.create()){return h.project!==void 0&&a.Project.encode(h.project,_.uint32(10).fork()).ldelim(),h.broadcastUpdated===!0&&_.uint32(16).bool(h.broadcastUpdated),_},decode(h,_){const j=h instanceof b.Reader?h:new b.Reader(h);let Et=_===void 0?j.len:j.pos+_;const dt=oo();for(;j.pos<Et;){const kt=j.uint32();switch(kt>>>3){case 1:dt.project=a.Project.decode(j,j.uint32());break;case 2:dt.broadcastUpdated=j.bool();break;default:j.skipType(kt&7);break}}return dt},fromJSON(h){return{project:At(h.project)?a.Project.fromJSON(h.project):void 0,broadcastUpdated:At(h.broadcastUpdated)?Boolean(h.broadcastUpdated):!1}},toJSON(h){const _={};return h.project!==void 0&&(_.project=h.project?a.Project.toJSON(h.project):void 0),h.broadcastUpdated!==void 0&&(_.broadcastUpdated=h.broadcastUpdated),_},fromPartial(h){var _;const j=oo();return j.project=h.project!==void 0&&h.project!==null?a.Project.fromPartial(h.project):void 0,j.broadcastUpdated=(_=h.broadcastUpdated)!==null&&_!==void 0?_:!1,j}};function ao(){return{serviceUserId:"",role:void 0,maxDuration:void 0}}a.CreateAccessTokenRequest={encode(h,_=b.Writer.create()){return h.serviceUserId!==""&&_.uint32(10).string(h.serviceUserId),h.role!==void 0&&_.uint32(16).int32(Ln(h.role)),h.maxDuration!==void 0&&_.uint32(24).uint32(h.maxDuration),_},decode(h,_){const j=h instanceof b.Reader?h:new b.Reader(h);let Et=_===void 0?j.len:j.pos+_;const dt=ao();for(;j.pos<Et;){const kt=j.uint32();switch(kt>>>3){case 1:dt.serviceUserId=j.string();break;case 2:dt.role=bn(j.int32());break;case 3:dt.maxDuration=j.uint32();break;default:j.skipType(kt&7);break}}return dt},fromJSON(h){return{serviceUserId:At(h.serviceUserId)?String(h.serviceUserId):"",role:At(h.role)?bn(h.role):void 0,maxDuration:At(h.maxDuration)?Number(h.maxDuration):void 0}},toJSON(h){const _={};return h.serviceUserId!==void 0&&(_.serviceUserId=h.serviceUserId),h.role!==void 0&&(_.role=h.role!==void 0?$n(h.role):void 0),h.maxDuration!==void 0&&(_.maxDuration=Math.round(h.maxDuration)),_},fromPartial(h){var _,j,Et;const dt=ao();return dt.serviceUserId=(_=h.serviceUserId)!==null&&_!==void 0?_:"",dt.role=(j=h.role)!==null&&j!==void 0?j:void 0,dt.maxDuration=(Et=h.maxDuration)!==null&&Et!==void 0?Et:void 0,dt}};function so(){return{accessToken:""}}a.CreateAccessTokenResponse={encode(h,_=b.Writer.create()){return h.accessToken!==""&&_.uint32(10).string(h.accessToken),_},decode(h,_){const j=h instanceof b.Reader?h:new b.Reader(h);let Et=_===void 0?j.len:j.pos+_;const dt=so();for(;j.pos<Et;){const kt=j.uint32();switch(kt>>>3){case 1:dt.accessToken=j.string();break;default:j.skipType(kt&7);break}}return dt},fromJSON(h){return{accessToken:At(h.accessToken)?String(h.accessToken):""}},toJSON(h){const _={};return h.accessToken!==void 0&&(_.accessToken=h.accessToken),_},fromPartial(h){var _;const j=so();return j.accessToken=(_=h.accessToken)!==null&&_!==void 0?_:"",j}};function uo(){return{displayName:"",serviceUserId:void 0}}a.GuestAccessTokenDirect={encode(h,_=b.Writer.create()){return h.displayName!==""&&_.uint32(10).string(h.displayName),h.serviceUserId!==void 0&&_.uint32(18).string(h.serviceUserId),_},decode(h,_){const j=h instanceof b.Reader?h:new b.Reader(h);let Et=_===void 0?j.len:j.pos+_;const dt=uo();for(;j.pos<Et;){const kt=j.uint32();switch(kt>>>3){case 1:dt.displayName=j.string();break;case 2:dt.serviceUserId=j.string();break;default:j.skipType(kt&7);break}}return dt},fromJSON(h){return{displayName:At(h.displayName)?String(h.displayName):"",serviceUserId:At(h.serviceUserId)?String(h.serviceUserId):void 0}},toJSON(h){const _={};return h.displayName!==void 0&&(_.displayName=h.displayName),h.serviceUserId!==void 0&&(_.serviceUserId=h.serviceUserId),_},fromPartial(h){var _,j;const Et=uo();return Et.displayName=(_=h.displayName)!==null&&_!==void 0?_:"",Et.serviceUserId=(j=h.serviceUserId)!==null&&j!==void 0?j:void 0,Et}};function co(){return{maxDuration:void 0}}a.GuestAccessTokenExchange={encode(h,_=b.Writer.create()){return h.maxDuration!==void 0&&_.uint32(8).uint32(h.maxDuration),_},decode(h,_){const j=h instanceof b.Reader?h:new b.Reader(h);let Et=_===void 0?j.len:j.pos+_;const dt=co();for(;j.pos<Et;){const kt=j.uint32();switch(kt>>>3){case 1:dt.maxDuration=j.uint32();break;default:j.skipType(kt&7);break}}return dt},fromJSON(h){return{maxDuration:At(h.maxDuration)?Number(h.maxDuration):void 0}},toJSON(h){const _={};return h.maxDuration!==void 0&&(_.maxDuration=Math.round(h.maxDuration)),_},fromPartial(h){var _;const j=co();return j.maxDuration=(_=h.maxDuration)!==null&&_!==void 0?_:void 0,j}};function lo(){return{direct:void 0,exchange:void 0}}a.GuestAccessToken={encode(h,_=b.Writer.create()){return h.direct!==void 0&&a.GuestAccessTokenDirect.encode(h.direct,_.uint32(10).fork()).ldelim(),h.exchange!==void 0&&a.GuestAccessTokenExchange.encode(h.exchange,_.uint32(18).fork()).ldelim(),_},decode(h,_){const j=h instanceof b.Reader?h:new b.Reader(h);let Et=_===void 0?j.len:j.pos+_;const dt=lo();for(;j.pos<Et;){const kt=j.uint32();switch(kt>>>3){case 1:dt.direct=a.GuestAccessTokenDirect.decode(j,j.uint32());break;case 2:dt.exchange=a.GuestAccessTokenExchange.decode(j,j.uint32());break;default:j.skipType(kt&7);break}}return dt},fromJSON(h){return{direct:At(h.direct)?a.GuestAccessTokenDirect.fromJSON(h.direct):void 0,exchange:At(h.exchange)?a.GuestAccessTokenExchange.fromJSON(h.exchange):void 0}},toJSON(h){const _={};return h.direct!==void 0&&(_.direct=h.direct?a.GuestAccessTokenDirect.toJSON(h.direct):void 0),h.exchange!==void 0&&(_.exchange=h.exchange?a.GuestAccessTokenExchange.toJSON(h.exchange):void 0),_},fromPartial(h){const _=lo();return _.direct=h.direct!==void 0&&h.direct!==null?a.GuestAccessTokenDirect.fromPartial(h.direct):void 0,_.exchange=h.exchange!==void 0&&h.exchange!==null?a.GuestAccessTokenExchange.fromPartial(h.exchange):void 0,_}};function fo(){return{collectionId:"",projectId:"",maxDuration:void 0,role:Xt.ROLE_UNSPECIFIED,token:void 0,url:void 0}}a.CreateGuestAccessTokenRequest={encode(h,_=b.Writer.create()){return h.collectionId!==""&&_.uint32(10).string(h.collectionId),h.projectId!==""&&_.uint32(18).string(h.projectId),h.maxDuration!==void 0&&_.uint32(24).uint32(h.maxDuration),h.role!==Xt.ROLE_UNSPECIFIED&&_.uint32(32).int32(Ln(h.role)),h.token!==void 0&&a.GuestAccessToken.encode(h.token,_.uint32(42).fork()).ldelim(),h.url!==void 0&&_.uint32(50).string(h.url),_},decode(h,_){const j=h instanceof b.Reader?h:new b.Reader(h);let Et=_===void 0?j.len:j.pos+_;const dt=fo();for(;j.pos<Et;){const kt=j.uint32();switch(kt>>>3){case 1:dt.collectionId=j.string();break;case 2:dt.projectId=j.string();break;case 3:dt.maxDuration=j.uint32();break;case 4:dt.role=bn(j.int32());break;case 5:dt.token=a.GuestAccessToken.decode(j,j.uint32());break;case 6:dt.url=j.string();break;default:j.skipType(kt&7);break}}return dt},fromJSON(h){return{collectionId:At(h.collectionId)?String(h.collectionId):"",projectId:At(h.projectId)?String(h.projectId):"",maxDuration:At(h.maxDuration)?Number(h.maxDuration):void 0,role:At(h.role)?bn(h.role):Xt.ROLE_UNSPECIFIED,token:At(h.token)?a.GuestAccessToken.fromJSON(h.token):void 0,url:At(h.url)?String(h.url):void 0}},toJSON(h){const _={};return h.collectionId!==void 0&&(_.collectionId=h.collectionId),h.projectId!==void 0&&(_.projectId=h.projectId),h.maxDuration!==void 0&&(_.maxDuration=Math.round(h.maxDuration)),h.role!==void 0&&(_.role=$n(h.role)),h.token!==void 0&&(_.token=h.token?a.GuestAccessToken.toJSON(h.token):void 0),h.url!==void 0&&(_.url=h.url),_},fromPartial(h){var _,j,Et,dt,kt;const Kt=fo();return Kt.collectionId=(_=h.collectionId)!==null&&_!==void 0?_:"",Kt.projectId=(j=h.projectId)!==null&&j!==void 0?j:"",Kt.maxDuration=(Et=h.maxDuration)!==null&&Et!==void 0?Et:void 0,Kt.role=(dt=h.role)!==null&&dt!==void 0?dt:Xt.ROLE_UNSPECIFIED,Kt.token=h.token!==void 0&&h.token!==null?a.GuestAccessToken.fromPartial(h.token):void 0,Kt.url=(kt=h.url)!==null&&kt!==void 0?kt:void 0,Kt}};function po(){return{accessToken:"",url:void 0}}a.CreateGuestAccessTokenResponse={encode(h,_=b.Writer.create()){return h.accessToken!==""&&_.uint32(10).string(h.accessToken),h.url!==void 0&&_.uint32(18).string(h.url),_},decode(h,_){const j=h instanceof b.Reader?h:new b.Reader(h);let Et=_===void 0?j.len:j.pos+_;const dt=po();for(;j.pos<Et;){const kt=j.uint32();switch(kt>>>3){case 1:dt.accessToken=j.string();break;case 2:dt.url=j.string();break;default:j.skipType(kt&7);break}}return dt},fromJSON(h){return{accessToken:At(h.accessToken)?String(h.accessToken):"",url:At(h.url)?String(h.url):void 0}},toJSON(h){const _={};return h.accessToken!==void 0&&(_.accessToken=h.accessToken),h.url!==void 0&&(_.url=h.url),_},fromPartial(h){var _,j;const Et=po();return Et.accessToken=(_=h.accessToken)!==null&&_!==void 0?_:"",Et.url=(j=h.url)!==null&&j!==void 0?j:void 0,Et}};function ho(){return{collectionId:"",projectId:"",displayName:""}}a.CreateWebRtcAccessTokenRequest={encode(h,_=b.Writer.create()){return h.collectionId!==""&&_.uint32(10).string(h.collectionId),h.projectId!==""&&_.uint32(18).string(h.projectId),h.displayName!==""&&_.uint32(26).string(h.displayName),_},decode(h,_){const j=h instanceof b.Reader?h:new b.Reader(h);let Et=_===void 0?j.len:j.pos+_;const dt=ho();for(;j.pos<Et;){const kt=j.uint32();switch(kt>>>3){case 1:dt.collectionId=j.string();break;case 2:dt.projectId=j.string();break;case 3:dt.displayName=j.string();break;default:j.skipType(kt&7);break}}return dt},fromJSON(h){return{collectionId:At(h.collectionId)?String(h.collectionId):"",projectId:At(h.projectId)?String(h.projectId):"",displayName:At(h.displayName)?String(h.displayName):""}},toJSON(h){const _={};return h.collectionId!==void 0&&(_.collectionId=h.collectionId),h.projectId!==void 0&&(_.projectId=h.projectId),h.displayName!==void 0&&(_.displayName=h.displayName),_},fromPartial(h){var _,j,Et;const dt=ho();return dt.collectionId=(_=h.collectionId)!==null&&_!==void 0?_:"",dt.projectId=(j=h.projectId)!==null&&j!==void 0?j:"",dt.displayName=(Et=h.displayName)!==null&&Et!==void 0?Et:"",dt}};function mo(){return{webrtcAccess:void 0}}a.CreateWebRtcAccessTokenResponse={encode(h,_=b.Writer.create()){return h.webrtcAccess!==void 0&&a.WebRtcAccess.encode(h.webrtcAccess,_.uint32(18).fork()).ldelim(),_},decode(h,_){const j=h instanceof b.Reader?h:new b.Reader(h);let Et=_===void 0?j.len:j.pos+_;const dt=mo();for(;j.pos<Et;){const kt=j.uint32();switch(kt>>>3){case 2:dt.webrtcAccess=a.WebRtcAccess.decode(j,j.uint32());break;default:j.skipType(kt&7);break}}return dt},fromJSON(h){return{webrtcAccess:At(h.webrtcAccess)?a.WebRtcAccess.fromJSON(h.webrtcAccess):void 0}},toJSON(h){const _={};return h.webrtcAccess!==void 0&&(_.webrtcAccess=h.webrtcAccess?a.WebRtcAccess.toJSON(h.webrtcAccess):void 0),_},fromPartial(h){const _=mo();return _.webrtcAccess=h.webrtcAccess!==void 0&&h.webrtcAccess!==null?a.WebRtcAccess.fromPartial(h.webrtcAccess):void 0,_}};function vo(){return{}}a.RefreshAccessTokenRequest={encode(h,_=b.Writer.create()){return _},decode(h,_){const j=h instanceof b.Reader?h:new b.Reader(h);let Et=_===void 0?j.len:j.pos+_;const dt=vo();for(;j.pos<Et;){const kt=j.uint32();switch(kt>>>3){default:j.skipType(kt&7);break}}return dt},fromJSON(h){return{}},toJSON(h){return{}},fromPartial(h){return vo()}};function yo(){return{}}a.RefreshAccessTokenResponse={encode(h,_=b.Writer.create()){return _},decode(h,_){const j=h instanceof b.Reader?h:new b.Reader(h);let Et=_===void 0?j.len:j.pos+_;const dt=yo();for(;j.pos<Et;){const kt=j.uint32();switch(kt>>>3){default:j.skipType(kt&7);break}}return dt},fromJSON(h){return{}},toJSON(h){return{}},fromPartial(h){return yo()}};function So(){return{collectionId:"",projectId:"",code:"",url:"",autoDelete:void 0}}a.GuestCode={encode(h,_=b.Writer.create()){return h.collectionId!==""&&_.uint32(10).string(h.collectionId),h.projectId!==""&&_.uint32(18).string(h.projectId),h.code!==""&&_.uint32(26).string(h.code),h.url!==""&&_.uint32(34).string(h.url),h.autoDelete!==void 0&&k.Timestamp.encode(Fn(h.autoDelete),_.uint32(42).fork()).ldelim(),_},decode(h,_){const j=h instanceof b.Reader?h:new b.Reader(h);let Et=_===void 0?j.len:j.pos+_;const dt=So();for(;j.pos<Et;){const kt=j.uint32();switch(kt>>>3){case 1:dt.collectionId=j.string();break;case 2:dt.projectId=j.string();break;case 3:dt.code=j.string();break;case 4:dt.url=j.string();break;case 5:dt.autoDelete=Bn(k.Timestamp.decode(j,j.uint32()));break;default:j.skipType(kt&7);break}}return dt},fromJSON(h){return{collectionId:At(h.collectionId)?String(h.collectionId):"",projectId:At(h.projectId)?String(h.projectId):"",code:At(h.code)?String(h.code):"",url:At(h.url)?String(h.url):"",autoDelete:At(h.autoDelete)?String(h.autoDelete):void 0}},toJSON(h){const _={};return h.collectionId!==void 0&&(_.collectionId=h.collectionId),h.projectId!==void 0&&(_.projectId=h.projectId),h.code!==void 0&&(_.code=h.code),h.url!==void 0&&(_.url=h.url),h.autoDelete!==void 0&&(_.autoDelete=h.autoDelete),_},fromPartial(h){var _,j,Et,dt,kt;const Kt=So();return Kt.collectionId=(_=h.collectionId)!==null&&_!==void 0?_:"",Kt.projectId=(j=h.projectId)!==null&&j!==void 0?j:"",Kt.code=(Et=h.code)!==null&&Et!==void 0?Et:"",Kt.url=(dt=h.url)!==null&&dt!==void 0?dt:"",Kt.autoDelete=(kt=h.autoDelete)!==null&&kt!==void 0?kt:void 0,Kt}};function go(){return{serviceId:"",code:""}}a.GuestCodeRedirectRequest={encode(h,_=b.Writer.create()){return h.serviceId!==""&&_.uint32(10).string(h.serviceId),h.code!==""&&_.uint32(18).string(h.code),_},decode(h,_){const j=h instanceof b.Reader?h:new b.Reader(h);let Et=_===void 0?j.len:j.pos+_;const dt=go();for(;j.pos<Et;){const kt=j.uint32();switch(kt>>>3){case 1:dt.serviceId=j.string();break;case 2:dt.code=j.string();break;default:j.skipType(kt&7);break}}return dt},fromJSON(h){return{serviceId:At(h.serviceId)?String(h.serviceId):"",code:At(h.code)?String(h.code):""}},toJSON(h){const _={};return h.serviceId!==void 0&&(_.serviceId=h.serviceId),h.code!==void 0&&(_.code=h.code),_},fromPartial(h){var _,j;const Et=go();return Et.serviceId=(_=h.serviceId)!==null&&_!==void 0?_:"",Et.code=(j=h.code)!==null&&j!==void 0?j:"",Et}};function bo(){return{}}a.GuestCodeRedirectResponse={encode(h,_=b.Writer.create()){return _},decode(h,_){const j=h instanceof b.Reader?h:new b.Reader(h);let Et=_===void 0?j.len:j.pos+_;const dt=bo();for(;j.pos<Et;){const kt=j.uint32();switch(kt>>>3){default:j.skipType(kt&7);break}}return dt},fromJSON(h){return{}},toJSON(h){return{}},fromPartial(h){return bo()}};function _o(){return{serviceName:"",serviceUserId:""}}a.CreateDemoAccessTokenRequest={encode(h,_=b.Writer.create()){return h.serviceName!==""&&_.uint32(10).string(h.serviceName),h.serviceUserId!==""&&_.uint32(18).string(h.serviceUserId),_},decode(h,_){const j=h instanceof b.Reader?h:new b.Reader(h);let Et=_===void 0?j.len:j.pos+_;const dt=_o();for(;j.pos<Et;){const kt=j.uint32();switch(kt>>>3){case 1:dt.serviceName=j.string();break;case 2:dt.serviceUserId=j.string();break;default:j.skipType(kt&7);break}}return dt},fromJSON(h){return{serviceName:At(h.serviceName)?String(h.serviceName):"",serviceUserId:At(h.serviceUserId)?String(h.serviceUserId):""}},toJSON(h){const _={};return h.serviceName!==void 0&&(_.serviceName=h.serviceName),h.serviceUserId!==void 0&&(_.serviceUserId=h.serviceUserId),_},fromPartial(h){var _,j;const Et=_o();return Et.serviceName=(_=h.serviceName)!==null&&_!==void 0?_:"",Et.serviceUserId=(j=h.serviceUserId)!==null&&j!==void 0?j:"",Et}};function Eo(){return{accessToken:""}}a.CreateDemoAccessTokenResponse={encode(h,_=b.Writer.create()){return h.accessToken!==""&&_.uint32(10).string(h.accessToken),_},decode(h,_){const j=h instanceof b.Reader?h:new b.Reader(h);let Et=_===void 0?j.len:j.pos+_;const dt=Eo();for(;j.pos<Et;){const kt=j.uint32();switch(kt>>>3){case 1:dt.accessToken=j.string();break;default:j.skipType(kt&7);break}}return dt},fromJSON(h){return{accessToken:At(h.accessToken)?String(h.accessToken):""}},toJSON(h){const _={};return h.accessToken!==void 0&&(_.accessToken=h.accessToken),_},fromPartial(h){var _;const j=Eo();return j.accessToken=(_=h.accessToken)!==null&&_!==void 0?_:"",j}};function To(){return{alg:"",kty:"",use:"",kid:"",e:"",n:""}}a.JsonWebKey={encode(h,_=b.Writer.create()){return h.alg!==""&&_.uint32(10).string(h.alg),h.kty!==""&&_.uint32(18).string(h.kty),h.use!==""&&_.uint32(26).string(h.use),h.kid!==""&&_.uint32(34).string(h.kid),h.e!==""&&_.uint32(42).string(h.e),h.n!==""&&_.uint32(50).string(h.n),_},decode(h,_){const j=h instanceof b.Reader?h:new b.Reader(h);let Et=_===void 0?j.len:j.pos+_;const dt=To();for(;j.pos<Et;){const kt=j.uint32();switch(kt>>>3){case 1:dt.alg=j.string();break;case 2:dt.kty=j.string();break;case 3:dt.use=j.string();break;case 4:dt.kid=j.string();break;case 5:dt.e=j.string();break;case 6:dt.n=j.string();break;default:j.skipType(kt&7);break}}return dt},fromJSON(h){return{alg:At(h.alg)?String(h.alg):"",kty:At(h.kty)?String(h.kty):"",use:At(h.use)?String(h.use):"",kid:At(h.kid)?String(h.kid):"",e:At(h.e)?String(h.e):"",n:At(h.n)?String(h.n):""}},toJSON(h){const _={};return h.alg!==void 0&&(_.alg=h.alg),h.kty!==void 0&&(_.kty=h.kty),h.use!==void 0&&(_.use=h.use),h.kid!==void 0&&(_.kid=h.kid),h.e!==void 0&&(_.e=h.e),h.n!==void 0&&(_.n=h.n),_},fromPartial(h){var _,j,Et,dt,kt,Kt;const ln=To();return ln.alg=(_=h.alg)!==null&&_!==void 0?_:"",ln.kty=(j=h.kty)!==null&&j!==void 0?j:"",ln.use=(Et=h.use)!==null&&Et!==void 0?Et:"",ln.kid=(dt=h.kid)!==null&&dt!==void 0?dt:"",ln.e=(kt=h.e)!==null&&kt!==void 0?kt:"",ln.n=(Kt=h.n)!==null&&Kt!==void 0?Kt:"",ln}};function ko(){return{}}a.GetJsonWebKeySetRequest={encode(h,_=b.Writer.create()){return _},decode(h,_){const j=h instanceof b.Reader?h:new b.Reader(h);let Et=_===void 0?j.len:j.pos+_;const dt=ko();for(;j.pos<Et;){const kt=j.uint32();switch(kt>>>3){default:j.skipType(kt&7);break}}return dt},fromJSON(h){return{}},toJSON(h){return{}},fromPartial(h){return ko()}};function Io(){return{keys:[]}}a.GetJsonWebKeySetResponse={encode(h,_=b.Writer.create()){for(const j of h.keys)a.JsonWebKey.encode(j,_.uint32(10).fork()).ldelim();return _},decode(h,_){const j=h instanceof b.Reader?h:new b.Reader(h);let Et=_===void 0?j.len:j.pos+_;const dt=Io();for(;j.pos<Et;){const kt=j.uint32();switch(kt>>>3){case 1:dt.keys.push(a.JsonWebKey.decode(j,j.uint32()));break;default:j.skipType(kt&7);break}}return dt},fromJSON(h){return{keys:Array.isArray(h==null?void 0:h.keys)?h.keys.map(_=>a.JsonWebKey.fromJSON(_)):[]}},toJSON(h){const _={};return h.keys?_.keys=h.keys.map(j=>j?a.JsonWebKey.toJSON(j):void 0):_.keys=[],_},fromPartial(h){var _;const j=Io();return j.keys=((_=h.keys)===null||_===void 0?void 0:_.map(Et=>a.JsonWebKey.fromPartial(Et)))||[],j}};function Oo(){return{}}a.GetTestTokenRequest={encode(h,_=b.Writer.create()){return _},decode(h,_){const j=h instanceof b.Reader?h:new b.Reader(h);let Et=_===void 0?j.len:j.pos+_;const dt=Oo();for(;j.pos<Et;){const kt=j.uint32();switch(kt>>>3){default:j.skipType(kt&7);break}}return dt},fromJSON(h){return{}},toJSON(h){return{}},fromPartial(h){return Oo()}};function Ro(){return{accessToken:""}}a.GetTestTokenResponse={encode(h,_=b.Writer.create()){return h.accessToken!==""&&_.uint32(10).string(h.accessToken),_},decode(h,_){const j=h instanceof b.Reader?h:new b.Reader(h);let Et=_===void 0?j.len:j.pos+_;const dt=Ro();for(;j.pos<Et;){const kt=j.uint32();switch(kt>>>3){case 1:dt.accessToken=j.string();break;default:j.skipType(kt&7);break}}return dt},fromJSON(h){return{accessToken:At(h.accessToken)?String(h.accessToken):""}},toJSON(h){const _={};return h.accessToken!==void 0&&(_.accessToken=h.accessToken),_},fromPartial(h){var _;const j=Ro();return j.accessToken=(_=h.accessToken)!==null&&_!==void 0?_:"",j}};function wo(){return{collectionId:"",projectId:"",destinationId:"",destination:void 0}}a.DestinationCreateEvent={encode(h,_=b.Writer.create()){return h.collectionId!==""&&_.uint32(10).string(h.collectionId),h.projectId!==""&&_.uint32(18).string(h.projectId),h.destinationId!==""&&_.uint32(26).string(h.destinationId),h.destination!==void 0&&a.Destination.encode(h.destination,_.uint32(34).fork()).ldelim(),_},decode(h,_){const j=h instanceof b.Reader?h:new b.Reader(h);let Et=_===void 0?j.len:j.pos+_;const dt=wo();for(;j.pos<Et;){const kt=j.uint32();switch(kt>>>3){case 1:dt.collectionId=j.string();break;case 2:dt.projectId=j.string();break;case 3:dt.destinationId=j.string();break;case 4:dt.destination=a.Destination.decode(j,j.uint32());break;default:j.skipType(kt&7);break}}return dt},fromJSON(h){return{collectionId:At(h.collectionId)?String(h.collectionId):"",projectId:At(h.projectId)?String(h.projectId):"",destinationId:At(h.destinationId)?String(h.destinationId):"",destination:At(h.destination)?a.Destination.fromJSON(h.destination):void 0}},toJSON(h){const _={};return h.collectionId!==void 0&&(_.collectionId=h.collectionId),h.projectId!==void 0&&(_.projectId=h.projectId),h.destinationId!==void 0&&(_.destinationId=h.destinationId),h.destination!==void 0&&(_.destination=h.destination?a.Destination.toJSON(h.destination):void 0),_},fromPartial(h){var _,j,Et;const dt=wo();return dt.collectionId=(_=h.collectionId)!==null&&_!==void 0?_:"",dt.projectId=(j=h.projectId)!==null&&j!==void 0?j:"",dt.destinationId=(Et=h.destinationId)!==null&&Et!==void 0?Et:"",dt.destination=h.destination!==void 0&&h.destination!==null?a.Destination.fromPartial(h.destination):void 0,dt}};function Co(){return{collectionId:"",projectId:"",destinationId:""}}a.DestinationDeleteEvent={encode(h,_=b.Writer.create()){return h.collectionId!==""&&_.uint32(10).string(h.collectionId),h.projectId!==""&&_.uint32(18).string(h.projectId),h.destinationId!==""&&_.uint32(26).string(h.destinationId),_},decode(h,_){const j=h instanceof b.Reader?h:new b.Reader(h);let Et=_===void 0?j.len:j.pos+_;const dt=Co();for(;j.pos<Et;){const kt=j.uint32();switch(kt>>>3){case 1:dt.collectionId=j.string();break;case 2:dt.projectId=j.string();break;case 3:dt.destinationId=j.string();break;default:j.skipType(kt&7);break}}return dt},fromJSON(h){return{collectionId:At(h.collectionId)?String(h.collectionId):"",projectId:At(h.projectId)?String(h.projectId):"",destinationId:At(h.destinationId)?String(h.destinationId):""}},toJSON(h){const _={};return h.collectionId!==void 0&&(_.collectionId=h.collectionId),h.projectId!==void 0&&(_.projectId=h.projectId),h.destinationId!==void 0&&(_.destinationId=h.destinationId),_},fromPartial(h){var _,j,Et;const dt=Co();return dt.collectionId=(_=h.collectionId)!==null&&_!==void 0?_:"",dt.projectId=(j=h.projectId)!==null&&j!==void 0?j:"",dt.destinationId=(Et=h.destinationId)!==null&&Et!==void 0?Et:"",dt}};function Po(){return{collectionId:"",projectId:"",destinationId:"",updateMask:[],destination:void 0}}a.DestinationUpdateEvent={encode(h,_=b.Writer.create()){h.collectionId!==""&&_.uint32(10).string(h.collectionId),h.projectId!==""&&_.uint32(18).string(h.projectId),h.destinationId!==""&&_.uint32(26).string(h.destinationId);for(const j of h.updateMask)_.uint32(34).string(j);return h.destination!==void 0&&a.Destination.encode(h.destination,_.uint32(42).fork()).ldelim(),_},decode(h,_){const j=h instanceof b.Reader?h:new b.Reader(h);let Et=_===void 0?j.len:j.pos+_;const dt=Po();for(;j.pos<Et;){const kt=j.uint32();switch(kt>>>3){case 1:dt.collectionId=j.string();break;case 2:dt.projectId=j.string();break;case 3:dt.destinationId=j.string();break;case 4:dt.updateMask.push(j.string());break;case 5:dt.destination=a.Destination.decode(j,j.uint32());break;default:j.skipType(kt&7);break}}return dt},fromJSON(h){return{collectionId:At(h.collectionId)?String(h.collectionId):"",projectId:At(h.projectId)?String(h.projectId):"",destinationId:At(h.destinationId)?String(h.destinationId):"",updateMask:Array.isArray(h==null?void 0:h.updateMask)?h.updateMask.map(_=>String(_)):[],destination:At(h.destination)?a.Destination.fromJSON(h.destination):void 0}},toJSON(h){const _={};return h.collectionId!==void 0&&(_.collectionId=h.collectionId),h.projectId!==void 0&&(_.projectId=h.projectId),h.destinationId!==void 0&&(_.destinationId=h.destinationId),h.updateMask?_.updateMask=h.updateMask.map(j=>j):_.updateMask=[],h.destination!==void 0&&(_.destination=h.destination?a.Destination.toJSON(h.destination):void 0),_},fromPartial(h){var _,j,Et,dt;const kt=Po();return kt.collectionId=(_=h.collectionId)!==null&&_!==void 0?_:"",kt.projectId=(j=h.projectId)!==null&&j!==void 0?j:"",kt.destinationId=(Et=h.destinationId)!==null&&Et!==void 0?Et:"",kt.updateMask=((dt=h.updateMask)===null||dt===void 0?void 0:dt.map(Kt=>Kt))||[],kt.destination=h.destination!==void 0&&h.destination!==null?a.Destination.fromPartial(h.destination):void 0,kt}};function No(){return{collectionId:"",projectId:"",destinationId:"",connect:void 0}}a.DestinationStateEvent={encode(h,_=b.Writer.create()){return h.collectionId!==""&&_.uint32(10).string(h.collectionId),h.projectId!==""&&_.uint32(18).string(h.projectId),h.destinationId!==""&&_.uint32(26).string(h.destinationId),h.connect!==void 0&&_.uint32(32).int32(Mn(h.connect)),_},decode(h,_){const j=h instanceof b.Reader?h:new b.Reader(h);let Et=_===void 0?j.len:j.pos+_;const dt=No();for(;j.pos<Et;){const kt=j.uint32();switch(kt>>>3){case 1:dt.collectionId=j.string();break;case 2:dt.projectId=j.string();break;case 3:dt.destinationId=j.string();break;case 4:dt.connect=Dn(j.int32());break;default:j.skipType(kt&7);break}}return dt},fromJSON(h){return{collectionId:At(h.collectionId)?String(h.collectionId):"",projectId:At(h.projectId)?String(h.projectId):"",destinationId:At(h.destinationId)?String(h.destinationId):"",connect:At(h.connect)?Dn(h.connect):void 0}},toJSON(h){const _={};return h.collectionId!==void 0&&(_.collectionId=h.collectionId),h.projectId!==void 0&&(_.projectId=h.projectId),h.destinationId!==void 0&&(_.destinationId=h.destinationId),h.connect!==void 0&&(_.connect=h.connect!==void 0?cn(h.connect):void 0),_},fromPartial(h){var _,j,Et,dt;const kt=No();return kt.collectionId=(_=h.collectionId)!==null&&_!==void 0?_:"",kt.projectId=(j=h.projectId)!==null&&j!==void 0?j:"",kt.destinationId=(Et=h.destinationId)!==null&&Et!==void 0?Et:"",kt.connect=(dt=h.connect)!==null&&dt!==void 0?dt:void 0,kt}};function Ao(){return{collectionId:"",projectId:"",project:void 0}}a.ProjectCreateEvent={encode(h,_=b.Writer.create()){return h.collectionId!==""&&_.uint32(10).string(h.collectionId),h.projectId!==""&&_.uint32(18).string(h.projectId),h.project!==void 0&&a.Project.encode(h.project,_.uint32(26).fork()).ldelim(),_},decode(h,_){const j=h instanceof b.Reader?h:new b.Reader(h);let Et=_===void 0?j.len:j.pos+_;const dt=Ao();for(;j.pos<Et;){const kt=j.uint32();switch(kt>>>3){case 1:dt.collectionId=j.string();break;case 2:dt.projectId=j.string();break;case 3:dt.project=a.Project.decode(j,j.uint32());break;default:j.skipType(kt&7);break}}return dt},fromJSON(h){return{collectionId:At(h.collectionId)?String(h.collectionId):"",projectId:At(h.projectId)?String(h.projectId):"",project:At(h.project)?a.Project.fromJSON(h.project):void 0}},toJSON(h){const _={};return h.collectionId!==void 0&&(_.collectionId=h.collectionId),h.projectId!==void 0&&(_.projectId=h.projectId),h.project!==void 0&&(_.project=h.project?a.Project.toJSON(h.project):void 0),_},fromPartial(h){var _,j;const Et=Ao();return Et.collectionId=(_=h.collectionId)!==null&&_!==void 0?_:"",Et.projectId=(j=h.projectId)!==null&&j!==void 0?j:"",Et.project=h.project!==void 0&&h.project!==null?a.Project.fromPartial(h.project):void 0,Et}};function $o(){return{collectionId:"",projectId:""}}a.ProjectDeleteEvent={encode(h,_=b.Writer.create()){return h.collectionId!==""&&_.uint32(10).string(h.collectionId),h.projectId!==""&&_.uint32(18).string(h.projectId),_},decode(h,_){const j=h instanceof b.Reader?h:new b.Reader(h);let Et=_===void 0?j.len:j.pos+_;const dt=$o();for(;j.pos<Et;){const kt=j.uint32();switch(kt>>>3){case 1:dt.collectionId=j.string();break;case 2:dt.projectId=j.string();break;default:j.skipType(kt&7);break}}return dt},fromJSON(h){return{collectionId:At(h.collectionId)?String(h.collectionId):"",projectId:At(h.projectId)?String(h.projectId):""}},toJSON(h){const _={};return h.collectionId!==void 0&&(_.collectionId=h.collectionId),h.projectId!==void 0&&(_.projectId=h.projectId),_},fromPartial(h){var _,j;const Et=$o();return Et.collectionId=(_=h.collectionId)!==null&&_!==void 0?_:"",Et.projectId=(j=h.projectId)!==null&&j!==void 0?j:"",Et}};function Lo(){return{collectionId:"",projectId:"",updateMask:[],project:void 0}}a.ProjectUpdateEvent={encode(h,_=b.Writer.create()){h.collectionId!==""&&_.uint32(10).string(h.collectionId),h.projectId!==""&&_.uint32(18).string(h.projectId);for(const j of h.updateMask)_.uint32(26).string(j);return h.project!==void 0&&a.Project.encode(h.project,_.uint32(34).fork()).ldelim(),_},decode(h,_){const j=h instanceof b.Reader?h:new b.Reader(h);let Et=_===void 0?j.len:j.pos+_;const dt=Lo();for(;j.pos<Et;){const kt=j.uint32();switch(kt>>>3){case 1:dt.collectionId=j.string();break;case 2:dt.projectId=j.string();break;case 3:dt.updateMask.push(j.string());break;case 4:dt.project=a.Project.decode(j,j.uint32());break;default:j.skipType(kt&7);break}}return dt},fromJSON(h){return{collectionId:At(h.collectionId)?String(h.collectionId):"",projectId:At(h.projectId)?String(h.projectId):"",updateMask:Array.isArray(h==null?void 0:h.updateMask)?h.updateMask.map(_=>String(_)):[],project:At(h.project)?a.Project.fromJSON(h.project):void 0}},toJSON(h){const _={};return h.collectionId!==void 0&&(_.collectionId=h.collectionId),h.projectId!==void 0&&(_.projectId=h.projectId),h.updateMask?_.updateMask=h.updateMask.map(j=>j):_.updateMask=[],h.project!==void 0&&(_.project=h.project?a.Project.toJSON(h.project):void 0),_},fromPartial(h){var _,j,Et;const dt=Lo();return dt.collectionId=(_=h.collectionId)!==null&&_!==void 0?_:"",dt.projectId=(j=h.projectId)!==null&&j!==void 0?j:"",dt.updateMask=((Et=h.updateMask)===null||Et===void 0?void 0:Et.map(kt=>kt))||[],dt.project=h.project!==void 0&&h.project!==null?a.Project.fromPartial(h.project):void 0,dt}};function Do(){return{collectionId:"",projectId:"",broadcastId:"",phase:void 0,error:void 0}}a.ProjectBroadcastStateEvent={encode(h,_=b.Writer.create()){return h.collectionId!==""&&_.uint32(10).string(h.collectionId),h.projectId!==""&&_.uint32(18).string(h.projectId),h.broadcastId!==""&&_.uint32(26).string(h.broadcastId),h.phase!==void 0&&_.uint32(32).int32(Gt(h.phase)),h.error!==void 0&&_.uint32(40).int32(fn(h.error)),_},decode(h,_){const j=h instanceof b.Reader?h:new b.Reader(h);let Et=_===void 0?j.len:j.pos+_;const dt=Do();for(;j.pos<Et;){const kt=j.uint32();switch(kt>>>3){case 1:dt.collectionId=j.string();break;case 2:dt.projectId=j.string();break;case 3:dt.broadcastId=j.string();break;case 4:dt.phase=yt(j.int32());break;case 5:dt.error=un(j.int32());break;default:j.skipType(kt&7);break}}return dt},fromJSON(h){return{collectionId:At(h.collectionId)?String(h.collectionId):"",projectId:At(h.projectId)?String(h.projectId):"",broadcastId:At(h.broadcastId)?String(h.broadcastId):"",phase:At(h.phase)?yt(h.phase):void 0,error:At(h.error)?un(h.error):void 0}},toJSON(h){const _={};return h.collectionId!==void 0&&(_.collectionId=h.collectionId),h.projectId!==void 0&&(_.projectId=h.projectId),h.broadcastId!==void 0&&(_.broadcastId=h.broadcastId),h.phase!==void 0&&(_.phase=h.phase!==void 0?Dt(h.phase):void 0),h.error!==void 0&&(_.error=h.error!==void 0?nn(h.error):void 0),_},fromPartial(h){var _,j,Et,dt,kt;const Kt=Do();return Kt.collectionId=(_=h.collectionId)!==null&&_!==void 0?_:"",Kt.projectId=(j=h.projectId)!==null&&j!==void 0?j:"",Kt.broadcastId=(Et=h.broadcastId)!==null&&Et!==void 0?Et:"",Kt.phase=(dt=h.phase)!==null&&dt!==void 0?dt:void 0,Kt.error=(kt=h.error)!==null&&kt!==void 0?kt:void 0,Kt}};function Mo(){return{collectionId:"",collection:void 0}}a.CollectionCreateEvent={encode(h,_=b.Writer.create()){return h.collectionId!==""&&_.uint32(10).string(h.collectionId),h.collection!==void 0&&a.Collection.encode(h.collection,_.uint32(18).fork()).ldelim(),_},decode(h,_){const j=h instanceof b.Reader?h:new b.Reader(h);let Et=_===void 0?j.len:j.pos+_;const dt=Mo();for(;j.pos<Et;){const kt=j.uint32();switch(kt>>>3){case 1:dt.collectionId=j.string();break;case 2:dt.collection=a.Collection.decode(j,j.uint32());break;default:j.skipType(kt&7);break}}return dt},fromJSON(h){return{collectionId:At(h.collectionId)?String(h.collectionId):"",collection:At(h.collection)?a.Collection.fromJSON(h.collection):void 0}},toJSON(h){const _={};return h.collectionId!==void 0&&(_.collectionId=h.collectionId),h.collection!==void 0&&(_.collection=h.collection?a.Collection.toJSON(h.collection):void 0),_},fromPartial(h){var _;const j=Mo();return j.collectionId=(_=h.collectionId)!==null&&_!==void 0?_:"",j.collection=h.collection!==void 0&&h.collection!==null?a.Collection.fromPartial(h.collection):void 0,j}};function Uo(){return{collectionId:""}}a.CollectionDeleteEvent={encode(h,_=b.Writer.create()){return h.collectionId!==""&&_.uint32(10).string(h.collectionId),_},decode(h,_){const j=h instanceof b.Reader?h:new b.Reader(h);let Et=_===void 0?j.len:j.pos+_;const dt=Uo();for(;j.pos<Et;){const kt=j.uint32();switch(kt>>>3){case 1:dt.collectionId=j.string();break;default:j.skipType(kt&7);break}}return dt},fromJSON(h){return{collectionId:At(h.collectionId)?String(h.collectionId):""}},toJSON(h){const _={};return h.collectionId!==void 0&&(_.collectionId=h.collectionId),_},fromPartial(h){var _;const j=Uo();return j.collectionId=(_=h.collectionId)!==null&&_!==void 0?_:"",j}};function Vo(){return{collectionId:"",updateMask:[],collection:void 0}}a.CollectionUpdateEvent={encode(h,_=b.Writer.create()){h.collectionId!==""&&_.uint32(10).string(h.collectionId);for(const j of h.updateMask)_.uint32(18).string(j);return h.collection!==void 0&&a.Collection.encode(h.collection,_.uint32(26).fork()).ldelim(),_},decode(h,_){const j=h instanceof b.Reader?h:new b.Reader(h);let Et=_===void 0?j.len:j.pos+_;const dt=Vo();for(;j.pos<Et;){const kt=j.uint32();switch(kt>>>3){case 1:dt.collectionId=j.string();break;case 2:dt.updateMask.push(j.string());break;case 3:dt.collection=a.Collection.decode(j,j.uint32());break;default:j.skipType(kt&7);break}}return dt},fromJSON(h){return{collectionId:At(h.collectionId)?String(h.collectionId):"",updateMask:Array.isArray(h==null?void 0:h.updateMask)?h.updateMask.map(_=>String(_)):[],collection:At(h.collection)?a.Collection.fromJSON(h.collection):void 0}},toJSON(h){const _={};return h.collectionId!==void 0&&(_.collectionId=h.collectionId),h.updateMask?_.updateMask=h.updateMask.map(j=>j):_.updateMask=[],h.collection!==void 0&&(_.collection=h.collection?a.Collection.toJSON(h.collection):void 0),_},fromPartial(h){var _,j;const Et=Vo();return Et.collectionId=(_=h.collectionId)!==null&&_!==void 0?_:"",Et.updateMask=((j=h.updateMask)===null||j===void 0?void 0:j.map(dt=>dt))||[],Et.collection=h.collection!==void 0&&h.collection!==null?a.Collection.fromPartial(h.collection):void 0,Et}};function Fo(){return{collectionId:"",sourceId:"",source:void 0}}a.SourceCreateEvent={encode(h,_=b.Writer.create()){return h.collectionId!==""&&_.uint32(10).string(h.collectionId),h.sourceId!==""&&_.uint32(18).string(h.sourceId),h.source!==void 0&&a.Source.encode(h.source,_.uint32(26).fork()).ldelim(),_},decode(h,_){const j=h instanceof b.Reader?h:new b.Reader(h);let Et=_===void 0?j.len:j.pos+_;const dt=Fo();for(;j.pos<Et;){const kt=j.uint32();switch(kt>>>3){case 1:dt.collectionId=j.string();break;case 2:dt.sourceId=j.string();break;case 3:dt.source=a.Source.decode(j,j.uint32());break;default:j.skipType(kt&7);break}}return dt},fromJSON(h){return{collectionId:At(h.collectionId)?String(h.collectionId):"",sourceId:At(h.sourceId)?String(h.sourceId):"",source:At(h.source)?a.Source.fromJSON(h.source):void 0}},toJSON(h){const _={};return h.collectionId!==void 0&&(_.collectionId=h.collectionId),h.sourceId!==void 0&&(_.sourceId=h.sourceId),h.source!==void 0&&(_.source=h.source?a.Source.toJSON(h.source):void 0),_},fromPartial(h){var _,j;const Et=Fo();return Et.collectionId=(_=h.collectionId)!==null&&_!==void 0?_:"",Et.sourceId=(j=h.sourceId)!==null&&j!==void 0?j:"",Et.source=h.source!==void 0&&h.source!==null?a.Source.fromPartial(h.source):void 0,Et}};function Bo(){return{collectionId:"",sourceId:""}}a.SourceDeleteEvent={encode(h,_=b.Writer.create()){return h.collectionId!==""&&_.uint32(10).string(h.collectionId),h.sourceId!==""&&_.uint32(18).string(h.sourceId),_},decode(h,_){const j=h instanceof b.Reader?h:new b.Reader(h);let Et=_===void 0?j.len:j.pos+_;const dt=Bo();for(;j.pos<Et;){const kt=j.uint32();switch(kt>>>3){case 1:dt.collectionId=j.string();break;case 2:dt.sourceId=j.string();break;default:j.skipType(kt&7);break}}return dt},fromJSON(h){return{collectionId:At(h.collectionId)?String(h.collectionId):"",sourceId:At(h.sourceId)?String(h.sourceId):""}},toJSON(h){const _={};return h.collectionId!==void 0&&(_.collectionId=h.collectionId),h.sourceId!==void 0&&(_.sourceId=h.sourceId),_},fromPartial(h){var _,j;const Et=Bo();return Et.collectionId=(_=h.collectionId)!==null&&_!==void 0?_:"",Et.sourceId=(j=h.sourceId)!==null&&j!==void 0?j:"",Et}};function Jo(){return{collectionId:"",sourceId:"",updateMask:[],source:void 0}}a.SourceUpdateEvent={encode(h,_=b.Writer.create()){h.collectionId!==""&&_.uint32(10).string(h.collectionId),h.sourceId!==""&&_.uint32(18).string(h.sourceId);for(const j of h.updateMask)_.uint32(26).string(j);return h.source!==void 0&&a.Source.encode(h.source,_.uint32(34).fork()).ldelim(),_},decode(h,_){const j=h instanceof b.Reader?h:new b.Reader(h);let Et=_===void 0?j.len:j.pos+_;const dt=Jo();for(;j.pos<Et;){const kt=j.uint32();switch(kt>>>3){case 1:dt.collectionId=j.string();break;case 2:dt.sourceId=j.string();break;case 3:dt.updateMask.push(j.string());break;case 4:dt.source=a.Source.decode(j,j.uint32());break;default:j.skipType(kt&7);break}}return dt},fromJSON(h){return{collectionId:At(h.collectionId)?String(h.collectionId):"",sourceId:At(h.sourceId)?String(h.sourceId):"",updateMask:Array.isArray(h==null?void 0:h.updateMask)?h.updateMask.map(_=>String(_)):[],source:At(h.source)?a.Source.fromJSON(h.source):void 0}},toJSON(h){const _={};return h.collectionId!==void 0&&(_.collectionId=h.collectionId),h.sourceId!==void 0&&(_.sourceId=h.sourceId),h.updateMask?_.updateMask=h.updateMask.map(j=>j):_.updateMask=[],h.source!==void 0&&(_.source=h.source?a.Source.toJSON(h.source):void 0),_},fromPartial(h){var _,j,Et;const dt=Jo();return dt.collectionId=(_=h.collectionId)!==null&&_!==void 0?_:"",dt.sourceId=(j=h.sourceId)!==null&&j!==void 0?j:"",dt.updateMask=((Et=h.updateMask)===null||Et===void 0?void 0:Et.map(kt=>kt))||[],dt.source=h.source!==void 0&&h.source!==null?a.Source.fromPartial(h.source):void 0,dt}};function qo(){return{collectionId:"",sourceId:"",projectId:"",source:void 0}}a.SourceAddEvent={encode(h,_=b.Writer.create()){return h.collectionId!==""&&_.uint32(10).string(h.collectionId),h.sourceId!==""&&_.uint32(18).string(h.sourceId),h.projectId!==""&&_.uint32(26).string(h.projectId),h.source!==void 0&&a.Source.encode(h.source,_.uint32(34).fork()).ldelim(),_},decode(h,_){const j=h instanceof b.Reader?h:new b.Reader(h);let Et=_===void 0?j.len:j.pos+_;const dt=qo();for(;j.pos<Et;){const kt=j.uint32();switch(kt>>>3){case 1:dt.collectionId=j.string();break;case 2:dt.sourceId=j.string();break;case 3:dt.projectId=j.string();break;case 4:dt.source=a.Source.decode(j,j.uint32());break;default:j.skipType(kt&7);break}}return dt},fromJSON(h){return{collectionId:At(h.collectionId)?String(h.collectionId):"",sourceId:At(h.sourceId)?String(h.sourceId):"",projectId:At(h.projectId)?String(h.projectId):"",source:At(h.source)?a.Source.fromJSON(h.source):void 0}},toJSON(h){const _={};return h.collectionId!==void 0&&(_.collectionId=h.collectionId),h.sourceId!==void 0&&(_.sourceId=h.sourceId),h.projectId!==void 0&&(_.projectId=h.projectId),h.source!==void 0&&(_.source=h.source?a.Source.toJSON(h.source):void 0),_},fromPartial(h){var _,j,Et;const dt=qo();return dt.collectionId=(_=h.collectionId)!==null&&_!==void 0?_:"",dt.sourceId=(j=h.sourceId)!==null&&j!==void 0?j:"",dt.projectId=(Et=h.projectId)!==null&&Et!==void 0?Et:"",dt.source=h.source!==void 0&&h.source!==null?a.Source.fromPartial(h.source):void 0,dt}};function Go(){return{collectionId:"",sourceId:"",projectId:""}}a.SourceRemoveEvent={encode(h,_=b.Writer.create()){return h.collectionId!==""&&_.uint32(10).string(h.collectionId),h.sourceId!==""&&_.uint32(18).string(h.sourceId),h.projectId!==""&&_.uint32(26).string(h.projectId),_},decode(h,_){const j=h instanceof b.Reader?h:new b.Reader(h);let Et=_===void 0?j.len:j.pos+_;const dt=Go();for(;j.pos<Et;){const kt=j.uint32();switch(kt>>>3){case 1:dt.collectionId=j.string();break;case 2:dt.sourceId=j.string();break;case 3:dt.projectId=j.string();break;default:j.skipType(kt&7);break}}return dt},fromJSON(h){return{collectionId:At(h.collectionId)?String(h.collectionId):"",sourceId:At(h.sourceId)?String(h.sourceId):"",projectId:At(h.projectId)?String(h.projectId):""}},toJSON(h){const _={};return h.collectionId!==void 0&&(_.collectionId=h.collectionId),h.sourceId!==void 0&&(_.sourceId=h.sourceId),h.projectId!==void 0&&(_.projectId=h.projectId),_},fromPartial(h){var _,j,Et;const dt=Go();return dt.collectionId=(_=h.collectionId)!==null&&_!==void 0?_:"",dt.sourceId=(j=h.sourceId)!==null&&j!==void 0?j:"",dt.projectId=(Et=h.projectId)!==null&&Et!==void 0?Et:"",dt}};function Wo(){return{create:void 0,update:void 0,delete:void 0}}a.CollectionEvent={encode(h,_=b.Writer.create()){return h.create!==void 0&&a.CollectionCreateEvent.encode(h.create,_.uint32(10).fork()).ldelim(),h.update!==void 0&&a.CollectionUpdateEvent.encode(h.update,_.uint32(18).fork()).ldelim(),h.delete!==void 0&&a.CollectionDeleteEvent.encode(h.delete,_.uint32(26).fork()).ldelim(),_},decode(h,_){const j=h instanceof b.Reader?h:new b.Reader(h);let Et=_===void 0?j.len:j.pos+_;const dt=Wo();for(;j.pos<Et;){const kt=j.uint32();switch(kt>>>3){case 1:dt.create=a.CollectionCreateEvent.decode(j,j.uint32());break;case 2:dt.update=a.CollectionUpdateEvent.decode(j,j.uint32());break;case 3:dt.delete=a.CollectionDeleteEvent.decode(j,j.uint32());break;default:j.skipType(kt&7);break}}return dt},fromJSON(h){return{create:At(h.create)?a.CollectionCreateEvent.fromJSON(h.create):void 0,update:At(h.update)?a.CollectionUpdateEvent.fromJSON(h.update):void 0,delete:At(h.delete)?a.CollectionDeleteEvent.fromJSON(h.delete):void 0}},toJSON(h){const _={};return h.create!==void 0&&(_.create=h.create?a.CollectionCreateEvent.toJSON(h.create):void 0),h.update!==void 0&&(_.update=h.update?a.CollectionUpdateEvent.toJSON(h.update):void 0),h.delete!==void 0&&(_.delete=h.delete?a.CollectionDeleteEvent.toJSON(h.delete):void 0),_},fromPartial(h){const _=Wo();return _.create=h.create!==void 0&&h.create!==null?a.CollectionCreateEvent.fromPartial(h.create):void 0,_.update=h.update!==void 0&&h.update!==null?a.CollectionUpdateEvent.fromPartial(h.update):void 0,_.delete=h.delete!==void 0&&h.delete!==null?a.CollectionDeleteEvent.fromPartial(h.delete):void 0,_}};function Ho(){return{create:void 0,update:void 0,delete:void 0,state:void 0}}a.DestinationEvent={encode(h,_=b.Writer.create()){return h.create!==void 0&&a.DestinationCreateEvent.encode(h.create,_.uint32(10).fork()).ldelim(),h.update!==void 0&&a.DestinationUpdateEvent.encode(h.update,_.uint32(18).fork()).ldelim(),h.delete!==void 0&&a.DestinationDeleteEvent.encode(h.delete,_.uint32(26).fork()).ldelim(),h.state!==void 0&&a.DestinationStateEvent.encode(h.state,_.uint32(34).fork()).ldelim(),_},decode(h,_){const j=h instanceof b.Reader?h:new b.Reader(h);let Et=_===void 0?j.len:j.pos+_;const dt=Ho();for(;j.pos<Et;){const kt=j.uint32();switch(kt>>>3){case 1:dt.create=a.DestinationCreateEvent.decode(j,j.uint32());break;case 2:dt.update=a.DestinationUpdateEvent.decode(j,j.uint32());break;case 3:dt.delete=a.DestinationDeleteEvent.decode(j,j.uint32());break;case 4:dt.state=a.DestinationStateEvent.decode(j,j.uint32());break;default:j.skipType(kt&7);break}}return dt},fromJSON(h){return{create:At(h.create)?a.DestinationCreateEvent.fromJSON(h.create):void 0,update:At(h.update)?a.DestinationUpdateEvent.fromJSON(h.update):void 0,delete:At(h.delete)?a.DestinationDeleteEvent.fromJSON(h.delete):void 0,state:At(h.state)?a.DestinationStateEvent.fromJSON(h.state):void 0}},toJSON(h){const _={};return h.create!==void 0&&(_.create=h.create?a.DestinationCreateEvent.toJSON(h.create):void 0),h.update!==void 0&&(_.update=h.update?a.DestinationUpdateEvent.toJSON(h.update):void 0),h.delete!==void 0&&(_.delete=h.delete?a.DestinationDeleteEvent.toJSON(h.delete):void 0),h.state!==void 0&&(_.state=h.state?a.DestinationStateEvent.toJSON(h.state):void 0),_},fromPartial(h){const _=Ho();return _.create=h.create!==void 0&&h.create!==null?a.DestinationCreateEvent.fromPartial(h.create):void 0,_.update=h.update!==void 0&&h.update!==null?a.DestinationUpdateEvent.fromPartial(h.update):void 0,_.delete=h.delete!==void 0&&h.delete!==null?a.DestinationDeleteEvent.fromPartial(h.delete):void 0,_.state=h.state!==void 0&&h.state!==null?a.DestinationStateEvent.fromPartial(h.state):void 0,_}};function zo(){return{create:void 0,update:void 0,delete:void 0,state:void 0}}a.ProjectEvent={encode(h,_=b.Writer.create()){return h.create!==void 0&&a.ProjectCreateEvent.encode(h.create,_.uint32(10).fork()).ldelim(),h.update!==void 0&&a.ProjectUpdateEvent.encode(h.update,_.uint32(18).fork()).ldelim(),h.delete!==void 0&&a.ProjectDeleteEvent.encode(h.delete,_.uint32(26).fork()).ldelim(),h.state!==void 0&&a.ProjectBroadcastStateEvent.encode(h.state,_.uint32(34).fork()).ldelim(),_},decode(h,_){const j=h instanceof b.Reader?h:new b.Reader(h);let Et=_===void 0?j.len:j.pos+_;const dt=zo();for(;j.pos<Et;){const kt=j.uint32();switch(kt>>>3){case 1:dt.create=a.ProjectCreateEvent.decode(j,j.uint32());break;case 2:dt.update=a.ProjectUpdateEvent.decode(j,j.uint32());break;case 3:dt.delete=a.ProjectDeleteEvent.decode(j,j.uint32());break;case 4:dt.state=a.ProjectBroadcastStateEvent.decode(j,j.uint32());break;default:j.skipType(kt&7);break}}return dt},fromJSON(h){return{create:At(h.create)?a.ProjectCreateEvent.fromJSON(h.create):void 0,update:At(h.update)?a.ProjectUpdateEvent.fromJSON(h.update):void 0,delete:At(h.delete)?a.ProjectDeleteEvent.fromJSON(h.delete):void 0,state:At(h.state)?a.ProjectBroadcastStateEvent.fromJSON(h.state):void 0}},toJSON(h){const _={};return h.create!==void 0&&(_.create=h.create?a.ProjectCreateEvent.toJSON(h.create):void 0),h.update!==void 0&&(_.update=h.update?a.ProjectUpdateEvent.toJSON(h.update):void 0),h.delete!==void 0&&(_.delete=h.delete?a.ProjectDeleteEvent.toJSON(h.delete):void 0),h.state!==void 0&&(_.state=h.state?a.ProjectBroadcastStateEvent.toJSON(h.state):void 0),_},fromPartial(h){const _=zo();return _.create=h.create!==void 0&&h.create!==null?a.ProjectCreateEvent.fromPartial(h.create):void 0,_.update=h.update!==void 0&&h.update!==null?a.ProjectUpdateEvent.fromPartial(h.update):void 0,_.delete=h.delete!==void 0&&h.delete!==null?a.ProjectDeleteEvent.fromPartial(h.delete):void 0,_.state=h.state!==void 0&&h.state!==null?a.ProjectBroadcastStateEvent.fromPartial(h.state):void 0,_}};function xo(){return{create:void 0,update:void 0,delete:void 0,add:void 0,remove:void 0}}a.SourceEvent={encode(h,_=b.Writer.create()){return h.create!==void 0&&a.SourceCreateEvent.encode(h.create,_.uint32(10).fork()).ldelim(),h.update!==void 0&&a.SourceUpdateEvent.encode(h.update,_.uint32(18).fork()).ldelim(),h.delete!==void 0&&a.SourceDeleteEvent.encode(h.delete,_.uint32(26).fork()).ldelim(),h.add!==void 0&&a.SourceAddEvent.encode(h.add,_.uint32(34).fork()).ldelim(),h.remove!==void 0&&a.SourceDeleteEvent.encode(h.remove,_.uint32(42).fork()).ldelim(),_},decode(h,_){const j=h instanceof b.Reader?h:new b.Reader(h);let Et=_===void 0?j.len:j.pos+_;const dt=xo();for(;j.pos<Et;){const kt=j.uint32();switch(kt>>>3){case 1:dt.create=a.SourceCreateEvent.decode(j,j.uint32());break;case 2:dt.update=a.SourceUpdateEvent.decode(j,j.uint32());break;case 3:dt.delete=a.SourceDeleteEvent.decode(j,j.uint32());break;case 4:dt.add=a.SourceAddEvent.decode(j,j.uint32());break;case 5:dt.remove=a.SourceDeleteEvent.decode(j,j.uint32());break;default:j.skipType(kt&7);break}}return dt},fromJSON(h){return{create:At(h.create)?a.SourceCreateEvent.fromJSON(h.create):void 0,update:At(h.update)?a.SourceUpdateEvent.fromJSON(h.update):void 0,delete:At(h.delete)?a.SourceDeleteEvent.fromJSON(h.delete):void 0,add:At(h.add)?a.SourceAddEvent.fromJSON(h.add):void 0,remove:At(h.remove)?a.SourceDeleteEvent.fromJSON(h.remove):void 0}},toJSON(h){const _={};return h.create!==void 0&&(_.create=h.create?a.SourceCreateEvent.toJSON(h.create):void 0),h.update!==void 0&&(_.update=h.update?a.SourceUpdateEvent.toJSON(h.update):void 0),h.delete!==void 0&&(_.delete=h.delete?a.SourceDeleteEvent.toJSON(h.delete):void 0),h.add!==void 0&&(_.add=h.add?a.SourceAddEvent.toJSON(h.add):void 0),h.remove!==void 0&&(_.remove=h.remove?a.SourceDeleteEvent.toJSON(h.remove):void 0),_},fromPartial(h){const _=xo();return _.create=h.create!==void 0&&h.create!==null?a.SourceCreateEvent.fromPartial(h.create):void 0,_.update=h.update!==void 0&&h.update!==null?a.SourceUpdateEvent.fromPartial(h.update):void 0,_.delete=h.delete!==void 0&&h.delete!==null?a.SourceDeleteEvent.fromPartial(h.delete):void 0,_.add=h.add!==void 0&&h.add!==null?a.SourceAddEvent.fromPartial(h.add):void 0,_.remove=h.remove!==void 0&&h.remove!==null?a.SourceDeleteEvent.fromPartial(h.remove):void 0,_}};function Yo(){return{collection:void 0,destination:void 0,project:void 0,source:void 0,unspecified:void 0}}a.LiveEvent={encode(h,_=b.Writer.create()){return h.collection!==void 0&&a.CollectionEvent.encode(h.collection,_.uint32(10).fork()).ldelim(),h.destination!==void 0&&a.DestinationEvent.encode(h.destination,_.uint32(18).fork()).ldelim(),h.project!==void 0&&a.ProjectEvent.encode(h.project,_.uint32(26).fork()).ldelim(),h.source!==void 0&&a.SourceEvent.encode(h.source,_.uint32(34).fork()).ldelim(),h.unspecified!==void 0&&_.uint32(40).int32((0,et.nullValueToNumber)(h.unspecified)),_},decode(h,_){const j=h instanceof b.Reader?h:new b.Reader(h);let Et=_===void 0?j.len:j.pos+_;const dt=Yo();for(;j.pos<Et;){const kt=j.uint32();switch(kt>>>3){case 1:dt.collection=a.CollectionEvent.decode(j,j.uint32());break;case 2:dt.destination=a.DestinationEvent.decode(j,j.uint32());break;case 3:dt.project=a.ProjectEvent.decode(j,j.uint32());break;case 4:dt.source=a.SourceEvent.decode(j,j.uint32());break;case 5:dt.unspecified=(0,et.nullValueFromJSON)(j.int32());break;default:j.skipType(kt&7);break}}return dt},fromJSON(h){return{collection:At(h.collection)?a.CollectionEvent.fromJSON(h.collection):void 0,destination:At(h.destination)?a.DestinationEvent.fromJSON(h.destination):void 0,project:At(h.project)?a.ProjectEvent.fromJSON(h.project):void 0,source:At(h.source)?a.SourceEvent.fromJSON(h.source):void 0,unspecified:At(h.unspecified)?(0,et.nullValueFromJSON)(h.unspecified):void 0}},toJSON(h){const _={};return h.collection!==void 0&&(_.collection=h.collection?a.CollectionEvent.toJSON(h.collection):void 0),h.destination!==void 0&&(_.destination=h.destination?a.DestinationEvent.toJSON(h.destination):void 0),h.project!==void 0&&(_.project=h.project?a.ProjectEvent.toJSON(h.project):void 0),h.source!==void 0&&(_.source=h.source?a.SourceEvent.toJSON(h.source):void 0),h.unspecified!==void 0&&(_.unspecified=h.unspecified!==void 0?(0,et.nullValueToJSON)(h.unspecified):void 0),_},fromPartial(h){var _;const j=Yo();return j.collection=h.collection!==void 0&&h.collection!==null?a.CollectionEvent.fromPartial(h.collection):void 0,j.destination=h.destination!==void 0&&h.destination!==null?a.DestinationEvent.fromPartial(h.destination):void 0,j.project=h.project!==void 0&&h.project!==null?a.ProjectEvent.fromPartial(h.project):void 0,j.source=h.source!==void 0&&h.source!==null?a.SourceEvent.fromPartial(h.source):void 0,j.unspecified=(_=h.unspecified)!==null&&_!==void 0?_:void 0,j}};class Ko{constructor(_){this.rpc=_,this.CreateCollection=this.CreateCollection.bind(this),this.GetCollection=this.GetCollection.bind(this),this.GetCollections=this.GetCollections.bind(this),this.UpdateCollection=this.UpdateCollection.bind(this),this.DeleteCollection=this.DeleteCollection.bind(this)}CreateCollection(_){const j=a.CreateCollectionRequest.encode(_).finish();return this.rpc.request("live.v21.CollectionService","CreateCollection",j).then(dt=>a.CreateCollectionResponse.decode(new b.Reader(dt)))}GetCollection(_){const j=a.GetCollectionRequest.encode(_).finish();return this.rpc.request("live.v21.CollectionService","GetCollection",j).then(dt=>a.GetCollectionResponse.decode(new b.Reader(dt)))}GetCollections(_){const j=a.GetCollectionsRequest.encode(_).finish();return this.rpc.request("live.v21.CollectionService","GetCollections",j).then(dt=>a.GetCollectionsResponse.decode(new b.Reader(dt)))}UpdateCollection(_){const j=a.UpdateCollectionRequest.encode(_).finish();return this.rpc.request("live.v21.CollectionService","UpdateCollection",j).then(dt=>a.UpdateCollectionResponse.decode(new b.Reader(dt)))}DeleteCollection(_){const j=a.DeleteCollectionRequest.encode(_).finish();return this.rpc.request("live.v21.CollectionService","DeleteCollection",j).then(dt=>a.DeleteCollectionResponse.decode(new b.Reader(dt)))}}a.CollectionServiceClientImpl=Ko,a.CollectionServiceDefinition={name:"CollectionService",fullName:"live.v21.CollectionService",methods:{createCollection:{name:"CreateCollection",requestType:a.CreateCollectionRequest,requestStream:!1,responseType:a.CreateCollectionResponse,responseStream:!1,options:{}},getCollection:{name:"GetCollection",requestType:a.GetCollectionRequest,requestStream:!1,responseType:a.GetCollectionResponse,responseStream:!1,options:{}},getCollections:{name:"GetCollections",requestType:a.GetCollectionsRequest,requestStream:!1,responseType:a.GetCollectionsResponse,responseStream:!1,options:{}},updateCollection:{name:"UpdateCollection",requestType:a.UpdateCollectionRequest,requestStream:!1,responseType:a.UpdateCollectionResponse,responseStream:!1,options:{}},deleteCollection:{name:"DeleteCollection",requestType:a.DeleteCollectionRequest,requestStream:!1,responseType:a.DeleteCollectionResponse,responseStream:!1,options:{}}}};class Qo{constructor(_){this.rpc=_,this.CreateProject=this.CreateProject.bind(this),this.GetProject=this.GetProject.bind(this),this.DeleteProject=this.DeleteProject.bind(this),this.UpdateProject=this.UpdateProject.bind(this),this.StartProjectBroadcast=this.StartProjectBroadcast.bind(this),this.StopProjectBroadcast=this.StopProjectBroadcast.bind(this),this.StartProjectWebRtc=this.StartProjectWebRtc.bind(this),this.StopProjectWebRtc=this.StopProjectWebRtc.bind(this),this.GetProjectBroadcastSnapshot=this.GetProjectBroadcastSnapshot.bind(this),this.GetProjectBroadcastStatus=this.GetProjectBroadcastStatus.bind(this)}CreateProject(_){const j=a.CreateProjectRequest.encode(_).finish();return this.rpc.request("live.v21.ProjectService","CreateProject",j).then(dt=>a.CreateProjectResponse.decode(new b.Reader(dt)))}GetProject(_){const j=a.GetProjectRequest.encode(_).finish();return this.rpc.request("live.v21.ProjectService","GetProject",j).then(dt=>a.GetProjectResponse.decode(new b.Reader(dt)))}DeleteProject(_){const j=a.DeleteProjectRequest.encode(_).finish();return this.rpc.request("live.v21.ProjectService","DeleteProject",j).then(dt=>a.DeleteProjectResponse.decode(new b.Reader(dt)))}UpdateProject(_){const j=a.UpdateProjectRequest.encode(_).finish();return this.rpc.request("live.v21.ProjectService","UpdateProject",j).then(dt=>a.UpdateProjectResponse.decode(new b.Reader(dt)))}StartProjectBroadcast(_){const j=a.StartProjectBroadcastRequest.encode(_).finish();return this.rpc.request("live.v21.ProjectService","StartProjectBroadcast",j).then(dt=>a.StartProjectBroadcastResponse.decode(new b.Reader(dt)))}StopProjectBroadcast(_){const j=a.StopProjectBroadcastRequest.encode(_).finish();return this.rpc.request("live.v21.ProjectService","StopProjectBroadcast",j).then(dt=>a.StopProjectBroadcastResponse.decode(new b.Reader(dt)))}StartProjectWebRtc(_){const j=a.StartProjectWebRtcRequest.encode(_).finish();return this.rpc.request("live.v21.ProjectService","StartProjectWebRtc",j).then(dt=>a.StartProjectWebRtcResponse.decode(new b.Reader(dt)))}StopProjectWebRtc(_){const j=a.StopProjectWebRtcRequest.encode(_).finish();return this.rpc.request("live.v21.ProjectService","StopProjectWebRtc",j).then(dt=>a.StopProjectWebRtcResponse.decode(new b.Reader(dt)))}GetProjectBroadcastSnapshot(_){const j=a.GetProjectBroadcastSnapshotRequest.encode(_).finish();return this.rpc.request("live.v21.ProjectService","GetProjectBroadcastSnapshot",j).then(dt=>a.GetProjectBroadcastSnapshotResponse.decode(new b.Reader(dt)))}GetProjectBroadcastStatus(_){const j=a.GetProjectBroadcastStatusRequest.encode(_).finish();return this.rpc.request("live.v21.ProjectService","GetProjectBroadcastStatus",j).then(dt=>a.GetProjectBroadcastStatusResponse.decode(new b.Reader(dt)))}}a.ProjectServiceClientImpl=Qo,a.ProjectServiceDefinition={name:"ProjectService",fullName:"live.v21.ProjectService",methods:{createProject:{name:"CreateProject",requestType:a.CreateProjectRequest,requestStream:!1,responseType:a.CreateProjectResponse,responseStream:!1,options:{}},getProject:{name:"GetProject",requestType:a.GetProjectRequest,requestStream:!1,responseType:a.GetProjectResponse,responseStream:!1,options:{}},deleteProject:{name:"DeleteProject",requestType:a.DeleteProjectRequest,requestStream:!1,responseType:a.DeleteProjectResponse,responseStream:!1,options:{}},updateProject:{name:"UpdateProject",requestType:a.UpdateProjectRequest,requestStream:!1,responseType:a.UpdateProjectResponse,responseStream:!1,options:{}},startProjectBroadcast:{name:"StartProjectBroadcast",requestType:a.StartProjectBroadcastRequest,requestStream:!1,responseType:a.StartProjectBroadcastResponse,responseStream:!1,options:{}},stopProjectBroadcast:{name:"StopProjectBroadcast",requestType:a.StopProjectBroadcastRequest,requestStream:!1,responseType:a.StopProjectBroadcastResponse,responseStream:!1,options:{}},startProjectWebRtc:{name:"StartProjectWebRtc",requestType:a.StartProjectWebRtcRequest,requestStream:!1,responseType:a.StartProjectWebRtcResponse,responseStream:!1,options:{}},stopProjectWebRtc:{name:"StopProjectWebRtc",requestType:a.StopProjectWebRtcRequest,requestStream:!1,responseType:a.StopProjectWebRtcResponse,responseStream:!1,options:{}},getProjectBroadcastSnapshot:{name:"GetProjectBroadcastSnapshot",requestType:a.GetProjectBroadcastSnapshotRequest,requestStream:!1,responseType:a.GetProjectBroadcastSnapshotResponse,responseStream:!1,options:{}},getProjectBroadcastStatus:{name:"GetProjectBroadcastStatus",requestType:a.GetProjectBroadcastStatusRequest,requestStream:!1,responseType:a.GetProjectBroadcastStatusResponse,responseStream:!1,options:{}}}};class Xo{constructor(_){this.rpc=_,this.CreateDestination=this.CreateDestination.bind(this),this.GetDestination=this.GetDestination.bind(this),this.UpdateDestination=this.UpdateDestination.bind(this),this.DeleteDestination=this.DeleteDestination.bind(this)}CreateDestination(_){const j=a.CreateDestinationRequest.encode(_).finish();return this.rpc.request("live.v21.DestinationService","CreateDestination",j).then(dt=>a.CreateDestinationResponse.decode(new b.Reader(dt)))}GetDestination(_){const j=a.GetDestinationRequest.encode(_).finish();return this.rpc.request("live.v21.DestinationService","GetDestination",j).then(dt=>a.GetDestinationResponse.decode(new b.Reader(dt)))}UpdateDestination(_){const j=a.UpdateDestinationRequest.encode(_).finish();return this.rpc.request("live.v21.DestinationService","UpdateDestination",j).then(dt=>a.UpdateDestinationResponse.decode(new b.Reader(dt)))}DeleteDestination(_){const j=a.DeleteDestinationRequest.encode(_).finish();return this.rpc.request("live.v21.DestinationService","DeleteDestination",j).then(dt=>a.DeleteDestinationResponse.decode(new b.Reader(dt)))}}a.DestinationServiceClientImpl=Xo,a.DestinationServiceDefinition={name:"DestinationService",fullName:"live.v21.DestinationService",methods:{createDestination:{name:"CreateDestination",requestType:a.CreateDestinationRequest,requestStream:!1,responseType:a.CreateDestinationResponse,responseStream:!1,options:{}},getDestination:{name:"GetDestination",requestType:a.GetDestinationRequest,requestStream:!1,responseType:a.GetDestinationResponse,responseStream:!1,options:{}},updateDestination:{name:"UpdateDestination",requestType:a.UpdateDestinationRequest,requestStream:!1,responseType:a.UpdateDestinationResponse,responseStream:!1,options:{}},deleteDestination:{name:"DeleteDestination",requestType:a.DeleteDestinationRequest,requestStream:!1,responseType:a.DeleteDestinationResponse,responseStream:!1,options:{}}}};class Zo{constructor(_){this.rpc=_,this.CreateSource=this.CreateSource.bind(this),this.DeleteSource=this.DeleteSource.bind(this),this.UpdateSource=this.UpdateSource.bind(this),this.UpdateSourceInProject=this.UpdateSourceInProject.bind(this),this.GetSource=this.GetSource.bind(this),this.GetSources=this.GetSources.bind(this),this.AddSourceToProject=this.AddSourceToProject.bind(this),this.RemoveSourceFromProject=this.RemoveSourceFromProject.bind(this)}CreateSource(_){const j=a.CreateSourceRequest.encode(_).finish();return this.rpc.request("live.v21.SourceService","CreateSource",j).then(dt=>a.CreateSourceResponse.decode(new b.Reader(dt)))}DeleteSource(_){const j=a.DeleteSourceRequest.encode(_).finish();return this.rpc.request("live.v21.SourceService","DeleteSource",j).then(dt=>a.DeleteSourceResponse.decode(new b.Reader(dt)))}UpdateSource(_){const j=a.UpdateSourceRequest.encode(_).finish();return this.rpc.request("live.v21.SourceService","UpdateSource",j).then(dt=>a.UpdateSourceResponse.decode(new b.Reader(dt)))}UpdateSourceInProject(_){const j=a.UpdateSourceInProjectRequest.encode(_).finish();return this.rpc.request("live.v21.SourceService","UpdateSourceInProject",j).then(dt=>a.UpdateSourceInProjectResponse.decode(new b.Reader(dt)))}GetSource(_){const j=a.GetSourceRequest.encode(_).finish();return this.rpc.request("live.v21.SourceService","GetSource",j).then(dt=>a.GetSourceResponse.decode(new b.Reader(dt)))}GetSources(_){const j=a.GetSourcesRequest.encode(_).finish();return this.rpc.request("live.v21.SourceService","GetSources",j).then(dt=>a.GetSourcesResponse.decode(new b.Reader(dt)))}AddSourceToProject(_){const j=a.AddSourceToProjectRequest.encode(_).finish();return this.rpc.request("live.v21.SourceService","AddSourceToProject",j).then(dt=>a.AddSourceToProjectResponse.decode(new b.Reader(dt)))}RemoveSourceFromProject(_){const j=a.RemoveSourceFromProjectRequest.encode(_).finish();return this.rpc.request("live.v21.SourceService","RemoveSourceFromProject",j).then(dt=>a.RemoveSourceFromProjectResponse.decode(new b.Reader(dt)))}}a.SourceServiceClientImpl=Zo,a.SourceServiceDefinition={name:"SourceService",fullName:"live.v21.SourceService",methods:{createSource:{name:"CreateSource",requestType:a.CreateSourceRequest,requestStream:!1,responseType:a.CreateSourceResponse,responseStream:!1,options:{}},deleteSource:{name:"DeleteSource",requestType:a.DeleteSourceRequest,requestStream:!1,responseType:a.DeleteSourceResponse,responseStream:!1,options:{}},updateSource:{name:"UpdateSource",requestType:a.UpdateSourceRequest,requestStream:!1,responseType:a.UpdateSourceResponse,responseStream:!1,options:{}},updateSourceInProject:{name:"UpdateSourceInProject",requestType:a.UpdateSourceInProjectRequest,requestStream:!1,responseType:a.UpdateSourceInProjectResponse,responseStream:!1,options:{}},getSource:{name:"GetSource",requestType:a.GetSourceRequest,requestStream:!1,responseType:a.GetSourceResponse,responseStream:!1,options:{}},getSources:{name:"GetSources",requestType:a.GetSourcesRequest,requestStream:!1,responseType:a.GetSourcesResponse,responseStream:!1,options:{}},addSourceToProject:{name:"AddSourceToProject",requestType:a.AddSourceToProjectRequest,requestStream:!1,responseType:a.AddSourceToProjectResponse,responseStream:!1,options:{}},removeSourceFromProject:{name:"RemoveSourceFromProject",requestType:a.RemoveSourceFromProjectRequest,requestStream:!1,responseType:a.RemoveSourceFromProjectResponse,responseStream:!1,options:{}}}};class ga{constructor(_){this.rpc=_,this.CreateAccessToken=this.CreateAccessToken.bind(this)}CreateAccessToken(_){const j=a.CreateAccessTokenRequest.encode(_).finish();return this.rpc.request("live.v21.BackendAuthenticationService","CreateAccessToken",j).then(dt=>a.CreateAccessTokenResponse.decode(new b.Reader(dt)))}}a.BackendAuthenticationServiceClientImpl=ga,a.BackendAuthenticationServiceDefinition={name:"BackendAuthenticationService",fullName:"live.v21.BackendAuthenticationService",methods:{createAccessToken:{name:"CreateAccessToken",requestType:a.CreateAccessTokenRequest,requestStream:!1,responseType:a.CreateAccessTokenResponse,responseStream:!1,options:{}}}};class _a{constructor(_){this.rpc=_,this.CreateGuestAccessToken=this.CreateGuestAccessToken.bind(this),this.RefreshAccessToken=this.RefreshAccessToken.bind(this),this.CreateWebRtcAccessToken=this.CreateWebRtcAccessToken.bind(this)}CreateGuestAccessToken(_){const j=a.CreateGuestAccessTokenRequest.encode(_).finish();return this.rpc.request("live.v21.AuthenticationService","CreateGuestAccessToken",j).then(dt=>a.CreateGuestAccessTokenResponse.decode(new b.Reader(dt)))}RefreshAccessToken(_){const j=a.RefreshAccessTokenRequest.encode(_).finish();return this.rpc.request("live.v21.AuthenticationService","RefreshAccessToken",j).then(dt=>a.RefreshAccessTokenResponse.decode(new b.Reader(dt)))}CreateWebRtcAccessToken(_){const j=a.CreateWebRtcAccessTokenRequest.encode(_).finish();return this.rpc.request("live.v21.AuthenticationService","CreateWebRtcAccessToken",j).then(dt=>a.CreateWebRtcAccessTokenResponse.decode(new b.Reader(dt)))}}a.AuthenticationServiceClientImpl=_a,a.AuthenticationServiceDefinition={name:"AuthenticationService",fullName:"live.v21.AuthenticationService",methods:{createGuestAccessToken:{name:"CreateGuestAccessToken",requestType:a.CreateGuestAccessTokenRequest,requestStream:!1,responseType:a.CreateGuestAccessTokenResponse,responseStream:!1,options:{}},refreshAccessToken:{name:"RefreshAccessToken",requestType:a.RefreshAccessTokenRequest,requestStream:!1,responseType:a.RefreshAccessTokenResponse,responseStream:!1,options:{}},createWebRtcAccessToken:{name:"CreateWebRtcAccessToken",requestType:a.CreateWebRtcAccessTokenRequest,requestStream:!1,responseType:a.CreateWebRtcAccessTokenResponse,responseStream:!1,options:{}}}};class za{constructor(_){this.rpc=_,this.GetJsonWebKeySet=this.GetJsonWebKeySet.bind(this),this.GetTestToken=this.GetTestToken.bind(this),this.GuestCodeRedirect=this.GuestCodeRedirect.bind(this),this.CreateDemoAccessToken=this.CreateDemoAccessToken.bind(this)}GetJsonWebKeySet(_){const j=a.GetJsonWebKeySetRequest.encode(_).finish();return this.rpc.request("live.v21.PublicAuthenticationService","GetJsonWebKeySet",j).then(dt=>a.GetJsonWebKeySetResponse.decode(new b.Reader(dt)))}GetTestToken(_){const j=a.GetTestTokenRequest.encode(_).finish();return this.rpc.request("live.v21.PublicAuthenticationService","GetTestToken",j).then(dt=>a.GetTestTokenResponse.decode(new b.Reader(dt)))}GuestCodeRedirect(_){const j=a.GuestCodeRedirectRequest.encode(_).finish();return this.rpc.request("live.v21.PublicAuthenticationService","GuestCodeRedirect",j).then(dt=>a.GuestCodeRedirectResponse.decode(new b.Reader(dt)))}CreateDemoAccessToken(_){const j=a.CreateDemoAccessTokenRequest.encode(_).finish();return this.rpc.request("live.v21.PublicAuthenticationService","CreateDemoAccessToken",j).then(dt=>a.CreateDemoAccessTokenResponse.decode(new b.Reader(dt)))}}a.PublicAuthenticationServiceClientImpl=za,a.PublicAuthenticationServiceDefinition={name:"PublicAuthenticationService",fullName:"live.v21.PublicAuthenticationService",methods:{getJsonWebKeySet:{name:"GetJsonWebKeySet",requestType:a.GetJsonWebKeySetRequest,requestStream:!1,responseType:a.GetJsonWebKeySetResponse,responseStream:!1,options:{}},getTestToken:{name:"GetTestToken",requestType:a.GetTestTokenRequest,requestStream:!1,responseType:a.GetTestTokenResponse,responseStream:!1,options:{}},guestCodeRedirect:{name:"GuestCodeRedirect",requestType:a.GuestCodeRedirectRequest,requestStream:!1,responseType:a.GuestCodeRedirectResponse,responseStream:!1,options:{}},createDemoAccessToken:{name:"CreateDemoAccessToken",requestType:a.CreateDemoAccessTokenRequest,requestStream:!1,responseType:a.CreateDemoAccessTokenResponse,responseStream:!1,options:{}}}};var En=(()=>{if(typeof En!="undefined")return En;if(typeof self!="undefined")return self;if(typeof window!="undefined")return window;if(typeof commonjsGlobal!="undefined")return commonjsGlobal;throw"Unable to locate global object"})();const ts=En.atob||(h=>En.Buffer.from(h,"base64").toString("binary"));function ns(h){const _=ts(h),j=new Uint8Array(_.length);for(let Et=0;Et<_.length;++Et)j[Et]=_.charCodeAt(Et);return j}const rs=En.btoa||(h=>En.Buffer.from(h,"binary").toString("base64"));function is(h){const _=[];for(const j of h)_.push(String.fromCharCode(j));return rs(_.join(""))}function Fn(h){const _=new Date(h),j=_.getTime()/1e3,Et=_.getTime()%1e3*1e6;return{seconds:j,nanos:Et}}function Bn(h){let _=h.seconds*1e3;return _+=h.nanos/1e6,new Date(_).toISOString()}b.util.Long!==g.default&&(b.util.Long=g.default,b.configure());function At(h){return h!=null}})(api$1);(function(a){var s=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(st,ut,pt,St){St===void 0&&(St=pt);var _t=Object.getOwnPropertyDescriptor(ut,pt);(!_t||("get"in _t?!ut.__esModule:_t.writable||_t.configurable))&&(_t={enumerable:!0,get:function(){return ut[pt]}}),Object.defineProperty(st,St,_t)}:function(st,ut,pt,St){St===void 0&&(St=pt),st[St]=ut[pt]}),d=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(st,ut){Object.defineProperty(st,"default",{enumerable:!0,value:ut})}:function(st,ut){st.default=ut}),c=commonjsGlobal&&commonjsGlobal.__decorate||function(st,ut,pt,St){var _t=arguments.length,ht=_t<3?ut:St===null?St=Object.getOwnPropertyDescriptor(ut,pt):St,_e;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")ht=Reflect.decorate(st,ut,pt,St);else for(var ot=st.length-1;ot>=0;ot--)(_e=st[ot])&&(ht=(_t<3?_e(ht):_t>3?_e(ut,pt,ht):_e(ut,pt))||ht);return _t>3&&ht&&Object.defineProperty(ut,pt,ht),ht},m=commonjsGlobal&&commonjsGlobal.__importStar||function(st){if(st&&st.__esModule)return st;var ut={};if(st!=null)for(var pt in st)pt!=="default"&&Object.prototype.hasOwnProperty.call(st,pt)&&s(ut,st,pt);return d(ut,st),ut},g=commonjsGlobal&&commonjsGlobal.__metadata||function(st,ut){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(st,ut)};Object.defineProperty(a,"__esModule",{value:!0}),a.LiveApi=void 0;const b=m(lib$1),k=api$2,et=m(api$1),nt=decorator,it="LiveApi";class ct extends k.ApiClient{constructor(ut,pt,St,_t,ht,_e){super(ut,St,_e,it),this.handlers={},this.eventApi=pt,this.accessTokenRefreshCallback=_t,this.publicAuthentication=this.clientFactory.create(et.PublicAuthenticationServiceDefinition,this.channel),ht!=null&&(this.backendAuthentication=this.clientFactory.create(et.BackendAuthenticationServiceDefinition,this.channel,{"*":{metadata:b.Metadata({"X-Api-Key":ht})}})),this.eventApi.on("event",{name:`${ct.LIVEAPI_EVENT_PREFIX}:*`,ignoreSessionEvents:!0,allowedSessionEvents:[`${ct.LIVEAPI_EVENT_PREFIX}:EVENT_TYPE_PROJECT:EVENT_SUB_TYPE_STATE`]},this.eventCallback.bind(this))}on(ut,pt){var St;this.handlers[ut]=(St=this.handlers[ut])!==null&&St!==void 0?St:[],this.handlers[ut].push(pt)}off(ut,pt){this.handlers[ut]=this.handlers[ut].filter(St=>St!==pt)}emitToHandlers(ut,pt,St){var _t;for(const ht of(_t=this.handlers[ut])!==null&&_t!==void 0?_t:[])ht(Object.values(St).find(_e=>!!_e),pt)}async subscribeToCollection(ut){await this.eventApi.subscribe(`${ct.LIVEAPI_EVENT_PREFIX}:*`,{target:{collectionId:ut}})}async unsubscribeFromCollection(ut){await this.eventApi.unsubscribe(`${ct.LIVEAPI_EVENT_PREFIX}:*`,{target:{collectionId:ut}})}async subscribeToProject(ut,pt){await this.eventApi.subscribe(`${ct.LIVEAPI_EVENT_PREFIX}:*`,{target:{collectionId:ut,projectId:pt}})}async unsubscribeFromProject(ut,pt){await this.eventApi.unsubscribe(`${ct.LIVEAPI_EVENT_PREFIX}:*`,{target:{collectionId:ut,projectId:pt}})}eventCallback(ut){let pt=ut.name.split(":"),St=et.eventTypeFromJSON(pt[1]),_t=et.eventSubTypeFromJSON(pt[2]);this.log.info("processing event: "+St+"/"+_t),ct.liveApiEventMap[St]&&this.emitToHandlers(St,_t,ut.payload)}_setup(ut){let pt=this;ut.onHeader=function(St){let _t=St.get("Authorization");if(_t!=null){const ht=_t.split(" ");if(ht.length==2&&ht[0]=="Bearer"){let _e=ht[1];pt.accessTokenRefreshCallback(_e)}}},this.collection=this.clientFactory.create(et.CollectionServiceDefinition,this.channel,{"*":ut}),this.project=this.clientFactory.create(et.ProjectServiceDefinition,this.channel,{"*":ut}),this.source=this.clientFactory.create(et.SourceServiceDefinition,this.channel,{"*":ut}),this.destination=this.clientFactory.create(et.DestinationServiceDefinition,this.channel,{"*":ut}),this.authentication=this.clientFactory.create(et.AuthenticationServiceDefinition,this.channel,{"*":ut})}}ct.LIVEAPI_EVENT_PREFIX="vapi",c([(0,nt.RequiresSdkAuthentication)(),g("design:type",Object)],ct.prototype,"collection",void 0),c([(0,nt.RequiresSdkAuthentication)(),g("design:type",Object)],ct.prototype,"project",void 0),c([(0,nt.RequiresSdkAuthentication)(),g("design:type",Object)],ct.prototype,"source",void 0),c([(0,nt.RequiresSdkAuthentication)(),g("design:type",Object)],ct.prototype,"destination",void 0),c([(0,nt.RequiresSdkAuthentication)(),g("design:type",Object)],ct.prototype,"authentication",void 0),a.LiveApi=ct,function(st){st.liveApiEventMap={[et.EventType.EVENT_TYPE_COLLECTION]:"collection",[et.EventType.EVENT_TYPE_PROJECT]:"project",[et.EventType.EVENT_TYPE_SOURCE]:"source",[et.EventType.EVENT_TYPE_DESTINATION]:"destination",[et.EventType.EVENT_TYPE_UNSPECIFIED]:"unspecified"}}(ct=a.LiveApi||(a.LiveApi={}))})(liveapi);var eventapi={},dist$2={},api={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var extendStatics=function(a,s){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,c){d.__proto__=c}||function(d,c){for(var m in c)c.hasOwnProperty(m)&&(d[m]=c[m])},extendStatics(a,s)};function __extends(a,s){extendStatics(a,s);function d(){this.constructor=a}a.prototype=s===null?Object.create(s):(d.prototype=s.prototype,new d)}function isFunction$1(a){return typeof a=="function"}var _enable_super_gross_mode_that_will_cause_bad_things=!1,config$1={Promise:void 0,set useDeprecatedSynchronousErrorHandling(a){if(a){var s=new Error;""+s.stack}_enable_super_gross_mode_that_will_cause_bad_things=a},get useDeprecatedSynchronousErrorHandling(){return _enable_super_gross_mode_that_will_cause_bad_things}};function hostReportError(a){setTimeout(function(){throw a},0)}var empty$2={closed:!0,next:function(a){},error:function(a){if(config$1.useDeprecatedSynchronousErrorHandling)throw a;hostReportError(a)},complete:function(){}},isArray$2=function(){return Array.isArray||function(a){return a&&typeof a.length=="number"}}();function isObject$4(a){return a!==null&&typeof a=="object"}var UnsubscriptionErrorImpl=function(){function a(s){return Error.call(this),this.message=s?s.length+` errors occurred during unsubscription:
`+s.map(function(d,c){return c+1+") "+d.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=s,this}return a.prototype=Object.create(Error.prototype),a}(),UnsubscriptionError=UnsubscriptionErrorImpl,Subscription=function(){function a(s){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,s&&(this._ctorUnsubscribe=!0,this._unsubscribe=s)}return a.prototype.unsubscribe=function(){var s;if(!this.closed){var d=this,c=d._parentOrParents,m=d._ctorUnsubscribe,g=d._unsubscribe,b=d._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,c instanceof a)c.remove(this);else if(c!==null)for(var k=0;k<c.length;++k){var et=c[k];et.remove(this)}if(isFunction$1(g)){m&&(this._unsubscribe=void 0);try{g.call(this)}catch(ct){s=ct instanceof UnsubscriptionError?flattenUnsubscriptionErrors(ct.errors):[ct]}}if(isArray$2(b))for(var k=-1,nt=b.length;++k<nt;){var it=b[k];if(isObject$4(it))try{it.unsubscribe()}catch(st){s=s||[],st instanceof UnsubscriptionError?s=s.concat(flattenUnsubscriptionErrors(st.errors)):s.push(st)}}if(s)throw new UnsubscriptionError(s)}},a.prototype.add=function(s){var d=s;if(!s)return a.EMPTY;switch(typeof s){case"function":d=new a(s);case"object":if(d===this||d.closed||typeof d.unsubscribe!="function")return d;if(this.closed)return d.unsubscribe(),d;if(!(d instanceof a)){var c=d;d=new a,d._subscriptions=[c]}break;default:throw new Error("unrecognized teardown "+s+" added to Subscription.")}var m=d._parentOrParents;if(m===null)d._parentOrParents=this;else if(m instanceof a){if(m===this)return d;d._parentOrParents=[m,this]}else if(m.indexOf(this)===-1)m.push(this);else return d;var g=this._subscriptions;return g===null?this._subscriptions=[d]:g.push(d),d},a.prototype.remove=function(s){var d=this._subscriptions;if(d){var c=d.indexOf(s);c!==-1&&d.splice(c,1)}},a.EMPTY=function(s){return s.closed=!0,s}(new a),a}();function flattenUnsubscriptionErrors(a){return a.reduce(function(s,d){return s.concat(d instanceof UnsubscriptionError?d.errors:d)},[])}var rxSubscriber=function(){return typeof Symbol=="function"?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()}(),Subscriber=function(a){__extends(s,a);function s(d,c,m){var g=a.call(this)||this;switch(g.syncErrorValue=null,g.syncErrorThrown=!1,g.syncErrorThrowable=!1,g.isStopped=!1,arguments.length){case 0:g.destination=empty$2;break;case 1:if(!d){g.destination=empty$2;break}if(typeof d=="object"){d instanceof s?(g.syncErrorThrowable=d.syncErrorThrowable,g.destination=d,d.add(g)):(g.syncErrorThrowable=!0,g.destination=new SafeSubscriber(g,d));break}default:g.syncErrorThrowable=!0,g.destination=new SafeSubscriber(g,d,c,m);break}return g}return s.prototype[rxSubscriber]=function(){return this},s.create=function(d,c,m){var g=new s(d,c,m);return g.syncErrorThrowable=!1,g},s.prototype.next=function(d){this.isStopped||this._next(d)},s.prototype.error=function(d){this.isStopped||(this.isStopped=!0,this._error(d))},s.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},s.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,a.prototype.unsubscribe.call(this))},s.prototype._next=function(d){this.destination.next(d)},s.prototype._error=function(d){this.destination.error(d),this.unsubscribe()},s.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},s.prototype._unsubscribeAndRecycle=function(){var d=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=d,this},s}(Subscription),SafeSubscriber=function(a){__extends(s,a);function s(d,c,m,g){var b=a.call(this)||this;b._parentSubscriber=d;var k,et=b;return isFunction$1(c)?k=c:c&&(k=c.next,m=c.error,g=c.complete,c!==empty$2&&(et=Object.create(c),isFunction$1(et.unsubscribe)&&b.add(et.unsubscribe.bind(et)),et.unsubscribe=b.unsubscribe.bind(b))),b._context=et,b._next=k,b._error=m,b._complete=g,b}return s.prototype.next=function(d){if(!this.isStopped&&this._next){var c=this._parentSubscriber;!config$1.useDeprecatedSynchronousErrorHandling||!c.syncErrorThrowable?this.__tryOrUnsub(this._next,d):this.__tryOrSetError(c,this._next,d)&&this.unsubscribe()}},s.prototype.error=function(d){if(!this.isStopped){var c=this._parentSubscriber,m=config$1.useDeprecatedSynchronousErrorHandling;if(this._error)!m||!c.syncErrorThrowable?(this.__tryOrUnsub(this._error,d),this.unsubscribe()):(this.__tryOrSetError(c,this._error,d),this.unsubscribe());else if(c.syncErrorThrowable)m?(c.syncErrorValue=d,c.syncErrorThrown=!0):hostReportError(d),this.unsubscribe();else{if(this.unsubscribe(),m)throw d;hostReportError(d)}}},s.prototype.complete=function(){var d=this;if(!this.isStopped){var c=this._parentSubscriber;if(this._complete){var m=function(){return d._complete.call(d._context)};!config$1.useDeprecatedSynchronousErrorHandling||!c.syncErrorThrowable?(this.__tryOrUnsub(m),this.unsubscribe()):(this.__tryOrSetError(c,m),this.unsubscribe())}else this.unsubscribe()}},s.prototype.__tryOrUnsub=function(d,c){try{d.call(this._context,c)}catch(m){if(this.unsubscribe(),config$1.useDeprecatedSynchronousErrorHandling)throw m;hostReportError(m)}},s.prototype.__tryOrSetError=function(d,c,m){if(!config$1.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{c.call(this._context,m)}catch(g){return config$1.useDeprecatedSynchronousErrorHandling?(d.syncErrorValue=g,d.syncErrorThrown=!0,!0):(hostReportError(g),!0)}return!1},s.prototype._unsubscribe=function(){var d=this._parentSubscriber;this._context=null,this._parentSubscriber=null,d.unsubscribe()},s}(Subscriber);function canReportError(a){for(;a;){var s=a,d=s.closed,c=s.destination,m=s.isStopped;if(d||m)return!1;c&&c instanceof Subscriber?a=c:a=null}return!0}function toSubscriber(a,s,d){if(a){if(a instanceof Subscriber)return a;if(a[rxSubscriber])return a[rxSubscriber]()}return!a&&!s&&!d?new Subscriber(empty$2):new Subscriber(a,s,d)}var observable=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function identity(a){return a}function pipe(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];return pipeFromArray(a)}function pipeFromArray(a){return a.length===0?identity:a.length===1?a[0]:function(d){return a.reduce(function(c,m){return m(c)},d)}}var Observable=function(){function a(s){this._isScalar=!1,s&&(this._subscribe=s)}return a.prototype.lift=function(s){var d=new a;return d.source=this,d.operator=s,d},a.prototype.subscribe=function(s,d,c){var m=this.operator,g=toSubscriber(s,d,c);if(m?g.add(m.call(g,this.source)):g.add(this.source||config$1.useDeprecatedSynchronousErrorHandling&&!g.syncErrorThrowable?this._subscribe(g):this._trySubscribe(g)),config$1.useDeprecatedSynchronousErrorHandling&&g.syncErrorThrowable&&(g.syncErrorThrowable=!1,g.syncErrorThrown))throw g.syncErrorValue;return g},a.prototype._trySubscribe=function(s){try{return this._subscribe(s)}catch(d){config$1.useDeprecatedSynchronousErrorHandling&&(s.syncErrorThrown=!0,s.syncErrorValue=d),canReportError(s)?s.error(d):console.warn(d)}},a.prototype.forEach=function(s,d){var c=this;return d=getPromiseCtor(d),new d(function(m,g){var b;b=c.subscribe(function(k){try{s(k)}catch(et){g(et),b&&b.unsubscribe()}},g,m)})},a.prototype._subscribe=function(s){var d=this.source;return d&&d.subscribe(s)},a.prototype[observable]=function(){return this},a.prototype.pipe=function(){for(var s=[],d=0;d<arguments.length;d++)s[d]=arguments[d];return s.length===0?this:pipeFromArray(s)(this)},a.prototype.toPromise=function(s){var d=this;return s=getPromiseCtor(s),new s(function(c,m){var g;d.subscribe(function(b){return g=b},function(b){return m(b)},function(){return c(g)})})},a.create=function(s){return new a(s)},a}();function getPromiseCtor(a){if(a||(a=config$1.Promise||Promise),!a)throw new Error("no Promise impl found");return a}var subscribeToArray=function(a){return function(s){for(var d=0,c=a.length;d<c&&!s.closed;d++)s.next(a[d]);s.complete()}},subscribeToPromise=function(a){return function(s){return a.then(function(d){s.closed||(s.next(d),s.complete())},function(d){return s.error(d)}).then(null,hostReportError),s}};function getSymbolIterator(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var iterator=getSymbolIterator(),subscribeToIterable=function(a){return function(s){var d=a[iterator]();do{var c=void 0;try{c=d.next()}catch(m){return s.error(m),s}if(c.done){s.complete();break}if(s.next(c.value),s.closed)break}while(!0);return typeof d.return=="function"&&s.add(function(){d.return&&d.return()}),s}},subscribeToObservable=function(a){return function(s){var d=a[observable]();if(typeof d.subscribe!="function")throw new TypeError("Provided object does not correctly implement Symbol.observable");return d.subscribe(s)}},isArrayLike=function(a){return a&&typeof a.length=="number"&&typeof a!="function"};function isPromise(a){return!!a&&typeof a.subscribe!="function"&&typeof a.then=="function"}var subscribeTo=function(a){if(!!a&&typeof a[observable]=="function")return subscribeToObservable(a);if(isArrayLike(a))return subscribeToArray(a);if(isPromise(a))return subscribeToPromise(a);if(!!a&&typeof a[iterator]=="function")return subscribeToIterable(a);var s=isObject$4(a)?"an invalid object":"'"+a+"'",d="You provided "+s+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.";throw new TypeError(d)},SimpleInnerSubscriber=function(a){__extends(s,a);function s(d){var c=a.call(this)||this;return c.parent=d,c}return s.prototype._next=function(d){this.parent.notifyNext(d)},s.prototype._error=function(d){this.parent.notifyError(d),this.unsubscribe()},s.prototype._complete=function(){this.parent.notifyComplete(),this.unsubscribe()},s}(Subscriber),SimpleOuterSubscriber=function(a){__extends(s,a);function s(){return a!==null&&a.apply(this,arguments)||this}return s.prototype.notifyNext=function(d){this.destination.next(d)},s.prototype.notifyError=function(d){this.destination.error(d)},s.prototype.notifyComplete=function(){this.destination.complete()},s}(Subscriber);function innerSubscribe(a,s){if(!s.closed){if(a instanceof Observable)return a.subscribe(s);var d;try{d=subscribeTo(a)(s)}catch(c){s.error(c)}return d}}function audit(a){return function(d){return d.lift(new AuditOperator(a))}}var AuditOperator=function(){function a(s){this.durationSelector=s}return a.prototype.call=function(s,d){return d.subscribe(new AuditSubscriber(s,this.durationSelector))},a}(),AuditSubscriber=function(a){__extends(s,a);function s(d,c){var m=a.call(this,d)||this;return m.durationSelector=c,m.hasValue=!1,m}return s.prototype._next=function(d){if(this.value=d,this.hasValue=!0,!this.throttled){var c=void 0;try{var m=this.durationSelector;c=m(d)}catch(b){return this.destination.error(b)}var g=innerSubscribe(c,new SimpleInnerSubscriber(this));!g||g.closed?this.clearThrottle():this.add(this.throttled=g)}},s.prototype.clearThrottle=function(){var d=this,c=d.value,m=d.hasValue,g=d.throttled;g&&(this.remove(g),this.throttled=void 0,g.unsubscribe()),m&&(this.value=void 0,this.hasValue=!1,this.destination.next(c))},s.prototype.notifyNext=function(){this.clearThrottle()},s.prototype.notifyComplete=function(){this.clearThrottle()},s}(SimpleOuterSubscriber),Action=function(a){__extends(s,a);function s(d,c){return a.call(this)||this}return s.prototype.schedule=function(d,c){return this},s}(Subscription),AsyncAction=function(a){__extends(s,a);function s(d,c){var m=a.call(this,d,c)||this;return m.scheduler=d,m.work=c,m.pending=!1,m}return s.prototype.schedule=function(d,c){if(c===void 0&&(c=0),this.closed)return this;this.state=d;var m=this.id,g=this.scheduler;return m!=null&&(this.id=this.recycleAsyncId(g,m,c)),this.pending=!0,this.delay=c,this.id=this.id||this.requestAsyncId(g,this.id,c),this},s.prototype.requestAsyncId=function(d,c,m){return m===void 0&&(m=0),setInterval(d.flush.bind(d,this),m)},s.prototype.recycleAsyncId=function(d,c,m){if(m===void 0&&(m=0),m!==null&&this.delay===m&&this.pending===!1)return c;clearInterval(c)},s.prototype.execute=function(d,c){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var m=this._execute(d,c);if(m)return m;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},s.prototype._execute=function(d,c){var m=!1,g=void 0;try{this.work(d)}catch(b){m=!0,g=!!b&&b||new Error(b)}if(m)return this.unsubscribe(),g},s.prototype._unsubscribe=function(){var d=this.id,c=this.scheduler,m=c.actions,g=m.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,g!==-1&&m.splice(g,1),d!=null&&(this.id=this.recycleAsyncId(c,d,null)),this.delay=null},s}(Action),Scheduler=function(){function a(s,d){d===void 0&&(d=a.now),this.SchedulerAction=s,this.now=d}return a.prototype.schedule=function(s,d,c){return d===void 0&&(d=0),new this.SchedulerAction(this,s).schedule(c,d)},a.now=function(){return Date.now()},a}(),AsyncScheduler=function(a){__extends(s,a);function s(d,c){c===void 0&&(c=Scheduler.now);var m=a.call(this,d,function(){return s.delegate&&s.delegate!==m?s.delegate.now():c()})||this;return m.actions=[],m.active=!1,m.scheduled=void 0,m}return s.prototype.schedule=function(d,c,m){return c===void 0&&(c=0),s.delegate&&s.delegate!==this?s.delegate.schedule(d,c,m):a.prototype.schedule.call(this,d,c,m)},s.prototype.flush=function(d){var c=this.actions;if(this.active){c.push(d);return}var m;this.active=!0;do if(m=d.execute(d.state,d.delay))break;while(d=c.shift());if(this.active=!1,m){for(;d=c.shift();)d.unsubscribe();throw m}},s}(Scheduler),asyncScheduler=new AsyncScheduler(AsyncAction),async=asyncScheduler;function isNumeric(a){return!isArray$2(a)&&a-parseFloat(a)+1>=0}function isScheduler(a){return a&&typeof a.schedule=="function"}function timer(a,s,d){a===void 0&&(a=0);var c=-1;return isNumeric(s)?c=Number(s)<1&&1||Number(s):isScheduler(s)&&(d=s),isScheduler(d)||(d=async),new Observable(function(m){var g=isNumeric(a)?a:+a-d.now();return d.schedule(dispatch$1,g,{index:0,period:c,subscriber:m})})}function dispatch$1(a){var s=a.index,d=a.period,c=a.subscriber;if(c.next(s),!c.closed){if(d===-1)return c.complete();a.index=s+1,this.schedule(a,d)}}function auditTime(a,s){return s===void 0&&(s=async),audit(function(){return timer(a,s)})}function buffer(a){return function(d){return d.lift(new BufferOperator(a))}}var BufferOperator=function(){function a(s){this.closingNotifier=s}return a.prototype.call=function(s,d){return d.subscribe(new BufferSubscriber(s,this.closingNotifier))},a}(),BufferSubscriber=function(a){__extends(s,a);function s(d,c){var m=a.call(this,d)||this;return m.buffer=[],m.add(innerSubscribe(c,new SimpleInnerSubscriber(m))),m}return s.prototype._next=function(d){this.buffer.push(d)},s.prototype.notifyNext=function(){var d=this.buffer;this.buffer=[],this.destination.next(d)},s}(SimpleOuterSubscriber);function bufferCount(a,s){return s===void 0&&(s=null),function(c){return c.lift(new BufferCountOperator(a,s))}}var BufferCountOperator=function(){function a(s,d){this.bufferSize=s,this.startBufferEvery=d,!d||s===d?this.subscriberClass=BufferCountSubscriber:this.subscriberClass=BufferSkipCountSubscriber}return a.prototype.call=function(s,d){return d.subscribe(new this.subscriberClass(s,this.bufferSize,this.startBufferEvery))},a}(),BufferCountSubscriber=function(a){__extends(s,a);function s(d,c){var m=a.call(this,d)||this;return m.bufferSize=c,m.buffer=[],m}return s.prototype._next=function(d){var c=this.buffer;c.push(d),c.length==this.bufferSize&&(this.destination.next(c),this.buffer=[])},s.prototype._complete=function(){var d=this.buffer;d.length>0&&this.destination.next(d),a.prototype._complete.call(this)},s}(Subscriber),BufferSkipCountSubscriber=function(a){__extends(s,a);function s(d,c,m){var g=a.call(this,d)||this;return g.bufferSize=c,g.startBufferEvery=m,g.buffers=[],g.count=0,g}return s.prototype._next=function(d){var c=this,m=c.bufferSize,g=c.startBufferEvery,b=c.buffers,k=c.count;this.count++,k%g===0&&b.push([]);for(var et=b.length;et--;){var nt=b[et];nt.push(d),nt.length===m&&(b.splice(et,1),this.destination.next(nt))}},s.prototype._complete=function(){for(var d=this,c=d.buffers,m=d.destination;c.length>0;){var g=c.shift();g.length>0&&m.next(g)}a.prototype._complete.call(this)},s}(Subscriber);function bufferTime(a){var s=arguments.length,d=async;isScheduler(arguments[arguments.length-1])&&(d=arguments[arguments.length-1],s--);var c=null;s>=2&&(c=arguments[1]);var m=Number.POSITIVE_INFINITY;return s>=3&&(m=arguments[2]),function(b){return b.lift(new BufferTimeOperator(a,c,m,d))}}var BufferTimeOperator=function(){function a(s,d,c,m){this.bufferTimeSpan=s,this.bufferCreationInterval=d,this.maxBufferSize=c,this.scheduler=m}return a.prototype.call=function(s,d){return d.subscribe(new BufferTimeSubscriber(s,this.bufferTimeSpan,this.bufferCreationInterval,this.maxBufferSize,this.scheduler))},a}(),Context=function(){function a(){this.buffer=[]}return a}(),BufferTimeSubscriber=function(a){__extends(s,a);function s(d,c,m,g,b){var k=a.call(this,d)||this;k.bufferTimeSpan=c,k.bufferCreationInterval=m,k.maxBufferSize=g,k.scheduler=b,k.contexts=[];var et=k.openContext();if(k.timespanOnly=m==null||m<0,k.timespanOnly){var nt={subscriber:k,context:et,bufferTimeSpan:c};k.add(et.closeAction=b.schedule(dispatchBufferTimeSpanOnly,c,nt))}else{var it={subscriber:k,context:et},ct={bufferTimeSpan:c,bufferCreationInterval:m,subscriber:k,scheduler:b};k.add(et.closeAction=b.schedule(dispatchBufferClose,c,it)),k.add(b.schedule(dispatchBufferCreation,m,ct))}return k}return s.prototype._next=function(d){for(var c=this.contexts,m=c.length,g,b=0;b<m;b++){var k=c[b],et=k.buffer;et.push(d),et.length==this.maxBufferSize&&(g=k)}g&&this.onBufferFull(g)},s.prototype._error=function(d){this.contexts.length=0,a.prototype._error.call(this,d)},s.prototype._complete=function(){for(var d=this,c=d.contexts,m=d.destination;c.length>0;){var g=c.shift();m.next(g.buffer)}a.prototype._complete.call(this)},s.prototype._unsubscribe=function(){this.contexts=null},s.prototype.onBufferFull=function(d){this.closeContext(d);var c=d.closeAction;if(c.unsubscribe(),this.remove(c),!this.closed&&this.timespanOnly){d=this.openContext();var m=this.bufferTimeSpan,g={subscriber:this,context:d,bufferTimeSpan:m};this.add(d.closeAction=this.scheduler.schedule(dispatchBufferTimeSpanOnly,m,g))}},s.prototype.openContext=function(){var d=new Context;return this.contexts.push(d),d},s.prototype.closeContext=function(d){this.destination.next(d.buffer);var c=this.contexts,m=c?c.indexOf(d):-1;m>=0&&c.splice(c.indexOf(d),1)},s}(Subscriber);function dispatchBufferTimeSpanOnly(a){var s=a.subscriber,d=a.context;d&&s.closeContext(d),s.closed||(a.context=s.openContext(),a.context.closeAction=this.schedule(a,a.bufferTimeSpan))}function dispatchBufferCreation(a){var s=a.bufferCreationInterval,d=a.bufferTimeSpan,c=a.subscriber,m=a.scheduler,g=c.openContext(),b=this;c.closed||(c.add(g.closeAction=m.schedule(dispatchBufferClose,d,{subscriber:c,context:g})),b.schedule(a,s))}function dispatchBufferClose(a){var s=a.subscriber,d=a.context;s.closeContext(d)}var InnerSubscriber=function(a){__extends(s,a);function s(d,c,m){var g=a.call(this)||this;return g.parent=d,g.outerValue=c,g.outerIndex=m,g.index=0,g}return s.prototype._next=function(d){this.parent.notifyNext(this.outerValue,d,this.outerIndex,this.index++,this)},s.prototype._error=function(d){this.parent.notifyError(d,this),this.unsubscribe()},s.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},s}(Subscriber);function subscribeToResult(a,s,d,c,m){if(m===void 0&&(m=new InnerSubscriber(a,d,c)),!m.closed)return s instanceof Observable?s.subscribe(m):subscribeTo(s)(m)}var OuterSubscriber=function(a){__extends(s,a);function s(){return a!==null&&a.apply(this,arguments)||this}return s.prototype.notifyNext=function(d,c,m,g,b){this.destination.next(c)},s.prototype.notifyError=function(d,c){this.destination.error(d)},s.prototype.notifyComplete=function(d){this.destination.complete()},s}(Subscriber);function bufferToggle(a,s){return function(c){return c.lift(new BufferToggleOperator(a,s))}}var BufferToggleOperator=function(){function a(s,d){this.openings=s,this.closingSelector=d}return a.prototype.call=function(s,d){return d.subscribe(new BufferToggleSubscriber(s,this.openings,this.closingSelector))},a}(),BufferToggleSubscriber=function(a){__extends(s,a);function s(d,c,m){var g=a.call(this,d)||this;return g.closingSelector=m,g.contexts=[],g.add(subscribeToResult(g,c)),g}return s.prototype._next=function(d){for(var c=this.contexts,m=c.length,g=0;g<m;g++)c[g].buffer.push(d)},s.prototype._error=function(d){for(var c=this.contexts;c.length>0;){var m=c.shift();m.subscription.unsubscribe(),m.buffer=null,m.subscription=null}this.contexts=null,a.prototype._error.call(this,d)},s.prototype._complete=function(){for(var d=this.contexts;d.length>0;){var c=d.shift();this.destination.next(c.buffer),c.subscription.unsubscribe(),c.buffer=null,c.subscription=null}this.contexts=null,a.prototype._complete.call(this)},s.prototype.notifyNext=function(d,c){d?this.closeBuffer(d):this.openBuffer(c)},s.prototype.notifyComplete=function(d){this.closeBuffer(d.context)},s.prototype.openBuffer=function(d){try{var c=this.closingSelector,m=c.call(this,d);m&&this.trySubscribe(m)}catch(g){this._error(g)}},s.prototype.closeBuffer=function(d){var c=this.contexts;if(c&&d){var m=d.buffer,g=d.subscription;this.destination.next(m),c.splice(c.indexOf(d),1),this.remove(g),g.unsubscribe()}},s.prototype.trySubscribe=function(d){var c=this.contexts,m=[],g=new Subscription,b={buffer:m,subscription:g};c.push(b);var k=subscribeToResult(this,d,b);!k||k.closed?this.closeBuffer(b):(k.context=b,this.add(k),g.add(k))},s}(OuterSubscriber);function bufferWhen(a){return function(s){return s.lift(new BufferWhenOperator(a))}}var BufferWhenOperator=function(){function a(s){this.closingSelector=s}return a.prototype.call=function(s,d){return d.subscribe(new BufferWhenSubscriber(s,this.closingSelector))},a}(),BufferWhenSubscriber=function(a){__extends(s,a);function s(d,c){var m=a.call(this,d)||this;return m.closingSelector=c,m.subscribing=!1,m.openBuffer(),m}return s.prototype._next=function(d){this.buffer.push(d)},s.prototype._complete=function(){var d=this.buffer;d&&this.destination.next(d),a.prototype._complete.call(this)},s.prototype._unsubscribe=function(){this.buffer=void 0,this.subscribing=!1},s.prototype.notifyNext=function(){this.openBuffer()},s.prototype.notifyComplete=function(){this.subscribing?this.complete():this.openBuffer()},s.prototype.openBuffer=function(){var d=this.closingSubscription;d&&(this.remove(d),d.unsubscribe());var c=this.buffer;this.buffer&&this.destination.next(c),this.buffer=[];var m;try{var g=this.closingSelector;m=g()}catch(b){return this.error(b)}d=new Subscription,this.closingSubscription=d,this.add(d),this.subscribing=!0,d.add(innerSubscribe(m,new SimpleInnerSubscriber(this))),this.subscribing=!1},s}(SimpleOuterSubscriber);function catchError(a){return function(d){var c=new CatchOperator(a),m=d.lift(c);return c.caught=m}}var CatchOperator=function(){function a(s){this.selector=s}return a.prototype.call=function(s,d){return d.subscribe(new CatchSubscriber(s,this.selector,this.caught))},a}(),CatchSubscriber=function(a){__extends(s,a);function s(d,c,m){var g=a.call(this,d)||this;return g.selector=c,g.caught=m,g}return s.prototype.error=function(d){if(!this.isStopped){var c=void 0;try{c=this.selector(d,this.caught)}catch(b){a.prototype.error.call(this,b);return}this._unsubscribeAndRecycle();var m=new SimpleInnerSubscriber(this);this.add(m);var g=innerSubscribe(c,m);g!==m&&this.add(g)}},s}(SimpleOuterSubscriber);function scheduleArray(a,s){return new Observable(function(d){var c=new Subscription,m=0;return c.add(s.schedule(function(){if(m===a.length){d.complete();return}d.next(a[m++]),d.closed||c.add(this.schedule())})),c})}function fromArray(a,s){return s?scheduleArray(a,s):new Observable(subscribeToArray(a))}var NONE={},CombineLatestOperator=function(){function a(s){this.resultSelector=s}return a.prototype.call=function(s,d){return d.subscribe(new CombineLatestSubscriber(s,this.resultSelector))},a}(),CombineLatestSubscriber=function(a){__extends(s,a);function s(d,c){var m=a.call(this,d)||this;return m.resultSelector=c,m.active=0,m.values=[],m.observables=[],m}return s.prototype._next=function(d){this.values.push(NONE),this.observables.push(d)},s.prototype._complete=function(){var d=this.observables,c=d.length;if(c===0)this.destination.complete();else{this.active=c,this.toRespond=c;for(var m=0;m<c;m++){var g=d[m];this.add(subscribeToResult(this,g,void 0,m))}}},s.prototype.notifyComplete=function(d){(this.active-=1)===0&&this.destination.complete()},s.prototype.notifyNext=function(d,c,m){var g=this.values,b=g[m],k=this.toRespond?b===NONE?--this.toRespond:this.toRespond:0;g[m]=c,k===0&&(this.resultSelector?this._tryResultSelector(g):this.destination.next(g.slice()))},s.prototype._tryResultSelector=function(d){var c;try{c=this.resultSelector.apply(this,d)}catch(m){this.destination.error(m);return}this.destination.next(c)},s}(OuterSubscriber);function combineAll(a){return function(s){return s.lift(new CombineLatestOperator(a))}}function scheduleObservable(a,s){return new Observable(function(d){var c=new Subscription;return c.add(s.schedule(function(){var m=a[observable]();c.add(m.subscribe({next:function(g){c.add(s.schedule(function(){return d.next(g)}))},error:function(g){c.add(s.schedule(function(){return d.error(g)}))},complete:function(){c.add(s.schedule(function(){return d.complete()}))}}))})),c})}function schedulePromise(a,s){return new Observable(function(d){var c=new Subscription;return c.add(s.schedule(function(){return a.then(function(m){c.add(s.schedule(function(){d.next(m),c.add(s.schedule(function(){return d.complete()}))}))},function(m){c.add(s.schedule(function(){return d.error(m)}))})})),c})}function scheduleIterable(a,s){if(!a)throw new Error("Iterable cannot be null");return new Observable(function(d){var c=new Subscription,m;return c.add(function(){m&&typeof m.return=="function"&&m.return()}),c.add(s.schedule(function(){m=a[iterator](),c.add(s.schedule(function(){if(!d.closed){var g,b;try{var k=m.next();g=k.value,b=k.done}catch(et){d.error(et);return}b?d.complete():(d.next(g),this.schedule())}}))})),c})}function isInteropObservable(a){return a&&typeof a[observable]=="function"}function isIterable(a){return a&&typeof a[iterator]=="function"}function scheduled(a,s){if(a!=null){if(isInteropObservable(a))return scheduleObservable(a,s);if(isPromise(a))return schedulePromise(a,s);if(isArrayLike(a))return scheduleArray(a,s);if(isIterable(a)||typeof a=="string")return scheduleIterable(a,s)}throw new TypeError((a!==null&&typeof a||a)+" is not observable")}function from(a,s){return s?scheduled(a,s):a instanceof Observable?a:new Observable(subscribeTo(a))}function combineLatest(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];var d=null;return typeof a[a.length-1]=="function"&&(d=a.pop()),a.length===1&&isArray$2(a[0])&&(a=a[0].slice()),function(c){return c.lift.call(from([c].concat(a)),new CombineLatestOperator(d))}}function of$1(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];var d=a[a.length-1];return isScheduler(d)?(a.pop(),scheduleArray(a,d)):fromArray(a)}function map(a,s){return function(c){if(typeof a!="function")throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return c.lift(new MapOperator(a,s))}}var MapOperator=function(){function a(s,d){this.project=s,this.thisArg=d}return a.prototype.call=function(s,d){return d.subscribe(new MapSubscriber(s,this.project,this.thisArg))},a}(),MapSubscriber=function(a){__extends(s,a);function s(d,c,m){var g=a.call(this,d)||this;return g.project=c,g.count=0,g.thisArg=m||g,g}return s.prototype._next=function(d){var c;try{c=this.project.call(this.thisArg,d,this.count++)}catch(m){this.destination.error(m);return}this.destination.next(c)},s}(Subscriber);function mergeMap(a,s,d){return d===void 0&&(d=Number.POSITIVE_INFINITY),typeof s=="function"?function(c){return c.pipe(mergeMap(function(m,g){return from(a(m,g)).pipe(map(function(b,k){return s(m,b,g,k)}))},d))}:(typeof s=="number"&&(d=s),function(c){return c.lift(new MergeMapOperator(a,d))})}var MergeMapOperator=function(){function a(s,d){d===void 0&&(d=Number.POSITIVE_INFINITY),this.project=s,this.concurrent=d}return a.prototype.call=function(s,d){return d.subscribe(new MergeMapSubscriber(s,this.project,this.concurrent))},a}(),MergeMapSubscriber=function(a){__extends(s,a);function s(d,c,m){m===void 0&&(m=Number.POSITIVE_INFINITY);var g=a.call(this,d)||this;return g.project=c,g.concurrent=m,g.hasCompleted=!1,g.buffer=[],g.active=0,g.index=0,g}return s.prototype._next=function(d){this.active<this.concurrent?this._tryNext(d):this.buffer.push(d)},s.prototype._tryNext=function(d){var c,m=this.index++;try{c=this.project(d,m)}catch(g){this.destination.error(g);return}this.active++,this._innerSub(c)},s.prototype._innerSub=function(d){var c=new SimpleInnerSubscriber(this),m=this.destination;m.add(c);var g=innerSubscribe(d,c);g!==c&&m.add(g)},s.prototype._complete=function(){this.hasCompleted=!0,this.active===0&&this.buffer.length===0&&this.destination.complete(),this.unsubscribe()},s.prototype.notifyNext=function(d){this.destination.next(d)},s.prototype.notifyComplete=function(){var d=this.buffer;this.active--,d.length>0?this._next(d.shift()):this.active===0&&this.hasCompleted&&this.destination.complete()},s}(SimpleOuterSubscriber),flatMap=mergeMap;function mergeAll(a){return a===void 0&&(a=Number.POSITIVE_INFINITY),mergeMap(identity,a)}function concatAll(){return mergeAll(1)}function concat$1(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];return concatAll()(of$1.apply(void 0,a))}function concat(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];return function(d){return d.lift.call(concat$1.apply(void 0,[d].concat(a)))}}function concatMap(a,s){return mergeMap(a,s,1)}function concatMapTo(a,s){return concatMap(function(){return a},s)}function count(a){return function(s){return s.lift(new CountOperator(a,s))}}var CountOperator=function(){function a(s,d){this.predicate=s,this.source=d}return a.prototype.call=function(s,d){return d.subscribe(new CountSubscriber(s,this.predicate,this.source))},a}(),CountSubscriber=function(a){__extends(s,a);function s(d,c,m){var g=a.call(this,d)||this;return g.predicate=c,g.source=m,g.count=0,g.index=0,g}return s.prototype._next=function(d){this.predicate?this._tryPredicate(d):this.count++},s.prototype._tryPredicate=function(d){var c;try{c=this.predicate(d,this.index++,this.source)}catch(m){this.destination.error(m);return}c&&this.count++},s.prototype._complete=function(){this.destination.next(this.count),this.destination.complete()},s}(Subscriber);function debounce(a){return function(s){return s.lift(new DebounceOperator(a))}}var DebounceOperator=function(){function a(s){this.durationSelector=s}return a.prototype.call=function(s,d){return d.subscribe(new DebounceSubscriber(s,this.durationSelector))},a}(),DebounceSubscriber=function(a){__extends(s,a);function s(d,c){var m=a.call(this,d)||this;return m.durationSelector=c,m.hasValue=!1,m}return s.prototype._next=function(d){try{var c=this.durationSelector.call(this,d);c&&this._tryNext(d,c)}catch(m){this.destination.error(m)}},s.prototype._complete=function(){this.emitValue(),this.destination.complete()},s.prototype._tryNext=function(d,c){var m=this.durationSubscription;this.value=d,this.hasValue=!0,m&&(m.unsubscribe(),this.remove(m)),m=innerSubscribe(c,new SimpleInnerSubscriber(this)),m&&!m.closed&&this.add(this.durationSubscription=m)},s.prototype.notifyNext=function(){this.emitValue()},s.prototype.notifyComplete=function(){this.emitValue()},s.prototype.emitValue=function(){if(this.hasValue){var d=this.value,c=this.durationSubscription;c&&(this.durationSubscription=void 0,c.unsubscribe(),this.remove(c)),this.value=void 0,this.hasValue=!1,a.prototype._next.call(this,d)}},s}(SimpleOuterSubscriber);function debounceTime(a,s){return s===void 0&&(s=async),function(d){return d.lift(new DebounceTimeOperator(a,s))}}var DebounceTimeOperator=function(){function a(s,d){this.dueTime=s,this.scheduler=d}return a.prototype.call=function(s,d){return d.subscribe(new DebounceTimeSubscriber(s,this.dueTime,this.scheduler))},a}(),DebounceTimeSubscriber=function(a){__extends(s,a);function s(d,c,m){var g=a.call(this,d)||this;return g.dueTime=c,g.scheduler=m,g.debouncedSubscription=null,g.lastValue=null,g.hasValue=!1,g}return s.prototype._next=function(d){this.clearDebounce(),this.lastValue=d,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(dispatchNext$1,this.dueTime,this))},s.prototype._complete=function(){this.debouncedNext(),this.destination.complete()},s.prototype.debouncedNext=function(){if(this.clearDebounce(),this.hasValue){var d=this.lastValue;this.lastValue=null,this.hasValue=!1,this.destination.next(d)}},s.prototype.clearDebounce=function(){var d=this.debouncedSubscription;d!==null&&(this.remove(d),d.unsubscribe(),this.debouncedSubscription=null)},s}(Subscriber);function dispatchNext$1(a){a.debouncedNext()}function defaultIfEmpty(a){return a===void 0&&(a=null),function(s){return s.lift(new DefaultIfEmptyOperator(a))}}var DefaultIfEmptyOperator=function(){function a(s){this.defaultValue=s}return a.prototype.call=function(s,d){return d.subscribe(new DefaultIfEmptySubscriber(s,this.defaultValue))},a}(),DefaultIfEmptySubscriber=function(a){__extends(s,a);function s(d,c){var m=a.call(this,d)||this;return m.defaultValue=c,m.isEmpty=!0,m}return s.prototype._next=function(d){this.isEmpty=!1,this.destination.next(d)},s.prototype._complete=function(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()},s}(Subscriber);function isDate$1(a){return a instanceof Date&&!isNaN(+a)}var EMPTY=new Observable(function(a){return a.complete()});function empty$1(a){return a?emptyScheduled(a):EMPTY}function emptyScheduled(a){return new Observable(function(s){return a.schedule(function(){return s.complete()})})}function throwError(a,s){return s?new Observable(function(d){return s.schedule(dispatch,0,{error:a,subscriber:d})}):new Observable(function(d){return d.error(a)})}function dispatch(a){var s=a.error,d=a.subscriber;d.error(s)}var Notification=function(){function a(s,d,c){this.kind=s,this.value=d,this.error=c,this.hasValue=s==="N"}return a.prototype.observe=function(s){switch(this.kind){case"N":return s.next&&s.next(this.value);case"E":return s.error&&s.error(this.error);case"C":return s.complete&&s.complete()}},a.prototype.do=function(s,d,c){var m=this.kind;switch(m){case"N":return s&&s(this.value);case"E":return d&&d(this.error);case"C":return c&&c()}},a.prototype.accept=function(s,d,c){return s&&typeof s.next=="function"?this.observe(s):this.do(s,d,c)},a.prototype.toObservable=function(){var s=this.kind;switch(s){case"N":return of$1(this.value);case"E":return throwError(this.error);case"C":return empty$1()}throw new Error("unexpected notification kind value")},a.createNext=function(s){return typeof s!="undefined"?new a("N",s):a.undefinedValueNotification},a.createError=function(s){return new a("E",void 0,s)},a.createComplete=function(){return a.completeNotification},a.completeNotification=new a("C"),a.undefinedValueNotification=new a("N",void 0),a}();function delay(a,s){s===void 0&&(s=async);var d=isDate$1(a),c=d?+a-s.now():Math.abs(a);return function(m){return m.lift(new DelayOperator(c,s))}}var DelayOperator=function(){function a(s,d){this.delay=s,this.scheduler=d}return a.prototype.call=function(s,d){return d.subscribe(new DelaySubscriber(s,this.delay,this.scheduler))},a}(),DelaySubscriber=function(a){__extends(s,a);function s(d,c,m){var g=a.call(this,d)||this;return g.delay=c,g.scheduler=m,g.queue=[],g.active=!1,g.errored=!1,g}return s.dispatch=function(d){for(var c=d.source,m=c.queue,g=d.scheduler,b=d.destination;m.length>0&&m[0].time-g.now()<=0;)m.shift().notification.observe(b);if(m.length>0){var k=Math.max(0,m[0].time-g.now());this.schedule(d,k)}else this.unsubscribe(),c.active=!1},s.prototype._schedule=function(d){this.active=!0;var c=this.destination;c.add(d.schedule(s.dispatch,this.delay,{source:this,destination:this.destination,scheduler:d}))},s.prototype.scheduleNotification=function(d){if(this.errored!==!0){var c=this.scheduler,m=new DelayMessage(c.now()+this.delay,d);this.queue.push(m),this.active===!1&&this._schedule(c)}},s.prototype._next=function(d){this.scheduleNotification(Notification.createNext(d))},s.prototype._error=function(d){this.errored=!0,this.queue=[],this.destination.error(d),this.unsubscribe()},s.prototype._complete=function(){this.scheduleNotification(Notification.createComplete()),this.unsubscribe()},s}(Subscriber),DelayMessage=function(){function a(s,d){this.time=s,this.notification=d}return a}();function delayWhen(a,s){return s?function(d){return new SubscriptionDelayObservable(d,s).lift(new DelayWhenOperator(a))}:function(d){return d.lift(new DelayWhenOperator(a))}}var DelayWhenOperator=function(){function a(s){this.delayDurationSelector=s}return a.prototype.call=function(s,d){return d.subscribe(new DelayWhenSubscriber(s,this.delayDurationSelector))},a}(),DelayWhenSubscriber=function(a){__extends(s,a);function s(d,c){var m=a.call(this,d)||this;return m.delayDurationSelector=c,m.completed=!1,m.delayNotifierSubscriptions=[],m.index=0,m}return s.prototype.notifyNext=function(d,c,m,g,b){this.destination.next(d),this.removeSubscription(b),this.tryComplete()},s.prototype.notifyError=function(d,c){this._error(d)},s.prototype.notifyComplete=function(d){var c=this.removeSubscription(d);c&&this.destination.next(c),this.tryComplete()},s.prototype._next=function(d){var c=this.index++;try{var m=this.delayDurationSelector(d,c);m&&this.tryDelay(m,d)}catch(g){this.destination.error(g)}},s.prototype._complete=function(){this.completed=!0,this.tryComplete(),this.unsubscribe()},s.prototype.removeSubscription=function(d){d.unsubscribe();var c=this.delayNotifierSubscriptions.indexOf(d);return c!==-1&&this.delayNotifierSubscriptions.splice(c,1),d.outerValue},s.prototype.tryDelay=function(d,c){var m=subscribeToResult(this,d,c);if(m&&!m.closed){var g=this.destination;g.add(m),this.delayNotifierSubscriptions.push(m)}},s.prototype.tryComplete=function(){this.completed&&this.delayNotifierSubscriptions.length===0&&this.destination.complete()},s}(OuterSubscriber),SubscriptionDelayObservable=function(a){__extends(s,a);function s(d,c){var m=a.call(this)||this;return m.source=d,m.subscriptionDelay=c,m}return s.prototype._subscribe=function(d){this.subscriptionDelay.subscribe(new SubscriptionDelaySubscriber(d,this.source))},s}(Observable),SubscriptionDelaySubscriber=function(a){__extends(s,a);function s(d,c){var m=a.call(this)||this;return m.parent=d,m.source=c,m.sourceSubscribed=!1,m}return s.prototype._next=function(d){this.subscribeToSource()},s.prototype._error=function(d){this.unsubscribe(),this.parent.error(d)},s.prototype._complete=function(){this.unsubscribe(),this.subscribeToSource()},s.prototype.subscribeToSource=function(){this.sourceSubscribed||(this.sourceSubscribed=!0,this.unsubscribe(),this.source.subscribe(this.parent))},s}(Subscriber);function dematerialize(){return function(s){return s.lift(new DeMaterializeOperator)}}var DeMaterializeOperator=function(){function a(){}return a.prototype.call=function(s,d){return d.subscribe(new DeMaterializeSubscriber(s))},a}(),DeMaterializeSubscriber=function(a){__extends(s,a);function s(d){return a.call(this,d)||this}return s.prototype._next=function(d){d.observe(this.destination)},s}(Subscriber);function distinct(a,s){return function(d){return d.lift(new DistinctOperator(a,s))}}var DistinctOperator=function(){function a(s,d){this.keySelector=s,this.flushes=d}return a.prototype.call=function(s,d){return d.subscribe(new DistinctSubscriber(s,this.keySelector,this.flushes))},a}(),DistinctSubscriber=function(a){__extends(s,a);function s(d,c,m){var g=a.call(this,d)||this;return g.keySelector=c,g.values=new Set,m&&g.add(innerSubscribe(m,new SimpleInnerSubscriber(g))),g}return s.prototype.notifyNext=function(){this.values.clear()},s.prototype.notifyError=function(d){this._error(d)},s.prototype._next=function(d){this.keySelector?this._useKeySelector(d):this._finalizeNext(d,d)},s.prototype._useKeySelector=function(d){var c,m=this.destination;try{c=this.keySelector(d)}catch(g){m.error(g);return}this._finalizeNext(c,d)},s.prototype._finalizeNext=function(d,c){var m=this.values;m.has(d)||(m.add(d),this.destination.next(c))},s}(SimpleOuterSubscriber);function distinctUntilChanged(a,s){return function(d){return d.lift(new DistinctUntilChangedOperator(a,s))}}var DistinctUntilChangedOperator=function(){function a(s,d){this.compare=s,this.keySelector=d}return a.prototype.call=function(s,d){return d.subscribe(new DistinctUntilChangedSubscriber(s,this.compare,this.keySelector))},a}(),DistinctUntilChangedSubscriber=function(a){__extends(s,a);function s(d,c,m){var g=a.call(this,d)||this;return g.keySelector=m,g.hasKey=!1,typeof c=="function"&&(g.compare=c),g}return s.prototype.compare=function(d,c){return d===c},s.prototype._next=function(d){var c;try{var m=this.keySelector;c=m?m(d):d}catch(k){return this.destination.error(k)}var g=!1;if(this.hasKey)try{var b=this.compare;g=b(this.key,c)}catch(k){return this.destination.error(k)}else this.hasKey=!0;g||(this.key=c,this.destination.next(d))},s}(Subscriber);function distinctUntilKeyChanged(a,s){return distinctUntilChanged(function(d,c){return s?s(d[a],c[a]):d[a]===c[a]})}var ArgumentOutOfRangeErrorImpl=function(){function a(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return a.prototype=Object.create(Error.prototype),a}(),ArgumentOutOfRangeError=ArgumentOutOfRangeErrorImpl;function filter(a,s){return function(c){return c.lift(new FilterOperator(a,s))}}var FilterOperator=function(){function a(s,d){this.predicate=s,this.thisArg=d}return a.prototype.call=function(s,d){return d.subscribe(new FilterSubscriber(s,this.predicate,this.thisArg))},a}(),FilterSubscriber=function(a){__extends(s,a);function s(d,c,m){var g=a.call(this,d)||this;return g.predicate=c,g.thisArg=m,g.count=0,g}return s.prototype._next=function(d){var c;try{c=this.predicate.call(this.thisArg,d,this.count++)}catch(m){this.destination.error(m);return}c&&this.destination.next(d)},s}(Subscriber),EmptyErrorImpl=function(){function a(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return a.prototype=Object.create(Error.prototype),a}(),EmptyError=EmptyErrorImpl;function throwIfEmpty(a){return a===void 0&&(a=defaultErrorFactory),function(s){return s.lift(new ThrowIfEmptyOperator(a))}}var ThrowIfEmptyOperator=function(){function a(s){this.errorFactory=s}return a.prototype.call=function(s,d){return d.subscribe(new ThrowIfEmptySubscriber(s,this.errorFactory))},a}(),ThrowIfEmptySubscriber=function(a){__extends(s,a);function s(d,c){var m=a.call(this,d)||this;return m.errorFactory=c,m.hasValue=!1,m}return s.prototype._next=function(d){this.hasValue=!0,this.destination.next(d)},s.prototype._complete=function(){if(this.hasValue)return this.destination.complete();var d=void 0;try{d=this.errorFactory()}catch(c){d=c}this.destination.error(d)},s}(Subscriber);function defaultErrorFactory(){return new EmptyError}function take(a){return function(s){return a===0?empty$1():s.lift(new TakeOperator(a))}}var TakeOperator=function(){function a(s){if(this.total=s,this.total<0)throw new ArgumentOutOfRangeError}return a.prototype.call=function(s,d){return d.subscribe(new TakeSubscriber(s,this.total))},a}(),TakeSubscriber=function(a){__extends(s,a);function s(d,c){var m=a.call(this,d)||this;return m.total=c,m.count=0,m}return s.prototype._next=function(d){var c=this.total,m=++this.count;m<=c&&(this.destination.next(d),m===c&&(this.destination.complete(),this.unsubscribe()))},s}(Subscriber);function elementAt(a,s){if(a<0)throw new ArgumentOutOfRangeError;var d=arguments.length>=2;return function(c){return c.pipe(filter(function(m,g){return g===a}),take(1),d?defaultIfEmpty(s):throwIfEmpty(function(){return new ArgumentOutOfRangeError}))}}function endWith(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];return function(d){return concat$1(d,of$1.apply(void 0,a))}}function every(a,s){return function(d){return d.lift(new EveryOperator(a,s,d))}}var EveryOperator=function(){function a(s,d,c){this.predicate=s,this.thisArg=d,this.source=c}return a.prototype.call=function(s,d){return d.subscribe(new EverySubscriber(s,this.predicate,this.thisArg,this.source))},a}(),EverySubscriber=function(a){__extends(s,a);function s(d,c,m,g){var b=a.call(this,d)||this;return b.predicate=c,b.thisArg=m,b.source=g,b.index=0,b.thisArg=m||b,b}return s.prototype.notifyComplete=function(d){this.destination.next(d),this.destination.complete()},s.prototype._next=function(d){var c=!1;try{c=this.predicate.call(this.thisArg,d,this.index++,this.source)}catch(m){this.destination.error(m);return}c||this.notifyComplete(!1)},s.prototype._complete=function(){this.notifyComplete(!0)},s}(Subscriber);function exhaust(){return function(a){return a.lift(new SwitchFirstOperator)}}var SwitchFirstOperator=function(){function a(){}return a.prototype.call=function(s,d){return d.subscribe(new SwitchFirstSubscriber(s))},a}(),SwitchFirstSubscriber=function(a){__extends(s,a);function s(d){var c=a.call(this,d)||this;return c.hasCompleted=!1,c.hasSubscription=!1,c}return s.prototype._next=function(d){this.hasSubscription||(this.hasSubscription=!0,this.add(innerSubscribe(d,new SimpleInnerSubscriber(this))))},s.prototype._complete=function(){this.hasCompleted=!0,this.hasSubscription||this.destination.complete()},s.prototype.notifyComplete=function(){this.hasSubscription=!1,this.hasCompleted&&this.destination.complete()},s}(SimpleOuterSubscriber);function exhaustMap(a,s){return s?function(d){return d.pipe(exhaustMap(function(c,m){return from(a(c,m)).pipe(map(function(g,b){return s(c,g,m,b)}))}))}:function(d){return d.lift(new ExhaustMapOperator(a))}}var ExhaustMapOperator=function(){function a(s){this.project=s}return a.prototype.call=function(s,d){return d.subscribe(new ExhaustMapSubscriber(s,this.project))},a}(),ExhaustMapSubscriber=function(a){__extends(s,a);function s(d,c){var m=a.call(this,d)||this;return m.project=c,m.hasSubscription=!1,m.hasCompleted=!1,m.index=0,m}return s.prototype._next=function(d){this.hasSubscription||this.tryNext(d)},s.prototype.tryNext=function(d){var c,m=this.index++;try{c=this.project(d,m)}catch(g){this.destination.error(g);return}this.hasSubscription=!0,this._innerSub(c)},s.prototype._innerSub=function(d){var c=new SimpleInnerSubscriber(this),m=this.destination;m.add(c);var g=innerSubscribe(d,c);g!==c&&m.add(g)},s.prototype._complete=function(){this.hasCompleted=!0,this.hasSubscription||this.destination.complete(),this.unsubscribe()},s.prototype.notifyNext=function(d){this.destination.next(d)},s.prototype.notifyError=function(d){this.destination.error(d)},s.prototype.notifyComplete=function(){this.hasSubscription=!1,this.hasCompleted&&this.destination.complete()},s}(SimpleOuterSubscriber);function expand(a,s,d){return s===void 0&&(s=Number.POSITIVE_INFINITY),s=(s||0)<1?Number.POSITIVE_INFINITY:s,function(c){return c.lift(new ExpandOperator(a,s,d))}}var ExpandOperator=function(){function a(s,d,c){this.project=s,this.concurrent=d,this.scheduler=c}return a.prototype.call=function(s,d){return d.subscribe(new ExpandSubscriber(s,this.project,this.concurrent,this.scheduler))},a}(),ExpandSubscriber=function(a){__extends(s,a);function s(d,c,m,g){var b=a.call(this,d)||this;return b.project=c,b.concurrent=m,b.scheduler=g,b.index=0,b.active=0,b.hasCompleted=!1,m<Number.POSITIVE_INFINITY&&(b.buffer=[]),b}return s.dispatch=function(d){var c=d.subscriber,m=d.result,g=d.value,b=d.index;c.subscribeToProjection(m,g,b)},s.prototype._next=function(d){var c=this.destination;if(c.closed){this._complete();return}var m=this.index++;if(this.active<this.concurrent){c.next(d);try{var g=this.project,b=g(d,m);if(!this.scheduler)this.subscribeToProjection(b,d,m);else{var k={subscriber:this,result:b,value:d,index:m},et=this.destination;et.add(this.scheduler.schedule(s.dispatch,0,k))}}catch(nt){c.error(nt)}}else this.buffer.push(d)},s.prototype.subscribeToProjection=function(d,c,m){this.active++;var g=this.destination;g.add(innerSubscribe(d,new SimpleInnerSubscriber(this)))},s.prototype._complete=function(){this.hasCompleted=!0,this.hasCompleted&&this.active===0&&this.destination.complete(),this.unsubscribe()},s.prototype.notifyNext=function(d){this._next(d)},s.prototype.notifyComplete=function(){var d=this.buffer;this.active--,d&&d.length>0&&this._next(d.shift()),this.hasCompleted&&this.active===0&&this.destination.complete()},s}(SimpleOuterSubscriber);function finalize(a){return function(s){return s.lift(new FinallyOperator(a))}}var FinallyOperator=function(){function a(s){this.callback=s}return a.prototype.call=function(s,d){return d.subscribe(new FinallySubscriber(s,this.callback))},a}(),FinallySubscriber=function(a){__extends(s,a);function s(d,c){var m=a.call(this,d)||this;return m.add(new Subscription(c)),m}return s}(Subscriber);function find$1(a,s){if(typeof a!="function")throw new TypeError("predicate is not a function");return function(d){return d.lift(new FindValueOperator(a,d,!1,s))}}var FindValueOperator=function(){function a(s,d,c,m){this.predicate=s,this.source=d,this.yieldIndex=c,this.thisArg=m}return a.prototype.call=function(s,d){return d.subscribe(new FindValueSubscriber(s,this.predicate,this.source,this.yieldIndex,this.thisArg))},a}(),FindValueSubscriber=function(a){__extends(s,a);function s(d,c,m,g,b){var k=a.call(this,d)||this;return k.predicate=c,k.source=m,k.yieldIndex=g,k.thisArg=b,k.index=0,k}return s.prototype.notifyComplete=function(d){var c=this.destination;c.next(d),c.complete(),this.unsubscribe()},s.prototype._next=function(d){var c=this,m=c.predicate,g=c.thisArg,b=this.index++;try{var k=m.call(g||this,d,b,this.source);k&&this.notifyComplete(this.yieldIndex?b:d)}catch(et){this.destination.error(et)}},s.prototype._complete=function(){this.notifyComplete(this.yieldIndex?-1:void 0)},s}(Subscriber);function findIndex(a,s){return function(d){return d.lift(new FindValueOperator(a,d,!0,s))}}function first(a,s){var d=arguments.length>=2;return function(c){return c.pipe(a?filter(function(m,g){return a(m,g,c)}):identity,take(1),d?defaultIfEmpty(s):throwIfEmpty(function(){return new EmptyError}))}}var ObjectUnsubscribedErrorImpl=function(){function a(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return a.prototype=Object.create(Error.prototype),a}(),ObjectUnsubscribedError=ObjectUnsubscribedErrorImpl,SubjectSubscription=function(a){__extends(s,a);function s(d,c){var m=a.call(this)||this;return m.subject=d,m.subscriber=c,m.closed=!1,m}return s.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var d=this.subject,c=d.observers;if(this.subject=null,!(!c||c.length===0||d.isStopped||d.closed)){var m=c.indexOf(this.subscriber);m!==-1&&c.splice(m,1)}}},s}(Subscription),SubjectSubscriber=function(a){__extends(s,a);function s(d){var c=a.call(this,d)||this;return c.destination=d,c}return s}(Subscriber),Subject=function(a){__extends(s,a);function s(){var d=a.call(this)||this;return d.observers=[],d.closed=!1,d.isStopped=!1,d.hasError=!1,d.thrownError=null,d}return s.prototype[rxSubscriber]=function(){return new SubjectSubscriber(this)},s.prototype.lift=function(d){var c=new AnonymousSubject(this,this);return c.operator=d,c},s.prototype.next=function(d){if(this.closed)throw new ObjectUnsubscribedError;if(!this.isStopped)for(var c=this.observers,m=c.length,g=c.slice(),b=0;b<m;b++)g[b].next(d)},s.prototype.error=function(d){if(this.closed)throw new ObjectUnsubscribedError;this.hasError=!0,this.thrownError=d,this.isStopped=!0;for(var c=this.observers,m=c.length,g=c.slice(),b=0;b<m;b++)g[b].error(d);this.observers.length=0},s.prototype.complete=function(){if(this.closed)throw new ObjectUnsubscribedError;this.isStopped=!0;for(var d=this.observers,c=d.length,m=d.slice(),g=0;g<c;g++)m[g].complete();this.observers.length=0},s.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},s.prototype._trySubscribe=function(d){if(this.closed)throw new ObjectUnsubscribedError;return a.prototype._trySubscribe.call(this,d)},s.prototype._subscribe=function(d){if(this.closed)throw new ObjectUnsubscribedError;return this.hasError?(d.error(this.thrownError),Subscription.EMPTY):this.isStopped?(d.complete(),Subscription.EMPTY):(this.observers.push(d),new SubjectSubscription(this,d))},s.prototype.asObservable=function(){var d=new Observable;return d.source=this,d},s.create=function(d,c){return new AnonymousSubject(d,c)},s}(Observable),AnonymousSubject=function(a){__extends(s,a);function s(d,c){var m=a.call(this)||this;return m.destination=d,m.source=c,m}return s.prototype.next=function(d){var c=this.destination;c&&c.next&&c.next(d)},s.prototype.error=function(d){var c=this.destination;c&&c.error&&this.destination.error(d)},s.prototype.complete=function(){var d=this.destination;d&&d.complete&&this.destination.complete()},s.prototype._subscribe=function(d){var c=this.source;return c?this.source.subscribe(d):Subscription.EMPTY},s}(Subject);function groupBy(a,s,d,c){return function(m){return m.lift(new GroupByOperator(a,s,d,c))}}var GroupByOperator=function(){function a(s,d,c,m){this.keySelector=s,this.elementSelector=d,this.durationSelector=c,this.subjectSelector=m}return a.prototype.call=function(s,d){return d.subscribe(new GroupBySubscriber(s,this.keySelector,this.elementSelector,this.durationSelector,this.subjectSelector))},a}(),GroupBySubscriber=function(a){__extends(s,a);function s(d,c,m,g,b){var k=a.call(this,d)||this;return k.keySelector=c,k.elementSelector=m,k.durationSelector=g,k.subjectSelector=b,k.groups=null,k.attemptedToUnsubscribe=!1,k.count=0,k}return s.prototype._next=function(d){var c;try{c=this.keySelector(d)}catch(m){this.error(m);return}this._group(d,c)},s.prototype._group=function(d,c){var m=this.groups;m||(m=this.groups=new Map);var g=m.get(c),b;if(this.elementSelector)try{b=this.elementSelector(d)}catch(nt){this.error(nt)}else b=d;if(!g){g=this.subjectSelector?this.subjectSelector():new Subject,m.set(c,g);var k=new GroupedObservable(c,g,this);if(this.destination.next(k),this.durationSelector){var et=void 0;try{et=this.durationSelector(new GroupedObservable(c,g))}catch(nt){this.error(nt);return}this.add(et.subscribe(new GroupDurationSubscriber(c,g,this)))}}g.closed||g.next(b)},s.prototype._error=function(d){var c=this.groups;c&&(c.forEach(function(m,g){m.error(d)}),c.clear()),this.destination.error(d)},s.prototype._complete=function(){var d=this.groups;d&&(d.forEach(function(c,m){c.complete()}),d.clear()),this.destination.complete()},s.prototype.removeGroup=function(d){this.groups.delete(d)},s.prototype.unsubscribe=function(){this.closed||(this.attemptedToUnsubscribe=!0,this.count===0&&a.prototype.unsubscribe.call(this))},s}(Subscriber),GroupDurationSubscriber=function(a){__extends(s,a);function s(d,c,m){var g=a.call(this,c)||this;return g.key=d,g.group=c,g.parent=m,g}return s.prototype._next=function(d){this.complete()},s.prototype._unsubscribe=function(){var d=this,c=d.parent,m=d.key;this.key=this.parent=null,c&&c.removeGroup(m)},s}(Subscriber),GroupedObservable=function(a){__extends(s,a);function s(d,c,m){var g=a.call(this)||this;return g.key=d,g.groupSubject=c,g.refCountSubscription=m,g}return s.prototype._subscribe=function(d){var c=new Subscription,m=this,g=m.refCountSubscription,b=m.groupSubject;return g&&!g.closed&&c.add(new InnerRefCountSubscription(g)),c.add(b.subscribe(d)),c},s}(Observable),InnerRefCountSubscription=function(a){__extends(s,a);function s(d){var c=a.call(this)||this;return c.parent=d,d.count++,c}return s.prototype.unsubscribe=function(){var d=this.parent;!d.closed&&!this.closed&&(a.prototype.unsubscribe.call(this),d.count-=1,d.count===0&&d.attemptedToUnsubscribe&&d.unsubscribe())},s}(Subscription);function ignoreElements(){return function(s){return s.lift(new IgnoreElementsOperator)}}var IgnoreElementsOperator=function(){function a(){}return a.prototype.call=function(s,d){return d.subscribe(new IgnoreElementsSubscriber(s))},a}(),IgnoreElementsSubscriber=function(a){__extends(s,a);function s(){return a!==null&&a.apply(this,arguments)||this}return s.prototype._next=function(d){},s}(Subscriber);function isEmpty(){return function(a){return a.lift(new IsEmptyOperator)}}var IsEmptyOperator=function(){function a(){}return a.prototype.call=function(s,d){return d.subscribe(new IsEmptySubscriber(s))},a}(),IsEmptySubscriber=function(a){__extends(s,a);function s(d){return a.call(this,d)||this}return s.prototype.notifyComplete=function(d){var c=this.destination;c.next(d),c.complete()},s.prototype._next=function(d){this.notifyComplete(!1)},s.prototype._complete=function(){this.notifyComplete(!0)},s}(Subscriber);function takeLast(a){return function(d){return a===0?empty$1():d.lift(new TakeLastOperator(a))}}var TakeLastOperator=function(){function a(s){if(this.total=s,this.total<0)throw new ArgumentOutOfRangeError}return a.prototype.call=function(s,d){return d.subscribe(new TakeLastSubscriber(s,this.total))},a}(),TakeLastSubscriber=function(a){__extends(s,a);function s(d,c){var m=a.call(this,d)||this;return m.total=c,m.ring=new Array,m.count=0,m}return s.prototype._next=function(d){var c=this.ring,m=this.total,g=this.count++;if(c.length<m)c.push(d);else{var b=g%m;c[b]=d}},s.prototype._complete=function(){var d=this.destination,c=this.count;if(c>0)for(var m=this.count>=this.total?this.total:this.count,g=this.ring,b=0;b<m;b++){var k=c++%m;d.next(g[k])}d.complete()},s}(Subscriber);function last(a,s){var d=arguments.length>=2;return function(c){return c.pipe(a?filter(function(m,g){return a(m,g,c)}):identity,takeLast(1),d?defaultIfEmpty(s):throwIfEmpty(function(){return new EmptyError}))}}function mapTo(a){return function(s){return s.lift(new MapToOperator(a))}}var MapToOperator=function(){function a(s){this.value=s}return a.prototype.call=function(s,d){return d.subscribe(new MapToSubscriber(s,this.value))},a}(),MapToSubscriber=function(a){__extends(s,a);function s(d,c){var m=a.call(this,d)||this;return m.value=c,m}return s.prototype._next=function(d){this.destination.next(this.value)},s}(Subscriber);function materialize(){return function(s){return s.lift(new MaterializeOperator)}}var MaterializeOperator=function(){function a(){}return a.prototype.call=function(s,d){return d.subscribe(new MaterializeSubscriber(s))},a}(),MaterializeSubscriber=function(a){__extends(s,a);function s(d){return a.call(this,d)||this}return s.prototype._next=function(d){this.destination.next(Notification.createNext(d))},s.prototype._error=function(d){var c=this.destination;c.next(Notification.createError(d)),c.complete()},s.prototype._complete=function(){var d=this.destination;d.next(Notification.createComplete()),d.complete()},s}(Subscriber);function scan(a,s){var d=!1;return arguments.length>=2&&(d=!0),function(m){return m.lift(new ScanOperator(a,s,d))}}var ScanOperator=function(){function a(s,d,c){c===void 0&&(c=!1),this.accumulator=s,this.seed=d,this.hasSeed=c}return a.prototype.call=function(s,d){return d.subscribe(new ScanSubscriber(s,this.accumulator,this.seed,this.hasSeed))},a}(),ScanSubscriber=function(a){__extends(s,a);function s(d,c,m,g){var b=a.call(this,d)||this;return b.accumulator=c,b._seed=m,b.hasSeed=g,b.index=0,b}return Object.defineProperty(s.prototype,"seed",{get:function(){return this._seed},set:function(d){this.hasSeed=!0,this._seed=d},enumerable:!0,configurable:!0}),s.prototype._next=function(d){if(!this.hasSeed)this.seed=d,this.destination.next(d);else return this._tryNext(d)},s.prototype._tryNext=function(d){var c=this.index++,m;try{m=this.accumulator(this.seed,d,c)}catch(g){this.destination.error(g)}this.seed=m,this.destination.next(m)},s}(Subscriber);function reduce(a,s){return arguments.length>=2?function(c){return pipe(scan(a,s),takeLast(1),defaultIfEmpty(s))(c)}:function(c){return pipe(scan(function(m,g,b){return a(m,g,b+1)}),takeLast(1))(c)}}function max(a){var s=typeof a=="function"?function(d,c){return a(d,c)>0?d:c}:function(d,c){return d>c?d:c};return reduce(s)}function merge$2(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];var d=Number.POSITIVE_INFINITY,c=null,m=a[a.length-1];return isScheduler(m)?(c=a.pop(),a.length>1&&typeof a[a.length-1]=="number"&&(d=a.pop())):typeof m=="number"&&(d=a.pop()),c===null&&a.length===1&&a[0]instanceof Observable?a[0]:mergeAll(d)(fromArray(a,c))}function merge$1(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];return function(d){return d.lift.call(merge$2.apply(void 0,[d].concat(a)))}}function mergeMapTo(a,s,d){return d===void 0&&(d=Number.POSITIVE_INFINITY),typeof s=="function"?mergeMap(function(){return a},s,d):(typeof s=="number"&&(d=s),mergeMap(function(){return a},d))}function mergeScan(a,s,d){return d===void 0&&(d=Number.POSITIVE_INFINITY),function(c){return c.lift(new MergeScanOperator(a,s,d))}}var MergeScanOperator=function(){function a(s,d,c){this.accumulator=s,this.seed=d,this.concurrent=c}return a.prototype.call=function(s,d){return d.subscribe(new MergeScanSubscriber(s,this.accumulator,this.seed,this.concurrent))},a}(),MergeScanSubscriber=function(a){__extends(s,a);function s(d,c,m,g){var b=a.call(this,d)||this;return b.accumulator=c,b.acc=m,b.concurrent=g,b.hasValue=!1,b.hasCompleted=!1,b.buffer=[],b.active=0,b.index=0,b}return s.prototype._next=function(d){if(this.active<this.concurrent){var c=this.index++,m=this.destination,g=void 0;try{var b=this.accumulator;g=b(this.acc,d,c)}catch(k){return m.error(k)}this.active++,this._innerSub(g)}else this.buffer.push(d)},s.prototype._innerSub=function(d){var c=new SimpleInnerSubscriber(this),m=this.destination;m.add(c);var g=innerSubscribe(d,c);g!==c&&m.add(g)},s.prototype._complete=function(){this.hasCompleted=!0,this.active===0&&this.buffer.length===0&&(this.hasValue===!1&&this.destination.next(this.acc),this.destination.complete()),this.unsubscribe()},s.prototype.notifyNext=function(d){var c=this.destination;this.acc=d,this.hasValue=!0,c.next(d)},s.prototype.notifyComplete=function(){var d=this.buffer;this.active--,d.length>0?this._next(d.shift()):this.active===0&&this.hasCompleted&&(this.hasValue===!1&&this.destination.next(this.acc),this.destination.complete())},s}(SimpleOuterSubscriber);function min(a){var s=typeof a=="function"?function(d,c){return a(d,c)<0?d:c}:function(d,c){return d<c?d:c};return reduce(s)}function refCount(){return function(s){return s.lift(new RefCountOperator(s))}}var RefCountOperator=function(){function a(s){this.connectable=s}return a.prototype.call=function(s,d){var c=this.connectable;c._refCount++;var m=new RefCountSubscriber(s,c),g=d.subscribe(m);return m.closed||(m.connection=c.connect()),g},a}(),RefCountSubscriber=function(a){__extends(s,a);function s(d,c){var m=a.call(this,d)||this;return m.connectable=c,m}return s.prototype._unsubscribe=function(){var d=this.connectable;if(!d){this.connection=null;return}this.connectable=null;var c=d._refCount;if(c<=0){this.connection=null;return}if(d._refCount=c-1,c>1){this.connection=null;return}var m=this.connection,g=d._connection;this.connection=null,g&&(!m||g===m)&&g.unsubscribe()},s}(Subscriber),ConnectableObservable=function(a){__extends(s,a);function s(d,c){var m=a.call(this)||this;return m.source=d,m.subjectFactory=c,m._refCount=0,m._isComplete=!1,m}return s.prototype._subscribe=function(d){return this.getSubject().subscribe(d)},s.prototype.getSubject=function(){var d=this._subject;return(!d||d.isStopped)&&(this._subject=this.subjectFactory()),this._subject},s.prototype.connect=function(){var d=this._connection;return d||(this._isComplete=!1,d=this._connection=new Subscription,d.add(this.source.subscribe(new ConnectableSubscriber(this.getSubject(),this))),d.closed&&(this._connection=null,d=Subscription.EMPTY)),d},s.prototype.refCount=function(){return refCount()(this)},s}(Observable),connectableObservableDescriptor=function(){var a=ConnectableObservable.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:a._subscribe},_isComplete:{value:a._isComplete,writable:!0},getSubject:{value:a.getSubject},connect:{value:a.connect},refCount:{value:a.refCount}}}(),ConnectableSubscriber=function(a){__extends(s,a);function s(d,c){var m=a.call(this,d)||this;return m.connectable=c,m}return s.prototype._error=function(d){this._unsubscribe(),a.prototype._error.call(this,d)},s.prototype._complete=function(){this.connectable._isComplete=!0,this._unsubscribe(),a.prototype._complete.call(this)},s.prototype._unsubscribe=function(){var d=this.connectable;if(d){this.connectable=null;var c=d._connection;d._refCount=0,d._subject=null,d._connection=null,c&&c.unsubscribe()}},s}(SubjectSubscriber);function multicast(a,s){return function(c){var m;if(typeof a=="function"?m=a:m=function(){return a},typeof s=="function")return c.lift(new MulticastOperator(m,s));var g=Object.create(c,connectableObservableDescriptor);return g.source=c,g.subjectFactory=m,g}}var MulticastOperator=function(){function a(s,d){this.subjectFactory=s,this.selector=d}return a.prototype.call=function(s,d){var c=this.selector,m=this.subjectFactory(),g=c(m).subscribe(s);return g.add(d.subscribe(m)),g},a}();function observeOn(a,s){return s===void 0&&(s=0),function(c){return c.lift(new ObserveOnOperator(a,s))}}var ObserveOnOperator=function(){function a(s,d){d===void 0&&(d=0),this.scheduler=s,this.delay=d}return a.prototype.call=function(s,d){return d.subscribe(new ObserveOnSubscriber(s,this.scheduler,this.delay))},a}(),ObserveOnSubscriber=function(a){__extends(s,a);function s(d,c,m){m===void 0&&(m=0);var g=a.call(this,d)||this;return g.scheduler=c,g.delay=m,g}return s.dispatch=function(d){var c=d.notification,m=d.destination;c.observe(m),this.unsubscribe()},s.prototype.scheduleMessage=function(d){var c=this.destination;c.add(this.scheduler.schedule(s.dispatch,this.delay,new ObserveOnMessage(d,this.destination)))},s.prototype._next=function(d){this.scheduleMessage(Notification.createNext(d))},s.prototype._error=function(d){this.scheduleMessage(Notification.createError(d)),this.unsubscribe()},s.prototype._complete=function(){this.scheduleMessage(Notification.createComplete()),this.unsubscribe()},s}(Subscriber),ObserveOnMessage=function(){function a(s,d){this.notification=s,this.destination=d}return a}();function onErrorResumeNext(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];return a.length===1&&isArray$2(a[0])&&(a=a[0]),function(d){return d.lift(new OnErrorResumeNextOperator(a))}}var OnErrorResumeNextOperator=function(){function a(s){this.nextSources=s}return a.prototype.call=function(s,d){return d.subscribe(new OnErrorResumeNextSubscriber(s,this.nextSources))},a}(),OnErrorResumeNextSubscriber=function(a){__extends(s,a);function s(d,c){var m=a.call(this,d)||this;return m.destination=d,m.nextSources=c,m}return s.prototype.notifyError=function(){this.subscribeToNextSource()},s.prototype.notifyComplete=function(){this.subscribeToNextSource()},s.prototype._error=function(d){this.subscribeToNextSource(),this.unsubscribe()},s.prototype._complete=function(){this.subscribeToNextSource(),this.unsubscribe()},s.prototype.subscribeToNextSource=function(){var d=this.nextSources.shift();if(d){var c=new SimpleInnerSubscriber(this),m=this.destination;m.add(c);var g=innerSubscribe(d,c);g!==c&&m.add(g)}else this.destination.complete()},s}(SimpleOuterSubscriber);function pairwise(){return function(a){return a.lift(new PairwiseOperator)}}var PairwiseOperator=function(){function a(){}return a.prototype.call=function(s,d){return d.subscribe(new PairwiseSubscriber(s))},a}(),PairwiseSubscriber=function(a){__extends(s,a);function s(d){var c=a.call(this,d)||this;return c.hasPrev=!1,c}return s.prototype._next=function(d){var c;this.hasPrev?c=[this.prev,d]:this.hasPrev=!0,this.prev=d,c&&this.destination.next(c)},s}(Subscriber);function not(a,s){function d(){return!d.pred.apply(d.thisArg,arguments)}return d.pred=a,d.thisArg=s,d}function partition(a,s){return function(d){return[filter(a,s)(d),filter(not(a,s))(d)]}}function pluck(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];var d=a.length;if(d===0)throw new Error("list of properties cannot be empty.");return function(c){return map(plucker(a,d))(c)}}function plucker(a,s){var d=function(c){for(var m=c,g=0;g<s;g++){var b=m!=null?m[a[g]]:void 0;if(b!==void 0)m=b;else return}return m};return d}function publish(a){return a?multicast(function(){return new Subject},a):multicast(new Subject)}var BehaviorSubject=function(a){__extends(s,a);function s(d){var c=a.call(this)||this;return c._value=d,c}return Object.defineProperty(s.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),s.prototype._subscribe=function(d){var c=a.prototype._subscribe.call(this,d);return c&&!c.closed&&d.next(this._value),c},s.prototype.getValue=function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new ObjectUnsubscribedError;return this._value},s.prototype.next=function(d){a.prototype.next.call(this,this._value=d)},s}(Subject);function publishBehavior(a){return function(s){return multicast(new BehaviorSubject(a))(s)}}var AsyncSubject=function(a){__extends(s,a);function s(){var d=a!==null&&a.apply(this,arguments)||this;return d.value=null,d.hasNext=!1,d.hasCompleted=!1,d}return s.prototype._subscribe=function(d){return this.hasError?(d.error(this.thrownError),Subscription.EMPTY):this.hasCompleted&&this.hasNext?(d.next(this.value),d.complete(),Subscription.EMPTY):a.prototype._subscribe.call(this,d)},s.prototype.next=function(d){this.hasCompleted||(this.value=d,this.hasNext=!0)},s.prototype.error=function(d){this.hasCompleted||a.prototype.error.call(this,d)},s.prototype.complete=function(){this.hasCompleted=!0,this.hasNext&&a.prototype.next.call(this,this.value),a.prototype.complete.call(this)},s}(Subject);function publishLast(){return function(a){return multicast(new AsyncSubject)(a)}}var QueueAction=function(a){__extends(s,a);function s(d,c){var m=a.call(this,d,c)||this;return m.scheduler=d,m.work=c,m}return s.prototype.schedule=function(d,c){return c===void 0&&(c=0),c>0?a.prototype.schedule.call(this,d,c):(this.delay=c,this.state=d,this.scheduler.flush(this),this)},s.prototype.execute=function(d,c){return c>0||this.closed?a.prototype.execute.call(this,d,c):this._execute(d,c)},s.prototype.requestAsyncId=function(d,c,m){return m===void 0&&(m=0),m!==null&&m>0||m===null&&this.delay>0?a.prototype.requestAsyncId.call(this,d,c,m):d.flush(this)},s}(AsyncAction),QueueScheduler=function(a){__extends(s,a);function s(){return a!==null&&a.apply(this,arguments)||this}return s}(AsyncScheduler),queueScheduler=new QueueScheduler(QueueAction),queue=queueScheduler,ReplaySubject=function(a){__extends(s,a);function s(d,c,m){d===void 0&&(d=Number.POSITIVE_INFINITY),c===void 0&&(c=Number.POSITIVE_INFINITY);var g=a.call(this)||this;return g.scheduler=m,g._events=[],g._infiniteTimeWindow=!1,g._bufferSize=d<1?1:d,g._windowTime=c<1?1:c,c===Number.POSITIVE_INFINITY?(g._infiniteTimeWindow=!0,g.next=g.nextInfiniteTimeWindow):g.next=g.nextTimeWindow,g}return s.prototype.nextInfiniteTimeWindow=function(d){if(!this.isStopped){var c=this._events;c.push(d),c.length>this._bufferSize&&c.shift()}a.prototype.next.call(this,d)},s.prototype.nextTimeWindow=function(d){this.isStopped||(this._events.push(new ReplayEvent(this._getNow(),d)),this._trimBufferThenGetEvents()),a.prototype.next.call(this,d)},s.prototype._subscribe=function(d){var c=this._infiniteTimeWindow,m=c?this._events:this._trimBufferThenGetEvents(),g=this.scheduler,b=m.length,k;if(this.closed)throw new ObjectUnsubscribedError;if(this.isStopped||this.hasError?k=Subscription.EMPTY:(this.observers.push(d),k=new SubjectSubscription(this,d)),g&&d.add(d=new ObserveOnSubscriber(d,g)),c)for(var et=0;et<b&&!d.closed;et++)d.next(m[et]);else for(var et=0;et<b&&!d.closed;et++)d.next(m[et].value);return this.hasError?d.error(this.thrownError):this.isStopped&&d.complete(),k},s.prototype._getNow=function(){return(this.scheduler||queue).now()},s.prototype._trimBufferThenGetEvents=function(){for(var d=this._getNow(),c=this._bufferSize,m=this._windowTime,g=this._events,b=g.length,k=0;k<b&&!(d-g[k].time<m);)k++;return b>c&&(k=Math.max(k,b-c)),k>0&&g.splice(0,k),g},s}(Subject),ReplayEvent=function(){function a(s,d){this.time=s,this.value=d}return a}();function publishReplay(a,s,d,c){d&&typeof d!="function"&&(c=d);var m=typeof d=="function"?d:void 0,g=new ReplaySubject(a,s,c);return function(b){return multicast(function(){return g},m)(b)}}function race$1(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];if(a.length===1)if(isArray$2(a[0]))a=a[0];else return a[0];return fromArray(a,void 0).lift(new RaceOperator)}var RaceOperator=function(){function a(){}return a.prototype.call=function(s,d){return d.subscribe(new RaceSubscriber(s))},a}(),RaceSubscriber=function(a){__extends(s,a);function s(d){var c=a.call(this,d)||this;return c.hasFirst=!1,c.observables=[],c.subscriptions=[],c}return s.prototype._next=function(d){this.observables.push(d)},s.prototype._complete=function(){var d=this.observables,c=d.length;if(c===0)this.destination.complete();else{for(var m=0;m<c&&!this.hasFirst;m++){var g=d[m],b=subscribeToResult(this,g,void 0,m);this.subscriptions&&this.subscriptions.push(b),this.add(b)}this.observables=null}},s.prototype.notifyNext=function(d,c,m){if(!this.hasFirst){this.hasFirst=!0;for(var g=0;g<this.subscriptions.length;g++)if(g!==m){var b=this.subscriptions[g];b.unsubscribe(),this.remove(b)}this.subscriptions=null}this.destination.next(c)},s}(OuterSubscriber);function race(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];return function(c){return a.length===1&&isArray$2(a[0])&&(a=a[0]),c.lift.call(race$1.apply(void 0,[c].concat(a)))}}function repeat(a){return a===void 0&&(a=-1),function(s){return a===0?empty$1():a<0?s.lift(new RepeatOperator(-1,s)):s.lift(new RepeatOperator(a-1,s))}}var RepeatOperator=function(){function a(s,d){this.count=s,this.source=d}return a.prototype.call=function(s,d){return d.subscribe(new RepeatSubscriber(s,this.count,this.source))},a}(),RepeatSubscriber=function(a){__extends(s,a);function s(d,c,m){var g=a.call(this,d)||this;return g.count=c,g.source=m,g}return s.prototype.complete=function(){if(!this.isStopped){var d=this,c=d.source,m=d.count;if(m===0)return a.prototype.complete.call(this);m>-1&&(this.count=m-1),c.subscribe(this._unsubscribeAndRecycle())}},s}(Subscriber);function repeatWhen(a){return function(s){return s.lift(new RepeatWhenOperator(a))}}var RepeatWhenOperator=function(){function a(s){this.notifier=s}return a.prototype.call=function(s,d){return d.subscribe(new RepeatWhenSubscriber(s,this.notifier,d))},a}(),RepeatWhenSubscriber=function(a){__extends(s,a);function s(d,c,m){var g=a.call(this,d)||this;return g.notifier=c,g.source=m,g.sourceIsBeingSubscribedTo=!0,g}return s.prototype.notifyNext=function(){this.sourceIsBeingSubscribedTo=!0,this.source.subscribe(this)},s.prototype.notifyComplete=function(){if(this.sourceIsBeingSubscribedTo===!1)return a.prototype.complete.call(this)},s.prototype.complete=function(){if(this.sourceIsBeingSubscribedTo=!1,!this.isStopped){if(this.retries||this.subscribeToRetries(),!this.retriesSubscription||this.retriesSubscription.closed)return a.prototype.complete.call(this);this._unsubscribeAndRecycle(),this.notifications.next(void 0)}},s.prototype._unsubscribe=function(){var d=this,c=d.notifications,m=d.retriesSubscription;c&&(c.unsubscribe(),this.notifications=void 0),m&&(m.unsubscribe(),this.retriesSubscription=void 0),this.retries=void 0},s.prototype._unsubscribeAndRecycle=function(){var d=this._unsubscribe;return this._unsubscribe=null,a.prototype._unsubscribeAndRecycle.call(this),this._unsubscribe=d,this},s.prototype.subscribeToRetries=function(){this.notifications=new Subject;var d;try{var c=this.notifier;d=c(this.notifications)}catch{return a.prototype.complete.call(this)}this.retries=d,this.retriesSubscription=innerSubscribe(d,new SimpleInnerSubscriber(this))},s}(SimpleOuterSubscriber);function retry(a){return a===void 0&&(a=-1),function(s){return s.lift(new RetryOperator(a,s))}}var RetryOperator=function(){function a(s,d){this.count=s,this.source=d}return a.prototype.call=function(s,d){return d.subscribe(new RetrySubscriber(s,this.count,this.source))},a}(),RetrySubscriber=function(a){__extends(s,a);function s(d,c,m){var g=a.call(this,d)||this;return g.count=c,g.source=m,g}return s.prototype.error=function(d){if(!this.isStopped){var c=this,m=c.source,g=c.count;if(g===0)return a.prototype.error.call(this,d);g>-1&&(this.count=g-1),m.subscribe(this._unsubscribeAndRecycle())}},s}(Subscriber);function retryWhen(a){return function(s){return s.lift(new RetryWhenOperator(a,s))}}var RetryWhenOperator=function(){function a(s,d){this.notifier=s,this.source=d}return a.prototype.call=function(s,d){return d.subscribe(new RetryWhenSubscriber(s,this.notifier,this.source))},a}(),RetryWhenSubscriber=function(a){__extends(s,a);function s(d,c,m){var g=a.call(this,d)||this;return g.notifier=c,g.source=m,g}return s.prototype.error=function(d){if(!this.isStopped){var c=this.errors,m=this.retries,g=this.retriesSubscription;if(m)this.errors=void 0,this.retriesSubscription=void 0;else{c=new Subject;try{var b=this.notifier;m=b(c)}catch(k){return a.prototype.error.call(this,k)}g=innerSubscribe(m,new SimpleInnerSubscriber(this))}this._unsubscribeAndRecycle(),this.errors=c,this.retries=m,this.retriesSubscription=g,c.next(d)}},s.prototype._unsubscribe=function(){var d=this,c=d.errors,m=d.retriesSubscription;c&&(c.unsubscribe(),this.errors=void 0),m&&(m.unsubscribe(),this.retriesSubscription=void 0),this.retries=void 0},s.prototype.notifyNext=function(){var d=this._unsubscribe;this._unsubscribe=null,this._unsubscribeAndRecycle(),this._unsubscribe=d,this.source.subscribe(this)},s}(SimpleOuterSubscriber);function sample(a){return function(s){return s.lift(new SampleOperator(a))}}var SampleOperator=function(){function a(s){this.notifier=s}return a.prototype.call=function(s,d){var c=new SampleSubscriber(s),m=d.subscribe(c);return m.add(innerSubscribe(this.notifier,new SimpleInnerSubscriber(c))),m},a}(),SampleSubscriber=function(a){__extends(s,a);function s(){var d=a!==null&&a.apply(this,arguments)||this;return d.hasValue=!1,d}return s.prototype._next=function(d){this.value=d,this.hasValue=!0},s.prototype.notifyNext=function(){this.emitValue()},s.prototype.notifyComplete=function(){this.emitValue()},s.prototype.emitValue=function(){this.hasValue&&(this.hasValue=!1,this.destination.next(this.value))},s}(SimpleOuterSubscriber);function sampleTime(a,s){return s===void 0&&(s=async),function(d){return d.lift(new SampleTimeOperator(a,s))}}var SampleTimeOperator=function(){function a(s,d){this.period=s,this.scheduler=d}return a.prototype.call=function(s,d){return d.subscribe(new SampleTimeSubscriber(s,this.period,this.scheduler))},a}(),SampleTimeSubscriber=function(a){__extends(s,a);function s(d,c,m){var g=a.call(this,d)||this;return g.period=c,g.scheduler=m,g.hasValue=!1,g.add(m.schedule(dispatchNotification,c,{subscriber:g,period:c})),g}return s.prototype._next=function(d){this.lastValue=d,this.hasValue=!0},s.prototype.notifyNext=function(){this.hasValue&&(this.hasValue=!1,this.destination.next(this.lastValue))},s}(Subscriber);function dispatchNotification(a){var s=a.subscriber,d=a.period;s.notifyNext(),this.schedule(a,d)}function sequenceEqual(a,s){return function(d){return d.lift(new SequenceEqualOperator(a,s))}}var SequenceEqualOperator=function(){function a(s,d){this.compareTo=s,this.comparator=d}return a.prototype.call=function(s,d){return d.subscribe(new SequenceEqualSubscriber(s,this.compareTo,this.comparator))},a}(),SequenceEqualSubscriber=function(a){__extends(s,a);function s(d,c,m){var g=a.call(this,d)||this;return g.compareTo=c,g.comparator=m,g._a=[],g._b=[],g._oneComplete=!1,g.destination.add(c.subscribe(new SequenceEqualCompareToSubscriber(d,g))),g}return s.prototype._next=function(d){this._oneComplete&&this._b.length===0?this.emit(!1):(this._a.push(d),this.checkValues())},s.prototype._complete=function(){this._oneComplete?this.emit(this._a.length===0&&this._b.length===0):this._oneComplete=!0,this.unsubscribe()},s.prototype.checkValues=function(){for(var d=this,c=d._a,m=d._b,g=d.comparator;c.length>0&&m.length>0;){var b=c.shift(),k=m.shift(),et=!1;try{et=g?g(b,k):b===k}catch(nt){this.destination.error(nt)}et||this.emit(!1)}},s.prototype.emit=function(d){var c=this.destination;c.next(d),c.complete()},s.prototype.nextB=function(d){this._oneComplete&&this._a.length===0?this.emit(!1):(this._b.push(d),this.checkValues())},s.prototype.completeB=function(){this._oneComplete?this.emit(this._a.length===0&&this._b.length===0):this._oneComplete=!0},s}(Subscriber),SequenceEqualCompareToSubscriber=function(a){__extends(s,a);function s(d,c){var m=a.call(this,d)||this;return m.parent=c,m}return s.prototype._next=function(d){this.parent.nextB(d)},s.prototype._error=function(d){this.parent.error(d),this.unsubscribe()},s.prototype._complete=function(){this.parent.completeB(),this.unsubscribe()},s}(Subscriber);function shareSubjectFactory(){return new Subject}function share(){return function(a){return refCount()(multicast(shareSubjectFactory)(a))}}function shareReplay(a,s,d){var c;return a&&typeof a=="object"?c=a:c={bufferSize:a,windowTime:s,refCount:!1,scheduler:d},function(m){return m.lift(shareReplayOperator(c))}}function shareReplayOperator(a){var s=a.bufferSize,d=s===void 0?Number.POSITIVE_INFINITY:s,c=a.windowTime,m=c===void 0?Number.POSITIVE_INFINITY:c,g=a.refCount,b=a.scheduler,k,et=0,nt,it=!1,ct=!1;return function(ut){et++;var pt;!k||it?(it=!1,k=new ReplaySubject(d,m,b),pt=k.subscribe(this),nt=ut.subscribe({next:function(St){k.next(St)},error:function(St){it=!0,k.error(St)},complete:function(){ct=!0,nt=void 0,k.complete()}}),ct&&(nt=void 0)):pt=k.subscribe(this),this.add(function(){et--,pt.unsubscribe(),pt=void 0,nt&&!ct&&g&&et===0&&(nt.unsubscribe(),nt=void 0,k=void 0)})}}function single(a){return function(s){return s.lift(new SingleOperator(a,s))}}var SingleOperator=function(){function a(s,d){this.predicate=s,this.source=d}return a.prototype.call=function(s,d){return d.subscribe(new SingleSubscriber(s,this.predicate,this.source))},a}(),SingleSubscriber=function(a){__extends(s,a);function s(d,c,m){var g=a.call(this,d)||this;return g.predicate=c,g.source=m,g.seenValue=!1,g.index=0,g}return s.prototype.applySingleValue=function(d){this.seenValue?this.destination.error("Sequence contains more than one element"):(this.seenValue=!0,this.singleValue=d)},s.prototype._next=function(d){var c=this.index++;this.predicate?this.tryNext(d,c):this.applySingleValue(d)},s.prototype.tryNext=function(d,c){try{this.predicate(d,c,this.source)&&this.applySingleValue(d)}catch(m){this.destination.error(m)}},s.prototype._complete=function(){var d=this.destination;this.index>0?(d.next(this.seenValue?this.singleValue:void 0),d.complete()):d.error(new EmptyError)},s}(Subscriber);function skip(a){return function(s){return s.lift(new SkipOperator(a))}}var SkipOperator=function(){function a(s){this.total=s}return a.prototype.call=function(s,d){return d.subscribe(new SkipSubscriber(s,this.total))},a}(),SkipSubscriber=function(a){__extends(s,a);function s(d,c){var m=a.call(this,d)||this;return m.total=c,m.count=0,m}return s.prototype._next=function(d){++this.count>this.total&&this.destination.next(d)},s}(Subscriber);function skipLast(a){return function(s){return s.lift(new SkipLastOperator(a))}}var SkipLastOperator=function(){function a(s){if(this._skipCount=s,this._skipCount<0)throw new ArgumentOutOfRangeError}return a.prototype.call=function(s,d){return this._skipCount===0?d.subscribe(new Subscriber(s)):d.subscribe(new SkipLastSubscriber(s,this._skipCount))},a}(),SkipLastSubscriber=function(a){__extends(s,a);function s(d,c){var m=a.call(this,d)||this;return m._skipCount=c,m._count=0,m._ring=new Array(c),m}return s.prototype._next=function(d){var c=this._skipCount,m=this._count++;if(m<c)this._ring[m]=d;else{var g=m%c,b=this._ring,k=b[g];b[g]=d,this.destination.next(k)}},s}(Subscriber);function skipUntil(a){return function(s){return s.lift(new SkipUntilOperator(a))}}var SkipUntilOperator=function(){function a(s){this.notifier=s}return a.prototype.call=function(s,d){return d.subscribe(new SkipUntilSubscriber(s,this.notifier))},a}(),SkipUntilSubscriber=function(a){__extends(s,a);function s(d,c){var m=a.call(this,d)||this;m.hasValue=!1;var g=new SimpleInnerSubscriber(m);m.add(g),m.innerSubscription=g;var b=innerSubscribe(c,g);return b!==g&&(m.add(b),m.innerSubscription=b),m}return s.prototype._next=function(d){this.hasValue&&a.prototype._next.call(this,d)},s.prototype.notifyNext=function(){this.hasValue=!0,this.innerSubscription&&this.innerSubscription.unsubscribe()},s.prototype.notifyComplete=function(){},s}(SimpleOuterSubscriber);function skipWhile(a){return function(s){return s.lift(new SkipWhileOperator(a))}}var SkipWhileOperator=function(){function a(s){this.predicate=s}return a.prototype.call=function(s,d){return d.subscribe(new SkipWhileSubscriber(s,this.predicate))},a}(),SkipWhileSubscriber=function(a){__extends(s,a);function s(d,c){var m=a.call(this,d)||this;return m.predicate=c,m.skipping=!0,m.index=0,m}return s.prototype._next=function(d){var c=this.destination;this.skipping&&this.tryCallPredicate(d),this.skipping||c.next(d)},s.prototype.tryCallPredicate=function(d){try{var c=this.predicate(d,this.index++);this.skipping=Boolean(c)}catch(m){this.destination.error(m)}},s}(Subscriber);function startWith(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];var d=a[a.length-1];return isScheduler(d)?(a.pop(),function(c){return concat$1(a,c,d)}):function(c){return concat$1(a,c)}}var nextHandle=1,RESOLVED=function(){return Promise.resolve()}(),activeHandles={};function findAndClearHandle(a){return a in activeHandles?(delete activeHandles[a],!0):!1}var Immediate={setImmediate:function(a){var s=nextHandle++;return activeHandles[s]=!0,RESOLVED.then(function(){return findAndClearHandle(s)&&a()}),s},clearImmediate:function(a){findAndClearHandle(a)}},AsapAction=function(a){__extends(s,a);function s(d,c){var m=a.call(this,d,c)||this;return m.scheduler=d,m.work=c,m}return s.prototype.requestAsyncId=function(d,c,m){return m===void 0&&(m=0),m!==null&&m>0?a.prototype.requestAsyncId.call(this,d,c,m):(d.actions.push(this),d.scheduled||(d.scheduled=Immediate.setImmediate(d.flush.bind(d,null))))},s.prototype.recycleAsyncId=function(d,c,m){if(m===void 0&&(m=0),m!==null&&m>0||m===null&&this.delay>0)return a.prototype.recycleAsyncId.call(this,d,c,m);d.actions.length===0&&(Immediate.clearImmediate(c),d.scheduled=void 0)},s}(AsyncAction),AsapScheduler=function(a){__extends(s,a);function s(){return a!==null&&a.apply(this,arguments)||this}return s.prototype.flush=function(d){this.active=!0,this.scheduled=void 0;var c=this.actions,m,g=-1,b=c.length;d=d||c.shift();do if(m=d.execute(d.state,d.delay))break;while(++g<b&&(d=c.shift()));if(this.active=!1,m){for(;++g<b&&(d=c.shift());)d.unsubscribe();throw m}},s}(AsyncScheduler),asapScheduler=new AsapScheduler(AsapAction),asap=asapScheduler,SubscribeOnObservable=function(a){__extends(s,a);function s(d,c,m){c===void 0&&(c=0),m===void 0&&(m=asap);var g=a.call(this)||this;return g.source=d,g.delayTime=c,g.scheduler=m,(!isNumeric(c)||c<0)&&(g.delayTime=0),(!m||typeof m.schedule!="function")&&(g.scheduler=asap),g}return s.create=function(d,c,m){return c===void 0&&(c=0),m===void 0&&(m=asap),new s(d,c,m)},s.dispatch=function(d){var c=d.source,m=d.subscriber;return this.add(c.subscribe(m))},s.prototype._subscribe=function(d){var c=this.delayTime,m=this.source,g=this.scheduler;return g.schedule(s.dispatch,c,{source:m,subscriber:d})},s}(Observable);function subscribeOn(a,s){return s===void 0&&(s=0),function(c){return c.lift(new SubscribeOnOperator(a,s))}}var SubscribeOnOperator=function(){function a(s,d){this.scheduler=s,this.delay=d}return a.prototype.call=function(s,d){return new SubscribeOnObservable(d,this.delay,this.scheduler).subscribe(s)},a}();function switchMap(a,s){return typeof s=="function"?function(d){return d.pipe(switchMap(function(c,m){return from(a(c,m)).pipe(map(function(g,b){return s(c,g,m,b)}))}))}:function(d){return d.lift(new SwitchMapOperator(a))}}var SwitchMapOperator=function(){function a(s){this.project=s}return a.prototype.call=function(s,d){return d.subscribe(new SwitchMapSubscriber(s,this.project))},a}(),SwitchMapSubscriber=function(a){__extends(s,a);function s(d,c){var m=a.call(this,d)||this;return m.project=c,m.index=0,m}return s.prototype._next=function(d){var c,m=this.index++;try{c=this.project(d,m)}catch(g){this.destination.error(g);return}this._innerSub(c)},s.prototype._innerSub=function(d){var c=this.innerSubscription;c&&c.unsubscribe();var m=new SimpleInnerSubscriber(this),g=this.destination;g.add(m),this.innerSubscription=innerSubscribe(d,m),this.innerSubscription!==m&&g.add(this.innerSubscription)},s.prototype._complete=function(){var d=this.innerSubscription;(!d||d.closed)&&a.prototype._complete.call(this),this.unsubscribe()},s.prototype._unsubscribe=function(){this.innerSubscription=void 0},s.prototype.notifyComplete=function(){this.innerSubscription=void 0,this.isStopped&&a.prototype._complete.call(this)},s.prototype.notifyNext=function(d){this.destination.next(d)},s}(SimpleOuterSubscriber);function switchAll(){return switchMap(identity)}function switchMapTo(a,s){return s?switchMap(function(){return a},s):switchMap(function(){return a})}function takeUntil(a){return function(s){return s.lift(new TakeUntilOperator(a))}}var TakeUntilOperator=function(){function a(s){this.notifier=s}return a.prototype.call=function(s,d){var c=new TakeUntilSubscriber(s),m=innerSubscribe(this.notifier,new SimpleInnerSubscriber(c));return m&&!c.seenValue?(c.add(m),d.subscribe(c)):c},a}(),TakeUntilSubscriber=function(a){__extends(s,a);function s(d){var c=a.call(this,d)||this;return c.seenValue=!1,c}return s.prototype.notifyNext=function(){this.seenValue=!0,this.complete()},s.prototype.notifyComplete=function(){},s}(SimpleOuterSubscriber);function takeWhile(a,s){return s===void 0&&(s=!1),function(d){return d.lift(new TakeWhileOperator(a,s))}}var TakeWhileOperator=function(){function a(s,d){this.predicate=s,this.inclusive=d}return a.prototype.call=function(s,d){return d.subscribe(new TakeWhileSubscriber(s,this.predicate,this.inclusive))},a}(),TakeWhileSubscriber=function(a){__extends(s,a);function s(d,c,m){var g=a.call(this,d)||this;return g.predicate=c,g.inclusive=m,g.index=0,g}return s.prototype._next=function(d){var c=this.destination,m;try{m=this.predicate(d,this.index++)}catch(g){c.error(g);return}this.nextOrComplete(d,m)},s.prototype.nextOrComplete=function(d,c){var m=this.destination;Boolean(c)?m.next(d):(this.inclusive&&m.next(d),m.complete())},s}(Subscriber);function noop$1(){}function tap(a,s,d){return function(m){return m.lift(new DoOperator(a,s,d))}}var DoOperator=function(){function a(s,d,c){this.nextOrObserver=s,this.error=d,this.complete=c}return a.prototype.call=function(s,d){return d.subscribe(new TapSubscriber(s,this.nextOrObserver,this.error,this.complete))},a}(),TapSubscriber=function(a){__extends(s,a);function s(d,c,m,g){var b=a.call(this,d)||this;return b._tapNext=noop$1,b._tapError=noop$1,b._tapComplete=noop$1,b._tapError=m||noop$1,b._tapComplete=g||noop$1,isFunction$1(c)?(b._context=b,b._tapNext=c):c&&(b._context=c,b._tapNext=c.next||noop$1,b._tapError=c.error||noop$1,b._tapComplete=c.complete||noop$1),b}return s.prototype._next=function(d){try{this._tapNext.call(this._context,d)}catch(c){this.destination.error(c);return}this.destination.next(d)},s.prototype._error=function(d){try{this._tapError.call(this._context,d)}catch(c){this.destination.error(c);return}this.destination.error(d)},s.prototype._complete=function(){try{this._tapComplete.call(this._context)}catch(d){this.destination.error(d);return}return this.destination.complete()},s}(Subscriber),defaultThrottleConfig={leading:!0,trailing:!1};function throttle(a,s){return s===void 0&&(s=defaultThrottleConfig),function(d){return d.lift(new ThrottleOperator(a,!!s.leading,!!s.trailing))}}var ThrottleOperator=function(){function a(s,d,c){this.durationSelector=s,this.leading=d,this.trailing=c}return a.prototype.call=function(s,d){return d.subscribe(new ThrottleSubscriber(s,this.durationSelector,this.leading,this.trailing))},a}(),ThrottleSubscriber=function(a){__extends(s,a);function s(d,c,m,g){var b=a.call(this,d)||this;return b.destination=d,b.durationSelector=c,b._leading=m,b._trailing=g,b._hasValue=!1,b}return s.prototype._next=function(d){this._hasValue=!0,this._sendValue=d,this._throttled||(this._leading?this.send():this.throttle(d))},s.prototype.send=function(){var d=this,c=d._hasValue,m=d._sendValue;c&&(this.destination.next(m),this.throttle(m)),this._hasValue=!1,this._sendValue=void 0},s.prototype.throttle=function(d){var c=this.tryDurationSelector(d);c&&this.add(this._throttled=innerSubscribe(c,new SimpleInnerSubscriber(this)))},s.prototype.tryDurationSelector=function(d){try{return this.durationSelector(d)}catch(c){return this.destination.error(c),null}},s.prototype.throttlingDone=function(){var d=this,c=d._throttled,m=d._trailing;c&&c.unsubscribe(),this._throttled=void 0,m&&this.send()},s.prototype.notifyNext=function(){this.throttlingDone()},s.prototype.notifyComplete=function(){this.throttlingDone()},s}(SimpleOuterSubscriber);function throttleTime(a,s,d){return s===void 0&&(s=async),d===void 0&&(d=defaultThrottleConfig),function(c){return c.lift(new ThrottleTimeOperator(a,s,d.leading,d.trailing))}}var ThrottleTimeOperator=function(){function a(s,d,c,m){this.duration=s,this.scheduler=d,this.leading=c,this.trailing=m}return a.prototype.call=function(s,d){return d.subscribe(new ThrottleTimeSubscriber(s,this.duration,this.scheduler,this.leading,this.trailing))},a}(),ThrottleTimeSubscriber=function(a){__extends(s,a);function s(d,c,m,g,b){var k=a.call(this,d)||this;return k.duration=c,k.scheduler=m,k.leading=g,k.trailing=b,k._hasTrailingValue=!1,k._trailingValue=null,k}return s.prototype._next=function(d){this.throttled?this.trailing&&(this._trailingValue=d,this._hasTrailingValue=!0):(this.add(this.throttled=this.scheduler.schedule(dispatchNext,this.duration,{subscriber:this})),this.leading?this.destination.next(d):this.trailing&&(this._trailingValue=d,this._hasTrailingValue=!0))},s.prototype._complete=function(){this._hasTrailingValue?(this.destination.next(this._trailingValue),this.destination.complete()):this.destination.complete()},s.prototype.clearThrottle=function(){var d=this.throttled;d&&(this.trailing&&this._hasTrailingValue&&(this.destination.next(this._trailingValue),this._trailingValue=null,this._hasTrailingValue=!1),d.unsubscribe(),this.remove(d),this.throttled=null)},s}(Subscriber);function dispatchNext(a){var s=a.subscriber;s.clearThrottle()}function defer(a){return new Observable(function(s){var d;try{d=a()}catch(m){s.error(m);return}var c=d?from(d):empty$1();return c.subscribe(s)})}function timeInterval(a){return a===void 0&&(a=async),function(s){return defer(function(){return s.pipe(scan(function(d,c){var m=d.current;return{value:c,current:a.now(),last:m}},{current:a.now(),value:void 0,last:void 0}),map(function(d){var c=d.current,m=d.last,g=d.value;return new TimeInterval(g,c-m)}))})}}var TimeInterval=function(){function a(s,d){this.value=s,this.interval=d}return a}(),TimeoutErrorImpl=function(){function a(){return Error.call(this),this.message="Timeout has occurred",this.name="TimeoutError",this}return a.prototype=Object.create(Error.prototype),a}(),TimeoutError=TimeoutErrorImpl;function timeoutWith(a,s,d){return d===void 0&&(d=async),function(c){var m=isDate$1(a),g=m?+a-d.now():Math.abs(a);return c.lift(new TimeoutWithOperator(g,m,s,d))}}var TimeoutWithOperator=function(){function a(s,d,c,m){this.waitFor=s,this.absoluteTimeout=d,this.withObservable=c,this.scheduler=m}return a.prototype.call=function(s,d){return d.subscribe(new TimeoutWithSubscriber(s,this.absoluteTimeout,this.waitFor,this.withObservable,this.scheduler))},a}(),TimeoutWithSubscriber=function(a){__extends(s,a);function s(d,c,m,g,b){var k=a.call(this,d)||this;return k.absoluteTimeout=c,k.waitFor=m,k.withObservable=g,k.scheduler=b,k.scheduleTimeout(),k}return s.dispatchTimeout=function(d){var c=d.withObservable;d._unsubscribeAndRecycle(),d.add(innerSubscribe(c,new SimpleInnerSubscriber(d)))},s.prototype.scheduleTimeout=function(){var d=this.action;d?this.action=d.schedule(this,this.waitFor):this.add(this.action=this.scheduler.schedule(s.dispatchTimeout,this.waitFor,this))},s.prototype._next=function(d){this.absoluteTimeout||this.scheduleTimeout(),a.prototype._next.call(this,d)},s.prototype._unsubscribe=function(){this.action=void 0,this.scheduler=null,this.withObservable=null},s}(SimpleOuterSubscriber);function timeout(a,s){return s===void 0&&(s=async),timeoutWith(a,throwError(new TimeoutError),s)}function timestamp(a){return a===void 0&&(a=async),map(function(s){return new Timestamp(s,a.now())})}var Timestamp=function(){function a(s,d){this.value=s,this.timestamp=d}return a}();function toArrayReducer(a,s,d){return d===0?[s]:(a.push(s),a)}function toArray(){return reduce(toArrayReducer,[])}function window$1(a){return function(d){return d.lift(new WindowOperator$1(a))}}var WindowOperator$1=function(){function a(s){this.windowBoundaries=s}return a.prototype.call=function(s,d){var c=new WindowSubscriber$1(s),m=d.subscribe(c);return m.closed||c.add(innerSubscribe(this.windowBoundaries,new SimpleInnerSubscriber(c))),m},a}(),WindowSubscriber$1=function(a){__extends(s,a);function s(d){var c=a.call(this,d)||this;return c.window=new Subject,d.next(c.window),c}return s.prototype.notifyNext=function(){this.openWindow()},s.prototype.notifyError=function(d){this._error(d)},s.prototype.notifyComplete=function(){this._complete()},s.prototype._next=function(d){this.window.next(d)},s.prototype._error=function(d){this.window.error(d),this.destination.error(d)},s.prototype._complete=function(){this.window.complete(),this.destination.complete()},s.prototype._unsubscribe=function(){this.window=null},s.prototype.openWindow=function(){var d=this.window;d&&d.complete();var c=this.destination,m=this.window=new Subject;c.next(m)},s}(SimpleOuterSubscriber);function windowCount(a,s){return s===void 0&&(s=0),function(c){return c.lift(new WindowCountOperator(a,s))}}var WindowCountOperator=function(){function a(s,d){this.windowSize=s,this.startWindowEvery=d}return a.prototype.call=function(s,d){return d.subscribe(new WindowCountSubscriber(s,this.windowSize,this.startWindowEvery))},a}(),WindowCountSubscriber=function(a){__extends(s,a);function s(d,c,m){var g=a.call(this,d)||this;return g.destination=d,g.windowSize=c,g.startWindowEvery=m,g.windows=[new Subject],g.count=0,d.next(g.windows[0]),g}return s.prototype._next=function(d){for(var c=this.startWindowEvery>0?this.startWindowEvery:this.windowSize,m=this.destination,g=this.windowSize,b=this.windows,k=b.length,et=0;et<k&&!this.closed;et++)b[et].next(d);var nt=this.count-g+1;if(nt>=0&&nt%c===0&&!this.closed&&b.shift().complete(),++this.count%c===0&&!this.closed){var it=new Subject;b.push(it),m.next(it)}},s.prototype._error=function(d){var c=this.windows;if(c)for(;c.length>0&&!this.closed;)c.shift().error(d);this.destination.error(d)},s.prototype._complete=function(){var d=this.windows;if(d)for(;d.length>0&&!this.closed;)d.shift().complete();this.destination.complete()},s.prototype._unsubscribe=function(){this.count=0,this.windows=null},s}(Subscriber);function windowTime(a){var s=async,d=null,c=Number.POSITIVE_INFINITY;return isScheduler(arguments[3])&&(s=arguments[3]),isScheduler(arguments[2])?s=arguments[2]:isNumeric(arguments[2])&&(c=Number(arguments[2])),isScheduler(arguments[1])?s=arguments[1]:isNumeric(arguments[1])&&(d=Number(arguments[1])),function(g){return g.lift(new WindowTimeOperator(a,d,c,s))}}var WindowTimeOperator=function(){function a(s,d,c,m){this.windowTimeSpan=s,this.windowCreationInterval=d,this.maxWindowSize=c,this.scheduler=m}return a.prototype.call=function(s,d){return d.subscribe(new WindowTimeSubscriber(s,this.windowTimeSpan,this.windowCreationInterval,this.maxWindowSize,this.scheduler))},a}(),CountedSubject=function(a){__extends(s,a);function s(){var d=a!==null&&a.apply(this,arguments)||this;return d._numberOfNextedValues=0,d}return s.prototype.next=function(d){this._numberOfNextedValues++,a.prototype.next.call(this,d)},Object.defineProperty(s.prototype,"numberOfNextedValues",{get:function(){return this._numberOfNextedValues},enumerable:!0,configurable:!0}),s}(Subject),WindowTimeSubscriber=function(a){__extends(s,a);function s(d,c,m,g,b){var k=a.call(this,d)||this;k.destination=d,k.windowTimeSpan=c,k.windowCreationInterval=m,k.maxWindowSize=g,k.scheduler=b,k.windows=[];var et=k.openWindow();if(m!==null&&m>=0){var nt={subscriber:k,window:et,context:null},it={windowTimeSpan:c,windowCreationInterval:m,subscriber:k,scheduler:b};k.add(b.schedule(dispatchWindowClose,c,nt)),k.add(b.schedule(dispatchWindowCreation,m,it))}else{var ct={subscriber:k,window:et,windowTimeSpan:c};k.add(b.schedule(dispatchWindowTimeSpanOnly,c,ct))}return k}return s.prototype._next=function(d){for(var c=this.windows,m=c.length,g=0;g<m;g++){var b=c[g];b.closed||(b.next(d),b.numberOfNextedValues>=this.maxWindowSize&&this.closeWindow(b))}},s.prototype._error=function(d){for(var c=this.windows;c.length>0;)c.shift().error(d);this.destination.error(d)},s.prototype._complete=function(){for(var d=this.windows;d.length>0;){var c=d.shift();c.closed||c.complete()}this.destination.complete()},s.prototype.openWindow=function(){var d=new CountedSubject;this.windows.push(d);var c=this.destination;return c.next(d),d},s.prototype.closeWindow=function(d){d.complete();var c=this.windows;c.splice(c.indexOf(d),1)},s}(Subscriber);function dispatchWindowTimeSpanOnly(a){var s=a.subscriber,d=a.windowTimeSpan,c=a.window;c&&s.closeWindow(c),a.window=s.openWindow(),this.schedule(a,d)}function dispatchWindowCreation(a){var s=a.windowTimeSpan,d=a.subscriber,c=a.scheduler,m=a.windowCreationInterval,g=d.openWindow(),b=this,k={action:b,subscription:null},et={subscriber:d,window:g,context:k};k.subscription=c.schedule(dispatchWindowClose,s,et),b.add(k.subscription),b.schedule(a,m)}function dispatchWindowClose(a){var s=a.subscriber,d=a.window,c=a.context;c&&c.action&&c.subscription&&c.action.remove(c.subscription),s.closeWindow(d)}function windowToggle(a,s){return function(d){return d.lift(new WindowToggleOperator(a,s))}}var WindowToggleOperator=function(){function a(s,d){this.openings=s,this.closingSelector=d}return a.prototype.call=function(s,d){return d.subscribe(new WindowToggleSubscriber(s,this.openings,this.closingSelector))},a}(),WindowToggleSubscriber=function(a){__extends(s,a);function s(d,c,m){var g=a.call(this,d)||this;return g.openings=c,g.closingSelector=m,g.contexts=[],g.add(g.openSubscription=subscribeToResult(g,c,c)),g}return s.prototype._next=function(d){var c=this.contexts;if(c)for(var m=c.length,g=0;g<m;g++)c[g].window.next(d)},s.prototype._error=function(d){var c=this.contexts;if(this.contexts=null,c)for(var m=c.length,g=-1;++g<m;){var b=c[g];b.window.error(d),b.subscription.unsubscribe()}a.prototype._error.call(this,d)},s.prototype._complete=function(){var d=this.contexts;if(this.contexts=null,d)for(var c=d.length,m=-1;++m<c;){var g=d[m];g.window.complete(),g.subscription.unsubscribe()}a.prototype._complete.call(this)},s.prototype._unsubscribe=function(){var d=this.contexts;if(this.contexts=null,d)for(var c=d.length,m=-1;++m<c;){var g=d[m];g.window.unsubscribe(),g.subscription.unsubscribe()}},s.prototype.notifyNext=function(d,c,m,g,b){if(d===this.openings){var k=void 0;try{var et=this.closingSelector;k=et(c)}catch(ut){return this.error(ut)}var nt=new Subject,it=new Subscription,ct={window:nt,subscription:it};this.contexts.push(ct);var st=subscribeToResult(this,k,ct);st.closed?this.closeWindow(this.contexts.length-1):(st.context=ct,it.add(st)),this.destination.next(nt)}else this.closeWindow(this.contexts.indexOf(d))},s.prototype.notifyError=function(d){this.error(d)},s.prototype.notifyComplete=function(d){d!==this.openSubscription&&this.closeWindow(this.contexts.indexOf(d.context))},s.prototype.closeWindow=function(d){if(d!==-1){var c=this.contexts,m=c[d],g=m.window,b=m.subscription;c.splice(d,1),g.complete(),b.unsubscribe()}},s}(OuterSubscriber);function windowWhen(a){return function(d){return d.lift(new WindowOperator(a))}}var WindowOperator=function(){function a(s){this.closingSelector=s}return a.prototype.call=function(s,d){return d.subscribe(new WindowSubscriber(s,this.closingSelector))},a}(),WindowSubscriber=function(a){__extends(s,a);function s(d,c){var m=a.call(this,d)||this;return m.destination=d,m.closingSelector=c,m.openWindow(),m}return s.prototype.notifyNext=function(d,c,m,g,b){this.openWindow(b)},s.prototype.notifyError=function(d){this._error(d)},s.prototype.notifyComplete=function(d){this.openWindow(d)},s.prototype._next=function(d){this.window.next(d)},s.prototype._error=function(d){this.window.error(d),this.destination.error(d),this.unsubscribeClosingNotification()},s.prototype._complete=function(){this.window.complete(),this.destination.complete(),this.unsubscribeClosingNotification()},s.prototype.unsubscribeClosingNotification=function(){this.closingNotification&&this.closingNotification.unsubscribe()},s.prototype.openWindow=function(d){d===void 0&&(d=null),d&&(this.remove(d),d.unsubscribe());var c=this.window;c&&c.complete();var m=this.window=new Subject;this.destination.next(m);var g;try{var b=this.closingSelector;g=b()}catch(k){this.destination.error(k),this.window.error(k);return}this.add(this.closingNotification=subscribeToResult(this,g))},s}(OuterSubscriber);function withLatestFrom(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];return function(d){var c;typeof a[a.length-1]=="function"&&(c=a.pop());var m=a;return d.lift(new WithLatestFromOperator(m,c))}}var WithLatestFromOperator=function(){function a(s,d){this.observables=s,this.project=d}return a.prototype.call=function(s,d){return d.subscribe(new WithLatestFromSubscriber(s,this.observables,this.project))},a}(),WithLatestFromSubscriber=function(a){__extends(s,a);function s(d,c,m){var g=a.call(this,d)||this;g.observables=c,g.project=m,g.toRespond=[];var b=c.length;g.values=new Array(b);for(var k=0;k<b;k++)g.toRespond.push(k);for(var k=0;k<b;k++){var et=c[k];g.add(subscribeToResult(g,et,void 0,k))}return g}return s.prototype.notifyNext=function(d,c,m){this.values[m]=c;var g=this.toRespond;if(g.length>0){var b=g.indexOf(m);b!==-1&&g.splice(b,1)}},s.prototype.notifyComplete=function(){},s.prototype._next=function(d){if(this.toRespond.length===0){var c=[d].concat(this.values);this.project?this._tryProject(c):this.destination.next(c)}},s.prototype._tryProject=function(d){var c;try{c=this.project.apply(this,d)}catch(m){this.destination.error(m);return}this.destination.next(c)},s}(OuterSubscriber);function zip$1(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];var d=a[a.length-1];return typeof d=="function"&&a.pop(),fromArray(a,void 0).lift(new ZipOperator(d))}var ZipOperator=function(){function a(s){this.resultSelector=s}return a.prototype.call=function(s,d){return d.subscribe(new ZipSubscriber(s,this.resultSelector))},a}(),ZipSubscriber=function(a){__extends(s,a);function s(d,c,m){var g=a.call(this,d)||this;return g.resultSelector=c,g.iterators=[],g.active=0,g.resultSelector=typeof c=="function"?c:void 0,g}return s.prototype._next=function(d){var c=this.iterators;isArray$2(d)?c.push(new StaticArrayIterator(d)):typeof d[iterator]=="function"?c.push(new StaticIterator(d[iterator]())):c.push(new ZipBufferIterator(this.destination,this,d))},s.prototype._complete=function(){var d=this.iterators,c=d.length;if(this.unsubscribe(),c===0){this.destination.complete();return}this.active=c;for(var m=0;m<c;m++){var g=d[m];if(g.stillUnsubscribed){var b=this.destination;b.add(g.subscribe())}else this.active--}},s.prototype.notifyInactive=function(){this.active--,this.active===0&&this.destination.complete()},s.prototype.checkIterators=function(){for(var d=this.iterators,c=d.length,m=this.destination,g=0;g<c;g++){var b=d[g];if(typeof b.hasValue=="function"&&!b.hasValue())return}for(var k=!1,et=[],g=0;g<c;g++){var b=d[g],nt=b.next();if(b.hasCompleted()&&(k=!0),nt.done){m.complete();return}et.push(nt.value)}this.resultSelector?this._tryresultSelector(et):m.next(et),k&&m.complete()},s.prototype._tryresultSelector=function(d){var c;try{c=this.resultSelector.apply(this,d)}catch(m){this.destination.error(m);return}this.destination.next(c)},s}(Subscriber),StaticIterator=function(){function a(s){this.iterator=s,this.nextResult=s.next()}return a.prototype.hasValue=function(){return!0},a.prototype.next=function(){var s=this.nextResult;return this.nextResult=this.iterator.next(),s},a.prototype.hasCompleted=function(){var s=this.nextResult;return Boolean(s&&s.done)},a}(),StaticArrayIterator=function(){function a(s){this.array=s,this.index=0,this.length=0,this.length=s.length}return a.prototype[iterator]=function(){return this},a.prototype.next=function(s){var d=this.index++,c=this.array;return d<this.length?{value:c[d],done:!1}:{value:null,done:!0}},a.prototype.hasValue=function(){return this.array.length>this.index},a.prototype.hasCompleted=function(){return this.array.length===this.index},a}(),ZipBufferIterator=function(a){__extends(s,a);function s(d,c,m){var g=a.call(this,d)||this;return g.parent=c,g.observable=m,g.stillUnsubscribed=!0,g.buffer=[],g.isComplete=!1,g}return s.prototype[iterator]=function(){return this},s.prototype.next=function(){var d=this.buffer;return d.length===0&&this.isComplete?{value:null,done:!0}:{value:d.shift(),done:!1}},s.prototype.hasValue=function(){return this.buffer.length>0},s.prototype.hasCompleted=function(){return this.buffer.length===0&&this.isComplete},s.prototype.notifyComplete=function(){this.buffer.length>0?(this.isComplete=!0,this.parent.notifyInactive()):this.destination.complete()},s.prototype.notifyNext=function(d){this.buffer.push(d),this.parent.checkIterators()},s.prototype.subscribe=function(){return innerSubscribe(this.observable,new SimpleInnerSubscriber(this))},s}(SimpleOuterSubscriber);function zip(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];return function(c){return c.lift.call(zip$1.apply(void 0,[c].concat(a)))}}function zipAll(a){return function(s){return s.lift(new ZipOperator(a))}}var operators=Object.freeze(Object.defineProperty({__proto__:null,audit,auditTime,buffer,bufferCount,bufferTime,bufferToggle,bufferWhen,catchError,combineAll,combineLatest,concat,concatAll,concatMap,concatMapTo,count,debounce,debounceTime,defaultIfEmpty,delay,delayWhen,dematerialize,distinct,distinctUntilChanged,distinctUntilKeyChanged,elementAt,endWith,every,exhaust,exhaustMap,expand,filter,finalize,find:find$1,findIndex,first,groupBy,ignoreElements,isEmpty,last,map,mapTo,materialize,max,merge:merge$1,mergeAll,mergeMap,flatMap,mergeMapTo,mergeScan,min,multicast,observeOn,onErrorResumeNext,pairwise,partition,pluck,publish,publishBehavior,publishLast,publishReplay,race,reduce,repeat,repeatWhen,retry,retryWhen,refCount,sample,sampleTime,scan,sequenceEqual,share,shareReplay,single,skip,skipLast,skipUntil,skipWhile,startWith,subscribeOn,switchAll,switchMap,switchMapTo,take,takeLast,takeUntil,takeWhile,tap,throttle,throttleTime,throwIfEmpty,timeInterval,timeout,timeoutWith,timestamp,toArray,window:window$1,windowCount,windowTime,windowToggle,windowWhen,withLatestFrom,zip,zipAll},Symbol.toStringTag,{value:"Module"})),require$$2=getAugmentedNamespace(operators),struct={};(function(a){var s=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(_e,ot,lt,Ot){Ot===void 0&&(Ot=lt),Object.defineProperty(_e,Ot,{enumerable:!0,get:function(){return ot[lt]}})}:function(_e,ot,lt,Ot){Ot===void 0&&(Ot=lt),_e[Ot]=ot[lt]}),d=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(_e,ot){Object.defineProperty(_e,"default",{enumerable:!0,value:ot})}:function(_e,ot){_e.default=ot}),c=commonjsGlobal&&commonjsGlobal.__importStar||function(_e){if(_e&&_e.__esModule)return _e;var ot={};if(_e!=null)for(var lt in _e)lt!=="default"&&Object.hasOwnProperty.call(_e,lt)&&s(ot,_e,lt);return d(ot,_e),ot},m=commonjsGlobal&&commonjsGlobal.__importDefault||function(_e){return _e&&_e.__esModule?_e:{default:_e}};Object.defineProperty(a,"__esModule",{value:!0}),a.ListValue=a.Value=a.Struct_FieldsEntry=a.Struct=a.nullValueToNumber=a.nullValueToJSON=a.nullValueFromJSON=a.NullValue=a.protobufPackage=void 0;const g=m(long),b=c(minimal$2);a.protobufPackage="google.protobuf";var k;(function(_e){_e.NULL_VALUE="NULL_VALUE"})(k=a.NullValue||(a.NullValue={}));function et(_e){switch(_e){case 0:case"NULL_VALUE":return k.NULL_VALUE;default:throw new St.Error("Unrecognized enum value "+_e+" for enum NullValue")}}a.nullValueFromJSON=et;function nt(_e){switch(_e){case k.NULL_VALUE:return"NULL_VALUE";default:return"UNKNOWN"}}a.nullValueToJSON=nt;function it(_e){switch(_e){case k.NULL_VALUE:return 0;default:return 0}}a.nullValueToNumber=it;function ct(){return{fields:{}}}a.Struct={encode(_e,ot=b.Writer.create()){return Object.entries(_e.fields).forEach(([lt,Ot])=>{Ot!==void 0&&a.Struct_FieldsEntry.encode({key:lt,value:Ot},ot.uint32(10).fork()).ldelim()}),ot},decode(_e,ot){const lt=_e instanceof b.Reader?_e:new b.Reader(_e);let Ot=ot===void 0?lt.len:lt.pos+ot;const It=ct();for(;lt.pos<Ot;){const Pt=lt.uint32();switch(Pt>>>3){case 1:const $t=a.Struct_FieldsEntry.decode(lt,lt.uint32());$t.value!==void 0&&(It.fields[$t.key]=$t.value);break;default:lt.skipType(Pt&7);break}}return It},fromJSON(_e){return{fields:_t(_e.fields)?Object.entries(_e.fields).reduce((ot,[lt,Ot])=>(ot[lt]=Ot,ot),{}):{}}},toJSON(_e){const ot={};return ot.fields={},_e.fields&&Object.entries(_e.fields).forEach(([lt,Ot])=>{ot.fields[lt]=Ot}),ot},fromPartial(_e){var ot;const lt=ct();return lt.fields=Object.entries((ot=_e.fields)!==null&&ot!==void 0?ot:{}).reduce((Ot,[It,Pt])=>(Pt!==void 0&&(Ot[It]=Pt),Ot),{}),lt},wrap(_e){const ot=ct();return _e!==void 0&&Object.keys(_e).forEach(lt=>{ot.fields[lt]=_e[lt]}),ot},unwrap(_e){const ot={};return Object.keys(_e.fields).forEach(lt=>{ot[lt]=_e.fields[lt]}),ot}};function st(){return{key:"",value:void 0}}a.Struct_FieldsEntry={encode(_e,ot=b.Writer.create()){return _e.key!==""&&ot.uint32(10).string(_e.key),_e.value!==void 0&&a.Value.encode(a.Value.wrap(_e.value),ot.uint32(18).fork()).ldelim(),ot},decode(_e,ot){const lt=_e instanceof b.Reader?_e:new b.Reader(_e);let Ot=ot===void 0?lt.len:lt.pos+ot;const It=st();for(;lt.pos<Ot;){const Pt=lt.uint32();switch(Pt>>>3){case 1:It.key=lt.string();break;case 2:It.value=a.Value.unwrap(a.Value.decode(lt,lt.uint32()));break;default:lt.skipType(Pt&7);break}}return It},fromJSON(_e){return{key:ht(_e.key)?String(_e.key):"",value:ht(_e==null?void 0:_e.value)?_e.value:void 0}},toJSON(_e){const ot={};return _e.key!==void 0&&(ot.key=_e.key),_e.value!==void 0&&(ot.value=_e.value),ot},fromPartial(_e){var ot,lt;const Ot=st();return Ot.key=(ot=_e.key)!==null&&ot!==void 0?ot:"",Ot.value=(lt=_e.value)!==null&&lt!==void 0?lt:void 0,Ot}};function ut(){return{nullValue:void 0,numberValue:void 0,stringValue:void 0,boolValue:void 0,structValue:void 0,listValue:void 0}}a.Value={encode(_e,ot=b.Writer.create()){return _e.nullValue!==void 0&&ot.uint32(8).int32(it(_e.nullValue)),_e.numberValue!==void 0&&ot.uint32(17).double(_e.numberValue),_e.stringValue!==void 0&&ot.uint32(26).string(_e.stringValue),_e.boolValue!==void 0&&ot.uint32(32).bool(_e.boolValue),_e.structValue!==void 0&&a.Struct.encode(a.Struct.wrap(_e.structValue),ot.uint32(42).fork()).ldelim(),_e.listValue!==void 0&&a.ListValue.encode(a.ListValue.wrap(_e.listValue),ot.uint32(50).fork()).ldelim(),ot},decode(_e,ot){const lt=_e instanceof b.Reader?_e:new b.Reader(_e);let Ot=ot===void 0?lt.len:lt.pos+ot;const It=ut();for(;lt.pos<Ot;){const Pt=lt.uint32();switch(Pt>>>3){case 1:It.nullValue=et(lt.int32());break;case 2:It.numberValue=lt.double();break;case 3:It.stringValue=lt.string();break;case 4:It.boolValue=lt.bool();break;case 5:It.structValue=a.Struct.unwrap(a.Struct.decode(lt,lt.uint32()));break;case 6:It.listValue=a.ListValue.unwrap(a.ListValue.decode(lt,lt.uint32()));break;default:lt.skipType(Pt&7);break}}return It},fromJSON(_e){return{nullValue:ht(_e.nullValue)?et(_e.nullValue):void 0,numberValue:ht(_e.numberValue)?Number(_e.numberValue):void 0,stringValue:ht(_e.stringValue)?String(_e.stringValue):void 0,boolValue:ht(_e.boolValue)?Boolean(_e.boolValue):void 0,structValue:_t(_e.structValue)?_e.structValue:void 0,listValue:Array.isArray(_e.listValue)?[..._e.listValue]:void 0}},toJSON(_e){const ot={};return _e.nullValue!==void 0&&(ot.nullValue=_e.nullValue!==void 0?nt(_e.nullValue):void 0),_e.numberValue!==void 0&&(ot.numberValue=_e.numberValue),_e.stringValue!==void 0&&(ot.stringValue=_e.stringValue),_e.boolValue!==void 0&&(ot.boolValue=_e.boolValue),_e.structValue!==void 0&&(ot.structValue=_e.structValue),_e.listValue!==void 0&&(ot.listValue=_e.listValue),ot},fromPartial(_e){var ot,lt,Ot,It,Pt,$t;const bt=ut();return bt.nullValue=(ot=_e.nullValue)!==null&&ot!==void 0?ot:void 0,bt.numberValue=(lt=_e.numberValue)!==null&&lt!==void 0?lt:void 0,bt.stringValue=(Ot=_e.stringValue)!==null&&Ot!==void 0?Ot:void 0,bt.boolValue=(It=_e.boolValue)!==null&&It!==void 0?It:void 0,bt.structValue=(Pt=_e.structValue)!==null&&Pt!==void 0?Pt:void 0,bt.listValue=($t=_e.listValue)!==null&&$t!==void 0?$t:void 0,bt},wrap(_e){const ot=ut();if(_e===null)ot.nullValue=k.NULL_VALUE;else if(typeof _e=="boolean")ot.boolValue=_e;else if(typeof _e=="number")ot.numberValue=_e;else if(typeof _e=="string")ot.stringValue=_e;else if(Array.isArray(_e))ot.listValue=_e;else if(typeof _e=="object")ot.structValue=_e;else if(typeof _e!="undefined")throw new Error("Unsupported any value type: "+typeof _e);return ot},unwrap(_e){if((_e==null?void 0:_e.stringValue)!==void 0)return _e.stringValue;if((_e==null?void 0:_e.numberValue)!==void 0)return _e.numberValue;if((_e==null?void 0:_e.boolValue)!==void 0)return _e.boolValue;if((_e==null?void 0:_e.structValue)!==void 0)return _e.structValue;if((_e==null?void 0:_e.listValue)!==void 0)return _e.listValue;if((_e==null?void 0:_e.nullValue)!==void 0)return null}};function pt(){return{values:[]}}a.ListValue={encode(_e,ot=b.Writer.create()){for(const lt of _e.values)a.Value.encode(a.Value.wrap(lt),ot.uint32(10).fork()).ldelim();return ot},decode(_e,ot){const lt=_e instanceof b.Reader?_e:new b.Reader(_e);let Ot=ot===void 0?lt.len:lt.pos+ot;const It=pt();for(;lt.pos<Ot;){const Pt=lt.uint32();switch(Pt>>>3){case 1:It.values.push(a.Value.unwrap(a.Value.decode(lt,lt.uint32())));break;default:lt.skipType(Pt&7);break}}return It},fromJSON(_e){return{values:Array.isArray(_e==null?void 0:_e.values)?[..._e.values]:[]}},toJSON(_e){const ot={};return _e.values?ot.values=_e.values.map(lt=>lt):ot.values=[],ot},fromPartial(_e){var ot;const lt=pt();return lt.values=((ot=_e.values)===null||ot===void 0?void 0:ot.map(Ot=>Ot))||[],lt},wrap(_e){const ot=pt();return ot.values=_e!=null?_e:[],ot},unwrap(_e){return _e.values}};var St=(()=>{if(typeof St!="undefined")return St;if(typeof self!="undefined")return self;if(typeof window!="undefined")return window;if(typeof commonjsGlobal!="undefined")return commonjsGlobal;throw"Unable to locate global object"})();b.util.Long!==g.default&&(b.util.Long=g.default,b.configure());function _t(_e){return typeof _e=="object"&&_e!==null}function ht(_e){return _e!=null}})(struct);(function(a){var s=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(bt,Rt,Ct,vt){vt===void 0&&(vt=Ct),Object.defineProperty(bt,vt,{enumerable:!0,get:function(){return Rt[Ct]}})}:function(bt,Rt,Ct,vt){vt===void 0&&(vt=Ct),bt[vt]=Rt[Ct]}),d=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(bt,Rt){Object.defineProperty(bt,"default",{enumerable:!0,value:Rt})}:function(bt,Rt){bt.default=Rt}),c=commonjsGlobal&&commonjsGlobal.__importStar||function(bt){if(bt&&bt.__esModule)return bt;var Rt={};if(bt!=null)for(var Ct in bt)Ct!=="default"&&Object.hasOwnProperty.call(bt,Ct)&&s(Rt,bt,Ct);return d(Rt,bt),Rt},m=commonjsGlobal&&commonjsGlobal.__importDefault||function(bt){return bt&&bt.__esModule?bt:{default:bt}};Object.defineProperty(a,"__esModule",{value:!0}),a.EventServiceDefinition=a.EventServiceClientImpl=a.EventsStreamResponse=a.EventsStreamReconnectRequest=a.EventsStreamError=a.EventsStreamRequest=a.SubscribePayload=a.PublishEventResponse=a.PublishEventRequest=a.EventTarget=a.eventsStreamMessageTypeToNumber=a.eventsStreamMessageTypeToJSON=a.eventsStreamMessageTypeFromJSON=a.EventsStreamMessageType=a.protobufPackage=void 0;const g=m(long),b=c(minimal$2),k=require$$2,et=struct;a.protobufPackage="apis.event.v2";var nt;(function(bt){bt.EVENTS_STREAM_MESSAGE_TYPE_UNSPECIFIED="EVENTS_STREAM_MESSAGE_TYPE_UNSPECIFIED",bt.EVENTS_STREAM_MESSAGE_TYPE_PING="EVENTS_STREAM_MESSAGE_TYPE_PING",bt.EVENTS_STREAM_MESSAGE_TYPE_ERROR="EVENTS_STREAM_MESSAGE_TYPE_ERROR",bt.EVENTS_STREAM_MESSAGE_TYPE_SUBSCRIBED="EVENTS_STREAM_MESSAGE_TYPE_SUBSCRIBED",bt.EVENTS_STREAM_MESSAGE_TYPE_UNSUBSCRIBED="EVENTS_STREAM_MESSAGE_TYPE_UNSUBSCRIBED",bt.EVENTS_STREAM_MESSAGE_TYPE_PUBLISHED="EVENTS_STREAM_MESSAGE_TYPE_PUBLISHED"})(nt=a.EventsStreamMessageType||(a.EventsStreamMessageType={}));function it(bt){switch(bt){case 0:case"EVENTS_STREAM_MESSAGE_TYPE_UNSPECIFIED":return nt.EVENTS_STREAM_MESSAGE_TYPE_UNSPECIFIED;case 1:case"EVENTS_STREAM_MESSAGE_TYPE_PING":return nt.EVENTS_STREAM_MESSAGE_TYPE_PING;case 2:case"EVENTS_STREAM_MESSAGE_TYPE_ERROR":return nt.EVENTS_STREAM_MESSAGE_TYPE_ERROR;case 3:case"EVENTS_STREAM_MESSAGE_TYPE_SUBSCRIBED":return nt.EVENTS_STREAM_MESSAGE_TYPE_SUBSCRIBED;case 4:case"EVENTS_STREAM_MESSAGE_TYPE_UNSUBSCRIBED":return nt.EVENTS_STREAM_MESSAGE_TYPE_UNSUBSCRIBED;case 5:case"EVENTS_STREAM_MESSAGE_TYPE_PUBLISHED":return nt.EVENTS_STREAM_MESSAGE_TYPE_PUBLISHED;default:throw new It.Error("Unrecognized enum value "+bt+" for enum EventsStreamMessageType")}}a.eventsStreamMessageTypeFromJSON=it;function ct(bt){switch(bt){case nt.EVENTS_STREAM_MESSAGE_TYPE_UNSPECIFIED:return"EVENTS_STREAM_MESSAGE_TYPE_UNSPECIFIED";case nt.EVENTS_STREAM_MESSAGE_TYPE_PING:return"EVENTS_STREAM_MESSAGE_TYPE_PING";case nt.EVENTS_STREAM_MESSAGE_TYPE_ERROR:return"EVENTS_STREAM_MESSAGE_TYPE_ERROR";case nt.EVENTS_STREAM_MESSAGE_TYPE_SUBSCRIBED:return"EVENTS_STREAM_MESSAGE_TYPE_SUBSCRIBED";case nt.EVENTS_STREAM_MESSAGE_TYPE_UNSUBSCRIBED:return"EVENTS_STREAM_MESSAGE_TYPE_UNSUBSCRIBED";case nt.EVENTS_STREAM_MESSAGE_TYPE_PUBLISHED:return"EVENTS_STREAM_MESSAGE_TYPE_PUBLISHED";default:return"UNKNOWN"}}a.eventsStreamMessageTypeToJSON=ct;function st(bt){switch(bt){case nt.EVENTS_STREAM_MESSAGE_TYPE_UNSPECIFIED:return 0;case nt.EVENTS_STREAM_MESSAGE_TYPE_PING:return 1;case nt.EVENTS_STREAM_MESSAGE_TYPE_ERROR:return 2;case nt.EVENTS_STREAM_MESSAGE_TYPE_SUBSCRIBED:return 3;case nt.EVENTS_STREAM_MESSAGE_TYPE_UNSUBSCRIBED:return 4;case nt.EVENTS_STREAM_MESSAGE_TYPE_PUBLISHED:return 5;default:return 0}}a.eventsStreamMessageTypeToNumber=st;function ut(){return{collectionId:void 0,projectId:void 0,layoutId:void 0}}a.EventTarget={encode(bt,Rt=b.Writer.create()){return bt.collectionId!==void 0&&Rt.uint32(42).string(bt.collectionId),bt.projectId!==void 0&&Rt.uint32(34).string(bt.projectId),bt.layoutId!==void 0&&Rt.uint32(10).string(bt.layoutId),Rt},decode(bt,Rt){const Ct=bt instanceof b.Reader?bt:new b.Reader(bt);let vt=Rt===void 0?Ct.len:Ct.pos+Rt;const Tt=ut();for(;Ct.pos<vt;){const wt=Ct.uint32();switch(wt>>>3){case 5:Tt.collectionId=Ct.string();break;case 4:Tt.projectId=Ct.string();break;case 1:Tt.layoutId=Ct.string();break;default:Ct.skipType(wt&7);break}}return Tt},fromJSON(bt){return{collectionId:$t(bt.collectionId)?String(bt.collectionId):void 0,projectId:$t(bt.projectId)?String(bt.projectId):void 0,layoutId:$t(bt.layoutId)?String(bt.layoutId):void 0}},toJSON(bt){const Rt={};return bt.collectionId!==void 0&&(Rt.collectionId=bt.collectionId),bt.projectId!==void 0&&(Rt.projectId=bt.projectId),bt.layoutId!==void 0&&(Rt.layoutId=bt.layoutId),Rt},fromPartial(bt){var Rt,Ct,vt;const Tt=ut();return Tt.collectionId=(Rt=bt.collectionId)!==null&&Rt!==void 0?Rt:void 0,Tt.projectId=(Ct=bt.projectId)!==null&&Ct!==void 0?Ct:void 0,Tt.layoutId=(vt=bt.layoutId)!==null&&vt!==void 0?vt:void 0,Tt}};function pt(){return{name:"",payload:void 0,requestMetadata:void 0,target:void 0}}a.PublishEventRequest={encode(bt,Rt=b.Writer.create()){return bt.name!==""&&Rt.uint32(10).string(bt.name),bt.payload!==void 0&&et.Struct.encode(et.Struct.wrap(bt.payload),Rt.uint32(18).fork()).ldelim(),bt.requestMetadata!==void 0&&et.Value.encode(et.Value.wrap(bt.requestMetadata),Rt.uint32(34).fork()).ldelim(),bt.target!==void 0&&a.EventTarget.encode(bt.target,Rt.uint32(26).fork()).ldelim(),Rt},decode(bt,Rt){const Ct=bt instanceof b.Reader?bt:new b.Reader(bt);let vt=Rt===void 0?Ct.len:Ct.pos+Rt;const Tt=pt();for(;Ct.pos<vt;){const wt=Ct.uint32();switch(wt>>>3){case 1:Tt.name=Ct.string();break;case 2:Tt.payload=et.Struct.unwrap(et.Struct.decode(Ct,Ct.uint32()));break;case 4:Tt.requestMetadata=et.Value.unwrap(et.Value.decode(Ct,Ct.uint32()));break;case 3:Tt.target=a.EventTarget.decode(Ct,Ct.uint32());break;default:Ct.skipType(wt&7);break}}return Tt},fromJSON(bt){return{name:$t(bt.name)?String(bt.name):"",payload:Pt(bt.payload)?bt.payload:void 0,requestMetadata:$t(bt==null?void 0:bt.requestMetadata)?bt.requestMetadata:void 0,target:$t(bt.target)?a.EventTarget.fromJSON(bt.target):void 0}},toJSON(bt){const Rt={};return bt.name!==void 0&&(Rt.name=bt.name),bt.payload!==void 0&&(Rt.payload=bt.payload),bt.requestMetadata!==void 0&&(Rt.requestMetadata=bt.requestMetadata),bt.target!==void 0&&(Rt.target=bt.target?a.EventTarget.toJSON(bt.target):void 0),Rt},fromPartial(bt){var Rt,Ct,vt;const Tt=pt();return Tt.name=(Rt=bt.name)!==null&&Rt!==void 0?Rt:"",Tt.payload=(Ct=bt.payload)!==null&&Ct!==void 0?Ct:void 0,Tt.requestMetadata=(vt=bt.requestMetadata)!==null&&vt!==void 0?vt:void 0,Tt.target=bt.target!==void 0&&bt.target!==null?a.EventTarget.fromPartial(bt.target):void 0,Tt}};function St(){return{name:"",payload:void 0,target:void 0,requestMetadata:void 0,id:""}}a.PublishEventResponse={encode(bt,Rt=b.Writer.create()){return bt.name!==""&&Rt.uint32(10).string(bt.name),bt.payload!==void 0&&et.Struct.encode(et.Struct.wrap(bt.payload),Rt.uint32(18).fork()).ldelim(),bt.target!==void 0&&a.EventTarget.encode(bt.target,Rt.uint32(26).fork()).ldelim(),bt.requestMetadata!==void 0&&et.Value.encode(et.Value.wrap(bt.requestMetadata),Rt.uint32(34).fork()).ldelim(),bt.id!==""&&Rt.uint32(42).string(bt.id),Rt},decode(bt,Rt){const Ct=bt instanceof b.Reader?bt:new b.Reader(bt);let vt=Rt===void 0?Ct.len:Ct.pos+Rt;const Tt=St();for(;Ct.pos<vt;){const wt=Ct.uint32();switch(wt>>>3){case 1:Tt.name=Ct.string();break;case 2:Tt.payload=et.Struct.unwrap(et.Struct.decode(Ct,Ct.uint32()));break;case 3:Tt.target=a.EventTarget.decode(Ct,Ct.uint32());break;case 4:Tt.requestMetadata=et.Value.unwrap(et.Value.decode(Ct,Ct.uint32()));break;case 5:Tt.id=Ct.string();break;default:Ct.skipType(wt&7);break}}return Tt},fromJSON(bt){return{name:$t(bt.name)?String(bt.name):"",payload:Pt(bt.payload)?bt.payload:void 0,target:$t(bt.target)?a.EventTarget.fromJSON(bt.target):void 0,requestMetadata:$t(bt==null?void 0:bt.requestMetadata)?bt.requestMetadata:void 0,id:$t(bt.id)?String(bt.id):""}},toJSON(bt){const Rt={};return bt.name!==void 0&&(Rt.name=bt.name),bt.payload!==void 0&&(Rt.payload=bt.payload),bt.target!==void 0&&(Rt.target=bt.target?a.EventTarget.toJSON(bt.target):void 0),bt.requestMetadata!==void 0&&(Rt.requestMetadata=bt.requestMetadata),bt.id!==void 0&&(Rt.id=bt.id),Rt},fromPartial(bt){var Rt,Ct,vt,Tt;const wt=St();return wt.name=(Rt=bt.name)!==null&&Rt!==void 0?Rt:"",wt.payload=(Ct=bt.payload)!==null&&Ct!==void 0?Ct:void 0,wt.target=bt.target!==void 0&&bt.target!==null?a.EventTarget.fromPartial(bt.target):void 0,wt.requestMetadata=(vt=bt.requestMetadata)!==null&&vt!==void 0?vt:void 0,wt.id=(Tt=bt.id)!==null&&Tt!==void 0?Tt:"",wt}};function _t(){return{name:"",target:void 0}}a.SubscribePayload={encode(bt,Rt=b.Writer.create()){return bt.name!==""&&Rt.uint32(10).string(bt.name),bt.target!==void 0&&a.EventTarget.encode(bt.target,Rt.uint32(18).fork()).ldelim(),Rt},decode(bt,Rt){const Ct=bt instanceof b.Reader?bt:new b.Reader(bt);let vt=Rt===void 0?Ct.len:Ct.pos+Rt;const Tt=_t();for(;Ct.pos<vt;){const wt=Ct.uint32();switch(wt>>>3){case 1:Tt.name=Ct.string();break;case 2:Tt.target=a.EventTarget.decode(Ct,Ct.uint32());break;default:Ct.skipType(wt&7);break}}return Tt},fromJSON(bt){return{name:$t(bt.name)?String(bt.name):"",target:$t(bt.target)?a.EventTarget.fromJSON(bt.target):void 0}},toJSON(bt){const Rt={};return bt.name!==void 0&&(Rt.name=bt.name),bt.target!==void 0&&(Rt.target=bt.target?a.EventTarget.toJSON(bt.target):void 0),Rt},fromPartial(bt){var Rt;const Ct=_t();return Ct.name=(Rt=bt.name)!==null&&Rt!==void 0?Rt:"",Ct.target=bt.target!==void 0&&bt.target!==null?a.EventTarget.fromPartial(bt.target):void 0,Ct}};function ht(){return{correlationId:void 0,subscribe:void 0,unsubscribe:void 0,publish:void 0,ping:void 0}}a.EventsStreamRequest={encode(bt,Rt=b.Writer.create()){return bt.correlationId!==void 0&&Rt.uint32(10).string(bt.correlationId),bt.subscribe!==void 0&&a.SubscribePayload.encode(bt.subscribe,Rt.uint32(802).fork()).ldelim(),bt.unsubscribe!==void 0&&a.SubscribePayload.encode(bt.unsubscribe,Rt.uint32(810).fork()).ldelim(),bt.publish!==void 0&&a.PublishEventRequest.encode(bt.publish,Rt.uint32(818).fork()).ldelim(),bt.ping!==void 0&&Rt.uint32(826).string(bt.ping),Rt},decode(bt,Rt){const Ct=bt instanceof b.Reader?bt:new b.Reader(bt);let vt=Rt===void 0?Ct.len:Ct.pos+Rt;const Tt=ht();for(;Ct.pos<vt;){const wt=Ct.uint32();switch(wt>>>3){case 1:Tt.correlationId=Ct.string();break;case 100:Tt.subscribe=a.SubscribePayload.decode(Ct,Ct.uint32());break;case 101:Tt.unsubscribe=a.SubscribePayload.decode(Ct,Ct.uint32());break;case 102:Tt.publish=a.PublishEventRequest.decode(Ct,Ct.uint32());break;case 103:Tt.ping=Ct.string();break;default:Ct.skipType(wt&7);break}}return Tt},fromJSON(bt){return{correlationId:$t(bt.correlationId)?String(bt.correlationId):void 0,subscribe:$t(bt.subscribe)?a.SubscribePayload.fromJSON(bt.subscribe):void 0,unsubscribe:$t(bt.unsubscribe)?a.SubscribePayload.fromJSON(bt.unsubscribe):void 0,publish:$t(bt.publish)?a.PublishEventRequest.fromJSON(bt.publish):void 0,ping:$t(bt.ping)?String(bt.ping):void 0}},toJSON(bt){const Rt={};return bt.correlationId!==void 0&&(Rt.correlationId=bt.correlationId),bt.subscribe!==void 0&&(Rt.subscribe=bt.subscribe?a.SubscribePayload.toJSON(bt.subscribe):void 0),bt.unsubscribe!==void 0&&(Rt.unsubscribe=bt.unsubscribe?a.SubscribePayload.toJSON(bt.unsubscribe):void 0),bt.publish!==void 0&&(Rt.publish=bt.publish?a.PublishEventRequest.toJSON(bt.publish):void 0),bt.ping!==void 0&&(Rt.ping=bt.ping),Rt},fromPartial(bt){var Rt,Ct;const vt=ht();return vt.correlationId=(Rt=bt.correlationId)!==null&&Rt!==void 0?Rt:void 0,vt.subscribe=bt.subscribe!==void 0&&bt.subscribe!==null?a.SubscribePayload.fromPartial(bt.subscribe):void 0,vt.unsubscribe=bt.unsubscribe!==void 0&&bt.unsubscribe!==null?a.SubscribePayload.fromPartial(bt.unsubscribe):void 0,vt.publish=bt.publish!==void 0&&bt.publish!==null?a.PublishEventRequest.fromPartial(bt.publish):void 0,vt.ping=(Ct=bt.ping)!==null&&Ct!==void 0?Ct:void 0,vt}};function _e(){return{code:0,message:""}}a.EventsStreamError={encode(bt,Rt=b.Writer.create()){return bt.code!==0&&Rt.uint32(8).int32(bt.code),bt.message!==""&&Rt.uint32(18).string(bt.message),Rt},decode(bt,Rt){const Ct=bt instanceof b.Reader?bt:new b.Reader(bt);let vt=Rt===void 0?Ct.len:Ct.pos+Rt;const Tt=_e();for(;Ct.pos<vt;){const wt=Ct.uint32();switch(wt>>>3){case 1:Tt.code=Ct.int32();break;case 2:Tt.message=Ct.string();break;default:Ct.skipType(wt&7);break}}return Tt},fromJSON(bt){return{code:$t(bt.code)?Number(bt.code):0,message:$t(bt.message)?String(bt.message):""}},toJSON(bt){const Rt={};return bt.code!==void 0&&(Rt.code=Math.round(bt.code)),bt.message!==void 0&&(Rt.message=bt.message),Rt},fromPartial(bt){var Rt,Ct;const vt=_e();return vt.code=(Rt=bt.code)!==null&&Rt!==void 0?Rt:0,vt.message=(Ct=bt.message)!==null&&Ct!==void 0?Ct:"",vt}};function ot(){return{reauthenticate:!1,beforeTimestamp:""}}a.EventsStreamReconnectRequest={encode(bt,Rt=b.Writer.create()){return bt.reauthenticate===!0&&Rt.uint32(8).bool(bt.reauthenticate),bt.beforeTimestamp!==""&&Rt.uint32(18).string(bt.beforeTimestamp),Rt},decode(bt,Rt){const Ct=bt instanceof b.Reader?bt:new b.Reader(bt);let vt=Rt===void 0?Ct.len:Ct.pos+Rt;const Tt=ot();for(;Ct.pos<vt;){const wt=Ct.uint32();switch(wt>>>3){case 1:Tt.reauthenticate=Ct.bool();break;case 2:Tt.beforeTimestamp=Ct.string();break;default:Ct.skipType(wt&7);break}}return Tt},fromJSON(bt){return{reauthenticate:$t(bt.reauthenticate)?Boolean(bt.reauthenticate):!1,beforeTimestamp:$t(bt.beforeTimestamp)?String(bt.beforeTimestamp):""}},toJSON(bt){const Rt={};return bt.reauthenticate!==void 0&&(Rt.reauthenticate=bt.reauthenticate),bt.beforeTimestamp!==void 0&&(Rt.beforeTimestamp=bt.beforeTimestamp),Rt},fromPartial(bt){var Rt,Ct;const vt=ot();return vt.reauthenticate=(Rt=bt.reauthenticate)!==null&&Rt!==void 0?Rt:!1,vt.beforeTimestamp=(Ct=bt.beforeTimestamp)!==null&&Ct!==void 0?Ct:"",vt}};function lt(){return{correlationId:void 0,sessionId:void 0,event:void 0,pong:void 0,error:void 0,subscribed:void 0,unsubscribed:void 0,published:void 0,reconnectBefore:void 0}}a.EventsStreamResponse={encode(bt,Rt=b.Writer.create()){return bt.correlationId!==void 0&&Rt.uint32(18).string(bt.correlationId),bt.sessionId!==void 0&&Rt.uint32(26).string(bt.sessionId),bt.event!==void 0&&a.PublishEventResponse.encode(bt.event,Rt.uint32(802).fork()).ldelim(),bt.pong!==void 0&&Rt.uint32(1602).string(bt.pong),bt.error!==void 0&&a.EventsStreamError.encode(bt.error,Rt.uint32(1610).fork()).ldelim(),bt.subscribed!==void 0&&a.SubscribePayload.encode(bt.subscribed,Rt.uint32(1618).fork()).ldelim(),bt.unsubscribed!==void 0&&a.SubscribePayload.encode(bt.unsubscribed,Rt.uint32(1626).fork()).ldelim(),bt.published!==void 0&&a.PublishEventResponse.encode(bt.published,Rt.uint32(1634).fork()).ldelim(),bt.reconnectBefore!==void 0&&a.EventsStreamReconnectRequest.encode(bt.reconnectBefore,Rt.uint32(1642).fork()).ldelim(),Rt},decode(bt,Rt){const Ct=bt instanceof b.Reader?bt:new b.Reader(bt);let vt=Rt===void 0?Ct.len:Ct.pos+Rt;const Tt=lt();for(;Ct.pos<vt;){const wt=Ct.uint32();switch(wt>>>3){case 2:Tt.correlationId=Ct.string();break;case 3:Tt.sessionId=Ct.string();break;case 100:Tt.event=a.PublishEventResponse.decode(Ct,Ct.uint32());break;case 200:Tt.pong=Ct.string();break;case 201:Tt.error=a.EventsStreamError.decode(Ct,Ct.uint32());break;case 202:Tt.subscribed=a.SubscribePayload.decode(Ct,Ct.uint32());break;case 203:Tt.unsubscribed=a.SubscribePayload.decode(Ct,Ct.uint32());break;case 204:Tt.published=a.PublishEventResponse.decode(Ct,Ct.uint32());break;case 205:Tt.reconnectBefore=a.EventsStreamReconnectRequest.decode(Ct,Ct.uint32());break;default:Ct.skipType(wt&7);break}}return Tt},fromJSON(bt){return{correlationId:$t(bt.correlationId)?String(bt.correlationId):void 0,sessionId:$t(bt.sessionId)?String(bt.sessionId):void 0,event:$t(bt.event)?a.PublishEventResponse.fromJSON(bt.event):void 0,pong:$t(bt.pong)?String(bt.pong):void 0,error:$t(bt.error)?a.EventsStreamError.fromJSON(bt.error):void 0,subscribed:$t(bt.subscribed)?a.SubscribePayload.fromJSON(bt.subscribed):void 0,unsubscribed:$t(bt.unsubscribed)?a.SubscribePayload.fromJSON(bt.unsubscribed):void 0,published:$t(bt.published)?a.PublishEventResponse.fromJSON(bt.published):void 0,reconnectBefore:$t(bt.reconnectBefore)?a.EventsStreamReconnectRequest.fromJSON(bt.reconnectBefore):void 0}},toJSON(bt){const Rt={};return bt.correlationId!==void 0&&(Rt.correlationId=bt.correlationId),bt.sessionId!==void 0&&(Rt.sessionId=bt.sessionId),bt.event!==void 0&&(Rt.event=bt.event?a.PublishEventResponse.toJSON(bt.event):void 0),bt.pong!==void 0&&(Rt.pong=bt.pong),bt.error!==void 0&&(Rt.error=bt.error?a.EventsStreamError.toJSON(bt.error):void 0),bt.subscribed!==void 0&&(Rt.subscribed=bt.subscribed?a.SubscribePayload.toJSON(bt.subscribed):void 0),bt.unsubscribed!==void 0&&(Rt.unsubscribed=bt.unsubscribed?a.SubscribePayload.toJSON(bt.unsubscribed):void 0),bt.published!==void 0&&(Rt.published=bt.published?a.PublishEventResponse.toJSON(bt.published):void 0),bt.reconnectBefore!==void 0&&(Rt.reconnectBefore=bt.reconnectBefore?a.EventsStreamReconnectRequest.toJSON(bt.reconnectBefore):void 0),Rt},fromPartial(bt){var Rt,Ct,vt;const Tt=lt();return Tt.correlationId=(Rt=bt.correlationId)!==null&&Rt!==void 0?Rt:void 0,Tt.sessionId=(Ct=bt.sessionId)!==null&&Ct!==void 0?Ct:void 0,Tt.event=bt.event!==void 0&&bt.event!==null?a.PublishEventResponse.fromPartial(bt.event):void 0,Tt.pong=(vt=bt.pong)!==null&&vt!==void 0?vt:void 0,Tt.error=bt.error!==void 0&&bt.error!==null?a.EventsStreamError.fromPartial(bt.error):void 0,Tt.subscribed=bt.subscribed!==void 0&&bt.subscribed!==null?a.SubscribePayload.fromPartial(bt.subscribed):void 0,Tt.unsubscribed=bt.unsubscribed!==void 0&&bt.unsubscribed!==null?a.SubscribePayload.fromPartial(bt.unsubscribed):void 0,Tt.published=bt.published!==void 0&&bt.published!==null?a.PublishEventResponse.fromPartial(bt.published):void 0,Tt.reconnectBefore=bt.reconnectBefore!==void 0&&bt.reconnectBefore!==null?a.EventsStreamReconnectRequest.fromPartial(bt.reconnectBefore):void 0,Tt}};class Ot{constructor(Rt){this.rpc=Rt,this.Stream=this.Stream.bind(this),this.Publish=this.Publish.bind(this)}Stream(Rt){const Ct=Rt.pipe(k.map(Tt=>a.EventsStreamRequest.encode(Tt).finish()));return this.rpc.bidirectionalStreamingRequest("apis.event.v2.EventService","Stream",Ct).pipe(k.map(Tt=>a.EventsStreamResponse.decode(new b.Reader(Tt))))}Publish(Rt){const Ct=a.PublishEventRequest.encode(Rt).finish();return this.rpc.request("apis.event.v2.EventService","Publish",Ct).then(Tt=>a.PublishEventResponse.decode(new b.Reader(Tt)))}}a.EventServiceClientImpl=Ot,a.EventServiceDefinition={name:"EventService",fullName:"apis.event.v2.EventService",methods:{stream:{name:"Stream",requestType:a.EventsStreamRequest,requestStream:!0,responseType:a.EventsStreamResponse,responseStream:!0,options:{}},publish:{name:"Publish",requestType:a.PublishEventRequest,requestStream:!1,responseType:a.PublishEventResponse,responseStream:!1,options:{}}}};var It=(()=>{if(typeof It!="undefined")return It;if(typeof self!="undefined")return self;if(typeof window!="undefined")return window;if(typeof commonjsGlobal!="undefined")return commonjsGlobal;throw"Unable to locate global object"})();b.util.Long!==g.default&&(b.util.Long=g.default,b.configure());function Pt(bt){return typeof bt=="object"&&bt!==null}function $t(bt){return bt!=null}})(api);(function(a){var s=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(c,m,g,b){b===void 0&&(b=g),Object.defineProperty(c,b,{enumerable:!0,get:function(){return m[g]}})}:function(c,m,g,b){b===void 0&&(b=g),c[b]=m[g]}),d=commonjsGlobal&&commonjsGlobal.__exportStar||function(c,m){for(var g in c)g!=="default"&&!m.hasOwnProperty(g)&&s(m,c,g)};Object.defineProperty(a,"__esModule",{value:!0}),a.eventsApiSupportedEvents=a.eventsApiEventRpcCalls=void 0,d(api,a),a.eventsApiEventRpcCalls={ping:"pong",publish:"published",subscribe:"subscribed",unsubscribe:"unsubscribed"},a.eventsApiSupportedEvents=[...Object.values(a.eventsApiEventRpcCalls),"error","event","reconnectBefore"]})(dist$2);var ws=null;typeof WebSocket!="undefined"?ws=WebSocket:typeof MozWebSocket!="undefined"?ws=MozWebSocket:typeof commonjsGlobal!="undefined"?ws=commonjsGlobal.WebSocket||commonjsGlobal.MozWebSocket:typeof window!="undefined"?ws=window.WebSocket||window.MozWebSocket:typeof self!="undefined"&&(ws=self.WebSocket||self.MozWebSocket);var browser$1=ws,matcher={exports:{}},escapeStringRegexp$1=a=>{if(typeof a!="string")throw new TypeError("Expected a string");return a.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")};const escapeStringRegexp=escapeStringRegexp$1,regexpCache=new Map;function sanitizeArray(a,s){if(!Array.isArray(a))switch(typeof a){case"string":a=[a];break;case"undefined":a=[];break;default:throw new TypeError(`Expected '${s}' to be a string or an array, but got a type of '${typeof a}'`)}return a.filter(d=>{if(typeof d!="string"){if(typeof d=="undefined")return!1;throw new TypeError(`Expected '${s}' to be an array of strings, but found a type of '${typeof d}' in the array`)}return!0})}function makeRegexp(a,s){s=jt({caseSensitive:!1},s);const d=a+JSON.stringify(s);if(regexpCache.has(d))return regexpCache.get(d);const c=a[0]==="!";c&&(a=a.slice(1)),a=escapeStringRegexp(a).replace(/\\\*/g,"[\\s\\S]*");const m=new RegExp(`^${a}$`,s.caseSensitive?"":"i");return m.negated=c,regexpCache.set(d,m),m}matcher.exports=(a,s,d)=>{if(a=sanitizeArray(a,"inputs"),s=sanitizeArray(s,"patterns"),s.length===0)return[];const c=s[0][0]==="!";s=s.map(g=>makeRegexp(g,d));const m=[];for(const g of a){let b=c;for(const k of s)k.test(g)&&(b=!k.negated);b&&m.push(g)}return m};matcher.exports.isMatch=(a,s,d)=>(a=sanitizeArray(a,"inputs"),s=sanitizeArray(s,"patterns"),s.length===0?!1:a.some(c=>s.every(m=>{const g=makeRegexp(m,d),b=g.test(c);return g.negated?!b:b})));var __createBinding$1=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(a,s,d,c){c===void 0&&(c=d);var m=Object.getOwnPropertyDescriptor(s,d);(!m||("get"in m?!s.__esModule:m.writable||m.configurable))&&(m={enumerable:!0,get:function(){return s[d]}}),Object.defineProperty(a,c,m)}:function(a,s,d,c){c===void 0&&(c=d),a[c]=s[d]}),__setModuleDefault$1=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(a,s){Object.defineProperty(a,"default",{enumerable:!0,value:s})}:function(a,s){a.default=s}),__importStar$1=commonjsGlobal&&commonjsGlobal.__importStar||function(a){if(a&&a.__esModule)return a;var s={};if(a!=null)for(var d in a)d!=="default"&&Object.prototype.hasOwnProperty.call(a,d)&&__createBinding$1(s,a,d);return __setModuleDefault$1(s,a),s},__importDefault$e=commonjsGlobal&&commonjsGlobal.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(eventapi,"__esModule",{value:!0});eventapi.EventApi=void 0;const EventApiModel=__importStar$1(dist$2),isomorphic_ws_1=__importDefault$e(browser$1),uuid_1=require$$1$2,NiceGrpc=__importStar$1(lib$1),matcher_1=matcher.exports,api_1=api$2,clientVersion=version$2,WS_PING_INTERVAL=2e4,WS_PING_TIMEOUT=1e4,WS_RECONNECT_DELAY=2e3,WS_MAX_BADAUTH_ATTEMPTS=3,LOG_CATEGORY="EventApi";class EventApi extends api_1.ApiClient{constructor(s,d,c,m){super(s,d,m,LOG_CATEGORY),this.websocketServer=c,this.subscriptions=new Set,this.eventHandlers={},this.calls={},this.messageQueue=[],this.websocketReady=!1,this.reconnectionAttempts=0,this.badAuthentication=!1,this.eventsClient=null}publish(...s){return this.websocketReady?this.call("publish",s[0]):this.eventsClient.publish(...s)}connect(){if(!this.ws){this.cleanup();const s=this.accessToken,d=[`version=${clientVersion}`,`sessionid=${this.sessionId}`];this.sdkVersion&&d.push(`sdkversion=${this.sdkVersion}`),this.ws=new isomorphic_ws_1.default(`${this.websocketServer}/stream?${d.join("&")}`,["Bearer",this.accessToken]);let c;this.ws.addEventListener("message",m=>{const g=JSON.parse(m.data.toString()),b=g.result;if(g.error&&(c=g.error,this.handleEvent("error",{error:{code:g.code,message:g.message}}),["You do not have permission to this resource","You do not have permission to this resource"].includes(g.message)&&(this.badAuthentication=!0)),!b)return;b.reconnectBefore&&b.reconnectBefore.reauthenticate&&this.accessToken===s&&(this.badAuthentication=!0);const k=EventApiModel.eventsApiSupportedEvents.find(et=>!!b[et]);k&&this.handleEvent(k,b)}),this.ws.addEventListener("open",()=>{this.log.info("websocket connected"),this.call("ping","hello",{timeout:WS_PING_TIMEOUT,skipQueue:!0}).then(()=>{this.ready()}).catch(m=>{!c&&m.message!=="Stream connection closed"&&this.disconnect("hello timeout")})}),this.ws.addEventListener("close",m=>{var g;c?this.reconnect(`${(g=c==null?void 0:c.message)!==null&&g!==void 0?g:"unknown"}`):this.reconnect(`closed - ${m.reason||m.code}`)}),this.ws.addEventListener("error",m=>{c=m})}}async subscribe(s,d={}){return this.call("subscribe",jt({name:s},d)).then(()=>{this.subscriptions.add(JSON.stringify(jt({name:s},d)))})}async unsubscribe(s,d={}){this.subscriptions.delete(JSON.stringify({name:s,payload:d})),await this.call("unsubscribe",jt({name:s},d))}on(s,d,c){const m=c||d,g=jt({ignoreSessionEvents:!1,allowedSessionEvents:[]},c?d:{});this.eventHandlers[s]||(this.eventHandlers[s]=[]),this.eventHandlers[s].push(vn(jt({},g),{handler:m}))}off(s,d,c){var m;const g=c||d,b=jt({ignoreSessionEvents:!1,allowedSessionEvents:[]},c?d:{});this.eventHandlers[s]=((m=this.eventHandlers[s])!==null&&m!==void 0?m:[]).filter(k=>!(k.ignoreSessionEvents===b.ignoreSessionEvents&&k.allowedSessionEvents===b.allowedSessionEvents&&k.handler===g&&k.name===b.name))}disconnect(s){this.log.warn(`disconnected from events reason=${s}`),Object.values(this.calls).forEach(d=>{clearTimeout(d.timeout),d.reject(new Error("Stream connection closed"))}),this.calls={},this.cleanup()}_setup(s){this.eventsClient=this.clientFactory.create(EventApiModel.EventServiceDefinition,this.channel,{"*":s}),this.badAuthentication&&(this.badAuthentication=!1,this.reconnectionAttempts=0,this.reconnect("updated token"))}ready(){this.reconnectionAttempts=0,this.badAuthentication=!1,this.websocketReady=!0,this.handleEvent("connected",{connected:void 0});for(const s of this.subscriptions.values())this.send({subscribe:JSON.parse(s),correlationId:(0,uuid_1.v4)()});for(const s of this.messageQueue)this.send(s);this.messageQueue=[],this.pingLoop=setInterval(()=>{this.ping()},WS_PING_INTERVAL)}ping(){this.call("ping",`${+new Date}`,{timeout:WS_PING_TIMEOUT}).catch(()=>{this.reconnect("connection stalled")})}reconnect(s){this.disconnect(s),this.reconnectTimeout=setTimeout(()=>{if(this.reconnectionAttempts++,this.badAuthentication&&this.reconnectionAttempts>=WS_MAX_BADAUTH_ATTEMPTS){this.log.warn("Maximum number of reconnection attempts reached with bad authentication, please re-authenticate the SDK");return}this.connect()},WS_RECONNECT_DELAY)}send(s){this.ws&&this.ws.readyState===this.ws.OPEN?this.ws.send(JSON.stringify(s)):this.log.warn("Message sent to a disconnected stream")}handleEvent(s,d){var c;if(this.calls[d.correlationId]){const m=EventApiModel.eventsApiEventRpcCalls[this.calls[d.correlationId].method]===s,g=!!d.error;if(m||g){this.resolveCall(s,d);return}}for(const m of(c=this.eventHandlers[s])!==null&&c!==void 0?c:[]){if(s==="event"&&d.event){if(d.sessionId===this.sessionId&&m.ignoreSessionEvents&&!m.allowedSessionEvents.includes(d.event.name)){this.log.trace("ignorning event from self: "+d.event.name);continue}if(m.name&&!(0,matcher_1.isMatch)(d.event.name,m.name))continue}else if(d.sessionId===this.sessionId&&m.ignoreSessionEvents){this.log.trace("ignorning event from self");continue}m.handler(d?d[s]:void 0,{isFromCurrentSession:d.sessionId===this.sessionId})}}async call(s,d,c={timeout:2e4,skipQueue:!1}){this.ws||this.connect();const m=(0,uuid_1.v4)();return new Promise((g,b)=>{const k=setTimeout(()=>{delete this.calls[m],b(new Error("Request timed out"))},c.timeout);this.calls[m]={resolve:g,reject:b,timeout:k,method:s},this.websocketReady||c.skipQueue?this.send({[s]:d,correlationId:m}):this.messageQueue.push({[s]:d,correlationId:m})})}resolveCall(s,d){const c=this.calls[d.correlationId];if(!!c){if(clearTimeout(c.timeout),delete this.calls[d.correlationId],s==="error"&&d.error){c.reject(new NiceGrpc.ClientError("error",d.error.code,d.error.message));return}c.resolve(d[s])}}cleanup(){clearTimeout(this.pingLoop),clearTimeout(this.reconnectTimeout),this.websocketReady=!1,this.ws&&(this.ws.onclose=function(){},this.ws.close(),this.ws=null)}}eventapi.EventApi=EventApi;var security={};(function(a){var s=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(_e,ot,lt,Ot){Ot===void 0&&(Ot=lt);var It=Object.getOwnPropertyDescriptor(ot,lt);(!It||("get"in It?!ot.__esModule:It.writable||It.configurable))&&(It={enumerable:!0,get:function(){return ot[lt]}}),Object.defineProperty(_e,Ot,It)}:function(_e,ot,lt,Ot){Ot===void 0&&(Ot=lt),_e[Ot]=ot[lt]}),d=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(_e,ot){Object.defineProperty(_e,"default",{enumerable:!0,value:ot})}:function(_e,ot){_e.default=ot}),c=commonjsGlobal&&commonjsGlobal.__importStar||function(_e){if(_e&&_e.__esModule)return _e;var ot={};if(_e!=null)for(var lt in _e)lt!=="default"&&Object.prototype.hasOwnProperty.call(_e,lt)&&s(ot,_e,lt);return d(ot,_e),ot},m=commonjsGlobal&&commonjsGlobal.__importDefault||function(_e){return _e&&_e.__esModule?_e:{default:_e}};Object.defineProperty(a,"__esModule",{value:!0}),a.GuestUrl=a.SfuTokenPermissions=a.AccessToken=a.GuestControl=a.User=a.GuestScope=a.Authorization=a.SfuRoomMetadata=a.SfuParticipantMetadata=a.protobufPackage=void 0;const g=m(long),b=c(minimal$2),k=api$1;a.protobufPackage="security.v21";function et(){return{serviceId:"",participantRole:void 0,ownerUserId:"",ownerServiceUserId:"",ownerDemo:!1,ownerTrial:!1,collectionId:"",projectId:""}}a.SfuParticipantMetadata={encode(_e,ot=b.Writer.create()){return _e.serviceId!==""&&ot.uint32(10).string(_e.serviceId),_e.participantRole!==void 0&&ot.uint32(66).string(_e.participantRole),_e.ownerUserId!==""&&ot.uint32(18).string(_e.ownerUserId),_e.ownerServiceUserId!==""&&ot.uint32(26).string(_e.ownerServiceUserId),_e.ownerDemo===!0&&ot.uint32(32).bool(_e.ownerDemo),_e.ownerTrial===!0&&ot.uint32(40).bool(_e.ownerTrial),_e.collectionId!==""&&ot.uint32(50).string(_e.collectionId),_e.projectId!==""&&ot.uint32(58).string(_e.projectId),ot},decode(_e,ot){const lt=_e instanceof b.Reader?_e:new b.Reader(_e);let Ot=ot===void 0?lt.len:lt.pos+ot;const It=et();for(;lt.pos<Ot;){const Pt=lt.uint32();switch(Pt>>>3){case 1:It.serviceId=lt.string();break;case 8:It.participantRole=lt.string();break;case 2:It.ownerUserId=lt.string();break;case 3:It.ownerServiceUserId=lt.string();break;case 4:It.ownerDemo=lt.bool();break;case 5:It.ownerTrial=lt.bool();break;case 6:It.collectionId=lt.string();break;case 7:It.projectId=lt.string();break;default:lt.skipType(Pt&7);break}}return It},fromJSON(_e){return{serviceId:ht(_e.serviceId)?String(_e.serviceId):"",participantRole:ht(_e.participantRole)?String(_e.participantRole):void 0,ownerUserId:ht(_e.ownerUserId)?String(_e.ownerUserId):"",ownerServiceUserId:ht(_e.ownerServiceUserId)?String(_e.ownerServiceUserId):"",ownerDemo:ht(_e.ownerDemo)?Boolean(_e.ownerDemo):!1,ownerTrial:ht(_e.ownerTrial)?Boolean(_e.ownerTrial):!1,collectionId:ht(_e.collectionId)?String(_e.collectionId):"",projectId:ht(_e.projectId)?String(_e.projectId):""}},toJSON(_e){const ot={};return _e.serviceId!==void 0&&(ot.serviceId=_e.serviceId),_e.participantRole!==void 0&&(ot.participantRole=_e.participantRole),_e.ownerUserId!==void 0&&(ot.ownerUserId=_e.ownerUserId),_e.ownerServiceUserId!==void 0&&(ot.ownerServiceUserId=_e.ownerServiceUserId),_e.ownerDemo!==void 0&&(ot.ownerDemo=_e.ownerDemo),_e.ownerTrial!==void 0&&(ot.ownerTrial=_e.ownerTrial),_e.collectionId!==void 0&&(ot.collectionId=_e.collectionId),_e.projectId!==void 0&&(ot.projectId=_e.projectId),ot},fromPartial(_e){var ot,lt,Ot,It,Pt,$t,bt,Rt;const Ct=et();return Ct.serviceId=(ot=_e.serviceId)!==null&&ot!==void 0?ot:"",Ct.participantRole=(lt=_e.participantRole)!==null&&lt!==void 0?lt:void 0,Ct.ownerUserId=(Ot=_e.ownerUserId)!==null&&Ot!==void 0?Ot:"",Ct.ownerServiceUserId=(It=_e.ownerServiceUserId)!==null&&It!==void 0?It:"",Ct.ownerDemo=(Pt=_e.ownerDemo)!==null&&Pt!==void 0?Pt:!1,Ct.ownerTrial=($t=_e.ownerTrial)!==null&&$t!==void 0?$t:!1,Ct.collectionId=(bt=_e.collectionId)!==null&&bt!==void 0?bt:"",Ct.projectId=(Rt=_e.projectId)!==null&&Rt!==void 0?Rt:"",Ct}};function nt(){return{serviceId:"",ownerUserId:"",ownerServiceUserId:"",ownerDemo:!1,ownerTrial:!1,collectionId:"",projectId:"",platformService:""}}a.SfuRoomMetadata={encode(_e,ot=b.Writer.create()){return _e.serviceId!==""&&ot.uint32(10).string(_e.serviceId),_e.ownerUserId!==""&&ot.uint32(18).string(_e.ownerUserId),_e.ownerServiceUserId!==""&&ot.uint32(26).string(_e.ownerServiceUserId),_e.ownerDemo===!0&&ot.uint32(32).bool(_e.ownerDemo),_e.ownerTrial===!0&&ot.uint32(40).bool(_e.ownerTrial),_e.collectionId!==""&&ot.uint32(50).string(_e.collectionId),_e.projectId!==""&&ot.uint32(58).string(_e.projectId),_e.platformService!==""&&ot.uint32(66).string(_e.platformService),ot},decode(_e,ot){const lt=_e instanceof b.Reader?_e:new b.Reader(_e);let Ot=ot===void 0?lt.len:lt.pos+ot;const It=nt();for(;lt.pos<Ot;){const Pt=lt.uint32();switch(Pt>>>3){case 1:It.serviceId=lt.string();break;case 2:It.ownerUserId=lt.string();break;case 3:It.ownerServiceUserId=lt.string();break;case 4:It.ownerDemo=lt.bool();break;case 5:It.ownerTrial=lt.bool();break;case 6:It.collectionId=lt.string();break;case 7:It.projectId=lt.string();break;case 8:It.platformService=lt.string();break;default:lt.skipType(Pt&7);break}}return It},fromJSON(_e){return{serviceId:ht(_e.serviceId)?String(_e.serviceId):"",ownerUserId:ht(_e.ownerUserId)?String(_e.ownerUserId):"",ownerServiceUserId:ht(_e.ownerServiceUserId)?String(_e.ownerServiceUserId):"",ownerDemo:ht(_e.ownerDemo)?Boolean(_e.ownerDemo):!1,ownerTrial:ht(_e.ownerTrial)?Boolean(_e.ownerTrial):!1,collectionId:ht(_e.collectionId)?String(_e.collectionId):"",projectId:ht(_e.projectId)?String(_e.projectId):"",platformService:ht(_e.platformService)?String(_e.platformService):""}},toJSON(_e){const ot={};return _e.serviceId!==void 0&&(ot.serviceId=_e.serviceId),_e.ownerUserId!==void 0&&(ot.ownerUserId=_e.ownerUserId),_e.ownerServiceUserId!==void 0&&(ot.ownerServiceUserId=_e.ownerServiceUserId),_e.ownerDemo!==void 0&&(ot.ownerDemo=_e.ownerDemo),_e.ownerTrial!==void 0&&(ot.ownerTrial=_e.ownerTrial),_e.collectionId!==void 0&&(ot.collectionId=_e.collectionId),_e.projectId!==void 0&&(ot.projectId=_e.projectId),_e.platformService!==void 0&&(ot.platformService=_e.platformService),ot},fromPartial(_e){var ot,lt,Ot,It,Pt,$t,bt,Rt;const Ct=nt();return Ct.serviceId=(ot=_e.serviceId)!==null&&ot!==void 0?ot:"",Ct.ownerUserId=(lt=_e.ownerUserId)!==null&&lt!==void 0?lt:"",Ct.ownerServiceUserId=(Ot=_e.ownerServiceUserId)!==null&&Ot!==void 0?Ot:"",Ct.ownerDemo=(It=_e.ownerDemo)!==null&&It!==void 0?It:!1,Ct.ownerTrial=(Pt=_e.ownerTrial)!==null&&Pt!==void 0?Pt:!1,Ct.collectionId=($t=_e.collectionId)!==null&&$t!==void 0?$t:"",Ct.projectId=(bt=_e.projectId)!==null&&bt!==void 0?bt:"",Ct.platformService=(Rt=_e.platformService)!==null&&Rt!==void 0?Rt:"",Ct}};function it(){return{ownerServiceName:"",ownerServiceId:"",ownerUserId:"",ownerServiceUserId:"",ownerDemo:!1,applicableScope:[],role:void 0,ownerTrial:!1}}a.Authorization={encode(_e,ot=b.Writer.create()){_e.ownerServiceName!==""&&ot.uint32(10).string(_e.ownerServiceName),_e.ownerServiceId!==""&&ot.uint32(18).string(_e.ownerServiceId),_e.ownerUserId!==""&&ot.uint32(26).string(_e.ownerUserId),_e.ownerServiceUserId!==""&&ot.uint32(34).string(_e.ownerServiceUserId),_e.ownerDemo===!0&&ot.uint32(40).bool(_e.ownerDemo);for(const lt of _e.applicableScope)ot.uint32(50).string(lt);return _e.role!==void 0&&ot.uint32(58).string(_e.role),_e.ownerTrial===!0&&ot.uint32(64).bool(_e.ownerTrial),ot},decode(_e,ot){const lt=_e instanceof b.Reader?_e:new b.Reader(_e);let Ot=ot===void 0?lt.len:lt.pos+ot;const It=it();for(;lt.pos<Ot;){const Pt=lt.uint32();switch(Pt>>>3){case 1:It.ownerServiceName=lt.string();break;case 2:It.ownerServiceId=lt.string();break;case 3:It.ownerUserId=lt.string();break;case 4:It.ownerServiceUserId=lt.string();break;case 5:It.ownerDemo=lt.bool();break;case 6:It.applicableScope.push(lt.string());break;case 7:It.role=lt.string();break;case 8:It.ownerTrial=lt.bool();break;default:lt.skipType(Pt&7);break}}return It},fromJSON(_e){return{ownerServiceName:ht(_e.ownerServiceName)?String(_e.ownerServiceName):"",ownerServiceId:ht(_e.ownerServiceId)?String(_e.ownerServiceId):"",ownerUserId:ht(_e.ownerUserId)?String(_e.ownerUserId):"",ownerServiceUserId:ht(_e.ownerServiceUserId)?String(_e.ownerServiceUserId):"",ownerDemo:ht(_e.ownerDemo)?Boolean(_e.ownerDemo):!1,applicableScope:Array.isArray(_e==null?void 0:_e.applicableScope)?_e.applicableScope.map(ot=>String(ot)):[],role:ht(_e.role)?String(_e.role):void 0,ownerTrial:ht(_e.ownerTrial)?Boolean(_e.ownerTrial):!1}},toJSON(_e){const ot={};return _e.ownerServiceName!==void 0&&(ot.ownerServiceName=_e.ownerServiceName),_e.ownerServiceId!==void 0&&(ot.ownerServiceId=_e.ownerServiceId),_e.ownerUserId!==void 0&&(ot.ownerUserId=_e.ownerUserId),_e.ownerServiceUserId!==void 0&&(ot.ownerServiceUserId=_e.ownerServiceUserId),_e.ownerDemo!==void 0&&(ot.ownerDemo=_e.ownerDemo),_e.applicableScope?ot.applicableScope=_e.applicableScope.map(lt=>lt):ot.applicableScope=[],_e.role!==void 0&&(ot.role=_e.role),_e.ownerTrial!==void 0&&(ot.ownerTrial=_e.ownerTrial),ot},fromPartial(_e){var ot,lt,Ot,It,Pt,$t,bt,Rt;const Ct=it();return Ct.ownerServiceName=(ot=_e.ownerServiceName)!==null&&ot!==void 0?ot:"",Ct.ownerServiceId=(lt=_e.ownerServiceId)!==null&&lt!==void 0?lt:"",Ct.ownerUserId=(Ot=_e.ownerUserId)!==null&&Ot!==void 0?Ot:"",Ct.ownerServiceUserId=(It=_e.ownerServiceUserId)!==null&&It!==void 0?It:"",Ct.ownerDemo=(Pt=_e.ownerDemo)!==null&&Pt!==void 0?Pt:!1,Ct.applicableScope=(($t=_e.applicableScope)===null||$t===void 0?void 0:$t.map(vt=>vt))||[],Ct.role=(bt=_e.role)!==null&&bt!==void 0?bt:void 0,Ct.ownerTrial=(Rt=_e.ownerTrial)!==null&&Rt!==void 0?Rt:!1,Ct}};function ct(){return{collectionId:void 0,projectId:void 0,ownerServiceUserId:"",ownerUserId:"",scope:[],requestedScope:[],requestedMaxDuration:void 0}}a.GuestScope={encode(_e,ot=b.Writer.create()){_e.collectionId!==void 0&&ot.uint32(10).string(_e.collectionId),_e.projectId!==void 0&&ot.uint32(18).string(_e.projectId),_e.ownerServiceUserId!==""&&ot.uint32(34).string(_e.ownerServiceUserId),_e.ownerUserId!==""&&ot.uint32(42).string(_e.ownerUserId);for(const lt of _e.scope)ot.uint32(50).string(lt);for(const lt of _e.requestedScope)ot.uint32(58).string(lt);return _e.requestedMaxDuration!==void 0&&ot.uint32(64).uint32(_e.requestedMaxDuration),ot},decode(_e,ot){const lt=_e instanceof b.Reader?_e:new b.Reader(_e);let Ot=ot===void 0?lt.len:lt.pos+ot;const It=ct();for(;lt.pos<Ot;){const Pt=lt.uint32();switch(Pt>>>3){case 1:It.collectionId=lt.string();break;case 2:It.projectId=lt.string();break;case 4:It.ownerServiceUserId=lt.string();break;case 5:It.ownerUserId=lt.string();break;case 6:It.scope.push(lt.string());break;case 7:It.requestedScope.push(lt.string());break;case 8:It.requestedMaxDuration=lt.uint32();break;default:lt.skipType(Pt&7);break}}return It},fromJSON(_e){return{collectionId:ht(_e.collectionId)?String(_e.collectionId):void 0,projectId:ht(_e.projectId)?String(_e.projectId):void 0,ownerServiceUserId:ht(_e.ownerServiceUserId)?String(_e.ownerServiceUserId):"",ownerUserId:ht(_e.ownerUserId)?String(_e.ownerUserId):"",scope:Array.isArray(_e==null?void 0:_e.scope)?_e.scope.map(ot=>String(ot)):[],requestedScope:Array.isArray(_e==null?void 0:_e.requestedScope)?_e.requestedScope.map(ot=>String(ot)):[],requestedMaxDuration:ht(_e.requestedMaxDuration)?Number(_e.requestedMaxDuration):void 0}},toJSON(_e){const ot={};return _e.collectionId!==void 0&&(ot.collectionId=_e.collectionId),_e.projectId!==void 0&&(ot.projectId=_e.projectId),_e.ownerServiceUserId!==void 0&&(ot.ownerServiceUserId=_e.ownerServiceUserId),_e.ownerUserId!==void 0&&(ot.ownerUserId=_e.ownerUserId),_e.scope?ot.scope=_e.scope.map(lt=>lt):ot.scope=[],_e.requestedScope?ot.requestedScope=_e.requestedScope.map(lt=>lt):ot.requestedScope=[],_e.requestedMaxDuration!==void 0&&(ot.requestedMaxDuration=Math.round(_e.requestedMaxDuration)),ot},fromPartial(_e){var ot,lt,Ot,It,Pt,$t,bt;const Rt=ct();return Rt.collectionId=(ot=_e.collectionId)!==null&&ot!==void 0?ot:void 0,Rt.projectId=(lt=_e.projectId)!==null&&lt!==void 0?lt:void 0,Rt.ownerServiceUserId=(Ot=_e.ownerServiceUserId)!==null&&Ot!==void 0?Ot:"",Rt.ownerUserId=(It=_e.ownerUserId)!==null&&It!==void 0?It:"",Rt.scope=((Pt=_e.scope)===null||Pt===void 0?void 0:Pt.map(Ct=>Ct))||[],Rt.requestedScope=(($t=_e.requestedScope)===null||$t===void 0?void 0:$t.map(Ct=>Ct))||[],Rt.requestedMaxDuration=(bt=_e.requestedMaxDuration)!==null&&bt!==void 0?bt:void 0,Rt}};function st(){return{serviceId:"",serviceName:"",serviceUserId:"",userId:"",displayName:void 0,demo:!1,scope:[],guestScope:[]}}a.User={encode(_e,ot=b.Writer.create()){_e.serviceId!==""&&ot.uint32(10).string(_e.serviceId),_e.serviceName!==""&&ot.uint32(18).string(_e.serviceName),_e.serviceUserId!==""&&ot.uint32(26).string(_e.serviceUserId),_e.userId!==""&&ot.uint32(34).string(_e.userId),_e.displayName!==void 0&&ot.uint32(42).string(_e.displayName),_e.demo===!0&&ot.uint32(48).bool(_e.demo);for(const lt of _e.scope)ot.uint32(58).string(lt);for(const lt of _e.guestScope)a.GuestScope.encode(lt,ot.uint32(66).fork()).ldelim();return ot},decode(_e,ot){const lt=_e instanceof b.Reader?_e:new b.Reader(_e);let Ot=ot===void 0?lt.len:lt.pos+ot;const It=st();for(;lt.pos<Ot;){const Pt=lt.uint32();switch(Pt>>>3){case 1:It.serviceId=lt.string();break;case 2:It.serviceName=lt.string();break;case 3:It.serviceUserId=lt.string();break;case 4:It.userId=lt.string();break;case 5:It.displayName=lt.string();break;case 6:It.demo=lt.bool();break;case 7:It.scope.push(lt.string());break;case 8:It.guestScope.push(a.GuestScope.decode(lt,lt.uint32()));break;default:lt.skipType(Pt&7);break}}return It},fromJSON(_e){return{serviceId:ht(_e.serviceId)?String(_e.serviceId):"",serviceName:ht(_e.serviceName)?String(_e.serviceName):"",serviceUserId:ht(_e.serviceUserId)?String(_e.serviceUserId):"",userId:ht(_e.userId)?String(_e.userId):"",displayName:ht(_e.displayName)?String(_e.displayName):void 0,demo:ht(_e.demo)?Boolean(_e.demo):!1,scope:Array.isArray(_e==null?void 0:_e.scope)?_e.scope.map(ot=>String(ot)):[],guestScope:Array.isArray(_e==null?void 0:_e.guestScope)?_e.guestScope.map(ot=>a.GuestScope.fromJSON(ot)):[]}},toJSON(_e){const ot={};return _e.serviceId!==void 0&&(ot.serviceId=_e.serviceId),_e.serviceName!==void 0&&(ot.serviceName=_e.serviceName),_e.serviceUserId!==void 0&&(ot.serviceUserId=_e.serviceUserId),_e.userId!==void 0&&(ot.userId=_e.userId),_e.displayName!==void 0&&(ot.displayName=_e.displayName),_e.demo!==void 0&&(ot.demo=_e.demo),_e.scope?ot.scope=_e.scope.map(lt=>lt):ot.scope=[],_e.guestScope?ot.guestScope=_e.guestScope.map(lt=>lt?a.GuestScope.toJSON(lt):void 0):ot.guestScope=[],ot},fromPartial(_e){var ot,lt,Ot,It,Pt,$t,bt,Rt;const Ct=st();return Ct.serviceId=(ot=_e.serviceId)!==null&&ot!==void 0?ot:"",Ct.serviceName=(lt=_e.serviceName)!==null&&lt!==void 0?lt:"",Ct.serviceUserId=(Ot=_e.serviceUserId)!==null&&Ot!==void 0?Ot:"",Ct.userId=(It=_e.userId)!==null&&It!==void 0?It:"",Ct.displayName=(Pt=_e.displayName)!==null&&Pt!==void 0?Pt:void 0,Ct.demo=($t=_e.demo)!==null&&$t!==void 0?$t:!1,Ct.scope=((bt=_e.scope)===null||bt===void 0?void 0:bt.map(vt=>vt))||[],Ct.guestScope=((Rt=_e.guestScope)===null||Rt===void 0?void 0:Rt.map(vt=>a.GuestScope.fromPartial(vt)))||[],Ct}};function ut(){return{projectId:"",collectionId:"",role:k.Role.ROLE_UNSPECIFIED}}a.GuestControl={encode(_e,ot=b.Writer.create()){return _e.projectId!==""&&ot.uint32(10).string(_e.projectId),_e.collectionId!==""&&ot.uint32(18).string(_e.collectionId),_e.role!==k.Role.ROLE_UNSPECIFIED&&ot.uint32(24).int32((0,k.roleToNumber)(_e.role)),ot},decode(_e,ot){const lt=_e instanceof b.Reader?_e:new b.Reader(_e);let Ot=ot===void 0?lt.len:lt.pos+ot;const It=ut();for(;lt.pos<Ot;){const Pt=lt.uint32();switch(Pt>>>3){case 1:It.projectId=lt.string();break;case 2:It.collectionId=lt.string();break;case 3:It.role=(0,k.roleFromJSON)(lt.int32());break;default:lt.skipType(Pt&7);break}}return It},fromJSON(_e){return{projectId:ht(_e.projectId)?String(_e.projectId):"",collectionId:ht(_e.collectionId)?String(_e.collectionId):"",role:ht(_e.role)?(0,k.roleFromJSON)(_e.role):k.Role.ROLE_UNSPECIFIED}},toJSON(_e){const ot={};return _e.projectId!==void 0&&(ot.projectId=_e.projectId),_e.collectionId!==void 0&&(ot.collectionId=_e.collectionId),_e.role!==void 0&&(ot.role=(0,k.roleToJSON)(_e.role)),ot},fromPartial(_e){var ot,lt,Ot;const It=ut();return It.projectId=(ot=_e.projectId)!==null&&ot!==void 0?ot:"",It.collectionId=(lt=_e.collectionId)!==null&&lt!==void 0?lt:"",It.role=(Ot=_e.role)!==null&&Ot!==void 0?Ot:k.Role.ROLE_UNSPECIFIED,It}};function pt(){return{typ:"",alg:"",nbf:0,iat:0,exp:0,iss:"",aud:"",sub:"",user:void 0,guestControl:void 0}}a.AccessToken={encode(_e,ot=b.Writer.create()){return _e.typ!==""&&ot.uint32(10).string(_e.typ),_e.alg!==""&&ot.uint32(18).string(_e.alg),_e.nbf!==0&&ot.uint32(24).uint32(_e.nbf),_e.iat!==0&&ot.uint32(32).uint32(_e.iat),_e.exp!==0&&ot.uint32(40).uint32(_e.exp),_e.iss!==""&&ot.uint32(50).string(_e.iss),_e.aud!==""&&ot.uint32(58).string(_e.aud),_e.sub!==""&&ot.uint32(66).string(_e.sub),_e.user!==void 0&&a.User.encode(_e.user,ot.uint32(74).fork()).ldelim(),_e.guestControl!==void 0&&a.GuestControl.encode(_e.guestControl,ot.uint32(82).fork()).ldelim(),ot},decode(_e,ot){const lt=_e instanceof b.Reader?_e:new b.Reader(_e);let Ot=ot===void 0?lt.len:lt.pos+ot;const It=pt();for(;lt.pos<Ot;){const Pt=lt.uint32();switch(Pt>>>3){case 1:It.typ=lt.string();break;case 2:It.alg=lt.string();break;case 3:It.nbf=lt.uint32();break;case 4:It.iat=lt.uint32();break;case 5:It.exp=lt.uint32();break;case 6:It.iss=lt.string();break;case 7:It.aud=lt.string();break;case 8:It.sub=lt.string();break;case 9:It.user=a.User.decode(lt,lt.uint32());break;case 10:It.guestControl=a.GuestControl.decode(lt,lt.uint32());break;default:lt.skipType(Pt&7);break}}return It},fromJSON(_e){return{typ:ht(_e.typ)?String(_e.typ):"",alg:ht(_e.alg)?String(_e.alg):"",nbf:ht(_e.nbf)?Number(_e.nbf):0,iat:ht(_e.iat)?Number(_e.iat):0,exp:ht(_e.exp)?Number(_e.exp):0,iss:ht(_e.iss)?String(_e.iss):"",aud:ht(_e.aud)?String(_e.aud):"",sub:ht(_e.sub)?String(_e.sub):"",user:ht(_e.user)?a.User.fromJSON(_e.user):void 0,guestControl:ht(_e.guestControl)?a.GuestControl.fromJSON(_e.guestControl):void 0}},toJSON(_e){const ot={};return _e.typ!==void 0&&(ot.typ=_e.typ),_e.alg!==void 0&&(ot.alg=_e.alg),_e.nbf!==void 0&&(ot.nbf=Math.round(_e.nbf)),_e.iat!==void 0&&(ot.iat=Math.round(_e.iat)),_e.exp!==void 0&&(ot.exp=Math.round(_e.exp)),_e.iss!==void 0&&(ot.iss=_e.iss),_e.aud!==void 0&&(ot.aud=_e.aud),_e.sub!==void 0&&(ot.sub=_e.sub),_e.user!==void 0&&(ot.user=_e.user?a.User.toJSON(_e.user):void 0),_e.guestControl!==void 0&&(ot.guestControl=_e.guestControl?a.GuestControl.toJSON(_e.guestControl):void 0),ot},fromPartial(_e){var ot,lt,Ot,It,Pt,$t,bt,Rt;const Ct=pt();return Ct.typ=(ot=_e.typ)!==null&&ot!==void 0?ot:"",Ct.alg=(lt=_e.alg)!==null&&lt!==void 0?lt:"",Ct.nbf=(Ot=_e.nbf)!==null&&Ot!==void 0?Ot:0,Ct.iat=(It=_e.iat)!==null&&It!==void 0?It:0,Ct.exp=(Pt=_e.exp)!==null&&Pt!==void 0?Pt:0,Ct.iss=($t=_e.iss)!==null&&$t!==void 0?$t:"",Ct.aud=(bt=_e.aud)!==null&&bt!==void 0?bt:"",Ct.sub=(Rt=_e.sub)!==null&&Rt!==void 0?Rt:"",Ct.user=_e.user!==void 0&&_e.user!==null?a.User.fromPartial(_e.user):void 0,Ct.guestControl=_e.guestControl!==void 0&&_e.guestControl!==null?a.GuestControl.fromPartial(_e.guestControl):void 0,Ct}};function St(){return{roomCreate:!1,roomList:!1,roomJoin:!1,roomAdmin:!1,canPublish:!1,canPublishData:!1,canSubscribe:!1,hideParticipant:!1}}a.SfuTokenPermissions={encode(_e,ot=b.Writer.create()){return _e.roomCreate===!0&&ot.uint32(8).bool(_e.roomCreate),_e.roomList===!0&&ot.uint32(16).bool(_e.roomList),_e.roomJoin===!0&&ot.uint32(24).bool(_e.roomJoin),_e.roomAdmin===!0&&ot.uint32(32).bool(_e.roomAdmin),_e.canPublish===!0&&ot.uint32(40).bool(_e.canPublish),_e.canPublishData===!0&&ot.uint32(48).bool(_e.canPublishData),_e.canSubscribe===!0&&ot.uint32(56).bool(_e.canSubscribe),_e.hideParticipant===!0&&ot.uint32(64).bool(_e.hideParticipant),ot},decode(_e,ot){const lt=_e instanceof b.Reader?_e:new b.Reader(_e);let Ot=ot===void 0?lt.len:lt.pos+ot;const It=St();for(;lt.pos<Ot;){const Pt=lt.uint32();switch(Pt>>>3){case 1:It.roomCreate=lt.bool();break;case 2:It.roomList=lt.bool();break;case 3:It.roomJoin=lt.bool();break;case 4:It.roomAdmin=lt.bool();break;case 5:It.canPublish=lt.bool();break;case 6:It.canPublishData=lt.bool();break;case 7:It.canSubscribe=lt.bool();break;case 8:It.hideParticipant=lt.bool();break;default:lt.skipType(Pt&7);break}}return It},fromJSON(_e){return{roomCreate:ht(_e.roomCreate)?Boolean(_e.roomCreate):!1,roomList:ht(_e.roomList)?Boolean(_e.roomList):!1,roomJoin:ht(_e.roomJoin)?Boolean(_e.roomJoin):!1,roomAdmin:ht(_e.roomAdmin)?Boolean(_e.roomAdmin):!1,canPublish:ht(_e.canPublish)?Boolean(_e.canPublish):!1,canPublishData:ht(_e.canPublishData)?Boolean(_e.canPublishData):!1,canSubscribe:ht(_e.canSubscribe)?Boolean(_e.canSubscribe):!1,hideParticipant:ht(_e.hideParticipant)?Boolean(_e.hideParticipant):!1}},toJSON(_e){const ot={};return _e.roomCreate!==void 0&&(ot.roomCreate=_e.roomCreate),_e.roomList!==void 0&&(ot.roomList=_e.roomList),_e.roomJoin!==void 0&&(ot.roomJoin=_e.roomJoin),_e.roomAdmin!==void 0&&(ot.roomAdmin=_e.roomAdmin),_e.canPublish!==void 0&&(ot.canPublish=_e.canPublish),_e.canPublishData!==void 0&&(ot.canPublishData=_e.canPublishData),_e.canSubscribe!==void 0&&(ot.canSubscribe=_e.canSubscribe),_e.hideParticipant!==void 0&&(ot.hideParticipant=_e.hideParticipant),ot},fromPartial(_e){var ot,lt,Ot,It,Pt,$t,bt,Rt;const Ct=St();return Ct.roomCreate=(ot=_e.roomCreate)!==null&&ot!==void 0?ot:!1,Ct.roomList=(lt=_e.roomList)!==null&&lt!==void 0?lt:!1,Ct.roomJoin=(Ot=_e.roomJoin)!==null&&Ot!==void 0?Ot:!1,Ct.roomAdmin=(It=_e.roomAdmin)!==null&&It!==void 0?It:!1,Ct.canPublish=(Pt=_e.canPublish)!==null&&Pt!==void 0?Pt:!1,Ct.canPublishData=($t=_e.canPublishData)!==null&&$t!==void 0?$t:!1,Ct.canSubscribe=(bt=_e.canSubscribe)!==null&&bt!==void 0?bt:!1,Ct.hideParticipant=(Rt=_e.hideParticipant)!==null&&Rt!==void 0?Rt:!1,Ct}};function _t(){return{collectionId:"",projectId:"",code:"",url:""}}a.GuestUrl={encode(_e,ot=b.Writer.create()){return _e.collectionId!==""&&ot.uint32(10).string(_e.collectionId),_e.projectId!==""&&ot.uint32(18).string(_e.projectId),_e.code!==""&&ot.uint32(26).string(_e.code),_e.url!==""&&ot.uint32(34).string(_e.url),ot},decode(_e,ot){const lt=_e instanceof b.Reader?_e:new b.Reader(_e);let Ot=ot===void 0?lt.len:lt.pos+ot;const It=_t();for(;lt.pos<Ot;){const Pt=lt.uint32();switch(Pt>>>3){case 1:It.collectionId=lt.string();break;case 2:It.projectId=lt.string();break;case 3:It.code=lt.string();break;case 4:It.url=lt.string();break;default:lt.skipType(Pt&7);break}}return It},fromJSON(_e){return{collectionId:ht(_e.collectionId)?String(_e.collectionId):"",projectId:ht(_e.projectId)?String(_e.projectId):"",code:ht(_e.code)?String(_e.code):"",url:ht(_e.url)?String(_e.url):""}},toJSON(_e){const ot={};return _e.collectionId!==void 0&&(ot.collectionId=_e.collectionId),_e.projectId!==void 0&&(ot.projectId=_e.projectId),_e.code!==void 0&&(ot.code=_e.code),_e.url!==void 0&&(ot.url=_e.url),ot},fromPartial(_e){var ot,lt,Ot,It;const Pt=_t();return Pt.collectionId=(ot=_e.collectionId)!==null&&ot!==void 0?ot:"",Pt.projectId=(lt=_e.projectId)!==null&&lt!==void 0?lt:"",Pt.code=(Ot=_e.code)!==null&&Ot!==void 0?Ot:"",Pt.url=(It=_e.url)!==null&&It!==void 0?It:"",Pt}},b.util.Long!==g.default&&(b.util.Long=g.default,b.configure());function ht(_e){return _e!=null}})(security);var dist$1={},grants={};Object.defineProperty(grants,"__esModule",{value:!0});var livekit_models$1={};(function(a){var s=commonjsGlobal&&commonjsGlobal.__importDefault||function($){return $&&$.__esModule?$:{default:$}};Object.defineProperty(a,"__esModule",{value:!0}),a.ParticipantTracks=a.UserPacket=a.SpeakerInfo=a.ActiveSpeakerUpdate=a.DataPacket=a.VideoLayer=a.TrackInfo=a.ParticipantInfo=a.Codec=a.Room=a.dataPacket_KindToJSON=a.dataPacket_KindFromJSON=a.DataPacket_Kind=a.participantInfo_StateToJSON=a.participantInfo_StateFromJSON=a.ParticipantInfo_State=a.connectionQualityToJSON=a.connectionQualityFromJSON=a.ConnectionQuality=a.videoQualityToJSON=a.videoQualityFromJSON=a.VideoQuality=a.trackSourceToJSON=a.trackSourceFromJSON=a.TrackSource=a.trackTypeToJSON=a.trackTypeFromJSON=a.TrackType=a.protobufPackage=void 0;const d=s(long),c=s(minimal$2);a.protobufPackage="livekit";var m;(function($){$[$.AUDIO=0]="AUDIO",$[$.VIDEO=1]="VIDEO",$[$.DATA=2]="DATA",$[$.UNRECOGNIZED=-1]="UNRECOGNIZED"})(m=a.TrackType||(a.TrackType={}));function g($){switch($){case 0:case"AUDIO":return m.AUDIO;case 1:case"VIDEO":return m.VIDEO;case 2:case"DATA":return m.DATA;case-1:case"UNRECOGNIZED":default:return m.UNRECOGNIZED}}a.trackTypeFromJSON=g;function b($){switch($){case m.AUDIO:return"AUDIO";case m.VIDEO:return"VIDEO";case m.DATA:return"DATA";default:return"UNKNOWN"}}a.trackTypeToJSON=b;var k;(function($){$[$.UNKNOWN=0]="UNKNOWN",$[$.CAMERA=1]="CAMERA",$[$.MICROPHONE=2]="MICROPHONE",$[$.SCREEN_SHARE=3]="SCREEN_SHARE",$[$.SCREEN_SHARE_AUDIO=4]="SCREEN_SHARE_AUDIO",$[$.UNRECOGNIZED=-1]="UNRECOGNIZED"})(k=a.TrackSource||(a.TrackSource={}));function et($){switch($){case 0:case"UNKNOWN":return k.UNKNOWN;case 1:case"CAMERA":return k.CAMERA;case 2:case"MICROPHONE":return k.MICROPHONE;case 3:case"SCREEN_SHARE":return k.SCREEN_SHARE;case 4:case"SCREEN_SHARE_AUDIO":return k.SCREEN_SHARE_AUDIO;case-1:case"UNRECOGNIZED":default:return k.UNRECOGNIZED}}a.trackSourceFromJSON=et;function nt($){switch($){case k.UNKNOWN:return"UNKNOWN";case k.CAMERA:return"CAMERA";case k.MICROPHONE:return"MICROPHONE";case k.SCREEN_SHARE:return"SCREEN_SHARE";case k.SCREEN_SHARE_AUDIO:return"SCREEN_SHARE_AUDIO";default:return"UNKNOWN"}}a.trackSourceToJSON=nt;var it;(function($){$[$.LOW=0]="LOW",$[$.MEDIUM=1]="MEDIUM",$[$.HIGH=2]="HIGH",$[$.UNRECOGNIZED=-1]="UNRECOGNIZED"})(it=a.VideoQuality||(a.VideoQuality={}));function ct($){switch($){case 0:case"LOW":return it.LOW;case 1:case"MEDIUM":return it.MEDIUM;case 2:case"HIGH":return it.HIGH;case-1:case"UNRECOGNIZED":default:return it.UNRECOGNIZED}}a.videoQualityFromJSON=ct;function st($){switch($){case it.LOW:return"LOW";case it.MEDIUM:return"MEDIUM";case it.HIGH:return"HIGH";default:return"UNKNOWN"}}a.videoQualityToJSON=st;var ut;(function($){$[$.POOR=0]="POOR",$[$.GOOD=1]="GOOD",$[$.EXCELLENT=2]="EXCELLENT",$[$.UNRECOGNIZED=-1]="UNRECOGNIZED"})(ut=a.ConnectionQuality||(a.ConnectionQuality={}));function pt($){switch($){case 0:case"POOR":return ut.POOR;case 1:case"GOOD":return ut.GOOD;case 2:case"EXCELLENT":return ut.EXCELLENT;case-1:case"UNRECOGNIZED":default:return ut.UNRECOGNIZED}}a.connectionQualityFromJSON=pt;function St($){switch($){case ut.POOR:return"POOR";case ut.GOOD:return"GOOD";case ut.EXCELLENT:return"EXCELLENT";default:return"UNKNOWN"}}a.connectionQualityToJSON=St;var _t;(function($){$[$.JOINING=0]="JOINING",$[$.JOINED=1]="JOINED",$[$.ACTIVE=2]="ACTIVE",$[$.DISCONNECTED=3]="DISCONNECTED",$[$.UNRECOGNIZED=-1]="UNRECOGNIZED"})(_t=a.ParticipantInfo_State||(a.ParticipantInfo_State={}));function ht($){switch($){case 0:case"JOINING":return _t.JOINING;case 1:case"JOINED":return _t.JOINED;case 2:case"ACTIVE":return _t.ACTIVE;case 3:case"DISCONNECTED":return _t.DISCONNECTED;case-1:case"UNRECOGNIZED":default:return _t.UNRECOGNIZED}}a.participantInfo_StateFromJSON=ht;function _e($){switch($){case _t.JOINING:return"JOINING";case _t.JOINED:return"JOINED";case _t.ACTIVE:return"ACTIVE";case _t.DISCONNECTED:return"DISCONNECTED";default:return"UNKNOWN"}}a.participantInfo_StateToJSON=_e;var ot;(function($){$[$.RELIABLE=0]="RELIABLE",$[$.LOSSY=1]="LOSSY",$[$.UNRECOGNIZED=-1]="UNRECOGNIZED"})(ot=a.DataPacket_Kind||(a.DataPacket_Kind={}));function lt($){switch($){case 0:case"RELIABLE":return ot.RELIABLE;case 1:case"LOSSY":return ot.LOSSY;case-1:case"UNRECOGNIZED":default:return ot.UNRECOGNIZED}}a.dataPacket_KindFromJSON=lt;function Ot($){switch($){case ot.RELIABLE:return"RELIABLE";case ot.LOSSY:return"LOSSY";default:return"UNKNOWN"}}a.dataPacket_KindToJSON=Ot;const It={sid:"",name:"",emptyTimeout:0,maxParticipants:0,creationTime:0,turnPassword:"",metadata:"",numParticipants:0,activeRecording:!1};a.Room={encode($,rt=c.default.Writer.create()){$.sid!==""&&rt.uint32(10).string($.sid),$.name!==""&&rt.uint32(18).string($.name),$.emptyTimeout!==0&&rt.uint32(24).uint32($.emptyTimeout),$.maxParticipants!==0&&rt.uint32(32).uint32($.maxParticipants),$.creationTime!==0&&rt.uint32(40).int64($.creationTime),$.turnPassword!==""&&rt.uint32(50).string($.turnPassword);for(const mt of $.enabledCodecs)a.Codec.encode(mt,rt.uint32(58).fork()).ldelim();return $.metadata!==""&&rt.uint32(66).string($.metadata),$.numParticipants!==0&&rt.uint32(72).uint32($.numParticipants),$.activeRecording===!0&&rt.uint32(80).bool($.activeRecording),rt},decode($,rt){const mt=$ instanceof c.default.Reader?$:new c.default.Reader($);let Vt=rt===void 0?mt.len:mt.pos+rt;const at=Object.assign({},It);for(at.enabledCodecs=[];mt.pos<Vt;){const yt=mt.uint32();switch(yt>>>3){case 1:at.sid=mt.string();break;case 2:at.name=mt.string();break;case 3:at.emptyTimeout=mt.uint32();break;case 4:at.maxParticipants=mt.uint32();break;case 5:at.creationTime=Yt(mt.int64());break;case 6:at.turnPassword=mt.string();break;case 7:at.enabledCodecs.push(a.Codec.decode(mt,mt.uint32()));break;case 8:at.metadata=mt.string();break;case 9:at.numParticipants=mt.uint32();break;case 10:at.activeRecording=mt.bool();break;default:mt.skipType(yt&7);break}}return at},fromJSON($){const rt=Object.assign({},It);if(rt.enabledCodecs=[],$.sid!==void 0&&$.sid!==null?rt.sid=String($.sid):rt.sid="",$.name!==void 0&&$.name!==null?rt.name=String($.name):rt.name="",$.emptyTimeout!==void 0&&$.emptyTimeout!==null?rt.emptyTimeout=Number($.emptyTimeout):rt.emptyTimeout=0,$.maxParticipants!==void 0&&$.maxParticipants!==null?rt.maxParticipants=Number($.maxParticipants):rt.maxParticipants=0,$.creationTime!==void 0&&$.creationTime!==null?rt.creationTime=Number($.creationTime):rt.creationTime=0,$.turnPassword!==void 0&&$.turnPassword!==null?rt.turnPassword=String($.turnPassword):rt.turnPassword="",$.enabledCodecs!==void 0&&$.enabledCodecs!==null)for(const mt of $.enabledCodecs)rt.enabledCodecs.push(a.Codec.fromJSON(mt));return $.metadata!==void 0&&$.metadata!==null?rt.metadata=String($.metadata):rt.metadata="",$.numParticipants!==void 0&&$.numParticipants!==null?rt.numParticipants=Number($.numParticipants):rt.numParticipants=0,$.activeRecording!==void 0&&$.activeRecording!==null?rt.activeRecording=Boolean($.activeRecording):rt.activeRecording=!1,rt},toJSON($){const rt={};return $.sid!==void 0&&(rt.sid=$.sid),$.name!==void 0&&(rt.name=$.name),$.emptyTimeout!==void 0&&(rt.emptyTimeout=$.emptyTimeout),$.maxParticipants!==void 0&&(rt.maxParticipants=$.maxParticipants),$.creationTime!==void 0&&(rt.creationTime=$.creationTime),$.turnPassword!==void 0&&(rt.turnPassword=$.turnPassword),$.enabledCodecs?rt.enabledCodecs=$.enabledCodecs.map(mt=>mt?a.Codec.toJSON(mt):void 0):rt.enabledCodecs=[],$.metadata!==void 0&&(rt.metadata=$.metadata),$.numParticipants!==void 0&&(rt.numParticipants=$.numParticipants),$.activeRecording!==void 0&&(rt.activeRecording=$.activeRecording),rt},fromPartial($){const rt=Object.assign({},It);if(rt.enabledCodecs=[],$.sid!==void 0&&$.sid!==null?rt.sid=$.sid:rt.sid="",$.name!==void 0&&$.name!==null?rt.name=$.name:rt.name="",$.emptyTimeout!==void 0&&$.emptyTimeout!==null?rt.emptyTimeout=$.emptyTimeout:rt.emptyTimeout=0,$.maxParticipants!==void 0&&$.maxParticipants!==null?rt.maxParticipants=$.maxParticipants:rt.maxParticipants=0,$.creationTime!==void 0&&$.creationTime!==null?rt.creationTime=$.creationTime:rt.creationTime=0,$.turnPassword!==void 0&&$.turnPassword!==null?rt.turnPassword=$.turnPassword:rt.turnPassword="",$.enabledCodecs!==void 0&&$.enabledCodecs!==null)for(const mt of $.enabledCodecs)rt.enabledCodecs.push(a.Codec.fromPartial(mt));return $.metadata!==void 0&&$.metadata!==null?rt.metadata=$.metadata:rt.metadata="",$.numParticipants!==void 0&&$.numParticipants!==null?rt.numParticipants=$.numParticipants:rt.numParticipants=0,$.activeRecording!==void 0&&$.activeRecording!==null?rt.activeRecording=$.activeRecording:rt.activeRecording=!1,rt}};const Pt={mime:"",fmtpLine:""};a.Codec={encode($,rt=c.default.Writer.create()){return $.mime!==""&&rt.uint32(10).string($.mime),$.fmtpLine!==""&&rt.uint32(18).string($.fmtpLine),rt},decode($,rt){const mt=$ instanceof c.default.Reader?$:new c.default.Reader($);let Vt=rt===void 0?mt.len:mt.pos+rt;const at=Object.assign({},Pt);for(;mt.pos<Vt;){const yt=mt.uint32();switch(yt>>>3){case 1:at.mime=mt.string();break;case 2:at.fmtpLine=mt.string();break;default:mt.skipType(yt&7);break}}return at},fromJSON($){const rt=Object.assign({},Pt);return $.mime!==void 0&&$.mime!==null?rt.mime=String($.mime):rt.mime="",$.fmtpLine!==void 0&&$.fmtpLine!==null?rt.fmtpLine=String($.fmtpLine):rt.fmtpLine="",rt},toJSON($){const rt={};return $.mime!==void 0&&(rt.mime=$.mime),$.fmtpLine!==void 0&&(rt.fmtpLine=$.fmtpLine),rt},fromPartial($){const rt=Object.assign({},Pt);return $.mime!==void 0&&$.mime!==null?rt.mime=$.mime:rt.mime="",$.fmtpLine!==void 0&&$.fmtpLine!==null?rt.fmtpLine=$.fmtpLine:rt.fmtpLine="",rt}};const $t={sid:"",identity:"",state:0,metadata:"",joinedAt:0,hidden:!1,recorder:!1,name:""};a.ParticipantInfo={encode($,rt=c.default.Writer.create()){$.sid!==""&&rt.uint32(10).string($.sid),$.identity!==""&&rt.uint32(18).string($.identity),$.state!==0&&rt.uint32(24).int32($.state);for(const mt of $.tracks)a.TrackInfo.encode(mt,rt.uint32(34).fork()).ldelim();return $.metadata!==""&&rt.uint32(42).string($.metadata),$.joinedAt!==0&&rt.uint32(48).int64($.joinedAt),$.hidden===!0&&rt.uint32(56).bool($.hidden),$.recorder===!0&&rt.uint32(64).bool($.recorder),$.name!==""&&rt.uint32(74).string($.name),rt},decode($,rt){const mt=$ instanceof c.default.Reader?$:new c.default.Reader($);let Vt=rt===void 0?mt.len:mt.pos+rt;const at=Object.assign({},$t);for(at.tracks=[];mt.pos<Vt;){const yt=mt.uint32();switch(yt>>>3){case 1:at.sid=mt.string();break;case 2:at.identity=mt.string();break;case 3:at.state=mt.int32();break;case 4:at.tracks.push(a.TrackInfo.decode(mt,mt.uint32()));break;case 5:at.metadata=mt.string();break;case 6:at.joinedAt=Yt(mt.int64());break;case 7:at.hidden=mt.bool();break;case 8:at.recorder=mt.bool();break;case 9:at.name=mt.string();break;default:mt.skipType(yt&7);break}}return at},fromJSON($){const rt=Object.assign({},$t);if(rt.tracks=[],$.sid!==void 0&&$.sid!==null?rt.sid=String($.sid):rt.sid="",$.identity!==void 0&&$.identity!==null?rt.identity=String($.identity):rt.identity="",$.state!==void 0&&$.state!==null?rt.state=ht($.state):rt.state=0,$.tracks!==void 0&&$.tracks!==null)for(const mt of $.tracks)rt.tracks.push(a.TrackInfo.fromJSON(mt));return $.metadata!==void 0&&$.metadata!==null?rt.metadata=String($.metadata):rt.metadata="",$.joinedAt!==void 0&&$.joinedAt!==null?rt.joinedAt=Number($.joinedAt):rt.joinedAt=0,$.hidden!==void 0&&$.hidden!==null?rt.hidden=Boolean($.hidden):rt.hidden=!1,$.recorder!==void 0&&$.recorder!==null?rt.recorder=Boolean($.recorder):rt.recorder=!1,$.name!==void 0&&$.name!==null?rt.name=String($.name):rt.name="",rt},toJSON($){const rt={};return $.sid!==void 0&&(rt.sid=$.sid),$.identity!==void 0&&(rt.identity=$.identity),$.state!==void 0&&(rt.state=_e($.state)),$.tracks?rt.tracks=$.tracks.map(mt=>mt?a.TrackInfo.toJSON(mt):void 0):rt.tracks=[],$.metadata!==void 0&&(rt.metadata=$.metadata),$.joinedAt!==void 0&&(rt.joinedAt=$.joinedAt),$.hidden!==void 0&&(rt.hidden=$.hidden),$.recorder!==void 0&&(rt.recorder=$.recorder),$.name!==void 0&&(rt.name=$.name),rt},fromPartial($){const rt=Object.assign({},$t);if(rt.tracks=[],$.sid!==void 0&&$.sid!==null?rt.sid=$.sid:rt.sid="",$.identity!==void 0&&$.identity!==null?rt.identity=$.identity:rt.identity="",$.state!==void 0&&$.state!==null?rt.state=$.state:rt.state=0,$.tracks!==void 0&&$.tracks!==null)for(const mt of $.tracks)rt.tracks.push(a.TrackInfo.fromPartial(mt));return $.metadata!==void 0&&$.metadata!==null?rt.metadata=$.metadata:rt.metadata="",$.joinedAt!==void 0&&$.joinedAt!==null?rt.joinedAt=$.joinedAt:rt.joinedAt=0,$.hidden!==void 0&&$.hidden!==null?rt.hidden=$.hidden:rt.hidden=!1,$.recorder!==void 0&&$.recorder!==null?rt.recorder=$.recorder:rt.recorder=!1,$.name!==void 0&&$.name!==null?rt.name=$.name:rt.name="",rt}};const bt={sid:"",type:0,name:"",muted:!1,width:0,height:0,simulcast:!1,disableDtx:!1,source:0,mimeType:""};a.TrackInfo={encode($,rt=c.default.Writer.create()){$.sid!==""&&rt.uint32(10).string($.sid),$.type!==0&&rt.uint32(16).int32($.type),$.name!==""&&rt.uint32(26).string($.name),$.muted===!0&&rt.uint32(32).bool($.muted),$.width!==0&&rt.uint32(40).uint32($.width),$.height!==0&&rt.uint32(48).uint32($.height),$.simulcast===!0&&rt.uint32(56).bool($.simulcast),$.disableDtx===!0&&rt.uint32(64).bool($.disableDtx),$.source!==0&&rt.uint32(72).int32($.source);for(const mt of $.layers)a.VideoLayer.encode(mt,rt.uint32(82).fork()).ldelim();return $.mimeType!==""&&rt.uint32(90).string($.mimeType),rt},decode($,rt){const mt=$ instanceof c.default.Reader?$:new c.default.Reader($);let Vt=rt===void 0?mt.len:mt.pos+rt;const at=Object.assign({},bt);for(at.layers=[];mt.pos<Vt;){const yt=mt.uint32();switch(yt>>>3){case 1:at.sid=mt.string();break;case 2:at.type=mt.int32();break;case 3:at.name=mt.string();break;case 4:at.muted=mt.bool();break;case 5:at.width=mt.uint32();break;case 6:at.height=mt.uint32();break;case 7:at.simulcast=mt.bool();break;case 8:at.disableDtx=mt.bool();break;case 9:at.source=mt.int32();break;case 10:at.layers.push(a.VideoLayer.decode(mt,mt.uint32()));break;case 11:at.mimeType=mt.string();break;default:mt.skipType(yt&7);break}}return at},fromJSON($){const rt=Object.assign({},bt);if(rt.layers=[],$.sid!==void 0&&$.sid!==null?rt.sid=String($.sid):rt.sid="",$.type!==void 0&&$.type!==null?rt.type=g($.type):rt.type=0,$.name!==void 0&&$.name!==null?rt.name=String($.name):rt.name="",$.muted!==void 0&&$.muted!==null?rt.muted=Boolean($.muted):rt.muted=!1,$.width!==void 0&&$.width!==null?rt.width=Number($.width):rt.width=0,$.height!==void 0&&$.height!==null?rt.height=Number($.height):rt.height=0,$.simulcast!==void 0&&$.simulcast!==null?rt.simulcast=Boolean($.simulcast):rt.simulcast=!1,$.disableDtx!==void 0&&$.disableDtx!==null?rt.disableDtx=Boolean($.disableDtx):rt.disableDtx=!1,$.source!==void 0&&$.source!==null?rt.source=et($.source):rt.source=0,$.layers!==void 0&&$.layers!==null)for(const mt of $.layers)rt.layers.push(a.VideoLayer.fromJSON(mt));return $.mimeType!==void 0&&$.mimeType!==null?rt.mimeType=String($.mimeType):rt.mimeType="",rt},toJSON($){const rt={};return $.sid!==void 0&&(rt.sid=$.sid),$.type!==void 0&&(rt.type=b($.type)),$.name!==void 0&&(rt.name=$.name),$.muted!==void 0&&(rt.muted=$.muted),$.width!==void 0&&(rt.width=$.width),$.height!==void 0&&(rt.height=$.height),$.simulcast!==void 0&&(rt.simulcast=$.simulcast),$.disableDtx!==void 0&&(rt.disableDtx=$.disableDtx),$.source!==void 0&&(rt.source=nt($.source)),$.layers?rt.layers=$.layers.map(mt=>mt?a.VideoLayer.toJSON(mt):void 0):rt.layers=[],$.mimeType!==void 0&&(rt.mimeType=$.mimeType),rt},fromPartial($){const rt=Object.assign({},bt);if(rt.layers=[],$.sid!==void 0&&$.sid!==null?rt.sid=$.sid:rt.sid="",$.type!==void 0&&$.type!==null?rt.type=$.type:rt.type=0,$.name!==void 0&&$.name!==null?rt.name=$.name:rt.name="",$.muted!==void 0&&$.muted!==null?rt.muted=$.muted:rt.muted=!1,$.width!==void 0&&$.width!==null?rt.width=$.width:rt.width=0,$.height!==void 0&&$.height!==null?rt.height=$.height:rt.height=0,$.simulcast!==void 0&&$.simulcast!==null?rt.simulcast=$.simulcast:rt.simulcast=!1,$.disableDtx!==void 0&&$.disableDtx!==null?rt.disableDtx=$.disableDtx:rt.disableDtx=!1,$.source!==void 0&&$.source!==null?rt.source=$.source:rt.source=0,$.layers!==void 0&&$.layers!==null)for(const mt of $.layers)rt.layers.push(a.VideoLayer.fromPartial(mt));return $.mimeType!==void 0&&$.mimeType!==null?rt.mimeType=$.mimeType:rt.mimeType="",rt}};const Rt={quality:0,width:0,height:0,bitrate:0};a.VideoLayer={encode($,rt=c.default.Writer.create()){return $.quality!==0&&rt.uint32(8).int32($.quality),$.width!==0&&rt.uint32(16).uint32($.width),$.height!==0&&rt.uint32(24).uint32($.height),$.bitrate!==0&&rt.uint32(32).uint32($.bitrate),rt},decode($,rt){const mt=$ instanceof c.default.Reader?$:new c.default.Reader($);let Vt=rt===void 0?mt.len:mt.pos+rt;const at=Object.assign({},Rt);for(;mt.pos<Vt;){const yt=mt.uint32();switch(yt>>>3){case 1:at.quality=mt.int32();break;case 2:at.width=mt.uint32();break;case 3:at.height=mt.uint32();break;case 4:at.bitrate=mt.uint32();break;default:mt.skipType(yt&7);break}}return at},fromJSON($){const rt=Object.assign({},Rt);return $.quality!==void 0&&$.quality!==null?rt.quality=ct($.quality):rt.quality=0,$.width!==void 0&&$.width!==null?rt.width=Number($.width):rt.width=0,$.height!==void 0&&$.height!==null?rt.height=Number($.height):rt.height=0,$.bitrate!==void 0&&$.bitrate!==null?rt.bitrate=Number($.bitrate):rt.bitrate=0,rt},toJSON($){const rt={};return $.quality!==void 0&&(rt.quality=st($.quality)),$.width!==void 0&&(rt.width=$.width),$.height!==void 0&&(rt.height=$.height),$.bitrate!==void 0&&(rt.bitrate=$.bitrate),rt},fromPartial($){const rt=Object.assign({},Rt);return $.quality!==void 0&&$.quality!==null?rt.quality=$.quality:rt.quality=0,$.width!==void 0&&$.width!==null?rt.width=$.width:rt.width=0,$.height!==void 0&&$.height!==null?rt.height=$.height:rt.height=0,$.bitrate!==void 0&&$.bitrate!==null?rt.bitrate=$.bitrate:rt.bitrate=0,rt}};const Ct={kind:0};a.DataPacket={encode($,rt=c.default.Writer.create()){return $.kind!==0&&rt.uint32(8).int32($.kind),$.user!==void 0&&a.UserPacket.encode($.user,rt.uint32(18).fork()).ldelim(),$.speaker!==void 0&&a.ActiveSpeakerUpdate.encode($.speaker,rt.uint32(26).fork()).ldelim(),rt},decode($,rt){const mt=$ instanceof c.default.Reader?$:new c.default.Reader($);let Vt=rt===void 0?mt.len:mt.pos+rt;const at=Object.assign({},Ct);for(;mt.pos<Vt;){const yt=mt.uint32();switch(yt>>>3){case 1:at.kind=mt.int32();break;case 2:at.user=a.UserPacket.decode(mt,mt.uint32());break;case 3:at.speaker=a.ActiveSpeakerUpdate.decode(mt,mt.uint32());break;default:mt.skipType(yt&7);break}}return at},fromJSON($){const rt=Object.assign({},Ct);return $.kind!==void 0&&$.kind!==null?rt.kind=lt($.kind):rt.kind=0,$.user!==void 0&&$.user!==null?rt.user=a.UserPacket.fromJSON($.user):rt.user=void 0,$.speaker!==void 0&&$.speaker!==null?rt.speaker=a.ActiveSpeakerUpdate.fromJSON($.speaker):rt.speaker=void 0,rt},toJSON($){const rt={};return $.kind!==void 0&&(rt.kind=Ot($.kind)),$.user!==void 0&&(rt.user=$.user?a.UserPacket.toJSON($.user):void 0),$.speaker!==void 0&&(rt.speaker=$.speaker?a.ActiveSpeakerUpdate.toJSON($.speaker):void 0),rt},fromPartial($){const rt=Object.assign({},Ct);return $.kind!==void 0&&$.kind!==null?rt.kind=$.kind:rt.kind=0,$.user!==void 0&&$.user!==null?rt.user=a.UserPacket.fromPartial($.user):rt.user=void 0,$.speaker!==void 0&&$.speaker!==null?rt.speaker=a.ActiveSpeakerUpdate.fromPartial($.speaker):rt.speaker=void 0,rt}};const vt={};a.ActiveSpeakerUpdate={encode($,rt=c.default.Writer.create()){for(const mt of $.speakers)a.SpeakerInfo.encode(mt,rt.uint32(10).fork()).ldelim();return rt},decode($,rt){const mt=$ instanceof c.default.Reader?$:new c.default.Reader($);let Vt=rt===void 0?mt.len:mt.pos+rt;const at=Object.assign({},vt);for(at.speakers=[];mt.pos<Vt;){const yt=mt.uint32();switch(yt>>>3){case 1:at.speakers.push(a.SpeakerInfo.decode(mt,mt.uint32()));break;default:mt.skipType(yt&7);break}}return at},fromJSON($){const rt=Object.assign({},vt);if(rt.speakers=[],$.speakers!==void 0&&$.speakers!==null)for(const mt of $.speakers)rt.speakers.push(a.SpeakerInfo.fromJSON(mt));return rt},toJSON($){const rt={};return $.speakers?rt.speakers=$.speakers.map(mt=>mt?a.SpeakerInfo.toJSON(mt):void 0):rt.speakers=[],rt},fromPartial($){const rt=Object.assign({},vt);if(rt.speakers=[],$.speakers!==void 0&&$.speakers!==null)for(const mt of $.speakers)rt.speakers.push(a.SpeakerInfo.fromPartial(mt));return rt}};const Tt={sid:"",level:0,active:!1};a.SpeakerInfo={encode($,rt=c.default.Writer.create()){return $.sid!==""&&rt.uint32(10).string($.sid),$.level!==0&&rt.uint32(21).float($.level),$.active===!0&&rt.uint32(24).bool($.active),rt},decode($,rt){const mt=$ instanceof c.default.Reader?$:new c.default.Reader($);let Vt=rt===void 0?mt.len:mt.pos+rt;const at=Object.assign({},Tt);for(;mt.pos<Vt;){const yt=mt.uint32();switch(yt>>>3){case 1:at.sid=mt.string();break;case 2:at.level=mt.float();break;case 3:at.active=mt.bool();break;default:mt.skipType(yt&7);break}}return at},fromJSON($){const rt=Object.assign({},Tt);return $.sid!==void 0&&$.sid!==null?rt.sid=String($.sid):rt.sid="",$.level!==void 0&&$.level!==null?rt.level=Number($.level):rt.level=0,$.active!==void 0&&$.active!==null?rt.active=Boolean($.active):rt.active=!1,rt},toJSON($){const rt={};return $.sid!==void 0&&(rt.sid=$.sid),$.level!==void 0&&(rt.level=$.level),$.active!==void 0&&(rt.active=$.active),rt},fromPartial($){const rt=Object.assign({},Tt);return $.sid!==void 0&&$.sid!==null?rt.sid=$.sid:rt.sid="",$.level!==void 0&&$.level!==null?rt.level=$.level:rt.level=0,$.active!==void 0&&$.active!==null?rt.active=$.active:rt.active=!1,rt}};const wt={participantSid:"",destinationSids:""};a.UserPacket={encode($,rt=c.default.Writer.create()){$.participantSid!==""&&rt.uint32(10).string($.participantSid),$.payload.length!==0&&rt.uint32(18).bytes($.payload);for(const mt of $.destinationSids)rt.uint32(26).string(mt);return rt},decode($,rt){const mt=$ instanceof c.default.Reader?$:new c.default.Reader($);let Vt=rt===void 0?mt.len:mt.pos+rt;const at=Object.assign({},wt);for(at.destinationSids=[],at.payload=new Uint8Array;mt.pos<Vt;){const yt=mt.uint32();switch(yt>>>3){case 1:at.participantSid=mt.string();break;case 2:at.payload=mt.bytes();break;case 3:at.destinationSids.push(mt.string());break;default:mt.skipType(yt&7);break}}return at},fromJSON($){const rt=Object.assign({},wt);if(rt.destinationSids=[],rt.payload=new Uint8Array,$.participantSid!==void 0&&$.participantSid!==null?rt.participantSid=String($.participantSid):rt.participantSid="",$.payload!==void 0&&$.payload!==null&&(rt.payload=Ft($.payload)),$.destinationSids!==void 0&&$.destinationSids!==null)for(const mt of $.destinationSids)rt.destinationSids.push(String(mt));return rt},toJSON($){const rt={};return $.participantSid!==void 0&&(rt.participantSid=$.participantSid),$.payload!==void 0&&(rt.payload=Ht($.payload!==void 0?$.payload:new Uint8Array)),$.destinationSids?rt.destinationSids=$.destinationSids.map(mt=>mt):rt.destinationSids=[],rt},fromPartial($){const rt=Object.assign({},wt);if(rt.destinationSids=[],$.participantSid!==void 0&&$.participantSid!==null?rt.participantSid=$.participantSid:rt.participantSid="",$.payload!==void 0&&$.payload!==null?rt.payload=$.payload:rt.payload=new Uint8Array,$.destinationSids!==void 0&&$.destinationSids!==null)for(const mt of $.destinationSids)rt.destinationSids.push(mt);return rt}};const zt={participantSid:"",trackSids:""};a.ParticipantTracks={encode($,rt=c.default.Writer.create()){$.participantSid!==""&&rt.uint32(10).string($.participantSid);for(const mt of $.trackSids)rt.uint32(18).string(mt);return rt},decode($,rt){const mt=$ instanceof c.default.Reader?$:new c.default.Reader($);let Vt=rt===void 0?mt.len:mt.pos+rt;const at=Object.assign({},zt);for(at.trackSids=[];mt.pos<Vt;){const yt=mt.uint32();switch(yt>>>3){case 1:at.participantSid=mt.string();break;case 2:at.trackSids.push(mt.string());break;default:mt.skipType(yt&7);break}}return at},fromJSON($){const rt=Object.assign({},zt);if(rt.trackSids=[],$.participantSid!==void 0&&$.participantSid!==null?rt.participantSid=String($.participantSid):rt.participantSid="",$.trackSids!==void 0&&$.trackSids!==null)for(const mt of $.trackSids)rt.trackSids.push(String(mt));return rt},toJSON($){const rt={};return $.participantSid!==void 0&&(rt.participantSid=$.participantSid),$.trackSids?rt.trackSids=$.trackSids.map(mt=>mt):rt.trackSids=[],rt},fromPartial($){const rt=Object.assign({},zt);if(rt.trackSids=[],$.participantSid!==void 0&&$.participantSid!==null?rt.participantSid=$.participantSid:rt.participantSid="",$.trackSids!==void 0&&$.trackSids!==null)for(const mt of $.trackSids)rt.trackSids.push(mt);return rt}};var Mt=(()=>{if(typeof Mt!="undefined")return Mt;if(typeof self!="undefined")return self;if(typeof window!="undefined")return window;if(typeof commonjsGlobal!="undefined")return commonjsGlobal;throw"Unable to locate global object"})();const Nt=Mt.atob||($=>Mt.Buffer.from($,"base64").toString("binary"));function Ft($){const rt=Nt($),mt=new Uint8Array(rt.length);for(let Vt=0;Vt<rt.length;++Vt)mt[Vt]=rt.charCodeAt(Vt);return mt}const Wt=Mt.btoa||($=>Mt.Buffer.from($,"binary").toString("base64"));function Ht($){const rt=[];for(const mt of $)rt.push(String.fromCharCode(mt));return Wt(rt.join(""))}function Yt($){if($.gt(Number.MAX_SAFE_INTEGER))throw new Mt.Error("Value is larger than Number.MAX_SAFE_INTEGER");return $.toNumber()}c.default.util.Long!==d.default&&(c.default.util.Long=d.default,c.default.configure())})(livekit_models$1);var RoomServiceClient$1={},livekit_room={};(function(a){var s=commonjsGlobal&&commonjsGlobal.__importDefault||function(vt){return vt&&vt.__esModule?vt:{default:vt}};Object.defineProperty(a,"__esModule",{value:!0}),a.UpdateRoomMetadataRequest=a.SendDataResponse=a.SendDataRequest=a.UpdateSubscriptionsResponse=a.UpdateSubscriptionsRequest=a.UpdateParticipantRequest=a.ParticipantPermission=a.MuteRoomTrackResponse=a.MuteRoomTrackRequest=a.RemoveParticipantResponse=a.RoomParticipantIdentity=a.ListParticipantsResponse=a.ListParticipantsRequest=a.DeleteRoomResponse=a.DeleteRoomRequest=a.ListRoomsResponse=a.ListRoomsRequest=a.CreateRoomRequest=a.protobufPackage=void 0;const d=s(long),c=s(minimal$2),m=livekit_models$1;a.protobufPackage="livekit";const g={name:"",emptyTimeout:0,maxParticipants:0,nodeId:"",metadata:""};a.CreateRoomRequest={encode(vt,Tt=c.default.Writer.create()){return vt.name!==""&&Tt.uint32(10).string(vt.name),vt.emptyTimeout!==0&&Tt.uint32(16).uint32(vt.emptyTimeout),vt.maxParticipants!==0&&Tt.uint32(24).uint32(vt.maxParticipants),vt.nodeId!==""&&Tt.uint32(34).string(vt.nodeId),vt.metadata!==""&&Tt.uint32(42).string(vt.metadata),Tt},decode(vt,Tt){const wt=vt instanceof c.default.Reader?vt:new c.default.Reader(vt);let zt=Tt===void 0?wt.len:wt.pos+Tt;const Mt=Object.assign({},g);for(;wt.pos<zt;){const Nt=wt.uint32();switch(Nt>>>3){case 1:Mt.name=wt.string();break;case 2:Mt.emptyTimeout=wt.uint32();break;case 3:Mt.maxParticipants=wt.uint32();break;case 4:Mt.nodeId=wt.string();break;case 5:Mt.metadata=wt.string();break;default:wt.skipType(Nt&7);break}}return Mt},fromJSON(vt){const Tt=Object.assign({},g);return vt.name!==void 0&&vt.name!==null?Tt.name=String(vt.name):Tt.name="",vt.emptyTimeout!==void 0&&vt.emptyTimeout!==null?Tt.emptyTimeout=Number(vt.emptyTimeout):Tt.emptyTimeout=0,vt.maxParticipants!==void 0&&vt.maxParticipants!==null?Tt.maxParticipants=Number(vt.maxParticipants):Tt.maxParticipants=0,vt.nodeId!==void 0&&vt.nodeId!==null?Tt.nodeId=String(vt.nodeId):Tt.nodeId="",vt.metadata!==void 0&&vt.metadata!==null?Tt.metadata=String(vt.metadata):Tt.metadata="",Tt},toJSON(vt){const Tt={};return vt.name!==void 0&&(Tt.name=vt.name),vt.emptyTimeout!==void 0&&(Tt.emptyTimeout=vt.emptyTimeout),vt.maxParticipants!==void 0&&(Tt.maxParticipants=vt.maxParticipants),vt.nodeId!==void 0&&(Tt.nodeId=vt.nodeId),vt.metadata!==void 0&&(Tt.metadata=vt.metadata),Tt},fromPartial(vt){const Tt=Object.assign({},g);return vt.name!==void 0&&vt.name!==null?Tt.name=vt.name:Tt.name="",vt.emptyTimeout!==void 0&&vt.emptyTimeout!==null?Tt.emptyTimeout=vt.emptyTimeout:Tt.emptyTimeout=0,vt.maxParticipants!==void 0&&vt.maxParticipants!==null?Tt.maxParticipants=vt.maxParticipants:Tt.maxParticipants=0,vt.nodeId!==void 0&&vt.nodeId!==null?Tt.nodeId=vt.nodeId:Tt.nodeId="",vt.metadata!==void 0&&vt.metadata!==null?Tt.metadata=vt.metadata:Tt.metadata="",Tt}};const b={names:""};a.ListRoomsRequest={encode(vt,Tt=c.default.Writer.create()){for(const wt of vt.names)Tt.uint32(10).string(wt);return Tt},decode(vt,Tt){const wt=vt instanceof c.default.Reader?vt:new c.default.Reader(vt);let zt=Tt===void 0?wt.len:wt.pos+Tt;const Mt=Object.assign({},b);for(Mt.names=[];wt.pos<zt;){const Nt=wt.uint32();switch(Nt>>>3){case 1:Mt.names.push(wt.string());break;default:wt.skipType(Nt&7);break}}return Mt},fromJSON(vt){const Tt=Object.assign({},b);if(Tt.names=[],vt.names!==void 0&&vt.names!==null)for(const wt of vt.names)Tt.names.push(String(wt));return Tt},toJSON(vt){const Tt={};return vt.names?Tt.names=vt.names.map(wt=>wt):Tt.names=[],Tt},fromPartial(vt){const Tt=Object.assign({},b);if(Tt.names=[],vt.names!==void 0&&vt.names!==null)for(const wt of vt.names)Tt.names.push(wt);return Tt}};const k={};a.ListRoomsResponse={encode(vt,Tt=c.default.Writer.create()){for(const wt of vt.rooms)m.Room.encode(wt,Tt.uint32(10).fork()).ldelim();return Tt},decode(vt,Tt){const wt=vt instanceof c.default.Reader?vt:new c.default.Reader(vt);let zt=Tt===void 0?wt.len:wt.pos+Tt;const Mt=Object.assign({},k);for(Mt.rooms=[];wt.pos<zt;){const Nt=wt.uint32();switch(Nt>>>3){case 1:Mt.rooms.push(m.Room.decode(wt,wt.uint32()));break;default:wt.skipType(Nt&7);break}}return Mt},fromJSON(vt){const Tt=Object.assign({},k);if(Tt.rooms=[],vt.rooms!==void 0&&vt.rooms!==null)for(const wt of vt.rooms)Tt.rooms.push(m.Room.fromJSON(wt));return Tt},toJSON(vt){const Tt={};return vt.rooms?Tt.rooms=vt.rooms.map(wt=>wt?m.Room.toJSON(wt):void 0):Tt.rooms=[],Tt},fromPartial(vt){const Tt=Object.assign({},k);if(Tt.rooms=[],vt.rooms!==void 0&&vt.rooms!==null)for(const wt of vt.rooms)Tt.rooms.push(m.Room.fromPartial(wt));return Tt}};const et={room:""};a.DeleteRoomRequest={encode(vt,Tt=c.default.Writer.create()){return vt.room!==""&&Tt.uint32(10).string(vt.room),Tt},decode(vt,Tt){const wt=vt instanceof c.default.Reader?vt:new c.default.Reader(vt);let zt=Tt===void 0?wt.len:wt.pos+Tt;const Mt=Object.assign({},et);for(;wt.pos<zt;){const Nt=wt.uint32();switch(Nt>>>3){case 1:Mt.room=wt.string();break;default:wt.skipType(Nt&7);break}}return Mt},fromJSON(vt){const Tt=Object.assign({},et);return vt.room!==void 0&&vt.room!==null?Tt.room=String(vt.room):Tt.room="",Tt},toJSON(vt){const Tt={};return vt.room!==void 0&&(Tt.room=vt.room),Tt},fromPartial(vt){const Tt=Object.assign({},et);return vt.room!==void 0&&vt.room!==null?Tt.room=vt.room:Tt.room="",Tt}};const nt={};a.DeleteRoomResponse={encode(vt,Tt=c.default.Writer.create()){return Tt},decode(vt,Tt){const wt=vt instanceof c.default.Reader?vt:new c.default.Reader(vt);let zt=Tt===void 0?wt.len:wt.pos+Tt;const Mt=Object.assign({},nt);for(;wt.pos<zt;){const Nt=wt.uint32();switch(Nt>>>3){default:wt.skipType(Nt&7);break}}return Mt},fromJSON(vt){return Object.assign({},nt)},toJSON(vt){return{}},fromPartial(vt){return Object.assign({},nt)}};const it={room:""};a.ListParticipantsRequest={encode(vt,Tt=c.default.Writer.create()){return vt.room!==""&&Tt.uint32(10).string(vt.room),Tt},decode(vt,Tt){const wt=vt instanceof c.default.Reader?vt:new c.default.Reader(vt);let zt=Tt===void 0?wt.len:wt.pos+Tt;const Mt=Object.assign({},it);for(;wt.pos<zt;){const Nt=wt.uint32();switch(Nt>>>3){case 1:Mt.room=wt.string();break;default:wt.skipType(Nt&7);break}}return Mt},fromJSON(vt){const Tt=Object.assign({},it);return vt.room!==void 0&&vt.room!==null?Tt.room=String(vt.room):Tt.room="",Tt},toJSON(vt){const Tt={};return vt.room!==void 0&&(Tt.room=vt.room),Tt},fromPartial(vt){const Tt=Object.assign({},it);return vt.room!==void 0&&vt.room!==null?Tt.room=vt.room:Tt.room="",Tt}};const ct={};a.ListParticipantsResponse={encode(vt,Tt=c.default.Writer.create()){for(const wt of vt.participants)m.ParticipantInfo.encode(wt,Tt.uint32(10).fork()).ldelim();return Tt},decode(vt,Tt){const wt=vt instanceof c.default.Reader?vt:new c.default.Reader(vt);let zt=Tt===void 0?wt.len:wt.pos+Tt;const Mt=Object.assign({},ct);for(Mt.participants=[];wt.pos<zt;){const Nt=wt.uint32();switch(Nt>>>3){case 1:Mt.participants.push(m.ParticipantInfo.decode(wt,wt.uint32()));break;default:wt.skipType(Nt&7);break}}return Mt},fromJSON(vt){const Tt=Object.assign({},ct);if(Tt.participants=[],vt.participants!==void 0&&vt.participants!==null)for(const wt of vt.participants)Tt.participants.push(m.ParticipantInfo.fromJSON(wt));return Tt},toJSON(vt){const Tt={};return vt.participants?Tt.participants=vt.participants.map(wt=>wt?m.ParticipantInfo.toJSON(wt):void 0):Tt.participants=[],Tt},fromPartial(vt){const Tt=Object.assign({},ct);if(Tt.participants=[],vt.participants!==void 0&&vt.participants!==null)for(const wt of vt.participants)Tt.participants.push(m.ParticipantInfo.fromPartial(wt));return Tt}};const st={room:"",identity:""};a.RoomParticipantIdentity={encode(vt,Tt=c.default.Writer.create()){return vt.room!==""&&Tt.uint32(10).string(vt.room),vt.identity!==""&&Tt.uint32(18).string(vt.identity),Tt},decode(vt,Tt){const wt=vt instanceof c.default.Reader?vt:new c.default.Reader(vt);let zt=Tt===void 0?wt.len:wt.pos+Tt;const Mt=Object.assign({},st);for(;wt.pos<zt;){const Nt=wt.uint32();switch(Nt>>>3){case 1:Mt.room=wt.string();break;case 2:Mt.identity=wt.string();break;default:wt.skipType(Nt&7);break}}return Mt},fromJSON(vt){const Tt=Object.assign({},st);return vt.room!==void 0&&vt.room!==null?Tt.room=String(vt.room):Tt.room="",vt.identity!==void 0&&vt.identity!==null?Tt.identity=String(vt.identity):Tt.identity="",Tt},toJSON(vt){const Tt={};return vt.room!==void 0&&(Tt.room=vt.room),vt.identity!==void 0&&(Tt.identity=vt.identity),Tt},fromPartial(vt){const Tt=Object.assign({},st);return vt.room!==void 0&&vt.room!==null?Tt.room=vt.room:Tt.room="",vt.identity!==void 0&&vt.identity!==null?Tt.identity=vt.identity:Tt.identity="",Tt}};const ut={};a.RemoveParticipantResponse={encode(vt,Tt=c.default.Writer.create()){return Tt},decode(vt,Tt){const wt=vt instanceof c.default.Reader?vt:new c.default.Reader(vt);let zt=Tt===void 0?wt.len:wt.pos+Tt;const Mt=Object.assign({},ut);for(;wt.pos<zt;){const Nt=wt.uint32();switch(Nt>>>3){default:wt.skipType(Nt&7);break}}return Mt},fromJSON(vt){return Object.assign({},ut)},toJSON(vt){return{}},fromPartial(vt){return Object.assign({},ut)}};const pt={room:"",identity:"",trackSid:"",muted:!1};a.MuteRoomTrackRequest={encode(vt,Tt=c.default.Writer.create()){return vt.room!==""&&Tt.uint32(10).string(vt.room),vt.identity!==""&&Tt.uint32(18).string(vt.identity),vt.trackSid!==""&&Tt.uint32(26).string(vt.trackSid),vt.muted===!0&&Tt.uint32(32).bool(vt.muted),Tt},decode(vt,Tt){const wt=vt instanceof c.default.Reader?vt:new c.default.Reader(vt);let zt=Tt===void 0?wt.len:wt.pos+Tt;const Mt=Object.assign({},pt);for(;wt.pos<zt;){const Nt=wt.uint32();switch(Nt>>>3){case 1:Mt.room=wt.string();break;case 2:Mt.identity=wt.string();break;case 3:Mt.trackSid=wt.string();break;case 4:Mt.muted=wt.bool();break;default:wt.skipType(Nt&7);break}}return Mt},fromJSON(vt){const Tt=Object.assign({},pt);return vt.room!==void 0&&vt.room!==null?Tt.room=String(vt.room):Tt.room="",vt.identity!==void 0&&vt.identity!==null?Tt.identity=String(vt.identity):Tt.identity="",vt.trackSid!==void 0&&vt.trackSid!==null?Tt.trackSid=String(vt.trackSid):Tt.trackSid="",vt.muted!==void 0&&vt.muted!==null?Tt.muted=Boolean(vt.muted):Tt.muted=!1,Tt},toJSON(vt){const Tt={};return vt.room!==void 0&&(Tt.room=vt.room),vt.identity!==void 0&&(Tt.identity=vt.identity),vt.trackSid!==void 0&&(Tt.trackSid=vt.trackSid),vt.muted!==void 0&&(Tt.muted=vt.muted),Tt},fromPartial(vt){const Tt=Object.assign({},pt);return vt.room!==void 0&&vt.room!==null?Tt.room=vt.room:Tt.room="",vt.identity!==void 0&&vt.identity!==null?Tt.identity=vt.identity:Tt.identity="",vt.trackSid!==void 0&&vt.trackSid!==null?Tt.trackSid=vt.trackSid:Tt.trackSid="",vt.muted!==void 0&&vt.muted!==null?Tt.muted=vt.muted:Tt.muted=!1,Tt}};const St={};a.MuteRoomTrackResponse={encode(vt,Tt=c.default.Writer.create()){return vt.track!==void 0&&m.TrackInfo.encode(vt.track,Tt.uint32(10).fork()).ldelim(),Tt},decode(vt,Tt){const wt=vt instanceof c.default.Reader?vt:new c.default.Reader(vt);let zt=Tt===void 0?wt.len:wt.pos+Tt;const Mt=Object.assign({},St);for(;wt.pos<zt;){const Nt=wt.uint32();switch(Nt>>>3){case 1:Mt.track=m.TrackInfo.decode(wt,wt.uint32());break;default:wt.skipType(Nt&7);break}}return Mt},fromJSON(vt){const Tt=Object.assign({},St);return vt.track!==void 0&&vt.track!==null?Tt.track=m.TrackInfo.fromJSON(vt.track):Tt.track=void 0,Tt},toJSON(vt){const Tt={};return vt.track!==void 0&&(Tt.track=vt.track?m.TrackInfo.toJSON(vt.track):void 0),Tt},fromPartial(vt){const Tt=Object.assign({},St);return vt.track!==void 0&&vt.track!==null?Tt.track=m.TrackInfo.fromPartial(vt.track):Tt.track=void 0,Tt}};const _t={canSubscribe:!1,canPublish:!1,canPublishData:!1};a.ParticipantPermission={encode(vt,Tt=c.default.Writer.create()){return vt.canSubscribe===!0&&Tt.uint32(8).bool(vt.canSubscribe),vt.canPublish===!0&&Tt.uint32(16).bool(vt.canPublish),vt.canPublishData===!0&&Tt.uint32(24).bool(vt.canPublishData),Tt},decode(vt,Tt){const wt=vt instanceof c.default.Reader?vt:new c.default.Reader(vt);let zt=Tt===void 0?wt.len:wt.pos+Tt;const Mt=Object.assign({},_t);for(;wt.pos<zt;){const Nt=wt.uint32();switch(Nt>>>3){case 1:Mt.canSubscribe=wt.bool();break;case 2:Mt.canPublish=wt.bool();break;case 3:Mt.canPublishData=wt.bool();break;default:wt.skipType(Nt&7);break}}return Mt},fromJSON(vt){const Tt=Object.assign({},_t);return vt.canSubscribe!==void 0&&vt.canSubscribe!==null?Tt.canSubscribe=Boolean(vt.canSubscribe):Tt.canSubscribe=!1,vt.canPublish!==void 0&&vt.canPublish!==null?Tt.canPublish=Boolean(vt.canPublish):Tt.canPublish=!1,vt.canPublishData!==void 0&&vt.canPublishData!==null?Tt.canPublishData=Boolean(vt.canPublishData):Tt.canPublishData=!1,Tt},toJSON(vt){const Tt={};return vt.canSubscribe!==void 0&&(Tt.canSubscribe=vt.canSubscribe),vt.canPublish!==void 0&&(Tt.canPublish=vt.canPublish),vt.canPublishData!==void 0&&(Tt.canPublishData=vt.canPublishData),Tt},fromPartial(vt){const Tt=Object.assign({},_t);return vt.canSubscribe!==void 0&&vt.canSubscribe!==null?Tt.canSubscribe=vt.canSubscribe:Tt.canSubscribe=!1,vt.canPublish!==void 0&&vt.canPublish!==null?Tt.canPublish=vt.canPublish:Tt.canPublish=!1,vt.canPublishData!==void 0&&vt.canPublishData!==null?Tt.canPublishData=vt.canPublishData:Tt.canPublishData=!1,Tt}};const ht={room:"",identity:"",metadata:""};a.UpdateParticipantRequest={encode(vt,Tt=c.default.Writer.create()){return vt.room!==""&&Tt.uint32(10).string(vt.room),vt.identity!==""&&Tt.uint32(18).string(vt.identity),vt.metadata!==""&&Tt.uint32(26).string(vt.metadata),vt.permission!==void 0&&a.ParticipantPermission.encode(vt.permission,Tt.uint32(34).fork()).ldelim(),Tt},decode(vt,Tt){const wt=vt instanceof c.default.Reader?vt:new c.default.Reader(vt);let zt=Tt===void 0?wt.len:wt.pos+Tt;const Mt=Object.assign({},ht);for(;wt.pos<zt;){const Nt=wt.uint32();switch(Nt>>>3){case 1:Mt.room=wt.string();break;case 2:Mt.identity=wt.string();break;case 3:Mt.metadata=wt.string();break;case 4:Mt.permission=a.ParticipantPermission.decode(wt,wt.uint32());break;default:wt.skipType(Nt&7);break}}return Mt},fromJSON(vt){const Tt=Object.assign({},ht);return vt.room!==void 0&&vt.room!==null?Tt.room=String(vt.room):Tt.room="",vt.identity!==void 0&&vt.identity!==null?Tt.identity=String(vt.identity):Tt.identity="",vt.metadata!==void 0&&vt.metadata!==null?Tt.metadata=String(vt.metadata):Tt.metadata="",vt.permission!==void 0&&vt.permission!==null?Tt.permission=a.ParticipantPermission.fromJSON(vt.permission):Tt.permission=void 0,Tt},toJSON(vt){const Tt={};return vt.room!==void 0&&(Tt.room=vt.room),vt.identity!==void 0&&(Tt.identity=vt.identity),vt.metadata!==void 0&&(Tt.metadata=vt.metadata),vt.permission!==void 0&&(Tt.permission=vt.permission?a.ParticipantPermission.toJSON(vt.permission):void 0),Tt},fromPartial(vt){const Tt=Object.assign({},ht);return vt.room!==void 0&&vt.room!==null?Tt.room=vt.room:Tt.room="",vt.identity!==void 0&&vt.identity!==null?Tt.identity=vt.identity:Tt.identity="",vt.metadata!==void 0&&vt.metadata!==null?Tt.metadata=vt.metadata:Tt.metadata="",vt.permission!==void 0&&vt.permission!==null?Tt.permission=a.ParticipantPermission.fromPartial(vt.permission):Tt.permission=void 0,Tt}};const _e={room:"",identity:"",trackSids:"",subscribe:!1};a.UpdateSubscriptionsRequest={encode(vt,Tt=c.default.Writer.create()){vt.room!==""&&Tt.uint32(10).string(vt.room),vt.identity!==""&&Tt.uint32(18).string(vt.identity);for(const wt of vt.trackSids)Tt.uint32(26).string(wt);vt.subscribe===!0&&Tt.uint32(32).bool(vt.subscribe);for(const wt of vt.participantTracks)m.ParticipantTracks.encode(wt,Tt.uint32(42).fork()).ldelim();return Tt},decode(vt,Tt){const wt=vt instanceof c.default.Reader?vt:new c.default.Reader(vt);let zt=Tt===void 0?wt.len:wt.pos+Tt;const Mt=Object.assign({},_e);for(Mt.trackSids=[],Mt.participantTracks=[];wt.pos<zt;){const Nt=wt.uint32();switch(Nt>>>3){case 1:Mt.room=wt.string();break;case 2:Mt.identity=wt.string();break;case 3:Mt.trackSids.push(wt.string());break;case 4:Mt.subscribe=wt.bool();break;case 5:Mt.participantTracks.push(m.ParticipantTracks.decode(wt,wt.uint32()));break;default:wt.skipType(Nt&7);break}}return Mt},fromJSON(vt){const Tt=Object.assign({},_e);if(Tt.trackSids=[],Tt.participantTracks=[],vt.room!==void 0&&vt.room!==null?Tt.room=String(vt.room):Tt.room="",vt.identity!==void 0&&vt.identity!==null?Tt.identity=String(vt.identity):Tt.identity="",vt.trackSids!==void 0&&vt.trackSids!==null)for(const wt of vt.trackSids)Tt.trackSids.push(String(wt));if(vt.subscribe!==void 0&&vt.subscribe!==null?Tt.subscribe=Boolean(vt.subscribe):Tt.subscribe=!1,vt.participantTracks!==void 0&&vt.participantTracks!==null)for(const wt of vt.participantTracks)Tt.participantTracks.push(m.ParticipantTracks.fromJSON(wt));return Tt},toJSON(vt){const Tt={};return vt.room!==void 0&&(Tt.room=vt.room),vt.identity!==void 0&&(Tt.identity=vt.identity),vt.trackSids?Tt.trackSids=vt.trackSids.map(wt=>wt):Tt.trackSids=[],vt.subscribe!==void 0&&(Tt.subscribe=vt.subscribe),vt.participantTracks?Tt.participantTracks=vt.participantTracks.map(wt=>wt?m.ParticipantTracks.toJSON(wt):void 0):Tt.participantTracks=[],Tt},fromPartial(vt){const Tt=Object.assign({},_e);if(Tt.trackSids=[],Tt.participantTracks=[],vt.room!==void 0&&vt.room!==null?Tt.room=vt.room:Tt.room="",vt.identity!==void 0&&vt.identity!==null?Tt.identity=vt.identity:Tt.identity="",vt.trackSids!==void 0&&vt.trackSids!==null)for(const wt of vt.trackSids)Tt.trackSids.push(wt);if(vt.subscribe!==void 0&&vt.subscribe!==null?Tt.subscribe=vt.subscribe:Tt.subscribe=!1,vt.participantTracks!==void 0&&vt.participantTracks!==null)for(const wt of vt.participantTracks)Tt.participantTracks.push(m.ParticipantTracks.fromPartial(wt));return Tt}};const ot={};a.UpdateSubscriptionsResponse={encode(vt,Tt=c.default.Writer.create()){return Tt},decode(vt,Tt){const wt=vt instanceof c.default.Reader?vt:new c.default.Reader(vt);let zt=Tt===void 0?wt.len:wt.pos+Tt;const Mt=Object.assign({},ot);for(;wt.pos<zt;){const Nt=wt.uint32();switch(Nt>>>3){default:wt.skipType(Nt&7);break}}return Mt},fromJSON(vt){return Object.assign({},ot)},toJSON(vt){return{}},fromPartial(vt){return Object.assign({},ot)}};const lt={room:"",kind:0,destinationSids:""};a.SendDataRequest={encode(vt,Tt=c.default.Writer.create()){vt.room!==""&&Tt.uint32(10).string(vt.room),vt.data.length!==0&&Tt.uint32(18).bytes(vt.data),vt.kind!==0&&Tt.uint32(24).int32(vt.kind);for(const wt of vt.destinationSids)Tt.uint32(34).string(wt);return Tt},decode(vt,Tt){const wt=vt instanceof c.default.Reader?vt:new c.default.Reader(vt);let zt=Tt===void 0?wt.len:wt.pos+Tt;const Mt=Object.assign({},lt);for(Mt.destinationSids=[],Mt.data=new Uint8Array;wt.pos<zt;){const Nt=wt.uint32();switch(Nt>>>3){case 1:Mt.room=wt.string();break;case 2:Mt.data=wt.bytes();break;case 3:Mt.kind=wt.int32();break;case 4:Mt.destinationSids.push(wt.string());break;default:wt.skipType(Nt&7);break}}return Mt},fromJSON(vt){const Tt=Object.assign({},lt);if(Tt.destinationSids=[],Tt.data=new Uint8Array,vt.room!==void 0&&vt.room!==null?Tt.room=String(vt.room):Tt.room="",vt.data!==void 0&&vt.data!==null&&(Tt.data=bt(vt.data)),vt.kind!==void 0&&vt.kind!==null?Tt.kind=m.dataPacket_KindFromJSON(vt.kind):Tt.kind=0,vt.destinationSids!==void 0&&vt.destinationSids!==null)for(const wt of vt.destinationSids)Tt.destinationSids.push(String(wt));return Tt},toJSON(vt){const Tt={};return vt.room!==void 0&&(Tt.room=vt.room),vt.data!==void 0&&(Tt.data=Ct(vt.data!==void 0?vt.data:new Uint8Array)),vt.kind!==void 0&&(Tt.kind=m.dataPacket_KindToJSON(vt.kind)),vt.destinationSids?Tt.destinationSids=vt.destinationSids.map(wt=>wt):Tt.destinationSids=[],Tt},fromPartial(vt){const Tt=Object.assign({},lt);if(Tt.destinationSids=[],vt.room!==void 0&&vt.room!==null?Tt.room=vt.room:Tt.room="",vt.data!==void 0&&vt.data!==null?Tt.data=vt.data:Tt.data=new Uint8Array,vt.kind!==void 0&&vt.kind!==null?Tt.kind=vt.kind:Tt.kind=0,vt.destinationSids!==void 0&&vt.destinationSids!==null)for(const wt of vt.destinationSids)Tt.destinationSids.push(wt);return Tt}};const Ot={};a.SendDataResponse={encode(vt,Tt=c.default.Writer.create()){return Tt},decode(vt,Tt){const wt=vt instanceof c.default.Reader?vt:new c.default.Reader(vt);let zt=Tt===void 0?wt.len:wt.pos+Tt;const Mt=Object.assign({},Ot);for(;wt.pos<zt;){const Nt=wt.uint32();switch(Nt>>>3){default:wt.skipType(Nt&7);break}}return Mt},fromJSON(vt){return Object.assign({},Ot)},toJSON(vt){return{}},fromPartial(vt){return Object.assign({},Ot)}};const It={room:"",metadata:""};a.UpdateRoomMetadataRequest={encode(vt,Tt=c.default.Writer.create()){return vt.room!==""&&Tt.uint32(10).string(vt.room),vt.metadata!==""&&Tt.uint32(18).string(vt.metadata),Tt},decode(vt,Tt){const wt=vt instanceof c.default.Reader?vt:new c.default.Reader(vt);let zt=Tt===void 0?wt.len:wt.pos+Tt;const Mt=Object.assign({},It);for(;wt.pos<zt;){const Nt=wt.uint32();switch(Nt>>>3){case 1:Mt.room=wt.string();break;case 2:Mt.metadata=wt.string();break;default:wt.skipType(Nt&7);break}}return Mt},fromJSON(vt){const Tt=Object.assign({},It);return vt.room!==void 0&&vt.room!==null?Tt.room=String(vt.room):Tt.room="",vt.metadata!==void 0&&vt.metadata!==null?Tt.metadata=String(vt.metadata):Tt.metadata="",Tt},toJSON(vt){const Tt={};return vt.room!==void 0&&(Tt.room=vt.room),vt.metadata!==void 0&&(Tt.metadata=vt.metadata),Tt},fromPartial(vt){const Tt=Object.assign({},It);return vt.room!==void 0&&vt.room!==null?Tt.room=vt.room:Tt.room="",vt.metadata!==void 0&&vt.metadata!==null?Tt.metadata=vt.metadata:Tt.metadata="",Tt}};var Pt=(()=>{if(typeof Pt!="undefined")return Pt;if(typeof self!="undefined")return self;if(typeof window!="undefined")return window;if(typeof commonjsGlobal!="undefined")return commonjsGlobal;throw"Unable to locate global object"})();const $t=Pt.atob||(vt=>Pt.Buffer.from(vt,"base64").toString("binary"));function bt(vt){const Tt=$t(vt),wt=new Uint8Array(Tt.length);for(let zt=0;zt<Tt.length;++zt)wt[zt]=Tt.charCodeAt(zt);return wt}const Rt=Pt.btoa||(vt=>Pt.Buffer.from(vt,"binary").toString("base64"));function Ct(vt){const Tt=[];for(const wt of vt)Tt.push(String.fromCharCode(wt));return Rt(Tt.join(""))}c.default.util.Long!==d.default&&(c.default.util.Long=d.default,c.default.configure())})(livekit_room);var TwirpRPC={},axios$2={exports:{}},bind$2=function a(s,d){return function(){for(var m=new Array(arguments.length),g=0;g<m.length;g++)m[g]=arguments[g];return s.apply(d,m)}},bind$1=bind$2,toString=Object.prototype.toString;function isArray$1(a){return toString.call(a)==="[object Array]"}function isUndefined(a){return typeof a=="undefined"}function isBuffer(a){return a!==null&&!isUndefined(a)&&a.constructor!==null&&!isUndefined(a.constructor)&&typeof a.constructor.isBuffer=="function"&&a.constructor.isBuffer(a)}function isArrayBuffer(a){return toString.call(a)==="[object ArrayBuffer]"}function isFormData(a){return typeof FormData!="undefined"&&a instanceof FormData}function isArrayBufferView(a){var s;return typeof ArrayBuffer!="undefined"&&ArrayBuffer.isView?s=ArrayBuffer.isView(a):s=a&&a.buffer&&a.buffer instanceof ArrayBuffer,s}function isString(a){return typeof a=="string"}function isNumber(a){return typeof a=="number"}function isObject$3(a){return a!==null&&typeof a=="object"}function isPlainObject(a){if(toString.call(a)!=="[object Object]")return!1;var s=Object.getPrototypeOf(a);return s===null||s===Object.prototype}function isDate(a){return toString.call(a)==="[object Date]"}function isFile(a){return toString.call(a)==="[object File]"}function isBlob(a){return toString.call(a)==="[object Blob]"}function isFunction(a){return toString.call(a)==="[object Function]"}function isStream(a){return isObject$3(a)&&isFunction(a.pipe)}function isURLSearchParams(a){return typeof URLSearchParams!="undefined"&&a instanceof URLSearchParams}function trim$1(a){return a.trim?a.trim():a.replace(/^\s+|\s+$/g,"")}function isStandardBrowserEnv(){return typeof navigator!="undefined"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window!="undefined"&&typeof document!="undefined"}function forEach(a,s){if(!(a===null||typeof a=="undefined"))if(typeof a!="object"&&(a=[a]),isArray$1(a))for(var d=0,c=a.length;d<c;d++)s.call(null,a[d],d,a);else for(var m in a)Object.prototype.hasOwnProperty.call(a,m)&&s.call(null,a[m],m,a)}function merge(){var a={};function s(m,g){isPlainObject(a[g])&&isPlainObject(m)?a[g]=merge(a[g],m):isPlainObject(m)?a[g]=merge({},m):isArray$1(m)?a[g]=m.slice():a[g]=m}for(var d=0,c=arguments.length;d<c;d++)forEach(arguments[d],s);return a}function extend(a,s,d){return forEach(s,function(m,g){d&&typeof m=="function"?a[g]=bind$1(m,d):a[g]=m}),a}function stripBOM(a){return a.charCodeAt(0)===65279&&(a=a.slice(1)),a}var utils$f={isArray:isArray$1,isArrayBuffer,isBuffer,isFormData,isArrayBufferView,isString,isNumber,isObject:isObject$3,isPlainObject,isUndefined,isDate,isFile,isBlob,isFunction,isStream,isURLSearchParams,isStandardBrowserEnv,forEach,merge,extend,trim:trim$1,stripBOM},utils$e=utils$f;function encode(a){return encodeURIComponent(a).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var buildURL$2=function a(s,d,c){if(!d)return s;var m;if(c)m=c(d);else if(utils$e.isURLSearchParams(d))m=d.toString();else{var g=[];utils$e.forEach(d,function(et,nt){et===null||typeof et=="undefined"||(utils$e.isArray(et)?nt=nt+"[]":et=[et],utils$e.forEach(et,function(ct){utils$e.isDate(ct)?ct=ct.toISOString():utils$e.isObject(ct)&&(ct=JSON.stringify(ct)),g.push(encode(nt)+"="+encode(ct))}))}),m=g.join("&")}if(m){var b=s.indexOf("#");b!==-1&&(s=s.slice(0,b)),s+=(s.indexOf("?")===-1?"?":"&")+m}return s},utils$d=utils$f;function InterceptorManager$1(){this.handlers=[]}InterceptorManager$1.prototype.use=function a(s,d,c){return this.handlers.push({fulfilled:s,rejected:d,synchronous:c?c.synchronous:!1,runWhen:c?c.runWhen:null}),this.handlers.length-1};InterceptorManager$1.prototype.eject=function a(s){this.handlers[s]&&(this.handlers[s]=null)};InterceptorManager$1.prototype.forEach=function a(s){utils$d.forEach(this.handlers,function(c){c!==null&&s(c)})};var InterceptorManager_1=InterceptorManager$1,utils$c=utils$f,normalizeHeaderName$1=function a(s,d){utils$c.forEach(s,function(m,g){g!==d&&g.toUpperCase()===d.toUpperCase()&&(s[d]=m,delete s[g])})},enhanceError$2=function a(s,d,c,m,g){return s.config=d,c&&(s.code=c),s.request=m,s.response=g,s.isAxiosError=!0,s.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},s},enhanceError$1=enhanceError$2,createError$2=function a(s,d,c,m,g){var b=new Error(s);return enhanceError$1(b,d,c,m,g)},createError$1=createError$2,settle$1=function a(s,d,c){var m=c.config.validateStatus;!c.status||!m||m(c.status)?s(c):d(createError$1("Request failed with status code "+c.status,c.config,null,c.request,c))},utils$b=utils$f,cookies$1=utils$b.isStandardBrowserEnv()?function a(){return{write:function(d,c,m,g,b,k){var et=[];et.push(d+"="+encodeURIComponent(c)),utils$b.isNumber(m)&&et.push("expires="+new Date(m).toGMTString()),utils$b.isString(g)&&et.push("path="+g),utils$b.isString(b)&&et.push("domain="+b),k===!0&&et.push("secure"),document.cookie=et.join("; ")},read:function(d){var c=document.cookie.match(new RegExp("(^|;\\s*)("+d+")=([^;]*)"));return c?decodeURIComponent(c[3]):null},remove:function(d){this.write(d,"",Date.now()-864e5)}}}():function a(){return{write:function(){},read:function(){return null},remove:function(){}}}(),isAbsoluteURL$1=function a(s){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(s)},combineURLs$1=function a(s,d){return d?s.replace(/\/+$/,"")+"/"+d.replace(/^\/+/,""):s},isAbsoluteURL=isAbsoluteURL$1,combineURLs=combineURLs$1,buildFullPath$1=function a(s,d){return s&&!isAbsoluteURL(d)?combineURLs(s,d):d},utils$a=utils$f,ignoreDuplicateOf=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"],parseHeaders$1=function a(s){var d={},c,m,g;return s&&utils$a.forEach(s.split(`
`),function(k){if(g=k.indexOf(":"),c=utils$a.trim(k.substr(0,g)).toLowerCase(),m=utils$a.trim(k.substr(g+1)),c){if(d[c]&&ignoreDuplicateOf.indexOf(c)>=0)return;c==="set-cookie"?d[c]=(d[c]?d[c]:[]).concat([m]):d[c]=d[c]?d[c]+", "+m:m}}),d},utils$9=utils$f,isURLSameOrigin$1=utils$9.isStandardBrowserEnv()?function a(){var s=/(msie|trident)/i.test(navigator.userAgent),d=document.createElement("a"),c;function m(g){var b=g;return s&&(d.setAttribute("href",b),b=d.href),d.setAttribute("href",b),{href:d.href,protocol:d.protocol?d.protocol.replace(/:$/,""):"",host:d.host,search:d.search?d.search.replace(/^\?/,""):"",hash:d.hash?d.hash.replace(/^#/,""):"",hostname:d.hostname,port:d.port,pathname:d.pathname.charAt(0)==="/"?d.pathname:"/"+d.pathname}}return c=m(window.location.href),function(b){var k=utils$9.isString(b)?m(b):b;return k.protocol===c.protocol&&k.host===c.host}}():function a(){return function(){return!0}}(),utils$8=utils$f,settle=settle$1,cookies=cookies$1,buildURL$1=buildURL$2,buildFullPath=buildFullPath$1,parseHeaders=parseHeaders$1,isURLSameOrigin=isURLSameOrigin$1,createError=createError$2,xhr=function a(s){return new Promise(function(c,m){var g=s.data,b=s.headers,k=s.responseType;utils$8.isFormData(g)&&delete b["Content-Type"];var et=new XMLHttpRequest;if(s.auth){var nt=s.auth.username||"",it=s.auth.password?unescape(encodeURIComponent(s.auth.password)):"";b.Authorization="Basic "+btoa(nt+":"+it)}var ct=buildFullPath(s.baseURL,s.url);et.open(s.method.toUpperCase(),buildURL$1(ct,s.params,s.paramsSerializer),!0),et.timeout=s.timeout;function st(){if(!!et){var pt="getAllResponseHeaders"in et?parseHeaders(et.getAllResponseHeaders()):null,St=!k||k==="text"||k==="json"?et.responseText:et.response,_t={data:St,status:et.status,statusText:et.statusText,headers:pt,config:s,request:et};settle(c,m,_t),et=null}}if("onloadend"in et?et.onloadend=st:et.onreadystatechange=function(){!et||et.readyState!==4||et.status===0&&!(et.responseURL&&et.responseURL.indexOf("file:")===0)||setTimeout(st)},et.onabort=function(){!et||(m(createError("Request aborted",s,"ECONNABORTED",et)),et=null)},et.onerror=function(){m(createError("Network Error",s,null,et)),et=null},et.ontimeout=function(){var St="timeout of "+s.timeout+"ms exceeded";s.timeoutErrorMessage&&(St=s.timeoutErrorMessage),m(createError(St,s,s.transitional&&s.transitional.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",et)),et=null},utils$8.isStandardBrowserEnv()){var ut=(s.withCredentials||isURLSameOrigin(ct))&&s.xsrfCookieName?cookies.read(s.xsrfCookieName):void 0;ut&&(b[s.xsrfHeaderName]=ut)}"setRequestHeader"in et&&utils$8.forEach(b,function(St,_t){typeof g=="undefined"&&_t.toLowerCase()==="content-type"?delete b[_t]:et.setRequestHeader(_t,St)}),utils$8.isUndefined(s.withCredentials)||(et.withCredentials=!!s.withCredentials),k&&k!=="json"&&(et.responseType=s.responseType),typeof s.onDownloadProgress=="function"&&et.addEventListener("progress",s.onDownloadProgress),typeof s.onUploadProgress=="function"&&et.upload&&et.upload.addEventListener("progress",s.onUploadProgress),s.cancelToken&&s.cancelToken.promise.then(function(St){!et||(et.abort(),m(St),et=null)}),g||(g=null),et.send(g)})},utils$7=utils$f,normalizeHeaderName=normalizeHeaderName$1,enhanceError=enhanceError$2,DEFAULT_CONTENT_TYPE={"Content-Type":"application/x-www-form-urlencoded"};function setContentTypeIfUnset(a,s){!utils$7.isUndefined(a)&&utils$7.isUndefined(a["Content-Type"])&&(a["Content-Type"]=s)}function getDefaultAdapter(){var a;return(typeof XMLHttpRequest!="undefined"||typeof process!="undefined"&&Object.prototype.toString.call(process)==="[object process]")&&(a=xhr),a}function stringifySafely(a,s,d){if(utils$7.isString(a))try{return(s||JSON.parse)(a),utils$7.trim(a)}catch(c){if(c.name!=="SyntaxError")throw c}return(d||JSON.stringify)(a)}var defaults$4={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:getDefaultAdapter(),transformRequest:[function a(s,d){return normalizeHeaderName(d,"Accept"),normalizeHeaderName(d,"Content-Type"),utils$7.isFormData(s)||utils$7.isArrayBuffer(s)||utils$7.isBuffer(s)||utils$7.isStream(s)||utils$7.isFile(s)||utils$7.isBlob(s)?s:utils$7.isArrayBufferView(s)?s.buffer:utils$7.isURLSearchParams(s)?(setContentTypeIfUnset(d,"application/x-www-form-urlencoded;charset=utf-8"),s.toString()):utils$7.isObject(s)||d&&d["Content-Type"]==="application/json"?(setContentTypeIfUnset(d,"application/json"),stringifySafely(s)):s}],transformResponse:[function a(s){var d=this.transitional,c=d&&d.silentJSONParsing,m=d&&d.forcedJSONParsing,g=!c&&this.responseType==="json";if(g||m&&utils$7.isString(s)&&s.length)try{return JSON.parse(s)}catch(b){if(g)throw b.name==="SyntaxError"?enhanceError(b,this,"E_JSON_PARSE"):b}return s}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function a(s){return s>=200&&s<300}};defaults$4.headers={common:{Accept:"application/json, text/plain, */*"}};utils$7.forEach(["delete","get","head"],function a(s){defaults$4.headers[s]={}});utils$7.forEach(["post","put","patch"],function a(s){defaults$4.headers[s]=utils$7.merge(DEFAULT_CONTENT_TYPE)});var defaults_1$1=defaults$4,utils$6=utils$f,defaults$3=defaults_1$1,transformData$1=function a(s,d,c){var m=this||defaults$3;return utils$6.forEach(c,function(b){s=b.call(m,s,d)}),s},isCancel$1=function a(s){return!!(s&&s.__CANCEL__)},utils$5=utils$f,transformData=transformData$1,isCancel=isCancel$1,defaults$2=defaults_1$1;function throwIfCancellationRequested(a){a.cancelToken&&a.cancelToken.throwIfRequested()}var dispatchRequest$1=function a(s){throwIfCancellationRequested(s),s.headers=s.headers||{},s.data=transformData.call(s,s.data,s.headers,s.transformRequest),s.headers=utils$5.merge(s.headers.common||{},s.headers[s.method]||{},s.headers),utils$5.forEach(["delete","get","head","post","put","patch","common"],function(m){delete s.headers[m]});var d=s.adapter||defaults$2.adapter;return d(s).then(function(m){return throwIfCancellationRequested(s),m.data=transformData.call(s,m.data,m.headers,s.transformResponse),m},function(m){return isCancel(m)||(throwIfCancellationRequested(s),m&&m.response&&(m.response.data=transformData.call(s,m.response.data,m.response.headers,s.transformResponse))),Promise.reject(m)})},utils$4=utils$f,mergeConfig$2=function a(s,d){d=d||{};var c={},m=["url","method","data"],g=["headers","auth","proxy","params"],b=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],k=["validateStatus"];function et(st,ut){return utils$4.isPlainObject(st)&&utils$4.isPlainObject(ut)?utils$4.merge(st,ut):utils$4.isPlainObject(ut)?utils$4.merge({},ut):utils$4.isArray(ut)?ut.slice():ut}function nt(st){utils$4.isUndefined(d[st])?utils$4.isUndefined(s[st])||(c[st]=et(void 0,s[st])):c[st]=et(s[st],d[st])}utils$4.forEach(m,function(ut){utils$4.isUndefined(d[ut])||(c[ut]=et(void 0,d[ut]))}),utils$4.forEach(g,nt),utils$4.forEach(b,function(ut){utils$4.isUndefined(d[ut])?utils$4.isUndefined(s[ut])||(c[ut]=et(void 0,s[ut])):c[ut]=et(void 0,d[ut])}),utils$4.forEach(k,function(ut){ut in d?c[ut]=et(s[ut],d[ut]):ut in s&&(c[ut]=et(void 0,s[ut]))});var it=m.concat(g).concat(b).concat(k),ct=Object.keys(s).concat(Object.keys(d)).filter(function(ut){return it.indexOf(ut)===-1});return utils$4.forEach(ct,nt),c};const name="axios",version$1="0.21.4",description="Promise based HTTP client for the browser and node.js",main="index.js",scripts={test:"grunt test",start:"node ./sandbox/server.js",build:"NODE_ENV=production grunt build",preversion:"npm test",version:"npm run build && grunt version && git add -A dist && git add CHANGELOG.md bower.json package.json",postversion:"git push && git push --tags",examples:"node ./examples/server.js",coveralls:"cat coverage/lcov.info | ./node_modules/coveralls/bin/coveralls.js",fix:"eslint --fix lib/**/*.js"},repository={type:"git",url:"https://github.com/axios/axios.git"},keywords=["xhr","http","ajax","promise","node"],author="Matt Zabriskie",license="MIT",bugs={url:"https://github.com/axios/axios/issues"},homepage="https://axios-http.com",devDependencies={coveralls:"^3.0.0","es6-promise":"^4.2.4",grunt:"^1.3.0","grunt-banner":"^0.6.0","grunt-cli":"^1.2.0","grunt-contrib-clean":"^1.1.0","grunt-contrib-watch":"^1.0.0","grunt-eslint":"^23.0.0","grunt-karma":"^4.0.0","grunt-mocha-test":"^0.13.3","grunt-ts":"^6.0.0-beta.19","grunt-webpack":"^4.0.2","istanbul-instrumenter-loader":"^1.0.0","jasmine-core":"^2.4.1",karma:"^6.3.2","karma-chrome-launcher":"^3.1.0","karma-firefox-launcher":"^2.1.0","karma-jasmine":"^1.1.1","karma-jasmine-ajax":"^0.1.13","karma-safari-launcher":"^1.0.0","karma-sauce-launcher":"^4.3.6","karma-sinon":"^1.0.5","karma-sourcemap-loader":"^0.3.8","karma-webpack":"^4.0.2","load-grunt-tasks":"^3.5.2",minimist:"^1.2.0",mocha:"^8.2.1",sinon:"^4.5.0","terser-webpack-plugin":"^4.2.3",typescript:"^4.0.5","url-search-params":"^0.10.0",webpack:"^4.44.2","webpack-dev-server":"^3.11.0"},browser={"./lib/adapters/http.js":"./lib/adapters/xhr.js"},jsdelivr="dist/axios.min.js",unpkg="dist/axios.min.js",typings="./index.d.ts",dependencies={"follow-redirects":"^1.14.0"},bundlesize=[{path:"./dist/axios.min.js",threshold:"5kB"}];var require$$0$1={name,version:version$1,description,main,scripts,repository,keywords,author,license,bugs,homepage,devDependencies,browser,jsdelivr,unpkg,typings,dependencies,bundlesize},pkg=require$$0$1,validators$1={};["object","boolean","number","function","string","symbol"].forEach(function(a,s){validators$1[a]=function(c){return typeof c===a||"a"+(s<1?"n ":" ")+a}});var deprecatedWarnings={},currentVerArr=pkg.version.split(".");function isOlderVersion(a,s){for(var d=s?s.split("."):currentVerArr,c=a.split("."),m=0;m<3;m++){if(d[m]>c[m])return!0;if(d[m]<c[m])return!1}return!1}validators$1.transitional=function a(s,d,c){var m=d&&isOlderVersion(d);function g(b,k){return"[Axios v"+pkg.version+"] Transitional option '"+b+"'"+k+(c?". "+c:"")}return function(b,k,et){if(s===!1)throw new Error(g(k," has been removed in "+d));return m&&!deprecatedWarnings[k]&&(deprecatedWarnings[k]=!0,console.warn(g(k," has been deprecated since v"+d+" and will be removed in the near future"))),s?s(b,k,et):!0}};function assertOptions(a,s,d){if(typeof a!="object")throw new TypeError("options must be an object");for(var c=Object.keys(a),m=c.length;m-- >0;){var g=c[m],b=s[g];if(b){var k=a[g],et=k===void 0||b(k,g,a);if(et!==!0)throw new TypeError("option "+g+" must be "+et);continue}if(d!==!0)throw Error("Unknown option "+g)}}var validator$1={isOlderVersion,assertOptions,validators:validators$1},utils$3=utils$f,buildURL=buildURL$2,InterceptorManager=InterceptorManager_1,dispatchRequest=dispatchRequest$1,mergeConfig$1=mergeConfig$2,validator=validator$1,validators=validator.validators;function Axios$1(a){this.defaults=a,this.interceptors={request:new InterceptorManager,response:new InterceptorManager}}Axios$1.prototype.request=function a(s){typeof s=="string"?(s=arguments[1]||{},s.url=arguments[0]):s=s||{},s=mergeConfig$1(this.defaults,s),s.method?s.method=s.method.toLowerCase():this.defaults.method?s.method=this.defaults.method.toLowerCase():s.method="get";var d=s.transitional;d!==void 0&&validator.assertOptions(d,{silentJSONParsing:validators.transitional(validators.boolean,"1.0.0"),forcedJSONParsing:validators.transitional(validators.boolean,"1.0.0"),clarifyTimeoutError:validators.transitional(validators.boolean,"1.0.0")},!1);var c=[],m=!0;this.interceptors.request.forEach(function(st){typeof st.runWhen=="function"&&st.runWhen(s)===!1||(m=m&&st.synchronous,c.unshift(st.fulfilled,st.rejected))});var g=[];this.interceptors.response.forEach(function(st){g.push(st.fulfilled,st.rejected)});var b;if(!m){var k=[dispatchRequest,void 0];for(Array.prototype.unshift.apply(k,c),k=k.concat(g),b=Promise.resolve(s);k.length;)b=b.then(k.shift(),k.shift());return b}for(var et=s;c.length;){var nt=c.shift(),it=c.shift();try{et=nt(et)}catch(ct){it(ct);break}}try{b=dispatchRequest(et)}catch(ct){return Promise.reject(ct)}for(;g.length;)b=b.then(g.shift(),g.shift());return b};Axios$1.prototype.getUri=function a(s){return s=mergeConfig$1(this.defaults,s),buildURL(s.url,s.params,s.paramsSerializer).replace(/^\?/,"")};utils$3.forEach(["delete","get","head","options"],function a(s){Axios$1.prototype[s]=function(d,c){return this.request(mergeConfig$1(c||{},{method:s,url:d,data:(c||{}).data}))}});utils$3.forEach(["post","put","patch"],function a(s){Axios$1.prototype[s]=function(d,c,m){return this.request(mergeConfig$1(m||{},{method:s,url:d,data:c}))}});var Axios_1=Axios$1;function Cancel$1(a){this.message=a}Cancel$1.prototype.toString=function a(){return"Cancel"+(this.message?": "+this.message:"")};Cancel$1.prototype.__CANCEL__=!0;var Cancel_1=Cancel$1,Cancel=Cancel_1;function CancelToken(a){if(typeof a!="function")throw new TypeError("executor must be a function.");var s;this.promise=new Promise(function(m){s=m});var d=this;a(function(m){d.reason||(d.reason=new Cancel(m),s(d.reason))})}CancelToken.prototype.throwIfRequested=function a(){if(this.reason)throw this.reason};CancelToken.source=function a(){var s,d=new CancelToken(function(m){s=m});return{token:d,cancel:s}};var CancelToken_1=CancelToken,spread=function a(s){return function(c){return s.apply(null,c)}},isAxiosError=function a(s){return typeof s=="object"&&s.isAxiosError===!0},utils$2=utils$f,bind=bind$2,Axios=Axios_1,mergeConfig=mergeConfig$2,defaults$1=defaults_1$1;function createInstance(a){var s=new Axios(a),d=bind(Axios.prototype.request,s);return utils$2.extend(d,Axios.prototype,s),utils$2.extend(d,s),d}var axios$1=createInstance(defaults$1);axios$1.Axios=Axios;axios$1.create=function a(s){return createInstance(mergeConfig(axios$1.defaults,s))};axios$1.Cancel=Cancel_1;axios$1.CancelToken=CancelToken_1;axios$1.isCancel=isCancel$1;axios$1.all=function a(s){return Promise.all(s)};axios$1.spread=spread;axios$1.isAxiosError=isAxiosError;axios$2.exports=axios$1;axios$2.exports.default=axios$1;var axios=axios$2.exports,mapObj$1={exports:{}};const isObject$2=a=>typeof a=="object"&&a!==null,mapObjectSkip=Symbol("skip"),isObjectCustom=a=>isObject$2(a)&&!(a instanceof RegExp)&&!(a instanceof Error)&&!(a instanceof Date),mapObject=(a,s,d,c=new WeakMap)=>{if(d=jt({deep:!1,target:{}},d),c.has(a))return c.get(a);c.set(a,d.target);const{target:m}=d;delete d.target;const g=b=>b.map(k=>isObjectCustom(k)?mapObject(k,s,d,c):k);if(Array.isArray(a))return g(a);for(const[b,k]of Object.entries(a)){const et=s(b,k,a);if(et===mapObjectSkip)continue;let[nt,it,{shouldRecurse:ct=!0}={}]=et;nt!=="__proto__"&&(d.deep&&ct&&isObjectCustom(it)&&(it=Array.isArray(it)?g(it):mapObject(it,s,d,c)),m[nt]=it)}return m};mapObj$1.exports=(a,s,d)=>{if(!isObject$2(a))throw new TypeError(`Expected an object, got \`${a}\` (${typeof a})`);return mapObject(a,s,d)};mapObj$1.exports.mapObjectSkip=mapObjectSkip;var camelcase={exports:{}};const UPPERCASE=/[\p{Lu}]/u,LOWERCASE=/[\p{Ll}]/u,LEADING_CAPITAL=/^[\p{Lu}](?![\p{Lu}])/gu,IDENTIFIER=/([\p{Alpha}\p{N}_]|$)/u,SEPARATORS=/[_.\- ]+/,LEADING_SEPARATORS=new RegExp("^"+SEPARATORS.source),SEPARATORS_AND_IDENTIFIER=new RegExp(SEPARATORS.source+IDENTIFIER.source,"gu"),NUMBERS_AND_IDENTIFIER=new RegExp("\\d+"+IDENTIFIER.source,"gu"),preserveCamelCase=(a,s,d)=>{let c=!1,m=!1,g=!1;for(let b=0;b<a.length;b++){const k=a[b];c&&UPPERCASE.test(k)?(a=a.slice(0,b)+"-"+a.slice(b),c=!1,g=m,m=!0,b++):m&&g&&LOWERCASE.test(k)?(a=a.slice(0,b-1)+"-"+a.slice(b-1),g=m,m=!1,c=!0):(c=s(k)===k&&d(k)!==k,g=m,m=d(k)===k&&s(k)!==k)}return a},preserveConsecutiveUppercase=(a,s)=>(LEADING_CAPITAL.lastIndex=0,a.replace(LEADING_CAPITAL,d=>s(d))),postProcess=(a,s)=>(SEPARATORS_AND_IDENTIFIER.lastIndex=0,NUMBERS_AND_IDENTIFIER.lastIndex=0,a.replace(SEPARATORS_AND_IDENTIFIER,(d,c)=>s(c)).replace(NUMBERS_AND_IDENTIFIER,d=>s(d))),camelCase$1=(a,s)=>{if(!(typeof a=="string"||Array.isArray(a)))throw new TypeError("Expected the input to be `string | string[]`");if(s=jt({pascalCase:!1,preserveConsecutiveUppercase:!1},s),Array.isArray(a)?a=a.map(g=>g.trim()).filter(g=>g.length).join("-"):a=a.trim(),a.length===0)return"";const d=s.locale===!1?g=>g.toLowerCase():g=>g.toLocaleLowerCase(s.locale),c=s.locale===!1?g=>g.toUpperCase():g=>g.toLocaleUpperCase(s.locale);return a.length===1?s.pascalCase?c(a):d(a):(a!==d(a)&&(a=preserveCamelCase(a,d,c)),a=a.replace(LEADING_SEPARATORS,""),s.preserveConsecutiveUppercase?a=preserveConsecutiveUppercase(a,d):a=d(a),s.pascalCase&&(a=c(a.charAt(0))+a.slice(1)),postProcess(a,c))};camelcase.exports=camelCase$1;camelcase.exports.default=camelCase$1;class QuickLRU{constructor(s={}){if(!(s.maxSize&&s.maxSize>0))throw new TypeError("`maxSize` must be a number greater than 0");this.maxSize=s.maxSize,this.onEviction=s.onEviction,this.cache=new Map,this.oldCache=new Map,this._size=0}_set(s,d){if(this.cache.set(s,d),this._size++,this._size>=this.maxSize){if(this._size=0,typeof this.onEviction=="function")for(const[c,m]of this.oldCache.entries())this.onEviction(c,m);this.oldCache=this.cache,this.cache=new Map}}get(s){if(this.cache.has(s))return this.cache.get(s);if(this.oldCache.has(s)){const d=this.oldCache.get(s);return this.oldCache.delete(s),this._set(s,d),d}}set(s,d){return this.cache.has(s)?this.cache.set(s,d):this._set(s,d),this}has(s){return this.cache.has(s)||this.oldCache.has(s)}peek(s){if(this.cache.has(s))return this.cache.get(s);if(this.oldCache.has(s))return this.oldCache.get(s)}delete(s){const d=this.cache.delete(s);return d&&this._size--,this.oldCache.delete(s)||d}clear(){this.cache.clear(),this.oldCache.clear(),this._size=0}*keys(){for(const[s]of this)yield s}*values(){for(const[,s]of this)yield s}*[Symbol.iterator](){for(const s of this.cache)yield s;for(const s of this.oldCache){const[d]=s;this.cache.has(d)||(yield s)}}get size(){let s=0;for(const d of this.oldCache.keys())this.cache.has(d)||s++;return Math.min(this._size+s,this.maxSize)}}var quickLru=QuickLRU;const mapObj=mapObj$1.exports,camelCase=camelcase.exports,QuickLru=quickLru,has=(a,s)=>a.some(d=>typeof d=="string"?d===s:(d.lastIndex=0,d.test(s))),cache$1=new QuickLru({maxSize:1e5}),isObject$1=a=>typeof a=="object"&&a!==null&&!(a instanceof RegExp)&&!(a instanceof Error)&&!(a instanceof Date),camelCaseConvert=(a,s)=>{if(!isObject$1(a))return a;s=jt({deep:!1,pascalCase:!1},s);const{exclude:d,pascalCase:c,stopPaths:m,deep:g}=s,b=new Set(m),k=et=>(nt,it)=>{if(g&&isObject$1(it)){const ct=et===void 0?nt:`${et}.${nt}`;b.has(ct)||(it=mapObj(it,k(ct)))}if(!(d&&has(d,nt))){const ct=c?`${nt}_`:nt;if(cache$1.has(ct))nt=cache$1.get(ct);else{const st=camelCase(nt,{pascalCase:c,locale:!1});nt.length<100&&cache$1.set(ct,st),nt=st}}return[nt,it]};return mapObj(a,k(void 0))};var camelcaseKeys=(a,s)=>Array.isArray(a)?Object.keys(a).map(d=>camelCaseConvert(a[d],s)):camelCaseConvert(a,s),__importDefault$d=commonjsGlobal&&commonjsGlobal.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(TwirpRPC,"__esModule",{value:!0});TwirpRPC.TwirpRpc=TwirpRPC.livekitPackage=void 0;const axios_1=__importDefault$d(axios),camelcase_keys_1=__importDefault$d(camelcaseKeys),defaultPrefix="/twirp";TwirpRPC.livekitPackage="livekit";class TwirpRpc{constructor(s,d,c,m){this.host=s,this.pkg=d,this.prefix=c||defaultPrefix;let g={baseURL:s};m!=null&&(g.headers={Host:m}),this.instance=axios_1.default.create(g)}request(s,d,c,m){return new Promise((g,b)=>{const k=`${this.prefix}/${this.pkg}.${s}/${d}`;this.instance.post(k,c,{headers:m}).then(et=>{g(camelcase_keys_1.default(et.data,{deep:!0}))}).catch(b)})}}TwirpRPC.TwirpRpc=TwirpRpc;var __awaiter$c=commonjsGlobal&&commonjsGlobal.__awaiter||function(a,s,d,c){function m(g){return g instanceof d?g:new d(function(b){b(g)})}return new(d||(d=Promise))(function(g,b){function k(it){try{nt(c.next(it))}catch(ct){b(ct)}}function et(it){try{nt(c.throw(it))}catch(ct){b(ct)}}function nt(it){it.done?g(it.value):m(it.value).then(k,et)}nt((c=c.apply(a,s||[])).next())})};Object.defineProperty(RoomServiceClient$1,"__esModule",{value:!0});RoomServiceClient$1.RoomServiceClient=void 0;const livekit_models_1$3=livekit_models$1,livekit_room_1=livekit_room,TwirpRPC_1=TwirpRPC,svc="RoomService";class RoomServiceClient{constructor(s,d,c,m,g){this.rpc=new TwirpRPC_1.TwirpRpc(s,TwirpRPC_1.livekitPackage,void 0,g),this.apiKey=d,this.secret=c,this.jwt=m}createRoom(s){return __awaiter$c(this,void 0,void 0,function*(){const d=yield this.rpc.request(svc,"CreateRoom",livekit_room_1.CreateRoomRequest.toJSON(livekit_room_1.CreateRoomRequest.fromPartial(s)),this.authHeader({roomCreate:!0}));return livekit_models_1$3.Room.fromJSON(d)})}listRooms(s){return __awaiter$c(this,void 0,void 0,function*(){const d=yield this.rpc.request(svc,"ListRooms",livekit_room_1.ListRoomsRequest.toJSON({names:s!=null?s:[]}),this.authHeader({roomList:!0}));return livekit_room_1.ListRoomsResponse.fromJSON(d).rooms})}deleteRoom(s){return __awaiter$c(this,void 0,void 0,function*(){yield this.rpc.request(svc,"DeleteRoom",livekit_room_1.DeleteRoomRequest.toJSON({room:s}),this.authHeader({roomCreate:!0}))})}updateRoomMetadata(s,d){return __awaiter$c(this,void 0,void 0,function*(){const c=yield this.rpc.request(svc,"UpdateRoomMetadata",livekit_room_1.UpdateRoomMetadataRequest.toJSON({room:s,metadata:d}),this.authHeader({roomAdmin:!0,room:s}));return livekit_models_1$3.Room.fromJSON(c)})}listParticipants(s){return __awaiter$c(this,void 0,void 0,function*(){const d=yield this.rpc.request(svc,"ListParticipants",livekit_room_1.ListParticipantsRequest.toJSON({room:s}),this.authHeader({roomAdmin:!0,room:s}));return livekit_room_1.ListParticipantsResponse.fromJSON(d).participants})}getParticipant(s,d){return __awaiter$c(this,void 0,void 0,function*(){const c=yield this.rpc.request(svc,"GetParticipant",livekit_room_1.RoomParticipantIdentity.toJSON({room:s,identity:d}),this.authHeader({roomAdmin:!0,room:s}));return livekit_models_1$3.ParticipantInfo.fromJSON(c)})}removeParticipant(s,d){return __awaiter$c(this,void 0,void 0,function*(){yield this.rpc.request(svc,"RemoveParticipant",livekit_room_1.RoomParticipantIdentity.toJSON({room:s,identity:d}),this.authHeader({roomAdmin:!0,room:s}))})}mutePublishedTrack(s,d,c,m){return __awaiter$c(this,void 0,void 0,function*(){const g=livekit_room_1.MuteRoomTrackRequest.toJSON({room:s,identity:d,trackSid:c,muted:m}),b=yield this.rpc.request(svc,"MutePublishedTrack",g,this.authHeader({roomAdmin:!0,room:s}));return livekit_room_1.MuteRoomTrackResponse.fromJSON(b).track})}updateParticipant(s,d,c,m){return __awaiter$c(this,void 0,void 0,function*(){const g={room:s,identity:d,metadata:c||"",permission:m},b=yield this.rpc.request(svc,"UpdateParticipant",livekit_room_1.UpdateParticipantRequest.toJSON(g),this.authHeader({roomAdmin:!0,room:s}));return livekit_models_1$3.ParticipantInfo.fromJSON(b)})}updateSubscriptions(s,d,c,m){return __awaiter$c(this,void 0,void 0,function*(){const g=livekit_room_1.UpdateSubscriptionsRequest.toJSON({room:s,identity:d,trackSids:c,subscribe:m,participantTracks:[]});yield this.rpc.request(svc,"UpdateSubscriptions",g,this.authHeader({roomAdmin:!0,room:s}))})}sendData(s,d,c,m=[]){return __awaiter$c(this,void 0,void 0,function*(){const g=livekit_room_1.SendDataRequest.toJSON({room:s,data:d,kind:c,destinationSids:m});yield this.rpc.request(svc,"SendData",g,this.authHeader({roomAdmin:!0,room:s}))})}authHeader(s){if(this.jwt!=null)return{Authorization:`Bearer ${this.jwt}`}}}RoomServiceClient$1.RoomServiceClient=RoomServiceClient;(function(a){var s=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(m,g,b,k){k===void 0&&(k=b),Object.defineProperty(m,k,{enumerable:!0,get:function(){return g[b]}})}:function(m,g,b,k){k===void 0&&(k=b),m[k]=g[b]}),d=commonjsGlobal&&commonjsGlobal.__exportStar||function(m,g){for(var b in m)b!=="default"&&!Object.prototype.hasOwnProperty.call(g,b)&&s(g,m,b)};Object.defineProperty(a,"__esModule",{value:!0}),a.TrackType=a.TrackInfo=a.Room=a.ParticipantInfo_State=a.ParticipantInfo=a.DataPacket_Kind=void 0,d(grants,a);var c=livekit_models$1;Object.defineProperty(a,"DataPacket_Kind",{enumerable:!0,get:function(){return c.DataPacket_Kind}}),Object.defineProperty(a,"ParticipantInfo",{enumerable:!0,get:function(){return c.ParticipantInfo}}),Object.defineProperty(a,"ParticipantInfo_State",{enumerable:!0,get:function(){return c.ParticipantInfo_State}}),Object.defineProperty(a,"Room",{enumerable:!0,get:function(){return c.Room}}),Object.defineProperty(a,"TrackInfo",{enumerable:!0,get:function(){return c.TrackInfo}}),Object.defineProperty(a,"TrackType",{enumerable:!0,get:function(){return c.TrackType}}),d(RoomServiceClient$1,a)})(dist$1);var livekit={},__importDefault$c=commonjsGlobal&&commonjsGlobal.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(livekit,"__esModule",{value:!0});livekit.LiveKitUtils=void 0;const jwt_decode_1=__importDefault$c(require$$0$2);class LiveKitUtils{static decodeJwt(s){return(0,jwt_decode_1.default)(s,{header:!1})}static isRoomAdmin(s){return LiveKitUtils.decodeJwt(s).video.roomAdmin}static getRoomName(s){return LiveKitUtils.decodeJwt(s).video.room}}livekit.LiveKitUtils=LiveKitUtils;(function(a){var s=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(Rt,Ct,vt,Tt){Tt===void 0&&(Tt=vt);var wt=Object.getOwnPropertyDescriptor(Ct,vt);(!wt||("get"in wt?!Ct.__esModule:wt.writable||wt.configurable))&&(wt={enumerable:!0,get:function(){return Ct[vt]}}),Object.defineProperty(Rt,Tt,wt)}:function(Rt,Ct,vt,Tt){Tt===void 0&&(Tt=vt),Rt[Tt]=Ct[vt]}),d=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(Rt,Ct){Object.defineProperty(Rt,"default",{enumerable:!0,value:Ct})}:function(Rt,Ct){Rt.default=Ct}),c=commonjsGlobal&&commonjsGlobal.__importStar||function(Rt){if(Rt&&Rt.__esModule)return Rt;var Ct={};if(Rt!=null)for(var vt in Rt)vt!=="default"&&Object.prototype.hasOwnProperty.call(Rt,vt)&&s(Ct,Rt,vt);return d(Ct,Rt),Ct},m=commonjsGlobal&&commonjsGlobal.__importDefault||function(Rt){return Rt&&Rt.__esModule?Rt:{default:Rt}};Object.defineProperty(a,"__esModule",{value:!0}),a.ApiStream=a.LiveKitUtils=a.LiveKitServer=a.EventApiModel=a.LayoutApiModel=a.LiveApiModel=void 0;const g=m(require$$0$2),b=require$$1$2,k=require$$2$2,et=layoutapi,nt=liveapi,it=eventapi,ct=c(security),st=c(api$1);a.LiveApiModel=st;const ut=c(dist$3);a.LayoutApiModel=ut;const pt=c(dist$2);a.EventApiModel=pt;const St=c(dist$1);a.LiveKitServer=St;const _t=livekit;Object.defineProperty(a,"LiveKitUtils",{enumerable:!0,get:function(){return _t.LiveKitUtils}});const ht=logger$1,_e=version$2,ot={dev:"http://127.0.0.1:8081",stage:"https://live.stream.horse/grpcweb/live/v2",prod:"https://live.api.stream/grpcweb/live/v2"},lt={dev:"https://live.stream.horse/grpcweb/layout/v2",stage:"https://live.stream.horse/grpcweb/layout/v2",prod:"https://live.api.stream/grpcweb/layout/v2"},Ot={dev:"wss://live.stream.horse/event/v2",stage:"wss://live.stream.horse/event/v2",prod:"wss://live.api.stream/event/v2"},It={dev:"https://live.stream.horse/grpcweb/event/v2",stage:"https://live.stream.horse/grpcweb/event/v2",prod:"https://live.api.stream/grpcweb/event/v2"},Pt={dev:"wss://live.stream.horse/webrtc/v2",stage:"wss://live.stream.horse/webrtc/v2",prod:"wss://live.api.stream/webrtc/v2"},$t={dev:"https://live.stream.horse/webrtc/v2",stage:"https://live.stream.horse/webrtc/v2",prod:"https://live.api.stream/webrtc/v2"};class bt{constructor(Ct={}){var vt;const Tt=jt({env:"prod",logLevel:"Warn"},Ct);this.env=Tt.env;let wt=(0,b.v4)();Tt.sessionId!=null&&(wt=Tt.sessionId),this.log=ht.logger.getCategory("ApiStream"),this.setLogLevel(Tt.env=="dev"?"Trace":Tt.logLevel);const zt=(vt=Tt.overrideEndpoints)!==null&&vt!==void 0?vt:{};zt.liveApiServer==null&&(zt.liveApiServer=ot[this.env]),zt.layoutApiServer==null&&(zt.layoutApiServer=lt[this.env]),zt.eventApiServer==null&&(zt.eventApiServer=It[this.env]),zt.eventApiWebSocketServer==null&&(zt.eventApiWebSocketServer=Ot[this.env]),this.eventApi=new it.EventApi(wt,zt.eventApiServer,zt.eventApiWebSocketServer,Tt.sdkVersion),this.layoutApi=new et.LayoutApi(wt,this.eventApi,zt.layoutApiServer,Tt.sdkVersion),this.liveApi=new nt.LiveApi(wt,this.eventApi,zt.liveApiServer,this.setAccessToken.bind(this),Tt.apiKey,Tt.sdkVersion),this.eventApi.on("reconnectBefore",Mt=>{Mt.reauthenticate&&this.liveApi.authentication.refreshAccessToken({}).catch(()=>{})}),this.log.info("api.stream: sessionid="+wt+", version="+_e+", sdkVersion="+Tt.sdkVersion)}LiveApi(){return this.liveApi}LayoutApi(){return this.layoutApi}EventApi(){return this.eventApi}setLogLevel(Ct){try{let vt=k.LogLevel.toLogLevel(Ct);ht.logger.updateRuntimeSettings({level:vt})}catch{this.log.warn(`unknown logging level ${Ct}`)}}setAccessToken(Ct){this.log.debug("setting accessToken"),this.accessTokenClaims=bt.decodeAccessToken(Ct),this.layoutApi.setAccessToken(Ct),this.liveApi.setAccessToken(Ct),this.eventApi.setAccessToken(Ct)}getGuestRole(){if(this.accessTokenClaims!=null&&this.accessTokenClaims.guestControl!=null)return this.accessTokenClaims.guestControl.role}getGuestProject(){return this.guestProject}async load(Ct){if(Ct==null){let vt=this.parseQuery();vt.get(bt.ACCESS_TOKEN_QUERY_PARAM)!=null&&(Ct=vt.get(bt.ACCESS_TOKEN_QUERY_PARAM))}if(Ct!=null)if(this.accessTokenClaims=bt.decodeAccessToken(Ct),this.accessTokenClaims!=null&&this.accessTokenClaims.guestControl!=null){this.log.info("loading guest token"),this.guestProject={collectionId:this.accessTokenClaims.guestControl.collectionId,projectId:this.accessTokenClaims.guestControl.projectId,tokenExchangeRequired:!1};for(let vt of this.accessTokenClaims.user.guestScope)if(vt.collectionId==this.guestProject.collectionId&&vt.projectId==this.guestProject.projectId){this.guestProject.tokenExchangeRequired=vt.requestedScope.length>0,this.log.warn("guest token requires exchange");break}return this.guestProject.tokenExchangeRequired?(this.log.info("exchanging token"),this.LiveApi().setAccessToken(Ct),await this.LiveApi().authentication.refreshAccessToken({})):this.setAccessToken(Ct),this.log.info("auto-loading project = "+JSON.stringify(this.guestProject)),this.guestProject}else this.setAccessToken(Ct);return null}getLiveKitServer(Ct=!1){return Ct?$t[this.env]:Pt[this.env]}parseQuery(){let Ct=window.location.search,vt=new Map,Tt=(Ct[0]==="?"?Ct.substr(1):Ct).split("&");for(let wt=0;wt<Tt.length;wt++){let zt=Tt[wt].split("=");zt.length==2&&(vt.set(decodeURIComponent(zt[0]),decodeURIComponent(zt[1]||"")),this.log.debug(`found query param: ${decodeURIComponent(zt[0])}=${decodeURIComponent(zt[1]||"")}`))}return vt}static decodeAccessToken(Ct){let vt=(0,g.default)(Ct,{header:!1});return ct.AccessToken.fromJSON(vt)}}a.ApiStream=bt,bt.ACCESS_TOKEN_QUERY_PARAM="at"})(lib$2);var dist={},logger={};(function(a){var s=commonjsGlobal&&commonjsGlobal.__importDefault||function(b){return b&&b.__esModule?b:{default:b}};Object.defineProperty(a,"__esModule",{value:!0}),a.setLogLevel=a.LogLevel=void 0;const d=s(loglevel.exports);var c;(function(b){b.trace="trace",b.debug="debug",b.info="info",b.warn="warn",b.error="error",b.silent="silent"})(c=a.LogLevel||(a.LogLevel={}));const m=d.default.getLogger("livekit");m.setLevel(c.info),a.default=m;function g(b){m.setLevel(b)}a.setLogLevel=g})(logger);var livekit_models={},umd={exports:{}};(function(a,s){var d=function(c){Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;/**
 * @license
 * Copyright 2009 The Closure Library Authors
 * Copyright 2020 Daniel Wirtz / The long.js Authors.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * SPDX-License-Identifier: Apache-2.0
 */var m=null;try{m=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function g(Mt,Nt,Ft){this.low=Mt|0,this.high=Nt|0,this.unsigned=!!Ft}g.prototype.__isLong__,Object.defineProperty(g.prototype,"__isLong__",{value:!0});function b(Mt){return(Mt&&Mt.__isLong__)===!0}function k(Mt){var Nt=Math.clz32(Mt&-Mt);return Mt?31-Nt:Nt}g.isLong=b;var et={},nt={};function it(Mt,Nt){var Ft,Wt,Ht;return Nt?(Mt>>>=0,(Ht=0<=Mt&&Mt<256)&&(Wt=nt[Mt],Wt)?Wt:(Ft=st(Mt,0,!0),Ht&&(nt[Mt]=Ft),Ft)):(Mt|=0,(Ht=-128<=Mt&&Mt<128)&&(Wt=et[Mt],Wt)?Wt:(Ft=st(Mt,Mt<0?-1:0,!1),Ht&&(et[Mt]=Ft),Ft))}g.fromInt=it;function ct(Mt,Nt){if(isNaN(Mt))return Nt?Pt:It;if(Nt){if(Mt<0)return Pt;if(Mt>=ot)return vt}else{if(Mt<=-lt)return Tt;if(Mt+1>=lt)return Ct}return Mt<0?ct(-Mt,Nt).neg():st(Mt%_e|0,Mt/_e|0,Nt)}g.fromNumber=ct;function st(Mt,Nt,Ft){return new g(Mt,Nt,Ft)}g.fromBits=st;var ut=Math.pow;function pt(Mt,Nt,Ft){if(Mt.length===0)throw Error("empty string");if(typeof Nt=="number"?(Ft=Nt,Nt=!1):Nt=!!Nt,Mt==="NaN"||Mt==="Infinity"||Mt==="+Infinity"||Mt==="-Infinity")return Nt?Pt:It;if(Ft=Ft||10,Ft<2||36<Ft)throw RangeError("radix");var Wt;if((Wt=Mt.indexOf("-"))>0)throw Error("interior hyphen");if(Wt===0)return pt(Mt.substring(1),Nt,Ft).neg();for(var Ht=ct(ut(Ft,8)),Yt=It,$=0;$<Mt.length;$+=8){var rt=Math.min(8,Mt.length-$),mt=parseInt(Mt.substring($,$+rt),Ft);if(rt<8){var Vt=ct(ut(Ft,rt));Yt=Yt.mul(Vt).add(ct(mt))}else Yt=Yt.mul(Ht),Yt=Yt.add(ct(mt))}return Yt.unsigned=Nt,Yt}g.fromString=pt;function St(Mt,Nt){return typeof Mt=="number"?ct(Mt,Nt):typeof Mt=="string"?pt(Mt,Nt):st(Mt.low,Mt.high,typeof Nt=="boolean"?Nt:Mt.unsigned)}g.fromValue=St;var _t=1<<16,ht=1<<24,_e=_t*_t,ot=_e*_e,lt=ot/2,Ot=it(ht),It=it(0);g.ZERO=It;var Pt=it(0,!0);g.UZERO=Pt;var $t=it(1);g.ONE=$t;var bt=it(1,!0);g.UONE=bt;var Rt=it(-1);g.NEG_ONE=Rt;var Ct=st(-1,2147483647,!1);g.MAX_VALUE=Ct;var vt=st(-1,-1,!0);g.MAX_UNSIGNED_VALUE=vt;var Tt=st(0,-2147483648,!1);g.MIN_VALUE=Tt;var wt=g.prototype;wt.toInt=function(){return this.unsigned?this.low>>>0:this.low},wt.toNumber=function(){return this.unsigned?(this.high>>>0)*_e+(this.low>>>0):this.high*_e+(this.low>>>0)},wt.toString=function(Nt){if(Nt=Nt||10,Nt<2||36<Nt)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(Tt)){var Ft=ct(Nt),Wt=this.div(Ft),Ht=Wt.mul(Ft).sub(this);return Wt.toString(Nt)+Ht.toInt().toString(Nt)}else return"-"+this.neg().toString(Nt);for(var Yt=ct(ut(Nt,6),this.unsigned),$=this,rt="";;){var mt=$.div(Yt),Vt=$.sub(mt.mul(Yt)).toInt()>>>0,at=Vt.toString(Nt);if($=mt,$.isZero())return at+rt;for(;at.length<6;)at="0"+at;rt=""+at+rt}},wt.getHighBits=function(){return this.high},wt.getHighBitsUnsigned=function(){return this.high>>>0},wt.getLowBits=function(){return this.low},wt.getLowBitsUnsigned=function(){return this.low>>>0},wt.getNumBitsAbs=function(){if(this.isNegative())return this.eq(Tt)?64:this.neg().getNumBitsAbs();for(var Nt=this.high!=0?this.high:this.low,Ft=31;Ft>0&&(Nt&1<<Ft)==0;Ft--);return this.high!=0?Ft+33:Ft+1},wt.isZero=function(){return this.high===0&&this.low===0},wt.eqz=wt.isZero,wt.isNegative=function(){return!this.unsigned&&this.high<0},wt.isPositive=function(){return this.unsigned||this.high>=0},wt.isOdd=function(){return(this.low&1)===1},wt.isEven=function(){return(this.low&1)===0},wt.equals=function(Nt){return b(Nt)||(Nt=St(Nt)),this.unsigned!==Nt.unsigned&&this.high>>>31===1&&Nt.high>>>31===1?!1:this.high===Nt.high&&this.low===Nt.low},wt.eq=wt.equals,wt.notEquals=function(Nt){return!this.eq(Nt)},wt.neq=wt.notEquals,wt.ne=wt.notEquals,wt.lessThan=function(Nt){return this.comp(Nt)<0},wt.lt=wt.lessThan,wt.lessThanOrEqual=function(Nt){return this.comp(Nt)<=0},wt.lte=wt.lessThanOrEqual,wt.le=wt.lessThanOrEqual,wt.greaterThan=function(Nt){return this.comp(Nt)>0},wt.gt=wt.greaterThan,wt.greaterThanOrEqual=function(Nt){return this.comp(Nt)>=0},wt.gte=wt.greaterThanOrEqual,wt.ge=wt.greaterThanOrEqual,wt.compare=function(Nt){if(b(Nt)||(Nt=St(Nt)),this.eq(Nt))return 0;var Ft=this.isNegative(),Wt=Nt.isNegative();return Ft&&!Wt?-1:!Ft&&Wt?1:this.unsigned?Nt.high>>>0>this.high>>>0||Nt.high===this.high&&Nt.low>>>0>this.low>>>0?-1:1:this.sub(Nt).isNegative()?-1:1},wt.comp=wt.compare,wt.negate=function(){return!this.unsigned&&this.eq(Tt)?Tt:this.not().add($t)},wt.neg=wt.negate,wt.add=function(Nt){b(Nt)||(Nt=St(Nt));var Ft=this.high>>>16,Wt=this.high&65535,Ht=this.low>>>16,Yt=this.low&65535,$=Nt.high>>>16,rt=Nt.high&65535,mt=Nt.low>>>16,Vt=Nt.low&65535,at=0,yt=0,Dt=0,Gt=0;return Gt+=Yt+Vt,Dt+=Gt>>>16,Gt&=65535,Dt+=Ht+mt,yt+=Dt>>>16,Dt&=65535,yt+=Wt+rt,at+=yt>>>16,yt&=65535,at+=Ft+$,at&=65535,st(Dt<<16|Gt,at<<16|yt,this.unsigned)},wt.subtract=function(Nt){return b(Nt)||(Nt=St(Nt)),this.add(Nt.neg())},wt.sub=wt.subtract,wt.multiply=function(Nt){if(this.isZero())return this;if(b(Nt)||(Nt=St(Nt)),m){var Ft=m.mul(this.low,this.high,Nt.low,Nt.high);return st(Ft,m.get_high(),this.unsigned)}if(Nt.isZero())return this.unsigned?Pt:It;if(this.eq(Tt))return Nt.isOdd()?Tt:It;if(Nt.eq(Tt))return this.isOdd()?Tt:It;if(this.isNegative())return Nt.isNegative()?this.neg().mul(Nt.neg()):this.neg().mul(Nt).neg();if(Nt.isNegative())return this.mul(Nt.neg()).neg();if(this.lt(Ot)&&Nt.lt(Ot))return ct(this.toNumber()*Nt.toNumber(),this.unsigned);var Wt=this.high>>>16,Ht=this.high&65535,Yt=this.low>>>16,$=this.low&65535,rt=Nt.high>>>16,mt=Nt.high&65535,Vt=Nt.low>>>16,at=Nt.low&65535,yt=0,Dt=0,Gt=0,Bt=0;return Bt+=$*at,Gt+=Bt>>>16,Bt&=65535,Gt+=Yt*at,Dt+=Gt>>>16,Gt&=65535,Gt+=$*Vt,Dt+=Gt>>>16,Gt&=65535,Dt+=Ht*at,yt+=Dt>>>16,Dt&=65535,Dt+=Yt*Vt,yt+=Dt>>>16,Dt&=65535,Dt+=$*mt,yt+=Dt>>>16,Dt&=65535,yt+=Wt*at+Ht*Vt+Yt*mt+$*rt,yt&=65535,st(Gt<<16|Bt,yt<<16|Dt,this.unsigned)},wt.mul=wt.multiply,wt.divide=function(Nt){if(b(Nt)||(Nt=St(Nt)),Nt.isZero())throw Error("division by zero");if(m){if(!this.unsigned&&this.high===-2147483648&&Nt.low===-1&&Nt.high===-1)return this;var Ft=(this.unsigned?m.div_u:m.div_s)(this.low,this.high,Nt.low,Nt.high);return st(Ft,m.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?Pt:It;var Wt,Ht,Yt;if(this.unsigned){if(Nt.unsigned||(Nt=Nt.toUnsigned()),Nt.gt(this))return Pt;if(Nt.gt(this.shru(1)))return bt;Yt=Pt}else{if(this.eq(Tt)){if(Nt.eq($t)||Nt.eq(Rt))return Tt;if(Nt.eq(Tt))return $t;var $=this.shr(1);return Wt=$.div(Nt).shl(1),Wt.eq(It)?Nt.isNegative()?$t:Rt:(Ht=this.sub(Nt.mul(Wt)),Yt=Wt.add(Ht.div(Nt)),Yt)}else if(Nt.eq(Tt))return this.unsigned?Pt:It;if(this.isNegative())return Nt.isNegative()?this.neg().div(Nt.neg()):this.neg().div(Nt).neg();if(Nt.isNegative())return this.div(Nt.neg()).neg();Yt=It}for(Ht=this;Ht.gte(Nt);){Wt=Math.max(1,Math.floor(Ht.toNumber()/Nt.toNumber()));for(var rt=Math.ceil(Math.log(Wt)/Math.LN2),mt=rt<=48?1:ut(2,rt-48),Vt=ct(Wt),at=Vt.mul(Nt);at.isNegative()||at.gt(Ht);)Wt-=mt,Vt=ct(Wt,this.unsigned),at=Vt.mul(Nt);Vt.isZero()&&(Vt=$t),Yt=Yt.add(Vt),Ht=Ht.sub(at)}return Yt},wt.div=wt.divide,wt.modulo=function(Nt){if(b(Nt)||(Nt=St(Nt)),m){var Ft=(this.unsigned?m.rem_u:m.rem_s)(this.low,this.high,Nt.low,Nt.high);return st(Ft,m.get_high(),this.unsigned)}return this.sub(this.div(Nt).mul(Nt))},wt.mod=wt.modulo,wt.rem=wt.modulo,wt.not=function(){return st(~this.low,~this.high,this.unsigned)},wt.countLeadingZeros=function(){return this.high?Math.clz32(this.high):Math.clz32(this.low)+32},wt.clz=wt.countLeadingZeros,wt.countTrailingZeros=function(){return this.low?k(this.low):k(this.high)+32},wt.ctz=wt.countTrailingZeros,wt.and=function(Nt){return b(Nt)||(Nt=St(Nt)),st(this.low&Nt.low,this.high&Nt.high,this.unsigned)},wt.or=function(Nt){return b(Nt)||(Nt=St(Nt)),st(this.low|Nt.low,this.high|Nt.high,this.unsigned)},wt.xor=function(Nt){return b(Nt)||(Nt=St(Nt)),st(this.low^Nt.low,this.high^Nt.high,this.unsigned)},wt.shiftLeft=function(Nt){return b(Nt)&&(Nt=Nt.toInt()),(Nt&=63)===0?this:Nt<32?st(this.low<<Nt,this.high<<Nt|this.low>>>32-Nt,this.unsigned):st(0,this.low<<Nt-32,this.unsigned)},wt.shl=wt.shiftLeft,wt.shiftRight=function(Nt){return b(Nt)&&(Nt=Nt.toInt()),(Nt&=63)===0?this:Nt<32?st(this.low>>>Nt|this.high<<32-Nt,this.high>>Nt,this.unsigned):st(this.high>>Nt-32,this.high>=0?0:-1,this.unsigned)},wt.shr=wt.shiftRight,wt.shiftRightUnsigned=function(Nt){return b(Nt)&&(Nt=Nt.toInt()),(Nt&=63)===0?this:Nt<32?st(this.low>>>Nt|this.high<<32-Nt,this.high>>>Nt,this.unsigned):Nt===32?st(this.high,0,this.unsigned):st(this.high>>>Nt-32,0,this.unsigned)},wt.shru=wt.shiftRightUnsigned,wt.shr_u=wt.shiftRightUnsigned,wt.rotateLeft=function(Nt){var Ft;return b(Nt)&&(Nt=Nt.toInt()),(Nt&=63)===0?this:Nt===32?st(this.high,this.low,this.unsigned):Nt<32?(Ft=32-Nt,st(this.low<<Nt|this.high>>>Ft,this.high<<Nt|this.low>>>Ft,this.unsigned)):(Nt-=32,Ft=32-Nt,st(this.high<<Nt|this.low>>>Ft,this.low<<Nt|this.high>>>Ft,this.unsigned))},wt.rotl=wt.rotateLeft,wt.rotateRight=function(Nt){var Ft;return b(Nt)&&(Nt=Nt.toInt()),(Nt&=63)===0?this:Nt===32?st(this.high,this.low,this.unsigned):Nt<32?(Ft=32-Nt,st(this.high<<Ft|this.low>>>Nt,this.low<<Ft|this.high>>>Nt,this.unsigned)):(Nt-=32,Ft=32-Nt,st(this.low<<Ft|this.high>>>Nt,this.high<<Ft|this.low>>>Nt,this.unsigned))},wt.rotr=wt.rotateRight,wt.toSigned=function(){return this.unsigned?st(this.low,this.high,!1):this},wt.toUnsigned=function(){return this.unsigned?this:st(this.low,this.high,!0)},wt.toBytes=function(Nt){return Nt?this.toBytesLE():this.toBytesBE()},wt.toBytesLE=function(){var Nt=this.high,Ft=this.low;return[Ft&255,Ft>>>8&255,Ft>>>16&255,Ft>>>24,Nt&255,Nt>>>8&255,Nt>>>16&255,Nt>>>24]},wt.toBytesBE=function(){var Nt=this.high,Ft=this.low;return[Nt>>>24,Nt>>>16&255,Nt>>>8&255,Nt&255,Ft>>>24,Ft>>>16&255,Ft>>>8&255,Ft&255]},g.fromBytes=function(Nt,Ft,Wt){return Wt?g.fromBytesLE(Nt,Ft):g.fromBytesBE(Nt,Ft)},g.fromBytesLE=function(Nt,Ft){return new g(Nt[0]|Nt[1]<<8|Nt[2]<<16|Nt[3]<<24,Nt[4]|Nt[5]<<8|Nt[6]<<16|Nt[7]<<24,Ft)},g.fromBytesBE=function(Nt,Ft){return new g(Nt[4]<<24|Nt[5]<<16|Nt[6]<<8|Nt[7],Nt[0]<<24|Nt[1]<<16|Nt[2]<<8|Nt[3],Ft)};var zt=g;return c.default=zt,"default"in c?c.default:c}({});a.exports=d})(umd);var indexMinimal={},minimal$1={},aspromise=asPromise;function asPromise(a,s){for(var d=new Array(arguments.length-1),c=0,m=2,g=!0;m<arguments.length;)d[c++]=arguments[m++];return new Promise(function(k,et){d[c]=function(it){if(g)if(g=!1,it)et(it);else{for(var ct=new Array(arguments.length-1),st=0;st<ct.length;)ct[st++]=arguments[st];k.apply(null,ct)}};try{a.apply(s||null,d)}catch(nt){g&&(g=!1,et(nt))}})}var base64$1={};(function(a){var s=a;s.length=function(k){var et=k.length;if(!et)return 0;for(var nt=0;--et%4>1&&k.charAt(et)==="=";)++nt;return Math.ceil(k.length*3)/4-nt};for(var d=new Array(64),c=new Array(123),m=0;m<64;)c[d[m]=m<26?m+65:m<52?m+71:m<62?m-4:m-59|43]=m++;s.encode=function(k,et,nt){for(var it=null,ct=[],st=0,ut=0,pt;et<nt;){var St=k[et++];switch(ut){case 0:ct[st++]=d[St>>2],pt=(St&3)<<4,ut=1;break;case 1:ct[st++]=d[pt|St>>4],pt=(St&15)<<2,ut=2;break;case 2:ct[st++]=d[pt|St>>6],ct[st++]=d[St&63],ut=0;break}st>8191&&((it||(it=[])).push(String.fromCharCode.apply(String,ct)),st=0)}return ut&&(ct[st++]=d[pt],ct[st++]=61,ut===1&&(ct[st++]=61)),it?(st&&it.push(String.fromCharCode.apply(String,ct.slice(0,st))),it.join("")):String.fromCharCode.apply(String,ct.slice(0,st))};var g="invalid encoding";s.decode=function(k,et,nt){for(var it=nt,ct=0,st,ut=0;ut<k.length;){var pt=k.charCodeAt(ut++);if(pt===61&&ct>1)break;if((pt=c[pt])===void 0)throw Error(g);switch(ct){case 0:st=pt,ct=1;break;case 1:et[nt++]=st<<2|(pt&48)>>4,st=pt,ct=2;break;case 2:et[nt++]=(st&15)<<4|(pt&60)>>2,st=pt,ct=3;break;case 3:et[nt++]=(st&3)<<6|pt,ct=0;break}}if(ct===1)throw Error(g);return nt-it},s.test=function(k){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(k)}})(base64$1);var eventemitter=EventEmitter$1;function EventEmitter$1(){this._listeners={}}EventEmitter$1.prototype.on=function a(s,d,c){return(this._listeners[s]||(this._listeners[s]=[])).push({fn:d,ctx:c||this}),this};EventEmitter$1.prototype.off=function a(s,d){if(s===void 0)this._listeners={};else if(d===void 0)this._listeners[s]=[];else for(var c=this._listeners[s],m=0;m<c.length;)c[m].fn===d?c.splice(m,1):++m;return this};EventEmitter$1.prototype.emit=function a(s){var d=this._listeners[s];if(d){for(var c=[],m=1;m<arguments.length;)c.push(arguments[m++]);for(m=0;m<d.length;)d[m].fn.apply(d[m++].ctx,c)}return this};var float=factory(factory);function factory(a){return typeof Float32Array!="undefined"?function(){var s=new Float32Array([-0]),d=new Uint8Array(s.buffer),c=d[3]===128;function m(et,nt,it){s[0]=et,nt[it]=d[0],nt[it+1]=d[1],nt[it+2]=d[2],nt[it+3]=d[3]}function g(et,nt,it){s[0]=et,nt[it]=d[3],nt[it+1]=d[2],nt[it+2]=d[1],nt[it+3]=d[0]}a.writeFloatLE=c?m:g,a.writeFloatBE=c?g:m;function b(et,nt){return d[0]=et[nt],d[1]=et[nt+1],d[2]=et[nt+2],d[3]=et[nt+3],s[0]}function k(et,nt){return d[3]=et[nt],d[2]=et[nt+1],d[1]=et[nt+2],d[0]=et[nt+3],s[0]}a.readFloatLE=c?b:k,a.readFloatBE=c?k:b}():function(){function s(c,m,g,b){var k=m<0?1:0;if(k&&(m=-m),m===0)c(1/m>0?0:2147483648,g,b);else if(isNaN(m))c(2143289344,g,b);else if(m>34028234663852886e22)c((k<<31|2139095040)>>>0,g,b);else if(m<11754943508222875e-54)c((k<<31|Math.round(m/1401298464324817e-60))>>>0,g,b);else{var et=Math.floor(Math.log(m)/Math.LN2),nt=Math.round(m*Math.pow(2,-et)*8388608)&8388607;c((k<<31|et+127<<23|nt)>>>0,g,b)}}a.writeFloatLE=s.bind(null,writeUintLE),a.writeFloatBE=s.bind(null,writeUintBE);function d(c,m,g){var b=c(m,g),k=(b>>31)*2+1,et=b>>>23&255,nt=b&8388607;return et===255?nt?NaN:k*(1/0):et===0?k*1401298464324817e-60*nt:k*Math.pow(2,et-150)*(nt+8388608)}a.readFloatLE=d.bind(null,readUintLE),a.readFloatBE=d.bind(null,readUintBE)}(),typeof Float64Array!="undefined"?function(){var s=new Float64Array([-0]),d=new Uint8Array(s.buffer),c=d[7]===128;function m(et,nt,it){s[0]=et,nt[it]=d[0],nt[it+1]=d[1],nt[it+2]=d[2],nt[it+3]=d[3],nt[it+4]=d[4],nt[it+5]=d[5],nt[it+6]=d[6],nt[it+7]=d[7]}function g(et,nt,it){s[0]=et,nt[it]=d[7],nt[it+1]=d[6],nt[it+2]=d[5],nt[it+3]=d[4],nt[it+4]=d[3],nt[it+5]=d[2],nt[it+6]=d[1],nt[it+7]=d[0]}a.writeDoubleLE=c?m:g,a.writeDoubleBE=c?g:m;function b(et,nt){return d[0]=et[nt],d[1]=et[nt+1],d[2]=et[nt+2],d[3]=et[nt+3],d[4]=et[nt+4],d[5]=et[nt+5],d[6]=et[nt+6],d[7]=et[nt+7],s[0]}function k(et,nt){return d[7]=et[nt],d[6]=et[nt+1],d[5]=et[nt+2],d[4]=et[nt+3],d[3]=et[nt+4],d[2]=et[nt+5],d[1]=et[nt+6],d[0]=et[nt+7],s[0]}a.readDoubleLE=c?b:k,a.readDoubleBE=c?k:b}():function(){function s(c,m,g,b,k,et){var nt=b<0?1:0;if(nt&&(b=-b),b===0)c(0,k,et+m),c(1/b>0?0:2147483648,k,et+g);else if(isNaN(b))c(0,k,et+m),c(2146959360,k,et+g);else if(b>17976931348623157e292)c(0,k,et+m),c((nt<<31|2146435072)>>>0,k,et+g);else{var it;if(b<22250738585072014e-324)it=b/5e-324,c(it>>>0,k,et+m),c((nt<<31|it/4294967296)>>>0,k,et+g);else{var ct=Math.floor(Math.log(b)/Math.LN2);ct===1024&&(ct=1023),it=b*Math.pow(2,-ct),c(it*4503599627370496>>>0,k,et+m),c((nt<<31|ct+1023<<20|it*1048576&1048575)>>>0,k,et+g)}}}a.writeDoubleLE=s.bind(null,writeUintLE,0,4),a.writeDoubleBE=s.bind(null,writeUintBE,4,0);function d(c,m,g,b,k){var et=c(b,k+m),nt=c(b,k+g),it=(nt>>31)*2+1,ct=nt>>>20&2047,st=4294967296*(nt&1048575)+et;return ct===2047?st?NaN:it*(1/0):ct===0?it*5e-324*st:it*Math.pow(2,ct-1075)*(st+4503599627370496)}a.readDoubleLE=d.bind(null,readUintLE,0,4),a.readDoubleBE=d.bind(null,readUintBE,4,0)}(),a}function writeUintLE(a,s,d){s[d]=a&255,s[d+1]=a>>>8&255,s[d+2]=a>>>16&255,s[d+3]=a>>>24}function writeUintBE(a,s,d){s[d]=a>>>24,s[d+1]=a>>>16&255,s[d+2]=a>>>8&255,s[d+3]=a&255}function readUintLE(a,s){return(a[s]|a[s+1]<<8|a[s+2]<<16|a[s+3]<<24)>>>0}function readUintBE(a,s){return(a[s]<<24|a[s+1]<<16|a[s+2]<<8|a[s+3])>>>0}var inquire_1=inquire;function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(a){}return null}var utf8$2={};(function(a){var s=a;s.length=function(c){for(var m=0,g=0,b=0;b<c.length;++b)g=c.charCodeAt(b),g<128?m+=1:g<2048?m+=2:(g&64512)===55296&&(c.charCodeAt(b+1)&64512)===56320?(++b,m+=4):m+=3;return m},s.read=function(c,m,g){var b=g-m;if(b<1)return"";for(var k=null,et=[],nt=0,it;m<g;)it=c[m++],it<128?et[nt++]=it:it>191&&it<224?et[nt++]=(it&31)<<6|c[m++]&63:it>239&&it<365?(it=((it&7)<<18|(c[m++]&63)<<12|(c[m++]&63)<<6|c[m++]&63)-65536,et[nt++]=55296+(it>>10),et[nt++]=56320+(it&1023)):et[nt++]=(it&15)<<12|(c[m++]&63)<<6|c[m++]&63,nt>8191&&((k||(k=[])).push(String.fromCharCode.apply(String,et)),nt=0);return k?(nt&&k.push(String.fromCharCode.apply(String,et.slice(0,nt))),k.join("")):String.fromCharCode.apply(String,et.slice(0,nt))},s.write=function(c,m,g){for(var b=g,k,et,nt=0;nt<c.length;++nt)k=c.charCodeAt(nt),k<128?m[g++]=k:k<2048?(m[g++]=k>>6|192,m[g++]=k&63|128):(k&64512)===55296&&((et=c.charCodeAt(nt+1))&64512)===56320?(k=65536+((k&1023)<<10)+(et&1023),++nt,m[g++]=k>>18|240,m[g++]=k>>12&63|128,m[g++]=k>>6&63|128,m[g++]=k&63|128):(m[g++]=k>>12|224,m[g++]=k>>6&63|128,m[g++]=k&63|128);return g-b}})(utf8$2);var pool_1=pool;function pool(a,s,d){var c=d||8192,m=c>>>1,g=null,b=c;return function(et){if(et<1||et>m)return a(et);b+et>c&&(g=a(c),b=0);var nt=s.call(g,b,b+=et);return b&7&&(b=(b|7)+1),nt}}var longbits=LongBits$2,util$5=minimal$1;function LongBits$2(a,s){this.lo=a>>>0,this.hi=s>>>0}var zero=LongBits$2.zero=new LongBits$2(0,0);zero.toNumber=function(){return 0};zero.zzEncode=zero.zzDecode=function(){return this};zero.length=function(){return 1};var zeroHash=LongBits$2.zeroHash="\0\0\0\0\0\0\0\0";LongBits$2.fromNumber=function a(s){if(s===0)return zero;var d=s<0;d&&(s=-s);var c=s>>>0,m=(s-c)/4294967296>>>0;return d&&(m=~m>>>0,c=~c>>>0,++c>4294967295&&(c=0,++m>4294967295&&(m=0))),new LongBits$2(c,m)};LongBits$2.from=function a(s){if(typeof s=="number")return LongBits$2.fromNumber(s);if(util$5.isString(s))if(util$5.Long)s=util$5.Long.fromString(s);else return LongBits$2.fromNumber(parseInt(s,10));return s.low||s.high?new LongBits$2(s.low>>>0,s.high>>>0):zero};LongBits$2.prototype.toNumber=function a(s){if(!s&&this.hi>>>31){var d=~this.lo+1>>>0,c=~this.hi>>>0;return d||(c=c+1>>>0),-(d+c*4294967296)}return this.lo+this.hi*4294967296};LongBits$2.prototype.toLong=function a(s){return util$5.Long?new util$5.Long(this.lo|0,this.hi|0,Boolean(s)):{low:this.lo|0,high:this.hi|0,unsigned:Boolean(s)}};var charCodeAt=String.prototype.charCodeAt;LongBits$2.fromHash=function a(s){return s===zeroHash?zero:new LongBits$2((charCodeAt.call(s,0)|charCodeAt.call(s,1)<<8|charCodeAt.call(s,2)<<16|charCodeAt.call(s,3)<<24)>>>0,(charCodeAt.call(s,4)|charCodeAt.call(s,5)<<8|charCodeAt.call(s,6)<<16|charCodeAt.call(s,7)<<24)>>>0)};LongBits$2.prototype.toHash=function a(){return String.fromCharCode(this.lo&255,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,this.hi&255,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)};LongBits$2.prototype.zzEncode=function a(){var s=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^s)>>>0,this.lo=(this.lo<<1^s)>>>0,this};LongBits$2.prototype.zzDecode=function a(){var s=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^s)>>>0,this.hi=(this.hi>>>1^s)>>>0,this};LongBits$2.prototype.length=function a(){var s=this.lo,d=(this.lo>>>28|this.hi<<4)>>>0,c=this.hi>>>24;return c===0?d===0?s<16384?s<128?1:2:s<2097152?3:4:d<16384?d<128?5:6:d<2097152?7:8:c<128?9:10};(function(a){var s=a;s.asPromise=aspromise,s.base64=base64$1,s.EventEmitter=eventemitter,s.float=float,s.inquire=inquire_1,s.utf8=utf8$2,s.pool=pool_1,s.LongBits=longbits,s.isNode=Boolean(typeof commonjsGlobal!="undefined"&&commonjsGlobal&&commonjsGlobal.process&&commonjsGlobal.process.versions&&commonjsGlobal.process.versions.node),s.global=s.isNode&&commonjsGlobal||typeof window!="undefined"&&window||typeof self!="undefined"&&self||commonjsGlobal,s.emptyArray=Object.freeze?Object.freeze([]):[],s.emptyObject=Object.freeze?Object.freeze({}):{},s.isInteger=Number.isInteger||function(g){return typeof g=="number"&&isFinite(g)&&Math.floor(g)===g},s.isString=function(g){return typeof g=="string"||g instanceof String},s.isObject=function(g){return g&&typeof g=="object"},s.isset=s.isSet=function(g,b){var k=g[b];return k!=null&&g.hasOwnProperty(b)?typeof k!="object"||(Array.isArray(k)?k.length:Object.keys(k).length)>0:!1},s.Buffer=function(){try{var m=s.inquire("buffer").Buffer;return m.prototype.utf8Write?m:null}catch{return null}}(),s._Buffer_from=null,s._Buffer_allocUnsafe=null,s.newBuffer=function(g){return typeof g=="number"?s.Buffer?s._Buffer_allocUnsafe(g):new s.Array(g):s.Buffer?s._Buffer_from(g):typeof Uint8Array=="undefined"?g:new Uint8Array(g)},s.Array=typeof Uint8Array!="undefined"?Uint8Array:Array,s.Long=s.global.dcodeIO&&s.global.dcodeIO.Long||s.global.Long||s.inquire("long"),s.key2Re=/^true|false|0|1$/,s.key32Re=/^-?(?:0|[1-9][0-9]*)$/,s.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,s.longToHash=function(g){return g?s.LongBits.from(g).toHash():s.LongBits.zeroHash},s.longFromHash=function(g,b){var k=s.LongBits.fromHash(g);return s.Long?s.Long.fromBits(k.lo,k.hi,b):k.toNumber(Boolean(b))};function d(m,g,b){for(var k=Object.keys(g),et=0;et<k.length;++et)(m[k[et]]===void 0||!b)&&(m[k[et]]=g[k[et]]);return m}s.merge=d,s.lcFirst=function(g){return g.charAt(0).toLowerCase()+g.substring(1)};function c(m){function g(b,k){if(!(this instanceof g))return new g(b,k);Object.defineProperty(this,"message",{get:function(){return b}}),Error.captureStackTrace?Error.captureStackTrace(this,g):Object.defineProperty(this,"stack",{value:new Error().stack||""}),k&&d(this,k)}return(g.prototype=Object.create(Error.prototype)).constructor=g,Object.defineProperty(g.prototype,"name",{get:function(){return m}}),g.prototype.toString=function(){return this.name+": "+this.message},g}s.newError=c,s.ProtocolError=c("ProtocolError"),s.oneOfGetter=function(g){for(var b={},k=0;k<g.length;++k)b[g[k]]=1;return function(){for(var et=Object.keys(this),nt=et.length-1;nt>-1;--nt)if(b[et[nt]]===1&&this[et[nt]]!==void 0&&this[et[nt]]!==null)return et[nt]}},s.oneOfSetter=function(g){return function(b){for(var k=0;k<g.length;++k)g[k]!==b&&delete this[g[k]]}},s.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},s._configure=function(){var m=s.Buffer;if(!m){s._Buffer_from=s._Buffer_allocUnsafe=null;return}s._Buffer_from=m.from!==Uint8Array.from&&m.from||function(b,k){return new m(b,k)},s._Buffer_allocUnsafe=m.allocUnsafe||function(b){return new m(b)}}})(minimal$1);var writer=Writer$1,util$4=minimal$1,BufferWriter$1,LongBits$1=util$4.LongBits,base64=util$4.base64,utf8$1=util$4.utf8;function Op(a,s,d){this.fn=a,this.len=s,this.next=void 0,this.val=d}function noop(){}function State(a){this.head=a.head,this.tail=a.tail,this.len=a.len,this.next=a.states}function Writer$1(){this.len=0,this.head=new Op(noop,0,0),this.tail=this.head,this.states=null}var create$3=function a(){return util$4.Buffer?function(){return(Writer$1.create=function(){return new BufferWriter$1})()}:function(){return new Writer$1}};Writer$1.create=create$3();Writer$1.alloc=function a(s){return new util$4.Array(s)};util$4.Array!==Array&&(Writer$1.alloc=util$4.pool(Writer$1.alloc,util$4.Array.prototype.subarray));Writer$1.prototype._push=function a(s,d,c){return this.tail=this.tail.next=new Op(s,d,c),this.len+=d,this};function writeByte(a,s,d){s[d]=a&255}function writeVarint32(a,s,d){for(;a>127;)s[d++]=a&127|128,a>>>=7;s[d]=a}function VarintOp(a,s){this.len=a,this.next=void 0,this.val=s}VarintOp.prototype=Object.create(Op.prototype);VarintOp.prototype.fn=writeVarint32;Writer$1.prototype.uint32=function a(s){return this.len+=(this.tail=this.tail.next=new VarintOp((s=s>>>0)<128?1:s<16384?2:s<2097152?3:s<268435456?4:5,s)).len,this};Writer$1.prototype.int32=function a(s){return s<0?this._push(writeVarint64,10,LongBits$1.fromNumber(s)):this.uint32(s)};Writer$1.prototype.sint32=function a(s){return this.uint32((s<<1^s>>31)>>>0)};function writeVarint64(a,s,d){for(;a.hi;)s[d++]=a.lo&127|128,a.lo=(a.lo>>>7|a.hi<<25)>>>0,a.hi>>>=7;for(;a.lo>127;)s[d++]=a.lo&127|128,a.lo=a.lo>>>7;s[d++]=a.lo}Writer$1.prototype.uint64=function a(s){var d=LongBits$1.from(s);return this._push(writeVarint64,d.length(),d)};Writer$1.prototype.int64=Writer$1.prototype.uint64;Writer$1.prototype.sint64=function a(s){var d=LongBits$1.from(s).zzEncode();return this._push(writeVarint64,d.length(),d)};Writer$1.prototype.bool=function a(s){return this._push(writeByte,1,s?1:0)};function writeFixed32(a,s,d){s[d]=a&255,s[d+1]=a>>>8&255,s[d+2]=a>>>16&255,s[d+3]=a>>>24}Writer$1.prototype.fixed32=function a(s){return this._push(writeFixed32,4,s>>>0)};Writer$1.prototype.sfixed32=Writer$1.prototype.fixed32;Writer$1.prototype.fixed64=function a(s){var d=LongBits$1.from(s);return this._push(writeFixed32,4,d.lo)._push(writeFixed32,4,d.hi)};Writer$1.prototype.sfixed64=Writer$1.prototype.fixed64;Writer$1.prototype.float=function a(s){return this._push(util$4.float.writeFloatLE,4,s)};Writer$1.prototype.double=function a(s){return this._push(util$4.float.writeDoubleLE,8,s)};var writeBytes=util$4.Array.prototype.set?function a(s,d,c){d.set(s,c)}:function a(s,d,c){for(var m=0;m<s.length;++m)d[c+m]=s[m]};Writer$1.prototype.bytes=function a(s){var d=s.length>>>0;if(!d)return this._push(writeByte,1,0);if(util$4.isString(s)){var c=Writer$1.alloc(d=base64.length(s));base64.decode(s,c,0),s=c}return this.uint32(d)._push(writeBytes,d,s)};Writer$1.prototype.string=function a(s){var d=utf8$1.length(s);return d?this.uint32(d)._push(utf8$1.write,d,s):this._push(writeByte,1,0)};Writer$1.prototype.fork=function a(){return this.states=new State(this),this.head=this.tail=new Op(noop,0,0),this.len=0,this};Writer$1.prototype.reset=function a(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new Op(noop,0,0),this.len=0),this};Writer$1.prototype.ldelim=function a(){var s=this.head,d=this.tail,c=this.len;return this.reset().uint32(c),c&&(this.tail.next=s.next,this.tail=d,this.len+=c),this};Writer$1.prototype.finish=function a(){for(var s=this.head.next,d=this.constructor.alloc(this.len),c=0;s;)s.fn(s.val,d,c),c+=s.len,s=s.next;return d};Writer$1._configure=function(a){BufferWriter$1=a,Writer$1.create=create$3(),BufferWriter$1._configure()};var writer_buffer=BufferWriter,Writer=writer;(BufferWriter.prototype=Object.create(Writer.prototype)).constructor=BufferWriter;var util$3=minimal$1;function BufferWriter(){Writer.call(this)}BufferWriter._configure=function(){BufferWriter.alloc=util$3._Buffer_allocUnsafe,BufferWriter.writeBytesBuffer=util$3.Buffer&&util$3.Buffer.prototype instanceof Uint8Array&&util$3.Buffer.prototype.set.name==="set"?function(s,d,c){d.set(s,c)}:function(s,d,c){if(s.copy)s.copy(d,c,0,s.length);else for(var m=0;m<s.length;)d[c++]=s[m++]}};BufferWriter.prototype.bytes=function a(s){util$3.isString(s)&&(s=util$3._Buffer_from(s,"base64"));var d=s.length>>>0;return this.uint32(d),d&&this._push(BufferWriter.writeBytesBuffer,d,s),this};function writeStringBuffer(a,s,d){a.length<40?util$3.utf8.write(a,s,d):s.utf8Write?s.utf8Write(a,d):s.write(a,d)}BufferWriter.prototype.string=function a(s){var d=util$3.Buffer.byteLength(s);return this.uint32(d),d&&this._push(writeStringBuffer,d,s),this};BufferWriter._configure();var reader=Reader$1,util$2=minimal$1,BufferReader$1,LongBits=util$2.LongBits,utf8=util$2.utf8;function indexOutOfRange(a,s){return RangeError("index out of range: "+a.pos+" + "+(s||1)+" > "+a.len)}function Reader$1(a){this.buf=a,this.pos=0,this.len=a.length}var create_array=typeof Uint8Array!="undefined"?function a(s){if(s instanceof Uint8Array||Array.isArray(s))return new Reader$1(s);throw Error("illegal buffer")}:function a(s){if(Array.isArray(s))return new Reader$1(s);throw Error("illegal buffer")},create$2=function a(){return util$2.Buffer?function(d){return(Reader$1.create=function(m){return util$2.Buffer.isBuffer(m)?new BufferReader$1(m):create_array(m)})(d)}:create_array};Reader$1.create=create$2();Reader$1.prototype._slice=util$2.Array.prototype.subarray||util$2.Array.prototype.slice;Reader$1.prototype.uint32=function a(){var s=4294967295;return function(){if(s=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(s=(s|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(s=(s|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(s=(s|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(s=(s|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return s;if((this.pos+=5)>this.len)throw this.pos=this.len,indexOutOfRange(this,10);return s}}();Reader$1.prototype.int32=function a(){return this.uint32()|0};Reader$1.prototype.sint32=function a(){var s=this.uint32();return s>>>1^-(s&1)|0};function readLongVarint(){var a=new LongBits(0,0),s=0;if(this.len-this.pos>4){for(;s<4;++s)if(a.lo=(a.lo|(this.buf[this.pos]&127)<<s*7)>>>0,this.buf[this.pos++]<128)return a;if(a.lo=(a.lo|(this.buf[this.pos]&127)<<28)>>>0,a.hi=(a.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return a;s=0}else{for(;s<3;++s){if(this.pos>=this.len)throw indexOutOfRange(this);if(a.lo=(a.lo|(this.buf[this.pos]&127)<<s*7)>>>0,this.buf[this.pos++]<128)return a}return a.lo=(a.lo|(this.buf[this.pos++]&127)<<s*7)>>>0,a}if(this.len-this.pos>4){for(;s<5;++s)if(a.hi=(a.hi|(this.buf[this.pos]&127)<<s*7+3)>>>0,this.buf[this.pos++]<128)return a}else for(;s<5;++s){if(this.pos>=this.len)throw indexOutOfRange(this);if(a.hi=(a.hi|(this.buf[this.pos]&127)<<s*7+3)>>>0,this.buf[this.pos++]<128)return a}throw Error("invalid varint encoding")}Reader$1.prototype.bool=function a(){return this.uint32()!==0};function readFixed32_end(a,s){return(a[s-4]|a[s-3]<<8|a[s-2]<<16|a[s-1]<<24)>>>0}Reader$1.prototype.fixed32=function a(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);return readFixed32_end(this.buf,this.pos+=4)};Reader$1.prototype.sfixed32=function a(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);return readFixed32_end(this.buf,this.pos+=4)|0};function readFixed64(){if(this.pos+8>this.len)throw indexOutOfRange(this,8);return new LongBits(readFixed32_end(this.buf,this.pos+=4),readFixed32_end(this.buf,this.pos+=4))}Reader$1.prototype.float=function a(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);var s=util$2.float.readFloatLE(this.buf,this.pos);return this.pos+=4,s};Reader$1.prototype.double=function a(){if(this.pos+8>this.len)throw indexOutOfRange(this,4);var s=util$2.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,s};Reader$1.prototype.bytes=function a(){var s=this.uint32(),d=this.pos,c=this.pos+s;if(c>this.len)throw indexOutOfRange(this,s);return this.pos+=s,Array.isArray(this.buf)?this.buf.slice(d,c):d===c?new this.buf.constructor(0):this._slice.call(this.buf,d,c)};Reader$1.prototype.string=function a(){var s=this.bytes();return utf8.read(s,0,s.length)};Reader$1.prototype.skip=function a(s){if(typeof s=="number"){if(this.pos+s>this.len)throw indexOutOfRange(this,s);this.pos+=s}else do if(this.pos>=this.len)throw indexOutOfRange(this);while(this.buf[this.pos++]&128);return this};Reader$1.prototype.skipType=function(a){switch(a){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(a=this.uint32()&7)!==4;)this.skipType(a);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+a+" at offset "+this.pos)}return this};Reader$1._configure=function(a){BufferReader$1=a,Reader$1.create=create$2(),BufferReader$1._configure();var s=util$2.Long?"toLong":"toNumber";util$2.merge(Reader$1.prototype,{int64:function(){return readLongVarint.call(this)[s](!1)},uint64:function(){return readLongVarint.call(this)[s](!0)},sint64:function(){return readLongVarint.call(this).zzDecode()[s](!1)},fixed64:function(){return readFixed64.call(this)[s](!0)},sfixed64:function(){return readFixed64.call(this)[s](!1)}})};var reader_buffer=BufferReader,Reader=reader;(BufferReader.prototype=Object.create(Reader.prototype)).constructor=BufferReader;var util$1=minimal$1;function BufferReader(a){Reader.call(this,a)}BufferReader._configure=function(){util$1.Buffer&&(BufferReader.prototype._slice=util$1.Buffer.prototype.slice)};BufferReader.prototype.string=function a(){var s=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+s,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+s,this.len))};BufferReader._configure();var rpc={},service=Service,util=minimal$1;(Service.prototype=Object.create(util.EventEmitter.prototype)).constructor=Service;function Service(a,s,d){if(typeof a!="function")throw TypeError("rpcImpl must be a function");util.EventEmitter.call(this),this.rpcImpl=a,this.requestDelimited=Boolean(s),this.responseDelimited=Boolean(d)}Service.prototype.rpcCall=function a(s,d,c,m,g){if(!m)throw TypeError("request must be specified");var b=this;if(!g)return util.asPromise(a,b,s,d,c,m);if(!b.rpcImpl){setTimeout(function(){g(Error("already ended"))},0);return}try{return b.rpcImpl(s,d[b.requestDelimited?"encodeDelimited":"encode"](m).finish(),function(et,nt){if(et)return b.emit("error",et,s),g(et);if(nt===null){b.end(!0);return}if(!(nt instanceof c))try{nt=c[b.responseDelimited?"decodeDelimited":"decode"](nt)}catch(it){return b.emit("error",it,s),g(it)}return b.emit("data",nt,s),g(null,nt)})}catch(k){b.emit("error",k,s),setTimeout(function(){g(k)},0);return}};Service.prototype.end=function a(s){return this.rpcImpl&&(s||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this};(function(a){var s=a;s.Service=service})(rpc);var roots={};(function(a){var s=a;s.build="minimal",s.Writer=writer,s.BufferWriter=writer_buffer,s.Reader=reader,s.BufferReader=reader_buffer,s.util=minimal$1,s.rpc=rpc,s.roots=roots,s.configure=d;function d(){s.util._configure(),s.Writer._configure(s.BufferWriter),s.Reader._configure(s.BufferReader)}d()})(indexMinimal);var minimal=indexMinimal;(function(a){var s=commonjsGlobal&&commonjsGlobal.__importDefault||function(at){return at&&at.__esModule?at:{default:at}};Object.defineProperty(a,"__esModule",{value:!0}),a.ClientInfo=a.ParticipantTracks=a.UserPacket=a.SpeakerInfo=a.ActiveSpeakerUpdate=a.DataPacket=a.VideoLayer=a.TrackInfo=a.ParticipantInfo=a.Codec=a.Room=a.clientInfo_SDKToJSON=a.clientInfo_SDKFromJSON=a.ClientInfo_SDK=a.dataPacket_KindToJSON=a.dataPacket_KindFromJSON=a.DataPacket_Kind=a.participantInfo_StateToJSON=a.participantInfo_StateFromJSON=a.ParticipantInfo_State=a.connectionQualityToJSON=a.connectionQualityFromJSON=a.ConnectionQuality=a.videoQualityToJSON=a.videoQualityFromJSON=a.VideoQuality=a.trackSourceToJSON=a.trackSourceFromJSON=a.TrackSource=a.trackTypeToJSON=a.trackTypeFromJSON=a.TrackType=a.protobufPackage=void 0;const d=s(umd.exports),c=s(minimal);a.protobufPackage="livekit";var m;(function(at){at[at.AUDIO=0]="AUDIO",at[at.VIDEO=1]="VIDEO",at[at.DATA=2]="DATA",at[at.UNRECOGNIZED=-1]="UNRECOGNIZED"})(m=a.TrackType||(a.TrackType={}));function g(at){switch(at){case 0:case"AUDIO":return m.AUDIO;case 1:case"VIDEO":return m.VIDEO;case 2:case"DATA":return m.DATA;case-1:case"UNRECOGNIZED":default:return m.UNRECOGNIZED}}a.trackTypeFromJSON=g;function b(at){switch(at){case m.AUDIO:return"AUDIO";case m.VIDEO:return"VIDEO";case m.DATA:return"DATA";default:return"UNKNOWN"}}a.trackTypeToJSON=b;var k;(function(at){at[at.UNKNOWN=0]="UNKNOWN",at[at.CAMERA=1]="CAMERA",at[at.MICROPHONE=2]="MICROPHONE",at[at.SCREEN_SHARE=3]="SCREEN_SHARE",at[at.SCREEN_SHARE_AUDIO=4]="SCREEN_SHARE_AUDIO",at[at.UNRECOGNIZED=-1]="UNRECOGNIZED"})(k=a.TrackSource||(a.TrackSource={}));function et(at){switch(at){case 0:case"UNKNOWN":return k.UNKNOWN;case 1:case"CAMERA":return k.CAMERA;case 2:case"MICROPHONE":return k.MICROPHONE;case 3:case"SCREEN_SHARE":return k.SCREEN_SHARE;case 4:case"SCREEN_SHARE_AUDIO":return k.SCREEN_SHARE_AUDIO;case-1:case"UNRECOGNIZED":default:return k.UNRECOGNIZED}}a.trackSourceFromJSON=et;function nt(at){switch(at){case k.UNKNOWN:return"UNKNOWN";case k.CAMERA:return"CAMERA";case k.MICROPHONE:return"MICROPHONE";case k.SCREEN_SHARE:return"SCREEN_SHARE";case k.SCREEN_SHARE_AUDIO:return"SCREEN_SHARE_AUDIO";default:return"UNKNOWN"}}a.trackSourceToJSON=nt;var it;(function(at){at[at.LOW=0]="LOW",at[at.MEDIUM=1]="MEDIUM",at[at.HIGH=2]="HIGH",at[at.OFF=3]="OFF",at[at.UNRECOGNIZED=-1]="UNRECOGNIZED"})(it=a.VideoQuality||(a.VideoQuality={}));function ct(at){switch(at){case 0:case"LOW":return it.LOW;case 1:case"MEDIUM":return it.MEDIUM;case 2:case"HIGH":return it.HIGH;case 3:case"OFF":return it.OFF;case-1:case"UNRECOGNIZED":default:return it.UNRECOGNIZED}}a.videoQualityFromJSON=ct;function st(at){switch(at){case it.LOW:return"LOW";case it.MEDIUM:return"MEDIUM";case it.HIGH:return"HIGH";case it.OFF:return"OFF";default:return"UNKNOWN"}}a.videoQualityToJSON=st;var ut;(function(at){at[at.POOR=0]="POOR",at[at.GOOD=1]="GOOD",at[at.EXCELLENT=2]="EXCELLENT",at[at.UNRECOGNIZED=-1]="UNRECOGNIZED"})(ut=a.ConnectionQuality||(a.ConnectionQuality={}));function pt(at){switch(at){case 0:case"POOR":return ut.POOR;case 1:case"GOOD":return ut.GOOD;case 2:case"EXCELLENT":return ut.EXCELLENT;case-1:case"UNRECOGNIZED":default:return ut.UNRECOGNIZED}}a.connectionQualityFromJSON=pt;function St(at){switch(at){case ut.POOR:return"POOR";case ut.GOOD:return"GOOD";case ut.EXCELLENT:return"EXCELLENT";default:return"UNKNOWN"}}a.connectionQualityToJSON=St;var _t;(function(at){at[at.JOINING=0]="JOINING",at[at.JOINED=1]="JOINED",at[at.ACTIVE=2]="ACTIVE",at[at.DISCONNECTED=3]="DISCONNECTED",at[at.UNRECOGNIZED=-1]="UNRECOGNIZED"})(_t=a.ParticipantInfo_State||(a.ParticipantInfo_State={}));function ht(at){switch(at){case 0:case"JOINING":return _t.JOINING;case 1:case"JOINED":return _t.JOINED;case 2:case"ACTIVE":return _t.ACTIVE;case 3:case"DISCONNECTED":return _t.DISCONNECTED;case-1:case"UNRECOGNIZED":default:return _t.UNRECOGNIZED}}a.participantInfo_StateFromJSON=ht;function _e(at){switch(at){case _t.JOINING:return"JOINING";case _t.JOINED:return"JOINED";case _t.ACTIVE:return"ACTIVE";case _t.DISCONNECTED:return"DISCONNECTED";default:return"UNKNOWN"}}a.participantInfo_StateToJSON=_e;var ot;(function(at){at[at.RELIABLE=0]="RELIABLE",at[at.LOSSY=1]="LOSSY",at[at.UNRECOGNIZED=-1]="UNRECOGNIZED"})(ot=a.DataPacket_Kind||(a.DataPacket_Kind={}));function lt(at){switch(at){case 0:case"RELIABLE":return ot.RELIABLE;case 1:case"LOSSY":return ot.LOSSY;case-1:case"UNRECOGNIZED":default:return ot.UNRECOGNIZED}}a.dataPacket_KindFromJSON=lt;function Ot(at){switch(at){case ot.RELIABLE:return"RELIABLE";case ot.LOSSY:return"LOSSY";default:return"UNKNOWN"}}a.dataPacket_KindToJSON=Ot;var It;(function(at){at[at.UNKNOWN=0]="UNKNOWN",at[at.JS=1]="JS",at[at.SWIFT=2]="SWIFT",at[at.ANDROID=3]="ANDROID",at[at.FLUTTER=4]="FLUTTER",at[at.GO=5]="GO",at[at.UNITY=6]="UNITY",at[at.UNRECOGNIZED=-1]="UNRECOGNIZED"})(It=a.ClientInfo_SDK||(a.ClientInfo_SDK={}));function Pt(at){switch(at){case 0:case"UNKNOWN":return It.UNKNOWN;case 1:case"JS":return It.JS;case 2:case"SWIFT":return It.SWIFT;case 3:case"ANDROID":return It.ANDROID;case 4:case"FLUTTER":return It.FLUTTER;case 5:case"GO":return It.GO;case 6:case"UNITY":return It.UNITY;case-1:case"UNRECOGNIZED":default:return It.UNRECOGNIZED}}a.clientInfo_SDKFromJSON=Pt;function $t(at){switch(at){case It.UNKNOWN:return"UNKNOWN";case It.JS:return"JS";case It.SWIFT:return"SWIFT";case It.ANDROID:return"ANDROID";case It.FLUTTER:return"FLUTTER";case It.GO:return"GO";case It.UNITY:return"UNITY";default:return"UNKNOWN"}}a.clientInfo_SDKToJSON=$t;const bt={sid:"",name:"",emptyTimeout:0,maxParticipants:0,creationTime:0,turnPassword:"",metadata:"",numParticipants:0,activeRecording:!1};a.Room={encode(at,yt=c.default.Writer.create()){at.sid!==""&&yt.uint32(10).string(at.sid),at.name!==""&&yt.uint32(18).string(at.name),at.emptyTimeout!==0&&yt.uint32(24).uint32(at.emptyTimeout),at.maxParticipants!==0&&yt.uint32(32).uint32(at.maxParticipants),at.creationTime!==0&&yt.uint32(40).int64(at.creationTime),at.turnPassword!==""&&yt.uint32(50).string(at.turnPassword);for(const Dt of at.enabledCodecs)a.Codec.encode(Dt,yt.uint32(58).fork()).ldelim();return at.metadata!==""&&yt.uint32(66).string(at.metadata),at.numParticipants!==0&&yt.uint32(72).uint32(at.numParticipants),at.activeRecording===!0&&yt.uint32(80).bool(at.activeRecording),yt},decode(at,yt){const Dt=at instanceof c.default.Reader?at:new c.default.Reader(at);let Gt=yt===void 0?Dt.len:Dt.pos+yt;const Bt=Object.assign({},bt);for(Bt.enabledCodecs=[];Dt.pos<Gt;){const xt=Dt.uint32();switch(xt>>>3){case 1:Bt.sid=Dt.string();break;case 2:Bt.name=Dt.string();break;case 3:Bt.emptyTimeout=Dt.uint32();break;case 4:Bt.maxParticipants=Dt.uint32();break;case 5:Bt.creationTime=Vt(Dt.int64());break;case 6:Bt.turnPassword=Dt.string();break;case 7:Bt.enabledCodecs.push(a.Codec.decode(Dt,Dt.uint32()));break;case 8:Bt.metadata=Dt.string();break;case 9:Bt.numParticipants=Dt.uint32();break;case 10:Bt.activeRecording=Dt.bool();break;default:Dt.skipType(xt&7);break}}return Bt},fromJSON(at){const yt=Object.assign({},bt);if(yt.enabledCodecs=[],at.sid!==void 0&&at.sid!==null?yt.sid=String(at.sid):yt.sid="",at.name!==void 0&&at.name!==null?yt.name=String(at.name):yt.name="",at.emptyTimeout!==void 0&&at.emptyTimeout!==null?yt.emptyTimeout=Number(at.emptyTimeout):yt.emptyTimeout=0,at.maxParticipants!==void 0&&at.maxParticipants!==null?yt.maxParticipants=Number(at.maxParticipants):yt.maxParticipants=0,at.creationTime!==void 0&&at.creationTime!==null?yt.creationTime=Number(at.creationTime):yt.creationTime=0,at.turnPassword!==void 0&&at.turnPassword!==null?yt.turnPassword=String(at.turnPassword):yt.turnPassword="",at.enabledCodecs!==void 0&&at.enabledCodecs!==null)for(const Dt of at.enabledCodecs)yt.enabledCodecs.push(a.Codec.fromJSON(Dt));return at.metadata!==void 0&&at.metadata!==null?yt.metadata=String(at.metadata):yt.metadata="",at.numParticipants!==void 0&&at.numParticipants!==null?yt.numParticipants=Number(at.numParticipants):yt.numParticipants=0,at.activeRecording!==void 0&&at.activeRecording!==null?yt.activeRecording=Boolean(at.activeRecording):yt.activeRecording=!1,yt},toJSON(at){const yt={};return at.sid!==void 0&&(yt.sid=at.sid),at.name!==void 0&&(yt.name=at.name),at.emptyTimeout!==void 0&&(yt.emptyTimeout=at.emptyTimeout),at.maxParticipants!==void 0&&(yt.maxParticipants=at.maxParticipants),at.creationTime!==void 0&&(yt.creationTime=at.creationTime),at.turnPassword!==void 0&&(yt.turnPassword=at.turnPassword),at.enabledCodecs?yt.enabledCodecs=at.enabledCodecs.map(Dt=>Dt?a.Codec.toJSON(Dt):void 0):yt.enabledCodecs=[],at.metadata!==void 0&&(yt.metadata=at.metadata),at.numParticipants!==void 0&&(yt.numParticipants=at.numParticipants),at.activeRecording!==void 0&&(yt.activeRecording=at.activeRecording),yt},fromPartial(at){var yt,Dt,Gt,Bt,xt,tn,dn,Qt,rn;const mn=Object.assign({},bt);if(mn.sid=(yt=at.sid)!==null&&yt!==void 0?yt:"",mn.name=(Dt=at.name)!==null&&Dt!==void 0?Dt:"",mn.emptyTimeout=(Gt=at.emptyTimeout)!==null&&Gt!==void 0?Gt:0,mn.maxParticipants=(Bt=at.maxParticipants)!==null&&Bt!==void 0?Bt:0,mn.creationTime=(xt=at.creationTime)!==null&&xt!==void 0?xt:0,mn.turnPassword=(tn=at.turnPassword)!==null&&tn!==void 0?tn:"",mn.enabledCodecs=[],at.enabledCodecs!==void 0&&at.enabledCodecs!==null)for(const On of at.enabledCodecs)mn.enabledCodecs.push(a.Codec.fromPartial(On));return mn.metadata=(dn=at.metadata)!==null&&dn!==void 0?dn:"",mn.numParticipants=(Qt=at.numParticipants)!==null&&Qt!==void 0?Qt:0,mn.activeRecording=(rn=at.activeRecording)!==null&&rn!==void 0?rn:!1,mn}};const Rt={mime:"",fmtpLine:""};a.Codec={encode(at,yt=c.default.Writer.create()){return at.mime!==""&&yt.uint32(10).string(at.mime),at.fmtpLine!==""&&yt.uint32(18).string(at.fmtpLine),yt},decode(at,yt){const Dt=at instanceof c.default.Reader?at:new c.default.Reader(at);let Gt=yt===void 0?Dt.len:Dt.pos+yt;const Bt=Object.assign({},Rt);for(;Dt.pos<Gt;){const xt=Dt.uint32();switch(xt>>>3){case 1:Bt.mime=Dt.string();break;case 2:Bt.fmtpLine=Dt.string();break;default:Dt.skipType(xt&7);break}}return Bt},fromJSON(at){const yt=Object.assign({},Rt);return at.mime!==void 0&&at.mime!==null?yt.mime=String(at.mime):yt.mime="",at.fmtpLine!==void 0&&at.fmtpLine!==null?yt.fmtpLine=String(at.fmtpLine):yt.fmtpLine="",yt},toJSON(at){const yt={};return at.mime!==void 0&&(yt.mime=at.mime),at.fmtpLine!==void 0&&(yt.fmtpLine=at.fmtpLine),yt},fromPartial(at){var yt,Dt;const Gt=Object.assign({},Rt);return Gt.mime=(yt=at.mime)!==null&&yt!==void 0?yt:"",Gt.fmtpLine=(Dt=at.fmtpLine)!==null&&Dt!==void 0?Dt:"",Gt}};const Ct={sid:"",identity:"",state:0,metadata:"",joinedAt:0,hidden:!1,recorder:!1,name:""};a.ParticipantInfo={encode(at,yt=c.default.Writer.create()){at.sid!==""&&yt.uint32(10).string(at.sid),at.identity!==""&&yt.uint32(18).string(at.identity),at.state!==0&&yt.uint32(24).int32(at.state);for(const Dt of at.tracks)a.TrackInfo.encode(Dt,yt.uint32(34).fork()).ldelim();return at.metadata!==""&&yt.uint32(42).string(at.metadata),at.joinedAt!==0&&yt.uint32(48).int64(at.joinedAt),at.hidden===!0&&yt.uint32(56).bool(at.hidden),at.recorder===!0&&yt.uint32(64).bool(at.recorder),at.name!==""&&yt.uint32(74).string(at.name),yt},decode(at,yt){const Dt=at instanceof c.default.Reader?at:new c.default.Reader(at);let Gt=yt===void 0?Dt.len:Dt.pos+yt;const Bt=Object.assign({},Ct);for(Bt.tracks=[];Dt.pos<Gt;){const xt=Dt.uint32();switch(xt>>>3){case 1:Bt.sid=Dt.string();break;case 2:Bt.identity=Dt.string();break;case 3:Bt.state=Dt.int32();break;case 4:Bt.tracks.push(a.TrackInfo.decode(Dt,Dt.uint32()));break;case 5:Bt.metadata=Dt.string();break;case 6:Bt.joinedAt=Vt(Dt.int64());break;case 7:Bt.hidden=Dt.bool();break;case 8:Bt.recorder=Dt.bool();break;case 9:Bt.name=Dt.string();break;default:Dt.skipType(xt&7);break}}return Bt},fromJSON(at){const yt=Object.assign({},Ct);if(yt.tracks=[],at.sid!==void 0&&at.sid!==null?yt.sid=String(at.sid):yt.sid="",at.identity!==void 0&&at.identity!==null?yt.identity=String(at.identity):yt.identity="",at.state!==void 0&&at.state!==null?yt.state=ht(at.state):yt.state=0,at.tracks!==void 0&&at.tracks!==null)for(const Dt of at.tracks)yt.tracks.push(a.TrackInfo.fromJSON(Dt));return at.metadata!==void 0&&at.metadata!==null?yt.metadata=String(at.metadata):yt.metadata="",at.joinedAt!==void 0&&at.joinedAt!==null?yt.joinedAt=Number(at.joinedAt):yt.joinedAt=0,at.hidden!==void 0&&at.hidden!==null?yt.hidden=Boolean(at.hidden):yt.hidden=!1,at.recorder!==void 0&&at.recorder!==null?yt.recorder=Boolean(at.recorder):yt.recorder=!1,at.name!==void 0&&at.name!==null?yt.name=String(at.name):yt.name="",yt},toJSON(at){const yt={};return at.sid!==void 0&&(yt.sid=at.sid),at.identity!==void 0&&(yt.identity=at.identity),at.state!==void 0&&(yt.state=_e(at.state)),at.tracks?yt.tracks=at.tracks.map(Dt=>Dt?a.TrackInfo.toJSON(Dt):void 0):yt.tracks=[],at.metadata!==void 0&&(yt.metadata=at.metadata),at.joinedAt!==void 0&&(yt.joinedAt=at.joinedAt),at.hidden!==void 0&&(yt.hidden=at.hidden),at.recorder!==void 0&&(yt.recorder=at.recorder),at.name!==void 0&&(yt.name=at.name),yt},fromPartial(at){var yt,Dt,Gt,Bt,xt,tn,dn,Qt;const rn=Object.assign({},Ct);if(rn.sid=(yt=at.sid)!==null&&yt!==void 0?yt:"",rn.identity=(Dt=at.identity)!==null&&Dt!==void 0?Dt:"",rn.state=(Gt=at.state)!==null&&Gt!==void 0?Gt:0,rn.tracks=[],at.tracks!==void 0&&at.tracks!==null)for(const mn of at.tracks)rn.tracks.push(a.TrackInfo.fromPartial(mn));return rn.metadata=(Bt=at.metadata)!==null&&Bt!==void 0?Bt:"",rn.joinedAt=(xt=at.joinedAt)!==null&&xt!==void 0?xt:0,rn.hidden=(tn=at.hidden)!==null&&tn!==void 0?tn:!1,rn.recorder=(dn=at.recorder)!==null&&dn!==void 0?dn:!1,rn.name=(Qt=at.name)!==null&&Qt!==void 0?Qt:"",rn}};const vt={sid:"",type:0,name:"",muted:!1,width:0,height:0,simulcast:!1,disableDtx:!1,source:0,mimeType:"",mid:""};a.TrackInfo={encode(at,yt=c.default.Writer.create()){at.sid!==""&&yt.uint32(10).string(at.sid),at.type!==0&&yt.uint32(16).int32(at.type),at.name!==""&&yt.uint32(26).string(at.name),at.muted===!0&&yt.uint32(32).bool(at.muted),at.width!==0&&yt.uint32(40).uint32(at.width),at.height!==0&&yt.uint32(48).uint32(at.height),at.simulcast===!0&&yt.uint32(56).bool(at.simulcast),at.disableDtx===!0&&yt.uint32(64).bool(at.disableDtx),at.source!==0&&yt.uint32(72).int32(at.source);for(const Dt of at.layers)a.VideoLayer.encode(Dt,yt.uint32(82).fork()).ldelim();return at.mimeType!==""&&yt.uint32(90).string(at.mimeType),at.mid!==""&&yt.uint32(98).string(at.mid),yt},decode(at,yt){const Dt=at instanceof c.default.Reader?at:new c.default.Reader(at);let Gt=yt===void 0?Dt.len:Dt.pos+yt;const Bt=Object.assign({},vt);for(Bt.layers=[];Dt.pos<Gt;){const xt=Dt.uint32();switch(xt>>>3){case 1:Bt.sid=Dt.string();break;case 2:Bt.type=Dt.int32();break;case 3:Bt.name=Dt.string();break;case 4:Bt.muted=Dt.bool();break;case 5:Bt.width=Dt.uint32();break;case 6:Bt.height=Dt.uint32();break;case 7:Bt.simulcast=Dt.bool();break;case 8:Bt.disableDtx=Dt.bool();break;case 9:Bt.source=Dt.int32();break;case 10:Bt.layers.push(a.VideoLayer.decode(Dt,Dt.uint32()));break;case 11:Bt.mimeType=Dt.string();break;case 12:Bt.mid=Dt.string();break;default:Dt.skipType(xt&7);break}}return Bt},fromJSON(at){const yt=Object.assign({},vt);if(yt.layers=[],at.sid!==void 0&&at.sid!==null?yt.sid=String(at.sid):yt.sid="",at.type!==void 0&&at.type!==null?yt.type=g(at.type):yt.type=0,at.name!==void 0&&at.name!==null?yt.name=String(at.name):yt.name="",at.muted!==void 0&&at.muted!==null?yt.muted=Boolean(at.muted):yt.muted=!1,at.width!==void 0&&at.width!==null?yt.width=Number(at.width):yt.width=0,at.height!==void 0&&at.height!==null?yt.height=Number(at.height):yt.height=0,at.simulcast!==void 0&&at.simulcast!==null?yt.simulcast=Boolean(at.simulcast):yt.simulcast=!1,at.disableDtx!==void 0&&at.disableDtx!==null?yt.disableDtx=Boolean(at.disableDtx):yt.disableDtx=!1,at.source!==void 0&&at.source!==null?yt.source=et(at.source):yt.source=0,at.layers!==void 0&&at.layers!==null)for(const Dt of at.layers)yt.layers.push(a.VideoLayer.fromJSON(Dt));return at.mimeType!==void 0&&at.mimeType!==null?yt.mimeType=String(at.mimeType):yt.mimeType="",at.mid!==void 0&&at.mid!==null?yt.mid=String(at.mid):yt.mid="",yt},toJSON(at){const yt={};return at.sid!==void 0&&(yt.sid=at.sid),at.type!==void 0&&(yt.type=b(at.type)),at.name!==void 0&&(yt.name=at.name),at.muted!==void 0&&(yt.muted=at.muted),at.width!==void 0&&(yt.width=at.width),at.height!==void 0&&(yt.height=at.height),at.simulcast!==void 0&&(yt.simulcast=at.simulcast),at.disableDtx!==void 0&&(yt.disableDtx=at.disableDtx),at.source!==void 0&&(yt.source=nt(at.source)),at.layers?yt.layers=at.layers.map(Dt=>Dt?a.VideoLayer.toJSON(Dt):void 0):yt.layers=[],at.mimeType!==void 0&&(yt.mimeType=at.mimeType),at.mid!==void 0&&(yt.mid=at.mid),yt},fromPartial(at){var yt,Dt,Gt,Bt,xt,tn,dn,Qt,rn,mn,On;const Xt=Object.assign({},vt);if(Xt.sid=(yt=at.sid)!==null&&yt!==void 0?yt:"",Xt.type=(Dt=at.type)!==null&&Dt!==void 0?Dt:0,Xt.name=(Gt=at.name)!==null&&Gt!==void 0?Gt:"",Xt.muted=(Bt=at.muted)!==null&&Bt!==void 0?Bt:!1,Xt.width=(xt=at.width)!==null&&xt!==void 0?xt:0,Xt.height=(tn=at.height)!==null&&tn!==void 0?tn:0,Xt.simulcast=(dn=at.simulcast)!==null&&dn!==void 0?dn:!1,Xt.disableDtx=(Qt=at.disableDtx)!==null&&Qt!==void 0?Qt:!1,Xt.source=(rn=at.source)!==null&&rn!==void 0?rn:0,Xt.layers=[],at.layers!==void 0&&at.layers!==null)for(const bn of at.layers)Xt.layers.push(a.VideoLayer.fromPartial(bn));return Xt.mimeType=(mn=at.mimeType)!==null&&mn!==void 0?mn:"",Xt.mid=(On=at.mid)!==null&&On!==void 0?On:"",Xt}};const Tt={quality:0,width:0,height:0,bitrate:0,ssrc:0};a.VideoLayer={encode(at,yt=c.default.Writer.create()){return at.quality!==0&&yt.uint32(8).int32(at.quality),at.width!==0&&yt.uint32(16).uint32(at.width),at.height!==0&&yt.uint32(24).uint32(at.height),at.bitrate!==0&&yt.uint32(32).uint32(at.bitrate),at.ssrc!==0&&yt.uint32(40).uint32(at.ssrc),yt},decode(at,yt){const Dt=at instanceof c.default.Reader?at:new c.default.Reader(at);let Gt=yt===void 0?Dt.len:Dt.pos+yt;const Bt=Object.assign({},Tt);for(;Dt.pos<Gt;){const xt=Dt.uint32();switch(xt>>>3){case 1:Bt.quality=Dt.int32();break;case 2:Bt.width=Dt.uint32();break;case 3:Bt.height=Dt.uint32();break;case 4:Bt.bitrate=Dt.uint32();break;case 5:Bt.ssrc=Dt.uint32();break;default:Dt.skipType(xt&7);break}}return Bt},fromJSON(at){const yt=Object.assign({},Tt);return at.quality!==void 0&&at.quality!==null?yt.quality=ct(at.quality):yt.quality=0,at.width!==void 0&&at.width!==null?yt.width=Number(at.width):yt.width=0,at.height!==void 0&&at.height!==null?yt.height=Number(at.height):yt.height=0,at.bitrate!==void 0&&at.bitrate!==null?yt.bitrate=Number(at.bitrate):yt.bitrate=0,at.ssrc!==void 0&&at.ssrc!==null?yt.ssrc=Number(at.ssrc):yt.ssrc=0,yt},toJSON(at){const yt={};return at.quality!==void 0&&(yt.quality=st(at.quality)),at.width!==void 0&&(yt.width=at.width),at.height!==void 0&&(yt.height=at.height),at.bitrate!==void 0&&(yt.bitrate=at.bitrate),at.ssrc!==void 0&&(yt.ssrc=at.ssrc),yt},fromPartial(at){var yt,Dt,Gt,Bt,xt;const tn=Object.assign({},Tt);return tn.quality=(yt=at.quality)!==null&&yt!==void 0?yt:0,tn.width=(Dt=at.width)!==null&&Dt!==void 0?Dt:0,tn.height=(Gt=at.height)!==null&&Gt!==void 0?Gt:0,tn.bitrate=(Bt=at.bitrate)!==null&&Bt!==void 0?Bt:0,tn.ssrc=(xt=at.ssrc)!==null&&xt!==void 0?xt:0,tn}};const wt={kind:0};a.DataPacket={encode(at,yt=c.default.Writer.create()){return at.kind!==0&&yt.uint32(8).int32(at.kind),at.user!==void 0&&a.UserPacket.encode(at.user,yt.uint32(18).fork()).ldelim(),at.speaker!==void 0&&a.ActiveSpeakerUpdate.encode(at.speaker,yt.uint32(26).fork()).ldelim(),yt},decode(at,yt){const Dt=at instanceof c.default.Reader?at:new c.default.Reader(at);let Gt=yt===void 0?Dt.len:Dt.pos+yt;const Bt=Object.assign({},wt);for(;Dt.pos<Gt;){const xt=Dt.uint32();switch(xt>>>3){case 1:Bt.kind=Dt.int32();break;case 2:Bt.user=a.UserPacket.decode(Dt,Dt.uint32());break;case 3:Bt.speaker=a.ActiveSpeakerUpdate.decode(Dt,Dt.uint32());break;default:Dt.skipType(xt&7);break}}return Bt},fromJSON(at){const yt=Object.assign({},wt);return at.kind!==void 0&&at.kind!==null?yt.kind=lt(at.kind):yt.kind=0,at.user!==void 0&&at.user!==null?yt.user=a.UserPacket.fromJSON(at.user):yt.user=void 0,at.speaker!==void 0&&at.speaker!==null?yt.speaker=a.ActiveSpeakerUpdate.fromJSON(at.speaker):yt.speaker=void 0,yt},toJSON(at){const yt={};return at.kind!==void 0&&(yt.kind=Ot(at.kind)),at.user!==void 0&&(yt.user=at.user?a.UserPacket.toJSON(at.user):void 0),at.speaker!==void 0&&(yt.speaker=at.speaker?a.ActiveSpeakerUpdate.toJSON(at.speaker):void 0),yt},fromPartial(at){var yt;const Dt=Object.assign({},wt);return Dt.kind=(yt=at.kind)!==null&&yt!==void 0?yt:0,at.user!==void 0&&at.user!==null?Dt.user=a.UserPacket.fromPartial(at.user):Dt.user=void 0,at.speaker!==void 0&&at.speaker!==null?Dt.speaker=a.ActiveSpeakerUpdate.fromPartial(at.speaker):Dt.speaker=void 0,Dt}};const zt={};a.ActiveSpeakerUpdate={encode(at,yt=c.default.Writer.create()){for(const Dt of at.speakers)a.SpeakerInfo.encode(Dt,yt.uint32(10).fork()).ldelim();return yt},decode(at,yt){const Dt=at instanceof c.default.Reader?at:new c.default.Reader(at);let Gt=yt===void 0?Dt.len:Dt.pos+yt;const Bt=Object.assign({},zt);for(Bt.speakers=[];Dt.pos<Gt;){const xt=Dt.uint32();switch(xt>>>3){case 1:Bt.speakers.push(a.SpeakerInfo.decode(Dt,Dt.uint32()));break;default:Dt.skipType(xt&7);break}}return Bt},fromJSON(at){const yt=Object.assign({},zt);if(yt.speakers=[],at.speakers!==void 0&&at.speakers!==null)for(const Dt of at.speakers)yt.speakers.push(a.SpeakerInfo.fromJSON(Dt));return yt},toJSON(at){const yt={};return at.speakers?yt.speakers=at.speakers.map(Dt=>Dt?a.SpeakerInfo.toJSON(Dt):void 0):yt.speakers=[],yt},fromPartial(at){const yt=Object.assign({},zt);if(yt.speakers=[],at.speakers!==void 0&&at.speakers!==null)for(const Dt of at.speakers)yt.speakers.push(a.SpeakerInfo.fromPartial(Dt));return yt}};const Mt={sid:"",level:0,active:!1};a.SpeakerInfo={encode(at,yt=c.default.Writer.create()){return at.sid!==""&&yt.uint32(10).string(at.sid),at.level!==0&&yt.uint32(21).float(at.level),at.active===!0&&yt.uint32(24).bool(at.active),yt},decode(at,yt){const Dt=at instanceof c.default.Reader?at:new c.default.Reader(at);let Gt=yt===void 0?Dt.len:Dt.pos+yt;const Bt=Object.assign({},Mt);for(;Dt.pos<Gt;){const xt=Dt.uint32();switch(xt>>>3){case 1:Bt.sid=Dt.string();break;case 2:Bt.level=Dt.float();break;case 3:Bt.active=Dt.bool();break;default:Dt.skipType(xt&7);break}}return Bt},fromJSON(at){const yt=Object.assign({},Mt);return at.sid!==void 0&&at.sid!==null?yt.sid=String(at.sid):yt.sid="",at.level!==void 0&&at.level!==null?yt.level=Number(at.level):yt.level=0,at.active!==void 0&&at.active!==null?yt.active=Boolean(at.active):yt.active=!1,yt},toJSON(at){const yt={};return at.sid!==void 0&&(yt.sid=at.sid),at.level!==void 0&&(yt.level=at.level),at.active!==void 0&&(yt.active=at.active),yt},fromPartial(at){var yt,Dt,Gt;const Bt=Object.assign({},Mt);return Bt.sid=(yt=at.sid)!==null&&yt!==void 0?yt:"",Bt.level=(Dt=at.level)!==null&&Dt!==void 0?Dt:0,Bt.active=(Gt=at.active)!==null&&Gt!==void 0?Gt:!1,Bt}};const Nt={participantSid:"",destinationSids:""};a.UserPacket={encode(at,yt=c.default.Writer.create()){at.participantSid!==""&&yt.uint32(10).string(at.participantSid),at.payload.length!==0&&yt.uint32(18).bytes(at.payload);for(const Dt of at.destinationSids)yt.uint32(26).string(Dt);return yt},decode(at,yt){const Dt=at instanceof c.default.Reader?at:new c.default.Reader(at);let Gt=yt===void 0?Dt.len:Dt.pos+yt;const Bt=Object.assign({},Nt);for(Bt.destinationSids=[],Bt.payload=new Uint8Array;Dt.pos<Gt;){const xt=Dt.uint32();switch(xt>>>3){case 1:Bt.participantSid=Dt.string();break;case 2:Bt.payload=Dt.bytes();break;case 3:Bt.destinationSids.push(Dt.string());break;default:Dt.skipType(xt&7);break}}return Bt},fromJSON(at){const yt=Object.assign({},Nt);if(yt.destinationSids=[],yt.payload=new Uint8Array,at.participantSid!==void 0&&at.participantSid!==null?yt.participantSid=String(at.participantSid):yt.participantSid="",at.payload!==void 0&&at.payload!==null&&(yt.payload=$(at.payload)),at.destinationSids!==void 0&&at.destinationSids!==null)for(const Dt of at.destinationSids)yt.destinationSids.push(String(Dt));return yt},toJSON(at){const yt={};return at.participantSid!==void 0&&(yt.participantSid=at.participantSid),at.payload!==void 0&&(yt.payload=mt(at.payload!==void 0?at.payload:new Uint8Array)),at.destinationSids?yt.destinationSids=at.destinationSids.map(Dt=>Dt):yt.destinationSids=[],yt},fromPartial(at){var yt,Dt;const Gt=Object.assign({},Nt);if(Gt.participantSid=(yt=at.participantSid)!==null&&yt!==void 0?yt:"",Gt.payload=(Dt=at.payload)!==null&&Dt!==void 0?Dt:new Uint8Array,Gt.destinationSids=[],at.destinationSids!==void 0&&at.destinationSids!==null)for(const Bt of at.destinationSids)Gt.destinationSids.push(Bt);return Gt}};const Ft={participantSid:"",trackSids:""};a.ParticipantTracks={encode(at,yt=c.default.Writer.create()){at.participantSid!==""&&yt.uint32(10).string(at.participantSid);for(const Dt of at.trackSids)yt.uint32(18).string(Dt);return yt},decode(at,yt){const Dt=at instanceof c.default.Reader?at:new c.default.Reader(at);let Gt=yt===void 0?Dt.len:Dt.pos+yt;const Bt=Object.assign({},Ft);for(Bt.trackSids=[];Dt.pos<Gt;){const xt=Dt.uint32();switch(xt>>>3){case 1:Bt.participantSid=Dt.string();break;case 2:Bt.trackSids.push(Dt.string());break;default:Dt.skipType(xt&7);break}}return Bt},fromJSON(at){const yt=Object.assign({},Ft);if(yt.trackSids=[],at.participantSid!==void 0&&at.participantSid!==null?yt.participantSid=String(at.participantSid):yt.participantSid="",at.trackSids!==void 0&&at.trackSids!==null)for(const Dt of at.trackSids)yt.trackSids.push(String(Dt));return yt},toJSON(at){const yt={};return at.participantSid!==void 0&&(yt.participantSid=at.participantSid),at.trackSids?yt.trackSids=at.trackSids.map(Dt=>Dt):yt.trackSids=[],yt},fromPartial(at){var yt;const Dt=Object.assign({},Ft);if(Dt.participantSid=(yt=at.participantSid)!==null&&yt!==void 0?yt:"",Dt.trackSids=[],at.trackSids!==void 0&&at.trackSids!==null)for(const Gt of at.trackSids)Dt.trackSids.push(Gt);return Dt}};const Wt={sdk:0,version:"",protocol:0,os:"",osVersion:"",deviceModel:"",browser:"",browserVersion:""};a.ClientInfo={encode(at,yt=c.default.Writer.create()){return at.sdk!==0&&yt.uint32(8).int32(at.sdk),at.version!==""&&yt.uint32(18).string(at.version),at.protocol!==0&&yt.uint32(24).int32(at.protocol),at.os!==""&&yt.uint32(34).string(at.os),at.osVersion!==""&&yt.uint32(42).string(at.osVersion),at.deviceModel!==""&&yt.uint32(50).string(at.deviceModel),at.browser!==""&&yt.uint32(58).string(at.browser),at.browserVersion!==""&&yt.uint32(66).string(at.browserVersion),yt},decode(at,yt){const Dt=at instanceof c.default.Reader?at:new c.default.Reader(at);let Gt=yt===void 0?Dt.len:Dt.pos+yt;const Bt=Object.assign({},Wt);for(;Dt.pos<Gt;){const xt=Dt.uint32();switch(xt>>>3){case 1:Bt.sdk=Dt.int32();break;case 2:Bt.version=Dt.string();break;case 3:Bt.protocol=Dt.int32();break;case 4:Bt.os=Dt.string();break;case 5:Bt.osVersion=Dt.string();break;case 6:Bt.deviceModel=Dt.string();break;case 7:Bt.browser=Dt.string();break;case 8:Bt.browserVersion=Dt.string();break;default:Dt.skipType(xt&7);break}}return Bt},fromJSON(at){const yt=Object.assign({},Wt);return at.sdk!==void 0&&at.sdk!==null?yt.sdk=Pt(at.sdk):yt.sdk=0,at.version!==void 0&&at.version!==null?yt.version=String(at.version):yt.version="",at.protocol!==void 0&&at.protocol!==null?yt.protocol=Number(at.protocol):yt.protocol=0,at.os!==void 0&&at.os!==null?yt.os=String(at.os):yt.os="",at.osVersion!==void 0&&at.osVersion!==null?yt.osVersion=String(at.osVersion):yt.osVersion="",at.deviceModel!==void 0&&at.deviceModel!==null?yt.deviceModel=String(at.deviceModel):yt.deviceModel="",at.browser!==void 0&&at.browser!==null?yt.browser=String(at.browser):yt.browser="",at.browserVersion!==void 0&&at.browserVersion!==null?yt.browserVersion=String(at.browserVersion):yt.browserVersion="",yt},toJSON(at){const yt={};return at.sdk!==void 0&&(yt.sdk=$t(at.sdk)),at.version!==void 0&&(yt.version=at.version),at.protocol!==void 0&&(yt.protocol=at.protocol),at.os!==void 0&&(yt.os=at.os),at.osVersion!==void 0&&(yt.osVersion=at.osVersion),at.deviceModel!==void 0&&(yt.deviceModel=at.deviceModel),at.browser!==void 0&&(yt.browser=at.browser),at.browserVersion!==void 0&&(yt.browserVersion=at.browserVersion),yt},fromPartial(at){var yt,Dt,Gt,Bt,xt,tn,dn,Qt;const rn=Object.assign({},Wt);return rn.sdk=(yt=at.sdk)!==null&&yt!==void 0?yt:0,rn.version=(Dt=at.version)!==null&&Dt!==void 0?Dt:"",rn.protocol=(Gt=at.protocol)!==null&&Gt!==void 0?Gt:0,rn.os=(Bt=at.os)!==null&&Bt!==void 0?Bt:"",rn.osVersion=(xt=at.osVersion)!==null&&xt!==void 0?xt:"",rn.deviceModel=(tn=at.deviceModel)!==null&&tn!==void 0?tn:"",rn.browser=(dn=at.browser)!==null&&dn!==void 0?dn:"",rn.browserVersion=(Qt=at.browserVersion)!==null&&Qt!==void 0?Qt:"",rn}};var Ht=(()=>{if(typeof Ht!="undefined")return Ht;if(typeof self!="undefined")return self;if(typeof window!="undefined")return window;if(typeof commonjsGlobal!="undefined")return commonjsGlobal;throw"Unable to locate global object"})();const Yt=Ht.atob||(at=>Ht.Buffer.from(at,"base64").toString("binary"));function $(at){const yt=Yt(at),Dt=new Uint8Array(yt.length);for(let Gt=0;Gt<yt.length;++Gt)Dt[Gt]=yt.charCodeAt(Gt);return Dt}const rt=Ht.btoa||(at=>Ht.Buffer.from(at,"binary").toString("base64"));function mt(at){const yt=[];for(const Dt of at)yt.push(String.fromCharCode(Dt));return rt(yt.join(""))}function Vt(at){if(at.gt(Number.MAX_SAFE_INTEGER))throw new Ht.Error("Value is larger than Number.MAX_SAFE_INTEGER");return at.toNumber()}c.default.util.Long!==d.default&&(c.default.util.Long=d.default,c.default.configure())})(livekit_models);var LocalParticipant$1={},livekit_rtc={};(function(a){var s=commonjsGlobal&&commonjsGlobal.__importDefault||function($){return $&&$.__esModule?$:{default:$}};Object.defineProperty(a,"__esModule",{value:!0}),a.SimulateScenario=a.SyncState=a.SubscriptionPermissionUpdate=a.UpdateSubscriptionPermissions=a.TrackPermission=a.SubscribedQualityUpdate=a.SubscribedQuality=a.StreamStateUpdate=a.StreamStateInfo=a.ConnectionQualityUpdate=a.ConnectionQualityInfo=a.RoomUpdate=a.SpeakersChanged=a.ICEServer=a.UpdateVideoLayers=a.LeaveRequest=a.UpdateTrackSettings=a.UpdateSubscription=a.ParticipantUpdate=a.SessionDescription=a.TrackPublishedResponse=a.JoinResponse=a.MuteTrackRequest=a.TrickleRequest=a.AddTrackRequest=a.SignalResponse=a.SignalRequest=a.streamStateToJSON=a.streamStateFromJSON=a.StreamState=a.signalTargetToJSON=a.signalTargetFromJSON=a.SignalTarget=a.protobufPackage=void 0;const d=s(umd.exports),c=s(minimal),m=livekit_models;a.protobufPackage="livekit";var g;(function($){$[$.PUBLISHER=0]="PUBLISHER",$[$.SUBSCRIBER=1]="SUBSCRIBER",$[$.UNRECOGNIZED=-1]="UNRECOGNIZED"})(g=a.SignalTarget||(a.SignalTarget={}));function b($){switch($){case 0:case"PUBLISHER":return g.PUBLISHER;case 1:case"SUBSCRIBER":return g.SUBSCRIBER;case-1:case"UNRECOGNIZED":default:return g.UNRECOGNIZED}}a.signalTargetFromJSON=b;function k($){switch($){case g.PUBLISHER:return"PUBLISHER";case g.SUBSCRIBER:return"SUBSCRIBER";default:return"UNKNOWN"}}a.signalTargetToJSON=k;var et;(function($){$[$.ACTIVE=0]="ACTIVE",$[$.PAUSED=1]="PAUSED",$[$.UNRECOGNIZED=-1]="UNRECOGNIZED"})(et=a.StreamState||(a.StreamState={}));function nt($){switch($){case 0:case"ACTIVE":return et.ACTIVE;case 1:case"PAUSED":return et.PAUSED;case-1:case"UNRECOGNIZED":default:return et.UNRECOGNIZED}}a.streamStateFromJSON=nt;function it($){switch($){case et.ACTIVE:return"ACTIVE";case et.PAUSED:return"PAUSED";default:return"UNKNOWN"}}a.streamStateToJSON=it;const ct={};a.SignalRequest={encode($,rt=c.default.Writer.create()){return $.offer!==void 0&&a.SessionDescription.encode($.offer,rt.uint32(10).fork()).ldelim(),$.answer!==void 0&&a.SessionDescription.encode($.answer,rt.uint32(18).fork()).ldelim(),$.trickle!==void 0&&a.TrickleRequest.encode($.trickle,rt.uint32(26).fork()).ldelim(),$.addTrack!==void 0&&a.AddTrackRequest.encode($.addTrack,rt.uint32(34).fork()).ldelim(),$.mute!==void 0&&a.MuteTrackRequest.encode($.mute,rt.uint32(42).fork()).ldelim(),$.subscription!==void 0&&a.UpdateSubscription.encode($.subscription,rt.uint32(50).fork()).ldelim(),$.trackSetting!==void 0&&a.UpdateTrackSettings.encode($.trackSetting,rt.uint32(58).fork()).ldelim(),$.leave!==void 0&&a.LeaveRequest.encode($.leave,rt.uint32(66).fork()).ldelim(),$.updateLayers!==void 0&&a.UpdateVideoLayers.encode($.updateLayers,rt.uint32(82).fork()).ldelim(),$.subscriptionPermissions!==void 0&&a.UpdateSubscriptionPermissions.encode($.subscriptionPermissions,rt.uint32(90).fork()).ldelim(),$.syncState!==void 0&&a.SyncState.encode($.syncState,rt.uint32(98).fork()).ldelim(),$.simulate!==void 0&&a.SimulateScenario.encode($.simulate,rt.uint32(106).fork()).ldelim(),rt},decode($,rt){const mt=$ instanceof c.default.Reader?$:new c.default.Reader($);let Vt=rt===void 0?mt.len:mt.pos+rt;const at=Object.assign({},ct);for(;mt.pos<Vt;){const yt=mt.uint32();switch(yt>>>3){case 1:at.offer=a.SessionDescription.decode(mt,mt.uint32());break;case 2:at.answer=a.SessionDescription.decode(mt,mt.uint32());break;case 3:at.trickle=a.TrickleRequest.decode(mt,mt.uint32());break;case 4:at.addTrack=a.AddTrackRequest.decode(mt,mt.uint32());break;case 5:at.mute=a.MuteTrackRequest.decode(mt,mt.uint32());break;case 6:at.subscription=a.UpdateSubscription.decode(mt,mt.uint32());break;case 7:at.trackSetting=a.UpdateTrackSettings.decode(mt,mt.uint32());break;case 8:at.leave=a.LeaveRequest.decode(mt,mt.uint32());break;case 10:at.updateLayers=a.UpdateVideoLayers.decode(mt,mt.uint32());break;case 11:at.subscriptionPermissions=a.UpdateSubscriptionPermissions.decode(mt,mt.uint32());break;case 12:at.syncState=a.SyncState.decode(mt,mt.uint32());break;case 13:at.simulate=a.SimulateScenario.decode(mt,mt.uint32());break;default:mt.skipType(yt&7);break}}return at},fromJSON($){const rt=Object.assign({},ct);return $.offer!==void 0&&$.offer!==null?rt.offer=a.SessionDescription.fromJSON($.offer):rt.offer=void 0,$.answer!==void 0&&$.answer!==null?rt.answer=a.SessionDescription.fromJSON($.answer):rt.answer=void 0,$.trickle!==void 0&&$.trickle!==null?rt.trickle=a.TrickleRequest.fromJSON($.trickle):rt.trickle=void 0,$.addTrack!==void 0&&$.addTrack!==null?rt.addTrack=a.AddTrackRequest.fromJSON($.addTrack):rt.addTrack=void 0,$.mute!==void 0&&$.mute!==null?rt.mute=a.MuteTrackRequest.fromJSON($.mute):rt.mute=void 0,$.subscription!==void 0&&$.subscription!==null?rt.subscription=a.UpdateSubscription.fromJSON($.subscription):rt.subscription=void 0,$.trackSetting!==void 0&&$.trackSetting!==null?rt.trackSetting=a.UpdateTrackSettings.fromJSON($.trackSetting):rt.trackSetting=void 0,$.leave!==void 0&&$.leave!==null?rt.leave=a.LeaveRequest.fromJSON($.leave):rt.leave=void 0,$.updateLayers!==void 0&&$.updateLayers!==null?rt.updateLayers=a.UpdateVideoLayers.fromJSON($.updateLayers):rt.updateLayers=void 0,$.subscriptionPermissions!==void 0&&$.subscriptionPermissions!==null?rt.subscriptionPermissions=a.UpdateSubscriptionPermissions.fromJSON($.subscriptionPermissions):rt.subscriptionPermissions=void 0,$.syncState!==void 0&&$.syncState!==null?rt.syncState=a.SyncState.fromJSON($.syncState):rt.syncState=void 0,$.simulate!==void 0&&$.simulate!==null?rt.simulate=a.SimulateScenario.fromJSON($.simulate):rt.simulate=void 0,rt},toJSON($){const rt={};return $.offer!==void 0&&(rt.offer=$.offer?a.SessionDescription.toJSON($.offer):void 0),$.answer!==void 0&&(rt.answer=$.answer?a.SessionDescription.toJSON($.answer):void 0),$.trickle!==void 0&&(rt.trickle=$.trickle?a.TrickleRequest.toJSON($.trickle):void 0),$.addTrack!==void 0&&(rt.addTrack=$.addTrack?a.AddTrackRequest.toJSON($.addTrack):void 0),$.mute!==void 0&&(rt.mute=$.mute?a.MuteTrackRequest.toJSON($.mute):void 0),$.subscription!==void 0&&(rt.subscription=$.subscription?a.UpdateSubscription.toJSON($.subscription):void 0),$.trackSetting!==void 0&&(rt.trackSetting=$.trackSetting?a.UpdateTrackSettings.toJSON($.trackSetting):void 0),$.leave!==void 0&&(rt.leave=$.leave?a.LeaveRequest.toJSON($.leave):void 0),$.updateLayers!==void 0&&(rt.updateLayers=$.updateLayers?a.UpdateVideoLayers.toJSON($.updateLayers):void 0),$.subscriptionPermissions!==void 0&&(rt.subscriptionPermissions=$.subscriptionPermissions?a.UpdateSubscriptionPermissions.toJSON($.subscriptionPermissions):void 0),$.syncState!==void 0&&(rt.syncState=$.syncState?a.SyncState.toJSON($.syncState):void 0),$.simulate!==void 0&&(rt.simulate=$.simulate?a.SimulateScenario.toJSON($.simulate):void 0),rt},fromPartial($){const rt=Object.assign({},ct);return $.offer!==void 0&&$.offer!==null?rt.offer=a.SessionDescription.fromPartial($.offer):rt.offer=void 0,$.answer!==void 0&&$.answer!==null?rt.answer=a.SessionDescription.fromPartial($.answer):rt.answer=void 0,$.trickle!==void 0&&$.trickle!==null?rt.trickle=a.TrickleRequest.fromPartial($.trickle):rt.trickle=void 0,$.addTrack!==void 0&&$.addTrack!==null?rt.addTrack=a.AddTrackRequest.fromPartial($.addTrack):rt.addTrack=void 0,$.mute!==void 0&&$.mute!==null?rt.mute=a.MuteTrackRequest.fromPartial($.mute):rt.mute=void 0,$.subscription!==void 0&&$.subscription!==null?rt.subscription=a.UpdateSubscription.fromPartial($.subscription):rt.subscription=void 0,$.trackSetting!==void 0&&$.trackSetting!==null?rt.trackSetting=a.UpdateTrackSettings.fromPartial($.trackSetting):rt.trackSetting=void 0,$.leave!==void 0&&$.leave!==null?rt.leave=a.LeaveRequest.fromPartial($.leave):rt.leave=void 0,$.updateLayers!==void 0&&$.updateLayers!==null?rt.updateLayers=a.UpdateVideoLayers.fromPartial($.updateLayers):rt.updateLayers=void 0,$.subscriptionPermissions!==void 0&&$.subscriptionPermissions!==null?rt.subscriptionPermissions=a.UpdateSubscriptionPermissions.fromPartial($.subscriptionPermissions):rt.subscriptionPermissions=void 0,$.syncState!==void 0&&$.syncState!==null?rt.syncState=a.SyncState.fromPartial($.syncState):rt.syncState=void 0,$.simulate!==void 0&&$.simulate!==null?rt.simulate=a.SimulateScenario.fromPartial($.simulate):rt.simulate=void 0,rt}};const st={};a.SignalResponse={encode($,rt=c.default.Writer.create()){return $.join!==void 0&&a.JoinResponse.encode($.join,rt.uint32(10).fork()).ldelim(),$.answer!==void 0&&a.SessionDescription.encode($.answer,rt.uint32(18).fork()).ldelim(),$.offer!==void 0&&a.SessionDescription.encode($.offer,rt.uint32(26).fork()).ldelim(),$.trickle!==void 0&&a.TrickleRequest.encode($.trickle,rt.uint32(34).fork()).ldelim(),$.update!==void 0&&a.ParticipantUpdate.encode($.update,rt.uint32(42).fork()).ldelim(),$.trackPublished!==void 0&&a.TrackPublishedResponse.encode($.trackPublished,rt.uint32(50).fork()).ldelim(),$.leave!==void 0&&a.LeaveRequest.encode($.leave,rt.uint32(66).fork()).ldelim(),$.mute!==void 0&&a.MuteTrackRequest.encode($.mute,rt.uint32(74).fork()).ldelim(),$.speakersChanged!==void 0&&a.SpeakersChanged.encode($.speakersChanged,rt.uint32(82).fork()).ldelim(),$.roomUpdate!==void 0&&a.RoomUpdate.encode($.roomUpdate,rt.uint32(90).fork()).ldelim(),$.connectionQuality!==void 0&&a.ConnectionQualityUpdate.encode($.connectionQuality,rt.uint32(98).fork()).ldelim(),$.streamStateUpdate!==void 0&&a.StreamStateUpdate.encode($.streamStateUpdate,rt.uint32(106).fork()).ldelim(),$.subscribedQualityUpdate!==void 0&&a.SubscribedQualityUpdate.encode($.subscribedQualityUpdate,rt.uint32(114).fork()).ldelim(),$.subscriptionPermissionUpdate!==void 0&&a.SubscriptionPermissionUpdate.encode($.subscriptionPermissionUpdate,rt.uint32(122).fork()).ldelim(),rt},decode($,rt){const mt=$ instanceof c.default.Reader?$:new c.default.Reader($);let Vt=rt===void 0?mt.len:mt.pos+rt;const at=Object.assign({},st);for(;mt.pos<Vt;){const yt=mt.uint32();switch(yt>>>3){case 1:at.join=a.JoinResponse.decode(mt,mt.uint32());break;case 2:at.answer=a.SessionDescription.decode(mt,mt.uint32());break;case 3:at.offer=a.SessionDescription.decode(mt,mt.uint32());break;case 4:at.trickle=a.TrickleRequest.decode(mt,mt.uint32());break;case 5:at.update=a.ParticipantUpdate.decode(mt,mt.uint32());break;case 6:at.trackPublished=a.TrackPublishedResponse.decode(mt,mt.uint32());break;case 8:at.leave=a.LeaveRequest.decode(mt,mt.uint32());break;case 9:at.mute=a.MuteTrackRequest.decode(mt,mt.uint32());break;case 10:at.speakersChanged=a.SpeakersChanged.decode(mt,mt.uint32());break;case 11:at.roomUpdate=a.RoomUpdate.decode(mt,mt.uint32());break;case 12:at.connectionQuality=a.ConnectionQualityUpdate.decode(mt,mt.uint32());break;case 13:at.streamStateUpdate=a.StreamStateUpdate.decode(mt,mt.uint32());break;case 14:at.subscribedQualityUpdate=a.SubscribedQualityUpdate.decode(mt,mt.uint32());break;case 15:at.subscriptionPermissionUpdate=a.SubscriptionPermissionUpdate.decode(mt,mt.uint32());break;default:mt.skipType(yt&7);break}}return at},fromJSON($){const rt=Object.assign({},st);return $.join!==void 0&&$.join!==null?rt.join=a.JoinResponse.fromJSON($.join):rt.join=void 0,$.answer!==void 0&&$.answer!==null?rt.answer=a.SessionDescription.fromJSON($.answer):rt.answer=void 0,$.offer!==void 0&&$.offer!==null?rt.offer=a.SessionDescription.fromJSON($.offer):rt.offer=void 0,$.trickle!==void 0&&$.trickle!==null?rt.trickle=a.TrickleRequest.fromJSON($.trickle):rt.trickle=void 0,$.update!==void 0&&$.update!==null?rt.update=a.ParticipantUpdate.fromJSON($.update):rt.update=void 0,$.trackPublished!==void 0&&$.trackPublished!==null?rt.trackPublished=a.TrackPublishedResponse.fromJSON($.trackPublished):rt.trackPublished=void 0,$.leave!==void 0&&$.leave!==null?rt.leave=a.LeaveRequest.fromJSON($.leave):rt.leave=void 0,$.mute!==void 0&&$.mute!==null?rt.mute=a.MuteTrackRequest.fromJSON($.mute):rt.mute=void 0,$.speakersChanged!==void 0&&$.speakersChanged!==null?rt.speakersChanged=a.SpeakersChanged.fromJSON($.speakersChanged):rt.speakersChanged=void 0,$.roomUpdate!==void 0&&$.roomUpdate!==null?rt.roomUpdate=a.RoomUpdate.fromJSON($.roomUpdate):rt.roomUpdate=void 0,$.connectionQuality!==void 0&&$.connectionQuality!==null?rt.connectionQuality=a.ConnectionQualityUpdate.fromJSON($.connectionQuality):rt.connectionQuality=void 0,$.streamStateUpdate!==void 0&&$.streamStateUpdate!==null?rt.streamStateUpdate=a.StreamStateUpdate.fromJSON($.streamStateUpdate):rt.streamStateUpdate=void 0,$.subscribedQualityUpdate!==void 0&&$.subscribedQualityUpdate!==null?rt.subscribedQualityUpdate=a.SubscribedQualityUpdate.fromJSON($.subscribedQualityUpdate):rt.subscribedQualityUpdate=void 0,$.subscriptionPermissionUpdate!==void 0&&$.subscriptionPermissionUpdate!==null?rt.subscriptionPermissionUpdate=a.SubscriptionPermissionUpdate.fromJSON($.subscriptionPermissionUpdate):rt.subscriptionPermissionUpdate=void 0,rt},toJSON($){const rt={};return $.join!==void 0&&(rt.join=$.join?a.JoinResponse.toJSON($.join):void 0),$.answer!==void 0&&(rt.answer=$.answer?a.SessionDescription.toJSON($.answer):void 0),$.offer!==void 0&&(rt.offer=$.offer?a.SessionDescription.toJSON($.offer):void 0),$.trickle!==void 0&&(rt.trickle=$.trickle?a.TrickleRequest.toJSON($.trickle):void 0),$.update!==void 0&&(rt.update=$.update?a.ParticipantUpdate.toJSON($.update):void 0),$.trackPublished!==void 0&&(rt.trackPublished=$.trackPublished?a.TrackPublishedResponse.toJSON($.trackPublished):void 0),$.leave!==void 0&&(rt.leave=$.leave?a.LeaveRequest.toJSON($.leave):void 0),$.mute!==void 0&&(rt.mute=$.mute?a.MuteTrackRequest.toJSON($.mute):void 0),$.speakersChanged!==void 0&&(rt.speakersChanged=$.speakersChanged?a.SpeakersChanged.toJSON($.speakersChanged):void 0),$.roomUpdate!==void 0&&(rt.roomUpdate=$.roomUpdate?a.RoomUpdate.toJSON($.roomUpdate):void 0),$.connectionQuality!==void 0&&(rt.connectionQuality=$.connectionQuality?a.ConnectionQualityUpdate.toJSON($.connectionQuality):void 0),$.streamStateUpdate!==void 0&&(rt.streamStateUpdate=$.streamStateUpdate?a.StreamStateUpdate.toJSON($.streamStateUpdate):void 0),$.subscribedQualityUpdate!==void 0&&(rt.subscribedQualityUpdate=$.subscribedQualityUpdate?a.SubscribedQualityUpdate.toJSON($.subscribedQualityUpdate):void 0),$.subscriptionPermissionUpdate!==void 0&&(rt.subscriptionPermissionUpdate=$.subscriptionPermissionUpdate?a.SubscriptionPermissionUpdate.toJSON($.subscriptionPermissionUpdate):void 0),rt},fromPartial($){const rt=Object.assign({},st);return $.join!==void 0&&$.join!==null?rt.join=a.JoinResponse.fromPartial($.join):rt.join=void 0,$.answer!==void 0&&$.answer!==null?rt.answer=a.SessionDescription.fromPartial($.answer):rt.answer=void 0,$.offer!==void 0&&$.offer!==null?rt.offer=a.SessionDescription.fromPartial($.offer):rt.offer=void 0,$.trickle!==void 0&&$.trickle!==null?rt.trickle=a.TrickleRequest.fromPartial($.trickle):rt.trickle=void 0,$.update!==void 0&&$.update!==null?rt.update=a.ParticipantUpdate.fromPartial($.update):rt.update=void 0,$.trackPublished!==void 0&&$.trackPublished!==null?rt.trackPublished=a.TrackPublishedResponse.fromPartial($.trackPublished):rt.trackPublished=void 0,$.leave!==void 0&&$.leave!==null?rt.leave=a.LeaveRequest.fromPartial($.leave):rt.leave=void 0,$.mute!==void 0&&$.mute!==null?rt.mute=a.MuteTrackRequest.fromPartial($.mute):rt.mute=void 0,$.speakersChanged!==void 0&&$.speakersChanged!==null?rt.speakersChanged=a.SpeakersChanged.fromPartial($.speakersChanged):rt.speakersChanged=void 0,$.roomUpdate!==void 0&&$.roomUpdate!==null?rt.roomUpdate=a.RoomUpdate.fromPartial($.roomUpdate):rt.roomUpdate=void 0,$.connectionQuality!==void 0&&$.connectionQuality!==null?rt.connectionQuality=a.ConnectionQualityUpdate.fromPartial($.connectionQuality):rt.connectionQuality=void 0,$.streamStateUpdate!==void 0&&$.streamStateUpdate!==null?rt.streamStateUpdate=a.StreamStateUpdate.fromPartial($.streamStateUpdate):rt.streamStateUpdate=void 0,$.subscribedQualityUpdate!==void 0&&$.subscribedQualityUpdate!==null?rt.subscribedQualityUpdate=a.SubscribedQualityUpdate.fromPartial($.subscribedQualityUpdate):rt.subscribedQualityUpdate=void 0,$.subscriptionPermissionUpdate!==void 0&&$.subscriptionPermissionUpdate!==null?rt.subscriptionPermissionUpdate=a.SubscriptionPermissionUpdate.fromPartial($.subscriptionPermissionUpdate):rt.subscriptionPermissionUpdate=void 0,rt}};const ut={cid:"",name:"",type:0,width:0,height:0,muted:!1,disableDtx:!1,source:0};a.AddTrackRequest={encode($,rt=c.default.Writer.create()){$.cid!==""&&rt.uint32(10).string($.cid),$.name!==""&&rt.uint32(18).string($.name),$.type!==0&&rt.uint32(24).int32($.type),$.width!==0&&rt.uint32(32).uint32($.width),$.height!==0&&rt.uint32(40).uint32($.height),$.muted===!0&&rt.uint32(48).bool($.muted),$.disableDtx===!0&&rt.uint32(56).bool($.disableDtx),$.source!==0&&rt.uint32(64).int32($.source);for(const mt of $.layers)m.VideoLayer.encode(mt,rt.uint32(74).fork()).ldelim();return rt},decode($,rt){const mt=$ instanceof c.default.Reader?$:new c.default.Reader($);let Vt=rt===void 0?mt.len:mt.pos+rt;const at=Object.assign({},ut);for(at.layers=[];mt.pos<Vt;){const yt=mt.uint32();switch(yt>>>3){case 1:at.cid=mt.string();break;case 2:at.name=mt.string();break;case 3:at.type=mt.int32();break;case 4:at.width=mt.uint32();break;case 5:at.height=mt.uint32();break;case 6:at.muted=mt.bool();break;case 7:at.disableDtx=mt.bool();break;case 8:at.source=mt.int32();break;case 9:at.layers.push(m.VideoLayer.decode(mt,mt.uint32()));break;default:mt.skipType(yt&7);break}}return at},fromJSON($){const rt=Object.assign({},ut);if(rt.layers=[],$.cid!==void 0&&$.cid!==null?rt.cid=String($.cid):rt.cid="",$.name!==void 0&&$.name!==null?rt.name=String($.name):rt.name="",$.type!==void 0&&$.type!==null?rt.type=m.trackTypeFromJSON($.type):rt.type=0,$.width!==void 0&&$.width!==null?rt.width=Number($.width):rt.width=0,$.height!==void 0&&$.height!==null?rt.height=Number($.height):rt.height=0,$.muted!==void 0&&$.muted!==null?rt.muted=Boolean($.muted):rt.muted=!1,$.disableDtx!==void 0&&$.disableDtx!==null?rt.disableDtx=Boolean($.disableDtx):rt.disableDtx=!1,$.source!==void 0&&$.source!==null?rt.source=m.trackSourceFromJSON($.source):rt.source=0,$.layers!==void 0&&$.layers!==null)for(const mt of $.layers)rt.layers.push(m.VideoLayer.fromJSON(mt));return rt},toJSON($){const rt={};return $.cid!==void 0&&(rt.cid=$.cid),$.name!==void 0&&(rt.name=$.name),$.type!==void 0&&(rt.type=m.trackTypeToJSON($.type)),$.width!==void 0&&(rt.width=$.width),$.height!==void 0&&(rt.height=$.height),$.muted!==void 0&&(rt.muted=$.muted),$.disableDtx!==void 0&&(rt.disableDtx=$.disableDtx),$.source!==void 0&&(rt.source=m.trackSourceToJSON($.source)),$.layers?rt.layers=$.layers.map(mt=>mt?m.VideoLayer.toJSON(mt):void 0):rt.layers=[],rt},fromPartial($){var rt,mt,Vt,at,yt,Dt,Gt,Bt;const xt=Object.assign({},ut);if(xt.cid=(rt=$.cid)!==null&&rt!==void 0?rt:"",xt.name=(mt=$.name)!==null&&mt!==void 0?mt:"",xt.type=(Vt=$.type)!==null&&Vt!==void 0?Vt:0,xt.width=(at=$.width)!==null&&at!==void 0?at:0,xt.height=(yt=$.height)!==null&&yt!==void 0?yt:0,xt.muted=(Dt=$.muted)!==null&&Dt!==void 0?Dt:!1,xt.disableDtx=(Gt=$.disableDtx)!==null&&Gt!==void 0?Gt:!1,xt.source=(Bt=$.source)!==null&&Bt!==void 0?Bt:0,xt.layers=[],$.layers!==void 0&&$.layers!==null)for(const tn of $.layers)xt.layers.push(m.VideoLayer.fromPartial(tn));return xt}};const pt={candidateInit:"",target:0};a.TrickleRequest={encode($,rt=c.default.Writer.create()){return $.candidateInit!==""&&rt.uint32(10).string($.candidateInit),$.target!==0&&rt.uint32(16).int32($.target),rt},decode($,rt){const mt=$ instanceof c.default.Reader?$:new c.default.Reader($);let Vt=rt===void 0?mt.len:mt.pos+rt;const at=Object.assign({},pt);for(;mt.pos<Vt;){const yt=mt.uint32();switch(yt>>>3){case 1:at.candidateInit=mt.string();break;case 2:at.target=mt.int32();break;default:mt.skipType(yt&7);break}}return at},fromJSON($){const rt=Object.assign({},pt);return $.candidateInit!==void 0&&$.candidateInit!==null?rt.candidateInit=String($.candidateInit):rt.candidateInit="",$.target!==void 0&&$.target!==null?rt.target=b($.target):rt.target=0,rt},toJSON($){const rt={};return $.candidateInit!==void 0&&(rt.candidateInit=$.candidateInit),$.target!==void 0&&(rt.target=k($.target)),rt},fromPartial($){var rt,mt;const Vt=Object.assign({},pt);return Vt.candidateInit=(rt=$.candidateInit)!==null&&rt!==void 0?rt:"",Vt.target=(mt=$.target)!==null&&mt!==void 0?mt:0,Vt}};const St={sid:"",muted:!1};a.MuteTrackRequest={encode($,rt=c.default.Writer.create()){return $.sid!==""&&rt.uint32(10).string($.sid),$.muted===!0&&rt.uint32(16).bool($.muted),rt},decode($,rt){const mt=$ instanceof c.default.Reader?$:new c.default.Reader($);let Vt=rt===void 0?mt.len:mt.pos+rt;const at=Object.assign({},St);for(;mt.pos<Vt;){const yt=mt.uint32();switch(yt>>>3){case 1:at.sid=mt.string();break;case 2:at.muted=mt.bool();break;default:mt.skipType(yt&7);break}}return at},fromJSON($){const rt=Object.assign({},St);return $.sid!==void 0&&$.sid!==null?rt.sid=String($.sid):rt.sid="",$.muted!==void 0&&$.muted!==null?rt.muted=Boolean($.muted):rt.muted=!1,rt},toJSON($){const rt={};return $.sid!==void 0&&(rt.sid=$.sid),$.muted!==void 0&&(rt.muted=$.muted),rt},fromPartial($){var rt,mt;const Vt=Object.assign({},St);return Vt.sid=(rt=$.sid)!==null&&rt!==void 0?rt:"",Vt.muted=(mt=$.muted)!==null&&mt!==void 0?mt:!1,Vt}};const _t={serverVersion:"",subscriberPrimary:!1,alternativeUrl:""};a.JoinResponse={encode($,rt=c.default.Writer.create()){$.room!==void 0&&m.Room.encode($.room,rt.uint32(10).fork()).ldelim(),$.participant!==void 0&&m.ParticipantInfo.encode($.participant,rt.uint32(18).fork()).ldelim();for(const mt of $.otherParticipants)m.ParticipantInfo.encode(mt,rt.uint32(26).fork()).ldelim();$.serverVersion!==""&&rt.uint32(34).string($.serverVersion);for(const mt of $.iceServers)a.ICEServer.encode(mt,rt.uint32(42).fork()).ldelim();return $.subscriberPrimary===!0&&rt.uint32(48).bool($.subscriberPrimary),$.alternativeUrl!==""&&rt.uint32(58).string($.alternativeUrl),rt},decode($,rt){const mt=$ instanceof c.default.Reader?$:new c.default.Reader($);let Vt=rt===void 0?mt.len:mt.pos+rt;const at=Object.assign({},_t);for(at.otherParticipants=[],at.iceServers=[];mt.pos<Vt;){const yt=mt.uint32();switch(yt>>>3){case 1:at.room=m.Room.decode(mt,mt.uint32());break;case 2:at.participant=m.ParticipantInfo.decode(mt,mt.uint32());break;case 3:at.otherParticipants.push(m.ParticipantInfo.decode(mt,mt.uint32()));break;case 4:at.serverVersion=mt.string();break;case 5:at.iceServers.push(a.ICEServer.decode(mt,mt.uint32()));break;case 6:at.subscriberPrimary=mt.bool();break;case 7:at.alternativeUrl=mt.string();break;default:mt.skipType(yt&7);break}}return at},fromJSON($){const rt=Object.assign({},_t);if(rt.otherParticipants=[],rt.iceServers=[],$.room!==void 0&&$.room!==null?rt.room=m.Room.fromJSON($.room):rt.room=void 0,$.participant!==void 0&&$.participant!==null?rt.participant=m.ParticipantInfo.fromJSON($.participant):rt.participant=void 0,$.otherParticipants!==void 0&&$.otherParticipants!==null)for(const mt of $.otherParticipants)rt.otherParticipants.push(m.ParticipantInfo.fromJSON(mt));if($.serverVersion!==void 0&&$.serverVersion!==null?rt.serverVersion=String($.serverVersion):rt.serverVersion="",$.iceServers!==void 0&&$.iceServers!==null)for(const mt of $.iceServers)rt.iceServers.push(a.ICEServer.fromJSON(mt));return $.subscriberPrimary!==void 0&&$.subscriberPrimary!==null?rt.subscriberPrimary=Boolean($.subscriberPrimary):rt.subscriberPrimary=!1,$.alternativeUrl!==void 0&&$.alternativeUrl!==null?rt.alternativeUrl=String($.alternativeUrl):rt.alternativeUrl="",rt},toJSON($){const rt={};return $.room!==void 0&&(rt.room=$.room?m.Room.toJSON($.room):void 0),$.participant!==void 0&&(rt.participant=$.participant?m.ParticipantInfo.toJSON($.participant):void 0),$.otherParticipants?rt.otherParticipants=$.otherParticipants.map(mt=>mt?m.ParticipantInfo.toJSON(mt):void 0):rt.otherParticipants=[],$.serverVersion!==void 0&&(rt.serverVersion=$.serverVersion),$.iceServers?rt.iceServers=$.iceServers.map(mt=>mt?a.ICEServer.toJSON(mt):void 0):rt.iceServers=[],$.subscriberPrimary!==void 0&&(rt.subscriberPrimary=$.subscriberPrimary),$.alternativeUrl!==void 0&&(rt.alternativeUrl=$.alternativeUrl),rt},fromPartial($){var rt,mt,Vt;const at=Object.assign({},_t);if($.room!==void 0&&$.room!==null?at.room=m.Room.fromPartial($.room):at.room=void 0,$.participant!==void 0&&$.participant!==null?at.participant=m.ParticipantInfo.fromPartial($.participant):at.participant=void 0,at.otherParticipants=[],$.otherParticipants!==void 0&&$.otherParticipants!==null)for(const yt of $.otherParticipants)at.otherParticipants.push(m.ParticipantInfo.fromPartial(yt));if(at.serverVersion=(rt=$.serverVersion)!==null&&rt!==void 0?rt:"",at.iceServers=[],$.iceServers!==void 0&&$.iceServers!==null)for(const yt of $.iceServers)at.iceServers.push(a.ICEServer.fromPartial(yt));return at.subscriberPrimary=(mt=$.subscriberPrimary)!==null&&mt!==void 0?mt:!1,at.alternativeUrl=(Vt=$.alternativeUrl)!==null&&Vt!==void 0?Vt:"",at}};const ht={cid:""};a.TrackPublishedResponse={encode($,rt=c.default.Writer.create()){return $.cid!==""&&rt.uint32(10).string($.cid),$.track!==void 0&&m.TrackInfo.encode($.track,rt.uint32(18).fork()).ldelim(),rt},decode($,rt){const mt=$ instanceof c.default.Reader?$:new c.default.Reader($);let Vt=rt===void 0?mt.len:mt.pos+rt;const at=Object.assign({},ht);for(;mt.pos<Vt;){const yt=mt.uint32();switch(yt>>>3){case 1:at.cid=mt.string();break;case 2:at.track=m.TrackInfo.decode(mt,mt.uint32());break;default:mt.skipType(yt&7);break}}return at},fromJSON($){const rt=Object.assign({},ht);return $.cid!==void 0&&$.cid!==null?rt.cid=String($.cid):rt.cid="",$.track!==void 0&&$.track!==null?rt.track=m.TrackInfo.fromJSON($.track):rt.track=void 0,rt},toJSON($){const rt={};return $.cid!==void 0&&(rt.cid=$.cid),$.track!==void 0&&(rt.track=$.track?m.TrackInfo.toJSON($.track):void 0),rt},fromPartial($){var rt;const mt=Object.assign({},ht);return mt.cid=(rt=$.cid)!==null&&rt!==void 0?rt:"",$.track!==void 0&&$.track!==null?mt.track=m.TrackInfo.fromPartial($.track):mt.track=void 0,mt}};const _e={type:"",sdp:""};a.SessionDescription={encode($,rt=c.default.Writer.create()){return $.type!==""&&rt.uint32(10).string($.type),$.sdp!==""&&rt.uint32(18).string($.sdp),rt},decode($,rt){const mt=$ instanceof c.default.Reader?$:new c.default.Reader($);let Vt=rt===void 0?mt.len:mt.pos+rt;const at=Object.assign({},_e);for(;mt.pos<Vt;){const yt=mt.uint32();switch(yt>>>3){case 1:at.type=mt.string();break;case 2:at.sdp=mt.string();break;default:mt.skipType(yt&7);break}}return at},fromJSON($){const rt=Object.assign({},_e);return $.type!==void 0&&$.type!==null?rt.type=String($.type):rt.type="",$.sdp!==void 0&&$.sdp!==null?rt.sdp=String($.sdp):rt.sdp="",rt},toJSON($){const rt={};return $.type!==void 0&&(rt.type=$.type),$.sdp!==void 0&&(rt.sdp=$.sdp),rt},fromPartial($){var rt,mt;const Vt=Object.assign({},_e);return Vt.type=(rt=$.type)!==null&&rt!==void 0?rt:"",Vt.sdp=(mt=$.sdp)!==null&&mt!==void 0?mt:"",Vt}};const ot={};a.ParticipantUpdate={encode($,rt=c.default.Writer.create()){for(const mt of $.participants)m.ParticipantInfo.encode(mt,rt.uint32(10).fork()).ldelim();return rt},decode($,rt){const mt=$ instanceof c.default.Reader?$:new c.default.Reader($);let Vt=rt===void 0?mt.len:mt.pos+rt;const at=Object.assign({},ot);for(at.participants=[];mt.pos<Vt;){const yt=mt.uint32();switch(yt>>>3){case 1:at.participants.push(m.ParticipantInfo.decode(mt,mt.uint32()));break;default:mt.skipType(yt&7);break}}return at},fromJSON($){const rt=Object.assign({},ot);if(rt.participants=[],$.participants!==void 0&&$.participants!==null)for(const mt of $.participants)rt.participants.push(m.ParticipantInfo.fromJSON(mt));return rt},toJSON($){const rt={};return $.participants?rt.participants=$.participants.map(mt=>mt?m.ParticipantInfo.toJSON(mt):void 0):rt.participants=[],rt},fromPartial($){const rt=Object.assign({},ot);if(rt.participants=[],$.participants!==void 0&&$.participants!==null)for(const mt of $.participants)rt.participants.push(m.ParticipantInfo.fromPartial(mt));return rt}};const lt={trackSids:"",subscribe:!1};a.UpdateSubscription={encode($,rt=c.default.Writer.create()){for(const mt of $.trackSids)rt.uint32(10).string(mt);$.subscribe===!0&&rt.uint32(16).bool($.subscribe);for(const mt of $.participantTracks)m.ParticipantTracks.encode(mt,rt.uint32(26).fork()).ldelim();return rt},decode($,rt){const mt=$ instanceof c.default.Reader?$:new c.default.Reader($);let Vt=rt===void 0?mt.len:mt.pos+rt;const at=Object.assign({},lt);for(at.trackSids=[],at.participantTracks=[];mt.pos<Vt;){const yt=mt.uint32();switch(yt>>>3){case 1:at.trackSids.push(mt.string());break;case 2:at.subscribe=mt.bool();break;case 3:at.participantTracks.push(m.ParticipantTracks.decode(mt,mt.uint32()));break;default:mt.skipType(yt&7);break}}return at},fromJSON($){const rt=Object.assign({},lt);if(rt.trackSids=[],rt.participantTracks=[],$.trackSids!==void 0&&$.trackSids!==null)for(const mt of $.trackSids)rt.trackSids.push(String(mt));if($.subscribe!==void 0&&$.subscribe!==null?rt.subscribe=Boolean($.subscribe):rt.subscribe=!1,$.participantTracks!==void 0&&$.participantTracks!==null)for(const mt of $.participantTracks)rt.participantTracks.push(m.ParticipantTracks.fromJSON(mt));return rt},toJSON($){const rt={};return $.trackSids?rt.trackSids=$.trackSids.map(mt=>mt):rt.trackSids=[],$.subscribe!==void 0&&(rt.subscribe=$.subscribe),$.participantTracks?rt.participantTracks=$.participantTracks.map(mt=>mt?m.ParticipantTracks.toJSON(mt):void 0):rt.participantTracks=[],rt},fromPartial($){var rt;const mt=Object.assign({},lt);if(mt.trackSids=[],$.trackSids!==void 0&&$.trackSids!==null)for(const Vt of $.trackSids)mt.trackSids.push(Vt);if(mt.subscribe=(rt=$.subscribe)!==null&&rt!==void 0?rt:!1,mt.participantTracks=[],$.participantTracks!==void 0&&$.participantTracks!==null)for(const Vt of $.participantTracks)mt.participantTracks.push(m.ParticipantTracks.fromPartial(Vt));return mt}};const Ot={trackSids:"",disabled:!1,quality:0,width:0,height:0};a.UpdateTrackSettings={encode($,rt=c.default.Writer.create()){for(const mt of $.trackSids)rt.uint32(10).string(mt);return $.disabled===!0&&rt.uint32(24).bool($.disabled),$.quality!==0&&rt.uint32(32).int32($.quality),$.width!==0&&rt.uint32(40).uint32($.width),$.height!==0&&rt.uint32(48).uint32($.height),rt},decode($,rt){const mt=$ instanceof c.default.Reader?$:new c.default.Reader($);let Vt=rt===void 0?mt.len:mt.pos+rt;const at=Object.assign({},Ot);for(at.trackSids=[];mt.pos<Vt;){const yt=mt.uint32();switch(yt>>>3){case 1:at.trackSids.push(mt.string());break;case 3:at.disabled=mt.bool();break;case 4:at.quality=mt.int32();break;case 5:at.width=mt.uint32();break;case 6:at.height=mt.uint32();break;default:mt.skipType(yt&7);break}}return at},fromJSON($){const rt=Object.assign({},Ot);if(rt.trackSids=[],$.trackSids!==void 0&&$.trackSids!==null)for(const mt of $.trackSids)rt.trackSids.push(String(mt));return $.disabled!==void 0&&$.disabled!==null?rt.disabled=Boolean($.disabled):rt.disabled=!1,$.quality!==void 0&&$.quality!==null?rt.quality=m.videoQualityFromJSON($.quality):rt.quality=0,$.width!==void 0&&$.width!==null?rt.width=Number($.width):rt.width=0,$.height!==void 0&&$.height!==null?rt.height=Number($.height):rt.height=0,rt},toJSON($){const rt={};return $.trackSids?rt.trackSids=$.trackSids.map(mt=>mt):rt.trackSids=[],$.disabled!==void 0&&(rt.disabled=$.disabled),$.quality!==void 0&&(rt.quality=m.videoQualityToJSON($.quality)),$.width!==void 0&&(rt.width=$.width),$.height!==void 0&&(rt.height=$.height),rt},fromPartial($){var rt,mt,Vt,at;const yt=Object.assign({},Ot);if(yt.trackSids=[],$.trackSids!==void 0&&$.trackSids!==null)for(const Dt of $.trackSids)yt.trackSids.push(Dt);return yt.disabled=(rt=$.disabled)!==null&&rt!==void 0?rt:!1,yt.quality=(mt=$.quality)!==null&&mt!==void 0?mt:0,yt.width=(Vt=$.width)!==null&&Vt!==void 0?Vt:0,yt.height=(at=$.height)!==null&&at!==void 0?at:0,yt}};const It={canReconnect:!1};a.LeaveRequest={encode($,rt=c.default.Writer.create()){return $.canReconnect===!0&&rt.uint32(8).bool($.canReconnect),rt},decode($,rt){const mt=$ instanceof c.default.Reader?$:new c.default.Reader($);let Vt=rt===void 0?mt.len:mt.pos+rt;const at=Object.assign({},It);for(;mt.pos<Vt;){const yt=mt.uint32();switch(yt>>>3){case 1:at.canReconnect=mt.bool();break;default:mt.skipType(yt&7);break}}return at},fromJSON($){const rt=Object.assign({},It);return $.canReconnect!==void 0&&$.canReconnect!==null?rt.canReconnect=Boolean($.canReconnect):rt.canReconnect=!1,rt},toJSON($){const rt={};return $.canReconnect!==void 0&&(rt.canReconnect=$.canReconnect),rt},fromPartial($){var rt;const mt=Object.assign({},It);return mt.canReconnect=(rt=$.canReconnect)!==null&&rt!==void 0?rt:!1,mt}};const Pt={trackSid:""};a.UpdateVideoLayers={encode($,rt=c.default.Writer.create()){$.trackSid!==""&&rt.uint32(10).string($.trackSid);for(const mt of $.layers)m.VideoLayer.encode(mt,rt.uint32(18).fork()).ldelim();return rt},decode($,rt){const mt=$ instanceof c.default.Reader?$:new c.default.Reader($);let Vt=rt===void 0?mt.len:mt.pos+rt;const at=Object.assign({},Pt);for(at.layers=[];mt.pos<Vt;){const yt=mt.uint32();switch(yt>>>3){case 1:at.trackSid=mt.string();break;case 2:at.layers.push(m.VideoLayer.decode(mt,mt.uint32()));break;default:mt.skipType(yt&7);break}}return at},fromJSON($){const rt=Object.assign({},Pt);if(rt.layers=[],$.trackSid!==void 0&&$.trackSid!==null?rt.trackSid=String($.trackSid):rt.trackSid="",$.layers!==void 0&&$.layers!==null)for(const mt of $.layers)rt.layers.push(m.VideoLayer.fromJSON(mt));return rt},toJSON($){const rt={};return $.trackSid!==void 0&&(rt.trackSid=$.trackSid),$.layers?rt.layers=$.layers.map(mt=>mt?m.VideoLayer.toJSON(mt):void 0):rt.layers=[],rt},fromPartial($){var rt;const mt=Object.assign({},Pt);if(mt.trackSid=(rt=$.trackSid)!==null&&rt!==void 0?rt:"",mt.layers=[],$.layers!==void 0&&$.layers!==null)for(const Vt of $.layers)mt.layers.push(m.VideoLayer.fromPartial(Vt));return mt}};const $t={urls:"",username:"",credential:""};a.ICEServer={encode($,rt=c.default.Writer.create()){for(const mt of $.urls)rt.uint32(10).string(mt);return $.username!==""&&rt.uint32(18).string($.username),$.credential!==""&&rt.uint32(26).string($.credential),rt},decode($,rt){const mt=$ instanceof c.default.Reader?$:new c.default.Reader($);let Vt=rt===void 0?mt.len:mt.pos+rt;const at=Object.assign({},$t);for(at.urls=[];mt.pos<Vt;){const yt=mt.uint32();switch(yt>>>3){case 1:at.urls.push(mt.string());break;case 2:at.username=mt.string();break;case 3:at.credential=mt.string();break;default:mt.skipType(yt&7);break}}return at},fromJSON($){const rt=Object.assign({},$t);if(rt.urls=[],$.urls!==void 0&&$.urls!==null)for(const mt of $.urls)rt.urls.push(String(mt));return $.username!==void 0&&$.username!==null?rt.username=String($.username):rt.username="",$.credential!==void 0&&$.credential!==null?rt.credential=String($.credential):rt.credential="",rt},toJSON($){const rt={};return $.urls?rt.urls=$.urls.map(mt=>mt):rt.urls=[],$.username!==void 0&&(rt.username=$.username),$.credential!==void 0&&(rt.credential=$.credential),rt},fromPartial($){var rt,mt;const Vt=Object.assign({},$t);if(Vt.urls=[],$.urls!==void 0&&$.urls!==null)for(const at of $.urls)Vt.urls.push(at);return Vt.username=(rt=$.username)!==null&&rt!==void 0?rt:"",Vt.credential=(mt=$.credential)!==null&&mt!==void 0?mt:"",Vt}};const bt={};a.SpeakersChanged={encode($,rt=c.default.Writer.create()){for(const mt of $.speakers)m.SpeakerInfo.encode(mt,rt.uint32(10).fork()).ldelim();return rt},decode($,rt){const mt=$ instanceof c.default.Reader?$:new c.default.Reader($);let Vt=rt===void 0?mt.len:mt.pos+rt;const at=Object.assign({},bt);for(at.speakers=[];mt.pos<Vt;){const yt=mt.uint32();switch(yt>>>3){case 1:at.speakers.push(m.SpeakerInfo.decode(mt,mt.uint32()));break;default:mt.skipType(yt&7);break}}return at},fromJSON($){const rt=Object.assign({},bt);if(rt.speakers=[],$.speakers!==void 0&&$.speakers!==null)for(const mt of $.speakers)rt.speakers.push(m.SpeakerInfo.fromJSON(mt));return rt},toJSON($){const rt={};return $.speakers?rt.speakers=$.speakers.map(mt=>mt?m.SpeakerInfo.toJSON(mt):void 0):rt.speakers=[],rt},fromPartial($){const rt=Object.assign({},bt);if(rt.speakers=[],$.speakers!==void 0&&$.speakers!==null)for(const mt of $.speakers)rt.speakers.push(m.SpeakerInfo.fromPartial(mt));return rt}};const Rt={};a.RoomUpdate={encode($,rt=c.default.Writer.create()){return $.room!==void 0&&m.Room.encode($.room,rt.uint32(10).fork()).ldelim(),rt},decode($,rt){const mt=$ instanceof c.default.Reader?$:new c.default.Reader($);let Vt=rt===void 0?mt.len:mt.pos+rt;const at=Object.assign({},Rt);for(;mt.pos<Vt;){const yt=mt.uint32();switch(yt>>>3){case 1:at.room=m.Room.decode(mt,mt.uint32());break;default:mt.skipType(yt&7);break}}return at},fromJSON($){const rt=Object.assign({},Rt);return $.room!==void 0&&$.room!==null?rt.room=m.Room.fromJSON($.room):rt.room=void 0,rt},toJSON($){const rt={};return $.room!==void 0&&(rt.room=$.room?m.Room.toJSON($.room):void 0),rt},fromPartial($){const rt=Object.assign({},Rt);return $.room!==void 0&&$.room!==null?rt.room=m.Room.fromPartial($.room):rt.room=void 0,rt}};const Ct={participantSid:"",quality:0,score:0};a.ConnectionQualityInfo={encode($,rt=c.default.Writer.create()){return $.participantSid!==""&&rt.uint32(10).string($.participantSid),$.quality!==0&&rt.uint32(16).int32($.quality),$.score!==0&&rt.uint32(29).float($.score),rt},decode($,rt){const mt=$ instanceof c.default.Reader?$:new c.default.Reader($);let Vt=rt===void 0?mt.len:mt.pos+rt;const at=Object.assign({},Ct);for(;mt.pos<Vt;){const yt=mt.uint32();switch(yt>>>3){case 1:at.participantSid=mt.string();break;case 2:at.quality=mt.int32();break;case 3:at.score=mt.float();break;default:mt.skipType(yt&7);break}}return at},fromJSON($){const rt=Object.assign({},Ct);return $.participantSid!==void 0&&$.participantSid!==null?rt.participantSid=String($.participantSid):rt.participantSid="",$.quality!==void 0&&$.quality!==null?rt.quality=m.connectionQualityFromJSON($.quality):rt.quality=0,$.score!==void 0&&$.score!==null?rt.score=Number($.score):rt.score=0,rt},toJSON($){const rt={};return $.participantSid!==void 0&&(rt.participantSid=$.participantSid),$.quality!==void 0&&(rt.quality=m.connectionQualityToJSON($.quality)),$.score!==void 0&&(rt.score=$.score),rt},fromPartial($){var rt,mt,Vt;const at=Object.assign({},Ct);return at.participantSid=(rt=$.participantSid)!==null&&rt!==void 0?rt:"",at.quality=(mt=$.quality)!==null&&mt!==void 0?mt:0,at.score=(Vt=$.score)!==null&&Vt!==void 0?Vt:0,at}};const vt={};a.ConnectionQualityUpdate={encode($,rt=c.default.Writer.create()){for(const mt of $.updates)a.ConnectionQualityInfo.encode(mt,rt.uint32(10).fork()).ldelim();return rt},decode($,rt){const mt=$ instanceof c.default.Reader?$:new c.default.Reader($);let Vt=rt===void 0?mt.len:mt.pos+rt;const at=Object.assign({},vt);for(at.updates=[];mt.pos<Vt;){const yt=mt.uint32();switch(yt>>>3){case 1:at.updates.push(a.ConnectionQualityInfo.decode(mt,mt.uint32()));break;default:mt.skipType(yt&7);break}}return at},fromJSON($){const rt=Object.assign({},vt);if(rt.updates=[],$.updates!==void 0&&$.updates!==null)for(const mt of $.updates)rt.updates.push(a.ConnectionQualityInfo.fromJSON(mt));return rt},toJSON($){const rt={};return $.updates?rt.updates=$.updates.map(mt=>mt?a.ConnectionQualityInfo.toJSON(mt):void 0):rt.updates=[],rt},fromPartial($){const rt=Object.assign({},vt);if(rt.updates=[],$.updates!==void 0&&$.updates!==null)for(const mt of $.updates)rt.updates.push(a.ConnectionQualityInfo.fromPartial(mt));return rt}};const Tt={participantSid:"",trackSid:"",state:0};a.StreamStateInfo={encode($,rt=c.default.Writer.create()){return $.participantSid!==""&&rt.uint32(10).string($.participantSid),$.trackSid!==""&&rt.uint32(18).string($.trackSid),$.state!==0&&rt.uint32(24).int32($.state),rt},decode($,rt){const mt=$ instanceof c.default.Reader?$:new c.default.Reader($);let Vt=rt===void 0?mt.len:mt.pos+rt;const at=Object.assign({},Tt);for(;mt.pos<Vt;){const yt=mt.uint32();switch(yt>>>3){case 1:at.participantSid=mt.string();break;case 2:at.trackSid=mt.string();break;case 3:at.state=mt.int32();break;default:mt.skipType(yt&7);break}}return at},fromJSON($){const rt=Object.assign({},Tt);return $.participantSid!==void 0&&$.participantSid!==null?rt.participantSid=String($.participantSid):rt.participantSid="",$.trackSid!==void 0&&$.trackSid!==null?rt.trackSid=String($.trackSid):rt.trackSid="",$.state!==void 0&&$.state!==null?rt.state=nt($.state):rt.state=0,rt},toJSON($){const rt={};return $.participantSid!==void 0&&(rt.participantSid=$.participantSid),$.trackSid!==void 0&&(rt.trackSid=$.trackSid),$.state!==void 0&&(rt.state=it($.state)),rt},fromPartial($){var rt,mt,Vt;const at=Object.assign({},Tt);return at.participantSid=(rt=$.participantSid)!==null&&rt!==void 0?rt:"",at.trackSid=(mt=$.trackSid)!==null&&mt!==void 0?mt:"",at.state=(Vt=$.state)!==null&&Vt!==void 0?Vt:0,at}};const wt={};a.StreamStateUpdate={encode($,rt=c.default.Writer.create()){for(const mt of $.streamStates)a.StreamStateInfo.encode(mt,rt.uint32(10).fork()).ldelim();return rt},decode($,rt){const mt=$ instanceof c.default.Reader?$:new c.default.Reader($);let Vt=rt===void 0?mt.len:mt.pos+rt;const at=Object.assign({},wt);for(at.streamStates=[];mt.pos<Vt;){const yt=mt.uint32();switch(yt>>>3){case 1:at.streamStates.push(a.StreamStateInfo.decode(mt,mt.uint32()));break;default:mt.skipType(yt&7);break}}return at},fromJSON($){const rt=Object.assign({},wt);if(rt.streamStates=[],$.streamStates!==void 0&&$.streamStates!==null)for(const mt of $.streamStates)rt.streamStates.push(a.StreamStateInfo.fromJSON(mt));return rt},toJSON($){const rt={};return $.streamStates?rt.streamStates=$.streamStates.map(mt=>mt?a.StreamStateInfo.toJSON(mt):void 0):rt.streamStates=[],rt},fromPartial($){const rt=Object.assign({},wt);if(rt.streamStates=[],$.streamStates!==void 0&&$.streamStates!==null)for(const mt of $.streamStates)rt.streamStates.push(a.StreamStateInfo.fromPartial(mt));return rt}};const zt={quality:0,enabled:!1};a.SubscribedQuality={encode($,rt=c.default.Writer.create()){return $.quality!==0&&rt.uint32(8).int32($.quality),$.enabled===!0&&rt.uint32(16).bool($.enabled),rt},decode($,rt){const mt=$ instanceof c.default.Reader?$:new c.default.Reader($);let Vt=rt===void 0?mt.len:mt.pos+rt;const at=Object.assign({},zt);for(;mt.pos<Vt;){const yt=mt.uint32();switch(yt>>>3){case 1:at.quality=mt.int32();break;case 2:at.enabled=mt.bool();break;default:mt.skipType(yt&7);break}}return at},fromJSON($){const rt=Object.assign({},zt);return $.quality!==void 0&&$.quality!==null?rt.quality=m.videoQualityFromJSON($.quality):rt.quality=0,$.enabled!==void 0&&$.enabled!==null?rt.enabled=Boolean($.enabled):rt.enabled=!1,rt},toJSON($){const rt={};return $.quality!==void 0&&(rt.quality=m.videoQualityToJSON($.quality)),$.enabled!==void 0&&(rt.enabled=$.enabled),rt},fromPartial($){var rt,mt;const Vt=Object.assign({},zt);return Vt.quality=(rt=$.quality)!==null&&rt!==void 0?rt:0,Vt.enabled=(mt=$.enabled)!==null&&mt!==void 0?mt:!1,Vt}};const Mt={trackSid:""};a.SubscribedQualityUpdate={encode($,rt=c.default.Writer.create()){$.trackSid!==""&&rt.uint32(10).string($.trackSid);for(const mt of $.subscribedQualities)a.SubscribedQuality.encode(mt,rt.uint32(18).fork()).ldelim();return rt},decode($,rt){const mt=$ instanceof c.default.Reader?$:new c.default.Reader($);let Vt=rt===void 0?mt.len:mt.pos+rt;const at=Object.assign({},Mt);for(at.subscribedQualities=[];mt.pos<Vt;){const yt=mt.uint32();switch(yt>>>3){case 1:at.trackSid=mt.string();break;case 2:at.subscribedQualities.push(a.SubscribedQuality.decode(mt,mt.uint32()));break;default:mt.skipType(yt&7);break}}return at},fromJSON($){const rt=Object.assign({},Mt);if(rt.subscribedQualities=[],$.trackSid!==void 0&&$.trackSid!==null?rt.trackSid=String($.trackSid):rt.trackSid="",$.subscribedQualities!==void 0&&$.subscribedQualities!==null)for(const mt of $.subscribedQualities)rt.subscribedQualities.push(a.SubscribedQuality.fromJSON(mt));return rt},toJSON($){const rt={};return $.trackSid!==void 0&&(rt.trackSid=$.trackSid),$.subscribedQualities?rt.subscribedQualities=$.subscribedQualities.map(mt=>mt?a.SubscribedQuality.toJSON(mt):void 0):rt.subscribedQualities=[],rt},fromPartial($){var rt;const mt=Object.assign({},Mt);if(mt.trackSid=(rt=$.trackSid)!==null&&rt!==void 0?rt:"",mt.subscribedQualities=[],$.subscribedQualities!==void 0&&$.subscribedQualities!==null)for(const Vt of $.subscribedQualities)mt.subscribedQualities.push(a.SubscribedQuality.fromPartial(Vt));return mt}};const Nt={participantSid:"",allTracks:!1,trackSids:""};a.TrackPermission={encode($,rt=c.default.Writer.create()){$.participantSid!==""&&rt.uint32(10).string($.participantSid),$.allTracks===!0&&rt.uint32(16).bool($.allTracks);for(const mt of $.trackSids)rt.uint32(26).string(mt);return rt},decode($,rt){const mt=$ instanceof c.default.Reader?$:new c.default.Reader($);let Vt=rt===void 0?mt.len:mt.pos+rt;const at=Object.assign({},Nt);for(at.trackSids=[];mt.pos<Vt;){const yt=mt.uint32();switch(yt>>>3){case 1:at.participantSid=mt.string();break;case 2:at.allTracks=mt.bool();break;case 3:at.trackSids.push(mt.string());break;default:mt.skipType(yt&7);break}}return at},fromJSON($){const rt=Object.assign({},Nt);if(rt.trackSids=[],$.participantSid!==void 0&&$.participantSid!==null?rt.participantSid=String($.participantSid):rt.participantSid="",$.allTracks!==void 0&&$.allTracks!==null?rt.allTracks=Boolean($.allTracks):rt.allTracks=!1,$.trackSids!==void 0&&$.trackSids!==null)for(const mt of $.trackSids)rt.trackSids.push(String(mt));return rt},toJSON($){const rt={};return $.participantSid!==void 0&&(rt.participantSid=$.participantSid),$.allTracks!==void 0&&(rt.allTracks=$.allTracks),$.trackSids?rt.trackSids=$.trackSids.map(mt=>mt):rt.trackSids=[],rt},fromPartial($){var rt,mt;const Vt=Object.assign({},Nt);if(Vt.participantSid=(rt=$.participantSid)!==null&&rt!==void 0?rt:"",Vt.allTracks=(mt=$.allTracks)!==null&&mt!==void 0?mt:!1,Vt.trackSids=[],$.trackSids!==void 0&&$.trackSids!==null)for(const at of $.trackSids)Vt.trackSids.push(at);return Vt}};const Ft={allParticipants:!1};a.UpdateSubscriptionPermissions={encode($,rt=c.default.Writer.create()){$.allParticipants===!0&&rt.uint32(8).bool($.allParticipants);for(const mt of $.trackPermissions)a.TrackPermission.encode(mt,rt.uint32(18).fork()).ldelim();return rt},decode($,rt){const mt=$ instanceof c.default.Reader?$:new c.default.Reader($);let Vt=rt===void 0?mt.len:mt.pos+rt;const at=Object.assign({},Ft);for(at.trackPermissions=[];mt.pos<Vt;){const yt=mt.uint32();switch(yt>>>3){case 1:at.allParticipants=mt.bool();break;case 2:at.trackPermissions.push(a.TrackPermission.decode(mt,mt.uint32()));break;default:mt.skipType(yt&7);break}}return at},fromJSON($){const rt=Object.assign({},Ft);if(rt.trackPermissions=[],$.allParticipants!==void 0&&$.allParticipants!==null?rt.allParticipants=Boolean($.allParticipants):rt.allParticipants=!1,$.trackPermissions!==void 0&&$.trackPermissions!==null)for(const mt of $.trackPermissions)rt.trackPermissions.push(a.TrackPermission.fromJSON(mt));return rt},toJSON($){const rt={};return $.allParticipants!==void 0&&(rt.allParticipants=$.allParticipants),$.trackPermissions?rt.trackPermissions=$.trackPermissions.map(mt=>mt?a.TrackPermission.toJSON(mt):void 0):rt.trackPermissions=[],rt},fromPartial($){var rt;const mt=Object.assign({},Ft);if(mt.allParticipants=(rt=$.allParticipants)!==null&&rt!==void 0?rt:!1,mt.trackPermissions=[],$.trackPermissions!==void 0&&$.trackPermissions!==null)for(const Vt of $.trackPermissions)mt.trackPermissions.push(a.TrackPermission.fromPartial(Vt));return mt}};const Wt={participantSid:"",trackSid:"",allowed:!1};a.SubscriptionPermissionUpdate={encode($,rt=c.default.Writer.create()){return $.participantSid!==""&&rt.uint32(10).string($.participantSid),$.trackSid!==""&&rt.uint32(18).string($.trackSid),$.allowed===!0&&rt.uint32(24).bool($.allowed),rt},decode($,rt){const mt=$ instanceof c.default.Reader?$:new c.default.Reader($);let Vt=rt===void 0?mt.len:mt.pos+rt;const at=Object.assign({},Wt);for(;mt.pos<Vt;){const yt=mt.uint32();switch(yt>>>3){case 1:at.participantSid=mt.string();break;case 2:at.trackSid=mt.string();break;case 3:at.allowed=mt.bool();break;default:mt.skipType(yt&7);break}}return at},fromJSON($){const rt=Object.assign({},Wt);return $.participantSid!==void 0&&$.participantSid!==null?rt.participantSid=String($.participantSid):rt.participantSid="",$.trackSid!==void 0&&$.trackSid!==null?rt.trackSid=String($.trackSid):rt.trackSid="",$.allowed!==void 0&&$.allowed!==null?rt.allowed=Boolean($.allowed):rt.allowed=!1,rt},toJSON($){const rt={};return $.participantSid!==void 0&&(rt.participantSid=$.participantSid),$.trackSid!==void 0&&(rt.trackSid=$.trackSid),$.allowed!==void 0&&(rt.allowed=$.allowed),rt},fromPartial($){var rt,mt,Vt;const at=Object.assign({},Wt);return at.participantSid=(rt=$.participantSid)!==null&&rt!==void 0?rt:"",at.trackSid=(mt=$.trackSid)!==null&&mt!==void 0?mt:"",at.allowed=(Vt=$.allowed)!==null&&Vt!==void 0?Vt:!1,at}};const Ht={};a.SyncState={encode($,rt=c.default.Writer.create()){$.answer!==void 0&&a.SessionDescription.encode($.answer,rt.uint32(10).fork()).ldelim(),$.subscription!==void 0&&a.UpdateSubscription.encode($.subscription,rt.uint32(18).fork()).ldelim();for(const mt of $.publishTracks)a.TrackPublishedResponse.encode(mt,rt.uint32(26).fork()).ldelim();return rt},decode($,rt){const mt=$ instanceof c.default.Reader?$:new c.default.Reader($);let Vt=rt===void 0?mt.len:mt.pos+rt;const at=Object.assign({},Ht);for(at.publishTracks=[];mt.pos<Vt;){const yt=mt.uint32();switch(yt>>>3){case 1:at.answer=a.SessionDescription.decode(mt,mt.uint32());break;case 2:at.subscription=a.UpdateSubscription.decode(mt,mt.uint32());break;case 3:at.publishTracks.push(a.TrackPublishedResponse.decode(mt,mt.uint32()));break;default:mt.skipType(yt&7);break}}return at},fromJSON($){const rt=Object.assign({},Ht);if(rt.publishTracks=[],$.answer!==void 0&&$.answer!==null?rt.answer=a.SessionDescription.fromJSON($.answer):rt.answer=void 0,$.subscription!==void 0&&$.subscription!==null?rt.subscription=a.UpdateSubscription.fromJSON($.subscription):rt.subscription=void 0,$.publishTracks!==void 0&&$.publishTracks!==null)for(const mt of $.publishTracks)rt.publishTracks.push(a.TrackPublishedResponse.fromJSON(mt));return rt},toJSON($){const rt={};return $.answer!==void 0&&(rt.answer=$.answer?a.SessionDescription.toJSON($.answer):void 0),$.subscription!==void 0&&(rt.subscription=$.subscription?a.UpdateSubscription.toJSON($.subscription):void 0),$.publishTracks?rt.publishTracks=$.publishTracks.map(mt=>mt?a.TrackPublishedResponse.toJSON(mt):void 0):rt.publishTracks=[],rt},fromPartial($){const rt=Object.assign({},Ht);if($.answer!==void 0&&$.answer!==null?rt.answer=a.SessionDescription.fromPartial($.answer):rt.answer=void 0,$.subscription!==void 0&&$.subscription!==null?rt.subscription=a.UpdateSubscription.fromPartial($.subscription):rt.subscription=void 0,rt.publishTracks=[],$.publishTracks!==void 0&&$.publishTracks!==null)for(const mt of $.publishTracks)rt.publishTracks.push(a.TrackPublishedResponse.fromPartial(mt));return rt}};const Yt={};a.SimulateScenario={encode($,rt=c.default.Writer.create()){return $.speakerUpdate!==void 0&&rt.uint32(8).int32($.speakerUpdate),$.nodeFailure!==void 0&&rt.uint32(16).bool($.nodeFailure),$.migration!==void 0&&rt.uint32(24).bool($.migration),$.serverLeave!==void 0&&rt.uint32(32).bool($.serverLeave),rt},decode($,rt){const mt=$ instanceof c.default.Reader?$:new c.default.Reader($);let Vt=rt===void 0?mt.len:mt.pos+rt;const at=Object.assign({},Yt);for(;mt.pos<Vt;){const yt=mt.uint32();switch(yt>>>3){case 1:at.speakerUpdate=mt.int32();break;case 2:at.nodeFailure=mt.bool();break;case 3:at.migration=mt.bool();break;case 4:at.serverLeave=mt.bool();break;default:mt.skipType(yt&7);break}}return at},fromJSON($){const rt=Object.assign({},Yt);return $.speakerUpdate!==void 0&&$.speakerUpdate!==null?rt.speakerUpdate=Number($.speakerUpdate):rt.speakerUpdate=void 0,$.nodeFailure!==void 0&&$.nodeFailure!==null?rt.nodeFailure=Boolean($.nodeFailure):rt.nodeFailure=void 0,$.migration!==void 0&&$.migration!==null?rt.migration=Boolean($.migration):rt.migration=void 0,$.serverLeave!==void 0&&$.serverLeave!==null?rt.serverLeave=Boolean($.serverLeave):rt.serverLeave=void 0,rt},toJSON($){const rt={};return $.speakerUpdate!==void 0&&(rt.speakerUpdate=$.speakerUpdate),$.nodeFailure!==void 0&&(rt.nodeFailure=$.nodeFailure),$.migration!==void 0&&(rt.migration=$.migration),$.serverLeave!==void 0&&(rt.serverLeave=$.serverLeave),rt},fromPartial($){var rt,mt,Vt,at;const yt=Object.assign({},Yt);return yt.speakerUpdate=(rt=$.speakerUpdate)!==null&&rt!==void 0?rt:void 0,yt.nodeFailure=(mt=$.nodeFailure)!==null&&mt!==void 0?mt:void 0,yt.migration=(Vt=$.migration)!==null&&Vt!==void 0?Vt:void 0,yt.serverLeave=(at=$.serverLeave)!==null&&at!==void 0?at:void 0,yt}},c.default.util.Long!==d.default&&(c.default.util.Long=d.default,c.default.configure())})(livekit_rtc);var errors={};(function(a){Object.defineProperty(a,"__esModule",{value:!0}),a.MediaDeviceFailure=a.PublishDataError=a.UnexpectedConnectionState=a.UnsupportedServer=a.TrackInvalidError=a.ConnectionError=a.LivekitError=void 0;class s extends Error{constructor(et,nt){super(nt||"an error has occured"),this.code=et}}a.LivekitError=s;class d extends s{constructor(et){super(1,et)}}a.ConnectionError=d;class c extends s{constructor(et){super(20,et||"Track is invalid")}}a.TrackInvalidError=c;class m extends s{constructor(et){super(10,et||"Unsupported server")}}a.UnsupportedServer=m;class g extends s{constructor(et){super(12,et||"Unexpected connection state")}}a.UnexpectedConnectionState=g;class b extends s{constructor(et){super(13,et||"Unable to publish data")}}a.PublishDataError=b,function(k){k.PermissionDenied="PermissionDenied",k.NotFound="NotFound",k.DeviceInUse="DeviceInUse",k.Other="Other"}(a.MediaDeviceFailure||(a.MediaDeviceFailure={})),function(k){function et(nt){if(nt&&"name"in nt)return nt.name==="NotFoundError"||nt.name==="DevicesNotFoundError"?k.NotFound:nt.name==="NotAllowedError"||nt.name==="PermissionDeniedError"?k.PermissionDenied:nt.name==="NotReadableError"||nt.name==="TrackStartError"?k.DeviceInUse:k.Other}k.getFailure=et}(a.MediaDeviceFailure||(a.MediaDeviceFailure={}))})(errors);var events$1={};(function(a){Object.defineProperty(a,"__esModule",{value:!0}),a.TrackEvent=a.EngineEvent=a.ParticipantEvent=a.RoomEvent=void 0,function(s){s.Reconnecting="reconnecting",s.Reconnected="reconnected",s.Disconnected="disconnected",s.MediaDevicesChanged="mediaDevicesChanged",s.ParticipantConnected="participantConnected",s.ParticipantDisconnected="participantDisconnected",s.TrackPublished="trackPublished",s.TrackSubscribed="trackSubscribed",s.TrackSubscriptionFailed="trackSubscriptionFailed",s.TrackUnpublished="trackUnpublished",s.TrackUnsubscribed="trackUnsubscribed",s.TrackMuted="trackMuted",s.TrackUnmuted="trackUnmuted",s.LocalTrackPublished="localTrackPublished",s.LocalTrackUnpublished="localTrackUnpublished",s.ActiveSpeakersChanged="activeSpeakersChanged",s.MetadataChanged="metadataChanged",s.ParticipantMetadataChanged="participantMetaDataChanged",s.RoomMetadataChanged="roomMetadataChanged",s.DataReceived="dataReceived",s.ConnectionQualityChanged="connectionQualityChanged",s.TrackStreamStateChanged="trackStreamStateChanged",s.TrackSubscriptionPermissionChanged="trackSubscriptionPermissionChanged",s.AudioPlaybackStatusChanged="audioPlaybackChanged",s.MediaDevicesError="mediaDevicesError"}(a.RoomEvent||(a.RoomEvent={})),function(s){s.TrackPublished="trackPublished",s.TrackSubscribed="trackSubscribed",s.TrackSubscriptionFailed="trackSubscriptionFailed",s.TrackUnpublished="trackUnpublished",s.TrackUnsubscribed="trackUnsubscribed",s.TrackMuted="trackMuted",s.TrackUnmuted="trackUnmuted",s.LocalTrackPublished="localTrackPublished",s.LocalTrackUnpublished="localTrackUnpublished",s.MetadataChanged="metadataChanged",s.ParticipantMetadataChanged="participantMetadataChanged",s.DataReceived="dataReceived",s.IsSpeakingChanged="isSpeakingChanged",s.ConnectionQualityChanged="connectionQualityChanged",s.TrackStreamStateChanged="trackStreamStateChanged",s.TrackSubscriptionPermissionChanged="trackSubscriptionPermissionChanged",s.MediaDevicesError="mediaDevicesError"}(a.ParticipantEvent||(a.ParticipantEvent={})),function(s){s.Connected="connected",s.Disconnected="disconnected",s.Reconnecting="reconnecting",s.Reconnected="reconnected",s.SignalConnected="singalConnected",s.MediaTrackAdded="mediaTrackAdded",s.ActiveSpeakersUpdate="activeSpeakersUpdate",s.DataPacketReceived="dataPacketReceived"}(a.EngineEvent||(a.EngineEvent={})),function(s){s.Message="message",s.Muted="muted",s.Unmuted="unmuted",s.Ended="ended",s.UpdateSettings="updateSettings",s.UpdateSubscription="updateSubscription",s.AudioPlaybackStarted="audioPlaybackStarted",s.AudioPlaybackFailed="audioPlaybackFailed",s.VisibilityChanged="visibilityChanged",s.VideoDimensionsChanged="videoDimensionsChanged"}(a.TrackEvent||(a.TrackEvent={}))})(events$1);var LocalAudioTrack$1={},stats={};Object.defineProperty(stats,"__esModule",{value:!0});stats.computeBitrate=stats.monitorFrequency=void 0;stats.monitorFrequency=2e3;function computeBitrate(a,s){if(!s)return 0;let d,c;return"bytesReceived"in a?(d=a.bytesReceived,c=s.bytesReceived):"bytesSent"in a&&(d=a.bytesSent,c=s.bytesSent),d===void 0||c===void 0||a.timestamp===void 0||s.timestamp===void 0?0:(d-c)*8*1e3/(a.timestamp-s.timestamp)}stats.computeBitrate=computeBitrate;var LocalTrack$1={},DeviceManager$1={},__awaiter$b=commonjsGlobal&&commonjsGlobal.__awaiter||function(a,s,d,c){function m(g){return g instanceof d?g:new d(function(b){b(g)})}return new(d||(d=Promise))(function(g,b){function k(it){try{nt(c.next(it))}catch(ct){b(ct)}}function et(it){try{nt(c.throw(it))}catch(ct){b(ct)}}function nt(it){it.done?g(it.value):m(it.value).then(k,et)}nt((c=c.apply(a,s||[])).next())})};Object.defineProperty(DeviceManager$1,"__esModule",{value:!0});const defaultId="default";class DeviceManager{static getInstance(){return this.instance===void 0&&(this.instance=new DeviceManager),this.instance}getDevices(s){return __awaiter$b(this,void 0,void 0,function*(){let d=yield navigator.mediaDevices.enumerateDevices();if(d=d.filter(c=>c.kind===s),d.length>1&&d[0].deviceId===defaultId){const c=d[0];for(let m=1;m<d.length;m+=1)if(d[m].groupId===c.groupId){const g=d[0];d[0]=d[m],d[m]=g;break}return d.filter(m=>m!==c)}return d})}normalizeDeviceId(s,d,c){return __awaiter$b(this,void 0,void 0,function*(){if(d!==defaultId)return d;const g=(yield this.getDevices(s)).find(b=>b.groupId===c&&b.deviceId!==defaultId);return g==null?void 0:g.deviceId})}}DeviceManager$1.default=DeviceManager;DeviceManager.mediaDeviceKinds=["audioinput","audiooutput","videoinput"];var Track={},events={exports:{}},R$2=typeof Reflect=="object"?Reflect:null,ReflectApply=R$2&&typeof R$2.apply=="function"?R$2.apply:function a(s,d,c){return Function.prototype.apply.call(s,d,c)},ReflectOwnKeys;R$2&&typeof R$2.ownKeys=="function"?ReflectOwnKeys=R$2.ownKeys:Object.getOwnPropertySymbols?ReflectOwnKeys=function(s){return Object.getOwnPropertyNames(s).concat(Object.getOwnPropertySymbols(s))}:ReflectOwnKeys=function(s){return Object.getOwnPropertyNames(s)};function ProcessEmitWarning(a){console&&console.warn&&console.warn(a)}var NumberIsNaN=Number.isNaN||function a(s){return s!==s};function EventEmitter(){EventEmitter.init.call(this)}events.exports=EventEmitter;events.exports.once=once;EventEmitter.EventEmitter=EventEmitter;EventEmitter.prototype._events=void 0;EventEmitter.prototype._eventsCount=0;EventEmitter.prototype._maxListeners=void 0;var defaultMaxListeners=10;function checkListener(a){if(typeof a!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof a)}Object.defineProperty(EventEmitter,"defaultMaxListeners",{enumerable:!0,get:function(){return defaultMaxListeners},set:function(a){if(typeof a!="number"||a<0||NumberIsNaN(a))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+a+".");defaultMaxListeners=a}});EventEmitter.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};EventEmitter.prototype.setMaxListeners=function a(s){if(typeof s!="number"||s<0||NumberIsNaN(s))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+s+".");return this._maxListeners=s,this};function _getMaxListeners(a){return a._maxListeners===void 0?EventEmitter.defaultMaxListeners:a._maxListeners}EventEmitter.prototype.getMaxListeners=function a(){return _getMaxListeners(this)};EventEmitter.prototype.emit=function a(s){for(var d=[],c=1;c<arguments.length;c++)d.push(arguments[c]);var m=s==="error",g=this._events;if(g!==void 0)m=m&&g.error===void 0;else if(!m)return!1;if(m){var b;if(d.length>0&&(b=d[0]),b instanceof Error)throw b;var k=new Error("Unhandled error."+(b?" ("+b.message+")":""));throw k.context=b,k}var et=g[s];if(et===void 0)return!1;if(typeof et=="function")ReflectApply(et,this,d);else for(var nt=et.length,it=arrayClone(et,nt),c=0;c<nt;++c)ReflectApply(it[c],this,d);return!0};function _addListener(a,s,d,c){var m,g,b;if(checkListener(d),g=a._events,g===void 0?(g=a._events=Object.create(null),a._eventsCount=0):(g.newListener!==void 0&&(a.emit("newListener",s,d.listener?d.listener:d),g=a._events),b=g[s]),b===void 0)b=g[s]=d,++a._eventsCount;else if(typeof b=="function"?b=g[s]=c?[d,b]:[b,d]:c?b.unshift(d):b.push(d),m=_getMaxListeners(a),m>0&&b.length>m&&!b.warned){b.warned=!0;var k=new Error("Possible EventEmitter memory leak detected. "+b.length+" "+String(s)+" listeners added. Use emitter.setMaxListeners() to increase limit");k.name="MaxListenersExceededWarning",k.emitter=a,k.type=s,k.count=b.length,ProcessEmitWarning(k)}return a}EventEmitter.prototype.addListener=function a(s,d){return _addListener(this,s,d,!1)};EventEmitter.prototype.on=EventEmitter.prototype.addListener;EventEmitter.prototype.prependListener=function a(s,d){return _addListener(this,s,d,!0)};function onceWrapper(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function _onceWrap(a,s,d){var c={fired:!1,wrapFn:void 0,target:a,type:s,listener:d},m=onceWrapper.bind(c);return m.listener=d,c.wrapFn=m,m}EventEmitter.prototype.once=function a(s,d){return checkListener(d),this.on(s,_onceWrap(this,s,d)),this};EventEmitter.prototype.prependOnceListener=function a(s,d){return checkListener(d),this.prependListener(s,_onceWrap(this,s,d)),this};EventEmitter.prototype.removeListener=function a(s,d){var c,m,g,b,k;if(checkListener(d),m=this._events,m===void 0)return this;if(c=m[s],c===void 0)return this;if(c===d||c.listener===d)--this._eventsCount===0?this._events=Object.create(null):(delete m[s],m.removeListener&&this.emit("removeListener",s,c.listener||d));else if(typeof c!="function"){for(g=-1,b=c.length-1;b>=0;b--)if(c[b]===d||c[b].listener===d){k=c[b].listener,g=b;break}if(g<0)return this;g===0?c.shift():spliceOne(c,g),c.length===1&&(m[s]=c[0]),m.removeListener!==void 0&&this.emit("removeListener",s,k||d)}return this};EventEmitter.prototype.off=EventEmitter.prototype.removeListener;EventEmitter.prototype.removeAllListeners=function a(s){var d,c,m;if(c=this._events,c===void 0)return this;if(c.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):c[s]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete c[s]),this;if(arguments.length===0){var g=Object.keys(c),b;for(m=0;m<g.length;++m)b=g[m],b!=="removeListener"&&this.removeAllListeners(b);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(d=c[s],typeof d=="function")this.removeListener(s,d);else if(d!==void 0)for(m=d.length-1;m>=0;m--)this.removeListener(s,d[m]);return this};function _listeners(a,s,d){var c=a._events;if(c===void 0)return[];var m=c[s];return m===void 0?[]:typeof m=="function"?d?[m.listener||m]:[m]:d?unwrapListeners(m):arrayClone(m,m.length)}EventEmitter.prototype.listeners=function a(s){return _listeners(this,s,!0)};EventEmitter.prototype.rawListeners=function a(s){return _listeners(this,s,!1)};EventEmitter.listenerCount=function(a,s){return typeof a.listenerCount=="function"?a.listenerCount(s):listenerCount.call(a,s)};EventEmitter.prototype.listenerCount=listenerCount;function listenerCount(a){var s=this._events;if(s!==void 0){var d=s[a];if(typeof d=="function")return 1;if(d!==void 0)return d.length}return 0}EventEmitter.prototype.eventNames=function a(){return this._eventsCount>0?ReflectOwnKeys(this._events):[]};function arrayClone(a,s){for(var d=new Array(s),c=0;c<s;++c)d[c]=a[c];return d}function spliceOne(a,s){for(;s+1<a.length;s++)a[s]=a[s+1];a.pop()}function unwrapListeners(a){for(var s=new Array(a.length),d=0;d<s.length;++d)s[d]=a[d].listener||a[d];return s}function once(a,s){return new Promise(function(d,c){function m(b){a.removeListener(s,g),c(b)}function g(){typeof a.removeListener=="function"&&a.removeListener("error",m),d([].slice.call(arguments))}eventTargetAgnosticAddListener(a,s,g,{once:!0}),s!=="error"&&addErrorHandlerIfEventEmitter(a,m,{once:!0})})}function addErrorHandlerIfEventEmitter(a,s,d){typeof a.on=="function"&&eventTargetAgnosticAddListener(a,"error",s,d)}function eventTargetAgnosticAddListener(a,s,d,c){if(typeof a.on=="function")c.once?a.once(s,d):a.on(s,d);else if(typeof a.addEventListener=="function")a.addEventListener(s,function m(g){c.once&&a.removeEventListener(s,m),d(g)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof a)}var utils$1={},uaParser={exports:{}};(function(a,s){(function(d,c){var m="1.0.2",g="",b="?",k="function",et="undefined",nt="object",it="string",ct="major",st="model",ut="name",pt="type",St="vendor",_t="version",ht="architecture",_e="console",ot="mobile",lt="tablet",Ot="smarttv",It="wearable",Pt="embedded",$t=255,bt="Amazon",Rt="Apple",Ct="ASUS",vt="BlackBerry",Tt="Browser",wt="Chrome",zt="Edge",Mt="Firefox",Nt="Google",Ft="Huawei",Wt="LG",Ht="Microsoft",Yt="Motorola",$="Opera",rt="Samsung",mt="Sony",Vt="Xiaomi",at="Zebra",yt="Facebook",Dt=function(Zt,un){var nn={};for(var fn in Zt)un[fn]&&un[fn].length%2===0?nn[fn]=un[fn].concat(Zt[fn]):nn[fn]=Zt[fn];return nn},Gt=function(Zt){for(var un={},nn=0;nn<Zt.length;nn++)un[Zt[nn].toUpperCase()]=Zt[nn];return un},Bt=function(Zt,un){return typeof Zt===it?xt(un).indexOf(xt(Zt))!==-1:!1},xt=function(Zt){return Zt.toLowerCase()},tn=function(Zt){return typeof Zt===it?Zt.replace(/[^\d\.]/g,g).split(".")[0]:c},dn=function(Zt,un){if(typeof Zt===it)return Zt=Zt.replace(/^\s\s*/,g).replace(/\s\s*$/,g),typeof un===et?Zt:Zt.substring(0,$t)},Qt=function(Zt,un){for(var nn=0,fn,en,Dn,cn,Mn,an;nn<un.length&&!Mn;){var Un=un[nn],qt=un[nn+1];for(fn=en=0;fn<Un.length&&!Mn;)if(Mn=Un[fn++].exec(Zt),Mn)for(Dn=0;Dn<qt.length;Dn++)an=Mn[++en],cn=qt[Dn],typeof cn===nt&&cn.length>0?cn.length===2?typeof cn[1]==k?this[cn[0]]=cn[1].call(this,an):this[cn[0]]=cn[1]:cn.length===3?typeof cn[1]===k&&!(cn[1].exec&&cn[1].test)?this[cn[0]]=an?cn[1].call(this,an,cn[2]):c:this[cn[0]]=an?an.replace(cn[1],cn[2]):c:cn.length===4&&(this[cn[0]]=an?cn[3].call(this,an.replace(cn[1],cn[2])):c):this[cn]=an||c;nn+=2}},rn=function(Zt,un){for(var nn in un)if(typeof un[nn]===nt&&un[nn].length>0){for(var fn=0;fn<un[nn].length;fn++)if(Bt(un[nn][fn],Zt))return nn===b?c:nn}else if(Bt(un[nn],Zt))return nn===b?c:nn;return Zt},mn={"1.0":"/8","1.2":"/1","1.3":"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"},On={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0","2000":"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0","7":"NT 6.1","8":"NT 6.2","8.1":"NT 6.3","10":["NT 6.4","NT 10.0"],RT:"ARM"},Xt={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[_t,[ut,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[_t,[ut,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[ut,_t],[/opios[\/ ]+([\w\.]+)/i],[_t,[ut,$+" Mini"]],[/\bopr\/([\w\.]+)/i],[_t,[ut,$]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant |iemobile|slim)(?:browser)?[\/ ]?([\w\.]*)/i,/(ba?idubrowser)[\/ ]?([\w\.]+)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale|qqbrowserlite|qq)\/([-\w\.]+)/i,/(weibo)__([\d\.]+)/i],[ut,_t],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[_t,[ut,"UC"+Tt]],[/\bqbcore\/([\w\.]+)/i],[_t,[ut,"WeChat(Win) Desktop"]],[/micromessenger\/([\w\.]+)/i],[_t,[ut,"WeChat"]],[/konqueror\/([\w\.]+)/i],[_t,[ut,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[_t,[ut,"IE"]],[/yabrowser\/([\w\.]+)/i],[_t,[ut,"Yandex"]],[/(avast|avg)\/([\w\.]+)/i],[[ut,/(.+)/,"$1 Secure "+Tt],_t],[/\bfocus\/([\w\.]+)/i],[_t,[ut,Mt+" Focus"]],[/\bopt\/([\w\.]+)/i],[_t,[ut,$+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[_t,[ut,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[_t,[ut,"Dolphin"]],[/coast\/([\w\.]+)/i],[_t,[ut,$+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[_t,[ut,"MIUI "+Tt]],[/fxios\/([-\w\.]+)/i],[_t,[ut,Mt]],[/\bqihu|(qi?ho?o?|360)browser/i],[[ut,"360 "+Tt]],[/(oculus|samsung|sailfish)browser\/([\w\.]+)/i],[[ut,/(.+)/,"$1 "+Tt],_t],[/(comodo_dragon)\/([\w\.]+)/i],[[ut,/_/g," "],_t],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/ ]?([\w\.]+)/i],[ut,_t],[/(metasr)[\/ ]?([\w\.]+)/i,/(lbbrowser)/i],[ut],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[ut,yt],_t],[/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(chromium|instagram)[\/ ]([-\w\.]+)/i],[ut,_t],[/\bgsa\/([\w\.]+) .*safari\//i],[_t,[ut,"GSA"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[_t,[ut,wt+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[ut,wt+" WebView"],_t],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[_t,[ut,"Android "+Tt]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[ut,_t],[/version\/([\w\.]+) .*mobile\/\w+ (safari)/i],[_t,[ut,"Mobile Safari"]],[/version\/([\w\.]+) .*(mobile ?safari|safari)/i],[_t,ut],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[ut,[_t,rn,mn]],[/(webkit|khtml)\/([\w\.]+)/i],[ut,_t],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[ut,"Netscape"],_t],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[_t,[ut,Mt+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i],[ut,_t]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[ht,"amd64"]],[/(ia32(?=;))/i],[[ht,xt]],[/((?:i[346]|x)86)[;\)]/i],[[ht,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[ht,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[ht,"armhf"]],[/windows (ce|mobile); ppc;/i],[[ht,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[ht,/ower/,g,xt]],[/(sun4\w)[;\)]/i],[[ht,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[ht,xt]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[pt]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[st,[St,rt],[pt,lt]],[/\b((?:s[cgp]h|gt|sm)-\w+|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[st,[St,rt],[pt,ot]],[/\((ip(?:hone|od)[\w ]*);/i],[st,[St,Rt],[pt,ot]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[st,[St,Rt],[pt,lt]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[st,[St,Ft],[pt,lt]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}-[atu]?[ln][01259x][012359][an]?)\b(?!.+d\/s)/i],[st,[St,Ft],[pt,ot]],[/\b(poco[\w ]+)(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[st,/_/g," "],[St,Vt],[pt,ot]],[/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[st,/_/g," "],[St,Vt],[pt,lt]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[st,[St,"OPPO"],[pt,ot]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[st,[St,"Vivo"],[pt,ot]],[/\b(rmx[12]\d{3})(?: bui|;|\))/i],[st,[St,"Realme"],[pt,ot]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[st,[St,Yt],[pt,ot]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[st,[St,Yt],[pt,lt]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[st,[St,Wt],[pt,lt]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[st,[St,Wt],[pt,ot]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[st,[St,"Lenovo"],[pt,lt]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[st,/_/g," "],[St,"Nokia"],[pt,ot]],[/(pixel c)\b/i],[st,[St,Nt],[pt,lt]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[st,[St,Nt],[pt,ot]],[/droid.+ ([c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[st,[St,mt],[pt,ot]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[st,"Xperia Tablet"],[St,mt],[pt,lt]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[st,[St,"OnePlus"],[pt,ot]],[/(alexa)webm/i,/(kf[a-z]{2}wi)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[st,[St,bt],[pt,lt]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[st,/(.+)/g,"Fire Phone $1"],[St,bt],[pt,ot]],[/(playbook);[-\w\),; ]+(rim)/i],[st,St,[pt,lt]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[st,[St,vt],[pt,ot]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[st,[St,Ct],[pt,lt]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[st,[St,Ct],[pt,ot]],[/(nexus 9)/i],[st,[St,"HTC"],[pt,lt]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic|sony)[-_ ]?([-\w]*)/i],[St,[st,/_/g," "],[pt,ot]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[st,[St,"Acer"],[pt,lt]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[st,[St,"Meizu"],[pt,ot]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[st,[St,"Sharp"],[pt,ot]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[St,st,[pt,ot]],[/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[St,st,[pt,lt]],[/(surface duo)/i],[st,[St,Ht],[pt,lt]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[st,[St,"Fairphone"],[pt,ot]],[/(u304aa)/i],[st,[St,"AT&T"],[pt,ot]],[/\bsie-(\w*)/i],[st,[St,"Siemens"],[pt,ot]],[/\b(rct\w+) b/i],[st,[St,"RCA"],[pt,lt]],[/\b(venue[\d ]{2,7}) b/i],[st,[St,"Dell"],[pt,lt]],[/\b(q(?:mv|ta)\w+) b/i],[st,[St,"Verizon"],[pt,lt]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[st,[St,"Barnes & Noble"],[pt,lt]],[/\b(tm\d{3}\w+) b/i],[st,[St,"NuVision"],[pt,lt]],[/\b(k88) b/i],[st,[St,"ZTE"],[pt,lt]],[/\b(nx\d{3}j) b/i],[st,[St,"ZTE"],[pt,ot]],[/\b(gen\d{3}) b.+49h/i],[st,[St,"Swiss"],[pt,ot]],[/\b(zur\d{3}) b/i],[st,[St,"Swiss"],[pt,lt]],[/\b((zeki)?tb.*\b) b/i],[st,[St,"Zeki"],[pt,lt]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[St,"Dragon Touch"],st,[pt,lt]],[/\b(ns-?\w{0,9}) b/i],[st,[St,"Insignia"],[pt,lt]],[/\b((nxa|next)-?\w{0,9}) b/i],[st,[St,"NextBook"],[pt,lt]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[St,"Voice"],st,[pt,ot]],[/\b(lvtel\-)?(v1[12]) b/i],[[St,"LvTel"],st,[pt,ot]],[/\b(ph-1) /i],[st,[St,"Essential"],[pt,ot]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[st,[St,"Envizen"],[pt,lt]],[/\b(trio[-\w\. ]+) b/i],[st,[St,"MachSpeed"],[pt,lt]],[/\btu_(1491) b/i],[st,[St,"Rotor"],[pt,lt]],[/(shield[\w ]+) b/i],[st,[St,"Nvidia"],[pt,lt]],[/(sprint) (\w+)/i],[St,st,[pt,ot]],[/(kin\.[onetw]{3})/i],[[st,/\./g," "],[St,Ht],[pt,ot]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[st,[St,at],[pt,lt]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[st,[St,at],[pt,ot]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[St,st,[pt,_e]],[/droid.+; (shield) bui/i],[st,[St,"Nvidia"],[pt,_e]],[/(playstation [345portablevi]+)/i],[st,[St,mt],[pt,_e]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[st,[St,Ht],[pt,_e]],[/smart-tv.+(samsung)/i],[St,[pt,Ot]],[/hbbtv.+maple;(\d+)/i],[[st,/^/,"SmartTV"],[St,rt],[pt,Ot]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[St,Wt],[pt,Ot]],[/(apple) ?tv/i],[St,[st,Rt+" TV"],[pt,Ot]],[/crkey/i],[[st,wt+"cast"],[St,Nt],[pt,Ot]],[/droid.+aft(\w)( bui|\))/i],[st,[St,bt],[pt,Ot]],[/\(dtv[\);].+(aquos)/i],[st,[St,"Sharp"],[pt,Ot]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w ]*; *(\w[^;]*);([^;]*)/i],[[St,dn],[st,dn],[pt,Ot]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[pt,Ot]],[/((pebble))app/i],[St,st,[pt,It]],[/droid.+; (glass) \d/i],[st,[St,Nt],[pt,It]],[/droid.+; (wt63?0{2,3})\)/i],[st,[St,at],[pt,It]],[/(quest( 2)?)/i],[st,[St,yt],[pt,It]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[St,[pt,Pt]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+? mobile safari/i],[st,[pt,ot]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[st,[pt,lt]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[pt,lt]],[/(phone|mobile(?:[;\/]| safari)|pda(?=.+windows ce))/i],[[pt,ot]],[/(android[-\w\. ]{0,9});.+buil/i],[st,[St,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[_t,[ut,zt+"HTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[_t,[ut,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i],[ut,_t],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[_t,ut]],os:[[/microsoft (windows) (vista|xp)/i],[ut,_t],[/(windows) nt 6\.2; (arm)/i,/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i,/(windows)[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i],[ut,[_t,rn,On]],[/(win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[ut,"Windows"],[_t,rn,On]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/cfnetwork\/.+darwin/i],[[_t,/_/g,"."],[ut,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[ut,"Mac OS"],[_t,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86)/i],[_t,ut],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[ut,_t],[/\(bb(10);/i],[_t,[ut,vt]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[_t,[ut,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[_t,[ut,Mt+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[_t,[ut,"webOS"]],[/crkey\/([\d\.]+)/i],[_t,[ut,wt+"cast"]],[/(cros) [\w]+ ([\w\.]+\w)/i],[[ut,"Chromium OS"],_t],[/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[ut,_t],[/(sunos) ?([\w\.\d]*)/i],[[ut,"Solaris"],_t],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux)/i,/(unix) ?([\w\.]*)/i],[ut,_t]]},bn=function(Zt,un){if(typeof Zt===nt&&(un=Zt,Zt=c),!(this instanceof bn))return new bn(Zt,un).getResult();var nn=Zt||(typeof d!==et&&d.navigator&&d.navigator.userAgent?d.navigator.userAgent:g),fn=un?Dt(Xt,un):Xt;return this.getBrowser=function(){var en={};return en[ut]=c,en[_t]=c,Qt.call(en,nn,fn.browser),en.major=tn(en.version),en},this.getCPU=function(){var en={};return en[ht]=c,Qt.call(en,nn,fn.cpu),en},this.getDevice=function(){var en={};return en[St]=c,en[st]=c,en[pt]=c,Qt.call(en,nn,fn.device),en},this.getEngine=function(){var en={};return en[ut]=c,en[_t]=c,Qt.call(en,nn,fn.engine),en},this.getOS=function(){var en={};return en[ut]=c,en[_t]=c,Qt.call(en,nn,fn.os),en},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return nn},this.setUA=function(en){return nn=typeof en===it&&en.length>$t?dn(en,$t):en,this},this.setUA(nn),this};bn.VERSION=m,bn.BROWSER=Gt([ut,_t,ct]),bn.CPU=Gt([ht]),bn.DEVICE=Gt([st,St,pt,_e,ot,Ot,lt,It,Pt]),bn.ENGINE=bn.OS=Gt([ut,_t]),a.exports&&(s=a.exports=bn),s.UAParser=bn;var $n=typeof d!==et&&(d.jQuery||d.Zepto);if($n&&!$n.ua){var Ln=new bn;$n.ua=Ln.getResult(),$n.ua.get=function(){return Ln.getUA()},$n.ua.set=function(Zt){Ln.setUA(Zt);var un=Ln.getResult();for(var nn in un)$n.ua[nn]=un[nn]}}})(typeof window=="object"?window:commonjsGlobal)})(uaParser,uaParser.exports);var version={};Object.defineProperty(version,"__esModule",{value:!0});version.protocolVersion=version.version=void 0;version.version="0.15.4";version.protocolVersion=5;var __awaiter$a=commonjsGlobal&&commonjsGlobal.__awaiter||function(a,s,d,c){function m(g){return g instanceof d?g:new d(function(b){b(g)})}return new(d||(d=Promise))(function(g,b){function k(it){try{nt(c.next(it))}catch(ct){b(ct)}}function et(it){try{nt(c.throw(it))}catch(ct){b(ct)}}function nt(it){it.done?g(it.value):m(it.value).then(k,et)}nt((c=c.apply(a,s||[])).next())})},__importDefault$b=commonjsGlobal&&commonjsGlobal.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(utils$1,"__esModule",{value:!0});utils$1.getClientInfo=utils$1.getIntersectionObserver=utils$1.getResizeObserver=utils$1.isFireFox=utils$1.sleep=utils$1.unpackStreamId=void 0;const ua_parser_js_1=__importDefault$b(uaParser.exports),livekit_models_1$2=livekit_models,version_1=version,separator="|";function unpackStreamId(a){const s=a.split(separator);return s.length>1?[s[0],a.substr(s[0].length+1)]:[a,""]}utils$1.unpackStreamId=unpackStreamId;function sleep(a){return __awaiter$a(this,void 0,void 0,function*(){return new Promise(s=>setTimeout(s,a))})}utils$1.sleep=sleep;function isFireFox(){return navigator.userAgent.indexOf("Firefox")!==-1}utils$1.isFireFox=isFireFox;function roDispatchCallback(a){for(const s of a)s.target.handleResize(s)}function ioDispatchCallback(a){for(const s of a)s.target.handleVisibilityChanged(s)}let resizeObserver=null;const getResizeObserver=()=>(resizeObserver||(resizeObserver=new ResizeObserver(roDispatchCallback)),resizeObserver);utils$1.getResizeObserver=getResizeObserver;let intersectionObserver=null;const getIntersectionObserver=()=>(intersectionObserver||(intersectionObserver=new IntersectionObserver(ioDispatchCallback)),intersectionObserver);utils$1.getIntersectionObserver=getIntersectionObserver;function getClientInfo(){const a=ua_parser_js_1.default(navigator.userAgent),s=livekit_models_1$2.ClientInfo.fromPartial({sdk:livekit_models_1$2.ClientInfo_SDK.JS,protocol:version_1.protocolVersion,version:version_1.version,os:a.os.name,osVersion:a.os.version,browser:a.browser.name,browserVersion:a.browser.version});let d="";return a.device.vendor&&(d+=a.device.vendor),a.device.model&&(d&&(d+=" "),d+=a.device.model),d&&(s.deviceModel=d),s}utils$1.getClientInfo=getClientInfo;(function(a){Object.defineProperty(a,"__esModule",{value:!0}),a.detachTrack=a.attachToElement=a.Track=void 0;const s=events.exports,d=livekit_models,c=livekit_rtc,m=events$1,g=utils$1,b=[];class k extends s.EventEmitter{constructor(ct,st){super(),this.attachedElements=[],this.isMuted=!1,this.streamState=k.StreamState.Active,this._currentBitrate=0,this.kind=st,this.mediaStreamTrack=ct,this.source=k.Source.Unknown}get currentBitrate(){return this._currentBitrate}attach(ct){let st="audio";return this.kind===k.Kind.Video&&(st="video"),ct||(st==="audio"&&(b.forEach(ut=>{ut.parentElement===null&&!ct&&(ct=ut)}),ct&&b.splice(b.indexOf(ct),1)),ct||(ct=document.createElement(st))),ct instanceof HTMLVideoElement&&(ct.playsInline=!0,ct.autoplay=!0),this.attachedElements.includes(ct)||(et(this.mediaStreamTrack,ct),this.attachedElements.push(ct),ct instanceof HTMLAudioElement&&ct.play().then(()=>{this.emit(m.TrackEvent.AudioPlaybackStarted)}).catch(ut=>{this.emit(m.TrackEvent.AudioPlaybackFailed,ut)})),ct}detach(ct){if(ct){nt(this.mediaStreamTrack,ct);const ut=this.attachedElements.indexOf(ct);return ut>=0&&(this.attachedElements.splice(ut,1),this.recycleElement(ct)),ct}const st=[];return this.attachedElements.forEach(ut=>{nt(this.mediaStreamTrack,ut),st.push(ut),this.recycleElement(ut)}),this.attachedElements=[],st}stop(){this.mediaStreamTrack.stop()}enable(){this.mediaStreamTrack.enabled=!0}disable(){this.mediaStreamTrack.enabled=!1}recycleElement(ct){if(ct instanceof HTMLAudioElement){let st=!0;ct.pause(),b.forEach(ut=>{ut.parentElement||(st=!1)}),st&&b.push(ct)}}}a.Track=k;function et(it,ct){let st;ct.srcObject instanceof MediaStream?st=ct.srcObject:(st=new MediaStream,ct.srcObject=st);let ut;it.kind==="audio"?ut=st.getAudioTracks():ut=st.getVideoTracks(),ut.forEach(pt=>{st.removeTrack(pt)}),st.addTrack(it),g.isFireFox()&&setTimeout(()=>{ct.srcObject=st},1)}a.attachToElement=et;function nt(it,ct){ct.srcObject instanceof MediaStream&&(ct.srcObject.removeTrack(it),ct.srcObject=null)}a.detachTrack=nt,function(it){let ct;(function(ot){ot.Audio="audio",ot.Video="video",ot.Unknown="unknown"})(ct=it.Kind||(it.Kind={}));let st;(function(ot){ot.Camera="camera",ot.Microphone="microphone",ot.ScreenShare="screen_share",ot.ScreenShareAudio="screen_share_audio",ot.Unknown="unknown"})(st=it.Source||(it.Source={}));let ut;(function(ot){ot.Active="active",ot.Paused="paused",ot.Unknown="unknown"})(ut=it.StreamState||(it.StreamState={}));function pt(ot){switch(ot){case ct.Audio:return d.TrackType.AUDIO;case ct.Video:return d.TrackType.VIDEO;default:return d.TrackType.UNRECOGNIZED}}it.kindToProto=pt;function St(ot){switch(ot){case d.TrackType.AUDIO:return ct.Audio;case d.TrackType.VIDEO:return ct.Video;default:return ct.Unknown}}it.kindFromProto=St;function _t(ot){switch(ot){case st.Camera:return d.TrackSource.CAMERA;case st.Microphone:return d.TrackSource.MICROPHONE;case st.ScreenShare:return d.TrackSource.SCREEN_SHARE;case st.ScreenShareAudio:return d.TrackSource.SCREEN_SHARE_AUDIO;default:return d.TrackSource.UNRECOGNIZED}}it.sourceToProto=_t;function ht(ot){switch(ot){case d.TrackSource.CAMERA:return st.Camera;case d.TrackSource.MICROPHONE:return st.Microphone;case d.TrackSource.SCREEN_SHARE:return st.ScreenShare;case d.TrackSource.SCREEN_SHARE_AUDIO:return st.ScreenShareAudio;default:return st.Unknown}}it.sourceFromProto=ht;function _e(ot){switch(ot){case c.StreamState.ACTIVE:return ut.Active;case c.StreamState.PAUSED:return ut.Paused;default:return ut.Unknown}}it.streamStateFromProto=_e}(k=a.Track||(a.Track={}))})(Track);var __awaiter$9=commonjsGlobal&&commonjsGlobal.__awaiter||function(a,s,d,c){function m(g){return g instanceof d?g:new d(function(b){b(g)})}return new(d||(d=Promise))(function(g,b){function k(it){try{nt(c.next(it))}catch(ct){b(ct)}}function et(it){try{nt(c.throw(it))}catch(ct){b(ct)}}function nt(it){it.done?g(it.value):m(it.value).then(k,et)}nt((c=c.apply(a,s||[])).next())})},__importDefault$a=commonjsGlobal&&commonjsGlobal.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(LocalTrack$1,"__esModule",{value:!0});const logger_1$7=__importDefault$a(logger),DeviceManager_1=__importDefault$a(DeviceManager$1),errors_1$3=errors,events_1$6=events$1,Track_1$8=Track;class LocalTrack extends Track_1$8.Track{constructor(s,d,c){super(s,d),this.handleEnded=()=>{this.emit(events_1$6.TrackEvent.Ended,this)},this.mediaStreamTrack.addEventListener("ended",this.handleEnded),this.constraints=c!=null?c:s.getConstraints()}get id(){return this.mediaStreamTrack.id}get dimensions(){if(this.kind!==Track_1$8.Track.Kind.Video)return;const{width:s,height:d}=this.mediaStreamTrack.getSettings();if(s&&d)return{width:s,height:d}}getDeviceId(){return __awaiter$9(this,void 0,void 0,function*(){if(this.source===Track_1$8.Track.Source.ScreenShare)return;const{deviceId:s,groupId:d}=this.mediaStreamTrack.getSettings(),c=this.kind===Track_1$8.Track.Kind.Audio?"audioinput":"videoinput";return DeviceManager_1.default.getInstance().normalizeDeviceId(c,s,d)})}mute(){return __awaiter$9(this,void 0,void 0,function*(){return this.setTrackMuted(!0),this})}unmute(){return __awaiter$9(this,void 0,void 0,function*(){return this.setTrackMuted(!1),this})}restart(s){return __awaiter$9(this,void 0,void 0,function*(){if(!this.sender)throw new errors_1$3.TrackInvalidError("unable to restart an unpublished track");s||(s=this.constraints),logger_1$7.default.debug("restarting track with constraints",s);const d={audio:!1,video:!1};this.kind===Track_1$8.Track.Kind.Video?d.video=s:d.audio=s,this.attachedElements.forEach(g=>{Track_1$8.detachTrack(this.mediaStreamTrack,g)}),this.mediaStreamTrack.removeEventListener("ended",this.handleEnded),this.mediaStreamTrack.stop();const m=(yield navigator.mediaDevices.getUserMedia(d)).getTracks()[0];return m.addEventListener("ended",this.handleEnded),logger_1$7.default.debug("re-acquired MediaStreamTrack"),yield this.sender.replaceTrack(m),this.mediaStreamTrack=m,this.attachedElements.forEach(g=>{Track_1$8.attachToElement(m,g)}),this.constraints=s,this})}setTrackMuted(s){this.isMuted!==s&&(this.isMuted=s,this.mediaStreamTrack.enabled=!s,this.emit(s?events_1$6.TrackEvent.Muted:events_1$6.TrackEvent.Unmuted,this))}}LocalTrack$1.default=LocalTrack;var utils={};Object.defineProperty(utils,"__esModule",{value:!0});utils.constraintsForOptions=utils.mergeDefaultOptions=void 0;function mergeDefaultOptions(a,s,d){const c=Object.assign({},a);return c.audio===!0&&(c.audio={}),c.video===!0&&(c.video={}),c.audio&&mergeObjectWithoutOverwriting(c.audio,s),c.video&&mergeObjectWithoutOverwriting(c.video,d),c}utils.mergeDefaultOptions=mergeDefaultOptions;function mergeObjectWithoutOverwriting(a,s){return Object.keys(s).forEach(d=>{a[d]===void 0&&(a[d]=s[d])}),a}function constraintsForOptions(a){const s={};if(a.video)if(typeof a.video=="object"){const d={},c=d,m=a.video;Object.keys(m).forEach(g=>{switch(g){case"resolution":mergeObjectWithoutOverwriting(c,m.resolution);break;default:c[g]=m[g]}}),s.video=d}else s.video=a.video;else s.video=!1;return a.audio?typeof a.audio=="object"?s.audio=a.audio:s.audio=!0:s.audio=!1,s}utils.constraintsForOptions=constraintsForOptions;var __awaiter$8=commonjsGlobal&&commonjsGlobal.__awaiter||function(a,s,d,c){function m(g){return g instanceof d?g:new d(function(b){b(g)})}return new(d||(d=Promise))(function(g,b){function k(it){try{nt(c.next(it))}catch(ct){b(ct)}}function et(it){try{nt(c.throw(it))}catch(ct){b(ct)}}function nt(it){it.done?g(it.value):m(it.value).then(k,et)}nt((c=c.apply(a,s||[])).next())})},__importDefault$9=commonjsGlobal&&commonjsGlobal.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(LocalAudioTrack$1,"__esModule",{value:!0});const logger_1$6=__importDefault$9(logger),stats_1$4=stats,LocalTrack_1$1=__importDefault$9(LocalTrack$1),Track_1$7=Track,utils_1$5=utils;class LocalAudioTrack extends LocalTrack_1$1.default{constructor(s,d){super(s,Track_1$7.Track.Kind.Audio,d),this.stopOnMute=!1,this.monitorSender=()=>__awaiter$8(this,void 0,void 0,function*(){if(!this.sender){this._currentBitrate=0;return}const c=yield this.getSenderStats();c&&this.prevStats&&(this._currentBitrate=stats_1$4.computeBitrate(c,this.prevStats)),this.prevStats=c,setTimeout(()=>{this.monitorSender()},stats_1$4.monitorFrequency)})}setDeviceId(s){return __awaiter$8(this,void 0,void 0,function*(){this.constraints.deviceId!==s&&(this.constraints.deviceId=s,this.isMuted||(yield this.restartTrack()))})}mute(){const s=Object.create(null,{mute:{get:()=>super.mute}});return __awaiter$8(this,void 0,void 0,function*(){return this.source===Track_1$7.Track.Source.Microphone&&this.stopOnMute&&(logger_1$6.default.debug("stopping mic track"),this.mediaStreamTrack.stop()),yield s.mute.call(this),this})}unmute(){const s=Object.create(null,{unmute:{get:()=>super.unmute}});return __awaiter$8(this,void 0,void 0,function*(){return this.source===Track_1$7.Track.Source.Microphone&&this.stopOnMute&&(logger_1$6.default.debug("reacquiring mic track"),yield this.restartTrack()),yield s.unmute.call(this),this})}restartTrack(s){return __awaiter$8(this,void 0,void 0,function*(){let d;if(s){const c=utils_1$5.constraintsForOptions({audio:s});typeof c.audio!="boolean"&&(d=c.audio)}yield this.restart(d)})}startMonitor(){setTimeout(()=>{this.monitorSender()},stats_1$4.monitorFrequency)}getSenderStats(){return __awaiter$8(this,void 0,void 0,function*(){if(!this.sender)return;const s=yield this.sender.getStats();let d;return s.forEach(c=>{c.type==="outbound-rtp"&&(d={type:"audio",streamId:c.id,packetsSent:c.packetsSent,packetsLost:c.packetsLost,bytesSent:c.bytesSent,timestamp:c.timestamp,roundTripTime:c.roundTripTime,jitter:c.jitter})}),d})}}LocalAudioTrack$1.default=LocalAudioTrack;var LocalTrackPublication$1={},TrackPublication={},LocalVideoTrack$1={},__awaiter$7=commonjsGlobal&&commonjsGlobal.__awaiter||function(a,s,d,c){function m(g){return g instanceof d?g:new d(function(b){b(g)})}return new(d||(d=Promise))(function(g,b){function k(it){try{nt(c.next(it))}catch(ct){b(ct)}}function et(it){try{nt(c.throw(it))}catch(ct){b(ct)}}function nt(it){it.done?g(it.value):m(it.value).then(k,et)}nt((c=c.apply(a,s||[])).next())})},__importDefault$8=commonjsGlobal&&commonjsGlobal.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(LocalVideoTrack$1,"__esModule",{value:!0});LocalVideoTrack$1.videoLayersFromEncodings=LocalVideoTrack$1.videoQualityForRid=void 0;const logger_1$5=__importDefault$8(logger),livekit_models_1$1=livekit_models,stats_1$3=stats,utils_1$4=utils$1,LocalTrack_1=__importDefault$8(LocalTrack$1),Track_1$6=Track,utils_2=utils,QUALITY_UPGRADE_DELAY=60*1e3,QUALITY_DOWNGRADE_DELAY=5*1e3,ridOrder=["q","h","f"];class LocalVideoTrack extends LocalTrack_1.default{constructor(s,d){super(s,Track_1$6.Track.Kind.Video,d),this.monitorSender=c=>__awaiter$7(this,void 0,void 0,function*(){if(!this.sender){this._currentBitrate=0;return}const m=yield this.getSenderStats(),g=new Map(m.map(b=>[b.rid,b]));if(!c&&this.prevStats&&this.isSimulcast&&this.checkAndUpdateSimulcast(g),this.prevStats){let b=0;g.forEach((k,et)=>{var nt;const it=(nt=this.prevStats)===null||nt===void 0?void 0:nt.get(et);b+=stats_1$3.computeBitrate(k,it)}),this._currentBitrate=b}this.prevStats=g,setTimeout(()=>{this.monitorSender(c)},stats_1$3.monitorFrequency)})}get isSimulcast(){return!!(this.sender&&this.sender.getParameters().encodings.length>1)}startMonitor(s,d){var c;this.signalClient=s;const m=(c=this.sender)===null||c===void 0?void 0:c.getParameters();m&&(this.encodings=m.encodings),setTimeout(()=>{this.monitorSender(d)},stats_1$3.monitorFrequency)}stop(){this.sender=void 0,this.mediaStreamTrack.getConstraints(),super.stop()}mute(){const s=Object.create(null,{mute:{get:()=>super.mute}});return __awaiter$7(this,void 0,void 0,function*(){return this.source===Track_1$6.Track.Source.Camera&&(logger_1$5.default.debug("stopping camera track"),this.mediaStreamTrack.stop()),yield s.mute.call(this),this})}unmute(){const s=Object.create(null,{unmute:{get:()=>super.unmute}});return __awaiter$7(this,void 0,void 0,function*(){return this.source===Track_1$6.Track.Source.Camera&&(logger_1$5.default.debug("reacquiring camera track"),yield this.restartTrack()),yield s.unmute.call(this),this})}getSenderStats(){return __awaiter$7(this,void 0,void 0,function*(){if(!this.sender)return[];const s=[],d=yield this.sender.getStats();return d.forEach(c=>{var m;if(c.type==="outbound-rtp"){const g={type:"video",streamId:c.id,frameHeight:c.frameHeight,frameWidth:c.frameWidth,firCount:c.firCount,pliCount:c.pliCount,nackCount:c.nackCount,packetsSent:c.packetsSent,bytesSent:c.bytesSent,framesSent:c.framesSent,timestamp:c.timestamp,rid:(m=c.rid)!==null&&m!==void 0?m:"",retransmittedPacketsSent:c.retransmittedPacketsSent,qualityLimitationReason:c.qualityLimitationReason,qualityLimitationResolutionChanges:c.qualityLimitationResolutionChanges},b=d.get(c.remoteId);b&&(g.jitter=b.jitter,g.packetsLost=b.packetsLost,g.roundTripTime=b.roundTripTime),s.push(g)}}),s})}setPublishingQuality(s){const d=[];for(let c=livekit_models_1$1.VideoQuality.LOW;c<=livekit_models_1$1.VideoQuality.HIGH;c+=1)d.push({quality:c,enabled:c<=s});logger_1$5.default.debug("setting publishing quality. max quality",s),this.setPublishingLayers(d)}setDeviceId(s){return __awaiter$7(this,void 0,void 0,function*(){this.constraints.deviceId!==s&&(this.constraints.deviceId=s,this.isMuted||(yield this.restartTrack()))})}restartTrack(s){return __awaiter$7(this,void 0,void 0,function*(){let d;if(s){const c=utils_2.constraintsForOptions({video:s});typeof c.video!="boolean"&&(d=c.video)}yield this.restart(d)})}setPublishingLayers(s){return __awaiter$7(this,void 0,void 0,function*(){if(logger_1$5.default.debug("setting publishing layers",s),!this.sender||!this.encodings)return;const d=this.sender.getParameters(),{encodings:c}=d;if(!c)return;if(c.length!==this.encodings.length){logger_1$5.default.warn("cannot set publishing layers, encodings mismatch");return}this.activeQualities=s;let m=!1;c.forEach((g,b)=>{var k;let et=(k=g.rid)!==null&&k!==void 0?k:"";et===""&&(et="q");const nt=videoQualityForRid(et),it=s.find(ct=>ct.quality===nt);!it||g.active!==it.enabled&&(m=!0,g.active=it.enabled,logger_1$5.default.debug(`setting layer ${it.quality} to ${g.active?"enabled":"disabled"}`),utils_1$4.isFireFox()&&(it.enabled?(g.scaleResolutionDownBy=this.encodings[b].scaleResolutionDownBy,g.maxBitrate=this.encodings[b].maxBitrate,g.maxFrameRate=this.encodings[b].maxFrameRate):(g.scaleResolutionDownBy=4,g.maxBitrate=10,g.maxFrameRate=2)))}),m&&(d.encodings=c,yield this.sender.setParameters(d))})}checkAndUpdateSimulcast(s){var d,c;if(!this.sender||this.isMuted||!this.encodings)return;let m;const{encodings:g}=this.sender.getParameters();if(g.forEach(it=>{!it.active||(m===void 0||m.rid&&it.rid&&ridOrder.indexOf(m.rid)<ridOrder.indexOf(it.rid)||m.maxBitrate!==void 0&&it.maxBitrate!==void 0&&m.maxBitrate<it.maxBitrate)&&(m=it)}),!m)return;const b=(d=m.rid)!==null&&d!==void 0?d:"",k=s.get(b),et=(c=this.prevStats)===null||c===void 0?void 0:c.get(b);if(!k||!et)return;const nt=videoQualityForRid(b);if(k.qualityLimitationResolutionChanges-et.qualityLimitationResolutionChanges>0&&(this.lastQualityChange=new Date().getTime()),k.framesSent-et.framesSent>0){if(nt===livekit_models_1$1.VideoQuality.HIGH||!this.lastQualityChange)return;const it=nt+1;if(new Date().getTime()-this.lastQualityChange<QUALITY_UPGRADE_DELAY||this.activeQualities&&this.activeQualities.some(st=>st.quality===it&&!st.enabled))return;let ct=livekit_models_1$1.VideoQuality.LOW;if(g.forEach(st=>{var ut;const pt=videoQualityForRid((ut=st.rid)!==null&&ut!==void 0?ut:"");pt>ct&&(ct=pt)}),it>ct)return;logger_1$5.default.debug("upgrading video quality to",it),this.setPublishingQuality(it);return}k.framesSent!==0&&(this.lastExplicitQualityChange&&new Date().getTime()-this.lastExplicitQualityChange<QUALITY_DOWNGRADE_DELAY||nt!==livekit_models_1$1.VideoQuality.UNRECOGNIZED&&nt!==livekit_models_1$1.VideoQuality.LOW&&(logger_1$5.default.debug("downgrading video quality to",nt-1),this.setPublishingQuality(nt-1)))}}LocalVideoTrack$1.default=LocalVideoTrack;function videoQualityForRid(a){switch(a){case"f":return livekit_models_1$1.VideoQuality.HIGH;case"h":return livekit_models_1$1.VideoQuality.MEDIUM;case"q":return livekit_models_1$1.VideoQuality.LOW;default:return livekit_models_1$1.VideoQuality.UNRECOGNIZED}}LocalVideoTrack$1.videoQualityForRid=videoQualityForRid;function videoLayersFromEncodings(a,s,d){return d?d.map(c=>{var m,g,b;const k=(m=c.scaleResolutionDownBy)!==null&&m!==void 0?m:1;let et=videoQualityForRid((g=c.rid)!==null&&g!==void 0?g:"");return et===livekit_models_1$1.VideoQuality.UNRECOGNIZED&&d.length===1&&(et=livekit_models_1$1.VideoQuality.HIGH),{quality:et,width:a/k,height:s/k,bitrate:(b=c.maxBitrate)!==null&&b!==void 0?b:0,ssrc:0}}):[{quality:livekit_models_1$1.VideoQuality.HIGH,width:a,height:s,bitrate:0,ssrc:0}]}LocalVideoTrack$1.videoLayersFromEncodings=videoLayersFromEncodings;var RemoteAudioTrack$1={},RemoteTrack$1={};Object.defineProperty(RemoteTrack$1,"__esModule",{value:!0});const events_1$5=events$1,stats_1$2=stats,Track_1$5=Track;class RemoteTrack extends Track_1$5.Track{constructor(s,d,c,m){super(s,c),this.sid=d,this.receiver=m}setMuted(s){this.isMuted!==s&&(this.isMuted=s,this.emit(s?events_1$5.TrackEvent.Muted:events_1$5.TrackEvent.Unmuted,this))}setMediaStream(s){s.onremovetrack=()=>{this.receiver=void 0,this._currentBitrate=0,this.emit(events_1$5.TrackEvent.Ended,this)}}start(){this.startMonitor(),super.enable()}stop(){super.disable()}startMonitor(){setTimeout(()=>{this.monitorReceiver()},stats_1$2.monitorFrequency)}}RemoteTrack$1.default=RemoteTrack;var __awaiter$6=commonjsGlobal&&commonjsGlobal.__awaiter||function(a,s,d,c){function m(g){return g instanceof d?g:new d(function(b){b(g)})}return new(d||(d=Promise))(function(g,b){function k(it){try{nt(c.next(it))}catch(ct){b(ct)}}function et(it){try{nt(c.throw(it))}catch(ct){b(ct)}}function nt(it){it.done?g(it.value):m(it.value).then(k,et)}nt((c=c.apply(a,s||[])).next())})},__importDefault$7=commonjsGlobal&&commonjsGlobal.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(RemoteAudioTrack$1,"__esModule",{value:!0});const stats_1$1=stats,RemoteTrack_1$1=__importDefault$7(RemoteTrack$1),Track_1$4=Track;class RemoteAudioTrack extends RemoteTrack_1$1.default{constructor(s,d,c){super(s,d,Track_1$4.Track.Kind.Audio,c),this.monitorReceiver=()=>__awaiter$6(this,void 0,void 0,function*(){if(!this.receiver){this._currentBitrate=0;return}const m=yield this.getReceiverStats();m&&this.prevStats&&this.receiver&&(this._currentBitrate=stats_1$1.computeBitrate(m,this.prevStats)),this.prevStats=m,setTimeout(()=>{this.monitorReceiver()},stats_1$1.monitorFrequency)})}getReceiverStats(){return __awaiter$6(this,void 0,void 0,function*(){if(!this.receiver)return;const s=yield this.receiver.getStats();let d;return s.forEach(c=>{c.type==="inbound-rtp"&&(d={type:"audio",timestamp:c.timestamp,jitter:c.jitter,bytesReceived:c.bytesReceived,concealedSamples:c.concealedSamples,concealmentEvents:c.concealmentEvents,silentConcealedSamples:c.silentConcealedSamples,silentConcealmentEvents:c.silentConcealmentEvents,totalAudioEnergy:c.totalAudioEnergy,totalSamplesDuration:c.totalSamplesDuration})}),d})}}RemoteAudioTrack$1.default=RemoteAudioTrack;var RemoteVideoTrack$1={};function r$1(a,s,d){var c,m,g;s===void 0&&(s=50),d===void 0&&(d={});var b=(c=d.isImmediate)!=null&&c,k=(m=d.callback)!=null&&m,et=d.maxWait,nt=Date.now(),it=[];function ct(){if(et!==void 0){var ut=Date.now()-nt;if(ut+s>=et)return et-ut}return s}var st=function(){var ut=[].slice.call(arguments),pt=this;return new Promise(function(St,_t){var ht=b&&g===void 0;if(g!==void 0&&clearTimeout(g),g=setTimeout(function(){if(g=void 0,nt=Date.now(),!b){var ot=a.apply(pt,ut);k&&k(ot),it.forEach(function(lt){return(0,lt.resolve)(ot)}),it=[]}},ct()),ht){var _e=a.apply(pt,ut);return k&&k(_e),St(_e)}it.push({resolve:St,reject:_t})})};return st.cancel=function(ut){g!==void 0&&clearTimeout(g),it.forEach(function(pt){return(0,pt.reject)(ut)}),it=[]},st}var index_esm=Object.freeze(Object.defineProperty({__proto__:null,debounce:r$1},Symbol.toStringTag,{value:"Module"})),require$$0=getAugmentedNamespace(index_esm),__awaiter$5=commonjsGlobal&&commonjsGlobal.__awaiter||function(a,s,d,c){function m(g){return g instanceof d?g:new d(function(b){b(g)})}return new(d||(d=Promise))(function(g,b){function k(it){try{nt(c.next(it))}catch(ct){b(ct)}}function et(it){try{nt(c.throw(it))}catch(ct){b(ct)}}function nt(it){it.done?g(it.value):m(it.value).then(k,et)}nt((c=c.apply(a,s||[])).next())})},__importDefault$6=commonjsGlobal&&commonjsGlobal.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(RemoteVideoTrack$1,"__esModule",{value:!0});const ts_debounce_1$1=require$$0,events_1$4=events$1,stats_1=stats,utils_1$3=utils$1,RemoteTrack_1=__importDefault$6(RemoteTrack$1),Track_1$3=Track,REACTION_DELAY=100;class RemoteVideoTrack extends RemoteTrack_1.default{constructor(s,d,c,m){super(s,d,Track_1$3.Track.Kind.Video,c),this.elementInfos=[],this.monitorReceiver=()=>__awaiter$5(this,void 0,void 0,function*(){if(!this.receiver){this._currentBitrate=0;return}const g=yield this.getReceiverStats();g&&this.prevStats&&this.receiver&&(this._currentBitrate=stats_1.computeBitrate(g,this.prevStats)),this.prevStats=g,setTimeout(()=>{this.monitorReceiver()},stats_1.monitorFrequency)}),this.handleVisibilityChanged=g=>{const{target:b,isIntersecting:k}=g,et=this.elementInfos.find(nt=>nt.element===b);et&&(et.visible=k,et.visibilityChangedAt=Date.now()),this.updateVisibility()},this.debouncedHandleResize=ts_debounce_1$1.debounce(()=>{this.updateDimensions()},REACTION_DELAY),this.adaptiveStream=m}get isAdaptiveStream(){var s;return(s=this.adaptiveStream)!==null&&s!==void 0?s:!1}setMuted(s){super.setMuted(s),this.attachedElements.forEach(d=>{s?Track_1$3.detachTrack(this.mediaStreamTrack,d):Track_1$3.attachToElement(this.mediaStreamTrack,d)})}attach(s){return s?super.attach(s):s=super.attach(),this.adaptiveStream&&(this.elementInfos.push({element:s,visible:!0}),s.handleResize=this.debouncedHandleResize,s.handleVisibilityChanged=this.handleVisibilityChanged,utils_1$3.getIntersectionObserver().observe(s),utils_1$3.getResizeObserver().observe(s)),s}detach(s){let d=[];if(s)return this.stopObservingElement(s),super.detach(s);d=super.detach();for(const c of d)this.stopObservingElement(c);return d}getReceiverStats(){return __awaiter$5(this,void 0,void 0,function*(){if(!this.receiver)return;const s=yield this.receiver.getStats();let d;return s.forEach(c=>{c.type==="inbound-rtp"&&(d={type:"video",framesDecoded:c.framesDecoded,framesDropped:c.framesDropped,framesReceived:c.framesReceived,packetsReceived:c.packetsReceived,packetsLost:c.packetsLost,frameWidth:c.frameWidth,frameHeight:c.frameHeight,pliCount:c.pliCount,firCount:c.firCount,nackCount:c.nackCount,jitter:c.jitter,timestamp:c.timestamp,bytesReceived:c.bytesReceived})}),d})}stopObservingElement(s){var d,c;(d=utils_1$3.getIntersectionObserver())===null||d===void 0||d.unobserve(s),(c=utils_1$3.getResizeObserver())===null||c===void 0||c.unobserve(s),this.elementInfos=this.elementInfos.filter(m=>m.element!==s)}updateVisibility(){const s=this.elementInfos.reduce((c,m)=>Math.max(c,m.visibilityChangedAt||0),0),d=this.elementInfos.some(c=>c.visible);if(this.lastVisible!==d){if(!d&&Date.now()-s<REACTION_DELAY){setTimeout(()=>{this.updateVisibility()},Date.now()-s);return}this.lastVisible=d,this.emit(events_1$4.TrackEvent.VisibilityChanged,d,this)}}updateDimensions(){var s,d;let c=0,m=0;for(const g of this.elementInfos)g.visible&&g.element.clientWidth+g.element.clientHeight>c+m&&(c=g.element.clientWidth,m=g.element.clientHeight);((s=this.lastDimensions)===null||s===void 0?void 0:s.width)===c&&((d=this.lastDimensions)===null||d===void 0?void 0:d.height)===m||(this.lastDimensions={width:c,height:m},this.emit(events_1$4.TrackEvent.VideoDimensionsChanged,this.lastDimensions,this))}}RemoteVideoTrack$1.default=RemoteVideoTrack;(function(a){var s=commonjsGlobal&&commonjsGlobal.__importDefault||function(it){return it&&it.__esModule?it:{default:it}};Object.defineProperty(a,"__esModule",{value:!0}),a.TrackPublication=void 0;const d=events.exports,c=events$1,m=s(LocalAudioTrack$1),g=s(LocalVideoTrack$1),b=s(RemoteAudioTrack$1),k=s(RemoteVideoTrack$1),et=Track;class nt extends d.EventEmitter{constructor(ct,st,ut){super(),this.metadataMuted=!1,this.handleMuted=()=>{this.emit(c.TrackEvent.Muted)},this.handleUnmuted=()=>{this.emit(c.TrackEvent.Unmuted)},this.kind=ct,this.trackSid=st,this.trackName=ut,this.source=et.Track.Source.Unknown}setTrack(ct){this.track&&(this.track.off(c.TrackEvent.Muted,this.handleMuted),this.track.off(c.TrackEvent.Unmuted,this.handleUnmuted)),this.track=ct,ct&&(ct.on(c.TrackEvent.Muted,this.handleMuted),ct.on(c.TrackEvent.Unmuted,this.handleUnmuted))}get isMuted(){return this.metadataMuted}get isEnabled(){return!0}get isSubscribed(){return this.track!==void 0}get audioTrack(){if(this.track instanceof m.default||this.track instanceof b.default)return this.track}get videoTrack(){if(this.track instanceof g.default||this.track instanceof k.default)return this.track}updateInfo(ct){this.trackSid=ct.sid,this.trackName=ct.name,this.source=et.Track.sourceFromProto(ct.source),this.mimeType=ct.mimeType,this.kind===et.Track.Kind.Video&&ct.width>0&&(this.dimensions={width:ct.width,height:ct.height},this.simulcasted=ct.simulcast),this.trackInfo=ct}}a.TrackPublication=nt,function(it){(function(ct){ct.Subscribed="subscribed",ct.NotAllowed="not_allowed",ct.Unsubscribed="unsubscribed"})(it.SubscriptionStatus||(it.SubscriptionStatus={}))}(nt=a.TrackPublication||(a.TrackPublication={}))})(TrackPublication);var __awaiter$4=commonjsGlobal&&commonjsGlobal.__awaiter||function(a,s,d,c){function m(g){return g instanceof d?g:new d(function(b){b(g)})}return new(d||(d=Promise))(function(g,b){function k(it){try{nt(c.next(it))}catch(ct){b(ct)}}function et(it){try{nt(c.throw(it))}catch(ct){b(ct)}}function nt(it){it.done?g(it.value):m(it.value).then(k,et)}nt((c=c.apply(a,s||[])).next())})};Object.defineProperty(LocalTrackPublication$1,"__esModule",{value:!0});const events_1$3=events$1,TrackPublication_1$1=TrackPublication;class LocalTrackPublication extends TrackPublication_1$1.TrackPublication{constructor(s,d,c){super(s,d.sid,d.name),this.handleTrackEnded=m=>{this.emit(events_1$3.TrackEvent.Ended,m)},this.updateInfo(d),this.setTrack(c)}setTrack(s){this.track&&this.track.off(events_1$3.TrackEvent.Ended,this.handleTrackEnded),super.setTrack(s),s&&s.on(events_1$3.TrackEvent.Ended,this.handleTrackEnded)}get isMuted(){return this.track?this.track.isMuted:super.isMuted}get audioTrack(){return super.audioTrack}get videoTrack(){return super.videoTrack}mute(){var s;return __awaiter$4(this,void 0,void 0,function*(){return(s=this.track)===null||s===void 0?void 0:s.mute()})}unmute(){var s;return __awaiter$4(this,void 0,void 0,function*(){return(s=this.track)===null||s===void 0?void 0:s.unmute()})}}LocalTrackPublication$1.default=LocalTrackPublication;var options$1={};(function(a){Object.defineProperty(a,"__esModule",{value:!0}),a.ScreenSharePresets=a.VideoPresets43=a.VideoPresets=a.AudioPresets=a.VideoPreset=void 0;class s{constructor(c,m,g,b){this.width=c,this.height=m,this.encoding={maxBitrate:g,maxFramerate:b}}get resolution(){return{width:this.width,height:this.height,frameRate:this.encoding.maxFramerate,aspectRatio:this.width/this.height}}}a.VideoPreset=s,function(d){d.telephone={maxBitrate:12e3},d.speech={maxBitrate:2e4},d.music={maxBitrate:32e3}}(a.AudioPresets||(a.AudioPresets={})),a.VideoPresets={qvga:new s(320,180,12e4,10),vga:new s(640,360,3e5,20),qhd:new s(960,540,6e5,25),hd:new s(1280,720,2e6,30),fhd:new s(1920,1080,3e6,30)},a.VideoPresets43={qvga:new s(240,180,9e4,10),vga:new s(480,360,225e3,20),qhd:new s(720,540,45e4,25),hd:new s(960,720,15e5,30),fhd:new s(1440,1080,28e5,30)},a.ScreenSharePresets={vga:new s(640,360,2e5,3),hd_8:new s(1280,720,4e5,5),hd_15:new s(1280,720,1e6,15),fhd_15:new s(1920,1080,15e5,15),fhd_30:new s(1920,1080,3e6,30)}})(options$1);var Participant$1={};(function(a){Object.defineProperty(a,"__esModule",{value:!0}),a.ConnectionQuality=void 0;const s=events.exports,d=livekit_models,c=events$1,m=Track;var g;(function(et){et.Excellent="excellent",et.Good="good",et.Poor="poor",et.Unknown="unknown"})(g=a.ConnectionQuality||(a.ConnectionQuality={}));function b(et){switch(et){case d.ConnectionQuality.EXCELLENT:return g.Excellent;case d.ConnectionQuality.GOOD:return g.Good;case d.ConnectionQuality.POOR:return g.Poor;default:return g.Unknown}}class k extends s.EventEmitter{constructor(nt,it){super(),this.audioLevel=0,this.isSpeaking=!1,this._connectionQuality=g.Unknown,this.sid=nt,this.identity=it,this.audioTracks=new Map,this.videoTracks=new Map,this.tracks=new Map}getTracks(){return Array.from(this.tracks.values())}getTrack(nt){if(nt!==m.Track.Source.Unknown){for(const[,it]of this.tracks)if(it.source===nt||it.source===m.Track.Source.Unknown&&(nt===m.Track.Source.Microphone&&it.kind===m.Track.Kind.Audio&&it.trackName!=="screen"||nt===m.Track.Source.Camera&&it.kind===m.Track.Kind.Video&&it.trackName!=="screen"||nt===m.Track.Source.ScreenShare&&it.kind===m.Track.Kind.Video&&it.trackName==="screen"||nt===m.Track.Source.ScreenShareAudio&&it.kind===m.Track.Kind.Audio&&it.trackName==="screen"))return it}}getTrackByName(nt){for(const[,it]of this.tracks)if(it.trackName===nt)return it}get connectionQuality(){return this._connectionQuality}get isCameraEnabled(){var nt;const it=this.getTrack(m.Track.Source.Camera);return!(!((nt=it==null?void 0:it.isMuted)!==null&&nt!==void 0)||nt)}get isMicrophoneEnabled(){var nt;const it=this.getTrack(m.Track.Source.Microphone);return!(!((nt=it==null?void 0:it.isMuted)!==null&&nt!==void 0)||nt)}get isScreenShareEnabled(){return!!this.getTrack(m.Track.Source.ScreenShare)}get joinedAt(){return this.participantInfo?new Date(this.participantInfo.joinedAt*1e3):new Date}updateInfo(nt){this.identity=nt.identity,this.sid=nt.sid,this.name=nt.name,this.setMetadata(nt.metadata),this.participantInfo=nt}setMetadata(nt){const it=!this.participantInfo||this.participantInfo.metadata!==nt,ct=this.metadata;this.metadata=nt,it&&(this.emit(c.ParticipantEvent.MetadataChanged,ct,this),this.emit(c.ParticipantEvent.ParticipantMetadataChanged,ct,this))}setIsSpeaking(nt){nt!==this.isSpeaking&&(this.isSpeaking=nt,nt&&(this.lastSpokeAt=new Date),this.emit(c.ParticipantEvent.IsSpeakingChanged,nt))}setConnectionQuality(nt){const it=this._connectionQuality;this._connectionQuality=b(nt),it!==this._connectionQuality&&this.emit(c.ParticipantEvent.ConnectionQualityChanged,this._connectionQuality)}addTrackPublication(nt){nt.on(c.TrackEvent.Muted,()=>{this.emit(c.ParticipantEvent.TrackMuted,nt)}),nt.on(c.TrackEvent.Unmuted,()=>{this.emit(c.ParticipantEvent.TrackUnmuted,nt)});const it=nt;switch(it.track&&(it.track.sid=nt.trackSid),this.tracks.set(nt.trackSid,nt),nt.kind){case m.Track.Kind.Audio:this.audioTracks.set(nt.trackSid,nt);break;case m.Track.Kind.Video:this.videoTracks.set(nt.trackSid,nt);break}}}a.default=k})(Participant$1);var ParticipantTrackPermission={};Object.defineProperty(ParticipantTrackPermission,"__esModule",{value:!0});ParticipantTrackPermission.trackPermissionToProto=void 0;function trackPermissionToProto(a){var s;if(!a.participantSid)throw new Error("Invalid track permission, missing participantSid");return{participantSid:a.participantSid,allTracks:(s=a.allowAll)!==null&&s!==void 0?s:!1,trackSids:a.allowedTrackSids||[]}}ParticipantTrackPermission.trackPermissionToProto=trackPermissionToProto;var publishUtils={};(function(a){var s=commonjsGlobal&&commonjsGlobal.__importDefault||function(ut){return ut&&ut.__esModule?ut:{default:ut}};Object.defineProperty(a,"__esModule",{value:!0}),a.presetsForResolution=a.determineAppropriateEncoding=a.computeVideoEncodings=a.presetsScreenShare=a.presets43=a.presets169=a.mediaTrackToLocalTrack=void 0;const d=s(logger),c=errors,m=s(LocalAudioTrack$1),g=s(LocalVideoTrack$1),b=options$1;function k(ut,pt){switch(ut.kind){case"audio":return new m.default(ut,pt);case"video":return new g.default(ut,pt);default:throw new c.TrackInvalidError(`unsupported track type: ${ut.kind}`)}}a.mediaTrackToLocalTrack=k,a.presets169=[b.VideoPresets.qvga,b.VideoPresets.vga,b.VideoPresets.qhd,b.VideoPresets.hd,b.VideoPresets.fhd],a.presets43=[b.VideoPresets43.qvga,b.VideoPresets43.vga,b.VideoPresets43.qhd,b.VideoPresets43.hd,b.VideoPresets43.fhd],a.presetsScreenShare=[b.ScreenSharePresets.vga,b.ScreenSharePresets.hd_8,b.ScreenSharePresets.hd_15,b.ScreenSharePresets.fhd_15,b.ScreenSharePresets.fhd_30];const et=["q","h","f"];function nt(ut,pt,St,_t){let ht=_t==null?void 0:_t.videoEncoding;ut&&(ht=_t==null?void 0:_t.screenShareEncoding);const _e=!ut&&(_t==null?void 0:_t.simulcast);if(!ht&&!_e||!pt||!St)return[{}];if(ht||(ht=it(ut,pt,St),d.default.debug("using video encoding",ht)),!_e)return[ht];const ot=ct(ut,pt,St);let lt;const Ot=ot[0];ot.length>1&&([,lt]=ot);const It=new b.VideoPreset(pt,St,ht.maxBitrate,ht.maxFramerate),Pt=Math.max(pt,St);return Pt>=960&&lt?st(pt,St,[Ot,lt,It]):Pt>=500?st(pt,St,[Ot,It]):st(pt,St,[It])}a.computeVideoEncodings=nt;function it(ut,pt,St){const _t=ct(ut,pt,St);let{encoding:ht}=_t[0];const _e=Math.max(pt,St);for(let ot=0;ot<_t.length;ot+=1){const lt=_t[ot];if(ht=lt.encoding,lt.width>=_e)break}return ht}a.determineAppropriateEncoding=it;function ct(ut,pt,St){if(ut)return a.presetsScreenShare;const _t=pt>St?pt/St:St/pt;return Math.abs(_t-16/9)<Math.abs(_t-4/3)?a.presets169:a.presets43}a.presetsForResolution=ct;function st(ut,pt,St){const _t=[];return St.forEach((ht,_e)=>{if(_e>=et.length)return;const ot=Math.min(ut,pt),lt=et[_e];_t.push({rid:lt,scaleResolutionDownBy:ot/Math.min(ht.width,ht.height),maxBitrate:ht.encoding.maxBitrate,maxFramerate:ht.encoding.maxFramerate})}),_t}})(publishUtils);var RemoteParticipant$1={},RemoteTrackPublication$1={},__importDefault$5=commonjsGlobal&&commonjsGlobal.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(RemoteTrackPublication$1,"__esModule",{value:!0});const logger_1$4=__importDefault$5(logger),livekit_models_1=livekit_models,livekit_rtc_1$2=livekit_rtc,events_1$2=events$1,RemoteVideoTrack_1$1=__importDefault$5(RemoteVideoTrack$1),TrackPublication_1=TrackPublication;class RemoteTrackPublication extends TrackPublication_1.TrackPublication{constructor(){super(...arguments),this._allowed=!0,this.disabled=!1,this.currentVideoQuality=livekit_models_1.VideoQuality.HIGH,this.handleEnded=s=>{this.emit(events_1$2.TrackEvent.Ended,s)},this.handleVisibilityChange=s=>{logger_1$4.default.debug("adaptivestream video visibility",this.trackSid,`visible=${s}`),this.disabled=!s,this.emitTrackUpdate()},this.handleVideoDimensionsChange=s=>{logger_1$4.default.debug("adaptivestream video dimensions",this.trackSid,`${s.width}x${s.height}`),this.videoDimensions=s,this.emitTrackUpdate()}}setSubscribed(s){this.subscribed=s;const d={trackSids:[this.trackSid],subscribe:this.subscribed,participantTracks:[]};this.emit(events_1$2.TrackEvent.UpdateSubscription,d)}get subscriptionStatus(){return this.subscribed===!1||!super.isSubscribed?TrackPublication_1.TrackPublication.SubscriptionStatus.Unsubscribed:this._allowed?TrackPublication_1.TrackPublication.SubscriptionStatus.Subscribed:TrackPublication_1.TrackPublication.SubscriptionStatus.NotAllowed}get isSubscribed(){return this.subscribed===!1||!this._allowed?!1:super.isSubscribed}get isEnabled(){return!this.disabled}setEnabled(s){!this.isManualOperationAllowed()||this.disabled===!s||(this.disabled=!s,this.emitTrackUpdate())}setVideoQuality(s){!this.isManualOperationAllowed()||this.currentVideoQuality===s||(this.currentVideoQuality=s,this.videoDimensions=void 0,this.emitTrackUpdate())}setVideoDimensions(s){var d,c;!this.isManualOperationAllowed()||((d=this.videoDimensions)===null||d===void 0?void 0:d.width)===s.width&&((c=this.videoDimensions)===null||c===void 0?void 0:c.height)===s.height||(this.track instanceof RemoteVideoTrack_1$1.default&&(this.videoDimensions=s),this.currentVideoQuality=void 0,this.emitTrackUpdate())}get videoQuality(){return this.currentVideoQuality}setTrack(s){this.track&&(this.track.off(events_1$2.TrackEvent.VideoDimensionsChanged,this.handleVideoDimensionsChange),this.track.off(events_1$2.TrackEvent.VisibilityChanged,this.handleVisibilityChange),this.track.off(events_1$2.TrackEvent.Ended,this.handleEnded)),super.setTrack(s),s&&(s.sid=this.trackSid,s.on(events_1$2.TrackEvent.VideoDimensionsChanged,this.handleVideoDimensionsChange),s.on(events_1$2.TrackEvent.VisibilityChanged,this.handleVisibilityChange),s.on(events_1$2.TrackEvent.Ended,this.handleEnded))}updateInfo(s){var d;super.updateInfo(s),this.metadataMuted=s.muted,(d=this.track)===null||d===void 0||d.setMuted(s.muted)}isManualOperationAllowed(){return this.isAdaptiveStream?(logger_1$4.default.warn("adaptive stream is enabled, cannot change track settings",this.trackSid),!1):this.isSubscribed?!0:(logger_1$4.default.warn("cannot update track settings when not subscribed",this.trackSid),!1)}get isAdaptiveStream(){return this.track instanceof RemoteVideoTrack_1$1.default&&this.track.isAdaptiveStream}emitTrackUpdate(){const s=livekit_rtc_1$2.UpdateTrackSettings.fromPartial({trackSids:[this.trackSid],disabled:this.disabled});this.videoDimensions?(s.width=this.videoDimensions.width,s.height=this.videoDimensions.height):this.currentVideoQuality!==void 0?s.quality=this.currentVideoQuality:s.quality=livekit_models_1.VideoQuality.HIGH,this.emit(events_1$2.TrackEvent.UpdateSettings,s)}}RemoteTrackPublication$1.default=RemoteTrackPublication;var __importDefault$4=commonjsGlobal&&commonjsGlobal.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(RemoteParticipant$1,"__esModule",{value:!0});const logger_1$3=__importDefault$4(logger),events_1$1=events$1,RemoteAudioTrack_1=__importDefault$4(RemoteAudioTrack$1),RemoteTrackPublication_1=__importDefault$4(RemoteTrackPublication$1),RemoteVideoTrack_1=__importDefault$4(RemoteVideoTrack$1),Track_1$2=Track,Participant_1$1=__importDefault$4(Participant$1);class RemoteParticipant extends Participant_1$1.default{constructor(s,d,c){super(d,c||""),this.signalClient=s,this.tracks=new Map,this.audioTracks=new Map,this.videoTracks=new Map}static fromParticipantInfo(s,d){const c=new RemoteParticipant(s,d.sid,d.identity);return c.updateInfo(d),c}addTrackPublication(s){super.addTrackPublication(s),s.on(events_1$1.TrackEvent.UpdateSettings,d=>{this.signalClient.sendUpdateTrackSettings(d)}),s.on(events_1$1.TrackEvent.UpdateSubscription,d=>{this.signalClient.sendUpdateSubscription(d)}),s.on(events_1$1.TrackEvent.Ended,d=>{this.emit(events_1$1.ParticipantEvent.TrackUnsubscribed,d,s)})}getTrack(s){const d=super.getTrack(s);if(d)return d}getTrackByName(s){const d=super.getTrackByName(s);if(d)return d}addSubscribedMediaTrack(s,d,c,m,g,b){let k=this.getTrackPublication(d);if(k||d.startsWith("TR")||this.tracks.forEach(it=>{!k&&s.kind===it.kind.toString()&&(k=it)}),!k){if(b===0){logger_1$3.default.error("could not find published track",this.sid,d),this.emit(events_1$1.ParticipantEvent.TrackSubscriptionFailed,d);return}b===void 0&&(b=20),setTimeout(()=>{this.addSubscribedMediaTrack(s,d,c,m,g,b-1)},150);return}const et=s.kind==="video";let nt;return et?nt=new RemoteVideoTrack_1.default(s,d,m,g):nt=new RemoteAudioTrack_1.default(s,d,m),nt.source=k.source,nt.isMuted=k.isMuted,nt.setMediaStream(c),nt.start(),k.setTrack(nt),this.emit(events_1$1.ParticipantEvent.TrackSubscribed,nt,k),k}get hasMetadata(){return!!this.participantInfo}getTrackPublication(s){return this.tracks.get(s)}updateInfo(s){const d=this.hasMetadata;super.updateInfo(s);const c=new Map,m=new Map;s.tracks.forEach(g=>{let b=this.getTrackPublication(g.sid);if(b)b.updateInfo(g);else{const k=Track_1$2.Track.kindFromProto(g.type);if(!k)return;b=new RemoteTrackPublication_1.default(k,g.sid,g.name),b.updateInfo(g),m.set(g.sid,b),this.addTrackPublication(b)}c.set(g.sid,b)}),d&&m.forEach(g=>{this.emit(events_1$1.ParticipantEvent.TrackPublished,g)}),this.tracks.forEach(g=>{c.has(g.trackSid)||this.unpublishTrack(g.trackSid,!0)})}unpublishTrack(s,d){const c=this.tracks.get(s);if(!c)return;switch(this.tracks.delete(s),c.kind){case Track_1$2.Track.Kind.Audio:this.audioTracks.delete(s);break;case Track_1$2.Track.Kind.Video:this.videoTracks.delete(s);break}const{track:m}=c;if(m){const{isSubscribed:g}=c;m.stop(),c.setTrack(void 0),g&&this.emit(events_1$1.ParticipantEvent.TrackUnsubscribed,m,c)}d&&this.emit(events_1$1.ParticipantEvent.TrackUnpublished,c)}emit(s,...d){return logger_1$3.default.trace("participant event",this.sid,s,...d),super.emit(s,...d)}}RemoteParticipant$1.default=RemoteParticipant;var __createBinding=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(a,s,d,c){c===void 0&&(c=d),Object.defineProperty(a,c,{enumerable:!0,get:function(){return s[d]}})}:function(a,s,d,c){c===void 0&&(c=d),a[c]=s[d]}),__setModuleDefault=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(a,s){Object.defineProperty(a,"default",{enumerable:!0,value:s})}:function(a,s){a.default=s}),__importStar=commonjsGlobal&&commonjsGlobal.__importStar||function(a){if(a&&a.__esModule)return a;var s={};if(a!=null)for(var d in a)d!=="default"&&Object.prototype.hasOwnProperty.call(a,d)&&__createBinding(s,a,d);return __setModuleDefault(s,a),s},__awaiter$3=commonjsGlobal&&commonjsGlobal.__awaiter||function(a,s,d,c){function m(g){return g instanceof d?g:new d(function(b){b(g)})}return new(d||(d=Promise))(function(g,b){function k(it){try{nt(c.next(it))}catch(ct){b(ct)}}function et(it){try{nt(c.throw(it))}catch(ct){b(ct)}}function nt(it){it.done?g(it.value):m(it.value).then(k,et)}nt((c=c.apply(a,s||[])).next())})},__importDefault$3=commonjsGlobal&&commonjsGlobal.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(LocalParticipant$1,"__esModule",{value:!0});const logger_1$2=__importDefault$3(logger),livekit_rtc_1$1=livekit_rtc,errors_1$2=errors,events_1=events$1,LocalAudioTrack_1$1=__importDefault$3(LocalAudioTrack$1),LocalTrackPublication_1=__importDefault$3(LocalTrackPublication$1),LocalVideoTrack_1$1=__importStar(LocalVideoTrack$1),options_1$2=options$1,Track_1$1=Track,utils_1$2=utils,Participant_1=__importDefault$3(Participant$1),ParticipantTrackPermission_1=ParticipantTrackPermission,publishUtils_1$1=publishUtils,RemoteParticipant_1=__importDefault$3(RemoteParticipant$1);class LocalParticipant extends Participant_1.default{constructor(s,d,c,m){super(s,d),this.pendingPublishing=new Set,this.onTrackUnmuted=g=>{this.onTrackMuted(g,!1)},this.onTrackMuted=(g,b)=>{if(b===void 0&&(b=!0),!g.sid){logger_1$2.default.error("could not update mute status for unpublished track",g);return}this.engine.updateMuteStatus(g.sid,b)},this.handleSubscribedQualityUpdate=g=>{var b,k;if(!(!((b=this.roomOptions)===null||b===void 0)&&b.dynacast))return;const et=this.videoTracks.get(g.trackSid);if(!et){logger_1$2.default.warn("handleSubscribedQualityUpdate","received subscribed quality update for unknown track",g.trackSid);return}(k=et.videoTrack)===null||k===void 0||k.setPublishingLayers(g.subscribedQualities)},this.onTrackUnpublish=g=>{this.unpublishTrack(g)},this.audioTracks=new Map,this.videoTracks=new Map,this.tracks=new Map,this.engine=c,this.roomOptions=m,this.engine.client.onRemoteMuteChanged=(g,b)=>{const k=this.tracks.get(g);!k||!k.track||(b?k.mute():k.unmute())},this.engine.client.onSubscribedQualityUpdate=this.handleSubscribedQualityUpdate}get lastCameraError(){return this.cameraError}get lastMicrophoneError(){return this.microphoneError}getTrack(s){const d=super.getTrack(s);if(d)return d}getTrackByName(s){const d=super.getTrackByName(s);if(d)return d}setCameraEnabled(s){return this.setTrackEnabled(Track_1$1.Track.Source.Camera,s)}setMicrophoneEnabled(s){return this.setTrackEnabled(Track_1$1.Track.Source.Microphone,s)}setScreenShareEnabled(s){return this.setTrackEnabled(Track_1$1.Track.Source.ScreenShare,s)}setTrackEnabled(s,d){return __awaiter$3(this,void 0,void 0,function*(){logger_1$2.default.debug("setTrackEnabled",s,d);const c=this.getTrack(s);if(d)if(c)yield c.unmute();else{let m;if(this.pendingPublishing.has(s)){logger_1$2.default.info("skipping duplicate published source",s);return}this.pendingPublishing.add(s);try{switch(s){case Track_1$1.Track.Source.Camera:[m]=yield this.createTracks({video:!0});break;case Track_1$1.Track.Source.Microphone:[m]=yield this.createTracks({audio:!0});break;case Track_1$1.Track.Source.ScreenShare:[m]=yield this.createScreenTracks({audio:!1});break;default:throw new errors_1$2.TrackInvalidError(s)}yield this.publishTrack(m)}catch(g){throw g instanceof Error&&!(g instanceof errors_1$2.TrackInvalidError)&&this.emit(events_1.ParticipantEvent.MediaDevicesError,g),g}finally{this.pendingPublishing.delete(s)}}else c&&c.track&&(s===Track_1$1.Track.Source.ScreenShare?this.unpublishTrack(c.track):yield c.mute())})}enableCameraAndMicrophone(){return __awaiter$3(this,void 0,void 0,function*(){if(!(this.pendingPublishing.has(Track_1$1.Track.Source.Camera)||this.pendingPublishing.has(Track_1$1.Track.Source.Microphone))){this.pendingPublishing.add(Track_1$1.Track.Source.Camera),this.pendingPublishing.add(Track_1$1.Track.Source.Microphone);try{const s=yield this.createTracks({audio:!0,video:!0});yield Promise.all(s.map(d=>this.publishTrack(d)))}finally{this.pendingPublishing.delete(Track_1$1.Track.Source.Camera),this.pendingPublishing.delete(Track_1$1.Track.Source.Microphone)}}})}createTracks(s){var d,c;return __awaiter$3(this,void 0,void 0,function*(){const m=utils_1$2.mergeDefaultOptions(s,(d=this.roomOptions)===null||d===void 0?void 0:d.audioCaptureDefaults,(c=this.roomOptions)===null||c===void 0?void 0:c.videoCaptureDefaults),g=utils_1$2.constraintsForOptions(m);let b;try{b=yield navigator.mediaDevices.getUserMedia(g)}catch(k){throw k instanceof Error&&(g.audio&&(this.microphoneError=k),g.video&&(this.cameraError=k)),k}return g.audio&&(this.microphoneError=void 0),g.video&&(this.cameraError=void 0),b.getTracks().map(k=>{const et=k.kind==="audio";et?s.audio:s.video;let nt;const it=et?g.audio:g.video;typeof it!="boolean"&&(nt=it);const ct=publishUtils_1$1.mediaTrackToLocalTrack(k,nt);return ct.kind===Track_1$1.Track.Kind.Video?ct.source=Track_1$1.Track.Source.Camera:ct.kind===Track_1$1.Track.Kind.Audio&&(ct.source=Track_1$1.Track.Source.Microphone),ct})})}createScreenTracks(s){var d;return __awaiter$3(this,void 0,void 0,function*(){s===void 0&&(s={}),s.resolution===void 0&&(s.resolution=options_1$2.VideoPresets.fhd.resolution);let c=!0;s.resolution&&(c={width:s.resolution.width,height:s.resolution.height,frameRate:s.resolution.frameRate});const m=yield navigator.mediaDevices.getDisplayMedia({audio:(d=s.audio)!==null&&d!==void 0?d:!1,video:c}),g=m.getVideoTracks();if(g.length===0)throw new errors_1$2.TrackInvalidError("no video track found");const b=new LocalVideoTrack_1$1.default(g[0]);b.source=Track_1$1.Track.Source.ScreenShare;const k=[b];if(m.getAudioTracks().length>0){const et=new LocalAudioTrack_1$1.default(m.getAudioTracks()[0]);et.source=Track_1$1.Track.Source.ScreenShareAudio,k.push(et)}return k})}publishTrack(s,d){var c,m,g,b,k,et,nt,it;return __awaiter$3(this,void 0,void 0,function*(){const ct=Object.assign(Object.assign({},(c=this.roomOptions)===null||c===void 0?void 0:c.publishDefaults),d);if(s instanceof MediaStreamTrack)switch(s.kind){case"audio":s=new LocalAudioTrack_1$1.default(s);break;case"video":s=new LocalVideoTrack_1$1.default(s);break;default:throw new errors_1$2.TrackInvalidError(`unsupported MediaStreamTrack kind ${s.kind}`)}let st;if(this.tracks.forEach(ot=>{!ot.track||ot.track===s&&(st=ot)}),st)return st;ct.source&&(s.source=ct.source),ct.stopMicTrackOnMute&&s instanceof LocalAudioTrack_1$1.default&&(s.stopOnMute=!0),s.on(events_1.TrackEvent.Muted,this.onTrackMuted),s.on(events_1.TrackEvent.Unmuted,this.onTrackUnmuted),s.on(events_1.TrackEvent.Ended,this.onTrackUnpublish);const ut=livekit_rtc_1$1.AddTrackRequest.fromPartial({cid:s.mediaStreamTrack.id,name:d==null?void 0:d.name,type:Track_1$1.Track.kindToProto(s.kind),muted:s.isMuted,source:Track_1$1.Track.sourceToProto(s.source),disableDtx:!(!((m=ct==null?void 0:ct.dtx)!==null&&m!==void 0)||m)});let pt;if(s.kind===Track_1$1.Track.Kind.Video){const ot=s.mediaStreamTrack.getSettings(),lt=(g=ot.width)!==null&&g!==void 0?g:(b=s.dimensions)===null||b===void 0?void 0:b.width,Ot=(k=ot.height)!==null&&k!==void 0?k:(et=s.dimensions)===null||et===void 0?void 0:et.height;ut.width=lt!=null?lt:0,ut.height=Ot!=null?Ot:0,pt=publishUtils_1$1.computeVideoEncodings(s.source===Track_1$1.Track.Source.ScreenShare,lt,Ot,ct),ut.layers=LocalVideoTrack_1$1.videoLayersFromEncodings(ut.width,ut.height,pt)}else s.kind===Track_1$1.Track.Kind.Audio&&ct.audioBitrate&&(pt=[{maxBitrate:ct.audioBitrate}]);const St=yield this.engine.addTrack(ut),_t=new LocalTrackPublication_1.default(s.kind,St,s);if(s.sid=St.sid,!this.engine.publisher)throw new errors_1$2.UnexpectedConnectionState("publisher is closed");logger_1$2.default.debug(`publishing ${s.kind} with encodings`,pt,St);const ht={direction:"sendonly"};pt&&(ht.sendEncodings=pt);const _e=this.engine.publisher.pc.addTransceiver(s.mediaStreamTrack,ht);if(this.engine.negotiate(),s.sender=_e.sender,s instanceof LocalVideoTrack_1$1.default){const ot=(it=(nt=this.roomOptions)===null||nt===void 0?void 0:nt.expDisableLayerPause)!==null&&it!==void 0?it:!1;s.startMonitor(this.engine.client,ot)}else s instanceof LocalAudioTrack_1$1.default&&s.startMonitor();return ct.videoCodec&&this.setPreferredCodec(_e,s.kind,ct.videoCodec),this.addTrackPublication(_t),this.emit(events_1.ParticipantEvent.LocalTrackPublished,_t),_t})}unpublishTrack(s){var d,c;const m=this.getPublicationForTrack(s);if(logger_1$2.default.debug("unpublishTrack","unpublishing track",s),!m||!m.track)return logger_1$2.default.warn("unpublishTrack","track was not unpublished because no publication was found",s),null;s=m.track,s.off(events_1.TrackEvent.Muted,this.onTrackMuted),s.off(events_1.TrackEvent.Unmuted,this.onTrackUnmuted),s.off(events_1.TrackEvent.Ended,this.onTrackUnpublish),(!((c=(d=this.roomOptions)===null||d===void 0?void 0:d.stopLocalTrackOnUnpublish)!==null&&c!==void 0)||c)&&s.stop();const{mediaStreamTrack:g}=s;switch(this.engine.publisher&&this.engine.publisher.pc.getSenders().forEach(k=>{var et;if(k.track===g)try{(et=this.engine.publisher)===null||et===void 0||et.pc.removeTrack(k),this.engine.negotiate()}catch(nt){logger_1$2.default.warn("unpublishTrack","failed to remove track",nt)}}),this.tracks.delete(m.trackSid),m.kind){case Track_1$1.Track.Kind.Audio:this.audioTracks.delete(m.trackSid);break;case Track_1$1.Track.Kind.Video:this.videoTracks.delete(m.trackSid);break}return m.setTrack(void 0),this.emit(events_1.ParticipantEvent.LocalTrackUnpublished,m),m}unpublishTracks(s){const d=[];return s.forEach(c=>{const m=this.unpublishTrack(c);m&&d.push(m)}),d}get publisherMetrics(){return null}publishData(s,d,c){return __awaiter$3(this,void 0,void 0,function*(){const m=[];c!==void 0&&c.forEach(b=>{b instanceof RemoteParticipant_1.default?m.push(b.sid):m.push(b)});const g={kind:d,user:{participantSid:this.sid,payload:s,destinationSids:m}};yield this.engine.sendDataPacket(g,d)})}setTrackSubscriptionPermissions(s,d=[]){this.engine.client.sendUpdateSubscriptionPermissions(s,d.map(c=>ParticipantTrackPermission_1.trackPermissionToProto(c)))}getPublicationForTrack(s){let d;return this.tracks.forEach(c=>{const m=c.track;!m||(s instanceof MediaStreamTrack?(m instanceof LocalAudioTrack_1$1.default||m instanceof LocalVideoTrack_1$1.default)&&m.mediaStreamTrack===s&&(d=c):s===m&&(d=c))}),d}setPreferredCodec(s,d,c){if(!("getCapabilities"in RTCRtpSender))return;const m=RTCRtpSender.getCapabilities(d);if(!m)return;const g=m.codecs.find(b=>{const k=b.mimeType.toLowerCase(),et=k===`video/${c}`;return c==="h264"&&b.sdpFmtpLine?et&&b.sdpFmtpLine.includes("profile-level-id=42e01f"):et||k==="audio/opus"});g&&"setCodecPreferences"in s&&s.setCodecPreferences([g])}publishedTracksInfo(){const s=[];return this.tracks.forEach(d=>{d.track!==void 0&&s.push({cid:d.track.mediaStreamTrack.id,track:d.trackInfo})}),s}}LocalParticipant$1.default=LocalParticipant;var Room={},SignalClient$1={};let logDisabled_=!0,deprecationWarnings_=!0;function extractVersion(a,s,d){const c=a.match(s);return c&&c.length>=d&&parseInt(c[d],10)}function wrapPeerConnectionEvent(a,s,d){if(!a.RTCPeerConnection)return;const c=a.RTCPeerConnection.prototype,m=c.addEventListener;c.addEventListener=function(b,k){if(b!==s)return m.apply(this,arguments);const et=nt=>{const it=d(nt);it&&(k.handleEvent?k.handleEvent(it):k(it))};return this._eventMap=this._eventMap||{},this._eventMap[s]||(this._eventMap[s]=new Map),this._eventMap[s].set(k,et),m.apply(this,[b,et])};const g=c.removeEventListener;c.removeEventListener=function(b,k){if(b!==s||!this._eventMap||!this._eventMap[s])return g.apply(this,arguments);if(!this._eventMap[s].has(k))return g.apply(this,arguments);const et=this._eventMap[s].get(k);return this._eventMap[s].delete(k),this._eventMap[s].size===0&&delete this._eventMap[s],Object.keys(this._eventMap).length===0&&delete this._eventMap,g.apply(this,[b,et])},Object.defineProperty(c,"on"+s,{get(){return this["_on"+s]},set(b){this["_on"+s]&&(this.removeEventListener(s,this["_on"+s]),delete this["_on"+s]),b&&this.addEventListener(s,this["_on"+s]=b)},enumerable:!0,configurable:!0})}function disableLog(a){return typeof a!="boolean"?new Error("Argument type: "+typeof a+". Please use a boolean."):(logDisabled_=a,a?"adapter.js logging disabled":"adapter.js logging enabled")}function disableWarnings(a){return typeof a!="boolean"?new Error("Argument type: "+typeof a+". Please use a boolean."):(deprecationWarnings_=!a,"adapter.js deprecation warnings "+(a?"disabled":"enabled"))}function log(){if(typeof window=="object"){if(logDisabled_)return;typeof console!="undefined"&&typeof console.log=="function"&&console.log.apply(console,arguments)}}function deprecated(a,s){!deprecationWarnings_||console.warn(a+" is deprecated, please use "+s+" instead.")}function detectBrowser(a){const s={browser:null,version:null};if(typeof a=="undefined"||!a.navigator)return s.browser="Not a browser.",s;const{navigator:d}=a;if(d.mozGetUserMedia)s.browser="firefox",s.version=extractVersion(d.userAgent,/Firefox\/(\d+)\./,1);else if(d.webkitGetUserMedia||a.isSecureContext===!1&&a.webkitRTCPeerConnection&&!a.RTCIceGatherer)s.browser="chrome",s.version=extractVersion(d.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else if(a.RTCPeerConnection&&d.userAgent.match(/AppleWebKit\/(\d+)\./))s.browser="safari",s.version=extractVersion(d.userAgent,/AppleWebKit\/(\d+)\./,1),s.supportsUnifiedPlan=a.RTCRtpTransceiver&&"currentDirection"in a.RTCRtpTransceiver.prototype;else return s.browser="Not a supported browser.",s;return s}function isObject(a){return Object.prototype.toString.call(a)==="[object Object]"}function compactObject(a){return isObject(a)?Object.keys(a).reduce(function(s,d){const c=isObject(a[d]),m=c?compactObject(a[d]):a[d],g=c&&!Object.keys(m).length;return m===void 0||g?s:Object.assign(s,{[d]:m})},{}):a}function walkStats(a,s,d){!s||d.has(s.id)||(d.set(s.id,s),Object.keys(s).forEach(c=>{c.endsWith("Id")?walkStats(a,a.get(s[c]),d):c.endsWith("Ids")&&s[c].forEach(m=>{walkStats(a,a.get(m),d)})}))}function filterStats(a,s,d){const c=d?"outbound-rtp":"inbound-rtp",m=new Map;if(s===null)return m;const g=[];return a.forEach(b=>{b.type==="track"&&b.trackIdentifier===s.id&&g.push(b)}),g.forEach(b=>{a.forEach(k=>{k.type===c&&k.trackId===b.id&&walkStats(a,k,m)})}),m}const logging=log;function shimGetUserMedia$2(a,s){const d=a&&a.navigator;if(!d.mediaDevices)return;const c=function(k){if(typeof k!="object"||k.mandatory||k.optional)return k;const et={};return Object.keys(k).forEach(nt=>{if(nt==="require"||nt==="advanced"||nt==="mediaSource")return;const it=typeof k[nt]=="object"?k[nt]:{ideal:k[nt]};it.exact!==void 0&&typeof it.exact=="number"&&(it.min=it.max=it.exact);const ct=function(st,ut){return st?st+ut.charAt(0).toUpperCase()+ut.slice(1):ut==="deviceId"?"sourceId":ut};if(it.ideal!==void 0){et.optional=et.optional||[];let st={};typeof it.ideal=="number"?(st[ct("min",nt)]=it.ideal,et.optional.push(st),st={},st[ct("max",nt)]=it.ideal,et.optional.push(st)):(st[ct("",nt)]=it.ideal,et.optional.push(st))}it.exact!==void 0&&typeof it.exact!="number"?(et.mandatory=et.mandatory||{},et.mandatory[ct("",nt)]=it.exact):["min","max"].forEach(st=>{it[st]!==void 0&&(et.mandatory=et.mandatory||{},et.mandatory[ct(st,nt)]=it[st])})}),k.advanced&&(et.optional=(et.optional||[]).concat(k.advanced)),et},m=function(k,et){if(s.version>=61)return et(k);if(k=JSON.parse(JSON.stringify(k)),k&&typeof k.audio=="object"){const nt=function(it,ct,st){ct in it&&!(st in it)&&(it[st]=it[ct],delete it[ct])};k=JSON.parse(JSON.stringify(k)),nt(k.audio,"autoGainControl","googAutoGainControl"),nt(k.audio,"noiseSuppression","googNoiseSuppression"),k.audio=c(k.audio)}if(k&&typeof k.video=="object"){let nt=k.video.facingMode;nt=nt&&(typeof nt=="object"?nt:{ideal:nt});const it=s.version<66;if(nt&&(nt.exact==="user"||nt.exact==="environment"||nt.ideal==="user"||nt.ideal==="environment")&&!(d.mediaDevices.getSupportedConstraints&&d.mediaDevices.getSupportedConstraints().facingMode&&!it)){delete k.video.facingMode;let ct;if(nt.exact==="environment"||nt.ideal==="environment"?ct=["back","rear"]:(nt.exact==="user"||nt.ideal==="user")&&(ct=["front"]),ct)return d.mediaDevices.enumerateDevices().then(st=>{st=st.filter(pt=>pt.kind==="videoinput");let ut=st.find(pt=>ct.some(St=>pt.label.toLowerCase().includes(St)));return!ut&&st.length&&ct.includes("back")&&(ut=st[st.length-1]),ut&&(k.video.deviceId=nt.exact?{exact:ut.deviceId}:{ideal:ut.deviceId}),k.video=c(k.video),logging("chrome: "+JSON.stringify(k)),et(k)})}k.video=c(k.video)}return logging("chrome: "+JSON.stringify(k)),et(k)},g=function(k){return s.version>=64?k:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[k.name]||k.name,message:k.message,constraint:k.constraint||k.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}},b=function(k,et,nt){m(k,it=>{d.webkitGetUserMedia(it,et,ct=>{nt&&nt(g(ct))})})};if(d.getUserMedia=b.bind(d),d.mediaDevices.getUserMedia){const k=d.mediaDevices.getUserMedia.bind(d.mediaDevices);d.mediaDevices.getUserMedia=function(et){return m(et,nt=>k(nt).then(it=>{if(nt.audio&&!it.getAudioTracks().length||nt.video&&!it.getVideoTracks().length)throw it.getTracks().forEach(ct=>{ct.stop()}),new DOMException("","NotFoundError");return it},it=>Promise.reject(g(it))))}}}function shimGetDisplayMedia$1(a,s){if(!(a.navigator.mediaDevices&&"getDisplayMedia"in a.navigator.mediaDevices)&&!!a.navigator.mediaDevices){if(typeof s!="function"){console.error("shimGetDisplayMedia: getSourceId argument is not a function");return}a.navigator.mediaDevices.getDisplayMedia=function(c){return s(c).then(m=>{const g=c.video&&c.video.width,b=c.video&&c.video.height,k=c.video&&c.video.frameRate;return c.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:m,maxFrameRate:k||3}},g&&(c.video.mandatory.maxWidth=g),b&&(c.video.mandatory.maxHeight=b),a.navigator.mediaDevices.getUserMedia(c)})}}}function shimMediaStream(a){a.MediaStream=a.MediaStream||a.webkitMediaStream}function shimOnTrack$1(a){if(typeof a=="object"&&a.RTCPeerConnection&&!("ontrack"in a.RTCPeerConnection.prototype)){Object.defineProperty(a.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(d){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=d)},enumerable:!0,configurable:!0});const s=a.RTCPeerConnection.prototype.setRemoteDescription;a.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=c=>{c.stream.addEventListener("addtrack",m=>{let g;a.RTCPeerConnection.prototype.getReceivers?g=this.getReceivers().find(k=>k.track&&k.track.id===m.track.id):g={track:m.track};const b=new Event("track");b.track=m.track,b.receiver=g,b.transceiver={receiver:g},b.streams=[c.stream],this.dispatchEvent(b)}),c.stream.getTracks().forEach(m=>{let g;a.RTCPeerConnection.prototype.getReceivers?g=this.getReceivers().find(k=>k.track&&k.track.id===m.id):g={track:m};const b=new Event("track");b.track=m,b.receiver=g,b.transceiver={receiver:g},b.streams=[c.stream],this.dispatchEvent(b)})},this.addEventListener("addstream",this._ontrackpoly)),s.apply(this,arguments)}}else wrapPeerConnectionEvent(a,"track",s=>(s.transceiver||Object.defineProperty(s,"transceiver",{value:{receiver:s.receiver}}),s))}function shimGetSendersWithDtmf(a){if(typeof a=="object"&&a.RTCPeerConnection&&!("getSenders"in a.RTCPeerConnection.prototype)&&"createDTMFSender"in a.RTCPeerConnection.prototype){const s=function(m,g){return{track:g,get dtmf(){return this._dtmf===void 0&&(g.kind==="audio"?this._dtmf=m.createDTMFSender(g):this._dtmf=null),this._dtmf},_pc:m}};if(!a.RTCPeerConnection.prototype.getSenders){a.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const m=a.RTCPeerConnection.prototype.addTrack;a.RTCPeerConnection.prototype.addTrack=function(k,et){let nt=m.apply(this,arguments);return nt||(nt=s(this,k),this._senders.push(nt)),nt};const g=a.RTCPeerConnection.prototype.removeTrack;a.RTCPeerConnection.prototype.removeTrack=function(k){g.apply(this,arguments);const et=this._senders.indexOf(k);et!==-1&&this._senders.splice(et,1)}}const d=a.RTCPeerConnection.prototype.addStream;a.RTCPeerConnection.prototype.addStream=function(g){this._senders=this._senders||[],d.apply(this,[g]),g.getTracks().forEach(b=>{this._senders.push(s(this,b))})};const c=a.RTCPeerConnection.prototype.removeStream;a.RTCPeerConnection.prototype.removeStream=function(g){this._senders=this._senders||[],c.apply(this,[g]),g.getTracks().forEach(b=>{const k=this._senders.find(et=>et.track===b);k&&this._senders.splice(this._senders.indexOf(k),1)})}}else if(typeof a=="object"&&a.RTCPeerConnection&&"getSenders"in a.RTCPeerConnection.prototype&&"createDTMFSender"in a.RTCPeerConnection.prototype&&a.RTCRtpSender&&!("dtmf"in a.RTCRtpSender.prototype)){const s=a.RTCPeerConnection.prototype.getSenders;a.RTCPeerConnection.prototype.getSenders=function(){const c=s.apply(this,[]);return c.forEach(m=>m._pc=this),c},Object.defineProperty(a.RTCRtpSender.prototype,"dtmf",{get(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function shimGetStats(a){if(!a.RTCPeerConnection)return;const s=a.RTCPeerConnection.prototype.getStats;a.RTCPeerConnection.prototype.getStats=function(){const[c,m,g]=arguments;if(arguments.length>0&&typeof c=="function")return s.apply(this,arguments);if(s.length===0&&(arguments.length===0||typeof c!="function"))return s.apply(this,[]);const b=function(et){const nt={};return et.result().forEach(ct=>{const st={id:ct.id,timestamp:ct.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[ct.type]||ct.type};ct.names().forEach(ut=>{st[ut]=ct.stat(ut)}),nt[st.id]=st}),nt},k=function(et){return new Map(Object.keys(et).map(nt=>[nt,et[nt]]))};if(arguments.length>=2){const et=function(nt){m(k(b(nt)))};return s.apply(this,[et,c])}return new Promise((et,nt)=>{s.apply(this,[function(it){et(k(b(it)))},nt])}).then(m,g)}}function shimSenderReceiverGetStats(a){if(!(typeof a=="object"&&a.RTCPeerConnection&&a.RTCRtpSender&&a.RTCRtpReceiver))return;if(!("getStats"in a.RTCRtpSender.prototype)){const d=a.RTCPeerConnection.prototype.getSenders;d&&(a.RTCPeerConnection.prototype.getSenders=function(){const g=d.apply(this,[]);return g.forEach(b=>b._pc=this),g});const c=a.RTCPeerConnection.prototype.addTrack;c&&(a.RTCPeerConnection.prototype.addTrack=function(){const g=c.apply(this,arguments);return g._pc=this,g}),a.RTCRtpSender.prototype.getStats=function(){const g=this;return this._pc.getStats().then(b=>filterStats(b,g.track,!0))}}if(!("getStats"in a.RTCRtpReceiver.prototype)){const d=a.RTCPeerConnection.prototype.getReceivers;d&&(a.RTCPeerConnection.prototype.getReceivers=function(){const m=d.apply(this,[]);return m.forEach(g=>g._pc=this),m}),wrapPeerConnectionEvent(a,"track",c=>(c.receiver._pc=c.srcElement,c)),a.RTCRtpReceiver.prototype.getStats=function(){const m=this;return this._pc.getStats().then(g=>filterStats(g,m.track,!1))}}if(!("getStats"in a.RTCRtpSender.prototype&&"getStats"in a.RTCRtpReceiver.prototype))return;const s=a.RTCPeerConnection.prototype.getStats;a.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof a.MediaStreamTrack){const c=arguments[0];let m,g,b;return this.getSenders().forEach(k=>{k.track===c&&(m?b=!0:m=k)}),this.getReceivers().forEach(k=>(k.track===c&&(g?b=!0:g=k),k.track===c)),b||m&&g?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):m?m.getStats():g?g.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return s.apply(this,arguments)}}function shimAddTrackRemoveTrackWithNative(a){a.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(b=>this._shimmedLocalStreams[b][0])};const s=a.RTCPeerConnection.prototype.addTrack;a.RTCPeerConnection.prototype.addTrack=function(b,k){if(!k)return s.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const et=s.apply(this,arguments);return this._shimmedLocalStreams[k.id]?this._shimmedLocalStreams[k.id].indexOf(et)===-1&&this._shimmedLocalStreams[k.id].push(et):this._shimmedLocalStreams[k.id]=[k,et],et};const d=a.RTCPeerConnection.prototype.addStream;a.RTCPeerConnection.prototype.addStream=function(b){this._shimmedLocalStreams=this._shimmedLocalStreams||{},b.getTracks().forEach(nt=>{if(this.getSenders().find(ct=>ct.track===nt))throw new DOMException("Track already exists.","InvalidAccessError")});const k=this.getSenders();d.apply(this,arguments);const et=this.getSenders().filter(nt=>k.indexOf(nt)===-1);this._shimmedLocalStreams[b.id]=[b].concat(et)};const c=a.RTCPeerConnection.prototype.removeStream;a.RTCPeerConnection.prototype.removeStream=function(b){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[b.id],c.apply(this,arguments)};const m=a.RTCPeerConnection.prototype.removeTrack;a.RTCPeerConnection.prototype.removeTrack=function(b){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},b&&Object.keys(this._shimmedLocalStreams).forEach(k=>{const et=this._shimmedLocalStreams[k].indexOf(b);et!==-1&&this._shimmedLocalStreams[k].splice(et,1),this._shimmedLocalStreams[k].length===1&&delete this._shimmedLocalStreams[k]}),m.apply(this,arguments)}}function shimAddTrackRemoveTrack(a,s){if(!a.RTCPeerConnection)return;if(a.RTCPeerConnection.prototype.addTrack&&s.version>=65)return shimAddTrackRemoveTrackWithNative(a);const d=a.RTCPeerConnection.prototype.getLocalStreams;a.RTCPeerConnection.prototype.getLocalStreams=function(){const it=d.apply(this);return this._reverseStreams=this._reverseStreams||{},it.map(ct=>this._reverseStreams[ct.id])};const c=a.RTCPeerConnection.prototype.addStream;a.RTCPeerConnection.prototype.addStream=function(it){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},it.getTracks().forEach(ct=>{if(this.getSenders().find(ut=>ut.track===ct))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[it.id]){const ct=new a.MediaStream(it.getTracks());this._streams[it.id]=ct,this._reverseStreams[ct.id]=it,it=ct}c.apply(this,[it])};const m=a.RTCPeerConnection.prototype.removeStream;a.RTCPeerConnection.prototype.removeStream=function(it){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},m.apply(this,[this._streams[it.id]||it]),delete this._reverseStreams[this._streams[it.id]?this._streams[it.id].id:it.id],delete this._streams[it.id]},a.RTCPeerConnection.prototype.addTrack=function(it,ct){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const st=[].slice.call(arguments,1);if(st.length!==1||!st[0].getTracks().find(St=>St===it))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(St=>St.track===it))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const pt=this._streams[ct.id];if(pt)pt.addTrack(it),Promise.resolve().then(()=>{this.dispatchEvent(new Event("negotiationneeded"))});else{const St=new a.MediaStream([it]);this._streams[ct.id]=St,this._reverseStreams[St.id]=ct,this.addStream(St)}return this.getSenders().find(St=>St.track===it)};function g(nt,it){let ct=it.sdp;return Object.keys(nt._reverseStreams||[]).forEach(st=>{const ut=nt._reverseStreams[st],pt=nt._streams[ut.id];ct=ct.replace(new RegExp(pt.id,"g"),ut.id)}),new RTCSessionDescription({type:it.type,sdp:ct})}function b(nt,it){let ct=it.sdp;return Object.keys(nt._reverseStreams||[]).forEach(st=>{const ut=nt._reverseStreams[st],pt=nt._streams[ut.id];ct=ct.replace(new RegExp(ut.id,"g"),pt.id)}),new RTCSessionDescription({type:it.type,sdp:ct})}["createOffer","createAnswer"].forEach(function(nt){const it=a.RTCPeerConnection.prototype[nt],ct={[nt](){const st=arguments;return arguments.length&&typeof arguments[0]=="function"?it.apply(this,[pt=>{const St=g(this,pt);st[0].apply(null,[St])},pt=>{st[1]&&st[1].apply(null,pt)},arguments[2]]):it.apply(this,arguments).then(pt=>g(this,pt))}};a.RTCPeerConnection.prototype[nt]=ct[nt]});const k=a.RTCPeerConnection.prototype.setLocalDescription;a.RTCPeerConnection.prototype.setLocalDescription=function(){return!arguments.length||!arguments[0].type?k.apply(this,arguments):(arguments[0]=b(this,arguments[0]),k.apply(this,arguments))};const et=Object.getOwnPropertyDescriptor(a.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(a.RTCPeerConnection.prototype,"localDescription",{get(){const nt=et.get.apply(this);return nt.type===""?nt:g(this,nt)}}),a.RTCPeerConnection.prototype.removeTrack=function(it){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!it._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(!(it._pc===this))throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{};let st;Object.keys(this._streams).forEach(ut=>{this._streams[ut].getTracks().find(St=>it.track===St)&&(st=this._streams[ut])}),st&&(st.getTracks().length===1?this.removeStream(this._reverseStreams[st.id]):st.removeTrack(it.track),this.dispatchEvent(new Event("negotiationneeded")))}}function shimPeerConnection$1(a,s){!a.RTCPeerConnection&&a.webkitRTCPeerConnection&&(a.RTCPeerConnection=a.webkitRTCPeerConnection),!!a.RTCPeerConnection&&s.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(d){const c=a.RTCPeerConnection.prototype[d],m={[d](){return arguments[0]=new(d==="addIceCandidate"?a.RTCIceCandidate:a.RTCSessionDescription)(arguments[0]),c.apply(this,arguments)}};a.RTCPeerConnection.prototype[d]=m[d]})}function fixNegotiationNeeded(a,s){wrapPeerConnectionEvent(a,"negotiationneeded",d=>{const c=d.target;if(!((s.version<72||c.getConfiguration&&c.getConfiguration().sdpSemantics==="plan-b")&&c.signalingState!=="stable"))return d})}var chromeShim=Object.freeze(Object.defineProperty({__proto__:null,shimMediaStream,shimOnTrack:shimOnTrack$1,shimGetSendersWithDtmf,shimGetStats,shimSenderReceiverGetStats,shimAddTrackRemoveTrackWithNative,shimAddTrackRemoveTrack,shimPeerConnection:shimPeerConnection$1,fixNegotiationNeeded,shimGetUserMedia:shimGetUserMedia$2,shimGetDisplayMedia:shimGetDisplayMedia$1},Symbol.toStringTag,{value:"Module"}));function shimGetUserMedia$1(a,s){const d=a&&a.navigator,c=a&&a.MediaStreamTrack;if(d.getUserMedia=function(m,g,b){deprecated("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),d.mediaDevices.getUserMedia(m).then(g,b)},!(s.version>55&&"autoGainControl"in d.mediaDevices.getSupportedConstraints())){const m=function(b,k,et){k in b&&!(et in b)&&(b[et]=b[k],delete b[k])},g=d.mediaDevices.getUserMedia.bind(d.mediaDevices);if(d.mediaDevices.getUserMedia=function(b){return typeof b=="object"&&typeof b.audio=="object"&&(b=JSON.parse(JSON.stringify(b)),m(b.audio,"autoGainControl","mozAutoGainControl"),m(b.audio,"noiseSuppression","mozNoiseSuppression")),g(b)},c&&c.prototype.getSettings){const b=c.prototype.getSettings;c.prototype.getSettings=function(){const k=b.apply(this,arguments);return m(k,"mozAutoGainControl","autoGainControl"),m(k,"mozNoiseSuppression","noiseSuppression"),k}}if(c&&c.prototype.applyConstraints){const b=c.prototype.applyConstraints;c.prototype.applyConstraints=function(k){return this.kind==="audio"&&typeof k=="object"&&(k=JSON.parse(JSON.stringify(k)),m(k,"autoGainControl","mozAutoGainControl"),m(k,"noiseSuppression","mozNoiseSuppression")),b.apply(this,[k])}}}}function shimGetDisplayMedia(a,s){a.navigator.mediaDevices&&"getDisplayMedia"in a.navigator.mediaDevices||!a.navigator.mediaDevices||(a.navigator.mediaDevices.getDisplayMedia=function(c){if(!(c&&c.video)){const m=new DOMException("getDisplayMedia without video constraints is undefined");return m.name="NotFoundError",m.code=8,Promise.reject(m)}return c.video===!0?c.video={mediaSource:s}:c.video.mediaSource=s,a.navigator.mediaDevices.getUserMedia(c)})}function shimOnTrack(a){typeof a=="object"&&a.RTCTrackEvent&&"receiver"in a.RTCTrackEvent.prototype&&!("transceiver"in a.RTCTrackEvent.prototype)&&Object.defineProperty(a.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function shimPeerConnection(a,s){if(typeof a!="object"||!(a.RTCPeerConnection||a.mozRTCPeerConnection))return;!a.RTCPeerConnection&&a.mozRTCPeerConnection&&(a.RTCPeerConnection=a.mozRTCPeerConnection),s.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(m){const g=a.RTCPeerConnection.prototype[m],b={[m](){return arguments[0]=new(m==="addIceCandidate"?a.RTCIceCandidate:a.RTCSessionDescription)(arguments[0]),g.apply(this,arguments)}};a.RTCPeerConnection.prototype[m]=b[m]});const d={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},c=a.RTCPeerConnection.prototype.getStats;a.RTCPeerConnection.prototype.getStats=function(){const[g,b,k]=arguments;return c.apply(this,[g||null]).then(et=>{if(s.version<53&&!b)try{et.forEach(nt=>{nt.type=d[nt.type]||nt.type})}catch(nt){if(nt.name!=="TypeError")throw nt;et.forEach((it,ct)=>{et.set(ct,Object.assign({},it,{type:d[it.type]||it.type}))})}return et}).then(b,k)}}function shimSenderGetStats(a){if(!(typeof a=="object"&&a.RTCPeerConnection&&a.RTCRtpSender)||a.RTCRtpSender&&"getStats"in a.RTCRtpSender.prototype)return;const s=a.RTCPeerConnection.prototype.getSenders;s&&(a.RTCPeerConnection.prototype.getSenders=function(){const m=s.apply(this,[]);return m.forEach(g=>g._pc=this),m});const d=a.RTCPeerConnection.prototype.addTrack;d&&(a.RTCPeerConnection.prototype.addTrack=function(){const m=d.apply(this,arguments);return m._pc=this,m}),a.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function shimReceiverGetStats(a){if(!(typeof a=="object"&&a.RTCPeerConnection&&a.RTCRtpSender)||a.RTCRtpSender&&"getStats"in a.RTCRtpReceiver.prototype)return;const s=a.RTCPeerConnection.prototype.getReceivers;s&&(a.RTCPeerConnection.prototype.getReceivers=function(){const c=s.apply(this,[]);return c.forEach(m=>m._pc=this),c}),wrapPeerConnectionEvent(a,"track",d=>(d.receiver._pc=d.srcElement,d)),a.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function shimRemoveStream(a){!a.RTCPeerConnection||"removeStream"in a.RTCPeerConnection.prototype||(a.RTCPeerConnection.prototype.removeStream=function(d){deprecated("removeStream","removeTrack"),this.getSenders().forEach(c=>{c.track&&d.getTracks().includes(c.track)&&this.removeTrack(c)})})}function shimRTCDataChannel(a){a.DataChannel&&!a.RTCDataChannel&&(a.RTCDataChannel=a.DataChannel)}function shimAddTransceiver(a){if(!(typeof a=="object"&&a.RTCPeerConnection))return;const s=a.RTCPeerConnection.prototype.addTransceiver;s&&(a.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];const c=arguments[1],m=c&&"sendEncodings"in c;m&&c.sendEncodings.forEach(b=>{if("rid"in b&&!/^[a-z0-9]{0,16}$/i.test(b.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in b&&!(parseFloat(b.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in b&&!(parseFloat(b.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});const g=s.apply(this,arguments);if(m){const{sender:b}=g,k=b.getParameters();(!("encodings"in k)||k.encodings.length===1&&Object.keys(k.encodings[0]).length===0)&&(k.encodings=c.sendEncodings,b.sendEncodings=c.sendEncodings,this.setParametersPromises.push(b.setParameters(k).then(()=>{delete b.sendEncodings}).catch(()=>{delete b.sendEncodings})))}return g})}function shimGetParameters(a){if(!(typeof a=="object"&&a.RTCRtpSender))return;const s=a.RTCRtpSender.prototype.getParameters;s&&(a.RTCRtpSender.prototype.getParameters=function(){const c=s.apply(this,arguments);return"encodings"in c||(c.encodings=[].concat(this.sendEncodings||[{}])),c})}function shimCreateOffer(a){if(!(typeof a=="object"&&a.RTCPeerConnection))return;const s=a.RTCPeerConnection.prototype.createOffer;a.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>s.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):s.apply(this,arguments)}}function shimCreateAnswer(a){if(!(typeof a=="object"&&a.RTCPeerConnection))return;const s=a.RTCPeerConnection.prototype.createAnswer;a.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>s.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):s.apply(this,arguments)}}var firefoxShim=Object.freeze(Object.defineProperty({__proto__:null,shimOnTrack,shimPeerConnection,shimSenderGetStats,shimReceiverGetStats,shimRemoveStream,shimRTCDataChannel,shimAddTransceiver,shimGetParameters,shimCreateOffer,shimCreateAnswer,shimGetUserMedia:shimGetUserMedia$1,shimGetDisplayMedia},Symbol.toStringTag,{value:"Module"}));function shimLocalStreamsAPI(a){if(!(typeof a!="object"||!a.RTCPeerConnection)){if("getLocalStreams"in a.RTCPeerConnection.prototype||(a.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in a.RTCPeerConnection.prototype)){const s=a.RTCPeerConnection.prototype.addTrack;a.RTCPeerConnection.prototype.addStream=function(c){this._localStreams||(this._localStreams=[]),this._localStreams.includes(c)||this._localStreams.push(c),c.getAudioTracks().forEach(m=>s.call(this,m,c)),c.getVideoTracks().forEach(m=>s.call(this,m,c))},a.RTCPeerConnection.prototype.addTrack=function(c,...m){return m&&m.forEach(g=>{this._localStreams?this._localStreams.includes(g)||this._localStreams.push(g):this._localStreams=[g]}),s.apply(this,arguments)}}"removeStream"in a.RTCPeerConnection.prototype||(a.RTCPeerConnection.prototype.removeStream=function(d){this._localStreams||(this._localStreams=[]);const c=this._localStreams.indexOf(d);if(c===-1)return;this._localStreams.splice(c,1);const m=d.getTracks();this.getSenders().forEach(g=>{m.includes(g.track)&&this.removeTrack(g)})})}}function shimRemoteStreamsAPI(a){if(!(typeof a!="object"||!a.RTCPeerConnection)&&("getRemoteStreams"in a.RTCPeerConnection.prototype||(a.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in a.RTCPeerConnection.prototype))){Object.defineProperty(a.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(d){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=d),this.addEventListener("track",this._onaddstreampoly=c=>{c.streams.forEach(m=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(m))return;this._remoteStreams.push(m);const g=new Event("addstream");g.stream=m,this.dispatchEvent(g)})})}});const s=a.RTCPeerConnection.prototype.setRemoteDescription;a.RTCPeerConnection.prototype.setRemoteDescription=function(){const c=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(m){m.streams.forEach(g=>{if(c._remoteStreams||(c._remoteStreams=[]),c._remoteStreams.indexOf(g)>=0)return;c._remoteStreams.push(g);const b=new Event("addstream");b.stream=g,c.dispatchEvent(b)})}),s.apply(c,arguments)}}}function shimCallbacksAPI(a){if(typeof a!="object"||!a.RTCPeerConnection)return;const s=a.RTCPeerConnection.prototype,d=s.createOffer,c=s.createAnswer,m=s.setLocalDescription,g=s.setRemoteDescription,b=s.addIceCandidate;s.createOffer=function(nt,it){const ct=arguments.length>=2?arguments[2]:arguments[0],st=d.apply(this,[ct]);return it?(st.then(nt,it),Promise.resolve()):st},s.createAnswer=function(nt,it){const ct=arguments.length>=2?arguments[2]:arguments[0],st=c.apply(this,[ct]);return it?(st.then(nt,it),Promise.resolve()):st};let k=function(et,nt,it){const ct=m.apply(this,[et]);return it?(ct.then(nt,it),Promise.resolve()):ct};s.setLocalDescription=k,k=function(et,nt,it){const ct=g.apply(this,[et]);return it?(ct.then(nt,it),Promise.resolve()):ct},s.setRemoteDescription=k,k=function(et,nt,it){const ct=b.apply(this,[et]);return it?(ct.then(nt,it),Promise.resolve()):ct},s.addIceCandidate=k}function shimGetUserMedia(a){const s=a&&a.navigator;if(s.mediaDevices&&s.mediaDevices.getUserMedia){const d=s.mediaDevices,c=d.getUserMedia.bind(d);s.mediaDevices.getUserMedia=m=>c(shimConstraints(m))}!s.getUserMedia&&s.mediaDevices&&s.mediaDevices.getUserMedia&&(s.getUserMedia=function(c,m,g){s.mediaDevices.getUserMedia(c).then(m,g)}.bind(s))}function shimConstraints(a){return a&&a.video!==void 0?Object.assign({},a,{video:compactObject(a.video)}):a}function shimRTCIceServerUrls(a){if(!a.RTCPeerConnection)return;const s=a.RTCPeerConnection;a.RTCPeerConnection=function(c,m){if(c&&c.iceServers){const g=[];for(let b=0;b<c.iceServers.length;b++){let k=c.iceServers[b];!k.hasOwnProperty("urls")&&k.hasOwnProperty("url")?(deprecated("RTCIceServer.url","RTCIceServer.urls"),k=JSON.parse(JSON.stringify(k)),k.urls=k.url,delete k.url,g.push(k)):g.push(c.iceServers[b])}c.iceServers=g}return new s(c,m)},a.RTCPeerConnection.prototype=s.prototype,"generateCertificate"in s&&Object.defineProperty(a.RTCPeerConnection,"generateCertificate",{get(){return s.generateCertificate}})}function shimTrackEventTransceiver(a){typeof a=="object"&&a.RTCTrackEvent&&"receiver"in a.RTCTrackEvent.prototype&&!("transceiver"in a.RTCTrackEvent.prototype)&&Object.defineProperty(a.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function shimCreateOfferLegacy(a){const s=a.RTCPeerConnection.prototype.createOffer;a.RTCPeerConnection.prototype.createOffer=function(c){if(c){typeof c.offerToReceiveAudio!="undefined"&&(c.offerToReceiveAudio=!!c.offerToReceiveAudio);const m=this.getTransceivers().find(b=>b.receiver.track.kind==="audio");c.offerToReceiveAudio===!1&&m?m.direction==="sendrecv"?m.setDirection?m.setDirection("sendonly"):m.direction="sendonly":m.direction==="recvonly"&&(m.setDirection?m.setDirection("inactive"):m.direction="inactive"):c.offerToReceiveAudio===!0&&!m&&this.addTransceiver("audio",{direction:"recvonly"}),typeof c.offerToReceiveVideo!="undefined"&&(c.offerToReceiveVideo=!!c.offerToReceiveVideo);const g=this.getTransceivers().find(b=>b.receiver.track.kind==="video");c.offerToReceiveVideo===!1&&g?g.direction==="sendrecv"?g.setDirection?g.setDirection("sendonly"):g.direction="sendonly":g.direction==="recvonly"&&(g.setDirection?g.setDirection("inactive"):g.direction="inactive"):c.offerToReceiveVideo===!0&&!g&&this.addTransceiver("video",{direction:"recvonly"})}return s.apply(this,arguments)}}function shimAudioContext(a){typeof a!="object"||a.AudioContext||(a.AudioContext=a.webkitAudioContext)}var safariShim=Object.freeze(Object.defineProperty({__proto__:null,shimLocalStreamsAPI,shimRemoteStreamsAPI,shimCallbacksAPI,shimGetUserMedia,shimConstraints,shimRTCIceServerUrls,shimTrackEventTransceiver,shimCreateOfferLegacy,shimAudioContext},Symbol.toStringTag,{value:"Module"})),sdp$1={exports:{}};(function(a){const s={};s.generateIdentifier=function(){return Math.random().toString(36).substr(2,10)},s.localCName=s.generateIdentifier(),s.splitLines=function(d){return d.trim().split(`
`).map(c=>c.trim())},s.splitSections=function(d){return d.split(`
m=`).map((m,g)=>(g>0?"m="+m:m).trim()+`\r
`)},s.getDescription=function(d){const c=s.splitSections(d);return c&&c[0]},s.getMediaSections=function(d){const c=s.splitSections(d);return c.shift(),c},s.matchPrefix=function(d,c){return s.splitLines(d).filter(m=>m.indexOf(c)===0)},s.parseCandidate=function(d){let c;d.indexOf("a=candidate:")===0?c=d.substring(12).split(" "):c=d.substring(10).split(" ");const m={foundation:c[0],component:{1:"rtp",2:"rtcp"}[c[1]]||c[1],protocol:c[2].toLowerCase(),priority:parseInt(c[3],10),ip:c[4],address:c[4],port:parseInt(c[5],10),type:c[7]};for(let g=8;g<c.length;g+=2)switch(c[g]){case"raddr":m.relatedAddress=c[g+1];break;case"rport":m.relatedPort=parseInt(c[g+1],10);break;case"tcptype":m.tcpType=c[g+1];break;case"ufrag":m.ufrag=c[g+1],m.usernameFragment=c[g+1];break;default:m[c[g]]===void 0&&(m[c[g]]=c[g+1]);break}return m},s.writeCandidate=function(d){const c=[];c.push(d.foundation);const m=d.component;m==="rtp"?c.push(1):m==="rtcp"?c.push(2):c.push(m),c.push(d.protocol.toUpperCase()),c.push(d.priority),c.push(d.address||d.ip),c.push(d.port);const g=d.type;return c.push("typ"),c.push(g),g!=="host"&&d.relatedAddress&&d.relatedPort&&(c.push("raddr"),c.push(d.relatedAddress),c.push("rport"),c.push(d.relatedPort)),d.tcpType&&d.protocol.toLowerCase()==="tcp"&&(c.push("tcptype"),c.push(d.tcpType)),(d.usernameFragment||d.ufrag)&&(c.push("ufrag"),c.push(d.usernameFragment||d.ufrag)),"candidate:"+c.join(" ")},s.parseIceOptions=function(d){return d.substr(14).split(" ")},s.parseRtpMap=function(d){let c=d.substr(9).split(" ");const m={payloadType:parseInt(c.shift(),10)};return c=c[0].split("/"),m.name=c[0],m.clockRate=parseInt(c[1],10),m.channels=c.length===3?parseInt(c[2],10):1,m.numChannels=m.channels,m},s.writeRtpMap=function(d){let c=d.payloadType;d.preferredPayloadType!==void 0&&(c=d.preferredPayloadType);const m=d.channels||d.numChannels||1;return"a=rtpmap:"+c+" "+d.name+"/"+d.clockRate+(m!==1?"/"+m:"")+`\r
`},s.parseExtmap=function(d){const c=d.substr(9).split(" ");return{id:parseInt(c[0],10),direction:c[0].indexOf("/")>0?c[0].split("/")[1]:"sendrecv",uri:c[1]}},s.writeExtmap=function(d){return"a=extmap:"+(d.id||d.preferredId)+(d.direction&&d.direction!=="sendrecv"?"/"+d.direction:"")+" "+d.uri+`\r
`},s.parseFmtp=function(d){const c={};let m;const g=d.substr(d.indexOf(" ")+1).split(";");for(let b=0;b<g.length;b++)m=g[b].trim().split("="),c[m[0].trim()]=m[1];return c},s.writeFmtp=function(d){let c="",m=d.payloadType;if(d.preferredPayloadType!==void 0&&(m=d.preferredPayloadType),d.parameters&&Object.keys(d.parameters).length){const g=[];Object.keys(d.parameters).forEach(b=>{d.parameters[b]!==void 0?g.push(b+"="+d.parameters[b]):g.push(b)}),c+="a=fmtp:"+m+" "+g.join(";")+`\r
`}return c},s.parseRtcpFb=function(d){const c=d.substr(d.indexOf(" ")+1).split(" ");return{type:c.shift(),parameter:c.join(" ")}},s.writeRtcpFb=function(d){let c="",m=d.payloadType;return d.preferredPayloadType!==void 0&&(m=d.preferredPayloadType),d.rtcpFeedback&&d.rtcpFeedback.length&&d.rtcpFeedback.forEach(g=>{c+="a=rtcp-fb:"+m+" "+g.type+(g.parameter&&g.parameter.length?" "+g.parameter:"")+`\r
`}),c},s.parseSsrcMedia=function(d){const c=d.indexOf(" "),m={ssrc:parseInt(d.substr(7,c-7),10)},g=d.indexOf(":",c);return g>-1?(m.attribute=d.substr(c+1,g-c-1),m.value=d.substr(g+1)):m.attribute=d.substr(c+1),m},s.parseSsrcGroup=function(d){const c=d.substr(13).split(" ");return{semantics:c.shift(),ssrcs:c.map(m=>parseInt(m,10))}},s.getMid=function(d){const c=s.matchPrefix(d,"a=mid:")[0];if(c)return c.substr(6)},s.parseFingerprint=function(d){const c=d.substr(14).split(" ");return{algorithm:c[0].toLowerCase(),value:c[1].toUpperCase()}},s.getDtlsParameters=function(d,c){const m=s.matchPrefix(d+c,"a=fingerprint:");return{role:"auto",fingerprints:m.map(s.parseFingerprint)}},s.writeDtlsParameters=function(d,c){let m="a=setup:"+c+`\r
`;return d.fingerprints.forEach(g=>{m+="a=fingerprint:"+g.algorithm+" "+g.value+`\r
`}),m},s.parseCryptoLine=function(d){const c=d.substr(9).split(" ");return{tag:parseInt(c[0],10),cryptoSuite:c[1],keyParams:c[2],sessionParams:c.slice(3)}},s.writeCryptoLine=function(d){return"a=crypto:"+d.tag+" "+d.cryptoSuite+" "+(typeof d.keyParams=="object"?s.writeCryptoKeyParams(d.keyParams):d.keyParams)+(d.sessionParams?" "+d.sessionParams.join(" "):"")+`\r
`},s.parseCryptoKeyParams=function(d){if(d.indexOf("inline:")!==0)return null;const c=d.substr(7).split("|");return{keyMethod:"inline",keySalt:c[0],lifeTime:c[1],mkiValue:c[2]?c[2].split(":")[0]:void 0,mkiLength:c[2]?c[2].split(":")[1]:void 0}},s.writeCryptoKeyParams=function(d){return d.keyMethod+":"+d.keySalt+(d.lifeTime?"|"+d.lifeTime:"")+(d.mkiValue&&d.mkiLength?"|"+d.mkiValue+":"+d.mkiLength:"")},s.getCryptoParameters=function(d,c){return s.matchPrefix(d+c,"a=crypto:").map(s.parseCryptoLine)},s.getIceParameters=function(d,c){const m=s.matchPrefix(d+c,"a=ice-ufrag:")[0],g=s.matchPrefix(d+c,"a=ice-pwd:")[0];return m&&g?{usernameFragment:m.substr(12),password:g.substr(10)}:null},s.writeIceParameters=function(d){let c="a=ice-ufrag:"+d.usernameFragment+`\r
a=ice-pwd:`+d.password+`\r
`;return d.iceLite&&(c+=`a=ice-lite\r
`),c},s.parseRtpParameters=function(d){const c={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},g=s.splitLines(d)[0].split(" ");for(let b=3;b<g.length;b++){const k=g[b],et=s.matchPrefix(d,"a=rtpmap:"+k+" ")[0];if(et){const nt=s.parseRtpMap(et),it=s.matchPrefix(d,"a=fmtp:"+k+" ");switch(nt.parameters=it.length?s.parseFmtp(it[0]):{},nt.rtcpFeedback=s.matchPrefix(d,"a=rtcp-fb:"+k+" ").map(s.parseRtcpFb),c.codecs.push(nt),nt.name.toUpperCase()){case"RED":case"ULPFEC":c.fecMechanisms.push(nt.name.toUpperCase());break}}}return s.matchPrefix(d,"a=extmap:").forEach(b=>{c.headerExtensions.push(s.parseExtmap(b))}),c},s.writeRtpDescription=function(d,c){let m="";m+="m="+d+" ",m+=c.codecs.length>0?"9":"0",m+=" UDP/TLS/RTP/SAVPF ",m+=c.codecs.map(b=>b.preferredPayloadType!==void 0?b.preferredPayloadType:b.payloadType).join(" ")+`\r
`,m+=`c=IN IP4 0.0.0.0\r
`,m+=`a=rtcp:9 IN IP4 0.0.0.0\r
`,c.codecs.forEach(b=>{m+=s.writeRtpMap(b),m+=s.writeFmtp(b),m+=s.writeRtcpFb(b)});let g=0;return c.codecs.forEach(b=>{b.maxptime>g&&(g=b.maxptime)}),g>0&&(m+="a=maxptime:"+g+`\r
`),c.headerExtensions&&c.headerExtensions.forEach(b=>{m+=s.writeExtmap(b)}),m},s.parseRtpEncodingParameters=function(d){const c=[],m=s.parseRtpParameters(d),g=m.fecMechanisms.indexOf("RED")!==-1,b=m.fecMechanisms.indexOf("ULPFEC")!==-1,k=s.matchPrefix(d,"a=ssrc:").map(st=>s.parseSsrcMedia(st)).filter(st=>st.attribute==="cname"),et=k.length>0&&k[0].ssrc;let nt;const it=s.matchPrefix(d,"a=ssrc-group:FID").map(st=>st.substr(17).split(" ").map(pt=>parseInt(pt,10)));it.length>0&&it[0].length>1&&it[0][0]===et&&(nt=it[0][1]),m.codecs.forEach(st=>{if(st.name.toUpperCase()==="RTX"&&st.parameters.apt){let ut={ssrc:et,codecPayloadType:parseInt(st.parameters.apt,10)};et&&nt&&(ut.rtx={ssrc:nt}),c.push(ut),g&&(ut=JSON.parse(JSON.stringify(ut)),ut.fec={ssrc:et,mechanism:b?"red+ulpfec":"red"},c.push(ut))}}),c.length===0&&et&&c.push({ssrc:et});let ct=s.matchPrefix(d,"b=");return ct.length&&(ct[0].indexOf("b=TIAS:")===0?ct=parseInt(ct[0].substr(7),10):ct[0].indexOf("b=AS:")===0?ct=parseInt(ct[0].substr(5),10)*1e3*.95-50*40*8:ct=void 0,c.forEach(st=>{st.maxBitrate=ct})),c},s.parseRtcpParameters=function(d){const c={},m=s.matchPrefix(d,"a=ssrc:").map(k=>s.parseSsrcMedia(k)).filter(k=>k.attribute==="cname")[0];m&&(c.cname=m.value,c.ssrc=m.ssrc);const g=s.matchPrefix(d,"a=rtcp-rsize");c.reducedSize=g.length>0,c.compound=g.length===0;const b=s.matchPrefix(d,"a=rtcp-mux");return c.mux=b.length>0,c},s.writeRtcpParameters=function(d){let c="";return d.reducedSize&&(c+=`a=rtcp-rsize\r
`),d.mux&&(c+=`a=rtcp-mux\r
`),d.ssrc!==void 0&&d.cname&&(c+="a=ssrc:"+d.ssrc+" cname:"+d.cname+`\r
`),c},s.parseMsid=function(d){let c;const m=s.matchPrefix(d,"a=msid:");if(m.length===1)return c=m[0].substr(7).split(" "),{stream:c[0],track:c[1]};const g=s.matchPrefix(d,"a=ssrc:").map(b=>s.parseSsrcMedia(b)).filter(b=>b.attribute==="msid");if(g.length>0)return c=g[0].value.split(" "),{stream:c[0],track:c[1]}},s.parseSctpDescription=function(d){const c=s.parseMLine(d),m=s.matchPrefix(d,"a=max-message-size:");let g;m.length>0&&(g=parseInt(m[0].substr(19),10)),isNaN(g)&&(g=65536);const b=s.matchPrefix(d,"a=sctp-port:");if(b.length>0)return{port:parseInt(b[0].substr(12),10),protocol:c.fmt,maxMessageSize:g};const k=s.matchPrefix(d,"a=sctpmap:");if(k.length>0){const et=k[0].substr(10).split(" ");return{port:parseInt(et[0],10),protocol:et[1],maxMessageSize:g}}},s.writeSctpDescription=function(d,c){let m=[];return d.protocol!=="DTLS/SCTP"?m=["m="+d.kind+" 9 "+d.protocol+" "+c.protocol+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctp-port:"+c.port+`\r
`]:m=["m="+d.kind+" 9 "+d.protocol+" "+c.port+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctpmap:"+c.port+" "+c.protocol+` 65535\r
`],c.maxMessageSize!==void 0&&m.push("a=max-message-size:"+c.maxMessageSize+`\r
`),m.join("")},s.generateSessionId=function(){return Math.random().toString().substr(2,21)},s.writeSessionBoilerplate=function(d,c,m){let g;const b=c!==void 0?c:2;return d?g=d:g=s.generateSessionId(),`v=0\r
o=`+(m||"thisisadapterortc")+" "+g+" "+b+` IN IP4 127.0.0.1\r
s=-\r
t=0 0\r
`},s.getDirection=function(d,c){const m=s.splitLines(d);for(let g=0;g<m.length;g++)switch(m[g]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return m[g].substr(2)}return c?s.getDirection(c):"sendrecv"},s.getKind=function(d){return s.splitLines(d)[0].split(" ")[0].substr(2)},s.isRejected=function(d){return d.split(" ",2)[1]==="0"},s.parseMLine=function(d){const m=s.splitLines(d)[0].substr(2).split(" ");return{kind:m[0],port:parseInt(m[1],10),protocol:m[2],fmt:m.slice(3).join(" ")}},s.parseOLine=function(d){const m=s.matchPrefix(d,"o=")[0].substr(2).split(" ");return{username:m[0],sessionId:m[1],sessionVersion:parseInt(m[2],10),netType:m[3],addressType:m[4],address:m[5]}},s.isValidSDP=function(d){if(typeof d!="string"||d.length===0)return!1;const c=s.splitLines(d);for(let m=0;m<c.length;m++)if(c[m].length<2||c[m].charAt(1)!=="=")return!1;return!0},a.exports=s})(sdp$1);var SDPUtils=sdp$1.exports,sdp=_mergeNamespaces({__proto__:null,default:SDPUtils},[sdp$1.exports]);function shimRTCIceCandidate(a){if(!a.RTCIceCandidate||a.RTCIceCandidate&&"foundation"in a.RTCIceCandidate.prototype)return;const s=a.RTCIceCandidate;a.RTCIceCandidate=function(c){if(typeof c=="object"&&c.candidate&&c.candidate.indexOf("a=")===0&&(c=JSON.parse(JSON.stringify(c)),c.candidate=c.candidate.substr(2)),c.candidate&&c.candidate.length){const m=new s(c),g=SDPUtils.parseCandidate(c.candidate),b=Object.assign(m,g);return b.toJSON=function(){return{candidate:b.candidate,sdpMid:b.sdpMid,sdpMLineIndex:b.sdpMLineIndex,usernameFragment:b.usernameFragment}},b}return new s(c)},a.RTCIceCandidate.prototype=s.prototype,wrapPeerConnectionEvent(a,"icecandidate",d=>(d.candidate&&Object.defineProperty(d,"candidate",{value:new a.RTCIceCandidate(d.candidate),writable:"false"}),d))}function shimMaxMessageSize(a,s){if(!a.RTCPeerConnection)return;"sctp"in a.RTCPeerConnection.prototype||Object.defineProperty(a.RTCPeerConnection.prototype,"sctp",{get(){return typeof this._sctp=="undefined"?null:this._sctp}});const d=function(k){if(!k||!k.sdp)return!1;const et=SDPUtils.splitSections(k.sdp);return et.shift(),et.some(nt=>{const it=SDPUtils.parseMLine(nt);return it&&it.kind==="application"&&it.protocol.indexOf("SCTP")!==-1})},c=function(k){const et=k.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(et===null||et.length<2)return-1;const nt=parseInt(et[1],10);return nt!==nt?-1:nt},m=function(k){let et=65536;return s.browser==="firefox"&&(s.version<57?k===-1?et=16384:et=2147483637:s.version<60?et=s.version===57?65535:65536:et=2147483637),et},g=function(k,et){let nt=65536;s.browser==="firefox"&&s.version===57&&(nt=65535);const it=SDPUtils.matchPrefix(k.sdp,"a=max-message-size:");return it.length>0?nt=parseInt(it[0].substr(19),10):s.browser==="firefox"&&et!==-1&&(nt=2147483637),nt},b=a.RTCPeerConnection.prototype.setRemoteDescription;a.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,s.browser==="chrome"&&s.version>=76){const{sdpSemantics:et}=this.getConfiguration();et==="plan-b"&&Object.defineProperty(this,"sctp",{get(){return typeof this._sctp=="undefined"?null:this._sctp},enumerable:!0,configurable:!0})}if(d(arguments[0])){const et=c(arguments[0]),nt=m(et),it=g(arguments[0],et);let ct;nt===0&&it===0?ct=Number.POSITIVE_INFINITY:nt===0||it===0?ct=Math.max(nt,it):ct=Math.min(nt,it);const st={};Object.defineProperty(st,"maxMessageSize",{get(){return ct}}),this._sctp=st}return b.apply(this,arguments)}}function shimSendThrowTypeError(a){if(!(a.RTCPeerConnection&&"createDataChannel"in a.RTCPeerConnection.prototype))return;function s(c,m){const g=c.send;c.send=function(){const k=arguments[0],et=k.length||k.size||k.byteLength;if(c.readyState==="open"&&m.sctp&&et>m.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+m.sctp.maxMessageSize+" bytes)");return g.apply(c,arguments)}}const d=a.RTCPeerConnection.prototype.createDataChannel;a.RTCPeerConnection.prototype.createDataChannel=function(){const m=d.apply(this,arguments);return s(m,this),m},wrapPeerConnectionEvent(a,"datachannel",c=>(s(c.channel,c.target),c))}function shimConnectionState(a){if(!a.RTCPeerConnection||"connectionState"in a.RTCPeerConnection.prototype)return;const s=a.RTCPeerConnection.prototype;Object.defineProperty(s,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(s,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(d){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),d&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=d)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(d=>{const c=s[d];s[d]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=m=>{const g=m.target;if(g._lastConnectionState!==g.connectionState){g._lastConnectionState=g.connectionState;const b=new Event("connectionstatechange",m);g.dispatchEvent(b)}return m},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),c.apply(this,arguments)}})}function removeExtmapAllowMixed(a,s){if(!a.RTCPeerConnection||s.browser==="chrome"&&s.version>=71||s.browser==="safari"&&s.version>=605)return;const d=a.RTCPeerConnection.prototype.setRemoteDescription;a.RTCPeerConnection.prototype.setRemoteDescription=function(m){if(m&&m.sdp&&m.sdp.indexOf(`
a=extmap-allow-mixed`)!==-1){const g=m.sdp.split(`
`).filter(b=>b.trim()!=="a=extmap-allow-mixed").join(`
`);a.RTCSessionDescription&&m instanceof a.RTCSessionDescription?arguments[0]=new a.RTCSessionDescription({type:m.type,sdp:g}):m.sdp=g}return d.apply(this,arguments)}}function shimAddIceCandidateNullOrEmpty(a,s){if(!(a.RTCPeerConnection&&a.RTCPeerConnection.prototype))return;const d=a.RTCPeerConnection.prototype.addIceCandidate;!d||d.length===0||(a.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?(s.browser==="chrome"&&s.version<78||s.browser==="firefox"&&s.version<68||s.browser==="safari")&&arguments[0]&&arguments[0].candidate===""?Promise.resolve():d.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}function shimParameterlessSetLocalDescription(a,s){if(!(a.RTCPeerConnection&&a.RTCPeerConnection.prototype))return;const d=a.RTCPeerConnection.prototype.setLocalDescription;!d||d.length===0||(a.RTCPeerConnection.prototype.setLocalDescription=function(){let m=arguments[0]||{};if(typeof m!="object"||m.type&&m.sdp)return d.apply(this,arguments);if(m={type:m.type,sdp:m.sdp},!m.type)switch(this.signalingState){case"stable":case"have-local-offer":case"have-remote-pranswer":m.type="offer";break;default:m.type="answer";break}return m.sdp||m.type!=="offer"&&m.type!=="answer"?d.apply(this,[m]):(m.type==="offer"?this.createOffer:this.createAnswer).apply(this).then(b=>d.apply(this,[b]))})}var commonShim=Object.freeze(Object.defineProperty({__proto__:null,shimRTCIceCandidate,shimMaxMessageSize,shimSendThrowTypeError,shimConnectionState,removeExtmapAllowMixed,shimAddIceCandidateNullOrEmpty,shimParameterlessSetLocalDescription},Symbol.toStringTag,{value:"Module"}));function adapterFactory({window:a}={},s={shimChrome:!0,shimFirefox:!0,shimSafari:!0}){const d=log,c=detectBrowser(a),m={browserDetails:c,commonShim,extractVersion,disableLog,disableWarnings,sdp};switch(c.browser){case"chrome":if(!chromeShim||!shimPeerConnection$1||!s.shimChrome)return d("Chrome shim is not included in this adapter release."),m;if(c.version===null)return d("Chrome shim can not determine version, not shimming."),m;d("adapter.js shimming chrome."),m.browserShim=chromeShim,shimAddIceCandidateNullOrEmpty(a,c),shimParameterlessSetLocalDescription(a),shimGetUserMedia$2(a,c),shimMediaStream(a),shimPeerConnection$1(a,c),shimOnTrack$1(a),shimAddTrackRemoveTrack(a,c),shimGetSendersWithDtmf(a),shimGetStats(a),shimSenderReceiverGetStats(a),fixNegotiationNeeded(a,c),shimRTCIceCandidate(a),shimConnectionState(a),shimMaxMessageSize(a,c),shimSendThrowTypeError(a),removeExtmapAllowMixed(a,c);break;case"firefox":if(!firefoxShim||!shimPeerConnection||!s.shimFirefox)return d("Firefox shim is not included in this adapter release."),m;d("adapter.js shimming firefox."),m.browserShim=firefoxShim,shimAddIceCandidateNullOrEmpty(a,c),shimParameterlessSetLocalDescription(a),shimGetUserMedia$1(a,c),shimPeerConnection(a,c),shimOnTrack(a),shimRemoveStream(a),shimSenderGetStats(a),shimReceiverGetStats(a),shimRTCDataChannel(a),shimAddTransceiver(a),shimGetParameters(a),shimCreateOffer(a),shimCreateAnswer(a),shimRTCIceCandidate(a),shimConnectionState(a),shimMaxMessageSize(a,c),shimSendThrowTypeError(a);break;case"safari":if(!safariShim||!s.shimSafari)return d("Safari shim is not included in this adapter release."),m;d("adapter.js shimming safari."),m.browserShim=safariShim,shimAddIceCandidateNullOrEmpty(a,c),shimParameterlessSetLocalDescription(a),shimRTCIceServerUrls(a),shimCreateOfferLegacy(a),shimCallbacksAPI(a),shimLocalStreamsAPI(a),shimRemoteStreamsAPI(a),shimTrackEventTransceiver(a),shimGetUserMedia(a),shimAudioContext(a),shimRTCIceCandidate(a),shimMaxMessageSize(a,c),shimSendThrowTypeError(a),removeExtmapAllowMixed(a,c);break;default:d("Unsupported browser!");break}return m}adapterFactory({window:typeof window=="undefined"?void 0:window});var __awaiter$2=commonjsGlobal&&commonjsGlobal.__awaiter||function(a,s,d,c){function m(g){return g instanceof d?g:new d(function(b){b(g)})}return new(d||(d=Promise))(function(g,b){function k(it){try{nt(c.next(it))}catch(ct){b(ct)}}function et(it){try{nt(c.throw(it))}catch(ct){b(ct)}}function nt(it){it.done?g(it.value):m(it.value).then(k,et)}nt((c=c.apply(a,s||[])).next())})},__importDefault$2=commonjsGlobal&&commonjsGlobal.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(SignalClient$1,"__esModule",{value:!0});SignalClient$1.toProtoSessionDescription=SignalClient$1.SignalClient=void 0;const logger_1$1=__importDefault$2(logger),livekit_rtc_1=livekit_rtc,errors_1$1=errors,utils_1$1=utils$1;class SignalClient{constructor(s=!1){this.isConnected=!1,this.useJSON=s}join(s,d,c){return __awaiter$2(this,void 0,void 0,function*(){return yield this.connect(s,d,{autoSubscribe:c==null?void 0:c.autoSubscribe})})}reconnect(s,d){return __awaiter$2(this,void 0,void 0,function*(){yield this.connect(s,d,{reconnect:!0})})}connect(s,d,c){s.startsWith("http")&&(s=s.replace("http","ws")),s=s.replace(/\/$/,""),s+="/rtc";const m=utils_1$1.getClientInfo(),g=createConnectionParams(d,m,c);return new Promise((b,k)=>{logger_1$1.default.debug("connecting to",s+g),this.ws=void 0;const et=new WebSocket(s+g);et.binaryType="arraybuffer",et.onerror=nt=>__awaiter$2(this,void 0,void 0,function*(){if(!this.ws){try{const it=yield fetch(`http${s.substring(2)}/validate${g}`);if(it.ok)k(new errors_1$1.ConnectionError("Internal error"));else{const ct=yield it.text();k(new errors_1$1.ConnectionError(ct))}}catch{k(new errors_1$1.ConnectionError("server was not reachable"))}return}this.handleWSError(nt)}),et.onopen=()=>{this.ws=et,c.reconnect&&(this.isConnected=!0,b())},et.onmessage=nt=>__awaiter$2(this,void 0,void 0,function*(){let it;if(typeof nt.data=="string"){const ct=JSON.parse(nt.data);it=livekit_rtc_1.SignalResponse.fromJSON(ct)}else if(nt.data instanceof ArrayBuffer)it=livekit_rtc_1.SignalResponse.decode(new Uint8Array(nt.data));else{logger_1$1.default.error("could not decode websocket message",typeof nt.data);return}if(!this.isConnected){it.join?(this.isConnected=!0,b(it.join)):k(new errors_1$1.ConnectionError("did not receive join response"));return}this.signalLatency&&(yield utils_1$1.sleep(this.signalLatency)),this.handleSignalResponse(it)}),et.onclose=nt=>{!this.isConnected||(logger_1$1.default.debug("websocket connection closed",nt.reason),this.isConnected=!1,this.onClose&&this.onClose(nt.reason),this.ws===et&&(this.ws=void 0))}})}close(){var s;this.isConnected=!1,this.ws&&(this.ws.onclose=null),(s=this.ws)===null||s===void 0||s.close(),this.ws=void 0}sendOffer(s){logger_1$1.default.debug("sending offer",s),this.sendRequest({offer:toProtoSessionDescription(s)})}sendAnswer(s){logger_1$1.default.debug("sending answer"),this.sendRequest({answer:toProtoSessionDescription(s)})}sendIceCandidate(s,d){logger_1$1.default.trace("sending ice candidate",s),this.sendRequest({trickle:{candidateInit:JSON.stringify(s),target:d}})}sendMuteTrack(s,d){this.sendRequest({mute:{sid:s,muted:d}})}sendAddTrack(s){this.sendRequest({addTrack:livekit_rtc_1.AddTrackRequest.fromPartial(s)})}sendUpdateTrackSettings(s){this.sendRequest({trackSetting:s})}sendUpdateSubscription(s){this.sendRequest({subscription:s})}sendSyncState(s){this.sendRequest({syncState:s})}sendUpdateVideoLayers(s,d){this.sendRequest({updateLayers:{trackSid:s,layers:d}})}sendUpdateSubscriptionPermissions(s,d){this.sendRequest({subscriptionPermissions:{allParticipants:s,trackPermissions:d}})}sendSimulateScenario(s){this.sendRequest({simulate:s})}sendLeave(){this.sendRequest(livekit_rtc_1.SignalRequest.fromPartial({leave:{}}))}sendRequest(s){return __awaiter$2(this,void 0,void 0,function*(){if(this.signalLatency&&(yield utils_1$1.sleep(this.signalLatency)),!this.ws){logger_1$1.default.error("cannot send signal request before connected");return}try{this.useJSON?this.ws.send(JSON.stringify(livekit_rtc_1.SignalRequest.toJSON(s))):this.ws.send(livekit_rtc_1.SignalRequest.encode(s).finish())}catch(d){logger_1$1.default.error("error sending signal message",d)}})}handleSignalResponse(s){if(s.answer){const d=fromProtoSessionDescription(s.answer);this.onAnswer&&this.onAnswer(d)}else if(s.offer){const d=fromProtoSessionDescription(s.offer);this.onOffer&&this.onOffer(d)}else if(s.trickle){const d=JSON.parse(s.trickle.candidateInit);this.onTrickle&&this.onTrickle(d,s.trickle.target)}else s.update?this.onParticipantUpdate&&this.onParticipantUpdate(s.update.participants):s.trackPublished?this.onLocalTrackPublished&&this.onLocalTrackPublished(s.trackPublished):s.speakersChanged?this.onSpeakersChanged&&this.onSpeakersChanged(s.speakersChanged.speakers):s.leave?this.onLeave&&this.onLeave():s.mute?this.onRemoteMuteChanged&&this.onRemoteMuteChanged(s.mute.sid,s.mute.muted):s.roomUpdate?this.onRoomUpdate&&this.onRoomUpdate(s.roomUpdate.room):s.connectionQuality?this.onConnectionQuality&&this.onConnectionQuality(s.connectionQuality):s.streamStateUpdate?this.onStreamStateUpdate&&this.onStreamStateUpdate(s.streamStateUpdate):s.subscribedQualityUpdate?this.onSubscribedQualityUpdate&&this.onSubscribedQualityUpdate(s.subscribedQualityUpdate):s.subscriptionPermissionUpdate?this.onSubscriptionPermissionUpdate&&this.onSubscriptionPermissionUpdate(s.subscriptionPermissionUpdate):logger_1$1.default.debug("unsupported message",s)}handleWSError(s){logger_1$1.default.error("websocket error",s)}}SignalClient$1.SignalClient=SignalClient;function fromProtoSessionDescription(a){const s={type:"offer",sdp:a.sdp};switch(a.type){case"answer":case"offer":case"pranswer":case"rollback":s.type=a.type;break}return s}function toProtoSessionDescription(a){return{sdp:a.sdp,type:a.type}}SignalClient$1.toProtoSessionDescription=toProtoSessionDescription;function createConnectionParams(a,s,d){const c=new URLSearchParams;return c.set("access_token",a),d!=null&&d.reconnect&&c.set("reconnect","1"),(d==null?void 0:d.autoSubscribe)!==void 0&&c.set("auto_subscribe",d.autoSubscribe?"1":"0"),c.set("sdk","js"),c.set("version",s.version),c.set("protocol",s.protocol.toString()),s.deviceModel&&c.set("device_model",s.deviceModel),s.os&&c.set("os",s.os),s.osVersion&&c.set("os_version",s.osVersion),s.browser&&c.set("browser",s.browser),s.browserVersion&&c.set("browser_version",s.browserVersion),`?${c.toString()}`}var RTCEngine={},PCTransport$1={},__awaiter$1=commonjsGlobal&&commonjsGlobal.__awaiter||function(a,s,d,c){function m(g){return g instanceof d?g:new d(function(b){b(g)})}return new(d||(d=Promise))(function(g,b){function k(it){try{nt(c.next(it))}catch(ct){b(ct)}}function et(it){try{nt(c.throw(it))}catch(ct){b(ct)}}function nt(it){it.done?g(it.value):m(it.value).then(k,et)}nt((c=c.apply(a,s||[])).next())})},__importDefault$1=commonjsGlobal&&commonjsGlobal.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(PCTransport$1,"__esModule",{value:!0});const ts_debounce_1=require$$0,logger_1=__importDefault$1(logger);class PCTransport{constructor(s){this.pendingCandidates=[],this.restartingIce=!1,this.renegotiate=!1,this.negotiate=ts_debounce_1.debounce(()=>{this.createAndSendOffer()},100),this.pc=new RTCPeerConnection(s)}get isICEConnected(){return this.pc.iceConnectionState==="connected"||this.pc.iceConnectionState==="completed"}addIceCandidate(s){return __awaiter$1(this,void 0,void 0,function*(){if(this.pc.remoteDescription&&!this.restartingIce)return this.pc.addIceCandidate(s);this.pendingCandidates.push(s)})}setRemoteDescription(s){return __awaiter$1(this,void 0,void 0,function*(){yield this.pc.setRemoteDescription(s),this.pendingCandidates.forEach(d=>{this.pc.addIceCandidate(d)}),this.pendingCandidates=[],this.restartingIce=!1,this.renegotiate&&(this.renegotiate=!1,this.createAndSendOffer())})}createAndSendOffer(s){return __awaiter$1(this,void 0,void 0,function*(){if(this.onOffer===void 0)return;if(s!=null&&s.iceRestart&&(logger_1.default.debug("restarting ICE"),this.restartingIce=!0),this.pc.signalingState==="have-local-offer"){const c=this.pc.remoteDescription;if((s==null?void 0:s.iceRestart)&&c)yield this.pc.setRemoteDescription(c);else{this.renegotiate=!0;return}}else if(this.pc.signalingState==="closed"){logger_1.default.warn("could not createOffer with closed peer connection");return}logger_1.default.debug("starting to negotiate");const d=yield this.pc.createOffer(s);yield this.pc.setLocalDescription(d),this.onOffer(d)})}close(){this.pc.close()}}PCTransport$1.default=PCTransport;(function(a){var s=commonjsGlobal&&commonjsGlobal.__awaiter||function(ht,_e,ot,lt){function Ot(It){return It instanceof ot?It:new ot(function(Pt){Pt(It)})}return new(ot||(ot=Promise))(function(It,Pt){function $t(Ct){try{Rt(lt.next(Ct))}catch(vt){Pt(vt)}}function bt(Ct){try{Rt(lt.throw(Ct))}catch(vt){Pt(vt)}}function Rt(Ct){Ct.done?It(Ct.value):Ot(Ct.value).then($t,bt)}Rt((lt=lt.apply(ht,_e||[])).next())})},d=commonjsGlobal&&commonjsGlobal.__importDefault||function(ht){return ht&&ht.__esModule?ht:{default:ht}};Object.defineProperty(a,"__esModule",{value:!0}),a.maxICEConnectTimeout=void 0;const c=events.exports,m=SignalClient$1,g=d(logger),b=livekit_models,k=livekit_rtc,et=errors,nt=events$1,it=d(PCTransport$1),ct=utils$1,st="_lossy",ut="_reliable",pt=5;a.maxICEConnectTimeout=5*1e3;class St extends c.EventEmitter{constructor(){super(),this.rtcConfig={},this.subscriberPrimary=!1,this.iceConnected=!1,this.isClosed=!0,this.pendingTrackResolvers={},this.hasPublished=!1,this.reconnectAttempts=0,this.handleDataChannel=({channel:_e})=>s(this,void 0,void 0,function*(){if(!!_e){if(_e.label===ut)this.reliableDCSub=_e;else if(_e.label===st)this.lossyDCSub=_e;else return;_e.onmessage=this.handleDataMessage}}),this.handleDataMessage=_e=>s(this,void 0,void 0,function*(){let ot;if(_e.data instanceof ArrayBuffer)ot=_e.data;else if(_e.data instanceof Blob)ot=yield _e.data.arrayBuffer();else{g.default.error("unsupported data type",_e.data);return}const lt=b.DataPacket.decode(new Uint8Array(ot));lt.speaker?this.emit(nt.EngineEvent.ActiveSpeakersUpdate,lt.speaker.speakers):lt.user&&this.emit(nt.EngineEvent.DataPacketReceived,lt.user,lt.kind)}),this.handleDisconnect=_e=>{if(this.isClosed)return;if(g.default.debug(`${_e} disconnected`),this.reconnectAttempts>=pt){g.default.info("could not connect to signal after",pt,"attempts. giving up"),this.emit(nt.EngineEvent.Disconnected),this.close();return}const ot=this.reconnectAttempts*this.reconnectAttempts*300;setTimeout(()=>{this.reconnect().then(()=>{this.reconnectAttempts=0}).catch(this.handleDisconnect)},ot)},this.client=new m.SignalClient}join(_e,ot,lt){return s(this,void 0,void 0,function*(){this.url=_e,this.token=ot;const Ot=yield this.client.join(_e,ot,lt);return this.emit(nt.EngineEvent.SignalConnected),this.isClosed=!1,this.subscriberPrimary=Ot.subscriberPrimary,this.publisher||this.configure(Ot),this.subscriberPrimary||this.negotiate(),Ot})}close(){this.isClosed=!0,this.removeAllListeners(),this.publisher&&this.publisher.pc.signalingState!=="closed"&&(this.publisher.pc.getSenders().forEach(_e=>{var ot;try{(ot=this.publisher)===null||ot===void 0||ot.pc.removeTrack(_e)}catch(lt){g.default.warn("could not removeTrack",lt)}}),this.publisher.close(),this.publisher=void 0),this.subscriber&&(this.subscriber.close(),this.subscriber=void 0),this.client.close()}addTrack(_e){if(this.pendingTrackResolvers[_e.cid])throw new et.TrackInvalidError("a track with the same ID has already been published");return new Promise(ot=>{this.pendingTrackResolvers[_e.cid]=ot,this.client.sendAddTrack(_e)})}updateMuteStatus(_e,ot){this.client.sendMuteTrack(_e,ot)}get dataSubscriberReadyState(){var _e;return(_e=this.reliableDCSub)===null||_e===void 0?void 0:_e.readyState}get connectedServerAddress(){return this.connectedServerAddr}configure(_e){if(this.publisher||this.subscriber)return;if(_e.iceServers&&!this.rtcConfig.iceServers){const lt=[];_e.iceServers.forEach(Ot=>{const It={urls:Ot.urls};Ot.username&&(It.username=Ot.username),Ot.credential&&(It.credential=Ot.credential),lt.push(It)}),this.rtcConfig.iceServers=lt}this.publisher=new it.default(this.rtcConfig),this.subscriber=new it.default(this.rtcConfig),this.publisher.pc.onicecandidate=lt=>{!lt.candidate||(g.default.trace("adding ICE candidate for peer",lt.candidate),this.client.sendIceCandidate(lt.candidate,k.SignalTarget.PUBLISHER))},this.subscriber.pc.onicecandidate=lt=>{!lt.candidate||this.client.sendIceCandidate(lt.candidate,k.SignalTarget.SUBSCRIBER)},this.publisher.onOffer=lt=>{this.client.sendOffer(lt)};let ot=this.publisher.pc;_e.subscriberPrimary&&(ot=this.subscriber.pc,this.subscriber.pc.ondatachannel=this.handleDataChannel),ot.oniceconnectionstatechange=()=>{ot.iceConnectionState==="connected"?(g.default.trace("ICE connected"),this.iceConnected||(this.iceConnected=!0,this.emit(nt.EngineEvent.Connected)),_t(ot).then(lt=>{this.connectedServerAddr=lt})):ot.iceConnectionState==="failed"&&(g.default.trace("ICE disconnected"),this.iceConnected&&(this.iceConnected=!1,this.handleDisconnect("peerconnection")))},this.subscriber.pc.ontrack=lt=>{this.emit(nt.EngineEvent.MediaTrackAdded,lt.track,lt.streams[0],lt.receiver)},this.lossyDC=this.publisher.pc.createDataChannel(st,{ordered:!0,maxRetransmits:0}),this.reliableDC=this.publisher.pc.createDataChannel(ut,{ordered:!0}),this.lossyDC.onmessage=this.handleDataMessage,this.reliableDC.onmessage=this.handleDataMessage,this.client.onAnswer=lt=>s(this,void 0,void 0,function*(){!this.publisher||(g.default.debug("received server answer",lt.type,this.publisher.pc.signalingState),yield this.publisher.setRemoteDescription(lt))}),this.client.onTrickle=(lt,Ot)=>{!this.publisher||!this.subscriber||(g.default.trace("got ICE candidate from peer",lt,Ot),Ot===k.SignalTarget.PUBLISHER?this.publisher.addIceCandidate(lt):this.subscriber.addIceCandidate(lt))},this.client.onOffer=lt=>s(this,void 0,void 0,function*(){if(!this.subscriber)return;g.default.debug("received server offer",lt.type,this.subscriber.pc.signalingState),yield this.subscriber.setRemoteDescription(lt);const Ot=yield this.subscriber.pc.createAnswer();yield this.subscriber.pc.setLocalDescription(Ot),this.client.sendAnswer(Ot)}),this.client.onLocalTrackPublished=lt=>{g.default.debug("received trackPublishedResponse",lt);const Ot=this.pendingTrackResolvers[lt.cid];if(!Ot){g.default.error("missing track resolver for ",lt.cid);return}delete this.pendingTrackResolvers[lt.cid],Ot(lt.track)},this.client.onClose=()=>{this.handleDisconnect("signal")},this.client.onLeave=()=>{this.emit(nt.EngineEvent.Disconnected),this.close()}}reconnect(){return s(this,void 0,void 0,function*(){if(this.isClosed)return;if(!this.url||!this.token)throw new et.ConnectionError("could not reconnect, url or token not saved");if(g.default.info("reconnecting to signal connection, attempt",this.reconnectAttempts),this.reconnectAttempts===0&&this.emit(nt.EngineEvent.Reconnecting),this.reconnectAttempts+=1,yield this.client.reconnect(this.url,this.token),this.emit(nt.EngineEvent.SignalConnected),!this.publisher||!this.subscriber)throw new et.UnexpectedConnectionState("publisher and subscriber connections unset");this.subscriber.restartingIce=!0,this.hasPublished&&(yield this.publisher.createAndSendOffer({iceRestart:!0}));const _e=new Date().getTime();for(;new Date().getTime()-_e<a.maxICEConnectTimeout*2;){if(this.iceConnected){this.emit(nt.EngineEvent.Reconnected);return}yield ct.sleep(100)}throw new et.ConnectionError("could not establish ICE connection")})}sendDataPacket(_e,ot){return s(this,void 0,void 0,function*(){const lt=b.DataPacket.encode(_e).finish();yield this.ensurePublisherConnected(ot),ot===b.DataPacket_Kind.LOSSY&&this.lossyDC?this.lossyDC.send(lt):ot===b.DataPacket_Kind.RELIABLE&&this.reliableDC&&this.reliableDC.send(lt)})}ensurePublisherConnected(_e){var ot,lt;return s(this,void 0,void 0,function*(){if(!this.subscriberPrimary)return;if(!this.publisher)throw new et.ConnectionError("publisher connection not set");!this.publisher.isICEConnected&&this.publisher.pc.iceConnectionState!=="checking"&&this.negotiate();const Ot=this.dataChannelForKind(_e);if((Ot==null?void 0:Ot.readyState)==="open")return;const It=new Date().getTime()+a.maxICEConnectTimeout;for(;new Date().getTime()<It;){if(this.publisher.isICEConnected&&((ot=this.dataChannelForKind(_e))===null||ot===void 0?void 0:ot.readyState)==="open")return;yield ct.sleep(50)}throw new et.ConnectionError(`could not establish publisher connection, state ${(lt=this.publisher)===null||lt===void 0?void 0:lt.pc.iceConnectionState}`)})}negotiate(){!this.publisher||(this.hasPublished=!0,this.publisher.negotiate())}dataChannelForKind(_e){if(_e===b.DataPacket_Kind.LOSSY)return this.lossyDC;if(_e===b.DataPacket_Kind.RELIABLE)return this.reliableDC}}a.default=St;function _t(ht){var _e;return s(this,void 0,void 0,function*(){let ot="";const lt=new Map,Ot=new Map;if((yield ht.getStats()).forEach($t=>{switch($t.type){case"transport":ot=$t.selectedCandidatePairId;break;case"candidate-pair":ot===""&&$t.selected&&(ot=$t.id),lt.set($t.id,$t);break;case"remote-candidate":Ot.set($t.id,`${$t.address}:${$t.port}`);break}}),ot==="")return;const Pt=(_e=lt.get(ot))===null||_e===void 0?void 0:_e.remoteCandidateId;if(Pt!==void 0)return Ot.get(Pt)})}})(RTCEngine);var defaults={};Object.defineProperty(defaults,"__esModule",{value:!0});defaults.videoDefaults=defaults.audioDefaults=defaults.publishDefaults=void 0;const options_1$1=options$1;defaults.publishDefaults={audioBitrate:options_1$1.AudioPresets.speech.maxBitrate,dtx:!0,simulcast:!0,screenShareEncoding:options_1$1.ScreenSharePresets.hd_15.encoding,stopMicTrackOnMute:!1};defaults.audioDefaults={autoGainControl:!0,channelCount:1,echoCancellation:!0,noiseSuppression:!0};defaults.videoDefaults={resolution:options_1$1.VideoPresets.qhd.resolution};(function(a){var s=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(It,Pt,$t,bt){bt===void 0&&(bt=$t),Object.defineProperty(It,bt,{enumerable:!0,get:function(){return Pt[$t]}})}:function(It,Pt,$t,bt){bt===void 0&&(bt=$t),It[bt]=Pt[$t]}),d=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(It,Pt){Object.defineProperty(It,"default",{enumerable:!0,value:Pt})}:function(It,Pt){It.default=Pt}),c=commonjsGlobal&&commonjsGlobal.__importStar||function(It){if(It&&It.__esModule)return It;var Pt={};if(It!=null)for(var $t in It)$t!=="default"&&Object.prototype.hasOwnProperty.call(It,$t)&&s(Pt,It,$t);return d(Pt,It),Pt},m=commonjsGlobal&&commonjsGlobal.__awaiter||function(It,Pt,$t,bt){function Rt(Ct){return Ct instanceof $t?Ct:new $t(function(vt){vt(Ct)})}return new($t||($t=Promise))(function(Ct,vt){function Tt(Mt){try{zt(bt.next(Mt))}catch(Nt){vt(Nt)}}function wt(Mt){try{zt(bt.throw(Mt))}catch(Nt){vt(Nt)}}function zt(Mt){Mt.done?Ct(Mt.value):Rt(Mt.value).then(Tt,wt)}zt((bt=bt.apply(It,Pt||[])).next())})},g=commonjsGlobal&&commonjsGlobal.__importDefault||function(It){return It&&It.__esModule?It:{default:It}};Object.defineProperty(a,"__esModule",{value:!0}),a.RoomState=void 0;const b=events.exports,k=SignalClient$1,et=g(logger),nt=livekit_models,it=livekit_rtc,ct=g(DeviceManager$1),st=errors,ut=events$1,pt=g(LocalParticipant$1),St=g(RemoteParticipant$1),_t=c(RTCEngine),ht=defaults,_e=Track,ot=utils$1;var lt;(function(It){It.Disconnected="disconnected",It.Connected="connected",It.Reconnecting="reconnecting"})(lt=a.RoomState||(a.RoomState={}));class Ot extends b.EventEmitter{constructor(Pt){super(),this.state=lt.Disconnected,this.activeSpeakers=[],this.sid="",this.name="",this.metadata=void 0,this.audioEnabled=!0,this.connect=($t,bt,Rt)=>m(this,void 0,void 0,function*(){if(this.state!==lt.Disconnected){et.default.warn("already connected to room",this.name);return}this.createEngine(),this.acquireAudioContext(),Rt!=null&&Rt.rtcConfig&&(this.engine.rtcConfig=Rt.rtcConfig),this.connOptions=Rt;try{const Ct=yield this.engine.join($t,bt,Rt);if(et.default.debug("connected to Livekit Server",Ct.serverVersion),!Ct.serverVersion)throw new st.UnsupportedServer("unknown server version");Ct.serverVersion==="0.15.1"&&this.options.dynacast&&(et.default.debug("disabling dynacast due to server version"),this.options.dynacast=!1),this.state=lt.Connected;const vt=Ct.participant;this.localParticipant=new pt.default(vt.sid,vt.identity,this.engine,this.options),this.localParticipant.updateInfo(vt),this.localParticipant.on(ut.ParticipantEvent.MetadataChanged,Tt=>{this.emit(ut.RoomEvent.MetadataChanged,Tt,this.localParticipant)}).on(ut.ParticipantEvent.ParticipantMetadataChanged,Tt=>{this.emit(ut.RoomEvent.ParticipantMetadataChanged,Tt,this.localParticipant)}).on(ut.ParticipantEvent.TrackMuted,Tt=>{this.emit(ut.RoomEvent.TrackMuted,Tt,this.localParticipant)}).on(ut.ParticipantEvent.TrackUnmuted,Tt=>{this.emit(ut.RoomEvent.TrackUnmuted,Tt,this.localParticipant)}).on(ut.ParticipantEvent.LocalTrackPublished,Tt=>{this.emit(ut.RoomEvent.LocalTrackPublished,Tt,this.localParticipant)}).on(ut.ParticipantEvent.LocalTrackUnpublished,Tt=>{this.emit(ut.RoomEvent.LocalTrackUnpublished,Tt,this.localParticipant)}).on(ut.ParticipantEvent.ConnectionQualityChanged,Tt=>{this.emit(ut.RoomEvent.ConnectionQualityChanged,Tt,this.localParticipant)}).on(ut.ParticipantEvent.MediaDevicesError,Tt=>{this.emit(ut.RoomEvent.MediaDevicesError,Tt)}),Ct.otherParticipants.forEach(Tt=>{this.getOrCreateParticipant(Tt.sid,Tt)}),this.name=Ct.room.name,this.sid=Ct.room.sid,this.metadata=Ct.room.metadata}catch(Ct){throw this.engine.close(),Ct}return new Promise((Ct,vt)=>{const Tt=setTimeout(()=>{this.engine.close(),vt(new st.ConnectionError("could not connect after timeout"))},_t.maxICEConnectTimeout);this.engine.once(ut.EngineEvent.Connected,()=>{clearTimeout(Tt),window.addEventListener("beforeunload",this.onBeforeUnload),navigator.mediaDevices.addEventListener("devicechange",this.handleDeviceChange),Ct(this)})})}),this.disconnect=($t=!0)=>{this.engine&&(this.engine.client.sendLeave(),this.engine.close()),this.handleDisconnect($t),this.engine=void 0},this.onBeforeUnload=()=>{this.disconnect()},this.handleParticipantUpdates=$t=>{$t.forEach(bt=>{if(bt.sid===this.localParticipant.sid){this.localParticipant.updateInfo(bt);return}let Rt=this.participants.get(bt.sid);const Ct=!Rt;Rt=this.getOrCreateParticipant(bt.sid,bt),bt.state===nt.ParticipantInfo_State.DISCONNECTED?this.handleParticipantDisconnected(bt.sid,Rt):Ct?this.emit(ut.RoomEvent.ParticipantConnected,Rt):Rt.updateInfo(bt)})},this.handleActiveSpeakersUpdate=$t=>{const bt=[],Rt={};$t.forEach(Ct=>{if(Rt[Ct.sid]=!0,Ct.sid===this.localParticipant.sid)this.localParticipant.audioLevel=Ct.level,this.localParticipant.setIsSpeaking(!0),bt.push(this.localParticipant);else{const vt=this.participants.get(Ct.sid);vt&&(vt.audioLevel=Ct.level,vt.setIsSpeaking(!0),bt.push(vt))}}),Rt[this.localParticipant.sid]||(this.localParticipant.audioLevel=0,this.localParticipant.setIsSpeaking(!1)),this.participants.forEach(Ct=>{Rt[Ct.sid]||(Ct.audioLevel=0,Ct.setIsSpeaking(!1))}),this.activeSpeakers=bt,this.emit(ut.RoomEvent.ActiveSpeakersChanged,bt)},this.handleSpeakersChanged=$t=>{const bt=new Map;this.activeSpeakers.forEach(Ct=>{bt.set(Ct.sid,Ct)}),$t.forEach(Ct=>{let vt=this.participants.get(Ct.sid);Ct.sid===this.localParticipant.sid&&(vt=this.localParticipant),vt&&(vt.audioLevel=Ct.level,vt.setIsSpeaking(Ct.active),Ct.active?bt.set(Ct.sid,vt):bt.delete(Ct.sid))});const Rt=Array.from(bt.values());Rt.sort((Ct,vt)=>vt.audioLevel-Ct.audioLevel),this.activeSpeakers=Rt,this.emit(ut.RoomEvent.ActiveSpeakersChanged,Rt)},this.handleStreamStateUpdate=$t=>{$t.streamStates.forEach(bt=>{const Rt=this.participants.get(bt.participantSid);if(!Rt)return;const Ct=Rt.getTrackPublication(bt.trackSid);!Ct||!Ct.track||(Ct.track.streamState=_e.Track.streamStateFromProto(bt.state),Rt.emit(ut.ParticipantEvent.TrackStreamStateChanged,Ct,Ct.track.streamState),this.emit(ut.ParticipantEvent.TrackStreamStateChanged,Ct,Ct.track.streamState,Rt))})},this.handleSubscriptionPermissionUpdate=$t=>{const bt=this.participants.get($t.participantSid);if(!bt)return;const Rt=bt.getTrackPublication($t.trackSid);!Rt||(Rt._allowed=$t.allowed,bt.emit(ut.ParticipantEvent.TrackSubscriptionPermissionChanged,Rt,Rt.subscriptionStatus),this.emit(ut.ParticipantEvent.TrackSubscriptionPermissionChanged,Rt,Rt.subscriptionStatus,bt))},this.handleDataPacket=($t,bt)=>{const Rt=this.participants.get($t.participantSid);this.emit(ut.RoomEvent.DataReceived,$t.payload,Rt,bt),Rt==null||Rt.emit(ut.ParticipantEvent.DataReceived,$t.payload,bt)},this.handleAudioPlaybackStarted=()=>{this.canPlaybackAudio||(this.audioEnabled=!0,this.emit(ut.RoomEvent.AudioPlaybackStatusChanged,!0))},this.handleAudioPlaybackFailed=$t=>{et.default.warn("could not playback audio",$t),this.canPlaybackAudio&&(this.audioEnabled=!1,this.emit(ut.RoomEvent.AudioPlaybackStatusChanged,!1))},this.handleDeviceChange=()=>m(this,void 0,void 0,function*(){this.emit(ut.RoomEvent.MediaDevicesChanged)}),this.handleRoomUpdate=$t=>{this.metadata=$t.metadata,this.emit(ut.RoomEvent.RoomMetadataChanged,$t.metadata)},this.handleConnectionQualityUpdate=$t=>{$t.updates.forEach(bt=>{if(bt.participantSid===this.localParticipant.sid){this.localParticipant.setConnectionQuality(bt.quality);return}const Rt=this.participants.get(bt.participantSid);Rt&&Rt.setConnectionQuality(bt.quality)})},this.participants=new Map,this.options=Pt||{},this.options.audioCaptureDefaults=Object.assign(Object.assign({},ht.audioDefaults),Pt==null?void 0:Pt.audioCaptureDefaults),this.options.videoCaptureDefaults=Object.assign(Object.assign({},ht.videoDefaults),Pt==null?void 0:Pt.videoCaptureDefaults),this.options.publishDefaults=Object.assign(Object.assign({},ht.publishDefaults),Pt==null?void 0:Pt.publishDefaults),this.createEngine(),this.localParticipant=new pt.default("","",this.engine,this.options)}createEngine(){this.engine||(this.engine=new _t.default,this.engine.client.signalLatency=this.options.expSignalLatency,this.engine.on(ut.EngineEvent.MediaTrackAdded,(Pt,$t,bt)=>{this.onTrackAdded(Pt,$t,bt)}),this.engine.on(ut.EngineEvent.Disconnected,()=>{this.handleDisconnect()}),this.engine.client.onParticipantUpdate=this.handleParticipantUpdates,this.engine.client.onRoomUpdate=this.handleRoomUpdate,this.engine.client.onSpeakersChanged=this.handleSpeakersChanged,this.engine.client.onStreamStateUpdate=this.handleStreamStateUpdate,this.engine.client.onSubscriptionPermissionUpdate=this.handleSubscriptionPermissionUpdate,this.engine.on(ut.EngineEvent.ActiveSpeakersUpdate,this.handleActiveSpeakersUpdate),this.engine.on(ut.EngineEvent.DataPacketReceived,this.handleDataPacket),this.engine.on(ut.EngineEvent.Reconnecting,()=>{this.state=lt.Reconnecting,this.emit(ut.RoomEvent.Reconnecting)}),this.engine.on(ut.EngineEvent.Reconnected,()=>{this.state=lt.Connected,this.emit(ut.RoomEvent.Reconnected)}),this.engine.on(ut.EngineEvent.SignalConnected,()=>{this.state===lt.Reconnecting&&this.sendSyncState()}),this.engine.client.onConnectionQuality=this.handleConnectionQualityUpdate)}static getLocalDevices(Pt){return ct.default.getInstance().getDevices(Pt)}getParticipantByIdentity(Pt){for(const[,$t]of this.participants)if($t.identity===Pt)return $t;if(this.localParticipant.identity===Pt)return this.localParticipant}simulateScenario(Pt){let $t;switch(Pt){case"speaker":$t=it.SimulateScenario.fromPartial({speakerUpdate:3});break;case"node-failure":$t=it.SimulateScenario.fromPartial({nodeFailure:!0});break;case"server-leave":$t=it.SimulateScenario.fromPartial({serverLeave:!0});break;case"migration":$t=it.SimulateScenario.fromPartial({migration:!0});break}$t&&this.engine.client.sendSimulateScenario($t)}startAudio(){return m(this,void 0,void 0,function*(){this.acquireAudioContext();const Pt=[];this.participants.forEach($t=>{$t.audioTracks.forEach(bt=>{bt.track&&bt.track.attachedElements.forEach(Rt=>{Pt.push(Rt)})})});try{yield Promise.all(Pt.map($t=>$t.play())),this.handleAudioPlaybackStarted()}catch($t){throw this.handleAudioPlaybackFailed($t),$t}})}get canPlaybackAudio(){return this.audioEnabled}switchActiveDevice(Pt,$t){return m(this,void 0,void 0,function*(){if(Pt==="audioinput"){const bt=Array.from(this.localParticipant.audioTracks.values()).filter(Rt=>Rt.source===_e.Track.Source.Microphone);yield Promise.all(bt.map(Rt=>{var Ct;return(Ct=Rt.audioTrack)===null||Ct===void 0?void 0:Ct.setDeviceId($t)})),this.options.audioCaptureDefaults.deviceId=$t}else if(Pt==="videoinput"){const bt=Array.from(this.localParticipant.videoTracks.values()).filter(Rt=>Rt.source===_e.Track.Source.Camera);yield Promise.all(bt.map(Rt=>{var Ct;return(Ct=Rt.videoTrack)===null||Ct===void 0?void 0:Ct.setDeviceId($t)})),this.options.videoCaptureDefaults.deviceId=$t}else if(Pt==="audiooutput"){const bt=[];this.participants.forEach(Rt=>{Rt.audioTracks.forEach(Ct=>{Ct.isSubscribed&&Ct.track&&Ct.track.attachedElements.forEach(vt=>{bt.push(vt)})})}),yield Promise.all(bt.map(Rt=>m(this,void 0,void 0,function*(){"setSinkId"in Rt&&(yield Rt.setSinkId($t))})))}})}onTrackAdded(Pt,$t,bt){const Rt=ot.unpackStreamId($t.id),Ct=Rt[0];let vt=Rt[1];(!vt||vt==="")&&(vt=Pt.id),this.getOrCreateParticipant(Ct).addSubscribedMediaTrack(Pt,vt,$t,bt,this.options.adaptiveStream)}handleDisconnect(Pt=!0){this.state!==lt.Disconnected&&(this.participants.forEach($t=>{$t.tracks.forEach(bt=>{$t.unpublishTrack(bt.trackSid)})}),this.localParticipant.tracks.forEach($t=>{var bt,Rt;$t.track&&this.localParticipant.unpublishTrack($t.track),Pt&&((bt=$t.track)===null||bt===void 0||bt.detach(),(Rt=$t.track)===null||Rt===void 0||Rt.stop())}),this.participants.clear(),this.activeSpeakers=[],this.audioContext&&(this.audioContext.close(),this.audioContext=void 0),window.removeEventListener("beforeunload",this.onBeforeUnload),navigator.mediaDevices.removeEventListener("devicechange",this.handleDeviceChange),this.state=lt.Disconnected,this.emit(ut.RoomEvent.Disconnected))}handleParticipantDisconnected(Pt,$t){this.participants.delete(Pt),$t&&($t.tracks.forEach(bt=>{$t.unpublishTrack(bt.trackSid)}),this.emit(ut.RoomEvent.ParticipantDisconnected,$t))}acquireAudioContext(){this.audioContext&&this.audioContext.close();const Pt=window.AudioContext||window.webkitAudioContext;Pt&&(this.audioContext=new Pt)}getOrCreateParticipant(Pt,$t){let bt=this.participants.get(Pt);return bt||($t?bt=St.default.fromParticipantInfo(this.engine.client,$t):bt=new St.default(this.engine.client,Pt,""),this.participants.set(Pt,bt),bt.on(ut.ParticipantEvent.TrackPublished,Rt=>{this.emit(ut.RoomEvent.TrackPublished,Rt,bt)}).on(ut.ParticipantEvent.TrackSubscribed,(Rt,Ct)=>{Rt.kind===_e.Track.Kind.Audio&&(Rt.on(ut.TrackEvent.AudioPlaybackStarted,this.handleAudioPlaybackStarted),Rt.on(ut.TrackEvent.AudioPlaybackFailed,this.handleAudioPlaybackFailed)),this.emit(ut.RoomEvent.TrackSubscribed,Rt,Ct,bt)}).on(ut.ParticipantEvent.TrackUnpublished,Rt=>{this.emit(ut.RoomEvent.TrackUnpublished,Rt,bt)}).on(ut.ParticipantEvent.TrackUnsubscribed,(Rt,Ct)=>{this.emit(ut.RoomEvent.TrackUnsubscribed,Rt,Ct,bt)}).on(ut.ParticipantEvent.TrackSubscriptionFailed,Rt=>{this.emit(ut.RoomEvent.TrackSubscriptionFailed,Rt,bt)}).on(ut.ParticipantEvent.TrackMuted,Rt=>{this.emit(ut.RoomEvent.TrackMuted,Rt,bt)}).on(ut.ParticipantEvent.TrackUnmuted,Rt=>{this.emit(ut.RoomEvent.TrackUnmuted,Rt,bt)}).on(ut.ParticipantEvent.MetadataChanged,Rt=>{this.emit(ut.RoomEvent.MetadataChanged,Rt,bt)}).on(ut.ParticipantEvent.ParticipantMetadataChanged,Rt=>{this.emit(ut.RoomEvent.ParticipantMetadataChanged,Rt,bt)}).on(ut.ParticipantEvent.ConnectionQualityChanged,Rt=>{this.emit(ut.RoomEvent.ConnectionQualityChanged,Rt,bt)})),bt}sendSyncState(){var Pt;if(this.engine.subscriber===void 0||this.engine.subscriber.pc.localDescription===null)return;const $t=this.engine.subscriber.pc.localDescription,bt=((Pt=this.connOptions)===null||Pt===void 0?void 0:Pt.autoSubscribe)||!1,Rt=new Array;this.participants.forEach(Ct=>{Ct.tracks.forEach(vt=>{vt.isSubscribed!==bt&&Rt.push(vt.trackSid)})}),this.engine.client.sendSyncState({answer:k.toProtoSessionDescription({sdp:$t.sdp,type:$t.type}),subscription:{trackSids:Rt,subscribe:!bt,participantTracks:[]},publishTracks:this.localParticipant.publishedTracksInfo()})}emit(Pt,...$t){return et.default.debug("room event",Pt,...$t),super.emit(Pt,...$t)}}a.default=Ot})(Room);var connect={};(function(a){var s=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(st,ut,pt,St){St===void 0&&(St=pt),Object.defineProperty(st,St,{enumerable:!0,get:function(){return ut[pt]}})}:function(st,ut,pt,St){St===void 0&&(St=pt),st[St]=ut[pt]}),d=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(st,ut){Object.defineProperty(st,"default",{enumerable:!0,value:ut})}:function(st,ut){st.default=ut}),c=commonjsGlobal&&commonjsGlobal.__importStar||function(st){if(st&&st.__esModule)return st;var ut={};if(st!=null)for(var pt in st)pt!=="default"&&Object.prototype.hasOwnProperty.call(st,pt)&&s(ut,st,pt);return d(ut,st),ut},m=commonjsGlobal&&commonjsGlobal.__awaiter||function(st,ut,pt,St){function _t(ht){return ht instanceof pt?ht:new pt(function(_e){_e(ht)})}return new(pt||(pt=Promise))(function(ht,_e){function ot(It){try{Ot(St.next(It))}catch(Pt){_e(Pt)}}function lt(It){try{Ot(St.throw(It))}catch(Pt){_e(Pt)}}function Ot(It){It.done?ht(It.value):_t(It.value).then(ot,lt)}Ot((St=St.apply(st,ut||[])).next())})},g=commonjsGlobal&&commonjsGlobal.__importDefault||function(st){return st&&st.__esModule?st:{default:st}};Object.defineProperty(a,"__esModule",{value:!0}),a.connect=a.version=void 0;const b=c(logger),k=errors,et=events$1,nt=g(Room);var it=version;Object.defineProperty(a,"version",{enumerable:!0,get:function(){return it.version}});function ct(st,ut,pt){var St,_t,ht,_e;return m(this,void 0,void 0,function*(){pt!=null||(pt={}),pt.adaptiveStream===void 0&&(pt.adaptiveStream=pt.autoManageVideo),b.setLogLevel((St=pt.logLevel)!==null&&St!==void 0?St:b.LogLevel.warn);const ot=(_t=pt.rtcConfig)!==null&&_t!==void 0?_t:{};pt.iceServers&&(ot.iceServers=pt.iceServers);const lt=new nt.default(pt);yield lt.connect(st,ut,pt);const Ot=(ht=pt.audio)!==null&&ht!==void 0?ht:!1,It=(_e=pt.video)!==null&&_e!==void 0?_e:!1;return(Ot||It)&&setTimeout(()=>m(this,void 0,void 0,function*(){let Pt;if(Ot&&It)try{yield lt.localParticipant.enableCameraAndMicrophone()}catch($t){const bt=k.MediaDeviceFailure.getFailure($t);if(b.default.warn("received error while creating media",bt),$t instanceof Error&&b.default.warn($t.message),bt===k.MediaDeviceFailure.NotFound||bt===k.MediaDeviceFailure.DeviceInUse)try{yield lt.localParticipant.setMicrophoneEnabled(!0)}catch(Rt){Pt=Rt}else Pt=$t}else if(Ot)try{yield lt.localParticipant.setMicrophoneEnabled(!0)}catch($t){Pt=$t}else if(It)try{yield lt.localParticipant.setCameraEnabled(!0)}catch($t){Pt=$t}Pt&&(lt.emit(et.RoomEvent.MediaDevicesError,Pt),b.default.error("could not create media",Pt))})),lt})}a.connect=ct})(connect);var options={};Object.defineProperty(options,"__esModule",{value:!0});var create$1={},__awaiter=commonjsGlobal&&commonjsGlobal.__awaiter||function(a,s,d,c){function m(g){return g instanceof d?g:new d(function(b){b(g)})}return new(d||(d=Promise))(function(g,b){function k(it){try{nt(c.next(it))}catch(ct){b(ct)}}function et(it){try{nt(c.throw(it))}catch(ct){b(ct)}}function nt(it){it.done?g(it.value):m(it.value).then(k,et)}nt((c=c.apply(a,s||[])).next())})},__importDefault=commonjsGlobal&&commonjsGlobal.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(create$1,"__esModule",{value:!0});create$1.createLocalScreenTracks=create$1.createLocalAudioTrack=create$1.createLocalVideoTrack=create$1.createLocalTracks=void 0;const errors_1=errors,publishUtils_1=publishUtils,defaults_1=defaults,LocalAudioTrack_1=__importDefault(LocalAudioTrack$1),LocalVideoTrack_1=__importDefault(LocalVideoTrack$1),options_1=options$1,Track_1=Track,utils_1=utils;function createLocalTracks(a){var s,d;return __awaiter(this,void 0,void 0,function*(){a!=null||(a={}),(s=a.audio)!==null&&s!==void 0||(a.audio=!0),(d=a.video)!==null&&d!==void 0||(a.video=!0);const c=utils_1.mergeDefaultOptions(a,defaults_1.audioDefaults,defaults_1.videoDefaults),m=utils_1.constraintsForOptions(c);return(yield navigator.mediaDevices.getUserMedia(m)).getTracks().map(b=>{const k=b.kind==="audio";k?a.audio:a.video;let et;const nt=k?m.audio:m.video;typeof nt!="boolean"&&(et=nt);const it=publishUtils_1.mediaTrackToLocalTrack(b,et);return it.kind===Track_1.Track.Kind.Video?it.source=Track_1.Track.Source.Camera:it.kind===Track_1.Track.Kind.Audio&&(it.source=Track_1.Track.Source.Microphone),it})})}create$1.createLocalTracks=createLocalTracks;function createLocalVideoTrack(a){return __awaiter(this,void 0,void 0,function*(){return(yield createLocalTracks({audio:!1,video:a}))[0]})}create$1.createLocalVideoTrack=createLocalVideoTrack;function createLocalAudioTrack(a){return __awaiter(this,void 0,void 0,function*(){return(yield createLocalTracks({audio:a,video:!1}))[0]})}create$1.createLocalAudioTrack=createLocalAudioTrack;function createLocalScreenTracks(a){var s;return __awaiter(this,void 0,void 0,function*(){a===void 0&&(a={}),a.resolution===void 0&&(a.resolution=options_1.VideoPresets.fhd.resolution);let d=!0;a.resolution&&(d={width:a.resolution.width,height:a.resolution.height});const c=yield navigator.mediaDevices.getDisplayMedia({audio:(s=a.audio)!==null&&s!==void 0?s:!1,video:d}),m=c.getVideoTracks();if(m.length===0)throw new errors_1.TrackInvalidError("no video track found");const g=new LocalVideoTrack_1.default(m[0]);g.source=Track_1.Track.Source.ScreenShare;const b=[g];if(c.getAudioTracks().length>0){const k=new LocalAudioTrack_1.default(c.getAudioTracks()[0]);k.source=Track_1.Track.Source.ScreenShareAudio,b.push(k)}return b})}create$1.createLocalScreenTracks=createLocalScreenTracks;var types={};Object.defineProperty(types,"__esModule",{value:!0});(function(a){var s=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(Ot,It,Pt,$t){$t===void 0&&($t=Pt),Object.defineProperty(Ot,$t,{enumerable:!0,get:function(){return It[Pt]}})}:function(Ot,It,Pt,$t){$t===void 0&&($t=Pt),Ot[$t]=It[Pt]}),d=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(Ot,It){Object.defineProperty(Ot,"default",{enumerable:!0,value:It})}:function(Ot,It){Ot.default=It}),c=commonjsGlobal&&commonjsGlobal.__importStar||function(Ot){if(Ot&&Ot.__esModule)return Ot;var It={};if(Ot!=null)for(var Pt in Ot)Pt!=="default"&&Object.prototype.hasOwnProperty.call(Ot,Pt)&&s(It,Ot,Pt);return d(It,Ot),It},m=commonjsGlobal&&commonjsGlobal.__exportStar||function(Ot,It){for(var Pt in Ot)Pt!=="default"&&!Object.prototype.hasOwnProperty.call(It,Pt)&&s(It,Ot,Pt)},g=commonjsGlobal&&commonjsGlobal.__importDefault||function(Ot){return Ot&&Ot.__esModule?Ot:{default:Ot}};Object.defineProperty(a,"__esModule",{value:!0}),a.VideoQuality=a.TrackPublication=a.RemoteTrackPublication=a.RemoteVideoTrack=a.RemoteAudioTrack=a.RemoteTrack=a.LocalTrackPublication=a.LocalTrack=a.LocalVideoTrack=a.LocalAudioTrack=a.LocalParticipant=a.RemoteParticipant=a.Participant=a.ConnectionQuality=a.DataPacket_Kind=a.RoomState=a.Room=a.setLogLevel=void 0;const b=logger;Object.defineProperty(a,"setLogLevel",{enumerable:!0,get:function(){return b.setLogLevel}});const k=livekit_models;Object.defineProperty(a,"DataPacket_Kind",{enumerable:!0,get:function(){return k.DataPacket_Kind}}),Object.defineProperty(a,"VideoQuality",{enumerable:!0,get:function(){return k.VideoQuality}});const et=g(LocalParticipant$1);a.LocalParticipant=et.default;const nt=c(Participant$1);a.Participant=nt.default,Object.defineProperty(a,"ConnectionQuality",{enumerable:!0,get:function(){return nt.ConnectionQuality}});const it=g(RemoteParticipant$1);a.RemoteParticipant=it.default;const ct=c(Room);a.Room=ct.default,Object.defineProperty(a,"RoomState",{enumerable:!0,get:function(){return ct.RoomState}});const st=g(LocalAudioTrack$1);a.LocalAudioTrack=st.default;const ut=g(LocalTrack$1);a.LocalTrack=ut.default;const pt=g(LocalTrackPublication$1);a.LocalTrackPublication=pt.default;const St=g(LocalVideoTrack$1);a.LocalVideoTrack=St.default;const _t=g(RemoteAudioTrack$1);a.RemoteAudioTrack=_t.default;const ht=g(RemoteTrack$1);a.RemoteTrack=ht.default;const _e=g(RemoteTrackPublication$1);a.RemoteTrackPublication=_e.default;const ot=g(RemoteVideoTrack$1);a.RemoteVideoTrack=ot.default;const lt=TrackPublication;Object.defineProperty(a,"TrackPublication",{enumerable:!0,get:function(){return lt.TrackPublication}}),m(connect,a),m(options,a),m(errors,a),m(events$1,a),m(create$1,a),m(options$1,a),m(Track,a),m(types,a),m(version,a)})(dist);var SpecialEvent=(a=>(a.Chat="Chat",a))(SpecialEvent||{});const decoder$1=new TextDecoder,encoder$1=new TextEncoder;class RoomsManager{constructor(){yn(this,"rooms");this.rooms=new Map,this.addRoom=this.addRoom.bind(this),this.ensureRoom=this.ensureRoom.bind(this),this.removeRoom=this.removeRoom.bind(this)}addRoom(s,d,c){const m=new RoomContext(s,d,c,this);return this.rooms.set(d,m),m}ensureRoom(s,d,c){return this.rooms.get(d)?(this.rooms.get(d).token=c,this.rooms.get(d)):this.addRoom(s,d,c)}async removeRoom(s){const d=this.rooms.get(s);if(!dist.Room)throw new Error("room not found!");if(d.isConnecting)throw new Error("Cannot remove room: Room is in connecting state");d.livekitRoom&&await d.livekitRoom.disconnect(!0),this.rooms.delete(s)}}class RoomContext{constructor(s,d,c,m){yn(this,"_baseUrl");yn(this,"_chatHistory");yn(this,"_connectListeners");yn(this,"_roomEventListenerRegistry");yn(this,"_localParticipantEventListenerRegistry");yn(this,"_specialEventListenerRegistry");yn(this,"_jwt");yn(this,"_manager");yn(this,"_apiClient");yn(this,"audioTracks");yn(this,"isConnecting");yn(this,"livekitRoom");yn(this,"participants");yn(this,"roomName");yn(this,"_admin");this._baseUrl=s,this._connectListeners=[],this._roomEventListenerRegistry={},this._jwt=c,Object.values(dist.RoomEvent).forEach(g=>{this._roomEventListenerRegistry[g]=new Set}),this._localParticipantEventListenerRegistry={},Object.values(dist.ParticipantEvent).forEach(g=>{this._localParticipantEventListenerRegistry[g]=new Set}),this._specialEventListenerRegistry={},this._manager=m,this._chatHistory=[],this.roomName=d,this.audioTracks=[],this.participants=[],this.isConnecting=!1,this.subscribeToRoomEvent(dist.RoomEvent.DataReceived,(g,b,k)=>{const et=decoder$1.decode(g);switch(JSON.parse(et).type){case"ChatMessage":return this._appendChat(g,b,k);default:return}}),this.connect=this.connect.bind(this),this.subscribeToRoomEvent=this.subscribeToRoomEvent.bind(this),this.subscribeToConnect=this.subscribeToConnect.bind(this),this.subscribeToLocalParticipantEvent=this.subscribeToLocalParticipantEvent.bind(this),this.subscribeToSpecialEvent=this.subscribeToSpecialEvent.bind(this),this.unsubscribeFromRoomEvent=this.unsubscribeFromRoomEvent.bind(this),this.unsubscribeFromSpecialEvent=this.unsubscribeFromSpecialEvent.bind(this),this.unsubscribeFromConnect=this.unsubscribeFromConnect.bind(this),this.unsubscribeFromLocalParticipantEvent=this.unsubscribeFromLocalParticipantEvent.bind(this),this.sendChatMessage=this.sendChatMessage.bind(this),this.kickParticipant=this.kickParticipant.bind(this),this.muteTrackAsAdmin=this.muteTrackAsAdmin.bind(this),this._updateParticipants=this._updateParticipants.bind(this),this.subscribeToRoomEvent(dist.RoomEvent.ParticipantConnected,this._updateParticipants),this.subscribeToRoomEvent(dist.RoomEvent.ParticipantDisconnected,this._updateParticipants),this.subscribeToRoomEvent(dist.RoomEvent.TrackSubscribed,this._updateParticipants),this.subscribeToRoomEvent(dist.RoomEvent.TrackUnsubscribed,this._updateParticipants),this.subscribeToRoomEvent(dist.RoomEvent.LocalTrackPublished,this._updateParticipants),this.subscribeToRoomEvent(dist.RoomEvent.LocalTrackUnpublished,this._updateParticipants),this.subscribeToRoomEvent(dist.RoomEvent.Disconnected,()=>{this.livekitRoom.removeAllListeners(),this.livekitRoom=null,this._updateParticipants()})}bindApiClient(s){this._apiClient=s}get isAdmin(){return o(this._jwt).video.roomAdmin}set isAdmin(s){log$1.warn("isAdmin cannot be set")}get token(){return this._jwt}set token(s){this._jwt=s}get url(){return this._baseUrl}set url(s){}get chatHistory(){return this._chatHistory}set chatHistory(s){this._chatHistory=s}_updateParticipants(){if(!this.livekitRoom||this.livekitRoom.state===dist.RoomState.Disconnected){this.participants=[];return}else{const s=Array.from(this.livekitRoom.participants.values()),d=[this.livekitRoom.localParticipant];d.push(...s),this.participants=d}}async kickParticipant(s){if(this._admin)this._admin.removeParticipant(this.roomName,s);else throw new Error("no admin permissions")}muteTrackAsAdmin(s){if(this._admin){const d=this.participants.find(c=>Array.from(c.audioTracks.values()).find(m=>m.trackSid===s));this._admin.mutePublishedTrack(this.roomName,d==null?void 0:d.identity,s,!0)}else throw new Error("no admin permissions")}_appendChat(s,d,c){const m=decoder$1.decode(s),g=JSON.parse(m),b=d.identity,k=d.name,et=vn(jt({},g),{displayName:k,sender:b});this.chatHistory=[...this.chatHistory,et],this._triggerSpecialEvents("Chat",et)}subscribeToConnect(s){return this._connectListeners.push(s),()=>this.unsubscribeFromConnect(s)}unsubscribeFromConnect(s){this._connectListeners=this._connectListeners.filter(d=>d!==s)}subscribeToSpecialEvent(s,d){return this._specialEventListenerRegistry[s]||(this._specialEventListenerRegistry[s]=new Set),this._specialEventListenerRegistry[s].add(d),()=>{this.unsubscribeFromSpecialEvent(s,d)}}unsubscribeFromSpecialEvent(s,d){this._specialEventListenerRegistry[s]||(this._specialEventListenerRegistry[s]=new Set),this._specialEventListenerRegistry[s].delete(d)}_triggerSpecialEvents(s,...d){this._specialEventListenerRegistry[s]||(this._specialEventListenerRegistry[s]=new Set),this._specialEventListenerRegistry[s].forEach(c=>{c(...d)})}async connect(s){var d,c;try{if(this.livekitRoom&&this.livekitRoom.state==="connected")return this.livekitRoom;if(this.isConnecting)return null;this.isConnecting=!0;const m=await dist.connect(`wss://${this._baseUrl}`,this._jwt,s);return this.livekitRoom=m,this.isConnecting=!1,Object.values(dist.RoomEvent).forEach(g=>{this.livekitRoom.on(g,(...b)=>{this._roomEventListenerRegistry[g].forEach(k=>{k(...b)})})}),Object.values(dist.ParticipantEvent).forEach(g=>{this.livekitRoom.localParticipant.on(g,(...b)=>{this._localParticipantEventListenerRegistry[g].forEach(k=>{k(...b)})})}),this._updateParticipants(),this._connectListeners.forEach(g=>g(this.livekitRoom)),lib$2.LiveKitUtils.isRoomAdmin(this._jwt)?(log$1.info("Room: Granting admin permissions"),log$1.debug("Livekit server: ",(d=this._apiClient)==null?void 0:d.getLiveKitServer()),this._admin=new lib$2.LiveKitServer.RoomServiceClient((c=this._apiClient)==null?void 0:c.getLiveKitServer(),void 0,void 0,this._jwt)):log$1.debug("Room: Not an admin"),m}catch(m){this.isConnecting=!1,log$1.error(m)}}subscribeToLocalParticipantEvent(s,d){return this._localParticipantEventListenerRegistry[s]||(this._localParticipantEventListenerRegistry[s]=new Set),this._localParticipantEventListenerRegistry[s].add(d),()=>{this.unsubscribeFromLocalParticipantEvent(s,d)}}unsubscribeFromLocalParticipantEvent(s,d){this._localParticipantEventListenerRegistry[s]||(this._localParticipantEventListenerRegistry[s]=new Set),this._localParticipantEventListenerRegistry[s].delete(d)}subscribeToRoomEvent(s,d){return this._roomEventListenerRegistry[s]||(this._roomEventListenerRegistry[s]=new Set),this._roomEventListenerRegistry[s].add(d),()=>{this.unsubscribeFromRoomEvent(s,d)}}unsubscribeFromRoomEvent(s,d){this._roomEventListenerRegistry[s]||(this._roomEventListenerRegistry[s]=new Set),this._roomEventListenerRegistry[s].delete(d)}sendChatMessage(s){const{message:d,recipients:c,metadata:m}=s;if(!this.livekitRoom||this.livekitRoom.state!=="connected")return;const g={type:"ChatMessage",recipients:c,metadata:m,content:d,timestamp:Date.now()},b=JSON.stringify(g),k=encoder$1.encode(b);if(vn(jt({},g),{sender:this.livekitRoom.localParticipant.identity,displayName:this.livekitRoom.localParticipant.identity}),Boolean(c)){const et=c.map(this.livekitRoom.getParticipantByIdentity);this.livekitRoom.localParticipant.publishData(k,dist.DataPacket_Kind.RELIABLE,et).then(()=>{this._appendChat(k,this.livekitRoom.localParticipant,dist.DataPacket_Kind.RELIABLE)})}else this.livekitRoom.localParticipant.publishData(k,dist.DataPacket_Kind.RELIABLE).then(()=>{this._appendChat(k,this.livekitRoom.localParticipant,dist.DataPacket_Kind.RELIABLE)})}}const webrtcManager=new RoomsManager,encoder=new TextEncoder,decoder=new TextDecoder,simpleRooms=new Map,getRoom=a=>{if(!a)return null;if(simpleRooms.get(a))return simpleRooms.get(a);const s=webrtcManager.rooms.get(a);if(!s)return null;const c=s.livekitRoom.localParticipant;c||log$1.warn("No local participant!");const m={useTracks:new Set,useTrack:new Map,useParticipants:new Set,useParticipant:new Map,useChatHistory:new Set};let g={tracks:[],participants:[],result:{participants:[],tracks:[]},chat:s.chatHistory};const b=()=>{const ut=s.participants,pt=ut.flatMap(_t=>_t.getTracks().map(ht=>vn(jt({},ht),{participant:_t}))),St={participants:ut.map(_t=>({id:_t.identity,isSelf:_t===c,connectionQuality:_t.connectionQuality,isSpeaking:_t.isSpeaking,displayName:_t.name,trackIds:pt.filter(ht=>ht.participant.sid===_t.sid).map(ht=>ht.trackSid)})),tracks:pt.map(_t=>{var ht,_e,ot;return{mediaStreamTrack:(ht=_t.track)==null?void 0:ht.mediaStreamTrack,id:_t.trackSid,participantId:(_e=_t.participant)==null?void 0:_e.identity,isMuted:(ot=_t.track)==null?void 0:ot.isMuted,type:_t.source}})};g={tracks:pt,participants:ut,result:St,chat:s.chatHistory},m.useTracks.forEach(_t=>_t(St.tracks)),m.useTrack.forEach((_t,ht)=>{ht(nt(_t))}),m.useParticipants.forEach(_t=>_t(St.participants)),m.useParticipant.forEach((_t,ht)=>{ht(it(_t))}),m.useChatHistory.forEach(_t=>{_t(g.chat)})};[dist.RoomEvent.ParticipantConnected,dist.RoomEvent.ParticipantDisconnected,dist.RoomEvent.ActiveSpeakersChanged,dist.RoomEvent.AudioPlaybackStatusChanged,dist.RoomEvent.Disconnected,dist.RoomEvent.TrackSubscribed,dist.RoomEvent.TrackUnsubscribed,dist.RoomEvent.LocalTrackPublished,dist.RoomEvent.LocalTrackUnpublished,dist.RoomEvent.ConnectionQualityChanged,dist.RoomEvent.TrackMuted,dist.RoomEvent.TrackUnmuted,dist.RoomEvent.TrackStreamStateChanged].map(ut=>s.subscribeToRoomEvent(ut,b)).push(s.subscribeToSpecialEvent(SpecialEvent.Chat,b));const nt=ut=>g.result.tracks.find(pt=>pt.id===ut),it=ut=>g.result.participants.find(pt=>pt.id===ut),ct=(ut,pt)=>{const St=c.getTracks().find(_t=>_t.trackSid===ut);St&&(pt?St.mute():St.unmute())},st={id:s.roomName,participantId:c.identity,setTrackEnabled:ct,setCameraEnabled:(ut=!0)=>{c.setCameraEnabled(ut)},setMicrophoneEnabled:(ut=!0)=>{c.setMicrophoneEnabled(ut)},setCamera:async(ut={})=>{var ht;const pt=c.getTracks().find(_e=>_e.source===dist.Track.Source.Camera),St=await c.createTracks({video:{deviceId:ut.deviceId,resolution:ut.resolution||{width:1280,height:720,frameRate:30,aspectRatio:16/9}}});pt!=null&&pt.isMuted&&St.forEach(_e=>{_e.mute()});const _t=await Promise.all(St.map(_e=>c.publishTrack(_e)));return pt&&c.unpublishTrack(pt.track),nt((ht=_t[0])==null?void 0:ht.trackSid)},setMicrophone:async ut=>{var ht;const pt=c.getTracks().find(_e=>_e.source===dist.Track.Source.Microphone),St=await c.createTracks({audio:ut||!0});pt!=null&&pt.isMuted&&St.forEach(_e=>{_e.mute()});const _t=await Promise.all(St.map(_e=>c.publishTrack(_e)));return pt&&c.unpublishTrack(pt.track),nt((ht=_t[0])==null?void 0:ht.trackSid)},addCamera:async(ut={})=>{var _t;const pt=await c.createTracks({video:{deviceId:ut.deviceId,resolution:ut.resolution||{width:1280,height:720,frameRate:30,aspectRatio:1.7777777777777777}}}),St=await Promise.all(pt.map(ht=>c.publishTrack(ht)));return nt((_t=St[0])==null?void 0:_t.trackSid)},addScreen:async(ut={audio:!1})=>{const pt=await c.createScreenTracks(ut),St=await Promise.all(pt.map(_e=>c.publishTrack(_e))),_t=St.find(_e=>_e.kind==="video"),ht=St.find(_e=>_e.kind==="audio");return{screen:nt(_t==null?void 0:_t.trackSid),audio:nt(ht==null?void 0:ht.trackSid)}},removeTrack:async ut=>{const pt=g.tracks.find(St=>St.trackSid===ut);c.unpublishTrack(pt.track)},kickParticipant:s.kickParticipant,muteTrackAsAdmin:s.muteTrackAsAdmin,sendChatMessage:s.sendChatMessage,getTracks:()=>g.result.tracks,useTracks:ut=>(m.useTracks.add(ut),ut(g.result.tracks),()=>{m.useTracks.delete(ut)}),getTrack:nt,useTrack:(ut,pt)=>(m.useTrack.set(pt,ut),pt(nt(ut)),()=>{m.useTrack.delete(pt)}),getParticipant:it,getParticipants:()=>g.result.participants,useParticipants:ut=>(m.useParticipants.add(ut),ut(g.result.participants),()=>{m.useTracks.delete(ut)}),useParticipant:(ut,pt)=>(m.useParticipant.set(pt,ut),pt(it(ut)),()=>{m.useTrack.delete(pt)}),useChatHistory:ut=>(m.useChatHistory.add(ut),ut(g.chat),()=>{m.useChatHistory.delete(ut)}),sendData:(ut,pt)=>{const St=encoder.encode(JSON.stringify(ut)),_t=pt==null?void 0:pt.map(ht=>s.livekitRoom.getParticipantByIdentity(ht).sid);return c.publishData(St,dist.DataPacket_Kind.RELIABLE,_t)},onData:ut=>{const pt=(St,_t)=>{const ht=JSON.parse(decoder.decode(St));ut(ht,_t==null?void 0:_t.identity)};return s.livekitRoom.on(dist.RoomEvent.DataReceived,pt),()=>{s.livekitRoom.off(dist.RoomEvent.DataReceived,pt)}}};return b(),simpleRooms.set(a,st),st},{state}=CoreContext,getAccessTokenData=()=>{var a;return(a=CoreContext.clients.accessTokenClaims)==null?void 0:a.user},toBaseProject=a=>{const{compositor:s,videoApi:d,props:c}=a,{destinations:m,encoding:g,rendering:b,sources:k}=d.project,et={get:s.get,getRoot:s.getRoot,getParent:s.getParent};return Object.defineProperty(et,"nodes",{get(){return s.nodes.filter(nt=>!nt._deleted)}}),{scene:et,joinRoom:async(nt={})=>CoreContext.Command.joinRoom(jt({projectId:a.id},nt)),subscribe:nt=>CoreContext.subscribe((it,ct)=>{ct.projectId&&(ct==null?void 0:ct.projectId)===a.id&&nt(it,ct)}),destinations:m.map(toBaseDestination),sources:k.map(toBaseSource),encoding:g,rendering:b,id:a.id,hostDisplayName:a.props.hostDisplayName,props:c}},toBaseDestination=a=>({id:a.destinationId,enabled:a.enabled,address:a.address,props:a.metadata||{}}),toBaseSource=a=>({id:a.sourceId,address:a.address,props:a.metadata}),hydrateProject=async a=>{const s=a.metadata||{},d=await layoutToProject(s.layoutId);return{id:a.projectId,compositor:d,videoApi:{project:jt({},a)},layoutApi:{layoutId:s.layoutId},props:s}},sceneNodeToLayer=a=>{const{id:s,props:d={},children:c=[]}=a;return vn(jt({},s?{id:s}:{}),{type:d.type,data:jt({},d),children:c.map(m=>m.id)})},nodeToLayer=a=>({id:a.id,type:a.props.type,data:jt({},a.props),children:a.childIds.map(s=>s)}),layerToNode=a=>({id:String(a.id),props:jt({type:a.type},a.data),childIds:a.children.map(s=>String(s))}),layoutToProject=async a=>{const{layers:s}=await CoreContext.clients.LayoutApi().layer.listLayers({layoutId:a}),d=s.map(layerToNode),c=d.reduce((g,b)=>g?g.props.isRoot?g:b.props.isRoot||!d.some(k=>k.childIds.includes(b.id))?b:g:b,null),m=c?toSceneTree(d,c.id):null;return CoreContext.compositor.loadProject(m,a)},getProjectByLayoutId=a=>state.projects.find(s=>s.compositor.id===a),getProject=a=>state.projects.find(s=>s.id===a),{connectionId}=CoreContext,request=(a,s)=>{const d=s.map(c=>{const[m,g]=c;return{[m]:g}});return CoreContext.clients.LayoutApi().layer.batch({layoutId:a,layers:d,requestMetadata:{connectionId,layoutId:a}})},compositorAdapter=(a,s)=>({async insert(d={},c,m){const g=nodeToLayer({id:null,props:d,childIds:[]});c?g.type="child":g.type="root";const b=await CoreContext.clients.LayoutApi().layer.createLayer({layoutId:a,layer:vn(jt({},g),{requestMetadata:{connectionId,layoutId:a}})});if(b.code)throw new Error(b.message);const k=await s.get(c);if(c&&!k)throw Error("Parent not found with ID");if(k){const et=nodeToLayer(k),nt=insertAt$1(m,b.id,et.children),it={layoutId:a,layerId:et.id,layer:{children:nt,requestMetadata:{connectionId,layoutId:a}}};await CoreContext.clients.LayoutApi().layer.updateLayer(it)}return String(b.id)},async update(d,c={}){const m=s.get(d),g=nodeToLayer(vn(jt({},m),{props:jt(jt({},m.props),c)})),b={layoutId:a,layerId:g.id,layer:vn(jt({},g),{requestMetadata:{connectionId,layoutId:a}})};await CoreContext.clients.LayoutApi().layer.updateLayer(b)},async remove(d){const c=await s.getParent(d);if(c){const m=nodeToLayer(c),g=m.children.filter(k=>k!==d),b={layoutId:a,layerId:m.id,layer:{children:g,requestMetadata:{connectionId,layoutId:a}}};await CoreContext.clients.LayoutApi().layer.updateLayer(b)}await CoreContext.clients.LayoutApi().layer.deleteLayer({layoutId:a,layerId:d,payload:{requestMetadata:{connectionId,layoutId:a}}})},async reorder(d,c){const m=s.get(d),g=nodeToLayer(vn(jt({},m),{childIds:c}));await CoreContext.clients.LayoutApi().layer.updateLayer({layoutId:a,layerId:g.id,layer:{children:g.children,requestMetadata:{connectionId,layoutId:a}}})},async move(d,c,m){const g=s.get(d),b=s.get(s.getParent(d).id),k=nodeToLayer(vn(jt({},b),{childIds:pull$2(b.childIds,g.id)})),et=s.get(c),nt=nodeToLayer(vn(jt({},et),{childIds:insertAt$1(m,g.id,et.childIds)}));await Promise.all([CoreContext.clients.LayoutApi().layer.updateLayer({layoutId:a,layerId:k.id,layer:{children:k.children,requestMetadata:{connectionId,layoutId:a}}}),CoreContext.clients.LayoutApi().layer.updateLayer({layoutId:a,layerId:nt.id,layer:{children:nt.children,requestMetadata:{connectionId,layoutId:a}}})])},async batch(d){const c=d.map(([g,b])=>[g,sceneNodeToLayer(b)]),m=await request(a,c);return log$1.debug("Batch response",m),m}}),cloudHostname={dev:"cloud.stream.horse",stage:"cloud.stream.horse",prod:"cloud.golightstream.com"};var config=a=>({defaults:{previewTokenDuration:1e3*60*60,guestTokenDuration:1e3*60*60*12,transforms:{RoomParticipant:"LS-Room-Participant",Image:"LS-Image",Text:"LS-Text"}},compositorUrl:`https://${cloudHostname[a]}/studiosdk/v2/renderer/latest/compositor/`}),reactDom={exports:{}},reactDom_production_min={},react={exports:{}},react_production_min={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l=Symbol.for("react.element"),n=Symbol.for("react.portal"),p$1=Symbol.for("react.fragment"),q$1=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),t=Symbol.for("react.provider"),u=Symbol.for("react.context"),v=Symbol.for("react.forward_ref"),w=Symbol.for("react.suspense"),x=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),z$1=Symbol.iterator;function A$1(a){return a===null||typeof a!="object"?null:(a=z$1&&a[z$1]||a["@@iterator"],typeof a=="function"?a:null)}var B={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C=Object.assign,D$1={};function E$1(a,s,d){this.props=a,this.context=s,this.refs=D$1,this.updater=d||B}E$1.prototype.isReactComponent={};E$1.prototype.setState=function(a,s){if(typeof a!="object"&&typeof a!="function"&&a!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,a,s,"setState")};E$1.prototype.forceUpdate=function(a){this.updater.enqueueForceUpdate(this,a,"forceUpdate")};function F$1(){}F$1.prototype=E$1.prototype;function G$1(a,s,d){this.props=a,this.context=s,this.refs=D$1,this.updater=d||B}var H$1=G$1.prototype=new F$1;H$1.constructor=G$1;C(H$1,E$1.prototype);H$1.isPureReactComponent=!0;var I$1=Array.isArray,J$1=Object.prototype.hasOwnProperty,K$1={current:null},L={key:!0,ref:!0,__self:!0,__source:!0};function M$1(a,s,d){var c,m={},g=null,b=null;if(s!=null)for(c in s.ref!==void 0&&(b=s.ref),s.key!==void 0&&(g=""+s.key),s)J$1.call(s,c)&&!L.hasOwnProperty(c)&&(m[c]=s[c]);var k=arguments.length-2;if(k===1)m.children=d;else if(1<k){for(var et=Array(k),nt=0;nt<k;nt++)et[nt]=arguments[nt+2];m.children=et}if(a&&a.defaultProps)for(c in k=a.defaultProps,k)m[c]===void 0&&(m[c]=k[c]);return{$$typeof:l,type:a,key:g,ref:b,props:m,_owner:K$1.current}}function N$1(a,s){return{$$typeof:l,type:a.type,key:s,ref:a.ref,props:a.props,_owner:a._owner}}function O(a){return typeof a=="object"&&a!==null&&a.$$typeof===l}function escape(a){var s={"=":"=0",":":"=2"};return"$"+a.replace(/[=:]/g,function(d){return s[d]})}var P$1=/\/+/g;function Q$1(a,s){return typeof a=="object"&&a!==null&&a.key!=null?escape(""+a.key):s.toString(36)}function R$1(a,s,d,c,m){var g=typeof a;(g==="undefined"||g==="boolean")&&(a=null);var b=!1;if(a===null)b=!0;else switch(g){case"string":case"number":b=!0;break;case"object":switch(a.$$typeof){case l:case n:b=!0}}if(b)return b=a,m=m(b),a=c===""?"."+Q$1(b,0):c,I$1(m)?(d="",a!=null&&(d=a.replace(P$1,"$&/")+"/"),R$1(m,s,d,"",function(nt){return nt})):m!=null&&(O(m)&&(m=N$1(m,d+(!m.key||b&&b.key===m.key?"":(""+m.key).replace(P$1,"$&/")+"/")+a)),s.push(m)),1;if(b=0,c=c===""?".":c+":",I$1(a))for(var k=0;k<a.length;k++){g=a[k];var et=c+Q$1(g,k);b+=R$1(g,s,d,et,m)}else if(et=A$1(a),typeof et=="function")for(a=et.call(a),k=0;!(g=a.next()).done;)g=g.value,et=c+Q$1(g,k++),b+=R$1(g,s,d,et,m);else if(g==="object")throw s=String(a),Error("Objects are not valid as a React child (found: "+(s==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":s)+"). If you meant to render a collection of children, use an array instead.");return b}function S$1(a,s,d){if(a==null)return a;var c=[],m=0;return R$1(a,c,"","",function(g){return s.call(d,g,m++)}),c}function T(a){if(a._status===-1){var s=a._result;s=s(),s.then(function(d){(a._status===0||a._status===-1)&&(a._status=1,a._result=d)},function(d){(a._status===0||a._status===-1)&&(a._status=2,a._result=d)}),a._status===-1&&(a._status=0,a._result=s)}if(a._status===1)return a._result.default;throw a._result}var U$1={current:null},V$1={transition:null},W$1={ReactCurrentDispatcher:U$1,ReactCurrentBatchConfig:V$1,ReactCurrentOwner:K$1};react_production_min.Children={map:S$1,forEach:function(a,s,d){S$1(a,function(){s.apply(this,arguments)},d)},count:function(a){var s=0;return S$1(a,function(){s++}),s},toArray:function(a){return S$1(a,function(s){return s})||[]},only:function(a){if(!O(a))throw Error("React.Children.only expected to receive a single React element child.");return a}};react_production_min.Component=E$1;react_production_min.Fragment=p$1;react_production_min.Profiler=r;react_production_min.PureComponent=G$1;react_production_min.StrictMode=q$1;react_production_min.Suspense=w;react_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=W$1;react_production_min.cloneElement=function(a,s,d){if(a==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+a+".");var c=C({},a.props),m=a.key,g=a.ref,b=a._owner;if(s!=null){if(s.ref!==void 0&&(g=s.ref,b=K$1.current),s.key!==void 0&&(m=""+s.key),a.type&&a.type.defaultProps)var k=a.type.defaultProps;for(et in s)J$1.call(s,et)&&!L.hasOwnProperty(et)&&(c[et]=s[et]===void 0&&k!==void 0?k[et]:s[et])}var et=arguments.length-2;if(et===1)c.children=d;else if(1<et){k=Array(et);for(var nt=0;nt<et;nt++)k[nt]=arguments[nt+2];c.children=k}return{$$typeof:l,type:a.type,key:m,ref:g,props:c,_owner:b}};react_production_min.createContext=function(a){return a={$$typeof:u,_currentValue:a,_currentValue2:a,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},a.Provider={$$typeof:t,_context:a},a.Consumer=a};react_production_min.createElement=M$1;react_production_min.createFactory=function(a){var s=M$1.bind(null,a);return s.type=a,s};react_production_min.createRef=function(){return{current:null}};react_production_min.forwardRef=function(a){return{$$typeof:v,render:a}};react_production_min.isValidElement=O;react_production_min.lazy=function(a){return{$$typeof:y,_payload:{_status:-1,_result:a},_init:T}};react_production_min.memo=function(a,s){return{$$typeof:x,type:a,compare:s===void 0?null:s}};react_production_min.startTransition=function(a){var s=V$1.transition;V$1.transition={};try{a()}finally{V$1.transition=s}};react_production_min.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};react_production_min.useCallback=function(a,s){return U$1.current.useCallback(a,s)};react_production_min.useContext=function(a){return U$1.current.useContext(a)};react_production_min.useDebugValue=function(){};react_production_min.useDeferredValue=function(a){return U$1.current.useDeferredValue(a)};react_production_min.useEffect=function(a,s){return U$1.current.useEffect(a,s)};react_production_min.useId=function(){return U$1.current.useId()};react_production_min.useImperativeHandle=function(a,s,d){return U$1.current.useImperativeHandle(a,s,d)};react_production_min.useInsertionEffect=function(a,s){return U$1.current.useInsertionEffect(a,s)};react_production_min.useLayoutEffect=function(a,s){return U$1.current.useLayoutEffect(a,s)};react_production_min.useMemo=function(a,s){return U$1.current.useMemo(a,s)};react_production_min.useReducer=function(a,s,d){return U$1.current.useReducer(a,s,d)};react_production_min.useRef=function(a){return U$1.current.useRef(a)};react_production_min.useState=function(a){return U$1.current.useState(a)};react_production_min.useSyncExternalStore=function(a,s,d){return U$1.current.useSyncExternalStore(a,s,d)};react_production_min.useTransition=function(){return U$1.current.useTransition()};react_production_min.version="18.0.0-fc46dba67-20220329";react.exports=react_production_min;var React=react.exports,scheduler={exports:{}},scheduler_production_min={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(a){function s(Ft,Wt){var Ht=Ft.length;Ft.push(Wt);e:for(;0<Ht;){var Yt=Ht-1>>>1,$=Ft[Yt];if(0<m($,Wt))Ft[Yt]=Wt,Ft[Ht]=$,Ht=Yt;else break e}}function d(Ft){return Ft.length===0?null:Ft[0]}function c(Ft){if(Ft.length===0)return null;var Wt=Ft[0],Ht=Ft.pop();if(Ht!==Wt){Ft[0]=Ht;e:for(var Yt=0,$=Ft.length,rt=$>>>1;Yt<rt;){var mt=2*(Yt+1)-1,Vt=Ft[mt],at=mt+1,yt=Ft[at];if(0>m(Vt,Ht))at<$&&0>m(yt,Vt)?(Ft[Yt]=yt,Ft[at]=Ht,Yt=at):(Ft[Yt]=Vt,Ft[mt]=Ht,Yt=mt);else if(at<$&&0>m(yt,Ht))Ft[Yt]=yt,Ft[at]=Ht,Yt=at;else break e}}return Wt}function m(Ft,Wt){var Ht=Ft.sortIndex-Wt.sortIndex;return Ht!==0?Ht:Ft.id-Wt.id}if(typeof performance=="object"&&typeof performance.now=="function"){var g=performance;a.unstable_now=function(){return g.now()}}else{var b=Date,k=b.now();a.unstable_now=function(){return b.now()-k}}var et=[],nt=[],it=1,ct=null,st=3,ut=!1,pt=!1,St=!1,_t=typeof setTimeout=="function"?setTimeout:null,ht=typeof clearTimeout=="function"?clearTimeout:null,_e=typeof setImmediate!="undefined"?setImmediate:null;typeof navigator!="undefined"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function ot(Ft){for(var Wt=d(nt);Wt!==null;){if(Wt.callback===null)c(nt);else if(Wt.startTime<=Ft)c(nt),Wt.sortIndex=Wt.expirationTime,s(et,Wt);else break;Wt=d(nt)}}function lt(Ft){if(St=!1,ot(Ft),!pt)if(d(et)!==null)pt=!0,Mt(Ot);else{var Wt=d(nt);Wt!==null&&Nt(lt,Wt.startTime-Ft)}}function Ot(Ft,Wt){pt=!1,St&&(St=!1,ht($t),$t=-1),ut=!0;var Ht=st;try{for(ot(Wt),ct=d(et);ct!==null&&(!(ct.expirationTime>Wt)||Ft&&!Ct());){var Yt=ct.callback;if(typeof Yt=="function"){ct.callback=null,st=ct.priorityLevel;var $=Yt(ct.expirationTime<=Wt);Wt=a.unstable_now(),typeof $=="function"?ct.callback=$:ct===d(et)&&c(et),ot(Wt)}else c(et);ct=d(et)}if(ct!==null)var rt=!0;else{var mt=d(nt);mt!==null&&Nt(lt,mt.startTime-Wt),rt=!1}return rt}finally{ct=null,st=Ht,ut=!1}}var It=!1,Pt=null,$t=-1,bt=5,Rt=-1;function Ct(){return!(a.unstable_now()-Rt<bt)}function vt(){if(Pt!==null){var Ft=a.unstable_now();Rt=Ft;var Wt=!0;try{Wt=Pt(!0,Ft)}finally{Wt?Tt():(It=!1,Pt=null)}}else It=!1}var Tt;if(typeof _e=="function")Tt=function(){_e(vt)};else if(typeof MessageChannel!="undefined"){var wt=new MessageChannel,zt=wt.port2;wt.port1.onmessage=vt,Tt=function(){zt.postMessage(null)}}else Tt=function(){_t(vt,0)};function Mt(Ft){Pt=Ft,It||(It=!0,Tt())}function Nt(Ft,Wt){$t=_t(function(){Ft(a.unstable_now())},Wt)}a.unstable_IdlePriority=5,a.unstable_ImmediatePriority=1,a.unstable_LowPriority=4,a.unstable_NormalPriority=3,a.unstable_Profiling=null,a.unstable_UserBlockingPriority=2,a.unstable_cancelCallback=function(Ft){Ft.callback=null},a.unstable_continueExecution=function(){pt||ut||(pt=!0,Mt(Ot))},a.unstable_forceFrameRate=function(Ft){0>Ft||125<Ft?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):bt=0<Ft?Math.floor(1e3/Ft):5},a.unstable_getCurrentPriorityLevel=function(){return st},a.unstable_getFirstCallbackNode=function(){return d(et)},a.unstable_next=function(Ft){switch(st){case 1:case 2:case 3:var Wt=3;break;default:Wt=st}var Ht=st;st=Wt;try{return Ft()}finally{st=Ht}},a.unstable_pauseExecution=function(){},a.unstable_requestPaint=function(){},a.unstable_runWithPriority=function(Ft,Wt){switch(Ft){case 1:case 2:case 3:case 4:case 5:break;default:Ft=3}var Ht=st;st=Ft;try{return Wt()}finally{st=Ht}},a.unstable_scheduleCallback=function(Ft,Wt,Ht){var Yt=a.unstable_now();switch(typeof Ht=="object"&&Ht!==null?(Ht=Ht.delay,Ht=typeof Ht=="number"&&0<Ht?Yt+Ht:Yt):Ht=Yt,Ft){case 1:var $=-1;break;case 2:$=250;break;case 5:$=1073741823;break;case 4:$=1e4;break;default:$=5e3}return $=Ht+$,Ft={id:it++,callback:Wt,priorityLevel:Ft,startTime:Ht,expirationTime:$,sortIndex:-1},Ht>Yt?(Ft.sortIndex=Ht,s(nt,Ft),d(et)===null&&Ft===d(nt)&&(St?(ht($t),$t=-1):St=!0,Nt(lt,Ht-Yt))):(Ft.sortIndex=$,s(et,Ft),pt||ut||(pt=!0,Mt(Ot))),Ft},a.unstable_shouldYield=Ct,a.unstable_wrapCallback=function(Ft){var Wt=st;return function(){var Ht=st;st=Wt;try{return Ft.apply(this,arguments)}finally{st=Ht}}}})(scheduler_production_min);scheduler.exports=scheduler_production_min;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aa=react.exports,ba=scheduler.exports;function p(a){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+a,d=1;d<arguments.length;d++)s+="&args[]="+encodeURIComponent(arguments[d]);return"Minified React error #"+a+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var ca=new Set,da={};function ea(a,s){fa(a,s),fa(a+"Capture",s)}function fa(a,s){for(da[a]=s,a=0;a<s.length;a++)ca.add(s[a])}var ha=!(typeof window=="undefined"||typeof window.document=="undefined"||typeof window.document.createElement=="undefined"),ia=Object.prototype.hasOwnProperty,ja=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,ka={},la={};function ma(a){return ia.call(la,a)?!0:ia.call(ka,a)?!1:ja.test(a)?la[a]=!0:(ka[a]=!0,!1)}function na(a,s,d,c){if(d!==null&&d.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return c?!1:d!==null?!d.acceptsBooleans:(a=a.toLowerCase().slice(0,5),a!=="data-"&&a!=="aria-");default:return!1}}function oa(a,s,d,c){if(s===null||typeof s=="undefined"||na(a,s,d,c))return!0;if(c)return!1;if(d!==null)switch(d.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function q(a,s,d,c,m,g,b){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=c,this.attributeNamespace=m,this.mustUseProperty=d,this.propertyName=a,this.type=s,this.sanitizeURL=g,this.removeEmptyString=b}var z={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(a){z[a]=new q(a,0,!1,a,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(a){var s=a[0];z[s]=new q(s,1,!1,a[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(a){z[a]=new q(a,2,!1,a.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(a){z[a]=new q(a,2,!1,a,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(a){z[a]=new q(a,3,!1,a.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(a){z[a]=new q(a,3,!0,a,null,!1,!1)});["capture","download"].forEach(function(a){z[a]=new q(a,4,!1,a,null,!1,!1)});["cols","rows","size","span"].forEach(function(a){z[a]=new q(a,6,!1,a,null,!1,!1)});["rowSpan","start"].forEach(function(a){z[a]=new q(a,5,!1,a.toLowerCase(),null,!1,!1)});var pa=/[\-:]([a-z])/g;function qa(a){return a[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(a){var s=a.replace(pa,qa);z[s]=new q(s,1,!1,a,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(a){var s=a.replace(pa,qa);z[s]=new q(s,1,!1,a,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(a){var s=a.replace(pa,qa);z[s]=new q(s,1,!1,a,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(a){z[a]=new q(a,1,!1,a.toLowerCase(),null,!1,!1)});z.xlinkHref=new q("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(a){z[a]=new q(a,1,!1,a.toLowerCase(),null,!0,!0)});function ra(a,s,d,c){var m=z.hasOwnProperty(s)?z[s]:null;(m!==null?m.type!==0:c||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(oa(s,d,m,c)&&(d=null),c||m===null?ma(s)&&(d===null?a.removeAttribute(s):a.setAttribute(s,""+d)):m.mustUseProperty?a[m.propertyName]=d===null?m.type===3?!1:"":d:(s=m.attributeName,c=m.attributeNamespace,d===null?a.removeAttribute(s):(m=m.type,d=m===3||m===4&&d===!0?"":""+d,c?a.setAttributeNS(c,s,d):a.setAttribute(s,d))))}var sa=aa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ta=Symbol.for("react.element"),ua=Symbol.for("react.portal"),va=Symbol.for("react.fragment"),wa=Symbol.for("react.strict_mode"),xa=Symbol.for("react.profiler"),ya=Symbol.for("react.provider"),Aa=Symbol.for("react.context"),Ba=Symbol.for("react.forward_ref"),Ca=Symbol.for("react.suspense"),Da=Symbol.for("react.suspense_list"),Ea=Symbol.for("react.memo"),Fa=Symbol.for("react.lazy"),Ga=Symbol.for("react.offscreen"),Ha=Symbol.iterator;function Ia(a){return a===null||typeof a!="object"?null:(a=Ha&&a[Ha]||a["@@iterator"],typeof a=="function"?a:null)}var A=Object.assign,Ja;function Ka(a){if(Ja===void 0)try{throw Error()}catch(d){var s=d.stack.trim().match(/\n( *(at )?)/);Ja=s&&s[1]||""}return`
`+Ja+a}var La=!1;function Ma(a,s){if(!a||La)return"";La=!0;var d=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch(nt){var c=nt}Reflect.construct(a,[],s)}else{try{s.call()}catch(nt){c=nt}a.call(s.prototype)}else{try{throw Error()}catch(nt){c=nt}a()}}catch(nt){if(nt&&c&&typeof nt.stack=="string"){for(var m=nt.stack.split(`
`),g=c.stack.split(`
`),b=m.length-1,k=g.length-1;1<=b&&0<=k&&m[b]!==g[k];)k--;for(;1<=b&&0<=k;b--,k--)if(m[b]!==g[k]){if(b!==1||k!==1)do if(b--,k--,0>k||m[b]!==g[k]){var et=`
`+m[b].replace(" at new "," at ");return a.displayName&&et.includes("<anonymous>")&&(et=et.replace("<anonymous>",a.displayName)),et}while(1<=b&&0<=k);break}}}finally{La=!1,Error.prepareStackTrace=d}return(a=a?a.displayName||a.name:"")?Ka(a):""}function Na(a){switch(a.tag){case 5:return Ka(a.type);case 16:return Ka("Lazy");case 13:return Ka("Suspense");case 19:return Ka("SuspenseList");case 0:case 2:case 15:return a=Ma(a.type,!1),a;case 11:return a=Ma(a.type.render,!1),a;case 1:return a=Ma(a.type,!0),a;default:return""}}function Oa(a){if(a==null)return null;if(typeof a=="function")return a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case va:return"Fragment";case ua:return"Portal";case xa:return"Profiler";case wa:return"StrictMode";case Ca:return"Suspense";case Da:return"SuspenseList"}if(typeof a=="object")switch(a.$$typeof){case Aa:return(a.displayName||"Context")+".Consumer";case ya:return(a._context.displayName||"Context")+".Provider";case Ba:var s=a.render;return a=a.displayName,a||(a=s.displayName||s.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case Ea:return s=a.displayName||null,s!==null?s:Oa(a.type)||"Memo";case Fa:s=a._payload,a=a._init;try{return Oa(a(s))}catch{}}return null}function Pa(a){var s=a.type;switch(a.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return a=s.render,a=a.displayName||a.name||"",s.displayName||(a!==""?"ForwardRef("+a+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Oa(s);case 8:return s===wa?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function Qa(a){switch(typeof a){case"boolean":case"number":case"string":case"undefined":return a;case"object":return a;default:return""}}function Ra(a){var s=a.type;return(a=a.nodeName)&&a.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function Sa(a){var s=Ra(a)?"checked":"value",d=Object.getOwnPropertyDescriptor(a.constructor.prototype,s),c=""+a[s];if(!a.hasOwnProperty(s)&&typeof d!="undefined"&&typeof d.get=="function"&&typeof d.set=="function"){var m=d.get,g=d.set;return Object.defineProperty(a,s,{configurable:!0,get:function(){return m.call(this)},set:function(b){c=""+b,g.call(this,b)}}),Object.defineProperty(a,s,{enumerable:d.enumerable}),{getValue:function(){return c},setValue:function(b){c=""+b},stopTracking:function(){a._valueTracker=null,delete a[s]}}}}function Ta(a){a._valueTracker||(a._valueTracker=Sa(a))}function Ua(a){if(!a)return!1;var s=a._valueTracker;if(!s)return!0;var d=s.getValue(),c="";return a&&(c=Ra(a)?a.checked?"true":"false":a.value),a=c,a!==d?(s.setValue(a),!0):!1}function Va(a){if(a=a||(typeof document!="undefined"?document:void 0),typeof a=="undefined")return null;try{return a.activeElement||a.body}catch{return a.body}}function Wa(a,s){var d=s.checked;return A({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:d!=null?d:a._wrapperState.initialChecked})}function Xa(a,s){var d=s.defaultValue==null?"":s.defaultValue,c=s.checked!=null?s.checked:s.defaultChecked;d=Qa(s.value!=null?s.value:d),a._wrapperState={initialChecked:c,initialValue:d,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function Ya(a,s){s=s.checked,s!=null&&ra(a,"checked",s,!1)}function Za(a,s){Ya(a,s);var d=Qa(s.value),c=s.type;if(d!=null)c==="number"?(d===0&&a.value===""||a.value!=d)&&(a.value=""+d):a.value!==""+d&&(a.value=""+d);else if(c==="submit"||c==="reset"){a.removeAttribute("value");return}s.hasOwnProperty("value")?$a(a,s.type,d):s.hasOwnProperty("defaultValue")&&$a(a,s.type,Qa(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(a.defaultChecked=!!s.defaultChecked)}function ab(a,s,d){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var c=s.type;if(!(c!=="submit"&&c!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+a._wrapperState.initialValue,d||s===a.value||(a.value=s),a.defaultValue=s}d=a.name,d!==""&&(a.name=""),a.defaultChecked=!!a._wrapperState.initialChecked,d!==""&&(a.name=d)}function $a(a,s,d){(s!=="number"||Va(a.ownerDocument)!==a)&&(d==null?a.defaultValue=""+a._wrapperState.initialValue:a.defaultValue!==""+d&&(a.defaultValue=""+d))}var bb=Array.isArray;function cb(a,s,d,c){if(a=a.options,s){s={};for(var m=0;m<d.length;m++)s["$"+d[m]]=!0;for(d=0;d<a.length;d++)m=s.hasOwnProperty("$"+a[d].value),a[d].selected!==m&&(a[d].selected=m),m&&c&&(a[d].defaultSelected=!0)}else{for(d=""+Qa(d),s=null,m=0;m<a.length;m++){if(a[m].value===d){a[m].selected=!0,c&&(a[m].defaultSelected=!0);return}s!==null||a[m].disabled||(s=a[m])}s!==null&&(s.selected=!0)}}function db(a,s){if(s.dangerouslySetInnerHTML!=null)throw Error(p(91));return A({},s,{value:void 0,defaultValue:void 0,children:""+a._wrapperState.initialValue})}function eb(a,s){var d=s.value;if(d==null){if(d=s.children,s=s.defaultValue,d!=null){if(s!=null)throw Error(p(92));if(bb(d)){if(1<d.length)throw Error(p(93));d=d[0]}s=d}s==null&&(s=""),d=s}a._wrapperState={initialValue:Qa(d)}}function fb(a,s){var d=Qa(s.value),c=Qa(s.defaultValue);d!=null&&(d=""+d,d!==a.value&&(a.value=d),s.defaultValue==null&&a.defaultValue!==d&&(a.defaultValue=d)),c!=null&&(a.defaultValue=""+c)}function gb(a){var s=a.textContent;s===a._wrapperState.initialValue&&s!==""&&s!==null&&(a.value=s)}function hb(a){switch(a){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ib(a,s){return a==null||a==="http://www.w3.org/1999/xhtml"?hb(s):a==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":a}var jb,kb=function(a){return typeof MSApp!="undefined"&&MSApp.execUnsafeLocalFunction?function(s,d,c,m){MSApp.execUnsafeLocalFunction(function(){return a(s,d,c,m)})}:a}(function(a,s){if(a.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in a)a.innerHTML=s;else{for(jb=jb||document.createElement("div"),jb.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=jb.firstChild;a.firstChild;)a.removeChild(a.firstChild);for(;s.firstChild;)a.appendChild(s.firstChild)}});function lb(a,s){if(s){var d=a.firstChild;if(d&&d===a.lastChild&&d.nodeType===3){d.nodeValue=s;return}}a.textContent=s}var mb={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},nb=["Webkit","ms","Moz","O"];Object.keys(mb).forEach(function(a){nb.forEach(function(s){s=s+a.charAt(0).toUpperCase()+a.substring(1),mb[s]=mb[a]})});function ob(a,s,d){return s==null||typeof s=="boolean"||s===""?"":d||typeof s!="number"||s===0||mb.hasOwnProperty(a)&&mb[a]?(""+s).trim():s+"px"}function pb(a,s){a=a.style;for(var d in s)if(s.hasOwnProperty(d)){var c=d.indexOf("--")===0,m=ob(d,s[d],c);d==="float"&&(d="cssFloat"),c?a.setProperty(d,m):a[d]=m}}var qb=A({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function rb(a,s){if(s){if(qb[a]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(p(137,a));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(p(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(p(61))}if(s.style!=null&&typeof s.style!="object")throw Error(p(62))}}function sb(a,s){if(a.indexOf("-")===-1)return typeof s.is=="string";switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var tb=null;function ub(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&&(a=a.correspondingUseElement),a.nodeType===3?a.parentNode:a}var vb=null,wb=null,xb=null;function yb(a){if(a=zb(a)){if(typeof vb!="function")throw Error(p(280));var s=a.stateNode;s&&(s=Ab(s),vb(a.stateNode,a.type,s))}}function Bb(a){wb?xb?xb.push(a):xb=[a]:wb=a}function Cb(){if(wb){var a=wb,s=xb;if(xb=wb=null,yb(a),s)for(a=0;a<s.length;a++)yb(s[a])}}function Db(a,s){return a(s)}function Eb(){}var Fb=!1;function Gb(a,s,d){if(Fb)return a(s,d);Fb=!0;try{return Db(a,s,d)}finally{Fb=!1,(wb!==null||xb!==null)&&(Eb(),Cb())}}function Hb(a,s){var d=a.stateNode;if(d===null)return null;var c=Ab(d);if(c===null)return null;d=c[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(a=a.type,c=!(a==="button"||a==="input"||a==="select"||a==="textarea")),a=!c;break e;default:a=!1}if(a)return null;if(d&&typeof d!="function")throw Error(p(231,s,typeof d));return d}var Ib=!1;if(ha)try{var Jb={};Object.defineProperty(Jb,"passive",{get:function(){Ib=!0}}),window.addEventListener("test",Jb,Jb),window.removeEventListener("test",Jb,Jb)}catch(a){Ib=!1}function Kb(a,s,d,c,m,g,b,k,et){var nt=Array.prototype.slice.call(arguments,3);try{s.apply(d,nt)}catch(it){this.onError(it)}}var Lb=!1,Mb=null,Nb=!1,Ob=null,Pb={onError:function(a){Lb=!0,Mb=a}};function Qb(a,s,d,c,m,g,b,k,et){Lb=!1,Mb=null,Kb.apply(Pb,arguments)}function Rb(a,s,d,c,m,g,b,k,et){if(Qb.apply(this,arguments),Lb){if(Lb){var nt=Mb;Lb=!1,Mb=null}else throw Error(p(198));Nb||(Nb=!0,Ob=nt)}}function Sb(a){var s=a,d=a;if(a.alternate)for(;s.return;)s=s.return;else{a=s;do s=a,(s.flags&4098)!==0&&(d=s.return),a=s.return;while(a)}return s.tag===3?d:null}function Tb(a){if(a.tag===13){var s=a.memoizedState;if(s===null&&(a=a.alternate,a!==null&&(s=a.memoizedState)),s!==null)return s.dehydrated}return null}function Ub(a){if(Sb(a)!==a)throw Error(p(188))}function Vb(a){var s=a.alternate;if(!s){if(s=Sb(a),s===null)throw Error(p(188));return s!==a?null:a}for(var d=a,c=s;;){var m=d.return;if(m===null)break;var g=m.alternate;if(g===null){if(c=m.return,c!==null){d=c;continue}break}if(m.child===g.child){for(g=m.child;g;){if(g===d)return Ub(m),a;if(g===c)return Ub(m),s;g=g.sibling}throw Error(p(188))}if(d.return!==c.return)d=m,c=g;else{for(var b=!1,k=m.child;k;){if(k===d){b=!0,d=m,c=g;break}if(k===c){b=!0,c=m,d=g;break}k=k.sibling}if(!b){for(k=g.child;k;){if(k===d){b=!0,d=g,c=m;break}if(k===c){b=!0,c=g,d=m;break}k=k.sibling}if(!b)throw Error(p(189))}}if(d.alternate!==c)throw Error(p(190))}if(d.tag!==3)throw Error(p(188));return d.stateNode.current===d?a:s}function Wb(a){return a=Vb(a),a!==null?Xb(a):null}function Xb(a){if(a.tag===5||a.tag===6)return a;for(a=a.child;a!==null;){var s=Xb(a);if(s!==null)return s;a=a.sibling}return null}var Yb=ba.unstable_scheduleCallback,Zb=ba.unstable_cancelCallback,$b=ba.unstable_shouldYield,ac=ba.unstable_requestPaint,D=ba.unstable_now,bc=ba.unstable_getCurrentPriorityLevel,cc=ba.unstable_ImmediatePriority,dc=ba.unstable_UserBlockingPriority,ec=ba.unstable_NormalPriority,fc=ba.unstable_LowPriority,gc=ba.unstable_IdlePriority,hc=null,ic=null;function jc(a){if(ic&&typeof ic.onCommitFiberRoot=="function")try{ic.onCommitFiberRoot(hc,a,void 0,(a.current.flags&128)===128)}catch{}}var lc=Math.clz32?Math.clz32:kc,mc=Math.log,nc=Math.LN2;function kc(a){return a>>>=0,a===0?32:31-(mc(a)/nc|0)|0}var oc=64,pc=4194304;function qc(a){switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return a&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return a}}function rc(a,s){var d=a.pendingLanes;if(d===0)return 0;var c=0,m=a.suspendedLanes,g=a.pingedLanes,b=d&268435455;if(b!==0){var k=b&~m;k!==0?c=qc(k):(g&=b,g!==0&&(c=qc(g)))}else b=d&~m,b!==0?c=qc(b):g!==0&&(c=qc(g));if(c===0)return 0;if(s!==0&&s!==c&&(s&m)===0&&(m=c&-c,g=s&-s,m>=g||m===16&&(g&4194240)!==0))return s;if((c&4)!==0&&(c|=d&16),s=a.entangledLanes,s!==0)for(a=a.entanglements,s&=c;0<s;)d=31-lc(s),m=1<<d,c|=a[d],s&=~m;return c}function sc(a,s){switch(a){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function tc(a,s){for(var d=a.suspendedLanes,c=a.pingedLanes,m=a.expirationTimes,g=a.pendingLanes;0<g;){var b=31-lc(g),k=1<<b,et=m[b];et===-1?((k&d)===0||(k&c)!==0)&&(m[b]=sc(k,s)):et<=s&&(a.expiredLanes|=k),g&=~k}}function uc(a){return a=a.pendingLanes&-1073741825,a!==0?a:a&1073741824?1073741824:0}function vc(a){for(var s=[],d=0;31>d;d++)s.push(a);return s}function wc(a,s,d){a.pendingLanes|=s,s!==536870912&&(a.suspendedLanes=0,a.pingedLanes=0),a=a.eventTimes,s=31-lc(s),a[s]=d}function xc(a,s){var d=a.pendingLanes&~s;a.pendingLanes=s,a.suspendedLanes=0,a.pingedLanes=0,a.expiredLanes&=s,a.mutableReadLanes&=s,a.entangledLanes&=s,s=a.entanglements;var c=a.eventTimes;for(a=a.expirationTimes;0<d;){var m=31-lc(d),g=1<<m;s[m]=0,c[m]=-1,a[m]=-1,d&=~g}}function yc(a,s){var d=a.entangledLanes|=s;for(a=a.entanglements;d;){var c=31-lc(d),m=1<<c;m&s|a[c]&s&&(a[c]|=s),d&=~m}}var E=0;function zc(a){return a&=-a,1<a?4<a?(a&268435455)!==0?16:536870912:4:1}var Ac,Bc,Cc,Dc,Ec,Fc=!1,Gc=[],Hc=null,Ic=null,Jc=null,Kc=new Map,Lc=new Map,Mc=[],Nc="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Oc(a,s){switch(a){case"focusin":case"focusout":Hc=null;break;case"dragenter":case"dragleave":Ic=null;break;case"mouseover":case"mouseout":Jc=null;break;case"pointerover":case"pointerout":Kc.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Lc.delete(s.pointerId)}}function Pc(a,s,d,c,m,g){return a===null||a.nativeEvent!==g?(a={blockedOn:s,domEventName:d,eventSystemFlags:c,nativeEvent:g,targetContainers:[m]},s!==null&&(s=zb(s),s!==null&&Bc(s)),a):(a.eventSystemFlags|=c,s=a.targetContainers,m!==null&&s.indexOf(m)===-1&&s.push(m),a)}function Qc(a,s,d,c,m){switch(s){case"focusin":return Hc=Pc(Hc,a,s,d,c,m),!0;case"dragenter":return Ic=Pc(Ic,a,s,d,c,m),!0;case"mouseover":return Jc=Pc(Jc,a,s,d,c,m),!0;case"pointerover":var g=m.pointerId;return Kc.set(g,Pc(Kc.get(g)||null,a,s,d,c,m)),!0;case"gotpointercapture":return g=m.pointerId,Lc.set(g,Pc(Lc.get(g)||null,a,s,d,c,m)),!0}return!1}function Rc(a){var s=Sc(a.target);if(s!==null){var d=Sb(s);if(d!==null){if(s=d.tag,s===13){if(s=Tb(d),s!==null){a.blockedOn=s,Ec(a.priority,function(){Cc(d)});return}}else if(s===3&&d.stateNode.current.memoizedState.isDehydrated){a.blockedOn=d.tag===3?d.stateNode.containerInfo:null;return}}}a.blockedOn=null}function Tc(a){if(a.blockedOn!==null)return!1;for(var s=a.targetContainers;0<s.length;){var d=Uc(a.domEventName,a.eventSystemFlags,s[0],a.nativeEvent);if(d===null){d=a.nativeEvent;var c=new d.constructor(d.type,d);tb=c,d.target.dispatchEvent(c),tb=null}else return s=zb(d),s!==null&&Bc(s),a.blockedOn=d,!1;s.shift()}return!0}function Vc(a,s,d){Tc(a)&&d.delete(s)}function Wc(){Fc=!1,Hc!==null&&Tc(Hc)&&(Hc=null),Ic!==null&&Tc(Ic)&&(Ic=null),Jc!==null&&Tc(Jc)&&(Jc=null),Kc.forEach(Vc),Lc.forEach(Vc)}function Xc(a,s){a.blockedOn===s&&(a.blockedOn=null,Fc||(Fc=!0,ba.unstable_scheduleCallback(ba.unstable_NormalPriority,Wc)))}function Yc(a){function s(m){return Xc(m,a)}if(0<Gc.length){Xc(Gc[0],a);for(var d=1;d<Gc.length;d++){var c=Gc[d];c.blockedOn===a&&(c.blockedOn=null)}}for(Hc!==null&&Xc(Hc,a),Ic!==null&&Xc(Ic,a),Jc!==null&&Xc(Jc,a),Kc.forEach(s),Lc.forEach(s),d=0;d<Mc.length;d++)c=Mc[d],c.blockedOn===a&&(c.blockedOn=null);for(;0<Mc.length&&(d=Mc[0],d.blockedOn===null);)Rc(d),d.blockedOn===null&&Mc.shift()}var Zc=sa.ReactCurrentBatchConfig;function $c(a,s,d,c){var m=E,g=Zc.transition;Zc.transition=null;try{E=1,ad(a,s,d,c)}finally{E=m,Zc.transition=g}}function bd(a,s,d,c){var m=E,g=Zc.transition;Zc.transition=null;try{E=4,ad(a,s,d,c)}finally{E=m,Zc.transition=g}}function ad(a,s,d,c){var m=Uc(a,s,d,c);if(m===null)cd(a,s,c,dd,d),Oc(a,c);else if(Qc(m,a,s,d,c))c.stopPropagation();else if(Oc(a,c),s&4&&-1<Nc.indexOf(a)){for(;m!==null;){var g=zb(m);if(g!==null&&Ac(g),g=Uc(a,s,d,c),g===null&&cd(a,s,c,dd,d),g===m)break;m=g}m!==null&&c.stopPropagation()}else cd(a,s,c,null,d)}var dd=null;function Uc(a,s,d,c){if(dd=null,a=ub(c),a=Sc(a),a!==null)if(s=Sb(a),s===null)a=null;else if(d=s.tag,d===13){if(a=Tb(s),a!==null)return a;a=null}else if(d===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;a=null}else s!==a&&(a=null);return dd=a,null}function ed(a){switch(a){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(bc()){case cc:return 1;case dc:return 4;case ec:case fc:return 16;case gc:return 536870912;default:return 16}default:return 16}}var fd=null,gd=null,hd=null;function id(){if(hd)return hd;var a,s=gd,d=s.length,c,m="value"in fd?fd.value:fd.textContent,g=m.length;for(a=0;a<d&&s[a]===m[a];a++);var b=d-a;for(c=1;c<=b&&s[d-c]===m[g-c];c++);return hd=m.slice(a,1<c?1-c:void 0)}function jd(a){var s=a.keyCode;return"charCode"in a?(a=a.charCode,a===0&&s===13&&(a=13)):a=s,a===10&&(a=13),32<=a||a===13?a:0}function kd(){return!0}function ld(){return!1}function md(a){function s(d,c,m,g,b){this._reactName=d,this._targetInst=m,this.type=c,this.nativeEvent=g,this.target=b,this.currentTarget=null;for(var k in a)a.hasOwnProperty(k)&&(d=a[k],this[k]=d?d(g):g[k]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?kd:ld,this.isPropagationStopped=ld,this}return A(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var d=this.nativeEvent;d&&(d.preventDefault?d.preventDefault():typeof d.returnValue!="unknown"&&(d.returnValue=!1),this.isDefaultPrevented=kd)},stopPropagation:function(){var d=this.nativeEvent;d&&(d.stopPropagation?d.stopPropagation():typeof d.cancelBubble!="unknown"&&(d.cancelBubble=!0),this.isPropagationStopped=kd)},persist:function(){},isPersistent:kd}),s}var nd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},od=md(nd),pd=A({},nd,{view:0,detail:0}),qd=md(pd),rd,sd,td,vd=A({},pd,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ud,button:0,buttons:0,relatedTarget:function(a){return a.relatedTarget===void 0?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){return"movementX"in a?a.movementX:(a!==td&&(td&&a.type==="mousemove"?(rd=a.screenX-td.screenX,sd=a.screenY-td.screenY):sd=rd=0,td=a),rd)},movementY:function(a){return"movementY"in a?a.movementY:sd}}),wd=md(vd),xd=A({},vd,{dataTransfer:0}),yd=md(xd),zd=A({},pd,{relatedTarget:0}),Ad=md(zd),Bd=A({},nd,{animationName:0,elapsedTime:0,pseudoElement:0}),Cd=md(Bd),Dd=A({},nd,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),Ed=md(Dd),Fd=A({},nd,{data:0}),Gd=md(Fd),Hd={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Id={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Jd={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Kd(a){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(a):(a=Jd[a])?!!s[a]:!1}function ud(){return Kd}var Ld=A({},pd,{key:function(a){if(a.key){var s=Hd[a.key]||a.key;if(s!=="Unidentified")return s}return a.type==="keypress"?(a=jd(a),a===13?"Enter":String.fromCharCode(a)):a.type==="keydown"||a.type==="keyup"?Id[a.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ud,charCode:function(a){return a.type==="keypress"?jd(a):0},keyCode:function(a){return a.type==="keydown"||a.type==="keyup"?a.keyCode:0},which:function(a){return a.type==="keypress"?jd(a):a.type==="keydown"||a.type==="keyup"?a.keyCode:0}}),Md=md(Ld),Nd=A({},vd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Od=md(Nd),Pd=A({},pd,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ud}),Qd=md(Pd),Rd=A({},nd,{propertyName:0,elapsedTime:0,pseudoElement:0}),Sd=md(Rd),Td=A({},vd,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),Ud=md(Td),Vd=[9,13,27,32],Wd=ha&&"CompositionEvent"in window,Xd=null;ha&&"documentMode"in document&&(Xd=document.documentMode);var Yd=ha&&"TextEvent"in window&&!Xd,Zd=ha&&(!Wd||Xd&&8<Xd&&11>=Xd),$d=String.fromCharCode(32),ae=!1;function be(a,s){switch(a){case"keyup":return Vd.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ce(a){return a=a.detail,typeof a=="object"&&"data"in a?a.data:null}var de=!1;function ee(a,s){switch(a){case"compositionend":return ce(s);case"keypress":return s.which!==32?null:(ae=!0,$d);case"textInput":return a=s.data,a===$d&&ae?null:a;default:return null}}function fe(a,s){if(de)return a==="compositionend"||!Wd&&be(a,s)?(a=id(),hd=gd=fd=null,de=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return Zd&&s.locale!=="ko"?null:s.data;default:return null}}var ge={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function he(a){var s=a&&a.nodeName&&a.nodeName.toLowerCase();return s==="input"?!!ge[a.type]:s==="textarea"}function ie(a,s,d,c){Bb(c),s=je(s,"onChange"),0<s.length&&(d=new od("onChange","change",null,d,c),a.push({event:d,listeners:s}))}var ke=null,le=null;function me(a){ne(a,0)}function oe(a){var s=pe(a);if(Ua(s))return a}function qe(a,s){if(a==="change")return s}var re=!1;if(ha){var se;if(ha){var te="oninput"in document;if(!te){var ue=document.createElement("div");ue.setAttribute("oninput","return;"),te=typeof ue.oninput=="function"}se=te}else se=!1;re=se&&(!document.documentMode||9<document.documentMode)}function ve(){ke&&(ke.detachEvent("onpropertychange",we),le=ke=null)}function we(a){if(a.propertyName==="value"&&oe(le)){var s=[];ie(s,le,a,ub(a)),Gb(me,s)}}function xe(a,s,d){a==="focusin"?(ve(),ke=s,le=d,ke.attachEvent("onpropertychange",we)):a==="focusout"&&ve()}function ye(a){if(a==="selectionchange"||a==="keyup"||a==="keydown")return oe(le)}function ze(a,s){if(a==="click")return oe(s)}function Ae(a,s){if(a==="input"||a==="change")return oe(s)}function Be(a,s){return a===s&&(a!==0||1/a===1/s)||a!==a&&s!==s}var Ce=typeof Object.is=="function"?Object.is:Be;function De(a,s){if(Ce(a,s))return!0;if(typeof a!="object"||a===null||typeof s!="object"||s===null)return!1;var d=Object.keys(a),c=Object.keys(s);if(d.length!==c.length)return!1;for(c=0;c<d.length;c++){var m=d[c];if(!ia.call(s,m)||!Ce(a[m],s[m]))return!1}return!0}function Ee(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function Fe(a,s){var d=Ee(a);a=0;for(var c;d;){if(d.nodeType===3){if(c=a+d.textContent.length,a<=s&&c>=s)return{node:d,offset:s-a};a=c}e:{for(;d;){if(d.nextSibling){d=d.nextSibling;break e}d=d.parentNode}d=void 0}d=Ee(d)}}function Ge(a,s){return a&&s?a===s?!0:a&&a.nodeType===3?!1:s&&s.nodeType===3?Ge(a,s.parentNode):"contains"in a?a.contains(s):a.compareDocumentPosition?!!(a.compareDocumentPosition(s)&16):!1:!1}function He(){for(var a=window,s=Va();s instanceof a.HTMLIFrameElement;){try{var d=typeof s.contentWindow.location.href=="string"}catch{d=!1}if(d)a=s.contentWindow;else break;s=Va(a.document)}return s}function Ie(a){var s=a&&a.nodeName&&a.nodeName.toLowerCase();return s&&(s==="input"&&(a.type==="text"||a.type==="search"||a.type==="tel"||a.type==="url"||a.type==="password")||s==="textarea"||a.contentEditable==="true")}function Je(a){var s=He(),d=a.focusedElem,c=a.selectionRange;if(s!==d&&d&&d.ownerDocument&&Ge(d.ownerDocument.documentElement,d)){if(c!==null&&Ie(d)){if(s=c.start,a=c.end,a===void 0&&(a=s),"selectionStart"in d)d.selectionStart=s,d.selectionEnd=Math.min(a,d.value.length);else if(a=(s=d.ownerDocument||document)&&s.defaultView||window,a.getSelection){a=a.getSelection();var m=d.textContent.length,g=Math.min(c.start,m);c=c.end===void 0?g:Math.min(c.end,m),!a.extend&&g>c&&(m=c,c=g,g=m),m=Fe(d,g);var b=Fe(d,c);m&&b&&(a.rangeCount!==1||a.anchorNode!==m.node||a.anchorOffset!==m.offset||a.focusNode!==b.node||a.focusOffset!==b.offset)&&(s=s.createRange(),s.setStart(m.node,m.offset),a.removeAllRanges(),g>c?(a.addRange(s),a.extend(b.node,b.offset)):(s.setEnd(b.node,b.offset),a.addRange(s)))}}for(s=[],a=d;a=a.parentNode;)a.nodeType===1&&s.push({element:a,left:a.scrollLeft,top:a.scrollTop});for(typeof d.focus=="function"&&d.focus(),d=0;d<s.length;d++)a=s[d],a.element.scrollLeft=a.left,a.element.scrollTop=a.top}}var Ke=ha&&"documentMode"in document&&11>=document.documentMode,Le=null,Me=null,Ne=null,Oe=!1;function Pe(a,s,d){var c=d.window===d?d.document:d.nodeType===9?d:d.ownerDocument;Oe||Le==null||Le!==Va(c)||(c=Le,"selectionStart"in c&&Ie(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),Ne&&De(Ne,c)||(Ne=c,c=je(Me,"onSelect"),0<c.length&&(s=new od("onSelect","select",null,s,d),a.push({event:s,listeners:c}),s.target=Le)))}function Qe(a,s){var d={};return d[a.toLowerCase()]=s.toLowerCase(),d["Webkit"+a]="webkit"+s,d["Moz"+a]="moz"+s,d}var Re={animationend:Qe("Animation","AnimationEnd"),animationiteration:Qe("Animation","AnimationIteration"),animationstart:Qe("Animation","AnimationStart"),transitionend:Qe("Transition","TransitionEnd")},Se={},Te={};ha&&(Te=document.createElement("div").style,"AnimationEvent"in window||(delete Re.animationend.animation,delete Re.animationiteration.animation,delete Re.animationstart.animation),"TransitionEvent"in window||delete Re.transitionend.transition);function Ue(a){if(Se[a])return Se[a];if(!Re[a])return a;var s=Re[a],d;for(d in s)if(s.hasOwnProperty(d)&&d in Te)return Se[a]=s[d];return a}var Ve=Ue("animationend"),We=Ue("animationiteration"),Xe=Ue("animationstart"),Ye=Ue("transitionend"),Ze=new Map,$e="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function af(a,s){Ze.set(a,s),ea(s,[a])}for(var bf=0;bf<$e.length;bf++){var cf=$e[bf],df=cf.toLowerCase(),ef=cf[0].toUpperCase()+cf.slice(1);af(df,"on"+ef)}af(Ve,"onAnimationEnd");af(We,"onAnimationIteration");af(Xe,"onAnimationStart");af("dblclick","onDoubleClick");af("focusin","onFocus");af("focusout","onBlur");af(Ye,"onTransitionEnd");fa("onMouseEnter",["mouseout","mouseover"]);fa("onMouseLeave",["mouseout","mouseover"]);fa("onPointerEnter",["pointerout","pointerover"]);fa("onPointerLeave",["pointerout","pointerover"]);ea("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ea("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ea("onBeforeInput",["compositionend","keypress","textInput","paste"]);ea("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ea("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ea("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ff="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),gf=new Set("cancel close invalid load scroll toggle".split(" ").concat(ff));function hf(a,s,d){var c=a.type||"unknown-event";a.currentTarget=d,Rb(c,s,void 0,a),a.currentTarget=null}function ne(a,s){s=(s&4)!==0;for(var d=0;d<a.length;d++){var c=a[d],m=c.event;c=c.listeners;e:{var g=void 0;if(s)for(var b=c.length-1;0<=b;b--){var k=c[b],et=k.instance,nt=k.currentTarget;if(k=k.listener,et!==g&&m.isPropagationStopped())break e;hf(m,k,nt),g=et}else for(b=0;b<c.length;b++){if(k=c[b],et=k.instance,nt=k.currentTarget,k=k.listener,et!==g&&m.isPropagationStopped())break e;hf(m,k,nt),g=et}}}if(Nb)throw a=Ob,Nb=!1,Ob=null,a}function F(a,s){var d=s[jf];d===void 0&&(d=s[jf]=new Set);var c=a+"__bubble";d.has(c)||(kf(s,a,2,!1),d.add(c))}function lf(a,s,d){var c=0;s&&(c|=4),kf(d,a,c,s)}var mf="_reactListening"+Math.random().toString(36).slice(2);function nf(a){if(!a[mf]){a[mf]=!0,ca.forEach(function(d){d!=="selectionchange"&&(gf.has(d)||lf(d,!1,a),lf(d,!0,a))});var s=a.nodeType===9?a:a.ownerDocument;s===null||s[mf]||(s[mf]=!0,lf("selectionchange",!1,s))}}function kf(a,s,d,c){switch(ed(s)){case 1:var m=$c;break;case 4:m=bd;break;default:m=ad}d=m.bind(null,s,d,a),m=void 0,!Ib||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(m=!0),c?m!==void 0?a.addEventListener(s,d,{capture:!0,passive:m}):a.addEventListener(s,d,!0):m!==void 0?a.addEventListener(s,d,{passive:m}):a.addEventListener(s,d,!1)}function cd(a,s,d,c,m){var g=c;if((s&1)===0&&(s&2)===0&&c!==null)e:for(;;){if(c===null)return;var b=c.tag;if(b===3||b===4){var k=c.stateNode.containerInfo;if(k===m||k.nodeType===8&&k.parentNode===m)break;if(b===4)for(b=c.return;b!==null;){var et=b.tag;if((et===3||et===4)&&(et=b.stateNode.containerInfo,et===m||et.nodeType===8&&et.parentNode===m))return;b=b.return}for(;k!==null;){if(b=Sc(k),b===null)return;if(et=b.tag,et===5||et===6){c=g=b;continue e}k=k.parentNode}}c=c.return}Gb(function(){var nt=g,it=ub(d),ct=[];e:{var st=Ze.get(a);if(st!==void 0){var ut=od,pt=a;switch(a){case"keypress":if(jd(d)===0)break e;case"keydown":case"keyup":ut=Md;break;case"focusin":pt="focus",ut=Ad;break;case"focusout":pt="blur",ut=Ad;break;case"beforeblur":case"afterblur":ut=Ad;break;case"click":if(d.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ut=wd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ut=yd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ut=Qd;break;case Ve:case We:case Xe:ut=Cd;break;case Ye:ut=Sd;break;case"scroll":ut=qd;break;case"wheel":ut=Ud;break;case"copy":case"cut":case"paste":ut=Ed;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ut=Od}var St=(s&4)!==0,_t=!St&&a==="scroll",ht=St?st!==null?st+"Capture":null:st;St=[];for(var _e=nt,ot;_e!==null;){ot=_e;var lt=ot.stateNode;if(ot.tag===5&&lt!==null&&(ot=lt,ht!==null&&(lt=Hb(_e,ht),lt!=null&&St.push(of(_e,lt,ot)))),_t)break;_e=_e.return}0<St.length&&(st=new ut(st,pt,null,d,it),ct.push({event:st,listeners:St}))}}if((s&7)===0){e:{if(st=a==="mouseover"||a==="pointerover",ut=a==="mouseout"||a==="pointerout",st&&d!==tb&&(pt=d.relatedTarget||d.fromElement)&&(Sc(pt)||pt[pf]))break e;if((ut||st)&&(st=it.window===it?it:(st=it.ownerDocument)?st.defaultView||st.parentWindow:window,ut?(pt=d.relatedTarget||d.toElement,ut=nt,pt=pt?Sc(pt):null,pt!==null&&(_t=Sb(pt),pt!==_t||pt.tag!==5&&pt.tag!==6)&&(pt=null)):(ut=null,pt=nt),ut!==pt)){if(St=wd,lt="onMouseLeave",ht="onMouseEnter",_e="mouse",(a==="pointerout"||a==="pointerover")&&(St=Od,lt="onPointerLeave",ht="onPointerEnter",_e="pointer"),_t=ut==null?st:pe(ut),ot=pt==null?st:pe(pt),st=new St(lt,_e+"leave",ut,d,it),st.target=_t,st.relatedTarget=ot,lt=null,Sc(it)===nt&&(St=new St(ht,_e+"enter",pt,d,it),St.target=ot,St.relatedTarget=_t,lt=St),_t=lt,ut&&pt)t:{for(St=ut,ht=pt,_e=0,ot=St;ot;ot=qf(ot))_e++;for(ot=0,lt=ht;lt;lt=qf(lt))ot++;for(;0<_e-ot;)St=qf(St),_e--;for(;0<ot-_e;)ht=qf(ht),ot--;for(;_e--;){if(St===ht||ht!==null&&St===ht.alternate)break t;St=qf(St),ht=qf(ht)}St=null}else St=null;ut!==null&&rf(ct,st,ut,St,!1),pt!==null&&_t!==null&&rf(ct,_t,pt,St,!0)}}e:{if(st=nt?pe(nt):window,ut=st.nodeName&&st.nodeName.toLowerCase(),ut==="select"||ut==="input"&&st.type==="file")var Ot=qe;else if(he(st))if(re)Ot=Ae;else{Ot=ye;var It=xe}else(ut=st.nodeName)&&ut.toLowerCase()==="input"&&(st.type==="checkbox"||st.type==="radio")&&(Ot=ze);if(Ot&&(Ot=Ot(a,nt))){ie(ct,Ot,d,it);break e}It&&It(a,st,nt),a==="focusout"&&(It=st._wrapperState)&&It.controlled&&st.type==="number"&&$a(st,"number",st.value)}switch(It=nt?pe(nt):window,a){case"focusin":(he(It)||It.contentEditable==="true")&&(Le=It,Me=nt,Ne=null);break;case"focusout":Ne=Me=Le=null;break;case"mousedown":Oe=!0;break;case"contextmenu":case"mouseup":case"dragend":Oe=!1,Pe(ct,d,it);break;case"selectionchange":if(Ke)break;case"keydown":case"keyup":Pe(ct,d,it)}var Pt;if(Wd)e:{switch(a){case"compositionstart":var $t="onCompositionStart";break e;case"compositionend":$t="onCompositionEnd";break e;case"compositionupdate":$t="onCompositionUpdate";break e}$t=void 0}else de?be(a,d)&&($t="onCompositionEnd"):a==="keydown"&&d.keyCode===229&&($t="onCompositionStart");$t&&(Zd&&d.locale!=="ko"&&(de||$t!=="onCompositionStart"?$t==="onCompositionEnd"&&de&&(Pt=id()):(fd=it,gd="value"in fd?fd.value:fd.textContent,de=!0)),It=je(nt,$t),0<It.length&&($t=new Gd($t,a,null,d,it),ct.push({event:$t,listeners:It}),Pt?$t.data=Pt:(Pt=ce(d),Pt!==null&&($t.data=Pt)))),(Pt=Yd?ee(a,d):fe(a,d))&&(nt=je(nt,"onBeforeInput"),0<nt.length&&(it=new Gd("onBeforeInput","beforeinput",null,d,it),ct.push({event:it,listeners:nt}),it.data=Pt))}ne(ct,s)})}function of(a,s,d){return{instance:a,listener:s,currentTarget:d}}function je(a,s){for(var d=s+"Capture",c=[];a!==null;){var m=a,g=m.stateNode;m.tag===5&&g!==null&&(m=g,g=Hb(a,d),g!=null&&c.unshift(of(a,g,m)),g=Hb(a,s),g!=null&&c.push(of(a,g,m))),a=a.return}return c}function qf(a){if(a===null)return null;do a=a.return;while(a&&a.tag!==5);return a||null}function rf(a,s,d,c,m){for(var g=s._reactName,b=[];d!==null&&d!==c;){var k=d,et=k.alternate,nt=k.stateNode;if(et!==null&&et===c)break;k.tag===5&&nt!==null&&(k=nt,m?(et=Hb(d,g),et!=null&&b.unshift(of(d,et,k))):m||(et=Hb(d,g),et!=null&&b.push(of(d,et,k)))),d=d.return}b.length!==0&&a.push({event:s,listeners:b})}var sf=/\r\n?/g,tf=/\u0000|\uFFFD/g;function uf(a){return(typeof a=="string"?a:""+a).replace(sf,`
`).replace(tf,"")}function vf(a,s,d){if(s=uf(s),uf(a)!==s&&d)throw Error(p(425))}function wf(){}var xf=null;function yf(a,s){return a==="textarea"||a==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var zf=typeof setTimeout=="function"?setTimeout:void 0,Af=typeof clearTimeout=="function"?clearTimeout:void 0,Bf=typeof Promise=="function"?Promise:void 0,Df=typeof queueMicrotask=="function"?queueMicrotask:typeof Bf!="undefined"?function(a){return Bf.resolve(null).then(a).catch(Cf)}:zf;function Cf(a){setTimeout(function(){throw a})}function Ef(a,s){var d=s,c=0;do{var m=d.nextSibling;if(a.removeChild(d),m&&m.nodeType===8)if(d=m.data,d==="/$"){if(c===0){a.removeChild(m),Yc(s);return}c--}else d!=="$"&&d!=="$?"&&d!=="$!"||c++;d=m}while(d);Yc(s)}function Ff(a){for(;a!=null;a=a.nextSibling){var s=a.nodeType;if(s===1||s===3)break;if(s===8){if(s=a.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return a}function Gf(a){a=a.previousSibling;for(var s=0;a;){if(a.nodeType===8){var d=a.data;if(d==="$"||d==="$!"||d==="$?"){if(s===0)return a;s--}else d==="/$"&&s++}a=a.previousSibling}return null}var Hf=Math.random().toString(36).slice(2),If="__reactFiber$"+Hf,Jf="__reactProps$"+Hf,pf="__reactContainer$"+Hf,jf="__reactEvents$"+Hf,Kf="__reactListeners$"+Hf,Lf="__reactHandles$"+Hf;function Sc(a){var s=a[If];if(s)return s;for(var d=a.parentNode;d;){if(s=d[pf]||d[If]){if(d=s.alternate,s.child!==null||d!==null&&d.child!==null)for(a=Gf(a);a!==null;){if(d=a[If])return d;a=Gf(a)}return s}a=d,d=a.parentNode}return null}function zb(a){return a=a[If]||a[pf],!a||a.tag!==5&&a.tag!==6&&a.tag!==13&&a.tag!==3?null:a}function pe(a){if(a.tag===5||a.tag===6)return a.stateNode;throw Error(p(33))}function Ab(a){return a[Jf]||null}var Mf=[],Nf=-1;function Of(a){return{current:a}}function G(a){0>Nf||(a.current=Mf[Nf],Mf[Nf]=null,Nf--)}function H(a,s){Nf++,Mf[Nf]=a.current,a.current=s}var Pf={},I=Of(Pf),Qf=Of(!1),Rf=Pf;function Sf(a,s){var d=a.type.contextTypes;if(!d)return Pf;var c=a.stateNode;if(c&&c.__reactInternalMemoizedUnmaskedChildContext===s)return c.__reactInternalMemoizedMaskedChildContext;var m={},g;for(g in d)m[g]=s[g];return c&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=s,a.__reactInternalMemoizedMaskedChildContext=m),m}function Tf(a){return a=a.childContextTypes,a!=null}function Uf(){G(Qf),G(I)}function Vf(a,s,d){if(I.current!==Pf)throw Error(p(168));H(I,s),H(Qf,d)}function Wf(a,s,d){var c=a.stateNode;if(s=s.childContextTypes,typeof c.getChildContext!="function")return d;c=c.getChildContext();for(var m in c)if(!(m in s))throw Error(p(108,Pa(a)||"Unknown",m));return A({},d,c)}function Xf(a){return a=(a=a.stateNode)&&a.__reactInternalMemoizedMergedChildContext||Pf,Rf=I.current,H(I,a),H(Qf,Qf.current),!0}function Yf(a,s,d){var c=a.stateNode;if(!c)throw Error(p(169));d?(a=Wf(a,s,Rf),c.__reactInternalMemoizedMergedChildContext=a,G(Qf),G(I),H(I,a)):G(Qf),H(Qf,d)}var Zf=null,$f=!1,ag=!1;function bg(a){Zf===null?Zf=[a]:Zf.push(a)}function cg(a){$f=!0,bg(a)}function dg(){if(!ag&&Zf!==null){ag=!0;var a=0,s=E;try{var d=Zf;for(E=1;a<d.length;a++){var c=d[a];do c=c(!0);while(c!==null)}Zf=null,$f=!1}catch(m){throw Zf!==null&&(Zf=Zf.slice(a+1)),Yb(cc,dg),m}finally{E=s,ag=!1}}return null}var eg=sa.ReactCurrentBatchConfig;function fg(a,s){if(a&&a.defaultProps){s=A({},s),a=a.defaultProps;for(var d in a)s[d]===void 0&&(s[d]=a[d]);return s}return s}var gg=Of(null),hg=null,ig=null,jg=null;function kg(){jg=ig=hg=null}function lg(a){var s=gg.current;G(gg),a._currentValue=s}function mg(a,s,d){for(;a!==null;){var c=a.alternate;if((a.childLanes&s)!==s?(a.childLanes|=s,c!==null&&(c.childLanes|=s)):c!==null&&(c.childLanes&s)!==s&&(c.childLanes|=s),a===d)break;a=a.return}}function ng(a,s){hg=a,jg=ig=null,a=a.dependencies,a!==null&&a.firstContext!==null&&((a.lanes&s)!==0&&(og=!0),a.firstContext=null)}function pg(a){var s=a._currentValue;if(jg!==a)if(a={context:a,memoizedValue:s,next:null},ig===null){if(hg===null)throw Error(p(308));ig=a,hg.dependencies={lanes:0,firstContext:a}}else ig=ig.next=a;return s}var qg=null,rg=!1;function sg(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function tg(a,s){a=a.updateQueue,s.updateQueue===a&&(s.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,effects:a.effects})}function ug(a,s){return{eventTime:a,lane:s,tag:0,payload:null,callback:null,next:null}}function vg(a,s){var d=a.updateQueue;d!==null&&(d=d.shared,J!==null&&(a.mode&1)!==0&&(K&2)===0?(a=d.interleaved,a===null?(s.next=s,qg===null?qg=[d]:qg.push(d)):(s.next=a.next,a.next=s),d.interleaved=s):(a=d.pending,a===null?s.next=s:(s.next=a.next,a.next=s),d.pending=s))}function wg(a,s,d){if(s=s.updateQueue,s!==null&&(s=s.shared,(d&4194240)!==0)){var c=s.lanes;c&=a.pendingLanes,d|=c,s.lanes=d,yc(a,d)}}function xg(a,s){var d=a.updateQueue,c=a.alternate;if(c!==null&&(c=c.updateQueue,d===c)){var m=null,g=null;if(d=d.firstBaseUpdate,d!==null){do{var b={eventTime:d.eventTime,lane:d.lane,tag:d.tag,payload:d.payload,callback:d.callback,next:null};g===null?m=g=b:g=g.next=b,d=d.next}while(d!==null);g===null?m=g=s:g=g.next=s}else m=g=s;d={baseState:c.baseState,firstBaseUpdate:m,lastBaseUpdate:g,shared:c.shared,effects:c.effects},a.updateQueue=d;return}a=d.lastBaseUpdate,a===null?d.firstBaseUpdate=s:a.next=s,d.lastBaseUpdate=s}function yg(a,s,d,c){var m=a.updateQueue;rg=!1;var g=m.firstBaseUpdate,b=m.lastBaseUpdate,k=m.shared.pending;if(k!==null){m.shared.pending=null;var et=k,nt=et.next;et.next=null,b===null?g=nt:b.next=nt,b=et;var it=a.alternate;it!==null&&(it=it.updateQueue,k=it.lastBaseUpdate,k!==b&&(k===null?it.firstBaseUpdate=nt:k.next=nt,it.lastBaseUpdate=et))}if(g!==null){var ct=m.baseState;b=0,it=nt=et=null,k=g;do{var st=k.lane,ut=k.eventTime;if((c&st)===st){it!==null&&(it=it.next={eventTime:ut,lane:0,tag:k.tag,payload:k.payload,callback:k.callback,next:null});e:{var pt=a,St=k;switch(st=s,ut=d,St.tag){case 1:if(pt=St.payload,typeof pt=="function"){ct=pt.call(ut,ct,st);break e}ct=pt;break e;case 3:pt.flags=pt.flags&-65537|128;case 0:if(pt=St.payload,st=typeof pt=="function"?pt.call(ut,ct,st):pt,st==null)break e;ct=A({},ct,st);break e;case 2:rg=!0}}k.callback!==null&&k.lane!==0&&(a.flags|=64,st=m.effects,st===null?m.effects=[k]:st.push(k))}else ut={eventTime:ut,lane:st,tag:k.tag,payload:k.payload,callback:k.callback,next:null},it===null?(nt=it=ut,et=ct):it=it.next=ut,b|=st;if(k=k.next,k===null){if(k=m.shared.pending,k===null)break;st=k,k=st.next,st.next=null,m.lastBaseUpdate=st,m.shared.pending=null}}while(1);if(it===null&&(et=ct),m.baseState=et,m.firstBaseUpdate=nt,m.lastBaseUpdate=it,s=m.shared.interleaved,s!==null){m=s;do b|=m.lane,m=m.next;while(m!==s)}else g===null&&(m.shared.lanes=0);zg|=b,a.lanes=b,a.memoizedState=ct}}function Ag(a,s,d){if(a=s.effects,s.effects=null,a!==null)for(s=0;s<a.length;s++){var c=a[s],m=c.callback;if(m!==null){if(c.callback=null,c=d,typeof m!="function")throw Error(p(191,m));m.call(c)}}}var Bg=new aa.Component().refs;function Cg(a,s,d,c){s=a.memoizedState,d=d(c,s),d=d==null?s:A({},s,d),a.memoizedState=d,a.lanes===0&&(a.updateQueue.baseState=d)}var Fg={isMounted:function(a){return(a=a._reactInternals)?Sb(a)===a:!1},enqueueSetState:function(a,s,d){a=a._reactInternals;var c=M(),m=Dg(a),g=ug(c,m);g.payload=s,d!=null&&(g.callback=d),vg(a,g),s=Eg(a,m,c),s!==null&&wg(s,a,m)},enqueueReplaceState:function(a,s,d){a=a._reactInternals;var c=M(),m=Dg(a),g=ug(c,m);g.tag=1,g.payload=s,d!=null&&(g.callback=d),vg(a,g),s=Eg(a,m,c),s!==null&&wg(s,a,m)},enqueueForceUpdate:function(a,s){a=a._reactInternals;var d=M(),c=Dg(a),m=ug(d,c);m.tag=2,s!=null&&(m.callback=s),vg(a,m),s=Eg(a,c,d),s!==null&&wg(s,a,c)}};function Gg(a,s,d,c,m,g,b){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(c,g,b):s.prototype&&s.prototype.isPureReactComponent?!De(d,c)||!De(m,g):!0}function Hg(a,s,d){var c=!1,m=Pf,g=s.contextType;return typeof g=="object"&&g!==null?g=pg(g):(m=Tf(s)?Rf:I.current,c=s.contextTypes,g=(c=c!=null)?Sf(a,m):Pf),s=new s(d,g),a.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=Fg,a.stateNode=s,s._reactInternals=a,c&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=m,a.__reactInternalMemoizedMaskedChildContext=g),s}function Ig(a,s,d,c){a=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(d,c),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(d,c),s.state!==a&&Fg.enqueueReplaceState(s,s.state,null)}function Jg(a,s,d,c){var m=a.stateNode;m.props=d,m.state=a.memoizedState,m.refs=Bg,sg(a);var g=s.contextType;typeof g=="object"&&g!==null?m.context=pg(g):(g=Tf(s)?Rf:I.current,m.context=Sf(a,g)),m.state=a.memoizedState,g=s.getDerivedStateFromProps,typeof g=="function"&&(Cg(a,s,g,d),m.state=a.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(s=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),s!==m.state&&Fg.enqueueReplaceState(m,m.state,null),yg(a,d,m,c),m.state=a.memoizedState),typeof m.componentDidMount=="function"&&(a.flags|=4194308)}var Kg=[],Lg=0,Mg=null,Ng=0,Og=[],Pg=0,Qg=null,Rg=1,Sg="";function Tg(a,s){Kg[Lg++]=Ng,Kg[Lg++]=Mg,Mg=a,Ng=s}function Ug(a,s,d){Og[Pg++]=Rg,Og[Pg++]=Sg,Og[Pg++]=Qg,Qg=a;var c=Rg;a=Sg;var m=32-lc(c)-1;c&=~(1<<m),d+=1;var g=32-lc(s)+m;if(30<g){var b=m-m%5;g=(c&(1<<b)-1).toString(32),c>>=b,m-=b,Rg=1<<32-lc(s)+m|d<<m|c,Sg=g+a}else Rg=1<<g|d<<m|c,Sg=a}function Vg(a){a.return!==null&&(Tg(a,1),Ug(a,1,0))}function Wg(a){for(;a===Mg;)Mg=Kg[--Lg],Kg[Lg]=null,Ng=Kg[--Lg],Kg[Lg]=null;for(;a===Qg;)Qg=Og[--Pg],Og[Pg]=null,Sg=Og[--Pg],Og[Pg]=null,Rg=Og[--Pg],Og[Pg]=null}var Xg=null,Yg=null,N=!1,Zg=null;function $g(a,s){var d=ah(5,null,null,0);d.elementType="DELETED",d.stateNode=s,d.return=a,s=a.deletions,s===null?(a.deletions=[d],a.flags|=16):s.push(d)}function bh(a,s){switch(a.tag){case 5:var d=a.type;return s=s.nodeType!==1||d.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(a.stateNode=s,Xg=a,Yg=Ff(s.firstChild),!0):!1;case 6:return s=a.pendingProps===""||s.nodeType!==3?null:s,s!==null?(a.stateNode=s,Xg=a,Yg=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(d=Qg!==null?{id:Rg,overflow:Sg}:null,a.memoizedState={dehydrated:s,treeContext:d,retryLane:1073741824},d=ah(18,null,null,0),d.stateNode=s,d.return=a,a.child=d,Xg=a,Yg=null,!0):!1;default:return!1}}function ch(a){return(a.mode&1)!==0&&(a.flags&128)===0}function dh(a){if(N){var s=Yg;if(s){var d=s;if(!bh(a,s)){if(ch(a))throw Error(p(418));s=Ff(d.nextSibling);var c=Xg;s&&bh(a,s)?$g(c,d):(a.flags=a.flags&-4097|2,N=!1,Xg=a)}}else{if(ch(a))throw Error(p(418));a.flags=a.flags&-4097|2,N=!1,Xg=a}}}function eh(a){for(a=a.return;a!==null&&a.tag!==5&&a.tag!==3&&a.tag!==13;)a=a.return;Xg=a}function fh(a){if(a!==Xg)return!1;if(!N)return eh(a),N=!0,!1;var s;if((s=a.tag!==3)&&!(s=a.tag!==5)&&(s=a.type,s=s!=="head"&&s!=="body"&&!yf(a.type,a.memoizedProps)),s&&(s=Yg)){if(ch(a)){for(a=Yg;a;)a=Ff(a.nextSibling);throw Error(p(418))}for(;s;)$g(a,s),s=Ff(s.nextSibling)}if(eh(a),a.tag===13){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(p(317));e:{for(a=a.nextSibling,s=0;a;){if(a.nodeType===8){var d=a.data;if(d==="/$"){if(s===0){Yg=Ff(a.nextSibling);break e}s--}else d!=="$"&&d!=="$!"&&d!=="$?"||s++}a=a.nextSibling}Yg=null}}else Yg=Xg?Ff(a.stateNode.nextSibling):null;return!0}function gh(){Yg=Xg=null,N=!1}function hh(a){Zg===null?Zg=[a]:Zg.push(a)}function ih(a,s,d){if(a=d.ref,a!==null&&typeof a!="function"&&typeof a!="object"){if(d._owner){if(d=d._owner,d){if(d.tag!==1)throw Error(p(309));var c=d.stateNode}if(!c)throw Error(p(147,a));var m=c,g=""+a;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===g?s.ref:(s=function(b){var k=m.refs;k===Bg&&(k=m.refs={}),b===null?delete k[g]:k[g]=b},s._stringRef=g,s)}if(typeof a!="string")throw Error(p(284));if(!d._owner)throw Error(p(290,a))}return a}function jh(a,s){throw a=Object.prototype.toString.call(s),Error(p(31,a==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":a))}function kh(a){var s=a._init;return s(a._payload)}function lh(a){function s(ht,_e){if(a){var ot=ht.deletions;ot===null?(ht.deletions=[_e],ht.flags|=16):ot.push(_e)}}function d(ht,_e){if(!a)return null;for(;_e!==null;)s(ht,_e),_e=_e.sibling;return null}function c(ht,_e){for(ht=new Map;_e!==null;)_e.key!==null?ht.set(_e.key,_e):ht.set(_e.index,_e),_e=_e.sibling;return ht}function m(ht,_e){return ht=mh(ht,_e),ht.index=0,ht.sibling=null,ht}function g(ht,_e,ot){return ht.index=ot,a?(ot=ht.alternate,ot!==null?(ot=ot.index,ot<_e?(ht.flags|=2,_e):ot):(ht.flags|=2,_e)):(ht.flags|=1048576,_e)}function b(ht){return a&&ht.alternate===null&&(ht.flags|=2),ht}function k(ht,_e,ot,lt){return _e===null||_e.tag!==6?(_e=nh(ot,ht.mode,lt),_e.return=ht,_e):(_e=m(_e,ot),_e.return=ht,_e)}function et(ht,_e,ot,lt){var Ot=ot.type;return Ot===va?it(ht,_e,ot.props.children,lt,ot.key):_e!==null&&(_e.elementType===Ot||typeof Ot=="object"&&Ot!==null&&Ot.$$typeof===Fa&&kh(Ot)===_e.type)?(lt=m(_e,ot.props),lt.ref=ih(ht,_e,ot),lt.return=ht,lt):(lt=oh(ot.type,ot.key,ot.props,null,ht.mode,lt),lt.ref=ih(ht,_e,ot),lt.return=ht,lt)}function nt(ht,_e,ot,lt){return _e===null||_e.tag!==4||_e.stateNode.containerInfo!==ot.containerInfo||_e.stateNode.implementation!==ot.implementation?(_e=ph(ot,ht.mode,lt),_e.return=ht,_e):(_e=m(_e,ot.children||[]),_e.return=ht,_e)}function it(ht,_e,ot,lt,Ot){return _e===null||_e.tag!==7?(_e=qh(ot,ht.mode,lt,Ot),_e.return=ht,_e):(_e=m(_e,ot),_e.return=ht,_e)}function ct(ht,_e,ot){if(typeof _e=="string"&&_e!==""||typeof _e=="number")return _e=nh(""+_e,ht.mode,ot),_e.return=ht,_e;if(typeof _e=="object"&&_e!==null){switch(_e.$$typeof){case ta:return ot=oh(_e.type,_e.key,_e.props,null,ht.mode,ot),ot.ref=ih(ht,null,_e),ot.return=ht,ot;case ua:return _e=ph(_e,ht.mode,ot),_e.return=ht,_e;case Fa:var lt=_e._init;return ct(ht,lt(_e._payload),ot)}if(bb(_e)||Ia(_e))return _e=qh(_e,ht.mode,ot,null),_e.return=ht,_e;jh(ht,_e)}return null}function st(ht,_e,ot,lt){var Ot=_e!==null?_e.key:null;if(typeof ot=="string"&&ot!==""||typeof ot=="number")return Ot!==null?null:k(ht,_e,""+ot,lt);if(typeof ot=="object"&&ot!==null){switch(ot.$$typeof){case ta:return ot.key===Ot?et(ht,_e,ot,lt):null;case ua:return ot.key===Ot?nt(ht,_e,ot,lt):null;case Fa:return Ot=ot._init,st(ht,_e,Ot(ot._payload),lt)}if(bb(ot)||Ia(ot))return Ot!==null?null:it(ht,_e,ot,lt,null);jh(ht,ot)}return null}function ut(ht,_e,ot,lt,Ot){if(typeof lt=="string"&&lt!==""||typeof lt=="number")return ht=ht.get(ot)||null,k(_e,ht,""+lt,Ot);if(typeof lt=="object"&&lt!==null){switch(lt.$$typeof){case ta:return ht=ht.get(lt.key===null?ot:lt.key)||null,et(_e,ht,lt,Ot);case ua:return ht=ht.get(lt.key===null?ot:lt.key)||null,nt(_e,ht,lt,Ot);case Fa:var It=lt._init;return ut(ht,_e,ot,It(lt._payload),Ot)}if(bb(lt)||Ia(lt))return ht=ht.get(ot)||null,it(_e,ht,lt,Ot,null);jh(_e,lt)}return null}function pt(ht,_e,ot,lt){for(var Ot=null,It=null,Pt=_e,$t=_e=0,bt=null;Pt!==null&&$t<ot.length;$t++){Pt.index>$t?(bt=Pt,Pt=null):bt=Pt.sibling;var Rt=st(ht,Pt,ot[$t],lt);if(Rt===null){Pt===null&&(Pt=bt);break}a&&Pt&&Rt.alternate===null&&s(ht,Pt),_e=g(Rt,_e,$t),It===null?Ot=Rt:It.sibling=Rt,It=Rt,Pt=bt}if($t===ot.length)return d(ht,Pt),N&&Tg(ht,$t),Ot;if(Pt===null){for(;$t<ot.length;$t++)Pt=ct(ht,ot[$t],lt),Pt!==null&&(_e=g(Pt,_e,$t),It===null?Ot=Pt:It.sibling=Pt,It=Pt);return N&&Tg(ht,$t),Ot}for(Pt=c(ht,Pt);$t<ot.length;$t++)bt=ut(Pt,ht,$t,ot[$t],lt),bt!==null&&(a&&bt.alternate!==null&&Pt.delete(bt.key===null?$t:bt.key),_e=g(bt,_e,$t),It===null?Ot=bt:It.sibling=bt,It=bt);return a&&Pt.forEach(function(Ct){return s(ht,Ct)}),N&&Tg(ht,$t),Ot}function St(ht,_e,ot,lt){var Ot=Ia(ot);if(typeof Ot!="function")throw Error(p(150));if(ot=Ot.call(ot),ot==null)throw Error(p(151));for(var It=Ot=null,Pt=_e,$t=_e=0,bt=null,Rt=ot.next();Pt!==null&&!Rt.done;$t++,Rt=ot.next()){Pt.index>$t?(bt=Pt,Pt=null):bt=Pt.sibling;var Ct=st(ht,Pt,Rt.value,lt);if(Ct===null){Pt===null&&(Pt=bt);break}a&&Pt&&Ct.alternate===null&&s(ht,Pt),_e=g(Ct,_e,$t),It===null?Ot=Ct:It.sibling=Ct,It=Ct,Pt=bt}if(Rt.done)return d(ht,Pt),N&&Tg(ht,$t),Ot;if(Pt===null){for(;!Rt.done;$t++,Rt=ot.next())Rt=ct(ht,Rt.value,lt),Rt!==null&&(_e=g(Rt,_e,$t),It===null?Ot=Rt:It.sibling=Rt,It=Rt);return N&&Tg(ht,$t),Ot}for(Pt=c(ht,Pt);!Rt.done;$t++,Rt=ot.next())Rt=ut(Pt,ht,$t,Rt.value,lt),Rt!==null&&(a&&Rt.alternate!==null&&Pt.delete(Rt.key===null?$t:Rt.key),_e=g(Rt,_e,$t),It===null?Ot=Rt:It.sibling=Rt,It=Rt);return a&&Pt.forEach(function(vt){return s(ht,vt)}),N&&Tg(ht,$t),Ot}function _t(ht,_e,ot,lt){if(typeof ot=="object"&&ot!==null&&ot.type===va&&ot.key===null&&(ot=ot.props.children),typeof ot=="object"&&ot!==null){switch(ot.$$typeof){case ta:e:{for(var Ot=ot.key,It=_e;It!==null;){if(It.key===Ot){if(Ot=ot.type,Ot===va){if(It.tag===7){d(ht,It.sibling),_e=m(It,ot.props.children),_e.return=ht,ht=_e;break e}}else if(It.elementType===Ot||typeof Ot=="object"&&Ot!==null&&Ot.$$typeof===Fa&&kh(Ot)===It.type){d(ht,It.sibling),_e=m(It,ot.props),_e.ref=ih(ht,It,ot),_e.return=ht,ht=_e;break e}d(ht,It);break}else s(ht,It);It=It.sibling}ot.type===va?(_e=qh(ot.props.children,ht.mode,lt,ot.key),_e.return=ht,ht=_e):(lt=oh(ot.type,ot.key,ot.props,null,ht.mode,lt),lt.ref=ih(ht,_e,ot),lt.return=ht,ht=lt)}return b(ht);case ua:e:{for(It=ot.key;_e!==null;){if(_e.key===It)if(_e.tag===4&&_e.stateNode.containerInfo===ot.containerInfo&&_e.stateNode.implementation===ot.implementation){d(ht,_e.sibling),_e=m(_e,ot.children||[]),_e.return=ht,ht=_e;break e}else{d(ht,_e);break}else s(ht,_e);_e=_e.sibling}_e=ph(ot,ht.mode,lt),_e.return=ht,ht=_e}return b(ht);case Fa:return It=ot._init,_t(ht,_e,It(ot._payload),lt)}if(bb(ot))return pt(ht,_e,ot,lt);if(Ia(ot))return St(ht,_e,ot,lt);jh(ht,ot)}return typeof ot=="string"&&ot!==""||typeof ot=="number"?(ot=""+ot,_e!==null&&_e.tag===6?(d(ht,_e.sibling),_e=m(_e,ot),_e.return=ht,ht=_e):(d(ht,_e),_e=nh(ot,ht.mode,lt),_e.return=ht,ht=_e),b(ht)):d(ht,_e)}return _t}var rh=lh(!0),sh=lh(!1),th={},uh=Of(th),vh=Of(th),wh=Of(th);function xh(a){if(a===th)throw Error(p(174));return a}function yh(a,s){switch(H(wh,s),H(vh,a),H(uh,th),a=s.nodeType,a){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:ib(null,"");break;default:a=a===8?s.parentNode:s,s=a.namespaceURI||null,a=a.tagName,s=ib(s,a)}G(uh),H(uh,s)}function zh(){G(uh),G(vh),G(wh)}function Ah(a){xh(wh.current);var s=xh(uh.current),d=ib(s,a.type);s!==d&&(H(vh,a),H(uh,d))}function Bh(a){vh.current===a&&(G(uh),G(vh))}var P=Of(0);function Ch(a){for(var s=a;s!==null;){if(s.tag===13){var d=s.memoizedState;if(d!==null&&(d=d.dehydrated,d===null||d.data==="$?"||d.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===a)break;for(;s.sibling===null;){if(s.return===null||s.return===a)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Dh=[];function Eh(){for(var a=0;a<Dh.length;a++)Dh[a]._workInProgressVersionPrimary=null;Dh.length=0}var Fh=sa.ReactCurrentDispatcher,Gh=sa.ReactCurrentBatchConfig,Hh=0,Q=null,R=null,S=null,Ih=!1,Jh=!1,Kh=0,Lh=0;function U(){throw Error(p(321))}function Mh(a,s){if(s===null)return!1;for(var d=0;d<s.length&&d<a.length;d++)if(!Ce(a[d],s[d]))return!1;return!0}function Nh(a,s,d,c,m,g){if(Hh=g,Q=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,Fh.current=a===null||a.memoizedState===null?Oh:Ph,a=d(c,m),Jh){g=0;do{if(Jh=!1,Kh=0,25<=g)throw Error(p(301));g+=1,S=R=null,s.updateQueue=null,Fh.current=Qh,a=d(c,m)}while(Jh)}if(Fh.current=Rh,s=R!==null&&R.next!==null,Hh=0,S=R=Q=null,Ih=!1,s)throw Error(p(300));return a}function Sh(){var a=Kh!==0;return Kh=0,a}function Th(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return S===null?Q.memoizedState=S=a:S=S.next=a,S}function Uh(){if(R===null){var a=Q.alternate;a=a!==null?a.memoizedState:null}else a=R.next;var s=S===null?Q.memoizedState:S.next;if(s!==null)S=s,R=a;else{if(a===null)throw Error(p(310));R=a,a={memoizedState:R.memoizedState,baseState:R.baseState,baseQueue:R.baseQueue,queue:R.queue,next:null},S===null?Q.memoizedState=S=a:S=S.next=a}return S}function Vh(a,s){return typeof s=="function"?s(a):s}function Wh(a){var s=Uh(),d=s.queue;if(d===null)throw Error(p(311));d.lastRenderedReducer=a;var c=R,m=c.baseQueue,g=d.pending;if(g!==null){if(m!==null){var b=m.next;m.next=g.next,g.next=b}c.baseQueue=m=g,d.pending=null}if(m!==null){g=m.next,c=c.baseState;var k=b=null,et=null,nt=g;do{var it=nt.lane;if((Hh&it)===it)et!==null&&(et=et.next={lane:0,action:nt.action,hasEagerState:nt.hasEagerState,eagerState:nt.eagerState,next:null}),c=nt.hasEagerState?nt.eagerState:a(c,nt.action);else{var ct={lane:it,action:nt.action,hasEagerState:nt.hasEagerState,eagerState:nt.eagerState,next:null};et===null?(k=et=ct,b=c):et=et.next=ct,Q.lanes|=it,zg|=it}nt=nt.next}while(nt!==null&&nt!==g);et===null?b=c:et.next=k,Ce(c,s.memoizedState)||(og=!0),s.memoizedState=c,s.baseState=b,s.baseQueue=et,d.lastRenderedState=c}if(a=d.interleaved,a!==null){m=a;do g=m.lane,Q.lanes|=g,zg|=g,m=m.next;while(m!==a)}else m===null&&(d.lanes=0);return[s.memoizedState,d.dispatch]}function Xh(a){var s=Uh(),d=s.queue;if(d===null)throw Error(p(311));d.lastRenderedReducer=a;var c=d.dispatch,m=d.pending,g=s.memoizedState;if(m!==null){d.pending=null;var b=m=m.next;do g=a(g,b.action),b=b.next;while(b!==m);Ce(g,s.memoizedState)||(og=!0),s.memoizedState=g,s.baseQueue===null&&(s.baseState=g),d.lastRenderedState=g}return[g,c]}function Yh(){}function Zh(a,s){var d=Q,c=Uh(),m=s(),g=!Ce(c.memoizedState,m);if(g&&(c.memoizedState=m,og=!0),c=c.queue,$h(ai.bind(null,d,c,a),[a]),c.getSnapshot!==s||g||S!==null&&S.memoizedState.tag&1){if(d.flags|=2048,bi(9,ci.bind(null,d,c,m,s),void 0,null),J===null)throw Error(p(349));(Hh&30)!==0||di(d,s,m)}return m}function di(a,s,d){a.flags|=16384,a={getSnapshot:s,value:d},s=Q.updateQueue,s===null?(s={lastEffect:null,stores:null},Q.updateQueue=s,s.stores=[a]):(d=s.stores,d===null?s.stores=[a]:d.push(a))}function ci(a,s,d,c){s.value=d,s.getSnapshot=c,ei(s)&&Eg(a,1,-1)}function ai(a,s,d){return d(function(){ei(s)&&Eg(a,1,-1)})}function ei(a){var s=a.getSnapshot;a=a.value;try{var d=s();return!Ce(a,d)}catch{return!0}}function fi(a){var s=Th();return typeof a=="function"&&(a=a()),s.memoizedState=s.baseState=a,a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Vh,lastRenderedState:a},s.queue=a,a=a.dispatch=gi.bind(null,Q,a),[s.memoizedState,a]}function bi(a,s,d,c){return a={tag:a,create:s,destroy:d,deps:c,next:null},s=Q.updateQueue,s===null?(s={lastEffect:null,stores:null},Q.updateQueue=s,s.lastEffect=a.next=a):(d=s.lastEffect,d===null?s.lastEffect=a.next=a:(c=d.next,d.next=a,a.next=c,s.lastEffect=a)),a}function hi(){return Uh().memoizedState}function ii(a,s,d,c){var m=Th();Q.flags|=a,m.memoizedState=bi(1|s,d,void 0,c===void 0?null:c)}function ji(a,s,d,c){var m=Uh();c=c===void 0?null:c;var g=void 0;if(R!==null){var b=R.memoizedState;if(g=b.destroy,c!==null&&Mh(c,b.deps)){m.memoizedState=bi(s,d,g,c);return}}Q.flags|=a,m.memoizedState=bi(1|s,d,g,c)}function ki(a,s){return ii(8390656,8,a,s)}function $h(a,s){return ji(2048,8,a,s)}function li(a,s){return ji(4,2,a,s)}function mi(a,s){return ji(4,4,a,s)}function ni(a,s){if(typeof s=="function")return a=a(),s(a),function(){s(null)};if(s!=null)return a=a(),s.current=a,function(){s.current=null}}function oi(a,s,d){return d=d!=null?d.concat([a]):null,ji(4,4,ni.bind(null,s,a),d)}function pi(){}function qi(a,s){var d=Uh();s=s===void 0?null:s;var c=d.memoizedState;return c!==null&&s!==null&&Mh(s,c[1])?c[0]:(d.memoizedState=[a,s],a)}function ri(a,s){var d=Uh();s=s===void 0?null:s;var c=d.memoizedState;return c!==null&&s!==null&&Mh(s,c[1])?c[0]:(a=a(),d.memoizedState=[a,s],a)}function si(a,s){var d=E;E=d!==0&&4>d?d:4,a(!0);var c=Gh.transition;Gh.transition={};try{a(!1),s()}finally{E=d,Gh.transition=c}}function ti(){return Uh().memoizedState}function ui(a,s,d){var c=Dg(a);d={lane:c,action:d,hasEagerState:!1,eagerState:null,next:null},vi(a)?wi(s,d):(xi(a,s,d),d=M(),a=Eg(a,c,d),a!==null&&yi(a,s,c))}function gi(a,s,d){var c=Dg(a),m={lane:c,action:d,hasEagerState:!1,eagerState:null,next:null};if(vi(a))wi(s,m);else{xi(a,s,m);var g=a.alternate;if(a.lanes===0&&(g===null||g.lanes===0)&&(g=s.lastRenderedReducer,g!==null))try{var b=s.lastRenderedState,k=g(b,d);if(m.hasEagerState=!0,m.eagerState=k,Ce(k,b))return}catch{}finally{}d=M(),a=Eg(a,c,d),a!==null&&yi(a,s,c)}}function vi(a){var s=a.alternate;return a===Q||s!==null&&s===Q}function wi(a,s){Jh=Ih=!0;var d=a.pending;d===null?s.next=s:(s.next=d.next,d.next=s),a.pending=s}function xi(a,s,d){J!==null&&(a.mode&1)!==0&&(K&2)===0?(a=s.interleaved,a===null?(d.next=d,qg===null?qg=[s]:qg.push(s)):(d.next=a.next,a.next=d),s.interleaved=d):(a=s.pending,a===null?d.next=d:(d.next=a.next,a.next=d),s.pending=d)}function yi(a,s,d){if((d&4194240)!==0){var c=s.lanes;c&=a.pendingLanes,d|=c,s.lanes=d,yc(a,d)}}var Rh={readContext:pg,useCallback:U,useContext:U,useEffect:U,useImperativeHandle:U,useInsertionEffect:U,useLayoutEffect:U,useMemo:U,useReducer:U,useRef:U,useState:U,useDebugValue:U,useDeferredValue:U,useTransition:U,useMutableSource:U,useSyncExternalStore:U,useId:U,unstable_isNewReconciler:!1},Oh={readContext:pg,useCallback:function(a,s){return Th().memoizedState=[a,s===void 0?null:s],a},useContext:pg,useEffect:ki,useImperativeHandle:function(a,s,d){return d=d!=null?d.concat([a]):null,ii(4194308,4,ni.bind(null,s,a),d)},useLayoutEffect:function(a,s){return ii(4194308,4,a,s)},useInsertionEffect:function(a,s){return ii(4,2,a,s)},useMemo:function(a,s){var d=Th();return s=s===void 0?null:s,a=a(),d.memoizedState=[a,s],a},useReducer:function(a,s,d){var c=Th();return s=d!==void 0?d(s):s,c.memoizedState=c.baseState=s,a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:s},c.queue=a,a=a.dispatch=ui.bind(null,Q,a),[c.memoizedState,a]},useRef:function(a){var s=Th();return a={current:a},s.memoizedState=a},useState:fi,useDebugValue:pi,useDeferredValue:function(a){var s=fi(a),d=s[0],c=s[1];return ki(function(){var m=Gh.transition;Gh.transition={};try{c(a)}finally{Gh.transition=m}},[a]),d},useTransition:function(){var a=fi(!1),s=a[0];return a=si.bind(null,a[1]),Th().memoizedState=a,[s,a]},useMutableSource:function(){},useSyncExternalStore:function(a,s,d){var c=Q,m=Th();if(N){if(d===void 0)throw Error(p(407));d=d()}else{if(d=s(),J===null)throw Error(p(349));(Hh&30)!==0||di(c,s,d)}m.memoizedState=d;var g={value:d,getSnapshot:s};return m.queue=g,ki(ai.bind(null,c,g,a),[a]),c.flags|=2048,bi(9,ci.bind(null,c,g,d,s),void 0,null),d},useId:function(){var a=Th(),s=J.identifierPrefix;if(N){var d=Sg,c=Rg;d=(c&~(1<<32-lc(c)-1)).toString(32)+d,s=":"+s+"R"+d,d=Kh++,0<d&&(s+="H"+d.toString(32)),s+=":"}else d=Lh++,s=":"+s+"r"+d.toString(32)+":";return a.memoizedState=s},unstable_isNewReconciler:!1},Ph={readContext:pg,useCallback:qi,useContext:pg,useEffect:$h,useImperativeHandle:oi,useInsertionEffect:li,useLayoutEffect:mi,useMemo:ri,useReducer:Wh,useRef:hi,useState:function(){return Wh(Vh)},useDebugValue:pi,useDeferredValue:function(a){var s=Wh(Vh),d=s[0],c=s[1];return $h(function(){var m=Gh.transition;Gh.transition={};try{c(a)}finally{Gh.transition=m}},[a]),d},useTransition:function(){var a=Wh(Vh)[0],s=Uh().memoizedState;return[a,s]},useMutableSource:Yh,useSyncExternalStore:Zh,useId:ti,unstable_isNewReconciler:!1},Qh={readContext:pg,useCallback:qi,useContext:pg,useEffect:$h,useImperativeHandle:oi,useInsertionEffect:li,useLayoutEffect:mi,useMemo:ri,useReducer:Xh,useRef:hi,useState:function(){return Xh(Vh)},useDebugValue:pi,useDeferredValue:function(a){var s=Xh(Vh),d=s[0],c=s[1];return $h(function(){var m=Gh.transition;Gh.transition={};try{c(a)}finally{Gh.transition=m}},[a]),d},useTransition:function(){var a=Xh(Vh)[0],s=Uh().memoizedState;return[a,s]},useMutableSource:Yh,useSyncExternalStore:Zh,useId:ti,unstable_isNewReconciler:!1};function zi(a,s){try{var d="",c=s;do d+=Na(c),c=c.return;while(c);var m=d}catch(g){m=`
Error generating stack: `+g.message+`
`+g.stack}return{value:a,source:s,stack:m}}function Ai(a,s){try{console.error(s.value)}catch(d){setTimeout(function(){throw d})}}var Bi=typeof WeakMap=="function"?WeakMap:Map;function Ci(a,s,d){d=ug(-1,d),d.tag=3,d.payload={element:null};var c=s.value;return d.callback=function(){Di||(Di=!0,Ei=c),Ai(a,s)},d}function Fi(a,s,d){d=ug(-1,d),d.tag=3;var c=a.type.getDerivedStateFromError;if(typeof c=="function"){var m=s.value;d.payload=function(){return c(m)},d.callback=function(){Ai(a,s)}}var g=a.stateNode;return g!==null&&typeof g.componentDidCatch=="function"&&(d.callback=function(){Ai(a,s),typeof c!="function"&&(Gi===null?Gi=new Set([this]):Gi.add(this));var b=s.stack;this.componentDidCatch(s.value,{componentStack:b!==null?b:""})}),d}function Hi(a,s,d){var c=a.pingCache;if(c===null){c=a.pingCache=new Bi;var m=new Set;c.set(s,m)}else m=c.get(s),m===void 0&&(m=new Set,c.set(s,m));m.has(d)||(m.add(d),a=Ii.bind(null,a,s,d),s.then(a,a))}function Ji(a){do{var s;if((s=a.tag===13)&&(s=a.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return a;a=a.return}while(a!==null);return null}function Ki(a,s,d,c,m){return(a.mode&1)===0?(a===s?a.flags|=65536:(a.flags|=128,d.flags|=131072,d.flags&=-52805,d.tag===1&&(d.alternate===null?d.tag=17:(s=ug(-1,1),s.tag=2,vg(d,s))),d.lanes|=1),a):(a.flags|=65536,a.lanes=m,a)}var Li,Mi,Ni,Oi;Li=function(a,s){for(var d=s.child;d!==null;){if(d.tag===5||d.tag===6)a.appendChild(d.stateNode);else if(d.tag!==4&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===s)break;for(;d.sibling===null;){if(d.return===null||d.return===s)return;d=d.return}d.sibling.return=d.return,d=d.sibling}};Mi=function(){};Ni=function(a,s,d,c){var m=a.memoizedProps;if(m!==c){a=s.stateNode,xh(uh.current);var g=null;switch(d){case"input":m=Wa(a,m),c=Wa(a,c),g=[];break;case"select":m=A({},m,{value:void 0}),c=A({},c,{value:void 0}),g=[];break;case"textarea":m=db(a,m),c=db(a,c),g=[];break;default:typeof m.onClick!="function"&&typeof c.onClick=="function"&&(a.onclick=wf)}rb(d,c);var b;d=null;for(nt in m)if(!c.hasOwnProperty(nt)&&m.hasOwnProperty(nt)&&m[nt]!=null)if(nt==="style"){var k=m[nt];for(b in k)k.hasOwnProperty(b)&&(d||(d={}),d[b]="")}else nt!=="dangerouslySetInnerHTML"&&nt!=="children"&&nt!=="suppressContentEditableWarning"&&nt!=="suppressHydrationWarning"&&nt!=="autoFocus"&&(da.hasOwnProperty(nt)?g||(g=[]):(g=g||[]).push(nt,null));for(nt in c){var et=c[nt];if(k=m!=null?m[nt]:void 0,c.hasOwnProperty(nt)&&et!==k&&(et!=null||k!=null))if(nt==="style")if(k){for(b in k)!k.hasOwnProperty(b)||et&&et.hasOwnProperty(b)||(d||(d={}),d[b]="");for(b in et)et.hasOwnProperty(b)&&k[b]!==et[b]&&(d||(d={}),d[b]=et[b])}else d||(g||(g=[]),g.push(nt,d)),d=et;else nt==="dangerouslySetInnerHTML"?(et=et?et.__html:void 0,k=k?k.__html:void 0,et!=null&&k!==et&&(g=g||[]).push(nt,et)):nt==="children"?typeof et!="string"&&typeof et!="number"||(g=g||[]).push(nt,""+et):nt!=="suppressContentEditableWarning"&&nt!=="suppressHydrationWarning"&&(da.hasOwnProperty(nt)?(et!=null&&nt==="onScroll"&&F("scroll",a),g||k===et||(g=[])):(g=g||[]).push(nt,et))}d&&(g=g||[]).push("style",d);var nt=g;(s.updateQueue=nt)&&(s.flags|=4)}};Oi=function(a,s,d,c){d!==c&&(s.flags|=4)};function Pi(a,s){if(!N)switch(a.tailMode){case"hidden":s=a.tail;for(var d=null;s!==null;)s.alternate!==null&&(d=s),s=s.sibling;d===null?a.tail=null:d.sibling=null;break;case"collapsed":d=a.tail;for(var c=null;d!==null;)d.alternate!==null&&(c=d),d=d.sibling;c===null?s||a.tail===null?a.tail=null:a.tail.sibling=null:c.sibling=null}}function V(a){var s=a.alternate!==null&&a.alternate.child===a.child,d=0,c=0;if(s)for(var m=a.child;m!==null;)d|=m.lanes|m.childLanes,c|=m.subtreeFlags&14680064,c|=m.flags&14680064,m.return=a,m=m.sibling;else for(m=a.child;m!==null;)d|=m.lanes|m.childLanes,c|=m.subtreeFlags,c|=m.flags,m.return=a,m=m.sibling;return a.subtreeFlags|=c,a.childLanes=d,s}function Qi(a,s,d){var c=s.pendingProps;switch(Wg(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return V(s),null;case 1:return Tf(s.type)&&Uf(),V(s),null;case 3:return c=s.stateNode,zh(),G(Qf),G(I),Eh(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(a===null||a.child===null)&&(fh(s)?s.flags|=4:a===null||a.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Zg!==null&&(Ri(Zg),Zg=null))),Mi(a,s),V(s),null;case 5:Bh(s);var m=xh(wh.current);if(d=s.type,a!==null&&s.stateNode!=null)Ni(a,s,d,c,m),a.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!c){if(s.stateNode===null)throw Error(p(166));return V(s),null}if(a=xh(uh.current),fh(s)){c=s.stateNode,d=s.type;var g=s.memoizedProps;switch(c[If]=s,c[Jf]=g,a=(s.mode&1)!==0,d){case"dialog":F("cancel",c),F("close",c);break;case"iframe":case"object":case"embed":F("load",c);break;case"video":case"audio":for(m=0;m<ff.length;m++)F(ff[m],c);break;case"source":F("error",c);break;case"img":case"image":case"link":F("error",c),F("load",c);break;case"details":F("toggle",c);break;case"input":Xa(c,g),F("invalid",c);break;case"select":c._wrapperState={wasMultiple:!!g.multiple},F("invalid",c);break;case"textarea":eb(c,g),F("invalid",c)}rb(d,g),m=null;for(var b in g)if(g.hasOwnProperty(b)){var k=g[b];b==="children"?typeof k=="string"?c.textContent!==k&&(vf(c.textContent,k,a),m=["children",k]):typeof k=="number"&&c.textContent!==""+k&&(vf(c.textContent,k,a),m=["children",""+k]):da.hasOwnProperty(b)&&k!=null&&b==="onScroll"&&F("scroll",c)}switch(d){case"input":Ta(c),ab(c,g,!0);break;case"textarea":Ta(c),gb(c);break;case"select":case"option":break;default:typeof g.onClick=="function"&&(c.onclick=wf)}c=m,s.updateQueue=c,c!==null&&(s.flags|=4)}else{b=m.nodeType===9?m:m.ownerDocument,a==="http://www.w3.org/1999/xhtml"&&(a=hb(d)),a==="http://www.w3.org/1999/xhtml"?d==="script"?(a=b.createElement("div"),a.innerHTML="<script><\/script>",a=a.removeChild(a.firstChild)):typeof c.is=="string"?a=b.createElement(d,{is:c.is}):(a=b.createElement(d),d==="select"&&(b=a,c.multiple?b.multiple=!0:c.size&&(b.size=c.size))):a=b.createElementNS(a,d),a[If]=s,a[Jf]=c,Li(a,s,!1,!1),s.stateNode=a;e:{switch(b=sb(d,c),d){case"dialog":F("cancel",a),F("close",a),m=c;break;case"iframe":case"object":case"embed":F("load",a),m=c;break;case"video":case"audio":for(m=0;m<ff.length;m++)F(ff[m],a);m=c;break;case"source":F("error",a),m=c;break;case"img":case"image":case"link":F("error",a),F("load",a),m=c;break;case"details":F("toggle",a),m=c;break;case"input":Xa(a,c),m=Wa(a,c),F("invalid",a);break;case"option":m=c;break;case"select":a._wrapperState={wasMultiple:!!c.multiple},m=A({},c,{value:void 0}),F("invalid",a);break;case"textarea":eb(a,c),m=db(a,c),F("invalid",a);break;default:m=c}rb(d,m),k=m;for(g in k)if(k.hasOwnProperty(g)){var et=k[g];g==="style"?pb(a,et):g==="dangerouslySetInnerHTML"?(et=et?et.__html:void 0,et!=null&&kb(a,et)):g==="children"?typeof et=="string"?(d!=="textarea"||et!=="")&&lb(a,et):typeof et=="number"&&lb(a,""+et):g!=="suppressContentEditableWarning"&&g!=="suppressHydrationWarning"&&g!=="autoFocus"&&(da.hasOwnProperty(g)?et!=null&&g==="onScroll"&&F("scroll",a):et!=null&&ra(a,g,et,b))}switch(d){case"input":Ta(a),ab(a,c,!1);break;case"textarea":Ta(a),gb(a);break;case"option":c.value!=null&&a.setAttribute("value",""+Qa(c.value));break;case"select":a.multiple=!!c.multiple,g=c.value,g!=null?cb(a,!!c.multiple,g,!1):c.defaultValue!=null&&cb(a,!!c.multiple,c.defaultValue,!0);break;default:typeof m.onClick=="function"&&(a.onclick=wf)}switch(d){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}}c&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return V(s),null;case 6:if(a&&s.stateNode!=null)Oi(a,s,a.memoizedProps,c);else{if(typeof c!="string"&&s.stateNode===null)throw Error(p(166));if(d=xh(wh.current),xh(uh.current),fh(s)){if(c=s.stateNode,d=s.memoizedProps,c[If]=s,(g=c.nodeValue!==d)&&(a=Xg,a!==null))switch(b=(a.mode&1)!==0,a.tag){case 3:vf(c.nodeValue,d,b);break;case 5:a.memoizedProps[void 0]!==!0&&vf(c.nodeValue,d,b)}g&&(s.flags|=4)}else c=(d.nodeType===9?d:d.ownerDocument).createTextNode(c),c[If]=s,s.stateNode=c}return V(s),null;case 13:if(G(P),c=s.memoizedState,N&&Yg!==null&&(s.mode&1)!==0&&(s.flags&128)===0){for(c=Yg;c;)c=Ff(c.nextSibling);return gh(),s.flags|=98560,s}if(c!==null&&c.dehydrated!==null){if(c=fh(s),a===null){if(!c)throw Error(p(318));if(c=s.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(p(317));c[If]=s}else gh(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;return V(s),null}return Zg!==null&&(Ri(Zg),Zg=null),(s.flags&128)!==0?(s.lanes=d,s):(c=c!==null,d=!1,a===null?fh(s):d=a.memoizedState!==null,c&&!d&&(s.child.flags|=8192,(s.mode&1)!==0&&(a===null||(P.current&1)!==0?W===0&&(W=3):Si())),s.updateQueue!==null&&(s.flags|=4),V(s),null);case 4:return zh(),Mi(a,s),a===null&&nf(s.stateNode.containerInfo),V(s),null;case 10:return lg(s.type._context),V(s),null;case 17:return Tf(s.type)&&Uf(),V(s),null;case 19:if(G(P),g=s.memoizedState,g===null)return V(s),null;if(c=(s.flags&128)!==0,b=g.rendering,b===null)if(c)Pi(g,!1);else{if(W!==0||a!==null&&(a.flags&128)!==0)for(a=s.child;a!==null;){if(b=Ch(a),b!==null){for(s.flags|=128,Pi(g,!1),c=b.updateQueue,c!==null&&(s.updateQueue=c,s.flags|=4),s.subtreeFlags=0,c=d,d=s.child;d!==null;)g=d,a=c,g.flags&=14680066,b=g.alternate,b===null?(g.childLanes=0,g.lanes=a,g.child=null,g.subtreeFlags=0,g.memoizedProps=null,g.memoizedState=null,g.updateQueue=null,g.dependencies=null,g.stateNode=null):(g.childLanes=b.childLanes,g.lanes=b.lanes,g.child=b.child,g.subtreeFlags=0,g.deletions=null,g.memoizedProps=b.memoizedProps,g.memoizedState=b.memoizedState,g.updateQueue=b.updateQueue,g.type=b.type,a=b.dependencies,g.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),d=d.sibling;return H(P,P.current&1|2),s.child}a=a.sibling}g.tail!==null&&D()>Ti&&(s.flags|=128,c=!0,Pi(g,!1),s.lanes=4194304)}else{if(!c)if(a=Ch(b),a!==null){if(s.flags|=128,c=!0,d=a.updateQueue,d!==null&&(s.updateQueue=d,s.flags|=4),Pi(g,!0),g.tail===null&&g.tailMode==="hidden"&&!b.alternate&&!N)return V(s),null}else 2*D()-g.renderingStartTime>Ti&&d!==1073741824&&(s.flags|=128,c=!0,Pi(g,!1),s.lanes=4194304);g.isBackwards?(b.sibling=s.child,s.child=b):(d=g.last,d!==null?d.sibling=b:s.child=b,g.last=b)}return g.tail!==null?(s=g.tail,g.rendering=s,g.tail=s.sibling,g.renderingStartTime=D(),s.sibling=null,d=P.current,H(P,c?d&1|2:d&1),s):(V(s),null);case 22:case 23:return Ui(),c=s.memoizedState!==null,a!==null&&a.memoizedState!==null!==c&&(s.flags|=8192),c&&(s.mode&1)!==0?(Vi&1073741824)!==0&&(V(s),s.subtreeFlags&6&&(s.flags|=8192)):V(s),null;case 24:return null;case 25:return null}throw Error(p(156,s.tag))}var Wi=sa.ReactCurrentOwner,og=!1;function Xi(a,s,d,c){s.child=a===null?sh(s,null,d,c):rh(s,a.child,d,c)}function Yi(a,s,d,c,m){d=d.render;var g=s.ref;return ng(s,m),c=Nh(a,s,d,c,g,m),d=Sh(),a!==null&&!og?(s.updateQueue=a.updateQueue,s.flags&=-2053,a.lanes&=~m,Zi(a,s,m)):(N&&d&&Vg(s),s.flags|=1,Xi(a,s,c,m),s.child)}function $i(a,s,d,c,m){if(a===null){var g=d.type;return typeof g=="function"&&!aj(g)&&g.defaultProps===void 0&&d.compare===null&&d.defaultProps===void 0?(s.tag=15,s.type=g,bj(a,s,g,c,m)):(a=oh(d.type,null,c,s,s.mode,m),a.ref=s.ref,a.return=s,s.child=a)}if(g=a.child,(a.lanes&m)===0){var b=g.memoizedProps;if(d=d.compare,d=d!==null?d:De,d(b,c)&&a.ref===s.ref)return Zi(a,s,m)}return s.flags|=1,a=mh(g,c),a.ref=s.ref,a.return=s,s.child=a}function bj(a,s,d,c,m){if(a!==null&&De(a.memoizedProps,c)&&a.ref===s.ref)if(og=!1,(a.lanes&m)!==0)(a.flags&131072)!==0&&(og=!0);else return s.lanes=a.lanes,Zi(a,s,m);return cj(a,s,d,c,m)}function dj(a,s,d){var c=s.pendingProps,m=c.children,g=a!==null?a.memoizedState:null;if(c.mode==="hidden")if((s.mode&1)===0)s.memoizedState={baseLanes:0,cachePool:null},H(ej,Vi),Vi|=d;else if((d&1073741824)!==0)s.memoizedState={baseLanes:0,cachePool:null},c=g!==null?g.baseLanes:d,H(ej,Vi),Vi|=c;else return a=g!==null?g.baseLanes|d:d,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:a,cachePool:null},s.updateQueue=null,H(ej,Vi),Vi|=a,null;else g!==null?(c=g.baseLanes|d,s.memoizedState=null):c=d,H(ej,Vi),Vi|=c;return Xi(a,s,m,d),s.child}function fj(a,s){var d=s.ref;(a===null&&d!==null||a!==null&&a.ref!==d)&&(s.flags|=512,s.flags|=2097152)}function cj(a,s,d,c,m){var g=Tf(d)?Rf:I.current;return g=Sf(s,g),ng(s,m),d=Nh(a,s,d,c,g,m),c=Sh(),a!==null&&!og?(s.updateQueue=a.updateQueue,s.flags&=-2053,a.lanes&=~m,Zi(a,s,m)):(N&&c&&Vg(s),s.flags|=1,Xi(a,s,d,m),s.child)}function gj(a,s,d,c,m){if(Tf(d)){var g=!0;Xf(s)}else g=!1;if(ng(s,m),s.stateNode===null)a!==null&&(a.alternate=null,s.alternate=null,s.flags|=2),Hg(s,d,c),Jg(s,d,c,m),c=!0;else if(a===null){var b=s.stateNode,k=s.memoizedProps;b.props=k;var et=b.context,nt=d.contextType;typeof nt=="object"&&nt!==null?nt=pg(nt):(nt=Tf(d)?Rf:I.current,nt=Sf(s,nt));var it=d.getDerivedStateFromProps,ct=typeof it=="function"||typeof b.getSnapshotBeforeUpdate=="function";ct||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(k!==c||et!==nt)&&Ig(s,b,c,nt),rg=!1;var st=s.memoizedState;b.state=st,yg(s,c,b,m),et=s.memoizedState,k!==c||st!==et||Qf.current||rg?(typeof it=="function"&&(Cg(s,d,it,c),et=s.memoizedState),(k=rg||Gg(s,d,k,c,st,et,nt))?(ct||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount()),typeof b.componentDidMount=="function"&&(s.flags|=4194308)):(typeof b.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=c,s.memoizedState=et),b.props=c,b.state=et,b.context=nt,c=k):(typeof b.componentDidMount=="function"&&(s.flags|=4194308),c=!1)}else{b=s.stateNode,tg(a,s),k=s.memoizedProps,nt=s.type===s.elementType?k:fg(s.type,k),b.props=nt,ct=s.pendingProps,st=b.context,et=d.contextType,typeof et=="object"&&et!==null?et=pg(et):(et=Tf(d)?Rf:I.current,et=Sf(s,et));var ut=d.getDerivedStateFromProps;(it=typeof ut=="function"||typeof b.getSnapshotBeforeUpdate=="function")||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(k!==ct||st!==et)&&Ig(s,b,c,et),rg=!1,st=s.memoizedState,b.state=st,yg(s,c,b,m);var pt=s.memoizedState;k!==ct||st!==pt||Qf.current||rg?(typeof ut=="function"&&(Cg(s,d,ut,c),pt=s.memoizedState),(nt=rg||Gg(s,d,nt,c,st,pt,et)||!1)?(it||typeof b.UNSAFE_componentWillUpdate!="function"&&typeof b.componentWillUpdate!="function"||(typeof b.componentWillUpdate=="function"&&b.componentWillUpdate(c,pt,et),typeof b.UNSAFE_componentWillUpdate=="function"&&b.UNSAFE_componentWillUpdate(c,pt,et)),typeof b.componentDidUpdate=="function"&&(s.flags|=4),typeof b.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof b.componentDidUpdate!="function"||k===a.memoizedProps&&st===a.memoizedState||(s.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||k===a.memoizedProps&&st===a.memoizedState||(s.flags|=1024),s.memoizedProps=c,s.memoizedState=pt),b.props=c,b.state=pt,b.context=et,c=nt):(typeof b.componentDidUpdate!="function"||k===a.memoizedProps&&st===a.memoizedState||(s.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||k===a.memoizedProps&&st===a.memoizedState||(s.flags|=1024),c=!1)}return hj(a,s,d,c,g,m)}function hj(a,s,d,c,m,g){fj(a,s);var b=(s.flags&128)!==0;if(!c&&!b)return m&&Yf(s,d,!1),Zi(a,s,g);c=s.stateNode,Wi.current=s;var k=b&&typeof d.getDerivedStateFromError!="function"?null:c.render();return s.flags|=1,a!==null&&b?(s.child=rh(s,a.child,null,g),s.child=rh(s,null,k,g)):Xi(a,s,k,g),s.memoizedState=c.state,m&&Yf(s,d,!0),s.child}function ij(a){var s=a.stateNode;s.pendingContext?Vf(a,s.pendingContext,s.pendingContext!==s.context):s.context&&Vf(a,s.context,!1),yh(a,s.containerInfo)}function jj(a,s,d,c,m){return gh(),hh(m),s.flags|=256,Xi(a,s,d,c),s.child}var kj={dehydrated:null,treeContext:null,retryLane:0};function lj(a){return{baseLanes:a,cachePool:null}}function mj(a,s,d){var c=s.pendingProps,m=P.current,g=!1,b=(s.flags&128)!==0,k;if((k=b)||(k=a!==null&&a.memoizedState===null?!1:(m&2)!==0),k?(g=!0,s.flags&=-129):(a===null||a.memoizedState!==null)&&(m|=1),H(P,m&1),a===null)return dh(s),a=s.memoizedState,a!==null&&(a=a.dehydrated,a!==null)?((s.mode&1)===0?s.lanes=1:a.data==="$!"?s.lanes=8:s.lanes=1073741824,null):(m=c.children,a=c.fallback,g?(c=s.mode,g=s.child,m={mode:"hidden",children:m},(c&1)===0&&g!==null?(g.childLanes=0,g.pendingProps=m):g=nj(m,c,0,null),a=qh(a,c,d,null),g.return=s,a.return=s,g.sibling=a,s.child=g,s.child.memoizedState=lj(d),s.memoizedState=kj,a):oj(s,m));if(m=a.memoizedState,m!==null){if(k=m.dehydrated,k!==null){if(b)return s.flags&256?(s.flags&=-257,pj(a,s,d,Error(p(422)))):s.memoizedState!==null?(s.child=a.child,s.flags|=128,null):(g=c.fallback,m=s.mode,c=nj({mode:"visible",children:c.children},m,0,null),g=qh(g,m,d,null),g.flags|=2,c.return=s,g.return=s,c.sibling=g,s.child=c,(s.mode&1)!==0&&rh(s,a.child,null,d),s.child.memoizedState=lj(d),s.memoizedState=kj,g);if((s.mode&1)===0)s=pj(a,s,d,null);else if(k.data==="$!")s=pj(a,s,d,Error(p(419)));else if(c=(d&a.childLanes)!==0,og||c){if(c=J,c!==null){switch(d&-d){case 4:g=2;break;case 16:g=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:g=32;break;case 536870912:g=268435456;break;default:g=0}c=(g&(c.suspendedLanes|d))!==0?0:g,c!==0&&c!==m.retryLane&&(m.retryLane=c,Eg(a,c,-1))}Si(),s=pj(a,s,d,Error(p(421)))}else k.data==="$?"?(s.flags|=128,s.child=a.child,s=qj.bind(null,a),k._reactRetry=s,s=null):(d=m.treeContext,Yg=Ff(k.nextSibling),Xg=s,N=!0,Zg=null,d!==null&&(Og[Pg++]=Rg,Og[Pg++]=Sg,Og[Pg++]=Qg,Rg=d.id,Sg=d.overflow,Qg=s),s=oj(s,s.pendingProps.children),s.flags|=4096);return s}return g?(c=rj(a,s,c.children,c.fallback,d),g=s.child,m=a.child.memoizedState,g.memoizedState=m===null?lj(d):{baseLanes:m.baseLanes|d,cachePool:null},g.childLanes=a.childLanes&~d,s.memoizedState=kj,c):(d=sj(a,s,c.children,d),s.memoizedState=null,d)}return g?(c=rj(a,s,c.children,c.fallback,d),g=s.child,m=a.child.memoizedState,g.memoizedState=m===null?lj(d):{baseLanes:m.baseLanes|d,cachePool:null},g.childLanes=a.childLanes&~d,s.memoizedState=kj,c):(d=sj(a,s,c.children,d),s.memoizedState=null,d)}function oj(a,s){return s=nj({mode:"visible",children:s},a.mode,0,null),s.return=a,a.child=s}function sj(a,s,d,c){var m=a.child;return a=m.sibling,d=mh(m,{mode:"visible",children:d}),(s.mode&1)===0&&(d.lanes=c),d.return=s,d.sibling=null,a!==null&&(c=s.deletions,c===null?(s.deletions=[a],s.flags|=16):c.push(a)),s.child=d}function rj(a,s,d,c,m){var g=s.mode;a=a.child;var b=a.sibling,k={mode:"hidden",children:d};return(g&1)===0&&s.child!==a?(d=s.child,d.childLanes=0,d.pendingProps=k,s.deletions=null):(d=mh(a,k),d.subtreeFlags=a.subtreeFlags&14680064),b!==null?c=mh(b,c):(c=qh(c,g,m,null),c.flags|=2),c.return=s,d.return=s,d.sibling=c,s.child=d,c}function pj(a,s,d,c){return c!==null&&hh(c),rh(s,a.child,null,d),a=oj(s,s.pendingProps.children),a.flags|=2,s.memoizedState=null,a}function tj(a,s,d){a.lanes|=s;var c=a.alternate;c!==null&&(c.lanes|=s),mg(a.return,s,d)}function uj(a,s,d,c,m){var g=a.memoizedState;g===null?a.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:c,tail:d,tailMode:m}:(g.isBackwards=s,g.rendering=null,g.renderingStartTime=0,g.last=c,g.tail=d,g.tailMode=m)}function vj(a,s,d){var c=s.pendingProps,m=c.revealOrder,g=c.tail;if(Xi(a,s,c.children,d),c=P.current,(c&2)!==0)c=c&1|2,s.flags|=128;else{if(a!==null&&(a.flags&128)!==0)e:for(a=s.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&tj(a,d,s);else if(a.tag===19)tj(a,d,s);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break e;for(;a.sibling===null;){if(a.return===null||a.return===s)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}c&=1}if(H(P,c),(s.mode&1)===0)s.memoizedState=null;else switch(m){case"forwards":for(d=s.child,m=null;d!==null;)a=d.alternate,a!==null&&Ch(a)===null&&(m=d),d=d.sibling;d=m,d===null?(m=s.child,s.child=null):(m=d.sibling,d.sibling=null),uj(s,!1,m,d,g);break;case"backwards":for(d=null,m=s.child,s.child=null;m!==null;){if(a=m.alternate,a!==null&&Ch(a)===null){s.child=m;break}a=m.sibling,m.sibling=d,d=m,m=a}uj(s,!0,d,null,g);break;case"together":uj(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function Zi(a,s,d){if(a!==null&&(s.dependencies=a.dependencies),zg|=s.lanes,(d&s.childLanes)===0)return null;if(a!==null&&s.child!==a.child)throw Error(p(153));if(s.child!==null){for(a=s.child,d=mh(a,a.pendingProps),s.child=d,d.return=s;a.sibling!==null;)a=a.sibling,d=d.sibling=mh(a,a.pendingProps),d.return=s;d.sibling=null}return s.child}function wj(a,s,d){switch(s.tag){case 3:ij(s),gh();break;case 5:Ah(s);break;case 1:Tf(s.type)&&Xf(s);break;case 4:yh(s,s.stateNode.containerInfo);break;case 10:var c=s.type._context,m=s.memoizedProps.value;H(gg,c._currentValue),c._currentValue=m;break;case 13:if(c=s.memoizedState,c!==null)return c.dehydrated!==null?(H(P,P.current&1),s.flags|=128,null):(d&s.child.childLanes)!==0?mj(a,s,d):(H(P,P.current&1),a=Zi(a,s,d),a!==null?a.sibling:null);H(P,P.current&1);break;case 19:if(c=(d&s.childLanes)!==0,(a.flags&128)!==0){if(c)return vj(a,s,d);s.flags|=128}if(m=s.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),H(P,P.current),c)break;return null;case 22:case 23:return s.lanes=0,dj(a,s,d)}return Zi(a,s,d)}function xj(a,s){switch(Wg(s),s.tag){case 1:return Tf(s.type)&&Uf(),a=s.flags,a&65536?(s.flags=a&-65537|128,s):null;case 3:return zh(),G(Qf),G(I),Eh(),a=s.flags,(a&65536)!==0&&(a&128)===0?(s.flags=a&-65537|128,s):null;case 5:return Bh(s),null;case 13:if(G(P),a=s.memoizedState,a!==null&&a.dehydrated!==null){if(s.alternate===null)throw Error(p(340));gh()}return a=s.flags,a&65536?(s.flags=a&-65537|128,s):null;case 19:return G(P),null;case 4:return zh(),null;case 10:return lg(s.type._context),null;case 22:case 23:return Ui(),null;case 24:return null;default:return null}}var yj=!1,zj=!1,Aj=typeof WeakSet=="function"?WeakSet:Set,X=null;function Bj(a,s){var d=a.ref;if(d!==null)if(typeof d=="function")try{d(null)}catch(c){Cj(a,s,c)}else d.current=null}function Dj(a,s,d){try{d()}catch(c){Cj(a,s,c)}}var Ej=!1;function Fj(a,s){if(a=He(),Ie(a)){if("selectionStart"in a)var d={start:a.selectionStart,end:a.selectionEnd};else e:{d=(d=a.ownerDocument)&&d.defaultView||window;var c=d.getSelection&&d.getSelection();if(c&&c.rangeCount!==0){d=c.anchorNode;var m=c.anchorOffset,g=c.focusNode;c=c.focusOffset;try{d.nodeType,g.nodeType}catch{d=null;break e}var b=0,k=-1,et=-1,nt=0,it=0,ct=a,st=null;t:for(;;){for(var ut;ct!==d||m!==0&&ct.nodeType!==3||(k=b+m),ct!==g||c!==0&&ct.nodeType!==3||(et=b+c),ct.nodeType===3&&(b+=ct.nodeValue.length),(ut=ct.firstChild)!==null;)st=ct,ct=ut;for(;;){if(ct===a)break t;if(st===d&&++nt===m&&(k=b),st===g&&++it===c&&(et=b),(ut=ct.nextSibling)!==null)break;ct=st,st=ct.parentNode}ct=ut}d=k===-1||et===-1?null:{start:k,end:et}}else d=null}d=d||{start:0,end:0}}else d=null;for(xf={focusedElem:a,selectionRange:d},X=s;X!==null;)if(s=X,a=s.child,(s.subtreeFlags&1028)!==0&&a!==null)a.return=s,X=a;else for(;X!==null;){s=X;try{var pt=s.alternate;if((s.flags&1024)!==0)switch(s.tag){case 0:case 11:case 15:break;case 1:if(pt!==null){var St=pt.memoizedProps,_t=pt.memoizedState,ht=s.stateNode,_e=ht.getSnapshotBeforeUpdate(s.elementType===s.type?St:fg(s.type,St),_t);ht.__reactInternalSnapshotBeforeUpdate=_e}break;case 3:var ot=s.stateNode.containerInfo;if(ot.nodeType===1)ot.textContent="";else if(ot.nodeType===9){var lt=ot.body;lt!=null&&(lt.textContent="")}break;case 5:case 6:case 4:case 17:break;default:throw Error(p(163))}}catch(Ot){Cj(s,s.return,Ot)}if(a=s.sibling,a!==null){a.return=s.return,X=a;break}X=s.return}return pt=Ej,Ej=!1,pt}function Gj(a,s,d){var c=s.updateQueue;if(c=c!==null?c.lastEffect:null,c!==null){var m=c=c.next;do{if((m.tag&a)===a){var g=m.destroy;m.destroy=void 0,g!==void 0&&Dj(s,d,g)}m=m.next}while(m!==c)}}function Hj(a,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var d=s=s.next;do{if((d.tag&a)===a){var c=d.create;d.destroy=c()}d=d.next}while(d!==s)}}function Ij(a){var s=a.ref;if(s!==null){var d=a.stateNode;switch(a.tag){case 5:a=d;break;default:a=d}typeof s=="function"?s(a):s.current=a}}function Jj(a,s,d){if(ic&&typeof ic.onCommitFiberUnmount=="function")try{ic.onCommitFiberUnmount(hc,s)}catch{}switch(s.tag){case 0:case 11:case 14:case 15:if(a=s.updateQueue,a!==null&&(a=a.lastEffect,a!==null)){var c=a=a.next;do{var m=c,g=m.destroy;m=m.tag,g!==void 0&&((m&2)!==0||(m&4)!==0)&&Dj(s,d,g),c=c.next}while(c!==a)}break;case 1:if(Bj(s,d),a=s.stateNode,typeof a.componentWillUnmount=="function")try{a.props=s.memoizedProps,a.state=s.memoizedState,a.componentWillUnmount()}catch(b){Cj(s,d,b)}break;case 5:Bj(s,d);break;case 4:Kj(a,s,d)}}function Lj(a){var s=a.alternate;s!==null&&(a.alternate=null,Lj(s)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(s=a.stateNode,s!==null&&(delete s[If],delete s[Jf],delete s[jf],delete s[Kf],delete s[Lf])),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}function Mj(a){return a.tag===5||a.tag===3||a.tag===4}function Nj(a){e:for(;;){for(;a.sibling===null;){if(a.return===null||Mj(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.flags&2||a.child===null||a.tag===4)continue e;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function Oj(a){e:{for(var s=a.return;s!==null;){if(Mj(s))break e;s=s.return}throw Error(p(160))}var d=s;switch(d.tag){case 5:s=d.stateNode,d.flags&32&&(lb(s,""),d.flags&=-33),d=Nj(a),Pj(a,d,s);break;case 3:case 4:s=d.stateNode.containerInfo,d=Nj(a),Qj(a,d,s);break;default:throw Error(p(161))}}function Qj(a,s,d){var c=a.tag;if(c===5||c===6)a=a.stateNode,s?d.nodeType===8?d.parentNode.insertBefore(a,s):d.insertBefore(a,s):(d.nodeType===8?(s=d.parentNode,s.insertBefore(a,d)):(s=d,s.appendChild(a)),d=d._reactRootContainer,d!=null||s.onclick!==null||(s.onclick=wf));else if(c!==4&&(a=a.child,a!==null))for(Qj(a,s,d),a=a.sibling;a!==null;)Qj(a,s,d),a=a.sibling}function Pj(a,s,d){var c=a.tag;if(c===5||c===6)a=a.stateNode,s?d.insertBefore(a,s):d.appendChild(a);else if(c!==4&&(a=a.child,a!==null))for(Pj(a,s,d),a=a.sibling;a!==null;)Pj(a,s,d),a=a.sibling}function Kj(a,s,d){for(var c=s,m=!1,g,b;;){if(!m){m=c.return;e:for(;;){if(m===null)throw Error(p(160));switch(g=m.stateNode,m.tag){case 5:b=!1;break e;case 3:g=g.containerInfo,b=!0;break e;case 4:g=g.containerInfo,b=!0;break e}m=m.return}m=!0}if(c.tag===5||c.tag===6){e:for(var k=a,et=c,nt=d,it=et;;)if(Jj(k,it,nt),it.child!==null&&it.tag!==4)it.child.return=it,it=it.child;else{if(it===et)break e;for(;it.sibling===null;){if(it.return===null||it.return===et)break e;it=it.return}it.sibling.return=it.return,it=it.sibling}b?(k=g,et=c.stateNode,k.nodeType===8?k.parentNode.removeChild(et):k.removeChild(et)):g.removeChild(c.stateNode)}else if(c.tag===18)b?(k=g,et=c.stateNode,k.nodeType===8?Ef(k.parentNode,et):k.nodeType===1&&Ef(k,et),Yc(k)):Ef(g,c.stateNode);else if(c.tag===4){if(c.child!==null){g=c.stateNode.containerInfo,b=!0,c.child.return=c,c=c.child;continue}}else if(Jj(a,c,d),c.child!==null){c.child.return=c,c=c.child;continue}if(c===s)break;for(;c.sibling===null;){if(c.return===null||c.return===s)return;c=c.return,c.tag===4&&(m=!1)}c.sibling.return=c.return,c=c.sibling}}function Rj(a,s){switch(s.tag){case 0:case 11:case 14:case 15:Gj(3,s,s.return),Hj(3,s),Gj(5,s,s.return);return;case 1:return;case 5:var d=s.stateNode;if(d!=null){var c=s.memoizedProps,m=a!==null?a.memoizedProps:c;a=s.type;var g=s.updateQueue;if(s.updateQueue=null,g!==null){for(a==="input"&&c.type==="radio"&&c.name!=null&&Ya(d,c),sb(a,m),s=sb(a,c),m=0;m<g.length;m+=2){var b=g[m],k=g[m+1];b==="style"?pb(d,k):b==="dangerouslySetInnerHTML"?kb(d,k):b==="children"?lb(d,k):ra(d,b,k,s)}switch(a){case"input":Za(d,c);break;case"textarea":fb(d,c);break;case"select":a=d._wrapperState.wasMultiple,d._wrapperState.wasMultiple=!!c.multiple,g=c.value,g!=null?cb(d,!!c.multiple,g,!1):a!==!!c.multiple&&(c.defaultValue!=null?cb(d,!!c.multiple,c.defaultValue,!0):cb(d,!!c.multiple,c.multiple?[]:"",!1))}d[Jf]=c}}return;case 6:if(s.stateNode===null)throw Error(p(162));s.stateNode.nodeValue=s.memoizedProps;return;case 3:a!==null&&a.memoizedState.isDehydrated&&Yc(s.stateNode.containerInfo);return;case 12:return;case 13:Sj(s);return;case 19:Sj(s);return;case 17:return}throw Error(p(163))}function Sj(a){var s=a.updateQueue;if(s!==null){a.updateQueue=null;var d=a.stateNode;d===null&&(d=a.stateNode=new Aj),s.forEach(function(c){var m=Tj.bind(null,a,c);d.has(c)||(d.add(c),c.then(m,m))})}}function Uj(a,s){for(X=s;X!==null;){s=X;var d=s.deletions;if(d!==null)for(var c=0;c<d.length;c++){var m=d[c];try{Kj(a,m,s);var g=m.alternate;g!==null&&(g.return=null),m.return=null}catch($t){Cj(m,s,$t)}}if(d=s.child,(s.subtreeFlags&12854)!==0&&d!==null)d.return=s,X=d;else for(;X!==null;){s=X;try{var b=s.flags;if(b&32&&lb(s.stateNode,""),b&512){var k=s.alternate;if(k!==null){var et=k.ref;et!==null&&(typeof et=="function"?et(null):et.current=null)}}if(b&8192)switch(s.tag){case 13:if(s.memoizedState!==null){var nt=s.alternate;(nt===null||nt.memoizedState===null)&&(Vj=D())}break;case 22:var it=s.memoizedState!==null,ct=s.alternate,st=ct!==null&&ct.memoizedState!==null;d=s;e:{c=d,m=it;for(var ut=null,pt=c;;){if(pt.tag===5){if(ut===null){ut=pt;var St=pt.stateNode;if(m){var _t=St.style;typeof _t.setProperty=="function"?_t.setProperty("display","none","important"):_t.display="none"}else{var ht=pt.stateNode,_e=pt.memoizedProps.style,ot=_e!=null&&_e.hasOwnProperty("display")?_e.display:null;ht.style.display=ob("display",ot)}}}else if(pt.tag===6)ut===null&&(pt.stateNode.nodeValue=m?"":pt.memoizedProps);else if((pt.tag!==22&&pt.tag!==23||pt.memoizedState===null||pt===c)&&pt.child!==null){pt.child.return=pt,pt=pt.child;continue}if(pt===c)break;for(;pt.sibling===null;){if(pt.return===null||pt.return===c)break e;ut===pt&&(ut=null),pt=pt.return}ut===pt&&(ut=null),pt.sibling.return=pt.return,pt=pt.sibling}}if(it&&!st&&(d.mode&1)!==0){X=d;for(var lt=d.child;lt!==null;){for(d=X=lt;X!==null;){c=X;var Ot=c.child;switch(c.tag){case 0:case 11:case 14:case 15:Gj(4,c,c.return);break;case 1:Bj(c,c.return);var It=c.stateNode;if(typeof It.componentWillUnmount=="function"){var Pt=c.return;try{It.props=c.memoizedProps,It.state=c.memoizedState,It.componentWillUnmount()}catch($t){Cj(c,Pt,$t)}}break;case 5:Bj(c,c.return);break;case 22:if(c.memoizedState!==null){Wj(d);continue}}Ot!==null?(Ot.return=c,X=Ot):Wj(d)}lt=lt.sibling}}}switch(b&4102){case 2:Oj(s),s.flags&=-3;break;case 6:Oj(s),s.flags&=-3,Rj(s.alternate,s);break;case 4096:s.flags&=-4097;break;case 4100:s.flags&=-4097,Rj(s.alternate,s);break;case 4:Rj(s.alternate,s)}}catch($t){Cj(s,s.return,$t)}if(d=s.sibling,d!==null){d.return=s.return,X=d;break}X=s.return}}}function Xj(a,s,d){X=a,Yj(a)}function Yj(a,s,d){for(var c=(a.mode&1)!==0;X!==null;){var m=X,g=m.child;if(m.tag===22&&c){var b=m.memoizedState!==null||yj;if(!b){var k=m.alternate,et=k!==null&&k.memoizedState!==null||zj;k=yj;var nt=zj;if(yj=b,(zj=et)&&!nt)for(X=m;X!==null;)b=X,et=b.child,b.tag===22&&b.memoizedState!==null?Zj(m):et!==null?(et.return=b,X=et):Zj(m);for(;g!==null;)X=g,Yj(g),g=g.sibling;X=m,yj=k,zj=nt}ak(a)}else(m.subtreeFlags&8772)!==0&&g!==null?(g.return=m,X=g):ak(a)}}function ak(a){for(;X!==null;){var s=X;if((s.flags&8772)!==0){var d=s.alternate;try{if((s.flags&8772)!==0)switch(s.tag){case 0:case 11:case 15:zj||Hj(5,s);break;case 1:var c=s.stateNode;if(s.flags&4&&!zj)if(d===null)c.componentDidMount();else{var m=s.elementType===s.type?d.memoizedProps:fg(s.type,d.memoizedProps);c.componentDidUpdate(m,d.memoizedState,c.__reactInternalSnapshotBeforeUpdate)}var g=s.updateQueue;g!==null&&Ag(s,g,c);break;case 3:var b=s.updateQueue;if(b!==null){if(d=null,s.child!==null)switch(s.child.tag){case 5:d=s.child.stateNode;break;case 1:d=s.child.stateNode}Ag(s,b,d)}break;case 5:var k=s.stateNode;if(d===null&&s.flags&4){d=k;var et=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":et.autoFocus&&d.focus();break;case"img":et.src&&(d.src=et.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var nt=s.alternate;if(nt!==null){var it=nt.memoizedState;if(it!==null){var ct=it.dehydrated;ct!==null&&Yc(ct)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(p(163))}zj||s.flags&512&&Ij(s)}catch(st){Cj(s,s.return,st)}}if(s===a){X=null;break}if(d=s.sibling,d!==null){d.return=s.return,X=d;break}X=s.return}}function Wj(a){for(;X!==null;){var s=X;if(s===a){X=null;break}var d=s.sibling;if(d!==null){d.return=s.return,X=d;break}X=s.return}}function Zj(a){for(;X!==null;){var s=X;try{switch(s.tag){case 0:case 11:case 15:var d=s.return;try{Hj(4,s)}catch(et){Cj(s,d,et)}break;case 1:var c=s.stateNode;if(typeof c.componentDidMount=="function"){var m=s.return;try{c.componentDidMount()}catch(et){Cj(s,m,et)}}var g=s.return;try{Ij(s)}catch(et){Cj(s,g,et)}break;case 5:var b=s.return;try{Ij(s)}catch(et){Cj(s,b,et)}}}catch(et){Cj(s,s.return,et)}if(s===a){X=null;break}var k=s.sibling;if(k!==null){k.return=s.return,X=k;break}X=s.return}}var bk=Math.ceil,ck=sa.ReactCurrentDispatcher,dk=sa.ReactCurrentOwner,ek=sa.ReactCurrentBatchConfig,K=0,J=null,Y=null,Z=0,Vi=0,ej=Of(0),W=0,fk=null,zg=0,gk=0,hk=0,ik=null,jk=null,Vj=0,Ti=1/0,Di=!1,Ei=null,Gi=null,kk=!1,lk=null,mk=0,nk=0,ok=null,pk=-1,qk=0;function M(){return(K&6)!==0?D():pk!==-1?pk:pk=D()}function Dg(a){return(a.mode&1)===0?1:(K&2)!==0&&Z!==0?Z&-Z:eg.transition!==null?(qk===0&&(a=oc,oc<<=1,(oc&4194240)===0&&(oc=64),qk=a),qk):(a=E,a!==0||(a=window.event,a=a===void 0?16:ed(a.type)),a)}function Eg(a,s,d){if(50<nk)throw nk=0,ok=null,Error(p(185));var c=rk(a,s);return c===null?null:(wc(c,s,d),((K&2)===0||c!==J)&&(c===J&&((K&2)===0&&(gk|=s),W===4&&sk(c,Z)),tk(c,d),s===1&&K===0&&(a.mode&1)===0&&(Ti=D()+500,$f&&dg())),c)}function rk(a,s){a.lanes|=s;var d=a.alternate;for(d!==null&&(d.lanes|=s),d=a,a=a.return;a!==null;)a.childLanes|=s,d=a.alternate,d!==null&&(d.childLanes|=s),d=a,a=a.return;return d.tag===3?d.stateNode:null}function tk(a,s){var d=a.callbackNode;tc(a,s);var c=rc(a,a===J?Z:0);if(c===0)d!==null&&Zb(d),a.callbackNode=null,a.callbackPriority=0;else if(s=c&-c,a.callbackPriority!==s){if(d!=null&&Zb(d),s===1)a.tag===0?cg(uk.bind(null,a)):bg(uk.bind(null,a)),Df(function(){K===0&&dg()}),d=null;else{switch(zc(c)){case 1:d=cc;break;case 4:d=dc;break;case 16:d=ec;break;case 536870912:d=gc;break;default:d=ec}d=vk(d,wk.bind(null,a))}a.callbackPriority=s,a.callbackNode=d}}function wk(a,s){if(pk=-1,qk=0,(K&6)!==0)throw Error(p(327));var d=a.callbackNode;if(xk()&&a.callbackNode!==d)return null;var c=rc(a,a===J?Z:0);if(c===0)return null;if((c&30)!==0||(c&a.expiredLanes)!==0||s)s=yk(a,c);else{s=c;var m=K;K|=2;var g=zk();(J!==a||Z!==s)&&(Ti=D()+500,Ak(a,s));do try{Bk();break}catch(k){Ck(a,k)}while(1);kg(),ck.current=g,K=m,Y!==null?s=0:(J=null,Z=0,s=W)}if(s!==0){if(s===2&&(m=uc(a),m!==0&&(c=m,s=Dk(a,m))),s===1)throw d=fk,Ak(a,0),sk(a,c),tk(a,D()),d;if(s===6)sk(a,c);else{if(m=a.current.alternate,(c&30)===0&&!Ek(m)&&(s=yk(a,c),s===2&&(g=uc(a),g!==0&&(c=g,s=Dk(a,g))),s===1))throw d=fk,Ak(a,0),sk(a,c),tk(a,D()),d;switch(a.finishedWork=m,a.finishedLanes=c,s){case 0:case 1:throw Error(p(345));case 2:Fk(a,jk);break;case 3:if(sk(a,c),(c&130023424)===c&&(s=Vj+500-D(),10<s)){if(rc(a,0)!==0)break;if(m=a.suspendedLanes,(m&c)!==c){M(),a.pingedLanes|=a.suspendedLanes&m;break}a.timeoutHandle=zf(Fk.bind(null,a,jk),s);break}Fk(a,jk);break;case 4:if(sk(a,c),(c&4194240)===c)break;for(s=a.eventTimes,m=-1;0<c;){var b=31-lc(c);g=1<<b,b=s[b],b>m&&(m=b),c&=~g}if(c=m,c=D()-c,c=(120>c?120:480>c?480:1080>c?1080:1920>c?1920:3e3>c?3e3:4320>c?4320:1960*bk(c/1960))-c,10<c){a.timeoutHandle=zf(Fk.bind(null,a,jk),c);break}Fk(a,jk);break;case 5:Fk(a,jk);break;default:throw Error(p(329))}}}return tk(a,D()),a.callbackNode===d?wk.bind(null,a):null}function Dk(a,s){var d=ik;return a.current.memoizedState.isDehydrated&&(Ak(a,s).flags|=256),a=yk(a,s),a!==2&&(s=jk,jk=d,s!==null&&Ri(s)),a}function Ri(a){jk===null?jk=a:jk.push.apply(jk,a)}function Ek(a){for(var s=a;;){if(s.flags&16384){var d=s.updateQueue;if(d!==null&&(d=d.stores,d!==null))for(var c=0;c<d.length;c++){var m=d[c],g=m.getSnapshot;m=m.value;try{if(!Ce(g(),m))return!1}catch{return!1}}}if(d=s.child,s.subtreeFlags&16384&&d!==null)d.return=s,s=d;else{if(s===a)break;for(;s.sibling===null;){if(s.return===null||s.return===a)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function sk(a,s){for(s&=~hk,s&=~gk,a.suspendedLanes|=s,a.pingedLanes&=~s,a=a.expirationTimes;0<s;){var d=31-lc(s),c=1<<d;a[d]=-1,s&=~c}}function uk(a){if((K&6)!==0)throw Error(p(327));xk();var s=rc(a,0);if((s&1)===0)return tk(a,D()),null;var d=yk(a,s);if(a.tag!==0&&d===2){var c=uc(a);c!==0&&(s=c,d=Dk(a,c))}if(d===1)throw d=fk,Ak(a,0),sk(a,s),tk(a,D()),d;if(d===6)throw Error(p(345));return a.finishedWork=a.current.alternate,a.finishedLanes=s,Fk(a,jk),tk(a,D()),null}function Gk(a,s){var d=K;K|=1;try{return a(s)}finally{K=d,K===0&&(Ti=D()+500,$f&&dg())}}function Hk(a){lk!==null&&lk.tag===0&&(K&6)===0&&xk();var s=K;K|=1;var d=ek.transition,c=E;try{if(ek.transition=null,E=1,a)return a()}finally{E=c,ek.transition=d,K=s,(K&6)===0&&dg()}}function Ui(){Vi=ej.current,G(ej)}function Ak(a,s){a.finishedWork=null,a.finishedLanes=0;var d=a.timeoutHandle;if(d!==-1&&(a.timeoutHandle=-1,Af(d)),Y!==null)for(d=Y.return;d!==null;){var c=d;switch(Wg(c),c.tag){case 1:c=c.type.childContextTypes,c!=null&&Uf();break;case 3:zh(),G(Qf),G(I),Eh();break;case 5:Bh(c);break;case 4:zh();break;case 13:G(P);break;case 19:G(P);break;case 10:lg(c.type._context);break;case 22:case 23:Ui()}d=d.return}if(J=a,Y=a=mh(a.current,null),Z=Vi=s,W=0,fk=null,hk=gk=zg=0,jk=ik=null,qg!==null){for(s=0;s<qg.length;s++)if(d=qg[s],c=d.interleaved,c!==null){d.interleaved=null;var m=c.next,g=d.pending;if(g!==null){var b=g.next;g.next=m,c.next=b}d.pending=c}qg=null}return a}function Ck(a,s){do{var d=Y;try{if(kg(),Fh.current=Rh,Ih){for(var c=Q.memoizedState;c!==null;){var m=c.queue;m!==null&&(m.pending=null),c=c.next}Ih=!1}if(Hh=0,S=R=Q=null,Jh=!1,Kh=0,dk.current=null,d===null||d.return===null){W=1,fk=s,Y=null;break}e:{var g=a,b=d.return,k=d,et=s;if(s=Z,k.flags|=32768,et!==null&&typeof et=="object"&&typeof et.then=="function"){var nt=et,it=k,ct=it.tag;if((it.mode&1)===0&&(ct===0||ct===11||ct===15)){var st=it.alternate;st?(it.updateQueue=st.updateQueue,it.memoizedState=st.memoizedState,it.lanes=st.lanes):(it.updateQueue=null,it.memoizedState=null)}var ut=Ji(b);if(ut!==null){ut.flags&=-257,Ki(ut,b,k,g,s),ut.mode&1&&Hi(g,nt,s),s=ut,et=nt;var pt=s.updateQueue;if(pt===null){var St=new Set;St.add(et),s.updateQueue=St}else pt.add(et);break e}else{if((s&1)===0){Hi(g,nt,s),Si();break e}et=Error(p(426))}}else if(N&&k.mode&1){var _t=Ji(b);if(_t!==null){(_t.flags&65536)===0&&(_t.flags|=256),Ki(_t,b,k,g,s),hh(et);break e}}g=et,W!==4&&(W=2),ik===null?ik=[g]:ik.push(g),et=zi(et,k),k=b;do{switch(k.tag){case 3:k.flags|=65536,s&=-s,k.lanes|=s;var ht=Ci(k,et,s);xg(k,ht);break e;case 1:g=et;var _e=k.type,ot=k.stateNode;if((k.flags&128)===0&&(typeof _e.getDerivedStateFromError=="function"||ot!==null&&typeof ot.componentDidCatch=="function"&&(Gi===null||!Gi.has(ot)))){k.flags|=65536,s&=-s,k.lanes|=s;var lt=Fi(k,g,s);xg(k,lt);break e}}k=k.return}while(k!==null)}Ik(d)}catch(Ot){s=Ot,Y===d&&d!==null&&(Y=d=d.return);continue}break}while(1)}function zk(){var a=ck.current;return ck.current=Rh,a===null?Rh:a}function Si(){(W===0||W===3||W===2)&&(W=4),J===null||(zg&268435455)===0&&(gk&268435455)===0||sk(J,Z)}function yk(a,s){var d=K;K|=2;var c=zk();J===a&&Z===s||Ak(a,s);do try{Jk();break}catch(m){Ck(a,m)}while(1);if(kg(),K=d,ck.current=c,Y!==null)throw Error(p(261));return J=null,Z=0,W}function Jk(){for(;Y!==null;)Kk(Y)}function Bk(){for(;Y!==null&&!$b();)Kk(Y)}function Kk(a){var s=Lk(a.alternate,a,Vi);a.memoizedProps=a.pendingProps,s===null?Ik(a):Y=s,dk.current=null}function Ik(a){var s=a;do{var d=s.alternate;if(a=s.return,(s.flags&32768)===0){if(d=Qi(d,s,Vi),d!==null){Y=d;return}}else{if(d=xj(d,s),d!==null){d.flags&=32767,Y=d;return}if(a!==null)a.flags|=32768,a.subtreeFlags=0,a.deletions=null;else{W=6,Y=null;return}}if(s=s.sibling,s!==null){Y=s;return}Y=s=a}while(s!==null);W===0&&(W=5)}function Fk(a,s){var d=E,c=ek.transition;try{ek.transition=null,E=1,Mk(a,s,d)}finally{ek.transition=c,E=d}return null}function Mk(a,s,d){do xk();while(lk!==null);if((K&6)!==0)throw Error(p(327));var c=a.finishedWork,m=a.finishedLanes;if(c===null)return null;if(a.finishedWork=null,a.finishedLanes=0,c===a.current)throw Error(p(177));a.callbackNode=null,a.callbackPriority=0;var g=c.lanes|c.childLanes;if(xc(a,g),a===J&&(Y=J=null,Z=0),(c.subtreeFlags&2064)===0&&(c.flags&2064)===0||kk||(kk=!0,vk(ec,function(){return xk(),null})),g=(c.flags&15990)!==0,(c.subtreeFlags&15990)!==0||g){g=ek.transition,ek.transition=null;var b=E;E=1;var k=K;K|=4,dk.current=null,Fj(a,c),Uj(a,c),Je(xf),xf=null,a.current=c,Xj(c),ac(),K=k,E=b,ek.transition=g}else a.current=c;if(kk&&(kk=!1,lk=a,mk=m),g=a.pendingLanes,g===0&&(Gi=null),jc(c.stateNode),tk(a,D()),s!==null)for(d=a.onRecoverableError,c=0;c<s.length;c++)d(s[c]);if(Di)throw Di=!1,a=Ei,Ei=null,a;return(mk&1)!==0&&a.tag!==0&&xk(),g=a.pendingLanes,(g&1)!==0?a===ok?nk++:(nk=0,ok=a):nk=0,dg(),null}function xk(){if(lk!==null){var a=zc(mk),s=ek.transition,d=E;try{if(ek.transition=null,E=16>a?16:a,lk===null)var c=!1;else{if(a=lk,lk=null,mk=0,(K&6)!==0)throw Error(p(331));var m=K;for(K|=4,X=a.current;X!==null;){var g=X,b=g.child;if((X.flags&16)!==0){var k=g.deletions;if(k!==null){for(var et=0;et<k.length;et++){var nt=k[et];for(X=nt;X!==null;){var it=X;switch(it.tag){case 0:case 11:case 15:Gj(8,it,g)}var ct=it.child;if(ct!==null)ct.return=it,X=ct;else for(;X!==null;){it=X;var st=it.sibling,ut=it.return;if(Lj(it),it===nt){X=null;break}if(st!==null){st.return=ut,X=st;break}X=ut}}}var pt=g.alternate;if(pt!==null){var St=pt.child;if(St!==null){pt.child=null;do{var _t=St.sibling;St.sibling=null,St=_t}while(St!==null)}}X=g}}if((g.subtreeFlags&2064)!==0&&b!==null)b.return=g,X=b;else e:for(;X!==null;){if(g=X,(g.flags&2048)!==0)switch(g.tag){case 0:case 11:case 15:Gj(9,g,g.return)}var ht=g.sibling;if(ht!==null){ht.return=g.return,X=ht;break e}X=g.return}}var _e=a.current;for(X=_e;X!==null;){b=X;var ot=b.child;if((b.subtreeFlags&2064)!==0&&ot!==null)ot.return=b,X=ot;else e:for(b=_e;X!==null;){if(k=X,(k.flags&2048)!==0)try{switch(k.tag){case 0:case 11:case 15:Hj(9,k)}}catch(Ot){Cj(k,k.return,Ot)}if(k===b){X=null;break e}var lt=k.sibling;if(lt!==null){lt.return=k.return,X=lt;break e}X=k.return}}if(K=m,dg(),ic&&typeof ic.onPostCommitFiberRoot=="function")try{ic.onPostCommitFiberRoot(hc,a)}catch{}c=!0}return c}finally{E=d,ek.transition=s}}return!1}function Nk(a,s,d){s=zi(d,s),s=Ci(a,s,1),vg(a,s),s=M(),a=rk(a,1),a!==null&&(wc(a,1,s),tk(a,s))}function Cj(a,s,d){if(a.tag===3)Nk(a,a,d);else for(;s!==null;){if(s.tag===3){Nk(s,a,d);break}else if(s.tag===1){var c=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(Gi===null||!Gi.has(c))){a=zi(d,a),a=Fi(s,a,1),vg(s,a),a=M(),s=rk(s,1),s!==null&&(wc(s,1,a),tk(s,a));break}}s=s.return}}function Ii(a,s,d){var c=a.pingCache;c!==null&&c.delete(s),s=M(),a.pingedLanes|=a.suspendedLanes&d,J===a&&(Z&d)===d&&(W===4||W===3&&(Z&130023424)===Z&&500>D()-Vj?Ak(a,0):hk|=d),tk(a,s)}function Ok(a,s){s===0&&((a.mode&1)===0?s=1:(s=pc,pc<<=1,(pc&130023424)===0&&(pc=4194304)));var d=M();a=rk(a,s),a!==null&&(wc(a,s,d),tk(a,d))}function qj(a){var s=a.memoizedState,d=0;s!==null&&(d=s.retryLane),Ok(a,d)}function Tj(a,s){var d=0;switch(a.tag){case 13:var c=a.stateNode,m=a.memoizedState;m!==null&&(d=m.retryLane);break;case 19:c=a.stateNode;break;default:throw Error(p(314))}c!==null&&c.delete(s),Ok(a,d)}var Lk;Lk=function(a,s,d){if(a!==null)if(a.memoizedProps!==s.pendingProps||Qf.current)og=!0;else{if((a.lanes&d)===0&&(s.flags&128)===0)return og=!1,wj(a,s,d);og=(a.flags&131072)!==0}else og=!1,N&&(s.flags&1048576)!==0&&Ug(s,Ng,s.index);switch(s.lanes=0,s.tag){case 2:var c=s.type;a!==null&&(a.alternate=null,s.alternate=null,s.flags|=2),a=s.pendingProps;var m=Sf(s,I.current);ng(s,d),m=Nh(null,s,c,a,m,d);var g=Sh();return s.flags|=1,typeof m=="object"&&m!==null&&typeof m.render=="function"&&m.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,Tf(c)?(g=!0,Xf(s)):g=!1,s.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,sg(s),m.updater=Fg,s.stateNode=m,m._reactInternals=s,Jg(s,c,a,d),s=hj(null,s,c,!0,g,d)):(s.tag=0,N&&g&&Vg(s),Xi(null,s,m,d),s=s.child),s;case 16:c=s.elementType;e:{switch(a!==null&&(a.alternate=null,s.alternate=null,s.flags|=2),a=s.pendingProps,m=c._init,c=m(c._payload),s.type=c,m=s.tag=Pk(c),a=fg(c,a),m){case 0:s=cj(null,s,c,a,d);break e;case 1:s=gj(null,s,c,a,d);break e;case 11:s=Yi(null,s,c,a,d);break e;case 14:s=$i(null,s,c,fg(c.type,a),d);break e}throw Error(p(306,c,""))}return s;case 0:return c=s.type,m=s.pendingProps,m=s.elementType===c?m:fg(c,m),cj(a,s,c,m,d);case 1:return c=s.type,m=s.pendingProps,m=s.elementType===c?m:fg(c,m),gj(a,s,c,m,d);case 3:e:{if(ij(s),a===null)throw Error(p(387));c=s.pendingProps,g=s.memoizedState,m=g.element,tg(a,s),yg(s,c,null,d);var b=s.memoizedState;if(c=b.element,g.isDehydrated)if(g={element:c,isDehydrated:!1,cache:b.cache,transitions:b.transitions},s.updateQueue.baseState=g,s.memoizedState=g,s.flags&256){m=Error(p(423)),s=jj(a,s,c,d,m);break e}else if(c!==m){m=Error(p(424)),s=jj(a,s,c,d,m);break e}else for(Yg=Ff(s.stateNode.containerInfo.firstChild),Xg=s,N=!0,Zg=null,d=sh(s,null,c,d),s.child=d;d;)d.flags=d.flags&-3|4096,d=d.sibling;else{if(gh(),c===m){s=Zi(a,s,d);break e}Xi(a,s,c,d)}s=s.child}return s;case 5:return Ah(s),a===null&&dh(s),c=s.type,m=s.pendingProps,g=a!==null?a.memoizedProps:null,b=m.children,yf(c,m)?b=null:g!==null&&yf(c,g)&&(s.flags|=32),fj(a,s),Xi(a,s,b,d),s.child;case 6:return a===null&&dh(s),null;case 13:return mj(a,s,d);case 4:return yh(s,s.stateNode.containerInfo),c=s.pendingProps,a===null?s.child=rh(s,null,c,d):Xi(a,s,c,d),s.child;case 11:return c=s.type,m=s.pendingProps,m=s.elementType===c?m:fg(c,m),Yi(a,s,c,m,d);case 7:return Xi(a,s,s.pendingProps,d),s.child;case 8:return Xi(a,s,s.pendingProps.children,d),s.child;case 12:return Xi(a,s,s.pendingProps.children,d),s.child;case 10:e:{if(c=s.type._context,m=s.pendingProps,g=s.memoizedProps,b=m.value,H(gg,c._currentValue),c._currentValue=b,g!==null)if(Ce(g.value,b)){if(g.children===m.children&&!Qf.current){s=Zi(a,s,d);break e}}else for(g=s.child,g!==null&&(g.return=s);g!==null;){var k=g.dependencies;if(k!==null){b=g.child;for(var et=k.firstContext;et!==null;){if(et.context===c){if(g.tag===1){et=ug(-1,d&-d),et.tag=2;var nt=g.updateQueue;if(nt!==null){nt=nt.shared;var it=nt.pending;it===null?et.next=et:(et.next=it.next,it.next=et),nt.pending=et}}g.lanes|=d,et=g.alternate,et!==null&&(et.lanes|=d),mg(g.return,d,s),k.lanes|=d;break}et=et.next}}else if(g.tag===10)b=g.type===s.type?null:g.child;else if(g.tag===18){if(b=g.return,b===null)throw Error(p(341));b.lanes|=d,k=b.alternate,k!==null&&(k.lanes|=d),mg(b,d,s),b=g.sibling}else b=g.child;if(b!==null)b.return=g;else for(b=g;b!==null;){if(b===s){b=null;break}if(g=b.sibling,g!==null){g.return=b.return,b=g;break}b=b.return}g=b}Xi(a,s,m.children,d),s=s.child}return s;case 9:return m=s.type,c=s.pendingProps.children,ng(s,d),m=pg(m),c=c(m),s.flags|=1,Xi(a,s,c,d),s.child;case 14:return c=s.type,m=fg(c,s.pendingProps),m=fg(c.type,m),$i(a,s,c,m,d);case 15:return bj(a,s,s.type,s.pendingProps,d);case 17:return c=s.type,m=s.pendingProps,m=s.elementType===c?m:fg(c,m),a!==null&&(a.alternate=null,s.alternate=null,s.flags|=2),s.tag=1,Tf(c)?(a=!0,Xf(s)):a=!1,ng(s,d),Hg(s,c,m),Jg(s,c,m,d),hj(null,s,c,!0,a,d);case 19:return vj(a,s,d);case 22:return dj(a,s,d)}throw Error(p(156,s.tag))};function vk(a,s){return Yb(a,s)}function Qk(a,s,d,c){this.tag=a,this.key=d,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ah(a,s,d,c){return new Qk(a,s,d,c)}function aj(a){return a=a.prototype,!(!a||!a.isReactComponent)}function Pk(a){if(typeof a=="function")return aj(a)?1:0;if(a!=null){if(a=a.$$typeof,a===Ba)return 11;if(a===Ea)return 14}return 2}function mh(a,s){var d=a.alternate;return d===null?(d=ah(a.tag,s,a.key,a.mode),d.elementType=a.elementType,d.type=a.type,d.stateNode=a.stateNode,d.alternate=a,a.alternate=d):(d.pendingProps=s,d.type=a.type,d.flags=0,d.subtreeFlags=0,d.deletions=null),d.flags=a.flags&14680064,d.childLanes=a.childLanes,d.lanes=a.lanes,d.child=a.child,d.memoizedProps=a.memoizedProps,d.memoizedState=a.memoizedState,d.updateQueue=a.updateQueue,s=a.dependencies,d.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},d.sibling=a.sibling,d.index=a.index,d.ref=a.ref,d}function oh(a,s,d,c,m,g){var b=2;if(c=a,typeof a=="function")aj(a)&&(b=1);else if(typeof a=="string")b=5;else e:switch(a){case va:return qh(d.children,m,g,s);case wa:b=8,m|=8;break;case xa:return a=ah(12,d,s,m|2),a.elementType=xa,a.lanes=g,a;case Ca:return a=ah(13,d,s,m),a.elementType=Ca,a.lanes=g,a;case Da:return a=ah(19,d,s,m),a.elementType=Da,a.lanes=g,a;case Ga:return nj(d,m,g,s);default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case ya:b=10;break e;case Aa:b=9;break e;case Ba:b=11;break e;case Ea:b=14;break e;case Fa:b=16,c=null;break e}throw Error(p(130,a==null?a:typeof a,""))}return s=ah(b,d,s,m),s.elementType=a,s.type=c,s.lanes=g,s}function qh(a,s,d,c){return a=ah(7,a,c,s),a.lanes=d,a}function nj(a,s,d,c){return a=ah(22,a,c,s),a.elementType=Ga,a.lanes=d,a.stateNode={},a}function nh(a,s,d){return a=ah(6,a,null,s),a.lanes=d,a}function ph(a,s,d){return s=ah(4,a.children!==null?a.children:[],a.key,s),s.lanes=d,s.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},s}function Rk(a,s,d,c,m){this.tag=s,this.containerInfo=a,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=vc(0),this.expirationTimes=vc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=vc(0),this.identifierPrefix=c,this.onRecoverableError=m,this.mutableSourceEagerHydrationData=null}function Sk(a,s,d,c,m,g,b,k,et){return a=new Rk(a,s,d,k,et),s===1?(s=1,g===!0&&(s|=8)):s=0,g=ah(3,null,null,s),a.current=g,g.stateNode=a,g.memoizedState={element:c,isDehydrated:d,cache:null,transitions:null},sg(g),a}function Tk(a,s,d){var c=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ua,key:c==null?null:""+c,children:a,containerInfo:s,implementation:d}}function Uk(a){if(!a)return Pf;a=a._reactInternals;e:{if(Sb(a)!==a||a.tag!==1)throw Error(p(170));var s=a;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(Tf(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(p(171))}if(a.tag===1){var d=a.type;if(Tf(d))return Wf(a,d,s)}return s}function Vk(a,s,d,c,m,g,b,k,et){return a=Sk(d,c,!0,a,m,g,b,k,et),a.context=Uk(null),d=a.current,c=M(),m=Dg(d),g=ug(c,m),g.callback=s!=null?s:null,vg(d,g),a.current.lanes=m,wc(a,m,c),tk(a,c),a}function Wk(a,s,d,c){var m=s.current,g=M(),b=Dg(m);return d=Uk(d),s.context===null?s.context=d:s.pendingContext=d,s=ug(g,b),s.payload={element:a},c=c===void 0?null:c,c!==null&&(s.callback=c),vg(m,s),a=Eg(m,b,g),a!==null&&wg(a,m,b),b}function Xk(a){if(a=a.current,!a.child)return null;switch(a.child.tag){case 5:return a.child.stateNode;default:return a.child.stateNode}}function Yk(a,s){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var d=a.retryLane;a.retryLane=d!==0&&d<s?d:s}}function Zk(a,s){Yk(a,s),(a=a.alternate)&&Yk(a,s)}function $k(){return null}var al=typeof reportError=="function"?reportError:function(a){console.error(a)};function bl(a){this._internalRoot=a}cl.prototype.render=bl.prototype.render=function(a){var s=this._internalRoot;if(s===null)throw Error(p(409));Wk(a,s,null,null)};cl.prototype.unmount=bl.prototype.unmount=function(){var a=this._internalRoot;if(a!==null){this._internalRoot=null;var s=a.containerInfo;Hk(function(){Wk(null,a,null,null)}),s[pf]=null}};function cl(a){this._internalRoot=a}cl.prototype.unstable_scheduleHydration=function(a){if(a){var s=Dc();a={blockedOn:null,target:a,priority:s};for(var d=0;d<Mc.length&&s!==0&&s<Mc[d].priority;d++);Mc.splice(d,0,a),d===0&&Rc(a)}};function dl(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11)}function el(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11&&(a.nodeType!==8||a.nodeValue!==" react-mount-point-unstable "))}function fl(){}function gl(a,s,d,c,m){if(m){if(typeof c=="function"){var g=c;c=function(){var nt=Xk(b);g.call(nt)}}var b=Vk(s,c,a,0,null,!1,!1,"",fl);return a._reactRootContainer=b,a[pf]=b.current,nf(a.nodeType===8?a.parentNode:a),Hk(),b}for(;m=a.lastChild;)a.removeChild(m);if(typeof c=="function"){var k=c;c=function(){var nt=Xk(et);k.call(nt)}}var et=Sk(a,0,!1,null,null,!1,!1,"",fl);return a._reactRootContainer=et,a[pf]=et.current,nf(a.nodeType===8?a.parentNode:a),Hk(function(){Wk(s,et,d,c)}),et}function hl(a,s,d,c,m){var g=d._reactRootContainer;if(g){var b=g;if(typeof m=="function"){var k=m;m=function(){var et=Xk(b);k.call(et)}}Wk(s,b,a,m)}else b=gl(d,s,a,m,c);return Xk(b)}Ac=function(a){switch(a.tag){case 3:var s=a.stateNode;if(s.current.memoizedState.isDehydrated){var d=qc(s.pendingLanes);d!==0&&(yc(s,d|1),tk(s,D()),(K&6)===0&&(Ti=D()+500,dg()))}break;case 13:var c=M();Hk(function(){return Eg(a,1,c)}),Zk(a,1)}};Bc=function(a){if(a.tag===13){var s=M();Eg(a,134217728,s),Zk(a,134217728)}};Cc=function(a){if(a.tag===13){var s=M(),d=Dg(a);Eg(a,d,s),Zk(a,d)}};Dc=function(){return E};Ec=function(a,s){var d=E;try{return E=a,s()}finally{E=d}};vb=function(a,s,d){switch(s){case"input":if(Za(a,d),s=d.name,d.type==="radio"&&s!=null){for(d=a;d.parentNode;)d=d.parentNode;for(d=d.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<d.length;s++){var c=d[s];if(c!==a&&c.form===a.form){var m=Ab(c);if(!m)throw Error(p(90));Ua(c),Za(c,m)}}}break;case"textarea":fb(a,d);break;case"select":s=d.value,s!=null&&cb(a,!!d.multiple,s,!1)}};Db=Gk;Eb=Hk;var il={usingClientEntryPoint:!1,Events:[zb,pe,Ab,Bb,Cb,Gk]},jl={findFiberByHostInstance:Sc,bundleType:0,version:"18.0.0-fc46dba67-20220329",rendererPackageName:"react-dom"},kl={bundleType:jl.bundleType,version:jl.version,rendererPackageName:jl.rendererPackageName,rendererConfig:jl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:sa.ReactCurrentDispatcher,findHostInstanceByFiber:function(a){return a=Wb(a),a===null?null:a.stateNode},findFiberByHostInstance:jl.findFiberByHostInstance||$k,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__!="undefined"){var ll=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ll.isDisabled&&ll.supportsFiber)try{hc=ll.inject(kl),ic=ll}catch{}}reactDom_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=il;reactDom_production_min.createPortal=function(a,s){var d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!dl(s))throw Error(p(200));return Tk(a,s,null,d)};reactDom_production_min.createRoot=function(a,s){if(!dl(a))throw Error(p(299));var d=!1,c="",m=al;return s!=null&&(s.unstable_strictMode===!0&&(d=!0),s.identifierPrefix!==void 0&&(c=s.identifierPrefix),s.onRecoverableError!==void 0&&(m=s.onRecoverableError)),s=Sk(a,1,!1,null,null,d,!1,c,m),a[pf]=s.current,nf(a.nodeType===8?a.parentNode:a),new bl(s)};reactDom_production_min.findDOMNode=function(a){if(a==null)return null;if(a.nodeType===1)return a;var s=a._reactInternals;if(s===void 0)throw typeof a.render=="function"?Error(p(188)):(a=Object.keys(a).join(","),Error(p(268,a)));return a=Wb(s),a=a===null?null:a.stateNode,a};reactDom_production_min.flushSync=function(a){return Hk(a)};reactDom_production_min.hydrate=function(a,s,d){if(!el(s))throw Error(p(200));return hl(null,a,s,!0,d)};reactDom_production_min.hydrateRoot=function(a,s,d){if(!dl(a))throw Error(p(405));var c=d!=null&&d.hydratedSources||null,m=!1,g="",b=al;if(d!=null&&(d.unstable_strictMode===!0&&(m=!0),d.identifierPrefix!==void 0&&(g=d.identifierPrefix),d.onRecoverableError!==void 0&&(b=d.onRecoverableError)),s=Vk(s,null,a,1,d!=null?d:null,m,!1,g,b),a[pf]=s.current,nf(a),c)for(a=0;a<c.length;a++)d=c[a],m=d._getVersion,m=m(d._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[d,m]:s.mutableSourceEagerHydrationData.push(d,m);return new cl(s)};reactDom_production_min.render=function(a,s,d){if(!el(s))throw Error(p(200));return hl(null,a,s,!1,d)};reactDom_production_min.unmountComponentAtNode=function(a){if(!el(a))throw Error(p(40));return a._reactRootContainer?(Hk(function(){hl(null,null,a,!1,function(){a._reactRootContainer=null,a[pf]=null})}),!0):!1};reactDom_production_min.unstable_batchedUpdates=Gk;reactDom_production_min.unstable_renderSubtreeIntoContainer=function(a,s,d,c){if(!el(d))throw Error(p(200));if(a==null||a._reactInternals===void 0)throw Error(p(38));return hl(a,s,d,!1,c)};reactDom_production_min.version="18.0.0-fc46dba67-20220329";function checkDCE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__=="undefined"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(checkDCE)}catch(a){console.error(a)}}checkDCE(),reactDom.exports=reactDom_production_min;var ReactDOM=reactDom.exports;const Participant=({props:a,source:s})=>{const{volume:d=1}=a,c=react.exports.useRef(),m=getRoom(CoreContext.state.activeProjectId),b=(s==null?void 0:s.id)===m.participantId||a.isMuted;return react.exports.useEffect(()=>{!c.current||(c.current.play().catch(k=>{document.addEventListener("click",()=>{var et;return(et=c.current)==null?void 0:et.play()},{once:!0})}),(s==null?void 0:s.value)&&(s==null?void 0:s.value)!==c.current.srcObject?c.current.srcObject=s.value:s!=null&&s.value||(c.current.srcObject=null))},[c.current,s==null?void 0:s.value]),react.exports.useEffect(()=>{!c.current||(c.current.volume=d)},[c.current,d]),React.createElement("div",{style:{position:"relative",display:"flex",height:"100%",width:"100%"}},React.createElement("div",{style:{background:"#222",position:"absolute",height:"100%",width:"100%",fontSize:"43px",color:"rgba(255,255,255,0.6)",display:"flex",alignItems:"center",justifyContent:"center",opacity:s!=null&&s.props.videoEnabled?"0":"1"}},React.createElement("div",{style:{borderRadius:"50%",background:"#555",width:"70px",height:"70px",textTransform:"uppercase",display:"flex",alignItems:"center",justifyContent:"center",lineHeight:"1em"}},(s==null?void 0:s.props.displayName.slice(0,1))||"")),React.createElement("video",{ref:c,autoPlay:!0,muted:b,disablePictureInPicture:!0,playsInline:!0,style:{left:"50%",top:"50%",position:"relative",transform:"translate3d(-50%, -50%, 0)",height:"100%",opacity:s!=null&&s.props.videoEnabled?"1":"0",objectFit:(s==null?void 0:s.props.type)==="screen"?"contain":"cover",background:"rgba(0,0,0,0.6)"}}),(s==null?void 0:s.props.displayName)&&React.createElement("div",{style:{position:"absolute",bottom:0,left:0,height:30,background:"linear-gradient(90deg, rgba(0,0,0,0.5) 30px, rgba(77,75,78,0) 120px)",borderLeft:"5px solid #26ad80",padding:"0 0 0 10px",color:"rgba(255,255,255,0.9)",fontWeight:"bold",lineHeight:"30px",width:"100%"}},s.props.displayName))},RoomParticipant$1={name:"LS-Room-Participant",sourceType:"RoomParticipant",props:{isMuted:{type:Boolean,required:!1,default:!1},volume:{type:Number,required:!1,default:1}},useSource(a,s){return a.find(d=>isMatch(d.props,s.sourceProps))},create(){const a=document.createElement("div");Object.assign(a.style,{position:"relative"});let s,d;const c=()=>ReactDOM.render(React.createElement(Participant,{source:s,props:d}),a);return{root:a,onNewSource(m,g){s=m,c()},onUpdate(m){d=m,c()}}}},Image={name:"LS-Image",props:{src:{},fit:{}},create(){const a=document.createElement("img");return{root:a,onUpdate({src:s,fit:d}){a.setAttribute("src",s),Object.assign(a.style,{width:"100%",height:"100%",objectFit:d})}}}},Square={name:"LS-Square",props:{color:{default:"green"}},create(){const a=document.createElement("div");return{root:a,onUpdate({color:s}){Object.assign(a.style,{width:"100%",height:"100%",background:s||"red"})}}}},Overlay={name:"LS-Overlay",props:{url:{}},create(){const a=document.createElement("iframe");return{root:a,onUpdate({url:s}){a.setAttribute("src",s),Object.assign(a.style,{width:"100%",height:"100%"})}}}},Element={name:"Element",sourceType:"Element",create({tagName:a="div"}){const s=document.createElement(a);return{root:s,onUpdate({attributes:d={},fields:c={}}){Object.keys(d).forEach(m=>{s.setAttribute(m,d[m])}),Object.keys(c).forEach(m=>{Object.assign(s[m],c[m])})}}}};var Transforms=Object.freeze(Object.defineProperty({__proto__:null,RoomParticipant:RoomParticipant$1,Image,Square,Overlay,Element},Symbol.toStringTag,{value:"Module"}));/*! (c) Andrea Giammarchi - ISC */var self$1={};try{self$1.WeakMap=WeakMap}catch(a){self$1.WeakMap=function(s,d){var c=d.defineProperty,m=d.hasOwnProperty,g=b.prototype;return g.delete=function(et){return this.has(et)&&delete et[this._]},g.get=function(et){return this.has(et)?et[this._]:void 0},g.has=function(et){return m.call(et,this._)},g.set=function(et,nt){return c(et,this._,{configurable:!0,value:nt}),this},b;function b(et){c(this,"_",{value:"_@ungap/weakmap"+s++}),et&&et.forEach(k,this)}function k(et){this.set(et[0],et[1])}}(Math.random(),Object)}var WeakMap$1=self$1.WeakMap;/*! (c) Andrea Giammarchi - ISC */var UID="-"+Math.random().toFixed(6)+"%",UID_IE=!1;try{(function(a,s,d){return s in a&&(a.innerHTML="<p "+d+'="'+UID+'"></p>',a[s].childNodes[0].getAttribute(d)==UID)})(document.createElement("template"),"content","tabindex")||(UID="_dt: "+UID.slice(1,-1)+";",UID_IE=!0)}catch(a){}var UIDC="<!--"+UID+"-->",COMMENT_NODE=8,ELEMENT_NODE$1=1,TEXT_NODE=3,SHOULD_USE_TEXT_CONTENT=/^(?:plaintext|script|style|textarea|title|xmp)$/i,VOID_ELEMENTS=/^(?:area|base|br|col|embed|hr|img|input|keygen|link|menuitem|meta|param|source|track|wbr)$/i;/*! (c) Andrea Giammarchi - ISC */function domsanitizer(a){return a.join(UIDC).replace(selfClosing,fullClosing).replace(attrSeeker,attrReplacer)}var spaces=" \\f\\n\\r\\t",almostEverything="[^"+spaces+`\\/>"'=]+`,attrName="["+spaces+"]+"+almostEverything,tagName="<([A-Za-z]+[A-Za-z0-9:._-]*)((?:",attrPartials=`(?:\\s*=\\s*(?:'[^']*?'|"[^"]*?"|<[^>]*?>|`+almostEverything.replace("\\/","")+"))?)",attrSeeker=new RegExp(tagName+attrName+attrPartials+"+)(["+spaces+"]*/?>)","g"),selfClosing=new RegExp(tagName+attrName+attrPartials+"*)(["+spaces+"]*/>)","g"),findAttributes=new RegExp("("+attrName+`\\s*=\\s*)(['"]?)`+UIDC+"\\2","gi");function attrReplacer(a,s,d,c){return"<"+s+d.replace(findAttributes,replaceAttributes)+c}function replaceAttributes(a,s,d){return s+(d||'"')+UID+(d||'"')}function fullClosing(a,s,d){return VOID_ELEMENTS.test(s)?a:"<"+s+d+"></"+s+">"}const{isArray}=Array,{indexOf,slice}=[];var umap=a=>({get:s=>a.get(s),set:(s,d)=>(a.set(s,d),d)});const ELEMENT_NODE=1,nodeType=111,remove=({firstChild:a,lastChild:s})=>{const d=document.createRange();return d.setStartAfter(a),d.setEndAfter(s),d.deleteContents(),a},diffable=(a,s)=>a.nodeType===nodeType?1/s<0?s?remove(a):a.lastChild:s?a.valueOf():a.firstChild:a,persistent=a=>{const{childNodes:s}=a,{length:d}=s;if(d<2)return d?s[0]:a;const c=slice.call(s,0),m=c[0],g=c[d-1];return{ELEMENT_NODE,nodeType,firstChild:m,lastChild:g,valueOf(){if(s.length!==d){let b=0;for(;b<d;)a.appendChild(c[b++])}return a}}};/*! (c) Andrea Giammarchi - ISC */var createContent=function(a){var s="fragment",d="template",c="content"in b(d),m=c?function(et){var nt=b(d);return nt.innerHTML=et,nt.content}:function(et){var nt=b(s),it=b(d),ct=null;if(/^[^\S]*?<(col(?:group)?|t(?:head|body|foot|r|d|h))/i.test(et)){var st=RegExp.$1;it.innerHTML="<table>"+et+"</table>",ct=it.querySelectorAll(st)}else it.innerHTML=et,ct=it.childNodes;return g(nt,ct),nt};return function(nt,it){return(it==="svg"?k:m)(nt)};function g(et,nt){for(var it=nt.length;it--;)et.appendChild(nt[0])}function b(et){return et===s?a.createDocumentFragment():a.createElementNS("http://www.w3.org/1999/xhtml",et)}function k(et){var nt=b(s),it=b("div");return it.innerHTML='<svg xmlns="http://www.w3.org/2000/svg">'+et+"</svg>",g(nt,it.firstChild.childNodes),nt}}(document),udomdiff=(a,s,d,c,m)=>{const g=d.length;let b=s.length,k=g,et=0,nt=0,it=null;for(;et<b||nt<k;)if(b===et){const ct=k<g?nt?c(d[nt-1],-0).nextSibling:c(d[k-nt],0):m;for(;nt<k;)a.insertBefore(c(d[nt++],1),ct)}else if(k===nt)for(;et<b;)(!it||!it.has(s[et]))&&a.removeChild(c(s[et],-1)),et++;else if(s[et]===d[nt])et++,nt++;else if(s[b-1]===d[k-1])b--,k--;else if(s[et]===d[k-1]&&d[nt]===s[b-1]){const ct=c(s[--b],-1).nextSibling;a.insertBefore(c(d[nt++],1),c(s[et++],-1).nextSibling),a.insertBefore(c(d[--k],1),ct),s[b]=d[k]}else{if(!it){it=new Map;let ct=nt;for(;ct<k;)it.set(d[ct],ct++)}if(it.has(s[et])){const ct=it.get(s[et]);if(nt<ct&&ct<k){let st=et,ut=1;for(;++st<b&&st<k&&it.get(s[st])===ct+ut;)ut++;if(ut>ct-nt){const pt=c(s[et],0);for(;nt<ct;)a.insertBefore(c(d[nt++],1),pt)}else a.replaceChild(c(d[nt++],1),c(s[et++],-1))}else et++}else a.removeChild(c(s[et++],-1))}return d};/*! (c) Andrea Giammarchi - ISC */var importNode=function(a,s,d,c,m){var g=m in a,b=a.createDocumentFragment();b[s](a[c]("g")),b[s](a[c](""));var k=g?a[m](b,!0):b[d](!0);return k.childNodes.length<2?function et(nt,it){for(var ct=nt[d](),st=nt.childNodes||[],ut=st.length,pt=0;it&&pt<ut;pt++)ct[s](et(st[pt],it));return ct}:g?a[m]:function(et,nt){return et[d](!!nt)}}(document,"appendChild","cloneNode","createTextNode","importNode"),trim="".trim||function(){return String(this).replace(/^\s+|\s+/g,"")},normalizeAttributes=UID_IE?function(a,s){var d=s.join(" ");return s.slice.call(a,0).sort(function(c,m){return d.indexOf(c.name)<=d.indexOf(m.name)?-1:1})}:function(a,s){return s.slice.call(a,0)};function find(a,s){for(var d=s.length,c=0;c<d;)a=a.childNodes[s[c++]];return a}function parse(a,s,d,c){for(var m=a.childNodes,g=m.length,b=0;b<g;){var k=m[b];switch(k.nodeType){case ELEMENT_NODE$1:var et=c.concat(b);parseAttributes(k,s,d,et),parse(k,s,d,et);break;case COMMENT_NODE:var nt=k.textContent;if(nt===UID)d.shift(),s.push(SHOULD_USE_TEXT_CONTENT.test(a.nodeName)?Text(a,c):Any(k,c.concat(b)));else switch(nt.slice(0,2)){case"/*":if(nt.slice(-2)!=="*/")break;case"\u{1F47B}":a.removeChild(k),b--,g--}break;case TEXT_NODE:SHOULD_USE_TEXT_CONTENT.test(a.nodeName)&&trim.call(k.textContent)===UIDC&&(d.shift(),s.push(Text(a,c)));break}b++}}function parseAttributes(a,s,d,c){for(var m=a.attributes,g=[],b=[],k=normalizeAttributes(m,d),et=k.length,nt=0;nt<et;){var it=k[nt++],ct=it.value===UID,st;if(ct||1<(st=it.value.split(UIDC)).length){var ut=it.name;if(g.indexOf(ut)<0){g.push(ut);var pt=d.shift().replace(ct?/^(?:|[\S\s]*?\s)(\S+?)\s*=\s*('|")?$/:new RegExp("^(?:|[\\S\\s]*?\\s)("+ut+`)\\s*=\\s*('|")[\\S\\s]*`,"i"),"$1"),St=m[pt]||m[pt.toLowerCase()];if(ct)s.push(Attr(St,c,pt,null));else{for(var _t=st.length-2;_t--;)d.shift();s.push(Attr(St,c,pt,st))}}b.push(it)}}et=b.length,nt=0;for(var ht=0<et&&UID_IE&&!("ownerSVGElement"in a);nt<et;){var _e=b[nt++];ht&&(_e.value=""),a.removeAttribute(_e.name)}var ot=a.nodeName;if(/^script$/i.test(ot)){var lt=document.createElement(ot);for(et=m.length,nt=0;nt<et;)lt.setAttributeNode(m[nt++].cloneNode(!0));lt.textContent=a.textContent,a.parentNode.replaceChild(lt,a)}}function Any(a,s){return{type:"any",node:a,path:s}}function Attr(a,s,d,c){return{type:"attr",node:a,path:s,name:d,sparse:c}}function Text(a,s){return{type:"text",node:a,path:s}}var parsed=umap(new WeakMap$1);function createInfo(a,s){var d=(a.convert||domsanitizer)(s),c=a.transform;c&&(d=c(d));var m=createContent(d,a.type);cleanContent(m);var g=[];return parse(m,g,s.slice(0),[]),{content:m,updates:function(b){for(var k=[],et=g.length,nt=0,it=0;nt<et;){var ct=g[nt++],st=find(b,ct.path);switch(ct.type){case"any":k.push({fn:a.any(st,[]),sparse:!1});break;case"attr":var ut=ct.sparse,pt=a.attribute(st,ct.name,ct.node);ut===null?k.push({fn:pt,sparse:!1}):(it+=ut.length-2,k.push({fn:pt,sparse:!0,values:ut}));break;case"text":k.push({fn:a.text(st),sparse:!1}),st.textContent="";break}}return et+=it,function(){var St=arguments.length;if(et!==St-1)throw new Error(St-1+" values instead of "+et+`
`+s.join("${value}"));for(var _t=1,ht=1;_t<St;){var _e=k[_t-ht];if(_e.sparse){var ot=_e.values,lt=ot[0],Ot=1,It=ot.length;for(ht+=It-2;Ot<It;)lt+=arguments[_t++]+ot[Ot++];_e.fn(lt)}else _e.fn(arguments[_t++])}return b}}}}function createDetails(a,s){var d=parsed.get(s)||parsed.set(s,createInfo(a,s));return d.updates(importNode.call(document,d.content,!0))}var empty=[];function domtagger(a){var s=empty,d=cleanContent;return function(c){return s!==c&&(d=createDetails(a,s=c)),d.apply(null,arguments)}}function cleanContent(a){for(var s=a.childNodes,d=s.length;d--;){var c=s[d];c.nodeType!==1&&trim.call(c.textContent).length===0&&a.removeChild(c)}}/*! (c) Andrea Giammarchi - ISC */var hyperStyle=function(){var a=/acit|ex(?:s|g|n|p|$)|rph|ows|mnc|ntw|ine[ch]|zoo|^ord/i,s=/([^A-Z])([A-Z]+)/g;return function(k,et){return"ownerSVGElement"in k?c(k,et):g(k.style,!1)};function d(b,k,et){return k+"-"+et.toLowerCase()}function c(b,k){var et;return k?et=k.cloneNode(!0):(b.setAttribute("style","--hyper:style;"),et=b.getAttributeNode("style")),et.value="",b.setAttributeNode(et),g(et,!0)}function m(b){var k,et=[];for(k in b)et.push(k.replace(s,d),":",b[k],";");return et.join("")}function g(b,k){var et,nt;return function(it){var ct,st,ut,pt;switch(typeof it){case"object":if(it){if(et==="object"){if(!k&&nt!==it)for(st in nt)st in it||(b[st]="")}else k?b.value="":b.cssText="";ct=k?{}:b;for(st in it)pt=it[st],ut=typeof pt=="number"&&!a.test(st)?pt+"px":pt,!k&&/^--/.test(st)?ct.setProperty(st,ut):ct[st]=ut;et="object",k?b.value=m(nt=ct):nt=it;break}default:nt!=it&&(et="string",nt=it,k?b.value=it||"":b.cssText=it||"");break}}}}();const aria=a=>s=>{for(const d in s){const c=d==="role"?d:`aria-${d}`,m=s[d];m==null?a.removeAttribute(c):a.setAttribute(c,m)}},attribute=(a,s)=>{let d,c=!0;const m=document.createAttributeNS(null,s);return g=>{d!==g&&(d=g,d==null?c||(a.removeAttributeNode(m),c=!0):(m.value=g,c&&(a.setAttributeNodeNS(m),c=!1)))}},boolean=(a,s,d)=>c=>{d!==!!c&&((d=!!c)?a.setAttribute(s,""):a.removeAttribute(s))},data=({dataset:a})=>s=>{for(const d in s){const c=s[d];c==null?delete a[d]:a[d]=c}},event=(a,s)=>{let d,c=s.slice(2);return!(s in a)&&s.toLowerCase()in a&&(c=c.toLowerCase()),m=>{const g=isArray(m)?m:[m,!1];d!==g[0]&&(d&&a.removeEventListener(c,d,g[1]),(d=g[0])&&a.addEventListener(c,d,g[1]))}},ref=a=>s=>{typeof s=="function"?s(a):s.current=a},setter=(a,s)=>s==="dataset"?data(a):d=>{a[s]=d},hyperProperty=(a,s)=>{let d;return c=>{d!==c&&(d=c,a[s]!==c&&(c==null?(a[s]="",a.removeAttribute(s)):a[s]=c))}},readOnly=/^(?:form|list)$/i,text=(a,s)=>a.ownerDocument.createTextNode(s);function Tagger(a){return this.type=a,domtagger(this)}Tagger.prototype={attribute(a,s,d){const c=this.type==="svg";switch(s){case"class":if(c)return attribute(a,s);s="className";case"props":return setter(a,s);case"aria":return aria(a);case"style":return hyperStyle(a,d,c);case"ref":return ref(a);case".dataset":return data(a);default:return s.slice(0,1)==="."?setter(a,s.slice(1)):s.slice(0,1)==="?"?boolean(a,s.slice(1)):s.slice(0,2)==="on"?event(a,s):s in a&&!(c||readOnly.test(s))?hyperProperty(a,s):attribute(a,s)}},any(a,s){const{type:d}=this;let c=!1,m;const g=b=>{switch(typeof b){case"string":case"number":case"boolean":c?m!==b&&(m=b,s[0].textContent=b):(c=!0,m=b,s=udomdiff(a.parentNode,s,[text(a,b)],diffable,a));break;case"function":g(b(a));break;case"object":case"undefined":if(b==null){c=!1,s=udomdiff(a.parentNode,s,[],diffable,a);break}default:if(c=!1,m=b,isArray(b))if(b.length===0)s.length&&(s=udomdiff(a.parentNode,s,[],diffable,a));else switch(typeof b[0]){case"string":case"number":case"boolean":g(String(b));break;case"function":g(b.map(invoke,a));break;case"object":isArray(b[0])&&(b=b.concat.apply([],b));default:s=udomdiff(a.parentNode,s,b,diffable,a);break}else"ELEMENT_NODE"in b?s=udomdiff(a.parentNode,s,b.nodeType===11?slice.call(b.childNodes):[b],diffable,a):"text"in b?g(String(b.text)):"any"in b?g(b.any):"html"in b?s=udomdiff(a.parentNode,s,slice.call(createContent([].concat(b.html).join(""),d).childNodes),diffable,a):"length"in b&&g(slice.call(b));break}};return g},text(a){let s;const d=c=>{if(s!==c){s=c;const m=typeof c;m==="object"&&c?"text"in c?d(String(c.text)):"any"in c?d(c.any):"html"in c?d([].concat(c.html).join("")):"length"in c&&d(slice.call(c).join("")):m==="function"?d(c(a)):a.textContent=c==null?"":c}};return d}};function invoke(a){return a(this)}const{create,freeze,keys}=Object,cache=umap(new WeakMap$1),createRender=a=>({html:outer("html",a),svg:outer("svg",a),render(s,d){const c=typeof d=="function"?d():d,m=cache.get(s)||cache.set(s,createCache()),g=c instanceof LighterHole?unroll(a,m,c):c;return g!==m.wire&&(m.wire=g,s.textContent="",s.appendChild(g.valueOf())),s}}),createCache=()=>({stack:[],entry:null,wire:null}),outer=(a,s)=>{const d=umap(new WeakMap$1),c=g=>function(){return unroll(s,g,m.apply(null,arguments))};return m.for=(g,b)=>{const k=d.get(g)||d.set(g,create(null));return k[b]||(k[b]=c(createCache()))},m.node=function(){return unroll(s,createCache(),m.apply(null,arguments)).valueOf()},m;function m(){return new LighterHole(a,tta.apply(null,arguments))}},unroll=(a,s,{type:d,template:c,values:m})=>{const{length:g}=m;unrollValues(a,s,m,g);let{entry:b}=s;if(!b||b.template!==c||b.type!==d){const k=new a(d);s.entry=b={type:d,template:c,tag:k,wire:persistent(k(c,...m))}}else b.tag(c,...m);return b.wire},unrollValues=(a,{stack:s},d,c)=>{for(let m=0;m<c;m++){const g=d[m];g instanceof Hole?d[m]=unroll(a,s[m]||(s[m]=createCache()),g):isArray(g)?unrollValues(a,s[m]||(s[m]=createCache()),g,g.length):s[m]=null}c<s.length&&s.splice(c)};freeze(LighterHole);function LighterHole(a,s){this.type=a,this.template=s.shift(),this.values=s}const Hole=LighterHole,{render:render$1,html,svg}=createRender(Tagger);function tta(){let a=[],s=0,{length:d}=arguments;for(;s<d;)a.push(arguments[s++]);return a}const Free={name:"Free",layout:({props:a,children:s,size:d})=>s.reduce((c,m)=>{const{size:g={x:"100%",y:"100%"},position:b={x:0,y:0},opacity:k=1}=m.props;return vn(jt({},c),{[m.id]:{position:{x:b.x,y:b.y},size:{x:g.x,y:g.y},opacity:k}})},{})},Column={name:"Column",layout:({props:a={},children:s,size:d})=>{let{justify:c="center",align:m="center",cover:g=!1,margin:b={},dimensions:k=16/9}=a;const et=g?0:Math.min(d.y/6,12);b=jt({left:et,right:et,top:et,bottom:et,between:et},b);const nt=d.y-b.top-b.bottom,it=d.x-b.left-b.right,ct=b.between*((s.length||1)-1),st=Math.min(it,(nt-ct)/(s.length||1)*k),ut=st/k;return html.node`
      <div style=${{height:"100%",width:g?d.x+"px":"auto",display:"flex",flexDirection:"column",justifyContent:c,alignItems:m,paddingLeft:b.left+"px",paddingTop:b.top+"px",paddingBottom:b.bottom+"px",paddingRight:b.right+"px"}}>
      ${s.map((pt,St)=>html.node`<div data-node-id=${pt.id} .data=${{entry:{delay:400+St*100,offset:{x:0,y:"100%"},scale:{x:.8,y:.8},opacity:0},exit:{offset:{x:0,y:1e3},scale:{x:.8,y:.8},opacity:0},borderRadius:g?0:5}} style=${{display:"flex",width:g?"100%":st+"px",height:g?ut+"px":"auto",aspectRatio:k,marginBottom:St===s.length-1?0:b.between+"px",flexGrow:0,flexShrink:1,flexBasis:ut+"px"}}></div>`)}
      </div>
    `}},Row={name:"Row",layout:({props:a={},children:s,size:d})=>{let{justify:c="center",align:m="center",cover:g=!1,margin:b={},dimensions:k=16/9,maxWidth:et=1}=a;const nt=g?0:Math.min(d.y/6,12);b=jt({left:nt,right:nt,top:nt,bottom:nt,between:nt},b);const it=d.y-b.top-b.bottom,ct=d.x-b.left-b.right,st=b.between*((s.length||1)-1),ut=Math.min((ct-st)/(s.length||1),it*k,et*d.x),pt=ut/k;return html.node`
      <div style=${{height:g?d.y+"px":"auto",width:"100%",display:"flex",flexDirection:"row",justifyContent:c,alignItems:m,paddingLeft:b.left+"px",paddingTop:b.top+"px",paddingBottom:b.bottom+"px",paddingRight:b.right+"px"}}>
          ${s.map((St,_t)=>html.node`<div data-node-id=${St.id} .data=${{entry:{delay:400+_t*100,offset:{x:0,y:"100%"},scale:{x:.8,y:.8},opacity:0},exit:{offset:{x:0,y:1e3},scale:{x:.8,y:.8},opacity:0},borderRadius:g?0:5}} style=${{display:"flex",height:g?"100%":pt+"px",width:ut+"px",aspectRatio:k,marginRight:_t===s.length-1?0:b.between+"px",flexGrow:0,flexShrink:1,flexBasis:ut+"px"}}></div>`)}
      </div>
    `}},toMatrix=(a,s)=>a.reduce((d,c,m)=>(m%s==0?d.push([m]):d[d.length-1].push(m))&&d,[]),Grid={name:"Grid",layout:({props:a={},children:s,size:d})=>{let{dimensions:c=16/9,numPerRow:m,margin:g,cover:b=!1,maxWidth:k}=a;const et=s.length===0||b?0:Math.min(d.y/s.length/10,30);g=g!=null?g:et;const nt=d.x<d.y;let it=[];m?it=toMatrix(s,m):it=nt?getTallGrid(s.length):getWideGrid(s.length);const ct=(d.y-g)/it.length,st=d.x-g;return html.node`
    <div style=${{display:"flex",width:"100%",height:"100%",flexDirection:"column",justifyContent:"center",paddingLeft:g+"px",paddingBottom:g+"px",flexGrow:0}}>${it.map((ut,pt)=>Row.layout({props:{justify:"center",dimensions:c,cover:b,maxWidth:k||1/(it[0].length||1),margin:{top:g,right:g,left:0,bottom:0,between:g}},children:ut.map(St=>s[St]),size:{y:ct,x:st}}))}</div>`}},Presentation={name:"Presentation",layout:({props:a={},children:s,size:d})=>{let{margin:c,cover:m=!1,barWidth:g=.2,barPosition:b="side",presentationDimensions:k=16/9,viewerDimensions:et=16/9,justifyViewers:nt="center",useGrid:it=!1}=a;const ct=b==="side"?d.x*g:d.y*g,st=s[0],ut=s.filter(ot=>ot!==st),pt=s.length<=1?0:Math.min(d.x/80,30);if(c=c!=null?c:pt,!st)return Grid.layout({props:a,children:s,size:d});const St=s[1],_t=jt({},d);St&&(b==="side"?(_t.x=d.x-ct,_t.y=_t.x/k):(_t.y=d.y-ct,_t.x=_t.y*k));let ht,_e={};return it?(ht=Grid.layout,_e=jt({cover:m},m?{maxWidth:1}:{margin:c})):(ht=b==="side"?Column.layout:Row.layout,_e={margin:{top:b==="side"?c:0,left:b==="side"?0:c,bottom:c,right:c,between:c},dimensions:et,justify:nt,align:"flex-end"}),html.node`
      <div style=${{display:"flex",flexDirection:b==="side"?"row":"column",justifyContent:"space-around",alignItems:"center",position:"relative"}}>
        ${s[0]&&html.node`<div style=${{width:_t.x,height:_t.y,padding:m?0:c+"px",display:"flex",flexGrow:1}}>
            <div data-node-id=${st.id} .data=${{dimensions:k,borderRadius:m?0:5,entry:{delay:0,offset:{x:0,y:1e3},scale:{x:.5,y:.5},opacity:0},exit:{offset:{x:0,y:1e3},scale:{x:2,y:2},opacity:0}}} style=${jt({width:"100%",height:"100%"},m?{position:"absolute",top:0,left:0,width:it&&St?100-g*100+"%":"100%",height:"100%"}:{})} />
          </div>`}
        ${html.node`<div style=${jt({},b==="side"?{maxWidth:g*100+"%",height:"100%"}:{maxHeight:g*100+"%",width:"100%"})}>${St&&ht({props:_e,children:ut,size:b==="side"?{x:ct,y:d.y}:{x:d.x,y:ct}})}</div>`}
      </div>
    `}},Layered={name:"Layered",layout:({props:a={},children:s,size:d})=>html.node`<div style=${{width:"100%",height:"100%",position:"relative"}}>
      ${s.map((c,m)=>html.node`<div data-node-id=${c.id} style=${{width:"100%",height:"100%",position:"absolute",top:0,left:0}}></div>`)}
    </div>`},getWideGrid=(a=0)=>{switch(a){case 0:return[[]];case 1:return[[0]];case 2:return[[0,1]];case 3:return[[0,1],[2]];case 4:return[[0,1],[2,3]];case 5:return[[0,1,2],[3,4]];case 6:return[[0,1,2],[3,4,5]];case 7:return[[0,1,2],[3,4],[5,6]];case 8:return[[0,1,2],[3,4,5],[6,7]]}const s=Array(a).fill(null).map((d,c)=>c);return toMatrix(s,Math.round(Math.sqrt(a)))},getTallGrid=(a=0)=>{switch(a){case 0:return[[]];case 1:return[[0]];case 2:return[[0],[1]];case 3:return[[0,1],[2]];case 4:return[[0,1],[2,3]];case 5:return[[0,1],[2,3],[4]];case 6:return[[0,1],[2,3],[4,5]];case 7:return[[0,1],[2,3],[4,5],[6]];case 8:return[[0,1],[2,3],[4,5],[6,7]]}const s=Array(a).fill(null).map((d,c)=>c);return toMatrix(s,Math.ceil(Math.sqrt(s.length))-1)};var Layouts=Object.freeze(Object.defineProperty({__proto__:null,Free,Column,Row,Grid,Presentation,Layered},Symbol.toStringTag,{value:"Module"}));const updateMediaStreamTracks=(a,s)=>{const d={audio:a.getAudioTracks()[0],video:a.getVideoTracks()[0]};d.audio!==s.audio&&(d.audio&&a.removeTrack(d.audio),s.audio&&a.addTrack(s.audio)),d.video!==s.video&&(d.video&&a.removeTrack(d.video),s.video&&a.addTrack(s.video))};CoreContext.on("RoomJoined",({room:a})=>{const{compositor:s}=CoreContext;let d={},c=[],m=[],g={};const b=()=>{m.forEach(k=>{const et=g[k.id],nt=g[k.id+"-screen"],it=k.trackIds.find(_t=>{const ht=a.getTrack(_t);return(ht==null?void 0:ht.type)==="camera"}),ct=k.trackIds.find(_t=>{const ht=a.getTrack(_t);return(ht==null?void 0:ht.type)==="microphone"}),st=k.trackIds.find(_t=>{const ht=a.getTrack(_t);return(ht==null?void 0:ht.type)==="screen_share"}),ut=a.getTrack(it),pt=a.getTrack(ct),St=a.getTrack(st);updateMediaStreamTracks(et,{video:ut==null?void 0:ut.mediaStreamTrack,audio:pt==null?void 0:pt.mediaStreamTrack}),updateMediaStreamTracks(nt,{video:St==null?void 0:St.mediaStreamTrack}),s.updateSource(k.id,{videoEnabled:Boolean(ut&&!ut.isMuted),audioEnabled:Boolean(pt&&!pt.isMuted)}),s.updateSource(k.id+"-screen",{videoEnabled:Boolean(St&&!St.isMuted)})})};a.useTracks(k=>{const et=k.filter(it=>!c.some(ct=>ct.id===it.id)),nt=c.filter(it=>!k.some(ct=>ct.id===it.id));c=k,b(),et.forEach(it=>{const{mediaStreamTrack:ct,id:st,participantId:ut,type:pt}=a.getTrack(it.id),St={id:st,isActive:!0,value:ct,props:{trackId:st,participantId:ut,isMuted:it.isMuted,type:pt}};ct&&(ct.kind==="video"?s.addSource("RoomVideo",St):s.addSource("RoomAudio",St))}),nt.forEach(it=>{var ct;s.removeSource(it.id),(ct=d[it.id])==null||ct.call(d)})}),a.useParticipants(k=>{const et=k.filter(it=>!m.some(ct=>ct.id===it.id)),nt=m.filter(it=>!k.some(ct=>ct.id===it.id));m=k,et.forEach(it=>{const{id:ct}=it,st=new MediaStream([]),ut=new MediaStream([]);g[ct]=st,g[ct+"-screen"]=ut,s.addSource("RoomParticipant",{id:ct,isActive:!0,value:st,props:{id:ct,type:"camera",displayName:it.displayName||it.id,audioEnabled:!1,videoEnabled:!1}}),s.addSource("RoomParticipant",{id:ct+"-screen",isActive:!0,value:ut,props:{id:ct,type:"screen",displayName:it.displayName||it.id,audioEnabled:!1,videoEnabled:!1}})}),b(),nt.forEach(it=>{var ct;s.removeSource(it.id),(ct=d[it.id])==null||ct.call(d)})})});const RoomParticipant={type:"RoomParticipant",valueType:MediaStream,props:{id:{},type:{},videoEnabled:{},audioEnabled:{}}},RoomVideo={type:"RoomVideo",valueType:MediaStreamTrack,props:{trackId:{},participantId:{},roomId:{},type:{}}},RoomAudio={type:"RoomAudio",valueType:MediaStreamTrack,props:{trackId:{},participantId:{},roomId:{},type:{}}};var Sources=Object.freeze(Object.defineProperty({__proto__:null,RoomParticipant,RoomVideo,RoomAudio},Symbol.toStringTag,{value:"Module"}));React.createContext({studio:null,project:null,room:null,webcamId:null,microphoneId:null,setStudio:()=>{},setProject:()=>{},setRoom:()=>{},setWebcamId:()=>{},setMicrophoneId:()=>{},projectCommands:{}});const TRANSITION_DURATION=300,findLayoutUp=(a,s,d=0)=>{const m=a.parentElement;return m instanceof Layout&&(d=0,!s||s(m))?m:m?d>4?null:findLayoutUp(m,s,d+1):null},TRANSITION_FIELDS="opacity, transform, width, height",layoutIndex={},parentIdIndex={},childIndex={};let rootLayout,_cid=1;const ignoredAttributes=["style","id","className"];let tickOps={};const tick=()=>{if(nextTick=null,window.__dragging){nextTick=nextTick||requestAnimationFrame(tick);return}const a=new Set,s=new Set,d=new Set;Object.entries(tickOps).forEach(([c,m])=>{m.forEach(([g,b,k])=>{switch(g){case"childInserted":{s.has(k)?s.delete(k):a.add(k);break}case"childRemoved":{a.has(k)?a.delete(k):s.add(k);break}case"childRemoveFinished":{d.add(k);break}}})});try{s.forEach(m=>{var b,k;const g=childIndex[m];g.nextSiblingEl?(b=g.parentEl)==null||b.insertBefore(g,g.nextSiblingEl):(k=g.parentEl)==null||k.append(g),g.runRemove()}),d.forEach(m=>{const g=childIndex[m];if(g.removed){g.previousSiblingEl&&(g.previousSiblingEl.nextSiblingEl=g.nextSiblingEl),g.nextSiblingEl&&(g.nextSiblingEl.previousSiblingEl=g.previousSiblingEl);return}});const c=window.__scale;Object.entries(tickOps).forEach(([m,g])=>{const b=layoutIndex[m],k=b.getBoundingClientRect(),et={x:k.width/c,y:k.height/c};b.updatePositions({size:et,inserted:a,removed:s})})}catch(c){log$1.warn("Failed to run Layout ops",c)}tickOps={}};let nextTick;const queueOp=a=>{const[s,d]=a,c=tickOps[d]||[];tickOps[d]=[...c,a],nextTick=nextTick||requestAnimationFrame(tick)};class Layout extends HTMLElement{constructor(){super();yn(this,"parentEl");yn(this,"slotEl");yn(this,"parentLayout");yn(this,"nodes");yn(this,"mutationObserver");yn(this,"latestSize");yn(this,"isFirst",!0);yn(this,"isUpdating",!1);yn(this,"cid");this.cid=++_cid}log(...d){var c;log$1.debug(...d,{id:this.dataset.id,parent:(c=this.parentLayout)==null?void 0:c.dataset.id},this)}connectedCallback(){var d;this.parentEl=this.parentElement,this.parentLayout=findLayoutUp(this),this.slotEl=this.closest("[data-layout-child]"),Array.from(this.children).forEach(c=>this.initializeChild(c)),rootLayout||(rootLayout=this),layoutIndex[this.dataset.id]=this,parentIdIndex[this.dataset.id]=(d=this.parentLayout)==null?void 0:d.id,Object.assign(this.style,{width:"100%",height:"100%",position:"absolute",top:"0px",left:"0px",pointerEvents:"none",boxSizing:"border-box"}),this.mutationObserver&&this.mutationObserver.disconnect(),this.mutationObserver=new MutationObserver(c=>{!this.isConnected||c.forEach(m=>{m.type==="attributes"&&!ignoredAttributes.includes(m.attributeName)?queueOp(["attributesChanged",this.dataset.id]):m.type==="childList"&&(m.addedNodes.forEach(g=>{const b=childIndex[g.dataset.id];g.removed||(b?b!==g&&(this.initializeChild(g),g.setAttribute("style",b.getAttribute("style")),g.data=b.data):this.initializeChild(g),queueOp(["childInserted",this.dataset.id,g.dataset.id]))}),m.removedNodes.forEach(g=>{g.removed||queueOp(["childRemoved",this.dataset.id,g.dataset.id])}))})}),this.mutationObserver.observe(this,{childList:!0,attributes:!0}),this.latestSize||queueOp(["attributesChanged",this.dataset.id])}disconnectedCallback(){}adoptedCallback(){}updatePositions(d){if(this.isUpdating)return;this.isUpdating=!0;const{size:c,inserted:m=new Set,removed:g=new Set}=d;this.nodes=Array.from(this.children||[]).map((nt,it)=>{const ct=getElementAttributes(nt);return{id:nt.dataset.id,props:ct,children:[]}});const b=JSON.parse(this.getAttribute("props")||"{}");this.latestSize=c;const k={id:this.dataset.id,props:b,children:this.nodes,size:c};let et=layoutChildren(k);Promise.all(Object.entries(et).map(async([nt,it])=>{var ot,lt,Ot,It,Pt,$t,bt,Rt,Ct,vt,Tt;const{size:ct,position:st,zIndex:ut=1,opacity:pt=1,borderRadius:St=0,entryTransition:_t={},exitTransition:ht={}}=it;let _e=childIndex[nt]||this.querySelector(`[data-layout-child][data-id="${nt}"]`);if(_e){if(_e.removed)return;ht&&(_e.data.exitTransition=ht),_t&&(_e.data.entryTransition=_t),_e.data.size=ct,_e.data.position=st,Object.assign(_e.style,{top:0,left:0,position:"absolute",transformOrigin:"50% 50%",transitionDuration:"0ms",transitionDelay:"0ms",visibility:"visible",boxSizing:"border-box",overflow:"hidden",borderRadius:St+"px"});let wt="0ms",zt=this.isFirst?asDuration(0):asDuration(TRANSITION_DURATION);if(m.has(nt))Object.assign(_e.style,{transitionProperty:TRANSITION_FIELDS,transitionDuration:"0ms",transitionTimingFunction:(ot=_t.timingFn)!=null?ot:"ease",transform:`translate3d(calc(${asSize(st==null?void 0:st.x)} + ${asSize((Ot=(lt=_t.offset)==null?void 0:lt.x)!=null?Ot:0)}), calc(${asSize(st==null?void 0:st.y)} + ${asSize((Pt=(It=_t.offset)==null?void 0:It.y)!=null?Pt:0)}), 0) scaleX(${(bt=($t=_t.scale)==null?void 0:$t.x)!=null?bt:1}) scaleY(${(Ct=(Rt=_t.scale)==null?void 0:Rt.y)!=null?Ct:1})`,opacity:(vt=_t.opacity)!=null?vt:pt,width:ct==null?void 0:ct.x,height:ct==null?void 0:ct.y}),wt=asDuration((Tt=_t.delay)!=null?Tt:0);else if(_e.data.rootOffset){const Wt=rootLayout.getBoundingClientRect(),Ht=this.getBoundingClientRect(),Yt=window.__scale,$={x:Ht.x/Yt-Wt.x/Yt,y:Ht.y/Yt-Wt.y/Yt},rt={x:_e.data.rootOffset.x-$.x,y:_e.data.rootOffset.y-$.y};_e.style.transform=`translate3d(${asSize(rt.x)}, ${asSize(rt.y)}, 0) scaleX(1) scaleY(1)`}await new Promise(Wt=>window.setTimeout(Wt)),Object.assign(_e.style,{transitionProperty:TRANSITION_FIELDS,transitionDuration:zt,transitionDelay:wt,transform:`translate3d(${asSize(st==null?void 0:st.x)}, ${asSize(st==null?void 0:st.y)}, 0) scaleX(1) scaleY(1)`,opacity:pt,width:ct==null?void 0:ct.x,height:ct==null?void 0:ct.y,zIndex:ut});const Nt=window.__scale,Ft=()=>{const Wt=rootLayout.getBoundingClientRect(),Ht=_e.getBoundingClientRect();_e.data.rootOffset={x:Ht.x/Nt-Wt.x/Nt,y:Ht.y/Nt-Wt.y/Nt}};Ft(),_e.addEventListener("transitionend",()=>{Ft()})}})).then(()=>{this.isUpdating=!1}),this.isFirst=!1,Array.from(this.querySelectorAll("ls-layout")).forEach(nt=>{if(!et[nt.dataset.id])return;const it=et[nt.dataset.id].size;nt.updatePositions({size:{x:sizeToNum(it.x,c.x),y:sizeToNum(it.y,c.y)}})})}initializeChild(d){var m;if(!((m=d.dataset)!=null&&m.id))return log$1.warn("Layout: Child requires `data-id` at the time it is added to a Layout");d.mutationObserver||(d.mutationObserver=new MutationObserver(g=>{g.forEach(b=>{if(b.type==="attributes"){if(b.attributeName==="style")return;queueOp(["childAttributesChanged",this.dataset.id,d.dataset.id])}})}),d.mutationObserver.observe(d,{childList:!0,attributes:!0}));const c={entryTransition:{delay:0,opacity:0,scale:{x:1,y:1},offset:{x:0,y:0}},exitTransition:{delay:0,opacity:0,scale:{x:1,y:1},offset:{x:0,y:0}},position:{x:0,y:0},size:{x:0,y:0},opacity:0,fit:"cover",borderRadius:0,zIndex:1};d.data=c,d.parentEl=d.parentElement,d.nextSiblingEl=d.nextSibling,d.previousSiblingEl=d.previousSibling,d.previousSiblingEl&&(d.previousSiblingEl.nextSiblingEl=d),d.toggleAttribute("data-layout-child",!0),childIndex[d.dataset.id]=d,d.runRemove=async()=>{var b,k,et,nt,it,ct,st,ut,pt,St,_t,ht;d.removed=!0;const g=TRANSITION_DURATION;return await new Promise(_e=>window.setTimeout(_e)),Object.assign(d.style,{zIndex:0,transitionDelay:asDuration(0),transitionDuration:asDuration(g),transitionProperty:TRANSITION_FIELDS,transitionTimingFunction:(b=c.exitTransition.timingFn)!=null?b:"ease",transform:`translate3d(calc(${asSize((k=c.position)==null?void 0:k.x)} + ${asSize((nt=(et=c.exitTransition.offset)==null?void 0:et.x)!=null?nt:0)}), calc(${asSize((it=c.position)==null?void 0:it.y)} + ${asSize((st=(ct=c.exitTransition.offset)==null?void 0:ct.y)!=null?st:0)}), 0) scaleX(${(pt=(ut=c.exitTransition.scale)==null?void 0:ut.x)!=null?pt:1}) scaleY(${(_t=(St=c.exitTransition.scale)==null?void 0:St.y)!=null?_t:1})`,opacity:(ht=c.exitTransition.opacity)!=null?ht:0}),d.removed=!0,d.transition=new Promise(_e=>{const ot=()=>{d.transition=null,d.remove(),queueOp(["childRemoveFinished",this.dataset.id,d.dataset.id]),clearTimeout(lt),_e()},lt=window.setTimeout(ot,parseInt(String(g))+600);d.addEventListener("transitionend",ot,{once:!0})}),d.transition}}}const ensureLayoutContainer=a=>{const s=document.getElementById("__ls-layout-container");if(s)return Object.assign(s.style,{width:a.x+"px",height:a.y+"px"}),s;const d=document.createElement("div");return d.id="__ls-layout-container",Object.assign(d.style,{position:"fixed",visibility:"hidden",top:0+"px",left:0+"px",zIndex:-1,width:a.x+"px",height:a.y+"px"}),document.body.append(d),d},layoutChildren=({id:a,props:s={},children:d,size:c})=>{const m={props:s,children:d,size:c},g=htmlLayouts[s.layout]?htmlLayouts[s.layout].layout(m):htmlLayouts.Free.layout(m);if(!(g instanceof HTMLElement))return g;const b=Array.from(g.querySelectorAll("[data-node-id]")),k=document.createElement("div");k.style.height=g.style.height=c.y+"px",k.style.width=g.style.width=c.x+"px",k.style.position="absolute",k.style.top="0px",k.style.left="0px",k.style.boxSizing="border-box",k.setAttribute("data-wrapper-id",a),k.append(g);const et=ensureLayoutContainer(c),nt=et.querySelector(`[data-wrapper-id="${a}"]`);nt?nt.replaceWith(k):et.append(k);const it=g.getBoundingClientRect(),ct={};return b.forEach(st=>{var ht,_e,ot,lt,Ot,It,Pt;const ut=st.dataset.nodeId;if(!ut)return;const pt=Number((ht=st.dataset.opacity)!=null?ht:st.style.opacity||1),St=st.getBoundingClientRect();let _t={position:{x:St.x-it.x+"px",y:St.y-it.y+"px"},size:{x:St.width+"px",y:St.height+"px"},zIndex:1,opacity:pt,entryTransition:(ot=(_e=st.data)==null?void 0:_e.entry)!=null?ot:{},exitTransition:(Ot=(lt=st.data)==null?void 0:lt.exit)!=null?Ot:{},borderRadius:(Pt=(It=st.data)==null?void 0:It.borderRadius)!=null?Pt:0};`${s.showcase}-x`===ut&&(_t.position={x:it.x+"px",y:it.y+"px"},_t.size={x:it.width+"px",y:it.height+"px"},_t.zIndex=2),ct[ut]=_t,positionIndex[st.dataset.nodeId]=_t}),ct},positionIndex={},htmlLayouts={},registerLayout$1=a=>{asArray(a).forEach(s=>{htmlLayouts[s.name]=s})};var htmlLayouts$1=Object.freeze(Object.defineProperty({__proto__:null,Layout,ensureLayoutContainer,layoutChildren,htmlLayouts,registerLayout:registerLayout$1},Symbol.toStringTag,{value:"Module"}));const htmlTransforms={},defaultHtmlTransforms={},setDefaultTransforms$1=(a={})=>{Object.keys(a).forEach(s=>{defaultHtmlTransforms[s]=a[s]})},registerTransform$1=a=>{asArray(a).forEach(s=>{htmlTransforms[s.name]=s})},nodeElementIndex={},elementSourceIndex={},getElementsBySourceType=a=>elementSourceIndex[a]||[],getElementByNodeId=a=>nodeElementIndex[a],getTransformByName=a=>htmlTransforms[a],updateSourceForNode=a=>{var et;const s=getElementByNodeId(a);if(!s)return;const d=getTransformByName(s.transformName);if(!d.useSource)return;const c=CoreContext.compositor.getNode(a),m=CoreContext.compositor.getSources(s.sourceType),g=d.useSource(m,c.props),b=s.sourceValue,k=g==null?void 0:g.value;s.sourceValue=k,Object.is(b,k)||s.onNewSource(g,c.props||{}),(et=s.onUpdate)==null||et.call(s,c.props||{})},getElement=a=>{if(nodeElementIndex[a.id])return nodeElementIndex[a.id];const{compositor:s}=CoreContext,{props:d={}}=a,{sourceType:c}=d;if(!c)return null;let m=defaultHtmlTransforms[c],g;m?g=htmlTransforms[m]:g=Object.values(htmlTransforms).find(et=>et.sourceType===c);const b=vn(jt({},g.create(a.props)),{sourceType:c,nodeId:a.id,transformName:g.name});nodeElementIndex[a.id]=b,elementSourceIndex[c]=[...elementSourceIndex[c]||[],b],window.setTimeout(()=>{var et;(et=b.onUpdate)==null||et.call(b,a.props)}),g.useSource&&window.setTimeout(()=>{updateSourceForNode(a.id)});const k=[b.onEvent&&s.subscribe(b.onEvent),CoreContext.on("NodeChanged",({nodeId:et})=>{var nt;if(et===a.id){const it=s.getNode(et);(nt=b.onUpdate)==null||nt.call(b,it.props),g.useSource&&updateSourceForNode(it.id)}}),CoreContext.on("NodeRemoved",({nodeId:et})=>{var nt;if(et===a.id){const it=s.getNode(et),{sourceType:ct="Element"}=it.props;k.forEach(st=>st==null?void 0:st()),(nt=b.dispose)==null||nt.call(b),delete nodeElementIndex[it.id],elementSourceIndex[ct]=elementSourceIndex[ct].filter(st=>st!==nodeElementIndex[it.id])}})];return b};var htmlTransforms$1=Object.freeze(Object.defineProperty({__proto__:null,htmlTransforms,setDefaultTransforms:setDefaultTransforms$1,registerTransform:registerTransform$1,getElementsBySourceType,getElementByNodeId,getTransformByName,updateSourceForNode,getElement},Symbol.toStringTag,{value:"Module"}));const sourceTypes={},registerSource$1=a=>{asArray(a).forEach(s=>{var d;(d=s.init)==null||d.call(s,vn(jt({},pick$1(CoreContext.compositor,["removeSource","updateSource","setSourceActive","setSourceInactive","triggerEvent"])),{addSource:c=>CoreContext.compositor.addSource(s.type,c)})),sourceTypes[s.type]=s})};var sources=Object.freeze(Object.defineProperty({__proto__:null,sourceTypes,registerSource:registerSource$1},Symbol.toStringTag,{value:"Module"}));const{forEachDown,insertAt,toDataNode,pull,replaceItem}=Logic;let compositor;const start=a=>{if(compositor)return;const s=a.dbAdapter,d={},c={},m={},g={};try{customElements.define("ls-layout",Layout)}catch(pt){log$1.warn(pt)}const b={},k={},et={};let nt=0;const it=new Map,ct=pt=>{if(typeof pt!="function")return;const St=++nt;return it.set(St,pt),()=>{it.delete(St)}},st=(pt,St)=>{it.forEach(_t=>_t(pt,St))},ut=pt=>{const St=getElementsBySourceType(pt);st("AvailableSourcesChanged",{type:pt,sources:g[pt]}),St.forEach(_t=>{updateSourceForNode(_t.nodeId)})};return compositor={transforms:htmlTransforms,layouts:htmlLayouts,projects:c,sources:sourceTypes,registerTransform:registerTransform$1,registerLayout:registerLayout$1,registerSource:registerSource$1,registerType:()=>{},subscribe:ct,useEvent:(pt,St)=>{const _t=++nt;return it.set(_t,(ht,_e)=>{if(pt===ht)return St(ht,_e)}),()=>{it.delete(_t)}},triggerEvent:st,addSource:(pt,St)=>{if(!St.id)throw new Error('Cannot add source without field "id"');if(!St.value)throw new Error('Cannot add source without field "value"');const{id:_t,value:ht,props:_e,isActive:ot=!0}=St;m[_t]={id:_t,value:ht,props:_e,isActive:ot,type:pt},g[pt]=[...g[pt]||[],m[_t]],ut(pt)},removeSource:pt=>{const St=m[pt];!St||(delete m[pt],g[St.type]=g[St.type].filter(_t=>_t.id!==pt),ut(St.type))},updateSource:(pt,St)=>{const _t=m[pt];_t.props=jt(jt({},_t.props),St),ut(_t.type)},setSourceActive:(pt,St=!0)=>{const _t=m[pt];_t.isActive=St,ut(_t.type)},getSources:pt=>g[pt]||[],getProject:pt=>c[pt],getNodeProject:pt=>c[b[pt]],getNodeParent:pt=>et[k[pt]],getNode:pt=>et[pt],createProject:async(pt={},St)=>{const{id:_t,props:ht={},children:_e=[]}=pt,ot=await s(St,{get:()=>null,getParent:()=>null}).insert(ht),lt={id:ot,props:ht,children:_e};return forEachDown(pt,Ot=>{}),et[ot]=lt,compositor.loadProject(lt,St)},loadProject:(pt,St)=>{if(!pt)return;if(St=St||pt.id,c[St])return c[St];forEachDown(pt,(ot,lt)=>{et[ot.id]=ot,k[ot.id]=lt==null?void 0:lt.id,b[ot.id]=St});const _t={insert:async(ot,lt,Ot=0)=>{if(ot.id&&et[ot.id])return et[ot.id];if(ot.children||(ot.children=[]),ot.props||(ot.props={}),lt){const It=et[lt];if(!It)throw"Parent node not found with ID";It.children=insertAt(Ot,ot,It.children||[]),k[ot.id]=lt}return et[ot.id]=ot,b[ot.id]=St,ot.id},update:async(ot,lt={},Ot)=>{const It=et[ot];if(Ot){const Pt=Ot.map($t=>{const bt=et[$t];return k[bt.id]=ot,bt});It.children=Pt}It.props=jt(jt({},It.props),lt)},remove:async ot=>{const lt=et[k[ot]];lt&&(lt.children=lt.children.filter(Ot=>Ot.id!==ot)),et[ot]&&(et[ot]._deleted=!0)}},ht={id:St,getRoot:()=>pt,get(ot){return et[ot]},getParent(ot){return et[k[ot]]},local:_t,insert:async(ot={},lt,Ot=0)=>{const Pt={id:await _e.insert(ot,lt,Ot),props:ot,children:[]};return _t.insert(Pt,lt,Ot)},update:async(ot,lt)=>(await _t.update(ot,lt),_e.update(ot,lt)),remove:async ot=>{await _t.remove(ot);const lt=et[k[ot]],Ot=lt.children.filter(It=>It.id!==ot);return _e.batch([["delete",{id:ot}],["update",vn(jt({},lt),{children:Ot})]])},reorder:async(ot,lt)=>{const Ot=et[ot];return Ot.children=lt.map(It=>Ot.children.find(Pt=>Pt.id===It)),_e.batch([["update",Ot]])},move:async(ot,lt,Ot=0)=>{const It=et[ot],Pt=et[k[ot]],$t=et[lt];Pt.children=pull(Pt.children,It),$t.children=insertAt(Ot,It,$t.children),_e.batch([["update",$t],["update",Pt]]),k[ot]=lt},swap:async(ot,lt)=>{const Ot=et[ot],It=et[lt],Pt=et[k[ot]],$t=et[k[lt]];Pt.children=replaceItem(bt=>bt.id===ot,It,Pt.children),$t.children=replaceItem(bt=>bt.id===lt,Ot,$t.children),k[ot]=$t.id,k[lt]=Pt.id,_e.batch([["update",Pt],["update",$t]])}};Object.defineProperty(ht,"nodes",{get(){return Object.values(et).filter(ot=>b[ot.id]===ht.id)}});const _e=d[St]||s(St,{get:ot=>toDataNode(ht.get(ot)),getParent:ot=>toDataNode(ht.getParent(ot))});return d[St]=_e,c[St]=ht,ht}},compositor};var Compositor=Object.freeze(Object.defineProperty({__proto__:null,Transform:htmlTransforms$1,Layout:htmlLayouts$1,Source:sources,start},Symbol.toStringTag,{value:"Module"}));lib$2.LiveApiModel.Rendering;lib$2.LiveApiModel.VideoRendering;lib$2.LiveApiModel.AudioRendering;lib$2.LiveApiModel.RenderingQuality;lib$2.LiveApiModel.Encoding;lib$2.LiveApiModel.VideoEncoding;lib$2.LiveApiModel.AudioEncoding;lib$2.LiveApiModel.Role;lib$2.LiveApiModel.DestinationAddress;lib$2.LiveApiModel.VideoCodec;lib$2.LiveApiModel.AudioCodec;lib$2.LiveApiModel.VideoCodecRateControl;lib$2.LiveApiModel.VideoCodecProfile;const{Transform}=Compositor;class ErrorBoundary extends React.Component{constructor(s){super(s),this.state={error:null}}componentDidCatch(s,d){log$1.warn(s,d)}static getDerivedStateFromError(){return{error:!0}}render(){return this.state.error?null:this.props.children}}const onDrop=async(a,s)=>{s.preventDefault(),s.stopPropagation();const{dropNodeId:d,dropType:c,project:m}=a,g=s.dataTransfer.getData("text/plain");if(log$1.debug("Compositor: Dropping",{dropType:c,dragNodeId:g,dropNodeId:d}),d===g)return;const[b,k,et,nt]=await Promise.all([m.compositor.get(g),m.compositor.get(d),m.compositor.getParent(g),m.compositor.getParent(d)]);if(c==="layout")return et.id===d?void 0:CoreContext.Command.moveNode({projectId:m.id,nodeId:b.id,parentId:k.id});if(et.id!==(nt==null?void 0:nt.id))return CoreContext.Command.swapNodes({projectId:m.id,nodeAId:b.id,nodeBId:k.id});const it=et.children.map(ct=>ct.id);return CoreContext.Command.reorderNodes({projectId:m.id,parentId:et.id,childIds:swapItems(b.id,k.id,it)})};let foundDropTarget=!1;const ElementTree=a=>{var _t,ht,_e;const s=react.exports.useRef(),d=react.exports.useRef(),{nodeId:c,project:m,interactive:g=!0,drag:b=!1,drop:k=!1,dblClickShowcase:et=!1}=a,nt=m.compositor.get(c);if(!nt)return null;const it=Transform.getElement(nt),ct=nt.props.layout||"Row";let st=k?{onDrop:ot=>(foundDropTarget=!0,onDrop({dropType:"layout",dropNodeId:nt.id,project:m},ot)),onDragOver:ot=>{const lt=ot.currentTarget;ot.preventDefault(),ot.stopPropagation(),lt.classList.toggle("drag-target",!0)},onDragLeave:ot=>{const lt=ot.currentTarget;ot.preventDefault(),lt.classList.toggle("drag-target",!1)}}:{},ut=b?{draggable:!0,ondrop:ot=>(foundDropTarget=!0,onDrop({dropType:"transform",dropNodeId:nt.id,project:m},ot)),ondragstart:ot=>{log$1.debug("Compositor: Dragging",nt.id),foundDropTarget=!1,ot.dataTransfer.setData("text/plain",nt.id),window.__dragging=!0},ondragend:ot=>{foundDropTarget||(log$1.info("Compositor: No drop target - deleting node",nt),CoreContext.Command.deleteNode({nodeId:nt.id})),log$1.debug("Compositor: DragEnd",ot),window.__dragging=!1}}:{};react.exports.useEffect(()=>(s.current&&it&&(s.current.appendChild(it.root),Object.assign(s.current.style,{width:"100%",height:"100%",position:"relative",overflow:"hidden"}),Object.assign(it.root,ut),Object.assign(it.root.style,jt({pointerEvents:b?"all":"none",width:"100%",height:"100%",position:"relative"},nt.props.style||{})),it.root.addEventListener("dblclick",a.onDoubleClick)),()=>it==null?void 0:it.root.removeEventListener("dblclick",a.onDoubleClick)),[s.current,it]);const pt={drag:g,drop:g};ct==="Layered"&&(pt.drag=!1,pt.drop=!1);const St=jt({layout:ct},(_t=nt.props.layoutProps)!=null?_t:{});return React.createElement("div",vn(jt({ref:d,"data-id":nt.id+"-x"},st),{style:{display:"flex",flex:"0 0 auto",justifyContent:"center",position:"relative",width:((ht=nt.props.size)==null?void 0:ht.x)||"100%",height:((_e=nt.props.size)==null?void 0:_e.y)||"100%",pointerEvents:"none"}}),React.createElement("div",{ref:s}),React.createElement(ErrorBoundary,null,React.createElement("ls-layout",{"data-id":nt.id+"-x",props:JSON.stringify(St),layout:ct},nt.children.map(ot=>React.createElement(ElementTree,{key:ot.id,nodeId:ot.id,project:m,interactive:g,drag:pt.drag,drop:pt.drop,dblClickShowcase:et,onDoubleClick:()=>{var Ot;const lt=(Ot=nt.props.layoutProps)==null?void 0:Ot.showcase;CoreContext.Command.updateNode({nodeId:nt.id,props:{layoutProps:vn(jt({},nt.props.layoutProps),{showcase:lt===ot.id?null:ot.id})}})}})))))},useForceUpdate=()=>{const[a,s]=react.exports.useState(0);return()=>s(d=>d+1)},Root=a=>{const{project:s,dragAndDrop:d,dblClickShowcase:c}=a,m=useForceUpdate();react.exports.useEffect(()=>CoreContext.on("NodeChanged",()=>{m()}),[]);const g=s.compositor.getRoot();return React.createElement("div",{onDrop:b=>{foundDropTarget=!0,b.preventDefault()},onDragOver:b=>{b.preventDefault()},onDragLeave:b=>{b.preventDefault()},style:{userSelect:"none",width:g.props.size.x+"px",height:g.props.size.y+"px"}},React.createElement("div",{style:{width:"100%",height:"100%",overflow:"hidden"}},React.createElement(ElementTree,{nodeId:g.id,project:s,interactive:d,dblClickShowcase:c,drag:!1,drop:!1})))};let wrapperEl;const render=async a=>{const{containerEl:s,projectId:d,dragAndDrop:c=!1,dblClickShowcase:m=c}=a,g=getProject(d);if(CoreContext.clients.LayoutApi().subscribeToLayout(g.layoutApi.layoutId),!s||!g)return;if(!s.shadowRoot){s.attachShadow({mode:"open"});const ct=document.createElement("style");ct.textContent=getStyle(),wrapperEl=document.createElement("div"),Object.assign(wrapperEl.style,{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",transformOrigin:"center"}),s.shadowRoot.appendChild(ct),s.shadowRoot.appendChild(wrapperEl),new ResizeObserver(ut=>{nt()}).observe(s)}const b=g.compositor.getRoot(),{x:k,y:et}=b.props.size,nt=()=>{const{width:ct,height:st}=s.getBoundingClientRect(),ut=ct/st,pt=k/et;let St;ct&&st?pt>ut?St=ct/k:St=st/et:St=1,wrapperEl.style.transform=`scale(${St})`,window.__scale=St,it()},it=()=>{ReactDOM.render(React.createElement(Root,{project:g,dragAndDrop:c,dblClickShowcase:m}),wrapperEl)};nt()},getStyle=()=>`
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
  font-family: 'Arial';
}

video {
  width: 100%;
  height: 100%;
  object-fit: contain;
}
`,BroadcastPhase=lib$2.LiveApiModel.ProjectBroadcastPhase,{registerTransform,setDefaultTransforms}=htmlTransforms$1,{registerLayout}=htmlLayouts$1,{registerSource}=sources,{trigger}=CoreContext,init=async(a={})=>{const s=a.env||"prod",d=a.logLevel||"Warn";log$1.getLogger("livekit").setLevel(d),log$1.setLevel(d),log$1.info("Initializing Studio SDK...");const{layouts:m=[],transforms:g=[],sources:b=[],defaultTransforms:k={},guestToken:et}=a,nt=new lib$2.ApiStream({sdkVersion:CoreContext.version,env:s,logLevel:d});CoreContext.config=config(s),CoreContext.clients=nt,CoreContext.compositor=start({dbAdapter:compositorAdapter}),CoreContext.logLevel=d,CoreContext.Request=await __vitePreload(()=>import("./requests.ab0a5754.js"),[]),CoreContext.Command=await __vitePreload(()=>import("./commands.879b0421.js"),[]),window.__StudioKit=jt({},CoreContext),setDefaultTransforms(jt(jt({},k),CoreContext.config.defaults.transforms)),registerSource([...Object.values(Sources),...b]),registerTransform([...Object.values(Transforms),...g]),registerLayout([...Object.values(Layouts),...m]);const it=await nt.load(et);let ct;it&&await nt.LiveApi().project.getProject(jt({},it)).then(ut=>hydrateProject(ut.project)).then(async ut=>{ut.isInitial=!0,CoreContext.state.projects=[ut],ct=await CoreContext.Command.setActiveProject({projectId:ut.id})}),nt.LiveApi().on(lib$2.LiveApiModel.EventType.EVENT_TYPE_COLLECTION,(ut,pt)=>{log$1.info("Received: Collection event",pt,ut)}),nt.LiveApi().on(lib$2.LiveApiModel.EventType.EVENT_TYPE_DESTINATION,(ut,pt)=>{log$1.info("Received: Destination event",pt,ut)}),nt.LiveApi().on(lib$2.LiveApiModel.EventType.EVENT_TYPE_SOURCE,(ut,pt)=>{log$1.info("Received: Source event",pt,ut)}),nt.LiveApi().on(lib$2.LiveApiModel.EventType.EVENT_TYPE_PROJECT,(ut,pt)=>{var St,_t;switch(log$1.info("Received: Project event",pt,ut),pt){case lib$2.LiveApiModel.EventSubType.EVENT_SUB_TYPE_UPDATE:{const{projectId:ht,updateMask:_e,project:ot}=ut.update;_e.includes("metadata")&&trigger("ProjectMetaUpdated",{projectId:ht,meta:ot.metadata});const lt=getProject((St=ut.update)==null?void 0:St.projectId);if(!lt)return;lt.videoApi.project=ot,lt.props=ot.metadata}case lib$2.LiveApiModel.EventSubType.EVENT_SUB_TYPE_STATE:{const ht=getProject((_t=ut.state)==null?void 0:_t.projectId);if(!ht)return;if(ut.state.error){trigger("BroadcastError",{projectId:ht.id,error:ut.state.error});return}if(ut.state.phase){const _e=ut.state.phase;_e===BroadcastPhase.PROJECT_BROADCAST_PHASE_RUNNING?trigger("BroadcastStarted",{projectId:ht.id}):_e===BroadcastPhase.PROJECT_BROADCAST_PHASE_STOPPED&&trigger("BroadcastStopped",{projectId:ht.id}),ht.videoApi.phase=ut.state.phase}break}}}),nt.LayoutApi().on(lib$2.LayoutApiModel.EventType.EVENT_TYPE_LAYER,(ut,pt)=>{if(pt==lib$2.LayoutApiModel.EventSubType.EVENT_SUB_TYPE_CREATE){log$1.debug("Received: Node Insert",ut.create);const{connectionId:St,layoutId:_t}=ut.create.requestMetadata;if(CoreContext.connectionId===St)return;const ht=layerToNode(ut.create),_e=getProjectByLayoutId(_t),ot=[ht,..._e.compositor.nodes.map(toDataNode$1)],lt=toSceneTree(ot,ht.id);_e.compositor.local.insert(lt),trigger("NodeAdded",{projectId:_e.id,nodeId:ht.id})}else if(pt==lib$2.LayoutApiModel.EventSubType.EVENT_SUB_TYPE_UPDATE){log$1.debug("Received: Node Update",ut.update);const{connectionId:St,layoutId:_t}=ut.update.requestMetadata;if(CoreContext.connectionId===St)return;const ht=layerToNode(ut.update),_e=getProjectByLayoutId(_t);_e.compositor.local.update(ut.update.id,ht.props,ht.childIds),trigger("NodeChanged",{projectId:_e.id,nodeId:ht.id})}else if(pt==lib$2.LayoutApiModel.EventSubType.EVENT_SUB_TYPE_DELETE){log$1.debug("Received: Node Delete",ut.delete);const{connectionId:St,layoutId:_t}=ut.delete.requestMetadata;if(CoreContext.connectionId===St)return;const ht=getProjectByLayoutId(_t);ht.compositor.local.remove(ut.delete.id),trigger("NodeRemoved",{projectId:ht.id,nodeId:ut.delete.id})}else if(pt==lib$2.LayoutApiModel.EventSubType.EVENT_SUB_TYPE_BATCH){log$1.debug("Received: Node Batch Update",ut.batch);const{connectionId:St,layoutId:_t}=ut.batch.requestMetadata;if(CoreContext.connectionId===St)return;const ht=getProjectByLayoutId(_t);ut.batch.layers.forEach(_e=>{const[ot,lt]=Object.entries(_e)[0];if(ot==="create"){const Ot=layerToNode(lt);ht.compositor.local.insert(Ot),trigger("NodeAdded",{projectId:ht.id,nodeId:Ot.id})}else if(ot==="update"){const Ot=layerToNode(lt);ht.compositor.local.update(Ot.id,Ot.props,Ot.childIds),trigger("NodeChanged",{projectId:ht.id,nodeId:Ot.id})}else ot==="delete"&&(ht.compositor.local.remove(lt),trigger("NodeRemoved",{projectId:ht.id,nodeId:lt.id}))}),ht&&trigger("NodeChanged",{projectId:ht.id,nodeId:ht.compositor.getRoot().id})}});const st=(ut={},pt)=>{const{displayName:St,role:_t,maxDuration:ht=CoreContext.config.defaults.guestTokenDuration,projectId:_e=CoreContext.state.activeProjectId}=ut,ot=getProject(_e),lt=St?{direct:{displayName:St}}:{exchange:{maxDuration:ht}};return nt.LiveApi().authentication.createGuestAccessToken({projectId:_e,token:lt,url:pt,collectionId:ot.videoApi.project.collectionId,maxDuration:ht,role:_t||lib$2.LiveApiModel.Role.ROLE_GUEST})};return vn(jt({},omit$1(CoreContext,["clients","config","connectionId","Request","state","trigger"])),{createDemoToken:async ut=>(await nt.LiveApi().publicAuthentication.createDemoAccessToken({serviceName:ut.serviceName,serviceUserId:ut.userId})).accessToken,createPreviewLink:async(ut={})=>{const{maxDuration:pt,projectId:St=CoreContext.state.activeProjectId}=ut,_t=getProject(St);return(await nt.LiveApi().authentication.createGuestAccessToken({projectId:St,token:{direct:{displayName:"Preview"}},url:CoreContext.config.compositorUrl,collectionId:_t.videoApi.project.collectionId,maxDuration:pt||CoreContext.config.defaults.previewTokenDuration,role:lib$2.LiveApiModel.Role.ROLE_VIEWER})).url},createGuestLink:async(ut,pt={})=>(await st(pt,ut)).url,createGuestToken:async(ut={})=>(await st(ut)).accessToken,initialProject:ct,load,render})};let loadResult;const load=async a=>{if(loadResult)return loadResult;if(!a){log$1.warn("Access token required for load()");return}log$1.info("Loading user..."),await CoreContext.clients.load(a);const{collectionId:d,projects:c,userProps:m}=await CoreContext.Request.loadProjects(),{displayName:g}=getAccessTokenData();setAppState({user:{name:g,props:{}},projects:c,collectionId:d,activeProjectId:null});const b=c.map(toBaseProject);return loadResult={id:d,projects:b,props:m},CoreContext.state.user.props=m,trigger("UserLoaded",loadResult),loadResult},hostname=window.location.hostname,prodHosts=["cloud.golightstream.com","api.stream"],getEnv=()=>prodHosts.some(s=>hostname.includes(s))?"prod":"stage",run=async()=>{const a=await init({env:getEnv(),logLevel:"Debug"}),s=a==null?void 0:a.initialProject;if(!s)return console.warn("Project not available");await s.joinRoom(),a.render({containerEl:document.getElementById("root"),projectId:s.id,dragAndDrop:!1})};run();export{CoreContext as C,getRoom as a,getProject as b,toBaseDestination as c,getAccessTokenData as g,hydrateProject as h,o,toBaseProject as t,webrtcManager as w};
//# sourceMappingURL=compositor.0a3405de.js.map
