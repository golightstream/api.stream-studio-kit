import{C as i,g as u,a as g,b as h,h as v}from"./compositor.5786f4c2.js";const w=async(o,t,c)=>{const{backgroundImage:a,layout:l,layoutProps:r={}}=c,e=await i.compositor.createProject({props:{name:"Root",type:"sceneless-project",sourceType:"Element",layout:"Layered",size:t,isRoot:!0,tagName:"div",fields:{style:{background:"black"}}}},o),n=e.getRoot(),d=await Promise.all([e.insert({name:"Background",id:"bg",layout:"Free"},n.id),e.insert({id:"content",name:"Content",layout:l,layoutProps:r},n.id),e.insert({id:"foreground",name:"Overlays",layout:"Free"},n.id)]);await e.reorder(n.id,d);const s=n.children.find(y=>y.props.id==="foreground"),m=await Promise.all([e.insert({name:"ImageOverlay",id:"fg-image",layout:"Free"},s.id),e.insert({name:"Overlay",sourceType:"Overlay",id:"overlay",layout:"Free",style:{width:"100%",height:"100%",objectFit:"cover"}},s.id),e.insert({name:"BannerContainer",id:"fg-banners",layout:"Column",layoutProps:{cover:!0}},s.id),e.insert({name:"VideoOverlay",id:"fg-video",layout:"Free"},s.id),e.insert({name:"VideoOverlay2",layout:"Free",sourceType:"Video2",proxySource:"Overlay",id:"video-overlay",style:{width:"100%",height:"100%",objectFit:"cover"}},s.id),e.insert({name:"Logo",layout:"Free",sourceType:"Logo",id:"logo",style:{width:"160px",height:"90px",objectFit:"contain",position:"unset"}},s.id)]);await e.reorder(s.id,m);const p=n.children.find(y=>y.props.id==="bg"),j=await Promise.all([e.insert({name:"ImageBackground",id:"bg-image",tagName:"img",sourceType:"Element",attributes:{src:a},fields:{style:{width:"100%",height:"100%",objectFit:"cover"}}},p.id),e.insert({name:"ImageBackground2",sourceType:"Image2",proxySource:"Background",id:"image-background",layout:"Free",src:a,style:{width:"100%",height:"100%",objectFit:"cover"}},p.id),e.insert({name:"VideoBackground",sourceType:"Video2",proxySource:"Background",id:"video-background",layout:"Free",style:{width:"100%",height:"100%",objectFit:"cover"}},p.id)]);return await e.reorder(p.id,j),e},F=async o=>{const t=u().id,c=o.type||"sceneless",a=o.size||{x:1280,y:720},l=o.settings||{};let r=await i.clients.LiveApi().project.createProject({collectionId:t,rendering:{video:{width:a.x,height:a.y,framerate:30}},composition:{studioSdk:{}},metadata:{},webrtc:{hosted:{}}});const e=await i.clients.LayoutApi().layout.createLayout({layout:{projectId:r.project.projectId,collectionId:r.project.collectionId}}),{displayName:n}=g(),d={type:c,layoutId:e.id,hostDisplayName:n,props:o.props||{}};let s=await i.clients.LiveApi().project.updateProject({collectionId:t,projectId:r.project.projectId,updateMask:["metadata"],metadata:d});return r.project=s.project,r.project.metadata=d,c==="sceneless"?await w(e.id,a,l):await i.compositor.createProject({props:{name:"Root",layout:"Free",...l,isRoot:!0,size:a}},e.id),r},L=async o=>{const{projectId:t}=o,c=h(t),a=u().id;await Promise.all([i.clients.LiveApi().project.deleteProject({collectionId:a,projectId:t}),i.clients.LayoutApi().layout.deleteLayout({layoutId:c.layoutApi.layoutId})])},P=async()=>{var r;const o=await b();let t;const{displayName:c,serviceUserId:a}=g();o.length===0?t=(await i.clients.LiveApi().collection.createCollection({metadata:{serviceUserId:a,displayName:c,props:{}}})).collection:t=o[0],await i.clients.LiveApi().subscribeToCollection(t.collectionId);const l=await Promise.all(t.projects.map(e=>v(e,"ROLE_HOST")));return{user:{id:t.collectionId,metadata:t.metadata,props:((r=t.metadata)==null?void 0:r.props)||{},name:c},projects:l,sources:t.sources}},b=async()=>(await i.clients.LiveApi().collection.getCollections({})).collections;export{F as createProject,L as deleteProject,b as loadCollections,P as loadUser};
//# sourceMappingURL=requests.04ddd565.js.map
