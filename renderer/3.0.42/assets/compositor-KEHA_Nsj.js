var bu=Object.defineProperty;var Su=(a,c,b)=>c in a?bu(a,c,{enumerable:!0,configurable:!0,writable:!0,value:b}):a[c]=b;var _n=(a,c,b)=>(Su(a,typeof c!="symbol"?c+"":c,b),b);(function(){const c=document.createElement("link").relList;if(c&&c.supports&&c.supports("modulepreload"))return;for(const $ of document.querySelectorAll('link[rel="modulepreload"]'))_($);new MutationObserver($=>{for(const k of $)if(k.type==="childList")for(const et of k.addedNodes)et.tagName==="LINK"&&et.rel==="modulepreload"&&_(et)}).observe(document,{childList:!0,subtree:!0});function b($){const k={};return $.integrity&&(k.integrity=$.integrity),$.referrerPolicy&&(k.referrerPolicy=$.referrerPolicy),$.crossOrigin==="use-credentials"?k.credentials="include":$.crossOrigin==="anonymous"?k.credentials="omit":k.credentials="same-origin",k}function _($){if($.ep)return;$.ep=!0;const k=b($);fetch($.href,k)}})();const scriptRel="modulepreload",assetsURL=function(a){return"/studiokit/renderer/3.0.42/"+a},seen={},__vitePreload=function(c,b,_){let $=Promise.resolve();if(b&&b.length>0){const k=document.getElementsByTagName("link"),et=document.querySelector("meta[property=csp-nonce]"),nt=(et==null?void 0:et.nonce)||(et==null?void 0:et.getAttribute("nonce"));$=Promise.all(b.map(ot=>{if(ot=assetsURL(ot),ot in seen)return;seen[ot]=!0;const ht=ot.endsWith(".css"),vt=ht?'[rel="stylesheet"]':"";if(!!_)for(let $t=k.length-1;$t>=0;$t--){const Tt=k[$t];if(Tt.href===ot&&(!ht||Tt.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${ot}"]${vt}`))return;const kt=document.createElement("link");if(kt.rel=ht?"stylesheet":scriptRel,ht||(kt.as="script",kt.crossOrigin=""),kt.href=ot,nt&&kt.setAttribute("nonce",nt),document.head.appendChild(kt),ht)return new Promise(($t,Tt)=>{kt.addEventListener("load",$t),kt.addEventListener("error",()=>Tt(new Error(`Unable to preload CSS for ${ot}`)))})}))}return $.then(()=>c()).catch(k=>{const et=new Event("vite:preloadError",{cancelable:!0});if(et.payload=k,window.dispatchEvent(et),!et.defaultPrevented)throw k})};var commonjsGlobal$1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs$2(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}function getAugmentedNamespace(a){if(a.__esModule)return a;var c=a.default;if(typeof c=="function"){var b=function _(){return this instanceof _?Reflect.construct(c,arguments,this.constructor):c.apply(this,arguments)};b.prototype=c.prototype}else b={};return Object.defineProperty(b,"__esModule",{value:!0}),Object.keys(a).forEach(function(_){var $=Object.getOwnPropertyDescriptor(a,_);Object.defineProperty(b,_,$.get?$:{enumerable:!0,get:function(){return a[_]}})}),b}var lib$2={};function e(a){this.message=a}e.prototype=new Error,e.prototype.name="InvalidCharacterError";var r$3=typeof window<"u"&&window.atob&&window.atob.bind(window)||function(a){var c=String(a).replace(/=+$/,"");if(c.length%4==1)throw new e("'atob' failed: The string to be decoded is not correctly encoded.");for(var b,_,$=0,k=0,et="";_=c.charAt(k++);~_&&(b=$%4?64*b+_:_,$++%4)?et+=String.fromCharCode(255&b>>(-2*$&6)):0)_="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(_);return et};function t$1(a){var c=a.replace(/-/g,"+").replace(/_/g,"/");switch(c.length%4){case 0:break;case 2:c+="==";break;case 3:c+="=";break;default:throw"Illegal base64url string!"}try{return function(b){return decodeURIComponent(r$3(b).replace(/(.)/g,function(_,$){var k=$.charCodeAt(0).toString(16).toUpperCase();return k.length<2&&(k="0"+k),"%"+k}))}(c)}catch{return r$3(c)}}function n$1(a){this.message=a}function o(a,c){if(typeof a!="string")throw new n$1("Invalid token specified");var b=(c=c||{}).header===!0?0:1;try{return JSON.parse(t$1(a.split(".")[b]))}catch(_){throw new n$1("Invalid token specified: "+_.message)}}n$1.prototype=new Error,n$1.prototype.name="InvalidTokenError";const jwtDecode_esm=Object.freeze(Object.defineProperty({__proto__:null,InvalidTokenError:n$1,default:o},Symbol.toStringTag,{value:"Module"})),require$$0$3=getAugmentedNamespace(jwtDecode_esm);var getRandomValues,rnds8=new Uint8Array(16);function rng(){if(!getRandomValues&&(getRandomValues=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!getRandomValues))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return getRandomValues(rnds8)}const REGEX=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function validate$2(a){return typeof a=="string"&&REGEX.test(a)}var byteToHex=[];for(var i$1=0;i$1<256;++i$1)byteToHex.push((i$1+256).toString(16).substr(1));function stringify(a){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,b=(byteToHex[a[c+0]]+byteToHex[a[c+1]]+byteToHex[a[c+2]]+byteToHex[a[c+3]]+"-"+byteToHex[a[c+4]]+byteToHex[a[c+5]]+"-"+byteToHex[a[c+6]]+byteToHex[a[c+7]]+"-"+byteToHex[a[c+8]]+byteToHex[a[c+9]]+"-"+byteToHex[a[c+10]]+byteToHex[a[c+11]]+byteToHex[a[c+12]]+byteToHex[a[c+13]]+byteToHex[a[c+14]]+byteToHex[a[c+15]]).toLowerCase();if(!validate$2(b))throw TypeError("Stringified UUID is invalid");return b}var _nodeId,_clockseq,_lastMSecs=0,_lastNSecs=0;function v1(a,c,b){var _=c&&b||0,$=c||new Array(16);a=a||{};var k=a.node||_nodeId,et=a.clockseq!==void 0?a.clockseq:_clockseq;if(k==null||et==null){var nt=a.random||(a.rng||rng)();k==null&&(k=_nodeId=[nt[0]|1,nt[1],nt[2],nt[3],nt[4],nt[5]]),et==null&&(et=_clockseq=(nt[6]<<8|nt[7])&16383)}var ot=a.msecs!==void 0?a.msecs:Date.now(),ht=a.nsecs!==void 0?a.nsecs:_lastNSecs+1,vt=ot-_lastMSecs+(ht-_lastNSecs)/1e4;if(vt<0&&a.clockseq===void 0&&(et=et+1&16383),(vt<0||ot>_lastMSecs)&&a.nsecs===void 0&&(ht=0),ht>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");_lastMSecs=ot,_lastNSecs=ht,_clockseq=et,ot+=122192928e5;var _t=((ot&268435455)*1e4+ht)%4294967296;$[_++]=_t>>>24&255,$[_++]=_t>>>16&255,$[_++]=_t>>>8&255,$[_++]=_t&255;var kt=ot/4294967296*1e4&268435455;$[_++]=kt>>>8&255,$[_++]=kt&255,$[_++]=kt>>>24&15|16,$[_++]=kt>>>16&255,$[_++]=et>>>8|128,$[_++]=et&255;for(var $t=0;$t<6;++$t)$[_+$t]=k[$t];return c||stringify($)}function parse$3(a){if(!validate$2(a))throw TypeError("Invalid UUID");var c,b=new Uint8Array(16);return b[0]=(c=parseInt(a.slice(0,8),16))>>>24,b[1]=c>>>16&255,b[2]=c>>>8&255,b[3]=c&255,b[4]=(c=parseInt(a.slice(9,13),16))>>>8,b[5]=c&255,b[6]=(c=parseInt(a.slice(14,18),16))>>>8,b[7]=c&255,b[8]=(c=parseInt(a.slice(19,23),16))>>>8,b[9]=c&255,b[10]=(c=parseInt(a.slice(24,36),16))/1099511627776&255,b[11]=c/4294967296&255,b[12]=c>>>24&255,b[13]=c>>>16&255,b[14]=c>>>8&255,b[15]=c&255,b}function stringToBytes(a){a=unescape(encodeURIComponent(a));for(var c=[],b=0;b<a.length;++b)c.push(a.charCodeAt(b));return c}var DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",URL$1="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function v35(a,c,b){function _($,k,et,nt){if(typeof $=="string"&&($=stringToBytes($)),typeof k=="string"&&(k=parse$3(k)),k.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var ot=new Uint8Array(16+$.length);if(ot.set(k),ot.set($,k.length),ot=b(ot),ot[6]=ot[6]&15|c,ot[8]=ot[8]&63|128,et){nt=nt||0;for(var ht=0;ht<16;++ht)et[nt+ht]=ot[ht];return et}return stringify(ot)}try{_.name=a}catch{}return _.DNS=DNS,_.URL=URL$1,_}function md5$3(a){if(typeof a=="string"){var c=unescape(encodeURIComponent(a));a=new Uint8Array(c.length);for(var b=0;b<c.length;++b)a[b]=c.charCodeAt(b)}return md5ToHexEncodedArray(wordsToMd5(bytesToWords(a),a.length*8))}function md5ToHexEncodedArray(a){for(var c=[],b=a.length*32,_="0123456789abcdef",$=0;$<b;$+=8){var k=a[$>>5]>>>$%32&255,et=parseInt(_.charAt(k>>>4&15)+_.charAt(k&15),16);c.push(et)}return c}function getOutputLength(a){return(a+64>>>9<<4)+14+1}function wordsToMd5(a,c){a[c>>5]|=128<<c%32,a[getOutputLength(c)-1]=c;for(var b=1732584193,_=-271733879,$=-1732584194,k=271733878,et=0;et<a.length;et+=16){var nt=b,ot=_,ht=$,vt=k;b=md5ff(b,_,$,k,a[et],7,-680876936),k=md5ff(k,b,_,$,a[et+1],12,-389564586),$=md5ff($,k,b,_,a[et+2],17,606105819),_=md5ff(_,$,k,b,a[et+3],22,-1044525330),b=md5ff(b,_,$,k,a[et+4],7,-176418897),k=md5ff(k,b,_,$,a[et+5],12,1200080426),$=md5ff($,k,b,_,a[et+6],17,-1473231341),_=md5ff(_,$,k,b,a[et+7],22,-45705983),b=md5ff(b,_,$,k,a[et+8],7,1770035416),k=md5ff(k,b,_,$,a[et+9],12,-1958414417),$=md5ff($,k,b,_,a[et+10],17,-42063),_=md5ff(_,$,k,b,a[et+11],22,-1990404162),b=md5ff(b,_,$,k,a[et+12],7,1804603682),k=md5ff(k,b,_,$,a[et+13],12,-40341101),$=md5ff($,k,b,_,a[et+14],17,-1502002290),_=md5ff(_,$,k,b,a[et+15],22,1236535329),b=md5gg(b,_,$,k,a[et+1],5,-165796510),k=md5gg(k,b,_,$,a[et+6],9,-1069501632),$=md5gg($,k,b,_,a[et+11],14,643717713),_=md5gg(_,$,k,b,a[et],20,-373897302),b=md5gg(b,_,$,k,a[et+5],5,-701558691),k=md5gg(k,b,_,$,a[et+10],9,38016083),$=md5gg($,k,b,_,a[et+15],14,-660478335),_=md5gg(_,$,k,b,a[et+4],20,-405537848),b=md5gg(b,_,$,k,a[et+9],5,568446438),k=md5gg(k,b,_,$,a[et+14],9,-1019803690),$=md5gg($,k,b,_,a[et+3],14,-187363961),_=md5gg(_,$,k,b,a[et+8],20,1163531501),b=md5gg(b,_,$,k,a[et+13],5,-1444681467),k=md5gg(k,b,_,$,a[et+2],9,-51403784),$=md5gg($,k,b,_,a[et+7],14,1735328473),_=md5gg(_,$,k,b,a[et+12],20,-1926607734),b=md5hh(b,_,$,k,a[et+5],4,-378558),k=md5hh(k,b,_,$,a[et+8],11,-2022574463),$=md5hh($,k,b,_,a[et+11],16,1839030562),_=md5hh(_,$,k,b,a[et+14],23,-35309556),b=md5hh(b,_,$,k,a[et+1],4,-1530992060),k=md5hh(k,b,_,$,a[et+4],11,1272893353),$=md5hh($,k,b,_,a[et+7],16,-155497632),_=md5hh(_,$,k,b,a[et+10],23,-1094730640),b=md5hh(b,_,$,k,a[et+13],4,681279174),k=md5hh(k,b,_,$,a[et],11,-358537222),$=md5hh($,k,b,_,a[et+3],16,-722521979),_=md5hh(_,$,k,b,a[et+6],23,76029189),b=md5hh(b,_,$,k,a[et+9],4,-640364487),k=md5hh(k,b,_,$,a[et+12],11,-421815835),$=md5hh($,k,b,_,a[et+15],16,530742520),_=md5hh(_,$,k,b,a[et+2],23,-995338651),b=md5ii(b,_,$,k,a[et],6,-198630844),k=md5ii(k,b,_,$,a[et+7],10,1126891415),$=md5ii($,k,b,_,a[et+14],15,-1416354905),_=md5ii(_,$,k,b,a[et+5],21,-57434055),b=md5ii(b,_,$,k,a[et+12],6,1700485571),k=md5ii(k,b,_,$,a[et+3],10,-1894986606),$=md5ii($,k,b,_,a[et+10],15,-1051523),_=md5ii(_,$,k,b,a[et+1],21,-2054922799),b=md5ii(b,_,$,k,a[et+8],6,1873313359),k=md5ii(k,b,_,$,a[et+15],10,-30611744),$=md5ii($,k,b,_,a[et+6],15,-1560198380),_=md5ii(_,$,k,b,a[et+13],21,1309151649),b=md5ii(b,_,$,k,a[et+4],6,-145523070),k=md5ii(k,b,_,$,a[et+11],10,-1120210379),$=md5ii($,k,b,_,a[et+2],15,718787259),_=md5ii(_,$,k,b,a[et+9],21,-343485551),b=safeAdd(b,nt),_=safeAdd(_,ot),$=safeAdd($,ht),k=safeAdd(k,vt)}return[b,_,$,k]}function bytesToWords(a){if(a.length===0)return[];for(var c=a.length*8,b=new Uint32Array(getOutputLength(c)),_=0;_<c;_+=8)b[_>>5]|=(a[_/8]&255)<<_%32;return b}function safeAdd(a,c){var b=(a&65535)+(c&65535),_=(a>>16)+(c>>16)+(b>>16);return _<<16|b&65535}function bitRotateLeft(a,c){return a<<c|a>>>32-c}function md5cmn(a,c,b,_,$,k){return safeAdd(bitRotateLeft(safeAdd(safeAdd(c,a),safeAdd(_,k)),$),b)}function md5ff(a,c,b,_,$,k,et){return md5cmn(c&b|~c&_,a,c,$,k,et)}function md5gg(a,c,b,_,$,k,et){return md5cmn(c&_|b&~_,a,c,$,k,et)}function md5hh(a,c,b,_,$,k,et){return md5cmn(c^b^_,a,c,$,k,et)}function md5ii(a,c,b,_,$,k,et){return md5cmn(b^(c|~_),a,c,$,k,et)}var v3=v35("v3",48,md5$3);const v3$1=v3;function v4(a,c,b){a=a||{};var _=a.random||(a.rng||rng)();if(_[6]=_[6]&15|64,_[8]=_[8]&63|128,c){b=b||0;for(var $=0;$<16;++$)c[b+$]=_[$];return c}return stringify(_)}function f$1(a,c,b,_){switch(a){case 0:return c&b^~c&_;case 1:return c^b^_;case 2:return c&b^c&_^b&_;case 3:return c^b^_}}function ROTL(a,c){return a<<c|a>>>32-c}function sha1$1(a){var c=[1518500249,1859775393,2400959708,3395469782],b=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof a=="string"){var _=unescape(encodeURIComponent(a));a=[];for(var $=0;$<_.length;++$)a.push(_.charCodeAt($))}else Array.isArray(a)||(a=Array.prototype.slice.call(a));a.push(128);for(var k=a.length/4+2,et=Math.ceil(k/16),nt=new Array(et),ot=0;ot<et;++ot){for(var ht=new Uint32Array(16),vt=0;vt<16;++vt)ht[vt]=a[ot*64+vt*4]<<24|a[ot*64+vt*4+1]<<16|a[ot*64+vt*4+2]<<8|a[ot*64+vt*4+3];nt[ot]=ht}nt[et-1][14]=(a.length-1)*8/Math.pow(2,32),nt[et-1][14]=Math.floor(nt[et-1][14]),nt[et-1][15]=(a.length-1)*8&4294967295;for(var _t=0;_t<et;++_t){for(var kt=new Uint32Array(80),$t=0;$t<16;++$t)kt[$t]=nt[_t][$t];for(var Tt=16;Tt<80;++Tt)kt[Tt]=ROTL(kt[Tt-3]^kt[Tt-8]^kt[Tt-14]^kt[Tt-16],1);for(var At=b[0],Mt=b[1],Dt=b[2],Rt=b[3],xt=b[4],Jt=0;Jt<80;++Jt){var ar=Math.floor(Jt/20),nr=ROTL(At,5)+f$1(ar,Mt,Dt,Rt)+xt+c[ar]+kt[Jt]>>>0;xt=Rt,Rt=Dt,Dt=ROTL(Mt,30)>>>0,Mt=At,At=nr}b[0]=b[0]+At>>>0,b[1]=b[1]+Mt>>>0,b[2]=b[2]+Dt>>>0,b[3]=b[3]+Rt>>>0,b[4]=b[4]+xt>>>0}return[b[0]>>24&255,b[0]>>16&255,b[0]>>8&255,b[0]&255,b[1]>>24&255,b[1]>>16&255,b[1]>>8&255,b[1]&255,b[2]>>24&255,b[2]>>16&255,b[2]>>8&255,b[2]&255,b[3]>>24&255,b[3]>>16&255,b[3]>>8&255,b[3]&255,b[4]>>24&255,b[4]>>16&255,b[4]>>8&255,b[4]&255]}var v5=v35("v5",80,sha1$1);const v5$1=v5,nil="00000000-0000-0000-0000-000000000000";function version$5(a){if(!validate$2(a))throw TypeError("Invalid UUID");return parseInt(a.substr(14,1),16)}const esmBrowser=Object.freeze(Object.defineProperty({__proto__:null,NIL:nil,parse:parse$3,stringify,v1,v3:v3$1,v4,v5:v5$1,validate:validate$2,version:version$5},Symbol.toStringTag,{value:"Module"})),require$$1$6=getAugmentedNamespace(esmBrowser);let EnhancedMap$1=class extends Map{computeIfAbsent(c,b){if(this.has(c))return this.get(c);const _=b(c);return this.set(c,_),_}computeIfPresent(c,b){const _=this.get(c);if(_===void 0)return;const $=b(c,_);return $!==void 0?this.set(c,$):this.delete(c),$}compute(c,b){const _=this.get(c),$=b(c,_);return $?this.set(c,$):this.delete(c),$}};var InternalLogLevel$1;(function(a){a[a.Trace=0]="Trace",a[a.Debug=1]="Debug",a[a.Info=2]="Info",a[a.Warn=3]="Warn",a[a.Error=4]="Error"})(InternalLogLevel$1||(InternalLogLevel$1={}));function getInternalLogger$1(a){return provider$1.getLogger(a)}const INTERNAL_LOGGING_SETTINGS$1={setInternalLogLevel:a=>provider$1.changeLogLevel(a),setOutput:a=>provider$1.changeOutput(a),reset:()=>provider$1.reset()};let InternalLoggerImpl$1=class{constructor(c,b,_){this._name=c,this._level=b,this._fnOutput=_}trace(c){this.log(InternalLogLevel$1.Trace,c)}debug(c){this.log(InternalLogLevel$1.Debug,c)}error(c,b){this.log(InternalLogLevel$1.Error,c,b)}info(c){this.log(InternalLogLevel$1.Info,c)}warn(c,b){this.log(InternalLogLevel$1.Warn,c,b)}setLevel(c){this._level=c}setOutput(c){this._fnOutput=c}log(c,b,_){this._level>c||this._fnOutput(`${InternalLogLevel$1[this._level].toString()} <INTERNAL LOGGER> ${this._name} ${b()}${_?`
`+_.stack:""}`)}},InternalProviderImpl$1=class Mn{constructor(){this._loggers=new EnhancedMap$1,this._logLevel=InternalLogLevel$1.Error,this._fnOutput=Mn.logConsole}getLogger(c){return this._loggers.computeIfAbsent(c,b=>new InternalLoggerImpl$1(b,this._logLevel,this._fnOutput))}changeLogLevel(c){this._logLevel=c,this._loggers.forEach(b=>b.setLevel(c))}changeOutput(c){this._fnOutput=c,this._loggers.forEach(b=>b.setOutput(this._fnOutput))}reset(){this.changeLogLevel(InternalLogLevel$1.Error),this._fnOutput=Mn.logConsole,this._loggers.forEach(c=>c.setOutput(this._fnOutput))}static logConsole(c){console&&console.log&&console.log(c)}};const provider$1=new InternalProviderImpl$1;var InternalLogger$1=Object.freeze({__proto__:null,get InternalLogLevel(){return InternalLogLevel$1},getInternalLogger:getInternalLogger$1,INTERNAL_LOGGING_SETTINGS:INTERNAL_LOGGING_SETTINGS$1}),LogLevel$2;(function(a){a[a.Trace=0]="Trace",a[a.Debug=1]="Debug",a[a.Info=2]="Info",a[a.Warn=3]="Warn",a[a.Error=4]="Error",a[a.Fatal=5]="Fatal"})(LogLevel$2||(LogLevel$2={}));(function(a){function c(b){switch(b.toLowerCase()){case"trace":return a.Trace;case"debug":return a.Debug;case"info":return a.Info;case"warn":return a.Warn;case"error":return a.Error;case"fatal":return a.Fatal;default:return}}a.toLogLevel=c})(LogLevel$2||(LogLevel$2={}));let CoreLoggerImpl$1=class au{constructor(c){this._runtime=c}get id(){return this._runtime.id}get logLevel(){return this._runtime.level}get runtimeSettings(){return Object.assign({},this._runtime)}set runtimeSettings(c){this._runtime=c}trace(c,...b){this.logMessage(LogLevel$2.Trace,c,b)}debug(c,...b){this.logMessage(LogLevel$2.Debug,c,b)}info(c,...b){this.logMessage(LogLevel$2.Info,c,b)}warn(c,...b){this.logMessage(LogLevel$2.Warn,c,b)}error(c,...b){this.logMessage(LogLevel$2.Error,c,b)}fatal(c,...b){this.logMessage(LogLevel$2.Fatal,c,b)}logMessage(c,b,_){if(this._runtime.level>c)return;const $=Date.now(),k=typeof b=="string"?b:b(),et=au.getErrorAndArgs(_);switch(this._runtime.channel.type){case"RawLogChannel":this._runtime.channel.write({message:k,exception:et.error,args:et.args,timeInMillis:$,level:c,logNames:this._runtime.name},this._runtime.argumentFormatter);return;case"LogChannel":this._runtime.channel.write(this.createLogMessage(k,c,et,$));break}}formatArgValue(c){try{return this._runtime.argumentFormatter(c)}catch{return`>>ARG CONVERT FAILED: '${c!==void 0?c.toString():"undefined"}'<<`}}createLogMessage(c,b,_,$){let k;const et=_.error,nt=_.args;et&&(k=`${et.name}: ${et.message}`,et.stack&&(k+=`@
${et.stack}`));const ot=this._runtime.dateFormatter($);let ht=LogLevel$2[b].toUpperCase();ht.length<5&&(ht+=" ");const vt=typeof this._runtime.name=="string"?this._runtime.name:this._runtime.name.join(", "),_t=typeof nt<"u"&&nt.length>0?" ["+nt.map($t=>this.formatArgValue($t)).join(", ")+"]":"";return{message:ot+" "+ht+" ["+vt+"] "+c+_t,error:k}}static getErrorAndArgs(c){if(c.length===0)return{};let b,_;const $=c[0];if($ instanceof Error)return b=$,_=c.length>1?c.slice(1):void 0,{error:b,args:_};if(typeof $=="function"){const k=$();return k instanceof Error?(b=k,_=c.length>1?c.slice(1):void 0,{error:b,args:_}):c.length===1?Array.isArray(k)?{args:k.length>0?k:void 0}:{args:k}:Array.isArray(k)?{args:[...k,...c.slice(1)]}:{args:[k,...c.slice(1)]}}return{args:c}}};function padStart$1(a,c,b=" "){return padInternal$1(a,c,"start",b)}function padEnd$1(a,c,b=" "){return padInternal$1(a,c,"end",b)}function maxLengthStringValueInArray$1(a){return a.map(c=>c.length).reduce((c,b)=>b>c?b:c,0)}function padInternal$1(a,c,b,_=" "){if(c<=a.length)return a;if(_.length>1)throw new Error(`Fill char must be one char exactly, it is: ${_.length}`);const $=c-a.length;let k="";for(let et=0;et<$;et++)k+=_;return b==="start"?k+a:a+k}function formatArgument$1(a){return a===void 0?"undefined":JSON.stringify(a)}function formatDate$1(a){const c=new Date(a),b=c.getFullYear(),_=padStart$1((c.getMonth()+1).toString(),2,"0"),$=padStart$1(c.getDate().toString(),2,"0"),k=padStart$1(c.getHours().toString(),2,"0"),et=padStart$1(c.getMinutes().toString(),2,"0"),nt=padStart$1(c.getSeconds().toString(),2,"0"),ot=padStart$1(c.getMilliseconds().toString(),2,"0");return`${b}-${_}-${$} ${k}:${et}:${nt},${ot}`}let ConsoleLogChannel$1=class{constructor(){this.type="LogChannel"}write(c){console&&console.log&&console.log(c.message+(c.error?`
${c.error}`:""))}};var DefaultChannels$1;(function(a){function c(){return new ConsoleLogChannel$1}a.createConsoleChannel=c})(DefaultChannels$1||(DefaultChannels$1={}));let LogProviderImpl$1=class In{constructor(c,b){this._log=getInternalLogger$1("core.impl.LogProviderImpl"),this._name=c,this._settings=b,this._loggers=new EnhancedMap$1,this._idToKeyMap=new EnhancedMap$1,this._globalRuntimeSettings={level:b.level,channel:b.channel},this._nextLoggerId=1,this._log.trace(()=>`Created LogProviderImpl with settings: ${JSON.stringify(this._settings)}`)}get runtimeSettings(){return Object.assign(Object.assign({},this._settings),{level:this._globalRuntimeSettings.level,channel:this._globalRuntimeSettings.channel})}getLogger(c){return this.getOrCreateLogger(c)}updateLoggerRuntime(c,b){this._log.debug(()=>`Updating logger ${c.id} runtime settings using: '${JSON.stringify(b)}'`);const _=this._idToKeyMap.get(c.id);return _===void 0?(this._log.warn(()=>`Cannot update logger with id: ${c.id}, it was not found.`),!1):(this._loggers.computeIfPresent(_,($,k)=>(k.runtimeSettings=In.mergeRuntimeSettingsIntoLogRuntime(k.runtimeSettings,b),k)),!0)}updateRuntimeSettings(c){this._log.debug(()=>`Updating global runtime settings and updating existing loggers runtime settings using: '${JSON.stringify(c)}'`),this._globalRuntimeSettings={level:c.level!==void 0?c.level:this._globalRuntimeSettings.level,channel:c.channel!==void 0?c.channel:this._globalRuntimeSettings.channel},this._loggers.forEach(b=>b.runtimeSettings=In.mergeRuntimeSettingsIntoLogRuntime(b.runtimeSettings,c))}clear(){this._loggers.clear(),this._idToKeyMap.clear(),this._globalRuntimeSettings=Object.assign({},this._settings),this._nextLoggerId=1}getOrCreateLogger(c){const b=In.createKey(c),_=this._loggers.computeIfAbsent(b,()=>{const $={level:this._globalRuntimeSettings.level,channel:this._globalRuntimeSettings.channel,id:this.nextLoggerId(),name:c,argumentFormatter:this._settings.argumentFormatter,dateFormatter:this._settings.dateFormatter};return new CoreLoggerImpl$1($)});return this._idToKeyMap.computeIfAbsent(_.id,()=>b),_}nextLoggerId(){const c=this._name+"_"+this._nextLoggerId;return this._nextLoggerId++,c}static mergeRuntimeSettingsIntoLogRuntime(c,b){return Object.assign(Object.assign({},c),{level:b.level!==void 0?b.level:c.level,channel:b.channel!==void 0?b.channel:c.channel})}static createKey(c){return typeof c=="string"?c:c.join(",")}};function createLogProvider$1(a,c){return new LogProviderImpl$1(a,c)}var index$1=Object.freeze({__proto__:null,EnhancedMap:EnhancedMap$1,padStart:padStart$1,padEnd:padEnd$1,maxLengthStringValueInArray:maxLengthStringValueInArray$1});class ArrayLogChannel{constructor(){this._buffer=[],this.type="LogChannel"}write(c){this._buffer.push(c)}get logMessages(){return this._buffer}get messages(){return this._buffer.map(c=>c.message)}}class ArrayRawLogChannel{constructor(){this._buffer=[],this.type="RawLogChannel"}write(c,b){this._buffer.push(c)}get messages(){return this._buffer.map(c=>c.message)}get errors(){return this._buffer.map(c=>c.exception)}get size(){return this._buffer.length}get rawMessages(){return this._buffer}clear(){this._buffer=[]}}class TestControlMessage{constructor(){this._messages=[],this.write=this.write.bind(this)}get messages(){return this._messages}write(c){this._messages.push(c)}clear(){this._messages=[]}}var TestClasses=Object.freeze({__proto__:null,ArrayLogChannel,ArrayRawLogChannel,TestControlMessage});const typescriptLogging_esm=Object.freeze(Object.defineProperty({__proto__:null,$internal:InternalLogger$1,$test:TestClasses,get DefaultChannels(){return DefaultChannels$1},get LogLevel(){return LogLevel$2},createLogProvider:createLogProvider$1,formatArgument:formatArgument$1,formatDate:formatDate$1,util:index$1},Symbol.toStringTag,{value:"Module"})),require$$2$1=getAugmentedNamespace(typescriptLogging_esm);var layoutapi={},lib$1={},lib={},Metadata={};Object.defineProperty(Metadata,"__esModule",{value:!0});Metadata.Metadata=void 0;Metadata.Metadata=function(c){const b=new Map,_={set($,k){if($=normalizeKey($),Array.isArray(k))if(k.length===0)b.delete($);else{for(const et of k)validate$1($,et);b.set($,$.endsWith("-bin")?k:[k.join(", ")])}else validate$1($,k),b.set($,[k]);return _},append($,k){$=normalizeKey($),validate$1($,k);let et=b.get($);return et==null&&(et=[],b.set($,et)),et.push(k),$.endsWith("-bin")||b.set($,[et.join(", ")]),_},delete($){$=normalizeKey($),b.delete($)},get($){var k;return $=normalizeKey($),(k=b.get($))===null||k===void 0?void 0:k[0]},getAll($){var k;return $=normalizeKey($),(k=b.get($))!==null&&k!==void 0?k:[]},has($){return $=normalizeKey($),b.has($)},[Symbol.iterator](){return b[Symbol.iterator]()}};if(c!=null){const $=isIterable$1(c)?c:Object.entries(c);for(const[k,et]of $)_.set(k,et)}return _};function normalizeKey(a){return a.toLowerCase()}function validate$1(a,c){if(!/^[0-9a-z_.-]+$/.test(a))throw new Error(`Metadata key '${a}' contains illegal characters`);if(a.endsWith("-bin")){if(!(c instanceof Uint8Array))throw new Error(`Metadata key '${a}' ends with '-bin', thus it must have binary value`)}else{if(typeof c!="string")throw new Error(`Metadata key '${a}' doesn't end with '-bin', thus it must have string value`);if(!/^[ -~]*$/.test(c))throw new Error(`Metadata value '${c}' of key '${a}' contains illegal characters`)}}function isIterable$1(a){return Symbol.iterator in a}var Status={};(function(a){Object.defineProperty(a,"__esModule",{value:!0}),a.Status=void 0,function(c){c[c.OK=0]="OK",c[c.CANCELLED=1]="CANCELLED",c[c.UNKNOWN=2]="UNKNOWN",c[c.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",c[c.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",c[c.NOT_FOUND=5]="NOT_FOUND",c[c.ALREADY_EXISTS=6]="ALREADY_EXISTS",c[c.PERMISSION_DENIED=7]="PERMISSION_DENIED",c[c.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",c[c.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",c[c.ABORTED=10]="ABORTED",c[c.OUT_OF_RANGE=11]="OUT_OF_RANGE",c[c.UNIMPLEMENTED=12]="UNIMPLEMENTED",c[c.INTERNAL=13]="INTERNAL",c[c.UNAVAILABLE=14]="UNAVAILABLE",c[c.DATA_LOSS=15]="DATA_LOSS",c[c.UNAUTHENTICATED=16]="UNAUTHENTICATED"}(a.Status||(a.Status={}))})(Status);var MethodDescriptor={};Object.defineProperty(MethodDescriptor,"__esModule",{value:!0});var CallOptions={};Object.defineProperty(CallOptions,"__esModule",{value:!0});var ClientMiddleware={};Object.defineProperty(ClientMiddleware,"__esModule",{value:!0});var composeClientMiddleware$1={};Object.defineProperty(composeClientMiddleware$1,"__esModule",{value:!0});composeClientMiddleware$1.composeClientMiddleware=void 0;function composeClientMiddleware(a,c){return(b,_)=>c(Object.assign(Object.assign({},b),{next:($,k)=>a(Object.assign(Object.assign({},b),{request:$}),k)}),_)}composeClientMiddleware$1.composeClientMiddleware=composeClientMiddleware;var ClientError$1={},cjs={},helpers={};helpers.__esModule=void 0;helpers.__esModule=!0;var objectSetPrototypeOfIsDefined=typeof Object.setPrototypeOf=="function",objectGetPrototypeOfIsDefined=typeof Object.getPrototypeOf=="function",objectDefinePropertyIsDefined=typeof Object.defineProperty=="function",objectCreateIsDefined=typeof Object.create=="function",objectHasOwnPropertyIsDefined=typeof Object.prototype.hasOwnProperty=="function",setPrototypeOf=function(c,b){objectSetPrototypeOfIsDefined?Object.setPrototypeOf(c,b):c.__proto__=b};helpers.setPrototypeOf=setPrototypeOf;var getPrototypeOf$1=function(c){return objectGetPrototypeOfIsDefined?Object.getPrototypeOf(c):c.__proto__||c.prototype};helpers.getPrototypeOf=getPrototypeOf$1;var ie8ObjectDefinePropertyBug=!1,defineProperty$1=function a(c,b,_){if(objectDefinePropertyIsDefined&&!ie8ObjectDefinePropertyBug)try{Object.defineProperty(c,b,_)}catch{ie8ObjectDefinePropertyBug=!0,a(c,b,_)}else c[b]=_.value};helpers.defineProperty=defineProperty$1;var hasOwnProperty$g=function(c,b){return objectHasOwnPropertyIsDefined?c.hasOwnProperty(c,b):c[b]===void 0};helpers.hasOwnProperty=hasOwnProperty$g;var objectCreate$1=function(c,b){if(objectCreateIsDefined)return Object.create(c,b);var _=function(){};_.prototype=c;var $=new _;if(typeof b>"u")return $;if(typeof b=="null")throw new Error("PropertyDescriptors must not be null.");if(typeof b=="object")for(var k in b)hasOwnProperty$g(b,k)&&($[k]=b[k].value);return $};helpers.objectCreate=objectCreate$1;(function(a){a.__esModule=void 0,a.__esModule=!0;var c=helpers,b=c.setPrototypeOf,_=c.getPrototypeOf,$=c.defineProperty,k=c.objectCreate,et=new Error().toString()==="[object Error]",nt="";function ot(ht){var vt=this.constructor,_t=vt.name||function(){var Mt=vt.toString().match(/^function\s*([^\s(]+)/);return Mt===null?nt||"Error":Mt[1]}(),kt=_t==="Error",$t=kt?nt:_t,Tt=Error.apply(this,arguments);if(b(Tt,_(this)),!(Tt instanceof vt)||!(Tt instanceof ot)){var Tt=this;Error.apply(this,arguments),$(Tt,"message",{configurable:!0,enumerable:!1,value:ht,writable:!0})}if($(Tt,"name",{configurable:!0,enumerable:!1,value:$t,writable:!0}),Error.captureStackTrace&&Error.captureStackTrace(Tt,kt?ot:vt),Tt.stack===void 0){var At=new Error(ht);At.name=Tt.name,Tt.stack=At.stack}return et&&$(Tt,"toString",{configurable:!0,enumerable:!1,value:function(){return(this.name||"Error")+(typeof this.message>"u"?"":": "+this.message)},writable:!0}),Tt}nt=ot.name||"ExtendableError",ot.prototype=k(Error.prototype,{constructor:{value:Error,enumerable:!1,writable:!0,configurable:!0}}),a.ExtendableError=ot,a.default=a.ExtendableError})(cjs);Object.defineProperty(ClientError$1,"__esModule",{value:!0});ClientError$1.ClientError=void 0;const ts_error_1$1=cjs,Status_1$1=Status;class ClientError extends ts_error_1$1.ExtendableError{constructor(c,b,_){super(`${c} ${Status_1$1.Status[b]}: ${_}`),this.path=c,this.code=b,this.details=_,this.name="ClientError",Object.defineProperty(this,"@@nice-grpc",{value:!0}),Object.defineProperty(this,"@@nice-grpc:ClientError",{value:!0})}static[Symbol.hasInstance](c){return this!==ClientError?this.prototype.isPrototypeOf(c):typeof c=="object"&&c!==null&&(c.constructor===ClientError||c["@@nice-grpc:ClientError"]===!0||c.name==="ClientError"&&c["@@nice-grpc"]===!0)}}ClientError$1.ClientError=ClientError;var CallContext={};Object.defineProperty(CallContext,"__esModule",{value:!0});var ServerMiddleware={};Object.defineProperty(ServerMiddleware,"__esModule",{value:!0});var composeServerMiddleware$1={};Object.defineProperty(composeServerMiddleware$1,"__esModule",{value:!0});composeServerMiddleware$1.composeServerMiddleware=void 0;function composeServerMiddleware(a,c){return(b,_)=>a(Object.assign(Object.assign({},b),{next:($,k)=>c(Object.assign(Object.assign({},b),{request:$}),k)}),_)}composeServerMiddleware$1.composeServerMiddleware=composeServerMiddleware;var ServerError$1={};Object.defineProperty(ServerError$1,"__esModule",{value:!0});ServerError$1.ServerError=void 0;const ts_error_1=cjs,Status_1=Status;class ServerError extends ts_error_1.ExtendableError{constructor(c,b){super(`${Status_1.Status[c]}: ${b}`),this.code=c,this.details=b,this.name="ServerError",Object.defineProperty(this,"@@nice-grpc",{value:!0}),Object.defineProperty(this,"@@nice-grpc:ServerError",{value:!0})}static[Symbol.hasInstance](c){return this!==ServerError?this.prototype.isPrototypeOf(c):typeof c=="object"&&c!==null&&(c.constructor===ServerError||c["@@nice-grpc:ServerError"]===!0||c.name==="ServerError"&&c["@@nice-grpc"]===!0)}}ServerError$1.ServerError=ServerError;(function(a){var c=commonjsGlobal$1&&commonjsGlobal$1.__createBinding||(Object.create?function(_,$,k,et){et===void 0&&(et=k);var nt=Object.getOwnPropertyDescriptor($,k);(!nt||("get"in nt?!$.__esModule:nt.writable||nt.configurable))&&(nt={enumerable:!0,get:function(){return $[k]}}),Object.defineProperty(_,et,nt)}:function(_,$,k,et){et===void 0&&(et=k),_[et]=$[k]}),b=commonjsGlobal$1&&commonjsGlobal$1.__exportStar||function(_,$){for(var k in _)k!=="default"&&!Object.prototype.hasOwnProperty.call($,k)&&c($,_,k)};Object.defineProperty(a,"__esModule",{value:!0}),b(Metadata,a),b(Status,a),b(MethodDescriptor,a),b(CallOptions,a),b(ClientMiddleware,a),b(composeClientMiddleware$1,a),b(ClientError$1,a),b(CallContext,a),b(ServerMiddleware,a),b(composeServerMiddleware$1,a),b(ServerError$1,a)})(lib);var serviceDefinitions={},grpcWeb={};Object.defineProperty(grpcWeb,"__esModule",{value:!0});grpcWeb.isGrpcWebServiceDefinition=grpcWeb.fromGrpcWebServiceDefinition=void 0;function fromGrpcWebServiceDefinition(a){const c={};for(const[b,_]of Object.entries(a)){if(b==="serviceName")continue;const $=_;c[uncapitalize(b)]={path:`/${a.serviceName}/${b}`,requestStream:$.requestStream,responseStream:$.responseStream,requestDeserialize:$.requestType.deserializeBinary,requestSerialize:k=>k.serializeBinary(),responseDeserialize:$.responseType.deserializeBinary,responseSerialize:k=>k.serializeBinary(),options:{}}}return c}grpcWeb.fromGrpcWebServiceDefinition=fromGrpcWebServiceDefinition;function isGrpcWebServiceDefinition(a){return"prototype"in a}grpcWeb.isGrpcWebServiceDefinition=isGrpcWebServiceDefinition;function uncapitalize(a){return a.length===0?a:a[0].toLowerCase()+a.slice(1)}var tsProto={};Object.defineProperty(tsProto,"__esModule",{value:!0});tsProto.isTsProtoServiceDefinition=tsProto.fromTsProtoServiceDefinition=void 0;function fromTsProtoServiceDefinition(a){const c={};for(const[b,_]of Object.entries(a.methods)){const $=_.requestType.encode,k=_.requestType.fromPartial,et=_.responseType.encode,nt=_.responseType.fromPartial;c[b]={path:`/${a.fullName}/${_.name}`,requestStream:_.requestStream,responseStream:_.responseStream,requestDeserialize:_.requestType.decode,requestSerialize:k!=null?ot=>$(k(ot)).finish():ot=>$(ot).finish(),responseDeserialize:_.responseType.decode,responseSerialize:nt!=null?ot=>et(nt(ot)).finish():ot=>et(ot).finish(),options:_.options}}return c}tsProto.fromTsProtoServiceDefinition=fromTsProtoServiceDefinition;function isTsProtoServiceDefinition(a){return"name"in a&&"fullName"in a&&"methods"in a}tsProto.isTsProtoServiceDefinition=isTsProtoServiceDefinition;Object.defineProperty(serviceDefinitions,"__esModule",{value:!0});serviceDefinitions.normalizeServiceDefinition=void 0;const grpc_web_1=grpcWeb,ts_proto_1=tsProto;function normalizeServiceDefinition(a){return(0,grpc_web_1.isGrpcWebServiceDefinition)(a)?(0,grpc_web_1.fromGrpcWebServiceDefinition)(a):(0,ts_proto_1.isTsProtoServiceDefinition)(a)?(0,ts_proto_1.fromTsProtoServiceDefinition)(a):a}serviceDefinitions.normalizeServiceDefinition=normalizeServiceDefinition;var channel={},fetch$1={};class AbortError extends Error{constructor(){super("The operation has been aborted"),this.message="The operation has been aborted",this.name="AbortError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,this.constructor)}}function isAbortError(a){return typeof a=="object"&&a!==null&&a.name==="AbortError"}function throwIfAborted(a){if(a.aborted)throw new AbortError}function rethrowAbortError(a){if(isAbortError(a))throw a}function catchAbortError(a){if(!isAbortError(a))throw a}function execute(a,c){return new Promise((b,_)=>{if(a.aborted){_(new AbortError);return}let $,k=!1;function et(){k||(k=!0,$!=null&&$())}const nt=c(ot=>{b(ot),et()},ot=>{_(ot),et()});if(!k){const ot=()=>{const ht=nt();ht==null?_(new AbortError):ht.then(()=>{_(new AbortError)},vt=>{_(vt)}),et()};a.addEventListener("abort",ot),$=()=>{a.removeEventListener("abort",ot)}}})}function abortable(a,c){if(a.aborted){const b=()=>{};c.then(b,b)}return execute(a,(b,_)=>(c.then(b,_),()=>{}))}function delay$1(a,c){return execute(a,b=>{const _=typeof c=="number"?c:c.getTime()-Date.now(),$=setTimeout(b,_);return()=>{clearTimeout($)}})}function forever(a){return execute(a,()=>()=>{})}function waitForEvent(a,c,b,_){return execute(a,$=>{let k,et=!1;return k=listen(c,b,(...ot)=>{$(ot.length>1?ot:ot[0]),et=!0,k!=null&&k()},_),et&&k(),()=>{et=!0,k!=null&&k()}})}function listen(a,c,b,_){if(isEventTarget(a))return a.addEventListener(c,b,_),()=>a.removeEventListener(c,b,_);if(isJQueryStyleEventEmitter(a))return a.on(c,b),()=>a.off(c,b);if(isNodeStyleEventEmitter(a))return a.addListener(c,b),()=>a.removeListener(c,b);throw new Error("Invalid event target")}function isNodeStyleEventEmitter(a){return isFunction$4(a.addListener)&&isFunction$4(a.removeListener)}function isJQueryStyleEventEmitter(a){return isFunction$4(a.on)&&isFunction$4(a.off)}function isEventTarget(a){return isFunction$4(a.addEventListener)&&isFunction$4(a.removeEventListener)}const isFunction$4=a=>typeof a=="function";function all(a,c){return new Promise((b,_)=>{if(a.aborted){_(new AbortError);return}const $=new AbortController,k=c($.signal);if(k.length===0){b([]);return}const et=()=>{$.abort()};a.addEventListener("abort",et);let nt;const ot=new Array(k.length);let ht=0;function vt(){ht+=1,ht===k.length&&(a.removeEventListener("abort",et),nt!=null?_(nt.reason):b(ot))}for(const[_t,kt]of k.entries())kt.then($t=>{ot[_t]=$t,vt()},$t=>{$.abort(),(nt==null||!isAbortError($t)&&isAbortError(nt.reason))&&(nt={reason:$t}),vt()})})}function race$2(a,c){return new Promise((b,_)=>{if(a.aborted){_(new AbortError);return}const $=new AbortController,k=c($.signal),et=()=>{$.abort()};a.addEventListener("abort",et);let nt=0;function ot(vt){$.abort(),nt+=1,nt===k.length&&(a.removeEventListener("abort",et),vt.status==="fulfilled"?b(vt.value):_(vt.reason))}let ht;for(const vt of k)vt.then(_t=>{ht==null&&(ht={status:"fulfilled",value:_t}),ot(ht)},_t=>{(ht==null||!isAbortError(_t)&&(ht.status==="fulfilled"||isAbortError(ht.reason)))&&(ht={status:"rejected",reason:_t}),ot(ht)})})}async function retry$1(a,c,b={}){const{baseMs:_=1e3,maxDelayMs:$=3e4,onError:k,maxAttempts:et=1/0}=b;let nt=0;const ot=()=>{nt=-1};for(;;)try{return await c(a,nt,ot)}catch(ht){if(rethrowAbortError(ht),nt>=et)throw ht;let vt;if(nt===-1)vt=0;else{const _t=Math.min($,Math.pow(2,nt)*_);vt=Math.round(_t*(1+Math.random())/2)}k&&k(ht,nt,vt),vt!==0&&await delay$1(a,vt),nt+=1}}function spawn(a,c){if(a.aborted)return Promise.reject(new AbortError);const b=[],_=new AbortController,$=_.signal,k=()=>{_.abort()};a.addEventListener("abort",k);const et=()=>{a.removeEventListener("abort",k)},nt=new Set,ot=()=>{for(const _t of nt)_t.abort()};$.addEventListener("abort",ot);const ht=()=>{$.removeEventListener("abort",ot)};let vt=new Promise((_t,kt)=>{let $t,Tt;At(Mt=>c(Mt,{defer(Dt){b.push(Dt)},fork:At})).join().then(Mt=>{_.abort(),$t={value:Mt}},Mt=>{_.abort(),(!isAbortError(Mt)||Tt==null)&&(Tt={error:Mt})});function At(Mt){if($.aborted)return{abort(){},async join(){throw new AbortError}};const Dt=new AbortController,Rt=Dt.signal,xt=Mt(Rt),Jt={abort(){Dt.abort()},join:()=>xt};return nt.add(Jt),xt.catch(catchAbortError).catch(ar=>{Tt={error:ar},_.abort()}).finally(()=>{nt.delete(Jt),nt.size===0&&(Tt!=null?kt(Tt.error):_t($t.value))}),Jt}});return vt=vt.finally(()=>{et(),ht();let _t=Promise.resolve();for(let kt=b.length-1;kt>=0;kt--)_t=_t.finally(b[kt]);return _t}),vt}function run$1(a){const c=new AbortController,b=a(c.signal).catch(catchAbortError);return()=>(c.abort(),b)}function proactiveRetry(a,c,b={}){const{baseMs:_=1e3,onError:$,maxAttempts:k=1/0}=b;return execute(a,(et,nt)=>{const ot=new AbortController;let ht=!1;const vt=new Map;function _t(Tt){ot.abort(),vt.clear(),et(Tt)}function kt(Tt,At){if(vt.delete(At),ht&&vt.size===0){nt(Tt);return}if(!isAbortError(Tt)&&$)try{$(Tt,At)}catch(Mt){ot.abort(),vt.clear(),nt(Mt)}}async function $t(Tt){for(let At=0;;At++){const Mt=c(Tt,At);if(vt.set(At,Mt),Mt.then(_t,xt=>kt(xt,At)),At+1>=k)break;const Dt=Math.pow(2,At)*_,Rt=Math.round(Dt*(1+Math.random())/2);await delay$1(Tt,Rt)}ht=!0}return $t(ot.signal).catch(catchAbortError),()=>{ot.abort()}})}const es=Object.freeze(Object.defineProperty({__proto__:null,AbortError,abortable,all,catchAbortError,delay:delay$1,execute,forever,isAbortError,proactiveRetry,race:race$2,rethrowAbortError,retry:retry$1,run:run$1,spawn,throwIfAborted,waitForEvent},Symbol.toStringTag,{value:"Module"})),require$$1$5=getAugmentedNamespace(es);var buffer$3={},base64Js={};base64Js.byteLength=byteLength;base64Js.toByteArray=toByteArray;base64Js.fromByteArray=fromByteArray;var lookup=[],revLookup=[],Arr=typeof Uint8Array<"u"?Uint8Array:Array,code="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var i=0,len=code.length;i<len;++i)lookup[i]=code[i],revLookup[code.charCodeAt(i)]=i;revLookup[45]=62;revLookup[95]=63;function getLens(a){var c=a.length;if(c%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var b=a.indexOf("=");b===-1&&(b=c);var _=b===c?0:4-b%4;return[b,_]}function byteLength(a){var c=getLens(a),b=c[0],_=c[1];return(b+_)*3/4-_}function _byteLength(a,c,b){return(c+b)*3/4-b}function toByteArray(a){var c,b=getLens(a),_=b[0],$=b[1],k=new Arr(_byteLength(a,_,$)),et=0,nt=$>0?_-4:_,ot;for(ot=0;ot<nt;ot+=4)c=revLookup[a.charCodeAt(ot)]<<18|revLookup[a.charCodeAt(ot+1)]<<12|revLookup[a.charCodeAt(ot+2)]<<6|revLookup[a.charCodeAt(ot+3)],k[et++]=c>>16&255,k[et++]=c>>8&255,k[et++]=c&255;return $===2&&(c=revLookup[a.charCodeAt(ot)]<<2|revLookup[a.charCodeAt(ot+1)]>>4,k[et++]=c&255),$===1&&(c=revLookup[a.charCodeAt(ot)]<<10|revLookup[a.charCodeAt(ot+1)]<<4|revLookup[a.charCodeAt(ot+2)]>>2,k[et++]=c>>8&255,k[et++]=c&255),k}function tripletToBase64(a){return lookup[a>>18&63]+lookup[a>>12&63]+lookup[a>>6&63]+lookup[a&63]}function encodeChunk(a,c,b){for(var _,$=[],k=c;k<b;k+=3)_=(a[k]<<16&16711680)+(a[k+1]<<8&65280)+(a[k+2]&255),$.push(tripletToBase64(_));return $.join("")}function fromByteArray(a){for(var c,b=a.length,_=b%3,$=[],k=16383,et=0,nt=b-_;et<nt;et+=k)$.push(encodeChunk(a,et,et+k>nt?nt:et+k));return _===1?(c=a[b-1],$.push(lookup[c>>2]+lookup[c<<4&63]+"==")):_===2&&(c=(a[b-2]<<8)+a[b-1],$.push(lookup[c>>10]+lookup[c>>4&63]+lookup[c<<2&63]+"=")),$.join("")}var ieee754={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */ieee754.read=function(a,c,b,_,$){var k,et,nt=$*8-_-1,ot=(1<<nt)-1,ht=ot>>1,vt=-7,_t=b?$-1:0,kt=b?-1:1,$t=a[c+_t];for(_t+=kt,k=$t&(1<<-vt)-1,$t>>=-vt,vt+=nt;vt>0;k=k*256+a[c+_t],_t+=kt,vt-=8);for(et=k&(1<<-vt)-1,k>>=-vt,vt+=_;vt>0;et=et*256+a[c+_t],_t+=kt,vt-=8);if(k===0)k=1-ht;else{if(k===ot)return et?NaN:($t?-1:1)*(1/0);et=et+Math.pow(2,_),k=k-ht}return($t?-1:1)*et*Math.pow(2,k-_)};ieee754.write=function(a,c,b,_,$,k){var et,nt,ot,ht=k*8-$-1,vt=(1<<ht)-1,_t=vt>>1,kt=$===23?Math.pow(2,-24)-Math.pow(2,-77):0,$t=_?0:k-1,Tt=_?1:-1,At=c<0||c===0&&1/c<0?1:0;for(c=Math.abs(c),isNaN(c)||c===1/0?(nt=isNaN(c)?1:0,et=vt):(et=Math.floor(Math.log(c)/Math.LN2),c*(ot=Math.pow(2,-et))<1&&(et--,ot*=2),et+_t>=1?c+=kt/ot:c+=kt*Math.pow(2,1-_t),c*ot>=2&&(et++,ot/=2),et+_t>=vt?(nt=0,et=vt):et+_t>=1?(nt=(c*ot-1)*Math.pow(2,$),et=et+_t):(nt=c*Math.pow(2,_t-1)*Math.pow(2,$),et=0));$>=8;a[b+$t]=nt&255,$t+=Tt,nt/=256,$-=8);for(et=et<<$|nt,ht+=$;ht>0;a[b+$t]=et&255,$t+=Tt,et/=256,ht-=8);a[b+$t-Tt]|=At*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(a){const c=base64Js,b=ieee754,_=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;a.Buffer=vt,a.SlowBuffer=ar,a.INSPECT_MAX_BYTES=50;const $=2147483647;a.kMaxLength=$;const{Uint8Array:k,ArrayBuffer:et,SharedArrayBuffer:nt}=globalThis;vt.TYPED_ARRAY_SUPPORT=ot(),!vt.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function ot(){try{const Ut=new k(1),Ft={foo:function(){return 42}};return Object.setPrototypeOf(Ft,k.prototype),Object.setPrototypeOf(Ut,Ft),Ut.foo()===42}catch{return!1}}Object.defineProperty(vt.prototype,"parent",{enumerable:!0,get:function(){if(vt.isBuffer(this))return this.buffer}}),Object.defineProperty(vt.prototype,"offset",{enumerable:!0,get:function(){if(vt.isBuffer(this))return this.byteOffset}});function ht(Ut){if(Ut>$)throw new RangeError('The value "'+Ut+'" is invalid for option "size"');const Ft=new k(Ut);return Object.setPrototypeOf(Ft,vt.prototype),Ft}function vt(Ut,Ft,Ht){if(typeof Ut=="number"){if(typeof Ft=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return Tt(Ut)}return _t(Ut,Ft,Ht)}vt.poolSize=8192;function _t(Ut,Ft,Ht){if(typeof Ut=="string")return At(Ut,Ft);if(et.isView(Ut))return Dt(Ut);if(Ut==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof Ut);if(er(Ut,et)||Ut&&er(Ut.buffer,et)||typeof nt<"u"&&(er(Ut,nt)||Ut&&er(Ut.buffer,nt)))return Rt(Ut,Ft,Ht);if(typeof Ut=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const or=Ut.valueOf&&Ut.valueOf();if(or!=null&&or!==Ut)return vt.from(or,Ft,Ht);const vr=xt(Ut);if(vr)return vr;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof Ut[Symbol.toPrimitive]=="function")return vt.from(Ut[Symbol.toPrimitive]("string"),Ft,Ht);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof Ut)}vt.from=function(Ut,Ft,Ht){return _t(Ut,Ft,Ht)},Object.setPrototypeOf(vt.prototype,k.prototype),Object.setPrototypeOf(vt,k);function kt(Ut){if(typeof Ut!="number")throw new TypeError('"size" argument must be of type number');if(Ut<0)throw new RangeError('The value "'+Ut+'" is invalid for option "size"')}function $t(Ut,Ft,Ht){return kt(Ut),Ut<=0?ht(Ut):Ft!==void 0?typeof Ht=="string"?ht(Ut).fill(Ft,Ht):ht(Ut).fill(Ft):ht(Ut)}vt.alloc=function(Ut,Ft,Ht){return $t(Ut,Ft,Ht)};function Tt(Ut){return kt(Ut),ht(Ut<0?0:Jt(Ut)|0)}vt.allocUnsafe=function(Ut){return Tt(Ut)},vt.allocUnsafeSlow=function(Ut){return Tt(Ut)};function At(Ut,Ft){if((typeof Ft!="string"||Ft==="")&&(Ft="utf8"),!vt.isEncoding(Ft))throw new TypeError("Unknown encoding: "+Ft);const Ht=nr(Ut,Ft)|0;let or=ht(Ht);const vr=or.write(Ut,Ft);return vr!==Ht&&(or=or.slice(0,vr)),or}function Mt(Ut){const Ft=Ut.length<0?0:Jt(Ut.length)|0,Ht=ht(Ft);for(let or=0;or<Ft;or+=1)Ht[or]=Ut[or]&255;return Ht}function Dt(Ut){if(er(Ut,k)){const Ft=new k(Ut);return Rt(Ft.buffer,Ft.byteOffset,Ft.byteLength)}return Mt(Ut)}function Rt(Ut,Ft,Ht){if(Ft<0||Ut.byteLength<Ft)throw new RangeError('"offset" is outside of buffer bounds');if(Ut.byteLength<Ft+(Ht||0))throw new RangeError('"length" is outside of buffer bounds');let or;return Ft===void 0&&Ht===void 0?or=new k(Ut):Ht===void 0?or=new k(Ut,Ft):or=new k(Ut,Ft,Ht),Object.setPrototypeOf(or,vt.prototype),or}function xt(Ut){if(vt.isBuffer(Ut)){const Ft=Jt(Ut.length)|0,Ht=ht(Ft);return Ht.length===0||Ut.copy(Ht,0,0,Ft),Ht}if(Ut.length!==void 0)return typeof Ut.length!="number"||kr(Ut.length)?ht(0):Mt(Ut);if(Ut.type==="Buffer"&&Array.isArray(Ut.data))return Mt(Ut.data)}function Jt(Ut){if(Ut>=$)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+$.toString(16)+" bytes");return Ut|0}function ar(Ut){return+Ut!=Ut&&(Ut=0),vt.alloc(+Ut)}vt.isBuffer=function(Ft){return Ft!=null&&Ft._isBuffer===!0&&Ft!==vt.prototype},vt.compare=function(Ft,Ht){if(er(Ft,k)&&(Ft=vt.from(Ft,Ft.offset,Ft.byteLength)),er(Ht,k)&&(Ht=vt.from(Ht,Ht.offset,Ht.byteLength)),!vt.isBuffer(Ft)||!vt.isBuffer(Ht))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(Ft===Ht)return 0;let or=Ft.length,vr=Ht.length;for(let Ir=0,Sr=Math.min(or,vr);Ir<Sr;++Ir)if(Ft[Ir]!==Ht[Ir]){or=Ft[Ir],vr=Ht[Ir];break}return or<vr?-1:vr<or?1:0},vt.isEncoding=function(Ft){switch(String(Ft).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},vt.concat=function(Ft,Ht){if(!Array.isArray(Ft))throw new TypeError('"list" argument must be an Array of Buffers');if(Ft.length===0)return vt.alloc(0);let or;if(Ht===void 0)for(Ht=0,or=0;or<Ft.length;++or)Ht+=Ft[or].length;const vr=vt.allocUnsafe(Ht);let Ir=0;for(or=0;or<Ft.length;++or){let Sr=Ft[or];if(er(Sr,k))Ir+Sr.length>vr.length?(vt.isBuffer(Sr)||(Sr=vt.from(Sr)),Sr.copy(vr,Ir)):k.prototype.set.call(vr,Sr,Ir);else if(vt.isBuffer(Sr))Sr.copy(vr,Ir);else throw new TypeError('"list" argument must be an Array of Buffers');Ir+=Sr.length}return vr};function nr(Ut,Ft){if(vt.isBuffer(Ut))return Ut.length;if(et.isView(Ut)||er(Ut,et))return Ut.byteLength;if(typeof Ut!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof Ut);const Ht=Ut.length,or=arguments.length>2&&arguments[2]===!0;if(!or&&Ht===0)return 0;let vr=!1;for(;;)switch(Ft){case"ascii":case"latin1":case"binary":return Ht;case"utf8":case"utf-8":return Zr(Ut).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Ht*2;case"hex":return Ht>>>1;case"base64":return St(Ut).length;default:if(vr)return or?-1:Zr(Ut).length;Ft=(""+Ft).toLowerCase(),vr=!0}}vt.byteLength=nr;function pr(Ut,Ft,Ht){let or=!1;if((Ft===void 0||Ft<0)&&(Ft=0),Ft>this.length||((Ht===void 0||Ht>this.length)&&(Ht=this.length),Ht<=0)||(Ht>>>=0,Ft>>>=0,Ht<=Ft))return"";for(Ut||(Ut="utf8");;)switch(Ut){case"hex":return Lt(this,Ft,Ht);case"utf8":case"utf-8":return gt(this,Ft,Ht);case"ascii":return rt(this,Ft,Ht);case"latin1":case"binary":return mt(this,Ft,Ht);case"base64":return lt(this,Ft,Ht);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Gt(this,Ft,Ht);default:if(or)throw new TypeError("Unknown encoding: "+Ut);Ut=(Ut+"").toLowerCase(),or=!0}}vt.prototype._isBuffer=!0;function ur(Ut,Ft,Ht){const or=Ut[Ft];Ut[Ft]=Ut[Ht],Ut[Ht]=or}vt.prototype.swap16=function(){const Ft=this.length;if(Ft%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let Ht=0;Ht<Ft;Ht+=2)ur(this,Ht,Ht+1);return this},vt.prototype.swap32=function(){const Ft=this.length;if(Ft%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let Ht=0;Ht<Ft;Ht+=4)ur(this,Ht,Ht+3),ur(this,Ht+1,Ht+2);return this},vt.prototype.swap64=function(){const Ft=this.length;if(Ft%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let Ht=0;Ht<Ft;Ht+=8)ur(this,Ht,Ht+7),ur(this,Ht+1,Ht+6),ur(this,Ht+2,Ht+5),ur(this,Ht+3,Ht+4);return this},vt.prototype.toString=function(){const Ft=this.length;return Ft===0?"":arguments.length===0?gt(this,0,Ft):pr.apply(this,arguments)},vt.prototype.toLocaleString=vt.prototype.toString,vt.prototype.equals=function(Ft){if(!vt.isBuffer(Ft))throw new TypeError("Argument must be a Buffer");return this===Ft?!0:vt.compare(this,Ft)===0},vt.prototype.inspect=function(){let Ft="";const Ht=a.INSPECT_MAX_BYTES;return Ft=this.toString("hex",0,Ht).replace(/(.{2})/g,"$1 ").trim(),this.length>Ht&&(Ft+=" ... "),"<Buffer "+Ft+">"},_&&(vt.prototype[_]=vt.prototype.inspect),vt.prototype.compare=function(Ft,Ht,or,vr,Ir){if(er(Ft,k)&&(Ft=vt.from(Ft,Ft.offset,Ft.byteLength)),!vt.isBuffer(Ft))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof Ft);if(Ht===void 0&&(Ht=0),or===void 0&&(or=Ft?Ft.length:0),vr===void 0&&(vr=0),Ir===void 0&&(Ir=this.length),Ht<0||or>Ft.length||vr<0||Ir>this.length)throw new RangeError("out of range index");if(vr>=Ir&&Ht>=or)return 0;if(vr>=Ir)return-1;if(Ht>=or)return 1;if(Ht>>>=0,or>>>=0,vr>>>=0,Ir>>>=0,this===Ft)return 0;let Sr=Ir-vr,Or=or-Ht;const Cr=Math.min(Sr,Or),yt=this.slice(vr,Ir),Bt=Ft.slice(Ht,or);for(let Zt=0;Zt<Cr;++Zt)if(yt[Zt]!==Bt[Zt]){Sr=yt[Zt],Or=Bt[Zt];break}return Sr<Or?-1:Or<Sr?1:0};function Ot(Ut,Ft,Ht,or,vr){if(Ut.length===0)return-1;if(typeof Ht=="string"?(or=Ht,Ht=0):Ht>2147483647?Ht=2147483647:Ht<-2147483648&&(Ht=-2147483648),Ht=+Ht,kr(Ht)&&(Ht=vr?0:Ut.length-1),Ht<0&&(Ht=Ut.length+Ht),Ht>=Ut.length){if(vr)return-1;Ht=Ut.length-1}else if(Ht<0)if(vr)Ht=0;else return-1;if(typeof Ft=="string"&&(Ft=vt.from(Ft,or)),vt.isBuffer(Ft))return Ft.length===0?-1:It(Ut,Ft,Ht,or,vr);if(typeof Ft=="number")return Ft=Ft&255,typeof k.prototype.indexOf=="function"?vr?k.prototype.indexOf.call(Ut,Ft,Ht):k.prototype.lastIndexOf.call(Ut,Ft,Ht):It(Ut,[Ft],Ht,or,vr);throw new TypeError("val must be string, number or Buffer")}function It(Ut,Ft,Ht,or,vr){let Ir=1,Sr=Ut.length,Or=Ft.length;if(or!==void 0&&(or=String(or).toLowerCase(),or==="ucs2"||or==="ucs-2"||or==="utf16le"||or==="utf-16le")){if(Ut.length<2||Ft.length<2)return-1;Ir=2,Sr/=2,Or/=2,Ht/=2}function Cr(Bt,Zt){return Ir===1?Bt[Zt]:Bt.readUInt16BE(Zt*Ir)}let yt;if(vr){let Bt=-1;for(yt=Ht;yt<Sr;yt++)if(Cr(Ut,yt)===Cr(Ft,Bt===-1?0:yt-Bt)){if(Bt===-1&&(Bt=yt),yt-Bt+1===Or)return Bt*Ir}else Bt!==-1&&(yt-=yt-Bt),Bt=-1}else for(Ht+Or>Sr&&(Ht=Sr-Or),yt=Ht;yt>=0;yt--){let Bt=!0;for(let Zt=0;Zt<Or;Zt++)if(Cr(Ut,yt+Zt)!==Cr(Ft,Zt)){Bt=!1;break}if(Bt)return yt}return-1}vt.prototype.includes=function(Ft,Ht,or){return this.indexOf(Ft,Ht,or)!==-1},vt.prototype.indexOf=function(Ft,Ht,or){return Ot(this,Ft,Ht,or,!0)},vt.prototype.lastIndexOf=function(Ft,Ht,or){return Ot(this,Ft,Ht,or,!1)};function ut(Ut,Ft,Ht,or){Ht=Number(Ht)||0;const vr=Ut.length-Ht;or?(or=Number(or),or>vr&&(or=vr)):or=vr;const Ir=Ft.length;or>Ir/2&&(or=Ir/2);let Sr;for(Sr=0;Sr<or;++Sr){const Or=parseInt(Ft.substr(Sr*2,2),16);if(kr(Or))return Sr;Ut[Ht+Sr]=Or}return Sr}function _e(Ut,Ft,Ht,or){return Kt(Zr(Ft,Ut.length-Ht),Ut,Ht,or)}function tt(Ut,Ft,Ht,or){return Kt(Pr(Ft),Ut,Ht,or)}function it(Ut,Ft,Ht,or){return Kt(St(Ft),Ut,Ht,or)}function dt(Ut,Ft,Ht,or){return Kt(_r(Ft,Ut.length-Ht),Ut,Ht,or)}vt.prototype.write=function(Ft,Ht,or,vr){if(Ht===void 0)vr="utf8",or=this.length,Ht=0;else if(or===void 0&&typeof Ht=="string")vr=Ht,or=this.length,Ht=0;else if(isFinite(Ht))Ht=Ht>>>0,isFinite(or)?(or=or>>>0,vr===void 0&&(vr="utf8")):(vr=or,or=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const Ir=this.length-Ht;if((or===void 0||or>Ir)&&(or=Ir),Ft.length>0&&(or<0||Ht<0)||Ht>this.length)throw new RangeError("Attempt to write outside buffer bounds");vr||(vr="utf8");let Sr=!1;for(;;)switch(vr){case"hex":return ut(this,Ft,Ht,or);case"utf8":case"utf-8":return _e(this,Ft,Ht,or);case"ascii":case"latin1":case"binary":return tt(this,Ft,Ht,or);case"base64":return it(this,Ft,Ht,or);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return dt(this,Ft,Ht,or);default:if(Sr)throw new TypeError("Unknown encoding: "+vr);vr=(""+vr).toLowerCase(),Sr=!0}},vt.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function lt(Ut,Ft,Ht){return Ft===0&&Ht===Ut.length?c.fromByteArray(Ut):c.fromByteArray(Ut.slice(Ft,Ht))}function gt(Ut,Ft,Ht){Ht=Math.min(Ut.length,Ht);const or=[];let vr=Ft;for(;vr<Ht;){const Ir=Ut[vr];let Sr=null,Or=Ir>239?4:Ir>223?3:Ir>191?2:1;if(vr+Or<=Ht){let Cr,yt,Bt,Zt;switch(Or){case 1:Ir<128&&(Sr=Ir);break;case 2:Cr=Ut[vr+1],(Cr&192)===128&&(Zt=(Ir&31)<<6|Cr&63,Zt>127&&(Sr=Zt));break;case 3:Cr=Ut[vr+1],yt=Ut[vr+2],(Cr&192)===128&&(yt&192)===128&&(Zt=(Ir&15)<<12|(Cr&63)<<6|yt&63,Zt>2047&&(Zt<55296||Zt>57343)&&(Sr=Zt));break;case 4:Cr=Ut[vr+1],yt=Ut[vr+2],Bt=Ut[vr+3],(Cr&192)===128&&(yt&192)===128&&(Bt&192)===128&&(Zt=(Ir&15)<<18|(Cr&63)<<12|(yt&63)<<6|Bt&63,Zt>65535&&Zt<1114112&&(Sr=Zt))}}Sr===null?(Sr=65533,Or=1):Sr>65535&&(Sr-=65536,or.push(Sr>>>10&1023|55296),Sr=56320|Sr&1023),or.push(Sr),vr+=Or}return pt(or)}const Et=4096;function pt(Ut){const Ft=Ut.length;if(Ft<=Et)return String.fromCharCode.apply(String,Ut);let Ht="",or=0;for(;or<Ft;)Ht+=String.fromCharCode.apply(String,Ut.slice(or,or+=Et));return Ht}function rt(Ut,Ft,Ht){let or="";Ht=Math.min(Ut.length,Ht);for(let vr=Ft;vr<Ht;++vr)or+=String.fromCharCode(Ut[vr]&127);return or}function mt(Ut,Ft,Ht){let or="";Ht=Math.min(Ut.length,Ht);for(let vr=Ft;vr<Ht;++vr)or+=String.fromCharCode(Ut[vr]);return or}function Lt(Ut,Ft,Ht){const or=Ut.length;(!Ft||Ft<0)&&(Ft=0),(!Ht||Ht<0||Ht>or)&&(Ht=or);let vr="";for(let Ir=Ft;Ir<Ht;++Ir)vr+=tr[Ut[Ir]];return vr}function Gt(Ut,Ft,Ht){const or=Ut.slice(Ft,Ht);let vr="";for(let Ir=0;Ir<or.length-1;Ir+=2)vr+=String.fromCharCode(or[Ir]+or[Ir+1]*256);return vr}vt.prototype.slice=function(Ft,Ht){const or=this.length;Ft=~~Ft,Ht=Ht===void 0?or:~~Ht,Ft<0?(Ft+=or,Ft<0&&(Ft=0)):Ft>or&&(Ft=or),Ht<0?(Ht+=or,Ht<0&&(Ht=0)):Ht>or&&(Ht=or),Ht<Ft&&(Ht=Ft);const vr=this.subarray(Ft,Ht);return Object.setPrototypeOf(vr,vt.prototype),vr};function rr(Ut,Ft,Ht){if(Ut%1!==0||Ut<0)throw new RangeError("offset is not uint");if(Ut+Ft>Ht)throw new RangeError("Trying to access beyond buffer length")}vt.prototype.readUintLE=vt.prototype.readUIntLE=function(Ft,Ht,or){Ft=Ft>>>0,Ht=Ht>>>0,or||rr(Ft,Ht,this.length);let vr=this[Ft],Ir=1,Sr=0;for(;++Sr<Ht&&(Ir*=256);)vr+=this[Ft+Sr]*Ir;return vr},vt.prototype.readUintBE=vt.prototype.readUIntBE=function(Ft,Ht,or){Ft=Ft>>>0,Ht=Ht>>>0,or||rr(Ft,Ht,this.length);let vr=this[Ft+--Ht],Ir=1;for(;Ht>0&&(Ir*=256);)vr+=this[Ft+--Ht]*Ir;return vr},vt.prototype.readUint8=vt.prototype.readUInt8=function(Ft,Ht){return Ft=Ft>>>0,Ht||rr(Ft,1,this.length),this[Ft]},vt.prototype.readUint16LE=vt.prototype.readUInt16LE=function(Ft,Ht){return Ft=Ft>>>0,Ht||rr(Ft,2,this.length),this[Ft]|this[Ft+1]<<8},vt.prototype.readUint16BE=vt.prototype.readUInt16BE=function(Ft,Ht){return Ft=Ft>>>0,Ht||rr(Ft,2,this.length),this[Ft]<<8|this[Ft+1]},vt.prototype.readUint32LE=vt.prototype.readUInt32LE=function(Ft,Ht){return Ft=Ft>>>0,Ht||rr(Ft,4,this.length),(this[Ft]|this[Ft+1]<<8|this[Ft+2]<<16)+this[Ft+3]*16777216},vt.prototype.readUint32BE=vt.prototype.readUInt32BE=function(Ft,Ht){return Ft=Ft>>>0,Ht||rr(Ft,4,this.length),this[Ft]*16777216+(this[Ft+1]<<16|this[Ft+2]<<8|this[Ft+3])},vt.prototype.readBigUInt64LE=bt(function(Ft){Ft=Ft>>>0,dr(Ft,"offset");const Ht=this[Ft],or=this[Ft+7];(Ht===void 0||or===void 0)&&Er(Ft,this.length-8);const vr=Ht+this[++Ft]*2**8+this[++Ft]*2**16+this[++Ft]*2**24,Ir=this[++Ft]+this[++Ft]*2**8+this[++Ft]*2**16+or*2**24;return BigInt(vr)+(BigInt(Ir)<<BigInt(32))}),vt.prototype.readBigUInt64BE=bt(function(Ft){Ft=Ft>>>0,dr(Ft,"offset");const Ht=this[Ft],or=this[Ft+7];(Ht===void 0||or===void 0)&&Er(Ft,this.length-8);const vr=Ht*2**24+this[++Ft]*2**16+this[++Ft]*2**8+this[++Ft],Ir=this[++Ft]*2**24+this[++Ft]*2**16+this[++Ft]*2**8+or;return(BigInt(vr)<<BigInt(32))+BigInt(Ir)}),vt.prototype.readIntLE=function(Ft,Ht,or){Ft=Ft>>>0,Ht=Ht>>>0,or||rr(Ft,Ht,this.length);let vr=this[Ft],Ir=1,Sr=0;for(;++Sr<Ht&&(Ir*=256);)vr+=this[Ft+Sr]*Ir;return Ir*=128,vr>=Ir&&(vr-=Math.pow(2,8*Ht)),vr},vt.prototype.readIntBE=function(Ft,Ht,or){Ft=Ft>>>0,Ht=Ht>>>0,or||rr(Ft,Ht,this.length);let vr=Ht,Ir=1,Sr=this[Ft+--vr];for(;vr>0&&(Ir*=256);)Sr+=this[Ft+--vr]*Ir;return Ir*=128,Sr>=Ir&&(Sr-=Math.pow(2,8*Ht)),Sr},vt.prototype.readInt8=function(Ft,Ht){return Ft=Ft>>>0,Ht||rr(Ft,1,this.length),this[Ft]&128?(255-this[Ft]+1)*-1:this[Ft]},vt.prototype.readInt16LE=function(Ft,Ht){Ft=Ft>>>0,Ht||rr(Ft,2,this.length);const or=this[Ft]|this[Ft+1]<<8;return or&32768?or|4294901760:or},vt.prototype.readInt16BE=function(Ft,Ht){Ft=Ft>>>0,Ht||rr(Ft,2,this.length);const or=this[Ft+1]|this[Ft]<<8;return or&32768?or|4294901760:or},vt.prototype.readInt32LE=function(Ft,Ht){return Ft=Ft>>>0,Ht||rr(Ft,4,this.length),this[Ft]|this[Ft+1]<<8|this[Ft+2]<<16|this[Ft+3]<<24},vt.prototype.readInt32BE=function(Ft,Ht){return Ft=Ft>>>0,Ht||rr(Ft,4,this.length),this[Ft]<<24|this[Ft+1]<<16|this[Ft+2]<<8|this[Ft+3]},vt.prototype.readBigInt64LE=bt(function(Ft){Ft=Ft>>>0,dr(Ft,"offset");const Ht=this[Ft],or=this[Ft+7];(Ht===void 0||or===void 0)&&Er(Ft,this.length-8);const vr=this[Ft+4]+this[Ft+5]*2**8+this[Ft+6]*2**16+(or<<24);return(BigInt(vr)<<BigInt(32))+BigInt(Ht+this[++Ft]*2**8+this[++Ft]*2**16+this[++Ft]*2**24)}),vt.prototype.readBigInt64BE=bt(function(Ft){Ft=Ft>>>0,dr(Ft,"offset");const Ht=this[Ft],or=this[Ft+7];(Ht===void 0||or===void 0)&&Er(Ft,this.length-8);const vr=(Ht<<24)+this[++Ft]*2**16+this[++Ft]*2**8+this[++Ft];return(BigInt(vr)<<BigInt(32))+BigInt(this[++Ft]*2**24+this[++Ft]*2**16+this[++Ft]*2**8+or)}),vt.prototype.readFloatLE=function(Ft,Ht){return Ft=Ft>>>0,Ht||rr(Ft,4,this.length),b.read(this,Ft,!0,23,4)},vt.prototype.readFloatBE=function(Ft,Ht){return Ft=Ft>>>0,Ht||rr(Ft,4,this.length),b.read(this,Ft,!1,23,4)},vt.prototype.readDoubleLE=function(Ft,Ht){return Ft=Ft>>>0,Ht||rr(Ft,8,this.length),b.read(this,Ft,!0,52,8)},vt.prototype.readDoubleBE=function(Ft,Ht){return Ft=Ft>>>0,Ht||rr(Ft,8,this.length),b.read(this,Ft,!1,52,8)};function ir(Ut,Ft,Ht,or,vr,Ir){if(!vt.isBuffer(Ut))throw new TypeError('"buffer" argument must be a Buffer instance');if(Ft>vr||Ft<Ir)throw new RangeError('"value" argument is out of bounds');if(Ht+or>Ut.length)throw new RangeError("Index out of range")}vt.prototype.writeUintLE=vt.prototype.writeUIntLE=function(Ft,Ht,or,vr){if(Ft=+Ft,Ht=Ht>>>0,or=or>>>0,!vr){const Or=Math.pow(2,8*or)-1;ir(this,Ft,Ht,or,Or,0)}let Ir=1,Sr=0;for(this[Ht]=Ft&255;++Sr<or&&(Ir*=256);)this[Ht+Sr]=Ft/Ir&255;return Ht+or},vt.prototype.writeUintBE=vt.prototype.writeUIntBE=function(Ft,Ht,or,vr){if(Ft=+Ft,Ht=Ht>>>0,or=or>>>0,!vr){const Or=Math.pow(2,8*or)-1;ir(this,Ft,Ht,or,Or,0)}let Ir=or-1,Sr=1;for(this[Ht+Ir]=Ft&255;--Ir>=0&&(Sr*=256);)this[Ht+Ir]=Ft/Sr&255;return Ht+or},vt.prototype.writeUint8=vt.prototype.writeUInt8=function(Ft,Ht,or){return Ft=+Ft,Ht=Ht>>>0,or||ir(this,Ft,Ht,1,255,0),this[Ht]=Ft&255,Ht+1},vt.prototype.writeUint16LE=vt.prototype.writeUInt16LE=function(Ft,Ht,or){return Ft=+Ft,Ht=Ht>>>0,or||ir(this,Ft,Ht,2,65535,0),this[Ht]=Ft&255,this[Ht+1]=Ft>>>8,Ht+2},vt.prototype.writeUint16BE=vt.prototype.writeUInt16BE=function(Ft,Ht,or){return Ft=+Ft,Ht=Ht>>>0,or||ir(this,Ft,Ht,2,65535,0),this[Ht]=Ft>>>8,this[Ht+1]=Ft&255,Ht+2},vt.prototype.writeUint32LE=vt.prototype.writeUInt32LE=function(Ft,Ht,or){return Ft=+Ft,Ht=Ht>>>0,or||ir(this,Ft,Ht,4,4294967295,0),this[Ht+3]=Ft>>>24,this[Ht+2]=Ft>>>16,this[Ht+1]=Ft>>>8,this[Ht]=Ft&255,Ht+4},vt.prototype.writeUint32BE=vt.prototype.writeUInt32BE=function(Ft,Ht,or){return Ft=+Ft,Ht=Ht>>>0,or||ir(this,Ft,Ht,4,4294967295,0),this[Ht]=Ft>>>24,this[Ht+1]=Ft>>>16,this[Ht+2]=Ft>>>8,this[Ht+3]=Ft&255,Ht+4};function Wt(Ut,Ft,Ht,or,vr){cr(Ft,or,vr,Ut,Ht,7);let Ir=Number(Ft&BigInt(4294967295));Ut[Ht++]=Ir,Ir=Ir>>8,Ut[Ht++]=Ir,Ir=Ir>>8,Ut[Ht++]=Ir,Ir=Ir>>8,Ut[Ht++]=Ir;let Sr=Number(Ft>>BigInt(32)&BigInt(4294967295));return Ut[Ht++]=Sr,Sr=Sr>>8,Ut[Ht++]=Sr,Sr=Sr>>8,Ut[Ht++]=Sr,Sr=Sr>>8,Ut[Ht++]=Sr,Ht}function zt(Ut,Ft,Ht,or,vr){cr(Ft,or,vr,Ut,Ht,7);let Ir=Number(Ft&BigInt(4294967295));Ut[Ht+7]=Ir,Ir=Ir>>8,Ut[Ht+6]=Ir,Ir=Ir>>8,Ut[Ht+5]=Ir,Ir=Ir>>8,Ut[Ht+4]=Ir;let Sr=Number(Ft>>BigInt(32)&BigInt(4294967295));return Ut[Ht+3]=Sr,Sr=Sr>>8,Ut[Ht+2]=Sr,Sr=Sr>>8,Ut[Ht+1]=Sr,Sr=Sr>>8,Ut[Ht]=Sr,Ht+8}vt.prototype.writeBigUInt64LE=bt(function(Ft,Ht=0){return Wt(this,Ft,Ht,BigInt(0),BigInt("0xffffffffffffffff"))}),vt.prototype.writeBigUInt64BE=bt(function(Ft,Ht=0){return zt(this,Ft,Ht,BigInt(0),BigInt("0xffffffffffffffff"))}),vt.prototype.writeIntLE=function(Ft,Ht,or,vr){if(Ft=+Ft,Ht=Ht>>>0,!vr){const Cr=Math.pow(2,8*or-1);ir(this,Ft,Ht,or,Cr-1,-Cr)}let Ir=0,Sr=1,Or=0;for(this[Ht]=Ft&255;++Ir<or&&(Sr*=256);)Ft<0&&Or===0&&this[Ht+Ir-1]!==0&&(Or=1),this[Ht+Ir]=(Ft/Sr>>0)-Or&255;return Ht+or},vt.prototype.writeIntBE=function(Ft,Ht,or,vr){if(Ft=+Ft,Ht=Ht>>>0,!vr){const Cr=Math.pow(2,8*or-1);ir(this,Ft,Ht,or,Cr-1,-Cr)}let Ir=or-1,Sr=1,Or=0;for(this[Ht+Ir]=Ft&255;--Ir>=0&&(Sr*=256);)Ft<0&&Or===0&&this[Ht+Ir+1]!==0&&(Or=1),this[Ht+Ir]=(Ft/Sr>>0)-Or&255;return Ht+or},vt.prototype.writeInt8=function(Ft,Ht,or){return Ft=+Ft,Ht=Ht>>>0,or||ir(this,Ft,Ht,1,127,-128),Ft<0&&(Ft=255+Ft+1),this[Ht]=Ft&255,Ht+1},vt.prototype.writeInt16LE=function(Ft,Ht,or){return Ft=+Ft,Ht=Ht>>>0,or||ir(this,Ft,Ht,2,32767,-32768),this[Ht]=Ft&255,this[Ht+1]=Ft>>>8,Ht+2},vt.prototype.writeInt16BE=function(Ft,Ht,or){return Ft=+Ft,Ht=Ht>>>0,or||ir(this,Ft,Ht,2,32767,-32768),this[Ht]=Ft>>>8,this[Ht+1]=Ft&255,Ht+2},vt.prototype.writeInt32LE=function(Ft,Ht,or){return Ft=+Ft,Ht=Ht>>>0,or||ir(this,Ft,Ht,4,2147483647,-2147483648),this[Ht]=Ft&255,this[Ht+1]=Ft>>>8,this[Ht+2]=Ft>>>16,this[Ht+3]=Ft>>>24,Ht+4},vt.prototype.writeInt32BE=function(Ft,Ht,or){return Ft=+Ft,Ht=Ht>>>0,or||ir(this,Ft,Ht,4,2147483647,-2147483648),Ft<0&&(Ft=4294967295+Ft+1),this[Ht]=Ft>>>24,this[Ht+1]=Ft>>>16,this[Ht+2]=Ft>>>8,this[Ht+3]=Ft&255,Ht+4},vt.prototype.writeBigInt64LE=bt(function(Ft,Ht=0){return Wt(this,Ft,Ht,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),vt.prototype.writeBigInt64BE=bt(function(Ft,Ht=0){return zt(this,Ft,Ht,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function wt(Ut,Ft,Ht,or,vr,Ir){if(Ht+or>Ut.length)throw new RangeError("Index out of range");if(Ht<0)throw new RangeError("Index out of range")}function Vt(Ut,Ft,Ht,or,vr){return Ft=+Ft,Ht=Ht>>>0,vr||wt(Ut,Ft,Ht,4),b.write(Ut,Ft,Ht,or,23,4),Ht+4}vt.prototype.writeFloatLE=function(Ft,Ht,or){return Vt(this,Ft,Ht,!0,or)},vt.prototype.writeFloatBE=function(Ft,Ht,or){return Vt(this,Ft,Ht,!1,or)};function Qt(Ut,Ft,Ht,or,vr){return Ft=+Ft,Ht=Ht>>>0,vr||wt(Ut,Ft,Ht,8),b.write(Ut,Ft,Ht,or,52,8),Ht+8}vt.prototype.writeDoubleLE=function(Ft,Ht,or){return Qt(this,Ft,Ht,!0,or)},vt.prototype.writeDoubleBE=function(Ft,Ht,or){return Qt(this,Ft,Ht,!1,or)},vt.prototype.copy=function(Ft,Ht,or,vr){if(!vt.isBuffer(Ft))throw new TypeError("argument should be a Buffer");if(or||(or=0),!vr&&vr!==0&&(vr=this.length),Ht>=Ft.length&&(Ht=Ft.length),Ht||(Ht=0),vr>0&&vr<or&&(vr=or),vr===or||Ft.length===0||this.length===0)return 0;if(Ht<0)throw new RangeError("targetStart out of bounds");if(or<0||or>=this.length)throw new RangeError("Index out of range");if(vr<0)throw new RangeError("sourceEnd out of bounds");vr>this.length&&(vr=this.length),Ft.length-Ht<vr-or&&(vr=Ft.length-Ht+or);const Ir=vr-or;return this===Ft&&typeof k.prototype.copyWithin=="function"?this.copyWithin(Ht,or,vr):k.prototype.set.call(Ft,this.subarray(or,vr),Ht),Ir},vt.prototype.fill=function(Ft,Ht,or,vr){if(typeof Ft=="string"){if(typeof Ht=="string"?(vr=Ht,Ht=0,or=this.length):typeof or=="string"&&(vr=or,or=this.length),vr!==void 0&&typeof vr!="string")throw new TypeError("encoding must be a string");if(typeof vr=="string"&&!vt.isEncoding(vr))throw new TypeError("Unknown encoding: "+vr);if(Ft.length===1){const Sr=Ft.charCodeAt(0);(vr==="utf8"&&Sr<128||vr==="latin1")&&(Ft=Sr)}}else typeof Ft=="number"?Ft=Ft&255:typeof Ft=="boolean"&&(Ft=Number(Ft));if(Ht<0||this.length<Ht||this.length<or)throw new RangeError("Out of range index");if(or<=Ht)return this;Ht=Ht>>>0,or=or===void 0?this.length:or>>>0,Ft||(Ft=0);let Ir;if(typeof Ft=="number")for(Ir=Ht;Ir<or;++Ir)this[Ir]=Ft;else{const Sr=vt.isBuffer(Ft)?Ft:vt.from(Ft,vr),Or=Sr.length;if(Or===0)throw new TypeError('The value "'+Ft+'" is invalid for argument "value"');for(Ir=0;Ir<or-Ht;++Ir)this[Ir+Ht]=Sr[Ir%Or]}return this};const Nt={};function st(Ut,Ft,Ht){Nt[Ut]=class extends Ht{constructor(){super(),Object.defineProperty(this,"message",{value:Ft.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${Ut}]`,this.stack,delete this.name}get code(){return Ut}set code(vr){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:vr,writable:!0})}toString(){return`${this.name} [${Ut}]: ${this.message}`}}}st("ERR_BUFFER_OUT_OF_BOUNDS",function(Ut){return Ut?`${Ut} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),st("ERR_INVALID_ARG_TYPE",function(Ut,Ft){return`The "${Ut}" argument must be of type number. Received type ${typeof Ft}`},TypeError),st("ERR_OUT_OF_RANGE",function(Ut,Ft,Ht){let or=`The value of "${Ut}" is out of range.`,vr=Ht;return Number.isInteger(Ht)&&Math.abs(Ht)>2**32?vr=Ct(String(Ht)):typeof Ht=="bigint"&&(vr=String(Ht),(Ht>BigInt(2)**BigInt(32)||Ht<-(BigInt(2)**BigInt(32)))&&(vr=Ct(vr)),vr+="n"),or+=` It must be ${Ft}. Received ${vr}`,or},RangeError);function Ct(Ut){let Ft="",Ht=Ut.length;const or=Ut[0]==="-"?1:0;for(;Ht>=or+4;Ht-=3)Ft=`_${Ut.slice(Ht-3,Ht)}${Ft}`;return`${Ut.slice(0,Ht)}${Ft}`}function qt(Ut,Ft,Ht){dr(Ft,"offset"),(Ut[Ft]===void 0||Ut[Ft+Ht]===void 0)&&Er(Ft,Ut.length-(Ht+1))}function cr(Ut,Ft,Ht,or,vr,Ir){if(Ut>Ht||Ut<Ft){const Sr=typeof Ft=="bigint"?"n":"";let Or;throw Ir>3?Ft===0||Ft===BigInt(0)?Or=`>= 0${Sr} and < 2${Sr} ** ${(Ir+1)*8}${Sr}`:Or=`>= -(2${Sr} ** ${(Ir+1)*8-1}${Sr}) and < 2 ** ${(Ir+1)*8-1}${Sr}`:Or=`>= ${Ft}${Sr} and <= ${Ht}${Sr}`,new Nt.ERR_OUT_OF_RANGE("value",Or,Ut)}qt(or,vr,Ir)}function dr(Ut,Ft){if(typeof Ut!="number")throw new Nt.ERR_INVALID_ARG_TYPE(Ft,"number",Ut)}function Er(Ut,Ft,Ht){throw Math.floor(Ut)!==Ut?(dr(Ut,Ht),new Nt.ERR_OUT_OF_RANGE(Ht||"offset","an integer",Ut)):Ft<0?new Nt.ERR_BUFFER_OUT_OF_BOUNDS:new Nt.ERR_OUT_OF_RANGE(Ht||"offset",`>= ${Ht?1:0} and <= ${Ft}`,Ut)}const Tr=/[^+/0-9A-Za-z-_]/g;function gr(Ut){if(Ut=Ut.split("=")[0],Ut=Ut.trim().replace(Tr,""),Ut.length<2)return"";for(;Ut.length%4!==0;)Ut=Ut+"=";return Ut}function Zr(Ut,Ft){Ft=Ft||1/0;let Ht;const or=Ut.length;let vr=null;const Ir=[];for(let Sr=0;Sr<or;++Sr){if(Ht=Ut.charCodeAt(Sr),Ht>55295&&Ht<57344){if(!vr){if(Ht>56319){(Ft-=3)>-1&&Ir.push(239,191,189);continue}else if(Sr+1===or){(Ft-=3)>-1&&Ir.push(239,191,189);continue}vr=Ht;continue}if(Ht<56320){(Ft-=3)>-1&&Ir.push(239,191,189),vr=Ht;continue}Ht=(vr-55296<<10|Ht-56320)+65536}else vr&&(Ft-=3)>-1&&Ir.push(239,191,189);if(vr=null,Ht<128){if((Ft-=1)<0)break;Ir.push(Ht)}else if(Ht<2048){if((Ft-=2)<0)break;Ir.push(Ht>>6|192,Ht&63|128)}else if(Ht<65536){if((Ft-=3)<0)break;Ir.push(Ht>>12|224,Ht>>6&63|128,Ht&63|128)}else if(Ht<1114112){if((Ft-=4)<0)break;Ir.push(Ht>>18|240,Ht>>12&63|128,Ht>>6&63|128,Ht&63|128)}else throw new Error("Invalid code point")}return Ir}function Pr(Ut){const Ft=[];for(let Ht=0;Ht<Ut.length;++Ht)Ft.push(Ut.charCodeAt(Ht)&255);return Ft}function _r(Ut,Ft){let Ht,or,vr;const Ir=[];for(let Sr=0;Sr<Ut.length&&!((Ft-=2)<0);++Sr)Ht=Ut.charCodeAt(Sr),or=Ht>>8,vr=Ht%256,Ir.push(vr),Ir.push(or);return Ir}function St(Ut){return c.toByteArray(gr(Ut))}function Kt(Ut,Ft,Ht,or){let vr;for(vr=0;vr<or&&!(vr+Ht>=Ft.length||vr>=Ut.length);++vr)Ft[vr+Ht]=Ut[vr];return vr}function er(Ut,Ft){return Ut instanceof Ft||Ut!=null&&Ut.constructor!=null&&Ut.constructor.name!=null&&Ut.constructor.name===Ft.name}function kr(Ut){return Ut!==Ut}const tr=function(){const Ut="0123456789abcdef",Ft=new Array(256);for(let Ht=0;Ht<16;++Ht){const or=Ht*16;for(let vr=0;vr<16;++vr)Ft[or+vr]=Ut[Ht]+Ut[vr]}return Ft}();function bt(Ut){return typeof BigInt>"u"?jt:Ut}function jt(){throw new Error("BigInt not supported")}})(buffer$3);const Buffer$O=buffer$3.Buffer,Blob$1=buffer$3.Blob,BlobOptions=buffer$3.BlobOptions,Buffer$1$1=buffer$3.Buffer,File=buffer$3.File,FileOptions=buffer$3.FileOptions,INSPECT_MAX_BYTES=buffer$3.INSPECT_MAX_BYTES,SlowBuffer$1=buffer$3.SlowBuffer,TranscodeEncoding=buffer$3.TranscodeEncoding,atob$1=buffer$3.atob,btoa$1=buffer$3.btoa,constants$1=buffer$3.constants,isAscii=buffer$3.isAscii,isUtf8=buffer$3.isUtf8,kMaxLength=buffer$3.kMaxLength,kStringMaxLength=buffer$3.kStringMaxLength,resolveObjectURL=buffer$3.resolveObjectURL,transcode=buffer$3.transcode,dist$3=Object.freeze(Object.defineProperty({__proto__:null,Blob:Blob$1,BlobOptions,Buffer:Buffer$1$1,File,FileOptions,INSPECT_MAX_BYTES,SlowBuffer:SlowBuffer$1,TranscodeEncoding,atob:atob$1,btoa:btoa$1,constants:constants$1,default:Buffer$O,isAscii,isUtf8,kMaxLength,kStringMaxLength,resolveObjectURL,transcode},Symbol.toStringTag,{value:"Module"}));var base64$2={exports:{}};(function(a,c){(function(b,_){a.exports=_()})(typeof self<"u"?self:typeof window<"u"?window:commonjsGlobal$1,function(){var b="3.7.7",_=b,$=typeof Buffer$O=="function",k=typeof TextDecoder=="function"?new TextDecoder:void 0,et=typeof TextEncoder=="function"?new TextEncoder:void 0,nt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",ot=Array.prototype.slice.call(nt),ht=function(ir){var Wt={};return ir.forEach(function(zt,wt){return Wt[zt]=wt}),Wt}(ot),vt=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,_t=String.fromCharCode.bind(String),kt=typeof Uint8Array.from=="function"?Uint8Array.from.bind(Uint8Array):function(ir){return new Uint8Array(Array.prototype.slice.call(ir,0))},$t=function(ir){return ir.replace(/=/g,"").replace(/[+\/]/g,function(Wt){return Wt=="+"?"-":"_"})},Tt=function(ir){return ir.replace(/[^A-Za-z0-9\+\/]/g,"")},At=function(ir){for(var Wt,zt,wt,Vt,Qt="",Nt=ir.length%3,st=0;st<ir.length;){if((zt=ir.charCodeAt(st++))>255||(wt=ir.charCodeAt(st++))>255||(Vt=ir.charCodeAt(st++))>255)throw new TypeError("invalid character found");Wt=zt<<16|wt<<8|Vt,Qt+=ot[Wt>>18&63]+ot[Wt>>12&63]+ot[Wt>>6&63]+ot[Wt&63]}return Nt?Qt.slice(0,Nt-3)+"===".substring(Nt):Qt},Mt=typeof btoa=="function"?function(ir){return btoa(ir)}:$?function(ir){return Buffer$O.from(ir,"binary").toString("base64")}:At,Dt=$?function(ir){return Buffer$O.from(ir).toString("base64")}:function(ir){for(var Wt=4096,zt=[],wt=0,Vt=ir.length;wt<Vt;wt+=Wt)zt.push(_t.apply(null,ir.subarray(wt,wt+Wt)));return Mt(zt.join(""))},Rt=function(ir,Wt){return Wt===void 0&&(Wt=!1),Wt?$t(Dt(ir)):Dt(ir)},xt=function(ir){if(ir.length<2){var Wt=ir.charCodeAt(0);return Wt<128?ir:Wt<2048?_t(192|Wt>>>6)+_t(128|Wt&63):_t(224|Wt>>>12&15)+_t(128|Wt>>>6&63)+_t(128|Wt&63)}else{var Wt=65536+(ir.charCodeAt(0)-55296)*1024+(ir.charCodeAt(1)-56320);return _t(240|Wt>>>18&7)+_t(128|Wt>>>12&63)+_t(128|Wt>>>6&63)+_t(128|Wt&63)}},Jt=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,ar=function(ir){return ir.replace(Jt,xt)},nr=$?function(ir){return Buffer$O.from(ir,"utf8").toString("base64")}:et?function(ir){return Dt(et.encode(ir))}:function(ir){return Mt(ar(ir))},pr=function(ir,Wt){return Wt===void 0&&(Wt=!1),Wt?$t(nr(ir)):nr(ir)},ur=function(ir){return pr(ir,!0)},Ot=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,It=function(ir){switch(ir.length){case 4:var Wt=(7&ir.charCodeAt(0))<<18|(63&ir.charCodeAt(1))<<12|(63&ir.charCodeAt(2))<<6|63&ir.charCodeAt(3),zt=Wt-65536;return _t((zt>>>10)+55296)+_t((zt&1023)+56320);case 3:return _t((15&ir.charCodeAt(0))<<12|(63&ir.charCodeAt(1))<<6|63&ir.charCodeAt(2));default:return _t((31&ir.charCodeAt(0))<<6|63&ir.charCodeAt(1))}},ut=function(ir){return ir.replace(Ot,It)},_e=function(ir){if(ir=ir.replace(/\s+/g,""),!vt.test(ir))throw new TypeError("malformed base64.");ir+="==".slice(2-(ir.length&3));for(var Wt,zt="",wt,Vt,Qt=0;Qt<ir.length;)Wt=ht[ir.charAt(Qt++)]<<18|ht[ir.charAt(Qt++)]<<12|(wt=ht[ir.charAt(Qt++)])<<6|(Vt=ht[ir.charAt(Qt++)]),zt+=wt===64?_t(Wt>>16&255):Vt===64?_t(Wt>>16&255,Wt>>8&255):_t(Wt>>16&255,Wt>>8&255,Wt&255);return zt},tt=typeof atob=="function"?function(ir){return atob(Tt(ir))}:$?function(ir){return Buffer$O.from(ir,"base64").toString("binary")}:_e,it=$?function(ir){return kt(Buffer$O.from(ir,"base64"))}:function(ir){return kt(tt(ir).split("").map(function(Wt){return Wt.charCodeAt(0)}))},dt=function(ir){return it(gt(ir))},lt=$?function(ir){return Buffer$O.from(ir,"base64").toString("utf8")}:k?function(ir){return k.decode(it(ir))}:function(ir){return ut(tt(ir))},gt=function(ir){return Tt(ir.replace(/[-_]/g,function(Wt){return Wt=="-"?"+":"/"}))},Et=function(ir){return lt(gt(ir))},pt=function(ir){if(typeof ir!="string")return!1;var Wt=ir.replace(/\s+/g,"").replace(/={0,2}$/,"");return!/[^\s0-9a-zA-Z\+/]/.test(Wt)||!/[^\s0-9a-zA-Z\-_]/.test(Wt)},rt=function(ir){return{value:ir,enumerable:!1,writable:!0,configurable:!0}},mt=function(){var ir=function(Wt,zt){return Object.defineProperty(String.prototype,Wt,rt(zt))};ir("fromBase64",function(){return Et(this)}),ir("toBase64",function(Wt){return pr(this,Wt)}),ir("toBase64URI",function(){return pr(this,!0)}),ir("toBase64URL",function(){return pr(this,!0)}),ir("toUint8Array",function(){return dt(this)})},Lt=function(){var ir=function(Wt,zt){return Object.defineProperty(Uint8Array.prototype,Wt,rt(zt))};ir("toBase64",function(Wt){return Rt(this,Wt)}),ir("toBase64URI",function(){return Rt(this,!0)}),ir("toBase64URL",function(){return Rt(this,!0)})},Gt=function(){mt(),Lt()},rr={version:b,VERSION:_,atob:tt,atobPolyfill:_e,btoa:Mt,btoaPolyfill:At,fromBase64:Et,toBase64:pr,encode:pr,encodeURI:ur,encodeURL:ur,utob:ar,btou:ut,decode:Et,isValid:pt,fromUint8Array:Rt,toUint8Array:dt,extendString:mt,extendUint8Array:Lt,extendBuiltins:Gt};return rr.Base64={},Object.keys(rr).forEach(function(ir){return rr.Base64[ir]=rr[ir]}),rr})})(base64$2);var base64Exports=base64$2.exports;Object.defineProperty(fetch$1,"__esModule",{value:!0});fetch$1.FetchTransport=void 0;const abort_controller_x_1$3=require$$1$5,js_base64_1$2=base64Exports,nice_grpc_common_1$6=lib;function FetchTransport(a){return async function*({url:b,body:_,metadata:$,signal:k,method:et}){let nt;if(et.requestStream){let _t;nt=new ReadableStream({type:"bytes",start(){_t=_[Symbol.asyncIterator]()},async pull(kt){const{done:$t,value:Tt}=await _t.next();$t?kt.close():kt.enqueue(Tt)},async cancel(){var kt,$t;await(($t=(kt=_t).return)===null||$t===void 0?void 0:$t.call(kt))}})}else{let _t;for await(const kt of _){_t=kt;break}nt=_t}const ot=await fetch(b,{method:"POST",body:nt,headers:metadataToHeaders($),signal:k,cache:a==null?void 0:a.cache,duplex:"half",credentials:a==null?void 0:a.credentials});if(yield{type:"header",header:headersToMetadata(ot.headers)},!ot.ok){const _t=await ot.text();throw new nice_grpc_common_1$6.ClientError(et.path,getStatusFromHttpCode(ot.status),getErrorDetailsFromHttpResponse(ot.status,_t))}(0,abort_controller_x_1$3.throwIfAborted)(k);const ht=ot.body.getReader(),vt=()=>{ht.cancel().catch(()=>{})};k.addEventListener("abort",vt);try{for(;;){const{done:_t,value:kt}=await ht.read();if(kt!=null&&(yield{type:"data",data:kt}),_t)break}}finally{k.removeEventListener("abort",vt),(0,abort_controller_x_1$3.throwIfAborted)(k)}}}fetch$1.FetchTransport=FetchTransport;function metadataToHeaders(a){const c=new Headers;for(const[b,_]of a)for(const $ of _)c.append(b,typeof $=="string"?$:js_base64_1$2.Base64.fromUint8Array($));return c}function headersToMetadata(a){const c=new nice_grpc_common_1$6.Metadata;for(const[b,_]of a)if(b.endsWith("-bin"))for(const $ of _.split(/,\s?/))c.append(b,js_base64_1$2.Base64.toUint8Array($));else c.set(b,_);return c}function getStatusFromHttpCode(a){switch(a){case 400:return nice_grpc_common_1$6.Status.INTERNAL;case 401:return nice_grpc_common_1$6.Status.UNAUTHENTICATED;case 403:return nice_grpc_common_1$6.Status.PERMISSION_DENIED;case 404:return nice_grpc_common_1$6.Status.UNIMPLEMENTED;case 429:case 502:case 503:case 504:return nice_grpc_common_1$6.Status.UNAVAILABLE;default:return nice_grpc_common_1$6.Status.UNKNOWN}}function getErrorDetailsFromHttpResponse(a,c){return`Received HTTP ${a} response: `+(c.length>1e3?c.slice(0,1e3)+"... (truncated)":c)}Object.defineProperty(channel,"__esModule",{value:!0});channel.createChannel=void 0;const fetch_1=fetch$1;function createChannel(a,c=(0,fetch_1.FetchTransport)()){return{address:a,transport:c}}channel.createChannel=createChannel;var ClientFactory={},createBidiStreamingMethod$1={},isAsyncIterable$1={};Object.defineProperty(isAsyncIterable$1,"__esModule",{value:!0});isAsyncIterable$1.isAsyncIterable=void 0;function isAsyncIterable(a){return a!=null&&Symbol.asyncIterator in a}isAsyncIterable$1.isAsyncIterable=isAsyncIterable;var makeCall$1={},decodeResponse$1={},concatBuffers$1={};Object.defineProperty(concatBuffers$1,"__esModule",{value:!0});concatBuffers$1.concatBuffers=void 0;function concatBuffers(a,c){if(a.length===1)return a[0];const b=new Uint8Array(c);let _=0;for(const $ of a)b.set($,_),_+=$.length;return b}concatBuffers$1.concatBuffers=concatBuffers;var decodeMetadata$1={};Object.defineProperty(decodeMetadata$1,"__esModule",{value:!0});decodeMetadata$1.decodeMetadata=void 0;const nice_grpc_common_1$5=lib,js_base64_1$1=base64Exports;function decodeMetadata(a){const c=(0,nice_grpc_common_1$5.Metadata)(),b=new TextDecoder().decode(a);for(const _ of b.split(`\r
`)){if(!_)continue;const $=_.indexOf(":");if($===-1)throw new Error(`Invalid metadata line: ${_}`);const k=_.slice(0,$).trim().toLowerCase(),et=_.slice($+1).trim();if(k.endsWith("-bin"))for(const nt of et.split(/,\s?/))c.append(k,js_base64_1$1.Base64.toUint8Array(nt));else c.append(k,et)}return c}decodeMetadata$1.decodeMetadata=decodeMetadata;var framing={};(function(a){Object.defineProperty(a,"__esModule",{value:!0}),a.encodeFrame=a.parseLpmHeader=a.LPM_HEADER_LENGTH=void 0,a.LPM_HEADER_LENGTH=5;function c(_){if(_.length!==a.LPM_HEADER_LENGTH)throw new Error(`Invalid LPM header length: ${_.length}`);const $=new DataView(_.buffer,_.byteOffset,_.byteLength),k=($.getUint8(0)&1)!==0,et=($.getUint8(0)&128)!==0,nt=$.getUint32(1);return{compressed:k,isMetadata:et,length:nt}}a.parseLpmHeader=c;function b(_){const $=new Uint8Array(a.LPM_HEADER_LENGTH+_.length);return new DataView($.buffer,1,4).setUint32(0,_.length,!1),$.set(_,a.LPM_HEADER_LENGTH),$}a.encodeFrame=b})(framing);Object.defineProperty(decodeResponse$1,"__esModule",{value:!0});decodeResponse$1.decodeResponse=void 0;const concatBuffers_1=concatBuffers$1,decodeMetadata_1=decodeMetadata$1,framing_1$1=framing;async function*decodeResponse({response:a,decode:c,onHeader:b,onTrailer:_}){let $=!1,k=!1,et=!1,nt=_t(framing_1$1.LPM_HEADER_LENGTH),ot;for await(const kt of a)if(kt.type==="header")ht(kt.header);else if(kt.type==="trailer")vt(kt.trailer);else if(kt.type==="data"){if(k)throw new Error("Received data after trailer");let{data:$t}=kt;for(;$t.length>0||(ot==null?void 0:ot.length)===0;){const Tt=Math.min($t.length,nt.targetLength-nt.totalLength),At=$t.subarray(0,Tt);if($t=$t.subarray(Tt),nt.chunks.push(At),nt.totalLength+=At.length,nt.totalLength===nt.targetLength){const Mt=(0,concatBuffers_1.concatBuffers)(nt.chunks,nt.totalLength);if(ot==null)ot=(0,framing_1$1.parseLpmHeader)(Mt),nt=_t(ot.length);else{if(ot.compressed)throw new Error("Compressed messages not supported");if(ot.isMetadata)$?vt((0,decodeMetadata_1.decodeMetadata)(Mt)):ht((0,decodeMetadata_1.decodeMetadata)(Mt));else{if(!$)throw new Error("Received data before header");yield c(Mt),et=!0}ot=void 0,nt=_t(framing_1$1.LPM_HEADER_LENGTH)}}}}function ht(kt){if($)throw new Error("Received multiple headers");if(et)throw new Error("Received header after data");if(k)throw new Error("Received header after trailer");$=!0,b(kt)}function vt(kt){if(k)throw new Error("Received multiple trailers");k=!0,_(kt)}function _t(kt){return{chunks:[],totalLength:0,targetLength:kt}}}decodeResponse$1.decodeResponse=decodeResponse;var encodeRequest$1={};Object.defineProperty(encodeRequest$1,"__esModule",{value:!0});encodeRequest$1.encodeRequest=void 0;const framing_1=framing;async function*encodeRequest({request:a,encode:c}){for await(const b of a){const _=c(b);yield(0,framing_1.encodeFrame)(_)}}encodeRequest$1.encodeRequest=encodeRequest;var makeInternalErrorMessage$1={};Object.defineProperty(makeInternalErrorMessage$1,"__esModule",{value:!0});makeInternalErrorMessage$1.makeInternalErrorMessage=void 0;function makeInternalErrorMessage(a){return a==null||typeof a!="object"?String(a):typeof a.message=="string"?a.message:JSON.stringify(a)}makeInternalErrorMessage$1.makeInternalErrorMessage=makeInternalErrorMessage;var parseTrailer$1={};Object.defineProperty(parseTrailer$1,"__esModule",{value:!0});parseTrailer$1.parseTrailer=void 0;const nice_grpc_common_1$4=lib;function parseTrailer(a){let c;const b=a.get("grpc-status");if(b!=null){const k=+b;if(k in nice_grpc_common_1$4.Status)c=k;else throw new Error(`Received invalid status code from server: ${b}`)}else throw new Error("Received no status code from server");let _=a.get("grpc-message");if(_!=null)try{_=decodeURIComponent(_)}catch{}const $=(0,nice_grpc_common_1$4.Metadata)(a);return $.delete("grpc-status"),$.delete("grpc-message"),{status:c,message:_,trailer:$}}parseTrailer$1.parseTrailer=parseTrailer;Object.defineProperty(makeCall$1,"__esModule",{value:!0});makeCall$1.makeCall=void 0;const abort_controller_x_1$2=require$$1$5,nice_grpc_common_1$3=lib,decodeResponse_1=decodeResponse$1,encodeRequest_1=encodeRequest$1,makeInternalErrorMessage_1=makeInternalErrorMessage$1,parseTrailer_1=parseTrailer$1;async function*makeCall(a,c,b,_){const{metadata:$,signal:k=new AbortController().signal,onHeader:et,onTrailer:nt}=_;let ot=!1,ht,vt;function _t(Jt){if(ot){if(new Map(Jt).size>0)throw new nice_grpc_common_1$3.ClientError(a.path,nice_grpc_common_1$3.Status.INTERNAL,"Received non-empty trailer after trailers-only response");return}const ar=(0,parseTrailer_1.parseTrailer)(Jt);({status:ht,message:vt}=ar),nt==null||nt(ar.trailer)}const kt=(0,nice_grpc_common_1$3.Metadata)($);kt.set("content-type","application/grpc-web+proto"),kt.set("x-grpc-web","1");const $t=new AbortController,Tt=()=>{$t.abort()};k.addEventListener("abort",Tt);let At=!1,Mt;async function*Dt(){try{for await(const Jt of b){if(At)throw new Error("Request finished");yield Jt}}catch(Jt){throw Mt={err:Jt},$t.abort(),Jt}}async function*Rt(){try{return yield*c.transport({url:c.address+a.path,metadata:kt,body:(0,encodeRequest_1.encodeRequest)({request:Dt(),encode:a.requestSerialize}),signal:$t.signal,method:a})}catch(Jt){throw(0,abort_controller_x_1$2.rethrowAbortError)(Jt),new nice_grpc_common_1$3.ClientError(a.path,nice_grpc_common_1$3.Status.UNKNOWN,`Transport error: ${(0,makeInternalErrorMessage_1.makeInternalErrorMessage)(Jt)}`)}}const xt=(0,decodeResponse_1.decodeResponse)({response:Rt(),decode:a.responseDeserialize,onHeader(Jt){Jt.has("grpc-status")?(_t(Jt),ot=!0):et==null||et(Jt)},onTrailer(Jt){_t(Jt)}});try{yield*xt}catch(Jt){throw Mt!==void 0?Mt.err:Jt instanceof nice_grpc_common_1$3.ClientError||(0,abort_controller_x_1$2.isAbortError)(Jt)?Jt:new nice_grpc_common_1$3.ClientError(a.path,nice_grpc_common_1$3.Status.INTERNAL,(0,makeInternalErrorMessage_1.makeInternalErrorMessage)(Jt))}finally{if(At=!0,k.removeEventListener("abort",Tt),ht!=null&&ht!==nice_grpc_common_1$3.Status.OK)throw new nice_grpc_common_1$3.ClientError(a.path,ht,vt??"")}if(ht==null)throw new nice_grpc_common_1$3.ClientError(a.path,nice_grpc_common_1$3.Status.UNKNOWN,'Response stream closed without gRPC status. This may indicate a misconfigured CORS policy on the server: Access-Control-Expose-Headers must include "grpc-status" and "grpc-message".')}makeCall$1.makeCall=makeCall;Object.defineProperty(createBidiStreamingMethod$1,"__esModule",{value:!0});createBidiStreamingMethod$1.createBidiStreamingMethod=void 0;const isAsyncIterable_1$3=isAsyncIterable$1,makeCall_1$3=makeCall$1;function createBidiStreamingMethod(a,c,b,_){const $={path:a.path,requestStream:a.requestStream,responseStream:a.responseStream,options:a.options};async function*k(nt,ot){if(!(0,isAsyncIterable_1$3.isAsyncIterable)(nt))throw new Error("A middleware passed invalid request to next(): expected a single message for bidirectional streaming method");yield*(0,makeCall_1$3.makeCall)(a,c,nt,ot)}const et=b==null?k:(nt,ot)=>b({method:$,requestStream:!0,request:nt,responseStream:!0,next:k},ot);return(nt,ot)=>{const vt=et(nt,{..._,...ot})[Symbol.asyncIterator]();return{[Symbol.asyncIterator](){return{async next(){const _t=await vt.next();return _t.done&&_t.value!=null?await vt.throw(new Error("A middleware returned a message, but expected to return void for bidirectional streaming method")):_t},return(){return vt.return()},throw(_t){return vt.throw(_t)}}}}}}createBidiStreamingMethod$1.createBidiStreamingMethod=createBidiStreamingMethod;var createClientStreamingMethod$1={};Object.defineProperty(createClientStreamingMethod$1,"__esModule",{value:!0});createClientStreamingMethod$1.createClientStreamingMethod=void 0;const nice_grpc_common_1$2=lib,isAsyncIterable_1$2=isAsyncIterable$1,makeCall_1$2=makeCall$1;function createClientStreamingMethod(a,c,b,_){const $={path:a.path,requestStream:a.requestStream,responseStream:a.responseStream,options:a.options};async function*k(nt,ot){if(!(0,isAsyncIterable_1$2.isAsyncIterable)(nt))throw Error("A middleware passed invalid request to next(): expected a single message for client streaming method");const ht=(0,makeCall_1$2.makeCall)(a,c,nt,ot);let vt;for await(const _t of ht){if(vt!=null)throw new nice_grpc_common_1$2.ClientError(a.path,nice_grpc_common_1$2.Status.INTERNAL,"Received more than one message from server for client streaming method");vt=_t}if(vt==null)throw new nice_grpc_common_1$2.ClientError(a.path,nice_grpc_common_1$2.Status.INTERNAL,"Server did not return a response");return vt}const et=b==null?k:(nt,ot)=>b({method:$,requestStream:!0,request:nt,responseStream:!1,next:k},ot);return async(nt,ot)=>{const vt=et(nt,{..._,...ot})[Symbol.asyncIterator]();let _t=await vt.next();for(;;){if(!_t.done){_t=await vt.throw(new Error("A middleware yielded a message, but expected to only return a message for client streaming method"));continue}if(_t.value==null){_t=await vt.throw(new Error("A middleware returned void, but expected to return a message for client streaming method"));continue}return _t.value}}}createClientStreamingMethod$1.createClientStreamingMethod=createClientStreamingMethod;var createServerStreamingMethod$1={},asyncIterableOf$1={};Object.defineProperty(asyncIterableOf$1,"__esModule",{value:!0});asyncIterableOf$1.asyncIterableOf=void 0;async function*asyncIterableOf(a){yield a}asyncIterableOf$1.asyncIterableOf=asyncIterableOf;Object.defineProperty(createServerStreamingMethod$1,"__esModule",{value:!0});createServerStreamingMethod$1.createServerStreamingMethod=void 0;const asyncIterableOf_1$1=asyncIterableOf$1,isAsyncIterable_1$1=isAsyncIterable$1,makeCall_1$1=makeCall$1;function createServerStreamingMethod(a,c,b,_){const $={path:a.path,requestStream:a.requestStream,responseStream:a.responseStream,options:a.options};async function*k(nt,ot){if((0,isAsyncIterable_1$1.isAsyncIterable)(nt))throw new Error("A middleware passed invalid request to next(): expected a single message for server streaming method");yield*(0,makeCall_1$1.makeCall)(a,c,(0,asyncIterableOf_1$1.asyncIterableOf)(nt),ot)}const et=b==null?k:(nt,ot)=>b({method:$,requestStream:!1,request:nt,responseStream:!0,next:k},ot);return(nt,ot)=>{const vt=et(nt,{..._,...ot})[Symbol.asyncIterator]();return{[Symbol.asyncIterator](){return{async next(){const _t=await vt.next();return _t.done&&_t.value!=null?await vt.throw(new Error("A middleware returned a message, but expected to return void for server streaming method")):_t},return(){return vt.return()},throw(_t){return vt.throw(_t)}}}}}}createServerStreamingMethod$1.createServerStreamingMethod=createServerStreamingMethod;var createUnaryMethod$1={};Object.defineProperty(createUnaryMethod$1,"__esModule",{value:!0});createUnaryMethod$1.createUnaryMethod=void 0;const nice_grpc_common_1$1=lib,asyncIterableOf_1=asyncIterableOf$1,isAsyncIterable_1=isAsyncIterable$1,makeCall_1=makeCall$1;function createUnaryMethod(a,c,b,_){const $={path:a.path,requestStream:a.requestStream,responseStream:a.responseStream,options:a.options};async function*k(nt,ot){if((0,isAsyncIterable_1.isAsyncIterable)(nt))throw new Error("A middleware passed invalid request to next(): expected a single message for unary method");const ht=(0,makeCall_1.makeCall)(a,c,(0,asyncIterableOf_1.asyncIterableOf)(nt),ot);let vt;for await(const _t of ht){if(vt!=null)throw new nice_grpc_common_1$1.ClientError(a.path,nice_grpc_common_1$1.Status.INTERNAL,"Received more than one message from server for unary method");vt=_t}if(vt==null)throw new nice_grpc_common_1$1.ClientError(a.path,nice_grpc_common_1$1.Status.INTERNAL,"Server did not return a response");return vt}const et=b==null?k:(nt,ot)=>b({method:$,requestStream:!1,request:nt,responseStream:!1,next:k},ot);return async(nt,ot)=>{const vt=et(nt,{..._,...ot})[Symbol.asyncIterator]();let _t=await vt.next();for(;;){if(!_t.done){_t=await vt.throw(new Error("A middleware yielded a message, but expected to only return a message for unary method"));continue}if(_t.value==null){_t=await vt.throw(new Error("A middleware returned void, but expected to return a message for unary method"));continue}return _t.value}}}createUnaryMethod$1.createUnaryMethod=createUnaryMethod;Object.defineProperty(ClientFactory,"__esModule",{value:!0});ClientFactory.createClient=ClientFactory.createClientFactory=void 0;const nice_grpc_common_1=lib,service_definitions_1=serviceDefinitions,createBidiStreamingMethod_1=createBidiStreamingMethod$1,createClientStreamingMethod_1=createClientStreamingMethod$1,createServerStreamingMethod_1=createServerStreamingMethod$1,createUnaryMethod_1=createUnaryMethod$1;function createClientFactory(){return createClientFactoryWithMiddleware()}ClientFactory.createClientFactory=createClientFactory;function createClient(a,c,b){return createClientFactory().create(a,c,b)}ClientFactory.createClient=createClient;function createClientFactoryWithMiddleware(a){return{use(c){return createClientFactoryWithMiddleware(a==null?c:(0,nice_grpc_common_1.composeClientMiddleware)(a,c))},create(c,b,_={}){const $={},k=Object.entries((0,service_definitions_1.normalizeServiceDefinition)(c));for(const[et,nt]of k){const ot={..._["*"],..._[et]};nt.requestStream?nt.responseStream?$[et]=(0,createBidiStreamingMethod_1.createBidiStreamingMethod)(nt,b,a,ot):$[et]=(0,createClientStreamingMethod_1.createClientStreamingMethod)(nt,b,a,ot):nt.responseStream?$[et]=(0,createServerStreamingMethod_1.createServerStreamingMethod)(nt,b,a,ot):$[et]=(0,createUnaryMethod_1.createUnaryMethod)(nt,b,a,ot)}return $}}}var Client={};Object.defineProperty(Client,"__esModule",{value:!0});var websocket={};const global$1=globalThis||void 0||self;var ws$1=null;typeof WebSocket<"u"?ws$1=WebSocket:typeof MozWebSocket<"u"?ws$1=MozWebSocket:typeof global$1<"u"?ws$1=global$1.WebSocket||global$1.MozWebSocket:typeof window<"u"?ws$1=window.WebSocket||window.MozWebSocket:typeof self<"u"&&(ws$1=self.WebSocket||self.MozWebSocket);const ws$2=ws$1,browser$g=Object.freeze(Object.defineProperty({__proto__:null,default:ws$2},Symbol.toStringTag,{value:"Module"})),require$$1$4=getAugmentedNamespace(browser$g);var AsyncSink$1={};Object.defineProperty(AsyncSink$1,"__esModule",{value:!0});AsyncSink$1.AsyncSink=void 0;const ARRAY_VALUE="value",ARRAY_ERROR="error";class AsyncSink{constructor(){this._ended=!1,this._values=[],this._resolvers=[]}[Symbol.asyncIterator](){return this}write(c){this._push({type:ARRAY_VALUE,value:c})}error(c){this._push({type:ARRAY_ERROR,error:c})}_push(c){if(!this._ended)if(this._resolvers.length>0){const{resolve:b,reject:_}=this._resolvers.shift();c.type===ARRAY_ERROR?_(c.error):b({done:!1,value:c.value})}else this._values.push(c)}next(){if(this._values.length>0){const{type:c,value:b,error:_}=this._values.shift();return c===ARRAY_ERROR?Promise.reject(_):Promise.resolve({done:!1,value:b})}return this._ended?Promise.resolve({done:!0}):new Promise((c,b)=>{this._resolvers.push({resolve:c,reject:b})})}end(){for(;this._resolvers.length>0;)this._resolvers.shift().resolve({done:!0});this._ended=!0}}AsyncSink$1.AsyncSink=AsyncSink;var __importDefault$e=commonjsGlobal$1&&commonjsGlobal$1.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(websocket,"__esModule",{value:!0});websocket.WebsocketTransport=void 0;const abort_controller_x_1$1=require$$1$5,isomorphic_ws_1$1=__importDefault$e(require$$1$4),js_base64_1=base64Exports,AsyncSink_1=AsyncSink$1;function WebsocketTransport(){return async function*({url:a,body:c,metadata:b,signal:_}){if(_.aborted)throw new abort_controller_x_1$1.AbortError;const $=new AsyncSink_1.AsyncSink;_.addEventListener("abort",()=>{$.error(new abort_controller_x_1$1.AbortError)});const k=new URL(a);k.protocol=k.protocol.replace("http","ws");const et=new isomorphic_ws_1$1.default(k,["grpc-websockets"]);et.binaryType="arraybuffer",et.addEventListener("message",ot=>{ot.data instanceof ArrayBuffer?$.write({type:"data",data:new Uint8Array(ot.data)}):$.error(new Error(`Unexpected message type: ${typeof ot.data}`))}),et.addEventListener("close",ot=>{ot.wasClean?$.end():$.error(new Error(`WebSocket closed with code ${ot.code}`+(ot.reason&&`: ${ot.reason}`)))});const nt=new AbortController;pipeBody(nt.signal,b,c,et).catch(ot=>{(0,abort_controller_x_1$1.isAbortError)(ot)||$.error(ot)});try{return yield*$}finally{nt.abort(),et.close()}}}websocket.WebsocketTransport=WebsocketTransport;async function pipeBody(a,c,b,_){_.readyState==isomorphic_ws_1$1.default.CONNECTING&&await(0,abort_controller_x_1$1.waitForEvent)(a,_,"open"),_.send(encodeMetadata(c));for await(const $ of b){(0,abort_controller_x_1$1.throwIfAborted)(a);const k=new Uint8Array($.length+1);k.set([0],0),k.set($,1),_.send(k)}_.send(new Uint8Array([1]))}function encodeMetadata(a){let c="";for(const[b,_]of a)for(const $ of _){const k=typeof $=="string"?$:js_base64_1.Base64.fromUint8Array($),et=`${b}: ${k}\r
`;for(let nt=0;nt<et.length;nt++){const ot=et.charCodeAt(nt);if(!isValidCharCode(ot))throw new Error(`Metadata contains invalid characters: '${et}'`)}c+=et}return new TextEncoder().encode(c)}function isValidCharCode(a){return a===9||a===10||a===13||a>=32&&a<=126}var browser$f={};Object.defineProperty(browser$f,"__esModule",{value:!0});browser$f.NodeHttpTransport=void 0;function NodeHttpTransport(){throw new Error("NodeHttpTransport is not supported in the browser")}browser$f.NodeHttpTransport=NodeHttpTransport;(function(a){var c=commonjsGlobal$1&&commonjsGlobal$1.__createBinding||(Object.create?function(nt,ot,ht,vt){vt===void 0&&(vt=ht);var _t=Object.getOwnPropertyDescriptor(ot,ht);(!_t||("get"in _t?!ot.__esModule:_t.writable||_t.configurable))&&(_t={enumerable:!0,get:function(){return ot[ht]}}),Object.defineProperty(nt,vt,_t)}:function(nt,ot,ht,vt){vt===void 0&&(vt=ht),nt[vt]=ot[ht]}),b=commonjsGlobal$1&&commonjsGlobal$1.__exportStar||function(nt,ot){for(var ht in nt)ht!=="default"&&!Object.prototype.hasOwnProperty.call(ot,ht)&&c(ot,nt,ht)};Object.defineProperty(a,"__esModule",{value:!0}),a.NodeHttpTransport=a.WebsocketTransport=a.FetchTransport=a.Status=a.Metadata=a.composeClientMiddleware=a.ClientError=void 0;var _=lib;Object.defineProperty(a,"ClientError",{enumerable:!0,get:function(){return _.ClientError}}),Object.defineProperty(a,"composeClientMiddleware",{enumerable:!0,get:function(){return _.composeClientMiddleware}}),Object.defineProperty(a,"Metadata",{enumerable:!0,get:function(){return _.Metadata}}),Object.defineProperty(a,"Status",{enumerable:!0,get:function(){return _.Status}}),b(serviceDefinitions,a),b(channel,a),b(ClientFactory,a),b(Client,a);var $=fetch$1;Object.defineProperty(a,"FetchTransport",{enumerable:!0,get:function(){return $.FetchTransport}});var k=websocket;Object.defineProperty(a,"WebsocketTransport",{enumerable:!0,get:function(){return k.WebsocketTransport}});var et=browser$f;Object.defineProperty(a,"NodeHttpTransport",{enumerable:!0,get:function(){return et.NodeHttpTransport}})})(lib$1);var dist$2={},api$4={},umd={exports:{}};(function(a,c){var b=function(_){Object.defineProperty(_,"__esModule",{value:!0}),_.default=void 0;/**
 * @license
 * Copyright 2009 The Closure Library Authors
 * Copyright 2020 Daniel Wirtz / The long.js Authors.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * SPDX-License-Identifier: Apache-2.0
 */var $=null;try{$=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function k(lt,gt,Et){this.low=lt|0,this.high=gt|0,this.unsigned=!!Et}k.prototype.__isLong__,Object.defineProperty(k.prototype,"__isLong__",{value:!0});function et(lt){return(lt&&lt.__isLong__)===!0}function nt(lt){var gt=Math.clz32(lt&-lt);return lt?31-gt:gt}k.isLong=et;var ot={},ht={};function vt(lt,gt){var Et,pt,rt;return gt?(lt>>>=0,(rt=0<=lt&&lt<256)&&(pt=ht[lt],pt)?pt:(Et=kt(lt,0,!0),rt&&(ht[lt]=Et),Et)):(lt|=0,(rt=-128<=lt&&lt<128)&&(pt=ot[lt],pt)?pt:(Et=kt(lt,lt<0?-1:0,!1),rt&&(ot[lt]=Et),Et))}k.fromInt=vt;function _t(lt,gt){if(isNaN(lt))return gt?pr:nr;if(gt){if(lt<0)return pr;if(lt>=xt)return _e}else{if(lt<=-Jt)return tt;if(lt+1>=Jt)return ut}return lt<0?_t(-lt,gt).neg():kt(lt%Rt|0,lt/Rt|0,gt)}k.fromNumber=_t;function kt(lt,gt,Et){return new k(lt,gt,Et)}k.fromBits=kt;var $t=Math.pow;function Tt(lt,gt,Et){if(lt.length===0)throw Error("empty string");if(typeof gt=="number"?(Et=gt,gt=!1):gt=!!gt,lt==="NaN"||lt==="Infinity"||lt==="+Infinity"||lt==="-Infinity")return gt?pr:nr;if(Et=Et||10,Et<2||36<Et)throw RangeError("radix");var pt;if((pt=lt.indexOf("-"))>0)throw Error("interior hyphen");if(pt===0)return Tt(lt.substring(1),gt,Et).neg();for(var rt=_t($t(Et,8)),mt=nr,Lt=0;Lt<lt.length;Lt+=8){var Gt=Math.min(8,lt.length-Lt),rr=parseInt(lt.substring(Lt,Lt+Gt),Et);if(Gt<8){var ir=_t($t(Et,Gt));mt=mt.mul(ir).add(_t(rr))}else mt=mt.mul(rt),mt=mt.add(_t(rr))}return mt.unsigned=gt,mt}k.fromString=Tt;function At(lt,gt){return typeof lt=="number"?_t(lt,gt):typeof lt=="string"?Tt(lt,gt):kt(lt.low,lt.high,typeof gt=="boolean"?gt:lt.unsigned)}k.fromValue=At;var Mt=65536,Dt=1<<24,Rt=Mt*Mt,xt=Rt*Rt,Jt=xt/2,ar=vt(Dt),nr=vt(0);k.ZERO=nr;var pr=vt(0,!0);k.UZERO=pr;var ur=vt(1);k.ONE=ur;var Ot=vt(1,!0);k.UONE=Ot;var It=vt(-1);k.NEG_ONE=It;var ut=kt(-1,2147483647,!1);k.MAX_VALUE=ut;var _e=kt(-1,-1,!0);k.MAX_UNSIGNED_VALUE=_e;var tt=kt(0,-2147483648,!1);k.MIN_VALUE=tt;var it=k.prototype;it.toInt=function(){return this.unsigned?this.low>>>0:this.low},it.toNumber=function(){return this.unsigned?(this.high>>>0)*Rt+(this.low>>>0):this.high*Rt+(this.low>>>0)},it.toString=function(gt){if(gt=gt||10,gt<2||36<gt)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(tt)){var Et=_t(gt),pt=this.div(Et),rt=pt.mul(Et).sub(this);return pt.toString(gt)+rt.toInt().toString(gt)}else return"-"+this.neg().toString(gt);for(var mt=_t($t(gt,6),this.unsigned),Lt=this,Gt="";;){var rr=Lt.div(mt),ir=Lt.sub(rr.mul(mt)).toInt()>>>0,Wt=ir.toString(gt);if(Lt=rr,Lt.isZero())return Wt+Gt;for(;Wt.length<6;)Wt="0"+Wt;Gt=""+Wt+Gt}},it.getHighBits=function(){return this.high},it.getHighBitsUnsigned=function(){return this.high>>>0},it.getLowBits=function(){return this.low},it.getLowBitsUnsigned=function(){return this.low>>>0},it.getNumBitsAbs=function(){if(this.isNegative())return this.eq(tt)?64:this.neg().getNumBitsAbs();for(var gt=this.high!=0?this.high:this.low,Et=31;Et>0&&!(gt&1<<Et);Et--);return this.high!=0?Et+33:Et+1},it.isZero=function(){return this.high===0&&this.low===0},it.eqz=it.isZero,it.isNegative=function(){return!this.unsigned&&this.high<0},it.isPositive=function(){return this.unsigned||this.high>=0},it.isOdd=function(){return(this.low&1)===1},it.isEven=function(){return(this.low&1)===0},it.equals=function(gt){return et(gt)||(gt=At(gt)),this.unsigned!==gt.unsigned&&this.high>>>31===1&&gt.high>>>31===1?!1:this.high===gt.high&&this.low===gt.low},it.eq=it.equals,it.notEquals=function(gt){return!this.eq(gt)},it.neq=it.notEquals,it.ne=it.notEquals,it.lessThan=function(gt){return this.comp(gt)<0},it.lt=it.lessThan,it.lessThanOrEqual=function(gt){return this.comp(gt)<=0},it.lte=it.lessThanOrEqual,it.le=it.lessThanOrEqual,it.greaterThan=function(gt){return this.comp(gt)>0},it.gt=it.greaterThan,it.greaterThanOrEqual=function(gt){return this.comp(gt)>=0},it.gte=it.greaterThanOrEqual,it.ge=it.greaterThanOrEqual,it.compare=function(gt){if(et(gt)||(gt=At(gt)),this.eq(gt))return 0;var Et=this.isNegative(),pt=gt.isNegative();return Et&&!pt?-1:!Et&&pt?1:this.unsigned?gt.high>>>0>this.high>>>0||gt.high===this.high&&gt.low>>>0>this.low>>>0?-1:1:this.sub(gt).isNegative()?-1:1},it.comp=it.compare,it.negate=function(){return!this.unsigned&&this.eq(tt)?tt:this.not().add(ur)},it.neg=it.negate,it.add=function(gt){et(gt)||(gt=At(gt));var Et=this.high>>>16,pt=this.high&65535,rt=this.low>>>16,mt=this.low&65535,Lt=gt.high>>>16,Gt=gt.high&65535,rr=gt.low>>>16,ir=gt.low&65535,Wt=0,zt=0,wt=0,Vt=0;return Vt+=mt+ir,wt+=Vt>>>16,Vt&=65535,wt+=rt+rr,zt+=wt>>>16,wt&=65535,zt+=pt+Gt,Wt+=zt>>>16,zt&=65535,Wt+=Et+Lt,Wt&=65535,kt(wt<<16|Vt,Wt<<16|zt,this.unsigned)},it.subtract=function(gt){return et(gt)||(gt=At(gt)),this.add(gt.neg())},it.sub=it.subtract,it.multiply=function(gt){if(this.isZero())return this;if(et(gt)||(gt=At(gt)),$){var Et=$.mul(this.low,this.high,gt.low,gt.high);return kt(Et,$.get_high(),this.unsigned)}if(gt.isZero())return this.unsigned?pr:nr;if(this.eq(tt))return gt.isOdd()?tt:nr;if(gt.eq(tt))return this.isOdd()?tt:nr;if(this.isNegative())return gt.isNegative()?this.neg().mul(gt.neg()):this.neg().mul(gt).neg();if(gt.isNegative())return this.mul(gt.neg()).neg();if(this.lt(ar)&&gt.lt(ar))return _t(this.toNumber()*gt.toNumber(),this.unsigned);var pt=this.high>>>16,rt=this.high&65535,mt=this.low>>>16,Lt=this.low&65535,Gt=gt.high>>>16,rr=gt.high&65535,ir=gt.low>>>16,Wt=gt.low&65535,zt=0,wt=0,Vt=0,Qt=0;return Qt+=Lt*Wt,Vt+=Qt>>>16,Qt&=65535,Vt+=mt*Wt,wt+=Vt>>>16,Vt&=65535,Vt+=Lt*ir,wt+=Vt>>>16,Vt&=65535,wt+=rt*Wt,zt+=wt>>>16,wt&=65535,wt+=mt*ir,zt+=wt>>>16,wt&=65535,wt+=Lt*rr,zt+=wt>>>16,wt&=65535,zt+=pt*Wt+rt*ir+mt*rr+Lt*Gt,zt&=65535,kt(Vt<<16|Qt,zt<<16|wt,this.unsigned)},it.mul=it.multiply,it.divide=function(gt){if(et(gt)||(gt=At(gt)),gt.isZero())throw Error("division by zero");if($){if(!this.unsigned&&this.high===-2147483648&&gt.low===-1&&gt.high===-1)return this;var Et=(this.unsigned?$.div_u:$.div_s)(this.low,this.high,gt.low,gt.high);return kt(Et,$.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?pr:nr;var pt,rt,mt;if(this.unsigned){if(gt.unsigned||(gt=gt.toUnsigned()),gt.gt(this))return pr;if(gt.gt(this.shru(1)))return Ot;mt=pr}else{if(this.eq(tt)){if(gt.eq(ur)||gt.eq(It))return tt;if(gt.eq(tt))return ur;var Lt=this.shr(1);return pt=Lt.div(gt).shl(1),pt.eq(nr)?gt.isNegative()?ur:It:(rt=this.sub(gt.mul(pt)),mt=pt.add(rt.div(gt)),mt)}else if(gt.eq(tt))return this.unsigned?pr:nr;if(this.isNegative())return gt.isNegative()?this.neg().div(gt.neg()):this.neg().div(gt).neg();if(gt.isNegative())return this.div(gt.neg()).neg();mt=nr}for(rt=this;rt.gte(gt);){pt=Math.max(1,Math.floor(rt.toNumber()/gt.toNumber()));for(var Gt=Math.ceil(Math.log(pt)/Math.LN2),rr=Gt<=48?1:$t(2,Gt-48),ir=_t(pt),Wt=ir.mul(gt);Wt.isNegative()||Wt.gt(rt);)pt-=rr,ir=_t(pt,this.unsigned),Wt=ir.mul(gt);ir.isZero()&&(ir=ur),mt=mt.add(ir),rt=rt.sub(Wt)}return mt},it.div=it.divide,it.modulo=function(gt){if(et(gt)||(gt=At(gt)),$){var Et=(this.unsigned?$.rem_u:$.rem_s)(this.low,this.high,gt.low,gt.high);return kt(Et,$.get_high(),this.unsigned)}return this.sub(this.div(gt).mul(gt))},it.mod=it.modulo,it.rem=it.modulo,it.not=function(){return kt(~this.low,~this.high,this.unsigned)},it.countLeadingZeros=function(){return this.high?Math.clz32(this.high):Math.clz32(this.low)+32},it.clz=it.countLeadingZeros,it.countTrailingZeros=function(){return this.low?nt(this.low):nt(this.high)+32},it.ctz=it.countTrailingZeros,it.and=function(gt){return et(gt)||(gt=At(gt)),kt(this.low&gt.low,this.high&gt.high,this.unsigned)},it.or=function(gt){return et(gt)||(gt=At(gt)),kt(this.low|gt.low,this.high|gt.high,this.unsigned)},it.xor=function(gt){return et(gt)||(gt=At(gt)),kt(this.low^gt.low,this.high^gt.high,this.unsigned)},it.shiftLeft=function(gt){return et(gt)&&(gt=gt.toInt()),(gt&=63)===0?this:gt<32?kt(this.low<<gt,this.high<<gt|this.low>>>32-gt,this.unsigned):kt(0,this.low<<gt-32,this.unsigned)},it.shl=it.shiftLeft,it.shiftRight=function(gt){return et(gt)&&(gt=gt.toInt()),(gt&=63)===0?this:gt<32?kt(this.low>>>gt|this.high<<32-gt,this.high>>gt,this.unsigned):kt(this.high>>gt-32,this.high>=0?0:-1,this.unsigned)},it.shr=it.shiftRight,it.shiftRightUnsigned=function(gt){return et(gt)&&(gt=gt.toInt()),(gt&=63)===0?this:gt<32?kt(this.low>>>gt|this.high<<32-gt,this.high>>>gt,this.unsigned):gt===32?kt(this.high,0,this.unsigned):kt(this.high>>>gt-32,0,this.unsigned)},it.shru=it.shiftRightUnsigned,it.shr_u=it.shiftRightUnsigned,it.rotateLeft=function(gt){var Et;return et(gt)&&(gt=gt.toInt()),(gt&=63)===0?this:gt===32?kt(this.high,this.low,this.unsigned):gt<32?(Et=32-gt,kt(this.low<<gt|this.high>>>Et,this.high<<gt|this.low>>>Et,this.unsigned)):(gt-=32,Et=32-gt,kt(this.high<<gt|this.low>>>Et,this.low<<gt|this.high>>>Et,this.unsigned))},it.rotl=it.rotateLeft,it.rotateRight=function(gt){var Et;return et(gt)&&(gt=gt.toInt()),(gt&=63)===0?this:gt===32?kt(this.high,this.low,this.unsigned):gt<32?(Et=32-gt,kt(this.high<<Et|this.low>>>gt,this.low<<Et|this.high>>>gt,this.unsigned)):(gt-=32,Et=32-gt,kt(this.low<<Et|this.high>>>gt,this.high<<Et|this.low>>>gt,this.unsigned))},it.rotr=it.rotateRight,it.toSigned=function(){return this.unsigned?kt(this.low,this.high,!1):this},it.toUnsigned=function(){return this.unsigned?this:kt(this.low,this.high,!0)},it.toBytes=function(gt){return gt?this.toBytesLE():this.toBytesBE()},it.toBytesLE=function(){var gt=this.high,Et=this.low;return[Et&255,Et>>>8&255,Et>>>16&255,Et>>>24,gt&255,gt>>>8&255,gt>>>16&255,gt>>>24]},it.toBytesBE=function(){var gt=this.high,Et=this.low;return[gt>>>24,gt>>>16&255,gt>>>8&255,gt&255,Et>>>24,Et>>>16&255,Et>>>8&255,Et&255]},k.fromBytes=function(gt,Et,pt){return pt?k.fromBytesLE(gt,Et):k.fromBytesBE(gt,Et)},k.fromBytesLE=function(gt,Et){return new k(gt[0]|gt[1]<<8|gt[2]<<16|gt[3]<<24,gt[4]|gt[5]<<8|gt[6]<<16|gt[7]<<24,Et)},k.fromBytesBE=function(gt,Et){return new k(gt[4]<<24|gt[5]<<16|gt[6]<<8|gt[7],gt[0]<<24|gt[1]<<16|gt[2]<<8|gt[3],Et)};var dt=k;return _.default=dt,"default"in _?_.default:_}({});a.exports=b})(umd);var umdExports=umd.exports,indexMinimal={},minimal$1={},aspromise=asPromise;function asPromise(a,c){for(var b=new Array(arguments.length-1),_=0,$=2,k=!0;$<arguments.length;)b[_++]=arguments[$++];return new Promise(function(nt,ot){b[_]=function(vt){if(k)if(k=!1,vt)ot(vt);else{for(var _t=new Array(arguments.length-1),kt=0;kt<_t.length;)_t[kt++]=arguments[kt];nt.apply(null,_t)}};try{a.apply(c||null,b)}catch(ht){k&&(k=!1,ot(ht))}})}var base64$1={};(function(a){var c=a;c.length=function(nt){var ot=nt.length;if(!ot)return 0;for(var ht=0;--ot%4>1&&nt.charAt(ot)==="=";)++ht;return Math.ceil(nt.length*3)/4-ht};for(var b=new Array(64),_=new Array(123),$=0;$<64;)_[b[$]=$<26?$+65:$<52?$+71:$<62?$-4:$-59|43]=$++;c.encode=function(nt,ot,ht){for(var vt=null,_t=[],kt=0,$t=0,Tt;ot<ht;){var At=nt[ot++];switch($t){case 0:_t[kt++]=b[At>>2],Tt=(At&3)<<4,$t=1;break;case 1:_t[kt++]=b[Tt|At>>4],Tt=(At&15)<<2,$t=2;break;case 2:_t[kt++]=b[Tt|At>>6],_t[kt++]=b[At&63],$t=0;break}kt>8191&&((vt||(vt=[])).push(String.fromCharCode.apply(String,_t)),kt=0)}return $t&&(_t[kt++]=b[Tt],_t[kt++]=61,$t===1&&(_t[kt++]=61)),vt?(kt&&vt.push(String.fromCharCode.apply(String,_t.slice(0,kt))),vt.join("")):String.fromCharCode.apply(String,_t.slice(0,kt))};var k="invalid encoding";c.decode=function(nt,ot,ht){for(var vt=ht,_t=0,kt,$t=0;$t<nt.length;){var Tt=nt.charCodeAt($t++);if(Tt===61&&_t>1)break;if((Tt=_[Tt])===void 0)throw Error(k);switch(_t){case 0:kt=Tt,_t=1;break;case 1:ot[ht++]=kt<<2|(Tt&48)>>4,kt=Tt,_t=2;break;case 2:ot[ht++]=(kt&15)<<4|(Tt&60)>>2,kt=Tt,_t=3;break;case 3:ot[ht++]=(kt&3)<<6|Tt,_t=0;break}}if(_t===1)throw Error(k);return ht-vt},c.test=function(nt){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(nt)}})(base64$1);var eventemitter=EventEmitter$2;function EventEmitter$2(){this._listeners={}}EventEmitter$2.prototype.on=function(c,b,_){return(this._listeners[c]||(this._listeners[c]=[])).push({fn:b,ctx:_||this}),this};EventEmitter$2.prototype.off=function(c,b){if(c===void 0)this._listeners={};else if(b===void 0)this._listeners[c]=[];else for(var _=this._listeners[c],$=0;$<_.length;)_[$].fn===b?_.splice($,1):++$;return this};EventEmitter$2.prototype.emit=function(c){var b=this._listeners[c];if(b){for(var _=[],$=1;$<arguments.length;)_.push(arguments[$++]);for($=0;$<b.length;)b[$].fn.apply(b[$++].ctx,_)}return this};var float=factory(factory);function factory(a){return typeof Float32Array<"u"?function(){var c=new Float32Array([-0]),b=new Uint8Array(c.buffer),_=b[3]===128;function $(ot,ht,vt){c[0]=ot,ht[vt]=b[0],ht[vt+1]=b[1],ht[vt+2]=b[2],ht[vt+3]=b[3]}function k(ot,ht,vt){c[0]=ot,ht[vt]=b[3],ht[vt+1]=b[2],ht[vt+2]=b[1],ht[vt+3]=b[0]}a.writeFloatLE=_?$:k,a.writeFloatBE=_?k:$;function et(ot,ht){return b[0]=ot[ht],b[1]=ot[ht+1],b[2]=ot[ht+2],b[3]=ot[ht+3],c[0]}function nt(ot,ht){return b[3]=ot[ht],b[2]=ot[ht+1],b[1]=ot[ht+2],b[0]=ot[ht+3],c[0]}a.readFloatLE=_?et:nt,a.readFloatBE=_?nt:et}():function(){function c(_,$,k,et){var nt=$<0?1:0;if(nt&&($=-$),$===0)_(1/$>0?0:2147483648,k,et);else if(isNaN($))_(2143289344,k,et);else if($>34028234663852886e22)_((nt<<31|2139095040)>>>0,k,et);else if($<11754943508222875e-54)_((nt<<31|Math.round($/1401298464324817e-60))>>>0,k,et);else{var ot=Math.floor(Math.log($)/Math.LN2),ht=Math.round($*Math.pow(2,-ot)*8388608)&8388607;_((nt<<31|ot+127<<23|ht)>>>0,k,et)}}a.writeFloatLE=c.bind(null,writeUintLE),a.writeFloatBE=c.bind(null,writeUintBE);function b(_,$,k){var et=_($,k),nt=(et>>31)*2+1,ot=et>>>23&255,ht=et&8388607;return ot===255?ht?NaN:nt*(1/0):ot===0?nt*1401298464324817e-60*ht:nt*Math.pow(2,ot-150)*(ht+8388608)}a.readFloatLE=b.bind(null,readUintLE),a.readFloatBE=b.bind(null,readUintBE)}(),typeof Float64Array<"u"?function(){var c=new Float64Array([-0]),b=new Uint8Array(c.buffer),_=b[7]===128;function $(ot,ht,vt){c[0]=ot,ht[vt]=b[0],ht[vt+1]=b[1],ht[vt+2]=b[2],ht[vt+3]=b[3],ht[vt+4]=b[4],ht[vt+5]=b[5],ht[vt+6]=b[6],ht[vt+7]=b[7]}function k(ot,ht,vt){c[0]=ot,ht[vt]=b[7],ht[vt+1]=b[6],ht[vt+2]=b[5],ht[vt+3]=b[4],ht[vt+4]=b[3],ht[vt+5]=b[2],ht[vt+6]=b[1],ht[vt+7]=b[0]}a.writeDoubleLE=_?$:k,a.writeDoubleBE=_?k:$;function et(ot,ht){return b[0]=ot[ht],b[1]=ot[ht+1],b[2]=ot[ht+2],b[3]=ot[ht+3],b[4]=ot[ht+4],b[5]=ot[ht+5],b[6]=ot[ht+6],b[7]=ot[ht+7],c[0]}function nt(ot,ht){return b[7]=ot[ht],b[6]=ot[ht+1],b[5]=ot[ht+2],b[4]=ot[ht+3],b[3]=ot[ht+4],b[2]=ot[ht+5],b[1]=ot[ht+6],b[0]=ot[ht+7],c[0]}a.readDoubleLE=_?et:nt,a.readDoubleBE=_?nt:et}():function(){function c(_,$,k,et,nt,ot){var ht=et<0?1:0;if(ht&&(et=-et),et===0)_(0,nt,ot+$),_(1/et>0?0:2147483648,nt,ot+k);else if(isNaN(et))_(0,nt,ot+$),_(2146959360,nt,ot+k);else if(et>17976931348623157e292)_(0,nt,ot+$),_((ht<<31|2146435072)>>>0,nt,ot+k);else{var vt;if(et<22250738585072014e-324)vt=et/5e-324,_(vt>>>0,nt,ot+$),_((ht<<31|vt/4294967296)>>>0,nt,ot+k);else{var _t=Math.floor(Math.log(et)/Math.LN2);_t===1024&&(_t=1023),vt=et*Math.pow(2,-_t),_(vt*4503599627370496>>>0,nt,ot+$),_((ht<<31|_t+1023<<20|vt*1048576&1048575)>>>0,nt,ot+k)}}}a.writeDoubleLE=c.bind(null,writeUintLE,0,4),a.writeDoubleBE=c.bind(null,writeUintBE,4,0);function b(_,$,k,et,nt){var ot=_(et,nt+$),ht=_(et,nt+k),vt=(ht>>31)*2+1,_t=ht>>>20&2047,kt=4294967296*(ht&1048575)+ot;return _t===2047?kt?NaN:vt*(1/0):_t===0?vt*5e-324*kt:vt*Math.pow(2,_t-1075)*(kt+4503599627370496)}a.readDoubleLE=b.bind(null,readUintLE,0,4),a.readDoubleBE=b.bind(null,readUintBE,4,0)}(),a}function writeUintLE(a,c,b){c[b]=a&255,c[b+1]=a>>>8&255,c[b+2]=a>>>16&255,c[b+3]=a>>>24}function writeUintBE(a,c,b){c[b]=a>>>24,c[b+1]=a>>>16&255,c[b+2]=a>>>8&255,c[b+3]=a&255}function readUintLE(a,c){return(a[c]|a[c+1]<<8|a[c+2]<<16|a[c+3]<<24)>>>0}function readUintBE(a,c){return(a[c]<<24|a[c+1]<<16|a[c+2]<<8|a[c+3])>>>0}var inquire_1=inquire;function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(a){}return null}var utf8$2={};(function(a){var c=a;c.length=function(_){for(var $=0,k=0,et=0;et<_.length;++et)k=_.charCodeAt(et),k<128?$+=1:k<2048?$+=2:(k&64512)===55296&&(_.charCodeAt(et+1)&64512)===56320?(++et,$+=4):$+=3;return $},c.read=function(_,$,k){var et=k-$;if(et<1)return"";for(var nt=null,ot=[],ht=0,vt;$<k;)vt=_[$++],vt<128?ot[ht++]=vt:vt>191&&vt<224?ot[ht++]=(vt&31)<<6|_[$++]&63:vt>239&&vt<365?(vt=((vt&7)<<18|(_[$++]&63)<<12|(_[$++]&63)<<6|_[$++]&63)-65536,ot[ht++]=55296+(vt>>10),ot[ht++]=56320+(vt&1023)):ot[ht++]=(vt&15)<<12|(_[$++]&63)<<6|_[$++]&63,ht>8191&&((nt||(nt=[])).push(String.fromCharCode.apply(String,ot)),ht=0);return nt?(ht&&nt.push(String.fromCharCode.apply(String,ot.slice(0,ht))),nt.join("")):String.fromCharCode.apply(String,ot.slice(0,ht))},c.write=function(_,$,k){for(var et=k,nt,ot,ht=0;ht<_.length;++ht)nt=_.charCodeAt(ht),nt<128?$[k++]=nt:nt<2048?($[k++]=nt>>6|192,$[k++]=nt&63|128):(nt&64512)===55296&&((ot=_.charCodeAt(ht+1))&64512)===56320?(nt=65536+((nt&1023)<<10)+(ot&1023),++ht,$[k++]=nt>>18|240,$[k++]=nt>>12&63|128,$[k++]=nt>>6&63|128,$[k++]=nt&63|128):($[k++]=nt>>12|224,$[k++]=nt>>6&63|128,$[k++]=nt&63|128);return k-et}})(utf8$2);var pool_1=pool;function pool(a,c,b){var _=b||8192,$=_>>>1,k=null,et=_;return function(ot){if(ot<1||ot>$)return a(ot);et+ot>_&&(k=a(_),et=0);var ht=c.call(k,et,et+=ot);return et&7&&(et=(et|7)+1),ht}}var longbits,hasRequiredLongbits;function requireLongbits(){if(hasRequiredLongbits)return longbits;hasRequiredLongbits=1,longbits=c;var a=requireMinimal();function c(k,et){this.lo=k>>>0,this.hi=et>>>0}var b=c.zero=new c(0,0);b.toNumber=function(){return 0},b.zzEncode=b.zzDecode=function(){return this},b.length=function(){return 1};var _=c.zeroHash="\0\0\0\0\0\0\0\0";c.fromNumber=function(et){if(et===0)return b;var nt=et<0;nt&&(et=-et);var ot=et>>>0,ht=(et-ot)/4294967296>>>0;return nt&&(ht=~ht>>>0,ot=~ot>>>0,++ot>4294967295&&(ot=0,++ht>4294967295&&(ht=0))),new c(ot,ht)},c.from=function(et){if(typeof et=="number")return c.fromNumber(et);if(a.isString(et))if(a.Long)et=a.Long.fromString(et);else return c.fromNumber(parseInt(et,10));return et.low||et.high?new c(et.low>>>0,et.high>>>0):b},c.prototype.toNumber=function(et){if(!et&&this.hi>>>31){var nt=~this.lo+1>>>0,ot=~this.hi>>>0;return nt||(ot=ot+1>>>0),-(nt+ot*4294967296)}return this.lo+this.hi*4294967296},c.prototype.toLong=function(et){return a.Long?new a.Long(this.lo|0,this.hi|0,!!et):{low:this.lo|0,high:this.hi|0,unsigned:!!et}};var $=String.prototype.charCodeAt;return c.fromHash=function(et){return et===_?b:new c(($.call(et,0)|$.call(et,1)<<8|$.call(et,2)<<16|$.call(et,3)<<24)>>>0,($.call(et,4)|$.call(et,5)<<8|$.call(et,6)<<16|$.call(et,7)<<24)>>>0)},c.prototype.toHash=function(){return String.fromCharCode(this.lo&255,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,this.hi&255,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},c.prototype.zzEncode=function(){var et=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^et)>>>0,this.lo=(this.lo<<1^et)>>>0,this},c.prototype.zzDecode=function(){var et=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^et)>>>0,this.hi=(this.hi>>>1^et)>>>0,this},c.prototype.length=function(){var et=this.lo,nt=(this.lo>>>28|this.hi<<4)>>>0,ot=this.hi>>>24;return ot===0?nt===0?et<16384?et<128?1:2:et<2097152?3:4:nt<16384?nt<128?5:6:nt<2097152?7:8:ot<128?9:10},longbits}var hasRequiredMinimal;function requireMinimal(){return hasRequiredMinimal||(hasRequiredMinimal=1,function(a){var c=a;c.asPromise=aspromise,c.base64=base64$1,c.EventEmitter=eventemitter,c.float=float,c.inquire=inquire_1,c.utf8=utf8$2,c.pool=pool_1,c.LongBits=requireLongbits(),c.isNode=!!(typeof commonjsGlobal$1<"u"&&commonjsGlobal$1&&commonjsGlobal$1.process&&commonjsGlobal$1.process.versions&&commonjsGlobal$1.process.versions.node),c.global=c.isNode&&commonjsGlobal$1||typeof window<"u"&&window||typeof self<"u"&&self||commonjsGlobal$1,c.emptyArray=Object.freeze?Object.freeze([]):[],c.emptyObject=Object.freeze?Object.freeze({}):{},c.isInteger=Number.isInteger||function(k){return typeof k=="number"&&isFinite(k)&&Math.floor(k)===k},c.isString=function(k){return typeof k=="string"||k instanceof String},c.isObject=function(k){return k&&typeof k=="object"},c.isset=c.isSet=function(k,et){var nt=k[et];return nt!=null&&k.hasOwnProperty(et)?typeof nt!="object"||(Array.isArray(nt)?nt.length:Object.keys(nt).length)>0:!1},c.Buffer=function(){try{var $=c.inquire("buffer").Buffer;return $.prototype.utf8Write?$:null}catch{return null}}(),c._Buffer_from=null,c._Buffer_allocUnsafe=null,c.newBuffer=function(k){return typeof k=="number"?c.Buffer?c._Buffer_allocUnsafe(k):new c.Array(k):c.Buffer?c._Buffer_from(k):typeof Uint8Array>"u"?k:new Uint8Array(k)},c.Array=typeof Uint8Array<"u"?Uint8Array:Array,c.Long=c.global.dcodeIO&&c.global.dcodeIO.Long||c.global.Long||c.inquire("long"),c.key2Re=/^true|false|0|1$/,c.key32Re=/^-?(?:0|[1-9][0-9]*)$/,c.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,c.longToHash=function(k){return k?c.LongBits.from(k).toHash():c.LongBits.zeroHash},c.longFromHash=function(k,et){var nt=c.LongBits.fromHash(k);return c.Long?c.Long.fromBits(nt.lo,nt.hi,et):nt.toNumber(!!et)};function b($,k,et){for(var nt=Object.keys(k),ot=0;ot<nt.length;++ot)($[nt[ot]]===void 0||!et)&&($[nt[ot]]=k[nt[ot]]);return $}c.merge=b,c.lcFirst=function(k){return k.charAt(0).toLowerCase()+k.substring(1)};function _($){function k(et,nt){if(!(this instanceof k))return new k(et,nt);Object.defineProperty(this,"message",{get:function(){return et}}),Error.captureStackTrace?Error.captureStackTrace(this,k):Object.defineProperty(this,"stack",{value:new Error().stack||""}),nt&&b(this,nt)}return(k.prototype=Object.create(Error.prototype)).constructor=k,Object.defineProperty(k.prototype,"name",{get:function(){return $}}),k.prototype.toString=function(){return this.name+": "+this.message},k}c.newError=_,c.ProtocolError=_("ProtocolError"),c.oneOfGetter=function(k){for(var et={},nt=0;nt<k.length;++nt)et[k[nt]]=1;return function(){for(var ot=Object.keys(this),ht=ot.length-1;ht>-1;--ht)if(et[ot[ht]]===1&&this[ot[ht]]!==void 0&&this[ot[ht]]!==null)return ot[ht]}},c.oneOfSetter=function(k){return function(et){for(var nt=0;nt<k.length;++nt)k[nt]!==et&&delete this[k[nt]]}},c.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},c._configure=function(){var $=c.Buffer;if(!$){c._Buffer_from=c._Buffer_allocUnsafe=null;return}c._Buffer_from=$.from!==Uint8Array.from&&$.from||function(et,nt){return new $(et,nt)},c._Buffer_allocUnsafe=$.allocUnsafe||function(et){return new $(et)}}}(minimal$1)),minimal$1}var writer$2=Writer$1,util$9=requireMinimal(),BufferWriter$1,LongBits$1=util$9.LongBits,base64=util$9.base64,utf8$1=util$9.utf8;function Op(a,c,b){this.fn=a,this.len=c,this.next=void 0,this.val=b}function noop$7(){}function State(a){this.head=a.head,this.tail=a.tail,this.len=a.len,this.next=a.states}function Writer$1(){this.len=0,this.head=new Op(noop$7,0,0),this.tail=this.head,this.states=null}var create$2=function a(){return util$9.Buffer?function(){return(Writer$1.create=function(){return new BufferWriter$1})()}:function(){return new Writer$1}};Writer$1.create=create$2();Writer$1.alloc=function a(c){return new util$9.Array(c)};util$9.Array!==Array&&(Writer$1.alloc=util$9.pool(Writer$1.alloc,util$9.Array.prototype.subarray));Writer$1.prototype._push=function a(c,b,_){return this.tail=this.tail.next=new Op(c,b,_),this.len+=b,this};function writeByte(a,c,b){c[b]=a&255}function writeVarint32(a,c,b){for(;a>127;)c[b++]=a&127|128,a>>>=7;c[b]=a}function VarintOp(a,c){this.len=a,this.next=void 0,this.val=c}VarintOp.prototype=Object.create(Op.prototype);VarintOp.prototype.fn=writeVarint32;Writer$1.prototype.uint32=function a(c){return this.len+=(this.tail=this.tail.next=new VarintOp((c=c>>>0)<128?1:c<16384?2:c<2097152?3:c<268435456?4:5,c)).len,this};Writer$1.prototype.int32=function a(c){return c<0?this._push(writeVarint64,10,LongBits$1.fromNumber(c)):this.uint32(c)};Writer$1.prototype.sint32=function a(c){return this.uint32((c<<1^c>>31)>>>0)};function writeVarint64(a,c,b){for(;a.hi;)c[b++]=a.lo&127|128,a.lo=(a.lo>>>7|a.hi<<25)>>>0,a.hi>>>=7;for(;a.lo>127;)c[b++]=a.lo&127|128,a.lo=a.lo>>>7;c[b++]=a.lo}Writer$1.prototype.uint64=function a(c){var b=LongBits$1.from(c);return this._push(writeVarint64,b.length(),b)};Writer$1.prototype.int64=Writer$1.prototype.uint64;Writer$1.prototype.sint64=function a(c){var b=LongBits$1.from(c).zzEncode();return this._push(writeVarint64,b.length(),b)};Writer$1.prototype.bool=function a(c){return this._push(writeByte,1,c?1:0)};function writeFixed32(a,c,b){c[b]=a&255,c[b+1]=a>>>8&255,c[b+2]=a>>>16&255,c[b+3]=a>>>24}Writer$1.prototype.fixed32=function a(c){return this._push(writeFixed32,4,c>>>0)};Writer$1.prototype.sfixed32=Writer$1.prototype.fixed32;Writer$1.prototype.fixed64=function a(c){var b=LongBits$1.from(c);return this._push(writeFixed32,4,b.lo)._push(writeFixed32,4,b.hi)};Writer$1.prototype.sfixed64=Writer$1.prototype.fixed64;Writer$1.prototype.float=function a(c){return this._push(util$9.float.writeFloatLE,4,c)};Writer$1.prototype.double=function a(c){return this._push(util$9.float.writeDoubleLE,8,c)};var writeBytes=util$9.Array.prototype.set?function a(c,b,_){b.set(c,_)}:function a(c,b,_){for(var $=0;$<c.length;++$)b[_+$]=c[$]};Writer$1.prototype.bytes=function a(c){var b=c.length>>>0;if(!b)return this._push(writeByte,1,0);if(util$9.isString(c)){var _=Writer$1.alloc(b=base64.length(c));base64.decode(c,_,0),c=_}return this.uint32(b)._push(writeBytes,b,c)};Writer$1.prototype.string=function a(c){var b=utf8$1.length(c);return b?this.uint32(b)._push(utf8$1.write,b,c):this._push(writeByte,1,0)};Writer$1.prototype.fork=function a(){return this.states=new State(this),this.head=this.tail=new Op(noop$7,0,0),this.len=0,this};Writer$1.prototype.reset=function a(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new Op(noop$7,0,0),this.len=0),this};Writer$1.prototype.ldelim=function a(){var c=this.head,b=this.tail,_=this.len;return this.reset().uint32(_),_&&(this.tail.next=c.next,this.tail=b,this.len+=_),this};Writer$1.prototype.finish=function a(){for(var c=this.head.next,b=this.constructor.alloc(this.len),_=0;c;)c.fn(c.val,b,_),_+=c.len,c=c.next;return b};Writer$1._configure=function(a){BufferWriter$1=a,Writer$1.create=create$2(),BufferWriter$1._configure()};var writer_buffer=BufferWriter,Writer=writer$2;(BufferWriter.prototype=Object.create(Writer.prototype)).constructor=BufferWriter;var util$8=requireMinimal();function BufferWriter(){Writer.call(this)}BufferWriter._configure=function(){BufferWriter.alloc=util$8._Buffer_allocUnsafe,BufferWriter.writeBytesBuffer=util$8.Buffer&&util$8.Buffer.prototype instanceof Uint8Array&&util$8.Buffer.prototype.set.name==="set"?function(c,b,_){b.set(c,_)}:function(c,b,_){if(c.copy)c.copy(b,_,0,c.length);else for(var $=0;$<c.length;)b[_++]=c[$++]}};BufferWriter.prototype.bytes=function a(c){util$8.isString(c)&&(c=util$8._Buffer_from(c,"base64"));var b=c.length>>>0;return this.uint32(b),b&&this._push(BufferWriter.writeBytesBuffer,b,c),this};function writeStringBuffer(a,c,b){a.length<40?util$8.utf8.write(a,c,b):c.utf8Write?c.utf8Write(a,b):c.write(a,b)}BufferWriter.prototype.string=function a(c){var b=util$8.Buffer.byteLength(c);return this.uint32(b),b&&this._push(writeStringBuffer,b,c),this};BufferWriter._configure();var reader=Reader$1,util$7=requireMinimal(),BufferReader$1,LongBits=util$7.LongBits,utf8=util$7.utf8;function indexOutOfRange(a,c){return RangeError("index out of range: "+a.pos+" + "+(c||1)+" > "+a.len)}function Reader$1(a){this.buf=a,this.pos=0,this.len=a.length}var create_array=typeof Uint8Array<"u"?function a(c){if(c instanceof Uint8Array||Array.isArray(c))return new Reader$1(c);throw Error("illegal buffer")}:function a(c){if(Array.isArray(c))return new Reader$1(c);throw Error("illegal buffer")},create$1=function a(){return util$7.Buffer?function(b){return(Reader$1.create=function($){return util$7.Buffer.isBuffer($)?new BufferReader$1($):create_array($)})(b)}:create_array};Reader$1.create=create$1();Reader$1.prototype._slice=util$7.Array.prototype.subarray||util$7.Array.prototype.slice;Reader$1.prototype.uint32=function a(){var c=4294967295;return function(){if(c=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(c=(c|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(c=(c|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(c=(c|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(c=(c|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return c;if((this.pos+=5)>this.len)throw this.pos=this.len,indexOutOfRange(this,10);return c}}();Reader$1.prototype.int32=function a(){return this.uint32()|0};Reader$1.prototype.sint32=function a(){var c=this.uint32();return c>>>1^-(c&1)|0};function readLongVarint(){var a=new LongBits(0,0),c=0;if(this.len-this.pos>4){for(;c<4;++c)if(a.lo=(a.lo|(this.buf[this.pos]&127)<<c*7)>>>0,this.buf[this.pos++]<128)return a;if(a.lo=(a.lo|(this.buf[this.pos]&127)<<28)>>>0,a.hi=(a.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return a;c=0}else{for(;c<3;++c){if(this.pos>=this.len)throw indexOutOfRange(this);if(a.lo=(a.lo|(this.buf[this.pos]&127)<<c*7)>>>0,this.buf[this.pos++]<128)return a}return a.lo=(a.lo|(this.buf[this.pos++]&127)<<c*7)>>>0,a}if(this.len-this.pos>4){for(;c<5;++c)if(a.hi=(a.hi|(this.buf[this.pos]&127)<<c*7+3)>>>0,this.buf[this.pos++]<128)return a}else for(;c<5;++c){if(this.pos>=this.len)throw indexOutOfRange(this);if(a.hi=(a.hi|(this.buf[this.pos]&127)<<c*7+3)>>>0,this.buf[this.pos++]<128)return a}throw Error("invalid varint encoding")}Reader$1.prototype.bool=function a(){return this.uint32()!==0};function readFixed32_end(a,c){return(a[c-4]|a[c-3]<<8|a[c-2]<<16|a[c-1]<<24)>>>0}Reader$1.prototype.fixed32=function a(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);return readFixed32_end(this.buf,this.pos+=4)};Reader$1.prototype.sfixed32=function a(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);return readFixed32_end(this.buf,this.pos+=4)|0};function readFixed64(){if(this.pos+8>this.len)throw indexOutOfRange(this,8);return new LongBits(readFixed32_end(this.buf,this.pos+=4),readFixed32_end(this.buf,this.pos+=4))}Reader$1.prototype.float=function a(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);var c=util$7.float.readFloatLE(this.buf,this.pos);return this.pos+=4,c};Reader$1.prototype.double=function a(){if(this.pos+8>this.len)throw indexOutOfRange(this,4);var c=util$7.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,c};Reader$1.prototype.bytes=function a(){var c=this.uint32(),b=this.pos,_=this.pos+c;if(_>this.len)throw indexOutOfRange(this,c);return this.pos+=c,Array.isArray(this.buf)?this.buf.slice(b,_):b===_?new this.buf.constructor(0):this._slice.call(this.buf,b,_)};Reader$1.prototype.string=function a(){var c=this.bytes();return utf8.read(c,0,c.length)};Reader$1.prototype.skip=function a(c){if(typeof c=="number"){if(this.pos+c>this.len)throw indexOutOfRange(this,c);this.pos+=c}else do if(this.pos>=this.len)throw indexOutOfRange(this);while(this.buf[this.pos++]&128);return this};Reader$1.prototype.skipType=function(a){switch(a){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(a=this.uint32()&7)!==4;)this.skipType(a);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+a+" at offset "+this.pos)}return this};Reader$1._configure=function(a){BufferReader$1=a,Reader$1.create=create$1(),BufferReader$1._configure();var c=util$7.Long?"toLong":"toNumber";util$7.merge(Reader$1.prototype,{int64:function(){return readLongVarint.call(this)[c](!1)},uint64:function(){return readLongVarint.call(this)[c](!0)},sint64:function(){return readLongVarint.call(this).zzDecode()[c](!1)},fixed64:function(){return readFixed64.call(this)[c](!0)},sfixed64:function(){return readFixed64.call(this)[c](!1)}})};var reader_buffer=BufferReader,Reader=reader;(BufferReader.prototype=Object.create(Reader.prototype)).constructor=BufferReader;var util$6=requireMinimal();function BufferReader(a){Reader.call(this,a)}BufferReader._configure=function(){util$6.Buffer&&(BufferReader.prototype._slice=util$6.Buffer.prototype.slice)};BufferReader.prototype.string=function a(){var c=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+c,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+c,this.len))};BufferReader._configure();var rpc={},service=Service,util$5=requireMinimal();(Service.prototype=Object.create(util$5.EventEmitter.prototype)).constructor=Service;function Service(a,c,b){if(typeof a!="function")throw TypeError("rpcImpl must be a function");util$5.EventEmitter.call(this),this.rpcImpl=a,this.requestDelimited=!!c,this.responseDelimited=!!b}Service.prototype.rpcCall=function a(c,b,_,$,k){if(!$)throw TypeError("request must be specified");var et=this;if(!k)return util$5.asPromise(a,et,c,b,_,$);if(!et.rpcImpl){setTimeout(function(){k(Error("already ended"))},0);return}try{return et.rpcImpl(c,b[et.requestDelimited?"encodeDelimited":"encode"]($).finish(),function(ot,ht){if(ot)return et.emit("error",ot,c),k(ot);if(ht===null){et.end(!0);return}if(!(ht instanceof _))try{ht=_[et.responseDelimited?"decodeDelimited":"decode"](ht)}catch(vt){return et.emit("error",vt,c),k(vt)}return et.emit("data",ht,c),k(null,ht)})}catch(nt){et.emit("error",nt,c),setTimeout(function(){k(nt)},0);return}};Service.prototype.end=function a(c){return this.rpcImpl&&(c||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this};(function(a){var c=a;c.Service=service})(rpc);var roots={};(function(a){var c=a;c.build="minimal",c.Writer=writer$2,c.BufferWriter=writer_buffer,c.Reader=reader,c.BufferReader=reader_buffer,c.util=requireMinimal(),c.rpc=rpc,c.roots=roots,c.configure=b;function b(){c.util._configure(),c.Writer._configure(c.BufferWriter),c.Reader._configure(c.BufferReader)}b()})(indexMinimal);var minimal=indexMinimal,struct$2={};(function(a){var c=commonjsGlobal$1&&commonjsGlobal$1.__createBinding||(Object.create?function(Rt,xt,Jt,ar){ar===void 0&&(ar=Jt),Object.defineProperty(Rt,ar,{enumerable:!0,get:function(){return xt[Jt]}})}:function(Rt,xt,Jt,ar){ar===void 0&&(ar=Jt),Rt[ar]=xt[Jt]}),b=commonjsGlobal$1&&commonjsGlobal$1.__setModuleDefault||(Object.create?function(Rt,xt){Object.defineProperty(Rt,"default",{enumerable:!0,value:xt})}:function(Rt,xt){Rt.default=xt}),_=commonjsGlobal$1&&commonjsGlobal$1.__importStar||function(Rt){if(Rt&&Rt.__esModule)return Rt;var xt={};if(Rt!=null)for(var Jt in Rt)Jt!=="default"&&Object.hasOwnProperty.call(Rt,Jt)&&c(xt,Rt,Jt);return b(xt,Rt),xt},$=commonjsGlobal$1&&commonjsGlobal$1.__importDefault||function(Rt){return Rt&&Rt.__esModule?Rt:{default:Rt}};Object.defineProperty(a,"__esModule",{value:!0}),a.ListValue=a.Value=a.Struct_FieldsEntry=a.Struct=a.nullValueToNumber=a.nullValueToJSON=a.nullValueFromJSON=a.NullValue=a.protobufPackage=void 0;const k=$(umdExports),et=_(minimal);a.protobufPackage="google.protobuf";var nt;(function(Rt){Rt.NULL_VALUE="NULL_VALUE"})(nt=a.NullValue||(a.NullValue={}));function ot(Rt){switch(Rt){case 0:case"NULL_VALUE":return nt.NULL_VALUE;default:throw new At.Error("Unrecognized enum value "+Rt+" for enum NullValue")}}a.nullValueFromJSON=ot;function ht(Rt){switch(Rt){case nt.NULL_VALUE:return"NULL_VALUE";default:return"UNKNOWN"}}a.nullValueToJSON=ht;function vt(Rt){switch(Rt){case nt.NULL_VALUE:return 0;default:return 0}}a.nullValueToNumber=vt;function _t(){return{fields:{}}}a.Struct={encode(Rt,xt=et.Writer.create()){return Object.entries(Rt.fields).forEach(([Jt,ar])=>{ar!==void 0&&a.Struct_FieldsEntry.encode({key:Jt,value:ar},xt.uint32(10).fork()).ldelim()}),xt},decode(Rt,xt){const Jt=Rt instanceof et.Reader?Rt:new et.Reader(Rt);let ar=xt===void 0?Jt.len:Jt.pos+xt;const nr=_t();for(;Jt.pos<ar;){const pr=Jt.uint32();switch(pr>>>3){case 1:const ur=a.Struct_FieldsEntry.decode(Jt,Jt.uint32());ur.value!==void 0&&(nr.fields[ur.key]=ur.value);break;default:Jt.skipType(pr&7);break}}return nr},fromJSON(Rt){return{fields:Mt(Rt.fields)?Object.entries(Rt.fields).reduce((xt,[Jt,ar])=>(xt[Jt]=ar,xt),{}):{}}},toJSON(Rt){const xt={};return xt.fields={},Rt.fields&&Object.entries(Rt.fields).forEach(([Jt,ar])=>{xt.fields[Jt]=ar}),xt},fromPartial(Rt){var xt;const Jt=_t();return Jt.fields=Object.entries((xt=Rt.fields)!==null&&xt!==void 0?xt:{}).reduce((ar,[nr,pr])=>(pr!==void 0&&(ar[nr]=pr),ar),{}),Jt},wrap(Rt){const xt=_t();return Rt!==void 0&&Object.keys(Rt).forEach(Jt=>{xt.fields[Jt]=Rt[Jt]}),xt},unwrap(Rt){const xt={};return Object.keys(Rt.fields).forEach(Jt=>{xt[Jt]=Rt.fields[Jt]}),xt}};function kt(){return{key:"",value:void 0}}a.Struct_FieldsEntry={encode(Rt,xt=et.Writer.create()){return Rt.key!==""&&xt.uint32(10).string(Rt.key),Rt.value!==void 0&&a.Value.encode(a.Value.wrap(Rt.value),xt.uint32(18).fork()).ldelim(),xt},decode(Rt,xt){const Jt=Rt instanceof et.Reader?Rt:new et.Reader(Rt);let ar=xt===void 0?Jt.len:Jt.pos+xt;const nr=kt();for(;Jt.pos<ar;){const pr=Jt.uint32();switch(pr>>>3){case 1:nr.key=Jt.string();break;case 2:nr.value=a.Value.unwrap(a.Value.decode(Jt,Jt.uint32()));break;default:Jt.skipType(pr&7);break}}return nr},fromJSON(Rt){return{key:Dt(Rt.key)?String(Rt.key):"",value:Dt(Rt==null?void 0:Rt.value)?Rt.value:void 0}},toJSON(Rt){const xt={};return Rt.key!==void 0&&(xt.key=Rt.key),Rt.value!==void 0&&(xt.value=Rt.value),xt},fromPartial(Rt){var xt,Jt;const ar=kt();return ar.key=(xt=Rt.key)!==null&&xt!==void 0?xt:"",ar.value=(Jt=Rt.value)!==null&&Jt!==void 0?Jt:void 0,ar}};function $t(){return{nullValue:void 0,numberValue:void 0,stringValue:void 0,boolValue:void 0,structValue:void 0,listValue:void 0}}a.Value={encode(Rt,xt=et.Writer.create()){return Rt.nullValue!==void 0&&xt.uint32(8).int32(vt(Rt.nullValue)),Rt.numberValue!==void 0&&xt.uint32(17).double(Rt.numberValue),Rt.stringValue!==void 0&&xt.uint32(26).string(Rt.stringValue),Rt.boolValue!==void 0&&xt.uint32(32).bool(Rt.boolValue),Rt.structValue!==void 0&&a.Struct.encode(a.Struct.wrap(Rt.structValue),xt.uint32(42).fork()).ldelim(),Rt.listValue!==void 0&&a.ListValue.encode(a.ListValue.wrap(Rt.listValue),xt.uint32(50).fork()).ldelim(),xt},decode(Rt,xt){const Jt=Rt instanceof et.Reader?Rt:new et.Reader(Rt);let ar=xt===void 0?Jt.len:Jt.pos+xt;const nr=$t();for(;Jt.pos<ar;){const pr=Jt.uint32();switch(pr>>>3){case 1:nr.nullValue=ot(Jt.int32());break;case 2:nr.numberValue=Jt.double();break;case 3:nr.stringValue=Jt.string();break;case 4:nr.boolValue=Jt.bool();break;case 5:nr.structValue=a.Struct.unwrap(a.Struct.decode(Jt,Jt.uint32()));break;case 6:nr.listValue=a.ListValue.unwrap(a.ListValue.decode(Jt,Jt.uint32()));break;default:Jt.skipType(pr&7);break}}return nr},fromJSON(Rt){return{nullValue:Dt(Rt.nullValue)?ot(Rt.nullValue):void 0,numberValue:Dt(Rt.numberValue)?Number(Rt.numberValue):void 0,stringValue:Dt(Rt.stringValue)?String(Rt.stringValue):void 0,boolValue:Dt(Rt.boolValue)?!!Rt.boolValue:void 0,structValue:Mt(Rt.structValue)?Rt.structValue:void 0,listValue:Array.isArray(Rt.listValue)?[...Rt.listValue]:void 0}},toJSON(Rt){const xt={};return Rt.nullValue!==void 0&&(xt.nullValue=Rt.nullValue!==void 0?ht(Rt.nullValue):void 0),Rt.numberValue!==void 0&&(xt.numberValue=Rt.numberValue),Rt.stringValue!==void 0&&(xt.stringValue=Rt.stringValue),Rt.boolValue!==void 0&&(xt.boolValue=Rt.boolValue),Rt.structValue!==void 0&&(xt.structValue=Rt.structValue),Rt.listValue!==void 0&&(xt.listValue=Rt.listValue),xt},fromPartial(Rt){var xt,Jt,ar,nr,pr,ur;const Ot=$t();return Ot.nullValue=(xt=Rt.nullValue)!==null&&xt!==void 0?xt:void 0,Ot.numberValue=(Jt=Rt.numberValue)!==null&&Jt!==void 0?Jt:void 0,Ot.stringValue=(ar=Rt.stringValue)!==null&&ar!==void 0?ar:void 0,Ot.boolValue=(nr=Rt.boolValue)!==null&&nr!==void 0?nr:void 0,Ot.structValue=(pr=Rt.structValue)!==null&&pr!==void 0?pr:void 0,Ot.listValue=(ur=Rt.listValue)!==null&&ur!==void 0?ur:void 0,Ot},wrap(Rt){const xt=$t();if(Rt===null)xt.nullValue=nt.NULL_VALUE;else if(typeof Rt=="boolean")xt.boolValue=Rt;else if(typeof Rt=="number")xt.numberValue=Rt;else if(typeof Rt=="string")xt.stringValue=Rt;else if(Array.isArray(Rt))xt.listValue=Rt;else if(typeof Rt=="object")xt.structValue=Rt;else if(typeof Rt<"u")throw new Error("Unsupported any value type: "+typeof Rt);return xt},unwrap(Rt){if((Rt==null?void 0:Rt.stringValue)!==void 0)return Rt.stringValue;if((Rt==null?void 0:Rt.numberValue)!==void 0)return Rt.numberValue;if((Rt==null?void 0:Rt.boolValue)!==void 0)return Rt.boolValue;if((Rt==null?void 0:Rt.structValue)!==void 0)return Rt.structValue;if((Rt==null?void 0:Rt.listValue)!==void 0)return Rt.listValue;if((Rt==null?void 0:Rt.nullValue)!==void 0)return null}};function Tt(){return{values:[]}}a.ListValue={encode(Rt,xt=et.Writer.create()){for(const Jt of Rt.values)a.Value.encode(a.Value.wrap(Jt),xt.uint32(10).fork()).ldelim();return xt},decode(Rt,xt){const Jt=Rt instanceof et.Reader?Rt:new et.Reader(Rt);let ar=xt===void 0?Jt.len:Jt.pos+xt;const nr=Tt();for(;Jt.pos<ar;){const pr=Jt.uint32();switch(pr>>>3){case 1:nr.values.push(a.Value.unwrap(a.Value.decode(Jt,Jt.uint32())));break;default:Jt.skipType(pr&7);break}}return nr},fromJSON(Rt){return{values:Array.isArray(Rt==null?void 0:Rt.values)?[...Rt.values]:[]}},toJSON(Rt){const xt={};return Rt.values?xt.values=Rt.values.map(Jt=>Jt):xt.values=[],xt},fromPartial(Rt){var xt;const Jt=Tt();return Jt.values=((xt=Rt.values)===null||xt===void 0?void 0:xt.map(ar=>ar))||[],Jt},wrap(Rt){const xt=Tt();return xt.values=Rt??[],xt},unwrap(Rt){return Rt.values}};var At=(()=>{if(typeof At<"u")return At;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof commonjsGlobal$1<"u")return commonjsGlobal$1;throw"Unable to locate global object"})();et.util.Long!==k.default&&(et.util.Long=k.default,et.configure());function Mt(Rt){return typeof Rt=="object"&&Rt!==null}function Dt(Rt){return Rt!=null}})(struct$2);(function(a){var c=commonjsGlobal$1&&commonjsGlobal$1.__createBinding||(Object.create?function(yt,Bt,Zt,yr){yr===void 0&&(yr=Zt),Object.defineProperty(yt,yr,{enumerable:!0,get:function(){return Bt[Zt]}})}:function(yt,Bt,Zt,yr){yr===void 0&&(yr=Zt),yt[yr]=Bt[Zt]}),b=commonjsGlobal$1&&commonjsGlobal$1.__setModuleDefault||(Object.create?function(yt,Bt){Object.defineProperty(yt,"default",{enumerable:!0,value:Bt})}:function(yt,Bt){yt.default=Bt}),_=commonjsGlobal$1&&commonjsGlobal$1.__importStar||function(yt){if(yt&&yt.__esModule)return yt;var Bt={};if(yt!=null)for(var Zt in yt)Zt!=="default"&&Object.hasOwnProperty.call(yt,Zt)&&c(Bt,yt,Zt);return b(Bt,yt),Bt},$=commonjsGlobal$1&&commonjsGlobal$1.__importDefault||function(yt){return yt&&yt.__esModule?yt:{default:yt}};Object.defineProperty(a,"__esModule",{value:!0}),a.LayoutServiceDefinition=a.LayoutServiceClientImpl=a.LayerServiceDefinition=a.LayerServiceClientImpl=a.Event=a.LayerEvent=a.LayoutEvent=a.BatchLayerRequest_BatchItem=a.BatchLayerRequest=a.BatchDeleteLayerRequest=a.DeleteLayerPayload=a.UpdateLayerRequest=a.GetLayerRequest=a.CreateLayerRequest=a.ListLayersResponse=a.ListLayersRequest=a.PartialLayerWithID=a.PartialLayer=a.LayerAnimation=a.DeleteLayoutResponse=a.DeleteLayoutRequest=a.DeleteLayoutPayload=a.UpdateLayoutRequest=a.GetLayoutRequest=a.CreateLayoutRequest=a.ListLayoutsResponse=a.ListLayoutsRequest=a.PartialLayout=a.BatchLayerResponse_BatchLayerItem=a.BatchLayerResponse=a.DeleteLayerResponse=a.DeleteLayerRequest=a.Layer=a.Layout=a.Transition_TransitionStinger=a.Transition_TransitionStingerCut=a.Transition_TransitionSwipe=a.Transition_TransitionCrossfade=a.Transition_TransitionFadeToColor=a.Transition_TransitionCut=a.Transition_TransitionMediaType=a.Transition=a.transition_TransitionSwipeTypeToNumber=a.transition_TransitionSwipeTypeToJSON=a.transition_TransitionSwipeTypeFromJSON=a.Transition_TransitionSwipeType=a.transition_TransitionDirectionToNumber=a.transition_TransitionDirectionToJSON=a.transition_TransitionDirectionFromJSON=a.Transition_TransitionDirection=a.eventTypeToNumber=a.eventTypeToJSON=a.eventTypeFromJSON=a.EventType=a.eventSubTypeToNumber=a.eventSubTypeToJSON=a.eventSubTypeFromJSON=a.EventSubType=a.requestAnimationModeToNumber=a.requestAnimationModeToJSON=a.requestAnimationModeFromJSON=a.RequestAnimationMode=a.layoutTypeToNumber=a.layoutTypeToJSON=a.layoutTypeFromJSON=a.LayoutType=a.protobufPackage=void 0;const k=$(umdExports),et=_(minimal),nt=struct$2;a.protobufPackage="apis.layout.v2";var ot;(function(yt){yt.LAYOUT_TYPE_UNSPECIFIED="LAYOUT_TYPE_UNSPECIFIED",yt.LAYOUT_TYPE_SCENELESS="LAYOUT_TYPE_SCENELESS",yt.LAYOUT_TYPE_SCENE="LAYOUT_TYPE_SCENE"})(ot=a.LayoutType||(a.LayoutType={}));function ht(yt){switch(yt){case 0:case"LAYOUT_TYPE_UNSPECIFIED":return ot.LAYOUT_TYPE_UNSPECIFIED;case 1:case"LAYOUT_TYPE_SCENELESS":return ot.LAYOUT_TYPE_SCENELESS;case 2:case"LAYOUT_TYPE_SCENE":return ot.LAYOUT_TYPE_SCENE;default:throw new Sr.Error("Unrecognized enum value "+yt+" for enum LayoutType")}}a.layoutTypeFromJSON=ht;function vt(yt){switch(yt){case ot.LAYOUT_TYPE_UNSPECIFIED:return"LAYOUT_TYPE_UNSPECIFIED";case ot.LAYOUT_TYPE_SCENELESS:return"LAYOUT_TYPE_SCENELESS";case ot.LAYOUT_TYPE_SCENE:return"LAYOUT_TYPE_SCENE";default:return"UNKNOWN"}}a.layoutTypeToJSON=vt;function _t(yt){switch(yt){case ot.LAYOUT_TYPE_UNSPECIFIED:return 0;case ot.LAYOUT_TYPE_SCENELESS:return 1;case ot.LAYOUT_TYPE_SCENE:return 2;default:return 0}}a.layoutTypeToNumber=_t;var kt;(function(yt){yt.REQUEST_ANIMATION_MODE_UNSPECIFIED="REQUEST_ANIMATION_MODE_UNSPECIFIED",yt.REQUEST_ANIMATION_MODE_PARALLEL="REQUEST_ANIMATION_MODE_PARALLEL",yt.REQUEST_ANIMATION_MODE_SERIES="REQUEST_ANIMATION_MODE_SERIES"})(kt=a.RequestAnimationMode||(a.RequestAnimationMode={}));function $t(yt){switch(yt){case 0:case"REQUEST_ANIMATION_MODE_UNSPECIFIED":return kt.REQUEST_ANIMATION_MODE_UNSPECIFIED;case 1:case"REQUEST_ANIMATION_MODE_PARALLEL":return kt.REQUEST_ANIMATION_MODE_PARALLEL;case 2:case"REQUEST_ANIMATION_MODE_SERIES":return kt.REQUEST_ANIMATION_MODE_SERIES;default:throw new Sr.Error("Unrecognized enum value "+yt+" for enum RequestAnimationMode")}}a.requestAnimationModeFromJSON=$t;function Tt(yt){switch(yt){case kt.REQUEST_ANIMATION_MODE_UNSPECIFIED:return"REQUEST_ANIMATION_MODE_UNSPECIFIED";case kt.REQUEST_ANIMATION_MODE_PARALLEL:return"REQUEST_ANIMATION_MODE_PARALLEL";case kt.REQUEST_ANIMATION_MODE_SERIES:return"REQUEST_ANIMATION_MODE_SERIES";default:return"UNKNOWN"}}a.requestAnimationModeToJSON=Tt;function At(yt){switch(yt){case kt.REQUEST_ANIMATION_MODE_UNSPECIFIED:return 0;case kt.REQUEST_ANIMATION_MODE_PARALLEL:return 1;case kt.REQUEST_ANIMATION_MODE_SERIES:return 2;default:return 0}}a.requestAnimationModeToNumber=At;var Mt;(function(yt){yt.EVENT_SUB_TYPE_UNSPECIFIED="EVENT_SUB_TYPE_UNSPECIFIED",yt.EVENT_SUB_TYPE_CREATE="EVENT_SUB_TYPE_CREATE",yt.EVENT_SUB_TYPE_UPDATE="EVENT_SUB_TYPE_UPDATE",yt.EVENT_SUB_TYPE_DELETE="EVENT_SUB_TYPE_DELETE",yt.EVENT_SUB_TYPE_BATCH="EVENT_SUB_TYPE_BATCH"})(Mt=a.EventSubType||(a.EventSubType={}));function Dt(yt){switch(yt){case 0:case"EVENT_SUB_TYPE_UNSPECIFIED":return Mt.EVENT_SUB_TYPE_UNSPECIFIED;case 1:case"EVENT_SUB_TYPE_CREATE":return Mt.EVENT_SUB_TYPE_CREATE;case 2:case"EVENT_SUB_TYPE_UPDATE":return Mt.EVENT_SUB_TYPE_UPDATE;case 3:case"EVENT_SUB_TYPE_DELETE":return Mt.EVENT_SUB_TYPE_DELETE;case 4:case"EVENT_SUB_TYPE_BATCH":return Mt.EVENT_SUB_TYPE_BATCH;default:throw new Sr.Error("Unrecognized enum value "+yt+" for enum EventSubType")}}a.eventSubTypeFromJSON=Dt;function Rt(yt){switch(yt){case Mt.EVENT_SUB_TYPE_UNSPECIFIED:return"EVENT_SUB_TYPE_UNSPECIFIED";case Mt.EVENT_SUB_TYPE_CREATE:return"EVENT_SUB_TYPE_CREATE";case Mt.EVENT_SUB_TYPE_UPDATE:return"EVENT_SUB_TYPE_UPDATE";case Mt.EVENT_SUB_TYPE_DELETE:return"EVENT_SUB_TYPE_DELETE";case Mt.EVENT_SUB_TYPE_BATCH:return"EVENT_SUB_TYPE_BATCH";default:return"UNKNOWN"}}a.eventSubTypeToJSON=Rt;function xt(yt){switch(yt){case Mt.EVENT_SUB_TYPE_UNSPECIFIED:return 0;case Mt.EVENT_SUB_TYPE_CREATE:return 1;case Mt.EVENT_SUB_TYPE_UPDATE:return 2;case Mt.EVENT_SUB_TYPE_DELETE:return 3;case Mt.EVENT_SUB_TYPE_BATCH:return 4;default:return 0}}a.eventSubTypeToNumber=xt;var Jt;(function(yt){yt.EVENT_TYPE_UNSPECIFIED="EVENT_TYPE_UNSPECIFIED",yt.EVENT_TYPE_LAYOUT="EVENT_TYPE_LAYOUT",yt.EVENT_TYPE_LAYER="EVENT_TYPE_LAYER"})(Jt=a.EventType||(a.EventType={}));function ar(yt){switch(yt){case 0:case"EVENT_TYPE_UNSPECIFIED":return Jt.EVENT_TYPE_UNSPECIFIED;case 1:case"EVENT_TYPE_LAYOUT":return Jt.EVENT_TYPE_LAYOUT;case 2:case"EVENT_TYPE_LAYER":return Jt.EVENT_TYPE_LAYER;default:throw new Sr.Error("Unrecognized enum value "+yt+" for enum EventType")}}a.eventTypeFromJSON=ar;function nr(yt){switch(yt){case Jt.EVENT_TYPE_UNSPECIFIED:return"EVENT_TYPE_UNSPECIFIED";case Jt.EVENT_TYPE_LAYOUT:return"EVENT_TYPE_LAYOUT";case Jt.EVENT_TYPE_LAYER:return"EVENT_TYPE_LAYER";default:return"UNKNOWN"}}a.eventTypeToJSON=nr;function pr(yt){switch(yt){case Jt.EVENT_TYPE_UNSPECIFIED:return 0;case Jt.EVENT_TYPE_LAYOUT:return 1;case Jt.EVENT_TYPE_LAYER:return 2;default:return 0}}a.eventTypeToNumber=pr;var ur;(function(yt){yt.TRANSITION_DIRECTION_UNSPECIFIED="TRANSITION_DIRECTION_UNSPECIFIED",yt.TRANSITION_DIRECTION_LEFT="TRANSITION_DIRECTION_LEFT",yt.TRANSITION_DIRECTION_RIGHT="TRANSITION_DIRECTION_RIGHT",yt.TRANSITION_DIRECTION_UP="TRANSITION_DIRECTION_UP",yt.TRANSITION_DIRECTION_DOWN="TRANSITION_DIRECTION_DOWN"})(ur=a.Transition_TransitionDirection||(a.Transition_TransitionDirection={}));function Ot(yt){switch(yt){case 0:case"TRANSITION_DIRECTION_UNSPECIFIED":return ur.TRANSITION_DIRECTION_UNSPECIFIED;case 1:case"TRANSITION_DIRECTION_LEFT":return ur.TRANSITION_DIRECTION_LEFT;case 2:case"TRANSITION_DIRECTION_RIGHT":return ur.TRANSITION_DIRECTION_RIGHT;case 3:case"TRANSITION_DIRECTION_UP":return ur.TRANSITION_DIRECTION_UP;case 4:case"TRANSITION_DIRECTION_DOWN":return ur.TRANSITION_DIRECTION_DOWN;default:throw new Sr.Error("Unrecognized enum value "+yt+" for enum Transition_TransitionDirection")}}a.transition_TransitionDirectionFromJSON=Ot;function It(yt){switch(yt){case ur.TRANSITION_DIRECTION_UNSPECIFIED:return"TRANSITION_DIRECTION_UNSPECIFIED";case ur.TRANSITION_DIRECTION_LEFT:return"TRANSITION_DIRECTION_LEFT";case ur.TRANSITION_DIRECTION_RIGHT:return"TRANSITION_DIRECTION_RIGHT";case ur.TRANSITION_DIRECTION_UP:return"TRANSITION_DIRECTION_UP";case ur.TRANSITION_DIRECTION_DOWN:return"TRANSITION_DIRECTION_DOWN";default:return"UNKNOWN"}}a.transition_TransitionDirectionToJSON=It;function ut(yt){switch(yt){case ur.TRANSITION_DIRECTION_UNSPECIFIED:return 0;case ur.TRANSITION_DIRECTION_LEFT:return 1;case ur.TRANSITION_DIRECTION_RIGHT:return 2;case ur.TRANSITION_DIRECTION_UP:return 3;case ur.TRANSITION_DIRECTION_DOWN:return 4;default:return 0}}a.transition_TransitionDirectionToNumber=ut;var _e;(function(yt){yt.TRANSITION_SWIPE_TYPE_UNSPECIFIED="TRANSITION_SWIPE_TYPE_UNSPECIFIED",yt.TRANSITION_SWIPE_TYPE_COMBINED="TRANSITION_SWIPE_TYPE_COMBINED",yt.TRANSITION_SWIPE_TYPE_SOURCE="TRANSITION_SWIPE_TYPE_SOURCE",yt.TRANSITION_SWIPE_TYPE_DESTINATION="TRANSITION_SWIPE_TYPE_DESTINATION"})(_e=a.Transition_TransitionSwipeType||(a.Transition_TransitionSwipeType={}));function tt(yt){switch(yt){case 0:case"TRANSITION_SWIPE_TYPE_UNSPECIFIED":return _e.TRANSITION_SWIPE_TYPE_UNSPECIFIED;case 1:case"TRANSITION_SWIPE_TYPE_COMBINED":return _e.TRANSITION_SWIPE_TYPE_COMBINED;case 2:case"TRANSITION_SWIPE_TYPE_SOURCE":return _e.TRANSITION_SWIPE_TYPE_SOURCE;case 3:case"TRANSITION_SWIPE_TYPE_DESTINATION":return _e.TRANSITION_SWIPE_TYPE_DESTINATION;default:throw new Sr.Error("Unrecognized enum value "+yt+" for enum Transition_TransitionSwipeType")}}a.transition_TransitionSwipeTypeFromJSON=tt;function it(yt){switch(yt){case _e.TRANSITION_SWIPE_TYPE_UNSPECIFIED:return"TRANSITION_SWIPE_TYPE_UNSPECIFIED";case _e.TRANSITION_SWIPE_TYPE_COMBINED:return"TRANSITION_SWIPE_TYPE_COMBINED";case _e.TRANSITION_SWIPE_TYPE_SOURCE:return"TRANSITION_SWIPE_TYPE_SOURCE";case _e.TRANSITION_SWIPE_TYPE_DESTINATION:return"TRANSITION_SWIPE_TYPE_DESTINATION";default:return"UNKNOWN"}}a.transition_TransitionSwipeTypeToJSON=it;function dt(yt){switch(yt){case _e.TRANSITION_SWIPE_TYPE_UNSPECIFIED:return 0;case _e.TRANSITION_SWIPE_TYPE_COMBINED:return 1;case _e.TRANSITION_SWIPE_TYPE_SOURCE:return 2;case _e.TRANSITION_SWIPE_TYPE_DESTINATION:return 3;default:return 0}}a.transition_TransitionSwipeTypeToNumber=dt;function lt(){return{fromLayoutIds:[],cut:void 0,crossfade:void 0,fadeToColor:void 0,swipe:void 0,stinger:void 0}}a.Transition={encode(yt,Bt=et.Writer.create()){for(const Zt of yt.fromLayoutIds)Bt.uint32(10).string(Zt);return yt.cut!==void 0&&a.Transition_TransitionCut.encode(yt.cut,Bt.uint32(82).fork()).ldelim(),yt.crossfade!==void 0&&a.Transition_TransitionCrossfade.encode(yt.crossfade,Bt.uint32(90).fork()).ldelim(),yt.fadeToColor!==void 0&&a.Transition_TransitionFadeToColor.encode(yt.fadeToColor,Bt.uint32(98).fork()).ldelim(),yt.swipe!==void 0&&a.Transition_TransitionSwipe.encode(yt.swipe,Bt.uint32(106).fork()).ldelim(),yt.stinger!==void 0&&a.Transition_TransitionStinger.encode(yt.stinger,Bt.uint32(114).fork()).ldelim(),Bt},decode(yt,Bt){const Zt=yt instanceof et.Reader?yt:new et.Reader(yt);let yr=Bt===void 0?Zt.len:Zt.pos+Bt;const fr=lt();for(;Zt.pos<yr;){const Rr=Zt.uint32();switch(Rr>>>3){case 1:fr.fromLayoutIds.push(Zt.string());break;case 10:fr.cut=a.Transition_TransitionCut.decode(Zt,Zt.uint32());break;case 11:fr.crossfade=a.Transition_TransitionCrossfade.decode(Zt,Zt.uint32());break;case 12:fr.fadeToColor=a.Transition_TransitionFadeToColor.decode(Zt,Zt.uint32());break;case 13:fr.swipe=a.Transition_TransitionSwipe.decode(Zt,Zt.uint32());break;case 14:fr.stinger=a.Transition_TransitionStinger.decode(Zt,Zt.uint32());break;default:Zt.skipType(Rr&7);break}}return fr},fromJSON(yt){return{fromLayoutIds:Array.isArray(yt==null?void 0:yt.fromLayoutIds)?yt.fromLayoutIds.map(Bt=>String(Bt)):[],cut:Cr(yt.cut)?a.Transition_TransitionCut.fromJSON(yt.cut):void 0,crossfade:Cr(yt.crossfade)?a.Transition_TransitionCrossfade.fromJSON(yt.crossfade):void 0,fadeToColor:Cr(yt.fadeToColor)?a.Transition_TransitionFadeToColor.fromJSON(yt.fadeToColor):void 0,swipe:Cr(yt.swipe)?a.Transition_TransitionSwipe.fromJSON(yt.swipe):void 0,stinger:Cr(yt.stinger)?a.Transition_TransitionStinger.fromJSON(yt.stinger):void 0}},toJSON(yt){const Bt={};return yt.fromLayoutIds?Bt.fromLayoutIds=yt.fromLayoutIds.map(Zt=>Zt):Bt.fromLayoutIds=[],yt.cut!==void 0&&(Bt.cut=yt.cut?a.Transition_TransitionCut.toJSON(yt.cut):void 0),yt.crossfade!==void 0&&(Bt.crossfade=yt.crossfade?a.Transition_TransitionCrossfade.toJSON(yt.crossfade):void 0),yt.fadeToColor!==void 0&&(Bt.fadeToColor=yt.fadeToColor?a.Transition_TransitionFadeToColor.toJSON(yt.fadeToColor):void 0),yt.swipe!==void 0&&(Bt.swipe=yt.swipe?a.Transition_TransitionSwipe.toJSON(yt.swipe):void 0),yt.stinger!==void 0&&(Bt.stinger=yt.stinger?a.Transition_TransitionStinger.toJSON(yt.stinger):void 0),Bt},fromPartial(yt){var Bt;const Zt=lt();return Zt.fromLayoutIds=((Bt=yt.fromLayoutIds)===null||Bt===void 0?void 0:Bt.map(yr=>yr))||[],Zt.cut=yt.cut!==void 0&&yt.cut!==null?a.Transition_TransitionCut.fromPartial(yt.cut):void 0,Zt.crossfade=yt.crossfade!==void 0&&yt.crossfade!==null?a.Transition_TransitionCrossfade.fromPartial(yt.crossfade):void 0,Zt.fadeToColor=yt.fadeToColor!==void 0&&yt.fadeToColor!==null?a.Transition_TransitionFadeToColor.fromPartial(yt.fadeToColor):void 0,Zt.swipe=yt.swipe!==void 0&&yt.swipe!==null?a.Transition_TransitionSwipe.fromPartial(yt.swipe):void 0,Zt.stinger=yt.stinger!==void 0&&yt.stinger!==null?a.Transition_TransitionStinger.fromPartial(yt.stinger):void 0,Zt}};function gt(){return{url:"",volume:0}}a.Transition_TransitionMediaType={encode(yt,Bt=et.Writer.create()){return yt.url!==""&&Bt.uint32(10).string(yt.url),yt.volume!==0&&Bt.uint32(17).double(yt.volume),Bt},decode(yt,Bt){const Zt=yt instanceof et.Reader?yt:new et.Reader(yt);let yr=Bt===void 0?Zt.len:Zt.pos+Bt;const fr=gt();for(;Zt.pos<yr;){const Rr=Zt.uint32();switch(Rr>>>3){case 1:fr.url=Zt.string();break;case 2:fr.volume=Zt.double();break;default:Zt.skipType(Rr&7);break}}return fr},fromJSON(yt){return{url:Cr(yt.url)?String(yt.url):"",volume:Cr(yt.volume)?Number(yt.volume):0}},toJSON(yt){const Bt={};return yt.url!==void 0&&(Bt.url=yt.url),yt.volume!==void 0&&(Bt.volume=yt.volume),Bt},fromPartial(yt){var Bt,Zt;const yr=gt();return yr.url=(Bt=yt.url)!==null&&Bt!==void 0?Bt:"",yr.volume=(Zt=yt.volume)!==null&&Zt!==void 0?Zt:0,yr}};function Et(){return{}}a.Transition_TransitionCut={encode(yt,Bt=et.Writer.create()){return Bt},decode(yt,Bt){const Zt=yt instanceof et.Reader?yt:new et.Reader(yt);let yr=Bt===void 0?Zt.len:Zt.pos+Bt;const fr=Et();for(;Zt.pos<yr;){const Rr=Zt.uint32();switch(Rr>>>3){default:Zt.skipType(Rr&7);break}}return fr},fromJSON(yt){return{}},toJSON(yt){return{}},fromPartial(yt){return Et()}};function pt(){return{durationMs:0,backgroundColor:""}}a.Transition_TransitionFadeToColor={encode(yt,Bt=et.Writer.create()){return yt.durationMs!==0&&Bt.uint32(8).int32(yt.durationMs),yt.backgroundColor!==""&&Bt.uint32(18).string(yt.backgroundColor),Bt},decode(yt,Bt){const Zt=yt instanceof et.Reader?yt:new et.Reader(yt);let yr=Bt===void 0?Zt.len:Zt.pos+Bt;const fr=pt();for(;Zt.pos<yr;){const Rr=Zt.uint32();switch(Rr>>>3){case 1:fr.durationMs=Zt.int32();break;case 2:fr.backgroundColor=Zt.string();break;default:Zt.skipType(Rr&7);break}}return fr},fromJSON(yt){return{durationMs:Cr(yt.durationMs)?Number(yt.durationMs):0,backgroundColor:Cr(yt.backgroundColor)?String(yt.backgroundColor):""}},toJSON(yt){const Bt={};return yt.durationMs!==void 0&&(Bt.durationMs=Math.round(yt.durationMs)),yt.backgroundColor!==void 0&&(Bt.backgroundColor=yt.backgroundColor),Bt},fromPartial(yt){var Bt,Zt;const yr=pt();return yr.durationMs=(Bt=yt.durationMs)!==null&&Bt!==void 0?Bt:0,yr.backgroundColor=(Zt=yt.backgroundColor)!==null&&Zt!==void 0?Zt:"",yr}};function rt(){return{durationMs:0}}a.Transition_TransitionCrossfade={encode(yt,Bt=et.Writer.create()){return yt.durationMs!==0&&Bt.uint32(8).int32(yt.durationMs),Bt},decode(yt,Bt){const Zt=yt instanceof et.Reader?yt:new et.Reader(yt);let yr=Bt===void 0?Zt.len:Zt.pos+Bt;const fr=rt();for(;Zt.pos<yr;){const Rr=Zt.uint32();switch(Rr>>>3){case 1:fr.durationMs=Zt.int32();break;default:Zt.skipType(Rr&7);break}}return fr},fromJSON(yt){return{durationMs:Cr(yt.durationMs)?Number(yt.durationMs):0}},toJSON(yt){const Bt={};return yt.durationMs!==void 0&&(Bt.durationMs=Math.round(yt.durationMs)),Bt},fromPartial(yt){var Bt;const Zt=rt();return Zt.durationMs=(Bt=yt.durationMs)!==null&&Bt!==void 0?Bt:0,Zt}};function mt(){return{durationMs:0,direction:ur.TRANSITION_DIRECTION_UNSPECIFIED,combinedAnimation:_e.TRANSITION_SWIPE_TYPE_UNSPECIFIED}}a.Transition_TransitionSwipe={encode(yt,Bt=et.Writer.create()){return yt.durationMs!==0&&Bt.uint32(8).int32(yt.durationMs),yt.direction!==ur.TRANSITION_DIRECTION_UNSPECIFIED&&Bt.uint32(16).int32(ut(yt.direction)),yt.combinedAnimation!==_e.TRANSITION_SWIPE_TYPE_UNSPECIFIED&&Bt.uint32(24).int32(dt(yt.combinedAnimation)),Bt},decode(yt,Bt){const Zt=yt instanceof et.Reader?yt:new et.Reader(yt);let yr=Bt===void 0?Zt.len:Zt.pos+Bt;const fr=mt();for(;Zt.pos<yr;){const Rr=Zt.uint32();switch(Rr>>>3){case 1:fr.durationMs=Zt.int32();break;case 2:fr.direction=Ot(Zt.int32());break;case 3:fr.combinedAnimation=tt(Zt.int32());break;default:Zt.skipType(Rr&7);break}}return fr},fromJSON(yt){return{durationMs:Cr(yt.durationMs)?Number(yt.durationMs):0,direction:Cr(yt.direction)?Ot(yt.direction):ur.TRANSITION_DIRECTION_UNSPECIFIED,combinedAnimation:Cr(yt.combinedAnimation)?tt(yt.combinedAnimation):_e.TRANSITION_SWIPE_TYPE_UNSPECIFIED}},toJSON(yt){const Bt={};return yt.durationMs!==void 0&&(Bt.durationMs=Math.round(yt.durationMs)),yt.direction!==void 0&&(Bt.direction=It(yt.direction)),yt.combinedAnimation!==void 0&&(Bt.combinedAnimation=it(yt.combinedAnimation)),Bt},fromPartial(yt){var Bt,Zt,yr;const fr=mt();return fr.durationMs=(Bt=yt.durationMs)!==null&&Bt!==void 0?Bt:0,fr.direction=(Zt=yt.direction)!==null&&Zt!==void 0?Zt:ur.TRANSITION_DIRECTION_UNSPECIFIED,fr.combinedAnimation=(yr=yt.combinedAnimation)!==null&&yr!==void 0?yr:_e.TRANSITION_SWIPE_TYPE_UNSPECIFIED,fr}};function Lt(){return{cutPointMs:0,media:void 0}}a.Transition_TransitionStingerCut={encode(yt,Bt=et.Writer.create()){return yt.cutPointMs!==0&&Bt.uint32(8).int32(yt.cutPointMs),yt.media!==void 0&&a.Transition_TransitionMediaType.encode(yt.media,Bt.uint32(18).fork()).ldelim(),Bt},decode(yt,Bt){const Zt=yt instanceof et.Reader?yt:new et.Reader(yt);let yr=Bt===void 0?Zt.len:Zt.pos+Bt;const fr=Lt();for(;Zt.pos<yr;){const Rr=Zt.uint32();switch(Rr>>>3){case 1:fr.cutPointMs=Zt.int32();break;case 2:fr.media=a.Transition_TransitionMediaType.decode(Zt,Zt.uint32());break;default:Zt.skipType(Rr&7);break}}return fr},fromJSON(yt){return{cutPointMs:Cr(yt.cutPointMs)?Number(yt.cutPointMs):0,media:Cr(yt.media)?a.Transition_TransitionMediaType.fromJSON(yt.media):void 0}},toJSON(yt){const Bt={};return yt.cutPointMs!==void 0&&(Bt.cutPointMs=Math.round(yt.cutPointMs)),yt.media!==void 0&&(Bt.media=yt.media?a.Transition_TransitionMediaType.toJSON(yt.media):void 0),Bt},fromPartial(yt){var Bt;const Zt=Lt();return Zt.cutPointMs=(Bt=yt.cutPointMs)!==null&&Bt!==void 0?Bt:0,Zt.media=yt.media!==void 0&&yt.media!==null?a.Transition_TransitionMediaType.fromPartial(yt.media):void 0,Zt}};function Gt(){return{cut:void 0}}a.Transition_TransitionStinger={encode(yt,Bt=et.Writer.create()){return yt.cut!==void 0&&a.Transition_TransitionStingerCut.encode(yt.cut,Bt.uint32(10).fork()).ldelim(),Bt},decode(yt,Bt){const Zt=yt instanceof et.Reader?yt:new et.Reader(yt);let yr=Bt===void 0?Zt.len:Zt.pos+Bt;const fr=Gt();for(;Zt.pos<yr;){const Rr=Zt.uint32();switch(Rr>>>3){case 1:fr.cut=a.Transition_TransitionStingerCut.decode(Zt,Zt.uint32());break;default:Zt.skipType(Rr&7);break}}return fr},fromJSON(yt){return{cut:Cr(yt.cut)?a.Transition_TransitionStingerCut.fromJSON(yt.cut):void 0}},toJSON(yt){const Bt={};return yt.cut!==void 0&&(Bt.cut=yt.cut?a.Transition_TransitionStingerCut.toJSON(yt.cut):void 0),Bt},fromPartial(yt){const Bt=Gt();return Bt.cut=yt.cut!==void 0&&yt.cut!==null?a.Transition_TransitionStingerCut.fromPartial(yt.cut):void 0,Bt}};function rr(){return{id:"",width:0,height:0,metadata:void 0,projectId:void 0,collectionId:void 0,type:void 0,transitions:[],requestMetadata:void 0}}a.Layout={encode(yt,Bt=et.Writer.create()){yt.id!==""&&Bt.uint32(10).string(yt.id),yt.width!==0&&Bt.uint32(16).int32(yt.width),yt.height!==0&&Bt.uint32(24).int32(yt.height),yt.metadata!==void 0&&nt.Value.encode(nt.Value.wrap(yt.metadata),Bt.uint32(50).fork()).ldelim(),yt.projectId!==void 0&&Bt.uint32(58).string(yt.projectId),yt.collectionId!==void 0&&Bt.uint32(66).string(yt.collectionId),yt.type!==void 0&&Bt.uint32(72).int32(_t(yt.type));for(const Zt of yt.transitions)a.Transition.encode(Zt,Bt.uint32(82).fork()).ldelim();return yt.requestMetadata!==void 0&&nt.Value.encode(nt.Value.wrap(yt.requestMetadata),Bt.uint32(810).fork()).ldelim(),Bt},decode(yt,Bt){const Zt=yt instanceof et.Reader?yt:new et.Reader(yt);let yr=Bt===void 0?Zt.len:Zt.pos+Bt;const fr=rr();for(;Zt.pos<yr;){const Rr=Zt.uint32();switch(Rr>>>3){case 1:fr.id=Zt.string();break;case 2:fr.width=Zt.int32();break;case 3:fr.height=Zt.int32();break;case 6:fr.metadata=nt.Value.unwrap(nt.Value.decode(Zt,Zt.uint32()));break;case 7:fr.projectId=Zt.string();break;case 8:fr.collectionId=Zt.string();break;case 9:fr.type=ht(Zt.int32());break;case 10:fr.transitions.push(a.Transition.decode(Zt,Zt.uint32()));break;case 101:fr.requestMetadata=nt.Value.unwrap(nt.Value.decode(Zt,Zt.uint32()));break;default:Zt.skipType(Rr&7);break}}return fr},fromJSON(yt){return{id:Cr(yt.id)?String(yt.id):"",width:Cr(yt.width)?Number(yt.width):0,height:Cr(yt.height)?Number(yt.height):0,metadata:Cr(yt==null?void 0:yt.metadata)?yt.metadata:void 0,projectId:Cr(yt.projectId)?String(yt.projectId):void 0,collectionId:Cr(yt.collectionId)?String(yt.collectionId):void 0,type:Cr(yt.type)?ht(yt.type):void 0,transitions:Array.isArray(yt==null?void 0:yt.transitions)?yt.transitions.map(Bt=>a.Transition.fromJSON(Bt)):[],requestMetadata:Cr(yt==null?void 0:yt.requestMetadata)?yt.requestMetadata:void 0}},toJSON(yt){const Bt={};return yt.id!==void 0&&(Bt.id=yt.id),yt.width!==void 0&&(Bt.width=Math.round(yt.width)),yt.height!==void 0&&(Bt.height=Math.round(yt.height)),yt.metadata!==void 0&&(Bt.metadata=yt.metadata),yt.projectId!==void 0&&(Bt.projectId=yt.projectId),yt.collectionId!==void 0&&(Bt.collectionId=yt.collectionId),yt.type!==void 0&&(Bt.type=yt.type!==void 0?vt(yt.type):void 0),yt.transitions?Bt.transitions=yt.transitions.map(Zt=>Zt?a.Transition.toJSON(Zt):void 0):Bt.transitions=[],yt.requestMetadata!==void 0&&(Bt.requestMetadata=yt.requestMetadata),Bt},fromPartial(yt){var Bt,Zt,yr,fr,Rr,Nr,xr,Xr,Ar;const Br=rr();return Br.id=(Bt=yt.id)!==null&&Bt!==void 0?Bt:"",Br.width=(Zt=yt.width)!==null&&Zt!==void 0?Zt:0,Br.height=(yr=yt.height)!==null&&yr!==void 0?yr:0,Br.metadata=(fr=yt.metadata)!==null&&fr!==void 0?fr:void 0,Br.projectId=(Rr=yt.projectId)!==null&&Rr!==void 0?Rr:void 0,Br.collectionId=(Nr=yt.collectionId)!==null&&Nr!==void 0?Nr:void 0,Br.type=(xr=yt.type)!==null&&xr!==void 0?xr:void 0,Br.transitions=((Xr=yt.transitions)===null||Xr===void 0?void 0:Xr.map(rn=>a.Transition.fromPartial(rn)))||[],Br.requestMetadata=(Ar=yt.requestMetadata)!==null&&Ar!==void 0?Ar:void 0,Br}};function ir(){return{type:"",data:void 0,x:void 0,y:void 0,width:void 0,height:void 0,rotation:0,opacity:0,scale:0,hidden:!1,children:void 0,metadata:void 0,id:"",layoutId:"",requestMetadata:void 0,requestAnimation:[]}}a.Layer={encode(yt,Bt=et.Writer.create()){yt.type!==""&&Bt.uint32(10).string(yt.type),yt.data!==void 0&&nt.Struct.encode(nt.Struct.wrap(yt.data),Bt.uint32(18).fork()).ldelim(),yt.x!==void 0&&nt.Value.encode(nt.Value.wrap(yt.x),Bt.uint32(26).fork()).ldelim(),yt.y!==void 0&&nt.Value.encode(nt.Value.wrap(yt.y),Bt.uint32(34).fork()).ldelim(),yt.width!==void 0&&nt.Value.encode(nt.Value.wrap(yt.width),Bt.uint32(42).fork()).ldelim(),yt.height!==void 0&&nt.Value.encode(nt.Value.wrap(yt.height),Bt.uint32(50).fork()).ldelim(),yt.rotation!==0&&Bt.uint32(57).double(yt.rotation),yt.opacity!==0&&Bt.uint32(65).double(yt.opacity),yt.scale!==0&&Bt.uint32(73).double(yt.scale),yt.hidden===!0&&Bt.uint32(80).bool(yt.hidden),yt.children!==void 0&&nt.ListValue.encode(nt.ListValue.wrap(yt.children),Bt.uint32(98).fork()).ldelim(),yt.metadata!==void 0&&nt.Value.encode(nt.Value.wrap(yt.metadata),Bt.uint32(114).fork()).ldelim(),yt.id!==""&&Bt.uint32(802).string(yt.id),yt.layoutId!==""&&Bt.uint32(818).string(yt.layoutId),yt.requestMetadata!==void 0&&nt.Value.encode(nt.Value.wrap(yt.requestMetadata),Bt.uint32(810).fork()).ldelim();for(const Zt of yt.requestAnimation)a.LayerAnimation.encode(Zt,Bt.uint32(826).fork()).ldelim();return Bt},decode(yt,Bt){const Zt=yt instanceof et.Reader?yt:new et.Reader(yt);let yr=Bt===void 0?Zt.len:Zt.pos+Bt;const fr=ir();for(;Zt.pos<yr;){const Rr=Zt.uint32();switch(Rr>>>3){case 1:fr.type=Zt.string();break;case 2:fr.data=nt.Struct.unwrap(nt.Struct.decode(Zt,Zt.uint32()));break;case 3:fr.x=nt.Value.unwrap(nt.Value.decode(Zt,Zt.uint32()));break;case 4:fr.y=nt.Value.unwrap(nt.Value.decode(Zt,Zt.uint32()));break;case 5:fr.width=nt.Value.unwrap(nt.Value.decode(Zt,Zt.uint32()));break;case 6:fr.height=nt.Value.unwrap(nt.Value.decode(Zt,Zt.uint32()));break;case 7:fr.rotation=Zt.double();break;case 8:fr.opacity=Zt.double();break;case 9:fr.scale=Zt.double();break;case 10:fr.hidden=Zt.bool();break;case 12:fr.children=nt.ListValue.unwrap(nt.ListValue.decode(Zt,Zt.uint32()));break;case 14:fr.metadata=nt.Value.unwrap(nt.Value.decode(Zt,Zt.uint32()));break;case 100:fr.id=Zt.string();break;case 102:fr.layoutId=Zt.string();break;case 101:fr.requestMetadata=nt.Value.unwrap(nt.Value.decode(Zt,Zt.uint32()));break;case 103:fr.requestAnimation.push(a.LayerAnimation.decode(Zt,Zt.uint32()));break;default:Zt.skipType(Rr&7);break}}return fr},fromJSON(yt){return{type:Cr(yt.type)?String(yt.type):"",data:Or(yt.data)?yt.data:void 0,x:Cr(yt==null?void 0:yt.x)?yt.x:void 0,y:Cr(yt==null?void 0:yt.y)?yt.y:void 0,width:Cr(yt==null?void 0:yt.width)?yt.width:void 0,height:Cr(yt==null?void 0:yt.height)?yt.height:void 0,rotation:Cr(yt.rotation)?Number(yt.rotation):0,opacity:Cr(yt.opacity)?Number(yt.opacity):0,scale:Cr(yt.scale)?Number(yt.scale):0,hidden:Cr(yt.hidden)?!!yt.hidden:!1,children:Array.isArray(yt.children)?[...yt.children]:void 0,metadata:Cr(yt==null?void 0:yt.metadata)?yt.metadata:void 0,id:Cr(yt.id)?String(yt.id):"",layoutId:Cr(yt.layoutId)?String(yt.layoutId):"",requestMetadata:Cr(yt==null?void 0:yt.requestMetadata)?yt.requestMetadata:void 0,requestAnimation:Array.isArray(yt==null?void 0:yt.requestAnimation)?yt.requestAnimation.map(Bt=>a.LayerAnimation.fromJSON(Bt)):[]}},toJSON(yt){const Bt={};return yt.type!==void 0&&(Bt.type=yt.type),yt.data!==void 0&&(Bt.data=yt.data),yt.x!==void 0&&(Bt.x=yt.x),yt.y!==void 0&&(Bt.y=yt.y),yt.width!==void 0&&(Bt.width=yt.width),yt.height!==void 0&&(Bt.height=yt.height),yt.rotation!==void 0&&(Bt.rotation=yt.rotation),yt.opacity!==void 0&&(Bt.opacity=yt.opacity),yt.scale!==void 0&&(Bt.scale=yt.scale),yt.hidden!==void 0&&(Bt.hidden=yt.hidden),yt.children!==void 0&&(Bt.children=yt.children),yt.metadata!==void 0&&(Bt.metadata=yt.metadata),yt.id!==void 0&&(Bt.id=yt.id),yt.layoutId!==void 0&&(Bt.layoutId=yt.layoutId),yt.requestMetadata!==void 0&&(Bt.requestMetadata=yt.requestMetadata),yt.requestAnimation?Bt.requestAnimation=yt.requestAnimation.map(Zt=>Zt?a.LayerAnimation.toJSON(Zt):void 0):Bt.requestAnimation=[],Bt},fromPartial(yt){var Bt,Zt,yr,fr,Rr,Nr,xr,Xr,Ar,Br,rn,Dr,qr,nn,$r,Lr;const Qr=ir();return Qr.type=(Bt=yt.type)!==null&&Bt!==void 0?Bt:"",Qr.data=(Zt=yt.data)!==null&&Zt!==void 0?Zt:void 0,Qr.x=(yr=yt.x)!==null&&yr!==void 0?yr:void 0,Qr.y=(fr=yt.y)!==null&&fr!==void 0?fr:void 0,Qr.width=(Rr=yt.width)!==null&&Rr!==void 0?Rr:void 0,Qr.height=(Nr=yt.height)!==null&&Nr!==void 0?Nr:void 0,Qr.rotation=(xr=yt.rotation)!==null&&xr!==void 0?xr:0,Qr.opacity=(Xr=yt.opacity)!==null&&Xr!==void 0?Xr:0,Qr.scale=(Ar=yt.scale)!==null&&Ar!==void 0?Ar:0,Qr.hidden=(Br=yt.hidden)!==null&&Br!==void 0?Br:!1,Qr.children=(rn=yt.children)!==null&&rn!==void 0?rn:void 0,Qr.metadata=(Dr=yt.metadata)!==null&&Dr!==void 0?Dr:void 0,Qr.id=(qr=yt.id)!==null&&qr!==void 0?qr:"",Qr.layoutId=(nn=yt.layoutId)!==null&&nn!==void 0?nn:"",Qr.requestMetadata=($r=yt.requestMetadata)!==null&&$r!==void 0?$r:void 0,Qr.requestAnimation=((Lr=yt.requestAnimation)===null||Lr===void 0?void 0:Lr.map(Ur=>a.LayerAnimation.fromPartial(Ur)))||[],Qr}};function Wt(){return{layoutId:"",layerId:"",payload:void 0}}a.DeleteLayerRequest={encode(yt,Bt=et.Writer.create()){return yt.layoutId!==""&&Bt.uint32(10).string(yt.layoutId),yt.layerId!==""&&Bt.uint32(18).string(yt.layerId),yt.payload!==void 0&&a.DeleteLayerPayload.encode(yt.payload,Bt.uint32(26).fork()).ldelim(),Bt},decode(yt,Bt){const Zt=yt instanceof et.Reader?yt:new et.Reader(yt);let yr=Bt===void 0?Zt.len:Zt.pos+Bt;const fr=Wt();for(;Zt.pos<yr;){const Rr=Zt.uint32();switch(Rr>>>3){case 1:fr.layoutId=Zt.string();break;case 2:fr.layerId=Zt.string();break;case 3:fr.payload=a.DeleteLayerPayload.decode(Zt,Zt.uint32());break;default:Zt.skipType(Rr&7);break}}return fr},fromJSON(yt){return{layoutId:Cr(yt.layoutId)?String(yt.layoutId):"",layerId:Cr(yt.layerId)?String(yt.layerId):"",payload:Cr(yt.payload)?a.DeleteLayerPayload.fromJSON(yt.payload):void 0}},toJSON(yt){const Bt={};return yt.layoutId!==void 0&&(Bt.layoutId=yt.layoutId),yt.layerId!==void 0&&(Bt.layerId=yt.layerId),yt.payload!==void 0&&(Bt.payload=yt.payload?a.DeleteLayerPayload.toJSON(yt.payload):void 0),Bt},fromPartial(yt){var Bt,Zt;const yr=Wt();return yr.layoutId=(Bt=yt.layoutId)!==null&&Bt!==void 0?Bt:"",yr.layerId=(Zt=yt.layerId)!==null&&Zt!==void 0?Zt:"",yr.payload=yt.payload!==void 0&&yt.payload!==null?a.DeleteLayerPayload.fromPartial(yt.payload):void 0,yr}};function zt(){return{id:"",layoutId:"",requestMetadata:void 0}}a.DeleteLayerResponse={encode(yt,Bt=et.Writer.create()){return yt.id!==""&&Bt.uint32(10).string(yt.id),yt.layoutId!==""&&Bt.uint32(18).string(yt.layoutId),yt.requestMetadata!==void 0&&nt.Value.encode(nt.Value.wrap(yt.requestMetadata),Bt.uint32(802).fork()).ldelim(),Bt},decode(yt,Bt){const Zt=yt instanceof et.Reader?yt:new et.Reader(yt);let yr=Bt===void 0?Zt.len:Zt.pos+Bt;const fr=zt();for(;Zt.pos<yr;){const Rr=Zt.uint32();switch(Rr>>>3){case 1:fr.id=Zt.string();break;case 2:fr.layoutId=Zt.string();break;case 100:fr.requestMetadata=nt.Value.unwrap(nt.Value.decode(Zt,Zt.uint32()));break;default:Zt.skipType(Rr&7);break}}return fr},fromJSON(yt){return{id:Cr(yt.id)?String(yt.id):"",layoutId:Cr(yt.layoutId)?String(yt.layoutId):"",requestMetadata:Cr(yt==null?void 0:yt.requestMetadata)?yt.requestMetadata:void 0}},toJSON(yt){const Bt={};return yt.id!==void 0&&(Bt.id=yt.id),yt.layoutId!==void 0&&(Bt.layoutId=yt.layoutId),yt.requestMetadata!==void 0&&(Bt.requestMetadata=yt.requestMetadata),Bt},fromPartial(yt){var Bt,Zt,yr;const fr=zt();return fr.id=(Bt=yt.id)!==null&&Bt!==void 0?Bt:"",fr.layoutId=(Zt=yt.layoutId)!==null&&Zt!==void 0?Zt:"",fr.requestMetadata=(yr=yt.requestMetadata)!==null&&yr!==void 0?yr:void 0,fr}};function wt(){return{layers:[],layoutId:"",requestMetadata:void 0,requestAnimationMode:kt.REQUEST_ANIMATION_MODE_UNSPECIFIED}}a.BatchLayerResponse={encode(yt,Bt=et.Writer.create()){for(const Zt of yt.layers)a.BatchLayerResponse_BatchLayerItem.encode(Zt,Bt.uint32(18).fork()).ldelim();return yt.layoutId!==""&&Bt.uint32(26).string(yt.layoutId),yt.requestMetadata!==void 0&&nt.Value.encode(nt.Value.wrap(yt.requestMetadata),Bt.uint32(802).fork()).ldelim(),yt.requestAnimationMode!==kt.REQUEST_ANIMATION_MODE_UNSPECIFIED&&Bt.uint32(808).int32(At(yt.requestAnimationMode)),Bt},decode(yt,Bt){const Zt=yt instanceof et.Reader?yt:new et.Reader(yt);let yr=Bt===void 0?Zt.len:Zt.pos+Bt;const fr=wt();for(;Zt.pos<yr;){const Rr=Zt.uint32();switch(Rr>>>3){case 2:fr.layers.push(a.BatchLayerResponse_BatchLayerItem.decode(Zt,Zt.uint32()));break;case 3:fr.layoutId=Zt.string();break;case 100:fr.requestMetadata=nt.Value.unwrap(nt.Value.decode(Zt,Zt.uint32()));break;case 101:fr.requestAnimationMode=$t(Zt.int32());break;default:Zt.skipType(Rr&7);break}}return fr},fromJSON(yt){return{layers:Array.isArray(yt==null?void 0:yt.layers)?yt.layers.map(Bt=>a.BatchLayerResponse_BatchLayerItem.fromJSON(Bt)):[],layoutId:Cr(yt.layoutId)?String(yt.layoutId):"",requestMetadata:Cr(yt==null?void 0:yt.requestMetadata)?yt.requestMetadata:void 0,requestAnimationMode:Cr(yt.requestAnimationMode)?$t(yt.requestAnimationMode):kt.REQUEST_ANIMATION_MODE_UNSPECIFIED}},toJSON(yt){const Bt={};return yt.layers?Bt.layers=yt.layers.map(Zt=>Zt?a.BatchLayerResponse_BatchLayerItem.toJSON(Zt):void 0):Bt.layers=[],yt.layoutId!==void 0&&(Bt.layoutId=yt.layoutId),yt.requestMetadata!==void 0&&(Bt.requestMetadata=yt.requestMetadata),yt.requestAnimationMode!==void 0&&(Bt.requestAnimationMode=Tt(yt.requestAnimationMode)),Bt},fromPartial(yt){var Bt,Zt,yr,fr;const Rr=wt();return Rr.layers=((Bt=yt.layers)===null||Bt===void 0?void 0:Bt.map(Nr=>a.BatchLayerResponse_BatchLayerItem.fromPartial(Nr)))||[],Rr.layoutId=(Zt=yt.layoutId)!==null&&Zt!==void 0?Zt:"",Rr.requestMetadata=(yr=yt.requestMetadata)!==null&&yr!==void 0?yr:void 0,Rr.requestAnimationMode=(fr=yt.requestAnimationMode)!==null&&fr!==void 0?fr:kt.REQUEST_ANIMATION_MODE_UNSPECIFIED,Rr}};function Vt(){return{create:void 0,update:void 0,delete:void 0}}a.BatchLayerResponse_BatchLayerItem={encode(yt,Bt=et.Writer.create()){return yt.create!==void 0&&a.Layer.encode(yt.create,Bt.uint32(10).fork()).ldelim(),yt.update!==void 0&&a.Layer.encode(yt.update,Bt.uint32(18).fork()).ldelim(),yt.delete!==void 0&&a.DeleteLayerResponse.encode(yt.delete,Bt.uint32(26).fork()).ldelim(),Bt},decode(yt,Bt){const Zt=yt instanceof et.Reader?yt:new et.Reader(yt);let yr=Bt===void 0?Zt.len:Zt.pos+Bt;const fr=Vt();for(;Zt.pos<yr;){const Rr=Zt.uint32();switch(Rr>>>3){case 1:fr.create=a.Layer.decode(Zt,Zt.uint32());break;case 2:fr.update=a.Layer.decode(Zt,Zt.uint32());break;case 3:fr.delete=a.DeleteLayerResponse.decode(Zt,Zt.uint32());break;default:Zt.skipType(Rr&7);break}}return fr},fromJSON(yt){return{create:Cr(yt.create)?a.Layer.fromJSON(yt.create):void 0,update:Cr(yt.update)?a.Layer.fromJSON(yt.update):void 0,delete:Cr(yt.delete)?a.DeleteLayerResponse.fromJSON(yt.delete):void 0}},toJSON(yt){const Bt={};return yt.create!==void 0&&(Bt.create=yt.create?a.Layer.toJSON(yt.create):void 0),yt.update!==void 0&&(Bt.update=yt.update?a.Layer.toJSON(yt.update):void 0),yt.delete!==void 0&&(Bt.delete=yt.delete?a.DeleteLayerResponse.toJSON(yt.delete):void 0),Bt},fromPartial(yt){const Bt=Vt();return Bt.create=yt.create!==void 0&&yt.create!==null?a.Layer.fromPartial(yt.create):void 0,Bt.update=yt.update!==void 0&&yt.update!==null?a.Layer.fromPartial(yt.update):void 0,Bt.delete=yt.delete!==void 0&&yt.delete!==null?a.DeleteLayerResponse.fromPartial(yt.delete):void 0,Bt}};function Qt(){return{width:void 0,height:void 0,metadata:void 0,projectId:void 0,collectionId:void 0,type:void 0,transitions:[],requestMetadata:void 0}}a.PartialLayout={encode(yt,Bt=et.Writer.create()){yt.width!==void 0&&Bt.uint32(16).int32(yt.width),yt.height!==void 0&&Bt.uint32(24).int32(yt.height),yt.metadata!==void 0&&nt.Value.encode(nt.Value.wrap(yt.metadata),Bt.uint32(50).fork()).ldelim(),yt.projectId!==void 0&&Bt.uint32(58).string(yt.projectId),yt.collectionId!==void 0&&Bt.uint32(66).string(yt.collectionId),yt.type!==void 0&&Bt.uint32(72).int32(_t(yt.type));for(const Zt of yt.transitions)a.Transition.encode(Zt,Bt.uint32(82).fork()).ldelim();return yt.requestMetadata!==void 0&&nt.Value.encode(nt.Value.wrap(yt.requestMetadata),Bt.uint32(810).fork()).ldelim(),Bt},decode(yt,Bt){const Zt=yt instanceof et.Reader?yt:new et.Reader(yt);let yr=Bt===void 0?Zt.len:Zt.pos+Bt;const fr=Qt();for(;Zt.pos<yr;){const Rr=Zt.uint32();switch(Rr>>>3){case 2:fr.width=Zt.int32();break;case 3:fr.height=Zt.int32();break;case 6:fr.metadata=nt.Value.unwrap(nt.Value.decode(Zt,Zt.uint32()));break;case 7:fr.projectId=Zt.string();break;case 8:fr.collectionId=Zt.string();break;case 9:fr.type=ht(Zt.int32());break;case 10:fr.transitions.push(a.Transition.decode(Zt,Zt.uint32()));break;case 101:fr.requestMetadata=nt.Value.unwrap(nt.Value.decode(Zt,Zt.uint32()));break;default:Zt.skipType(Rr&7);break}}return fr},fromJSON(yt){return{width:Cr(yt.width)?Number(yt.width):void 0,height:Cr(yt.height)?Number(yt.height):void 0,metadata:Cr(yt==null?void 0:yt.metadata)?yt.metadata:void 0,projectId:Cr(yt.projectId)?String(yt.projectId):void 0,collectionId:Cr(yt.collectionId)?String(yt.collectionId):void 0,type:Cr(yt.type)?ht(yt.type):void 0,transitions:Array.isArray(yt==null?void 0:yt.transitions)?yt.transitions.map(Bt=>a.Transition.fromJSON(Bt)):[],requestMetadata:Cr(yt==null?void 0:yt.requestMetadata)?yt.requestMetadata:void 0}},toJSON(yt){const Bt={};return yt.width!==void 0&&(Bt.width=Math.round(yt.width)),yt.height!==void 0&&(Bt.height=Math.round(yt.height)),yt.metadata!==void 0&&(Bt.metadata=yt.metadata),yt.projectId!==void 0&&(Bt.projectId=yt.projectId),yt.collectionId!==void 0&&(Bt.collectionId=yt.collectionId),yt.type!==void 0&&(Bt.type=yt.type!==void 0?vt(yt.type):void 0),yt.transitions?Bt.transitions=yt.transitions.map(Zt=>Zt?a.Transition.toJSON(Zt):void 0):Bt.transitions=[],yt.requestMetadata!==void 0&&(Bt.requestMetadata=yt.requestMetadata),Bt},fromPartial(yt){var Bt,Zt,yr,fr,Rr,Nr,xr,Xr;const Ar=Qt();return Ar.width=(Bt=yt.width)!==null&&Bt!==void 0?Bt:void 0,Ar.height=(Zt=yt.height)!==null&&Zt!==void 0?Zt:void 0,Ar.metadata=(yr=yt.metadata)!==null&&yr!==void 0?yr:void 0,Ar.projectId=(fr=yt.projectId)!==null&&fr!==void 0?fr:void 0,Ar.collectionId=(Rr=yt.collectionId)!==null&&Rr!==void 0?Rr:void 0,Ar.type=(Nr=yt.type)!==null&&Nr!==void 0?Nr:void 0,Ar.transitions=((xr=yt.transitions)===null||xr===void 0?void 0:xr.map(Br=>a.Transition.fromPartial(Br)))||[],Ar.requestMetadata=(Xr=yt.requestMetadata)!==null&&Xr!==void 0?Xr:void 0,Ar}};function Nt(){return{projectId:void 0,collectionId:void 0,type:void 0}}a.ListLayoutsRequest={encode(yt,Bt=et.Writer.create()){return yt.projectId!==void 0&&Bt.uint32(10).string(yt.projectId),yt.collectionId!==void 0&&Bt.uint32(18).string(yt.collectionId),yt.type!==void 0&&Bt.uint32(24).int32(_t(yt.type)),Bt},decode(yt,Bt){const Zt=yt instanceof et.Reader?yt:new et.Reader(yt);let yr=Bt===void 0?Zt.len:Zt.pos+Bt;const fr=Nt();for(;Zt.pos<yr;){const Rr=Zt.uint32();switch(Rr>>>3){case 1:fr.projectId=Zt.string();break;case 2:fr.collectionId=Zt.string();break;case 3:fr.type=ht(Zt.int32());break;default:Zt.skipType(Rr&7);break}}return fr},fromJSON(yt){return{projectId:Cr(yt.projectId)?String(yt.projectId):void 0,collectionId:Cr(yt.collectionId)?String(yt.collectionId):void 0,type:Cr(yt.type)?ht(yt.type):void 0}},toJSON(yt){const Bt={};return yt.projectId!==void 0&&(Bt.projectId=yt.projectId),yt.collectionId!==void 0&&(Bt.collectionId=yt.collectionId),yt.type!==void 0&&(Bt.type=yt.type!==void 0?vt(yt.type):void 0),Bt},fromPartial(yt){var Bt,Zt,yr;const fr=Nt();return fr.projectId=(Bt=yt.projectId)!==null&&Bt!==void 0?Bt:void 0,fr.collectionId=(Zt=yt.collectionId)!==null&&Zt!==void 0?Zt:void 0,fr.type=(yr=yt.type)!==null&&yr!==void 0?yr:void 0,fr}};function st(){return{layouts:[]}}a.ListLayoutsResponse={encode(yt,Bt=et.Writer.create()){for(const Zt of yt.layouts)a.Layout.encode(Zt,Bt.uint32(10).fork()).ldelim();return Bt},decode(yt,Bt){const Zt=yt instanceof et.Reader?yt:new et.Reader(yt);let yr=Bt===void 0?Zt.len:Zt.pos+Bt;const fr=st();for(;Zt.pos<yr;){const Rr=Zt.uint32();switch(Rr>>>3){case 1:fr.layouts.push(a.Layout.decode(Zt,Zt.uint32()));break;default:Zt.skipType(Rr&7);break}}return fr},fromJSON(yt){return{layouts:Array.isArray(yt==null?void 0:yt.layouts)?yt.layouts.map(Bt=>a.Layout.fromJSON(Bt)):[]}},toJSON(yt){const Bt={};return yt.layouts?Bt.layouts=yt.layouts.map(Zt=>Zt?a.Layout.toJSON(Zt):void 0):Bt.layouts=[],Bt},fromPartial(yt){var Bt;const Zt=st();return Zt.layouts=((Bt=yt.layouts)===null||Bt===void 0?void 0:Bt.map(yr=>a.Layout.fromPartial(yr)))||[],Zt}};function Ct(){return{layout:void 0}}a.CreateLayoutRequest={encode(yt,Bt=et.Writer.create()){return yt.layout!==void 0&&a.PartialLayout.encode(yt.layout,Bt.uint32(18).fork()).ldelim(),Bt},decode(yt,Bt){const Zt=yt instanceof et.Reader?yt:new et.Reader(yt);let yr=Bt===void 0?Zt.len:Zt.pos+Bt;const fr=Ct();for(;Zt.pos<yr;){const Rr=Zt.uint32();switch(Rr>>>3){case 2:fr.layout=a.PartialLayout.decode(Zt,Zt.uint32());break;default:Zt.skipType(Rr&7);break}}return fr},fromJSON(yt){return{layout:Cr(yt.layout)?a.PartialLayout.fromJSON(yt.layout):void 0}},toJSON(yt){const Bt={};return yt.layout!==void 0&&(Bt.layout=yt.layout?a.PartialLayout.toJSON(yt.layout):void 0),Bt},fromPartial(yt){const Bt=Ct();return Bt.layout=yt.layout!==void 0&&yt.layout!==null?a.PartialLayout.fromPartial(yt.layout):void 0,Bt}};function qt(){return{layoutId:""}}a.GetLayoutRequest={encode(yt,Bt=et.Writer.create()){return yt.layoutId!==""&&Bt.uint32(10).string(yt.layoutId),Bt},decode(yt,Bt){const Zt=yt instanceof et.Reader?yt:new et.Reader(yt);let yr=Bt===void 0?Zt.len:Zt.pos+Bt;const fr=qt();for(;Zt.pos<yr;){const Rr=Zt.uint32();switch(Rr>>>3){case 1:fr.layoutId=Zt.string();break;default:Zt.skipType(Rr&7);break}}return fr},fromJSON(yt){return{layoutId:Cr(yt.layoutId)?String(yt.layoutId):""}},toJSON(yt){const Bt={};return yt.layoutId!==void 0&&(Bt.layoutId=yt.layoutId),Bt},fromPartial(yt){var Bt;const Zt=qt();return Zt.layoutId=(Bt=yt.layoutId)!==null&&Bt!==void 0?Bt:"",Zt}};function cr(){return{layoutId:"",layout:void 0}}a.UpdateLayoutRequest={encode(yt,Bt=et.Writer.create()){return yt.layoutId!==""&&Bt.uint32(10).string(yt.layoutId),yt.layout!==void 0&&a.PartialLayout.encode(yt.layout,Bt.uint32(26).fork()).ldelim(),Bt},decode(yt,Bt){const Zt=yt instanceof et.Reader?yt:new et.Reader(yt);let yr=Bt===void 0?Zt.len:Zt.pos+Bt;const fr=cr();for(;Zt.pos<yr;){const Rr=Zt.uint32();switch(Rr>>>3){case 1:fr.layoutId=Zt.string();break;case 3:fr.layout=a.PartialLayout.decode(Zt,Zt.uint32());break;default:Zt.skipType(Rr&7);break}}return fr},fromJSON(yt){return{layoutId:Cr(yt.layoutId)?String(yt.layoutId):"",layout:Cr(yt.layout)?a.PartialLayout.fromJSON(yt.layout):void 0}},toJSON(yt){const Bt={};return yt.layoutId!==void 0&&(Bt.layoutId=yt.layoutId),yt.layout!==void 0&&(Bt.layout=yt.layout?a.PartialLayout.toJSON(yt.layout):void 0),Bt},fromPartial(yt){var Bt;const Zt=cr();return Zt.layoutId=(Bt=yt.layoutId)!==null&&Bt!==void 0?Bt:"",Zt.layout=yt.layout!==void 0&&yt.layout!==null?a.PartialLayout.fromPartial(yt.layout):void 0,Zt}};function dr(){return{requestMetadata:void 0}}a.DeleteLayoutPayload={encode(yt,Bt=et.Writer.create()){return yt.requestMetadata!==void 0&&nt.Value.encode(nt.Value.wrap(yt.requestMetadata),Bt.uint32(802).fork()).ldelim(),Bt},decode(yt,Bt){const Zt=yt instanceof et.Reader?yt:new et.Reader(yt);let yr=Bt===void 0?Zt.len:Zt.pos+Bt;const fr=dr();for(;Zt.pos<yr;){const Rr=Zt.uint32();switch(Rr>>>3){case 100:fr.requestMetadata=nt.Value.unwrap(nt.Value.decode(Zt,Zt.uint32()));break;default:Zt.skipType(Rr&7);break}}return fr},fromJSON(yt){return{requestMetadata:Cr(yt==null?void 0:yt.requestMetadata)?yt.requestMetadata:void 0}},toJSON(yt){const Bt={};return yt.requestMetadata!==void 0&&(Bt.requestMetadata=yt.requestMetadata),Bt},fromPartial(yt){var Bt;const Zt=dr();return Zt.requestMetadata=(Bt=yt.requestMetadata)!==null&&Bt!==void 0?Bt:void 0,Zt}};function Er(){return{layoutId:"",payload:void 0}}a.DeleteLayoutRequest={encode(yt,Bt=et.Writer.create()){return yt.layoutId!==""&&Bt.uint32(10).string(yt.layoutId),yt.payload!==void 0&&a.DeleteLayoutPayload.encode(yt.payload,Bt.uint32(18).fork()).ldelim(),Bt},decode(yt,Bt){const Zt=yt instanceof et.Reader?yt:new et.Reader(yt);let yr=Bt===void 0?Zt.len:Zt.pos+Bt;const fr=Er();for(;Zt.pos<yr;){const Rr=Zt.uint32();switch(Rr>>>3){case 1:fr.layoutId=Zt.string();break;case 2:fr.payload=a.DeleteLayoutPayload.decode(Zt,Zt.uint32());break;default:Zt.skipType(Rr&7);break}}return fr},fromJSON(yt){return{layoutId:Cr(yt.layoutId)?String(yt.layoutId):"",payload:Cr(yt.payload)?a.DeleteLayoutPayload.fromJSON(yt.payload):void 0}},toJSON(yt){const Bt={};return yt.layoutId!==void 0&&(Bt.layoutId=yt.layoutId),yt.payload!==void 0&&(Bt.payload=yt.payload?a.DeleteLayoutPayload.toJSON(yt.payload):void 0),Bt},fromPartial(yt){var Bt;const Zt=Er();return Zt.layoutId=(Bt=yt.layoutId)!==null&&Bt!==void 0?Bt:"",Zt.payload=yt.payload!==void 0&&yt.payload!==null?a.DeleteLayoutPayload.fromPartial(yt.payload):void 0,Zt}};function Tr(){return{id:"",requestMetadata:void 0}}a.DeleteLayoutResponse={encode(yt,Bt=et.Writer.create()){return yt.id!==""&&Bt.uint32(18).string(yt.id),yt.requestMetadata!==void 0&&nt.Value.encode(nt.Value.wrap(yt.requestMetadata),Bt.uint32(802).fork()).ldelim(),Bt},decode(yt,Bt){const Zt=yt instanceof et.Reader?yt:new et.Reader(yt);let yr=Bt===void 0?Zt.len:Zt.pos+Bt;const fr=Tr();for(;Zt.pos<yr;){const Rr=Zt.uint32();switch(Rr>>>3){case 2:fr.id=Zt.string();break;case 100:fr.requestMetadata=nt.Value.unwrap(nt.Value.decode(Zt,Zt.uint32()));break;default:Zt.skipType(Rr&7);break}}return fr},fromJSON(yt){return{id:Cr(yt.id)?String(yt.id):"",requestMetadata:Cr(yt==null?void 0:yt.requestMetadata)?yt.requestMetadata:void 0}},toJSON(yt){const Bt={};return yt.id!==void 0&&(Bt.id=yt.id),yt.requestMetadata!==void 0&&(Bt.requestMetadata=yt.requestMetadata),Bt},fromPartial(yt){var Bt,Zt;const yr=Tr();return yr.id=(Bt=yt.id)!==null&&Bt!==void 0?Bt:"",yr.requestMetadata=(Zt=yt.requestMetadata)!==null&&Zt!==void 0?Zt:void 0,yr}};function gr(){return{properties:[],durationMs:0,delayMs:void 0,easingMode:void 0}}a.LayerAnimation={encode(yt,Bt=et.Writer.create()){for(const Zt of yt.properties)Bt.uint32(10).string(Zt);return yt.durationMs!==0&&Bt.uint32(16).int32(yt.durationMs),yt.delayMs!==void 0&&Bt.uint32(32).int32(yt.delayMs),yt.easingMode!==void 0&&Bt.uint32(42).string(yt.easingMode),Bt},decode(yt,Bt){const Zt=yt instanceof et.Reader?yt:new et.Reader(yt);let yr=Bt===void 0?Zt.len:Zt.pos+Bt;const fr=gr();for(;Zt.pos<yr;){const Rr=Zt.uint32();switch(Rr>>>3){case 1:fr.properties.push(Zt.string());break;case 2:fr.durationMs=Zt.int32();break;case 4:fr.delayMs=Zt.int32();break;case 5:fr.easingMode=Zt.string();break;default:Zt.skipType(Rr&7);break}}return fr},fromJSON(yt){return{properties:Array.isArray(yt==null?void 0:yt.properties)?yt.properties.map(Bt=>String(Bt)):[],durationMs:Cr(yt.durationMs)?Number(yt.durationMs):0,delayMs:Cr(yt.delayMs)?Number(yt.delayMs):void 0,easingMode:Cr(yt.easingMode)?String(yt.easingMode):void 0}},toJSON(yt){const Bt={};return yt.properties?Bt.properties=yt.properties.map(Zt=>Zt):Bt.properties=[],yt.durationMs!==void 0&&(Bt.durationMs=Math.round(yt.durationMs)),yt.delayMs!==void 0&&(Bt.delayMs=Math.round(yt.delayMs)),yt.easingMode!==void 0&&(Bt.easingMode=yt.easingMode),Bt},fromPartial(yt){var Bt,Zt,yr,fr;const Rr=gr();return Rr.properties=((Bt=yt.properties)===null||Bt===void 0?void 0:Bt.map(Nr=>Nr))||[],Rr.durationMs=(Zt=yt.durationMs)!==null&&Zt!==void 0?Zt:0,Rr.delayMs=(yr=yt.delayMs)!==null&&yr!==void 0?yr:void 0,Rr.easingMode=(fr=yt.easingMode)!==null&&fr!==void 0?fr:void 0,Rr}};function Zr(){return{type:void 0,data:void 0,x:void 0,y:void 0,width:void 0,height:void 0,rotation:void 0,opacity:void 0,scale:void 0,hidden:void 0,children:void 0,parentId:void 0,metadata:void 0,requestMetadata:void 0,requestAnimation:[]}}a.PartialLayer={encode(yt,Bt=et.Writer.create()){yt.type!==void 0&&Bt.uint32(10).string(yt.type),yt.data!==void 0&&nt.Struct.encode(nt.Struct.wrap(yt.data),Bt.uint32(18).fork()).ldelim(),yt.x!==void 0&&nt.Value.encode(nt.Value.wrap(yt.x),Bt.uint32(26).fork()).ldelim(),yt.y!==void 0&&nt.Value.encode(nt.Value.wrap(yt.y),Bt.uint32(34).fork()).ldelim(),yt.width!==void 0&&nt.Value.encode(nt.Value.wrap(yt.width),Bt.uint32(42).fork()).ldelim(),yt.height!==void 0&&nt.Value.encode(nt.Value.wrap(yt.height),Bt.uint32(50).fork()).ldelim(),yt.rotation!==void 0&&Bt.uint32(57).double(yt.rotation),yt.opacity!==void 0&&Bt.uint32(65).double(yt.opacity),yt.scale!==void 0&&Bt.uint32(73).double(yt.scale),yt.hidden!==void 0&&Bt.uint32(80).bool(yt.hidden),yt.children!==void 0&&nt.ListValue.encode(nt.ListValue.wrap(yt.children),Bt.uint32(98).fork()).ldelim(),yt.parentId!==void 0&&Bt.uint32(106).string(yt.parentId),yt.metadata!==void 0&&nt.Value.encode(nt.Value.wrap(yt.metadata),Bt.uint32(114).fork()).ldelim(),yt.requestMetadata!==void 0&&nt.Value.encode(nt.Value.wrap(yt.requestMetadata),Bt.uint32(802).fork()).ldelim();for(const Zt of yt.requestAnimation)a.LayerAnimation.encode(Zt,Bt.uint32(826).fork()).ldelim();return Bt},decode(yt,Bt){const Zt=yt instanceof et.Reader?yt:new et.Reader(yt);let yr=Bt===void 0?Zt.len:Zt.pos+Bt;const fr=Zr();for(;Zt.pos<yr;){const Rr=Zt.uint32();switch(Rr>>>3){case 1:fr.type=Zt.string();break;case 2:fr.data=nt.Struct.unwrap(nt.Struct.decode(Zt,Zt.uint32()));break;case 3:fr.x=nt.Value.unwrap(nt.Value.decode(Zt,Zt.uint32()));break;case 4:fr.y=nt.Value.unwrap(nt.Value.decode(Zt,Zt.uint32()));break;case 5:fr.width=nt.Value.unwrap(nt.Value.decode(Zt,Zt.uint32()));break;case 6:fr.height=nt.Value.unwrap(nt.Value.decode(Zt,Zt.uint32()));break;case 7:fr.rotation=Zt.double();break;case 8:fr.opacity=Zt.double();break;case 9:fr.scale=Zt.double();break;case 10:fr.hidden=Zt.bool();break;case 12:fr.children=nt.ListValue.unwrap(nt.ListValue.decode(Zt,Zt.uint32()));break;case 13:fr.parentId=Zt.string();break;case 14:fr.metadata=nt.Value.unwrap(nt.Value.decode(Zt,Zt.uint32()));break;case 100:fr.requestMetadata=nt.Value.unwrap(nt.Value.decode(Zt,Zt.uint32()));break;case 103:fr.requestAnimation.push(a.LayerAnimation.decode(Zt,Zt.uint32()));break;default:Zt.skipType(Rr&7);break}}return fr},fromJSON(yt){return{type:Cr(yt.type)?String(yt.type):void 0,data:Or(yt.data)?yt.data:void 0,x:Cr(yt==null?void 0:yt.x)?yt.x:void 0,y:Cr(yt==null?void 0:yt.y)?yt.y:void 0,width:Cr(yt==null?void 0:yt.width)?yt.width:void 0,height:Cr(yt==null?void 0:yt.height)?yt.height:void 0,rotation:Cr(yt.rotation)?Number(yt.rotation):void 0,opacity:Cr(yt.opacity)?Number(yt.opacity):void 0,scale:Cr(yt.scale)?Number(yt.scale):void 0,hidden:Cr(yt.hidden)?!!yt.hidden:void 0,children:Array.isArray(yt.children)?[...yt.children]:void 0,parentId:Cr(yt.parentId)?String(yt.parentId):void 0,metadata:Cr(yt==null?void 0:yt.metadata)?yt.metadata:void 0,requestMetadata:Cr(yt==null?void 0:yt.requestMetadata)?yt.requestMetadata:void 0,requestAnimation:Array.isArray(yt==null?void 0:yt.requestAnimation)?yt.requestAnimation.map(Bt=>a.LayerAnimation.fromJSON(Bt)):[]}},toJSON(yt){const Bt={};return yt.type!==void 0&&(Bt.type=yt.type),yt.data!==void 0&&(Bt.data=yt.data),yt.x!==void 0&&(Bt.x=yt.x),yt.y!==void 0&&(Bt.y=yt.y),yt.width!==void 0&&(Bt.width=yt.width),yt.height!==void 0&&(Bt.height=yt.height),yt.rotation!==void 0&&(Bt.rotation=yt.rotation),yt.opacity!==void 0&&(Bt.opacity=yt.opacity),yt.scale!==void 0&&(Bt.scale=yt.scale),yt.hidden!==void 0&&(Bt.hidden=yt.hidden),yt.children!==void 0&&(Bt.children=yt.children),yt.parentId!==void 0&&(Bt.parentId=yt.parentId),yt.metadata!==void 0&&(Bt.metadata=yt.metadata),yt.requestMetadata!==void 0&&(Bt.requestMetadata=yt.requestMetadata),yt.requestAnimation?Bt.requestAnimation=yt.requestAnimation.map(Zt=>Zt?a.LayerAnimation.toJSON(Zt):void 0):Bt.requestAnimation=[],Bt},fromPartial(yt){var Bt,Zt,yr,fr,Rr,Nr,xr,Xr,Ar,Br,rn,Dr,qr,nn,$r;const Lr=Zr();return Lr.type=(Bt=yt.type)!==null&&Bt!==void 0?Bt:void 0,Lr.data=(Zt=yt.data)!==null&&Zt!==void 0?Zt:void 0,Lr.x=(yr=yt.x)!==null&&yr!==void 0?yr:void 0,Lr.y=(fr=yt.y)!==null&&fr!==void 0?fr:void 0,Lr.width=(Rr=yt.width)!==null&&Rr!==void 0?Rr:void 0,Lr.height=(Nr=yt.height)!==null&&Nr!==void 0?Nr:void 0,Lr.rotation=(xr=yt.rotation)!==null&&xr!==void 0?xr:void 0,Lr.opacity=(Xr=yt.opacity)!==null&&Xr!==void 0?Xr:void 0,Lr.scale=(Ar=yt.scale)!==null&&Ar!==void 0?Ar:void 0,Lr.hidden=(Br=yt.hidden)!==null&&Br!==void 0?Br:void 0,Lr.children=(rn=yt.children)!==null&&rn!==void 0?rn:void 0,Lr.parentId=(Dr=yt.parentId)!==null&&Dr!==void 0?Dr:void 0,Lr.metadata=(qr=yt.metadata)!==null&&qr!==void 0?qr:void 0,Lr.requestMetadata=(nn=yt.requestMetadata)!==null&&nn!==void 0?nn:void 0,Lr.requestAnimation=(($r=yt.requestAnimation)===null||$r===void 0?void 0:$r.map(Qr=>a.LayerAnimation.fromPartial(Qr)))||[],Lr}};function Pr(){return{id:"",type:void 0,data:void 0,x:void 0,y:void 0,width:void 0,height:void 0,rotation:void 0,opacity:void 0,scale:void 0,hidden:void 0,children:void 0,parentId:void 0,metadata:void 0,requestMetadata:void 0,requestAnimation:[]}}a.PartialLayerWithID={encode(yt,Bt=et.Writer.create()){yt.id!==""&&Bt.uint32(8002).string(yt.id),yt.type!==void 0&&Bt.uint32(10).string(yt.type),yt.data!==void 0&&nt.Struct.encode(nt.Struct.wrap(yt.data),Bt.uint32(18).fork()).ldelim(),yt.x!==void 0&&nt.Value.encode(nt.Value.wrap(yt.x),Bt.uint32(26).fork()).ldelim(),yt.y!==void 0&&nt.Value.encode(nt.Value.wrap(yt.y),Bt.uint32(34).fork()).ldelim(),yt.width!==void 0&&nt.Value.encode(nt.Value.wrap(yt.width),Bt.uint32(42).fork()).ldelim(),yt.height!==void 0&&nt.Value.encode(nt.Value.wrap(yt.height),Bt.uint32(50).fork()).ldelim(),yt.rotation!==void 0&&Bt.uint32(57).double(yt.rotation),yt.opacity!==void 0&&Bt.uint32(65).double(yt.opacity),yt.scale!==void 0&&Bt.uint32(73).double(yt.scale),yt.hidden!==void 0&&Bt.uint32(80).bool(yt.hidden),yt.children!==void 0&&nt.ListValue.encode(nt.ListValue.wrap(yt.children),Bt.uint32(98).fork()).ldelim(),yt.parentId!==void 0&&Bt.uint32(106).string(yt.parentId),yt.metadata!==void 0&&nt.Value.encode(nt.Value.wrap(yt.metadata),Bt.uint32(114).fork()).ldelim(),yt.requestMetadata!==void 0&&nt.Value.encode(nt.Value.wrap(yt.requestMetadata),Bt.uint32(802).fork()).ldelim();for(const Zt of yt.requestAnimation)a.LayerAnimation.encode(Zt,Bt.uint32(826).fork()).ldelim();return Bt},decode(yt,Bt){const Zt=yt instanceof et.Reader?yt:new et.Reader(yt);let yr=Bt===void 0?Zt.len:Zt.pos+Bt;const fr=Pr();for(;Zt.pos<yr;){const Rr=Zt.uint32();switch(Rr>>>3){case 1e3:fr.id=Zt.string();break;case 1:fr.type=Zt.string();break;case 2:fr.data=nt.Struct.unwrap(nt.Struct.decode(Zt,Zt.uint32()));break;case 3:fr.x=nt.Value.unwrap(nt.Value.decode(Zt,Zt.uint32()));break;case 4:fr.y=nt.Value.unwrap(nt.Value.decode(Zt,Zt.uint32()));break;case 5:fr.width=nt.Value.unwrap(nt.Value.decode(Zt,Zt.uint32()));break;case 6:fr.height=nt.Value.unwrap(nt.Value.decode(Zt,Zt.uint32()));break;case 7:fr.rotation=Zt.double();break;case 8:fr.opacity=Zt.double();break;case 9:fr.scale=Zt.double();break;case 10:fr.hidden=Zt.bool();break;case 12:fr.children=nt.ListValue.unwrap(nt.ListValue.decode(Zt,Zt.uint32()));break;case 13:fr.parentId=Zt.string();break;case 14:fr.metadata=nt.Value.unwrap(nt.Value.decode(Zt,Zt.uint32()));break;case 100:fr.requestMetadata=nt.Value.unwrap(nt.Value.decode(Zt,Zt.uint32()));break;case 103:fr.requestAnimation.push(a.LayerAnimation.decode(Zt,Zt.uint32()));break;default:Zt.skipType(Rr&7);break}}return fr},fromJSON(yt){return{id:Cr(yt.id)?String(yt.id):"",type:Cr(yt.type)?String(yt.type):void 0,data:Or(yt.data)?yt.data:void 0,x:Cr(yt==null?void 0:yt.x)?yt.x:void 0,y:Cr(yt==null?void 0:yt.y)?yt.y:void 0,width:Cr(yt==null?void 0:yt.width)?yt.width:void 0,height:Cr(yt==null?void 0:yt.height)?yt.height:void 0,rotation:Cr(yt.rotation)?Number(yt.rotation):void 0,opacity:Cr(yt.opacity)?Number(yt.opacity):void 0,scale:Cr(yt.scale)?Number(yt.scale):void 0,hidden:Cr(yt.hidden)?!!yt.hidden:void 0,children:Array.isArray(yt.children)?[...yt.children]:void 0,parentId:Cr(yt.parentId)?String(yt.parentId):void 0,metadata:Cr(yt==null?void 0:yt.metadata)?yt.metadata:void 0,requestMetadata:Cr(yt==null?void 0:yt.requestMetadata)?yt.requestMetadata:void 0,requestAnimation:Array.isArray(yt==null?void 0:yt.requestAnimation)?yt.requestAnimation.map(Bt=>a.LayerAnimation.fromJSON(Bt)):[]}},toJSON(yt){const Bt={};return yt.id!==void 0&&(Bt.id=yt.id),yt.type!==void 0&&(Bt.type=yt.type),yt.data!==void 0&&(Bt.data=yt.data),yt.x!==void 0&&(Bt.x=yt.x),yt.y!==void 0&&(Bt.y=yt.y),yt.width!==void 0&&(Bt.width=yt.width),yt.height!==void 0&&(Bt.height=yt.height),yt.rotation!==void 0&&(Bt.rotation=yt.rotation),yt.opacity!==void 0&&(Bt.opacity=yt.opacity),yt.scale!==void 0&&(Bt.scale=yt.scale),yt.hidden!==void 0&&(Bt.hidden=yt.hidden),yt.children!==void 0&&(Bt.children=yt.children),yt.parentId!==void 0&&(Bt.parentId=yt.parentId),yt.metadata!==void 0&&(Bt.metadata=yt.metadata),yt.requestMetadata!==void 0&&(Bt.requestMetadata=yt.requestMetadata),yt.requestAnimation?Bt.requestAnimation=yt.requestAnimation.map(Zt=>Zt?a.LayerAnimation.toJSON(Zt):void 0):Bt.requestAnimation=[],Bt},fromPartial(yt){var Bt,Zt,yr,fr,Rr,Nr,xr,Xr,Ar,Br,rn,Dr,qr,nn,$r,Lr;const Qr=Pr();return Qr.id=(Bt=yt.id)!==null&&Bt!==void 0?Bt:"",Qr.type=(Zt=yt.type)!==null&&Zt!==void 0?Zt:void 0,Qr.data=(yr=yt.data)!==null&&yr!==void 0?yr:void 0,Qr.x=(fr=yt.x)!==null&&fr!==void 0?fr:void 0,Qr.y=(Rr=yt.y)!==null&&Rr!==void 0?Rr:void 0,Qr.width=(Nr=yt.width)!==null&&Nr!==void 0?Nr:void 0,Qr.height=(xr=yt.height)!==null&&xr!==void 0?xr:void 0,Qr.rotation=(Xr=yt.rotation)!==null&&Xr!==void 0?Xr:void 0,Qr.opacity=(Ar=yt.opacity)!==null&&Ar!==void 0?Ar:void 0,Qr.scale=(Br=yt.scale)!==null&&Br!==void 0?Br:void 0,Qr.hidden=(rn=yt.hidden)!==null&&rn!==void 0?rn:void 0,Qr.children=(Dr=yt.children)!==null&&Dr!==void 0?Dr:void 0,Qr.parentId=(qr=yt.parentId)!==null&&qr!==void 0?qr:void 0,Qr.metadata=(nn=yt.metadata)!==null&&nn!==void 0?nn:void 0,Qr.requestMetadata=($r=yt.requestMetadata)!==null&&$r!==void 0?$r:void 0,Qr.requestAnimation=((Lr=yt.requestAnimation)===null||Lr===void 0?void 0:Lr.map(Ur=>a.LayerAnimation.fromPartial(Ur)))||[],Qr}};function _r(){return{layoutId:""}}a.ListLayersRequest={encode(yt,Bt=et.Writer.create()){return yt.layoutId!==""&&Bt.uint32(10).string(yt.layoutId),Bt},decode(yt,Bt){const Zt=yt instanceof et.Reader?yt:new et.Reader(yt);let yr=Bt===void 0?Zt.len:Zt.pos+Bt;const fr=_r();for(;Zt.pos<yr;){const Rr=Zt.uint32();switch(Rr>>>3){case 1:fr.layoutId=Zt.string();break;default:Zt.skipType(Rr&7);break}}return fr},fromJSON(yt){return{layoutId:Cr(yt.layoutId)?String(yt.layoutId):""}},toJSON(yt){const Bt={};return yt.layoutId!==void 0&&(Bt.layoutId=yt.layoutId),Bt},fromPartial(yt){var Bt;const Zt=_r();return Zt.layoutId=(Bt=yt.layoutId)!==null&&Bt!==void 0?Bt:"",Zt}};function St(){return{layers:[]}}a.ListLayersResponse={encode(yt,Bt=et.Writer.create()){for(const Zt of yt.layers)a.Layer.encode(Zt,Bt.uint32(10).fork()).ldelim();return Bt},decode(yt,Bt){const Zt=yt instanceof et.Reader?yt:new et.Reader(yt);let yr=Bt===void 0?Zt.len:Zt.pos+Bt;const fr=St();for(;Zt.pos<yr;){const Rr=Zt.uint32();switch(Rr>>>3){case 1:fr.layers.push(a.Layer.decode(Zt,Zt.uint32()));break;default:Zt.skipType(Rr&7);break}}return fr},fromJSON(yt){return{layers:Array.isArray(yt==null?void 0:yt.layers)?yt.layers.map(Bt=>a.Layer.fromJSON(Bt)):[]}},toJSON(yt){const Bt={};return yt.layers?Bt.layers=yt.layers.map(Zt=>Zt?a.Layer.toJSON(Zt):void 0):Bt.layers=[],Bt},fromPartial(yt){var Bt;const Zt=St();return Zt.layers=((Bt=yt.layers)===null||Bt===void 0?void 0:Bt.map(yr=>a.Layer.fromPartial(yr)))||[],Zt}};function Kt(){return{layoutId:"",layer:void 0}}a.CreateLayerRequest={encode(yt,Bt=et.Writer.create()){return yt.layoutId!==""&&Bt.uint32(10).string(yt.layoutId),yt.layer!==void 0&&a.PartialLayer.encode(yt.layer,Bt.uint32(18).fork()).ldelim(),Bt},decode(yt,Bt){const Zt=yt instanceof et.Reader?yt:new et.Reader(yt);let yr=Bt===void 0?Zt.len:Zt.pos+Bt;const fr=Kt();for(;Zt.pos<yr;){const Rr=Zt.uint32();switch(Rr>>>3){case 1:fr.layoutId=Zt.string();break;case 2:fr.layer=a.PartialLayer.decode(Zt,Zt.uint32());break;default:Zt.skipType(Rr&7);break}}return fr},fromJSON(yt){return{layoutId:Cr(yt.layoutId)?String(yt.layoutId):"",layer:Cr(yt.layer)?a.PartialLayer.fromJSON(yt.layer):void 0}},toJSON(yt){const Bt={};return yt.layoutId!==void 0&&(Bt.layoutId=yt.layoutId),yt.layer!==void 0&&(Bt.layer=yt.layer?a.PartialLayer.toJSON(yt.layer):void 0),Bt},fromPartial(yt){var Bt;const Zt=Kt();return Zt.layoutId=(Bt=yt.layoutId)!==null&&Bt!==void 0?Bt:"",Zt.layer=yt.layer!==void 0&&yt.layer!==null?a.PartialLayer.fromPartial(yt.layer):void 0,Zt}};function er(){return{layoutId:"",layerId:""}}a.GetLayerRequest={encode(yt,Bt=et.Writer.create()){return yt.layoutId!==""&&Bt.uint32(10).string(yt.layoutId),yt.layerId!==""&&Bt.uint32(18).string(yt.layerId),Bt},decode(yt,Bt){const Zt=yt instanceof et.Reader?yt:new et.Reader(yt);let yr=Bt===void 0?Zt.len:Zt.pos+Bt;const fr=er();for(;Zt.pos<yr;){const Rr=Zt.uint32();switch(Rr>>>3){case 1:fr.layoutId=Zt.string();break;case 2:fr.layerId=Zt.string();break;default:Zt.skipType(Rr&7);break}}return fr},fromJSON(yt){return{layoutId:Cr(yt.layoutId)?String(yt.layoutId):"",layerId:Cr(yt.layerId)?String(yt.layerId):""}},toJSON(yt){const Bt={};return yt.layoutId!==void 0&&(Bt.layoutId=yt.layoutId),yt.layerId!==void 0&&(Bt.layerId=yt.layerId),Bt},fromPartial(yt){var Bt,Zt;const yr=er();return yr.layoutId=(Bt=yt.layoutId)!==null&&Bt!==void 0?Bt:"",yr.layerId=(Zt=yt.layerId)!==null&&Zt!==void 0?Zt:"",yr}};function kr(){return{layoutId:"",layerId:"",layer:void 0}}a.UpdateLayerRequest={encode(yt,Bt=et.Writer.create()){return yt.layoutId!==""&&Bt.uint32(10).string(yt.layoutId),yt.layerId!==""&&Bt.uint32(18).string(yt.layerId),yt.layer!==void 0&&a.PartialLayer.encode(yt.layer,Bt.uint32(26).fork()).ldelim(),Bt},decode(yt,Bt){const Zt=yt instanceof et.Reader?yt:new et.Reader(yt);let yr=Bt===void 0?Zt.len:Zt.pos+Bt;const fr=kr();for(;Zt.pos<yr;){const Rr=Zt.uint32();switch(Rr>>>3){case 1:fr.layoutId=Zt.string();break;case 2:fr.layerId=Zt.string();break;case 3:fr.layer=a.PartialLayer.decode(Zt,Zt.uint32());break;default:Zt.skipType(Rr&7);break}}return fr},fromJSON(yt){return{layoutId:Cr(yt.layoutId)?String(yt.layoutId):"",layerId:Cr(yt.layerId)?String(yt.layerId):"",layer:Cr(yt.layer)?a.PartialLayer.fromJSON(yt.layer):void 0}},toJSON(yt){const Bt={};return yt.layoutId!==void 0&&(Bt.layoutId=yt.layoutId),yt.layerId!==void 0&&(Bt.layerId=yt.layerId),yt.layer!==void 0&&(Bt.layer=yt.layer?a.PartialLayer.toJSON(yt.layer):void 0),Bt},fromPartial(yt){var Bt,Zt;const yr=kr();return yr.layoutId=(Bt=yt.layoutId)!==null&&Bt!==void 0?Bt:"",yr.layerId=(Zt=yt.layerId)!==null&&Zt!==void 0?Zt:"",yr.layer=yt.layer!==void 0&&yt.layer!==null?a.PartialLayer.fromPartial(yt.layer):void 0,yr}};function tr(){return{requestMetadata:void 0}}a.DeleteLayerPayload={encode(yt,Bt=et.Writer.create()){return yt.requestMetadata!==void 0&&nt.Value.encode(nt.Value.wrap(yt.requestMetadata),Bt.uint32(802).fork()).ldelim(),Bt},decode(yt,Bt){const Zt=yt instanceof et.Reader?yt:new et.Reader(yt);let yr=Bt===void 0?Zt.len:Zt.pos+Bt;const fr=tr();for(;Zt.pos<yr;){const Rr=Zt.uint32();switch(Rr>>>3){case 100:fr.requestMetadata=nt.Value.unwrap(nt.Value.decode(Zt,Zt.uint32()));break;default:Zt.skipType(Rr&7);break}}return fr},fromJSON(yt){return{requestMetadata:Cr(yt==null?void 0:yt.requestMetadata)?yt.requestMetadata:void 0}},toJSON(yt){const Bt={};return yt.requestMetadata!==void 0&&(Bt.requestMetadata=yt.requestMetadata),Bt},fromPartial(yt){var Bt;const Zt=tr();return Zt.requestMetadata=(Bt=yt.requestMetadata)!==null&&Bt!==void 0?Bt:void 0,Zt}};function bt(){return{id:"",requestMetadata:void 0}}a.BatchDeleteLayerRequest={encode(yt,Bt=et.Writer.create()){return yt.id!==""&&Bt.uint32(10).string(yt.id),yt.requestMetadata!==void 0&&nt.Value.encode(nt.Value.wrap(yt.requestMetadata),Bt.uint32(802).fork()).ldelim(),Bt},decode(yt,Bt){const Zt=yt instanceof et.Reader?yt:new et.Reader(yt);let yr=Bt===void 0?Zt.len:Zt.pos+Bt;const fr=bt();for(;Zt.pos<yr;){const Rr=Zt.uint32();switch(Rr>>>3){case 1:fr.id=Zt.string();break;case 100:fr.requestMetadata=nt.Value.unwrap(nt.Value.decode(Zt,Zt.uint32()));break;default:Zt.skipType(Rr&7);break}}return fr},fromJSON(yt){return{id:Cr(yt.id)?String(yt.id):"",requestMetadata:Cr(yt==null?void 0:yt.requestMetadata)?yt.requestMetadata:void 0}},toJSON(yt){const Bt={};return yt.id!==void 0&&(Bt.id=yt.id),yt.requestMetadata!==void 0&&(Bt.requestMetadata=yt.requestMetadata),Bt},fromPartial(yt){var Bt,Zt;const yr=bt();return yr.id=(Bt=yt.id)!==null&&Bt!==void 0?Bt:"",yr.requestMetadata=(Zt=yt.requestMetadata)!==null&&Zt!==void 0?Zt:void 0,yr}};function jt(){return{layoutId:"",layers:[],requestMetadata:void 0,requestAnimationMode:void 0}}a.BatchLayerRequest={encode(yt,Bt=et.Writer.create()){yt.layoutId!==""&&Bt.uint32(10).string(yt.layoutId);for(const Zt of yt.layers)a.BatchLayerRequest_BatchItem.encode(Zt,Bt.uint32(18).fork()).ldelim();return yt.requestMetadata!==void 0&&nt.Value.encode(nt.Value.wrap(yt.requestMetadata),Bt.uint32(802).fork()).ldelim(),yt.requestAnimationMode!==void 0&&Bt.uint32(808).int32(At(yt.requestAnimationMode)),Bt},decode(yt,Bt){const Zt=yt instanceof et.Reader?yt:new et.Reader(yt);let yr=Bt===void 0?Zt.len:Zt.pos+Bt;const fr=jt();for(;Zt.pos<yr;){const Rr=Zt.uint32();switch(Rr>>>3){case 1:fr.layoutId=Zt.string();break;case 2:fr.layers.push(a.BatchLayerRequest_BatchItem.decode(Zt,Zt.uint32()));break;case 100:fr.requestMetadata=nt.Value.unwrap(nt.Value.decode(Zt,Zt.uint32()));break;case 101:fr.requestAnimationMode=$t(Zt.int32());break;default:Zt.skipType(Rr&7);break}}return fr},fromJSON(yt){return{layoutId:Cr(yt.layoutId)?String(yt.layoutId):"",layers:Array.isArray(yt==null?void 0:yt.layers)?yt.layers.map(Bt=>a.BatchLayerRequest_BatchItem.fromJSON(Bt)):[],requestMetadata:Cr(yt==null?void 0:yt.requestMetadata)?yt.requestMetadata:void 0,requestAnimationMode:Cr(yt.requestAnimationMode)?$t(yt.requestAnimationMode):void 0}},toJSON(yt){const Bt={};return yt.layoutId!==void 0&&(Bt.layoutId=yt.layoutId),yt.layers?Bt.layers=yt.layers.map(Zt=>Zt?a.BatchLayerRequest_BatchItem.toJSON(Zt):void 0):Bt.layers=[],yt.requestMetadata!==void 0&&(Bt.requestMetadata=yt.requestMetadata),yt.requestAnimationMode!==void 0&&(Bt.requestAnimationMode=yt.requestAnimationMode!==void 0?Tt(yt.requestAnimationMode):void 0),Bt},fromPartial(yt){var Bt,Zt,yr,fr;const Rr=jt();return Rr.layoutId=(Bt=yt.layoutId)!==null&&Bt!==void 0?Bt:"",Rr.layers=((Zt=yt.layers)===null||Zt===void 0?void 0:Zt.map(Nr=>a.BatchLayerRequest_BatchItem.fromPartial(Nr)))||[],Rr.requestMetadata=(yr=yt.requestMetadata)!==null&&yr!==void 0?yr:void 0,Rr.requestAnimationMode=(fr=yt.requestAnimationMode)!==null&&fr!==void 0?fr:void 0,Rr}};function Ut(){return{create:void 0,update:void 0,delete:void 0}}a.BatchLayerRequest_BatchItem={encode(yt,Bt=et.Writer.create()){return yt.create!==void 0&&a.PartialLayer.encode(yt.create,Bt.uint32(10).fork()).ldelim(),yt.update!==void 0&&a.PartialLayerWithID.encode(yt.update,Bt.uint32(18).fork()).ldelim(),yt.delete!==void 0&&a.BatchDeleteLayerRequest.encode(yt.delete,Bt.uint32(26).fork()).ldelim(),Bt},decode(yt,Bt){const Zt=yt instanceof et.Reader?yt:new et.Reader(yt);let yr=Bt===void 0?Zt.len:Zt.pos+Bt;const fr=Ut();for(;Zt.pos<yr;){const Rr=Zt.uint32();switch(Rr>>>3){case 1:fr.create=a.PartialLayer.decode(Zt,Zt.uint32());break;case 2:fr.update=a.PartialLayerWithID.decode(Zt,Zt.uint32());break;case 3:fr.delete=a.BatchDeleteLayerRequest.decode(Zt,Zt.uint32());break;default:Zt.skipType(Rr&7);break}}return fr},fromJSON(yt){return{create:Cr(yt.create)?a.PartialLayer.fromJSON(yt.create):void 0,update:Cr(yt.update)?a.PartialLayerWithID.fromJSON(yt.update):void 0,delete:Cr(yt.delete)?a.BatchDeleteLayerRequest.fromJSON(yt.delete):void 0}},toJSON(yt){const Bt={};return yt.create!==void 0&&(Bt.create=yt.create?a.PartialLayer.toJSON(yt.create):void 0),yt.update!==void 0&&(Bt.update=yt.update?a.PartialLayerWithID.toJSON(yt.update):void 0),yt.delete!==void 0&&(Bt.delete=yt.delete?a.BatchDeleteLayerRequest.toJSON(yt.delete):void 0),Bt},fromPartial(yt){const Bt=Ut();return Bt.create=yt.create!==void 0&&yt.create!==null?a.PartialLayer.fromPartial(yt.create):void 0,Bt.update=yt.update!==void 0&&yt.update!==null?a.PartialLayerWithID.fromPartial(yt.update):void 0,Bt.delete=yt.delete!==void 0&&yt.delete!==null?a.BatchDeleteLayerRequest.fromPartial(yt.delete):void 0,Bt}};function Ft(){return{create:void 0,update:void 0,delete:void 0}}a.LayoutEvent={encode(yt,Bt=et.Writer.create()){return yt.create!==void 0&&a.Layout.encode(yt.create,Bt.uint32(10).fork()).ldelim(),yt.update!==void 0&&a.Layout.encode(yt.update,Bt.uint32(18).fork()).ldelim(),yt.delete!==void 0&&a.DeleteLayoutResponse.encode(yt.delete,Bt.uint32(26).fork()).ldelim(),Bt},decode(yt,Bt){const Zt=yt instanceof et.Reader?yt:new et.Reader(yt);let yr=Bt===void 0?Zt.len:Zt.pos+Bt;const fr=Ft();for(;Zt.pos<yr;){const Rr=Zt.uint32();switch(Rr>>>3){case 1:fr.create=a.Layout.decode(Zt,Zt.uint32());break;case 2:fr.update=a.Layout.decode(Zt,Zt.uint32());break;case 3:fr.delete=a.DeleteLayoutResponse.decode(Zt,Zt.uint32());break;default:Zt.skipType(Rr&7);break}}return fr},fromJSON(yt){return{create:Cr(yt.create)?a.Layout.fromJSON(yt.create):void 0,update:Cr(yt.update)?a.Layout.fromJSON(yt.update):void 0,delete:Cr(yt.delete)?a.DeleteLayoutResponse.fromJSON(yt.delete):void 0}},toJSON(yt){const Bt={};return yt.create!==void 0&&(Bt.create=yt.create?a.Layout.toJSON(yt.create):void 0),yt.update!==void 0&&(Bt.update=yt.update?a.Layout.toJSON(yt.update):void 0),yt.delete!==void 0&&(Bt.delete=yt.delete?a.DeleteLayoutResponse.toJSON(yt.delete):void 0),Bt},fromPartial(yt){const Bt=Ft();return Bt.create=yt.create!==void 0&&yt.create!==null?a.Layout.fromPartial(yt.create):void 0,Bt.update=yt.update!==void 0&&yt.update!==null?a.Layout.fromPartial(yt.update):void 0,Bt.delete=yt.delete!==void 0&&yt.delete!==null?a.DeleteLayoutResponse.fromPartial(yt.delete):void 0,Bt}};function Ht(){return{create:void 0,update:void 0,delete:void 0,batch:void 0}}a.LayerEvent={encode(yt,Bt=et.Writer.create()){return yt.create!==void 0&&a.Layer.encode(yt.create,Bt.uint32(10).fork()).ldelim(),yt.update!==void 0&&a.Layer.encode(yt.update,Bt.uint32(18).fork()).ldelim(),yt.delete!==void 0&&a.DeleteLayerResponse.encode(yt.delete,Bt.uint32(26).fork()).ldelim(),yt.batch!==void 0&&a.BatchLayerResponse.encode(yt.batch,Bt.uint32(34).fork()).ldelim(),Bt},decode(yt,Bt){const Zt=yt instanceof et.Reader?yt:new et.Reader(yt);let yr=Bt===void 0?Zt.len:Zt.pos+Bt;const fr=Ht();for(;Zt.pos<yr;){const Rr=Zt.uint32();switch(Rr>>>3){case 1:fr.create=a.Layer.decode(Zt,Zt.uint32());break;case 2:fr.update=a.Layer.decode(Zt,Zt.uint32());break;case 3:fr.delete=a.DeleteLayerResponse.decode(Zt,Zt.uint32());break;case 4:fr.batch=a.BatchLayerResponse.decode(Zt,Zt.uint32());break;default:Zt.skipType(Rr&7);break}}return fr},fromJSON(yt){return{create:Cr(yt.create)?a.Layer.fromJSON(yt.create):void 0,update:Cr(yt.update)?a.Layer.fromJSON(yt.update):void 0,delete:Cr(yt.delete)?a.DeleteLayerResponse.fromJSON(yt.delete):void 0,batch:Cr(yt.batch)?a.BatchLayerResponse.fromJSON(yt.batch):void 0}},toJSON(yt){const Bt={};return yt.create!==void 0&&(Bt.create=yt.create?a.Layer.toJSON(yt.create):void 0),yt.update!==void 0&&(Bt.update=yt.update?a.Layer.toJSON(yt.update):void 0),yt.delete!==void 0&&(Bt.delete=yt.delete?a.DeleteLayerResponse.toJSON(yt.delete):void 0),yt.batch!==void 0&&(Bt.batch=yt.batch?a.BatchLayerResponse.toJSON(yt.batch):void 0),Bt},fromPartial(yt){const Bt=Ht();return Bt.create=yt.create!==void 0&&yt.create!==null?a.Layer.fromPartial(yt.create):void 0,Bt.update=yt.update!==void 0&&yt.update!==null?a.Layer.fromPartial(yt.update):void 0,Bt.delete=yt.delete!==void 0&&yt.delete!==null?a.DeleteLayerResponse.fromPartial(yt.delete):void 0,Bt.batch=yt.batch!==void 0&&yt.batch!==null?a.BatchLayerResponse.fromPartial(yt.batch):void 0,Bt}};function or(){return{layout:void 0,layer:void 0}}a.Event={encode(yt,Bt=et.Writer.create()){return yt.layout!==void 0&&a.LayoutEvent.encode(yt.layout,Bt.uint32(10).fork()).ldelim(),yt.layer!==void 0&&a.LayerEvent.encode(yt.layer,Bt.uint32(18).fork()).ldelim(),Bt},decode(yt,Bt){const Zt=yt instanceof et.Reader?yt:new et.Reader(yt);let yr=Bt===void 0?Zt.len:Zt.pos+Bt;const fr=or();for(;Zt.pos<yr;){const Rr=Zt.uint32();switch(Rr>>>3){case 1:fr.layout=a.LayoutEvent.decode(Zt,Zt.uint32());break;case 2:fr.layer=a.LayerEvent.decode(Zt,Zt.uint32());break;default:Zt.skipType(Rr&7);break}}return fr},fromJSON(yt){return{layout:Cr(yt.layout)?a.LayoutEvent.fromJSON(yt.layout):void 0,layer:Cr(yt.layer)?a.LayerEvent.fromJSON(yt.layer):void 0}},toJSON(yt){const Bt={};return yt.layout!==void 0&&(Bt.layout=yt.layout?a.LayoutEvent.toJSON(yt.layout):void 0),yt.layer!==void 0&&(Bt.layer=yt.layer?a.LayerEvent.toJSON(yt.layer):void 0),Bt},fromPartial(yt){const Bt=or();return Bt.layout=yt.layout!==void 0&&yt.layout!==null?a.LayoutEvent.fromPartial(yt.layout):void 0,Bt.layer=yt.layer!==void 0&&yt.layer!==null?a.LayerEvent.fromPartial(yt.layer):void 0,Bt}};class vr{constructor(Bt){this.rpc=Bt,this.ListLayers=this.ListLayers.bind(this),this.CreateLayer=this.CreateLayer.bind(this),this.GetLayer=this.GetLayer.bind(this),this.UpdateLayer=this.UpdateLayer.bind(this),this.DeleteLayer=this.DeleteLayer.bind(this),this.Batch=this.Batch.bind(this)}ListLayers(Bt){const Zt=a.ListLayersRequest.encode(Bt).finish();return this.rpc.request("apis.layout.v2.LayerService","ListLayers",Zt).then(fr=>a.ListLayersResponse.decode(new et.Reader(fr)))}CreateLayer(Bt){const Zt=a.CreateLayerRequest.encode(Bt).finish();return this.rpc.request("apis.layout.v2.LayerService","CreateLayer",Zt).then(fr=>a.Layer.decode(new et.Reader(fr)))}GetLayer(Bt){const Zt=a.GetLayerRequest.encode(Bt).finish();return this.rpc.request("apis.layout.v2.LayerService","GetLayer",Zt).then(fr=>a.Layer.decode(new et.Reader(fr)))}UpdateLayer(Bt){const Zt=a.UpdateLayerRequest.encode(Bt).finish();return this.rpc.request("apis.layout.v2.LayerService","UpdateLayer",Zt).then(fr=>a.Layer.decode(new et.Reader(fr)))}DeleteLayer(Bt){const Zt=a.DeleteLayerRequest.encode(Bt).finish();return this.rpc.request("apis.layout.v2.LayerService","DeleteLayer",Zt).then(fr=>a.DeleteLayerResponse.decode(new et.Reader(fr)))}Batch(Bt){const Zt=a.BatchLayerRequest.encode(Bt).finish();return this.rpc.request("apis.layout.v2.LayerService","Batch",Zt).then(fr=>a.BatchLayerResponse.decode(new et.Reader(fr)))}}a.LayerServiceClientImpl=vr,a.LayerServiceDefinition={name:"LayerService",fullName:"apis.layout.v2.LayerService",methods:{listLayers:{name:"ListLayers",requestType:a.ListLayersRequest,requestStream:!1,responseType:a.ListLayersResponse,responseStream:!1,options:{}},createLayer:{name:"CreateLayer",requestType:a.CreateLayerRequest,requestStream:!1,responseType:a.Layer,responseStream:!1,options:{}},getLayer:{name:"GetLayer",requestType:a.GetLayerRequest,requestStream:!1,responseType:a.Layer,responseStream:!1,options:{}},updateLayer:{name:"UpdateLayer",requestType:a.UpdateLayerRequest,requestStream:!1,responseType:a.Layer,responseStream:!1,options:{}},deleteLayer:{name:"DeleteLayer",requestType:a.DeleteLayerRequest,requestStream:!1,responseType:a.DeleteLayerResponse,responseStream:!1,options:{}},batch:{name:"Batch",requestType:a.BatchLayerRequest,requestStream:!1,responseType:a.BatchLayerResponse,responseStream:!1,options:{}}}};class Ir{constructor(Bt){this.rpc=Bt,this.ListLayouts=this.ListLayouts.bind(this),this.CreateLayout=this.CreateLayout.bind(this),this.GetLayout=this.GetLayout.bind(this),this.UpdateLayout=this.UpdateLayout.bind(this),this.DeleteLayout=this.DeleteLayout.bind(this)}ListLayouts(Bt){const Zt=a.ListLayoutsRequest.encode(Bt).finish();return this.rpc.request("apis.layout.v2.LayoutService","ListLayouts",Zt).then(fr=>a.ListLayoutsResponse.decode(new et.Reader(fr)))}CreateLayout(Bt){const Zt=a.CreateLayoutRequest.encode(Bt).finish();return this.rpc.request("apis.layout.v2.LayoutService","CreateLayout",Zt).then(fr=>a.Layout.decode(new et.Reader(fr)))}GetLayout(Bt){const Zt=a.GetLayoutRequest.encode(Bt).finish();return this.rpc.request("apis.layout.v2.LayoutService","GetLayout",Zt).then(fr=>a.Layout.decode(new et.Reader(fr)))}UpdateLayout(Bt){const Zt=a.UpdateLayoutRequest.encode(Bt).finish();return this.rpc.request("apis.layout.v2.LayoutService","UpdateLayout",Zt).then(fr=>a.Layout.decode(new et.Reader(fr)))}DeleteLayout(Bt){const Zt=a.DeleteLayoutRequest.encode(Bt).finish();return this.rpc.request("apis.layout.v2.LayoutService","DeleteLayout",Zt).then(fr=>a.DeleteLayoutResponse.decode(new et.Reader(fr)))}}a.LayoutServiceClientImpl=Ir,a.LayoutServiceDefinition={name:"LayoutService",fullName:"apis.layout.v2.LayoutService",methods:{listLayouts:{name:"ListLayouts",requestType:a.ListLayoutsRequest,requestStream:!1,responseType:a.ListLayoutsResponse,responseStream:!1,options:{}},createLayout:{name:"CreateLayout",requestType:a.CreateLayoutRequest,requestStream:!1,responseType:a.Layout,responseStream:!1,options:{}},getLayout:{name:"GetLayout",requestType:a.GetLayoutRequest,requestStream:!1,responseType:a.Layout,responseStream:!1,options:{}},updateLayout:{name:"UpdateLayout",requestType:a.UpdateLayoutRequest,requestStream:!1,responseType:a.Layout,responseStream:!1,options:{}},deleteLayout:{name:"DeleteLayout",requestType:a.DeleteLayoutRequest,requestStream:!1,responseType:a.DeleteLayoutResponse,responseStream:!1,options:{}}}};var Sr=(()=>{if(typeof Sr<"u")return Sr;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof commonjsGlobal$1<"u")return commonjsGlobal$1;throw"Unable to locate global object"})();et.util.Long!==k.default&&(et.util.Long=k.default,et.configure());function Or(yt){return typeof yt=="object"&&yt!==null}function Cr(yt){return yt!=null}})(api$4);(function(a){var c=commonjsGlobal$1&&commonjsGlobal$1.__createBinding||(Object.create?function($,k,et,nt){nt===void 0&&(nt=et),Object.defineProperty($,nt,{enumerable:!0,get:function(){return k[et]}})}:function($,k,et,nt){nt===void 0&&(nt=et),$[nt]=k[et]}),b=commonjsGlobal$1&&commonjsGlobal$1.__exportStar||function($,k){for(var et in $)et!=="default"&&!k.hasOwnProperty(et)&&c(k,$,et)};Object.defineProperty(a,"__esModule",{value:!0}),a.layoutApiEventMap=void 0;const _=api$4;b(api$4,a),a.layoutApiEventMap={[_.EventType.EVENT_TYPE_LAYOUT]:"layout",[_.EventType.EVENT_TYPE_LAYER]:"layer",[_.EventType.EVENT_TYPE_UNSPECIFIED]:"unspecified"}})(dist$2);var api$3={},logger={};class EnhancedMap extends Map{computeIfAbsent(c,b){if(this.has(c))return this.get(c);const _=b(c);return this.set(c,_),_}computeIfPresent(c,b){const _=this.get(c);if(_===void 0)return;const $=b(c,_);return $!==void 0?this.set(c,$):this.delete(c),$}compute(c,b){const _=this.get(c),$=b(c,_);return $?this.set(c,$):this.delete(c),$}}var InternalLogLevel;(function(a){a[a.Trace=0]="Trace",a[a.Debug=1]="Debug",a[a.Info=2]="Info",a[a.Warn=3]="Warn",a[a.Error=4]="Error"})(InternalLogLevel||(InternalLogLevel={}));function getInternalLogger(a){return provider.getLogger(a)}const INTERNAL_LOGGING_SETTINGS={setInternalLogLevel:a=>provider.changeLogLevel(a),setOutput:a=>provider.changeOutput(a),reset:()=>provider.reset()};class InternalLoggerImpl{constructor(c,b,_){this._name=c,this._level=b,this._fnOutput=_}trace(c){this.log(InternalLogLevel.Trace,c)}debug(c){this.log(InternalLogLevel.Debug,c)}error(c,b){this.log(InternalLogLevel.Error,c,b)}info(c){this.log(InternalLogLevel.Info,c)}warn(c,b){this.log(InternalLogLevel.Warn,c,b)}setLevel(c){this._level=c}setOutput(c){this._fnOutput=c}log(c,b,_){this._level>c||this._fnOutput(`${InternalLogLevel[this._level].toString()} <INTERNAL LOGGER> ${this._name} ${b()}${_?`
`+_.stack:""}`)}}class InternalProviderImpl{constructor(){this._loggers=new EnhancedMap,this._logLevel=InternalLogLevel.Error,this._fnOutput=InternalProviderImpl.logConsole}getLogger(c){return this._loggers.computeIfAbsent(c,b=>new InternalLoggerImpl(b,this._logLevel,this._fnOutput))}changeLogLevel(c){this._logLevel=c,this._loggers.forEach(b=>b.setLevel(c))}changeOutput(c){this._fnOutput=c,this._loggers.forEach(b=>b.setOutput(this._fnOutput))}reset(){this.changeLogLevel(InternalLogLevel.Error),this._fnOutput=InternalProviderImpl.logConsole,this._loggers.forEach(c=>c.setOutput(this._fnOutput))}static logConsole(c){console&&console.log&&console.log(c)}}const provider=new InternalProviderImpl;var InternalLogger=Object.freeze({__proto__:null,get InternalLogLevel(){return InternalLogLevel},getInternalLogger,INTERNAL_LOGGING_SETTINGS}),LogLevel$1;(function(a){a[a.Trace=0]="Trace",a[a.Debug=1]="Debug",a[a.Info=2]="Info",a[a.Warn=3]="Warn",a[a.Error=4]="Error",a[a.Fatal=5]="Fatal"})(LogLevel$1||(LogLevel$1={}));(function(a){function c(b){switch(b.toLowerCase()){case"trace":return a.Trace;case"debug":return a.Debug;case"info":return a.Info;case"warn":return a.Warn;case"error":return a.Error;case"fatal":return a.Fatal;default:return}}a.toLogLevel=c})(LogLevel$1||(LogLevel$1={}));class CoreLoggerImpl{constructor(c){this._runtime=c}get id(){return this._runtime.id}get logLevel(){return this._runtime.level}get runtimeSettings(){return Object.assign({},this._runtime)}set runtimeSettings(c){this._runtime=c}trace(c,...b){this.logMessage(LogLevel$1.Trace,c,b)}debug(c,...b){this.logMessage(LogLevel$1.Debug,c,b)}info(c,...b){this.logMessage(LogLevel$1.Info,c,b)}warn(c,...b){this.logMessage(LogLevel$1.Warn,c,b)}error(c,...b){this.logMessage(LogLevel$1.Error,c,b)}fatal(c,...b){this.logMessage(LogLevel$1.Fatal,c,b)}logMessage(c,b,_){if(this._runtime.level>c)return;const $=Date.now(),k=typeof b=="string"?b:b(),et=CoreLoggerImpl.getErrorAndArgs(_);switch(this._runtime.channel.type){case"RawLogChannel":this._runtime.channel.write({message:k,exception:et.error,args:et.args,timeInMillis:$,level:c,logNames:this._runtime.name},this._runtime.argumentFormatter);return;case"LogChannel":this._runtime.channel.write(this.createLogMessage(k,c,et,$));break}}formatArgValue(c){try{return this._runtime.argumentFormatter(c)}catch{return`>>ARG CONVERT FAILED: '${c!==void 0?c.toString():"undefined"}'<<`}}createLogMessage(c,b,_,$){let k;const et=_.error,nt=_.args;et&&(k=`${et.name}: ${et.message}`,et.stack&&(k+=`@
${et.stack}`));const ot=this._runtime.dateFormatter($);let ht=LogLevel$1[b].toUpperCase();ht.length<5&&(ht+=" ");const vt=typeof this._runtime.name=="string"?this._runtime.name:this._runtime.name.join(", "),_t=typeof nt<"u"&&nt.length>0?" ["+nt.map($t=>this.formatArgValue($t)).join(", ")+"]":"";return{message:ot+" "+ht+" ["+vt+"] "+c+_t,error:k}}static getErrorAndArgs(c){if(c.length===0)return{};let b,_;const $=c[0];if($ instanceof Error)return b=$,_=c.length>1?c.slice(1):void 0,{error:b,args:_};if(typeof $=="function"){const k=$();return k instanceof Error?(b=k,_=c.length>1?c.slice(1):void 0,{error:b,args:_}):c.length===1?Array.isArray(k)?{args:k.length>0?k:void 0}:{args:k}:Array.isArray(k)?{args:[...k,...c.slice(1)]}:{args:[k,...c.slice(1)]}}return{args:c}}}function padStart(a,c,b=" "){return padInternal(a,c,"start",b)}function padEnd(a,c,b=" "){return padInternal(a,c,"end",b)}function maxLengthStringValueInArray(a){return a.map(c=>c.length).reduce((c,b)=>b>c?b:c,0)}function padInternal(a,c,b,_=" "){if(c<=a.length)return a;if(_.length>1)throw new Error(`Fill char must be one char exactly, it is: ${_.length}`);const $=c-a.length;let k="";for(let et=0;et<$;et++)k+=_;return b==="start"?k+a:a+k}function formatArgument(a){return a===void 0?"undefined":JSON.stringify(a)}function formatDate(a){const c=new Date(a),b=c.getFullYear(),_=padStart((c.getMonth()+1).toString(),2,"0"),$=padStart(c.getDate().toString(),2,"0"),k=padStart(c.getHours().toString(),2,"0"),et=padStart(c.getMinutes().toString(),2,"0"),nt=padStart(c.getSeconds().toString(),2,"0"),ot=padStart(c.getMilliseconds().toString(),2,"0");return`${b}-${_}-${$} ${k}:${et}:${nt},${ot}`}class ConsoleLogChannel{constructor(){this.type="LogChannel"}write(c){console&&console.log&&console.log(c.message+(c.error?`
${c.error}`:""))}}var DefaultChannels;(function(a){function c(){return new ConsoleLogChannel}a.createConsoleChannel=c})(DefaultChannels||(DefaultChannels={}));class LogProviderImpl{constructor(c,b){this._log=getInternalLogger("core.impl.LogProviderImpl"),this._name=c,this._settings=b,this._loggers=new EnhancedMap,this._idToKeyMap=new EnhancedMap,this._globalRuntimeSettings={level:b.level,channel:b.channel},this._nextLoggerId=1,this._log.trace(()=>`Created LogProviderImpl with settings: ${JSON.stringify(this._settings)}`)}get runtimeSettings(){return Object.assign(Object.assign({},this._settings),{level:this._globalRuntimeSettings.level,channel:this._globalRuntimeSettings.channel})}getLogger(c){return this.getOrCreateLogger(c)}updateLoggerRuntime(c,b){this._log.debug(()=>`Updating logger ${c.id} runtime settings using: '${JSON.stringify(b)}'`);const _=this._idToKeyMap.get(c.id);return _===void 0?(this._log.warn(()=>`Cannot update logger with id: ${c.id}, it was not found.`),!1):(this._loggers.computeIfPresent(_,($,k)=>(k.runtimeSettings=LogProviderImpl.mergeRuntimeSettingsIntoLogRuntime(k.runtimeSettings,b),k)),!0)}updateRuntimeSettings(c){this._log.debug(()=>`Updating global runtime settings and updating existing loggers runtime settings using: '${JSON.stringify(c)}'`),this._globalRuntimeSettings={level:c.level!==void 0?c.level:this._globalRuntimeSettings.level,channel:c.channel!==void 0?c.channel:this._globalRuntimeSettings.channel},this._loggers.forEach(b=>b.runtimeSettings=LogProviderImpl.mergeRuntimeSettingsIntoLogRuntime(b.runtimeSettings,c))}clear(){this._loggers.clear(),this._idToKeyMap.clear(),this._globalRuntimeSettings=Object.assign({},this._settings),this._nextLoggerId=1}getOrCreateLogger(c){const b=LogProviderImpl.createKey(c),_=this._loggers.computeIfAbsent(b,()=>{const $={level:this._globalRuntimeSettings.level,channel:this._globalRuntimeSettings.channel,id:this.nextLoggerId(),name:c,argumentFormatter:this._settings.argumentFormatter,dateFormatter:this._settings.dateFormatter};return new CoreLoggerImpl($)});return this._idToKeyMap.computeIfAbsent(_.id,()=>b),_}nextLoggerId(){const c=this._name+"_"+this._nextLoggerId;return this._nextLoggerId++,c}static mergeRuntimeSettingsIntoLogRuntime(c,b){return Object.assign(Object.assign({},c),{level:b.level!==void 0?b.level:c.level,channel:b.channel!==void 0?b.channel:c.channel})}static createKey(c){return typeof c=="string"?c:c.join(",")}}function createLogProvider(a,c){return new LogProviderImpl(a,c)}var index=Object.freeze({__proto__:null,EnhancedMap,padStart,padEnd,maxLengthStringValueInArray});class CategoryImpl{constructor(c,b,_,$){this._children=[],this._logger=c,this._name=b,this._parent=_,this._fnGetOrCreateChildCategory=$}get name(){return this._name}get parent(){return this._parent}get path(){const c=[];let b=this;for(;b!==void 0;)c.push(b.name),b=b.parent;return c.reverse()}get children(){return[...this._children]}addChild(c){if(c.parent!==this)throw new Error(`Cannot add child '${c.name}', expected parent '${this._name} but got ${c.parent?c.parent.name:"undefined"}'`);this._children.push(c)}getChildCategory(c){const b=this._children.find(_=>_.name===c);return b!==void 0?b:this._fnGetOrCreateChildCategory(c,this)}get id(){return this._logger.id}get logLevel(){return this._logger.logLevel}get runtimeSettings(){return this._logger.runtimeSettings}get logger(){return this._logger}trace(c,...b){this._logger.trace(c,...b)}debug(c,...b){this._logger.debug(c,...b)}info(c,...b){this._logger.info(c,...b)}warn(c,...b){this._logger.warn(c,...b)}error(c,...b){this._logger.error(c,...b)}fatal(c,...b){this._logger.fatal(c,...b)}}const CATEGORY_PATH_SEPARATOR="#";class CategoryProviderImpl{constructor(c,b){this._name=c,this._initialConfig=b,this._categoryStorage=new CategoryStorage(c,b)}get name(){return this._name}get config(){return this._initialConfig}get runtimeConfig(){return this._categoryStorage.getCurrentRuntimeConfig()}getCategory(c,b){return this._categoryStorage.getOrCreateCategory(c,b)}updateRuntimeSettingsCategory(c,b){this._categoryStorage.updateRuntimeSettingsCategory(c,b)}updateRuntimeSettings(c){this._categoryStorage.updateRuntimeSettings(c)}getRegisteredCategories(){return this._categoryStorage.getRegisteredCategories()}getCategoryByPath(c){return this._categoryStorage.getCategoryByPath(c)}}class CategoryStorage{constructor(c,b){this._categoriesById=new Map,this._categoriesByPath=new Map,this._categoryProviderName=c,this._allowSameCategoryName=b.allowSameCategoryName,this._logProvider=createLogProvider(c,Object.assign({},b)),this.getOrCreateCategory=this.getOrCreateCategory.bind(this)}getOrCreateCategory(c,b){if(c.indexOf(CATEGORY_PATH_SEPARATOR)!==-1)throw new Error(`Cannot create category '${c}', name cannot contain a '${CATEGORY_PATH_SEPARATOR}'.`);const _=b!==void 0?this.getParentCategory(b):void 0;return _===void 0?this.getOrCreateRootCategory(c):this.getOrCreateChildCategory(c,_)}updateRuntimeSettingsCategory(c,b){if(!c.id.startsWith(this._categoryProviderName))throw new Error(`Category '${c.name}' with LogId '${c.id}' is from a different CategoryProvider, cannot mix categories between providers.`);const _=this._categoriesById.get(c.id);_!==void 0&&(this._logProvider.updateLoggerRuntime(_.logger,{level:b.level}),!(b.disableRecursion!==void 0&&b.disableRecursion)&&_.children.forEach($=>this.updateRuntimeSettingsCategory($,b)))}updateRuntimeSettings(c){this._logProvider.updateRuntimeSettings(c)}getCurrentRuntimeConfig(){return Object.assign(Object.assign({},this._logProvider.runtimeSettings),{allowSameCategoryName:this._allowSameCategoryName})}getRegisteredCategories(){return[...this._categoriesById.values()]}getCategoryByPath(c){return this._categoriesByPath.get(c)}getParentCategory(c){let b;if(CategoryStorage.isLogId(c)){if(b=this._categoriesById.get(c),b===void 0)throw new Error(`Parent category was not found by LogId '${c}'. Are you sure you passed in the correct argument?`)}else if(b=this._categoriesById.get(c.id),b===void 0)throw new Error(`Parent category '${c.name}' was not found by it's LogId '${c.id}'. Are you sure you passed in the correct parent category?`);return b}getOrCreateRootCategory(c){const b=this._categoriesByPath.get(c);if(b){if(!this._allowSameCategoryName)throw new Error(`Category '${c} already exists, config flag allowSameCategoryName=false - therefore matching version 1 behavior (hence this Error)`);return b}const _=this._logProvider.getLogger(c),$=new CategoryImpl(_,c,void 0,this.getOrCreateCategory);return this._categoriesById.set($.id,$),this._categoriesByPath.set(c,$),$}getOrCreateChildCategory(c,b){if(!b.id.startsWith(this._categoryProviderName))throw new Error(`Parent category '${b.name}' with LogId '${b.id}' is from a different CategoryProvider, cannot mix categories between providers.`);const _=[...b.path,c].join(CATEGORY_PATH_SEPARATOR),$=this._categoriesByPath.get(_);if($){if(!this._allowSameCategoryName)throw new Error(`Child category '${c} already exists for parent category ${b.name}, config flag allowSameCategoryName=false - therefore matching version 1 behavior (hence this Error)`);return $}const k=this._logProvider.getLogger(_);this._logProvider.updateLoggerRuntime(k,{level:b.logger.runtimeSettings.level,channel:b.logger.runtimeSettings.channel});const et=new CategoryImpl(k,c,b,this.getOrCreateCategory);return this._categoriesById.set(et.id,et),this._categoriesByPath.set(et.path.join(CATEGORY_PATH_SEPARATOR),et),b.addChild(et),et}static isLogId(c){return typeof c=="string"}}class CategoryControlProviderImpl{constructor(c,b){this._provider=c,this._messageChannel=b,this._originalLogLevels=CategoryControlProviderImpl.loadCurrentGroupLogLevels(c)}get name(){return this._provider.name}showSettings(){let c=`Available categories (CategoryProvider '${this._provider.name}'):
`;const b=this.createCategoryInfoHierarchy(),_=b.size.toString().length,$=index.maxLengthStringValueInArray([...b.values()].map(et=>et.category.name+" ".repeat(et.depth))),k=[...b.values()].map((et,nt)=>CategoryControlProviderImpl.createSettingLineCategory(et,nt,_,$));c+=k.join(`
`)+(k.length>0?`
`:""),this._messageChannel(c)}help(){const c=`You can use the following commands (CategoryProvider ${this._provider.name}):
  showSettings()
    Shows the current configuration settings.
  update(level: CategoryControlProviderLogLevel, categoryId?: number | string, noRecurse?: boolean)
    Change the log level for a category (by default recursively).
      @param level      The log level to set - must be one of 'trace', 'debug', 'info', 'warn', 'error' or 'fatal'
      @param categoryId The category id or path of a category (e.g. root#child1) to update. Use showSettings() for id and/or name.
                        When omitted, it applies the level to all categories recursively.
  reset()
    Resets the log levels of the config groups back to when this control provider was created.
  save()
    Saves the current log levels for all categories of this provider. Use restore() to load last saved state.
  restore()
    Restore stored saved state, if any. Log levels will be set according to the saved state.
  help()
    Shows this help.
`;this._messageChannel(c)}reset(){const c=new Map(this._provider.getRegisteredCategories().map(b=>[b.id,b]));this._originalLogLevels.forEach((b,_)=>{const $=c.get(_);$!==void 0&&this._provider.updateRuntimeSettingsCategory($,{level:b,disableRecursion:!0}),c.delete(_)}),c.forEach(b=>{b.parent!==void 0&&this._provider.updateRuntimeSettingsCategory(b,{level:b.parent.logLevel,disableRecursion:!0})}),this._originalLogLevels=CategoryControlProviderImpl.loadCurrentGroupLogLevels(this._provider),this._messageChannel("Successfully reset log levels back to original state (from when this CategoryControlProvider was created).")}save(){if(!localStorage){this._messageChannel("Cannot save state, localStorage is not available.");return}const c=this._provider.getRegisteredCategories().filter(_=>_.parent===void 0).map(_=>CategoryControlProviderImpl.createCategorySaveData(_)),b={name:this._provider.name,rootCategories:c};localStorage.setItem(this.createKey(),JSON.stringify(b)),this._messageChannel(`Successfully saved state for CategoryControlProvider '${this._provider.name}'.`)}restore(c){const b=c!==void 0?c:!0;if(!localStorage){b&&this._messageChannel(`Will not attempt to restore state for CategoryControlProvider '${this._provider.name}', localStorage is not available.`);return}const _=this.createKey(),$=localStorage.getItem(_);if($===null){b&&this._messageChannel(`Cannot restore state for CategoryControlProvider '${this._provider.name}', no data available.`);return}try{const k=JSON.parse($);if(this._provider.name!==k.name){b&&this._messageChannel(`Cannot restore state for CategoryControlProvider '${this._provider.name}', data is not for provider - found name '${k.name}'.`);return}this.restoreBySaveData(k,b),this._messageChannel(`Successfully restored state for CategoryControlProvider '${this._provider.name}'`),this._originalLogLevels=CategoryControlProviderImpl.loadCurrentGroupLogLevels(this._provider)}catch{localStorage.removeItem(_),this._messageChannel(`Cannot restore state for CategoryControlProvider '${this._provider.name}', data is not valid. Invalid data removed from localStorage.`)}}update(c,b,_){typeof b>"u"?this.updateAll(c):typeof b=="number"?this.updateByIndex(c,b,_!==void 0?_:!1):this.updateByPath(c,b,_!==void 0?_:!1)}updateAll(c){const b=LogLevel$1.toLogLevel(c);this._provider.getRegisteredCategories().filter(_=>_.parent===void 0).forEach(_=>this._provider.updateRuntimeSettingsCategory(_,{level:b})),this._messageChannel(`Updated all categories to use log level '${c.toLowerCase()}'`)}updateByPath(c,b,_){const $=this._provider.getCategoryByPath(b);if($===void 0){this._messageChannel(`Failed to find a provider by path '${b}', please make sure to separate the parts by a ${CATEGORY_PATH_SEPARATOR}.`);return}this._provider.updateRuntimeSettingsCategory($,{level:LogLevel$1.toLogLevel(c),disableRecursion:_}),this._messageChannel(`Successfully updated category '${$.name}' with path '${b}' to log level '${c.toLowerCase()}'${_?"":" and recursively applied to children (if any)"}.`)}updateByIndex(c,b,_){if(b<0){this._messageChannel(`Cannot update category by index '${b}', it is negative.`);return}const $=this.createCategoryInfoHierarchy();if(b>=$.size){this._messageChannel(`Cannot update category by index '${b}', it is outside of the range of available categories, use showSettings() to see the indices.`);return}const k=[...$.values()][b].category;this._provider.updateRuntimeSettingsCategory(k,{level:LogLevel$1.toLogLevel(c),disableRecursion:_}),this._messageChannel(`Successfully updated category '${k.name}' by index '${b}' to log level '${c.toLowerCase()}'${_?"":" and recursively applied to children (if any)"}.`)}restoreBySaveData(c,b){const _=($,k)=>{const et=k.length>0?k+CATEGORY_PATH_SEPARATOR+$.name:$.name,nt=this._provider.getCategoryByPath(et);if(nt!==void 0){const ot=LogLevel$1.toLogLevel($.level);ot!==void 0?this._provider.updateRuntimeSettingsCategory(nt,{level:ot,disableRecursion:!0}):b&&this._messageChannel(`CategoryControlProvider '${this._provider.name}' - cannot restore log level for category path '${et}', log level is invalid.`);for(const ht of $.children)_(ht,et)}else b&&this._messageChannel(`CategoryControlProvider '${this._provider.name}' - failed to find a Category by path '${et}', will not restore category (and children)`)};for(const $ of c.rootCategories)_($,"")}createKey(){return`CategoryProvider-${this._provider.name}`}createCategoryInfoHierarchy(){const c=new Map;return this._provider.getRegisteredCategories().filter(_=>_.parent===void 0).forEach(_=>CategoryControlProviderImpl.addCategoryInfoHierarchy(_,0,c)),c}static createCategorySaveData(c){return{name:c.name,level:LogLevel$1[c.logLevel],children:c.children.map(b=>this.createCategorySaveData(b))}}static loadCurrentGroupLogLevels(c){return new Map(c.getRegisteredCategories().map(b=>[b.id,b.logLevel]))}static createSettingLineCategory(c,b,_,$){const et=" ".repeat(c.depth)+c.category.name;return`  [${index.padStart(b.toString(),_)}, ${index.padEnd(et,$)} (level=${index.padEnd(c.logLevel,5)})]`}static addCategoryInfoHierarchy(c,b,_){_.set(c.id,{category:c,logLevel:LogLevel$1[c.logLevel],depth:b}),c.children.forEach($=>this.addCategoryInfoHierarchy($,b+1,_))}}function categoryConfigDebug(a){return`CategoryConfig=level: ${LogLevel$1[a.level].toString()}, allowSameCategoryName=${a.allowSameCategoryName}`}class CategoryProviderService{constructor(){this._log=InternalLogger.getInternalLogger("category.impl.CategoryProviderService"),this._providers=new index.EnhancedMap}createLogProvider(c,b){const _=this._providers.compute(c,($,k)=>{if(k)throw new Error(`CategoryProvider with name '${c}' already exists, cannot create another.`);const et=mergeWithDefaults(b);return this._log.debug(()=>`Creating new CategoryProvider with name '${c}', using config settings '${categoryConfigDebug(et)}'.`),new CategoryProviderImpl(c,et)});if(_)return _;throw new Error("No CategoryProvider? This is a bug.")}getCategoryControl(c){const b=c||(_=>{if(console&&console.log)console.log(_);else throw new Error("Cannot use console (it is not present), please specify a custom function to write to.")});return{help:()=>b(CategoryProviderService.help()),showSettings:()=>b(this.showSettings()),getProvider:_=>this.getCategoryControlProviderByIdOrName(_,b)}}clear(){this._providers.clear()}showSettings(){let c=`Available CategoryProviders:
`;const b=this._providers.size.toString().length,_=index.maxLengthStringValueInArray([...this._providers.keys()]),$=[...this._providers.entries()].map((k,et)=>{const nt=k[0];return`  [${index.padStart(et.toString(),b)}, ${index.padEnd(nt,_)}]`});return c+=$.join(`
`)+($.length>0?`
`:""),c}getCategoryControlProviderByIdOrName(c,b){if(typeof c=="string"){const $=this._providers.get(c);if($===void 0)throw new Error(`Provider with name '${c}' does not exist.`);return new CategoryControlProviderImpl($,b)}const _=[...this._providers.values()];if(c<0||c>=_.length)throw new Error(`Provider with index '${c}' does not exist (outside of range).`);return new CategoryControlProviderImpl(_[c],b)}static help(){return`You can use the following commands:
  showSettings()
    Shows the current configuration settings.
  getProvider: (id: number | string): CategoryControlProvider
    Get access to a CategoryControlProvider to change log levels.
      @param id The id (use showSettings to see) or name of the provider
  help()
    Shows this help.
`}}const CATEGORY_PROVIDER_SERVICE=new CategoryProviderService,CATEGORY_LOG_CONTROL=a=>CATEGORY_PROVIDER_SERVICE.getCategoryControl(a);function mergeWithDefaults(a){const c={channel:DefaultChannels.createConsoleChannel(),allowSameCategoryName:!0,level:LogLevel$1.Error,dateFormatter:formatDate,argumentFormatter:formatArgument};return a?{channel:a.channel?a.channel:c.channel,allowSameCategoryName:a.allowSameCategoryName!==void 0?a.allowSameCategoryName:c.allowSameCategoryName,level:a.level?a.level:c.level,dateFormatter:a.dateFormatter?a.dateFormatter:c.dateFormatter,argumentFormatter:a.argumentFormatter?a.argumentFormatter:c.argumentFormatter}:c}var CategoryProvider;(function(a){function c(_,$){return CATEGORY_PROVIDER_SERVICE.createLogProvider(_,$)}a.createProvider=c;function b(){CATEGORY_PROVIDER_SERVICE.clear()}a.clear=b})(CategoryProvider||(CategoryProvider={}));const typescriptLoggingCategory_esm=Object.freeze(Object.defineProperty({__proto__:null,CATEGORY_LOG_CONTROL,get CategoryProvider(){return CategoryProvider}},Symbol.toStringTag,{value:"Module"})),require$$1$3=getAugmentedNamespace(typescriptLoggingCategory_esm);Object.defineProperty(logger,"__esModule",{value:!0});logger.logger=void 0;const typescript_logging_1=require$$2$1,typescript_logging_category_style_1=require$$1$3;logger.logger=typescript_logging_category_style_1.CategoryProvider.createProvider("ApiStream",{allowSameCategoryName:!0,level:typescript_logging_1.LogLevel.Warn});var version$4="1.0.38",__createBinding$3=commonjsGlobal$1&&commonjsGlobal$1.__createBinding||(Object.create?function(a,c,b,_){_===void 0&&(_=b);var $=Object.getOwnPropertyDescriptor(c,b);(!$||("get"in $?!c.__esModule:$.writable||$.configurable))&&($={enumerable:!0,get:function(){return c[b]}}),Object.defineProperty(a,_,$)}:function(a,c,b,_){_===void 0&&(_=b),a[_]=c[b]}),__setModuleDefault$3=commonjsGlobal$1&&commonjsGlobal$1.__setModuleDefault||(Object.create?function(a,c){Object.defineProperty(a,"default",{enumerable:!0,value:c})}:function(a,c){a.default=c}),__importStar$3=commonjsGlobal$1&&commonjsGlobal$1.__importStar||function(a){if(a&&a.__esModule)return a;var c={};if(a!=null)for(var b in a)b!=="default"&&Object.prototype.hasOwnProperty.call(a,b)&&__createBinding$3(c,a,b);return __setModuleDefault$3(c,a),c};Object.defineProperty(api$3,"__esModule",{value:!0});api$3.ApiClient=void 0;const NiceGrpc$1=__importStar$3(lib$1),abort_controller_x_1=require$$1$5,logger_1=logger,clientVersion$1=version$4;class ApiClient{constructor(c,b,_,$,k,et,nt){this.sessionId=c,this.sdkVersion=_,this.version=clientVersion$1,this.apiLogCallback=k,this.eventLogCallback=et,this.log=logger_1.logger.getCategory($),this.apikey=nt,this.channel=NiceGrpc$1.createChannel(b,NiceGrpc$1.FetchTransport()),this.clientFactory=NiceGrpc$1.createClientFactory().use(this.logMiddleware.bind(this))}async*logMiddleware(c,b){const{path:_}=c.method;try{const $=yield*c.next(c.request,b);if(this.log.debug(`-> ${_}: ok`),this.log.trace(`${JSON.stringify(c.request)} -> ${_}: ${JSON.stringify($)}`),this.apiLogCallback){let k=_.split("/"),et=k[1].split("."),nt=et[et.length-1],ot=et[et.length-2],ht=et[et.length-3],vt=k[2];this.apiLogCallback(ht,nt,vt,c.request,$)}return $}catch($){throw this.log.trace(`${JSON.stringify(c.request)} -> ${_}`),$ instanceof NiceGrpc$1.ClientError?this.log.warn(`-> ${_}: error: ${NiceGrpc$1.Status[$.code]}: ${$.details}`):(0,abort_controller_x_1.isAbortError)($)?this.log.warn(`-> ${_}: cancel`):this.log.warn(`-> ${_}: error: ${$==null?void 0:$.stack}`),$}}setAccessToken(c){(this.accessToken==null||this.accessToken!=c)&&(this.log.debug("access token refreshed"),this.accessToken=c,this.setup())}makeGrpcMetadata(){let c=NiceGrpc$1.Metadata({Authorization:`Bearer ${this.accessToken}`,ClientType:"nodejs",Version:this.version,SessionId:this.sessionId});return this.sdkVersion!=null&&c.set("SdkVersion",this.sdkVersion),c}makeGrpcMetadataApikey(){let c=NiceGrpc$1.Metadata({"x-api-key":this.apikey,ClientType:"nodejs",Version:this.version,SessionId:this.sessionId});return this.sdkVersion!=null&&c.set("SdkVersion",this.sdkVersion),c}setup(){let c={metadata:this.makeGrpcMetadata()};this._setup(c)}_setup(c){}}api$3.ApiClient=ApiClient;var decorator={};Object.defineProperty(decorator,"__esModule",{value:!0});decorator.RequiresSdkAuthentication=void 0;function RequiresSdkAuthentication(){return function(a,c){const b=Symbol(c);Object.defineProperty(a,c,{get:function(){if(!this[b])throw new Error("Please authenticate ApiStream by calling apiStream.load( accessToken )");return this[b]},set:function(_){this[b]=_}})}}decorator.RequiresSdkAuthentication=RequiresSdkAuthentication;var __createBinding$2=commonjsGlobal$1&&commonjsGlobal$1.__createBinding||(Object.create?function(a,c,b,_){_===void 0&&(_=b);var $=Object.getOwnPropertyDescriptor(c,b);(!$||("get"in $?!c.__esModule:$.writable||$.configurable))&&($={enumerable:!0,get:function(){return c[b]}}),Object.defineProperty(a,_,$)}:function(a,c,b,_){_===void 0&&(_=b),a[_]=c[b]}),__setModuleDefault$2=commonjsGlobal$1&&commonjsGlobal$1.__setModuleDefault||(Object.create?function(a,c){Object.defineProperty(a,"default",{enumerable:!0,value:c})}:function(a,c){a.default=c}),__decorate=commonjsGlobal$1&&commonjsGlobal$1.__decorate||function(a,c,b,_){var $=arguments.length,k=$<3?c:_===null?_=Object.getOwnPropertyDescriptor(c,b):_,et;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")k=Reflect.decorate(a,c,b,_);else for(var nt=a.length-1;nt>=0;nt--)(et=a[nt])&&(k=($<3?et(k):$>3?et(c,b,k):et(c,b))||k);return $>3&&k&&Object.defineProperty(c,b,k),k},__importStar$2=commonjsGlobal$1&&commonjsGlobal$1.__importStar||function(a){if(a&&a.__esModule)return a;var c={};if(a!=null)for(var b in a)b!=="default"&&Object.prototype.hasOwnProperty.call(a,b)&&__createBinding$2(c,a,b);return __setModuleDefault$2(c,a),c},__metadata=commonjsGlobal$1&&commonjsGlobal$1.__metadata||function(a,c){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(a,c)};Object.defineProperty(layoutapi,"__esModule",{value:!0});layoutapi.LayoutApi=void 0;__importStar$2(lib$1);const LayoutApiModel=__importStar$2(dist$2),api_1$1=api$3,decorator_1=decorator,LOG_CATEGORY$1="LayoutApi";class LayoutApi extends api_1$1.ApiClient{constructor(c,b,_,$,k,et){super(c,_,$,LOG_CATEGORY$1,k,void 0,et),this.handlers={},this.eventApi=b,this.eventApi.on("event",{name:`${LayoutApi.LAYOUTAPI_EVENT_PREFIX}:*`,ignoreSessionEvents:!0},nt=>{var ot;const[,ht]=nt.name.split(`${LayoutApi.LAYOUTAPI_EVENT_PREFIX}:`),[vt,_t]=ht.split(":"),kt=nt.payload;for(const $t of(ot=this.handlers[vt])!==null&&ot!==void 0?ot:[])$t(Object.values(kt).find(Tt=>!!Tt),_t)})}_setup(c){this.layer=this.clientFactory.create(LayoutApiModel.LayerServiceDefinition,this.channel,{"*":c}),this.layout=this.clientFactory.create(LayoutApiModel.LayoutServiceDefinition,this.channel,{"*":c})}async subscribeToLayout(c){await Promise.all([this.eventApi.subscribe(`${LayoutApi.LAYOUTAPI_EVENT_PREFIX}:${LayoutApiModel.EventType.EVENT_TYPE_LAYER}:*`,{target:{layoutId:c}}),this.eventApi.subscribe(`${LayoutApi.LAYOUTAPI_EVENT_PREFIX}:${LayoutApiModel.EventType.EVENT_TYPE_LAYOUT}:*`,{target:{layoutId:c}})])}async unsubscribeFromLayout(c){await Promise.all([this.eventApi.unsubscribe(`${LayoutApi.LAYOUTAPI_EVENT_PREFIX}:${LayoutApiModel.EventType.EVENT_TYPE_LAYER}:*`,{target:{layoutId:c}}),this.eventApi.unsubscribe(`${LayoutApi.LAYOUTAPI_EVENT_PREFIX}:${LayoutApiModel.EventType.EVENT_TYPE_LAYOUT}:*`,{target:{layoutId:c}})])}async subscribeToLayoutsInProject(c,b){await Promise.all([this.eventApi.subscribe(`${LayoutApi.LAYOUTAPI_EVENT_PREFIX}:${LayoutApiModel.EventType.EVENT_TYPE_LAYER}:*`,{target:{collectionId:c,projectId:b}}),this.eventApi.subscribe(`${LayoutApi.LAYOUTAPI_EVENT_PREFIX}:${LayoutApiModel.EventType.EVENT_TYPE_LAYOUT}:*`,{target:{collectionId:c,projectId:b}})])}async unsubscribeFromLayoutsInProject(c,b){await Promise.all([this.eventApi.unsubscribe(`${LayoutApi.LAYOUTAPI_EVENT_PREFIX}:${LayoutApiModel.EventType.EVENT_TYPE_LAYER}:*`,{target:{collectionId:c,projectId:b}}),this.eventApi.unsubscribe(`${LayoutApi.LAYOUTAPI_EVENT_PREFIX}:${LayoutApiModel.EventType.EVENT_TYPE_LAYOUT}:*`,{target:{collectionId:c,projectId:b}})])}on(c,b){var _;this.handlers[c]=(_=this.handlers[c])!==null&&_!==void 0?_:[],this.handlers[c].push(b)}off(c,b){this.handlers[c]=this.handlers[c].filter(_=>_!==b)}}LayoutApi.LAYOUTAPI_EVENT_PREFIX="apistream:layout";__decorate([(0,decorator_1.RequiresSdkAuthentication)(),__metadata("design:type",Object)],LayoutApi.prototype,"layout",void 0);__decorate([(0,decorator_1.RequiresSdkAuthentication)(),__metadata("design:type",Object)],LayoutApi.prototype,"layer",void 0);layoutapi.LayoutApi=LayoutApi;var liveapi={},api$2={},httpbody={},any={},__importDefault$d=commonjsGlobal$1&&commonjsGlobal$1.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(any,"__esModule",{value:!0});any.Any=any.protobufPackage=void 0;const minimal_1$6=__importDefault$d(minimal);any.protobufPackage="google.protobuf";function createBaseAny(){return{typeUrl:"",value:new Uint8Array}}any.Any={encode(a,c=minimal_1$6.default.Writer.create()){return a.typeUrl!==""&&c.uint32(10).string(a.typeUrl),a.value.length!==0&&c.uint32(18).bytes(a.value),c},decode(a,c){const b=a instanceof minimal_1$6.default.Reader?a:new minimal_1$6.default.Reader(a);let _=c===void 0?b.len:b.pos+c;const $=createBaseAny();for(;b.pos<_;){const k=b.uint32();switch(k>>>3){case 1:$.typeUrl=b.string();break;case 2:$.value=b.bytes();break;default:b.skipType(k&7);break}}return $},fromJSON(a){return{typeUrl:isSet$6(a.typeUrl)?String(a.typeUrl):"",value:isSet$6(a.value)?bytesFromBase64$1(a.value):new Uint8Array}},toJSON(a){const c={};return a.typeUrl!==void 0&&(c.typeUrl=a.typeUrl),a.value!==void 0&&(c.value=base64FromBytes$1(a.value!==void 0?a.value:new Uint8Array)),c},fromPartial(a){var c,b;const _=createBaseAny();return _.typeUrl=(c=a.typeUrl)!==null&&c!==void 0?c:"",_.value=(b=a.value)!==null&&b!==void 0?b:new Uint8Array,_}};var tsProtoGlobalThis$3=(()=>{if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof commonjsGlobal$1<"u")return commonjsGlobal$1;throw"Unable to locate global object"})();function bytesFromBase64$1(a){if(tsProtoGlobalThis$3.Buffer)return Uint8Array.from(tsProtoGlobalThis$3.Buffer.from(a,"base64"));{const c=tsProtoGlobalThis$3.atob(a),b=new Uint8Array(c.length);for(let _=0;_<c.length;++_)b[_]=c.charCodeAt(_);return b}}function base64FromBytes$1(a){if(tsProtoGlobalThis$3.Buffer)return tsProtoGlobalThis$3.Buffer.from(a).toString("base64");{const c=[];return a.forEach(b=>{c.push(String.fromCharCode(b))}),tsProtoGlobalThis$3.btoa(c.join(""))}}function isSet$6(a){return a!=null}var __importDefault$c=commonjsGlobal$1&&commonjsGlobal$1.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(httpbody,"__esModule",{value:!0});httpbody.HttpBody=httpbody.protobufPackage=void 0;const minimal_1$5=__importDefault$c(minimal),any_1=any;httpbody.protobufPackage="google.api";function createBaseHttpBody(){return{contentType:"",data:new Uint8Array,extensions:[]}}httpbody.HttpBody={encode(a,c=minimal_1$5.default.Writer.create()){a.contentType!==""&&c.uint32(10).string(a.contentType),a.data.length!==0&&c.uint32(18).bytes(a.data);for(const b of a.extensions)any_1.Any.encode(b,c.uint32(26).fork()).ldelim();return c},decode(a,c){const b=a instanceof minimal_1$5.default.Reader?a:new minimal_1$5.default.Reader(a);let _=c===void 0?b.len:b.pos+c;const $=createBaseHttpBody();for(;b.pos<_;){const k=b.uint32();switch(k>>>3){case 1:$.contentType=b.string();break;case 2:$.data=b.bytes();break;case 3:$.extensions.push(any_1.Any.decode(b,b.uint32()));break;default:b.skipType(k&7);break}}return $},fromJSON(a){return{contentType:isSet$5(a.contentType)?String(a.contentType):"",data:isSet$5(a.data)?bytesFromBase64(a.data):new Uint8Array,extensions:Array.isArray(a==null?void 0:a.extensions)?a.extensions.map(c=>any_1.Any.fromJSON(c)):[]}},toJSON(a){const c={};return a.contentType!==void 0&&(c.contentType=a.contentType),a.data!==void 0&&(c.data=base64FromBytes(a.data!==void 0?a.data:new Uint8Array)),a.extensions?c.extensions=a.extensions.map(b=>b?any_1.Any.toJSON(b):void 0):c.extensions=[],c},fromPartial(a){var c,b,_;const $=createBaseHttpBody();return $.contentType=(c=a.contentType)!==null&&c!==void 0?c:"",$.data=(b=a.data)!==null&&b!==void 0?b:new Uint8Array,$.extensions=((_=a.extensions)===null||_===void 0?void 0:_.map(k=>any_1.Any.fromPartial(k)))||[],$}};var tsProtoGlobalThis$2=(()=>{if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof commonjsGlobal$1<"u")return commonjsGlobal$1;throw"Unable to locate global object"})();function bytesFromBase64(a){if(tsProtoGlobalThis$2.Buffer)return Uint8Array.from(tsProtoGlobalThis$2.Buffer.from(a,"base64"));{const c=tsProtoGlobalThis$2.atob(a),b=new Uint8Array(c.length);for(let _=0;_<c.length;++_)b[_]=c.charCodeAt(_);return b}}function base64FromBytes(a){if(tsProtoGlobalThis$2.Buffer)return tsProtoGlobalThis$2.Buffer.from(a).toString("base64");{const c=[];return a.forEach(b=>{c.push(String.fromCharCode(b))}),tsProtoGlobalThis$2.btoa(c.join(""))}}function isSet$5(a){return a!=null}var field_mask={},__importDefault$b=commonjsGlobal$1&&commonjsGlobal$1.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(field_mask,"__esModule",{value:!0});field_mask.FieldMask=field_mask.protobufPackage=void 0;const minimal_1$4=__importDefault$b(minimal);field_mask.protobufPackage="google.protobuf";function createBaseFieldMask(){return{paths:[]}}field_mask.FieldMask={encode(a,c=minimal_1$4.default.Writer.create()){for(const b of a.paths)c.uint32(10).string(b);return c},decode(a,c){const b=a instanceof minimal_1$4.default.Reader?a:new minimal_1$4.default.Reader(a);let _=c===void 0?b.len:b.pos+c;const $=createBaseFieldMask();for(;b.pos<_;){const k=b.uint32();switch(k>>>3){case 1:$.paths.push(b.string());break;default:b.skipType(k&7);break}}return $},fromJSON(a){return{paths:typeof a=="string"?a.split(",").filter(Boolean):Array.isArray(a==null?void 0:a.paths)?a.paths.map(String):[]}},toJSON(a){return a.paths.join(",")},fromPartial(a){var c;const b=createBaseFieldMask();return b.paths=((c=a.paths)===null||c===void 0?void 0:c.map(_=>_))||[],b},wrap(a){const c=createBaseFieldMask();return c.paths=a,c},unwrap(a){return a.paths}};var struct$1={};(function(a){var c=commonjsGlobal$1&&commonjsGlobal$1.__importDefault||function(Tt){return Tt&&Tt.__esModule?Tt:{default:Tt}};Object.defineProperty(a,"__esModule",{value:!0}),a.ListValue=a.Value=a.Struct_FieldsEntry=a.Struct=a.nullValueToNumber=a.nullValueToJSON=a.nullValueFromJSON=a.NullValue=a.protobufPackage=void 0;const b=c(minimal);a.protobufPackage="google.protobuf";var _;(function(Tt){Tt.NULL_VALUE="NULL_VALUE"})(_=a.NullValue||(a.NullValue={}));function $(Tt){switch(Tt){case 0:case"NULL_VALUE":return _.NULL_VALUE;default:throw new _t.Error("Unrecognized enum value "+Tt+" for enum NullValue")}}a.nullValueFromJSON=$;function k(Tt){switch(Tt){case _.NULL_VALUE:return"NULL_VALUE";default:throw new _t.Error("Unrecognized enum value "+Tt+" for enum NullValue")}}a.nullValueToJSON=k;function et(Tt){switch(Tt){case _.NULL_VALUE:return 0;default:throw new _t.Error("Unrecognized enum value "+Tt+" for enum NullValue")}}a.nullValueToNumber=et;function nt(){return{fields:{}}}a.Struct={encode(Tt,At=b.default.Writer.create()){return Object.entries(Tt.fields).forEach(([Mt,Dt])=>{Dt!==void 0&&a.Struct_FieldsEntry.encode({key:Mt,value:Dt},At.uint32(10).fork()).ldelim()}),At},decode(Tt,At){const Mt=Tt instanceof b.default.Reader?Tt:new b.default.Reader(Tt);let Dt=At===void 0?Mt.len:Mt.pos+At;const Rt=nt();for(;Mt.pos<Dt;){const xt=Mt.uint32();switch(xt>>>3){case 1:const Jt=a.Struct_FieldsEntry.decode(Mt,Mt.uint32());Jt.value!==void 0&&(Rt.fields[Jt.key]=Jt.value);break;default:Mt.skipType(xt&7);break}}return Rt},fromJSON(Tt){return{fields:kt(Tt.fields)?Object.entries(Tt.fields).reduce((At,[Mt,Dt])=>(At[Mt]=Dt,At),{}):{}}},toJSON(Tt){const At={};return At.fields={},Tt.fields&&Object.entries(Tt.fields).forEach(([Mt,Dt])=>{At.fields[Mt]=Dt}),At},fromPartial(Tt){var At;const Mt=nt();return Mt.fields=Object.entries((At=Tt.fields)!==null&&At!==void 0?At:{}).reduce((Dt,[Rt,xt])=>(xt!==void 0&&(Dt[Rt]=xt),Dt),{}),Mt},wrap(Tt){const At=nt();return Tt!==void 0&&Object.keys(Tt).forEach(Mt=>{At.fields[Mt]=Tt[Mt]}),At},unwrap(Tt){const At={};return Object.keys(Tt.fields).forEach(Mt=>{At[Mt]=Tt.fields[Mt]}),At}};function ot(){return{key:"",value:void 0}}a.Struct_FieldsEntry={encode(Tt,At=b.default.Writer.create()){return Tt.key!==""&&At.uint32(10).string(Tt.key),Tt.value!==void 0&&a.Value.encode(a.Value.wrap(Tt.value),At.uint32(18).fork()).ldelim(),At},decode(Tt,At){const Mt=Tt instanceof b.default.Reader?Tt:new b.default.Reader(Tt);let Dt=At===void 0?Mt.len:Mt.pos+At;const Rt=ot();for(;Mt.pos<Dt;){const xt=Mt.uint32();switch(xt>>>3){case 1:Rt.key=Mt.string();break;case 2:Rt.value=a.Value.unwrap(a.Value.decode(Mt,Mt.uint32()));break;default:Mt.skipType(xt&7);break}}return Rt},fromJSON(Tt){return{key:$t(Tt.key)?String(Tt.key):"",value:$t(Tt==null?void 0:Tt.value)?Tt.value:void 0}},toJSON(Tt){const At={};return Tt.key!==void 0&&(At.key=Tt.key),Tt.value!==void 0&&(At.value=Tt.value),At},fromPartial(Tt){var At,Mt;const Dt=ot();return Dt.key=(At=Tt.key)!==null&&At!==void 0?At:"",Dt.value=(Mt=Tt.value)!==null&&Mt!==void 0?Mt:void 0,Dt}};function ht(){return{nullValue:void 0,numberValue:void 0,stringValue:void 0,boolValue:void 0,structValue:void 0,listValue:void 0}}a.Value={encode(Tt,At=b.default.Writer.create()){return Tt.nullValue!==void 0&&At.uint32(8).int32(et(Tt.nullValue)),Tt.numberValue!==void 0&&At.uint32(17).double(Tt.numberValue),Tt.stringValue!==void 0&&At.uint32(26).string(Tt.stringValue),Tt.boolValue!==void 0&&At.uint32(32).bool(Tt.boolValue),Tt.structValue!==void 0&&a.Struct.encode(a.Struct.wrap(Tt.structValue),At.uint32(42).fork()).ldelim(),Tt.listValue!==void 0&&a.ListValue.encode(a.ListValue.wrap(Tt.listValue),At.uint32(50).fork()).ldelim(),At},decode(Tt,At){const Mt=Tt instanceof b.default.Reader?Tt:new b.default.Reader(Tt);let Dt=At===void 0?Mt.len:Mt.pos+At;const Rt=ht();for(;Mt.pos<Dt;){const xt=Mt.uint32();switch(xt>>>3){case 1:Rt.nullValue=$(Mt.int32());break;case 2:Rt.numberValue=Mt.double();break;case 3:Rt.stringValue=Mt.string();break;case 4:Rt.boolValue=Mt.bool();break;case 5:Rt.structValue=a.Struct.unwrap(a.Struct.decode(Mt,Mt.uint32()));break;case 6:Rt.listValue=a.ListValue.unwrap(a.ListValue.decode(Mt,Mt.uint32()));break;default:Mt.skipType(xt&7);break}}return Rt},fromJSON(Tt){return{nullValue:$t(Tt.nullValue)?$(Tt.nullValue):void 0,numberValue:$t(Tt.numberValue)?Number(Tt.numberValue):void 0,stringValue:$t(Tt.stringValue)?String(Tt.stringValue):void 0,boolValue:$t(Tt.boolValue)?!!Tt.boolValue:void 0,structValue:kt(Tt.structValue)?Tt.structValue:void 0,listValue:Array.isArray(Tt.listValue)?[...Tt.listValue]:void 0}},toJSON(Tt){const At={};return Tt.nullValue!==void 0&&(At.nullValue=Tt.nullValue!==void 0?k(Tt.nullValue):void 0),Tt.numberValue!==void 0&&(At.numberValue=Tt.numberValue),Tt.stringValue!==void 0&&(At.stringValue=Tt.stringValue),Tt.boolValue!==void 0&&(At.boolValue=Tt.boolValue),Tt.structValue!==void 0&&(At.structValue=Tt.structValue),Tt.listValue!==void 0&&(At.listValue=Tt.listValue),At},fromPartial(Tt){var At,Mt,Dt,Rt,xt,Jt;const ar=ht();return ar.nullValue=(At=Tt.nullValue)!==null&&At!==void 0?At:void 0,ar.numberValue=(Mt=Tt.numberValue)!==null&&Mt!==void 0?Mt:void 0,ar.stringValue=(Dt=Tt.stringValue)!==null&&Dt!==void 0?Dt:void 0,ar.boolValue=(Rt=Tt.boolValue)!==null&&Rt!==void 0?Rt:void 0,ar.structValue=(xt=Tt.structValue)!==null&&xt!==void 0?xt:void 0,ar.listValue=(Jt=Tt.listValue)!==null&&Jt!==void 0?Jt:void 0,ar},wrap(Tt){const At=ht();if(Tt===null)At.nullValue=_.NULL_VALUE;else if(typeof Tt=="boolean")At.boolValue=Tt;else if(typeof Tt=="number")At.numberValue=Tt;else if(typeof Tt=="string")At.stringValue=Tt;else if(Array.isArray(Tt))At.listValue=Tt;else if(typeof Tt=="object")At.structValue=Tt;else if(typeof Tt<"u")throw new Error("Unsupported any value type: "+typeof Tt);return At},unwrap(Tt){if((Tt==null?void 0:Tt.stringValue)!==void 0)return Tt.stringValue;if((Tt==null?void 0:Tt.numberValue)!==void 0)return Tt.numberValue;if((Tt==null?void 0:Tt.boolValue)!==void 0)return Tt.boolValue;if((Tt==null?void 0:Tt.structValue)!==void 0)return Tt.structValue;if((Tt==null?void 0:Tt.listValue)!==void 0)return Tt.listValue;if((Tt==null?void 0:Tt.nullValue)!==void 0)return null}};function vt(){return{values:[]}}a.ListValue={encode(Tt,At=b.default.Writer.create()){for(const Mt of Tt.values)a.Value.encode(a.Value.wrap(Mt),At.uint32(10).fork()).ldelim();return At},decode(Tt,At){const Mt=Tt instanceof b.default.Reader?Tt:new b.default.Reader(Tt);let Dt=At===void 0?Mt.len:Mt.pos+At;const Rt=vt();for(;Mt.pos<Dt;){const xt=Mt.uint32();switch(xt>>>3){case 1:Rt.values.push(a.Value.unwrap(a.Value.decode(Mt,Mt.uint32())));break;default:Mt.skipType(xt&7);break}}return Rt},fromJSON(Tt){return{values:Array.isArray(Tt==null?void 0:Tt.values)?[...Tt.values]:[]}},toJSON(Tt){const At={};return Tt.values?At.values=Tt.values.map(Mt=>Mt):At.values=[],At},fromPartial(Tt){var At;const Mt=vt();return Mt.values=((At=Tt.values)===null||At===void 0?void 0:At.map(Dt=>Dt))||[],Mt},wrap(Tt){const At=vt();return At.values=Tt??[],At},unwrap(Tt){return Tt.values}};var _t=(()=>{if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof commonjsGlobal$1<"u")return commonjsGlobal$1;throw"Unable to locate global object"})();function kt(Tt){return typeof Tt=="object"&&Tt!==null}function $t(Tt){return Tt!=null}})(struct$1);var timestamp$3={},__importDefault$a=commonjsGlobal$1&&commonjsGlobal$1.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(timestamp$3,"__esModule",{value:!0});timestamp$3.Timestamp=timestamp$3.protobufPackage=void 0;const long_1$3=__importDefault$a(umdExports),minimal_1$3=__importDefault$a(minimal);timestamp$3.protobufPackage="google.protobuf";function createBaseTimestamp$2(){return{seconds:0,nanos:0}}timestamp$3.Timestamp={encode(a,c=minimal_1$3.default.Writer.create()){return a.seconds!==0&&c.uint32(8).int64(a.seconds),a.nanos!==0&&c.uint32(16).int32(a.nanos),c},decode(a,c){const b=a instanceof minimal_1$3.default.Reader?a:new minimal_1$3.default.Reader(a);let _=c===void 0?b.len:b.pos+c;const $=createBaseTimestamp$2();for(;b.pos<_;){const k=b.uint32();switch(k>>>3){case 1:$.seconds=longToNumber$3(b.int64());break;case 2:$.nanos=b.int32();break;default:b.skipType(k&7);break}}return $},fromJSON(a){return{seconds:isSet$4(a.seconds)?Number(a.seconds):0,nanos:isSet$4(a.nanos)?Number(a.nanos):0}},toJSON(a){const c={};return a.seconds!==void 0&&(c.seconds=Math.round(a.seconds)),a.nanos!==void 0&&(c.nanos=Math.round(a.nanos)),c},fromPartial(a){var c,b;const _=createBaseTimestamp$2();return _.seconds=(c=a.seconds)!==null&&c!==void 0?c:0,_.nanos=(b=a.nanos)!==null&&b!==void 0?b:0,_}};var tsProtoGlobalThis$1=(()=>{if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof commonjsGlobal$1<"u")return commonjsGlobal$1;throw"Unable to locate global object"})();function longToNumber$3(a){if(a.gt(Number.MAX_SAFE_INTEGER))throw new tsProtoGlobalThis$1.Error("Value is larger than Number.MAX_SAFE_INTEGER");return a.toNumber()}minimal_1$3.default.util.Long!==long_1$3.default&&(minimal_1$3.default.util.Long=long_1$3.default,minimal_1$3.default.configure());function isSet$4(a){return a!=null}(function(a){var c=commonjsGlobal$1&&commonjsGlobal$1.__importDefault||function(j){return j&&j.__esModule?j:{default:j}};Object.defineProperty(a,"__esModule",{value:!0}),a.S3ACL=a.projectBroadcastPhaseToNumber=a.projectBroadcastPhaseToJSON=a.projectBroadcastPhaseFromJSON=a.ProjectBroadcastPhase=a.videoCodecRateControlModeToNumber=a.videoCodecRateControlModeToJSON=a.videoCodecRateControlModeFromJSON=a.VideoCodecRateControlMode=a.audioCodecToNumber=a.audioCodecToJSON=a.audioCodecFromJSON=a.AudioCodec=a.videoCodecProfileToNumber=a.videoCodecProfileToJSON=a.videoCodecProfileFromJSON=a.VideoCodecProfile=a.videoCodecToNumber=a.videoCodecToJSON=a.videoCodecFromJSON=a.VideoCodec=a.renderingQualityToNumber=a.renderingQualityToJSON=a.renderingQualityFromJSON=a.RenderingQuality=a.audioChannelLayoutToNumber=a.audioChannelLayoutToJSON=a.audioChannelLayoutFromJSON=a.AudioChannelLayout=a.videoColorSpaceToNumber=a.videoColorSpaceToJSON=a.videoColorSpaceFromJSON=a.VideoColorSpace=a.imageFormatToNumber=a.imageFormatToJSON=a.imageFormatFromJSON=a.ImageFormat=a.webhookSubtypeToNumber=a.webhookSubtypeToJSON=a.webhookSubtypeFromJSON=a.WebhookSubtype=a.webhookTypeToNumber=a.webhookTypeToJSON=a.webhookTypeFromJSON=a.WebhookType=a.broadcastOriginToNumber=a.broadcastOriginToJSON=a.broadcastOriginFromJSON=a.BroadcastOrigin=a.protobufPackage=void 0,a.SourceRtmpPushAddress=a.Encoding=a.AudioEncoding=a.VideoEncoding=a.VideoCodecRateControl=a.Rendering=a.AudioRendering=a.VideoRendering=a.UpdateAccountConfigurationResponse=a.UpdateAccountConfigurationRequest=a.GetAccountConfigurationResponse=a.GetAccountConfigurationRequest=a.AccountConfiguration=a.AccountConfigurationHook=a.WebhookConfiguration=a.WebhookResponse=a.WebhookRequest=a.BroadcastOriginSourceMetadata=a.BroadcastOriginExternalMetadata=a.eventTypeToNumber=a.eventTypeToJSON=a.eventTypeFromJSON=a.EventType=a.eventSubTypeToNumber=a.eventSubTypeToJSON=a.eventSubTypeFromJSON=a.EventSubType=a.connectStateToNumber=a.connectStateToJSON=a.connectStateFromJSON=a.ConnectState=a.projectBroadcastErrorToNumber=a.projectBroadcastErrorToJSON=a.projectBroadcastErrorFromJSON=a.ProjectBroadcastError=a.roleToNumber=a.roleToJSON=a.roleFromJSON=a.Role=a.regionToNumber=a.regionToJSON=a.regionFromJSON=a.Region=a.sourceTriggerActionToNumber=a.sourceTriggerActionToJSON=a.sourceTriggerActionFromJSON=a.SourceTriggerAction=a.s3ACLToNumber=a.s3ACLToJSON=a.s3ACLFromJSON=void 0,a.CreateProjectResponse=a.CreateProjectRequest=a.GetCollectionsResponse=a.GetCollectionsRequest=a.DeleteCollectionResponse=a.DeleteCollectionRequest=a.UpdateCollectionResponse=a.UpdateCollectionRequest=a.GetCollectionResponse=a.GetCollectionRequest=a.CreateCollectionResponse=a.CreateCollectionRequest=a.Collection=a.Project=a.Destination=a.Source=a.ProjectBroadcastStatus=a.DirectIngestUrl=a.LatLong=a.WebRtcAccess=a.WebRtc=a.HostedWebRtc=a.Composition=a.ExternalComposition=a.SceneComposition=a.StudioSdkComposition=a.PreviewAddress=a.PreviewHlsPullAddress=a.ProjectTrigger=a.WebRtcTrigger=a.SourceTrigger=a.DestinationAddress=a.S3StorageAddress=a.PreviewWebRtcAddress=a.ObjectStoragePackaging=a.HlsPackaging=a.HlsLifecycle=a.HlsLifecycleVod=a.HlsLifecycleLive=a.DestinationAgoraPushAddress=a.DestinationSrtPushAddress=a.DestinationRtmpPushAddress=a.SourceAddress=a.RuntimeSourceAddress=a.DirectSrtAddress=a.DirectRTMPAddress=a.DynamicAddress=a.SrtPullAddress=a.RtmpPullAddress=a.SrtPushAddress=void 0,a.GuestAccessTokenDirect=a.LookupGuestCodeResponse=a.LookupGuestCodeRequest=a.CreateAccessTokenResponse=a.CreateAccessTokenRequest=a.GetSourcePlaylistResponse=a.GetSourcePlaylistRequest=a.RemoveSourceFromProjectResponse=a.RemoveSourceFromProjectRequest=a.UpdateSourceResponse=a.UpdateSourceRequest=a.GetSourcesResponse=a.GetSourcesRequest=a.GetSourceResponse=a.GetSourceRequest=a.UpdateSourceInProjectResponse=a.UpdateSourceInProjectRequest=a.AddSourceToProjectResponse=a.AddSourceToProjectRequest=a.DeleteSourceResponse=a.DeleteSourceRequest=a.CreateSourceResponse=a.CreateSourceRequest=a.UpdateDestinationResponse=a.UpdateDestinationRequest=a.DeleteDestinationResponse=a.DeleteDestinationRequest=a.GetDestinationResponse=a.GetDestinationRequest=a.CreateDestinationResponse=a.CreateDestinationRequest=a.StopProjectWebRtcResponse=a.StopProjectWebRtcRequest=a.StartProjectWebRtcResponse=a.StartProjectWebRtcRequest=a.GetProjectBroadcastStatusResponse=a.GetProjectBroadcastStatusRequest=a.GetProjectBroadcastSnapshotResponse=a.GetProjectBroadcastSnapshotRequest=a.GetProjectResponse=a.GetProjectRequest=a.StopProjectBroadcastResponse=a.StopProjectBroadcastRequest=a.StartProjectBroadcastResponse=a.StartProjectBroadcastRequest_DynamicSourcesEntry=a.StartProjectBroadcastRequest=a.DeleteProjectResponse=a.DeleteProjectRequest=a.UpdateProjectResponse=a.UpdateProjectRequest=void 0,a.GetServiceResponse=a.Service=a.GetServiceRequest=a.LiveEvent=a.SourceEvent=a.ProjectEvent=a.DestinationEvent=a.CollectionEvent=a.SourceStateEvent=a.SourceRemoveEvent=a.SourceAddEvent=a.SourceUpdateEvent=a.SourceDeleteEvent=a.SourceCreateEvent=a.CollectionUpdateEvent=a.CollectionDeleteEvent=a.CollectionCreateEvent=a.ProjectBroadcastStateEvent=a.ProjectUpdateEvent=a.ProjectDeleteEvent=a.ProjectCreateEvent=a.DestinationStateEvent=a.DestinationUpdateEvent=a.DestinationDeleteEvent=a.DestinationCreateEvent=a.GetTestTokenResponse=a.GetTestTokenRequest=a.GetJsonWebKeySetResponse=a.GetJsonWebKeySetRequest=a.JsonWebKey=a.DeleteGuestCodeResponse=a.DeleteGuestCodeRequest=a.GetGuestCodesResponse=a.GetGuestCodesRequest=a.GetGuestCodeResponse=a.GetGuestCodeRequest=a.CreateGuestCodeResponse=a.CreateGuestCodeRequest=a.IssuedGuestCode=a.GuestCodeRedirectResponse=a.GuestCodeRedirectRequest=a.GuestCode=a.RefreshAccessTokenResponse=a.RefreshAccessTokenRequest=a.CreateWebRtcAccessTokenResponse=a.CreateWebRtcAccessTokenRequest=a.CreateGuestAccessTokenResponse=a.CreateGuestAccessTokenRequest=a.GuestAccessToken=a.GuestAccessTokenExchange=void 0,a.AccountServiceDefinition=a.AccountServiceClientImpl=a.PublicAuthenticationServiceDefinition=a.PublicAuthenticationServiceClientImpl=a.AuthenticationServiceDefinition=a.AuthenticationServiceClientImpl=a.BackendAuthenticationServiceDefinition=a.BackendAuthenticationServiceClientImpl=a.SourceServiceDefinition=a.SourceServiceClientImpl=a.DestinationServiceDefinition=a.DestinationServiceClientImpl=a.ProjectServiceDefinition=a.ProjectServiceClientImpl=a.CollectionServiceDefinition=a.CollectionServiceClientImpl=a.AccountConfigurationServiceDefinition=a.AccountConfigurationServiceClientImpl=void 0;const b=c(minimal),_=httpbody,$=field_mask,k=struct$1,et=timestamp$3;a.protobufPackage="live.v21";var nt;(function(j){j.BROADCAST_ORIGIN_UNSPECIFIED="BROADCAST_ORIGIN_UNSPECIFIED",j.BROADCAST_ORIGIN_API="BROADCAST_ORIGIN_API",j.BROADCAST_ORIGIN_SOURCE="BROADCAST_ORIGIN_SOURCE",j.BROADCAST_ORIGIN_EXTERNAL="BROADCAST_ORIGIN_EXTERNAL",j.BROADCAST_ORIGIN_SYSTEM="BROADCAST_ORIGIN_SYSTEM"})(nt=a.BroadcastOrigin||(a.BroadcastOrigin={}));function ot(j){switch(j){case 0:case"BROADCAST_ORIGIN_UNSPECIFIED":return nt.BROADCAST_ORIGIN_UNSPECIFIED;case 1:case"BROADCAST_ORIGIN_API":return nt.BROADCAST_ORIGIN_API;case 2:case"BROADCAST_ORIGIN_SOURCE":return nt.BROADCAST_ORIGIN_SOURCE;case 3:case"BROADCAST_ORIGIN_EXTERNAL":return nt.BROADCAST_ORIGIN_EXTERNAL;case 4:case"BROADCAST_ORIGIN_SYSTEM":return nt.BROADCAST_ORIGIN_SYSTEM;default:throw new tn.Error("Unrecognized enum value "+j+" for enum BroadcastOrigin")}}a.broadcastOriginFromJSON=ot;function ht(j){switch(j){case nt.BROADCAST_ORIGIN_UNSPECIFIED:return"BROADCAST_ORIGIN_UNSPECIFIED";case nt.BROADCAST_ORIGIN_API:return"BROADCAST_ORIGIN_API";case nt.BROADCAST_ORIGIN_SOURCE:return"BROADCAST_ORIGIN_SOURCE";case nt.BROADCAST_ORIGIN_EXTERNAL:return"BROADCAST_ORIGIN_EXTERNAL";case nt.BROADCAST_ORIGIN_SYSTEM:return"BROADCAST_ORIGIN_SYSTEM";default:throw new tn.Error("Unrecognized enum value "+j+" for enum BroadcastOrigin")}}a.broadcastOriginToJSON=ht;function vt(j){switch(j){case nt.BROADCAST_ORIGIN_UNSPECIFIED:return 0;case nt.BROADCAST_ORIGIN_API:return 1;case nt.BROADCAST_ORIGIN_SOURCE:return 2;case nt.BROADCAST_ORIGIN_EXTERNAL:return 3;case nt.BROADCAST_ORIGIN_SYSTEM:return 4;default:throw new tn.Error("Unrecognized enum value "+j+" for enum BroadcastOrigin")}}a.broadcastOriginToNumber=vt;var _t;(function(j){j.WEBHOOK_TYPE_UNSPECIFIED="WEBHOOK_TYPE_UNSPECIFIED",j.WEBHOOK_TYPE_HOOK="WEBHOOK_TYPE_HOOK",j.WEBHOOK_TYPE_EVENT="WEBHOOK_TYPE_EVENT"})(_t=a.WebhookType||(a.WebhookType={}));function kt(j){switch(j){case 0:case"WEBHOOK_TYPE_UNSPECIFIED":return _t.WEBHOOK_TYPE_UNSPECIFIED;case 1:case"WEBHOOK_TYPE_HOOK":return _t.WEBHOOK_TYPE_HOOK;case 2:case"WEBHOOK_TYPE_EVENT":return _t.WEBHOOK_TYPE_EVENT;default:throw new tn.Error("Unrecognized enum value "+j+" for enum WebhookType")}}a.webhookTypeFromJSON=kt;function $t(j){switch(j){case _t.WEBHOOK_TYPE_UNSPECIFIED:return"WEBHOOK_TYPE_UNSPECIFIED";case _t.WEBHOOK_TYPE_HOOK:return"WEBHOOK_TYPE_HOOK";case _t.WEBHOOK_TYPE_EVENT:return"WEBHOOK_TYPE_EVENT";default:throw new tn.Error("Unrecognized enum value "+j+" for enum WebhookType")}}a.webhookTypeToJSON=$t;function Tt(j){switch(j){case _t.WEBHOOK_TYPE_UNSPECIFIED:return 0;case _t.WEBHOOK_TYPE_HOOK:return 1;case _t.WEBHOOK_TYPE_EVENT:return 2;default:throw new tn.Error("Unrecognized enum value "+j+" for enum WebhookType")}}a.webhookTypeToNumber=Tt;var At;(function(j){j.WEBHOOK_SUBTYPE_UNSPECIFIED="WEBHOOK_SUBTYPE_UNSPECIFIED",j.WEBHOOK_SUBTYPE_START_BROADCAST="WEBHOOK_SUBTYPE_START_BROADCAST",j.WEBHOOK_SUBTYPE_START_WEBRTC="WEBHOOK_SUBTYPE_START_WEBRTC",j.WEBHOOK_SUBTYPE_JOIN_WEBRTC="WEBHOOK_SUBTYPE_JOIN_WEBRTC"})(At=a.WebhookSubtype||(a.WebhookSubtype={}));function Mt(j){switch(j){case 0:case"WEBHOOK_SUBTYPE_UNSPECIFIED":return At.WEBHOOK_SUBTYPE_UNSPECIFIED;case 1:case"WEBHOOK_SUBTYPE_START_BROADCAST":return At.WEBHOOK_SUBTYPE_START_BROADCAST;case 2:case"WEBHOOK_SUBTYPE_START_WEBRTC":return At.WEBHOOK_SUBTYPE_START_WEBRTC;case 3:case"WEBHOOK_SUBTYPE_JOIN_WEBRTC":return At.WEBHOOK_SUBTYPE_JOIN_WEBRTC;default:throw new tn.Error("Unrecognized enum value "+j+" for enum WebhookSubtype")}}a.webhookSubtypeFromJSON=Mt;function Dt(j){switch(j){case At.WEBHOOK_SUBTYPE_UNSPECIFIED:return"WEBHOOK_SUBTYPE_UNSPECIFIED";case At.WEBHOOK_SUBTYPE_START_BROADCAST:return"WEBHOOK_SUBTYPE_START_BROADCAST";case At.WEBHOOK_SUBTYPE_START_WEBRTC:return"WEBHOOK_SUBTYPE_START_WEBRTC";case At.WEBHOOK_SUBTYPE_JOIN_WEBRTC:return"WEBHOOK_SUBTYPE_JOIN_WEBRTC";default:throw new tn.Error("Unrecognized enum value "+j+" for enum WebhookSubtype")}}a.webhookSubtypeToJSON=Dt;function Rt(j){switch(j){case At.WEBHOOK_SUBTYPE_UNSPECIFIED:return 0;case At.WEBHOOK_SUBTYPE_START_BROADCAST:return 1;case At.WEBHOOK_SUBTYPE_START_WEBRTC:return 2;case At.WEBHOOK_SUBTYPE_JOIN_WEBRTC:return 3;default:throw new tn.Error("Unrecognized enum value "+j+" for enum WebhookSubtype")}}a.webhookSubtypeToNumber=Rt;var xt;(function(j){j.IMAGE_FORMAT_UNSPECIFIED="IMAGE_FORMAT_UNSPECIFIED",j.IMAGE_FORMAT_JPEG="IMAGE_FORMAT_JPEG"})(xt=a.ImageFormat||(a.ImageFormat={}));function Jt(j){switch(j){case 0:case"IMAGE_FORMAT_UNSPECIFIED":return xt.IMAGE_FORMAT_UNSPECIFIED;case 1:case"IMAGE_FORMAT_JPEG":return xt.IMAGE_FORMAT_JPEG;default:throw new tn.Error("Unrecognized enum value "+j+" for enum ImageFormat")}}a.imageFormatFromJSON=Jt;function ar(j){switch(j){case xt.IMAGE_FORMAT_UNSPECIFIED:return"IMAGE_FORMAT_UNSPECIFIED";case xt.IMAGE_FORMAT_JPEG:return"IMAGE_FORMAT_JPEG";default:throw new tn.Error("Unrecognized enum value "+j+" for enum ImageFormat")}}a.imageFormatToJSON=ar;function nr(j){switch(j){case xt.IMAGE_FORMAT_UNSPECIFIED:return 0;case xt.IMAGE_FORMAT_JPEG:return 1;default:throw new tn.Error("Unrecognized enum value "+j+" for enum ImageFormat")}}a.imageFormatToNumber=nr;var pr;(function(j){j.VIDEO_COLOR_SPACE_UNSPECIFIED="VIDEO_COLOR_SPACE_UNSPECIFIED",j.VIDEO_COLOR_SPACE_YUV420="VIDEO_COLOR_SPACE_YUV420"})(pr=a.VideoColorSpace||(a.VideoColorSpace={}));function ur(j){switch(j){case 0:case"VIDEO_COLOR_SPACE_UNSPECIFIED":return pr.VIDEO_COLOR_SPACE_UNSPECIFIED;case 1:case"VIDEO_COLOR_SPACE_YUV420":return pr.VIDEO_COLOR_SPACE_YUV420;default:throw new tn.Error("Unrecognized enum value "+j+" for enum VideoColorSpace")}}a.videoColorSpaceFromJSON=ur;function Ot(j){switch(j){case pr.VIDEO_COLOR_SPACE_UNSPECIFIED:return"VIDEO_COLOR_SPACE_UNSPECIFIED";case pr.VIDEO_COLOR_SPACE_YUV420:return"VIDEO_COLOR_SPACE_YUV420";default:throw new tn.Error("Unrecognized enum value "+j+" for enum VideoColorSpace")}}a.videoColorSpaceToJSON=Ot;function It(j){switch(j){case pr.VIDEO_COLOR_SPACE_UNSPECIFIED:return 0;case pr.VIDEO_COLOR_SPACE_YUV420:return 1;default:throw new tn.Error("Unrecognized enum value "+j+" for enum VideoColorSpace")}}a.videoColorSpaceToNumber=It;var ut;(function(j){j.AUDIO_CHANNEL_LAYOUT_UNSPECIFIED="AUDIO_CHANNEL_LAYOUT_UNSPECIFIED",j.AUDIO_CHANNEL_LAYOUT_STEREO="AUDIO_CHANNEL_LAYOUT_STEREO"})(ut=a.AudioChannelLayout||(a.AudioChannelLayout={}));function _e(j){switch(j){case 0:case"AUDIO_CHANNEL_LAYOUT_UNSPECIFIED":return ut.AUDIO_CHANNEL_LAYOUT_UNSPECIFIED;case 1:case"AUDIO_CHANNEL_LAYOUT_STEREO":return ut.AUDIO_CHANNEL_LAYOUT_STEREO;default:throw new tn.Error("Unrecognized enum value "+j+" for enum AudioChannelLayout")}}a.audioChannelLayoutFromJSON=_e;function tt(j){switch(j){case ut.AUDIO_CHANNEL_LAYOUT_UNSPECIFIED:return"AUDIO_CHANNEL_LAYOUT_UNSPECIFIED";case ut.AUDIO_CHANNEL_LAYOUT_STEREO:return"AUDIO_CHANNEL_LAYOUT_STEREO";default:throw new tn.Error("Unrecognized enum value "+j+" for enum AudioChannelLayout")}}a.audioChannelLayoutToJSON=tt;function it(j){switch(j){case ut.AUDIO_CHANNEL_LAYOUT_UNSPECIFIED:return 0;case ut.AUDIO_CHANNEL_LAYOUT_STEREO:return 1;default:throw new tn.Error("Unrecognized enum value "+j+" for enum AudioChannelLayout")}}a.audioChannelLayoutToNumber=it;var dt;(function(j){j.RENDERING_QUALITY_UNSPECIFIED="RENDERING_QUALITY_UNSPECIFIED",j.RENDERING_QUALITY_STANDARD="RENDERING_QUALITY_STANDARD",j.RENDERING_QUALITY_HIGH="RENDERING_QUALITY_HIGH"})(dt=a.RenderingQuality||(a.RenderingQuality={}));function lt(j){switch(j){case 0:case"RENDERING_QUALITY_UNSPECIFIED":return dt.RENDERING_QUALITY_UNSPECIFIED;case 1:case"RENDERING_QUALITY_STANDARD":return dt.RENDERING_QUALITY_STANDARD;case 2:case"RENDERING_QUALITY_HIGH":return dt.RENDERING_QUALITY_HIGH;default:throw new tn.Error("Unrecognized enum value "+j+" for enum RenderingQuality")}}a.renderingQualityFromJSON=lt;function gt(j){switch(j){case dt.RENDERING_QUALITY_UNSPECIFIED:return"RENDERING_QUALITY_UNSPECIFIED";case dt.RENDERING_QUALITY_STANDARD:return"RENDERING_QUALITY_STANDARD";case dt.RENDERING_QUALITY_HIGH:return"RENDERING_QUALITY_HIGH";default:throw new tn.Error("Unrecognized enum value "+j+" for enum RenderingQuality")}}a.renderingQualityToJSON=gt;function Et(j){switch(j){case dt.RENDERING_QUALITY_UNSPECIFIED:return 0;case dt.RENDERING_QUALITY_STANDARD:return 1;case dt.RENDERING_QUALITY_HIGH:return 2;default:throw new tn.Error("Unrecognized enum value "+j+" for enum RenderingQuality")}}a.renderingQualityToNumber=Et;var pt;(function(j){j.VIDEO_CODEC_UNSPECIFIED="VIDEO_CODEC_UNSPECIFIED",j.VIDEO_CODEC_H264="VIDEO_CODEC_H264"})(pt=a.VideoCodec||(a.VideoCodec={}));function rt(j){switch(j){case 0:case"VIDEO_CODEC_UNSPECIFIED":return pt.VIDEO_CODEC_UNSPECIFIED;case 1:case"VIDEO_CODEC_H264":return pt.VIDEO_CODEC_H264;default:throw new tn.Error("Unrecognized enum value "+j+" for enum VideoCodec")}}a.videoCodecFromJSON=rt;function mt(j){switch(j){case pt.VIDEO_CODEC_UNSPECIFIED:return"VIDEO_CODEC_UNSPECIFIED";case pt.VIDEO_CODEC_H264:return"VIDEO_CODEC_H264";default:throw new tn.Error("Unrecognized enum value "+j+" for enum VideoCodec")}}a.videoCodecToJSON=mt;function Lt(j){switch(j){case pt.VIDEO_CODEC_UNSPECIFIED:return 0;case pt.VIDEO_CODEC_H264:return 1;default:throw new tn.Error("Unrecognized enum value "+j+" for enum VideoCodec")}}a.videoCodecToNumber=Lt;var Gt;(function(j){j.VIDEO_CODEC_PROFILE_UNSPECIFIED="VIDEO_CODEC_PROFILE_UNSPECIFIED",j.VIDEO_CODEC_PROFILE_BASELINE="VIDEO_CODEC_PROFILE_BASELINE",j.VIDEO_CODEC_PROFILE_MAIN="VIDEO_CODEC_PROFILE_MAIN",j.VIDEO_CODEC_PROFILE_HIGH="VIDEO_CODEC_PROFILE_HIGH"})(Gt=a.VideoCodecProfile||(a.VideoCodecProfile={}));function rr(j){switch(j){case 0:case"VIDEO_CODEC_PROFILE_UNSPECIFIED":return Gt.VIDEO_CODEC_PROFILE_UNSPECIFIED;case 2:case"VIDEO_CODEC_PROFILE_BASELINE":return Gt.VIDEO_CODEC_PROFILE_BASELINE;case 3:case"VIDEO_CODEC_PROFILE_MAIN":return Gt.VIDEO_CODEC_PROFILE_MAIN;case 4:case"VIDEO_CODEC_PROFILE_HIGH":return Gt.VIDEO_CODEC_PROFILE_HIGH;default:throw new tn.Error("Unrecognized enum value "+j+" for enum VideoCodecProfile")}}a.videoCodecProfileFromJSON=rr;function ir(j){switch(j){case Gt.VIDEO_CODEC_PROFILE_UNSPECIFIED:return"VIDEO_CODEC_PROFILE_UNSPECIFIED";case Gt.VIDEO_CODEC_PROFILE_BASELINE:return"VIDEO_CODEC_PROFILE_BASELINE";case Gt.VIDEO_CODEC_PROFILE_MAIN:return"VIDEO_CODEC_PROFILE_MAIN";case Gt.VIDEO_CODEC_PROFILE_HIGH:return"VIDEO_CODEC_PROFILE_HIGH";default:throw new tn.Error("Unrecognized enum value "+j+" for enum VideoCodecProfile")}}a.videoCodecProfileToJSON=ir;function Wt(j){switch(j){case Gt.VIDEO_CODEC_PROFILE_UNSPECIFIED:return 0;case Gt.VIDEO_CODEC_PROFILE_BASELINE:return 2;case Gt.VIDEO_CODEC_PROFILE_MAIN:return 3;case Gt.VIDEO_CODEC_PROFILE_HIGH:return 4;default:throw new tn.Error("Unrecognized enum value "+j+" for enum VideoCodecProfile")}}a.videoCodecProfileToNumber=Wt;var zt;(function(j){j.AUDIO_CODEC_UNSPECIFIED="AUDIO_CODEC_UNSPECIFIED",j.AUDIO_CODEC_AAC="AUDIO_CODEC_AAC"})(zt=a.AudioCodec||(a.AudioCodec={}));function wt(j){switch(j){case 0:case"AUDIO_CODEC_UNSPECIFIED":return zt.AUDIO_CODEC_UNSPECIFIED;case 1:case"AUDIO_CODEC_AAC":return zt.AUDIO_CODEC_AAC;default:throw new tn.Error("Unrecognized enum value "+j+" for enum AudioCodec")}}a.audioCodecFromJSON=wt;function Vt(j){switch(j){case zt.AUDIO_CODEC_UNSPECIFIED:return"AUDIO_CODEC_UNSPECIFIED";case zt.AUDIO_CODEC_AAC:return"AUDIO_CODEC_AAC";default:throw new tn.Error("Unrecognized enum value "+j+" for enum AudioCodec")}}a.audioCodecToJSON=Vt;function Qt(j){switch(j){case zt.AUDIO_CODEC_UNSPECIFIED:return 0;case zt.AUDIO_CODEC_AAC:return 1;default:throw new tn.Error("Unrecognized enum value "+j+" for enum AudioCodec")}}a.audioCodecToNumber=Qt;var Nt;(function(j){j.VIDEO_CODEC_RATE_CONTROL_MODE_UNSPECIFIED="VIDEO_CODEC_RATE_CONTROL_MODE_UNSPECIFIED",j.VIDEO_CODEC_RATE_CONTROL_MODE_CBR="VIDEO_CODEC_RATE_CONTROL_MODE_CBR"})(Nt=a.VideoCodecRateControlMode||(a.VideoCodecRateControlMode={}));function st(j){switch(j){case 0:case"VIDEO_CODEC_RATE_CONTROL_MODE_UNSPECIFIED":return Nt.VIDEO_CODEC_RATE_CONTROL_MODE_UNSPECIFIED;case 1:case"VIDEO_CODEC_RATE_CONTROL_MODE_CBR":return Nt.VIDEO_CODEC_RATE_CONTROL_MODE_CBR;default:throw new tn.Error("Unrecognized enum value "+j+" for enum VideoCodecRateControlMode")}}a.videoCodecRateControlModeFromJSON=st;function Ct(j){switch(j){case Nt.VIDEO_CODEC_RATE_CONTROL_MODE_UNSPECIFIED:return"VIDEO_CODEC_RATE_CONTROL_MODE_UNSPECIFIED";case Nt.VIDEO_CODEC_RATE_CONTROL_MODE_CBR:return"VIDEO_CODEC_RATE_CONTROL_MODE_CBR";default:throw new tn.Error("Unrecognized enum value "+j+" for enum VideoCodecRateControlMode")}}a.videoCodecRateControlModeToJSON=Ct;function qt(j){switch(j){case Nt.VIDEO_CODEC_RATE_CONTROL_MODE_UNSPECIFIED:return 0;case Nt.VIDEO_CODEC_RATE_CONTROL_MODE_CBR:return 1;default:throw new tn.Error("Unrecognized enum value "+j+" for enum VideoCodecRateControlMode")}}a.videoCodecRateControlModeToNumber=qt;var cr;(function(j){j.PROJECT_BROADCAST_PHASE_UNSPECIFIED="PROJECT_BROADCAST_PHASE_UNSPECIFIED",j.PROJECT_BROADCAST_PHASE_NOT_RUNNING="PROJECT_BROADCAST_PHASE_NOT_RUNNING",j.PROJECT_BROADCAST_PHASE_WAITING="PROJECT_BROADCAST_PHASE_WAITING",j.PROJECT_BROADCAST_PHASE_STARTING="PROJECT_BROADCAST_PHASE_STARTING",j.PROJECT_BROADCAST_PHASE_RUNNING="PROJECT_BROADCAST_PHASE_RUNNING",j.PROJECT_BROADCAST_PHASE_STOPPING="PROJECT_BROADCAST_PHASE_STOPPING",j.PROJECT_BROADCAST_PHASE_STOPPED="PROJECT_BROADCAST_PHASE_STOPPED",j.PROJECT_BROADCAST_PHASE_ARCHIVED="PROJECT_BROADCAST_PHASE_ARCHIVED"})(cr=a.ProjectBroadcastPhase||(a.ProjectBroadcastPhase={}));function dr(j){switch(j){case 0:case"PROJECT_BROADCAST_PHASE_UNSPECIFIED":return cr.PROJECT_BROADCAST_PHASE_UNSPECIFIED;case 1:case"PROJECT_BROADCAST_PHASE_NOT_RUNNING":return cr.PROJECT_BROADCAST_PHASE_NOT_RUNNING;case 2:case"PROJECT_BROADCAST_PHASE_WAITING":return cr.PROJECT_BROADCAST_PHASE_WAITING;case 3:case"PROJECT_BROADCAST_PHASE_STARTING":return cr.PROJECT_BROADCAST_PHASE_STARTING;case 4:case"PROJECT_BROADCAST_PHASE_RUNNING":return cr.PROJECT_BROADCAST_PHASE_RUNNING;case 5:case"PROJECT_BROADCAST_PHASE_STOPPING":return cr.PROJECT_BROADCAST_PHASE_STOPPING;case 6:case"PROJECT_BROADCAST_PHASE_STOPPED":return cr.PROJECT_BROADCAST_PHASE_STOPPED;case 7:case"PROJECT_BROADCAST_PHASE_ARCHIVED":return cr.PROJECT_BROADCAST_PHASE_ARCHIVED;default:throw new tn.Error("Unrecognized enum value "+j+" for enum ProjectBroadcastPhase")}}a.projectBroadcastPhaseFromJSON=dr;function Er(j){switch(j){case cr.PROJECT_BROADCAST_PHASE_UNSPECIFIED:return"PROJECT_BROADCAST_PHASE_UNSPECIFIED";case cr.PROJECT_BROADCAST_PHASE_NOT_RUNNING:return"PROJECT_BROADCAST_PHASE_NOT_RUNNING";case cr.PROJECT_BROADCAST_PHASE_WAITING:return"PROJECT_BROADCAST_PHASE_WAITING";case cr.PROJECT_BROADCAST_PHASE_STARTING:return"PROJECT_BROADCAST_PHASE_STARTING";case cr.PROJECT_BROADCAST_PHASE_RUNNING:return"PROJECT_BROADCAST_PHASE_RUNNING";case cr.PROJECT_BROADCAST_PHASE_STOPPING:return"PROJECT_BROADCAST_PHASE_STOPPING";case cr.PROJECT_BROADCAST_PHASE_STOPPED:return"PROJECT_BROADCAST_PHASE_STOPPED";case cr.PROJECT_BROADCAST_PHASE_ARCHIVED:return"PROJECT_BROADCAST_PHASE_ARCHIVED";default:throw new tn.Error("Unrecognized enum value "+j+" for enum ProjectBroadcastPhase")}}a.projectBroadcastPhaseToJSON=Er;function Tr(j){switch(j){case cr.PROJECT_BROADCAST_PHASE_UNSPECIFIED:return 0;case cr.PROJECT_BROADCAST_PHASE_NOT_RUNNING:return 1;case cr.PROJECT_BROADCAST_PHASE_WAITING:return 2;case cr.PROJECT_BROADCAST_PHASE_STARTING:return 3;case cr.PROJECT_BROADCAST_PHASE_RUNNING:return 4;case cr.PROJECT_BROADCAST_PHASE_STOPPING:return 5;case cr.PROJECT_BROADCAST_PHASE_STOPPED:return 6;case cr.PROJECT_BROADCAST_PHASE_ARCHIVED:return 7;default:throw new tn.Error("Unrecognized enum value "+j+" for enum ProjectBroadcastPhase")}}a.projectBroadcastPhaseToNumber=Tr;var gr;(function(j){j.S3ACL_UNSPECIFIED="S3ACL_UNSPECIFIED",j.S3ACL_PRIVATE="S3ACL_PRIVATE",j.S3ACL_PUBLIC_READ="S3ACL_PUBLIC_READ",j.S3ACL_PUBLIC_READ_WRITE="S3ACL_PUBLIC_READ_WRITE",j.S3ACL_AUTHENTICATED_READ="S3ACL_AUTHENTICATED_READ",j.S3ACL_BUCKET_OWNER_READ="S3ACL_BUCKET_OWNER_READ",j.S3ACL_BUCKET_OWNER_FULL_CONTROL="S3ACL_BUCKET_OWNER_FULL_CONTROL"})(gr=a.S3ACL||(a.S3ACL={}));function Zr(j){switch(j){case 0:case"S3ACL_UNSPECIFIED":return gr.S3ACL_UNSPECIFIED;case 1:case"S3ACL_PRIVATE":return gr.S3ACL_PRIVATE;case 2:case"S3ACL_PUBLIC_READ":return gr.S3ACL_PUBLIC_READ;case 3:case"S3ACL_PUBLIC_READ_WRITE":return gr.S3ACL_PUBLIC_READ_WRITE;case 4:case"S3ACL_AUTHENTICATED_READ":return gr.S3ACL_AUTHENTICATED_READ;case 5:case"S3ACL_BUCKET_OWNER_READ":return gr.S3ACL_BUCKET_OWNER_READ;case 6:case"S3ACL_BUCKET_OWNER_FULL_CONTROL":return gr.S3ACL_BUCKET_OWNER_FULL_CONTROL;default:throw new tn.Error("Unrecognized enum value "+j+" for enum S3ACL")}}a.s3ACLFromJSON=Zr;function Pr(j){switch(j){case gr.S3ACL_UNSPECIFIED:return"S3ACL_UNSPECIFIED";case gr.S3ACL_PRIVATE:return"S3ACL_PRIVATE";case gr.S3ACL_PUBLIC_READ:return"S3ACL_PUBLIC_READ";case gr.S3ACL_PUBLIC_READ_WRITE:return"S3ACL_PUBLIC_READ_WRITE";case gr.S3ACL_AUTHENTICATED_READ:return"S3ACL_AUTHENTICATED_READ";case gr.S3ACL_BUCKET_OWNER_READ:return"S3ACL_BUCKET_OWNER_READ";case gr.S3ACL_BUCKET_OWNER_FULL_CONTROL:return"S3ACL_BUCKET_OWNER_FULL_CONTROL";default:throw new tn.Error("Unrecognized enum value "+j+" for enum S3ACL")}}a.s3ACLToJSON=Pr;function _r(j){switch(j){case gr.S3ACL_UNSPECIFIED:return 0;case gr.S3ACL_PRIVATE:return 1;case gr.S3ACL_PUBLIC_READ:return 2;case gr.S3ACL_PUBLIC_READ_WRITE:return 3;case gr.S3ACL_AUTHENTICATED_READ:return 4;case gr.S3ACL_BUCKET_OWNER_READ:return 5;case gr.S3ACL_BUCKET_OWNER_FULL_CONTROL:return 6;default:throw new tn.Error("Unrecognized enum value "+j+" for enum S3ACL")}}a.s3ACLToNumber=_r;var St;(function(j){j.SOURCE_TRIGGER_ACTION_UNSPECIFIED="SOURCE_TRIGGER_ACTION_UNSPECIFIED",j.SOURCE_TRIGGER_ACTION_IGNORE="SOURCE_TRIGGER_ACTION_IGNORE",j.SOURCE_TRIGGER_ACTION_OR="SOURCE_TRIGGER_ACTION_OR"})(St=a.SourceTriggerAction||(a.SourceTriggerAction={}));function Kt(j){switch(j){case 0:case"SOURCE_TRIGGER_ACTION_UNSPECIFIED":return St.SOURCE_TRIGGER_ACTION_UNSPECIFIED;case 1:case"SOURCE_TRIGGER_ACTION_IGNORE":return St.SOURCE_TRIGGER_ACTION_IGNORE;case 3:case"SOURCE_TRIGGER_ACTION_OR":return St.SOURCE_TRIGGER_ACTION_OR;default:throw new tn.Error("Unrecognized enum value "+j+" for enum SourceTriggerAction")}}a.sourceTriggerActionFromJSON=Kt;function er(j){switch(j){case St.SOURCE_TRIGGER_ACTION_UNSPECIFIED:return"SOURCE_TRIGGER_ACTION_UNSPECIFIED";case St.SOURCE_TRIGGER_ACTION_IGNORE:return"SOURCE_TRIGGER_ACTION_IGNORE";case St.SOURCE_TRIGGER_ACTION_OR:return"SOURCE_TRIGGER_ACTION_OR";default:throw new tn.Error("Unrecognized enum value "+j+" for enum SourceTriggerAction")}}a.sourceTriggerActionToJSON=er;function kr(j){switch(j){case St.SOURCE_TRIGGER_ACTION_UNSPECIFIED:return 0;case St.SOURCE_TRIGGER_ACTION_IGNORE:return 1;case St.SOURCE_TRIGGER_ACTION_OR:return 3;default:throw new tn.Error("Unrecognized enum value "+j+" for enum SourceTriggerAction")}}a.sourceTriggerActionToNumber=kr;var tr;(function(j){j.REGION_UNSPECIFIED="REGION_UNSPECIFIED",j.REGION_US_EAST_1="REGION_US_EAST_1",j.REGION_US_EAST_2="REGION_US_EAST_2",j.REGION_US_WEST_1="REGION_US_WEST_1",j.REGION_US_WEST_2="REGION_US_WEST_2",j.REGION_US_CENTRAL_1="REGION_US_CENTRAL_1",j.REGION_AP_SOUTHEAST_1="REGION_AP_SOUTHEAST_1",j.REGION_AP_SOUTHEAST_2="REGION_AP_SOUTHEAST_2",j.REGION_AP_SOUTH_1="REGION_AP_SOUTH_1",j.REGION_CA_EAST_1="REGION_CA_EAST_1",j.REGION_EU_CENTRAL_1="REGION_EU_CENTRAL_1",j.REGION_EU_WEST_1="REGION_EU_WEST_1"})(tr=a.Region||(a.Region={}));function bt(j){switch(j){case 0:case"REGION_UNSPECIFIED":return tr.REGION_UNSPECIFIED;case 1:case"REGION_US_EAST_1":return tr.REGION_US_EAST_1;case 2:case"REGION_US_EAST_2":return tr.REGION_US_EAST_2;case 3:case"REGION_US_WEST_1":return tr.REGION_US_WEST_1;case 4:case"REGION_US_WEST_2":return tr.REGION_US_WEST_2;case 5:case"REGION_US_CENTRAL_1":return tr.REGION_US_CENTRAL_1;case 10:case"REGION_AP_SOUTHEAST_1":return tr.REGION_AP_SOUTHEAST_1;case 11:case"REGION_AP_SOUTHEAST_2":return tr.REGION_AP_SOUTHEAST_2;case 15:case"REGION_AP_SOUTH_1":return tr.REGION_AP_SOUTH_1;case 20:case"REGION_CA_EAST_1":return tr.REGION_CA_EAST_1;case 30:case"REGION_EU_CENTRAL_1":return tr.REGION_EU_CENTRAL_1;case 31:case"REGION_EU_WEST_1":return tr.REGION_EU_WEST_1;default:throw new tn.Error("Unrecognized enum value "+j+" for enum Region")}}a.regionFromJSON=bt;function jt(j){switch(j){case tr.REGION_UNSPECIFIED:return"REGION_UNSPECIFIED";case tr.REGION_US_EAST_1:return"REGION_US_EAST_1";case tr.REGION_US_EAST_2:return"REGION_US_EAST_2";case tr.REGION_US_WEST_1:return"REGION_US_WEST_1";case tr.REGION_US_WEST_2:return"REGION_US_WEST_2";case tr.REGION_US_CENTRAL_1:return"REGION_US_CENTRAL_1";case tr.REGION_AP_SOUTHEAST_1:return"REGION_AP_SOUTHEAST_1";case tr.REGION_AP_SOUTHEAST_2:return"REGION_AP_SOUTHEAST_2";case tr.REGION_AP_SOUTH_1:return"REGION_AP_SOUTH_1";case tr.REGION_CA_EAST_1:return"REGION_CA_EAST_1";case tr.REGION_EU_CENTRAL_1:return"REGION_EU_CENTRAL_1";case tr.REGION_EU_WEST_1:return"REGION_EU_WEST_1";default:throw new tn.Error("Unrecognized enum value "+j+" for enum Region")}}a.regionToJSON=jt;function Ut(j){switch(j){case tr.REGION_UNSPECIFIED:return 0;case tr.REGION_US_EAST_1:return 1;case tr.REGION_US_EAST_2:return 2;case tr.REGION_US_WEST_1:return 3;case tr.REGION_US_WEST_2:return 4;case tr.REGION_US_CENTRAL_1:return 5;case tr.REGION_AP_SOUTHEAST_1:return 10;case tr.REGION_AP_SOUTHEAST_2:return 11;case tr.REGION_AP_SOUTH_1:return 15;case tr.REGION_CA_EAST_1:return 20;case tr.REGION_EU_CENTRAL_1:return 30;case tr.REGION_EU_WEST_1:return 31;default:throw new tn.Error("Unrecognized enum value "+j+" for enum Region")}}a.regionToNumber=Ut;var Ft;(function(j){j.ROLE_UNSPECIFIED="ROLE_UNSPECIFIED",j.ROLE_HOST="ROLE_HOST",j.ROLE_COHOST="ROLE_COHOST",j.ROLE_CONTRIBUTOR="ROLE_CONTRIBUTOR",j.ROLE_GUEST="ROLE_GUEST",j.ROLE_VIEWER="ROLE_VIEWER",j.ROLE_RENDERER="ROLE_RENDERER",j.ROLE_PLATFORM="ROLE_PLATFORM",j.ROLE_IMPERSONATE="ROLE_IMPERSONATE"})(Ft=a.Role||(a.Role={}));function Ht(j){switch(j){case 0:case"ROLE_UNSPECIFIED":return Ft.ROLE_UNSPECIFIED;case 1:case"ROLE_HOST":return Ft.ROLE_HOST;case 2:case"ROLE_COHOST":return Ft.ROLE_COHOST;case 3:case"ROLE_CONTRIBUTOR":return Ft.ROLE_CONTRIBUTOR;case 4:case"ROLE_GUEST":return Ft.ROLE_GUEST;case 5:case"ROLE_VIEWER":return Ft.ROLE_VIEWER;case 6:case"ROLE_RENDERER":return Ft.ROLE_RENDERER;case 7:case"ROLE_PLATFORM":return Ft.ROLE_PLATFORM;case 8:case"ROLE_IMPERSONATE":return Ft.ROLE_IMPERSONATE;default:throw new tn.Error("Unrecognized enum value "+j+" for enum Role")}}a.roleFromJSON=Ht;function or(j){switch(j){case Ft.ROLE_UNSPECIFIED:return"ROLE_UNSPECIFIED";case Ft.ROLE_HOST:return"ROLE_HOST";case Ft.ROLE_COHOST:return"ROLE_COHOST";case Ft.ROLE_CONTRIBUTOR:return"ROLE_CONTRIBUTOR";case Ft.ROLE_GUEST:return"ROLE_GUEST";case Ft.ROLE_VIEWER:return"ROLE_VIEWER";case Ft.ROLE_RENDERER:return"ROLE_RENDERER";case Ft.ROLE_PLATFORM:return"ROLE_PLATFORM";case Ft.ROLE_IMPERSONATE:return"ROLE_IMPERSONATE";default:throw new tn.Error("Unrecognized enum value "+j+" for enum Role")}}a.roleToJSON=or;function vr(j){switch(j){case Ft.ROLE_UNSPECIFIED:return 0;case Ft.ROLE_HOST:return 1;case Ft.ROLE_COHOST:return 2;case Ft.ROLE_CONTRIBUTOR:return 3;case Ft.ROLE_GUEST:return 4;case Ft.ROLE_VIEWER:return 5;case Ft.ROLE_RENDERER:return 6;case Ft.ROLE_PLATFORM:return 7;case Ft.ROLE_IMPERSONATE:return 8;default:throw new tn.Error("Unrecognized enum value "+j+" for enum Role")}}a.roleToNumber=vr;var Ir;(function(j){j.PROJECT_BROADCAST_ERROR_UNSPECIFIED="PROJECT_BROADCAST_ERROR_UNSPECIFIED",j.PROJECT_BROADCAST_ERROR_INTERNAL="PROJECT_BROADCAST_ERROR_INTERNAL",j.PROJECT_BROADCAST_ERROR_DURATION_EXCEEDED="PROJECT_BROADCAST_ERROR_DURATION_EXCEEDED"})(Ir=a.ProjectBroadcastError||(a.ProjectBroadcastError={}));function Sr(j){switch(j){case 0:case"PROJECT_BROADCAST_ERROR_UNSPECIFIED":return Ir.PROJECT_BROADCAST_ERROR_UNSPECIFIED;case 1:case"PROJECT_BROADCAST_ERROR_INTERNAL":return Ir.PROJECT_BROADCAST_ERROR_INTERNAL;case 2:case"PROJECT_BROADCAST_ERROR_DURATION_EXCEEDED":return Ir.PROJECT_BROADCAST_ERROR_DURATION_EXCEEDED;default:throw new tn.Error("Unrecognized enum value "+j+" for enum ProjectBroadcastError")}}a.projectBroadcastErrorFromJSON=Sr;function Or(j){switch(j){case Ir.PROJECT_BROADCAST_ERROR_UNSPECIFIED:return"PROJECT_BROADCAST_ERROR_UNSPECIFIED";case Ir.PROJECT_BROADCAST_ERROR_INTERNAL:return"PROJECT_BROADCAST_ERROR_INTERNAL";case Ir.PROJECT_BROADCAST_ERROR_DURATION_EXCEEDED:return"PROJECT_BROADCAST_ERROR_DURATION_EXCEEDED";default:throw new tn.Error("Unrecognized enum value "+j+" for enum ProjectBroadcastError")}}a.projectBroadcastErrorToJSON=Or;function Cr(j){switch(j){case Ir.PROJECT_BROADCAST_ERROR_UNSPECIFIED:return 0;case Ir.PROJECT_BROADCAST_ERROR_INTERNAL:return 1;case Ir.PROJECT_BROADCAST_ERROR_DURATION_EXCEEDED:return 2;default:throw new tn.Error("Unrecognized enum value "+j+" for enum ProjectBroadcastError")}}a.projectBroadcastErrorToNumber=Cr;var yt;(function(j){j.CONNECT_STATE_UNSPECIFIED="CONNECT_STATE_UNSPECIFIED",j.CONNECT_STATE_CONNECTED="CONNECT_STATE_CONNECTED",j.CONNECT_STATE_DISCONNECTED="CONNECT_STATE_DISCONNECTED"})(yt=a.ConnectState||(a.ConnectState={}));function Bt(j){switch(j){case 0:case"CONNECT_STATE_UNSPECIFIED":return yt.CONNECT_STATE_UNSPECIFIED;case 1:case"CONNECT_STATE_CONNECTED":return yt.CONNECT_STATE_CONNECTED;case 2:case"CONNECT_STATE_DISCONNECTED":return yt.CONNECT_STATE_DISCONNECTED;default:throw new tn.Error("Unrecognized enum value "+j+" for enum ConnectState")}}a.connectStateFromJSON=Bt;function Zt(j){switch(j){case yt.CONNECT_STATE_UNSPECIFIED:return"CONNECT_STATE_UNSPECIFIED";case yt.CONNECT_STATE_CONNECTED:return"CONNECT_STATE_CONNECTED";case yt.CONNECT_STATE_DISCONNECTED:return"CONNECT_STATE_DISCONNECTED";default:throw new tn.Error("Unrecognized enum value "+j+" for enum ConnectState")}}a.connectStateToJSON=Zt;function yr(j){switch(j){case yt.CONNECT_STATE_UNSPECIFIED:return 0;case yt.CONNECT_STATE_CONNECTED:return 1;case yt.CONNECT_STATE_DISCONNECTED:return 2;default:throw new tn.Error("Unrecognized enum value "+j+" for enum ConnectState")}}a.connectStateToNumber=yr;var fr;(function(j){j.EVENT_SUB_TYPE_UNSPECIFIED="EVENT_SUB_TYPE_UNSPECIFIED",j.EVENT_SUB_TYPE_CREATE="EVENT_SUB_TYPE_CREATE",j.EVENT_SUB_TYPE_UPDATE="EVENT_SUB_TYPE_UPDATE",j.EVENT_SUB_TYPE_DELETE="EVENT_SUB_TYPE_DELETE",j.EVENT_SUB_TYPE_ADD="EVENT_SUB_TYPE_ADD",j.EVENT_SUB_TYPE_REMOVE="EVENT_SUB_TYPE_REMOVE",j.EVENT_SUB_TYPE_STATE="EVENT_SUB_TYPE_STATE"})(fr=a.EventSubType||(a.EventSubType={}));function Rr(j){switch(j){case 0:case"EVENT_SUB_TYPE_UNSPECIFIED":return fr.EVENT_SUB_TYPE_UNSPECIFIED;case 1:case"EVENT_SUB_TYPE_CREATE":return fr.EVENT_SUB_TYPE_CREATE;case 2:case"EVENT_SUB_TYPE_UPDATE":return fr.EVENT_SUB_TYPE_UPDATE;case 3:case"EVENT_SUB_TYPE_DELETE":return fr.EVENT_SUB_TYPE_DELETE;case 4:case"EVENT_SUB_TYPE_ADD":return fr.EVENT_SUB_TYPE_ADD;case 5:case"EVENT_SUB_TYPE_REMOVE":return fr.EVENT_SUB_TYPE_REMOVE;case 6:case"EVENT_SUB_TYPE_STATE":return fr.EVENT_SUB_TYPE_STATE;default:throw new tn.Error("Unrecognized enum value "+j+" for enum EventSubType")}}a.eventSubTypeFromJSON=Rr;function Nr(j){switch(j){case fr.EVENT_SUB_TYPE_UNSPECIFIED:return"EVENT_SUB_TYPE_UNSPECIFIED";case fr.EVENT_SUB_TYPE_CREATE:return"EVENT_SUB_TYPE_CREATE";case fr.EVENT_SUB_TYPE_UPDATE:return"EVENT_SUB_TYPE_UPDATE";case fr.EVENT_SUB_TYPE_DELETE:return"EVENT_SUB_TYPE_DELETE";case fr.EVENT_SUB_TYPE_ADD:return"EVENT_SUB_TYPE_ADD";case fr.EVENT_SUB_TYPE_REMOVE:return"EVENT_SUB_TYPE_REMOVE";case fr.EVENT_SUB_TYPE_STATE:return"EVENT_SUB_TYPE_STATE";default:throw new tn.Error("Unrecognized enum value "+j+" for enum EventSubType")}}a.eventSubTypeToJSON=Nr;function xr(j){switch(j){case fr.EVENT_SUB_TYPE_UNSPECIFIED:return 0;case fr.EVENT_SUB_TYPE_CREATE:return 1;case fr.EVENT_SUB_TYPE_UPDATE:return 2;case fr.EVENT_SUB_TYPE_DELETE:return 3;case fr.EVENT_SUB_TYPE_ADD:return 4;case fr.EVENT_SUB_TYPE_REMOVE:return 5;case fr.EVENT_SUB_TYPE_STATE:return 6;default:throw new tn.Error("Unrecognized enum value "+j+" for enum EventSubType")}}a.eventSubTypeToNumber=xr;var Xr;(function(j){j.EVENT_TYPE_UNSPECIFIED="EVENT_TYPE_UNSPECIFIED",j.EVENT_TYPE_COLLECTION="EVENT_TYPE_COLLECTION",j.EVENT_TYPE_PROJECT="EVENT_TYPE_PROJECT",j.EVENT_TYPE_SOURCE="EVENT_TYPE_SOURCE",j.EVENT_TYPE_DESTINATION="EVENT_TYPE_DESTINATION"})(Xr=a.EventType||(a.EventType={}));function Ar(j){switch(j){case 0:case"EVENT_TYPE_UNSPECIFIED":return Xr.EVENT_TYPE_UNSPECIFIED;case 1:case"EVENT_TYPE_COLLECTION":return Xr.EVENT_TYPE_COLLECTION;case 2:case"EVENT_TYPE_PROJECT":return Xr.EVENT_TYPE_PROJECT;case 4:case"EVENT_TYPE_SOURCE":return Xr.EVENT_TYPE_SOURCE;case 5:case"EVENT_TYPE_DESTINATION":return Xr.EVENT_TYPE_DESTINATION;default:throw new tn.Error("Unrecognized enum value "+j+" for enum EventType")}}a.eventTypeFromJSON=Ar;function Br(j){switch(j){case Xr.EVENT_TYPE_UNSPECIFIED:return"EVENT_TYPE_UNSPECIFIED";case Xr.EVENT_TYPE_COLLECTION:return"EVENT_TYPE_COLLECTION";case Xr.EVENT_TYPE_PROJECT:return"EVENT_TYPE_PROJECT";case Xr.EVENT_TYPE_SOURCE:return"EVENT_TYPE_SOURCE";case Xr.EVENT_TYPE_DESTINATION:return"EVENT_TYPE_DESTINATION";default:throw new tn.Error("Unrecognized enum value "+j+" for enum EventType")}}a.eventTypeToJSON=Br;function rn(j){switch(j){case Xr.EVENT_TYPE_UNSPECIFIED:return 0;case Xr.EVENT_TYPE_COLLECTION:return 1;case Xr.EVENT_TYPE_PROJECT:return 2;case Xr.EVENT_TYPE_SOURCE:return 4;case Xr.EVENT_TYPE_DESTINATION:return 5;default:throw new tn.Error("Unrecognized enum value "+j+" for enum EventType")}}a.eventTypeToNumber=rn;function Dr(){return{name:"",value:void 0}}a.BroadcastOriginExternalMetadata={encode(j,at=b.default.Writer.create()){return j.name!==""&&at.uint32(10).string(j.name),j.value!==void 0&&k.Value.encode(k.Value.wrap(j.value),at.uint32(18).fork()).ldelim(),at},decode(j,at){const ct=j instanceof b.default.Reader?j:new b.default.Reader(j);let Yt=at===void 0?ct.len:ct.pos+at;const Pt=Dr();for(;ct.pos<Yt;){const Xt=ct.uint32();switch(Xt>>>3){case 1:Pt.name=ct.string();break;case 2:Pt.value=k.Value.unwrap(k.Value.decode(ct,ct.uint32()));break;default:ct.skipType(Xt&7);break}}return Pt},fromJSON(j){return{name:lr(j.name)?String(j.name):"",value:lr(j==null?void 0:j.value)?j.value:void 0}},toJSON(j){const at={};return j.name!==void 0&&(at.name=j.name),j.value!==void 0&&(at.value=j.value),at},fromPartial(j){var at,ct;const Yt=Dr();return Yt.name=(at=j.name)!==null&&at!==void 0?at:"",Yt.value=(ct=j.value)!==null&&ct!==void 0?ct:void 0,Yt}};function qr(){return{}}a.BroadcastOriginSourceMetadata={encode(j,at=b.default.Writer.create()){return at},decode(j,at){const ct=j instanceof b.default.Reader?j:new b.default.Reader(j);let Yt=at===void 0?ct.len:ct.pos+at;const Pt=qr();for(;ct.pos<Yt;){const Xt=ct.uint32();switch(Xt>>>3){default:ct.skipType(Xt&7);break}}return Pt},fromJSON(j){return{}},toJSON(j){return{}},fromPartial(j){return qr()}};function nn(){return{userId:"",collectionId:"",projectId:"",broadcastOrigin:void 0,broadcastOriginApiMetadata:void 0,broadcastOriginSourceMetadata:void 0,broadcastOriginExternalMetadata:void 0}}a.WebhookRequest={encode(j,at=b.default.Writer.create()){return j.userId!==""&&at.uint32(10).string(j.userId),j.collectionId!==""&&at.uint32(18).string(j.collectionId),j.projectId!==""&&at.uint32(26).string(j.projectId),j.broadcastOrigin!==void 0&&at.uint32(56).int32(vt(j.broadcastOrigin)),j.broadcastOriginApiMetadata!==void 0&&k.Value.encode(k.Value.wrap(j.broadcastOriginApiMetadata),at.uint32(66).fork()).ldelim(),j.broadcastOriginSourceMetadata!==void 0&&a.BroadcastOriginSourceMetadata.encode(j.broadcastOriginSourceMetadata,at.uint32(74).fork()).ldelim(),j.broadcastOriginExternalMetadata!==void 0&&a.BroadcastOriginExternalMetadata.encode(j.broadcastOriginExternalMetadata,at.uint32(82).fork()).ldelim(),at},decode(j,at){const ct=j instanceof b.default.Reader?j:new b.default.Reader(j);let Yt=at===void 0?ct.len:ct.pos+at;const Pt=nn();for(;ct.pos<Yt;){const Xt=ct.uint32();switch(Xt>>>3){case 1:Pt.userId=ct.string();break;case 2:Pt.collectionId=ct.string();break;case 3:Pt.projectId=ct.string();break;case 7:Pt.broadcastOrigin=ot(ct.int32());break;case 8:Pt.broadcastOriginApiMetadata=k.Value.unwrap(k.Value.decode(ct,ct.uint32()));break;case 9:Pt.broadcastOriginSourceMetadata=a.BroadcastOriginSourceMetadata.decode(ct,ct.uint32());break;case 10:Pt.broadcastOriginExternalMetadata=a.BroadcastOriginExternalMetadata.decode(ct,ct.uint32());break;default:ct.skipType(Xt&7);break}}return Pt},fromJSON(j){return{userId:lr(j.userId)?String(j.userId):"",collectionId:lr(j.collectionId)?String(j.collectionId):"",projectId:lr(j.projectId)?String(j.projectId):"",broadcastOrigin:lr(j.broadcastOrigin)?ot(j.broadcastOrigin):void 0,broadcastOriginApiMetadata:lr(j==null?void 0:j.broadcastOriginApiMetadata)?j.broadcastOriginApiMetadata:void 0,broadcastOriginSourceMetadata:lr(j.broadcastOriginSourceMetadata)?a.BroadcastOriginSourceMetadata.fromJSON(j.broadcastOriginSourceMetadata):void 0,broadcastOriginExternalMetadata:lr(j.broadcastOriginExternalMetadata)?a.BroadcastOriginExternalMetadata.fromJSON(j.broadcastOriginExternalMetadata):void 0}},toJSON(j){const at={};return j.userId!==void 0&&(at.userId=j.userId),j.collectionId!==void 0&&(at.collectionId=j.collectionId),j.projectId!==void 0&&(at.projectId=j.projectId),j.broadcastOrigin!==void 0&&(at.broadcastOrigin=j.broadcastOrigin!==void 0?ht(j.broadcastOrigin):void 0),j.broadcastOriginApiMetadata!==void 0&&(at.broadcastOriginApiMetadata=j.broadcastOriginApiMetadata),j.broadcastOriginSourceMetadata!==void 0&&(at.broadcastOriginSourceMetadata=j.broadcastOriginSourceMetadata?a.BroadcastOriginSourceMetadata.toJSON(j.broadcastOriginSourceMetadata):void 0),j.broadcastOriginExternalMetadata!==void 0&&(at.broadcastOriginExternalMetadata=j.broadcastOriginExternalMetadata?a.BroadcastOriginExternalMetadata.toJSON(j.broadcastOriginExternalMetadata):void 0),at},fromPartial(j){var at,ct,Yt,Pt,Xt;const Kr=nn();return Kr.userId=(at=j.userId)!==null&&at!==void 0?at:"",Kr.collectionId=(ct=j.collectionId)!==null&&ct!==void 0?ct:"",Kr.projectId=(Yt=j.projectId)!==null&&Yt!==void 0?Yt:"",Kr.broadcastOrigin=(Pt=j.broadcastOrigin)!==null&&Pt!==void 0?Pt:void 0,Kr.broadcastOriginApiMetadata=(Xt=j.broadcastOriginApiMetadata)!==null&&Xt!==void 0?Xt:void 0,Kr.broadcastOriginSourceMetadata=j.broadcastOriginSourceMetadata!==void 0&&j.broadcastOriginSourceMetadata!==null?a.BroadcastOriginSourceMetadata.fromPartial(j.broadcastOriginSourceMetadata):void 0,Kr.broadcastOriginExternalMetadata=j.broadcastOriginExternalMetadata!==void 0&&j.broadcastOriginExternalMetadata!==null?a.BroadcastOriginExternalMetadata.fromPartial(j.broadcastOriginExternalMetadata):void 0,Kr}};function $r(){return{}}a.WebhookResponse={encode(j,at=b.default.Writer.create()){return at},decode(j,at){const ct=j instanceof b.default.Reader?j:new b.default.Reader(j);let Yt=at===void 0?ct.len:ct.pos+at;const Pt=$r();for(;ct.pos<Yt;){const Xt=ct.uint32();switch(Xt>>>3){default:ct.skipType(Xt&7);break}}return Pt},fromJSON(j){return{}},toJSON(j){return{}},fromPartial(j){return $r()}};function Lr(){return{enabled:!1,url:"",timeoutMs:void 0}}a.WebhookConfiguration={encode(j,at=b.default.Writer.create()){return j.enabled===!0&&at.uint32(8).bool(j.enabled),j.url!==""&&at.uint32(18).string(j.url),j.timeoutMs!==void 0&&at.uint32(24).uint32(j.timeoutMs),at},decode(j,at){const ct=j instanceof b.default.Reader?j:new b.default.Reader(j);let Yt=at===void 0?ct.len:ct.pos+at;const Pt=Lr();for(;ct.pos<Yt;){const Xt=ct.uint32();switch(Xt>>>3){case 1:Pt.enabled=ct.bool();break;case 2:Pt.url=ct.string();break;case 3:Pt.timeoutMs=ct.uint32();break;default:ct.skipType(Xt&7);break}}return Pt},fromJSON(j){return{enabled:lr(j.enabled)?!!j.enabled:!1,url:lr(j.url)?String(j.url):"",timeoutMs:lr(j.timeoutMs)?Number(j.timeoutMs):void 0}},toJSON(j){const at={};return j.enabled!==void 0&&(at.enabled=j.enabled),j.url!==void 0&&(at.url=j.url),j.timeoutMs!==void 0&&(at.timeoutMs=Math.round(j.timeoutMs)),at},fromPartial(j){var at,ct,Yt;const Pt=Lr();return Pt.enabled=(at=j.enabled)!==null&&at!==void 0?at:!1,Pt.url=(ct=j.url)!==null&&ct!==void 0?ct:"",Pt.timeoutMs=(Yt=j.timeoutMs)!==null&&Yt!==void 0?Yt:void 0,Pt}};function Qr(){return{startBroadcast:void 0,startWebrtc:void 0,joinWebrtc:void 0}}a.AccountConfigurationHook={encode(j,at=b.default.Writer.create()){return j.startBroadcast!==void 0&&a.WebhookConfiguration.encode(j.startBroadcast,at.uint32(10).fork()).ldelim(),j.startWebrtc!==void 0&&a.WebhookConfiguration.encode(j.startWebrtc,at.uint32(18).fork()).ldelim(),j.joinWebrtc!==void 0&&a.WebhookConfiguration.encode(j.joinWebrtc,at.uint32(26).fork()).ldelim(),at},decode(j,at){const ct=j instanceof b.default.Reader?j:new b.default.Reader(j);let Yt=at===void 0?ct.len:ct.pos+at;const Pt=Qr();for(;ct.pos<Yt;){const Xt=ct.uint32();switch(Xt>>>3){case 1:Pt.startBroadcast=a.WebhookConfiguration.decode(ct,ct.uint32());break;case 2:Pt.startWebrtc=a.WebhookConfiguration.decode(ct,ct.uint32());break;case 3:Pt.joinWebrtc=a.WebhookConfiguration.decode(ct,ct.uint32());break;default:ct.skipType(Xt&7);break}}return Pt},fromJSON(j){return{startBroadcast:lr(j.startBroadcast)?a.WebhookConfiguration.fromJSON(j.startBroadcast):void 0,startWebrtc:lr(j.startWebrtc)?a.WebhookConfiguration.fromJSON(j.startWebrtc):void 0,joinWebrtc:lr(j.joinWebrtc)?a.WebhookConfiguration.fromJSON(j.joinWebrtc):void 0}},toJSON(j){const at={};return j.startBroadcast!==void 0&&(at.startBroadcast=j.startBroadcast?a.WebhookConfiguration.toJSON(j.startBroadcast):void 0),j.startWebrtc!==void 0&&(at.startWebrtc=j.startWebrtc?a.WebhookConfiguration.toJSON(j.startWebrtc):void 0),j.joinWebrtc!==void 0&&(at.joinWebrtc=j.joinWebrtc?a.WebhookConfiguration.toJSON(j.joinWebrtc):void 0),at},fromPartial(j){const at=Qr();return at.startBroadcast=j.startBroadcast!==void 0&&j.startBroadcast!==null?a.WebhookConfiguration.fromPartial(j.startBroadcast):void 0,at.startWebrtc=j.startWebrtc!==void 0&&j.startWebrtc!==null?a.WebhookConfiguration.fromPartial(j.startWebrtc):void 0,at.joinWebrtc=j.joinWebrtc!==void 0&&j.joinWebrtc!==null?a.WebhookConfiguration.fromPartial(j.joinWebrtc):void 0,at}};function Ur(){return{broadcastConcurrency:void 0,hooks:void 0,guestCodeUrl:void 0}}a.AccountConfiguration={encode(j,at=b.default.Writer.create()){return j.broadcastConcurrency!==void 0&&at.uint32(16).int32(j.broadcastConcurrency),j.hooks!==void 0&&a.AccountConfigurationHook.encode(j.hooks,at.uint32(26).fork()).ldelim(),j.guestCodeUrl!==void 0&&at.uint32(34).string(j.guestCodeUrl),at},decode(j,at){const ct=j instanceof b.default.Reader?j:new b.default.Reader(j);let Yt=at===void 0?ct.len:ct.pos+at;const Pt=Ur();for(;ct.pos<Yt;){const Xt=ct.uint32();switch(Xt>>>3){case 2:Pt.broadcastConcurrency=ct.int32();break;case 3:Pt.hooks=a.AccountConfigurationHook.decode(ct,ct.uint32());break;case 4:Pt.guestCodeUrl=ct.string();break;default:ct.skipType(Xt&7);break}}return Pt},fromJSON(j){return{broadcastConcurrency:lr(j.broadcastConcurrency)?Number(j.broadcastConcurrency):void 0,hooks:lr(j.hooks)?a.AccountConfigurationHook.fromJSON(j.hooks):void 0,guestCodeUrl:lr(j.guestCodeUrl)?String(j.guestCodeUrl):void 0}},toJSON(j){const at={};return j.broadcastConcurrency!==void 0&&(at.broadcastConcurrency=Math.round(j.broadcastConcurrency)),j.hooks!==void 0&&(at.hooks=j.hooks?a.AccountConfigurationHook.toJSON(j.hooks):void 0),j.guestCodeUrl!==void 0&&(at.guestCodeUrl=j.guestCodeUrl),at},fromPartial(j){var at,ct;const Yt=Ur();return Yt.broadcastConcurrency=(at=j.broadcastConcurrency)!==null&&at!==void 0?at:void 0,Yt.hooks=j.hooks!==void 0&&j.hooks!==null?a.AccountConfigurationHook.fromPartial(j.hooks):void 0,Yt.guestCodeUrl=(ct=j.guestCodeUrl)!==null&&ct!==void 0?ct:void 0,Yt}};function Jr(){return{}}a.GetAccountConfigurationRequest={encode(j,at=b.default.Writer.create()){return at},decode(j,at){const ct=j instanceof b.default.Reader?j:new b.default.Reader(j);let Yt=at===void 0?ct.len:ct.pos+at;const Pt=Jr();for(;ct.pos<Yt;){const Xt=ct.uint32();switch(Xt>>>3){default:ct.skipType(Xt&7);break}}return Pt},fromJSON(j){return{}},toJSON(j){return{}},fromPartial(j){return Jr()}};function cn(){return{accountConfiguration:void 0}}a.GetAccountConfigurationResponse={encode(j,at=b.default.Writer.create()){return j.accountConfiguration!==void 0&&a.AccountConfiguration.encode(j.accountConfiguration,at.uint32(10).fork()).ldelim(),at},decode(j,at){const ct=j instanceof b.default.Reader?j:new b.default.Reader(j);let Yt=at===void 0?ct.len:ct.pos+at;const Pt=cn();for(;ct.pos<Yt;){const Xt=ct.uint32();switch(Xt>>>3){case 1:Pt.accountConfiguration=a.AccountConfiguration.decode(ct,ct.uint32());break;default:ct.skipType(Xt&7);break}}return Pt},fromJSON(j){return{accountConfiguration:lr(j.accountConfiguration)?a.AccountConfiguration.fromJSON(j.accountConfiguration):void 0}},toJSON(j){const at={};return j.accountConfiguration!==void 0&&(at.accountConfiguration=j.accountConfiguration?a.AccountConfiguration.toJSON(j.accountConfiguration):void 0),at},fromPartial(j){const at=cn();return at.accountConfiguration=j.accountConfiguration!==void 0&&j.accountConfiguration!==null?a.AccountConfiguration.fromPartial(j.accountConfiguration):void 0,at}};function Fr(){return{broadcastConcurrency:void 0,hooks:void 0,guestCodeUrl:void 0,updateMask:void 0}}a.UpdateAccountConfigurationRequest={encode(j,at=b.default.Writer.create()){return j.broadcastConcurrency!==void 0&&at.uint32(16).int32(j.broadcastConcurrency),j.hooks!==void 0&&a.AccountConfigurationHook.encode(j.hooks,at.uint32(26).fork()).ldelim(),j.guestCodeUrl!==void 0&&at.uint32(42).string(j.guestCodeUrl),j.updateMask!==void 0&&$.FieldMask.encode($.FieldMask.wrap(j.updateMask),at.uint32(34).fork()).ldelim(),at},decode(j,at){const ct=j instanceof b.default.Reader?j:new b.default.Reader(j);let Yt=at===void 0?ct.len:ct.pos+at;const Pt=Fr();for(;ct.pos<Yt;){const Xt=ct.uint32();switch(Xt>>>3){case 2:Pt.broadcastConcurrency=ct.int32();break;case 3:Pt.hooks=a.AccountConfigurationHook.decode(ct,ct.uint32());break;case 5:Pt.guestCodeUrl=ct.string();break;case 4:Pt.updateMask=$.FieldMask.unwrap($.FieldMask.decode(ct,ct.uint32()));break;default:ct.skipType(Xt&7);break}}return Pt},fromJSON(j){return{broadcastConcurrency:lr(j.broadcastConcurrency)?Number(j.broadcastConcurrency):void 0,hooks:lr(j.hooks)?a.AccountConfigurationHook.fromJSON(j.hooks):void 0,guestCodeUrl:lr(j.guestCodeUrl)?String(j.guestCodeUrl):void 0,updateMask:lr(j.updateMask)?$.FieldMask.unwrap($.FieldMask.fromJSON(j.updateMask)):void 0}},toJSON(j){const at={};return j.broadcastConcurrency!==void 0&&(at.broadcastConcurrency=Math.round(j.broadcastConcurrency)),j.hooks!==void 0&&(at.hooks=j.hooks?a.AccountConfigurationHook.toJSON(j.hooks):void 0),j.guestCodeUrl!==void 0&&(at.guestCodeUrl=j.guestCodeUrl),j.updateMask!==void 0&&(at.updateMask=$.FieldMask.toJSON($.FieldMask.wrap(j.updateMask))),at},fromPartial(j){var at,ct,Yt;const Pt=Fr();return Pt.broadcastConcurrency=(at=j.broadcastConcurrency)!==null&&at!==void 0?at:void 0,Pt.hooks=j.hooks!==void 0&&j.hooks!==null?a.AccountConfigurationHook.fromPartial(j.hooks):void 0,Pt.guestCodeUrl=(ct=j.guestCodeUrl)!==null&&ct!==void 0?ct:void 0,Pt.updateMask=(Yt=j.updateMask)!==null&&Yt!==void 0?Yt:void 0,Pt}};function Vr(){return{accountConfiguration:void 0}}a.UpdateAccountConfigurationResponse={encode(j,at=b.default.Writer.create()){return j.accountConfiguration!==void 0&&a.AccountConfiguration.encode(j.accountConfiguration,at.uint32(10).fork()).ldelim(),at},decode(j,at){const ct=j instanceof b.default.Reader?j:new b.default.Reader(j);let Yt=at===void 0?ct.len:ct.pos+at;const Pt=Vr();for(;ct.pos<Yt;){const Xt=ct.uint32();switch(Xt>>>3){case 1:Pt.accountConfiguration=a.AccountConfiguration.decode(ct,ct.uint32());break;default:ct.skipType(Xt&7);break}}return Pt},fromJSON(j){return{accountConfiguration:lr(j.accountConfiguration)?a.AccountConfiguration.fromJSON(j.accountConfiguration):void 0}},toJSON(j){const at={};return j.accountConfiguration!==void 0&&(at.accountConfiguration=j.accountConfiguration?a.AccountConfiguration.toJSON(j.accountConfiguration):void 0),at},fromPartial(j){const at=Vr();return at.accountConfiguration=j.accountConfiguration!==void 0&&j.accountConfiguration!==null?a.AccountConfiguration.fromPartial(j.accountConfiguration):void 0,at}};function sn(){return{height:void 0,width:void 0,framerate:void 0,colorSpace:void 0}}a.VideoRendering={encode(j,at=b.default.Writer.create()){return j.height!==void 0&&at.uint32(8).uint32(j.height),j.width!==void 0&&at.uint32(16).uint32(j.width),j.framerate!==void 0&&at.uint32(29).float(j.framerate),j.colorSpace!==void 0&&at.uint32(32).int32(It(j.colorSpace)),at},decode(j,at){const ct=j instanceof b.default.Reader?j:new b.default.Reader(j);let Yt=at===void 0?ct.len:ct.pos+at;const Pt=sn();for(;ct.pos<Yt;){const Xt=ct.uint32();switch(Xt>>>3){case 1:Pt.height=ct.uint32();break;case 2:Pt.width=ct.uint32();break;case 3:Pt.framerate=ct.float();break;case 4:Pt.colorSpace=ur(ct.int32());break;default:ct.skipType(Xt&7);break}}return Pt},fromJSON(j){return{height:lr(j.height)?Number(j.height):void 0,width:lr(j.width)?Number(j.width):void 0,framerate:lr(j.framerate)?Number(j.framerate):void 0,colorSpace:lr(j.colorSpace)?ur(j.colorSpace):void 0}},toJSON(j){const at={};return j.height!==void 0&&(at.height=Math.round(j.height)),j.width!==void 0&&(at.width=Math.round(j.width)),j.framerate!==void 0&&(at.framerate=j.framerate),j.colorSpace!==void 0&&(at.colorSpace=j.colorSpace!==void 0?Ot(j.colorSpace):void 0),at},fromPartial(j){var at,ct,Yt,Pt;const Xt=sn();return Xt.height=(at=j.height)!==null&&at!==void 0?at:void 0,Xt.width=(ct=j.width)!==null&&ct!==void 0?ct:void 0,Xt.framerate=(Yt=j.framerate)!==null&&Yt!==void 0?Yt:void 0,Xt.colorSpace=(Pt=j.colorSpace)!==null&&Pt!==void 0?Pt:void 0,Xt}};function un(){return{channelLayout:void 0}}a.AudioRendering={encode(j,at=b.default.Writer.create()){return j.channelLayout!==void 0&&at.uint32(8).int32(it(j.channelLayout)),at},decode(j,at){const ct=j instanceof b.default.Reader?j:new b.default.Reader(j);let Yt=at===void 0?ct.len:ct.pos+at;const Pt=un();for(;ct.pos<Yt;){const Xt=ct.uint32();switch(Xt>>>3){case 1:Pt.channelLayout=_e(ct.int32());break;default:ct.skipType(Xt&7);break}}return Pt},fromJSON(j){return{channelLayout:lr(j.channelLayout)?_e(j.channelLayout):void 0}},toJSON(j){const at={};return j.channelLayout!==void 0&&(at.channelLayout=j.channelLayout!==void 0?tt(j.channelLayout):void 0),at},fromPartial(j){var at;const ct=un();return ct.channelLayout=(at=j.channelLayout)!==null&&at!==void 0?at:void 0,ct}};function yn(){return{video:void 0,audio:void 0,quality:void 0,targetLatency:void 0,complexity:void 0}}a.Rendering={encode(j,at=b.default.Writer.create()){return j.video!==void 0&&a.VideoRendering.encode(j.video,at.uint32(10).fork()).ldelim(),j.audio!==void 0&&a.AudioRendering.encode(j.audio,at.uint32(18).fork()).ldelim(),j.quality!==void 0&&at.uint32(24).int32(Et(j.quality)),j.targetLatency!==void 0&&at.uint32(32).uint32(j.targetLatency),j.complexity!==void 0&&at.uint32(40).int32(j.complexity),at},decode(j,at){const ct=j instanceof b.default.Reader?j:new b.default.Reader(j);let Yt=at===void 0?ct.len:ct.pos+at;const Pt=yn();for(;ct.pos<Yt;){const Xt=ct.uint32();switch(Xt>>>3){case 1:Pt.video=a.VideoRendering.decode(ct,ct.uint32());break;case 2:Pt.audio=a.AudioRendering.decode(ct,ct.uint32());break;case 3:Pt.quality=lt(ct.int32());break;case 4:Pt.targetLatency=ct.uint32();break;case 5:Pt.complexity=ct.int32();break;default:ct.skipType(Xt&7);break}}return Pt},fromJSON(j){return{video:lr(j.video)?a.VideoRendering.fromJSON(j.video):void 0,audio:lr(j.audio)?a.AudioRendering.fromJSON(j.audio):void 0,quality:lr(j.quality)?lt(j.quality):void 0,targetLatency:lr(j.targetLatency)?Number(j.targetLatency):void 0,complexity:lr(j.complexity)?Number(j.complexity):void 0}},toJSON(j){const at={};return j.video!==void 0&&(at.video=j.video?a.VideoRendering.toJSON(j.video):void 0),j.audio!==void 0&&(at.audio=j.audio?a.AudioRendering.toJSON(j.audio):void 0),j.quality!==void 0&&(at.quality=j.quality!==void 0?gt(j.quality):void 0),j.targetLatency!==void 0&&(at.targetLatency=Math.round(j.targetLatency)),j.complexity!==void 0&&(at.complexity=Math.round(j.complexity)),at},fromPartial(j){var at,ct,Yt;const Pt=yn();return Pt.video=j.video!==void 0&&j.video!==null?a.VideoRendering.fromPartial(j.video):void 0,Pt.audio=j.audio!==void 0&&j.audio!==null?a.AudioRendering.fromPartial(j.audio):void 0,Pt.quality=(at=j.quality)!==null&&at!==void 0?at:void 0,Pt.targetLatency=(ct=j.targetLatency)!==null&&ct!==void 0?ct:void 0,Pt.complexity=(Yt=j.complexity)!==null&&Yt!==void 0?Yt:void 0,Pt}};function br(){return{mode:void 0,targetBitrate:void 0,maxKeyFrameInterval:void 0}}a.VideoCodecRateControl={encode(j,at=b.default.Writer.create()){return j.mode!==void 0&&at.uint32(8).int32(qt(j.mode)),j.targetBitrate!==void 0&&at.uint32(16).uint32(j.targetBitrate),j.maxKeyFrameInterval!==void 0&&at.uint32(24).uint32(j.maxKeyFrameInterval),at},decode(j,at){const ct=j instanceof b.default.Reader?j:new b.default.Reader(j);let Yt=at===void 0?ct.len:ct.pos+at;const Pt=br();for(;ct.pos<Yt;){const Xt=ct.uint32();switch(Xt>>>3){case 1:Pt.mode=st(ct.int32());break;case 2:Pt.targetBitrate=ct.uint32();break;case 3:Pt.maxKeyFrameInterval=ct.uint32();break;default:ct.skipType(Xt&7);break}}return Pt},fromJSON(j){return{mode:lr(j.mode)?st(j.mode):void 0,targetBitrate:lr(j.targetBitrate)?Number(j.targetBitrate):void 0,maxKeyFrameInterval:lr(j.maxKeyFrameInterval)?Number(j.maxKeyFrameInterval):void 0}},toJSON(j){const at={};return j.mode!==void 0&&(at.mode=j.mode!==void 0?Ct(j.mode):void 0),j.targetBitrate!==void 0&&(at.targetBitrate=Math.round(j.targetBitrate)),j.maxKeyFrameInterval!==void 0&&(at.maxKeyFrameInterval=Math.round(j.maxKeyFrameInterval)),at},fromPartial(j){var at,ct,Yt;const Pt=br();return Pt.mode=(at=j.mode)!==null&&at!==void 0?at:void 0,Pt.targetBitrate=(ct=j.targetBitrate)!==null&&ct!==void 0?ct:void 0,Pt.maxKeyFrameInterval=(Yt=j.maxKeyFrameInterval)!==null&&Yt!==void 0?Yt:void 0,Pt}};function wr(){return{codec:void 0,rateControl:void 0,profile:void 0}}a.VideoEncoding={encode(j,at=b.default.Writer.create()){return j.codec!==void 0&&at.uint32(8).int32(Lt(j.codec)),j.rateControl!==void 0&&a.VideoCodecRateControl.encode(j.rateControl,at.uint32(18).fork()).ldelim(),j.profile!==void 0&&at.uint32(32).int32(Wt(j.profile)),at},decode(j,at){const ct=j instanceof b.default.Reader?j:new b.default.Reader(j);let Yt=at===void 0?ct.len:ct.pos+at;const Pt=wr();for(;ct.pos<Yt;){const Xt=ct.uint32();switch(Xt>>>3){case 1:Pt.codec=rt(ct.int32());break;case 2:Pt.rateControl=a.VideoCodecRateControl.decode(ct,ct.uint32());break;case 4:Pt.profile=rr(ct.int32());break;default:ct.skipType(Xt&7);break}}return Pt},fromJSON(j){return{codec:lr(j.codec)?rt(j.codec):void 0,rateControl:lr(j.rateControl)?a.VideoCodecRateControl.fromJSON(j.rateControl):void 0,profile:lr(j.profile)?rr(j.profile):void 0}},toJSON(j){const at={};return j.codec!==void 0&&(at.codec=j.codec!==void 0?mt(j.codec):void 0),j.rateControl!==void 0&&(at.rateControl=j.rateControl?a.VideoCodecRateControl.toJSON(j.rateControl):void 0),j.profile!==void 0&&(at.profile=j.profile!==void 0?ir(j.profile):void 0),at},fromPartial(j){var at,ct;const Yt=wr();return Yt.codec=(at=j.codec)!==null&&at!==void 0?at:void 0,Yt.rateControl=j.rateControl!==void 0&&j.rateControl!==null?a.VideoCodecRateControl.fromPartial(j.rateControl):void 0,Yt.profile=(ct=j.profile)!==null&&ct!==void 0?ct:void 0,Yt}};function Mr(){return{codec:void 0}}a.AudioEncoding={encode(j,at=b.default.Writer.create()){return j.codec!==void 0&&at.uint32(8).int32(Qt(j.codec)),at},decode(j,at){const ct=j instanceof b.default.Reader?j:new b.default.Reader(j);let Yt=at===void 0?ct.len:ct.pos+at;const Pt=Mr();for(;ct.pos<Yt;){const Xt=ct.uint32();switch(Xt>>>3){case 1:Pt.codec=wt(ct.int32());break;default:ct.skipType(Xt&7);break}}return Pt},fromJSON(j){return{codec:lr(j.codec)?wt(j.codec):void 0}},toJSON(j){const at={};return j.codec!==void 0&&(at.codec=j.codec!==void 0?Vt(j.codec):void 0),at},fromPartial(j){var at;const ct=Mr();return ct.codec=(at=j.codec)!==null&&at!==void 0?at:void 0,ct}};function Wr(){return{video:void 0,audio:void 0}}a.Encoding={encode(j,at=b.default.Writer.create()){return j.video!==void 0&&a.VideoEncoding.encode(j.video,at.uint32(10).fork()).ldelim(),j.audio!==void 0&&a.AudioEncoding.encode(j.audio,at.uint32(18).fork()).ldelim(),at},decode(j,at){const ct=j instanceof b.default.Reader?j:new b.default.Reader(j);let Yt=at===void 0?ct.len:ct.pos+at;const Pt=Wr();for(;ct.pos<Yt;){const Xt=ct.uint32();switch(Xt>>>3){case 1:Pt.video=a.VideoEncoding.decode(ct,ct.uint32());break;case 2:Pt.audio=a.AudioEncoding.decode(ct,ct.uint32());break;default:ct.skipType(Xt&7);break}}return Pt},fromJSON(j){return{video:lr(j.video)?a.VideoEncoding.fromJSON(j.video):void 0,audio:lr(j.audio)?a.AudioEncoding.fromJSON(j.audio):void 0}},toJSON(j){const at={};return j.video!==void 0&&(at.video=j.video?a.VideoEncoding.toJSON(j.video):void 0),j.audio!==void 0&&(at.audio=j.audio?a.AudioEncoding.toJSON(j.audio):void 0),at},fromPartial(j){const at=Wr();return at.video=j.video!==void 0&&j.video!==null?a.VideoEncoding.fromPartial(j.video):void 0,at.audio=j.audio!==void 0&&j.audio!==null?a.AudioEncoding.fromPartial(j.audio):void 0,at}};function Hr(){return{enabled:void 0,key:void 0,url:void 0,baseUrl:void 0,previewUrl:void 0,ingestId:void 0,secure:void 0,ingestType:void 0}}a.SourceRtmpPushAddress={encode(j,at=b.default.Writer.create()){return j.enabled!==void 0&&at.uint32(8).bool(j.enabled),j.key!==void 0&&at.uint32(18).string(j.key),j.url!==void 0&&at.uint32(26).string(j.url),j.baseUrl!==void 0&&at.uint32(34).string(j.baseUrl),j.previewUrl!==void 0&&at.uint32(42).string(j.previewUrl),j.ingestId!==void 0&&at.uint32(50).string(j.ingestId),j.secure!==void 0&&at.uint32(56).bool(j.secure),j.ingestType!==void 0&&at.uint32(66).string(j.ingestType),at},decode(j,at){const ct=j instanceof b.default.Reader?j:new b.default.Reader(j);let Yt=at===void 0?ct.len:ct.pos+at;const Pt=Hr();for(;ct.pos<Yt;){const Xt=ct.uint32();switch(Xt>>>3){case 1:Pt.enabled=ct.bool();break;case 2:Pt.key=ct.string();break;case 3:Pt.url=ct.string();break;case 4:Pt.baseUrl=ct.string();break;case 5:Pt.previewUrl=ct.string();break;case 6:Pt.ingestId=ct.string();break;case 7:Pt.secure=ct.bool();break;case 8:Pt.ingestType=ct.string();break;default:ct.skipType(Xt&7);break}}return Pt},fromJSON(j){return{enabled:lr(j.enabled)?!!j.enabled:void 0,key:lr(j.key)?String(j.key):void 0,url:lr(j.url)?String(j.url):void 0,baseUrl:lr(j.baseUrl)?String(j.baseUrl):void 0,previewUrl:lr(j.previewUrl)?String(j.previewUrl):void 0,ingestId:lr(j.ingestId)?String(j.ingestId):void 0,secure:lr(j.secure)?!!j.secure:void 0,ingestType:lr(j.ingestType)?String(j.ingestType):void 0}},toJSON(j){const at={};return j.enabled!==void 0&&(at.enabled=j.enabled),j.key!==void 0&&(at.key=j.key),j.url!==void 0&&(at.url=j.url),j.baseUrl!==void 0&&(at.baseUrl=j.baseUrl),j.previewUrl!==void 0&&(at.previewUrl=j.previewUrl),j.ingestId!==void 0&&(at.ingestId=j.ingestId),j.secure!==void 0&&(at.secure=j.secure),j.ingestType!==void 0&&(at.ingestType=j.ingestType),at},fromPartial(j){var at,ct,Yt,Pt,Xt,Kr,an,dn;const ln=Hr();return ln.enabled=(at=j.enabled)!==null&&at!==void 0?at:void 0,ln.key=(ct=j.key)!==null&&ct!==void 0?ct:void 0,ln.url=(Yt=j.url)!==null&&Yt!==void 0?Yt:void 0,ln.baseUrl=(Pt=j.baseUrl)!==null&&Pt!==void 0?Pt:void 0,ln.previewUrl=(Xt=j.previewUrl)!==null&&Xt!==void 0?Xt:void 0,ln.ingestId=(Kr=j.ingestId)!==null&&Kr!==void 0?Kr:void 0,ln.secure=(an=j.secure)!==null&&an!==void 0?an:void 0,ln.ingestType=(dn=j.ingestType)!==null&&dn!==void 0?dn:void 0,ln}};function Gr(){return{enabled:void 0,streamId:void 0,url:void 0,baseUrl:void 0,previewUrl:void 0,ingestId:void 0,ingestType:void 0}}a.SrtPushAddress={encode(j,at=b.default.Writer.create()){return j.enabled!==void 0&&at.uint32(8).bool(j.enabled),j.streamId!==void 0&&at.uint32(18).string(j.streamId),j.url!==void 0&&at.uint32(26).string(j.url),j.baseUrl!==void 0&&at.uint32(34).string(j.baseUrl),j.previewUrl!==void 0&&at.uint32(42).string(j.previewUrl),j.ingestId!==void 0&&at.uint32(50).string(j.ingestId),j.ingestType!==void 0&&at.uint32(58).string(j.ingestType),at},decode(j,at){const ct=j instanceof b.default.Reader?j:new b.default.Reader(j);let Yt=at===void 0?ct.len:ct.pos+at;const Pt=Gr();for(;ct.pos<Yt;){const Xt=ct.uint32();switch(Xt>>>3){case 1:Pt.enabled=ct.bool();break;case 2:Pt.streamId=ct.string();break;case 3:Pt.url=ct.string();break;case 4:Pt.baseUrl=ct.string();break;case 5:Pt.previewUrl=ct.string();break;case 6:Pt.ingestId=ct.string();break;case 7:Pt.ingestType=ct.string();break;default:ct.skipType(Xt&7);break}}return Pt},fromJSON(j){return{enabled:lr(j.enabled)?!!j.enabled:void 0,streamId:lr(j.streamId)?String(j.streamId):void 0,url:lr(j.url)?String(j.url):void 0,baseUrl:lr(j.baseUrl)?String(j.baseUrl):void 0,previewUrl:lr(j.previewUrl)?String(j.previewUrl):void 0,ingestId:lr(j.ingestId)?String(j.ingestId):void 0,ingestType:lr(j.ingestType)?String(j.ingestType):void 0}},toJSON(j){const at={};return j.enabled!==void 0&&(at.enabled=j.enabled),j.streamId!==void 0&&(at.streamId=j.streamId),j.url!==void 0&&(at.url=j.url),j.baseUrl!==void 0&&(at.baseUrl=j.baseUrl),j.previewUrl!==void 0&&(at.previewUrl=j.previewUrl),j.ingestId!==void 0&&(at.ingestId=j.ingestId),j.ingestType!==void 0&&(at.ingestType=j.ingestType),at},fromPartial(j){var at,ct,Yt,Pt,Xt,Kr,an;const dn=Gr();return dn.enabled=(at=j.enabled)!==null&&at!==void 0?at:void 0,dn.streamId=(ct=j.streamId)!==null&&ct!==void 0?ct:void 0,dn.url=(Yt=j.url)!==null&&Yt!==void 0?Yt:void 0,dn.baseUrl=(Pt=j.baseUrl)!==null&&Pt!==void 0?Pt:void 0,dn.previewUrl=(Xt=j.previewUrl)!==null&&Xt!==void 0?Xt:void 0,dn.ingestId=(Kr=j.ingestId)!==null&&Kr!==void 0?Kr:void 0,dn.ingestType=(an=j.ingestType)!==null&&an!==void 0?an:void 0,dn}};function Yr(){return{url:""}}a.RtmpPullAddress={encode(j,at=b.default.Writer.create()){return j.url!==""&&at.uint32(10).string(j.url),at},decode(j,at){const ct=j instanceof b.default.Reader?j:new b.default.Reader(j);let Yt=at===void 0?ct.len:ct.pos+at;const Pt=Yr();for(;ct.pos<Yt;){const Xt=ct.uint32();switch(Xt>>>3){case 1:Pt.url=ct.string();break;default:ct.skipType(Xt&7);break}}return Pt},fromJSON(j){return{url:lr(j.url)?String(j.url):""}},toJSON(j){const at={};return j.url!==void 0&&(at.url=j.url),at},fromPartial(j){var at;const ct=Yr();return ct.url=(at=j.url)!==null&&at!==void 0?at:"",ct}};function en(){return{url:""}}a.SrtPullAddress={encode(j,at=b.default.Writer.create()){return j.url!==""&&at.uint32(10).string(j.url),at},decode(j,at){const ct=j instanceof b.default.Reader?j:new b.default.Reader(j);let Yt=at===void 0?ct.len:ct.pos+at;const Pt=en();for(;ct.pos<Yt;){const Xt=ct.uint32();switch(Xt>>>3){case 1:Pt.url=ct.string();break;default:ct.skipType(Xt&7);break}}return Pt},fromJSON(j){return{url:lr(j.url)?String(j.url):""}},toJSON(j){const at={};return j.url!==void 0&&(at.url=j.url),at},fromPartial(j){var at;const ct=en();return ct.url=(at=j.url)!==null&&at!==void 0?at:"",ct}};function jr(){return{id:void 0}}a.DynamicAddress={encode(j,at=b.default.Writer.create()){return j.id!==void 0&&at.uint32(10).string(j.id),at},decode(j,at){const ct=j instanceof b.default.Reader?j:new b.default.Reader(j);let Yt=at===void 0?ct.len:ct.pos+at;const Pt=jr();for(;ct.pos<Yt;){const Xt=ct.uint32();switch(Xt>>>3){case 1:Pt.id=ct.string();break;default:ct.skipType(Xt&7);break}}return Pt},fromJSON(j){return{id:lr(j.id)?String(j.id):void 0}},toJSON(j){const at={};return j.id!==void 0&&(at.id=j.id),at},fromPartial(j){var at;const ct=jr();return ct.id=(at=j.id)!==null&&at!==void 0?at:void 0,ct}};function pn(){return{enabled:void 0,secure:!1}}a.DirectRTMPAddress={encode(j,at=b.default.Writer.create()){return j.enabled!==void 0&&at.uint32(8).bool(j.enabled),j.secure===!0&&at.uint32(16).bool(j.secure),at},decode(j,at){const ct=j instanceof b.default.Reader?j:new b.default.Reader(j);let Yt=at===void 0?ct.len:ct.pos+at;const Pt=pn();for(;ct.pos<Yt;){const Xt=ct.uint32();switch(Xt>>>3){case 1:Pt.enabled=ct.bool();break;case 2:Pt.secure=ct.bool();break;default:ct.skipType(Xt&7);break}}return Pt},fromJSON(j){return{enabled:lr(j.enabled)?!!j.enabled:void 0,secure:lr(j.secure)?!!j.secure:!1}},toJSON(j){const at={};return j.enabled!==void 0&&(at.enabled=j.enabled),j.secure!==void 0&&(at.secure=j.secure),at},fromPartial(j){var at,ct;const Yt=pn();return Yt.enabled=(at=j.enabled)!==null&&at!==void 0?at:void 0,Yt.secure=(ct=j.secure)!==null&&ct!==void 0?ct:!1,Yt}};function mn(){return{enabled:void 0,secure:!1}}a.DirectSrtAddress={encode(j,at=b.default.Writer.create()){return j.enabled!==void 0&&at.uint32(8).bool(j.enabled),j.secure===!0&&at.uint32(16).bool(j.secure),at},decode(j,at){const ct=j instanceof b.default.Reader?j:new b.default.Reader(j);let Yt=at===void 0?ct.len:ct.pos+at;const Pt=mn();for(;ct.pos<Yt;){const Xt=ct.uint32();switch(Xt>>>3){case 1:Pt.enabled=ct.bool();break;case 2:Pt.secure=ct.bool();break;default:ct.skipType(Xt&7);break}}return Pt},fromJSON(j){return{enabled:lr(j.enabled)?!!j.enabled:void 0,secure:lr(j.secure)?!!j.secure:!1}},toJSON(j){const at={};return j.enabled!==void 0&&(at.enabled=j.enabled),j.secure!==void 0&&(at.secure=j.secure),at},fromPartial(j){var at,ct;const Yt=mn();return Yt.enabled=(at=j.enabled)!==null&&at!==void 0?at:void 0,Yt.secure=(ct=j.secure)!==null&&ct!==void 0?ct:!1,Yt}};function hn(){return{rtmpPull:void 0,srtPull:void 0,directRtmpPush:void 0,directSrtPush:void 0}}a.RuntimeSourceAddress={encode(j,at=b.default.Writer.create()){return j.rtmpPull!==void 0&&a.RtmpPullAddress.encode(j.rtmpPull,at.uint32(10).fork()).ldelim(),j.srtPull!==void 0&&a.SrtPullAddress.encode(j.srtPull,at.uint32(18).fork()).ldelim(),j.directRtmpPush!==void 0&&a.DirectRTMPAddress.encode(j.directRtmpPush,at.uint32(26).fork()).ldelim(),j.directSrtPush!==void 0&&a.DirectSrtAddress.encode(j.directSrtPush,at.uint32(34).fork()).ldelim(),at},decode(j,at){const ct=j instanceof b.default.Reader?j:new b.default.Reader(j);let Yt=at===void 0?ct.len:ct.pos+at;const Pt=hn();for(;ct.pos<Yt;){const Xt=ct.uint32();switch(Xt>>>3){case 1:Pt.rtmpPull=a.RtmpPullAddress.decode(ct,ct.uint32());break;case 2:Pt.srtPull=a.SrtPullAddress.decode(ct,ct.uint32());break;case 3:Pt.directRtmpPush=a.DirectRTMPAddress.decode(ct,ct.uint32());break;case 4:Pt.directSrtPush=a.DirectSrtAddress.decode(ct,ct.uint32());break;default:ct.skipType(Xt&7);break}}return Pt},fromJSON(j){return{rtmpPull:lr(j.rtmpPull)?a.RtmpPullAddress.fromJSON(j.rtmpPull):void 0,srtPull:lr(j.srtPull)?a.SrtPullAddress.fromJSON(j.srtPull):void 0,directRtmpPush:lr(j.directRtmpPush)?a.DirectRTMPAddress.fromJSON(j.directRtmpPush):void 0,directSrtPush:lr(j.directSrtPush)?a.DirectSrtAddress.fromJSON(j.directSrtPush):void 0}},toJSON(j){const at={};return j.rtmpPull!==void 0&&(at.rtmpPull=j.rtmpPull?a.RtmpPullAddress.toJSON(j.rtmpPull):void 0),j.srtPull!==void 0&&(at.srtPull=j.srtPull?a.SrtPullAddress.toJSON(j.srtPull):void 0),j.directRtmpPush!==void 0&&(at.directRtmpPush=j.directRtmpPush?a.DirectRTMPAddress.toJSON(j.directRtmpPush):void 0),j.directSrtPush!==void 0&&(at.directSrtPush=j.directSrtPush?a.DirectSrtAddress.toJSON(j.directSrtPush):void 0),at},fromPartial(j){const at=hn();return at.rtmpPull=j.rtmpPull!==void 0&&j.rtmpPull!==null?a.RtmpPullAddress.fromPartial(j.rtmpPull):void 0,at.srtPull=j.srtPull!==void 0&&j.srtPull!==null?a.SrtPullAddress.fromPartial(j.srtPull):void 0,at.directRtmpPush=j.directRtmpPush!==void 0&&j.directRtmpPush!==null?a.DirectRTMPAddress.fromPartial(j.directRtmpPush):void 0,at.directSrtPush=j.directSrtPush!==void 0&&j.directSrtPush!==null?a.DirectSrtAddress.fromPartial(j.directSrtPush):void 0,at}};function fn(){return{rtmpPush:void 0,srtPush:void 0,rtmpPull:void 0,srtPull:void 0,dynamic:void 0}}a.SourceAddress={encode(j,at=b.default.Writer.create()){return j.rtmpPush!==void 0&&a.SourceRtmpPushAddress.encode(j.rtmpPush,at.uint32(10).fork()).ldelim(),j.srtPush!==void 0&&a.SrtPushAddress.encode(j.srtPush,at.uint32(18).fork()).ldelim(),j.rtmpPull!==void 0&&a.RtmpPullAddress.encode(j.rtmpPull,at.uint32(26).fork()).ldelim(),j.srtPull!==void 0&&a.SrtPullAddress.encode(j.srtPull,at.uint32(34).fork()).ldelim(),j.dynamic!==void 0&&a.DynamicAddress.encode(j.dynamic,at.uint32(42).fork()).ldelim(),at},decode(j,at){const ct=j instanceof b.default.Reader?j:new b.default.Reader(j);let Yt=at===void 0?ct.len:ct.pos+at;const Pt=fn();for(;ct.pos<Yt;){const Xt=ct.uint32();switch(Xt>>>3){case 1:Pt.rtmpPush=a.SourceRtmpPushAddress.decode(ct,ct.uint32());break;case 2:Pt.srtPush=a.SrtPushAddress.decode(ct,ct.uint32());break;case 3:Pt.rtmpPull=a.RtmpPullAddress.decode(ct,ct.uint32());break;case 4:Pt.srtPull=a.SrtPullAddress.decode(ct,ct.uint32());break;case 5:Pt.dynamic=a.DynamicAddress.decode(ct,ct.uint32());break;default:ct.skipType(Xt&7);break}}return Pt},fromJSON(j){return{rtmpPush:lr(j.rtmpPush)?a.SourceRtmpPushAddress.fromJSON(j.rtmpPush):void 0,srtPush:lr(j.srtPush)?a.SrtPushAddress.fromJSON(j.srtPush):void 0,rtmpPull:lr(j.rtmpPull)?a.RtmpPullAddress.fromJSON(j.rtmpPull):void 0,srtPull:lr(j.srtPull)?a.SrtPullAddress.fromJSON(j.srtPull):void 0,dynamic:lr(j.dynamic)?a.DynamicAddress.fromJSON(j.dynamic):void 0}},toJSON(j){const at={};return j.rtmpPush!==void 0&&(at.rtmpPush=j.rtmpPush?a.SourceRtmpPushAddress.toJSON(j.rtmpPush):void 0),j.srtPush!==void 0&&(at.srtPush=j.srtPush?a.SrtPushAddress.toJSON(j.srtPush):void 0),j.rtmpPull!==void 0&&(at.rtmpPull=j.rtmpPull?a.RtmpPullAddress.toJSON(j.rtmpPull):void 0),j.srtPull!==void 0&&(at.srtPull=j.srtPull?a.SrtPullAddress.toJSON(j.srtPull):void 0),j.dynamic!==void 0&&(at.dynamic=j.dynamic?a.DynamicAddress.toJSON(j.dynamic):void 0),at},fromPartial(j){const at=fn();return at.rtmpPush=j.rtmpPush!==void 0&&j.rtmpPush!==null?a.SourceRtmpPushAddress.fromPartial(j.rtmpPush):void 0,at.srtPush=j.srtPush!==void 0&&j.srtPush!==null?a.SrtPushAddress.fromPartial(j.srtPush):void 0,at.rtmpPull=j.rtmpPull!==void 0&&j.rtmpPull!==null?a.RtmpPullAddress.fromPartial(j.rtmpPull):void 0,at.srtPull=j.srtPull!==void 0&&j.srtPull!==null?a.SrtPullAddress.fromPartial(j.srtPull):void 0,at.dynamic=j.dynamic!==void 0&&j.dynamic!==null?a.DynamicAddress.fromPartial(j.dynamic):void 0,at}};function vn(){return{key:void 0,url:""}}a.DestinationRtmpPushAddress={encode(j,at=b.default.Writer.create()){return j.key!==void 0&&at.uint32(10).string(j.key),j.url!==""&&at.uint32(18).string(j.url),at},decode(j,at){const ct=j instanceof b.default.Reader?j:new b.default.Reader(j);let Yt=at===void 0?ct.len:ct.pos+at;const Pt=vn();for(;ct.pos<Yt;){const Xt=ct.uint32();switch(Xt>>>3){case 1:Pt.key=ct.string();break;case 2:Pt.url=ct.string();break;default:ct.skipType(Xt&7);break}}return Pt},fromJSON(j){return{key:lr(j.key)?String(j.key):void 0,url:lr(j.url)?String(j.url):""}},toJSON(j){const at={};return j.key!==void 0&&(at.key=j.key),j.url!==void 0&&(at.url=j.url),at},fromPartial(j){var at,ct;const Yt=vn();return Yt.key=(at=j.key)!==null&&at!==void 0?at:void 0,Yt.url=(ct=j.url)!==null&&ct!==void 0?ct:"",Yt}};function gn(){return{url:""}}a.DestinationSrtPushAddress={encode(j,at=b.default.Writer.create()){return j.url!==""&&at.uint32(18).string(j.url),at},decode(j,at){const ct=j instanceof b.default.Reader?j:new b.default.Reader(j);let Yt=at===void 0?ct.len:ct.pos+at;const Pt=gn();for(;ct.pos<Yt;){const Xt=ct.uint32();switch(Xt>>>3){case 2:Pt.url=ct.string();break;default:ct.skipType(Xt&7);break}}return Pt},fromJSON(j){return{url:lr(j.url)?String(j.url):""}},toJSON(j){const at={};return j.url!==void 0&&(at.url=j.url),at},fromPartial(j){var at;const ct=gn();return ct.url=(at=j.url)!==null&&at!==void 0?at:"",ct}};function Sn(){return{appId:"",channelId:"",userId:""}}a.DestinationAgoraPushAddress={encode(j,at=b.default.Writer.create()){return j.appId!==""&&at.uint32(10).string(j.appId),j.channelId!==""&&at.uint32(18).string(j.channelId),j.userId!==""&&at.uint32(26).string(j.userId),at},decode(j,at){const ct=j instanceof b.default.Reader?j:new b.default.Reader(j);let Yt=at===void 0?ct.len:ct.pos+at;const Pt=Sn();for(;ct.pos<Yt;){const Xt=ct.uint32();switch(Xt>>>3){case 1:Pt.appId=ct.string();break;case 2:Pt.channelId=ct.string();break;case 3:Pt.userId=ct.string();break;default:ct.skipType(Xt&7);break}}return Pt},fromJSON(j){return{appId:lr(j.appId)?String(j.appId):"",channelId:lr(j.channelId)?String(j.channelId):"",userId:lr(j.userId)?String(j.userId):""}},toJSON(j){const at={};return j.appId!==void 0&&(at.appId=j.appId),j.channelId!==void 0&&(at.channelId=j.channelId),j.userId!==void 0&&(at.userId=j.userId),at},fromPartial(j){var at,ct,Yt;const Pt=Sn();return Pt.appId=(at=j.appId)!==null&&at!==void 0?at:"",Pt.channelId=(ct=j.channelId)!==null&&ct!==void 0?ct:"",Pt.userId=(Yt=j.userId)!==null&&Yt!==void 0?Yt:"",Pt}};function kn(){return{playlistCount:void 0,fileCount:void 0}}a.HlsLifecycleLive={encode(j,at=b.default.Writer.create()){return j.playlistCount!==void 0&&at.uint32(8).int32(j.playlistCount),j.fileCount!==void 0&&at.uint32(16).int32(j.fileCount),at},decode(j,at){const ct=j instanceof b.default.Reader?j:new b.default.Reader(j);let Yt=at===void 0?ct.len:ct.pos+at;const Pt=kn();for(;ct.pos<Yt;){const Xt=ct.uint32();switch(Xt>>>3){case 1:Pt.playlistCount=ct.int32();break;case 2:Pt.fileCount=ct.int32();break;default:ct.skipType(Xt&7);break}}return Pt},fromJSON(j){return{playlistCount:lr(j.playlistCount)?Number(j.playlistCount):void 0,fileCount:lr(j.fileCount)?Number(j.fileCount):void 0}},toJSON(j){const at={};return j.playlistCount!==void 0&&(at.playlistCount=Math.round(j.playlistCount)),j.fileCount!==void 0&&(at.fileCount=Math.round(j.fileCount)),at},fromPartial(j){var at,ct;const Yt=kn();return Yt.playlistCount=(at=j.playlistCount)!==null&&at!==void 0?at:void 0,Yt.fileCount=(ct=j.fileCount)!==null&&ct!==void 0?ct:void 0,Yt}};function wn(){return{maxDuration:void 0}}a.HlsLifecycleVod={encode(j,at=b.default.Writer.create()){return j.maxDuration!==void 0&&at.uint32(8).int32(j.maxDuration),at},decode(j,at){const ct=j instanceof b.default.Reader?j:new b.default.Reader(j);let Yt=at===void 0?ct.len:ct.pos+at;const Pt=wn();for(;ct.pos<Yt;){const Xt=ct.uint32();switch(Xt>>>3){case 1:Pt.maxDuration=ct.int32();break;default:ct.skipType(Xt&7);break}}return Pt},fromJSON(j){return{maxDuration:lr(j.maxDuration)?Number(j.maxDuration):void 0}},toJSON(j){const at={};return j.maxDuration!==void 0&&(at.maxDuration=Math.round(j.maxDuration)),at},fromPartial(j){var at;const ct=wn();return ct.maxDuration=(at=j.maxDuration)!==null&&at!==void 0?at:void 0,ct}};function Nn(){return{vod:void 0,live:void 0}}a.HlsLifecycle={encode(j,at=b.default.Writer.create()){return j.vod!==void 0&&a.HlsLifecycleVod.encode(j.vod,at.uint32(10).fork()).ldelim(),j.live!==void 0&&a.HlsLifecycleLive.encode(j.live,at.uint32(18).fork()).ldelim(),at},decode(j,at){const ct=j instanceof b.default.Reader?j:new b.default.Reader(j);let Yt=at===void 0?ct.len:ct.pos+at;const Pt=Nn();for(;ct.pos<Yt;){const Xt=ct.uint32();switch(Xt>>>3){case 1:Pt.vod=a.HlsLifecycleVod.decode(ct,ct.uint32());break;case 2:Pt.live=a.HlsLifecycleLive.decode(ct,ct.uint32());break;default:ct.skipType(Xt&7);break}}return Pt},fromJSON(j){return{vod:lr(j.vod)?a.HlsLifecycleVod.fromJSON(j.vod):void 0,live:lr(j.live)?a.HlsLifecycleLive.fromJSON(j.live):void 0}},toJSON(j){const at={};return j.vod!==void 0&&(at.vod=j.vod?a.HlsLifecycleVod.toJSON(j.vod):void 0),j.live!==void 0&&(at.live=j.live?a.HlsLifecycleLive.toJSON(j.live):void 0),at},fromPartial(j){const at=Nn();return at.vod=j.vod!==void 0&&j.vod!==null?a.HlsLifecycleVod.fromPartial(j.vod):void 0,at.live=j.live!==void 0&&j.live!==null?a.HlsLifecycleLive.fromPartial(j.live):void 0,at}};function An(){return{lifecycle:void 0,segmentDuration:void 0}}a.HlsPackaging={encode(j,at=b.default.Writer.create()){return j.lifecycle!==void 0&&a.HlsLifecycle.encode(j.lifecycle,at.uint32(10).fork()).ldelim(),j.segmentDuration!==void 0&&at.uint32(16).int32(j.segmentDuration),at},decode(j,at){const ct=j instanceof b.default.Reader?j:new b.default.Reader(j);let Yt=at===void 0?ct.len:ct.pos+at;const Pt=An();for(;ct.pos<Yt;){const Xt=ct.uint32();switch(Xt>>>3){case 1:Pt.lifecycle=a.HlsLifecycle.decode(ct,ct.uint32());break;case 2:Pt.segmentDuration=ct.int32();break;default:ct.skipType(Xt&7);break}}return Pt},fromJSON(j){return{lifecycle:lr(j.lifecycle)?a.HlsLifecycle.fromJSON(j.lifecycle):void 0,segmentDuration:lr(j.segmentDuration)?Number(j.segmentDuration):void 0}},toJSON(j){const at={};return j.lifecycle!==void 0&&(at.lifecycle=j.lifecycle?a.HlsLifecycle.toJSON(j.lifecycle):void 0),j.segmentDuration!==void 0&&(at.segmentDuration=Math.round(j.segmentDuration)),at},fromPartial(j){var at;const ct=An();return ct.lifecycle=j.lifecycle!==void 0&&j.lifecycle!==null?a.HlsLifecycle.fromPartial(j.lifecycle):void 0,ct.segmentDuration=(at=j.segmentDuration)!==null&&at!==void 0?at:void 0,ct}};function $n(){return{hls:void 0}}a.ObjectStoragePackaging={encode(j,at=b.default.Writer.create()){return j.hls!==void 0&&a.HlsPackaging.encode(j.hls,at.uint32(10).fork()).ldelim(),at},decode(j,at){const ct=j instanceof b.default.Reader?j:new b.default.Reader(j);let Yt=at===void 0?ct.len:ct.pos+at;const Pt=$n();for(;ct.pos<Yt;){const Xt=ct.uint32();switch(Xt>>>3){case 1:Pt.hls=a.HlsPackaging.decode(ct,ct.uint32());break;default:ct.skipType(Xt&7);break}}return Pt},fromJSON(j){return{hls:lr(j.hls)?a.HlsPackaging.fromJSON(j.hls):void 0}},toJSON(j){const at={};return j.hls!==void 0&&(at.hls=j.hls?a.HlsPackaging.toJSON(j.hls):void 0),at},fromPartial(j){const at=$n();return at.hls=j.hls!==void 0&&j.hls!==null?a.HlsPackaging.fromPartial(j.hls):void 0,at}};function Dn(){return{enabled:void 0,displayName:void 0,participantId:void 0}}a.PreviewWebRtcAddress={encode(j,at=b.default.Writer.create()){return j.enabled!==void 0&&at.uint32(8).bool(j.enabled),j.displayName!==void 0&&at.uint32(18).string(j.displayName),j.participantId!==void 0&&at.uint32(26).string(j.participantId),at},decode(j,at){const ct=j instanceof b.default.Reader?j:new b.default.Reader(j);let Yt=at===void 0?ct.len:ct.pos+at;const Pt=Dn();for(;ct.pos<Yt;){const Xt=ct.uint32();switch(Xt>>>3){case 1:Pt.enabled=ct.bool();break;case 2:Pt.displayName=ct.string();break;case 3:Pt.participantId=ct.string();break;default:ct.skipType(Xt&7);break}}return Pt},fromJSON(j){return{enabled:lr(j.enabled)?!!j.enabled:void 0,displayName:lr(j.displayName)?String(j.displayName):void 0,participantId:lr(j.participantId)?String(j.participantId):void 0}},toJSON(j){const at={};return j.enabled!==void 0&&(at.enabled=j.enabled),j.displayName!==void 0&&(at.displayName=j.displayName),j.participantId!==void 0&&(at.participantId=j.participantId),at},fromPartial(j){var at,ct,Yt;const Pt=Dn();return Pt.enabled=(at=j.enabled)!==null&&at!==void 0?at:void 0,Pt.displayName=(ct=j.displayName)!==null&&ct!==void 0?ct:void 0,Pt.participantId=(Yt=j.participantId)!==null&&Yt!==void 0?Yt:void 0,Pt}};function Ln(){return{region:"",bucket:"",prefix:void 0,accessKey:"",secretKey:"",token:void 0,tokenDuration:void 0,acl:void 0,endpoint:void 0,packaging:void 0}}a.S3StorageAddress={encode(j,at=b.default.Writer.create()){return j.region!==""&&at.uint32(10).string(j.region),j.bucket!==""&&at.uint32(18).string(j.bucket),j.prefix!==void 0&&at.uint32(26).string(j.prefix),j.accessKey!==""&&at.uint32(34).string(j.accessKey),j.secretKey!==""&&at.uint32(42).string(j.secretKey),j.token!==void 0&&at.uint32(50).string(j.token),j.tokenDuration!==void 0&&at.uint32(56).int32(j.tokenDuration),j.acl!==void 0&&at.uint32(64).int32(_r(j.acl)),j.endpoint!==void 0&&at.uint32(74).string(j.endpoint),j.packaging!==void 0&&a.ObjectStoragePackaging.encode(j.packaging,at.uint32(82).fork()).ldelim(),at},decode(j,at){const ct=j instanceof b.default.Reader?j:new b.default.Reader(j);let Yt=at===void 0?ct.len:ct.pos+at;const Pt=Ln();for(;ct.pos<Yt;){const Xt=ct.uint32();switch(Xt>>>3){case 1:Pt.region=ct.string();break;case 2:Pt.bucket=ct.string();break;case 3:Pt.prefix=ct.string();break;case 4:Pt.accessKey=ct.string();break;case 5:Pt.secretKey=ct.string();break;case 6:Pt.token=ct.string();break;case 7:Pt.tokenDuration=ct.int32();break;case 8:Pt.acl=Zr(ct.int32());break;case 9:Pt.endpoint=ct.string();break;case 10:Pt.packaging=a.ObjectStoragePackaging.decode(ct,ct.uint32());break;default:ct.skipType(Xt&7);break}}return Pt},fromJSON(j){return{region:lr(j.region)?String(j.region):"",bucket:lr(j.bucket)?String(j.bucket):"",prefix:lr(j.prefix)?String(j.prefix):void 0,accessKey:lr(j.accessKey)?String(j.accessKey):"",secretKey:lr(j.secretKey)?String(j.secretKey):"",token:lr(j.token)?String(j.token):void 0,tokenDuration:lr(j.tokenDuration)?Number(j.tokenDuration):void 0,acl:lr(j.acl)?Zr(j.acl):void 0,endpoint:lr(j.endpoint)?String(j.endpoint):void 0,packaging:lr(j.packaging)?a.ObjectStoragePackaging.fromJSON(j.packaging):void 0}},toJSON(j){const at={};return j.region!==void 0&&(at.region=j.region),j.bucket!==void 0&&(at.bucket=j.bucket),j.prefix!==void 0&&(at.prefix=j.prefix),j.accessKey!==void 0&&(at.accessKey=j.accessKey),j.secretKey!==void 0&&(at.secretKey=j.secretKey),j.token!==void 0&&(at.token=j.token),j.tokenDuration!==void 0&&(at.tokenDuration=Math.round(j.tokenDuration)),j.acl!==void 0&&(at.acl=j.acl!==void 0?Pr(j.acl):void 0),j.endpoint!==void 0&&(at.endpoint=j.endpoint),j.packaging!==void 0&&(at.packaging=j.packaging?a.ObjectStoragePackaging.toJSON(j.packaging):void 0),at},fromPartial(j){var at,ct,Yt,Pt,Xt,Kr,an,dn,ln;const En=Ln();return En.region=(at=j.region)!==null&&at!==void 0?at:"",En.bucket=(ct=j.bucket)!==null&&ct!==void 0?ct:"",En.prefix=(Yt=j.prefix)!==null&&Yt!==void 0?Yt:void 0,En.accessKey=(Pt=j.accessKey)!==null&&Pt!==void 0?Pt:"",En.secretKey=(Xt=j.secretKey)!==null&&Xt!==void 0?Xt:"",En.token=(Kr=j.token)!==null&&Kr!==void 0?Kr:void 0,En.tokenDuration=(an=j.tokenDuration)!==null&&an!==void 0?an:void 0,En.acl=(dn=j.acl)!==null&&dn!==void 0?dn:void 0,En.endpoint=(ln=j.endpoint)!==null&&ln!==void 0?ln:void 0,En.packaging=j.packaging!==void 0&&j.packaging!==null?a.ObjectStoragePackaging.fromPartial(j.packaging):void 0,En}};function Bn(){return{rtmpPush:void 0,agora:void 0,s3Storage:void 0,srtPush:void 0,webrtcPreview:void 0}}a.DestinationAddress={encode(j,at=b.default.Writer.create()){return j.rtmpPush!==void 0&&a.DestinationRtmpPushAddress.encode(j.rtmpPush,at.uint32(10).fork()).ldelim(),j.agora!==void 0&&a.DestinationAgoraPushAddress.encode(j.agora,at.uint32(18).fork()).ldelim(),j.s3Storage!==void 0&&a.S3StorageAddress.encode(j.s3Storage,at.uint32(26).fork()).ldelim(),j.srtPush!==void 0&&a.DestinationSrtPushAddress.encode(j.srtPush,at.uint32(34).fork()).ldelim(),j.webrtcPreview!==void 0&&a.PreviewWebRtcAddress.encode(j.webrtcPreview,at.uint32(42).fork()).ldelim(),at},decode(j,at){const ct=j instanceof b.default.Reader?j:new b.default.Reader(j);let Yt=at===void 0?ct.len:ct.pos+at;const Pt=Bn();for(;ct.pos<Yt;){const Xt=ct.uint32();switch(Xt>>>3){case 1:Pt.rtmpPush=a.DestinationRtmpPushAddress.decode(ct,ct.uint32());break;case 2:Pt.agora=a.DestinationAgoraPushAddress.decode(ct,ct.uint32());break;case 3:Pt.s3Storage=a.S3StorageAddress.decode(ct,ct.uint32());break;case 4:Pt.srtPush=a.DestinationSrtPushAddress.decode(ct,ct.uint32());break;case 5:Pt.webrtcPreview=a.PreviewWebRtcAddress.decode(ct,ct.uint32());break;default:ct.skipType(Xt&7);break}}return Pt},fromJSON(j){return{rtmpPush:lr(j.rtmpPush)?a.DestinationRtmpPushAddress.fromJSON(j.rtmpPush):void 0,agora:lr(j.agora)?a.DestinationAgoraPushAddress.fromJSON(j.agora):void 0,s3Storage:lr(j.s3Storage)?a.S3StorageAddress.fromJSON(j.s3Storage):void 0,srtPush:lr(j.srtPush)?a.DestinationSrtPushAddress.fromJSON(j.srtPush):void 0,webrtcPreview:lr(j.webrtcPreview)?a.PreviewWebRtcAddress.fromJSON(j.webrtcPreview):void 0}},toJSON(j){const at={};return j.rtmpPush!==void 0&&(at.rtmpPush=j.rtmpPush?a.DestinationRtmpPushAddress.toJSON(j.rtmpPush):void 0),j.agora!==void 0&&(at.agora=j.agora?a.DestinationAgoraPushAddress.toJSON(j.agora):void 0),j.s3Storage!==void 0&&(at.s3Storage=j.s3Storage?a.S3StorageAddress.toJSON(j.s3Storage):void 0),j.srtPush!==void 0&&(at.srtPush=j.srtPush?a.DestinationSrtPushAddress.toJSON(j.srtPush):void 0),j.webrtcPreview!==void 0&&(at.webrtcPreview=j.webrtcPreview?a.PreviewWebRtcAddress.toJSON(j.webrtcPreview):void 0),at},fromPartial(j){const at=Bn();return at.rtmpPush=j.rtmpPush!==void 0&&j.rtmpPush!==null?a.DestinationRtmpPushAddress.fromPartial(j.rtmpPush):void 0,at.agora=j.agora!==void 0&&j.agora!==null?a.DestinationAgoraPushAddress.fromPartial(j.agora):void 0,at.s3Storage=j.s3Storage!==void 0&&j.s3Storage!==null?a.S3StorageAddress.fromPartial(j.s3Storage):void 0,at.srtPush=j.srtPush!==void 0&&j.srtPush!==null?a.DestinationSrtPushAddress.fromPartial(j.srtPush):void 0,at.webrtcPreview=j.webrtcPreview!==void 0&&j.webrtcPreview!==null?a.PreviewWebRtcAddress.fromPartial(j.webrtcPreview):void 0,at}};function Un(){return{sourceId:"",start:void 0,stop:void 0}}a.SourceTrigger={encode(j,at=b.default.Writer.create()){return j.sourceId!==""&&at.uint32(10).string(j.sourceId),j.start!==void 0&&at.uint32(16).int32(kr(j.start)),j.stop!==void 0&&at.uint32(24).int32(kr(j.stop)),at},decode(j,at){const ct=j instanceof b.default.Reader?j:new b.default.Reader(j);let Yt=at===void 0?ct.len:ct.pos+at;const Pt=Un();for(;ct.pos<Yt;){const Xt=ct.uint32();switch(Xt>>>3){case 1:Pt.sourceId=ct.string();break;case 2:Pt.start=Kt(ct.int32());break;case 3:Pt.stop=Kt(ct.int32());break;default:ct.skipType(Xt&7);break}}return Pt},fromJSON(j){return{sourceId:lr(j.sourceId)?String(j.sourceId):"",start:lr(j.start)?Kt(j.start):void 0,stop:lr(j.stop)?Kt(j.stop):void 0}},toJSON(j){const at={};return j.sourceId!==void 0&&(at.sourceId=j.sourceId),j.start!==void 0&&(at.start=j.start!==void 0?er(j.start):void 0),j.stop!==void 0&&(at.stop=j.stop!==void 0?er(j.stop):void 0),at},fromPartial(j){var at,ct,Yt;const Pt=Un();return Pt.sourceId=(at=j.sourceId)!==null&&at!==void 0?at:"",Pt.start=(ct=j.start)!==null&&ct!==void 0?ct:void 0,Pt.stop=(Yt=j.stop)!==null&&Yt!==void 0?Yt:void 0,Pt}};function xn(){return{stop:void 0}}a.WebRtcTrigger={encode(j,at=b.default.Writer.create()){return j.stop!==void 0&&at.uint32(24).int32(kr(j.stop)),at},decode(j,at){const ct=j instanceof b.default.Reader?j:new b.default.Reader(j);let Yt=at===void 0?ct.len:ct.pos+at;const Pt=xn();for(;ct.pos<Yt;){const Xt=ct.uint32();switch(Xt>>>3){case 3:Pt.stop=Kt(ct.int32());break;default:ct.skipType(Xt&7);break}}return Pt},fromJSON(j){return{stop:lr(j.stop)?Kt(j.stop):void 0}},toJSON(j){const at={};return j.stop!==void 0&&(at.stop=j.stop!==void 0?er(j.stop):void 0),at},fromPartial(j){var at;const ct=xn();return ct.stop=(at=j.stop)!==null&&at!==void 0?at:void 0,ct}};function Fn(){return{source:void 0}}a.ProjectTrigger={encode(j,at=b.default.Writer.create()){return j.source!==void 0&&a.SourceTrigger.encode(j.source,at.uint32(10).fork()).ldelim(),at},decode(j,at){const ct=j instanceof b.default.Reader?j:new b.default.Reader(j);let Yt=at===void 0?ct.len:ct.pos+at;const Pt=Fn();for(;ct.pos<Yt;){const Xt=ct.uint32();switch(Xt>>>3){case 1:Pt.source=a.SourceTrigger.decode(ct,ct.uint32());break;default:ct.skipType(Xt&7);break}}return Pt},fromJSON(j){return{source:lr(j.source)?a.SourceTrigger.fromJSON(j.source):void 0}},toJSON(j){const at={};return j.source!==void 0&&(at.source=j.source?a.SourceTrigger.toJSON(j.source):void 0),at},fromPartial(j){const at=Fn();return at.source=j.source!==void 0&&j.source!==null?a.SourceTrigger.fromPartial(j.source):void 0,at}};function qn(){return{enabled:void 0,url:void 0}}a.PreviewHlsPullAddress={encode(j,at=b.default.Writer.create()){return j.enabled!==void 0&&at.uint32(8).bool(j.enabled),j.url!==void 0&&at.uint32(18).string(j.url),at},decode(j,at){const ct=j instanceof b.default.Reader?j:new b.default.Reader(j);let Yt=at===void 0?ct.len:ct.pos+at;const Pt=qn();for(;ct.pos<Yt;){const Xt=ct.uint32();switch(Xt>>>3){case 1:Pt.enabled=ct.bool();break;case 2:Pt.url=ct.string();break;default:ct.skipType(Xt&7);break}}return Pt},fromJSON(j){return{enabled:lr(j.enabled)?!!j.enabled:void 0,url:lr(j.url)?String(j.url):void 0}},toJSON(j){const at={};return j.enabled!==void 0&&(at.enabled=j.enabled),j.url!==void 0&&(at.url=j.url),at},fromPartial(j){var at,ct;const Yt=qn();return Yt.enabled=(at=j.enabled)!==null&&at!==void 0?at:void 0,Yt.url=(ct=j.url)!==null&&ct!==void 0?ct:void 0,Yt}};function Vn(){return{webrtc:void 0}}a.PreviewAddress={encode(j,at=b.default.Writer.create()){return j.webrtc!==void 0&&a.PreviewWebRtcAddress.encode(j.webrtc,at.uint32(18).fork()).ldelim(),at},decode(j,at){const ct=j instanceof b.default.Reader?j:new b.default.Reader(j);let Yt=at===void 0?ct.len:ct.pos+at;const Pt=Vn();for(;ct.pos<Yt;){const Xt=ct.uint32();switch(Xt>>>3){case 2:Pt.webrtc=a.PreviewWebRtcAddress.decode(ct,ct.uint32());break;default:ct.skipType(Xt&7);break}}return Pt},fromJSON(j){return{webrtc:lr(j.webrtc)?a.PreviewWebRtcAddress.fromJSON(j.webrtc):void 0}},toJSON(j){const at={};return j.webrtc!==void 0&&(at.webrtc=j.webrtc?a.PreviewWebRtcAddress.toJSON(j.webrtc):void 0),at},fromPartial(j){const at=Vn();return at.webrtc=j.webrtc!==void 0&&j.webrtc!==null?a.PreviewWebRtcAddress.fromPartial(j.webrtc):void 0,at}};function Jn(){return{rendererUrl:void 0,version:void 0}}a.StudioSdkComposition={encode(j,at=b.default.Writer.create()){return j.rendererUrl!==void 0&&at.uint32(10).string(j.rendererUrl),j.version!==void 0&&at.uint32(18).string(j.version),at},decode(j,at){const ct=j instanceof b.default.Reader?j:new b.default.Reader(j);let Yt=at===void 0?ct.len:ct.pos+at;const Pt=Jn();for(;ct.pos<Yt;){const Xt=ct.uint32();switch(Xt>>>3){case 1:Pt.rendererUrl=ct.string();break;case 2:Pt.version=ct.string();break;default:ct.skipType(Xt&7);break}}return Pt},fromJSON(j){return{rendererUrl:lr(j.rendererUrl)?String(j.rendererUrl):void 0,version:lr(j.version)?String(j.version):void 0}},toJSON(j){const at={};return j.rendererUrl!==void 0&&(at.rendererUrl=j.rendererUrl),j.version!==void 0&&(at.version=j.version),at},fromPartial(j){var at,ct;const Yt=Jn();return Yt.rendererUrl=(at=j.rendererUrl)!==null&&at!==void 0?at:void 0,Yt.version=(ct=j.version)!==null&&ct!==void 0?ct:void 0,Yt}};function Gn(){return{rendererUrl:void 0,selectedLayoutId:void 0,debug:void 0}}a.SceneComposition={encode(j,at=b.default.Writer.create()){return j.rendererUrl!==void 0&&at.uint32(10).string(j.rendererUrl),j.selectedLayoutId!==void 0&&at.uint32(18).string(j.selectedLayoutId),j.debug!==void 0&&at.uint32(24).bool(j.debug),at},decode(j,at){const ct=j instanceof b.default.Reader?j:new b.default.Reader(j);let Yt=at===void 0?ct.len:ct.pos+at;const Pt=Gn();for(;ct.pos<Yt;){const Xt=ct.uint32();switch(Xt>>>3){case 1:Pt.rendererUrl=ct.string();break;case 2:Pt.selectedLayoutId=ct.string();break;case 3:Pt.debug=ct.bool();break;default:ct.skipType(Xt&7);break}}return Pt},fromJSON(j){return{rendererUrl:lr(j.rendererUrl)?String(j.rendererUrl):void 0,selectedLayoutId:lr(j.selectedLayoutId)?String(j.selectedLayoutId):void 0,debug:lr(j.debug)?!!j.debug:void 0}},toJSON(j){const at={};return j.rendererUrl!==void 0&&(at.rendererUrl=j.rendererUrl),j.selectedLayoutId!==void 0&&(at.selectedLayoutId=j.selectedLayoutId),j.debug!==void 0&&(at.debug=j.debug),at},fromPartial(j){var at,ct,Yt;const Pt=Gn();return Pt.rendererUrl=(at=j.rendererUrl)!==null&&at!==void 0?at:void 0,Pt.selectedLayoutId=(ct=j.selectedLayoutId)!==null&&ct!==void 0?ct:void 0,Pt.debug=(Yt=j.debug)!==null&&Yt!==void 0?Yt:void 0,Pt}};function Wn(){return{url:""}}a.ExternalComposition={encode(j,at=b.default.Writer.create()){return j.url!==""&&at.uint32(10).string(j.url),at},decode(j,at){const ct=j instanceof b.default.Reader?j:new b.default.Reader(j);let Yt=at===void 0?ct.len:ct.pos+at;const Pt=Wn();for(;ct.pos<Yt;){const Xt=ct.uint32();switch(Xt>>>3){case 1:Pt.url=ct.string();break;default:ct.skipType(Xt&7);break}}return Pt},fromJSON(j){return{url:lr(j.url)?String(j.url):""}},toJSON(j){const at={};return j.url!==void 0&&(at.url=j.url),at},fromPartial(j){var at;const ct=Wn();return ct.url=(at=j.url)!==null&&at!==void 0?at:"",ct}};function Hn(){return{external:void 0,studioSdk:void 0,scene:void 0}}a.Composition={encode(j,at=b.default.Writer.create()){return j.external!==void 0&&a.ExternalComposition.encode(j.external,at.uint32(10).fork()).ldelim(),j.studioSdk!==void 0&&a.StudioSdkComposition.encode(j.studioSdk,at.uint32(18).fork()).ldelim(),j.scene!==void 0&&a.SceneComposition.encode(j.scene,at.uint32(34).fork()).ldelim(),at},decode(j,at){const ct=j instanceof b.default.Reader?j:new b.default.Reader(j);let Yt=at===void 0?ct.len:ct.pos+at;const Pt=Hn();for(;ct.pos<Yt;){const Xt=ct.uint32();switch(Xt>>>3){case 1:Pt.external=a.ExternalComposition.decode(ct,ct.uint32());break;case 2:Pt.studioSdk=a.StudioSdkComposition.decode(ct,ct.uint32());break;case 4:Pt.scene=a.SceneComposition.decode(ct,ct.uint32());break;default:ct.skipType(Xt&7);break}}return Pt},fromJSON(j){return{external:lr(j.external)?a.ExternalComposition.fromJSON(j.external):void 0,studioSdk:lr(j.studioSdk)?a.StudioSdkComposition.fromJSON(j.studioSdk):void 0,scene:lr(j.scene)?a.SceneComposition.fromJSON(j.scene):void 0}},toJSON(j){const at={};return j.external!==void 0&&(at.external=j.external?a.ExternalComposition.toJSON(j.external):void 0),j.studioSdk!==void 0&&(at.studioSdk=j.studioSdk?a.StudioSdkComposition.toJSON(j.studioSdk):void 0),j.scene!==void 0&&(at.scene=j.scene?a.SceneComposition.toJSON(j.scene):void 0),at},fromPartial(j){const at=Hn();return at.external=j.external!==void 0&&j.external!==null?a.ExternalComposition.fromPartial(j.external):void 0,at.studioSdk=j.studioSdk!==void 0&&j.studioSdk!==null?a.StudioSdkComposition.fromPartial(j.studioSdk):void 0,at.scene=j.scene!==void 0&&j.scene!==null?a.SceneComposition.fromPartial(j.scene):void 0,at}};function zn(){return{enabled:void 0}}a.HostedWebRtc={encode(j,at=b.default.Writer.create()){return j.enabled!==void 0&&at.uint32(8).bool(j.enabled),at},decode(j,at){const ct=j instanceof b.default.Reader?j:new b.default.Reader(j);let Yt=at===void 0?ct.len:ct.pos+at;const Pt=zn();for(;ct.pos<Yt;){const Xt=ct.uint32();switch(Xt>>>3){case 1:Pt.enabled=ct.bool();break;default:ct.skipType(Xt&7);break}}return Pt},fromJSON(j){return{enabled:lr(j.enabled)?!!j.enabled:void 0}},toJSON(j){const at={};return j.enabled!==void 0&&(at.enabled=j.enabled),at},fromPartial(j){var at;const ct=zn();return ct.enabled=(at=j.enabled)!==null&&at!==void 0?at:void 0,ct}};function Kn(){return{hosted:void 0}}a.WebRtc={encode(j,at=b.default.Writer.create()){return j.hosted!==void 0&&a.HostedWebRtc.encode(j.hosted,at.uint32(10).fork()).ldelim(),at},decode(j,at){const ct=j instanceof b.default.Reader?j:new b.default.Reader(j);let Yt=at===void 0?ct.len:ct.pos+at;const Pt=Kn();for(;ct.pos<Yt;){const Xt=ct.uint32();switch(Xt>>>3){case 1:Pt.hosted=a.HostedWebRtc.decode(ct,ct.uint32());break;default:ct.skipType(Xt&7);break}}return Pt},fromJSON(j){return{hosted:lr(j.hosted)?a.HostedWebRtc.fromJSON(j.hosted):void 0}},toJSON(j){const at={};return j.hosted!==void 0&&(at.hosted=j.hosted?a.HostedWebRtc.toJSON(j.hosted):void 0),at},fromPartial(j){const at=Kn();return at.hosted=j.hosted!==void 0&&j.hosted!==null?a.HostedWebRtc.fromPartial(j.hosted):void 0,at}};function Yn(){return{accessToken:"",participantId:void 0}}a.WebRtcAccess={encode(j,at=b.default.Writer.create()){return j.accessToken!==""&&at.uint32(10).string(j.accessToken),j.participantId!==void 0&&at.uint32(26).string(j.participantId),at},decode(j,at){const ct=j instanceof b.default.Reader?j:new b.default.Reader(j);let Yt=at===void 0?ct.len:ct.pos+at;const Pt=Yn();for(;ct.pos<Yt;){const Xt=ct.uint32();switch(Xt>>>3){case 1:Pt.accessToken=ct.string();break;case 3:Pt.participantId=ct.string();break;default:ct.skipType(Xt&7);break}}return Pt},fromJSON(j){return{accessToken:lr(j.accessToken)?String(j.accessToken):"",participantId:lr(j.participantId)?String(j.participantId):void 0}},toJSON(j){const at={};return j.accessToken!==void 0&&(at.accessToken=j.accessToken),j.participantId!==void 0&&(at.participantId=j.participantId),at},fromPartial(j){var at,ct;const Yt=Yn();return Yt.accessToken=(at=j.accessToken)!==null&&at!==void 0?at:"",Yt.participantId=(ct=j.participantId)!==null&&ct!==void 0?ct:void 0,Yt}};function Zn(){return{latitude:0,longitude:0}}a.LatLong={encode(j,at=b.default.Writer.create()){return j.latitude!==0&&at.uint32(9).double(j.latitude),j.longitude!==0&&at.uint32(17).double(j.longitude),at},decode(j,at){const ct=j instanceof b.default.Reader?j:new b.default.Reader(j);let Yt=at===void 0?ct.len:ct.pos+at;const Pt=Zn();for(;ct.pos<Yt;){const Xt=ct.uint32();switch(Xt>>>3){case 1:Pt.latitude=ct.double();break;case 2:Pt.longitude=ct.double();break;default:ct.skipType(Xt&7);break}}return Pt},fromJSON(j){return{latitude:lr(j.latitude)?Number(j.latitude):0,longitude:lr(j.longitude)?Number(j.longitude):0}},toJSON(j){const at={};return j.latitude!==void 0&&(at.latitude=j.latitude),j.longitude!==void 0&&(at.longitude=j.longitude),at},fromPartial(j){var at,ct;const Yt=Zn();return Yt.latitude=(at=j.latitude)!==null&&at!==void 0?at:0,Yt.longitude=(ct=j.longitude)!==null&&ct!==void 0?ct:0,Yt}};function Qn(){return{dynamicId:void 0,sourceId:void 0,rtmpPush:void 0,srtPush:void 0}}a.DirectIngestUrl={encode(j,at=b.default.Writer.create()){return j.dynamicId!==void 0&&at.uint32(10).string(j.dynamicId),j.sourceId!==void 0&&at.uint32(18).string(j.sourceId),j.rtmpPush!==void 0&&a.SourceRtmpPushAddress.encode(j.rtmpPush,at.uint32(82).fork()).ldelim(),j.srtPush!==void 0&&a.SrtPushAddress.encode(j.srtPush,at.uint32(90).fork()).ldelim(),at},decode(j,at){const ct=j instanceof b.default.Reader?j:new b.default.Reader(j);let Yt=at===void 0?ct.len:ct.pos+at;const Pt=Qn();for(;ct.pos<Yt;){const Xt=ct.uint32();switch(Xt>>>3){case 1:Pt.dynamicId=ct.string();break;case 2:Pt.sourceId=ct.string();break;case 10:Pt.rtmpPush=a.SourceRtmpPushAddress.decode(ct,ct.uint32());break;case 11:Pt.srtPush=a.SrtPushAddress.decode(ct,ct.uint32());break;default:ct.skipType(Xt&7);break}}return Pt},fromJSON(j){return{dynamicId:lr(j.dynamicId)?String(j.dynamicId):void 0,sourceId:lr(j.sourceId)?String(j.sourceId):void 0,rtmpPush:lr(j.rtmpPush)?a.SourceRtmpPushAddress.fromJSON(j.rtmpPush):void 0,srtPush:lr(j.srtPush)?a.SrtPushAddress.fromJSON(j.srtPush):void 0}},toJSON(j){const at={};return j.dynamicId!==void 0&&(at.dynamicId=j.dynamicId),j.sourceId!==void 0&&(at.sourceId=j.sourceId),j.rtmpPush!==void 0&&(at.rtmpPush=j.rtmpPush?a.SourceRtmpPushAddress.toJSON(j.rtmpPush):void 0),j.srtPush!==void 0&&(at.srtPush=j.srtPush?a.SrtPushAddress.toJSON(j.srtPush):void 0),at},fromPartial(j){var at,ct;const Yt=Qn();return Yt.dynamicId=(at=j.dynamicId)!==null&&at!==void 0?at:void 0,Yt.sourceId=(ct=j.sourceId)!==null&&ct!==void 0?ct:void 0,Yt.rtmpPush=j.rtmpPush!==void 0&&j.rtmpPush!==null?a.SourceRtmpPushAddress.fromPartial(j.rtmpPush):void 0,Yt.srtPush=j.srtPush!==void 0&&j.srtPush!==null?a.SrtPushAddress.fromPartial(j.srtPush):void 0,Yt}};function Xn(){return{collectionId:"",projectId:"",broadcastId:void 0,duration:void 0,start:void 0,stop:void 0,phase:cr.PROJECT_BROADCAST_PHASE_UNSPECIFIED,region:void 0,datacenter:void 0,directIngests:[],origin:void 0,originApiMetadata:void 0,originSourceMetadata:void 0,originExternalMetadata:void 0}}a.ProjectBroadcastStatus={encode(j,at=b.default.Writer.create()){j.collectionId!==""&&at.uint32(10).string(j.collectionId),j.projectId!==""&&at.uint32(18).string(j.projectId),j.broadcastId!==void 0&&at.uint32(26).string(j.broadcastId),j.duration!==void 0&&at.uint32(32).uint32(j.duration),j.start!==void 0&&et.Timestamp.encode(Rn(j.start),at.uint32(42).fork()).ldelim(),j.stop!==void 0&&et.Timestamp.encode(Rn(j.stop),at.uint32(50).fork()).ldelim(),j.phase!==cr.PROJECT_BROADCAST_PHASE_UNSPECIFIED&&at.uint32(56).int32(Tr(j.phase)),j.region!==void 0&&at.uint32(64).int32(Ut(j.region)),j.datacenter!==void 0&&at.uint32(74).string(j.datacenter);for(const ct of j.directIngests)a.DirectIngestUrl.encode(ct,at.uint32(82).fork()).ldelim();return j.origin!==void 0&&at.uint32(88).int32(vt(j.origin)),j.originApiMetadata!==void 0&&k.Value.encode(k.Value.wrap(j.originApiMetadata),at.uint32(98).fork()).ldelim(),j.originSourceMetadata!==void 0&&a.BroadcastOriginSourceMetadata.encode(j.originSourceMetadata,at.uint32(106).fork()).ldelim(),j.originExternalMetadata!==void 0&&a.BroadcastOriginExternalMetadata.encode(j.originExternalMetadata,at.uint32(114).fork()).ldelim(),at},decode(j,at){const ct=j instanceof b.default.Reader?j:new b.default.Reader(j);let Yt=at===void 0?ct.len:ct.pos+at;const Pt=Xn();for(;ct.pos<Yt;){const Xt=ct.uint32();switch(Xt>>>3){case 1:Pt.collectionId=ct.string();break;case 2:Pt.projectId=ct.string();break;case 3:Pt.broadcastId=ct.string();break;case 4:Pt.duration=ct.uint32();break;case 5:Pt.start=Cn(et.Timestamp.decode(ct,ct.uint32()));break;case 6:Pt.stop=Cn(et.Timestamp.decode(ct,ct.uint32()));break;case 7:Pt.phase=dr(ct.int32());break;case 8:Pt.region=bt(ct.int32());break;case 9:Pt.datacenter=ct.string();break;case 10:Pt.directIngests.push(a.DirectIngestUrl.decode(ct,ct.uint32()));break;case 11:Pt.origin=ot(ct.int32());break;case 12:Pt.originApiMetadata=k.Value.unwrap(k.Value.decode(ct,ct.uint32()));break;case 13:Pt.originSourceMetadata=a.BroadcastOriginSourceMetadata.decode(ct,ct.uint32());break;case 14:Pt.originExternalMetadata=a.BroadcastOriginExternalMetadata.decode(ct,ct.uint32());break;default:ct.skipType(Xt&7);break}}return Pt},fromJSON(j){return{collectionId:lr(j.collectionId)?String(j.collectionId):"",projectId:lr(j.projectId)?String(j.projectId):"",broadcastId:lr(j.broadcastId)?String(j.broadcastId):void 0,duration:lr(j.duration)?Number(j.duration):void 0,start:lr(j.start)?String(j.start):void 0,stop:lr(j.stop)?String(j.stop):void 0,phase:lr(j.phase)?dr(j.phase):cr.PROJECT_BROADCAST_PHASE_UNSPECIFIED,region:lr(j.region)?bt(j.region):void 0,datacenter:lr(j.datacenter)?String(j.datacenter):void 0,directIngests:Array.isArray(j==null?void 0:j.directIngests)?j.directIngests.map(at=>a.DirectIngestUrl.fromJSON(at)):[],origin:lr(j.origin)?ot(j.origin):void 0,originApiMetadata:lr(j==null?void 0:j.originApiMetadata)?j.originApiMetadata:void 0,originSourceMetadata:lr(j.originSourceMetadata)?a.BroadcastOriginSourceMetadata.fromJSON(j.originSourceMetadata):void 0,originExternalMetadata:lr(j.originExternalMetadata)?a.BroadcastOriginExternalMetadata.fromJSON(j.originExternalMetadata):void 0}},toJSON(j){const at={};return j.collectionId!==void 0&&(at.collectionId=j.collectionId),j.projectId!==void 0&&(at.projectId=j.projectId),j.broadcastId!==void 0&&(at.broadcastId=j.broadcastId),j.duration!==void 0&&(at.duration=Math.round(j.duration)),j.start!==void 0&&(at.start=j.start),j.stop!==void 0&&(at.stop=j.stop),j.phase!==void 0&&(at.phase=Er(j.phase)),j.region!==void 0&&(at.region=j.region!==void 0?jt(j.region):void 0),j.datacenter!==void 0&&(at.datacenter=j.datacenter),j.directIngests?at.directIngests=j.directIngests.map(ct=>ct?a.DirectIngestUrl.toJSON(ct):void 0):at.directIngests=[],j.origin!==void 0&&(at.origin=j.origin!==void 0?ht(j.origin):void 0),j.originApiMetadata!==void 0&&(at.originApiMetadata=j.originApiMetadata),j.originSourceMetadata!==void 0&&(at.originSourceMetadata=j.originSourceMetadata?a.BroadcastOriginSourceMetadata.toJSON(j.originSourceMetadata):void 0),j.originExternalMetadata!==void 0&&(at.originExternalMetadata=j.originExternalMetadata?a.BroadcastOriginExternalMetadata.toJSON(j.originExternalMetadata):void 0),at},fromPartial(j){var at,ct,Yt,Pt,Xt,Kr,an,dn,ln,En,On,Pn;const Tn=Xn();return Tn.collectionId=(at=j.collectionId)!==null&&at!==void 0?at:"",Tn.projectId=(ct=j.projectId)!==null&&ct!==void 0?ct:"",Tn.broadcastId=(Yt=j.broadcastId)!==null&&Yt!==void 0?Yt:void 0,Tn.duration=(Pt=j.duration)!==null&&Pt!==void 0?Pt:void 0,Tn.start=(Xt=j.start)!==null&&Xt!==void 0?Xt:void 0,Tn.stop=(Kr=j.stop)!==null&&Kr!==void 0?Kr:void 0,Tn.phase=(an=j.phase)!==null&&an!==void 0?an:cr.PROJECT_BROADCAST_PHASE_UNSPECIFIED,Tn.region=(dn=j.region)!==null&&dn!==void 0?dn:void 0,Tn.datacenter=(ln=j.datacenter)!==null&&ln!==void 0?ln:void 0,Tn.directIngests=((En=j.directIngests)===null||En===void 0?void 0:En.map(gu=>a.DirectIngestUrl.fromPartial(gu)))||[],Tn.origin=(On=j.origin)!==null&&On!==void 0?On:void 0,Tn.originApiMetadata=(Pn=j.originApiMetadata)!==null&&Pn!==void 0?Pn:void 0,Tn.originSourceMetadata=j.originSourceMetadata!==void 0&&j.originSourceMetadata!==null?a.BroadcastOriginSourceMetadata.fromPartial(j.originSourceMetadata):void 0,Tn.originExternalMetadata=j.originExternalMetadata!==void 0&&j.originExternalMetadata!==null?a.BroadcastOriginExternalMetadata.fromPartial(j.originExternalMetadata):void 0,Tn}};function jn(){return{collectionId:"",sourceId:"",metadata:void 0,preview:void 0,address:void 0}}a.Source={encode(j,at=b.default.Writer.create()){return j.collectionId!==""&&at.uint32(10).string(j.collectionId),j.sourceId!==""&&at.uint32(18).string(j.sourceId),j.metadata!==void 0&&k.Value.encode(k.Value.wrap(j.metadata),at.uint32(26).fork()).ldelim(),j.preview!==void 0&&a.PreviewAddress.encode(j.preview,at.uint32(34).fork()).ldelim(),j.address!==void 0&&a.SourceAddress.encode(j.address,at.uint32(50).fork()).ldelim(),at},decode(j,at){const ct=j instanceof b.default.Reader?j:new b.default.Reader(j);let Yt=at===void 0?ct.len:ct.pos+at;const Pt=jn();for(;ct.pos<Yt;){const Xt=ct.uint32();switch(Xt>>>3){case 1:Pt.collectionId=ct.string();break;case 2:Pt.sourceId=ct.string();break;case 3:Pt.metadata=k.Value.unwrap(k.Value.decode(ct,ct.uint32()));break;case 4:Pt.preview=a.PreviewAddress.decode(ct,ct.uint32());break;case 6:Pt.address=a.SourceAddress.decode(ct,ct.uint32());break;default:ct.skipType(Xt&7);break}}return Pt},fromJSON(j){return{collectionId:lr(j.collectionId)?String(j.collectionId):"",sourceId:lr(j.sourceId)?String(j.sourceId):"",metadata:lr(j==null?void 0:j.metadata)?j.metadata:void 0,preview:lr(j.preview)?a.PreviewAddress.fromJSON(j.preview):void 0,address:lr(j.address)?a.SourceAddress.fromJSON(j.address):void 0}},toJSON(j){const at={};return j.collectionId!==void 0&&(at.collectionId=j.collectionId),j.sourceId!==void 0&&(at.sourceId=j.sourceId),j.metadata!==void 0&&(at.metadata=j.metadata),j.preview!==void 0&&(at.preview=j.preview?a.PreviewAddress.toJSON(j.preview):void 0),j.address!==void 0&&(at.address=j.address?a.SourceAddress.toJSON(j.address):void 0),at},fromPartial(j){var at,ct,Yt;const Pt=jn();return Pt.collectionId=(at=j.collectionId)!==null&&at!==void 0?at:"",Pt.sourceId=(ct=j.sourceId)!==null&&ct!==void 0?ct:"",Pt.metadata=(Yt=j.metadata)!==null&&Yt!==void 0?Yt:void 0,Pt.preview=j.preview!==void 0&&j.preview!==null?a.PreviewAddress.fromPartial(j.preview):void 0,Pt.address=j.address!==void 0&&j.address!==null?a.SourceAddress.fromPartial(j.address):void 0,Pt}};function _i(){return{collectionId:"",projectId:"",destinationId:"",metadata:void 0,enabled:void 0,address:void 0,timeout:void 0,outputDelay:void 0}}a.Destination={encode(j,at=b.default.Writer.create()){return j.collectionId!==""&&at.uint32(10).string(j.collectionId),j.projectId!==""&&at.uint32(18).string(j.projectId),j.destinationId!==""&&at.uint32(26).string(j.destinationId),j.metadata!==void 0&&k.Value.encode(k.Value.wrap(j.metadata),at.uint32(34).fork()).ldelim(),j.enabled!==void 0&&at.uint32(40).bool(j.enabled),j.address!==void 0&&a.DestinationAddress.encode(j.address,at.uint32(50).fork()).ldelim(),j.timeout!==void 0&&at.uint32(56).uint32(j.timeout),j.outputDelay!==void 0&&at.uint32(72).uint32(j.outputDelay),at},decode(j,at){const ct=j instanceof b.default.Reader?j:new b.default.Reader(j);let Yt=at===void 0?ct.len:ct.pos+at;const Pt=_i();for(;ct.pos<Yt;){const Xt=ct.uint32();switch(Xt>>>3){case 1:Pt.collectionId=ct.string();break;case 2:Pt.projectId=ct.string();break;case 3:Pt.destinationId=ct.string();break;case 4:Pt.metadata=k.Value.unwrap(k.Value.decode(ct,ct.uint32()));break;case 5:Pt.enabled=ct.bool();break;case 6:Pt.address=a.DestinationAddress.decode(ct,ct.uint32());break;case 7:Pt.timeout=ct.uint32();break;case 9:Pt.outputDelay=ct.uint32();break;default:ct.skipType(Xt&7);break}}return Pt},fromJSON(j){return{collectionId:lr(j.collectionId)?String(j.collectionId):"",projectId:lr(j.projectId)?String(j.projectId):"",destinationId:lr(j.destinationId)?String(j.destinationId):"",metadata:lr(j==null?void 0:j.metadata)?j.metadata:void 0,enabled:lr(j.enabled)?!!j.enabled:void 0,address:lr(j.address)?a.DestinationAddress.fromJSON(j.address):void 0,timeout:lr(j.timeout)?Number(j.timeout):void 0,outputDelay:lr(j.outputDelay)?Number(j.outputDelay):void 0}},toJSON(j){const at={};return j.collectionId!==void 0&&(at.collectionId=j.collectionId),j.projectId!==void 0&&(at.projectId=j.projectId),j.destinationId!==void 0&&(at.destinationId=j.destinationId),j.metadata!==void 0&&(at.metadata=j.metadata),j.enabled!==void 0&&(at.enabled=j.enabled),j.address!==void 0&&(at.address=j.address?a.DestinationAddress.toJSON(j.address):void 0),j.timeout!==void 0&&(at.timeout=Math.round(j.timeout)),j.outputDelay!==void 0&&(at.outputDelay=Math.round(j.outputDelay)),at},fromPartial(j){var at,ct,Yt,Pt,Xt,Kr,an;const dn=_i();return dn.collectionId=(at=j.collectionId)!==null&&at!==void 0?at:"",dn.projectId=(ct=j.projectId)!==null&&ct!==void 0?ct:"",dn.destinationId=(Yt=j.destinationId)!==null&&Yt!==void 0?Yt:"",dn.metadata=(Pt=j.metadata)!==null&&Pt!==void 0?Pt:void 0,dn.enabled=(Xt=j.enabled)!==null&&Xt!==void 0?Xt:void 0,dn.address=j.address!==void 0&&j.address!==null?a.DestinationAddress.fromPartial(j.address):void 0,dn.timeout=(Kr=j.timeout)!==null&&Kr!==void 0?Kr:void 0,dn.outputDelay=(an=j.outputDelay)!==null&&an!==void 0?an:void 0,dn}};function na(){return{collectionId:"",projectId:"",metadata:void 0,rendering:void 0,encoding:void 0,sources:[],destinations:[],composition:void 0,maxDuration:void 0,webrtc:void 0,triggers:[],location:void 0,guestCodes:[]}}a.Project={encode(j,at=b.default.Writer.create()){j.collectionId!==""&&at.uint32(10).string(j.collectionId),j.projectId!==""&&at.uint32(18).string(j.projectId),j.metadata!==void 0&&k.Value.encode(k.Value.wrap(j.metadata),at.uint32(26).fork()).ldelim(),j.rendering!==void 0&&a.Rendering.encode(j.rendering,at.uint32(34).fork()).ldelim(),j.encoding!==void 0&&a.Encoding.encode(j.encoding,at.uint32(42).fork()).ldelim();for(const ct of j.sources)a.Source.encode(ct,at.uint32(50).fork()).ldelim();for(const ct of j.destinations)a.Destination.encode(ct,at.uint32(58).fork()).ldelim();j.composition!==void 0&&a.Composition.encode(j.composition,at.uint32(66).fork()).ldelim(),j.maxDuration!==void 0&&at.uint32(72).uint32(j.maxDuration),j.webrtc!==void 0&&a.WebRtc.encode(j.webrtc,at.uint32(82).fork()).ldelim();for(const ct of j.triggers)a.ProjectTrigger.encode(ct,at.uint32(90).fork()).ldelim();j.location!==void 0&&a.LatLong.encode(j.location,at.uint32(98).fork()).ldelim();for(const ct of j.guestCodes)a.GuestCode.encode(ct,at.uint32(106).fork()).ldelim();return at},decode(j,at){const ct=j instanceof b.default.Reader?j:new b.default.Reader(j);let Yt=at===void 0?ct.len:ct.pos+at;const Pt=na();for(;ct.pos<Yt;){const Xt=ct.uint32();switch(Xt>>>3){case 1:Pt.collectionId=ct.string();break;case 2:Pt.projectId=ct.string();break;case 3:Pt.metadata=k.Value.unwrap(k.Value.decode(ct,ct.uint32()));break;case 4:Pt.rendering=a.Rendering.decode(ct,ct.uint32());break;case 5:Pt.encoding=a.Encoding.decode(ct,ct.uint32());break;case 6:Pt.sources.push(a.Source.decode(ct,ct.uint32()));break;case 7:Pt.destinations.push(a.Destination.decode(ct,ct.uint32()));break;case 8:Pt.composition=a.Composition.decode(ct,ct.uint32());break;case 9:Pt.maxDuration=ct.uint32();break;case 10:Pt.webrtc=a.WebRtc.decode(ct,ct.uint32());break;case 11:Pt.triggers.push(a.ProjectTrigger.decode(ct,ct.uint32()));break;case 12:Pt.location=a.LatLong.decode(ct,ct.uint32());break;case 13:Pt.guestCodes.push(a.GuestCode.decode(ct,ct.uint32()));break;default:ct.skipType(Xt&7);break}}return Pt},fromJSON(j){return{collectionId:lr(j.collectionId)?String(j.collectionId):"",projectId:lr(j.projectId)?String(j.projectId):"",metadata:lr(j==null?void 0:j.metadata)?j.metadata:void 0,rendering:lr(j.rendering)?a.Rendering.fromJSON(j.rendering):void 0,encoding:lr(j.encoding)?a.Encoding.fromJSON(j.encoding):void 0,sources:Array.isArray(j==null?void 0:j.sources)?j.sources.map(at=>a.Source.fromJSON(at)):[],destinations:Array.isArray(j==null?void 0:j.destinations)?j.destinations.map(at=>a.Destination.fromJSON(at)):[],composition:lr(j.composition)?a.Composition.fromJSON(j.composition):void 0,maxDuration:lr(j.maxDuration)?Number(j.maxDuration):void 0,webrtc:lr(j.webrtc)?a.WebRtc.fromJSON(j.webrtc):void 0,triggers:Array.isArray(j==null?void 0:j.triggers)?j.triggers.map(at=>a.ProjectTrigger.fromJSON(at)):[],location:lr(j.location)?a.LatLong.fromJSON(j.location):void 0,guestCodes:Array.isArray(j==null?void 0:j.guestCodes)?j.guestCodes.map(at=>a.GuestCode.fromJSON(at)):[]}},toJSON(j){const at={};return j.collectionId!==void 0&&(at.collectionId=j.collectionId),j.projectId!==void 0&&(at.projectId=j.projectId),j.metadata!==void 0&&(at.metadata=j.metadata),j.rendering!==void 0&&(at.rendering=j.rendering?a.Rendering.toJSON(j.rendering):void 0),j.encoding!==void 0&&(at.encoding=j.encoding?a.Encoding.toJSON(j.encoding):void 0),j.sources?at.sources=j.sources.map(ct=>ct?a.Source.toJSON(ct):void 0):at.sources=[],j.destinations?at.destinations=j.destinations.map(ct=>ct?a.Destination.toJSON(ct):void 0):at.destinations=[],j.composition!==void 0&&(at.composition=j.composition?a.Composition.toJSON(j.composition):void 0),j.maxDuration!==void 0&&(at.maxDuration=Math.round(j.maxDuration)),j.webrtc!==void 0&&(at.webrtc=j.webrtc?a.WebRtc.toJSON(j.webrtc):void 0),j.triggers?at.triggers=j.triggers.map(ct=>ct?a.ProjectTrigger.toJSON(ct):void 0):at.triggers=[],j.location!==void 0&&(at.location=j.location?a.LatLong.toJSON(j.location):void 0),j.guestCodes?at.guestCodes=j.guestCodes.map(ct=>ct?a.GuestCode.toJSON(ct):void 0):at.guestCodes=[],at},fromPartial(j){var at,ct,Yt,Pt,Xt,Kr,an,dn;const ln=na();return ln.collectionId=(at=j.collectionId)!==null&&at!==void 0?at:"",ln.projectId=(ct=j.projectId)!==null&&ct!==void 0?ct:"",ln.metadata=(Yt=j.metadata)!==null&&Yt!==void 0?Yt:void 0,ln.rendering=j.rendering!==void 0&&j.rendering!==null?a.Rendering.fromPartial(j.rendering):void 0,ln.encoding=j.encoding!==void 0&&j.encoding!==null?a.Encoding.fromPartial(j.encoding):void 0,ln.sources=((Pt=j.sources)===null||Pt===void 0?void 0:Pt.map(En=>a.Source.fromPartial(En)))||[],ln.destinations=((Xt=j.destinations)===null||Xt===void 0?void 0:Xt.map(En=>a.Destination.fromPartial(En)))||[],ln.composition=j.composition!==void 0&&j.composition!==null?a.Composition.fromPartial(j.composition):void 0,ln.maxDuration=(Kr=j.maxDuration)!==null&&Kr!==void 0?Kr:void 0,ln.webrtc=j.webrtc!==void 0&&j.webrtc!==null?a.WebRtc.fromPartial(j.webrtc):void 0,ln.triggers=((an=j.triggers)===null||an===void 0?void 0:an.map(En=>a.ProjectTrigger.fromPartial(En)))||[],ln.location=j.location!==void 0&&j.location!==null?a.LatLong.fromPartial(j.location):void 0,ln.guestCodes=((dn=j.guestCodes)===null||dn===void 0?void 0:dn.map(En=>a.GuestCode.fromPartial(En)))||[],ln}};function ga(){return{collectionId:"",metadata:void 0,projects:[],sources:[]}}a.Collection={encode(j,at=b.default.Writer.create()){j.collectionId!==""&&at.uint32(10).string(j.collectionId),j.metadata!==void 0&&k.Value.encode(k.Value.wrap(j.metadata),at.uint32(18).fork()).ldelim();for(const ct of j.projects)a.Project.encode(ct,at.uint32(26).fork()).ldelim();for(const ct of j.sources)a.Source.encode(ct,at.uint32(34).fork()).ldelim();return at},decode(j,at){const ct=j instanceof b.default.Reader?j:new b.default.Reader(j);let Yt=at===void 0?ct.len:ct.pos+at;const Pt=ga();for(;ct.pos<Yt;){const Xt=ct.uint32();switch(Xt>>>3){case 1:Pt.collectionId=ct.string();break;case 2:Pt.metadata=k.Value.unwrap(k.Value.decode(ct,ct.uint32()));break;case 3:Pt.projects.push(a.Project.decode(ct,ct.uint32()));break;case 4:Pt.sources.push(a.Source.decode(ct,ct.uint32()));break;default:ct.skipType(Xt&7);break}}return Pt},fromJSON(j){return{collectionId:lr(j.collectionId)?String(j.collectionId):"",metadata:lr(j==null?void 0:j.metadata)?j.metadata:void 0,projects:Array.isArray(j==null?void 0:j.projects)?j.projects.map(at=>a.Project.fromJSON(at)):[],sources:Array.isArray(j==null?void 0:j.sources)?j.sources.map(at=>a.Source.fromJSON(at)):[]}},toJSON(j){const at={};return j.collectionId!==void 0&&(at.collectionId=j.collectionId),j.metadata!==void 0&&(at.metadata=j.metadata),j.projects?at.projects=j.projects.map(ct=>ct?a.Project.toJSON(ct):void 0):at.projects=[],j.sources?at.sources=j.sources.map(ct=>ct?a.Source.toJSON(ct):void 0):at.sources=[],at},fromPartial(j){var at,ct,Yt,Pt;const Xt=ga();return Xt.collectionId=(at=j.collectionId)!==null&&at!==void 0?at:"",Xt.metadata=(ct=j.metadata)!==null&&ct!==void 0?ct:void 0,Xt.projects=((Yt=j.projects)===null||Yt===void 0?void 0:Yt.map(Kr=>a.Project.fromPartial(Kr)))||[],Xt.sources=((Pt=j.sources)===null||Pt===void 0?void 0:Pt.map(Kr=>a.Source.fromPartial(Kr)))||[],Xt}};function ba(){return{metadata:void 0}}a.CreateCollectionRequest={encode(j,at=b.default.Writer.create()){return j.metadata!==void 0&&k.Value.encode(k.Value.wrap(j.metadata),at.uint32(10).fork()).ldelim(),at},decode(j,at){const ct=j instanceof b.default.Reader?j:new b.default.Reader(j);let Yt=at===void 0?ct.len:ct.pos+at;const Pt=ba();for(;ct.pos<Yt;){const Xt=ct.uint32();switch(Xt>>>3){case 1:Pt.metadata=k.Value.unwrap(k.Value.decode(ct,ct.uint32()));break;default:ct.skipType(Xt&7);break}}return Pt},fromJSON(j){return{metadata:lr(j==null?void 0:j.metadata)?j.metadata:void 0}},toJSON(j){const at={};return j.metadata!==void 0&&(at.metadata=j.metadata),at},fromPartial(j){var at;const ct=ba();return ct.metadata=(at=j.metadata)!==null&&at!==void 0?at:void 0,ct}};function $a(){return{collection:void 0}}a.CreateCollectionResponse={encode(j,at=b.default.Writer.create()){return j.collection!==void 0&&a.Collection.encode(j.collection,at.uint32(10).fork()).ldelim(),at},decode(j,at){const ct=j instanceof b.default.Reader?j:new b.default.Reader(j);let Yt=at===void 0?ct.len:ct.pos+at;const Pt=$a();for(;ct.pos<Yt;){const Xt=ct.uint32();switch(Xt>>>3){case 1:Pt.collection=a.Collection.decode(ct,ct.uint32());break;default:ct.skipType(Xt&7);break}}return Pt},fromJSON(j){return{collection:lr(j.collection)?a.Collection.fromJSON(j.collection):void 0}},toJSON(j){const at={};return j.collection!==void 0&&(at.collection=j.collection?a.Collection.toJSON(j.collection):void 0),at},fromPartial(j){const at=$a();return at.collection=j.collection!==void 0&&j.collection!==null?a.Collection.fromPartial(j.collection):void 0,at}};function xa(){return{collectionId:"",populateProjects:void 0,populateSources:void 0}}a.GetCollectionRequest={encode(j,at=b.default.Writer.create()){return j.collectionId!==""&&at.uint32(10).string(j.collectionId),j.populateProjects!==void 0&&at.uint32(16).bool(j.populateProjects),j.populateSources!==void 0&&at.uint32(24).bool(j.populateSources),at},decode(j,at){const ct=j instanceof b.default.Reader?j:new b.default.Reader(j);let Yt=at===void 0?ct.len:ct.pos+at;const Pt=xa();for(;ct.pos<Yt;){const Xt=ct.uint32();switch(Xt>>>3){case 1:Pt.collectionId=ct.string();break;case 2:Pt.populateProjects=ct.bool();break;case 3:Pt.populateSources=ct.bool();break;default:ct.skipType(Xt&7);break}}return Pt},fromJSON(j){return{collectionId:lr(j.collectionId)?String(j.collectionId):"",populateProjects:lr(j.populateProjects)?!!j.populateProjects:void 0,populateSources:lr(j.populateSources)?!!j.populateSources:void 0}},toJSON(j){const at={};return j.collectionId!==void 0&&(at.collectionId=j.collectionId),j.populateProjects!==void 0&&(at.populateProjects=j.populateProjects),j.populateSources!==void 0&&(at.populateSources=j.populateSources),at},fromPartial(j){var at,ct,Yt;const Pt=xa();return Pt.collectionId=(at=j.collectionId)!==null&&at!==void 0?at:"",Pt.populateProjects=(ct=j.populateProjects)!==null&&ct!==void 0?ct:void 0,Pt.populateSources=(Yt=j.populateSources)!==null&&Yt!==void 0?Yt:void 0,Pt}};function eo(){return{collection:void 0}}a.GetCollectionResponse={encode(j,at=b.default.Writer.create()){return j.collection!==void 0&&a.Collection.encode(j.collection,at.uint32(10).fork()).ldelim(),at},decode(j,at){const ct=j instanceof b.default.Reader?j:new b.default.Reader(j);let Yt=at===void 0?ct.len:ct.pos+at;const Pt=eo();for(;ct.pos<Yt;){const Xt=ct.uint32();switch(Xt>>>3){case 1:Pt.collection=a.Collection.decode(ct,ct.uint32());break;default:ct.skipType(Xt&7);break}}return Pt},fromJSON(j){return{collection:lr(j.collection)?a.Collection.fromJSON(j.collection):void 0}},toJSON(j){const at={};return j.collection!==void 0&&(at.collection=j.collection?a.Collection.toJSON(j.collection):void 0),at},fromPartial(j){const at=eo();return at.collection=j.collection!==void 0&&j.collection!==null?a.Collection.fromPartial(j.collection):void 0,at}};function to(){return{collectionId:"",updateMask:void 0,metadata:void 0}}a.UpdateCollectionRequest={encode(j,at=b.default.Writer.create()){return j.collectionId!==""&&at.uint32(10).string(j.collectionId),j.updateMask!==void 0&&$.FieldMask.encode($.FieldMask.wrap(j.updateMask),at.uint32(18).fork()).ldelim(),j.metadata!==void 0&&k.Value.encode(k.Value.wrap(j.metadata),at.uint32(26).fork()).ldelim(),at},decode(j,at){const ct=j instanceof b.default.Reader?j:new b.default.Reader(j);let Yt=at===void 0?ct.len:ct.pos+at;const Pt=to();for(;ct.pos<Yt;){const Xt=ct.uint32();switch(Xt>>>3){case 1:Pt.collectionId=ct.string();break;case 2:Pt.updateMask=$.FieldMask.unwrap($.FieldMask.decode(ct,ct.uint32()));break;case 3:Pt.metadata=k.Value.unwrap(k.Value.decode(ct,ct.uint32()));break;default:ct.skipType(Xt&7);break}}return Pt},fromJSON(j){return{collectionId:lr(j.collectionId)?String(j.collectionId):"",updateMask:lr(j.updateMask)?$.FieldMask.unwrap($.FieldMask.fromJSON(j.updateMask)):void 0,metadata:lr(j==null?void 0:j.metadata)?j.metadata:void 0}},toJSON(j){const at={};return j.collectionId!==void 0&&(at.collectionId=j.collectionId),j.updateMask!==void 0&&(at.updateMask=$.FieldMask.toJSON($.FieldMask.wrap(j.updateMask))),j.metadata!==void 0&&(at.metadata=j.metadata),at},fromPartial(j){var at,ct,Yt;const Pt=to();return Pt.collectionId=(at=j.collectionId)!==null&&at!==void 0?at:"",Pt.updateMask=(ct=j.updateMask)!==null&&ct!==void 0?ct:void 0,Pt.metadata=(Yt=j.metadata)!==null&&Yt!==void 0?Yt:void 0,Pt}};function ro(){return{collection:void 0}}a.UpdateCollectionResponse={encode(j,at=b.default.Writer.create()){return j.collection!==void 0&&a.Collection.encode(j.collection,at.uint32(10).fork()).ldelim(),at},decode(j,at){const ct=j instanceof b.default.Reader?j:new b.default.Reader(j);let Yt=at===void 0?ct.len:ct.pos+at;const Pt=ro();for(;ct.pos<Yt;){const Xt=ct.uint32();switch(Xt>>>3){case 1:Pt.collection=a.Collection.decode(ct,ct.uint32());break;default:ct.skipType(Xt&7);break}}return Pt},fromJSON(j){return{collection:lr(j.collection)?a.Collection.fromJSON(j.collection):void 0}},toJSON(j){const at={};return j.collection!==void 0&&(at.collection=j.collection?a.Collection.toJSON(j.collection):void 0),at},fromPartial(j){const at=ro();return at.collection=j.collection!==void 0&&j.collection!==null?a.Collection.fromPartial(j.collection):void 0,at}};function no(){return{collectionId:"",force:void 0}}a.DeleteCollectionRequest={encode(j,at=b.default.Writer.create()){return j.collectionId!==""&&at.uint32(10).string(j.collectionId),j.force!==void 0&&at.uint32(16).bool(j.force),at},decode(j,at){const ct=j instanceof b.default.Reader?j:new b.default.Reader(j);let Yt=at===void 0?ct.len:ct.pos+at;const Pt=no();for(;ct.pos<Yt;){const Xt=ct.uint32();switch(Xt>>>3){case 1:Pt.collectionId=ct.string();break;case 2:Pt.force=ct.bool();break;default:ct.skipType(Xt&7);break}}return Pt},fromJSON(j){return{collectionId:lr(j.collectionId)?String(j.collectionId):"",force:lr(j.force)?!!j.force:void 0}},toJSON(j){const at={};return j.collectionId!==void 0&&(at.collectionId=j.collectionId),j.force!==void 0&&(at.force=j.force),at},fromPartial(j){var at,ct;const Yt=no();return Yt.collectionId=(at=j.collectionId)!==null&&at!==void 0?at:"",Yt.force=(ct=j.force)!==null&&ct!==void 0?ct:void 0,Yt}};function io(){return{sourcesDeleted:0,projectsDeleted:0,projectIdsStopped:[]}}a.DeleteCollectionResponse={encode(j,at=b.default.Writer.create()){j.sourcesDeleted!==0&&at.uint32(8).uint32(j.sourcesDeleted),j.projectsDeleted!==0&&at.uint32(16).uint32(j.projectsDeleted);for(const ct of j.projectIdsStopped)at.uint32(26).string(ct);return at},decode(j,at){const ct=j instanceof b.default.Reader?j:new b.default.Reader(j);let Yt=at===void 0?ct.len:ct.pos+at;const Pt=io();for(;ct.pos<Yt;){const Xt=ct.uint32();switch(Xt>>>3){case 1:Pt.sourcesDeleted=ct.uint32();break;case 2:Pt.projectsDeleted=ct.uint32();break;case 3:Pt.projectIdsStopped.push(ct.string());break;default:ct.skipType(Xt&7);break}}return Pt},fromJSON(j){return{sourcesDeleted:lr(j.sourcesDeleted)?Number(j.sourcesDeleted):0,projectsDeleted:lr(j.projectsDeleted)?Number(j.projectsDeleted):0,projectIdsStopped:Array.isArray(j==null?void 0:j.projectIdsStopped)?j.projectIdsStopped.map(at=>String(at)):[]}},toJSON(j){const at={};return j.sourcesDeleted!==void 0&&(at.sourcesDeleted=Math.round(j.sourcesDeleted)),j.projectsDeleted!==void 0&&(at.projectsDeleted=Math.round(j.projectsDeleted)),j.projectIdsStopped?at.projectIdsStopped=j.projectIdsStopped.map(ct=>ct):at.projectIdsStopped=[],at},fromPartial(j){var at,ct,Yt;const Pt=io();return Pt.sourcesDeleted=(at=j.sourcesDeleted)!==null&&at!==void 0?at:0,Pt.projectsDeleted=(ct=j.projectsDeleted)!==null&&ct!==void 0?ct:0,Pt.projectIdsStopped=((Yt=j.projectIdsStopped)===null||Yt===void 0?void 0:Yt.map(Xt=>Xt))||[],Pt}};function ao(){return{}}a.GetCollectionsRequest={encode(j,at=b.default.Writer.create()){return at},decode(j,at){const ct=j instanceof b.default.Reader?j:new b.default.Reader(j);let Yt=at===void 0?ct.len:ct.pos+at;const Pt=ao();for(;ct.pos<Yt;){const Xt=ct.uint32();switch(Xt>>>3){default:ct.skipType(Xt&7);break}}return Pt},fromJSON(j){return{}},toJSON(j){return{}},fromPartial(j){return ao()}};function oo(){return{collections:[]}}a.GetCollectionsResponse={encode(j,at=b.default.Writer.create()){for(const ct of j.collections)a.Collection.encode(ct,at.uint32(10).fork()).ldelim();return at},decode(j,at){const ct=j instanceof b.default.Reader?j:new b.default.Reader(j);let Yt=at===void 0?ct.len:ct.pos+at;const Pt=oo();for(;ct.pos<Yt;){const Xt=ct.uint32();switch(Xt>>>3){case 1:Pt.collections.push(a.Collection.decode(ct,ct.uint32()));break;default:ct.skipType(Xt&7);break}}return Pt},fromJSON(j){return{collections:Array.isArray(j==null?void 0:j.collections)?j.collections.map(at=>a.Collection.fromJSON(at)):[]}},toJSON(j){const at={};return j.collections?at.collections=j.collections.map(ct=>ct?a.Collection.toJSON(ct):void 0):at.collections=[],at},fromPartial(j){var at;const ct=oo();return ct.collections=((at=j.collections)===null||at===void 0?void 0:at.map(Yt=>a.Collection.fromPartial(Yt)))||[],ct}};function so(){return{collectionId:"",metadata:void 0,rendering:void 0,encoding:void 0,composition:void 0,maxDuration:void 0,webrtc:void 0,location:void 0}}a.CreateProjectRequest={encode(j,at=b.default.Writer.create()){return j.collectionId!==""&&at.uint32(10).string(j.collectionId),j.metadata!==void 0&&k.Value.encode(k.Value.wrap(j.metadata),at.uint32(18).fork()).ldelim(),j.rendering!==void 0&&a.Rendering.encode(j.rendering,at.uint32(26).fork()).ldelim(),j.encoding!==void 0&&a.Encoding.encode(j.encoding,at.uint32(34).fork()).ldelim(),j.composition!==void 0&&a.Composition.encode(j.composition,at.uint32(42).fork()).ldelim(),j.maxDuration!==void 0&&at.uint32(48).uint32(j.maxDuration),j.webrtc!==void 0&&a.WebRtc.encode(j.webrtc,at.uint32(58).fork()).ldelim(),j.location!==void 0&&a.LatLong.encode(j.location,at.uint32(74).fork()).ldelim(),at},decode(j,at){const ct=j instanceof b.default.Reader?j:new b.default.Reader(j);let Yt=at===void 0?ct.len:ct.pos+at;const Pt=so();for(;ct.pos<Yt;){const Xt=ct.uint32();switch(Xt>>>3){case 1:Pt.collectionId=ct.string();break;case 2:Pt.metadata=k.Value.unwrap(k.Value.decode(ct,ct.uint32()));break;case 3:Pt.rendering=a.Rendering.decode(ct,ct.uint32());break;case 4:Pt.encoding=a.Encoding.decode(ct,ct.uint32());break;case 5:Pt.composition=a.Composition.decode(ct,ct.uint32());break;case 6:Pt.maxDuration=ct.uint32();break;case 7:Pt.webrtc=a.WebRtc.decode(ct,ct.uint32());break;case 9:Pt.location=a.LatLong.decode(ct,ct.uint32());break;default:ct.skipType(Xt&7);break}}return Pt},fromJSON(j){return{collectionId:lr(j.collectionId)?String(j.collectionId):"",metadata:lr(j==null?void 0:j.metadata)?j.metadata:void 0,rendering:lr(j.rendering)?a.Rendering.fromJSON(j.rendering):void 0,encoding:lr(j.encoding)?a.Encoding.fromJSON(j.encoding):void 0,composition:lr(j.composition)?a.Composition.fromJSON(j.composition):void 0,maxDuration:lr(j.maxDuration)?Number(j.maxDuration):void 0,webrtc:lr(j.webrtc)?a.WebRtc.fromJSON(j.webrtc):void 0,location:lr(j.location)?a.LatLong.fromJSON(j.location):void 0}},toJSON(j){const at={};return j.collectionId!==void 0&&(at.collectionId=j.collectionId),j.metadata!==void 0&&(at.metadata=j.metadata),j.rendering!==void 0&&(at.rendering=j.rendering?a.Rendering.toJSON(j.rendering):void 0),j.encoding!==void 0&&(at.encoding=j.encoding?a.Encoding.toJSON(j.encoding):void 0),j.composition!==void 0&&(at.composition=j.composition?a.Composition.toJSON(j.composition):void 0),j.maxDuration!==void 0&&(at.maxDuration=Math.round(j.maxDuration)),j.webrtc!==void 0&&(at.webrtc=j.webrtc?a.WebRtc.toJSON(j.webrtc):void 0),j.location!==void 0&&(at.location=j.location?a.LatLong.toJSON(j.location):void 0),at},fromPartial(j){var at,ct,Yt;const Pt=so();return Pt.collectionId=(at=j.collectionId)!==null&&at!==void 0?at:"",Pt.metadata=(ct=j.metadata)!==null&&ct!==void 0?ct:void 0,Pt.rendering=j.rendering!==void 0&&j.rendering!==null?a.Rendering.fromPartial(j.rendering):void 0,Pt.encoding=j.encoding!==void 0&&j.encoding!==null?a.Encoding.fromPartial(j.encoding):void 0,Pt.composition=j.composition!==void 0&&j.composition!==null?a.Composition.fromPartial(j.composition):void 0,Pt.maxDuration=(Yt=j.maxDuration)!==null&&Yt!==void 0?Yt:void 0,Pt.webrtc=j.webrtc!==void 0&&j.webrtc!==null?a.WebRtc.fromPartial(j.webrtc):void 0,Pt.location=j.location!==void 0&&j.location!==null?a.LatLong.fromPartial(j.location):void 0,Pt}};function uo(){return{project:void 0}}a.CreateProjectResponse={encode(j,at=b.default.Writer.create()){return j.project!==void 0&&a.Project.encode(j.project,at.uint32(10).fork()).ldelim(),at},decode(j,at){const ct=j instanceof b.default.Reader?j:new b.default.Reader(j);let Yt=at===void 0?ct.len:ct.pos+at;const Pt=uo();for(;ct.pos<Yt;){const Xt=ct.uint32();switch(Xt>>>3){case 1:Pt.project=a.Project.decode(ct,ct.uint32());break;default:ct.skipType(Xt&7);break}}return Pt},fromJSON(j){return{project:lr(j.project)?a.Project.fromJSON(j.project):void 0}},toJSON(j){const at={};return j.project!==void 0&&(at.project=j.project?a.Project.toJSON(j.project):void 0),at},fromPartial(j){const at=uo();return at.project=j.project!==void 0&&j.project!==null?a.Project.fromPartial(j.project):void 0,at}};function co(){return{collectionId:"",projectId:"",updateMask:void 0,metadata:void 0,rendering:void 0,encoding:void 0,composition:void 0,maxDuration:void 0,webrtc:void 0,location:void 0}}a.UpdateProjectRequest={encode(j,at=b.default.Writer.create()){return j.collectionId!==""&&at.uint32(10).string(j.collectionId),j.projectId!==""&&at.uint32(18).string(j.projectId),j.updateMask!==void 0&&$.FieldMask.encode($.FieldMask.wrap(j.updateMask),at.uint32(26).fork()).ldelim(),j.metadata!==void 0&&k.Value.encode(k.Value.wrap(j.metadata),at.uint32(34).fork()).ldelim(),j.rendering!==void 0&&a.Rendering.encode(j.rendering,at.uint32(42).fork()).ldelim(),j.encoding!==void 0&&a.Encoding.encode(j.encoding,at.uint32(50).fork()).ldelim(),j.composition!==void 0&&a.Composition.encode(j.composition,at.uint32(58).fork()).ldelim(),j.maxDuration!==void 0&&at.uint32(64).uint32(j.maxDuration),j.webrtc!==void 0&&a.WebRtc.encode(j.webrtc,at.uint32(74).fork()).ldelim(),j.location!==void 0&&a.LatLong.encode(j.location,at.uint32(82).fork()).ldelim(),at},decode(j,at){const ct=j instanceof b.default.Reader?j:new b.default.Reader(j);let Yt=at===void 0?ct.len:ct.pos+at;const Pt=co();for(;ct.pos<Yt;){const Xt=ct.uint32();switch(Xt>>>3){case 1:Pt.collectionId=ct.string();break;case 2:Pt.projectId=ct.string();break;case 3:Pt.updateMask=$.FieldMask.unwrap($.FieldMask.decode(ct,ct.uint32()));break;case 4:Pt.metadata=k.Value.unwrap(k.Value.decode(ct,ct.uint32()));break;case 5:Pt.rendering=a.Rendering.decode(ct,ct.uint32());break;case 6:Pt.encoding=a.Encoding.decode(ct,ct.uint32());break;case 7:Pt.composition=a.Composition.decode(ct,ct.uint32());break;case 8:Pt.maxDuration=ct.uint32();break;case 9:Pt.webrtc=a.WebRtc.decode(ct,ct.uint32());break;case 10:Pt.location=a.LatLong.decode(ct,ct.uint32());break;default:ct.skipType(Xt&7);break}}return Pt},fromJSON(j){return{collectionId:lr(j.collectionId)?String(j.collectionId):"",projectId:lr(j.projectId)?String(j.projectId):"",updateMask:lr(j.updateMask)?$.FieldMask.unwrap($.FieldMask.fromJSON(j.updateMask)):void 0,metadata:lr(j==null?void 0:j.metadata)?j.metadata:void 0,rendering:lr(j.rendering)?a.Rendering.fromJSON(j.rendering):void 0,encoding:lr(j.encoding)?a.Encoding.fromJSON(j.encoding):void 0,composition:lr(j.composition)?a.Composition.fromJSON(j.composition):void 0,maxDuration:lr(j.maxDuration)?Number(j.maxDuration):void 0,webrtc:lr(j.webrtc)?a.WebRtc.fromJSON(j.webrtc):void 0,location:lr(j.location)?a.LatLong.fromJSON(j.location):void 0}},toJSON(j){const at={};return j.collectionId!==void 0&&(at.collectionId=j.collectionId),j.projectId!==void 0&&(at.projectId=j.projectId),j.updateMask!==void 0&&(at.updateMask=$.FieldMask.toJSON($.FieldMask.wrap(j.updateMask))),j.metadata!==void 0&&(at.metadata=j.metadata),j.rendering!==void 0&&(at.rendering=j.rendering?a.Rendering.toJSON(j.rendering):void 0),j.encoding!==void 0&&(at.encoding=j.encoding?a.Encoding.toJSON(j.encoding):void 0),j.composition!==void 0&&(at.composition=j.composition?a.Composition.toJSON(j.composition):void 0),j.maxDuration!==void 0&&(at.maxDuration=Math.round(j.maxDuration)),j.webrtc!==void 0&&(at.webrtc=j.webrtc?a.WebRtc.toJSON(j.webrtc):void 0),j.location!==void 0&&(at.location=j.location?a.LatLong.toJSON(j.location):void 0),at},fromPartial(j){var at,ct,Yt,Pt,Xt;const Kr=co();return Kr.collectionId=(at=j.collectionId)!==null&&at!==void 0?at:"",Kr.projectId=(ct=j.projectId)!==null&&ct!==void 0?ct:"",Kr.updateMask=(Yt=j.updateMask)!==null&&Yt!==void 0?Yt:void 0,Kr.metadata=(Pt=j.metadata)!==null&&Pt!==void 0?Pt:void 0,Kr.rendering=j.rendering!==void 0&&j.rendering!==null?a.Rendering.fromPartial(j.rendering):void 0,Kr.encoding=j.encoding!==void 0&&j.encoding!==null?a.Encoding.fromPartial(j.encoding):void 0,Kr.composition=j.composition!==void 0&&j.composition!==null?a.Composition.fromPartial(j.composition):void 0,Kr.maxDuration=(Xt=j.maxDuration)!==null&&Xt!==void 0?Xt:void 0,Kr.webrtc=j.webrtc!==void 0&&j.webrtc!==null?a.WebRtc.fromPartial(j.webrtc):void 0,Kr.location=j.location!==void 0&&j.location!==null?a.LatLong.fromPartial(j.location):void 0,Kr}};function lo(){return{project:void 0,broadcastUpdated:!1}}a.UpdateProjectResponse={encode(j,at=b.default.Writer.create()){return j.project!==void 0&&a.Project.encode(j.project,at.uint32(10).fork()).ldelim(),j.broadcastUpdated===!0&&at.uint32(16).bool(j.broadcastUpdated),at},decode(j,at){const ct=j instanceof b.default.Reader?j:new b.default.Reader(j);let Yt=at===void 0?ct.len:ct.pos+at;const Pt=lo();for(;ct.pos<Yt;){const Xt=ct.uint32();switch(Xt>>>3){case 1:Pt.project=a.Project.decode(ct,ct.uint32());break;case 2:Pt.broadcastUpdated=ct.bool();break;default:ct.skipType(Xt&7);break}}return Pt},fromJSON(j){return{project:lr(j.project)?a.Project.fromJSON(j.project):void 0,broadcastUpdated:lr(j.broadcastUpdated)?!!j.broadcastUpdated:!1}},toJSON(j){const at={};return j.project!==void 0&&(at.project=j.project?a.Project.toJSON(j.project):void 0),j.broadcastUpdated!==void 0&&(at.broadcastUpdated=j.broadcastUpdated),at},fromPartial(j){var at;const ct=lo();return ct.project=j.project!==void 0&&j.project!==null?a.Project.fromPartial(j.project):void 0,ct.broadcastUpdated=(at=j.broadcastUpdated)!==null&&at!==void 0?at:!1,ct}};function fo(){return{collectionId:"",projectId:"",force:void 0}}a.DeleteProjectRequest={encode(j,at=b.default.Writer.create()){return j.collectionId!==""&&at.uint32(10).string(j.collectionId),j.projectId!==""&&at.uint32(18).string(j.projectId),j.force!==void 0&&at.uint32(24).bool(j.force),at},decode(j,at){const ct=j instanceof b.default.Reader?j:new b.default.Reader(j);let Yt=at===void 0?ct.len:ct.pos+at;const Pt=fo();for(;ct.pos<Yt;){const Xt=ct.uint32();switch(Xt>>>3){case 1:Pt.collectionId=ct.string();break;case 2:Pt.projectId=ct.string();break;case 3:Pt.force=ct.bool();break;default:ct.skipType(Xt&7);break}}return Pt},fromJSON(j){return{collectionId:lr(j.collectionId)?String(j.collectionId):"",projectId:lr(j.projectId)?String(j.projectId):"",force:lr(j.force)?!!j.force:void 0}},toJSON(j){const at={};return j.collectionId!==void 0&&(at.collectionId=j.collectionId),j.projectId!==void 0&&(at.projectId=j.projectId),j.force!==void 0&&(at.force=j.force),at},fromPartial(j){var at,ct,Yt;const Pt=fo();return Pt.collectionId=(at=j.collectionId)!==null&&at!==void 0?at:"",Pt.projectId=(ct=j.projectId)!==null&&ct!==void 0?ct:"",Pt.force=(Yt=j.force)!==null&&Yt!==void 0?Yt:void 0,Pt}};function ho(){return{broadcastStopped:!1,layoutsDeleted:0}}a.DeleteProjectResponse={encode(j,at=b.default.Writer.create()){return j.broadcastStopped===!0&&at.uint32(8).bool(j.broadcastStopped),j.layoutsDeleted!==0&&at.uint32(16).uint32(j.layoutsDeleted),at},decode(j,at){const ct=j instanceof b.default.Reader?j:new b.default.Reader(j);let Yt=at===void 0?ct.len:ct.pos+at;const Pt=ho();for(;ct.pos<Yt;){const Xt=ct.uint32();switch(Xt>>>3){case 1:Pt.broadcastStopped=ct.bool();break;case 2:Pt.layoutsDeleted=ct.uint32();break;default:ct.skipType(Xt&7);break}}return Pt},fromJSON(j){return{broadcastStopped:lr(j.broadcastStopped)?!!j.broadcastStopped:!1,layoutsDeleted:lr(j.layoutsDeleted)?Number(j.layoutsDeleted):0}},toJSON(j){const at={};return j.broadcastStopped!==void 0&&(at.broadcastStopped=j.broadcastStopped),j.layoutsDeleted!==void 0&&(at.layoutsDeleted=Math.round(j.layoutsDeleted)),at},fromPartial(j){var at,ct;const Yt=ho();return Yt.broadcastStopped=(at=j.broadcastStopped)!==null&&at!==void 0?at:!1,Yt.layoutsDeleted=(ct=j.layoutsDeleted)!==null&&ct!==void 0?ct:0,Yt}};function po(){return{collectionId:"",projectId:"",webrtcStart:void 0,async:void 0,dynamicSources:{},requestMetadata:void 0}}a.StartProjectBroadcastRequest={encode(j,at=b.default.Writer.create()){return j.collectionId!==""&&at.uint32(10).string(j.collectionId),j.projectId!==""&&at.uint32(18).string(j.projectId),j.webrtcStart!==void 0&&at.uint32(24).bool(j.webrtcStart),j.async!==void 0&&at.uint32(32).bool(j.async),Object.entries(j.dynamicSources).forEach(([ct,Yt])=>{a.StartProjectBroadcastRequest_DynamicSourcesEntry.encode({key:ct,value:Yt},at.uint32(42).fork()).ldelim()}),j.requestMetadata!==void 0&&k.Value.encode(k.Value.wrap(j.requestMetadata),at.uint32(58).fork()).ldelim(),at},decode(j,at){const ct=j instanceof b.default.Reader?j:new b.default.Reader(j);let Yt=at===void 0?ct.len:ct.pos+at;const Pt=po();for(;ct.pos<Yt;){const Xt=ct.uint32();switch(Xt>>>3){case 1:Pt.collectionId=ct.string();break;case 2:Pt.projectId=ct.string();break;case 3:Pt.webrtcStart=ct.bool();break;case 4:Pt.async=ct.bool();break;case 5:const Kr=a.StartProjectBroadcastRequest_DynamicSourcesEntry.decode(ct,ct.uint32());Kr.value!==void 0&&(Pt.dynamicSources[Kr.key]=Kr.value);break;case 7:Pt.requestMetadata=k.Value.unwrap(k.Value.decode(ct,ct.uint32()));break;default:ct.skipType(Xt&7);break}}return Pt},fromJSON(j){return{collectionId:lr(j.collectionId)?String(j.collectionId):"",projectId:lr(j.projectId)?String(j.projectId):"",webrtcStart:lr(j.webrtcStart)?!!j.webrtcStart:void 0,async:lr(j.async)?!!j.async:void 0,dynamicSources:yu(j.dynamicSources)?Object.entries(j.dynamicSources).reduce((at,[ct,Yt])=>(at[ct]=a.RuntimeSourceAddress.fromJSON(Yt),at),{}):{},requestMetadata:lr(j==null?void 0:j.requestMetadata)?j.requestMetadata:void 0}},toJSON(j){const at={};return j.collectionId!==void 0&&(at.collectionId=j.collectionId),j.projectId!==void 0&&(at.projectId=j.projectId),j.webrtcStart!==void 0&&(at.webrtcStart=j.webrtcStart),j.async!==void 0&&(at.async=j.async),at.dynamicSources={},j.dynamicSources&&Object.entries(j.dynamicSources).forEach(([ct,Yt])=>{at.dynamicSources[ct]=a.RuntimeSourceAddress.toJSON(Yt)}),j.requestMetadata!==void 0&&(at.requestMetadata=j.requestMetadata),at},fromPartial(j){var at,ct,Yt,Pt,Xt,Kr;const an=po();return an.collectionId=(at=j.collectionId)!==null&&at!==void 0?at:"",an.projectId=(ct=j.projectId)!==null&&ct!==void 0?ct:"",an.webrtcStart=(Yt=j.webrtcStart)!==null&&Yt!==void 0?Yt:void 0,an.async=(Pt=j.async)!==null&&Pt!==void 0?Pt:void 0,an.dynamicSources=Object.entries((Xt=j.dynamicSources)!==null&&Xt!==void 0?Xt:{}).reduce((dn,[ln,En])=>(En!==void 0&&(dn[ln]=a.RuntimeSourceAddress.fromPartial(En)),dn),{}),an.requestMetadata=(Kr=j.requestMetadata)!==null&&Kr!==void 0?Kr:void 0,an}};function mo(){return{key:"",value:void 0}}a.StartProjectBroadcastRequest_DynamicSourcesEntry={encode(j,at=b.default.Writer.create()){return j.key!==""&&at.uint32(10).string(j.key),j.value!==void 0&&a.RuntimeSourceAddress.encode(j.value,at.uint32(18).fork()).ldelim(),at},decode(j,at){const ct=j instanceof b.default.Reader?j:new b.default.Reader(j);let Yt=at===void 0?ct.len:ct.pos+at;const Pt=mo();for(;ct.pos<Yt;){const Xt=ct.uint32();switch(Xt>>>3){case 1:Pt.key=ct.string();break;case 2:Pt.value=a.RuntimeSourceAddress.decode(ct,ct.uint32());break;default:ct.skipType(Xt&7);break}}return Pt},fromJSON(j){return{key:lr(j.key)?String(j.key):"",value:lr(j.value)?a.RuntimeSourceAddress.fromJSON(j.value):void 0}},toJSON(j){const at={};return j.key!==void 0&&(at.key=j.key),j.value!==void 0&&(at.value=j.value?a.RuntimeSourceAddress.toJSON(j.value):void 0),at},fromPartial(j){var at;const ct=mo();return ct.key=(at=j.key)!==null&&at!==void 0?at:"",ct.value=j.value!==void 0&&j.value!==null?a.RuntimeSourceAddress.fromPartial(j.value):void 0,ct}};function vo(){return{broadcastId:""}}a.StartProjectBroadcastResponse={encode(j,at=b.default.Writer.create()){return j.broadcastId!==""&&at.uint32(10).string(j.broadcastId),at},decode(j,at){const ct=j instanceof b.default.Reader?j:new b.default.Reader(j);let Yt=at===void 0?ct.len:ct.pos+at;const Pt=vo();for(;ct.pos<Yt;){const Xt=ct.uint32();switch(Xt>>>3){case 1:Pt.broadcastId=ct.string();break;default:ct.skipType(Xt&7);break}}return Pt},fromJSON(j){return{broadcastId:lr(j.broadcastId)?String(j.broadcastId):""}},toJSON(j){const at={};return j.broadcastId!==void 0&&(at.broadcastId=j.broadcastId),at},fromPartial(j){var at;const ct=vo();return ct.broadcastId=(at=j.broadcastId)!==null&&at!==void 0?at:"",ct}};function yo(){return{collectionId:"",projectId:"",webrtcStop:void 0}}a.StopProjectBroadcastRequest={encode(j,at=b.default.Writer.create()){return j.collectionId!==""&&at.uint32(10).string(j.collectionId),j.projectId!==""&&at.uint32(18).string(j.projectId),j.webrtcStop!==void 0&&at.uint32(24).bool(j.webrtcStop),at},decode(j,at){const ct=j instanceof b.default.Reader?j:new b.default.Reader(j);let Yt=at===void 0?ct.len:ct.pos+at;const Pt=yo();for(;ct.pos<Yt;){const Xt=ct.uint32();switch(Xt>>>3){case 1:Pt.collectionId=ct.string();break;case 2:Pt.projectId=ct.string();break;case 3:Pt.webrtcStop=ct.bool();break;default:ct.skipType(Xt&7);break}}return Pt},fromJSON(j){return{collectionId:lr(j.collectionId)?String(j.collectionId):"",projectId:lr(j.projectId)?String(j.projectId):"",webrtcStop:lr(j.webrtcStop)?!!j.webrtcStop:void 0}},toJSON(j){const at={};return j.collectionId!==void 0&&(at.collectionId=j.collectionId),j.projectId!==void 0&&(at.projectId=j.projectId),j.webrtcStop!==void 0&&(at.webrtcStop=j.webrtcStop),at},fromPartial(j){var at,ct,Yt;const Pt=yo();return Pt.collectionId=(at=j.collectionId)!==null&&at!==void 0?at:"",Pt.projectId=(ct=j.projectId)!==null&&ct!==void 0?ct:"",Pt.webrtcStop=(Yt=j.webrtcStop)!==null&&Yt!==void 0?Yt:void 0,Pt}};function go(){return{}}a.StopProjectBroadcastResponse={encode(j,at=b.default.Writer.create()){return at},decode(j,at){const ct=j instanceof b.default.Reader?j:new b.default.Reader(j);let Yt=at===void 0?ct.len:ct.pos+at;const Pt=go();for(;ct.pos<Yt;){const Xt=ct.uint32();switch(Xt>>>3){default:ct.skipType(Xt&7);break}}return Pt},fromJSON(j){return{}},toJSON(j){return{}},fromPartial(j){return go()}};function bo(){return{collectionId:"",projectId:"",status:void 0}}a.GetProjectRequest={encode(j,at=b.default.Writer.create()){return j.collectionId!==""&&at.uint32(10).string(j.collectionId),j.projectId!==""&&at.uint32(18).string(j.projectId),j.status!==void 0&&at.uint32(24).bool(j.status),at},decode(j,at){const ct=j instanceof b.default.Reader?j:new b.default.Reader(j);let Yt=at===void 0?ct.len:ct.pos+at;const Pt=bo();for(;ct.pos<Yt;){const Xt=ct.uint32();switch(Xt>>>3){case 1:Pt.collectionId=ct.string();break;case 2:Pt.projectId=ct.string();break;case 3:Pt.status=ct.bool();break;default:ct.skipType(Xt&7);break}}return Pt},fromJSON(j){return{collectionId:lr(j.collectionId)?String(j.collectionId):"",projectId:lr(j.projectId)?String(j.projectId):"",status:lr(j.status)?!!j.status:void 0}},toJSON(j){const at={};return j.collectionId!==void 0&&(at.collectionId=j.collectionId),j.projectId!==void 0&&(at.projectId=j.projectId),j.status!==void 0&&(at.status=j.status),at},fromPartial(j){var at,ct,Yt;const Pt=bo();return Pt.collectionId=(at=j.collectionId)!==null&&at!==void 0?at:"",Pt.projectId=(ct=j.projectId)!==null&&ct!==void 0?ct:"",Pt.status=(Yt=j.status)!==null&&Yt!==void 0?Yt:void 0,Pt}};function So(){return{project:void 0,status:void 0}}a.GetProjectResponse={encode(j,at=b.default.Writer.create()){return j.project!==void 0&&a.Project.encode(j.project,at.uint32(10).fork()).ldelim(),j.status!==void 0&&a.ProjectBroadcastStatus.encode(j.status,at.uint32(18).fork()).ldelim(),at},decode(j,at){const ct=j instanceof b.default.Reader?j:new b.default.Reader(j);let Yt=at===void 0?ct.len:ct.pos+at;const Pt=So();for(;ct.pos<Yt;){const Xt=ct.uint32();switch(Xt>>>3){case 1:Pt.project=a.Project.decode(ct,ct.uint32());break;case 2:Pt.status=a.ProjectBroadcastStatus.decode(ct,ct.uint32());break;default:ct.skipType(Xt&7);break}}return Pt},fromJSON(j){return{project:lr(j.project)?a.Project.fromJSON(j.project):void 0,status:lr(j.status)?a.ProjectBroadcastStatus.fromJSON(j.status):void 0}},toJSON(j){const at={};return j.project!==void 0&&(at.project=j.project?a.Project.toJSON(j.project):void 0),j.status!==void 0&&(at.status=j.status?a.ProjectBroadcastStatus.toJSON(j.status):void 0),at},fromPartial(j){const at=So();return at.project=j.project!==void 0&&j.project!==null?a.Project.fromPartial(j.project):void 0,at.status=j.status!==void 0&&j.status!==null?a.ProjectBroadcastStatus.fromPartial(j.status):void 0,at}};function _o(){return{collectionId:"",projectId:"",format:void 0}}a.GetProjectBroadcastSnapshotRequest={encode(j,at=b.default.Writer.create()){return j.collectionId!==""&&at.uint32(10).string(j.collectionId),j.projectId!==""&&at.uint32(18).string(j.projectId),j.format!==void 0&&at.uint32(24).int32(nr(j.format)),at},decode(j,at){const ct=j instanceof b.default.Reader?j:new b.default.Reader(j);let Yt=at===void 0?ct.len:ct.pos+at;const Pt=_o();for(;ct.pos<Yt;){const Xt=ct.uint32();switch(Xt>>>3){case 1:Pt.collectionId=ct.string();break;case 2:Pt.projectId=ct.string();break;case 3:Pt.format=Jt(ct.int32());break;default:ct.skipType(Xt&7);break}}return Pt},fromJSON(j){return{collectionId:lr(j.collectionId)?String(j.collectionId):"",projectId:lr(j.projectId)?String(j.projectId):"",format:lr(j.format)?Jt(j.format):void 0}},toJSON(j){const at={};return j.collectionId!==void 0&&(at.collectionId=j.collectionId),j.projectId!==void 0&&(at.projectId=j.projectId),j.format!==void 0&&(at.format=j.format!==void 0?ar(j.format):void 0),at},fromPartial(j){var at,ct,Yt;const Pt=_o();return Pt.collectionId=(at=j.collectionId)!==null&&at!==void 0?at:"",Pt.projectId=(ct=j.projectId)!==null&&ct!==void 0?ct:"",Pt.format=(Yt=j.format)!==null&&Yt!==void 0?Yt:void 0,Pt}};function Eo(){return{format:xt.IMAGE_FORMAT_UNSPECIFIED,image:new Uint8Array}}a.GetProjectBroadcastSnapshotResponse={encode(j,at=b.default.Writer.create()){return j.format!==xt.IMAGE_FORMAT_UNSPECIFIED&&at.uint32(8).int32(nr(j.format)),j.image.length!==0&&at.uint32(18).bytes(j.image),at},decode(j,at){const ct=j instanceof b.default.Reader?j:new b.default.Reader(j);let Yt=at===void 0?ct.len:ct.pos+at;const Pt=Eo();for(;ct.pos<Yt;){const Xt=ct.uint32();switch(Xt>>>3){case 1:Pt.format=Jt(ct.int32());break;case 2:Pt.image=ct.bytes();break;default:ct.skipType(Xt&7);break}}return Pt},fromJSON(j){return{format:lr(j.format)?Jt(j.format):xt.IMAGE_FORMAT_UNSPECIFIED,image:lr(j.image)?mu(j.image):new Uint8Array}},toJSON(j){const at={};return j.format!==void 0&&(at.format=ar(j.format)),j.image!==void 0&&(at.image=vu(j.image!==void 0?j.image:new Uint8Array)),at},fromPartial(j){var at,ct;const Yt=Eo();return Yt.format=(at=j.format)!==null&&at!==void 0?at:xt.IMAGE_FORMAT_UNSPECIFIED,Yt.image=(ct=j.image)!==null&&ct!==void 0?ct:new Uint8Array,Yt}};function To(){return{collectionId:"",projectId:""}}a.GetProjectBroadcastStatusRequest={encode(j,at=b.default.Writer.create()){return j.collectionId!==""&&at.uint32(10).string(j.collectionId),j.projectId!==""&&at.uint32(18).string(j.projectId),at},decode(j,at){const ct=j instanceof b.default.Reader?j:new b.default.Reader(j);let Yt=at===void 0?ct.len:ct.pos+at;const Pt=To();for(;ct.pos<Yt;){const Xt=ct.uint32();switch(Xt>>>3){case 1:Pt.collectionId=ct.string();break;case 2:Pt.projectId=ct.string();break;default:ct.skipType(Xt&7);break}}return Pt},fromJSON(j){return{collectionId:lr(j.collectionId)?String(j.collectionId):"",projectId:lr(j.projectId)?String(j.projectId):""}},toJSON(j){const at={};return j.collectionId!==void 0&&(at.collectionId=j.collectionId),j.projectId!==void 0&&(at.projectId=j.projectId),at},fromPartial(j){var at,ct;const Yt=To();return Yt.collectionId=(at=j.collectionId)!==null&&at!==void 0?at:"",Yt.projectId=(ct=j.projectId)!==null&&ct!==void 0?ct:"",Yt}};function ko(){return{status:void 0}}a.GetProjectBroadcastStatusResponse={encode(j,at=b.default.Writer.create()){return j.status!==void 0&&a.ProjectBroadcastStatus.encode(j.status,at.uint32(10).fork()).ldelim(),at},decode(j,at){const ct=j instanceof b.default.Reader?j:new b.default.Reader(j);let Yt=at===void 0?ct.len:ct.pos+at;const Pt=ko();for(;ct.pos<Yt;){const Xt=ct.uint32();switch(Xt>>>3){case 1:Pt.status=a.ProjectBroadcastStatus.decode(ct,ct.uint32());break;default:ct.skipType(Xt&7);break}}return Pt},fromJSON(j){return{status:lr(j.status)?a.ProjectBroadcastStatus.fromJSON(j.status):void 0}},toJSON(j){const at={};return j.status!==void 0&&(at.status=j.status?a.ProjectBroadcastStatus.toJSON(j.status):void 0),at},fromPartial(j){const at=ko();return at.status=j.status!==void 0&&j.status!==null?a.ProjectBroadcastStatus.fromPartial(j.status):void 0,at}};function wo(){return{collectionId:"",projectId:""}}a.StartProjectWebRtcRequest={encode(j,at=b.default.Writer.create()){return j.collectionId!==""&&at.uint32(10).string(j.collectionId),j.projectId!==""&&at.uint32(18).string(j.projectId),at},decode(j,at){const ct=j instanceof b.default.Reader?j:new b.default.Reader(j);let Yt=at===void 0?ct.len:ct.pos+at;const Pt=wo();for(;ct.pos<Yt;){const Xt=ct.uint32();switch(Xt>>>3){case 1:Pt.collectionId=ct.string();break;case 2:Pt.projectId=ct.string();break;default:ct.skipType(Xt&7);break}}return Pt},fromJSON(j){return{collectionId:lr(j.collectionId)?String(j.collectionId):"",projectId:lr(j.projectId)?String(j.projectId):""}},toJSON(j){const at={};return j.collectionId!==void 0&&(at.collectionId=j.collectionId),j.projectId!==void 0&&(at.projectId=j.projectId),at},fromPartial(j){var at,ct;const Yt=wo();return Yt.collectionId=(at=j.collectionId)!==null&&at!==void 0?at:"",Yt.projectId=(ct=j.projectId)!==null&&ct!==void 0?ct:"",Yt}};function Io(){return{}}a.StartProjectWebRtcResponse={encode(j,at=b.default.Writer.create()){return at},decode(j,at){const ct=j instanceof b.default.Reader?j:new b.default.Reader(j);let Yt=at===void 0?ct.len:ct.pos+at;const Pt=Io();for(;ct.pos<Yt;){const Xt=ct.uint32();switch(Xt>>>3){default:ct.skipType(Xt&7);break}}return Pt},fromJSON(j){return{}},toJSON(j){return{}},fromPartial(j){return Io()}};function Ro(){return{collectionId:"",projectId:""}}a.StopProjectWebRtcRequest={encode(j,at=b.default.Writer.create()){return j.collectionId!==""&&at.uint32(10).string(j.collectionId),j.projectId!==""&&at.uint32(18).string(j.projectId),at},decode(j,at){const ct=j instanceof b.default.Reader?j:new b.default.Reader(j);let Yt=at===void 0?ct.len:ct.pos+at;const Pt=Ro();for(;ct.pos<Yt;){const Xt=ct.uint32();switch(Xt>>>3){case 1:Pt.collectionId=ct.string();break;case 2:Pt.projectId=ct.string();break;default:ct.skipType(Xt&7);break}}return Pt},fromJSON(j){return{collectionId:lr(j.collectionId)?String(j.collectionId):"",projectId:lr(j.projectId)?String(j.projectId):""}},toJSON(j){const at={};return j.collectionId!==void 0&&(at.collectionId=j.collectionId),j.projectId!==void 0&&(at.projectId=j.projectId),at},fromPartial(j){var at,ct;const Yt=Ro();return Yt.collectionId=(at=j.collectionId)!==null&&at!==void 0?at:"",Yt.projectId=(ct=j.projectId)!==null&&ct!==void 0?ct:"",Yt}};function Co(){return{}}a.StopProjectWebRtcResponse={encode(j,at=b.default.Writer.create()){return at},decode(j,at){const ct=j instanceof b.default.Reader?j:new b.default.Reader(j);let Yt=at===void 0?ct.len:ct.pos+at;const Pt=Co();for(;ct.pos<Yt;){const Xt=ct.uint32();switch(Xt>>>3){default:ct.skipType(Xt&7);break}}return Pt},fromJSON(j){return{}},toJSON(j){return{}},fromPartial(j){return Co()}};function Oo(){return{collectionId:"",projectId:"",metadata:void 0,address:void 0,enabled:void 0,timeout:void 0,outputDelay:void 0}}a.CreateDestinationRequest={encode(j,at=b.default.Writer.create()){return j.collectionId!==""&&at.uint32(10).string(j.collectionId),j.projectId!==""&&at.uint32(18).string(j.projectId),j.metadata!==void 0&&k.Value.encode(k.Value.wrap(j.metadata),at.uint32(26).fork()).ldelim(),j.address!==void 0&&a.DestinationAddress.encode(j.address,at.uint32(42).fork()).ldelim(),j.enabled!==void 0&&at.uint32(48).bool(j.enabled),j.timeout!==void 0&&at.uint32(56).uint32(j.timeout),j.outputDelay!==void 0&&at.uint32(72).uint32(j.outputDelay),at},decode(j,at){const ct=j instanceof b.default.Reader?j:new b.default.Reader(j);let Yt=at===void 0?ct.len:ct.pos+at;const Pt=Oo();for(;ct.pos<Yt;){const Xt=ct.uint32();switch(Xt>>>3){case 1:Pt.collectionId=ct.string();break;case 2:Pt.projectId=ct.string();break;case 3:Pt.metadata=k.Value.unwrap(k.Value.decode(ct,ct.uint32()));break;case 5:Pt.address=a.DestinationAddress.decode(ct,ct.uint32());break;case 6:Pt.enabled=ct.bool();break;case 7:Pt.timeout=ct.uint32();break;case 9:Pt.outputDelay=ct.uint32();break;default:ct.skipType(Xt&7);break}}return Pt},fromJSON(j){return{collectionId:lr(j.collectionId)?String(j.collectionId):"",projectId:lr(j.projectId)?String(j.projectId):"",metadata:lr(j==null?void 0:j.metadata)?j.metadata:void 0,address:lr(j.address)?a.DestinationAddress.fromJSON(j.address):void 0,enabled:lr(j.enabled)?!!j.enabled:void 0,timeout:lr(j.timeout)?Number(j.timeout):void 0,outputDelay:lr(j.outputDelay)?Number(j.outputDelay):void 0}},toJSON(j){const at={};return j.collectionId!==void 0&&(at.collectionId=j.collectionId),j.projectId!==void 0&&(at.projectId=j.projectId),j.metadata!==void 0&&(at.metadata=j.metadata),j.address!==void 0&&(at.address=j.address?a.DestinationAddress.toJSON(j.address):void 0),j.enabled!==void 0&&(at.enabled=j.enabled),j.timeout!==void 0&&(at.timeout=Math.round(j.timeout)),j.outputDelay!==void 0&&(at.outputDelay=Math.round(j.outputDelay)),at},fromPartial(j){var at,ct,Yt,Pt,Xt,Kr;const an=Oo();return an.collectionId=(at=j.collectionId)!==null&&at!==void 0?at:"",an.projectId=(ct=j.projectId)!==null&&ct!==void 0?ct:"",an.metadata=(Yt=j.metadata)!==null&&Yt!==void 0?Yt:void 0,an.address=j.address!==void 0&&j.address!==null?a.DestinationAddress.fromPartial(j.address):void 0,an.enabled=(Pt=j.enabled)!==null&&Pt!==void 0?Pt:void 0,an.timeout=(Xt=j.timeout)!==null&&Xt!==void 0?Xt:void 0,an.outputDelay=(Kr=j.outputDelay)!==null&&Kr!==void 0?Kr:void 0,an}};function Po(){return{destination:void 0}}a.CreateDestinationResponse={encode(j,at=b.default.Writer.create()){return j.destination!==void 0&&a.Destination.encode(j.destination,at.uint32(10).fork()).ldelim(),at},decode(j,at){const ct=j instanceof b.default.Reader?j:new b.default.Reader(j);let Yt=at===void 0?ct.len:ct.pos+at;const Pt=Po();for(;ct.pos<Yt;){const Xt=ct.uint32();switch(Xt>>>3){case 1:Pt.destination=a.Destination.decode(ct,ct.uint32());break;default:ct.skipType(Xt&7);break}}return Pt},fromJSON(j){return{destination:lr(j.destination)?a.Destination.fromJSON(j.destination):void 0}},toJSON(j){const at={};return j.destination!==void 0&&(at.destination=j.destination?a.Destination.toJSON(j.destination):void 0),at},fromPartial(j){const at=Po();return at.destination=j.destination!==void 0&&j.destination!==null?a.Destination.fromPartial(j.destination):void 0,at}};function Mo(){return{collectionId:"",projectId:"",destinationId:""}}a.GetDestinationRequest={encode(j,at=b.default.Writer.create()){return j.collectionId!==""&&at.uint32(10).string(j.collectionId),j.projectId!==""&&at.uint32(18).string(j.projectId),j.destinationId!==""&&at.uint32(26).string(j.destinationId),at},decode(j,at){const ct=j instanceof b.default.Reader?j:new b.default.Reader(j);let Yt=at===void 0?ct.len:ct.pos+at;const Pt=Mo();for(;ct.pos<Yt;){const Xt=ct.uint32();switch(Xt>>>3){case 1:Pt.collectionId=ct.string();break;case 2:Pt.projectId=ct.string();break;case 3:Pt.destinationId=ct.string();break;default:ct.skipType(Xt&7);break}}return Pt},fromJSON(j){return{collectionId:lr(j.collectionId)?String(j.collectionId):"",projectId:lr(j.projectId)?String(j.projectId):"",destinationId:lr(j.destinationId)?String(j.destinationId):""}},toJSON(j){const at={};return j.collectionId!==void 0&&(at.collectionId=j.collectionId),j.projectId!==void 0&&(at.projectId=j.projectId),j.destinationId!==void 0&&(at.destinationId=j.destinationId),at},fromPartial(j){var at,ct,Yt;const Pt=Mo();return Pt.collectionId=(at=j.collectionId)!==null&&at!==void 0?at:"",Pt.projectId=(ct=j.projectId)!==null&&ct!==void 0?ct:"",Pt.destinationId=(Yt=j.destinationId)!==null&&Yt!==void 0?Yt:"",Pt}};function No(){return{destination:void 0}}a.GetDestinationResponse={encode(j,at=b.default.Writer.create()){return j.destination!==void 0&&a.Destination.encode(j.destination,at.uint32(10).fork()).ldelim(),at},decode(j,at){const ct=j instanceof b.default.Reader?j:new b.default.Reader(j);let Yt=at===void 0?ct.len:ct.pos+at;const Pt=No();for(;ct.pos<Yt;){const Xt=ct.uint32();switch(Xt>>>3){case 1:Pt.destination=a.Destination.decode(ct,ct.uint32());break;default:ct.skipType(Xt&7);break}}return Pt},fromJSON(j){return{destination:lr(j.destination)?a.Destination.fromJSON(j.destination):void 0}},toJSON(j){const at={};return j.destination!==void 0&&(at.destination=j.destination?a.Destination.toJSON(j.destination):void 0),at},fromPartial(j){const at=No();return at.destination=j.destination!==void 0&&j.destination!==null?a.Destination.fromPartial(j.destination):void 0,at}};function Ao(){return{collectionId:"",projectId:"",destinationId:"",force:void 0}}a.DeleteDestinationRequest={encode(j,at=b.default.Writer.create()){return j.collectionId!==""&&at.uint32(10).string(j.collectionId),j.projectId!==""&&at.uint32(18).string(j.projectId),j.destinationId!==""&&at.uint32(26).string(j.destinationId),j.force!==void 0&&at.uint32(32).bool(j.force),at},decode(j,at){const ct=j instanceof b.default.Reader?j:new b.default.Reader(j);let Yt=at===void 0?ct.len:ct.pos+at;const Pt=Ao();for(;ct.pos<Yt;){const Xt=ct.uint32();switch(Xt>>>3){case 1:Pt.collectionId=ct.string();break;case 2:Pt.projectId=ct.string();break;case 3:Pt.destinationId=ct.string();break;case 4:Pt.force=ct.bool();break;default:ct.skipType(Xt&7);break}}return Pt},fromJSON(j){return{collectionId:lr(j.collectionId)?String(j.collectionId):"",projectId:lr(j.projectId)?String(j.projectId):"",destinationId:lr(j.destinationId)?String(j.destinationId):"",force:lr(j.force)?!!j.force:void 0}},toJSON(j){const at={};return j.collectionId!==void 0&&(at.collectionId=j.collectionId),j.projectId!==void 0&&(at.projectId=j.projectId),j.destinationId!==void 0&&(at.destinationId=j.destinationId),j.force!==void 0&&(at.force=j.force),at},fromPartial(j){var at,ct,Yt,Pt;const Xt=Ao();return Xt.collectionId=(at=j.collectionId)!==null&&at!==void 0?at:"",Xt.projectId=(ct=j.projectId)!==null&&ct!==void 0?ct:"",Xt.destinationId=(Yt=j.destinationId)!==null&&Yt!==void 0?Yt:"",Xt.force=(Pt=j.force)!==null&&Pt!==void 0?Pt:void 0,Xt}};function $o(){return{broadcastUpdated:!1}}a.DeleteDestinationResponse={encode(j,at=b.default.Writer.create()){return j.broadcastUpdated===!0&&at.uint32(8).bool(j.broadcastUpdated),at},decode(j,at){const ct=j instanceof b.default.Reader?j:new b.default.Reader(j);let Yt=at===void 0?ct.len:ct.pos+at;const Pt=$o();for(;ct.pos<Yt;){const Xt=ct.uint32();switch(Xt>>>3){case 1:Pt.broadcastUpdated=ct.bool();break;default:ct.skipType(Xt&7);break}}return Pt},fromJSON(j){return{broadcastUpdated:lr(j.broadcastUpdated)?!!j.broadcastUpdated:!1}},toJSON(j){const at={};return j.broadcastUpdated!==void 0&&(at.broadcastUpdated=j.broadcastUpdated),at},fromPartial(j){var at;const ct=$o();return ct.broadcastUpdated=(at=j.broadcastUpdated)!==null&&at!==void 0?at:!1,ct}};function Do(){return{collectionId:"",projectId:"",destinationId:"",updateMask:void 0,metadata:void 0,address:void 0,enabled:void 0,timeout:void 0,outputDelay:void 0}}a.UpdateDestinationRequest={encode(j,at=b.default.Writer.create()){return j.collectionId!==""&&at.uint32(10).string(j.collectionId),j.projectId!==""&&at.uint32(18).string(j.projectId),j.destinationId!==""&&at.uint32(26).string(j.destinationId),j.updateMask!==void 0&&$.FieldMask.encode($.FieldMask.wrap(j.updateMask),at.uint32(34).fork()).ldelim(),j.metadata!==void 0&&k.Value.encode(k.Value.wrap(j.metadata),at.uint32(42).fork()).ldelim(),j.address!==void 0&&a.DestinationAddress.encode(j.address,at.uint32(50).fork()).ldelim(),j.enabled!==void 0&&at.uint32(56).bool(j.enabled),j.timeout!==void 0&&at.uint32(64).uint32(j.timeout),j.outputDelay!==void 0&&at.uint32(72).uint32(j.outputDelay),at},decode(j,at){const ct=j instanceof b.default.Reader?j:new b.default.Reader(j);let Yt=at===void 0?ct.len:ct.pos+at;const Pt=Do();for(;ct.pos<Yt;){const Xt=ct.uint32();switch(Xt>>>3){case 1:Pt.collectionId=ct.string();break;case 2:Pt.projectId=ct.string();break;case 3:Pt.destinationId=ct.string();break;case 4:Pt.updateMask=$.FieldMask.unwrap($.FieldMask.decode(ct,ct.uint32()));break;case 5:Pt.metadata=k.Value.unwrap(k.Value.decode(ct,ct.uint32()));break;case 6:Pt.address=a.DestinationAddress.decode(ct,ct.uint32());break;case 7:Pt.enabled=ct.bool();break;case 8:Pt.timeout=ct.uint32();break;case 9:Pt.outputDelay=ct.uint32();break;default:ct.skipType(Xt&7);break}}return Pt},fromJSON(j){return{collectionId:lr(j.collectionId)?String(j.collectionId):"",projectId:lr(j.projectId)?String(j.projectId):"",destinationId:lr(j.destinationId)?String(j.destinationId):"",updateMask:lr(j.updateMask)?$.FieldMask.unwrap($.FieldMask.fromJSON(j.updateMask)):void 0,metadata:lr(j==null?void 0:j.metadata)?j.metadata:void 0,address:lr(j.address)?a.DestinationAddress.fromJSON(j.address):void 0,enabled:lr(j.enabled)?!!j.enabled:void 0,timeout:lr(j.timeout)?Number(j.timeout):void 0,outputDelay:lr(j.outputDelay)?Number(j.outputDelay):void 0}},toJSON(j){const at={};return j.collectionId!==void 0&&(at.collectionId=j.collectionId),j.projectId!==void 0&&(at.projectId=j.projectId),j.destinationId!==void 0&&(at.destinationId=j.destinationId),j.updateMask!==void 0&&(at.updateMask=$.FieldMask.toJSON($.FieldMask.wrap(j.updateMask))),j.metadata!==void 0&&(at.metadata=j.metadata),j.address!==void 0&&(at.address=j.address?a.DestinationAddress.toJSON(j.address):void 0),j.enabled!==void 0&&(at.enabled=j.enabled),j.timeout!==void 0&&(at.timeout=Math.round(j.timeout)),j.outputDelay!==void 0&&(at.outputDelay=Math.round(j.outputDelay)),at},fromPartial(j){var at,ct,Yt,Pt,Xt,Kr,an,dn;const ln=Do();return ln.collectionId=(at=j.collectionId)!==null&&at!==void 0?at:"",ln.projectId=(ct=j.projectId)!==null&&ct!==void 0?ct:"",ln.destinationId=(Yt=j.destinationId)!==null&&Yt!==void 0?Yt:"",ln.updateMask=(Pt=j.updateMask)!==null&&Pt!==void 0?Pt:void 0,ln.metadata=(Xt=j.metadata)!==null&&Xt!==void 0?Xt:void 0,ln.address=j.address!==void 0&&j.address!==null?a.DestinationAddress.fromPartial(j.address):void 0,ln.enabled=(Kr=j.enabled)!==null&&Kr!==void 0?Kr:void 0,ln.timeout=(an=j.timeout)!==null&&an!==void 0?an:void 0,ln.outputDelay=(dn=j.outputDelay)!==null&&dn!==void 0?dn:void 0,ln}};function Lo(){return{destination:void 0,broadcastUpdated:!1}}a.UpdateDestinationResponse={encode(j,at=b.default.Writer.create()){return j.destination!==void 0&&a.Destination.encode(j.destination,at.uint32(10).fork()).ldelim(),j.broadcastUpdated===!0&&at.uint32(16).bool(j.broadcastUpdated),at},decode(j,at){const ct=j instanceof b.default.Reader?j:new b.default.Reader(j);let Yt=at===void 0?ct.len:ct.pos+at;const Pt=Lo();for(;ct.pos<Yt;){const Xt=ct.uint32();switch(Xt>>>3){case 1:Pt.destination=a.Destination.decode(ct,ct.uint32());break;case 2:Pt.broadcastUpdated=ct.bool();break;default:ct.skipType(Xt&7);break}}return Pt},fromJSON(j){return{destination:lr(j.destination)?a.Destination.fromJSON(j.destination):void 0,broadcastUpdated:lr(j.broadcastUpdated)?!!j.broadcastUpdated:!1}},toJSON(j){const at={};return j.destination!==void 0&&(at.destination=j.destination?a.Destination.toJSON(j.destination):void 0),j.broadcastUpdated!==void 0&&(at.broadcastUpdated=j.broadcastUpdated),at},fromPartial(j){var at;const ct=Lo();return ct.destination=j.destination!==void 0&&j.destination!==null?a.Destination.fromPartial(j.destination):void 0,ct.broadcastUpdated=(at=j.broadcastUpdated)!==null&&at!==void 0?at:!1,ct}};function Bo(){return{collectionId:"",metadata:void 0,address:void 0,preview:void 0}}a.CreateSourceRequest={encode(j,at=b.default.Writer.create()){return j.collectionId!==""&&at.uint32(10).string(j.collectionId),j.metadata!==void 0&&k.Value.encode(k.Value.wrap(j.metadata),at.uint32(18).fork()).ldelim(),j.address!==void 0&&a.SourceAddress.encode(j.address,at.uint32(26).fork()).ldelim(),j.preview!==void 0&&a.PreviewAddress.encode(j.preview,at.uint32(34).fork()).ldelim(),at},decode(j,at){const ct=j instanceof b.default.Reader?j:new b.default.Reader(j);let Yt=at===void 0?ct.len:ct.pos+at;const Pt=Bo();for(;ct.pos<Yt;){const Xt=ct.uint32();switch(Xt>>>3){case 1:Pt.collectionId=ct.string();break;case 2:Pt.metadata=k.Value.unwrap(k.Value.decode(ct,ct.uint32()));break;case 3:Pt.address=a.SourceAddress.decode(ct,ct.uint32());break;case 4:Pt.preview=a.PreviewAddress.decode(ct,ct.uint32());break;default:ct.skipType(Xt&7);break}}return Pt},fromJSON(j){return{collectionId:lr(j.collectionId)?String(j.collectionId):"",metadata:lr(j==null?void 0:j.metadata)?j.metadata:void 0,address:lr(j.address)?a.SourceAddress.fromJSON(j.address):void 0,preview:lr(j.preview)?a.PreviewAddress.fromJSON(j.preview):void 0}},toJSON(j){const at={};return j.collectionId!==void 0&&(at.collectionId=j.collectionId),j.metadata!==void 0&&(at.metadata=j.metadata),j.address!==void 0&&(at.address=j.address?a.SourceAddress.toJSON(j.address):void 0),j.preview!==void 0&&(at.preview=j.preview?a.PreviewAddress.toJSON(j.preview):void 0),at},fromPartial(j){var at,ct;const Yt=Bo();return Yt.collectionId=(at=j.collectionId)!==null&&at!==void 0?at:"",Yt.metadata=(ct=j.metadata)!==null&&ct!==void 0?ct:void 0,Yt.address=j.address!==void 0&&j.address!==null?a.SourceAddress.fromPartial(j.address):void 0,Yt.preview=j.preview!==void 0&&j.preview!==null?a.PreviewAddress.fromPartial(j.preview):void 0,Yt}};function Uo(){return{source:void 0}}a.CreateSourceResponse={encode(j,at=b.default.Writer.create()){return j.source!==void 0&&a.Source.encode(j.source,at.uint32(10).fork()).ldelim(),at},decode(j,at){const ct=j instanceof b.default.Reader?j:new b.default.Reader(j);let Yt=at===void 0?ct.len:ct.pos+at;const Pt=Uo();for(;ct.pos<Yt;){const Xt=ct.uint32();switch(Xt>>>3){case 1:Pt.source=a.Source.decode(ct,ct.uint32());break;default:ct.skipType(Xt&7);break}}return Pt},fromJSON(j){return{source:lr(j.source)?a.Source.fromJSON(j.source):void 0}},toJSON(j){const at={};return j.source!==void 0&&(at.source=j.source?a.Source.toJSON(j.source):void 0),at},fromPartial(j){const at=Uo();return at.source=j.source!==void 0&&j.source!==null?a.Source.fromPartial(j.source):void 0,at}};function xo(){return{collectionId:"",sourceId:"",force:void 0}}a.DeleteSourceRequest={encode(j,at=b.default.Writer.create()){return j.collectionId!==""&&at.uint32(10).string(j.collectionId),j.sourceId!==""&&at.uint32(18).string(j.sourceId),j.force!==void 0&&at.uint32(24).bool(j.force),at},decode(j,at){const ct=j instanceof b.default.Reader?j:new b.default.Reader(j);let Yt=at===void 0?ct.len:ct.pos+at;const Pt=xo();for(;ct.pos<Yt;){const Xt=ct.uint32();switch(Xt>>>3){case 1:Pt.collectionId=ct.string();break;case 2:Pt.sourceId=ct.string();break;case 3:Pt.force=ct.bool();break;default:ct.skipType(Xt&7);break}}return Pt},fromJSON(j){return{collectionId:lr(j.collectionId)?String(j.collectionId):"",sourceId:lr(j.sourceId)?String(j.sourceId):"",force:lr(j.force)?!!j.force:void 0}},toJSON(j){const at={};return j.collectionId!==void 0&&(at.collectionId=j.collectionId),j.sourceId!==void 0&&(at.sourceId=j.sourceId),j.force!==void 0&&(at.force=j.force),at},fromPartial(j){var at,ct,Yt;const Pt=xo();return Pt.collectionId=(at=j.collectionId)!==null&&at!==void 0?at:"",Pt.sourceId=(ct=j.sourceId)!==null&&ct!==void 0?ct:"",Pt.force=(Yt=j.force)!==null&&Yt!==void 0?Yt:void 0,Pt}};function Fo(){return{projectIdsUpdated:[]}}a.DeleteSourceResponse={encode(j,at=b.default.Writer.create()){for(const ct of j.projectIdsUpdated)at.uint32(26).string(ct);return at},decode(j,at){const ct=j instanceof b.default.Reader?j:new b.default.Reader(j);let Yt=at===void 0?ct.len:ct.pos+at;const Pt=Fo();for(;ct.pos<Yt;){const Xt=ct.uint32();switch(Xt>>>3){case 3:Pt.projectIdsUpdated.push(ct.string());break;default:ct.skipType(Xt&7);break}}return Pt},fromJSON(j){return{projectIdsUpdated:Array.isArray(j==null?void 0:j.projectIdsUpdated)?j.projectIdsUpdated.map(at=>String(at)):[]}},toJSON(j){const at={};return j.projectIdsUpdated?at.projectIdsUpdated=j.projectIdsUpdated.map(ct=>ct):at.projectIdsUpdated=[],at},fromPartial(j){var at;const ct=Fo();return ct.projectIdsUpdated=((at=j.projectIdsUpdated)===null||at===void 0?void 0:at.map(Yt=>Yt))||[],ct}};function qo(){return{collectionId:"",projectId:"",sourceId:"",trigger:void 0}}a.AddSourceToProjectRequest={encode(j,at=b.default.Writer.create()){return j.collectionId!==""&&at.uint32(10).string(j.collectionId),j.projectId!==""&&at.uint32(18).string(j.projectId),j.sourceId!==""&&at.uint32(26).string(j.sourceId),j.trigger!==void 0&&a.SourceTrigger.encode(j.trigger,at.uint32(34).fork()).ldelim(),at},decode(j,at){const ct=j instanceof b.default.Reader?j:new b.default.Reader(j);let Yt=at===void 0?ct.len:ct.pos+at;const Pt=qo();for(;ct.pos<Yt;){const Xt=ct.uint32();switch(Xt>>>3){case 1:Pt.collectionId=ct.string();break;case 2:Pt.projectId=ct.string();break;case 3:Pt.sourceId=ct.string();break;case 4:Pt.trigger=a.SourceTrigger.decode(ct,ct.uint32());break;default:ct.skipType(Xt&7);break}}return Pt},fromJSON(j){return{collectionId:lr(j.collectionId)?String(j.collectionId):"",projectId:lr(j.projectId)?String(j.projectId):"",sourceId:lr(j.sourceId)?String(j.sourceId):"",trigger:lr(j.trigger)?a.SourceTrigger.fromJSON(j.trigger):void 0}},toJSON(j){const at={};return j.collectionId!==void 0&&(at.collectionId=j.collectionId),j.projectId!==void 0&&(at.projectId=j.projectId),j.sourceId!==void 0&&(at.sourceId=j.sourceId),j.trigger!==void 0&&(at.trigger=j.trigger?a.SourceTrigger.toJSON(j.trigger):void 0),at},fromPartial(j){var at,ct,Yt;const Pt=qo();return Pt.collectionId=(at=j.collectionId)!==null&&at!==void 0?at:"",Pt.projectId=(ct=j.projectId)!==null&&ct!==void 0?ct:"",Pt.sourceId=(Yt=j.sourceId)!==null&&Yt!==void 0?Yt:"",Pt.trigger=j.trigger!==void 0&&j.trigger!==null?a.SourceTrigger.fromPartial(j.trigger):void 0,Pt}};function Vo(){return{project:void 0,broadcastUpdated:!1}}a.AddSourceToProjectResponse={encode(j,at=b.default.Writer.create()){return j.project!==void 0&&a.Project.encode(j.project,at.uint32(10).fork()).ldelim(),j.broadcastUpdated===!0&&at.uint32(16).bool(j.broadcastUpdated),at},decode(j,at){const ct=j instanceof b.default.Reader?j:new b.default.Reader(j);let Yt=at===void 0?ct.len:ct.pos+at;const Pt=Vo();for(;ct.pos<Yt;){const Xt=ct.uint32();switch(Xt>>>3){case 1:Pt.project=a.Project.decode(ct,ct.uint32());break;case 2:Pt.broadcastUpdated=ct.bool();break;default:ct.skipType(Xt&7);break}}return Pt},fromJSON(j){return{project:lr(j.project)?a.Project.fromJSON(j.project):void 0,broadcastUpdated:lr(j.broadcastUpdated)?!!j.broadcastUpdated:!1}},toJSON(j){const at={};return j.project!==void 0&&(at.project=j.project?a.Project.toJSON(j.project):void 0),j.broadcastUpdated!==void 0&&(at.broadcastUpdated=j.broadcastUpdated),at},fromPartial(j){var at;const ct=Vo();return ct.project=j.project!==void 0&&j.project!==null?a.Project.fromPartial(j.project):void 0,ct.broadcastUpdated=(at=j.broadcastUpdated)!==null&&at!==void 0?at:!1,ct}};function Jo(){return{collectionId:"",projectId:"",sourceId:"",updateMask:void 0,trigger:void 0}}a.UpdateSourceInProjectRequest={encode(j,at=b.default.Writer.create()){return j.collectionId!==""&&at.uint32(10).string(j.collectionId),j.projectId!==""&&at.uint32(18).string(j.projectId),j.sourceId!==""&&at.uint32(26).string(j.sourceId),j.updateMask!==void 0&&$.FieldMask.encode($.FieldMask.wrap(j.updateMask),at.uint32(34).fork()).ldelim(),j.trigger!==void 0&&a.SourceTrigger.encode(j.trigger,at.uint32(42).fork()).ldelim(),at},decode(j,at){const ct=j instanceof b.default.Reader?j:new b.default.Reader(j);let Yt=at===void 0?ct.len:ct.pos+at;const Pt=Jo();for(;ct.pos<Yt;){const Xt=ct.uint32();switch(Xt>>>3){case 1:Pt.collectionId=ct.string();break;case 2:Pt.projectId=ct.string();break;case 3:Pt.sourceId=ct.string();break;case 4:Pt.updateMask=$.FieldMask.unwrap($.FieldMask.decode(ct,ct.uint32()));break;case 5:Pt.trigger=a.SourceTrigger.decode(ct,ct.uint32());break;default:ct.skipType(Xt&7);break}}return Pt},fromJSON(j){return{collectionId:lr(j.collectionId)?String(j.collectionId):"",projectId:lr(j.projectId)?String(j.projectId):"",sourceId:lr(j.sourceId)?String(j.sourceId):"",updateMask:lr(j.updateMask)?$.FieldMask.unwrap($.FieldMask.fromJSON(j.updateMask)):void 0,trigger:lr(j.trigger)?a.SourceTrigger.fromJSON(j.trigger):void 0}},toJSON(j){const at={};return j.collectionId!==void 0&&(at.collectionId=j.collectionId),j.projectId!==void 0&&(at.projectId=j.projectId),j.sourceId!==void 0&&(at.sourceId=j.sourceId),j.updateMask!==void 0&&(at.updateMask=$.FieldMask.toJSON($.FieldMask.wrap(j.updateMask))),j.trigger!==void 0&&(at.trigger=j.trigger?a.SourceTrigger.toJSON(j.trigger):void 0),at},fromPartial(j){var at,ct,Yt,Pt;const Xt=Jo();return Xt.collectionId=(at=j.collectionId)!==null&&at!==void 0?at:"",Xt.projectId=(ct=j.projectId)!==null&&ct!==void 0?ct:"",Xt.sourceId=(Yt=j.sourceId)!==null&&Yt!==void 0?Yt:"",Xt.updateMask=(Pt=j.updateMask)!==null&&Pt!==void 0?Pt:void 0,Xt.trigger=j.trigger!==void 0&&j.trigger!==null?a.SourceTrigger.fromPartial(j.trigger):void 0,Xt}};function Go(){return{project:void 0}}a.UpdateSourceInProjectResponse={encode(j,at=b.default.Writer.create()){return j.project!==void 0&&a.Project.encode(j.project,at.uint32(10).fork()).ldelim(),at},decode(j,at){const ct=j instanceof b.default.Reader?j:new b.default.Reader(j);let Yt=at===void 0?ct.len:ct.pos+at;const Pt=Go();for(;ct.pos<Yt;){const Xt=ct.uint32();switch(Xt>>>3){case 1:Pt.project=a.Project.decode(ct,ct.uint32());break;default:ct.skipType(Xt&7);break}}return Pt},fromJSON(j){return{project:lr(j.project)?a.Project.fromJSON(j.project):void 0}},toJSON(j){const at={};return j.project!==void 0&&(at.project=j.project?a.Project.toJSON(j.project):void 0),at},fromPartial(j){const at=Go();return at.project=j.project!==void 0&&j.project!==null?a.Project.fromPartial(j.project):void 0,at}};function Wo(){return{collectionId:"",sourceId:""}}a.GetSourceRequest={encode(j,at=b.default.Writer.create()){return j.collectionId!==""&&at.uint32(10).string(j.collectionId),j.sourceId!==""&&at.uint32(26).string(j.sourceId),at},decode(j,at){const ct=j instanceof b.default.Reader?j:new b.default.Reader(j);let Yt=at===void 0?ct.len:ct.pos+at;const Pt=Wo();for(;ct.pos<Yt;){const Xt=ct.uint32();switch(Xt>>>3){case 1:Pt.collectionId=ct.string();break;case 3:Pt.sourceId=ct.string();break;default:ct.skipType(Xt&7);break}}return Pt},fromJSON(j){return{collectionId:lr(j.collectionId)?String(j.collectionId):"",sourceId:lr(j.sourceId)?String(j.sourceId):""}},toJSON(j){const at={};return j.collectionId!==void 0&&(at.collectionId=j.collectionId),j.sourceId!==void 0&&(at.sourceId=j.sourceId),at},fromPartial(j){var at,ct;const Yt=Wo();return Yt.collectionId=(at=j.collectionId)!==null&&at!==void 0?at:"",Yt.sourceId=(ct=j.sourceId)!==null&&ct!==void 0?ct:"",Yt}};function Ho(){return{source:void 0}}a.GetSourceResponse={encode(j,at=b.default.Writer.create()){return j.source!==void 0&&a.Source.encode(j.source,at.uint32(10).fork()).ldelim(),at},decode(j,at){const ct=j instanceof b.default.Reader?j:new b.default.Reader(j);let Yt=at===void 0?ct.len:ct.pos+at;const Pt=Ho();for(;ct.pos<Yt;){const Xt=ct.uint32();switch(Xt>>>3){case 1:Pt.source=a.Source.decode(ct,ct.uint32());break;default:ct.skipType(Xt&7);break}}return Pt},fromJSON(j){return{source:lr(j.source)?a.Source.fromJSON(j.source):void 0}},toJSON(j){const at={};return j.source!==void 0&&(at.source=j.source?a.Source.toJSON(j.source):void 0),at},fromPartial(j){const at=Ho();return at.source=j.source!==void 0&&j.source!==null?a.Source.fromPartial(j.source):void 0,at}};function zo(){return{collectionId:""}}a.GetSourcesRequest={encode(j,at=b.default.Writer.create()){return j.collectionId!==""&&at.uint32(10).string(j.collectionId),at},decode(j,at){const ct=j instanceof b.default.Reader?j:new b.default.Reader(j);let Yt=at===void 0?ct.len:ct.pos+at;const Pt=zo();for(;ct.pos<Yt;){const Xt=ct.uint32();switch(Xt>>>3){case 1:Pt.collectionId=ct.string();break;default:ct.skipType(Xt&7);break}}return Pt},fromJSON(j){return{collectionId:lr(j.collectionId)?String(j.collectionId):""}},toJSON(j){const at={};return j.collectionId!==void 0&&(at.collectionId=j.collectionId),at},fromPartial(j){var at;const ct=zo();return ct.collectionId=(at=j.collectionId)!==null&&at!==void 0?at:"",ct}};function Ko(){return{sources:[]}}a.GetSourcesResponse={encode(j,at=b.default.Writer.create()){for(const ct of j.sources)a.Source.encode(ct,at.uint32(10).fork()).ldelim();return at},decode(j,at){const ct=j instanceof b.default.Reader?j:new b.default.Reader(j);let Yt=at===void 0?ct.len:ct.pos+at;const Pt=Ko();for(;ct.pos<Yt;){const Xt=ct.uint32();switch(Xt>>>3){case 1:Pt.sources.push(a.Source.decode(ct,ct.uint32()));break;default:ct.skipType(Xt&7);break}}return Pt},fromJSON(j){return{sources:Array.isArray(j==null?void 0:j.sources)?j.sources.map(at=>a.Source.fromJSON(at)):[]}},toJSON(j){const at={};return j.sources?at.sources=j.sources.map(ct=>ct?a.Source.toJSON(ct):void 0):at.sources=[],at},fromPartial(j){var at;const ct=Ko();return ct.sources=((at=j.sources)===null||at===void 0?void 0:at.map(Yt=>a.Source.fromPartial(Yt)))||[],ct}};function Yo(){return{collectionId:"",sourceId:"",updateMask:void 0,metadata:void 0,address:void 0,preview:void 0}}a.UpdateSourceRequest={encode(j,at=b.default.Writer.create()){return j.collectionId!==""&&at.uint32(10).string(j.collectionId),j.sourceId!==""&&at.uint32(26).string(j.sourceId),j.updateMask!==void 0&&$.FieldMask.encode($.FieldMask.wrap(j.updateMask),at.uint32(34).fork()).ldelim(),j.metadata!==void 0&&k.Value.encode(k.Value.wrap(j.metadata),at.uint32(42).fork()).ldelim(),j.address!==void 0&&a.SourceAddress.encode(j.address,at.uint32(50).fork()).ldelim(),j.preview!==void 0&&a.PreviewAddress.encode(j.preview,at.uint32(58).fork()).ldelim(),at},decode(j,at){const ct=j instanceof b.default.Reader?j:new b.default.Reader(j);let Yt=at===void 0?ct.len:ct.pos+at;const Pt=Yo();for(;ct.pos<Yt;){const Xt=ct.uint32();switch(Xt>>>3){case 1:Pt.collectionId=ct.string();break;case 3:Pt.sourceId=ct.string();break;case 4:Pt.updateMask=$.FieldMask.unwrap($.FieldMask.decode(ct,ct.uint32()));break;case 5:Pt.metadata=k.Value.unwrap(k.Value.decode(ct,ct.uint32()));break;case 6:Pt.address=a.SourceAddress.decode(ct,ct.uint32());break;case 7:Pt.preview=a.PreviewAddress.decode(ct,ct.uint32());break;default:ct.skipType(Xt&7);break}}return Pt},fromJSON(j){return{collectionId:lr(j.collectionId)?String(j.collectionId):"",sourceId:lr(j.sourceId)?String(j.sourceId):"",updateMask:lr(j.updateMask)?$.FieldMask.unwrap($.FieldMask.fromJSON(j.updateMask)):void 0,metadata:lr(j==null?void 0:j.metadata)?j.metadata:void 0,address:lr(j.address)?a.SourceAddress.fromJSON(j.address):void 0,preview:lr(j.preview)?a.PreviewAddress.fromJSON(j.preview):void 0}},toJSON(j){const at={};return j.collectionId!==void 0&&(at.collectionId=j.collectionId),j.sourceId!==void 0&&(at.sourceId=j.sourceId),j.updateMask!==void 0&&(at.updateMask=$.FieldMask.toJSON($.FieldMask.wrap(j.updateMask))),j.metadata!==void 0&&(at.metadata=j.metadata),j.address!==void 0&&(at.address=j.address?a.SourceAddress.toJSON(j.address):void 0),j.preview!==void 0&&(at.preview=j.preview?a.PreviewAddress.toJSON(j.preview):void 0),at},fromPartial(j){var at,ct,Yt,Pt;const Xt=Yo();return Xt.collectionId=(at=j.collectionId)!==null&&at!==void 0?at:"",Xt.sourceId=(ct=j.sourceId)!==null&&ct!==void 0?ct:"",Xt.updateMask=(Yt=j.updateMask)!==null&&Yt!==void 0?Yt:void 0,Xt.metadata=(Pt=j.metadata)!==null&&Pt!==void 0?Pt:void 0,Xt.address=j.address!==void 0&&j.address!==null?a.SourceAddress.fromPartial(j.address):void 0,Xt.preview=j.preview!==void 0&&j.preview!==null?a.PreviewAddress.fromPartial(j.preview):void 0,Xt}};function Zo(){return{source:void 0,broadcastUpdated:!1}}a.UpdateSourceResponse={encode(j,at=b.default.Writer.create()){return j.source!==void 0&&a.Source.encode(j.source,at.uint32(10).fork()).ldelim(),j.broadcastUpdated===!0&&at.uint32(16).bool(j.broadcastUpdated),at},decode(j,at){const ct=j instanceof b.default.Reader?j:new b.default.Reader(j);let Yt=at===void 0?ct.len:ct.pos+at;const Pt=Zo();for(;ct.pos<Yt;){const Xt=ct.uint32();switch(Xt>>>3){case 1:Pt.source=a.Source.decode(ct,ct.uint32());break;case 2:Pt.broadcastUpdated=ct.bool();break;default:ct.skipType(Xt&7);break}}return Pt},fromJSON(j){return{source:lr(j.source)?a.Source.fromJSON(j.source):void 0,broadcastUpdated:lr(j.broadcastUpdated)?!!j.broadcastUpdated:!1}},toJSON(j){const at={};return j.source!==void 0&&(at.source=j.source?a.Source.toJSON(j.source):void 0),j.broadcastUpdated!==void 0&&(at.broadcastUpdated=j.broadcastUpdated),at},fromPartial(j){var at;const ct=Zo();return ct.source=j.source!==void 0&&j.source!==null?a.Source.fromPartial(j.source):void 0,ct.broadcastUpdated=(at=j.broadcastUpdated)!==null&&at!==void 0?at:!1,ct}};function Qo(){return{collectionId:"",projectId:"",sourceId:"",force:void 0}}a.RemoveSourceFromProjectRequest={encode(j,at=b.default.Writer.create()){return j.collectionId!==""&&at.uint32(10).string(j.collectionId),j.projectId!==""&&at.uint32(18).string(j.projectId),j.sourceId!==""&&at.uint32(26).string(j.sourceId),j.force!==void 0&&at.uint32(32).bool(j.force),at},decode(j,at){const ct=j instanceof b.default.Reader?j:new b.default.Reader(j);let Yt=at===void 0?ct.len:ct.pos+at;const Pt=Qo();for(;ct.pos<Yt;){const Xt=ct.uint32();switch(Xt>>>3){case 1:Pt.collectionId=ct.string();break;case 2:Pt.projectId=ct.string();break;case 3:Pt.sourceId=ct.string();break;case 4:Pt.force=ct.bool();break;default:ct.skipType(Xt&7);break}}return Pt},fromJSON(j){return{collectionId:lr(j.collectionId)?String(j.collectionId):"",projectId:lr(j.projectId)?String(j.projectId):"",sourceId:lr(j.sourceId)?String(j.sourceId):"",force:lr(j.force)?!!j.force:void 0}},toJSON(j){const at={};return j.collectionId!==void 0&&(at.collectionId=j.collectionId),j.projectId!==void 0&&(at.projectId=j.projectId),j.sourceId!==void 0&&(at.sourceId=j.sourceId),j.force!==void 0&&(at.force=j.force),at},fromPartial(j){var at,ct,Yt,Pt;const Xt=Qo();return Xt.collectionId=(at=j.collectionId)!==null&&at!==void 0?at:"",Xt.projectId=(ct=j.projectId)!==null&&ct!==void 0?ct:"",Xt.sourceId=(Yt=j.sourceId)!==null&&Yt!==void 0?Yt:"",Xt.force=(Pt=j.force)!==null&&Pt!==void 0?Pt:void 0,Xt}};function Xo(){return{project:void 0,broadcastUpdated:!1}}a.RemoveSourceFromProjectResponse={encode(j,at=b.default.Writer.create()){return j.project!==void 0&&a.Project.encode(j.project,at.uint32(10).fork()).ldelim(),j.broadcastUpdated===!0&&at.uint32(16).bool(j.broadcastUpdated),at},decode(j,at){const ct=j instanceof b.default.Reader?j:new b.default.Reader(j);let Yt=at===void 0?ct.len:ct.pos+at;const Pt=Xo();for(;ct.pos<Yt;){const Xt=ct.uint32();switch(Xt>>>3){case 1:Pt.project=a.Project.decode(ct,ct.uint32());break;case 2:Pt.broadcastUpdated=ct.bool();break;default:ct.skipType(Xt&7);break}}return Pt},fromJSON(j){return{project:lr(j.project)?a.Project.fromJSON(j.project):void 0,broadcastUpdated:lr(j.broadcastUpdated)?!!j.broadcastUpdated:!1}},toJSON(j){const at={};return j.project!==void 0&&(at.project=j.project?a.Project.toJSON(j.project):void 0),j.broadcastUpdated!==void 0&&(at.broadcastUpdated=j.broadcastUpdated),at},fromPartial(j){var at;const ct=Xo();return ct.project=j.project!==void 0&&j.project!==null?a.Project.fromPartial(j.project):void 0,ct.broadcastUpdated=(at=j.broadcastUpdated)!==null&&at!==void 0?at:!1,ct}};function jo(){return{collectionId:"",sourceId:"",accessToken:void 0}}a.GetSourcePlaylistRequest={encode(j,at=b.default.Writer.create()){return j.collectionId!==""&&at.uint32(10).string(j.collectionId),j.sourceId!==""&&at.uint32(26).string(j.sourceId),j.accessToken!==void 0&&at.uint32(34).string(j.accessToken),at},decode(j,at){const ct=j instanceof b.default.Reader?j:new b.default.Reader(j);let Yt=at===void 0?ct.len:ct.pos+at;const Pt=jo();for(;ct.pos<Yt;){const Xt=ct.uint32();switch(Xt>>>3){case 1:Pt.collectionId=ct.string();break;case 3:Pt.sourceId=ct.string();break;case 4:Pt.accessToken=ct.string();break;default:ct.skipType(Xt&7);break}}return Pt},fromJSON(j){return{collectionId:lr(j.collectionId)?String(j.collectionId):"",sourceId:lr(j.sourceId)?String(j.sourceId):"",accessToken:lr(j.accessToken)?String(j.accessToken):void 0}},toJSON(j){const at={};return j.collectionId!==void 0&&(at.collectionId=j.collectionId),j.sourceId!==void 0&&(at.sourceId=j.sourceId),j.accessToken!==void 0&&(at.accessToken=j.accessToken),at},fromPartial(j){var at,ct,Yt;const Pt=jo();return Pt.collectionId=(at=j.collectionId)!==null&&at!==void 0?at:"",Pt.sourceId=(ct=j.sourceId)!==null&&ct!==void 0?ct:"",Pt.accessToken=(Yt=j.accessToken)!==null&&Yt!==void 0?Yt:void 0,Pt}};function ts(){return{manifest:""}}a.GetSourcePlaylistResponse={encode(j,at=b.default.Writer.create()){return j.manifest!==""&&at.uint32(10).string(j.manifest),at},decode(j,at){const ct=j instanceof b.default.Reader?j:new b.default.Reader(j);let Yt=at===void 0?ct.len:ct.pos+at;const Pt=ts();for(;ct.pos<Yt;){const Xt=ct.uint32();switch(Xt>>>3){case 1:Pt.manifest=ct.string();break;default:ct.skipType(Xt&7);break}}return Pt},fromJSON(j){return{manifest:lr(j.manifest)?String(j.manifest):""}},toJSON(j){const at={};return j.manifest!==void 0&&(at.manifest=j.manifest),at},fromPartial(j){var at;const ct=ts();return ct.manifest=(at=j.manifest)!==null&&at!==void 0?at:"",ct}};function rs(){return{serviceUserId:"",displayName:void 0,role:void 0,maxDuration:void 0}}a.CreateAccessTokenRequest={encode(j,at=b.default.Writer.create()){return j.serviceUserId!==""&&at.uint32(10).string(j.serviceUserId),j.displayName!==void 0&&at.uint32(34).string(j.displayName),j.role!==void 0&&at.uint32(16).int32(vr(j.role)),j.maxDuration!==void 0&&at.uint32(24).uint32(j.maxDuration),at},decode(j,at){const ct=j instanceof b.default.Reader?j:new b.default.Reader(j);let Yt=at===void 0?ct.len:ct.pos+at;const Pt=rs();for(;ct.pos<Yt;){const Xt=ct.uint32();switch(Xt>>>3){case 1:Pt.serviceUserId=ct.string();break;case 4:Pt.displayName=ct.string();break;case 2:Pt.role=Ht(ct.int32());break;case 3:Pt.maxDuration=ct.uint32();break;default:ct.skipType(Xt&7);break}}return Pt},fromJSON(j){return{serviceUserId:lr(j.serviceUserId)?String(j.serviceUserId):"",displayName:lr(j.displayName)?String(j.displayName):void 0,role:lr(j.role)?Ht(j.role):void 0,maxDuration:lr(j.maxDuration)?Number(j.maxDuration):void 0}},toJSON(j){const at={};return j.serviceUserId!==void 0&&(at.serviceUserId=j.serviceUserId),j.displayName!==void 0&&(at.displayName=j.displayName),j.role!==void 0&&(at.role=j.role!==void 0?or(j.role):void 0),j.maxDuration!==void 0&&(at.maxDuration=Math.round(j.maxDuration)),at},fromPartial(j){var at,ct,Yt,Pt;const Xt=rs();return Xt.serviceUserId=(at=j.serviceUserId)!==null&&at!==void 0?at:"",Xt.displayName=(ct=j.displayName)!==null&&ct!==void 0?ct:void 0,Xt.role=(Yt=j.role)!==null&&Yt!==void 0?Yt:void 0,Xt.maxDuration=(Pt=j.maxDuration)!==null&&Pt!==void 0?Pt:void 0,Xt}};function ns(){return{accessToken:""}}a.CreateAccessTokenResponse={encode(j,at=b.default.Writer.create()){return j.accessToken!==""&&at.uint32(10).string(j.accessToken),at},decode(j,at){const ct=j instanceof b.default.Reader?j:new b.default.Reader(j);let Yt=at===void 0?ct.len:ct.pos+at;const Pt=ns();for(;ct.pos<Yt;){const Xt=ct.uint32();switch(Xt>>>3){case 1:Pt.accessToken=ct.string();break;default:ct.skipType(Xt&7);break}}return Pt},fromJSON(j){return{accessToken:lr(j.accessToken)?String(j.accessToken):""}},toJSON(j){const at={};return j.accessToken!==void 0&&(at.accessToken=j.accessToken),at},fromPartial(j){var at;const ct=ns();return ct.accessToken=(at=j.accessToken)!==null&&at!==void 0?at:"",ct}};function is(){return{code:""}}a.LookupGuestCodeRequest={encode(j,at=b.default.Writer.create()){return j.code!==""&&at.uint32(10).string(j.code),at},decode(j,at){const ct=j instanceof b.default.Reader?j:new b.default.Reader(j);let Yt=at===void 0?ct.len:ct.pos+at;const Pt=is();for(;ct.pos<Yt;){const Xt=ct.uint32();switch(Xt>>>3){case 1:Pt.code=ct.string();break;default:ct.skipType(Xt&7);break}}return Pt},fromJSON(j){return{code:lr(j.code)?String(j.code):""}},toJSON(j){const at={};return j.code!==void 0&&(at.code=j.code),at},fromPartial(j){var at;const ct=is();return ct.code=(at=j.code)!==null&&at!==void 0?at:"",ct}};function as(){return{url:""}}a.LookupGuestCodeResponse={encode(j,at=b.default.Writer.create()){return j.url!==""&&at.uint32(10).string(j.url),at},decode(j,at){const ct=j instanceof b.default.Reader?j:new b.default.Reader(j);let Yt=at===void 0?ct.len:ct.pos+at;const Pt=as();for(;ct.pos<Yt;){const Xt=ct.uint32();switch(Xt>>>3){case 1:Pt.url=ct.string();break;default:ct.skipType(Xt&7);break}}return Pt},fromJSON(j){return{url:lr(j.url)?String(j.url):""}},toJSON(j){const at={};return j.url!==void 0&&(at.url=j.url),at},fromPartial(j){var at;const ct=as();return ct.url=(at=j.url)!==null&&at!==void 0?at:"",ct}};function os(){return{displayName:"",serviceUserId:void 0}}a.GuestAccessTokenDirect={encode(j,at=b.default.Writer.create()){return j.displayName!==""&&at.uint32(10).string(j.displayName),j.serviceUserId!==void 0&&at.uint32(18).string(j.serviceUserId),at},decode(j,at){const ct=j instanceof b.default.Reader?j:new b.default.Reader(j);let Yt=at===void 0?ct.len:ct.pos+at;const Pt=os();for(;ct.pos<Yt;){const Xt=ct.uint32();switch(Xt>>>3){case 1:Pt.displayName=ct.string();break;case 2:Pt.serviceUserId=ct.string();break;default:ct.skipType(Xt&7);break}}return Pt},fromJSON(j){return{displayName:lr(j.displayName)?String(j.displayName):"",serviceUserId:lr(j.serviceUserId)?String(j.serviceUserId):void 0}},toJSON(j){const at={};return j.displayName!==void 0&&(at.displayName=j.displayName),j.serviceUserId!==void 0&&(at.serviceUserId=j.serviceUserId),at},fromPartial(j){var at,ct;const Yt=os();return Yt.displayName=(at=j.displayName)!==null&&at!==void 0?at:"",Yt.serviceUserId=(ct=j.serviceUserId)!==null&&ct!==void 0?ct:void 0,Yt}};function ss(){return{maxDuration:void 0}}a.GuestAccessTokenExchange={encode(j,at=b.default.Writer.create()){return j.maxDuration!==void 0&&at.uint32(8).uint32(j.maxDuration),at},decode(j,at){const ct=j instanceof b.default.Reader?j:new b.default.Reader(j);let Yt=at===void 0?ct.len:ct.pos+at;const Pt=ss();for(;ct.pos<Yt;){const Xt=ct.uint32();switch(Xt>>>3){case 1:Pt.maxDuration=ct.uint32();break;default:ct.skipType(Xt&7);break}}return Pt},fromJSON(j){return{maxDuration:lr(j.maxDuration)?Number(j.maxDuration):void 0}},toJSON(j){const at={};return j.maxDuration!==void 0&&(at.maxDuration=Math.round(j.maxDuration)),at},fromPartial(j){var at;const ct=ss();return ct.maxDuration=(at=j.maxDuration)!==null&&at!==void 0?at:void 0,ct}};function us(){return{direct:void 0,exchange:void 0}}a.GuestAccessToken={encode(j,at=b.default.Writer.create()){return j.direct!==void 0&&a.GuestAccessTokenDirect.encode(j.direct,at.uint32(10).fork()).ldelim(),j.exchange!==void 0&&a.GuestAccessTokenExchange.encode(j.exchange,at.uint32(18).fork()).ldelim(),at},decode(j,at){const ct=j instanceof b.default.Reader?j:new b.default.Reader(j);let Yt=at===void 0?ct.len:ct.pos+at;const Pt=us();for(;ct.pos<Yt;){const Xt=ct.uint32();switch(Xt>>>3){case 1:Pt.direct=a.GuestAccessTokenDirect.decode(ct,ct.uint32());break;case 2:Pt.exchange=a.GuestAccessTokenExchange.decode(ct,ct.uint32());break;default:ct.skipType(Xt&7);break}}return Pt},fromJSON(j){return{direct:lr(j.direct)?a.GuestAccessTokenDirect.fromJSON(j.direct):void 0,exchange:lr(j.exchange)?a.GuestAccessTokenExchange.fromJSON(j.exchange):void 0}},toJSON(j){const at={};return j.direct!==void 0&&(at.direct=j.direct?a.GuestAccessTokenDirect.toJSON(j.direct):void 0),j.exchange!==void 0&&(at.exchange=j.exchange?a.GuestAccessTokenExchange.toJSON(j.exchange):void 0),at},fromPartial(j){const at=us();return at.direct=j.direct!==void 0&&j.direct!==null?a.GuestAccessTokenDirect.fromPartial(j.direct):void 0,at.exchange=j.exchange!==void 0&&j.exchange!==null?a.GuestAccessTokenExchange.fromPartial(j.exchange):void 0,at}};function ds(){return{collectionId:"",projectId:"",maxDuration:void 0,role:Ft.ROLE_UNSPECIFIED,token:void 0,url:void 0}}a.CreateGuestAccessTokenRequest={encode(j,at=b.default.Writer.create()){return j.collectionId!==""&&at.uint32(10).string(j.collectionId),j.projectId!==""&&at.uint32(18).string(j.projectId),j.maxDuration!==void 0&&at.uint32(24).uint32(j.maxDuration),j.role!==Ft.ROLE_UNSPECIFIED&&at.uint32(32).int32(vr(j.role)),j.token!==void 0&&a.GuestAccessToken.encode(j.token,at.uint32(42).fork()).ldelim(),j.url!==void 0&&at.uint32(50).string(j.url),at},decode(j,at){const ct=j instanceof b.default.Reader?j:new b.default.Reader(j);let Yt=at===void 0?ct.len:ct.pos+at;const Pt=ds();for(;ct.pos<Yt;){const Xt=ct.uint32();switch(Xt>>>3){case 1:Pt.collectionId=ct.string();break;case 2:Pt.projectId=ct.string();break;case 3:Pt.maxDuration=ct.uint32();break;case 4:Pt.role=Ht(ct.int32());break;case 5:Pt.token=a.GuestAccessToken.decode(ct,ct.uint32());break;case 6:Pt.url=ct.string();break;default:ct.skipType(Xt&7);break}}return Pt},fromJSON(j){return{collectionId:lr(j.collectionId)?String(j.collectionId):"",projectId:lr(j.projectId)?String(j.projectId):"",maxDuration:lr(j.maxDuration)?Number(j.maxDuration):void 0,role:lr(j.role)?Ht(j.role):Ft.ROLE_UNSPECIFIED,token:lr(j.token)?a.GuestAccessToken.fromJSON(j.token):void 0,url:lr(j.url)?String(j.url):void 0}},toJSON(j){const at={};return j.collectionId!==void 0&&(at.collectionId=j.collectionId),j.projectId!==void 0&&(at.projectId=j.projectId),j.maxDuration!==void 0&&(at.maxDuration=Math.round(j.maxDuration)),j.role!==void 0&&(at.role=or(j.role)),j.token!==void 0&&(at.token=j.token?a.GuestAccessToken.toJSON(j.token):void 0),j.url!==void 0&&(at.url=j.url),at},fromPartial(j){var at,ct,Yt,Pt,Xt;const Kr=ds();return Kr.collectionId=(at=j.collectionId)!==null&&at!==void 0?at:"",Kr.projectId=(ct=j.projectId)!==null&&ct!==void 0?ct:"",Kr.maxDuration=(Yt=j.maxDuration)!==null&&Yt!==void 0?Yt:void 0,Kr.role=(Pt=j.role)!==null&&Pt!==void 0?Pt:Ft.ROLE_UNSPECIFIED,Kr.token=j.token!==void 0&&j.token!==null?a.GuestAccessToken.fromPartial(j.token):void 0,Kr.url=(Xt=j.url)!==null&&Xt!==void 0?Xt:void 0,Kr}};function cs(){return{accessToken:"",url:void 0}}a.CreateGuestAccessTokenResponse={encode(j,at=b.default.Writer.create()){return j.accessToken!==""&&at.uint32(10).string(j.accessToken),j.url!==void 0&&at.uint32(18).string(j.url),at},decode(j,at){const ct=j instanceof b.default.Reader?j:new b.default.Reader(j);let Yt=at===void 0?ct.len:ct.pos+at;const Pt=cs();for(;ct.pos<Yt;){const Xt=ct.uint32();switch(Xt>>>3){case 1:Pt.accessToken=ct.string();break;case 2:Pt.url=ct.string();break;default:ct.skipType(Xt&7);break}}return Pt},fromJSON(j){return{accessToken:lr(j.accessToken)?String(j.accessToken):"",url:lr(j.url)?String(j.url):void 0}},toJSON(j){const at={};return j.accessToken!==void 0&&(at.accessToken=j.accessToken),j.url!==void 0&&(at.url=j.url),at},fromPartial(j){var at,ct;const Yt=cs();return Yt.accessToken=(at=j.accessToken)!==null&&at!==void 0?at:"",Yt.url=(ct=j.url)!==null&&ct!==void 0?ct:void 0,Yt}};function ls(){return{collectionId:"",projectId:"",displayName:""}}a.CreateWebRtcAccessTokenRequest={encode(j,at=b.default.Writer.create()){return j.collectionId!==""&&at.uint32(10).string(j.collectionId),j.projectId!==""&&at.uint32(18).string(j.projectId),j.displayName!==""&&at.uint32(26).string(j.displayName),at},decode(j,at){const ct=j instanceof b.default.Reader?j:new b.default.Reader(j);let Yt=at===void 0?ct.len:ct.pos+at;const Pt=ls();for(;ct.pos<Yt;){const Xt=ct.uint32();switch(Xt>>>3){case 1:Pt.collectionId=ct.string();break;case 2:Pt.projectId=ct.string();break;case 3:Pt.displayName=ct.string();break;default:ct.skipType(Xt&7);break}}return Pt},fromJSON(j){return{collectionId:lr(j.collectionId)?String(j.collectionId):"",projectId:lr(j.projectId)?String(j.projectId):"",displayName:lr(j.displayName)?String(j.displayName):""}},toJSON(j){const at={};return j.collectionId!==void 0&&(at.collectionId=j.collectionId),j.projectId!==void 0&&(at.projectId=j.projectId),j.displayName!==void 0&&(at.displayName=j.displayName),at},fromPartial(j){var at,ct,Yt;const Pt=ls();return Pt.collectionId=(at=j.collectionId)!==null&&at!==void 0?at:"",Pt.projectId=(ct=j.projectId)!==null&&ct!==void 0?ct:"",Pt.displayName=(Yt=j.displayName)!==null&&Yt!==void 0?Yt:"",Pt}};function fs(){return{webrtcAccess:void 0}}a.CreateWebRtcAccessTokenResponse={encode(j,at=b.default.Writer.create()){return j.webrtcAccess!==void 0&&a.WebRtcAccess.encode(j.webrtcAccess,at.uint32(18).fork()).ldelim(),at},decode(j,at){const ct=j instanceof b.default.Reader?j:new b.default.Reader(j);let Yt=at===void 0?ct.len:ct.pos+at;const Pt=fs();for(;ct.pos<Yt;){const Xt=ct.uint32();switch(Xt>>>3){case 2:Pt.webrtcAccess=a.WebRtcAccess.decode(ct,ct.uint32());break;default:ct.skipType(Xt&7);break}}return Pt},fromJSON(j){return{webrtcAccess:lr(j.webrtcAccess)?a.WebRtcAccess.fromJSON(j.webrtcAccess):void 0}},toJSON(j){const at={};return j.webrtcAccess!==void 0&&(at.webrtcAccess=j.webrtcAccess?a.WebRtcAccess.toJSON(j.webrtcAccess):void 0),at},fromPartial(j){const at=fs();return at.webrtcAccess=j.webrtcAccess!==void 0&&j.webrtcAccess!==null?a.WebRtcAccess.fromPartial(j.webrtcAccess):void 0,at}};function hs(){return{}}a.RefreshAccessTokenRequest={encode(j,at=b.default.Writer.create()){return at},decode(j,at){const ct=j instanceof b.default.Reader?j:new b.default.Reader(j);let Yt=at===void 0?ct.len:ct.pos+at;const Pt=hs();for(;ct.pos<Yt;){const Xt=ct.uint32();switch(Xt>>>3){default:ct.skipType(Xt&7);break}}return Pt},fromJSON(j){return{}},toJSON(j){return{}},fromPartial(j){return hs()}};function ps(){return{}}a.RefreshAccessTokenResponse={encode(j,at=b.default.Writer.create()){return at},decode(j,at){const ct=j instanceof b.default.Reader?j:new b.default.Reader(j);let Yt=at===void 0?ct.len:ct.pos+at;const Pt=ps();for(;ct.pos<Yt;){const Xt=ct.uint32();switch(Xt>>>3){default:ct.skipType(Xt&7);break}}return Pt},fromJSON(j){return{}},toJSON(j){return{}},fromPartial(j){return ps()}};function vs(){return{collectionId:"",projectId:"",code:"",url:"",autoDelete:void 0}}a.GuestCode={encode(j,at=b.default.Writer.create()){return j.collectionId!==""&&at.uint32(10).string(j.collectionId),j.projectId!==""&&at.uint32(18).string(j.projectId),j.code!==""&&at.uint32(26).string(j.code),j.url!==""&&at.uint32(34).string(j.url),j.autoDelete!==void 0&&et.Timestamp.encode(Rn(j.autoDelete),at.uint32(42).fork()).ldelim(),at},decode(j,at){const ct=j instanceof b.default.Reader?j:new b.default.Reader(j);let Yt=at===void 0?ct.len:ct.pos+at;const Pt=vs();for(;ct.pos<Yt;){const Xt=ct.uint32();switch(Xt>>>3){case 1:Pt.collectionId=ct.string();break;case 2:Pt.projectId=ct.string();break;case 3:Pt.code=ct.string();break;case 4:Pt.url=ct.string();break;case 5:Pt.autoDelete=Cn(et.Timestamp.decode(ct,ct.uint32()));break;default:ct.skipType(Xt&7);break}}return Pt},fromJSON(j){return{collectionId:lr(j.collectionId)?String(j.collectionId):"",projectId:lr(j.projectId)?String(j.projectId):"",code:lr(j.code)?String(j.code):"",url:lr(j.url)?String(j.url):"",autoDelete:lr(j.autoDelete)?String(j.autoDelete):void 0}},toJSON(j){const at={};return j.collectionId!==void 0&&(at.collectionId=j.collectionId),j.projectId!==void 0&&(at.projectId=j.projectId),j.code!==void 0&&(at.code=j.code),j.url!==void 0&&(at.url=j.url),j.autoDelete!==void 0&&(at.autoDelete=j.autoDelete),at},fromPartial(j){var at,ct,Yt,Pt,Xt;const Kr=vs();return Kr.collectionId=(at=j.collectionId)!==null&&at!==void 0?at:"",Kr.projectId=(ct=j.projectId)!==null&&ct!==void 0?ct:"",Kr.code=(Yt=j.code)!==null&&Yt!==void 0?Yt:"",Kr.url=(Pt=j.url)!==null&&Pt!==void 0?Pt:"",Kr.autoDelete=(Xt=j.autoDelete)!==null&&Xt!==void 0?Xt:void 0,Kr}};function ys(){return{serviceId:"",code:""}}a.GuestCodeRedirectRequest={encode(j,at=b.default.Writer.create()){return j.serviceId!==""&&at.uint32(10).string(j.serviceId),j.code!==""&&at.uint32(18).string(j.code),at},decode(j,at){const ct=j instanceof b.default.Reader?j:new b.default.Reader(j);let Yt=at===void 0?ct.len:ct.pos+at;const Pt=ys();for(;ct.pos<Yt;){const Xt=ct.uint32();switch(Xt>>>3){case 1:Pt.serviceId=ct.string();break;case 2:Pt.code=ct.string();break;default:ct.skipType(Xt&7);break}}return Pt},fromJSON(j){return{serviceId:lr(j.serviceId)?String(j.serviceId):"",code:lr(j.code)?String(j.code):""}},toJSON(j){const at={};return j.serviceId!==void 0&&(at.serviceId=j.serviceId),j.code!==void 0&&(at.code=j.code),at},fromPartial(j){var at,ct;const Yt=ys();return Yt.serviceId=(at=j.serviceId)!==null&&at!==void 0?at:"",Yt.code=(ct=j.code)!==null&&ct!==void 0?ct:"",Yt}};function gs(){return{}}a.GuestCodeRedirectResponse={encode(j,at=b.default.Writer.create()){return at},decode(j,at){const ct=j instanceof b.default.Reader?j:new b.default.Reader(j);let Yt=at===void 0?ct.len:ct.pos+at;const Pt=gs();for(;ct.pos<Yt;){const Xt=ct.uint32();switch(Xt>>>3){default:ct.skipType(Xt&7);break}}return Pt},fromJSON(j){return{}},toJSON(j){return{}},fromPartial(j){return gs()}};function bs(){return{collectionId:"",projectId:"",maxDuration:void 0,role:Ft.ROLE_UNSPECIFIED,token:void 0,targetUrl:"",code:"",linkUrl:""}}a.IssuedGuestCode={encode(j,at=b.default.Writer.create()){return j.collectionId!==""&&at.uint32(10).string(j.collectionId),j.projectId!==""&&at.uint32(18).string(j.projectId),j.maxDuration!==void 0&&at.uint32(24).uint32(j.maxDuration),j.role!==Ft.ROLE_UNSPECIFIED&&at.uint32(32).int32(vr(j.role)),j.token!==void 0&&a.GuestAccessToken.encode(j.token,at.uint32(42).fork()).ldelim(),j.targetUrl!==""&&at.uint32(50).string(j.targetUrl),j.code!==""&&at.uint32(58).string(j.code),j.linkUrl!==""&&at.uint32(74).string(j.linkUrl),at},decode(j,at){const ct=j instanceof b.default.Reader?j:new b.default.Reader(j);let Yt=at===void 0?ct.len:ct.pos+at;const Pt=bs();for(;ct.pos<Yt;){const Xt=ct.uint32();switch(Xt>>>3){case 1:Pt.collectionId=ct.string();break;case 2:Pt.projectId=ct.string();break;case 3:Pt.maxDuration=ct.uint32();break;case 4:Pt.role=Ht(ct.int32());break;case 5:Pt.token=a.GuestAccessToken.decode(ct,ct.uint32());break;case 6:Pt.targetUrl=ct.string();break;case 7:Pt.code=ct.string();break;case 9:Pt.linkUrl=ct.string();break;default:ct.skipType(Xt&7);break}}return Pt},fromJSON(j){return{collectionId:lr(j.collectionId)?String(j.collectionId):"",projectId:lr(j.projectId)?String(j.projectId):"",maxDuration:lr(j.maxDuration)?Number(j.maxDuration):void 0,role:lr(j.role)?Ht(j.role):Ft.ROLE_UNSPECIFIED,token:lr(j.token)?a.GuestAccessToken.fromJSON(j.token):void 0,targetUrl:lr(j.targetUrl)?String(j.targetUrl):"",code:lr(j.code)?String(j.code):"",linkUrl:lr(j.linkUrl)?String(j.linkUrl):""}},toJSON(j){const at={};return j.collectionId!==void 0&&(at.collectionId=j.collectionId),j.projectId!==void 0&&(at.projectId=j.projectId),j.maxDuration!==void 0&&(at.maxDuration=Math.round(j.maxDuration)),j.role!==void 0&&(at.role=or(j.role)),j.token!==void 0&&(at.token=j.token?a.GuestAccessToken.toJSON(j.token):void 0),j.targetUrl!==void 0&&(at.targetUrl=j.targetUrl),j.code!==void 0&&(at.code=j.code),j.linkUrl!==void 0&&(at.linkUrl=j.linkUrl),at},fromPartial(j){var at,ct,Yt,Pt,Xt,Kr,an;const dn=bs();return dn.collectionId=(at=j.collectionId)!==null&&at!==void 0?at:"",dn.projectId=(ct=j.projectId)!==null&&ct!==void 0?ct:"",dn.maxDuration=(Yt=j.maxDuration)!==null&&Yt!==void 0?Yt:void 0,dn.role=(Pt=j.role)!==null&&Pt!==void 0?Pt:Ft.ROLE_UNSPECIFIED,dn.token=j.token!==void 0&&j.token!==null?a.GuestAccessToken.fromPartial(j.token):void 0,dn.targetUrl=(Xt=j.targetUrl)!==null&&Xt!==void 0?Xt:"",dn.code=(Kr=j.code)!==null&&Kr!==void 0?Kr:"",dn.linkUrl=(an=j.linkUrl)!==null&&an!==void 0?an:"",dn}};function Ss(){return{collectionId:"",projectId:"",maxDuration:void 0,role:Ft.ROLE_UNSPECIFIED,token:void 0,url:""}}a.CreateGuestCodeRequest={encode(j,at=b.default.Writer.create()){return j.collectionId!==""&&at.uint32(10).string(j.collectionId),j.projectId!==""&&at.uint32(18).string(j.projectId),j.maxDuration!==void 0&&at.uint32(24).uint32(j.maxDuration),j.role!==Ft.ROLE_UNSPECIFIED&&at.uint32(32).int32(vr(j.role)),j.token!==void 0&&a.GuestAccessToken.encode(j.token,at.uint32(42).fork()).ldelim(),j.url!==""&&at.uint32(50).string(j.url),at},decode(j,at){const ct=j instanceof b.default.Reader?j:new b.default.Reader(j);let Yt=at===void 0?ct.len:ct.pos+at;const Pt=Ss();for(;ct.pos<Yt;){const Xt=ct.uint32();switch(Xt>>>3){case 1:Pt.collectionId=ct.string();break;case 2:Pt.projectId=ct.string();break;case 3:Pt.maxDuration=ct.uint32();break;case 4:Pt.role=Ht(ct.int32());break;case 5:Pt.token=a.GuestAccessToken.decode(ct,ct.uint32());break;case 6:Pt.url=ct.string();break;default:ct.skipType(Xt&7);break}}return Pt},fromJSON(j){return{collectionId:lr(j.collectionId)?String(j.collectionId):"",projectId:lr(j.projectId)?String(j.projectId):"",maxDuration:lr(j.maxDuration)?Number(j.maxDuration):void 0,role:lr(j.role)?Ht(j.role):Ft.ROLE_UNSPECIFIED,token:lr(j.token)?a.GuestAccessToken.fromJSON(j.token):void 0,url:lr(j.url)?String(j.url):""}},toJSON(j){const at={};return j.collectionId!==void 0&&(at.collectionId=j.collectionId),j.projectId!==void 0&&(at.projectId=j.projectId),j.maxDuration!==void 0&&(at.maxDuration=Math.round(j.maxDuration)),j.role!==void 0&&(at.role=or(j.role)),j.token!==void 0&&(at.token=j.token?a.GuestAccessToken.toJSON(j.token):void 0),j.url!==void 0&&(at.url=j.url),at},fromPartial(j){var at,ct,Yt,Pt,Xt;const Kr=Ss();return Kr.collectionId=(at=j.collectionId)!==null&&at!==void 0?at:"",Kr.projectId=(ct=j.projectId)!==null&&ct!==void 0?ct:"",Kr.maxDuration=(Yt=j.maxDuration)!==null&&Yt!==void 0?Yt:void 0,Kr.role=(Pt=j.role)!==null&&Pt!==void 0?Pt:Ft.ROLE_UNSPECIFIED,Kr.token=j.token!==void 0&&j.token!==null?a.GuestAccessToken.fromPartial(j.token):void 0,Kr.url=(Xt=j.url)!==null&&Xt!==void 0?Xt:"",Kr}};function _s(){return{guestCode:void 0}}a.CreateGuestCodeResponse={encode(j,at=b.default.Writer.create()){return j.guestCode!==void 0&&a.IssuedGuestCode.encode(j.guestCode,at.uint32(10).fork()).ldelim(),at},decode(j,at){const ct=j instanceof b.default.Reader?j:new b.default.Reader(j);let Yt=at===void 0?ct.len:ct.pos+at;const Pt=_s();for(;ct.pos<Yt;){const Xt=ct.uint32();switch(Xt>>>3){case 1:Pt.guestCode=a.IssuedGuestCode.decode(ct,ct.uint32());break;default:ct.skipType(Xt&7);break}}return Pt},fromJSON(j){return{guestCode:lr(j.guestCode)?a.IssuedGuestCode.fromJSON(j.guestCode):void 0}},toJSON(j){const at={};return j.guestCode!==void 0&&(at.guestCode=j.guestCode?a.IssuedGuestCode.toJSON(j.guestCode):void 0),at},fromPartial(j){const at=_s();return at.guestCode=j.guestCode!==void 0&&j.guestCode!==null?a.IssuedGuestCode.fromPartial(j.guestCode):void 0,at}};function Es(){return{code:""}}a.GetGuestCodeRequest={encode(j,at=b.default.Writer.create()){return j.code!==""&&at.uint32(10).string(j.code),at},decode(j,at){const ct=j instanceof b.default.Reader?j:new b.default.Reader(j);let Yt=at===void 0?ct.len:ct.pos+at;const Pt=Es();for(;ct.pos<Yt;){const Xt=ct.uint32();switch(Xt>>>3){case 1:Pt.code=ct.string();break;default:ct.skipType(Xt&7);break}}return Pt},fromJSON(j){return{code:lr(j.code)?String(j.code):""}},toJSON(j){const at={};return j.code!==void 0&&(at.code=j.code),at},fromPartial(j){var at;const ct=Es();return ct.code=(at=j.code)!==null&&at!==void 0?at:"",ct}};function Ts(){return{guestCode:void 0}}a.GetGuestCodeResponse={encode(j,at=b.default.Writer.create()){return j.guestCode!==void 0&&a.IssuedGuestCode.encode(j.guestCode,at.uint32(10).fork()).ldelim(),at},decode(j,at){const ct=j instanceof b.default.Reader?j:new b.default.Reader(j);let Yt=at===void 0?ct.len:ct.pos+at;const Pt=Ts();for(;ct.pos<Yt;){const Xt=ct.uint32();switch(Xt>>>3){case 1:Pt.guestCode=a.IssuedGuestCode.decode(ct,ct.uint32());break;default:ct.skipType(Xt&7);break}}return Pt},fromJSON(j){return{guestCode:lr(j.guestCode)?a.IssuedGuestCode.fromJSON(j.guestCode):void 0}},toJSON(j){const at={};return j.guestCode!==void 0&&(at.guestCode=j.guestCode?a.IssuedGuestCode.toJSON(j.guestCode):void 0),at},fromPartial(j){const at=Ts();return at.guestCode=j.guestCode!==void 0&&j.guestCode!==null?a.IssuedGuestCode.fromPartial(j.guestCode):void 0,at}};function ks(){return{collectionId:void 0,projectId:void 0,role:void 0}}a.GetGuestCodesRequest={encode(j,at=b.default.Writer.create()){return j.collectionId!==void 0&&at.uint32(10).string(j.collectionId),j.projectId!==void 0&&at.uint32(18).string(j.projectId),j.role!==void 0&&at.uint32(24).int32(vr(j.role)),at},decode(j,at){const ct=j instanceof b.default.Reader?j:new b.default.Reader(j);let Yt=at===void 0?ct.len:ct.pos+at;const Pt=ks();for(;ct.pos<Yt;){const Xt=ct.uint32();switch(Xt>>>3){case 1:Pt.collectionId=ct.string();break;case 2:Pt.projectId=ct.string();break;case 3:Pt.role=Ht(ct.int32());break;default:ct.skipType(Xt&7);break}}return Pt},fromJSON(j){return{collectionId:lr(j.collectionId)?String(j.collectionId):void 0,projectId:lr(j.projectId)?String(j.projectId):void 0,role:lr(j.role)?Ht(j.role):void 0}},toJSON(j){const at={};return j.collectionId!==void 0&&(at.collectionId=j.collectionId),j.projectId!==void 0&&(at.projectId=j.projectId),j.role!==void 0&&(at.role=j.role!==void 0?or(j.role):void 0),at},fromPartial(j){var at,ct,Yt;const Pt=ks();return Pt.collectionId=(at=j.collectionId)!==null&&at!==void 0?at:void 0,Pt.projectId=(ct=j.projectId)!==null&&ct!==void 0?ct:void 0,Pt.role=(Yt=j.role)!==null&&Yt!==void 0?Yt:void 0,Pt}};function Is(){return{guestCodes:[]}}a.GetGuestCodesResponse={encode(j,at=b.default.Writer.create()){for(const ct of j.guestCodes)a.IssuedGuestCode.encode(ct,at.uint32(10).fork()).ldelim();return at},decode(j,at){const ct=j instanceof b.default.Reader?j:new b.default.Reader(j);let Yt=at===void 0?ct.len:ct.pos+at;const Pt=Is();for(;ct.pos<Yt;){const Xt=ct.uint32();switch(Xt>>>3){case 1:Pt.guestCodes.push(a.IssuedGuestCode.decode(ct,ct.uint32()));break;default:ct.skipType(Xt&7);break}}return Pt},fromJSON(j){return{guestCodes:Array.isArray(j==null?void 0:j.guestCodes)?j.guestCodes.map(at=>a.IssuedGuestCode.fromJSON(at)):[]}},toJSON(j){const at={};return j.guestCodes?at.guestCodes=j.guestCodes.map(ct=>ct?a.IssuedGuestCode.toJSON(ct):void 0):at.guestCodes=[],at},fromPartial(j){var at;const ct=Is();return ct.guestCodes=((at=j.guestCodes)===null||at===void 0?void 0:at.map(Yt=>a.IssuedGuestCode.fromPartial(Yt)))||[],ct}};function Rs(){return{code:""}}a.DeleteGuestCodeRequest={encode(j,at=b.default.Writer.create()){return j.code!==""&&at.uint32(10).string(j.code),at},decode(j,at){const ct=j instanceof b.default.Reader?j:new b.default.Reader(j);let Yt=at===void 0?ct.len:ct.pos+at;const Pt=Rs();for(;ct.pos<Yt;){const Xt=ct.uint32();switch(Xt>>>3){case 1:Pt.code=ct.string();break;default:ct.skipType(Xt&7);break}}return Pt},fromJSON(j){return{code:lr(j.code)?String(j.code):""}},toJSON(j){const at={};return j.code!==void 0&&(at.code=j.code),at},fromPartial(j){var at;const ct=Rs();return ct.code=(at=j.code)!==null&&at!==void 0?at:"",ct}};function Cs(){return{}}a.DeleteGuestCodeResponse={encode(j,at=b.default.Writer.create()){return at},decode(j,at){const ct=j instanceof b.default.Reader?j:new b.default.Reader(j);let Yt=at===void 0?ct.len:ct.pos+at;const Pt=Cs();for(;ct.pos<Yt;){const Xt=ct.uint32();switch(Xt>>>3){default:ct.skipType(Xt&7);break}}return Pt},fromJSON(j){return{}},toJSON(j){return{}},fromPartial(j){return Cs()}};function Os(){return{alg:"",kty:"",use:"",kid:"",e:"",n:""}}a.JsonWebKey={encode(j,at=b.default.Writer.create()){return j.alg!==""&&at.uint32(10).string(j.alg),j.kty!==""&&at.uint32(18).string(j.kty),j.use!==""&&at.uint32(26).string(j.use),j.kid!==""&&at.uint32(34).string(j.kid),j.e!==""&&at.uint32(42).string(j.e),j.n!==""&&at.uint32(50).string(j.n),at},decode(j,at){const ct=j instanceof b.default.Reader?j:new b.default.Reader(j);let Yt=at===void 0?ct.len:ct.pos+at;const Pt=Os();for(;ct.pos<Yt;){const Xt=ct.uint32();switch(Xt>>>3){case 1:Pt.alg=ct.string();break;case 2:Pt.kty=ct.string();break;case 3:Pt.use=ct.string();break;case 4:Pt.kid=ct.string();break;case 5:Pt.e=ct.string();break;case 6:Pt.n=ct.string();break;default:ct.skipType(Xt&7);break}}return Pt},fromJSON(j){return{alg:lr(j.alg)?String(j.alg):"",kty:lr(j.kty)?String(j.kty):"",use:lr(j.use)?String(j.use):"",kid:lr(j.kid)?String(j.kid):"",e:lr(j.e)?String(j.e):"",n:lr(j.n)?String(j.n):""}},toJSON(j){const at={};return j.alg!==void 0&&(at.alg=j.alg),j.kty!==void 0&&(at.kty=j.kty),j.use!==void 0&&(at.use=j.use),j.kid!==void 0&&(at.kid=j.kid),j.e!==void 0&&(at.e=j.e),j.n!==void 0&&(at.n=j.n),at},fromPartial(j){var at,ct,Yt,Pt,Xt,Kr;const an=Os();return an.alg=(at=j.alg)!==null&&at!==void 0?at:"",an.kty=(ct=j.kty)!==null&&ct!==void 0?ct:"",an.use=(Yt=j.use)!==null&&Yt!==void 0?Yt:"",an.kid=(Pt=j.kid)!==null&&Pt!==void 0?Pt:"",an.e=(Xt=j.e)!==null&&Xt!==void 0?Xt:"",an.n=(Kr=j.n)!==null&&Kr!==void 0?Kr:"",an}};function Ps(){return{}}a.GetJsonWebKeySetRequest={encode(j,at=b.default.Writer.create()){return at},decode(j,at){const ct=j instanceof b.default.Reader?j:new b.default.Reader(j);let Yt=at===void 0?ct.len:ct.pos+at;const Pt=Ps();for(;ct.pos<Yt;){const Xt=ct.uint32();switch(Xt>>>3){default:ct.skipType(Xt&7);break}}return Pt},fromJSON(j){return{}},toJSON(j){return{}},fromPartial(j){return Ps()}};function Ms(){return{keys:[]}}a.GetJsonWebKeySetResponse={encode(j,at=b.default.Writer.create()){for(const ct of j.keys)a.JsonWebKey.encode(ct,at.uint32(10).fork()).ldelim();return at},decode(j,at){const ct=j instanceof b.default.Reader?j:new b.default.Reader(j);let Yt=at===void 0?ct.len:ct.pos+at;const Pt=Ms();for(;ct.pos<Yt;){const Xt=ct.uint32();switch(Xt>>>3){case 1:Pt.keys.push(a.JsonWebKey.decode(ct,ct.uint32()));break;default:ct.skipType(Xt&7);break}}return Pt},fromJSON(j){return{keys:Array.isArray(j==null?void 0:j.keys)?j.keys.map(at=>a.JsonWebKey.fromJSON(at)):[]}},toJSON(j){const at={};return j.keys?at.keys=j.keys.map(ct=>ct?a.JsonWebKey.toJSON(ct):void 0):at.keys=[],at},fromPartial(j){var at;const ct=Ms();return ct.keys=((at=j.keys)===null||at===void 0?void 0:at.map(Yt=>a.JsonWebKey.fromPartial(Yt)))||[],ct}};function Ns(){return{}}a.GetTestTokenRequest={encode(j,at=b.default.Writer.create()){return at},decode(j,at){const ct=j instanceof b.default.Reader?j:new b.default.Reader(j);let Yt=at===void 0?ct.len:ct.pos+at;const Pt=Ns();for(;ct.pos<Yt;){const Xt=ct.uint32();switch(Xt>>>3){default:ct.skipType(Xt&7);break}}return Pt},fromJSON(j){return{}},toJSON(j){return{}},fromPartial(j){return Ns()}};function As(){return{accessToken:""}}a.GetTestTokenResponse={encode(j,at=b.default.Writer.create()){return j.accessToken!==""&&at.uint32(10).string(j.accessToken),at},decode(j,at){const ct=j instanceof b.default.Reader?j:new b.default.Reader(j);let Yt=at===void 0?ct.len:ct.pos+at;const Pt=As();for(;ct.pos<Yt;){const Xt=ct.uint32();switch(Xt>>>3){case 1:Pt.accessToken=ct.string();break;default:ct.skipType(Xt&7);break}}return Pt},fromJSON(j){return{accessToken:lr(j.accessToken)?String(j.accessToken):""}},toJSON(j){const at={};return j.accessToken!==void 0&&(at.accessToken=j.accessToken),at},fromPartial(j){var at;const ct=As();return ct.accessToken=(at=j.accessToken)!==null&&at!==void 0?at:"",ct}};function $s(){return{collectionId:"",projectId:"",destinationId:"",destination:void 0}}a.DestinationCreateEvent={encode(j,at=b.default.Writer.create()){return j.collectionId!==""&&at.uint32(10).string(j.collectionId),j.projectId!==""&&at.uint32(18).string(j.projectId),j.destinationId!==""&&at.uint32(26).string(j.destinationId),j.destination!==void 0&&a.Destination.encode(j.destination,at.uint32(34).fork()).ldelim(),at},decode(j,at){const ct=j instanceof b.default.Reader?j:new b.default.Reader(j);let Yt=at===void 0?ct.len:ct.pos+at;const Pt=$s();for(;ct.pos<Yt;){const Xt=ct.uint32();switch(Xt>>>3){case 1:Pt.collectionId=ct.string();break;case 2:Pt.projectId=ct.string();break;case 3:Pt.destinationId=ct.string();break;case 4:Pt.destination=a.Destination.decode(ct,ct.uint32());break;default:ct.skipType(Xt&7);break}}return Pt},fromJSON(j){return{collectionId:lr(j.collectionId)?String(j.collectionId):"",projectId:lr(j.projectId)?String(j.projectId):"",destinationId:lr(j.destinationId)?String(j.destinationId):"",destination:lr(j.destination)?a.Destination.fromJSON(j.destination):void 0}},toJSON(j){const at={};return j.collectionId!==void 0&&(at.collectionId=j.collectionId),j.projectId!==void 0&&(at.projectId=j.projectId),j.destinationId!==void 0&&(at.destinationId=j.destinationId),j.destination!==void 0&&(at.destination=j.destination?a.Destination.toJSON(j.destination):void 0),at},fromPartial(j){var at,ct,Yt;const Pt=$s();return Pt.collectionId=(at=j.collectionId)!==null&&at!==void 0?at:"",Pt.projectId=(ct=j.projectId)!==null&&ct!==void 0?ct:"",Pt.destinationId=(Yt=j.destinationId)!==null&&Yt!==void 0?Yt:"",Pt.destination=j.destination!==void 0&&j.destination!==null?a.Destination.fromPartial(j.destination):void 0,Pt}};function Ds(){return{collectionId:"",projectId:"",destinationId:""}}a.DestinationDeleteEvent={encode(j,at=b.default.Writer.create()){return j.collectionId!==""&&at.uint32(10).string(j.collectionId),j.projectId!==""&&at.uint32(18).string(j.projectId),j.destinationId!==""&&at.uint32(26).string(j.destinationId),at},decode(j,at){const ct=j instanceof b.default.Reader?j:new b.default.Reader(j);let Yt=at===void 0?ct.len:ct.pos+at;const Pt=Ds();for(;ct.pos<Yt;){const Xt=ct.uint32();switch(Xt>>>3){case 1:Pt.collectionId=ct.string();break;case 2:Pt.projectId=ct.string();break;case 3:Pt.destinationId=ct.string();break;default:ct.skipType(Xt&7);break}}return Pt},fromJSON(j){return{collectionId:lr(j.collectionId)?String(j.collectionId):"",projectId:lr(j.projectId)?String(j.projectId):"",destinationId:lr(j.destinationId)?String(j.destinationId):""}},toJSON(j){const at={};return j.collectionId!==void 0&&(at.collectionId=j.collectionId),j.projectId!==void 0&&(at.projectId=j.projectId),j.destinationId!==void 0&&(at.destinationId=j.destinationId),at},fromPartial(j){var at,ct,Yt;const Pt=Ds();return Pt.collectionId=(at=j.collectionId)!==null&&at!==void 0?at:"",Pt.projectId=(ct=j.projectId)!==null&&ct!==void 0?ct:"",Pt.destinationId=(Yt=j.destinationId)!==null&&Yt!==void 0?Yt:"",Pt}};function Ls(){return{collectionId:"",projectId:"",destinationId:"",updateMask:[],destination:void 0}}a.DestinationUpdateEvent={encode(j,at=b.default.Writer.create()){j.collectionId!==""&&at.uint32(10).string(j.collectionId),j.projectId!==""&&at.uint32(18).string(j.projectId),j.destinationId!==""&&at.uint32(26).string(j.destinationId);for(const ct of j.updateMask)at.uint32(34).string(ct);return j.destination!==void 0&&a.Destination.encode(j.destination,at.uint32(42).fork()).ldelim(),at},decode(j,at){const ct=j instanceof b.default.Reader?j:new b.default.Reader(j);let Yt=at===void 0?ct.len:ct.pos+at;const Pt=Ls();for(;ct.pos<Yt;){const Xt=ct.uint32();switch(Xt>>>3){case 1:Pt.collectionId=ct.string();break;case 2:Pt.projectId=ct.string();break;case 3:Pt.destinationId=ct.string();break;case 4:Pt.updateMask.push(ct.string());break;case 5:Pt.destination=a.Destination.decode(ct,ct.uint32());break;default:ct.skipType(Xt&7);break}}return Pt},fromJSON(j){return{collectionId:lr(j.collectionId)?String(j.collectionId):"",projectId:lr(j.projectId)?String(j.projectId):"",destinationId:lr(j.destinationId)?String(j.destinationId):"",updateMask:Array.isArray(j==null?void 0:j.updateMask)?j.updateMask.map(at=>String(at)):[],destination:lr(j.destination)?a.Destination.fromJSON(j.destination):void 0}},toJSON(j){const at={};return j.collectionId!==void 0&&(at.collectionId=j.collectionId),j.projectId!==void 0&&(at.projectId=j.projectId),j.destinationId!==void 0&&(at.destinationId=j.destinationId),j.updateMask?at.updateMask=j.updateMask.map(ct=>ct):at.updateMask=[],j.destination!==void 0&&(at.destination=j.destination?a.Destination.toJSON(j.destination):void 0),at},fromPartial(j){var at,ct,Yt,Pt;const Xt=Ls();return Xt.collectionId=(at=j.collectionId)!==null&&at!==void 0?at:"",Xt.projectId=(ct=j.projectId)!==null&&ct!==void 0?ct:"",Xt.destinationId=(Yt=j.destinationId)!==null&&Yt!==void 0?Yt:"",Xt.updateMask=((Pt=j.updateMask)===null||Pt===void 0?void 0:Pt.map(Kr=>Kr))||[],Xt.destination=j.destination!==void 0&&j.destination!==null?a.Destination.fromPartial(j.destination):void 0,Xt}};function Bs(){return{collectionId:"",projectId:"",destinationId:"",connect:void 0}}a.DestinationStateEvent={encode(j,at=b.default.Writer.create()){return j.collectionId!==""&&at.uint32(10).string(j.collectionId),j.projectId!==""&&at.uint32(18).string(j.projectId),j.destinationId!==""&&at.uint32(26).string(j.destinationId),j.connect!==void 0&&at.uint32(32).int32(yr(j.connect)),at},decode(j,at){const ct=j instanceof b.default.Reader?j:new b.default.Reader(j);let Yt=at===void 0?ct.len:ct.pos+at;const Pt=Bs();for(;ct.pos<Yt;){const Xt=ct.uint32();switch(Xt>>>3){case 1:Pt.collectionId=ct.string();break;case 2:Pt.projectId=ct.string();break;case 3:Pt.destinationId=ct.string();break;case 4:Pt.connect=Bt(ct.int32());break;default:ct.skipType(Xt&7);break}}return Pt},fromJSON(j){return{collectionId:lr(j.collectionId)?String(j.collectionId):"",projectId:lr(j.projectId)?String(j.projectId):"",destinationId:lr(j.destinationId)?String(j.destinationId):"",connect:lr(j.connect)?Bt(j.connect):void 0}},toJSON(j){const at={};return j.collectionId!==void 0&&(at.collectionId=j.collectionId),j.projectId!==void 0&&(at.projectId=j.projectId),j.destinationId!==void 0&&(at.destinationId=j.destinationId),j.connect!==void 0&&(at.connect=j.connect!==void 0?Zt(j.connect):void 0),at},fromPartial(j){var at,ct,Yt,Pt;const Xt=Bs();return Xt.collectionId=(at=j.collectionId)!==null&&at!==void 0?at:"",Xt.projectId=(ct=j.projectId)!==null&&ct!==void 0?ct:"",Xt.destinationId=(Yt=j.destinationId)!==null&&Yt!==void 0?Yt:"",Xt.connect=(Pt=j.connect)!==null&&Pt!==void 0?Pt:void 0,Xt}};function Us(){return{collectionId:"",projectId:"",project:void 0}}a.ProjectCreateEvent={encode(j,at=b.default.Writer.create()){return j.collectionId!==""&&at.uint32(10).string(j.collectionId),j.projectId!==""&&at.uint32(18).string(j.projectId),j.project!==void 0&&a.Project.encode(j.project,at.uint32(26).fork()).ldelim(),at},decode(j,at){const ct=j instanceof b.default.Reader?j:new b.default.Reader(j);let Yt=at===void 0?ct.len:ct.pos+at;const Pt=Us();for(;ct.pos<Yt;){const Xt=ct.uint32();switch(Xt>>>3){case 1:Pt.collectionId=ct.string();break;case 2:Pt.projectId=ct.string();break;case 3:Pt.project=a.Project.decode(ct,ct.uint32());break;default:ct.skipType(Xt&7);break}}return Pt},fromJSON(j){return{collectionId:lr(j.collectionId)?String(j.collectionId):"",projectId:lr(j.projectId)?String(j.projectId):"",project:lr(j.project)?a.Project.fromJSON(j.project):void 0}},toJSON(j){const at={};return j.collectionId!==void 0&&(at.collectionId=j.collectionId),j.projectId!==void 0&&(at.projectId=j.projectId),j.project!==void 0&&(at.project=j.project?a.Project.toJSON(j.project):void 0),at},fromPartial(j){var at,ct;const Yt=Us();return Yt.collectionId=(at=j.collectionId)!==null&&at!==void 0?at:"",Yt.projectId=(ct=j.projectId)!==null&&ct!==void 0?ct:"",Yt.project=j.project!==void 0&&j.project!==null?a.Project.fromPartial(j.project):void 0,Yt}};function xs(){return{collectionId:"",projectId:""}}a.ProjectDeleteEvent={encode(j,at=b.default.Writer.create()){return j.collectionId!==""&&at.uint32(10).string(j.collectionId),j.projectId!==""&&at.uint32(18).string(j.projectId),at},decode(j,at){const ct=j instanceof b.default.Reader?j:new b.default.Reader(j);let Yt=at===void 0?ct.len:ct.pos+at;const Pt=xs();for(;ct.pos<Yt;){const Xt=ct.uint32();switch(Xt>>>3){case 1:Pt.collectionId=ct.string();break;case 2:Pt.projectId=ct.string();break;default:ct.skipType(Xt&7);break}}return Pt},fromJSON(j){return{collectionId:lr(j.collectionId)?String(j.collectionId):"",projectId:lr(j.projectId)?String(j.projectId):""}},toJSON(j){const at={};return j.collectionId!==void 0&&(at.collectionId=j.collectionId),j.projectId!==void 0&&(at.projectId=j.projectId),at},fromPartial(j){var at,ct;const Yt=xs();return Yt.collectionId=(at=j.collectionId)!==null&&at!==void 0?at:"",Yt.projectId=(ct=j.projectId)!==null&&ct!==void 0?ct:"",Yt}};function Fs(){return{collectionId:"",projectId:"",updateMask:[],project:void 0}}a.ProjectUpdateEvent={encode(j,at=b.default.Writer.create()){j.collectionId!==""&&at.uint32(10).string(j.collectionId),j.projectId!==""&&at.uint32(18).string(j.projectId);for(const ct of j.updateMask)at.uint32(26).string(ct);return j.project!==void 0&&a.Project.encode(j.project,at.uint32(34).fork()).ldelim(),at},decode(j,at){const ct=j instanceof b.default.Reader?j:new b.default.Reader(j);let Yt=at===void 0?ct.len:ct.pos+at;const Pt=Fs();for(;ct.pos<Yt;){const Xt=ct.uint32();switch(Xt>>>3){case 1:Pt.collectionId=ct.string();break;case 2:Pt.projectId=ct.string();break;case 3:Pt.updateMask.push(ct.string());break;case 4:Pt.project=a.Project.decode(ct,ct.uint32());break;default:ct.skipType(Xt&7);break}}return Pt},fromJSON(j){return{collectionId:lr(j.collectionId)?String(j.collectionId):"",projectId:lr(j.projectId)?String(j.projectId):"",updateMask:Array.isArray(j==null?void 0:j.updateMask)?j.updateMask.map(at=>String(at)):[],project:lr(j.project)?a.Project.fromJSON(j.project):void 0}},toJSON(j){const at={};return j.collectionId!==void 0&&(at.collectionId=j.collectionId),j.projectId!==void 0&&(at.projectId=j.projectId),j.updateMask?at.updateMask=j.updateMask.map(ct=>ct):at.updateMask=[],j.project!==void 0&&(at.project=j.project?a.Project.toJSON(j.project):void 0),at},fromPartial(j){var at,ct,Yt;const Pt=Fs();return Pt.collectionId=(at=j.collectionId)!==null&&at!==void 0?at:"",Pt.projectId=(ct=j.projectId)!==null&&ct!==void 0?ct:"",Pt.updateMask=((Yt=j.updateMask)===null||Yt===void 0?void 0:Yt.map(Xt=>Xt))||[],Pt.project=j.project!==void 0&&j.project!==null?a.Project.fromPartial(j.project):void 0,Pt}};function qs(){return{collectionId:"",projectId:"",broadcastId:"",phase:void 0,error:void 0}}a.ProjectBroadcastStateEvent={encode(j,at=b.default.Writer.create()){return j.collectionId!==""&&at.uint32(10).string(j.collectionId),j.projectId!==""&&at.uint32(18).string(j.projectId),j.broadcastId!==""&&at.uint32(26).string(j.broadcastId),j.phase!==void 0&&at.uint32(32).int32(Tr(j.phase)),j.error!==void 0&&at.uint32(40).int32(Cr(j.error)),at},decode(j,at){const ct=j instanceof b.default.Reader?j:new b.default.Reader(j);let Yt=at===void 0?ct.len:ct.pos+at;const Pt=qs();for(;ct.pos<Yt;){const Xt=ct.uint32();switch(Xt>>>3){case 1:Pt.collectionId=ct.string();break;case 2:Pt.projectId=ct.string();break;case 3:Pt.broadcastId=ct.string();break;case 4:Pt.phase=dr(ct.int32());break;case 5:Pt.error=Sr(ct.int32());break;default:ct.skipType(Xt&7);break}}return Pt},fromJSON(j){return{collectionId:lr(j.collectionId)?String(j.collectionId):"",projectId:lr(j.projectId)?String(j.projectId):"",broadcastId:lr(j.broadcastId)?String(j.broadcastId):"",phase:lr(j.phase)?dr(j.phase):void 0,error:lr(j.error)?Sr(j.error):void 0}},toJSON(j){const at={};return j.collectionId!==void 0&&(at.collectionId=j.collectionId),j.projectId!==void 0&&(at.projectId=j.projectId),j.broadcastId!==void 0&&(at.broadcastId=j.broadcastId),j.phase!==void 0&&(at.phase=j.phase!==void 0?Er(j.phase):void 0),j.error!==void 0&&(at.error=j.error!==void 0?Or(j.error):void 0),at},fromPartial(j){var at,ct,Yt,Pt,Xt;const Kr=qs();return Kr.collectionId=(at=j.collectionId)!==null&&at!==void 0?at:"",Kr.projectId=(ct=j.projectId)!==null&&ct!==void 0?ct:"",Kr.broadcastId=(Yt=j.broadcastId)!==null&&Yt!==void 0?Yt:"",Kr.phase=(Pt=j.phase)!==null&&Pt!==void 0?Pt:void 0,Kr.error=(Xt=j.error)!==null&&Xt!==void 0?Xt:void 0,Kr}};function Vs(){return{collectionId:"",collection:void 0}}a.CollectionCreateEvent={encode(j,at=b.default.Writer.create()){return j.collectionId!==""&&at.uint32(10).string(j.collectionId),j.collection!==void 0&&a.Collection.encode(j.collection,at.uint32(18).fork()).ldelim(),at},decode(j,at){const ct=j instanceof b.default.Reader?j:new b.default.Reader(j);let Yt=at===void 0?ct.len:ct.pos+at;const Pt=Vs();for(;ct.pos<Yt;){const Xt=ct.uint32();switch(Xt>>>3){case 1:Pt.collectionId=ct.string();break;case 2:Pt.collection=a.Collection.decode(ct,ct.uint32());break;default:ct.skipType(Xt&7);break}}return Pt},fromJSON(j){return{collectionId:lr(j.collectionId)?String(j.collectionId):"",collection:lr(j.collection)?a.Collection.fromJSON(j.collection):void 0}},toJSON(j){const at={};return j.collectionId!==void 0&&(at.collectionId=j.collectionId),j.collection!==void 0&&(at.collection=j.collection?a.Collection.toJSON(j.collection):void 0),at},fromPartial(j){var at;const ct=Vs();return ct.collectionId=(at=j.collectionId)!==null&&at!==void 0?at:"",ct.collection=j.collection!==void 0&&j.collection!==null?a.Collection.fromPartial(j.collection):void 0,ct}};function Js(){return{collectionId:""}}a.CollectionDeleteEvent={encode(j,at=b.default.Writer.create()){return j.collectionId!==""&&at.uint32(10).string(j.collectionId),at},decode(j,at){const ct=j instanceof b.default.Reader?j:new b.default.Reader(j);let Yt=at===void 0?ct.len:ct.pos+at;const Pt=Js();for(;ct.pos<Yt;){const Xt=ct.uint32();switch(Xt>>>3){case 1:Pt.collectionId=ct.string();break;default:ct.skipType(Xt&7);break}}return Pt},fromJSON(j){return{collectionId:lr(j.collectionId)?String(j.collectionId):""}},toJSON(j){const at={};return j.collectionId!==void 0&&(at.collectionId=j.collectionId),at},fromPartial(j){var at;const ct=Js();return ct.collectionId=(at=j.collectionId)!==null&&at!==void 0?at:"",ct}};function Gs(){return{collectionId:"",updateMask:[],collection:void 0}}a.CollectionUpdateEvent={encode(j,at=b.default.Writer.create()){j.collectionId!==""&&at.uint32(10).string(j.collectionId);for(const ct of j.updateMask)at.uint32(18).string(ct);return j.collection!==void 0&&a.Collection.encode(j.collection,at.uint32(26).fork()).ldelim(),at},decode(j,at){const ct=j instanceof b.default.Reader?j:new b.default.Reader(j);let Yt=at===void 0?ct.len:ct.pos+at;const Pt=Gs();for(;ct.pos<Yt;){const Xt=ct.uint32();switch(Xt>>>3){case 1:Pt.collectionId=ct.string();break;case 2:Pt.updateMask.push(ct.string());break;case 3:Pt.collection=a.Collection.decode(ct,ct.uint32());break;default:ct.skipType(Xt&7);break}}return Pt},fromJSON(j){return{collectionId:lr(j.collectionId)?String(j.collectionId):"",updateMask:Array.isArray(j==null?void 0:j.updateMask)?j.updateMask.map(at=>String(at)):[],collection:lr(j.collection)?a.Collection.fromJSON(j.collection):void 0}},toJSON(j){const at={};return j.collectionId!==void 0&&(at.collectionId=j.collectionId),j.updateMask?at.updateMask=j.updateMask.map(ct=>ct):at.updateMask=[],j.collection!==void 0&&(at.collection=j.collection?a.Collection.toJSON(j.collection):void 0),at},fromPartial(j){var at,ct;const Yt=Gs();return Yt.collectionId=(at=j.collectionId)!==null&&at!==void 0?at:"",Yt.updateMask=((ct=j.updateMask)===null||ct===void 0?void 0:ct.map(Pt=>Pt))||[],Yt.collection=j.collection!==void 0&&j.collection!==null?a.Collection.fromPartial(j.collection):void 0,Yt}};function Ws(){return{collectionId:"",sourceId:"",source:void 0}}a.SourceCreateEvent={encode(j,at=b.default.Writer.create()){return j.collectionId!==""&&at.uint32(10).string(j.collectionId),j.sourceId!==""&&at.uint32(18).string(j.sourceId),j.source!==void 0&&a.Source.encode(j.source,at.uint32(26).fork()).ldelim(),at},decode(j,at){const ct=j instanceof b.default.Reader?j:new b.default.Reader(j);let Yt=at===void 0?ct.len:ct.pos+at;const Pt=Ws();for(;ct.pos<Yt;){const Xt=ct.uint32();switch(Xt>>>3){case 1:Pt.collectionId=ct.string();break;case 2:Pt.sourceId=ct.string();break;case 3:Pt.source=a.Source.decode(ct,ct.uint32());break;default:ct.skipType(Xt&7);break}}return Pt},fromJSON(j){return{collectionId:lr(j.collectionId)?String(j.collectionId):"",sourceId:lr(j.sourceId)?String(j.sourceId):"",source:lr(j.source)?a.Source.fromJSON(j.source):void 0}},toJSON(j){const at={};return j.collectionId!==void 0&&(at.collectionId=j.collectionId),j.sourceId!==void 0&&(at.sourceId=j.sourceId),j.source!==void 0&&(at.source=j.source?a.Source.toJSON(j.source):void 0),at},fromPartial(j){var at,ct;const Yt=Ws();return Yt.collectionId=(at=j.collectionId)!==null&&at!==void 0?at:"",Yt.sourceId=(ct=j.sourceId)!==null&&ct!==void 0?ct:"",Yt.source=j.source!==void 0&&j.source!==null?a.Source.fromPartial(j.source):void 0,Yt}};function Hs(){return{collectionId:"",sourceId:""}}a.SourceDeleteEvent={encode(j,at=b.default.Writer.create()){return j.collectionId!==""&&at.uint32(10).string(j.collectionId),j.sourceId!==""&&at.uint32(18).string(j.sourceId),at},decode(j,at){const ct=j instanceof b.default.Reader?j:new b.default.Reader(j);let Yt=at===void 0?ct.len:ct.pos+at;const Pt=Hs();for(;ct.pos<Yt;){const Xt=ct.uint32();switch(Xt>>>3){case 1:Pt.collectionId=ct.string();break;case 2:Pt.sourceId=ct.string();break;default:ct.skipType(Xt&7);break}}return Pt},fromJSON(j){return{collectionId:lr(j.collectionId)?String(j.collectionId):"",sourceId:lr(j.sourceId)?String(j.sourceId):""}},toJSON(j){const at={};return j.collectionId!==void 0&&(at.collectionId=j.collectionId),j.sourceId!==void 0&&(at.sourceId=j.sourceId),at},fromPartial(j){var at,ct;const Yt=Hs();return Yt.collectionId=(at=j.collectionId)!==null&&at!==void 0?at:"",Yt.sourceId=(ct=j.sourceId)!==null&&ct!==void 0?ct:"",Yt}};function zs(){return{collectionId:"",sourceId:"",updateMask:[],source:void 0}}a.SourceUpdateEvent={encode(j,at=b.default.Writer.create()){j.collectionId!==""&&at.uint32(10).string(j.collectionId),j.sourceId!==""&&at.uint32(18).string(j.sourceId);for(const ct of j.updateMask)at.uint32(26).string(ct);return j.source!==void 0&&a.Source.encode(j.source,at.uint32(34).fork()).ldelim(),at},decode(j,at){const ct=j instanceof b.default.Reader?j:new b.default.Reader(j);let Yt=at===void 0?ct.len:ct.pos+at;const Pt=zs();for(;ct.pos<Yt;){const Xt=ct.uint32();switch(Xt>>>3){case 1:Pt.collectionId=ct.string();break;case 2:Pt.sourceId=ct.string();break;case 3:Pt.updateMask.push(ct.string());break;case 4:Pt.source=a.Source.decode(ct,ct.uint32());break;default:ct.skipType(Xt&7);break}}return Pt},fromJSON(j){return{collectionId:lr(j.collectionId)?String(j.collectionId):"",sourceId:lr(j.sourceId)?String(j.sourceId):"",updateMask:Array.isArray(j==null?void 0:j.updateMask)?j.updateMask.map(at=>String(at)):[],source:lr(j.source)?a.Source.fromJSON(j.source):void 0}},toJSON(j){const at={};return j.collectionId!==void 0&&(at.collectionId=j.collectionId),j.sourceId!==void 0&&(at.sourceId=j.sourceId),j.updateMask?at.updateMask=j.updateMask.map(ct=>ct):at.updateMask=[],j.source!==void 0&&(at.source=j.source?a.Source.toJSON(j.source):void 0),at},fromPartial(j){var at,ct,Yt;const Pt=zs();return Pt.collectionId=(at=j.collectionId)!==null&&at!==void 0?at:"",Pt.sourceId=(ct=j.sourceId)!==null&&ct!==void 0?ct:"",Pt.updateMask=((Yt=j.updateMask)===null||Yt===void 0?void 0:Yt.map(Xt=>Xt))||[],Pt.source=j.source!==void 0&&j.source!==null?a.Source.fromPartial(j.source):void 0,Pt}};function Ks(){return{collectionId:"",sourceId:"",projectId:"",source:void 0}}a.SourceAddEvent={encode(j,at=b.default.Writer.create()){return j.collectionId!==""&&at.uint32(10).string(j.collectionId),j.sourceId!==""&&at.uint32(18).string(j.sourceId),j.projectId!==""&&at.uint32(26).string(j.projectId),j.source!==void 0&&a.Source.encode(j.source,at.uint32(34).fork()).ldelim(),at},decode(j,at){const ct=j instanceof b.default.Reader?j:new b.default.Reader(j);let Yt=at===void 0?ct.len:ct.pos+at;const Pt=Ks();for(;ct.pos<Yt;){const Xt=ct.uint32();switch(Xt>>>3){case 1:Pt.collectionId=ct.string();break;case 2:Pt.sourceId=ct.string();break;case 3:Pt.projectId=ct.string();break;case 4:Pt.source=a.Source.decode(ct,ct.uint32());break;default:ct.skipType(Xt&7);break}}return Pt},fromJSON(j){return{collectionId:lr(j.collectionId)?String(j.collectionId):"",sourceId:lr(j.sourceId)?String(j.sourceId):"",projectId:lr(j.projectId)?String(j.projectId):"",source:lr(j.source)?a.Source.fromJSON(j.source):void 0}},toJSON(j){const at={};return j.collectionId!==void 0&&(at.collectionId=j.collectionId),j.sourceId!==void 0&&(at.sourceId=j.sourceId),j.projectId!==void 0&&(at.projectId=j.projectId),j.source!==void 0&&(at.source=j.source?a.Source.toJSON(j.source):void 0),at},fromPartial(j){var at,ct,Yt;const Pt=Ks();return Pt.collectionId=(at=j.collectionId)!==null&&at!==void 0?at:"",Pt.sourceId=(ct=j.sourceId)!==null&&ct!==void 0?ct:"",Pt.projectId=(Yt=j.projectId)!==null&&Yt!==void 0?Yt:"",Pt.source=j.source!==void 0&&j.source!==null?a.Source.fromPartial(j.source):void 0,Pt}};function Ys(){return{collectionId:"",sourceId:"",projectId:""}}a.SourceRemoveEvent={encode(j,at=b.default.Writer.create()){return j.collectionId!==""&&at.uint32(10).string(j.collectionId),j.sourceId!==""&&at.uint32(18).string(j.sourceId),j.projectId!==""&&at.uint32(26).string(j.projectId),at},decode(j,at){const ct=j instanceof b.default.Reader?j:new b.default.Reader(j);let Yt=at===void 0?ct.len:ct.pos+at;const Pt=Ys();for(;ct.pos<Yt;){const Xt=ct.uint32();switch(Xt>>>3){case 1:Pt.collectionId=ct.string();break;case 2:Pt.sourceId=ct.string();break;case 3:Pt.projectId=ct.string();break;default:ct.skipType(Xt&7);break}}return Pt},fromJSON(j){return{collectionId:lr(j.collectionId)?String(j.collectionId):"",sourceId:lr(j.sourceId)?String(j.sourceId):"",projectId:lr(j.projectId)?String(j.projectId):""}},toJSON(j){const at={};return j.collectionId!==void 0&&(at.collectionId=j.collectionId),j.sourceId!==void 0&&(at.sourceId=j.sourceId),j.projectId!==void 0&&(at.projectId=j.projectId),at},fromPartial(j){var at,ct,Yt;const Pt=Ys();return Pt.collectionId=(at=j.collectionId)!==null&&at!==void 0?at:"",Pt.sourceId=(ct=j.sourceId)!==null&&ct!==void 0?ct:"",Pt.projectId=(Yt=j.projectId)!==null&&Yt!==void 0?Yt:"",Pt}};function Zs(){return{collectionId:"",projectId:"",sourceId:"",connect:void 0}}a.SourceStateEvent={encode(j,at=b.default.Writer.create()){return j.collectionId!==""&&at.uint32(10).string(j.collectionId),j.projectId!==""&&at.uint32(18).string(j.projectId),j.sourceId!==""&&at.uint32(26).string(j.sourceId),j.connect!==void 0&&at.uint32(32).int32(yr(j.connect)),at},decode(j,at){const ct=j instanceof b.default.Reader?j:new b.default.Reader(j);let Yt=at===void 0?ct.len:ct.pos+at;const Pt=Zs();for(;ct.pos<Yt;){const Xt=ct.uint32();switch(Xt>>>3){case 1:Pt.collectionId=ct.string();break;case 2:Pt.projectId=ct.string();break;case 3:Pt.sourceId=ct.string();break;case 4:Pt.connect=Bt(ct.int32());break;default:ct.skipType(Xt&7);break}}return Pt},fromJSON(j){return{collectionId:lr(j.collectionId)?String(j.collectionId):"",projectId:lr(j.projectId)?String(j.projectId):"",sourceId:lr(j.sourceId)?String(j.sourceId):"",connect:lr(j.connect)?Bt(j.connect):void 0}},toJSON(j){const at={};return j.collectionId!==void 0&&(at.collectionId=j.collectionId),j.projectId!==void 0&&(at.projectId=j.projectId),j.sourceId!==void 0&&(at.sourceId=j.sourceId),j.connect!==void 0&&(at.connect=j.connect!==void 0?Zt(j.connect):void 0),at},fromPartial(j){var at,ct,Yt,Pt;const Xt=Zs();return Xt.collectionId=(at=j.collectionId)!==null&&at!==void 0?at:"",Xt.projectId=(ct=j.projectId)!==null&&ct!==void 0?ct:"",Xt.sourceId=(Yt=j.sourceId)!==null&&Yt!==void 0?Yt:"",Xt.connect=(Pt=j.connect)!==null&&Pt!==void 0?Pt:void 0,Xt}};function Qs(){return{create:void 0,update:void 0,delete:void 0}}a.CollectionEvent={encode(j,at=b.default.Writer.create()){return j.create!==void 0&&a.CollectionCreateEvent.encode(j.create,at.uint32(10).fork()).ldelim(),j.update!==void 0&&a.CollectionUpdateEvent.encode(j.update,at.uint32(18).fork()).ldelim(),j.delete!==void 0&&a.CollectionDeleteEvent.encode(j.delete,at.uint32(26).fork()).ldelim(),at},decode(j,at){const ct=j instanceof b.default.Reader?j:new b.default.Reader(j);let Yt=at===void 0?ct.len:ct.pos+at;const Pt=Qs();for(;ct.pos<Yt;){const Xt=ct.uint32();switch(Xt>>>3){case 1:Pt.create=a.CollectionCreateEvent.decode(ct,ct.uint32());break;case 2:Pt.update=a.CollectionUpdateEvent.decode(ct,ct.uint32());break;case 3:Pt.delete=a.CollectionDeleteEvent.decode(ct,ct.uint32());break;default:ct.skipType(Xt&7);break}}return Pt},fromJSON(j){return{create:lr(j.create)?a.CollectionCreateEvent.fromJSON(j.create):void 0,update:lr(j.update)?a.CollectionUpdateEvent.fromJSON(j.update):void 0,delete:lr(j.delete)?a.CollectionDeleteEvent.fromJSON(j.delete):void 0}},toJSON(j){const at={};return j.create!==void 0&&(at.create=j.create?a.CollectionCreateEvent.toJSON(j.create):void 0),j.update!==void 0&&(at.update=j.update?a.CollectionUpdateEvent.toJSON(j.update):void 0),j.delete!==void 0&&(at.delete=j.delete?a.CollectionDeleteEvent.toJSON(j.delete):void 0),at},fromPartial(j){const at=Qs();return at.create=j.create!==void 0&&j.create!==null?a.CollectionCreateEvent.fromPartial(j.create):void 0,at.update=j.update!==void 0&&j.update!==null?a.CollectionUpdateEvent.fromPartial(j.update):void 0,at.delete=j.delete!==void 0&&j.delete!==null?a.CollectionDeleteEvent.fromPartial(j.delete):void 0,at}};function Xs(){return{create:void 0,update:void 0,delete:void 0,state:void 0}}a.DestinationEvent={encode(j,at=b.default.Writer.create()){return j.create!==void 0&&a.DestinationCreateEvent.encode(j.create,at.uint32(10).fork()).ldelim(),j.update!==void 0&&a.DestinationUpdateEvent.encode(j.update,at.uint32(18).fork()).ldelim(),j.delete!==void 0&&a.DestinationDeleteEvent.encode(j.delete,at.uint32(26).fork()).ldelim(),j.state!==void 0&&a.DestinationStateEvent.encode(j.state,at.uint32(34).fork()).ldelim(),at},decode(j,at){const ct=j instanceof b.default.Reader?j:new b.default.Reader(j);let Yt=at===void 0?ct.len:ct.pos+at;const Pt=Xs();for(;ct.pos<Yt;){const Xt=ct.uint32();switch(Xt>>>3){case 1:Pt.create=a.DestinationCreateEvent.decode(ct,ct.uint32());break;case 2:Pt.update=a.DestinationUpdateEvent.decode(ct,ct.uint32());break;case 3:Pt.delete=a.DestinationDeleteEvent.decode(ct,ct.uint32());break;case 4:Pt.state=a.DestinationStateEvent.decode(ct,ct.uint32());break;default:ct.skipType(Xt&7);break}}return Pt},fromJSON(j){return{create:lr(j.create)?a.DestinationCreateEvent.fromJSON(j.create):void 0,update:lr(j.update)?a.DestinationUpdateEvent.fromJSON(j.update):void 0,delete:lr(j.delete)?a.DestinationDeleteEvent.fromJSON(j.delete):void 0,state:lr(j.state)?a.DestinationStateEvent.fromJSON(j.state):void 0}},toJSON(j){const at={};return j.create!==void 0&&(at.create=j.create?a.DestinationCreateEvent.toJSON(j.create):void 0),j.update!==void 0&&(at.update=j.update?a.DestinationUpdateEvent.toJSON(j.update):void 0),j.delete!==void 0&&(at.delete=j.delete?a.DestinationDeleteEvent.toJSON(j.delete):void 0),j.state!==void 0&&(at.state=j.state?a.DestinationStateEvent.toJSON(j.state):void 0),at},fromPartial(j){const at=Xs();return at.create=j.create!==void 0&&j.create!==null?a.DestinationCreateEvent.fromPartial(j.create):void 0,at.update=j.update!==void 0&&j.update!==null?a.DestinationUpdateEvent.fromPartial(j.update):void 0,at.delete=j.delete!==void 0&&j.delete!==null?a.DestinationDeleteEvent.fromPartial(j.delete):void 0,at.state=j.state!==void 0&&j.state!==null?a.DestinationStateEvent.fromPartial(j.state):void 0,at}};function js(){return{create:void 0,update:void 0,delete:void 0,state:void 0}}a.ProjectEvent={encode(j,at=b.default.Writer.create()){return j.create!==void 0&&a.ProjectCreateEvent.encode(j.create,at.uint32(10).fork()).ldelim(),j.update!==void 0&&a.ProjectUpdateEvent.encode(j.update,at.uint32(18).fork()).ldelim(),j.delete!==void 0&&a.ProjectDeleteEvent.encode(j.delete,at.uint32(26).fork()).ldelim(),j.state!==void 0&&a.ProjectBroadcastStateEvent.encode(j.state,at.uint32(34).fork()).ldelim(),at},decode(j,at){const ct=j instanceof b.default.Reader?j:new b.default.Reader(j);let Yt=at===void 0?ct.len:ct.pos+at;const Pt=js();for(;ct.pos<Yt;){const Xt=ct.uint32();switch(Xt>>>3){case 1:Pt.create=a.ProjectCreateEvent.decode(ct,ct.uint32());break;case 2:Pt.update=a.ProjectUpdateEvent.decode(ct,ct.uint32());break;case 3:Pt.delete=a.ProjectDeleteEvent.decode(ct,ct.uint32());break;case 4:Pt.state=a.ProjectBroadcastStateEvent.decode(ct,ct.uint32());break;default:ct.skipType(Xt&7);break}}return Pt},fromJSON(j){return{create:lr(j.create)?a.ProjectCreateEvent.fromJSON(j.create):void 0,update:lr(j.update)?a.ProjectUpdateEvent.fromJSON(j.update):void 0,delete:lr(j.delete)?a.ProjectDeleteEvent.fromJSON(j.delete):void 0,state:lr(j.state)?a.ProjectBroadcastStateEvent.fromJSON(j.state):void 0}},toJSON(j){const at={};return j.create!==void 0&&(at.create=j.create?a.ProjectCreateEvent.toJSON(j.create):void 0),j.update!==void 0&&(at.update=j.update?a.ProjectUpdateEvent.toJSON(j.update):void 0),j.delete!==void 0&&(at.delete=j.delete?a.ProjectDeleteEvent.toJSON(j.delete):void 0),j.state!==void 0&&(at.state=j.state?a.ProjectBroadcastStateEvent.toJSON(j.state):void 0),at},fromPartial(j){const at=js();return at.create=j.create!==void 0&&j.create!==null?a.ProjectCreateEvent.fromPartial(j.create):void 0,at.update=j.update!==void 0&&j.update!==null?a.ProjectUpdateEvent.fromPartial(j.update):void 0,at.delete=j.delete!==void 0&&j.delete!==null?a.ProjectDeleteEvent.fromPartial(j.delete):void 0,at.state=j.state!==void 0&&j.state!==null?a.ProjectBroadcastStateEvent.fromPartial(j.state):void 0,at}};function eu(){return{create:void 0,update:void 0,delete:void 0,add:void 0,remove:void 0,state:void 0}}a.SourceEvent={encode(j,at=b.default.Writer.create()){return j.create!==void 0&&a.SourceCreateEvent.encode(j.create,at.uint32(10).fork()).ldelim(),j.update!==void 0&&a.SourceUpdateEvent.encode(j.update,at.uint32(18).fork()).ldelim(),j.delete!==void 0&&a.SourceDeleteEvent.encode(j.delete,at.uint32(26).fork()).ldelim(),j.add!==void 0&&a.SourceAddEvent.encode(j.add,at.uint32(34).fork()).ldelim(),j.remove!==void 0&&a.SourceRemoveEvent.encode(j.remove,at.uint32(42).fork()).ldelim(),j.state!==void 0&&a.SourceStateEvent.encode(j.state,at.uint32(50).fork()).ldelim(),at},decode(j,at){const ct=j instanceof b.default.Reader?j:new b.default.Reader(j);let Yt=at===void 0?ct.len:ct.pos+at;const Pt=eu();for(;ct.pos<Yt;){const Xt=ct.uint32();switch(Xt>>>3){case 1:Pt.create=a.SourceCreateEvent.decode(ct,ct.uint32());break;case 2:Pt.update=a.SourceUpdateEvent.decode(ct,ct.uint32());break;case 3:Pt.delete=a.SourceDeleteEvent.decode(ct,ct.uint32());break;case 4:Pt.add=a.SourceAddEvent.decode(ct,ct.uint32());break;case 5:Pt.remove=a.SourceRemoveEvent.decode(ct,ct.uint32());break;case 6:Pt.state=a.SourceStateEvent.decode(ct,ct.uint32());break;default:ct.skipType(Xt&7);break}}return Pt},fromJSON(j){return{create:lr(j.create)?a.SourceCreateEvent.fromJSON(j.create):void 0,update:lr(j.update)?a.SourceUpdateEvent.fromJSON(j.update):void 0,delete:lr(j.delete)?a.SourceDeleteEvent.fromJSON(j.delete):void 0,add:lr(j.add)?a.SourceAddEvent.fromJSON(j.add):void 0,remove:lr(j.remove)?a.SourceRemoveEvent.fromJSON(j.remove):void 0,state:lr(j.state)?a.SourceStateEvent.fromJSON(j.state):void 0}},toJSON(j){const at={};return j.create!==void 0&&(at.create=j.create?a.SourceCreateEvent.toJSON(j.create):void 0),j.update!==void 0&&(at.update=j.update?a.SourceUpdateEvent.toJSON(j.update):void 0),j.delete!==void 0&&(at.delete=j.delete?a.SourceDeleteEvent.toJSON(j.delete):void 0),j.add!==void 0&&(at.add=j.add?a.SourceAddEvent.toJSON(j.add):void 0),j.remove!==void 0&&(at.remove=j.remove?a.SourceRemoveEvent.toJSON(j.remove):void 0),j.state!==void 0&&(at.state=j.state?a.SourceStateEvent.toJSON(j.state):void 0),at},fromPartial(j){const at=eu();return at.create=j.create!==void 0&&j.create!==null?a.SourceCreateEvent.fromPartial(j.create):void 0,at.update=j.update!==void 0&&j.update!==null?a.SourceUpdateEvent.fromPartial(j.update):void 0,at.delete=j.delete!==void 0&&j.delete!==null?a.SourceDeleteEvent.fromPartial(j.delete):void 0,at.add=j.add!==void 0&&j.add!==null?a.SourceAddEvent.fromPartial(j.add):void 0,at.remove=j.remove!==void 0&&j.remove!==null?a.SourceRemoveEvent.fromPartial(j.remove):void 0,at.state=j.state!==void 0&&j.state!==null?a.SourceStateEvent.fromPartial(j.state):void 0,at}};function tu(){return{collection:void 0,destination:void 0,project:void 0,source:void 0,unspecified:void 0}}a.LiveEvent={encode(j,at=b.default.Writer.create()){return j.collection!==void 0&&a.CollectionEvent.encode(j.collection,at.uint32(10).fork()).ldelim(),j.destination!==void 0&&a.DestinationEvent.encode(j.destination,at.uint32(18).fork()).ldelim(),j.project!==void 0&&a.ProjectEvent.encode(j.project,at.uint32(26).fork()).ldelim(),j.source!==void 0&&a.SourceEvent.encode(j.source,at.uint32(34).fork()).ldelim(),j.unspecified!==void 0&&at.uint32(40).int32((0,k.nullValueToNumber)(j.unspecified)),at},decode(j,at){const ct=j instanceof b.default.Reader?j:new b.default.Reader(j);let Yt=at===void 0?ct.len:ct.pos+at;const Pt=tu();for(;ct.pos<Yt;){const Xt=ct.uint32();switch(Xt>>>3){case 1:Pt.collection=a.CollectionEvent.decode(ct,ct.uint32());break;case 2:Pt.destination=a.DestinationEvent.decode(ct,ct.uint32());break;case 3:Pt.project=a.ProjectEvent.decode(ct,ct.uint32());break;case 4:Pt.source=a.SourceEvent.decode(ct,ct.uint32());break;case 5:Pt.unspecified=(0,k.nullValueFromJSON)(ct.int32());break;default:ct.skipType(Xt&7);break}}return Pt},fromJSON(j){return{collection:lr(j.collection)?a.CollectionEvent.fromJSON(j.collection):void 0,destination:lr(j.destination)?a.DestinationEvent.fromJSON(j.destination):void 0,project:lr(j.project)?a.ProjectEvent.fromJSON(j.project):void 0,source:lr(j.source)?a.SourceEvent.fromJSON(j.source):void 0,unspecified:lr(j.unspecified)?(0,k.nullValueFromJSON)(j.unspecified):void 0}},toJSON(j){const at={};return j.collection!==void 0&&(at.collection=j.collection?a.CollectionEvent.toJSON(j.collection):void 0),j.destination!==void 0&&(at.destination=j.destination?a.DestinationEvent.toJSON(j.destination):void 0),j.project!==void 0&&(at.project=j.project?a.ProjectEvent.toJSON(j.project):void 0),j.source!==void 0&&(at.source=j.source?a.SourceEvent.toJSON(j.source):void 0),j.unspecified!==void 0&&(at.unspecified=j.unspecified!==void 0?(0,k.nullValueToJSON)(j.unspecified):void 0),at},fromPartial(j){var at;const ct=tu();return ct.collection=j.collection!==void 0&&j.collection!==null?a.CollectionEvent.fromPartial(j.collection):void 0,ct.destination=j.destination!==void 0&&j.destination!==null?a.DestinationEvent.fromPartial(j.destination):void 0,ct.project=j.project!==void 0&&j.project!==null?a.ProjectEvent.fromPartial(j.project):void 0,ct.source=j.source!==void 0&&j.source!==null?a.SourceEvent.fromPartial(j.source):void 0,ct.unspecified=(at=j.unspecified)!==null&&at!==void 0?at:void 0,ct}};function ru(){return{}}a.GetServiceRequest={encode(j,at=b.default.Writer.create()){return at},decode(j,at){const ct=j instanceof b.default.Reader?j:new b.default.Reader(j);let Yt=at===void 0?ct.len:ct.pos+at;const Pt=ru();for(;ct.pos<Yt;){const Xt=ct.uint32();switch(Xt>>>3){default:ct.skipType(Xt&7);break}}return Pt},fromJSON(j){return{}},toJSON(j){return{}},fromPartial(j){return ru()}};function nu(){return{serviceName:"",serviceId:"",enabled:!1,demo:!1}}a.Service={encode(j,at=b.default.Writer.create()){return j.serviceName!==""&&at.uint32(18).string(j.serviceName),j.serviceId!==""&&at.uint32(26).string(j.serviceId),j.enabled===!0&&at.uint32(72).bool(j.enabled),j.demo===!0&&at.uint32(88).bool(j.demo),at},decode(j,at){const ct=j instanceof b.default.Reader?j:new b.default.Reader(j);let Yt=at===void 0?ct.len:ct.pos+at;const Pt=nu();for(;ct.pos<Yt;){const Xt=ct.uint32();switch(Xt>>>3){case 2:Pt.serviceName=ct.string();break;case 3:Pt.serviceId=ct.string();break;case 9:Pt.enabled=ct.bool();break;case 11:Pt.demo=ct.bool();break;default:ct.skipType(Xt&7);break}}return Pt},fromJSON(j){return{serviceName:lr(j.serviceName)?String(j.serviceName):"",serviceId:lr(j.serviceId)?String(j.serviceId):"",enabled:lr(j.enabled)?!!j.enabled:!1,demo:lr(j.demo)?!!j.demo:!1}},toJSON(j){const at={};return j.serviceName!==void 0&&(at.serviceName=j.serviceName),j.serviceId!==void 0&&(at.serviceId=j.serviceId),j.enabled!==void 0&&(at.enabled=j.enabled),j.demo!==void 0&&(at.demo=j.demo),at},fromPartial(j){var at,ct,Yt,Pt;const Xt=nu();return Xt.serviceName=(at=j.serviceName)!==null&&at!==void 0?at:"",Xt.serviceId=(ct=j.serviceId)!==null&&ct!==void 0?ct:"",Xt.enabled=(Yt=j.enabled)!==null&&Yt!==void 0?Yt:!1,Xt.demo=(Pt=j.demo)!==null&&Pt!==void 0?Pt:!1,Xt}};function iu(){return{service:void 0}}a.GetServiceResponse={encode(j,at=b.default.Writer.create()){return j.service!==void 0&&a.Service.encode(j.service,at.uint32(10).fork()).ldelim(),at},decode(j,at){const ct=j instanceof b.default.Reader?j:new b.default.Reader(j);let Yt=at===void 0?ct.len:ct.pos+at;const Pt=iu();for(;ct.pos<Yt;){const Xt=ct.uint32();switch(Xt>>>3){case 1:Pt.service=a.Service.decode(ct,ct.uint32());break;default:ct.skipType(Xt&7);break}}return Pt},fromJSON(j){return{service:lr(j.service)?a.Service.fromJSON(j.service):void 0}},toJSON(j){const at={};return j.service!==void 0&&(at.service=j.service?a.Service.toJSON(j.service):void 0),at},fromPartial(j){const at=iu();return at.service=j.service!==void 0&&j.service!==null?a.Service.fromPartial(j.service):void 0,at}};class ou{constructor(at,ct){this.service=(ct==null?void 0:ct.service)||"live.v21.AccountConfigurationService",this.rpc=at,this.GetAccountConfiguration=this.GetAccountConfiguration.bind(this),this.UpdateAccountConfiguration=this.UpdateAccountConfiguration.bind(this)}GetAccountConfiguration(at){const ct=a.GetAccountConfigurationRequest.encode(at).finish();return this.rpc.request(this.service,"GetAccountConfiguration",ct).then(Pt=>a.GetAccountConfigurationResponse.decode(new b.default.Reader(Pt)))}UpdateAccountConfiguration(at){const ct=a.UpdateAccountConfigurationRequest.encode(at).finish();return this.rpc.request(this.service,"UpdateAccountConfiguration",ct).then(Pt=>a.UpdateAccountConfigurationResponse.decode(new b.default.Reader(Pt)))}}a.AccountConfigurationServiceClientImpl=ou,a.AccountConfigurationServiceDefinition={name:"AccountConfigurationService",fullName:"live.v21.AccountConfigurationService",methods:{getAccountConfiguration:{name:"GetAccountConfiguration",requestType:a.GetAccountConfigurationRequest,requestStream:!1,responseType:a.GetAccountConfigurationResponse,responseStream:!1,options:{}},updateAccountConfiguration:{name:"UpdateAccountConfiguration",requestType:a.UpdateAccountConfigurationRequest,requestStream:!1,responseType:a.UpdateAccountConfigurationResponse,responseStream:!1,options:{}}}};class su{constructor(at,ct){this.service=(ct==null?void 0:ct.service)||"live.v21.CollectionService",this.rpc=at,this.CreateCollection=this.CreateCollection.bind(this),this.GetCollection=this.GetCollection.bind(this),this.GetCollections=this.GetCollections.bind(this),this.UpdateCollection=this.UpdateCollection.bind(this),this.DeleteCollection=this.DeleteCollection.bind(this)}CreateCollection(at){const ct=a.CreateCollectionRequest.encode(at).finish();return this.rpc.request(this.service,"CreateCollection",ct).then(Pt=>a.CreateCollectionResponse.decode(new b.default.Reader(Pt)))}GetCollection(at){const ct=a.GetCollectionRequest.encode(at).finish();return this.rpc.request(this.service,"GetCollection",ct).then(Pt=>a.GetCollectionResponse.decode(new b.default.Reader(Pt)))}GetCollections(at){const ct=a.GetCollectionsRequest.encode(at).finish();return this.rpc.request(this.service,"GetCollections",ct).then(Pt=>a.GetCollectionsResponse.decode(new b.default.Reader(Pt)))}UpdateCollection(at){const ct=a.UpdateCollectionRequest.encode(at).finish();return this.rpc.request(this.service,"UpdateCollection",ct).then(Pt=>a.UpdateCollectionResponse.decode(new b.default.Reader(Pt)))}DeleteCollection(at){const ct=a.DeleteCollectionRequest.encode(at).finish();return this.rpc.request(this.service,"DeleteCollection",ct).then(Pt=>a.DeleteCollectionResponse.decode(new b.default.Reader(Pt)))}}a.CollectionServiceClientImpl=su,a.CollectionServiceDefinition={name:"CollectionService",fullName:"live.v21.CollectionService",methods:{createCollection:{name:"CreateCollection",requestType:a.CreateCollectionRequest,requestStream:!1,responseType:a.CreateCollectionResponse,responseStream:!1,options:{}},getCollection:{name:"GetCollection",requestType:a.GetCollectionRequest,requestStream:!1,responseType:a.GetCollectionResponse,responseStream:!1,options:{}},getCollections:{name:"GetCollections",requestType:a.GetCollectionsRequest,requestStream:!1,responseType:a.GetCollectionsResponse,responseStream:!1,options:{}},updateCollection:{name:"UpdateCollection",requestType:a.UpdateCollectionRequest,requestStream:!1,responseType:a.UpdateCollectionResponse,responseStream:!1,options:{}},deleteCollection:{name:"DeleteCollection",requestType:a.DeleteCollectionRequest,requestStream:!1,responseType:a.DeleteCollectionResponse,responseStream:!1,options:{}}}};class uu{constructor(at,ct){this.service=(ct==null?void 0:ct.service)||"live.v21.ProjectService",this.rpc=at,this.CreateProject=this.CreateProject.bind(this),this.GetProject=this.GetProject.bind(this),this.DeleteProject=this.DeleteProject.bind(this),this.UpdateProject=this.UpdateProject.bind(this),this.StartProjectBroadcast=this.StartProjectBroadcast.bind(this),this.StopProjectBroadcast=this.StopProjectBroadcast.bind(this),this.StartProjectWebRtc=this.StartProjectWebRtc.bind(this),this.StopProjectWebRtc=this.StopProjectWebRtc.bind(this),this.GetProjectBroadcastSnapshot=this.GetProjectBroadcastSnapshot.bind(this),this.GetProjectBroadcastStatus=this.GetProjectBroadcastStatus.bind(this)}CreateProject(at){const ct=a.CreateProjectRequest.encode(at).finish();return this.rpc.request(this.service,"CreateProject",ct).then(Pt=>a.CreateProjectResponse.decode(new b.default.Reader(Pt)))}GetProject(at){const ct=a.GetProjectRequest.encode(at).finish();return this.rpc.request(this.service,"GetProject",ct).then(Pt=>a.GetProjectResponse.decode(new b.default.Reader(Pt)))}DeleteProject(at){const ct=a.DeleteProjectRequest.encode(at).finish();return this.rpc.request(this.service,"DeleteProject",ct).then(Pt=>a.DeleteProjectResponse.decode(new b.default.Reader(Pt)))}UpdateProject(at){const ct=a.UpdateProjectRequest.encode(at).finish();return this.rpc.request(this.service,"UpdateProject",ct).then(Pt=>a.UpdateProjectResponse.decode(new b.default.Reader(Pt)))}StartProjectBroadcast(at){const ct=a.StartProjectBroadcastRequest.encode(at).finish();return this.rpc.request(this.service,"StartProjectBroadcast",ct).then(Pt=>a.StartProjectBroadcastResponse.decode(new b.default.Reader(Pt)))}StopProjectBroadcast(at){const ct=a.StopProjectBroadcastRequest.encode(at).finish();return this.rpc.request(this.service,"StopProjectBroadcast",ct).then(Pt=>a.StopProjectBroadcastResponse.decode(new b.default.Reader(Pt)))}StartProjectWebRtc(at){const ct=a.StartProjectWebRtcRequest.encode(at).finish();return this.rpc.request(this.service,"StartProjectWebRtc",ct).then(Pt=>a.StartProjectWebRtcResponse.decode(new b.default.Reader(Pt)))}StopProjectWebRtc(at){const ct=a.StopProjectWebRtcRequest.encode(at).finish();return this.rpc.request(this.service,"StopProjectWebRtc",ct).then(Pt=>a.StopProjectWebRtcResponse.decode(new b.default.Reader(Pt)))}GetProjectBroadcastSnapshot(at){const ct=a.GetProjectBroadcastSnapshotRequest.encode(at).finish();return this.rpc.request(this.service,"GetProjectBroadcastSnapshot",ct).then(Pt=>a.GetProjectBroadcastSnapshotResponse.decode(new b.default.Reader(Pt)))}GetProjectBroadcastStatus(at){const ct=a.GetProjectBroadcastStatusRequest.encode(at).finish();return this.rpc.request(this.service,"GetProjectBroadcastStatus",ct).then(Pt=>a.GetProjectBroadcastStatusResponse.decode(new b.default.Reader(Pt)))}}a.ProjectServiceClientImpl=uu,a.ProjectServiceDefinition={name:"ProjectService",fullName:"live.v21.ProjectService",methods:{createProject:{name:"CreateProject",requestType:a.CreateProjectRequest,requestStream:!1,responseType:a.CreateProjectResponse,responseStream:!1,options:{}},getProject:{name:"GetProject",requestType:a.GetProjectRequest,requestStream:!1,responseType:a.GetProjectResponse,responseStream:!1,options:{}},deleteProject:{name:"DeleteProject",requestType:a.DeleteProjectRequest,requestStream:!1,responseType:a.DeleteProjectResponse,responseStream:!1,options:{}},updateProject:{name:"UpdateProject",requestType:a.UpdateProjectRequest,requestStream:!1,responseType:a.UpdateProjectResponse,responseStream:!1,options:{}},startProjectBroadcast:{name:"StartProjectBroadcast",requestType:a.StartProjectBroadcastRequest,requestStream:!1,responseType:a.StartProjectBroadcastResponse,responseStream:!1,options:{}},stopProjectBroadcast:{name:"StopProjectBroadcast",requestType:a.StopProjectBroadcastRequest,requestStream:!1,responseType:a.StopProjectBroadcastResponse,responseStream:!1,options:{}},startProjectWebRtc:{name:"StartProjectWebRtc",requestType:a.StartProjectWebRtcRequest,requestStream:!1,responseType:a.StartProjectWebRtcResponse,responseStream:!1,options:{}},stopProjectWebRtc:{name:"StopProjectWebRtc",requestType:a.StopProjectWebRtcRequest,requestStream:!1,responseType:a.StopProjectWebRtcResponse,responseStream:!1,options:{}},getProjectBroadcastSnapshot:{name:"GetProjectBroadcastSnapshot",requestType:a.GetProjectBroadcastSnapshotRequest,requestStream:!1,responseType:a.GetProjectBroadcastSnapshotResponse,responseStream:!1,options:{}},getProjectBroadcastStatus:{name:"GetProjectBroadcastStatus",requestType:a.GetProjectBroadcastStatusRequest,requestStream:!1,responseType:a.GetProjectBroadcastStatusResponse,responseStream:!1,options:{}}}};class du{constructor(at,ct){this.service=(ct==null?void 0:ct.service)||"live.v21.DestinationService",this.rpc=at,this.CreateDestination=this.CreateDestination.bind(this),this.GetDestination=this.GetDestination.bind(this),this.UpdateDestination=this.UpdateDestination.bind(this),this.DeleteDestination=this.DeleteDestination.bind(this)}CreateDestination(at){const ct=a.CreateDestinationRequest.encode(at).finish();return this.rpc.request(this.service,"CreateDestination",ct).then(Pt=>a.CreateDestinationResponse.decode(new b.default.Reader(Pt)))}GetDestination(at){const ct=a.GetDestinationRequest.encode(at).finish();return this.rpc.request(this.service,"GetDestination",ct).then(Pt=>a.GetDestinationResponse.decode(new b.default.Reader(Pt)))}UpdateDestination(at){const ct=a.UpdateDestinationRequest.encode(at).finish();return this.rpc.request(this.service,"UpdateDestination",ct).then(Pt=>a.UpdateDestinationResponse.decode(new b.default.Reader(Pt)))}DeleteDestination(at){const ct=a.DeleteDestinationRequest.encode(at).finish();return this.rpc.request(this.service,"DeleteDestination",ct).then(Pt=>a.DeleteDestinationResponse.decode(new b.default.Reader(Pt)))}}a.DestinationServiceClientImpl=du,a.DestinationServiceDefinition={name:"DestinationService",fullName:"live.v21.DestinationService",methods:{createDestination:{name:"CreateDestination",requestType:a.CreateDestinationRequest,requestStream:!1,responseType:a.CreateDestinationResponse,responseStream:!1,options:{}},getDestination:{name:"GetDestination",requestType:a.GetDestinationRequest,requestStream:!1,responseType:a.GetDestinationResponse,responseStream:!1,options:{}},updateDestination:{name:"UpdateDestination",requestType:a.UpdateDestinationRequest,requestStream:!1,responseType:a.UpdateDestinationResponse,responseStream:!1,options:{}},deleteDestination:{name:"DeleteDestination",requestType:a.DeleteDestinationRequest,requestStream:!1,responseType:a.DeleteDestinationResponse,responseStream:!1,options:{}}}};class cu{constructor(at,ct){this.service=(ct==null?void 0:ct.service)||"live.v21.SourceService",this.rpc=at,this.CreateSource=this.CreateSource.bind(this),this.DeleteSource=this.DeleteSource.bind(this),this.UpdateSource=this.UpdateSource.bind(this),this.UpdateSourceInProject=this.UpdateSourceInProject.bind(this),this.GetSource=this.GetSource.bind(this),this.GetSources=this.GetSources.bind(this),this.AddSourceToProject=this.AddSourceToProject.bind(this),this.RemoveSourceFromProject=this.RemoveSourceFromProject.bind(this),this.GetSourcePlaylist=this.GetSourcePlaylist.bind(this)}CreateSource(at){const ct=a.CreateSourceRequest.encode(at).finish();return this.rpc.request(this.service,"CreateSource",ct).then(Pt=>a.CreateSourceResponse.decode(new b.default.Reader(Pt)))}DeleteSource(at){const ct=a.DeleteSourceRequest.encode(at).finish();return this.rpc.request(this.service,"DeleteSource",ct).then(Pt=>a.DeleteSourceResponse.decode(new b.default.Reader(Pt)))}UpdateSource(at){const ct=a.UpdateSourceRequest.encode(at).finish();return this.rpc.request(this.service,"UpdateSource",ct).then(Pt=>a.UpdateSourceResponse.decode(new b.default.Reader(Pt)))}UpdateSourceInProject(at){const ct=a.UpdateSourceInProjectRequest.encode(at).finish();return this.rpc.request(this.service,"UpdateSourceInProject",ct).then(Pt=>a.UpdateSourceInProjectResponse.decode(new b.default.Reader(Pt)))}GetSource(at){const ct=a.GetSourceRequest.encode(at).finish();return this.rpc.request(this.service,"GetSource",ct).then(Pt=>a.GetSourceResponse.decode(new b.default.Reader(Pt)))}GetSources(at){const ct=a.GetSourcesRequest.encode(at).finish();return this.rpc.request(this.service,"GetSources",ct).then(Pt=>a.GetSourcesResponse.decode(new b.default.Reader(Pt)))}AddSourceToProject(at){const ct=a.AddSourceToProjectRequest.encode(at).finish();return this.rpc.request(this.service,"AddSourceToProject",ct).then(Pt=>a.AddSourceToProjectResponse.decode(new b.default.Reader(Pt)))}RemoveSourceFromProject(at){const ct=a.RemoveSourceFromProjectRequest.encode(at).finish();return this.rpc.request(this.service,"RemoveSourceFromProject",ct).then(Pt=>a.RemoveSourceFromProjectResponse.decode(new b.default.Reader(Pt)))}GetSourcePlaylist(at){const ct=a.GetSourcePlaylistRequest.encode(at).finish();return this.rpc.request(this.service,"GetSourcePlaylist",ct).then(Pt=>_.HttpBody.decode(new b.default.Reader(Pt)))}}a.SourceServiceClientImpl=cu,a.SourceServiceDefinition={name:"SourceService",fullName:"live.v21.SourceService",methods:{createSource:{name:"CreateSource",requestType:a.CreateSourceRequest,requestStream:!1,responseType:a.CreateSourceResponse,responseStream:!1,options:{}},deleteSource:{name:"DeleteSource",requestType:a.DeleteSourceRequest,requestStream:!1,responseType:a.DeleteSourceResponse,responseStream:!1,options:{}},updateSource:{name:"UpdateSource",requestType:a.UpdateSourceRequest,requestStream:!1,responseType:a.UpdateSourceResponse,responseStream:!1,options:{}},updateSourceInProject:{name:"UpdateSourceInProject",requestType:a.UpdateSourceInProjectRequest,requestStream:!1,responseType:a.UpdateSourceInProjectResponse,responseStream:!1,options:{}},getSource:{name:"GetSource",requestType:a.GetSourceRequest,requestStream:!1,responseType:a.GetSourceResponse,responseStream:!1,options:{}},getSources:{name:"GetSources",requestType:a.GetSourcesRequest,requestStream:!1,responseType:a.GetSourcesResponse,responseStream:!1,options:{}},addSourceToProject:{name:"AddSourceToProject",requestType:a.AddSourceToProjectRequest,requestStream:!1,responseType:a.AddSourceToProjectResponse,responseStream:!1,options:{}},removeSourceFromProject:{name:"RemoveSourceFromProject",requestType:a.RemoveSourceFromProjectRequest,requestStream:!1,responseType:a.RemoveSourceFromProjectResponse,responseStream:!1,options:{}},getSourcePlaylist:{name:"GetSourcePlaylist",requestType:a.GetSourcePlaylistRequest,requestStream:!1,responseType:_.HttpBody,responseStream:!1,options:{}}}};class lu{constructor(at,ct){this.service=(ct==null?void 0:ct.service)||"live.v21.BackendAuthenticationService",this.rpc=at,this.CreateAccessToken=this.CreateAccessToken.bind(this),this.LookupGuestCode=this.LookupGuestCode.bind(this)}CreateAccessToken(at){const ct=a.CreateAccessTokenRequest.encode(at).finish();return this.rpc.request(this.service,"CreateAccessToken",ct).then(Pt=>a.CreateAccessTokenResponse.decode(new b.default.Reader(Pt)))}LookupGuestCode(at){const ct=a.LookupGuestCodeRequest.encode(at).finish();return this.rpc.request(this.service,"LookupGuestCode",ct).then(Pt=>a.LookupGuestCodeResponse.decode(new b.default.Reader(Pt)))}}a.BackendAuthenticationServiceClientImpl=lu,a.BackendAuthenticationServiceDefinition={name:"BackendAuthenticationService",fullName:"live.v21.BackendAuthenticationService",methods:{createAccessToken:{name:"CreateAccessToken",requestType:a.CreateAccessTokenRequest,requestStream:!1,responseType:a.CreateAccessTokenResponse,responseStream:!1,options:{}},lookupGuestCode:{name:"LookupGuestCode",requestType:a.LookupGuestCodeRequest,requestStream:!1,responseType:a.LookupGuestCodeResponse,responseStream:!1,options:{}}}};class fu{constructor(at,ct){this.service=(ct==null?void 0:ct.service)||"live.v21.AuthenticationService",this.rpc=at,this.CreateGuestAccessToken=this.CreateGuestAccessToken.bind(this),this.RefreshAccessToken=this.RefreshAccessToken.bind(this),this.CreateWebRtcAccessToken=this.CreateWebRtcAccessToken.bind(this),this.CreateGuestCode=this.CreateGuestCode.bind(this),this.GetGuestCode=this.GetGuestCode.bind(this),this.GetGuestCodes=this.GetGuestCodes.bind(this),this.DeleteGuestCode=this.DeleteGuestCode.bind(this)}CreateGuestAccessToken(at){const ct=a.CreateGuestAccessTokenRequest.encode(at).finish();return this.rpc.request(this.service,"CreateGuestAccessToken",ct).then(Pt=>a.CreateGuestAccessTokenResponse.decode(new b.default.Reader(Pt)))}RefreshAccessToken(at){const ct=a.RefreshAccessTokenRequest.encode(at).finish();return this.rpc.request(this.service,"RefreshAccessToken",ct).then(Pt=>a.RefreshAccessTokenResponse.decode(new b.default.Reader(Pt)))}CreateWebRtcAccessToken(at){const ct=a.CreateWebRtcAccessTokenRequest.encode(at).finish();return this.rpc.request(this.service,"CreateWebRtcAccessToken",ct).then(Pt=>a.CreateWebRtcAccessTokenResponse.decode(new b.default.Reader(Pt)))}CreateGuestCode(at){const ct=a.CreateGuestCodeRequest.encode(at).finish();return this.rpc.request(this.service,"CreateGuestCode",ct).then(Pt=>a.CreateGuestCodeResponse.decode(new b.default.Reader(Pt)))}GetGuestCode(at){const ct=a.GetGuestCodeRequest.encode(at).finish();return this.rpc.request(this.service,"GetGuestCode",ct).then(Pt=>a.GetGuestCodeResponse.decode(new b.default.Reader(Pt)))}GetGuestCodes(at){const ct=a.GetGuestCodesRequest.encode(at).finish();return this.rpc.request(this.service,"GetGuestCodes",ct).then(Pt=>a.GetGuestCodesResponse.decode(new b.default.Reader(Pt)))}DeleteGuestCode(at){const ct=a.DeleteGuestCodeRequest.encode(at).finish();return this.rpc.request(this.service,"DeleteGuestCode",ct).then(Pt=>a.DeleteGuestCodeResponse.decode(new b.default.Reader(Pt)))}}a.AuthenticationServiceClientImpl=fu,a.AuthenticationServiceDefinition={name:"AuthenticationService",fullName:"live.v21.AuthenticationService",methods:{createGuestAccessToken:{name:"CreateGuestAccessToken",requestType:a.CreateGuestAccessTokenRequest,requestStream:!1,responseType:a.CreateGuestAccessTokenResponse,responseStream:!1,options:{}},refreshAccessToken:{name:"RefreshAccessToken",requestType:a.RefreshAccessTokenRequest,requestStream:!1,responseType:a.RefreshAccessTokenResponse,responseStream:!1,options:{}},createWebRtcAccessToken:{name:"CreateWebRtcAccessToken",requestType:a.CreateWebRtcAccessTokenRequest,requestStream:!1,responseType:a.CreateWebRtcAccessTokenResponse,responseStream:!1,options:{}},createGuestCode:{name:"CreateGuestCode",requestType:a.CreateGuestCodeRequest,requestStream:!1,responseType:a.CreateGuestCodeResponse,responseStream:!1,options:{}},getGuestCode:{name:"GetGuestCode",requestType:a.GetGuestCodeRequest,requestStream:!1,responseType:a.GetGuestCodeResponse,responseStream:!1,options:{}},getGuestCodes:{name:"GetGuestCodes",requestType:a.GetGuestCodesRequest,requestStream:!1,responseType:a.GetGuestCodesResponse,responseStream:!1,options:{}},deleteGuestCode:{name:"DeleteGuestCode",requestType:a.DeleteGuestCodeRequest,requestStream:!1,responseType:a.DeleteGuestCodeResponse,responseStream:!1,options:{}}}};class hu{constructor(at,ct){this.service=(ct==null?void 0:ct.service)||"live.v21.PublicAuthenticationService",this.rpc=at,this.GetJsonWebKeySet=this.GetJsonWebKeySet.bind(this),this.GuestCodeRedirect=this.GuestCodeRedirect.bind(this)}GetJsonWebKeySet(at){const ct=a.GetJsonWebKeySetRequest.encode(at).finish();return this.rpc.request(this.service,"GetJsonWebKeySet",ct).then(Pt=>a.GetJsonWebKeySetResponse.decode(new b.default.Reader(Pt)))}GuestCodeRedirect(at){const ct=a.GuestCodeRedirectRequest.encode(at).finish();return this.rpc.request(this.service,"GuestCodeRedirect",ct).then(Pt=>a.GuestCodeRedirectResponse.decode(new b.default.Reader(Pt)))}}a.PublicAuthenticationServiceClientImpl=hu,a.PublicAuthenticationServiceDefinition={name:"PublicAuthenticationService",fullName:"live.v21.PublicAuthenticationService",methods:{getJsonWebKeySet:{name:"GetJsonWebKeySet",requestType:a.GetJsonWebKeySetRequest,requestStream:!1,responseType:a.GetJsonWebKeySetResponse,responseStream:!1,options:{}},guestCodeRedirect:{name:"GuestCodeRedirect",requestType:a.GuestCodeRedirectRequest,requestStream:!1,responseType:a.GuestCodeRedirectResponse,responseStream:!1,options:{}}}};class pu{constructor(at,ct){this.service=(ct==null?void 0:ct.service)||"live.v21.AccountService",this.rpc=at,this.GetService=this.GetService.bind(this)}GetService(at){const ct=a.GetServiceRequest.encode(at).finish();return this.rpc.request(this.service,"GetService",ct).then(Pt=>a.GetServiceResponse.decode(new b.default.Reader(Pt)))}}a.AccountServiceClientImpl=pu,a.AccountServiceDefinition={name:"AccountService",fullName:"live.v21.AccountService",methods:{getService:{name:"GetService",requestType:a.GetServiceRequest,requestStream:!1,responseType:a.GetServiceResponse,responseStream:!1,options:{}}}};var tn=(()=>{if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof commonjsGlobal$1<"u")return commonjsGlobal$1;throw"Unable to locate global object"})();function mu(j){if(tn.Buffer)return Uint8Array.from(tn.Buffer.from(j,"base64"));{const at=tn.atob(j),ct=new Uint8Array(at.length);for(let Yt=0;Yt<at.length;++Yt)ct[Yt]=at.charCodeAt(Yt);return ct}}function vu(j){if(tn.Buffer)return tn.Buffer.from(j).toString("base64");{const at=[];return j.forEach(ct=>{at.push(String.fromCharCode(ct))}),tn.btoa(at.join(""))}}function Rn(j){const at=new Date(j),ct=at.getTime()/1e3,Yt=at.getTime()%1e3*1e6;return{seconds:ct,nanos:Yt}}function Cn(j){let at=j.seconds*1e3;return at+=j.nanos/1e6,new Date(at).toISOString()}function yu(j){return typeof j=="object"&&j!==null}function lr(j){return j!=null}})(api$2);(function(a){var c=commonjsGlobal$1&&commonjsGlobal$1.__createBinding||(Object.create?function(_t,kt,$t,Tt){Tt===void 0&&(Tt=$t);var At=Object.getOwnPropertyDescriptor(kt,$t);(!At||("get"in At?!kt.__esModule:At.writable||At.configurable))&&(At={enumerable:!0,get:function(){return kt[$t]}}),Object.defineProperty(_t,Tt,At)}:function(_t,kt,$t,Tt){Tt===void 0&&(Tt=$t),_t[Tt]=kt[$t]}),b=commonjsGlobal$1&&commonjsGlobal$1.__setModuleDefault||(Object.create?function(_t,kt){Object.defineProperty(_t,"default",{enumerable:!0,value:kt})}:function(_t,kt){_t.default=kt}),_=commonjsGlobal$1&&commonjsGlobal$1.__decorate||function(_t,kt,$t,Tt){var At=arguments.length,Mt=At<3?kt:Tt===null?Tt=Object.getOwnPropertyDescriptor(kt,$t):Tt,Dt;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")Mt=Reflect.decorate(_t,kt,$t,Tt);else for(var Rt=_t.length-1;Rt>=0;Rt--)(Dt=_t[Rt])&&(Mt=(At<3?Dt(Mt):At>3?Dt(kt,$t,Mt):Dt(kt,$t))||Mt);return At>3&&Mt&&Object.defineProperty(kt,$t,Mt),Mt},$=commonjsGlobal$1&&commonjsGlobal$1.__importStar||function(_t){if(_t&&_t.__esModule)return _t;var kt={};if(_t!=null)for(var $t in _t)$t!=="default"&&Object.prototype.hasOwnProperty.call(_t,$t)&&c(kt,_t,$t);return b(kt,_t),kt},k=commonjsGlobal$1&&commonjsGlobal$1.__metadata||function(_t,kt){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(_t,kt)};Object.defineProperty(a,"__esModule",{value:!0}),a.LiveApi=void 0,$(lib$1);const et=api$3,nt=$(api$2),ot=decorator,ht="LiveApi";class vt extends et.ApiClient{constructor(kt,$t,Tt,At,Mt,Dt,Rt){super(kt,Tt,Dt,ht,Rt,void 0,Mt),this.handlers={},this.eventApi=$t,this.accessTokenRefreshCallback=At,this.publicAuthentication=this.clientFactory.create(nt.PublicAuthenticationServiceDefinition,this.channel),Mt!=null&&(this.backendAuthentication=this.clientFactory.create(nt.BackendAuthenticationServiceDefinition,this.channel,{"*":{metadata:this.makeGrpcMetadataApikey()}}),this.accountConfiguration=this.clientFactory.create(nt.AccountConfigurationServiceDefinition,this.channel,{"*":{metadata:this.makeGrpcMetadataApikey()}}),this.account=this.clientFactory.create(nt.AccountServiceDefinition,this.channel,{"*":{metadata:this.makeGrpcMetadataApikey()}})),this.eventApi.on("event",{name:`${vt.LIVEAPI_EVENT_PREFIX}:*`,ignoreSessionEvents:!0,allowedSessionEvents:[`${vt.LIVEAPI_EVENT_PREFIX}:EVENT_TYPE_PROJECT:EVENT_SUB_TYPE_STATE`]},this.eventCallback.bind(this))}on(kt,$t){var Tt;this.handlers[kt]=(Tt=this.handlers[kt])!==null&&Tt!==void 0?Tt:[],this.handlers[kt].push($t)}off(kt,$t){this.handlers[kt]=this.handlers[kt].filter(Tt=>Tt!==$t)}emitToHandlers(kt,$t,Tt){var At;for(const Mt of(At=this.handlers[kt])!==null&&At!==void 0?At:[])Mt(Object.values(Tt).find(Dt=>!!Dt),$t)}async subscribeToCollection(kt){await this.eventApi.subscribe(`${vt.LIVEAPI_EVENT_PREFIX}:*`,{target:{collectionId:kt}})}async unsubscribeFromCollection(kt){await this.eventApi.unsubscribe(`${vt.LIVEAPI_EVENT_PREFIX}:*`,{target:{collectionId:kt}})}async subscribeToProject(kt,$t){await this.eventApi.subscribe(`${vt.LIVEAPI_EVENT_PREFIX}:*`,{target:{collectionId:kt,projectId:$t}})}async unsubscribeFromProject(kt,$t){await this.eventApi.unsubscribe(`${vt.LIVEAPI_EVENT_PREFIX}:*`,{target:{collectionId:kt,projectId:$t}})}eventCallback(kt){let Tt=kt.name.split(`${vt.LIVEAPI_EVENT_PREFIX}:`)[1].split(":"),At=nt.eventTypeFromJSON(Tt[0]),Mt=nt.eventSubTypeFromJSON(Tt[1]);this.log.info("processing event: "+At+"/"+Mt),vt.liveApiEventMap[At]&&this.emitToHandlers(At,Mt,kt.payload)}_setup(kt){let $t=this;kt.onHeader=function(Tt){let At=Tt.get("Authorization");if(At!=null){const Mt=At.split(" ");if(Mt.length==2&&Mt[0]=="Bearer"){let Dt=Mt[1];$t.log.info("received refresh token"),$t.accessTokenRefreshCallback(Dt)}}},this.collection=this.clientFactory.create(nt.CollectionServiceDefinition,this.channel,{"*":kt}),this.project=this.clientFactory.create(nt.ProjectServiceDefinition,this.channel,{"*":kt}),this.source=this.clientFactory.create(nt.SourceServiceDefinition,this.channel,{"*":kt}),this.destination=this.clientFactory.create(nt.DestinationServiceDefinition,this.channel,{"*":kt}),this.authentication=this.clientFactory.create(nt.AuthenticationServiceDefinition,this.channel,{"*":kt})}}vt.LIVEAPI_EVENT_PREFIX="apistream:live",_([(0,ot.RequiresSdkAuthentication)(),k("design:type",Object)],vt.prototype,"collection",void 0),_([(0,ot.RequiresSdkAuthentication)(),k("design:type",Object)],vt.prototype,"project",void 0),_([(0,ot.RequiresSdkAuthentication)(),k("design:type",Object)],vt.prototype,"source",void 0),_([(0,ot.RequiresSdkAuthentication)(),k("design:type",Object)],vt.prototype,"destination",void 0),_([(0,ot.RequiresSdkAuthentication)(),k("design:type",Object)],vt.prototype,"authentication",void 0),a.LiveApi=vt,function(_t){_t.liveApiEventMap={[nt.EventType.EVENT_TYPE_COLLECTION]:"collection",[nt.EventType.EVENT_TYPE_PROJECT]:"project",[nt.EventType.EVENT_TYPE_SOURCE]:"source",[nt.EventType.EVENT_TYPE_DESTINATION]:"destination",[nt.EventType.EVENT_TYPE_UNSPECIFIED]:"unspecified"}}(vt=a.LiveApi||(a.LiveApi={}))})(liveapi);var eventapi={},dist$1={},api$1={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var extendStatics=function(a,c){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,_){b.__proto__=_}||function(b,_){for(var $ in _)_.hasOwnProperty($)&&(b[$]=_[$])},extendStatics(a,c)};function __extends(a,c){extendStatics(a,c);function b(){this.constructor=a}a.prototype=c===null?Object.create(c):(b.prototype=c.prototype,new b)}function isFunction$3(a){return typeof a=="function"}var _enable_super_gross_mode_that_will_cause_bad_things=!1,config$3={Promise:void 0,set useDeprecatedSynchronousErrorHandling(a){if(a){var c=new Error;""+c.stack}_enable_super_gross_mode_that_will_cause_bad_things=a},get useDeprecatedSynchronousErrorHandling(){return _enable_super_gross_mode_that_will_cause_bad_things}};function hostReportError(a){setTimeout(function(){throw a},0)}var empty$3={closed:!0,next:function(a){},error:function(a){if(config$3.useDeprecatedSynchronousErrorHandling)throw a;hostReportError(a)},complete:function(){}},isArray$5=function(){return Array.isArray||function(a){return a&&typeof a.length=="number"}}();function isObject$9(a){return a!==null&&typeof a=="object"}var UnsubscriptionErrorImpl=function(){function a(c){return Error.call(this),this.message=c?c.length+` errors occurred during unsubscription:
`+c.map(function(b,_){return _+1+") "+b.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=c,this}return a.prototype=Object.create(Error.prototype),a}(),UnsubscriptionError=UnsubscriptionErrorImpl,Subscription=function(){function a(c){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,c&&(this._ctorUnsubscribe=!0,this._unsubscribe=c)}return a.prototype.unsubscribe=function(){var c;if(!this.closed){var b=this,_=b._parentOrParents,$=b._ctorUnsubscribe,k=b._unsubscribe,et=b._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,_ instanceof a)_.remove(this);else if(_!==null)for(var nt=0;nt<_.length;++nt){var ot=_[nt];ot.remove(this)}if(isFunction$3(k)){$&&(this._unsubscribe=void 0);try{k.call(this)}catch(_t){c=_t instanceof UnsubscriptionError?flattenUnsubscriptionErrors(_t.errors):[_t]}}if(isArray$5(et))for(var nt=-1,ht=et.length;++nt<ht;){var vt=et[nt];if(isObject$9(vt))try{vt.unsubscribe()}catch(kt){c=c||[],kt instanceof UnsubscriptionError?c=c.concat(flattenUnsubscriptionErrors(kt.errors)):c.push(kt)}}if(c)throw new UnsubscriptionError(c)}},a.prototype.add=function(c){var b=c;if(!c)return a.EMPTY;switch(typeof c){case"function":b=new a(c);case"object":if(b===this||b.closed||typeof b.unsubscribe!="function")return b;if(this.closed)return b.unsubscribe(),b;if(!(b instanceof a)){var _=b;b=new a,b._subscriptions=[_]}break;default:throw new Error("unrecognized teardown "+c+" added to Subscription.")}var $=b._parentOrParents;if($===null)b._parentOrParents=this;else if($ instanceof a){if($===this)return b;b._parentOrParents=[$,this]}else if($.indexOf(this)===-1)$.push(this);else return b;var k=this._subscriptions;return k===null?this._subscriptions=[b]:k.push(b),b},a.prototype.remove=function(c){var b=this._subscriptions;if(b){var _=b.indexOf(c);_!==-1&&b.splice(_,1)}},a.EMPTY=function(c){return c.closed=!0,c}(new a),a}();function flattenUnsubscriptionErrors(a){return a.reduce(function(c,b){return c.concat(b instanceof UnsubscriptionError?b.errors:b)},[])}var rxSubscriber=function(){return typeof Symbol=="function"?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()}(),Subscriber=function(a){__extends(c,a);function c(b,_,$){var k=a.call(this)||this;switch(k.syncErrorValue=null,k.syncErrorThrown=!1,k.syncErrorThrowable=!1,k.isStopped=!1,arguments.length){case 0:k.destination=empty$3;break;case 1:if(!b){k.destination=empty$3;break}if(typeof b=="object"){b instanceof c?(k.syncErrorThrowable=b.syncErrorThrowable,k.destination=b,b.add(k)):(k.syncErrorThrowable=!0,k.destination=new SafeSubscriber(k,b));break}default:k.syncErrorThrowable=!0,k.destination=new SafeSubscriber(k,b,_,$);break}return k}return c.prototype[rxSubscriber]=function(){return this},c.create=function(b,_,$){var k=new c(b,_,$);return k.syncErrorThrowable=!1,k},c.prototype.next=function(b){this.isStopped||this._next(b)},c.prototype.error=function(b){this.isStopped||(this.isStopped=!0,this._error(b))},c.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},c.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,a.prototype.unsubscribe.call(this))},c.prototype._next=function(b){this.destination.next(b)},c.prototype._error=function(b){this.destination.error(b),this.unsubscribe()},c.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},c.prototype._unsubscribeAndRecycle=function(){var b=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=b,this},c}(Subscription),SafeSubscriber=function(a){__extends(c,a);function c(b,_,$,k){var et=a.call(this)||this;et._parentSubscriber=b;var nt,ot=et;return isFunction$3(_)?nt=_:_&&(nt=_.next,$=_.error,k=_.complete,_!==empty$3&&(ot=Object.create(_),isFunction$3(ot.unsubscribe)&&et.add(ot.unsubscribe.bind(ot)),ot.unsubscribe=et.unsubscribe.bind(et))),et._context=ot,et._next=nt,et._error=$,et._complete=k,et}return c.prototype.next=function(b){if(!this.isStopped&&this._next){var _=this._parentSubscriber;!config$3.useDeprecatedSynchronousErrorHandling||!_.syncErrorThrowable?this.__tryOrUnsub(this._next,b):this.__tryOrSetError(_,this._next,b)&&this.unsubscribe()}},c.prototype.error=function(b){if(!this.isStopped){var _=this._parentSubscriber,$=config$3.useDeprecatedSynchronousErrorHandling;if(this._error)!$||!_.syncErrorThrowable?(this.__tryOrUnsub(this._error,b),this.unsubscribe()):(this.__tryOrSetError(_,this._error,b),this.unsubscribe());else if(_.syncErrorThrowable)$?(_.syncErrorValue=b,_.syncErrorThrown=!0):hostReportError(b),this.unsubscribe();else{if(this.unsubscribe(),$)throw b;hostReportError(b)}}},c.prototype.complete=function(){var b=this;if(!this.isStopped){var _=this._parentSubscriber;if(this._complete){var $=function(){return b._complete.call(b._context)};!config$3.useDeprecatedSynchronousErrorHandling||!_.syncErrorThrowable?(this.__tryOrUnsub($),this.unsubscribe()):(this.__tryOrSetError(_,$),this.unsubscribe())}else this.unsubscribe()}},c.prototype.__tryOrUnsub=function(b,_){try{b.call(this._context,_)}catch($){if(this.unsubscribe(),config$3.useDeprecatedSynchronousErrorHandling)throw $;hostReportError($)}},c.prototype.__tryOrSetError=function(b,_,$){if(!config$3.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{_.call(this._context,$)}catch(k){return config$3.useDeprecatedSynchronousErrorHandling?(b.syncErrorValue=k,b.syncErrorThrown=!0,!0):(hostReportError(k),!0)}return!1},c.prototype._unsubscribe=function(){var b=this._parentSubscriber;this._context=null,this._parentSubscriber=null,b.unsubscribe()},c}(Subscriber);function canReportError(a){for(;a;){var c=a,b=c.closed,_=c.destination,$=c.isStopped;if(b||$)return!1;_&&_ instanceof Subscriber?a=_:a=null}return!0}function toSubscriber(a,c,b){if(a){if(a instanceof Subscriber)return a;if(a[rxSubscriber])return a[rxSubscriber]()}return!a&&!c&&!b?new Subscriber(empty$3):new Subscriber(a,c,b)}var observable=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function identity$1(a){return a}function pipe$2(){for(var a=[],c=0;c<arguments.length;c++)a[c]=arguments[c];return pipeFromArray(a)}function pipeFromArray(a){return a.length===0?identity$1:a.length===1?a[0]:function(b){return a.reduce(function(_,$){return $(_)},b)}}var Observable=function(){function a(c){this._isScalar=!1,c&&(this._subscribe=c)}return a.prototype.lift=function(c){var b=new a;return b.source=this,b.operator=c,b},a.prototype.subscribe=function(c,b,_){var $=this.operator,k=toSubscriber(c,b,_);if($?k.add($.call(k,this.source)):k.add(this.source||config$3.useDeprecatedSynchronousErrorHandling&&!k.syncErrorThrowable?this._subscribe(k):this._trySubscribe(k)),config$3.useDeprecatedSynchronousErrorHandling&&k.syncErrorThrowable&&(k.syncErrorThrowable=!1,k.syncErrorThrown))throw k.syncErrorValue;return k},a.prototype._trySubscribe=function(c){try{return this._subscribe(c)}catch(b){config$3.useDeprecatedSynchronousErrorHandling&&(c.syncErrorThrown=!0,c.syncErrorValue=b),canReportError(c)?c.error(b):console.warn(b)}},a.prototype.forEach=function(c,b){var _=this;return b=getPromiseCtor(b),new b(function($,k){var et;et=_.subscribe(function(nt){try{c(nt)}catch(ot){k(ot),et&&et.unsubscribe()}},k,$)})},a.prototype._subscribe=function(c){var b=this.source;return b&&b.subscribe(c)},a.prototype[observable]=function(){return this},a.prototype.pipe=function(){for(var c=[],b=0;b<arguments.length;b++)c[b]=arguments[b];return c.length===0?this:pipeFromArray(c)(this)},a.prototype.toPromise=function(c){var b=this;return c=getPromiseCtor(c),new c(function(_,$){var k;b.subscribe(function(et){return k=et},function(et){return $(et)},function(){return _(k)})})},a.create=function(c){return new a(c)},a}();function getPromiseCtor(a){if(a||(a=Promise),!a)throw new Error("no Promise impl found");return a}var subscribeToArray=function(a){return function(c){for(var b=0,_=a.length;b<_&&!c.closed;b++)c.next(a[b]);c.complete()}},subscribeToPromise=function(a){return function(c){return a.then(function(b){c.closed||(c.next(b),c.complete())},function(b){return c.error(b)}).then(null,hostReportError),c}};function getSymbolIterator(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var iterator=getSymbolIterator(),subscribeToIterable=function(a){return function(c){var b=a[iterator]();do{var _=void 0;try{_=b.next()}catch($){return c.error($),c}if(_.done){c.complete();break}if(c.next(_.value),c.closed)break}while(!0);return typeof b.return=="function"&&c.add(function(){b.return&&b.return()}),c}},subscribeToObservable=function(a){return function(c){var b=a[observable]();if(typeof b.subscribe!="function")throw new TypeError("Provided object does not correctly implement Symbol.observable");return b.subscribe(c)}},isArrayLike$2=function(a){return a&&typeof a.length=="number"&&typeof a!="function"};function isPromise(a){return!!a&&typeof a.subscribe!="function"&&typeof a.then=="function"}var subscribeTo=function(a){if(a&&typeof a[observable]=="function")return subscribeToObservable(a);if(isArrayLike$2(a))return subscribeToArray(a);if(isPromise(a))return subscribeToPromise(a);if(a&&typeof a[iterator]=="function")return subscribeToIterable(a);var c=isObject$9(a)?"an invalid object":"'"+a+"'",b="You provided "+c+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.";throw new TypeError(b)},SimpleInnerSubscriber=function(a){__extends(c,a);function c(b){var _=a.call(this)||this;return _.parent=b,_}return c.prototype._next=function(b){this.parent.notifyNext(b)},c.prototype._error=function(b){this.parent.notifyError(b),this.unsubscribe()},c.prototype._complete=function(){this.parent.notifyComplete(),this.unsubscribe()},c}(Subscriber),SimpleOuterSubscriber=function(a){__extends(c,a);function c(){return a!==null&&a.apply(this,arguments)||this}return c.prototype.notifyNext=function(b){this.destination.next(b)},c.prototype.notifyError=function(b){this.destination.error(b)},c.prototype.notifyComplete=function(){this.destination.complete()},c}(Subscriber);function innerSubscribe(a,c){if(!c.closed){if(a instanceof Observable)return a.subscribe(c);var b;try{b=subscribeTo(a)(c)}catch(_){c.error(_)}return b}}function audit(a){return function(b){return b.lift(new AuditOperator(a))}}var AuditOperator=function(){function a(c){this.durationSelector=c}return a.prototype.call=function(c,b){return b.subscribe(new AuditSubscriber(c,this.durationSelector))},a}(),AuditSubscriber=function(a){__extends(c,a);function c(b,_){var $=a.call(this,b)||this;return $.durationSelector=_,$.hasValue=!1,$}return c.prototype._next=function(b){if(this.value=b,this.hasValue=!0,!this.throttled){var _=void 0;try{var $=this.durationSelector;_=$(b)}catch(et){return this.destination.error(et)}var k=innerSubscribe(_,new SimpleInnerSubscriber(this));!k||k.closed?this.clearThrottle():this.add(this.throttled=k)}},c.prototype.clearThrottle=function(){var b=this,_=b.value,$=b.hasValue,k=b.throttled;k&&(this.remove(k),this.throttled=void 0,k.unsubscribe()),$&&(this.value=void 0,this.hasValue=!1,this.destination.next(_))},c.prototype.notifyNext=function(){this.clearThrottle()},c.prototype.notifyComplete=function(){this.clearThrottle()},c}(SimpleOuterSubscriber),Action=function(a){__extends(c,a);function c(b,_){return a.call(this)||this}return c.prototype.schedule=function(b,_){return this},c}(Subscription),AsyncAction=function(a){__extends(c,a);function c(b,_){var $=a.call(this,b,_)||this;return $.scheduler=b,$.work=_,$.pending=!1,$}return c.prototype.schedule=function(b,_){if(_===void 0&&(_=0),this.closed)return this;this.state=b;var $=this.id,k=this.scheduler;return $!=null&&(this.id=this.recycleAsyncId(k,$,_)),this.pending=!0,this.delay=_,this.id=this.id||this.requestAsyncId(k,this.id,_),this},c.prototype.requestAsyncId=function(b,_,$){return $===void 0&&($=0),setInterval(b.flush.bind(b,this),$)},c.prototype.recycleAsyncId=function(b,_,$){if($===void 0&&($=0),$!==null&&this.delay===$&&this.pending===!1)return _;clearInterval(_)},c.prototype.execute=function(b,_){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var $=this._execute(b,_);if($)return $;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},c.prototype._execute=function(b,_){var $=!1,k=void 0;try{this.work(b)}catch(et){$=!0,k=!!et&&et||new Error(et)}if($)return this.unsubscribe(),k},c.prototype._unsubscribe=function(){var b=this.id,_=this.scheduler,$=_.actions,k=$.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,k!==-1&&$.splice(k,1),b!=null&&(this.id=this.recycleAsyncId(_,b,null)),this.delay=null},c}(Action),Scheduler=function(){function a(c,b){b===void 0&&(b=a.now),this.SchedulerAction=c,this.now=b}return a.prototype.schedule=function(c,b,_){return b===void 0&&(b=0),new this.SchedulerAction(this,c).schedule(_,b)},a.now=function(){return Date.now()},a}(),AsyncScheduler=function(a){__extends(c,a);function c(b,_){_===void 0&&(_=Scheduler.now);var $=a.call(this,b,function(){return c.delegate&&c.delegate!==$?c.delegate.now():_()})||this;return $.actions=[],$.active=!1,$.scheduled=void 0,$}return c.prototype.schedule=function(b,_,$){return _===void 0&&(_=0),c.delegate&&c.delegate!==this?c.delegate.schedule(b,_,$):a.prototype.schedule.call(this,b,_,$)},c.prototype.flush=function(b){var _=this.actions;if(this.active){_.push(b);return}var $;this.active=!0;do if($=b.execute(b.state,b.delay))break;while(b=_.shift());if(this.active=!1,$){for(;b=_.shift();)b.unsubscribe();throw $}},c}(Scheduler),asyncScheduler=new AsyncScheduler(AsyncAction),async$1=asyncScheduler;function isNumeric(a){return!isArray$5(a)&&a-parseFloat(a)+1>=0}function isScheduler(a){return a&&typeof a.schedule=="function"}function timer(a,c,b){a===void 0&&(a=0);var _=-1;return isNumeric(c)?_=Number(c)<1&&1||Number(c):isScheduler(c)&&(b=c),isScheduler(b)||(b=async$1),new Observable(function($){var k=isNumeric(a)?a:+a-b.now();return b.schedule(dispatch$1,k,{index:0,period:_,subscriber:$})})}function dispatch$1(a){var c=a.index,b=a.period,_=a.subscriber;if(_.next(c),!_.closed){if(b===-1)return _.complete();a.index=c+1,this.schedule(a,b)}}function auditTime(a,c){return c===void 0&&(c=async$1),audit(function(){return timer(a,c)})}function buffer$2(a){return function(b){return b.lift(new BufferOperator(a))}}var BufferOperator=function(){function a(c){this.closingNotifier=c}return a.prototype.call=function(c,b){return b.subscribe(new BufferSubscriber(c,this.closingNotifier))},a}(),BufferSubscriber=function(a){__extends(c,a);function c(b,_){var $=a.call(this,b)||this;return $.buffer=[],$.add(innerSubscribe(_,new SimpleInnerSubscriber($))),$}return c.prototype._next=function(b){this.buffer.push(b)},c.prototype.notifyNext=function(){var b=this.buffer;this.buffer=[],this.destination.next(b)},c}(SimpleOuterSubscriber);function bufferCount(a,c){return c===void 0&&(c=null),function(_){return _.lift(new BufferCountOperator(a,c))}}var BufferCountOperator=function(){function a(c,b){this.bufferSize=c,this.startBufferEvery=b,!b||c===b?this.subscriberClass=BufferCountSubscriber:this.subscriberClass=BufferSkipCountSubscriber}return a.prototype.call=function(c,b){return b.subscribe(new this.subscriberClass(c,this.bufferSize,this.startBufferEvery))},a}(),BufferCountSubscriber=function(a){__extends(c,a);function c(b,_){var $=a.call(this,b)||this;return $.bufferSize=_,$.buffer=[],$}return c.prototype._next=function(b){var _=this.buffer;_.push(b),_.length==this.bufferSize&&(this.destination.next(_),this.buffer=[])},c.prototype._complete=function(){var b=this.buffer;b.length>0&&this.destination.next(b),a.prototype._complete.call(this)},c}(Subscriber),BufferSkipCountSubscriber=function(a){__extends(c,a);function c(b,_,$){var k=a.call(this,b)||this;return k.bufferSize=_,k.startBufferEvery=$,k.buffers=[],k.count=0,k}return c.prototype._next=function(b){var _=this,$=_.bufferSize,k=_.startBufferEvery,et=_.buffers,nt=_.count;this.count++,nt%k===0&&et.push([]);for(var ot=et.length;ot--;){var ht=et[ot];ht.push(b),ht.length===$&&(et.splice(ot,1),this.destination.next(ht))}},c.prototype._complete=function(){for(var b=this,_=b.buffers,$=b.destination;_.length>0;){var k=_.shift();k.length>0&&$.next(k)}a.prototype._complete.call(this)},c}(Subscriber);function bufferTime(a){var c=arguments.length,b=async$1;isScheduler(arguments[arguments.length-1])&&(b=arguments[arguments.length-1],c--);var _=null;c>=2&&(_=arguments[1]);var $=Number.POSITIVE_INFINITY;return c>=3&&($=arguments[2]),function(et){return et.lift(new BufferTimeOperator(a,_,$,b))}}var BufferTimeOperator=function(){function a(c,b,_,$){this.bufferTimeSpan=c,this.bufferCreationInterval=b,this.maxBufferSize=_,this.scheduler=$}return a.prototype.call=function(c,b){return b.subscribe(new BufferTimeSubscriber(c,this.bufferTimeSpan,this.bufferCreationInterval,this.maxBufferSize,this.scheduler))},a}(),Context=function(){function a(){this.buffer=[]}return a}(),BufferTimeSubscriber=function(a){__extends(c,a);function c(b,_,$,k,et){var nt=a.call(this,b)||this;nt.bufferTimeSpan=_,nt.bufferCreationInterval=$,nt.maxBufferSize=k,nt.scheduler=et,nt.contexts=[];var ot=nt.openContext();if(nt.timespanOnly=$==null||$<0,nt.timespanOnly){var ht={subscriber:nt,context:ot,bufferTimeSpan:_};nt.add(ot.closeAction=et.schedule(dispatchBufferTimeSpanOnly,_,ht))}else{var vt={subscriber:nt,context:ot},_t={bufferTimeSpan:_,bufferCreationInterval:$,subscriber:nt,scheduler:et};nt.add(ot.closeAction=et.schedule(dispatchBufferClose,_,vt)),nt.add(et.schedule(dispatchBufferCreation,$,_t))}return nt}return c.prototype._next=function(b){for(var _=this.contexts,$=_.length,k,et=0;et<$;et++){var nt=_[et],ot=nt.buffer;ot.push(b),ot.length==this.maxBufferSize&&(k=nt)}k&&this.onBufferFull(k)},c.prototype._error=function(b){this.contexts.length=0,a.prototype._error.call(this,b)},c.prototype._complete=function(){for(var b=this,_=b.contexts,$=b.destination;_.length>0;){var k=_.shift();$.next(k.buffer)}a.prototype._complete.call(this)},c.prototype._unsubscribe=function(){this.contexts=null},c.prototype.onBufferFull=function(b){this.closeContext(b);var _=b.closeAction;if(_.unsubscribe(),this.remove(_),!this.closed&&this.timespanOnly){b=this.openContext();var $=this.bufferTimeSpan,k={subscriber:this,context:b,bufferTimeSpan:$};this.add(b.closeAction=this.scheduler.schedule(dispatchBufferTimeSpanOnly,$,k))}},c.prototype.openContext=function(){var b=new Context;return this.contexts.push(b),b},c.prototype.closeContext=function(b){this.destination.next(b.buffer);var _=this.contexts,$=_?_.indexOf(b):-1;$>=0&&_.splice(_.indexOf(b),1)},c}(Subscriber);function dispatchBufferTimeSpanOnly(a){var c=a.subscriber,b=a.context;b&&c.closeContext(b),c.closed||(a.context=c.openContext(),a.context.closeAction=this.schedule(a,a.bufferTimeSpan))}function dispatchBufferCreation(a){var c=a.bufferCreationInterval,b=a.bufferTimeSpan,_=a.subscriber,$=a.scheduler,k=_.openContext(),et=this;_.closed||(_.add(k.closeAction=$.schedule(dispatchBufferClose,b,{subscriber:_,context:k})),et.schedule(a,c))}function dispatchBufferClose(a){var c=a.subscriber,b=a.context;c.closeContext(b)}var InnerSubscriber=function(a){__extends(c,a);function c(b,_,$){var k=a.call(this)||this;return k.parent=b,k.outerValue=_,k.outerIndex=$,k.index=0,k}return c.prototype._next=function(b){this.parent.notifyNext(this.outerValue,b,this.outerIndex,this.index++,this)},c.prototype._error=function(b){this.parent.notifyError(b,this),this.unsubscribe()},c.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},c}(Subscriber);function subscribeToResult(a,c,b,_,$){if($===void 0&&($=new InnerSubscriber(a,b,_)),!$.closed)return c instanceof Observable?c.subscribe($):subscribeTo(c)($)}var OuterSubscriber=function(a){__extends(c,a);function c(){return a!==null&&a.apply(this,arguments)||this}return c.prototype.notifyNext=function(b,_,$,k,et){this.destination.next(_)},c.prototype.notifyError=function(b,_){this.destination.error(b)},c.prototype.notifyComplete=function(b){this.destination.complete()},c}(Subscriber);function bufferToggle(a,c){return function(_){return _.lift(new BufferToggleOperator(a,c))}}var BufferToggleOperator=function(){function a(c,b){this.openings=c,this.closingSelector=b}return a.prototype.call=function(c,b){return b.subscribe(new BufferToggleSubscriber(c,this.openings,this.closingSelector))},a}(),BufferToggleSubscriber=function(a){__extends(c,a);function c(b,_,$){var k=a.call(this,b)||this;return k.closingSelector=$,k.contexts=[],k.add(subscribeToResult(k,_)),k}return c.prototype._next=function(b){for(var _=this.contexts,$=_.length,k=0;k<$;k++)_[k].buffer.push(b)},c.prototype._error=function(b){for(var _=this.contexts;_.length>0;){var $=_.shift();$.subscription.unsubscribe(),$.buffer=null,$.subscription=null}this.contexts=null,a.prototype._error.call(this,b)},c.prototype._complete=function(){for(var b=this.contexts;b.length>0;){var _=b.shift();this.destination.next(_.buffer),_.subscription.unsubscribe(),_.buffer=null,_.subscription=null}this.contexts=null,a.prototype._complete.call(this)},c.prototype.notifyNext=function(b,_){b?this.closeBuffer(b):this.openBuffer(_)},c.prototype.notifyComplete=function(b){this.closeBuffer(b.context)},c.prototype.openBuffer=function(b){try{var _=this.closingSelector,$=_.call(this,b);$&&this.trySubscribe($)}catch(k){this._error(k)}},c.prototype.closeBuffer=function(b){var _=this.contexts;if(_&&b){var $=b.buffer,k=b.subscription;this.destination.next($),_.splice(_.indexOf(b),1),this.remove(k),k.unsubscribe()}},c.prototype.trySubscribe=function(b){var _=this.contexts,$=[],k=new Subscription,et={buffer:$,subscription:k};_.push(et);var nt=subscribeToResult(this,b,et);!nt||nt.closed?this.closeBuffer(et):(nt.context=et,this.add(nt),k.add(nt))},c}(OuterSubscriber);function bufferWhen(a){return function(c){return c.lift(new BufferWhenOperator(a))}}var BufferWhenOperator=function(){function a(c){this.closingSelector=c}return a.prototype.call=function(c,b){return b.subscribe(new BufferWhenSubscriber(c,this.closingSelector))},a}(),BufferWhenSubscriber=function(a){__extends(c,a);function c(b,_){var $=a.call(this,b)||this;return $.closingSelector=_,$.subscribing=!1,$.openBuffer(),$}return c.prototype._next=function(b){this.buffer.push(b)},c.prototype._complete=function(){var b=this.buffer;b&&this.destination.next(b),a.prototype._complete.call(this)},c.prototype._unsubscribe=function(){this.buffer=void 0,this.subscribing=!1},c.prototype.notifyNext=function(){this.openBuffer()},c.prototype.notifyComplete=function(){this.subscribing?this.complete():this.openBuffer()},c.prototype.openBuffer=function(){var b=this.closingSubscription;b&&(this.remove(b),b.unsubscribe());var _=this.buffer;this.buffer&&this.destination.next(_),this.buffer=[];var $;try{var k=this.closingSelector;$=k()}catch(et){return this.error(et)}b=new Subscription,this.closingSubscription=b,this.add(b),this.subscribing=!0,b.add(innerSubscribe($,new SimpleInnerSubscriber(this))),this.subscribing=!1},c}(SimpleOuterSubscriber);function catchError(a){return function(b){var _=new CatchOperator(a),$=b.lift(_);return _.caught=$}}var CatchOperator=function(){function a(c){this.selector=c}return a.prototype.call=function(c,b){return b.subscribe(new CatchSubscriber(c,this.selector,this.caught))},a}(),CatchSubscriber=function(a){__extends(c,a);function c(b,_,$){var k=a.call(this,b)||this;return k.selector=_,k.caught=$,k}return c.prototype.error=function(b){if(!this.isStopped){var _=void 0;try{_=this.selector(b,this.caught)}catch(et){a.prototype.error.call(this,et);return}this._unsubscribeAndRecycle();var $=new SimpleInnerSubscriber(this);this.add($);var k=innerSubscribe(_,$);k!==$&&this.add(k)}},c}(SimpleOuterSubscriber);function scheduleArray(a,c){return new Observable(function(b){var _=new Subscription,$=0;return _.add(c.schedule(function(){if($===a.length){b.complete();return}b.next(a[$++]),b.closed||_.add(this.schedule())})),_})}function fromArray$1(a,c){return c?scheduleArray(a,c):new Observable(subscribeToArray(a))}var NONE={},CombineLatestOperator=function(){function a(c){this.resultSelector=c}return a.prototype.call=function(c,b){return b.subscribe(new CombineLatestSubscriber(c,this.resultSelector))},a}(),CombineLatestSubscriber=function(a){__extends(c,a);function c(b,_){var $=a.call(this,b)||this;return $.resultSelector=_,$.active=0,$.values=[],$.observables=[],$}return c.prototype._next=function(b){this.values.push(NONE),this.observables.push(b)},c.prototype._complete=function(){var b=this.observables,_=b.length;if(_===0)this.destination.complete();else{this.active=_,this.toRespond=_;for(var $=0;$<_;$++){var k=b[$];this.add(subscribeToResult(this,k,void 0,$))}}},c.prototype.notifyComplete=function(b){(this.active-=1)===0&&this.destination.complete()},c.prototype.notifyNext=function(b,_,$){var k=this.values,et=k[$],nt=this.toRespond?et===NONE?--this.toRespond:this.toRespond:0;k[$]=_,nt===0&&(this.resultSelector?this._tryResultSelector(k):this.destination.next(k.slice()))},c.prototype._tryResultSelector=function(b){var _;try{_=this.resultSelector.apply(this,b)}catch($){this.destination.error($);return}this.destination.next(_)},c}(OuterSubscriber);function combineAll(a){return function(c){return c.lift(new CombineLatestOperator(a))}}function scheduleObservable(a,c){return new Observable(function(b){var _=new Subscription;return _.add(c.schedule(function(){var $=a[observable]();_.add($.subscribe({next:function(k){_.add(c.schedule(function(){return b.next(k)}))},error:function(k){_.add(c.schedule(function(){return b.error(k)}))},complete:function(){_.add(c.schedule(function(){return b.complete()}))}}))})),_})}function schedulePromise(a,c){return new Observable(function(b){var _=new Subscription;return _.add(c.schedule(function(){return a.then(function($){_.add(c.schedule(function(){b.next($),_.add(c.schedule(function(){return b.complete()}))}))},function($){_.add(c.schedule(function(){return b.error($)}))})})),_})}function scheduleIterable(a,c){if(!a)throw new Error("Iterable cannot be null");return new Observable(function(b){var _=new Subscription,$;return _.add(function(){$&&typeof $.return=="function"&&$.return()}),_.add(c.schedule(function(){$=a[iterator](),_.add(c.schedule(function(){if(!b.closed){var k,et;try{var nt=$.next();k=nt.value,et=nt.done}catch(ot){b.error(ot);return}et?b.complete():(b.next(k),this.schedule())}}))})),_})}function isInteropObservable(a){return a&&typeof a[observable]=="function"}function isIterable(a){return a&&typeof a[iterator]=="function"}function scheduled(a,c){if(a!=null){if(isInteropObservable(a))return scheduleObservable(a,c);if(isPromise(a))return schedulePromise(a,c);if(isArrayLike$2(a))return scheduleArray(a,c);if(isIterable(a)||typeof a=="string")return scheduleIterable(a,c)}throw new TypeError((a!==null&&typeof a||a)+" is not observable")}function from(a,c){return c?scheduled(a,c):a instanceof Observable?a:new Observable(subscribeTo(a))}function combineLatest(){for(var a=[],c=0;c<arguments.length;c++)a[c]=arguments[c];var b=null;return typeof a[a.length-1]=="function"&&(b=a.pop()),a.length===1&&isArray$5(a[0])&&(a=a[0].slice()),function(_){return _.lift.call(from([_].concat(a)),new CombineLatestOperator(b))}}function of$2(){for(var a=[],c=0;c<arguments.length;c++)a[c]=arguments[c];var b=a[a.length-1];return isScheduler(b)?(a.pop(),scheduleArray(a,b)):fromArray$1(a)}function map(a,c){return function(_){if(typeof a!="function")throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return _.lift(new MapOperator(a,c))}}var MapOperator=function(){function a(c,b){this.project=c,this.thisArg=b}return a.prototype.call=function(c,b){return b.subscribe(new MapSubscriber(c,this.project,this.thisArg))},a}(),MapSubscriber=function(a){__extends(c,a);function c(b,_,$){var k=a.call(this,b)||this;return k.project=_,k.count=0,k.thisArg=$||k,k}return c.prototype._next=function(b){var _;try{_=this.project.call(this.thisArg,b,this.count++)}catch($){this.destination.error($);return}this.destination.next(_)},c}(Subscriber);function mergeMap(a,c,b){return b===void 0&&(b=Number.POSITIVE_INFINITY),typeof c=="function"?function(_){return _.pipe(mergeMap(function($,k){return from(a($,k)).pipe(map(function(et,nt){return c($,et,k,nt)}))},b))}:(typeof c=="number"&&(b=c),function(_){return _.lift(new MergeMapOperator(a,b))})}var MergeMapOperator=function(){function a(c,b){b===void 0&&(b=Number.POSITIVE_INFINITY),this.project=c,this.concurrent=b}return a.prototype.call=function(c,b){return b.subscribe(new MergeMapSubscriber(c,this.project,this.concurrent))},a}(),MergeMapSubscriber=function(a){__extends(c,a);function c(b,_,$){$===void 0&&($=Number.POSITIVE_INFINITY);var k=a.call(this,b)||this;return k.project=_,k.concurrent=$,k.hasCompleted=!1,k.buffer=[],k.active=0,k.index=0,k}return c.prototype._next=function(b){this.active<this.concurrent?this._tryNext(b):this.buffer.push(b)},c.prototype._tryNext=function(b){var _,$=this.index++;try{_=this.project(b,$)}catch(k){this.destination.error(k);return}this.active++,this._innerSub(_)},c.prototype._innerSub=function(b){var _=new SimpleInnerSubscriber(this),$=this.destination;$.add(_);var k=innerSubscribe(b,_);k!==_&&$.add(k)},c.prototype._complete=function(){this.hasCompleted=!0,this.active===0&&this.buffer.length===0&&this.destination.complete(),this.unsubscribe()},c.prototype.notifyNext=function(b){this.destination.next(b)},c.prototype.notifyComplete=function(){var b=this.buffer;this.active--,b.length>0?this._next(b.shift()):this.active===0&&this.hasCompleted&&this.destination.complete()},c}(SimpleOuterSubscriber),flatMap=mergeMap;function mergeAll(a){return a===void 0&&(a=Number.POSITIVE_INFINITY),mergeMap(identity$1,a)}function concatAll(){return mergeAll(1)}function concat$1(){for(var a=[],c=0;c<arguments.length;c++)a[c]=arguments[c];return concatAll()(of$2.apply(void 0,a))}function concat(){for(var a=[],c=0;c<arguments.length;c++)a[c]=arguments[c];return function(b){return b.lift.call(concat$1.apply(void 0,[b].concat(a)))}}function concatMap(a,c){return mergeMap(a,c,1)}function concatMapTo(a,c){return concatMap(function(){return a},c)}function count(a){return function(c){return c.lift(new CountOperator(a,c))}}var CountOperator=function(){function a(c,b){this.predicate=c,this.source=b}return a.prototype.call=function(c,b){return b.subscribe(new CountSubscriber(c,this.predicate,this.source))},a}(),CountSubscriber=function(a){__extends(c,a);function c(b,_,$){var k=a.call(this,b)||this;return k.predicate=_,k.source=$,k.count=0,k.index=0,k}return c.prototype._next=function(b){this.predicate?this._tryPredicate(b):this.count++},c.prototype._tryPredicate=function(b){var _;try{_=this.predicate(b,this.index++,this.source)}catch($){this.destination.error($);return}_&&this.count++},c.prototype._complete=function(){this.destination.next(this.count),this.destination.complete()},c}(Subscriber);function debounce$1(a){return function(c){return c.lift(new DebounceOperator(a))}}var DebounceOperator=function(){function a(c){this.durationSelector=c}return a.prototype.call=function(c,b){return b.subscribe(new DebounceSubscriber(c,this.durationSelector))},a}(),DebounceSubscriber=function(a){__extends(c,a);function c(b,_){var $=a.call(this,b)||this;return $.durationSelector=_,$.hasValue=!1,$}return c.prototype._next=function(b){try{var _=this.durationSelector.call(this,b);_&&this._tryNext(b,_)}catch($){this.destination.error($)}},c.prototype._complete=function(){this.emitValue(),this.destination.complete()},c.prototype._tryNext=function(b,_){var $=this.durationSubscription;this.value=b,this.hasValue=!0,$&&($.unsubscribe(),this.remove($)),$=innerSubscribe(_,new SimpleInnerSubscriber(this)),$&&!$.closed&&this.add(this.durationSubscription=$)},c.prototype.notifyNext=function(){this.emitValue()},c.prototype.notifyComplete=function(){this.emitValue()},c.prototype.emitValue=function(){if(this.hasValue){var b=this.value,_=this.durationSubscription;_&&(this.durationSubscription=void 0,_.unsubscribe(),this.remove(_)),this.value=void 0,this.hasValue=!1,a.prototype._next.call(this,b)}},c}(SimpleOuterSubscriber);function debounceTime(a,c){return c===void 0&&(c=async$1),function(b){return b.lift(new DebounceTimeOperator(a,c))}}var DebounceTimeOperator=function(){function a(c,b){this.dueTime=c,this.scheduler=b}return a.prototype.call=function(c,b){return b.subscribe(new DebounceTimeSubscriber(c,this.dueTime,this.scheduler))},a}(),DebounceTimeSubscriber=function(a){__extends(c,a);function c(b,_,$){var k=a.call(this,b)||this;return k.dueTime=_,k.scheduler=$,k.debouncedSubscription=null,k.lastValue=null,k.hasValue=!1,k}return c.prototype._next=function(b){this.clearDebounce(),this.lastValue=b,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(dispatchNext$1,this.dueTime,this))},c.prototype._complete=function(){this.debouncedNext(),this.destination.complete()},c.prototype.debouncedNext=function(){if(this.clearDebounce(),this.hasValue){var b=this.lastValue;this.lastValue=null,this.hasValue=!1,this.destination.next(b)}},c.prototype.clearDebounce=function(){var b=this.debouncedSubscription;b!==null&&(this.remove(b),b.unsubscribe(),this.debouncedSubscription=null)},c}(Subscriber);function dispatchNext$1(a){a.debouncedNext()}function defaultIfEmpty(a){return a===void 0&&(a=null),function(c){return c.lift(new DefaultIfEmptyOperator(a))}}var DefaultIfEmptyOperator=function(){function a(c){this.defaultValue=c}return a.prototype.call=function(c,b){return b.subscribe(new DefaultIfEmptySubscriber(c,this.defaultValue))},a}(),DefaultIfEmptySubscriber=function(a){__extends(c,a);function c(b,_){var $=a.call(this,b)||this;return $.defaultValue=_,$.isEmpty=!0,$}return c.prototype._next=function(b){this.isEmpty=!1,this.destination.next(b)},c.prototype._complete=function(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()},c}(Subscriber);function isDate$1(a){return a instanceof Date&&!isNaN(+a)}var EMPTY=new Observable(function(a){return a.complete()});function empty$2(a){return a?emptyScheduled(a):EMPTY}function emptyScheduled(a){return new Observable(function(c){return a.schedule(function(){return c.complete()})})}function throwError(a,c){return c?new Observable(function(b){return c.schedule(dispatch,0,{error:a,subscriber:b})}):new Observable(function(b){return b.error(a)})}function dispatch(a){var c=a.error,b=a.subscriber;b.error(c)}var Notification=function(){function a(c,b,_){this.kind=c,this.value=b,this.error=_,this.hasValue=c==="N"}return a.prototype.observe=function(c){switch(this.kind){case"N":return c.next&&c.next(this.value);case"E":return c.error&&c.error(this.error);case"C":return c.complete&&c.complete()}},a.prototype.do=function(c,b,_){var $=this.kind;switch($){case"N":return c&&c(this.value);case"E":return b&&b(this.error);case"C":return _&&_()}},a.prototype.accept=function(c,b,_){return c&&typeof c.next=="function"?this.observe(c):this.do(c,b,_)},a.prototype.toObservable=function(){var c=this.kind;switch(c){case"N":return of$2(this.value);case"E":return throwError(this.error);case"C":return empty$2()}throw new Error("unexpected notification kind value")},a.createNext=function(c){return typeof c<"u"?new a("N",c):a.undefinedValueNotification},a.createError=function(c){return new a("E",void 0,c)},a.createComplete=function(){return a.completeNotification},a.completeNotification=new a("C"),a.undefinedValueNotification=new a("N",void 0),a}();function delay(a,c){c===void 0&&(c=async$1);var b=isDate$1(a),_=b?+a-c.now():Math.abs(a);return function($){return $.lift(new DelayOperator(_,c))}}var DelayOperator=function(){function a(c,b){this.delay=c,this.scheduler=b}return a.prototype.call=function(c,b){return b.subscribe(new DelaySubscriber(c,this.delay,this.scheduler))},a}(),DelaySubscriber=function(a){__extends(c,a);function c(b,_,$){var k=a.call(this,b)||this;return k.delay=_,k.scheduler=$,k.queue=[],k.active=!1,k.errored=!1,k}return c.dispatch=function(b){for(var _=b.source,$=_.queue,k=b.scheduler,et=b.destination;$.length>0&&$[0].time-k.now()<=0;)$.shift().notification.observe(et);if($.length>0){var nt=Math.max(0,$[0].time-k.now());this.schedule(b,nt)}else this.unsubscribe(),_.active=!1},c.prototype._schedule=function(b){this.active=!0;var _=this.destination;_.add(b.schedule(c.dispatch,this.delay,{source:this,destination:this.destination,scheduler:b}))},c.prototype.scheduleNotification=function(b){if(this.errored!==!0){var _=this.scheduler,$=new DelayMessage(_.now()+this.delay,b);this.queue.push($),this.active===!1&&this._schedule(_)}},c.prototype._next=function(b){this.scheduleNotification(Notification.createNext(b))},c.prototype._error=function(b){this.errored=!0,this.queue=[],this.destination.error(b),this.unsubscribe()},c.prototype._complete=function(){this.scheduleNotification(Notification.createComplete()),this.unsubscribe()},c}(Subscriber),DelayMessage=function(){function a(c,b){this.time=c,this.notification=b}return a}();function delayWhen(a,c){return c?function(b){return new SubscriptionDelayObservable(b,c).lift(new DelayWhenOperator(a))}:function(b){return b.lift(new DelayWhenOperator(a))}}var DelayWhenOperator=function(){function a(c){this.delayDurationSelector=c}return a.prototype.call=function(c,b){return b.subscribe(new DelayWhenSubscriber(c,this.delayDurationSelector))},a}(),DelayWhenSubscriber=function(a){__extends(c,a);function c(b,_){var $=a.call(this,b)||this;return $.delayDurationSelector=_,$.completed=!1,$.delayNotifierSubscriptions=[],$.index=0,$}return c.prototype.notifyNext=function(b,_,$,k,et){this.destination.next(b),this.removeSubscription(et),this.tryComplete()},c.prototype.notifyError=function(b,_){this._error(b)},c.prototype.notifyComplete=function(b){var _=this.removeSubscription(b);_&&this.destination.next(_),this.tryComplete()},c.prototype._next=function(b){var _=this.index++;try{var $=this.delayDurationSelector(b,_);$&&this.tryDelay($,b)}catch(k){this.destination.error(k)}},c.prototype._complete=function(){this.completed=!0,this.tryComplete(),this.unsubscribe()},c.prototype.removeSubscription=function(b){b.unsubscribe();var _=this.delayNotifierSubscriptions.indexOf(b);return _!==-1&&this.delayNotifierSubscriptions.splice(_,1),b.outerValue},c.prototype.tryDelay=function(b,_){var $=subscribeToResult(this,b,_);if($&&!$.closed){var k=this.destination;k.add($),this.delayNotifierSubscriptions.push($)}},c.prototype.tryComplete=function(){this.completed&&this.delayNotifierSubscriptions.length===0&&this.destination.complete()},c}(OuterSubscriber),SubscriptionDelayObservable=function(a){__extends(c,a);function c(b,_){var $=a.call(this)||this;return $.source=b,$.subscriptionDelay=_,$}return c.prototype._subscribe=function(b){this.subscriptionDelay.subscribe(new SubscriptionDelaySubscriber(b,this.source))},c}(Observable),SubscriptionDelaySubscriber=function(a){__extends(c,a);function c(b,_){var $=a.call(this)||this;return $.parent=b,$.source=_,$.sourceSubscribed=!1,$}return c.prototype._next=function(b){this.subscribeToSource()},c.prototype._error=function(b){this.unsubscribe(),this.parent.error(b)},c.prototype._complete=function(){this.unsubscribe(),this.subscribeToSource()},c.prototype.subscribeToSource=function(){this.sourceSubscribed||(this.sourceSubscribed=!0,this.unsubscribe(),this.source.subscribe(this.parent))},c}(Subscriber);function dematerialize(){return function(c){return c.lift(new DeMaterializeOperator)}}var DeMaterializeOperator=function(){function a(){}return a.prototype.call=function(c,b){return b.subscribe(new DeMaterializeSubscriber(c))},a}(),DeMaterializeSubscriber=function(a){__extends(c,a);function c(b){return a.call(this,b)||this}return c.prototype._next=function(b){b.observe(this.destination)},c}(Subscriber);function distinct(a,c){return function(b){return b.lift(new DistinctOperator(a,c))}}var DistinctOperator=function(){function a(c,b){this.keySelector=c,this.flushes=b}return a.prototype.call=function(c,b){return b.subscribe(new DistinctSubscriber(c,this.keySelector,this.flushes))},a}(),DistinctSubscriber=function(a){__extends(c,a);function c(b,_,$){var k=a.call(this,b)||this;return k.keySelector=_,k.values=new Set,$&&k.add(innerSubscribe($,new SimpleInnerSubscriber(k))),k}return c.prototype.notifyNext=function(){this.values.clear()},c.prototype.notifyError=function(b){this._error(b)},c.prototype._next=function(b){this.keySelector?this._useKeySelector(b):this._finalizeNext(b,b)},c.prototype._useKeySelector=function(b){var _,$=this.destination;try{_=this.keySelector(b)}catch(k){$.error(k);return}this._finalizeNext(_,b)},c.prototype._finalizeNext=function(b,_){var $=this.values;$.has(b)||($.add(b),this.destination.next(_))},c}(SimpleOuterSubscriber);function distinctUntilChanged(a,c){return function(b){return b.lift(new DistinctUntilChangedOperator(a,c))}}var DistinctUntilChangedOperator=function(){function a(c,b){this.compare=c,this.keySelector=b}return a.prototype.call=function(c,b){return b.subscribe(new DistinctUntilChangedSubscriber(c,this.compare,this.keySelector))},a}(),DistinctUntilChangedSubscriber=function(a){__extends(c,a);function c(b,_,$){var k=a.call(this,b)||this;return k.keySelector=$,k.hasKey=!1,typeof _=="function"&&(k.compare=_),k}return c.prototype.compare=function(b,_){return b===_},c.prototype._next=function(b){var _;try{var $=this.keySelector;_=$?$(b):b}catch(nt){return this.destination.error(nt)}var k=!1;if(this.hasKey)try{var et=this.compare;k=et(this.key,_)}catch(nt){return this.destination.error(nt)}else this.hasKey=!0;k||(this.key=_,this.destination.next(b))},c}(Subscriber);function distinctUntilKeyChanged(a,c){return distinctUntilChanged(function(b,_){return c?c(b[a],_[a]):b[a]===_[a]})}var ArgumentOutOfRangeErrorImpl=function(){function a(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return a.prototype=Object.create(Error.prototype),a}(),ArgumentOutOfRangeError=ArgumentOutOfRangeErrorImpl;function filter(a,c){return function(_){return _.lift(new FilterOperator(a,c))}}var FilterOperator=function(){function a(c,b){this.predicate=c,this.thisArg=b}return a.prototype.call=function(c,b){return b.subscribe(new FilterSubscriber(c,this.predicate,this.thisArg))},a}(),FilterSubscriber=function(a){__extends(c,a);function c(b,_,$){var k=a.call(this,b)||this;return k.predicate=_,k.thisArg=$,k.count=0,k}return c.prototype._next=function(b){var _;try{_=this.predicate.call(this.thisArg,b,this.count++)}catch($){this.destination.error($);return}_&&this.destination.next(b)},c}(Subscriber),EmptyErrorImpl=function(){function a(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return a.prototype=Object.create(Error.prototype),a}(),EmptyError=EmptyErrorImpl;function throwIfEmpty(a){return a===void 0&&(a=defaultErrorFactory),function(c){return c.lift(new ThrowIfEmptyOperator(a))}}var ThrowIfEmptyOperator=function(){function a(c){this.errorFactory=c}return a.prototype.call=function(c,b){return b.subscribe(new ThrowIfEmptySubscriber(c,this.errorFactory))},a}(),ThrowIfEmptySubscriber=function(a){__extends(c,a);function c(b,_){var $=a.call(this,b)||this;return $.errorFactory=_,$.hasValue=!1,$}return c.prototype._next=function(b){this.hasValue=!0,this.destination.next(b)},c.prototype._complete=function(){if(this.hasValue)return this.destination.complete();var b=void 0;try{b=this.errorFactory()}catch(_){b=_}this.destination.error(b)},c}(Subscriber);function defaultErrorFactory(){return new EmptyError}function take(a){return function(c){return a===0?empty$2():c.lift(new TakeOperator(a))}}var TakeOperator=function(){function a(c){if(this.total=c,this.total<0)throw new ArgumentOutOfRangeError}return a.prototype.call=function(c,b){return b.subscribe(new TakeSubscriber(c,this.total))},a}(),TakeSubscriber=function(a){__extends(c,a);function c(b,_){var $=a.call(this,b)||this;return $.total=_,$.count=0,$}return c.prototype._next=function(b){var _=this.total,$=++this.count;$<=_&&(this.destination.next(b),$===_&&(this.destination.complete(),this.unsubscribe()))},c}(Subscriber);function elementAt(a,c){if(a<0)throw new ArgumentOutOfRangeError;var b=arguments.length>=2;return function(_){return _.pipe(filter(function($,k){return k===a}),take(1),b?defaultIfEmpty(c):throwIfEmpty(function(){return new ArgumentOutOfRangeError}))}}function endWith(){for(var a=[],c=0;c<arguments.length;c++)a[c]=arguments[c];return function(b){return concat$1(b,of$2.apply(void 0,a))}}function every$1(a,c){return function(b){return b.lift(new EveryOperator(a,c,b))}}var EveryOperator=function(){function a(c,b,_){this.predicate=c,this.thisArg=b,this.source=_}return a.prototype.call=function(c,b){return b.subscribe(new EverySubscriber(c,this.predicate,this.thisArg,this.source))},a}(),EverySubscriber=function(a){__extends(c,a);function c(b,_,$,k){var et=a.call(this,b)||this;return et.predicate=_,et.thisArg=$,et.source=k,et.index=0,et.thisArg=$||et,et}return c.prototype.notifyComplete=function(b){this.destination.next(b),this.destination.complete()},c.prototype._next=function(b){var _=!1;try{_=this.predicate.call(this.thisArg,b,this.index++,this.source)}catch($){this.destination.error($);return}_||this.notifyComplete(!1)},c.prototype._complete=function(){this.notifyComplete(!0)},c}(Subscriber);function exhaust(){return function(a){return a.lift(new SwitchFirstOperator)}}var SwitchFirstOperator=function(){function a(){}return a.prototype.call=function(c,b){return b.subscribe(new SwitchFirstSubscriber(c))},a}(),SwitchFirstSubscriber=function(a){__extends(c,a);function c(b){var _=a.call(this,b)||this;return _.hasCompleted=!1,_.hasSubscription=!1,_}return c.prototype._next=function(b){this.hasSubscription||(this.hasSubscription=!0,this.add(innerSubscribe(b,new SimpleInnerSubscriber(this))))},c.prototype._complete=function(){this.hasCompleted=!0,this.hasSubscription||this.destination.complete()},c.prototype.notifyComplete=function(){this.hasSubscription=!1,this.hasCompleted&&this.destination.complete()},c}(SimpleOuterSubscriber);function exhaustMap(a,c){return c?function(b){return b.pipe(exhaustMap(function(_,$){return from(a(_,$)).pipe(map(function(k,et){return c(_,k,$,et)}))}))}:function(b){return b.lift(new ExhaustMapOperator(a))}}var ExhaustMapOperator=function(){function a(c){this.project=c}return a.prototype.call=function(c,b){return b.subscribe(new ExhaustMapSubscriber(c,this.project))},a}(),ExhaustMapSubscriber=function(a){__extends(c,a);function c(b,_){var $=a.call(this,b)||this;return $.project=_,$.hasSubscription=!1,$.hasCompleted=!1,$.index=0,$}return c.prototype._next=function(b){this.hasSubscription||this.tryNext(b)},c.prototype.tryNext=function(b){var _,$=this.index++;try{_=this.project(b,$)}catch(k){this.destination.error(k);return}this.hasSubscription=!0,this._innerSub(_)},c.prototype._innerSub=function(b){var _=new SimpleInnerSubscriber(this),$=this.destination;$.add(_);var k=innerSubscribe(b,_);k!==_&&$.add(k)},c.prototype._complete=function(){this.hasCompleted=!0,this.hasSubscription||this.destination.complete(),this.unsubscribe()},c.prototype.notifyNext=function(b){this.destination.next(b)},c.prototype.notifyError=function(b){this.destination.error(b)},c.prototype.notifyComplete=function(){this.hasSubscription=!1,this.hasCompleted&&this.destination.complete()},c}(SimpleOuterSubscriber);function expand(a,c,b){return c===void 0&&(c=Number.POSITIVE_INFINITY),c=(c||0)<1?Number.POSITIVE_INFINITY:c,function(_){return _.lift(new ExpandOperator(a,c,b))}}var ExpandOperator=function(){function a(c,b,_){this.project=c,this.concurrent=b,this.scheduler=_}return a.prototype.call=function(c,b){return b.subscribe(new ExpandSubscriber(c,this.project,this.concurrent,this.scheduler))},a}(),ExpandSubscriber=function(a){__extends(c,a);function c(b,_,$,k){var et=a.call(this,b)||this;return et.project=_,et.concurrent=$,et.scheduler=k,et.index=0,et.active=0,et.hasCompleted=!1,$<Number.POSITIVE_INFINITY&&(et.buffer=[]),et}return c.dispatch=function(b){var _=b.subscriber,$=b.result,k=b.value,et=b.index;_.subscribeToProjection($,k,et)},c.prototype._next=function(b){var _=this.destination;if(_.closed){this._complete();return}var $=this.index++;if(this.active<this.concurrent){_.next(b);try{var k=this.project,et=k(b,$);if(!this.scheduler)this.subscribeToProjection(et,b,$);else{var nt={subscriber:this,result:et,value:b,index:$},ot=this.destination;ot.add(this.scheduler.schedule(c.dispatch,0,nt))}}catch(ht){_.error(ht)}}else this.buffer.push(b)},c.prototype.subscribeToProjection=function(b,_,$){this.active++;var k=this.destination;k.add(innerSubscribe(b,new SimpleInnerSubscriber(this)))},c.prototype._complete=function(){this.hasCompleted=!0,this.hasCompleted&&this.active===0&&this.destination.complete(),this.unsubscribe()},c.prototype.notifyNext=function(b){this._next(b)},c.prototype.notifyComplete=function(){var b=this.buffer;this.active--,b&&b.length>0&&this._next(b.shift()),this.hasCompleted&&this.active===0&&this.destination.complete()},c}(SimpleOuterSubscriber);function finalize(a){return function(c){return c.lift(new FinallyOperator(a))}}var FinallyOperator=function(){function a(c){this.callback=c}return a.prototype.call=function(c,b){return b.subscribe(new FinallySubscriber(c,this.callback))},a}(),FinallySubscriber=function(a){__extends(c,a);function c(b,_){var $=a.call(this,b)||this;return $.add(new Subscription(_)),$}return c}(Subscriber);function find$2(a,c){if(typeof a!="function")throw new TypeError("predicate is not a function");return function(b){return b.lift(new FindValueOperator(a,b,!1,c))}}var FindValueOperator=function(){function a(c,b,_,$){this.predicate=c,this.source=b,this.yieldIndex=_,this.thisArg=$}return a.prototype.call=function(c,b){return b.subscribe(new FindValueSubscriber(c,this.predicate,this.source,this.yieldIndex,this.thisArg))},a}(),FindValueSubscriber=function(a){__extends(c,a);function c(b,_,$,k,et){var nt=a.call(this,b)||this;return nt.predicate=_,nt.source=$,nt.yieldIndex=k,nt.thisArg=et,nt.index=0,nt}return c.prototype.notifyComplete=function(b){var _=this.destination;_.next(b),_.complete(),this.unsubscribe()},c.prototype._next=function(b){var _=this,$=_.predicate,k=_.thisArg,et=this.index++;try{var nt=$.call(k||this,b,et,this.source);nt&&this.notifyComplete(this.yieldIndex?et:b)}catch(ot){this.destination.error(ot)}},c.prototype._complete=function(){this.notifyComplete(this.yieldIndex?-1:void 0)},c}(Subscriber);function findIndex(a,c){return function(b){return b.lift(new FindValueOperator(a,b,!0,c))}}function first(a,c){var b=arguments.length>=2;return function(_){return _.pipe(a?filter(function($,k){return a($,k,_)}):identity$1,take(1),b?defaultIfEmpty(c):throwIfEmpty(function(){return new EmptyError}))}}var ObjectUnsubscribedErrorImpl=function(){function a(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return a.prototype=Object.create(Error.prototype),a}(),ObjectUnsubscribedError=ObjectUnsubscribedErrorImpl,SubjectSubscription=function(a){__extends(c,a);function c(b,_){var $=a.call(this)||this;return $.subject=b,$.subscriber=_,$.closed=!1,$}return c.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var b=this.subject,_=b.observers;if(this.subject=null,!(!_||_.length===0||b.isStopped||b.closed)){var $=_.indexOf(this.subscriber);$!==-1&&_.splice($,1)}}},c}(Subscription),SubjectSubscriber=function(a){__extends(c,a);function c(b){var _=a.call(this,b)||this;return _.destination=b,_}return c}(Subscriber),Subject=function(a){__extends(c,a);function c(){var b=a.call(this)||this;return b.observers=[],b.closed=!1,b.isStopped=!1,b.hasError=!1,b.thrownError=null,b}return c.prototype[rxSubscriber]=function(){return new SubjectSubscriber(this)},c.prototype.lift=function(b){var _=new AnonymousSubject(this,this);return _.operator=b,_},c.prototype.next=function(b){if(this.closed)throw new ObjectUnsubscribedError;if(!this.isStopped)for(var _=this.observers,$=_.length,k=_.slice(),et=0;et<$;et++)k[et].next(b)},c.prototype.error=function(b){if(this.closed)throw new ObjectUnsubscribedError;this.hasError=!0,this.thrownError=b,this.isStopped=!0;for(var _=this.observers,$=_.length,k=_.slice(),et=0;et<$;et++)k[et].error(b);this.observers.length=0},c.prototype.complete=function(){if(this.closed)throw new ObjectUnsubscribedError;this.isStopped=!0;for(var b=this.observers,_=b.length,$=b.slice(),k=0;k<_;k++)$[k].complete();this.observers.length=0},c.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},c.prototype._trySubscribe=function(b){if(this.closed)throw new ObjectUnsubscribedError;return a.prototype._trySubscribe.call(this,b)},c.prototype._subscribe=function(b){if(this.closed)throw new ObjectUnsubscribedError;return this.hasError?(b.error(this.thrownError),Subscription.EMPTY):this.isStopped?(b.complete(),Subscription.EMPTY):(this.observers.push(b),new SubjectSubscription(this,b))},c.prototype.asObservable=function(){var b=new Observable;return b.source=this,b},c.create=function(b,_){return new AnonymousSubject(b,_)},c}(Observable),AnonymousSubject=function(a){__extends(c,a);function c(b,_){var $=a.call(this)||this;return $.destination=b,$.source=_,$}return c.prototype.next=function(b){var _=this.destination;_&&_.next&&_.next(b)},c.prototype.error=function(b){var _=this.destination;_&&_.error&&this.destination.error(b)},c.prototype.complete=function(){var b=this.destination;b&&b.complete&&this.destination.complete()},c.prototype._subscribe=function(b){var _=this.source;return _?this.source.subscribe(b):Subscription.EMPTY},c}(Subject);function groupBy(a,c,b,_){return function($){return $.lift(new GroupByOperator(a,c,b,_))}}var GroupByOperator=function(){function a(c,b,_,$){this.keySelector=c,this.elementSelector=b,this.durationSelector=_,this.subjectSelector=$}return a.prototype.call=function(c,b){return b.subscribe(new GroupBySubscriber(c,this.keySelector,this.elementSelector,this.durationSelector,this.subjectSelector))},a}(),GroupBySubscriber=function(a){__extends(c,a);function c(b,_,$,k,et){var nt=a.call(this,b)||this;return nt.keySelector=_,nt.elementSelector=$,nt.durationSelector=k,nt.subjectSelector=et,nt.groups=null,nt.attemptedToUnsubscribe=!1,nt.count=0,nt}return c.prototype._next=function(b){var _;try{_=this.keySelector(b)}catch($){this.error($);return}this._group(b,_)},c.prototype._group=function(b,_){var $=this.groups;$||($=this.groups=new Map);var k=$.get(_),et;if(this.elementSelector)try{et=this.elementSelector(b)}catch(ht){this.error(ht)}else et=b;if(!k){k=this.subjectSelector?this.subjectSelector():new Subject,$.set(_,k);var nt=new GroupedObservable(_,k,this);if(this.destination.next(nt),this.durationSelector){var ot=void 0;try{ot=this.durationSelector(new GroupedObservable(_,k))}catch(ht){this.error(ht);return}this.add(ot.subscribe(new GroupDurationSubscriber(_,k,this)))}}k.closed||k.next(et)},c.prototype._error=function(b){var _=this.groups;_&&(_.forEach(function($,k){$.error(b)}),_.clear()),this.destination.error(b)},c.prototype._complete=function(){var b=this.groups;b&&(b.forEach(function(_,$){_.complete()}),b.clear()),this.destination.complete()},c.prototype.removeGroup=function(b){this.groups.delete(b)},c.prototype.unsubscribe=function(){this.closed||(this.attemptedToUnsubscribe=!0,this.count===0&&a.prototype.unsubscribe.call(this))},c}(Subscriber),GroupDurationSubscriber=function(a){__extends(c,a);function c(b,_,$){var k=a.call(this,_)||this;return k.key=b,k.group=_,k.parent=$,k}return c.prototype._next=function(b){this.complete()},c.prototype._unsubscribe=function(){var b=this,_=b.parent,$=b.key;this.key=this.parent=null,_&&_.removeGroup($)},c}(Subscriber),GroupedObservable=function(a){__extends(c,a);function c(b,_,$){var k=a.call(this)||this;return k.key=b,k.groupSubject=_,k.refCountSubscription=$,k}return c.prototype._subscribe=function(b){var _=new Subscription,$=this,k=$.refCountSubscription,et=$.groupSubject;return k&&!k.closed&&_.add(new InnerRefCountSubscription(k)),_.add(et.subscribe(b)),_},c}(Observable),InnerRefCountSubscription=function(a){__extends(c,a);function c(b){var _=a.call(this)||this;return _.parent=b,b.count++,_}return c.prototype.unsubscribe=function(){var b=this.parent;!b.closed&&!this.closed&&(a.prototype.unsubscribe.call(this),b.count-=1,b.count===0&&b.attemptedToUnsubscribe&&b.unsubscribe())},c}(Subscription);function ignoreElements(){return function(c){return c.lift(new IgnoreElementsOperator)}}var IgnoreElementsOperator=function(){function a(){}return a.prototype.call=function(c,b){return b.subscribe(new IgnoreElementsSubscriber(c))},a}(),IgnoreElementsSubscriber=function(a){__extends(c,a);function c(){return a!==null&&a.apply(this,arguments)||this}return c.prototype._next=function(b){},c}(Subscriber);function isEmpty(){return function(a){return a.lift(new IsEmptyOperator)}}var IsEmptyOperator=function(){function a(){}return a.prototype.call=function(c,b){return b.subscribe(new IsEmptySubscriber(c))},a}(),IsEmptySubscriber=function(a){__extends(c,a);function c(b){return a.call(this,b)||this}return c.prototype.notifyComplete=function(b){var _=this.destination;_.next(b),_.complete()},c.prototype._next=function(b){this.notifyComplete(!1)},c.prototype._complete=function(){this.notifyComplete(!0)},c}(Subscriber);function takeLast(a){return function(b){return a===0?empty$2():b.lift(new TakeLastOperator(a))}}var TakeLastOperator=function(){function a(c){if(this.total=c,this.total<0)throw new ArgumentOutOfRangeError}return a.prototype.call=function(c,b){return b.subscribe(new TakeLastSubscriber(c,this.total))},a}(),TakeLastSubscriber=function(a){__extends(c,a);function c(b,_){var $=a.call(this,b)||this;return $.total=_,$.ring=new Array,$.count=0,$}return c.prototype._next=function(b){var _=this.ring,$=this.total,k=this.count++;if(_.length<$)_.push(b);else{var et=k%$;_[et]=b}},c.prototype._complete=function(){var b=this.destination,_=this.count;if(_>0)for(var $=this.count>=this.total?this.total:this.count,k=this.ring,et=0;et<$;et++){var nt=_++%$;b.next(k[nt])}b.complete()},c}(Subscriber);function last$1(a,c){var b=arguments.length>=2;return function(_){return _.pipe(a?filter(function($,k){return a($,k,_)}):identity$1,takeLast(1),b?defaultIfEmpty(c):throwIfEmpty(function(){return new EmptyError}))}}function mapTo(a){return function(c){return c.lift(new MapToOperator(a))}}var MapToOperator=function(){function a(c){this.value=c}return a.prototype.call=function(c,b){return b.subscribe(new MapToSubscriber(c,this.value))},a}(),MapToSubscriber=function(a){__extends(c,a);function c(b,_){var $=a.call(this,b)||this;return $.value=_,$}return c.prototype._next=function(b){this.destination.next(this.value)},c}(Subscriber);function materialize(){return function(c){return c.lift(new MaterializeOperator)}}var MaterializeOperator=function(){function a(){}return a.prototype.call=function(c,b){return b.subscribe(new MaterializeSubscriber(c))},a}(),MaterializeSubscriber=function(a){__extends(c,a);function c(b){return a.call(this,b)||this}return c.prototype._next=function(b){this.destination.next(Notification.createNext(b))},c.prototype._error=function(b){var _=this.destination;_.next(Notification.createError(b)),_.complete()},c.prototype._complete=function(){var b=this.destination;b.next(Notification.createComplete()),b.complete()},c}(Subscriber);function scan(a,c){var b=!1;return arguments.length>=2&&(b=!0),function($){return $.lift(new ScanOperator(a,c,b))}}var ScanOperator=function(){function a(c,b,_){_===void 0&&(_=!1),this.accumulator=c,this.seed=b,this.hasSeed=_}return a.prototype.call=function(c,b){return b.subscribe(new ScanSubscriber(c,this.accumulator,this.seed,this.hasSeed))},a}(),ScanSubscriber=function(a){__extends(c,a);function c(b,_,$,k){var et=a.call(this,b)||this;return et.accumulator=_,et._seed=$,et.hasSeed=k,et.index=0,et}return Object.defineProperty(c.prototype,"seed",{get:function(){return this._seed},set:function(b){this.hasSeed=!0,this._seed=b},enumerable:!0,configurable:!0}),c.prototype._next=function(b){if(!this.hasSeed)this.seed=b,this.destination.next(b);else return this._tryNext(b)},c.prototype._tryNext=function(b){var _=this.index++,$;try{$=this.accumulator(this.seed,b,_)}catch(k){this.destination.error(k)}this.seed=$,this.destination.next($)},c}(Subscriber);function reduce(a,c){return arguments.length>=2?function(_){return pipe$2(scan(a,c),takeLast(1),defaultIfEmpty(c))(_)}:function(_){return pipe$2(scan(function($,k,et){return a($,k,et+1)}),takeLast(1))(_)}}function max$1(a){var c=typeof a=="function"?function(b,_){return a(b,_)>0?b:_}:function(b,_){return b>_?b:_};return reduce(c)}function merge$2(){for(var a=[],c=0;c<arguments.length;c++)a[c]=arguments[c];var b=Number.POSITIVE_INFINITY,_=null,$=a[a.length-1];return isScheduler($)?(_=a.pop(),a.length>1&&typeof a[a.length-1]=="number"&&(b=a.pop())):typeof $=="number"&&(b=a.pop()),_===null&&a.length===1&&a[0]instanceof Observable?a[0]:mergeAll(b)(fromArray$1(a,_))}function merge$1(){for(var a=[],c=0;c<arguments.length;c++)a[c]=arguments[c];return function(b){return b.lift.call(merge$2.apply(void 0,[b].concat(a)))}}function mergeMapTo(a,c,b){return b===void 0&&(b=Number.POSITIVE_INFINITY),typeof c=="function"?mergeMap(function(){return a},c,b):(typeof c=="number"&&(b=c),mergeMap(function(){return a},b))}function mergeScan(a,c,b){return b===void 0&&(b=Number.POSITIVE_INFINITY),function(_){return _.lift(new MergeScanOperator(a,c,b))}}var MergeScanOperator=function(){function a(c,b,_){this.accumulator=c,this.seed=b,this.concurrent=_}return a.prototype.call=function(c,b){return b.subscribe(new MergeScanSubscriber(c,this.accumulator,this.seed,this.concurrent))},a}(),MergeScanSubscriber=function(a){__extends(c,a);function c(b,_,$,k){var et=a.call(this,b)||this;return et.accumulator=_,et.acc=$,et.concurrent=k,et.hasValue=!1,et.hasCompleted=!1,et.buffer=[],et.active=0,et.index=0,et}return c.prototype._next=function(b){if(this.active<this.concurrent){var _=this.index++,$=this.destination,k=void 0;try{var et=this.accumulator;k=et(this.acc,b,_)}catch(nt){return $.error(nt)}this.active++,this._innerSub(k)}else this.buffer.push(b)},c.prototype._innerSub=function(b){var _=new SimpleInnerSubscriber(this),$=this.destination;$.add(_);var k=innerSubscribe(b,_);k!==_&&$.add(k)},c.prototype._complete=function(){this.hasCompleted=!0,this.active===0&&this.buffer.length===0&&(this.hasValue===!1&&this.destination.next(this.acc),this.destination.complete()),this.unsubscribe()},c.prototype.notifyNext=function(b){var _=this.destination;this.acc=b,this.hasValue=!0,_.next(b)},c.prototype.notifyComplete=function(){var b=this.buffer;this.active--,b.length>0?this._next(b.shift()):this.active===0&&this.hasCompleted&&(this.hasValue===!1&&this.destination.next(this.acc),this.destination.complete())},c}(SimpleOuterSubscriber);function min(a){var c=typeof a=="function"?function(b,_){return a(b,_)<0?b:_}:function(b,_){return b<_?b:_};return reduce(c)}function refCount(){return function(c){return c.lift(new RefCountOperator(c))}}var RefCountOperator=function(){function a(c){this.connectable=c}return a.prototype.call=function(c,b){var _=this.connectable;_._refCount++;var $=new RefCountSubscriber(c,_),k=b.subscribe($);return $.closed||($.connection=_.connect()),k},a}(),RefCountSubscriber=function(a){__extends(c,a);function c(b,_){var $=a.call(this,b)||this;return $.connectable=_,$}return c.prototype._unsubscribe=function(){var b=this.connectable;if(!b){this.connection=null;return}this.connectable=null;var _=b._refCount;if(_<=0){this.connection=null;return}if(b._refCount=_-1,_>1){this.connection=null;return}var $=this.connection,k=b._connection;this.connection=null,k&&(!$||k===$)&&k.unsubscribe()},c}(Subscriber),ConnectableObservable=function(a){__extends(c,a);function c(b,_){var $=a.call(this)||this;return $.source=b,$.subjectFactory=_,$._refCount=0,$._isComplete=!1,$}return c.prototype._subscribe=function(b){return this.getSubject().subscribe(b)},c.prototype.getSubject=function(){var b=this._subject;return(!b||b.isStopped)&&(this._subject=this.subjectFactory()),this._subject},c.prototype.connect=function(){var b=this._connection;return b||(this._isComplete=!1,b=this._connection=new Subscription,b.add(this.source.subscribe(new ConnectableSubscriber(this.getSubject(),this))),b.closed&&(this._connection=null,b=Subscription.EMPTY)),b},c.prototype.refCount=function(){return refCount()(this)},c}(Observable),connectableObservableDescriptor=function(){var a=ConnectableObservable.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:a._subscribe},_isComplete:{value:a._isComplete,writable:!0},getSubject:{value:a.getSubject},connect:{value:a.connect},refCount:{value:a.refCount}}}(),ConnectableSubscriber=function(a){__extends(c,a);function c(b,_){var $=a.call(this,b)||this;return $.connectable=_,$}return c.prototype._error=function(b){this._unsubscribe(),a.prototype._error.call(this,b)},c.prototype._complete=function(){this.connectable._isComplete=!0,this._unsubscribe(),a.prototype._complete.call(this)},c.prototype._unsubscribe=function(){var b=this.connectable;if(b){this.connectable=null;var _=b._connection;b._refCount=0,b._subject=null,b._connection=null,_&&_.unsubscribe()}},c}(SubjectSubscriber);function multicast(a,c){return function(_){var $;if(typeof a=="function"?$=a:$=function(){return a},typeof c=="function")return _.lift(new MulticastOperator($,c));var k=Object.create(_,connectableObservableDescriptor);return k.source=_,k.subjectFactory=$,k}}var MulticastOperator=function(){function a(c,b){this.subjectFactory=c,this.selector=b}return a.prototype.call=function(c,b){var _=this.selector,$=this.subjectFactory(),k=_($).subscribe(c);return k.add(b.subscribe($)),k},a}();function observeOn(a,c){return c===void 0&&(c=0),function(_){return _.lift(new ObserveOnOperator(a,c))}}var ObserveOnOperator=function(){function a(c,b){b===void 0&&(b=0),this.scheduler=c,this.delay=b}return a.prototype.call=function(c,b){return b.subscribe(new ObserveOnSubscriber(c,this.scheduler,this.delay))},a}(),ObserveOnSubscriber=function(a){__extends(c,a);function c(b,_,$){$===void 0&&($=0);var k=a.call(this,b)||this;return k.scheduler=_,k.delay=$,k}return c.dispatch=function(b){var _=b.notification,$=b.destination;_.observe($),this.unsubscribe()},c.prototype.scheduleMessage=function(b){var _=this.destination;_.add(this.scheduler.schedule(c.dispatch,this.delay,new ObserveOnMessage(b,this.destination)))},c.prototype._next=function(b){this.scheduleMessage(Notification.createNext(b))},c.prototype._error=function(b){this.scheduleMessage(Notification.createError(b)),this.unsubscribe()},c.prototype._complete=function(){this.scheduleMessage(Notification.createComplete()),this.unsubscribe()},c}(Subscriber),ObserveOnMessage=function(){function a(c,b){this.notification=c,this.destination=b}return a}();function onErrorResumeNext(){for(var a=[],c=0;c<arguments.length;c++)a[c]=arguments[c];return a.length===1&&isArray$5(a[0])&&(a=a[0]),function(b){return b.lift(new OnErrorResumeNextOperator(a))}}var OnErrorResumeNextOperator=function(){function a(c){this.nextSources=c}return a.prototype.call=function(c,b){return b.subscribe(new OnErrorResumeNextSubscriber(c,this.nextSources))},a}(),OnErrorResumeNextSubscriber=function(a){__extends(c,a);function c(b,_){var $=a.call(this,b)||this;return $.destination=b,$.nextSources=_,$}return c.prototype.notifyError=function(){this.subscribeToNextSource()},c.prototype.notifyComplete=function(){this.subscribeToNextSource()},c.prototype._error=function(b){this.subscribeToNextSource(),this.unsubscribe()},c.prototype._complete=function(){this.subscribeToNextSource(),this.unsubscribe()},c.prototype.subscribeToNextSource=function(){var b=this.nextSources.shift();if(b){var _=new SimpleInnerSubscriber(this),$=this.destination;$.add(_);var k=innerSubscribe(b,_);k!==_&&$.add(k)}else this.destination.complete()},c}(SimpleOuterSubscriber);function pairwise(){return function(a){return a.lift(new PairwiseOperator)}}var PairwiseOperator=function(){function a(){}return a.prototype.call=function(c,b){return b.subscribe(new PairwiseSubscriber(c))},a}(),PairwiseSubscriber=function(a){__extends(c,a);function c(b){var _=a.call(this,b)||this;return _.hasPrev=!1,_}return c.prototype._next=function(b){var _;this.hasPrev?_=[this.prev,b]:this.hasPrev=!0,this.prev=b,_&&this.destination.next(_)},c}(Subscriber);function not(a,c){function b(){return!b.pred.apply(b.thisArg,arguments)}return b.pred=a,b.thisArg=c,b}function partition(a,c){return function(b){return[filter(a,c)(b),filter(not(a,c))(b)]}}function pluck(){for(var a=[],c=0;c<arguments.length;c++)a[c]=arguments[c];var b=a.length;if(b===0)throw new Error("list of properties cannot be empty.");return function(_){return map(plucker(a,b))(_)}}function plucker(a,c){var b=function(_){for(var $=_,k=0;k<c;k++){var et=$!=null?$[a[k]]:void 0;if(et!==void 0)$=et;else return}return $};return b}function publish(a){return a?multicast(function(){return new Subject},a):multicast(new Subject)}var BehaviorSubject=function(a){__extends(c,a);function c(b){var _=a.call(this)||this;return _._value=b,_}return Object.defineProperty(c.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),c.prototype._subscribe=function(b){var _=a.prototype._subscribe.call(this,b);return _&&!_.closed&&b.next(this._value),_},c.prototype.getValue=function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new ObjectUnsubscribedError;return this._value},c.prototype.next=function(b){a.prototype.next.call(this,this._value=b)},c}(Subject);function publishBehavior(a){return function(c){return multicast(new BehaviorSubject(a))(c)}}var AsyncSubject=function(a){__extends(c,a);function c(){var b=a!==null&&a.apply(this,arguments)||this;return b.value=null,b.hasNext=!1,b.hasCompleted=!1,b}return c.prototype._subscribe=function(b){return this.hasError?(b.error(this.thrownError),Subscription.EMPTY):this.hasCompleted&&this.hasNext?(b.next(this.value),b.complete(),Subscription.EMPTY):a.prototype._subscribe.call(this,b)},c.prototype.next=function(b){this.hasCompleted||(this.value=b,this.hasNext=!0)},c.prototype.error=function(b){this.hasCompleted||a.prototype.error.call(this,b)},c.prototype.complete=function(){this.hasCompleted=!0,this.hasNext&&a.prototype.next.call(this,this.value),a.prototype.complete.call(this)},c}(Subject);function publishLast(){return function(a){return multicast(new AsyncSubject)(a)}}var QueueAction=function(a){__extends(c,a);function c(b,_){var $=a.call(this,b,_)||this;return $.scheduler=b,$.work=_,$}return c.prototype.schedule=function(b,_){return _===void 0&&(_=0),_>0?a.prototype.schedule.call(this,b,_):(this.delay=_,this.state=b,this.scheduler.flush(this),this)},c.prototype.execute=function(b,_){return _>0||this.closed?a.prototype.execute.call(this,b,_):this._execute(b,_)},c.prototype.requestAsyncId=function(b,_,$){return $===void 0&&($=0),$!==null&&$>0||$===null&&this.delay>0?a.prototype.requestAsyncId.call(this,b,_,$):b.flush(this)},c}(AsyncAction),QueueScheduler=function(a){__extends(c,a);function c(){return a!==null&&a.apply(this,arguments)||this}return c}(AsyncScheduler),queueScheduler=new QueueScheduler(QueueAction),queue$1=queueScheduler,ReplaySubject=function(a){__extends(c,a);function c(b,_,$){b===void 0&&(b=Number.POSITIVE_INFINITY),_===void 0&&(_=Number.POSITIVE_INFINITY);var k=a.call(this)||this;return k.scheduler=$,k._events=[],k._infiniteTimeWindow=!1,k._bufferSize=b<1?1:b,k._windowTime=_<1?1:_,_===Number.POSITIVE_INFINITY?(k._infiniteTimeWindow=!0,k.next=k.nextInfiniteTimeWindow):k.next=k.nextTimeWindow,k}return c.prototype.nextInfiniteTimeWindow=function(b){if(!this.isStopped){var _=this._events;_.push(b),_.length>this._bufferSize&&_.shift()}a.prototype.next.call(this,b)},c.prototype.nextTimeWindow=function(b){this.isStopped||(this._events.push(new ReplayEvent(this._getNow(),b)),this._trimBufferThenGetEvents()),a.prototype.next.call(this,b)},c.prototype._subscribe=function(b){var _=this._infiniteTimeWindow,$=_?this._events:this._trimBufferThenGetEvents(),k=this.scheduler,et=$.length,nt;if(this.closed)throw new ObjectUnsubscribedError;if(this.isStopped||this.hasError?nt=Subscription.EMPTY:(this.observers.push(b),nt=new SubjectSubscription(this,b)),k&&b.add(b=new ObserveOnSubscriber(b,k)),_)for(var ot=0;ot<et&&!b.closed;ot++)b.next($[ot]);else for(var ot=0;ot<et&&!b.closed;ot++)b.next($[ot].value);return this.hasError?b.error(this.thrownError):this.isStopped&&b.complete(),nt},c.prototype._getNow=function(){return(this.scheduler||queue$1).now()},c.prototype._trimBufferThenGetEvents=function(){for(var b=this._getNow(),_=this._bufferSize,$=this._windowTime,k=this._events,et=k.length,nt=0;nt<et&&!(b-k[nt].time<$);)nt++;return et>_&&(nt=Math.max(nt,et-_)),nt>0&&k.splice(0,nt),k},c}(Subject),ReplayEvent=function(){function a(c,b){this.time=c,this.value=b}return a}();function publishReplay(a,c,b,_){b&&typeof b!="function"&&(_=b);var $=typeof b=="function"?b:void 0,k=new ReplaySubject(a,c,_);return function(et){return multicast(function(){return k},$)(et)}}function race$1(){for(var a=[],c=0;c<arguments.length;c++)a[c]=arguments[c];if(a.length===1)if(isArray$5(a[0]))a=a[0];else return a[0];return fromArray$1(a,void 0).lift(new RaceOperator)}var RaceOperator=function(){function a(){}return a.prototype.call=function(c,b){return b.subscribe(new RaceSubscriber(c))},a}(),RaceSubscriber=function(a){__extends(c,a);function c(b){var _=a.call(this,b)||this;return _.hasFirst=!1,_.observables=[],_.subscriptions=[],_}return c.prototype._next=function(b){this.observables.push(b)},c.prototype._complete=function(){var b=this.observables,_=b.length;if(_===0)this.destination.complete();else{for(var $=0;$<_&&!this.hasFirst;$++){var k=b[$],et=subscribeToResult(this,k,void 0,$);this.subscriptions&&this.subscriptions.push(et),this.add(et)}this.observables=null}},c.prototype.notifyNext=function(b,_,$){if(!this.hasFirst){this.hasFirst=!0;for(var k=0;k<this.subscriptions.length;k++)if(k!==$){var et=this.subscriptions[k];et.unsubscribe(),this.remove(et)}this.subscriptions=null}this.destination.next(_)},c}(OuterSubscriber);function race(){for(var a=[],c=0;c<arguments.length;c++)a[c]=arguments[c];return function(_){return a.length===1&&isArray$5(a[0])&&(a=a[0]),_.lift.call(race$1.apply(void 0,[_].concat(a)))}}function repeat(a){return a===void 0&&(a=-1),function(c){return a===0?empty$2():a<0?c.lift(new RepeatOperator(-1,c)):c.lift(new RepeatOperator(a-1,c))}}var RepeatOperator=function(){function a(c,b){this.count=c,this.source=b}return a.prototype.call=function(c,b){return b.subscribe(new RepeatSubscriber(c,this.count,this.source))},a}(),RepeatSubscriber=function(a){__extends(c,a);function c(b,_,$){var k=a.call(this,b)||this;return k.count=_,k.source=$,k}return c.prototype.complete=function(){if(!this.isStopped){var b=this,_=b.source,$=b.count;if($===0)return a.prototype.complete.call(this);$>-1&&(this.count=$-1),_.subscribe(this._unsubscribeAndRecycle())}},c}(Subscriber);function repeatWhen(a){return function(c){return c.lift(new RepeatWhenOperator(a))}}var RepeatWhenOperator=function(){function a(c){this.notifier=c}return a.prototype.call=function(c,b){return b.subscribe(new RepeatWhenSubscriber(c,this.notifier,b))},a}(),RepeatWhenSubscriber=function(a){__extends(c,a);function c(b,_,$){var k=a.call(this,b)||this;return k.notifier=_,k.source=$,k.sourceIsBeingSubscribedTo=!0,k}return c.prototype.notifyNext=function(){this.sourceIsBeingSubscribedTo=!0,this.source.subscribe(this)},c.prototype.notifyComplete=function(){if(this.sourceIsBeingSubscribedTo===!1)return a.prototype.complete.call(this)},c.prototype.complete=function(){if(this.sourceIsBeingSubscribedTo=!1,!this.isStopped){if(this.retries||this.subscribeToRetries(),!this.retriesSubscription||this.retriesSubscription.closed)return a.prototype.complete.call(this);this._unsubscribeAndRecycle(),this.notifications.next(void 0)}},c.prototype._unsubscribe=function(){var b=this,_=b.notifications,$=b.retriesSubscription;_&&(_.unsubscribe(),this.notifications=void 0),$&&($.unsubscribe(),this.retriesSubscription=void 0),this.retries=void 0},c.prototype._unsubscribeAndRecycle=function(){var b=this._unsubscribe;return this._unsubscribe=null,a.prototype._unsubscribeAndRecycle.call(this),this._unsubscribe=b,this},c.prototype.subscribeToRetries=function(){this.notifications=new Subject;var b;try{var _=this.notifier;b=_(this.notifications)}catch{return a.prototype.complete.call(this)}this.retries=b,this.retriesSubscription=innerSubscribe(b,new SimpleInnerSubscriber(this))},c}(SimpleOuterSubscriber);function retry(a){return a===void 0&&(a=-1),function(c){return c.lift(new RetryOperator(a,c))}}var RetryOperator=function(){function a(c,b){this.count=c,this.source=b}return a.prototype.call=function(c,b){return b.subscribe(new RetrySubscriber(c,this.count,this.source))},a}(),RetrySubscriber=function(a){__extends(c,a);function c(b,_,$){var k=a.call(this,b)||this;return k.count=_,k.source=$,k}return c.prototype.error=function(b){if(!this.isStopped){var _=this,$=_.source,k=_.count;if(k===0)return a.prototype.error.call(this,b);k>-1&&(this.count=k-1),$.subscribe(this._unsubscribeAndRecycle())}},c}(Subscriber);function retryWhen(a){return function(c){return c.lift(new RetryWhenOperator(a,c))}}var RetryWhenOperator=function(){function a(c,b){this.notifier=c,this.source=b}return a.prototype.call=function(c,b){return b.subscribe(new RetryWhenSubscriber(c,this.notifier,this.source))},a}(),RetryWhenSubscriber=function(a){__extends(c,a);function c(b,_,$){var k=a.call(this,b)||this;return k.notifier=_,k.source=$,k}return c.prototype.error=function(b){if(!this.isStopped){var _=this.errors,$=this.retries,k=this.retriesSubscription;if($)this.errors=void 0,this.retriesSubscription=void 0;else{_=new Subject;try{var et=this.notifier;$=et(_)}catch(nt){return a.prototype.error.call(this,nt)}k=innerSubscribe($,new SimpleInnerSubscriber(this))}this._unsubscribeAndRecycle(),this.errors=_,this.retries=$,this.retriesSubscription=k,_.next(b)}},c.prototype._unsubscribe=function(){var b=this,_=b.errors,$=b.retriesSubscription;_&&(_.unsubscribe(),this.errors=void 0),$&&($.unsubscribe(),this.retriesSubscription=void 0),this.retries=void 0},c.prototype.notifyNext=function(){var b=this._unsubscribe;this._unsubscribe=null,this._unsubscribeAndRecycle(),this._unsubscribe=b,this.source.subscribe(this)},c}(SimpleOuterSubscriber);function sample(a){return function(c){return c.lift(new SampleOperator(a))}}var SampleOperator=function(){function a(c){this.notifier=c}return a.prototype.call=function(c,b){var _=new SampleSubscriber(c),$=b.subscribe(_);return $.add(innerSubscribe(this.notifier,new SimpleInnerSubscriber(_))),$},a}(),SampleSubscriber=function(a){__extends(c,a);function c(){var b=a!==null&&a.apply(this,arguments)||this;return b.hasValue=!1,b}return c.prototype._next=function(b){this.value=b,this.hasValue=!0},c.prototype.notifyNext=function(){this.emitValue()},c.prototype.notifyComplete=function(){this.emitValue()},c.prototype.emitValue=function(){this.hasValue&&(this.hasValue=!1,this.destination.next(this.value))},c}(SimpleOuterSubscriber);function sampleTime(a,c){return c===void 0&&(c=async$1),function(b){return b.lift(new SampleTimeOperator(a,c))}}var SampleTimeOperator=function(){function a(c,b){this.period=c,this.scheduler=b}return a.prototype.call=function(c,b){return b.subscribe(new SampleTimeSubscriber(c,this.period,this.scheduler))},a}(),SampleTimeSubscriber=function(a){__extends(c,a);function c(b,_,$){var k=a.call(this,b)||this;return k.period=_,k.scheduler=$,k.hasValue=!1,k.add($.schedule(dispatchNotification,_,{subscriber:k,period:_})),k}return c.prototype._next=function(b){this.lastValue=b,this.hasValue=!0},c.prototype.notifyNext=function(){this.hasValue&&(this.hasValue=!1,this.destination.next(this.lastValue))},c}(Subscriber);function dispatchNotification(a){var c=a.subscriber,b=a.period;c.notifyNext(),this.schedule(a,b)}function sequenceEqual(a,c){return function(b){return b.lift(new SequenceEqualOperator(a,c))}}var SequenceEqualOperator=function(){function a(c,b){this.compareTo=c,this.comparator=b}return a.prototype.call=function(c,b){return b.subscribe(new SequenceEqualSubscriber(c,this.compareTo,this.comparator))},a}(),SequenceEqualSubscriber=function(a){__extends(c,a);function c(b,_,$){var k=a.call(this,b)||this;return k.compareTo=_,k.comparator=$,k._a=[],k._b=[],k._oneComplete=!1,k.destination.add(_.subscribe(new SequenceEqualCompareToSubscriber(b,k))),k}return c.prototype._next=function(b){this._oneComplete&&this._b.length===0?this.emit(!1):(this._a.push(b),this.checkValues())},c.prototype._complete=function(){this._oneComplete?this.emit(this._a.length===0&&this._b.length===0):this._oneComplete=!0,this.unsubscribe()},c.prototype.checkValues=function(){for(var b=this,_=b._a,$=b._b,k=b.comparator;_.length>0&&$.length>0;){var et=_.shift(),nt=$.shift(),ot=!1;try{ot=k?k(et,nt):et===nt}catch(ht){this.destination.error(ht)}ot||this.emit(!1)}},c.prototype.emit=function(b){var _=this.destination;_.next(b),_.complete()},c.prototype.nextB=function(b){this._oneComplete&&this._a.length===0?this.emit(!1):(this._b.push(b),this.checkValues())},c.prototype.completeB=function(){this._oneComplete?this.emit(this._a.length===0&&this._b.length===0):this._oneComplete=!0},c}(Subscriber),SequenceEqualCompareToSubscriber=function(a){__extends(c,a);function c(b,_){var $=a.call(this,b)||this;return $.parent=_,$}return c.prototype._next=function(b){this.parent.nextB(b)},c.prototype._error=function(b){this.parent.error(b),this.unsubscribe()},c.prototype._complete=function(){this.parent.completeB(),this.unsubscribe()},c}(Subscriber);function shareSubjectFactory(){return new Subject}function share(){return function(a){return refCount()(multicast(shareSubjectFactory)(a))}}function shareReplay(a,c,b){var _;return a&&typeof a=="object"?_=a:_={bufferSize:a,windowTime:c,refCount:!1,scheduler:b},function($){return $.lift(shareReplayOperator(_))}}function shareReplayOperator(a){var c=a.bufferSize,b=c===void 0?Number.POSITIVE_INFINITY:c,_=a.windowTime,$=_===void 0?Number.POSITIVE_INFINITY:_,k=a.refCount,et=a.scheduler,nt,ot=0,ht,vt=!1,_t=!1;return function($t){ot++;var Tt;!nt||vt?(vt=!1,nt=new ReplaySubject(b,$,et),Tt=nt.subscribe(this),ht=$t.subscribe({next:function(At){nt.next(At)},error:function(At){vt=!0,nt.error(At)},complete:function(){_t=!0,ht=void 0,nt.complete()}}),_t&&(ht=void 0)):Tt=nt.subscribe(this),this.add(function(){ot--,Tt.unsubscribe(),Tt=void 0,ht&&!_t&&k&&ot===0&&(ht.unsubscribe(),ht=void 0,nt=void 0)})}}function single(a){return function(c){return c.lift(new SingleOperator(a,c))}}var SingleOperator=function(){function a(c,b){this.predicate=c,this.source=b}return a.prototype.call=function(c,b){return b.subscribe(new SingleSubscriber(c,this.predicate,this.source))},a}(),SingleSubscriber=function(a){__extends(c,a);function c(b,_,$){var k=a.call(this,b)||this;return k.predicate=_,k.source=$,k.seenValue=!1,k.index=0,k}return c.prototype.applySingleValue=function(b){this.seenValue?this.destination.error("Sequence contains more than one element"):(this.seenValue=!0,this.singleValue=b)},c.prototype._next=function(b){var _=this.index++;this.predicate?this.tryNext(b,_):this.applySingleValue(b)},c.prototype.tryNext=function(b,_){try{this.predicate(b,_,this.source)&&this.applySingleValue(b)}catch($){this.destination.error($)}},c.prototype._complete=function(){var b=this.destination;this.index>0?(b.next(this.seenValue?this.singleValue:void 0),b.complete()):b.error(new EmptyError)},c}(Subscriber);function skip(a){return function(c){return c.lift(new SkipOperator(a))}}var SkipOperator=function(){function a(c){this.total=c}return a.prototype.call=function(c,b){return b.subscribe(new SkipSubscriber(c,this.total))},a}(),SkipSubscriber=function(a){__extends(c,a);function c(b,_){var $=a.call(this,b)||this;return $.total=_,$.count=0,$}return c.prototype._next=function(b){++this.count>this.total&&this.destination.next(b)},c}(Subscriber);function skipLast(a){return function(c){return c.lift(new SkipLastOperator(a))}}var SkipLastOperator=function(){function a(c){if(this._skipCount=c,this._skipCount<0)throw new ArgumentOutOfRangeError}return a.prototype.call=function(c,b){return this._skipCount===0?b.subscribe(new Subscriber(c)):b.subscribe(new SkipLastSubscriber(c,this._skipCount))},a}(),SkipLastSubscriber=function(a){__extends(c,a);function c(b,_){var $=a.call(this,b)||this;return $._skipCount=_,$._count=0,$._ring=new Array(_),$}return c.prototype._next=function(b){var _=this._skipCount,$=this._count++;if($<_)this._ring[$]=b;else{var k=$%_,et=this._ring,nt=et[k];et[k]=b,this.destination.next(nt)}},c}(Subscriber);function skipUntil(a){return function(c){return c.lift(new SkipUntilOperator(a))}}var SkipUntilOperator=function(){function a(c){this.notifier=c}return a.prototype.call=function(c,b){return b.subscribe(new SkipUntilSubscriber(c,this.notifier))},a}(),SkipUntilSubscriber=function(a){__extends(c,a);function c(b,_){var $=a.call(this,b)||this;$.hasValue=!1;var k=new SimpleInnerSubscriber($);$.add(k),$.innerSubscription=k;var et=innerSubscribe(_,k);return et!==k&&($.add(et),$.innerSubscription=et),$}return c.prototype._next=function(b){this.hasValue&&a.prototype._next.call(this,b)},c.prototype.notifyNext=function(){this.hasValue=!0,this.innerSubscription&&this.innerSubscription.unsubscribe()},c.prototype.notifyComplete=function(){},c}(SimpleOuterSubscriber);function skipWhile(a){return function(c){return c.lift(new SkipWhileOperator(a))}}var SkipWhileOperator=function(){function a(c){this.predicate=c}return a.prototype.call=function(c,b){return b.subscribe(new SkipWhileSubscriber(c,this.predicate))},a}(),SkipWhileSubscriber=function(a){__extends(c,a);function c(b,_){var $=a.call(this,b)||this;return $.predicate=_,$.skipping=!0,$.index=0,$}return c.prototype._next=function(b){var _=this.destination;this.skipping&&this.tryCallPredicate(b),this.skipping||_.next(b)},c.prototype.tryCallPredicate=function(b){try{var _=this.predicate(b,this.index++);this.skipping=!!_}catch($){this.destination.error($)}},c}(Subscriber);function startWith(){for(var a=[],c=0;c<arguments.length;c++)a[c]=arguments[c];var b=a[a.length-1];return isScheduler(b)?(a.pop(),function(_){return concat$1(a,_,b)}):function(_){return concat$1(a,_)}}var nextHandle=1,RESOLVED=function(){return Promise.resolve()}(),activeHandles={};function findAndClearHandle(a){return a in activeHandles?(delete activeHandles[a],!0):!1}var Immediate={setImmediate:function(a){var c=nextHandle++;return activeHandles[c]=!0,RESOLVED.then(function(){return findAndClearHandle(c)&&a()}),c},clearImmediate:function(a){findAndClearHandle(a)}},AsapAction=function(a){__extends(c,a);function c(b,_){var $=a.call(this,b,_)||this;return $.scheduler=b,$.work=_,$}return c.prototype.requestAsyncId=function(b,_,$){return $===void 0&&($=0),$!==null&&$>0?a.prototype.requestAsyncId.call(this,b,_,$):(b.actions.push(this),b.scheduled||(b.scheduled=Immediate.setImmediate(b.flush.bind(b,null))))},c.prototype.recycleAsyncId=function(b,_,$){if($===void 0&&($=0),$!==null&&$>0||$===null&&this.delay>0)return a.prototype.recycleAsyncId.call(this,b,_,$);b.actions.length===0&&(Immediate.clearImmediate(_),b.scheduled=void 0)},c}(AsyncAction),AsapScheduler=function(a){__extends(c,a);function c(){return a!==null&&a.apply(this,arguments)||this}return c.prototype.flush=function(b){this.active=!0,this.scheduled=void 0;var _=this.actions,$,k=-1,et=_.length;b=b||_.shift();do if($=b.execute(b.state,b.delay))break;while(++k<et&&(b=_.shift()));if(this.active=!1,$){for(;++k<et&&(b=_.shift());)b.unsubscribe();throw $}},c}(AsyncScheduler),asapScheduler=new AsapScheduler(AsapAction),asap=asapScheduler,SubscribeOnObservable=function(a){__extends(c,a);function c(b,_,$){_===void 0&&(_=0),$===void 0&&($=asap);var k=a.call(this)||this;return k.source=b,k.delayTime=_,k.scheduler=$,(!isNumeric(_)||_<0)&&(k.delayTime=0),(!$||typeof $.schedule!="function")&&(k.scheduler=asap),k}return c.create=function(b,_,$){return _===void 0&&(_=0),$===void 0&&($=asap),new c(b,_,$)},c.dispatch=function(b){var _=b.source,$=b.subscriber;return this.add(_.subscribe($))},c.prototype._subscribe=function(b){var _=this.delayTime,$=this.source,k=this.scheduler;return k.schedule(c.dispatch,_,{source:$,subscriber:b})},c}(Observable);function subscribeOn(a,c){return c===void 0&&(c=0),function(_){return _.lift(new SubscribeOnOperator(a,c))}}var SubscribeOnOperator=function(){function a(c,b){this.scheduler=c,this.delay=b}return a.prototype.call=function(c,b){return new SubscribeOnObservable(b,this.delay,this.scheduler).subscribe(c)},a}();function switchMap(a,c){return typeof c=="function"?function(b){return b.pipe(switchMap(function(_,$){return from(a(_,$)).pipe(map(function(k,et){return c(_,k,$,et)}))}))}:function(b){return b.lift(new SwitchMapOperator(a))}}var SwitchMapOperator=function(){function a(c){this.project=c}return a.prototype.call=function(c,b){return b.subscribe(new SwitchMapSubscriber(c,this.project))},a}(),SwitchMapSubscriber=function(a){__extends(c,a);function c(b,_){var $=a.call(this,b)||this;return $.project=_,$.index=0,$}return c.prototype._next=function(b){var _,$=this.index++;try{_=this.project(b,$)}catch(k){this.destination.error(k);return}this._innerSub(_)},c.prototype._innerSub=function(b){var _=this.innerSubscription;_&&_.unsubscribe();var $=new SimpleInnerSubscriber(this),k=this.destination;k.add($),this.innerSubscription=innerSubscribe(b,$),this.innerSubscription!==$&&k.add(this.innerSubscription)},c.prototype._complete=function(){var b=this.innerSubscription;(!b||b.closed)&&a.prototype._complete.call(this),this.unsubscribe()},c.prototype._unsubscribe=function(){this.innerSubscription=void 0},c.prototype.notifyComplete=function(){this.innerSubscription=void 0,this.isStopped&&a.prototype._complete.call(this)},c.prototype.notifyNext=function(b){this.destination.next(b)},c}(SimpleOuterSubscriber);function switchAll(){return switchMap(identity$1)}function switchMapTo(a,c){return c?switchMap(function(){return a},c):switchMap(function(){return a})}function takeUntil(a){return function(c){return c.lift(new TakeUntilOperator(a))}}var TakeUntilOperator=function(){function a(c){this.notifier=c}return a.prototype.call=function(c,b){var _=new TakeUntilSubscriber(c),$=innerSubscribe(this.notifier,new SimpleInnerSubscriber(_));return $&&!_.seenValue?(_.add($),b.subscribe(_)):_},a}(),TakeUntilSubscriber=function(a){__extends(c,a);function c(b){var _=a.call(this,b)||this;return _.seenValue=!1,_}return c.prototype.notifyNext=function(){this.seenValue=!0,this.complete()},c.prototype.notifyComplete=function(){},c}(SimpleOuterSubscriber);function takeWhile(a,c){return c===void 0&&(c=!1),function(b){return b.lift(new TakeWhileOperator(a,c))}}var TakeWhileOperator=function(){function a(c,b){this.predicate=c,this.inclusive=b}return a.prototype.call=function(c,b){return b.subscribe(new TakeWhileSubscriber(c,this.predicate,this.inclusive))},a}(),TakeWhileSubscriber=function(a){__extends(c,a);function c(b,_,$){var k=a.call(this,b)||this;return k.predicate=_,k.inclusive=$,k.index=0,k}return c.prototype._next=function(b){var _=this.destination,$;try{$=this.predicate(b,this.index++)}catch(k){_.error(k);return}this.nextOrComplete(b,$)},c.prototype.nextOrComplete=function(b,_){var $=this.destination;_?$.next(b):(this.inclusive&&$.next(b),$.complete())},c}(Subscriber);function noop$6(){}function tap(a,c,b){return function($){return $.lift(new DoOperator(a,c,b))}}var DoOperator=function(){function a(c,b,_){this.nextOrObserver=c,this.error=b,this.complete=_}return a.prototype.call=function(c,b){return b.subscribe(new TapSubscriber(c,this.nextOrObserver,this.error,this.complete))},a}(),TapSubscriber=function(a){__extends(c,a);function c(b,_,$,k){var et=a.call(this,b)||this;return et._tapNext=noop$6,et._tapError=noop$6,et._tapComplete=noop$6,et._tapError=$||noop$6,et._tapComplete=k||noop$6,isFunction$3(_)?(et._context=et,et._tapNext=_):_&&(et._context=_,et._tapNext=_.next||noop$6,et._tapError=_.error||noop$6,et._tapComplete=_.complete||noop$6),et}return c.prototype._next=function(b){try{this._tapNext.call(this._context,b)}catch(_){this.destination.error(_);return}this.destination.next(b)},c.prototype._error=function(b){try{this._tapError.call(this._context,b)}catch(_){this.destination.error(_);return}this.destination.error(b)},c.prototype._complete=function(){try{this._tapComplete.call(this._context)}catch(b){this.destination.error(b);return}return this.destination.complete()},c}(Subscriber),defaultThrottleConfig={leading:!0,trailing:!1};function throttle(a,c){return c===void 0&&(c=defaultThrottleConfig),function(b){return b.lift(new ThrottleOperator(a,!!c.leading,!!c.trailing))}}var ThrottleOperator=function(){function a(c,b,_){this.durationSelector=c,this.leading=b,this.trailing=_}return a.prototype.call=function(c,b){return b.subscribe(new ThrottleSubscriber(c,this.durationSelector,this.leading,this.trailing))},a}(),ThrottleSubscriber=function(a){__extends(c,a);function c(b,_,$,k){var et=a.call(this,b)||this;return et.destination=b,et.durationSelector=_,et._leading=$,et._trailing=k,et._hasValue=!1,et}return c.prototype._next=function(b){this._hasValue=!0,this._sendValue=b,this._throttled||(this._leading?this.send():this.throttle(b))},c.prototype.send=function(){var b=this,_=b._hasValue,$=b._sendValue;_&&(this.destination.next($),this.throttle($)),this._hasValue=!1,this._sendValue=void 0},c.prototype.throttle=function(b){var _=this.tryDurationSelector(b);_&&this.add(this._throttled=innerSubscribe(_,new SimpleInnerSubscriber(this)))},c.prototype.tryDurationSelector=function(b){try{return this.durationSelector(b)}catch(_){return this.destination.error(_),null}},c.prototype.throttlingDone=function(){var b=this,_=b._throttled,$=b._trailing;_&&_.unsubscribe(),this._throttled=void 0,$&&this.send()},c.prototype.notifyNext=function(){this.throttlingDone()},c.prototype.notifyComplete=function(){this.throttlingDone()},c}(SimpleOuterSubscriber);function throttleTime(a,c,b){return c===void 0&&(c=async$1),b===void 0&&(b=defaultThrottleConfig),function(_){return _.lift(new ThrottleTimeOperator(a,c,b.leading,b.trailing))}}var ThrottleTimeOperator=function(){function a(c,b,_,$){this.duration=c,this.scheduler=b,this.leading=_,this.trailing=$}return a.prototype.call=function(c,b){return b.subscribe(new ThrottleTimeSubscriber(c,this.duration,this.scheduler,this.leading,this.trailing))},a}(),ThrottleTimeSubscriber=function(a){__extends(c,a);function c(b,_,$,k,et){var nt=a.call(this,b)||this;return nt.duration=_,nt.scheduler=$,nt.leading=k,nt.trailing=et,nt._hasTrailingValue=!1,nt._trailingValue=null,nt}return c.prototype._next=function(b){this.throttled?this.trailing&&(this._trailingValue=b,this._hasTrailingValue=!0):(this.add(this.throttled=this.scheduler.schedule(dispatchNext,this.duration,{subscriber:this})),this.leading?this.destination.next(b):this.trailing&&(this._trailingValue=b,this._hasTrailingValue=!0))},c.prototype._complete=function(){this._hasTrailingValue?(this.destination.next(this._trailingValue),this.destination.complete()):this.destination.complete()},c.prototype.clearThrottle=function(){var b=this.throttled;b&&(this.trailing&&this._hasTrailingValue&&(this.destination.next(this._trailingValue),this._trailingValue=null,this._hasTrailingValue=!1),b.unsubscribe(),this.remove(b),this.throttled=null)},c}(Subscriber);function dispatchNext(a){var c=a.subscriber;c.clearThrottle()}function defer(a){return new Observable(function(c){var b;try{b=a()}catch($){c.error($);return}var _=b?from(b):empty$2();return _.subscribe(c)})}function timeInterval(a){return a===void 0&&(a=async$1),function(c){return defer(function(){return c.pipe(scan(function(b,_){var $=b.current;return{value:_,current:a.now(),last:$}},{current:a.now(),value:void 0,last:void 0}),map(function(b){var _=b.current,$=b.last,k=b.value;return new TimeInterval(k,_-$)}))})}}var TimeInterval=function(){function a(c,b){this.value=c,this.interval=b}return a}(),TimeoutErrorImpl=function(){function a(){return Error.call(this),this.message="Timeout has occurred",this.name="TimeoutError",this}return a.prototype=Object.create(Error.prototype),a}(),TimeoutError=TimeoutErrorImpl;function timeoutWith(a,c,b){return b===void 0&&(b=async$1),function(_){var $=isDate$1(a),k=$?+a-b.now():Math.abs(a);return _.lift(new TimeoutWithOperator(k,$,c,b))}}var TimeoutWithOperator=function(){function a(c,b,_,$){this.waitFor=c,this.absoluteTimeout=b,this.withObservable=_,this.scheduler=$}return a.prototype.call=function(c,b){return b.subscribe(new TimeoutWithSubscriber(c,this.absoluteTimeout,this.waitFor,this.withObservable,this.scheduler))},a}(),TimeoutWithSubscriber=function(a){__extends(c,a);function c(b,_,$,k,et){var nt=a.call(this,b)||this;return nt.absoluteTimeout=_,nt.waitFor=$,nt.withObservable=k,nt.scheduler=et,nt.scheduleTimeout(),nt}return c.dispatchTimeout=function(b){var _=b.withObservable;b._unsubscribeAndRecycle(),b.add(innerSubscribe(_,new SimpleInnerSubscriber(b)))},c.prototype.scheduleTimeout=function(){var b=this.action;b?this.action=b.schedule(this,this.waitFor):this.add(this.action=this.scheduler.schedule(c.dispatchTimeout,this.waitFor,this))},c.prototype._next=function(b){this.absoluteTimeout||this.scheduleTimeout(),a.prototype._next.call(this,b)},c.prototype._unsubscribe=function(){this.action=void 0,this.scheduler=null,this.withObservable=null},c}(SimpleOuterSubscriber);function timeout(a,c){return c===void 0&&(c=async$1),timeoutWith(a,throwError(new TimeoutError),c)}function timestamp$2(a){return a===void 0&&(a=async$1),map(function(c){return new Timestamp$1(c,a.now())})}var Timestamp$1=function(){function a(c,b){this.value=c,this.timestamp=b}return a}();function toArrayReducer(a,c,b){return b===0?[c]:(a.push(c),a)}function toArray$2(){return reduce(toArrayReducer,[])}function window$1(a){return function(b){return b.lift(new WindowOperator$1(a))}}var WindowOperator$1=function(){function a(c){this.windowBoundaries=c}return a.prototype.call=function(c,b){var _=new WindowSubscriber$1(c),$=b.subscribe(_);return $.closed||_.add(innerSubscribe(this.windowBoundaries,new SimpleInnerSubscriber(_))),$},a}(),WindowSubscriber$1=function(a){__extends(c,a);function c(b){var _=a.call(this,b)||this;return _.window=new Subject,b.next(_.window),_}return c.prototype.notifyNext=function(){this.openWindow()},c.prototype.notifyError=function(b){this._error(b)},c.prototype.notifyComplete=function(){this._complete()},c.prototype._next=function(b){this.window.next(b)},c.prototype._error=function(b){this.window.error(b),this.destination.error(b)},c.prototype._complete=function(){this.window.complete(),this.destination.complete()},c.prototype._unsubscribe=function(){this.window=null},c.prototype.openWindow=function(){var b=this.window;b&&b.complete();var _=this.destination,$=this.window=new Subject;_.next($)},c}(SimpleOuterSubscriber);function windowCount(a,c){return c===void 0&&(c=0),function(_){return _.lift(new WindowCountOperator(a,c))}}var WindowCountOperator=function(){function a(c,b){this.windowSize=c,this.startWindowEvery=b}return a.prototype.call=function(c,b){return b.subscribe(new WindowCountSubscriber(c,this.windowSize,this.startWindowEvery))},a}(),WindowCountSubscriber=function(a){__extends(c,a);function c(b,_,$){var k=a.call(this,b)||this;return k.destination=b,k.windowSize=_,k.startWindowEvery=$,k.windows=[new Subject],k.count=0,b.next(k.windows[0]),k}return c.prototype._next=function(b){for(var _=this.startWindowEvery>0?this.startWindowEvery:this.windowSize,$=this.destination,k=this.windowSize,et=this.windows,nt=et.length,ot=0;ot<nt&&!this.closed;ot++)et[ot].next(b);var ht=this.count-k+1;if(ht>=0&&ht%_===0&&!this.closed&&et.shift().complete(),++this.count%_===0&&!this.closed){var vt=new Subject;et.push(vt),$.next(vt)}},c.prototype._error=function(b){var _=this.windows;if(_)for(;_.length>0&&!this.closed;)_.shift().error(b);this.destination.error(b)},c.prototype._complete=function(){var b=this.windows;if(b)for(;b.length>0&&!this.closed;)b.shift().complete();this.destination.complete()},c.prototype._unsubscribe=function(){this.count=0,this.windows=null},c}(Subscriber);function windowTime(a){var c=async$1,b=null,_=Number.POSITIVE_INFINITY;return isScheduler(arguments[3])&&(c=arguments[3]),isScheduler(arguments[2])?c=arguments[2]:isNumeric(arguments[2])&&(_=Number(arguments[2])),isScheduler(arguments[1])?c=arguments[1]:isNumeric(arguments[1])&&(b=Number(arguments[1])),function(k){return k.lift(new WindowTimeOperator(a,b,_,c))}}var WindowTimeOperator=function(){function a(c,b,_,$){this.windowTimeSpan=c,this.windowCreationInterval=b,this.maxWindowSize=_,this.scheduler=$}return a.prototype.call=function(c,b){return b.subscribe(new WindowTimeSubscriber(c,this.windowTimeSpan,this.windowCreationInterval,this.maxWindowSize,this.scheduler))},a}(),CountedSubject=function(a){__extends(c,a);function c(){var b=a!==null&&a.apply(this,arguments)||this;return b._numberOfNextedValues=0,b}return c.prototype.next=function(b){this._numberOfNextedValues++,a.prototype.next.call(this,b)},Object.defineProperty(c.prototype,"numberOfNextedValues",{get:function(){return this._numberOfNextedValues},enumerable:!0,configurable:!0}),c}(Subject),WindowTimeSubscriber=function(a){__extends(c,a);function c(b,_,$,k,et){var nt=a.call(this,b)||this;nt.destination=b,nt.windowTimeSpan=_,nt.windowCreationInterval=$,nt.maxWindowSize=k,nt.scheduler=et,nt.windows=[];var ot=nt.openWindow();if($!==null&&$>=0){var ht={subscriber:nt,window:ot,context:null},vt={windowTimeSpan:_,windowCreationInterval:$,subscriber:nt,scheduler:et};nt.add(et.schedule(dispatchWindowClose,_,ht)),nt.add(et.schedule(dispatchWindowCreation,$,vt))}else{var _t={subscriber:nt,window:ot,windowTimeSpan:_};nt.add(et.schedule(dispatchWindowTimeSpanOnly,_,_t))}return nt}return c.prototype._next=function(b){for(var _=this.windows,$=_.length,k=0;k<$;k++){var et=_[k];et.closed||(et.next(b),et.numberOfNextedValues>=this.maxWindowSize&&this.closeWindow(et))}},c.prototype._error=function(b){for(var _=this.windows;_.length>0;)_.shift().error(b);this.destination.error(b)},c.prototype._complete=function(){for(var b=this.windows;b.length>0;){var _=b.shift();_.closed||_.complete()}this.destination.complete()},c.prototype.openWindow=function(){var b=new CountedSubject;this.windows.push(b);var _=this.destination;return _.next(b),b},c.prototype.closeWindow=function(b){b.complete();var _=this.windows;_.splice(_.indexOf(b),1)},c}(Subscriber);function dispatchWindowTimeSpanOnly(a){var c=a.subscriber,b=a.windowTimeSpan,_=a.window;_&&c.closeWindow(_),a.window=c.openWindow(),this.schedule(a,b)}function dispatchWindowCreation(a){var c=a.windowTimeSpan,b=a.subscriber,_=a.scheduler,$=a.windowCreationInterval,k=b.openWindow(),et=this,nt={action:et,subscription:null},ot={subscriber:b,window:k,context:nt};nt.subscription=_.schedule(dispatchWindowClose,c,ot),et.add(nt.subscription),et.schedule(a,$)}function dispatchWindowClose(a){var c=a.subscriber,b=a.window,_=a.context;_&&_.action&&_.subscription&&_.action.remove(_.subscription),c.closeWindow(b)}function windowToggle(a,c){return function(b){return b.lift(new WindowToggleOperator(a,c))}}var WindowToggleOperator=function(){function a(c,b){this.openings=c,this.closingSelector=b}return a.prototype.call=function(c,b){return b.subscribe(new WindowToggleSubscriber(c,this.openings,this.closingSelector))},a}(),WindowToggleSubscriber=function(a){__extends(c,a);function c(b,_,$){var k=a.call(this,b)||this;return k.openings=_,k.closingSelector=$,k.contexts=[],k.add(k.openSubscription=subscribeToResult(k,_,_)),k}return c.prototype._next=function(b){var _=this.contexts;if(_)for(var $=_.length,k=0;k<$;k++)_[k].window.next(b)},c.prototype._error=function(b){var _=this.contexts;if(this.contexts=null,_)for(var $=_.length,k=-1;++k<$;){var et=_[k];et.window.error(b),et.subscription.unsubscribe()}a.prototype._error.call(this,b)},c.prototype._complete=function(){var b=this.contexts;if(this.contexts=null,b)for(var _=b.length,$=-1;++$<_;){var k=b[$];k.window.complete(),k.subscription.unsubscribe()}a.prototype._complete.call(this)},c.prototype._unsubscribe=function(){var b=this.contexts;if(this.contexts=null,b)for(var _=b.length,$=-1;++$<_;){var k=b[$];k.window.unsubscribe(),k.subscription.unsubscribe()}},c.prototype.notifyNext=function(b,_,$,k,et){if(b===this.openings){var nt=void 0;try{var ot=this.closingSelector;nt=ot(_)}catch($t){return this.error($t)}var ht=new Subject,vt=new Subscription,_t={window:ht,subscription:vt};this.contexts.push(_t);var kt=subscribeToResult(this,nt,_t);kt.closed?this.closeWindow(this.contexts.length-1):(kt.context=_t,vt.add(kt)),this.destination.next(ht)}else this.closeWindow(this.contexts.indexOf(b))},c.prototype.notifyError=function(b){this.error(b)},c.prototype.notifyComplete=function(b){b!==this.openSubscription&&this.closeWindow(this.contexts.indexOf(b.context))},c.prototype.closeWindow=function(b){if(b!==-1){var _=this.contexts,$=_[b],k=$.window,et=$.subscription;_.splice(b,1),k.complete(),et.unsubscribe()}},c}(OuterSubscriber);function windowWhen(a){return function(b){return b.lift(new WindowOperator(a))}}var WindowOperator=function(){function a(c){this.closingSelector=c}return a.prototype.call=function(c,b){return b.subscribe(new WindowSubscriber(c,this.closingSelector))},a}(),WindowSubscriber=function(a){__extends(c,a);function c(b,_){var $=a.call(this,b)||this;return $.destination=b,$.closingSelector=_,$.openWindow(),$}return c.prototype.notifyNext=function(b,_,$,k,et){this.openWindow(et)},c.prototype.notifyError=function(b){this._error(b)},c.prototype.notifyComplete=function(b){this.openWindow(b)},c.prototype._next=function(b){this.window.next(b)},c.prototype._error=function(b){this.window.error(b),this.destination.error(b),this.unsubscribeClosingNotification()},c.prototype._complete=function(){this.window.complete(),this.destination.complete(),this.unsubscribeClosingNotification()},c.prototype.unsubscribeClosingNotification=function(){this.closingNotification&&this.closingNotification.unsubscribe()},c.prototype.openWindow=function(b){b===void 0&&(b=null),b&&(this.remove(b),b.unsubscribe());var _=this.window;_&&_.complete();var $=this.window=new Subject;this.destination.next($);var k;try{var et=this.closingSelector;k=et()}catch(nt){this.destination.error(nt),this.window.error(nt);return}this.add(this.closingNotification=subscribeToResult(this,k))},c}(OuterSubscriber);function withLatestFrom(){for(var a=[],c=0;c<arguments.length;c++)a[c]=arguments[c];return function(b){var _;typeof a[a.length-1]=="function"&&(_=a.pop());var $=a;return b.lift(new WithLatestFromOperator($,_))}}var WithLatestFromOperator=function(){function a(c,b){this.observables=c,this.project=b}return a.prototype.call=function(c,b){return b.subscribe(new WithLatestFromSubscriber(c,this.observables,this.project))},a}(),WithLatestFromSubscriber=function(a){__extends(c,a);function c(b,_,$){var k=a.call(this,b)||this;k.observables=_,k.project=$,k.toRespond=[];var et=_.length;k.values=new Array(et);for(var nt=0;nt<et;nt++)k.toRespond.push(nt);for(var nt=0;nt<et;nt++){var ot=_[nt];k.add(subscribeToResult(k,ot,void 0,nt))}return k}return c.prototype.notifyNext=function(b,_,$){this.values[$]=_;var k=this.toRespond;if(k.length>0){var et=k.indexOf($);et!==-1&&k.splice(et,1)}},c.prototype.notifyComplete=function(){},c.prototype._next=function(b){if(this.toRespond.length===0){var _=[b].concat(this.values);this.project?this._tryProject(_):this.destination.next(_)}},c.prototype._tryProject=function(b){var _;try{_=this.project.apply(this,b)}catch($){this.destination.error($);return}this.destination.next(_)},c}(OuterSubscriber);function zip$1(){for(var a=[],c=0;c<arguments.length;c++)a[c]=arguments[c];var b=a[a.length-1];return typeof b=="function"&&a.pop(),fromArray$1(a,void 0).lift(new ZipOperator(b))}var ZipOperator=function(){function a(c){this.resultSelector=c}return a.prototype.call=function(c,b){return b.subscribe(new ZipSubscriber(c,this.resultSelector))},a}(),ZipSubscriber=function(a){__extends(c,a);function c(b,_,$){var k=a.call(this,b)||this;return k.resultSelector=_,k.iterators=[],k.active=0,k.resultSelector=typeof _=="function"?_:void 0,k}return c.prototype._next=function(b){var _=this.iterators;isArray$5(b)?_.push(new StaticArrayIterator(b)):typeof b[iterator]=="function"?_.push(new StaticIterator(b[iterator]())):_.push(new ZipBufferIterator(this.destination,this,b))},c.prototype._complete=function(){var b=this.iterators,_=b.length;if(this.unsubscribe(),_===0){this.destination.complete();return}this.active=_;for(var $=0;$<_;$++){var k=b[$];if(k.stillUnsubscribed){var et=this.destination;et.add(k.subscribe())}else this.active--}},c.prototype.notifyInactive=function(){this.active--,this.active===0&&this.destination.complete()},c.prototype.checkIterators=function(){for(var b=this.iterators,_=b.length,$=this.destination,k=0;k<_;k++){var et=b[k];if(typeof et.hasValue=="function"&&!et.hasValue())return}for(var nt=!1,ot=[],k=0;k<_;k++){var et=b[k],ht=et.next();if(et.hasCompleted()&&(nt=!0),ht.done){$.complete();return}ot.push(ht.value)}this.resultSelector?this._tryresultSelector(ot):$.next(ot),nt&&$.complete()},c.prototype._tryresultSelector=function(b){var _;try{_=this.resultSelector.apply(this,b)}catch($){this.destination.error($);return}this.destination.next(_)},c}(Subscriber),StaticIterator=function(){function a(c){this.iterator=c,this.nextResult=c.next()}return a.prototype.hasValue=function(){return!0},a.prototype.next=function(){var c=this.nextResult;return this.nextResult=this.iterator.next(),c},a.prototype.hasCompleted=function(){var c=this.nextResult;return!!(c&&c.done)},a}(),StaticArrayIterator=function(){function a(c){this.array=c,this.index=0,this.length=0,this.length=c.length}return a.prototype[iterator]=function(){return this},a.prototype.next=function(c){var b=this.index++,_=this.array;return b<this.length?{value:_[b],done:!1}:{value:null,done:!0}},a.prototype.hasValue=function(){return this.array.length>this.index},a.prototype.hasCompleted=function(){return this.array.length===this.index},a}(),ZipBufferIterator=function(a){__extends(c,a);function c(b,_,$){var k=a.call(this,b)||this;return k.parent=_,k.observable=$,k.stillUnsubscribed=!0,k.buffer=[],k.isComplete=!1,k}return c.prototype[iterator]=function(){return this},c.prototype.next=function(){var b=this.buffer;return b.length===0&&this.isComplete?{value:null,done:!0}:{value:b.shift(),done:!1}},c.prototype.hasValue=function(){return this.buffer.length>0},c.prototype.hasCompleted=function(){return this.buffer.length===0&&this.isComplete},c.prototype.notifyComplete=function(){this.buffer.length>0?(this.isComplete=!0,this.parent.notifyInactive()):this.destination.complete()},c.prototype.notifyNext=function(b){this.buffer.push(b),this.parent.checkIterators()},c.prototype.subscribe=function(){return innerSubscribe(this.observable,new SimpleInnerSubscriber(this))},c}(SimpleOuterSubscriber);function zip(){for(var a=[],c=0;c<arguments.length;c++)a[c]=arguments[c];return function(_){return _.lift.call(zip$1.apply(void 0,[_].concat(a)))}}function zipAll(a){return function(c){return c.lift(new ZipOperator(a))}}const operators=Object.freeze(Object.defineProperty({__proto__:null,audit,auditTime,buffer:buffer$2,bufferCount,bufferTime,bufferToggle,bufferWhen,catchError,combineAll,combineLatest,concat,concatAll,concatMap,concatMapTo,count,debounce:debounce$1,debounceTime,defaultIfEmpty,delay,delayWhen,dematerialize,distinct,distinctUntilChanged,distinctUntilKeyChanged,elementAt,endWith,every:every$1,exhaust,exhaustMap,expand,filter,finalize,find:find$2,findIndex,first,flatMap,groupBy,ignoreElements,isEmpty,last:last$1,map,mapTo,materialize,max:max$1,merge:merge$1,mergeAll,mergeMap,mergeMapTo,mergeScan,min,multicast,observeOn,onErrorResumeNext,pairwise,partition,pluck,publish,publishBehavior,publishLast,publishReplay,race,reduce,refCount,repeat,repeatWhen,retry,retryWhen,sample,sampleTime,scan,sequenceEqual,share,shareReplay,single,skip,skipLast,skipUntil,skipWhile,startWith,subscribeOn,switchAll,switchMap,switchMapTo,take,takeLast,takeUntil,takeWhile,tap,throttle,throttleTime,throwIfEmpty,timeInterval,timeout,timeoutWith,timestamp:timestamp$2,toArray:toArray$2,window:window$1,windowCount,windowTime,windowToggle,windowWhen,withLatestFrom,zip,zipAll},Symbol.toStringTag,{value:"Module"})),require$$1$2=getAugmentedNamespace(operators);var struct={};(function(a){var c=commonjsGlobal$1&&commonjsGlobal$1.__importDefault||function(Tt){return Tt&&Tt.__esModule?Tt:{default:Tt}};Object.defineProperty(a,"__esModule",{value:!0}),a.ListValue=a.Value=a.Struct_FieldsEntry=a.Struct=a.nullValueToNumber=a.nullValueToJSON=a.nullValueFromJSON=a.NullValue=a.protobufPackage=void 0;const b=c(minimal);a.protobufPackage="google.protobuf";var _;(function(Tt){Tt.NULL_VALUE="NULL_VALUE"})(_=a.NullValue||(a.NullValue={}));function $(Tt){switch(Tt){case 0:case"NULL_VALUE":return _.NULL_VALUE;default:throw new _t.Error("Unrecognized enum value "+Tt+" for enum NullValue")}}a.nullValueFromJSON=$;function k(Tt){switch(Tt){case _.NULL_VALUE:return"NULL_VALUE";default:throw new _t.Error("Unrecognized enum value "+Tt+" for enum NullValue")}}a.nullValueToJSON=k;function et(Tt){switch(Tt){case _.NULL_VALUE:return 0;default:throw new _t.Error("Unrecognized enum value "+Tt+" for enum NullValue")}}a.nullValueToNumber=et;function nt(){return{fields:{}}}a.Struct={encode(Tt,At=b.default.Writer.create()){return Object.entries(Tt.fields).forEach(([Mt,Dt])=>{Dt!==void 0&&a.Struct_FieldsEntry.encode({key:Mt,value:Dt},At.uint32(10).fork()).ldelim()}),At},decode(Tt,At){const Mt=Tt instanceof b.default.Reader?Tt:new b.default.Reader(Tt);let Dt=At===void 0?Mt.len:Mt.pos+At;const Rt=nt();for(;Mt.pos<Dt;){const xt=Mt.uint32();switch(xt>>>3){case 1:const Jt=a.Struct_FieldsEntry.decode(Mt,Mt.uint32());Jt.value!==void 0&&(Rt.fields[Jt.key]=Jt.value);break;default:Mt.skipType(xt&7);break}}return Rt},fromJSON(Tt){return{fields:kt(Tt.fields)?Object.entries(Tt.fields).reduce((At,[Mt,Dt])=>(At[Mt]=Dt,At),{}):{}}},toJSON(Tt){const At={};return At.fields={},Tt.fields&&Object.entries(Tt.fields).forEach(([Mt,Dt])=>{At.fields[Mt]=Dt}),At},fromPartial(Tt){var At;const Mt=nt();return Mt.fields=Object.entries((At=Tt.fields)!==null&&At!==void 0?At:{}).reduce((Dt,[Rt,xt])=>(xt!==void 0&&(Dt[Rt]=xt),Dt),{}),Mt},wrap(Tt){const At=nt();return Tt!==void 0&&Object.keys(Tt).forEach(Mt=>{At.fields[Mt]=Tt[Mt]}),At},unwrap(Tt){const At={};return Object.keys(Tt.fields).forEach(Mt=>{At[Mt]=Tt.fields[Mt]}),At}};function ot(){return{key:"",value:void 0}}a.Struct_FieldsEntry={encode(Tt,At=b.default.Writer.create()){return Tt.key!==""&&At.uint32(10).string(Tt.key),Tt.value!==void 0&&a.Value.encode(a.Value.wrap(Tt.value),At.uint32(18).fork()).ldelim(),At},decode(Tt,At){const Mt=Tt instanceof b.default.Reader?Tt:new b.default.Reader(Tt);let Dt=At===void 0?Mt.len:Mt.pos+At;const Rt=ot();for(;Mt.pos<Dt;){const xt=Mt.uint32();switch(xt>>>3){case 1:Rt.key=Mt.string();break;case 2:Rt.value=a.Value.unwrap(a.Value.decode(Mt,Mt.uint32()));break;default:Mt.skipType(xt&7);break}}return Rt},fromJSON(Tt){return{key:$t(Tt.key)?String(Tt.key):"",value:$t(Tt==null?void 0:Tt.value)?Tt.value:void 0}},toJSON(Tt){const At={};return Tt.key!==void 0&&(At.key=Tt.key),Tt.value!==void 0&&(At.value=Tt.value),At},fromPartial(Tt){var At,Mt;const Dt=ot();return Dt.key=(At=Tt.key)!==null&&At!==void 0?At:"",Dt.value=(Mt=Tt.value)!==null&&Mt!==void 0?Mt:void 0,Dt}};function ht(){return{nullValue:void 0,numberValue:void 0,stringValue:void 0,boolValue:void 0,structValue:void 0,listValue:void 0}}a.Value={encode(Tt,At=b.default.Writer.create()){return Tt.nullValue!==void 0&&At.uint32(8).int32(et(Tt.nullValue)),Tt.numberValue!==void 0&&At.uint32(17).double(Tt.numberValue),Tt.stringValue!==void 0&&At.uint32(26).string(Tt.stringValue),Tt.boolValue!==void 0&&At.uint32(32).bool(Tt.boolValue),Tt.structValue!==void 0&&a.Struct.encode(a.Struct.wrap(Tt.structValue),At.uint32(42).fork()).ldelim(),Tt.listValue!==void 0&&a.ListValue.encode(a.ListValue.wrap(Tt.listValue),At.uint32(50).fork()).ldelim(),At},decode(Tt,At){const Mt=Tt instanceof b.default.Reader?Tt:new b.default.Reader(Tt);let Dt=At===void 0?Mt.len:Mt.pos+At;const Rt=ht();for(;Mt.pos<Dt;){const xt=Mt.uint32();switch(xt>>>3){case 1:Rt.nullValue=$(Mt.int32());break;case 2:Rt.numberValue=Mt.double();break;case 3:Rt.stringValue=Mt.string();break;case 4:Rt.boolValue=Mt.bool();break;case 5:Rt.structValue=a.Struct.unwrap(a.Struct.decode(Mt,Mt.uint32()));break;case 6:Rt.listValue=a.ListValue.unwrap(a.ListValue.decode(Mt,Mt.uint32()));break;default:Mt.skipType(xt&7);break}}return Rt},fromJSON(Tt){return{nullValue:$t(Tt.nullValue)?$(Tt.nullValue):void 0,numberValue:$t(Tt.numberValue)?Number(Tt.numberValue):void 0,stringValue:$t(Tt.stringValue)?String(Tt.stringValue):void 0,boolValue:$t(Tt.boolValue)?!!Tt.boolValue:void 0,structValue:kt(Tt.structValue)?Tt.structValue:void 0,listValue:Array.isArray(Tt.listValue)?[...Tt.listValue]:void 0}},toJSON(Tt){const At={};return Tt.nullValue!==void 0&&(At.nullValue=Tt.nullValue!==void 0?k(Tt.nullValue):void 0),Tt.numberValue!==void 0&&(At.numberValue=Tt.numberValue),Tt.stringValue!==void 0&&(At.stringValue=Tt.stringValue),Tt.boolValue!==void 0&&(At.boolValue=Tt.boolValue),Tt.structValue!==void 0&&(At.structValue=Tt.structValue),Tt.listValue!==void 0&&(At.listValue=Tt.listValue),At},fromPartial(Tt){var At,Mt,Dt,Rt,xt,Jt;const ar=ht();return ar.nullValue=(At=Tt.nullValue)!==null&&At!==void 0?At:void 0,ar.numberValue=(Mt=Tt.numberValue)!==null&&Mt!==void 0?Mt:void 0,ar.stringValue=(Dt=Tt.stringValue)!==null&&Dt!==void 0?Dt:void 0,ar.boolValue=(Rt=Tt.boolValue)!==null&&Rt!==void 0?Rt:void 0,ar.structValue=(xt=Tt.structValue)!==null&&xt!==void 0?xt:void 0,ar.listValue=(Jt=Tt.listValue)!==null&&Jt!==void 0?Jt:void 0,ar},wrap(Tt){const At=ht();if(Tt===null)At.nullValue=_.NULL_VALUE;else if(typeof Tt=="boolean")At.boolValue=Tt;else if(typeof Tt=="number")At.numberValue=Tt;else if(typeof Tt=="string")At.stringValue=Tt;else if(Array.isArray(Tt))At.listValue=Tt;else if(typeof Tt=="object")At.structValue=Tt;else if(typeof Tt<"u")throw new Error("Unsupported any value type: "+typeof Tt);return At},unwrap(Tt){if((Tt==null?void 0:Tt.stringValue)!==void 0)return Tt.stringValue;if((Tt==null?void 0:Tt.numberValue)!==void 0)return Tt.numberValue;if((Tt==null?void 0:Tt.boolValue)!==void 0)return Tt.boolValue;if((Tt==null?void 0:Tt.structValue)!==void 0)return Tt.structValue;if((Tt==null?void 0:Tt.listValue)!==void 0)return Tt.listValue;if((Tt==null?void 0:Tt.nullValue)!==void 0)return null}};function vt(){return{values:[]}}a.ListValue={encode(Tt,At=b.default.Writer.create()){for(const Mt of Tt.values)a.Value.encode(a.Value.wrap(Mt),At.uint32(10).fork()).ldelim();return At},decode(Tt,At){const Mt=Tt instanceof b.default.Reader?Tt:new b.default.Reader(Tt);let Dt=At===void 0?Mt.len:Mt.pos+At;const Rt=vt();for(;Mt.pos<Dt;){const xt=Mt.uint32();switch(xt>>>3){case 1:Rt.values.push(a.Value.unwrap(a.Value.decode(Mt,Mt.uint32())));break;default:Mt.skipType(xt&7);break}}return Rt},fromJSON(Tt){return{values:Array.isArray(Tt==null?void 0:Tt.values)?[...Tt.values]:[]}},toJSON(Tt){const At={};return Tt.values?At.values=Tt.values.map(Mt=>Mt):At.values=[],At},fromPartial(Tt){var At;const Mt=vt();return Mt.values=((At=Tt.values)===null||At===void 0?void 0:At.map(Dt=>Dt))||[],Mt},wrap(Tt){const At=vt();return At.values=Tt??[],At},unwrap(Tt){return Tt.values}};var _t=(()=>{if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof commonjsGlobal$1<"u")return commonjsGlobal$1;throw"Unable to locate global object"})();function kt(Tt){return typeof Tt=="object"&&Tt!==null}function $t(Tt){return Tt!=null}})(struct);var timestamp$1={},__importDefault$9=commonjsGlobal$1&&commonjsGlobal$1.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(timestamp$1,"__esModule",{value:!0});timestamp$1.Timestamp=timestamp$1.protobufPackage=void 0;const long_1$2=__importDefault$9(umdExports),minimal_1$2=__importDefault$9(minimal);timestamp$1.protobufPackage="google.protobuf";function createBaseTimestamp$1(){return{seconds:0,nanos:0}}timestamp$1.Timestamp={encode(a,c=minimal_1$2.default.Writer.create()){return a.seconds!==0&&c.uint32(8).int64(a.seconds),a.nanos!==0&&c.uint32(16).int32(a.nanos),c},decode(a,c){const b=a instanceof minimal_1$2.default.Reader?a:new minimal_1$2.default.Reader(a);let _=c===void 0?b.len:b.pos+c;const $=createBaseTimestamp$1();for(;b.pos<_;){const k=b.uint32();switch(k>>>3){case 1:$.seconds=longToNumber$2(b.int64());break;case 2:$.nanos=b.int32();break;default:b.skipType(k&7);break}}return $},fromJSON(a){return{seconds:isSet$3(a.seconds)?Number(a.seconds):0,nanos:isSet$3(a.nanos)?Number(a.nanos):0}},toJSON(a){const c={};return a.seconds!==void 0&&(c.seconds=Math.round(a.seconds)),a.nanos!==void 0&&(c.nanos=Math.round(a.nanos)),c},fromPartial(a){var c,b;const _=createBaseTimestamp$1();return _.seconds=(c=a.seconds)!==null&&c!==void 0?c:0,_.nanos=(b=a.nanos)!==null&&b!==void 0?b:0,_}};var tsProtoGlobalThis=(()=>{if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof commonjsGlobal$1<"u")return commonjsGlobal$1;throw"Unable to locate global object"})();function longToNumber$2(a){if(a.gt(Number.MAX_SAFE_INTEGER))throw new tsProtoGlobalThis.Error("Value is larger than Number.MAX_SAFE_INTEGER");return a.toNumber()}minimal_1$2.default.util.Long!==long_1$2.default&&(minimal_1$2.default.util.Long=long_1$2.default,minimal_1$2.default.configure());function isSet$3(a){return a!=null}(function(a){var c=commonjsGlobal$1&&commonjsGlobal$1.__importDefault||function(wt){return wt&&wt.__esModule?wt:{default:wt}};Object.defineProperty(a,"__esModule",{value:!0}),a.HistoryServiceDefinition=a.HistoryServiceClientImpl=a.WebhookServiceDefinition=a.WebhookServiceClientImpl=a.EventServiceDefinition=a.EventServiceClientImpl=a.Event=a.GetEventsResponse=a.GetEventsRequest=a.GetEventsQuery_Target=a.GetEventsQuery_TargetValue=a.GetEventsQuery=a.EventsStreamResponse=a.EventsStreamRequest=a.EventsStreamReconnectRequest=a.EventsStreamError=a.SubscribePayload=a.DeleteWebhookSubscriptionResponse=a.DeleteWebhookSubscriptionRequest=a.CreateWebhookSubscriptionResponse=a.CreateWebhookSubscriptionRequest=a.ListWebhookSubscriptionsResponse=a.ListWebhookSubscriptionsRequest=a.WebhookSubscription=a.PublishEventResponse=a.PublishEventRequest=a.ServiceEventTarget=a.EventTarget=a.getEventsQuery_PaginationOrderToNumber=a.getEventsQuery_PaginationOrderToJSON=a.getEventsQuery_PaginationOrderFromJSON=a.GetEventsQuery_PaginationOrder=a.eventsStreamMessageTypeToNumber=a.eventsStreamMessageTypeToJSON=a.eventsStreamMessageTypeFromJSON=a.EventsStreamMessageType=a.protobufPackage=void 0;const b=c(minimal),_=require$$1$2,$=struct,k=timestamp$1;a.protobufPackage="apis.event.v2";var et;(function(wt){wt.EVENTS_STREAM_MESSAGE_TYPE_UNSPECIFIED="EVENTS_STREAM_MESSAGE_TYPE_UNSPECIFIED",wt.EVENTS_STREAM_MESSAGE_TYPE_PING="EVENTS_STREAM_MESSAGE_TYPE_PING",wt.EVENTS_STREAM_MESSAGE_TYPE_ERROR="EVENTS_STREAM_MESSAGE_TYPE_ERROR",wt.EVENTS_STREAM_MESSAGE_TYPE_SUBSCRIBED="EVENTS_STREAM_MESSAGE_TYPE_SUBSCRIBED",wt.EVENTS_STREAM_MESSAGE_TYPE_UNSUBSCRIBED="EVENTS_STREAM_MESSAGE_TYPE_UNSUBSCRIBED",wt.EVENTS_STREAM_MESSAGE_TYPE_PUBLISHED="EVENTS_STREAM_MESSAGE_TYPE_PUBLISHED"})(et=a.EventsStreamMessageType||(a.EventsStreamMessageType={}));function nt(wt){switch(wt){case 0:case"EVENTS_STREAM_MESSAGE_TYPE_UNSPECIFIED":return et.EVENTS_STREAM_MESSAGE_TYPE_UNSPECIFIED;case 1:case"EVENTS_STREAM_MESSAGE_TYPE_PING":return et.EVENTS_STREAM_MESSAGE_TYPE_PING;case 2:case"EVENTS_STREAM_MESSAGE_TYPE_ERROR":return et.EVENTS_STREAM_MESSAGE_TYPE_ERROR;case 3:case"EVENTS_STREAM_MESSAGE_TYPE_SUBSCRIBED":return et.EVENTS_STREAM_MESSAGE_TYPE_SUBSCRIBED;case 4:case"EVENTS_STREAM_MESSAGE_TYPE_UNSUBSCRIBED":return et.EVENTS_STREAM_MESSAGE_TYPE_UNSUBSCRIBED;case 5:case"EVENTS_STREAM_MESSAGE_TYPE_PUBLISHED":return et.EVENTS_STREAM_MESSAGE_TYPE_PUBLISHED;default:throw new Gt.Error("Unrecognized enum value "+wt+" for enum EventsStreamMessageType")}}a.eventsStreamMessageTypeFromJSON=nt;function ot(wt){switch(wt){case et.EVENTS_STREAM_MESSAGE_TYPE_UNSPECIFIED:return"EVENTS_STREAM_MESSAGE_TYPE_UNSPECIFIED";case et.EVENTS_STREAM_MESSAGE_TYPE_PING:return"EVENTS_STREAM_MESSAGE_TYPE_PING";case et.EVENTS_STREAM_MESSAGE_TYPE_ERROR:return"EVENTS_STREAM_MESSAGE_TYPE_ERROR";case et.EVENTS_STREAM_MESSAGE_TYPE_SUBSCRIBED:return"EVENTS_STREAM_MESSAGE_TYPE_SUBSCRIBED";case et.EVENTS_STREAM_MESSAGE_TYPE_UNSUBSCRIBED:return"EVENTS_STREAM_MESSAGE_TYPE_UNSUBSCRIBED";case et.EVENTS_STREAM_MESSAGE_TYPE_PUBLISHED:return"EVENTS_STREAM_MESSAGE_TYPE_PUBLISHED";default:throw new Gt.Error("Unrecognized enum value "+wt+" for enum EventsStreamMessageType")}}a.eventsStreamMessageTypeToJSON=ot;function ht(wt){switch(wt){case et.EVENTS_STREAM_MESSAGE_TYPE_UNSPECIFIED:return 0;case et.EVENTS_STREAM_MESSAGE_TYPE_PING:return 1;case et.EVENTS_STREAM_MESSAGE_TYPE_ERROR:return 2;case et.EVENTS_STREAM_MESSAGE_TYPE_SUBSCRIBED:return 3;case et.EVENTS_STREAM_MESSAGE_TYPE_UNSUBSCRIBED:return 4;case et.EVENTS_STREAM_MESSAGE_TYPE_PUBLISHED:return 5;default:throw new Gt.Error("Unrecognized enum value "+wt+" for enum EventsStreamMessageType")}}a.eventsStreamMessageTypeToNumber=ht;var vt;(function(wt){wt.PAGINATION_ORDER_UNSPECIFIED="PAGINATION_ORDER_UNSPECIFIED",wt.PAGINATION_ORDER_CREATED_AT_DESC="PAGINATION_ORDER_CREATED_AT_DESC",wt.PAGINATION_ORDER_CREATED_AT_ASC="PAGINATION_ORDER_CREATED_AT_ASC"})(vt=a.GetEventsQuery_PaginationOrder||(a.GetEventsQuery_PaginationOrder={}));function _t(wt){switch(wt){case 0:case"PAGINATION_ORDER_UNSPECIFIED":return vt.PAGINATION_ORDER_UNSPECIFIED;case 1:case"PAGINATION_ORDER_CREATED_AT_DESC":return vt.PAGINATION_ORDER_CREATED_AT_DESC;case 2:case"PAGINATION_ORDER_CREATED_AT_ASC":return vt.PAGINATION_ORDER_CREATED_AT_ASC;default:throw new Gt.Error("Unrecognized enum value "+wt+" for enum GetEventsQuery_PaginationOrder")}}a.getEventsQuery_PaginationOrderFromJSON=_t;function kt(wt){switch(wt){case vt.PAGINATION_ORDER_UNSPECIFIED:return"PAGINATION_ORDER_UNSPECIFIED";case vt.PAGINATION_ORDER_CREATED_AT_DESC:return"PAGINATION_ORDER_CREATED_AT_DESC";case vt.PAGINATION_ORDER_CREATED_AT_ASC:return"PAGINATION_ORDER_CREATED_AT_ASC";default:throw new Gt.Error("Unrecognized enum value "+wt+" for enum GetEventsQuery_PaginationOrder")}}a.getEventsQuery_PaginationOrderToJSON=kt;function $t(wt){switch(wt){case vt.PAGINATION_ORDER_UNSPECIFIED:return 0;case vt.PAGINATION_ORDER_CREATED_AT_DESC:return 1;case vt.PAGINATION_ORDER_CREATED_AT_ASC:return 2;default:throw new Gt.Error("Unrecognized enum value "+wt+" for enum GetEventsQuery_PaginationOrder")}}a.getEventsQuery_PaginationOrderToNumber=$t;function Tt(){return{collectionId:void 0,projectId:void 0,layoutId:void 0}}a.EventTarget={encode(wt,Vt=b.default.Writer.create()){return wt.collectionId!==void 0&&Vt.uint32(42).string(wt.collectionId),wt.projectId!==void 0&&Vt.uint32(34).string(wt.projectId),wt.layoutId!==void 0&&Vt.uint32(10).string(wt.layoutId),Vt},decode(wt,Vt){const Qt=wt instanceof b.default.Reader?wt:new b.default.Reader(wt);let Nt=Vt===void 0?Qt.len:Qt.pos+Vt;const st=Tt();for(;Qt.pos<Nt;){const Ct=Qt.uint32();switch(Ct>>>3){case 5:st.collectionId=Qt.string();break;case 4:st.projectId=Qt.string();break;case 1:st.layoutId=Qt.string();break;default:Qt.skipType(Ct&7);break}}return st},fromJSON(wt){return{collectionId:zt(wt.collectionId)?String(wt.collectionId):void 0,projectId:zt(wt.projectId)?String(wt.projectId):void 0,layoutId:zt(wt.layoutId)?String(wt.layoutId):void 0}},toJSON(wt){const Vt={};return wt.collectionId!==void 0&&(Vt.collectionId=wt.collectionId),wt.projectId!==void 0&&(Vt.projectId=wt.projectId),wt.layoutId!==void 0&&(Vt.layoutId=wt.layoutId),Vt},fromPartial(wt){var Vt,Qt,Nt;const st=Tt();return st.collectionId=(Vt=wt.collectionId)!==null&&Vt!==void 0?Vt:void 0,st.projectId=(Qt=wt.projectId)!==null&&Qt!==void 0?Qt:void 0,st.layoutId=(Nt=wt.layoutId)!==null&&Nt!==void 0?Nt:void 0,st}};function At(){return{userId:void 0,collectionId:void 0,projectId:void 0,layoutId:void 0,serviceUserId:void 0}}a.ServiceEventTarget={encode(wt,Vt=b.default.Writer.create()){return wt.userId!==void 0&&Vt.uint32(10).string(wt.userId),wt.collectionId!==void 0&&Vt.uint32(18).string(wt.collectionId),wt.projectId!==void 0&&Vt.uint32(26).string(wt.projectId),wt.layoutId!==void 0&&Vt.uint32(34).string(wt.layoutId),wt.serviceUserId!==void 0&&Vt.uint32(42).string(wt.serviceUserId),Vt},decode(wt,Vt){const Qt=wt instanceof b.default.Reader?wt:new b.default.Reader(wt);let Nt=Vt===void 0?Qt.len:Qt.pos+Vt;const st=At();for(;Qt.pos<Nt;){const Ct=Qt.uint32();switch(Ct>>>3){case 1:st.userId=Qt.string();break;case 2:st.collectionId=Qt.string();break;case 3:st.projectId=Qt.string();break;case 4:st.layoutId=Qt.string();break;case 5:st.serviceUserId=Qt.string();break;default:Qt.skipType(Ct&7);break}}return st},fromJSON(wt){return{userId:zt(wt.userId)?String(wt.userId):void 0,collectionId:zt(wt.collectionId)?String(wt.collectionId):void 0,projectId:zt(wt.projectId)?String(wt.projectId):void 0,layoutId:zt(wt.layoutId)?String(wt.layoutId):void 0,serviceUserId:zt(wt.serviceUserId)?String(wt.serviceUserId):void 0}},toJSON(wt){const Vt={};return wt.userId!==void 0&&(Vt.userId=wt.userId),wt.collectionId!==void 0&&(Vt.collectionId=wt.collectionId),wt.projectId!==void 0&&(Vt.projectId=wt.projectId),wt.layoutId!==void 0&&(Vt.layoutId=wt.layoutId),wt.serviceUserId!==void 0&&(Vt.serviceUserId=wt.serviceUserId),Vt},fromPartial(wt){var Vt,Qt,Nt,st,Ct;const qt=At();return qt.userId=(Vt=wt.userId)!==null&&Vt!==void 0?Vt:void 0,qt.collectionId=(Qt=wt.collectionId)!==null&&Qt!==void 0?Qt:void 0,qt.projectId=(Nt=wt.projectId)!==null&&Nt!==void 0?Nt:void 0,qt.layoutId=(st=wt.layoutId)!==null&&st!==void 0?st:void 0,qt.serviceUserId=(Ct=wt.serviceUserId)!==null&&Ct!==void 0?Ct:void 0,qt}};function Mt(){return{name:"",payload:void 0,requestMetadata:void 0,target:void 0}}a.PublishEventRequest={encode(wt,Vt=b.default.Writer.create()){return wt.name!==""&&Vt.uint32(10).string(wt.name),wt.payload!==void 0&&$.Struct.encode($.Struct.wrap(wt.payload),Vt.uint32(18).fork()).ldelim(),wt.requestMetadata!==void 0&&$.Value.encode($.Value.wrap(wt.requestMetadata),Vt.uint32(34).fork()).ldelim(),wt.target!==void 0&&a.EventTarget.encode(wt.target,Vt.uint32(26).fork()).ldelim(),Vt},decode(wt,Vt){const Qt=wt instanceof b.default.Reader?wt:new b.default.Reader(wt);let Nt=Vt===void 0?Qt.len:Qt.pos+Vt;const st=Mt();for(;Qt.pos<Nt;){const Ct=Qt.uint32();switch(Ct>>>3){case 1:st.name=Qt.string();break;case 2:st.payload=$.Struct.unwrap($.Struct.decode(Qt,Qt.uint32()));break;case 4:st.requestMetadata=$.Value.unwrap($.Value.decode(Qt,Qt.uint32()));break;case 3:st.target=a.EventTarget.decode(Qt,Qt.uint32());break;default:Qt.skipType(Ct&7);break}}return st},fromJSON(wt){return{name:zt(wt.name)?String(wt.name):"",payload:Wt(wt.payload)?wt.payload:void 0,requestMetadata:zt(wt==null?void 0:wt.requestMetadata)?wt.requestMetadata:void 0,target:zt(wt.target)?a.EventTarget.fromJSON(wt.target):void 0}},toJSON(wt){const Vt={};return wt.name!==void 0&&(Vt.name=wt.name),wt.payload!==void 0&&(Vt.payload=wt.payload),wt.requestMetadata!==void 0&&(Vt.requestMetadata=wt.requestMetadata),wt.target!==void 0&&(Vt.target=wt.target?a.EventTarget.toJSON(wt.target):void 0),Vt},fromPartial(wt){var Vt,Qt,Nt;const st=Mt();return st.name=(Vt=wt.name)!==null&&Vt!==void 0?Vt:"",st.payload=(Qt=wt.payload)!==null&&Qt!==void 0?Qt:void 0,st.requestMetadata=(Nt=wt.requestMetadata)!==null&&Nt!==void 0?Nt:void 0,st.target=wt.target!==void 0&&wt.target!==null?a.EventTarget.fromPartial(wt.target):void 0,st}};function Dt(){return{name:"",payload:void 0,target:void 0,requestMetadata:void 0,id:""}}a.PublishEventResponse={encode(wt,Vt=b.default.Writer.create()){return wt.name!==""&&Vt.uint32(10).string(wt.name),wt.payload!==void 0&&$.Struct.encode($.Struct.wrap(wt.payload),Vt.uint32(18).fork()).ldelim(),wt.target!==void 0&&a.EventTarget.encode(wt.target,Vt.uint32(26).fork()).ldelim(),wt.requestMetadata!==void 0&&$.Value.encode($.Value.wrap(wt.requestMetadata),Vt.uint32(34).fork()).ldelim(),wt.id!==""&&Vt.uint32(42).string(wt.id),Vt},decode(wt,Vt){const Qt=wt instanceof b.default.Reader?wt:new b.default.Reader(wt);let Nt=Vt===void 0?Qt.len:Qt.pos+Vt;const st=Dt();for(;Qt.pos<Nt;){const Ct=Qt.uint32();switch(Ct>>>3){case 1:st.name=Qt.string();break;case 2:st.payload=$.Struct.unwrap($.Struct.decode(Qt,Qt.uint32()));break;case 3:st.target=a.EventTarget.decode(Qt,Qt.uint32());break;case 4:st.requestMetadata=$.Value.unwrap($.Value.decode(Qt,Qt.uint32()));break;case 5:st.id=Qt.string();break;default:Qt.skipType(Ct&7);break}}return st},fromJSON(wt){return{name:zt(wt.name)?String(wt.name):"",payload:Wt(wt.payload)?wt.payload:void 0,target:zt(wt.target)?a.EventTarget.fromJSON(wt.target):void 0,requestMetadata:zt(wt==null?void 0:wt.requestMetadata)?wt.requestMetadata:void 0,id:zt(wt.id)?String(wt.id):""}},toJSON(wt){const Vt={};return wt.name!==void 0&&(Vt.name=wt.name),wt.payload!==void 0&&(Vt.payload=wt.payload),wt.target!==void 0&&(Vt.target=wt.target?a.EventTarget.toJSON(wt.target):void 0),wt.requestMetadata!==void 0&&(Vt.requestMetadata=wt.requestMetadata),wt.id!==void 0&&(Vt.id=wt.id),Vt},fromPartial(wt){var Vt,Qt,Nt,st;const Ct=Dt();return Ct.name=(Vt=wt.name)!==null&&Vt!==void 0?Vt:"",Ct.payload=(Qt=wt.payload)!==null&&Qt!==void 0?Qt:void 0,Ct.target=wt.target!==void 0&&wt.target!==null?a.EventTarget.fromPartial(wt.target):void 0,Ct.requestMetadata=(Nt=wt.requestMetadata)!==null&&Nt!==void 0?Nt:void 0,Ct.id=(st=wt.id)!==null&&st!==void 0?st:"",Ct}};function Rt(){return{webhookId:"",events:[],target:void 0,url:"",timeoutMs:void 0}}a.WebhookSubscription={encode(wt,Vt=b.default.Writer.create()){wt.webhookId!==""&&Vt.uint32(10).string(wt.webhookId);for(const Qt of wt.events)Vt.uint32(18).string(Qt);return wt.target!==void 0&&a.ServiceEventTarget.encode(wt.target,Vt.uint32(26).fork()).ldelim(),wt.url!==""&&Vt.uint32(34).string(wt.url),wt.timeoutMs!==void 0&&Vt.uint32(40).uint32(wt.timeoutMs),Vt},decode(wt,Vt){const Qt=wt instanceof b.default.Reader?wt:new b.default.Reader(wt);let Nt=Vt===void 0?Qt.len:Qt.pos+Vt;const st=Rt();for(;Qt.pos<Nt;){const Ct=Qt.uint32();switch(Ct>>>3){case 1:st.webhookId=Qt.string();break;case 2:st.events.push(Qt.string());break;case 3:st.target=a.ServiceEventTarget.decode(Qt,Qt.uint32());break;case 4:st.url=Qt.string();break;case 5:st.timeoutMs=Qt.uint32();break;default:Qt.skipType(Ct&7);break}}return st},fromJSON(wt){return{webhookId:zt(wt.webhookId)?String(wt.webhookId):"",events:Array.isArray(wt==null?void 0:wt.events)?wt.events.map(Vt=>String(Vt)):[],target:zt(wt.target)?a.ServiceEventTarget.fromJSON(wt.target):void 0,url:zt(wt.url)?String(wt.url):"",timeoutMs:zt(wt.timeoutMs)?Number(wt.timeoutMs):void 0}},toJSON(wt){const Vt={};return wt.webhookId!==void 0&&(Vt.webhookId=wt.webhookId),wt.events?Vt.events=wt.events.map(Qt=>Qt):Vt.events=[],wt.target!==void 0&&(Vt.target=wt.target?a.ServiceEventTarget.toJSON(wt.target):void 0),wt.url!==void 0&&(Vt.url=wt.url),wt.timeoutMs!==void 0&&(Vt.timeoutMs=Math.round(wt.timeoutMs)),Vt},fromPartial(wt){var Vt,Qt,Nt,st;const Ct=Rt();return Ct.webhookId=(Vt=wt.webhookId)!==null&&Vt!==void 0?Vt:"",Ct.events=((Qt=wt.events)===null||Qt===void 0?void 0:Qt.map(qt=>qt))||[],Ct.target=wt.target!==void 0&&wt.target!==null?a.ServiceEventTarget.fromPartial(wt.target):void 0,Ct.url=(Nt=wt.url)!==null&&Nt!==void 0?Nt:"",Ct.timeoutMs=(st=wt.timeoutMs)!==null&&st!==void 0?st:void 0,Ct}};function xt(){return{target:void 0}}a.ListWebhookSubscriptionsRequest={encode(wt,Vt=b.default.Writer.create()){return wt.target!==void 0&&a.ServiceEventTarget.encode(wt.target,Vt.uint32(10).fork()).ldelim(),Vt},decode(wt,Vt){const Qt=wt instanceof b.default.Reader?wt:new b.default.Reader(wt);let Nt=Vt===void 0?Qt.len:Qt.pos+Vt;const st=xt();for(;Qt.pos<Nt;){const Ct=Qt.uint32();switch(Ct>>>3){case 1:st.target=a.ServiceEventTarget.decode(Qt,Qt.uint32());break;default:Qt.skipType(Ct&7);break}}return st},fromJSON(wt){return{target:zt(wt.target)?a.ServiceEventTarget.fromJSON(wt.target):void 0}},toJSON(wt){const Vt={};return wt.target!==void 0&&(Vt.target=wt.target?a.ServiceEventTarget.toJSON(wt.target):void 0),Vt},fromPartial(wt){const Vt=xt();return Vt.target=wt.target!==void 0&&wt.target!==null?a.ServiceEventTarget.fromPartial(wt.target):void 0,Vt}};function Jt(){return{subscriptions:[]}}a.ListWebhookSubscriptionsResponse={encode(wt,Vt=b.default.Writer.create()){for(const Qt of wt.subscriptions)a.WebhookSubscription.encode(Qt,Vt.uint32(10).fork()).ldelim();return Vt},decode(wt,Vt){const Qt=wt instanceof b.default.Reader?wt:new b.default.Reader(wt);let Nt=Vt===void 0?Qt.len:Qt.pos+Vt;const st=Jt();for(;Qt.pos<Nt;){const Ct=Qt.uint32();switch(Ct>>>3){case 1:st.subscriptions.push(a.WebhookSubscription.decode(Qt,Qt.uint32()));break;default:Qt.skipType(Ct&7);break}}return st},fromJSON(wt){return{subscriptions:Array.isArray(wt==null?void 0:wt.subscriptions)?wt.subscriptions.map(Vt=>a.WebhookSubscription.fromJSON(Vt)):[]}},toJSON(wt){const Vt={};return wt.subscriptions?Vt.subscriptions=wt.subscriptions.map(Qt=>Qt?a.WebhookSubscription.toJSON(Qt):void 0):Vt.subscriptions=[],Vt},fromPartial(wt){var Vt;const Qt=Jt();return Qt.subscriptions=((Vt=wt.subscriptions)===null||Vt===void 0?void 0:Vt.map(Nt=>a.WebhookSubscription.fromPartial(Nt)))||[],Qt}};function ar(){return{events:[],target:void 0,url:"",timeoutMs:void 0}}a.CreateWebhookSubscriptionRequest={encode(wt,Vt=b.default.Writer.create()){for(const Qt of wt.events)Vt.uint32(10).string(Qt);return wt.target!==void 0&&a.ServiceEventTarget.encode(wt.target,Vt.uint32(18).fork()).ldelim(),wt.url!==""&&Vt.uint32(26).string(wt.url),wt.timeoutMs!==void 0&&Vt.uint32(32).uint32(wt.timeoutMs),Vt},decode(wt,Vt){const Qt=wt instanceof b.default.Reader?wt:new b.default.Reader(wt);let Nt=Vt===void 0?Qt.len:Qt.pos+Vt;const st=ar();for(;Qt.pos<Nt;){const Ct=Qt.uint32();switch(Ct>>>3){case 1:st.events.push(Qt.string());break;case 2:st.target=a.ServiceEventTarget.decode(Qt,Qt.uint32());break;case 3:st.url=Qt.string();break;case 4:st.timeoutMs=Qt.uint32();break;default:Qt.skipType(Ct&7);break}}return st},fromJSON(wt){return{events:Array.isArray(wt==null?void 0:wt.events)?wt.events.map(Vt=>String(Vt)):[],target:zt(wt.target)?a.ServiceEventTarget.fromJSON(wt.target):void 0,url:zt(wt.url)?String(wt.url):"",timeoutMs:zt(wt.timeoutMs)?Number(wt.timeoutMs):void 0}},toJSON(wt){const Vt={};return wt.events?Vt.events=wt.events.map(Qt=>Qt):Vt.events=[],wt.target!==void 0&&(Vt.target=wt.target?a.ServiceEventTarget.toJSON(wt.target):void 0),wt.url!==void 0&&(Vt.url=wt.url),wt.timeoutMs!==void 0&&(Vt.timeoutMs=Math.round(wt.timeoutMs)),Vt},fromPartial(wt){var Vt,Qt,Nt;const st=ar();return st.events=((Vt=wt.events)===null||Vt===void 0?void 0:Vt.map(Ct=>Ct))||[],st.target=wt.target!==void 0&&wt.target!==null?a.ServiceEventTarget.fromPartial(wt.target):void 0,st.url=(Qt=wt.url)!==null&&Qt!==void 0?Qt:"",st.timeoutMs=(Nt=wt.timeoutMs)!==null&&Nt!==void 0?Nt:void 0,st}};function nr(){return{subscription:void 0}}a.CreateWebhookSubscriptionResponse={encode(wt,Vt=b.default.Writer.create()){return wt.subscription!==void 0&&a.WebhookSubscription.encode(wt.subscription,Vt.uint32(10).fork()).ldelim(),Vt},decode(wt,Vt){const Qt=wt instanceof b.default.Reader?wt:new b.default.Reader(wt);let Nt=Vt===void 0?Qt.len:Qt.pos+Vt;const st=nr();for(;Qt.pos<Nt;){const Ct=Qt.uint32();switch(Ct>>>3){case 1:st.subscription=a.WebhookSubscription.decode(Qt,Qt.uint32());break;default:Qt.skipType(Ct&7);break}}return st},fromJSON(wt){return{subscription:zt(wt.subscription)?a.WebhookSubscription.fromJSON(wt.subscription):void 0}},toJSON(wt){const Vt={};return wt.subscription!==void 0&&(Vt.subscription=wt.subscription?a.WebhookSubscription.toJSON(wt.subscription):void 0),Vt},fromPartial(wt){const Vt=nr();return Vt.subscription=wt.subscription!==void 0&&wt.subscription!==null?a.WebhookSubscription.fromPartial(wt.subscription):void 0,Vt}};function pr(){return{webhookId:""}}a.DeleteWebhookSubscriptionRequest={encode(wt,Vt=b.default.Writer.create()){return wt.webhookId!==""&&Vt.uint32(10).string(wt.webhookId),Vt},decode(wt,Vt){const Qt=wt instanceof b.default.Reader?wt:new b.default.Reader(wt);let Nt=Vt===void 0?Qt.len:Qt.pos+Vt;const st=pr();for(;Qt.pos<Nt;){const Ct=Qt.uint32();switch(Ct>>>3){case 1:st.webhookId=Qt.string();break;default:Qt.skipType(Ct&7);break}}return st},fromJSON(wt){return{webhookId:zt(wt.webhookId)?String(wt.webhookId):""}},toJSON(wt){const Vt={};return wt.webhookId!==void 0&&(Vt.webhookId=wt.webhookId),Vt},fromPartial(wt){var Vt;const Qt=pr();return Qt.webhookId=(Vt=wt.webhookId)!==null&&Vt!==void 0?Vt:"",Qt}};function ur(){return{}}a.DeleteWebhookSubscriptionResponse={encode(wt,Vt=b.default.Writer.create()){return Vt},decode(wt,Vt){const Qt=wt instanceof b.default.Reader?wt:new b.default.Reader(wt);let Nt=Vt===void 0?Qt.len:Qt.pos+Vt;const st=ur();for(;Qt.pos<Nt;){const Ct=Qt.uint32();switch(Ct>>>3){default:Qt.skipType(Ct&7);break}}return st},fromJSON(wt){return{}},toJSON(wt){return{}},fromPartial(wt){return ur()}};function Ot(){return{name:"",events:[],target:void 0}}a.SubscribePayload={encode(wt,Vt=b.default.Writer.create()){wt.name!==""&&Vt.uint32(10).string(wt.name);for(const Qt of wt.events)Vt.uint32(26).string(Qt);return wt.target!==void 0&&a.EventTarget.encode(wt.target,Vt.uint32(18).fork()).ldelim(),Vt},decode(wt,Vt){const Qt=wt instanceof b.default.Reader?wt:new b.default.Reader(wt);let Nt=Vt===void 0?Qt.len:Qt.pos+Vt;const st=Ot();for(;Qt.pos<Nt;){const Ct=Qt.uint32();switch(Ct>>>3){case 1:st.name=Qt.string();break;case 3:st.events.push(Qt.string());break;case 2:st.target=a.EventTarget.decode(Qt,Qt.uint32());break;default:Qt.skipType(Ct&7);break}}return st},fromJSON(wt){return{name:zt(wt.name)?String(wt.name):"",events:Array.isArray(wt==null?void 0:wt.events)?wt.events.map(Vt=>String(Vt)):[],target:zt(wt.target)?a.EventTarget.fromJSON(wt.target):void 0}},toJSON(wt){const Vt={};return wt.name!==void 0&&(Vt.name=wt.name),wt.events?Vt.events=wt.events.map(Qt=>Qt):Vt.events=[],wt.target!==void 0&&(Vt.target=wt.target?a.EventTarget.toJSON(wt.target):void 0),Vt},fromPartial(wt){var Vt,Qt;const Nt=Ot();return Nt.name=(Vt=wt.name)!==null&&Vt!==void 0?Vt:"",Nt.events=((Qt=wt.events)===null||Qt===void 0?void 0:Qt.map(st=>st))||[],Nt.target=wt.target!==void 0&&wt.target!==null?a.EventTarget.fromPartial(wt.target):void 0,Nt}};function It(){return{code:0,message:""}}a.EventsStreamError={encode(wt,Vt=b.default.Writer.create()){return wt.code!==0&&Vt.uint32(8).int32(wt.code),wt.message!==""&&Vt.uint32(18).string(wt.message),Vt},decode(wt,Vt){const Qt=wt instanceof b.default.Reader?wt:new b.default.Reader(wt);let Nt=Vt===void 0?Qt.len:Qt.pos+Vt;const st=It();for(;Qt.pos<Nt;){const Ct=Qt.uint32();switch(Ct>>>3){case 1:st.code=Qt.int32();break;case 2:st.message=Qt.string();break;default:Qt.skipType(Ct&7);break}}return st},fromJSON(wt){return{code:zt(wt.code)?Number(wt.code):0,message:zt(wt.message)?String(wt.message):""}},toJSON(wt){const Vt={};return wt.code!==void 0&&(Vt.code=Math.round(wt.code)),wt.message!==void 0&&(Vt.message=wt.message),Vt},fromPartial(wt){var Vt,Qt;const Nt=It();return Nt.code=(Vt=wt.code)!==null&&Vt!==void 0?Vt:0,Nt.message=(Qt=wt.message)!==null&&Qt!==void 0?Qt:"",Nt}};function ut(){return{reauthenticate:!1,beforeTimestamp:""}}a.EventsStreamReconnectRequest={encode(wt,Vt=b.default.Writer.create()){return wt.reauthenticate===!0&&Vt.uint32(8).bool(wt.reauthenticate),wt.beforeTimestamp!==""&&Vt.uint32(18).string(wt.beforeTimestamp),Vt},decode(wt,Vt){const Qt=wt instanceof b.default.Reader?wt:new b.default.Reader(wt);let Nt=Vt===void 0?Qt.len:Qt.pos+Vt;const st=ut();for(;Qt.pos<Nt;){const Ct=Qt.uint32();switch(Ct>>>3){case 1:st.reauthenticate=Qt.bool();break;case 2:st.beforeTimestamp=Qt.string();break;default:Qt.skipType(Ct&7);break}}return st},fromJSON(wt){return{reauthenticate:zt(wt.reauthenticate)?!!wt.reauthenticate:!1,beforeTimestamp:zt(wt.beforeTimestamp)?String(wt.beforeTimestamp):""}},toJSON(wt){const Vt={};return wt.reauthenticate!==void 0&&(Vt.reauthenticate=wt.reauthenticate),wt.beforeTimestamp!==void 0&&(Vt.beforeTimestamp=wt.beforeTimestamp),Vt},fromPartial(wt){var Vt,Qt;const Nt=ut();return Nt.reauthenticate=(Vt=wt.reauthenticate)!==null&&Vt!==void 0?Vt:!1,Nt.beforeTimestamp=(Qt=wt.beforeTimestamp)!==null&&Qt!==void 0?Qt:"",Nt}};function _e(){return{correlationId:void 0,subscribe:void 0,unsubscribe:void 0,publish:void 0,ping:void 0}}a.EventsStreamRequest={encode(wt,Vt=b.default.Writer.create()){return wt.correlationId!==void 0&&Vt.uint32(10).string(wt.correlationId),wt.subscribe!==void 0&&a.SubscribePayload.encode(wt.subscribe,Vt.uint32(802).fork()).ldelim(),wt.unsubscribe!==void 0&&a.SubscribePayload.encode(wt.unsubscribe,Vt.uint32(810).fork()).ldelim(),wt.publish!==void 0&&a.PublishEventRequest.encode(wt.publish,Vt.uint32(818).fork()).ldelim(),wt.ping!==void 0&&Vt.uint32(826).string(wt.ping),Vt},decode(wt,Vt){const Qt=wt instanceof b.default.Reader?wt:new b.default.Reader(wt);let Nt=Vt===void 0?Qt.len:Qt.pos+Vt;const st=_e();for(;Qt.pos<Nt;){const Ct=Qt.uint32();switch(Ct>>>3){case 1:st.correlationId=Qt.string();break;case 100:st.subscribe=a.SubscribePayload.decode(Qt,Qt.uint32());break;case 101:st.unsubscribe=a.SubscribePayload.decode(Qt,Qt.uint32());break;case 102:st.publish=a.PublishEventRequest.decode(Qt,Qt.uint32());break;case 103:st.ping=Qt.string();break;default:Qt.skipType(Ct&7);break}}return st},fromJSON(wt){return{correlationId:zt(wt.correlationId)?String(wt.correlationId):void 0,subscribe:zt(wt.subscribe)?a.SubscribePayload.fromJSON(wt.subscribe):void 0,unsubscribe:zt(wt.unsubscribe)?a.SubscribePayload.fromJSON(wt.unsubscribe):void 0,publish:zt(wt.publish)?a.PublishEventRequest.fromJSON(wt.publish):void 0,ping:zt(wt.ping)?String(wt.ping):void 0}},toJSON(wt){const Vt={};return wt.correlationId!==void 0&&(Vt.correlationId=wt.correlationId),wt.subscribe!==void 0&&(Vt.subscribe=wt.subscribe?a.SubscribePayload.toJSON(wt.subscribe):void 0),wt.unsubscribe!==void 0&&(Vt.unsubscribe=wt.unsubscribe?a.SubscribePayload.toJSON(wt.unsubscribe):void 0),wt.publish!==void 0&&(Vt.publish=wt.publish?a.PublishEventRequest.toJSON(wt.publish):void 0),wt.ping!==void 0&&(Vt.ping=wt.ping),Vt},fromPartial(wt){var Vt,Qt;const Nt=_e();return Nt.correlationId=(Vt=wt.correlationId)!==null&&Vt!==void 0?Vt:void 0,Nt.subscribe=wt.subscribe!==void 0&&wt.subscribe!==null?a.SubscribePayload.fromPartial(wt.subscribe):void 0,Nt.unsubscribe=wt.unsubscribe!==void 0&&wt.unsubscribe!==null?a.SubscribePayload.fromPartial(wt.unsubscribe):void 0,Nt.publish=wt.publish!==void 0&&wt.publish!==null?a.PublishEventRequest.fromPartial(wt.publish):void 0,Nt.ping=(Qt=wt.ping)!==null&&Qt!==void 0?Qt:void 0,Nt}};function tt(){return{correlationId:void 0,sessionId:void 0,event:void 0,pong:void 0,error:void 0,subscribed:void 0,unsubscribed:void 0,published:void 0,reconnectBefore:void 0}}a.EventsStreamResponse={encode(wt,Vt=b.default.Writer.create()){return wt.correlationId!==void 0&&Vt.uint32(18).string(wt.correlationId),wt.sessionId!==void 0&&Vt.uint32(26).string(wt.sessionId),wt.event!==void 0&&a.PublishEventResponse.encode(wt.event,Vt.uint32(802).fork()).ldelim(),wt.pong!==void 0&&Vt.uint32(1602).string(wt.pong),wt.error!==void 0&&a.EventsStreamError.encode(wt.error,Vt.uint32(1610).fork()).ldelim(),wt.subscribed!==void 0&&a.SubscribePayload.encode(wt.subscribed,Vt.uint32(1618).fork()).ldelim(),wt.unsubscribed!==void 0&&a.SubscribePayload.encode(wt.unsubscribed,Vt.uint32(1626).fork()).ldelim(),wt.published!==void 0&&a.PublishEventResponse.encode(wt.published,Vt.uint32(1634).fork()).ldelim(),wt.reconnectBefore!==void 0&&a.EventsStreamReconnectRequest.encode(wt.reconnectBefore,Vt.uint32(1642).fork()).ldelim(),Vt},decode(wt,Vt){const Qt=wt instanceof b.default.Reader?wt:new b.default.Reader(wt);let Nt=Vt===void 0?Qt.len:Qt.pos+Vt;const st=tt();for(;Qt.pos<Nt;){const Ct=Qt.uint32();switch(Ct>>>3){case 2:st.correlationId=Qt.string();break;case 3:st.sessionId=Qt.string();break;case 100:st.event=a.PublishEventResponse.decode(Qt,Qt.uint32());break;case 200:st.pong=Qt.string();break;case 201:st.error=a.EventsStreamError.decode(Qt,Qt.uint32());break;case 202:st.subscribed=a.SubscribePayload.decode(Qt,Qt.uint32());break;case 203:st.unsubscribed=a.SubscribePayload.decode(Qt,Qt.uint32());break;case 204:st.published=a.PublishEventResponse.decode(Qt,Qt.uint32());break;case 205:st.reconnectBefore=a.EventsStreamReconnectRequest.decode(Qt,Qt.uint32());break;default:Qt.skipType(Ct&7);break}}return st},fromJSON(wt){return{correlationId:zt(wt.correlationId)?String(wt.correlationId):void 0,sessionId:zt(wt.sessionId)?String(wt.sessionId):void 0,event:zt(wt.event)?a.PublishEventResponse.fromJSON(wt.event):void 0,pong:zt(wt.pong)?String(wt.pong):void 0,error:zt(wt.error)?a.EventsStreamError.fromJSON(wt.error):void 0,subscribed:zt(wt.subscribed)?a.SubscribePayload.fromJSON(wt.subscribed):void 0,unsubscribed:zt(wt.unsubscribed)?a.SubscribePayload.fromJSON(wt.unsubscribed):void 0,published:zt(wt.published)?a.PublishEventResponse.fromJSON(wt.published):void 0,reconnectBefore:zt(wt.reconnectBefore)?a.EventsStreamReconnectRequest.fromJSON(wt.reconnectBefore):void 0}},toJSON(wt){const Vt={};return wt.correlationId!==void 0&&(Vt.correlationId=wt.correlationId),wt.sessionId!==void 0&&(Vt.sessionId=wt.sessionId),wt.event!==void 0&&(Vt.event=wt.event?a.PublishEventResponse.toJSON(wt.event):void 0),wt.pong!==void 0&&(Vt.pong=wt.pong),wt.error!==void 0&&(Vt.error=wt.error?a.EventsStreamError.toJSON(wt.error):void 0),wt.subscribed!==void 0&&(Vt.subscribed=wt.subscribed?a.SubscribePayload.toJSON(wt.subscribed):void 0),wt.unsubscribed!==void 0&&(Vt.unsubscribed=wt.unsubscribed?a.SubscribePayload.toJSON(wt.unsubscribed):void 0),wt.published!==void 0&&(Vt.published=wt.published?a.PublishEventResponse.toJSON(wt.published):void 0),wt.reconnectBefore!==void 0&&(Vt.reconnectBefore=wt.reconnectBefore?a.EventsStreamReconnectRequest.toJSON(wt.reconnectBefore):void 0),Vt},fromPartial(wt){var Vt,Qt,Nt;const st=tt();return st.correlationId=(Vt=wt.correlationId)!==null&&Vt!==void 0?Vt:void 0,st.sessionId=(Qt=wt.sessionId)!==null&&Qt!==void 0?Qt:void 0,st.event=wt.event!==void 0&&wt.event!==null?a.PublishEventResponse.fromPartial(wt.event):void 0,st.pong=(Nt=wt.pong)!==null&&Nt!==void 0?Nt:void 0,st.error=wt.error!==void 0&&wt.error!==null?a.EventsStreamError.fromPartial(wt.error):void 0,st.subscribed=wt.subscribed!==void 0&&wt.subscribed!==null?a.SubscribePayload.fromPartial(wt.subscribed):void 0,st.unsubscribed=wt.unsubscribed!==void 0&&wt.unsubscribed!==null?a.SubscribePayload.fromPartial(wt.unsubscribed):void 0,st.published=wt.published!==void 0&&wt.published!==null?a.PublishEventResponse.fromPartial(wt.published):void 0,st.reconnectBefore=wt.reconnectBefore!==void 0&&wt.reconnectBefore!==null?a.EventsStreamReconnectRequest.fromPartial(wt.reconnectBefore):void 0,st}};function it(){return{limit:0,order:vt.PAGINATION_ORDER_UNSPECIFIED,events:[],target:void 0,afterTimestamp:void 0,beforeTimestamp:void 0}}a.GetEventsQuery={encode(wt,Vt=b.default.Writer.create()){wt.limit!==0&&Vt.uint32(8).int32(wt.limit),wt.order!==vt.PAGINATION_ORDER_UNSPECIFIED&&Vt.uint32(16).int32($t(wt.order));for(const Qt of wt.events)Vt.uint32(26).string(Qt);return wt.target!==void 0&&a.GetEventsQuery_Target.encode(wt.target,Vt.uint32(34).fork()).ldelim(),wt.afterTimestamp!==void 0&&k.Timestamp.encode(rr(wt.afterTimestamp),Vt.uint32(42).fork()).ldelim(),wt.beforeTimestamp!==void 0&&k.Timestamp.encode(rr(wt.beforeTimestamp),Vt.uint32(50).fork()).ldelim(),Vt},decode(wt,Vt){const Qt=wt instanceof b.default.Reader?wt:new b.default.Reader(wt);let Nt=Vt===void 0?Qt.len:Qt.pos+Vt;const st=it();for(;Qt.pos<Nt;){const Ct=Qt.uint32();switch(Ct>>>3){case 1:st.limit=Qt.int32();break;case 2:st.order=_t(Qt.int32());break;case 3:st.events.push(Qt.string());break;case 4:st.target=a.GetEventsQuery_Target.decode(Qt,Qt.uint32());break;case 5:st.afterTimestamp=ir(k.Timestamp.decode(Qt,Qt.uint32()));break;case 6:st.beforeTimestamp=ir(k.Timestamp.decode(Qt,Qt.uint32()));break;default:Qt.skipType(Ct&7);break}}return st},fromJSON(wt){return{limit:zt(wt.limit)?Number(wt.limit):0,order:zt(wt.order)?_t(wt.order):vt.PAGINATION_ORDER_UNSPECIFIED,events:Array.isArray(wt==null?void 0:wt.events)?wt.events.map(Vt=>String(Vt)):[],target:zt(wt.target)?a.GetEventsQuery_Target.fromJSON(wt.target):void 0,afterTimestamp:zt(wt.afterTimestamp)?String(wt.afterTimestamp):void 0,beforeTimestamp:zt(wt.beforeTimestamp)?String(wt.beforeTimestamp):void 0}},toJSON(wt){const Vt={};return wt.limit!==void 0&&(Vt.limit=Math.round(wt.limit)),wt.order!==void 0&&(Vt.order=kt(wt.order)),wt.events?Vt.events=wt.events.map(Qt=>Qt):Vt.events=[],wt.target!==void 0&&(Vt.target=wt.target?a.GetEventsQuery_Target.toJSON(wt.target):void 0),wt.afterTimestamp!==void 0&&(Vt.afterTimestamp=wt.afterTimestamp),wt.beforeTimestamp!==void 0&&(Vt.beforeTimestamp=wt.beforeTimestamp),Vt},fromPartial(wt){var Vt,Qt,Nt,st,Ct;const qt=it();return qt.limit=(Vt=wt.limit)!==null&&Vt!==void 0?Vt:0,qt.order=(Qt=wt.order)!==null&&Qt!==void 0?Qt:vt.PAGINATION_ORDER_UNSPECIFIED,qt.events=((Nt=wt.events)===null||Nt===void 0?void 0:Nt.map(cr=>cr))||[],qt.target=wt.target!==void 0&&wt.target!==null?a.GetEventsQuery_Target.fromPartial(wt.target):void 0,qt.afterTimestamp=(st=wt.afterTimestamp)!==null&&st!==void 0?st:void 0,qt.beforeTimestamp=(Ct=wt.beforeTimestamp)!==null&&Ct!==void 0?Ct:void 0,qt}};function dt(){return{value:"",explicitOnly:!1}}a.GetEventsQuery_TargetValue={encode(wt,Vt=b.default.Writer.create()){return wt.value!==""&&Vt.uint32(10).string(wt.value),wt.explicitOnly===!0&&Vt.uint32(16).bool(wt.explicitOnly),Vt},decode(wt,Vt){const Qt=wt instanceof b.default.Reader?wt:new b.default.Reader(wt);let Nt=Vt===void 0?Qt.len:Qt.pos+Vt;const st=dt();for(;Qt.pos<Nt;){const Ct=Qt.uint32();switch(Ct>>>3){case 1:st.value=Qt.string();break;case 2:st.explicitOnly=Qt.bool();break;default:Qt.skipType(Ct&7);break}}return st},fromJSON(wt){return{value:zt(wt.value)?String(wt.value):"",explicitOnly:zt(wt.explicitOnly)?!!wt.explicitOnly:!1}},toJSON(wt){const Vt={};return wt.value!==void 0&&(Vt.value=wt.value),wt.explicitOnly!==void 0&&(Vt.explicitOnly=wt.explicitOnly),Vt},fromPartial(wt){var Vt,Qt;const Nt=dt();return Nt.value=(Vt=wt.value)!==null&&Vt!==void 0?Vt:"",Nt.explicitOnly=(Qt=wt.explicitOnly)!==null&&Qt!==void 0?Qt:!1,Nt}};function lt(){return{serviceUserId:void 0,collectionId:void 0,projectId:void 0,layoutId:void 0}}a.GetEventsQuery_Target={encode(wt,Vt=b.default.Writer.create()){return wt.serviceUserId!==void 0&&a.GetEventsQuery_TargetValue.encode(wt.serviceUserId,Vt.uint32(10).fork()).ldelim(),wt.collectionId!==void 0&&a.GetEventsQuery_TargetValue.encode(wt.collectionId,Vt.uint32(18).fork()).ldelim(),wt.projectId!==void 0&&a.GetEventsQuery_TargetValue.encode(wt.projectId,Vt.uint32(26).fork()).ldelim(),wt.layoutId!==void 0&&a.GetEventsQuery_TargetValue.encode(wt.layoutId,Vt.uint32(34).fork()).ldelim(),Vt},decode(wt,Vt){const Qt=wt instanceof b.default.Reader?wt:new b.default.Reader(wt);let Nt=Vt===void 0?Qt.len:Qt.pos+Vt;const st=lt();for(;Qt.pos<Nt;){const Ct=Qt.uint32();switch(Ct>>>3){case 1:st.serviceUserId=a.GetEventsQuery_TargetValue.decode(Qt,Qt.uint32());break;case 2:st.collectionId=a.GetEventsQuery_TargetValue.decode(Qt,Qt.uint32());break;case 3:st.projectId=a.GetEventsQuery_TargetValue.decode(Qt,Qt.uint32());break;case 4:st.layoutId=a.GetEventsQuery_TargetValue.decode(Qt,Qt.uint32());break;default:Qt.skipType(Ct&7);break}}return st},fromJSON(wt){return{serviceUserId:zt(wt.serviceUserId)?a.GetEventsQuery_TargetValue.fromJSON(wt.serviceUserId):void 0,collectionId:zt(wt.collectionId)?a.GetEventsQuery_TargetValue.fromJSON(wt.collectionId):void 0,projectId:zt(wt.projectId)?a.GetEventsQuery_TargetValue.fromJSON(wt.projectId):void 0,layoutId:zt(wt.layoutId)?a.GetEventsQuery_TargetValue.fromJSON(wt.layoutId):void 0}},toJSON(wt){const Vt={};return wt.serviceUserId!==void 0&&(Vt.serviceUserId=wt.serviceUserId?a.GetEventsQuery_TargetValue.toJSON(wt.serviceUserId):void 0),wt.collectionId!==void 0&&(Vt.collectionId=wt.collectionId?a.GetEventsQuery_TargetValue.toJSON(wt.collectionId):void 0),wt.projectId!==void 0&&(Vt.projectId=wt.projectId?a.GetEventsQuery_TargetValue.toJSON(wt.projectId):void 0),wt.layoutId!==void 0&&(Vt.layoutId=wt.layoutId?a.GetEventsQuery_TargetValue.toJSON(wt.layoutId):void 0),Vt},fromPartial(wt){const Vt=lt();return Vt.serviceUserId=wt.serviceUserId!==void 0&&wt.serviceUserId!==null?a.GetEventsQuery_TargetValue.fromPartial(wt.serviceUserId):void 0,Vt.collectionId=wt.collectionId!==void 0&&wt.collectionId!==null?a.GetEventsQuery_TargetValue.fromPartial(wt.collectionId):void 0,Vt.projectId=wt.projectId!==void 0&&wt.projectId!==null?a.GetEventsQuery_TargetValue.fromPartial(wt.projectId):void 0,Vt.layoutId=wt.layoutId!==void 0&&wt.layoutId!==null?a.GetEventsQuery_TargetValue.fromPartial(wt.layoutId):void 0,Vt}};function gt(){return{cursor:void 0,query:void 0}}a.GetEventsRequest={encode(wt,Vt=b.default.Writer.create()){return wt.cursor!==void 0&&Vt.uint32(10).string(wt.cursor),wt.query!==void 0&&a.GetEventsQuery.encode(wt.query,Vt.uint32(18).fork()).ldelim(),Vt},decode(wt,Vt){const Qt=wt instanceof b.default.Reader?wt:new b.default.Reader(wt);let Nt=Vt===void 0?Qt.len:Qt.pos+Vt;const st=gt();for(;Qt.pos<Nt;){const Ct=Qt.uint32();switch(Ct>>>3){case 1:st.cursor=Qt.string();break;case 2:st.query=a.GetEventsQuery.decode(Qt,Qt.uint32());break;default:Qt.skipType(Ct&7);break}}return st},fromJSON(wt){return{cursor:zt(wt.cursor)?String(wt.cursor):void 0,query:zt(wt.query)?a.GetEventsQuery.fromJSON(wt.query):void 0}},toJSON(wt){const Vt={};return wt.cursor!==void 0&&(Vt.cursor=wt.cursor),wt.query!==void 0&&(Vt.query=wt.query?a.GetEventsQuery.toJSON(wt.query):void 0),Vt},fromPartial(wt){var Vt;const Qt=gt();return Qt.cursor=(Vt=wt.cursor)!==null&&Vt!==void 0?Vt:void 0,Qt.query=wt.query!==void 0&&wt.query!==null?a.GetEventsQuery.fromPartial(wt.query):void 0,Qt}};function Et(){return{events:[],nextCursor:void 0}}a.GetEventsResponse={encode(wt,Vt=b.default.Writer.create()){for(const Qt of wt.events)a.Event.encode(Qt,Vt.uint32(10).fork()).ldelim();return wt.nextCursor!==void 0&&Vt.uint32(18).string(wt.nextCursor),Vt},decode(wt,Vt){const Qt=wt instanceof b.default.Reader?wt:new b.default.Reader(wt);let Nt=Vt===void 0?Qt.len:Qt.pos+Vt;const st=Et();for(;Qt.pos<Nt;){const Ct=Qt.uint32();switch(Ct>>>3){case 1:st.events.push(a.Event.decode(Qt,Qt.uint32()));break;case 2:st.nextCursor=Qt.string();break;default:Qt.skipType(Ct&7);break}}return st},fromJSON(wt){return{events:Array.isArray(wt==null?void 0:wt.events)?wt.events.map(Vt=>a.Event.fromJSON(Vt)):[],nextCursor:zt(wt.nextCursor)?String(wt.nextCursor):void 0}},toJSON(wt){const Vt={};return wt.events?Vt.events=wt.events.map(Qt=>Qt?a.Event.toJSON(Qt):void 0):Vt.events=[],wt.nextCursor!==void 0&&(Vt.nextCursor=wt.nextCursor),Vt},fromPartial(wt){var Vt,Qt;const Nt=Et();return Nt.events=((Vt=wt.events)===null||Vt===void 0?void 0:Vt.map(st=>a.Event.fromPartial(st)))||[],Nt.nextCursor=(Qt=wt.nextCursor)!==null&&Qt!==void 0?Qt:void 0,Nt}};function pt(){return{name:"",payload:void 0,target:void 0,requestMetadata:void 0,id:"",publishedAt:void 0}}a.Event={encode(wt,Vt=b.default.Writer.create()){return wt.name!==""&&Vt.uint32(10).string(wt.name),wt.payload!==void 0&&$.Struct.encode($.Struct.wrap(wt.payload),Vt.uint32(18).fork()).ldelim(),wt.target!==void 0&&a.ServiceEventTarget.encode(wt.target,Vt.uint32(26).fork()).ldelim(),wt.requestMetadata!==void 0&&$.Value.encode($.Value.wrap(wt.requestMetadata),Vt.uint32(34).fork()).ldelim(),wt.id!==""&&Vt.uint32(42).string(wt.id),wt.publishedAt!==void 0&&k.Timestamp.encode(rr(wt.publishedAt),Vt.uint32(50).fork()).ldelim(),Vt},decode(wt,Vt){const Qt=wt instanceof b.default.Reader?wt:new b.default.Reader(wt);let Nt=Vt===void 0?Qt.len:Qt.pos+Vt;const st=pt();for(;Qt.pos<Nt;){const Ct=Qt.uint32();switch(Ct>>>3){case 1:st.name=Qt.string();break;case 2:st.payload=$.Struct.unwrap($.Struct.decode(Qt,Qt.uint32()));break;case 3:st.target=a.ServiceEventTarget.decode(Qt,Qt.uint32());break;case 4:st.requestMetadata=$.Value.unwrap($.Value.decode(Qt,Qt.uint32()));break;case 5:st.id=Qt.string();break;case 6:st.publishedAt=ir(k.Timestamp.decode(Qt,Qt.uint32()));break;default:Qt.skipType(Ct&7);break}}return st},fromJSON(wt){return{name:zt(wt.name)?String(wt.name):"",payload:Wt(wt.payload)?wt.payload:void 0,target:zt(wt.target)?a.ServiceEventTarget.fromJSON(wt.target):void 0,requestMetadata:zt(wt==null?void 0:wt.requestMetadata)?wt.requestMetadata:void 0,id:zt(wt.id)?String(wt.id):"",publishedAt:zt(wt.publishedAt)?String(wt.publishedAt):void 0}},toJSON(wt){const Vt={};return wt.name!==void 0&&(Vt.name=wt.name),wt.payload!==void 0&&(Vt.payload=wt.payload),wt.target!==void 0&&(Vt.target=wt.target?a.ServiceEventTarget.toJSON(wt.target):void 0),wt.requestMetadata!==void 0&&(Vt.requestMetadata=wt.requestMetadata),wt.id!==void 0&&(Vt.id=wt.id),wt.publishedAt!==void 0&&(Vt.publishedAt=wt.publishedAt),Vt},fromPartial(wt){var Vt,Qt,Nt,st,Ct;const qt=pt();return qt.name=(Vt=wt.name)!==null&&Vt!==void 0?Vt:"",qt.payload=(Qt=wt.payload)!==null&&Qt!==void 0?Qt:void 0,qt.target=wt.target!==void 0&&wt.target!==null?a.ServiceEventTarget.fromPartial(wt.target):void 0,qt.requestMetadata=(Nt=wt.requestMetadata)!==null&&Nt!==void 0?Nt:void 0,qt.id=(st=wt.id)!==null&&st!==void 0?st:"",qt.publishedAt=(Ct=wt.publishedAt)!==null&&Ct!==void 0?Ct:void 0,qt}};class rt{constructor(Vt,Qt){this.service=(Qt==null?void 0:Qt.service)||"apis.event.v2.EventService",this.rpc=Vt,this.Stream=this.Stream.bind(this),this.Publish=this.Publish.bind(this)}Stream(Vt){const Qt=Vt.pipe(_.map(st=>a.EventsStreamRequest.encode(st).finish()));return this.rpc.bidirectionalStreamingRequest(this.service,"Stream",Qt).pipe(_.map(st=>a.EventsStreamResponse.decode(new b.default.Reader(st))))}Publish(Vt){const Qt=a.PublishEventRequest.encode(Vt).finish();return this.rpc.request(this.service,"Publish",Qt).then(st=>a.PublishEventResponse.decode(new b.default.Reader(st)))}}a.EventServiceClientImpl=rt,a.EventServiceDefinition={name:"EventService",fullName:"apis.event.v2.EventService",methods:{stream:{name:"Stream",requestType:a.EventsStreamRequest,requestStream:!0,responseType:a.EventsStreamResponse,responseStream:!0,options:{}},publish:{name:"Publish",requestType:a.PublishEventRequest,requestStream:!1,responseType:a.PublishEventResponse,responseStream:!1,options:{}}}};class mt{constructor(Vt,Qt){this.service=(Qt==null?void 0:Qt.service)||"apis.event.v2.WebhookService",this.rpc=Vt,this.ListWebhookSubscriptions=this.ListWebhookSubscriptions.bind(this),this.CreateWebhookSubscription=this.CreateWebhookSubscription.bind(this),this.DeleteWebhookSubscription=this.DeleteWebhookSubscription.bind(this)}ListWebhookSubscriptions(Vt){const Qt=a.ListWebhookSubscriptionsRequest.encode(Vt).finish();return this.rpc.request(this.service,"ListWebhookSubscriptions",Qt).then(st=>a.ListWebhookSubscriptionsResponse.decode(new b.default.Reader(st)))}CreateWebhookSubscription(Vt){const Qt=a.CreateWebhookSubscriptionRequest.encode(Vt).finish();return this.rpc.request(this.service,"CreateWebhookSubscription",Qt).then(st=>a.CreateWebhookSubscriptionResponse.decode(new b.default.Reader(st)))}DeleteWebhookSubscription(Vt){const Qt=a.DeleteWebhookSubscriptionRequest.encode(Vt).finish();return this.rpc.request(this.service,"DeleteWebhookSubscription",Qt).then(st=>a.DeleteWebhookSubscriptionResponse.decode(new b.default.Reader(st)))}}a.WebhookServiceClientImpl=mt,a.WebhookServiceDefinition={name:"WebhookService",fullName:"apis.event.v2.WebhookService",methods:{listWebhookSubscriptions:{name:"ListWebhookSubscriptions",requestType:a.ListWebhookSubscriptionsRequest,requestStream:!1,responseType:a.ListWebhookSubscriptionsResponse,responseStream:!1,options:{}},createWebhookSubscription:{name:"CreateWebhookSubscription",requestType:a.CreateWebhookSubscriptionRequest,requestStream:!1,responseType:a.CreateWebhookSubscriptionResponse,responseStream:!1,options:{}},deleteWebhookSubscription:{name:"DeleteWebhookSubscription",requestType:a.DeleteWebhookSubscriptionRequest,requestStream:!1,responseType:a.DeleteWebhookSubscriptionResponse,responseStream:!1,options:{}}}};class Lt{constructor(Vt,Qt){this.service=(Qt==null?void 0:Qt.service)||"apis.event.v2.HistoryService",this.rpc=Vt,this.GetEvents=this.GetEvents.bind(this)}GetEvents(Vt){const Qt=a.GetEventsRequest.encode(Vt).finish();return this.rpc.request(this.service,"GetEvents",Qt).then(st=>a.GetEventsResponse.decode(new b.default.Reader(st)))}}a.HistoryServiceClientImpl=Lt,a.HistoryServiceDefinition={name:"HistoryService",fullName:"apis.event.v2.HistoryService",methods:{getEvents:{name:"GetEvents",requestType:a.GetEventsRequest,requestStream:!1,responseType:a.GetEventsResponse,responseStream:!1,options:{}}}};var Gt=(()=>{if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof commonjsGlobal$1<"u")return commonjsGlobal$1;throw"Unable to locate global object"})();function rr(wt){const Vt=new Date(wt),Qt=Vt.getTime()/1e3,Nt=Vt.getTime()%1e3*1e6;return{seconds:Qt,nanos:Nt}}function ir(wt){let Vt=wt.seconds*1e3;return Vt+=wt.nanos/1e6,new Date(Vt).toISOString()}function Wt(wt){return typeof wt=="object"&&wt!==null}function zt(wt){return wt!=null}})(api$1);(function(a){var c=commonjsGlobal$1&&commonjsGlobal$1.__createBinding||(Object.create?function(_,$,k,et){et===void 0&&(et=k),Object.defineProperty(_,et,{enumerable:!0,get:function(){return $[k]}})}:function(_,$,k,et){et===void 0&&(et=k),_[et]=$[k]}),b=commonjsGlobal$1&&commonjsGlobal$1.__exportStar||function(_,$){for(var k in _)k!=="default"&&!$.hasOwnProperty(k)&&c($,_,k)};Object.defineProperty(a,"__esModule",{value:!0}),a.eventsApiSupportedEvents=a.eventsApiEventRpcCalls=void 0,b(api$1,a),a.eventsApiEventRpcCalls={ping:"pong",publish:"published",subscribe:"subscribed",unsubscribe:"unsubscribed"},a.eventsApiSupportedEvents=[...Object.values(a.eventsApiEventRpcCalls),"error","event","reconnectBefore"]})(dist$1);var ws=null;typeof WebSocket<"u"?ws=WebSocket:typeof MozWebSocket<"u"?ws=MozWebSocket:typeof commonjsGlobal$1<"u"?ws=commonjsGlobal$1.WebSocket||commonjsGlobal$1.MozWebSocket:typeof window<"u"?ws=window.WebSocket||window.MozWebSocket:typeof self<"u"&&(ws=self.WebSocket||self.MozWebSocket);var browser$e=ws,matcher={exports:{}},escapeStringRegexp$1=a=>{if(typeof a!="string")throw new TypeError("Expected a string");return a.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")};const escapeStringRegexp=escapeStringRegexp$1,regexpCache=new Map;function sanitizeArray(a,c){if(!Array.isArray(a))switch(typeof a){case"string":a=[a];break;case"undefined":a=[];break;default:throw new TypeError(`Expected '${c}' to be a string or an array, but got a type of '${typeof a}'`)}return a.filter(b=>{if(typeof b!="string"){if(typeof b>"u")return!1;throw new TypeError(`Expected '${c}' to be an array of strings, but found a type of '${typeof b}' in the array`)}return!0})}function makeRegexp(a,c){c={caseSensitive:!1,...c};const b=a+JSON.stringify(c);if(regexpCache.has(b))return regexpCache.get(b);const _=a[0]==="!";_&&(a=a.slice(1)),a=escapeStringRegexp(a).replace(/\\\*/g,"[\\s\\S]*");const $=new RegExp(`^${a}$`,c.caseSensitive?"":"i");return $.negated=_,regexpCache.set(b,$),$}matcher.exports=(a,c,b)=>{if(a=sanitizeArray(a,"inputs"),c=sanitizeArray(c,"patterns"),c.length===0)return[];const _=c[0][0]==="!";c=c.map(k=>makeRegexp(k,b));const $=[];for(const k of a){let et=_;for(const nt of c)nt.test(k)&&(et=!nt.negated);et&&$.push(k)}return $};matcher.exports.isMatch=(a,c,b)=>(a=sanitizeArray(a,"inputs"),c=sanitizeArray(c,"patterns"),c.length===0?!1:a.some(_=>c.every($=>{const k=makeRegexp($,b),et=k.test(_);return k.negated?!et:et})));var matcherExports=matcher.exports,__createBinding$1=commonjsGlobal$1&&commonjsGlobal$1.__createBinding||(Object.create?function(a,c,b,_){_===void 0&&(_=b);var $=Object.getOwnPropertyDescriptor(c,b);(!$||("get"in $?!c.__esModule:$.writable||$.configurable))&&($={enumerable:!0,get:function(){return c[b]}}),Object.defineProperty(a,_,$)}:function(a,c,b,_){_===void 0&&(_=b),a[_]=c[b]}),__setModuleDefault$1=commonjsGlobal$1&&commonjsGlobal$1.__setModuleDefault||(Object.create?function(a,c){Object.defineProperty(a,"default",{enumerable:!0,value:c})}:function(a,c){a.default=c}),__importStar$1=commonjsGlobal$1&&commonjsGlobal$1.__importStar||function(a){if(a&&a.__esModule)return a;var c={};if(a!=null)for(var b in a)b!=="default"&&Object.prototype.hasOwnProperty.call(a,b)&&__createBinding$1(c,a,b);return __setModuleDefault$1(c,a),c},__importDefault$8=commonjsGlobal$1&&commonjsGlobal$1.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(eventapi,"__esModule",{value:!0});eventapi.EventApi=void 0;const EventApiModel=__importStar$1(dist$1),isomorphic_ws_1=__importDefault$8(browser$e),uuid_1=require$$1$6,NiceGrpc=__importStar$1(lib$1),matcher_1=matcherExports,api_1=api$3,clientVersion=version$4,WS_PING_INTERVAL=2e4,WS_PING_TIMEOUT=1e4,WS_RECONNECT_DELAY=2e3,WS_MAX_BADAUTH_ATTEMPTS=3,LOG_CATEGORY="EventApi";class EventApi extends api_1.ApiClient{constructor(c,b,_,$,k,et,nt){super(c,b,$,LOG_CATEGORY,k,et,nt),this.websocketServer=_,this.subscriptions=new Set,this.eventHandlers={},this.calls={},this.messageQueue=[],this.websocketReady=!1,this.reconnectionAttempts=0,this.badAuthentication=!1,this.eventsClient=null,this.webhook=null,this.history=null,this.apikey!==void 0&&(this.webhook=this.clientFactory.create(EventApiModel.WebhookServiceDefinition,this.channel,{"*":{metadata:this.makeGrpcMetadataApikey()}}),this.history=this.clientFactory.create(EventApiModel.HistoryServiceDefinition,this.channel,{"*":{metadata:this.makeGrpcMetadataApikey()}}))}publish(...c){return this.websocketReady?this.call("publish",c[0]):this.eventsClient.publish(...c)}connect(){if(!this.ws){this.cleanup();const c=this.accessToken,b=[`version=${clientVersion}`,`sessionid=${this.sessionId}`,"clienttype=nodejs"];this.sdkVersion&&b.push(`sdkversion=${this.sdkVersion}`),this.ws=new isomorphic_ws_1.default(`${this.websocketServer}/stream?${b.join("&")}`,["Bearer",this.accessToken]);let _;this.ws.addEventListener("message",$=>{const k=JSON.parse($.data.toString()),et=k.result;if(k.error&&(_=k.error,this.handleEvent("error",{error:{code:k.code,message:k.message}}),["You do not have permission to this resource","You do not have permission to this resource"].includes(k.message)&&(this.badAuthentication=!0)),!et)return;et.reconnectBefore&&et.reconnectBefore.reauthenticate&&this.accessToken===c&&(this.badAuthentication=!0);const nt=EventApiModel.eventsApiSupportedEvents.find(ot=>!!et[ot]);nt&&this.handleEvent(nt,et)}),this.ws.addEventListener("open",()=>{this.log.info("websocket connected"),this.call("ping","hello",{timeout:WS_PING_TIMEOUT,skipQueue:!0}).then(()=>{this.ready()}).catch($=>{!_&&$.message!=="Stream connection closed"&&this.disconnect("hello timeout")})}),this.ws.addEventListener("close",$=>{var k;_?this.reconnect(`${(k=_==null?void 0:_.message)!==null&&k!==void 0?k:"unknown"}`):this.reconnect(`closed - ${$.reason||$.code}`)}),this.ws.addEventListener("error",$=>{_=$})}}async subscribe(c,b={}){return this.call("subscribe",{name:c,...b}).then(()=>{this.subscriptions.add(JSON.stringify({name:c,...b}))})}async unsubscribe(c,b={}){this.subscriptions.delete(JSON.stringify({name:c,payload:b})),await this.call("unsubscribe",{name:c,...b})}on(c,b,_){const $=_||b,k={ignoreSessionEvents:!1,allowedSessionEvents:[],..._?b:{}};this.eventHandlers[c]||(this.eventHandlers[c]=[]),this.eventHandlers[c].push({...k,handler:$})}off(c,b,_){var $;const k=_||b,et={ignoreSessionEvents:!1,allowedSessionEvents:[],..._?b:{}};this.eventHandlers[c]=(($=this.eventHandlers[c])!==null&&$!==void 0?$:[]).filter(nt=>!(nt.ignoreSessionEvents===et.ignoreSessionEvents&&nt.allowedSessionEvents===et.allowedSessionEvents&&nt.handler===k&&nt.name===et.name))}disconnect(c){this.log.warn(`disconnected from events reason=${c}`),Object.values(this.calls).forEach(b=>{clearTimeout(b.timeout),b.reject(new Error("Stream connection closed"))}),this.calls={},this.cleanup()}_setup(c,b){this.eventsClient=this.clientFactory.create(EventApiModel.EventServiceDefinition,this.channel,{"*":c}),this.badAuthentication&&(this.badAuthentication=!1,this.reconnectionAttempts=0,this.reconnect("updated token"))}ready(){this.reconnectionAttempts=0,this.badAuthentication=!1,this.websocketReady=!0,this.handleEvent("connected",{connected:void 0});for(const c of this.subscriptions.values())this.send({subscribe:JSON.parse(c),correlationId:(0,uuid_1.v4)()});for(const c of this.messageQueue)this.send(c);this.messageQueue=[],this.pingLoop=setInterval(()=>{this.ping()},WS_PING_INTERVAL)}ping(){this.call("ping",`${+new Date}`,{timeout:WS_PING_TIMEOUT}).catch(()=>{this.reconnect("connection stalled")})}reconnect(c){this.disconnect(c),this.reconnectTimeout=setTimeout(()=>{if(this.reconnectionAttempts++,this.badAuthentication&&this.reconnectionAttempts>=WS_MAX_BADAUTH_ATTEMPTS){this.log.warn("Maximum number of reconnection attempts reached with bad authentication, please re-authenticate the SDK");return}this.connect()},WS_RECONNECT_DELAY)}send(c){this.ws&&this.ws.readyState===this.ws.OPEN?this.ws.send(JSON.stringify(c)):this.log.warn("Message sent to a disconnected stream")}handleEvent(c,b){var _;if(this.calls[b.correlationId]){const $=EventApiModel.eventsApiEventRpcCalls[this.calls[b.correlationId].method]===c,k=!!b.error;if($||k){this.resolveCall(c,b);return}}for(const $ of(_=this.eventHandlers[c])!==null&&_!==void 0?_:[]){if(c==="event"&&b.event){if(b.sessionId===this.sessionId&&$.ignoreSessionEvents&&!$.allowedSessionEvents.includes(b.event.name)){this.log.trace("ignoring user event from self: "+b.event.name+", payload.sessionId="+b.sessionId+", this.sessionId");continue}if($.name&&!(0,matcher_1.isMatch)(b.event.name,$.name))continue;if(this.eventLogCallback){let k,et=b.event.name,nt;if(b.event.name.startsWith(EventApi.APISTREAM_EVENT_PREFIX)){let ot=b.event.name.split(":");ot.length==4&&(k=ot[1],et=ot[2],nt=ot[3]),this.eventLogCallback(k,et,nt,b)}}}else if(b.sessionId===this.sessionId&&$.ignoreSessionEvents){this.log.trace("ignoring event from self: "+b.event.name+", payload.sessionId="+b.sessionId+", this.sessionId");continue}this.log.trace("processing event: payload.sessionId="+b.sessionId+", this.sessionId"),$.handler(b?b[c]:void 0,{isFromCurrentSession:b.sessionId===this.sessionId})}}async call(c,b,_={timeout:2e4,skipQueue:!1}){this.ws||this.connect();const $=(0,uuid_1.v4)();return new Promise((k,et)=>{const nt=setTimeout(()=>{delete this.calls[$],et(new Error("Request timed out"))},_.timeout);this.calls[$]={resolve:k,reject:et,timeout:nt,method:c},this.websocketReady||_.skipQueue?this.send({[c]:b,correlationId:$}):this.messageQueue.push({[c]:b,correlationId:$})})}resolveCall(c,b){const _=this.calls[b.correlationId];if(_){if(clearTimeout(_.timeout),delete this.calls[b.correlationId],c==="error"&&b.error){_.reject(new NiceGrpc.ClientError("error",b.error.code,b.error.message));return}_.resolve(b[c])}}cleanup(){clearTimeout(this.pingLoop),clearTimeout(this.reconnectTimeout),this.websocketReady=!1,this.ws&&(this.ws.onclose=function(){},this.ws.close(),this.ws=null)}}eventapi.EventApi=EventApi;EventApi.APISTREAM_EVENT_PREFIX="apistream";var livekit={},__importDefault$7=commonjsGlobal$1&&commonjsGlobal$1.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(livekit,"__esModule",{value:!0});livekit.LiveKitUtils=void 0;const jwt_decode_1=__importDefault$7(require$$0$3);class LiveKitUtils{static decodeJwt(c){return(0,jwt_decode_1.default)(c,{header:!1})}static isRoomAdmin(c){return LiveKitUtils.decodeJwt(c).video.roomAdmin}static getRoomName(c){return LiveKitUtils.decodeJwt(c).video.room}}livekit.LiveKitUtils=LiveKitUtils;(function(a){var c=commonjsGlobal$1&&commonjsGlobal$1.__createBinding||(Object.create?function(ur,Ot,It,ut){ut===void 0&&(ut=It);var _e=Object.getOwnPropertyDescriptor(Ot,It);(!_e||("get"in _e?!Ot.__esModule:_e.writable||_e.configurable))&&(_e={enumerable:!0,get:function(){return Ot[It]}}),Object.defineProperty(ur,ut,_e)}:function(ur,Ot,It,ut){ut===void 0&&(ut=It),ur[ut]=Ot[It]}),b=commonjsGlobal$1&&commonjsGlobal$1.__setModuleDefault||(Object.create?function(ur,Ot){Object.defineProperty(ur,"default",{enumerable:!0,value:Ot})}:function(ur,Ot){ur.default=Ot}),_=commonjsGlobal$1&&commonjsGlobal$1.__importStar||function(ur){if(ur&&ur.__esModule)return ur;var Ot={};if(ur!=null)for(var It in ur)It!=="default"&&Object.prototype.hasOwnProperty.call(ur,It)&&c(Ot,ur,It);return b(Ot,ur),Ot},$=commonjsGlobal$1&&commonjsGlobal$1.__importDefault||function(ur){return ur&&ur.__esModule?ur:{default:ur}};Object.defineProperty(a,"__esModule",{value:!0}),a.ApiStream=a.LiveKitUtils=a.EventApiModel=a.LayoutApiModel=a.LiveApiModel=void 0;const k=$(require$$0$3),et=require$$1$6,nt=require$$2$1,ot=layoutapi,ht=liveapi,vt=eventapi,_t=_(api$2);a.LiveApiModel=_t;const kt=_(dist$2);a.LayoutApiModel=kt;const $t=_(dist$1);a.EventApiModel=$t;const Tt=livekit;Object.defineProperty(a,"LiveKitUtils",{enumerable:!0,get:function(){return Tt.LiveKitUtils}});const At=logger,Mt=version$4,Dt={dev:"http://127.0.0.1:8081",stage:"https://live.silly.horse/grpcweb/live/v2",prod:"https://live.api.stream/grpcweb/live/v2"},Rt={dev:"https://live.silly.horse/grpcweb/layout/v2",stage:"https://live.silly.horse/grpcweb/layout/v2",prod:"https://live.api.stream/grpcweb/layout/v2"},xt={dev:"wss://live.silly.horse/event/v2",stage:"wss://live.silly.horse/event/v2",prod:"wss://live.api.stream/event/v2"},Jt={dev:"https://live.silly.horse/grpcweb/event/v2",stage:"https://live.silly.horse/grpcweb/event/v2",prod:"https://live.api.stream/grpcweb/event/v2"},ar={dev:"wss://live.silly.horse/webrtc/v2",stage:"wss://live.silly.horse/webrtc/v2",prod:"wss://live.api.stream/webrtc/v2"},nr={dev:"https://live.silly.horse/webrtc/v2",stage:"https://live.silly.horse/webrtc/v2",prod:"https://live.api.stream/webrtc/v2"};class pr{constructor(Ot={}){var It;const ut={env:"prod",logLevel:"Warn",...Ot};this.env=ut.env;let _e=(0,et.v4)();ut.sessionId!=null&&(_e=ut.sessionId),this.log=At.logger.getCategory("ApiStream"),this.setLogLevel(ut.env=="dev"?"Trace":ut.logLevel);const tt=(It=ut.overrideEndpoints)!==null&&It!==void 0?It:{};tt.liveApiServer==null&&(tt.liveApiServer=Dt[this.env]),tt.layoutApiServer==null&&(tt.layoutApiServer=Rt[this.env]),tt.eventApiServer==null&&(tt.eventApiServer=Jt[this.env]),tt.eventApiWebSocketServer==null&&(tt.eventApiWebSocketServer=xt[this.env]),this.eventApi=new vt.EventApi(_e,tt.eventApiServer,tt.eventApiWebSocketServer,ut.sdkVersion,ut.apiLogCallback,ut.eventLogCallback,ut.apiKey),this.layoutApi=new ot.LayoutApi(_e,this.eventApi,tt.layoutApiServer,ut.sdkVersion,ut.apiLogCallback,ut.apiKey),this.liveApi=new ht.LiveApi(_e,this.eventApi,tt.liveApiServer,this.setAccessToken.bind(this),ut.apiKey,ut.sdkVersion,ut.apiLogCallback),this.eventApi.on("reconnectBefore",it=>{it.reauthenticate&&this.liveApi.authentication.refreshAccessToken({}).catch(()=>{})}),this.log.info("api.stream: sessionid="+_e+", version="+Mt+", sdkVersion="+ut.sdkVersion)}LiveApi(){return this.liveApi}LayoutApi(){return this.layoutApi}EventApi(){return this.eventApi}setLogLevel(Ot){try{let It=nt.LogLevel.toLogLevel(Ot);At.logger.updateRuntimeSettings({level:It})}catch{this.log.warn(`unknown logging level ${Ot}`)}}setAccessToken(Ot){this.decodedAccessToken=pr.decodeAccessToken(Ot),this.log.debug("setting accessToken",Ot,this.decodedAccessToken),this.layoutApi.setAccessToken(Ot),this.liveApi.setAccessToken(Ot),this.eventApi.setAccessToken(Ot)}getAccessToken(){return this.decodedAccessToken}getGuestProject(){return this.decodedAccessToken.guestControl}async load(Ot){if(Ot==null&&typeof window<"u"){let It=this.parseQuery();It.get(pr.ACCESS_TOKEN_QUERY_PARAM)!=null&&(Ot=It.get(pr.ACCESS_TOKEN_QUERY_PARAM))}return Ot!=null&&(this.setAccessToken(Ot),this.decodedAccessToken.guestControl!=null)?(this.log.info("loading guest token and exchanging"),await this.LiveApi().authentication.refreshAccessToken({}),this.log.info("auto-loading project = "+JSON.stringify(this.decodedAccessToken.guestControl)),this.decodedAccessToken.guestControl):null}getLiveKitServer(Ot=!1){return Ot?nr[this.env]:ar[this.env]}parseQuery(){let Ot=window.location.search,It=new Map,ut=(Ot[0]==="?"?Ot.substr(1):Ot).split("&");for(let _e=0;_e<ut.length;_e++){let tt=ut[_e].split("=");tt.length==2&&(It.set(decodeURIComponent(tt[0]),decodeURIComponent(tt[1]||"")),this.log.debug(`found query param: ${decodeURIComponent(tt[0])}=${decodeURIComponent(tt[1]||"")}`))}return It}static decodeAccessToken(Ot){let It=(0,k.default)(Ot,{header:!1}),ut={serviceUserId:It.user.serviceUserId,userId:It.user.userId,displayName:It.user.displayName,trial:It.user.trial,demo:It.user.demo};return It.guestControl!=null&&(ut.guestControl={collectionId:It.guestControl.collectionId,projectId:It.guestControl.projectId,role:_t.roleFromJSON(It.guestControl.role)}),ut}}a.ApiStream=pr,pr.ACCESS_TOKEN_QUERY_PARAM="at"})(lib$2);const config$2=a=>({defaults:{previewTokenDuration:1e3*60*60,guestTokenDuration:1e3*60*60*12,transforms:{RoomParticipant:"LS-Room-Participant",Image:"LS-Image",Banner:"LS-Banner",Text:"LS-Text"}}});var fastDeepEqual=function a(c,b){if(c===b)return!0;if(c&&b&&typeof c=="object"&&typeof b=="object"){if(c.constructor!==b.constructor)return!1;var _,$,k;if(Array.isArray(c)){if(_=c.length,_!=b.length)return!1;for($=_;$--!==0;)if(!a(c[$],b[$]))return!1;return!0}if(c.constructor===RegExp)return c.source===b.source&&c.flags===b.flags;if(c.valueOf!==Object.prototype.valueOf)return c.valueOf()===b.valueOf();if(c.toString!==Object.prototype.toString)return c.toString()===b.toString();if(k=Object.keys(c),_=k.length,_!==Object.keys(b).length)return!1;for($=_;$--!==0;)if(!Object.prototype.hasOwnProperty.call(b,k[$]))return!1;for($=_;$--!==0;){var et=k[$];if(!a(c[et],b[et]))return!1}return!0}return c!==c&&b!==b};const deepEqual=getDefaultExportFromCjs$2(fastDeepEqual);var freeGlobal=typeof global$1=="object"&&global$1&&global$1.Object===Object&&global$1,freeSelf=typeof self=="object"&&self&&self.Object===Object&&self,root=freeGlobal||freeSelf||Function("return this")(),Symbol$1=root.Symbol,objectProto$m=Object.prototype,hasOwnProperty$f=objectProto$m.hasOwnProperty,nativeObjectToString$1=objectProto$m.toString,symToStringTag$1=Symbol$1?Symbol$1.toStringTag:void 0;function getRawTag(a){var c=hasOwnProperty$f.call(a,symToStringTag$1),b=a[symToStringTag$1];try{a[symToStringTag$1]=void 0;var _=!0}catch{}var $=nativeObjectToString$1.call(a);return _&&(c?a[symToStringTag$1]=b:delete a[symToStringTag$1]),$}var objectProto$l=Object.prototype,nativeObjectToString=objectProto$l.toString;function objectToString$7(a){return nativeObjectToString.call(a)}var nullTag="[object Null]",undefinedTag="[object Undefined]",symToStringTag=Symbol$1?Symbol$1.toStringTag:void 0;function baseGetTag(a){return a==null?a===void 0?undefinedTag:nullTag:symToStringTag&&symToStringTag in Object(a)?getRawTag(a):objectToString$7(a)}function isObjectLike$7(a){return a!=null&&typeof a=="object"}var symbolTag$6="[object Symbol]";function isSymbol$3(a){return typeof a=="symbol"||isObjectLike$7(a)&&baseGetTag(a)==symbolTag$6}function arrayMap$1(a,c){for(var b=-1,_=a==null?0:a.length,$=Array(_);++b<_;)$[b]=c(a[b],b,a);return $}var isArray$4=Array.isArray,INFINITY$4=1/0,symbolProto$2=Symbol$1?Symbol$1.prototype:void 0,symbolToString=symbolProto$2?symbolProto$2.toString:void 0;function baseToString(a){if(typeof a=="string")return a;if(isArray$4(a))return arrayMap$1(a,baseToString)+"";if(isSymbol$3(a))return symbolToString?symbolToString.call(a):"";var c=a+"";return c=="0"&&1/a==-INFINITY$4?"-0":c}var reWhitespace=/\s/;function trimmedEndIndex(a){for(var c=a.length;c--&&reWhitespace.test(a.charAt(c)););return c}var reTrimStart=/^\s+/;function baseTrim(a){return a&&a.slice(0,trimmedEndIndex(a)+1).replace(reTrimStart,"")}function isObject$8(a){var c=typeof a;return a!=null&&(c=="object"||c=="function")}var NAN$3=NaN,reIsBadHex$3=/^[-+]0x[0-9a-f]+$/i,reIsBinary$3=/^0b[01]+$/i,reIsOctal$3=/^0o[0-7]+$/i,freeParseInt$3=parseInt;function toNumber$3(a){if(typeof a=="number")return a;if(isSymbol$3(a))return NAN$3;if(isObject$8(a)){var c=typeof a.valueOf=="function"?a.valueOf():a;a=isObject$8(c)?c+"":c}if(typeof a!="string")return a===0?a:+a;a=baseTrim(a);var b=reIsBinary$3.test(a);return b||reIsOctal$3.test(a)?freeParseInt$3(a.slice(2),b?2:8):reIsBadHex$3.test(a)?NAN$3:+a}function identity(a){return a}var asyncTag="[object AsyncFunction]",funcTag$3="[object Function]",genTag$2="[object GeneratorFunction]",proxyTag="[object Proxy]";function isFunction$2(a){if(!isObject$8(a))return!1;var c=baseGetTag(a);return c==funcTag$3||c==genTag$2||c==asyncTag||c==proxyTag}var coreJsData=root["__core-js_shared__"],maskSrcKey=function(){var a=/[^.]+$/.exec(coreJsData&&coreJsData.keys&&coreJsData.keys.IE_PROTO||"");return a?"Symbol(src)_1."+a:""}();function isMasked(a){return!!maskSrcKey&&maskSrcKey in a}var funcProto$3=Function.prototype,funcToString$3=funcProto$3.toString;function toSource(a){if(a!=null){try{return funcToString$3.call(a)}catch{}try{return a+""}catch{}}return""}var reRegExpChar=/[\\^$.*+?()[\]{}|]/g,reIsHostCtor=/^\[object .+?Constructor\]$/,funcProto$2=Function.prototype,objectProto$k=Object.prototype,funcToString$2=funcProto$2.toString,hasOwnProperty$e=objectProto$k.hasOwnProperty,reIsNative=RegExp("^"+funcToString$2.call(hasOwnProperty$e).replace(reRegExpChar,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function baseIsNative(a){if(!isObject$8(a)||isMasked(a))return!1;var c=isFunction$2(a)?reIsNative:reIsHostCtor;return c.test(toSource(a))}function getValue(a,c){return a==null?void 0:a[c]}function getNative(a,c){var b=getValue(a,c);return baseIsNative(b)?b:void 0}var WeakMap$2=getNative(root,"WeakMap"),objectCreate=Object.create,baseCreate=function(){function a(){}return function(c){if(!isObject$8(c))return{};if(objectCreate)return objectCreate(c);a.prototype=c;var b=new a;return a.prototype=void 0,b}}();function apply(a,c,b){switch(b.length){case 0:return a.call(c);case 1:return a.call(c,b[0]);case 2:return a.call(c,b[0],b[1]);case 3:return a.call(c,b[0],b[1],b[2])}return a.apply(c,b)}function copyArray(a,c){var b=-1,_=a.length;for(c||(c=Array(_));++b<_;)c[b]=a[b];return c}var HOT_COUNT=800,HOT_SPAN=16,nativeNow=Date.now;function shortOut(a){var c=0,b=0;return function(){var _=nativeNow(),$=HOT_SPAN-(_-b);if(b=_,$>0){if(++c>=HOT_COUNT)return arguments[0]}else c=0;return a.apply(void 0,arguments)}}function constant(a){return function(){return a}}var defineProperty=function(){try{var a=getNative(Object,"defineProperty");return a({},"",{}),a}catch{}}(),baseSetToString=defineProperty?function(a,c){return defineProperty(a,"toString",{configurable:!0,enumerable:!1,value:constant(c),writable:!0})}:identity;const baseSetToString$1=baseSetToString;var setToString=shortOut(baseSetToString$1);function arrayEach(a,c){for(var b=-1,_=a==null?0:a.length;++b<_&&c(a[b],b,a)!==!1;);return a}function baseFindIndex$1(a,c,b,_){for(var $=a.length,k=b+(_?1:-1);_?k--:++k<$;)if(c(a[k],k,a))return k;return-1}function baseIsNaN$1(a){return a!==a}function strictIndexOf(a,c,b){for(var _=b-1,$=a.length;++_<$;)if(a[_]===c)return _;return-1}function baseIndexOf$1(a,c,b){return c===c?strictIndexOf(a,c,b):baseFindIndex$1(a,baseIsNaN$1,b)}var MAX_SAFE_INTEGER$2=9007199254740991,reIsUint$1=/^(?:0|[1-9]\d*)$/;function isIndex$1(a,c){var b=typeof a;return c=c??MAX_SAFE_INTEGER$2,!!c&&(b=="number"||b!="symbol"&&reIsUint$1.test(a))&&a>-1&&a%1==0&&a<c}function baseAssignValue(a,c,b){c=="__proto__"&&defineProperty?defineProperty(a,c,{configurable:!0,enumerable:!0,value:b,writable:!0}):a[c]=b}function eq(a,c){return a===c||a!==a&&c!==c}var objectProto$j=Object.prototype,hasOwnProperty$d=objectProto$j.hasOwnProperty;function assignValue(a,c,b){var _=a[c];(!(hasOwnProperty$d.call(a,c)&&eq(_,b))||b===void 0&&!(c in a))&&baseAssignValue(a,c,b)}function copyObject(a,c,b,_){var $=!b;b||(b={});for(var k=-1,et=c.length;++k<et;){var nt=c[k],ot=_?_(b[nt],a[nt],nt,b,a):void 0;ot===void 0&&(ot=a[nt]),$?baseAssignValue(b,nt,ot):assignValue(b,nt,ot)}return b}var nativeMax$2=Math.max;function overRest(a,c,b){return c=nativeMax$2(c===void 0?a.length-1:c,0),function(){for(var _=arguments,$=-1,k=nativeMax$2(_.length-c,0),et=Array(k);++$<k;)et[$]=_[c+$];$=-1;for(var nt=Array(c+1);++$<c;)nt[$]=_[$];return nt[c]=b(et),apply(a,this,nt)}}function baseRest(a,c){return setToString(overRest(a,c,identity),a+"")}var MAX_SAFE_INTEGER$1=9007199254740991;function isLength$1(a){return typeof a=="number"&&a>-1&&a%1==0&&a<=MAX_SAFE_INTEGER$1}function isArrayLike$1(a){return a!=null&&isLength$1(a.length)&&!isFunction$2(a)}function isIterateeCall(a,c,b){if(!isObject$8(b))return!1;var _=typeof c;return(_=="number"?isArrayLike$1(b)&&isIndex$1(c,b.length):_=="string"&&c in b)?eq(b[c],a):!1}var objectProto$i=Object.prototype;function isPrototype$1(a){var c=a&&a.constructor,b=typeof c=="function"&&c.prototype||objectProto$i;return a===b}function baseTimes$1(a,c){for(var b=-1,_=Array(a);++b<a;)_[b]=c(b);return _}var argsTag$4="[object Arguments]";function baseIsArguments(a){return isObjectLike$7(a)&&baseGetTag(a)==argsTag$4}var objectProto$h=Object.prototype,hasOwnProperty$c=objectProto$h.hasOwnProperty,propertyIsEnumerable$2=objectProto$h.propertyIsEnumerable,isArguments$2=baseIsArguments(function(){return arguments}())?baseIsArguments:function(a){return isObjectLike$7(a)&&hasOwnProperty$c.call(a,"callee")&&!propertyIsEnumerable$2.call(a,"callee")};function stubFalse(){return!1}var freeExports$2=typeof exports=="object"&&exports&&!exports.nodeType&&exports,freeModule$2=freeExports$2&&typeof module=="object"&&module&&!module.nodeType&&module,moduleExports$2=freeModule$2&&freeModule$2.exports===freeExports$2,Buffer$N=moduleExports$2?root.Buffer:void 0,nativeIsBuffer=Buffer$N?Buffer$N.isBuffer:void 0,isBuffer$1=nativeIsBuffer||stubFalse,argsTag$3="[object Arguments]",arrayTag$2="[object Array]",boolTag$4="[object Boolean]",dateTag$3="[object Date]",errorTag$2="[object Error]",funcTag$2="[object Function]",mapTag$5="[object Map]",numberTag$4="[object Number]",objectTag$5="[object Object]",regexpTag$3="[object RegExp]",setTag$5="[object Set]",stringTag$5="[object String]",weakMapTag$2="[object WeakMap]",arrayBufferTag$3="[object ArrayBuffer]",dataViewTag$4="[object DataView]",float32Tag$2="[object Float32Array]",float64Tag$2="[object Float64Array]",int8Tag$2="[object Int8Array]",int16Tag$2="[object Int16Array]",int32Tag$2="[object Int32Array]",uint8Tag$2="[object Uint8Array]",uint8ClampedTag$2="[object Uint8ClampedArray]",uint16Tag$2="[object Uint16Array]",uint32Tag$2="[object Uint32Array]",typedArrayTags={};typedArrayTags[float32Tag$2]=typedArrayTags[float64Tag$2]=typedArrayTags[int8Tag$2]=typedArrayTags[int16Tag$2]=typedArrayTags[int32Tag$2]=typedArrayTags[uint8Tag$2]=typedArrayTags[uint8ClampedTag$2]=typedArrayTags[uint16Tag$2]=typedArrayTags[uint32Tag$2]=!0;typedArrayTags[argsTag$3]=typedArrayTags[arrayTag$2]=typedArrayTags[arrayBufferTag$3]=typedArrayTags[boolTag$4]=typedArrayTags[dataViewTag$4]=typedArrayTags[dateTag$3]=typedArrayTags[errorTag$2]=typedArrayTags[funcTag$2]=typedArrayTags[mapTag$5]=typedArrayTags[numberTag$4]=typedArrayTags[objectTag$5]=typedArrayTags[regexpTag$3]=typedArrayTags[setTag$5]=typedArrayTags[stringTag$5]=typedArrayTags[weakMapTag$2]=!1;function baseIsTypedArray(a){return isObjectLike$7(a)&&isLength$1(a.length)&&!!typedArrayTags[baseGetTag(a)]}function baseUnary(a){return function(c){return a(c)}}var freeExports$1=typeof exports=="object"&&exports&&!exports.nodeType&&exports,freeModule$1=freeExports$1&&typeof module=="object"&&module&&!module.nodeType&&module,moduleExports$1=freeModule$1&&freeModule$1.exports===freeExports$1,freeProcess=moduleExports$1&&freeGlobal.process,nodeUtil=function(){try{var a=freeModule$1&&freeModule$1.require&&freeModule$1.require("util").types;return a||freeProcess&&freeProcess.binding&&freeProcess.binding("util")}catch{}}(),nodeIsTypedArray=nodeUtil&&nodeUtil.isTypedArray,isTypedArray$1=nodeIsTypedArray?baseUnary(nodeIsTypedArray):baseIsTypedArray,objectProto$g=Object.prototype,hasOwnProperty$b=objectProto$g.hasOwnProperty;function arrayLikeKeys$1(a,c){var b=isArray$4(a),_=!b&&isArguments$2(a),$=!b&&!_&&isBuffer$1(a),k=!b&&!_&&!$&&isTypedArray$1(a),et=b||_||$||k,nt=et?baseTimes$1(a.length,String):[],ot=nt.length;for(var ht in a)(c||hasOwnProperty$b.call(a,ht))&&!(et&&(ht=="length"||$&&(ht=="offset"||ht=="parent")||k&&(ht=="buffer"||ht=="byteLength"||ht=="byteOffset")||isIndex$1(ht,ot)))&&nt.push(ht);return nt}function overArg$2(a,c){return function(b){return a(c(b))}}var nativeKeys$1=overArg$2(Object.keys,Object),objectProto$f=Object.prototype,hasOwnProperty$a=objectProto$f.hasOwnProperty;function baseKeys$1(a){if(!isPrototype$1(a))return nativeKeys$1(a);var c=[];for(var b in Object(a))hasOwnProperty$a.call(a,b)&&b!="constructor"&&c.push(b);return c}function keys$2(a){return isArrayLike$1(a)?arrayLikeKeys$1(a):baseKeys$1(a)}function nativeKeysIn(a){var c=[];if(a!=null)for(var b in Object(a))c.push(b);return c}var objectProto$e=Object.prototype,hasOwnProperty$9=objectProto$e.hasOwnProperty;function baseKeysIn(a){if(!isObject$8(a))return nativeKeysIn(a);var c=isPrototype$1(a),b=[];for(var _ in a)_=="constructor"&&(c||!hasOwnProperty$9.call(a,_))||b.push(_);return b}function keysIn(a){return isArrayLike$1(a)?arrayLikeKeys$1(a,!0):baseKeysIn(a)}var reIsDeepProp=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,reIsPlainProp=/^\w*$/;function isKey(a,c){if(isArray$4(a))return!1;var b=typeof a;return b=="number"||b=="symbol"||b=="boolean"||a==null||isSymbol$3(a)?!0:reIsPlainProp.test(a)||!reIsDeepProp.test(a)||c!=null&&a in Object(c)}var nativeCreate=getNative(Object,"create");function hashClear(){this.__data__=nativeCreate?nativeCreate(null):{},this.size=0}function hashDelete(a){var c=this.has(a)&&delete this.__data__[a];return this.size-=c?1:0,c}var HASH_UNDEFINED$2="__lodash_hash_undefined__",objectProto$d=Object.prototype,hasOwnProperty$8=objectProto$d.hasOwnProperty;function hashGet(a){var c=this.__data__;if(nativeCreate){var b=c[a];return b===HASH_UNDEFINED$2?void 0:b}return hasOwnProperty$8.call(c,a)?c[a]:void 0}var objectProto$c=Object.prototype,hasOwnProperty$7=objectProto$c.hasOwnProperty;function hashHas(a){var c=this.__data__;return nativeCreate?c[a]!==void 0:hasOwnProperty$7.call(c,a)}var HASH_UNDEFINED$1="__lodash_hash_undefined__";function hashSet(a,c){var b=this.__data__;return this.size+=this.has(a)?0:1,b[a]=nativeCreate&&c===void 0?HASH_UNDEFINED$1:c,this}function Hash$8(a){var c=-1,b=a==null?0:a.length;for(this.clear();++c<b;){var _=a[c];this.set(_[0],_[1])}}Hash$8.prototype.clear=hashClear;Hash$8.prototype.delete=hashDelete;Hash$8.prototype.get=hashGet;Hash$8.prototype.has=hashHas;Hash$8.prototype.set=hashSet;function listCacheClear(){this.__data__=[],this.size=0}function assocIndexOf(a,c){for(var b=a.length;b--;)if(eq(a[b][0],c))return b;return-1}var arrayProto$1=Array.prototype,splice$1=arrayProto$1.splice;function listCacheDelete(a){var c=this.__data__,b=assocIndexOf(c,a);if(b<0)return!1;var _=c.length-1;return b==_?c.pop():splice$1.call(c,b,1),--this.size,!0}function listCacheGet(a){var c=this.__data__,b=assocIndexOf(c,a);return b<0?void 0:c[b][1]}function listCacheHas(a){return assocIndexOf(this.__data__,a)>-1}function listCacheSet(a,c){var b=this.__data__,_=assocIndexOf(b,a);return _<0?(++this.size,b.push([a,c])):b[_][1]=c,this}function ListCache(a){var c=-1,b=a==null?0:a.length;for(this.clear();++c<b;){var _=a[c];this.set(_[0],_[1])}}ListCache.prototype.clear=listCacheClear;ListCache.prototype.delete=listCacheDelete;ListCache.prototype.get=listCacheGet;ListCache.prototype.has=listCacheHas;ListCache.prototype.set=listCacheSet;var Map$1=getNative(root,"Map");function mapCacheClear(){this.size=0,this.__data__={hash:new Hash$8,map:new(Map$1||ListCache),string:new Hash$8}}function isKeyable(a){var c=typeof a;return c=="string"||c=="number"||c=="symbol"||c=="boolean"?a!=="__proto__":a===null}function getMapData(a,c){var b=a.__data__;return isKeyable(c)?b[typeof c=="string"?"string":"hash"]:b.map}function mapCacheDelete(a){var c=getMapData(this,a).delete(a);return this.size-=c?1:0,c}function mapCacheGet(a){return getMapData(this,a).get(a)}function mapCacheHas(a){return getMapData(this,a).has(a)}function mapCacheSet(a,c){var b=getMapData(this,a),_=b.size;return b.set(a,c),this.size+=b.size==_?0:1,this}function MapCache(a){var c=-1,b=a==null?0:a.length;for(this.clear();++c<b;){var _=a[c];this.set(_[0],_[1])}}MapCache.prototype.clear=mapCacheClear;MapCache.prototype.delete=mapCacheDelete;MapCache.prototype.get=mapCacheGet;MapCache.prototype.has=mapCacheHas;MapCache.prototype.set=mapCacheSet;var FUNC_ERROR_TEXT$2="Expected a function";function memoize(a,c){if(typeof a!="function"||c!=null&&typeof c!="function")throw new TypeError(FUNC_ERROR_TEXT$2);var b=function(){var _=arguments,$=c?c.apply(this,_):_[0],k=b.cache;if(k.has($))return k.get($);var et=a.apply(this,_);return b.cache=k.set($,et)||k,et};return b.cache=new(memoize.Cache||MapCache),b}memoize.Cache=MapCache;var MAX_MEMOIZE_SIZE=500;function memoizeCapped(a){var c=memoize(a,function(_){return b.size===MAX_MEMOIZE_SIZE&&b.clear(),_}),b=c.cache;return c}var rePropName$1=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,reEscapeChar$1=/\\(\\)?/g,stringToPath$1=memoizeCapped(function(a){var c=[];return a.charCodeAt(0)===46&&c.push(""),a.replace(rePropName$1,function(b,_,$,k){c.push($?k.replace(reEscapeChar$1,"$1"):_||b)}),c});function toString$3(a){return a==null?"":baseToString(a)}function castPath(a,c){return isArray$4(a)?a:isKey(a,c)?[a]:stringToPath$1(toString$3(a))}var INFINITY$3=1/0;function toKey(a){if(typeof a=="string"||isSymbol$3(a))return a;var c=a+"";return c=="0"&&1/a==-INFINITY$3?"-0":c}function baseGet(a,c){c=castPath(c,a);for(var b=0,_=c.length;a!=null&&b<_;)a=a[toKey(c[b++])];return b&&b==_?a:void 0}function get(a,c,b){var _=a==null?void 0:baseGet(a,c);return _===void 0?b:_}function arrayPush(a,c){for(var b=-1,_=c.length,$=a.length;++b<_;)a[$+b]=c[b];return a}var spreadableSymbol=Symbol$1?Symbol$1.isConcatSpreadable:void 0;function isFlattenable(a){return isArray$4(a)||isArguments$2(a)||!!(spreadableSymbol&&a&&a[spreadableSymbol])}function baseFlatten(a,c,b,_,$){var k=-1,et=a.length;for(b||(b=isFlattenable),$||($=[]);++k<et;){var nt=a[k];c>0&&b(nt)?c>1?baseFlatten(nt,c-1,b,_,$):arrayPush($,nt):_||($[$.length]=nt)}return $}function flatten(a){var c=a==null?0:a.length;return c?baseFlatten(a,1):[]}function flatRest(a){return setToString(overRest(a,void 0,flatten),a+"")}var getPrototype$1=overArg$2(Object.getPrototypeOf,Object),objectTag$4="[object Object]",funcProto$1=Function.prototype,objectProto$b=Object.prototype,funcToString$1=funcProto$1.toString,hasOwnProperty$6=objectProto$b.hasOwnProperty,objectCtorString$1=funcToString$1.call(Object);function isPlainObject$3(a){if(!isObjectLike$7(a)||baseGetTag(a)!=objectTag$4)return!1;var c=getPrototype$1(a);if(c===null)return!0;var b=hasOwnProperty$6.call(c,"constructor")&&c.constructor;return typeof b=="function"&&b instanceof b&&funcToString$1.call(b)==objectCtorString$1}function baseSlice(a,c,b){var _=-1,$=a.length;c<0&&(c=-c>$?0:$+c),b=b>$?$:b,b<0&&(b+=$),$=c>b?0:b-c>>>0,c>>>=0;for(var k=Array($);++_<$;)k[_]=a[_+c];return k}function castSlice(a,c,b){var _=a.length;return b=b===void 0?_:b,!c&&b>=_?a:baseSlice(a,c,b)}var rsAstralRange$2="\\ud800-\\udfff",rsComboMarksRange$3="\\u0300-\\u036f",reComboHalfMarksRange$3="\\ufe20-\\ufe2f",rsComboSymbolsRange$3="\\u20d0-\\u20ff",rsComboRange$3=rsComboMarksRange$3+reComboHalfMarksRange$3+rsComboSymbolsRange$3,rsVarRange$2="\\ufe0e\\ufe0f",rsZWJ$2="\\u200d",reHasUnicode=RegExp("["+rsZWJ$2+rsAstralRange$2+rsComboRange$3+rsVarRange$2+"]");function hasUnicode(a){return reHasUnicode.test(a)}function asciiToArray(a){return a.split("")}var rsAstralRange$1="\\ud800-\\udfff",rsComboMarksRange$2="\\u0300-\\u036f",reComboHalfMarksRange$2="\\ufe20-\\ufe2f",rsComboSymbolsRange$2="\\u20d0-\\u20ff",rsComboRange$2=rsComboMarksRange$2+reComboHalfMarksRange$2+rsComboSymbolsRange$2,rsVarRange$1="\\ufe0e\\ufe0f",rsAstral="["+rsAstralRange$1+"]",rsCombo$2="["+rsComboRange$2+"]",rsFitz$1="\\ud83c[\\udffb-\\udfff]",rsModifier$1="(?:"+rsCombo$2+"|"+rsFitz$1+")",rsNonAstral$1="[^"+rsAstralRange$1+"]",rsRegional$1="(?:\\ud83c[\\udde6-\\uddff]){2}",rsSurrPair$1="[\\ud800-\\udbff][\\udc00-\\udfff]",rsZWJ$1="\\u200d",reOptMod$1=rsModifier$1+"?",rsOptVar$1="["+rsVarRange$1+"]?",rsOptJoin$1="(?:"+rsZWJ$1+"(?:"+[rsNonAstral$1,rsRegional$1,rsSurrPair$1].join("|")+")"+rsOptVar$1+reOptMod$1+")*",rsSeq$1=rsOptVar$1+reOptMod$1+rsOptJoin$1,rsSymbol="(?:"+[rsNonAstral$1+rsCombo$2+"?",rsCombo$2,rsRegional$1,rsSurrPair$1,rsAstral].join("|")+")",reUnicode=RegExp(rsFitz$1+"(?="+rsFitz$1+")|"+rsSymbol+rsSeq$1,"g");function unicodeToArray(a){return a.match(reUnicode)||[]}function stringToArray(a){return hasUnicode(a)?unicodeToArray(a):asciiToArray(a)}function createCaseFirst(a){return function(c){c=toString$3(c);var b=hasUnicode(c)?stringToArray(c):void 0,_=b?b[0]:c.charAt(0),$=b?castSlice(b,1).join(""):c.slice(1);return _[a]()+$}}var upperFirst=createCaseFirst("toUpperCase");function capitalize(a){return upperFirst(toString$3(a).toLowerCase())}function arrayReduce(a,c,b,_){var $=-1,k=a==null?0:a.length;for(_&&k&&(b=a[++$]);++$<k;)b=c(b,a[$],$,a);return b}function basePropertyOf(a){return function(c){return a==null?void 0:a[c]}}var deburredLetters={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},deburrLetter=basePropertyOf(deburredLetters);const deburrLetter$1=deburrLetter;var reLatin=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,rsComboMarksRange$1="\\u0300-\\u036f",reComboHalfMarksRange$1="\\ufe20-\\ufe2f",rsComboSymbolsRange$1="\\u20d0-\\u20ff",rsComboRange$1=rsComboMarksRange$1+reComboHalfMarksRange$1+rsComboSymbolsRange$1,rsCombo$1="["+rsComboRange$1+"]",reComboMark=RegExp(rsCombo$1,"g");function deburr(a){return a=toString$3(a),a&&a.replace(reLatin,deburrLetter$1).replace(reComboMark,"")}var reAsciiWord=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;function asciiWords(a){return a.match(reAsciiWord)||[]}var reHasUnicodeWord=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;function hasUnicodeWord(a){return reHasUnicodeWord.test(a)}var rsAstralRange="\\ud800-\\udfff",rsComboMarksRange="\\u0300-\\u036f",reComboHalfMarksRange="\\ufe20-\\ufe2f",rsComboSymbolsRange="\\u20d0-\\u20ff",rsComboRange=rsComboMarksRange+reComboHalfMarksRange+rsComboSymbolsRange,rsDingbatRange="\\u2700-\\u27bf",rsLowerRange="a-z\\xdf-\\xf6\\xf8-\\xff",rsMathOpRange="\\xac\\xb1\\xd7\\xf7",rsNonCharRange="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",rsPunctuationRange="\\u2000-\\u206f",rsSpaceRange=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",rsUpperRange="A-Z\\xc0-\\xd6\\xd8-\\xde",rsVarRange="\\ufe0e\\ufe0f",rsBreakRange=rsMathOpRange+rsNonCharRange+rsPunctuationRange+rsSpaceRange,rsApos$1="[']",rsBreak="["+rsBreakRange+"]",rsCombo="["+rsComboRange+"]",rsDigits="\\d+",rsDingbat="["+rsDingbatRange+"]",rsLower="["+rsLowerRange+"]",rsMisc="[^"+rsAstralRange+rsBreakRange+rsDigits+rsDingbatRange+rsLowerRange+rsUpperRange+"]",rsFitz="\\ud83c[\\udffb-\\udfff]",rsModifier="(?:"+rsCombo+"|"+rsFitz+")",rsNonAstral="[^"+rsAstralRange+"]",rsRegional="(?:\\ud83c[\\udde6-\\uddff]){2}",rsSurrPair="[\\ud800-\\udbff][\\udc00-\\udfff]",rsUpper="["+rsUpperRange+"]",rsZWJ="\\u200d",rsMiscLower="(?:"+rsLower+"|"+rsMisc+")",rsMiscUpper="(?:"+rsUpper+"|"+rsMisc+")",rsOptContrLower="(?:"+rsApos$1+"(?:d|ll|m|re|s|t|ve))?",rsOptContrUpper="(?:"+rsApos$1+"(?:D|LL|M|RE|S|T|VE))?",reOptMod=rsModifier+"?",rsOptVar="["+rsVarRange+"]?",rsOptJoin="(?:"+rsZWJ+"(?:"+[rsNonAstral,rsRegional,rsSurrPair].join("|")+")"+rsOptVar+reOptMod+")*",rsOrdLower="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",rsOrdUpper="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",rsSeq=rsOptVar+reOptMod+rsOptJoin,rsEmoji="(?:"+[rsDingbat,rsRegional,rsSurrPair].join("|")+")"+rsSeq,reUnicodeWord=RegExp([rsUpper+"?"+rsLower+"+"+rsOptContrLower+"(?="+[rsBreak,rsUpper,"$"].join("|")+")",rsMiscUpper+"+"+rsOptContrUpper+"(?="+[rsBreak,rsUpper+rsMiscLower,"$"].join("|")+")",rsUpper+"?"+rsMiscLower+"+"+rsOptContrLower,rsUpper+"+"+rsOptContrUpper,rsOrdUpper,rsOrdLower,rsDigits,rsEmoji].join("|"),"g");function unicodeWords(a){return a.match(reUnicodeWord)||[]}function words(a,c,b){return a=toString$3(a),c=b?void 0:c,c===void 0?hasUnicodeWord(a)?unicodeWords(a):asciiWords(a):a.match(c)||[]}var rsApos="[']",reApos=RegExp(rsApos,"g");function createCompounder(a){return function(c){return arrayReduce(words(deburr(c).replace(reApos,"")),a,"")}}var camelCase$2=createCompounder(function(a,c,b){return c=c.toLowerCase(),a+(b?capitalize(c):c)});const camelCase$3=camelCase$2;function stackClear(){this.__data__=new ListCache,this.size=0}function stackDelete(a){var c=this.__data__,b=c.delete(a);return this.size=c.size,b}function stackGet(a){return this.__data__.get(a)}function stackHas(a){return this.__data__.has(a)}var LARGE_ARRAY_SIZE=200;function stackSet(a,c){var b=this.__data__;if(b instanceof ListCache){var _=b.__data__;if(!Map$1||_.length<LARGE_ARRAY_SIZE-1)return _.push([a,c]),this.size=++b.size,this;b=this.__data__=new MapCache(_)}return b.set(a,c),this.size=b.size,this}function Stack(a){var c=this.__data__=new ListCache(a);this.size=c.size}Stack.prototype.clear=stackClear;Stack.prototype.delete=stackDelete;Stack.prototype.get=stackGet;Stack.prototype.has=stackHas;Stack.prototype.set=stackSet;function baseAssign(a,c){return a&&copyObject(c,keys$2(c),a)}function baseAssignIn(a,c){return a&&copyObject(c,keysIn(c),a)}var freeExports=typeof exports=="object"&&exports&&!exports.nodeType&&exports,freeModule=freeExports&&typeof module=="object"&&module&&!module.nodeType&&module,moduleExports=freeModule&&freeModule.exports===freeExports,Buffer$M=moduleExports?root.Buffer:void 0,allocUnsafe=Buffer$M?Buffer$M.allocUnsafe:void 0;function cloneBuffer(a,c){if(c)return a.slice();var b=a.length,_=allocUnsafe?allocUnsafe(b):new a.constructor(b);return a.copy(_),_}function arrayFilter(a,c){for(var b=-1,_=a==null?0:a.length,$=0,k=[];++b<_;){var et=a[b];c(et,b,a)&&(k[$++]=et)}return k}function stubArray(){return[]}var objectProto$a=Object.prototype,propertyIsEnumerable$1=objectProto$a.propertyIsEnumerable,nativeGetSymbols$1=Object.getOwnPropertySymbols,getSymbols=nativeGetSymbols$1?function(a){return a==null?[]:(a=Object(a),arrayFilter(nativeGetSymbols$1(a),function(c){return propertyIsEnumerable$1.call(a,c)}))}:stubArray;function copySymbols(a,c){return copyObject(a,getSymbols(a),c)}var nativeGetSymbols=Object.getOwnPropertySymbols,getSymbolsIn=nativeGetSymbols?function(a){for(var c=[];a;)arrayPush(c,getSymbols(a)),a=getPrototype$1(a);return c}:stubArray;const getSymbolsIn$1=getSymbolsIn;function copySymbolsIn(a,c){return copyObject(a,getSymbolsIn$1(a),c)}function baseGetAllKeys(a,c,b){var _=c(a);return isArray$4(a)?_:arrayPush(_,b(a))}function getAllKeys(a){return baseGetAllKeys(a,keys$2,getSymbols)}function getAllKeysIn(a){return baseGetAllKeys(a,keysIn,getSymbolsIn$1)}var DataView$1=getNative(root,"DataView"),Promise$1=getNative(root,"Promise"),Set$1=getNative(root,"Set"),mapTag$4="[object Map]",objectTag$3="[object Object]",promiseTag="[object Promise]",setTag$4="[object Set]",weakMapTag$1="[object WeakMap]",dataViewTag$3="[object DataView]",dataViewCtorString=toSource(DataView$1),mapCtorString=toSource(Map$1),promiseCtorString=toSource(Promise$1),setCtorString=toSource(Set$1),weakMapCtorString=toSource(WeakMap$2),getTag=baseGetTag;(DataView$1&&getTag(new DataView$1(new ArrayBuffer(1)))!=dataViewTag$3||Map$1&&getTag(new Map$1)!=mapTag$4||Promise$1&&getTag(Promise$1.resolve())!=promiseTag||Set$1&&getTag(new Set$1)!=setTag$4||WeakMap$2&&getTag(new WeakMap$2)!=weakMapTag$1)&&(getTag=function(a){var c=baseGetTag(a),b=c==objectTag$3?a.constructor:void 0,_=b?toSource(b):"";if(_)switch(_){case dataViewCtorString:return dataViewTag$3;case mapCtorString:return mapTag$4;case promiseCtorString:return promiseTag;case setCtorString:return setTag$4;case weakMapCtorString:return weakMapTag$1}return c});const getTag$1=getTag;var objectProto$9=Object.prototype,hasOwnProperty$5=objectProto$9.hasOwnProperty;function initCloneArray(a){var c=a.length,b=new a.constructor(c);return c&&typeof a[0]=="string"&&hasOwnProperty$5.call(a,"index")&&(b.index=a.index,b.input=a.input),b}var Uint8Array$1=root.Uint8Array;function cloneArrayBuffer(a){var c=new a.constructor(a.byteLength);return new Uint8Array$1(c).set(new Uint8Array$1(a)),c}function cloneDataView(a,c){var b=c?cloneArrayBuffer(a.buffer):a.buffer;return new a.constructor(b,a.byteOffset,a.byteLength)}var reFlags=/\w*$/;function cloneRegExp(a){var c=new a.constructor(a.source,reFlags.exec(a));return c.lastIndex=a.lastIndex,c}var symbolProto$1=Symbol$1?Symbol$1.prototype:void 0,symbolValueOf$1=symbolProto$1?symbolProto$1.valueOf:void 0;function cloneSymbol(a){return symbolValueOf$1?Object(symbolValueOf$1.call(a)):{}}function cloneTypedArray(a,c){var b=c?cloneArrayBuffer(a.buffer):a.buffer;return new a.constructor(b,a.byteOffset,a.length)}var boolTag$3="[object Boolean]",dateTag$2="[object Date]",mapTag$3="[object Map]",numberTag$3="[object Number]",regexpTag$2="[object RegExp]",setTag$3="[object Set]",stringTag$4="[object String]",symbolTag$5="[object Symbol]",arrayBufferTag$2="[object ArrayBuffer]",dataViewTag$2="[object DataView]",float32Tag$1="[object Float32Array]",float64Tag$1="[object Float64Array]",int8Tag$1="[object Int8Array]",int16Tag$1="[object Int16Array]",int32Tag$1="[object Int32Array]",uint8Tag$1="[object Uint8Array]",uint8ClampedTag$1="[object Uint8ClampedArray]",uint16Tag$1="[object Uint16Array]",uint32Tag$1="[object Uint32Array]";function initCloneByTag(a,c,b){var _=a.constructor;switch(c){case arrayBufferTag$2:return cloneArrayBuffer(a);case boolTag$3:case dateTag$2:return new _(+a);case dataViewTag$2:return cloneDataView(a,b);case float32Tag$1:case float64Tag$1:case int8Tag$1:case int16Tag$1:case int32Tag$1:case uint8Tag$1:case uint8ClampedTag$1:case uint16Tag$1:case uint32Tag$1:return cloneTypedArray(a,b);case mapTag$3:return new _;case numberTag$3:case stringTag$4:return new _(a);case regexpTag$2:return cloneRegExp(a);case setTag$3:return new _;case symbolTag$5:return cloneSymbol(a)}}function initCloneObject(a){return typeof a.constructor=="function"&&!isPrototype$1(a)?baseCreate(getPrototype$1(a)):{}}var mapTag$2="[object Map]";function baseIsMap(a){return isObjectLike$7(a)&&getTag$1(a)==mapTag$2}var nodeIsMap=nodeUtil&&nodeUtil.isMap,isMap=nodeIsMap?baseUnary(nodeIsMap):baseIsMap,setTag$2="[object Set]";function baseIsSet(a){return isObjectLike$7(a)&&getTag$1(a)==setTag$2}var nodeIsSet=nodeUtil&&nodeUtil.isSet,isSet$2=nodeIsSet?baseUnary(nodeIsSet):baseIsSet,CLONE_DEEP_FLAG$3=1,CLONE_FLAT_FLAG$1=2,CLONE_SYMBOLS_FLAG$2=4,argsTag$2="[object Arguments]",arrayTag$1="[object Array]",boolTag$2="[object Boolean]",dateTag$1="[object Date]",errorTag$1="[object Error]",funcTag$1="[object Function]",genTag$1="[object GeneratorFunction]",mapTag$1="[object Map]",numberTag$2="[object Number]",objectTag$2="[object Object]",regexpTag$1="[object RegExp]",setTag$1="[object Set]",stringTag$3="[object String]",symbolTag$4="[object Symbol]",weakMapTag="[object WeakMap]",arrayBufferTag$1="[object ArrayBuffer]",dataViewTag$1="[object DataView]",float32Tag="[object Float32Array]",float64Tag="[object Float64Array]",int8Tag="[object Int8Array]",int16Tag="[object Int16Array]",int32Tag="[object Int32Array]",uint8Tag="[object Uint8Array]",uint8ClampedTag="[object Uint8ClampedArray]",uint16Tag="[object Uint16Array]",uint32Tag="[object Uint32Array]",cloneableTags={};cloneableTags[argsTag$2]=cloneableTags[arrayTag$1]=cloneableTags[arrayBufferTag$1]=cloneableTags[dataViewTag$1]=cloneableTags[boolTag$2]=cloneableTags[dateTag$1]=cloneableTags[float32Tag]=cloneableTags[float64Tag]=cloneableTags[int8Tag]=cloneableTags[int16Tag]=cloneableTags[int32Tag]=cloneableTags[mapTag$1]=cloneableTags[numberTag$2]=cloneableTags[objectTag$2]=cloneableTags[regexpTag$1]=cloneableTags[setTag$1]=cloneableTags[stringTag$3]=cloneableTags[symbolTag$4]=cloneableTags[uint8Tag]=cloneableTags[uint8ClampedTag]=cloneableTags[uint16Tag]=cloneableTags[uint32Tag]=!0;cloneableTags[errorTag$1]=cloneableTags[funcTag$1]=cloneableTags[weakMapTag]=!1;function baseClone(a,c,b,_,$,k){var et,nt=c&CLONE_DEEP_FLAG$3,ot=c&CLONE_FLAT_FLAG$1,ht=c&CLONE_SYMBOLS_FLAG$2;if(b&&(et=$?b(a,_,$,k):b(a)),et!==void 0)return et;if(!isObject$8(a))return a;var vt=isArray$4(a);if(vt){if(et=initCloneArray(a),!nt)return copyArray(a,et)}else{var _t=getTag$1(a),kt=_t==funcTag$1||_t==genTag$1;if(isBuffer$1(a))return cloneBuffer(a,nt);if(_t==objectTag$2||_t==argsTag$2||kt&&!$){if(et=ot||kt?{}:initCloneObject(a),!nt)return ot?copySymbolsIn(a,baseAssignIn(et,a)):copySymbols(a,baseAssign(et,a))}else{if(!cloneableTags[_t])return $?a:{};et=initCloneByTag(a,_t,nt)}}k||(k=new Stack);var $t=k.get(a);if($t)return $t;k.set(a,et),isSet$2(a)?a.forEach(function(Mt){et.add(baseClone(Mt,c,b,Mt,a,k))}):isMap(a)&&a.forEach(function(Mt,Dt){et.set(Dt,baseClone(Mt,c,b,Dt,a,k))});var Tt=ht?ot?getAllKeysIn:getAllKeys:ot?keysIn:keys$2,At=vt?void 0:Tt(a);return arrayEach(At||a,function(Mt,Dt){At&&(Dt=Mt,Mt=a[Dt]),assignValue(et,Dt,baseClone(Mt,c,b,Dt,a,k))}),et}var CLONE_DEEP_FLAG$2=1,CLONE_SYMBOLS_FLAG$1=4;function cloneDeep$1(a){return baseClone(a,CLONE_DEEP_FLAG$2|CLONE_SYMBOLS_FLAG$1)}var HASH_UNDEFINED="__lodash_hash_undefined__";function setCacheAdd(a){return this.__data__.set(a,HASH_UNDEFINED),this}function setCacheHas(a){return this.__data__.has(a)}function SetCache(a){var c=-1,b=a==null?0:a.length;for(this.__data__=new MapCache;++c<b;)this.add(a[c])}SetCache.prototype.add=SetCache.prototype.push=setCacheAdd;SetCache.prototype.has=setCacheHas;function arraySome(a,c){for(var b=-1,_=a==null?0:a.length;++b<_;)if(c(a[b],b,a))return!0;return!1}function cacheHas(a,c){return a.has(c)}var COMPARE_PARTIAL_FLAG$5=1,COMPARE_UNORDERED_FLAG$3=2;function equalArrays(a,c,b,_,$,k){var et=b&COMPARE_PARTIAL_FLAG$5,nt=a.length,ot=c.length;if(nt!=ot&&!(et&&ot>nt))return!1;var ht=k.get(a),vt=k.get(c);if(ht&&vt)return ht==c&&vt==a;var _t=-1,kt=!0,$t=b&COMPARE_UNORDERED_FLAG$3?new SetCache:void 0;for(k.set(a,c),k.set(c,a);++_t<nt;){var Tt=a[_t],At=c[_t];if(_)var Mt=et?_(At,Tt,_t,c,a,k):_(Tt,At,_t,a,c,k);if(Mt!==void 0){if(Mt)continue;kt=!1;break}if($t){if(!arraySome(c,function(Dt,Rt){if(!cacheHas($t,Rt)&&(Tt===Dt||$(Tt,Dt,b,_,k)))return $t.push(Rt)})){kt=!1;break}}else if(!(Tt===At||$(Tt,At,b,_,k))){kt=!1;break}}return k.delete(a),k.delete(c),kt}function mapToArray(a){var c=-1,b=Array(a.size);return a.forEach(function(_,$){b[++c]=[$,_]}),b}function setToArray(a){var c=-1,b=Array(a.size);return a.forEach(function(_){b[++c]=_}),b}var COMPARE_PARTIAL_FLAG$4=1,COMPARE_UNORDERED_FLAG$2=2,boolTag$1="[object Boolean]",dateTag="[object Date]",errorTag="[object Error]",mapTag="[object Map]",numberTag$1="[object Number]",regexpTag="[object RegExp]",setTag="[object Set]",stringTag$2="[object String]",symbolTag$3="[object Symbol]",arrayBufferTag="[object ArrayBuffer]",dataViewTag="[object DataView]",symbolProto=Symbol$1?Symbol$1.prototype:void 0,symbolValueOf=symbolProto?symbolProto.valueOf:void 0;function equalByTag(a,c,b,_,$,k,et){switch(b){case dataViewTag:if(a.byteLength!=c.byteLength||a.byteOffset!=c.byteOffset)return!1;a=a.buffer,c=c.buffer;case arrayBufferTag:return!(a.byteLength!=c.byteLength||!k(new Uint8Array$1(a),new Uint8Array$1(c)));case boolTag$1:case dateTag:case numberTag$1:return eq(+a,+c);case errorTag:return a.name==c.name&&a.message==c.message;case regexpTag:case stringTag$2:return a==c+"";case mapTag:var nt=mapToArray;case setTag:var ot=_&COMPARE_PARTIAL_FLAG$4;if(nt||(nt=setToArray),a.size!=c.size&&!ot)return!1;var ht=et.get(a);if(ht)return ht==c;_|=COMPARE_UNORDERED_FLAG$2,et.set(a,c);var vt=equalArrays(nt(a),nt(c),_,$,k,et);return et.delete(a),vt;case symbolTag$3:if(symbolValueOf)return symbolValueOf.call(a)==symbolValueOf.call(c)}return!1}var COMPARE_PARTIAL_FLAG$3=1,objectProto$8=Object.prototype,hasOwnProperty$4=objectProto$8.hasOwnProperty;function equalObjects(a,c,b,_,$,k){var et=b&COMPARE_PARTIAL_FLAG$3,nt=getAllKeys(a),ot=nt.length,ht=getAllKeys(c),vt=ht.length;if(ot!=vt&&!et)return!1;for(var _t=ot;_t--;){var kt=nt[_t];if(!(et?kt in c:hasOwnProperty$4.call(c,kt)))return!1}var $t=k.get(a),Tt=k.get(c);if($t&&Tt)return $t==c&&Tt==a;var At=!0;k.set(a,c),k.set(c,a);for(var Mt=et;++_t<ot;){kt=nt[_t];var Dt=a[kt],Rt=c[kt];if(_)var xt=et?_(Rt,Dt,kt,c,a,k):_(Dt,Rt,kt,a,c,k);if(!(xt===void 0?Dt===Rt||$(Dt,Rt,b,_,k):xt)){At=!1;break}Mt||(Mt=kt=="constructor")}if(At&&!Mt){var Jt=a.constructor,ar=c.constructor;Jt!=ar&&"constructor"in a&&"constructor"in c&&!(typeof Jt=="function"&&Jt instanceof Jt&&typeof ar=="function"&&ar instanceof ar)&&(At=!1)}return k.delete(a),k.delete(c),At}var COMPARE_PARTIAL_FLAG$2=1,argsTag$1="[object Arguments]",arrayTag="[object Array]",objectTag$1="[object Object]",objectProto$7=Object.prototype,hasOwnProperty$3=objectProto$7.hasOwnProperty;function baseIsEqualDeep(a,c,b,_,$,k){var et=isArray$4(a),nt=isArray$4(c),ot=et?arrayTag:getTag$1(a),ht=nt?arrayTag:getTag$1(c);ot=ot==argsTag$1?objectTag$1:ot,ht=ht==argsTag$1?objectTag$1:ht;var vt=ot==objectTag$1,_t=ht==objectTag$1,kt=ot==ht;if(kt&&isBuffer$1(a)){if(!isBuffer$1(c))return!1;et=!0,vt=!1}if(kt&&!vt)return k||(k=new Stack),et||isTypedArray$1(a)?equalArrays(a,c,b,_,$,k):equalByTag(a,c,ot,b,_,$,k);if(!(b&COMPARE_PARTIAL_FLAG$2)){var $t=vt&&hasOwnProperty$3.call(a,"__wrapped__"),Tt=_t&&hasOwnProperty$3.call(c,"__wrapped__");if($t||Tt){var At=$t?a.value():a,Mt=Tt?c.value():c;return k||(k=new Stack),$(At,Mt,b,_,k)}}return kt?(k||(k=new Stack),equalObjects(a,c,b,_,$,k)):!1}function baseIsEqual(a,c,b,_,$){return a===c?!0:a==null||c==null||!isObjectLike$7(a)&&!isObjectLike$7(c)?a!==a&&c!==c:baseIsEqualDeep(a,c,b,_,baseIsEqual,$)}var COMPARE_PARTIAL_FLAG$1=1,COMPARE_UNORDERED_FLAG$1=2;function baseIsMatch(a,c,b,_){var $=b.length,k=$,et=!_;if(a==null)return!k;for(a=Object(a);$--;){var nt=b[$];if(et&&nt[2]?nt[1]!==a[nt[0]]:!(nt[0]in a))return!1}for(;++$<k;){nt=b[$];var ot=nt[0],ht=a[ot],vt=nt[1];if(et&&nt[2]){if(ht===void 0&&!(ot in a))return!1}else{var _t=new Stack;if(_)var kt=_(ht,vt,ot,a,c,_t);if(!(kt===void 0?baseIsEqual(vt,ht,COMPARE_PARTIAL_FLAG$1|COMPARE_UNORDERED_FLAG$1,_,_t):kt))return!1}}return!0}function isStrictComparable(a){return a===a&&!isObject$8(a)}function getMatchData(a){for(var c=keys$2(a),b=c.length;b--;){var _=c[b],$=a[_];c[b]=[_,$,isStrictComparable($)]}return c}function matchesStrictComparable(a,c){return function(b){return b==null?!1:b[a]===c&&(c!==void 0||a in Object(b))}}function baseMatches(a){var c=getMatchData(a);return c.length==1&&c[0][2]?matchesStrictComparable(c[0][0],c[0][1]):function(b){return b===a||baseIsMatch(b,a,c)}}function baseHasIn(a,c){return a!=null&&c in Object(a)}function hasPath(a,c,b){c=castPath(c,a);for(var _=-1,$=c.length,k=!1;++_<$;){var et=toKey(c[_]);if(!(k=a!=null&&b(a,et)))break;a=a[et]}return k||++_!=$?k:($=a==null?0:a.length,!!$&&isLength$1($)&&isIndex$1(et,$)&&(isArray$4(a)||isArguments$2(a)))}function hasIn(a,c){return a!=null&&hasPath(a,c,baseHasIn)}var COMPARE_PARTIAL_FLAG=1,COMPARE_UNORDERED_FLAG=2;function baseMatchesProperty(a,c){return isKey(a)&&isStrictComparable(c)?matchesStrictComparable(toKey(a),c):function(b){var _=get(b,a);return _===void 0&&_===c?hasIn(b,a):baseIsEqual(c,_,COMPARE_PARTIAL_FLAG|COMPARE_UNORDERED_FLAG)}}function baseProperty(a){return function(c){return c==null?void 0:c[a]}}function basePropertyDeep(a){return function(c){return baseGet(c,a)}}function property(a){return isKey(a)?baseProperty(toKey(a)):basePropertyDeep(a)}function baseIteratee(a){return typeof a=="function"?a:a==null?identity:typeof a=="object"?isArray$4(a)?baseMatchesProperty(a[0],a[1]):baseMatches(a):property(a)}function createBaseFor(a){return function(c,b,_){for(var $=-1,k=Object(c),et=_(c),nt=et.length;nt--;){var ot=et[a?nt:++$];if(b(k[ot],ot,k)===!1)break}return c}}var baseFor=createBaseFor();const baseFor$1=baseFor;function baseForOwn(a,c){return a&&baseFor$1(a,c,keys$2)}function createBaseEach(a,c){return function(b,_){if(b==null)return b;if(!isArrayLike$1(b))return a(b,_);for(var $=b.length,k=c?$:-1,et=Object(b);(c?k--:++k<$)&&_(et[k],k,et)!==!1;);return b}}var baseEach=createBaseEach(baseForOwn),now=function(){return root.Date.now()},FUNC_ERROR_TEXT$1="Expected a function",nativeMax$1=Math.max,nativeMin=Math.min;function debounce(a,c,b){var _,$,k,et,nt,ot,ht=0,vt=!1,_t=!1,kt=!0;if(typeof a!="function")throw new TypeError(FUNC_ERROR_TEXT$1);c=toNumber$3(c)||0,isObject$8(b)&&(vt=!!b.leading,_t="maxWait"in b,k=_t?nativeMax$1(toNumber$3(b.maxWait)||0,c):k,kt="trailing"in b?!!b.trailing:kt);function $t(nr){var pr=_,ur=$;return _=$=void 0,ht=nr,et=a.apply(ur,pr),et}function Tt(nr){return ht=nr,nt=setTimeout(Dt,c),vt?$t(nr):et}function At(nr){var pr=nr-ot,ur=nr-ht,Ot=c-pr;return _t?nativeMin(Ot,k-ur):Ot}function Mt(nr){var pr=nr-ot,ur=nr-ht;return ot===void 0||pr>=c||pr<0||_t&&ur>=k}function Dt(){var nr=now();if(Mt(nr))return Rt(nr);nt=setTimeout(Dt,At(nr))}function Rt(nr){return nt=void 0,kt&&_?$t(nr):(_=$=void 0,et)}function xt(){nt!==void 0&&clearTimeout(nt),ht=0,_=ot=$=nt=void 0}function Jt(){return nt===void 0?et:Rt(now())}function ar(){var nr=now(),pr=Mt(nr);if(_=arguments,$=this,ot=nr,pr){if(nt===void 0)return Tt(ot);if(_t)return clearTimeout(nt),nt=setTimeout(Dt,c),$t(ot)}return nt===void 0&&(nt=setTimeout(Dt,c)),et}return ar.cancel=xt,ar.flush=Jt,ar}function last(a){var c=a==null?0:a.length;return c?a[c-1]:void 0}function arrayEvery(a,c){for(var b=-1,_=a==null?0:a.length;++b<_;)if(!c(a[b],b,a))return!1;return!0}function baseEvery(a,c){var b=!0;return baseEach(a,function(_,$,k){return b=!!c(_,$,k),b}),b}function every(a,c,b){var _=isArray$4(a)?arrayEvery:baseEvery;return b&&isIterateeCall(a,c,b)&&(c=void 0),_(a,baseIteratee(c))}function baseMap(a,c){var b=-1,_=isArrayLike$1(a)?Array(a.length):[];return baseEach(a,function($,k,et){_[++b]=c($,k,et)}),_}function parent(a,c){return c.length<2?a:baseGet(a,baseSlice(c,0,-1))}function isEqual(a,c){return baseIsEqual(a,c)}function isMatch(a,c){return a===c||baseIsMatch(a,c,getMatchData(c))}var CLONE_DEEP_FLAG$1=1;function iteratee(a){return baseIteratee(typeof a=="function"?a:baseClone(a,CLONE_DEEP_FLAG$1))}var kebabCase=createCompounder(function(a,c,b){return a+(b?"-":"")+c.toLowerCase()});const kebabCase$1=kebabCase;function baseUnset(a,c){return c=castPath(c,a),a=parent(a,c),a==null||delete a[toKey(last(c))]}function customOmitClone(a){return isPlainObject$3(a)?void 0:a}var CLONE_DEEP_FLAG=1,CLONE_FLAT_FLAG=2,CLONE_SYMBOLS_FLAG=4,omit=flatRest(function(a,c){var b={};if(a==null)return b;var _=!1;c=arrayMap$1(c,function(k){return k=castPath(k,a),_||(_=k.length>1),k}),copyObject(a,getAllKeysIn(a),b),_&&(b=baseClone(b,CLONE_DEEP_FLAG|CLONE_FLAT_FLAG|CLONE_SYMBOLS_FLAG,customOmitClone));for(var $=c.length;$--;)baseUnset(b,c[$]);return b});function baseSet(a,c,b,_){if(!isObject$8(a))return a;c=castPath(c,a);for(var $=-1,k=c.length,et=k-1,nt=a;nt!=null&&++$<k;){var ot=toKey(c[$]),ht=b;if(ot==="__proto__"||ot==="constructor"||ot==="prototype")return a;if($!=et){var vt=nt[ot];ht=_?_(vt,ot,nt):void 0,ht===void 0&&(ht=isObject$8(vt)?vt:isIndex$1(c[$+1])?[]:{})}assignValue(nt,ot,ht),nt=nt[ot]}return a}function basePickBy(a,c,b){for(var _=-1,$=c.length,k={};++_<$;){var et=c[_],nt=baseGet(a,et);b(nt,et)&&baseSet(k,castPath(et,a),nt)}return k}function baseSortBy(a,c){var b=a.length;for(a.sort(c);b--;)a[b]=a[b].value;return a}function compareAscending(a,c){if(a!==c){var b=a!==void 0,_=a===null,$=a===a,k=isSymbol$3(a),et=c!==void 0,nt=c===null,ot=c===c,ht=isSymbol$3(c);if(!nt&&!ht&&!k&&a>c||k&&et&&ot&&!nt&&!ht||_&&et&&ot||!b&&ot||!$)return 1;if(!_&&!k&&!ht&&a<c||ht&&b&&$&&!_&&!k||nt&&b&&$||!et&&$||!ot)return-1}return 0}function compareMultiple(a,c,b){for(var _=-1,$=a.criteria,k=c.criteria,et=$.length,nt=b.length;++_<et;){var ot=compareAscending($[_],k[_]);if(ot){if(_>=nt)return ot;var ht=b[_];return ot*(ht=="desc"?-1:1)}}return a.index-c.index}function baseOrderBy(a,c,b){c.length?c=arrayMap$1(c,function(k){return isArray$4(k)?function(et){return baseGet(et,k.length===1?k[0]:k)}:k}):c=[identity];var _=-1;c=arrayMap$1(c,baseUnary(baseIteratee));var $=baseMap(a,function(k,et,nt){var ot=arrayMap$1(c,function(ht){return ht(k)});return{criteria:ot,index:++_,value:k}});return baseSortBy($,function(k,et){return compareMultiple(k,et,b)})}function basePick(a,c){return basePickBy(a,c,function(b,_){return hasIn(a,_)})}var pick=flatRest(function(a,c){return a==null?{}:basePick(a,c)});const pick$1=pick;function baseIndexOfWith(a,c,b,_){for(var $=b-1,k=a.length;++$<k;)if(_(a[$],c))return $;return-1}var arrayProto=Array.prototype,splice=arrayProto.splice;function basePullAll(a,c,b,_){var $=_?baseIndexOfWith:baseIndexOf$1,k=-1,et=c.length,nt=a;for(a===c&&(c=copyArray(c)),b&&(nt=arrayMap$1(a,baseUnary(b)));++k<et;)for(var ot=0,ht=c[k],vt=b?b(ht):ht;(ot=$(nt,vt,ot,_))>-1;)nt!==a&&splice.call(nt,ot,1),splice.call(a,ot,1);return a}function pullAll(a,c){return a&&a.length&&c&&c.length?basePullAll(a,c):a}var pull$1=baseRest(pullAll),sortBy=baseRest(function(a,c){if(a==null)return[];var b=c.length;return b>1&&isIterateeCall(a,c[0],c[1])?c=[]:b>2&&isIterateeCall(c[0],c[1],c[2])&&(c=[c[0]]),baseOrderBy(a,baseFlatten(c,1),[])});const sortBy$1=sortBy,convert=function(a){if(a==null)return ok$1;if(typeof a=="function")return castFactory(a);if(typeof a=="object")return Array.isArray(a)?anyFactory(a):propsFactory(a);if(typeof a=="string")return typeFactory(a);throw new Error("Expected function, string, or object as test")};function anyFactory(a){const c=[];let b=-1;for(;++b<a.length;)c[b]=convert(a[b]);return castFactory(_);function _(...$){let k=-1;for(;++k<c.length;)if(c[k].apply(this,$))return!0;return!1}}function propsFactory(a){const c=a;return castFactory(b);function b(_){const $=_;let k;for(k in a)if($[k]!==c[k])return!1;return!0}}function typeFactory(a){return castFactory(c);function c(b){return b&&b.type===a}}function castFactory(a){return c;function c(b,_,$){return!!(looksLikeANode(b)&&a.call(this,b,typeof _=="number"?_:void 0,$||void 0))}}function ok$1(){return!0}function looksLikeANode(a){return a!==null&&typeof a=="object"&&"type"in a}function color$1(a){return a}const empty$1=[],CONTINUE=!0,EXIT=!1,SKIP="skip";function visitParents(a,c,b,_){let $;typeof c=="function"&&typeof b!="function"?(_=b,b=c):$=c;const k=convert($),et=_?-1:1;nt(a,void 0,[])();function nt(ot,ht,vt){const _t=ot&&typeof ot=="object"?ot:{};if(typeof _t.type=="string"){const $t=typeof _t.tagName=="string"?_t.tagName:typeof _t.name=="string"?_t.name:void 0;Object.defineProperty(kt,"name",{value:"node ("+(ot.type+($t?"<"+$t+">":""))+")"})}return kt;function kt(){let $t=empty$1,Tt,At,Mt;if((!c||k(ot,ht,vt[vt.length-1]||void 0))&&($t=toResult(b(ot,vt)),$t[0]===EXIT))return $t;if("children"in ot&&ot.children){const Dt=ot;if(Dt.children&&$t[0]!==SKIP)for(At=(_?Dt.children.length:-1)+et,Mt=vt.concat(Dt);At>-1&&At<Dt.children.length;){const Rt=Dt.children[At];if(Tt=nt(Rt,At,Mt)(),Tt[0]===EXIT)return Tt;At=typeof Tt[1]=="number"?Tt[1]:At+et}}return $t}}}function toResult(a){return Array.isArray(a)?a:typeof a=="number"?[CONTINUE,a]:a==null?empty$1:[a]}function visit(a,c,b,_){let $,k,et;typeof c=="function"&&typeof b!="function"?(k=void 0,et=c,$=b):(k=c,et=b,$=_),visitParents(a,k,nt,$);function nt(ot,ht){const vt=ht[ht.length-1],_t=vt?vt.children.indexOf(ot):void 0;return et(ot,_t,vt)}}const generateId=()=>(Math.random()*1e20).toString(36),insertAt$1=(a=0,c,b,_=!1)=>[...b.slice(0,a),...[c].flat(),...b.slice(_?a+1:a)],replaceItem$1=(a,c,b)=>{a=typeof a=="function"?a:$=>$===a;const _=b.findIndex(a);return _<0?b:insertAt$1(_,c,b,!0)},swapIndex=(a,c,b)=>{if(!b[a]||!b[c])return b;b=[...b];const _=b[a];return b[a]=b[c],b[c]=_,b},swapItems=(a,c,b)=>{const _=b.findIndex(k=>k===a),$=b.findIndex(k=>k===c);return _<0||$<0?b:swapIndex(_,$,b)},toDataNode$1=a=>a?{id:a.id,props:a.props,childIds:(a.children||[]).map(c=>c.id)}:null,toSceneNode=a=>({id:a.id,props:a.props,children:[]}),toSceneTree=(a,c)=>{const b=a.find($=>$.id===c);if(!b)return null;const _=b.childIds;return{id:b.id,props:b.props,children:_.map($=>toSceneTree(a,$)).filter(Boolean)}},forEachDown$1=(a,c)=>{c(a),(a.children||[]).forEach(_=>forEachDown$1(_,($,k)=>{c($,k||a)}))},mapDown=(a,c)=>{const b=c(a);return{...b,children:((b==null?void 0:b.children)||(a==null?void 0:a.children)||[]).map(_=>mapDown(_,c))}},mapDownAsync=async(a,c)=>{const b=(a==null?void 0:a.children)??[];return{...await c(a),children:await Promise.all(b.map(_=>mapDownAsync(_,c)))}},getElementAttributes=a=>Object.values(a.attributes).reduce((c,b)=>({...c,[b.name]:b.value}),{}),asArray=a=>isArray$4(a)?a:[a],sizeToNum=(a,c)=>typeof a=="number"?a:typeof a=="string"?a.indexOf("%")>-1?parseFloat(a)/100*c:parseFloat(a):0,asSize=a=>typeof a=="number"?a+"px":typeof a=="string"?a.indexOf("%")>-1?parseFloat(a)+"%":a:"0px",asDuration=a=>typeof a=="string"?a:typeof a=="number"?a+"ms":"0ms",find$1=(a,c)=>{if(!a)throw new Error("requires a tree to search");if(!c)throw new Error("requires a condition");const b=iteratee(c);let _;return visit(a,function($){if(b($))return _=$,!1}),_},findAll=(a,c)=>{if(!a)throw new Error("requires a tree to search");if(!c)throw new Error("requires a condition");const b=iteratee(c);let _=[];return visit(a,function($){b($)&&_.push($)}),_},lookupDevice=(a,c)=>{const b=a.find($=>$.label===c&&$.kind==="videoinput"),_=a.find($=>$.label===`Monitor of ${c}`&&$.kind==="audioinput");if(b&&_)return{videoDevice:b,audioDevice:_};if(b){if(b.label==="Logitech BRIO (046d:085e)"){const $=a.find(k=>k.kind==="audioinput"&&k.label==="Loopback Audio 2 (Virtual)");return{videoDevice:b,audioDevice:$}}if(b.label==="OBS Virtual Camera (m-de:vice)"){const $=a.find(k=>k.kind==="audioinput"&&k.label==="Loopback Audio (Virtual)");return{videoDevice:b,audioDevice:$}}return{videoDevice:b,audioDevice:null}}return null},connectDevice=async a=>{const c=await navigator.mediaDevices.enumerateDevices(),b=lookupDevice(c,a);if(b){const _={video:{width:999999,height:999999,deviceId:{exact:b.videoDevice.deviceId}}};b.audioDevice&&(_.audio={autoGainControl:!1,channelCount:2,echoCancellation:!1,latency:0,noiseSuppression:!1,sampleRate:128e3,sampleSize:16,deviceId:{exact:b.audioDevice.deviceId}});const $=await navigator.mediaDevices.getUserMedia(_);if($)return $;console.warn(`No stream found for source ${a}.`)}else console.warn(`No device found for source ${a}.`)},values$1=a=>Array.from(a.values()),Logic=Object.freeze(Object.defineProperty({__proto__:null,asArray,asDuration,asSize,camelCase:camelCase$3,cloneDeep:cloneDeep$1,connectDevice,debounce,deepEqual,every,find:find$1,findAll,forEachDown:forEachDown$1,generateId,getElementAttributes,insertAt:insertAt$1,isArray:isArray$4,isEqual,kebabCase:kebabCase$1,lookupDevice,mapDown,mapDownAsync,omit,pick:pick$1,pull:pull$1,replaceItem:replaceItem$1,sizeToNum,sortBy:sortBy$1,swapIndex,swapItems,toDataNode:toDataNode$1,toSceneNode,toSceneTree,values:values$1},Symbol.toStringTag,{value:"Module"}));function getDefaultExportFromCjs$1(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}var browser$d={exports:{}},process=browser$d.exports={},cachedSetTimeout,cachedClearTimeout;function defaultSetTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?cachedSetTimeout=setTimeout:cachedSetTimeout=defaultSetTimout}catch{cachedSetTimeout=defaultSetTimout}try{typeof clearTimeout=="function"?cachedClearTimeout=clearTimeout:cachedClearTimeout=defaultClearTimeout}catch{cachedClearTimeout=defaultClearTimeout}})();function runTimeout(a){if(cachedSetTimeout===setTimeout)return setTimeout(a,0);if((cachedSetTimeout===defaultSetTimout||!cachedSetTimeout)&&setTimeout)return cachedSetTimeout=setTimeout,setTimeout(a,0);try{return cachedSetTimeout(a,0)}catch{try{return cachedSetTimeout.call(null,a,0)}catch{return cachedSetTimeout.call(this,a,0)}}}function runClearTimeout(a){if(cachedClearTimeout===clearTimeout)return clearTimeout(a);if((cachedClearTimeout===defaultClearTimeout||!cachedClearTimeout)&&clearTimeout)return cachedClearTimeout=clearTimeout,clearTimeout(a);try{return cachedClearTimeout(a)}catch{try{return cachedClearTimeout.call(null,a)}catch{return cachedClearTimeout.call(this,a)}}}var queue=[],draining=!1,currentQueue,queueIndex=-1;function cleanUpNextTick(){!draining||!currentQueue||(draining=!1,currentQueue.length?queue=currentQueue.concat(queue):queueIndex=-1,queue.length&&drainQueue())}function drainQueue(){if(!draining){var a=runTimeout(cleanUpNextTick);draining=!0;for(var c=queue.length;c;){for(currentQueue=queue,queue=[];++queueIndex<c;)currentQueue&&currentQueue[queueIndex].run();queueIndex=-1,c=queue.length}currentQueue=null,draining=!1,runClearTimeout(a)}}process.nextTick=function(a){var c=new Array(arguments.length-1);if(arguments.length>1)for(var b=1;b<arguments.length;b++)c[b-1]=arguments[b];queue.push(new Item(a,c)),queue.length===1&&!draining&&runTimeout(drainQueue)};function Item(a,c){this.fun=a,this.array=c}Item.prototype.run=function(){this.fun.apply(null,this.array)};process.title="browser";process.browser=!0;process.env={};process.argv=[];process.version="";process.versions={};function noop$5(){}process.on=noop$5;process.addListener=noop$5;process.once=noop$5;process.off=noop$5;process.removeListener=noop$5;process.removeAllListeners=noop$5;process.emit=noop$5;process.prependListener=noop$5;process.prependOnceListener=noop$5;process.listeners=function(a){return[]};process.binding=function(a){throw new Error("process.binding is not supported")};process.cwd=function(){return"/"};process.chdir=function(a){throw new Error("process.chdir is not supported")};process.umask=function(){return 0};var browserExports$1=browser$d.exports;const process$1=getDefaultExportFromCjs$1(browserExports$1);var define_process_env_default$1={};function _mergeNamespaces(a,c){return c.forEach(function(b){b&&typeof b!="string"&&!Array.isArray(b)&&Object.keys(b).forEach(function(_){if(_!=="default"&&!(_ in a)){var $=Object.getOwnPropertyDescriptor(b,_);Object.defineProperty(a,_,$.get?$:{enumerable:!0,get:function(){return b[_]}})}})}),Object.freeze(a)}function assert$k(a,c){if(!a)throw new Error(c)}const FLOAT32_MAX=34028234663852886e22,FLOAT32_MIN=-34028234663852886e22,UINT32_MAX=4294967295,INT32_MAX=2147483647,INT32_MIN=-2147483648;function assertInt32(a){if(typeof a!="number")throw new Error("invalid int 32: "+typeof a);if(!Number.isInteger(a)||a>INT32_MAX||a<INT32_MIN)throw new Error("invalid int 32: "+a)}function assertUInt32(a){if(typeof a!="number")throw new Error("invalid uint 32: "+typeof a);if(!Number.isInteger(a)||a>UINT32_MAX||a<0)throw new Error("invalid uint 32: "+a)}function assertFloat32(a){if(typeof a!="number")throw new Error("invalid float 32: "+typeof a);if(Number.isFinite(a)&&(a>FLOAT32_MAX||a<FLOAT32_MIN))throw new Error("invalid float 32: "+a)}const enumTypeSymbol=Symbol("@bufbuild/protobuf/enum-type");function getEnumType(a){const c=a[enumTypeSymbol];return assert$k(c,"missing enum type on enum object"),c}function setEnumType(a,c,b,_){a[enumTypeSymbol]=makeEnumType(c,b.map($=>({no:$.no,name:$.name,localName:a[$.no]})))}function makeEnumType(a,c,b){const _=Object.create(null),$=Object.create(null),k=[];for(const et of c){const nt=normalizeEnumValue(et);k.push(nt),_[et.name]=nt,$[et.no]=nt}return{typeName:a,values:k,findName(et){return _[et]},findNumber(et){return $[et]}}}function makeEnum(a,c,b){const _={};for(const $ of c){const k=normalizeEnumValue($);_[k.localName]=k.no,_[k.no]=k.localName}return setEnumType(_,a,c),_}function normalizeEnumValue(a){return"localName"in a?a:Object.assign(Object.assign({},a),{localName:a.name})}class Message{equals(c){return this.getType().runtime.util.equals(this.getType(),this,c)}clone(){return this.getType().runtime.util.clone(this)}fromBinary(c,b){const _=this.getType(),$=_.runtime.bin,k=$.makeReadOptions(b);return $.readMessage(this,k.readerFactory(c),c.byteLength,k),this}fromJson(c,b){const _=this.getType(),$=_.runtime.json,k=$.makeReadOptions(b);return $.readMessage(_,c,k,this),this}fromJsonString(c,b){let _;try{_=JSON.parse(c)}catch($){throw new Error("cannot decode ".concat(this.getType().typeName," from JSON: ").concat($ instanceof Error?$.message:String($)))}return this.fromJson(_,b)}toBinary(c){const b=this.getType(),_=b.runtime.bin,$=_.makeWriteOptions(c),k=$.writerFactory();return _.writeMessage(this,k,$),k.finish()}toJson(c){const b=this.getType(),_=b.runtime.json,$=_.makeWriteOptions(c);return _.writeMessage(this,$)}toJsonString(c){var b;const _=this.toJson(c);return JSON.stringify(_,null,(b=c==null?void 0:c.prettySpaces)!==null&&b!==void 0?b:0)}toJSON(){return this.toJson({emitDefaultValues:!0})}getType(){return Object.getPrototypeOf(this).constructor}}function makeMessageType(a,c,b,_){var $;const k=($=_==null?void 0:_.localName)!==null&&$!==void 0?$:c.substring(c.lastIndexOf(".")+1),et={[k]:function(nt){a.util.initFields(this),a.util.initPartial(nt,this)}}[k];return Object.setPrototypeOf(et.prototype,new Message),Object.assign(et,{runtime:a,typeName:c,fields:a.util.newFieldList(b),fromBinary(nt,ot){return new et().fromBinary(nt,ot)},fromJson(nt,ot){return new et().fromJson(nt,ot)},fromJsonString(nt,ot){return new et().fromJsonString(nt,ot)},equals(nt,ot){return a.util.equals(et,nt,ot)}}),et}var ScalarType;(function(a){a[a.DOUBLE=1]="DOUBLE",a[a.FLOAT=2]="FLOAT",a[a.INT64=3]="INT64",a[a.UINT64=4]="UINT64",a[a.INT32=5]="INT32",a[a.FIXED64=6]="FIXED64",a[a.FIXED32=7]="FIXED32",a[a.BOOL=8]="BOOL",a[a.STRING=9]="STRING",a[a.BYTES=12]="BYTES",a[a.UINT32=13]="UINT32",a[a.SFIXED32=15]="SFIXED32",a[a.SFIXED64=16]="SFIXED64",a[a.SINT32=17]="SINT32",a[a.SINT64=18]="SINT64"})(ScalarType||(ScalarType={}));var LongType;(function(a){a[a.BIGINT=0]="BIGINT",a[a.STRING=1]="STRING"})(LongType||(LongType={}));function varint64read(){let a=0,c=0;for(let _=0;_<28;_+=7){let $=this.buf[this.pos++];if(a|=($&127)<<_,!($&128))return this.assertBounds(),[a,c]}let b=this.buf[this.pos++];if(a|=(b&15)<<28,c=(b&112)>>4,!(b&128))return this.assertBounds(),[a,c];for(let _=3;_<=31;_+=7){let $=this.buf[this.pos++];if(c|=($&127)<<_,!($&128))return this.assertBounds(),[a,c]}throw new Error("invalid varint")}function varint64write(a,c,b){for(let k=0;k<28;k=k+7){const et=a>>>k,nt=!(!(et>>>7)&&c==0),ot=(nt?et|128:et)&255;if(b.push(ot),!nt)return}const _=a>>>28&15|(c&7)<<4,$=!!(c>>3);if(b.push(($?_|128:_)&255),!!$){for(let k=3;k<31;k=k+7){const et=c>>>k,nt=!!(et>>>7),ot=(nt?et|128:et)&255;if(b.push(ot),!nt)return}b.push(c>>>31&1)}}const TWO_PWR_32_DBL=4294967296;function int64FromString(a){const c=a[0]==="-";c&&(a=a.slice(1));const b=1e6;let _=0,$=0;function k(et,nt){const ot=Number(a.slice(et,nt));$*=b,_=_*b+ot,_>=TWO_PWR_32_DBL&&($=$+(_/TWO_PWR_32_DBL|0),_=_%TWO_PWR_32_DBL)}return k(-24,-18),k(-18,-12),k(-12,-6),k(-6),c?negate(_,$):newBits(_,$)}function int64ToString(a,c){let b=newBits(a,c);const _=b.hi&2147483648;_&&(b=negate(b.lo,b.hi));const $=uInt64ToString(b.lo,b.hi);return _?"-"+$:$}function uInt64ToString(a,c){if({lo:a,hi:c}=toUnsigned(a,c),c<=2097151)return String(TWO_PWR_32_DBL*c+a);const b=a&16777215,_=(a>>>24|c<<8)&16777215,$=c>>16&65535;let k=b+_*6777216+$*6710656,et=_+$*8147497,nt=$*2;const ot=1e7;return k>=ot&&(et+=Math.floor(k/ot),k%=ot),et>=ot&&(nt+=Math.floor(et/ot),et%=ot),nt.toString()+decimalFrom1e7WithLeadingZeros(et)+decimalFrom1e7WithLeadingZeros(k)}function toUnsigned(a,c){return{lo:a>>>0,hi:c>>>0}}function newBits(a,c){return{lo:a|0,hi:c|0}}function negate(a,c){return c=~c,a?a=~a+1:c+=1,newBits(a,c)}const decimalFrom1e7WithLeadingZeros=a=>{const c=String(a);return"0000000".slice(c.length)+c};function varint32write(a,c){if(a>=0){for(;a>127;)c.push(a&127|128),a=a>>>7;c.push(a)}else{for(let b=0;b<9;b++)c.push(a&127|128),a=a>>7;c.push(1)}}function varint32read(){let a=this.buf[this.pos++],c=a&127;if(!(a&128))return this.assertBounds(),c;if(a=this.buf[this.pos++],c|=(a&127)<<7,!(a&128))return this.assertBounds(),c;if(a=this.buf[this.pos++],c|=(a&127)<<14,!(a&128))return this.assertBounds(),c;if(a=this.buf[this.pos++],c|=(a&127)<<21,!(a&128))return this.assertBounds(),c;a=this.buf[this.pos++],c|=(a&15)<<28;for(let b=5;a&128&&b<10;b++)a=this.buf[this.pos++];if(a&128)throw new Error("invalid varint");return this.assertBounds(),c>>>0}function makeInt64Support(){const a=new DataView(new ArrayBuffer(8));if(typeof BigInt=="function"&&typeof a.getBigInt64=="function"&&typeof a.getBigUint64=="function"&&typeof a.setBigInt64=="function"&&typeof a.setBigUint64=="function"&&(typeof process$1!="object"||typeof define_process_env_default$1!="object"||define_process_env_default$1.BUF_BIGINT_DISABLE!=="1")){const $=BigInt("-9223372036854775808"),k=BigInt("9223372036854775807"),et=BigInt("0"),nt=BigInt("18446744073709551615");return{zero:BigInt(0),supported:!0,parse(ot){const ht=typeof ot=="bigint"?ot:BigInt(ot);if(ht>k||ht<$)throw new Error("int64 invalid: ".concat(ot));return ht},uParse(ot){const ht=typeof ot=="bigint"?ot:BigInt(ot);if(ht>nt||ht<et)throw new Error("uint64 invalid: ".concat(ot));return ht},enc(ot){return a.setBigInt64(0,this.parse(ot),!0),{lo:a.getInt32(0,!0),hi:a.getInt32(4,!0)}},uEnc(ot){return a.setBigInt64(0,this.uParse(ot),!0),{lo:a.getInt32(0,!0),hi:a.getInt32(4,!0)}},dec(ot,ht){return a.setInt32(0,ot,!0),a.setInt32(4,ht,!0),a.getBigInt64(0,!0)},uDec(ot,ht){return a.setInt32(0,ot,!0),a.setInt32(4,ht,!0),a.getBigUint64(0,!0)}}}const b=$=>assert$k(/^-?[0-9]+$/.test($),"int64 invalid: ".concat($)),_=$=>assert$k(/^[0-9]+$/.test($),"uint64 invalid: ".concat($));return{zero:"0",supported:!1,parse($){return typeof $!="string"&&($=$.toString()),b($),$},uParse($){return typeof $!="string"&&($=$.toString()),_($),$},enc($){return typeof $!="string"&&($=$.toString()),b($),int64FromString($)},uEnc($){return typeof $!="string"&&($=$.toString()),_($),int64FromString($)},dec($,k){return int64ToString($,k)},uDec($,k){return uInt64ToString($,k)}}}const protoInt64=makeInt64Support();var WireType;(function(a){a[a.Varint=0]="Varint",a[a.Bit64=1]="Bit64",a[a.LengthDelimited=2]="LengthDelimited",a[a.StartGroup=3]="StartGroup",a[a.EndGroup=4]="EndGroup",a[a.Bit32=5]="Bit32"})(WireType||(WireType={}));class BinaryWriter{constructor(c){this.stack=[],this.textEncoder=c??new TextEncoder,this.chunks=[],this.buf=[]}finish(){this.chunks.push(new Uint8Array(this.buf));let c=0;for(let $=0;$<this.chunks.length;$++)c+=this.chunks[$].length;let b=new Uint8Array(c),_=0;for(let $=0;$<this.chunks.length;$++)b.set(this.chunks[$],_),_+=this.chunks[$].length;return this.chunks=[],b}fork(){return this.stack.push({chunks:this.chunks,buf:this.buf}),this.chunks=[],this.buf=[],this}join(){let c=this.finish(),b=this.stack.pop();if(!b)throw new Error("invalid state, fork stack empty");return this.chunks=b.chunks,this.buf=b.buf,this.uint32(c.byteLength),this.raw(c)}tag(c,b){return this.uint32((c<<3|b)>>>0)}raw(c){return this.buf.length&&(this.chunks.push(new Uint8Array(this.buf)),this.buf=[]),this.chunks.push(c),this}uint32(c){for(assertUInt32(c);c>127;)this.buf.push(c&127|128),c=c>>>7;return this.buf.push(c),this}int32(c){return assertInt32(c),varint32write(c,this.buf),this}bool(c){return this.buf.push(c?1:0),this}bytes(c){return this.uint32(c.byteLength),this.raw(c)}string(c){let b=this.textEncoder.encode(c);return this.uint32(b.byteLength),this.raw(b)}float(c){assertFloat32(c);let b=new Uint8Array(4);return new DataView(b.buffer).setFloat32(0,c,!0),this.raw(b)}double(c){let b=new Uint8Array(8);return new DataView(b.buffer).setFloat64(0,c,!0),this.raw(b)}fixed32(c){assertUInt32(c);let b=new Uint8Array(4);return new DataView(b.buffer).setUint32(0,c,!0),this.raw(b)}sfixed32(c){assertInt32(c);let b=new Uint8Array(4);return new DataView(b.buffer).setInt32(0,c,!0),this.raw(b)}sint32(c){return assertInt32(c),c=(c<<1^c>>31)>>>0,varint32write(c,this.buf),this}sfixed64(c){let b=new Uint8Array(8),_=new DataView(b.buffer),$=protoInt64.enc(c);return _.setInt32(0,$.lo,!0),_.setInt32(4,$.hi,!0),this.raw(b)}fixed64(c){let b=new Uint8Array(8),_=new DataView(b.buffer),$=protoInt64.uEnc(c);return _.setInt32(0,$.lo,!0),_.setInt32(4,$.hi,!0),this.raw(b)}int64(c){let b=protoInt64.enc(c);return varint64write(b.lo,b.hi,this.buf),this}sint64(c){let b=protoInt64.enc(c),_=b.hi>>31,$=b.lo<<1^_,k=(b.hi<<1|b.lo>>>31)^_;return varint64write($,k,this.buf),this}uint64(c){let b=protoInt64.uEnc(c);return varint64write(b.lo,b.hi,this.buf),this}}class BinaryReader{constructor(c,b){this.varint64=varint64read,this.uint32=varint32read,this.buf=c,this.len=c.length,this.pos=0,this.view=new DataView(c.buffer,c.byteOffset,c.byteLength),this.textDecoder=b??new TextDecoder}tag(){let c=this.uint32(),b=c>>>3,_=c&7;if(b<=0||_<0||_>5)throw new Error("illegal tag: field no "+b+" wire type "+_);return[b,_]}skip(c){let b=this.pos;switch(c){case WireType.Varint:for(;this.buf[this.pos++]&128;);break;case WireType.Bit64:this.pos+=4;case WireType.Bit32:this.pos+=4;break;case WireType.LengthDelimited:let _=this.uint32();this.pos+=_;break;case WireType.StartGroup:let $;for(;($=this.tag()[1])!==WireType.EndGroup;)this.skip($);break;default:throw new Error("cant skip wire type "+c)}return this.assertBounds(),this.buf.subarray(b,this.pos)}assertBounds(){if(this.pos>this.len)throw new RangeError("premature EOF")}int32(){return this.uint32()|0}sint32(){let c=this.uint32();return c>>>1^-(c&1)}int64(){return protoInt64.dec(...this.varint64())}uint64(){return protoInt64.uDec(...this.varint64())}sint64(){let[c,b]=this.varint64(),_=-(c&1);return c=(c>>>1|(b&1)<<31)^_,b=b>>>1^_,protoInt64.dec(c,b)}bool(){let[c,b]=this.varint64();return c!==0||b!==0}fixed32(){return this.view.getUint32((this.pos+=4)-4,!0)}sfixed32(){return this.view.getInt32((this.pos+=4)-4,!0)}fixed64(){return protoInt64.uDec(this.sfixed32(),this.sfixed32())}sfixed64(){return protoInt64.dec(this.sfixed32(),this.sfixed32())}float(){return this.view.getFloat32((this.pos+=4)-4,!0)}double(){return this.view.getFloat64((this.pos+=8)-8,!0)}bytes(){let c=this.uint32(),b=this.pos;return this.pos+=c,this.assertBounds(),this.buf.subarray(b,b+c)}string(){return this.textDecoder.decode(this.bytes())}}function scalarEquals(a,c,b){if(c===b)return!0;if(a==ScalarType.BYTES){if(!(c instanceof Uint8Array)||!(b instanceof Uint8Array)||c.length!==b.length)return!1;for(let _=0;_<c.length;_++)if(c[_]!==b[_])return!1;return!0}switch(a){case ScalarType.UINT64:case ScalarType.FIXED64:case ScalarType.INT64:case ScalarType.SFIXED64:case ScalarType.SINT64:return c==b}return!1}function scalarDefaultValue(a,c){switch(a){case ScalarType.BOOL:return!1;case ScalarType.UINT64:case ScalarType.FIXED64:case ScalarType.INT64:case ScalarType.SFIXED64:case ScalarType.SINT64:return c==0?protoInt64.zero:"0";case ScalarType.DOUBLE:case ScalarType.FLOAT:return 0;case ScalarType.BYTES:return new Uint8Array(0);case ScalarType.STRING:return"";default:return 0}}function scalarTypeInfo(a,c){const b=c===void 0;let _=WireType.Varint,$=c===0;switch(a){case ScalarType.STRING:$=b||!c.length,_=WireType.LengthDelimited;break;case ScalarType.BOOL:$=c===!1;break;case ScalarType.DOUBLE:_=WireType.Bit64;break;case ScalarType.FLOAT:_=WireType.Bit32;break;case ScalarType.INT64:$=b||c==0;break;case ScalarType.UINT64:$=b||c==0;break;case ScalarType.FIXED64:$=b||c==0,_=WireType.Bit64;break;case ScalarType.BYTES:$=b||!c.byteLength,_=WireType.LengthDelimited;break;case ScalarType.FIXED32:_=WireType.Bit32;break;case ScalarType.SFIXED32:_=WireType.Bit32;break;case ScalarType.SFIXED64:$=b||c==0,_=WireType.Bit64;break;case ScalarType.SINT64:$=b||c==0;break}const k=ScalarType[a].toLowerCase();return[_,k,b||$]}function makeExtension(a,c,b,_){let $;return{typeName:c,extendee:b,get field(){if(!$){const k=typeof _=="function"?_():_;k.name=c.split(".").pop(),k.jsonName="[".concat(c,"]"),$=a.util.newFieldList([k]).list()[0]}return $},runtime:a}}function createExtensionContainer(a){const c=a.field.localName,b=Object.create(null);return b[c]=initExtensionField(a),[b,()=>b[c]]}function initExtensionField(a){const c=a.field;if(c.repeated)return[];if(c.default!==void 0)return c.default;switch(c.kind){case"enum":return c.T.values[0].no;case"scalar":return scalarDefaultValue(c.T,c.L);case"message":const b=c.T,_=new b;return b.fieldWrapper?b.fieldWrapper.unwrapField(_):_;case"map":throw"map fields are not allowed to be extensions"}}function filterUnknownFields(a,c){if(!c.repeated&&(c.kind=="enum"||c.kind=="scalar")){for(let b=a.length-1;b>=0;--b)if(a[b].no==c.no)return[a[b]];return[]}return a.filter(b=>b.no===c.no)}function makeProtoRuntime(a,c,b,_){return{syntax:a,json:c,bin:b,util:_,makeMessageType($,k,et){return makeMessageType(this,$,k,et)},makeEnum,makeEnumType,getEnumType,makeExtension($,k,et){return makeExtension(this,$,k,et)}}}function wrapField(a,c){return c instanceof Message||!a.fieldWrapper?c:a.fieldWrapper.wrapField(c)}ScalarType.DOUBLE,ScalarType.FLOAT,ScalarType.INT64,ScalarType.UINT64,ScalarType.INT32,ScalarType.UINT32,ScalarType.BOOL,ScalarType.STRING,ScalarType.BYTES;const unknownFieldsSymbol=Symbol("@bufbuild/protobuf/unknown-fields"),readDefaults={readUnknownFields:!0,readerFactory:a=>new BinaryReader(a)},writeDefaults={writeUnknownFields:!0,writerFactory:()=>new BinaryWriter};function makeReadOptions$1(a){return a?Object.assign(Object.assign({},readDefaults),a):readDefaults}function makeWriteOptions$1(a){return a?Object.assign(Object.assign({},writeDefaults),a):writeDefaults}function makeBinaryFormatCommon(){return{makeReadOptions:makeReadOptions$1,makeWriteOptions:makeWriteOptions$1,listUnknownFields(a){var c;return(c=a[unknownFieldsSymbol])!==null&&c!==void 0?c:[]},discardUnknownFields(a){delete a[unknownFieldsSymbol]},writeUnknownFields(a,c){const _=a[unknownFieldsSymbol];if(_)for(const $ of _)c.tag($.no,$.wireType).raw($.data)},onUnknownField(a,c,b,_){const $=a;Array.isArray($[unknownFieldsSymbol])||($[unknownFieldsSymbol]=[]),$[unknownFieldsSymbol].push({no:c,wireType:b,data:_})},readMessage(a,c,b,_,$){const k=a.getType(),et=$?c.len:c.pos+b;let nt,ot;for(;c.pos<et&&([nt,ot]=c.tag(),ot!=WireType.EndGroup);){const ht=k.fields.find(nt);if(!ht){const vt=c.skip(ot);_.readUnknownFields&&this.onUnknownField(a,nt,ot,vt);continue}readField$1(a,c,ht,ot,_)}if($&&(ot!=WireType.EndGroup||nt!==b))throw new Error("invalid end group tag")},readField:readField$1}}function readField$1(a,c,b,_,$){let{repeated:k,localName:et}=b;switch(b.oneof&&(a=a[b.oneof.localName],a.case!=et&&delete a.value,a.case=et,et="value"),b.kind){case"scalar":case"enum":const nt=b.kind=="enum"?ScalarType.INT32:b.T;let ot=readScalar$1;if(b.kind=="scalar"&&b.L>0&&(ot=readScalarLTString),k){let kt=a[et];if(_==WireType.LengthDelimited&&nt!=ScalarType.STRING&&nt!=ScalarType.BYTES){let Tt=c.uint32()+c.pos;for(;c.pos<Tt;)kt.push(ot(c,nt))}else kt.push(ot(c,nt))}else a[et]=ot(c,nt);break;case"message":const ht=b.T;k?a[et].push(readMessageField(c,new ht,$,b)):a[et]instanceof Message?readMessageField(c,a[et],$,b):(a[et]=readMessageField(c,new ht,$,b),ht.fieldWrapper&&!b.oneof&&!b.repeated&&(a[et]=ht.fieldWrapper.unwrapField(a[et])));break;case"map":let[vt,_t]=readMapEntry(b,c,$);a[et][vt]=_t;break}}function readMessageField(a,c,b,_){const $=c.getType().runtime.bin,k=_==null?void 0:_.delimited;return $.readMessage(c,a,k?_==null?void 0:_.no:a.uint32(),b,k),c}function readMapEntry(a,c,b){const _=c.uint32(),$=c.pos+_;let k,et;for(;c.pos<$;){let[nt]=c.tag();switch(nt){case 1:k=readScalar$1(c,a.K);break;case 2:switch(a.V.kind){case"scalar":et=readScalar$1(c,a.V.T);break;case"enum":et=c.int32();break;case"message":et=readMessageField(c,new a.V.T,b,void 0);break}break}}if(k===void 0){let nt=scalarDefaultValue(a.K,LongType.BIGINT);k=a.K==ScalarType.BOOL?nt.toString():nt}if(typeof k!="string"&&typeof k!="number"&&(k=k.toString()),et===void 0)switch(a.V.kind){case"scalar":et=scalarDefaultValue(a.V.T,LongType.BIGINT);break;case"enum":et=0;break;case"message":et=new a.V.T;break}return[k,et]}function readScalarLTString(a,c){const b=readScalar$1(a,c);return typeof b=="bigint"?b.toString():b}function readScalar$1(a,c){switch(c){case ScalarType.STRING:return a.string();case ScalarType.BOOL:return a.bool();case ScalarType.DOUBLE:return a.double();case ScalarType.FLOAT:return a.float();case ScalarType.INT32:return a.int32();case ScalarType.INT64:return a.int64();case ScalarType.UINT64:return a.uint64();case ScalarType.FIXED64:return a.fixed64();case ScalarType.BYTES:return a.bytes();case ScalarType.FIXED32:return a.fixed32();case ScalarType.SFIXED32:return a.sfixed32();case ScalarType.SFIXED64:return a.sfixed64();case ScalarType.SINT64:return a.sint64();case ScalarType.UINT32:return a.uint32();case ScalarType.SINT32:return a.sint32()}}function writeMapEntry(a,c,b,_,$){a.tag(b.no,WireType.LengthDelimited),a.fork();let k=_;switch(b.K){case ScalarType.INT32:case ScalarType.FIXED32:case ScalarType.UINT32:case ScalarType.SFIXED32:case ScalarType.SINT32:k=Number.parseInt(_);break;case ScalarType.BOOL:assert$k(_=="true"||_=="false"),k=_=="true";break}switch(writeScalar$1(a,b.K,1,k,!0),b.V.kind){case"scalar":writeScalar$1(a,b.V.T,2,$,!0);break;case"enum":writeScalar$1(a,ScalarType.INT32,2,$,!0);break;case"message":a.tag(2,WireType.LengthDelimited).bytes($.toBinary(c));break}a.join()}function writeMessageField(a,c,b,_){const $=wrapField(b.T,_);b!=null&&b.delimited?a.tag(b.no,WireType.StartGroup).raw($.toBinary(c)).tag(b.no,WireType.EndGroup):a.tag(b.no,WireType.LengthDelimited).bytes($.toBinary(c))}function writeScalar$1(a,c,b,_,$){let[k,et,nt]=scalarTypeInfo(c,_);(!nt||$)&&a.tag(b,k)[et](_)}function writePacked(a,c,b,_){if(!_.length)return;a.tag(b,WireType.LengthDelimited).fork();let[,$]=scalarTypeInfo(c);for(let k=0;k<_.length;k++)a[$](_[k]);a.join()}function makeBinaryFormatProto3(){return Object.assign(Object.assign({},makeBinaryFormatCommon()),{writeField,writeMessage(a,c,b){const _=a.getType();for(const $ of _.fields.byNumber()){let k,et=$.localName;if($.oneof){const nt=a[$.oneof.localName];if(nt.case!==et)continue;k=nt.value}else k=a[et];writeField($,k,c,b)}return b.writeUnknownFields&&this.writeUnknownFields(a,c),c}})}function writeField(a,c,b,_){const $=a.repeated;switch(a.kind){case"scalar":case"enum":let k=a.kind=="enum"?ScalarType.INT32:a.T;if($)if(a.packed)writePacked(b,k,a.no,c);else for(const et of c)writeScalar$1(b,k,a.no,et,!0);else c!==void 0&&writeScalar$1(b,k,a.no,c,!!a.oneof||a.opt);break;case"message":if($)for(const et of c)writeMessageField(b,_,a,et);else c!==void 0&&writeMessageField(b,_,a,c);break;case"map":for(const[et,nt]of Object.entries(c))writeMapEntry(b,_,a,et,nt);break}}let encTable="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),decTable=[];for(let a=0;a<encTable.length;a++)decTable[encTable[a].charCodeAt(0)]=a;decTable[45]=encTable.indexOf("+");decTable[95]=encTable.indexOf("/");const protoBase64={dec(a){let c=a.length*3/4;a[a.length-2]=="="?c-=2:a[a.length-1]=="="&&(c-=1);let b=new Uint8Array(c),_=0,$=0,k,et=0;for(let nt=0;nt<a.length;nt++){if(k=decTable[a.charCodeAt(nt)],k===void 0)switch(a[nt]){case"=":$=0;case`
`:case"\r":case"	":case" ":continue;default:throw Error("invalid base64 string.")}switch($){case 0:et=k,$=1;break;case 1:b[_++]=et<<2|(k&48)>>4,et=k,$=2;break;case 2:b[_++]=(et&15)<<4|(k&60)>>2,et=k,$=3;break;case 3:b[_++]=(et&3)<<6|k,$=0;break}}if($==1)throw Error("invalid base64 string.");return b.subarray(0,_)},enc(a){let c="",b=0,_,$=0;for(let k=0;k<a.length;k++)switch(_=a[k],b){case 0:c+=encTable[_>>2],$=(_&3)<<4,b=1;break;case 1:c+=encTable[$|_>>4],$=(_&15)<<2,b=2;break;case 2:c+=encTable[$|_>>6],c+=encTable[_&63],b=0;break}return b&&(c+=encTable[$],c+="=",b==1&&(c+="=")),c}};function getExtension(a,c,b){assertExtendee(c,a);const _=c.runtime.bin.makeReadOptions(b),$=filterUnknownFields(a.getType().runtime.bin.listUnknownFields(a),c.field),[k,et]=createExtensionContainer(c);for(const nt of $)c.runtime.bin.readField(k,_.readerFactory(nt.data),c.field,nt.wireType,_);return et()}function setExtension(a,c,b,_){assertExtendee(c,a);const $=c.runtime.bin.makeReadOptions(_),k=c.runtime.bin.makeWriteOptions(_);if(hasExtension(a,c)){const ht=a.getType().runtime.bin.listUnknownFields(a).filter(vt=>vt.no!=c.field.no);a.getType().runtime.bin.discardUnknownFields(a);for(const vt of ht)a.getType().runtime.bin.onUnknownField(a,vt.no,vt.wireType,vt.data)}const et=k.writerFactory();let nt=c.field;!nt.opt&&!nt.repeated&&(nt.kind=="enum"||nt.kind=="scalar")&&(nt=Object.assign(Object.assign({},c.field),{opt:!0})),c.runtime.bin.writeField(nt,b,et,k);const ot=$.readerFactory(et.finish());for(;ot.pos<ot.len;){const[ht,vt]=ot.tag(),_t=ot.skip(vt);a.getType().runtime.bin.onUnknownField(a,ht,vt,_t)}}function hasExtension(a,c){const b=a.getType();return c.extendee.typeName===b.typeName&&!!b.runtime.bin.listUnknownFields(a).find(_=>_.no==c.field.no)}function assertExtendee(a,c){assert$k(a.extendee.typeName==c.getType().typeName,"extension ".concat(a.typeName," can only be applied to message ").concat(a.extendee.typeName))}const jsonReadDefaults={ignoreUnknownFields:!1},jsonWriteDefaults={emitDefaultValues:!1,enumAsInteger:!1,useProtoFieldName:!1,prettySpaces:0};function makeReadOptions(a){return a?Object.assign(Object.assign({},jsonReadDefaults),a):jsonReadDefaults}function makeWriteOptions(a){return a?Object.assign(Object.assign({},jsonWriteDefaults),a):jsonWriteDefaults}function makeJsonFormatCommon(a,c){const b=c(writeEnum,writeScalar);return{makeReadOptions,makeWriteOptions,readMessage(_,$,k,et){if($==null||Array.isArray($)||typeof $!="object")throw new Error("cannot decode message ".concat(_.typeName," from JSON: ").concat(debugJsonValue($)));et=et??new _;const nt=new Map,ot=k.typeRegistry;for(const[ht,vt]of Object.entries($)){const _t=_.fields.findJsonName(ht);if(_t){if(_t.oneof){if(vt===null&&_t.kind=="scalar")continue;const kt=nt.get(_t.oneof);if(kt!==void 0)throw new Error("cannot decode message ".concat(_.typeName,' from JSON: multiple keys for oneof "').concat(_t.oneof.name,'" present: "').concat(kt,'", "').concat(ht,'"'));nt.set(_t.oneof,ht)}readField(et,vt,_t,k,_,a)}else{let kt=!1;if(ot!=null&&ot.findExtension&&ht.startsWith("[")&&ht.endsWith("]")){const $t=ot.findExtension(ht.substring(1,ht.length-1));if($t&&$t.extendee.typeName==_.typeName){kt=!0;const[Tt,At]=createExtensionContainer($t);readField(Tt,vt,$t.field,k,$t,!0),setExtension(et,$t,At(),k)}}if(!kt&&!k.ignoreUnknownFields)throw new Error("cannot decode message ".concat(_.typeName,' from JSON: key "').concat(ht,'" is unknown'))}}return et},writeMessage(_,$){const k=_.getType(),et={};let nt;try{for(const ht of k.fields.byMember()){let vt;if(ht.kind=="oneof"){const _t=_[ht.localName];if(_t.value===void 0)continue;if(nt=ht.findField(_t.case),!nt)throw"oneof case not found: "+_t.case;vt=b(nt,_t.value,$)}else nt=ht,vt=b(nt,_[nt.localName],$);vt!==void 0&&(et[$.useProtoFieldName?nt.name:nt.jsonName]=vt)}const ot=$.typeRegistry;if(ot!=null&&ot.findExtensionFor)for(const ht of k.runtime.bin.listUnknownFields(_)){const vt=ot.findExtensionFor(k.typeName,ht.no);if(vt&&hasExtension(_,vt)){const _t=getExtension(_,vt,$),kt=b(vt.field,_t,$);kt!==void 0&&(et[vt.field.jsonName]=kt)}}}catch(ot){const ht=nt?"cannot encode field ".concat(k.typeName,".").concat(nt.name," to JSON"):"cannot encode message ".concat(k.typeName," to JSON"),vt=ot instanceof Error?ot.message:String(ot);throw new Error(ht+(vt.length>0?": ".concat(vt):""))}return et},readScalar:(_,$,k)=>readScalar(_,$,k,a),writeScalar,debug:debugJsonValue}}function debugJsonValue(a){if(a===null)return"null";switch(typeof a){case"object":return Array.isArray(a)?"array":"object";case"string":return a.length>100?"string":'"'.concat(a.split('"').join('\\"'),'"');default:return String(a)}}function readField(a,c,b,_,$,k){let et=b.localName;if(b.oneof){if(c===null&&b.kind=="scalar")return;a=a[b.oneof.localName]={case:et},et="value"}if(b.repeated){if(c===null)return;if(!Array.isArray(c))throw new Error("cannot decode field ".concat($.typeName,".").concat(b.name," from JSON: ").concat(debugJsonValue(c)));const nt=a[et];for(const ot of c){if(ot===null)throw new Error("cannot decode field ".concat($.typeName,".").concat(b.name," from JSON: ").concat(debugJsonValue(ot)));let ht;switch(b.kind){case"message":ht=b.T.fromJson(ot,_);break;case"enum":if(ht=readEnum(b.T,ot,_.ignoreUnknownFields,!0),ht===void 0)continue;break;case"scalar":try{ht=readScalar(b.T,ot,b.L,!0)}catch(vt){let _t="cannot decode field ".concat($.typeName,".").concat(b.name," from JSON: ").concat(debugJsonValue(ot));throw vt instanceof Error&&vt.message.length>0&&(_t+=": ".concat(vt.message)),new Error(_t)}break}nt.push(ht)}}else if(b.kind=="map"){if(c===null)return;if(typeof c!="object"||Array.isArray(c))throw new Error("cannot decode field ".concat($.typeName,".").concat(b.name," from JSON: ").concat(debugJsonValue(c)));const nt=a[et];for(const[ot,ht]of Object.entries(c)){if(ht===null)throw new Error("cannot decode field ".concat($.typeName,".").concat(b.name," from JSON: map value null"));let vt;switch(b.V.kind){case"message":vt=b.V.T.fromJson(ht,_);break;case"enum":if(vt=readEnum(b.V.T,ht,_.ignoreUnknownFields,!0),vt===void 0)continue;break;case"scalar":try{vt=readScalar(b.V.T,ht,LongType.BIGINT,!0)}catch(_t){let kt="cannot decode map value for field ".concat($.typeName,".").concat(b.name," from JSON: ").concat(debugJsonValue(c));throw _t instanceof Error&&_t.message.length>0&&(kt+=": ".concat(_t.message)),new Error(kt)}break}try{nt[readScalar(b.K,b.K==ScalarType.BOOL?ot=="true"?!0:ot=="false"?!1:ot:ot,LongType.BIGINT,!0).toString()]=vt}catch(_t){let kt="cannot decode map key for field ".concat($.typeName,".").concat(b.name," from JSON: ").concat(debugJsonValue(c));throw _t instanceof Error&&_t.message.length>0&&(kt+=": ".concat(_t.message)),new Error(kt)}}}else switch(b.kind){case"message":const nt=b.T;if(c===null&&nt.typeName!="google.protobuf.Value"){if(b.oneof)throw new Error("cannot decode field ".concat($.typeName,".").concat(b.name," from JSON: null is invalid for oneof field"));return}a[et]instanceof Message?a[et].fromJson(c,_):(a[et]=nt.fromJson(c,_),nt.fieldWrapper&&!b.oneof&&(a[et]=nt.fieldWrapper.unwrapField(a[et])));break;case"enum":const ot=readEnum(b.T,c,_.ignoreUnknownFields,k);ot!==void 0&&(a[et]=ot);break;case"scalar":try{a[et]=readScalar(b.T,c,b.L,k)}catch(ht){let vt="cannot decode field ".concat($.typeName,".").concat(b.name," from JSON: ").concat(debugJsonValue(c));throw ht instanceof Error&&ht.message.length>0&&(vt+=": ".concat(ht.message)),new Error(vt)}break}}function readScalar(a,c,b,_){switch(a){case ScalarType.DOUBLE:case ScalarType.FLOAT:if(c===null)return _?0:void 0;if(c==="NaN")return Number.NaN;if(c==="Infinity")return Number.POSITIVE_INFINITY;if(c==="-Infinity")return Number.NEGATIVE_INFINITY;if(c===""||typeof c=="string"&&c.trim().length!==c.length||typeof c!="string"&&typeof c!="number")break;const $=Number(c);if(Number.isNaN($)||!Number.isFinite($))break;return a==ScalarType.FLOAT&&assertFloat32($),$;case ScalarType.INT32:case ScalarType.FIXED32:case ScalarType.SFIXED32:case ScalarType.SINT32:case ScalarType.UINT32:if(c===null)return _?0:void 0;let k;if(typeof c=="number"?k=c:typeof c=="string"&&c.length>0&&c.trim().length===c.length&&(k=Number(c)),k===void 0)break;return a==ScalarType.UINT32?assertUInt32(k):assertInt32(k),k;case ScalarType.INT64:case ScalarType.SFIXED64:case ScalarType.SINT64:if(c===null)return _?protoInt64.zero:void 0;if(typeof c!="number"&&typeof c!="string")break;const et=protoInt64.parse(c);return b?et.toString():et;case ScalarType.FIXED64:case ScalarType.UINT64:if(c===null)return _?protoInt64.zero:void 0;if(typeof c!="number"&&typeof c!="string")break;const nt=protoInt64.uParse(c);return b?nt.toString():nt;case ScalarType.BOOL:if(c===null)return _?!1:void 0;if(typeof c!="boolean")break;return c;case ScalarType.STRING:if(c===null)return _?"":void 0;if(typeof c!="string")break;try{encodeURIComponent(c)}catch{throw new Error("invalid UTF8")}return c;case ScalarType.BYTES:if(c===null)return _?new Uint8Array(0):void 0;if(c==="")return new Uint8Array(0);if(typeof c!="string")break;return protoBase64.dec(c)}throw new Error}function readEnum(a,c,b,_){if(c===null)return _?a.values[0].no:void 0;switch(typeof c){case"number":if(Number.isInteger(c))return c;break;case"string":const $=a.findName(c);if($||b)return $==null?void 0:$.no;break}throw new Error("cannot decode enum ".concat(a.typeName," from JSON: ").concat(debugJsonValue(c)))}function writeEnum(a,c,b,_){var $;if(c===void 0)return c;if(!b&&a.values[0].no===c)return;if(_)return c;if(a.typeName=="google.protobuf.NullValue")return null;const k=a.findNumber(c);return($=k==null?void 0:k.name)!==null&&$!==void 0?$:c}function writeScalar(a,c,b){if(c!==void 0)switch(a){case ScalarType.INT32:case ScalarType.SFIXED32:case ScalarType.SINT32:case ScalarType.FIXED32:case ScalarType.UINT32:return assert$k(typeof c=="number"),c!=0||b?c:void 0;case ScalarType.FLOAT:case ScalarType.DOUBLE:return assert$k(typeof c=="number"),Number.isNaN(c)?"NaN":c===Number.POSITIVE_INFINITY?"Infinity":c===Number.NEGATIVE_INFINITY?"-Infinity":c!==0||b?c:void 0;case ScalarType.STRING:return assert$k(typeof c=="string"),c.length>0||b?c:void 0;case ScalarType.BOOL:return assert$k(typeof c=="boolean"),c||b?c:void 0;case ScalarType.UINT64:case ScalarType.FIXED64:case ScalarType.INT64:case ScalarType.SFIXED64:case ScalarType.SINT64:return assert$k(typeof c=="bigint"||typeof c=="string"||typeof c=="number"),b||c!=0?c.toString(10):void 0;case ScalarType.BYTES:return assert$k(c instanceof Uint8Array),b||c.byteLength>0?protoBase64.enc(c):void 0}}function makeJsonFormatProto3(){return makeJsonFormatCommon(!0,(a,c)=>function(_,$,k){if(_.kind=="map"){const et={};switch(_.V.kind){case"scalar":for(const[ot,ht]of Object.entries($)){const vt=c(_.V.T,ht,!0);assert$k(vt!==void 0),et[ot.toString()]=vt}break;case"message":for(const[ot,ht]of Object.entries($))et[ot.toString()]=ht.toJson(k);break;case"enum":const nt=_.V.T;for(const[ot,ht]of Object.entries($)){assert$k(ht===void 0||typeof ht=="number");const vt=a(nt,ht,!0,k.enumAsInteger);assert$k(vt!==void 0),et[ot.toString()]=vt}break}return k.emitDefaultValues||Object.keys(et).length>0?et:void 0}else if(_.repeated){const et=[];switch(_.kind){case"scalar":for(let nt=0;nt<$.length;nt++)et.push(c(_.T,$[nt],!0));break;case"enum":for(let nt=0;nt<$.length;nt++)et.push(a(_.T,$[nt],!0,k.enumAsInteger));break;case"message":for(let nt=0;nt<$.length;nt++)et.push($[nt].toJson(k));break}return k.emitDefaultValues||et.length>0?et:void 0}else{if($===void 0)return;switch(_.kind){case"scalar":return c(_.T,$,!!_.oneof||_.opt||k.emitDefaultValues);case"enum":return a(_.T,$,!!_.oneof||_.opt||k.emitDefaultValues,k.enumAsInteger);case"message":return wrapField(_.T,$).toJson(k)}}})}function makeUtilCommon(){return{setEnumType,initPartial(a,c){if(a===void 0)return;const b=c.getType();for(const _ of b.fields.byMember()){const $=_.localName,k=c,et=a;if(et[$]!==void 0)switch(_.kind){case"oneof":const nt=et[$].case;if(nt===void 0)continue;const ot=_.findField(nt);let ht=et[$].value;ot&&ot.kind=="message"&&!(ht instanceof ot.T)?ht=new ot.T(ht):ot&&ot.kind==="scalar"&&ot.T===ScalarType.BYTES&&(ht=toU8Arr(ht)),k[$]={case:nt,value:ht};break;case"scalar":case"enum":let vt=et[$];_.T===ScalarType.BYTES&&(vt=_.repeated?vt.map(toU8Arr):toU8Arr(vt)),k[$]=vt;break;case"map":switch(_.V.kind){case"scalar":case"enum":if(_.V.T===ScalarType.BYTES)for(const[$t,Tt]of Object.entries(et[$]))k[$][$t]=toU8Arr(Tt);else Object.assign(k[$],et[$]);break;case"message":const kt=_.V.T;for(const $t of Object.keys(et[$])){let Tt=et[$][$t];kt.fieldWrapper||(Tt=new kt(Tt)),k[$][$t]=Tt}break}break;case"message":const _t=_.T;if(_.repeated)k[$]=et[$].map(kt=>kt instanceof _t?kt:new _t(kt));else if(et[$]!==void 0){const kt=et[$];_t.fieldWrapper?_t.typeName==="google.protobuf.BytesValue"?k[$]=toU8Arr(kt):k[$]=kt:k[$]=kt instanceof _t?kt:new _t(kt)}break}}},equals(a,c,b){return c===b?!0:!c||!b?!1:a.fields.byMember().every(_=>{const $=c[_.localName],k=b[_.localName];if(_.repeated){if($.length!==k.length)return!1;switch(_.kind){case"message":return $.every((et,nt)=>_.T.equals(et,k[nt]));case"scalar":return $.every((et,nt)=>scalarEquals(_.T,et,k[nt]));case"enum":return $.every((et,nt)=>scalarEquals(ScalarType.INT32,et,k[nt]))}throw new Error("repeated cannot contain ".concat(_.kind))}switch(_.kind){case"message":return _.T.equals($,k);case"enum":return scalarEquals(ScalarType.INT32,$,k);case"scalar":return scalarEquals(_.T,$,k);case"oneof":if($.case!==k.case)return!1;const et=_.findField($.case);if(et===void 0)return!0;switch(et.kind){case"message":return et.T.equals($.value,k.value);case"enum":return scalarEquals(ScalarType.INT32,$.value,k.value);case"scalar":return scalarEquals(et.T,$.value,k.value)}throw new Error("oneof cannot contain ".concat(et.kind));case"map":const nt=Object.keys($).concat(Object.keys(k));switch(_.V.kind){case"message":const ot=_.V.T;return nt.every(vt=>ot.equals($[vt],k[vt]));case"enum":return nt.every(vt=>scalarEquals(ScalarType.INT32,$[vt],k[vt]));case"scalar":const ht=_.V.T;return nt.every(vt=>scalarEquals(ht,$[vt],k[vt]))}break}})},clone(a){const c=a.getType(),b=new c,_=b;for(const $ of c.fields.byMember()){const k=a[$.localName];let et;if($.repeated)et=k.map(cloneSingularField);else if($.kind=="map"){et=_[$.localName];for(const[nt,ot]of Object.entries(k))et[nt]=cloneSingularField(ot)}else $.kind=="oneof"?et=$.findField(k.case)?{case:k.case,value:cloneSingularField(k.value)}:{case:void 0}:et=cloneSingularField(k);_[$.localName]=et}return b}}}function cloneSingularField(a){if(a===void 0)return a;if(a instanceof Message)return a.clone();if(a instanceof Uint8Array){const c=new Uint8Array(a.byteLength);return c.set(a),c}return a}function toU8Arr(a){return a instanceof Uint8Array?a:new Uint8Array(a)}class InternalFieldList{constructor(c,b){this._fields=c,this._normalizer=b}findJsonName(c){if(!this.jsonNames){const b={};for(const _ of this.list())b[_.jsonName]=b[_.name]=_;this.jsonNames=b}return this.jsonNames[c]}find(c){if(!this.numbers){const b={};for(const _ of this.list())b[_.no]=_;this.numbers=b}return this.numbers[c]}list(){return this.all||(this.all=this._normalizer(this._fields)),this.all}byNumber(){return this.numbersAsc||(this.numbersAsc=this.list().concat().sort((c,b)=>c.no-b.no)),this.numbersAsc}byMember(){if(!this.members){this.members=[];const c=this.members;let b;for(const _ of this.list())_.oneof?_.oneof!==b&&(b=_.oneof,c.push(b)):c.push(_)}return this.members}}function localFieldName(a,c){const b=protoCamelCase(a);return c?b:safeObjectProperty(safeMessageProperty(b))}function localOneofName(a){return localFieldName(a,!1)}const fieldJsonName=protoCamelCase;function protoCamelCase(a){let c=!1;const b=[];for(let _=0;_<a.length;_++){let $=a.charAt(_);switch($){case"_":c=!0;break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":b.push($),c=!1;break;default:c&&(c=!1,$=$.toUpperCase()),b.push($);break}}return b.join("")}const reservedObjectProperties=new Set(["constructor","toString","toJSON","valueOf"]),reservedMessageProperties=new Set(["getType","clone","equals","fromBinary","fromJson","fromJsonString","toBinary","toJson","toJsonString","toObject"]),fallback=a=>"".concat(a,"$"),safeMessageProperty=a=>reservedMessageProperties.has(a)?fallback(a):a,safeObjectProperty=a=>reservedObjectProperties.has(a)?fallback(a):a;class InternalOneofInfo{constructor(c){this.kind="oneof",this.repeated=!1,this.packed=!1,this.opt=!1,this.default=void 0,this.fields=[],this.name=c,this.localName=localOneofName(c)}addField(c){assert$k(c.oneof===this,"field ".concat(c.name," not one of ").concat(this.name)),this.fields.push(c)}findField(c){if(!this._lookup){this._lookup=Object.create(null);for(let b=0;b<this.fields.length;b++)this._lookup[this.fields[b].localName]=this.fields[b]}return this._lookup[c]}}const proto3=makeProtoRuntime("proto3",makeJsonFormatProto3(),makeBinaryFormatProto3(),Object.assign(Object.assign({},makeUtilCommon()),{newFieldList(a){return new InternalFieldList(a,normalizeFieldInfosProto3)},initFields(a){for(const c of a.getType().fields.byMember()){if(c.opt)continue;const b=c.localName,_=a;if(c.repeated){_[b]=[];continue}switch(c.kind){case"oneof":_[b]={case:void 0};break;case"enum":_[b]=0;break;case"map":_[b]={};break;case"scalar":_[b]=scalarDefaultValue(c.T,c.L);break}}}}));function normalizeFieldInfosProto3(a){var c,b,_,$;const k=[];let et;for(const nt of typeof a=="function"?a():a){const ot=nt;if(ot.localName=localFieldName(nt.name,nt.oneof!==void 0),ot.jsonName=(c=nt.jsonName)!==null&&c!==void 0?c:fieldJsonName(nt.name),ot.repeated=(b=nt.repeated)!==null&&b!==void 0?b:!1,nt.kind=="scalar"&&(ot.L=(_=nt.L)!==null&&_!==void 0?_:LongType.BIGINT),nt.oneof!==void 0){const ht=typeof nt.oneof=="string"?nt.oneof:nt.oneof.name;(!et||et.name!=ht)&&(et=new InternalOneofInfo(ht)),ot.oneof=et,et.addField(ot)}nt.kind=="message"&&(ot.delimited=!1),ot.packed=($=nt.packed)!==null&&$!==void 0?$:nt.kind=="enum"||nt.kind=="scalar"&&nt.T!=ScalarType.BYTES&&nt.T!=ScalarType.STRING,k.push(ot)}return k}class Timestamp extends Message{constructor(c){super(),this.seconds=protoInt64.zero,this.nanos=0,proto3.util.initPartial(c,this)}fromJson(c,b){if(typeof c!="string")throw new Error("cannot decode google.protobuf.Timestamp from JSON: ".concat(proto3.json.debug(c)));const _=c.match(/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2}):([0-9]{2})(?:Z|\.([0-9]{3,9})Z|([+-][0-9][0-9]:[0-9][0-9]))$/);if(!_)throw new Error("cannot decode google.protobuf.Timestamp from JSON: invalid RFC 3339 string");const $=Date.parse(_[1]+"-"+_[2]+"-"+_[3]+"T"+_[4]+":"+_[5]+":"+_[6]+(_[8]?_[8]:"Z"));if(Number.isNaN($))throw new Error("cannot decode google.protobuf.Timestamp from JSON: invalid RFC 3339 string");if($<Date.parse("0001-01-01T00:00:00Z")||$>Date.parse("9999-12-31T23:59:59Z"))throw new Error("cannot decode message google.protobuf.Timestamp from JSON: must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive");return this.seconds=protoInt64.parse($/1e3),this.nanos=0,_[7]&&(this.nanos=parseInt("1"+_[7]+"0".repeat(9-_[7].length))-1e9),this}toJson(c){const b=Number(this.seconds)*1e3;if(b<Date.parse("0001-01-01T00:00:00Z")||b>Date.parse("9999-12-31T23:59:59Z"))throw new Error("cannot encode google.protobuf.Timestamp to JSON: must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive");if(this.nanos<0)throw new Error("cannot encode google.protobuf.Timestamp to JSON: nanos must not be negative");let _="Z";if(this.nanos>0){const $=(this.nanos+1e9).toString().substring(1);$.substring(3)==="000000"?_="."+$.substring(0,3)+"Z":$.substring(6)==="000"?_="."+$.substring(0,6)+"Z":_="."+$+"Z"}return new Date(b).toISOString().replace(".000Z",_)}toDate(){return new Date(Number(this.seconds)*1e3+Math.ceil(this.nanos/1e6))}static now(){return Timestamp.fromDate(new Date)}static fromDate(c){const b=c.getTime();return new Timestamp({seconds:protoInt64.parse(Math.floor(b/1e3)),nanos:b%1e3*1e6})}static fromBinary(c,b){return new Timestamp().fromBinary(c,b)}static fromJson(c,b){return new Timestamp().fromJson(c,b)}static fromJsonString(c,b){return new Timestamp().fromJsonString(c,b)}static equals(c,b){return proto3.util.equals(Timestamp,c,b)}}Timestamp.runtime=proto3;Timestamp.typeName="google.protobuf.Timestamp";Timestamp.fields=proto3.util.newFieldList(()=>[{no:1,name:"seconds",kind:"scalar",T:3},{no:2,name:"nanos",kind:"scalar",T:5}]);const AudioCodec=proto3.makeEnum("livekit.AudioCodec",[{no:0,name:"DEFAULT_AC"},{no:1,name:"OPUS"},{no:2,name:"AAC"}]),VideoCodec=proto3.makeEnum("livekit.VideoCodec",[{no:0,name:"DEFAULT_VC"},{no:1,name:"H264_BASELINE"},{no:2,name:"H264_MAIN"},{no:3,name:"H264_HIGH"},{no:4,name:"VP8"}]),ImageCodec=proto3.makeEnum("livekit.ImageCodec",[{no:0,name:"IC_DEFAULT"},{no:1,name:"IC_JPEG"}]),TrackType=proto3.makeEnum("livekit.TrackType",[{no:0,name:"AUDIO"},{no:1,name:"VIDEO"},{no:2,name:"DATA"}]),TrackSource=proto3.makeEnum("livekit.TrackSource",[{no:0,name:"UNKNOWN"},{no:1,name:"CAMERA"},{no:2,name:"MICROPHONE"},{no:3,name:"SCREEN_SHARE"},{no:4,name:"SCREEN_SHARE_AUDIO"}]),VideoQuality$1=proto3.makeEnum("livekit.VideoQuality",[{no:0,name:"LOW"},{no:1,name:"MEDIUM"},{no:2,name:"HIGH"},{no:3,name:"OFF"}]),ConnectionQuality$1=proto3.makeEnum("livekit.ConnectionQuality",[{no:0,name:"POOR"},{no:1,name:"GOOD"},{no:2,name:"EXCELLENT"},{no:3,name:"LOST"}]),ClientConfigSetting=proto3.makeEnum("livekit.ClientConfigSetting",[{no:0,name:"UNSET"},{no:1,name:"DISABLED"},{no:2,name:"ENABLED"}]),DisconnectReason=proto3.makeEnum("livekit.DisconnectReason",[{no:0,name:"UNKNOWN_REASON"},{no:1,name:"CLIENT_INITIATED"},{no:2,name:"DUPLICATE_IDENTITY"},{no:3,name:"SERVER_SHUTDOWN"},{no:4,name:"PARTICIPANT_REMOVED"},{no:5,name:"ROOM_DELETED"},{no:6,name:"STATE_MISMATCH"},{no:7,name:"JOIN_FAILURE"},{no:8,name:"MIGRATION"},{no:9,name:"SIGNAL_CLOSE"}]),ReconnectReason=proto3.makeEnum("livekit.ReconnectReason",[{no:0,name:"RR_UNKNOWN"},{no:1,name:"RR_SIGNAL_DISCONNECTED"},{no:2,name:"RR_PUBLISHER_FAILED"},{no:3,name:"RR_SUBSCRIBER_FAILED"},{no:4,name:"RR_SWITCH_CANDIDATE"}]),SubscriptionError=proto3.makeEnum("livekit.SubscriptionError",[{no:0,name:"SE_UNKNOWN"},{no:1,name:"SE_CODEC_UNSUPPORTED"},{no:2,name:"SE_TRACK_NOTFOUND"}]),Room$1=proto3.makeMessageType("livekit.Room",()=>[{no:1,name:"sid",kind:"scalar",T:9},{no:2,name:"name",kind:"scalar",T:9},{no:3,name:"empty_timeout",kind:"scalar",T:13},{no:14,name:"departure_timeout",kind:"scalar",T:13},{no:4,name:"max_participants",kind:"scalar",T:13},{no:5,name:"creation_time",kind:"scalar",T:3},{no:6,name:"turn_password",kind:"scalar",T:9},{no:7,name:"enabled_codecs",kind:"message",T:Codec,repeated:!0},{no:8,name:"metadata",kind:"scalar",T:9},{no:9,name:"num_participants",kind:"scalar",T:13},{no:11,name:"num_publishers",kind:"scalar",T:13},{no:10,name:"active_recording",kind:"scalar",T:8},{no:13,name:"version",kind:"message",T:TimedVersion}]),Codec=proto3.makeMessageType("livekit.Codec",()=>[{no:1,name:"mime",kind:"scalar",T:9},{no:2,name:"fmtp_line",kind:"scalar",T:9}]);proto3.makeMessageType("livekit.PlayoutDelay",()=>[{no:1,name:"enabled",kind:"scalar",T:8},{no:2,name:"min",kind:"scalar",T:13},{no:3,name:"max",kind:"scalar",T:13}]);const ParticipantPermission=proto3.makeMessageType("livekit.ParticipantPermission",()=>[{no:1,name:"can_subscribe",kind:"scalar",T:8},{no:2,name:"can_publish",kind:"scalar",T:8},{no:3,name:"can_publish_data",kind:"scalar",T:8},{no:9,name:"can_publish_sources",kind:"enum",T:proto3.getEnumType(TrackSource),repeated:!0},{no:7,name:"hidden",kind:"scalar",T:8},{no:8,name:"recorder",kind:"scalar",T:8},{no:10,name:"can_update_metadata",kind:"scalar",T:8},{no:11,name:"agent",kind:"scalar",T:8}]),ParticipantInfo=proto3.makeMessageType("livekit.ParticipantInfo",()=>[{no:1,name:"sid",kind:"scalar",T:9},{no:2,name:"identity",kind:"scalar",T:9},{no:3,name:"state",kind:"enum",T:proto3.getEnumType(ParticipantInfo_State)},{no:4,name:"tracks",kind:"message",T:TrackInfo,repeated:!0},{no:5,name:"metadata",kind:"scalar",T:9},{no:6,name:"joined_at",kind:"scalar",T:3},{no:9,name:"name",kind:"scalar",T:9},{no:10,name:"version",kind:"scalar",T:13},{no:11,name:"permission",kind:"message",T:ParticipantPermission},{no:12,name:"region",kind:"scalar",T:9},{no:13,name:"is_publisher",kind:"scalar",T:8},{no:14,name:"kind",kind:"enum",T:proto3.getEnumType(ParticipantInfo_Kind)}]),ParticipantInfo_State=proto3.makeEnum("livekit.ParticipantInfo.State",[{no:0,name:"JOINING"},{no:1,name:"JOINED"},{no:2,name:"ACTIVE"},{no:3,name:"DISCONNECTED"}]),ParticipantInfo_Kind=proto3.makeEnum("livekit.ParticipantInfo.Kind",[{no:0,name:"STANDARD"},{no:1,name:"INGRESS"},{no:2,name:"EGRESS"},{no:3,name:"SIP"},{no:4,name:"AGENT"}]);proto3.makeMessageType("livekit.Encryption",[]);const Encryption_Type=proto3.makeEnum("livekit.Encryption.Type",[{no:0,name:"NONE"},{no:1,name:"GCM"},{no:2,name:"CUSTOM"}]),SimulcastCodecInfo=proto3.makeMessageType("livekit.SimulcastCodecInfo",()=>[{no:1,name:"mime_type",kind:"scalar",T:9},{no:2,name:"mid",kind:"scalar",T:9},{no:3,name:"cid",kind:"scalar",T:9},{no:4,name:"layers",kind:"message",T:VideoLayer,repeated:!0}]),TrackInfo=proto3.makeMessageType("livekit.TrackInfo",()=>[{no:1,name:"sid",kind:"scalar",T:9},{no:2,name:"type",kind:"enum",T:proto3.getEnumType(TrackType)},{no:3,name:"name",kind:"scalar",T:9},{no:4,name:"muted",kind:"scalar",T:8},{no:5,name:"width",kind:"scalar",T:13},{no:6,name:"height",kind:"scalar",T:13},{no:7,name:"simulcast",kind:"scalar",T:8},{no:8,name:"disable_dtx",kind:"scalar",T:8},{no:9,name:"source",kind:"enum",T:proto3.getEnumType(TrackSource)},{no:10,name:"layers",kind:"message",T:VideoLayer,repeated:!0},{no:11,name:"mime_type",kind:"scalar",T:9},{no:12,name:"mid",kind:"scalar",T:9},{no:13,name:"codecs",kind:"message",T:SimulcastCodecInfo,repeated:!0},{no:14,name:"stereo",kind:"scalar",T:8},{no:15,name:"disable_red",kind:"scalar",T:8},{no:16,name:"encryption",kind:"enum",T:proto3.getEnumType(Encryption_Type)},{no:17,name:"stream",kind:"scalar",T:9},{no:18,name:"version",kind:"message",T:TimedVersion}]),VideoLayer=proto3.makeMessageType("livekit.VideoLayer",()=>[{no:1,name:"quality",kind:"enum",T:proto3.getEnumType(VideoQuality$1)},{no:2,name:"width",kind:"scalar",T:13},{no:3,name:"height",kind:"scalar",T:13},{no:4,name:"bitrate",kind:"scalar",T:13},{no:5,name:"ssrc",kind:"scalar",T:13}]),DataPacket=proto3.makeMessageType("livekit.DataPacket",()=>[{no:1,name:"kind",kind:"enum",T:proto3.getEnumType(DataPacket_Kind)},{no:4,name:"participant_identity",kind:"scalar",T:9},{no:5,name:"destination_identities",kind:"scalar",T:9,repeated:!0},{no:2,name:"user",kind:"message",T:UserPacket,oneof:"value"},{no:3,name:"speaker",kind:"message",T:ActiveSpeakerUpdate,oneof:"value"},{no:6,name:"sip_dtmf",kind:"message",T:SipDTMF,oneof:"value"}]),DataPacket_Kind=proto3.makeEnum("livekit.DataPacket.Kind",[{no:0,name:"RELIABLE"},{no:1,name:"LOSSY"}]),ActiveSpeakerUpdate=proto3.makeMessageType("livekit.ActiveSpeakerUpdate",()=>[{no:1,name:"speakers",kind:"message",T:SpeakerInfo,repeated:!0}]),SpeakerInfo=proto3.makeMessageType("livekit.SpeakerInfo",()=>[{no:1,name:"sid",kind:"scalar",T:9},{no:2,name:"level",kind:"scalar",T:2},{no:3,name:"active",kind:"scalar",T:8}]),UserPacket=proto3.makeMessageType("livekit.UserPacket",()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:5,name:"participant_identity",kind:"scalar",T:9},{no:2,name:"payload",kind:"scalar",T:12},{no:3,name:"destination_sids",kind:"scalar",T:9,repeated:!0},{no:6,name:"destination_identities",kind:"scalar",T:9,repeated:!0},{no:4,name:"topic",kind:"scalar",T:9,opt:!0}]),SipDTMF=proto3.makeMessageType("livekit.SipDTMF",()=>[{no:3,name:"code",kind:"scalar",T:13},{no:4,name:"digit",kind:"scalar",T:9}]),ParticipantTracks=proto3.makeMessageType("livekit.ParticipantTracks",()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:2,name:"track_sids",kind:"scalar",T:9,repeated:!0}]),ServerInfo=proto3.makeMessageType("livekit.ServerInfo",()=>[{no:1,name:"edition",kind:"enum",T:proto3.getEnumType(ServerInfo_Edition)},{no:2,name:"version",kind:"scalar",T:9},{no:3,name:"protocol",kind:"scalar",T:5},{no:4,name:"region",kind:"scalar",T:9},{no:5,name:"node_id",kind:"scalar",T:9},{no:6,name:"debug_info",kind:"scalar",T:9}]),ServerInfo_Edition=proto3.makeEnum("livekit.ServerInfo.Edition",[{no:0,name:"Standard"},{no:1,name:"Cloud"}]),ClientInfo=proto3.makeMessageType("livekit.ClientInfo",()=>[{no:1,name:"sdk",kind:"enum",T:proto3.getEnumType(ClientInfo_SDK)},{no:2,name:"version",kind:"scalar",T:9},{no:3,name:"protocol",kind:"scalar",T:5},{no:4,name:"os",kind:"scalar",T:9},{no:5,name:"os_version",kind:"scalar",T:9},{no:6,name:"device_model",kind:"scalar",T:9},{no:7,name:"browser",kind:"scalar",T:9},{no:8,name:"browser_version",kind:"scalar",T:9},{no:9,name:"address",kind:"scalar",T:9},{no:10,name:"network",kind:"scalar",T:9}]),ClientInfo_SDK=proto3.makeEnum("livekit.ClientInfo.SDK",[{no:0,name:"UNKNOWN"},{no:1,name:"JS"},{no:2,name:"SWIFT"},{no:3,name:"ANDROID"},{no:4,name:"FLUTTER"},{no:5,name:"GO"},{no:6,name:"UNITY"},{no:7,name:"REACT_NATIVE"},{no:8,name:"RUST"},{no:9,name:"PYTHON"},{no:10,name:"CPP"}]),ClientConfiguration=proto3.makeMessageType("livekit.ClientConfiguration",()=>[{no:1,name:"video",kind:"message",T:VideoConfiguration},{no:2,name:"screen",kind:"message",T:VideoConfiguration},{no:3,name:"resume_connection",kind:"enum",T:proto3.getEnumType(ClientConfigSetting)},{no:4,name:"disabled_codecs",kind:"message",T:DisabledCodecs},{no:5,name:"force_relay",kind:"enum",T:proto3.getEnumType(ClientConfigSetting)}]),VideoConfiguration=proto3.makeMessageType("livekit.VideoConfiguration",()=>[{no:1,name:"hardware_encoder",kind:"enum",T:proto3.getEnumType(ClientConfigSetting)}]),DisabledCodecs=proto3.makeMessageType("livekit.DisabledCodecs",()=>[{no:1,name:"codecs",kind:"message",T:Codec,repeated:!0},{no:2,name:"publish",kind:"message",T:Codec,repeated:!0}]),RTPDrift=proto3.makeMessageType("livekit.RTPDrift",()=>[{no:1,name:"start_time",kind:"message",T:Timestamp},{no:2,name:"end_time",kind:"message",T:Timestamp},{no:3,name:"duration",kind:"scalar",T:1},{no:4,name:"start_timestamp",kind:"scalar",T:4},{no:5,name:"end_timestamp",kind:"scalar",T:4},{no:6,name:"rtp_clock_ticks",kind:"scalar",T:4},{no:7,name:"drift_samples",kind:"scalar",T:3},{no:8,name:"drift_ms",kind:"scalar",T:1},{no:9,name:"clock_rate",kind:"scalar",T:1}]);proto3.makeMessageType("livekit.RTPStats",()=>[{no:1,name:"start_time",kind:"message",T:Timestamp},{no:2,name:"end_time",kind:"message",T:Timestamp},{no:3,name:"duration",kind:"scalar",T:1},{no:4,name:"packets",kind:"scalar",T:13},{no:5,name:"packet_rate",kind:"scalar",T:1},{no:6,name:"bytes",kind:"scalar",T:4},{no:39,name:"header_bytes",kind:"scalar",T:4},{no:7,name:"bitrate",kind:"scalar",T:1},{no:8,name:"packets_lost",kind:"scalar",T:13},{no:9,name:"packet_loss_rate",kind:"scalar",T:1},{no:10,name:"packet_loss_percentage",kind:"scalar",T:2},{no:11,name:"packets_duplicate",kind:"scalar",T:13},{no:12,name:"packet_duplicate_rate",kind:"scalar",T:1},{no:13,name:"bytes_duplicate",kind:"scalar",T:4},{no:40,name:"header_bytes_duplicate",kind:"scalar",T:4},{no:14,name:"bitrate_duplicate",kind:"scalar",T:1},{no:15,name:"packets_padding",kind:"scalar",T:13},{no:16,name:"packet_padding_rate",kind:"scalar",T:1},{no:17,name:"bytes_padding",kind:"scalar",T:4},{no:41,name:"header_bytes_padding",kind:"scalar",T:4},{no:18,name:"bitrate_padding",kind:"scalar",T:1},{no:19,name:"packets_out_of_order",kind:"scalar",T:13},{no:20,name:"frames",kind:"scalar",T:13},{no:21,name:"frame_rate",kind:"scalar",T:1},{no:22,name:"jitter_current",kind:"scalar",T:1},{no:23,name:"jitter_max",kind:"scalar",T:1},{no:24,name:"gap_histogram",kind:"map",K:5,V:{kind:"scalar",T:13}},{no:25,name:"nacks",kind:"scalar",T:13},{no:37,name:"nack_acks",kind:"scalar",T:13},{no:26,name:"nack_misses",kind:"scalar",T:13},{no:38,name:"nack_repeated",kind:"scalar",T:13},{no:27,name:"plis",kind:"scalar",T:13},{no:28,name:"last_pli",kind:"message",T:Timestamp},{no:29,name:"firs",kind:"scalar",T:13},{no:30,name:"last_fir",kind:"message",T:Timestamp},{no:31,name:"rtt_current",kind:"scalar",T:13},{no:32,name:"rtt_max",kind:"scalar",T:13},{no:33,name:"key_frames",kind:"scalar",T:13},{no:34,name:"last_key_frame",kind:"message",T:Timestamp},{no:35,name:"layer_lock_plis",kind:"scalar",T:13},{no:36,name:"last_layer_lock_pli",kind:"message",T:Timestamp},{no:44,name:"packet_drift",kind:"message",T:RTPDrift},{no:45,name:"report_drift",kind:"message",T:RTPDrift}]);const TimedVersion=proto3.makeMessageType("livekit.TimedVersion",()=>[{no:1,name:"unix_micro",kind:"scalar",T:3},{no:2,name:"ticks",kind:"scalar",T:5}]),EncodedFileType=proto3.makeEnum("livekit.EncodedFileType",[{no:0,name:"DEFAULT_FILETYPE"},{no:1,name:"MP4"},{no:2,name:"OGG"}]),SegmentedFileProtocol=proto3.makeEnum("livekit.SegmentedFileProtocol",[{no:0,name:"DEFAULT_SEGMENTED_FILE_PROTOCOL"},{no:1,name:"HLS_PROTOCOL"}]),SegmentedFileSuffix=proto3.makeEnum("livekit.SegmentedFileSuffix",[{no:0,name:"INDEX"},{no:1,name:"TIMESTAMP"}]),ImageFileSuffix=proto3.makeEnum("livekit.ImageFileSuffix",[{no:0,name:"IMAGE_SUFFIX_INDEX"},{no:1,name:"IMAGE_SUFFIX_TIMESTAMP"}]),StreamProtocol=proto3.makeEnum("livekit.StreamProtocol",[{no:0,name:"DEFAULT_PROTOCOL"},{no:1,name:"RTMP"}]),EncodingOptionsPreset=proto3.makeEnum("livekit.EncodingOptionsPreset",[{no:0,name:"H264_720P_30"},{no:1,name:"H264_720P_60"},{no:2,name:"H264_1080P_30"},{no:3,name:"H264_1080P_60"},{no:4,name:"PORTRAIT_H264_720P_30"},{no:5,name:"PORTRAIT_H264_720P_60"},{no:6,name:"PORTRAIT_H264_1080P_30"},{no:7,name:"PORTRAIT_H264_1080P_60"}]),EgressStatus=proto3.makeEnum("livekit.EgressStatus",[{no:0,name:"EGRESS_STARTING"},{no:1,name:"EGRESS_ACTIVE"},{no:2,name:"EGRESS_ENDING"},{no:3,name:"EGRESS_COMPLETE"},{no:4,name:"EGRESS_FAILED"},{no:5,name:"EGRESS_ABORTED"},{no:6,name:"EGRESS_LIMIT_REACHED"}]),RoomCompositeEgressRequest=proto3.makeMessageType("livekit.RoomCompositeEgressRequest",()=>[{no:1,name:"room_name",kind:"scalar",T:9},{no:2,name:"layout",kind:"scalar",T:9},{no:3,name:"audio_only",kind:"scalar",T:8},{no:4,name:"video_only",kind:"scalar",T:8},{no:5,name:"custom_base_url",kind:"scalar",T:9},{no:6,name:"file",kind:"message",T:EncodedFileOutput,oneof:"output"},{no:7,name:"stream",kind:"message",T:StreamOutput,oneof:"output"},{no:10,name:"segments",kind:"message",T:SegmentedFileOutput,oneof:"output"},{no:8,name:"preset",kind:"enum",T:proto3.getEnumType(EncodingOptionsPreset),oneof:"options"},{no:9,name:"advanced",kind:"message",T:EncodingOptions,oneof:"options"},{no:11,name:"file_outputs",kind:"message",T:EncodedFileOutput,repeated:!0},{no:12,name:"stream_outputs",kind:"message",T:StreamOutput,repeated:!0},{no:13,name:"segment_outputs",kind:"message",T:SegmentedFileOutput,repeated:!0},{no:14,name:"image_outputs",kind:"message",T:ImageOutput,repeated:!0}]),WebEgressRequest=proto3.makeMessageType("livekit.WebEgressRequest",()=>[{no:1,name:"url",kind:"scalar",T:9},{no:2,name:"audio_only",kind:"scalar",T:8},{no:3,name:"video_only",kind:"scalar",T:8},{no:12,name:"await_start_signal",kind:"scalar",T:8},{no:4,name:"file",kind:"message",T:EncodedFileOutput,oneof:"output"},{no:5,name:"stream",kind:"message",T:StreamOutput,oneof:"output"},{no:6,name:"segments",kind:"message",T:SegmentedFileOutput,oneof:"output"},{no:7,name:"preset",kind:"enum",T:proto3.getEnumType(EncodingOptionsPreset),oneof:"options"},{no:8,name:"advanced",kind:"message",T:EncodingOptions,oneof:"options"},{no:9,name:"file_outputs",kind:"message",T:EncodedFileOutput,repeated:!0},{no:10,name:"stream_outputs",kind:"message",T:StreamOutput,repeated:!0},{no:11,name:"segment_outputs",kind:"message",T:SegmentedFileOutput,repeated:!0},{no:13,name:"image_outputs",kind:"message",T:ImageOutput,repeated:!0}]),ParticipantEgressRequest=proto3.makeMessageType("livekit.ParticipantEgressRequest",()=>[{no:1,name:"room_name",kind:"scalar",T:9},{no:2,name:"identity",kind:"scalar",T:9},{no:3,name:"screen_share",kind:"scalar",T:8},{no:4,name:"preset",kind:"enum",T:proto3.getEnumType(EncodingOptionsPreset),oneof:"options"},{no:5,name:"advanced",kind:"message",T:EncodingOptions,oneof:"options"},{no:6,name:"file_outputs",kind:"message",T:EncodedFileOutput,repeated:!0},{no:7,name:"stream_outputs",kind:"message",T:StreamOutput,repeated:!0},{no:8,name:"segment_outputs",kind:"message",T:SegmentedFileOutput,repeated:!0},{no:9,name:"image_outputs",kind:"message",T:ImageOutput,repeated:!0}]),TrackCompositeEgressRequest=proto3.makeMessageType("livekit.TrackCompositeEgressRequest",()=>[{no:1,name:"room_name",kind:"scalar",T:9},{no:2,name:"audio_track_id",kind:"scalar",T:9},{no:3,name:"video_track_id",kind:"scalar",T:9},{no:4,name:"file",kind:"message",T:EncodedFileOutput,oneof:"output"},{no:5,name:"stream",kind:"message",T:StreamOutput,oneof:"output"},{no:8,name:"segments",kind:"message",T:SegmentedFileOutput,oneof:"output"},{no:6,name:"preset",kind:"enum",T:proto3.getEnumType(EncodingOptionsPreset),oneof:"options"},{no:7,name:"advanced",kind:"message",T:EncodingOptions,oneof:"options"},{no:11,name:"file_outputs",kind:"message",T:EncodedFileOutput,repeated:!0},{no:12,name:"stream_outputs",kind:"message",T:StreamOutput,repeated:!0},{no:13,name:"segment_outputs",kind:"message",T:SegmentedFileOutput,repeated:!0},{no:14,name:"image_outputs",kind:"message",T:ImageOutput,repeated:!0}]),TrackEgressRequest=proto3.makeMessageType("livekit.TrackEgressRequest",()=>[{no:1,name:"room_name",kind:"scalar",T:9},{no:2,name:"track_id",kind:"scalar",T:9},{no:3,name:"file",kind:"message",T:DirectFileOutput,oneof:"output"},{no:4,name:"websocket_url",kind:"scalar",T:9,oneof:"output"}]),EncodedFileOutput=proto3.makeMessageType("livekit.EncodedFileOutput",()=>[{no:1,name:"file_type",kind:"enum",T:proto3.getEnumType(EncodedFileType)},{no:2,name:"filepath",kind:"scalar",T:9},{no:6,name:"disable_manifest",kind:"scalar",T:8},{no:3,name:"s3",kind:"message",T:S3Upload,oneof:"output"},{no:4,name:"gcp",kind:"message",T:GCPUpload,oneof:"output"},{no:5,name:"azure",kind:"message",T:AzureBlobUpload,oneof:"output"},{no:7,name:"aliOSS",kind:"message",T:AliOSSUpload,oneof:"output"}]),SegmentedFileOutput=proto3.makeMessageType("livekit.SegmentedFileOutput",()=>[{no:1,name:"protocol",kind:"enum",T:proto3.getEnumType(SegmentedFileProtocol)},{no:2,name:"filename_prefix",kind:"scalar",T:9},{no:3,name:"playlist_name",kind:"scalar",T:9},{no:11,name:"live_playlist_name",kind:"scalar",T:9},{no:4,name:"segment_duration",kind:"scalar",T:13},{no:10,name:"filename_suffix",kind:"enum",T:proto3.getEnumType(SegmentedFileSuffix)},{no:8,name:"disable_manifest",kind:"scalar",T:8},{no:5,name:"s3",kind:"message",T:S3Upload,oneof:"output"},{no:6,name:"gcp",kind:"message",T:GCPUpload,oneof:"output"},{no:7,name:"azure",kind:"message",T:AzureBlobUpload,oneof:"output"},{no:9,name:"aliOSS",kind:"message",T:AliOSSUpload,oneof:"output"}]),DirectFileOutput=proto3.makeMessageType("livekit.DirectFileOutput",()=>[{no:1,name:"filepath",kind:"scalar",T:9},{no:5,name:"disable_manifest",kind:"scalar",T:8},{no:2,name:"s3",kind:"message",T:S3Upload,oneof:"output"},{no:3,name:"gcp",kind:"message",T:GCPUpload,oneof:"output"},{no:4,name:"azure",kind:"message",T:AzureBlobUpload,oneof:"output"},{no:6,name:"aliOSS",kind:"message",T:AliOSSUpload,oneof:"output"}]),ImageOutput=proto3.makeMessageType("livekit.ImageOutput",()=>[{no:1,name:"capture_interval",kind:"scalar",T:13},{no:2,name:"width",kind:"scalar",T:5},{no:3,name:"height",kind:"scalar",T:5},{no:4,name:"filename_prefix",kind:"scalar",T:9},{no:5,name:"filename_suffix",kind:"enum",T:proto3.getEnumType(ImageFileSuffix)},{no:6,name:"image_codec",kind:"enum",T:proto3.getEnumType(ImageCodec)},{no:7,name:"disable_manifest",kind:"scalar",T:8},{no:8,name:"s3",kind:"message",T:S3Upload,oneof:"output"},{no:9,name:"gcp",kind:"message",T:GCPUpload,oneof:"output"},{no:10,name:"azure",kind:"message",T:AzureBlobUpload,oneof:"output"},{no:11,name:"aliOSS",kind:"message",T:AliOSSUpload,oneof:"output"}]),S3Upload=proto3.makeMessageType("livekit.S3Upload",()=>[{no:1,name:"access_key",kind:"scalar",T:9},{no:2,name:"secret",kind:"scalar",T:9},{no:3,name:"region",kind:"scalar",T:9},{no:4,name:"endpoint",kind:"scalar",T:9},{no:5,name:"bucket",kind:"scalar",T:9},{no:6,name:"force_path_style",kind:"scalar",T:8},{no:7,name:"metadata",kind:"map",K:9,V:{kind:"scalar",T:9}},{no:8,name:"tagging",kind:"scalar",T:9},{no:9,name:"content_disposition",kind:"scalar",T:9}]),GCPUpload=proto3.makeMessageType("livekit.GCPUpload",()=>[{no:1,name:"credentials",kind:"scalar",T:9},{no:2,name:"bucket",kind:"scalar",T:9},{no:3,name:"endpoint",kind:"scalar",T:9}]),AzureBlobUpload=proto3.makeMessageType("livekit.AzureBlobUpload",()=>[{no:1,name:"account_name",kind:"scalar",T:9},{no:2,name:"account_key",kind:"scalar",T:9},{no:3,name:"container_name",kind:"scalar",T:9}]),AliOSSUpload=proto3.makeMessageType("livekit.AliOSSUpload",()=>[{no:1,name:"access_key",kind:"scalar",T:9},{no:2,name:"secret",kind:"scalar",T:9},{no:3,name:"region",kind:"scalar",T:9},{no:4,name:"endpoint",kind:"scalar",T:9},{no:5,name:"bucket",kind:"scalar",T:9}]),StreamOutput=proto3.makeMessageType("livekit.StreamOutput",()=>[{no:1,name:"protocol",kind:"enum",T:proto3.getEnumType(StreamProtocol)},{no:2,name:"urls",kind:"scalar",T:9,repeated:!0}]),EncodingOptions=proto3.makeMessageType("livekit.EncodingOptions",()=>[{no:1,name:"width",kind:"scalar",T:5},{no:2,name:"height",kind:"scalar",T:5},{no:3,name:"depth",kind:"scalar",T:5},{no:4,name:"framerate",kind:"scalar",T:5},{no:5,name:"audio_codec",kind:"enum",T:proto3.getEnumType(AudioCodec)},{no:6,name:"audio_bitrate",kind:"scalar",T:5},{no:11,name:"audio_quality",kind:"scalar",T:5},{no:7,name:"audio_frequency",kind:"scalar",T:5},{no:8,name:"video_codec",kind:"enum",T:proto3.getEnumType(VideoCodec)},{no:9,name:"video_bitrate",kind:"scalar",T:5},{no:12,name:"video_quality",kind:"scalar",T:5},{no:10,name:"key_frame_interval",kind:"scalar",T:1}]);proto3.makeMessageType("livekit.UpdateLayoutRequest",()=>[{no:1,name:"egress_id",kind:"scalar",T:9},{no:2,name:"layout",kind:"scalar",T:9}]);proto3.makeMessageType("livekit.UpdateStreamRequest",()=>[{no:1,name:"egress_id",kind:"scalar",T:9},{no:2,name:"add_output_urls",kind:"scalar",T:9,repeated:!0},{no:3,name:"remove_output_urls",kind:"scalar",T:9,repeated:!0}]);proto3.makeMessageType("livekit.ListEgressRequest",()=>[{no:1,name:"room_name",kind:"scalar",T:9},{no:2,name:"egress_id",kind:"scalar",T:9},{no:3,name:"active",kind:"scalar",T:8}]);proto3.makeMessageType("livekit.ListEgressResponse",()=>[{no:1,name:"items",kind:"message",T:EgressInfo,repeated:!0}]);proto3.makeMessageType("livekit.StopEgressRequest",()=>[{no:1,name:"egress_id",kind:"scalar",T:9}]);const EgressInfo=proto3.makeMessageType("livekit.EgressInfo",()=>[{no:1,name:"egress_id",kind:"scalar",T:9},{no:2,name:"room_id",kind:"scalar",T:9},{no:13,name:"room_name",kind:"scalar",T:9},{no:3,name:"status",kind:"enum",T:proto3.getEnumType(EgressStatus)},{no:10,name:"started_at",kind:"scalar",T:3},{no:11,name:"ended_at",kind:"scalar",T:3},{no:18,name:"updated_at",kind:"scalar",T:3},{no:21,name:"details",kind:"scalar",T:9},{no:9,name:"error",kind:"scalar",T:9},{no:4,name:"room_composite",kind:"message",T:RoomCompositeEgressRequest,oneof:"request"},{no:14,name:"web",kind:"message",T:WebEgressRequest,oneof:"request"},{no:19,name:"participant",kind:"message",T:ParticipantEgressRequest,oneof:"request"},{no:5,name:"track_composite",kind:"message",T:TrackCompositeEgressRequest,oneof:"request"},{no:6,name:"track",kind:"message",T:TrackEgressRequest,oneof:"request"},{no:7,name:"stream",kind:"message",T:StreamInfoList,oneof:"result"},{no:8,name:"file",kind:"message",T:FileInfo,oneof:"result"},{no:12,name:"segments",kind:"message",T:SegmentsInfo,oneof:"result"},{no:15,name:"stream_results",kind:"message",T:StreamInfo,repeated:!0},{no:16,name:"file_results",kind:"message",T:FileInfo,repeated:!0},{no:17,name:"segment_results",kind:"message",T:SegmentsInfo,repeated:!0},{no:20,name:"image_results",kind:"message",T:ImagesInfo,repeated:!0}]),StreamInfoList=proto3.makeMessageType("livekit.StreamInfoList",()=>[{no:1,name:"info",kind:"message",T:StreamInfo,repeated:!0}]),StreamInfo=proto3.makeMessageType("livekit.StreamInfo",()=>[{no:1,name:"url",kind:"scalar",T:9},{no:2,name:"started_at",kind:"scalar",T:3},{no:3,name:"ended_at",kind:"scalar",T:3},{no:4,name:"duration",kind:"scalar",T:3},{no:5,name:"status",kind:"enum",T:proto3.getEnumType(StreamInfo_Status)},{no:6,name:"error",kind:"scalar",T:9}]),StreamInfo_Status=proto3.makeEnum("livekit.StreamInfo.Status",[{no:0,name:"ACTIVE"},{no:1,name:"FINISHED"},{no:2,name:"FAILED"}]),FileInfo=proto3.makeMessageType("livekit.FileInfo",()=>[{no:1,name:"filename",kind:"scalar",T:9},{no:2,name:"started_at",kind:"scalar",T:3},{no:3,name:"ended_at",kind:"scalar",T:3},{no:6,name:"duration",kind:"scalar",T:3},{no:4,name:"size",kind:"scalar",T:3},{no:5,name:"location",kind:"scalar",T:9}]),SegmentsInfo=proto3.makeMessageType("livekit.SegmentsInfo",()=>[{no:1,name:"playlist_name",kind:"scalar",T:9},{no:8,name:"live_playlist_name",kind:"scalar",T:9},{no:2,name:"duration",kind:"scalar",T:3},{no:3,name:"size",kind:"scalar",T:3},{no:4,name:"playlist_location",kind:"scalar",T:9},{no:9,name:"live_playlist_location",kind:"scalar",T:9},{no:5,name:"segment_count",kind:"scalar",T:3},{no:6,name:"started_at",kind:"scalar",T:3},{no:7,name:"ended_at",kind:"scalar",T:3}]),ImagesInfo=proto3.makeMessageType("livekit.ImagesInfo",()=>[{no:1,name:"image_count",kind:"scalar",T:3},{no:2,name:"started_at",kind:"scalar",T:3},{no:3,name:"ended_at",kind:"scalar",T:3}]),AutoParticipantEgress=proto3.makeMessageType("livekit.AutoParticipantEgress",()=>[{no:1,name:"preset",kind:"enum",T:proto3.getEnumType(EncodingOptionsPreset),oneof:"options"},{no:2,name:"advanced",kind:"message",T:EncodingOptions,oneof:"options"},{no:3,name:"file_outputs",kind:"message",T:EncodedFileOutput,repeated:!0},{no:4,name:"segment_outputs",kind:"message",T:SegmentedFileOutput,repeated:!0}]),AutoTrackEgress=proto3.makeMessageType("livekit.AutoTrackEgress",()=>[{no:1,name:"filepath",kind:"scalar",T:9},{no:5,name:"disable_manifest",kind:"scalar",T:8},{no:2,name:"s3",kind:"message",T:S3Upload,oneof:"output"},{no:3,name:"gcp",kind:"message",T:GCPUpload,oneof:"output"},{no:4,name:"azure",kind:"message",T:AzureBlobUpload,oneof:"output"}]);proto3.makeMessageType("livekit.CreateRoomRequest",()=>[{no:1,name:"name",kind:"scalar",T:9},{no:2,name:"empty_timeout",kind:"scalar",T:13},{no:10,name:"departure_timeout",kind:"scalar",T:13},{no:3,name:"max_participants",kind:"scalar",T:13},{no:4,name:"node_id",kind:"scalar",T:9},{no:5,name:"metadata",kind:"scalar",T:9},{no:6,name:"egress",kind:"message",T:RoomEgress},{no:7,name:"min_playout_delay",kind:"scalar",T:13},{no:8,name:"max_playout_delay",kind:"scalar",T:13},{no:9,name:"sync_streams",kind:"scalar",T:8}]);const RoomEgress=proto3.makeMessageType("livekit.RoomEgress",()=>[{no:1,name:"room",kind:"message",T:RoomCompositeEgressRequest},{no:3,name:"participant",kind:"message",T:AutoParticipantEgress},{no:2,name:"tracks",kind:"message",T:AutoTrackEgress}]);proto3.makeMessageType("livekit.ListRoomsRequest",()=>[{no:1,name:"names",kind:"scalar",T:9,repeated:!0}]);proto3.makeMessageType("livekit.ListRoomsResponse",()=>[{no:1,name:"rooms",kind:"message",T:Room$1,repeated:!0}]);proto3.makeMessageType("livekit.DeleteRoomRequest",()=>[{no:1,name:"room",kind:"scalar",T:9}]);proto3.makeMessageType("livekit.DeleteRoomResponse",[]);proto3.makeMessageType("livekit.ListParticipantsRequest",()=>[{no:1,name:"room",kind:"scalar",T:9}]);proto3.makeMessageType("livekit.ListParticipantsResponse",()=>[{no:1,name:"participants",kind:"message",T:ParticipantInfo,repeated:!0}]);proto3.makeMessageType("livekit.RoomParticipantIdentity",()=>[{no:1,name:"room",kind:"scalar",T:9},{no:2,name:"identity",kind:"scalar",T:9}]);proto3.makeMessageType("livekit.RemoveParticipantResponse",[]);proto3.makeMessageType("livekit.MuteRoomTrackRequest",()=>[{no:1,name:"room",kind:"scalar",T:9},{no:2,name:"identity",kind:"scalar",T:9},{no:3,name:"track_sid",kind:"scalar",T:9},{no:4,name:"muted",kind:"scalar",T:8}]);proto3.makeMessageType("livekit.MuteRoomTrackResponse",()=>[{no:1,name:"track",kind:"message",T:TrackInfo}]);proto3.makeMessageType("livekit.UpdateParticipantRequest",()=>[{no:1,name:"room",kind:"scalar",T:9},{no:2,name:"identity",kind:"scalar",T:9},{no:3,name:"metadata",kind:"scalar",T:9},{no:4,name:"permission",kind:"message",T:ParticipantPermission},{no:5,name:"name",kind:"scalar",T:9}]);proto3.makeMessageType("livekit.UpdateSubscriptionsRequest",()=>[{no:1,name:"room",kind:"scalar",T:9},{no:2,name:"identity",kind:"scalar",T:9},{no:3,name:"track_sids",kind:"scalar",T:9,repeated:!0},{no:4,name:"subscribe",kind:"scalar",T:8},{no:5,name:"participant_tracks",kind:"message",T:ParticipantTracks,repeated:!0}]);proto3.makeMessageType("livekit.UpdateSubscriptionsResponse",[]);proto3.makeMessageType("livekit.SendDataRequest",()=>[{no:1,name:"room",kind:"scalar",T:9},{no:2,name:"data",kind:"scalar",T:12},{no:3,name:"kind",kind:"enum",T:proto3.getEnumType(DataPacket_Kind)},{no:4,name:"destination_sids",kind:"scalar",T:9,repeated:!0},{no:6,name:"destination_identities",kind:"scalar",T:9,repeated:!0},{no:5,name:"topic",kind:"scalar",T:9,opt:!0}]);proto3.makeMessageType("livekit.SendDataResponse",[]);proto3.makeMessageType("livekit.UpdateRoomMetadataRequest",()=>[{no:1,name:"room",kind:"scalar",T:9},{no:2,name:"metadata",kind:"scalar",T:9}]);const JobType=proto3.makeEnum("livekit.JobType",[{no:0,name:"JT_ROOM"},{no:1,name:"JT_PUBLISHER"}]),WorkerStatus=proto3.makeEnum("livekit.WorkerStatus",[{no:0,name:"WS_AVAILABLE"},{no:1,name:"WS_FULL"}]),JobStatus=proto3.makeEnum("livekit.JobStatus",[{no:0,name:"JS_UNKNOWN"},{no:1,name:"JS_SUCCESS"},{no:2,name:"JS_FAILED"}]);proto3.makeMessageType("livekit.AgentInfo",()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"name",kind:"scalar",T:9},{no:3,name:"version",kind:"scalar",T:9}]);const Job=proto3.makeMessageType("livekit.Job",()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"type",kind:"enum",T:proto3.getEnumType(JobType)},{no:3,name:"room",kind:"message",T:Room$1},{no:4,name:"participant",kind:"message",T:ParticipantInfo,opt:!0}]);proto3.makeMessageType("livekit.WorkerMessage",()=>[{no:1,name:"register",kind:"message",T:RegisterWorkerRequest,oneof:"message"},{no:2,name:"availability",kind:"message",T:AvailabilityResponse,oneof:"message"},{no:3,name:"status",kind:"message",T:UpdateWorkerStatus,oneof:"message"},{no:4,name:"job_update",kind:"message",T:JobStatusUpdate,oneof:"message"}]);proto3.makeMessageType("livekit.ServerMessage",()=>[{no:1,name:"register",kind:"message",T:RegisterWorkerResponse,oneof:"message"},{no:2,name:"availability",kind:"message",T:AvailabilityRequest,oneof:"message"},{no:3,name:"assignment",kind:"message",T:JobAssignment,oneof:"message"}]);const RegisterWorkerRequest=proto3.makeMessageType("livekit.RegisterWorkerRequest",()=>[{no:1,name:"type",kind:"enum",T:proto3.getEnumType(JobType)},{no:2,name:"worker_id",kind:"scalar",T:9},{no:3,name:"version",kind:"scalar",T:9},{no:4,name:"name",kind:"scalar",T:9}]),RegisterWorkerResponse=proto3.makeMessageType("livekit.RegisterWorkerResponse",()=>[{no:1,name:"worker_id",kind:"scalar",T:9},{no:2,name:"server_version",kind:"scalar",T:9}]),AvailabilityRequest=proto3.makeMessageType("livekit.AvailabilityRequest",()=>[{no:1,name:"job",kind:"message",T:Job}]),AvailabilityResponse=proto3.makeMessageType("livekit.AvailabilityResponse",()=>[{no:1,name:"job_id",kind:"scalar",T:9},{no:2,name:"available",kind:"scalar",T:8}]),JobStatusUpdate=proto3.makeMessageType("livekit.JobStatusUpdate",()=>[{no:1,name:"job_id",kind:"scalar",T:9},{no:2,name:"status",kind:"enum",T:proto3.getEnumType(JobStatus)},{no:3,name:"error",kind:"scalar",T:9},{no:4,name:"user_data",kind:"scalar",T:9}]),JobAssignment=proto3.makeMessageType("livekit.JobAssignment",()=>[{no:1,name:"job",kind:"message",T:Job}]),UpdateWorkerStatus=proto3.makeMessageType("livekit.UpdateWorkerStatus",()=>[{no:1,name:"status",kind:"enum",T:proto3.getEnumType(WorkerStatus)}]),SignalTarget=proto3.makeEnum("livekit.SignalTarget",[{no:0,name:"PUBLISHER"},{no:1,name:"SUBSCRIBER"}]),StreamState=proto3.makeEnum("livekit.StreamState",[{no:0,name:"ACTIVE"},{no:1,name:"PAUSED"}]),CandidateProtocol=proto3.makeEnum("livekit.CandidateProtocol",[{no:0,name:"UDP"},{no:1,name:"TCP"},{no:2,name:"TLS"}]),SignalRequest=proto3.makeMessageType("livekit.SignalRequest",()=>[{no:1,name:"offer",kind:"message",T:SessionDescription,oneof:"message"},{no:2,name:"answer",kind:"message",T:SessionDescription,oneof:"message"},{no:3,name:"trickle",kind:"message",T:TrickleRequest,oneof:"message"},{no:4,name:"add_track",kind:"message",T:AddTrackRequest,oneof:"message"},{no:5,name:"mute",kind:"message",T:MuteTrackRequest,oneof:"message"},{no:6,name:"subscription",kind:"message",T:UpdateSubscription,oneof:"message"},{no:7,name:"track_setting",kind:"message",T:UpdateTrackSettings,oneof:"message"},{no:8,name:"leave",kind:"message",T:LeaveRequest,oneof:"message"},{no:10,name:"update_layers",kind:"message",T:UpdateVideoLayers,oneof:"message"},{no:11,name:"subscription_permission",kind:"message",T:SubscriptionPermission,oneof:"message"},{no:12,name:"sync_state",kind:"message",T:SyncState,oneof:"message"},{no:13,name:"simulate",kind:"message",T:SimulateScenario,oneof:"message"},{no:14,name:"ping",kind:"scalar",T:3,oneof:"message"},{no:15,name:"update_metadata",kind:"message",T:UpdateParticipantMetadata,oneof:"message"},{no:16,name:"ping_req",kind:"message",T:Ping,oneof:"message"}]),SignalResponse=proto3.makeMessageType("livekit.SignalResponse",()=>[{no:1,name:"join",kind:"message",T:JoinResponse,oneof:"message"},{no:2,name:"answer",kind:"message",T:SessionDescription,oneof:"message"},{no:3,name:"offer",kind:"message",T:SessionDescription,oneof:"message"},{no:4,name:"trickle",kind:"message",T:TrickleRequest,oneof:"message"},{no:5,name:"update",kind:"message",T:ParticipantUpdate,oneof:"message"},{no:6,name:"track_published",kind:"message",T:TrackPublishedResponse,oneof:"message"},{no:8,name:"leave",kind:"message",T:LeaveRequest,oneof:"message"},{no:9,name:"mute",kind:"message",T:MuteTrackRequest,oneof:"message"},{no:10,name:"speakers_changed",kind:"message",T:SpeakersChanged,oneof:"message"},{no:11,name:"room_update",kind:"message",T:RoomUpdate,oneof:"message"},{no:12,name:"connection_quality",kind:"message",T:ConnectionQualityUpdate,oneof:"message"},{no:13,name:"stream_state_update",kind:"message",T:StreamStateUpdate,oneof:"message"},{no:14,name:"subscribed_quality_update",kind:"message",T:SubscribedQualityUpdate,oneof:"message"},{no:15,name:"subscription_permission_update",kind:"message",T:SubscriptionPermissionUpdate,oneof:"message"},{no:16,name:"refresh_token",kind:"scalar",T:9,oneof:"message"},{no:17,name:"track_unpublished",kind:"message",T:TrackUnpublishedResponse,oneof:"message"},{no:18,name:"pong",kind:"scalar",T:3,oneof:"message"},{no:19,name:"reconnect",kind:"message",T:ReconnectResponse,oneof:"message"},{no:20,name:"pong_resp",kind:"message",T:Pong,oneof:"message"},{no:21,name:"subscription_response",kind:"message",T:SubscriptionResponse,oneof:"message"}]),SimulcastCodec=proto3.makeMessageType("livekit.SimulcastCodec",()=>[{no:1,name:"codec",kind:"scalar",T:9},{no:2,name:"cid",kind:"scalar",T:9}]),AddTrackRequest=proto3.makeMessageType("livekit.AddTrackRequest",()=>[{no:1,name:"cid",kind:"scalar",T:9},{no:2,name:"name",kind:"scalar",T:9},{no:3,name:"type",kind:"enum",T:proto3.getEnumType(TrackType)},{no:4,name:"width",kind:"scalar",T:13},{no:5,name:"height",kind:"scalar",T:13},{no:6,name:"muted",kind:"scalar",T:8},{no:7,name:"disable_dtx",kind:"scalar",T:8},{no:8,name:"source",kind:"enum",T:proto3.getEnumType(TrackSource)},{no:9,name:"layers",kind:"message",T:VideoLayer,repeated:!0},{no:10,name:"simulcast_codecs",kind:"message",T:SimulcastCodec,repeated:!0},{no:11,name:"sid",kind:"scalar",T:9},{no:12,name:"stereo",kind:"scalar",T:8},{no:13,name:"disable_red",kind:"scalar",T:8},{no:14,name:"encryption",kind:"enum",T:proto3.getEnumType(Encryption_Type)},{no:15,name:"stream",kind:"scalar",T:9}]),TrickleRequest=proto3.makeMessageType("livekit.TrickleRequest",()=>[{no:1,name:"candidateInit",kind:"scalar",T:9},{no:2,name:"target",kind:"enum",T:proto3.getEnumType(SignalTarget)}]),MuteTrackRequest=proto3.makeMessageType("livekit.MuteTrackRequest",()=>[{no:1,name:"sid",kind:"scalar",T:9},{no:2,name:"muted",kind:"scalar",T:8}]),JoinResponse=proto3.makeMessageType("livekit.JoinResponse",()=>[{no:1,name:"room",kind:"message",T:Room$1},{no:2,name:"participant",kind:"message",T:ParticipantInfo},{no:3,name:"other_participants",kind:"message",T:ParticipantInfo,repeated:!0},{no:4,name:"server_version",kind:"scalar",T:9},{no:5,name:"ice_servers",kind:"message",T:ICEServer,repeated:!0},{no:6,name:"subscriber_primary",kind:"scalar",T:8},{no:7,name:"alternative_url",kind:"scalar",T:9},{no:8,name:"client_configuration",kind:"message",T:ClientConfiguration},{no:9,name:"server_region",kind:"scalar",T:9},{no:10,name:"ping_timeout",kind:"scalar",T:5},{no:11,name:"ping_interval",kind:"scalar",T:5},{no:12,name:"server_info",kind:"message",T:ServerInfo},{no:13,name:"sif_trailer",kind:"scalar",T:12}]),ReconnectResponse=proto3.makeMessageType("livekit.ReconnectResponse",()=>[{no:1,name:"ice_servers",kind:"message",T:ICEServer,repeated:!0},{no:2,name:"client_configuration",kind:"message",T:ClientConfiguration}]),TrackPublishedResponse=proto3.makeMessageType("livekit.TrackPublishedResponse",()=>[{no:1,name:"cid",kind:"scalar",T:9},{no:2,name:"track",kind:"message",T:TrackInfo}]),TrackUnpublishedResponse=proto3.makeMessageType("livekit.TrackUnpublishedResponse",()=>[{no:1,name:"track_sid",kind:"scalar",T:9}]),SessionDescription=proto3.makeMessageType("livekit.SessionDescription",()=>[{no:1,name:"type",kind:"scalar",T:9},{no:2,name:"sdp",kind:"scalar",T:9}]),ParticipantUpdate=proto3.makeMessageType("livekit.ParticipantUpdate",()=>[{no:1,name:"participants",kind:"message",T:ParticipantInfo,repeated:!0}]),UpdateSubscription=proto3.makeMessageType("livekit.UpdateSubscription",()=>[{no:1,name:"track_sids",kind:"scalar",T:9,repeated:!0},{no:2,name:"subscribe",kind:"scalar",T:8},{no:3,name:"participant_tracks",kind:"message",T:ParticipantTracks,repeated:!0}]),UpdateTrackSettings=proto3.makeMessageType("livekit.UpdateTrackSettings",()=>[{no:1,name:"track_sids",kind:"scalar",T:9,repeated:!0},{no:3,name:"disabled",kind:"scalar",T:8},{no:4,name:"quality",kind:"enum",T:proto3.getEnumType(VideoQuality$1)},{no:5,name:"width",kind:"scalar",T:13},{no:6,name:"height",kind:"scalar",T:13},{no:7,name:"fps",kind:"scalar",T:13},{no:8,name:"priority",kind:"scalar",T:13}]),LeaveRequest=proto3.makeMessageType("livekit.LeaveRequest",()=>[{no:1,name:"can_reconnect",kind:"scalar",T:8},{no:2,name:"reason",kind:"enum",T:proto3.getEnumType(DisconnectReason)},{no:3,name:"action",kind:"enum",T:proto3.getEnumType(LeaveRequest_Action)},{no:4,name:"regions",kind:"message",T:RegionSettings}]),LeaveRequest_Action=proto3.makeEnum("livekit.LeaveRequest.Action",[{no:0,name:"DISCONNECT"},{no:1,name:"RESUME"},{no:2,name:"RECONNECT"}]),UpdateVideoLayers=proto3.makeMessageType("livekit.UpdateVideoLayers",()=>[{no:1,name:"track_sid",kind:"scalar",T:9},{no:2,name:"layers",kind:"message",T:VideoLayer,repeated:!0}]),UpdateParticipantMetadata=proto3.makeMessageType("livekit.UpdateParticipantMetadata",()=>[{no:1,name:"metadata",kind:"scalar",T:9},{no:2,name:"name",kind:"scalar",T:9}]),ICEServer=proto3.makeMessageType("livekit.ICEServer",()=>[{no:1,name:"urls",kind:"scalar",T:9,repeated:!0},{no:2,name:"username",kind:"scalar",T:9},{no:3,name:"credential",kind:"scalar",T:9}]),SpeakersChanged=proto3.makeMessageType("livekit.SpeakersChanged",()=>[{no:1,name:"speakers",kind:"message",T:SpeakerInfo,repeated:!0}]),RoomUpdate=proto3.makeMessageType("livekit.RoomUpdate",()=>[{no:1,name:"room",kind:"message",T:Room$1}]),ConnectionQualityInfo=proto3.makeMessageType("livekit.ConnectionQualityInfo",()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:2,name:"quality",kind:"enum",T:proto3.getEnumType(ConnectionQuality$1)},{no:3,name:"score",kind:"scalar",T:2}]),ConnectionQualityUpdate=proto3.makeMessageType("livekit.ConnectionQualityUpdate",()=>[{no:1,name:"updates",kind:"message",T:ConnectionQualityInfo,repeated:!0}]),StreamStateInfo=proto3.makeMessageType("livekit.StreamStateInfo",()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:2,name:"track_sid",kind:"scalar",T:9},{no:3,name:"state",kind:"enum",T:proto3.getEnumType(StreamState)}]),StreamStateUpdate=proto3.makeMessageType("livekit.StreamStateUpdate",()=>[{no:1,name:"stream_states",kind:"message",T:StreamStateInfo,repeated:!0}]),SubscribedQuality=proto3.makeMessageType("livekit.SubscribedQuality",()=>[{no:1,name:"quality",kind:"enum",T:proto3.getEnumType(VideoQuality$1)},{no:2,name:"enabled",kind:"scalar",T:8}]),SubscribedCodec=proto3.makeMessageType("livekit.SubscribedCodec",()=>[{no:1,name:"codec",kind:"scalar",T:9},{no:2,name:"qualities",kind:"message",T:SubscribedQuality,repeated:!0}]),SubscribedQualityUpdate=proto3.makeMessageType("livekit.SubscribedQualityUpdate",()=>[{no:1,name:"track_sid",kind:"scalar",T:9},{no:2,name:"subscribed_qualities",kind:"message",T:SubscribedQuality,repeated:!0},{no:3,name:"subscribed_codecs",kind:"message",T:SubscribedCodec,repeated:!0}]),TrackPermission=proto3.makeMessageType("livekit.TrackPermission",()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:2,name:"all_tracks",kind:"scalar",T:8},{no:3,name:"track_sids",kind:"scalar",T:9,repeated:!0},{no:4,name:"participant_identity",kind:"scalar",T:9}]),SubscriptionPermission=proto3.makeMessageType("livekit.SubscriptionPermission",()=>[{no:1,name:"all_participants",kind:"scalar",T:8},{no:2,name:"track_permissions",kind:"message",T:TrackPermission,repeated:!0}]),SubscriptionPermissionUpdate=proto3.makeMessageType("livekit.SubscriptionPermissionUpdate",()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:2,name:"track_sid",kind:"scalar",T:9},{no:3,name:"allowed",kind:"scalar",T:8}]),SyncState=proto3.makeMessageType("livekit.SyncState",()=>[{no:1,name:"answer",kind:"message",T:SessionDescription},{no:2,name:"subscription",kind:"message",T:UpdateSubscription},{no:3,name:"publish_tracks",kind:"message",T:TrackPublishedResponse,repeated:!0},{no:4,name:"data_channels",kind:"message",T:DataChannelInfo,repeated:!0},{no:5,name:"offer",kind:"message",T:SessionDescription},{no:6,name:"track_sids_disabled",kind:"scalar",T:9,repeated:!0}]),DataChannelInfo=proto3.makeMessageType("livekit.DataChannelInfo",()=>[{no:1,name:"label",kind:"scalar",T:9},{no:2,name:"id",kind:"scalar",T:13},{no:3,name:"target",kind:"enum",T:proto3.getEnumType(SignalTarget)}]),SimulateScenario=proto3.makeMessageType("livekit.SimulateScenario",()=>[{no:1,name:"speaker_update",kind:"scalar",T:5,oneof:"scenario"},{no:2,name:"node_failure",kind:"scalar",T:8,oneof:"scenario"},{no:3,name:"migration",kind:"scalar",T:8,oneof:"scenario"},{no:4,name:"server_leave",kind:"scalar",T:8,oneof:"scenario"},{no:5,name:"switch_candidate_protocol",kind:"enum",T:proto3.getEnumType(CandidateProtocol),oneof:"scenario"},{no:6,name:"subscriber_bandwidth",kind:"scalar",T:3,oneof:"scenario"},{no:7,name:"disconnect_signal_on_resume",kind:"scalar",T:8,oneof:"scenario"},{no:8,name:"disconnect_signal_on_resume_no_messages",kind:"scalar",T:8,oneof:"scenario"}]),Ping=proto3.makeMessageType("livekit.Ping",()=>[{no:1,name:"timestamp",kind:"scalar",T:3},{no:2,name:"rtt",kind:"scalar",T:3}]),Pong=proto3.makeMessageType("livekit.Pong",()=>[{no:1,name:"last_ping_timestamp",kind:"scalar",T:3},{no:2,name:"timestamp",kind:"scalar",T:3}]),RegionSettings=proto3.makeMessageType("livekit.RegionSettings",()=>[{no:1,name:"regions",kind:"message",T:RegionInfo,repeated:!0}]),RegionInfo=proto3.makeMessageType("livekit.RegionInfo",()=>[{no:1,name:"region",kind:"scalar",T:9},{no:2,name:"url",kind:"scalar",T:9},{no:3,name:"distance",kind:"scalar",T:3}]),SubscriptionResponse=proto3.makeMessageType("livekit.SubscriptionResponse",()=>[{no:1,name:"track_sid",kind:"scalar",T:9},{no:2,name:"err",kind:"enum",T:proto3.getEnumType(SubscriptionError)}]),IngressInput=proto3.makeEnum("livekit.IngressInput",[{no:0,name:"RTMP_INPUT"},{no:1,name:"WHIP_INPUT"},{no:2,name:"URL_INPUT"}]),IngressAudioEncodingPreset=proto3.makeEnum("livekit.IngressAudioEncodingPreset",[{no:0,name:"OPUS_STEREO_96KBPS"},{no:1,name:"OPUS_MONO_64KBS"}]),IngressVideoEncodingPreset=proto3.makeEnum("livekit.IngressVideoEncodingPreset",[{no:0,name:"H264_720P_30FPS_3_LAYERS"},{no:1,name:"H264_1080P_30FPS_3_LAYERS"},{no:2,name:"H264_540P_25FPS_2_LAYERS"},{no:3,name:"H264_720P_30FPS_1_LAYER"},{no:4,name:"H264_1080P_30FPS_1_LAYER"},{no:5,name:"H264_720P_30FPS_3_LAYERS_HIGH_MOTION"},{no:6,name:"H264_1080P_30FPS_3_LAYERS_HIGH_MOTION"},{no:7,name:"H264_540P_25FPS_2_LAYERS_HIGH_MOTION"},{no:8,name:"H264_720P_30FPS_1_LAYER_HIGH_MOTION"},{no:9,name:"H264_1080P_30FPS_1_LAYER_HIGH_MOTION"}]);proto3.makeMessageType("livekit.CreateIngressRequest",()=>[{no:1,name:"input_type",kind:"enum",T:proto3.getEnumType(IngressInput)},{no:9,name:"url",kind:"scalar",T:9},{no:2,name:"name",kind:"scalar",T:9},{no:3,name:"room_name",kind:"scalar",T:9},{no:4,name:"participant_identity",kind:"scalar",T:9},{no:5,name:"participant_name",kind:"scalar",T:9},{no:10,name:"participant_metadata",kind:"scalar",T:9},{no:8,name:"bypass_transcoding",kind:"scalar",T:8},{no:6,name:"audio",kind:"message",T:IngressAudioOptions},{no:7,name:"video",kind:"message",T:IngressVideoOptions}]);const IngressAudioOptions=proto3.makeMessageType("livekit.IngressAudioOptions",()=>[{no:1,name:"name",kind:"scalar",T:9},{no:2,name:"source",kind:"enum",T:proto3.getEnumType(TrackSource)},{no:3,name:"preset",kind:"enum",T:proto3.getEnumType(IngressAudioEncodingPreset),oneof:"encoding_options"},{no:4,name:"options",kind:"message",T:IngressAudioEncodingOptions,oneof:"encoding_options"}]),IngressVideoOptions=proto3.makeMessageType("livekit.IngressVideoOptions",()=>[{no:1,name:"name",kind:"scalar",T:9},{no:2,name:"source",kind:"enum",T:proto3.getEnumType(TrackSource)},{no:3,name:"preset",kind:"enum",T:proto3.getEnumType(IngressVideoEncodingPreset),oneof:"encoding_options"},{no:4,name:"options",kind:"message",T:IngressVideoEncodingOptions,oneof:"encoding_options"}]),IngressAudioEncodingOptions=proto3.makeMessageType("livekit.IngressAudioEncodingOptions",()=>[{no:1,name:"audio_codec",kind:"enum",T:proto3.getEnumType(AudioCodec)},{no:2,name:"bitrate",kind:"scalar",T:13},{no:3,name:"disable_dtx",kind:"scalar",T:8},{no:4,name:"channels",kind:"scalar",T:13}]),IngressVideoEncodingOptions=proto3.makeMessageType("livekit.IngressVideoEncodingOptions",()=>[{no:1,name:"video_codec",kind:"enum",T:proto3.getEnumType(VideoCodec)},{no:2,name:"frame_rate",kind:"scalar",T:1},{no:3,name:"layers",kind:"message",T:VideoLayer,repeated:!0}]),IngressInfo=proto3.makeMessageType("livekit.IngressInfo",()=>[{no:1,name:"ingress_id",kind:"scalar",T:9},{no:2,name:"name",kind:"scalar",T:9},{no:3,name:"stream_key",kind:"scalar",T:9},{no:4,name:"url",kind:"scalar",T:9},{no:5,name:"input_type",kind:"enum",T:proto3.getEnumType(IngressInput)},{no:13,name:"bypass_transcoding",kind:"scalar",T:8},{no:6,name:"audio",kind:"message",T:IngressAudioOptions},{no:7,name:"video",kind:"message",T:IngressVideoOptions},{no:8,name:"room_name",kind:"scalar",T:9},{no:9,name:"participant_identity",kind:"scalar",T:9},{no:10,name:"participant_name",kind:"scalar",T:9},{no:14,name:"participant_metadata",kind:"scalar",T:9},{no:11,name:"reusable",kind:"scalar",T:8},{no:12,name:"state",kind:"message",T:IngressState}]),IngressState=proto3.makeMessageType("livekit.IngressState",()=>[{no:1,name:"status",kind:"enum",T:proto3.getEnumType(IngressState_Status)},{no:2,name:"error",kind:"scalar",T:9},{no:3,name:"video",kind:"message",T:InputVideoState},{no:4,name:"audio",kind:"message",T:InputAudioState},{no:5,name:"room_id",kind:"scalar",T:9},{no:7,name:"started_at",kind:"scalar",T:3},{no:8,name:"ended_at",kind:"scalar",T:3},{no:9,name:"resource_id",kind:"scalar",T:9},{no:6,name:"tracks",kind:"message",T:TrackInfo,repeated:!0}]),IngressState_Status=proto3.makeEnum("livekit.IngressState.Status",[{no:0,name:"ENDPOINT_INACTIVE"},{no:1,name:"ENDPOINT_BUFFERING"},{no:2,name:"ENDPOINT_PUBLISHING"},{no:3,name:"ENDPOINT_ERROR"},{no:4,name:"ENDPOINT_COMPLETE"}]),InputVideoState=proto3.makeMessageType("livekit.InputVideoState",()=>[{no:1,name:"mime_type",kind:"scalar",T:9},{no:2,name:"average_bitrate",kind:"scalar",T:13},{no:3,name:"width",kind:"scalar",T:13},{no:4,name:"height",kind:"scalar",T:13},{no:5,name:"framerate",kind:"scalar",T:1}]),InputAudioState=proto3.makeMessageType("livekit.InputAudioState",()=>[{no:1,name:"mime_type",kind:"scalar",T:9},{no:2,name:"average_bitrate",kind:"scalar",T:13},{no:3,name:"channels",kind:"scalar",T:13},{no:4,name:"sample_rate",kind:"scalar",T:13}]);proto3.makeMessageType("livekit.UpdateIngressRequest",()=>[{no:1,name:"ingress_id",kind:"scalar",T:9},{no:2,name:"name",kind:"scalar",T:9},{no:3,name:"room_name",kind:"scalar",T:9},{no:4,name:"participant_identity",kind:"scalar",T:9},{no:5,name:"participant_name",kind:"scalar",T:9},{no:9,name:"participant_metadata",kind:"scalar",T:9},{no:8,name:"bypass_transcoding",kind:"scalar",T:8,opt:!0},{no:6,name:"audio",kind:"message",T:IngressAudioOptions},{no:7,name:"video",kind:"message",T:IngressVideoOptions}]);proto3.makeMessageType("livekit.ListIngressRequest",()=>[{no:1,name:"room_name",kind:"scalar",T:9},{no:2,name:"ingress_id",kind:"scalar",T:9}]);proto3.makeMessageType("livekit.ListIngressResponse",()=>[{no:1,name:"items",kind:"message",T:IngressInfo,repeated:!0}]);proto3.makeMessageType("livekit.DeleteIngressRequest",()=>[{no:1,name:"ingress_id",kind:"scalar",T:9}]);proto3.makeMessageType("livekit.WebhookEvent",()=>[{no:1,name:"event",kind:"scalar",T:9},{no:2,name:"room",kind:"message",T:Room$1},{no:3,name:"participant",kind:"message",T:ParticipantInfo},{no:9,name:"egress_info",kind:"message",T:EgressInfo},{no:10,name:"ingress_info",kind:"message",T:IngressInfo},{no:8,name:"track",kind:"message",T:TrackInfo},{no:6,name:"id",kind:"scalar",T:9},{no:7,name:"created_at",kind:"scalar",T:3},{no:11,name:"num_dropped",kind:"scalar",T:5}]);proto3.makeMessageType("livekit.CreateSIPTrunkRequest",()=>[{no:1,name:"inbound_addresses",kind:"scalar",T:9,repeated:!0},{no:2,name:"outbound_address",kind:"scalar",T:9},{no:3,name:"outbound_number",kind:"scalar",T:9},{no:4,name:"inbound_numbers_regex",kind:"scalar",T:9,repeated:!0},{no:9,name:"inbound_numbers",kind:"scalar",T:9,repeated:!0},{no:5,name:"inbound_username",kind:"scalar",T:9},{no:6,name:"inbound_password",kind:"scalar",T:9},{no:7,name:"outbound_username",kind:"scalar",T:9},{no:8,name:"outbound_password",kind:"scalar",T:9}]);const SIPTrunkInfo=proto3.makeMessageType("livekit.SIPTrunkInfo",()=>[{no:1,name:"sip_trunk_id",kind:"scalar",T:9},{no:2,name:"inbound_addresses",kind:"scalar",T:9,repeated:!0},{no:3,name:"outbound_address",kind:"scalar",T:9},{no:4,name:"outbound_number",kind:"scalar",T:9},{no:5,name:"inbound_numbers_regex",kind:"scalar",T:9,repeated:!0},{no:10,name:"inbound_numbers",kind:"scalar",T:9,repeated:!0},{no:6,name:"inbound_username",kind:"scalar",T:9},{no:7,name:"inbound_password",kind:"scalar",T:9},{no:8,name:"outbound_username",kind:"scalar",T:9},{no:9,name:"outbound_password",kind:"scalar",T:9}]);proto3.makeMessageType("livekit.ListSIPTrunkRequest",[]);proto3.makeMessageType("livekit.ListSIPTrunkResponse",()=>[{no:1,name:"items",kind:"message",T:SIPTrunkInfo,repeated:!0}]);proto3.makeMessageType("livekit.DeleteSIPTrunkRequest",()=>[{no:1,name:"sip_trunk_id",kind:"scalar",T:9}]);const SIPDispatchRuleDirect=proto3.makeMessageType("livekit.SIPDispatchRuleDirect",()=>[{no:1,name:"room_name",kind:"scalar",T:9},{no:2,name:"pin",kind:"scalar",T:9}]),SIPDispatchRuleIndividual=proto3.makeMessageType("livekit.SIPDispatchRuleIndividual",()=>[{no:1,name:"room_prefix",kind:"scalar",T:9},{no:2,name:"pin",kind:"scalar",T:9}]),SIPDispatchRule=proto3.makeMessageType("livekit.SIPDispatchRule",()=>[{no:1,name:"dispatch_rule_direct",kind:"message",T:SIPDispatchRuleDirect,oneof:"rule"},{no:2,name:"dispatch_rule_individual",kind:"message",T:SIPDispatchRuleIndividual,oneof:"rule"}]);proto3.makeMessageType("livekit.CreateSIPDispatchRuleRequest",()=>[{no:1,name:"rule",kind:"message",T:SIPDispatchRule},{no:2,name:"trunk_ids",kind:"scalar",T:9,repeated:!0},{no:3,name:"hide_phone_number",kind:"scalar",T:8}]);const SIPDispatchRuleInfo=proto3.makeMessageType("livekit.SIPDispatchRuleInfo",()=>[{no:1,name:"sip_dispatch_rule_id",kind:"scalar",T:9},{no:2,name:"rule",kind:"message",T:SIPDispatchRule},{no:3,name:"trunk_ids",kind:"scalar",T:9,repeated:!0},{no:4,name:"hide_phone_number",kind:"scalar",T:8}]);proto3.makeMessageType("livekit.ListSIPDispatchRuleRequest",[]);proto3.makeMessageType("livekit.ListSIPDispatchRuleResponse",()=>[{no:1,name:"items",kind:"message",T:SIPDispatchRuleInfo,repeated:!0}]);proto3.makeMessageType("livekit.DeleteSIPDispatchRuleRequest",()=>[{no:1,name:"sip_dispatch_rule_id",kind:"scalar",T:9}]);proto3.makeMessageType("livekit.CreateSIPParticipantRequest",()=>[{no:1,name:"sip_trunk_id",kind:"scalar",T:9},{no:2,name:"sip_call_to",kind:"scalar",T:9},{no:3,name:"room_name",kind:"scalar",T:9},{no:4,name:"participant_identity",kind:"scalar",T:9}]);proto3.makeMessageType("livekit.SIPParticipantInfo",()=>[{no:1,name:"participant_id",kind:"scalar",T:9},{no:2,name:"participant_identity",kind:"scalar",T:9},{no:3,name:"room_name",kind:"scalar",T:9}]);var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global$1<"u"?global$1:typeof self<"u"?self:{};function getDefaultExportFromCjs(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}var loglevel$1={exports:{}};(function(a){(function(c,b){a.exports?a.exports=b():c.log=b()})(commonjsGlobal,function(){var c=function(){},b="undefined",_=typeof window!==b&&typeof window.navigator!==b&&/Trident\/|MSIE /.test(window.navigator.userAgent),$=["trace","debug","info","warn","error"];function k(At,Mt){var Dt=At[Mt];if(typeof Dt.bind=="function")return Dt.bind(At);try{return Function.prototype.bind.call(Dt,At)}catch{return function(){return Function.prototype.apply.apply(Dt,[At,arguments])}}}function et(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function nt(At){return At==="debug"&&(At="log"),typeof console===b?!1:At==="trace"&&_?et:console[At]!==void 0?k(console,At):console.log!==void 0?k(console,"log"):c}function ot(At,Mt){for(var Dt=0;Dt<$.length;Dt++){var Rt=$[Dt];this[Rt]=Dt<At?c:this.methodFactory(Rt,At,Mt)}this.log=this.debug}function ht(At,Mt,Dt){return function(){typeof console!==b&&(ot.call(this,Mt,Dt),this[At].apply(this,arguments))}}function vt(At,Mt,Dt){return nt(At)||ht.apply(this,arguments)}function _t(At,Mt,Dt){var Rt=this,xt;Mt=Mt??"WARN";var Jt="loglevel";typeof At=="string"?Jt+=":"+At:typeof At=="symbol"&&(Jt=void 0);function ar(Ot){var It=($[Ot]||"silent").toUpperCase();if(!(typeof window===b||!Jt)){try{window.localStorage[Jt]=It;return}catch{}try{window.document.cookie=encodeURIComponent(Jt)+"="+It+";"}catch{}}}function nr(){var Ot;if(!(typeof window===b||!Jt)){try{Ot=window.localStorage[Jt]}catch{}if(typeof Ot===b)try{var It=window.document.cookie,ut=It.indexOf(encodeURIComponent(Jt)+"=");ut!==-1&&(Ot=/^([^;]+)/.exec(It.slice(ut))[1])}catch{}return Rt.levels[Ot]===void 0&&(Ot=void 0),Ot}}function pr(){if(!(typeof window===b||!Jt)){try{window.localStorage.removeItem(Jt);return}catch{}try{window.document.cookie=encodeURIComponent(Jt)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch{}}}Rt.name=At,Rt.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},Rt.methodFactory=Dt||vt,Rt.getLevel=function(){return xt},Rt.setLevel=function(Ot,It){if(typeof Ot=="string"&&Rt.levels[Ot.toUpperCase()]!==void 0&&(Ot=Rt.levels[Ot.toUpperCase()]),typeof Ot=="number"&&Ot>=0&&Ot<=Rt.levels.SILENT){if(xt=Ot,It!==!1&&ar(Ot),ot.call(Rt,Ot,At),typeof console===b&&Ot<Rt.levels.SILENT)return"No console available for logging"}else throw"log.setLevel() called with invalid level: "+Ot},Rt.setDefaultLevel=function(Ot){Mt=Ot,nr()||Rt.setLevel(Ot,!1)},Rt.resetLevel=function(){Rt.setLevel(Mt,!1),pr()},Rt.enableAll=function(Ot){Rt.setLevel(Rt.levels.TRACE,Ot)},Rt.disableAll=function(Ot){Rt.setLevel(Rt.levels.SILENT,Ot)};var ur=nr();ur==null&&(ur=Mt),Rt.setLevel(ur,!1)}var kt=new _t,$t={};kt.getLogger=function(Mt){if(typeof Mt!="symbol"&&typeof Mt!="string"||Mt==="")throw new TypeError("You must supply a name when creating a logger.");var Dt=$t[Mt];return Dt||(Dt=$t[Mt]=new _t(Mt,kt.getLevel(),kt.methodFactory)),Dt};var Tt=typeof window!==b?window.log:void 0;return kt.noConflict=function(){return typeof window!==b&&window.log===kt&&(window.log=Tt),kt},kt.getLoggers=function(){return $t},kt.default=kt,kt})})(loglevel$1);var loglevelExports$1=loglevel$1.exports,LogLevel;(function(a){a[a.trace=0]="trace",a[a.debug=1]="debug",a[a.info=2]="info",a[a.warn=3]="warn",a[a.error=4]="error",a[a.silent=5]="silent"})(LogLevel||(LogLevel={}));var LoggerNames;(function(a){a.Default="livekit",a.Room="livekit-room",a.Participant="livekit-participant",a.Track="livekit-track",a.Publication="livekit-track-publication",a.Engine="livekit-engine",a.Signal="livekit-signal",a.PCManager="livekit-pc-manager",a.PCTransport="livekit-pc-transport",a.E2EE="lk-e2ee"})(LoggerNames||(LoggerNames={}));let livekitLogger=loglevelExports$1.getLogger("livekit");const livekitLoggers=Object.values(LoggerNames).map(a=>loglevelExports$1.getLogger(a));livekitLogger.setDefaultLevel(LogLevel.info);function getLogger(a){const c=loglevelExports$1.getLogger(a);return c.setDefaultLevel(livekitLogger.getLevel()),c}function setLogLevel(a,c){c&&loglevelExports$1.getLogger(c).setLevel(a);for(const b of livekitLoggers)b.setLevel(a)}const workerLogger=loglevelExports$1.getLogger("lk-e2ee"),maxRetryDelay=7e3,DEFAULT_RETRY_DELAYS_IN_MS=[0,300,2*2*300,3*3*300,4*4*300,maxRetryDelay,maxRetryDelay,maxRetryDelay,maxRetryDelay,maxRetryDelay];class DefaultReconnectPolicy{constructor(c){this._retryDelays=c!==void 0?[...c]:DEFAULT_RETRY_DELAYS_IN_MS}nextRetryDelayInMs(c){if(c.retryCount>=this._retryDelays.length)return null;const b=this._retryDelays[c.retryCount];return c.retryCount<=1?b:b+Math.random()*1e3}}function __awaiter$3(a,c,b,_){function $(k){return k instanceof b?k:new b(function(et){et(k)})}return new(b||(b=Promise))(function(k,et){function nt(vt){try{ht(_.next(vt))}catch(_t){et(_t)}}function ot(vt){try{ht(_.throw(vt))}catch(_t){et(_t)}}function ht(vt){vt.done?k(vt.value):$(vt.value).then(nt,ot)}ht((_=_.apply(a,c||[])).next())})}function __values(a){var c=typeof Symbol=="function"&&Symbol.iterator,b=c&&a[c],_=0;if(b)return b.call(a);if(a&&typeof a.length=="number")return{next:function(){return a&&_>=a.length&&(a=void 0),{value:a&&a[_++],done:!a}}};throw new TypeError(c?"Object is not iterable.":"Symbol.iterator is not defined.")}function __asyncValues(a){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var c=a[Symbol.asyncIterator],b;return c?c.call(a):(a=typeof __values=="function"?__values(a):a[Symbol.iterator](),b={},_("next"),_("throw"),_("return"),b[Symbol.asyncIterator]=function(){return this},b);function _(k){b[k]=a[k]&&function(et){return new Promise(function(nt,ot){et=a[k](et),$(nt,ot,et.done,et.value)})}}function $(k,et,nt,ot){Promise.resolve(ot).then(function(ht){k({value:ht,done:nt})},et)}}typeof SuppressedError=="function"&&SuppressedError;var events$1={exports:{}},R$3=typeof Reflect=="object"?Reflect:null,ReflectApply$1=R$3&&typeof R$3.apply=="function"?R$3.apply:function a(c,b,_){return Function.prototype.apply.call(c,b,_)},ReflectOwnKeys$1;R$3&&typeof R$3.ownKeys=="function"?ReflectOwnKeys$1=R$3.ownKeys:Object.getOwnPropertySymbols?ReflectOwnKeys$1=function(c){return Object.getOwnPropertyNames(c).concat(Object.getOwnPropertySymbols(c))}:ReflectOwnKeys$1=function(c){return Object.getOwnPropertyNames(c)};function ProcessEmitWarning$1(a){console&&console.warn&&console.warn(a)}var NumberIsNaN$1=Number.isNaN||function a(c){return c!==c};function EventEmitter$1(){EventEmitter$1.init.call(this)}events$1.exports=EventEmitter$1;events$1.exports.once=once2;EventEmitter$1.EventEmitter=EventEmitter$1;EventEmitter$1.prototype._events=void 0;EventEmitter$1.prototype._eventsCount=0;EventEmitter$1.prototype._maxListeners=void 0;var defaultMaxListeners$1=10;function checkListener$1(a){if(typeof a!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof a)}Object.defineProperty(EventEmitter$1,"defaultMaxListeners",{enumerable:!0,get:function(){return defaultMaxListeners$1},set:function(a){if(typeof a!="number"||a<0||NumberIsNaN$1(a))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+a+".");defaultMaxListeners$1=a}});EventEmitter$1.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};EventEmitter$1.prototype.setMaxListeners=function a(c){if(typeof c!="number"||c<0||NumberIsNaN$1(c))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+c+".");return this._maxListeners=c,this};function _getMaxListeners$1(a){return a._maxListeners===void 0?EventEmitter$1.defaultMaxListeners:a._maxListeners}EventEmitter$1.prototype.getMaxListeners=function a(){return _getMaxListeners$1(this)};EventEmitter$1.prototype.emit=function a(c){for(var b=[],_=1;_<arguments.length;_++)b.push(arguments[_]);var $=c==="error",k=this._events;if(k!==void 0)$=$&&k.error===void 0;else if(!$)return!1;if($){var et;if(b.length>0&&(et=b[0]),et instanceof Error)throw et;var nt=new Error("Unhandled error."+(et?" ("+et.message+")":""));throw nt.context=et,nt}var ot=k[c];if(ot===void 0)return!1;if(typeof ot=="function")ReflectApply$1(ot,this,b);else for(var ht=ot.length,vt=arrayClone$1(ot,ht),_=0;_<ht;++_)ReflectApply$1(vt[_],this,b);return!0};function _addListener$1(a,c,b,_){var $,k,et;if(checkListener$1(b),k=a._events,k===void 0?(k=a._events=Object.create(null),a._eventsCount=0):(k.newListener!==void 0&&(a.emit("newListener",c,b.listener?b.listener:b),k=a._events),et=k[c]),et===void 0)et=k[c]=b,++a._eventsCount;else if(typeof et=="function"?et=k[c]=_?[b,et]:[et,b]:_?et.unshift(b):et.push(b),$=_getMaxListeners$1(a),$>0&&et.length>$&&!et.warned){et.warned=!0;var nt=new Error("Possible EventEmitter memory leak detected. "+et.length+" "+String(c)+" listeners added. Use emitter.setMaxListeners() to increase limit");nt.name="MaxListenersExceededWarning",nt.emitter=a,nt.type=c,nt.count=et.length,ProcessEmitWarning$1(nt)}return a}EventEmitter$1.prototype.addListener=function a(c,b){return _addListener$1(this,c,b,!1)};EventEmitter$1.prototype.on=EventEmitter$1.prototype.addListener;EventEmitter$1.prototype.prependListener=function a(c,b){return _addListener$1(this,c,b,!0)};function onceWrapper$1(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function _onceWrap$1(a,c,b){var _={fired:!1,wrapFn:void 0,target:a,type:c,listener:b},$=onceWrapper$1.bind(_);return $.listener=b,_.wrapFn=$,$}EventEmitter$1.prototype.once=function a(c,b){return checkListener$1(b),this.on(c,_onceWrap$1(this,c,b)),this};EventEmitter$1.prototype.prependOnceListener=function a(c,b){return checkListener$1(b),this.prependListener(c,_onceWrap$1(this,c,b)),this};EventEmitter$1.prototype.removeListener=function a(c,b){var _,$,k,et,nt;if(checkListener$1(b),$=this._events,$===void 0)return this;if(_=$[c],_===void 0)return this;if(_===b||_.listener===b)--this._eventsCount===0?this._events=Object.create(null):(delete $[c],$.removeListener&&this.emit("removeListener",c,_.listener||b));else if(typeof _!="function"){for(k=-1,et=_.length-1;et>=0;et--)if(_[et]===b||_[et].listener===b){nt=_[et].listener,k=et;break}if(k<0)return this;k===0?_.shift():spliceOne$1(_,k),_.length===1&&($[c]=_[0]),$.removeListener!==void 0&&this.emit("removeListener",c,nt||b)}return this};EventEmitter$1.prototype.off=EventEmitter$1.prototype.removeListener;EventEmitter$1.prototype.removeAllListeners=function a(c){var b,_,$;if(_=this._events,_===void 0)return this;if(_.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):_[c]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete _[c]),this;if(arguments.length===0){var k=Object.keys(_),et;for($=0;$<k.length;++$)et=k[$],et!=="removeListener"&&this.removeAllListeners(et);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(b=_[c],typeof b=="function")this.removeListener(c,b);else if(b!==void 0)for($=b.length-1;$>=0;$--)this.removeListener(c,b[$]);return this};function _listeners$1(a,c,b){var _=a._events;if(_===void 0)return[];var $=_[c];return $===void 0?[]:typeof $=="function"?b?[$.listener||$]:[$]:b?unwrapListeners$1($):arrayClone$1($,$.length)}EventEmitter$1.prototype.listeners=function a(c){return _listeners$1(this,c,!0)};EventEmitter$1.prototype.rawListeners=function a(c){return _listeners$1(this,c,!1)};EventEmitter$1.listenerCount=function(a,c){return typeof a.listenerCount=="function"?a.listenerCount(c):listenerCount$1.call(a,c)};EventEmitter$1.prototype.listenerCount=listenerCount$1;function listenerCount$1(a){var c=this._events;if(c!==void 0){var b=c[a];if(typeof b=="function")return 1;if(b!==void 0)return b.length}return 0}EventEmitter$1.prototype.eventNames=function a(){return this._eventsCount>0?ReflectOwnKeys$1(this._events):[]};function arrayClone$1(a,c){for(var b=new Array(c),_=0;_<c;++_)b[_]=a[_];return b}function spliceOne$1(a,c){for(;c+1<a.length;c++)a[c]=a[c+1];a.pop()}function unwrapListeners$1(a){for(var c=new Array(a.length),b=0;b<c.length;++b)c[b]=a[b].listener||a[b];return c}function once2(a,c){return new Promise(function(b,_){function $(et){a.removeListener(c,k),_(et)}function k(){typeof a.removeListener=="function"&&a.removeListener("error",$),b([].slice.call(arguments))}eventTargetAgnosticAddListener$1(a,c,k,{once:!0}),c!=="error"&&addErrorHandlerIfEventEmitter$1(a,$,{once:!0})})}function addErrorHandlerIfEventEmitter$1(a,c,b){typeof a.on=="function"&&eventTargetAgnosticAddListener$1(a,"error",c,b)}function eventTargetAgnosticAddListener$1(a,c,b,_){if(typeof a.on=="function")_.once?a.once(c,b):a.on(c,b);else if(typeof a.addEventListener=="function")a.addEventListener(c,function $(k){_.once&&a.removeEventListener(c,$),b(k)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof a)}var eventsExports$1=events$1.exports;let logDisabled_=!0,deprecationWarnings_=!0;function extractVersion(a,c,b){const _=a.match(c);return _&&_.length>=b&&parseInt(_[b],10)}function wrapPeerConnectionEvent(a,c,b){if(!a.RTCPeerConnection)return;const _=a.RTCPeerConnection.prototype,$=_.addEventListener;_.addEventListener=function(et,nt){if(et!==c)return $.apply(this,arguments);const ot=ht=>{const vt=b(ht);vt&&(nt.handleEvent?nt.handleEvent(vt):nt(vt))};return this._eventMap=this._eventMap||{},this._eventMap[c]||(this._eventMap[c]=new Map),this._eventMap[c].set(nt,ot),$.apply(this,[et,ot])};const k=_.removeEventListener;_.removeEventListener=function(et,nt){if(et!==c||!this._eventMap||!this._eventMap[c])return k.apply(this,arguments);if(!this._eventMap[c].has(nt))return k.apply(this,arguments);const ot=this._eventMap[c].get(nt);return this._eventMap[c].delete(nt),this._eventMap[c].size===0&&delete this._eventMap[c],Object.keys(this._eventMap).length===0&&delete this._eventMap,k.apply(this,[et,ot])},Object.defineProperty(_,"on"+c,{get(){return this["_on"+c]},set(et){this["_on"+c]&&(this.removeEventListener(c,this["_on"+c]),delete this["_on"+c]),et&&this.addEventListener(c,this["_on"+c]=et)},enumerable:!0,configurable:!0})}function disableLog(a){return typeof a!="boolean"?new Error("Argument type: "+typeof a+". Please use a boolean."):(logDisabled_=a,a?"adapter.js logging disabled":"adapter.js logging enabled")}function disableWarnings(a){return typeof a!="boolean"?new Error("Argument type: "+typeof a+". Please use a boolean."):(deprecationWarnings_=!a,"adapter.js deprecation warnings "+(a?"disabled":"enabled"))}function log$1(){if(typeof window=="object"){if(logDisabled_)return;typeof console<"u"&&typeof console.log=="function"&&console.log.apply(console,arguments)}}function deprecated(a,c){deprecationWarnings_&&console.warn(a+" is deprecated, please use "+c+" instead.")}function detectBrowser(a){const c={browser:null,version:null};if(typeof a>"u"||!a.navigator||!a.navigator.userAgent)return c.browser="Not a browser.",c;const{navigator:b}=a;if(b.mozGetUserMedia)c.browser="firefox",c.version=extractVersion(b.userAgent,/Firefox\/(\d+)\./,1);else if(b.webkitGetUserMedia||a.isSecureContext===!1&&a.webkitRTCPeerConnection)c.browser="chrome",c.version=extractVersion(b.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else if(a.RTCPeerConnection&&b.userAgent.match(/AppleWebKit\/(\d+)\./))c.browser="safari",c.version=extractVersion(b.userAgent,/AppleWebKit\/(\d+)\./,1),c.supportsUnifiedPlan=a.RTCRtpTransceiver&&"currentDirection"in a.RTCRtpTransceiver.prototype;else return c.browser="Not a supported browser.",c;return c}function isObject$7(a){return Object.prototype.toString.call(a)==="[object Object]"}function compactObject(a){return isObject$7(a)?Object.keys(a).reduce(function(c,b){const _=isObject$7(a[b]),$=_?compactObject(a[b]):a[b],k=_&&!Object.keys($).length;return $===void 0||k?c:Object.assign(c,{[b]:$})},{}):a}function walkStats(a,c,b){!c||b.has(c.id)||(b.set(c.id,c),Object.keys(c).forEach(_=>{_.endsWith("Id")?walkStats(a,a.get(c[_]),b):_.endsWith("Ids")&&c[_].forEach($=>{walkStats(a,a.get($),b)})}))}function filterStats(a,c,b){const _=b?"outbound-rtp":"inbound-rtp",$=new Map;if(c===null)return $;const k=[];return a.forEach(et=>{et.type==="track"&&et.trackIdentifier===c.id&&k.push(et)}),k.forEach(et=>{a.forEach(nt=>{nt.type===_&&nt.trackId===et.id&&walkStats(a,nt,$)})}),$}const logging=log$1;function shimGetUserMedia$2(a,c){const b=a&&a.navigator;if(!b.mediaDevices)return;const _=function(nt){if(typeof nt!="object"||nt.mandatory||nt.optional)return nt;const ot={};return Object.keys(nt).forEach(ht=>{if(ht==="require"||ht==="advanced"||ht==="mediaSource")return;const vt=typeof nt[ht]=="object"?nt[ht]:{ideal:nt[ht]};vt.exact!==void 0&&typeof vt.exact=="number"&&(vt.min=vt.max=vt.exact);const _t=function(kt,$t){return kt?kt+$t.charAt(0).toUpperCase()+$t.slice(1):$t==="deviceId"?"sourceId":$t};if(vt.ideal!==void 0){ot.optional=ot.optional||[];let kt={};typeof vt.ideal=="number"?(kt[_t("min",ht)]=vt.ideal,ot.optional.push(kt),kt={},kt[_t("max",ht)]=vt.ideal,ot.optional.push(kt)):(kt[_t("",ht)]=vt.ideal,ot.optional.push(kt))}vt.exact!==void 0&&typeof vt.exact!="number"?(ot.mandatory=ot.mandatory||{},ot.mandatory[_t("",ht)]=vt.exact):["min","max"].forEach(kt=>{vt[kt]!==void 0&&(ot.mandatory=ot.mandatory||{},ot.mandatory[_t(kt,ht)]=vt[kt])})}),nt.advanced&&(ot.optional=(ot.optional||[]).concat(nt.advanced)),ot},$=function(nt,ot){if(c.version>=61)return ot(nt);if(nt=JSON.parse(JSON.stringify(nt)),nt&&typeof nt.audio=="object"){const ht=function(vt,_t,kt){_t in vt&&!(kt in vt)&&(vt[kt]=vt[_t],delete vt[_t])};nt=JSON.parse(JSON.stringify(nt)),ht(nt.audio,"autoGainControl","googAutoGainControl"),ht(nt.audio,"noiseSuppression","googNoiseSuppression"),nt.audio=_(nt.audio)}if(nt&&typeof nt.video=="object"){let ht=nt.video.facingMode;ht=ht&&(typeof ht=="object"?ht:{ideal:ht});const vt=c.version<66;if(ht&&(ht.exact==="user"||ht.exact==="environment"||ht.ideal==="user"||ht.ideal==="environment")&&!(b.mediaDevices.getSupportedConstraints&&b.mediaDevices.getSupportedConstraints().facingMode&&!vt)){delete nt.video.facingMode;let _t;if(ht.exact==="environment"||ht.ideal==="environment"?_t=["back","rear"]:(ht.exact==="user"||ht.ideal==="user")&&(_t=["front"]),_t)return b.mediaDevices.enumerateDevices().then(kt=>{kt=kt.filter(Tt=>Tt.kind==="videoinput");let $t=kt.find(Tt=>_t.some(At=>Tt.label.toLowerCase().includes(At)));return!$t&&kt.length&&_t.includes("back")&&($t=kt[kt.length-1]),$t&&(nt.video.deviceId=ht.exact?{exact:$t.deviceId}:{ideal:$t.deviceId}),nt.video=_(nt.video),logging("chrome: "+JSON.stringify(nt)),ot(nt)})}nt.video=_(nt.video)}return logging("chrome: "+JSON.stringify(nt)),ot(nt)},k=function(nt){return c.version>=64?nt:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[nt.name]||nt.name,message:nt.message,constraint:nt.constraint||nt.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}},et=function(nt,ot,ht){$(nt,vt=>{b.webkitGetUserMedia(vt,ot,_t=>{ht&&ht(k(_t))})})};if(b.getUserMedia=et.bind(b),b.mediaDevices.getUserMedia){const nt=b.mediaDevices.getUserMedia.bind(b.mediaDevices);b.mediaDevices.getUserMedia=function(ot){return $(ot,ht=>nt(ht).then(vt=>{if(ht.audio&&!vt.getAudioTracks().length||ht.video&&!vt.getVideoTracks().length)throw vt.getTracks().forEach(_t=>{_t.stop()}),new DOMException("","NotFoundError");return vt},vt=>Promise.reject(k(vt))))}}}function shimGetDisplayMedia$1(a,c){if(!(a.navigator.mediaDevices&&"getDisplayMedia"in a.navigator.mediaDevices)&&a.navigator.mediaDevices){if(typeof c!="function"){console.error("shimGetDisplayMedia: getSourceId argument is not a function");return}a.navigator.mediaDevices.getDisplayMedia=function(_){return c(_).then($=>{const k=_.video&&_.video.width,et=_.video&&_.video.height,nt=_.video&&_.video.frameRate;return _.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:$,maxFrameRate:nt||3}},k&&(_.video.mandatory.maxWidth=k),et&&(_.video.mandatory.maxHeight=et),a.navigator.mediaDevices.getUserMedia(_)})}}}function shimMediaStream(a){a.MediaStream=a.MediaStream||a.webkitMediaStream}function shimOnTrack$1(a){if(typeof a=="object"&&a.RTCPeerConnection&&!("ontrack"in a.RTCPeerConnection.prototype)){Object.defineProperty(a.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(b){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=b)},enumerable:!0,configurable:!0});const c=a.RTCPeerConnection.prototype.setRemoteDescription;a.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=_=>{_.stream.addEventListener("addtrack",$=>{let k;a.RTCPeerConnection.prototype.getReceivers?k=this.getReceivers().find(nt=>nt.track&&nt.track.id===$.track.id):k={track:$.track};const et=new Event("track");et.track=$.track,et.receiver=k,et.transceiver={receiver:k},et.streams=[_.stream],this.dispatchEvent(et)}),_.stream.getTracks().forEach($=>{let k;a.RTCPeerConnection.prototype.getReceivers?k=this.getReceivers().find(nt=>nt.track&&nt.track.id===$.id):k={track:$};const et=new Event("track");et.track=$,et.receiver=k,et.transceiver={receiver:k},et.streams=[_.stream],this.dispatchEvent(et)})},this.addEventListener("addstream",this._ontrackpoly)),c.apply(this,arguments)}}else wrapPeerConnectionEvent(a,"track",c=>(c.transceiver||Object.defineProperty(c,"transceiver",{value:{receiver:c.receiver}}),c))}function shimGetSendersWithDtmf(a){if(typeof a=="object"&&a.RTCPeerConnection&&!("getSenders"in a.RTCPeerConnection.prototype)&&"createDTMFSender"in a.RTCPeerConnection.prototype){const c=function($,k){return{track:k,get dtmf(){return this._dtmf===void 0&&(k.kind==="audio"?this._dtmf=$.createDTMFSender(k):this._dtmf=null),this._dtmf},_pc:$}};if(!a.RTCPeerConnection.prototype.getSenders){a.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const $=a.RTCPeerConnection.prototype.addTrack;a.RTCPeerConnection.prototype.addTrack=function(nt,ot){let ht=$.apply(this,arguments);return ht||(ht=c(this,nt),this._senders.push(ht)),ht};const k=a.RTCPeerConnection.prototype.removeTrack;a.RTCPeerConnection.prototype.removeTrack=function(nt){k.apply(this,arguments);const ot=this._senders.indexOf(nt);ot!==-1&&this._senders.splice(ot,1)}}const b=a.RTCPeerConnection.prototype.addStream;a.RTCPeerConnection.prototype.addStream=function(k){this._senders=this._senders||[],b.apply(this,[k]),k.getTracks().forEach(et=>{this._senders.push(c(this,et))})};const _=a.RTCPeerConnection.prototype.removeStream;a.RTCPeerConnection.prototype.removeStream=function(k){this._senders=this._senders||[],_.apply(this,[k]),k.getTracks().forEach(et=>{const nt=this._senders.find(ot=>ot.track===et);nt&&this._senders.splice(this._senders.indexOf(nt),1)})}}else if(typeof a=="object"&&a.RTCPeerConnection&&"getSenders"in a.RTCPeerConnection.prototype&&"createDTMFSender"in a.RTCPeerConnection.prototype&&a.RTCRtpSender&&!("dtmf"in a.RTCRtpSender.prototype)){const c=a.RTCPeerConnection.prototype.getSenders;a.RTCPeerConnection.prototype.getSenders=function(){const _=c.apply(this,[]);return _.forEach($=>$._pc=this),_},Object.defineProperty(a.RTCRtpSender.prototype,"dtmf",{get(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function shimGetStats(a){if(!a.RTCPeerConnection)return;const c=a.RTCPeerConnection.prototype.getStats;a.RTCPeerConnection.prototype.getStats=function(){const[_,$,k]=arguments;if(arguments.length>0&&typeof _=="function")return c.apply(this,arguments);if(c.length===0&&(arguments.length===0||typeof _!="function"))return c.apply(this,[]);const et=function(ot){const ht={};return ot.result().forEach(_t=>{const kt={id:_t.id,timestamp:_t.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[_t.type]||_t.type};_t.names().forEach($t=>{kt[$t]=_t.stat($t)}),ht[kt.id]=kt}),ht},nt=function(ot){return new Map(Object.keys(ot).map(ht=>[ht,ot[ht]]))};if(arguments.length>=2){const ot=function(ht){$(nt(et(ht)))};return c.apply(this,[ot,_])}return new Promise((ot,ht)=>{c.apply(this,[function(vt){ot(nt(et(vt)))},ht])}).then($,k)}}function shimSenderReceiverGetStats(a){if(!(typeof a=="object"&&a.RTCPeerConnection&&a.RTCRtpSender&&a.RTCRtpReceiver))return;if(!("getStats"in a.RTCRtpSender.prototype)){const b=a.RTCPeerConnection.prototype.getSenders;b&&(a.RTCPeerConnection.prototype.getSenders=function(){const k=b.apply(this,[]);return k.forEach(et=>et._pc=this),k});const _=a.RTCPeerConnection.prototype.addTrack;_&&(a.RTCPeerConnection.prototype.addTrack=function(){const k=_.apply(this,arguments);return k._pc=this,k}),a.RTCRtpSender.prototype.getStats=function(){const k=this;return this._pc.getStats().then(et=>filterStats(et,k.track,!0))}}if(!("getStats"in a.RTCRtpReceiver.prototype)){const b=a.RTCPeerConnection.prototype.getReceivers;b&&(a.RTCPeerConnection.prototype.getReceivers=function(){const $=b.apply(this,[]);return $.forEach(k=>k._pc=this),$}),wrapPeerConnectionEvent(a,"track",_=>(_.receiver._pc=_.srcElement,_)),a.RTCRtpReceiver.prototype.getStats=function(){const $=this;return this._pc.getStats().then(k=>filterStats(k,$.track,!1))}}if(!("getStats"in a.RTCRtpSender.prototype&&"getStats"in a.RTCRtpReceiver.prototype))return;const c=a.RTCPeerConnection.prototype.getStats;a.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof a.MediaStreamTrack){const _=arguments[0];let $,k,et;return this.getSenders().forEach(nt=>{nt.track===_&&($?et=!0:$=nt)}),this.getReceivers().forEach(nt=>(nt.track===_&&(k?et=!0:k=nt),nt.track===_)),et||$&&k?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):$?$.getStats():k?k.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return c.apply(this,arguments)}}function shimAddTrackRemoveTrackWithNative(a){a.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(et=>this._shimmedLocalStreams[et][0])};const c=a.RTCPeerConnection.prototype.addTrack;a.RTCPeerConnection.prototype.addTrack=function(et,nt){if(!nt)return c.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const ot=c.apply(this,arguments);return this._shimmedLocalStreams[nt.id]?this._shimmedLocalStreams[nt.id].indexOf(ot)===-1&&this._shimmedLocalStreams[nt.id].push(ot):this._shimmedLocalStreams[nt.id]=[nt,ot],ot};const b=a.RTCPeerConnection.prototype.addStream;a.RTCPeerConnection.prototype.addStream=function(et){this._shimmedLocalStreams=this._shimmedLocalStreams||{},et.getTracks().forEach(ht=>{if(this.getSenders().find(_t=>_t.track===ht))throw new DOMException("Track already exists.","InvalidAccessError")});const nt=this.getSenders();b.apply(this,arguments);const ot=this.getSenders().filter(ht=>nt.indexOf(ht)===-1);this._shimmedLocalStreams[et.id]=[et].concat(ot)};const _=a.RTCPeerConnection.prototype.removeStream;a.RTCPeerConnection.prototype.removeStream=function(et){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[et.id],_.apply(this,arguments)};const $=a.RTCPeerConnection.prototype.removeTrack;a.RTCPeerConnection.prototype.removeTrack=function(et){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},et&&Object.keys(this._shimmedLocalStreams).forEach(nt=>{const ot=this._shimmedLocalStreams[nt].indexOf(et);ot!==-1&&this._shimmedLocalStreams[nt].splice(ot,1),this._shimmedLocalStreams[nt].length===1&&delete this._shimmedLocalStreams[nt]}),$.apply(this,arguments)}}function shimAddTrackRemoveTrack(a,c){if(!a.RTCPeerConnection)return;if(a.RTCPeerConnection.prototype.addTrack&&c.version>=65)return shimAddTrackRemoveTrackWithNative(a);const b=a.RTCPeerConnection.prototype.getLocalStreams;a.RTCPeerConnection.prototype.getLocalStreams=function(){const vt=b.apply(this);return this._reverseStreams=this._reverseStreams||{},vt.map(_t=>this._reverseStreams[_t.id])};const _=a.RTCPeerConnection.prototype.addStream;a.RTCPeerConnection.prototype.addStream=function(vt){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},vt.getTracks().forEach(_t=>{if(this.getSenders().find($t=>$t.track===_t))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[vt.id]){const _t=new a.MediaStream(vt.getTracks());this._streams[vt.id]=_t,this._reverseStreams[_t.id]=vt,vt=_t}_.apply(this,[vt])};const $=a.RTCPeerConnection.prototype.removeStream;a.RTCPeerConnection.prototype.removeStream=function(vt){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},$.apply(this,[this._streams[vt.id]||vt]),delete this._reverseStreams[this._streams[vt.id]?this._streams[vt.id].id:vt.id],delete this._streams[vt.id]},a.RTCPeerConnection.prototype.addTrack=function(vt,_t){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const kt=[].slice.call(arguments,1);if(kt.length!==1||!kt[0].getTracks().find(At=>At===vt))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(At=>At.track===vt))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const Tt=this._streams[_t.id];if(Tt)Tt.addTrack(vt),Promise.resolve().then(()=>{this.dispatchEvent(new Event("negotiationneeded"))});else{const At=new a.MediaStream([vt]);this._streams[_t.id]=At,this._reverseStreams[At.id]=_t,this.addStream(At)}return this.getSenders().find(At=>At.track===vt)};function k(ht,vt){let _t=vt.sdp;return Object.keys(ht._reverseStreams||[]).forEach(kt=>{const $t=ht._reverseStreams[kt],Tt=ht._streams[$t.id];_t=_t.replace(new RegExp(Tt.id,"g"),$t.id)}),new RTCSessionDescription({type:vt.type,sdp:_t})}function et(ht,vt){let _t=vt.sdp;return Object.keys(ht._reverseStreams||[]).forEach(kt=>{const $t=ht._reverseStreams[kt],Tt=ht._streams[$t.id];_t=_t.replace(new RegExp($t.id,"g"),Tt.id)}),new RTCSessionDescription({type:vt.type,sdp:_t})}["createOffer","createAnswer"].forEach(function(ht){const vt=a.RTCPeerConnection.prototype[ht],_t={[ht](){const kt=arguments;return arguments.length&&typeof arguments[0]=="function"?vt.apply(this,[Tt=>{const At=k(this,Tt);kt[0].apply(null,[At])},Tt=>{kt[1]&&kt[1].apply(null,Tt)},arguments[2]]):vt.apply(this,arguments).then(Tt=>k(this,Tt))}};a.RTCPeerConnection.prototype[ht]=_t[ht]});const nt=a.RTCPeerConnection.prototype.setLocalDescription;a.RTCPeerConnection.prototype.setLocalDescription=function(){return!arguments.length||!arguments[0].type?nt.apply(this,arguments):(arguments[0]=et(this,arguments[0]),nt.apply(this,arguments))};const ot=Object.getOwnPropertyDescriptor(a.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(a.RTCPeerConnection.prototype,"localDescription",{get(){const ht=ot.get.apply(this);return ht.type===""?ht:k(this,ht)}}),a.RTCPeerConnection.prototype.removeTrack=function(vt){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!vt._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(!(vt._pc===this))throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{};let kt;Object.keys(this._streams).forEach($t=>{this._streams[$t].getTracks().find(At=>vt.track===At)&&(kt=this._streams[$t])}),kt&&(kt.getTracks().length===1?this.removeStream(this._reverseStreams[kt.id]):kt.removeTrack(vt.track),this.dispatchEvent(new Event("negotiationneeded")))}}function shimPeerConnection$1(a,c){!a.RTCPeerConnection&&a.webkitRTCPeerConnection&&(a.RTCPeerConnection=a.webkitRTCPeerConnection),a.RTCPeerConnection&&c.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(b){const _=a.RTCPeerConnection.prototype[b],$={[b](){return arguments[0]=new(b==="addIceCandidate"?a.RTCIceCandidate:a.RTCSessionDescription)(arguments[0]),_.apply(this,arguments)}};a.RTCPeerConnection.prototype[b]=$[b]})}function fixNegotiationNeeded(a,c){wrapPeerConnectionEvent(a,"negotiationneeded",b=>{const _=b.target;if(!((c.version<72||_.getConfiguration&&_.getConfiguration().sdpSemantics==="plan-b")&&_.signalingState!=="stable"))return b})}var chromeShim=Object.freeze({__proto__:null,fixNegotiationNeeded,shimAddTrackRemoveTrack,shimAddTrackRemoveTrackWithNative,shimGetDisplayMedia:shimGetDisplayMedia$1,shimGetSendersWithDtmf,shimGetStats,shimGetUserMedia:shimGetUserMedia$2,shimMediaStream,shimOnTrack:shimOnTrack$1,shimPeerConnection:shimPeerConnection$1,shimSenderReceiverGetStats});function shimGetUserMedia$1(a,c){const b=a&&a.navigator,_=a&&a.MediaStreamTrack;if(b.getUserMedia=function($,k,et){deprecated("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),b.mediaDevices.getUserMedia($).then(k,et)},!(c.version>55&&"autoGainControl"in b.mediaDevices.getSupportedConstraints())){const $=function(et,nt,ot){nt in et&&!(ot in et)&&(et[ot]=et[nt],delete et[nt])},k=b.mediaDevices.getUserMedia.bind(b.mediaDevices);if(b.mediaDevices.getUserMedia=function(et){return typeof et=="object"&&typeof et.audio=="object"&&(et=JSON.parse(JSON.stringify(et)),$(et.audio,"autoGainControl","mozAutoGainControl"),$(et.audio,"noiseSuppression","mozNoiseSuppression")),k(et)},_&&_.prototype.getSettings){const et=_.prototype.getSettings;_.prototype.getSettings=function(){const nt=et.apply(this,arguments);return $(nt,"mozAutoGainControl","autoGainControl"),$(nt,"mozNoiseSuppression","noiseSuppression"),nt}}if(_&&_.prototype.applyConstraints){const et=_.prototype.applyConstraints;_.prototype.applyConstraints=function(nt){return this.kind==="audio"&&typeof nt=="object"&&(nt=JSON.parse(JSON.stringify(nt)),$(nt,"autoGainControl","mozAutoGainControl"),$(nt,"noiseSuppression","mozNoiseSuppression")),et.apply(this,[nt])}}}}function shimGetDisplayMedia(a,c){a.navigator.mediaDevices&&"getDisplayMedia"in a.navigator.mediaDevices||a.navigator.mediaDevices&&(a.navigator.mediaDevices.getDisplayMedia=function(_){if(!(_&&_.video)){const $=new DOMException("getDisplayMedia without video constraints is undefined");return $.name="NotFoundError",$.code=8,Promise.reject($)}return _.video===!0?_.video={mediaSource:c}:_.video.mediaSource=c,a.navigator.mediaDevices.getUserMedia(_)})}function shimOnTrack(a){typeof a=="object"&&a.RTCTrackEvent&&"receiver"in a.RTCTrackEvent.prototype&&!("transceiver"in a.RTCTrackEvent.prototype)&&Object.defineProperty(a.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function shimPeerConnection(a,c){if(typeof a!="object"||!(a.RTCPeerConnection||a.mozRTCPeerConnection))return;!a.RTCPeerConnection&&a.mozRTCPeerConnection&&(a.RTCPeerConnection=a.mozRTCPeerConnection),c.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function($){const k=a.RTCPeerConnection.prototype[$],et={[$](){return arguments[0]=new($==="addIceCandidate"?a.RTCIceCandidate:a.RTCSessionDescription)(arguments[0]),k.apply(this,arguments)}};a.RTCPeerConnection.prototype[$]=et[$]});const b={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},_=a.RTCPeerConnection.prototype.getStats;a.RTCPeerConnection.prototype.getStats=function(){const[k,et,nt]=arguments;return _.apply(this,[k||null]).then(ot=>{if(c.version<53&&!et)try{ot.forEach(ht=>{ht.type=b[ht.type]||ht.type})}catch(ht){if(ht.name!=="TypeError")throw ht;ot.forEach((vt,_t)=>{ot.set(_t,Object.assign({},vt,{type:b[vt.type]||vt.type}))})}return ot}).then(et,nt)}}function shimSenderGetStats(a){if(!(typeof a=="object"&&a.RTCPeerConnection&&a.RTCRtpSender)||a.RTCRtpSender&&"getStats"in a.RTCRtpSender.prototype)return;const c=a.RTCPeerConnection.prototype.getSenders;c&&(a.RTCPeerConnection.prototype.getSenders=function(){const $=c.apply(this,[]);return $.forEach(k=>k._pc=this),$});const b=a.RTCPeerConnection.prototype.addTrack;b&&(a.RTCPeerConnection.prototype.addTrack=function(){const $=b.apply(this,arguments);return $._pc=this,$}),a.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function shimReceiverGetStats(a){if(!(typeof a=="object"&&a.RTCPeerConnection&&a.RTCRtpSender)||a.RTCRtpSender&&"getStats"in a.RTCRtpReceiver.prototype)return;const c=a.RTCPeerConnection.prototype.getReceivers;c&&(a.RTCPeerConnection.prototype.getReceivers=function(){const _=c.apply(this,[]);return _.forEach($=>$._pc=this),_}),wrapPeerConnectionEvent(a,"track",b=>(b.receiver._pc=b.srcElement,b)),a.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function shimRemoveStream(a){!a.RTCPeerConnection||"removeStream"in a.RTCPeerConnection.prototype||(a.RTCPeerConnection.prototype.removeStream=function(b){deprecated("removeStream","removeTrack"),this.getSenders().forEach(_=>{_.track&&b.getTracks().includes(_.track)&&this.removeTrack(_)})})}function shimRTCDataChannel(a){a.DataChannel&&!a.RTCDataChannel&&(a.RTCDataChannel=a.DataChannel)}function shimAddTransceiver(a){if(!(typeof a=="object"&&a.RTCPeerConnection))return;const c=a.RTCPeerConnection.prototype.addTransceiver;c&&(a.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];let _=arguments[1]&&arguments[1].sendEncodings;_===void 0&&(_=[]),_=[..._];const $=_.length>0;$&&_.forEach(et=>{if("rid"in et&&!/^[a-z0-9]{0,16}$/i.test(et.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in et&&!(parseFloat(et.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in et&&!(parseFloat(et.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});const k=c.apply(this,arguments);if($){const{sender:et}=k,nt=et.getParameters();(!("encodings"in nt)||nt.encodings.length===1&&Object.keys(nt.encodings[0]).length===0)&&(nt.encodings=_,et.sendEncodings=_,this.setParametersPromises.push(et.setParameters(nt).then(()=>{delete et.sendEncodings}).catch(()=>{delete et.sendEncodings})))}return k})}function shimGetParameters(a){if(!(typeof a=="object"&&a.RTCRtpSender))return;const c=a.RTCRtpSender.prototype.getParameters;c&&(a.RTCRtpSender.prototype.getParameters=function(){const _=c.apply(this,arguments);return"encodings"in _||(_.encodings=[].concat(this.sendEncodings||[{}])),_})}function shimCreateOffer(a){if(!(typeof a=="object"&&a.RTCPeerConnection))return;const c=a.RTCPeerConnection.prototype.createOffer;a.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>c.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):c.apply(this,arguments)}}function shimCreateAnswer(a){if(!(typeof a=="object"&&a.RTCPeerConnection))return;const c=a.RTCPeerConnection.prototype.createAnswer;a.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>c.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):c.apply(this,arguments)}}var firefoxShim=Object.freeze({__proto__:null,shimAddTransceiver,shimCreateAnswer,shimCreateOffer,shimGetDisplayMedia,shimGetParameters,shimGetUserMedia:shimGetUserMedia$1,shimOnTrack,shimPeerConnection,shimRTCDataChannel,shimReceiverGetStats,shimRemoveStream,shimSenderGetStats});function shimLocalStreamsAPI(a){if(!(typeof a!="object"||!a.RTCPeerConnection)){if("getLocalStreams"in a.RTCPeerConnection.prototype||(a.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in a.RTCPeerConnection.prototype)){const c=a.RTCPeerConnection.prototype.addTrack;a.RTCPeerConnection.prototype.addStream=function(_){this._localStreams||(this._localStreams=[]),this._localStreams.includes(_)||this._localStreams.push(_),_.getAudioTracks().forEach($=>c.call(this,$,_)),_.getVideoTracks().forEach($=>c.call(this,$,_))},a.RTCPeerConnection.prototype.addTrack=function(_){for(var $=arguments.length,k=new Array($>1?$-1:0),et=1;et<$;et++)k[et-1]=arguments[et];return k&&k.forEach(nt=>{this._localStreams?this._localStreams.includes(nt)||this._localStreams.push(nt):this._localStreams=[nt]}),c.apply(this,arguments)}}"removeStream"in a.RTCPeerConnection.prototype||(a.RTCPeerConnection.prototype.removeStream=function(b){this._localStreams||(this._localStreams=[]);const _=this._localStreams.indexOf(b);if(_===-1)return;this._localStreams.splice(_,1);const $=b.getTracks();this.getSenders().forEach(k=>{$.includes(k.track)&&this.removeTrack(k)})})}}function shimRemoteStreamsAPI(a){if(!(typeof a!="object"||!a.RTCPeerConnection)&&("getRemoteStreams"in a.RTCPeerConnection.prototype||(a.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in a.RTCPeerConnection.prototype))){Object.defineProperty(a.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(b){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=b),this.addEventListener("track",this._onaddstreampoly=_=>{_.streams.forEach($=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes($))return;this._remoteStreams.push($);const k=new Event("addstream");k.stream=$,this.dispatchEvent(k)})})}});const c=a.RTCPeerConnection.prototype.setRemoteDescription;a.RTCPeerConnection.prototype.setRemoteDescription=function(){const _=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function($){$.streams.forEach(k=>{if(_._remoteStreams||(_._remoteStreams=[]),_._remoteStreams.indexOf(k)>=0)return;_._remoteStreams.push(k);const et=new Event("addstream");et.stream=k,_.dispatchEvent(et)})}),c.apply(_,arguments)}}}function shimCallbacksAPI(a){if(typeof a!="object"||!a.RTCPeerConnection)return;const c=a.RTCPeerConnection.prototype,b=c.createOffer,_=c.createAnswer,$=c.setLocalDescription,k=c.setRemoteDescription,et=c.addIceCandidate;c.createOffer=function(ht,vt){const _t=arguments.length>=2?arguments[2]:arguments[0],kt=b.apply(this,[_t]);return vt?(kt.then(ht,vt),Promise.resolve()):kt},c.createAnswer=function(ht,vt){const _t=arguments.length>=2?arguments[2]:arguments[0],kt=_.apply(this,[_t]);return vt?(kt.then(ht,vt),Promise.resolve()):kt};let nt=function(ot,ht,vt){const _t=$.apply(this,[ot]);return vt?(_t.then(ht,vt),Promise.resolve()):_t};c.setLocalDescription=nt,nt=function(ot,ht,vt){const _t=k.apply(this,[ot]);return vt?(_t.then(ht,vt),Promise.resolve()):_t},c.setRemoteDescription=nt,nt=function(ot,ht,vt){const _t=et.apply(this,[ot]);return vt?(_t.then(ht,vt),Promise.resolve()):_t},c.addIceCandidate=nt}function shimGetUserMedia(a){const c=a&&a.navigator;if(c.mediaDevices&&c.mediaDevices.getUserMedia){const b=c.mediaDevices,_=b.getUserMedia.bind(b);c.mediaDevices.getUserMedia=$=>_(shimConstraints($))}!c.getUserMedia&&c.mediaDevices&&c.mediaDevices.getUserMedia&&(c.getUserMedia=(function(_,$,k){c.mediaDevices.getUserMedia(_).then($,k)}).bind(c))}function shimConstraints(a){return a&&a.video!==void 0?Object.assign({},a,{video:compactObject(a.video)}):a}function shimRTCIceServerUrls(a){if(!a.RTCPeerConnection)return;const c=a.RTCPeerConnection;a.RTCPeerConnection=function(_,$){if(_&&_.iceServers){const k=[];for(let et=0;et<_.iceServers.length;et++){let nt=_.iceServers[et];nt.urls===void 0&&nt.url?(deprecated("RTCIceServer.url","RTCIceServer.urls"),nt=JSON.parse(JSON.stringify(nt)),nt.urls=nt.url,delete nt.url,k.push(nt)):k.push(_.iceServers[et])}_.iceServers=k}return new c(_,$)},a.RTCPeerConnection.prototype=c.prototype,"generateCertificate"in c&&Object.defineProperty(a.RTCPeerConnection,"generateCertificate",{get(){return c.generateCertificate}})}function shimTrackEventTransceiver(a){typeof a=="object"&&a.RTCTrackEvent&&"receiver"in a.RTCTrackEvent.prototype&&!("transceiver"in a.RTCTrackEvent.prototype)&&Object.defineProperty(a.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function shimCreateOfferLegacy(a){const c=a.RTCPeerConnection.prototype.createOffer;a.RTCPeerConnection.prototype.createOffer=function(_){if(_){typeof _.offerToReceiveAudio<"u"&&(_.offerToReceiveAudio=!!_.offerToReceiveAudio);const $=this.getTransceivers().find(et=>et.receiver.track.kind==="audio");_.offerToReceiveAudio===!1&&$?$.direction==="sendrecv"?$.setDirection?$.setDirection("sendonly"):$.direction="sendonly":$.direction==="recvonly"&&($.setDirection?$.setDirection("inactive"):$.direction="inactive"):_.offerToReceiveAudio===!0&&!$&&this.addTransceiver("audio",{direction:"recvonly"}),typeof _.offerToReceiveVideo<"u"&&(_.offerToReceiveVideo=!!_.offerToReceiveVideo);const k=this.getTransceivers().find(et=>et.receiver.track.kind==="video");_.offerToReceiveVideo===!1&&k?k.direction==="sendrecv"?k.setDirection?k.setDirection("sendonly"):k.direction="sendonly":k.direction==="recvonly"&&(k.setDirection?k.setDirection("inactive"):k.direction="inactive"):_.offerToReceiveVideo===!0&&!k&&this.addTransceiver("video",{direction:"recvonly"})}return c.apply(this,arguments)}}function shimAudioContext(a){typeof a!="object"||a.AudioContext||(a.AudioContext=a.webkitAudioContext)}var safariShim=Object.freeze({__proto__:null,shimAudioContext,shimCallbacksAPI,shimConstraints,shimCreateOfferLegacy,shimGetUserMedia,shimLocalStreamsAPI,shimRTCIceServerUrls,shimRemoteStreamsAPI,shimTrackEventTransceiver}),sdp$1={exports:{}};(function(a){const c={};c.generateIdentifier=function(){return Math.random().toString(36).substring(2,12)},c.localCName=c.generateIdentifier(),c.splitLines=function(b){return b.trim().split(`
`).map(_=>_.trim())},c.splitSections=function(b){return b.split(`
m=`).map(($,k)=>(k>0?"m="+$:$).trim()+`\r
`)},c.getDescription=function(b){const _=c.splitSections(b);return _&&_[0]},c.getMediaSections=function(b){const _=c.splitSections(b);return _.shift(),_},c.matchPrefix=function(b,_){return c.splitLines(b).filter($=>$.indexOf(_)===0)},c.parseCandidate=function(b){let _;b.indexOf("a=candidate:")===0?_=b.substring(12).split(" "):_=b.substring(10).split(" ");const $={foundation:_[0],component:{1:"rtp",2:"rtcp"}[_[1]]||_[1],protocol:_[2].toLowerCase(),priority:parseInt(_[3],10),ip:_[4],address:_[4],port:parseInt(_[5],10),type:_[7]};for(let k=8;k<_.length;k+=2)switch(_[k]){case"raddr":$.relatedAddress=_[k+1];break;case"rport":$.relatedPort=parseInt(_[k+1],10);break;case"tcptype":$.tcpType=_[k+1];break;case"ufrag":$.ufrag=_[k+1],$.usernameFragment=_[k+1];break;default:$[_[k]]===void 0&&($[_[k]]=_[k+1]);break}return $},c.writeCandidate=function(b){const _=[];_.push(b.foundation);const $=b.component;$==="rtp"?_.push(1):$==="rtcp"?_.push(2):_.push($),_.push(b.protocol.toUpperCase()),_.push(b.priority),_.push(b.address||b.ip),_.push(b.port);const k=b.type;return _.push("typ"),_.push(k),k!=="host"&&b.relatedAddress&&b.relatedPort&&(_.push("raddr"),_.push(b.relatedAddress),_.push("rport"),_.push(b.relatedPort)),b.tcpType&&b.protocol.toLowerCase()==="tcp"&&(_.push("tcptype"),_.push(b.tcpType)),(b.usernameFragment||b.ufrag)&&(_.push("ufrag"),_.push(b.usernameFragment||b.ufrag)),"candidate:"+_.join(" ")},c.parseIceOptions=function(b){return b.substring(14).split(" ")},c.parseRtpMap=function(b){let _=b.substring(9).split(" ");const $={payloadType:parseInt(_.shift(),10)};return _=_[0].split("/"),$.name=_[0],$.clockRate=parseInt(_[1],10),$.channels=_.length===3?parseInt(_[2],10):1,$.numChannels=$.channels,$},c.writeRtpMap=function(b){let _=b.payloadType;b.preferredPayloadType!==void 0&&(_=b.preferredPayloadType);const $=b.channels||b.numChannels||1;return"a=rtpmap:"+_+" "+b.name+"/"+b.clockRate+($!==1?"/"+$:"")+`\r
`},c.parseExtmap=function(b){const _=b.substring(9).split(" ");return{id:parseInt(_[0],10),direction:_[0].indexOf("/")>0?_[0].split("/")[1]:"sendrecv",uri:_[1],attributes:_.slice(2).join(" ")}},c.writeExtmap=function(b){return"a=extmap:"+(b.id||b.preferredId)+(b.direction&&b.direction!=="sendrecv"?"/"+b.direction:"")+" "+b.uri+(b.attributes?" "+b.attributes:"")+`\r
`},c.parseFmtp=function(b){const _={};let $;const k=b.substring(b.indexOf(" ")+1).split(";");for(let et=0;et<k.length;et++)$=k[et].trim().split("="),_[$[0].trim()]=$[1];return _},c.writeFmtp=function(b){let _="",$=b.payloadType;if(b.preferredPayloadType!==void 0&&($=b.preferredPayloadType),b.parameters&&Object.keys(b.parameters).length){const k=[];Object.keys(b.parameters).forEach(et=>{b.parameters[et]!==void 0?k.push(et+"="+b.parameters[et]):k.push(et)}),_+="a=fmtp:"+$+" "+k.join(";")+`\r
`}return _},c.parseRtcpFb=function(b){const _=b.substring(b.indexOf(" ")+1).split(" ");return{type:_.shift(),parameter:_.join(" ")}},c.writeRtcpFb=function(b){let _="",$=b.payloadType;return b.preferredPayloadType!==void 0&&($=b.preferredPayloadType),b.rtcpFeedback&&b.rtcpFeedback.length&&b.rtcpFeedback.forEach(k=>{_+="a=rtcp-fb:"+$+" "+k.type+(k.parameter&&k.parameter.length?" "+k.parameter:"")+`\r
`}),_},c.parseSsrcMedia=function(b){const _=b.indexOf(" "),$={ssrc:parseInt(b.substring(7,_),10)},k=b.indexOf(":",_);return k>-1?($.attribute=b.substring(_+1,k),$.value=b.substring(k+1)):$.attribute=b.substring(_+1),$},c.parseSsrcGroup=function(b){const _=b.substring(13).split(" ");return{semantics:_.shift(),ssrcs:_.map($=>parseInt($,10))}},c.getMid=function(b){const _=c.matchPrefix(b,"a=mid:")[0];if(_)return _.substring(6)},c.parseFingerprint=function(b){const _=b.substring(14).split(" ");return{algorithm:_[0].toLowerCase(),value:_[1].toUpperCase()}},c.getDtlsParameters=function(b,_){return{role:"auto",fingerprints:c.matchPrefix(b+_,"a=fingerprint:").map(c.parseFingerprint)}},c.writeDtlsParameters=function(b,_){let $="a=setup:"+_+`\r
`;return b.fingerprints.forEach(k=>{$+="a=fingerprint:"+k.algorithm+" "+k.value+`\r
`}),$},c.parseCryptoLine=function(b){const _=b.substring(9).split(" ");return{tag:parseInt(_[0],10),cryptoSuite:_[1],keyParams:_[2],sessionParams:_.slice(3)}},c.writeCryptoLine=function(b){return"a=crypto:"+b.tag+" "+b.cryptoSuite+" "+(typeof b.keyParams=="object"?c.writeCryptoKeyParams(b.keyParams):b.keyParams)+(b.sessionParams?" "+b.sessionParams.join(" "):"")+`\r
`},c.parseCryptoKeyParams=function(b){if(b.indexOf("inline:")!==0)return null;const _=b.substring(7).split("|");return{keyMethod:"inline",keySalt:_[0],lifeTime:_[1],mkiValue:_[2]?_[2].split(":")[0]:void 0,mkiLength:_[2]?_[2].split(":")[1]:void 0}},c.writeCryptoKeyParams=function(b){return b.keyMethod+":"+b.keySalt+(b.lifeTime?"|"+b.lifeTime:"")+(b.mkiValue&&b.mkiLength?"|"+b.mkiValue+":"+b.mkiLength:"")},c.getCryptoParameters=function(b,_){return c.matchPrefix(b+_,"a=crypto:").map(c.parseCryptoLine)},c.getIceParameters=function(b,_){const $=c.matchPrefix(b+_,"a=ice-ufrag:")[0],k=c.matchPrefix(b+_,"a=ice-pwd:")[0];return $&&k?{usernameFragment:$.substring(12),password:k.substring(10)}:null},c.writeIceParameters=function(b){let _="a=ice-ufrag:"+b.usernameFragment+`\r
a=ice-pwd:`+b.password+`\r
`;return b.iceLite&&(_+=`a=ice-lite\r
`),_},c.parseRtpParameters=function(b){const _={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},k=c.splitLines(b)[0].split(" ");_.profile=k[2];for(let nt=3;nt<k.length;nt++){const ot=k[nt],ht=c.matchPrefix(b,"a=rtpmap:"+ot+" ")[0];if(ht){const vt=c.parseRtpMap(ht),_t=c.matchPrefix(b,"a=fmtp:"+ot+" ");switch(vt.parameters=_t.length?c.parseFmtp(_t[0]):{},vt.rtcpFeedback=c.matchPrefix(b,"a=rtcp-fb:"+ot+" ").map(c.parseRtcpFb),_.codecs.push(vt),vt.name.toUpperCase()){case"RED":case"ULPFEC":_.fecMechanisms.push(vt.name.toUpperCase());break}}}c.matchPrefix(b,"a=extmap:").forEach(nt=>{_.headerExtensions.push(c.parseExtmap(nt))});const et=c.matchPrefix(b,"a=rtcp-fb:* ").map(c.parseRtcpFb);return _.codecs.forEach(nt=>{et.forEach(ot=>{nt.rtcpFeedback.find(vt=>vt.type===ot.type&&vt.parameter===ot.parameter)||nt.rtcpFeedback.push(ot)})}),_},c.writeRtpDescription=function(b,_){let $="";$+="m="+b+" ",$+=_.codecs.length>0?"9":"0",$+=" "+(_.profile||"UDP/TLS/RTP/SAVPF")+" ",$+=_.codecs.map(et=>et.preferredPayloadType!==void 0?et.preferredPayloadType:et.payloadType).join(" ")+`\r
`,$+=`c=IN IP4 0.0.0.0\r
`,$+=`a=rtcp:9 IN IP4 0.0.0.0\r
`,_.codecs.forEach(et=>{$+=c.writeRtpMap(et),$+=c.writeFmtp(et),$+=c.writeRtcpFb(et)});let k=0;return _.codecs.forEach(et=>{et.maxptime>k&&(k=et.maxptime)}),k>0&&($+="a=maxptime:"+k+`\r
`),_.headerExtensions&&_.headerExtensions.forEach(et=>{$+=c.writeExtmap(et)}),$},c.parseRtpEncodingParameters=function(b){const _=[],$=c.parseRtpParameters(b),k=$.fecMechanisms.indexOf("RED")!==-1,et=$.fecMechanisms.indexOf("ULPFEC")!==-1,nt=c.matchPrefix(b,"a=ssrc:").map(kt=>c.parseSsrcMedia(kt)).filter(kt=>kt.attribute==="cname"),ot=nt.length>0&&nt[0].ssrc;let ht;const vt=c.matchPrefix(b,"a=ssrc-group:FID").map(kt=>kt.substring(17).split(" ").map(Tt=>parseInt(Tt,10)));vt.length>0&&vt[0].length>1&&vt[0][0]===ot&&(ht=vt[0][1]),$.codecs.forEach(kt=>{if(kt.name.toUpperCase()==="RTX"&&kt.parameters.apt){let $t={ssrc:ot,codecPayloadType:parseInt(kt.parameters.apt,10)};ot&&ht&&($t.rtx={ssrc:ht}),_.push($t),k&&($t=JSON.parse(JSON.stringify($t)),$t.fec={ssrc:ot,mechanism:et?"red+ulpfec":"red"},_.push($t))}}),_.length===0&&ot&&_.push({ssrc:ot});let _t=c.matchPrefix(b,"b=");return _t.length&&(_t[0].indexOf("b=TIAS:")===0?_t=parseInt(_t[0].substring(7),10):_t[0].indexOf("b=AS:")===0?_t=parseInt(_t[0].substring(5),10)*1e3*.95-50*40*8:_t=void 0,_.forEach(kt=>{kt.maxBitrate=_t})),_},c.parseRtcpParameters=function(b){const _={},$=c.matchPrefix(b,"a=ssrc:").map(nt=>c.parseSsrcMedia(nt)).filter(nt=>nt.attribute==="cname")[0];$&&(_.cname=$.value,_.ssrc=$.ssrc);const k=c.matchPrefix(b,"a=rtcp-rsize");_.reducedSize=k.length>0,_.compound=k.length===0;const et=c.matchPrefix(b,"a=rtcp-mux");return _.mux=et.length>0,_},c.writeRtcpParameters=function(b){let _="";return b.reducedSize&&(_+=`a=rtcp-rsize\r
`),b.mux&&(_+=`a=rtcp-mux\r
`),b.ssrc!==void 0&&b.cname&&(_+="a=ssrc:"+b.ssrc+" cname:"+b.cname+`\r
`),_},c.parseMsid=function(b){let _;const $=c.matchPrefix(b,"a=msid:");if($.length===1)return _=$[0].substring(7).split(" "),{stream:_[0],track:_[1]};const k=c.matchPrefix(b,"a=ssrc:").map(et=>c.parseSsrcMedia(et)).filter(et=>et.attribute==="msid");if(k.length>0)return _=k[0].value.split(" "),{stream:_[0],track:_[1]}},c.parseSctpDescription=function(b){const _=c.parseMLine(b),$=c.matchPrefix(b,"a=max-message-size:");let k;$.length>0&&(k=parseInt($[0].substring(19),10)),isNaN(k)&&(k=65536);const et=c.matchPrefix(b,"a=sctp-port:");if(et.length>0)return{port:parseInt(et[0].substring(12),10),protocol:_.fmt,maxMessageSize:k};const nt=c.matchPrefix(b,"a=sctpmap:");if(nt.length>0){const ot=nt[0].substring(10).split(" ");return{port:parseInt(ot[0],10),protocol:ot[1],maxMessageSize:k}}},c.writeSctpDescription=function(b,_){let $=[];return b.protocol!=="DTLS/SCTP"?$=["m="+b.kind+" 9 "+b.protocol+" "+_.protocol+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctp-port:"+_.port+`\r
`]:$=["m="+b.kind+" 9 "+b.protocol+" "+_.port+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctpmap:"+_.port+" "+_.protocol+` 65535\r
`],_.maxMessageSize!==void 0&&$.push("a=max-message-size:"+_.maxMessageSize+`\r
`),$.join("")},c.generateSessionId=function(){return Math.random().toString().substr(2,22)},c.writeSessionBoilerplate=function(b,_,$){let k;const et=_!==void 0?_:2;return b?k=b:k=c.generateSessionId(),`v=0\r
o=`+($||"thisisadapterortc")+" "+k+" "+et+` IN IP4 127.0.0.1\r
s=-\r
t=0 0\r
`},c.getDirection=function(b,_){const $=c.splitLines(b);for(let k=0;k<$.length;k++)switch($[k]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return $[k].substring(2)}return _?c.getDirection(_):"sendrecv"},c.getKind=function(b){return c.splitLines(b)[0].split(" ")[0].substring(2)},c.isRejected=function(b){return b.split(" ",2)[1]==="0"},c.parseMLine=function(b){const $=c.splitLines(b)[0].substring(2).split(" ");return{kind:$[0],port:parseInt($[1],10),protocol:$[2],fmt:$.slice(3).join(" ")}},c.parseOLine=function(b){const $=c.matchPrefix(b,"o=")[0].substring(2).split(" ");return{username:$[0],sessionId:$[1],sessionVersion:parseInt($[2],10),netType:$[3],addressType:$[4],address:$[5]}},c.isValidSDP=function(b){if(typeof b!="string"||b.length===0)return!1;const _=c.splitLines(b);for(let $=0;$<_.length;$++)if(_[$].length<2||_[$].charAt(1)!=="=")return!1;return!0},a.exports=c})(sdp$1);var sdpExports=sdp$1.exports,SDPUtils=getDefaultExportFromCjs(sdpExports),sdp=_mergeNamespaces({__proto__:null,default:SDPUtils},[sdpExports]);function shimRTCIceCandidate(a){if(!a.RTCIceCandidate||a.RTCIceCandidate&&"foundation"in a.RTCIceCandidate.prototype)return;const c=a.RTCIceCandidate;a.RTCIceCandidate=function(_){if(typeof _=="object"&&_.candidate&&_.candidate.indexOf("a=")===0&&(_=JSON.parse(JSON.stringify(_)),_.candidate=_.candidate.substring(2)),_.candidate&&_.candidate.length){const $=new c(_),k=SDPUtils.parseCandidate(_.candidate);for(const et in k)et in $||Object.defineProperty($,et,{value:k[et]});return $.toJSON=function(){return{candidate:$.candidate,sdpMid:$.sdpMid,sdpMLineIndex:$.sdpMLineIndex,usernameFragment:$.usernameFragment}},$}return new c(_)},a.RTCIceCandidate.prototype=c.prototype,wrapPeerConnectionEvent(a,"icecandidate",b=>(b.candidate&&Object.defineProperty(b,"candidate",{value:new a.RTCIceCandidate(b.candidate),writable:"false"}),b))}function shimRTCIceCandidateRelayProtocol(a){!a.RTCIceCandidate||a.RTCIceCandidate&&"relayProtocol"in a.RTCIceCandidate.prototype||wrapPeerConnectionEvent(a,"icecandidate",c=>{if(c.candidate){const b=SDPUtils.parseCandidate(c.candidate.candidate);b.type==="relay"&&(c.candidate.relayProtocol={0:"tls",1:"tcp",2:"udp"}[b.priority>>24])}return c})}function shimMaxMessageSize(a,c){if(!a.RTCPeerConnection)return;"sctp"in a.RTCPeerConnection.prototype||Object.defineProperty(a.RTCPeerConnection.prototype,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp}});const b=function(nt){if(!nt||!nt.sdp)return!1;const ot=SDPUtils.splitSections(nt.sdp);return ot.shift(),ot.some(ht=>{const vt=SDPUtils.parseMLine(ht);return vt&&vt.kind==="application"&&vt.protocol.indexOf("SCTP")!==-1})},_=function(nt){const ot=nt.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(ot===null||ot.length<2)return-1;const ht=parseInt(ot[1],10);return ht!==ht?-1:ht},$=function(nt){let ot=65536;return c.browser==="firefox"&&(c.version<57?nt===-1?ot=16384:ot=2147483637:c.version<60?ot=c.version===57?65535:65536:ot=2147483637),ot},k=function(nt,ot){let ht=65536;c.browser==="firefox"&&c.version===57&&(ht=65535);const vt=SDPUtils.matchPrefix(nt.sdp,"a=max-message-size:");return vt.length>0?ht=parseInt(vt[0].substring(19),10):c.browser==="firefox"&&ot!==-1&&(ht=2147483637),ht},et=a.RTCPeerConnection.prototype.setRemoteDescription;a.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,c.browser==="chrome"&&c.version>=76){const{sdpSemantics:ot}=this.getConfiguration();ot==="plan-b"&&Object.defineProperty(this,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp},enumerable:!0,configurable:!0})}if(b(arguments[0])){const ot=_(arguments[0]),ht=$(ot),vt=k(arguments[0],ot);let _t;ht===0&&vt===0?_t=Number.POSITIVE_INFINITY:ht===0||vt===0?_t=Math.max(ht,vt):_t=Math.min(ht,vt);const kt={};Object.defineProperty(kt,"maxMessageSize",{get(){return _t}}),this._sctp=kt}return et.apply(this,arguments)}}function shimSendThrowTypeError(a){if(!(a.RTCPeerConnection&&"createDataChannel"in a.RTCPeerConnection.prototype))return;function c(_,$){const k=_.send;_.send=function(){const nt=arguments[0],ot=nt.length||nt.size||nt.byteLength;if(_.readyState==="open"&&$.sctp&&ot>$.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+$.sctp.maxMessageSize+" bytes)");return k.apply(_,arguments)}}const b=a.RTCPeerConnection.prototype.createDataChannel;a.RTCPeerConnection.prototype.createDataChannel=function(){const $=b.apply(this,arguments);return c($,this),$},wrapPeerConnectionEvent(a,"datachannel",_=>(c(_.channel,_.target),_))}function shimConnectionState(a){if(!a.RTCPeerConnection||"connectionState"in a.RTCPeerConnection.prototype)return;const c=a.RTCPeerConnection.prototype;Object.defineProperty(c,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(c,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(b){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),b&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=b)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(b=>{const _=c[b];c[b]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=$=>{const k=$.target;if(k._lastConnectionState!==k.connectionState){k._lastConnectionState=k.connectionState;const et=new Event("connectionstatechange",$);k.dispatchEvent(et)}return $},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),_.apply(this,arguments)}})}function removeExtmapAllowMixed(a,c){if(!a.RTCPeerConnection||c.browser==="chrome"&&c.version>=71||c.browser==="safari"&&c.version>=605)return;const b=a.RTCPeerConnection.prototype.setRemoteDescription;a.RTCPeerConnection.prototype.setRemoteDescription=function($){if($&&$.sdp&&$.sdp.indexOf(`
a=extmap-allow-mixed`)!==-1){const k=$.sdp.split(`
`).filter(et=>et.trim()!=="a=extmap-allow-mixed").join(`
`);a.RTCSessionDescription&&$ instanceof a.RTCSessionDescription?arguments[0]=new a.RTCSessionDescription({type:$.type,sdp:k}):$.sdp=k}return b.apply(this,arguments)}}function shimAddIceCandidateNullOrEmpty(a,c){if(!(a.RTCPeerConnection&&a.RTCPeerConnection.prototype))return;const b=a.RTCPeerConnection.prototype.addIceCandidate;!b||b.length===0||(a.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?(c.browser==="chrome"&&c.version<78||c.browser==="firefox"&&c.version<68||c.browser==="safari")&&arguments[0]&&arguments[0].candidate===""?Promise.resolve():b.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}function shimParameterlessSetLocalDescription(a,c){if(!(a.RTCPeerConnection&&a.RTCPeerConnection.prototype))return;const b=a.RTCPeerConnection.prototype.setLocalDescription;!b||b.length===0||(a.RTCPeerConnection.prototype.setLocalDescription=function(){let $=arguments[0]||{};if(typeof $!="object"||$.type&&$.sdp)return b.apply(this,arguments);if($={type:$.type,sdp:$.sdp},!$.type)switch(this.signalingState){case"stable":case"have-local-offer":case"have-remote-pranswer":$.type="offer";break;default:$.type="answer";break}return $.sdp||$.type!=="offer"&&$.type!=="answer"?b.apply(this,[$]):($.type==="offer"?this.createOffer:this.createAnswer).apply(this).then(et=>b.apply(this,[et]))})}var commonShim=Object.freeze({__proto__:null,removeExtmapAllowMixed,shimAddIceCandidateNullOrEmpty,shimConnectionState,shimMaxMessageSize,shimParameterlessSetLocalDescription,shimRTCIceCandidate,shimRTCIceCandidateRelayProtocol,shimSendThrowTypeError});function adapterFactory(){let{window:a}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{shimChrome:!0,shimFirefox:!0,shimSafari:!0};const b=log$1,_=detectBrowser(a),$={browserDetails:_,commonShim,extractVersion,disableLog,disableWarnings,sdp};switch(_.browser){case"chrome":if(!chromeShim||!shimPeerConnection$1||!c.shimChrome)return b("Chrome shim is not included in this adapter release."),$;if(_.version===null)return b("Chrome shim can not determine version, not shimming."),$;b("adapter.js shimming chrome."),$.browserShim=chromeShim,shimAddIceCandidateNullOrEmpty(a,_),shimParameterlessSetLocalDescription(a),shimGetUserMedia$2(a,_),shimMediaStream(a),shimPeerConnection$1(a,_),shimOnTrack$1(a),shimAddTrackRemoveTrack(a,_),shimGetSendersWithDtmf(a),shimGetStats(a),shimSenderReceiverGetStats(a),fixNegotiationNeeded(a,_),shimRTCIceCandidate(a),shimRTCIceCandidateRelayProtocol(a),shimConnectionState(a),shimMaxMessageSize(a,_),shimSendThrowTypeError(a),removeExtmapAllowMixed(a,_);break;case"firefox":if(!firefoxShim||!shimPeerConnection||!c.shimFirefox)return b("Firefox shim is not included in this adapter release."),$;b("adapter.js shimming firefox."),$.browserShim=firefoxShim,shimAddIceCandidateNullOrEmpty(a,_),shimParameterlessSetLocalDescription(a),shimGetUserMedia$1(a,_),shimPeerConnection(a,_),shimOnTrack(a),shimRemoveStream(a),shimSenderGetStats(a),shimReceiverGetStats(a),shimRTCDataChannel(a),shimAddTransceiver(a),shimGetParameters(a),shimCreateOffer(a),shimCreateAnswer(a),shimRTCIceCandidate(a),shimConnectionState(a),shimMaxMessageSize(a,_),shimSendThrowTypeError(a);break;case"safari":if(!safariShim||!c.shimSafari)return b("Safari shim is not included in this adapter release."),$;b("adapter.js shimming safari."),$.browserShim=safariShim,shimAddIceCandidateNullOrEmpty(a,_),shimParameterlessSetLocalDescription(a),shimRTCIceServerUrls(a),shimCreateOfferLegacy(a),shimCallbacksAPI(a),shimLocalStreamsAPI(a),shimRemoteStreamsAPI(a),shimTrackEventTransceiver(a),shimGetUserMedia(a),shimAudioContext(a),shimRTCIceCandidate(a),shimRTCIceCandidateRelayProtocol(a),shimMaxMessageSize(a,_),shimSendThrowTypeError(a),removeExtmapAllowMixed(a,_);break;default:b("Unsupported browser!");break}return $}adapterFactory({window:typeof window>"u"?void 0:window});const DECRYPTION_FAILURE_TOLERANCE=10,E2EE_FLAG="lk_e2ee",SALT="LKFrameEncryptionKey",KEY_PROVIDER_DEFAULTS={sharedKey:!1,ratchetSalt:SALT,ratchetWindowSize:8,failureTolerance:DECRYPTION_FAILURE_TOLERANCE,keyringSize:16};var KeyProviderEvent;(function(a){a.SetKey="setKey",a.RatchetRequest="ratchetRequest",a.KeyRatcheted="keyRatcheted"})(KeyProviderEvent||(KeyProviderEvent={}));var KeyHandlerEvent;(function(a){a.KeyRatcheted="keyRatcheted"})(KeyHandlerEvent||(KeyHandlerEvent={}));var EncryptionEvent;(function(a){a.ParticipantEncryptionStatusChanged="participantEncryptionStatusChanged",a.EncryptionError="encryptionError"})(EncryptionEvent||(EncryptionEvent={}));var CryptorEvent;(function(a){a.Error="cryptorError"})(CryptorEvent||(CryptorEvent={}));function isE2EESupported(){return isInsertableStreamSupported()||isScriptTransformSupported()}function isScriptTransformSupported(){return typeof window.RTCRtpScriptTransform<"u"}function isInsertableStreamSupported(){return typeof window.RTCRtpSender<"u"&&typeof window.RTCRtpSender.prototype.createEncodedStreams<"u"}class BaseKeyProvider extends eventsExports$1.EventEmitter{constructor(){let c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super(),this.onKeyRatcheted=(b,_)=>{livekitLogger.debug("key ratcheted event received",{material:b,keyIndex:_})},this.keyInfoMap=new Map,this.options=Object.assign(Object.assign({},KEY_PROVIDER_DEFAULTS),c),this.on(KeyProviderEvent.KeyRatcheted,this.onKeyRatcheted)}onSetEncryptionKey(c,b,_){const $={key:c,participantIdentity:b,keyIndex:_};if(!this.options.sharedKey&&!b)throw new Error("participant identity needs to be passed for encryption key if sharedKey option is false");this.keyInfoMap.set("".concat(b??"shared","-").concat(_??0),$),this.emit(KeyProviderEvent.SetKey,$)}getKeys(){return Array.from(this.keyInfoMap.values())}getOptions(){return this.options}ratchetKey(c,b){this.emit(KeyProviderEvent.RatchetRequest,c,b)}}class LivekitError extends Error{constructor(c,b){super(b||"an error has occured"),this.code=c}}class ConnectionError extends LivekitError{constructor(c,b,_){super(1,c),this.status=_,this.reason=b}}class DeviceUnsupportedError extends LivekitError{constructor(c){super(21,c??"device is unsupported")}}class TrackInvalidError extends LivekitError{constructor(c){super(20,c??"track is invalid")}}class UnsupportedServer extends LivekitError{constructor(c){super(10,c??"unsupported server")}}class UnexpectedConnectionState extends LivekitError{constructor(c){super(12,c??"unexpected connection state")}}class NegotiationError extends LivekitError{constructor(c){super(13,c??"unable to negotiate")}}var MediaDeviceFailure;(function(a){a.PermissionDenied="PermissionDenied",a.NotFound="NotFound",a.DeviceInUse="DeviceInUse",a.Other="Other"})(MediaDeviceFailure||(MediaDeviceFailure={}));(function(a){function c(b){if(b&&"name"in b)return b.name==="NotFoundError"||b.name==="DevicesNotFoundError"?a.NotFound:b.name==="NotAllowedError"||b.name==="PermissionDeniedError"?a.PermissionDenied:b.name==="NotReadableError"||b.name==="TrackStartError"?a.DeviceInUse:a.Other}a.getFailure=c})(MediaDeviceFailure||(MediaDeviceFailure={}));var RoomEvent;(function(a){a.Connected="connected",a.Reconnecting="reconnecting",a.Reconnected="reconnected",a.Disconnected="disconnected",a.ConnectionStateChanged="connectionStateChanged",a.MediaDevicesChanged="mediaDevicesChanged",a.ParticipantConnected="participantConnected",a.ParticipantDisconnected="participantDisconnected",a.TrackPublished="trackPublished",a.TrackSubscribed="trackSubscribed",a.TrackSubscriptionFailed="trackSubscriptionFailed",a.TrackUnpublished="trackUnpublished",a.TrackUnsubscribed="trackUnsubscribed",a.TrackMuted="trackMuted",a.TrackUnmuted="trackUnmuted",a.LocalTrackPublished="localTrackPublished",a.LocalTrackUnpublished="localTrackUnpublished",a.LocalAudioSilenceDetected="localAudioSilenceDetected",a.ActiveSpeakersChanged="activeSpeakersChanged",a.ParticipantMetadataChanged="participantMetadataChanged",a.ParticipantNameChanged="participantNameChanged",a.RoomMetadataChanged="roomMetadataChanged",a.DataReceived="dataReceived",a.ConnectionQualityChanged="connectionQualityChanged",a.TrackStreamStateChanged="trackStreamStateChanged",a.TrackSubscriptionPermissionChanged="trackSubscriptionPermissionChanged",a.TrackSubscriptionStatusChanged="trackSubscriptionStatusChanged",a.AudioPlaybackStatusChanged="audioPlaybackChanged",a.VideoPlaybackStatusChanged="videoPlaybackChanged",a.MediaDevicesError="mediaDevicesError",a.ParticipantPermissionsChanged="participantPermissionsChanged",a.SignalConnected="signalConnected",a.RecordingStatusChanged="recordingStatusChanged",a.ParticipantEncryptionStatusChanged="participantEncryptionStatusChanged",a.EncryptionError="encryptionError",a.DCBufferStatusChanged="dcBufferStatusChanged",a.ActiveDeviceChanged="activeDeviceChanged"})(RoomEvent||(RoomEvent={}));var ParticipantEvent;(function(a){a.TrackPublished="trackPublished",a.TrackSubscribed="trackSubscribed",a.TrackSubscriptionFailed="trackSubscriptionFailed",a.TrackUnpublished="trackUnpublished",a.TrackUnsubscribed="trackUnsubscribed",a.TrackMuted="trackMuted",a.TrackUnmuted="trackUnmuted",a.LocalTrackPublished="localTrackPublished",a.LocalTrackUnpublished="localTrackUnpublished",a.ParticipantMetadataChanged="participantMetadataChanged",a.ParticipantNameChanged="participantNameChanged",a.DataReceived="dataReceived",a.IsSpeakingChanged="isSpeakingChanged",a.ConnectionQualityChanged="connectionQualityChanged",a.TrackStreamStateChanged="trackStreamStateChanged",a.TrackSubscriptionPermissionChanged="trackSubscriptionPermissionChanged",a.TrackSubscriptionStatusChanged="trackSubscriptionStatusChanged",a.MediaDevicesError="mediaDevicesError",a.AudioStreamAcquired="audioStreamAcquired",a.ParticipantPermissionsChanged="participantPermissionsChanged",a.PCTrackAdded="pcTrackAdded"})(ParticipantEvent||(ParticipantEvent={}));var EngineEvent;(function(a){a.TransportsCreated="transportsCreated",a.Connected="connected",a.Disconnected="disconnected",a.Resuming="resuming",a.Resumed="resumed",a.Restarting="restarting",a.Restarted="restarted",a.SignalResumed="signalResumed",a.SignalRestarted="signalRestarted",a.Closing="closing",a.MediaTrackAdded="mediaTrackAdded",a.ActiveSpeakersUpdate="activeSpeakersUpdate",a.DataPacketReceived="dataPacketReceived",a.RTPVideoMapUpdate="rtpVideoMapUpdate",a.DCBufferStatusChanged="dcBufferStatusChanged",a.ParticipantUpdate="participantUpdate",a.RoomUpdate="roomUpdate",a.SpeakersChanged="speakersChanged",a.StreamStateChanged="streamStateChanged",a.ConnectionQualityUpdate="connectionQualityUpdate",a.SubscriptionError="subscriptionError",a.SubscriptionPermissionUpdate="subscriptionPermissionUpdate",a.RemoteMute="remoteMute",a.SubscribedQualityUpdate="subscribedQualityUpdate",a.LocalTrackUnpublished="localTrackUnpublished",a.Offline="offline"})(EngineEvent||(EngineEvent={}));var TrackEvent;(function(a){a.Message="message",a.Muted="muted",a.Unmuted="unmuted",a.Restarted="restarted",a.Ended="ended",a.Subscribed="subscribed",a.Unsubscribed="unsubscribed",a.UpdateSettings="updateSettings",a.UpdateSubscription="updateSubscription",a.AudioPlaybackStarted="audioPlaybackStarted",a.AudioPlaybackFailed="audioPlaybackFailed",a.AudioSilenceDetected="audioSilenceDetected",a.VisibilityChanged="visibilityChanged",a.VideoDimensionsChanged="videoDimensionsChanged",a.VideoPlaybackStarted="videoPlaybackStarted",a.VideoPlaybackFailed="videoPlaybackFailed",a.ElementAttached="elementAttached",a.ElementDetached="elementDetached",a.UpstreamPaused="upstreamPaused",a.UpstreamResumed="upstreamResumed",a.SubscriptionPermissionChanged="subscriptionPermissionChanged",a.SubscriptionStatusChanged="subscriptionStatusChanged",a.SubscriptionFailed="subscriptionFailed",a.TrackProcessorUpdate="trackProcessorUpdate"})(TrackEvent||(TrackEvent={}));function r$2(a,c,b){var _,$,k;c===void 0&&(c=50),b===void 0&&(b={});var et=(_=b.isImmediate)!=null&&_,nt=($=b.callback)!=null&&$,ot=b.maxWait,ht=Date.now(),vt=[];function _t(){if(ot!==void 0){var $t=Date.now()-ht;if($t+c>=ot)return ot-$t}return c}var kt=function(){var $t=[].slice.call(arguments),Tt=this;return new Promise(function(At,Mt){var Dt=et&&k===void 0;if(k!==void 0&&clearTimeout(k),k=setTimeout(function(){if(k=void 0,ht=Date.now(),!et){var xt=a.apply(Tt,$t);nt&&nt(xt),vt.forEach(function(Jt){return(0,Jt.resolve)(xt)}),vt=[]}},_t()),Dt){var Rt=a.apply(Tt,$t);return nt&&nt(Rt),At(Rt)}vt.push({resolve:At,reject:Mt})})};return kt.cancel=function($t){k!==void 0&&clearTimeout(k),vt.forEach(function(Tt){return(0,Tt.reject)($t)}),vt=[]},kt}const commonVersionIdentifier=/version\/(\d+(\.?_?\d+)+)/i;let browserDetails;function getBrowser(a){let c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(typeof a>"u"&&typeof navigator>"u")return;const b=(a??navigator.userAgent).toLowerCase();if(browserDetails===void 0||c){const _=browsersList.find($=>{let{test:k}=$;return k.test(b)});browserDetails=_==null?void 0:_.describe(b)}return browserDetails}const browsersList=[{test:/firefox|iceweasel|fxios/i,describe(a){return{name:"Firefox",version:getMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,a),os:a.toLowerCase().includes("fxios")?"iOS":void 0}}},{test:/chrom|crios|crmo/i,describe(a){return{name:"Chrome",version:getMatch(/(?:chrome|chromium|crios|crmo)\/(\d+(\.?_?\d+)+)/i,a),os:a.toLowerCase().includes("crios")?"iOS":void 0}}},{test:/safari|applewebkit/i,describe(a){return{name:"Safari",version:getMatch(commonVersionIdentifier,a),os:a.includes("mobile/")?"iOS":"macOS"}}}];function getMatch(a,c){let b=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1;const _=c.match(a);return _&&_.length>=b&&_[b]||""}var version$1$1="2.0.10";const version$3=version$1$1,protocolVersion=12;class CriticalTimers{}CriticalTimers.setTimeout=function(){return setTimeout(...arguments)};CriticalTimers.setInterval=function(){return setInterval(...arguments)};CriticalTimers.clearTimeout=function(){return clearTimeout(...arguments)};CriticalTimers.clearInterval=function(){return clearInterval(...arguments)};class VideoPreset{constructor(c,b,_,$,k){if(typeof c=="object")this.width=c.width,this.height=c.height,this.aspectRatio=c.aspectRatio,this.encoding={maxBitrate:c.maxBitrate,maxFramerate:c.maxFramerate,priority:c.priority};else if(b!==void 0&&_!==void 0)this.width=c,this.height=b,this.aspectRatio=c/b,this.encoding={maxBitrate:_,maxFramerate:$,priority:k};else throw new TypeError("Unsupported options: provide at least width, height and maxBitrate")}get resolution(){return{width:this.width,height:this.height,frameRate:this.encoding.maxFramerate,aspectRatio:this.aspectRatio}}}const backupCodecs=["vp8","h264"],videoCodecs=["vp8","h264","vp9","av1"];function isBackupCodec(a){return!!backupCodecs.find(c=>c===a)}var AudioPresets;(function(a){a.telephone={maxBitrate:12e3},a.speech={maxBitrate:2e4},a.music={maxBitrate:32e3},a.musicStereo={maxBitrate:48e3},a.musicHighQuality={maxBitrate:64e3},a.musicHighQualityStereo={maxBitrate:96e3}})(AudioPresets||(AudioPresets={}));const VideoPresets={h90:new VideoPreset(160,90,9e4,20),h180:new VideoPreset(320,180,16e4,20),h216:new VideoPreset(384,216,18e4,20),h360:new VideoPreset(640,360,45e4,20),h540:new VideoPreset(960,540,8e5,25),h720:new VideoPreset(1280,720,17e5,30),h1080:new VideoPreset(1920,1080,3e6,30),h1440:new VideoPreset(2560,1440,5e6,30),h2160:new VideoPreset(3840,2160,8e6,30)},VideoPresets43={h120:new VideoPreset(160,120,7e4,20),h180:new VideoPreset(240,180,125e3,20),h240:new VideoPreset(320,240,14e4,20),h360:new VideoPreset(480,360,33e4,20),h480:new VideoPreset(640,480,5e5,20),h540:new VideoPreset(720,540,6e5,25),h720:new VideoPreset(960,720,13e5,30),h1080:new VideoPreset(1440,1080,23e5,30),h1440:new VideoPreset(1920,1440,38e5,30)},ScreenSharePresets={h360fps3:new VideoPreset(640,360,2e5,3,"medium"),h360fps15:new VideoPreset(640,360,4e5,15,"medium"),h720fps5:new VideoPreset(1280,720,8e5,5,"medium"),h720fps15:new VideoPreset(1280,720,15e5,15,"medium"),h720fps30:new VideoPreset(1280,720,2e6,30,"medium"),h1080fps15:new VideoPreset(1920,1080,25e5,15,"medium"),h1080fps30:new VideoPreset(1920,1080,5e6,30,"medium"),original:new VideoPreset(0,0,7e6,30,"medium")};function cloneDeep(a){if(!(typeof a>"u"))return typeof structuredClone=="function"?structuredClone(a):JSON.parse(JSON.stringify(a))}const BACKGROUND_REACTION_DELAY=5e3,recycledElements=[];var VideoQuality;(function(a){a[a.LOW=0]="LOW",a[a.MEDIUM=1]="MEDIUM",a[a.HIGH=2]="HIGH"})(VideoQuality||(VideoQuality={}));class Track extends eventsExports$1.EventEmitter{constructor(c,b){let _=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};var $;super(),this.attachedElements=[],this.isMuted=!1,this.streamState=Track.StreamState.Active,this.isInBackground=!1,this._currentBitrate=0,this.log=livekitLogger,this.appVisibilityChangedListener=()=>{this.backgroundTimeout&&clearTimeout(this.backgroundTimeout),document.visibilityState==="hidden"?this.backgroundTimeout=setTimeout(()=>this.handleAppVisibilityChanged(),BACKGROUND_REACTION_DELAY):this.handleAppVisibilityChanged()},this.log=getLogger(($=_.loggerName)!==null&&$!==void 0?$:LoggerNames.Track),this.loggerContextCb=_.loggerContextCb,this.setMaxListeners(100),this.kind=b,this._mediaStreamTrack=c,this._mediaStreamID=c.id,this.source=Track.Source.Unknown}get logContext(){var c;return Object.assign(Object.assign({},(c=this.loggerContextCb)===null||c===void 0?void 0:c.call(this)),getLogContextFromTrack(this))}get currentBitrate(){return this._currentBitrate}get mediaStreamTrack(){return this._mediaStreamTrack}get mediaStreamID(){return this._mediaStreamID}attach(c){let b="audio";this.kind===Track.Kind.Video&&(b="video"),this.attachedElements.length===0&&Track.Kind.Video&&this.addAppVisibilityListener(),c||(b==="audio"&&(recycledElements.forEach(k=>{k.parentElement===null&&!c&&(c=k)}),c&&recycledElements.splice(recycledElements.indexOf(c),1)),c||(c=document.createElement(b))),this.attachedElements.includes(c)||this.attachedElements.push(c),attachToElement(this.mediaStreamTrack,c);const _=c.srcObject.getTracks(),$=_.some(k=>k.kind==="audio");return c.play().then(()=>{this.emit($?TrackEvent.AudioPlaybackStarted:TrackEvent.VideoPlaybackStarted)}).catch(k=>{k.name==="NotAllowedError"?this.emit($?TrackEvent.AudioPlaybackFailed:TrackEvent.VideoPlaybackFailed,k):k.name==="AbortError"?livekitLogger.debug("".concat($?"audio":"video"," playback aborted, likely due to new play request")):livekitLogger.warn("could not playback ".concat($?"audio":"video"),k),$&&c&&_.some(et=>et.kind==="video")&&k.name==="NotAllowedError"&&(c.muted=!0,c.play().catch(()=>{}))}),this.emit(TrackEvent.ElementAttached,c),c}detach(c){try{if(c){detachTrack(this.mediaStreamTrack,c);const _=this.attachedElements.indexOf(c);return _>=0&&(this.attachedElements.splice(_,1),this.recycleElement(c),this.emit(TrackEvent.ElementDetached,c)),c}const b=[];return this.attachedElements.forEach(_=>{detachTrack(this.mediaStreamTrack,_),b.push(_),this.recycleElement(_),this.emit(TrackEvent.ElementDetached,_)}),this.attachedElements=[],b}finally{this.attachedElements.length===0&&this.removeAppVisibilityListener()}}stop(){this.stopMonitor(),this._mediaStreamTrack.stop()}enable(){this._mediaStreamTrack.enabled=!0}disable(){this._mediaStreamTrack.enabled=!1}stopMonitor(){this.monitorInterval&&clearInterval(this.monitorInterval)}updateLoggerOptions(c){c.loggerName&&(this.log=getLogger(c.loggerName)),c.loggerContextCb&&(this.loggerContextCb=c.loggerContextCb)}recycleElement(c){if(c instanceof HTMLAudioElement){let b=!0;c.pause(),recycledElements.forEach(_=>{_.parentElement||(b=!1)}),b&&recycledElements.push(c)}}handleAppVisibilityChanged(){return __awaiter$3(this,void 0,void 0,function*(){this.isInBackground=document.visibilityState==="hidden"})}addAppVisibilityListener(){isWeb()?(this.isInBackground=document.visibilityState==="hidden",document.addEventListener("visibilitychange",this.appVisibilityChangedListener)):this.isInBackground=!1}removeAppVisibilityListener(){isWeb()&&document.removeEventListener("visibilitychange",this.appVisibilityChangedListener)}}function attachToElement(a,c){let b;c.srcObject instanceof MediaStream?b=c.srcObject:b=new MediaStream;let _;a.kind==="audio"?_=b.getAudioTracks():_=b.getVideoTracks(),_.includes(a)||(_.forEach($=>{b.removeTrack($)}),b.addTrack(a)),(!isSafari()||!(c instanceof HTMLVideoElement))&&(c.autoplay=!0),c.muted=b.getAudioTracks().length===0,c instanceof HTMLVideoElement&&(c.playsInline=!0),c.srcObject!==b&&(c.srcObject=b,(isSafari()||isFireFox())&&c instanceof HTMLVideoElement&&setTimeout(()=>{c.srcObject=b,c.play().catch(()=>{})},0))}function detachTrack(a,c){if(c.srcObject instanceof MediaStream){const b=c.srcObject;b.removeTrack(a),b.getTracks().length>0?c.srcObject=b:c.srcObject=null}}(function(a){let c;(function(ht){ht.Audio="audio",ht.Video="video",ht.Unknown="unknown"})(c=a.Kind||(a.Kind={}));let b;(function(ht){ht.Camera="camera",ht.Microphone="microphone",ht.ScreenShare="screen_share",ht.ScreenShareAudio="screen_share_audio",ht.Unknown="unknown"})(b=a.Source||(a.Source={}));let _;(function(ht){ht.Active="active",ht.Paused="paused",ht.Unknown="unknown"})(_=a.StreamState||(a.StreamState={}));function $(ht){switch(ht){case c.Audio:return TrackType.AUDIO;case c.Video:return TrackType.VIDEO;default:return TrackType.DATA}}a.kindToProto=$;function k(ht){switch(ht){case TrackType.AUDIO:return c.Audio;case TrackType.VIDEO:return c.Video;default:return c.Unknown}}a.kindFromProto=k;function et(ht){switch(ht){case b.Camera:return TrackSource.CAMERA;case b.Microphone:return TrackSource.MICROPHONE;case b.ScreenShare:return TrackSource.SCREEN_SHARE;case b.ScreenShareAudio:return TrackSource.SCREEN_SHARE_AUDIO;default:return TrackSource.UNKNOWN}}a.sourceToProto=et;function nt(ht){switch(ht){case TrackSource.CAMERA:return b.Camera;case TrackSource.MICROPHONE:return b.Microphone;case TrackSource.SCREEN_SHARE:return b.ScreenShare;case TrackSource.SCREEN_SHARE_AUDIO:return b.ScreenShareAudio;default:return b.Unknown}}a.sourceFromProto=nt;function ot(ht){switch(ht){case StreamState.ACTIVE:return _.Active;case StreamState.PAUSED:return _.Paused;default:return _.Unknown}}a.streamStateFromProto=ot})(Track||(Track={}));function mergeDefaultOptions(a,c,b){var _;const $=(_=cloneDeep(a))!==null&&_!==void 0?_:{};return $.audio===!0&&($.audio={}),$.video===!0&&($.video={}),$.audio&&mergeObjectWithoutOverwriting($.audio,c),$.video&&mergeObjectWithoutOverwriting($.video,b),$}function mergeObjectWithoutOverwriting(a,c){return Object.keys(c).forEach(b=>{a[b]===void 0&&(a[b]=c[b])}),a}function constraintsForOptions(a){const c={};if(a.video)if(typeof a.video=="object"){const b={},_=b,$=a.video;Object.keys($).forEach(k=>{switch(k){case"resolution":mergeObjectWithoutOverwriting(_,$.resolution);break;default:_[k]=$[k]}}),c.video=b}else c.video=a.video;else c.video=!1;return a.audio?typeof a.audio=="object"?c.audio=a.audio:c.audio=!0:c.audio=!1,c}function detectSilence(a){let c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:200;return __awaiter$3(this,void 0,void 0,function*(){const b=getNewAudioContext();if(b){const _=b.createAnalyser();_.fftSize=2048;const $=_.frequencyBinCount,k=new Uint8Array($);b.createMediaStreamSource(new MediaStream([a.mediaStreamTrack])).connect(_),yield sleep(c),_.getByteTimeDomainData(k);const nt=k.some(ot=>ot!==128&&ot!==0);return b.close(),!nt}return!1})}function getNewAudioContext(){const a=typeof window<"u"&&(window.AudioContext||window.webkitAudioContext);if(a)return new a({latencyHint:"interactive"})}function sourceToKind(a){return a===Track.Source.Microphone?"audioinput":a===Track.Source.Camera?"videoinput":void 0}function screenCaptureToDisplayMediaStreamOptions(a){var c,b;let _=(c=a.video)!==null&&c!==void 0?c:!0;return a.resolution&&a.resolution.width>0&&a.resolution.height>0&&(_=typeof _=="boolean"?{}:_,isSafari()?_=Object.assign(Object.assign({},_),{width:{max:a.resolution.width},height:{max:a.resolution.height},frameRate:a.resolution.frameRate}):_=Object.assign(Object.assign({},_),{width:{ideal:a.resolution.width},height:{ideal:a.resolution.height},frameRate:a.resolution.frameRate})),{audio:(b=a.audio)!==null&&b!==void 0?b:!1,video:_,controller:a.controller,selfBrowserSurface:a.selfBrowserSurface,surfaceSwitching:a.surfaceSwitching,systemAudio:a.systemAudio,preferCurrentTab:a.preferCurrentTab}}function mimeTypeToVideoCodecString(a){const c=a.split("/")[1].toLowerCase();if(!videoCodecs.includes(c))throw Error("Video codec not supported: ".concat(c));return c}function getTrackPublicationInfo(a){const c=[];return a.forEach(b=>{b.track!==void 0&&c.push(new TrackPublishedResponse({cid:b.track.mediaStreamID,track:b.trackInfo}))}),c}function getLogContextFromTrack(a){return a instanceof Track?{trackID:a.sid,source:a.source,muted:a.isMuted,enabled:a.mediaStreamTrack.enabled,kind:a.kind,streamID:a.mediaStreamID,streamTrackID:a.mediaStreamTrack.id}:{trackID:a.trackSid,enabled:a.isEnabled,muted:a.isMuted,trackInfo:Object.assign({mimeType:a.mimeType,name:a.trackName,encrypted:a.isEncrypted,kind:a.kind,source:a.source},a.track?getLogContextFromTrack(a.track):{})}}const separator="|",ddExtensionURI="https://aomediacodec.github.io/av1-rtp-spec/#dependency-descriptor-rtp-header-extension";function unpackStreamId(a){const c=a.split(separator);return c.length>1?[c[0],a.substr(c[0].length+1)]:[a,""]}function sleep(a){return __awaiter$3(this,void 0,void 0,function*(){return new Promise(c=>CriticalTimers.setTimeout(c,a))})}function supportsTransceiver(){return"addTransceiver"in RTCPeerConnection.prototype}function supportsAddTrack(){return"addTrack"in RTCPeerConnection.prototype}function supportsAV1(){if(!("getCapabilities"in RTCRtpSender)||isSafari())return!1;const a=RTCRtpSender.getCapabilities("video");let c=!1;if(a){for(const b of a.codecs)if(b.mimeType==="video/AV1"){c=!0;break}}return c}function supportsVP9(){if(!("getCapabilities"in RTCRtpSender)||isFireFox())return!1;if(isSafari()){const b=getBrowser();if(b!=null&&b.version&&compareVersions(b.version,"16")<0)return!1}const a=RTCRtpSender.getCapabilities("video");let c=!1;if(a){for(const b of a.codecs)if(b.mimeType==="video/VP9"){c=!0;break}}return c}function isSVCCodec(a){return a==="av1"||a==="vp9"}function supportsSetSinkId(a){return document?(a||(a=document.createElement("audio")),"setSinkId"in a):!1}const setCodecPreferencesVersions={Chrome:"100",Safari:"15",Firefox:"100"};function supportsSetCodecPreferences(a){if(!isWeb()||!("setCodecPreferences"in a))return!1;const c=getBrowser();if(!(c!=null&&c.name)||!c.version)return!1;const b=setCodecPreferencesVersions[c.name];return b?compareVersions(c.version,b)>=0:!1}function isBrowserSupported(){return typeof RTCPeerConnection>"u"?!1:supportsTransceiver()||supportsAddTrack()}function isFireFox(){var a;return((a=getBrowser())===null||a===void 0?void 0:a.name)==="Firefox"}function isSafari(){var a;return((a=getBrowser())===null||a===void 0?void 0:a.name)==="Safari"}function isSafari17(){const a=getBrowser();return(a==null?void 0:a.name)==="Safari"&&a.version.startsWith("17.")}function isMobile(){return isWeb()?/Tablet|iPad|Mobile|Android|BlackBerry/.test(navigator.userAgent):!1}function isWeb(){return typeof document<"u"}function isReactNative(){return navigator.product=="ReactNative"}function isCloud(a){return a.hostname.endsWith(".livekit.cloud")||a.hostname.endsWith(".livekit.run")}function getLKReactNativeInfo(){if(global$1&&global$1.LiveKitReactNativeGlobal)return global$1.LiveKitReactNativeGlobal}function getReactNativeOs(){if(!isReactNative())return;let a=getLKReactNativeInfo();if(a)return a.platform}function getDevicePixelRatio(){if(isWeb())return window.devicePixelRatio;if(isReactNative()){let a=getLKReactNativeInfo();if(a)return a.devicePixelRatio}return 1}function compareVersions(a,c){const b=a.split("."),_=c.split("."),$=Math.min(b.length,_.length);for(let k=0;k<$;++k){const et=parseInt(b[k],10),nt=parseInt(_[k],10);if(et>nt)return 1;if(et<nt)return-1;if(k===$-1&&et===nt)return 0}return a===""&&c!==""?-1:c===""?1:b.length==_.length?0:b.length<_.length?-1:1}function roDispatchCallback(a){for(const c of a)c.target.handleResize(c)}function ioDispatchCallback(a){for(const c of a)c.target.handleVisibilityChanged(c)}let resizeObserver=null;const getResizeObserver=()=>(resizeObserver||(resizeObserver=new ResizeObserver(roDispatchCallback)),resizeObserver);let intersectionObserver=null;const getIntersectionObserver=()=>(intersectionObserver||(intersectionObserver=new IntersectionObserver(ioDispatchCallback,{root:null,rootMargin:"0px"})),intersectionObserver);function getClientInfo(){var a;const c=new ClientInfo({sdk:ClientInfo_SDK.JS,protocol:protocolVersion,version:version$3});return isReactNative()&&(c.os=(a=getReactNativeOs())!==null&&a!==void 0?a:""),c}function createDummyVideoStreamTrack(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:16,c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:16,b=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,_=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;const $=document.createElement("canvas");$.width=a,$.height=c;const k=$.getContext("2d");k==null||k.fillRect(0,0,$.width,$.height),_&&k&&(k.beginPath(),k.arc(a/2,c/2,50,0,Math.PI*2,!0),k.closePath(),k.fillStyle="grey",k.fill());const et=$.captureStream(),[nt]=et.getTracks();if(!nt)throw Error("Could not get empty media stream video track");return nt.enabled=b,nt}let emptyAudioStreamTrack;function getEmptyAudioStreamTrack(){if(!emptyAudioStreamTrack){const a=new AudioContext,c=a.createOscillator(),b=a.createGain();b.gain.setValueAtTime(0,0);const _=a.createMediaStreamDestination();if(c.connect(b),b.connect(_),c.start(),[emptyAudioStreamTrack]=_.stream.getAudioTracks(),!emptyAudioStreamTrack)throw Error("Could not get empty media stream audio track");emptyAudioStreamTrack.enabled=!1}return emptyAudioStreamTrack.clone()}class Future{constructor(c,b){this.onFinally=b,this.promise=new Promise((_,$)=>__awaiter$3(this,void 0,void 0,function*(){this.resolve=_,this.reject=$,c&&(yield c(_,$))})).finally(()=>{var _;return(_=this.onFinally)===null||_===void 0?void 0:_.call(this)})}}class Mutex{constructor(){this._locking=Promise.resolve(),this._locks=0}isLocked(){return this._locks>0}lock(){this._locks+=1;let c;const b=new Promise($=>c=()=>{this._locks-=1,$()}),_=this._locking.then(()=>c);return this._locking=this._locking.then(()=>b),_}}function isVideoCodec(a){return videoCodecs.includes(a)}function unwrapConstraint(a){if(typeof a=="string")return a;if(Array.isArray(a))return a[0];if(a.exact)return Array.isArray(a.exact)?a.exact[0]:a.exact;if(a.ideal)return Array.isArray(a.ideal)?a.ideal[0]:a.ideal;throw Error("could not unwrap constraint")}function toWebsocketUrl(a){return a.startsWith("http")?a.replace(/^(http)/,"ws"):a}function toHttpUrl(a){return a.startsWith("ws")?a.replace(/^(ws)/,"http"):a}const defaultId="default";class DeviceManager{static getInstance(){return this.instance===void 0&&(this.instance=new DeviceManager),this.instance}getDevices(c){let b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;var _;return __awaiter$3(this,void 0,void 0,function*(){if(((_=DeviceManager.userMediaPromiseMap)===null||_===void 0?void 0:_.size)>0){livekitLogger.debug("awaiting getUserMedia promise");try{c?yield DeviceManager.userMediaPromiseMap.get(c):yield Promise.all(DeviceManager.userMediaPromiseMap.values())}catch{livekitLogger.warn("error waiting for media permissons")}}let $=yield navigator.mediaDevices.enumerateDevices();if(b&&!(isSafari()&&this.hasDeviceInUse(c))&&($.length===0||$.some(et=>{const nt=et.label==="",ot=c?et.kind===c:!0;return nt&&ot}))){const et={video:c!=="audioinput"&&c!=="audiooutput",audio:c!=="videoinput"},nt=yield navigator.mediaDevices.getUserMedia(et);$=yield navigator.mediaDevices.enumerateDevices(),nt.getTracks().forEach(ot=>{ot.stop()})}return c&&($=$.filter(k=>k.kind===c)),$})}normalizeDeviceId(c,b,_){return __awaiter$3(this,void 0,void 0,function*(){if(b!==defaultId)return b;const $=yield this.getDevices(c),k=new Map($.map(nt=>[nt.groupId,0]));$.forEach(nt=>{var ot;return k.set(nt.groupId,((ot=k.get(nt.groupId))!==null&&ot!==void 0?ot:0)+1)});const et=$.find(nt=>{var ot;return(_===nt.groupId||((ot=k.get(nt.groupId))!==null&&ot!==void 0?ot:0)>1)&&nt.deviceId!==defaultId});return et==null?void 0:et.deviceId})}hasDeviceInUse(c){return c?DeviceManager.userMediaPromiseMap.has(c):DeviceManager.userMediaPromiseMap.size>0}}DeviceManager.mediaDeviceKinds=["audioinput","audiooutput","videoinput"];DeviceManager.userMediaPromiseMap=new Map;const defaultDimensionsTimeout=1e3;class LocalTrack extends Track{get constraints(){return this._constraints}constructor(c,b,_){let $=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,k=arguments.length>4?arguments[4]:void 0;super(c,b,k),this._isUpstreamPaused=!1,this.handleTrackMuteEvent=()=>this.debouncedTrackMuteHandler().catch(()=>this.log.debug("track mute bounce got cancelled by an unmute event",this.logContext)),this.debouncedTrackMuteHandler=r$2(()=>__awaiter$3(this,void 0,void 0,function*(){yield this.pauseUpstream()}),5e3),this.handleTrackUnmuteEvent=()=>__awaiter$3(this,void 0,void 0,function*(){this.debouncedTrackMuteHandler.cancel("unmute"),yield this.resumeUpstream()}),this.handleEnded=()=>{this.isInBackground&&(this.reacquireTrack=!0),this._mediaStreamTrack.removeEventListener("mute",this.handleTrackMuteEvent),this._mediaStreamTrack.removeEventListener("unmute",this.handleTrackUnmuteEvent),this.emit(TrackEvent.Ended,this)},this.reacquireTrack=!1,this.providedByUser=$,this.muteLock=new Mutex,this.pauseUpstreamLock=new Mutex,this.processorLock=new Mutex,this.restartLock=new Mutex,this.setMediaStreamTrack(c,!0),this._constraints=c.getConstraints(),_&&(this._constraints=_)}get id(){return this._mediaStreamTrack.id}get dimensions(){if(this.kind!==Track.Kind.Video)return;const{width:c,height:b}=this._mediaStreamTrack.getSettings();if(c&&b)return{width:c,height:b}}get isUpstreamPaused(){return this._isUpstreamPaused}get isUserProvided(){return this.providedByUser}get mediaStreamTrack(){var c,b;return(b=(c=this.processor)===null||c===void 0?void 0:c.processedTrack)!==null&&b!==void 0?b:this._mediaStreamTrack}setMediaStreamTrack(c,b){return __awaiter$3(this,void 0,void 0,function*(){if(c===this._mediaStreamTrack&&!b)return;this._mediaStreamTrack&&(this.attachedElements.forEach($=>{detachTrack(this._mediaStreamTrack,$)}),this.debouncedTrackMuteHandler.cancel("new-track"),this._mediaStreamTrack.removeEventListener("ended",this.handleEnded),this._mediaStreamTrack.removeEventListener("mute",this.handleTrackMuteEvent),this._mediaStreamTrack.removeEventListener("unmute",this.handleTrackUnmuteEvent)),this.mediaStream=new MediaStream([c]),c&&(c.addEventListener("ended",this.handleEnded),c.addEventListener("mute",this.handleTrackMuteEvent),c.addEventListener("unmute",this.handleTrackUnmuteEvent),this._constraints=c.getConstraints());let _;if(this.processor&&c){const $=yield this.processorLock.lock();try{if(this.log.debug("restarting processor",this.logContext),this.kind==="unknown")throw TypeError("cannot set processor on track of unknown kind");this.processorElement&&(attachToElement(c,this.processorElement),this.processorElement.muted=!0),yield this.processor.restart({track:c,kind:this.kind,element:this.processorElement}),_=this.processor.processedTrack}finally{$()}}this.sender&&(yield this.sender.replaceTrack(_??c)),!this.providedByUser&&this._mediaStreamTrack!==c&&this._mediaStreamTrack.stop(),this._mediaStreamTrack=c,c&&(this._mediaStreamTrack.enabled=!this.isMuted,yield this.resumeUpstream(),this.attachedElements.forEach($=>{attachToElement(_??c,$)}))})}waitForDimensions(){let c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:defaultDimensionsTimeout;var b;return __awaiter$3(this,void 0,void 0,function*(){if(this.kind===Track.Kind.Audio)throw new Error("cannot get dimensions for audio tracks");((b=getBrowser())===null||b===void 0?void 0:b.os)==="iOS"&&(yield sleep(10));const _=Date.now();for(;Date.now()-_<c;){const $=this.dimensions;if($)return $;yield sleep(50)}throw new TrackInvalidError("unable to get track dimensions after timeout")})}getDeviceId(){return __awaiter$3(this,void 0,void 0,function*(){if(this.source===Track.Source.ScreenShare)return;const{deviceId:c,groupId:b}=this._mediaStreamTrack.getSettings(),_=this.kind===Track.Kind.Audio?"audioinput":"videoinput";return DeviceManager.getInstance().normalizeDeviceId(_,c,b)})}mute(){return __awaiter$3(this,void 0,void 0,function*(){return this.setTrackMuted(!0),this})}unmute(){return __awaiter$3(this,void 0,void 0,function*(){return this.setTrackMuted(!1),this})}replaceTrack(c,b){return __awaiter$3(this,void 0,void 0,function*(){if(!this.sender)throw new TrackInvalidError("unable to replace an unpublished track");let _,$;return typeof b=="boolean"?_=b:b!==void 0&&(_=b.userProvidedTrack,$=b.stopProcessor),this.providedByUser=_??!0,this.log.debug("replace MediaStreamTrack",this.logContext),yield this.setMediaStreamTrack(c),$&&this.processor&&(yield this.stopProcessor()),this})}restart(c){return __awaiter$3(this,void 0,void 0,function*(){const b=yield this.restartLock.lock();try{c||(c=this._constraints),this.log.debug("restarting track with constraints",Object.assign(Object.assign({},this.logContext),{constraints:c}));const _={audio:!1,video:!1};this.kind===Track.Kind.Video?_.video=c:_.audio=c,this.attachedElements.forEach(et=>{detachTrack(this.mediaStreamTrack,et)}),this._mediaStreamTrack.removeEventListener("ended",this.handleEnded),this._mediaStreamTrack.stop();const k=(yield navigator.mediaDevices.getUserMedia(_)).getTracks()[0];return k.addEventListener("ended",this.handleEnded),this.log.debug("re-acquired MediaStreamTrack",this.logContext),yield this.setMediaStreamTrack(k),this._constraints=c,this.emit(TrackEvent.Restarted,this),this}finally{b()}})}setTrackMuted(c){this.log.debug("setting ".concat(this.kind," track ").concat(c?"muted":"unmuted"),this.logContext),!(this.isMuted===c&&this._mediaStreamTrack.enabled!==c)&&(this.isMuted=c,this._mediaStreamTrack.enabled=!c,this.emit(c?TrackEvent.Muted:TrackEvent.Unmuted,this))}get needsReAcquisition(){return this._mediaStreamTrack.readyState!=="live"||this._mediaStreamTrack.muted||!this._mediaStreamTrack.enabled||this.reacquireTrack}handleAppVisibilityChanged(){const c=Object.create(null,{handleAppVisibilityChanged:{get:()=>super.handleAppVisibilityChanged}});return __awaiter$3(this,void 0,void 0,function*(){yield c.handleAppVisibilityChanged.call(this),isMobile()&&(this.log.debug("visibility changed, is in Background: ".concat(this.isInBackground),this.logContext),!this.isInBackground&&this.needsReAcquisition&&!this.isUserProvided&&!this.isMuted&&(this.log.debug("track needs to be reacquired, restarting ".concat(this.source),this.logContext),yield this.restart(),this.reacquireTrack=!1))})}stop(){var c;super.stop(),this._mediaStreamTrack.removeEventListener("ended",this.handleEnded),this._mediaStreamTrack.removeEventListener("mute",this.handleTrackMuteEvent),this._mediaStreamTrack.removeEventListener("unmute",this.handleTrackUnmuteEvent),(c=this.processor)===null||c===void 0||c.destroy(),this.processor=void 0}pauseUpstream(){return __awaiter$3(this,void 0,void 0,function*(){const c=yield this.pauseUpstreamLock.lock();try{if(this._isUpstreamPaused===!0)return;if(!this.sender){this.log.warn("unable to pause upstream for an unpublished track",this.logContext);return}this._isUpstreamPaused=!0,this.emit(TrackEvent.UpstreamPaused,this);const b=getBrowser();if((b==null?void 0:b.name)==="Safari"&&compareVersions(b.version,"12.0")<0)throw new DeviceUnsupportedError("pauseUpstream is not supported on Safari < 12.");yield this.sender.replaceTrack(null)}finally{c()}})}resumeUpstream(){return __awaiter$3(this,void 0,void 0,function*(){const c=yield this.pauseUpstreamLock.lock();try{if(this._isUpstreamPaused===!1)return;if(!this.sender){this.log.warn("unable to resume upstream for an unpublished track",this.logContext);return}this._isUpstreamPaused=!1,this.emit(TrackEvent.UpstreamResumed,this),yield this.sender.replaceTrack(this._mediaStreamTrack)}finally{c()}})}getRTCStatsReport(){var c;return __awaiter$3(this,void 0,void 0,function*(){return!((c=this.sender)===null||c===void 0)&&c.getStats?yield this.sender.getStats():void 0})}setProcessor(c){let b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;var _,$;return __awaiter$3(this,void 0,void 0,function*(){const k=yield this.processorLock.lock();try{this.log.debug("setting up processor",this.logContext),this.processorElement=(_=this.processorElement)!==null&&_!==void 0?_:document.createElement(this.kind);const et={kind:this.kind,track:this._mediaStreamTrack,element:this.processorElement,audioContext:this.audioContext};if(yield c.init(et),this.processor&&(yield this.stopProcessor()),this.kind==="unknown")throw TypeError("cannot set processor on track of unknown kind");if(attachToElement(this._mediaStreamTrack,this.processorElement),this.processorElement.muted=!0,this.processorElement.play().catch(nt=>this.log.error("failed to play processor element",Object.assign(Object.assign({},this.logContext),{error:nt}))),this.processor=c,this.processor.processedTrack){for(const nt of this.attachedElements)nt!==this.processorElement&&b&&(detachTrack(this._mediaStreamTrack,nt),attachToElement(this.processor.processedTrack,nt));yield($=this.sender)===null||$===void 0?void 0:$.replaceTrack(this.processor.processedTrack)}this.emit(TrackEvent.TrackProcessorUpdate,this.processor)}finally{k()}})}getProcessor(){return this.processor}stopProcessor(){var c,b;return __awaiter$3(this,void 0,void 0,function*(){this.processor&&(this.log.debug("stopping processor",this.logContext),(c=this.processor.processedTrack)===null||c===void 0||c.stop(),yield this.processor.destroy(),this.processor=void 0,(b=this.processorElement)===null||b===void 0||b.remove(),this.processorElement=void 0,yield this._mediaStreamTrack.applyConstraints(this._constraints),yield this.setMediaStreamTrack(this._mediaStreamTrack,!0),this.emit(TrackEvent.TrackProcessorUpdate))})}}class E2EEManager extends eventsExports$1.EventEmitter{constructor(c){super(),this.onWorkerMessage=b=>{var _,$;const{kind:k,data:et}=b.data;switch(k){case"error":livekitLogger.error(et.error.message),this.emit(EncryptionEvent.EncryptionError,et.error);break;case"initAck":et.enabled&&this.keyProvider.getKeys().forEach(nt=>{this.postKey(nt)});break;case"enable":if(this.encryptionEnabled!==et.enabled&&et.participantIdentity===((_=this.room)===null||_===void 0?void 0:_.localParticipant.identity))this.emit(EncryptionEvent.ParticipantEncryptionStatusChanged,et.enabled,this.room.localParticipant),this.encryptionEnabled=et.enabled;else if(et.participantIdentity){const nt=($=this.room)===null||$===void 0?void 0:$.getParticipantByIdentity(et.participantIdentity);if(!nt)throw TypeError("couldn't set encryption status, participant not found".concat(et.participantIdentity));this.emit(EncryptionEvent.ParticipantEncryptionStatusChanged,et.enabled,nt)}this.encryptionEnabled&&this.keyProvider.getKeys().forEach(nt=>{this.postKey(nt)});break;case"ratchetKey":this.keyProvider.emit(KeyProviderEvent.KeyRatcheted,et.material,et.keyIndex);break}},this.onWorkerError=b=>{livekitLogger.error("e2ee worker encountered an error:",{error:b.error}),this.emit(EncryptionEvent.EncryptionError,b.error)},this.keyProvider=c.keyProvider,this.worker=c.worker,this.encryptionEnabled=!1}setup(c){if(!isE2EESupported())throw new DeviceUnsupportedError("tried to setup end-to-end encryption on an unsupported browser");if(livekitLogger.info("setting up e2ee"),c!==this.room){this.room=c,this.setupEventListeners(c,this.keyProvider);const b={kind:"init",data:{keyProviderOptions:this.keyProvider.getOptions(),loglevel:workerLogger.getLevel()}};this.worker&&(livekitLogger.info("initializing worker",{worker:this.worker}),this.worker.onmessage=this.onWorkerMessage,this.worker.onerror=this.onWorkerError,this.worker.postMessage(b))}}setParticipantCryptorEnabled(c,b){livekitLogger.debug("set e2ee to ".concat(c," for participant ").concat(b)),this.postEnable(c,b)}setSifTrailer(c){!c||c.length===0?livekitLogger.warn("ignoring server sent trailer as it's empty"):this.postSifTrailer(c)}setupEngine(c){c.on(EngineEvent.RTPVideoMapUpdate,b=>{this.postRTPMap(b)})}setupEventListeners(c,b){c.on(RoomEvent.TrackPublished,(_,$)=>this.setParticipantCryptorEnabled(_.trackInfo.encryption!==Encryption_Type.NONE,$.identity)),c.on(RoomEvent.ConnectionStateChanged,_=>{_===ConnectionState.Connected&&c.remoteParticipants.forEach($=>{$.trackPublications.forEach(k=>{this.setParticipantCryptorEnabled(k.trackInfo.encryption!==Encryption_Type.NONE,$.identity)})})}).on(RoomEvent.TrackUnsubscribed,(_,$,k)=>{var et;const nt={kind:"removeTransform",data:{participantIdentity:k.identity,trackId:_.mediaStreamID}};(et=this.worker)===null||et===void 0||et.postMessage(nt)}).on(RoomEvent.TrackSubscribed,(_,$,k)=>{this.setupE2EEReceiver(_,k.identity,$.trackInfo)}).on(RoomEvent.SignalConnected,()=>{if(!this.room)throw new TypeError("expected room to be present on signal connect");this.setParticipantCryptorEnabled(this.room.localParticipant.isE2EEEnabled,this.room.localParticipant.identity),b.getKeys().forEach(_=>{this.postKey(_)})}),c.localParticipant.on(ParticipantEvent.LocalTrackPublished,_=>__awaiter$3(this,void 0,void 0,function*(){this.setupE2EESender(_.track,_.track.sender)})),b.on(KeyProviderEvent.SetKey,_=>this.postKey(_)).on(KeyProviderEvent.RatchetRequest,(_,$)=>this.postRatchetRequest(_,$))}postRatchetRequest(c,b){if(!this.worker)throw Error("could not ratchet key, worker is missing");const _={kind:"ratchetRequest",data:{participantIdentity:c,keyIndex:b}};this.worker.postMessage(_)}postKey(c){let{key:b,participantIdentity:_,keyIndex:$}=c;var k;if(!this.worker)throw Error("could not set key, worker is missing");const et={kind:"setKey",data:{participantIdentity:_,isPublisher:_===((k=this.room)===null||k===void 0?void 0:k.localParticipant.identity),key:b,keyIndex:$}};this.worker.postMessage(et)}postEnable(c,b){if(this.worker){const _={kind:"enable",data:{enabled:c,participantIdentity:b}};this.worker.postMessage(_)}else throw new ReferenceError("failed to enable e2ee, worker is not ready")}postRTPMap(c){var b;if(!this.worker)throw TypeError("could not post rtp map, worker is missing");if(!(!((b=this.room)===null||b===void 0)&&b.localParticipant.identity))throw TypeError("could not post rtp map, local participant identity is missing");const _={kind:"setRTPMap",data:{map:c,participantIdentity:this.room.localParticipant.identity}};this.worker.postMessage(_)}postSifTrailer(c){if(!this.worker)throw Error("could not post SIF trailer, worker is missing");const b={kind:"setSifTrailer",data:{trailer:c}};this.worker.postMessage(b)}setupE2EEReceiver(c,b,_){if(c.receiver){if(!(_!=null&&_.mimeType)||_.mimeType==="")throw new TypeError("MimeType missing from trackInfo, cannot set up E2EE cryptor");this.handleReceiver(c.receiver,c.mediaStreamID,b,c.kind==="video"?mimeTypeToVideoCodecString(_.mimeType):void 0)}}setupE2EESender(c,b){if(!(c instanceof LocalTrack)||!b){b||livekitLogger.warn("early return because sender is not ready");return}this.handleSender(b,c.mediaStreamID,void 0)}handleReceiver(c,b,_,$){return __awaiter$3(this,void 0,void 0,function*(){if(this.worker){if(isScriptTransformSupported()){const k={kind:"decode",participantIdentity:_,trackId:b,codec:$};c.transform=new RTCRtpScriptTransform(this.worker,k)}else{if(E2EE_FLAG in c&&$){const ot={kind:"updateCodec",data:{trackId:b,codec:$,participantIdentity:_}};this.worker.postMessage(ot);return}let k=c.writableStream,et=c.readableStream;if(!k||!et){const ot=c.createEncodedStreams();c.writableStream=ot.writable,k=ot.writable,c.readableStream=ot.readable,et=ot.readable}const nt={kind:"decode",data:{readableStream:et,writableStream:k,trackId:b,codec:$,participantIdentity:_}};this.worker.postMessage(nt,[et,k])}c[E2EE_FLAG]=!0}})}handleSender(c,b,_){var $;if(!(E2EE_FLAG in c||!this.worker)){if(!(!(($=this.room)===null||$===void 0)&&$.localParticipant.identity)||this.room.localParticipant.identity==="")throw TypeError("local identity needs to be known in order to set up encrypted sender");if(isScriptTransformSupported()){livekitLogger.info("initialize script transform");const k={kind:"encode",participantIdentity:this.room.localParticipant.identity,trackId:b,codec:_};c.transform=new RTCRtpScriptTransform(this.worker,k)}else{livekitLogger.info("initialize encoded streams");const k=c.createEncodedStreams(),et={kind:"encode",data:{readableStream:k.readable,writableStream:k.writable,codec:_,trackId:b,participantIdentity:this.room.localParticipant.identity}};this.worker.postMessage(et,[k.readable,k.writable])}c[E2EE_FLAG]=!0}}}var QueueTaskStatus;(function(a){a[a.WAITING=0]="WAITING",a[a.RUNNING=1]="RUNNING",a[a.COMPLETED=2]="COMPLETED"})(QueueTaskStatus||(QueueTaskStatus={}));class AsyncQueue{constructor(){this.pendingTasks=new Map,this.taskMutex=new Mutex,this.nextTaskIndex=0}run(c){return __awaiter$3(this,void 0,void 0,function*(){const b={id:this.nextTaskIndex++,enqueuedAt:Date.now(),status:QueueTaskStatus.WAITING};this.pendingTasks.set(b.id,b);const _=yield this.taskMutex.lock();try{return b.executedAt=Date.now(),b.status=QueueTaskStatus.RUNNING,yield c()}finally{b.status=QueueTaskStatus.COMPLETED,this.pendingTasks.delete(b.id),_()}})}flush(){return __awaiter$3(this,void 0,void 0,function*(){return this.run(()=>__awaiter$3(this,void 0,void 0,function*(){}))})}snapshot(){return Array.from(this.pendingTasks.values())}}const passThroughQueueSignals=["syncState","trickle","offer","answer","simulate","leave"];function canPassThroughQueue(a){const c=passThroughQueueSignals.indexOf(a.case)>=0;return livekitLogger.trace("request allowed to bypass queue:",{canPass:c,req:a}),c}var SignalConnectionState;(function(a){a[a.CONNECTING=0]="CONNECTING",a[a.CONNECTED=1]="CONNECTED",a[a.RECONNECTING=2]="RECONNECTING",a[a.DISCONNECTING=3]="DISCONNECTING",a[a.DISCONNECTED=4]="DISCONNECTED"})(SignalConnectionState||(SignalConnectionState={}));class SignalClient{get currentState(){return this.state}get isDisconnected(){return this.state===SignalConnectionState.DISCONNECTING||this.state===SignalConnectionState.DISCONNECTED}get isEstablishingConnection(){return this.state===SignalConnectionState.CONNECTING||this.state===SignalConnectionState.RECONNECTING}constructor(){let c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};var _;this.rtt=0,this.state=SignalConnectionState.DISCONNECTED,this.log=livekitLogger,this.resetCallbacks=()=>{this.onAnswer=void 0,this.onLeave=void 0,this.onLocalTrackPublished=void 0,this.onLocalTrackUnpublished=void 0,this.onNegotiateRequested=void 0,this.onOffer=void 0,this.onRemoteMuteChanged=void 0,this.onSubscribedQualityUpdate=void 0,this.onTokenRefresh=void 0,this.onTrickle=void 0,this.onClose=void 0},this.log=getLogger((_=b.loggerName)!==null&&_!==void 0?_:LoggerNames.Signal),this.loggerContextCb=b.loggerContextCb,this.useJSON=c,this.requestQueue=new AsyncQueue,this.queuedRequests=[],this.closingLock=new Mutex,this.connectionLock=new Mutex,this.state=SignalConnectionState.DISCONNECTED}get logContext(){var c,b;return(b=(c=this.loggerContextCb)===null||c===void 0?void 0:c.call(this))!==null&&b!==void 0?b:{}}join(c,b,_,$){return __awaiter$3(this,void 0,void 0,function*(){return this.state=SignalConnectionState.CONNECTING,this.options=_,yield this.connect(c,b,_,$)})}reconnect(c,b,_,$){return __awaiter$3(this,void 0,void 0,function*(){if(!this.options){this.log.warn("attempted to reconnect without signal options being set, ignoring",this.logContext);return}return this.state=SignalConnectionState.RECONNECTING,this.clearPingInterval(),yield this.connect(c,b,Object.assign(Object.assign({},this.options),{reconnect:!0,sid:_,reconnectReason:$}))})}connect(c,b,_,$){this.connectOptions=_,c=toWebsocketUrl(c),c=c.replace(/\/$/,""),c+="/rtc";const k=getClientInfo(),et=createConnectionParams(b,k,_);return new Promise((nt,ot)=>__awaiter$3(this,void 0,void 0,function*(){const ht=yield this.connectionLock.lock();try{const vt=()=>__awaiter$3(this,void 0,void 0,function*(){this.close(),clearTimeout(_t),ot(new ConnectionError("room connection has been cancelled (signal)"))}),_t=setTimeout(()=>{this.close(),ot(new ConnectionError("room connection has timed out (signal)"))},_.websocketTimeout);$!=null&&$.aborted&&vt(),$==null||$.addEventListener("abort",vt),this.log.debug("connecting to ".concat(c+et),this.logContext),this.ws&&(yield this.close(!1)),this.ws=new WebSocket(c+et),this.ws.binaryType="arraybuffer",this.ws.onopen=()=>{clearTimeout(_t)},this.ws.onerror=kt=>__awaiter$3(this,void 0,void 0,function*(){if(this.state!==SignalConnectionState.CONNECTED){this.state=SignalConnectionState.DISCONNECTED,clearTimeout(_t);try{const $t=yield fetch("http".concat(c.substring(2),"/validate").concat(et));if($t.status.toFixed(0).startsWith("4")){const Tt=yield $t.text();ot(new ConnectionError(Tt,0,$t.status))}else ot(new ConnectionError("Internal error",2,$t.status))}catch{ot(new ConnectionError("server was not reachable",1))}return}this.handleWSError(kt)}),this.ws.onmessage=kt=>__awaiter$3(this,void 0,void 0,function*(){var $t,Tt,At;let Mt;if(typeof kt.data=="string"){const Dt=JSON.parse(kt.data);Mt=SignalResponse.fromJson(Dt,{ignoreUnknownFields:!0})}else if(kt.data instanceof ArrayBuffer)Mt=SignalResponse.fromBinary(new Uint8Array(kt.data));else{this.log.error("could not decode websocket message: ".concat(typeof kt.data),this.logContext);return}if(this.state!==SignalConnectionState.CONNECTED){let Dt=!1;if((($t=Mt.message)===null||$t===void 0?void 0:$t.case)==="join"?(this.state=SignalConnectionState.CONNECTED,$==null||$.removeEventListener("abort",vt),this.pingTimeoutDuration=Mt.message.value.pingTimeout,this.pingIntervalDuration=Mt.message.value.pingInterval,this.pingTimeoutDuration&&this.pingTimeoutDuration>0&&(this.log.debug("ping config",Object.assign(Object.assign({},this.logContext),{timeout:this.pingTimeoutDuration,interval:this.pingIntervalDuration})),this.startPingInterval()),nt(Mt.message.value)):this.state===SignalConnectionState.RECONNECTING&&Mt.message.case!=="leave"?(this.state=SignalConnectionState.CONNECTED,$==null||$.removeEventListener("abort",vt),this.startPingInterval(),((Tt=Mt.message)===null||Tt===void 0?void 0:Tt.case)==="reconnect"?nt(Mt.message.value):(this.log.debug("declaring signal reconnected without reconnect response received",this.logContext),nt(void 0),Dt=!0)):this.isEstablishingConnection&&Mt.message.case==="leave"?ot(new ConnectionError("Received leave request while trying to (re)connect",4)):_.reconnect||ot(new ConnectionError("did not receive join response, got ".concat((At=Mt.message)===null||At===void 0?void 0:At.case," instead"))),!Dt)return}this.signalLatency&&(yield sleep(this.signalLatency)),this.handleSignalResponse(Mt)}),this.ws.onclose=kt=>{this.isEstablishingConnection&&ot(new ConnectionError("Websocket got closed during a (re)connection attempt")),this.log.warn("websocket closed",Object.assign(Object.assign({},this.logContext),{reason:kt.reason,code:kt.code,wasClean:kt.wasClean,state:this.state})),this.handleOnClose(kt.reason)}}finally{ht()}}))}close(){let c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return __awaiter$3(this,void 0,void 0,function*(){const b=yield this.closingLock.lock();try{if(c&&(this.state=SignalConnectionState.DISCONNECTING),this.ws){this.ws.onmessage=null,this.ws.onopen=null,this.ws.onclose=null;const _=new Promise($=>{this.ws?this.ws.onclose=()=>{$()}:$()});this.ws.readyState<this.ws.CLOSING&&(this.ws.close(),yield Promise.race([_,sleep(250)])),this.ws=void 0}}finally{c&&(this.state=SignalConnectionState.DISCONNECTED),this.clearPingInterval(),b()}})}sendOffer(c){this.log.debug("sending offer",Object.assign(Object.assign({},this.logContext),{offerSdp:c.sdp})),this.sendRequest({case:"offer",value:toProtoSessionDescription(c)})}sendAnswer(c){return this.log.debug("sending answer",Object.assign(Object.assign({},this.logContext),{answerSdp:c.sdp})),this.sendRequest({case:"answer",value:toProtoSessionDescription(c)})}sendIceCandidate(c,b){return this.log.trace("sending ice candidate",Object.assign(Object.assign({},this.logContext),{candidate:c})),this.sendRequest({case:"trickle",value:new TrickleRequest({candidateInit:JSON.stringify(c),target:b})})}sendMuteTrack(c,b){return this.sendRequest({case:"mute",value:new MuteTrackRequest({sid:c,muted:b})})}sendAddTrack(c){return this.sendRequest({case:"addTrack",value:c})}sendUpdateLocalMetadata(c,b){return this.sendRequest({case:"updateMetadata",value:new UpdateParticipantMetadata({metadata:c,name:b})})}sendUpdateTrackSettings(c){this.sendRequest({case:"trackSetting",value:c})}sendUpdateSubscription(c){return this.sendRequest({case:"subscription",value:c})}sendSyncState(c){return this.sendRequest({case:"syncState",value:c})}sendUpdateVideoLayers(c,b){return this.sendRequest({case:"updateLayers",value:new UpdateVideoLayers({trackSid:c,layers:b})})}sendUpdateSubscriptionPermissions(c,b){return this.sendRequest({case:"subscriptionPermission",value:new SubscriptionPermission({allParticipants:c,trackPermissions:b})})}sendSimulateScenario(c){return this.sendRequest({case:"simulate",value:c})}sendPing(){return Promise.all([this.sendRequest({case:"ping",value:protoInt64.parse(Date.now())}),this.sendRequest({case:"pingReq",value:new Ping({timestamp:protoInt64.parse(Date.now()),rtt:protoInt64.parse(this.rtt)})})])}sendLeave(){return this.sendRequest({case:"leave",value:new LeaveRequest({canReconnect:!1,reason:DisconnectReason.CLIENT_INITIATED})})}sendRequest(c){let b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return __awaiter$3(this,void 0,void 0,function*(){if(!b&&!canPassThroughQueue(c)&&this.state===SignalConnectionState.RECONNECTING){this.queuedRequests.push(()=>__awaiter$3(this,void 0,void 0,function*(){yield this.sendRequest(c,!0)}));return}if(b||(yield this.requestQueue.flush()),this.signalLatency&&(yield sleep(this.signalLatency)),!this.ws||this.ws.readyState!==this.ws.OPEN){this.log.error("cannot send signal request before connected, type: ".concat(c==null?void 0:c.case),this.logContext);return}const $=new SignalRequest({message:c});try{this.useJSON?this.ws.send($.toJsonString()):this.ws.send($.toBinary())}catch(k){this.log.error("error sending signal message",Object.assign(Object.assign({},this.logContext),{error:k}))}})}handleSignalResponse(c){var b,_;const $=c.message;if($==null){this.log.debug("received unsupported message",this.logContext);return}let k=!1;if($.case==="answer"){const et=fromProtoSessionDescription($.value);this.onAnswer&&this.onAnswer(et)}else if($.case==="offer"){const et=fromProtoSessionDescription($.value);this.onOffer&&this.onOffer(et)}else if($.case==="trickle"){const et=JSON.parse($.value.candidateInit);this.onTrickle&&this.onTrickle(et,$.value.target)}else $.case==="update"?this.onParticipantUpdate&&this.onParticipantUpdate((b=$.value.participants)!==null&&b!==void 0?b:[]):$.case==="trackPublished"?this.onLocalTrackPublished&&this.onLocalTrackPublished($.value):$.case==="speakersChanged"?this.onSpeakersChanged&&this.onSpeakersChanged((_=$.value.speakers)!==null&&_!==void 0?_:[]):$.case==="leave"?this.onLeave&&this.onLeave($.value):$.case==="mute"?this.onRemoteMuteChanged&&this.onRemoteMuteChanged($.value.sid,$.value.muted):$.case==="roomUpdate"?this.onRoomUpdate&&$.value.room&&this.onRoomUpdate($.value.room):$.case==="connectionQuality"?this.onConnectionQuality&&this.onConnectionQuality($.value):$.case==="streamStateUpdate"?this.onStreamStateUpdate&&this.onStreamStateUpdate($.value):$.case==="subscribedQualityUpdate"?this.onSubscribedQualityUpdate&&this.onSubscribedQualityUpdate($.value):$.case==="subscriptionPermissionUpdate"?this.onSubscriptionPermissionUpdate&&this.onSubscriptionPermissionUpdate($.value):$.case==="refreshToken"?this.onTokenRefresh&&this.onTokenRefresh($.value):$.case==="trackUnpublished"?this.onLocalTrackUnpublished&&this.onLocalTrackUnpublished($.value):$.case==="subscriptionResponse"?this.onSubscriptionError&&this.onSubscriptionError($.value):$.case==="pong"||($.case==="pongResp"?(this.rtt=Date.now()-Number.parseInt($.value.lastPingTimestamp.toString()),this.resetPingTimeout(),k=!0):this.log.debug("unsupported message",Object.assign(Object.assign({},this.logContext),{msgCase:$.case})));k||this.resetPingTimeout()}setReconnected(){for(;this.queuedRequests.length>0;){const c=this.queuedRequests.shift();c&&this.requestQueue.run(c)}}handleOnClose(c){return __awaiter$3(this,void 0,void 0,function*(){if(this.state===SignalConnectionState.DISCONNECTED)return;const b=this.onClose;yield this.close(),this.log.debug("websocket connection closed: ".concat(c),Object.assign(Object.assign({},this.logContext),{reason:c})),b&&b(c)})}handleWSError(c){this.log.error("websocket error",Object.assign(Object.assign({},this.logContext),{error:c}))}resetPingTimeout(){if(this.clearPingTimeout(),!this.pingTimeoutDuration){this.log.warn("ping timeout duration not set",this.logContext);return}this.pingTimeout=CriticalTimers.setTimeout(()=>{this.log.warn("ping timeout triggered. last pong received at: ".concat(new Date(Date.now()-this.pingTimeoutDuration*1e3).toUTCString()),this.logContext),this.handleOnClose("ping timeout")},this.pingTimeoutDuration*1e3)}clearPingTimeout(){this.pingTimeout&&CriticalTimers.clearTimeout(this.pingTimeout)}startPingInterval(){if(this.clearPingInterval(),this.resetPingTimeout(),!this.pingIntervalDuration){this.log.warn("ping interval duration not set",this.logContext);return}this.log.debug("start ping interval",this.logContext),this.pingInterval=CriticalTimers.setInterval(()=>{this.sendPing()},this.pingIntervalDuration*1e3)}clearPingInterval(){this.log.debug("clearing ping interval",this.logContext),this.clearPingTimeout(),this.pingInterval&&CriticalTimers.clearInterval(this.pingInterval)}}function fromProtoSessionDescription(a){const c={type:"offer",sdp:a.sdp};switch(a.type){case"answer":case"offer":case"pranswer":case"rollback":c.type=a.type;break}return c}function toProtoSessionDescription(a){return new SessionDescription({sdp:a.sdp,type:a.type})}function createConnectionParams(a,c,b){var _;const $=new URLSearchParams;return $.set("access_token",a),b.reconnect&&($.set("reconnect","1"),b.sid&&$.set("sid",b.sid)),$.set("auto_subscribe",b.autoSubscribe?"1":"0"),$.set("sdk",isReactNative()?"reactnative":"js"),$.set("version",c.version),$.set("protocol",c.protocol.toString()),c.deviceModel&&$.set("device_model",c.deviceModel),c.os&&$.set("os",c.os),c.osVersion&&$.set("os_version",c.osVersion),c.browser&&$.set("browser",c.browser),c.browserVersion&&$.set("browser_version",c.browserVersion),b.adaptiveStream&&$.set("adaptive_stream","1"),b.reconnectReason&&$.set("reconnect_reason",b.reconnectReason.toString()),!((_=navigator.connection)===null||_===void 0)&&_.type&&$.set("network",navigator.connection.type),"?".concat($.toString())}var parser$1={},grammar$2={exports:{}},grammar$1=grammar$2.exports={v:[{name:"version",reg:/^(\d*)$/}],o:[{name:"origin",reg:/^(\S*) (\d*) (\d*) (\S*) IP(\d) (\S*)/,names:["username","sessionId","sessionVersion","netType","ipVer","address"],format:"%s %s %d %s IP%d %s"}],s:[{name:"name"}],i:[{name:"description"}],u:[{name:"uri"}],e:[{name:"email"}],p:[{name:"phone"}],z:[{name:"timezones"}],r:[{name:"repeats"}],t:[{name:"timing",reg:/^(\d*) (\d*)/,names:["start","stop"],format:"%d %d"}],c:[{name:"connection",reg:/^IN IP(\d) (\S*)/,names:["version","ip"],format:"IN IP%d %s"}],b:[{push:"bandwidth",reg:/^(TIAS|AS|CT|RR|RS):(\d*)/,names:["type","limit"],format:"%s:%s"}],m:[{reg:/^(\w*) (\d*) ([\w/]*)(?: (.*))?/,names:["type","port","protocol","payloads"],format:"%s %d %s %s"}],a:[{push:"rtp",reg:/^rtpmap:(\d*) ([\w\-.]*)(?:\s*\/(\d*)(?:\s*\/(\S*))?)?/,names:["payload","codec","rate","encoding"],format:function(a){return a.encoding?"rtpmap:%d %s/%s/%s":a.rate?"rtpmap:%d %s/%s":"rtpmap:%d %s"}},{push:"fmtp",reg:/^fmtp:(\d*) ([\S| ]*)/,names:["payload","config"],format:"fmtp:%d %s"},{name:"control",reg:/^control:(.*)/,format:"control:%s"},{name:"rtcp",reg:/^rtcp:(\d*)(?: (\S*) IP(\d) (\S*))?/,names:["port","netType","ipVer","address"],format:function(a){return a.address!=null?"rtcp:%d %s IP%d %s":"rtcp:%d"}},{push:"rtcpFbTrrInt",reg:/^rtcp-fb:(\*|\d*) trr-int (\d*)/,names:["payload","value"],format:"rtcp-fb:%s trr-int %d"},{push:"rtcpFb",reg:/^rtcp-fb:(\*|\d*) ([\w-_]*)(?: ([\w-_]*))?/,names:["payload","type","subtype"],format:function(a){return a.subtype!=null?"rtcp-fb:%s %s %s":"rtcp-fb:%s %s"}},{push:"ext",reg:/^extmap:(\d+)(?:\/(\w+))?(?: (urn:ietf:params:rtp-hdrext:encrypt))? (\S*)(?: (\S*))?/,names:["value","direction","encrypt-uri","uri","config"],format:function(a){return"extmap:%d"+(a.direction?"/%s":"%v")+(a["encrypt-uri"]?" %s":"%v")+" %s"+(a.config?" %s":"")}},{name:"extmapAllowMixed",reg:/^(extmap-allow-mixed)/},{push:"crypto",reg:/^crypto:(\d*) ([\w_]*) (\S*)(?: (\S*))?/,names:["id","suite","config","sessionConfig"],format:function(a){return a.sessionConfig!=null?"crypto:%d %s %s %s":"crypto:%d %s %s"}},{name:"setup",reg:/^setup:(\w*)/,format:"setup:%s"},{name:"connectionType",reg:/^connection:(new|existing)/,format:"connection:%s"},{name:"mid",reg:/^mid:([^\s]*)/,format:"mid:%s"},{name:"msid",reg:/^msid:(.*)/,format:"msid:%s"},{name:"ptime",reg:/^ptime:(\d*(?:\.\d*)*)/,format:"ptime:%d"},{name:"maxptime",reg:/^maxptime:(\d*(?:\.\d*)*)/,format:"maxptime:%d"},{name:"direction",reg:/^(sendrecv|recvonly|sendonly|inactive)/},{name:"icelite",reg:/^(ice-lite)/},{name:"iceUfrag",reg:/^ice-ufrag:(\S*)/,format:"ice-ufrag:%s"},{name:"icePwd",reg:/^ice-pwd:(\S*)/,format:"ice-pwd:%s"},{name:"fingerprint",reg:/^fingerprint:(\S*) (\S*)/,names:["type","hash"],format:"fingerprint:%s %s"},{push:"candidates",reg:/^candidate:(\S*) (\d*) (\S*) (\d*) (\S*) (\d*) typ (\S*)(?: raddr (\S*) rport (\d*))?(?: tcptype (\S*))?(?: generation (\d*))?(?: network-id (\d*))?(?: network-cost (\d*))?/,names:["foundation","component","transport","priority","ip","port","type","raddr","rport","tcptype","generation","network-id","network-cost"],format:function(a){var c="candidate:%s %d %s %d %s %d typ %s";return c+=a.raddr!=null?" raddr %s rport %d":"%v%v",c+=a.tcptype!=null?" tcptype %s":"%v",a.generation!=null&&(c+=" generation %d"),c+=a["network-id"]!=null?" network-id %d":"%v",c+=a["network-cost"]!=null?" network-cost %d":"%v",c}},{name:"endOfCandidates",reg:/^(end-of-candidates)/},{name:"remoteCandidates",reg:/^remote-candidates:(.*)/,format:"remote-candidates:%s"},{name:"iceOptions",reg:/^ice-options:(\S*)/,format:"ice-options:%s"},{push:"ssrcs",reg:/^ssrc:(\d*) ([\w_-]*)(?::(.*))?/,names:["id","attribute","value"],format:function(a){var c="ssrc:%d";return a.attribute!=null&&(c+=" %s",a.value!=null&&(c+=":%s")),c}},{push:"ssrcGroups",reg:/^ssrc-group:([\x21\x23\x24\x25\x26\x27\x2A\x2B\x2D\x2E\w]*) (.*)/,names:["semantics","ssrcs"],format:"ssrc-group:%s %s"},{name:"msidSemantic",reg:/^msid-semantic:\s?(\w*) (\S*)/,names:["semantic","token"],format:"msid-semantic: %s %s"},{push:"groups",reg:/^group:(\w*) (.*)/,names:["type","mids"],format:"group:%s %s"},{name:"rtcpMux",reg:/^(rtcp-mux)/},{name:"rtcpRsize",reg:/^(rtcp-rsize)/},{name:"sctpmap",reg:/^sctpmap:([\w_/]*) (\S*)(?: (\S*))?/,names:["sctpmapNumber","app","maxMessageSize"],format:function(a){return a.maxMessageSize!=null?"sctpmap:%s %s %s":"sctpmap:%s %s"}},{name:"xGoogleFlag",reg:/^x-google-flag:([^\s]*)/,format:"x-google-flag:%s"},{push:"rids",reg:/^rid:([\d\w]+) (\w+)(?: ([\S| ]*))?/,names:["id","direction","params"],format:function(a){return a.params?"rid:%s %s %s":"rid:%s %s"}},{push:"imageattrs",reg:new RegExp("^imageattr:(\\d+|\\*)[\\s\\t]+(send|recv)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*)(?:[\\s\\t]+(recv|send)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*))?"),names:["pt","dir1","attrs1","dir2","attrs2"],format:function(a){return"imageattr:%s %s %s"+(a.dir2?" %s %s":"")}},{name:"simulcast",reg:new RegExp("^simulcast:(send|recv) ([a-zA-Z0-9\\-_~;,]+)(?:\\s?(send|recv) ([a-zA-Z0-9\\-_~;,]+))?$"),names:["dir1","list1","dir2","list2"],format:function(a){return"simulcast:%s %s"+(a.dir2?" %s %s":"")}},{name:"simulcast_03",reg:/^simulcast:[\s\t]+([\S+\s\t]+)$/,names:["value"],format:"simulcast: %s"},{name:"framerate",reg:/^framerate:(\d+(?:$|\.\d+))/,format:"framerate:%s"},{name:"sourceFilter",reg:/^source-filter: *(excl|incl) (\S*) (IP4|IP6|\*) (\S*) (.*)/,names:["filterMode","netType","addressTypes","destAddress","srcList"],format:"source-filter: %s %s %s %s %s"},{name:"bundleOnly",reg:/^(bundle-only)/},{name:"label",reg:/^label:(.+)/,format:"label:%s"},{name:"sctpPort",reg:/^sctp-port:(\d+)$/,format:"sctp-port:%s"},{name:"maxMessageSize",reg:/^max-message-size:(\d+)$/,format:"max-message-size:%s"},{push:"tsRefClocks",reg:/^ts-refclk:([^\s=]*)(?:=(\S*))?/,names:["clksrc","clksrcExt"],format:function(a){return"ts-refclk:%s"+(a.clksrcExt!=null?"=%s":"")}},{name:"mediaClk",reg:/^mediaclk:(?:id=(\S*))? *([^\s=]*)(?:=(\S*))?(?: *rate=(\d+)\/(\d+))?/,names:["id","mediaClockName","mediaClockValue","rateNumerator","rateDenominator"],format:function(a){var c="mediaclk:";return c+=a.id!=null?"id=%s %s":"%v%s",c+=a.mediaClockValue!=null?"=%s":"",c+=a.rateNumerator!=null?" rate=%s":"",c+=a.rateDenominator!=null?"/%s":"",c}},{name:"keywords",reg:/^keywds:(.+)$/,format:"keywds:%s"},{name:"content",reg:/^content:(.+)/,format:"content:%s"},{name:"bfcpFloorCtrl",reg:/^floorctrl:(c-only|s-only|c-s)/,format:"floorctrl:%s"},{name:"bfcpConfId",reg:/^confid:(\d+)/,format:"confid:%s"},{name:"bfcpUserId",reg:/^userid:(\d+)/,format:"userid:%s"},{name:"bfcpFloorId",reg:/^floorid:(.+) (?:m-stream|mstrm):(.+)/,names:["id","mStream"],format:"floorid:%s mstrm:%s"},{push:"invalid",names:["value"]}]};Object.keys(grammar$1).forEach(function(a){var c=grammar$1[a];c.forEach(function(b){b.reg||(b.reg=/(.*)/),b.format||(b.format="%s")})});var grammarExports=grammar$2.exports;(function(a){var c=function(nt){return String(Number(nt))===nt?Number(nt):nt},b=function(nt,ot,ht,vt){if(vt&&!ht)ot[vt]=c(nt[1]);else for(var _t=0;_t<ht.length;_t+=1)nt[_t+1]!=null&&(ot[ht[_t]]=c(nt[_t+1]))},_=function(nt,ot,ht){var vt=nt.name&&nt.names;nt.push&&!ot[nt.push]?ot[nt.push]=[]:vt&&!ot[nt.name]&&(ot[nt.name]={});var _t=nt.push?{}:vt?ot[nt.name]:ot;b(ht.match(nt.reg),_t,nt.names,nt.name),nt.push&&ot[nt.push].push(_t)},$=grammarExports,k=RegExp.prototype.test.bind(/^([a-z])=(.*)/);a.parse=function(nt){var ot={},ht=[],vt=ot;return nt.split(/(\r\n|\r|\n)/).filter(k).forEach(function(_t){var kt=_t[0],$t=_t.slice(2);kt==="m"&&(ht.push({rtp:[],fmtp:[]}),vt=ht[ht.length-1]);for(var Tt=0;Tt<($[kt]||[]).length;Tt+=1){var At=$[kt][Tt];if(At.reg.test($t))return _(At,vt,$t)}}),ot.media=ht,ot};var et=function(nt,ot){var ht=ot.split(/=(.+)/,2);return ht.length===2?nt[ht[0]]=c(ht[1]):ht.length===1&&ot.length>1&&(nt[ht[0]]=void 0),nt};a.parseParams=function(nt){return nt.split(/;\s?/).reduce(et,{})},a.parseFmtpConfig=a.parseParams,a.parsePayloads=function(nt){return nt.toString().split(" ").map(Number)},a.parseRemoteCandidates=function(nt){for(var ot=[],ht=nt.split(" ").map(c),vt=0;vt<ht.length;vt+=3)ot.push({component:ht[vt],ip:ht[vt+1],port:ht[vt+2]});return ot},a.parseImageAttributes=function(nt){return nt.split(" ").map(function(ot){return ot.substring(1,ot.length-1).split(",").reduce(et,{})})},a.parseSimulcastStreamList=function(nt){return nt.split(";").map(function(ot){return ot.split(",").map(function(ht){var vt,_t=!1;return ht[0]!=="~"?vt=c(ht):(vt=c(ht.substring(1,ht.length)),_t=!0),{scid:vt,paused:_t}})})}})(parser$1);var grammar=grammarExports,formatRegExp=/%[sdv%]/g,format=function(a){var c=1,b=arguments,_=b.length;return a.replace(formatRegExp,function($){if(c>=_)return $;var k=b[c];switch(c+=1,$){case"%%":return"%";case"%s":return String(k);case"%d":return Number(k);case"%v":return""}})},makeLine=function(a,c,b){var _=c.format instanceof Function?c.format(c.push?b:b[c.name]):c.format,$=[a+"="+_];if(c.names)for(var k=0;k<c.names.length;k+=1){var et=c.names[k];c.name?$.push(b[c.name][et]):$.push(b[c.names[k]])}else $.push(b[c.name]);return format.apply(null,$)},defaultOuterOrder=["v","o","s","i","u","e","p","c","b","t","r","z","a"],defaultInnerOrder=["i","c","b","a"],writer$1=function(a,c){c=c||{},a.version==null&&(a.version=0),a.name==null&&(a.name=" "),a.media.forEach(function(k){k.payloads==null&&(k.payloads="")});var b=c.outerOrder||defaultOuterOrder,_=c.innerOrder||defaultInnerOrder,$=[];return b.forEach(function(k){grammar[k].forEach(function(et){et.name in a&&a[et.name]!=null?$.push(makeLine(k,et,a)):et.push in a&&a[et.push]!=null&&a[et.push].forEach(function(nt){$.push(makeLine(k,et,nt))})})}),a.media.forEach(function(k){$.push(makeLine("m",grammar.m[0],k)),_.forEach(function(et){grammar[et].forEach(function(nt){nt.name in k&&k[nt.name]!=null?$.push(makeLine(et,nt,k)):nt.push in k&&k[nt.push]!=null&&k[nt.push].forEach(function(ot){$.push(makeLine(et,nt,ot))})})})}),$.join(`\r
`)+`\r
`},parser=parser$1,writer=writer$1,write=writer,parse$2=parser.parse;const startBitrateForSVC=.7,PCEvents={NegotiationStarted:"negotiationStarted",NegotiationComplete:"negotiationComplete",RTPVideoPayloadTypes:"rtpVideoPayloadTypes"};class PCTransport extends eventsExports$1.EventEmitter{get pc(){return this._pc||(this._pc=this.createPC()),this._pc}constructor(c){let b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};var _;super(),this.log=livekitLogger,this.pendingCandidates=[],this.restartingIce=!1,this.renegotiate=!1,this.trackBitrates=[],this.remoteStereoMids=[],this.remoteNackMids=[],this.negotiate=r$2($=>__awaiter$3(this,void 0,void 0,function*(){this.emit(PCEvents.NegotiationStarted);try{yield this.createAndSendOffer()}catch(k){if($)$(k);else throw k}}),100),this.close=()=>{this._pc&&(this._pc.close(),this._pc.onconnectionstatechange=null,this._pc.oniceconnectionstatechange=null,this._pc.onicegatheringstatechange=null,this._pc.ondatachannel=null,this._pc.onnegotiationneeded=null,this._pc.onsignalingstatechange=null,this._pc.onicecandidate=null,this._pc.ondatachannel=null,this._pc.ontrack=null,this._pc.onconnectionstatechange=null,this._pc.oniceconnectionstatechange=null,this._pc=null)},this.log=getLogger((_=b.loggerName)!==null&&_!==void 0?_:LoggerNames.PCTransport),this.loggerOptions=b,this.config=c,this._pc=this.createPC()}createPC(){const c=new RTCPeerConnection(this.config);return c.onicecandidate=b=>{var _;b.candidate&&((_=this.onIceCandidate)===null||_===void 0||_.call(this,b.candidate))},c.onicecandidateerror=b=>{var _;(_=this.onIceCandidateError)===null||_===void 0||_.call(this,b)},c.oniceconnectionstatechange=()=>{var b;(b=this.onIceConnectionStateChange)===null||b===void 0||b.call(this,c.iceConnectionState)},c.onsignalingstatechange=()=>{var b;(b=this.onSignalingStatechange)===null||b===void 0||b.call(this,c.signalingState)},c.onconnectionstatechange=()=>{var b;(b=this.onConnectionStateChange)===null||b===void 0||b.call(this,c.connectionState)},c.ondatachannel=b=>{var _;(_=this.onDataChannel)===null||_===void 0||_.call(this,b)},c.ontrack=b=>{var _;(_=this.onTrack)===null||_===void 0||_.call(this,b)},c}get logContext(){var c,b;return Object.assign({},(b=(c=this.loggerOptions).loggerContextCb)===null||b===void 0?void 0:b.call(c))}get isICEConnected(){return this._pc!==null&&(this.pc.iceConnectionState==="connected"||this.pc.iceConnectionState==="completed")}addIceCandidate(c){return __awaiter$3(this,void 0,void 0,function*(){if(this.pc.remoteDescription&&!this.restartingIce)return this.pc.addIceCandidate(c);this.pendingCandidates.push(c)})}setRemoteDescription(c){var b;return __awaiter$3(this,void 0,void 0,function*(){let _;if(c.type==="offer"){let{stereoMids:$,nackMids:k}=extractStereoAndNackAudioFromOffer(c);this.remoteStereoMids=$,this.remoteNackMids=k}else if(c.type==="answer"){const $=parse$2((b=c.sdp)!==null&&b!==void 0?b:"");$.media.forEach(k=>{k.type==="audio"&&this.trackBitrates.some(et=>{if(!et.transceiver||k.mid!=et.transceiver.mid)return!1;let nt=0;if(k.rtp.some(ht=>ht.codec.toUpperCase()===et.codec.toUpperCase()?(nt=ht.payload,!0):!1),nt===0)return!0;let ot=!1;for(const ht of k.fmtp)if(ht.payload===nt){ht.config=ht.config.split(";").filter(vt=>!vt.includes("maxaveragebitrate")).join(";"),et.maxbr>0&&(ht.config+=";maxaveragebitrate=".concat(et.maxbr*1e3)),ot=!0;break}return ot||et.maxbr>0&&k.fmtp.push({payload:nt,config:"maxaveragebitrate=".concat(et.maxbr*1e3)}),!0})}),_=write($)}yield this.setMungedSDP(c,_,!0),this.pendingCandidates.forEach($=>{this.pc.addIceCandidate($)}),this.pendingCandidates=[],this.restartingIce=!1,this.renegotiate?(this.renegotiate=!1,yield this.createAndSendOffer()):c.type==="answer"&&(this.emit(PCEvents.NegotiationComplete),c.sdp&&parse$2(c.sdp).media.forEach(k=>{k.type==="video"&&this.emit(PCEvents.RTPVideoPayloadTypes,k.rtp)}))})}createAndSendOffer(c){var b;return __awaiter$3(this,void 0,void 0,function*(){if(this.onOffer===void 0)return;if(c!=null&&c.iceRestart&&(this.log.debug("restarting ICE",this.logContext),this.restartingIce=!0),this._pc&&this._pc.signalingState==="have-local-offer"){const k=this._pc.remoteDescription;if(c!=null&&c.iceRestart&&k)yield this._pc.setRemoteDescription(k);else{this.renegotiate=!0;return}}else if(!this._pc||this._pc.signalingState==="closed"){this.log.warn("could not createOffer with closed peer connection",this.logContext);return}this.log.debug("starting to negotiate",this.logContext);const _=yield this.pc.createOffer(c),$=parse$2((b=_.sdp)!==null&&b!==void 0?b:"");$.media.forEach(k=>{k.type==="audio"?ensureAudioNackAndStereo(k,[],[]):k.type==="video"&&(ensureVideoDDExtensionForSVC(k),this.trackBitrates.some(et=>{if(!k.msid||!et.cid||!k.msid.includes(et.cid))return!1;let nt=0;if(k.rtp.some(ht=>ht.codec.toUpperCase()===et.codec.toUpperCase()?(nt=ht.payload,!0):!1),nt===0)return!0;const ot=Math.round(et.maxbr*startBitrateForSVC);for(const ht of k.fmtp)if(ht.payload===nt){ht.config.includes("x-google-start-bitrate")||(ht.config+=";x-google-start-bitrate=".concat(ot));break}return!0}))}),yield this.setMungedSDP(_,write($)),this.onOffer(_)})}createAndSetAnswer(){var c;return __awaiter$3(this,void 0,void 0,function*(){const b=yield this.pc.createAnswer(),_=parse$2((c=b.sdp)!==null&&c!==void 0?c:"");return _.media.forEach($=>{$.type==="audio"&&ensureAudioNackAndStereo($,this.remoteStereoMids,this.remoteNackMids)}),yield this.setMungedSDP(b,write(_)),b})}createDataChannel(c,b){return this.pc.createDataChannel(c,b)}addTransceiver(c,b){return this.pc.addTransceiver(c,b)}addTrack(c){if(!this._pc)throw new UnexpectedConnectionState("PC closed, cannot add track");return this._pc.addTrack(c)}setTrackCodecBitrate(c){this.trackBitrates.push(c)}setConfiguration(c){var b;if(!this._pc)throw new UnexpectedConnectionState("PC closed, cannot configure");return(b=this._pc)===null||b===void 0?void 0:b.setConfiguration(c)}canRemoveTrack(){var c;return!!(!((c=this._pc)===null||c===void 0)&&c.removeTrack)}removeTrack(c){var b;return(b=this._pc)===null||b===void 0?void 0:b.removeTrack(c)}getConnectionState(){var c,b;return(b=(c=this._pc)===null||c===void 0?void 0:c.connectionState)!==null&&b!==void 0?b:"closed"}getICEConnectionState(){var c,b;return(b=(c=this._pc)===null||c===void 0?void 0:c.iceConnectionState)!==null&&b!==void 0?b:"closed"}getSignallingState(){var c,b;return(b=(c=this._pc)===null||c===void 0?void 0:c.signalingState)!==null&&b!==void 0?b:"closed"}getTransceivers(){var c,b;return(b=(c=this._pc)===null||c===void 0?void 0:c.getTransceivers())!==null&&b!==void 0?b:[]}getSenders(){var c,b;return(b=(c=this._pc)===null||c===void 0?void 0:c.getSenders())!==null&&b!==void 0?b:[]}getLocalDescription(){var c;return(c=this._pc)===null||c===void 0?void 0:c.localDescription}getRemoteDescription(){var c;return(c=this.pc)===null||c===void 0?void 0:c.remoteDescription}getStats(){return this.pc.getStats()}getConnectedAddress(){var c;return __awaiter$3(this,void 0,void 0,function*(){if(!this._pc)return;let b="";const _=new Map,$=new Map;if((yield this._pc.getStats()).forEach(nt=>{switch(nt.type){case"transport":b=nt.selectedCandidatePairId;break;case"candidate-pair":b===""&&nt.selected&&(b=nt.id),_.set(nt.id,nt);break;case"remote-candidate":$.set(nt.id,"".concat(nt.address,":").concat(nt.port));break}}),b==="")return;const et=(c=_.get(b))===null||c===void 0?void 0:c.remoteCandidateId;if(et!==void 0)return $.get(et)})}setMungedSDP(c,b,_){return __awaiter$3(this,void 0,void 0,function*(){if(b){const $=c.sdp;c.sdp=b;try{this.log.debug("setting munged ".concat(_?"remote":"local"," description"),this.logContext),_?yield this.pc.setRemoteDescription(c):yield this.pc.setLocalDescription(c);return}catch(k){this.log.warn("not able to set ".concat(c.type,", falling back to unmodified sdp"),Object.assign(Object.assign({},this.logContext),{error:k,sdp:b})),c.sdp=$}}try{_?yield this.pc.setRemoteDescription(c):yield this.pc.setLocalDescription(c)}catch($){let k="unknown error";$ instanceof Error?k=$.message:typeof $=="string"&&(k=$);const et={error:k,sdp:c.sdp};throw!_&&this.pc.remoteDescription&&(et.remoteSdp=this.pc.remoteDescription),this.log.error("unable to set ".concat(c.type),Object.assign(Object.assign({},this.logContext),{fields:et})),new NegotiationError(k)}})}}function ensureAudioNackAndStereo(a,c,b){let _=0;a.rtp.some($=>$.codec==="opus"?(_=$.payload,!0):!1),_>0&&(a.rtcpFb||(a.rtcpFb=[]),b.includes(a.mid)&&!a.rtcpFb.some($=>$.payload===_&&$.type==="nack")&&a.rtcpFb.push({payload:_,type:"nack"}),c.includes(a.mid)&&a.fmtp.some($=>$.payload===_?($.config.includes("stereo=1")||($.config+=";stereo=1"),!0):!1))}function ensureVideoDDExtensionForSVC(a){var c,b,_,$;const k=(b=(c=a.rtp[0])===null||c===void 0?void 0:c.codec)===null||b===void 0?void 0:b.toLowerCase();if(!isSVCCodec(k))return;let et=0;((_=a.ext)===null||_===void 0?void 0:_.some(ot=>ot.uri===ddExtensionURI?!0:(ot.value>et&&(et=ot.value),!1)))||($=a.ext)===null||$===void 0||$.push({value:et+1,uri:ddExtensionURI})}function extractStereoAndNackAudioFromOffer(a){var c;const b=[],_=[],$=parse$2((c=a.sdp)!==null&&c!==void 0?c:"");let k=0;return $.media.forEach(et=>{var nt;et.type==="audio"&&(et.rtp.some(ot=>ot.codec==="opus"?(k=ot.payload,!0):!1),!((nt=et.rtcpFb)===null||nt===void 0)&&nt.some(ot=>ot.payload===k&&ot.type==="nack")&&_.push(et.mid),et.fmtp.some(ot=>ot.payload===k?(ot.config.includes("sprop-stereo=1")&&b.push(et.mid),!0):!1))}),{stereoMids:b,nackMids:_}}const defaultVideoCodec="vp8",publishDefaults={audioPreset:AudioPresets.music,dtx:!0,red:!0,forceStereo:!1,simulcast:!0,screenShareEncoding:ScreenSharePresets.h1080fps15.encoding,stopMicTrackOnMute:!1,videoCodec:defaultVideoCodec,backupCodec:!0},audioDefaults={autoGainControl:!0,echoCancellation:!0,noiseSuppression:!0},videoDefaults={resolution:VideoPresets.h720.resolution},roomOptionDefaults={adaptiveStream:!1,dynacast:!1,stopLocalTrackOnUnpublish:!0,reconnectPolicy:new DefaultReconnectPolicy,disconnectOnPageLeave:!0,webAudioMix:!0},roomConnectOptionDefaults={autoSubscribe:!0,maxRetries:1,peerConnectionTimeout:15e3,websocketTimeout:15e3};var PCTransportState;(function(a){a[a.NEW=0]="NEW",a[a.CONNECTING=1]="CONNECTING",a[a.CONNECTED=2]="CONNECTED",a[a.FAILED=3]="FAILED",a[a.CLOSING=4]="CLOSING",a[a.CLOSED=5]="CLOSED"})(PCTransportState||(PCTransportState={}));class PCTransportManager{get needsPublisher(){return this.isPublisherConnectionRequired}get needsSubscriber(){return this.isSubscriberConnectionRequired}get currentState(){return this.state}constructor(c,b,_){var $;this.peerConnectionTimeout=roomConnectOptionDefaults.peerConnectionTimeout,this.log=livekitLogger,this.updateState=()=>{var k;const et=this.state,nt=this.requiredTransports.map(ot=>ot.getConnectionState());nt.every(ot=>ot==="connected")?this.state=PCTransportState.CONNECTED:nt.some(ot=>ot==="failed")?this.state=PCTransportState.FAILED:nt.some(ot=>ot==="connecting")?this.state=PCTransportState.CONNECTING:nt.every(ot=>ot==="closed")?this.state=PCTransportState.CLOSED:nt.some(ot=>ot==="closed")?this.state=PCTransportState.CLOSING:nt.every(ot=>ot==="new")&&(this.state=PCTransportState.NEW),et!==this.state&&(this.log.debug("pc state change: from ".concat(PCTransportState[et]," to ").concat(PCTransportState[this.state]),this.logContext),(k=this.onStateChange)===null||k===void 0||k.call(this,this.state,this.publisher.getConnectionState(),this.subscriber.getConnectionState()))},this.log=getLogger(($=_.loggerName)!==null&&$!==void 0?$:LoggerNames.PCManager),this.loggerOptions=_,this.isPublisherConnectionRequired=!b,this.isSubscriberConnectionRequired=b,this.publisher=new PCTransport(c,_),this.subscriber=new PCTransport(c,_),this.publisher.onConnectionStateChange=this.updateState,this.subscriber.onConnectionStateChange=this.updateState,this.publisher.onIceConnectionStateChange=this.updateState,this.subscriber.onIceConnectionStateChange=this.updateState,this.publisher.onSignalingStatechange=this.updateState,this.subscriber.onSignalingStatechange=this.updateState,this.publisher.onIceCandidate=k=>{var et;(et=this.onIceCandidate)===null||et===void 0||et.call(this,k,SignalTarget.PUBLISHER)},this.subscriber.onIceCandidate=k=>{var et;(et=this.onIceCandidate)===null||et===void 0||et.call(this,k,SignalTarget.SUBSCRIBER)},this.subscriber.onDataChannel=k=>{var et;(et=this.onDataChannel)===null||et===void 0||et.call(this,k)},this.subscriber.onTrack=k=>{var et;(et=this.onTrack)===null||et===void 0||et.call(this,k)},this.publisher.onOffer=k=>{var et;(et=this.onPublisherOffer)===null||et===void 0||et.call(this,k)},this.state=PCTransportState.NEW,this.connectionLock=new Mutex}get logContext(){var c,b;return Object.assign({},(b=(c=this.loggerOptions).loggerContextCb)===null||b===void 0?void 0:b.call(c))}requirePublisher(){let c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.isPublisherConnectionRequired=c,this.updateState()}requireSubscriber(){let c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.isSubscriberConnectionRequired=c,this.updateState()}createAndSendPublisherOffer(c){return this.publisher.createAndSendOffer(c)}setPublisherAnswer(c){return this.publisher.setRemoteDescription(c)}removeTrack(c){return this.publisher.removeTrack(c)}close(){return __awaiter$3(this,void 0,void 0,function*(){if(this.publisher&&this.publisher.getSignallingState()!=="closed"){const c=this.publisher;for(const b of c.getSenders())try{c.canRemoveTrack()&&c.removeTrack(b)}catch(_){this.log.warn("could not removeTrack",Object.assign(Object.assign({},this.logContext),{error:_}))}}yield Promise.all([this.publisher.close(),this.subscriber.close()]),this.updateState()})}triggerIceRestart(){return __awaiter$3(this,void 0,void 0,function*(){this.subscriber.restartingIce=!0,this.needsPublisher&&(yield this.createAndSendPublisherOffer({iceRestart:!0}))})}addIceCandidate(c,b){return __awaiter$3(this,void 0,void 0,function*(){b===SignalTarget.PUBLISHER?yield this.publisher.addIceCandidate(c):yield this.subscriber.addIceCandidate(c)})}createSubscriberAnswerFromOffer(c){return __awaiter$3(this,void 0,void 0,function*(){return this.log.debug("received server offer",Object.assign(Object.assign({},this.logContext),{RTCSdpType:c.type,sdp:c.sdp,signalingState:this.subscriber.getSignallingState().toString()})),yield this.subscriber.setRemoteDescription(c),yield this.subscriber.createAndSetAnswer()})}updateConfiguration(c,b){this.publisher.setConfiguration(c),this.subscriber.setConfiguration(c),b&&this.triggerIceRestart()}ensurePCTransportConnection(c,b){var _;return __awaiter$3(this,void 0,void 0,function*(){const $=yield this.connectionLock.lock();try{this.isPublisherConnectionRequired&&this.publisher.getConnectionState()!=="connected"&&this.publisher.getConnectionState()!=="connecting"&&(this.log.debug("negotiation required, start negotiating",this.logContext),this.publisher.negotiate()),yield Promise.all((_=this.requiredTransports)===null||_===void 0?void 0:_.map(k=>this.ensureTransportConnected(k,c,b)))}finally{$()}})}negotiate(c){return __awaiter$3(this,void 0,void 0,function*(){return new Promise((b,_)=>__awaiter$3(this,void 0,void 0,function*(){const $=setTimeout(()=>{_("negotiation timed out")},this.peerConnectionTimeout),k=()=>{clearTimeout($),_("negotiation aborted")};c.signal.addEventListener("abort",k),this.publisher.once(PCEvents.NegotiationStarted,()=>{c.signal.aborted||this.publisher.once(PCEvents.NegotiationComplete,()=>{clearTimeout($),b()})}),yield this.publisher.negotiate(et=>{clearTimeout($),_(et)})}))})}addPublisherTransceiver(c,b){return this.publisher.addTransceiver(c,b)}addPublisherTrack(c){return this.publisher.addTrack(c)}createPublisherDataChannel(c,b){return this.publisher.createDataChannel(c,b)}getConnectedAddress(c){return c===SignalTarget.PUBLISHER?this.publisher.getConnectedAddress():c===SignalTarget.SUBSCRIBER?this.publisher.getConnectedAddress():this.requiredTransports[0].getConnectedAddress()}get requiredTransports(){const c=[];return this.isPublisherConnectionRequired&&c.push(this.publisher),this.isSubscriberConnectionRequired&&c.push(this.subscriber),c}ensureTransportConnected(c,b){let _=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.peerConnectionTimeout;return __awaiter$3(this,void 0,void 0,function*(){if(c.getConnectionState()!=="connected")return new Promise((k,et)=>__awaiter$3(this,void 0,void 0,function*(){const nt=()=>{this.log.warn("abort transport connection",this.logContext),CriticalTimers.clearTimeout(ot),et(new ConnectionError("room connection has been cancelled",3))};b!=null&&b.signal.aborted&&nt(),b==null||b.signal.addEventListener("abort",nt);const ot=CriticalTimers.setTimeout(()=>{b==null||b.signal.removeEventListener("abort",nt),et(new ConnectionError("could not establish pc connection"))},_);for(;this.state!==PCTransportState.CONNECTED;)if(yield sleep(50),b!=null&&b.signal.aborted){et(new ConnectionError("room connection has been cancelled",3));return}CriticalTimers.clearTimeout(ot),b==null||b.signal.removeEventListener("abort",nt),k()}))})}}const lossyDataChannel="_lossy",reliableDataChannel="_reliable",minReconnectWait=2*1e3,leaveReconnect="leave-reconnect";var PCState;(function(a){a[a.New=0]="New",a[a.Connected=1]="Connected",a[a.Disconnected=2]="Disconnected",a[a.Reconnecting=3]="Reconnecting",a[a.Closed=4]="Closed"})(PCState||(PCState={}));class RTCEngine extends eventsExports$1.EventEmitter{get isClosed(){return this._isClosed}get pendingReconnect(){return!!this.reconnectTimeout}constructor(c){var b;super(),this.options=c,this.rtcConfig={},this.peerConnectionTimeout=roomConnectOptionDefaults.peerConnectionTimeout,this.fullReconnectOnNext=!1,this.subscriberPrimary=!1,this.pcState=PCState.New,this._isClosed=!0,this.pendingTrackResolvers={},this.reconnectAttempts=0,this.reconnectStart=0,this.attemptingReconnect=!1,this.joinAttempts=0,this.maxJoinAttempts=1,this.shouldFailNext=!1,this.log=livekitLogger,this.handleDataChannel=_=>{let{channel:$}=_;return __awaiter$3(this,void 0,void 0,function*(){if($){if($.label===reliableDataChannel)this.reliableDCSub=$;else if($.label===lossyDataChannel)this.lossyDCSub=$;else return;this.log.debug("on data channel ".concat($.id,", ").concat($.label),this.logContext),$.onmessage=this.handleDataMessage}})},this.handleDataMessage=_=>__awaiter$3(this,void 0,void 0,function*(){var $,k;const et=yield this.dataProcessLock.lock();try{let nt;if(_.data instanceof ArrayBuffer)nt=_.data;else if(_.data instanceof Blob)nt=yield _.data.arrayBuffer();else{this.log.error("unsupported data type",Object.assign(Object.assign({},this.logContext),{data:_.data}));return}const ot=DataPacket.fromBinary(new Uint8Array(nt));(($=ot.value)===null||$===void 0?void 0:$.case)==="speaker"?this.emit(EngineEvent.ActiveSpeakersUpdate,ot.value.value.speakers):((k=ot.value)===null||k===void 0?void 0:k.case)==="user"&&this.emit(EngineEvent.DataPacketReceived,ot.value.value,ot.kind)}finally{et()}}),this.handleDataError=_=>{const k=_.currentTarget.maxRetransmits===0?"lossy":"reliable";if(_ instanceof ErrorEvent&&_.error){const{error:et}=_.error;this.log.error("DataChannel error on ".concat(k,": ").concat(_.message),Object.assign(Object.assign({},this.logContext),{error:et}))}else this.log.error("Unknown DataChannel error on ".concat(k),Object.assign(Object.assign({},this.logContext),{event:_}))},this.handleBufferedAmountLow=_=>{const k=_.currentTarget.maxRetransmits===0?DataPacket_Kind.LOSSY:DataPacket_Kind.RELIABLE;this.updateAndEmitDCBufferStatus(k)},this.handleDisconnect=(_,$)=>{if(this._isClosed)return;this.log.warn("".concat(_," disconnected"),this.logContext),this.reconnectAttempts===0&&(this.reconnectStart=Date.now());const k=ot=>{this.log.warn("could not recover connection after ".concat(this.reconnectAttempts," attempts, ").concat(ot,"ms. giving up"),this.logContext),this.emit(EngineEvent.Disconnected),this.close()},et=Date.now()-this.reconnectStart;let nt=this.getNextRetryDelay({elapsedMs:et,retryCount:this.reconnectAttempts});if(nt===null){k(et);return}_===leaveReconnect&&(nt=0),this.log.debug("reconnecting in ".concat(nt,"ms"),this.logContext),this.clearReconnectTimeout(),this.token&&this.regionUrlProvider&&this.regionUrlProvider.updateToken(this.token),this.reconnectTimeout=CriticalTimers.setTimeout(()=>this.attemptReconnect($).finally(()=>this.reconnectTimeout=void 0),nt)},this.waitForRestarted=()=>new Promise((_,$)=>{this.pcState===PCState.Connected&&_();const k=()=>{this.off(EngineEvent.Disconnected,et),_()},et=()=>{this.off(EngineEvent.Restarted,k),$()};this.once(EngineEvent.Restarted,k),this.once(EngineEvent.Disconnected,et)}),this.updateAndEmitDCBufferStatus=_=>{const $=this.isBufferStatusLow(_);typeof $<"u"&&$!==this.dcBufferStatus.get(_)&&(this.dcBufferStatus.set(_,$),this.emit(EngineEvent.DCBufferStatusChanged,$,_))},this.isBufferStatusLow=_=>{const $=this.dataChannelForKind(_);if($)return $.bufferedAmount<=$.bufferedAmountLowThreshold},this.handleBrowserOnLine=()=>{this.client.currentState===SignalConnectionState.RECONNECTING&&(this.clearReconnectTimeout(),this.attemptReconnect(ReconnectReason.RR_SIGNAL_DISCONNECTED))},this.log=getLogger((b=c.loggerName)!==null&&b!==void 0?b:LoggerNames.Engine),this.loggerOptions={loggerName:c.loggerName,loggerContextCb:()=>this.logContext},this.client=new SignalClient(void 0,this.loggerOptions),this.client.signalLatency=this.options.expSignalLatency,this.reconnectPolicy=this.options.reconnectPolicy,this.registerOnLineListener(),this.closingLock=new Mutex,this.dataProcessLock=new Mutex,this.dcBufferStatus=new Map([[DataPacket_Kind.LOSSY,!0],[DataPacket_Kind.RELIABLE,!0]]),this.client.onParticipantUpdate=_=>this.emit(EngineEvent.ParticipantUpdate,_),this.client.onConnectionQuality=_=>this.emit(EngineEvent.ConnectionQualityUpdate,_),this.client.onRoomUpdate=_=>this.emit(EngineEvent.RoomUpdate,_),this.client.onSubscriptionError=_=>this.emit(EngineEvent.SubscriptionError,_),this.client.onSubscriptionPermissionUpdate=_=>this.emit(EngineEvent.SubscriptionPermissionUpdate,_),this.client.onSpeakersChanged=_=>this.emit(EngineEvent.SpeakersChanged,_),this.client.onStreamStateUpdate=_=>this.emit(EngineEvent.StreamStateChanged,_)}get logContext(){var c,b,_,$,k,et,nt,ot;return{room:(b=(c=this.latestJoinResponse)===null||c===void 0?void 0:c.room)===null||b===void 0?void 0:b.name,roomID:($=(_=this.latestJoinResponse)===null||_===void 0?void 0:_.room)===null||$===void 0?void 0:$.sid,participant:(et=(k=this.latestJoinResponse)===null||k===void 0?void 0:k.participant)===null||et===void 0?void 0:et.identity,pID:(ot=(nt=this.latestJoinResponse)===null||nt===void 0?void 0:nt.participant)===null||ot===void 0?void 0:ot.sid}}join(c,b,_,$){return __awaiter$3(this,void 0,void 0,function*(){this.url=c,this.token=b,this.signalOpts=_,this.maxJoinAttempts=_.maxRetries;try{this.joinAttempts+=1,this.setupSignalClientCallbacks();const k=yield this.client.join(c,b,_,$);return this._isClosed=!1,this.latestJoinResponse=k,this.subscriberPrimary=k.subscriberPrimary,this.pcManager||(yield this.configure(k)),this.subscriberPrimary||this.negotiate(),this.clientConfiguration=k.clientConfiguration,k}catch(k){if(k instanceof ConnectionError&&k.reason===1&&(this.log.warn("Couldn't connect to server, attempt ".concat(this.joinAttempts," of ").concat(this.maxJoinAttempts),this.logContext),this.joinAttempts<this.maxJoinAttempts))return this.join(c,b,_,$);throw k}})}close(){return __awaiter$3(this,void 0,void 0,function*(){const c=yield this.closingLock.lock();if(this.isClosed){c();return}try{this._isClosed=!0,this.emit(EngineEvent.Closing),this.removeAllListeners(),this.deregisterOnLineListener(),this.clearPendingReconnect(),yield this.cleanupPeerConnections(),yield this.cleanupClient()}finally{c()}})}cleanupPeerConnections(){var c;return __awaiter$3(this,void 0,void 0,function*(){yield(c=this.pcManager)===null||c===void 0?void 0:c.close(),this.pcManager=void 0;const b=_=>{_&&(_.close(),_.onbufferedamountlow=null,_.onclose=null,_.onclosing=null,_.onerror=null,_.onmessage=null,_.onopen=null)};b(this.lossyDC),b(this.lossyDCSub),b(this.reliableDC),b(this.reliableDCSub),this.lossyDC=void 0,this.lossyDCSub=void 0,this.reliableDC=void 0,this.reliableDCSub=void 0})}cleanupClient(){return __awaiter$3(this,void 0,void 0,function*(){yield this.client.close(),this.client.resetCallbacks()})}addTrack(c){if(this.pendingTrackResolvers[c.cid])throw new TrackInvalidError("a track with the same ID has already been published");return new Promise((b,_)=>{const $=setTimeout(()=>{delete this.pendingTrackResolvers[c.cid],_(new ConnectionError("publication of local track timed out, no response from server"))},1e4);this.pendingTrackResolvers[c.cid]={resolve:k=>{clearTimeout($),b(k)},reject:()=>{clearTimeout($),_(new Error("Cancelled publication by calling unpublish"))}},this.client.sendAddTrack(c)})}removeTrack(c){if(c.track&&this.pendingTrackResolvers[c.track.id]){const{reject:b}=this.pendingTrackResolvers[c.track.id];b&&b(),delete this.pendingTrackResolvers[c.track.id]}try{return this.pcManager.removeTrack(c),!0}catch(b){this.log.warn("failed to remove track",Object.assign(Object.assign({},this.logContext),{error:b}))}return!1}updateMuteStatus(c,b){this.client.sendMuteTrack(c,b)}get dataSubscriberReadyState(){var c;return(c=this.reliableDCSub)===null||c===void 0?void 0:c.readyState}getConnectedServerAddress(){var c;return __awaiter$3(this,void 0,void 0,function*(){return(c=this.pcManager)===null||c===void 0?void 0:c.getConnectedAddress()})}setRegionUrlProvider(c){this.regionUrlProvider=c}configure(c){var b;return __awaiter$3(this,void 0,void 0,function*(){if(this.pcManager&&this.pcManager.currentState!==PCTransportState.NEW)return;this.participantSid=(b=c.participant)===null||b===void 0?void 0:b.sid;const _=this.makeRTCConfiguration(c);this.pcManager=new PCTransportManager(_,c.subscriberPrimary,this.loggerOptions),this.emit(EngineEvent.TransportsCreated,this.pcManager.publisher,this.pcManager.subscriber),this.pcManager.onIceCandidate=($,k)=>{this.client.sendIceCandidate($,k)},this.pcManager.onPublisherOffer=$=>{this.client.sendOffer($)},this.pcManager.onDataChannel=this.handleDataChannel,this.pcManager.onStateChange=($,k,et)=>__awaiter$3(this,void 0,void 0,function*(){if(this.log.debug("primary PC state changed ".concat($),this.logContext),$===PCTransportState.CONNECTED){const ht=this.pcState===PCState.New;this.pcState=PCState.Connected,ht&&this.emit(EngineEvent.Connected,c)}else $===PCTransportState.FAILED&&this.pcState===PCState.Connected&&(this.pcState=PCState.Disconnected,this.handleDisconnect("peerconnection failed",et==="failed"?ReconnectReason.RR_SUBSCRIBER_FAILED:ReconnectReason.RR_PUBLISHER_FAILED));const nt=this.client.isDisconnected||this.client.currentState===SignalConnectionState.RECONNECTING,ot=[PCTransportState.FAILED,PCTransportState.CLOSING,PCTransportState.CLOSED].includes($);nt&&ot&&!this._isClosed&&this.emit(EngineEvent.Offline)}),this.pcManager.onTrack=$=>{this.emit(EngineEvent.MediaTrackAdded,$.track,$.streams[0],$.receiver)},this.createDataChannels()})}setupSignalClientCallbacks(){this.client.onAnswer=c=>__awaiter$3(this,void 0,void 0,function*(){this.pcManager&&(this.log.debug("received server answer",Object.assign(Object.assign({},this.logContext),{RTCSdpType:c.type})),yield this.pcManager.setPublisherAnswer(c))}),this.client.onTrickle=(c,b)=>{this.pcManager&&(this.log.trace("got ICE candidate from peer",Object.assign(Object.assign({},this.logContext),{candidate:c,target:b})),this.pcManager.addIceCandidate(c,b))},this.client.onOffer=c=>__awaiter$3(this,void 0,void 0,function*(){if(!this.pcManager)return;const b=yield this.pcManager.createSubscriberAnswerFromOffer(c);this.client.sendAnswer(b)}),this.client.onLocalTrackPublished=c=>{var b;if(this.log.debug("received trackPublishedResponse",Object.assign(Object.assign({},this.logContext),{cid:c.cid,track:(b=c.track)===null||b===void 0?void 0:b.sid})),!this.pendingTrackResolvers[c.cid]){this.log.error("missing track resolver for ".concat(c.cid),Object.assign(Object.assign({},this.logContext),{cid:c.cid}));return}const{resolve:_}=this.pendingTrackResolvers[c.cid];delete this.pendingTrackResolvers[c.cid],_(c.track)},this.client.onLocalTrackUnpublished=c=>{this.emit(EngineEvent.LocalTrackUnpublished,c)},this.client.onTokenRefresh=c=>{this.token=c},this.client.onRemoteMuteChanged=(c,b)=>{this.emit(EngineEvent.RemoteMute,c,b)},this.client.onSubscribedQualityUpdate=c=>{this.emit(EngineEvent.SubscribedQualityUpdate,c)},this.client.onClose=()=>{this.handleDisconnect("signal",ReconnectReason.RR_SIGNAL_DISCONNECTED)},this.client.onLeave=c=>{c!=null&&c.canReconnect?(this.fullReconnectOnNext=!0,this.handleDisconnect(leaveReconnect)):(this.emit(EngineEvent.Disconnected,c==null?void 0:c.reason),this.close()),this.log.debug("client leave request",Object.assign(Object.assign({},this.logContext),{reason:c==null?void 0:c.reason}))}}makeRTCConfiguration(c){var b;const _=Object.assign({},this.rtcConfig);if(!((b=this.signalOpts)===null||b===void 0)&&b.e2eeEnabled&&(this.log.debug("E2EE - setting up transports with insertable streams",this.logContext),_.encodedInsertableStreams=!0),c.iceServers&&!_.iceServers){const $=[];c.iceServers.forEach(k=>{const et={urls:k.urls};k.username&&(et.username=k.username),k.credential&&(et.credential=k.credential),$.push(et)}),_.iceServers=$}return c.clientConfiguration&&c.clientConfiguration.forceRelay===ClientConfigSetting.ENABLED&&(_.iceTransportPolicy="relay"),_.sdpSemantics="unified-plan",_.continualGatheringPolicy="gather_continually",_}createDataChannels(){this.pcManager&&(this.lossyDC&&(this.lossyDC.onmessage=null,this.lossyDC.onerror=null),this.reliableDC&&(this.reliableDC.onmessage=null,this.reliableDC.onerror=null),this.lossyDC=this.pcManager.createPublisherDataChannel(lossyDataChannel,{ordered:!0,maxRetransmits:0}),this.reliableDC=this.pcManager.createPublisherDataChannel(reliableDataChannel,{ordered:!0}),this.lossyDC.onmessage=this.handleDataMessage,this.reliableDC.onmessage=this.handleDataMessage,this.lossyDC.onerror=this.handleDataError,this.reliableDC.onerror=this.handleDataError,this.lossyDC.bufferedAmountLowThreshold=65535,this.reliableDC.bufferedAmountLowThreshold=65535,this.lossyDC.onbufferedamountlow=this.handleBufferedAmountLow,this.reliableDC.onbufferedamountlow=this.handleBufferedAmountLow)}setPreferredCodec(c,b,_){if(!("getCapabilities"in RTCRtpReceiver))return;const $=RTCRtpReceiver.getCapabilities(b);if(!$)return;this.log.debug("get receiver capabilities",Object.assign(Object.assign({},this.logContext),{cap:$}));const k=[],et=[],nt=[];$.codecs.forEach(ot=>{const ht=ot.mimeType.toLowerCase();if(ht==="audio/opus"){k.push(ot);return}if(!(ht==="video/".concat(_))){nt.push(ot);return}if(_==="h264"){ot.sdpFmtpLine&&ot.sdpFmtpLine.includes("profile-level-id=42e01f")?k.push(ot):et.push(ot);return}k.push(ot)}),supportsSetCodecPreferences(c)&&c.setCodecPreferences(k.concat(et,nt))}createSender(c,b,_){return __awaiter$3(this,void 0,void 0,function*(){if(supportsTransceiver())return yield this.createTransceiverRTCRtpSender(c,b,_);if(supportsAddTrack())return this.log.warn("using add-track fallback",this.logContext),yield this.createRTCRtpSender(c.mediaStreamTrack);throw new UnexpectedConnectionState("Required webRTC APIs not supported on this device")})}createSimulcastSender(c,b,_,$){return __awaiter$3(this,void 0,void 0,function*(){if(supportsTransceiver())return this.createSimulcastTransceiverSender(c,b,_,$);if(supportsAddTrack())return this.log.debug("using add-track fallback",this.logContext),this.createRTCRtpSender(c.mediaStreamTrack);throw new UnexpectedConnectionState("Cannot stream on this device")})}createTransceiverRTCRtpSender(c,b,_){return __awaiter$3(this,void 0,void 0,function*(){if(!this.pcManager)throw new UnexpectedConnectionState("publisher is closed");const $=[];c.mediaStream&&$.push(c.mediaStream);const k={direction:"sendonly",streams:$};_&&(k.sendEncodings=_);const et=yield this.pcManager.addPublisherTransceiver(c.mediaStreamTrack,k);return c.kind===Track.Kind.Video&&b.videoCodec&&(this.setPreferredCodec(et,c.kind,b.videoCodec),c.codec=b.videoCodec),et.sender})}createSimulcastTransceiverSender(c,b,_,$){return __awaiter$3(this,void 0,void 0,function*(){if(!this.pcManager)throw new UnexpectedConnectionState("publisher is closed");const k={direction:"sendonly"};$&&(k.sendEncodings=$);const et=yield this.pcManager.addPublisherTransceiver(b.mediaStreamTrack,k);if(_.videoCodec)return this.setPreferredCodec(et,c.kind,_.videoCodec),c.setSimulcastTrackSender(_.videoCodec,et.sender),et.sender})}createRTCRtpSender(c){return __awaiter$3(this,void 0,void 0,function*(){if(!this.pcManager)throw new UnexpectedConnectionState("publisher is closed");return this.pcManager.addPublisherTrack(c)})}attemptReconnect(c){var b,_,$;return __awaiter$3(this,void 0,void 0,function*(){if(!this._isClosed){if(this.attemptingReconnect){livekitLogger.warn("already attempting reconnect, returning early",this.logContext);return}(((b=this.clientConfiguration)===null||b===void 0?void 0:b.resumeConnection)===ClientConfigSetting.DISABLED||(($=(_=this.pcManager)===null||_===void 0?void 0:_.currentState)!==null&&$!==void 0?$:PCTransportState.NEW)===PCTransportState.NEW)&&(this.fullReconnectOnNext=!0);try{this.attemptingReconnect=!0,this.fullReconnectOnNext?yield this.restartConnection():yield this.resumeConnection(c),this.clearPendingReconnect(),this.fullReconnectOnNext=!1}catch(k){this.reconnectAttempts+=1;let et=!0;k instanceof UnexpectedConnectionState?(this.log.debug("received unrecoverable error",Object.assign(Object.assign({},this.logContext),{error:k})),et=!1):k instanceof SignalReconnectError||(this.fullReconnectOnNext=!0),et?this.handleDisconnect("reconnect",ReconnectReason.RR_UNKNOWN):(this.log.info("could not recover connection after ".concat(this.reconnectAttempts," attempts, ").concat(Date.now()-this.reconnectStart,"ms. giving up"),this.logContext),this.emit(EngineEvent.Disconnected),yield this.close())}finally{this.attemptingReconnect=!1}}})}getNextRetryDelay(c){try{return this.reconnectPolicy.nextRetryDelayInMs(c)}catch(b){this.log.warn("encountered error in reconnect policy",Object.assign(Object.assign({},this.logContext),{error:b}))}return null}restartConnection(c){var b,_,$;return __awaiter$3(this,void 0,void 0,function*(){try{if(!this.url||!this.token)throw new UnexpectedConnectionState("could not reconnect, url or token not saved");this.log.info("reconnecting, attempt: ".concat(this.reconnectAttempts),this.logContext),this.emit(EngineEvent.Restarting),this.client.isDisconnected||(yield this.client.sendLeave()),yield this.cleanupPeerConnections(),yield this.cleanupClient();let k;try{if(!this.signalOpts)throw this.log.warn("attempted connection restart, without signal options present",this.logContext),new SignalReconnectError;k=yield this.join(c??this.url,this.token,this.signalOpts)}catch(et){throw et instanceof ConnectionError&&et.reason===0?new UnexpectedConnectionState("could not reconnect, token might be expired"):new SignalReconnectError}if(this.shouldFailNext)throw this.shouldFailNext=!1,new Error("simulated failure");if(this.client.setReconnected(),this.emit(EngineEvent.SignalRestarted,k),yield this.waitForPCReconnected(),this.client.currentState!==SignalConnectionState.CONNECTED)throw new SignalReconnectError("Signal connection got severed during reconnect");(b=this.regionUrlProvider)===null||b===void 0||b.resetAttempts(),this.emit(EngineEvent.Restarted)}catch(k){const et=yield(_=this.regionUrlProvider)===null||_===void 0?void 0:_.getNextBestRegionUrl();if(et){yield this.restartConnection(et);return}else throw($=this.regionUrlProvider)===null||$===void 0||$.resetAttempts(),k}})}resumeConnection(c){var b;return __awaiter$3(this,void 0,void 0,function*(){if(!this.url||!this.token)throw new UnexpectedConnectionState("could not reconnect, url or token not saved");if(!this.pcManager)throw new UnexpectedConnectionState("publisher and subscriber connections unset");this.log.info("resuming signal connection, attempt ".concat(this.reconnectAttempts),this.logContext),this.emit(EngineEvent.Resuming);let _;try{this.setupSignalClientCallbacks(),_=yield this.client.reconnect(this.url,this.token,this.participantSid,c)}catch($){let k="";throw $ instanceof Error&&(k=$.message,this.log.error($.message,Object.assign(Object.assign({},this.logContext),{error:$}))),$ instanceof ConnectionError&&$.reason===0?new UnexpectedConnectionState("could not reconnect, token might be expired"):$ instanceof ConnectionError&&$.reason===4?$:new SignalReconnectError(k)}if(this.emit(EngineEvent.SignalResumed),_){const $=this.makeRTCConfiguration(_);this.pcManager.updateConfiguration($)}else this.log.warn("Did not receive reconnect response",this.logContext);if(this.shouldFailNext)throw this.shouldFailNext=!1,new Error("simulated failure");if(yield this.pcManager.triggerIceRestart(),yield this.waitForPCReconnected(),this.client.currentState!==SignalConnectionState.CONNECTED)throw new SignalReconnectError("Signal connection got severed during reconnect");this.client.setReconnected(),((b=this.reliableDC)===null||b===void 0?void 0:b.readyState)==="open"&&this.reliableDC.id===null&&this.createDataChannels(),this.emit(EngineEvent.Resumed)})}waitForPCInitialConnection(c,b){return __awaiter$3(this,void 0,void 0,function*(){if(!this.pcManager)throw new UnexpectedConnectionState("PC manager is closed");yield this.pcManager.ensurePCTransportConnection(b,c)})}waitForPCReconnected(){return __awaiter$3(this,void 0,void 0,function*(){this.pcState=PCState.Reconnecting,this.log.debug("waiting for peer connection to reconnect",this.logContext);try{if(yield sleep(minReconnectWait),!this.pcManager)throw new UnexpectedConnectionState("PC manager is closed");yield this.pcManager.ensurePCTransportConnection(void 0,this.peerConnectionTimeout),this.pcState=PCState.Connected}catch(c){throw this.pcState=PCState.Disconnected,new ConnectionError("could not establish PC connection, ".concat(c.message))}})}sendDataPacket(c,b){return __awaiter$3(this,void 0,void 0,function*(){const _=c.toBinary();yield this.ensurePublisherConnected(b);const $=this.dataChannelForKind(b);$&&$.send(_),this.updateAndEmitDCBufferStatus(b)})}ensureDataTransportConnected(c){let b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.subscriberPrimary;var _;return __awaiter$3(this,void 0,void 0,function*(){if(!this.pcManager)throw new UnexpectedConnectionState("PC manager is closed");const $=b?this.pcManager.subscriber:this.pcManager.publisher,k=b?"Subscriber":"Publisher";if(!$)throw new ConnectionError("".concat(k," connection not set"));!b&&!this.pcManager.publisher.isICEConnected&&this.pcManager.publisher.getICEConnectionState()!=="checking"&&this.negotiate();const et=this.dataChannelForKind(c,b);if((et==null?void 0:et.readyState)==="open")return;const nt=new Date().getTime()+this.peerConnectionTimeout;for(;new Date().getTime()<nt;){if($.isICEConnected&&((_=this.dataChannelForKind(c,b))===null||_===void 0?void 0:_.readyState)==="open")return;yield sleep(50)}throw new ConnectionError("could not establish ".concat(k," connection, state: ").concat($.getICEConnectionState()))})}ensurePublisherConnected(c){return __awaiter$3(this,void 0,void 0,function*(){yield this.ensureDataTransportConnected(c,!1)})}verifyTransport(){return!(!this.pcManager||this.pcManager.currentState!==PCTransportState.CONNECTED||!this.client.ws||this.client.ws.readyState===WebSocket.CLOSED)}negotiate(){return __awaiter$3(this,void 0,void 0,function*(){return new Promise((c,b)=>__awaiter$3(this,void 0,void 0,function*(){if(!this.pcManager){b(new NegotiationError("PC manager is closed"));return}this.pcManager.requirePublisher();const _=new AbortController,$=()=>{_.abort(),this.log.debug("engine disconnected while negotiation was ongoing",this.logContext),c()};this.isClosed&&b("cannot negotiate on closed engine"),this.on(EngineEvent.Closing,$),this.pcManager.publisher.once(PCEvents.RTPVideoPayloadTypes,k=>{const et=new Map;k.forEach(nt=>{const ot=nt.codec.toLowerCase();isVideoCodec(ot)&&et.set(nt.payload,ot)}),this.emit(EngineEvent.RTPVideoMapUpdate,et)});try{yield this.pcManager.negotiate(_),c()}catch(k){k instanceof NegotiationError&&(this.fullReconnectOnNext=!0),this.handleDisconnect("negotiation",ReconnectReason.RR_UNKNOWN),b(k)}finally{this.off(EngineEvent.Closing,$)}}))})}dataChannelForKind(c,b){if(b){if(c===DataPacket_Kind.LOSSY)return this.lossyDCSub;if(c===DataPacket_Kind.RELIABLE)return this.reliableDCSub}else{if(c===DataPacket_Kind.LOSSY)return this.lossyDC;if(c===DataPacket_Kind.RELIABLE)return this.reliableDC}}sendSyncState(c,b){var _,$;if(!this.pcManager){this.log.warn("sync state cannot be sent without peer connection setup",this.logContext);return}const k=this.pcManager.subscriber.getLocalDescription(),et=this.pcManager.subscriber.getRemoteDescription(),nt=($=(_=this.signalOpts)===null||_===void 0?void 0:_.autoSubscribe)!==null&&$!==void 0?$:!0,ot=new Array,ht=new Array;c.forEach(vt=>{vt.isDesired!==nt&&ot.push(vt.trackSid),vt.isEnabled||ht.push(vt.trackSid)}),this.client.sendSyncState(new SyncState({answer:k?toProtoSessionDescription({sdp:k.sdp,type:k.type}):void 0,offer:et?toProtoSessionDescription({sdp:et.sdp,type:et.type}):void 0,subscription:new UpdateSubscription({trackSids:ot,subscribe:!nt,participantTracks:[]}),publishTracks:getTrackPublicationInfo(b),dataChannels:this.dataChannelsInfo(),trackSidsDisabled:ht}))}failNext(){this.shouldFailNext=!0}dataChannelsInfo(){const c=[],b=(_,$)=>{(_==null?void 0:_.id)!==void 0&&_.id!==null&&c.push(new DataChannelInfo({label:_.label,id:_.id,target:$}))};return b(this.dataChannelForKind(DataPacket_Kind.LOSSY),SignalTarget.PUBLISHER),b(this.dataChannelForKind(DataPacket_Kind.RELIABLE),SignalTarget.PUBLISHER),b(this.dataChannelForKind(DataPacket_Kind.LOSSY,!0),SignalTarget.SUBSCRIBER),b(this.dataChannelForKind(DataPacket_Kind.RELIABLE,!0),SignalTarget.SUBSCRIBER),c}clearReconnectTimeout(){this.reconnectTimeout&&CriticalTimers.clearTimeout(this.reconnectTimeout)}clearPendingReconnect(){this.clearReconnectTimeout(),this.reconnectAttempts=0}registerOnLineListener(){isWeb()&&window.addEventListener("online",this.handleBrowserOnLine)}deregisterOnLineListener(){isWeb()&&window.removeEventListener("online",this.handleBrowserOnLine)}}class SignalReconnectError extends Error{}class RegionUrlProvider{constructor(c,b){this.lastUpdateAt=0,this.settingsCacheTime=3e3,this.attemptedRegions=[],this.serverUrl=new URL(c),this.token=b}updateToken(c){this.token=c}isCloud(){return isCloud(this.serverUrl)}getServerUrl(){return this.serverUrl}getNextBestRegionUrl(c){return __awaiter$3(this,void 0,void 0,function*(){if(!this.isCloud())throw Error("region availability is only supported for LiveKit Cloud domains");(!this.regionSettings||Date.now()-this.lastUpdateAt>this.settingsCacheTime)&&(this.regionSettings=yield this.fetchRegionSettings(c));const b=this.regionSettings.regions.filter(_=>!this.attemptedRegions.find($=>$.url===_.url));if(b.length>0){const _=b[0];return this.attemptedRegions.push(_),livekitLogger.debug("next region: ".concat(_.region)),_.url}else return null})}resetAttempts(){this.attemptedRegions=[]}fetchRegionSettings(c){return __awaiter$3(this,void 0,void 0,function*(){const b=yield fetch("".concat(getCloudConfigUrl(this.serverUrl),"/regions"),{headers:{authorization:"Bearer ".concat(this.token)},signal:c});if(b.ok){const _=yield b.json();return this.lastUpdateAt=Date.now(),_}else throw new ConnectionError("Could not fetch region settings: ".concat(b.statusText),b.status===401?0:void 0,b.status)})}}function getCloudConfigUrl(a){return"".concat(a.protocol.replace("ws","http"),"//").concat(a.host,"/settings")}const monitorFrequency=2e3;function computeBitrate(a,c){if(!c)return 0;let b,_;return"bytesReceived"in a?(b=a.bytesReceived,_=c.bytesReceived):"bytesSent"in a&&(b=a.bytesSent,_=c.bytesSent),b===void 0||_===void 0||a.timestamp===void 0||c.timestamp===void 0?0:(b-_)*8*1e3/(a.timestamp-c.timestamp)}class LocalAudioTrack extends LocalTrack{constructor(c,b){let _=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,$=arguments.length>3?arguments[3]:void 0,k=arguments.length>4?arguments[4]:void 0;super(c,Track.Kind.Audio,b,_,k),this.stopOnMute=!1,this.monitorSender=()=>__awaiter$3(this,void 0,void 0,function*(){if(!this.sender){this._currentBitrate=0;return}let et;try{et=yield this.getSenderStats()}catch(nt){this.log.error("could not get audio sender stats",Object.assign(Object.assign({},this.logContext),{error:nt}));return}et&&this.prevStats&&(this._currentBitrate=computeBitrate(et,this.prevStats)),this.prevStats=et}),this.audioContext=$,this.checkForSilence()}setDeviceId(c){return __awaiter$3(this,void 0,void 0,function*(){return this._constraints.deviceId===c&&this._mediaStreamTrack.getSettings().deviceId===unwrapConstraint(c)?!0:(this._constraints.deviceId=c,this.isMuted||(yield this.restartTrack()),this.isMuted||unwrapConstraint(c)===this._mediaStreamTrack.getSettings().deviceId)})}mute(){const c=Object.create(null,{mute:{get:()=>super.mute}});return __awaiter$3(this,void 0,void 0,function*(){const b=yield this.muteLock.lock();try{return this.isMuted?(this.log.debug("Track already muted",this.logContext),this):(this.source===Track.Source.Microphone&&this.stopOnMute&&!this.isUserProvided&&(this.log.debug("stopping mic track",this.logContext),this._mediaStreamTrack.stop()),yield c.mute.call(this),this)}finally{b()}})}unmute(){const c=Object.create(null,{unmute:{get:()=>super.unmute}});return __awaiter$3(this,void 0,void 0,function*(){const b=yield this.muteLock.lock();try{if(!this.isMuted)return this.log.debug("Track already unmuted",this.logContext),this;const _=this._constraints.deviceId&&this._mediaStreamTrack.getSettings().deviceId!==unwrapConstraint(this._constraints.deviceId);return this.source===Track.Source.Microphone&&(this.stopOnMute||this._mediaStreamTrack.readyState==="ended"||_)&&!this.isUserProvided&&(this.log.debug("reacquiring mic track",this.logContext),yield this.restartTrack()),yield c.unmute.call(this),this}finally{b()}})}restartTrack(c){return __awaiter$3(this,void 0,void 0,function*(){let b;if(c){const _=constraintsForOptions({audio:c});typeof _.audio!="boolean"&&(b=_.audio)}yield this.restart(b)})}restart(c){const b=Object.create(null,{restart:{get:()=>super.restart}});return __awaiter$3(this,void 0,void 0,function*(){const _=yield b.restart.call(this,c);return this.checkForSilence(),_})}startMonitor(){isWeb()&&(this.monitorInterval||(this.monitorInterval=setInterval(()=>{this.monitorSender()},monitorFrequency)))}setProcessor(c){var b;return __awaiter$3(this,void 0,void 0,function*(){const _=yield this.processorLock.lock();try{if(!this.audioContext)throw Error("Audio context needs to be set on LocalAudioTrack in order to enable processors");this.processor&&(yield this.stopProcessor());const $={kind:this.kind,track:this._mediaStreamTrack,audioContext:this.audioContext};this.log.debug("setting up audio processor ".concat(c.name),this.logContext),yield c.init($),this.processor=c,this.processor.processedTrack&&(yield(b=this.sender)===null||b===void 0?void 0:b.replaceTrack(this.processor.processedTrack)),this.emit(TrackEvent.TrackProcessorUpdate,this.processor)}finally{_()}})}setAudioContext(c){this.audioContext=c}getSenderStats(){var c;return __awaiter$3(this,void 0,void 0,function*(){if(!(!((c=this.sender)===null||c===void 0)&&c.getStats))return;const b=yield this.sender.getStats();let _;return b.forEach($=>{$.type==="outbound-rtp"&&(_={type:"audio",streamId:$.id,packetsSent:$.packetsSent,packetsLost:$.packetsLost,bytesSent:$.bytesSent,timestamp:$.timestamp,roundTripTime:$.roundTripTime,jitter:$.jitter})}),_})}checkForSilence(){return __awaiter$3(this,void 0,void 0,function*(){const c=yield detectSilence(this);return c&&(this.isMuted||this.log.warn("silence detected on local audio track",this.logContext),this.emit(TrackEvent.AudioSilenceDetected)),c})}}function mediaTrackToLocalTrack(a,c,b){switch(a.kind){case"audio":return new LocalAudioTrack(a,c,!1,void 0,b);case"video":return new LocalVideoTrack(a,c,!1,b);default:throw new TrackInvalidError("unsupported track type: ".concat(a.kind))}}const presets169=Object.values(VideoPresets),presets43=Object.values(VideoPresets43),presetsScreenShare=Object.values(ScreenSharePresets),defaultSimulcastPresets169=[VideoPresets.h180,VideoPresets.h360],defaultSimulcastPresets43=[VideoPresets43.h180,VideoPresets43.h360],computeDefaultScreenShareSimulcastPresets=a=>[{scaleResolutionDownBy:2,fps:a.encoding.maxFramerate}].map(b=>{var _,$;return new VideoPreset(Math.floor(a.width/b.scaleResolutionDownBy),Math.floor(a.height/b.scaleResolutionDownBy),Math.max(15e4,Math.floor(a.encoding.maxBitrate/(Math.pow(b.scaleResolutionDownBy,2)*(((_=a.encoding.maxFramerate)!==null&&_!==void 0?_:30)/(($=b.fps)!==null&&$!==void 0?$:30))))),b.fps,a.encoding.priority)}),videoRids=["q","h","f"];function computeVideoEncodings(a,c,b,_){var $,k;let et=_==null?void 0:_.videoEncoding;a&&(et=_==null?void 0:_.screenShareEncoding);const nt=_==null?void 0:_.simulcast,ot=_==null?void 0:_.scalabilityMode,ht=_==null?void 0:_.videoCodec;if(!et&&!nt&&!ot||!c||!b)return[{}];et||(et=determineAppropriateEncoding(a,c,b,ht),livekitLogger.debug("using video encoding",et));const vt=new VideoPreset(c,b,et.maxBitrate,et.maxFramerate,et.priority);if(ot&&isSVCCodec(ht)){const $t=new ScalabilityMode(ot),Tt=[];if($t.spatial>3)throw new Error("unsupported scalabilityMode: ".concat(ot));const At=getBrowser();if(isSafari()||(At==null?void 0:At.name)==="Chrome"&&compareVersions(At==null?void 0:At.version,"113")<0){for(let Mt=0;Mt<$t.spatial;Mt+=1)Tt.push({rid:videoRids[2-Mt],maxBitrate:et.maxBitrate/Math.pow(3,Mt),maxFramerate:vt.encoding.maxFramerate});Tt[0].scalabilityMode=ot}else Tt.push({maxBitrate:et.maxBitrate,maxFramerate:vt.encoding.maxFramerate,scalabilityMode:ot});return livekitLogger.debug("using svc encoding",{encodings:Tt}),Tt}if(!nt)return[et];let _t=[];a?_t=($=sortPresets(_==null?void 0:_.screenShareSimulcastLayers))!==null&&$!==void 0?$:defaultSimulcastLayers(a,vt):_t=(k=sortPresets(_==null?void 0:_.videoSimulcastLayers))!==null&&k!==void 0?k:defaultSimulcastLayers(a,vt);let kt;if(_t.length>0){const $t=_t[0];_t.length>1&&([,kt]=_t);const Tt=Math.max(c,b);if(Tt>=960&&kt)return encodingsFromPresets(c,b,[$t,kt,vt]);if(Tt>=480)return encodingsFromPresets(c,b,[$t,vt])}return encodingsFromPresets(c,b,[vt])}function computeTrackBackupEncodings(a,c,b){var _,$,k,et;if(!b.backupCodec||b.backupCodec===!0||b.backupCodec.codec===b.videoCodec)return;c!==b.backupCodec.codec&&livekitLogger.warn("requested a different codec than specified as backup",{serverRequested:c,backup:b.backupCodec.codec}),b.videoCodec=c,b.videoEncoding=b.backupCodec.encoding;const nt=a.mediaStreamTrack.getSettings(),ot=(_=nt.width)!==null&&_!==void 0?_:($=a.dimensions)===null||$===void 0?void 0:$.width,ht=(k=nt.height)!==null&&k!==void 0?k:(et=a.dimensions)===null||et===void 0?void 0:et.height;return computeVideoEncodings(a.source===Track.Source.ScreenShare,ot,ht,b)}function determineAppropriateEncoding(a,c,b,_){const $=presetsForResolution(a,c,b);let{encoding:k}=$[0];const et=Math.max(c,b);for(let nt=0;nt<$.length;nt+=1){const ot=$[nt];if(k=ot.encoding,ot.width>=et)break}if(_)switch(_){case"av1":k=Object.assign({},k),k.maxBitrate=k.maxBitrate*.7;break;case"vp9":k=Object.assign({},k),k.maxBitrate=k.maxBitrate*.85;break}return k}function presetsForResolution(a,c,b){if(a)return presetsScreenShare;const _=c>b?c/b:b/c;return Math.abs(_-16/9)<Math.abs(_-4/3)?presets169:presets43}function defaultSimulcastLayers(a,c){if(a)return computeDefaultScreenShareSimulcastPresets(c);const{width:b,height:_}=c,$=b>_?b/_:_/b;return Math.abs($-16/9)<Math.abs($-4/3)?defaultSimulcastPresets169:defaultSimulcastPresets43}function encodingsFromPresets(a,c,b){const _=[];if(b.forEach(($,k)=>{if(k>=videoRids.length)return;const et=Math.min(a,c),ot={rid:videoRids[k],scaleResolutionDownBy:Math.max(1,et/Math.min($.width,$.height)),maxBitrate:$.encoding.maxBitrate};$.encoding.maxFramerate&&(ot.maxFramerate=$.encoding.maxFramerate);const ht=isFireFox()||k===0;$.encoding.priority&&ht&&(ot.priority=$.encoding.priority,ot.networkPriority=$.encoding.priority),_.push(ot)}),isReactNative()&&getReactNativeOs()==="ios"){let $;_.forEach(et=>{$?et.maxFramerate&&et.maxFramerate>$&&($=et.maxFramerate):$=et.maxFramerate});let k=!0;_.forEach(et=>{var nt;et.maxFramerate!=$&&(k&&(k=!1,livekitLogger.info("Simulcast on iOS React-Native requires all encodings to share the same framerate.")),livekitLogger.info('Setting framerate of encoding "'.concat((nt=et.rid)!==null&&nt!==void 0?nt:"",'" to ').concat($)),et.maxFramerate=$)})}return _}function sortPresets(a){if(a)return a.sort((c,b)=>{const{encoding:_}=c,{encoding:$}=b;return _.maxBitrate>$.maxBitrate?1:_.maxBitrate<$.maxBitrate?-1:_.maxBitrate===$.maxBitrate&&_.maxFramerate&&$.maxFramerate?_.maxFramerate>$.maxFramerate?1:-1:0})}class ScalabilityMode{constructor(c){const b=c.match(/^L(\d)T(\d)(h|_KEY|_KEY_SHIFT){0,1}$/);if(!b)throw new Error("invalid scalability mode");if(this.spatial=parseInt(b[1]),this.temporal=parseInt(b[2]),b.length>3)switch(b[3]){case"h":case"_KEY":case"_KEY_SHIFT":this.suffix=b[3]}}toString(){var c;return"L".concat(this.spatial,"T").concat(this.temporal).concat((c=this.suffix)!==null&&c!==void 0?c:"")}}const refreshSubscribedCodecAfterNewCodec=5e3;class LocalVideoTrack extends LocalTrack{constructor(c,b){let _=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,$=arguments.length>3?arguments[3]:void 0;super(c,Track.Kind.Video,b,_,$),this.simulcastCodecs=new Map,this.monitorSender=()=>__awaiter$3(this,void 0,void 0,function*(){if(!this.sender){this._currentBitrate=0;return}let k;try{k=yield this.getSenderStats()}catch(nt){this.log.error("could not get audio sender stats",Object.assign(Object.assign({},this.logContext),{error:nt}));return}const et=new Map(k.map(nt=>[nt.rid,nt]));if(this.prevStats){let nt=0;et.forEach((ot,ht)=>{var vt;const _t=(vt=this.prevStats)===null||vt===void 0?void 0:vt.get(ht);nt+=computeBitrate(ot,_t)}),this._currentBitrate=nt}this.prevStats=et}),this.senderLock=new Mutex}get isSimulcast(){return!!(this.sender&&this.sender.getParameters().encodings.length>1)}startMonitor(c){var b;if(this.signalClient=c,!isWeb())return;const _=(b=this.sender)===null||b===void 0?void 0:b.getParameters();_&&(this.encodings=_.encodings),!this.monitorInterval&&(this.monitorInterval=setInterval(()=>{this.monitorSender()},monitorFrequency))}stop(){this._mediaStreamTrack.getConstraints(),this.simulcastCodecs.forEach(c=>{c.mediaStreamTrack.stop()}),super.stop()}pauseUpstream(){const c=Object.create(null,{pauseUpstream:{get:()=>super.pauseUpstream}});var b,_,$,k,et;return __awaiter$3(this,void 0,void 0,function*(){yield c.pauseUpstream.call(this);try{for(var nt=!0,ot=__asyncValues(this.simulcastCodecs.values()),ht;ht=yield ot.next(),b=ht.done,!b;nt=!0)k=ht.value,nt=!1,yield(et=k.sender)===null||et===void 0?void 0:et.replaceTrack(null)}catch(vt){_={error:vt}}finally{try{!nt&&!b&&($=ot.return)&&(yield $.call(ot))}finally{if(_)throw _.error}}})}resumeUpstream(){const c=Object.create(null,{resumeUpstream:{get:()=>super.resumeUpstream}});var b,_,$,k,et;return __awaiter$3(this,void 0,void 0,function*(){yield c.resumeUpstream.call(this);try{for(var nt=!0,ot=__asyncValues(this.simulcastCodecs.values()),ht;ht=yield ot.next(),b=ht.done,!b;nt=!0){k=ht.value,nt=!1;const vt=k;yield(et=vt.sender)===null||et===void 0?void 0:et.replaceTrack(vt.mediaStreamTrack)}}catch(vt){_={error:vt}}finally{try{!nt&&!b&&($=ot.return)&&(yield $.call(ot))}finally{if(_)throw _.error}}})}mute(){const c=Object.create(null,{mute:{get:()=>super.mute}});return __awaiter$3(this,void 0,void 0,function*(){const b=yield this.muteLock.lock();try{return this.isMuted?(this.log.debug("Track already muted",this.logContext),this):(this.source===Track.Source.Camera&&!this.isUserProvided&&(this.log.debug("stopping camera track",this.logContext),this._mediaStreamTrack.stop()),yield c.mute.call(this),this)}finally{b()}})}unmute(){const c=Object.create(null,{unmute:{get:()=>super.unmute}});return __awaiter$3(this,void 0,void 0,function*(){const b=yield this.muteLock.lock();try{return this.isMuted?(this.source===Track.Source.Camera&&!this.isUserProvided&&(this.log.debug("reacquiring camera track",this.logContext),yield this.restartTrack()),yield c.unmute.call(this),this):(this.log.debug("Track already unmuted",this.logContext),this)}finally{b()}})}setTrackMuted(c){super.setTrackMuted(c);for(const b of this.simulcastCodecs.values())b.mediaStreamTrack.enabled=!c}getSenderStats(){var c;return __awaiter$3(this,void 0,void 0,function*(){if(!(!((c=this.sender)===null||c===void 0)&&c.getStats))return[];const b=[],_=yield this.sender.getStats();return _.forEach($=>{var k;if($.type==="outbound-rtp"){const et={type:"video",streamId:$.id,frameHeight:$.frameHeight,frameWidth:$.frameWidth,framesPerSecond:$.framesPerSecond,framesSent:$.framesSent,firCount:$.firCount,pliCount:$.pliCount,nackCount:$.nackCount,packetsSent:$.packetsSent,bytesSent:$.bytesSent,qualityLimitationReason:$.qualityLimitationReason,qualityLimitationDurations:$.qualityLimitationDurations,qualityLimitationResolutionChanges:$.qualityLimitationResolutionChanges,rid:(k=$.rid)!==null&&k!==void 0?k:$.id,retransmittedPacketsSent:$.retransmittedPacketsSent,targetBitrate:$.targetBitrate,timestamp:$.timestamp},nt=_.get($.remoteId);nt&&(et.jitter=nt.jitter,et.packetsLost=nt.packetsLost,et.roundTripTime=nt.roundTripTime),b.push(et)}}),b.sort(($,k)=>{var et,nt;return((et=k.frameWidth)!==null&&et!==void 0?et:0)-((nt=$.frameWidth)!==null&&nt!==void 0?nt:0)}),b})}setPublishingQuality(c){const b=[];for(let _=VideoQuality.LOW;_<=VideoQuality.HIGH;_+=1)b.push(new SubscribedQuality({quality:_,enabled:_<=c}));this.log.debug("setting publishing quality. max quality ".concat(c),this.logContext),this.setPublishingLayers(b)}setDeviceId(c){return __awaiter$3(this,void 0,void 0,function*(){return this._constraints.deviceId===c&&this._mediaStreamTrack.getSettings().deviceId===unwrapConstraint(c)?!0:(this._constraints.deviceId=c,this.isMuted||(yield this.restartTrack()),this.isMuted||unwrapConstraint(c)===this._mediaStreamTrack.getSettings().deviceId)})}restartTrack(c){var b,_,$,k;return __awaiter$3(this,void 0,void 0,function*(){let et;if(c){const vt=constraintsForOptions({video:c});typeof vt.video!="boolean"&&(et=vt.video)}yield this.restart(et);try{for(var nt=!0,ot=__asyncValues(this.simulcastCodecs.values()),ht;ht=yield ot.next(),b=ht.done,!b;nt=!0){k=ht.value,nt=!1;const vt=k;vt.sender&&(vt.mediaStreamTrack=this.mediaStreamTrack.clone(),yield vt.sender.replaceTrack(vt.mediaStreamTrack))}}catch(vt){_={error:vt}}finally{try{!nt&&!b&&($=ot.return)&&(yield $.call(ot))}finally{if(_)throw _.error}}})}setProcessor(c){let b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;const _=Object.create(null,{setProcessor:{get:()=>super.setProcessor}});var $,k,et,nt,ot,ht;return __awaiter$3(this,void 0,void 0,function*(){if(yield _.setProcessor.call(this,c,b),!((ot=this.processor)===null||ot===void 0)&&ot.processedTrack)try{for(var vt=!0,_t=__asyncValues(this.simulcastCodecs.values()),kt;kt=yield _t.next(),$=kt.done,!$;vt=!0)nt=kt.value,vt=!1,yield(ht=nt.sender)===null||ht===void 0?void 0:ht.replaceTrack(this.processor.processedTrack)}catch($t){k={error:$t}}finally{try{!vt&&!$&&(et=_t.return)&&(yield et.call(_t))}finally{if(k)throw k.error}}})}addSimulcastTrack(c,b){if(this.simulcastCodecs.has(c)){this.log.error("".concat(c," already added, skipping adding simulcast codec"),this.logContext);return}const _={codec:c,mediaStreamTrack:this.mediaStreamTrack.clone(),sender:void 0,encodings:b};return this.simulcastCodecs.set(c,_),_}setSimulcastTrackSender(c,b){const _=this.simulcastCodecs.get(c);_&&(_.sender=b,setTimeout(()=>{this.subscribedCodecs&&this.setPublishingCodecs(this.subscribedCodecs)},refreshSubscribedCodecAfterNewCodec))}setPublishingCodecs(c){var b,_,$,k,et,nt,ot;return __awaiter$3(this,void 0,void 0,function*(){if(this.log.debug("setting publishing codecs",Object.assign(Object.assign({},this.logContext),{codecs:c,currentCodec:this.codec})),!this.codec&&c.length>0)return yield this.setPublishingLayers(c[0].qualities),[];this.subscribedCodecs=c;const ht=[];try{for(b=!0,_=__asyncValues(c);$=yield _.next(),k=$.done,!k;b=!0){ot=$.value,b=!1;const vt=ot;if(!this.codec||this.codec===vt.codec)yield this.setPublishingLayers(vt.qualities);else{const _t=this.simulcastCodecs.get(vt.codec);if(this.log.debug("try setPublishingCodec for ".concat(vt.codec),Object.assign(Object.assign({},this.logContext),{simulcastCodecInfo:_t})),!_t||!_t.sender){for(const kt of vt.qualities)if(kt.enabled){ht.push(vt.codec);break}}else _t.encodings&&(this.log.debug("try setPublishingLayersForSender ".concat(vt.codec),this.logContext),yield setPublishingLayersForSender(_t.sender,_t.encodings,vt.qualities,this.senderLock,this.log,this.logContext))}}}catch(vt){et={error:vt}}finally{try{!b&&!k&&(nt=_.return)&&(yield nt.call(_))}finally{if(et)throw et.error}}return ht})}setPublishingLayers(c){return __awaiter$3(this,void 0,void 0,function*(){this.log.debug("setting publishing layers",Object.assign(Object.assign({},this.logContext),{qualities:c})),!(!this.sender||!this.encodings)&&(yield setPublishingLayersForSender(this.sender,this.encodings,c,this.senderLock,this.log,this.logContext))})}handleAppVisibilityChanged(){const c=Object.create(null,{handleAppVisibilityChanged:{get:()=>super.handleAppVisibilityChanged}});return __awaiter$3(this,void 0,void 0,function*(){yield c.handleAppVisibilityChanged.call(this),isMobile()&&this.isInBackground&&this.source===Track.Source.Camera&&(this._mediaStreamTrack.enabled=!1)})}}function setPublishingLayersForSender(a,c,b,_,$,k){return __awaiter$3(this,void 0,void 0,function*(){const et=yield _.lock();$.debug("setPublishingLayersForSender",Object.assign(Object.assign({},k),{sender:a,qualities:b,senderEncodings:c}));try{const nt=a.getParameters(),{encodings:ot}=nt;if(!ot)return;if(ot.length!==c.length){$.warn("cannot set publishing layers, encodings mismatch",Object.assign(Object.assign({},k),{encodings:ot,senderEncodings:c}));return}let ht=!1;!1&&ot[0].scalabilityMode||ot.forEach((_t,kt)=>{var $t;let Tt=($t=_t.rid)!==null&&$t!==void 0?$t:"";Tt===""&&(Tt="q");const At=videoQualityForRid(Tt),Mt=b.find(Dt=>Dt.quality===At);Mt&&_t.active!==Mt.enabled&&(ht=!0,_t.active=Mt.enabled,$.debug("setting layer ".concat(Mt.quality," to ").concat(_t.active?"enabled":"disabled"),k),isFireFox()&&(Mt.enabled?(_t.scaleResolutionDownBy=c[kt].scaleResolutionDownBy,_t.maxBitrate=c[kt].maxBitrate,_t.maxFrameRate=c[kt].maxFrameRate):(_t.scaleResolutionDownBy=4,_t.maxBitrate=10,_t.maxFrameRate=2)))}),ht&&(nt.encodings=ot,$.debug("setting encodings",Object.assign(Object.assign({},k),{encodings:nt.encodings})),yield a.setParameters(nt))}finally{et()}})}function videoQualityForRid(a){switch(a){case"f":return VideoQuality.HIGH;case"h":return VideoQuality.MEDIUM;case"q":return VideoQuality.LOW;default:return VideoQuality.HIGH}}function videoLayersFromEncodings(a,c,b,_){if(!b)return[new VideoLayer({quality:VideoQuality.HIGH,width:a,height:c,bitrate:0,ssrc:0})];if(_){const $=b[0].scalabilityMode,k=new ScalabilityMode($),et=[];for(let nt=0;nt<k.spatial;nt+=1)et.push(new VideoLayer({quality:VideoQuality.HIGH-nt,width:Math.ceil(a/Math.pow(2,nt)),height:Math.ceil(c/Math.pow(2,nt)),bitrate:b[0].maxBitrate?Math.ceil(b[0].maxBitrate/Math.pow(3,nt)):0,ssrc:0}));return et}return b.map($=>{var k,et,nt;const ot=(k=$.scaleResolutionDownBy)!==null&&k!==void 0?k:1;let ht=videoQualityForRid((et=$.rid)!==null&&et!==void 0?et:"");return new VideoLayer({quality:ht,width:Math.ceil(a/ot),height:Math.ceil(c/ot),bitrate:(nt=$.maxBitrate)!==null&&nt!==void 0?nt:0,ssrc:0})})}class RemoteTrack extends Track{constructor(c,b,_,$,k){super(c,_,k),this.sid=b,this.receiver=$}setMuted(c){this.isMuted!==c&&(this.isMuted=c,this._mediaStreamTrack.enabled=!c,this.emit(c?TrackEvent.Muted:TrackEvent.Unmuted,this))}setMediaStream(c){this.mediaStream=c;const b=_=>{_.track===this._mediaStreamTrack&&(c.removeEventListener("removetrack",b),this.receiver=void 0,this._currentBitrate=0,this.emit(TrackEvent.Ended,this))};c.addEventListener("removetrack",b)}start(){this.startMonitor(),super.enable()}stop(){this.stopMonitor(),super.disable()}getRTCStatsReport(){var c;return __awaiter$3(this,void 0,void 0,function*(){return!((c=this.receiver)===null||c===void 0)&&c.getStats?yield this.receiver.getStats():void 0})}startMonitor(){this.monitorInterval||(this.monitorInterval=setInterval(()=>this.monitorReceiver(),monitorFrequency))}}class RemoteAudioTrack extends RemoteTrack{constructor(c,b,_,$,k,et){super(c,b,Track.Kind.Audio,_,et),this.monitorReceiver=()=>__awaiter$3(this,void 0,void 0,function*(){if(!this.receiver){this._currentBitrate=0;return}const nt=yield this.getReceiverStats();nt&&this.prevStats&&this.receiver&&(this._currentBitrate=computeBitrate(nt,this.prevStats)),this.prevStats=nt}),this.audioContext=$,this.webAudioPluginNodes=[],k&&(this.sinkId=k.deviceId)}setVolume(c){var b;for(const _ of this.attachedElements)this.audioContext?(b=this.gainNode)===null||b===void 0||b.gain.setTargetAtTime(c,0,.1):_.volume=c;isReactNative()&&this._mediaStreamTrack._setVolume(c),this.elementVolume=c}getVolume(){if(this.elementVolume)return this.elementVolume;if(isReactNative())return 1;let c=0;return this.attachedElements.forEach(b=>{b.volume>c&&(c=b.volume)}),c}setSinkId(c){return __awaiter$3(this,void 0,void 0,function*(){this.sinkId=c,yield Promise.all(this.attachedElements.map(b=>{if(supportsSetSinkId(b))return b.setSinkId(c)}))})}attach(c){const b=this.attachedElements.length===0;return c?super.attach(c):c=super.attach(),this.sinkId&&supportsSetSinkId(c)&&c.setSinkId(this.sinkId),this.audioContext&&b&&(this.log.debug("using audio context mapping",this.logContext),this.connectWebAudio(this.audioContext,c),c.volume=0,c.muted=!0),this.elementVolume&&this.setVolume(this.elementVolume),c}detach(c){let b;return c?(b=super.detach(c),this.audioContext&&(this.attachedElements.length>0?this.connectWebAudio(this.audioContext,this.attachedElements[0]):this.disconnectWebAudio())):(b=super.detach(),this.disconnectWebAudio()),b}setAudioContext(c){this.audioContext=c,c&&this.attachedElements.length>0?this.connectWebAudio(c,this.attachedElements[0]):c||this.disconnectWebAudio()}setWebAudioPlugins(c){this.webAudioPluginNodes=c,this.attachedElements.length>0&&this.audioContext&&this.connectWebAudio(this.audioContext,this.attachedElements[0])}connectWebAudio(c,b){this.disconnectWebAudio(),this.sourceNode=c.createMediaStreamSource(b.srcObject);let _=this.sourceNode;this.webAudioPluginNodes.forEach($=>{_.connect($),_=$}),this.gainNode=c.createGain(),_.connect(this.gainNode),this.gainNode.connect(c.destination),this.elementVolume&&this.gainNode.gain.setTargetAtTime(this.elementVolume,0,.1),c.state!=="running"&&c.resume().then(()=>{c.state!=="running"&&this.emit(TrackEvent.AudioPlaybackFailed,new Error("Audio Context couldn't be started automatically"))}).catch($=>{this.emit(TrackEvent.AudioPlaybackFailed,$)})}disconnectWebAudio(){var c,b;(c=this.gainNode)===null||c===void 0||c.disconnect(),(b=this.sourceNode)===null||b===void 0||b.disconnect(),this.gainNode=void 0,this.sourceNode=void 0}getReceiverStats(){return __awaiter$3(this,void 0,void 0,function*(){if(!this.receiver||!this.receiver.getStats)return;const c=yield this.receiver.getStats();let b;return c.forEach(_=>{_.type==="inbound-rtp"&&(b={type:"audio",timestamp:_.timestamp,jitter:_.jitter,bytesReceived:_.bytesReceived,concealedSamples:_.concealedSamples,concealmentEvents:_.concealmentEvents,silentConcealedSamples:_.silentConcealedSamples,silentConcealmentEvents:_.silentConcealmentEvents,totalAudioEnergy:_.totalAudioEnergy,totalSamplesDuration:_.totalSamplesDuration})}),b})}}const REACTION_DELAY=100;class RemoteVideoTrack extends RemoteTrack{constructor(c,b,_,$,k){super(c,b,Track.Kind.Video,_,k),this.elementInfos=[],this.monitorReceiver=()=>__awaiter$3(this,void 0,void 0,function*(){if(!this.receiver){this._currentBitrate=0;return}const et=yield this.getReceiverStats();et&&this.prevStats&&this.receiver&&(this._currentBitrate=computeBitrate(et,this.prevStats)),this.prevStats=et}),this.debouncedHandleResize=r$2(()=>{this.updateDimensions()},REACTION_DELAY),this.adaptiveStreamSettings=$}get isAdaptiveStream(){return this.adaptiveStreamSettings!==void 0}get mediaStreamTrack(){return this._mediaStreamTrack}setMuted(c){super.setMuted(c),this.attachedElements.forEach(b=>{c?detachTrack(this._mediaStreamTrack,b):attachToElement(this._mediaStreamTrack,b)})}attach(c){if(c?super.attach(c):c=super.attach(),this.adaptiveStreamSettings&&this.elementInfos.find(b=>b.element===c)===void 0){const b=new HTMLElementInfo(c);this.observeElementInfo(b)}return c}observeElementInfo(c){this.adaptiveStreamSettings&&this.elementInfos.find(b=>b===c)===void 0?(c.handleResize=()=>{this.debouncedHandleResize()},c.handleVisibilityChanged=()=>{this.updateVisibility()},this.elementInfos.push(c),c.observe(),this.debouncedHandleResize(),this.updateVisibility()):this.log.warn("visibility resize observer not triggered",this.logContext)}stopObservingElementInfo(c){if(!this.isAdaptiveStream){this.log.warn("stopObservingElementInfo ignored",this.logContext);return}const b=this.elementInfos.filter(_=>_===c);for(const _ of b)_.stopObserving();this.elementInfos=this.elementInfos.filter(_=>_!==c),this.updateVisibility(),this.debouncedHandleResize()}detach(c){let b=[];if(c)return this.stopObservingElement(c),super.detach(c);b=super.detach();for(const _ of b)this.stopObservingElement(_);return b}getDecoderImplementation(){var c;return(c=this.prevStats)===null||c===void 0?void 0:c.decoderImplementation}getReceiverStats(){return __awaiter$3(this,void 0,void 0,function*(){if(!this.receiver||!this.receiver.getStats)return;const c=yield this.receiver.getStats();let b,_="",$=new Map;return c.forEach(k=>{k.type==="inbound-rtp"?(_=k.codecId,b={type:"video",framesDecoded:k.framesDecoded,framesDropped:k.framesDropped,framesReceived:k.framesReceived,packetsReceived:k.packetsReceived,packetsLost:k.packetsLost,frameWidth:k.frameWidth,frameHeight:k.frameHeight,pliCount:k.pliCount,firCount:k.firCount,nackCount:k.nackCount,jitter:k.jitter,timestamp:k.timestamp,bytesReceived:k.bytesReceived,decoderImplementation:k.decoderImplementation}):k.type==="codec"&&$.set(k.id,k)}),b&&_!==""&&$.get(_)&&(b.mimeType=$.get(_).mimeType),b})}stopObservingElement(c){const b=this.elementInfos.filter(_=>_.element===c);for(const _ of b)this.stopObservingElementInfo(_)}handleAppVisibilityChanged(){const c=Object.create(null,{handleAppVisibilityChanged:{get:()=>super.handleAppVisibilityChanged}});return __awaiter$3(this,void 0,void 0,function*(){yield c.handleAppVisibilityChanged.call(this),this.isAdaptiveStream&&this.updateVisibility()})}updateVisibility(){var c,b;const _=this.elementInfos.reduce((nt,ot)=>Math.max(nt,ot.visibilityChangedAt||0),0),$=!((b=(c=this.adaptiveStreamSettings)===null||c===void 0?void 0:c.pauseVideoInBackground)!==null&&b!==void 0)||b?this.isInBackground:!1,k=this.elementInfos.some(nt=>nt.pictureInPicture),et=this.elementInfos.some(nt=>nt.visible)&&!$||k;if(this.lastVisible!==et){if(!et&&Date.now()-_<REACTION_DELAY){CriticalTimers.setTimeout(()=>{this.updateVisibility()},REACTION_DELAY);return}this.lastVisible=et,this.emit(TrackEvent.VisibilityChanged,et,this)}}updateDimensions(){var c,b;let _=0,$=0;const k=this.getPixelDensity();for(const et of this.elementInfos){const nt=et.width()*k,ot=et.height()*k;nt+ot>_+$&&(_=nt,$=ot)}((c=this.lastDimensions)===null||c===void 0?void 0:c.width)===_&&((b=this.lastDimensions)===null||b===void 0?void 0:b.height)===$||(this.lastDimensions={width:_,height:$},this.emit(TrackEvent.VideoDimensionsChanged,this.lastDimensions,this))}getPixelDensity(){var c;const b=(c=this.adaptiveStreamSettings)===null||c===void 0?void 0:c.pixelDensity;return b==="screen"?getDevicePixelRatio():b||(getDevicePixelRatio()>2?2:1)}}class HTMLElementInfo{get visible(){return this.isPiP||this.isIntersecting}get pictureInPicture(){return this.isPiP}constructor(c,b){this.onVisibilityChanged=_=>{var $;const{target:k,isIntersecting:et}=_;k===this.element&&(this.isIntersecting=et,this.visibilityChangedAt=Date.now(),($=this.handleVisibilityChanged)===null||$===void 0||$.call(this))},this.onEnterPiP=()=>{var _;this.isPiP=!0,(_=this.handleVisibilityChanged)===null||_===void 0||_.call(this)},this.onLeavePiP=()=>{var _;this.isPiP=!1,(_=this.handleVisibilityChanged)===null||_===void 0||_.call(this)},this.element=c,this.isIntersecting=b??isElementInViewport(c),this.isPiP=isWeb()&&document.pictureInPictureElement===c,this.visibilityChangedAt=0}width(){return this.element.clientWidth}height(){return this.element.clientHeight}observe(){this.isIntersecting=isElementInViewport(this.element),this.isPiP=document.pictureInPictureElement===this.element,this.element.handleResize=()=>{var c;(c=this.handleResize)===null||c===void 0||c.call(this)},this.element.handleVisibilityChanged=this.onVisibilityChanged,getIntersectionObserver().observe(this.element),getResizeObserver().observe(this.element),this.element.addEventListener("enterpictureinpicture",this.onEnterPiP),this.element.addEventListener("leavepictureinpicture",this.onLeavePiP)}stopObserving(){var c,b;(c=getIntersectionObserver())===null||c===void 0||c.unobserve(this.element),(b=getResizeObserver())===null||b===void 0||b.unobserve(this.element),this.element.removeEventListener("enterpictureinpicture",this.onEnterPiP),this.element.removeEventListener("leavepictureinpicture",this.onLeavePiP)}}function isElementInViewport(a){let c=a.offsetTop,b=a.offsetLeft;const _=a.offsetWidth,$=a.offsetHeight,{hidden:k}=a,{opacity:et,display:nt}=getComputedStyle(a);for(;a.offsetParent;)a=a.offsetParent,c+=a.offsetTop,b+=a.offsetLeft;return c<window.pageYOffset+window.innerHeight&&b<window.pageXOffset+window.innerWidth&&c+$>window.pageYOffset&&b+_>window.pageXOffset&&!k&&(et!==""?parseFloat(et)>0:!0)&&nt!=="none"}class TrackPublication extends eventsExports$1.EventEmitter{constructor(c,b,_,$){var k;super(),this.metadataMuted=!1,this.encryption=Encryption_Type.NONE,this.log=livekitLogger,this.handleMuted=()=>{this.emit(TrackEvent.Muted)},this.handleUnmuted=()=>{this.emit(TrackEvent.Unmuted)},this.log=getLogger((k=$==null?void 0:$.loggerName)!==null&&k!==void 0?k:LoggerNames.Publication),this.loggerContextCb=this.loggerContextCb,this.setMaxListeners(100),this.kind=c,this.trackSid=b,this.trackName=_,this.source=Track.Source.Unknown}setTrack(c){this.track&&(this.track.off(TrackEvent.Muted,this.handleMuted),this.track.off(TrackEvent.Unmuted,this.handleUnmuted)),this.track=c,c&&(c.on(TrackEvent.Muted,this.handleMuted),c.on(TrackEvent.Unmuted,this.handleUnmuted))}get logContext(){var c;return Object.assign(Object.assign({},(c=this.loggerContextCb)===null||c===void 0?void 0:c.call(this)),getLogContextFromTrack(this))}get isMuted(){return this.metadataMuted}get isEnabled(){return!0}get isSubscribed(){return this.track!==void 0}get isEncrypted(){return this.encryption!==Encryption_Type.NONE}get audioTrack(){if(this.track instanceof LocalAudioTrack||this.track instanceof RemoteAudioTrack)return this.track}get videoTrack(){if(this.track instanceof LocalVideoTrack||this.track instanceof RemoteVideoTrack)return this.track}updateInfo(c){this.trackSid=c.sid,this.trackName=c.name,this.source=Track.sourceFromProto(c.source),this.mimeType=c.mimeType,this.kind===Track.Kind.Video&&c.width>0&&(this.dimensions={width:c.width,height:c.height},this.simulcasted=c.simulcast),this.encryption=c.encryption,this.trackInfo=c,this.log.debug("update publication info",Object.assign(Object.assign({},this.logContext),{info:c}))}}(function(a){(function(c){c.Desired="desired",c.Subscribed="subscribed",c.Unsubscribed="unsubscribed"})(a.SubscriptionStatus||(a.SubscriptionStatus={})),function(c){c.Allowed="allowed",c.NotAllowed="not_allowed"}(a.PermissionStatus||(a.PermissionStatus={}))})(TrackPublication||(TrackPublication={}));class LocalTrackPublication extends TrackPublication{get isUpstreamPaused(){var c;return(c=this.track)===null||c===void 0?void 0:c.isUpstreamPaused}constructor(c,b,_,$){super(c,b.sid,b.name,$),this.track=void 0,this.handleTrackEnded=()=>{this.emit(TrackEvent.Ended)},this.updateInfo(b),this.setTrack(_)}setTrack(c){this.track&&this.track.off(TrackEvent.Ended,this.handleTrackEnded),super.setTrack(c),c&&c.on(TrackEvent.Ended,this.handleTrackEnded)}get isMuted(){return this.track?this.track.isMuted:super.isMuted}get audioTrack(){return super.audioTrack}get videoTrack(){return super.videoTrack}mute(){var c;return __awaiter$3(this,void 0,void 0,function*(){return(c=this.track)===null||c===void 0?void 0:c.mute()})}unmute(){var c;return __awaiter$3(this,void 0,void 0,function*(){return(c=this.track)===null||c===void 0?void 0:c.unmute()})}pauseUpstream(){var c;return __awaiter$3(this,void 0,void 0,function*(){yield(c=this.track)===null||c===void 0?void 0:c.pauseUpstream()})}resumeUpstream(){var c;return __awaiter$3(this,void 0,void 0,function*(){yield(c=this.track)===null||c===void 0?void 0:c.resumeUpstream()})}}var ConnectionQuality;(function(a){a.Excellent="excellent",a.Good="good",a.Poor="poor",a.Lost="lost",a.Unknown="unknown"})(ConnectionQuality||(ConnectionQuality={}));function qualityFromProto(a){switch(a){case ConnectionQuality$1.EXCELLENT:return ConnectionQuality.Excellent;case ConnectionQuality$1.GOOD:return ConnectionQuality.Good;case ConnectionQuality$1.POOR:return ConnectionQuality.Poor;case ConnectionQuality$1.LOST:return ConnectionQuality.Lost;default:return ConnectionQuality.Unknown}}class Participant extends eventsExports$1.EventEmitter{get logContext(){var c,b;return Object.assign({},(b=(c=this.loggerOptions)===null||c===void 0?void 0:c.loggerContextCb)===null||b===void 0?void 0:b.call(c))}get isEncrypted(){return this.trackPublications.size>0&&Array.from(this.trackPublications.values()).every(c=>c.isEncrypted)}get isAgent(){var c,b;return(b=(c=this.permissions)===null||c===void 0?void 0:c.agent)!==null&&b!==void 0?b:!1}constructor(c,b,_,$,k){var et;super(),this.audioLevel=0,this.isSpeaking=!1,this._connectionQuality=ConnectionQuality.Unknown,this.log=livekitLogger,this.log=getLogger((et=k==null?void 0:k.loggerName)!==null&&et!==void 0?et:LoggerNames.Participant),this.loggerOptions=k,this.setMaxListeners(100),this.sid=c,this.identity=b,this.name=_,this.metadata=$,this.audioTrackPublications=new Map,this.videoTrackPublications=new Map,this.trackPublications=new Map}getTrackPublications(){return Array.from(this.trackPublications.values())}getTrackPublication(c){for(const[,b]of this.trackPublications)if(b.source===c)return b}getTrackPublicationByName(c){for(const[,b]of this.trackPublications)if(b.trackName===c)return b}get connectionQuality(){return this._connectionQuality}get isCameraEnabled(){var c;const b=this.getTrackPublication(Track.Source.Camera);return!(!((c=b==null?void 0:b.isMuted)!==null&&c!==void 0)||c)}get isMicrophoneEnabled(){var c;const b=this.getTrackPublication(Track.Source.Microphone);return!(!((c=b==null?void 0:b.isMuted)!==null&&c!==void 0)||c)}get isScreenShareEnabled(){return!!this.getTrackPublication(Track.Source.ScreenShare)}get isLocal(){return!1}get joinedAt(){return this.participantInfo?new Date(Number.parseInt(this.participantInfo.joinedAt.toString())*1e3):new Date}updateInfo(c){return this.participantInfo&&this.participantInfo.sid===c.sid&&this.participantInfo.version>c.version?!1:(this.identity=c.identity,this.sid=c.sid,this._setName(c.name),this._setMetadata(c.metadata),c.permission&&this.setPermissions(c.permission),this.participantInfo=c,this.log.trace("update participant info",Object.assign(Object.assign({},this.logContext),{info:c})),!0)}_setMetadata(c){const b=this.metadata!==c,_=this.metadata;this.metadata=c,b&&this.emit(ParticipantEvent.ParticipantMetadataChanged,_)}_setName(c){const b=this.name!==c;this.name=c,b&&this.emit(ParticipantEvent.ParticipantNameChanged,c)}setPermissions(c){var b,_,$,k,et;const nt=this.permissions,ot=c.canPublish!==((b=this.permissions)===null||b===void 0?void 0:b.canPublish)||c.canSubscribe!==((_=this.permissions)===null||_===void 0?void 0:_.canSubscribe)||c.canPublishData!==(($=this.permissions)===null||$===void 0?void 0:$.canPublishData)||c.hidden!==((k=this.permissions)===null||k===void 0?void 0:k.hidden)||c.recorder!==((et=this.permissions)===null||et===void 0?void 0:et.recorder)||c.canPublishSources.length!==this.permissions.canPublishSources.length||c.canPublishSources.some((ht,vt)=>{var _t;return ht!==((_t=this.permissions)===null||_t===void 0?void 0:_t.canPublishSources[vt])});return this.permissions=c,ot&&this.emit(ParticipantEvent.ParticipantPermissionsChanged,nt),ot}setIsSpeaking(c){c!==this.isSpeaking&&(this.isSpeaking=c,c&&(this.lastSpokeAt=new Date),this.emit(ParticipantEvent.IsSpeakingChanged,c))}setConnectionQuality(c){const b=this._connectionQuality;this._connectionQuality=qualityFromProto(c),b!==this._connectionQuality&&this.emit(ParticipantEvent.ConnectionQualityChanged,this._connectionQuality)}setAudioContext(c){this.audioContext=c,this.audioTrackPublications.forEach(b=>(b.track instanceof RemoteAudioTrack||b.track instanceof LocalAudioTrack)&&b.track.setAudioContext(c))}addTrackPublication(c){c.on(TrackEvent.Muted,()=>{this.emit(ParticipantEvent.TrackMuted,c)}),c.on(TrackEvent.Unmuted,()=>{this.emit(ParticipantEvent.TrackUnmuted,c)});const b=c;switch(b.track&&(b.track.sid=c.trackSid),this.trackPublications.set(c.trackSid,c),c.kind){case Track.Kind.Audio:this.audioTrackPublications.set(c.trackSid,c);break;case Track.Kind.Video:this.videoTrackPublications.set(c.trackSid,c);break}}}function trackPermissionToProto(a){var c,b,_;if(!a.participantSid&&!a.participantIdentity)throw new Error("Invalid track permission, must provide at least one of participantIdentity and participantSid");return new TrackPermission({participantIdentity:(c=a.participantIdentity)!==null&&c!==void 0?c:"",participantSid:(b=a.participantSid)!==null&&b!==void 0?b:"",allTracks:(_=a.allowAll)!==null&&_!==void 0?_:!1,trackSids:a.allowedTrackSids||[]})}class LocalParticipant extends Participant{constructor(c,b,_,$){super(c,b,void 0,void 0,{loggerName:$.loggerName,loggerContextCb:()=>this.engine.logContext}),this.pendingPublishing=new Set,this.pendingPublishPromises=new Map,this.participantTrackPermissions=[],this.allParticipantsAllowedToSubscribe=!0,this.encryptionType=Encryption_Type.NONE,this.handleReconnecting=()=>{this.reconnectFuture||(this.reconnectFuture=new Future)},this.handleReconnected=()=>{var k,et;(et=(k=this.reconnectFuture)===null||k===void 0?void 0:k.resolve)===null||et===void 0||et.call(k),this.reconnectFuture=void 0,this.updateTrackSubscriptionPermissions()},this.handleDisconnected=()=>{var k,et;this.reconnectFuture&&(this.reconnectFuture.promise.catch(nt=>this.log.warn(nt.message,this.logContext)),(et=(k=this.reconnectFuture)===null||k===void 0?void 0:k.reject)===null||et===void 0||et.call(k,"Got disconnected during reconnection attempt"),this.reconnectFuture=void 0)},this.updateTrackSubscriptionPermissions=()=>{this.log.debug("updating track subscription permissions",Object.assign(Object.assign({},this.logContext),{allParticipantsAllowed:this.allParticipantsAllowedToSubscribe,participantTrackPermissions:this.participantTrackPermissions})),this.engine.client.sendUpdateSubscriptionPermissions(this.allParticipantsAllowedToSubscribe,this.participantTrackPermissions.map(k=>trackPermissionToProto(k)))},this.onTrackUnmuted=k=>{this.onTrackMuted(k,k.isUpstreamPaused)},this.onTrackMuted=(k,et)=>{if(et===void 0&&(et=!0),!k.sid){this.log.error("could not update mute status for unpublished track",Object.assign(Object.assign({},this.logContext),getLogContextFromTrack(k)));return}this.engine.updateMuteStatus(k.sid,et)},this.onTrackUpstreamPaused=k=>{this.log.debug("upstream paused",Object.assign(Object.assign({},this.logContext),getLogContextFromTrack(k))),this.onTrackMuted(k,!0)},this.onTrackUpstreamResumed=k=>{this.log.debug("upstream resumed",Object.assign(Object.assign({},this.logContext),getLogContextFromTrack(k))),this.onTrackMuted(k,k.isMuted)},this.handleSubscribedQualityUpdate=k=>__awaiter$3(this,void 0,void 0,function*(){var et,nt,ot,ht,vt,_t;if(!(!((vt=this.roomOptions)===null||vt===void 0)&&vt.dynacast))return;const kt=this.videoTrackPublications.get(k.trackSid);if(!kt){this.log.warn("received subscribed quality update for unknown track",Object.assign(Object.assign({},this.logContext),{trackSid:k.trackSid}));return}if(k.subscribedCodecs.length>0){if(!kt.videoTrack)return;const Mt=yield kt.videoTrack.setPublishingCodecs(k.subscribedCodecs);try{for(var $t=!0,Tt=__asyncValues(Mt),At;At=yield Tt.next(),et=At.done,!et;$t=!0){ht=At.value,$t=!1;const Dt=ht;isBackupCodec(Dt)&&(this.log.debug("publish ".concat(Dt," for ").concat(kt.videoTrack.sid),Object.assign(Object.assign({},this.logContext),getLogContextFromTrack(kt))),yield this.publishAdditionalCodecForTrack(kt.videoTrack,Dt,kt.options))}}catch(Dt){nt={error:Dt}}finally{try{!$t&&!et&&(ot=Tt.return)&&(yield ot.call(Tt))}finally{if(nt)throw nt.error}}}else k.subscribedQualities.length>0&&(yield(_t=kt.videoTrack)===null||_t===void 0?void 0:_t.setPublishingLayers(k.subscribedQualities))}),this.handleLocalTrackUnpublished=k=>{const et=this.trackPublications.get(k.trackSid);if(!et){this.log.warn("received unpublished event for unknown track",Object.assign(Object.assign({},this.logContext),{trackSid:k.trackSid}));return}this.unpublishTrack(et.track)},this.handleTrackEnded=k=>__awaiter$3(this,void 0,void 0,function*(){if(k.source===Track.Source.ScreenShare||k.source===Track.Source.ScreenShareAudio)this.log.debug("unpublishing local track due to TrackEnded",Object.assign(Object.assign({},this.logContext),getLogContextFromTrack(k))),this.unpublishTrack(k);else if(k.isUserProvided)yield k.mute();else if(k instanceof LocalAudioTrack||k instanceof LocalVideoTrack)try{if(isWeb())try{const et=yield navigator==null?void 0:navigator.permissions.query({name:k.source===Track.Source.Camera?"camera":"microphone"});if(et&&et.state==="denied")throw this.log.warn("user has revoked access to ".concat(k.source),Object.assign(Object.assign({},this.logContext),getLogContextFromTrack(k))),et.onchange=()=>{et.state!=="denied"&&(k.isMuted||k.restartTrack(),et.onchange=null)},new Error("GetUserMedia Permission denied")}catch{}k.isMuted||(this.log.debug("track ended, attempting to use a different device",Object.assign(Object.assign({},this.logContext),getLogContextFromTrack(k))),yield k.restartTrack())}catch{this.log.warn("could not restart track, muting instead",Object.assign(Object.assign({},this.logContext),getLogContextFromTrack(k))),yield k.mute()}}),this.audioTrackPublications=new Map,this.videoTrackPublications=new Map,this.trackPublications=new Map,this.engine=_,this.roomOptions=$,this.setupEngine(_),this.activeDeviceMap=new Map}get lastCameraError(){return this.cameraError}get lastMicrophoneError(){return this.microphoneError}get isE2EEEnabled(){return this.encryptionType!==Encryption_Type.NONE}getTrackPublication(c){const b=super.getTrackPublication(c);if(b)return b}getTrackPublicationByName(c){const b=super.getTrackPublicationByName(c);if(b)return b}setupEngine(c){this.engine=c,this.engine.on(EngineEvent.RemoteMute,(b,_)=>{const $=this.trackPublications.get(b);!$||!$.track||(_?$.mute():$.unmute())}),this.engine.on(EngineEvent.Connected,this.handleReconnected).on(EngineEvent.SignalRestarted,this.handleReconnected).on(EngineEvent.SignalResumed,this.handleReconnected).on(EngineEvent.Restarting,this.handleReconnecting).on(EngineEvent.Resuming,this.handleReconnecting).on(EngineEvent.LocalTrackUnpublished,this.handleLocalTrackUnpublished).on(EngineEvent.SubscribedQualityUpdate,this.handleSubscribedQualityUpdate).on(EngineEvent.Disconnected,this.handleDisconnected)}setMetadata(c){var b;this.engine.client.sendUpdateLocalMetadata(c,(b=this.name)!==null&&b!==void 0?b:"")}setName(c){var b;this.engine.client.sendUpdateLocalMetadata((b=this.metadata)!==null&&b!==void 0?b:"",c)}setCameraEnabled(c,b,_){return this.setTrackEnabled(Track.Source.Camera,c,b,_)}setMicrophoneEnabled(c,b,_){return this.setTrackEnabled(Track.Source.Microphone,c,b,_)}setScreenShareEnabled(c,b,_){return this.setTrackEnabled(Track.Source.ScreenShare,c,b,_)}setPermissions(c){const b=this.permissions,_=super.setPermissions(c);return _&&b&&this.emit(ParticipantEvent.ParticipantPermissionsChanged,b),_}setE2EEEnabled(c){return __awaiter$3(this,void 0,void 0,function*(){this.encryptionType=c?Encryption_Type.GCM:Encryption_Type.NONE,yield this.republishAllTracks(void 0,!1)})}setTrackEnabled(c,b,_,$){var k,et;return __awaiter$3(this,void 0,void 0,function*(){this.log.debug("setTrackEnabled",Object.assign(Object.assign({},this.logContext),{source:c,enabled:b}));let nt=this.getTrackPublication(c);if(b)if(nt)yield nt.unmute();else{let ot;if(this.pendingPublishing.has(c)){this.log.info("skipping duplicate published source",Object.assign(Object.assign({},this.logContext),{source:c}));return}this.pendingPublishing.add(c);try{switch(c){case Track.Source.Camera:ot=yield this.createTracks({video:(k=_)!==null&&k!==void 0?k:!0});break;case Track.Source.Microphone:ot=yield this.createTracks({audio:(et=_)!==null&&et!==void 0?et:!0});break;case Track.Source.ScreenShare:ot=yield this.createScreenTracks(Object.assign({},_));break;default:throw new TrackInvalidError(c)}const ht=[];for(const _t of ot)this.log.info("publishing track",Object.assign(Object.assign({},this.logContext),getLogContextFromTrack(_t))),ht.push(this.publishTrack(_t,$));[nt]=yield Promise.all(ht)}catch(ht){throw ot==null||ot.forEach(vt=>{vt.stop()}),ht instanceof Error&&!(ht instanceof TrackInvalidError)&&this.emit(ParticipantEvent.MediaDevicesError,ht),ht}finally{this.pendingPublishing.delete(c)}}else if(nt&&nt.track)if(c===Track.Source.ScreenShare){nt=yield this.unpublishTrack(nt.track);const ot=this.getTrackPublication(Track.Source.ScreenShareAudio);ot&&ot.track&&this.unpublishTrack(ot.track)}else yield nt.mute();return nt})}enableCameraAndMicrophone(){return __awaiter$3(this,void 0,void 0,function*(){if(!(this.pendingPublishing.has(Track.Source.Camera)||this.pendingPublishing.has(Track.Source.Microphone))){this.pendingPublishing.add(Track.Source.Camera),this.pendingPublishing.add(Track.Source.Microphone);try{const c=yield this.createTracks({audio:!0,video:!0});yield Promise.all(c.map(b=>this.publishTrack(b)))}finally{this.pendingPublishing.delete(Track.Source.Camera),this.pendingPublishing.delete(Track.Source.Microphone)}}})}createTracks(c){var b,_;return __awaiter$3(this,void 0,void 0,function*(){const $=mergeDefaultOptions(c,(b=this.roomOptions)===null||b===void 0?void 0:b.audioCaptureDefaults,(_=this.roomOptions)===null||_===void 0?void 0:_.videoCaptureDefaults),k=constraintsForOptions($);let et;try{et=yield navigator.mediaDevices.getUserMedia(k)}catch(nt){throw nt instanceof Error&&(k.audio&&(this.microphoneError=nt),k.video&&(this.cameraError=nt)),nt}return k.audio&&(this.microphoneError=void 0,this.emit(ParticipantEvent.AudioStreamAcquired)),k.video&&(this.cameraError=void 0),et.getTracks().map(nt=>{const ot=nt.kind==="audio";ot?c.audio:c.video;let ht;const vt=ot?k.audio:k.video;typeof vt!="boolean"&&(ht=vt);const _t=mediaTrackToLocalTrack(nt,ht,{loggerName:this.roomOptions.loggerName,loggerContextCb:()=>this.logContext});return _t.kind===Track.Kind.Video?_t.source=Track.Source.Camera:_t.kind===Track.Kind.Audio&&(_t.source=Track.Source.Microphone),_t.mediaStream=et,_t})})}createScreenTracks(c){return __awaiter$3(this,void 0,void 0,function*(){if(c===void 0&&(c={}),navigator.mediaDevices.getDisplayMedia===void 0)throw new DeviceUnsupportedError("getDisplayMedia not supported");c.resolution===void 0&&!isSafari17()&&(c.resolution=ScreenSharePresets.h1080fps30.resolution);const b=screenCaptureToDisplayMediaStreamOptions(c),_=yield navigator.mediaDevices.getDisplayMedia(b),$=_.getVideoTracks();if($.length===0)throw new TrackInvalidError("no video track found");const k=new LocalVideoTrack($[0],void 0,!1,{loggerName:this.roomOptions.loggerName,loggerContextCb:()=>this.logContext});k.source=Track.Source.ScreenShare,c.contentHint&&(k.mediaStreamTrack.contentHint=c.contentHint);const et=[k];if(_.getAudioTracks().length>0){this.emit(ParticipantEvent.AudioStreamAcquired);const nt=new LocalAudioTrack(_.getAudioTracks()[0],void 0,!1,this.audioContext,{loggerName:this.roomOptions.loggerName,loggerContextCb:()=>this.logContext});nt.source=Track.Source.ScreenShareAudio,et.push(nt)}return et})}publishTrack(c,b){var _,$,k,et;return __awaiter$3(this,void 0,void 0,function*(){c instanceof LocalAudioTrack&&c.setAudioContext(this.audioContext),yield(_=this.reconnectFuture)===null||_===void 0?void 0:_.promise,c instanceof LocalTrack&&this.pendingPublishPromises.has(c)&&(yield this.pendingPublishPromises.get(c));let nt;if(c instanceof MediaStreamTrack)nt=c.getConstraints();else{nt=c.constraints;let $t;switch(c.source){case Track.Source.Microphone:$t="audioinput";break;case Track.Source.Camera:$t="videoinput"}$t&&this.activeDeviceMap.has($t)&&(nt=Object.assign(Object.assign({},nt),{deviceId:this.activeDeviceMap.get($t)}))}if(c instanceof MediaStreamTrack)switch(c.kind){case"audio":c=new LocalAudioTrack(c,nt,!0,this.audioContext,{loggerName:this.roomOptions.loggerName,loggerContextCb:()=>this.logContext});break;case"video":c=new LocalVideoTrack(c,nt,!0,{loggerName:this.roomOptions.loggerName,loggerContextCb:()=>this.logContext});break;default:throw new TrackInvalidError("unsupported MediaStreamTrack kind ".concat(c.kind))}else c.updateLoggerOptions({loggerName:this.roomOptions.loggerName,loggerContextCb:()=>this.logContext});let ot;if(this.trackPublications.forEach($t=>{$t.track&&$t.track===c&&(ot=$t)}),ot)return this.log.warn("track has already been published, skipping",Object.assign(Object.assign({},this.logContext),getLogContextFromTrack(ot))),ot;const ht="channelCount"in c.mediaStreamTrack.getSettings()&&c.mediaStreamTrack.getSettings().channelCount===2||c.mediaStreamTrack.getConstraints().channelCount===2,vt=($=b==null?void 0:b.forceStereo)!==null&&$!==void 0?$:ht;vt&&(b||(b={}),b.dtx===void 0&&this.log.info("Opus DTX will be disabled for stereo tracks by default. Enable them explicitly to make it work.",Object.assign(Object.assign({},this.logContext),getLogContextFromTrack(c))),b.red===void 0&&this.log.info("Opus RED will be disabled for stereo tracks by default. Enable them explicitly to make it work."),(k=b.dtx)!==null&&k!==void 0||(b.dtx=!1),(et=b.red)!==null&&et!==void 0||(b.red=!1));const _t=Object.assign(Object.assign({},this.roomOptions.publishDefaults),b);isSafari()&&this.roomOptions.e2ee&&(this.log.info("End-to-end encryption is set up, simulcast publishing will be disabled on Safari",Object.assign({},this.logContext)),_t.simulcast=!1),_t.source&&(c.source=_t.source);const kt=this.publish(c,_t,vt);this.pendingPublishPromises.set(c,kt);try{return yield kt}catch($t){throw $t}finally{this.pendingPublishPromises.delete(c)}})}publish(c,b,_){var $,k,et,nt,ot,ht,vt,_t,kt,$t,Tt,At;return __awaiter$3(this,void 0,void 0,function*(){Array.from(this.trackPublications.values()).find(pr=>c instanceof LocalTrack&&pr.source===c.source)&&c.source!==Track.Source.Unknown&&this.log.info("publishing a second track with the same source: ".concat(c.source),Object.assign(Object.assign({},this.logContext),getLogContextFromTrack(c))),b.stopMicTrackOnMute&&c instanceof LocalAudioTrack&&(c.stopOnMute=!0),c.source===Track.Source.ScreenShare&&isFireFox()&&(b.simulcast=!1),b.videoCodec==="av1"&&!supportsAV1()&&(b.videoCodec=void 0),b.videoCodec==="vp9"&&!supportsVP9()&&(b.videoCodec=void 0),b.videoCodec===void 0&&(b.videoCodec=defaultVideoCodec);const Dt=b.videoCodec;c.on(TrackEvent.Muted,this.onTrackMuted),c.on(TrackEvent.Unmuted,this.onTrackUnmuted),c.on(TrackEvent.Ended,this.handleTrackEnded),c.on(TrackEvent.UpstreamPaused,this.onTrackUpstreamPaused),c.on(TrackEvent.UpstreamResumed,this.onTrackUpstreamResumed);const Rt=new AddTrackRequest({cid:c.mediaStreamTrack.id,name:b.name,type:Track.kindToProto(c.kind),muted:c.isMuted,source:Track.sourceToProto(c.source),disableDtx:!(!(($=b.dtx)!==null&&$!==void 0)||$),encryption:this.encryptionType,stereo:_,disableRed:this.isE2EEEnabled||!(!((k=b.red)!==null&&k!==void 0)||k),stream:b==null?void 0:b.stream});let xt;if(c.kind===Track.Kind.Video){let pr={width:0,height:0};try{pr=yield c.waitForDimensions()}catch{const Ot=(nt=(et=this.roomOptions.videoCaptureDefaults)===null||et===void 0?void 0:et.resolution)!==null&&nt!==void 0?nt:VideoPresets.h720.resolution;pr={width:Ot.width,height:Ot.height},this.log.error("could not determine track dimensions, using defaults",Object.assign(Object.assign(Object.assign({},this.logContext),getLogContextFromTrack(c)),{dims:pr}))}Rt.width=pr.width,Rt.height=pr.height,c instanceof LocalVideoTrack&&(isSVCCodec(Dt)&&(c.source===Track.Source.ScreenShare&&(b.scalabilityMode="L1T3","contentHint"in c.mediaStreamTrack&&(c.mediaStreamTrack.contentHint="motion",this.log.info("forcing contentHint to motion for screenshare with SVC codecs",Object.assign(Object.assign({},this.logContext),getLogContextFromTrack(c))))),b.scalabilityMode=(ot=b.scalabilityMode)!==null&&ot!==void 0?ot:"L3T3_KEY"),Rt.simulcastCodecs=[new SimulcastCodec({codec:Dt,cid:c.mediaStreamTrack.id})],b.backupCodec===!0&&(b.backupCodec={codec:defaultVideoCodec}),b.backupCodec&&Dt!==b.backupCodec.codec&&Rt.encryption===Encryption_Type.NONE&&(this.roomOptions.dynacast||(this.roomOptions.dynacast=!0),Rt.simulcastCodecs.push(new SimulcastCodec({codec:b.backupCodec.codec,cid:""})))),xt=computeVideoEncodings(c.source===Track.Source.ScreenShare,Rt.width,Rt.height,b),Rt.layers=videoLayersFromEncodings(Rt.width,Rt.height,xt,isSVCCodec(b.videoCodec))}else c.kind===Track.Kind.Audio&&(xt=[{maxBitrate:(ht=b.audioPreset)===null||ht===void 0?void 0:ht.maxBitrate,priority:(_t=(vt=b.audioPreset)===null||vt===void 0?void 0:vt.priority)!==null&&_t!==void 0?_t:"high",networkPriority:($t=(kt=b.audioPreset)===null||kt===void 0?void 0:kt.priority)!==null&&$t!==void 0?$t:"high"}]);if(!this.engine||this.engine.isClosed)throw new UnexpectedConnectionState("cannot publish track when not connected");const Jt=yield this.engine.addTrack(Rt);let ar;if(Jt.codecs.forEach(pr=>{ar===void 0&&(ar=pr.mimeType)}),ar&&c.kind===Track.Kind.Video){const pr=mimeTypeToVideoCodecString(ar);pr!==Dt&&(this.log.debug("falling back to server selected codec",Object.assign(Object.assign(Object.assign({},this.logContext),getLogContextFromTrack(c)),{codec:pr})),b.videoCodec=pr,xt=computeVideoEncodings(c.source===Track.Source.ScreenShare,Rt.width,Rt.height,b))}const nr=new LocalTrackPublication(c.kind,Jt,c,{loggerName:this.roomOptions.loggerName,loggerContextCb:()=>this.logContext});if(nr.options=b,c.sid=Jt.sid,!this.engine.pcManager)throw new UnexpectedConnectionState("pcManager is not ready");if(this.log.debug("publishing ".concat(c.kind," with encodings"),Object.assign(Object.assign({},this.logContext),{encodings:xt,trackInfo:Jt})),c.sender=yield this.engine.createSender(c,b,xt),xt)if(isFireFox()&&c.kind===Track.Kind.Audio){let pr;for(const ur of this.engine.pcManager.publisher.getTransceivers())if(ur.sender===c.sender){pr=ur;break}pr&&this.engine.pcManager.publisher.setTrackCodecBitrate({transceiver:pr,codec:"opus",maxbr:!((Tt=xt[0])===null||Tt===void 0)&&Tt.maxBitrate?xt[0].maxBitrate/1e3:0})}else c.codec&&c.codec=="av1"&&(!((At=xt[0])===null||At===void 0)&&At.maxBitrate)&&this.engine.pcManager.publisher.setTrackCodecBitrate({cid:Rt.cid,codec:c.codec,maxbr:xt[0].maxBitrate/1e3});if(c.kind===Track.Kind.Video&&c.source===Track.Source.ScreenShare)try{this.log.debug("setting degradationPreference to maintain-resolution");const pr=c.sender.getParameters();pr.degradationPreference="maintain-resolution",yield c.sender.setParameters(pr)}catch(pr){this.log.warn("failed to set degradationPreference: ".concat(pr))}return yield this.engine.negotiate(),c instanceof LocalVideoTrack?c.startMonitor(this.engine.client):c instanceof LocalAudioTrack&&c.startMonitor(),this.addTrackPublication(nr),this.emit(ParticipantEvent.LocalTrackPublished,nr),nr})}get isLocal(){return!0}publishAdditionalCodecForTrack(c,b,_){var $;return __awaiter$3(this,void 0,void 0,function*(){if(this.encryptionType!==Encryption_Type.NONE)return;let k;if(this.trackPublications.forEach(_t=>{_t.track&&_t.track===c&&(k=_t)}),!k)throw new TrackInvalidError("track is not published");if(!(c instanceof LocalVideoTrack))throw new TrackInvalidError("track is not a video track");const et=Object.assign(Object.assign({},($=this.roomOptions)===null||$===void 0?void 0:$.publishDefaults),_),nt=computeTrackBackupEncodings(c,b,et);if(!nt){this.log.info("backup codec has been disabled, ignoring request to add additional codec for track",Object.assign(Object.assign({},this.logContext),getLogContextFromTrack(c)));return}const ot=c.addSimulcastTrack(b,nt);if(!ot)return;const ht=new AddTrackRequest({cid:ot.mediaStreamTrack.id,type:Track.kindToProto(c.kind),muted:c.isMuted,source:Track.sourceToProto(c.source),sid:c.sid,simulcastCodecs:[{codec:et.videoCodec,cid:ot.mediaStreamTrack.id}]});if(ht.layers=videoLayersFromEncodings(ht.width,ht.height,nt),!this.engine||this.engine.isClosed)throw new UnexpectedConnectionState("cannot publish track when not connected");const vt=yield this.engine.addTrack(ht);yield this.engine.createSimulcastSender(c,ot,et,nt),yield this.engine.negotiate(),this.log.debug("published ".concat(b," for track ").concat(c.sid),Object.assign(Object.assign({},this.logContext),{encodings:nt,trackInfo:vt}))})}unpublishTrack(c,b){var _,$;return __awaiter$3(this,void 0,void 0,function*(){const k=this.getPublicationForTrack(c),et=k?getLogContextFromTrack(k):void 0;if(this.log.debug("unpublishing track",Object.assign(Object.assign({},this.logContext),et)),!k||!k.track){this.log.warn("track was not unpublished because no publication was found",Object.assign(Object.assign({},this.logContext),et));return}c=k.track,c.off(TrackEvent.Muted,this.onTrackMuted),c.off(TrackEvent.Unmuted,this.onTrackUnmuted),c.off(TrackEvent.Ended,this.handleTrackEnded),c.off(TrackEvent.UpstreamPaused,this.onTrackUpstreamPaused),c.off(TrackEvent.UpstreamResumed,this.onTrackUpstreamResumed),b===void 0&&(b=($=(_=this.roomOptions)===null||_===void 0?void 0:_.stopLocalTrackOnUnpublish)!==null&&$!==void 0?$:!0),b&&c.stop();let nt=!1;const ot=c.sender;if(c.sender=void 0,this.engine.pcManager&&this.engine.pcManager.currentState<PCTransportState.FAILED&&ot)try{for(const ht of this.engine.pcManager.publisher.getTransceivers())ht.sender===ot&&(ht.direction="inactive",nt=!0);if(this.engine.removeTrack(ot)&&(nt=!0),c instanceof LocalVideoTrack){for(const[,ht]of c.simulcastCodecs)ht.sender&&(this.engine.removeTrack(ht.sender)&&(nt=!0),ht.sender=void 0);c.simulcastCodecs.clear()}}catch(ht){this.log.warn("failed to unpublish track",Object.assign(Object.assign(Object.assign({},this.logContext),et),{error:ht}))}switch(this.trackPublications.delete(k.trackSid),k.kind){case Track.Kind.Audio:this.audioTrackPublications.delete(k.trackSid);break;case Track.Kind.Video:this.videoTrackPublications.delete(k.trackSid);break}return this.emit(ParticipantEvent.LocalTrackUnpublished,k),k.setTrack(void 0),nt&&(yield this.engine.negotiate()),k})}unpublishTracks(c){return __awaiter$3(this,void 0,void 0,function*(){return(yield Promise.all(c.map(_=>this.unpublishTrack(_)))).filter(_=>_ instanceof LocalTrackPublication)})}republishAllTracks(c){let b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return __awaiter$3(this,void 0,void 0,function*(){const _=[];this.trackPublications.forEach($=>{$.track&&(c&&($.options=Object.assign(Object.assign({},$.options),c)),_.push($))}),yield Promise.all(_.map($=>__awaiter$3(this,void 0,void 0,function*(){const k=$.track;yield this.unpublishTrack(k,!1),b&&!k.isMuted&&k.source!==Track.Source.ScreenShare&&k.source!==Track.Source.ScreenShareAudio&&(k instanceof LocalAudioTrack||k instanceof LocalVideoTrack)&&!k.isUserProvided&&(this.log.debug("restarting existing track",Object.assign(Object.assign({},this.logContext),{track:$.trackSid})),yield k.restartTrack()),yield this.publishTrack(k,$.options)})))})}publishData(c){let b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return __awaiter$3(this,void 0,void 0,function*(){const _=b.reliable?DataPacket_Kind.RELIABLE:DataPacket_Kind.LOSSY,$=b.destinationIdentities,k=b.topic,et=new DataPacket({kind:_,value:{case:"user",value:new UserPacket({participantIdentity:this.identity,payload:c,destinationIdentities:$,topic:k})}});yield this.engine.sendDataPacket(et,_)})}setTrackSubscriptionPermissions(c){let b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];this.participantTrackPermissions=b,this.allParticipantsAllowedToSubscribe=c,this.engine.client.isDisconnected||this.updateTrackSubscriptionPermissions()}updateInfo(c){return c.sid!==this.sid||!super.updateInfo(c)?!1:(c.tracks.forEach(b=>{var _,$;const k=this.trackPublications.get(b.sid);if(k){const et=k.isMuted||(($=(_=k.track)===null||_===void 0?void 0:_.isUpstreamPaused)!==null&&$!==void 0?$:!1);et!==b.muted&&(this.log.debug("updating server mute state after reconcile",Object.assign(Object.assign(Object.assign({},this.logContext),getLogContextFromTrack(k)),{mutedOnServer:et})),this.engine.client.sendMuteTrack(b.sid,et))}}),!0)}getPublicationForTrack(c){let b;return this.trackPublications.forEach(_=>{const $=_.track;$&&(c instanceof MediaStreamTrack?($ instanceof LocalAudioTrack||$ instanceof LocalVideoTrack)&&$.mediaStreamTrack===c&&(b=_):c===$&&(b=_))}),b}}class RemoteTrackPublication extends TrackPublication{constructor(c,b,_,$){super(c,b.sid,b.name,$),this.track=void 0,this.allowed=!0,this.disabled=!1,this.currentVideoQuality=VideoQuality.HIGH,this.handleEnded=k=>{this.setTrack(void 0),this.emit(TrackEvent.Ended,k)},this.handleVisibilityChange=k=>{this.log.debug("adaptivestream video visibility ".concat(this.trackSid,", visible=").concat(k),this.logContext),this.disabled=!k,this.emitTrackUpdate()},this.handleVideoDimensionsChange=k=>{this.log.debug("adaptivestream video dimensions ".concat(k.width,"x").concat(k.height),this.logContext),this.videoDimensions=k,this.emitTrackUpdate()},this.subscribed=_,this.updateInfo(b)}setSubscribed(c){const b=this.subscriptionStatus,_=this.permissionStatus;this.subscribed=c,c&&(this.allowed=!0);const $=new UpdateSubscription({trackSids:[this.trackSid],subscribe:this.subscribed,participantTracks:[new ParticipantTracks({participantSid:"",trackSids:[this.trackSid]})]});this.emit(TrackEvent.UpdateSubscription,$),this.emitSubscriptionUpdateIfChanged(b),this.emitPermissionUpdateIfChanged(_)}get subscriptionStatus(){return this.subscribed===!1?TrackPublication.SubscriptionStatus.Unsubscribed:super.isSubscribed?TrackPublication.SubscriptionStatus.Subscribed:TrackPublication.SubscriptionStatus.Desired}get permissionStatus(){return this.allowed?TrackPublication.PermissionStatus.Allowed:TrackPublication.PermissionStatus.NotAllowed}get isSubscribed(){return this.subscribed===!1?!1:super.isSubscribed}get isDesired(){return this.subscribed!==!1}get isEnabled(){return!this.disabled}setEnabled(c){!this.isManualOperationAllowed()||this.disabled===!c||(this.disabled=!c,this.emitTrackUpdate())}setVideoQuality(c){!this.isManualOperationAllowed()||this.currentVideoQuality===c||(this.currentVideoQuality=c,this.videoDimensions=void 0,this.emitTrackUpdate())}setVideoDimensions(c){var b,_;this.isManualOperationAllowed()&&(((b=this.videoDimensions)===null||b===void 0?void 0:b.width)===c.width&&((_=this.videoDimensions)===null||_===void 0?void 0:_.height)===c.height||(this.track instanceof RemoteVideoTrack&&(this.videoDimensions=c),this.currentVideoQuality=void 0,this.emitTrackUpdate()))}setVideoFPS(c){this.isManualOperationAllowed()&&this.track instanceof RemoteVideoTrack&&this.fps!==c&&(this.fps=c,this.emitTrackUpdate())}get videoQuality(){return this.currentVideoQuality}setTrack(c){const b=this.subscriptionStatus,_=this.permissionStatus,$=this.track;$!==c&&($&&($.off(TrackEvent.VideoDimensionsChanged,this.handleVideoDimensionsChange),$.off(TrackEvent.VisibilityChanged,this.handleVisibilityChange),$.off(TrackEvent.Ended,this.handleEnded),$.detach(),$.stopMonitor(),this.emit(TrackEvent.Unsubscribed,$)),super.setTrack(c),c&&(c.sid=this.trackSid,c.on(TrackEvent.VideoDimensionsChanged,this.handleVideoDimensionsChange),c.on(TrackEvent.VisibilityChanged,this.handleVisibilityChange),c.on(TrackEvent.Ended,this.handleEnded),this.emit(TrackEvent.Subscribed,c)),this.emitPermissionUpdateIfChanged(_),this.emitSubscriptionUpdateIfChanged(b))}setAllowed(c){const b=this.subscriptionStatus,_=this.permissionStatus;this.allowed=c,this.emitPermissionUpdateIfChanged(_),this.emitSubscriptionUpdateIfChanged(b)}setSubscriptionError(c){this.emit(TrackEvent.SubscriptionFailed,c)}updateInfo(c){super.updateInfo(c);const b=this.metadataMuted;this.metadataMuted=c.muted,this.track?this.track.setMuted(c.muted):b!==c.muted&&this.emit(c.muted?TrackEvent.Muted:TrackEvent.Unmuted)}emitSubscriptionUpdateIfChanged(c){const b=this.subscriptionStatus;c!==b&&this.emit(TrackEvent.SubscriptionStatusChanged,b,c)}emitPermissionUpdateIfChanged(c){this.permissionStatus!==c&&this.emit(TrackEvent.SubscriptionPermissionChanged,this.permissionStatus,c)}isManualOperationAllowed(){return this.kind===Track.Kind.Video&&this.isAdaptiveStream?(this.log.warn("adaptive stream is enabled, cannot change video track settings",this.logContext),!1):this.isDesired?!0:(this.log.warn("cannot update track settings when not subscribed",this.logContext),!1)}get isAdaptiveStream(){return this.track instanceof RemoteVideoTrack&&this.track.isAdaptiveStream}emitTrackUpdate(){const c=new UpdateTrackSettings({trackSids:[this.trackSid],disabled:this.disabled,fps:this.fps});this.videoDimensions?(c.width=Math.ceil(this.videoDimensions.width),c.height=Math.ceil(this.videoDimensions.height)):this.currentVideoQuality!==void 0?c.quality=this.currentVideoQuality:c.quality=VideoQuality.HIGH,this.emit(TrackEvent.UpdateSettings,c)}}class RemoteParticipant extends Participant{static fromParticipantInfo(c,b){return new RemoteParticipant(c,b.sid,b.identity,b.name,b.metadata)}get logContext(){return Object.assign(Object.assign({},super.logContext),{rpID:this.sid,remoteParticipant:this.identity})}constructor(c,b,_,$,k,et){super(b,_||"",$,k,et),this.signalClient=c,this.trackPublications=new Map,this.audioTrackPublications=new Map,this.videoTrackPublications=new Map,this.volumeMap=new Map}addTrackPublication(c){super.addTrackPublication(c),c.on(TrackEvent.UpdateSettings,b=>{this.log.debug("send update settings",Object.assign(Object.assign({},this.logContext),getLogContextFromTrack(c))),this.signalClient.sendUpdateTrackSettings(b)}),c.on(TrackEvent.UpdateSubscription,b=>{b.participantTracks.forEach(_=>{_.participantSid=this.sid}),this.signalClient.sendUpdateSubscription(b)}),c.on(TrackEvent.SubscriptionPermissionChanged,b=>{this.emit(ParticipantEvent.TrackSubscriptionPermissionChanged,c,b)}),c.on(TrackEvent.SubscriptionStatusChanged,b=>{this.emit(ParticipantEvent.TrackSubscriptionStatusChanged,c,b)}),c.on(TrackEvent.Subscribed,b=>{this.emit(ParticipantEvent.TrackSubscribed,b,c)}),c.on(TrackEvent.Unsubscribed,b=>{this.emit(ParticipantEvent.TrackUnsubscribed,b,c)}),c.on(TrackEvent.SubscriptionFailed,b=>{this.emit(ParticipantEvent.TrackSubscriptionFailed,c.trackSid,b)})}getTrackPublication(c){const b=super.getTrackPublication(c);if(b)return b}getTrackPublicationByName(c){const b=super.getTrackPublicationByName(c);if(b)return b}setVolume(c){let b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Track.Source.Microphone;this.volumeMap.set(b,c);const _=this.getTrackPublication(b);_&&_.track&&_.track.setVolume(c)}getVolume(){let c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Track.Source.Microphone;const b=this.getTrackPublication(c);return b&&b.track?b.track.getVolume():this.volumeMap.get(c)}addSubscribedMediaTrack(c,b,_,$,k,et){let nt=this.getTrackPublicationBySid(b);if(nt||b.startsWith("TR")||this.trackPublications.forEach(vt=>{!nt&&c.kind===vt.kind.toString()&&(nt=vt)}),!nt){if(et===0){this.log.error("could not find published track",Object.assign(Object.assign({},this.logContext),{trackSid:b})),this.emit(ParticipantEvent.TrackSubscriptionFailed,b);return}et===void 0&&(et=20),setTimeout(()=>{this.addSubscribedMediaTrack(c,b,_,$,k,et-1)},150);return}if(c.readyState==="ended"){this.log.error("unable to subscribe because MediaStreamTrack is ended. Do not call MediaStreamTrack.stop()",Object.assign(Object.assign({},this.logContext),getLogContextFromTrack(nt))),this.emit(ParticipantEvent.TrackSubscriptionFailed,b);return}const ot=c.kind==="video";let ht;return ot?ht=new RemoteVideoTrack(c,b,$,k):ht=new RemoteAudioTrack(c,b,$,this.audioContext,this.audioOutput),ht.source=nt.source,ht.isMuted=nt.isMuted,ht.setMediaStream(_),ht.start(),nt.setTrack(ht),this.volumeMap.has(nt.source)&&ht instanceof RemoteAudioTrack&&ht.setVolume(this.volumeMap.get(nt.source)),nt}get hasMetadata(){return!!this.participantInfo}getTrackPublicationBySid(c){return this.trackPublications.get(c)}updateInfo(c){if(!super.updateInfo(c))return!1;const b=new Map,_=new Map;return c.tracks.forEach($=>{var k,et;let nt=this.getTrackPublicationBySid($.sid);if(nt)nt.updateInfo($);else{const ot=Track.kindFromProto($.type);if(!ot)return;nt=new RemoteTrackPublication(ot,$,(k=this.signalClient.connectOptions)===null||k===void 0?void 0:k.autoSubscribe,{loggerContextCb:()=>this.logContext,loggerName:(et=this.loggerOptions)===null||et===void 0?void 0:et.loggerName}),nt.updateInfo($),_.set($.sid,nt);const ht=Array.from(this.trackPublications.values()).find(vt=>vt.source===(nt==null?void 0:nt.source));ht&&nt.source!==Track.Source.Unknown&&this.log.debug("received a second track publication for ".concat(this.identity," with the same source: ").concat(nt.source),Object.assign(Object.assign({},this.logContext),{oldTrack:getLogContextFromTrack(ht),newTrack:getLogContextFromTrack(nt)})),this.addTrackPublication(nt)}b.set($.sid,nt)}),this.trackPublications.forEach($=>{b.has($.trackSid)||(this.log.trace("detected removed track on remote participant, unpublishing",Object.assign(Object.assign({},this.logContext),getLogContextFromTrack($))),this.unpublishTrack($.trackSid,!0))}),_.forEach($=>{this.emit(ParticipantEvent.TrackPublished,$)}),!0}unpublishTrack(c,b){const _=this.trackPublications.get(c);if(!_)return;const{track:$}=_;switch($&&($.stop(),_.setTrack(void 0)),this.trackPublications.delete(c),_.kind){case Track.Kind.Audio:this.audioTrackPublications.delete(c);break;case Track.Kind.Video:this.videoTrackPublications.delete(c);break}b&&this.emit(ParticipantEvent.TrackUnpublished,_)}setAudioOutput(c){return __awaiter$3(this,void 0,void 0,function*(){this.audioOutput=c;const b=[];this.audioTrackPublications.forEach(_=>{var $;_.track instanceof RemoteAudioTrack&&b.push(_.track.setSinkId(($=c.deviceId)!==null&&$!==void 0?$:"default"))}),yield Promise.all(b)})}emit(c){for(var b=arguments.length,_=new Array(b>1?b-1:0),$=1;$<b;$++)_[$-1]=arguments[$];return this.log.trace("participant event",Object.assign(Object.assign({},this.logContext),{event:c,args:_})),super.emit(c,..._)}}var ConnectionState;(function(a){a.Disconnected="disconnected",a.Connecting="connecting",a.Connected="connected",a.Reconnecting="reconnecting"})(ConnectionState||(ConnectionState={}));const connectionReconcileFrequency=2*1e3;class Room extends eventsExports$1.EventEmitter{constructor(c){var b,_,$;super(),b=this,this.state=ConnectionState.Disconnected,this.activeSpeakers=[],this.isE2EEEnabled=!1,this.audioEnabled=!0,this.isVideoPlaybackBlocked=!1,this.log=livekitLogger,this.bufferedEvents=[],this.isResuming=!1,this.connect=(k,et,nt)=>__awaiter$3(this,void 0,void 0,function*(){var ot;if(!isBrowserSupported())throw isReactNative()?Error("WebRTC isn't detected, have you called registerGlobals?"):Error("LiveKit doesn't seem to be supported on this browser. Try to update your browser and make sure no browser extensions are disabling webRTC.");const ht=yield this.disconnectLock.lock();if(this.state===ConnectionState.Connected)return this.log.info("already connected to room ".concat(this.name),this.logContext),ht(),Promise.resolve();if(this.connectFuture)return ht(),this.connectFuture.promise;this.setAndEmitConnectionState(ConnectionState.Connecting),((ot=this.regionUrlProvider)===null||ot===void 0?void 0:ot.getServerUrl().toString())!==k&&(this.regionUrl=void 0,this.regionUrlProvider=void 0),isCloud(new URL(k))&&(this.regionUrlProvider===void 0?this.regionUrlProvider=new RegionUrlProvider(k,et):this.regionUrlProvider.updateToken(et),this.regionUrlProvider.fetchRegionSettings().catch(kt=>{this.log.warn("could not fetch region settings",Object.assign(Object.assign({},this.logContext),{error:kt}))}));const vt=(kt,$t,Tt)=>__awaiter$3(this,void 0,void 0,function*(){var At;this.abortController&&this.abortController.abort();const Mt=new AbortController;this.abortController=Mt,ht==null||ht();try{yield this.attemptConnection(Tt??k,et,nt,Mt),this.abortController=void 0,kt()}catch(Dt){if(this.regionUrlProvider&&Dt instanceof ConnectionError&&Dt.reason!==3&&Dt.reason!==0){let Rt=null;try{Rt=yield this.regionUrlProvider.getNextBestRegionUrl((At=this.abortController)===null||At===void 0?void 0:At.signal)}catch(xt){if(xt instanceof ConnectionError&&(xt.status===401||xt.reason===3)){this.handleDisconnect(this.options.stopLocalTrackOnUnpublish),$t(xt);return}}Rt?(this.log.info("Initial connection failed with ConnectionError: ".concat(Dt.message,". Retrying with another region: ").concat(Rt),this.logContext),this.recreateEngine(),yield vt(kt,$t,Rt)):(this.handleDisconnect(this.options.stopLocalTrackOnUnpublish),$t(Dt))}else this.handleDisconnect(this.options.stopLocalTrackOnUnpublish),$t(Dt)}}),_t=this.regionUrl;return this.regionUrl=void 0,this.connectFuture=new Future((kt,$t)=>{vt(kt,$t,_t)},()=>{this.clearConnectionFutures()}),this.connectFuture.promise}),this.connectSignal=(k,et,nt,ot,ht,vt)=>__awaiter$3(this,void 0,void 0,function*(){var _t,kt,$t;const Tt=yield nt.join(k,et,{autoSubscribe:ot.autoSubscribe,adaptiveStream:typeof ht.adaptiveStream=="object"?!0:ht.adaptiveStream,maxRetries:ot.maxRetries,e2eeEnabled:!!this.e2eeManager,websocketTimeout:ot.websocketTimeout},vt.signal);let At=Tt.serverInfo;if(At||(At={version:Tt.serverVersion,region:Tt.serverRegion}),this.log.debug("connected to Livekit Server ".concat(Object.entries(At).map(Mt=>{let[Dt,Rt]=Mt;return"".concat(Dt,": ").concat(Rt)}).join(", ")),{room:(_t=Tt.room)===null||_t===void 0?void 0:_t.name,roomSid:(kt=Tt.room)===null||kt===void 0?void 0:kt.sid,identity:($t=Tt.participant)===null||$t===void 0?void 0:$t.identity}),!Tt.serverVersion)throw new UnsupportedServer("unknown server version");return Tt.serverVersion==="0.15.1"&&this.options.dynacast&&(this.log.debug("disabling dynacast due to server version",this.logContext),ht.dynacast=!1),Tt}),this.applyJoinResponse=k=>{const et=k.participant;if(this.localParticipant.sid=et.sid,this.localParticipant.identity=et.identity,this.options.e2ee&&this.e2eeManager)try{this.e2eeManager.setSifTrailer(k.sifTrailer)}catch(nt){this.log.error(nt instanceof Error?nt.message:"Could not set SifTrailer",Object.assign(Object.assign({},this.logContext),{error:nt}))}this.handleParticipantUpdates([et,...k.otherParticipants]),k.room&&this.handleRoomUpdate(k.room)},this.attemptConnection=(k,et,nt,ot)=>__awaiter$3(this,void 0,void 0,function*(){var ht,vt,_t;this.state===ConnectionState.Reconnecting||this.isResuming||!((ht=this.engine)===null||ht===void 0)&&ht.pendingReconnect?(this.log.info("Reconnection attempt replaced by new connection attempt",this.logContext),this.recreateEngine()):this.maybeCreateEngine(),!((vt=this.regionUrlProvider)===null||vt===void 0)&&vt.isCloud()&&this.engine.setRegionUrlProvider(this.regionUrlProvider),this.acquireAudioContext(),this.connOptions=Object.assign(Object.assign({},roomConnectOptionDefaults),nt),this.connOptions.rtcConfig&&(this.engine.rtcConfig=this.connOptions.rtcConfig),this.connOptions.peerConnectionTimeout&&(this.engine.peerConnectionTimeout=this.connOptions.peerConnectionTimeout);try{const kt=yield this.connectSignal(k,et,this.engine,this.connOptions,this.options,ot);this.applyJoinResponse(kt),this.setupLocalParticipantEvents(),this.emit(RoomEvent.SignalConnected)}catch(kt){yield this.engine.close(),this.recreateEngine();const $t=new ConnectionError("could not establish signal connection");throw kt instanceof Error&&($t.message="".concat($t.message,": ").concat(kt.message)),kt instanceof ConnectionError&&($t.reason=kt.reason,$t.status=kt.status),this.log.debug("error trying to establish signal connection",Object.assign(Object.assign({},this.logContext),{error:kt})),$t}if(ot.signal.aborted)throw yield this.engine.close(),this.recreateEngine(),new ConnectionError("Connection attempt aborted");try{yield this.engine.waitForPCInitialConnection(this.connOptions.peerConnectionTimeout,ot)}catch(kt){throw yield this.engine.close(),this.recreateEngine(),kt}isWeb()&&this.options.disconnectOnPageLeave&&(window.addEventListener("pagehide",this.onPageLeave),window.addEventListener("beforeunload",this.onPageLeave)),isWeb()&&(document.addEventListener("freeze",this.onPageLeave),(_t=navigator.mediaDevices)===null||_t===void 0||_t.addEventListener("devicechange",this.handleDeviceChange)),this.setAndEmitConnectionState(ConnectionState.Connected),this.emit(RoomEvent.Connected),this.registerConnectionReconcile()}),this.disconnect=function(){let k=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return __awaiter$3(b,void 0,void 0,function*(){var et,nt,ot,ht;const vt=yield this.disconnectLock.lock();try{if(this.state===ConnectionState.Disconnected){this.log.debug("already disconnected",this.logContext);return}this.log.info("disconnect from room",Object.assign({},this.logContext)),(this.state===ConnectionState.Connecting||this.state===ConnectionState.Reconnecting||this.isResuming)&&(this.log.warn("abort connection attempt",this.logContext),(et=this.abortController)===null||et===void 0||et.abort(),(ot=(nt=this.connectFuture)===null||nt===void 0?void 0:nt.reject)===null||ot===void 0||ot.call(nt,new ConnectionError("Client initiated disconnect")),this.connectFuture=void 0),!((ht=this.engine)===null||ht===void 0)&&ht.client.isDisconnected||(yield this.engine.client.sendLeave()),this.engine&&(yield this.engine.close()),this.handleDisconnect(k,DisconnectReason.CLIENT_INITIATED),this.engine=void 0}finally{vt()}})},this.onPageLeave=()=>__awaiter$3(this,void 0,void 0,function*(){this.log.info("Page leave detected, disconnecting",this.logContext),yield this.disconnect()}),this.startAudio=()=>__awaiter$3(this,void 0,void 0,function*(){const k=[],et=getBrowser();if(et&&et.os==="iOS"){const nt="livekit-dummy-audio-el";let ot=document.getElementById(nt);if(!ot){ot=document.createElement("audio"),ot.id=nt,ot.autoplay=!0,ot.hidden=!0;const ht=getEmptyAudioStreamTrack();ht.enabled=!0;const vt=new MediaStream([ht]);ot.srcObject=vt,document.addEventListener("visibilitychange",()=>{ot&&(ot.srcObject=document.hidden?null:vt,document.hidden||(this.log.debug("page visible again, triggering startAudio to resume playback and update playback status",this.logContext),this.startAudio()))}),document.body.append(ot),this.once(RoomEvent.Disconnected,()=>{ot==null||ot.remove(),ot=null})}k.push(ot)}this.remoteParticipants.forEach(nt=>{nt.audioTrackPublications.forEach(ot=>{ot.track&&ot.track.attachedElements.forEach(ht=>{k.push(ht)})})});try{yield Promise.all([this.acquireAudioContext(),...k.map(nt=>(nt.muted=!1,nt.play()))]),this.handleAudioPlaybackStarted()}catch(nt){throw this.handleAudioPlaybackFailed(nt),nt}}),this.startVideo=()=>__awaiter$3(this,void 0,void 0,function*(){const k=[];for(const et of this.remoteParticipants.values())et.videoTrackPublications.forEach(nt=>{var ot;(ot=nt.track)===null||ot===void 0||ot.attachedElements.forEach(ht=>{k.includes(ht)||k.push(ht)})});yield Promise.all(k.map(et=>et.play())).then(()=>{this.handleVideoPlaybackStarted()}).catch(et=>{et.name==="NotAllowedError"?this.handleVideoPlaybackFailed():this.log.warn("Resuming video playback failed, make sure you call `startVideo` directly in a user gesture handler",this.logContext)})}),this.handleRestarting=()=>{this.clearConnectionReconcile(),this.isResuming=!1;for(const k of this.remoteParticipants.values())this.handleParticipantDisconnected(k.identity,k);this.setAndEmitConnectionState(ConnectionState.Reconnecting)&&this.emit(RoomEvent.Reconnecting)},this.handleSignalRestarted=k=>__awaiter$3(this,void 0,void 0,function*(){this.log.debug("signal reconnected to server, region ".concat(k.serverRegion),Object.assign(Object.assign({},this.logContext),{region:k.serverRegion})),this.bufferedEvents=[],this.applyJoinResponse(k);try{yield this.localParticipant.republishAllTracks(void 0,!0)}catch(et){this.log.error("error trying to re-publish tracks after reconnection",Object.assign(Object.assign({},this.logContext),{error:et}))}try{yield this.engine.waitForRestarted(),this.log.debug("fully reconnected to server",Object.assign(Object.assign({},this.logContext),{region:k.serverRegion}))}catch{return}this.setAndEmitConnectionState(ConnectionState.Connected),this.emit(RoomEvent.Reconnected),this.registerConnectionReconcile(),this.emitBufferedEvents()}),this.handleParticipantUpdates=k=>{k.forEach(et=>{var nt;if(et.identity===this.localParticipant.identity){this.localParticipant.updateInfo(et);return}et.identity===""&&(et.identity=(nt=this.sidToIdentity.get(et.sid))!==null&&nt!==void 0?nt:"");let ot=this.remoteParticipants.get(et.identity);et.state===ParticipantInfo_State.DISCONNECTED?this.handleParticipantDisconnected(et.identity,ot):ot=this.getOrCreateParticipant(et.identity,et)})},this.handleActiveSpeakersUpdate=k=>{const et=[],nt={};k.forEach(ot=>{if(nt[ot.sid]=!0,ot.sid===this.localParticipant.sid)this.localParticipant.audioLevel=ot.level,this.localParticipant.setIsSpeaking(!0),et.push(this.localParticipant);else{const ht=this.getRemoteParticipantBySid(ot.sid);ht&&(ht.audioLevel=ot.level,ht.setIsSpeaking(!0),et.push(ht))}}),nt[this.localParticipant.sid]||(this.localParticipant.audioLevel=0,this.localParticipant.setIsSpeaking(!1)),this.remoteParticipants.forEach(ot=>{nt[ot.sid]||(ot.audioLevel=0,ot.setIsSpeaking(!1))}),this.activeSpeakers=et,this.emitWhenConnected(RoomEvent.ActiveSpeakersChanged,et)},this.handleSpeakersChanged=k=>{const et=new Map;this.activeSpeakers.forEach(ot=>{et.set(ot.sid,ot)}),k.forEach(ot=>{let ht=this.getRemoteParticipantBySid(ot.sid);ot.sid===this.localParticipant.sid&&(ht=this.localParticipant),ht&&(ht.audioLevel=ot.level,ht.setIsSpeaking(ot.active),ot.active?et.set(ot.sid,ht):et.delete(ot.sid))});const nt=Array.from(et.values());nt.sort((ot,ht)=>ht.audioLevel-ot.audioLevel),this.activeSpeakers=nt,this.emitWhenConnected(RoomEvent.ActiveSpeakersChanged,nt)},this.handleStreamStateUpdate=k=>{k.streamStates.forEach(et=>{const nt=this.getRemoteParticipantBySid(et.participantSid);if(!nt)return;const ot=nt.getTrackPublicationBySid(et.trackSid);!ot||!ot.track||(ot.track.streamState=Track.streamStateFromProto(et.state),nt.emit(ParticipantEvent.TrackStreamStateChanged,ot,ot.track.streamState),this.emitWhenConnected(RoomEvent.TrackStreamStateChanged,ot,ot.track.streamState,nt))})},this.handleSubscriptionPermissionUpdate=k=>{const et=this.getRemoteParticipantBySid(k.participantSid);if(!et)return;const nt=et.getTrackPublicationBySid(k.trackSid);nt&&nt.setAllowed(k.allowed)},this.handleSubscriptionError=k=>{const et=Array.from(this.remoteParticipants.values()).find(ot=>ot.trackPublications.has(k.trackSid));if(!et)return;const nt=et.getTrackPublicationBySid(k.trackSid);nt&&nt.setSubscriptionError(k.err)},this.handleDataPacket=(k,et)=>{const nt=this.remoteParticipants.get(k.participantIdentity);this.emit(RoomEvent.DataReceived,k.payload,nt,et,k.topic),nt==null||nt.emit(ParticipantEvent.DataReceived,k.payload,et)},this.handleAudioPlaybackStarted=()=>{this.canPlaybackAudio||(this.audioEnabled=!0,this.emit(RoomEvent.AudioPlaybackStatusChanged,!0))},this.handleAudioPlaybackFailed=k=>{this.log.warn("could not playback audio",Object.assign(Object.assign({},this.logContext),{error:k})),this.canPlaybackAudio&&(this.audioEnabled=!1,this.emit(RoomEvent.AudioPlaybackStatusChanged,!1))},this.handleVideoPlaybackStarted=()=>{this.isVideoPlaybackBlocked&&(this.isVideoPlaybackBlocked=!1,this.emit(RoomEvent.VideoPlaybackStatusChanged,!0))},this.handleVideoPlaybackFailed=()=>{this.isVideoPlaybackBlocked||(this.isVideoPlaybackBlocked=!0,this.emit(RoomEvent.VideoPlaybackStatusChanged,!1))},this.handleDeviceChange=()=>__awaiter$3(this,void 0,void 0,function*(){this.emit(RoomEvent.MediaDevicesChanged)}),this.handleRoomUpdate=k=>{const et=this.roomInfo;this.roomInfo=k,et&&et.metadata!==k.metadata&&this.emitWhenConnected(RoomEvent.RoomMetadataChanged,k.metadata),(et==null?void 0:et.activeRecording)!==k.activeRecording&&this.emitWhenConnected(RoomEvent.RecordingStatusChanged,k.activeRecording)},this.handleConnectionQualityUpdate=k=>{k.updates.forEach(et=>{if(et.participantSid===this.localParticipant.sid){this.localParticipant.setConnectionQuality(et.quality);return}const nt=this.getRemoteParticipantBySid(et.participantSid);nt&&nt.setConnectionQuality(et.quality)})},this.onLocalParticipantMetadataChanged=k=>{this.emit(RoomEvent.ParticipantMetadataChanged,k,this.localParticipant)},this.onLocalParticipantNameChanged=k=>{this.emit(RoomEvent.ParticipantNameChanged,k,this.localParticipant)},this.onLocalTrackMuted=k=>{this.emit(RoomEvent.TrackMuted,k,this.localParticipant)},this.onLocalTrackUnmuted=k=>{this.emit(RoomEvent.TrackUnmuted,k,this.localParticipant)},this.onTrackProcessorUpdate=k=>{var et;(et=k==null?void 0:k.onPublish)===null||et===void 0||et.call(k,this)},this.onLocalTrackPublished=k=>__awaiter$3(this,void 0,void 0,function*(){var et,nt,ot,ht,vt;(et=k.track)===null||et===void 0||et.on(TrackEvent.TrackProcessorUpdate,this.onTrackProcessorUpdate),(ht=(ot=(nt=k.track)===null||nt===void 0?void 0:nt.getProcessor())===null||ot===void 0?void 0:ot.onPublish)===null||ht===void 0||ht.call(ot,this),this.emit(RoomEvent.LocalTrackPublished,k,this.localParticipant),k.track instanceof LocalAudioTrack&&(yield k.track.checkForSilence())&&this.emit(RoomEvent.LocalAudioSilenceDetected,k);const _t=yield(vt=k.track)===null||vt===void 0?void 0:vt.getDeviceId(),kt=sourceToKind(k.source);kt&&_t&&_t!==this.localParticipant.activeDeviceMap.get(kt)&&(this.localParticipant.activeDeviceMap.set(kt,_t),this.emit(RoomEvent.ActiveDeviceChanged,kt,_t))}),this.onLocalTrackUnpublished=k=>{var et;(et=k.track)===null||et===void 0||et.off(TrackEvent.TrackProcessorUpdate,this.onTrackProcessorUpdate),this.emit(RoomEvent.LocalTrackUnpublished,k,this.localParticipant)},this.onLocalConnectionQualityChanged=k=>{this.emit(RoomEvent.ConnectionQualityChanged,k,this.localParticipant)},this.onMediaDevicesError=k=>{this.emit(RoomEvent.MediaDevicesError,k)},this.onLocalParticipantPermissionsChanged=k=>{this.emit(RoomEvent.ParticipantPermissionsChanged,k,this.localParticipant)},this.setMaxListeners(100),this.remoteParticipants=new Map,this.sidToIdentity=new Map,this.options=Object.assign(Object.assign({},roomOptionDefaults),c),this.log=getLogger((_=this.options.loggerName)!==null&&_!==void 0?_:LoggerNames.Room),this.options.audioCaptureDefaults=Object.assign(Object.assign({},audioDefaults),c==null?void 0:c.audioCaptureDefaults),this.options.videoCaptureDefaults=Object.assign(Object.assign({},videoDefaults),c==null?void 0:c.videoCaptureDefaults),this.options.publishDefaults=Object.assign(Object.assign({},publishDefaults),c==null?void 0:c.publishDefaults),this.maybeCreateEngine(),this.disconnectLock=new Mutex,this.localParticipant=new LocalParticipant("","",this.engine,this.options),this.options.videoCaptureDefaults.deviceId&&this.localParticipant.activeDeviceMap.set("videoinput",unwrapConstraint(this.options.videoCaptureDefaults.deviceId)),this.options.audioCaptureDefaults.deviceId&&this.localParticipant.activeDeviceMap.set("audioinput",unwrapConstraint(this.options.audioCaptureDefaults.deviceId)),!(($=this.options.audioOutput)===null||$===void 0)&&$.deviceId&&this.switchActiveDevice("audiooutput",unwrapConstraint(this.options.audioOutput.deviceId)).catch(k=>this.log.warn("Could not set audio output: ".concat(k.message),this.logContext)),this.options.e2ee&&this.setupE2EE()}setE2EEEnabled(c){return __awaiter$3(this,void 0,void 0,function*(){if(this.e2eeManager)yield Promise.all([this.localParticipant.setE2EEEnabled(c)]),this.localParticipant.identity!==""&&this.e2eeManager.setParticipantCryptorEnabled(c,this.localParticipant.identity);else throw Error("e2ee not configured, please set e2ee settings within the room options")})}setupE2EE(){var c;this.options.e2ee&&(this.e2eeManager=new E2EEManager(this.options.e2ee),this.e2eeManager.on(EncryptionEvent.ParticipantEncryptionStatusChanged,(b,_)=>{_ instanceof LocalParticipant&&(this.isE2EEEnabled=b),this.emit(RoomEvent.ParticipantEncryptionStatusChanged,b,_)}),this.e2eeManager.on(EncryptionEvent.EncryptionError,b=>this.emit(RoomEvent.EncryptionError,b)),(c=this.e2eeManager)===null||c===void 0||c.setup(this))}get logContext(){var c;return{room:this.name,roomID:(c=this.roomInfo)===null||c===void 0?void 0:c.sid,participant:this.localParticipant.identity,pID:this.localParticipant.sid}}get isRecording(){var c,b;return(b=(c=this.roomInfo)===null||c===void 0?void 0:c.activeRecording)!==null&&b!==void 0?b:!1}getSid(){return __awaiter$3(this,void 0,void 0,function*(){return this.state===ConnectionState.Disconnected?"":this.roomInfo&&this.roomInfo.sid!==""?this.roomInfo.sid:new Promise((c,b)=>{const _=$=>{$.sid!==""&&(this.engine.off(EngineEvent.RoomUpdate,_),c($.sid))};this.engine.on(EngineEvent.RoomUpdate,_),this.once(RoomEvent.Disconnected,()=>{this.engine.off(EngineEvent.RoomUpdate,_),b("Room disconnected before room server id was available")})})})}get name(){var c,b;return(b=(c=this.roomInfo)===null||c===void 0?void 0:c.name)!==null&&b!==void 0?b:""}get metadata(){var c;return(c=this.roomInfo)===null||c===void 0?void 0:c.metadata}get numParticipants(){var c,b;return(b=(c=this.roomInfo)===null||c===void 0?void 0:c.numParticipants)!==null&&b!==void 0?b:0}get numPublishers(){var c,b;return(b=(c=this.roomInfo)===null||c===void 0?void 0:c.numPublishers)!==null&&b!==void 0?b:0}maybeCreateEngine(){this.engine&&!this.engine.isClosed||(this.engine=new RTCEngine(this.options),this.engine.on(EngineEvent.ParticipantUpdate,this.handleParticipantUpdates).on(EngineEvent.RoomUpdate,this.handleRoomUpdate).on(EngineEvent.SpeakersChanged,this.handleSpeakersChanged).on(EngineEvent.StreamStateChanged,this.handleStreamStateUpdate).on(EngineEvent.ConnectionQualityUpdate,this.handleConnectionQualityUpdate).on(EngineEvent.SubscriptionError,this.handleSubscriptionError).on(EngineEvent.SubscriptionPermissionUpdate,this.handleSubscriptionPermissionUpdate).on(EngineEvent.MediaTrackAdded,(c,b,_)=>{this.onTrackAdded(c,b,_)}).on(EngineEvent.Disconnected,c=>{this.handleDisconnect(this.options.stopLocalTrackOnUnpublish,c)}).on(EngineEvent.ActiveSpeakersUpdate,this.handleActiveSpeakersUpdate).on(EngineEvent.DataPacketReceived,this.handleDataPacket).on(EngineEvent.Resuming,()=>{this.clearConnectionReconcile(),this.isResuming=!0,this.log.info("Resuming signal connection",this.logContext)}).on(EngineEvent.Resumed,()=>{this.registerConnectionReconcile(),this.isResuming=!1,this.log.info("Resumed signal connection",this.logContext),this.updateSubscriptions(),this.emitBufferedEvents()}).on(EngineEvent.SignalResumed,()=>{this.bufferedEvents=[],(this.state===ConnectionState.Reconnecting||this.isResuming)&&this.sendSyncState()}).on(EngineEvent.Restarting,this.handleRestarting).on(EngineEvent.SignalRestarted,this.handleSignalRestarted).on(EngineEvent.Offline,()=>{this.setAndEmitConnectionState(ConnectionState.Reconnecting)&&this.emit(RoomEvent.Reconnecting)}).on(EngineEvent.DCBufferStatusChanged,(c,b)=>{this.emit(RoomEvent.DCBufferStatusChanged,c,b)}),this.localParticipant&&this.localParticipant.setupEngine(this.engine),this.e2eeManager&&this.e2eeManager.setupEngine(this.engine))}static getLocalDevices(c){let b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return DeviceManager.getInstance().getDevices(c,b)}prepareConnection(c,b){return __awaiter$3(this,void 0,void 0,function*(){if(this.state===ConnectionState.Disconnected){this.log.debug("prepareConnection to ".concat(c),this.logContext);try{if(isCloud(new URL(c))&&b){this.regionUrlProvider=new RegionUrlProvider(c,b);const _=yield this.regionUrlProvider.getNextBestRegionUrl();_&&this.state===ConnectionState.Disconnected&&(this.regionUrl=_,yield fetch(toHttpUrl(_),{method:"HEAD"}),this.log.debug("prepared connection to ".concat(_),this.logContext))}else yield fetch(toHttpUrl(c),{method:"HEAD"})}catch(_){this.log.warn("could not prepare connection",Object.assign(Object.assign({},this.logContext),{error:_}))}}})}getParticipantByIdentity(c){return this.localParticipant.identity===c?this.localParticipant:this.remoteParticipants.get(c)}clearConnectionFutures(){this.connectFuture=void 0}simulateScenario(c,b){return __awaiter$3(this,void 0,void 0,function*(){let _=()=>{},$;switch(c){case"signal-reconnect":yield this.engine.client.handleOnClose("simulate disconnect");break;case"speaker":$=new SimulateScenario({scenario:{case:"speakerUpdate",value:3}});break;case"node-failure":$=new SimulateScenario({scenario:{case:"nodeFailure",value:!0}});break;case"server-leave":$=new SimulateScenario({scenario:{case:"serverLeave",value:!0}});break;case"migration":$=new SimulateScenario({scenario:{case:"migration",value:!0}});break;case"resume-reconnect":this.engine.failNext(),yield this.engine.client.handleOnClose("simulate resume-disconnect");break;case"disconnect-signal-on-resume":_=()=>__awaiter$3(this,void 0,void 0,function*(){yield this.engine.client.handleOnClose("simulate resume-disconnect")}),$=new SimulateScenario({scenario:{case:"disconnectSignalOnResume",value:!0}});break;case"disconnect-signal-on-resume-no-messages":_=()=>__awaiter$3(this,void 0,void 0,function*(){yield this.engine.client.handleOnClose("simulate resume-disconnect")}),$=new SimulateScenario({scenario:{case:"disconnectSignalOnResumeNoMessages",value:!0}});break;case"full-reconnect":this.engine.fullReconnectOnNext=!0,yield this.engine.client.handleOnClose("simulate full-reconnect");break;case"force-tcp":case"force-tls":$=new SimulateScenario({scenario:{case:"switchCandidateProtocol",value:c==="force-tls"?2:1}}),_=()=>__awaiter$3(this,void 0,void 0,function*(){const k=this.engine.client.onLeave;k&&k(new LeaveRequest({reason:DisconnectReason.CLIENT_INITIATED,canReconnect:!0}))});break;case"subscriber-bandwidth":if(b===void 0||typeof b!="number")throw new Error("subscriber-bandwidth requires a number as argument");$=new SimulateScenario({scenario:{case:"subscriberBandwidth",value:BigInt(b)}});break}$&&(yield this.engine.client.sendSimulateScenario($),yield _())})}get canPlaybackAudio(){return this.audioEnabled}get canPlaybackVideo(){return!this.isVideoPlaybackBlocked}getActiveDevice(c){return this.localParticipant.activeDeviceMap.get(c)}switchActiveDevice(c,b){let _=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;var $,k,et,nt;return __awaiter$3(this,void 0,void 0,function*(){let ot=!1,ht=!0;const vt=_?{exact:b}:b;if(c==="audioinput"){const _t=this.options.audioCaptureDefaults.deviceId;this.options.audioCaptureDefaults.deviceId=vt,ot=_t!==vt;const kt=Array.from(this.localParticipant.audioTrackPublications.values()).filter($t=>$t.source===Track.Source.Microphone);try{ht=(yield Promise.all(kt.map($t=>{var Tt;return(Tt=$t.audioTrack)===null||Tt===void 0?void 0:Tt.setDeviceId(vt)}))).every($t=>$t===!0)}catch($t){throw this.options.audioCaptureDefaults.deviceId=_t,$t}}else if(c==="videoinput"){const _t=this.options.videoCaptureDefaults.deviceId;this.options.videoCaptureDefaults.deviceId=vt,ot=_t!==vt;const kt=Array.from(this.localParticipant.videoTrackPublications.values()).filter($t=>$t.source===Track.Source.Camera);try{ht=(yield Promise.all(kt.map($t=>{var Tt;return(Tt=$t.videoTrack)===null||Tt===void 0?void 0:Tt.setDeviceId(vt)}))).every($t=>$t===!0)}catch($t){throw this.options.videoCaptureDefaults.deviceId=_t,$t}}else if(c==="audiooutput"){if(!supportsSetSinkId()&&!this.options.webAudioMix||this.options.webAudioMix&&this.audioContext&&!("setSinkId"in this.audioContext))throw new Error("cannot switch audio output, setSinkId not supported");this.options.webAudioMix&&(b=($=yield DeviceManager.getInstance().normalizeDeviceId("audiooutput",b))!==null&&$!==void 0?$:""),(k=(nt=this.options).audioOutput)!==null&&k!==void 0||(nt.audioOutput={});const _t=this.options.audioOutput.deviceId;this.options.audioOutput.deviceId=b,ot=_t!==vt;try{this.options.webAudioMix?(et=this.audioContext)===null||et===void 0||et.setSinkId(b):yield Promise.all(Array.from(this.remoteParticipants.values()).map(kt=>kt.setAudioOutput({deviceId:b})))}catch(kt){throw this.options.audioOutput.deviceId=_t,kt}}return ot&&ht&&(this.localParticipant.activeDeviceMap.set(c,b),this.emit(RoomEvent.ActiveDeviceChanged,c,b)),ht})}setupLocalParticipantEvents(){this.localParticipant.on(ParticipantEvent.ParticipantMetadataChanged,this.onLocalParticipantMetadataChanged).on(ParticipantEvent.ParticipantNameChanged,this.onLocalParticipantNameChanged).on(ParticipantEvent.TrackMuted,this.onLocalTrackMuted).on(ParticipantEvent.TrackUnmuted,this.onLocalTrackUnmuted).on(ParticipantEvent.LocalTrackPublished,this.onLocalTrackPublished).on(ParticipantEvent.LocalTrackUnpublished,this.onLocalTrackUnpublished).on(ParticipantEvent.ConnectionQualityChanged,this.onLocalConnectionQualityChanged).on(ParticipantEvent.MediaDevicesError,this.onMediaDevicesError).on(ParticipantEvent.AudioStreamAcquired,this.startAudio).on(ParticipantEvent.ParticipantPermissionsChanged,this.onLocalParticipantPermissionsChanged)}recreateEngine(){var c;(c=this.engine)===null||c===void 0||c.close(),this.engine=void 0,this.isResuming=!1,this.remoteParticipants.clear(),this.sidToIdentity.clear(),this.bufferedEvents=[],this.maybeCreateEngine()}onTrackAdded(c,b,_){if(this.state===ConnectionState.Connecting||this.state===ConnectionState.Reconnecting){const vt=()=>{this.onTrackAdded(c,b,_),_t()},_t=()=>{this.off(RoomEvent.Reconnected,vt),this.off(RoomEvent.Connected,vt),this.off(RoomEvent.Disconnected,_t)};this.once(RoomEvent.Reconnected,vt),this.once(RoomEvent.Connected,vt),this.once(RoomEvent.Disconnected,_t);return}if(this.state===ConnectionState.Disconnected){this.log.warn("skipping incoming track after Room disconnected",this.logContext);return}const $=unpackStreamId(b.id),k=$[0];let et=$[1],nt=c.id;if(et&&et.startsWith("TR")&&(nt=et),k===this.localParticipant.sid){this.log.warn("tried to create RemoteParticipant for local participant",this.logContext);return}const ot=Array.from(this.remoteParticipants.values()).find(vt=>vt.sid===k);if(!ot){this.log.error("Tried to add a track for a participant, that's not present. Sid: ".concat(k),this.logContext);return}let ht;this.options.adaptiveStream&&(typeof this.options.adaptiveStream=="object"?ht=this.options.adaptiveStream:ht={}),ot.addSubscribedMediaTrack(c,nt,b,_,ht)}handleDisconnect(){let c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,b=arguments.length>1?arguments[1]:void 0;var _;if(this.clearConnectionReconcile(),this.isResuming=!1,this.bufferedEvents=[],this.state!==ConnectionState.Disconnected){this.regionUrl=void 0;try{this.remoteParticipants.forEach($=>{$.trackPublications.forEach(k=>{$.unpublishTrack(k.trackSid)})}),this.localParticipant.trackPublications.forEach($=>{var k,et;$.track&&this.localParticipant.unpublishTrack($.track,c),c&&((k=$.track)===null||k===void 0||k.detach(),(et=$.track)===null||et===void 0||et.stop())}),this.localParticipant.off(ParticipantEvent.ParticipantMetadataChanged,this.onLocalParticipantMetadataChanged).off(ParticipantEvent.ParticipantNameChanged,this.onLocalParticipantNameChanged).off(ParticipantEvent.TrackMuted,this.onLocalTrackMuted).off(ParticipantEvent.TrackUnmuted,this.onLocalTrackUnmuted).off(ParticipantEvent.LocalTrackPublished,this.onLocalTrackPublished).off(ParticipantEvent.LocalTrackUnpublished,this.onLocalTrackUnpublished).off(ParticipantEvent.ConnectionQualityChanged,this.onLocalConnectionQualityChanged).off(ParticipantEvent.MediaDevicesError,this.onMediaDevicesError).off(ParticipantEvent.AudioStreamAcquired,this.startAudio).off(ParticipantEvent.ParticipantPermissionsChanged,this.onLocalParticipantPermissionsChanged),this.localParticipant.trackPublications.clear(),this.localParticipant.videoTrackPublications.clear(),this.localParticipant.audioTrackPublications.clear(),this.remoteParticipants.clear(),this.sidToIdentity.clear(),this.activeSpeakers=[],this.audioContext&&typeof this.options.webAudioMix=="boolean"&&(this.audioContext.close(),this.audioContext=void 0),isWeb()&&(window.removeEventListener("beforeunload",this.onPageLeave),window.removeEventListener("pagehide",this.onPageLeave),window.removeEventListener("freeze",this.onPageLeave),(_=navigator.mediaDevices)===null||_===void 0||_.removeEventListener("devicechange",this.handleDeviceChange))}finally{this.setAndEmitConnectionState(ConnectionState.Disconnected),this.emit(RoomEvent.Disconnected,b)}}}handleParticipantDisconnected(c,b){this.remoteParticipants.delete(c),b&&(b.trackPublications.forEach(_=>{b.unpublishTrack(_.trackSid,!0)}),this.emit(RoomEvent.ParticipantDisconnected,b))}acquireAudioContext(){var c,b;return __awaiter$3(this,void 0,void 0,function*(){if(typeof this.options.webAudioMix!="boolean"&&this.options.webAudioMix.audioContext?this.audioContext=this.options.webAudioMix.audioContext:(!this.audioContext||this.audioContext.state==="closed")&&(this.audioContext=(c=getNewAudioContext())!==null&&c!==void 0?c:void 0),this.audioContext&&this.audioContext.state==="suspended")try{yield this.audioContext.resume()}catch($){this.log.warn("Could not resume audio context",Object.assign(Object.assign({},this.logContext),{error:$}))}this.options.webAudioMix&&this.remoteParticipants.forEach($=>$.setAudioContext(this.audioContext)),this.localParticipant.setAudioContext(this.audioContext);const _=((b=this.audioContext)===null||b===void 0?void 0:b.state)==="running";_!==this.canPlaybackAudio&&(this.audioEnabled=_,this.emit(RoomEvent.AudioPlaybackStatusChanged,_))})}createParticipant(c,b){var _;let $;return b?$=RemoteParticipant.fromParticipantInfo(this.engine.client,b):$=new RemoteParticipant(this.engine.client,"",c,void 0,void 0,{loggerContextCb:()=>this.logContext,loggerName:this.options.loggerName}),this.options.webAudioMix&&$.setAudioContext(this.audioContext),!((_=this.options.audioOutput)===null||_===void 0)&&_.deviceId&&$.setAudioOutput(this.options.audioOutput).catch(k=>this.log.warn("Could not set audio output: ".concat(k.message),this.logContext)),$}getOrCreateParticipant(c,b){if(this.remoteParticipants.has(c)){const $=this.remoteParticipants.get(c);return b&&$.updateInfo(b)&&this.sidToIdentity.set(b.sid,b.identity),$}const _=this.createParticipant(c,b);return this.remoteParticipants.set(c,_),this.sidToIdentity.set(b.sid,b.identity),this.emitWhenConnected(RoomEvent.ParticipantConnected,_),_.on(ParticipantEvent.TrackPublished,$=>{this.emitWhenConnected(RoomEvent.TrackPublished,$,_)}).on(ParticipantEvent.TrackSubscribed,($,k)=>{$.kind===Track.Kind.Audio?($.on(TrackEvent.AudioPlaybackStarted,this.handleAudioPlaybackStarted),$.on(TrackEvent.AudioPlaybackFailed,this.handleAudioPlaybackFailed)):$.kind===Track.Kind.Video&&($.on(TrackEvent.VideoPlaybackFailed,this.handleVideoPlaybackFailed),$.on(TrackEvent.VideoPlaybackStarted,this.handleVideoPlaybackStarted)),this.emit(RoomEvent.TrackSubscribed,$,k,_)}).on(ParticipantEvent.TrackUnpublished,$=>{this.emit(RoomEvent.TrackUnpublished,$,_)}).on(ParticipantEvent.TrackUnsubscribed,($,k)=>{this.emit(RoomEvent.TrackUnsubscribed,$,k,_)}).on(ParticipantEvent.TrackSubscriptionFailed,$=>{this.emit(RoomEvent.TrackSubscriptionFailed,$,_)}).on(ParticipantEvent.TrackMuted,$=>{this.emitWhenConnected(RoomEvent.TrackMuted,$,_)}).on(ParticipantEvent.TrackUnmuted,$=>{this.emitWhenConnected(RoomEvent.TrackUnmuted,$,_)}).on(ParticipantEvent.ParticipantMetadataChanged,$=>{this.emitWhenConnected(RoomEvent.ParticipantMetadataChanged,$,_)}).on(ParticipantEvent.ParticipantNameChanged,$=>{this.emitWhenConnected(RoomEvent.ParticipantNameChanged,$,_)}).on(ParticipantEvent.ConnectionQualityChanged,$=>{this.emitWhenConnected(RoomEvent.ConnectionQualityChanged,$,_)}).on(ParticipantEvent.ParticipantPermissionsChanged,$=>{this.emitWhenConnected(RoomEvent.ParticipantPermissionsChanged,$,_)}).on(ParticipantEvent.TrackSubscriptionStatusChanged,($,k)=>{this.emitWhenConnected(RoomEvent.TrackSubscriptionStatusChanged,$,k,_)}).on(ParticipantEvent.TrackSubscriptionFailed,($,k)=>{this.emit(RoomEvent.TrackSubscriptionFailed,$,_,k)}).on(ParticipantEvent.TrackSubscriptionPermissionChanged,($,k)=>{this.emitWhenConnected(RoomEvent.TrackSubscriptionPermissionChanged,$,k,_)}),b&&_.updateInfo(b),_}sendSyncState(){const c=Array.from(this.remoteParticipants.values()).reduce((_,$)=>(_.push(...$.getTrackPublications()),_),[]),b=this.localParticipant.getTrackPublications();this.engine.sendSyncState(c,b)}updateSubscriptions(){for(const c of this.remoteParticipants.values())for(const b of c.videoTrackPublications.values())b.isSubscribed&&b instanceof RemoteTrackPublication&&b.emitTrackUpdate()}getRemoteParticipantBySid(c){const b=this.sidToIdentity.get(c);if(b)return this.remoteParticipants.get(b)}registerConnectionReconcile(){this.clearConnectionReconcile();let c=0;this.connectionReconcileInterval=CriticalTimers.setInterval(()=>{!this.engine||this.engine.isClosed||!this.engine.verifyTransport()?(c++,this.log.warn("detected connection state mismatch",Object.assign(Object.assign({},this.logContext),{numFailures:c,engine:{closed:this.engine.isClosed,transportsConnected:this.engine.verifyTransport()}})),c>=3&&(this.recreateEngine(),this.handleDisconnect(this.options.stopLocalTrackOnUnpublish,DisconnectReason.STATE_MISMATCH))):c=0},connectionReconcileFrequency)}clearConnectionReconcile(){this.connectionReconcileInterval&&CriticalTimers.clearInterval(this.connectionReconcileInterval)}setAndEmitConnectionState(c){return c===this.state?!1:(this.state=c,this.emit(RoomEvent.ConnectionStateChanged,this.state),!0)}emitBufferedEvents(){this.bufferedEvents.forEach(c=>{let[b,_]=c;this.emit(b,..._)}),this.bufferedEvents=[]}emitWhenConnected(c){for(var b=arguments.length,_=new Array(b>1?b-1:0),$=1;$<b;$++)_[$-1]=arguments[$];if(this.state===ConnectionState.Reconnecting||this.isResuming||!this.engine||this.engine.pendingReconnect)this.bufferedEvents.push([c,_]);else if(this.state===ConnectionState.Connected)return this.emit(c,..._);return!1}simulateParticipants(c){var b,_;return __awaiter$3(this,void 0,void 0,function*(){const $=Object.assign({audio:!0,video:!0,useRealTracks:!1},c.publish),k=Object.assign({count:9,audio:!1,video:!0,aspectRatios:[1.66,1.7,1.3]},c.participants);if(this.handleDisconnect(),this.roomInfo=new Room$1({sid:"RM_SIMULATED",name:"simulated-room",emptyTimeout:0,maxParticipants:0,creationTime:protoInt64.parse(new Date().getTime()),metadata:"",numParticipants:1,numPublishers:1,turnPassword:"",enabledCodecs:[],activeRecording:!1}),this.localParticipant.updateInfo(new ParticipantInfo({identity:"simulated-local",name:"local-name"})),this.setupLocalParticipantEvents(),this.emit(RoomEvent.SignalConnected),this.emit(RoomEvent.Connected),this.setAndEmitConnectionState(ConnectionState.Connected),$.video){const et=new LocalTrackPublication(Track.Kind.Video,new TrackInfo({source:TrackSource.CAMERA,sid:Math.floor(Math.random()*1e4).toString(),type:TrackType.AUDIO,name:"video-dummy"}),new LocalVideoTrack($.useRealTracks?(yield window.navigator.mediaDevices.getUserMedia({video:!0})).getVideoTracks()[0]:createDummyVideoStreamTrack(160*((b=k.aspectRatios[0])!==null&&b!==void 0?b:1),160,!0,!0),void 0,!1,{loggerName:this.options.loggerName,loggerContextCb:()=>this.logContext}),{loggerName:this.options.loggerName,loggerContextCb:()=>this.logContext});this.localParticipant.addTrackPublication(et),this.localParticipant.emit(ParticipantEvent.LocalTrackPublished,et)}if($.audio){const et=new LocalTrackPublication(Track.Kind.Audio,new TrackInfo({source:TrackSource.MICROPHONE,sid:Math.floor(Math.random()*1e4).toString(),type:TrackType.AUDIO}),new LocalAudioTrack($.useRealTracks?(yield navigator.mediaDevices.getUserMedia({audio:!0})).getAudioTracks()[0]:getEmptyAudioStreamTrack(),void 0,!1,this.audioContext,{loggerName:this.options.loggerName,loggerContextCb:()=>this.logContext}),{loggerName:this.options.loggerName,loggerContextCb:()=>this.logContext});this.localParticipant.addTrackPublication(et),this.localParticipant.emit(ParticipantEvent.LocalTrackPublished,et)}for(let et=0;et<k.count-1;et+=1){let nt=new ParticipantInfo({sid:Math.floor(Math.random()*1e4).toString(),identity:"simulated-".concat(et),state:ParticipantInfo_State.ACTIVE,tracks:[],joinedAt:protoInt64.parse(Date.now())});const ot=this.getOrCreateParticipant(nt.identity,nt);if(k.video){const ht=createDummyVideoStreamTrack(160*((_=k.aspectRatios[et%k.aspectRatios.length])!==null&&_!==void 0?_:1),160,!1,!0),vt=new TrackInfo({source:TrackSource.CAMERA,sid:Math.floor(Math.random()*1e4).toString(),type:TrackType.AUDIO});ot.addSubscribedMediaTrack(ht,vt.sid,new MediaStream([ht])),nt.tracks=[...nt.tracks,vt]}if(k.audio){const ht=getEmptyAudioStreamTrack(),vt=new TrackInfo({source:TrackSource.MICROPHONE,sid:Math.floor(Math.random()*1e4).toString(),type:TrackType.AUDIO});ot.addSubscribedMediaTrack(ht,vt.sid,new MediaStream([ht])),nt.tracks=[...nt.tracks,vt]}ot.updateInfo(nt)}})}emit(c){for(var b=arguments.length,_=new Array(b>1?b-1:0),$=1;$<b;$++)_[$-1]=arguments[$];if(c!==RoomEvent.ActiveSpeakersChanged){const k=mapArgs(_).filter(et=>et!==void 0);this.log.debug("room event ".concat(c),Object.assign(Object.assign({},this.logContext),{event:c,args:k}))}return super.emit(c,..._)}}function mapArgs(a){return a.map(c=>{if(c)return Array.isArray(c)?mapArgs(c):typeof c=="object"?"logContext"in c&&c.logContext:c})}var CheckStatus;(function(a){a[a.IDLE=0]="IDLE",a[a.RUNNING=1]="RUNNING",a[a.SKIPPED=2]="SKIPPED",a[a.SUCCESS=3]="SUCCESS",a[a.FAILED=4]="FAILED"})(CheckStatus||(CheckStatus={}));class Checker extends eventsExports$1.EventEmitter{constructor(c,b){let _=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};super(),this.status=CheckStatus.IDLE,this.logs=[],this.errorsAsWarnings=!1,this.url=c,this.token=b,this.name=this.constructor.name,this.room=new Room(_.roomOptions),this.connectOptions=_.connectOptions,_.errorsAsWarnings&&(this.errorsAsWarnings=_.errorsAsWarnings)}run(c){return __awaiter$3(this,void 0,void 0,function*(){if(this.status!==CheckStatus.IDLE)throw Error("check is running already");this.setStatus(CheckStatus.RUNNING);try{yield this.perform()}catch(b){b instanceof Error&&(this.errorsAsWarnings?this.appendWarning(b.message):this.appendError(b.message))}return yield this.disconnect(),yield new Promise(b=>setTimeout(b,500)),this.status!==CheckStatus.SKIPPED&&this.setStatus(this.isSuccess()?CheckStatus.SUCCESS:CheckStatus.FAILED),c&&c(),this.getInfo()})}isSuccess(){return!this.logs.some(c=>c.level==="error")}connect(){return __awaiter$3(this,void 0,void 0,function*(){return this.room.state===ConnectionState.Connected?this.room:(yield this.room.connect(this.url,this.token),this.room)})}disconnect(){return __awaiter$3(this,void 0,void 0,function*(){this.room&&this.room.state!==ConnectionState.Disconnected&&(yield this.room.disconnect(),yield new Promise(c=>setTimeout(c,500)))})}skip(){this.setStatus(CheckStatus.SKIPPED)}appendMessage(c){this.logs.push({level:"info",message:c}),this.emit("update",this.getInfo())}appendWarning(c){this.logs.push({level:"warning",message:c}),this.emit("update",this.getInfo())}appendError(c){this.logs.push({level:"error",message:c}),this.emit("update",this.getInfo())}setStatus(c){this.status=c,this.emit("update",this.getInfo())}get engine(){var c;return(c=this.room)===null||c===void 0?void 0:c.engine}getInfo(){return{logs:this.logs,name:this.name,status:this.status,description:this.description}}}function createLocalTracks(a){var c,b;return __awaiter$3(this,void 0,void 0,function*(){a??(a={}),(c=a.audio)!==null&&c!==void 0||(a.audio=!0),(b=a.video)!==null&&b!==void 0||(a.video=!0);const _=mergeDefaultOptions(a,audioDefaults,videoDefaults),$=constraintsForOptions(_),k=navigator.mediaDevices.getUserMedia($);a.audio&&(DeviceManager.userMediaPromiseMap.set("audioinput",k),k.catch(()=>DeviceManager.userMediaPromiseMap.delete("audioinput"))),a.video&&(DeviceManager.userMediaPromiseMap.set("videoinput",k),k.catch(()=>DeviceManager.userMediaPromiseMap.delete("videoinput")));const et=yield k;return et.getTracks().map(nt=>{const ot=nt.kind==="audio";ot?a.audio:a.video;let ht;const vt=ot?$.audio:$.video;typeof vt!="boolean"&&(ht=vt),ht?ht.deviceId=nt.getSettings().deviceId:ht={deviceId:nt.getSettings().deviceId};const _t=mediaTrackToLocalTrack(nt,ht);return _t.kind===Track.Kind.Video?_t.source=Track.Source.Camera:_t.kind===Track.Kind.Audio&&(_t.source=Track.Source.Microphone),_t.mediaStream=et,_t})})}function createLocalVideoTrack(a){return __awaiter$3(this,void 0,void 0,function*(){return(yield createLocalTracks({audio:!1,video:a}))[0]})}function createLocalAudioTrack(a){return __awaiter$3(this,void 0,void 0,function*(){return(yield createLocalTracks({audio:a,video:!1}))[0]})}class PublishAudioCheck extends Checker{get description(){return"Can publish audio"}perform(){var c;return __awaiter$3(this,void 0,void 0,function*(){const b=yield this.connect(),_=yield createLocalAudioTrack();b.localParticipant.publishTrack(_),yield new Promise(et=>setTimeout(et,3e3));const $=yield(c=_.sender)===null||c===void 0?void 0:c.getStats();if(!$)throw new Error("Could not get RTCStats");let k=0;if($.forEach(et=>{et.type==="outbound-rtp"&&et.mediaType==="audio"&&(k=et.packetsSent)}),k===0)throw new Error("Could not determine packets are sent");this.appendMessage("published ".concat(k," audio packets"))})}}class PublishVideoCheck extends Checker{get description(){return"Can publish video"}perform(){var c;return __awaiter$3(this,void 0,void 0,function*(){const b=yield this.connect(),_=yield createLocalVideoTrack();b.localParticipant.publishTrack(_),yield new Promise(et=>setTimeout(et,3e3));const $=yield(c=_.sender)===null||c===void 0?void 0:c.getStats();if(!$)throw new Error("Could not get RTCStats");let k=0;if($.forEach(et=>{et.type==="outbound-rtp"&&et.mediaType==="video"&&(k=et.packetsSent)}),k===0)throw new Error("Could not determine packets are sent");this.appendMessage("published ".concat(k," video packets"))})}}class ReconnectCheck extends Checker{get description(){return"Resuming connection after interruption"}perform(){var c;return __awaiter$3(this,void 0,void 0,function*(){const b=yield this.connect();let _=!1,$=!1,k;const et=new Promise(ot=>{setTimeout(ot,5e3),k=ot});b.on(RoomEvent.Reconnecting,()=>{_=!0}).on(RoomEvent.Reconnected,()=>{$=!0,k(!0)}),(c=b.engine.client.ws)===null||c===void 0||c.close();const nt=b.engine.client.onClose;if(nt&&nt(""),yield et,_){if(!$||b.state!==ConnectionState.Connected)throw this.appendWarning("reconnection is only possible in Redis-based configurations"),new Error("Not able to reconnect")}else throw new Error("Did not attempt to reconnect")})}}class TURNCheck extends Checker{get description(){return"Can connect via TURN"}perform(){var c,b;return __awaiter$3(this,void 0,void 0,function*(){const _=new SignalClient,$=yield _.join(this.url,this.token,{autoSubscribe:!0,maxRetries:0,e2eeEnabled:!1,websocketTimeout:15e3});let k=!1,et=!1,nt=!1;for(let ot of $.iceServers)for(let ht of ot.urls)ht.startsWith("turn:")?(et=!0,nt=!0):ht.startsWith("turns:")&&(et=!0,nt=!0,k=!0),ht.startsWith("stun:")&&(nt=!0);nt?et&&!k&&this.appendWarning("TURN is configured server side, but TURN/TLS is unavailable."):this.appendWarning("No STUN servers configured on server side."),yield _.close(),!((b=(c=this.connectOptions)===null||c===void 0?void 0:c.rtcConfig)===null||b===void 0)&&b.iceServers||et?yield this.room.connect(this.url,this.token,{rtcConfig:{iceTransportPolicy:"relay"}}):(this.appendWarning("No TURN servers configured."),this.skip(),yield new Promise(ot=>setTimeout(ot,0)))})}}class WebRTCCheck extends Checker{get description(){return"Establishing WebRTC connection"}perform(){return __awaiter$3(this,void 0,void 0,function*(){let c=!1,b=!1;this.room.on(RoomEvent.SignalConnected,()=>{const _=this.room.engine.client.onTrickle;this.room.engine.client.onTrickle=($,k)=>{if($.candidate){const et=new RTCIceCandidate($);let nt="".concat(et.protocol," ").concat(et.address,":").concat(et.port," ").concat(et.type);et.address&&(isIPPrivate(et.address)?nt+=" (private)":et.protocol==="tcp"&&et.tcpType==="passive"?(c=!0,nt+=" (passive)"):et.protocol==="udp"&&(b=!0)),this.appendMessage(nt)}_&&_($,k)},this.room.engine.pcManager&&(this.room.engine.pcManager.subscriber.onIceCandidateError=$=>{$ instanceof RTCPeerConnectionIceErrorEvent&&this.appendWarning("error with ICE candidate: ".concat($.errorCode," ").concat($.errorText," ").concat($.url))})});try{yield this.connect(),livekitLogger.info("now the room is connected")}catch(_){throw this.appendWarning("ports need to be open on firewall in order to connect."),_}c||this.appendWarning("Server is not configured for ICE/TCP"),b||this.appendWarning("No public IPv4 UDP candidates were found. Your server is likely not configured correctly")})}}function isIPPrivate(a){const c=a.split(".");if(c.length===4){if(c[0]==="10")return!0;if(c[0]==="192"&&c[1]==="168")return!0;if(c[0]==="172"){const b=parseInt(c[1],10);if(b>=16&&b<=31)return!0}}return!1}class WebSocketCheck extends Checker{get description(){return"Connecting to signal connection via WebSocket"}perform(){var c,b,_;return __awaiter$3(this,void 0,void 0,function*(){(this.url.startsWith("ws:")||this.url.startsWith("http:"))&&this.appendWarning("Server is insecure, clients may block connections to it");let $=new SignalClient;const k=yield $.join(this.url,this.token,{autoSubscribe:!0,maxRetries:0,e2eeEnabled:!1,websocketTimeout:15e3});this.appendMessage("Connected to server, version ".concat(k.serverVersion,".")),((c=k.serverInfo)===null||c===void 0?void 0:c.edition)===ServerInfo_Edition.Cloud&&(!((b=k.serverInfo)===null||b===void 0)&&b.region)&&this.appendMessage("LiveKit Cloud: ".concat((_=k.serverInfo)===null||_===void 0?void 0:_.region)),yield $.close()})}}class ConnectionCheck extends eventsExports$1.EventEmitter{constructor(c,b){super(),this.checkResults=new Map,this.url=c,this.token=b}getNextCheckId(){const c=this.checkResults.size;return this.checkResults.set(c,{logs:[],status:CheckStatus.IDLE,name:"",description:""}),c}updateCheck(c,b){this.checkResults.set(c,b),this.emit("checkUpdate",c,b)}isSuccess(){return Array.from(this.checkResults.values()).every(c=>c.status!==CheckStatus.FAILED)}getResults(){return Array.from(this.checkResults.values())}createAndRunCheck(c){return __awaiter$3(this,void 0,void 0,function*(){const b=this.getNextCheckId(),_=new c(this.url,this.token),$=et=>{this.updateCheck(b,et)};_.on("update",$);const k=yield _.run();return _.off("update",$),k})}checkWebsocket(){return __awaiter$3(this,void 0,void 0,function*(){return this.createAndRunCheck(WebSocketCheck)})}checkWebRTC(){return __awaiter$3(this,void 0,void 0,function*(){return this.createAndRunCheck(WebRTCCheck)})}checkTURN(){return __awaiter$3(this,void 0,void 0,function*(){return this.createAndRunCheck(TURNCheck)})}checkReconnect(){return __awaiter$3(this,void 0,void 0,function*(){return this.createAndRunCheck(ReconnectCheck)})}checkPublishAudio(){return __awaiter$3(this,void 0,void 0,function*(){return this.createAndRunCheck(PublishAudioCheck)})}checkPublishVideo(){return __awaiter$3(this,void 0,void 0,function*(){return this.createAndRunCheck(PublishVideoCheck)})}}lib$2.LiveApiModel.Rendering;lib$2.LiveApiModel.VideoRendering;lib$2.LiveApiModel.AudioRendering;lib$2.LiveApiModel.RenderingQuality;lib$2.LiveApiModel.Encoding;lib$2.LiveApiModel.VideoEncoding;lib$2.LiveApiModel.AudioEncoding;const ProjectBroadcastPhase=lib$2.LiveApiModel.ProjectBroadcastPhase,Role=lib$2.LiveApiModel.Role;lib$2.LiveApiModel.DestinationAddress;lib$2.LiveApiModel.VideoCodec;lib$2.LiveApiModel.AudioCodec;lib$2.LiveApiModel.VideoCodecRateControl;lib$2.LiveApiModel.VideoCodecProfile;var Permission=(a=>(a[a.ReadProject=0]="ReadProject",a[a.UpdateProject=1]="UpdateProject",a[a.JoinRoom=2]="JoinRoom",a[a.InviteGuests=3]="InviteGuests",a[a.ManageGuests=4]="ManageGuests",a[a.ManageBroadcast=5]="ManageBroadcast",a[a.ManageSelf=6]="ManageSelf",a))(Permission||{});const permissions={[Role.ROLE_HOST]:[0,1,2,3,4,5],[Role.ROLE_COHOST]:[0,1,2,3,4,5],[Role.ROLE_CONTRIBUTOR]:[0,1,2,3],[Role.ROLE_GUEST]:[0,2,6],[Role.ROLE_VIEWER]:[0,2],[Role.ROLE_IMPERSONATE]:[0,1,3,4,5]},hasPermission=(a,c)=>{var b;return a?!!((b=permissions[a])!=null&&b.find(_=>_===c)):!1};let currentSubId=0;const subscribers=new Map,subscribersInternal=new Map;function createSubscribe(a={}){return function(c){if(typeof c!="function")return;const b=a.internal?subscribersInternal:subscribers,_=++currentSubId;return b.set(_,c),()=>{b.delete(_)}}}function createOn(a={}){return function(c,b){return(a.internal?subscribeInternal:subscribe)(($,k)=>{if(c===$)return b(k)})}}function createTrigger(a={}){const c=a.internal?subscribersInternal:subscribers;return async function(b,..._){let $={type:b,payload:_[0]};const k=a.internal?"Internal":"External";log.info(`${k} Event:`,$),await Promise.all(Array.from(c.values()).map(et=>et($.type,$.payload)))}}const trigger$1=createTrigger(),subscribe=createSubscribe(),on=createOn(),triggerInternal$1=createTrigger({internal:!0}),subscribeInternal=createSubscribe({internal:!0}),onInternal=createOn({internal:!0});var loglevel={exports:{}};(function(a){(function(c,b){a.exports?a.exports=b():c.log=b()})(commonjsGlobal$1,function(){var c=function(){},b="undefined",_=typeof window!==b&&typeof window.navigator!==b&&/Trident\/|MSIE /.test(window.navigator.userAgent),$=["trace","debug","info","warn","error"],k={},et=null;function nt(At,Mt){var Dt=At[Mt];if(typeof Dt.bind=="function")return Dt.bind(At);try{return Function.prototype.bind.call(Dt,At)}catch{return function(){return Function.prototype.apply.apply(Dt,[At,arguments])}}}function ot(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function ht(At){return At==="debug"&&(At="log"),typeof console===b?!1:At==="trace"&&_?ot:console[At]!==void 0?nt(console,At):console.log!==void 0?nt(console,"log"):c}function vt(){for(var At=this.getLevel(),Mt=0;Mt<$.length;Mt++){var Dt=$[Mt];this[Dt]=Mt<At?c:this.methodFactory(Dt,At,this.name)}if(this.log=this.debug,typeof console===b&&At<this.levels.SILENT)return"No console available for logging"}function _t(At){return function(){typeof console!==b&&(vt.call(this),this[At].apply(this,arguments))}}function kt(At,Mt,Dt){return ht(At)||_t.apply(this,arguments)}function $t(At,Mt){var Dt=this,Rt,xt,Jt,ar="loglevel";typeof At=="string"?ar+=":"+At:typeof At=="symbol"&&(ar=void 0);function nr(ut){var _e=($[ut]||"silent").toUpperCase();if(!(typeof window===b||!ar)){try{window.localStorage[ar]=_e;return}catch{}try{window.document.cookie=encodeURIComponent(ar)+"="+_e+";"}catch{}}}function pr(){var ut;if(!(typeof window===b||!ar)){try{ut=window.localStorage[ar]}catch{}if(typeof ut===b)try{var _e=window.document.cookie,tt=encodeURIComponent(ar),it=_e.indexOf(tt+"=");it!==-1&&(ut=/^([^;]+)/.exec(_e.slice(it+tt.length+1))[1])}catch{}return Dt.levels[ut]===void 0&&(ut=void 0),ut}}function ur(){if(!(typeof window===b||!ar)){try{window.localStorage.removeItem(ar)}catch{}try{window.document.cookie=encodeURIComponent(ar)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch{}}}function Ot(ut){var _e=ut;if(typeof _e=="string"&&Dt.levels[_e.toUpperCase()]!==void 0&&(_e=Dt.levels[_e.toUpperCase()]),typeof _e=="number"&&_e>=0&&_e<=Dt.levels.SILENT)return _e;throw new TypeError("log.setLevel() called with invalid level: "+ut)}Dt.name=At,Dt.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},Dt.methodFactory=Mt||kt,Dt.getLevel=function(){return Jt??xt??Rt},Dt.setLevel=function(ut,_e){return Jt=Ot(ut),_e!==!1&&nr(Jt),vt.call(Dt)},Dt.setDefaultLevel=function(ut){xt=Ot(ut),pr()||Dt.setLevel(ut,!1)},Dt.resetLevel=function(){Jt=null,ur(),vt.call(Dt)},Dt.enableAll=function(ut){Dt.setLevel(Dt.levels.TRACE,ut)},Dt.disableAll=function(ut){Dt.setLevel(Dt.levels.SILENT,ut)},Dt.rebuild=function(){if(et!==Dt&&(Rt=Ot(et.getLevel())),vt.call(Dt),et===Dt)for(var ut in k)k[ut].rebuild()},Rt=Ot(et?et.getLevel():"WARN");var It=pr();It!=null&&(Jt=Ot(It)),vt.call(Dt)}et=new $t,et.getLogger=function(Mt){if(typeof Mt!="symbol"&&typeof Mt!="string"||Mt==="")throw new TypeError("You must supply a name when creating a logger.");var Dt=k[Mt];return Dt||(Dt=k[Mt]=new $t(Mt,et.methodFactory)),Dt};var Tt=typeof window!==b?window.log:void 0;return et.noConflict=function(){return typeof window!==b&&window.log===et&&(window.log=Tt),et},et.getLoggers=function(){return k},et.default=et,et})})(loglevel);var loglevelExports=loglevel.exports;const log=getDefaultExportFromCjs$2(loglevelExports),connectionId$1=(Math.random()*1e20).toString(36),version$2="3.0.42",CoreContext={config:null,clients:null,Request:{},Command:{},on,subscribe,onInternal,subscribeInternal,trigger:trigger$1,triggerInternal:triggerInternal$1,state:{},compositor:{},connectionId:connectionId$1,version:version$2,rendererVersion:version$2,log,logLevel:null},setAppState=a=>{Object.keys(a).forEach(c=>{CoreContext.state[c]=a[c]})};var dist={},AccessToken$1={},jws$3={},safeBuffer$4={exports:{}};const require$$0$2=getAugmentedNamespace(dist$3);(function(a,c){var b=require$$0$2,_=b.Buffer;function $(et,nt){for(var ot in et)nt[ot]=et[ot]}_.from&&_.alloc&&_.allocUnsafe&&_.allocUnsafeSlow?a.exports=b:($(b,c),c.Buffer=k);function k(et,nt,ot){return _(et,nt,ot)}$(_,k),k.from=function(et,nt,ot){if(typeof et=="number")throw new TypeError("Argument must not be a number");return _(et,nt,ot)},k.alloc=function(et,nt,ot){if(typeof et!="number")throw new TypeError("Argument must be a number");var ht=_(et);return nt!==void 0?typeof ot=="string"?ht.fill(nt,ot):ht.fill(nt):ht.fill(0),ht},k.allocUnsafe=function(et){if(typeof et!="number")throw new TypeError("Argument must be a number");return _(et)},k.allocUnsafeSlow=function(et){if(typeof et!="number")throw new TypeError("Argument must be a number");return b.SlowBuffer(et)}})(safeBuffer$4,safeBuffer$4.exports);var safeBufferExports$3=safeBuffer$4.exports,events={exports:{}},R$2=typeof Reflect=="object"?Reflect:null,ReflectApply=R$2&&typeof R$2.apply=="function"?R$2.apply:function a(c,b,_){return Function.prototype.apply.call(c,b,_)},ReflectOwnKeys;R$2&&typeof R$2.ownKeys=="function"?ReflectOwnKeys=R$2.ownKeys:Object.getOwnPropertySymbols?ReflectOwnKeys=function(c){return Object.getOwnPropertyNames(c).concat(Object.getOwnPropertySymbols(c))}:ReflectOwnKeys=function(c){return Object.getOwnPropertyNames(c)};function ProcessEmitWarning(a){console&&console.warn&&console.warn(a)}var NumberIsNaN=Number.isNaN||function a(c){return c!==c};function EventEmitter(){EventEmitter.init.call(this)}events.exports=EventEmitter;events.exports.once=once$6;EventEmitter.EventEmitter=EventEmitter;EventEmitter.prototype._events=void 0;EventEmitter.prototype._eventsCount=0;EventEmitter.prototype._maxListeners=void 0;var defaultMaxListeners=10;function checkListener(a){if(typeof a!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof a)}Object.defineProperty(EventEmitter,"defaultMaxListeners",{enumerable:!0,get:function(){return defaultMaxListeners},set:function(a){if(typeof a!="number"||a<0||NumberIsNaN(a))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+a+".");defaultMaxListeners=a}});EventEmitter.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};EventEmitter.prototype.setMaxListeners=function a(c){if(typeof c!="number"||c<0||NumberIsNaN(c))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+c+".");return this._maxListeners=c,this};function _getMaxListeners(a){return a._maxListeners===void 0?EventEmitter.defaultMaxListeners:a._maxListeners}EventEmitter.prototype.getMaxListeners=function a(){return _getMaxListeners(this)};EventEmitter.prototype.emit=function a(c){for(var b=[],_=1;_<arguments.length;_++)b.push(arguments[_]);var $=c==="error",k=this._events;if(k!==void 0)$=$&&k.error===void 0;else if(!$)return!1;if($){var et;if(b.length>0&&(et=b[0]),et instanceof Error)throw et;var nt=new Error("Unhandled error."+(et?" ("+et.message+")":""));throw nt.context=et,nt}var ot=k[c];if(ot===void 0)return!1;if(typeof ot=="function")ReflectApply(ot,this,b);else for(var ht=ot.length,vt=arrayClone(ot,ht),_=0;_<ht;++_)ReflectApply(vt[_],this,b);return!0};function _addListener(a,c,b,_){var $,k,et;if(checkListener(b),k=a._events,k===void 0?(k=a._events=Object.create(null),a._eventsCount=0):(k.newListener!==void 0&&(a.emit("newListener",c,b.listener?b.listener:b),k=a._events),et=k[c]),et===void 0)et=k[c]=b,++a._eventsCount;else if(typeof et=="function"?et=k[c]=_?[b,et]:[et,b]:_?et.unshift(b):et.push(b),$=_getMaxListeners(a),$>0&&et.length>$&&!et.warned){et.warned=!0;var nt=new Error("Possible EventEmitter memory leak detected. "+et.length+" "+String(c)+" listeners added. Use emitter.setMaxListeners() to increase limit");nt.name="MaxListenersExceededWarning",nt.emitter=a,nt.type=c,nt.count=et.length,ProcessEmitWarning(nt)}return a}EventEmitter.prototype.addListener=function a(c,b){return _addListener(this,c,b,!1)};EventEmitter.prototype.on=EventEmitter.prototype.addListener;EventEmitter.prototype.prependListener=function a(c,b){return _addListener(this,c,b,!0)};function onceWrapper(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function _onceWrap(a,c,b){var _={fired:!1,wrapFn:void 0,target:a,type:c,listener:b},$=onceWrapper.bind(_);return $.listener=b,_.wrapFn=$,$}EventEmitter.prototype.once=function a(c,b){return checkListener(b),this.on(c,_onceWrap(this,c,b)),this};EventEmitter.prototype.prependOnceListener=function a(c,b){return checkListener(b),this.prependListener(c,_onceWrap(this,c,b)),this};EventEmitter.prototype.removeListener=function a(c,b){var _,$,k,et,nt;if(checkListener(b),$=this._events,$===void 0)return this;if(_=$[c],_===void 0)return this;if(_===b||_.listener===b)--this._eventsCount===0?this._events=Object.create(null):(delete $[c],$.removeListener&&this.emit("removeListener",c,_.listener||b));else if(typeof _!="function"){for(k=-1,et=_.length-1;et>=0;et--)if(_[et]===b||_[et].listener===b){nt=_[et].listener,k=et;break}if(k<0)return this;k===0?_.shift():spliceOne(_,k),_.length===1&&($[c]=_[0]),$.removeListener!==void 0&&this.emit("removeListener",c,nt||b)}return this};EventEmitter.prototype.off=EventEmitter.prototype.removeListener;EventEmitter.prototype.removeAllListeners=function a(c){var b,_,$;if(_=this._events,_===void 0)return this;if(_.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):_[c]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete _[c]),this;if(arguments.length===0){var k=Object.keys(_),et;for($=0;$<k.length;++$)et=k[$],et!=="removeListener"&&this.removeAllListeners(et);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(b=_[c],typeof b=="function")this.removeListener(c,b);else if(b!==void 0)for($=b.length-1;$>=0;$--)this.removeListener(c,b[$]);return this};function _listeners(a,c,b){var _=a._events;if(_===void 0)return[];var $=_[c];return $===void 0?[]:typeof $=="function"?b?[$.listener||$]:[$]:b?unwrapListeners($):arrayClone($,$.length)}EventEmitter.prototype.listeners=function a(c){return _listeners(this,c,!0)};EventEmitter.prototype.rawListeners=function a(c){return _listeners(this,c,!1)};EventEmitter.listenerCount=function(a,c){return typeof a.listenerCount=="function"?a.listenerCount(c):listenerCount.call(a,c)};EventEmitter.prototype.listenerCount=listenerCount;function listenerCount(a){var c=this._events;if(c!==void 0){var b=c[a];if(typeof b=="function")return 1;if(b!==void 0)return b.length}return 0}EventEmitter.prototype.eventNames=function a(){return this._eventsCount>0?ReflectOwnKeys(this._events):[]};function arrayClone(a,c){for(var b=new Array(c),_=0;_<c;++_)b[_]=a[_];return b}function spliceOne(a,c){for(;c+1<a.length;c++)a[c]=a[c+1];a.pop()}function unwrapListeners(a){for(var c=new Array(a.length),b=0;b<c.length;++b)c[b]=a[b].listener||a[b];return c}function once$6(a,c){return new Promise(function(b,_){function $(et){a.removeListener(c,k),_(et)}function k(){typeof a.removeListener=="function"&&a.removeListener("error",$),b([].slice.call(arguments))}eventTargetAgnosticAddListener(a,c,k,{once:!0}),c!=="error"&&addErrorHandlerIfEventEmitter(a,$,{once:!0})})}function addErrorHandlerIfEventEmitter(a,c,b){typeof a.on=="function"&&eventTargetAgnosticAddListener(a,"error",c,b)}function eventTargetAgnosticAddListener(a,c,b,_){if(typeof a.on=="function")_.once?a.once(c,b):a.on(c,b);else if(typeof a.addEventListener=="function")a.addEventListener(c,function $(k){_.once&&a.removeEventListener(c,$),b(k)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof a)}var eventsExports=events.exports,inherits_browser={exports:{}};typeof Object.create=="function"?inherits_browser.exports=function(c,b){b&&(c.super_=b,c.prototype=Object.create(b.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}))}:inherits_browser.exports=function(c,b){if(b){c.super_=b;var _=function(){};_.prototype=b.prototype,c.prototype=new _,c.prototype.constructor=c}};var inherits_browserExports=inherits_browser.exports,streamBrowser$2,hasRequiredStreamBrowser;function requireStreamBrowser(){return hasRequiredStreamBrowser||(hasRequiredStreamBrowser=1,streamBrowser$2=eventsExports.EventEmitter),streamBrowser$2}var util$4={},types$1={},shams$1=function a(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var c={},b=Symbol("test"),_=Object(b);if(typeof b=="string"||Object.prototype.toString.call(b)!=="[object Symbol]"||Object.prototype.toString.call(_)!=="[object Symbol]")return!1;var $=42;c[b]=$;for(b in c)return!1;if(typeof Object.keys=="function"&&Object.keys(c).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(c).length!==0)return!1;var k=Object.getOwnPropertySymbols(c);if(k.length!==1||k[0]!==b||!Object.prototype.propertyIsEnumerable.call(c,b))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var et=Object.getOwnPropertyDescriptor(c,b);if(et.value!==$||et.enumerable!==!0)return!1}return!0},hasSymbols$2=shams$1,shams=function a(){return hasSymbols$2()&&!!Symbol.toStringTag},esErrors=Error,_eval=EvalError,range=RangeError,ref$1=ReferenceError,syntax=SyntaxError,type=TypeError,uri=URIError,origSymbol=typeof Symbol<"u"&&Symbol,hasSymbolSham=shams$1,hasSymbols$1=function a(){return typeof origSymbol!="function"||typeof Symbol!="function"||typeof origSymbol("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:hasSymbolSham()},test={foo:{}},$Object=Object,hasProto$1=function a(){return{__proto__:test}.foo===test.foo&&!({__proto__:null}instanceof $Object)},ERROR_MESSAGE="Function.prototype.bind called on incompatible ",toStr$3=Object.prototype.toString,max=Math.max,funcType="[object Function]",concatty=function a(c,b){for(var _=[],$=0;$<c.length;$+=1)_[$]=c[$];for(var k=0;k<b.length;k+=1)_[k+c.length]=b[k];return _},slicy=function a(c,b){for(var _=[],$=b||0,k=0;$<c.length;$+=1,k+=1)_[k]=c[$];return _},joiny=function(a,c){for(var b="",_=0;_<a.length;_+=1)b+=a[_],_+1<a.length&&(b+=c);return b},implementation$1=function a(c){var b=this;if(typeof b!="function"||toStr$3.apply(b)!==funcType)throw new TypeError(ERROR_MESSAGE+b);for(var _=slicy(arguments,1),$,k=function(){if(this instanceof $){var vt=b.apply(this,concatty(_,arguments));return Object(vt)===vt?vt:this}return b.apply(c,concatty(_,arguments))},et=max(0,b.length-_.length),nt=[],ot=0;ot<et;ot++)nt[ot]="$"+ot;if($=Function("binder","return function ("+joiny(nt,",")+"){ return binder.apply(this,arguments); }")(k),b.prototype){var ht=function(){};ht.prototype=b.prototype,$.prototype=new ht,ht.prototype=null}return $},implementation=implementation$1,functionBind=Function.prototype.bind||implementation,call$2=Function.prototype.call,$hasOwn=Object.prototype.hasOwnProperty,bind$4=functionBind,hasown=bind$4.call(call$2,$hasOwn),undefined$1,$Error=esErrors,$EvalError=_eval,$RangeError=range,$ReferenceError=ref$1,$SyntaxError$1=syntax,$TypeError$2=type,$URIError=uri,$Function=Function,getEvalledConstructor=function(a){try{return $Function('"use strict"; return ('+a+").constructor;")()}catch{}},$gOPD$1=Object.getOwnPropertyDescriptor;if($gOPD$1)try{$gOPD$1({},"")}catch{$gOPD$1=null}var throwTypeError=function(){throw new $TypeError$2},ThrowTypeError=$gOPD$1?function(){try{return arguments.callee,throwTypeError}catch{try{return $gOPD$1(arguments,"callee").get}catch{return throwTypeError}}}():throwTypeError,hasSymbols=hasSymbols$1(),hasProto=hasProto$1(),getProto$1=Object.getPrototypeOf||(hasProto?function(a){return a.__proto__}:null),needsEval={},TypedArray=typeof Uint8Array>"u"||!getProto$1?undefined$1:getProto$1(Uint8Array),INTRINSICS={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?undefined$1:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?undefined$1:ArrayBuffer,"%ArrayIteratorPrototype%":hasSymbols&&getProto$1?getProto$1([][Symbol.iterator]()):undefined$1,"%AsyncFromSyncIteratorPrototype%":undefined$1,"%AsyncFunction%":needsEval,"%AsyncGenerator%":needsEval,"%AsyncGeneratorFunction%":needsEval,"%AsyncIteratorPrototype%":needsEval,"%Atomics%":typeof Atomics>"u"?undefined$1:Atomics,"%BigInt%":typeof BigInt>"u"?undefined$1:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?undefined$1:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?undefined$1:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?undefined$1:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":$Error,"%eval%":eval,"%EvalError%":$EvalError,"%Float32Array%":typeof Float32Array>"u"?undefined$1:Float32Array,"%Float64Array%":typeof Float64Array>"u"?undefined$1:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?undefined$1:FinalizationRegistry,"%Function%":$Function,"%GeneratorFunction%":needsEval,"%Int8Array%":typeof Int8Array>"u"?undefined$1:Int8Array,"%Int16Array%":typeof Int16Array>"u"?undefined$1:Int16Array,"%Int32Array%":typeof Int32Array>"u"?undefined$1:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":hasSymbols&&getProto$1?getProto$1(getProto$1([][Symbol.iterator]())):undefined$1,"%JSON%":typeof JSON=="object"?JSON:undefined$1,"%Map%":typeof Map>"u"?undefined$1:Map,"%MapIteratorPrototype%":typeof Map>"u"||!hasSymbols||!getProto$1?undefined$1:getProto$1(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?undefined$1:Promise,"%Proxy%":typeof Proxy>"u"?undefined$1:Proxy,"%RangeError%":$RangeError,"%ReferenceError%":$ReferenceError,"%Reflect%":typeof Reflect>"u"?undefined$1:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?undefined$1:Set,"%SetIteratorPrototype%":typeof Set>"u"||!hasSymbols||!getProto$1?undefined$1:getProto$1(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?undefined$1:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":hasSymbols&&getProto$1?getProto$1(""[Symbol.iterator]()):undefined$1,"%Symbol%":hasSymbols?Symbol:undefined$1,"%SyntaxError%":$SyntaxError$1,"%ThrowTypeError%":ThrowTypeError,"%TypedArray%":TypedArray,"%TypeError%":$TypeError$2,"%Uint8Array%":typeof Uint8Array>"u"?undefined$1:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?undefined$1:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?undefined$1:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?undefined$1:Uint32Array,"%URIError%":$URIError,"%WeakMap%":typeof WeakMap>"u"?undefined$1:WeakMap,"%WeakRef%":typeof WeakRef>"u"?undefined$1:WeakRef,"%WeakSet%":typeof WeakSet>"u"?undefined$1:WeakSet};if(getProto$1)try{null.error}catch(a){var errorProto=getProto$1(getProto$1(a));INTRINSICS["%Error.prototype%"]=errorProto}var doEval=function a(c){var b;if(c==="%AsyncFunction%")b=getEvalledConstructor("async function () {}");else if(c==="%GeneratorFunction%")b=getEvalledConstructor("function* () {}");else if(c==="%AsyncGeneratorFunction%")b=getEvalledConstructor("async function* () {}");else if(c==="%AsyncGenerator%"){var _=a("%AsyncGeneratorFunction%");_&&(b=_.prototype)}else if(c==="%AsyncIteratorPrototype%"){var $=a("%AsyncGenerator%");$&&getProto$1&&(b=getProto$1($.prototype))}return INTRINSICS[c]=b,b},LEGACY_ALIASES={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},bind$3=functionBind,hasOwn=hasown,$concat=bind$3.call(Function.call,Array.prototype.concat),$spliceApply=bind$3.call(Function.apply,Array.prototype.splice),$replace=bind$3.call(Function.call,String.prototype.replace),$strSlice=bind$3.call(Function.call,String.prototype.slice),$exec=bind$3.call(Function.call,RegExp.prototype.exec),rePropName=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,reEscapeChar=/\\(\\)?/g,stringToPath=function a(c){var b=$strSlice(c,0,1),_=$strSlice(c,-1);if(b==="%"&&_!=="%")throw new $SyntaxError$1("invalid intrinsic syntax, expected closing `%`");if(_==="%"&&b!=="%")throw new $SyntaxError$1("invalid intrinsic syntax, expected opening `%`");var $=[];return $replace(c,rePropName,function(k,et,nt,ot){$[$.length]=nt?$replace(ot,reEscapeChar,"$1"):et||k}),$},getBaseIntrinsic=function a(c,b){var _=c,$;if(hasOwn(LEGACY_ALIASES,_)&&($=LEGACY_ALIASES[_],_="%"+$[0]+"%"),hasOwn(INTRINSICS,_)){var k=INTRINSICS[_];if(k===needsEval&&(k=doEval(_)),typeof k>"u"&&!b)throw new $TypeError$2("intrinsic "+c+" exists, but is not available. Please file an issue!");return{alias:$,name:_,value:k}}throw new $SyntaxError$1("intrinsic "+c+" does not exist!")},getIntrinsic=function a(c,b){if(typeof c!="string"||c.length===0)throw new $TypeError$2("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof b!="boolean")throw new $TypeError$2('"allowMissing" argument must be a boolean');if($exec(/^%?[^%]*%?$/,c)===null)throw new $SyntaxError$1("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var _=stringToPath(c),$=_.length>0?_[0]:"",k=getBaseIntrinsic("%"+$+"%",b),et=k.name,nt=k.value,ot=!1,ht=k.alias;ht&&($=ht[0],$spliceApply(_,$concat([0,1],ht)));for(var vt=1,_t=!0;vt<_.length;vt+=1){var kt=_[vt],$t=$strSlice(kt,0,1),Tt=$strSlice(kt,-1);if(($t==='"'||$t==="'"||$t==="`"||Tt==='"'||Tt==="'"||Tt==="`")&&$t!==Tt)throw new $SyntaxError$1("property names with quotes must have matching quotes");if((kt==="constructor"||!_t)&&(ot=!0),$+="."+kt,et="%"+$+"%",hasOwn(INTRINSICS,et))nt=INTRINSICS[et];else if(nt!=null){if(!(kt in nt)){if(!b)throw new $TypeError$2("base intrinsic for "+c+" exists, but the property is not available.");return}if($gOPD$1&&vt+1>=_.length){var At=$gOPD$1(nt,kt);_t=!!At,_t&&"get"in At&&!("originalValue"in At.get)?nt=At.get:nt=nt[kt]}else _t=hasOwn(nt,kt),nt=nt[kt];_t&&!ot&&(INTRINSICS[et]=nt)}}return nt},callBind$2={exports:{}},esDefineProperty,hasRequiredEsDefineProperty;function requireEsDefineProperty(){if(hasRequiredEsDefineProperty)return esDefineProperty;hasRequiredEsDefineProperty=1;var a=getIntrinsic,c=a("%Object.defineProperty%",!0)||!1;if(c)try{c({},"a",{value:1})}catch{c=!1}return esDefineProperty=c,esDefineProperty}var GetIntrinsic$2=getIntrinsic,$gOPD=GetIntrinsic$2("%Object.getOwnPropertyDescriptor%",!0);if($gOPD)try{$gOPD([],"length")}catch{$gOPD=null}var gopd$1=$gOPD,$defineProperty$1=requireEsDefineProperty(),$SyntaxError=syntax,$TypeError$1=type,gopd=gopd$1,defineDataProperty=function a(c,b,_){if(!c||typeof c!="object"&&typeof c!="function")throw new $TypeError$1("`obj` must be an object or a function`");if(typeof b!="string"&&typeof b!="symbol")throw new $TypeError$1("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new $TypeError$1("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new $TypeError$1("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new $TypeError$1("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new $TypeError$1("`loose`, if provided, must be a boolean");var $=arguments.length>3?arguments[3]:null,k=arguments.length>4?arguments[4]:null,et=arguments.length>5?arguments[5]:null,nt=arguments.length>6?arguments[6]:!1,ot=!!gopd&&gopd(c,b);if($defineProperty$1)$defineProperty$1(c,b,{configurable:et===null&&ot?ot.configurable:!et,enumerable:$===null&&ot?ot.enumerable:!$,value:_,writable:k===null&&ot?ot.writable:!k});else if(nt||!$&&!k&&!et)c[b]=_;else throw new $SyntaxError("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")},$defineProperty=requireEsDefineProperty(),hasPropertyDescriptors=function a(){return!!$defineProperty};hasPropertyDescriptors.hasArrayLengthDefineBug=function a(){if(!$defineProperty)return null;try{return $defineProperty([],"length",{value:1}).length!==1}catch{return!0}};var hasPropertyDescriptors_1=hasPropertyDescriptors,GetIntrinsic$1=getIntrinsic,define=defineDataProperty,hasDescriptors=hasPropertyDescriptors_1(),gOPD$1=gopd$1,$TypeError=type,$floor=GetIntrinsic$1("%Math.floor%"),setFunctionLength=function a(c,b){if(typeof c!="function")throw new $TypeError("`fn` is not a function");if(typeof b!="number"||b<0||b>4294967295||$floor(b)!==b)throw new $TypeError("`length` must be a positive 32-bit integer");var _=arguments.length>2&&!!arguments[2],$=!0,k=!0;if("length"in c&&gOPD$1){var et=gOPD$1(c,"length");et&&!et.configurable&&($=!1),et&&!et.writable&&(k=!1)}return($||k||!_)&&(hasDescriptors?define(c,"length",b,!0,!0):define(c,"length",b)),c};(function(a){var c=functionBind,b=getIntrinsic,_=setFunctionLength,$=type,k=b("%Function.prototype.apply%"),et=b("%Function.prototype.call%"),nt=b("%Reflect.apply%",!0)||c.call(et,k),ot=requireEsDefineProperty(),ht=b("%Math.max%");a.exports=function(kt){if(typeof kt!="function")throw new $("a function is required");var $t=nt(c,et,arguments);return _($t,1+ht(0,kt.length-(arguments.length-1)),!0)};var vt=function(){return nt(c,k,arguments)};ot?ot(a.exports,"apply",{value:vt}):a.exports.apply=vt})(callBind$2);var callBindExports=callBind$2.exports,GetIntrinsic=getIntrinsic,callBind$1=callBindExports,$indexOf$1=callBind$1(GetIntrinsic("String.prototype.indexOf")),callBound$2=function a(c,b){var _=GetIntrinsic(c,!!b);return typeof _=="function"&&$indexOf$1(c,".prototype.")>-1?callBind$1(_):_},hasToStringTag$3=shams(),callBound$1=callBound$2,$toString$1=callBound$1("Object.prototype.toString"),isStandardArguments=function a(c){return hasToStringTag$3&&c&&typeof c=="object"&&Symbol.toStringTag in c?!1:$toString$1(c)==="[object Arguments]"},isLegacyArguments=function a(c){return isStandardArguments(c)?!0:c!==null&&typeof c=="object"&&typeof c.length=="number"&&c.length>=0&&$toString$1(c)!=="[object Array]"&&$toString$1(c.callee)==="[object Function]"},supportsStandardArguments=function(){return isStandardArguments(arguments)}();isStandardArguments.isLegacyArguments=isLegacyArguments;var isArguments$1=supportsStandardArguments?isStandardArguments:isLegacyArguments,toStr$2=Object.prototype.toString,fnToStr$1=Function.prototype.toString,isFnRegex=/^\s*(?:function)?\*/,hasToStringTag$2=shams(),getProto=Object.getPrototypeOf,getGeneratorFunc=function(){if(!hasToStringTag$2)return!1;try{return Function("return function*() {}")()}catch{}},GeneratorFunction,isGeneratorFunction=function a(c){if(typeof c!="function")return!1;if(isFnRegex.test(fnToStr$1.call(c)))return!0;if(!hasToStringTag$2){var b=toStr$2.call(c);return b==="[object GeneratorFunction]"}if(!getProto)return!1;if(typeof GeneratorFunction>"u"){var _=getGeneratorFunc();GeneratorFunction=_?getProto(_):!1}return getProto(c)===GeneratorFunction},fnToStr=Function.prototype.toString,reflectApply=typeof Reflect=="object"&&Reflect!==null&&Reflect.apply,badArrayLike,isCallableMarker;if(typeof reflectApply=="function"&&typeof Object.defineProperty=="function")try{badArrayLike=Object.defineProperty({},"length",{get:function(){throw isCallableMarker}}),isCallableMarker={},reflectApply(function(){throw 42},null,badArrayLike)}catch(a){a!==isCallableMarker&&(reflectApply=null)}else reflectApply=null;var constructorRegex=/^\s*class\b/,isES6ClassFn=function a(c){try{var b=fnToStr.call(c);return constructorRegex.test(b)}catch{return!1}},tryFunctionObject=function a(c){try{return isES6ClassFn(c)?!1:(fnToStr.call(c),!0)}catch{return!1}},toStr$1=Object.prototype.toString,fnClass="[object Function]",genClass="[object GeneratorFunction]",hasToStringTag$1=typeof Symbol=="function"&&!!Symbol.toStringTag,documentDotAll=typeof document=="object"&&typeof document.all>"u"&&document.all!==void 0?document.all:{},isCallable$1=reflectApply?function a(c){if(c===documentDotAll)return!0;if(!c||typeof c!="function"&&typeof c!="object")return!1;if(typeof c=="function"&&!c.prototype)return!0;try{reflectApply(c,null,badArrayLike)}catch(b){if(b!==isCallableMarker)return!1}return!isES6ClassFn(c)}:function a(c){if(c===documentDotAll)return!0;if(!c||typeof c!="function"&&typeof c!="object")return!1;if(typeof c=="function"&&!c.prototype)return!0;if(hasToStringTag$1)return tryFunctionObject(c);if(isES6ClassFn(c))return!1;var b=toStr$1.call(c);return b===fnClass||b===genClass},isCallable=isCallable$1,toStr=Object.prototype.toString,hasOwnProperty$2=Object.prototype.hasOwnProperty,forEachArray=function a(c,b,_){for(var $=0,k=c.length;$<k;$++)hasOwnProperty$2.call(c,$)&&(_==null?b(c[$],$,c):b.call(_,c[$],$,c))},forEachString=function a(c,b,_){for(var $=0,k=c.length;$<k;$++)_==null?b(c.charAt($),$,c):b.call(_,c.charAt($),$,c)},forEachObject=function a(c,b,_){for(var $ in c)hasOwnProperty$2.call(c,$)&&(_==null?b(c[$],$,c):b.call(_,c[$],$,c))},forEach$2=function a(c,b,_){if(!isCallable(b))throw new TypeError("iterator must be a function");var $;arguments.length>=3&&($=_),toStr.call(c)==="[object Array]"?forEachArray(c,b,$):typeof c=="string"?forEachString(c,b,$):forEachObject(c,b,$)},forEach_1=forEach$2,possibleNames=["BigInt64Array","BigUint64Array","Float32Array","Float64Array","Int16Array","Int32Array","Int8Array","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray"],g$1=typeof globalThis>"u"?commonjsGlobal$1:globalThis,availableTypedArrays$1=function a(){for(var c=[],b=0;b<possibleNames.length;b++)typeof g$1[possibleNames[b]]=="function"&&(c[c.length]=possibleNames[b]);return c},forEach$1=forEach_1,availableTypedArrays=availableTypedArrays$1,callBind=callBindExports,callBound=callBound$2,gOPD=gopd$1,$toString=callBound("Object.prototype.toString"),hasToStringTag=shams(),g=typeof globalThis>"u"?commonjsGlobal$1:globalThis,typedArrays=availableTypedArrays(),$slice=callBound("String.prototype.slice"),getPrototypeOf=Object.getPrototypeOf,$indexOf=callBound("Array.prototype.indexOf",!0)||function a(c,b){for(var _=0;_<c.length;_+=1)if(c[_]===b)return _;return-1},cache$2={__proto__:null};hasToStringTag&&gOPD&&getPrototypeOf?forEach$1(typedArrays,function(a){var c=new g[a];if(Symbol.toStringTag in c){var b=getPrototypeOf(c),_=gOPD(b,Symbol.toStringTag);if(!_){var $=getPrototypeOf(b);_=gOPD($,Symbol.toStringTag)}cache$2["$"+a]=callBind(_.get)}}):forEach$1(typedArrays,function(a){var c=new g[a],b=c.slice||c.set;b&&(cache$2["$"+a]=callBind(b))});var tryTypedArrays=function a(c){var b=!1;return forEach$1(cache$2,function(_,$){if(!b)try{"$"+_(c)===$&&(b=$slice($,1))}catch{}}),b},trySlices=function a(c){var b=!1;return forEach$1(cache$2,function(_,$){if(!b)try{_(c),b=$slice($,1)}catch{}}),b},whichTypedArray$1=function a(c){if(!c||typeof c!="object")return!1;if(!hasToStringTag){var b=$slice($toString(c),8,-1);return $indexOf(typedArrays,b)>-1?b:b!=="Object"?!1:trySlices(c)}return gOPD?tryTypedArrays(c):null},whichTypedArray=whichTypedArray$1,isTypedArray=function a(c){return!!whichTypedArray(c)};(function(a){var c=isArguments$1,b=isGeneratorFunction,_=whichTypedArray$1,$=isTypedArray;function k(gr){return gr.call.bind(gr)}var et=typeof BigInt<"u",nt=typeof Symbol<"u",ot=k(Object.prototype.toString),ht=k(Number.prototype.valueOf),vt=k(String.prototype.valueOf),_t=k(Boolean.prototype.valueOf);if(et)var kt=k(BigInt.prototype.valueOf);if(nt)var $t=k(Symbol.prototype.valueOf);function Tt(gr,Zr){if(typeof gr!="object")return!1;try{return Zr(gr),!0}catch{return!1}}a.isArgumentsObject=c,a.isGeneratorFunction=b,a.isTypedArray=$;function At(gr){return typeof Promise<"u"&&gr instanceof Promise||gr!==null&&typeof gr=="object"&&typeof gr.then=="function"&&typeof gr.catch=="function"}a.isPromise=At;function Mt(gr){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?ArrayBuffer.isView(gr):$(gr)||Gt(gr)}a.isArrayBufferView=Mt;function Dt(gr){return _(gr)==="Uint8Array"}a.isUint8Array=Dt;function Rt(gr){return _(gr)==="Uint8ClampedArray"}a.isUint8ClampedArray=Rt;function xt(gr){return _(gr)==="Uint16Array"}a.isUint16Array=xt;function Jt(gr){return _(gr)==="Uint32Array"}a.isUint32Array=Jt;function ar(gr){return _(gr)==="Int8Array"}a.isInt8Array=ar;function nr(gr){return _(gr)==="Int16Array"}a.isInt16Array=nr;function pr(gr){return _(gr)==="Int32Array"}a.isInt32Array=pr;function ur(gr){return _(gr)==="Float32Array"}a.isFloat32Array=ur;function Ot(gr){return _(gr)==="Float64Array"}a.isFloat64Array=Ot;function It(gr){return _(gr)==="BigInt64Array"}a.isBigInt64Array=It;function ut(gr){return _(gr)==="BigUint64Array"}a.isBigUint64Array=ut;function _e(gr){return ot(gr)==="[object Map]"}_e.working=typeof Map<"u"&&_e(new Map);function tt(gr){return typeof Map>"u"?!1:_e.working?_e(gr):gr instanceof Map}a.isMap=tt;function it(gr){return ot(gr)==="[object Set]"}it.working=typeof Set<"u"&&it(new Set);function dt(gr){return typeof Set>"u"?!1:it.working?it(gr):gr instanceof Set}a.isSet=dt;function lt(gr){return ot(gr)==="[object WeakMap]"}lt.working=typeof WeakMap<"u"&&lt(new WeakMap);function gt(gr){return typeof WeakMap>"u"?!1:lt.working?lt(gr):gr instanceof WeakMap}a.isWeakMap=gt;function Et(gr){return ot(gr)==="[object WeakSet]"}Et.working=typeof WeakSet<"u"&&Et(new WeakSet);function pt(gr){return Et(gr)}a.isWeakSet=pt;function rt(gr){return ot(gr)==="[object ArrayBuffer]"}rt.working=typeof ArrayBuffer<"u"&&rt(new ArrayBuffer);function mt(gr){return typeof ArrayBuffer>"u"?!1:rt.working?rt(gr):gr instanceof ArrayBuffer}a.isArrayBuffer=mt;function Lt(gr){return ot(gr)==="[object DataView]"}Lt.working=typeof ArrayBuffer<"u"&&typeof DataView<"u"&&Lt(new DataView(new ArrayBuffer(1),0,1));function Gt(gr){return typeof DataView>"u"?!1:Lt.working?Lt(gr):gr instanceof DataView}a.isDataView=Gt;var rr=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:void 0;function ir(gr){return ot(gr)==="[object SharedArrayBuffer]"}function Wt(gr){return typeof rr>"u"?!1:(typeof ir.working>"u"&&(ir.working=ir(new rr)),ir.working?ir(gr):gr instanceof rr)}a.isSharedArrayBuffer=Wt;function zt(gr){return ot(gr)==="[object AsyncFunction]"}a.isAsyncFunction=zt;function wt(gr){return ot(gr)==="[object Map Iterator]"}a.isMapIterator=wt;function Vt(gr){return ot(gr)==="[object Set Iterator]"}a.isSetIterator=Vt;function Qt(gr){return ot(gr)==="[object Generator]"}a.isGeneratorObject=Qt;function Nt(gr){return ot(gr)==="[object WebAssembly.Module]"}a.isWebAssemblyCompiledModule=Nt;function st(gr){return Tt(gr,ht)}a.isNumberObject=st;function Ct(gr){return Tt(gr,vt)}a.isStringObject=Ct;function qt(gr){return Tt(gr,_t)}a.isBooleanObject=qt;function cr(gr){return et&&Tt(gr,kt)}a.isBigIntObject=cr;function dr(gr){return nt&&Tt(gr,$t)}a.isSymbolObject=dr;function Er(gr){return st(gr)||Ct(gr)||qt(gr)||cr(gr)||dr(gr)}a.isBoxedPrimitive=Er;function Tr(gr){return typeof Uint8Array<"u"&&(mt(gr)||Wt(gr))}a.isAnyArrayBuffer=Tr,["isProxy","isExternal","isModuleNamespaceObject"].forEach(function(gr){Object.defineProperty(a,gr,{enumerable:!1,value:function(){throw new Error(gr+" is not supported in userland")}})})})(types$1);var isBufferBrowser=function a(c){return c&&typeof c=="object"&&typeof c.copy=="function"&&typeof c.fill=="function"&&typeof c.readUInt8=="function"};(function(a){var c={},b=Object.getOwnPropertyDescriptors||function(rr){for(var ir=Object.keys(rr),Wt={},zt=0;zt<ir.length;zt++)Wt[ir[zt]]=Object.getOwnPropertyDescriptor(rr,ir[zt]);return Wt},_=/%[sdj%]/g;a.format=function(Gt){if(!nr(Gt)){for(var rr=[],ir=0;ir<arguments.length;ir++)rr.push(nt(arguments[ir]));return rr.join(" ")}for(var ir=1,Wt=arguments,zt=Wt.length,wt=String(Gt).replace(_,function(Qt){if(Qt==="%%")return"%";if(ir>=zt)return Qt;switch(Qt){case"%s":return String(Wt[ir++]);case"%d":return Number(Wt[ir++]);case"%j":try{return JSON.stringify(Wt[ir++])}catch{return"[Circular]"}default:return Qt}}),Vt=Wt[ir];ir<zt;Vt=Wt[++ir])xt(Vt)||!It(Vt)?wt+=" "+Vt:wt+=" "+nt(Vt);return wt},a.deprecate=function(Gt,rr){if(typeof process$1<"u"&&process$1.noDeprecation===!0)return Gt;if(typeof process$1>"u")return function(){return a.deprecate(Gt,rr).apply(this,arguments)};var ir=!1;function Wt(){if(!ir){if(process$1.throwDeprecation)throw new Error(rr);process$1.traceDeprecation?console.trace(rr):console.error(rr),ir=!0}return Gt.apply(this,arguments)}return Wt};var $={},k=/^$/;if(c.NODE_DEBUG){var et=c.NODE_DEBUG;et=et.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),k=new RegExp("^"+et+"$","i")}a.debuglog=function(Gt){if(Gt=Gt.toUpperCase(),!$[Gt])if(k.test(Gt)){var rr=process$1.pid;$[Gt]=function(){var ir=a.format.apply(a,arguments);console.error("%s %d: %s",Gt,rr,ir)}}else $[Gt]=function(){};return $[Gt]};function nt(Gt,rr){var ir={seen:[],stylize:ht};return arguments.length>=3&&(ir.depth=arguments[2]),arguments.length>=4&&(ir.colors=arguments[3]),Rt(rr)?ir.showHidden=rr:rr&&a._extend(ir,rr),ur(ir.showHidden)&&(ir.showHidden=!1),ur(ir.depth)&&(ir.depth=2),ur(ir.colors)&&(ir.colors=!1),ur(ir.customInspect)&&(ir.customInspect=!0),ir.colors&&(ir.stylize=ot),_t(ir,Gt,ir.depth)}a.inspect=nt,nt.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},nt.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function ot(Gt,rr){var ir=nt.styles[rr];return ir?"\x1B["+nt.colors[ir][0]+"m"+Gt+"\x1B["+nt.colors[ir][1]+"m":Gt}function ht(Gt,rr){return Gt}function vt(Gt){var rr={};return Gt.forEach(function(ir,Wt){rr[ir]=!0}),rr}function _t(Gt,rr,ir){if(Gt.customInspect&&rr&&tt(rr.inspect)&&rr.inspect!==a.inspect&&!(rr.constructor&&rr.constructor.prototype===rr)){var Wt=rr.inspect(ir,Gt);return nr(Wt)||(Wt=_t(Gt,Wt,ir)),Wt}var zt=kt(Gt,rr);if(zt)return zt;var wt=Object.keys(rr),Vt=vt(wt);if(Gt.showHidden&&(wt=Object.getOwnPropertyNames(rr)),_e(rr)&&(wt.indexOf("message")>=0||wt.indexOf("description")>=0))return $t(rr);if(wt.length===0){if(tt(rr)){var Qt=rr.name?": "+rr.name:"";return Gt.stylize("[Function"+Qt+"]","special")}if(Ot(rr))return Gt.stylize(RegExp.prototype.toString.call(rr),"regexp");if(ut(rr))return Gt.stylize(Date.prototype.toString.call(rr),"date");if(_e(rr))return $t(rr)}var Nt="",st=!1,Ct=["{","}"];if(Dt(rr)&&(st=!0,Ct=["[","]"]),tt(rr)){var qt=rr.name?": "+rr.name:"";Nt=" [Function"+qt+"]"}if(Ot(rr)&&(Nt=" "+RegExp.prototype.toString.call(rr)),ut(rr)&&(Nt=" "+Date.prototype.toUTCString.call(rr)),_e(rr)&&(Nt=" "+$t(rr)),wt.length===0&&(!st||rr.length==0))return Ct[0]+Nt+Ct[1];if(ir<0)return Ot(rr)?Gt.stylize(RegExp.prototype.toString.call(rr),"regexp"):Gt.stylize("[Object]","special");Gt.seen.push(rr);var cr;return st?cr=Tt(Gt,rr,ir,Vt,wt):cr=wt.map(function(dr){return At(Gt,rr,ir,Vt,dr,st)}),Gt.seen.pop(),Mt(cr,Nt,Ct)}function kt(Gt,rr){if(ur(rr))return Gt.stylize("undefined","undefined");if(nr(rr)){var ir="'"+JSON.stringify(rr).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return Gt.stylize(ir,"string")}if(ar(rr))return Gt.stylize(""+rr,"number");if(Rt(rr))return Gt.stylize(""+rr,"boolean");if(xt(rr))return Gt.stylize("null","null")}function $t(Gt){return"["+Error.prototype.toString.call(Gt)+"]"}function Tt(Gt,rr,ir,Wt,zt){for(var wt=[],Vt=0,Qt=rr.length;Vt<Qt;++Vt)pt(rr,String(Vt))?wt.push(At(Gt,rr,ir,Wt,String(Vt),!0)):wt.push("");return zt.forEach(function(Nt){Nt.match(/^\d+$/)||wt.push(At(Gt,rr,ir,Wt,Nt,!0))}),wt}function At(Gt,rr,ir,Wt,zt,wt){var Vt,Qt,Nt;if(Nt=Object.getOwnPropertyDescriptor(rr,zt)||{value:rr[zt]},Nt.get?Nt.set?Qt=Gt.stylize("[Getter/Setter]","special"):Qt=Gt.stylize("[Getter]","special"):Nt.set&&(Qt=Gt.stylize("[Setter]","special")),pt(Wt,zt)||(Vt="["+zt+"]"),Qt||(Gt.seen.indexOf(Nt.value)<0?(xt(ir)?Qt=_t(Gt,Nt.value,null):Qt=_t(Gt,Nt.value,ir-1),Qt.indexOf(`
`)>-1&&(wt?Qt=Qt.split(`
`).map(function(st){return"  "+st}).join(`
`).slice(2):Qt=`
`+Qt.split(`
`).map(function(st){return"   "+st}).join(`
`))):Qt=Gt.stylize("[Circular]","special")),ur(Vt)){if(wt&&zt.match(/^\d+$/))return Qt;Vt=JSON.stringify(""+zt),Vt.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(Vt=Vt.slice(1,-1),Vt=Gt.stylize(Vt,"name")):(Vt=Vt.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),Vt=Gt.stylize(Vt,"string"))}return Vt+": "+Qt}function Mt(Gt,rr,ir){var Wt=Gt.reduce(function(zt,wt){return wt.indexOf(`
`)>=0,zt+wt.replace(/\u001b\[\d\d?m/g,"").length+1},0);return Wt>60?ir[0]+(rr===""?"":rr+`
 `)+" "+Gt.join(`,
  `)+" "+ir[1]:ir[0]+rr+" "+Gt.join(", ")+" "+ir[1]}a.types=types$1;function Dt(Gt){return Array.isArray(Gt)}a.isArray=Dt;function Rt(Gt){return typeof Gt=="boolean"}a.isBoolean=Rt;function xt(Gt){return Gt===null}a.isNull=xt;function Jt(Gt){return Gt==null}a.isNullOrUndefined=Jt;function ar(Gt){return typeof Gt=="number"}a.isNumber=ar;function nr(Gt){return typeof Gt=="string"}a.isString=nr;function pr(Gt){return typeof Gt=="symbol"}a.isSymbol=pr;function ur(Gt){return Gt===void 0}a.isUndefined=ur;function Ot(Gt){return It(Gt)&&dt(Gt)==="[object RegExp]"}a.isRegExp=Ot,a.types.isRegExp=Ot;function It(Gt){return typeof Gt=="object"&&Gt!==null}a.isObject=It;function ut(Gt){return It(Gt)&&dt(Gt)==="[object Date]"}a.isDate=ut,a.types.isDate=ut;function _e(Gt){return It(Gt)&&(dt(Gt)==="[object Error]"||Gt instanceof Error)}a.isError=_e,a.types.isNativeError=_e;function tt(Gt){return typeof Gt=="function"}a.isFunction=tt;function it(Gt){return Gt===null||typeof Gt=="boolean"||typeof Gt=="number"||typeof Gt=="string"||typeof Gt=="symbol"||typeof Gt>"u"}a.isPrimitive=it,a.isBuffer=isBufferBrowser;function dt(Gt){return Object.prototype.toString.call(Gt)}function lt(Gt){return Gt<10?"0"+Gt.toString(10):Gt.toString(10)}var gt=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function Et(){var Gt=new Date,rr=[lt(Gt.getHours()),lt(Gt.getMinutes()),lt(Gt.getSeconds())].join(":");return[Gt.getDate(),gt[Gt.getMonth()],rr].join(" ")}a.log=function(){console.log("%s - %s",Et(),a.format.apply(a,arguments))},a.inherits=inherits_browserExports,a._extend=function(Gt,rr){if(!rr||!It(rr))return Gt;for(var ir=Object.keys(rr),Wt=ir.length;Wt--;)Gt[ir[Wt]]=rr[ir[Wt]];return Gt};function pt(Gt,rr){return Object.prototype.hasOwnProperty.call(Gt,rr)}var rt=typeof Symbol<"u"?Symbol("util.promisify.custom"):void 0;a.promisify=function(rr){if(typeof rr!="function")throw new TypeError('The "original" argument must be of type Function');if(rt&&rr[rt]){var ir=rr[rt];if(typeof ir!="function")throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(ir,rt,{value:ir,enumerable:!1,writable:!1,configurable:!0}),ir}function ir(){for(var Wt,zt,wt=new Promise(function(Nt,st){Wt=Nt,zt=st}),Vt=[],Qt=0;Qt<arguments.length;Qt++)Vt.push(arguments[Qt]);Vt.push(function(Nt,st){Nt?zt(Nt):Wt(st)});try{rr.apply(this,Vt)}catch(Nt){zt(Nt)}return wt}return Object.setPrototypeOf(ir,Object.getPrototypeOf(rr)),rt&&Object.defineProperty(ir,rt,{value:ir,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(ir,b(rr))},a.promisify.custom=rt;function mt(Gt,rr){if(!Gt){var ir=new Error("Promise was rejected with a falsy value");ir.reason=Gt,Gt=ir}return rr(Gt)}function Lt(Gt){if(typeof Gt!="function")throw new TypeError('The "original" argument must be of type Function');function rr(){for(var ir=[],Wt=0;Wt<arguments.length;Wt++)ir.push(arguments[Wt]);var zt=ir.pop();if(typeof zt!="function")throw new TypeError("The last argument must be of type Function");var wt=this,Vt=function(){return zt.apply(wt,arguments)};Gt.apply(this,ir).then(function(Qt){process$1.nextTick(Vt.bind(null,null,Qt))},function(Qt){process$1.nextTick(mt.bind(null,Qt,Vt))})}return Object.setPrototypeOf(rr,Object.getPrototypeOf(Gt)),Object.defineProperties(rr,b(Gt)),rr}a.callbackify=Lt})(util$4);var buffer_list$2,hasRequiredBuffer_list$2;function requireBuffer_list$2(){if(hasRequiredBuffer_list$2)return buffer_list$2;hasRequiredBuffer_list$2=1;function a(Tt,At){var Mt=Object.keys(Tt);if(Object.getOwnPropertySymbols){var Dt=Object.getOwnPropertySymbols(Tt);At&&(Dt=Dt.filter(function(Rt){return Object.getOwnPropertyDescriptor(Tt,Rt).enumerable})),Mt.push.apply(Mt,Dt)}return Mt}function c(Tt){for(var At=1;At<arguments.length;At++){var Mt=arguments[At]!=null?arguments[At]:{};At%2?a(Object(Mt),!0).forEach(function(Dt){b(Tt,Dt,Mt[Dt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Tt,Object.getOwnPropertyDescriptors(Mt)):a(Object(Mt)).forEach(function(Dt){Object.defineProperty(Tt,Dt,Object.getOwnPropertyDescriptor(Mt,Dt))})}return Tt}function b(Tt,At,Mt){return At=et(At),At in Tt?Object.defineProperty(Tt,At,{value:Mt,enumerable:!0,configurable:!0,writable:!0}):Tt[At]=Mt,Tt}function _(Tt,At){if(!(Tt instanceof At))throw new TypeError("Cannot call a class as a function")}function $(Tt,At){for(var Mt=0;Mt<At.length;Mt++){var Dt=At[Mt];Dt.enumerable=Dt.enumerable||!1,Dt.configurable=!0,"value"in Dt&&(Dt.writable=!0),Object.defineProperty(Tt,et(Dt.key),Dt)}}function k(Tt,At,Mt){return At&&$(Tt.prototype,At),Mt&&$(Tt,Mt),Object.defineProperty(Tt,"prototype",{writable:!1}),Tt}function et(Tt){var At=nt(Tt,"string");return typeof At=="symbol"?At:String(At)}function nt(Tt,At){if(typeof Tt!="object"||Tt===null)return Tt;var Mt=Tt[Symbol.toPrimitive];if(Mt!==void 0){var Dt=Mt.call(Tt,At||"default");if(typeof Dt!="object")return Dt;throw new TypeError("@@toPrimitive must return a primitive value.")}return(At==="string"?String:Number)(Tt)}var ot=require$$0$2,ht=ot.Buffer,vt=util$4,_t=vt.inspect,kt=_t&&_t.custom||"inspect";function $t(Tt,At,Mt){ht.prototype.copy.call(Tt,At,Mt)}return buffer_list$2=function(){function Tt(){_(this,Tt),this.head=null,this.tail=null,this.length=0}return k(Tt,[{key:"push",value:function(Mt){var Dt={data:Mt,next:null};this.length>0?this.tail.next=Dt:this.head=Dt,this.tail=Dt,++this.length}},{key:"unshift",value:function(Mt){var Dt={data:Mt,next:this.head};this.length===0&&(this.tail=Dt),this.head=Dt,++this.length}},{key:"shift",value:function(){if(this.length!==0){var Mt=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,Mt}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(Mt){if(this.length===0)return"";for(var Dt=this.head,Rt=""+Dt.data;Dt=Dt.next;)Rt+=Mt+Dt.data;return Rt}},{key:"concat",value:function(Mt){if(this.length===0)return ht.alloc(0);for(var Dt=ht.allocUnsafe(Mt>>>0),Rt=this.head,xt=0;Rt;)$t(Rt.data,Dt,xt),xt+=Rt.data.length,Rt=Rt.next;return Dt}},{key:"consume",value:function(Mt,Dt){var Rt;return Mt<this.head.data.length?(Rt=this.head.data.slice(0,Mt),this.head.data=this.head.data.slice(Mt)):Mt===this.head.data.length?Rt=this.shift():Rt=Dt?this._getString(Mt):this._getBuffer(Mt),Rt}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(Mt){var Dt=this.head,Rt=1,xt=Dt.data;for(Mt-=xt.length;Dt=Dt.next;){var Jt=Dt.data,ar=Mt>Jt.length?Jt.length:Mt;if(ar===Jt.length?xt+=Jt:xt+=Jt.slice(0,Mt),Mt-=ar,Mt===0){ar===Jt.length?(++Rt,Dt.next?this.head=Dt.next:this.head=this.tail=null):(this.head=Dt,Dt.data=Jt.slice(ar));break}++Rt}return this.length-=Rt,xt}},{key:"_getBuffer",value:function(Mt){var Dt=ht.allocUnsafe(Mt),Rt=this.head,xt=1;for(Rt.data.copy(Dt),Mt-=Rt.data.length;Rt=Rt.next;){var Jt=Rt.data,ar=Mt>Jt.length?Jt.length:Mt;if(Jt.copy(Dt,Dt.length-Mt,0,ar),Mt-=ar,Mt===0){ar===Jt.length?(++xt,Rt.next?this.head=Rt.next:this.head=this.tail=null):(this.head=Rt,Rt.data=Jt.slice(ar));break}++xt}return this.length-=xt,Dt}},{key:kt,value:function(Mt,Dt){return _t(this,c(c({},Dt),{},{depth:0,customInspect:!1}))}}]),Tt}(),buffer_list$2}var destroy_1$2,hasRequiredDestroy;function requireDestroy(){if(hasRequiredDestroy)return destroy_1$2;hasRequiredDestroy=1;function a(et,nt){var ot=this,ht=this._readableState&&this._readableState.destroyed,vt=this._writableState&&this._writableState.destroyed;return ht||vt?(nt?nt(et):et&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process$1.nextTick($,this,et)):process$1.nextTick($,this,et)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(et||null,function(_t){!nt&&_t?ot._writableState?ot._writableState.errorEmitted?process$1.nextTick(b,ot):(ot._writableState.errorEmitted=!0,process$1.nextTick(c,ot,_t)):process$1.nextTick(c,ot,_t):nt?(process$1.nextTick(b,ot),nt(_t)):process$1.nextTick(b,ot)}),this)}function c(et,nt){$(et,nt),b(et)}function b(et){et._writableState&&!et._writableState.emitClose||et._readableState&&!et._readableState.emitClose||et.emit("close")}function _(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function $(et,nt){et.emit("error",nt)}function k(et,nt){var ot=et._readableState,ht=et._writableState;ot&&ot.autoDestroy||ht&&ht.autoDestroy?et.destroy(nt):et.emit("error",nt)}return destroy_1$2={destroy:a,undestroy:_,errorOrDestroy:k},destroy_1$2}var errorsBrowser$2={},hasRequiredErrorsBrowser;function requireErrorsBrowser(){if(hasRequiredErrorsBrowser)return errorsBrowser$2;hasRequiredErrorsBrowser=1;function a(nt,ot){nt.prototype=Object.create(ot.prototype),nt.prototype.constructor=nt,nt.__proto__=ot}var c={};function b(nt,ot,ht){ht||(ht=Error);function vt(kt,$t,Tt){return typeof ot=="string"?ot:ot(kt,$t,Tt)}var _t=function(kt){a($t,kt);function $t(Tt,At,Mt){return kt.call(this,vt(Tt,At,Mt))||this}return $t}(ht);_t.prototype.name=ht.name,_t.prototype.code=nt,c[nt]=_t}function _(nt,ot){if(Array.isArray(nt)){var ht=nt.length;return nt=nt.map(function(vt){return String(vt)}),ht>2?"one of ".concat(ot," ").concat(nt.slice(0,ht-1).join(", "),", or ")+nt[ht-1]:ht===2?"one of ".concat(ot," ").concat(nt[0]," or ").concat(nt[1]):"of ".concat(ot," ").concat(nt[0])}else return"of ".concat(ot," ").concat(String(nt))}function $(nt,ot,ht){return nt.substr(!ht||ht<0?0:+ht,ot.length)===ot}function k(nt,ot,ht){return(ht===void 0||ht>nt.length)&&(ht=nt.length),nt.substring(ht-ot.length,ht)===ot}function et(nt,ot,ht){return typeof ht!="number"&&(ht=0),ht+ot.length>nt.length?!1:nt.indexOf(ot,ht)!==-1}return b("ERR_INVALID_OPT_VALUE",function(nt,ot){return'The value "'+ot+'" is invalid for option "'+nt+'"'},TypeError),b("ERR_INVALID_ARG_TYPE",function(nt,ot,ht){var vt;typeof ot=="string"&&$(ot,"not ")?(vt="must not be",ot=ot.replace(/^not /,"")):vt="must be";var _t;if(k(nt," argument"))_t="The ".concat(nt," ").concat(vt," ").concat(_(ot,"type"));else{var kt=et(nt,".")?"property":"argument";_t='The "'.concat(nt,'" ').concat(kt," ").concat(vt," ").concat(_(ot,"type"))}return _t+=". Received type ".concat(typeof ht),_t},TypeError),b("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),b("ERR_METHOD_NOT_IMPLEMENTED",function(nt){return"The "+nt+" method is not implemented"}),b("ERR_STREAM_PREMATURE_CLOSE","Premature close"),b("ERR_STREAM_DESTROYED",function(nt){return"Cannot call "+nt+" after a stream was destroyed"}),b("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),b("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),b("ERR_STREAM_WRITE_AFTER_END","write after end"),b("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),b("ERR_UNKNOWN_ENCODING",function(nt){return"Unknown encoding: "+nt},TypeError),b("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),errorsBrowser$2.codes=c,errorsBrowser$2}var state$4,hasRequiredState;function requireState(){if(hasRequiredState)return state$4;hasRequiredState=1;var a=requireErrorsBrowser().codes.ERR_INVALID_OPT_VALUE;function c(_,$,k){return _.highWaterMark!=null?_.highWaterMark:$?_[k]:null}function b(_,$,k,et){var nt=c($,et,k);if(nt!=null){if(!(isFinite(nt)&&Math.floor(nt)===nt)||nt<0){var ot=et?k:"highWaterMark";throw new a(ot,nt)}return Math.floor(nt)}return _.objectMode?16:16*1024}return state$4={getHighWaterMark:b},state$4}var browser$c=deprecate;function deprecate(a,c){if(config$1("noDeprecation"))return a;var b=!1;function _(){if(!b){if(config$1("throwDeprecation"))throw new Error(c);config$1("traceDeprecation")?console.trace(c):console.warn(c),b=!0}return a.apply(this,arguments)}return _}function config$1(a){try{if(!commonjsGlobal$1.localStorage)return!1}catch{return!1}var c=commonjsGlobal$1.localStorage[a];return c==null?!1:String(c).toLowerCase()==="true"}var _stream_writable$2,hasRequired_stream_writable$2;function require_stream_writable$2(){if(hasRequired_stream_writable$2)return _stream_writable$2;hasRequired_stream_writable$2=1,_stream_writable$2=ur;function a(Wt){var zt=this;this.next=null,this.entry=null,this.finish=function(){ir(zt,Wt)}}var c;ur.WritableState=nr;var b={deprecate:browser$c},_=requireStreamBrowser(),$=require$$0$2.Buffer,k=(typeof commonjsGlobal$1<"u"?commonjsGlobal$1:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function et(Wt){return $.from(Wt)}function nt(Wt){return $.isBuffer(Wt)||Wt instanceof k}var ot=requireDestroy(),ht=requireState(),vt=ht.getHighWaterMark,_t=requireErrorsBrowser().codes,kt=_t.ERR_INVALID_ARG_TYPE,$t=_t.ERR_METHOD_NOT_IMPLEMENTED,Tt=_t.ERR_MULTIPLE_CALLBACK,At=_t.ERR_STREAM_CANNOT_PIPE,Mt=_t.ERR_STREAM_DESTROYED,Dt=_t.ERR_STREAM_NULL_VALUES,Rt=_t.ERR_STREAM_WRITE_AFTER_END,xt=_t.ERR_UNKNOWN_ENCODING,Jt=ot.errorOrDestroy;inherits_browserExports(ur,_);function ar(){}function nr(Wt,zt,wt){c=c||require_stream_duplex$2(),Wt=Wt||{},typeof wt!="boolean"&&(wt=zt instanceof c),this.objectMode=!!Wt.objectMode,wt&&(this.objectMode=this.objectMode||!!Wt.writableObjectMode),this.highWaterMark=vt(this,Wt,"writableHighWaterMark",wt),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var Vt=Wt.decodeStrings===!1;this.decodeStrings=!Vt,this.defaultEncoding=Wt.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(Qt){lt(zt,Qt)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=Wt.emitClose!==!1,this.autoDestroy=!!Wt.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new a(this)}nr.prototype.getBuffer=function(){for(var zt=this.bufferedRequest,wt=[];zt;)wt.push(zt),zt=zt.next;return wt},function(){try{Object.defineProperty(nr.prototype,"buffer",{get:b.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}();var pr;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(pr=Function.prototype[Symbol.hasInstance],Object.defineProperty(ur,Symbol.hasInstance,{value:function(zt){return pr.call(this,zt)?!0:this!==ur?!1:zt&&zt._writableState instanceof nr}})):pr=function(zt){return zt instanceof this};function ur(Wt){c=c||require_stream_duplex$2();var zt=this instanceof c;if(!zt&&!pr.call(ur,this))return new ur(Wt);this._writableState=new nr(Wt,this,zt),this.writable=!0,Wt&&(typeof Wt.write=="function"&&(this._write=Wt.write),typeof Wt.writev=="function"&&(this._writev=Wt.writev),typeof Wt.destroy=="function"&&(this._destroy=Wt.destroy),typeof Wt.final=="function"&&(this._final=Wt.final)),_.call(this)}ur.prototype.pipe=function(){Jt(this,new At)};function Ot(Wt,zt){var wt=new Rt;Jt(Wt,wt),process$1.nextTick(zt,wt)}function It(Wt,zt,wt,Vt){var Qt;return wt===null?Qt=new Dt:typeof wt!="string"&&!zt.objectMode&&(Qt=new kt("chunk",["string","Buffer"],wt)),Qt?(Jt(Wt,Qt),process$1.nextTick(Vt,Qt),!1):!0}ur.prototype.write=function(Wt,zt,wt){var Vt=this._writableState,Qt=!1,Nt=!Vt.objectMode&&nt(Wt);return Nt&&!$.isBuffer(Wt)&&(Wt=et(Wt)),typeof zt=="function"&&(wt=zt,zt=null),Nt?zt="buffer":zt||(zt=Vt.defaultEncoding),typeof wt!="function"&&(wt=ar),Vt.ending?Ot(this,wt):(Nt||It(this,Vt,Wt,wt))&&(Vt.pendingcb++,Qt=_e(this,Vt,Nt,Wt,zt,wt)),Qt},ur.prototype.cork=function(){this._writableState.corked++},ur.prototype.uncork=function(){var Wt=this._writableState;Wt.corked&&(Wt.corked--,!Wt.writing&&!Wt.corked&&!Wt.bufferProcessing&&Wt.bufferedRequest&&pt(this,Wt))},ur.prototype.setDefaultEncoding=function(zt){if(typeof zt=="string"&&(zt=zt.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((zt+"").toLowerCase())>-1))throw new xt(zt);return this._writableState.defaultEncoding=zt,this},Object.defineProperty(ur.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function ut(Wt,zt,wt){return!Wt.objectMode&&Wt.decodeStrings!==!1&&typeof zt=="string"&&(zt=$.from(zt,wt)),zt}Object.defineProperty(ur.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function _e(Wt,zt,wt,Vt,Qt,Nt){if(!wt){var st=ut(zt,Vt,Qt);Vt!==st&&(wt=!0,Qt="buffer",Vt=st)}var Ct=zt.objectMode?1:Vt.length;zt.length+=Ct;var qt=zt.length<zt.highWaterMark;if(qt||(zt.needDrain=!0),zt.writing||zt.corked){var cr=zt.lastBufferedRequest;zt.lastBufferedRequest={chunk:Vt,encoding:Qt,isBuf:wt,callback:Nt,next:null},cr?cr.next=zt.lastBufferedRequest:zt.bufferedRequest=zt.lastBufferedRequest,zt.bufferedRequestCount+=1}else tt(Wt,zt,!1,Ct,Vt,Qt,Nt);return qt}function tt(Wt,zt,wt,Vt,Qt,Nt,st){zt.writelen=Vt,zt.writecb=st,zt.writing=!0,zt.sync=!0,zt.destroyed?zt.onwrite(new Mt("write")):wt?Wt._writev(Qt,zt.onwrite):Wt._write(Qt,Nt,zt.onwrite),zt.sync=!1}function it(Wt,zt,wt,Vt,Qt){--zt.pendingcb,wt?(process$1.nextTick(Qt,Vt),process$1.nextTick(Gt,Wt,zt),Wt._writableState.errorEmitted=!0,Jt(Wt,Vt)):(Qt(Vt),Wt._writableState.errorEmitted=!0,Jt(Wt,Vt),Gt(Wt,zt))}function dt(Wt){Wt.writing=!1,Wt.writecb=null,Wt.length-=Wt.writelen,Wt.writelen=0}function lt(Wt,zt){var wt=Wt._writableState,Vt=wt.sync,Qt=wt.writecb;if(typeof Qt!="function")throw new Tt;if(dt(wt),zt)it(Wt,wt,Vt,zt,Qt);else{var Nt=rt(wt)||Wt.destroyed;!Nt&&!wt.corked&&!wt.bufferProcessing&&wt.bufferedRequest&&pt(Wt,wt),Vt?process$1.nextTick(gt,Wt,wt,Nt,Qt):gt(Wt,wt,Nt,Qt)}}function gt(Wt,zt,wt,Vt){wt||Et(Wt,zt),zt.pendingcb--,Vt(),Gt(Wt,zt)}function Et(Wt,zt){zt.length===0&&zt.needDrain&&(zt.needDrain=!1,Wt.emit("drain"))}function pt(Wt,zt){zt.bufferProcessing=!0;var wt=zt.bufferedRequest;if(Wt._writev&&wt&&wt.next){var Vt=zt.bufferedRequestCount,Qt=new Array(Vt),Nt=zt.corkedRequestsFree;Nt.entry=wt;for(var st=0,Ct=!0;wt;)Qt[st]=wt,wt.isBuf||(Ct=!1),wt=wt.next,st+=1;Qt.allBuffers=Ct,tt(Wt,zt,!0,zt.length,Qt,"",Nt.finish),zt.pendingcb++,zt.lastBufferedRequest=null,Nt.next?(zt.corkedRequestsFree=Nt.next,Nt.next=null):zt.corkedRequestsFree=new a(zt),zt.bufferedRequestCount=0}else{for(;wt;){var qt=wt.chunk,cr=wt.encoding,dr=wt.callback,Er=zt.objectMode?1:qt.length;if(tt(Wt,zt,!1,Er,qt,cr,dr),wt=wt.next,zt.bufferedRequestCount--,zt.writing)break}wt===null&&(zt.lastBufferedRequest=null)}zt.bufferedRequest=wt,zt.bufferProcessing=!1}ur.prototype._write=function(Wt,zt,wt){wt(new $t("_write()"))},ur.prototype._writev=null,ur.prototype.end=function(Wt,zt,wt){var Vt=this._writableState;return typeof Wt=="function"?(wt=Wt,Wt=null,zt=null):typeof zt=="function"&&(wt=zt,zt=null),Wt!=null&&this.write(Wt,zt),Vt.corked&&(Vt.corked=1,this.uncork()),Vt.ending||rr(this,Vt,wt),this},Object.defineProperty(ur.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function rt(Wt){return Wt.ending&&Wt.length===0&&Wt.bufferedRequest===null&&!Wt.finished&&!Wt.writing}function mt(Wt,zt){Wt._final(function(wt){zt.pendingcb--,wt&&Jt(Wt,wt),zt.prefinished=!0,Wt.emit("prefinish"),Gt(Wt,zt)})}function Lt(Wt,zt){!zt.prefinished&&!zt.finalCalled&&(typeof Wt._final=="function"&&!zt.destroyed?(zt.pendingcb++,zt.finalCalled=!0,process$1.nextTick(mt,Wt,zt)):(zt.prefinished=!0,Wt.emit("prefinish")))}function Gt(Wt,zt){var wt=rt(zt);if(wt&&(Lt(Wt,zt),zt.pendingcb===0&&(zt.finished=!0,Wt.emit("finish"),zt.autoDestroy))){var Vt=Wt._readableState;(!Vt||Vt.autoDestroy&&Vt.endEmitted)&&Wt.destroy()}return wt}function rr(Wt,zt,wt){zt.ending=!0,Gt(Wt,zt),wt&&(zt.finished?process$1.nextTick(wt):Wt.once("finish",wt)),zt.ended=!0,Wt.writable=!1}function ir(Wt,zt,wt){var Vt=Wt.entry;for(Wt.entry=null;Vt;){var Qt=Vt.callback;zt.pendingcb--,Qt(wt),Vt=Vt.next}zt.corkedRequestsFree.next=Wt}return Object.defineProperty(ur.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(zt){this._writableState&&(this._writableState.destroyed=zt)}}),ur.prototype.destroy=ot.destroy,ur.prototype._undestroy=ot.undestroy,ur.prototype._destroy=function(Wt,zt){zt(Wt)},_stream_writable$2}var _stream_duplex$2,hasRequired_stream_duplex$2;function require_stream_duplex$2(){if(hasRequired_stream_duplex$2)return _stream_duplex$2;hasRequired_stream_duplex$2=1;var a=Object.keys||function(ht){var vt=[];for(var _t in ht)vt.push(_t);return vt};_stream_duplex$2=et;var c=require_stream_readable$2(),b=require_stream_writable$2();inherits_browserExports(et,c);for(var _=a(b.prototype),$=0;$<_.length;$++){var k=_[$];et.prototype[k]||(et.prototype[k]=b.prototype[k])}function et(ht){if(!(this instanceof et))return new et(ht);c.call(this,ht),b.call(this,ht),this.allowHalfOpen=!0,ht&&(ht.readable===!1&&(this.readable=!1),ht.writable===!1&&(this.writable=!1),ht.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",nt)))}Object.defineProperty(et.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(et.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(et.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function nt(){this._writableState.ended||process$1.nextTick(ot,this)}function ot(ht){ht.end()}return Object.defineProperty(et.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(vt){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=vt,this._writableState.destroyed=vt)}}),_stream_duplex$2}var string_decoder={},safeBuffer$3={exports:{}};/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */(function(a,c){var b=require$$0$2,_=b.Buffer;function $(et,nt){for(var ot in et)nt[ot]=et[ot]}_.from&&_.alloc&&_.allocUnsafe&&_.allocUnsafeSlow?a.exports=b:($(b,c),c.Buffer=k);function k(et,nt,ot){return _(et,nt,ot)}k.prototype=Object.create(_.prototype),$(_,k),k.from=function(et,nt,ot){if(typeof et=="number")throw new TypeError("Argument must not be a number");return _(et,nt,ot)},k.alloc=function(et,nt,ot){if(typeof et!="number")throw new TypeError("Argument must be a number");var ht=_(et);return nt!==void 0?typeof ot=="string"?ht.fill(nt,ot):ht.fill(nt):ht.fill(0),ht},k.allocUnsafe=function(et){if(typeof et!="number")throw new TypeError("Argument must be a number");return _(et)},k.allocUnsafeSlow=function(et){if(typeof et!="number")throw new TypeError("Argument must be a number");return b.SlowBuffer(et)}})(safeBuffer$3,safeBuffer$3.exports);var safeBufferExports$2=safeBuffer$3.exports,Buffer$L=safeBufferExports$2.Buffer,isEncoding=Buffer$L.isEncoding||function(a){switch(a=""+a,a&&a.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function _normalizeEncoding(a){if(!a)return"utf8";for(var c;;)switch(a){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return a;default:if(c)return;a=(""+a).toLowerCase(),c=!0}}function normalizeEncoding(a){var c=_normalizeEncoding(a);if(typeof c!="string"&&(Buffer$L.isEncoding===isEncoding||!isEncoding(a)))throw new Error("Unknown encoding: "+a);return c||a}string_decoder.StringDecoder=StringDecoder$1;function StringDecoder$1(a){this.encoding=normalizeEncoding(a);var c;switch(this.encoding){case"utf16le":this.text=utf16Text,this.end=utf16End,c=4;break;case"utf8":this.fillLast=utf8FillLast,c=4;break;case"base64":this.text=base64Text,this.end=base64End,c=3;break;default:this.write=simpleWrite,this.end=simpleEnd;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=Buffer$L.allocUnsafe(c)}StringDecoder$1.prototype.write=function(a){if(a.length===0)return"";var c,b;if(this.lastNeed){if(c=this.fillLast(a),c===void 0)return"";b=this.lastNeed,this.lastNeed=0}else b=0;return b<a.length?c?c+this.text(a,b):this.text(a,b):c||""};StringDecoder$1.prototype.end=utf8End;StringDecoder$1.prototype.text=utf8Text;StringDecoder$1.prototype.fillLast=function(a){if(this.lastNeed<=a.length)return a.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);a.copy(this.lastChar,this.lastTotal-this.lastNeed,0,a.length),this.lastNeed-=a.length};function utf8CheckByte(a){return a<=127?0:a>>5===6?2:a>>4===14?3:a>>3===30?4:a>>6===2?-1:-2}function utf8CheckIncomplete(a,c,b){var _=c.length-1;if(_<b)return 0;var $=utf8CheckByte(c[_]);return $>=0?($>0&&(a.lastNeed=$-1),$):--_<b||$===-2?0:($=utf8CheckByte(c[_]),$>=0?($>0&&(a.lastNeed=$-2),$):--_<b||$===-2?0:($=utf8CheckByte(c[_]),$>=0?($>0&&($===2?$=0:a.lastNeed=$-3),$):0))}function utf8CheckExtraBytes(a,c,b){if((c[0]&192)!==128)return a.lastNeed=0,"";if(a.lastNeed>1&&c.length>1){if((c[1]&192)!==128)return a.lastNeed=1,"";if(a.lastNeed>2&&c.length>2&&(c[2]&192)!==128)return a.lastNeed=2,""}}function utf8FillLast(a){var c=this.lastTotal-this.lastNeed,b=utf8CheckExtraBytes(this,a);if(b!==void 0)return b;if(this.lastNeed<=a.length)return a.copy(this.lastChar,c,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);a.copy(this.lastChar,c,0,a.length),this.lastNeed-=a.length}function utf8Text(a,c){var b=utf8CheckIncomplete(this,a,c);if(!this.lastNeed)return a.toString("utf8",c);this.lastTotal=b;var _=a.length-(b-this.lastNeed);return a.copy(this.lastChar,0,_),a.toString("utf8",c,_)}function utf8End(a){var c=a&&a.length?this.write(a):"";return this.lastNeed?c+"":c}function utf16Text(a,c){if((a.length-c)%2===0){var b=a.toString("utf16le",c);if(b){var _=b.charCodeAt(b.length-1);if(_>=55296&&_<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=a[a.length-2],this.lastChar[1]=a[a.length-1],b.slice(0,-1)}return b}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=a[a.length-1],a.toString("utf16le",c,a.length-1)}function utf16End(a){var c=a&&a.length?this.write(a):"";if(this.lastNeed){var b=this.lastTotal-this.lastNeed;return c+this.lastChar.toString("utf16le",0,b)}return c}function base64Text(a,c){var b=(a.length-c)%3;return b===0?a.toString("base64",c):(this.lastNeed=3-b,this.lastTotal=3,b===1?this.lastChar[0]=a[a.length-1]:(this.lastChar[0]=a[a.length-2],this.lastChar[1]=a[a.length-1]),a.toString("base64",c,a.length-b))}function base64End(a){var c=a&&a.length?this.write(a):"";return this.lastNeed?c+this.lastChar.toString("base64",0,3-this.lastNeed):c}function simpleWrite(a){return a.toString(this.encoding)}function simpleEnd(a){return a&&a.length?this.write(a):""}var endOfStream$2,hasRequiredEndOfStream;function requireEndOfStream(){if(hasRequiredEndOfStream)return endOfStream$2;hasRequiredEndOfStream=1;var a=requireErrorsBrowser().codes.ERR_STREAM_PREMATURE_CLOSE;function c(k){var et=!1;return function(){if(!et){et=!0;for(var nt=arguments.length,ot=new Array(nt),ht=0;ht<nt;ht++)ot[ht]=arguments[ht];k.apply(this,ot)}}}function b(){}function _(k){return k.setHeader&&typeof k.abort=="function"}function $(k,et,nt){if(typeof et=="function")return $(k,null,et);et||(et={}),nt=c(nt||b);var ot=et.readable||et.readable!==!1&&k.readable,ht=et.writable||et.writable!==!1&&k.writable,vt=function(){k.writable||kt()},_t=k._writableState&&k._writableState.finished,kt=function(){ht=!1,_t=!0,ot||nt.call(k)},$t=k._readableState&&k._readableState.endEmitted,Tt=function(){ot=!1,$t=!0,ht||nt.call(k)},At=function(xt){nt.call(k,xt)},Mt=function(){var xt;if(ot&&!$t)return(!k._readableState||!k._readableState.ended)&&(xt=new a),nt.call(k,xt);if(ht&&!_t)return(!k._writableState||!k._writableState.ended)&&(xt=new a),nt.call(k,xt)},Dt=function(){k.req.on("finish",kt)};return _(k)?(k.on("complete",kt),k.on("abort",Mt),k.req?Dt():k.on("request",Dt)):ht&&!k._writableState&&(k.on("end",vt),k.on("close",vt)),k.on("end",Tt),k.on("finish",kt),et.error!==!1&&k.on("error",At),k.on("close",Mt),function(){k.removeListener("complete",kt),k.removeListener("abort",Mt),k.removeListener("request",Dt),k.req&&k.req.removeListener("finish",kt),k.removeListener("end",vt),k.removeListener("close",vt),k.removeListener("finish",kt),k.removeListener("end",Tt),k.removeListener("error",At),k.removeListener("close",Mt)}}return endOfStream$2=$,endOfStream$2}var async_iterator$2,hasRequiredAsync_iterator$2;function requireAsync_iterator$2(){if(hasRequiredAsync_iterator$2)return async_iterator$2;hasRequiredAsync_iterator$2=1;var a;function c(xt,Jt,ar){return Jt=b(Jt),Jt in xt?Object.defineProperty(xt,Jt,{value:ar,enumerable:!0,configurable:!0,writable:!0}):xt[Jt]=ar,xt}function b(xt){var Jt=_(xt,"string");return typeof Jt=="symbol"?Jt:String(Jt)}function _(xt,Jt){if(typeof xt!="object"||xt===null)return xt;var ar=xt[Symbol.toPrimitive];if(ar!==void 0){var nr=ar.call(xt,Jt||"default");if(typeof nr!="object")return nr;throw new TypeError("@@toPrimitive must return a primitive value.")}return(Jt==="string"?String:Number)(xt)}var $=requireEndOfStream(),k=Symbol("lastResolve"),et=Symbol("lastReject"),nt=Symbol("error"),ot=Symbol("ended"),ht=Symbol("lastPromise"),vt=Symbol("handlePromise"),_t=Symbol("stream");function kt(xt,Jt){return{value:xt,done:Jt}}function $t(xt){var Jt=xt[k];if(Jt!==null){var ar=xt[_t].read();ar!==null&&(xt[ht]=null,xt[k]=null,xt[et]=null,Jt(kt(ar,!1)))}}function Tt(xt){process$1.nextTick($t,xt)}function At(xt,Jt){return function(ar,nr){xt.then(function(){if(Jt[ot]){ar(kt(void 0,!0));return}Jt[vt](ar,nr)},nr)}}var Mt=Object.getPrototypeOf(function(){}),Dt=Object.setPrototypeOf((a={get stream(){return this[_t]},next:function(){var Jt=this,ar=this[nt];if(ar!==null)return Promise.reject(ar);if(this[ot])return Promise.resolve(kt(void 0,!0));if(this[_t].destroyed)return new Promise(function(Ot,It){process$1.nextTick(function(){Jt[nt]?It(Jt[nt]):Ot(kt(void 0,!0))})});var nr=this[ht],pr;if(nr)pr=new Promise(At(nr,this));else{var ur=this[_t].read();if(ur!==null)return Promise.resolve(kt(ur,!1));pr=new Promise(this[vt])}return this[ht]=pr,pr}},c(a,Symbol.asyncIterator,function(){return this}),c(a,"return",function(){var Jt=this;return new Promise(function(ar,nr){Jt[_t].destroy(null,function(pr){if(pr){nr(pr);return}ar(kt(void 0,!0))})})}),a),Mt),Rt=function(Jt){var ar,nr=Object.create(Dt,(ar={},c(ar,_t,{value:Jt,writable:!0}),c(ar,k,{value:null,writable:!0}),c(ar,et,{value:null,writable:!0}),c(ar,nt,{value:null,writable:!0}),c(ar,ot,{value:Jt._readableState.endEmitted,writable:!0}),c(ar,vt,{value:function(ur,Ot){var It=nr[_t].read();It?(nr[ht]=null,nr[k]=null,nr[et]=null,ur(kt(It,!1))):(nr[k]=ur,nr[et]=Ot)},writable:!0}),ar));return nr[ht]=null,$(Jt,function(pr){if(pr&&pr.code!=="ERR_STREAM_PREMATURE_CLOSE"){var ur=nr[et];ur!==null&&(nr[ht]=null,nr[k]=null,nr[et]=null,ur(pr)),nr[nt]=pr;return}var Ot=nr[k];Ot!==null&&(nr[ht]=null,nr[k]=null,nr[et]=null,Ot(kt(void 0,!0))),nr[ot]=!0}),Jt.on("readable",Tt.bind(null,nr)),nr};return async_iterator$2=Rt,async_iterator$2}var fromBrowser$2,hasRequiredFromBrowser$2;function requireFromBrowser$2(){return hasRequiredFromBrowser$2||(hasRequiredFromBrowser$2=1,fromBrowser$2=function(){throw new Error("Readable.from is not available in the browser")}),fromBrowser$2}var _stream_readable$2,hasRequired_stream_readable$2;function require_stream_readable$2(){if(hasRequired_stream_readable$2)return _stream_readable$2;hasRequired_stream_readable$2=1,_stream_readable$2=Ot;var a;Ot.ReadableState=ur,eventsExports.EventEmitter;var c=function(st,Ct){return st.listeners(Ct).length},b=requireStreamBrowser(),_=require$$0$2.Buffer,$=(typeof commonjsGlobal$1<"u"?commonjsGlobal$1:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function k(Nt){return _.from(Nt)}function et(Nt){return _.isBuffer(Nt)||Nt instanceof $}var nt=util$4,ot;nt&&nt.debuglog?ot=nt.debuglog("stream"):ot=function(){};var ht=requireBuffer_list$2(),vt=requireDestroy(),_t=requireState(),kt=_t.getHighWaterMark,$t=requireErrorsBrowser().codes,Tt=$t.ERR_INVALID_ARG_TYPE,At=$t.ERR_STREAM_PUSH_AFTER_EOF,Mt=$t.ERR_METHOD_NOT_IMPLEMENTED,Dt=$t.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,Rt,xt,Jt;inherits_browserExports(Ot,b);var ar=vt.errorOrDestroy,nr=["error","close","destroy","pause","resume"];function pr(Nt,st,Ct){if(typeof Nt.prependListener=="function")return Nt.prependListener(st,Ct);!Nt._events||!Nt._events[st]?Nt.on(st,Ct):Array.isArray(Nt._events[st])?Nt._events[st].unshift(Ct):Nt._events[st]=[Ct,Nt._events[st]]}function ur(Nt,st,Ct){a=a||require_stream_duplex$2(),Nt=Nt||{},typeof Ct!="boolean"&&(Ct=st instanceof a),this.objectMode=!!Nt.objectMode,Ct&&(this.objectMode=this.objectMode||!!Nt.readableObjectMode),this.highWaterMark=kt(this,Nt,"readableHighWaterMark",Ct),this.buffer=new ht,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=Nt.emitClose!==!1,this.autoDestroy=!!Nt.autoDestroy,this.destroyed=!1,this.defaultEncoding=Nt.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,Nt.encoding&&(Rt||(Rt=string_decoder.StringDecoder),this.decoder=new Rt(Nt.encoding),this.encoding=Nt.encoding)}function Ot(Nt){if(a=a||require_stream_duplex$2(),!(this instanceof Ot))return new Ot(Nt);var st=this instanceof a;this._readableState=new ur(Nt,this,st),this.readable=!0,Nt&&(typeof Nt.read=="function"&&(this._read=Nt.read),typeof Nt.destroy=="function"&&(this._destroy=Nt.destroy)),b.call(this)}Object.defineProperty(Ot.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(st){this._readableState&&(this._readableState.destroyed=st)}}),Ot.prototype.destroy=vt.destroy,Ot.prototype._undestroy=vt.undestroy,Ot.prototype._destroy=function(Nt,st){st(Nt)},Ot.prototype.push=function(Nt,st){var Ct=this._readableState,qt;return Ct.objectMode?qt=!0:typeof Nt=="string"&&(st=st||Ct.defaultEncoding,st!==Ct.encoding&&(Nt=_.from(Nt,st),st=""),qt=!0),It(this,Nt,st,!1,qt)},Ot.prototype.unshift=function(Nt){return It(this,Nt,null,!0,!1)};function It(Nt,st,Ct,qt,cr){ot("readableAddChunk",st);var dr=Nt._readableState;if(st===null)dr.reading=!1,lt(Nt,dr);else{var Er;if(cr||(Er=_e(dr,st)),Er)ar(Nt,Er);else if(dr.objectMode||st&&st.length>0)if(typeof st!="string"&&!dr.objectMode&&Object.getPrototypeOf(st)!==_.prototype&&(st=k(st)),qt)dr.endEmitted?ar(Nt,new Dt):ut(Nt,dr,st,!0);else if(dr.ended)ar(Nt,new At);else{if(dr.destroyed)return!1;dr.reading=!1,dr.decoder&&!Ct?(st=dr.decoder.write(st),dr.objectMode||st.length!==0?ut(Nt,dr,st,!1):pt(Nt,dr)):ut(Nt,dr,st,!1)}else qt||(dr.reading=!1,pt(Nt,dr))}return!dr.ended&&(dr.length<dr.highWaterMark||dr.length===0)}function ut(Nt,st,Ct,qt){st.flowing&&st.length===0&&!st.sync?(st.awaitDrain=0,Nt.emit("data",Ct)):(st.length+=st.objectMode?1:Ct.length,qt?st.buffer.unshift(Ct):st.buffer.push(Ct),st.needReadable&&gt(Nt)),pt(Nt,st)}function _e(Nt,st){var Ct;return!et(st)&&typeof st!="string"&&st!==void 0&&!Nt.objectMode&&(Ct=new Tt("chunk",["string","Buffer","Uint8Array"],st)),Ct}Ot.prototype.isPaused=function(){return this._readableState.flowing===!1},Ot.prototype.setEncoding=function(Nt){Rt||(Rt=string_decoder.StringDecoder);var st=new Rt(Nt);this._readableState.decoder=st,this._readableState.encoding=this._readableState.decoder.encoding;for(var Ct=this._readableState.buffer.head,qt="";Ct!==null;)qt+=st.write(Ct.data),Ct=Ct.next;return this._readableState.buffer.clear(),qt!==""&&this._readableState.buffer.push(qt),this._readableState.length=qt.length,this};var tt=1073741824;function it(Nt){return Nt>=tt?Nt=tt:(Nt--,Nt|=Nt>>>1,Nt|=Nt>>>2,Nt|=Nt>>>4,Nt|=Nt>>>8,Nt|=Nt>>>16,Nt++),Nt}function dt(Nt,st){return Nt<=0||st.length===0&&st.ended?0:st.objectMode?1:Nt!==Nt?st.flowing&&st.length?st.buffer.head.data.length:st.length:(Nt>st.highWaterMark&&(st.highWaterMark=it(Nt)),Nt<=st.length?Nt:st.ended?st.length:(st.needReadable=!0,0))}Ot.prototype.read=function(Nt){ot("read",Nt),Nt=parseInt(Nt,10);var st=this._readableState,Ct=Nt;if(Nt!==0&&(st.emittedReadable=!1),Nt===0&&st.needReadable&&((st.highWaterMark!==0?st.length>=st.highWaterMark:st.length>0)||st.ended))return ot("read: emitReadable",st.length,st.ended),st.length===0&&st.ended?wt(this):gt(this),null;if(Nt=dt(Nt,st),Nt===0&&st.ended)return st.length===0&&wt(this),null;var qt=st.needReadable;ot("need readable",qt),(st.length===0||st.length-Nt<st.highWaterMark)&&(qt=!0,ot("length less than watermark",qt)),st.ended||st.reading?(qt=!1,ot("reading or ended",qt)):qt&&(ot("do read"),st.reading=!0,st.sync=!0,st.length===0&&(st.needReadable=!0),this._read(st.highWaterMark),st.sync=!1,st.reading||(Nt=dt(Ct,st)));var cr;return Nt>0?cr=zt(Nt,st):cr=null,cr===null?(st.needReadable=st.length<=st.highWaterMark,Nt=0):(st.length-=Nt,st.awaitDrain=0),st.length===0&&(st.ended||(st.needReadable=!0),Ct!==Nt&&st.ended&&wt(this)),cr!==null&&this.emit("data",cr),cr};function lt(Nt,st){if(ot("onEofChunk"),!st.ended){if(st.decoder){var Ct=st.decoder.end();Ct&&Ct.length&&(st.buffer.push(Ct),st.length+=st.objectMode?1:Ct.length)}st.ended=!0,st.sync?gt(Nt):(st.needReadable=!1,st.emittedReadable||(st.emittedReadable=!0,Et(Nt)))}}function gt(Nt){var st=Nt._readableState;ot("emitReadable",st.needReadable,st.emittedReadable),st.needReadable=!1,st.emittedReadable||(ot("emitReadable",st.flowing),st.emittedReadable=!0,process$1.nextTick(Et,Nt))}function Et(Nt){var st=Nt._readableState;ot("emitReadable_",st.destroyed,st.length,st.ended),!st.destroyed&&(st.length||st.ended)&&(Nt.emit("readable"),st.emittedReadable=!1),st.needReadable=!st.flowing&&!st.ended&&st.length<=st.highWaterMark,Wt(Nt)}function pt(Nt,st){st.readingMore||(st.readingMore=!0,process$1.nextTick(rt,Nt,st))}function rt(Nt,st){for(;!st.reading&&!st.ended&&(st.length<st.highWaterMark||st.flowing&&st.length===0);){var Ct=st.length;if(ot("maybeReadMore read 0"),Nt.read(0),Ct===st.length)break}st.readingMore=!1}Ot.prototype._read=function(Nt){ar(this,new Mt("_read()"))},Ot.prototype.pipe=function(Nt,st){var Ct=this,qt=this._readableState;switch(qt.pipesCount){case 0:qt.pipes=Nt;break;case 1:qt.pipes=[qt.pipes,Nt];break;default:qt.pipes.push(Nt);break}qt.pipesCount+=1,ot("pipe count=%d opts=%j",qt.pipesCount,st);var cr=(!st||st.end!==!1)&&Nt!==process$1.stdout&&Nt!==process$1.stderr,dr=cr?Tr:kr;qt.endEmitted?process$1.nextTick(dr):Ct.once("end",dr),Nt.on("unpipe",Er);function Er(tr,bt){ot("onunpipe"),tr===Ct&&bt&&bt.hasUnpiped===!1&&(bt.hasUnpiped=!0,Pr())}function Tr(){ot("onend"),Nt.end()}var gr=mt(Ct);Nt.on("drain",gr);var Zr=!1;function Pr(){ot("cleanup"),Nt.removeListener("close",Kt),Nt.removeListener("finish",er),Nt.removeListener("drain",gr),Nt.removeListener("error",St),Nt.removeListener("unpipe",Er),Ct.removeListener("end",Tr),Ct.removeListener("end",kr),Ct.removeListener("data",_r),Zr=!0,qt.awaitDrain&&(!Nt._writableState||Nt._writableState.needDrain)&&gr()}Ct.on("data",_r);function _r(tr){ot("ondata");var bt=Nt.write(tr);ot("dest.write",bt),bt===!1&&((qt.pipesCount===1&&qt.pipes===Nt||qt.pipesCount>1&&Qt(qt.pipes,Nt)!==-1)&&!Zr&&(ot("false write response, pause",qt.awaitDrain),qt.awaitDrain++),Ct.pause())}function St(tr){ot("onerror",tr),kr(),Nt.removeListener("error",St),c(Nt,"error")===0&&ar(Nt,tr)}pr(Nt,"error",St);function Kt(){Nt.removeListener("finish",er),kr()}Nt.once("close",Kt);function er(){ot("onfinish"),Nt.removeListener("close",Kt),kr()}Nt.once("finish",er);function kr(){ot("unpipe"),Ct.unpipe(Nt)}return Nt.emit("pipe",Ct),qt.flowing||(ot("pipe resume"),Ct.resume()),Nt};function mt(Nt){return function(){var Ct=Nt._readableState;ot("pipeOnDrain",Ct.awaitDrain),Ct.awaitDrain&&Ct.awaitDrain--,Ct.awaitDrain===0&&c(Nt,"data")&&(Ct.flowing=!0,Wt(Nt))}}Ot.prototype.unpipe=function(Nt){var st=this._readableState,Ct={hasUnpiped:!1};if(st.pipesCount===0)return this;if(st.pipesCount===1)return Nt&&Nt!==st.pipes?this:(Nt||(Nt=st.pipes),st.pipes=null,st.pipesCount=0,st.flowing=!1,Nt&&Nt.emit("unpipe",this,Ct),this);if(!Nt){var qt=st.pipes,cr=st.pipesCount;st.pipes=null,st.pipesCount=0,st.flowing=!1;for(var dr=0;dr<cr;dr++)qt[dr].emit("unpipe",this,{hasUnpiped:!1});return this}var Er=Qt(st.pipes,Nt);return Er===-1?this:(st.pipes.splice(Er,1),st.pipesCount-=1,st.pipesCount===1&&(st.pipes=st.pipes[0]),Nt.emit("unpipe",this,Ct),this)},Ot.prototype.on=function(Nt,st){var Ct=b.prototype.on.call(this,Nt,st),qt=this._readableState;return Nt==="data"?(qt.readableListening=this.listenerCount("readable")>0,qt.flowing!==!1&&this.resume()):Nt==="readable"&&!qt.endEmitted&&!qt.readableListening&&(qt.readableListening=qt.needReadable=!0,qt.flowing=!1,qt.emittedReadable=!1,ot("on readable",qt.length,qt.reading),qt.length?gt(this):qt.reading||process$1.nextTick(Gt,this)),Ct},Ot.prototype.addListener=Ot.prototype.on,Ot.prototype.removeListener=function(Nt,st){var Ct=b.prototype.removeListener.call(this,Nt,st);return Nt==="readable"&&process$1.nextTick(Lt,this),Ct},Ot.prototype.removeAllListeners=function(Nt){var st=b.prototype.removeAllListeners.apply(this,arguments);return(Nt==="readable"||Nt===void 0)&&process$1.nextTick(Lt,this),st};function Lt(Nt){var st=Nt._readableState;st.readableListening=Nt.listenerCount("readable")>0,st.resumeScheduled&&!st.paused?st.flowing=!0:Nt.listenerCount("data")>0&&Nt.resume()}function Gt(Nt){ot("readable nexttick read 0"),Nt.read(0)}Ot.prototype.resume=function(){var Nt=this._readableState;return Nt.flowing||(ot("resume"),Nt.flowing=!Nt.readableListening,rr(this,Nt)),Nt.paused=!1,this};function rr(Nt,st){st.resumeScheduled||(st.resumeScheduled=!0,process$1.nextTick(ir,Nt,st))}function ir(Nt,st){ot("resume",st.reading),st.reading||Nt.read(0),st.resumeScheduled=!1,Nt.emit("resume"),Wt(Nt),st.flowing&&!st.reading&&Nt.read(0)}Ot.prototype.pause=function(){return ot("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(ot("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function Wt(Nt){var st=Nt._readableState;for(ot("flow",st.flowing);st.flowing&&Nt.read()!==null;);}Ot.prototype.wrap=function(Nt){var st=this,Ct=this._readableState,qt=!1;Nt.on("end",function(){if(ot("wrapped end"),Ct.decoder&&!Ct.ended){var Er=Ct.decoder.end();Er&&Er.length&&st.push(Er)}st.push(null)}),Nt.on("data",function(Er){if(ot("wrapped data"),Ct.decoder&&(Er=Ct.decoder.write(Er)),!(Ct.objectMode&&Er==null)&&!(!Ct.objectMode&&(!Er||!Er.length))){var Tr=st.push(Er);Tr||(qt=!0,Nt.pause())}});for(var cr in Nt)this[cr]===void 0&&typeof Nt[cr]=="function"&&(this[cr]=function(Tr){return function(){return Nt[Tr].apply(Nt,arguments)}}(cr));for(var dr=0;dr<nr.length;dr++)Nt.on(nr[dr],this.emit.bind(this,nr[dr]));return this._read=function(Er){ot("wrapped _read",Er),qt&&(qt=!1,Nt.resume())},this},typeof Symbol=="function"&&(Ot.prototype[Symbol.asyncIterator]=function(){return xt===void 0&&(xt=requireAsync_iterator$2()),xt(this)}),Object.defineProperty(Ot.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(Ot.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(Ot.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(st){this._readableState&&(this._readableState.flowing=st)}}),Ot._fromList=zt,Object.defineProperty(Ot.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function zt(Nt,st){if(st.length===0)return null;var Ct;return st.objectMode?Ct=st.buffer.shift():!Nt||Nt>=st.length?(st.decoder?Ct=st.buffer.join(""):st.buffer.length===1?Ct=st.buffer.first():Ct=st.buffer.concat(st.length),st.buffer.clear()):Ct=st.buffer.consume(Nt,st.decoder),Ct}function wt(Nt){var st=Nt._readableState;ot("endReadable",st.endEmitted),st.endEmitted||(st.ended=!0,process$1.nextTick(Vt,st,Nt))}function Vt(Nt,st){if(ot("endReadableNT",Nt.endEmitted,Nt.length),!Nt.endEmitted&&Nt.length===0&&(Nt.endEmitted=!0,st.readable=!1,st.emit("end"),Nt.autoDestroy)){var Ct=st._writableState;(!Ct||Ct.autoDestroy&&Ct.finished)&&st.destroy()}}typeof Symbol=="function"&&(Ot.from=function(Nt,st){return Jt===void 0&&(Jt=requireFromBrowser$2()),Jt(Ot,Nt,st)});function Qt(Nt,st){for(var Ct=0,qt=Nt.length;Ct<qt;Ct++)if(Nt[Ct]===st)return Ct;return-1}return _stream_readable$2}var _stream_transform$2,hasRequired_stream_transform;function require_stream_transform(){if(hasRequired_stream_transform)return _stream_transform$2;hasRequired_stream_transform=1,_stream_transform$2=nt;var a=requireErrorsBrowser().codes,c=a.ERR_METHOD_NOT_IMPLEMENTED,b=a.ERR_MULTIPLE_CALLBACK,_=a.ERR_TRANSFORM_ALREADY_TRANSFORMING,$=a.ERR_TRANSFORM_WITH_LENGTH_0,k=require_stream_duplex$2();inherits_browserExports(nt,k);function et(vt,_t){var kt=this._transformState;kt.transforming=!1;var $t=kt.writecb;if($t===null)return this.emit("error",new b);kt.writechunk=null,kt.writecb=null,_t!=null&&this.push(_t),$t(vt);var Tt=this._readableState;Tt.reading=!1,(Tt.needReadable||Tt.length<Tt.highWaterMark)&&this._read(Tt.highWaterMark)}function nt(vt){if(!(this instanceof nt))return new nt(vt);k.call(this,vt),this._transformState={afterTransform:et.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,vt&&(typeof vt.transform=="function"&&(this._transform=vt.transform),typeof vt.flush=="function"&&(this._flush=vt.flush)),this.on("prefinish",ot)}function ot(){var vt=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(_t,kt){ht(vt,_t,kt)}):ht(this,null,null)}nt.prototype.push=function(vt,_t){return this._transformState.needTransform=!1,k.prototype.push.call(this,vt,_t)},nt.prototype._transform=function(vt,_t,kt){kt(new c("_transform()"))},nt.prototype._write=function(vt,_t,kt){var $t=this._transformState;if($t.writecb=kt,$t.writechunk=vt,$t.writeencoding=_t,!$t.transforming){var Tt=this._readableState;($t.needTransform||Tt.needReadable||Tt.length<Tt.highWaterMark)&&this._read(Tt.highWaterMark)}},nt.prototype._read=function(vt){var _t=this._transformState;_t.writechunk!==null&&!_t.transforming?(_t.transforming=!0,this._transform(_t.writechunk,_t.writeencoding,_t.afterTransform)):_t.needTransform=!0},nt.prototype._destroy=function(vt,_t){k.prototype._destroy.call(this,vt,function(kt){_t(kt)})};function ht(vt,_t,kt){if(_t)return vt.emit("error",_t);if(kt!=null&&vt.push(kt),vt._writableState.length)throw new $;if(vt._transformState.transforming)throw new _;return vt.push(null)}return _stream_transform$2}var _stream_passthrough$2,hasRequired_stream_passthrough;function require_stream_passthrough(){if(hasRequired_stream_passthrough)return _stream_passthrough$2;hasRequired_stream_passthrough=1,_stream_passthrough$2=c;var a=require_stream_transform();inherits_browserExports(c,a);function c(b){if(!(this instanceof c))return new c(b);a.call(this,b)}return c.prototype._transform=function(b,_,$){$(null,b)},_stream_passthrough$2}var pipeline_1$2,hasRequiredPipeline;function requirePipeline(){if(hasRequiredPipeline)return pipeline_1$2;hasRequiredPipeline=1;var a;function c(kt){var $t=!1;return function(){$t||($t=!0,kt.apply(void 0,arguments))}}var b=requireErrorsBrowser().codes,_=b.ERR_MISSING_ARGS,$=b.ERR_STREAM_DESTROYED;function k(kt){if(kt)throw kt}function et(kt){return kt.setHeader&&typeof kt.abort=="function"}function nt(kt,$t,Tt,At){At=c(At);var Mt=!1;kt.on("close",function(){Mt=!0}),a===void 0&&(a=requireEndOfStream()),a(kt,{readable:$t,writable:Tt},function(Rt){if(Rt)return At(Rt);Mt=!0,At()});var Dt=!1;return function(Rt){if(!Mt&&!Dt){if(Dt=!0,et(kt))return kt.abort();if(typeof kt.destroy=="function")return kt.destroy();At(Rt||new $("pipe"))}}}function ot(kt){kt()}function ht(kt,$t){return kt.pipe($t)}function vt(kt){return!kt.length||typeof kt[kt.length-1]!="function"?k:kt.pop()}function _t(){for(var kt=arguments.length,$t=new Array(kt),Tt=0;Tt<kt;Tt++)$t[Tt]=arguments[Tt];var At=vt($t);if(Array.isArray($t[0])&&($t=$t[0]),$t.length<2)throw new _("streams");var Mt,Dt=$t.map(function(Rt,xt){var Jt=xt<$t.length-1,ar=xt>0;return nt(Rt,Jt,ar,function(nr){Mt||(Mt=nr),nr&&Dt.forEach(ot),!Jt&&(Dt.forEach(ot),At(Mt))})});return $t.reduce(ht)}return pipeline_1$2=_t,pipeline_1$2}var streamBrowserify=Stream$3,EE=eventsExports.EventEmitter,inherits$v=inherits_browserExports;inherits$v(Stream$3,EE);Stream$3.Readable=require_stream_readable$2();Stream$3.Writable=require_stream_writable$2();Stream$3.Duplex=require_stream_duplex$2();Stream$3.Transform=require_stream_transform();Stream$3.PassThrough=require_stream_passthrough();Stream$3.finished=requireEndOfStream();Stream$3.pipeline=requirePipeline();Stream$3.Stream=Stream$3;function Stream$3(){EE.call(this)}Stream$3.prototype.pipe=function(a,c){var b=this;function _(vt){a.writable&&a.write(vt)===!1&&b.pause&&b.pause()}b.on("data",_);function $(){b.readable&&b.resume&&b.resume()}a.on("drain",$),!a._isStdio&&(!c||c.end!==!1)&&(b.on("end",et),b.on("close",nt));var k=!1;function et(){k||(k=!0,a.end())}function nt(){k||(k=!0,typeof a.destroy=="function"&&a.destroy())}function ot(vt){if(ht(),EE.listenerCount(this,"error")===0)throw vt}b.on("error",ot),a.on("error",ot);function ht(){b.removeListener("data",_),a.removeListener("drain",$),b.removeListener("end",et),b.removeListener("close",nt),b.removeListener("error",ot),a.removeListener("error",ot),b.removeListener("end",ht),b.removeListener("close",ht),a.removeListener("close",ht)}return b.on("end",ht),b.on("close",ht),a.on("close",ht),a.emit("pipe",b),a};var Buffer$K=safeBufferExports$3.Buffer,Stream$2=streamBrowserify,util$3=util$4;function DataStream$2(a){if(this.buffer=null,this.writable=!0,this.readable=!0,!a)return this.buffer=Buffer$K.alloc(0),this;if(typeof a.pipe=="function")return this.buffer=Buffer$K.alloc(0),a.pipe(this),this;if(a.length||typeof a=="object")return this.buffer=a,this.writable=!1,process$1.nextTick((function(){this.emit("end",a),this.readable=!1,this.emit("close")}).bind(this)),this;throw new TypeError("Unexpected data type ("+typeof a+")")}util$3.inherits(DataStream$2,Stream$2);DataStream$2.prototype.write=function a(c){this.buffer=Buffer$K.concat([this.buffer,Buffer$K.from(c)]),this.emit("data",c)};DataStream$2.prototype.end=function a(c){c&&this.write(c),this.emit("end",c),this.emit("close"),this.writable=!1,this.readable=!1};var dataStream=DataStream$2,Buffer$J=require$$0$2.Buffer,SlowBuffer=require$$0$2.SlowBuffer,bufferEqualConstantTime=bufferEq;function bufferEq(a,c){if(!Buffer$J.isBuffer(a)||!Buffer$J.isBuffer(c)||a.length!==c.length)return!1;for(var b=0,_=0;_<a.length;_++)b|=a[_]^c[_];return b===0}bufferEq.install=function(){Buffer$J.prototype.equal=SlowBuffer.prototype.equal=function(c){return bufferEq(this,c)}};var origBufEqual=Buffer$J.prototype.equal,origSlowBufEqual=SlowBuffer.prototype.equal;bufferEq.restore=function(){Buffer$J.prototype.equal=origBufEqual,SlowBuffer.prototype.equal=origSlowBufEqual};var cryptoBrowserify={},browser$b={exports:{}},MAX_BYTES=65536,MAX_UINT32=4294967295;function oldBrowser$1(){throw new Error(`Secure random number generation is not supported by this browser.
Use Chrome, Firefox or Internet Explorer 11`)}var Buffer$I=safeBufferExports$3.Buffer,crypto$3=commonjsGlobal$1.crypto||commonjsGlobal$1.msCrypto;crypto$3&&crypto$3.getRandomValues?browser$b.exports=randomBytes$2:browser$b.exports=oldBrowser$1;function randomBytes$2(a,c){if(a>MAX_UINT32)throw new RangeError("requested too many random bytes");var b=Buffer$I.allocUnsafe(a);if(a>0)if(a>MAX_BYTES)for(var _=0;_<a;_+=MAX_BYTES)crypto$3.getRandomValues(b.slice(_,_+MAX_BYTES));else crypto$3.getRandomValues(b);return typeof c=="function"?process$1.nextTick(function(){c(null,b)}):b}var browserExports=browser$b.exports,safeBuffer$2={exports:{}};/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */(function(a,c){var b=require$$0$2,_=b.Buffer;function $(et,nt){for(var ot in et)nt[ot]=et[ot]}_.from&&_.alloc&&_.allocUnsafe&&_.allocUnsafeSlow?a.exports=b:($(b,c),c.Buffer=k);function k(et,nt,ot){return _(et,nt,ot)}k.prototype=Object.create(_.prototype),$(_,k),k.from=function(et,nt,ot){if(typeof et=="number")throw new TypeError("Argument must not be a number");return _(et,nt,ot)},k.alloc=function(et,nt,ot){if(typeof et!="number")throw new TypeError("Argument must be a number");var ht=_(et);return nt!==void 0?typeof ot=="string"?ht.fill(nt,ot):ht.fill(nt):ht.fill(0),ht},k.allocUnsafe=function(et){if(typeof et!="number")throw new TypeError("Argument must be a number");return _(et)},k.allocUnsafeSlow=function(et){if(typeof et!="number")throw new TypeError("Argument must be a number");return b.SlowBuffer(et)}})(safeBuffer$2,safeBuffer$2.exports);var safeBufferExports$1=safeBuffer$2.exports,readableBrowser$1={exports:{}},streamBrowser$1=eventsExports.EventEmitter,buffer_list$1,hasRequiredBuffer_list$1;function requireBuffer_list$1(){if(hasRequiredBuffer_list$1)return buffer_list$1;hasRequiredBuffer_list$1=1;function a(Tt,At){var Mt=Object.keys(Tt);if(Object.getOwnPropertySymbols){var Dt=Object.getOwnPropertySymbols(Tt);At&&(Dt=Dt.filter(function(Rt){return Object.getOwnPropertyDescriptor(Tt,Rt).enumerable})),Mt.push.apply(Mt,Dt)}return Mt}function c(Tt){for(var At=1;At<arguments.length;At++){var Mt=arguments[At]!=null?arguments[At]:{};At%2?a(Object(Mt),!0).forEach(function(Dt){b(Tt,Dt,Mt[Dt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Tt,Object.getOwnPropertyDescriptors(Mt)):a(Object(Mt)).forEach(function(Dt){Object.defineProperty(Tt,Dt,Object.getOwnPropertyDescriptor(Mt,Dt))})}return Tt}function b(Tt,At,Mt){return At=et(At),At in Tt?Object.defineProperty(Tt,At,{value:Mt,enumerable:!0,configurable:!0,writable:!0}):Tt[At]=Mt,Tt}function _(Tt,At){if(!(Tt instanceof At))throw new TypeError("Cannot call a class as a function")}function $(Tt,At){for(var Mt=0;Mt<At.length;Mt++){var Dt=At[Mt];Dt.enumerable=Dt.enumerable||!1,Dt.configurable=!0,"value"in Dt&&(Dt.writable=!0),Object.defineProperty(Tt,et(Dt.key),Dt)}}function k(Tt,At,Mt){return At&&$(Tt.prototype,At),Mt&&$(Tt,Mt),Object.defineProperty(Tt,"prototype",{writable:!1}),Tt}function et(Tt){var At=nt(Tt,"string");return typeof At=="symbol"?At:String(At)}function nt(Tt,At){if(typeof Tt!="object"||Tt===null)return Tt;var Mt=Tt[Symbol.toPrimitive];if(Mt!==void 0){var Dt=Mt.call(Tt,At||"default");if(typeof Dt!="object")return Dt;throw new TypeError("@@toPrimitive must return a primitive value.")}return(At==="string"?String:Number)(Tt)}var ot=require$$0$2,ht=ot.Buffer,vt=util$4,_t=vt.inspect,kt=_t&&_t.custom||"inspect";function $t(Tt,At,Mt){ht.prototype.copy.call(Tt,At,Mt)}return buffer_list$1=function(){function Tt(){_(this,Tt),this.head=null,this.tail=null,this.length=0}return k(Tt,[{key:"push",value:function(Mt){var Dt={data:Mt,next:null};this.length>0?this.tail.next=Dt:this.head=Dt,this.tail=Dt,++this.length}},{key:"unshift",value:function(Mt){var Dt={data:Mt,next:this.head};this.length===0&&(this.tail=Dt),this.head=Dt,++this.length}},{key:"shift",value:function(){if(this.length!==0){var Mt=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,Mt}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(Mt){if(this.length===0)return"";for(var Dt=this.head,Rt=""+Dt.data;Dt=Dt.next;)Rt+=Mt+Dt.data;return Rt}},{key:"concat",value:function(Mt){if(this.length===0)return ht.alloc(0);for(var Dt=ht.allocUnsafe(Mt>>>0),Rt=this.head,xt=0;Rt;)$t(Rt.data,Dt,xt),xt+=Rt.data.length,Rt=Rt.next;return Dt}},{key:"consume",value:function(Mt,Dt){var Rt;return Mt<this.head.data.length?(Rt=this.head.data.slice(0,Mt),this.head.data=this.head.data.slice(Mt)):Mt===this.head.data.length?Rt=this.shift():Rt=Dt?this._getString(Mt):this._getBuffer(Mt),Rt}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(Mt){var Dt=this.head,Rt=1,xt=Dt.data;for(Mt-=xt.length;Dt=Dt.next;){var Jt=Dt.data,ar=Mt>Jt.length?Jt.length:Mt;if(ar===Jt.length?xt+=Jt:xt+=Jt.slice(0,Mt),Mt-=ar,Mt===0){ar===Jt.length?(++Rt,Dt.next?this.head=Dt.next:this.head=this.tail=null):(this.head=Dt,Dt.data=Jt.slice(ar));break}++Rt}return this.length-=Rt,xt}},{key:"_getBuffer",value:function(Mt){var Dt=ht.allocUnsafe(Mt),Rt=this.head,xt=1;for(Rt.data.copy(Dt),Mt-=Rt.data.length;Rt=Rt.next;){var Jt=Rt.data,ar=Mt>Jt.length?Jt.length:Mt;if(Jt.copy(Dt,Dt.length-Mt,0,ar),Mt-=ar,Mt===0){ar===Jt.length?(++xt,Rt.next?this.head=Rt.next:this.head=this.tail=null):(this.head=Rt,Rt.data=Jt.slice(ar));break}++xt}return this.length-=xt,Dt}},{key:kt,value:function(Mt,Dt){return _t(this,c(c({},Dt),{},{depth:0,customInspect:!1}))}}]),Tt}(),buffer_list$1}function destroy$1(a,c){var b=this,_=this._readableState&&this._readableState.destroyed,$=this._writableState&&this._writableState.destroyed;return _||$?(c?c(a):a&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process$1.nextTick(emitErrorNT$1,this,a)):process$1.nextTick(emitErrorNT$1,this,a)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(a||null,function(k){!c&&k?b._writableState?b._writableState.errorEmitted?process$1.nextTick(emitCloseNT$1,b):(b._writableState.errorEmitted=!0,process$1.nextTick(emitErrorAndCloseNT$1,b,k)):process$1.nextTick(emitErrorAndCloseNT$1,b,k):c?(process$1.nextTick(emitCloseNT$1,b),c(k)):process$1.nextTick(emitCloseNT$1,b)}),this)}function emitErrorAndCloseNT$1(a,c){emitErrorNT$1(a,c),emitCloseNT$1(a)}function emitCloseNT$1(a){a._writableState&&!a._writableState.emitClose||a._readableState&&!a._readableState.emitClose||a.emit("close")}function undestroy$1(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function emitErrorNT$1(a,c){a.emit("error",c)}function errorOrDestroy$1(a,c){var b=a._readableState,_=a._writableState;b&&b.autoDestroy||_&&_.autoDestroy?a.destroy(c):a.emit("error",c)}var destroy_1$1={destroy:destroy$1,undestroy:undestroy$1,errorOrDestroy:errorOrDestroy$1},errorsBrowser$1={};function _inheritsLoose$2(a,c){a.prototype=Object.create(c.prototype),a.prototype.constructor=a,a.__proto__=c}var codes$1={};function createErrorType$1(a,c,b){b||(b=Error);function _(k,et,nt){return typeof c=="string"?c:c(k,et,nt)}var $=function(k){_inheritsLoose$2(et,k);function et(nt,ot,ht){return k.call(this,_(nt,ot,ht))||this}return et}(b);$.prototype.name=b.name,$.prototype.code=a,codes$1[a]=$}function oneOf$1(a,c){if(Array.isArray(a)){var b=a.length;return a=a.map(function(_){return String(_)}),b>2?"one of ".concat(c," ").concat(a.slice(0,b-1).join(", "),", or ")+a[b-1]:b===2?"one of ".concat(c," ").concat(a[0]," or ").concat(a[1]):"of ".concat(c," ").concat(a[0])}else return"of ".concat(c," ").concat(String(a))}function startsWith$1(a,c,b){return a.substr(!b||b<0?0:+b,c.length)===c}function endsWith$1(a,c,b){return(b===void 0||b>a.length)&&(b=a.length),a.substring(b-c.length,b)===c}function includes$3(a,c,b){return typeof b!="number"&&(b=0),b+c.length>a.length?!1:a.indexOf(c,b)!==-1}createErrorType$1("ERR_INVALID_OPT_VALUE",function(a,c){return'The value "'+c+'" is invalid for option "'+a+'"'},TypeError);createErrorType$1("ERR_INVALID_ARG_TYPE",function(a,c,b){var _;typeof c=="string"&&startsWith$1(c,"not ")?(_="must not be",c=c.replace(/^not /,"")):_="must be";var $;if(endsWith$1(a," argument"))$="The ".concat(a," ").concat(_," ").concat(oneOf$1(c,"type"));else{var k=includes$3(a,".")?"property":"argument";$='The "'.concat(a,'" ').concat(k," ").concat(_," ").concat(oneOf$1(c,"type"))}return $+=". Received type ".concat(typeof b),$},TypeError);createErrorType$1("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF");createErrorType$1("ERR_METHOD_NOT_IMPLEMENTED",function(a){return"The "+a+" method is not implemented"});createErrorType$1("ERR_STREAM_PREMATURE_CLOSE","Premature close");createErrorType$1("ERR_STREAM_DESTROYED",function(a){return"Cannot call "+a+" after a stream was destroyed"});createErrorType$1("ERR_MULTIPLE_CALLBACK","Callback called multiple times");createErrorType$1("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable");createErrorType$1("ERR_STREAM_WRITE_AFTER_END","write after end");createErrorType$1("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);createErrorType$1("ERR_UNKNOWN_ENCODING",function(a){return"Unknown encoding: "+a},TypeError);createErrorType$1("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event");errorsBrowser$1.codes=codes$1;var ERR_INVALID_OPT_VALUE$1=errorsBrowser$1.codes.ERR_INVALID_OPT_VALUE;function highWaterMarkFrom$1(a,c,b){return a.highWaterMark!=null?a.highWaterMark:c?a[b]:null}function getHighWaterMark$1(a,c,b,_){var $=highWaterMarkFrom$1(c,_,b);if($!=null){if(!(isFinite($)&&Math.floor($)===$)||$<0){var k=_?b:"highWaterMark";throw new ERR_INVALID_OPT_VALUE$1(k,$)}return Math.floor($)}return a.objectMode?16:16*1024}var state$3={getHighWaterMark:getHighWaterMark$1},_stream_writable$1,hasRequired_stream_writable$1;function require_stream_writable$1(){if(hasRequired_stream_writable$1)return _stream_writable$1;hasRequired_stream_writable$1=1,_stream_writable$1=ur;function a(Wt){var zt=this;this.next=null,this.entry=null,this.finish=function(){ir(zt,Wt)}}var c;ur.WritableState=nr;var b={deprecate:browser$c},_=streamBrowser$1,$=require$$0$2.Buffer,k=(typeof commonjsGlobal$1<"u"?commonjsGlobal$1:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function et(Wt){return $.from(Wt)}function nt(Wt){return $.isBuffer(Wt)||Wt instanceof k}var ot=destroy_1$1,ht=state$3,vt=ht.getHighWaterMark,_t=errorsBrowser$1.codes,kt=_t.ERR_INVALID_ARG_TYPE,$t=_t.ERR_METHOD_NOT_IMPLEMENTED,Tt=_t.ERR_MULTIPLE_CALLBACK,At=_t.ERR_STREAM_CANNOT_PIPE,Mt=_t.ERR_STREAM_DESTROYED,Dt=_t.ERR_STREAM_NULL_VALUES,Rt=_t.ERR_STREAM_WRITE_AFTER_END,xt=_t.ERR_UNKNOWN_ENCODING,Jt=ot.errorOrDestroy;inherits_browserExports(ur,_);function ar(){}function nr(Wt,zt,wt){c=c||require_stream_duplex$1(),Wt=Wt||{},typeof wt!="boolean"&&(wt=zt instanceof c),this.objectMode=!!Wt.objectMode,wt&&(this.objectMode=this.objectMode||!!Wt.writableObjectMode),this.highWaterMark=vt(this,Wt,"writableHighWaterMark",wt),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var Vt=Wt.decodeStrings===!1;this.decodeStrings=!Vt,this.defaultEncoding=Wt.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(Qt){lt(zt,Qt)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=Wt.emitClose!==!1,this.autoDestroy=!!Wt.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new a(this)}nr.prototype.getBuffer=function(){for(var zt=this.bufferedRequest,wt=[];zt;)wt.push(zt),zt=zt.next;return wt},function(){try{Object.defineProperty(nr.prototype,"buffer",{get:b.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}();var pr;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(pr=Function.prototype[Symbol.hasInstance],Object.defineProperty(ur,Symbol.hasInstance,{value:function(zt){return pr.call(this,zt)?!0:this!==ur?!1:zt&&zt._writableState instanceof nr}})):pr=function(zt){return zt instanceof this};function ur(Wt){c=c||require_stream_duplex$1();var zt=this instanceof c;if(!zt&&!pr.call(ur,this))return new ur(Wt);this._writableState=new nr(Wt,this,zt),this.writable=!0,Wt&&(typeof Wt.write=="function"&&(this._write=Wt.write),typeof Wt.writev=="function"&&(this._writev=Wt.writev),typeof Wt.destroy=="function"&&(this._destroy=Wt.destroy),typeof Wt.final=="function"&&(this._final=Wt.final)),_.call(this)}ur.prototype.pipe=function(){Jt(this,new At)};function Ot(Wt,zt){var wt=new Rt;Jt(Wt,wt),process$1.nextTick(zt,wt)}function It(Wt,zt,wt,Vt){var Qt;return wt===null?Qt=new Dt:typeof wt!="string"&&!zt.objectMode&&(Qt=new kt("chunk",["string","Buffer"],wt)),Qt?(Jt(Wt,Qt),process$1.nextTick(Vt,Qt),!1):!0}ur.prototype.write=function(Wt,zt,wt){var Vt=this._writableState,Qt=!1,Nt=!Vt.objectMode&&nt(Wt);return Nt&&!$.isBuffer(Wt)&&(Wt=et(Wt)),typeof zt=="function"&&(wt=zt,zt=null),Nt?zt="buffer":zt||(zt=Vt.defaultEncoding),typeof wt!="function"&&(wt=ar),Vt.ending?Ot(this,wt):(Nt||It(this,Vt,Wt,wt))&&(Vt.pendingcb++,Qt=_e(this,Vt,Nt,Wt,zt,wt)),Qt},ur.prototype.cork=function(){this._writableState.corked++},ur.prototype.uncork=function(){var Wt=this._writableState;Wt.corked&&(Wt.corked--,!Wt.writing&&!Wt.corked&&!Wt.bufferProcessing&&Wt.bufferedRequest&&pt(this,Wt))},ur.prototype.setDefaultEncoding=function(zt){if(typeof zt=="string"&&(zt=zt.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((zt+"").toLowerCase())>-1))throw new xt(zt);return this._writableState.defaultEncoding=zt,this},Object.defineProperty(ur.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function ut(Wt,zt,wt){return!Wt.objectMode&&Wt.decodeStrings!==!1&&typeof zt=="string"&&(zt=$.from(zt,wt)),zt}Object.defineProperty(ur.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function _e(Wt,zt,wt,Vt,Qt,Nt){if(!wt){var st=ut(zt,Vt,Qt);Vt!==st&&(wt=!0,Qt="buffer",Vt=st)}var Ct=zt.objectMode?1:Vt.length;zt.length+=Ct;var qt=zt.length<zt.highWaterMark;if(qt||(zt.needDrain=!0),zt.writing||zt.corked){var cr=zt.lastBufferedRequest;zt.lastBufferedRequest={chunk:Vt,encoding:Qt,isBuf:wt,callback:Nt,next:null},cr?cr.next=zt.lastBufferedRequest:zt.bufferedRequest=zt.lastBufferedRequest,zt.bufferedRequestCount+=1}else tt(Wt,zt,!1,Ct,Vt,Qt,Nt);return qt}function tt(Wt,zt,wt,Vt,Qt,Nt,st){zt.writelen=Vt,zt.writecb=st,zt.writing=!0,zt.sync=!0,zt.destroyed?zt.onwrite(new Mt("write")):wt?Wt._writev(Qt,zt.onwrite):Wt._write(Qt,Nt,zt.onwrite),zt.sync=!1}function it(Wt,zt,wt,Vt,Qt){--zt.pendingcb,wt?(process$1.nextTick(Qt,Vt),process$1.nextTick(Gt,Wt,zt),Wt._writableState.errorEmitted=!0,Jt(Wt,Vt)):(Qt(Vt),Wt._writableState.errorEmitted=!0,Jt(Wt,Vt),Gt(Wt,zt))}function dt(Wt){Wt.writing=!1,Wt.writecb=null,Wt.length-=Wt.writelen,Wt.writelen=0}function lt(Wt,zt){var wt=Wt._writableState,Vt=wt.sync,Qt=wt.writecb;if(typeof Qt!="function")throw new Tt;if(dt(wt),zt)it(Wt,wt,Vt,zt,Qt);else{var Nt=rt(wt)||Wt.destroyed;!Nt&&!wt.corked&&!wt.bufferProcessing&&wt.bufferedRequest&&pt(Wt,wt),Vt?process$1.nextTick(gt,Wt,wt,Nt,Qt):gt(Wt,wt,Nt,Qt)}}function gt(Wt,zt,wt,Vt){wt||Et(Wt,zt),zt.pendingcb--,Vt(),Gt(Wt,zt)}function Et(Wt,zt){zt.length===0&&zt.needDrain&&(zt.needDrain=!1,Wt.emit("drain"))}function pt(Wt,zt){zt.bufferProcessing=!0;var wt=zt.bufferedRequest;if(Wt._writev&&wt&&wt.next){var Vt=zt.bufferedRequestCount,Qt=new Array(Vt),Nt=zt.corkedRequestsFree;Nt.entry=wt;for(var st=0,Ct=!0;wt;)Qt[st]=wt,wt.isBuf||(Ct=!1),wt=wt.next,st+=1;Qt.allBuffers=Ct,tt(Wt,zt,!0,zt.length,Qt,"",Nt.finish),zt.pendingcb++,zt.lastBufferedRequest=null,Nt.next?(zt.corkedRequestsFree=Nt.next,Nt.next=null):zt.corkedRequestsFree=new a(zt),zt.bufferedRequestCount=0}else{for(;wt;){var qt=wt.chunk,cr=wt.encoding,dr=wt.callback,Er=zt.objectMode?1:qt.length;if(tt(Wt,zt,!1,Er,qt,cr,dr),wt=wt.next,zt.bufferedRequestCount--,zt.writing)break}wt===null&&(zt.lastBufferedRequest=null)}zt.bufferedRequest=wt,zt.bufferProcessing=!1}ur.prototype._write=function(Wt,zt,wt){wt(new $t("_write()"))},ur.prototype._writev=null,ur.prototype.end=function(Wt,zt,wt){var Vt=this._writableState;return typeof Wt=="function"?(wt=Wt,Wt=null,zt=null):typeof zt=="function"&&(wt=zt,zt=null),Wt!=null&&this.write(Wt,zt),Vt.corked&&(Vt.corked=1,this.uncork()),Vt.ending||rr(this,Vt,wt),this},Object.defineProperty(ur.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function rt(Wt){return Wt.ending&&Wt.length===0&&Wt.bufferedRequest===null&&!Wt.finished&&!Wt.writing}function mt(Wt,zt){Wt._final(function(wt){zt.pendingcb--,wt&&Jt(Wt,wt),zt.prefinished=!0,Wt.emit("prefinish"),Gt(Wt,zt)})}function Lt(Wt,zt){!zt.prefinished&&!zt.finalCalled&&(typeof Wt._final=="function"&&!zt.destroyed?(zt.pendingcb++,zt.finalCalled=!0,process$1.nextTick(mt,Wt,zt)):(zt.prefinished=!0,Wt.emit("prefinish")))}function Gt(Wt,zt){var wt=rt(zt);if(wt&&(Lt(Wt,zt),zt.pendingcb===0&&(zt.finished=!0,Wt.emit("finish"),zt.autoDestroy))){var Vt=Wt._readableState;(!Vt||Vt.autoDestroy&&Vt.endEmitted)&&Wt.destroy()}return wt}function rr(Wt,zt,wt){zt.ending=!0,Gt(Wt,zt),wt&&(zt.finished?process$1.nextTick(wt):Wt.once("finish",wt)),zt.ended=!0,Wt.writable=!1}function ir(Wt,zt,wt){var Vt=Wt.entry;for(Wt.entry=null;Vt;){var Qt=Vt.callback;zt.pendingcb--,Qt(wt),Vt=Vt.next}zt.corkedRequestsFree.next=Wt}return Object.defineProperty(ur.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(zt){this._writableState&&(this._writableState.destroyed=zt)}}),ur.prototype.destroy=ot.destroy,ur.prototype._undestroy=ot.undestroy,ur.prototype._destroy=function(Wt,zt){zt(Wt)},_stream_writable$1}var _stream_duplex$1,hasRequired_stream_duplex$1;function require_stream_duplex$1(){if(hasRequired_stream_duplex$1)return _stream_duplex$1;hasRequired_stream_duplex$1=1;var a=Object.keys||function(ht){var vt=[];for(var _t in ht)vt.push(_t);return vt};_stream_duplex$1=et;var c=require_stream_readable$1(),b=require_stream_writable$1();inherits_browserExports(et,c);for(var _=a(b.prototype),$=0;$<_.length;$++){var k=_[$];et.prototype[k]||(et.prototype[k]=b.prototype[k])}function et(ht){if(!(this instanceof et))return new et(ht);c.call(this,ht),b.call(this,ht),this.allowHalfOpen=!0,ht&&(ht.readable===!1&&(this.readable=!1),ht.writable===!1&&(this.writable=!1),ht.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",nt)))}Object.defineProperty(et.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(et.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(et.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function nt(){this._writableState.ended||process$1.nextTick(ot,this)}function ot(ht){ht.end()}return Object.defineProperty(et.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(vt){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=vt,this._writableState.destroyed=vt)}}),_stream_duplex$1}var ERR_STREAM_PREMATURE_CLOSE$1=errorsBrowser$1.codes.ERR_STREAM_PREMATURE_CLOSE;function once$5(a){var c=!1;return function(){if(!c){c=!0;for(var b=arguments.length,_=new Array(b),$=0;$<b;$++)_[$]=arguments[$];a.apply(this,_)}}}function noop$4(){}function isRequest$3(a){return a.setHeader&&typeof a.abort=="function"}function eos$3(a,c,b){if(typeof c=="function")return eos$3(a,null,c);c||(c={}),b=once$5(b||noop$4);var _=c.readable||c.readable!==!1&&a.readable,$=c.writable||c.writable!==!1&&a.writable,k=function(){a.writable||nt()},et=a._writableState&&a._writableState.finished,nt=function(){$=!1,et=!0,_||b.call(a)},ot=a._readableState&&a._readableState.endEmitted,ht=function(){_=!1,ot=!0,$||b.call(a)},vt=function(Tt){b.call(a,Tt)},_t=function(){var Tt;if(_&&!ot)return(!a._readableState||!a._readableState.ended)&&(Tt=new ERR_STREAM_PREMATURE_CLOSE$1),b.call(a,Tt);if($&&!et)return(!a._writableState||!a._writableState.ended)&&(Tt=new ERR_STREAM_PREMATURE_CLOSE$1),b.call(a,Tt)},kt=function(){a.req.on("finish",nt)};return isRequest$3(a)?(a.on("complete",nt),a.on("abort",_t),a.req?kt():a.on("request",kt)):$&&!a._writableState&&(a.on("end",k),a.on("close",k)),a.on("end",ht),a.on("finish",nt),c.error!==!1&&a.on("error",vt),a.on("close",_t),function(){a.removeListener("complete",nt),a.removeListener("abort",_t),a.removeListener("request",kt),a.req&&a.req.removeListener("finish",nt),a.removeListener("end",k),a.removeListener("close",k),a.removeListener("finish",nt),a.removeListener("end",ht),a.removeListener("error",vt),a.removeListener("close",_t)}}var endOfStream$1=eos$3,async_iterator$1,hasRequiredAsync_iterator$1;function requireAsync_iterator$1(){if(hasRequiredAsync_iterator$1)return async_iterator$1;hasRequiredAsync_iterator$1=1;var a;function c(xt,Jt,ar){return Jt=b(Jt),Jt in xt?Object.defineProperty(xt,Jt,{value:ar,enumerable:!0,configurable:!0,writable:!0}):xt[Jt]=ar,xt}function b(xt){var Jt=_(xt,"string");return typeof Jt=="symbol"?Jt:String(Jt)}function _(xt,Jt){if(typeof xt!="object"||xt===null)return xt;var ar=xt[Symbol.toPrimitive];if(ar!==void 0){var nr=ar.call(xt,Jt||"default");if(typeof nr!="object")return nr;throw new TypeError("@@toPrimitive must return a primitive value.")}return(Jt==="string"?String:Number)(xt)}var $=endOfStream$1,k=Symbol("lastResolve"),et=Symbol("lastReject"),nt=Symbol("error"),ot=Symbol("ended"),ht=Symbol("lastPromise"),vt=Symbol("handlePromise"),_t=Symbol("stream");function kt(xt,Jt){return{value:xt,done:Jt}}function $t(xt){var Jt=xt[k];if(Jt!==null){var ar=xt[_t].read();ar!==null&&(xt[ht]=null,xt[k]=null,xt[et]=null,Jt(kt(ar,!1)))}}function Tt(xt){process$1.nextTick($t,xt)}function At(xt,Jt){return function(ar,nr){xt.then(function(){if(Jt[ot]){ar(kt(void 0,!0));return}Jt[vt](ar,nr)},nr)}}var Mt=Object.getPrototypeOf(function(){}),Dt=Object.setPrototypeOf((a={get stream(){return this[_t]},next:function(){var Jt=this,ar=this[nt];if(ar!==null)return Promise.reject(ar);if(this[ot])return Promise.resolve(kt(void 0,!0));if(this[_t].destroyed)return new Promise(function(Ot,It){process$1.nextTick(function(){Jt[nt]?It(Jt[nt]):Ot(kt(void 0,!0))})});var nr=this[ht],pr;if(nr)pr=new Promise(At(nr,this));else{var ur=this[_t].read();if(ur!==null)return Promise.resolve(kt(ur,!1));pr=new Promise(this[vt])}return this[ht]=pr,pr}},c(a,Symbol.asyncIterator,function(){return this}),c(a,"return",function(){var Jt=this;return new Promise(function(ar,nr){Jt[_t].destroy(null,function(pr){if(pr){nr(pr);return}ar(kt(void 0,!0))})})}),a),Mt),Rt=function(Jt){var ar,nr=Object.create(Dt,(ar={},c(ar,_t,{value:Jt,writable:!0}),c(ar,k,{value:null,writable:!0}),c(ar,et,{value:null,writable:!0}),c(ar,nt,{value:null,writable:!0}),c(ar,ot,{value:Jt._readableState.endEmitted,writable:!0}),c(ar,vt,{value:function(ur,Ot){var It=nr[_t].read();It?(nr[ht]=null,nr[k]=null,nr[et]=null,ur(kt(It,!1))):(nr[k]=ur,nr[et]=Ot)},writable:!0}),ar));return nr[ht]=null,$(Jt,function(pr){if(pr&&pr.code!=="ERR_STREAM_PREMATURE_CLOSE"){var ur=nr[et];ur!==null&&(nr[ht]=null,nr[k]=null,nr[et]=null,ur(pr)),nr[nt]=pr;return}var Ot=nr[k];Ot!==null&&(nr[ht]=null,nr[k]=null,nr[et]=null,Ot(kt(void 0,!0))),nr[ot]=!0}),Jt.on("readable",Tt.bind(null,nr)),nr};return async_iterator$1=Rt,async_iterator$1}var fromBrowser$1,hasRequiredFromBrowser$1;function requireFromBrowser$1(){return hasRequiredFromBrowser$1||(hasRequiredFromBrowser$1=1,fromBrowser$1=function(){throw new Error("Readable.from is not available in the browser")}),fromBrowser$1}var _stream_readable$1,hasRequired_stream_readable$1;function require_stream_readable$1(){if(hasRequired_stream_readable$1)return _stream_readable$1;hasRequired_stream_readable$1=1,_stream_readable$1=Ot;var a;Ot.ReadableState=ur,eventsExports.EventEmitter;var c=function(st,Ct){return st.listeners(Ct).length},b=streamBrowser$1,_=require$$0$2.Buffer,$=(typeof commonjsGlobal$1<"u"?commonjsGlobal$1:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function k(Nt){return _.from(Nt)}function et(Nt){return _.isBuffer(Nt)||Nt instanceof $}var nt=util$4,ot;nt&&nt.debuglog?ot=nt.debuglog("stream"):ot=function(){};var ht=requireBuffer_list$1(),vt=destroy_1$1,_t=state$3,kt=_t.getHighWaterMark,$t=errorsBrowser$1.codes,Tt=$t.ERR_INVALID_ARG_TYPE,At=$t.ERR_STREAM_PUSH_AFTER_EOF,Mt=$t.ERR_METHOD_NOT_IMPLEMENTED,Dt=$t.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,Rt,xt,Jt;inherits_browserExports(Ot,b);var ar=vt.errorOrDestroy,nr=["error","close","destroy","pause","resume"];function pr(Nt,st,Ct){if(typeof Nt.prependListener=="function")return Nt.prependListener(st,Ct);!Nt._events||!Nt._events[st]?Nt.on(st,Ct):Array.isArray(Nt._events[st])?Nt._events[st].unshift(Ct):Nt._events[st]=[Ct,Nt._events[st]]}function ur(Nt,st,Ct){a=a||require_stream_duplex$1(),Nt=Nt||{},typeof Ct!="boolean"&&(Ct=st instanceof a),this.objectMode=!!Nt.objectMode,Ct&&(this.objectMode=this.objectMode||!!Nt.readableObjectMode),this.highWaterMark=kt(this,Nt,"readableHighWaterMark",Ct),this.buffer=new ht,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=Nt.emitClose!==!1,this.autoDestroy=!!Nt.autoDestroy,this.destroyed=!1,this.defaultEncoding=Nt.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,Nt.encoding&&(Rt||(Rt=string_decoder.StringDecoder),this.decoder=new Rt(Nt.encoding),this.encoding=Nt.encoding)}function Ot(Nt){if(a=a||require_stream_duplex$1(),!(this instanceof Ot))return new Ot(Nt);var st=this instanceof a;this._readableState=new ur(Nt,this,st),this.readable=!0,Nt&&(typeof Nt.read=="function"&&(this._read=Nt.read),typeof Nt.destroy=="function"&&(this._destroy=Nt.destroy)),b.call(this)}Object.defineProperty(Ot.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(st){this._readableState&&(this._readableState.destroyed=st)}}),Ot.prototype.destroy=vt.destroy,Ot.prototype._undestroy=vt.undestroy,Ot.prototype._destroy=function(Nt,st){st(Nt)},Ot.prototype.push=function(Nt,st){var Ct=this._readableState,qt;return Ct.objectMode?qt=!0:typeof Nt=="string"&&(st=st||Ct.defaultEncoding,st!==Ct.encoding&&(Nt=_.from(Nt,st),st=""),qt=!0),It(this,Nt,st,!1,qt)},Ot.prototype.unshift=function(Nt){return It(this,Nt,null,!0,!1)};function It(Nt,st,Ct,qt,cr){ot("readableAddChunk",st);var dr=Nt._readableState;if(st===null)dr.reading=!1,lt(Nt,dr);else{var Er;if(cr||(Er=_e(dr,st)),Er)ar(Nt,Er);else if(dr.objectMode||st&&st.length>0)if(typeof st!="string"&&!dr.objectMode&&Object.getPrototypeOf(st)!==_.prototype&&(st=k(st)),qt)dr.endEmitted?ar(Nt,new Dt):ut(Nt,dr,st,!0);else if(dr.ended)ar(Nt,new At);else{if(dr.destroyed)return!1;dr.reading=!1,dr.decoder&&!Ct?(st=dr.decoder.write(st),dr.objectMode||st.length!==0?ut(Nt,dr,st,!1):pt(Nt,dr)):ut(Nt,dr,st,!1)}else qt||(dr.reading=!1,pt(Nt,dr))}return!dr.ended&&(dr.length<dr.highWaterMark||dr.length===0)}function ut(Nt,st,Ct,qt){st.flowing&&st.length===0&&!st.sync?(st.awaitDrain=0,Nt.emit("data",Ct)):(st.length+=st.objectMode?1:Ct.length,qt?st.buffer.unshift(Ct):st.buffer.push(Ct),st.needReadable&&gt(Nt)),pt(Nt,st)}function _e(Nt,st){var Ct;return!et(st)&&typeof st!="string"&&st!==void 0&&!Nt.objectMode&&(Ct=new Tt("chunk",["string","Buffer","Uint8Array"],st)),Ct}Ot.prototype.isPaused=function(){return this._readableState.flowing===!1},Ot.prototype.setEncoding=function(Nt){Rt||(Rt=string_decoder.StringDecoder);var st=new Rt(Nt);this._readableState.decoder=st,this._readableState.encoding=this._readableState.decoder.encoding;for(var Ct=this._readableState.buffer.head,qt="";Ct!==null;)qt+=st.write(Ct.data),Ct=Ct.next;return this._readableState.buffer.clear(),qt!==""&&this._readableState.buffer.push(qt),this._readableState.length=qt.length,this};var tt=1073741824;function it(Nt){return Nt>=tt?Nt=tt:(Nt--,Nt|=Nt>>>1,Nt|=Nt>>>2,Nt|=Nt>>>4,Nt|=Nt>>>8,Nt|=Nt>>>16,Nt++),Nt}function dt(Nt,st){return Nt<=0||st.length===0&&st.ended?0:st.objectMode?1:Nt!==Nt?st.flowing&&st.length?st.buffer.head.data.length:st.length:(Nt>st.highWaterMark&&(st.highWaterMark=it(Nt)),Nt<=st.length?Nt:st.ended?st.length:(st.needReadable=!0,0))}Ot.prototype.read=function(Nt){ot("read",Nt),Nt=parseInt(Nt,10);var st=this._readableState,Ct=Nt;if(Nt!==0&&(st.emittedReadable=!1),Nt===0&&st.needReadable&&((st.highWaterMark!==0?st.length>=st.highWaterMark:st.length>0)||st.ended))return ot("read: emitReadable",st.length,st.ended),st.length===0&&st.ended?wt(this):gt(this),null;if(Nt=dt(Nt,st),Nt===0&&st.ended)return st.length===0&&wt(this),null;var qt=st.needReadable;ot("need readable",qt),(st.length===0||st.length-Nt<st.highWaterMark)&&(qt=!0,ot("length less than watermark",qt)),st.ended||st.reading?(qt=!1,ot("reading or ended",qt)):qt&&(ot("do read"),st.reading=!0,st.sync=!0,st.length===0&&(st.needReadable=!0),this._read(st.highWaterMark),st.sync=!1,st.reading||(Nt=dt(Ct,st)));var cr;return Nt>0?cr=zt(Nt,st):cr=null,cr===null?(st.needReadable=st.length<=st.highWaterMark,Nt=0):(st.length-=Nt,st.awaitDrain=0),st.length===0&&(st.ended||(st.needReadable=!0),Ct!==Nt&&st.ended&&wt(this)),cr!==null&&this.emit("data",cr),cr};function lt(Nt,st){if(ot("onEofChunk"),!st.ended){if(st.decoder){var Ct=st.decoder.end();Ct&&Ct.length&&(st.buffer.push(Ct),st.length+=st.objectMode?1:Ct.length)}st.ended=!0,st.sync?gt(Nt):(st.needReadable=!1,st.emittedReadable||(st.emittedReadable=!0,Et(Nt)))}}function gt(Nt){var st=Nt._readableState;ot("emitReadable",st.needReadable,st.emittedReadable),st.needReadable=!1,st.emittedReadable||(ot("emitReadable",st.flowing),st.emittedReadable=!0,process$1.nextTick(Et,Nt))}function Et(Nt){var st=Nt._readableState;ot("emitReadable_",st.destroyed,st.length,st.ended),!st.destroyed&&(st.length||st.ended)&&(Nt.emit("readable"),st.emittedReadable=!1),st.needReadable=!st.flowing&&!st.ended&&st.length<=st.highWaterMark,Wt(Nt)}function pt(Nt,st){st.readingMore||(st.readingMore=!0,process$1.nextTick(rt,Nt,st))}function rt(Nt,st){for(;!st.reading&&!st.ended&&(st.length<st.highWaterMark||st.flowing&&st.length===0);){var Ct=st.length;if(ot("maybeReadMore read 0"),Nt.read(0),Ct===st.length)break}st.readingMore=!1}Ot.prototype._read=function(Nt){ar(this,new Mt("_read()"))},Ot.prototype.pipe=function(Nt,st){var Ct=this,qt=this._readableState;switch(qt.pipesCount){case 0:qt.pipes=Nt;break;case 1:qt.pipes=[qt.pipes,Nt];break;default:qt.pipes.push(Nt);break}qt.pipesCount+=1,ot("pipe count=%d opts=%j",qt.pipesCount,st);var cr=(!st||st.end!==!1)&&Nt!==process$1.stdout&&Nt!==process$1.stderr,dr=cr?Tr:kr;qt.endEmitted?process$1.nextTick(dr):Ct.once("end",dr),Nt.on("unpipe",Er);function Er(tr,bt){ot("onunpipe"),tr===Ct&&bt&&bt.hasUnpiped===!1&&(bt.hasUnpiped=!0,Pr())}function Tr(){ot("onend"),Nt.end()}var gr=mt(Ct);Nt.on("drain",gr);var Zr=!1;function Pr(){ot("cleanup"),Nt.removeListener("close",Kt),Nt.removeListener("finish",er),Nt.removeListener("drain",gr),Nt.removeListener("error",St),Nt.removeListener("unpipe",Er),Ct.removeListener("end",Tr),Ct.removeListener("end",kr),Ct.removeListener("data",_r),Zr=!0,qt.awaitDrain&&(!Nt._writableState||Nt._writableState.needDrain)&&gr()}Ct.on("data",_r);function _r(tr){ot("ondata");var bt=Nt.write(tr);ot("dest.write",bt),bt===!1&&((qt.pipesCount===1&&qt.pipes===Nt||qt.pipesCount>1&&Qt(qt.pipes,Nt)!==-1)&&!Zr&&(ot("false write response, pause",qt.awaitDrain),qt.awaitDrain++),Ct.pause())}function St(tr){ot("onerror",tr),kr(),Nt.removeListener("error",St),c(Nt,"error")===0&&ar(Nt,tr)}pr(Nt,"error",St);function Kt(){Nt.removeListener("finish",er),kr()}Nt.once("close",Kt);function er(){ot("onfinish"),Nt.removeListener("close",Kt),kr()}Nt.once("finish",er);function kr(){ot("unpipe"),Ct.unpipe(Nt)}return Nt.emit("pipe",Ct),qt.flowing||(ot("pipe resume"),Ct.resume()),Nt};function mt(Nt){return function(){var Ct=Nt._readableState;ot("pipeOnDrain",Ct.awaitDrain),Ct.awaitDrain&&Ct.awaitDrain--,Ct.awaitDrain===0&&c(Nt,"data")&&(Ct.flowing=!0,Wt(Nt))}}Ot.prototype.unpipe=function(Nt){var st=this._readableState,Ct={hasUnpiped:!1};if(st.pipesCount===0)return this;if(st.pipesCount===1)return Nt&&Nt!==st.pipes?this:(Nt||(Nt=st.pipes),st.pipes=null,st.pipesCount=0,st.flowing=!1,Nt&&Nt.emit("unpipe",this,Ct),this);if(!Nt){var qt=st.pipes,cr=st.pipesCount;st.pipes=null,st.pipesCount=0,st.flowing=!1;for(var dr=0;dr<cr;dr++)qt[dr].emit("unpipe",this,{hasUnpiped:!1});return this}var Er=Qt(st.pipes,Nt);return Er===-1?this:(st.pipes.splice(Er,1),st.pipesCount-=1,st.pipesCount===1&&(st.pipes=st.pipes[0]),Nt.emit("unpipe",this,Ct),this)},Ot.prototype.on=function(Nt,st){var Ct=b.prototype.on.call(this,Nt,st),qt=this._readableState;return Nt==="data"?(qt.readableListening=this.listenerCount("readable")>0,qt.flowing!==!1&&this.resume()):Nt==="readable"&&!qt.endEmitted&&!qt.readableListening&&(qt.readableListening=qt.needReadable=!0,qt.flowing=!1,qt.emittedReadable=!1,ot("on readable",qt.length,qt.reading),qt.length?gt(this):qt.reading||process$1.nextTick(Gt,this)),Ct},Ot.prototype.addListener=Ot.prototype.on,Ot.prototype.removeListener=function(Nt,st){var Ct=b.prototype.removeListener.call(this,Nt,st);return Nt==="readable"&&process$1.nextTick(Lt,this),Ct},Ot.prototype.removeAllListeners=function(Nt){var st=b.prototype.removeAllListeners.apply(this,arguments);return(Nt==="readable"||Nt===void 0)&&process$1.nextTick(Lt,this),st};function Lt(Nt){var st=Nt._readableState;st.readableListening=Nt.listenerCount("readable")>0,st.resumeScheduled&&!st.paused?st.flowing=!0:Nt.listenerCount("data")>0&&Nt.resume()}function Gt(Nt){ot("readable nexttick read 0"),Nt.read(0)}Ot.prototype.resume=function(){var Nt=this._readableState;return Nt.flowing||(ot("resume"),Nt.flowing=!Nt.readableListening,rr(this,Nt)),Nt.paused=!1,this};function rr(Nt,st){st.resumeScheduled||(st.resumeScheduled=!0,process$1.nextTick(ir,Nt,st))}function ir(Nt,st){ot("resume",st.reading),st.reading||Nt.read(0),st.resumeScheduled=!1,Nt.emit("resume"),Wt(Nt),st.flowing&&!st.reading&&Nt.read(0)}Ot.prototype.pause=function(){return ot("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(ot("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function Wt(Nt){var st=Nt._readableState;for(ot("flow",st.flowing);st.flowing&&Nt.read()!==null;);}Ot.prototype.wrap=function(Nt){var st=this,Ct=this._readableState,qt=!1;Nt.on("end",function(){if(ot("wrapped end"),Ct.decoder&&!Ct.ended){var Er=Ct.decoder.end();Er&&Er.length&&st.push(Er)}st.push(null)}),Nt.on("data",function(Er){if(ot("wrapped data"),Ct.decoder&&(Er=Ct.decoder.write(Er)),!(Ct.objectMode&&Er==null)&&!(!Ct.objectMode&&(!Er||!Er.length))){var Tr=st.push(Er);Tr||(qt=!0,Nt.pause())}});for(var cr in Nt)this[cr]===void 0&&typeof Nt[cr]=="function"&&(this[cr]=function(Tr){return function(){return Nt[Tr].apply(Nt,arguments)}}(cr));for(var dr=0;dr<nr.length;dr++)Nt.on(nr[dr],this.emit.bind(this,nr[dr]));return this._read=function(Er){ot("wrapped _read",Er),qt&&(qt=!1,Nt.resume())},this},typeof Symbol=="function"&&(Ot.prototype[Symbol.asyncIterator]=function(){return xt===void 0&&(xt=requireAsync_iterator$1()),xt(this)}),Object.defineProperty(Ot.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(Ot.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(Ot.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(st){this._readableState&&(this._readableState.flowing=st)}}),Ot._fromList=zt,Object.defineProperty(Ot.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function zt(Nt,st){if(st.length===0)return null;var Ct;return st.objectMode?Ct=st.buffer.shift():!Nt||Nt>=st.length?(st.decoder?Ct=st.buffer.join(""):st.buffer.length===1?Ct=st.buffer.first():Ct=st.buffer.concat(st.length),st.buffer.clear()):Ct=st.buffer.consume(Nt,st.decoder),Ct}function wt(Nt){var st=Nt._readableState;ot("endReadable",st.endEmitted),st.endEmitted||(st.ended=!0,process$1.nextTick(Vt,st,Nt))}function Vt(Nt,st){if(ot("endReadableNT",Nt.endEmitted,Nt.length),!Nt.endEmitted&&Nt.length===0&&(Nt.endEmitted=!0,st.readable=!1,st.emit("end"),Nt.autoDestroy)){var Ct=st._writableState;(!Ct||Ct.autoDestroy&&Ct.finished)&&st.destroy()}}typeof Symbol=="function"&&(Ot.from=function(Nt,st){return Jt===void 0&&(Jt=requireFromBrowser$1()),Jt(Ot,Nt,st)});function Qt(Nt,st){for(var Ct=0,qt=Nt.length;Ct<qt;Ct++)if(Nt[Ct]===st)return Ct;return-1}return _stream_readable$1}var _stream_transform$1=Transform$9,_require$codes$3=errorsBrowser$1.codes,ERR_METHOD_NOT_IMPLEMENTED$1=_require$codes$3.ERR_METHOD_NOT_IMPLEMENTED,ERR_MULTIPLE_CALLBACK$1=_require$codes$3.ERR_MULTIPLE_CALLBACK,ERR_TRANSFORM_ALREADY_TRANSFORMING$1=_require$codes$3.ERR_TRANSFORM_ALREADY_TRANSFORMING,ERR_TRANSFORM_WITH_LENGTH_0$1=_require$codes$3.ERR_TRANSFORM_WITH_LENGTH_0,Duplex$1=require_stream_duplex$1();inherits_browserExports(Transform$9,Duplex$1);function afterTransform$1(a,c){var b=this._transformState;b.transforming=!1;var _=b.writecb;if(_===null)return this.emit("error",new ERR_MULTIPLE_CALLBACK$1);b.writechunk=null,b.writecb=null,c!=null&&this.push(c),_(a);var $=this._readableState;$.reading=!1,($.needReadable||$.length<$.highWaterMark)&&this._read($.highWaterMark)}function Transform$9(a){if(!(this instanceof Transform$9))return new Transform$9(a);Duplex$1.call(this,a),this._transformState={afterTransform:afterTransform$1.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,a&&(typeof a.transform=="function"&&(this._transform=a.transform),typeof a.flush=="function"&&(this._flush=a.flush)),this.on("prefinish",prefinish$1)}function prefinish$1(){var a=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(c,b){done$1(a,c,b)}):done$1(this,null,null)}Transform$9.prototype.push=function(a,c){return this._transformState.needTransform=!1,Duplex$1.prototype.push.call(this,a,c)};Transform$9.prototype._transform=function(a,c,b){b(new ERR_METHOD_NOT_IMPLEMENTED$1("_transform()"))};Transform$9.prototype._write=function(a,c,b){var _=this._transformState;if(_.writecb=b,_.writechunk=a,_.writeencoding=c,!_.transforming){var $=this._readableState;(_.needTransform||$.needReadable||$.length<$.highWaterMark)&&this._read($.highWaterMark)}};Transform$9.prototype._read=function(a){var c=this._transformState;c.writechunk!==null&&!c.transforming?(c.transforming=!0,this._transform(c.writechunk,c.writeencoding,c.afterTransform)):c.needTransform=!0};Transform$9.prototype._destroy=function(a,c){Duplex$1.prototype._destroy.call(this,a,function(b){c(b)})};function done$1(a,c,b){if(c)return a.emit("error",c);if(b!=null&&a.push(b),a._writableState.length)throw new ERR_TRANSFORM_WITH_LENGTH_0$1;if(a._transformState.transforming)throw new ERR_TRANSFORM_ALREADY_TRANSFORMING$1;return a.push(null)}var _stream_passthrough$1=PassThrough$1,Transform$8=_stream_transform$1;inherits_browserExports(PassThrough$1,Transform$8);function PassThrough$1(a){if(!(this instanceof PassThrough$1))return new PassThrough$1(a);Transform$8.call(this,a)}PassThrough$1.prototype._transform=function(a,c,b){b(null,a)};var eos$2;function once$4(a){var c=!1;return function(){c||(c=!0,a.apply(void 0,arguments))}}var _require$codes$2=errorsBrowser$1.codes,ERR_MISSING_ARGS$1=_require$codes$2.ERR_MISSING_ARGS,ERR_STREAM_DESTROYED$1=_require$codes$2.ERR_STREAM_DESTROYED;function noop$3(a){if(a)throw a}function isRequest$2(a){return a.setHeader&&typeof a.abort=="function"}function destroyer$1(a,c,b,_){_=once$4(_);var $=!1;a.on("close",function(){$=!0}),eos$2===void 0&&(eos$2=endOfStream$1),eos$2(a,{readable:c,writable:b},function(et){if(et)return _(et);$=!0,_()});var k=!1;return function(et){if(!$&&!k){if(k=!0,isRequest$2(a))return a.abort();if(typeof a.destroy=="function")return a.destroy();_(et||new ERR_STREAM_DESTROYED$1("pipe"))}}}function call$1(a){a()}function pipe$1(a,c){return a.pipe(c)}function popCallback$1(a){return!a.length||typeof a[a.length-1]!="function"?noop$3:a.pop()}function pipeline$1(){for(var a=arguments.length,c=new Array(a),b=0;b<a;b++)c[b]=arguments[b];var _=popCallback$1(c);if(Array.isArray(c[0])&&(c=c[0]),c.length<2)throw new ERR_MISSING_ARGS$1("streams");var $,k=c.map(function(et,nt){var ot=nt<c.length-1,ht=nt>0;return destroyer$1(et,ot,ht,function(vt){$||($=vt),vt&&k.forEach(call$1),!ot&&(k.forEach(call$1),_($))})});return c.reduce(pipe$1)}var pipeline_1$1=pipeline$1;(function(a,c){c=a.exports=require_stream_readable$1(),c.Stream=c,c.Readable=c,c.Writable=require_stream_writable$1(),c.Duplex=require_stream_duplex$1(),c.Transform=_stream_transform$1,c.PassThrough=_stream_passthrough$1,c.finished=endOfStream$1,c.pipeline=pipeline_1$1})(readableBrowser$1,readableBrowser$1.exports);var readableBrowserExports$1=readableBrowser$1.exports,Buffer$H=safeBufferExports$1.Buffer,Transform$7=readableBrowserExports$1.Transform,inherits$u=inherits_browserExports;function throwIfNotStringOrBuffer(a,c){if(!Buffer$H.isBuffer(a)&&typeof a!="string")throw new TypeError(c+" must be a string or a buffer")}function HashBase$2(a){Transform$7.call(this),this._block=Buffer$H.allocUnsafe(a),this._blockSize=a,this._blockOffset=0,this._length=[0,0,0,0],this._finalized=!1}inherits$u(HashBase$2,Transform$7);HashBase$2.prototype._transform=function(a,c,b){var _=null;try{this.update(a,c)}catch($){_=$}b(_)};HashBase$2.prototype._flush=function(a){var c=null;try{this.push(this.digest())}catch(b){c=b}a(c)};HashBase$2.prototype.update=function(a,c){if(throwIfNotStringOrBuffer(a,"Data"),this._finalized)throw new Error("Digest already called");Buffer$H.isBuffer(a)||(a=Buffer$H.from(a,c));for(var b=this._block,_=0;this._blockOffset+a.length-_>=this._blockSize;){for(var $=this._blockOffset;$<this._blockSize;)b[$++]=a[_++];this._update(),this._blockOffset=0}for(;_<a.length;)b[this._blockOffset++]=a[_++];for(var k=0,et=a.length*8;et>0;++k)this._length[k]+=et,et=this._length[k]/4294967296|0,et>0&&(this._length[k]-=4294967296*et);return this};HashBase$2.prototype._update=function(){throw new Error("_update is not implemented")};HashBase$2.prototype.digest=function(a){if(this._finalized)throw new Error("Digest already called");this._finalized=!0;var c=this._digest();a!==void 0&&(c=c.toString(a)),this._block.fill(0),this._blockOffset=0;for(var b=0;b<4;++b)this._length[b]=0;return c};HashBase$2.prototype._digest=function(){throw new Error("_digest is not implemented")};var hashBase=HashBase$2,inherits$t=inherits_browserExports,HashBase$1=hashBase,Buffer$G=safeBufferExports$3.Buffer,ARRAY16$1=new Array(16);function MD5$3(){HashBase$1.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878}inherits$t(MD5$3,HashBase$1);MD5$3.prototype._update=function(){for(var a=ARRAY16$1,c=0;c<16;++c)a[c]=this._block.readInt32LE(c*4);var b=this._a,_=this._b,$=this._c,k=this._d;b=fnF(b,_,$,k,a[0],3614090360,7),k=fnF(k,b,_,$,a[1],3905402710,12),$=fnF($,k,b,_,a[2],606105819,17),_=fnF(_,$,k,b,a[3],3250441966,22),b=fnF(b,_,$,k,a[4],4118548399,7),k=fnF(k,b,_,$,a[5],1200080426,12),$=fnF($,k,b,_,a[6],2821735955,17),_=fnF(_,$,k,b,a[7],4249261313,22),b=fnF(b,_,$,k,a[8],1770035416,7),k=fnF(k,b,_,$,a[9],2336552879,12),$=fnF($,k,b,_,a[10],4294925233,17),_=fnF(_,$,k,b,a[11],2304563134,22),b=fnF(b,_,$,k,a[12],1804603682,7),k=fnF(k,b,_,$,a[13],4254626195,12),$=fnF($,k,b,_,a[14],2792965006,17),_=fnF(_,$,k,b,a[15],1236535329,22),b=fnG(b,_,$,k,a[1],4129170786,5),k=fnG(k,b,_,$,a[6],3225465664,9),$=fnG($,k,b,_,a[11],643717713,14),_=fnG(_,$,k,b,a[0],3921069994,20),b=fnG(b,_,$,k,a[5],3593408605,5),k=fnG(k,b,_,$,a[10],38016083,9),$=fnG($,k,b,_,a[15],3634488961,14),_=fnG(_,$,k,b,a[4],3889429448,20),b=fnG(b,_,$,k,a[9],568446438,5),k=fnG(k,b,_,$,a[14],3275163606,9),$=fnG($,k,b,_,a[3],4107603335,14),_=fnG(_,$,k,b,a[8],1163531501,20),b=fnG(b,_,$,k,a[13],2850285829,5),k=fnG(k,b,_,$,a[2],4243563512,9),$=fnG($,k,b,_,a[7],1735328473,14),_=fnG(_,$,k,b,a[12],2368359562,20),b=fnH(b,_,$,k,a[5],4294588738,4),k=fnH(k,b,_,$,a[8],2272392833,11),$=fnH($,k,b,_,a[11],1839030562,16),_=fnH(_,$,k,b,a[14],4259657740,23),b=fnH(b,_,$,k,a[1],2763975236,4),k=fnH(k,b,_,$,a[4],1272893353,11),$=fnH($,k,b,_,a[7],4139469664,16),_=fnH(_,$,k,b,a[10],3200236656,23),b=fnH(b,_,$,k,a[13],681279174,4),k=fnH(k,b,_,$,a[0],3936430074,11),$=fnH($,k,b,_,a[3],3572445317,16),_=fnH(_,$,k,b,a[6],76029189,23),b=fnH(b,_,$,k,a[9],3654602809,4),k=fnH(k,b,_,$,a[12],3873151461,11),$=fnH($,k,b,_,a[15],530742520,16),_=fnH(_,$,k,b,a[2],3299628645,23),b=fnI(b,_,$,k,a[0],4096336452,6),k=fnI(k,b,_,$,a[7],1126891415,10),$=fnI($,k,b,_,a[14],2878612391,15),_=fnI(_,$,k,b,a[5],4237533241,21),b=fnI(b,_,$,k,a[12],1700485571,6),k=fnI(k,b,_,$,a[3],2399980690,10),$=fnI($,k,b,_,a[10],4293915773,15),_=fnI(_,$,k,b,a[1],2240044497,21),b=fnI(b,_,$,k,a[8],1873313359,6),k=fnI(k,b,_,$,a[15],4264355552,10),$=fnI($,k,b,_,a[6],2734768916,15),_=fnI(_,$,k,b,a[13],1309151649,21),b=fnI(b,_,$,k,a[4],4149444226,6),k=fnI(k,b,_,$,a[11],3174756917,10),$=fnI($,k,b,_,a[2],718787259,15),_=fnI(_,$,k,b,a[9],3951481745,21),this._a=this._a+b|0,this._b=this._b+_|0,this._c=this._c+$|0,this._d=this._d+k|0};MD5$3.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var a=Buffer$G.allocUnsafe(16);return a.writeInt32LE(this._a,0),a.writeInt32LE(this._b,4),a.writeInt32LE(this._c,8),a.writeInt32LE(this._d,12),a};function rotl$1(a,c){return a<<c|a>>>32-c}function fnF(a,c,b,_,$,k,et){return rotl$1(a+(c&b|~c&_)+$+k|0,et)+c|0}function fnG(a,c,b,_,$,k,et){return rotl$1(a+(c&_|b&~_)+$+k|0,et)+c|0}function fnH(a,c,b,_,$,k,et){return rotl$1(a+(c^b^_)+$+k|0,et)+c|0}function fnI(a,c,b,_,$,k,et){return rotl$1(a+(b^(c|~_))+$+k|0,et)+c|0}var md5_js=MD5$3,Buffer$F=require$$0$2.Buffer,inherits$s=inherits_browserExports,HashBase=hashBase,ARRAY16=new Array(16),zl=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],zr=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],sl$1=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],sr=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],hl$1=[0,1518500249,1859775393,2400959708,2840853838],hr=[1352829926,1548603684,1836072691,2053994217,0];function RIPEMD160$4(){HashBase.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520}inherits$s(RIPEMD160$4,HashBase);RIPEMD160$4.prototype._update=function(){for(var a=ARRAY16,c=0;c<16;++c)a[c]=this._block.readInt32LE(c*4);for(var b=this._a|0,_=this._b|0,$=this._c|0,k=this._d|0,et=this._e|0,nt=this._a|0,ot=this._b|0,ht=this._c|0,vt=this._d|0,_t=this._e|0,kt=0;kt<80;kt+=1){var $t,Tt;kt<16?($t=fn1(b,_,$,k,et,a[zl[kt]],hl$1[0],sl$1[kt]),Tt=fn5(nt,ot,ht,vt,_t,a[zr[kt]],hr[0],sr[kt])):kt<32?($t=fn2(b,_,$,k,et,a[zl[kt]],hl$1[1],sl$1[kt]),Tt=fn4(nt,ot,ht,vt,_t,a[zr[kt]],hr[1],sr[kt])):kt<48?($t=fn3(b,_,$,k,et,a[zl[kt]],hl$1[2],sl$1[kt]),Tt=fn3(nt,ot,ht,vt,_t,a[zr[kt]],hr[2],sr[kt])):kt<64?($t=fn4(b,_,$,k,et,a[zl[kt]],hl$1[3],sl$1[kt]),Tt=fn2(nt,ot,ht,vt,_t,a[zr[kt]],hr[3],sr[kt])):($t=fn5(b,_,$,k,et,a[zl[kt]],hl$1[4],sl$1[kt]),Tt=fn1(nt,ot,ht,vt,_t,a[zr[kt]],hr[4],sr[kt])),b=et,et=k,k=rotl($,10),$=_,_=$t,nt=_t,_t=vt,vt=rotl(ht,10),ht=ot,ot=Tt}var At=this._b+$+vt|0;this._b=this._c+k+_t|0,this._c=this._d+et+nt|0,this._d=this._e+b+ot|0,this._e=this._a+_+ht|0,this._a=At};RIPEMD160$4.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var a=Buffer$F.alloc?Buffer$F.alloc(20):new Buffer$F(20);return a.writeInt32LE(this._a,0),a.writeInt32LE(this._b,4),a.writeInt32LE(this._c,8),a.writeInt32LE(this._d,12),a.writeInt32LE(this._e,16),a};function rotl(a,c){return a<<c|a>>>32-c}function fn1(a,c,b,_,$,k,et,nt){return rotl(a+(c^b^_)+k+et|0,nt)+$|0}function fn2(a,c,b,_,$,k,et,nt){return rotl(a+(c&b|~c&_)+k+et|0,nt)+$|0}function fn3(a,c,b,_,$,k,et,nt){return rotl(a+((c|~b)^_)+k+et|0,nt)+$|0}function fn4(a,c,b,_,$,k,et,nt){return rotl(a+(c&_|b&~_)+k+et|0,nt)+$|0}function fn5(a,c,b,_,$,k,et,nt){return rotl(a+(c^(b|~_))+k+et|0,nt)+$|0}var ripemd160=RIPEMD160$4,sha_js={exports:{}},Buffer$E=safeBufferExports$3.Buffer;function Hash$7(a,c){this._block=Buffer$E.alloc(a),this._finalSize=c,this._blockSize=a,this._len=0}Hash$7.prototype.update=function(a,c){typeof a=="string"&&(c=c||"utf8",a=Buffer$E.from(a,c));for(var b=this._block,_=this._blockSize,$=a.length,k=this._len,et=0;et<$;){for(var nt=k%_,ot=Math.min($-et,_-nt),ht=0;ht<ot;ht++)b[nt+ht]=a[et+ht];k+=ot,et+=ot,k%_===0&&this._update(b)}return this._len+=$,this};Hash$7.prototype.digest=function(a){var c=this._len%this._blockSize;this._block[c]=128,this._block.fill(0,c+1),c>=this._finalSize&&(this._update(this._block),this._block.fill(0));var b=this._len*8;if(b<=4294967295)this._block.writeUInt32BE(b,this._blockSize-4);else{var _=(b&4294967295)>>>0,$=(b-_)/4294967296;this._block.writeUInt32BE($,this._blockSize-8),this._block.writeUInt32BE(_,this._blockSize-4)}this._update(this._block);var k=this._hash();return a?k.toString(a):k};Hash$7.prototype._update=function(){throw new Error("_update must be implemented by subclass")};var hash$3=Hash$7,inherits$r=inherits_browserExports,Hash$6=hash$3,Buffer$D=safeBufferExports$3.Buffer,K$6=[1518500249,1859775393,-1894007588,-899497514],W$7=new Array(80);function Sha(){this.init(),this._w=W$7,Hash$6.call(this,64,56)}inherits$r(Sha,Hash$6);Sha.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this};function rotl5$1(a){return a<<5|a>>>27}function rotl30$1(a){return a<<30|a>>>2}function ft$1(a,c,b,_){return a===0?c&b|~c&_:a===2?c&b|c&_|b&_:c^b^_}Sha.prototype._update=function(a){for(var c=this._w,b=this._a|0,_=this._b|0,$=this._c|0,k=this._d|0,et=this._e|0,nt=0;nt<16;++nt)c[nt]=a.readInt32BE(nt*4);for(;nt<80;++nt)c[nt]=c[nt-3]^c[nt-8]^c[nt-14]^c[nt-16];for(var ot=0;ot<80;++ot){var ht=~~(ot/20),vt=rotl5$1(b)+ft$1(ht,_,$,k)+et+c[ot]+K$6[ht]|0;et=k,k=$,$=rotl30$1(_),_=b,b=vt}this._a=b+this._a|0,this._b=_+this._b|0,this._c=$+this._c|0,this._d=k+this._d|0,this._e=et+this._e|0};Sha.prototype._hash=function(){var a=Buffer$D.allocUnsafe(20);return a.writeInt32BE(this._a|0,0),a.writeInt32BE(this._b|0,4),a.writeInt32BE(this._c|0,8),a.writeInt32BE(this._d|0,12),a.writeInt32BE(this._e|0,16),a};var sha$4=Sha,inherits$q=inherits_browserExports,Hash$5=hash$3,Buffer$C=safeBufferExports$3.Buffer,K$5=[1518500249,1859775393,-1894007588,-899497514],W$6=new Array(80);function Sha1(){this.init(),this._w=W$6,Hash$5.call(this,64,56)}inherits$q(Sha1,Hash$5);Sha1.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this};function rotl1(a){return a<<1|a>>>31}function rotl5(a){return a<<5|a>>>27}function rotl30(a){return a<<30|a>>>2}function ft(a,c,b,_){return a===0?c&b|~c&_:a===2?c&b|c&_|b&_:c^b^_}Sha1.prototype._update=function(a){for(var c=this._w,b=this._a|0,_=this._b|0,$=this._c|0,k=this._d|0,et=this._e|0,nt=0;nt<16;++nt)c[nt]=a.readInt32BE(nt*4);for(;nt<80;++nt)c[nt]=rotl1(c[nt-3]^c[nt-8]^c[nt-14]^c[nt-16]);for(var ot=0;ot<80;++ot){var ht=~~(ot/20),vt=rotl5(b)+ft(ht,_,$,k)+et+c[ot]+K$5[ht]|0;et=k,k=$,$=rotl30(_),_=b,b=vt}this._a=b+this._a|0,this._b=_+this._b|0,this._c=$+this._c|0,this._d=k+this._d|0,this._e=et+this._e|0};Sha1.prototype._hash=function(){var a=Buffer$C.allocUnsafe(20);return a.writeInt32BE(this._a|0,0),a.writeInt32BE(this._b|0,4),a.writeInt32BE(this._c|0,8),a.writeInt32BE(this._d|0,12),a.writeInt32BE(this._e|0,16),a};var sha1=Sha1,inherits$p=inherits_browserExports,Hash$4=hash$3,Buffer$B=safeBufferExports$3.Buffer,K$4=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],W$5=new Array(64);function Sha256$1(){this.init(),this._w=W$5,Hash$4.call(this,64,56)}inherits$p(Sha256$1,Hash$4);Sha256$1.prototype.init=function(){return this._a=1779033703,this._b=3144134277,this._c=1013904242,this._d=2773480762,this._e=1359893119,this._f=2600822924,this._g=528734635,this._h=1541459225,this};function ch$1(a,c,b){return b^a&(c^b)}function maj$1(a,c,b){return a&c|b&(a|c)}function sigma0$1(a){return(a>>>2|a<<30)^(a>>>13|a<<19)^(a>>>22|a<<10)}function sigma1$1(a){return(a>>>6|a<<26)^(a>>>11|a<<21)^(a>>>25|a<<7)}function gamma0(a){return(a>>>7|a<<25)^(a>>>18|a<<14)^a>>>3}function gamma1(a){return(a>>>17|a<<15)^(a>>>19|a<<13)^a>>>10}Sha256$1.prototype._update=function(a){for(var c=this._w,b=this._a|0,_=this._b|0,$=this._c|0,k=this._d|0,et=this._e|0,nt=this._f|0,ot=this._g|0,ht=this._h|0,vt=0;vt<16;++vt)c[vt]=a.readInt32BE(vt*4);for(;vt<64;++vt)c[vt]=gamma1(c[vt-2])+c[vt-7]+gamma0(c[vt-15])+c[vt-16]|0;for(var _t=0;_t<64;++_t){var kt=ht+sigma1$1(et)+ch$1(et,nt,ot)+K$4[_t]+c[_t]|0,$t=sigma0$1(b)+maj$1(b,_,$)|0;ht=ot,ot=nt,nt=et,et=k+kt|0,k=$,$=_,_=b,b=kt+$t|0}this._a=b+this._a|0,this._b=_+this._b|0,this._c=$+this._c|0,this._d=k+this._d|0,this._e=et+this._e|0,this._f=nt+this._f|0,this._g=ot+this._g|0,this._h=ht+this._h|0};Sha256$1.prototype._hash=function(){var a=Buffer$B.allocUnsafe(32);return a.writeInt32BE(this._a,0),a.writeInt32BE(this._b,4),a.writeInt32BE(this._c,8),a.writeInt32BE(this._d,12),a.writeInt32BE(this._e,16),a.writeInt32BE(this._f,20),a.writeInt32BE(this._g,24),a.writeInt32BE(this._h,28),a};var sha256$1=Sha256$1,inherits$o=inherits_browserExports,Sha256=sha256$1,Hash$3=hash$3,Buffer$A=safeBufferExports$3.Buffer,W$4=new Array(64);function Sha224(){this.init(),this._w=W$4,Hash$3.call(this,64,56)}inherits$o(Sha224,Sha256);Sha224.prototype.init=function(){return this._a=3238371032,this._b=914150663,this._c=812702999,this._d=4144912697,this._e=4290775857,this._f=1750603025,this._g=1694076839,this._h=3204075428,this};Sha224.prototype._hash=function(){var a=Buffer$A.allocUnsafe(28);return a.writeInt32BE(this._a,0),a.writeInt32BE(this._b,4),a.writeInt32BE(this._c,8),a.writeInt32BE(this._d,12),a.writeInt32BE(this._e,16),a.writeInt32BE(this._f,20),a.writeInt32BE(this._g,24),a};var sha224$1=Sha224,inherits$n=inherits_browserExports,Hash$2=hash$3,Buffer$z=safeBufferExports$3.Buffer,K$3=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],W$3=new Array(160);function Sha512(){this.init(),this._w=W$3,Hash$2.call(this,128,112)}inherits$n(Sha512,Hash$2);Sha512.prototype.init=function(){return this._ah=1779033703,this._bh=3144134277,this._ch=1013904242,this._dh=2773480762,this._eh=1359893119,this._fh=2600822924,this._gh=528734635,this._hh=1541459225,this._al=4089235720,this._bl=2227873595,this._cl=4271175723,this._dl=1595750129,this._el=2917565137,this._fl=725511199,this._gl=4215389547,this._hl=327033209,this};function Ch$1(a,c,b){return b^a&(c^b)}function maj(a,c,b){return a&c|b&(a|c)}function sigma0(a,c){return(a>>>28|c<<4)^(c>>>2|a<<30)^(c>>>7|a<<25)}function sigma1(a,c){return(a>>>14|c<<18)^(a>>>18|c<<14)^(c>>>9|a<<23)}function Gamma0(a,c){return(a>>>1|c<<31)^(a>>>8|c<<24)^a>>>7}function Gamma0l(a,c){return(a>>>1|c<<31)^(a>>>8|c<<24)^(a>>>7|c<<25)}function Gamma1(a,c){return(a>>>19|c<<13)^(c>>>29|a<<3)^a>>>6}function Gamma1l(a,c){return(a>>>19|c<<13)^(c>>>29|a<<3)^(a>>>6|c<<26)}function getCarry(a,c){return a>>>0<c>>>0?1:0}Sha512.prototype._update=function(a){for(var c=this._w,b=this._ah|0,_=this._bh|0,$=this._ch|0,k=this._dh|0,et=this._eh|0,nt=this._fh|0,ot=this._gh|0,ht=this._hh|0,vt=this._al|0,_t=this._bl|0,kt=this._cl|0,$t=this._dl|0,Tt=this._el|0,At=this._fl|0,Mt=this._gl|0,Dt=this._hl|0,Rt=0;Rt<32;Rt+=2)c[Rt]=a.readInt32BE(Rt*4),c[Rt+1]=a.readInt32BE(Rt*4+4);for(;Rt<160;Rt+=2){var xt=c[Rt-30],Jt=c[Rt-15*2+1],ar=Gamma0(xt,Jt),nr=Gamma0l(Jt,xt);xt=c[Rt-2*2],Jt=c[Rt-2*2+1];var pr=Gamma1(xt,Jt),ur=Gamma1l(Jt,xt),Ot=c[Rt-7*2],It=c[Rt-7*2+1],ut=c[Rt-16*2],_e=c[Rt-16*2+1],tt=nr+It|0,it=ar+Ot+getCarry(tt,nr)|0;tt=tt+ur|0,it=it+pr+getCarry(tt,ur)|0,tt=tt+_e|0,it=it+ut+getCarry(tt,_e)|0,c[Rt]=it,c[Rt+1]=tt}for(var dt=0;dt<160;dt+=2){it=c[dt],tt=c[dt+1];var lt=maj(b,_,$),gt=maj(vt,_t,kt),Et=sigma0(b,vt),pt=sigma0(vt,b),rt=sigma1(et,Tt),mt=sigma1(Tt,et),Lt=K$3[dt],Gt=K$3[dt+1],rr=Ch$1(et,nt,ot),ir=Ch$1(Tt,At,Mt),Wt=Dt+mt|0,zt=ht+rt+getCarry(Wt,Dt)|0;Wt=Wt+ir|0,zt=zt+rr+getCarry(Wt,ir)|0,Wt=Wt+Gt|0,zt=zt+Lt+getCarry(Wt,Gt)|0,Wt=Wt+tt|0,zt=zt+it+getCarry(Wt,tt)|0;var wt=pt+gt|0,Vt=Et+lt+getCarry(wt,pt)|0;ht=ot,Dt=Mt,ot=nt,Mt=At,nt=et,At=Tt,Tt=$t+Wt|0,et=k+zt+getCarry(Tt,$t)|0,k=$,$t=kt,$=_,kt=_t,_=b,_t=vt,vt=Wt+wt|0,b=zt+Vt+getCarry(vt,Wt)|0}this._al=this._al+vt|0,this._bl=this._bl+_t|0,this._cl=this._cl+kt|0,this._dl=this._dl+$t|0,this._el=this._el+Tt|0,this._fl=this._fl+At|0,this._gl=this._gl+Mt|0,this._hl=this._hl+Dt|0,this._ah=this._ah+b+getCarry(this._al,vt)|0,this._bh=this._bh+_+getCarry(this._bl,_t)|0,this._ch=this._ch+$+getCarry(this._cl,kt)|0,this._dh=this._dh+k+getCarry(this._dl,$t)|0,this._eh=this._eh+et+getCarry(this._el,Tt)|0,this._fh=this._fh+nt+getCarry(this._fl,At)|0,this._gh=this._gh+ot+getCarry(this._gl,Mt)|0,this._hh=this._hh+ht+getCarry(this._hl,Dt)|0};Sha512.prototype._hash=function(){var a=Buffer$z.allocUnsafe(64);function c(b,_,$){a.writeInt32BE(b,$),a.writeInt32BE(_,$+4)}return c(this._ah,this._al,0),c(this._bh,this._bl,8),c(this._ch,this._cl,16),c(this._dh,this._dl,24),c(this._eh,this._el,32),c(this._fh,this._fl,40),c(this._gh,this._gl,48),c(this._hh,this._hl,56),a};var sha512$1=Sha512,inherits$m=inherits_browserExports,SHA512$2=sha512$1,Hash$1=hash$3,Buffer$y=safeBufferExports$3.Buffer,W$2=new Array(160);function Sha384(){this.init(),this._w=W$2,Hash$1.call(this,128,112)}inherits$m(Sha384,SHA512$2);Sha384.prototype.init=function(){return this._ah=3418070365,this._bh=1654270250,this._ch=2438529370,this._dh=355462360,this._eh=1731405415,this._fh=2394180231,this._gh=3675008525,this._hh=1203062813,this._al=3238371032,this._bl=914150663,this._cl=812702999,this._dl=4144912697,this._el=4290775857,this._fl=1750603025,this._gl=1694076839,this._hl=3204075428,this};Sha384.prototype._hash=function(){var a=Buffer$y.allocUnsafe(48);function c(b,_,$){a.writeInt32BE(b,$),a.writeInt32BE(_,$+4)}return c(this._ah,this._al,0),c(this._bh,this._bl,8),c(this._ch,this._cl,16),c(this._dh,this._dl,24),c(this._eh,this._el,32),c(this._fh,this._fl,40),a};var sha384$1=Sha384,exports$1=sha_js.exports=function a(c){c=c.toLowerCase();var b=exports$1[c];if(!b)throw new Error(c+" is not supported (we accept pull requests)");return new b};exports$1.sha=sha$4;exports$1.sha1=sha1;exports$1.sha224=sha224$1;exports$1.sha256=sha256$1;exports$1.sha384=sha384$1;exports$1.sha512=sha512$1;var sha_jsExports=sha_js.exports,Buffer$x=safeBufferExports$3.Buffer,Transform$6=streamBrowserify.Transform,StringDecoder=string_decoder.StringDecoder,inherits$l=inherits_browserExports;function CipherBase$1(a){Transform$6.call(this),this.hashMode=typeof a=="string",this.hashMode?this[a]=this._finalOrDigest:this.final=this._finalOrDigest,this._final&&(this.__final=this._final,this._final=null),this._decoder=null,this._encoding=null}inherits$l(CipherBase$1,Transform$6);CipherBase$1.prototype.update=function(a,c,b){typeof a=="string"&&(a=Buffer$x.from(a,c));var _=this._update(a);return this.hashMode?this:(b&&(_=this._toString(_,b)),_)};CipherBase$1.prototype.setAutoPadding=function(){};CipherBase$1.prototype.getAuthTag=function(){throw new Error("trying to get auth tag in unsupported state")};CipherBase$1.prototype.setAuthTag=function(){throw new Error("trying to set auth tag in unsupported state")};CipherBase$1.prototype.setAAD=function(){throw new Error("trying to set aad in unsupported state")};CipherBase$1.prototype._transform=function(a,c,b){var _;try{this.hashMode?this._update(a):this.push(this._update(a))}catch($){_=$}finally{b(_)}};CipherBase$1.prototype._flush=function(a){var c;try{this.push(this.__final())}catch(b){c=b}a(c)};CipherBase$1.prototype._finalOrDigest=function(a){var c=this.__final()||Buffer$x.alloc(0);return a&&(c=this._toString(c,a,!0)),c};CipherBase$1.prototype._toString=function(a,c,b){if(this._decoder||(this._decoder=new StringDecoder(c),this._encoding=c),this._encoding!==c)throw new Error("can't switch encodings");var _=this._decoder.write(a);return b&&(_+=this._decoder.end()),_};var cipherBase=CipherBase$1,inherits$k=inherits_browserExports,MD5$2=md5_js,RIPEMD160$3=ripemd160,sha$3=sha_jsExports,Base$5=cipherBase;function Hash(a){Base$5.call(this,"digest"),this._hash=a}inherits$k(Hash,Base$5);Hash.prototype._update=function(a){this._hash.update(a)};Hash.prototype._final=function(){return this._hash.digest()};var browser$a=function a(c){return c=c.toLowerCase(),c==="md5"?new MD5$2:c==="rmd160"||c==="ripemd160"?new RIPEMD160$3:new Hash(sha$3(c))},inherits$j=inherits_browserExports,Buffer$w=safeBufferExports$3.Buffer,Base$4=cipherBase,ZEROS$2=Buffer$w.alloc(128),blocksize=64;function Hmac$3(a,c){Base$4.call(this,"digest"),typeof c=="string"&&(c=Buffer$w.from(c)),this._alg=a,this._key=c,c.length>blocksize?c=a(c):c.length<blocksize&&(c=Buffer$w.concat([c,ZEROS$2],blocksize));for(var b=this._ipad=Buffer$w.allocUnsafe(blocksize),_=this._opad=Buffer$w.allocUnsafe(blocksize),$=0;$<blocksize;$++)b[$]=c[$]^54,_[$]=c[$]^92;this._hash=[b]}inherits$j(Hmac$3,Base$4);Hmac$3.prototype._update=function(a){this._hash.push(a)};Hmac$3.prototype._final=function(){var a=this._alg(Buffer$w.concat(this._hash));return this._alg(Buffer$w.concat([this._opad,a]))};var legacy=Hmac$3,MD5$1=md5_js,md5$2=function(a){return new MD5$1().update(a).digest()},inherits$i=inherits_browserExports,Legacy=legacy,Base$3=cipherBase,Buffer$v=safeBufferExports$3.Buffer,md5$1=md5$2,RIPEMD160$2=ripemd160,sha$2=sha_jsExports,ZEROS$1=Buffer$v.alloc(128);function Hmac$2(a,c){Base$3.call(this,"digest"),typeof c=="string"&&(c=Buffer$v.from(c));var b=a==="sha512"||a==="sha384"?128:64;if(this._alg=a,this._key=c,c.length>b){var _=a==="rmd160"?new RIPEMD160$2:sha$2(a);c=_.update(c).digest()}else c.length<b&&(c=Buffer$v.concat([c,ZEROS$1],b));for(var $=this._ipad=Buffer$v.allocUnsafe(b),k=this._opad=Buffer$v.allocUnsafe(b),et=0;et<b;et++)$[et]=c[et]^54,k[et]=c[et]^92;this._hash=a==="rmd160"?new RIPEMD160$2:sha$2(a),this._hash.update($)}inherits$i(Hmac$2,Base$3);Hmac$2.prototype._update=function(a){this._hash.update(a)};Hmac$2.prototype._final=function(){var a=this._hash.digest(),c=this._alg==="rmd160"?new RIPEMD160$2:sha$2(this._alg);return c.update(this._opad).update(a).digest()};var browser$9=function a(c,b){return c=c.toLowerCase(),c==="rmd160"||c==="ripemd160"?new Hmac$2("rmd160",b):c==="md5"?new Legacy(md5$1,b):new Hmac$2(c,b)};const sha224WithRSAEncryption={sign:"rsa",hash:"sha224",id:"302d300d06096086480165030402040500041c"},sha256WithRSAEncryption={sign:"rsa",hash:"sha256",id:"3031300d060960864801650304020105000420"},sha384WithRSAEncryption={sign:"rsa",hash:"sha384",id:"3041300d060960864801650304020205000430"},sha512WithRSAEncryption={sign:"rsa",hash:"sha512",id:"3051300d060960864801650304020305000440"},sha256={sign:"ecdsa",hash:"sha256",id:""},sha224={sign:"ecdsa",hash:"sha224",id:""},sha384={sign:"ecdsa",hash:"sha384",id:""},sha512={sign:"ecdsa",hash:"sha512",id:""},DSA={sign:"dsa",hash:"sha1",id:""},ripemd160WithRSA={sign:"rsa",hash:"rmd160",id:"3021300906052b2403020105000414"},md5WithRSAEncryption={sign:"rsa",hash:"md5",id:"3020300c06082a864886f70d020505000410"},require$$6={sha224WithRSAEncryption,"RSA-SHA224":{sign:"ecdsa/rsa",hash:"sha224",id:"302d300d06096086480165030402040500041c"},sha256WithRSAEncryption,"RSA-SHA256":{sign:"ecdsa/rsa",hash:"sha256",id:"3031300d060960864801650304020105000420"},sha384WithRSAEncryption,"RSA-SHA384":{sign:"ecdsa/rsa",hash:"sha384",id:"3041300d060960864801650304020205000430"},sha512WithRSAEncryption,"RSA-SHA512":{sign:"ecdsa/rsa",hash:"sha512",id:"3051300d060960864801650304020305000440"},"RSA-SHA1":{sign:"rsa",hash:"sha1",id:"3021300906052b0e03021a05000414"},"ecdsa-with-SHA1":{sign:"ecdsa",hash:"sha1",id:""},sha256,sha224,sha384,sha512,"DSA-SHA":{sign:"dsa",hash:"sha1",id:""},"DSA-SHA1":{sign:"dsa",hash:"sha1",id:""},DSA,"DSA-WITH-SHA224":{sign:"dsa",hash:"sha224",id:""},"DSA-SHA224":{sign:"dsa",hash:"sha224",id:""},"DSA-WITH-SHA256":{sign:"dsa",hash:"sha256",id:""},"DSA-SHA256":{sign:"dsa",hash:"sha256",id:""},"DSA-WITH-SHA384":{sign:"dsa",hash:"sha384",id:""},"DSA-SHA384":{sign:"dsa",hash:"sha384",id:""},"DSA-WITH-SHA512":{sign:"dsa",hash:"sha512",id:""},"DSA-SHA512":{sign:"dsa",hash:"sha512",id:""},"DSA-RIPEMD160":{sign:"dsa",hash:"rmd160",id:""},ripemd160WithRSA,"RSA-RIPEMD160":{sign:"rsa",hash:"rmd160",id:"3021300906052b2403020105000414"},md5WithRSAEncryption,"RSA-MD5":{sign:"rsa",hash:"md5",id:"3020300c06082a864886f70d020505000410"}};var algos=require$$6,browser$8={},MAX_ALLOC=Math.pow(2,30)-1,precondition=function(a,c){if(typeof a!="number")throw new TypeError("Iterations not a number");if(a<0)throw new TypeError("Bad iterations");if(typeof c!="number")throw new TypeError("Key length not a number");if(c<0||c>MAX_ALLOC||c!==c)throw new TypeError("Bad key length")},defaultEncoding$2;if(commonjsGlobal$1.process&&commonjsGlobal$1.process.browser)defaultEncoding$2="utf-8";else if(commonjsGlobal$1.process&&commonjsGlobal$1.process.version){var pVersionMajor=parseInt(process$1.version.split(".")[0].slice(1),10);defaultEncoding$2=pVersionMajor>=6?"utf-8":"binary"}else defaultEncoding$2="utf-8";var defaultEncoding_1=defaultEncoding$2,Buffer$u=safeBufferExports$3.Buffer,toBuffer$2=function(a,c,b){if(Buffer$u.isBuffer(a))return a;if(typeof a=="string")return Buffer$u.from(a,c);if(ArrayBuffer.isView(a))return Buffer$u.from(a.buffer);throw new TypeError(b+" must be a string, a Buffer, a typed array or a DataView")},md5=md5$2,RIPEMD160$1=ripemd160,sha$1=sha_jsExports,Buffer$t=safeBufferExports$3.Buffer,checkParameters$1=precondition,defaultEncoding$1=defaultEncoding_1,toBuffer$1=toBuffer$2,ZEROS=Buffer$t.alloc(128),sizes={md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,rmd160:20,ripemd160:20};function Hmac$1(a,c,b){var _=getDigest(a),$=a==="sha512"||a==="sha384"?128:64;c.length>$?c=_(c):c.length<$&&(c=Buffer$t.concat([c,ZEROS],$));for(var k=Buffer$t.allocUnsafe($+sizes[a]),et=Buffer$t.allocUnsafe($+sizes[a]),nt=0;nt<$;nt++)k[nt]=c[nt]^54,et[nt]=c[nt]^92;var ot=Buffer$t.allocUnsafe($+b+4);k.copy(ot,0,0,$),this.ipad1=ot,this.ipad2=k,this.opad=et,this.alg=a,this.blocksize=$,this.hash=_,this.size=sizes[a]}Hmac$1.prototype.run=function(a,c){a.copy(c,this.blocksize);var b=this.hash(c);return b.copy(this.opad,this.blocksize),this.hash(this.opad)};function getDigest(a){function c(_){return sha$1(a).update(_).digest()}function b(_){return new RIPEMD160$1().update(_).digest()}return a==="rmd160"||a==="ripemd160"?b:a==="md5"?md5:c}function pbkdf2(a,c,b,_,$){checkParameters$1(b,_),a=toBuffer$1(a,defaultEncoding$1,"Password"),c=toBuffer$1(c,defaultEncoding$1,"Salt"),$=$||"sha1";var k=new Hmac$1($,a,c.length),et=Buffer$t.allocUnsafe(_),nt=Buffer$t.allocUnsafe(c.length+4);c.copy(nt,0,0,c.length);for(var ot=0,ht=sizes[$],vt=Math.ceil(_/ht),_t=1;_t<=vt;_t++){nt.writeUInt32BE(_t,c.length);for(var kt=k.run(nt,k.ipad1),$t=kt,Tt=1;Tt<b;Tt++){$t=k.run($t,k.ipad2);for(var At=0;At<ht;At++)kt[At]^=$t[At]}kt.copy(et,ot),ot+=ht}return et}var syncBrowser=pbkdf2,Buffer$s=safeBufferExports$3.Buffer,checkParameters=precondition,defaultEncoding=defaultEncoding_1,sync=syncBrowser,toBuffer=toBuffer$2,ZERO_BUF,subtle=commonjsGlobal$1.crypto&&commonjsGlobal$1.crypto.subtle,toBrowser={sha:"SHA-1","sha-1":"SHA-1",sha1:"SHA-1",sha256:"SHA-256","sha-256":"SHA-256",sha384:"SHA-384","sha-384":"SHA-384","sha-512":"SHA-512",sha512:"SHA-512"},checks=[];function checkNative(a){if(commonjsGlobal$1.process&&!commonjsGlobal$1.process.browser||!subtle||!subtle.importKey||!subtle.deriveBits)return Promise.resolve(!1);if(checks[a]!==void 0)return checks[a];ZERO_BUF=ZERO_BUF||Buffer$s.alloc(8);var c=browserPbkdf2(ZERO_BUF,ZERO_BUF,10,128,a).then(function(){return!0}).catch(function(){return!1});return checks[a]=c,c}var nextTick$1;function getNextTick(){return nextTick$1||(commonjsGlobal$1.process&&commonjsGlobal$1.process.nextTick?nextTick$1=commonjsGlobal$1.process.nextTick:commonjsGlobal$1.queueMicrotask?nextTick$1=commonjsGlobal$1.queueMicrotask:commonjsGlobal$1.setImmediate?nextTick$1=commonjsGlobal$1.setImmediate:nextTick$1=commonjsGlobal$1.setTimeout,nextTick$1)}function browserPbkdf2(a,c,b,_,$){return subtle.importKey("raw",a,{name:"PBKDF2"},!1,["deriveBits"]).then(function(k){return subtle.deriveBits({name:"PBKDF2",salt:c,iterations:b,hash:{name:$}},k,_<<3)}).then(function(k){return Buffer$s.from(k)})}function resolvePromise(a,c){a.then(function(b){getNextTick()(function(){c(null,b)})},function(b){getNextTick()(function(){c(b)})})}var async=function(a,c,b,_,$,k){typeof $=="function"&&(k=$,$=void 0),$=$||"sha1";var et=toBrowser[$.toLowerCase()];if(!et||typeof commonjsGlobal$1.Promise!="function"){getNextTick()(function(){var nt;try{nt=sync(a,c,b,_,$)}catch(ot){return k(ot)}k(null,nt)});return}if(checkParameters(b,_),a=toBuffer(a,defaultEncoding,"Password"),c=toBuffer(c,defaultEncoding,"Salt"),typeof k!="function")throw new Error("No callback provided to pbkdf2");resolvePromise(checkNative(et).then(function(nt){return nt?browserPbkdf2(a,c,b,_,et):sync(a,c,b,_,$)}),k)};browser$8.pbkdf2=async;browser$8.pbkdf2Sync=syncBrowser;var browser$7={},des$2={},utils$x={};utils$x.readUInt32BE=function a(c,b){var _=c[0+b]<<24|c[1+b]<<16|c[2+b]<<8|c[3+b];return _>>>0};utils$x.writeUInt32BE=function a(c,b,_){c[0+_]=b>>>24,c[1+_]=b>>>16&255,c[2+_]=b>>>8&255,c[3+_]=b&255};utils$x.ip=function a(c,b,_,$){for(var k=0,et=0,nt=6;nt>=0;nt-=2){for(var ot=0;ot<=24;ot+=8)k<<=1,k|=b>>>ot+nt&1;for(var ot=0;ot<=24;ot+=8)k<<=1,k|=c>>>ot+nt&1}for(var nt=6;nt>=0;nt-=2){for(var ot=1;ot<=25;ot+=8)et<<=1,et|=b>>>ot+nt&1;for(var ot=1;ot<=25;ot+=8)et<<=1,et|=c>>>ot+nt&1}_[$+0]=k>>>0,_[$+1]=et>>>0};utils$x.rip=function a(c,b,_,$){for(var k=0,et=0,nt=0;nt<4;nt++)for(var ot=24;ot>=0;ot-=8)k<<=1,k|=b>>>ot+nt&1,k<<=1,k|=c>>>ot+nt&1;for(var nt=4;nt<8;nt++)for(var ot=24;ot>=0;ot-=8)et<<=1,et|=b>>>ot+nt&1,et<<=1,et|=c>>>ot+nt&1;_[$+0]=k>>>0,_[$+1]=et>>>0};utils$x.pc1=function a(c,b,_,$){for(var k=0,et=0,nt=7;nt>=5;nt--){for(var ot=0;ot<=24;ot+=8)k<<=1,k|=b>>ot+nt&1;for(var ot=0;ot<=24;ot+=8)k<<=1,k|=c>>ot+nt&1}for(var ot=0;ot<=24;ot+=8)k<<=1,k|=b>>ot+nt&1;for(var nt=1;nt<=3;nt++){for(var ot=0;ot<=24;ot+=8)et<<=1,et|=b>>ot+nt&1;for(var ot=0;ot<=24;ot+=8)et<<=1,et|=c>>ot+nt&1}for(var ot=0;ot<=24;ot+=8)et<<=1,et|=c>>ot+nt&1;_[$+0]=k>>>0,_[$+1]=et>>>0};utils$x.r28shl=function a(c,b){return c<<b&268435455|c>>>28-b};var pc2table=[14,11,17,4,27,23,25,0,13,22,7,18,5,9,16,24,2,20,12,21,1,8,15,26,15,4,25,19,9,1,26,16,5,11,23,8,12,7,17,0,22,3,10,14,6,20,27,24];utils$x.pc2=function a(c,b,_,$){for(var k=0,et=0,nt=pc2table.length>>>1,ot=0;ot<nt;ot++)k<<=1,k|=c>>>pc2table[ot]&1;for(var ot=nt;ot<pc2table.length;ot++)et<<=1,et|=b>>>pc2table[ot]&1;_[$+0]=k>>>0,_[$+1]=et>>>0};utils$x.expand=function a(c,b,_){var $=0,k=0;$=(c&1)<<5|c>>>27;for(var et=23;et>=15;et-=4)$<<=6,$|=c>>>et&63;for(var et=11;et>=3;et-=4)k|=c>>>et&63,k<<=6;k|=(c&31)<<1|c>>>31,b[_+0]=$>>>0,b[_+1]=k>>>0};var sTable=[14,0,4,15,13,7,1,4,2,14,15,2,11,13,8,1,3,10,10,6,6,12,12,11,5,9,9,5,0,3,7,8,4,15,1,12,14,8,8,2,13,4,6,9,2,1,11,7,15,5,12,11,9,3,7,14,3,10,10,0,5,6,0,13,15,3,1,13,8,4,14,7,6,15,11,2,3,8,4,14,9,12,7,0,2,1,13,10,12,6,0,9,5,11,10,5,0,13,14,8,7,10,11,1,10,3,4,15,13,4,1,2,5,11,8,6,12,7,6,12,9,0,3,5,2,14,15,9,10,13,0,7,9,0,14,9,6,3,3,4,15,6,5,10,1,2,13,8,12,5,7,14,11,12,4,11,2,15,8,1,13,1,6,10,4,13,9,0,8,6,15,9,3,8,0,7,11,4,1,15,2,14,12,3,5,11,10,5,14,2,7,12,7,13,13,8,14,11,3,5,0,6,6,15,9,0,10,3,1,4,2,7,8,2,5,12,11,1,12,10,4,14,15,9,10,3,6,15,9,0,0,6,12,10,11,1,7,13,13,8,15,9,1,4,3,5,14,11,5,12,2,7,8,2,4,14,2,14,12,11,4,2,1,12,7,4,10,7,11,13,6,1,8,5,5,0,3,15,15,10,13,3,0,9,14,8,9,6,4,11,2,8,1,12,11,7,10,1,13,14,7,2,8,13,15,6,9,15,12,0,5,9,6,10,3,4,0,5,14,3,12,10,1,15,10,4,15,2,9,7,2,12,6,9,8,5,0,6,13,1,3,13,4,14,14,0,7,11,5,3,11,8,9,4,14,3,15,2,5,12,2,9,8,5,12,15,3,10,7,11,0,14,4,1,10,7,1,6,13,0,11,8,6,13,4,13,11,0,2,11,14,7,15,4,0,9,8,1,13,10,3,14,12,3,9,5,7,12,5,2,10,15,6,8,1,6,1,6,4,11,11,13,13,8,12,1,3,4,7,10,14,7,10,9,15,5,6,0,8,15,0,14,5,2,9,3,2,12,13,1,2,15,8,13,4,8,6,10,15,3,11,7,1,4,10,12,9,5,3,6,14,11,5,0,0,14,12,9,7,2,7,2,11,1,4,14,1,7,9,4,12,10,14,8,2,13,0,15,6,12,10,9,13,0,15,3,3,5,5,6,8,11];utils$x.substitute=function a(c,b){for(var _=0,$=0;$<4;$++){var k=c>>>18-$*6&63,et=sTable[$*64+k];_<<=4,_|=et}for(var $=0;$<4;$++){var k=b>>>18-$*6&63,et=sTable[4*64+$*64+k];_<<=4,_|=et}return _>>>0};var permuteTable=[16,25,12,11,3,20,4,15,31,17,9,6,27,14,1,22,30,24,8,18,0,5,29,23,13,19,2,26,10,21,28,7];utils$x.permute=function a(c){for(var b=0,_=0;_<permuteTable.length;_++)b<<=1,b|=c>>>permuteTable[_]&1;return b>>>0};utils$x.padSplit=function a(c,b,_){for(var $=c.toString(2);$.length<b;)$="0"+$;for(var k=[],et=0;et<b;et+=_)k.push($.slice(et,et+_));return k.join(" ")};var minimalisticAssert=assert$j;function assert$j(a,c){if(!a)throw new Error(c||"Assertion failed")}assert$j.equal=function a(c,b,_){if(c!=b)throw new Error(_||"Assertion failed: "+c+" != "+b)};var assert$i=minimalisticAssert;function Cipher$3(a){this.options=a,this.type=this.options.type,this.blockSize=8,this._init(),this.buffer=new Array(this.blockSize),this.bufferOff=0,this.padding=a.padding!==!1}var cipher=Cipher$3;Cipher$3.prototype._init=function a(){};Cipher$3.prototype.update=function a(c){return c.length===0?[]:this.type==="decrypt"?this._updateDecrypt(c):this._updateEncrypt(c)};Cipher$3.prototype._buffer=function a(c,b){for(var _=Math.min(this.buffer.length-this.bufferOff,c.length-b),$=0;$<_;$++)this.buffer[this.bufferOff+$]=c[b+$];return this.bufferOff+=_,_};Cipher$3.prototype._flushBuffer=function a(c,b){return this._update(this.buffer,0,c,b),this.bufferOff=0,this.blockSize};Cipher$3.prototype._updateEncrypt=function a(c){var b=0,_=0,$=(this.bufferOff+c.length)/this.blockSize|0,k=new Array($*this.blockSize);this.bufferOff!==0&&(b+=this._buffer(c,b),this.bufferOff===this.buffer.length&&(_+=this._flushBuffer(k,_)));for(var et=c.length-(c.length-b)%this.blockSize;b<et;b+=this.blockSize)this._update(c,b,k,_),_+=this.blockSize;for(;b<c.length;b++,this.bufferOff++)this.buffer[this.bufferOff]=c[b];return k};Cipher$3.prototype._updateDecrypt=function a(c){for(var b=0,_=0,$=Math.ceil((this.bufferOff+c.length)/this.blockSize)-1,k=new Array($*this.blockSize);$>0;$--)b+=this._buffer(c,b),_+=this._flushBuffer(k,_);return b+=this._buffer(c,b),k};Cipher$3.prototype.final=function a(c){var b;c&&(b=this.update(c));var _;return this.type==="encrypt"?_=this._finalEncrypt():_=this._finalDecrypt(),b?b.concat(_):_};Cipher$3.prototype._pad=function a(c,b){if(b===0)return!1;for(;b<c.length;)c[b++]=0;return!0};Cipher$3.prototype._finalEncrypt=function a(){if(!this._pad(this.buffer,this.bufferOff))return[];var c=new Array(this.blockSize);return this._update(this.buffer,0,c,0),c};Cipher$3.prototype._unpad=function a(c){return c};Cipher$3.prototype._finalDecrypt=function a(){assert$i.equal(this.bufferOff,this.blockSize,"Not enough data to decrypt");var c=new Array(this.blockSize);return this._flushBuffer(c,0),this._unpad(c)};var assert$h=minimalisticAssert,inherits$h=inherits_browserExports,utils$w=utils$x,Cipher$2=cipher;function DESState(){this.tmp=new Array(2),this.keys=null}function DES$3(a){Cipher$2.call(this,a);var c=new DESState;this._desState=c,this.deriveKeys(c,a.key)}inherits$h(DES$3,Cipher$2);var des$1=DES$3;DES$3.create=function a(c){return new DES$3(c)};var shiftTable=[1,1,2,2,2,2,2,2,1,2,2,2,2,2,2,1];DES$3.prototype.deriveKeys=function a(c,b){c.keys=new Array(16*2),assert$h.equal(b.length,this.blockSize,"Invalid key length");var _=utils$w.readUInt32BE(b,0),$=utils$w.readUInt32BE(b,4);utils$w.pc1(_,$,c.tmp,0),_=c.tmp[0],$=c.tmp[1];for(var k=0;k<c.keys.length;k+=2){var et=shiftTable[k>>>1];_=utils$w.r28shl(_,et),$=utils$w.r28shl($,et),utils$w.pc2(_,$,c.keys,k)}};DES$3.prototype._update=function a(c,b,_,$){var k=this._desState,et=utils$w.readUInt32BE(c,b),nt=utils$w.readUInt32BE(c,b+4);utils$w.ip(et,nt,k.tmp,0),et=k.tmp[0],nt=k.tmp[1],this.type==="encrypt"?this._encrypt(k,et,nt,k.tmp,0):this._decrypt(k,et,nt,k.tmp,0),et=k.tmp[0],nt=k.tmp[1],utils$w.writeUInt32BE(_,et,$),utils$w.writeUInt32BE(_,nt,$+4)};DES$3.prototype._pad=function a(c,b){if(this.padding===!1)return!1;for(var _=c.length-b,$=b;$<c.length;$++)c[$]=_;return!0};DES$3.prototype._unpad=function a(c){if(this.padding===!1)return c;for(var b=c[c.length-1],_=c.length-b;_<c.length;_++)assert$h.equal(c[_],b);return c.slice(0,c.length-b)};DES$3.prototype._encrypt=function a(c,b,_,$,k){for(var et=b,nt=_,ot=0;ot<c.keys.length;ot+=2){var ht=c.keys[ot],vt=c.keys[ot+1];utils$w.expand(nt,c.tmp,0),ht^=c.tmp[0],vt^=c.tmp[1];var _t=utils$w.substitute(ht,vt),kt=utils$w.permute(_t),$t=nt;nt=(et^kt)>>>0,et=$t}utils$w.rip(nt,et,$,k)};DES$3.prototype._decrypt=function a(c,b,_,$,k){for(var et=_,nt=b,ot=c.keys.length-2;ot>=0;ot-=2){var ht=c.keys[ot],vt=c.keys[ot+1];utils$w.expand(et,c.tmp,0),ht^=c.tmp[0],vt^=c.tmp[1];var _t=utils$w.substitute(ht,vt),kt=utils$w.permute(_t),$t=et;et=(nt^kt)>>>0,nt=$t}utils$w.rip(et,nt,$,k)};var cbc$1={},assert$g=minimalisticAssert,inherits$g=inherits_browserExports,proto={};function CBCState(a){assert$g.equal(a.length,8,"Invalid IV length"),this.iv=new Array(8);for(var c=0;c<this.iv.length;c++)this.iv[c]=a[c]}function instantiate(a){function c(k){a.call(this,k),this._cbcInit()}inherits$g(c,a);for(var b=Object.keys(proto),_=0;_<b.length;_++){var $=b[_];c.prototype[$]=proto[$]}return c.create=function(et){return new c(et)},c}cbc$1.instantiate=instantiate;proto._cbcInit=function a(){var c=new CBCState(this.options.iv);this._cbcState=c};proto._update=function a(c,b,_,$){var k=this._cbcState,et=this.constructor.super_.prototype,nt=k.iv;if(this.type==="encrypt"){for(var ot=0;ot<this.blockSize;ot++)nt[ot]^=c[b+ot];et._update.call(this,nt,0,_,$);for(var ot=0;ot<this.blockSize;ot++)nt[ot]=_[$+ot]}else{et._update.call(this,c,b,_,$);for(var ot=0;ot<this.blockSize;ot++)_[$+ot]^=nt[ot];for(var ot=0;ot<this.blockSize;ot++)nt[ot]=c[b+ot]}};var assert$f=minimalisticAssert,inherits$f=inherits_browserExports,Cipher$1=cipher,DES$2=des$1;function EDEState(a,c){assert$f.equal(c.length,24,"Invalid key length");var b=c.slice(0,8),_=c.slice(8,16),$=c.slice(16,24);a==="encrypt"?this.ciphers=[DES$2.create({type:"encrypt",key:b}),DES$2.create({type:"decrypt",key:_}),DES$2.create({type:"encrypt",key:$})]:this.ciphers=[DES$2.create({type:"decrypt",key:$}),DES$2.create({type:"encrypt",key:_}),DES$2.create({type:"decrypt",key:b})]}function EDE(a){Cipher$1.call(this,a);var c=new EDEState(this.type,this.options.key);this._edeState=c}inherits$f(EDE,Cipher$1);var ede=EDE;EDE.create=function a(c){return new EDE(c)};EDE.prototype._update=function a(c,b,_,$){var k=this._edeState;k.ciphers[0]._update(c,b,_,$),k.ciphers[1]._update(_,$,_,$),k.ciphers[2]._update(_,$,_,$)};EDE.prototype._pad=DES$2.prototype._pad;EDE.prototype._unpad=DES$2.prototype._unpad;des$2.utils=utils$x;des$2.Cipher=cipher;des$2.DES=des$1;des$2.CBC=cbc$1;des$2.EDE=ede;var CipherBase=cipherBase,des=des$2,inherits$e=inherits_browserExports,Buffer$r=safeBufferExports$3.Buffer,modes$4={"des-ede3-cbc":des.CBC.instantiate(des.EDE),"des-ede3":des.EDE,"des-ede-cbc":des.CBC.instantiate(des.EDE),"des-ede":des.EDE,"des-cbc":des.CBC.instantiate(des.DES),"des-ecb":des.DES};modes$4.des=modes$4["des-cbc"];modes$4.des3=modes$4["des-ede3-cbc"];var browserifyDes=DES$1;inherits$e(DES$1,CipherBase);function DES$1(a){CipherBase.call(this);var c=a.mode.toLowerCase(),b=modes$4[c],_;a.decrypt?_="decrypt":_="encrypt";var $=a.key;Buffer$r.isBuffer($)||($=Buffer$r.from($)),(c==="des-ede"||c==="des-ede-cbc")&&($=Buffer$r.concat([$,$.slice(0,8)]));var k=a.iv;Buffer$r.isBuffer(k)||(k=Buffer$r.from(k)),this._des=b.create({key:$,iv:k,type:_})}DES$1.prototype._update=function(a){return Buffer$r.from(this._des.update(a))};DES$1.prototype._final=function(){return Buffer$r.from(this._des.final())};var browser$6={},encrypter={},ecb={};ecb.encrypt=function(a,c){return a._cipher.encryptBlock(c)};ecb.decrypt=function(a,c){return a._cipher.decryptBlock(c)};var cbc={},bufferXor=function a(c,b){for(var _=Math.min(c.length,b.length),$=new Buffer$O(_),k=0;k<_;++k)$[k]=c[k]^b[k];return $},xor$7=bufferXor;cbc.encrypt=function(a,c){var b=xor$7(c,a._prev);return a._prev=a._cipher.encryptBlock(b),a._prev};cbc.decrypt=function(a,c){var b=a._prev;a._prev=c;var _=a._cipher.decryptBlock(c);return xor$7(_,b)};var cfb={},Buffer$q=safeBufferExports$3.Buffer,xor$6=bufferXor;function encryptStart(a,c,b){var _=c.length,$=xor$6(c,a._cache);return a._cache=a._cache.slice(_),a._prev=Buffer$q.concat([a._prev,b?c:$]),$}cfb.encrypt=function(a,c,b){for(var _=Buffer$q.allocUnsafe(0),$;c.length;)if(a._cache.length===0&&(a._cache=a._cipher.encryptBlock(a._prev),a._prev=Buffer$q.allocUnsafe(0)),a._cache.length<=c.length)$=a._cache.length,_=Buffer$q.concat([_,encryptStart(a,c.slice(0,$),b)]),c=c.slice($);else{_=Buffer$q.concat([_,encryptStart(a,c,b)]);break}return _};var cfb8={},Buffer$p=safeBufferExports$3.Buffer;function encryptByte$1(a,c,b){var _=a._cipher.encryptBlock(a._prev),$=_[0]^c;return a._prev=Buffer$p.concat([a._prev.slice(1),Buffer$p.from([b?c:$])]),$}cfb8.encrypt=function(a,c,b){for(var _=c.length,$=Buffer$p.allocUnsafe(_),k=-1;++k<_;)$[k]=encryptByte$1(a,c[k],b);return $};var cfb1={},Buffer$o=safeBufferExports$3.Buffer;function encryptByte(a,c,b){for(var _,$=-1,k=8,et=0,nt,ot;++$<k;)_=a._cipher.encryptBlock(a._prev),nt=c&1<<7-$?128:0,ot=_[0]^nt,et+=(ot&128)>>$%8,a._prev=shiftIn(a._prev,b?nt:ot);return et}function shiftIn(a,c){var b=a.length,_=-1,$=Buffer$o.allocUnsafe(a.length);for(a=Buffer$o.concat([a,Buffer$o.from([c])]);++_<b;)$[_]=a[_]<<1|a[_+1]>>7;return $}cfb1.encrypt=function(a,c,b){for(var _=c.length,$=Buffer$o.allocUnsafe(_),k=-1;++k<_;)$[k]=encryptByte(a,c[k],b);return $};var ofb={},xor$5=bufferXor;function getBlock$1(a){return a._prev=a._cipher.encryptBlock(a._prev),a._prev}ofb.encrypt=function(a,c){for(;a._cache.length<c.length;)a._cache=Buffer$O.concat([a._cache,getBlock$1(a)]);var b=a._cache.slice(0,c.length);return a._cache=a._cache.slice(c.length),xor$5(c,b)};var ctr={};function incr32$2(a){for(var c=a.length,b;c--;)if(b=a.readUInt8(c),b===255)a.writeUInt8(0,c);else{b++,a.writeUInt8(b,c);break}}var incr32_1=incr32$2,xor$4=bufferXor,Buffer$n=safeBufferExports$3.Buffer,incr32$1=incr32_1;function getBlock(a){var c=a._cipher.encryptBlockRaw(a._prev);return incr32$1(a._prev),c}var blockSize=16;ctr.encrypt=function(a,c){var b=Math.ceil(c.length/blockSize),_=a._cache.length;a._cache=Buffer$n.concat([a._cache,Buffer$n.allocUnsafe(b*blockSize)]);for(var $=0;$<b;$++){var k=getBlock(a),et=_+$*blockSize;a._cache.writeUInt32BE(k[0],et+0),a._cache.writeUInt32BE(k[1],et+4),a._cache.writeUInt32BE(k[2],et+8),a._cache.writeUInt32BE(k[3],et+12)}var nt=a._cache.slice(0,c.length);return a._cache=a._cache.slice(c.length),xor$4(c,nt)};const aes128={cipher:"AES",key:128,iv:16,mode:"CBC",type:"block"},aes192={cipher:"AES",key:192,iv:16,mode:"CBC",type:"block"},aes256={cipher:"AES",key:256,iv:16,mode:"CBC",type:"block"},require$$2={"aes-128-ecb":{cipher:"AES",key:128,iv:0,mode:"ECB",type:"block"},"aes-192-ecb":{cipher:"AES",key:192,iv:0,mode:"ECB",type:"block"},"aes-256-ecb":{cipher:"AES",key:256,iv:0,mode:"ECB",type:"block"},"aes-128-cbc":{cipher:"AES",key:128,iv:16,mode:"CBC",type:"block"},"aes-192-cbc":{cipher:"AES",key:192,iv:16,mode:"CBC",type:"block"},"aes-256-cbc":{cipher:"AES",key:256,iv:16,mode:"CBC",type:"block"},aes128,aes192,aes256,"aes-128-cfb":{cipher:"AES",key:128,iv:16,mode:"CFB",type:"stream"},"aes-192-cfb":{cipher:"AES",key:192,iv:16,mode:"CFB",type:"stream"},"aes-256-cfb":{cipher:"AES",key:256,iv:16,mode:"CFB",type:"stream"},"aes-128-cfb8":{cipher:"AES",key:128,iv:16,mode:"CFB8",type:"stream"},"aes-192-cfb8":{cipher:"AES",key:192,iv:16,mode:"CFB8",type:"stream"},"aes-256-cfb8":{cipher:"AES",key:256,iv:16,mode:"CFB8",type:"stream"},"aes-128-cfb1":{cipher:"AES",key:128,iv:16,mode:"CFB1",type:"stream"},"aes-192-cfb1":{cipher:"AES",key:192,iv:16,mode:"CFB1",type:"stream"},"aes-256-cfb1":{cipher:"AES",key:256,iv:16,mode:"CFB1",type:"stream"},"aes-128-ofb":{cipher:"AES",key:128,iv:16,mode:"OFB",type:"stream"},"aes-192-ofb":{cipher:"AES",key:192,iv:16,mode:"OFB",type:"stream"},"aes-256-ofb":{cipher:"AES",key:256,iv:16,mode:"OFB",type:"stream"},"aes-128-ctr":{cipher:"AES",key:128,iv:16,mode:"CTR",type:"stream"},"aes-192-ctr":{cipher:"AES",key:192,iv:16,mode:"CTR",type:"stream"},"aes-256-ctr":{cipher:"AES",key:256,iv:16,mode:"CTR",type:"stream"},"aes-128-gcm":{cipher:"AES",key:128,iv:12,mode:"GCM",type:"auth"},"aes-192-gcm":{cipher:"AES",key:192,iv:12,mode:"GCM",type:"auth"},"aes-256-gcm":{cipher:"AES",key:256,iv:12,mode:"GCM",type:"auth"}};var modeModules={ECB:ecb,CBC:cbc,CFB:cfb,CFB8:cfb8,CFB1:cfb1,OFB:ofb,CTR:ctr,GCM:ctr},modes$3=require$$2;for(var key$3 in modes$3)modes$3[key$3].module=modeModules[modes$3[key$3].mode];var modes_1=modes$3,aes$5={},Buffer$m=safeBufferExports$3.Buffer;function asUInt32Array(a){Buffer$m.isBuffer(a)||(a=Buffer$m.from(a));for(var c=a.length/4|0,b=new Array(c),_=0;_<c;_++)b[_]=a.readUInt32BE(_*4);return b}function scrubVec(a){for(var c=0;c<a.length;a++)a[c]=0}function cryptBlock(a,c,b,_,$){for(var k=b[0],et=b[1],nt=b[2],ot=b[3],ht=a[0]^c[0],vt=a[1]^c[1],_t=a[2]^c[2],kt=a[3]^c[3],$t,Tt,At,Mt,Dt=4,Rt=1;Rt<$;Rt++)$t=k[ht>>>24]^et[vt>>>16&255]^nt[_t>>>8&255]^ot[kt&255]^c[Dt++],Tt=k[vt>>>24]^et[_t>>>16&255]^nt[kt>>>8&255]^ot[ht&255]^c[Dt++],At=k[_t>>>24]^et[kt>>>16&255]^nt[ht>>>8&255]^ot[vt&255]^c[Dt++],Mt=k[kt>>>24]^et[ht>>>16&255]^nt[vt>>>8&255]^ot[_t&255]^c[Dt++],ht=$t,vt=Tt,_t=At,kt=Mt;return $t=(_[ht>>>24]<<24|_[vt>>>16&255]<<16|_[_t>>>8&255]<<8|_[kt&255])^c[Dt++],Tt=(_[vt>>>24]<<24|_[_t>>>16&255]<<16|_[kt>>>8&255]<<8|_[ht&255])^c[Dt++],At=(_[_t>>>24]<<24|_[kt>>>16&255]<<16|_[ht>>>8&255]<<8|_[vt&255])^c[Dt++],Mt=(_[kt>>>24]<<24|_[ht>>>16&255]<<16|_[vt>>>8&255]<<8|_[_t&255])^c[Dt++],$t=$t>>>0,Tt=Tt>>>0,At=At>>>0,Mt=Mt>>>0,[$t,Tt,At,Mt]}var RCON=[0,1,2,4,8,16,32,64,128,27,54],G$2=function(){for(var a=new Array(256),c=0;c<256;c++)c<128?a[c]=c<<1:a[c]=c<<1^283;for(var b=[],_=[],$=[[],[],[],[]],k=[[],[],[],[]],et=0,nt=0,ot=0;ot<256;++ot){var ht=nt^nt<<1^nt<<2^nt<<3^nt<<4;ht=ht>>>8^ht&255^99,b[et]=ht,_[ht]=et;var vt=a[et],_t=a[vt],kt=a[_t],$t=a[ht]*257^ht*16843008;$[0][et]=$t<<24|$t>>>8,$[1][et]=$t<<16|$t>>>16,$[2][et]=$t<<8|$t>>>24,$[3][et]=$t,$t=kt*16843009^_t*65537^vt*257^et*16843008,k[0][ht]=$t<<24|$t>>>8,k[1][ht]=$t<<16|$t>>>16,k[2][ht]=$t<<8|$t>>>24,k[3][ht]=$t,et===0?et=nt=1:(et=vt^a[a[a[kt^vt]]],nt^=a[a[nt]])}return{SBOX:b,INV_SBOX:_,SUB_MIX:$,INV_SUB_MIX:k}}();function AES(a){this._key=asUInt32Array(a),this._reset()}AES.blockSize=4*4;AES.keySize=256/8;AES.prototype.blockSize=AES.blockSize;AES.prototype.keySize=AES.keySize;AES.prototype._reset=function(){for(var a=this._key,c=a.length,b=c+6,_=(b+1)*4,$=[],k=0;k<c;k++)$[k]=a[k];for(k=c;k<_;k++){var et=$[k-1];k%c===0?(et=et<<8|et>>>24,et=G$2.SBOX[et>>>24]<<24|G$2.SBOX[et>>>16&255]<<16|G$2.SBOX[et>>>8&255]<<8|G$2.SBOX[et&255],et^=RCON[k/c|0]<<24):c>6&&k%c===4&&(et=G$2.SBOX[et>>>24]<<24|G$2.SBOX[et>>>16&255]<<16|G$2.SBOX[et>>>8&255]<<8|G$2.SBOX[et&255]),$[k]=$[k-c]^et}for(var nt=[],ot=0;ot<_;ot++){var ht=_-ot,vt=$[ht-(ot%4?0:4)];ot<4||ht<=4?nt[ot]=vt:nt[ot]=G$2.INV_SUB_MIX[0][G$2.SBOX[vt>>>24]]^G$2.INV_SUB_MIX[1][G$2.SBOX[vt>>>16&255]]^G$2.INV_SUB_MIX[2][G$2.SBOX[vt>>>8&255]]^G$2.INV_SUB_MIX[3][G$2.SBOX[vt&255]]}this._nRounds=b,this._keySchedule=$,this._invKeySchedule=nt};AES.prototype.encryptBlockRaw=function(a){return a=asUInt32Array(a),cryptBlock(a,this._keySchedule,G$2.SUB_MIX,G$2.SBOX,this._nRounds)};AES.prototype.encryptBlock=function(a){var c=this.encryptBlockRaw(a),b=Buffer$m.allocUnsafe(16);return b.writeUInt32BE(c[0],0),b.writeUInt32BE(c[1],4),b.writeUInt32BE(c[2],8),b.writeUInt32BE(c[3],12),b};AES.prototype.decryptBlock=function(a){a=asUInt32Array(a);var c=a[1];a[1]=a[3],a[3]=c;var b=cryptBlock(a,this._invKeySchedule,G$2.INV_SUB_MIX,G$2.INV_SBOX,this._nRounds),_=Buffer$m.allocUnsafe(16);return _.writeUInt32BE(b[0],0),_.writeUInt32BE(b[3],4),_.writeUInt32BE(b[2],8),_.writeUInt32BE(b[1],12),_};AES.prototype.scrub=function(){scrubVec(this._keySchedule),scrubVec(this._invKeySchedule),scrubVec(this._key)};aes$5.AES=AES;var Buffer$l=safeBufferExports$3.Buffer,ZEROES=Buffer$l.alloc(16,0);function toArray$1(a){return[a.readUInt32BE(0),a.readUInt32BE(4),a.readUInt32BE(8),a.readUInt32BE(12)]}function fromArray(a){var c=Buffer$l.allocUnsafe(16);return c.writeUInt32BE(a[0]>>>0,0),c.writeUInt32BE(a[1]>>>0,4),c.writeUInt32BE(a[2]>>>0,8),c.writeUInt32BE(a[3]>>>0,12),c}function GHASH$1(a){this.h=a,this.state=Buffer$l.alloc(16,0),this.cache=Buffer$l.allocUnsafe(0)}GHASH$1.prototype.ghash=function(a){for(var c=-1;++c<a.length;)this.state[c]^=a[c];this._multiply()};GHASH$1.prototype._multiply=function(){for(var a=toArray$1(this.h),c=[0,0,0,0],b,_,$,k=-1;++k<128;){for(_=(this.state[~~(k/8)]&1<<7-k%8)!==0,_&&(c[0]^=a[0],c[1]^=a[1],c[2]^=a[2],c[3]^=a[3]),$=(a[3]&1)!==0,b=3;b>0;b--)a[b]=a[b]>>>1|(a[b-1]&1)<<31;a[0]=a[0]>>>1,$&&(a[0]=a[0]^225<<24)}this.state=fromArray(c)};GHASH$1.prototype.update=function(a){this.cache=Buffer$l.concat([this.cache,a]);for(var c;this.cache.length>=16;)c=this.cache.slice(0,16),this.cache=this.cache.slice(16),this.ghash(c)};GHASH$1.prototype.final=function(a,c){return this.cache.length&&this.ghash(Buffer$l.concat([this.cache,ZEROES],16)),this.ghash(fromArray([0,a,0,c])),this.state};var ghash=GHASH$1,aes$4=aes$5,Buffer$k=safeBufferExports$3.Buffer,Transform$5=cipherBase,inherits$d=inherits_browserExports,GHASH=ghash,xor$3=bufferXor,incr32=incr32_1;function xorTest(a,c){var b=0;a.length!==c.length&&b++;for(var _=Math.min(a.length,c.length),$=0;$<_;++$)b+=a[$]^c[$];return b}function calcIv(a,c,b){if(c.length===12)return a._finID=Buffer$k.concat([c,Buffer$k.from([0,0,0,1])]),Buffer$k.concat([c,Buffer$k.from([0,0,0,2])]);var _=new GHASH(b),$=c.length,k=$%16;_.update(c),k&&(k=16-k,_.update(Buffer$k.alloc(k,0))),_.update(Buffer$k.alloc(8,0));var et=$*8,nt=Buffer$k.alloc(8);nt.writeUIntBE(et,0,8),_.update(nt),a._finID=_.state;var ot=Buffer$k.from(a._finID);return incr32(ot),ot}function StreamCipher$3(a,c,b,_){Transform$5.call(this);var $=Buffer$k.alloc(4,0);this._cipher=new aes$4.AES(c);var k=this._cipher.encryptBlock($);this._ghash=new GHASH(k),b=calcIv(this,b,k),this._prev=Buffer$k.from(b),this._cache=Buffer$k.allocUnsafe(0),this._secCache=Buffer$k.allocUnsafe(0),this._decrypt=_,this._alen=0,this._len=0,this._mode=a,this._authTag=null,this._called=!1}inherits$d(StreamCipher$3,Transform$5);StreamCipher$3.prototype._update=function(a){if(!this._called&&this._alen){var c=16-this._alen%16;c<16&&(c=Buffer$k.alloc(c,0),this._ghash.update(c))}this._called=!0;var b=this._mode.encrypt(this,a);return this._decrypt?this._ghash.update(a):this._ghash.update(b),this._len+=a.length,b};StreamCipher$3.prototype._final=function(){if(this._decrypt&&!this._authTag)throw new Error("Unsupported state or unable to authenticate data");var a=xor$3(this._ghash.final(this._alen*8,this._len*8),this._cipher.encryptBlock(this._finID));if(this._decrypt&&xorTest(a,this._authTag))throw new Error("Unsupported state or unable to authenticate data");this._authTag=a,this._cipher.scrub()};StreamCipher$3.prototype.getAuthTag=function a(){if(this._decrypt||!Buffer$k.isBuffer(this._authTag))throw new Error("Attempting to get auth tag in unsupported state");return this._authTag};StreamCipher$3.prototype.setAuthTag=function a(c){if(!this._decrypt)throw new Error("Attempting to set auth tag in unsupported state");this._authTag=c};StreamCipher$3.prototype.setAAD=function a(c){if(this._called)throw new Error("Attempting to set AAD in unsupported state");this._ghash.update(c),this._alen+=c.length};var authCipher=StreamCipher$3,aes$3=aes$5,Buffer$j=safeBufferExports$3.Buffer,Transform$4=cipherBase,inherits$c=inherits_browserExports;function StreamCipher$2(a,c,b,_){Transform$4.call(this),this._cipher=new aes$3.AES(c),this._prev=Buffer$j.from(b),this._cache=Buffer$j.allocUnsafe(0),this._secCache=Buffer$j.allocUnsafe(0),this._decrypt=_,this._mode=a}inherits$c(StreamCipher$2,Transform$4);StreamCipher$2.prototype._update=function(a){return this._mode.encrypt(this,a,this._decrypt)};StreamCipher$2.prototype._final=function(){this._cipher.scrub()};var streamCipher=StreamCipher$2,Buffer$i=safeBufferExports$3.Buffer,MD5=md5_js;function EVP_BytesToKey(a,c,b,_){if(Buffer$i.isBuffer(a)||(a=Buffer$i.from(a,"binary")),c&&(Buffer$i.isBuffer(c)||(c=Buffer$i.from(c,"binary")),c.length!==8))throw new RangeError("salt should be Buffer with 8 byte length");for(var $=b/8,k=Buffer$i.alloc($),et=Buffer$i.alloc(_||0),nt=Buffer$i.alloc(0);$>0||_>0;){var ot=new MD5;ot.update(nt),ot.update(a),c&&ot.update(c),nt=ot.digest();var ht=0;if($>0){var vt=k.length-$;ht=Math.min($,nt.length),nt.copy(k,vt,0,ht),$-=ht}if(ht<nt.length&&_>0){var _t=et.length-_,kt=Math.min(_,nt.length-ht);nt.copy(et,_t,ht,ht+kt),_-=kt}}return nt.fill(0),{key:k,iv:et}}var evp_bytestokey=EVP_BytesToKey,MODES$1=modes_1,AuthCipher$1=authCipher,Buffer$h=safeBufferExports$3.Buffer,StreamCipher$1=streamCipher,Transform$3=cipherBase,aes$2=aes$5,ebtk$2=evp_bytestokey,inherits$b=inherits_browserExports;function Cipher(a,c,b){Transform$3.call(this),this._cache=new Splitter$1,this._cipher=new aes$2.AES(c),this._prev=Buffer$h.from(b),this._mode=a,this._autopadding=!0}inherits$b(Cipher,Transform$3);Cipher.prototype._update=function(a){this._cache.add(a);for(var c,b,_=[];c=this._cache.get();)b=this._mode.encrypt(this,c),_.push(b);return Buffer$h.concat(_)};var PADDING$1=Buffer$h.alloc(16,16);Cipher.prototype._final=function(){var a=this._cache.flush();if(this._autopadding)return a=this._mode.encrypt(this,a),this._cipher.scrub(),a;if(!a.equals(PADDING$1))throw this._cipher.scrub(),new Error("data not multiple of block length")};Cipher.prototype.setAutoPadding=function(a){return this._autopadding=!!a,this};function Splitter$1(){this.cache=Buffer$h.allocUnsafe(0)}Splitter$1.prototype.add=function(a){this.cache=Buffer$h.concat([this.cache,a])};Splitter$1.prototype.get=function(){if(this.cache.length>15){var a=this.cache.slice(0,16);return this.cache=this.cache.slice(16),a}return null};Splitter$1.prototype.flush=function(){for(var a=16-this.cache.length,c=Buffer$h.allocUnsafe(a),b=-1;++b<a;)c.writeUInt8(a,b);return Buffer$h.concat([this.cache,c])};function createCipheriv$1(a,c,b){var _=MODES$1[a.toLowerCase()];if(!_)throw new TypeError("invalid suite type");if(typeof c=="string"&&(c=Buffer$h.from(c)),c.length!==_.key/8)throw new TypeError("invalid key length "+c.length);if(typeof b=="string"&&(b=Buffer$h.from(b)),_.mode!=="GCM"&&b.length!==_.iv)throw new TypeError("invalid iv length "+b.length);return _.type==="stream"?new StreamCipher$1(_.module,c,b):_.type==="auth"?new AuthCipher$1(_.module,c,b):new Cipher(_.module,c,b)}function createCipher$1(a,c){var b=MODES$1[a.toLowerCase()];if(!b)throw new TypeError("invalid suite type");var _=ebtk$2(c,!1,b.key,b.iv);return createCipheriv$1(a,_.key,_.iv)}encrypter.createCipheriv=createCipheriv$1;encrypter.createCipher=createCipher$1;var decrypter={},AuthCipher=authCipher,Buffer$g=safeBufferExports$3.Buffer,MODES=modes_1,StreamCipher=streamCipher,Transform$2=cipherBase,aes$1=aes$5,ebtk$1=evp_bytestokey,inherits$a=inherits_browserExports;function Decipher(a,c,b){Transform$2.call(this),this._cache=new Splitter,this._last=void 0,this._cipher=new aes$1.AES(c),this._prev=Buffer$g.from(b),this._mode=a,this._autopadding=!0}inherits$a(Decipher,Transform$2);Decipher.prototype._update=function(a){this._cache.add(a);for(var c,b,_=[];c=this._cache.get(this._autopadding);)b=this._mode.decrypt(this,c),_.push(b);return Buffer$g.concat(_)};Decipher.prototype._final=function(){var a=this._cache.flush();if(this._autopadding)return unpad(this._mode.decrypt(this,a));if(a)throw new Error("data not multiple of block length")};Decipher.prototype.setAutoPadding=function(a){return this._autopadding=!!a,this};function Splitter(){this.cache=Buffer$g.allocUnsafe(0)}Splitter.prototype.add=function(a){this.cache=Buffer$g.concat([this.cache,a])};Splitter.prototype.get=function(a){var c;if(a){if(this.cache.length>16)return c=this.cache.slice(0,16),this.cache=this.cache.slice(16),c}else if(this.cache.length>=16)return c=this.cache.slice(0,16),this.cache=this.cache.slice(16),c;return null};Splitter.prototype.flush=function(){if(this.cache.length)return this.cache};function unpad(a){var c=a[15];if(c<1||c>16)throw new Error("unable to decrypt data");for(var b=-1;++b<c;)if(a[b+(16-c)]!==c)throw new Error("unable to decrypt data");if(c!==16)return a.slice(0,16-c)}function createDecipheriv$1(a,c,b){var _=MODES[a.toLowerCase()];if(!_)throw new TypeError("invalid suite type");if(typeof b=="string"&&(b=Buffer$g.from(b)),_.mode!=="GCM"&&b.length!==_.iv)throw new TypeError("invalid iv length "+b.length);if(typeof c=="string"&&(c=Buffer$g.from(c)),c.length!==_.key/8)throw new TypeError("invalid key length "+c.length);return _.type==="stream"?new StreamCipher(_.module,c,b,!0):_.type==="auth"?new AuthCipher(_.module,c,b,!0):new Decipher(_.module,c,b)}function createDecipher$1(a,c){var b=MODES[a.toLowerCase()];if(!b)throw new TypeError("invalid suite type");var _=ebtk$1(c,!1,b.key,b.iv);return createDecipheriv$1(a,_.key,_.iv)}decrypter.createDecipher=createDecipher$1;decrypter.createDecipheriv=createDecipheriv$1;var ciphers$2=encrypter,deciphers=decrypter,modes$2=require$$2;function getCiphers$1(){return Object.keys(modes$2)}browser$6.createCipher=browser$6.Cipher=ciphers$2.createCipher;browser$6.createCipheriv=browser$6.Cipheriv=ciphers$2.createCipheriv;browser$6.createDecipher=browser$6.Decipher=deciphers.createDecipher;browser$6.createDecipheriv=browser$6.Decipheriv=deciphers.createDecipheriv;browser$6.listCiphers=browser$6.getCiphers=getCiphers$1;var modes$1={};(function(a){a["des-ecb"]={key:8,iv:0},a["des-cbc"]=a.des={key:8,iv:8},a["des-ede3-cbc"]=a.des3={key:24,iv:8},a["des-ede3"]={key:24,iv:0},a["des-ede-cbc"]={key:16,iv:8},a["des-ede"]={key:16,iv:0}})(modes$1);var DES=browserifyDes,aes=browser$6,aesModes=modes_1,desModes=modes$1,ebtk=evp_bytestokey;function createCipher(a,c){a=a.toLowerCase();var b,_;if(aesModes[a])b=aesModes[a].key,_=aesModes[a].iv;else if(desModes[a])b=desModes[a].key*8,_=desModes[a].iv;else throw new TypeError("invalid suite type");var $=ebtk(c,!1,b,_);return createCipheriv(a,$.key,$.iv)}function createDecipher(a,c){a=a.toLowerCase();var b,_;if(aesModes[a])b=aesModes[a].key,_=aesModes[a].iv;else if(desModes[a])b=desModes[a].key*8,_=desModes[a].iv;else throw new TypeError("invalid suite type");var $=ebtk(c,!1,b,_);return createDecipheriv(a,$.key,$.iv)}function createCipheriv(a,c,b){if(a=a.toLowerCase(),aesModes[a])return aes.createCipheriv(a,c,b);if(desModes[a])return new DES({key:c,iv:b,mode:a});throw new TypeError("invalid suite type")}function createDecipheriv(a,c,b){if(a=a.toLowerCase(),aesModes[a])return aes.createDecipheriv(a,c,b);if(desModes[a])return new DES({key:c,iv:b,mode:a,decrypt:!0});throw new TypeError("invalid suite type")}function getCiphers(){return Object.keys(desModes).concat(aes.getCiphers())}browser$7.createCipher=browser$7.Cipher=createCipher;browser$7.createCipheriv=browser$7.Cipheriv=createCipheriv;browser$7.createDecipher=browser$7.Decipher=createDecipher;browser$7.createDecipheriv=browser$7.Decipheriv=createDecipheriv;browser$7.listCiphers=browser$7.getCiphers=getCiphers;var browser$5={},bn$6={exports:{}};bn$6.exports;(function(a){(function(c,b){function _(ut,_e){if(!ut)throw new Error(_e||"Assertion failed")}function $(ut,_e){ut.super_=_e;var tt=function(){};tt.prototype=_e.prototype,ut.prototype=new tt,ut.prototype.constructor=ut}function k(ut,_e,tt){if(k.isBN(ut))return ut;this.negative=0,this.words=null,this.length=0,this.red=null,ut!==null&&((_e==="le"||_e==="be")&&(tt=_e,_e=10),this._init(ut||0,_e||10,tt||"be"))}typeof c=="object"?c.exports=k:b.BN=k,k.BN=k,k.wordSize=26;var et;try{typeof window<"u"&&typeof window.Buffer<"u"?et=window.Buffer:et=require$$0$2.Buffer}catch{}k.isBN=function(_e){return _e instanceof k?!0:_e!==null&&typeof _e=="object"&&_e.constructor.wordSize===k.wordSize&&Array.isArray(_e.words)},k.max=function(_e,tt){return _e.cmp(tt)>0?_e:tt},k.min=function(_e,tt){return _e.cmp(tt)<0?_e:tt},k.prototype._init=function(_e,tt,it){if(typeof _e=="number")return this._initNumber(_e,tt,it);if(typeof _e=="object")return this._initArray(_e,tt,it);tt==="hex"&&(tt=16),_(tt===(tt|0)&&tt>=2&&tt<=36),_e=_e.toString().replace(/\s+/g,"");var dt=0;_e[0]==="-"&&(dt++,this.negative=1),dt<_e.length&&(tt===16?this._parseHex(_e,dt,it):(this._parseBase(_e,tt,dt),it==="le"&&this._initArray(this.toArray(),tt,it)))},k.prototype._initNumber=function(_e,tt,it){_e<0&&(this.negative=1,_e=-_e),_e<67108864?(this.words=[_e&67108863],this.length=1):_e<4503599627370496?(this.words=[_e&67108863,_e/67108864&67108863],this.length=2):(_(_e<9007199254740992),this.words=[_e&67108863,_e/67108864&67108863,1],this.length=3),it==="le"&&this._initArray(this.toArray(),tt,it)},k.prototype._initArray=function(_e,tt,it){if(_(typeof _e.length=="number"),_e.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(_e.length/3),this.words=new Array(this.length);for(var dt=0;dt<this.length;dt++)this.words[dt]=0;var lt,gt,Et=0;if(it==="be")for(dt=_e.length-1,lt=0;dt>=0;dt-=3)gt=_e[dt]|_e[dt-1]<<8|_e[dt-2]<<16,this.words[lt]|=gt<<Et&67108863,this.words[lt+1]=gt>>>26-Et&67108863,Et+=24,Et>=26&&(Et-=26,lt++);else if(it==="le")for(dt=0,lt=0;dt<_e.length;dt+=3)gt=_e[dt]|_e[dt+1]<<8|_e[dt+2]<<16,this.words[lt]|=gt<<Et&67108863,this.words[lt+1]=gt>>>26-Et&67108863,Et+=24,Et>=26&&(Et-=26,lt++);return this.strip()};function nt(ut,_e){var tt=ut.charCodeAt(_e);return tt>=65&&tt<=70?tt-55:tt>=97&&tt<=102?tt-87:tt-48&15}function ot(ut,_e,tt){var it=nt(ut,tt);return tt-1>=_e&&(it|=nt(ut,tt-1)<<4),it}k.prototype._parseHex=function(_e,tt,it){this.length=Math.ceil((_e.length-tt)/6),this.words=new Array(this.length);for(var dt=0;dt<this.length;dt++)this.words[dt]=0;var lt=0,gt=0,Et;if(it==="be")for(dt=_e.length-1;dt>=tt;dt-=2)Et=ot(_e,tt,dt)<<lt,this.words[gt]|=Et&67108863,lt>=18?(lt-=18,gt+=1,this.words[gt]|=Et>>>26):lt+=8;else{var pt=_e.length-tt;for(dt=pt%2===0?tt+1:tt;dt<_e.length;dt+=2)Et=ot(_e,tt,dt)<<lt,this.words[gt]|=Et&67108863,lt>=18?(lt-=18,gt+=1,this.words[gt]|=Et>>>26):lt+=8}this.strip()};function ht(ut,_e,tt,it){for(var dt=0,lt=Math.min(ut.length,tt),gt=_e;gt<lt;gt++){var Et=ut.charCodeAt(gt)-48;dt*=it,Et>=49?dt+=Et-49+10:Et>=17?dt+=Et-17+10:dt+=Et}return dt}k.prototype._parseBase=function(_e,tt,it){this.words=[0],this.length=1;for(var dt=0,lt=1;lt<=67108863;lt*=tt)dt++;dt--,lt=lt/tt|0;for(var gt=_e.length-it,Et=gt%dt,pt=Math.min(gt,gt-Et)+it,rt=0,mt=it;mt<pt;mt+=dt)rt=ht(_e,mt,mt+dt,tt),this.imuln(lt),this.words[0]+rt<67108864?this.words[0]+=rt:this._iaddn(rt);if(Et!==0){var Lt=1;for(rt=ht(_e,mt,_e.length,tt),mt=0;mt<Et;mt++)Lt*=tt;this.imuln(Lt),this.words[0]+rt<67108864?this.words[0]+=rt:this._iaddn(rt)}this.strip()},k.prototype.copy=function(_e){_e.words=new Array(this.length);for(var tt=0;tt<this.length;tt++)_e.words[tt]=this.words[tt];_e.length=this.length,_e.negative=this.negative,_e.red=this.red},k.prototype.clone=function(){var _e=new k(null);return this.copy(_e),_e},k.prototype._expand=function(_e){for(;this.length<_e;)this.words[this.length++]=0;return this},k.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},k.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},k.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var vt=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],_t=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],kt=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];k.prototype.toString=function(_e,tt){_e=_e||10,tt=tt|0||1;var it;if(_e===16||_e==="hex"){it="";for(var dt=0,lt=0,gt=0;gt<this.length;gt++){var Et=this.words[gt],pt=((Et<<dt|lt)&16777215).toString(16);lt=Et>>>24-dt&16777215,lt!==0||gt!==this.length-1?it=vt[6-pt.length]+pt+it:it=pt+it,dt+=2,dt>=26&&(dt-=26,gt--)}for(lt!==0&&(it=lt.toString(16)+it);it.length%tt!==0;)it="0"+it;return this.negative!==0&&(it="-"+it),it}if(_e===(_e|0)&&_e>=2&&_e<=36){var rt=_t[_e],mt=kt[_e];it="";var Lt=this.clone();for(Lt.negative=0;!Lt.isZero();){var Gt=Lt.modn(mt).toString(_e);Lt=Lt.idivn(mt),Lt.isZero()?it=Gt+it:it=vt[rt-Gt.length]+Gt+it}for(this.isZero()&&(it="0"+it);it.length%tt!==0;)it="0"+it;return this.negative!==0&&(it="-"+it),it}_(!1,"Base should be between 2 and 36")},k.prototype.toNumber=function(){var _e=this.words[0];return this.length===2?_e+=this.words[1]*67108864:this.length===3&&this.words[2]===1?_e+=4503599627370496+this.words[1]*67108864:this.length>2&&_(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-_e:_e},k.prototype.toJSON=function(){return this.toString(16)},k.prototype.toBuffer=function(_e,tt){return _(typeof et<"u"),this.toArrayLike(et,_e,tt)},k.prototype.toArray=function(_e,tt){return this.toArrayLike(Array,_e,tt)},k.prototype.toArrayLike=function(_e,tt,it){var dt=this.byteLength(),lt=it||Math.max(1,dt);_(dt<=lt,"byte array longer than desired length"),_(lt>0,"Requested array length <= 0"),this.strip();var gt=tt==="le",Et=new _e(lt),pt,rt,mt=this.clone();if(gt){for(rt=0;!mt.isZero();rt++)pt=mt.andln(255),mt.iushrn(8),Et[rt]=pt;for(;rt<lt;rt++)Et[rt]=0}else{for(rt=0;rt<lt-dt;rt++)Et[rt]=0;for(rt=0;!mt.isZero();rt++)pt=mt.andln(255),mt.iushrn(8),Et[lt-rt-1]=pt}return Et},Math.clz32?k.prototype._countBits=function(_e){return 32-Math.clz32(_e)}:k.prototype._countBits=function(_e){var tt=_e,it=0;return tt>=4096&&(it+=13,tt>>>=13),tt>=64&&(it+=7,tt>>>=7),tt>=8&&(it+=4,tt>>>=4),tt>=2&&(it+=2,tt>>>=2),it+tt},k.prototype._zeroBits=function(_e){if(_e===0)return 26;var tt=_e,it=0;return tt&8191||(it+=13,tt>>>=13),tt&127||(it+=7,tt>>>=7),tt&15||(it+=4,tt>>>=4),tt&3||(it+=2,tt>>>=2),tt&1||it++,it},k.prototype.bitLength=function(){var _e=this.words[this.length-1],tt=this._countBits(_e);return(this.length-1)*26+tt};function $t(ut){for(var _e=new Array(ut.bitLength()),tt=0;tt<_e.length;tt++){var it=tt/26|0,dt=tt%26;_e[tt]=(ut.words[it]&1<<dt)>>>dt}return _e}k.prototype.zeroBits=function(){if(this.isZero())return 0;for(var _e=0,tt=0;tt<this.length;tt++){var it=this._zeroBits(this.words[tt]);if(_e+=it,it!==26)break}return _e},k.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},k.prototype.toTwos=function(_e){return this.negative!==0?this.abs().inotn(_e).iaddn(1):this.clone()},k.prototype.fromTwos=function(_e){return this.testn(_e-1)?this.notn(_e).iaddn(1).ineg():this.clone()},k.prototype.isNeg=function(){return this.negative!==0},k.prototype.neg=function(){return this.clone().ineg()},k.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},k.prototype.iuor=function(_e){for(;this.length<_e.length;)this.words[this.length++]=0;for(var tt=0;tt<_e.length;tt++)this.words[tt]=this.words[tt]|_e.words[tt];return this.strip()},k.prototype.ior=function(_e){return _((this.negative|_e.negative)===0),this.iuor(_e)},k.prototype.or=function(_e){return this.length>_e.length?this.clone().ior(_e):_e.clone().ior(this)},k.prototype.uor=function(_e){return this.length>_e.length?this.clone().iuor(_e):_e.clone().iuor(this)},k.prototype.iuand=function(_e){var tt;this.length>_e.length?tt=_e:tt=this;for(var it=0;it<tt.length;it++)this.words[it]=this.words[it]&_e.words[it];return this.length=tt.length,this.strip()},k.prototype.iand=function(_e){return _((this.negative|_e.negative)===0),this.iuand(_e)},k.prototype.and=function(_e){return this.length>_e.length?this.clone().iand(_e):_e.clone().iand(this)},k.prototype.uand=function(_e){return this.length>_e.length?this.clone().iuand(_e):_e.clone().iuand(this)},k.prototype.iuxor=function(_e){var tt,it;this.length>_e.length?(tt=this,it=_e):(tt=_e,it=this);for(var dt=0;dt<it.length;dt++)this.words[dt]=tt.words[dt]^it.words[dt];if(this!==tt)for(;dt<tt.length;dt++)this.words[dt]=tt.words[dt];return this.length=tt.length,this.strip()},k.prototype.ixor=function(_e){return _((this.negative|_e.negative)===0),this.iuxor(_e)},k.prototype.xor=function(_e){return this.length>_e.length?this.clone().ixor(_e):_e.clone().ixor(this)},k.prototype.uxor=function(_e){return this.length>_e.length?this.clone().iuxor(_e):_e.clone().iuxor(this)},k.prototype.inotn=function(_e){_(typeof _e=="number"&&_e>=0);var tt=Math.ceil(_e/26)|0,it=_e%26;this._expand(tt),it>0&&tt--;for(var dt=0;dt<tt;dt++)this.words[dt]=~this.words[dt]&67108863;return it>0&&(this.words[dt]=~this.words[dt]&67108863>>26-it),this.strip()},k.prototype.notn=function(_e){return this.clone().inotn(_e)},k.prototype.setn=function(_e,tt){_(typeof _e=="number"&&_e>=0);var it=_e/26|0,dt=_e%26;return this._expand(it+1),tt?this.words[it]=this.words[it]|1<<dt:this.words[it]=this.words[it]&~(1<<dt),this.strip()},k.prototype.iadd=function(_e){var tt;if(this.negative!==0&&_e.negative===0)return this.negative=0,tt=this.isub(_e),this.negative^=1,this._normSign();if(this.negative===0&&_e.negative!==0)return _e.negative=0,tt=this.isub(_e),_e.negative=1,tt._normSign();var it,dt;this.length>_e.length?(it=this,dt=_e):(it=_e,dt=this);for(var lt=0,gt=0;gt<dt.length;gt++)tt=(it.words[gt]|0)+(dt.words[gt]|0)+lt,this.words[gt]=tt&67108863,lt=tt>>>26;for(;lt!==0&&gt<it.length;gt++)tt=(it.words[gt]|0)+lt,this.words[gt]=tt&67108863,lt=tt>>>26;if(this.length=it.length,lt!==0)this.words[this.length]=lt,this.length++;else if(it!==this)for(;gt<it.length;gt++)this.words[gt]=it.words[gt];return this},k.prototype.add=function(_e){var tt;return _e.negative!==0&&this.negative===0?(_e.negative=0,tt=this.sub(_e),_e.negative^=1,tt):_e.negative===0&&this.negative!==0?(this.negative=0,tt=_e.sub(this),this.negative=1,tt):this.length>_e.length?this.clone().iadd(_e):_e.clone().iadd(this)},k.prototype.isub=function(_e){if(_e.negative!==0){_e.negative=0;var tt=this.iadd(_e);return _e.negative=1,tt._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(_e),this.negative=1,this._normSign();var it=this.cmp(_e);if(it===0)return this.negative=0,this.length=1,this.words[0]=0,this;var dt,lt;it>0?(dt=this,lt=_e):(dt=_e,lt=this);for(var gt=0,Et=0;Et<lt.length;Et++)tt=(dt.words[Et]|0)-(lt.words[Et]|0)+gt,gt=tt>>26,this.words[Et]=tt&67108863;for(;gt!==0&&Et<dt.length;Et++)tt=(dt.words[Et]|0)+gt,gt=tt>>26,this.words[Et]=tt&67108863;if(gt===0&&Et<dt.length&&dt!==this)for(;Et<dt.length;Et++)this.words[Et]=dt.words[Et];return this.length=Math.max(this.length,Et),dt!==this&&(this.negative=1),this.strip()},k.prototype.sub=function(_e){return this.clone().isub(_e)};function Tt(ut,_e,tt){tt.negative=_e.negative^ut.negative;var it=ut.length+_e.length|0;tt.length=it,it=it-1|0;var dt=ut.words[0]|0,lt=_e.words[0]|0,gt=dt*lt,Et=gt&67108863,pt=gt/67108864|0;tt.words[0]=Et;for(var rt=1;rt<it;rt++){for(var mt=pt>>>26,Lt=pt&67108863,Gt=Math.min(rt,_e.length-1),rr=Math.max(0,rt-ut.length+1);rr<=Gt;rr++){var ir=rt-rr|0;dt=ut.words[ir]|0,lt=_e.words[rr]|0,gt=dt*lt+Lt,mt+=gt/67108864|0,Lt=gt&67108863}tt.words[rt]=Lt|0,pt=mt|0}return pt!==0?tt.words[rt]=pt|0:tt.length--,tt.strip()}var At=function(_e,tt,it){var dt=_e.words,lt=tt.words,gt=it.words,Et=0,pt,rt,mt,Lt=dt[0]|0,Gt=Lt&8191,rr=Lt>>>13,ir=dt[1]|0,Wt=ir&8191,zt=ir>>>13,wt=dt[2]|0,Vt=wt&8191,Qt=wt>>>13,Nt=dt[3]|0,st=Nt&8191,Ct=Nt>>>13,qt=dt[4]|0,cr=qt&8191,dr=qt>>>13,Er=dt[5]|0,Tr=Er&8191,gr=Er>>>13,Zr=dt[6]|0,Pr=Zr&8191,_r=Zr>>>13,St=dt[7]|0,Kt=St&8191,er=St>>>13,kr=dt[8]|0,tr=kr&8191,bt=kr>>>13,jt=dt[9]|0,Ut=jt&8191,Ft=jt>>>13,Ht=lt[0]|0,or=Ht&8191,vr=Ht>>>13,Ir=lt[1]|0,Sr=Ir&8191,Or=Ir>>>13,Cr=lt[2]|0,yt=Cr&8191,Bt=Cr>>>13,Zt=lt[3]|0,yr=Zt&8191,fr=Zt>>>13,Rr=lt[4]|0,Nr=Rr&8191,xr=Rr>>>13,Xr=lt[5]|0,Ar=Xr&8191,Br=Xr>>>13,rn=lt[6]|0,Dr=rn&8191,qr=rn>>>13,nn=lt[7]|0,$r=nn&8191,Lr=nn>>>13,Qr=lt[8]|0,Ur=Qr&8191,Jr=Qr>>>13,cn=lt[9]|0,Fr=cn&8191,Vr=cn>>>13;it.negative=_e.negative^tt.negative,it.length=19,pt=Math.imul(Gt,or),rt=Math.imul(Gt,vr),rt=rt+Math.imul(rr,or)|0,mt=Math.imul(rr,vr);var sn=(Et+pt|0)+((rt&8191)<<13)|0;Et=(mt+(rt>>>13)|0)+(sn>>>26)|0,sn&=67108863,pt=Math.imul(Wt,or),rt=Math.imul(Wt,vr),rt=rt+Math.imul(zt,or)|0,mt=Math.imul(zt,vr),pt=pt+Math.imul(Gt,Sr)|0,rt=rt+Math.imul(Gt,Or)|0,rt=rt+Math.imul(rr,Sr)|0,mt=mt+Math.imul(rr,Or)|0;var un=(Et+pt|0)+((rt&8191)<<13)|0;Et=(mt+(rt>>>13)|0)+(un>>>26)|0,un&=67108863,pt=Math.imul(Vt,or),rt=Math.imul(Vt,vr),rt=rt+Math.imul(Qt,or)|0,mt=Math.imul(Qt,vr),pt=pt+Math.imul(Wt,Sr)|0,rt=rt+Math.imul(Wt,Or)|0,rt=rt+Math.imul(zt,Sr)|0,mt=mt+Math.imul(zt,Or)|0,pt=pt+Math.imul(Gt,yt)|0,rt=rt+Math.imul(Gt,Bt)|0,rt=rt+Math.imul(rr,yt)|0,mt=mt+Math.imul(rr,Bt)|0;var yn=(Et+pt|0)+((rt&8191)<<13)|0;Et=(mt+(rt>>>13)|0)+(yn>>>26)|0,yn&=67108863,pt=Math.imul(st,or),rt=Math.imul(st,vr),rt=rt+Math.imul(Ct,or)|0,mt=Math.imul(Ct,vr),pt=pt+Math.imul(Vt,Sr)|0,rt=rt+Math.imul(Vt,Or)|0,rt=rt+Math.imul(Qt,Sr)|0,mt=mt+Math.imul(Qt,Or)|0,pt=pt+Math.imul(Wt,yt)|0,rt=rt+Math.imul(Wt,Bt)|0,rt=rt+Math.imul(zt,yt)|0,mt=mt+Math.imul(zt,Bt)|0,pt=pt+Math.imul(Gt,yr)|0,rt=rt+Math.imul(Gt,fr)|0,rt=rt+Math.imul(rr,yr)|0,mt=mt+Math.imul(rr,fr)|0;var br=(Et+pt|0)+((rt&8191)<<13)|0;Et=(mt+(rt>>>13)|0)+(br>>>26)|0,br&=67108863,pt=Math.imul(cr,or),rt=Math.imul(cr,vr),rt=rt+Math.imul(dr,or)|0,mt=Math.imul(dr,vr),pt=pt+Math.imul(st,Sr)|0,rt=rt+Math.imul(st,Or)|0,rt=rt+Math.imul(Ct,Sr)|0,mt=mt+Math.imul(Ct,Or)|0,pt=pt+Math.imul(Vt,yt)|0,rt=rt+Math.imul(Vt,Bt)|0,rt=rt+Math.imul(Qt,yt)|0,mt=mt+Math.imul(Qt,Bt)|0,pt=pt+Math.imul(Wt,yr)|0,rt=rt+Math.imul(Wt,fr)|0,rt=rt+Math.imul(zt,yr)|0,mt=mt+Math.imul(zt,fr)|0,pt=pt+Math.imul(Gt,Nr)|0,rt=rt+Math.imul(Gt,xr)|0,rt=rt+Math.imul(rr,Nr)|0,mt=mt+Math.imul(rr,xr)|0;var wr=(Et+pt|0)+((rt&8191)<<13)|0;Et=(mt+(rt>>>13)|0)+(wr>>>26)|0,wr&=67108863,pt=Math.imul(Tr,or),rt=Math.imul(Tr,vr),rt=rt+Math.imul(gr,or)|0,mt=Math.imul(gr,vr),pt=pt+Math.imul(cr,Sr)|0,rt=rt+Math.imul(cr,Or)|0,rt=rt+Math.imul(dr,Sr)|0,mt=mt+Math.imul(dr,Or)|0,pt=pt+Math.imul(st,yt)|0,rt=rt+Math.imul(st,Bt)|0,rt=rt+Math.imul(Ct,yt)|0,mt=mt+Math.imul(Ct,Bt)|0,pt=pt+Math.imul(Vt,yr)|0,rt=rt+Math.imul(Vt,fr)|0,rt=rt+Math.imul(Qt,yr)|0,mt=mt+Math.imul(Qt,fr)|0,pt=pt+Math.imul(Wt,Nr)|0,rt=rt+Math.imul(Wt,xr)|0,rt=rt+Math.imul(zt,Nr)|0,mt=mt+Math.imul(zt,xr)|0,pt=pt+Math.imul(Gt,Ar)|0,rt=rt+Math.imul(Gt,Br)|0,rt=rt+Math.imul(rr,Ar)|0,mt=mt+Math.imul(rr,Br)|0;var Mr=(Et+pt|0)+((rt&8191)<<13)|0;Et=(mt+(rt>>>13)|0)+(Mr>>>26)|0,Mr&=67108863,pt=Math.imul(Pr,or),rt=Math.imul(Pr,vr),rt=rt+Math.imul(_r,or)|0,mt=Math.imul(_r,vr),pt=pt+Math.imul(Tr,Sr)|0,rt=rt+Math.imul(Tr,Or)|0,rt=rt+Math.imul(gr,Sr)|0,mt=mt+Math.imul(gr,Or)|0,pt=pt+Math.imul(cr,yt)|0,rt=rt+Math.imul(cr,Bt)|0,rt=rt+Math.imul(dr,yt)|0,mt=mt+Math.imul(dr,Bt)|0,pt=pt+Math.imul(st,yr)|0,rt=rt+Math.imul(st,fr)|0,rt=rt+Math.imul(Ct,yr)|0,mt=mt+Math.imul(Ct,fr)|0,pt=pt+Math.imul(Vt,Nr)|0,rt=rt+Math.imul(Vt,xr)|0,rt=rt+Math.imul(Qt,Nr)|0,mt=mt+Math.imul(Qt,xr)|0,pt=pt+Math.imul(Wt,Ar)|0,rt=rt+Math.imul(Wt,Br)|0,rt=rt+Math.imul(zt,Ar)|0,mt=mt+Math.imul(zt,Br)|0,pt=pt+Math.imul(Gt,Dr)|0,rt=rt+Math.imul(Gt,qr)|0,rt=rt+Math.imul(rr,Dr)|0,mt=mt+Math.imul(rr,qr)|0;var Wr=(Et+pt|0)+((rt&8191)<<13)|0;Et=(mt+(rt>>>13)|0)+(Wr>>>26)|0,Wr&=67108863,pt=Math.imul(Kt,or),rt=Math.imul(Kt,vr),rt=rt+Math.imul(er,or)|0,mt=Math.imul(er,vr),pt=pt+Math.imul(Pr,Sr)|0,rt=rt+Math.imul(Pr,Or)|0,rt=rt+Math.imul(_r,Sr)|0,mt=mt+Math.imul(_r,Or)|0,pt=pt+Math.imul(Tr,yt)|0,rt=rt+Math.imul(Tr,Bt)|0,rt=rt+Math.imul(gr,yt)|0,mt=mt+Math.imul(gr,Bt)|0,pt=pt+Math.imul(cr,yr)|0,rt=rt+Math.imul(cr,fr)|0,rt=rt+Math.imul(dr,yr)|0,mt=mt+Math.imul(dr,fr)|0,pt=pt+Math.imul(st,Nr)|0,rt=rt+Math.imul(st,xr)|0,rt=rt+Math.imul(Ct,Nr)|0,mt=mt+Math.imul(Ct,xr)|0,pt=pt+Math.imul(Vt,Ar)|0,rt=rt+Math.imul(Vt,Br)|0,rt=rt+Math.imul(Qt,Ar)|0,mt=mt+Math.imul(Qt,Br)|0,pt=pt+Math.imul(Wt,Dr)|0,rt=rt+Math.imul(Wt,qr)|0,rt=rt+Math.imul(zt,Dr)|0,mt=mt+Math.imul(zt,qr)|0,pt=pt+Math.imul(Gt,$r)|0,rt=rt+Math.imul(Gt,Lr)|0,rt=rt+Math.imul(rr,$r)|0,mt=mt+Math.imul(rr,Lr)|0;var Hr=(Et+pt|0)+((rt&8191)<<13)|0;Et=(mt+(rt>>>13)|0)+(Hr>>>26)|0,Hr&=67108863,pt=Math.imul(tr,or),rt=Math.imul(tr,vr),rt=rt+Math.imul(bt,or)|0,mt=Math.imul(bt,vr),pt=pt+Math.imul(Kt,Sr)|0,rt=rt+Math.imul(Kt,Or)|0,rt=rt+Math.imul(er,Sr)|0,mt=mt+Math.imul(er,Or)|0,pt=pt+Math.imul(Pr,yt)|0,rt=rt+Math.imul(Pr,Bt)|0,rt=rt+Math.imul(_r,yt)|0,mt=mt+Math.imul(_r,Bt)|0,pt=pt+Math.imul(Tr,yr)|0,rt=rt+Math.imul(Tr,fr)|0,rt=rt+Math.imul(gr,yr)|0,mt=mt+Math.imul(gr,fr)|0,pt=pt+Math.imul(cr,Nr)|0,rt=rt+Math.imul(cr,xr)|0,rt=rt+Math.imul(dr,Nr)|0,mt=mt+Math.imul(dr,xr)|0,pt=pt+Math.imul(st,Ar)|0,rt=rt+Math.imul(st,Br)|0,rt=rt+Math.imul(Ct,Ar)|0,mt=mt+Math.imul(Ct,Br)|0,pt=pt+Math.imul(Vt,Dr)|0,rt=rt+Math.imul(Vt,qr)|0,rt=rt+Math.imul(Qt,Dr)|0,mt=mt+Math.imul(Qt,qr)|0,pt=pt+Math.imul(Wt,$r)|0,rt=rt+Math.imul(Wt,Lr)|0,rt=rt+Math.imul(zt,$r)|0,mt=mt+Math.imul(zt,Lr)|0,pt=pt+Math.imul(Gt,Ur)|0,rt=rt+Math.imul(Gt,Jr)|0,rt=rt+Math.imul(rr,Ur)|0,mt=mt+Math.imul(rr,Jr)|0;var Gr=(Et+pt|0)+((rt&8191)<<13)|0;Et=(mt+(rt>>>13)|0)+(Gr>>>26)|0,Gr&=67108863,pt=Math.imul(Ut,or),rt=Math.imul(Ut,vr),rt=rt+Math.imul(Ft,or)|0,mt=Math.imul(Ft,vr),pt=pt+Math.imul(tr,Sr)|0,rt=rt+Math.imul(tr,Or)|0,rt=rt+Math.imul(bt,Sr)|0,mt=mt+Math.imul(bt,Or)|0,pt=pt+Math.imul(Kt,yt)|0,rt=rt+Math.imul(Kt,Bt)|0,rt=rt+Math.imul(er,yt)|0,mt=mt+Math.imul(er,Bt)|0,pt=pt+Math.imul(Pr,yr)|0,rt=rt+Math.imul(Pr,fr)|0,rt=rt+Math.imul(_r,yr)|0,mt=mt+Math.imul(_r,fr)|0,pt=pt+Math.imul(Tr,Nr)|0,rt=rt+Math.imul(Tr,xr)|0,rt=rt+Math.imul(gr,Nr)|0,mt=mt+Math.imul(gr,xr)|0,pt=pt+Math.imul(cr,Ar)|0,rt=rt+Math.imul(cr,Br)|0,rt=rt+Math.imul(dr,Ar)|0,mt=mt+Math.imul(dr,Br)|0,pt=pt+Math.imul(st,Dr)|0,rt=rt+Math.imul(st,qr)|0,rt=rt+Math.imul(Ct,Dr)|0,mt=mt+Math.imul(Ct,qr)|0,pt=pt+Math.imul(Vt,$r)|0,rt=rt+Math.imul(Vt,Lr)|0,rt=rt+Math.imul(Qt,$r)|0,mt=mt+Math.imul(Qt,Lr)|0,pt=pt+Math.imul(Wt,Ur)|0,rt=rt+Math.imul(Wt,Jr)|0,rt=rt+Math.imul(zt,Ur)|0,mt=mt+Math.imul(zt,Jr)|0,pt=pt+Math.imul(Gt,Fr)|0,rt=rt+Math.imul(Gt,Vr)|0,rt=rt+Math.imul(rr,Fr)|0,mt=mt+Math.imul(rr,Vr)|0;var Yr=(Et+pt|0)+((rt&8191)<<13)|0;Et=(mt+(rt>>>13)|0)+(Yr>>>26)|0,Yr&=67108863,pt=Math.imul(Ut,Sr),rt=Math.imul(Ut,Or),rt=rt+Math.imul(Ft,Sr)|0,mt=Math.imul(Ft,Or),pt=pt+Math.imul(tr,yt)|0,rt=rt+Math.imul(tr,Bt)|0,rt=rt+Math.imul(bt,yt)|0,mt=mt+Math.imul(bt,Bt)|0,pt=pt+Math.imul(Kt,yr)|0,rt=rt+Math.imul(Kt,fr)|0,rt=rt+Math.imul(er,yr)|0,mt=mt+Math.imul(er,fr)|0,pt=pt+Math.imul(Pr,Nr)|0,rt=rt+Math.imul(Pr,xr)|0,rt=rt+Math.imul(_r,Nr)|0,mt=mt+Math.imul(_r,xr)|0,pt=pt+Math.imul(Tr,Ar)|0,rt=rt+Math.imul(Tr,Br)|0,rt=rt+Math.imul(gr,Ar)|0,mt=mt+Math.imul(gr,Br)|0,pt=pt+Math.imul(cr,Dr)|0,rt=rt+Math.imul(cr,qr)|0,rt=rt+Math.imul(dr,Dr)|0,mt=mt+Math.imul(dr,qr)|0,pt=pt+Math.imul(st,$r)|0,rt=rt+Math.imul(st,Lr)|0,rt=rt+Math.imul(Ct,$r)|0,mt=mt+Math.imul(Ct,Lr)|0,pt=pt+Math.imul(Vt,Ur)|0,rt=rt+Math.imul(Vt,Jr)|0,rt=rt+Math.imul(Qt,Ur)|0,mt=mt+Math.imul(Qt,Jr)|0,pt=pt+Math.imul(Wt,Fr)|0,rt=rt+Math.imul(Wt,Vr)|0,rt=rt+Math.imul(zt,Fr)|0,mt=mt+Math.imul(zt,Vr)|0;var en=(Et+pt|0)+((rt&8191)<<13)|0;Et=(mt+(rt>>>13)|0)+(en>>>26)|0,en&=67108863,pt=Math.imul(Ut,yt),rt=Math.imul(Ut,Bt),rt=rt+Math.imul(Ft,yt)|0,mt=Math.imul(Ft,Bt),pt=pt+Math.imul(tr,yr)|0,rt=rt+Math.imul(tr,fr)|0,rt=rt+Math.imul(bt,yr)|0,mt=mt+Math.imul(bt,fr)|0,pt=pt+Math.imul(Kt,Nr)|0,rt=rt+Math.imul(Kt,xr)|0,rt=rt+Math.imul(er,Nr)|0,mt=mt+Math.imul(er,xr)|0,pt=pt+Math.imul(Pr,Ar)|0,rt=rt+Math.imul(Pr,Br)|0,rt=rt+Math.imul(_r,Ar)|0,mt=mt+Math.imul(_r,Br)|0,pt=pt+Math.imul(Tr,Dr)|0,rt=rt+Math.imul(Tr,qr)|0,rt=rt+Math.imul(gr,Dr)|0,mt=mt+Math.imul(gr,qr)|0,pt=pt+Math.imul(cr,$r)|0,rt=rt+Math.imul(cr,Lr)|0,rt=rt+Math.imul(dr,$r)|0,mt=mt+Math.imul(dr,Lr)|0,pt=pt+Math.imul(st,Ur)|0,rt=rt+Math.imul(st,Jr)|0,rt=rt+Math.imul(Ct,Ur)|0,mt=mt+Math.imul(Ct,Jr)|0,pt=pt+Math.imul(Vt,Fr)|0,rt=rt+Math.imul(Vt,Vr)|0,rt=rt+Math.imul(Qt,Fr)|0,mt=mt+Math.imul(Qt,Vr)|0;var jr=(Et+pt|0)+((rt&8191)<<13)|0;Et=(mt+(rt>>>13)|0)+(jr>>>26)|0,jr&=67108863,pt=Math.imul(Ut,yr),rt=Math.imul(Ut,fr),rt=rt+Math.imul(Ft,yr)|0,mt=Math.imul(Ft,fr),pt=pt+Math.imul(tr,Nr)|0,rt=rt+Math.imul(tr,xr)|0,rt=rt+Math.imul(bt,Nr)|0,mt=mt+Math.imul(bt,xr)|0,pt=pt+Math.imul(Kt,Ar)|0,rt=rt+Math.imul(Kt,Br)|0,rt=rt+Math.imul(er,Ar)|0,mt=mt+Math.imul(er,Br)|0,pt=pt+Math.imul(Pr,Dr)|0,rt=rt+Math.imul(Pr,qr)|0,rt=rt+Math.imul(_r,Dr)|0,mt=mt+Math.imul(_r,qr)|0,pt=pt+Math.imul(Tr,$r)|0,rt=rt+Math.imul(Tr,Lr)|0,rt=rt+Math.imul(gr,$r)|0,mt=mt+Math.imul(gr,Lr)|0,pt=pt+Math.imul(cr,Ur)|0,rt=rt+Math.imul(cr,Jr)|0,rt=rt+Math.imul(dr,Ur)|0,mt=mt+Math.imul(dr,Jr)|0,pt=pt+Math.imul(st,Fr)|0,rt=rt+Math.imul(st,Vr)|0,rt=rt+Math.imul(Ct,Fr)|0,mt=mt+Math.imul(Ct,Vr)|0;var pn=(Et+pt|0)+((rt&8191)<<13)|0;Et=(mt+(rt>>>13)|0)+(pn>>>26)|0,pn&=67108863,pt=Math.imul(Ut,Nr),rt=Math.imul(Ut,xr),rt=rt+Math.imul(Ft,Nr)|0,mt=Math.imul(Ft,xr),pt=pt+Math.imul(tr,Ar)|0,rt=rt+Math.imul(tr,Br)|0,rt=rt+Math.imul(bt,Ar)|0,mt=mt+Math.imul(bt,Br)|0,pt=pt+Math.imul(Kt,Dr)|0,rt=rt+Math.imul(Kt,qr)|0,rt=rt+Math.imul(er,Dr)|0,mt=mt+Math.imul(er,qr)|0,pt=pt+Math.imul(Pr,$r)|0,rt=rt+Math.imul(Pr,Lr)|0,rt=rt+Math.imul(_r,$r)|0,mt=mt+Math.imul(_r,Lr)|0,pt=pt+Math.imul(Tr,Ur)|0,rt=rt+Math.imul(Tr,Jr)|0,rt=rt+Math.imul(gr,Ur)|0,mt=mt+Math.imul(gr,Jr)|0,pt=pt+Math.imul(cr,Fr)|0,rt=rt+Math.imul(cr,Vr)|0,rt=rt+Math.imul(dr,Fr)|0,mt=mt+Math.imul(dr,Vr)|0;var mn=(Et+pt|0)+((rt&8191)<<13)|0;Et=(mt+(rt>>>13)|0)+(mn>>>26)|0,mn&=67108863,pt=Math.imul(Ut,Ar),rt=Math.imul(Ut,Br),rt=rt+Math.imul(Ft,Ar)|0,mt=Math.imul(Ft,Br),pt=pt+Math.imul(tr,Dr)|0,rt=rt+Math.imul(tr,qr)|0,rt=rt+Math.imul(bt,Dr)|0,mt=mt+Math.imul(bt,qr)|0,pt=pt+Math.imul(Kt,$r)|0,rt=rt+Math.imul(Kt,Lr)|0,rt=rt+Math.imul(er,$r)|0,mt=mt+Math.imul(er,Lr)|0,pt=pt+Math.imul(Pr,Ur)|0,rt=rt+Math.imul(Pr,Jr)|0,rt=rt+Math.imul(_r,Ur)|0,mt=mt+Math.imul(_r,Jr)|0,pt=pt+Math.imul(Tr,Fr)|0,rt=rt+Math.imul(Tr,Vr)|0,rt=rt+Math.imul(gr,Fr)|0,mt=mt+Math.imul(gr,Vr)|0;var hn=(Et+pt|0)+((rt&8191)<<13)|0;Et=(mt+(rt>>>13)|0)+(hn>>>26)|0,hn&=67108863,pt=Math.imul(Ut,Dr),rt=Math.imul(Ut,qr),rt=rt+Math.imul(Ft,Dr)|0,mt=Math.imul(Ft,qr),pt=pt+Math.imul(tr,$r)|0,rt=rt+Math.imul(tr,Lr)|0,rt=rt+Math.imul(bt,$r)|0,mt=mt+Math.imul(bt,Lr)|0,pt=pt+Math.imul(Kt,Ur)|0,rt=rt+Math.imul(Kt,Jr)|0,rt=rt+Math.imul(er,Ur)|0,mt=mt+Math.imul(er,Jr)|0,pt=pt+Math.imul(Pr,Fr)|0,rt=rt+Math.imul(Pr,Vr)|0,rt=rt+Math.imul(_r,Fr)|0,mt=mt+Math.imul(_r,Vr)|0;var fn=(Et+pt|0)+((rt&8191)<<13)|0;Et=(mt+(rt>>>13)|0)+(fn>>>26)|0,fn&=67108863,pt=Math.imul(Ut,$r),rt=Math.imul(Ut,Lr),rt=rt+Math.imul(Ft,$r)|0,mt=Math.imul(Ft,Lr),pt=pt+Math.imul(tr,Ur)|0,rt=rt+Math.imul(tr,Jr)|0,rt=rt+Math.imul(bt,Ur)|0,mt=mt+Math.imul(bt,Jr)|0,pt=pt+Math.imul(Kt,Fr)|0,rt=rt+Math.imul(Kt,Vr)|0,rt=rt+Math.imul(er,Fr)|0,mt=mt+Math.imul(er,Vr)|0;var vn=(Et+pt|0)+((rt&8191)<<13)|0;Et=(mt+(rt>>>13)|0)+(vn>>>26)|0,vn&=67108863,pt=Math.imul(Ut,Ur),rt=Math.imul(Ut,Jr),rt=rt+Math.imul(Ft,Ur)|0,mt=Math.imul(Ft,Jr),pt=pt+Math.imul(tr,Fr)|0,rt=rt+Math.imul(tr,Vr)|0,rt=rt+Math.imul(bt,Fr)|0,mt=mt+Math.imul(bt,Vr)|0;var gn=(Et+pt|0)+((rt&8191)<<13)|0;Et=(mt+(rt>>>13)|0)+(gn>>>26)|0,gn&=67108863,pt=Math.imul(Ut,Fr),rt=Math.imul(Ut,Vr),rt=rt+Math.imul(Ft,Fr)|0,mt=Math.imul(Ft,Vr);var Sn=(Et+pt|0)+((rt&8191)<<13)|0;return Et=(mt+(rt>>>13)|0)+(Sn>>>26)|0,Sn&=67108863,gt[0]=sn,gt[1]=un,gt[2]=yn,gt[3]=br,gt[4]=wr,gt[5]=Mr,gt[6]=Wr,gt[7]=Hr,gt[8]=Gr,gt[9]=Yr,gt[10]=en,gt[11]=jr,gt[12]=pn,gt[13]=mn,gt[14]=hn,gt[15]=fn,gt[16]=vn,gt[17]=gn,gt[18]=Sn,Et!==0&&(gt[19]=Et,it.length++),it};Math.imul||(At=Tt);function Mt(ut,_e,tt){tt.negative=_e.negative^ut.negative,tt.length=ut.length+_e.length;for(var it=0,dt=0,lt=0;lt<tt.length-1;lt++){var gt=dt;dt=0;for(var Et=it&67108863,pt=Math.min(lt,_e.length-1),rt=Math.max(0,lt-ut.length+1);rt<=pt;rt++){var mt=lt-rt,Lt=ut.words[mt]|0,Gt=_e.words[rt]|0,rr=Lt*Gt,ir=rr&67108863;gt=gt+(rr/67108864|0)|0,ir=ir+Et|0,Et=ir&67108863,gt=gt+(ir>>>26)|0,dt+=gt>>>26,gt&=67108863}tt.words[lt]=Et,it=gt,gt=dt}return it!==0?tt.words[lt]=it:tt.length--,tt.strip()}function Dt(ut,_e,tt){var it=new Rt;return it.mulp(ut,_e,tt)}k.prototype.mulTo=function(_e,tt){var it,dt=this.length+_e.length;return this.length===10&&_e.length===10?it=At(this,_e,tt):dt<63?it=Tt(this,_e,tt):dt<1024?it=Mt(this,_e,tt):it=Dt(this,_e,tt),it};function Rt(ut,_e){this.x=ut,this.y=_e}Rt.prototype.makeRBT=function(_e){for(var tt=new Array(_e),it=k.prototype._countBits(_e)-1,dt=0;dt<_e;dt++)tt[dt]=this.revBin(dt,it,_e);return tt},Rt.prototype.revBin=function(_e,tt,it){if(_e===0||_e===it-1)return _e;for(var dt=0,lt=0;lt<tt;lt++)dt|=(_e&1)<<tt-lt-1,_e>>=1;return dt},Rt.prototype.permute=function(_e,tt,it,dt,lt,gt){for(var Et=0;Et<gt;Et++)dt[Et]=tt[_e[Et]],lt[Et]=it[_e[Et]]},Rt.prototype.transform=function(_e,tt,it,dt,lt,gt){this.permute(gt,_e,tt,it,dt,lt);for(var Et=1;Et<lt;Et<<=1)for(var pt=Et<<1,rt=Math.cos(2*Math.PI/pt),mt=Math.sin(2*Math.PI/pt),Lt=0;Lt<lt;Lt+=pt)for(var Gt=rt,rr=mt,ir=0;ir<Et;ir++){var Wt=it[Lt+ir],zt=dt[Lt+ir],wt=it[Lt+ir+Et],Vt=dt[Lt+ir+Et],Qt=Gt*wt-rr*Vt;Vt=Gt*Vt+rr*wt,wt=Qt,it[Lt+ir]=Wt+wt,dt[Lt+ir]=zt+Vt,it[Lt+ir+Et]=Wt-wt,dt[Lt+ir+Et]=zt-Vt,ir!==pt&&(Qt=rt*Gt-mt*rr,rr=rt*rr+mt*Gt,Gt=Qt)}},Rt.prototype.guessLen13b=function(_e,tt){var it=Math.max(tt,_e)|1,dt=it&1,lt=0;for(it=it/2|0;it;it=it>>>1)lt++;return 1<<lt+1+dt},Rt.prototype.conjugate=function(_e,tt,it){if(!(it<=1))for(var dt=0;dt<it/2;dt++){var lt=_e[dt];_e[dt]=_e[it-dt-1],_e[it-dt-1]=lt,lt=tt[dt],tt[dt]=-tt[it-dt-1],tt[it-dt-1]=-lt}},Rt.prototype.normalize13b=function(_e,tt){for(var it=0,dt=0;dt<tt/2;dt++){var lt=Math.round(_e[2*dt+1]/tt)*8192+Math.round(_e[2*dt]/tt)+it;_e[dt]=lt&67108863,lt<67108864?it=0:it=lt/67108864|0}return _e},Rt.prototype.convert13b=function(_e,tt,it,dt){for(var lt=0,gt=0;gt<tt;gt++)lt=lt+(_e[gt]|0),it[2*gt]=lt&8191,lt=lt>>>13,it[2*gt+1]=lt&8191,lt=lt>>>13;for(gt=2*tt;gt<dt;++gt)it[gt]=0;_(lt===0),_((lt&-8192)===0)},Rt.prototype.stub=function(_e){for(var tt=new Array(_e),it=0;it<_e;it++)tt[it]=0;return tt},Rt.prototype.mulp=function(_e,tt,it){var dt=2*this.guessLen13b(_e.length,tt.length),lt=this.makeRBT(dt),gt=this.stub(dt),Et=new Array(dt),pt=new Array(dt),rt=new Array(dt),mt=new Array(dt),Lt=new Array(dt),Gt=new Array(dt),rr=it.words;rr.length=dt,this.convert13b(_e.words,_e.length,Et,dt),this.convert13b(tt.words,tt.length,mt,dt),this.transform(Et,gt,pt,rt,dt,lt),this.transform(mt,gt,Lt,Gt,dt,lt);for(var ir=0;ir<dt;ir++){var Wt=pt[ir]*Lt[ir]-rt[ir]*Gt[ir];rt[ir]=pt[ir]*Gt[ir]+rt[ir]*Lt[ir],pt[ir]=Wt}return this.conjugate(pt,rt,dt),this.transform(pt,rt,rr,gt,dt,lt),this.conjugate(rr,gt,dt),this.normalize13b(rr,dt),it.negative=_e.negative^tt.negative,it.length=_e.length+tt.length,it.strip()},k.prototype.mul=function(_e){var tt=new k(null);return tt.words=new Array(this.length+_e.length),this.mulTo(_e,tt)},k.prototype.mulf=function(_e){var tt=new k(null);return tt.words=new Array(this.length+_e.length),Dt(this,_e,tt)},k.prototype.imul=function(_e){return this.clone().mulTo(_e,this)},k.prototype.imuln=function(_e){_(typeof _e=="number"),_(_e<67108864);for(var tt=0,it=0;it<this.length;it++){var dt=(this.words[it]|0)*_e,lt=(dt&67108863)+(tt&67108863);tt>>=26,tt+=dt/67108864|0,tt+=lt>>>26,this.words[it]=lt&67108863}return tt!==0&&(this.words[it]=tt,this.length++),this},k.prototype.muln=function(_e){return this.clone().imuln(_e)},k.prototype.sqr=function(){return this.mul(this)},k.prototype.isqr=function(){return this.imul(this.clone())},k.prototype.pow=function(_e){var tt=$t(_e);if(tt.length===0)return new k(1);for(var it=this,dt=0;dt<tt.length&&tt[dt]===0;dt++,it=it.sqr());if(++dt<tt.length)for(var lt=it.sqr();dt<tt.length;dt++,lt=lt.sqr())tt[dt]!==0&&(it=it.mul(lt));return it},k.prototype.iushln=function(_e){_(typeof _e=="number"&&_e>=0);var tt=_e%26,it=(_e-tt)/26,dt=67108863>>>26-tt<<26-tt,lt;if(tt!==0){var gt=0;for(lt=0;lt<this.length;lt++){var Et=this.words[lt]&dt,pt=(this.words[lt]|0)-Et<<tt;this.words[lt]=pt|gt,gt=Et>>>26-tt}gt&&(this.words[lt]=gt,this.length++)}if(it!==0){for(lt=this.length-1;lt>=0;lt--)this.words[lt+it]=this.words[lt];for(lt=0;lt<it;lt++)this.words[lt]=0;this.length+=it}return this.strip()},k.prototype.ishln=function(_e){return _(this.negative===0),this.iushln(_e)},k.prototype.iushrn=function(_e,tt,it){_(typeof _e=="number"&&_e>=0);var dt;tt?dt=(tt-tt%26)/26:dt=0;var lt=_e%26,gt=Math.min((_e-lt)/26,this.length),Et=67108863^67108863>>>lt<<lt,pt=it;if(dt-=gt,dt=Math.max(0,dt),pt){for(var rt=0;rt<gt;rt++)pt.words[rt]=this.words[rt];pt.length=gt}if(gt!==0)if(this.length>gt)for(this.length-=gt,rt=0;rt<this.length;rt++)this.words[rt]=this.words[rt+gt];else this.words[0]=0,this.length=1;var mt=0;for(rt=this.length-1;rt>=0&&(mt!==0||rt>=dt);rt--){var Lt=this.words[rt]|0;this.words[rt]=mt<<26-lt|Lt>>>lt,mt=Lt&Et}return pt&&mt!==0&&(pt.words[pt.length++]=mt),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},k.prototype.ishrn=function(_e,tt,it){return _(this.negative===0),this.iushrn(_e,tt,it)},k.prototype.shln=function(_e){return this.clone().ishln(_e)},k.prototype.ushln=function(_e){return this.clone().iushln(_e)},k.prototype.shrn=function(_e){return this.clone().ishrn(_e)},k.prototype.ushrn=function(_e){return this.clone().iushrn(_e)},k.prototype.testn=function(_e){_(typeof _e=="number"&&_e>=0);var tt=_e%26,it=(_e-tt)/26,dt=1<<tt;if(this.length<=it)return!1;var lt=this.words[it];return!!(lt&dt)},k.prototype.imaskn=function(_e){_(typeof _e=="number"&&_e>=0);var tt=_e%26,it=(_e-tt)/26;if(_(this.negative===0,"imaskn works only with positive numbers"),this.length<=it)return this;if(tt!==0&&it++,this.length=Math.min(it,this.length),tt!==0){var dt=67108863^67108863>>>tt<<tt;this.words[this.length-1]&=dt}return this.strip()},k.prototype.maskn=function(_e){return this.clone().imaskn(_e)},k.prototype.iaddn=function(_e){return _(typeof _e=="number"),_(_e<67108864),_e<0?this.isubn(-_e):this.negative!==0?this.length===1&&(this.words[0]|0)<_e?(this.words[0]=_e-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(_e),this.negative=1,this):this._iaddn(_e)},k.prototype._iaddn=function(_e){this.words[0]+=_e;for(var tt=0;tt<this.length&&this.words[tt]>=67108864;tt++)this.words[tt]-=67108864,tt===this.length-1?this.words[tt+1]=1:this.words[tt+1]++;return this.length=Math.max(this.length,tt+1),this},k.prototype.isubn=function(_e){if(_(typeof _e=="number"),_(_e<67108864),_e<0)return this.iaddn(-_e);if(this.negative!==0)return this.negative=0,this.iaddn(_e),this.negative=1,this;if(this.words[0]-=_e,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var tt=0;tt<this.length&&this.words[tt]<0;tt++)this.words[tt]+=67108864,this.words[tt+1]-=1;return this.strip()},k.prototype.addn=function(_e){return this.clone().iaddn(_e)},k.prototype.subn=function(_e){return this.clone().isubn(_e)},k.prototype.iabs=function(){return this.negative=0,this},k.prototype.abs=function(){return this.clone().iabs()},k.prototype._ishlnsubmul=function(_e,tt,it){var dt=_e.length+it,lt;this._expand(dt);var gt,Et=0;for(lt=0;lt<_e.length;lt++){gt=(this.words[lt+it]|0)+Et;var pt=(_e.words[lt]|0)*tt;gt-=pt&67108863,Et=(gt>>26)-(pt/67108864|0),this.words[lt+it]=gt&67108863}for(;lt<this.length-it;lt++)gt=(this.words[lt+it]|0)+Et,Et=gt>>26,this.words[lt+it]=gt&67108863;if(Et===0)return this.strip();for(_(Et===-1),Et=0,lt=0;lt<this.length;lt++)gt=-(this.words[lt]|0)+Et,Et=gt>>26,this.words[lt]=gt&67108863;return this.negative=1,this.strip()},k.prototype._wordDiv=function(_e,tt){var it=this.length-_e.length,dt=this.clone(),lt=_e,gt=lt.words[lt.length-1]|0,Et=this._countBits(gt);it=26-Et,it!==0&&(lt=lt.ushln(it),dt.iushln(it),gt=lt.words[lt.length-1]|0);var pt=dt.length-lt.length,rt;if(tt!=="mod"){rt=new k(null),rt.length=pt+1,rt.words=new Array(rt.length);for(var mt=0;mt<rt.length;mt++)rt.words[mt]=0}var Lt=dt.clone()._ishlnsubmul(lt,1,pt);Lt.negative===0&&(dt=Lt,rt&&(rt.words[pt]=1));for(var Gt=pt-1;Gt>=0;Gt--){var rr=(dt.words[lt.length+Gt]|0)*67108864+(dt.words[lt.length+Gt-1]|0);for(rr=Math.min(rr/gt|0,67108863),dt._ishlnsubmul(lt,rr,Gt);dt.negative!==0;)rr--,dt.negative=0,dt._ishlnsubmul(lt,1,Gt),dt.isZero()||(dt.negative^=1);rt&&(rt.words[Gt]=rr)}return rt&&rt.strip(),dt.strip(),tt!=="div"&&it!==0&&dt.iushrn(it),{div:rt||null,mod:dt}},k.prototype.divmod=function(_e,tt,it){if(_(!_e.isZero()),this.isZero())return{div:new k(0),mod:new k(0)};var dt,lt,gt;return this.negative!==0&&_e.negative===0?(gt=this.neg().divmod(_e,tt),tt!=="mod"&&(dt=gt.div.neg()),tt!=="div"&&(lt=gt.mod.neg(),it&&lt.negative!==0&&lt.iadd(_e)),{div:dt,mod:lt}):this.negative===0&&_e.negative!==0?(gt=this.divmod(_e.neg(),tt),tt!=="mod"&&(dt=gt.div.neg()),{div:dt,mod:gt.mod}):this.negative&_e.negative?(gt=this.neg().divmod(_e.neg(),tt),tt!=="div"&&(lt=gt.mod.neg(),it&&lt.negative!==0&&lt.isub(_e)),{div:gt.div,mod:lt}):_e.length>this.length||this.cmp(_e)<0?{div:new k(0),mod:this}:_e.length===1?tt==="div"?{div:this.divn(_e.words[0]),mod:null}:tt==="mod"?{div:null,mod:new k(this.modn(_e.words[0]))}:{div:this.divn(_e.words[0]),mod:new k(this.modn(_e.words[0]))}:this._wordDiv(_e,tt)},k.prototype.div=function(_e){return this.divmod(_e,"div",!1).div},k.prototype.mod=function(_e){return this.divmod(_e,"mod",!1).mod},k.prototype.umod=function(_e){return this.divmod(_e,"mod",!0).mod},k.prototype.divRound=function(_e){var tt=this.divmod(_e);if(tt.mod.isZero())return tt.div;var it=tt.div.negative!==0?tt.mod.isub(_e):tt.mod,dt=_e.ushrn(1),lt=_e.andln(1),gt=it.cmp(dt);return gt<0||lt===1&&gt===0?tt.div:tt.div.negative!==0?tt.div.isubn(1):tt.div.iaddn(1)},k.prototype.modn=function(_e){_(_e<=67108863);for(var tt=(1<<26)%_e,it=0,dt=this.length-1;dt>=0;dt--)it=(tt*it+(this.words[dt]|0))%_e;return it},k.prototype.idivn=function(_e){_(_e<=67108863);for(var tt=0,it=this.length-1;it>=0;it--){var dt=(this.words[it]|0)+tt*67108864;this.words[it]=dt/_e|0,tt=dt%_e}return this.strip()},k.prototype.divn=function(_e){return this.clone().idivn(_e)},k.prototype.egcd=function(_e){_(_e.negative===0),_(!_e.isZero());var tt=this,it=_e.clone();tt.negative!==0?tt=tt.umod(_e):tt=tt.clone();for(var dt=new k(1),lt=new k(0),gt=new k(0),Et=new k(1),pt=0;tt.isEven()&&it.isEven();)tt.iushrn(1),it.iushrn(1),++pt;for(var rt=it.clone(),mt=tt.clone();!tt.isZero();){for(var Lt=0,Gt=1;!(tt.words[0]&Gt)&&Lt<26;++Lt,Gt<<=1);if(Lt>0)for(tt.iushrn(Lt);Lt-- >0;)(dt.isOdd()||lt.isOdd())&&(dt.iadd(rt),lt.isub(mt)),dt.iushrn(1),lt.iushrn(1);for(var rr=0,ir=1;!(it.words[0]&ir)&&rr<26;++rr,ir<<=1);if(rr>0)for(it.iushrn(rr);rr-- >0;)(gt.isOdd()||Et.isOdd())&&(gt.iadd(rt),Et.isub(mt)),gt.iushrn(1),Et.iushrn(1);tt.cmp(it)>=0?(tt.isub(it),dt.isub(gt),lt.isub(Et)):(it.isub(tt),gt.isub(dt),Et.isub(lt))}return{a:gt,b:Et,gcd:it.iushln(pt)}},k.prototype._invmp=function(_e){_(_e.negative===0),_(!_e.isZero());var tt=this,it=_e.clone();tt.negative!==0?tt=tt.umod(_e):tt=tt.clone();for(var dt=new k(1),lt=new k(0),gt=it.clone();tt.cmpn(1)>0&&it.cmpn(1)>0;){for(var Et=0,pt=1;!(tt.words[0]&pt)&&Et<26;++Et,pt<<=1);if(Et>0)for(tt.iushrn(Et);Et-- >0;)dt.isOdd()&&dt.iadd(gt),dt.iushrn(1);for(var rt=0,mt=1;!(it.words[0]&mt)&&rt<26;++rt,mt<<=1);if(rt>0)for(it.iushrn(rt);rt-- >0;)lt.isOdd()&&lt.iadd(gt),lt.iushrn(1);tt.cmp(it)>=0?(tt.isub(it),dt.isub(lt)):(it.isub(tt),lt.isub(dt))}var Lt;return tt.cmpn(1)===0?Lt=dt:Lt=lt,Lt.cmpn(0)<0&&Lt.iadd(_e),Lt},k.prototype.gcd=function(_e){if(this.isZero())return _e.abs();if(_e.isZero())return this.abs();var tt=this.clone(),it=_e.clone();tt.negative=0,it.negative=0;for(var dt=0;tt.isEven()&&it.isEven();dt++)tt.iushrn(1),it.iushrn(1);do{for(;tt.isEven();)tt.iushrn(1);for(;it.isEven();)it.iushrn(1);var lt=tt.cmp(it);if(lt<0){var gt=tt;tt=it,it=gt}else if(lt===0||it.cmpn(1)===0)break;tt.isub(it)}while(!0);return it.iushln(dt)},k.prototype.invm=function(_e){return this.egcd(_e).a.umod(_e)},k.prototype.isEven=function(){return(this.words[0]&1)===0},k.prototype.isOdd=function(){return(this.words[0]&1)===1},k.prototype.andln=function(_e){return this.words[0]&_e},k.prototype.bincn=function(_e){_(typeof _e=="number");var tt=_e%26,it=(_e-tt)/26,dt=1<<tt;if(this.length<=it)return this._expand(it+1),this.words[it]|=dt,this;for(var lt=dt,gt=it;lt!==0&&gt<this.length;gt++){var Et=this.words[gt]|0;Et+=lt,lt=Et>>>26,Et&=67108863,this.words[gt]=Et}return lt!==0&&(this.words[gt]=lt,this.length++),this},k.prototype.isZero=function(){return this.length===1&&this.words[0]===0},k.prototype.cmpn=function(_e){var tt=_e<0;if(this.negative!==0&&!tt)return-1;if(this.negative===0&&tt)return 1;this.strip();var it;if(this.length>1)it=1;else{tt&&(_e=-_e),_(_e<=67108863,"Number is too big");var dt=this.words[0]|0;it=dt===_e?0:dt<_e?-1:1}return this.negative!==0?-it|0:it},k.prototype.cmp=function(_e){if(this.negative!==0&&_e.negative===0)return-1;if(this.negative===0&&_e.negative!==0)return 1;var tt=this.ucmp(_e);return this.negative!==0?-tt|0:tt},k.prototype.ucmp=function(_e){if(this.length>_e.length)return 1;if(this.length<_e.length)return-1;for(var tt=0,it=this.length-1;it>=0;it--){var dt=this.words[it]|0,lt=_e.words[it]|0;if(dt!==lt){dt<lt?tt=-1:dt>lt&&(tt=1);break}}return tt},k.prototype.gtn=function(_e){return this.cmpn(_e)===1},k.prototype.gt=function(_e){return this.cmp(_e)===1},k.prototype.gten=function(_e){return this.cmpn(_e)>=0},k.prototype.gte=function(_e){return this.cmp(_e)>=0},k.prototype.ltn=function(_e){return this.cmpn(_e)===-1},k.prototype.lt=function(_e){return this.cmp(_e)===-1},k.prototype.lten=function(_e){return this.cmpn(_e)<=0},k.prototype.lte=function(_e){return this.cmp(_e)<=0},k.prototype.eqn=function(_e){return this.cmpn(_e)===0},k.prototype.eq=function(_e){return this.cmp(_e)===0},k.red=function(_e){return new Ot(_e)},k.prototype.toRed=function(_e){return _(!this.red,"Already a number in reduction context"),_(this.negative===0,"red works only with positives"),_e.convertTo(this)._forceRed(_e)},k.prototype.fromRed=function(){return _(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},k.prototype._forceRed=function(_e){return this.red=_e,this},k.prototype.forceRed=function(_e){return _(!this.red,"Already a number in reduction context"),this._forceRed(_e)},k.prototype.redAdd=function(_e){return _(this.red,"redAdd works only with red numbers"),this.red.add(this,_e)},k.prototype.redIAdd=function(_e){return _(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,_e)},k.prototype.redSub=function(_e){return _(this.red,"redSub works only with red numbers"),this.red.sub(this,_e)},k.prototype.redISub=function(_e){return _(this.red,"redISub works only with red numbers"),this.red.isub(this,_e)},k.prototype.redShl=function(_e){return _(this.red,"redShl works only with red numbers"),this.red.shl(this,_e)},k.prototype.redMul=function(_e){return _(this.red,"redMul works only with red numbers"),this.red._verify2(this,_e),this.red.mul(this,_e)},k.prototype.redIMul=function(_e){return _(this.red,"redMul works only with red numbers"),this.red._verify2(this,_e),this.red.imul(this,_e)},k.prototype.redSqr=function(){return _(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},k.prototype.redISqr=function(){return _(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},k.prototype.redSqrt=function(){return _(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},k.prototype.redInvm=function(){return _(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},k.prototype.redNeg=function(){return _(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},k.prototype.redPow=function(_e){return _(this.red&&!_e.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,_e)};var xt={k256:null,p224:null,p192:null,p25519:null};function Jt(ut,_e){this.name=ut,this.p=new k(_e,16),this.n=this.p.bitLength(),this.k=new k(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}Jt.prototype._tmp=function(){var _e=new k(null);return _e.words=new Array(Math.ceil(this.n/13)),_e},Jt.prototype.ireduce=function(_e){var tt=_e,it;do this.split(tt,this.tmp),tt=this.imulK(tt),tt=tt.iadd(this.tmp),it=tt.bitLength();while(it>this.n);var dt=it<this.n?-1:tt.ucmp(this.p);return dt===0?(tt.words[0]=0,tt.length=1):dt>0?tt.isub(this.p):tt.strip!==void 0?tt.strip():tt._strip(),tt},Jt.prototype.split=function(_e,tt){_e.iushrn(this.n,0,tt)},Jt.prototype.imulK=function(_e){return _e.imul(this.k)};function ar(){Jt.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}$(ar,Jt),ar.prototype.split=function(_e,tt){for(var it=4194303,dt=Math.min(_e.length,9),lt=0;lt<dt;lt++)tt.words[lt]=_e.words[lt];if(tt.length=dt,_e.length<=9){_e.words[0]=0,_e.length=1;return}var gt=_e.words[9];for(tt.words[tt.length++]=gt&it,lt=10;lt<_e.length;lt++){var Et=_e.words[lt]|0;_e.words[lt-10]=(Et&it)<<4|gt>>>22,gt=Et}gt>>>=22,_e.words[lt-10]=gt,gt===0&&_e.length>10?_e.length-=10:_e.length-=9},ar.prototype.imulK=function(_e){_e.words[_e.length]=0,_e.words[_e.length+1]=0,_e.length+=2;for(var tt=0,it=0;it<_e.length;it++){var dt=_e.words[it]|0;tt+=dt*977,_e.words[it]=tt&67108863,tt=dt*64+(tt/67108864|0)}return _e.words[_e.length-1]===0&&(_e.length--,_e.words[_e.length-1]===0&&_e.length--),_e};function nr(){Jt.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}$(nr,Jt);function pr(){Jt.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}$(pr,Jt);function ur(){Jt.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}$(ur,Jt),ur.prototype.imulK=function(_e){for(var tt=0,it=0;it<_e.length;it++){var dt=(_e.words[it]|0)*19+tt,lt=dt&67108863;dt>>>=26,_e.words[it]=lt,tt=dt}return tt!==0&&(_e.words[_e.length++]=tt),_e},k._prime=function(_e){if(xt[_e])return xt[_e];var tt;if(_e==="k256")tt=new ar;else if(_e==="p224")tt=new nr;else if(_e==="p192")tt=new pr;else if(_e==="p25519")tt=new ur;else throw new Error("Unknown prime "+_e);return xt[_e]=tt,tt};function Ot(ut){if(typeof ut=="string"){var _e=k._prime(ut);this.m=_e.p,this.prime=_e}else _(ut.gtn(1),"modulus must be greater than 1"),this.m=ut,this.prime=null}Ot.prototype._verify1=function(_e){_(_e.negative===0,"red works only with positives"),_(_e.red,"red works only with red numbers")},Ot.prototype._verify2=function(_e,tt){_((_e.negative|tt.negative)===0,"red works only with positives"),_(_e.red&&_e.red===tt.red,"red works only with red numbers")},Ot.prototype.imod=function(_e){return this.prime?this.prime.ireduce(_e)._forceRed(this):_e.umod(this.m)._forceRed(this)},Ot.prototype.neg=function(_e){return _e.isZero()?_e.clone():this.m.sub(_e)._forceRed(this)},Ot.prototype.add=function(_e,tt){this._verify2(_e,tt);var it=_e.add(tt);return it.cmp(this.m)>=0&&it.isub(this.m),it._forceRed(this)},Ot.prototype.iadd=function(_e,tt){this._verify2(_e,tt);var it=_e.iadd(tt);return it.cmp(this.m)>=0&&it.isub(this.m),it},Ot.prototype.sub=function(_e,tt){this._verify2(_e,tt);var it=_e.sub(tt);return it.cmpn(0)<0&&it.iadd(this.m),it._forceRed(this)},Ot.prototype.isub=function(_e,tt){this._verify2(_e,tt);var it=_e.isub(tt);return it.cmpn(0)<0&&it.iadd(this.m),it},Ot.prototype.shl=function(_e,tt){return this._verify1(_e),this.imod(_e.ushln(tt))},Ot.prototype.imul=function(_e,tt){return this._verify2(_e,tt),this.imod(_e.imul(tt))},Ot.prototype.mul=function(_e,tt){return this._verify2(_e,tt),this.imod(_e.mul(tt))},Ot.prototype.isqr=function(_e){return this.imul(_e,_e.clone())},Ot.prototype.sqr=function(_e){return this.mul(_e,_e)},Ot.prototype.sqrt=function(_e){if(_e.isZero())return _e.clone();var tt=this.m.andln(3);if(_(tt%2===1),tt===3){var it=this.m.add(new k(1)).iushrn(2);return this.pow(_e,it)}for(var dt=this.m.subn(1),lt=0;!dt.isZero()&&dt.andln(1)===0;)lt++,dt.iushrn(1);_(!dt.isZero());var gt=new k(1).toRed(this),Et=gt.redNeg(),pt=this.m.subn(1).iushrn(1),rt=this.m.bitLength();for(rt=new k(2*rt*rt).toRed(this);this.pow(rt,pt).cmp(Et)!==0;)rt.redIAdd(Et);for(var mt=this.pow(rt,dt),Lt=this.pow(_e,dt.addn(1).iushrn(1)),Gt=this.pow(_e,dt),rr=lt;Gt.cmp(gt)!==0;){for(var ir=Gt,Wt=0;ir.cmp(gt)!==0;Wt++)ir=ir.redSqr();_(Wt<rr);var zt=this.pow(mt,new k(1).iushln(rr-Wt-1));Lt=Lt.redMul(zt),mt=zt.redSqr(),Gt=Gt.redMul(mt),rr=Wt}return Lt},Ot.prototype.invm=function(_e){var tt=_e._invmp(this.m);return tt.negative!==0?(tt.negative=0,this.imod(tt).redNeg()):this.imod(tt)},Ot.prototype.pow=function(_e,tt){if(tt.isZero())return new k(1).toRed(this);if(tt.cmpn(1)===0)return _e.clone();var it=4,dt=new Array(1<<it);dt[0]=new k(1).toRed(this),dt[1]=_e;for(var lt=2;lt<dt.length;lt++)dt[lt]=this.mul(dt[lt-1],_e);var gt=dt[0],Et=0,pt=0,rt=tt.bitLength()%26;for(rt===0&&(rt=26),lt=tt.length-1;lt>=0;lt--){for(var mt=tt.words[lt],Lt=rt-1;Lt>=0;Lt--){var Gt=mt>>Lt&1;if(gt!==dt[0]&&(gt=this.sqr(gt)),Gt===0&&Et===0){pt=0;continue}Et<<=1,Et|=Gt,pt++,!(pt!==it&&(lt!==0||Lt!==0))&&(gt=this.mul(gt,dt[Et]),pt=0,Et=0)}rt=26}return gt},Ot.prototype.convertTo=function(_e){var tt=_e.umod(this.m);return tt===_e?tt.clone():tt},Ot.prototype.convertFrom=function(_e){var tt=_e.clone();return tt.red=null,tt},k.mont=function(_e){return new It(_e)};function It(ut){Ot.call(this,ut),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new k(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}$(It,Ot),It.prototype.convertTo=function(_e){return this.imod(_e.ushln(this.shift))},It.prototype.convertFrom=function(_e){var tt=this.imod(_e.mul(this.rinv));return tt.red=null,tt},It.prototype.imul=function(_e,tt){if(_e.isZero()||tt.isZero())return _e.words[0]=0,_e.length=1,_e;var it=_e.imul(tt),dt=it.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),lt=it.isub(dt).iushrn(this.shift),gt=lt;return lt.cmp(this.m)>=0?gt=lt.isub(this.m):lt.cmpn(0)<0&&(gt=lt.iadd(this.m)),gt._forceRed(this)},It.prototype.mul=function(_e,tt){if(_e.isZero()||tt.isZero())return new k(0)._forceRed(this);var it=_e.mul(tt),dt=it.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),lt=it.isub(dt).iushrn(this.shift),gt=lt;return lt.cmp(this.m)>=0?gt=lt.isub(this.m):lt.cmpn(0)<0&&(gt=lt.iadd(this.m)),gt._forceRed(this)},It.prototype.invm=function(_e){var tt=this.imod(_e._invmp(this.m).mul(this.r2));return tt._forceRed(this)}})(a,commonjsGlobal$1)})(bn$6);var bnExports$6=bn$6.exports,bn$5={exports:{}};bn$5.exports;(function(a){(function(c,b){function _(ut,_e){if(!ut)throw new Error(_e||"Assertion failed")}function $(ut,_e){ut.super_=_e;var tt=function(){};tt.prototype=_e.prototype,ut.prototype=new tt,ut.prototype.constructor=ut}function k(ut,_e,tt){if(k.isBN(ut))return ut;this.negative=0,this.words=null,this.length=0,this.red=null,ut!==null&&((_e==="le"||_e==="be")&&(tt=_e,_e=10),this._init(ut||0,_e||10,tt||"be"))}typeof c=="object"?c.exports=k:b.BN=k,k.BN=k,k.wordSize=26;var et;try{typeof window<"u"&&typeof window.Buffer<"u"?et=window.Buffer:et=require$$0$2.Buffer}catch{}k.isBN=function(_e){return _e instanceof k?!0:_e!==null&&typeof _e=="object"&&_e.constructor.wordSize===k.wordSize&&Array.isArray(_e.words)},k.max=function(_e,tt){return _e.cmp(tt)>0?_e:tt},k.min=function(_e,tt){return _e.cmp(tt)<0?_e:tt},k.prototype._init=function(_e,tt,it){if(typeof _e=="number")return this._initNumber(_e,tt,it);if(typeof _e=="object")return this._initArray(_e,tt,it);tt==="hex"&&(tt=16),_(tt===(tt|0)&&tt>=2&&tt<=36),_e=_e.toString().replace(/\s+/g,"");var dt=0;_e[0]==="-"&&(dt++,this.negative=1),dt<_e.length&&(tt===16?this._parseHex(_e,dt,it):(this._parseBase(_e,tt,dt),it==="le"&&this._initArray(this.toArray(),tt,it)))},k.prototype._initNumber=function(_e,tt,it){_e<0&&(this.negative=1,_e=-_e),_e<67108864?(this.words=[_e&67108863],this.length=1):_e<4503599627370496?(this.words=[_e&67108863,_e/67108864&67108863],this.length=2):(_(_e<9007199254740992),this.words=[_e&67108863,_e/67108864&67108863,1],this.length=3),it==="le"&&this._initArray(this.toArray(),tt,it)},k.prototype._initArray=function(_e,tt,it){if(_(typeof _e.length=="number"),_e.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(_e.length/3),this.words=new Array(this.length);for(var dt=0;dt<this.length;dt++)this.words[dt]=0;var lt,gt,Et=0;if(it==="be")for(dt=_e.length-1,lt=0;dt>=0;dt-=3)gt=_e[dt]|_e[dt-1]<<8|_e[dt-2]<<16,this.words[lt]|=gt<<Et&67108863,this.words[lt+1]=gt>>>26-Et&67108863,Et+=24,Et>=26&&(Et-=26,lt++);else if(it==="le")for(dt=0,lt=0;dt<_e.length;dt+=3)gt=_e[dt]|_e[dt+1]<<8|_e[dt+2]<<16,this.words[lt]|=gt<<Et&67108863,this.words[lt+1]=gt>>>26-Et&67108863,Et+=24,Et>=26&&(Et-=26,lt++);return this.strip()};function nt(ut,_e){var tt=ut.charCodeAt(_e);return tt>=65&&tt<=70?tt-55:tt>=97&&tt<=102?tt-87:tt-48&15}function ot(ut,_e,tt){var it=nt(ut,tt);return tt-1>=_e&&(it|=nt(ut,tt-1)<<4),it}k.prototype._parseHex=function(_e,tt,it){this.length=Math.ceil((_e.length-tt)/6),this.words=new Array(this.length);for(var dt=0;dt<this.length;dt++)this.words[dt]=0;var lt=0,gt=0,Et;if(it==="be")for(dt=_e.length-1;dt>=tt;dt-=2)Et=ot(_e,tt,dt)<<lt,this.words[gt]|=Et&67108863,lt>=18?(lt-=18,gt+=1,this.words[gt]|=Et>>>26):lt+=8;else{var pt=_e.length-tt;for(dt=pt%2===0?tt+1:tt;dt<_e.length;dt+=2)Et=ot(_e,tt,dt)<<lt,this.words[gt]|=Et&67108863,lt>=18?(lt-=18,gt+=1,this.words[gt]|=Et>>>26):lt+=8}this.strip()};function ht(ut,_e,tt,it){for(var dt=0,lt=Math.min(ut.length,tt),gt=_e;gt<lt;gt++){var Et=ut.charCodeAt(gt)-48;dt*=it,Et>=49?dt+=Et-49+10:Et>=17?dt+=Et-17+10:dt+=Et}return dt}k.prototype._parseBase=function(_e,tt,it){this.words=[0],this.length=1;for(var dt=0,lt=1;lt<=67108863;lt*=tt)dt++;dt--,lt=lt/tt|0;for(var gt=_e.length-it,Et=gt%dt,pt=Math.min(gt,gt-Et)+it,rt=0,mt=it;mt<pt;mt+=dt)rt=ht(_e,mt,mt+dt,tt),this.imuln(lt),this.words[0]+rt<67108864?this.words[0]+=rt:this._iaddn(rt);if(Et!==0){var Lt=1;for(rt=ht(_e,mt,_e.length,tt),mt=0;mt<Et;mt++)Lt*=tt;this.imuln(Lt),this.words[0]+rt<67108864?this.words[0]+=rt:this._iaddn(rt)}this.strip()},k.prototype.copy=function(_e){_e.words=new Array(this.length);for(var tt=0;tt<this.length;tt++)_e.words[tt]=this.words[tt];_e.length=this.length,_e.negative=this.negative,_e.red=this.red},k.prototype.clone=function(){var _e=new k(null);return this.copy(_e),_e},k.prototype._expand=function(_e){for(;this.length<_e;)this.words[this.length++]=0;return this},k.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},k.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},k.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var vt=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],_t=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],kt=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];k.prototype.toString=function(_e,tt){_e=_e||10,tt=tt|0||1;var it;if(_e===16||_e==="hex"){it="";for(var dt=0,lt=0,gt=0;gt<this.length;gt++){var Et=this.words[gt],pt=((Et<<dt|lt)&16777215).toString(16);lt=Et>>>24-dt&16777215,lt!==0||gt!==this.length-1?it=vt[6-pt.length]+pt+it:it=pt+it,dt+=2,dt>=26&&(dt-=26,gt--)}for(lt!==0&&(it=lt.toString(16)+it);it.length%tt!==0;)it="0"+it;return this.negative!==0&&(it="-"+it),it}if(_e===(_e|0)&&_e>=2&&_e<=36){var rt=_t[_e],mt=kt[_e];it="";var Lt=this.clone();for(Lt.negative=0;!Lt.isZero();){var Gt=Lt.modn(mt).toString(_e);Lt=Lt.idivn(mt),Lt.isZero()?it=Gt+it:it=vt[rt-Gt.length]+Gt+it}for(this.isZero()&&(it="0"+it);it.length%tt!==0;)it="0"+it;return this.negative!==0&&(it="-"+it),it}_(!1,"Base should be between 2 and 36")},k.prototype.toNumber=function(){var _e=this.words[0];return this.length===2?_e+=this.words[1]*67108864:this.length===3&&this.words[2]===1?_e+=4503599627370496+this.words[1]*67108864:this.length>2&&_(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-_e:_e},k.prototype.toJSON=function(){return this.toString(16)},k.prototype.toBuffer=function(_e,tt){return _(typeof et<"u"),this.toArrayLike(et,_e,tt)},k.prototype.toArray=function(_e,tt){return this.toArrayLike(Array,_e,tt)},k.prototype.toArrayLike=function(_e,tt,it){var dt=this.byteLength(),lt=it||Math.max(1,dt);_(dt<=lt,"byte array longer than desired length"),_(lt>0,"Requested array length <= 0"),this.strip();var gt=tt==="le",Et=new _e(lt),pt,rt,mt=this.clone();if(gt){for(rt=0;!mt.isZero();rt++)pt=mt.andln(255),mt.iushrn(8),Et[rt]=pt;for(;rt<lt;rt++)Et[rt]=0}else{for(rt=0;rt<lt-dt;rt++)Et[rt]=0;for(rt=0;!mt.isZero();rt++)pt=mt.andln(255),mt.iushrn(8),Et[lt-rt-1]=pt}return Et},Math.clz32?k.prototype._countBits=function(_e){return 32-Math.clz32(_e)}:k.prototype._countBits=function(_e){var tt=_e,it=0;return tt>=4096&&(it+=13,tt>>>=13),tt>=64&&(it+=7,tt>>>=7),tt>=8&&(it+=4,tt>>>=4),tt>=2&&(it+=2,tt>>>=2),it+tt},k.prototype._zeroBits=function(_e){if(_e===0)return 26;var tt=_e,it=0;return tt&8191||(it+=13,tt>>>=13),tt&127||(it+=7,tt>>>=7),tt&15||(it+=4,tt>>>=4),tt&3||(it+=2,tt>>>=2),tt&1||it++,it},k.prototype.bitLength=function(){var _e=this.words[this.length-1],tt=this._countBits(_e);return(this.length-1)*26+tt};function $t(ut){for(var _e=new Array(ut.bitLength()),tt=0;tt<_e.length;tt++){var it=tt/26|0,dt=tt%26;_e[tt]=(ut.words[it]&1<<dt)>>>dt}return _e}k.prototype.zeroBits=function(){if(this.isZero())return 0;for(var _e=0,tt=0;tt<this.length;tt++){var it=this._zeroBits(this.words[tt]);if(_e+=it,it!==26)break}return _e},k.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},k.prototype.toTwos=function(_e){return this.negative!==0?this.abs().inotn(_e).iaddn(1):this.clone()},k.prototype.fromTwos=function(_e){return this.testn(_e-1)?this.notn(_e).iaddn(1).ineg():this.clone()},k.prototype.isNeg=function(){return this.negative!==0},k.prototype.neg=function(){return this.clone().ineg()},k.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},k.prototype.iuor=function(_e){for(;this.length<_e.length;)this.words[this.length++]=0;for(var tt=0;tt<_e.length;tt++)this.words[tt]=this.words[tt]|_e.words[tt];return this.strip()},k.prototype.ior=function(_e){return _((this.negative|_e.negative)===0),this.iuor(_e)},k.prototype.or=function(_e){return this.length>_e.length?this.clone().ior(_e):_e.clone().ior(this)},k.prototype.uor=function(_e){return this.length>_e.length?this.clone().iuor(_e):_e.clone().iuor(this)},k.prototype.iuand=function(_e){var tt;this.length>_e.length?tt=_e:tt=this;for(var it=0;it<tt.length;it++)this.words[it]=this.words[it]&_e.words[it];return this.length=tt.length,this.strip()},k.prototype.iand=function(_e){return _((this.negative|_e.negative)===0),this.iuand(_e)},k.prototype.and=function(_e){return this.length>_e.length?this.clone().iand(_e):_e.clone().iand(this)},k.prototype.uand=function(_e){return this.length>_e.length?this.clone().iuand(_e):_e.clone().iuand(this)},k.prototype.iuxor=function(_e){var tt,it;this.length>_e.length?(tt=this,it=_e):(tt=_e,it=this);for(var dt=0;dt<it.length;dt++)this.words[dt]=tt.words[dt]^it.words[dt];if(this!==tt)for(;dt<tt.length;dt++)this.words[dt]=tt.words[dt];return this.length=tt.length,this.strip()},k.prototype.ixor=function(_e){return _((this.negative|_e.negative)===0),this.iuxor(_e)},k.prototype.xor=function(_e){return this.length>_e.length?this.clone().ixor(_e):_e.clone().ixor(this)},k.prototype.uxor=function(_e){return this.length>_e.length?this.clone().iuxor(_e):_e.clone().iuxor(this)},k.prototype.inotn=function(_e){_(typeof _e=="number"&&_e>=0);var tt=Math.ceil(_e/26)|0,it=_e%26;this._expand(tt),it>0&&tt--;for(var dt=0;dt<tt;dt++)this.words[dt]=~this.words[dt]&67108863;return it>0&&(this.words[dt]=~this.words[dt]&67108863>>26-it),this.strip()},k.prototype.notn=function(_e){return this.clone().inotn(_e)},k.prototype.setn=function(_e,tt){_(typeof _e=="number"&&_e>=0);var it=_e/26|0,dt=_e%26;return this._expand(it+1),tt?this.words[it]=this.words[it]|1<<dt:this.words[it]=this.words[it]&~(1<<dt),this.strip()},k.prototype.iadd=function(_e){var tt;if(this.negative!==0&&_e.negative===0)return this.negative=0,tt=this.isub(_e),this.negative^=1,this._normSign();if(this.negative===0&&_e.negative!==0)return _e.negative=0,tt=this.isub(_e),_e.negative=1,tt._normSign();var it,dt;this.length>_e.length?(it=this,dt=_e):(it=_e,dt=this);for(var lt=0,gt=0;gt<dt.length;gt++)tt=(it.words[gt]|0)+(dt.words[gt]|0)+lt,this.words[gt]=tt&67108863,lt=tt>>>26;for(;lt!==0&&gt<it.length;gt++)tt=(it.words[gt]|0)+lt,this.words[gt]=tt&67108863,lt=tt>>>26;if(this.length=it.length,lt!==0)this.words[this.length]=lt,this.length++;else if(it!==this)for(;gt<it.length;gt++)this.words[gt]=it.words[gt];return this},k.prototype.add=function(_e){var tt;return _e.negative!==0&&this.negative===0?(_e.negative=0,tt=this.sub(_e),_e.negative^=1,tt):_e.negative===0&&this.negative!==0?(this.negative=0,tt=_e.sub(this),this.negative=1,tt):this.length>_e.length?this.clone().iadd(_e):_e.clone().iadd(this)},k.prototype.isub=function(_e){if(_e.negative!==0){_e.negative=0;var tt=this.iadd(_e);return _e.negative=1,tt._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(_e),this.negative=1,this._normSign();var it=this.cmp(_e);if(it===0)return this.negative=0,this.length=1,this.words[0]=0,this;var dt,lt;it>0?(dt=this,lt=_e):(dt=_e,lt=this);for(var gt=0,Et=0;Et<lt.length;Et++)tt=(dt.words[Et]|0)-(lt.words[Et]|0)+gt,gt=tt>>26,this.words[Et]=tt&67108863;for(;gt!==0&&Et<dt.length;Et++)tt=(dt.words[Et]|0)+gt,gt=tt>>26,this.words[Et]=tt&67108863;if(gt===0&&Et<dt.length&&dt!==this)for(;Et<dt.length;Et++)this.words[Et]=dt.words[Et];return this.length=Math.max(this.length,Et),dt!==this&&(this.negative=1),this.strip()},k.prototype.sub=function(_e){return this.clone().isub(_e)};function Tt(ut,_e,tt){tt.negative=_e.negative^ut.negative;var it=ut.length+_e.length|0;tt.length=it,it=it-1|0;var dt=ut.words[0]|0,lt=_e.words[0]|0,gt=dt*lt,Et=gt&67108863,pt=gt/67108864|0;tt.words[0]=Et;for(var rt=1;rt<it;rt++){for(var mt=pt>>>26,Lt=pt&67108863,Gt=Math.min(rt,_e.length-1),rr=Math.max(0,rt-ut.length+1);rr<=Gt;rr++){var ir=rt-rr|0;dt=ut.words[ir]|0,lt=_e.words[rr]|0,gt=dt*lt+Lt,mt+=gt/67108864|0,Lt=gt&67108863}tt.words[rt]=Lt|0,pt=mt|0}return pt!==0?tt.words[rt]=pt|0:tt.length--,tt.strip()}var At=function(_e,tt,it){var dt=_e.words,lt=tt.words,gt=it.words,Et=0,pt,rt,mt,Lt=dt[0]|0,Gt=Lt&8191,rr=Lt>>>13,ir=dt[1]|0,Wt=ir&8191,zt=ir>>>13,wt=dt[2]|0,Vt=wt&8191,Qt=wt>>>13,Nt=dt[3]|0,st=Nt&8191,Ct=Nt>>>13,qt=dt[4]|0,cr=qt&8191,dr=qt>>>13,Er=dt[5]|0,Tr=Er&8191,gr=Er>>>13,Zr=dt[6]|0,Pr=Zr&8191,_r=Zr>>>13,St=dt[7]|0,Kt=St&8191,er=St>>>13,kr=dt[8]|0,tr=kr&8191,bt=kr>>>13,jt=dt[9]|0,Ut=jt&8191,Ft=jt>>>13,Ht=lt[0]|0,or=Ht&8191,vr=Ht>>>13,Ir=lt[1]|0,Sr=Ir&8191,Or=Ir>>>13,Cr=lt[2]|0,yt=Cr&8191,Bt=Cr>>>13,Zt=lt[3]|0,yr=Zt&8191,fr=Zt>>>13,Rr=lt[4]|0,Nr=Rr&8191,xr=Rr>>>13,Xr=lt[5]|0,Ar=Xr&8191,Br=Xr>>>13,rn=lt[6]|0,Dr=rn&8191,qr=rn>>>13,nn=lt[7]|0,$r=nn&8191,Lr=nn>>>13,Qr=lt[8]|0,Ur=Qr&8191,Jr=Qr>>>13,cn=lt[9]|0,Fr=cn&8191,Vr=cn>>>13;it.negative=_e.negative^tt.negative,it.length=19,pt=Math.imul(Gt,or),rt=Math.imul(Gt,vr),rt=rt+Math.imul(rr,or)|0,mt=Math.imul(rr,vr);var sn=(Et+pt|0)+((rt&8191)<<13)|0;Et=(mt+(rt>>>13)|0)+(sn>>>26)|0,sn&=67108863,pt=Math.imul(Wt,or),rt=Math.imul(Wt,vr),rt=rt+Math.imul(zt,or)|0,mt=Math.imul(zt,vr),pt=pt+Math.imul(Gt,Sr)|0,rt=rt+Math.imul(Gt,Or)|0,rt=rt+Math.imul(rr,Sr)|0,mt=mt+Math.imul(rr,Or)|0;var un=(Et+pt|0)+((rt&8191)<<13)|0;Et=(mt+(rt>>>13)|0)+(un>>>26)|0,un&=67108863,pt=Math.imul(Vt,or),rt=Math.imul(Vt,vr),rt=rt+Math.imul(Qt,or)|0,mt=Math.imul(Qt,vr),pt=pt+Math.imul(Wt,Sr)|0,rt=rt+Math.imul(Wt,Or)|0,rt=rt+Math.imul(zt,Sr)|0,mt=mt+Math.imul(zt,Or)|0,pt=pt+Math.imul(Gt,yt)|0,rt=rt+Math.imul(Gt,Bt)|0,rt=rt+Math.imul(rr,yt)|0,mt=mt+Math.imul(rr,Bt)|0;var yn=(Et+pt|0)+((rt&8191)<<13)|0;Et=(mt+(rt>>>13)|0)+(yn>>>26)|0,yn&=67108863,pt=Math.imul(st,or),rt=Math.imul(st,vr),rt=rt+Math.imul(Ct,or)|0,mt=Math.imul(Ct,vr),pt=pt+Math.imul(Vt,Sr)|0,rt=rt+Math.imul(Vt,Or)|0,rt=rt+Math.imul(Qt,Sr)|0,mt=mt+Math.imul(Qt,Or)|0,pt=pt+Math.imul(Wt,yt)|0,rt=rt+Math.imul(Wt,Bt)|0,rt=rt+Math.imul(zt,yt)|0,mt=mt+Math.imul(zt,Bt)|0,pt=pt+Math.imul(Gt,yr)|0,rt=rt+Math.imul(Gt,fr)|0,rt=rt+Math.imul(rr,yr)|0,mt=mt+Math.imul(rr,fr)|0;var br=(Et+pt|0)+((rt&8191)<<13)|0;Et=(mt+(rt>>>13)|0)+(br>>>26)|0,br&=67108863,pt=Math.imul(cr,or),rt=Math.imul(cr,vr),rt=rt+Math.imul(dr,or)|0,mt=Math.imul(dr,vr),pt=pt+Math.imul(st,Sr)|0,rt=rt+Math.imul(st,Or)|0,rt=rt+Math.imul(Ct,Sr)|0,mt=mt+Math.imul(Ct,Or)|0,pt=pt+Math.imul(Vt,yt)|0,rt=rt+Math.imul(Vt,Bt)|0,rt=rt+Math.imul(Qt,yt)|0,mt=mt+Math.imul(Qt,Bt)|0,pt=pt+Math.imul(Wt,yr)|0,rt=rt+Math.imul(Wt,fr)|0,rt=rt+Math.imul(zt,yr)|0,mt=mt+Math.imul(zt,fr)|0,pt=pt+Math.imul(Gt,Nr)|0,rt=rt+Math.imul(Gt,xr)|0,rt=rt+Math.imul(rr,Nr)|0,mt=mt+Math.imul(rr,xr)|0;var wr=(Et+pt|0)+((rt&8191)<<13)|0;Et=(mt+(rt>>>13)|0)+(wr>>>26)|0,wr&=67108863,pt=Math.imul(Tr,or),rt=Math.imul(Tr,vr),rt=rt+Math.imul(gr,or)|0,mt=Math.imul(gr,vr),pt=pt+Math.imul(cr,Sr)|0,rt=rt+Math.imul(cr,Or)|0,rt=rt+Math.imul(dr,Sr)|0,mt=mt+Math.imul(dr,Or)|0,pt=pt+Math.imul(st,yt)|0,rt=rt+Math.imul(st,Bt)|0,rt=rt+Math.imul(Ct,yt)|0,mt=mt+Math.imul(Ct,Bt)|0,pt=pt+Math.imul(Vt,yr)|0,rt=rt+Math.imul(Vt,fr)|0,rt=rt+Math.imul(Qt,yr)|0,mt=mt+Math.imul(Qt,fr)|0,pt=pt+Math.imul(Wt,Nr)|0,rt=rt+Math.imul(Wt,xr)|0,rt=rt+Math.imul(zt,Nr)|0,mt=mt+Math.imul(zt,xr)|0,pt=pt+Math.imul(Gt,Ar)|0,rt=rt+Math.imul(Gt,Br)|0,rt=rt+Math.imul(rr,Ar)|0,mt=mt+Math.imul(rr,Br)|0;var Mr=(Et+pt|0)+((rt&8191)<<13)|0;Et=(mt+(rt>>>13)|0)+(Mr>>>26)|0,Mr&=67108863,pt=Math.imul(Pr,or),rt=Math.imul(Pr,vr),rt=rt+Math.imul(_r,or)|0,mt=Math.imul(_r,vr),pt=pt+Math.imul(Tr,Sr)|0,rt=rt+Math.imul(Tr,Or)|0,rt=rt+Math.imul(gr,Sr)|0,mt=mt+Math.imul(gr,Or)|0,pt=pt+Math.imul(cr,yt)|0,rt=rt+Math.imul(cr,Bt)|0,rt=rt+Math.imul(dr,yt)|0,mt=mt+Math.imul(dr,Bt)|0,pt=pt+Math.imul(st,yr)|0,rt=rt+Math.imul(st,fr)|0,rt=rt+Math.imul(Ct,yr)|0,mt=mt+Math.imul(Ct,fr)|0,pt=pt+Math.imul(Vt,Nr)|0,rt=rt+Math.imul(Vt,xr)|0,rt=rt+Math.imul(Qt,Nr)|0,mt=mt+Math.imul(Qt,xr)|0,pt=pt+Math.imul(Wt,Ar)|0,rt=rt+Math.imul(Wt,Br)|0,rt=rt+Math.imul(zt,Ar)|0,mt=mt+Math.imul(zt,Br)|0,pt=pt+Math.imul(Gt,Dr)|0,rt=rt+Math.imul(Gt,qr)|0,rt=rt+Math.imul(rr,Dr)|0,mt=mt+Math.imul(rr,qr)|0;var Wr=(Et+pt|0)+((rt&8191)<<13)|0;Et=(mt+(rt>>>13)|0)+(Wr>>>26)|0,Wr&=67108863,pt=Math.imul(Kt,or),rt=Math.imul(Kt,vr),rt=rt+Math.imul(er,or)|0,mt=Math.imul(er,vr),pt=pt+Math.imul(Pr,Sr)|0,rt=rt+Math.imul(Pr,Or)|0,rt=rt+Math.imul(_r,Sr)|0,mt=mt+Math.imul(_r,Or)|0,pt=pt+Math.imul(Tr,yt)|0,rt=rt+Math.imul(Tr,Bt)|0,rt=rt+Math.imul(gr,yt)|0,mt=mt+Math.imul(gr,Bt)|0,pt=pt+Math.imul(cr,yr)|0,rt=rt+Math.imul(cr,fr)|0,rt=rt+Math.imul(dr,yr)|0,mt=mt+Math.imul(dr,fr)|0,pt=pt+Math.imul(st,Nr)|0,rt=rt+Math.imul(st,xr)|0,rt=rt+Math.imul(Ct,Nr)|0,mt=mt+Math.imul(Ct,xr)|0,pt=pt+Math.imul(Vt,Ar)|0,rt=rt+Math.imul(Vt,Br)|0,rt=rt+Math.imul(Qt,Ar)|0,mt=mt+Math.imul(Qt,Br)|0,pt=pt+Math.imul(Wt,Dr)|0,rt=rt+Math.imul(Wt,qr)|0,rt=rt+Math.imul(zt,Dr)|0,mt=mt+Math.imul(zt,qr)|0,pt=pt+Math.imul(Gt,$r)|0,rt=rt+Math.imul(Gt,Lr)|0,rt=rt+Math.imul(rr,$r)|0,mt=mt+Math.imul(rr,Lr)|0;var Hr=(Et+pt|0)+((rt&8191)<<13)|0;Et=(mt+(rt>>>13)|0)+(Hr>>>26)|0,Hr&=67108863,pt=Math.imul(tr,or),rt=Math.imul(tr,vr),rt=rt+Math.imul(bt,or)|0,mt=Math.imul(bt,vr),pt=pt+Math.imul(Kt,Sr)|0,rt=rt+Math.imul(Kt,Or)|0,rt=rt+Math.imul(er,Sr)|0,mt=mt+Math.imul(er,Or)|0,pt=pt+Math.imul(Pr,yt)|0,rt=rt+Math.imul(Pr,Bt)|0,rt=rt+Math.imul(_r,yt)|0,mt=mt+Math.imul(_r,Bt)|0,pt=pt+Math.imul(Tr,yr)|0,rt=rt+Math.imul(Tr,fr)|0,rt=rt+Math.imul(gr,yr)|0,mt=mt+Math.imul(gr,fr)|0,pt=pt+Math.imul(cr,Nr)|0,rt=rt+Math.imul(cr,xr)|0,rt=rt+Math.imul(dr,Nr)|0,mt=mt+Math.imul(dr,xr)|0,pt=pt+Math.imul(st,Ar)|0,rt=rt+Math.imul(st,Br)|0,rt=rt+Math.imul(Ct,Ar)|0,mt=mt+Math.imul(Ct,Br)|0,pt=pt+Math.imul(Vt,Dr)|0,rt=rt+Math.imul(Vt,qr)|0,rt=rt+Math.imul(Qt,Dr)|0,mt=mt+Math.imul(Qt,qr)|0,pt=pt+Math.imul(Wt,$r)|0,rt=rt+Math.imul(Wt,Lr)|0,rt=rt+Math.imul(zt,$r)|0,mt=mt+Math.imul(zt,Lr)|0,pt=pt+Math.imul(Gt,Ur)|0,rt=rt+Math.imul(Gt,Jr)|0,rt=rt+Math.imul(rr,Ur)|0,mt=mt+Math.imul(rr,Jr)|0;var Gr=(Et+pt|0)+((rt&8191)<<13)|0;Et=(mt+(rt>>>13)|0)+(Gr>>>26)|0,Gr&=67108863,pt=Math.imul(Ut,or),rt=Math.imul(Ut,vr),rt=rt+Math.imul(Ft,or)|0,mt=Math.imul(Ft,vr),pt=pt+Math.imul(tr,Sr)|0,rt=rt+Math.imul(tr,Or)|0,rt=rt+Math.imul(bt,Sr)|0,mt=mt+Math.imul(bt,Or)|0,pt=pt+Math.imul(Kt,yt)|0,rt=rt+Math.imul(Kt,Bt)|0,rt=rt+Math.imul(er,yt)|0,mt=mt+Math.imul(er,Bt)|0,pt=pt+Math.imul(Pr,yr)|0,rt=rt+Math.imul(Pr,fr)|0,rt=rt+Math.imul(_r,yr)|0,mt=mt+Math.imul(_r,fr)|0,pt=pt+Math.imul(Tr,Nr)|0,rt=rt+Math.imul(Tr,xr)|0,rt=rt+Math.imul(gr,Nr)|0,mt=mt+Math.imul(gr,xr)|0,pt=pt+Math.imul(cr,Ar)|0,rt=rt+Math.imul(cr,Br)|0,rt=rt+Math.imul(dr,Ar)|0,mt=mt+Math.imul(dr,Br)|0,pt=pt+Math.imul(st,Dr)|0,rt=rt+Math.imul(st,qr)|0,rt=rt+Math.imul(Ct,Dr)|0,mt=mt+Math.imul(Ct,qr)|0,pt=pt+Math.imul(Vt,$r)|0,rt=rt+Math.imul(Vt,Lr)|0,rt=rt+Math.imul(Qt,$r)|0,mt=mt+Math.imul(Qt,Lr)|0,pt=pt+Math.imul(Wt,Ur)|0,rt=rt+Math.imul(Wt,Jr)|0,rt=rt+Math.imul(zt,Ur)|0,mt=mt+Math.imul(zt,Jr)|0,pt=pt+Math.imul(Gt,Fr)|0,rt=rt+Math.imul(Gt,Vr)|0,rt=rt+Math.imul(rr,Fr)|0,mt=mt+Math.imul(rr,Vr)|0;var Yr=(Et+pt|0)+((rt&8191)<<13)|0;Et=(mt+(rt>>>13)|0)+(Yr>>>26)|0,Yr&=67108863,pt=Math.imul(Ut,Sr),rt=Math.imul(Ut,Or),rt=rt+Math.imul(Ft,Sr)|0,mt=Math.imul(Ft,Or),pt=pt+Math.imul(tr,yt)|0,rt=rt+Math.imul(tr,Bt)|0,rt=rt+Math.imul(bt,yt)|0,mt=mt+Math.imul(bt,Bt)|0,pt=pt+Math.imul(Kt,yr)|0,rt=rt+Math.imul(Kt,fr)|0,rt=rt+Math.imul(er,yr)|0,mt=mt+Math.imul(er,fr)|0,pt=pt+Math.imul(Pr,Nr)|0,rt=rt+Math.imul(Pr,xr)|0,rt=rt+Math.imul(_r,Nr)|0,mt=mt+Math.imul(_r,xr)|0,pt=pt+Math.imul(Tr,Ar)|0,rt=rt+Math.imul(Tr,Br)|0,rt=rt+Math.imul(gr,Ar)|0,mt=mt+Math.imul(gr,Br)|0,pt=pt+Math.imul(cr,Dr)|0,rt=rt+Math.imul(cr,qr)|0,rt=rt+Math.imul(dr,Dr)|0,mt=mt+Math.imul(dr,qr)|0,pt=pt+Math.imul(st,$r)|0,rt=rt+Math.imul(st,Lr)|0,rt=rt+Math.imul(Ct,$r)|0,mt=mt+Math.imul(Ct,Lr)|0,pt=pt+Math.imul(Vt,Ur)|0,rt=rt+Math.imul(Vt,Jr)|0,rt=rt+Math.imul(Qt,Ur)|0,mt=mt+Math.imul(Qt,Jr)|0,pt=pt+Math.imul(Wt,Fr)|0,rt=rt+Math.imul(Wt,Vr)|0,rt=rt+Math.imul(zt,Fr)|0,mt=mt+Math.imul(zt,Vr)|0;var en=(Et+pt|0)+((rt&8191)<<13)|0;Et=(mt+(rt>>>13)|0)+(en>>>26)|0,en&=67108863,pt=Math.imul(Ut,yt),rt=Math.imul(Ut,Bt),rt=rt+Math.imul(Ft,yt)|0,mt=Math.imul(Ft,Bt),pt=pt+Math.imul(tr,yr)|0,rt=rt+Math.imul(tr,fr)|0,rt=rt+Math.imul(bt,yr)|0,mt=mt+Math.imul(bt,fr)|0,pt=pt+Math.imul(Kt,Nr)|0,rt=rt+Math.imul(Kt,xr)|0,rt=rt+Math.imul(er,Nr)|0,mt=mt+Math.imul(er,xr)|0,pt=pt+Math.imul(Pr,Ar)|0,rt=rt+Math.imul(Pr,Br)|0,rt=rt+Math.imul(_r,Ar)|0,mt=mt+Math.imul(_r,Br)|0,pt=pt+Math.imul(Tr,Dr)|0,rt=rt+Math.imul(Tr,qr)|0,rt=rt+Math.imul(gr,Dr)|0,mt=mt+Math.imul(gr,qr)|0,pt=pt+Math.imul(cr,$r)|0,rt=rt+Math.imul(cr,Lr)|0,rt=rt+Math.imul(dr,$r)|0,mt=mt+Math.imul(dr,Lr)|0,pt=pt+Math.imul(st,Ur)|0,rt=rt+Math.imul(st,Jr)|0,rt=rt+Math.imul(Ct,Ur)|0,mt=mt+Math.imul(Ct,Jr)|0,pt=pt+Math.imul(Vt,Fr)|0,rt=rt+Math.imul(Vt,Vr)|0,rt=rt+Math.imul(Qt,Fr)|0,mt=mt+Math.imul(Qt,Vr)|0;var jr=(Et+pt|0)+((rt&8191)<<13)|0;Et=(mt+(rt>>>13)|0)+(jr>>>26)|0,jr&=67108863,pt=Math.imul(Ut,yr),rt=Math.imul(Ut,fr),rt=rt+Math.imul(Ft,yr)|0,mt=Math.imul(Ft,fr),pt=pt+Math.imul(tr,Nr)|0,rt=rt+Math.imul(tr,xr)|0,rt=rt+Math.imul(bt,Nr)|0,mt=mt+Math.imul(bt,xr)|0,pt=pt+Math.imul(Kt,Ar)|0,rt=rt+Math.imul(Kt,Br)|0,rt=rt+Math.imul(er,Ar)|0,mt=mt+Math.imul(er,Br)|0,pt=pt+Math.imul(Pr,Dr)|0,rt=rt+Math.imul(Pr,qr)|0,rt=rt+Math.imul(_r,Dr)|0,mt=mt+Math.imul(_r,qr)|0,pt=pt+Math.imul(Tr,$r)|0,rt=rt+Math.imul(Tr,Lr)|0,rt=rt+Math.imul(gr,$r)|0,mt=mt+Math.imul(gr,Lr)|0,pt=pt+Math.imul(cr,Ur)|0,rt=rt+Math.imul(cr,Jr)|0,rt=rt+Math.imul(dr,Ur)|0,mt=mt+Math.imul(dr,Jr)|0,pt=pt+Math.imul(st,Fr)|0,rt=rt+Math.imul(st,Vr)|0,rt=rt+Math.imul(Ct,Fr)|0,mt=mt+Math.imul(Ct,Vr)|0;var pn=(Et+pt|0)+((rt&8191)<<13)|0;Et=(mt+(rt>>>13)|0)+(pn>>>26)|0,pn&=67108863,pt=Math.imul(Ut,Nr),rt=Math.imul(Ut,xr),rt=rt+Math.imul(Ft,Nr)|0,mt=Math.imul(Ft,xr),pt=pt+Math.imul(tr,Ar)|0,rt=rt+Math.imul(tr,Br)|0,rt=rt+Math.imul(bt,Ar)|0,mt=mt+Math.imul(bt,Br)|0,pt=pt+Math.imul(Kt,Dr)|0,rt=rt+Math.imul(Kt,qr)|0,rt=rt+Math.imul(er,Dr)|0,mt=mt+Math.imul(er,qr)|0,pt=pt+Math.imul(Pr,$r)|0,rt=rt+Math.imul(Pr,Lr)|0,rt=rt+Math.imul(_r,$r)|0,mt=mt+Math.imul(_r,Lr)|0,pt=pt+Math.imul(Tr,Ur)|0,rt=rt+Math.imul(Tr,Jr)|0,rt=rt+Math.imul(gr,Ur)|0,mt=mt+Math.imul(gr,Jr)|0,pt=pt+Math.imul(cr,Fr)|0,rt=rt+Math.imul(cr,Vr)|0,rt=rt+Math.imul(dr,Fr)|0,mt=mt+Math.imul(dr,Vr)|0;var mn=(Et+pt|0)+((rt&8191)<<13)|0;Et=(mt+(rt>>>13)|0)+(mn>>>26)|0,mn&=67108863,pt=Math.imul(Ut,Ar),rt=Math.imul(Ut,Br),rt=rt+Math.imul(Ft,Ar)|0,mt=Math.imul(Ft,Br),pt=pt+Math.imul(tr,Dr)|0,rt=rt+Math.imul(tr,qr)|0,rt=rt+Math.imul(bt,Dr)|0,mt=mt+Math.imul(bt,qr)|0,pt=pt+Math.imul(Kt,$r)|0,rt=rt+Math.imul(Kt,Lr)|0,rt=rt+Math.imul(er,$r)|0,mt=mt+Math.imul(er,Lr)|0,pt=pt+Math.imul(Pr,Ur)|0,rt=rt+Math.imul(Pr,Jr)|0,rt=rt+Math.imul(_r,Ur)|0,mt=mt+Math.imul(_r,Jr)|0,pt=pt+Math.imul(Tr,Fr)|0,rt=rt+Math.imul(Tr,Vr)|0,rt=rt+Math.imul(gr,Fr)|0,mt=mt+Math.imul(gr,Vr)|0;var hn=(Et+pt|0)+((rt&8191)<<13)|0;Et=(mt+(rt>>>13)|0)+(hn>>>26)|0,hn&=67108863,pt=Math.imul(Ut,Dr),rt=Math.imul(Ut,qr),rt=rt+Math.imul(Ft,Dr)|0,mt=Math.imul(Ft,qr),pt=pt+Math.imul(tr,$r)|0,rt=rt+Math.imul(tr,Lr)|0,rt=rt+Math.imul(bt,$r)|0,mt=mt+Math.imul(bt,Lr)|0,pt=pt+Math.imul(Kt,Ur)|0,rt=rt+Math.imul(Kt,Jr)|0,rt=rt+Math.imul(er,Ur)|0,mt=mt+Math.imul(er,Jr)|0,pt=pt+Math.imul(Pr,Fr)|0,rt=rt+Math.imul(Pr,Vr)|0,rt=rt+Math.imul(_r,Fr)|0,mt=mt+Math.imul(_r,Vr)|0;var fn=(Et+pt|0)+((rt&8191)<<13)|0;Et=(mt+(rt>>>13)|0)+(fn>>>26)|0,fn&=67108863,pt=Math.imul(Ut,$r),rt=Math.imul(Ut,Lr),rt=rt+Math.imul(Ft,$r)|0,mt=Math.imul(Ft,Lr),pt=pt+Math.imul(tr,Ur)|0,rt=rt+Math.imul(tr,Jr)|0,rt=rt+Math.imul(bt,Ur)|0,mt=mt+Math.imul(bt,Jr)|0,pt=pt+Math.imul(Kt,Fr)|0,rt=rt+Math.imul(Kt,Vr)|0,rt=rt+Math.imul(er,Fr)|0,mt=mt+Math.imul(er,Vr)|0;var vn=(Et+pt|0)+((rt&8191)<<13)|0;Et=(mt+(rt>>>13)|0)+(vn>>>26)|0,vn&=67108863,pt=Math.imul(Ut,Ur),rt=Math.imul(Ut,Jr),rt=rt+Math.imul(Ft,Ur)|0,mt=Math.imul(Ft,Jr),pt=pt+Math.imul(tr,Fr)|0,rt=rt+Math.imul(tr,Vr)|0,rt=rt+Math.imul(bt,Fr)|0,mt=mt+Math.imul(bt,Vr)|0;var gn=(Et+pt|0)+((rt&8191)<<13)|0;Et=(mt+(rt>>>13)|0)+(gn>>>26)|0,gn&=67108863,pt=Math.imul(Ut,Fr),rt=Math.imul(Ut,Vr),rt=rt+Math.imul(Ft,Fr)|0,mt=Math.imul(Ft,Vr);var Sn=(Et+pt|0)+((rt&8191)<<13)|0;return Et=(mt+(rt>>>13)|0)+(Sn>>>26)|0,Sn&=67108863,gt[0]=sn,gt[1]=un,gt[2]=yn,gt[3]=br,gt[4]=wr,gt[5]=Mr,gt[6]=Wr,gt[7]=Hr,gt[8]=Gr,gt[9]=Yr,gt[10]=en,gt[11]=jr,gt[12]=pn,gt[13]=mn,gt[14]=hn,gt[15]=fn,gt[16]=vn,gt[17]=gn,gt[18]=Sn,Et!==0&&(gt[19]=Et,it.length++),it};Math.imul||(At=Tt);function Mt(ut,_e,tt){tt.negative=_e.negative^ut.negative,tt.length=ut.length+_e.length;for(var it=0,dt=0,lt=0;lt<tt.length-1;lt++){var gt=dt;dt=0;for(var Et=it&67108863,pt=Math.min(lt,_e.length-1),rt=Math.max(0,lt-ut.length+1);rt<=pt;rt++){var mt=lt-rt,Lt=ut.words[mt]|0,Gt=_e.words[rt]|0,rr=Lt*Gt,ir=rr&67108863;gt=gt+(rr/67108864|0)|0,ir=ir+Et|0,Et=ir&67108863,gt=gt+(ir>>>26)|0,dt+=gt>>>26,gt&=67108863}tt.words[lt]=Et,it=gt,gt=dt}return it!==0?tt.words[lt]=it:tt.length--,tt.strip()}function Dt(ut,_e,tt){var it=new Rt;return it.mulp(ut,_e,tt)}k.prototype.mulTo=function(_e,tt){var it,dt=this.length+_e.length;return this.length===10&&_e.length===10?it=At(this,_e,tt):dt<63?it=Tt(this,_e,tt):dt<1024?it=Mt(this,_e,tt):it=Dt(this,_e,tt),it};function Rt(ut,_e){this.x=ut,this.y=_e}Rt.prototype.makeRBT=function(_e){for(var tt=new Array(_e),it=k.prototype._countBits(_e)-1,dt=0;dt<_e;dt++)tt[dt]=this.revBin(dt,it,_e);return tt},Rt.prototype.revBin=function(_e,tt,it){if(_e===0||_e===it-1)return _e;for(var dt=0,lt=0;lt<tt;lt++)dt|=(_e&1)<<tt-lt-1,_e>>=1;return dt},Rt.prototype.permute=function(_e,tt,it,dt,lt,gt){for(var Et=0;Et<gt;Et++)dt[Et]=tt[_e[Et]],lt[Et]=it[_e[Et]]},Rt.prototype.transform=function(_e,tt,it,dt,lt,gt){this.permute(gt,_e,tt,it,dt,lt);for(var Et=1;Et<lt;Et<<=1)for(var pt=Et<<1,rt=Math.cos(2*Math.PI/pt),mt=Math.sin(2*Math.PI/pt),Lt=0;Lt<lt;Lt+=pt)for(var Gt=rt,rr=mt,ir=0;ir<Et;ir++){var Wt=it[Lt+ir],zt=dt[Lt+ir],wt=it[Lt+ir+Et],Vt=dt[Lt+ir+Et],Qt=Gt*wt-rr*Vt;Vt=Gt*Vt+rr*wt,wt=Qt,it[Lt+ir]=Wt+wt,dt[Lt+ir]=zt+Vt,it[Lt+ir+Et]=Wt-wt,dt[Lt+ir+Et]=zt-Vt,ir!==pt&&(Qt=rt*Gt-mt*rr,rr=rt*rr+mt*Gt,Gt=Qt)}},Rt.prototype.guessLen13b=function(_e,tt){var it=Math.max(tt,_e)|1,dt=it&1,lt=0;for(it=it/2|0;it;it=it>>>1)lt++;return 1<<lt+1+dt},Rt.prototype.conjugate=function(_e,tt,it){if(!(it<=1))for(var dt=0;dt<it/2;dt++){var lt=_e[dt];_e[dt]=_e[it-dt-1],_e[it-dt-1]=lt,lt=tt[dt],tt[dt]=-tt[it-dt-1],tt[it-dt-1]=-lt}},Rt.prototype.normalize13b=function(_e,tt){for(var it=0,dt=0;dt<tt/2;dt++){var lt=Math.round(_e[2*dt+1]/tt)*8192+Math.round(_e[2*dt]/tt)+it;_e[dt]=lt&67108863,lt<67108864?it=0:it=lt/67108864|0}return _e},Rt.prototype.convert13b=function(_e,tt,it,dt){for(var lt=0,gt=0;gt<tt;gt++)lt=lt+(_e[gt]|0),it[2*gt]=lt&8191,lt=lt>>>13,it[2*gt+1]=lt&8191,lt=lt>>>13;for(gt=2*tt;gt<dt;++gt)it[gt]=0;_(lt===0),_((lt&-8192)===0)},Rt.prototype.stub=function(_e){for(var tt=new Array(_e),it=0;it<_e;it++)tt[it]=0;return tt},Rt.prototype.mulp=function(_e,tt,it){var dt=2*this.guessLen13b(_e.length,tt.length),lt=this.makeRBT(dt),gt=this.stub(dt),Et=new Array(dt),pt=new Array(dt),rt=new Array(dt),mt=new Array(dt),Lt=new Array(dt),Gt=new Array(dt),rr=it.words;rr.length=dt,this.convert13b(_e.words,_e.length,Et,dt),this.convert13b(tt.words,tt.length,mt,dt),this.transform(Et,gt,pt,rt,dt,lt),this.transform(mt,gt,Lt,Gt,dt,lt);for(var ir=0;ir<dt;ir++){var Wt=pt[ir]*Lt[ir]-rt[ir]*Gt[ir];rt[ir]=pt[ir]*Gt[ir]+rt[ir]*Lt[ir],pt[ir]=Wt}return this.conjugate(pt,rt,dt),this.transform(pt,rt,rr,gt,dt,lt),this.conjugate(rr,gt,dt),this.normalize13b(rr,dt),it.negative=_e.negative^tt.negative,it.length=_e.length+tt.length,it.strip()},k.prototype.mul=function(_e){var tt=new k(null);return tt.words=new Array(this.length+_e.length),this.mulTo(_e,tt)},k.prototype.mulf=function(_e){var tt=new k(null);return tt.words=new Array(this.length+_e.length),Dt(this,_e,tt)},k.prototype.imul=function(_e){return this.clone().mulTo(_e,this)},k.prototype.imuln=function(_e){_(typeof _e=="number"),_(_e<67108864);for(var tt=0,it=0;it<this.length;it++){var dt=(this.words[it]|0)*_e,lt=(dt&67108863)+(tt&67108863);tt>>=26,tt+=dt/67108864|0,tt+=lt>>>26,this.words[it]=lt&67108863}return tt!==0&&(this.words[it]=tt,this.length++),this},k.prototype.muln=function(_e){return this.clone().imuln(_e)},k.prototype.sqr=function(){return this.mul(this)},k.prototype.isqr=function(){return this.imul(this.clone())},k.prototype.pow=function(_e){var tt=$t(_e);if(tt.length===0)return new k(1);for(var it=this,dt=0;dt<tt.length&&tt[dt]===0;dt++,it=it.sqr());if(++dt<tt.length)for(var lt=it.sqr();dt<tt.length;dt++,lt=lt.sqr())tt[dt]!==0&&(it=it.mul(lt));return it},k.prototype.iushln=function(_e){_(typeof _e=="number"&&_e>=0);var tt=_e%26,it=(_e-tt)/26,dt=67108863>>>26-tt<<26-tt,lt;if(tt!==0){var gt=0;for(lt=0;lt<this.length;lt++){var Et=this.words[lt]&dt,pt=(this.words[lt]|0)-Et<<tt;this.words[lt]=pt|gt,gt=Et>>>26-tt}gt&&(this.words[lt]=gt,this.length++)}if(it!==0){for(lt=this.length-1;lt>=0;lt--)this.words[lt+it]=this.words[lt];for(lt=0;lt<it;lt++)this.words[lt]=0;this.length+=it}return this.strip()},k.prototype.ishln=function(_e){return _(this.negative===0),this.iushln(_e)},k.prototype.iushrn=function(_e,tt,it){_(typeof _e=="number"&&_e>=0);var dt;tt?dt=(tt-tt%26)/26:dt=0;var lt=_e%26,gt=Math.min((_e-lt)/26,this.length),Et=67108863^67108863>>>lt<<lt,pt=it;if(dt-=gt,dt=Math.max(0,dt),pt){for(var rt=0;rt<gt;rt++)pt.words[rt]=this.words[rt];pt.length=gt}if(gt!==0)if(this.length>gt)for(this.length-=gt,rt=0;rt<this.length;rt++)this.words[rt]=this.words[rt+gt];else this.words[0]=0,this.length=1;var mt=0;for(rt=this.length-1;rt>=0&&(mt!==0||rt>=dt);rt--){var Lt=this.words[rt]|0;this.words[rt]=mt<<26-lt|Lt>>>lt,mt=Lt&Et}return pt&&mt!==0&&(pt.words[pt.length++]=mt),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},k.prototype.ishrn=function(_e,tt,it){return _(this.negative===0),this.iushrn(_e,tt,it)},k.prototype.shln=function(_e){return this.clone().ishln(_e)},k.prototype.ushln=function(_e){return this.clone().iushln(_e)},k.prototype.shrn=function(_e){return this.clone().ishrn(_e)},k.prototype.ushrn=function(_e){return this.clone().iushrn(_e)},k.prototype.testn=function(_e){_(typeof _e=="number"&&_e>=0);var tt=_e%26,it=(_e-tt)/26,dt=1<<tt;if(this.length<=it)return!1;var lt=this.words[it];return!!(lt&dt)},k.prototype.imaskn=function(_e){_(typeof _e=="number"&&_e>=0);var tt=_e%26,it=(_e-tt)/26;if(_(this.negative===0,"imaskn works only with positive numbers"),this.length<=it)return this;if(tt!==0&&it++,this.length=Math.min(it,this.length),tt!==0){var dt=67108863^67108863>>>tt<<tt;this.words[this.length-1]&=dt}return this.strip()},k.prototype.maskn=function(_e){return this.clone().imaskn(_e)},k.prototype.iaddn=function(_e){return _(typeof _e=="number"),_(_e<67108864),_e<0?this.isubn(-_e):this.negative!==0?this.length===1&&(this.words[0]|0)<_e?(this.words[0]=_e-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(_e),this.negative=1,this):this._iaddn(_e)},k.prototype._iaddn=function(_e){this.words[0]+=_e;for(var tt=0;tt<this.length&&this.words[tt]>=67108864;tt++)this.words[tt]-=67108864,tt===this.length-1?this.words[tt+1]=1:this.words[tt+1]++;return this.length=Math.max(this.length,tt+1),this},k.prototype.isubn=function(_e){if(_(typeof _e=="number"),_(_e<67108864),_e<0)return this.iaddn(-_e);if(this.negative!==0)return this.negative=0,this.iaddn(_e),this.negative=1,this;if(this.words[0]-=_e,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var tt=0;tt<this.length&&this.words[tt]<0;tt++)this.words[tt]+=67108864,this.words[tt+1]-=1;return this.strip()},k.prototype.addn=function(_e){return this.clone().iaddn(_e)},k.prototype.subn=function(_e){return this.clone().isubn(_e)},k.prototype.iabs=function(){return this.negative=0,this},k.prototype.abs=function(){return this.clone().iabs()},k.prototype._ishlnsubmul=function(_e,tt,it){var dt=_e.length+it,lt;this._expand(dt);var gt,Et=0;for(lt=0;lt<_e.length;lt++){gt=(this.words[lt+it]|0)+Et;var pt=(_e.words[lt]|0)*tt;gt-=pt&67108863,Et=(gt>>26)-(pt/67108864|0),this.words[lt+it]=gt&67108863}for(;lt<this.length-it;lt++)gt=(this.words[lt+it]|0)+Et,Et=gt>>26,this.words[lt+it]=gt&67108863;if(Et===0)return this.strip();for(_(Et===-1),Et=0,lt=0;lt<this.length;lt++)gt=-(this.words[lt]|0)+Et,Et=gt>>26,this.words[lt]=gt&67108863;return this.negative=1,this.strip()},k.prototype._wordDiv=function(_e,tt){var it=this.length-_e.length,dt=this.clone(),lt=_e,gt=lt.words[lt.length-1]|0,Et=this._countBits(gt);it=26-Et,it!==0&&(lt=lt.ushln(it),dt.iushln(it),gt=lt.words[lt.length-1]|0);var pt=dt.length-lt.length,rt;if(tt!=="mod"){rt=new k(null),rt.length=pt+1,rt.words=new Array(rt.length);for(var mt=0;mt<rt.length;mt++)rt.words[mt]=0}var Lt=dt.clone()._ishlnsubmul(lt,1,pt);Lt.negative===0&&(dt=Lt,rt&&(rt.words[pt]=1));for(var Gt=pt-1;Gt>=0;Gt--){var rr=(dt.words[lt.length+Gt]|0)*67108864+(dt.words[lt.length+Gt-1]|0);for(rr=Math.min(rr/gt|0,67108863),dt._ishlnsubmul(lt,rr,Gt);dt.negative!==0;)rr--,dt.negative=0,dt._ishlnsubmul(lt,1,Gt),dt.isZero()||(dt.negative^=1);rt&&(rt.words[Gt]=rr)}return rt&&rt.strip(),dt.strip(),tt!=="div"&&it!==0&&dt.iushrn(it),{div:rt||null,mod:dt}},k.prototype.divmod=function(_e,tt,it){if(_(!_e.isZero()),this.isZero())return{div:new k(0),mod:new k(0)};var dt,lt,gt;return this.negative!==0&&_e.negative===0?(gt=this.neg().divmod(_e,tt),tt!=="mod"&&(dt=gt.div.neg()),tt!=="div"&&(lt=gt.mod.neg(),it&&lt.negative!==0&&lt.iadd(_e)),{div:dt,mod:lt}):this.negative===0&&_e.negative!==0?(gt=this.divmod(_e.neg(),tt),tt!=="mod"&&(dt=gt.div.neg()),{div:dt,mod:gt.mod}):this.negative&_e.negative?(gt=this.neg().divmod(_e.neg(),tt),tt!=="div"&&(lt=gt.mod.neg(),it&&lt.negative!==0&&lt.isub(_e)),{div:gt.div,mod:lt}):_e.length>this.length||this.cmp(_e)<0?{div:new k(0),mod:this}:_e.length===1?tt==="div"?{div:this.divn(_e.words[0]),mod:null}:tt==="mod"?{div:null,mod:new k(this.modn(_e.words[0]))}:{div:this.divn(_e.words[0]),mod:new k(this.modn(_e.words[0]))}:this._wordDiv(_e,tt)},k.prototype.div=function(_e){return this.divmod(_e,"div",!1).div},k.prototype.mod=function(_e){return this.divmod(_e,"mod",!1).mod},k.prototype.umod=function(_e){return this.divmod(_e,"mod",!0).mod},k.prototype.divRound=function(_e){var tt=this.divmod(_e);if(tt.mod.isZero())return tt.div;var it=tt.div.negative!==0?tt.mod.isub(_e):tt.mod,dt=_e.ushrn(1),lt=_e.andln(1),gt=it.cmp(dt);return gt<0||lt===1&&gt===0?tt.div:tt.div.negative!==0?tt.div.isubn(1):tt.div.iaddn(1)},k.prototype.modn=function(_e){_(_e<=67108863);for(var tt=(1<<26)%_e,it=0,dt=this.length-1;dt>=0;dt--)it=(tt*it+(this.words[dt]|0))%_e;return it},k.prototype.idivn=function(_e){_(_e<=67108863);for(var tt=0,it=this.length-1;it>=0;it--){var dt=(this.words[it]|0)+tt*67108864;this.words[it]=dt/_e|0,tt=dt%_e}return this.strip()},k.prototype.divn=function(_e){return this.clone().idivn(_e)},k.prototype.egcd=function(_e){_(_e.negative===0),_(!_e.isZero());var tt=this,it=_e.clone();tt.negative!==0?tt=tt.umod(_e):tt=tt.clone();for(var dt=new k(1),lt=new k(0),gt=new k(0),Et=new k(1),pt=0;tt.isEven()&&it.isEven();)tt.iushrn(1),it.iushrn(1),++pt;for(var rt=it.clone(),mt=tt.clone();!tt.isZero();){for(var Lt=0,Gt=1;!(tt.words[0]&Gt)&&Lt<26;++Lt,Gt<<=1);if(Lt>0)for(tt.iushrn(Lt);Lt-- >0;)(dt.isOdd()||lt.isOdd())&&(dt.iadd(rt),lt.isub(mt)),dt.iushrn(1),lt.iushrn(1);for(var rr=0,ir=1;!(it.words[0]&ir)&&rr<26;++rr,ir<<=1);if(rr>0)for(it.iushrn(rr);rr-- >0;)(gt.isOdd()||Et.isOdd())&&(gt.iadd(rt),Et.isub(mt)),gt.iushrn(1),Et.iushrn(1);tt.cmp(it)>=0?(tt.isub(it),dt.isub(gt),lt.isub(Et)):(it.isub(tt),gt.isub(dt),Et.isub(lt))}return{a:gt,b:Et,gcd:it.iushln(pt)}},k.prototype._invmp=function(_e){_(_e.negative===0),_(!_e.isZero());var tt=this,it=_e.clone();tt.negative!==0?tt=tt.umod(_e):tt=tt.clone();for(var dt=new k(1),lt=new k(0),gt=it.clone();tt.cmpn(1)>0&&it.cmpn(1)>0;){for(var Et=0,pt=1;!(tt.words[0]&pt)&&Et<26;++Et,pt<<=1);if(Et>0)for(tt.iushrn(Et);Et-- >0;)dt.isOdd()&&dt.iadd(gt),dt.iushrn(1);for(var rt=0,mt=1;!(it.words[0]&mt)&&rt<26;++rt,mt<<=1);if(rt>0)for(it.iushrn(rt);rt-- >0;)lt.isOdd()&&lt.iadd(gt),lt.iushrn(1);tt.cmp(it)>=0?(tt.isub(it),dt.isub(lt)):(it.isub(tt),lt.isub(dt))}var Lt;return tt.cmpn(1)===0?Lt=dt:Lt=lt,Lt.cmpn(0)<0&&Lt.iadd(_e),Lt},k.prototype.gcd=function(_e){if(this.isZero())return _e.abs();if(_e.isZero())return this.abs();var tt=this.clone(),it=_e.clone();tt.negative=0,it.negative=0;for(var dt=0;tt.isEven()&&it.isEven();dt++)tt.iushrn(1),it.iushrn(1);do{for(;tt.isEven();)tt.iushrn(1);for(;it.isEven();)it.iushrn(1);var lt=tt.cmp(it);if(lt<0){var gt=tt;tt=it,it=gt}else if(lt===0||it.cmpn(1)===0)break;tt.isub(it)}while(!0);return it.iushln(dt)},k.prototype.invm=function(_e){return this.egcd(_e).a.umod(_e)},k.prototype.isEven=function(){return(this.words[0]&1)===0},k.prototype.isOdd=function(){return(this.words[0]&1)===1},k.prototype.andln=function(_e){return this.words[0]&_e},k.prototype.bincn=function(_e){_(typeof _e=="number");var tt=_e%26,it=(_e-tt)/26,dt=1<<tt;if(this.length<=it)return this._expand(it+1),this.words[it]|=dt,this;for(var lt=dt,gt=it;lt!==0&&gt<this.length;gt++){var Et=this.words[gt]|0;Et+=lt,lt=Et>>>26,Et&=67108863,this.words[gt]=Et}return lt!==0&&(this.words[gt]=lt,this.length++),this},k.prototype.isZero=function(){return this.length===1&&this.words[0]===0},k.prototype.cmpn=function(_e){var tt=_e<0;if(this.negative!==0&&!tt)return-1;if(this.negative===0&&tt)return 1;this.strip();var it;if(this.length>1)it=1;else{tt&&(_e=-_e),_(_e<=67108863,"Number is too big");var dt=this.words[0]|0;it=dt===_e?0:dt<_e?-1:1}return this.negative!==0?-it|0:it},k.prototype.cmp=function(_e){if(this.negative!==0&&_e.negative===0)return-1;if(this.negative===0&&_e.negative!==0)return 1;var tt=this.ucmp(_e);return this.negative!==0?-tt|0:tt},k.prototype.ucmp=function(_e){if(this.length>_e.length)return 1;if(this.length<_e.length)return-1;for(var tt=0,it=this.length-1;it>=0;it--){var dt=this.words[it]|0,lt=_e.words[it]|0;if(dt!==lt){dt<lt?tt=-1:dt>lt&&(tt=1);break}}return tt},k.prototype.gtn=function(_e){return this.cmpn(_e)===1},k.prototype.gt=function(_e){return this.cmp(_e)===1},k.prototype.gten=function(_e){return this.cmpn(_e)>=0},k.prototype.gte=function(_e){return this.cmp(_e)>=0},k.prototype.ltn=function(_e){return this.cmpn(_e)===-1},k.prototype.lt=function(_e){return this.cmp(_e)===-1},k.prototype.lten=function(_e){return this.cmpn(_e)<=0},k.prototype.lte=function(_e){return this.cmp(_e)<=0},k.prototype.eqn=function(_e){return this.cmpn(_e)===0},k.prototype.eq=function(_e){return this.cmp(_e)===0},k.red=function(_e){return new Ot(_e)},k.prototype.toRed=function(_e){return _(!this.red,"Already a number in reduction context"),_(this.negative===0,"red works only with positives"),_e.convertTo(this)._forceRed(_e)},k.prototype.fromRed=function(){return _(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},k.prototype._forceRed=function(_e){return this.red=_e,this},k.prototype.forceRed=function(_e){return _(!this.red,"Already a number in reduction context"),this._forceRed(_e)},k.prototype.redAdd=function(_e){return _(this.red,"redAdd works only with red numbers"),this.red.add(this,_e)},k.prototype.redIAdd=function(_e){return _(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,_e)},k.prototype.redSub=function(_e){return _(this.red,"redSub works only with red numbers"),this.red.sub(this,_e)},k.prototype.redISub=function(_e){return _(this.red,"redISub works only with red numbers"),this.red.isub(this,_e)},k.prototype.redShl=function(_e){return _(this.red,"redShl works only with red numbers"),this.red.shl(this,_e)},k.prototype.redMul=function(_e){return _(this.red,"redMul works only with red numbers"),this.red._verify2(this,_e),this.red.mul(this,_e)},k.prototype.redIMul=function(_e){return _(this.red,"redMul works only with red numbers"),this.red._verify2(this,_e),this.red.imul(this,_e)},k.prototype.redSqr=function(){return _(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},k.prototype.redISqr=function(){return _(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},k.prototype.redSqrt=function(){return _(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},k.prototype.redInvm=function(){return _(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},k.prototype.redNeg=function(){return _(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},k.prototype.redPow=function(_e){return _(this.red&&!_e.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,_e)};var xt={k256:null,p224:null,p192:null,p25519:null};function Jt(ut,_e){this.name=ut,this.p=new k(_e,16),this.n=this.p.bitLength(),this.k=new k(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}Jt.prototype._tmp=function(){var _e=new k(null);return _e.words=new Array(Math.ceil(this.n/13)),_e},Jt.prototype.ireduce=function(_e){var tt=_e,it;do this.split(tt,this.tmp),tt=this.imulK(tt),tt=tt.iadd(this.tmp),it=tt.bitLength();while(it>this.n);var dt=it<this.n?-1:tt.ucmp(this.p);return dt===0?(tt.words[0]=0,tt.length=1):dt>0?tt.isub(this.p):tt.strip!==void 0?tt.strip():tt._strip(),tt},Jt.prototype.split=function(_e,tt){_e.iushrn(this.n,0,tt)},Jt.prototype.imulK=function(_e){return _e.imul(this.k)};function ar(){Jt.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}$(ar,Jt),ar.prototype.split=function(_e,tt){for(var it=4194303,dt=Math.min(_e.length,9),lt=0;lt<dt;lt++)tt.words[lt]=_e.words[lt];if(tt.length=dt,_e.length<=9){_e.words[0]=0,_e.length=1;return}var gt=_e.words[9];for(tt.words[tt.length++]=gt&it,lt=10;lt<_e.length;lt++){var Et=_e.words[lt]|0;_e.words[lt-10]=(Et&it)<<4|gt>>>22,gt=Et}gt>>>=22,_e.words[lt-10]=gt,gt===0&&_e.length>10?_e.length-=10:_e.length-=9},ar.prototype.imulK=function(_e){_e.words[_e.length]=0,_e.words[_e.length+1]=0,_e.length+=2;for(var tt=0,it=0;it<_e.length;it++){var dt=_e.words[it]|0;tt+=dt*977,_e.words[it]=tt&67108863,tt=dt*64+(tt/67108864|0)}return _e.words[_e.length-1]===0&&(_e.length--,_e.words[_e.length-1]===0&&_e.length--),_e};function nr(){Jt.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}$(nr,Jt);function pr(){Jt.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}$(pr,Jt);function ur(){Jt.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}$(ur,Jt),ur.prototype.imulK=function(_e){for(var tt=0,it=0;it<_e.length;it++){var dt=(_e.words[it]|0)*19+tt,lt=dt&67108863;dt>>>=26,_e.words[it]=lt,tt=dt}return tt!==0&&(_e.words[_e.length++]=tt),_e},k._prime=function(_e){if(xt[_e])return xt[_e];var tt;if(_e==="k256")tt=new ar;else if(_e==="p224")tt=new nr;else if(_e==="p192")tt=new pr;else if(_e==="p25519")tt=new ur;else throw new Error("Unknown prime "+_e);return xt[_e]=tt,tt};function Ot(ut){if(typeof ut=="string"){var _e=k._prime(ut);this.m=_e.p,this.prime=_e}else _(ut.gtn(1),"modulus must be greater than 1"),this.m=ut,this.prime=null}Ot.prototype._verify1=function(_e){_(_e.negative===0,"red works only with positives"),_(_e.red,"red works only with red numbers")},Ot.prototype._verify2=function(_e,tt){_((_e.negative|tt.negative)===0,"red works only with positives"),_(_e.red&&_e.red===tt.red,"red works only with red numbers")},Ot.prototype.imod=function(_e){return this.prime?this.prime.ireduce(_e)._forceRed(this):_e.umod(this.m)._forceRed(this)},Ot.prototype.neg=function(_e){return _e.isZero()?_e.clone():this.m.sub(_e)._forceRed(this)},Ot.prototype.add=function(_e,tt){this._verify2(_e,tt);var it=_e.add(tt);return it.cmp(this.m)>=0&&it.isub(this.m),it._forceRed(this)},Ot.prototype.iadd=function(_e,tt){this._verify2(_e,tt);var it=_e.iadd(tt);return it.cmp(this.m)>=0&&it.isub(this.m),it},Ot.prototype.sub=function(_e,tt){this._verify2(_e,tt);var it=_e.sub(tt);return it.cmpn(0)<0&&it.iadd(this.m),it._forceRed(this)},Ot.prototype.isub=function(_e,tt){this._verify2(_e,tt);var it=_e.isub(tt);return it.cmpn(0)<0&&it.iadd(this.m),it},Ot.prototype.shl=function(_e,tt){return this._verify1(_e),this.imod(_e.ushln(tt))},Ot.prototype.imul=function(_e,tt){return this._verify2(_e,tt),this.imod(_e.imul(tt))},Ot.prototype.mul=function(_e,tt){return this._verify2(_e,tt),this.imod(_e.mul(tt))},Ot.prototype.isqr=function(_e){return this.imul(_e,_e.clone())},Ot.prototype.sqr=function(_e){return this.mul(_e,_e)},Ot.prototype.sqrt=function(_e){if(_e.isZero())return _e.clone();var tt=this.m.andln(3);if(_(tt%2===1),tt===3){var it=this.m.add(new k(1)).iushrn(2);return this.pow(_e,it)}for(var dt=this.m.subn(1),lt=0;!dt.isZero()&&dt.andln(1)===0;)lt++,dt.iushrn(1);_(!dt.isZero());var gt=new k(1).toRed(this),Et=gt.redNeg(),pt=this.m.subn(1).iushrn(1),rt=this.m.bitLength();for(rt=new k(2*rt*rt).toRed(this);this.pow(rt,pt).cmp(Et)!==0;)rt.redIAdd(Et);for(var mt=this.pow(rt,dt),Lt=this.pow(_e,dt.addn(1).iushrn(1)),Gt=this.pow(_e,dt),rr=lt;Gt.cmp(gt)!==0;){for(var ir=Gt,Wt=0;ir.cmp(gt)!==0;Wt++)ir=ir.redSqr();_(Wt<rr);var zt=this.pow(mt,new k(1).iushln(rr-Wt-1));Lt=Lt.redMul(zt),mt=zt.redSqr(),Gt=Gt.redMul(mt),rr=Wt}return Lt},Ot.prototype.invm=function(_e){var tt=_e._invmp(this.m);return tt.negative!==0?(tt.negative=0,this.imod(tt).redNeg()):this.imod(tt)},Ot.prototype.pow=function(_e,tt){if(tt.isZero())return new k(1).toRed(this);if(tt.cmpn(1)===0)return _e.clone();var it=4,dt=new Array(1<<it);dt[0]=new k(1).toRed(this),dt[1]=_e;for(var lt=2;lt<dt.length;lt++)dt[lt]=this.mul(dt[lt-1],_e);var gt=dt[0],Et=0,pt=0,rt=tt.bitLength()%26;for(rt===0&&(rt=26),lt=tt.length-1;lt>=0;lt--){for(var mt=tt.words[lt],Lt=rt-1;Lt>=0;Lt--){var Gt=mt>>Lt&1;if(gt!==dt[0]&&(gt=this.sqr(gt)),Gt===0&&Et===0){pt=0;continue}Et<<=1,Et|=Gt,pt++,!(pt!==it&&(lt!==0||Lt!==0))&&(gt=this.mul(gt,dt[Et]),pt=0,Et=0)}rt=26}return gt},Ot.prototype.convertTo=function(_e){var tt=_e.umod(this.m);return tt===_e?tt.clone():tt},Ot.prototype.convertFrom=function(_e){var tt=_e.clone();return tt.red=null,tt},k.mont=function(_e){return new It(_e)};function It(ut){Ot.call(this,ut),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new k(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}$(It,Ot),It.prototype.convertTo=function(_e){return this.imod(_e.ushln(this.shift))},It.prototype.convertFrom=function(_e){var tt=this.imod(_e.mul(this.rinv));return tt.red=null,tt},It.prototype.imul=function(_e,tt){if(_e.isZero()||tt.isZero())return _e.words[0]=0,_e.length=1,_e;var it=_e.imul(tt),dt=it.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),lt=it.isub(dt).iushrn(this.shift),gt=lt;return lt.cmp(this.m)>=0?gt=lt.isub(this.m):lt.cmpn(0)<0&&(gt=lt.iadd(this.m)),gt._forceRed(this)},It.prototype.mul=function(_e,tt){if(_e.isZero()||tt.isZero())return new k(0)._forceRed(this);var it=_e.mul(tt),dt=it.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),lt=it.isub(dt).iushrn(this.shift),gt=lt;return lt.cmp(this.m)>=0?gt=lt.isub(this.m):lt.cmpn(0)<0&&(gt=lt.iadd(this.m)),gt._forceRed(this)},It.prototype.invm=function(_e){var tt=this.imod(_e._invmp(this.m).mul(this.r2));return tt._forceRed(this)}})(a,commonjsGlobal$1)})(bn$5);var bnExports$5=bn$5.exports,brorand={exports:{}},hasRequiredBrorand;function requireBrorand(){if(hasRequiredBrorand)return brorand.exports;hasRequiredBrorand=1;var a;brorand.exports=function($){return a||(a=new c(null)),a.generate($)};function c(_){this.rand=_}if(brorand.exports.Rand=c,c.prototype.generate=function($){return this._rand($)},c.prototype._rand=function($){if(this.rand.getBytes)return this.rand.getBytes($);for(var k=new Uint8Array($),et=0;et<k.length;et++)k[et]=this.rand.getByte();return k},typeof self=="object")self.crypto&&self.crypto.getRandomValues?c.prototype._rand=function($){var k=new Uint8Array($);return self.crypto.getRandomValues(k),k}:self.msCrypto&&self.msCrypto.getRandomValues?c.prototype._rand=function($){var k=new Uint8Array($);return self.msCrypto.getRandomValues(k),k}:typeof window=="object"&&(c.prototype._rand=function(){throw new Error("Not implemented yet")});else try{var b=requireCryptoBrowserify();if(typeof b.randomBytes!="function")throw new Error("Not supported");c.prototype._rand=function($){return b.randomBytes($)}}catch{}return brorand.exports}var mr,hasRequiredMr;function requireMr(){if(hasRequiredMr)return mr;hasRequiredMr=1;var a=bnExports$5,c=requireBrorand();function b(_){this.rand=_||new c.Rand}return mr=b,b.create=function($){return new b($)},b.prototype._randbelow=function($){var k=$.bitLength(),et=Math.ceil(k/8);do var nt=new a(this.rand.generate(et));while(nt.cmp($)>=0);return nt},b.prototype._randrange=function($,k){var et=k.sub($);return $.add(this._randbelow(et))},b.prototype.test=function($,k,et){var nt=$.bitLength(),ot=a.mont($),ht=new a(1).toRed(ot);k||(k=Math.max(1,nt/48|0));for(var vt=$.subn(1),_t=0;!vt.testn(_t);_t++);for(var kt=$.shrn(_t),$t=vt.toRed(ot),Tt=!0;k>0;k--){var At=this._randrange(new a(2),vt);et&&et(At);var Mt=At.toRed(ot).redPow(kt);if(!(Mt.cmp(ht)===0||Mt.cmp($t)===0)){for(var Dt=1;Dt<_t;Dt++){if(Mt=Mt.redSqr(),Mt.cmp(ht)===0)return!1;if(Mt.cmp($t)===0)break}if(Dt===_t)return!1}}return Tt},b.prototype.getDivisor=function($,k){var et=$.bitLength(),nt=a.mont($),ot=new a(1).toRed(nt);k||(k=Math.max(1,et/48|0));for(var ht=$.subn(1),vt=0;!ht.testn(vt);vt++);for(var _t=$.shrn(vt),kt=ht.toRed(nt);k>0;k--){var $t=this._randrange(new a(2),ht),Tt=$.gcd($t);if(Tt.cmpn(1)!==0)return Tt;var At=$t.toRed(nt).redPow(_t);if(!(At.cmp(ot)===0||At.cmp(kt)===0)){for(var Mt=1;Mt<vt;Mt++){if(At=At.redSqr(),At.cmp(ot)===0)return At.fromRed().subn(1).gcd($);if(At.cmp(kt)===0)break}if(Mt===vt)return At=At.redSqr(),At.fromRed().subn(1).gcd($)}}return!1},mr}var generatePrime,hasRequiredGeneratePrime;function requireGeneratePrime(){if(hasRequiredGeneratePrime)return generatePrime;hasRequiredGeneratePrime=1;var a=browserExports;generatePrime=Mt,Mt.simpleSieve=Tt,Mt.fermatTest=At;var c=bnExports$6,b=new c(24),_=requireMr(),$=new _,k=new c(1),et=new c(2),nt=new c(5);new c(16),new c(8);var ot=new c(10),ht=new c(3);new c(7);var vt=new c(11),_t=new c(4);new c(12);var kt=null;function $t(){if(kt!==null)return kt;var Dt=1048576,Rt=[];Rt[0]=2;for(var xt=1,Jt=3;Jt<Dt;Jt+=2){for(var ar=Math.ceil(Math.sqrt(Jt)),nr=0;nr<xt&&Rt[nr]<=ar&&Jt%Rt[nr]!==0;nr++);xt!==nr&&Rt[nr]<=ar||(Rt[xt++]=Jt)}return kt=Rt,Rt}function Tt(Dt){for(var Rt=$t(),xt=0;xt<Rt.length;xt++)if(Dt.modn(Rt[xt])===0)return Dt.cmpn(Rt[xt])===0;return!0}function At(Dt){var Rt=c.mont(Dt);return et.toRed(Rt).redPow(Dt.subn(1)).fromRed().cmpn(1)===0}function Mt(Dt,Rt){if(Dt<16)return Rt===2||Rt===5?new c([140,123]):new c([140,39]);Rt=new c(Rt);for(var xt,Jt;;){for(xt=new c(a(Math.ceil(Dt/8)));xt.bitLength()>Dt;)xt.ishrn(1);if(xt.isEven()&&xt.iadd(k),xt.testn(1)||xt.iadd(et),Rt.cmp(et)){if(!Rt.cmp(nt))for(;xt.mod(ot).cmp(ht);)xt.iadd(_t)}else for(;xt.mod(b).cmp(vt);)xt.iadd(_t);if(Jt=xt.shrn(1),Tt(Jt)&&Tt(xt)&&At(Jt)&&At(xt)&&$.test(Jt)&&$.test(xt))return xt}}return generatePrime}const modp1={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a63a3620ffffffffffffffff"},modp2={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece65381ffffffffffffffff"},modp5={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca237327ffffffffffffffff"},modp14={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aacaa68ffffffffffffffff"},modp15={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a93ad2caffffffffffffffff"},modp16={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c934063199ffffffffffffffff"},modp17={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dcc4024ffffffffffffffff"},modp18={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dbe115974a3926f12fee5e438777cb6a932df8cd8bec4d073b931ba3bc832b68d9dd300741fa7bf8afc47ed2576f6936ba424663aab639c5ae4f5683423b4742bf1c978238f16cbe39d652de3fdb8befc848ad922222e04a4037c0713eb57a81a23f0c73473fc646cea306b4bcbc8862f8385ddfa9d4b7fa2c087e879683303ed5bdd3a062b3cf5b3a278a66d2a13f83f44f82ddf310ee074ab6a364597e899a0255dc164f31cc50846851df9ab48195ded7ea1b1d510bd7ee74d73faf36bc31ecfa268359046f4eb879f924009438b481c6cd7889a002ed5ee382bc9190da6fc026e479558e4475677e9aa9e3050e2765694dfc81f56e880b96e7160c980dd98edd3dfffffffffffffffff"},require$$1$1={modp1,modp2,modp5,modp14,modp15,modp16,modp17,modp18};var dh$1,hasRequiredDh;function requireDh(){if(hasRequiredDh)return dh$1;hasRequiredDh=1;var a=bnExports$6,c=requireMr(),b=new c,_=new a(24),$=new a(11),k=new a(10),et=new a(3),nt=new a(7),ot=requireGeneratePrime(),ht=browserExports;dh$1=Tt;function vt(Mt,Dt){return Dt=Dt||"utf8",Buffer$O.isBuffer(Mt)||(Mt=new Buffer$O(Mt,Dt)),this._pub=new a(Mt),this}function _t(Mt,Dt){return Dt=Dt||"utf8",Buffer$O.isBuffer(Mt)||(Mt=new Buffer$O(Mt,Dt)),this._priv=new a(Mt),this}var kt={};function $t(Mt,Dt){var Rt=Dt.toString("hex"),xt=[Rt,Mt.toString(16)].join("_");if(xt in kt)return kt[xt];var Jt=0;if(Mt.isEven()||!ot.simpleSieve||!ot.fermatTest(Mt)||!b.test(Mt))return Jt+=1,Rt==="02"||Rt==="05"?Jt+=8:Jt+=4,kt[xt]=Jt,Jt;b.test(Mt.shrn(1))||(Jt+=2);var ar;switch(Rt){case"02":Mt.mod(_).cmp($)&&(Jt+=8);break;case"05":ar=Mt.mod(k),ar.cmp(et)&&ar.cmp(nt)&&(Jt+=8);break;default:Jt+=4}return kt[xt]=Jt,Jt}function Tt(Mt,Dt,Rt){this.setGenerator(Dt),this.__prime=new a(Mt),this._prime=a.mont(this.__prime),this._primeLen=Mt.length,this._pub=void 0,this._priv=void 0,this._primeCode=void 0,Rt?(this.setPublicKey=vt,this.setPrivateKey=_t):this._primeCode=8}Object.defineProperty(Tt.prototype,"verifyError",{enumerable:!0,get:function(){return typeof this._primeCode!="number"&&(this._primeCode=$t(this.__prime,this.__gen)),this._primeCode}}),Tt.prototype.generateKeys=function(){return this._priv||(this._priv=new a(ht(this._primeLen))),this._pub=this._gen.toRed(this._prime).redPow(this._priv).fromRed(),this.getPublicKey()},Tt.prototype.computeSecret=function(Mt){Mt=new a(Mt),Mt=Mt.toRed(this._prime);var Dt=Mt.redPow(this._priv).fromRed(),Rt=new Buffer$O(Dt.toArray()),xt=this.getPrime();if(Rt.length<xt.length){var Jt=new Buffer$O(xt.length-Rt.length);Jt.fill(0),Rt=Buffer$O.concat([Jt,Rt])}return Rt},Tt.prototype.getPublicKey=function(Dt){return At(this._pub,Dt)},Tt.prototype.getPrivateKey=function(Dt){return At(this._priv,Dt)},Tt.prototype.getPrime=function(Mt){return At(this.__prime,Mt)},Tt.prototype.getGenerator=function(Mt){return At(this._gen,Mt)},Tt.prototype.setGenerator=function(Mt,Dt){return Dt=Dt||"utf8",Buffer$O.isBuffer(Mt)||(Mt=new Buffer$O(Mt,Dt)),this.__gen=Mt,this._gen=new a(Mt),this};function At(Mt,Dt){var Rt=new Buffer$O(Mt.toArray());return Dt?Rt.toString(Dt):Rt}return dh$1}var hasRequiredBrowser$2;function requireBrowser$2(){if(hasRequiredBrowser$2)return browser$5;hasRequiredBrowser$2=1;var a=requireGeneratePrime(),c=require$$1$1,b=requireDh();function _(et){var nt=new Buffer$O(c[et].prime,"hex"),ot=new Buffer$O(c[et].gen,"hex");return new b(nt,ot)}var $={binary:!0,hex:!0,base64:!0};function k(et,nt,ot,ht){return Buffer$O.isBuffer(nt)||$[nt]===void 0?k(et,"binary",nt,ot):(nt=nt||"binary",ht=ht||"binary",ot=ot||new Buffer$O([2]),Buffer$O.isBuffer(ot)||(ot=new Buffer$O(ot,ht)),typeof et=="number"?new b(a(et,ot),ot,!0):(Buffer$O.isBuffer(et)||(et=new Buffer$O(et,nt)),new b(et,ot,!0)))}return browser$5.DiffieHellmanGroup=browser$5.createDiffieHellmanGroup=browser$5.getDiffieHellman=_,browser$5.createDiffieHellman=browser$5.DiffieHellman=k,browser$5}var safeBuffer$1={exports:{}};/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */(function(a,c){var b=require$$0$2,_=b.Buffer;function $(et,nt){for(var ot in et)nt[ot]=et[ot]}_.from&&_.alloc&&_.allocUnsafe&&_.allocUnsafeSlow?a.exports=b:($(b,c),c.Buffer=k);function k(et,nt,ot){return _(et,nt,ot)}k.prototype=Object.create(_.prototype),$(_,k),k.from=function(et,nt,ot){if(typeof et=="number")throw new TypeError("Argument must not be a number");return _(et,nt,ot)},k.alloc=function(et,nt,ot){if(typeof et!="number")throw new TypeError("Argument must be a number");var ht=_(et);return nt!==void 0?typeof ot=="string"?ht.fill(nt,ot):ht.fill(nt):ht.fill(0),ht},k.allocUnsafe=function(et){if(typeof et!="number")throw new TypeError("Argument must be a number");return _(et)},k.allocUnsafeSlow=function(et){if(typeof et!="number")throw new TypeError("Argument must be a number");return b.SlowBuffer(et)}})(safeBuffer$1,safeBuffer$1.exports);var safeBufferExports=safeBuffer$1.exports,readableBrowser={exports:{}},streamBrowser=eventsExports.EventEmitter,buffer_list,hasRequiredBuffer_list;function requireBuffer_list(){if(hasRequiredBuffer_list)return buffer_list;hasRequiredBuffer_list=1;function a(Tt,At){var Mt=Object.keys(Tt);if(Object.getOwnPropertySymbols){var Dt=Object.getOwnPropertySymbols(Tt);At&&(Dt=Dt.filter(function(Rt){return Object.getOwnPropertyDescriptor(Tt,Rt).enumerable})),Mt.push.apply(Mt,Dt)}return Mt}function c(Tt){for(var At=1;At<arguments.length;At++){var Mt=arguments[At]!=null?arguments[At]:{};At%2?a(Object(Mt),!0).forEach(function(Dt){b(Tt,Dt,Mt[Dt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Tt,Object.getOwnPropertyDescriptors(Mt)):a(Object(Mt)).forEach(function(Dt){Object.defineProperty(Tt,Dt,Object.getOwnPropertyDescriptor(Mt,Dt))})}return Tt}function b(Tt,At,Mt){return At=et(At),At in Tt?Object.defineProperty(Tt,At,{value:Mt,enumerable:!0,configurable:!0,writable:!0}):Tt[At]=Mt,Tt}function _(Tt,At){if(!(Tt instanceof At))throw new TypeError("Cannot call a class as a function")}function $(Tt,At){for(var Mt=0;Mt<At.length;Mt++){var Dt=At[Mt];Dt.enumerable=Dt.enumerable||!1,Dt.configurable=!0,"value"in Dt&&(Dt.writable=!0),Object.defineProperty(Tt,et(Dt.key),Dt)}}function k(Tt,At,Mt){return At&&$(Tt.prototype,At),Mt&&$(Tt,Mt),Object.defineProperty(Tt,"prototype",{writable:!1}),Tt}function et(Tt){var At=nt(Tt,"string");return typeof At=="symbol"?At:String(At)}function nt(Tt,At){if(typeof Tt!="object"||Tt===null)return Tt;var Mt=Tt[Symbol.toPrimitive];if(Mt!==void 0){var Dt=Mt.call(Tt,At||"default");if(typeof Dt!="object")return Dt;throw new TypeError("@@toPrimitive must return a primitive value.")}return(At==="string"?String:Number)(Tt)}var ot=require$$0$2,ht=ot.Buffer,vt=util$4,_t=vt.inspect,kt=_t&&_t.custom||"inspect";function $t(Tt,At,Mt){ht.prototype.copy.call(Tt,At,Mt)}return buffer_list=function(){function Tt(){_(this,Tt),this.head=null,this.tail=null,this.length=0}return k(Tt,[{key:"push",value:function(Mt){var Dt={data:Mt,next:null};this.length>0?this.tail.next=Dt:this.head=Dt,this.tail=Dt,++this.length}},{key:"unshift",value:function(Mt){var Dt={data:Mt,next:this.head};this.length===0&&(this.tail=Dt),this.head=Dt,++this.length}},{key:"shift",value:function(){if(this.length!==0){var Mt=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,Mt}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(Mt){if(this.length===0)return"";for(var Dt=this.head,Rt=""+Dt.data;Dt=Dt.next;)Rt+=Mt+Dt.data;return Rt}},{key:"concat",value:function(Mt){if(this.length===0)return ht.alloc(0);for(var Dt=ht.allocUnsafe(Mt>>>0),Rt=this.head,xt=0;Rt;)$t(Rt.data,Dt,xt),xt+=Rt.data.length,Rt=Rt.next;return Dt}},{key:"consume",value:function(Mt,Dt){var Rt;return Mt<this.head.data.length?(Rt=this.head.data.slice(0,Mt),this.head.data=this.head.data.slice(Mt)):Mt===this.head.data.length?Rt=this.shift():Rt=Dt?this._getString(Mt):this._getBuffer(Mt),Rt}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(Mt){var Dt=this.head,Rt=1,xt=Dt.data;for(Mt-=xt.length;Dt=Dt.next;){var Jt=Dt.data,ar=Mt>Jt.length?Jt.length:Mt;if(ar===Jt.length?xt+=Jt:xt+=Jt.slice(0,Mt),Mt-=ar,Mt===0){ar===Jt.length?(++Rt,Dt.next?this.head=Dt.next:this.head=this.tail=null):(this.head=Dt,Dt.data=Jt.slice(ar));break}++Rt}return this.length-=Rt,xt}},{key:"_getBuffer",value:function(Mt){var Dt=ht.allocUnsafe(Mt),Rt=this.head,xt=1;for(Rt.data.copy(Dt),Mt-=Rt.data.length;Rt=Rt.next;){var Jt=Rt.data,ar=Mt>Jt.length?Jt.length:Mt;if(Jt.copy(Dt,Dt.length-Mt,0,ar),Mt-=ar,Mt===0){ar===Jt.length?(++xt,Rt.next?this.head=Rt.next:this.head=this.tail=null):(this.head=Rt,Rt.data=Jt.slice(ar));break}++xt}return this.length-=xt,Dt}},{key:kt,value:function(Mt,Dt){return _t(this,c(c({},Dt),{},{depth:0,customInspect:!1}))}}]),Tt}(),buffer_list}function destroy(a,c){var b=this,_=this._readableState&&this._readableState.destroyed,$=this._writableState&&this._writableState.destroyed;return _||$?(c?c(a):a&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process$1.nextTick(emitErrorNT,this,a)):process$1.nextTick(emitErrorNT,this,a)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(a||null,function(k){!c&&k?b._writableState?b._writableState.errorEmitted?process$1.nextTick(emitCloseNT,b):(b._writableState.errorEmitted=!0,process$1.nextTick(emitErrorAndCloseNT,b,k)):process$1.nextTick(emitErrorAndCloseNT,b,k):c?(process$1.nextTick(emitCloseNT,b),c(k)):process$1.nextTick(emitCloseNT,b)}),this)}function emitErrorAndCloseNT(a,c){emitErrorNT(a,c),emitCloseNT(a)}function emitCloseNT(a){a._writableState&&!a._writableState.emitClose||a._readableState&&!a._readableState.emitClose||a.emit("close")}function undestroy(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function emitErrorNT(a,c){a.emit("error",c)}function errorOrDestroy(a,c){var b=a._readableState,_=a._writableState;b&&b.autoDestroy||_&&_.autoDestroy?a.destroy(c):a.emit("error",c)}var destroy_1={destroy,undestroy,errorOrDestroy},errorsBrowser={};function _inheritsLoose$1(a,c){a.prototype=Object.create(c.prototype),a.prototype.constructor=a,a.__proto__=c}var codes={};function createErrorType(a,c,b){b||(b=Error);function _(k,et,nt){return typeof c=="string"?c:c(k,et,nt)}var $=function(k){_inheritsLoose$1(et,k);function et(nt,ot,ht){return k.call(this,_(nt,ot,ht))||this}return et}(b);$.prototype.name=b.name,$.prototype.code=a,codes[a]=$}function oneOf(a,c){if(Array.isArray(a)){var b=a.length;return a=a.map(function(_){return String(_)}),b>2?"one of ".concat(c," ").concat(a.slice(0,b-1).join(", "),", or ")+a[b-1]:b===2?"one of ".concat(c," ").concat(a[0]," or ").concat(a[1]):"of ".concat(c," ").concat(a[0])}else return"of ".concat(c," ").concat(String(a))}function startsWith(a,c,b){return a.substr(!b||b<0?0:+b,c.length)===c}function endsWith(a,c,b){return(b===void 0||b>a.length)&&(b=a.length),a.substring(b-c.length,b)===c}function includes$2(a,c,b){return typeof b!="number"&&(b=0),b+c.length>a.length?!1:a.indexOf(c,b)!==-1}createErrorType("ERR_INVALID_OPT_VALUE",function(a,c){return'The value "'+c+'" is invalid for option "'+a+'"'},TypeError);createErrorType("ERR_INVALID_ARG_TYPE",function(a,c,b){var _;typeof c=="string"&&startsWith(c,"not ")?(_="must not be",c=c.replace(/^not /,"")):_="must be";var $;if(endsWith(a," argument"))$="The ".concat(a," ").concat(_," ").concat(oneOf(c,"type"));else{var k=includes$2(a,".")?"property":"argument";$='The "'.concat(a,'" ').concat(k," ").concat(_," ").concat(oneOf(c,"type"))}return $+=". Received type ".concat(typeof b),$},TypeError);createErrorType("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF");createErrorType("ERR_METHOD_NOT_IMPLEMENTED",function(a){return"The "+a+" method is not implemented"});createErrorType("ERR_STREAM_PREMATURE_CLOSE","Premature close");createErrorType("ERR_STREAM_DESTROYED",function(a){return"Cannot call "+a+" after a stream was destroyed"});createErrorType("ERR_MULTIPLE_CALLBACK","Callback called multiple times");createErrorType("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable");createErrorType("ERR_STREAM_WRITE_AFTER_END","write after end");createErrorType("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);createErrorType("ERR_UNKNOWN_ENCODING",function(a){return"Unknown encoding: "+a},TypeError);createErrorType("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event");errorsBrowser.codes=codes;var ERR_INVALID_OPT_VALUE=errorsBrowser.codes.ERR_INVALID_OPT_VALUE;function highWaterMarkFrom(a,c,b){return a.highWaterMark!=null?a.highWaterMark:c?a[b]:null}function getHighWaterMark(a,c,b,_){var $=highWaterMarkFrom(c,_,b);if($!=null){if(!(isFinite($)&&Math.floor($)===$)||$<0){var k=_?b:"highWaterMark";throw new ERR_INVALID_OPT_VALUE(k,$)}return Math.floor($)}return a.objectMode?16:16*1024}var state$2={getHighWaterMark},_stream_writable,hasRequired_stream_writable;function require_stream_writable(){if(hasRequired_stream_writable)return _stream_writable;hasRequired_stream_writable=1,_stream_writable=ur;function a(Wt){var zt=this;this.next=null,this.entry=null,this.finish=function(){ir(zt,Wt)}}var c;ur.WritableState=nr;var b={deprecate:browser$c},_=streamBrowser,$=require$$0$2.Buffer,k=(typeof commonjsGlobal$1<"u"?commonjsGlobal$1:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function et(Wt){return $.from(Wt)}function nt(Wt){return $.isBuffer(Wt)||Wt instanceof k}var ot=destroy_1,ht=state$2,vt=ht.getHighWaterMark,_t=errorsBrowser.codes,kt=_t.ERR_INVALID_ARG_TYPE,$t=_t.ERR_METHOD_NOT_IMPLEMENTED,Tt=_t.ERR_MULTIPLE_CALLBACK,At=_t.ERR_STREAM_CANNOT_PIPE,Mt=_t.ERR_STREAM_DESTROYED,Dt=_t.ERR_STREAM_NULL_VALUES,Rt=_t.ERR_STREAM_WRITE_AFTER_END,xt=_t.ERR_UNKNOWN_ENCODING,Jt=ot.errorOrDestroy;inherits_browserExports(ur,_);function ar(){}function nr(Wt,zt,wt){c=c||require_stream_duplex(),Wt=Wt||{},typeof wt!="boolean"&&(wt=zt instanceof c),this.objectMode=!!Wt.objectMode,wt&&(this.objectMode=this.objectMode||!!Wt.writableObjectMode),this.highWaterMark=vt(this,Wt,"writableHighWaterMark",wt),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var Vt=Wt.decodeStrings===!1;this.decodeStrings=!Vt,this.defaultEncoding=Wt.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(Qt){lt(zt,Qt)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=Wt.emitClose!==!1,this.autoDestroy=!!Wt.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new a(this)}nr.prototype.getBuffer=function(){for(var zt=this.bufferedRequest,wt=[];zt;)wt.push(zt),zt=zt.next;return wt},function(){try{Object.defineProperty(nr.prototype,"buffer",{get:b.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}();var pr;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(pr=Function.prototype[Symbol.hasInstance],Object.defineProperty(ur,Symbol.hasInstance,{value:function(zt){return pr.call(this,zt)?!0:this!==ur?!1:zt&&zt._writableState instanceof nr}})):pr=function(zt){return zt instanceof this};function ur(Wt){c=c||require_stream_duplex();var zt=this instanceof c;if(!zt&&!pr.call(ur,this))return new ur(Wt);this._writableState=new nr(Wt,this,zt),this.writable=!0,Wt&&(typeof Wt.write=="function"&&(this._write=Wt.write),typeof Wt.writev=="function"&&(this._writev=Wt.writev),typeof Wt.destroy=="function"&&(this._destroy=Wt.destroy),typeof Wt.final=="function"&&(this._final=Wt.final)),_.call(this)}ur.prototype.pipe=function(){Jt(this,new At)};function Ot(Wt,zt){var wt=new Rt;Jt(Wt,wt),process$1.nextTick(zt,wt)}function It(Wt,zt,wt,Vt){var Qt;return wt===null?Qt=new Dt:typeof wt!="string"&&!zt.objectMode&&(Qt=new kt("chunk",["string","Buffer"],wt)),Qt?(Jt(Wt,Qt),process$1.nextTick(Vt,Qt),!1):!0}ur.prototype.write=function(Wt,zt,wt){var Vt=this._writableState,Qt=!1,Nt=!Vt.objectMode&&nt(Wt);return Nt&&!$.isBuffer(Wt)&&(Wt=et(Wt)),typeof zt=="function"&&(wt=zt,zt=null),Nt?zt="buffer":zt||(zt=Vt.defaultEncoding),typeof wt!="function"&&(wt=ar),Vt.ending?Ot(this,wt):(Nt||It(this,Vt,Wt,wt))&&(Vt.pendingcb++,Qt=_e(this,Vt,Nt,Wt,zt,wt)),Qt},ur.prototype.cork=function(){this._writableState.corked++},ur.prototype.uncork=function(){var Wt=this._writableState;Wt.corked&&(Wt.corked--,!Wt.writing&&!Wt.corked&&!Wt.bufferProcessing&&Wt.bufferedRequest&&pt(this,Wt))},ur.prototype.setDefaultEncoding=function(zt){if(typeof zt=="string"&&(zt=zt.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((zt+"").toLowerCase())>-1))throw new xt(zt);return this._writableState.defaultEncoding=zt,this},Object.defineProperty(ur.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function ut(Wt,zt,wt){return!Wt.objectMode&&Wt.decodeStrings!==!1&&typeof zt=="string"&&(zt=$.from(zt,wt)),zt}Object.defineProperty(ur.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function _e(Wt,zt,wt,Vt,Qt,Nt){if(!wt){var st=ut(zt,Vt,Qt);Vt!==st&&(wt=!0,Qt="buffer",Vt=st)}var Ct=zt.objectMode?1:Vt.length;zt.length+=Ct;var qt=zt.length<zt.highWaterMark;if(qt||(zt.needDrain=!0),zt.writing||zt.corked){var cr=zt.lastBufferedRequest;zt.lastBufferedRequest={chunk:Vt,encoding:Qt,isBuf:wt,callback:Nt,next:null},cr?cr.next=zt.lastBufferedRequest:zt.bufferedRequest=zt.lastBufferedRequest,zt.bufferedRequestCount+=1}else tt(Wt,zt,!1,Ct,Vt,Qt,Nt);return qt}function tt(Wt,zt,wt,Vt,Qt,Nt,st){zt.writelen=Vt,zt.writecb=st,zt.writing=!0,zt.sync=!0,zt.destroyed?zt.onwrite(new Mt("write")):wt?Wt._writev(Qt,zt.onwrite):Wt._write(Qt,Nt,zt.onwrite),zt.sync=!1}function it(Wt,zt,wt,Vt,Qt){--zt.pendingcb,wt?(process$1.nextTick(Qt,Vt),process$1.nextTick(Gt,Wt,zt),Wt._writableState.errorEmitted=!0,Jt(Wt,Vt)):(Qt(Vt),Wt._writableState.errorEmitted=!0,Jt(Wt,Vt),Gt(Wt,zt))}function dt(Wt){Wt.writing=!1,Wt.writecb=null,Wt.length-=Wt.writelen,Wt.writelen=0}function lt(Wt,zt){var wt=Wt._writableState,Vt=wt.sync,Qt=wt.writecb;if(typeof Qt!="function")throw new Tt;if(dt(wt),zt)it(Wt,wt,Vt,zt,Qt);else{var Nt=rt(wt)||Wt.destroyed;!Nt&&!wt.corked&&!wt.bufferProcessing&&wt.bufferedRequest&&pt(Wt,wt),Vt?process$1.nextTick(gt,Wt,wt,Nt,Qt):gt(Wt,wt,Nt,Qt)}}function gt(Wt,zt,wt,Vt){wt||Et(Wt,zt),zt.pendingcb--,Vt(),Gt(Wt,zt)}function Et(Wt,zt){zt.length===0&&zt.needDrain&&(zt.needDrain=!1,Wt.emit("drain"))}function pt(Wt,zt){zt.bufferProcessing=!0;var wt=zt.bufferedRequest;if(Wt._writev&&wt&&wt.next){var Vt=zt.bufferedRequestCount,Qt=new Array(Vt),Nt=zt.corkedRequestsFree;Nt.entry=wt;for(var st=0,Ct=!0;wt;)Qt[st]=wt,wt.isBuf||(Ct=!1),wt=wt.next,st+=1;Qt.allBuffers=Ct,tt(Wt,zt,!0,zt.length,Qt,"",Nt.finish),zt.pendingcb++,zt.lastBufferedRequest=null,Nt.next?(zt.corkedRequestsFree=Nt.next,Nt.next=null):zt.corkedRequestsFree=new a(zt),zt.bufferedRequestCount=0}else{for(;wt;){var qt=wt.chunk,cr=wt.encoding,dr=wt.callback,Er=zt.objectMode?1:qt.length;if(tt(Wt,zt,!1,Er,qt,cr,dr),wt=wt.next,zt.bufferedRequestCount--,zt.writing)break}wt===null&&(zt.lastBufferedRequest=null)}zt.bufferedRequest=wt,zt.bufferProcessing=!1}ur.prototype._write=function(Wt,zt,wt){wt(new $t("_write()"))},ur.prototype._writev=null,ur.prototype.end=function(Wt,zt,wt){var Vt=this._writableState;return typeof Wt=="function"?(wt=Wt,Wt=null,zt=null):typeof zt=="function"&&(wt=zt,zt=null),Wt!=null&&this.write(Wt,zt),Vt.corked&&(Vt.corked=1,this.uncork()),Vt.ending||rr(this,Vt,wt),this},Object.defineProperty(ur.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function rt(Wt){return Wt.ending&&Wt.length===0&&Wt.bufferedRequest===null&&!Wt.finished&&!Wt.writing}function mt(Wt,zt){Wt._final(function(wt){zt.pendingcb--,wt&&Jt(Wt,wt),zt.prefinished=!0,Wt.emit("prefinish"),Gt(Wt,zt)})}function Lt(Wt,zt){!zt.prefinished&&!zt.finalCalled&&(typeof Wt._final=="function"&&!zt.destroyed?(zt.pendingcb++,zt.finalCalled=!0,process$1.nextTick(mt,Wt,zt)):(zt.prefinished=!0,Wt.emit("prefinish")))}function Gt(Wt,zt){var wt=rt(zt);if(wt&&(Lt(Wt,zt),zt.pendingcb===0&&(zt.finished=!0,Wt.emit("finish"),zt.autoDestroy))){var Vt=Wt._readableState;(!Vt||Vt.autoDestroy&&Vt.endEmitted)&&Wt.destroy()}return wt}function rr(Wt,zt,wt){zt.ending=!0,Gt(Wt,zt),wt&&(zt.finished?process$1.nextTick(wt):Wt.once("finish",wt)),zt.ended=!0,Wt.writable=!1}function ir(Wt,zt,wt){var Vt=Wt.entry;for(Wt.entry=null;Vt;){var Qt=Vt.callback;zt.pendingcb--,Qt(wt),Vt=Vt.next}zt.corkedRequestsFree.next=Wt}return Object.defineProperty(ur.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(zt){this._writableState&&(this._writableState.destroyed=zt)}}),ur.prototype.destroy=ot.destroy,ur.prototype._undestroy=ot.undestroy,ur.prototype._destroy=function(Wt,zt){zt(Wt)},_stream_writable}var _stream_duplex,hasRequired_stream_duplex;function require_stream_duplex(){if(hasRequired_stream_duplex)return _stream_duplex;hasRequired_stream_duplex=1;var a=Object.keys||function(ht){var vt=[];for(var _t in ht)vt.push(_t);return vt};_stream_duplex=et;var c=require_stream_readable(),b=require_stream_writable();inherits_browserExports(et,c);for(var _=a(b.prototype),$=0;$<_.length;$++){var k=_[$];et.prototype[k]||(et.prototype[k]=b.prototype[k])}function et(ht){if(!(this instanceof et))return new et(ht);c.call(this,ht),b.call(this,ht),this.allowHalfOpen=!0,ht&&(ht.readable===!1&&(this.readable=!1),ht.writable===!1&&(this.writable=!1),ht.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",nt)))}Object.defineProperty(et.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(et.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(et.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function nt(){this._writableState.ended||process$1.nextTick(ot,this)}function ot(ht){ht.end()}return Object.defineProperty(et.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(vt){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=vt,this._writableState.destroyed=vt)}}),_stream_duplex}var ERR_STREAM_PREMATURE_CLOSE=errorsBrowser.codes.ERR_STREAM_PREMATURE_CLOSE;function once$3(a){var c=!1;return function(){if(!c){c=!0;for(var b=arguments.length,_=new Array(b),$=0;$<b;$++)_[$]=arguments[$];a.apply(this,_)}}}function noop$2(){}function isRequest$1(a){return a.setHeader&&typeof a.abort=="function"}function eos$1(a,c,b){if(typeof c=="function")return eos$1(a,null,c);c||(c={}),b=once$3(b||noop$2);var _=c.readable||c.readable!==!1&&a.readable,$=c.writable||c.writable!==!1&&a.writable,k=function(){a.writable||nt()},et=a._writableState&&a._writableState.finished,nt=function(){$=!1,et=!0,_||b.call(a)},ot=a._readableState&&a._readableState.endEmitted,ht=function(){_=!1,ot=!0,$||b.call(a)},vt=function(Tt){b.call(a,Tt)},_t=function(){var Tt;if(_&&!ot)return(!a._readableState||!a._readableState.ended)&&(Tt=new ERR_STREAM_PREMATURE_CLOSE),b.call(a,Tt);if($&&!et)return(!a._writableState||!a._writableState.ended)&&(Tt=new ERR_STREAM_PREMATURE_CLOSE),b.call(a,Tt)},kt=function(){a.req.on("finish",nt)};return isRequest$1(a)?(a.on("complete",nt),a.on("abort",_t),a.req?kt():a.on("request",kt)):$&&!a._writableState&&(a.on("end",k),a.on("close",k)),a.on("end",ht),a.on("finish",nt),c.error!==!1&&a.on("error",vt),a.on("close",_t),function(){a.removeListener("complete",nt),a.removeListener("abort",_t),a.removeListener("request",kt),a.req&&a.req.removeListener("finish",nt),a.removeListener("end",k),a.removeListener("close",k),a.removeListener("finish",nt),a.removeListener("end",ht),a.removeListener("error",vt),a.removeListener("close",_t)}}var endOfStream=eos$1,async_iterator,hasRequiredAsync_iterator;function requireAsync_iterator(){if(hasRequiredAsync_iterator)return async_iterator;hasRequiredAsync_iterator=1;var a;function c(xt,Jt,ar){return Jt=b(Jt),Jt in xt?Object.defineProperty(xt,Jt,{value:ar,enumerable:!0,configurable:!0,writable:!0}):xt[Jt]=ar,xt}function b(xt){var Jt=_(xt,"string");return typeof Jt=="symbol"?Jt:String(Jt)}function _(xt,Jt){if(typeof xt!="object"||xt===null)return xt;var ar=xt[Symbol.toPrimitive];if(ar!==void 0){var nr=ar.call(xt,Jt||"default");if(typeof nr!="object")return nr;throw new TypeError("@@toPrimitive must return a primitive value.")}return(Jt==="string"?String:Number)(xt)}var $=endOfStream,k=Symbol("lastResolve"),et=Symbol("lastReject"),nt=Symbol("error"),ot=Symbol("ended"),ht=Symbol("lastPromise"),vt=Symbol("handlePromise"),_t=Symbol("stream");function kt(xt,Jt){return{value:xt,done:Jt}}function $t(xt){var Jt=xt[k];if(Jt!==null){var ar=xt[_t].read();ar!==null&&(xt[ht]=null,xt[k]=null,xt[et]=null,Jt(kt(ar,!1)))}}function Tt(xt){process$1.nextTick($t,xt)}function At(xt,Jt){return function(ar,nr){xt.then(function(){if(Jt[ot]){ar(kt(void 0,!0));return}Jt[vt](ar,nr)},nr)}}var Mt=Object.getPrototypeOf(function(){}),Dt=Object.setPrototypeOf((a={get stream(){return this[_t]},next:function(){var Jt=this,ar=this[nt];if(ar!==null)return Promise.reject(ar);if(this[ot])return Promise.resolve(kt(void 0,!0));if(this[_t].destroyed)return new Promise(function(Ot,It){process$1.nextTick(function(){Jt[nt]?It(Jt[nt]):Ot(kt(void 0,!0))})});var nr=this[ht],pr;if(nr)pr=new Promise(At(nr,this));else{var ur=this[_t].read();if(ur!==null)return Promise.resolve(kt(ur,!1));pr=new Promise(this[vt])}return this[ht]=pr,pr}},c(a,Symbol.asyncIterator,function(){return this}),c(a,"return",function(){var Jt=this;return new Promise(function(ar,nr){Jt[_t].destroy(null,function(pr){if(pr){nr(pr);return}ar(kt(void 0,!0))})})}),a),Mt),Rt=function(Jt){var ar,nr=Object.create(Dt,(ar={},c(ar,_t,{value:Jt,writable:!0}),c(ar,k,{value:null,writable:!0}),c(ar,et,{value:null,writable:!0}),c(ar,nt,{value:null,writable:!0}),c(ar,ot,{value:Jt._readableState.endEmitted,writable:!0}),c(ar,vt,{value:function(ur,Ot){var It=nr[_t].read();It?(nr[ht]=null,nr[k]=null,nr[et]=null,ur(kt(It,!1))):(nr[k]=ur,nr[et]=Ot)},writable:!0}),ar));return nr[ht]=null,$(Jt,function(pr){if(pr&&pr.code!=="ERR_STREAM_PREMATURE_CLOSE"){var ur=nr[et];ur!==null&&(nr[ht]=null,nr[k]=null,nr[et]=null,ur(pr)),nr[nt]=pr;return}var Ot=nr[k];Ot!==null&&(nr[ht]=null,nr[k]=null,nr[et]=null,Ot(kt(void 0,!0))),nr[ot]=!0}),Jt.on("readable",Tt.bind(null,nr)),nr};return async_iterator=Rt,async_iterator}var fromBrowser,hasRequiredFromBrowser;function requireFromBrowser(){return hasRequiredFromBrowser||(hasRequiredFromBrowser=1,fromBrowser=function(){throw new Error("Readable.from is not available in the browser")}),fromBrowser}var _stream_readable,hasRequired_stream_readable;function require_stream_readable(){if(hasRequired_stream_readable)return _stream_readable;hasRequired_stream_readable=1,_stream_readable=Ot;var a;Ot.ReadableState=ur,eventsExports.EventEmitter;var c=function(st,Ct){return st.listeners(Ct).length},b=streamBrowser,_=require$$0$2.Buffer,$=(typeof commonjsGlobal$1<"u"?commonjsGlobal$1:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function k(Nt){return _.from(Nt)}function et(Nt){return _.isBuffer(Nt)||Nt instanceof $}var nt=util$4,ot;nt&&nt.debuglog?ot=nt.debuglog("stream"):ot=function(){};var ht=requireBuffer_list(),vt=destroy_1,_t=state$2,kt=_t.getHighWaterMark,$t=errorsBrowser.codes,Tt=$t.ERR_INVALID_ARG_TYPE,At=$t.ERR_STREAM_PUSH_AFTER_EOF,Mt=$t.ERR_METHOD_NOT_IMPLEMENTED,Dt=$t.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,Rt,xt,Jt;inherits_browserExports(Ot,b);var ar=vt.errorOrDestroy,nr=["error","close","destroy","pause","resume"];function pr(Nt,st,Ct){if(typeof Nt.prependListener=="function")return Nt.prependListener(st,Ct);!Nt._events||!Nt._events[st]?Nt.on(st,Ct):Array.isArray(Nt._events[st])?Nt._events[st].unshift(Ct):Nt._events[st]=[Ct,Nt._events[st]]}function ur(Nt,st,Ct){a=a||require_stream_duplex(),Nt=Nt||{},typeof Ct!="boolean"&&(Ct=st instanceof a),this.objectMode=!!Nt.objectMode,Ct&&(this.objectMode=this.objectMode||!!Nt.readableObjectMode),this.highWaterMark=kt(this,Nt,"readableHighWaterMark",Ct),this.buffer=new ht,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=Nt.emitClose!==!1,this.autoDestroy=!!Nt.autoDestroy,this.destroyed=!1,this.defaultEncoding=Nt.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,Nt.encoding&&(Rt||(Rt=string_decoder.StringDecoder),this.decoder=new Rt(Nt.encoding),this.encoding=Nt.encoding)}function Ot(Nt){if(a=a||require_stream_duplex(),!(this instanceof Ot))return new Ot(Nt);var st=this instanceof a;this._readableState=new ur(Nt,this,st),this.readable=!0,Nt&&(typeof Nt.read=="function"&&(this._read=Nt.read),typeof Nt.destroy=="function"&&(this._destroy=Nt.destroy)),b.call(this)}Object.defineProperty(Ot.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(st){this._readableState&&(this._readableState.destroyed=st)}}),Ot.prototype.destroy=vt.destroy,Ot.prototype._undestroy=vt.undestroy,Ot.prototype._destroy=function(Nt,st){st(Nt)},Ot.prototype.push=function(Nt,st){var Ct=this._readableState,qt;return Ct.objectMode?qt=!0:typeof Nt=="string"&&(st=st||Ct.defaultEncoding,st!==Ct.encoding&&(Nt=_.from(Nt,st),st=""),qt=!0),It(this,Nt,st,!1,qt)},Ot.prototype.unshift=function(Nt){return It(this,Nt,null,!0,!1)};function It(Nt,st,Ct,qt,cr){ot("readableAddChunk",st);var dr=Nt._readableState;if(st===null)dr.reading=!1,lt(Nt,dr);else{var Er;if(cr||(Er=_e(dr,st)),Er)ar(Nt,Er);else if(dr.objectMode||st&&st.length>0)if(typeof st!="string"&&!dr.objectMode&&Object.getPrototypeOf(st)!==_.prototype&&(st=k(st)),qt)dr.endEmitted?ar(Nt,new Dt):ut(Nt,dr,st,!0);else if(dr.ended)ar(Nt,new At);else{if(dr.destroyed)return!1;dr.reading=!1,dr.decoder&&!Ct?(st=dr.decoder.write(st),dr.objectMode||st.length!==0?ut(Nt,dr,st,!1):pt(Nt,dr)):ut(Nt,dr,st,!1)}else qt||(dr.reading=!1,pt(Nt,dr))}return!dr.ended&&(dr.length<dr.highWaterMark||dr.length===0)}function ut(Nt,st,Ct,qt){st.flowing&&st.length===0&&!st.sync?(st.awaitDrain=0,Nt.emit("data",Ct)):(st.length+=st.objectMode?1:Ct.length,qt?st.buffer.unshift(Ct):st.buffer.push(Ct),st.needReadable&&gt(Nt)),pt(Nt,st)}function _e(Nt,st){var Ct;return!et(st)&&typeof st!="string"&&st!==void 0&&!Nt.objectMode&&(Ct=new Tt("chunk",["string","Buffer","Uint8Array"],st)),Ct}Ot.prototype.isPaused=function(){return this._readableState.flowing===!1},Ot.prototype.setEncoding=function(Nt){Rt||(Rt=string_decoder.StringDecoder);var st=new Rt(Nt);this._readableState.decoder=st,this._readableState.encoding=this._readableState.decoder.encoding;for(var Ct=this._readableState.buffer.head,qt="";Ct!==null;)qt+=st.write(Ct.data),Ct=Ct.next;return this._readableState.buffer.clear(),qt!==""&&this._readableState.buffer.push(qt),this._readableState.length=qt.length,this};var tt=1073741824;function it(Nt){return Nt>=tt?Nt=tt:(Nt--,Nt|=Nt>>>1,Nt|=Nt>>>2,Nt|=Nt>>>4,Nt|=Nt>>>8,Nt|=Nt>>>16,Nt++),Nt}function dt(Nt,st){return Nt<=0||st.length===0&&st.ended?0:st.objectMode?1:Nt!==Nt?st.flowing&&st.length?st.buffer.head.data.length:st.length:(Nt>st.highWaterMark&&(st.highWaterMark=it(Nt)),Nt<=st.length?Nt:st.ended?st.length:(st.needReadable=!0,0))}Ot.prototype.read=function(Nt){ot("read",Nt),Nt=parseInt(Nt,10);var st=this._readableState,Ct=Nt;if(Nt!==0&&(st.emittedReadable=!1),Nt===0&&st.needReadable&&((st.highWaterMark!==0?st.length>=st.highWaterMark:st.length>0)||st.ended))return ot("read: emitReadable",st.length,st.ended),st.length===0&&st.ended?wt(this):gt(this),null;if(Nt=dt(Nt,st),Nt===0&&st.ended)return st.length===0&&wt(this),null;var qt=st.needReadable;ot("need readable",qt),(st.length===0||st.length-Nt<st.highWaterMark)&&(qt=!0,ot("length less than watermark",qt)),st.ended||st.reading?(qt=!1,ot("reading or ended",qt)):qt&&(ot("do read"),st.reading=!0,st.sync=!0,st.length===0&&(st.needReadable=!0),this._read(st.highWaterMark),st.sync=!1,st.reading||(Nt=dt(Ct,st)));var cr;return Nt>0?cr=zt(Nt,st):cr=null,cr===null?(st.needReadable=st.length<=st.highWaterMark,Nt=0):(st.length-=Nt,st.awaitDrain=0),st.length===0&&(st.ended||(st.needReadable=!0),Ct!==Nt&&st.ended&&wt(this)),cr!==null&&this.emit("data",cr),cr};function lt(Nt,st){if(ot("onEofChunk"),!st.ended){if(st.decoder){var Ct=st.decoder.end();Ct&&Ct.length&&(st.buffer.push(Ct),st.length+=st.objectMode?1:Ct.length)}st.ended=!0,st.sync?gt(Nt):(st.needReadable=!1,st.emittedReadable||(st.emittedReadable=!0,Et(Nt)))}}function gt(Nt){var st=Nt._readableState;ot("emitReadable",st.needReadable,st.emittedReadable),st.needReadable=!1,st.emittedReadable||(ot("emitReadable",st.flowing),st.emittedReadable=!0,process$1.nextTick(Et,Nt))}function Et(Nt){var st=Nt._readableState;ot("emitReadable_",st.destroyed,st.length,st.ended),!st.destroyed&&(st.length||st.ended)&&(Nt.emit("readable"),st.emittedReadable=!1),st.needReadable=!st.flowing&&!st.ended&&st.length<=st.highWaterMark,Wt(Nt)}function pt(Nt,st){st.readingMore||(st.readingMore=!0,process$1.nextTick(rt,Nt,st))}function rt(Nt,st){for(;!st.reading&&!st.ended&&(st.length<st.highWaterMark||st.flowing&&st.length===0);){var Ct=st.length;if(ot("maybeReadMore read 0"),Nt.read(0),Ct===st.length)break}st.readingMore=!1}Ot.prototype._read=function(Nt){ar(this,new Mt("_read()"))},Ot.prototype.pipe=function(Nt,st){var Ct=this,qt=this._readableState;switch(qt.pipesCount){case 0:qt.pipes=Nt;break;case 1:qt.pipes=[qt.pipes,Nt];break;default:qt.pipes.push(Nt);break}qt.pipesCount+=1,ot("pipe count=%d opts=%j",qt.pipesCount,st);var cr=(!st||st.end!==!1)&&Nt!==process$1.stdout&&Nt!==process$1.stderr,dr=cr?Tr:kr;qt.endEmitted?process$1.nextTick(dr):Ct.once("end",dr),Nt.on("unpipe",Er);function Er(tr,bt){ot("onunpipe"),tr===Ct&&bt&&bt.hasUnpiped===!1&&(bt.hasUnpiped=!0,Pr())}function Tr(){ot("onend"),Nt.end()}var gr=mt(Ct);Nt.on("drain",gr);var Zr=!1;function Pr(){ot("cleanup"),Nt.removeListener("close",Kt),Nt.removeListener("finish",er),Nt.removeListener("drain",gr),Nt.removeListener("error",St),Nt.removeListener("unpipe",Er),Ct.removeListener("end",Tr),Ct.removeListener("end",kr),Ct.removeListener("data",_r),Zr=!0,qt.awaitDrain&&(!Nt._writableState||Nt._writableState.needDrain)&&gr()}Ct.on("data",_r);function _r(tr){ot("ondata");var bt=Nt.write(tr);ot("dest.write",bt),bt===!1&&((qt.pipesCount===1&&qt.pipes===Nt||qt.pipesCount>1&&Qt(qt.pipes,Nt)!==-1)&&!Zr&&(ot("false write response, pause",qt.awaitDrain),qt.awaitDrain++),Ct.pause())}function St(tr){ot("onerror",tr),kr(),Nt.removeListener("error",St),c(Nt,"error")===0&&ar(Nt,tr)}pr(Nt,"error",St);function Kt(){Nt.removeListener("finish",er),kr()}Nt.once("close",Kt);function er(){ot("onfinish"),Nt.removeListener("close",Kt),kr()}Nt.once("finish",er);function kr(){ot("unpipe"),Ct.unpipe(Nt)}return Nt.emit("pipe",Ct),qt.flowing||(ot("pipe resume"),Ct.resume()),Nt};function mt(Nt){return function(){var Ct=Nt._readableState;ot("pipeOnDrain",Ct.awaitDrain),Ct.awaitDrain&&Ct.awaitDrain--,Ct.awaitDrain===0&&c(Nt,"data")&&(Ct.flowing=!0,Wt(Nt))}}Ot.prototype.unpipe=function(Nt){var st=this._readableState,Ct={hasUnpiped:!1};if(st.pipesCount===0)return this;if(st.pipesCount===1)return Nt&&Nt!==st.pipes?this:(Nt||(Nt=st.pipes),st.pipes=null,st.pipesCount=0,st.flowing=!1,Nt&&Nt.emit("unpipe",this,Ct),this);if(!Nt){var qt=st.pipes,cr=st.pipesCount;st.pipes=null,st.pipesCount=0,st.flowing=!1;for(var dr=0;dr<cr;dr++)qt[dr].emit("unpipe",this,{hasUnpiped:!1});return this}var Er=Qt(st.pipes,Nt);return Er===-1?this:(st.pipes.splice(Er,1),st.pipesCount-=1,st.pipesCount===1&&(st.pipes=st.pipes[0]),Nt.emit("unpipe",this,Ct),this)},Ot.prototype.on=function(Nt,st){var Ct=b.prototype.on.call(this,Nt,st),qt=this._readableState;return Nt==="data"?(qt.readableListening=this.listenerCount("readable")>0,qt.flowing!==!1&&this.resume()):Nt==="readable"&&!qt.endEmitted&&!qt.readableListening&&(qt.readableListening=qt.needReadable=!0,qt.flowing=!1,qt.emittedReadable=!1,ot("on readable",qt.length,qt.reading),qt.length?gt(this):qt.reading||process$1.nextTick(Gt,this)),Ct},Ot.prototype.addListener=Ot.prototype.on,Ot.prototype.removeListener=function(Nt,st){var Ct=b.prototype.removeListener.call(this,Nt,st);return Nt==="readable"&&process$1.nextTick(Lt,this),Ct},Ot.prototype.removeAllListeners=function(Nt){var st=b.prototype.removeAllListeners.apply(this,arguments);return(Nt==="readable"||Nt===void 0)&&process$1.nextTick(Lt,this),st};function Lt(Nt){var st=Nt._readableState;st.readableListening=Nt.listenerCount("readable")>0,st.resumeScheduled&&!st.paused?st.flowing=!0:Nt.listenerCount("data")>0&&Nt.resume()}function Gt(Nt){ot("readable nexttick read 0"),Nt.read(0)}Ot.prototype.resume=function(){var Nt=this._readableState;return Nt.flowing||(ot("resume"),Nt.flowing=!Nt.readableListening,rr(this,Nt)),Nt.paused=!1,this};function rr(Nt,st){st.resumeScheduled||(st.resumeScheduled=!0,process$1.nextTick(ir,Nt,st))}function ir(Nt,st){ot("resume",st.reading),st.reading||Nt.read(0),st.resumeScheduled=!1,Nt.emit("resume"),Wt(Nt),st.flowing&&!st.reading&&Nt.read(0)}Ot.prototype.pause=function(){return ot("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(ot("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function Wt(Nt){var st=Nt._readableState;for(ot("flow",st.flowing);st.flowing&&Nt.read()!==null;);}Ot.prototype.wrap=function(Nt){var st=this,Ct=this._readableState,qt=!1;Nt.on("end",function(){if(ot("wrapped end"),Ct.decoder&&!Ct.ended){var Er=Ct.decoder.end();Er&&Er.length&&st.push(Er)}st.push(null)}),Nt.on("data",function(Er){if(ot("wrapped data"),Ct.decoder&&(Er=Ct.decoder.write(Er)),!(Ct.objectMode&&Er==null)&&!(!Ct.objectMode&&(!Er||!Er.length))){var Tr=st.push(Er);Tr||(qt=!0,Nt.pause())}});for(var cr in Nt)this[cr]===void 0&&typeof Nt[cr]=="function"&&(this[cr]=function(Tr){return function(){return Nt[Tr].apply(Nt,arguments)}}(cr));for(var dr=0;dr<nr.length;dr++)Nt.on(nr[dr],this.emit.bind(this,nr[dr]));return this._read=function(Er){ot("wrapped _read",Er),qt&&(qt=!1,Nt.resume())},this},typeof Symbol=="function"&&(Ot.prototype[Symbol.asyncIterator]=function(){return xt===void 0&&(xt=requireAsync_iterator()),xt(this)}),Object.defineProperty(Ot.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(Ot.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(Ot.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(st){this._readableState&&(this._readableState.flowing=st)}}),Ot._fromList=zt,Object.defineProperty(Ot.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function zt(Nt,st){if(st.length===0)return null;var Ct;return st.objectMode?Ct=st.buffer.shift():!Nt||Nt>=st.length?(st.decoder?Ct=st.buffer.join(""):st.buffer.length===1?Ct=st.buffer.first():Ct=st.buffer.concat(st.length),st.buffer.clear()):Ct=st.buffer.consume(Nt,st.decoder),Ct}function wt(Nt){var st=Nt._readableState;ot("endReadable",st.endEmitted),st.endEmitted||(st.ended=!0,process$1.nextTick(Vt,st,Nt))}function Vt(Nt,st){if(ot("endReadableNT",Nt.endEmitted,Nt.length),!Nt.endEmitted&&Nt.length===0&&(Nt.endEmitted=!0,st.readable=!1,st.emit("end"),Nt.autoDestroy)){var Ct=st._writableState;(!Ct||Ct.autoDestroy&&Ct.finished)&&st.destroy()}}typeof Symbol=="function"&&(Ot.from=function(Nt,st){return Jt===void 0&&(Jt=requireFromBrowser()),Jt(Ot,Nt,st)});function Qt(Nt,st){for(var Ct=0,qt=Nt.length;Ct<qt;Ct++)if(Nt[Ct]===st)return Ct;return-1}return _stream_readable}var _stream_transform=Transform$1,_require$codes$1=errorsBrowser.codes,ERR_METHOD_NOT_IMPLEMENTED=_require$codes$1.ERR_METHOD_NOT_IMPLEMENTED,ERR_MULTIPLE_CALLBACK=_require$codes$1.ERR_MULTIPLE_CALLBACK,ERR_TRANSFORM_ALREADY_TRANSFORMING=_require$codes$1.ERR_TRANSFORM_ALREADY_TRANSFORMING,ERR_TRANSFORM_WITH_LENGTH_0=_require$codes$1.ERR_TRANSFORM_WITH_LENGTH_0,Duplex=require_stream_duplex();inherits_browserExports(Transform$1,Duplex);function afterTransform(a,c){var b=this._transformState;b.transforming=!1;var _=b.writecb;if(_===null)return this.emit("error",new ERR_MULTIPLE_CALLBACK);b.writechunk=null,b.writecb=null,c!=null&&this.push(c),_(a);var $=this._readableState;$.reading=!1,($.needReadable||$.length<$.highWaterMark)&&this._read($.highWaterMark)}function Transform$1(a){if(!(this instanceof Transform$1))return new Transform$1(a);Duplex.call(this,a),this._transformState={afterTransform:afterTransform.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,a&&(typeof a.transform=="function"&&(this._transform=a.transform),typeof a.flush=="function"&&(this._flush=a.flush)),this.on("prefinish",prefinish)}function prefinish(){var a=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(c,b){done(a,c,b)}):done(this,null,null)}Transform$1.prototype.push=function(a,c){return this._transformState.needTransform=!1,Duplex.prototype.push.call(this,a,c)};Transform$1.prototype._transform=function(a,c,b){b(new ERR_METHOD_NOT_IMPLEMENTED("_transform()"))};Transform$1.prototype._write=function(a,c,b){var _=this._transformState;if(_.writecb=b,_.writechunk=a,_.writeencoding=c,!_.transforming){var $=this._readableState;(_.needTransform||$.needReadable||$.length<$.highWaterMark)&&this._read($.highWaterMark)}};Transform$1.prototype._read=function(a){var c=this._transformState;c.writechunk!==null&&!c.transforming?(c.transforming=!0,this._transform(c.writechunk,c.writeencoding,c.afterTransform)):c.needTransform=!0};Transform$1.prototype._destroy=function(a,c){Duplex.prototype._destroy.call(this,a,function(b){c(b)})};function done(a,c,b){if(c)return a.emit("error",c);if(b!=null&&a.push(b),a._writableState.length)throw new ERR_TRANSFORM_WITH_LENGTH_0;if(a._transformState.transforming)throw new ERR_TRANSFORM_ALREADY_TRANSFORMING;return a.push(null)}var _stream_passthrough=PassThrough,Transform=_stream_transform;inherits_browserExports(PassThrough,Transform);function PassThrough(a){if(!(this instanceof PassThrough))return new PassThrough(a);Transform.call(this,a)}PassThrough.prototype._transform=function(a,c,b){b(null,a)};var eos;function once$2(a){var c=!1;return function(){c||(c=!0,a.apply(void 0,arguments))}}var _require$codes=errorsBrowser.codes,ERR_MISSING_ARGS=_require$codes.ERR_MISSING_ARGS,ERR_STREAM_DESTROYED=_require$codes.ERR_STREAM_DESTROYED;function noop$1(a){if(a)throw a}function isRequest(a){return a.setHeader&&typeof a.abort=="function"}function destroyer(a,c,b,_){_=once$2(_);var $=!1;a.on("close",function(){$=!0}),eos===void 0&&(eos=endOfStream),eos(a,{readable:c,writable:b},function(et){if(et)return _(et);$=!0,_()});var k=!1;return function(et){if(!$&&!k){if(k=!0,isRequest(a))return a.abort();if(typeof a.destroy=="function")return a.destroy();_(et||new ERR_STREAM_DESTROYED("pipe"))}}}function call(a){a()}function pipe(a,c){return a.pipe(c)}function popCallback(a){return!a.length||typeof a[a.length-1]!="function"?noop$1:a.pop()}function pipeline(){for(var a=arguments.length,c=new Array(a),b=0;b<a;b++)c[b]=arguments[b];var _=popCallback(c);if(Array.isArray(c[0])&&(c=c[0]),c.length<2)throw new ERR_MISSING_ARGS("streams");var $,k=c.map(function(et,nt){var ot=nt<c.length-1,ht=nt>0;return destroyer(et,ot,ht,function(vt){$||($=vt),vt&&k.forEach(call),!ot&&(k.forEach(call),_($))})});return c.reduce(pipe)}var pipeline_1=pipeline;(function(a,c){c=a.exports=require_stream_readable(),c.Stream=c,c.Readable=c,c.Writable=require_stream_writable(),c.Duplex=require_stream_duplex(),c.Transform=_stream_transform,c.PassThrough=_stream_passthrough,c.finished=endOfStream,c.pipeline=pipeline_1})(readableBrowser,readableBrowser.exports);var readableBrowserExports=readableBrowser.exports,sign$1={exports:{}},bn$4={exports:{}};bn$4.exports;(function(a){(function(c,b){function _(tt,it){if(!tt)throw new Error(it||"Assertion failed")}function $(tt,it){tt.super_=it;var dt=function(){};dt.prototype=it.prototype,tt.prototype=new dt,tt.prototype.constructor=tt}function k(tt,it,dt){if(k.isBN(tt))return tt;this.negative=0,this.words=null,this.length=0,this.red=null,tt!==null&&((it==="le"||it==="be")&&(dt=it,it=10),this._init(tt||0,it||10,dt||"be"))}typeof c=="object"?c.exports=k:b.BN=k,k.BN=k,k.wordSize=26;var et;try{typeof window<"u"&&typeof window.Buffer<"u"?et=window.Buffer:et=require$$0$2.Buffer}catch{}k.isBN=function(it){return it instanceof k?!0:it!==null&&typeof it=="object"&&it.constructor.wordSize===k.wordSize&&Array.isArray(it.words)},k.max=function(it,dt){return it.cmp(dt)>0?it:dt},k.min=function(it,dt){return it.cmp(dt)<0?it:dt},k.prototype._init=function(it,dt,lt){if(typeof it=="number")return this._initNumber(it,dt,lt);if(typeof it=="object")return this._initArray(it,dt,lt);dt==="hex"&&(dt=16),_(dt===(dt|0)&&dt>=2&&dt<=36),it=it.toString().replace(/\s+/g,"");var gt=0;it[0]==="-"&&(gt++,this.negative=1),gt<it.length&&(dt===16?this._parseHex(it,gt,lt):(this._parseBase(it,dt,gt),lt==="le"&&this._initArray(this.toArray(),dt,lt)))},k.prototype._initNumber=function(it,dt,lt){it<0&&(this.negative=1,it=-it),it<67108864?(this.words=[it&67108863],this.length=1):it<4503599627370496?(this.words=[it&67108863,it/67108864&67108863],this.length=2):(_(it<9007199254740992),this.words=[it&67108863,it/67108864&67108863,1],this.length=3),lt==="le"&&this._initArray(this.toArray(),dt,lt)},k.prototype._initArray=function(it,dt,lt){if(_(typeof it.length=="number"),it.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(it.length/3),this.words=new Array(this.length);for(var gt=0;gt<this.length;gt++)this.words[gt]=0;var Et,pt,rt=0;if(lt==="be")for(gt=it.length-1,Et=0;gt>=0;gt-=3)pt=it[gt]|it[gt-1]<<8|it[gt-2]<<16,this.words[Et]|=pt<<rt&67108863,this.words[Et+1]=pt>>>26-rt&67108863,rt+=24,rt>=26&&(rt-=26,Et++);else if(lt==="le")for(gt=0,Et=0;gt<it.length;gt+=3)pt=it[gt]|it[gt+1]<<8|it[gt+2]<<16,this.words[Et]|=pt<<rt&67108863,this.words[Et+1]=pt>>>26-rt&67108863,rt+=24,rt>=26&&(rt-=26,Et++);return this._strip()};function nt(tt,it){var dt=tt.charCodeAt(it);if(dt>=48&&dt<=57)return dt-48;if(dt>=65&&dt<=70)return dt-55;if(dt>=97&&dt<=102)return dt-87;_(!1,"Invalid character in "+tt)}function ot(tt,it,dt){var lt=nt(tt,dt);return dt-1>=it&&(lt|=nt(tt,dt-1)<<4),lt}k.prototype._parseHex=function(it,dt,lt){this.length=Math.ceil((it.length-dt)/6),this.words=new Array(this.length);for(var gt=0;gt<this.length;gt++)this.words[gt]=0;var Et=0,pt=0,rt;if(lt==="be")for(gt=it.length-1;gt>=dt;gt-=2)rt=ot(it,dt,gt)<<Et,this.words[pt]|=rt&67108863,Et>=18?(Et-=18,pt+=1,this.words[pt]|=rt>>>26):Et+=8;else{var mt=it.length-dt;for(gt=mt%2===0?dt+1:dt;gt<it.length;gt+=2)rt=ot(it,dt,gt)<<Et,this.words[pt]|=rt&67108863,Et>=18?(Et-=18,pt+=1,this.words[pt]|=rt>>>26):Et+=8}this._strip()};function ht(tt,it,dt,lt){for(var gt=0,Et=0,pt=Math.min(tt.length,dt),rt=it;rt<pt;rt++){var mt=tt.charCodeAt(rt)-48;gt*=lt,mt>=49?Et=mt-49+10:mt>=17?Et=mt-17+10:Et=mt,_(mt>=0&&Et<lt,"Invalid character"),gt+=Et}return gt}k.prototype._parseBase=function(it,dt,lt){this.words=[0],this.length=1;for(var gt=0,Et=1;Et<=67108863;Et*=dt)gt++;gt--,Et=Et/dt|0;for(var pt=it.length-lt,rt=pt%gt,mt=Math.min(pt,pt-rt)+lt,Lt=0,Gt=lt;Gt<mt;Gt+=gt)Lt=ht(it,Gt,Gt+gt,dt),this.imuln(Et),this.words[0]+Lt<67108864?this.words[0]+=Lt:this._iaddn(Lt);if(rt!==0){var rr=1;for(Lt=ht(it,Gt,it.length,dt),Gt=0;Gt<rt;Gt++)rr*=dt;this.imuln(rr),this.words[0]+Lt<67108864?this.words[0]+=Lt:this._iaddn(Lt)}this._strip()},k.prototype.copy=function(it){it.words=new Array(this.length);for(var dt=0;dt<this.length;dt++)it.words[dt]=this.words[dt];it.length=this.length,it.negative=this.negative,it.red=this.red};function vt(tt,it){tt.words=it.words,tt.length=it.length,tt.negative=it.negative,tt.red=it.red}if(k.prototype._move=function(it){vt(it,this)},k.prototype.clone=function(){var it=new k(null);return this.copy(it),it},k.prototype._expand=function(it){for(;this.length<it;)this.words[this.length++]=0;return this},k.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},k.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{k.prototype[Symbol.for("nodejs.util.inspect.custom")]=_t}catch{k.prototype.inspect=_t}else k.prototype.inspect=_t;function _t(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var kt=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],$t=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],Tt=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];k.prototype.toString=function(it,dt){it=it||10,dt=dt|0||1;var lt;if(it===16||it==="hex"){lt="";for(var gt=0,Et=0,pt=0;pt<this.length;pt++){var rt=this.words[pt],mt=((rt<<gt|Et)&16777215).toString(16);Et=rt>>>24-gt&16777215,gt+=2,gt>=26&&(gt-=26,pt--),Et!==0||pt!==this.length-1?lt=kt[6-mt.length]+mt+lt:lt=mt+lt}for(Et!==0&&(lt=Et.toString(16)+lt);lt.length%dt!==0;)lt="0"+lt;return this.negative!==0&&(lt="-"+lt),lt}if(it===(it|0)&&it>=2&&it<=36){var Lt=$t[it],Gt=Tt[it];lt="";var rr=this.clone();for(rr.negative=0;!rr.isZero();){var ir=rr.modrn(Gt).toString(it);rr=rr.idivn(Gt),rr.isZero()?lt=ir+lt:lt=kt[Lt-ir.length]+ir+lt}for(this.isZero()&&(lt="0"+lt);lt.length%dt!==0;)lt="0"+lt;return this.negative!==0&&(lt="-"+lt),lt}_(!1,"Base should be between 2 and 36")},k.prototype.toNumber=function(){var it=this.words[0];return this.length===2?it+=this.words[1]*67108864:this.length===3&&this.words[2]===1?it+=4503599627370496+this.words[1]*67108864:this.length>2&&_(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-it:it},k.prototype.toJSON=function(){return this.toString(16,2)},et&&(k.prototype.toBuffer=function(it,dt){return this.toArrayLike(et,it,dt)}),k.prototype.toArray=function(it,dt){return this.toArrayLike(Array,it,dt)};var At=function(it,dt){return it.allocUnsafe?it.allocUnsafe(dt):new it(dt)};k.prototype.toArrayLike=function(it,dt,lt){this._strip();var gt=this.byteLength(),Et=lt||Math.max(1,gt);_(gt<=Et,"byte array longer than desired length"),_(Et>0,"Requested array length <= 0");var pt=At(it,Et),rt=dt==="le"?"LE":"BE";return this["_toArrayLike"+rt](pt,gt),pt},k.prototype._toArrayLikeLE=function(it,dt){for(var lt=0,gt=0,Et=0,pt=0;Et<this.length;Et++){var rt=this.words[Et]<<pt|gt;it[lt++]=rt&255,lt<it.length&&(it[lt++]=rt>>8&255),lt<it.length&&(it[lt++]=rt>>16&255),pt===6?(lt<it.length&&(it[lt++]=rt>>24&255),gt=0,pt=0):(gt=rt>>>24,pt+=2)}if(lt<it.length)for(it[lt++]=gt;lt<it.length;)it[lt++]=0},k.prototype._toArrayLikeBE=function(it,dt){for(var lt=it.length-1,gt=0,Et=0,pt=0;Et<this.length;Et++){var rt=this.words[Et]<<pt|gt;it[lt--]=rt&255,lt>=0&&(it[lt--]=rt>>8&255),lt>=0&&(it[lt--]=rt>>16&255),pt===6?(lt>=0&&(it[lt--]=rt>>24&255),gt=0,pt=0):(gt=rt>>>24,pt+=2)}if(lt>=0)for(it[lt--]=gt;lt>=0;)it[lt--]=0},Math.clz32?k.prototype._countBits=function(it){return 32-Math.clz32(it)}:k.prototype._countBits=function(it){var dt=it,lt=0;return dt>=4096&&(lt+=13,dt>>>=13),dt>=64&&(lt+=7,dt>>>=7),dt>=8&&(lt+=4,dt>>>=4),dt>=2&&(lt+=2,dt>>>=2),lt+dt},k.prototype._zeroBits=function(it){if(it===0)return 26;var dt=it,lt=0;return dt&8191||(lt+=13,dt>>>=13),dt&127||(lt+=7,dt>>>=7),dt&15||(lt+=4,dt>>>=4),dt&3||(lt+=2,dt>>>=2),dt&1||lt++,lt},k.prototype.bitLength=function(){var it=this.words[this.length-1],dt=this._countBits(it);return(this.length-1)*26+dt};function Mt(tt){for(var it=new Array(tt.bitLength()),dt=0;dt<it.length;dt++){var lt=dt/26|0,gt=dt%26;it[dt]=tt.words[lt]>>>gt&1}return it}k.prototype.zeroBits=function(){if(this.isZero())return 0;for(var it=0,dt=0;dt<this.length;dt++){var lt=this._zeroBits(this.words[dt]);if(it+=lt,lt!==26)break}return it},k.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},k.prototype.toTwos=function(it){return this.negative!==0?this.abs().inotn(it).iaddn(1):this.clone()},k.prototype.fromTwos=function(it){return this.testn(it-1)?this.notn(it).iaddn(1).ineg():this.clone()},k.prototype.isNeg=function(){return this.negative!==0},k.prototype.neg=function(){return this.clone().ineg()},k.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},k.prototype.iuor=function(it){for(;this.length<it.length;)this.words[this.length++]=0;for(var dt=0;dt<it.length;dt++)this.words[dt]=this.words[dt]|it.words[dt];return this._strip()},k.prototype.ior=function(it){return _((this.negative|it.negative)===0),this.iuor(it)},k.prototype.or=function(it){return this.length>it.length?this.clone().ior(it):it.clone().ior(this)},k.prototype.uor=function(it){return this.length>it.length?this.clone().iuor(it):it.clone().iuor(this)},k.prototype.iuand=function(it){var dt;this.length>it.length?dt=it:dt=this;for(var lt=0;lt<dt.length;lt++)this.words[lt]=this.words[lt]&it.words[lt];return this.length=dt.length,this._strip()},k.prototype.iand=function(it){return _((this.negative|it.negative)===0),this.iuand(it)},k.prototype.and=function(it){return this.length>it.length?this.clone().iand(it):it.clone().iand(this)},k.prototype.uand=function(it){return this.length>it.length?this.clone().iuand(it):it.clone().iuand(this)},k.prototype.iuxor=function(it){var dt,lt;this.length>it.length?(dt=this,lt=it):(dt=it,lt=this);for(var gt=0;gt<lt.length;gt++)this.words[gt]=dt.words[gt]^lt.words[gt];if(this!==dt)for(;gt<dt.length;gt++)this.words[gt]=dt.words[gt];return this.length=dt.length,this._strip()},k.prototype.ixor=function(it){return _((this.negative|it.negative)===0),this.iuxor(it)},k.prototype.xor=function(it){return this.length>it.length?this.clone().ixor(it):it.clone().ixor(this)},k.prototype.uxor=function(it){return this.length>it.length?this.clone().iuxor(it):it.clone().iuxor(this)},k.prototype.inotn=function(it){_(typeof it=="number"&&it>=0);var dt=Math.ceil(it/26)|0,lt=it%26;this._expand(dt),lt>0&&dt--;for(var gt=0;gt<dt;gt++)this.words[gt]=~this.words[gt]&67108863;return lt>0&&(this.words[gt]=~this.words[gt]&67108863>>26-lt),this._strip()},k.prototype.notn=function(it){return this.clone().inotn(it)},k.prototype.setn=function(it,dt){_(typeof it=="number"&&it>=0);var lt=it/26|0,gt=it%26;return this._expand(lt+1),dt?this.words[lt]=this.words[lt]|1<<gt:this.words[lt]=this.words[lt]&~(1<<gt),this._strip()},k.prototype.iadd=function(it){var dt;if(this.negative!==0&&it.negative===0)return this.negative=0,dt=this.isub(it),this.negative^=1,this._normSign();if(this.negative===0&&it.negative!==0)return it.negative=0,dt=this.isub(it),it.negative=1,dt._normSign();var lt,gt;this.length>it.length?(lt=this,gt=it):(lt=it,gt=this);for(var Et=0,pt=0;pt<gt.length;pt++)dt=(lt.words[pt]|0)+(gt.words[pt]|0)+Et,this.words[pt]=dt&67108863,Et=dt>>>26;for(;Et!==0&&pt<lt.length;pt++)dt=(lt.words[pt]|0)+Et,this.words[pt]=dt&67108863,Et=dt>>>26;if(this.length=lt.length,Et!==0)this.words[this.length]=Et,this.length++;else if(lt!==this)for(;pt<lt.length;pt++)this.words[pt]=lt.words[pt];return this},k.prototype.add=function(it){var dt;return it.negative!==0&&this.negative===0?(it.negative=0,dt=this.sub(it),it.negative^=1,dt):it.negative===0&&this.negative!==0?(this.negative=0,dt=it.sub(this),this.negative=1,dt):this.length>it.length?this.clone().iadd(it):it.clone().iadd(this)},k.prototype.isub=function(it){if(it.negative!==0){it.negative=0;var dt=this.iadd(it);return it.negative=1,dt._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(it),this.negative=1,this._normSign();var lt=this.cmp(it);if(lt===0)return this.negative=0,this.length=1,this.words[0]=0,this;var gt,Et;lt>0?(gt=this,Et=it):(gt=it,Et=this);for(var pt=0,rt=0;rt<Et.length;rt++)dt=(gt.words[rt]|0)-(Et.words[rt]|0)+pt,pt=dt>>26,this.words[rt]=dt&67108863;for(;pt!==0&&rt<gt.length;rt++)dt=(gt.words[rt]|0)+pt,pt=dt>>26,this.words[rt]=dt&67108863;if(pt===0&&rt<gt.length&&gt!==this)for(;rt<gt.length;rt++)this.words[rt]=gt.words[rt];return this.length=Math.max(this.length,rt),gt!==this&&(this.negative=1),this._strip()},k.prototype.sub=function(it){return this.clone().isub(it)};function Dt(tt,it,dt){dt.negative=it.negative^tt.negative;var lt=tt.length+it.length|0;dt.length=lt,lt=lt-1|0;var gt=tt.words[0]|0,Et=it.words[0]|0,pt=gt*Et,rt=pt&67108863,mt=pt/67108864|0;dt.words[0]=rt;for(var Lt=1;Lt<lt;Lt++){for(var Gt=mt>>>26,rr=mt&67108863,ir=Math.min(Lt,it.length-1),Wt=Math.max(0,Lt-tt.length+1);Wt<=ir;Wt++){var zt=Lt-Wt|0;gt=tt.words[zt]|0,Et=it.words[Wt]|0,pt=gt*Et+rr,Gt+=pt/67108864|0,rr=pt&67108863}dt.words[Lt]=rr|0,mt=Gt|0}return mt!==0?dt.words[Lt]=mt|0:dt.length--,dt._strip()}var Rt=function(it,dt,lt){var gt=it.words,Et=dt.words,pt=lt.words,rt=0,mt,Lt,Gt,rr=gt[0]|0,ir=rr&8191,Wt=rr>>>13,zt=gt[1]|0,wt=zt&8191,Vt=zt>>>13,Qt=gt[2]|0,Nt=Qt&8191,st=Qt>>>13,Ct=gt[3]|0,qt=Ct&8191,cr=Ct>>>13,dr=gt[4]|0,Er=dr&8191,Tr=dr>>>13,gr=gt[5]|0,Zr=gr&8191,Pr=gr>>>13,_r=gt[6]|0,St=_r&8191,Kt=_r>>>13,er=gt[7]|0,kr=er&8191,tr=er>>>13,bt=gt[8]|0,jt=bt&8191,Ut=bt>>>13,Ft=gt[9]|0,Ht=Ft&8191,or=Ft>>>13,vr=Et[0]|0,Ir=vr&8191,Sr=vr>>>13,Or=Et[1]|0,Cr=Or&8191,yt=Or>>>13,Bt=Et[2]|0,Zt=Bt&8191,yr=Bt>>>13,fr=Et[3]|0,Rr=fr&8191,Nr=fr>>>13,xr=Et[4]|0,Xr=xr&8191,Ar=xr>>>13,Br=Et[5]|0,rn=Br&8191,Dr=Br>>>13,qr=Et[6]|0,nn=qr&8191,$r=qr>>>13,Lr=Et[7]|0,Qr=Lr&8191,Ur=Lr>>>13,Jr=Et[8]|0,cn=Jr&8191,Fr=Jr>>>13,Vr=Et[9]|0,sn=Vr&8191,un=Vr>>>13;lt.negative=it.negative^dt.negative,lt.length=19,mt=Math.imul(ir,Ir),Lt=Math.imul(ir,Sr),Lt=Lt+Math.imul(Wt,Ir)|0,Gt=Math.imul(Wt,Sr);var yn=(rt+mt|0)+((Lt&8191)<<13)|0;rt=(Gt+(Lt>>>13)|0)+(yn>>>26)|0,yn&=67108863,mt=Math.imul(wt,Ir),Lt=Math.imul(wt,Sr),Lt=Lt+Math.imul(Vt,Ir)|0,Gt=Math.imul(Vt,Sr),mt=mt+Math.imul(ir,Cr)|0,Lt=Lt+Math.imul(ir,yt)|0,Lt=Lt+Math.imul(Wt,Cr)|0,Gt=Gt+Math.imul(Wt,yt)|0;var br=(rt+mt|0)+((Lt&8191)<<13)|0;rt=(Gt+(Lt>>>13)|0)+(br>>>26)|0,br&=67108863,mt=Math.imul(Nt,Ir),Lt=Math.imul(Nt,Sr),Lt=Lt+Math.imul(st,Ir)|0,Gt=Math.imul(st,Sr),mt=mt+Math.imul(wt,Cr)|0,Lt=Lt+Math.imul(wt,yt)|0,Lt=Lt+Math.imul(Vt,Cr)|0,Gt=Gt+Math.imul(Vt,yt)|0,mt=mt+Math.imul(ir,Zt)|0,Lt=Lt+Math.imul(ir,yr)|0,Lt=Lt+Math.imul(Wt,Zt)|0,Gt=Gt+Math.imul(Wt,yr)|0;var wr=(rt+mt|0)+((Lt&8191)<<13)|0;rt=(Gt+(Lt>>>13)|0)+(wr>>>26)|0,wr&=67108863,mt=Math.imul(qt,Ir),Lt=Math.imul(qt,Sr),Lt=Lt+Math.imul(cr,Ir)|0,Gt=Math.imul(cr,Sr),mt=mt+Math.imul(Nt,Cr)|0,Lt=Lt+Math.imul(Nt,yt)|0,Lt=Lt+Math.imul(st,Cr)|0,Gt=Gt+Math.imul(st,yt)|0,mt=mt+Math.imul(wt,Zt)|0,Lt=Lt+Math.imul(wt,yr)|0,Lt=Lt+Math.imul(Vt,Zt)|0,Gt=Gt+Math.imul(Vt,yr)|0,mt=mt+Math.imul(ir,Rr)|0,Lt=Lt+Math.imul(ir,Nr)|0,Lt=Lt+Math.imul(Wt,Rr)|0,Gt=Gt+Math.imul(Wt,Nr)|0;var Mr=(rt+mt|0)+((Lt&8191)<<13)|0;rt=(Gt+(Lt>>>13)|0)+(Mr>>>26)|0,Mr&=67108863,mt=Math.imul(Er,Ir),Lt=Math.imul(Er,Sr),Lt=Lt+Math.imul(Tr,Ir)|0,Gt=Math.imul(Tr,Sr),mt=mt+Math.imul(qt,Cr)|0,Lt=Lt+Math.imul(qt,yt)|0,Lt=Lt+Math.imul(cr,Cr)|0,Gt=Gt+Math.imul(cr,yt)|0,mt=mt+Math.imul(Nt,Zt)|0,Lt=Lt+Math.imul(Nt,yr)|0,Lt=Lt+Math.imul(st,Zt)|0,Gt=Gt+Math.imul(st,yr)|0,mt=mt+Math.imul(wt,Rr)|0,Lt=Lt+Math.imul(wt,Nr)|0,Lt=Lt+Math.imul(Vt,Rr)|0,Gt=Gt+Math.imul(Vt,Nr)|0,mt=mt+Math.imul(ir,Xr)|0,Lt=Lt+Math.imul(ir,Ar)|0,Lt=Lt+Math.imul(Wt,Xr)|0,Gt=Gt+Math.imul(Wt,Ar)|0;var Wr=(rt+mt|0)+((Lt&8191)<<13)|0;rt=(Gt+(Lt>>>13)|0)+(Wr>>>26)|0,Wr&=67108863,mt=Math.imul(Zr,Ir),Lt=Math.imul(Zr,Sr),Lt=Lt+Math.imul(Pr,Ir)|0,Gt=Math.imul(Pr,Sr),mt=mt+Math.imul(Er,Cr)|0,Lt=Lt+Math.imul(Er,yt)|0,Lt=Lt+Math.imul(Tr,Cr)|0,Gt=Gt+Math.imul(Tr,yt)|0,mt=mt+Math.imul(qt,Zt)|0,Lt=Lt+Math.imul(qt,yr)|0,Lt=Lt+Math.imul(cr,Zt)|0,Gt=Gt+Math.imul(cr,yr)|0,mt=mt+Math.imul(Nt,Rr)|0,Lt=Lt+Math.imul(Nt,Nr)|0,Lt=Lt+Math.imul(st,Rr)|0,Gt=Gt+Math.imul(st,Nr)|0,mt=mt+Math.imul(wt,Xr)|0,Lt=Lt+Math.imul(wt,Ar)|0,Lt=Lt+Math.imul(Vt,Xr)|0,Gt=Gt+Math.imul(Vt,Ar)|0,mt=mt+Math.imul(ir,rn)|0,Lt=Lt+Math.imul(ir,Dr)|0,Lt=Lt+Math.imul(Wt,rn)|0,Gt=Gt+Math.imul(Wt,Dr)|0;var Hr=(rt+mt|0)+((Lt&8191)<<13)|0;rt=(Gt+(Lt>>>13)|0)+(Hr>>>26)|0,Hr&=67108863,mt=Math.imul(St,Ir),Lt=Math.imul(St,Sr),Lt=Lt+Math.imul(Kt,Ir)|0,Gt=Math.imul(Kt,Sr),mt=mt+Math.imul(Zr,Cr)|0,Lt=Lt+Math.imul(Zr,yt)|0,Lt=Lt+Math.imul(Pr,Cr)|0,Gt=Gt+Math.imul(Pr,yt)|0,mt=mt+Math.imul(Er,Zt)|0,Lt=Lt+Math.imul(Er,yr)|0,Lt=Lt+Math.imul(Tr,Zt)|0,Gt=Gt+Math.imul(Tr,yr)|0,mt=mt+Math.imul(qt,Rr)|0,Lt=Lt+Math.imul(qt,Nr)|0,Lt=Lt+Math.imul(cr,Rr)|0,Gt=Gt+Math.imul(cr,Nr)|0,mt=mt+Math.imul(Nt,Xr)|0,Lt=Lt+Math.imul(Nt,Ar)|0,Lt=Lt+Math.imul(st,Xr)|0,Gt=Gt+Math.imul(st,Ar)|0,mt=mt+Math.imul(wt,rn)|0,Lt=Lt+Math.imul(wt,Dr)|0,Lt=Lt+Math.imul(Vt,rn)|0,Gt=Gt+Math.imul(Vt,Dr)|0,mt=mt+Math.imul(ir,nn)|0,Lt=Lt+Math.imul(ir,$r)|0,Lt=Lt+Math.imul(Wt,nn)|0,Gt=Gt+Math.imul(Wt,$r)|0;var Gr=(rt+mt|0)+((Lt&8191)<<13)|0;rt=(Gt+(Lt>>>13)|0)+(Gr>>>26)|0,Gr&=67108863,mt=Math.imul(kr,Ir),Lt=Math.imul(kr,Sr),Lt=Lt+Math.imul(tr,Ir)|0,Gt=Math.imul(tr,Sr),mt=mt+Math.imul(St,Cr)|0,Lt=Lt+Math.imul(St,yt)|0,Lt=Lt+Math.imul(Kt,Cr)|0,Gt=Gt+Math.imul(Kt,yt)|0,mt=mt+Math.imul(Zr,Zt)|0,Lt=Lt+Math.imul(Zr,yr)|0,Lt=Lt+Math.imul(Pr,Zt)|0,Gt=Gt+Math.imul(Pr,yr)|0,mt=mt+Math.imul(Er,Rr)|0,Lt=Lt+Math.imul(Er,Nr)|0,Lt=Lt+Math.imul(Tr,Rr)|0,Gt=Gt+Math.imul(Tr,Nr)|0,mt=mt+Math.imul(qt,Xr)|0,Lt=Lt+Math.imul(qt,Ar)|0,Lt=Lt+Math.imul(cr,Xr)|0,Gt=Gt+Math.imul(cr,Ar)|0,mt=mt+Math.imul(Nt,rn)|0,Lt=Lt+Math.imul(Nt,Dr)|0,Lt=Lt+Math.imul(st,rn)|0,Gt=Gt+Math.imul(st,Dr)|0,mt=mt+Math.imul(wt,nn)|0,Lt=Lt+Math.imul(wt,$r)|0,Lt=Lt+Math.imul(Vt,nn)|0,Gt=Gt+Math.imul(Vt,$r)|0,mt=mt+Math.imul(ir,Qr)|0,Lt=Lt+Math.imul(ir,Ur)|0,Lt=Lt+Math.imul(Wt,Qr)|0,Gt=Gt+Math.imul(Wt,Ur)|0;var Yr=(rt+mt|0)+((Lt&8191)<<13)|0;rt=(Gt+(Lt>>>13)|0)+(Yr>>>26)|0,Yr&=67108863,mt=Math.imul(jt,Ir),Lt=Math.imul(jt,Sr),Lt=Lt+Math.imul(Ut,Ir)|0,Gt=Math.imul(Ut,Sr),mt=mt+Math.imul(kr,Cr)|0,Lt=Lt+Math.imul(kr,yt)|0,Lt=Lt+Math.imul(tr,Cr)|0,Gt=Gt+Math.imul(tr,yt)|0,mt=mt+Math.imul(St,Zt)|0,Lt=Lt+Math.imul(St,yr)|0,Lt=Lt+Math.imul(Kt,Zt)|0,Gt=Gt+Math.imul(Kt,yr)|0,mt=mt+Math.imul(Zr,Rr)|0,Lt=Lt+Math.imul(Zr,Nr)|0,Lt=Lt+Math.imul(Pr,Rr)|0,Gt=Gt+Math.imul(Pr,Nr)|0,mt=mt+Math.imul(Er,Xr)|0,Lt=Lt+Math.imul(Er,Ar)|0,Lt=Lt+Math.imul(Tr,Xr)|0,Gt=Gt+Math.imul(Tr,Ar)|0,mt=mt+Math.imul(qt,rn)|0,Lt=Lt+Math.imul(qt,Dr)|0,Lt=Lt+Math.imul(cr,rn)|0,Gt=Gt+Math.imul(cr,Dr)|0,mt=mt+Math.imul(Nt,nn)|0,Lt=Lt+Math.imul(Nt,$r)|0,Lt=Lt+Math.imul(st,nn)|0,Gt=Gt+Math.imul(st,$r)|0,mt=mt+Math.imul(wt,Qr)|0,Lt=Lt+Math.imul(wt,Ur)|0,Lt=Lt+Math.imul(Vt,Qr)|0,Gt=Gt+Math.imul(Vt,Ur)|0,mt=mt+Math.imul(ir,cn)|0,Lt=Lt+Math.imul(ir,Fr)|0,Lt=Lt+Math.imul(Wt,cn)|0,Gt=Gt+Math.imul(Wt,Fr)|0;var en=(rt+mt|0)+((Lt&8191)<<13)|0;rt=(Gt+(Lt>>>13)|0)+(en>>>26)|0,en&=67108863,mt=Math.imul(Ht,Ir),Lt=Math.imul(Ht,Sr),Lt=Lt+Math.imul(or,Ir)|0,Gt=Math.imul(or,Sr),mt=mt+Math.imul(jt,Cr)|0,Lt=Lt+Math.imul(jt,yt)|0,Lt=Lt+Math.imul(Ut,Cr)|0,Gt=Gt+Math.imul(Ut,yt)|0,mt=mt+Math.imul(kr,Zt)|0,Lt=Lt+Math.imul(kr,yr)|0,Lt=Lt+Math.imul(tr,Zt)|0,Gt=Gt+Math.imul(tr,yr)|0,mt=mt+Math.imul(St,Rr)|0,Lt=Lt+Math.imul(St,Nr)|0,Lt=Lt+Math.imul(Kt,Rr)|0,Gt=Gt+Math.imul(Kt,Nr)|0,mt=mt+Math.imul(Zr,Xr)|0,Lt=Lt+Math.imul(Zr,Ar)|0,Lt=Lt+Math.imul(Pr,Xr)|0,Gt=Gt+Math.imul(Pr,Ar)|0,mt=mt+Math.imul(Er,rn)|0,Lt=Lt+Math.imul(Er,Dr)|0,Lt=Lt+Math.imul(Tr,rn)|0,Gt=Gt+Math.imul(Tr,Dr)|0,mt=mt+Math.imul(qt,nn)|0,Lt=Lt+Math.imul(qt,$r)|0,Lt=Lt+Math.imul(cr,nn)|0,Gt=Gt+Math.imul(cr,$r)|0,mt=mt+Math.imul(Nt,Qr)|0,Lt=Lt+Math.imul(Nt,Ur)|0,Lt=Lt+Math.imul(st,Qr)|0,Gt=Gt+Math.imul(st,Ur)|0,mt=mt+Math.imul(wt,cn)|0,Lt=Lt+Math.imul(wt,Fr)|0,Lt=Lt+Math.imul(Vt,cn)|0,Gt=Gt+Math.imul(Vt,Fr)|0,mt=mt+Math.imul(ir,sn)|0,Lt=Lt+Math.imul(ir,un)|0,Lt=Lt+Math.imul(Wt,sn)|0,Gt=Gt+Math.imul(Wt,un)|0;var jr=(rt+mt|0)+((Lt&8191)<<13)|0;rt=(Gt+(Lt>>>13)|0)+(jr>>>26)|0,jr&=67108863,mt=Math.imul(Ht,Cr),Lt=Math.imul(Ht,yt),Lt=Lt+Math.imul(or,Cr)|0,Gt=Math.imul(or,yt),mt=mt+Math.imul(jt,Zt)|0,Lt=Lt+Math.imul(jt,yr)|0,Lt=Lt+Math.imul(Ut,Zt)|0,Gt=Gt+Math.imul(Ut,yr)|0,mt=mt+Math.imul(kr,Rr)|0,Lt=Lt+Math.imul(kr,Nr)|0,Lt=Lt+Math.imul(tr,Rr)|0,Gt=Gt+Math.imul(tr,Nr)|0,mt=mt+Math.imul(St,Xr)|0,Lt=Lt+Math.imul(St,Ar)|0,Lt=Lt+Math.imul(Kt,Xr)|0,Gt=Gt+Math.imul(Kt,Ar)|0,mt=mt+Math.imul(Zr,rn)|0,Lt=Lt+Math.imul(Zr,Dr)|0,Lt=Lt+Math.imul(Pr,rn)|0,Gt=Gt+Math.imul(Pr,Dr)|0,mt=mt+Math.imul(Er,nn)|0,Lt=Lt+Math.imul(Er,$r)|0,Lt=Lt+Math.imul(Tr,nn)|0,Gt=Gt+Math.imul(Tr,$r)|0,mt=mt+Math.imul(qt,Qr)|0,Lt=Lt+Math.imul(qt,Ur)|0,Lt=Lt+Math.imul(cr,Qr)|0,Gt=Gt+Math.imul(cr,Ur)|0,mt=mt+Math.imul(Nt,cn)|0,Lt=Lt+Math.imul(Nt,Fr)|0,Lt=Lt+Math.imul(st,cn)|0,Gt=Gt+Math.imul(st,Fr)|0,mt=mt+Math.imul(wt,sn)|0,Lt=Lt+Math.imul(wt,un)|0,Lt=Lt+Math.imul(Vt,sn)|0,Gt=Gt+Math.imul(Vt,un)|0;var pn=(rt+mt|0)+((Lt&8191)<<13)|0;rt=(Gt+(Lt>>>13)|0)+(pn>>>26)|0,pn&=67108863,mt=Math.imul(Ht,Zt),Lt=Math.imul(Ht,yr),Lt=Lt+Math.imul(or,Zt)|0,Gt=Math.imul(or,yr),mt=mt+Math.imul(jt,Rr)|0,Lt=Lt+Math.imul(jt,Nr)|0,Lt=Lt+Math.imul(Ut,Rr)|0,Gt=Gt+Math.imul(Ut,Nr)|0,mt=mt+Math.imul(kr,Xr)|0,Lt=Lt+Math.imul(kr,Ar)|0,Lt=Lt+Math.imul(tr,Xr)|0,Gt=Gt+Math.imul(tr,Ar)|0,mt=mt+Math.imul(St,rn)|0,Lt=Lt+Math.imul(St,Dr)|0,Lt=Lt+Math.imul(Kt,rn)|0,Gt=Gt+Math.imul(Kt,Dr)|0,mt=mt+Math.imul(Zr,nn)|0,Lt=Lt+Math.imul(Zr,$r)|0,Lt=Lt+Math.imul(Pr,nn)|0,Gt=Gt+Math.imul(Pr,$r)|0,mt=mt+Math.imul(Er,Qr)|0,Lt=Lt+Math.imul(Er,Ur)|0,Lt=Lt+Math.imul(Tr,Qr)|0,Gt=Gt+Math.imul(Tr,Ur)|0,mt=mt+Math.imul(qt,cn)|0,Lt=Lt+Math.imul(qt,Fr)|0,Lt=Lt+Math.imul(cr,cn)|0,Gt=Gt+Math.imul(cr,Fr)|0,mt=mt+Math.imul(Nt,sn)|0,Lt=Lt+Math.imul(Nt,un)|0,Lt=Lt+Math.imul(st,sn)|0,Gt=Gt+Math.imul(st,un)|0;var mn=(rt+mt|0)+((Lt&8191)<<13)|0;rt=(Gt+(Lt>>>13)|0)+(mn>>>26)|0,mn&=67108863,mt=Math.imul(Ht,Rr),Lt=Math.imul(Ht,Nr),Lt=Lt+Math.imul(or,Rr)|0,Gt=Math.imul(or,Nr),mt=mt+Math.imul(jt,Xr)|0,Lt=Lt+Math.imul(jt,Ar)|0,Lt=Lt+Math.imul(Ut,Xr)|0,Gt=Gt+Math.imul(Ut,Ar)|0,mt=mt+Math.imul(kr,rn)|0,Lt=Lt+Math.imul(kr,Dr)|0,Lt=Lt+Math.imul(tr,rn)|0,Gt=Gt+Math.imul(tr,Dr)|0,mt=mt+Math.imul(St,nn)|0,Lt=Lt+Math.imul(St,$r)|0,Lt=Lt+Math.imul(Kt,nn)|0,Gt=Gt+Math.imul(Kt,$r)|0,mt=mt+Math.imul(Zr,Qr)|0,Lt=Lt+Math.imul(Zr,Ur)|0,Lt=Lt+Math.imul(Pr,Qr)|0,Gt=Gt+Math.imul(Pr,Ur)|0,mt=mt+Math.imul(Er,cn)|0,Lt=Lt+Math.imul(Er,Fr)|0,Lt=Lt+Math.imul(Tr,cn)|0,Gt=Gt+Math.imul(Tr,Fr)|0,mt=mt+Math.imul(qt,sn)|0,Lt=Lt+Math.imul(qt,un)|0,Lt=Lt+Math.imul(cr,sn)|0,Gt=Gt+Math.imul(cr,un)|0;var hn=(rt+mt|0)+((Lt&8191)<<13)|0;rt=(Gt+(Lt>>>13)|0)+(hn>>>26)|0,hn&=67108863,mt=Math.imul(Ht,Xr),Lt=Math.imul(Ht,Ar),Lt=Lt+Math.imul(or,Xr)|0,Gt=Math.imul(or,Ar),mt=mt+Math.imul(jt,rn)|0,Lt=Lt+Math.imul(jt,Dr)|0,Lt=Lt+Math.imul(Ut,rn)|0,Gt=Gt+Math.imul(Ut,Dr)|0,mt=mt+Math.imul(kr,nn)|0,Lt=Lt+Math.imul(kr,$r)|0,Lt=Lt+Math.imul(tr,nn)|0,Gt=Gt+Math.imul(tr,$r)|0,mt=mt+Math.imul(St,Qr)|0,Lt=Lt+Math.imul(St,Ur)|0,Lt=Lt+Math.imul(Kt,Qr)|0,Gt=Gt+Math.imul(Kt,Ur)|0,mt=mt+Math.imul(Zr,cn)|0,Lt=Lt+Math.imul(Zr,Fr)|0,Lt=Lt+Math.imul(Pr,cn)|0,Gt=Gt+Math.imul(Pr,Fr)|0,mt=mt+Math.imul(Er,sn)|0,Lt=Lt+Math.imul(Er,un)|0,Lt=Lt+Math.imul(Tr,sn)|0,Gt=Gt+Math.imul(Tr,un)|0;var fn=(rt+mt|0)+((Lt&8191)<<13)|0;rt=(Gt+(Lt>>>13)|0)+(fn>>>26)|0,fn&=67108863,mt=Math.imul(Ht,rn),Lt=Math.imul(Ht,Dr),Lt=Lt+Math.imul(or,rn)|0,Gt=Math.imul(or,Dr),mt=mt+Math.imul(jt,nn)|0,Lt=Lt+Math.imul(jt,$r)|0,Lt=Lt+Math.imul(Ut,nn)|0,Gt=Gt+Math.imul(Ut,$r)|0,mt=mt+Math.imul(kr,Qr)|0,Lt=Lt+Math.imul(kr,Ur)|0,Lt=Lt+Math.imul(tr,Qr)|0,Gt=Gt+Math.imul(tr,Ur)|0,mt=mt+Math.imul(St,cn)|0,Lt=Lt+Math.imul(St,Fr)|0,Lt=Lt+Math.imul(Kt,cn)|0,Gt=Gt+Math.imul(Kt,Fr)|0,mt=mt+Math.imul(Zr,sn)|0,Lt=Lt+Math.imul(Zr,un)|0,Lt=Lt+Math.imul(Pr,sn)|0,Gt=Gt+Math.imul(Pr,un)|0;var vn=(rt+mt|0)+((Lt&8191)<<13)|0;rt=(Gt+(Lt>>>13)|0)+(vn>>>26)|0,vn&=67108863,mt=Math.imul(Ht,nn),Lt=Math.imul(Ht,$r),Lt=Lt+Math.imul(or,nn)|0,Gt=Math.imul(or,$r),mt=mt+Math.imul(jt,Qr)|0,Lt=Lt+Math.imul(jt,Ur)|0,Lt=Lt+Math.imul(Ut,Qr)|0,Gt=Gt+Math.imul(Ut,Ur)|0,mt=mt+Math.imul(kr,cn)|0,Lt=Lt+Math.imul(kr,Fr)|0,Lt=Lt+Math.imul(tr,cn)|0,Gt=Gt+Math.imul(tr,Fr)|0,mt=mt+Math.imul(St,sn)|0,Lt=Lt+Math.imul(St,un)|0,Lt=Lt+Math.imul(Kt,sn)|0,Gt=Gt+Math.imul(Kt,un)|0;var gn=(rt+mt|0)+((Lt&8191)<<13)|0;rt=(Gt+(Lt>>>13)|0)+(gn>>>26)|0,gn&=67108863,mt=Math.imul(Ht,Qr),Lt=Math.imul(Ht,Ur),Lt=Lt+Math.imul(or,Qr)|0,Gt=Math.imul(or,Ur),mt=mt+Math.imul(jt,cn)|0,Lt=Lt+Math.imul(jt,Fr)|0,Lt=Lt+Math.imul(Ut,cn)|0,Gt=Gt+Math.imul(Ut,Fr)|0,mt=mt+Math.imul(kr,sn)|0,Lt=Lt+Math.imul(kr,un)|0,Lt=Lt+Math.imul(tr,sn)|0,Gt=Gt+Math.imul(tr,un)|0;var Sn=(rt+mt|0)+((Lt&8191)<<13)|0;rt=(Gt+(Lt>>>13)|0)+(Sn>>>26)|0,Sn&=67108863,mt=Math.imul(Ht,cn),Lt=Math.imul(Ht,Fr),Lt=Lt+Math.imul(or,cn)|0,Gt=Math.imul(or,Fr),mt=mt+Math.imul(jt,sn)|0,Lt=Lt+Math.imul(jt,un)|0,Lt=Lt+Math.imul(Ut,sn)|0,Gt=Gt+Math.imul(Ut,un)|0;var kn=(rt+mt|0)+((Lt&8191)<<13)|0;rt=(Gt+(Lt>>>13)|0)+(kn>>>26)|0,kn&=67108863,mt=Math.imul(Ht,sn),Lt=Math.imul(Ht,un),Lt=Lt+Math.imul(or,sn)|0,Gt=Math.imul(or,un);var wn=(rt+mt|0)+((Lt&8191)<<13)|0;return rt=(Gt+(Lt>>>13)|0)+(wn>>>26)|0,wn&=67108863,pt[0]=yn,pt[1]=br,pt[2]=wr,pt[3]=Mr,pt[4]=Wr,pt[5]=Hr,pt[6]=Gr,pt[7]=Yr,pt[8]=en,pt[9]=jr,pt[10]=pn,pt[11]=mn,pt[12]=hn,pt[13]=fn,pt[14]=vn,pt[15]=gn,pt[16]=Sn,pt[17]=kn,pt[18]=wn,rt!==0&&(pt[19]=rt,lt.length++),lt};Math.imul||(Rt=Dt);function xt(tt,it,dt){dt.negative=it.negative^tt.negative,dt.length=tt.length+it.length;for(var lt=0,gt=0,Et=0;Et<dt.length-1;Et++){var pt=gt;gt=0;for(var rt=lt&67108863,mt=Math.min(Et,it.length-1),Lt=Math.max(0,Et-tt.length+1);Lt<=mt;Lt++){var Gt=Et-Lt,rr=tt.words[Gt]|0,ir=it.words[Lt]|0,Wt=rr*ir,zt=Wt&67108863;pt=pt+(Wt/67108864|0)|0,zt=zt+rt|0,rt=zt&67108863,pt=pt+(zt>>>26)|0,gt+=pt>>>26,pt&=67108863}dt.words[Et]=rt,lt=pt,pt=gt}return lt!==0?dt.words[Et]=lt:dt.length--,dt._strip()}function Jt(tt,it,dt){return xt(tt,it,dt)}k.prototype.mulTo=function(it,dt){var lt,gt=this.length+it.length;return this.length===10&&it.length===10?lt=Rt(this,it,dt):gt<63?lt=Dt(this,it,dt):gt<1024?lt=xt(this,it,dt):lt=Jt(this,it,dt),lt},k.prototype.mul=function(it){var dt=new k(null);return dt.words=new Array(this.length+it.length),this.mulTo(it,dt)},k.prototype.mulf=function(it){var dt=new k(null);return dt.words=new Array(this.length+it.length),Jt(this,it,dt)},k.prototype.imul=function(it){return this.clone().mulTo(it,this)},k.prototype.imuln=function(it){var dt=it<0;dt&&(it=-it),_(typeof it=="number"),_(it<67108864);for(var lt=0,gt=0;gt<this.length;gt++){var Et=(this.words[gt]|0)*it,pt=(Et&67108863)+(lt&67108863);lt>>=26,lt+=Et/67108864|0,lt+=pt>>>26,this.words[gt]=pt&67108863}return lt!==0&&(this.words[gt]=lt,this.length++),dt?this.ineg():this},k.prototype.muln=function(it){return this.clone().imuln(it)},k.prototype.sqr=function(){return this.mul(this)},k.prototype.isqr=function(){return this.imul(this.clone())},k.prototype.pow=function(it){var dt=Mt(it);if(dt.length===0)return new k(1);for(var lt=this,gt=0;gt<dt.length&&dt[gt]===0;gt++,lt=lt.sqr());if(++gt<dt.length)for(var Et=lt.sqr();gt<dt.length;gt++,Et=Et.sqr())dt[gt]!==0&&(lt=lt.mul(Et));return lt},k.prototype.iushln=function(it){_(typeof it=="number"&&it>=0);var dt=it%26,lt=(it-dt)/26,gt=67108863>>>26-dt<<26-dt,Et;if(dt!==0){var pt=0;for(Et=0;Et<this.length;Et++){var rt=this.words[Et]&gt,mt=(this.words[Et]|0)-rt<<dt;this.words[Et]=mt|pt,pt=rt>>>26-dt}pt&&(this.words[Et]=pt,this.length++)}if(lt!==0){for(Et=this.length-1;Et>=0;Et--)this.words[Et+lt]=this.words[Et];for(Et=0;Et<lt;Et++)this.words[Et]=0;this.length+=lt}return this._strip()},k.prototype.ishln=function(it){return _(this.negative===0),this.iushln(it)},k.prototype.iushrn=function(it,dt,lt){_(typeof it=="number"&&it>=0);var gt;dt?gt=(dt-dt%26)/26:gt=0;var Et=it%26,pt=Math.min((it-Et)/26,this.length),rt=67108863^67108863>>>Et<<Et,mt=lt;if(gt-=pt,gt=Math.max(0,gt),mt){for(var Lt=0;Lt<pt;Lt++)mt.words[Lt]=this.words[Lt];mt.length=pt}if(pt!==0)if(this.length>pt)for(this.length-=pt,Lt=0;Lt<this.length;Lt++)this.words[Lt]=this.words[Lt+pt];else this.words[0]=0,this.length=1;var Gt=0;for(Lt=this.length-1;Lt>=0&&(Gt!==0||Lt>=gt);Lt--){var rr=this.words[Lt]|0;this.words[Lt]=Gt<<26-Et|rr>>>Et,Gt=rr&rt}return mt&&Gt!==0&&(mt.words[mt.length++]=Gt),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},k.prototype.ishrn=function(it,dt,lt){return _(this.negative===0),this.iushrn(it,dt,lt)},k.prototype.shln=function(it){return this.clone().ishln(it)},k.prototype.ushln=function(it){return this.clone().iushln(it)},k.prototype.shrn=function(it){return this.clone().ishrn(it)},k.prototype.ushrn=function(it){return this.clone().iushrn(it)},k.prototype.testn=function(it){_(typeof it=="number"&&it>=0);var dt=it%26,lt=(it-dt)/26,gt=1<<dt;if(this.length<=lt)return!1;var Et=this.words[lt];return!!(Et&gt)},k.prototype.imaskn=function(it){_(typeof it=="number"&&it>=0);var dt=it%26,lt=(it-dt)/26;if(_(this.negative===0,"imaskn works only with positive numbers"),this.length<=lt)return this;if(dt!==0&&lt++,this.length=Math.min(lt,this.length),dt!==0){var gt=67108863^67108863>>>dt<<dt;this.words[this.length-1]&=gt}return this._strip()},k.prototype.maskn=function(it){return this.clone().imaskn(it)},k.prototype.iaddn=function(it){return _(typeof it=="number"),_(it<67108864),it<0?this.isubn(-it):this.negative!==0?this.length===1&&(this.words[0]|0)<=it?(this.words[0]=it-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(it),this.negative=1,this):this._iaddn(it)},k.prototype._iaddn=function(it){this.words[0]+=it;for(var dt=0;dt<this.length&&this.words[dt]>=67108864;dt++)this.words[dt]-=67108864,dt===this.length-1?this.words[dt+1]=1:this.words[dt+1]++;return this.length=Math.max(this.length,dt+1),this},k.prototype.isubn=function(it){if(_(typeof it=="number"),_(it<67108864),it<0)return this.iaddn(-it);if(this.negative!==0)return this.negative=0,this.iaddn(it),this.negative=1,this;if(this.words[0]-=it,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var dt=0;dt<this.length&&this.words[dt]<0;dt++)this.words[dt]+=67108864,this.words[dt+1]-=1;return this._strip()},k.prototype.addn=function(it){return this.clone().iaddn(it)},k.prototype.subn=function(it){return this.clone().isubn(it)},k.prototype.iabs=function(){return this.negative=0,this},k.prototype.abs=function(){return this.clone().iabs()},k.prototype._ishlnsubmul=function(it,dt,lt){var gt=it.length+lt,Et;this._expand(gt);var pt,rt=0;for(Et=0;Et<it.length;Et++){pt=(this.words[Et+lt]|0)+rt;var mt=(it.words[Et]|0)*dt;pt-=mt&67108863,rt=(pt>>26)-(mt/67108864|0),this.words[Et+lt]=pt&67108863}for(;Et<this.length-lt;Et++)pt=(this.words[Et+lt]|0)+rt,rt=pt>>26,this.words[Et+lt]=pt&67108863;if(rt===0)return this._strip();for(_(rt===-1),rt=0,Et=0;Et<this.length;Et++)pt=-(this.words[Et]|0)+rt,rt=pt>>26,this.words[Et]=pt&67108863;return this.negative=1,this._strip()},k.prototype._wordDiv=function(it,dt){var lt=this.length-it.length,gt=this.clone(),Et=it,pt=Et.words[Et.length-1]|0,rt=this._countBits(pt);lt=26-rt,lt!==0&&(Et=Et.ushln(lt),gt.iushln(lt),pt=Et.words[Et.length-1]|0);var mt=gt.length-Et.length,Lt;if(dt!=="mod"){Lt=new k(null),Lt.length=mt+1,Lt.words=new Array(Lt.length);for(var Gt=0;Gt<Lt.length;Gt++)Lt.words[Gt]=0}var rr=gt.clone()._ishlnsubmul(Et,1,mt);rr.negative===0&&(gt=rr,Lt&&(Lt.words[mt]=1));for(var ir=mt-1;ir>=0;ir--){var Wt=(gt.words[Et.length+ir]|0)*67108864+(gt.words[Et.length+ir-1]|0);for(Wt=Math.min(Wt/pt|0,67108863),gt._ishlnsubmul(Et,Wt,ir);gt.negative!==0;)Wt--,gt.negative=0,gt._ishlnsubmul(Et,1,ir),gt.isZero()||(gt.negative^=1);Lt&&(Lt.words[ir]=Wt)}return Lt&&Lt._strip(),gt._strip(),dt!=="div"&&lt!==0&&gt.iushrn(lt),{div:Lt||null,mod:gt}},k.prototype.divmod=function(it,dt,lt){if(_(!it.isZero()),this.isZero())return{div:new k(0),mod:new k(0)};var gt,Et,pt;return this.negative!==0&&it.negative===0?(pt=this.neg().divmod(it,dt),dt!=="mod"&&(gt=pt.div.neg()),dt!=="div"&&(Et=pt.mod.neg(),lt&&Et.negative!==0&&Et.iadd(it)),{div:gt,mod:Et}):this.negative===0&&it.negative!==0?(pt=this.divmod(it.neg(),dt),dt!=="mod"&&(gt=pt.div.neg()),{div:gt,mod:pt.mod}):this.negative&it.negative?(pt=this.neg().divmod(it.neg(),dt),dt!=="div"&&(Et=pt.mod.neg(),lt&&Et.negative!==0&&Et.isub(it)),{div:pt.div,mod:Et}):it.length>this.length||this.cmp(it)<0?{div:new k(0),mod:this}:it.length===1?dt==="div"?{div:this.divn(it.words[0]),mod:null}:dt==="mod"?{div:null,mod:new k(this.modrn(it.words[0]))}:{div:this.divn(it.words[0]),mod:new k(this.modrn(it.words[0]))}:this._wordDiv(it,dt)},k.prototype.div=function(it){return this.divmod(it,"div",!1).div},k.prototype.mod=function(it){return this.divmod(it,"mod",!1).mod},k.prototype.umod=function(it){return this.divmod(it,"mod",!0).mod},k.prototype.divRound=function(it){var dt=this.divmod(it);if(dt.mod.isZero())return dt.div;var lt=dt.div.negative!==0?dt.mod.isub(it):dt.mod,gt=it.ushrn(1),Et=it.andln(1),pt=lt.cmp(gt);return pt<0||Et===1&&pt===0?dt.div:dt.div.negative!==0?dt.div.isubn(1):dt.div.iaddn(1)},k.prototype.modrn=function(it){var dt=it<0;dt&&(it=-it),_(it<=67108863);for(var lt=(1<<26)%it,gt=0,Et=this.length-1;Et>=0;Et--)gt=(lt*gt+(this.words[Et]|0))%it;return dt?-gt:gt},k.prototype.modn=function(it){return this.modrn(it)},k.prototype.idivn=function(it){var dt=it<0;dt&&(it=-it),_(it<=67108863);for(var lt=0,gt=this.length-1;gt>=0;gt--){var Et=(this.words[gt]|0)+lt*67108864;this.words[gt]=Et/it|0,lt=Et%it}return this._strip(),dt?this.ineg():this},k.prototype.divn=function(it){return this.clone().idivn(it)},k.prototype.egcd=function(it){_(it.negative===0),_(!it.isZero());var dt=this,lt=it.clone();dt.negative!==0?dt=dt.umod(it):dt=dt.clone();for(var gt=new k(1),Et=new k(0),pt=new k(0),rt=new k(1),mt=0;dt.isEven()&&lt.isEven();)dt.iushrn(1),lt.iushrn(1),++mt;for(var Lt=lt.clone(),Gt=dt.clone();!dt.isZero();){for(var rr=0,ir=1;!(dt.words[0]&ir)&&rr<26;++rr,ir<<=1);if(rr>0)for(dt.iushrn(rr);rr-- >0;)(gt.isOdd()||Et.isOdd())&&(gt.iadd(Lt),Et.isub(Gt)),gt.iushrn(1),Et.iushrn(1);for(var Wt=0,zt=1;!(lt.words[0]&zt)&&Wt<26;++Wt,zt<<=1);if(Wt>0)for(lt.iushrn(Wt);Wt-- >0;)(pt.isOdd()||rt.isOdd())&&(pt.iadd(Lt),rt.isub(Gt)),pt.iushrn(1),rt.iushrn(1);dt.cmp(lt)>=0?(dt.isub(lt),gt.isub(pt),Et.isub(rt)):(lt.isub(dt),pt.isub(gt),rt.isub(Et))}return{a:pt,b:rt,gcd:lt.iushln(mt)}},k.prototype._invmp=function(it){_(it.negative===0),_(!it.isZero());var dt=this,lt=it.clone();dt.negative!==0?dt=dt.umod(it):dt=dt.clone();for(var gt=new k(1),Et=new k(0),pt=lt.clone();dt.cmpn(1)>0&&lt.cmpn(1)>0;){for(var rt=0,mt=1;!(dt.words[0]&mt)&&rt<26;++rt,mt<<=1);if(rt>0)for(dt.iushrn(rt);rt-- >0;)gt.isOdd()&&gt.iadd(pt),gt.iushrn(1);for(var Lt=0,Gt=1;!(lt.words[0]&Gt)&&Lt<26;++Lt,Gt<<=1);if(Lt>0)for(lt.iushrn(Lt);Lt-- >0;)Et.isOdd()&&Et.iadd(pt),Et.iushrn(1);dt.cmp(lt)>=0?(dt.isub(lt),gt.isub(Et)):(lt.isub(dt),Et.isub(gt))}var rr;return dt.cmpn(1)===0?rr=gt:rr=Et,rr.cmpn(0)<0&&rr.iadd(it),rr},k.prototype.gcd=function(it){if(this.isZero())return it.abs();if(it.isZero())return this.abs();var dt=this.clone(),lt=it.clone();dt.negative=0,lt.negative=0;for(var gt=0;dt.isEven()&&lt.isEven();gt++)dt.iushrn(1),lt.iushrn(1);do{for(;dt.isEven();)dt.iushrn(1);for(;lt.isEven();)lt.iushrn(1);var Et=dt.cmp(lt);if(Et<0){var pt=dt;dt=lt,lt=pt}else if(Et===0||lt.cmpn(1)===0)break;dt.isub(lt)}while(!0);return lt.iushln(gt)},k.prototype.invm=function(it){return this.egcd(it).a.umod(it)},k.prototype.isEven=function(){return(this.words[0]&1)===0},k.prototype.isOdd=function(){return(this.words[0]&1)===1},k.prototype.andln=function(it){return this.words[0]&it},k.prototype.bincn=function(it){_(typeof it=="number");var dt=it%26,lt=(it-dt)/26,gt=1<<dt;if(this.length<=lt)return this._expand(lt+1),this.words[lt]|=gt,this;for(var Et=gt,pt=lt;Et!==0&&pt<this.length;pt++){var rt=this.words[pt]|0;rt+=Et,Et=rt>>>26,rt&=67108863,this.words[pt]=rt}return Et!==0&&(this.words[pt]=Et,this.length++),this},k.prototype.isZero=function(){return this.length===1&&this.words[0]===0},k.prototype.cmpn=function(it){var dt=it<0;if(this.negative!==0&&!dt)return-1;if(this.negative===0&&dt)return 1;this._strip();var lt;if(this.length>1)lt=1;else{dt&&(it=-it),_(it<=67108863,"Number is too big");var gt=this.words[0]|0;lt=gt===it?0:gt<it?-1:1}return this.negative!==0?-lt|0:lt},k.prototype.cmp=function(it){if(this.negative!==0&&it.negative===0)return-1;if(this.negative===0&&it.negative!==0)return 1;var dt=this.ucmp(it);return this.negative!==0?-dt|0:dt},k.prototype.ucmp=function(it){if(this.length>it.length)return 1;if(this.length<it.length)return-1;for(var dt=0,lt=this.length-1;lt>=0;lt--){var gt=this.words[lt]|0,Et=it.words[lt]|0;if(gt!==Et){gt<Et?dt=-1:gt>Et&&(dt=1);break}}return dt},k.prototype.gtn=function(it){return this.cmpn(it)===1},k.prototype.gt=function(it){return this.cmp(it)===1},k.prototype.gten=function(it){return this.cmpn(it)>=0},k.prototype.gte=function(it){return this.cmp(it)>=0},k.prototype.ltn=function(it){return this.cmpn(it)===-1},k.prototype.lt=function(it){return this.cmp(it)===-1},k.prototype.lten=function(it){return this.cmpn(it)<=0},k.prototype.lte=function(it){return this.cmp(it)<=0},k.prototype.eqn=function(it){return this.cmpn(it)===0},k.prototype.eq=function(it){return this.cmp(it)===0},k.red=function(it){return new ut(it)},k.prototype.toRed=function(it){return _(!this.red,"Already a number in reduction context"),_(this.negative===0,"red works only with positives"),it.convertTo(this)._forceRed(it)},k.prototype.fromRed=function(){return _(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},k.prototype._forceRed=function(it){return this.red=it,this},k.prototype.forceRed=function(it){return _(!this.red,"Already a number in reduction context"),this._forceRed(it)},k.prototype.redAdd=function(it){return _(this.red,"redAdd works only with red numbers"),this.red.add(this,it)},k.prototype.redIAdd=function(it){return _(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,it)},k.prototype.redSub=function(it){return _(this.red,"redSub works only with red numbers"),this.red.sub(this,it)},k.prototype.redISub=function(it){return _(this.red,"redISub works only with red numbers"),this.red.isub(this,it)},k.prototype.redShl=function(it){return _(this.red,"redShl works only with red numbers"),this.red.shl(this,it)},k.prototype.redMul=function(it){return _(this.red,"redMul works only with red numbers"),this.red._verify2(this,it),this.red.mul(this,it)},k.prototype.redIMul=function(it){return _(this.red,"redMul works only with red numbers"),this.red._verify2(this,it),this.red.imul(this,it)},k.prototype.redSqr=function(){return _(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},k.prototype.redISqr=function(){return _(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},k.prototype.redSqrt=function(){return _(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},k.prototype.redInvm=function(){return _(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},k.prototype.redNeg=function(){return _(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},k.prototype.redPow=function(it){return _(this.red&&!it.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,it)};var ar={k256:null,p224:null,p192:null,p25519:null};function nr(tt,it){this.name=tt,this.p=new k(it,16),this.n=this.p.bitLength(),this.k=new k(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}nr.prototype._tmp=function(){var it=new k(null);return it.words=new Array(Math.ceil(this.n/13)),it},nr.prototype.ireduce=function(it){var dt=it,lt;do this.split(dt,this.tmp),dt=this.imulK(dt),dt=dt.iadd(this.tmp),lt=dt.bitLength();while(lt>this.n);var gt=lt<this.n?-1:dt.ucmp(this.p);return gt===0?(dt.words[0]=0,dt.length=1):gt>0?dt.isub(this.p):dt.strip!==void 0?dt.strip():dt._strip(),dt},nr.prototype.split=function(it,dt){it.iushrn(this.n,0,dt)},nr.prototype.imulK=function(it){return it.imul(this.k)};function pr(){nr.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}$(pr,nr),pr.prototype.split=function(it,dt){for(var lt=4194303,gt=Math.min(it.length,9),Et=0;Et<gt;Et++)dt.words[Et]=it.words[Et];if(dt.length=gt,it.length<=9){it.words[0]=0,it.length=1;return}var pt=it.words[9];for(dt.words[dt.length++]=pt&lt,Et=10;Et<it.length;Et++){var rt=it.words[Et]|0;it.words[Et-10]=(rt&lt)<<4|pt>>>22,pt=rt}pt>>>=22,it.words[Et-10]=pt,pt===0&&it.length>10?it.length-=10:it.length-=9},pr.prototype.imulK=function(it){it.words[it.length]=0,it.words[it.length+1]=0,it.length+=2;for(var dt=0,lt=0;lt<it.length;lt++){var gt=it.words[lt]|0;dt+=gt*977,it.words[lt]=dt&67108863,dt=gt*64+(dt/67108864|0)}return it.words[it.length-1]===0&&(it.length--,it.words[it.length-1]===0&&it.length--),it};function ur(){nr.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}$(ur,nr);function Ot(){nr.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}$(Ot,nr);function It(){nr.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}$(It,nr),It.prototype.imulK=function(it){for(var dt=0,lt=0;lt<it.length;lt++){var gt=(it.words[lt]|0)*19+dt,Et=gt&67108863;gt>>>=26,it.words[lt]=Et,dt=gt}return dt!==0&&(it.words[it.length++]=dt),it},k._prime=function(it){if(ar[it])return ar[it];var dt;if(it==="k256")dt=new pr;else if(it==="p224")dt=new ur;else if(it==="p192")dt=new Ot;else if(it==="p25519")dt=new It;else throw new Error("Unknown prime "+it);return ar[it]=dt,dt};function ut(tt){if(typeof tt=="string"){var it=k._prime(tt);this.m=it.p,this.prime=it}else _(tt.gtn(1),"modulus must be greater than 1"),this.m=tt,this.prime=null}ut.prototype._verify1=function(it){_(it.negative===0,"red works only with positives"),_(it.red,"red works only with red numbers")},ut.prototype._verify2=function(it,dt){_((it.negative|dt.negative)===0,"red works only with positives"),_(it.red&&it.red===dt.red,"red works only with red numbers")},ut.prototype.imod=function(it){return this.prime?this.prime.ireduce(it)._forceRed(this):(vt(it,it.umod(this.m)._forceRed(this)),it)},ut.prototype.neg=function(it){return it.isZero()?it.clone():this.m.sub(it)._forceRed(this)},ut.prototype.add=function(it,dt){this._verify2(it,dt);var lt=it.add(dt);return lt.cmp(this.m)>=0&&lt.isub(this.m),lt._forceRed(this)},ut.prototype.iadd=function(it,dt){this._verify2(it,dt);var lt=it.iadd(dt);return lt.cmp(this.m)>=0&&lt.isub(this.m),lt},ut.prototype.sub=function(it,dt){this._verify2(it,dt);var lt=it.sub(dt);return lt.cmpn(0)<0&&lt.iadd(this.m),lt._forceRed(this)},ut.prototype.isub=function(it,dt){this._verify2(it,dt);var lt=it.isub(dt);return lt.cmpn(0)<0&&lt.iadd(this.m),lt},ut.prototype.shl=function(it,dt){return this._verify1(it),this.imod(it.ushln(dt))},ut.prototype.imul=function(it,dt){return this._verify2(it,dt),this.imod(it.imul(dt))},ut.prototype.mul=function(it,dt){return this._verify2(it,dt),this.imod(it.mul(dt))},ut.prototype.isqr=function(it){return this.imul(it,it.clone())},ut.prototype.sqr=function(it){return this.mul(it,it)},ut.prototype.sqrt=function(it){if(it.isZero())return it.clone();var dt=this.m.andln(3);if(_(dt%2===1),dt===3){var lt=this.m.add(new k(1)).iushrn(2);return this.pow(it,lt)}for(var gt=this.m.subn(1),Et=0;!gt.isZero()&&gt.andln(1)===0;)Et++,gt.iushrn(1);_(!gt.isZero());var pt=new k(1).toRed(this),rt=pt.redNeg(),mt=this.m.subn(1).iushrn(1),Lt=this.m.bitLength();for(Lt=new k(2*Lt*Lt).toRed(this);this.pow(Lt,mt).cmp(rt)!==0;)Lt.redIAdd(rt);for(var Gt=this.pow(Lt,gt),rr=this.pow(it,gt.addn(1).iushrn(1)),ir=this.pow(it,gt),Wt=Et;ir.cmp(pt)!==0;){for(var zt=ir,wt=0;zt.cmp(pt)!==0;wt++)zt=zt.redSqr();_(wt<Wt);var Vt=this.pow(Gt,new k(1).iushln(Wt-wt-1));rr=rr.redMul(Vt),Gt=Vt.redSqr(),ir=ir.redMul(Gt),Wt=wt}return rr},ut.prototype.invm=function(it){var dt=it._invmp(this.m);return dt.negative!==0?(dt.negative=0,this.imod(dt).redNeg()):this.imod(dt)},ut.prototype.pow=function(it,dt){if(dt.isZero())return new k(1).toRed(this);if(dt.cmpn(1)===0)return it.clone();var lt=4,gt=new Array(1<<lt);gt[0]=new k(1).toRed(this),gt[1]=it;for(var Et=2;Et<gt.length;Et++)gt[Et]=this.mul(gt[Et-1],it);var pt=gt[0],rt=0,mt=0,Lt=dt.bitLength()%26;for(Lt===0&&(Lt=26),Et=dt.length-1;Et>=0;Et--){for(var Gt=dt.words[Et],rr=Lt-1;rr>=0;rr--){var ir=Gt>>rr&1;if(pt!==gt[0]&&(pt=this.sqr(pt)),ir===0&&rt===0){mt=0;continue}rt<<=1,rt|=ir,mt++,!(mt!==lt&&(Et!==0||rr!==0))&&(pt=this.mul(pt,gt[rt]),mt=0,rt=0)}Lt=26}return pt},ut.prototype.convertTo=function(it){var dt=it.umod(this.m);return dt===it?dt.clone():dt},ut.prototype.convertFrom=function(it){var dt=it.clone();return dt.red=null,dt},k.mont=function(it){return new _e(it)};function _e(tt){ut.call(this,tt),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new k(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}$(_e,ut),_e.prototype.convertTo=function(it){return this.imod(it.ushln(this.shift))},_e.prototype.convertFrom=function(it){var dt=this.imod(it.mul(this.rinv));return dt.red=null,dt},_e.prototype.imul=function(it,dt){if(it.isZero()||dt.isZero())return it.words[0]=0,it.length=1,it;var lt=it.imul(dt),gt=lt.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),Et=lt.isub(gt).iushrn(this.shift),pt=Et;return Et.cmp(this.m)>=0?pt=Et.isub(this.m):Et.cmpn(0)<0&&(pt=Et.iadd(this.m)),pt._forceRed(this)},_e.prototype.mul=function(it,dt){if(it.isZero()||dt.isZero())return new k(0)._forceRed(this);var lt=it.mul(dt),gt=lt.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),Et=lt.isub(gt).iushrn(this.shift),pt=Et;return Et.cmp(this.m)>=0?pt=Et.isub(this.m):Et.cmpn(0)<0&&(pt=Et.iadd(this.m)),pt._forceRed(this)},_e.prototype.invm=function(it){var dt=this.imod(it._invmp(this.m).mul(this.r2));return dt._forceRed(this)}})(a,commonjsGlobal$1)})(bn$4);var bnExports$4=bn$4.exports,BN$a=bnExports$4,randomBytes$1=browserExports;function blind(a){var c=getr(a),b=c.toRed(BN$a.mont(a.modulus)).redPow(new BN$a(a.publicExponent)).fromRed();return{blinder:b,unblinder:c.invm(a.modulus)}}function getr(a){var c=a.modulus.byteLength(),b;do b=new BN$a(randomBytes$1(c));while(b.cmp(a.modulus)>=0||!b.umod(a.prime1)||!b.umod(a.prime2));return b}function crt$2(a,c){var b=blind(c),_=c.modulus.byteLength(),$=new BN$a(a).mul(b.blinder).umod(c.modulus),k=$.toRed(BN$a.mont(c.prime1)),et=$.toRed(BN$a.mont(c.prime2)),nt=c.coefficient,ot=c.prime1,ht=c.prime2,vt=k.redPow(c.exponent1).fromRed(),_t=et.redPow(c.exponent2).fromRed(),kt=vt.isub(_t).imul(nt).umod(ot).imul(ht);return _t.iadd(kt).imul(b.unblinder).umod(c.modulus).toArrayLike(Buffer$O,"be",_)}crt$2.getr=getr;var browserifyRsa=crt$2,elliptic={};const name$1="elliptic",version$1="6.5.4",description$1="EC cryptography",main$1="lib/elliptic.js",files=["lib"],scripts$1={lint:"eslint lib test","lint:fix":"npm run lint -- --fix",unit:"istanbul test _mocha --reporter=spec test/index.js",test:"npm run lint && npm run unit",version:"grunt dist && git add dist/"},repository$1={type:"git",url:"git@github.com:indutny/elliptic"},keywords$1=["EC","Elliptic","curve","Cryptography"],author$1="Fedor Indutny <fedor@indutny.com>",license$1="MIT",bugs$1={url:"https://github.com/indutny/elliptic/issues"},homepage$1="https://github.com/indutny/elliptic",devDependencies$1={brfs:"^2.0.2",coveralls:"^3.1.0",eslint:"^7.6.0",grunt:"^1.2.1","grunt-browserify":"^5.3.0","grunt-cli":"^1.3.2","grunt-contrib-connect":"^3.0.0","grunt-contrib-copy":"^1.0.0","grunt-contrib-uglify":"^5.0.0","grunt-mocha-istanbul":"^5.0.2","grunt-saucelabs":"^9.0.1",istanbul:"^0.4.5",mocha:"^8.0.1"},dependencies$1={"bn.js":"^4.11.9",brorand:"^1.1.0","hash.js":"^1.0.0","hmac-drbg":"^1.0.1",inherits:"^2.0.4","minimalistic-assert":"^1.0.1","minimalistic-crypto-utils":"^1.0.1"},require$$0$1={name:name$1,version:version$1,description:description$1,main:main$1,files,scripts:scripts$1,repository:repository$1,keywords:keywords$1,author:author$1,license:license$1,bugs:bugs$1,homepage:homepage$1,devDependencies:devDependencies$1,dependencies:dependencies$1};var utils$v={},bn$3={exports:{}};bn$3.exports;(function(a){(function(c,b){function _(ut,_e){if(!ut)throw new Error(_e||"Assertion failed")}function $(ut,_e){ut.super_=_e;var tt=function(){};tt.prototype=_e.prototype,ut.prototype=new tt,ut.prototype.constructor=ut}function k(ut,_e,tt){if(k.isBN(ut))return ut;this.negative=0,this.words=null,this.length=0,this.red=null,ut!==null&&((_e==="le"||_e==="be")&&(tt=_e,_e=10),this._init(ut||0,_e||10,tt||"be"))}typeof c=="object"?c.exports=k:b.BN=k,k.BN=k,k.wordSize=26;var et;try{typeof window<"u"&&typeof window.Buffer<"u"?et=window.Buffer:et=require$$0$2.Buffer}catch{}k.isBN=function(_e){return _e instanceof k?!0:_e!==null&&typeof _e=="object"&&_e.constructor.wordSize===k.wordSize&&Array.isArray(_e.words)},k.max=function(_e,tt){return _e.cmp(tt)>0?_e:tt},k.min=function(_e,tt){return _e.cmp(tt)<0?_e:tt},k.prototype._init=function(_e,tt,it){if(typeof _e=="number")return this._initNumber(_e,tt,it);if(typeof _e=="object")return this._initArray(_e,tt,it);tt==="hex"&&(tt=16),_(tt===(tt|0)&&tt>=2&&tt<=36),_e=_e.toString().replace(/\s+/g,"");var dt=0;_e[0]==="-"&&(dt++,this.negative=1),dt<_e.length&&(tt===16?this._parseHex(_e,dt,it):(this._parseBase(_e,tt,dt),it==="le"&&this._initArray(this.toArray(),tt,it)))},k.prototype._initNumber=function(_e,tt,it){_e<0&&(this.negative=1,_e=-_e),_e<67108864?(this.words=[_e&67108863],this.length=1):_e<4503599627370496?(this.words=[_e&67108863,_e/67108864&67108863],this.length=2):(_(_e<9007199254740992),this.words=[_e&67108863,_e/67108864&67108863,1],this.length=3),it==="le"&&this._initArray(this.toArray(),tt,it)},k.prototype._initArray=function(_e,tt,it){if(_(typeof _e.length=="number"),_e.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(_e.length/3),this.words=new Array(this.length);for(var dt=0;dt<this.length;dt++)this.words[dt]=0;var lt,gt,Et=0;if(it==="be")for(dt=_e.length-1,lt=0;dt>=0;dt-=3)gt=_e[dt]|_e[dt-1]<<8|_e[dt-2]<<16,this.words[lt]|=gt<<Et&67108863,this.words[lt+1]=gt>>>26-Et&67108863,Et+=24,Et>=26&&(Et-=26,lt++);else if(it==="le")for(dt=0,lt=0;dt<_e.length;dt+=3)gt=_e[dt]|_e[dt+1]<<8|_e[dt+2]<<16,this.words[lt]|=gt<<Et&67108863,this.words[lt+1]=gt>>>26-Et&67108863,Et+=24,Et>=26&&(Et-=26,lt++);return this.strip()};function nt(ut,_e){var tt=ut.charCodeAt(_e);return tt>=65&&tt<=70?tt-55:tt>=97&&tt<=102?tt-87:tt-48&15}function ot(ut,_e,tt){var it=nt(ut,tt);return tt-1>=_e&&(it|=nt(ut,tt-1)<<4),it}k.prototype._parseHex=function(_e,tt,it){this.length=Math.ceil((_e.length-tt)/6),this.words=new Array(this.length);for(var dt=0;dt<this.length;dt++)this.words[dt]=0;var lt=0,gt=0,Et;if(it==="be")for(dt=_e.length-1;dt>=tt;dt-=2)Et=ot(_e,tt,dt)<<lt,this.words[gt]|=Et&67108863,lt>=18?(lt-=18,gt+=1,this.words[gt]|=Et>>>26):lt+=8;else{var pt=_e.length-tt;for(dt=pt%2===0?tt+1:tt;dt<_e.length;dt+=2)Et=ot(_e,tt,dt)<<lt,this.words[gt]|=Et&67108863,lt>=18?(lt-=18,gt+=1,this.words[gt]|=Et>>>26):lt+=8}this.strip()};function ht(ut,_e,tt,it){for(var dt=0,lt=Math.min(ut.length,tt),gt=_e;gt<lt;gt++){var Et=ut.charCodeAt(gt)-48;dt*=it,Et>=49?dt+=Et-49+10:Et>=17?dt+=Et-17+10:dt+=Et}return dt}k.prototype._parseBase=function(_e,tt,it){this.words=[0],this.length=1;for(var dt=0,lt=1;lt<=67108863;lt*=tt)dt++;dt--,lt=lt/tt|0;for(var gt=_e.length-it,Et=gt%dt,pt=Math.min(gt,gt-Et)+it,rt=0,mt=it;mt<pt;mt+=dt)rt=ht(_e,mt,mt+dt,tt),this.imuln(lt),this.words[0]+rt<67108864?this.words[0]+=rt:this._iaddn(rt);if(Et!==0){var Lt=1;for(rt=ht(_e,mt,_e.length,tt),mt=0;mt<Et;mt++)Lt*=tt;this.imuln(Lt),this.words[0]+rt<67108864?this.words[0]+=rt:this._iaddn(rt)}this.strip()},k.prototype.copy=function(_e){_e.words=new Array(this.length);for(var tt=0;tt<this.length;tt++)_e.words[tt]=this.words[tt];_e.length=this.length,_e.negative=this.negative,_e.red=this.red},k.prototype.clone=function(){var _e=new k(null);return this.copy(_e),_e},k.prototype._expand=function(_e){for(;this.length<_e;)this.words[this.length++]=0;return this},k.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},k.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},k.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var vt=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],_t=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],kt=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];k.prototype.toString=function(_e,tt){_e=_e||10,tt=tt|0||1;var it;if(_e===16||_e==="hex"){it="";for(var dt=0,lt=0,gt=0;gt<this.length;gt++){var Et=this.words[gt],pt=((Et<<dt|lt)&16777215).toString(16);lt=Et>>>24-dt&16777215,lt!==0||gt!==this.length-1?it=vt[6-pt.length]+pt+it:it=pt+it,dt+=2,dt>=26&&(dt-=26,gt--)}for(lt!==0&&(it=lt.toString(16)+it);it.length%tt!==0;)it="0"+it;return this.negative!==0&&(it="-"+it),it}if(_e===(_e|0)&&_e>=2&&_e<=36){var rt=_t[_e],mt=kt[_e];it="";var Lt=this.clone();for(Lt.negative=0;!Lt.isZero();){var Gt=Lt.modn(mt).toString(_e);Lt=Lt.idivn(mt),Lt.isZero()?it=Gt+it:it=vt[rt-Gt.length]+Gt+it}for(this.isZero()&&(it="0"+it);it.length%tt!==0;)it="0"+it;return this.negative!==0&&(it="-"+it),it}_(!1,"Base should be between 2 and 36")},k.prototype.toNumber=function(){var _e=this.words[0];return this.length===2?_e+=this.words[1]*67108864:this.length===3&&this.words[2]===1?_e+=4503599627370496+this.words[1]*67108864:this.length>2&&_(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-_e:_e},k.prototype.toJSON=function(){return this.toString(16)},k.prototype.toBuffer=function(_e,tt){return _(typeof et<"u"),this.toArrayLike(et,_e,tt)},k.prototype.toArray=function(_e,tt){return this.toArrayLike(Array,_e,tt)},k.prototype.toArrayLike=function(_e,tt,it){var dt=this.byteLength(),lt=it||Math.max(1,dt);_(dt<=lt,"byte array longer than desired length"),_(lt>0,"Requested array length <= 0"),this.strip();var gt=tt==="le",Et=new _e(lt),pt,rt,mt=this.clone();if(gt){for(rt=0;!mt.isZero();rt++)pt=mt.andln(255),mt.iushrn(8),Et[rt]=pt;for(;rt<lt;rt++)Et[rt]=0}else{for(rt=0;rt<lt-dt;rt++)Et[rt]=0;for(rt=0;!mt.isZero();rt++)pt=mt.andln(255),mt.iushrn(8),Et[lt-rt-1]=pt}return Et},Math.clz32?k.prototype._countBits=function(_e){return 32-Math.clz32(_e)}:k.prototype._countBits=function(_e){var tt=_e,it=0;return tt>=4096&&(it+=13,tt>>>=13),tt>=64&&(it+=7,tt>>>=7),tt>=8&&(it+=4,tt>>>=4),tt>=2&&(it+=2,tt>>>=2),it+tt},k.prototype._zeroBits=function(_e){if(_e===0)return 26;var tt=_e,it=0;return tt&8191||(it+=13,tt>>>=13),tt&127||(it+=7,tt>>>=7),tt&15||(it+=4,tt>>>=4),tt&3||(it+=2,tt>>>=2),tt&1||it++,it},k.prototype.bitLength=function(){var _e=this.words[this.length-1],tt=this._countBits(_e);return(this.length-1)*26+tt};function $t(ut){for(var _e=new Array(ut.bitLength()),tt=0;tt<_e.length;tt++){var it=tt/26|0,dt=tt%26;_e[tt]=(ut.words[it]&1<<dt)>>>dt}return _e}k.prototype.zeroBits=function(){if(this.isZero())return 0;for(var _e=0,tt=0;tt<this.length;tt++){var it=this._zeroBits(this.words[tt]);if(_e+=it,it!==26)break}return _e},k.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},k.prototype.toTwos=function(_e){return this.negative!==0?this.abs().inotn(_e).iaddn(1):this.clone()},k.prototype.fromTwos=function(_e){return this.testn(_e-1)?this.notn(_e).iaddn(1).ineg():this.clone()},k.prototype.isNeg=function(){return this.negative!==0},k.prototype.neg=function(){return this.clone().ineg()},k.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},k.prototype.iuor=function(_e){for(;this.length<_e.length;)this.words[this.length++]=0;for(var tt=0;tt<_e.length;tt++)this.words[tt]=this.words[tt]|_e.words[tt];return this.strip()},k.prototype.ior=function(_e){return _((this.negative|_e.negative)===0),this.iuor(_e)},k.prototype.or=function(_e){return this.length>_e.length?this.clone().ior(_e):_e.clone().ior(this)},k.prototype.uor=function(_e){return this.length>_e.length?this.clone().iuor(_e):_e.clone().iuor(this)},k.prototype.iuand=function(_e){var tt;this.length>_e.length?tt=_e:tt=this;for(var it=0;it<tt.length;it++)this.words[it]=this.words[it]&_e.words[it];return this.length=tt.length,this.strip()},k.prototype.iand=function(_e){return _((this.negative|_e.negative)===0),this.iuand(_e)},k.prototype.and=function(_e){return this.length>_e.length?this.clone().iand(_e):_e.clone().iand(this)},k.prototype.uand=function(_e){return this.length>_e.length?this.clone().iuand(_e):_e.clone().iuand(this)},k.prototype.iuxor=function(_e){var tt,it;this.length>_e.length?(tt=this,it=_e):(tt=_e,it=this);for(var dt=0;dt<it.length;dt++)this.words[dt]=tt.words[dt]^it.words[dt];if(this!==tt)for(;dt<tt.length;dt++)this.words[dt]=tt.words[dt];return this.length=tt.length,this.strip()},k.prototype.ixor=function(_e){return _((this.negative|_e.negative)===0),this.iuxor(_e)},k.prototype.xor=function(_e){return this.length>_e.length?this.clone().ixor(_e):_e.clone().ixor(this)},k.prototype.uxor=function(_e){return this.length>_e.length?this.clone().iuxor(_e):_e.clone().iuxor(this)},k.prototype.inotn=function(_e){_(typeof _e=="number"&&_e>=0);var tt=Math.ceil(_e/26)|0,it=_e%26;this._expand(tt),it>0&&tt--;for(var dt=0;dt<tt;dt++)this.words[dt]=~this.words[dt]&67108863;return it>0&&(this.words[dt]=~this.words[dt]&67108863>>26-it),this.strip()},k.prototype.notn=function(_e){return this.clone().inotn(_e)},k.prototype.setn=function(_e,tt){_(typeof _e=="number"&&_e>=0);var it=_e/26|0,dt=_e%26;return this._expand(it+1),tt?this.words[it]=this.words[it]|1<<dt:this.words[it]=this.words[it]&~(1<<dt),this.strip()},k.prototype.iadd=function(_e){var tt;if(this.negative!==0&&_e.negative===0)return this.negative=0,tt=this.isub(_e),this.negative^=1,this._normSign();if(this.negative===0&&_e.negative!==0)return _e.negative=0,tt=this.isub(_e),_e.negative=1,tt._normSign();var it,dt;this.length>_e.length?(it=this,dt=_e):(it=_e,dt=this);for(var lt=0,gt=0;gt<dt.length;gt++)tt=(it.words[gt]|0)+(dt.words[gt]|0)+lt,this.words[gt]=tt&67108863,lt=tt>>>26;for(;lt!==0&&gt<it.length;gt++)tt=(it.words[gt]|0)+lt,this.words[gt]=tt&67108863,lt=tt>>>26;if(this.length=it.length,lt!==0)this.words[this.length]=lt,this.length++;else if(it!==this)for(;gt<it.length;gt++)this.words[gt]=it.words[gt];return this},k.prototype.add=function(_e){var tt;return _e.negative!==0&&this.negative===0?(_e.negative=0,tt=this.sub(_e),_e.negative^=1,tt):_e.negative===0&&this.negative!==0?(this.negative=0,tt=_e.sub(this),this.negative=1,tt):this.length>_e.length?this.clone().iadd(_e):_e.clone().iadd(this)},k.prototype.isub=function(_e){if(_e.negative!==0){_e.negative=0;var tt=this.iadd(_e);return _e.negative=1,tt._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(_e),this.negative=1,this._normSign();var it=this.cmp(_e);if(it===0)return this.negative=0,this.length=1,this.words[0]=0,this;var dt,lt;it>0?(dt=this,lt=_e):(dt=_e,lt=this);for(var gt=0,Et=0;Et<lt.length;Et++)tt=(dt.words[Et]|0)-(lt.words[Et]|0)+gt,gt=tt>>26,this.words[Et]=tt&67108863;for(;gt!==0&&Et<dt.length;Et++)tt=(dt.words[Et]|0)+gt,gt=tt>>26,this.words[Et]=tt&67108863;if(gt===0&&Et<dt.length&&dt!==this)for(;Et<dt.length;Et++)this.words[Et]=dt.words[Et];return this.length=Math.max(this.length,Et),dt!==this&&(this.negative=1),this.strip()},k.prototype.sub=function(_e){return this.clone().isub(_e)};function Tt(ut,_e,tt){tt.negative=_e.negative^ut.negative;var it=ut.length+_e.length|0;tt.length=it,it=it-1|0;var dt=ut.words[0]|0,lt=_e.words[0]|0,gt=dt*lt,Et=gt&67108863,pt=gt/67108864|0;tt.words[0]=Et;for(var rt=1;rt<it;rt++){for(var mt=pt>>>26,Lt=pt&67108863,Gt=Math.min(rt,_e.length-1),rr=Math.max(0,rt-ut.length+1);rr<=Gt;rr++){var ir=rt-rr|0;dt=ut.words[ir]|0,lt=_e.words[rr]|0,gt=dt*lt+Lt,mt+=gt/67108864|0,Lt=gt&67108863}tt.words[rt]=Lt|0,pt=mt|0}return pt!==0?tt.words[rt]=pt|0:tt.length--,tt.strip()}var At=function(_e,tt,it){var dt=_e.words,lt=tt.words,gt=it.words,Et=0,pt,rt,mt,Lt=dt[0]|0,Gt=Lt&8191,rr=Lt>>>13,ir=dt[1]|0,Wt=ir&8191,zt=ir>>>13,wt=dt[2]|0,Vt=wt&8191,Qt=wt>>>13,Nt=dt[3]|0,st=Nt&8191,Ct=Nt>>>13,qt=dt[4]|0,cr=qt&8191,dr=qt>>>13,Er=dt[5]|0,Tr=Er&8191,gr=Er>>>13,Zr=dt[6]|0,Pr=Zr&8191,_r=Zr>>>13,St=dt[7]|0,Kt=St&8191,er=St>>>13,kr=dt[8]|0,tr=kr&8191,bt=kr>>>13,jt=dt[9]|0,Ut=jt&8191,Ft=jt>>>13,Ht=lt[0]|0,or=Ht&8191,vr=Ht>>>13,Ir=lt[1]|0,Sr=Ir&8191,Or=Ir>>>13,Cr=lt[2]|0,yt=Cr&8191,Bt=Cr>>>13,Zt=lt[3]|0,yr=Zt&8191,fr=Zt>>>13,Rr=lt[4]|0,Nr=Rr&8191,xr=Rr>>>13,Xr=lt[5]|0,Ar=Xr&8191,Br=Xr>>>13,rn=lt[6]|0,Dr=rn&8191,qr=rn>>>13,nn=lt[7]|0,$r=nn&8191,Lr=nn>>>13,Qr=lt[8]|0,Ur=Qr&8191,Jr=Qr>>>13,cn=lt[9]|0,Fr=cn&8191,Vr=cn>>>13;it.negative=_e.negative^tt.negative,it.length=19,pt=Math.imul(Gt,or),rt=Math.imul(Gt,vr),rt=rt+Math.imul(rr,or)|0,mt=Math.imul(rr,vr);var sn=(Et+pt|0)+((rt&8191)<<13)|0;Et=(mt+(rt>>>13)|0)+(sn>>>26)|0,sn&=67108863,pt=Math.imul(Wt,or),rt=Math.imul(Wt,vr),rt=rt+Math.imul(zt,or)|0,mt=Math.imul(zt,vr),pt=pt+Math.imul(Gt,Sr)|0,rt=rt+Math.imul(Gt,Or)|0,rt=rt+Math.imul(rr,Sr)|0,mt=mt+Math.imul(rr,Or)|0;var un=(Et+pt|0)+((rt&8191)<<13)|0;Et=(mt+(rt>>>13)|0)+(un>>>26)|0,un&=67108863,pt=Math.imul(Vt,or),rt=Math.imul(Vt,vr),rt=rt+Math.imul(Qt,or)|0,mt=Math.imul(Qt,vr),pt=pt+Math.imul(Wt,Sr)|0,rt=rt+Math.imul(Wt,Or)|0,rt=rt+Math.imul(zt,Sr)|0,mt=mt+Math.imul(zt,Or)|0,pt=pt+Math.imul(Gt,yt)|0,rt=rt+Math.imul(Gt,Bt)|0,rt=rt+Math.imul(rr,yt)|0,mt=mt+Math.imul(rr,Bt)|0;var yn=(Et+pt|0)+((rt&8191)<<13)|0;Et=(mt+(rt>>>13)|0)+(yn>>>26)|0,yn&=67108863,pt=Math.imul(st,or),rt=Math.imul(st,vr),rt=rt+Math.imul(Ct,or)|0,mt=Math.imul(Ct,vr),pt=pt+Math.imul(Vt,Sr)|0,rt=rt+Math.imul(Vt,Or)|0,rt=rt+Math.imul(Qt,Sr)|0,mt=mt+Math.imul(Qt,Or)|0,pt=pt+Math.imul(Wt,yt)|0,rt=rt+Math.imul(Wt,Bt)|0,rt=rt+Math.imul(zt,yt)|0,mt=mt+Math.imul(zt,Bt)|0,pt=pt+Math.imul(Gt,yr)|0,rt=rt+Math.imul(Gt,fr)|0,rt=rt+Math.imul(rr,yr)|0,mt=mt+Math.imul(rr,fr)|0;var br=(Et+pt|0)+((rt&8191)<<13)|0;Et=(mt+(rt>>>13)|0)+(br>>>26)|0,br&=67108863,pt=Math.imul(cr,or),rt=Math.imul(cr,vr),rt=rt+Math.imul(dr,or)|0,mt=Math.imul(dr,vr),pt=pt+Math.imul(st,Sr)|0,rt=rt+Math.imul(st,Or)|0,rt=rt+Math.imul(Ct,Sr)|0,mt=mt+Math.imul(Ct,Or)|0,pt=pt+Math.imul(Vt,yt)|0,rt=rt+Math.imul(Vt,Bt)|0,rt=rt+Math.imul(Qt,yt)|0,mt=mt+Math.imul(Qt,Bt)|0,pt=pt+Math.imul(Wt,yr)|0,rt=rt+Math.imul(Wt,fr)|0,rt=rt+Math.imul(zt,yr)|0,mt=mt+Math.imul(zt,fr)|0,pt=pt+Math.imul(Gt,Nr)|0,rt=rt+Math.imul(Gt,xr)|0,rt=rt+Math.imul(rr,Nr)|0,mt=mt+Math.imul(rr,xr)|0;var wr=(Et+pt|0)+((rt&8191)<<13)|0;Et=(mt+(rt>>>13)|0)+(wr>>>26)|0,wr&=67108863,pt=Math.imul(Tr,or),rt=Math.imul(Tr,vr),rt=rt+Math.imul(gr,or)|0,mt=Math.imul(gr,vr),pt=pt+Math.imul(cr,Sr)|0,rt=rt+Math.imul(cr,Or)|0,rt=rt+Math.imul(dr,Sr)|0,mt=mt+Math.imul(dr,Or)|0,pt=pt+Math.imul(st,yt)|0,rt=rt+Math.imul(st,Bt)|0,rt=rt+Math.imul(Ct,yt)|0,mt=mt+Math.imul(Ct,Bt)|0,pt=pt+Math.imul(Vt,yr)|0,rt=rt+Math.imul(Vt,fr)|0,rt=rt+Math.imul(Qt,yr)|0,mt=mt+Math.imul(Qt,fr)|0,pt=pt+Math.imul(Wt,Nr)|0,rt=rt+Math.imul(Wt,xr)|0,rt=rt+Math.imul(zt,Nr)|0,mt=mt+Math.imul(zt,xr)|0,pt=pt+Math.imul(Gt,Ar)|0,rt=rt+Math.imul(Gt,Br)|0,rt=rt+Math.imul(rr,Ar)|0,mt=mt+Math.imul(rr,Br)|0;var Mr=(Et+pt|0)+((rt&8191)<<13)|0;Et=(mt+(rt>>>13)|0)+(Mr>>>26)|0,Mr&=67108863,pt=Math.imul(Pr,or),rt=Math.imul(Pr,vr),rt=rt+Math.imul(_r,or)|0,mt=Math.imul(_r,vr),pt=pt+Math.imul(Tr,Sr)|0,rt=rt+Math.imul(Tr,Or)|0,rt=rt+Math.imul(gr,Sr)|0,mt=mt+Math.imul(gr,Or)|0,pt=pt+Math.imul(cr,yt)|0,rt=rt+Math.imul(cr,Bt)|0,rt=rt+Math.imul(dr,yt)|0,mt=mt+Math.imul(dr,Bt)|0,pt=pt+Math.imul(st,yr)|0,rt=rt+Math.imul(st,fr)|0,rt=rt+Math.imul(Ct,yr)|0,mt=mt+Math.imul(Ct,fr)|0,pt=pt+Math.imul(Vt,Nr)|0,rt=rt+Math.imul(Vt,xr)|0,rt=rt+Math.imul(Qt,Nr)|0,mt=mt+Math.imul(Qt,xr)|0,pt=pt+Math.imul(Wt,Ar)|0,rt=rt+Math.imul(Wt,Br)|0,rt=rt+Math.imul(zt,Ar)|0,mt=mt+Math.imul(zt,Br)|0,pt=pt+Math.imul(Gt,Dr)|0,rt=rt+Math.imul(Gt,qr)|0,rt=rt+Math.imul(rr,Dr)|0,mt=mt+Math.imul(rr,qr)|0;var Wr=(Et+pt|0)+((rt&8191)<<13)|0;Et=(mt+(rt>>>13)|0)+(Wr>>>26)|0,Wr&=67108863,pt=Math.imul(Kt,or),rt=Math.imul(Kt,vr),rt=rt+Math.imul(er,or)|0,mt=Math.imul(er,vr),pt=pt+Math.imul(Pr,Sr)|0,rt=rt+Math.imul(Pr,Or)|0,rt=rt+Math.imul(_r,Sr)|0,mt=mt+Math.imul(_r,Or)|0,pt=pt+Math.imul(Tr,yt)|0,rt=rt+Math.imul(Tr,Bt)|0,rt=rt+Math.imul(gr,yt)|0,mt=mt+Math.imul(gr,Bt)|0,pt=pt+Math.imul(cr,yr)|0,rt=rt+Math.imul(cr,fr)|0,rt=rt+Math.imul(dr,yr)|0,mt=mt+Math.imul(dr,fr)|0,pt=pt+Math.imul(st,Nr)|0,rt=rt+Math.imul(st,xr)|0,rt=rt+Math.imul(Ct,Nr)|0,mt=mt+Math.imul(Ct,xr)|0,pt=pt+Math.imul(Vt,Ar)|0,rt=rt+Math.imul(Vt,Br)|0,rt=rt+Math.imul(Qt,Ar)|0,mt=mt+Math.imul(Qt,Br)|0,pt=pt+Math.imul(Wt,Dr)|0,rt=rt+Math.imul(Wt,qr)|0,rt=rt+Math.imul(zt,Dr)|0,mt=mt+Math.imul(zt,qr)|0,pt=pt+Math.imul(Gt,$r)|0,rt=rt+Math.imul(Gt,Lr)|0,rt=rt+Math.imul(rr,$r)|0,mt=mt+Math.imul(rr,Lr)|0;var Hr=(Et+pt|0)+((rt&8191)<<13)|0;Et=(mt+(rt>>>13)|0)+(Hr>>>26)|0,Hr&=67108863,pt=Math.imul(tr,or),rt=Math.imul(tr,vr),rt=rt+Math.imul(bt,or)|0,mt=Math.imul(bt,vr),pt=pt+Math.imul(Kt,Sr)|0,rt=rt+Math.imul(Kt,Or)|0,rt=rt+Math.imul(er,Sr)|0,mt=mt+Math.imul(er,Or)|0,pt=pt+Math.imul(Pr,yt)|0,rt=rt+Math.imul(Pr,Bt)|0,rt=rt+Math.imul(_r,yt)|0,mt=mt+Math.imul(_r,Bt)|0,pt=pt+Math.imul(Tr,yr)|0,rt=rt+Math.imul(Tr,fr)|0,rt=rt+Math.imul(gr,yr)|0,mt=mt+Math.imul(gr,fr)|0,pt=pt+Math.imul(cr,Nr)|0,rt=rt+Math.imul(cr,xr)|0,rt=rt+Math.imul(dr,Nr)|0,mt=mt+Math.imul(dr,xr)|0,pt=pt+Math.imul(st,Ar)|0,rt=rt+Math.imul(st,Br)|0,rt=rt+Math.imul(Ct,Ar)|0,mt=mt+Math.imul(Ct,Br)|0,pt=pt+Math.imul(Vt,Dr)|0,rt=rt+Math.imul(Vt,qr)|0,rt=rt+Math.imul(Qt,Dr)|0,mt=mt+Math.imul(Qt,qr)|0,pt=pt+Math.imul(Wt,$r)|0,rt=rt+Math.imul(Wt,Lr)|0,rt=rt+Math.imul(zt,$r)|0,mt=mt+Math.imul(zt,Lr)|0,pt=pt+Math.imul(Gt,Ur)|0,rt=rt+Math.imul(Gt,Jr)|0,rt=rt+Math.imul(rr,Ur)|0,mt=mt+Math.imul(rr,Jr)|0;var Gr=(Et+pt|0)+((rt&8191)<<13)|0;Et=(mt+(rt>>>13)|0)+(Gr>>>26)|0,Gr&=67108863,pt=Math.imul(Ut,or),rt=Math.imul(Ut,vr),rt=rt+Math.imul(Ft,or)|0,mt=Math.imul(Ft,vr),pt=pt+Math.imul(tr,Sr)|0,rt=rt+Math.imul(tr,Or)|0,rt=rt+Math.imul(bt,Sr)|0,mt=mt+Math.imul(bt,Or)|0,pt=pt+Math.imul(Kt,yt)|0,rt=rt+Math.imul(Kt,Bt)|0,rt=rt+Math.imul(er,yt)|0,mt=mt+Math.imul(er,Bt)|0,pt=pt+Math.imul(Pr,yr)|0,rt=rt+Math.imul(Pr,fr)|0,rt=rt+Math.imul(_r,yr)|0,mt=mt+Math.imul(_r,fr)|0,pt=pt+Math.imul(Tr,Nr)|0,rt=rt+Math.imul(Tr,xr)|0,rt=rt+Math.imul(gr,Nr)|0,mt=mt+Math.imul(gr,xr)|0,pt=pt+Math.imul(cr,Ar)|0,rt=rt+Math.imul(cr,Br)|0,rt=rt+Math.imul(dr,Ar)|0,mt=mt+Math.imul(dr,Br)|0,pt=pt+Math.imul(st,Dr)|0,rt=rt+Math.imul(st,qr)|0,rt=rt+Math.imul(Ct,Dr)|0,mt=mt+Math.imul(Ct,qr)|0,pt=pt+Math.imul(Vt,$r)|0,rt=rt+Math.imul(Vt,Lr)|0,rt=rt+Math.imul(Qt,$r)|0,mt=mt+Math.imul(Qt,Lr)|0,pt=pt+Math.imul(Wt,Ur)|0,rt=rt+Math.imul(Wt,Jr)|0,rt=rt+Math.imul(zt,Ur)|0,mt=mt+Math.imul(zt,Jr)|0,pt=pt+Math.imul(Gt,Fr)|0,rt=rt+Math.imul(Gt,Vr)|0,rt=rt+Math.imul(rr,Fr)|0,mt=mt+Math.imul(rr,Vr)|0;var Yr=(Et+pt|0)+((rt&8191)<<13)|0;Et=(mt+(rt>>>13)|0)+(Yr>>>26)|0,Yr&=67108863,pt=Math.imul(Ut,Sr),rt=Math.imul(Ut,Or),rt=rt+Math.imul(Ft,Sr)|0,mt=Math.imul(Ft,Or),pt=pt+Math.imul(tr,yt)|0,rt=rt+Math.imul(tr,Bt)|0,rt=rt+Math.imul(bt,yt)|0,mt=mt+Math.imul(bt,Bt)|0,pt=pt+Math.imul(Kt,yr)|0,rt=rt+Math.imul(Kt,fr)|0,rt=rt+Math.imul(er,yr)|0,mt=mt+Math.imul(er,fr)|0,pt=pt+Math.imul(Pr,Nr)|0,rt=rt+Math.imul(Pr,xr)|0,rt=rt+Math.imul(_r,Nr)|0,mt=mt+Math.imul(_r,xr)|0,pt=pt+Math.imul(Tr,Ar)|0,rt=rt+Math.imul(Tr,Br)|0,rt=rt+Math.imul(gr,Ar)|0,mt=mt+Math.imul(gr,Br)|0,pt=pt+Math.imul(cr,Dr)|0,rt=rt+Math.imul(cr,qr)|0,rt=rt+Math.imul(dr,Dr)|0,mt=mt+Math.imul(dr,qr)|0,pt=pt+Math.imul(st,$r)|0,rt=rt+Math.imul(st,Lr)|0,rt=rt+Math.imul(Ct,$r)|0,mt=mt+Math.imul(Ct,Lr)|0,pt=pt+Math.imul(Vt,Ur)|0,rt=rt+Math.imul(Vt,Jr)|0,rt=rt+Math.imul(Qt,Ur)|0,mt=mt+Math.imul(Qt,Jr)|0,pt=pt+Math.imul(Wt,Fr)|0,rt=rt+Math.imul(Wt,Vr)|0,rt=rt+Math.imul(zt,Fr)|0,mt=mt+Math.imul(zt,Vr)|0;var en=(Et+pt|0)+((rt&8191)<<13)|0;Et=(mt+(rt>>>13)|0)+(en>>>26)|0,en&=67108863,pt=Math.imul(Ut,yt),rt=Math.imul(Ut,Bt),rt=rt+Math.imul(Ft,yt)|0,mt=Math.imul(Ft,Bt),pt=pt+Math.imul(tr,yr)|0,rt=rt+Math.imul(tr,fr)|0,rt=rt+Math.imul(bt,yr)|0,mt=mt+Math.imul(bt,fr)|0,pt=pt+Math.imul(Kt,Nr)|0,rt=rt+Math.imul(Kt,xr)|0,rt=rt+Math.imul(er,Nr)|0,mt=mt+Math.imul(er,xr)|0,pt=pt+Math.imul(Pr,Ar)|0,rt=rt+Math.imul(Pr,Br)|0,rt=rt+Math.imul(_r,Ar)|0,mt=mt+Math.imul(_r,Br)|0,pt=pt+Math.imul(Tr,Dr)|0,rt=rt+Math.imul(Tr,qr)|0,rt=rt+Math.imul(gr,Dr)|0,mt=mt+Math.imul(gr,qr)|0,pt=pt+Math.imul(cr,$r)|0,rt=rt+Math.imul(cr,Lr)|0,rt=rt+Math.imul(dr,$r)|0,mt=mt+Math.imul(dr,Lr)|0,pt=pt+Math.imul(st,Ur)|0,rt=rt+Math.imul(st,Jr)|0,rt=rt+Math.imul(Ct,Ur)|0,mt=mt+Math.imul(Ct,Jr)|0,pt=pt+Math.imul(Vt,Fr)|0,rt=rt+Math.imul(Vt,Vr)|0,rt=rt+Math.imul(Qt,Fr)|0,mt=mt+Math.imul(Qt,Vr)|0;var jr=(Et+pt|0)+((rt&8191)<<13)|0;Et=(mt+(rt>>>13)|0)+(jr>>>26)|0,jr&=67108863,pt=Math.imul(Ut,yr),rt=Math.imul(Ut,fr),rt=rt+Math.imul(Ft,yr)|0,mt=Math.imul(Ft,fr),pt=pt+Math.imul(tr,Nr)|0,rt=rt+Math.imul(tr,xr)|0,rt=rt+Math.imul(bt,Nr)|0,mt=mt+Math.imul(bt,xr)|0,pt=pt+Math.imul(Kt,Ar)|0,rt=rt+Math.imul(Kt,Br)|0,rt=rt+Math.imul(er,Ar)|0,mt=mt+Math.imul(er,Br)|0,pt=pt+Math.imul(Pr,Dr)|0,rt=rt+Math.imul(Pr,qr)|0,rt=rt+Math.imul(_r,Dr)|0,mt=mt+Math.imul(_r,qr)|0,pt=pt+Math.imul(Tr,$r)|0,rt=rt+Math.imul(Tr,Lr)|0,rt=rt+Math.imul(gr,$r)|0,mt=mt+Math.imul(gr,Lr)|0,pt=pt+Math.imul(cr,Ur)|0,rt=rt+Math.imul(cr,Jr)|0,rt=rt+Math.imul(dr,Ur)|0,mt=mt+Math.imul(dr,Jr)|0,pt=pt+Math.imul(st,Fr)|0,rt=rt+Math.imul(st,Vr)|0,rt=rt+Math.imul(Ct,Fr)|0,mt=mt+Math.imul(Ct,Vr)|0;var pn=(Et+pt|0)+((rt&8191)<<13)|0;Et=(mt+(rt>>>13)|0)+(pn>>>26)|0,pn&=67108863,pt=Math.imul(Ut,Nr),rt=Math.imul(Ut,xr),rt=rt+Math.imul(Ft,Nr)|0,mt=Math.imul(Ft,xr),pt=pt+Math.imul(tr,Ar)|0,rt=rt+Math.imul(tr,Br)|0,rt=rt+Math.imul(bt,Ar)|0,mt=mt+Math.imul(bt,Br)|0,pt=pt+Math.imul(Kt,Dr)|0,rt=rt+Math.imul(Kt,qr)|0,rt=rt+Math.imul(er,Dr)|0,mt=mt+Math.imul(er,qr)|0,pt=pt+Math.imul(Pr,$r)|0,rt=rt+Math.imul(Pr,Lr)|0,rt=rt+Math.imul(_r,$r)|0,mt=mt+Math.imul(_r,Lr)|0,pt=pt+Math.imul(Tr,Ur)|0,rt=rt+Math.imul(Tr,Jr)|0,rt=rt+Math.imul(gr,Ur)|0,mt=mt+Math.imul(gr,Jr)|0,pt=pt+Math.imul(cr,Fr)|0,rt=rt+Math.imul(cr,Vr)|0,rt=rt+Math.imul(dr,Fr)|0,mt=mt+Math.imul(dr,Vr)|0;var mn=(Et+pt|0)+((rt&8191)<<13)|0;Et=(mt+(rt>>>13)|0)+(mn>>>26)|0,mn&=67108863,pt=Math.imul(Ut,Ar),rt=Math.imul(Ut,Br),rt=rt+Math.imul(Ft,Ar)|0,mt=Math.imul(Ft,Br),pt=pt+Math.imul(tr,Dr)|0,rt=rt+Math.imul(tr,qr)|0,rt=rt+Math.imul(bt,Dr)|0,mt=mt+Math.imul(bt,qr)|0,pt=pt+Math.imul(Kt,$r)|0,rt=rt+Math.imul(Kt,Lr)|0,rt=rt+Math.imul(er,$r)|0,mt=mt+Math.imul(er,Lr)|0,pt=pt+Math.imul(Pr,Ur)|0,rt=rt+Math.imul(Pr,Jr)|0,rt=rt+Math.imul(_r,Ur)|0,mt=mt+Math.imul(_r,Jr)|0,pt=pt+Math.imul(Tr,Fr)|0,rt=rt+Math.imul(Tr,Vr)|0,rt=rt+Math.imul(gr,Fr)|0,mt=mt+Math.imul(gr,Vr)|0;var hn=(Et+pt|0)+((rt&8191)<<13)|0;Et=(mt+(rt>>>13)|0)+(hn>>>26)|0,hn&=67108863,pt=Math.imul(Ut,Dr),rt=Math.imul(Ut,qr),rt=rt+Math.imul(Ft,Dr)|0,mt=Math.imul(Ft,qr),pt=pt+Math.imul(tr,$r)|0,rt=rt+Math.imul(tr,Lr)|0,rt=rt+Math.imul(bt,$r)|0,mt=mt+Math.imul(bt,Lr)|0,pt=pt+Math.imul(Kt,Ur)|0,rt=rt+Math.imul(Kt,Jr)|0,rt=rt+Math.imul(er,Ur)|0,mt=mt+Math.imul(er,Jr)|0,pt=pt+Math.imul(Pr,Fr)|0,rt=rt+Math.imul(Pr,Vr)|0,rt=rt+Math.imul(_r,Fr)|0,mt=mt+Math.imul(_r,Vr)|0;var fn=(Et+pt|0)+((rt&8191)<<13)|0;Et=(mt+(rt>>>13)|0)+(fn>>>26)|0,fn&=67108863,pt=Math.imul(Ut,$r),rt=Math.imul(Ut,Lr),rt=rt+Math.imul(Ft,$r)|0,mt=Math.imul(Ft,Lr),pt=pt+Math.imul(tr,Ur)|0,rt=rt+Math.imul(tr,Jr)|0,rt=rt+Math.imul(bt,Ur)|0,mt=mt+Math.imul(bt,Jr)|0,pt=pt+Math.imul(Kt,Fr)|0,rt=rt+Math.imul(Kt,Vr)|0,rt=rt+Math.imul(er,Fr)|0,mt=mt+Math.imul(er,Vr)|0;var vn=(Et+pt|0)+((rt&8191)<<13)|0;Et=(mt+(rt>>>13)|0)+(vn>>>26)|0,vn&=67108863,pt=Math.imul(Ut,Ur),rt=Math.imul(Ut,Jr),rt=rt+Math.imul(Ft,Ur)|0,mt=Math.imul(Ft,Jr),pt=pt+Math.imul(tr,Fr)|0,rt=rt+Math.imul(tr,Vr)|0,rt=rt+Math.imul(bt,Fr)|0,mt=mt+Math.imul(bt,Vr)|0;var gn=(Et+pt|0)+((rt&8191)<<13)|0;Et=(mt+(rt>>>13)|0)+(gn>>>26)|0,gn&=67108863,pt=Math.imul(Ut,Fr),rt=Math.imul(Ut,Vr),rt=rt+Math.imul(Ft,Fr)|0,mt=Math.imul(Ft,Vr);var Sn=(Et+pt|0)+((rt&8191)<<13)|0;return Et=(mt+(rt>>>13)|0)+(Sn>>>26)|0,Sn&=67108863,gt[0]=sn,gt[1]=un,gt[2]=yn,gt[3]=br,gt[4]=wr,gt[5]=Mr,gt[6]=Wr,gt[7]=Hr,gt[8]=Gr,gt[9]=Yr,gt[10]=en,gt[11]=jr,gt[12]=pn,gt[13]=mn,gt[14]=hn,gt[15]=fn,gt[16]=vn,gt[17]=gn,gt[18]=Sn,Et!==0&&(gt[19]=Et,it.length++),it};Math.imul||(At=Tt);function Mt(ut,_e,tt){tt.negative=_e.negative^ut.negative,tt.length=ut.length+_e.length;for(var it=0,dt=0,lt=0;lt<tt.length-1;lt++){var gt=dt;dt=0;for(var Et=it&67108863,pt=Math.min(lt,_e.length-1),rt=Math.max(0,lt-ut.length+1);rt<=pt;rt++){var mt=lt-rt,Lt=ut.words[mt]|0,Gt=_e.words[rt]|0,rr=Lt*Gt,ir=rr&67108863;gt=gt+(rr/67108864|0)|0,ir=ir+Et|0,Et=ir&67108863,gt=gt+(ir>>>26)|0,dt+=gt>>>26,gt&=67108863}tt.words[lt]=Et,it=gt,gt=dt}return it!==0?tt.words[lt]=it:tt.length--,tt.strip()}function Dt(ut,_e,tt){var it=new Rt;return it.mulp(ut,_e,tt)}k.prototype.mulTo=function(_e,tt){var it,dt=this.length+_e.length;return this.length===10&&_e.length===10?it=At(this,_e,tt):dt<63?it=Tt(this,_e,tt):dt<1024?it=Mt(this,_e,tt):it=Dt(this,_e,tt),it};function Rt(ut,_e){this.x=ut,this.y=_e}Rt.prototype.makeRBT=function(_e){for(var tt=new Array(_e),it=k.prototype._countBits(_e)-1,dt=0;dt<_e;dt++)tt[dt]=this.revBin(dt,it,_e);return tt},Rt.prototype.revBin=function(_e,tt,it){if(_e===0||_e===it-1)return _e;for(var dt=0,lt=0;lt<tt;lt++)dt|=(_e&1)<<tt-lt-1,_e>>=1;return dt},Rt.prototype.permute=function(_e,tt,it,dt,lt,gt){for(var Et=0;Et<gt;Et++)dt[Et]=tt[_e[Et]],lt[Et]=it[_e[Et]]},Rt.prototype.transform=function(_e,tt,it,dt,lt,gt){this.permute(gt,_e,tt,it,dt,lt);for(var Et=1;Et<lt;Et<<=1)for(var pt=Et<<1,rt=Math.cos(2*Math.PI/pt),mt=Math.sin(2*Math.PI/pt),Lt=0;Lt<lt;Lt+=pt)for(var Gt=rt,rr=mt,ir=0;ir<Et;ir++){var Wt=it[Lt+ir],zt=dt[Lt+ir],wt=it[Lt+ir+Et],Vt=dt[Lt+ir+Et],Qt=Gt*wt-rr*Vt;Vt=Gt*Vt+rr*wt,wt=Qt,it[Lt+ir]=Wt+wt,dt[Lt+ir]=zt+Vt,it[Lt+ir+Et]=Wt-wt,dt[Lt+ir+Et]=zt-Vt,ir!==pt&&(Qt=rt*Gt-mt*rr,rr=rt*rr+mt*Gt,Gt=Qt)}},Rt.prototype.guessLen13b=function(_e,tt){var it=Math.max(tt,_e)|1,dt=it&1,lt=0;for(it=it/2|0;it;it=it>>>1)lt++;return 1<<lt+1+dt},Rt.prototype.conjugate=function(_e,tt,it){if(!(it<=1))for(var dt=0;dt<it/2;dt++){var lt=_e[dt];_e[dt]=_e[it-dt-1],_e[it-dt-1]=lt,lt=tt[dt],tt[dt]=-tt[it-dt-1],tt[it-dt-1]=-lt}},Rt.prototype.normalize13b=function(_e,tt){for(var it=0,dt=0;dt<tt/2;dt++){var lt=Math.round(_e[2*dt+1]/tt)*8192+Math.round(_e[2*dt]/tt)+it;_e[dt]=lt&67108863,lt<67108864?it=0:it=lt/67108864|0}return _e},Rt.prototype.convert13b=function(_e,tt,it,dt){for(var lt=0,gt=0;gt<tt;gt++)lt=lt+(_e[gt]|0),it[2*gt]=lt&8191,lt=lt>>>13,it[2*gt+1]=lt&8191,lt=lt>>>13;for(gt=2*tt;gt<dt;++gt)it[gt]=0;_(lt===0),_((lt&-8192)===0)},Rt.prototype.stub=function(_e){for(var tt=new Array(_e),it=0;it<_e;it++)tt[it]=0;return tt},Rt.prototype.mulp=function(_e,tt,it){var dt=2*this.guessLen13b(_e.length,tt.length),lt=this.makeRBT(dt),gt=this.stub(dt),Et=new Array(dt),pt=new Array(dt),rt=new Array(dt),mt=new Array(dt),Lt=new Array(dt),Gt=new Array(dt),rr=it.words;rr.length=dt,this.convert13b(_e.words,_e.length,Et,dt),this.convert13b(tt.words,tt.length,mt,dt),this.transform(Et,gt,pt,rt,dt,lt),this.transform(mt,gt,Lt,Gt,dt,lt);for(var ir=0;ir<dt;ir++){var Wt=pt[ir]*Lt[ir]-rt[ir]*Gt[ir];rt[ir]=pt[ir]*Gt[ir]+rt[ir]*Lt[ir],pt[ir]=Wt}return this.conjugate(pt,rt,dt),this.transform(pt,rt,rr,gt,dt,lt),this.conjugate(rr,gt,dt),this.normalize13b(rr,dt),it.negative=_e.negative^tt.negative,it.length=_e.length+tt.length,it.strip()},k.prototype.mul=function(_e){var tt=new k(null);return tt.words=new Array(this.length+_e.length),this.mulTo(_e,tt)},k.prototype.mulf=function(_e){var tt=new k(null);return tt.words=new Array(this.length+_e.length),Dt(this,_e,tt)},k.prototype.imul=function(_e){return this.clone().mulTo(_e,this)},k.prototype.imuln=function(_e){_(typeof _e=="number"),_(_e<67108864);for(var tt=0,it=0;it<this.length;it++){var dt=(this.words[it]|0)*_e,lt=(dt&67108863)+(tt&67108863);tt>>=26,tt+=dt/67108864|0,tt+=lt>>>26,this.words[it]=lt&67108863}return tt!==0&&(this.words[it]=tt,this.length++),this},k.prototype.muln=function(_e){return this.clone().imuln(_e)},k.prototype.sqr=function(){return this.mul(this)},k.prototype.isqr=function(){return this.imul(this.clone())},k.prototype.pow=function(_e){var tt=$t(_e);if(tt.length===0)return new k(1);for(var it=this,dt=0;dt<tt.length&&tt[dt]===0;dt++,it=it.sqr());if(++dt<tt.length)for(var lt=it.sqr();dt<tt.length;dt++,lt=lt.sqr())tt[dt]!==0&&(it=it.mul(lt));return it},k.prototype.iushln=function(_e){_(typeof _e=="number"&&_e>=0);var tt=_e%26,it=(_e-tt)/26,dt=67108863>>>26-tt<<26-tt,lt;if(tt!==0){var gt=0;for(lt=0;lt<this.length;lt++){var Et=this.words[lt]&dt,pt=(this.words[lt]|0)-Et<<tt;this.words[lt]=pt|gt,gt=Et>>>26-tt}gt&&(this.words[lt]=gt,this.length++)}if(it!==0){for(lt=this.length-1;lt>=0;lt--)this.words[lt+it]=this.words[lt];for(lt=0;lt<it;lt++)this.words[lt]=0;this.length+=it}return this.strip()},k.prototype.ishln=function(_e){return _(this.negative===0),this.iushln(_e)},k.prototype.iushrn=function(_e,tt,it){_(typeof _e=="number"&&_e>=0);var dt;tt?dt=(tt-tt%26)/26:dt=0;var lt=_e%26,gt=Math.min((_e-lt)/26,this.length),Et=67108863^67108863>>>lt<<lt,pt=it;if(dt-=gt,dt=Math.max(0,dt),pt){for(var rt=0;rt<gt;rt++)pt.words[rt]=this.words[rt];pt.length=gt}if(gt!==0)if(this.length>gt)for(this.length-=gt,rt=0;rt<this.length;rt++)this.words[rt]=this.words[rt+gt];else this.words[0]=0,this.length=1;var mt=0;for(rt=this.length-1;rt>=0&&(mt!==0||rt>=dt);rt--){var Lt=this.words[rt]|0;this.words[rt]=mt<<26-lt|Lt>>>lt,mt=Lt&Et}return pt&&mt!==0&&(pt.words[pt.length++]=mt),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},k.prototype.ishrn=function(_e,tt,it){return _(this.negative===0),this.iushrn(_e,tt,it)},k.prototype.shln=function(_e){return this.clone().ishln(_e)},k.prototype.ushln=function(_e){return this.clone().iushln(_e)},k.prototype.shrn=function(_e){return this.clone().ishrn(_e)},k.prototype.ushrn=function(_e){return this.clone().iushrn(_e)},k.prototype.testn=function(_e){_(typeof _e=="number"&&_e>=0);var tt=_e%26,it=(_e-tt)/26,dt=1<<tt;if(this.length<=it)return!1;var lt=this.words[it];return!!(lt&dt)},k.prototype.imaskn=function(_e){_(typeof _e=="number"&&_e>=0);var tt=_e%26,it=(_e-tt)/26;if(_(this.negative===0,"imaskn works only with positive numbers"),this.length<=it)return this;if(tt!==0&&it++,this.length=Math.min(it,this.length),tt!==0){var dt=67108863^67108863>>>tt<<tt;this.words[this.length-1]&=dt}return this.strip()},k.prototype.maskn=function(_e){return this.clone().imaskn(_e)},k.prototype.iaddn=function(_e){return _(typeof _e=="number"),_(_e<67108864),_e<0?this.isubn(-_e):this.negative!==0?this.length===1&&(this.words[0]|0)<_e?(this.words[0]=_e-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(_e),this.negative=1,this):this._iaddn(_e)},k.prototype._iaddn=function(_e){this.words[0]+=_e;for(var tt=0;tt<this.length&&this.words[tt]>=67108864;tt++)this.words[tt]-=67108864,tt===this.length-1?this.words[tt+1]=1:this.words[tt+1]++;return this.length=Math.max(this.length,tt+1),this},k.prototype.isubn=function(_e){if(_(typeof _e=="number"),_(_e<67108864),_e<0)return this.iaddn(-_e);if(this.negative!==0)return this.negative=0,this.iaddn(_e),this.negative=1,this;if(this.words[0]-=_e,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var tt=0;tt<this.length&&this.words[tt]<0;tt++)this.words[tt]+=67108864,this.words[tt+1]-=1;return this.strip()},k.prototype.addn=function(_e){return this.clone().iaddn(_e)},k.prototype.subn=function(_e){return this.clone().isubn(_e)},k.prototype.iabs=function(){return this.negative=0,this},k.prototype.abs=function(){return this.clone().iabs()},k.prototype._ishlnsubmul=function(_e,tt,it){var dt=_e.length+it,lt;this._expand(dt);var gt,Et=0;for(lt=0;lt<_e.length;lt++){gt=(this.words[lt+it]|0)+Et;var pt=(_e.words[lt]|0)*tt;gt-=pt&67108863,Et=(gt>>26)-(pt/67108864|0),this.words[lt+it]=gt&67108863}for(;lt<this.length-it;lt++)gt=(this.words[lt+it]|0)+Et,Et=gt>>26,this.words[lt+it]=gt&67108863;if(Et===0)return this.strip();for(_(Et===-1),Et=0,lt=0;lt<this.length;lt++)gt=-(this.words[lt]|0)+Et,Et=gt>>26,this.words[lt]=gt&67108863;return this.negative=1,this.strip()},k.prototype._wordDiv=function(_e,tt){var it=this.length-_e.length,dt=this.clone(),lt=_e,gt=lt.words[lt.length-1]|0,Et=this._countBits(gt);it=26-Et,it!==0&&(lt=lt.ushln(it),dt.iushln(it),gt=lt.words[lt.length-1]|0);var pt=dt.length-lt.length,rt;if(tt!=="mod"){rt=new k(null),rt.length=pt+1,rt.words=new Array(rt.length);for(var mt=0;mt<rt.length;mt++)rt.words[mt]=0}var Lt=dt.clone()._ishlnsubmul(lt,1,pt);Lt.negative===0&&(dt=Lt,rt&&(rt.words[pt]=1));for(var Gt=pt-1;Gt>=0;Gt--){var rr=(dt.words[lt.length+Gt]|0)*67108864+(dt.words[lt.length+Gt-1]|0);for(rr=Math.min(rr/gt|0,67108863),dt._ishlnsubmul(lt,rr,Gt);dt.negative!==0;)rr--,dt.negative=0,dt._ishlnsubmul(lt,1,Gt),dt.isZero()||(dt.negative^=1);rt&&(rt.words[Gt]=rr)}return rt&&rt.strip(),dt.strip(),tt!=="div"&&it!==0&&dt.iushrn(it),{div:rt||null,mod:dt}},k.prototype.divmod=function(_e,tt,it){if(_(!_e.isZero()),this.isZero())return{div:new k(0),mod:new k(0)};var dt,lt,gt;return this.negative!==0&&_e.negative===0?(gt=this.neg().divmod(_e,tt),tt!=="mod"&&(dt=gt.div.neg()),tt!=="div"&&(lt=gt.mod.neg(),it&&lt.negative!==0&&lt.iadd(_e)),{div:dt,mod:lt}):this.negative===0&&_e.negative!==0?(gt=this.divmod(_e.neg(),tt),tt!=="mod"&&(dt=gt.div.neg()),{div:dt,mod:gt.mod}):this.negative&_e.negative?(gt=this.neg().divmod(_e.neg(),tt),tt!=="div"&&(lt=gt.mod.neg(),it&&lt.negative!==0&&lt.isub(_e)),{div:gt.div,mod:lt}):_e.length>this.length||this.cmp(_e)<0?{div:new k(0),mod:this}:_e.length===1?tt==="div"?{div:this.divn(_e.words[0]),mod:null}:tt==="mod"?{div:null,mod:new k(this.modn(_e.words[0]))}:{div:this.divn(_e.words[0]),mod:new k(this.modn(_e.words[0]))}:this._wordDiv(_e,tt)},k.prototype.div=function(_e){return this.divmod(_e,"div",!1).div},k.prototype.mod=function(_e){return this.divmod(_e,"mod",!1).mod},k.prototype.umod=function(_e){return this.divmod(_e,"mod",!0).mod},k.prototype.divRound=function(_e){var tt=this.divmod(_e);if(tt.mod.isZero())return tt.div;var it=tt.div.negative!==0?tt.mod.isub(_e):tt.mod,dt=_e.ushrn(1),lt=_e.andln(1),gt=it.cmp(dt);return gt<0||lt===1&&gt===0?tt.div:tt.div.negative!==0?tt.div.isubn(1):tt.div.iaddn(1)},k.prototype.modn=function(_e){_(_e<=67108863);for(var tt=(1<<26)%_e,it=0,dt=this.length-1;dt>=0;dt--)it=(tt*it+(this.words[dt]|0))%_e;return it},k.prototype.idivn=function(_e){_(_e<=67108863);for(var tt=0,it=this.length-1;it>=0;it--){var dt=(this.words[it]|0)+tt*67108864;this.words[it]=dt/_e|0,tt=dt%_e}return this.strip()},k.prototype.divn=function(_e){return this.clone().idivn(_e)},k.prototype.egcd=function(_e){_(_e.negative===0),_(!_e.isZero());var tt=this,it=_e.clone();tt.negative!==0?tt=tt.umod(_e):tt=tt.clone();for(var dt=new k(1),lt=new k(0),gt=new k(0),Et=new k(1),pt=0;tt.isEven()&&it.isEven();)tt.iushrn(1),it.iushrn(1),++pt;for(var rt=it.clone(),mt=tt.clone();!tt.isZero();){for(var Lt=0,Gt=1;!(tt.words[0]&Gt)&&Lt<26;++Lt,Gt<<=1);if(Lt>0)for(tt.iushrn(Lt);Lt-- >0;)(dt.isOdd()||lt.isOdd())&&(dt.iadd(rt),lt.isub(mt)),dt.iushrn(1),lt.iushrn(1);for(var rr=0,ir=1;!(it.words[0]&ir)&&rr<26;++rr,ir<<=1);if(rr>0)for(it.iushrn(rr);rr-- >0;)(gt.isOdd()||Et.isOdd())&&(gt.iadd(rt),Et.isub(mt)),gt.iushrn(1),Et.iushrn(1);tt.cmp(it)>=0?(tt.isub(it),dt.isub(gt),lt.isub(Et)):(it.isub(tt),gt.isub(dt),Et.isub(lt))}return{a:gt,b:Et,gcd:it.iushln(pt)}},k.prototype._invmp=function(_e){_(_e.negative===0),_(!_e.isZero());var tt=this,it=_e.clone();tt.negative!==0?tt=tt.umod(_e):tt=tt.clone();for(var dt=new k(1),lt=new k(0),gt=it.clone();tt.cmpn(1)>0&&it.cmpn(1)>0;){for(var Et=0,pt=1;!(tt.words[0]&pt)&&Et<26;++Et,pt<<=1);if(Et>0)for(tt.iushrn(Et);Et-- >0;)dt.isOdd()&&dt.iadd(gt),dt.iushrn(1);for(var rt=0,mt=1;!(it.words[0]&mt)&&rt<26;++rt,mt<<=1);if(rt>0)for(it.iushrn(rt);rt-- >0;)lt.isOdd()&&lt.iadd(gt),lt.iushrn(1);tt.cmp(it)>=0?(tt.isub(it),dt.isub(lt)):(it.isub(tt),lt.isub(dt))}var Lt;return tt.cmpn(1)===0?Lt=dt:Lt=lt,Lt.cmpn(0)<0&&Lt.iadd(_e),Lt},k.prototype.gcd=function(_e){if(this.isZero())return _e.abs();if(_e.isZero())return this.abs();var tt=this.clone(),it=_e.clone();tt.negative=0,it.negative=0;for(var dt=0;tt.isEven()&&it.isEven();dt++)tt.iushrn(1),it.iushrn(1);do{for(;tt.isEven();)tt.iushrn(1);for(;it.isEven();)it.iushrn(1);var lt=tt.cmp(it);if(lt<0){var gt=tt;tt=it,it=gt}else if(lt===0||it.cmpn(1)===0)break;tt.isub(it)}while(!0);return it.iushln(dt)},k.prototype.invm=function(_e){return this.egcd(_e).a.umod(_e)},k.prototype.isEven=function(){return(this.words[0]&1)===0},k.prototype.isOdd=function(){return(this.words[0]&1)===1},k.prototype.andln=function(_e){return this.words[0]&_e},k.prototype.bincn=function(_e){_(typeof _e=="number");var tt=_e%26,it=(_e-tt)/26,dt=1<<tt;if(this.length<=it)return this._expand(it+1),this.words[it]|=dt,this;for(var lt=dt,gt=it;lt!==0&&gt<this.length;gt++){var Et=this.words[gt]|0;Et+=lt,lt=Et>>>26,Et&=67108863,this.words[gt]=Et}return lt!==0&&(this.words[gt]=lt,this.length++),this},k.prototype.isZero=function(){return this.length===1&&this.words[0]===0},k.prototype.cmpn=function(_e){var tt=_e<0;if(this.negative!==0&&!tt)return-1;if(this.negative===0&&tt)return 1;this.strip();var it;if(this.length>1)it=1;else{tt&&(_e=-_e),_(_e<=67108863,"Number is too big");var dt=this.words[0]|0;it=dt===_e?0:dt<_e?-1:1}return this.negative!==0?-it|0:it},k.prototype.cmp=function(_e){if(this.negative!==0&&_e.negative===0)return-1;if(this.negative===0&&_e.negative!==0)return 1;var tt=this.ucmp(_e);return this.negative!==0?-tt|0:tt},k.prototype.ucmp=function(_e){if(this.length>_e.length)return 1;if(this.length<_e.length)return-1;for(var tt=0,it=this.length-1;it>=0;it--){var dt=this.words[it]|0,lt=_e.words[it]|0;if(dt!==lt){dt<lt?tt=-1:dt>lt&&(tt=1);break}}return tt},k.prototype.gtn=function(_e){return this.cmpn(_e)===1},k.prototype.gt=function(_e){return this.cmp(_e)===1},k.prototype.gten=function(_e){return this.cmpn(_e)>=0},k.prototype.gte=function(_e){return this.cmp(_e)>=0},k.prototype.ltn=function(_e){return this.cmpn(_e)===-1},k.prototype.lt=function(_e){return this.cmp(_e)===-1},k.prototype.lten=function(_e){return this.cmpn(_e)<=0},k.prototype.lte=function(_e){return this.cmp(_e)<=0},k.prototype.eqn=function(_e){return this.cmpn(_e)===0},k.prototype.eq=function(_e){return this.cmp(_e)===0},k.red=function(_e){return new Ot(_e)},k.prototype.toRed=function(_e){return _(!this.red,"Already a number in reduction context"),_(this.negative===0,"red works only with positives"),_e.convertTo(this)._forceRed(_e)},k.prototype.fromRed=function(){return _(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},k.prototype._forceRed=function(_e){return this.red=_e,this},k.prototype.forceRed=function(_e){return _(!this.red,"Already a number in reduction context"),this._forceRed(_e)},k.prototype.redAdd=function(_e){return _(this.red,"redAdd works only with red numbers"),this.red.add(this,_e)},k.prototype.redIAdd=function(_e){return _(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,_e)},k.prototype.redSub=function(_e){return _(this.red,"redSub works only with red numbers"),this.red.sub(this,_e)},k.prototype.redISub=function(_e){return _(this.red,"redISub works only with red numbers"),this.red.isub(this,_e)},k.prototype.redShl=function(_e){return _(this.red,"redShl works only with red numbers"),this.red.shl(this,_e)},k.prototype.redMul=function(_e){return _(this.red,"redMul works only with red numbers"),this.red._verify2(this,_e),this.red.mul(this,_e)},k.prototype.redIMul=function(_e){return _(this.red,"redMul works only with red numbers"),this.red._verify2(this,_e),this.red.imul(this,_e)},k.prototype.redSqr=function(){return _(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},k.prototype.redISqr=function(){return _(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},k.prototype.redSqrt=function(){return _(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},k.prototype.redInvm=function(){return _(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},k.prototype.redNeg=function(){return _(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},k.prototype.redPow=function(_e){return _(this.red&&!_e.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,_e)};var xt={k256:null,p224:null,p192:null,p25519:null};function Jt(ut,_e){this.name=ut,this.p=new k(_e,16),this.n=this.p.bitLength(),this.k=new k(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}Jt.prototype._tmp=function(){var _e=new k(null);return _e.words=new Array(Math.ceil(this.n/13)),_e},Jt.prototype.ireduce=function(_e){var tt=_e,it;do this.split(tt,this.tmp),tt=this.imulK(tt),tt=tt.iadd(this.tmp),it=tt.bitLength();while(it>this.n);var dt=it<this.n?-1:tt.ucmp(this.p);return dt===0?(tt.words[0]=0,tt.length=1):dt>0?tt.isub(this.p):tt.strip!==void 0?tt.strip():tt._strip(),tt},Jt.prototype.split=function(_e,tt){_e.iushrn(this.n,0,tt)},Jt.prototype.imulK=function(_e){return _e.imul(this.k)};function ar(){Jt.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}$(ar,Jt),ar.prototype.split=function(_e,tt){for(var it=4194303,dt=Math.min(_e.length,9),lt=0;lt<dt;lt++)tt.words[lt]=_e.words[lt];if(tt.length=dt,_e.length<=9){_e.words[0]=0,_e.length=1;return}var gt=_e.words[9];for(tt.words[tt.length++]=gt&it,lt=10;lt<_e.length;lt++){var Et=_e.words[lt]|0;_e.words[lt-10]=(Et&it)<<4|gt>>>22,gt=Et}gt>>>=22,_e.words[lt-10]=gt,gt===0&&_e.length>10?_e.length-=10:_e.length-=9},ar.prototype.imulK=function(_e){_e.words[_e.length]=0,_e.words[_e.length+1]=0,_e.length+=2;for(var tt=0,it=0;it<_e.length;it++){var dt=_e.words[it]|0;tt+=dt*977,_e.words[it]=tt&67108863,tt=dt*64+(tt/67108864|0)}return _e.words[_e.length-1]===0&&(_e.length--,_e.words[_e.length-1]===0&&_e.length--),_e};function nr(){Jt.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}$(nr,Jt);function pr(){Jt.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}$(pr,Jt);function ur(){Jt.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}$(ur,Jt),ur.prototype.imulK=function(_e){for(var tt=0,it=0;it<_e.length;it++){var dt=(_e.words[it]|0)*19+tt,lt=dt&67108863;dt>>>=26,_e.words[it]=lt,tt=dt}return tt!==0&&(_e.words[_e.length++]=tt),_e},k._prime=function(_e){if(xt[_e])return xt[_e];var tt;if(_e==="k256")tt=new ar;else if(_e==="p224")tt=new nr;else if(_e==="p192")tt=new pr;else if(_e==="p25519")tt=new ur;else throw new Error("Unknown prime "+_e);return xt[_e]=tt,tt};function Ot(ut){if(typeof ut=="string"){var _e=k._prime(ut);this.m=_e.p,this.prime=_e}else _(ut.gtn(1),"modulus must be greater than 1"),this.m=ut,this.prime=null}Ot.prototype._verify1=function(_e){_(_e.negative===0,"red works only with positives"),_(_e.red,"red works only with red numbers")},Ot.prototype._verify2=function(_e,tt){_((_e.negative|tt.negative)===0,"red works only with positives"),_(_e.red&&_e.red===tt.red,"red works only with red numbers")},Ot.prototype.imod=function(_e){return this.prime?this.prime.ireduce(_e)._forceRed(this):_e.umod(this.m)._forceRed(this)},Ot.prototype.neg=function(_e){return _e.isZero()?_e.clone():this.m.sub(_e)._forceRed(this)},Ot.prototype.add=function(_e,tt){this._verify2(_e,tt);var it=_e.add(tt);return it.cmp(this.m)>=0&&it.isub(this.m),it._forceRed(this)},Ot.prototype.iadd=function(_e,tt){this._verify2(_e,tt);var it=_e.iadd(tt);return it.cmp(this.m)>=0&&it.isub(this.m),it},Ot.prototype.sub=function(_e,tt){this._verify2(_e,tt);var it=_e.sub(tt);return it.cmpn(0)<0&&it.iadd(this.m),it._forceRed(this)},Ot.prototype.isub=function(_e,tt){this._verify2(_e,tt);var it=_e.isub(tt);return it.cmpn(0)<0&&it.iadd(this.m),it},Ot.prototype.shl=function(_e,tt){return this._verify1(_e),this.imod(_e.ushln(tt))},Ot.prototype.imul=function(_e,tt){return this._verify2(_e,tt),this.imod(_e.imul(tt))},Ot.prototype.mul=function(_e,tt){return this._verify2(_e,tt),this.imod(_e.mul(tt))},Ot.prototype.isqr=function(_e){return this.imul(_e,_e.clone())},Ot.prototype.sqr=function(_e){return this.mul(_e,_e)},Ot.prototype.sqrt=function(_e){if(_e.isZero())return _e.clone();var tt=this.m.andln(3);if(_(tt%2===1),tt===3){var it=this.m.add(new k(1)).iushrn(2);return this.pow(_e,it)}for(var dt=this.m.subn(1),lt=0;!dt.isZero()&&dt.andln(1)===0;)lt++,dt.iushrn(1);_(!dt.isZero());var gt=new k(1).toRed(this),Et=gt.redNeg(),pt=this.m.subn(1).iushrn(1),rt=this.m.bitLength();for(rt=new k(2*rt*rt).toRed(this);this.pow(rt,pt).cmp(Et)!==0;)rt.redIAdd(Et);for(var mt=this.pow(rt,dt),Lt=this.pow(_e,dt.addn(1).iushrn(1)),Gt=this.pow(_e,dt),rr=lt;Gt.cmp(gt)!==0;){for(var ir=Gt,Wt=0;ir.cmp(gt)!==0;Wt++)ir=ir.redSqr();_(Wt<rr);var zt=this.pow(mt,new k(1).iushln(rr-Wt-1));Lt=Lt.redMul(zt),mt=zt.redSqr(),Gt=Gt.redMul(mt),rr=Wt}return Lt},Ot.prototype.invm=function(_e){var tt=_e._invmp(this.m);return tt.negative!==0?(tt.negative=0,this.imod(tt).redNeg()):this.imod(tt)},Ot.prototype.pow=function(_e,tt){if(tt.isZero())return new k(1).toRed(this);if(tt.cmpn(1)===0)return _e.clone();var it=4,dt=new Array(1<<it);dt[0]=new k(1).toRed(this),dt[1]=_e;for(var lt=2;lt<dt.length;lt++)dt[lt]=this.mul(dt[lt-1],_e);var gt=dt[0],Et=0,pt=0,rt=tt.bitLength()%26;for(rt===0&&(rt=26),lt=tt.length-1;lt>=0;lt--){for(var mt=tt.words[lt],Lt=rt-1;Lt>=0;Lt--){var Gt=mt>>Lt&1;if(gt!==dt[0]&&(gt=this.sqr(gt)),Gt===0&&Et===0){pt=0;continue}Et<<=1,Et|=Gt,pt++,!(pt!==it&&(lt!==0||Lt!==0))&&(gt=this.mul(gt,dt[Et]),pt=0,Et=0)}rt=26}return gt},Ot.prototype.convertTo=function(_e){var tt=_e.umod(this.m);return tt===_e?tt.clone():tt},Ot.prototype.convertFrom=function(_e){var tt=_e.clone();return tt.red=null,tt},k.mont=function(_e){return new It(_e)};function It(ut){Ot.call(this,ut),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new k(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}$(It,Ot),It.prototype.convertTo=function(_e){return this.imod(_e.ushln(this.shift))},It.prototype.convertFrom=function(_e){var tt=this.imod(_e.mul(this.rinv));return tt.red=null,tt},It.prototype.imul=function(_e,tt){if(_e.isZero()||tt.isZero())return _e.words[0]=0,_e.length=1,_e;var it=_e.imul(tt),dt=it.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),lt=it.isub(dt).iushrn(this.shift),gt=lt;return lt.cmp(this.m)>=0?gt=lt.isub(this.m):lt.cmpn(0)<0&&(gt=lt.iadd(this.m)),gt._forceRed(this)},It.prototype.mul=function(_e,tt){if(_e.isZero()||tt.isZero())return new k(0)._forceRed(this);var it=_e.mul(tt),dt=it.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),lt=it.isub(dt).iushrn(this.shift),gt=lt;return lt.cmp(this.m)>=0?gt=lt.isub(this.m):lt.cmpn(0)<0&&(gt=lt.iadd(this.m)),gt._forceRed(this)},It.prototype.invm=function(_e){var tt=this.imod(_e._invmp(this.m).mul(this.r2));return tt._forceRed(this)}})(a,commonjsGlobal$1)})(bn$3);var bnExports$3=bn$3.exports,utils$u={};(function(a){var c=a;function b(k,et){if(Array.isArray(k))return k.slice();if(!k)return[];var nt=[];if(typeof k!="string"){for(var ot=0;ot<k.length;ot++)nt[ot]=k[ot]|0;return nt}if(et==="hex"){k=k.replace(/[^a-z0-9]+/ig,""),k.length%2!==0&&(k="0"+k);for(var ot=0;ot<k.length;ot+=2)nt.push(parseInt(k[ot]+k[ot+1],16))}else for(var ot=0;ot<k.length;ot++){var ht=k.charCodeAt(ot),vt=ht>>8,_t=ht&255;vt?nt.push(vt,_t):nt.push(_t)}return nt}c.toArray=b;function _(k){return k.length===1?"0"+k:k}c.zero2=_;function $(k){for(var et="",nt=0;nt<k.length;nt++)et+=_(k[nt].toString(16));return et}c.toHex=$,c.encode=function(et,nt){return nt==="hex"?$(et):et}})(utils$u);(function(a){var c=a,b=bnExports$3,_=minimalisticAssert,$=utils$u;c.assert=_,c.toArray=$.toArray,c.zero2=$.zero2,c.toHex=$.toHex,c.encode=$.encode;function k(vt,_t,kt){var $t=new Array(Math.max(vt.bitLength(),kt)+1);$t.fill(0);for(var Tt=1<<_t+1,At=vt.clone(),Mt=0;Mt<$t.length;Mt++){var Dt,Rt=At.andln(Tt-1);At.isOdd()?(Rt>(Tt>>1)-1?Dt=(Tt>>1)-Rt:Dt=Rt,At.isubn(Dt)):Dt=0,$t[Mt]=Dt,At.iushrn(1)}return $t}c.getNAF=k;function et(vt,_t){var kt=[[],[]];vt=vt.clone(),_t=_t.clone();for(var $t=0,Tt=0,At;vt.cmpn(-$t)>0||_t.cmpn(-Tt)>0;){var Mt=vt.andln(3)+$t&3,Dt=_t.andln(3)+Tt&3;Mt===3&&(Mt=-1),Dt===3&&(Dt=-1);var Rt;Mt&1?(At=vt.andln(7)+$t&7,(At===3||At===5)&&Dt===2?Rt=-Mt:Rt=Mt):Rt=0,kt[0].push(Rt);var xt;Dt&1?(At=_t.andln(7)+Tt&7,(At===3||At===5)&&Mt===2?xt=-Dt:xt=Dt):xt=0,kt[1].push(xt),2*$t===Rt+1&&($t=1-$t),2*Tt===xt+1&&(Tt=1-Tt),vt.iushrn(1),_t.iushrn(1)}return kt}c.getJSF=et;function nt(vt,_t,kt){var $t="_"+_t;vt.prototype[_t]=function(){return this[$t]!==void 0?this[$t]:this[$t]=kt.call(this)}}c.cachedProperty=nt;function ot(vt){return typeof vt=="string"?c.toArray(vt,"hex"):vt}c.parseBytes=ot;function ht(vt){return new b(vt,"hex","le")}c.intFromLE=ht})(utils$v);var curve={},BN$9=bnExports$3,utils$t=utils$v,getNAF=utils$t.getNAF,getJSF=utils$t.getJSF,assert$e=utils$t.assert;function BaseCurve(a,c){this.type=a,this.p=new BN$9(c.p,16),this.red=c.prime?BN$9.red(c.prime):BN$9.mont(this.p),this.zero=new BN$9(0).toRed(this.red),this.one=new BN$9(1).toRed(this.red),this.two=new BN$9(2).toRed(this.red),this.n=c.n&&new BN$9(c.n,16),this.g=c.g&&this.pointFromJSON(c.g,c.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var b=this.n&&this.p.div(this.n);!b||b.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}var base$1=BaseCurve;BaseCurve.prototype.point=function a(){throw new Error("Not implemented")};BaseCurve.prototype.validate=function a(){throw new Error("Not implemented")};BaseCurve.prototype._fixedNafMul=function a(c,b){assert$e(c.precomputed);var _=c._getDoubles(),$=getNAF(b,1,this._bitLength),k=(1<<_.step+1)-(_.step%2===0?2:1);k/=3;var et=[],nt,ot;for(nt=0;nt<$.length;nt+=_.step){ot=0;for(var ht=nt+_.step-1;ht>=nt;ht--)ot=(ot<<1)+$[ht];et.push(ot)}for(var vt=this.jpoint(null,null,null),_t=this.jpoint(null,null,null),kt=k;kt>0;kt--){for(nt=0;nt<et.length;nt++)ot=et[nt],ot===kt?_t=_t.mixedAdd(_.points[nt]):ot===-kt&&(_t=_t.mixedAdd(_.points[nt].neg()));vt=vt.add(_t)}return vt.toP()};BaseCurve.prototype._wnafMul=function a(c,b){var _=4,$=c._getNAFPoints(_);_=$.wnd;for(var k=$.points,et=getNAF(b,_,this._bitLength),nt=this.jpoint(null,null,null),ot=et.length-1;ot>=0;ot--){for(var ht=0;ot>=0&&et[ot]===0;ot--)ht++;if(ot>=0&&ht++,nt=nt.dblp(ht),ot<0)break;var vt=et[ot];assert$e(vt!==0),c.type==="affine"?vt>0?nt=nt.mixedAdd(k[vt-1>>1]):nt=nt.mixedAdd(k[-vt-1>>1].neg()):vt>0?nt=nt.add(k[vt-1>>1]):nt=nt.add(k[-vt-1>>1].neg())}return c.type==="affine"?nt.toP():nt};BaseCurve.prototype._wnafMulAdd=function a(c,b,_,$,k){var et=this._wnafT1,nt=this._wnafT2,ot=this._wnafT3,ht=0,vt,_t,kt;for(vt=0;vt<$;vt++){kt=b[vt];var $t=kt._getNAFPoints(c);et[vt]=$t.wnd,nt[vt]=$t.points}for(vt=$-1;vt>=1;vt-=2){var Tt=vt-1,At=vt;if(et[Tt]!==1||et[At]!==1){ot[Tt]=getNAF(_[Tt],et[Tt],this._bitLength),ot[At]=getNAF(_[At],et[At],this._bitLength),ht=Math.max(ot[Tt].length,ht),ht=Math.max(ot[At].length,ht);continue}var Mt=[b[Tt],null,null,b[At]];b[Tt].y.cmp(b[At].y)===0?(Mt[1]=b[Tt].add(b[At]),Mt[2]=b[Tt].toJ().mixedAdd(b[At].neg())):b[Tt].y.cmp(b[At].y.redNeg())===0?(Mt[1]=b[Tt].toJ().mixedAdd(b[At]),Mt[2]=b[Tt].add(b[At].neg())):(Mt[1]=b[Tt].toJ().mixedAdd(b[At]),Mt[2]=b[Tt].toJ().mixedAdd(b[At].neg()));var Dt=[-3,-1,-5,-7,0,7,5,1,3],Rt=getJSF(_[Tt],_[At]);for(ht=Math.max(Rt[0].length,ht),ot[Tt]=new Array(ht),ot[At]=new Array(ht),_t=0;_t<ht;_t++){var xt=Rt[0][_t]|0,Jt=Rt[1][_t]|0;ot[Tt][_t]=Dt[(xt+1)*3+(Jt+1)],ot[At][_t]=0,nt[Tt]=Mt}}var ar=this.jpoint(null,null,null),nr=this._wnafT4;for(vt=ht;vt>=0;vt--){for(var pr=0;vt>=0;){var ur=!0;for(_t=0;_t<$;_t++)nr[_t]=ot[_t][vt]|0,nr[_t]!==0&&(ur=!1);if(!ur)break;pr++,vt--}if(vt>=0&&pr++,ar=ar.dblp(pr),vt<0)break;for(_t=0;_t<$;_t++){var Ot=nr[_t];Ot!==0&&(Ot>0?kt=nt[_t][Ot-1>>1]:Ot<0&&(kt=nt[_t][-Ot-1>>1].neg()),kt.type==="affine"?ar=ar.mixedAdd(kt):ar=ar.add(kt))}}for(vt=0;vt<$;vt++)nt[vt]=null;return k?ar:ar.toP()};function BasePoint(a,c){this.curve=a,this.type=c,this.precomputed=null}BaseCurve.BasePoint=BasePoint;BasePoint.prototype.eq=function a(){throw new Error("Not implemented")};BasePoint.prototype.validate=function a(){return this.curve.validate(this)};BaseCurve.prototype.decodePoint=function a(c,b){c=utils$t.toArray(c,b);var _=this.p.byteLength();if((c[0]===4||c[0]===6||c[0]===7)&&c.length-1===2*_){c[0]===6?assert$e(c[c.length-1]%2===0):c[0]===7&&assert$e(c[c.length-1]%2===1);var $=this.point(c.slice(1,1+_),c.slice(1+_,1+2*_));return $}else if((c[0]===2||c[0]===3)&&c.length-1===_)return this.pointFromX(c.slice(1,1+_),c[0]===3);throw new Error("Unknown point format")};BasePoint.prototype.encodeCompressed=function a(c){return this.encode(c,!0)};BasePoint.prototype._encode=function a(c){var b=this.curve.p.byteLength(),_=this.getX().toArray("be",b);return c?[this.getY().isEven()?2:3].concat(_):[4].concat(_,this.getY().toArray("be",b))};BasePoint.prototype.encode=function a(c,b){return utils$t.encode(this._encode(b),c)};BasePoint.prototype.precompute=function a(c){if(this.precomputed)return this;var b={doubles:null,naf:null,beta:null};return b.naf=this._getNAFPoints(8),b.doubles=this._getDoubles(4,c),b.beta=this._getBeta(),this.precomputed=b,this};BasePoint.prototype._hasDoubles=function a(c){if(!this.precomputed)return!1;var b=this.precomputed.doubles;return b?b.points.length>=Math.ceil((c.bitLength()+1)/b.step):!1};BasePoint.prototype._getDoubles=function a(c,b){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var _=[this],$=this,k=0;k<b;k+=c){for(var et=0;et<c;et++)$=$.dbl();_.push($)}return{step:c,points:_}};BasePoint.prototype._getNAFPoints=function a(c){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var b=[this],_=(1<<c)-1,$=_===1?null:this.dbl(),k=1;k<_;k++)b[k]=b[k-1].add($);return{wnd:c,points:b}};BasePoint.prototype._getBeta=function a(){return null};BasePoint.prototype.dblp=function a(c){for(var b=this,_=0;_<c;_++)b=b.dbl();return b};var utils$s=utils$v,BN$8=bnExports$3,inherits$9=inherits_browserExports,Base$2=base$1,assert$d=utils$s.assert;function ShortCurve(a){Base$2.call(this,"short",a),this.a=new BN$8(a.a,16).toRed(this.red),this.b=new BN$8(a.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=this.a.fromRed().cmpn(0)===0,this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0,this.endo=this._getEndomorphism(a),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}inherits$9(ShortCurve,Base$2);var short=ShortCurve;ShortCurve.prototype._getEndomorphism=function a(c){if(!(!this.zeroA||!this.g||!this.n||this.p.modn(3)!==1)){var b,_;if(c.beta)b=new BN$8(c.beta,16).toRed(this.red);else{var $=this._getEndoRoots(this.p);b=$[0].cmp($[1])<0?$[0]:$[1],b=b.toRed(this.red)}if(c.lambda)_=new BN$8(c.lambda,16);else{var k=this._getEndoRoots(this.n);this.g.mul(k[0]).x.cmp(this.g.x.redMul(b))===0?_=k[0]:(_=k[1],assert$d(this.g.mul(_).x.cmp(this.g.x.redMul(b))===0))}var et;return c.basis?et=c.basis.map(function(nt){return{a:new BN$8(nt.a,16),b:new BN$8(nt.b,16)}}):et=this._getEndoBasis(_),{beta:b,lambda:_,basis:et}}};ShortCurve.prototype._getEndoRoots=function a(c){var b=c===this.p?this.red:BN$8.mont(c),_=new BN$8(2).toRed(b).redInvm(),$=_.redNeg(),k=new BN$8(3).toRed(b).redNeg().redSqrt().redMul(_),et=$.redAdd(k).fromRed(),nt=$.redSub(k).fromRed();return[et,nt]};ShortCurve.prototype._getEndoBasis=function a(c){for(var b=this.n.ushrn(Math.floor(this.n.bitLength()/2)),_=c,$=this.n.clone(),k=new BN$8(1),et=new BN$8(0),nt=new BN$8(0),ot=new BN$8(1),ht,vt,_t,kt,$t,Tt,At,Mt=0,Dt,Rt;_.cmpn(0)!==0;){var xt=$.div(_);Dt=$.sub(xt.mul(_)),Rt=nt.sub(xt.mul(k));var Jt=ot.sub(xt.mul(et));if(!_t&&Dt.cmp(b)<0)ht=At.neg(),vt=k,_t=Dt.neg(),kt=Rt;else if(_t&&++Mt===2)break;At=Dt,$=_,_=Dt,nt=k,k=Rt,ot=et,et=Jt}$t=Dt.neg(),Tt=Rt;var ar=_t.sqr().add(kt.sqr()),nr=$t.sqr().add(Tt.sqr());return nr.cmp(ar)>=0&&($t=ht,Tt=vt),_t.negative&&(_t=_t.neg(),kt=kt.neg()),$t.negative&&($t=$t.neg(),Tt=Tt.neg()),[{a:_t,b:kt},{a:$t,b:Tt}]};ShortCurve.prototype._endoSplit=function a(c){var b=this.endo.basis,_=b[0],$=b[1],k=$.b.mul(c).divRound(this.n),et=_.b.neg().mul(c).divRound(this.n),nt=k.mul(_.a),ot=et.mul($.a),ht=k.mul(_.b),vt=et.mul($.b),_t=c.sub(nt).sub(ot),kt=ht.add(vt).neg();return{k1:_t,k2:kt}};ShortCurve.prototype.pointFromX=function a(c,b){c=new BN$8(c,16),c.red||(c=c.toRed(this.red));var _=c.redSqr().redMul(c).redIAdd(c.redMul(this.a)).redIAdd(this.b),$=_.redSqrt();if($.redSqr().redSub(_).cmp(this.zero)!==0)throw new Error("invalid point");var k=$.fromRed().isOdd();return(b&&!k||!b&&k)&&($=$.redNeg()),this.point(c,$)};ShortCurve.prototype.validate=function a(c){if(c.inf)return!0;var b=c.x,_=c.y,$=this.a.redMul(b),k=b.redSqr().redMul(b).redIAdd($).redIAdd(this.b);return _.redSqr().redISub(k).cmpn(0)===0};ShortCurve.prototype._endoWnafMulAdd=function a(c,b,_){for(var $=this._endoWnafT1,k=this._endoWnafT2,et=0;et<c.length;et++){var nt=this._endoSplit(b[et]),ot=c[et],ht=ot._getBeta();nt.k1.negative&&(nt.k1.ineg(),ot=ot.neg(!0)),nt.k2.negative&&(nt.k2.ineg(),ht=ht.neg(!0)),$[et*2]=ot,$[et*2+1]=ht,k[et*2]=nt.k1,k[et*2+1]=nt.k2}for(var vt=this._wnafMulAdd(1,$,k,et*2,_),_t=0;_t<et*2;_t++)$[_t]=null,k[_t]=null;return vt};function Point$2(a,c,b,_){Base$2.BasePoint.call(this,a,"affine"),c===null&&b===null?(this.x=null,this.y=null,this.inf=!0):(this.x=new BN$8(c,16),this.y=new BN$8(b,16),_&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}inherits$9(Point$2,Base$2.BasePoint);ShortCurve.prototype.point=function a(c,b,_){return new Point$2(this,c,b,_)};ShortCurve.prototype.pointFromJSON=function a(c,b){return Point$2.fromJSON(this,c,b)};Point$2.prototype._getBeta=function a(){if(this.curve.endo){var c=this.precomputed;if(c&&c.beta)return c.beta;var b=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(c){var _=this.curve,$=function(k){return _.point(k.x.redMul(_.endo.beta),k.y)};c.beta=b,b.precomputed={beta:null,naf:c.naf&&{wnd:c.naf.wnd,points:c.naf.points.map($)},doubles:c.doubles&&{step:c.doubles.step,points:c.doubles.points.map($)}}}return b}};Point$2.prototype.toJSON=function a(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]};Point$2.fromJSON=function a(c,b,_){typeof b=="string"&&(b=JSON.parse(b));var $=c.point(b[0],b[1],_);if(!b[2])return $;function k(nt){return c.point(nt[0],nt[1],_)}var et=b[2];return $.precomputed={beta:null,doubles:et.doubles&&{step:et.doubles.step,points:[$].concat(et.doubles.points.map(k))},naf:et.naf&&{wnd:et.naf.wnd,points:[$].concat(et.naf.points.map(k))}},$};Point$2.prototype.inspect=function a(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"};Point$2.prototype.isInfinity=function a(){return this.inf};Point$2.prototype.add=function a(c){if(this.inf)return c;if(c.inf)return this;if(this.eq(c))return this.dbl();if(this.neg().eq(c))return this.curve.point(null,null);if(this.x.cmp(c.x)===0)return this.curve.point(null,null);var b=this.y.redSub(c.y);b.cmpn(0)!==0&&(b=b.redMul(this.x.redSub(c.x).redInvm()));var _=b.redSqr().redISub(this.x).redISub(c.x),$=b.redMul(this.x.redSub(_)).redISub(this.y);return this.curve.point(_,$)};Point$2.prototype.dbl=function a(){if(this.inf)return this;var c=this.y.redAdd(this.y);if(c.cmpn(0)===0)return this.curve.point(null,null);var b=this.curve.a,_=this.x.redSqr(),$=c.redInvm(),k=_.redAdd(_).redIAdd(_).redIAdd(b).redMul($),et=k.redSqr().redISub(this.x.redAdd(this.x)),nt=k.redMul(this.x.redSub(et)).redISub(this.y);return this.curve.point(et,nt)};Point$2.prototype.getX=function a(){return this.x.fromRed()};Point$2.prototype.getY=function a(){return this.y.fromRed()};Point$2.prototype.mul=function a(c){return c=new BN$8(c,16),this.isInfinity()?this:this._hasDoubles(c)?this.curve._fixedNafMul(this,c):this.curve.endo?this.curve._endoWnafMulAdd([this],[c]):this.curve._wnafMul(this,c)};Point$2.prototype.mulAdd=function a(c,b,_){var $=[this,b],k=[c,_];return this.curve.endo?this.curve._endoWnafMulAdd($,k):this.curve._wnafMulAdd(1,$,k,2)};Point$2.prototype.jmulAdd=function a(c,b,_){var $=[this,b],k=[c,_];return this.curve.endo?this.curve._endoWnafMulAdd($,k,!0):this.curve._wnafMulAdd(1,$,k,2,!0)};Point$2.prototype.eq=function a(c){return this===c||this.inf===c.inf&&(this.inf||this.x.cmp(c.x)===0&&this.y.cmp(c.y)===0)};Point$2.prototype.neg=function a(c){if(this.inf)return this;var b=this.curve.point(this.x,this.y.redNeg());if(c&&this.precomputed){var _=this.precomputed,$=function(k){return k.neg()};b.precomputed={naf:_.naf&&{wnd:_.naf.wnd,points:_.naf.points.map($)},doubles:_.doubles&&{step:_.doubles.step,points:_.doubles.points.map($)}}}return b};Point$2.prototype.toJ=function a(){if(this.inf)return this.curve.jpoint(null,null,null);var c=this.curve.jpoint(this.x,this.y,this.curve.one);return c};function JPoint(a,c,b,_){Base$2.BasePoint.call(this,a,"jacobian"),c===null&&b===null&&_===null?(this.x=this.curve.one,this.y=this.curve.one,this.z=new BN$8(0)):(this.x=new BN$8(c,16),this.y=new BN$8(b,16),this.z=new BN$8(_,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}inherits$9(JPoint,Base$2.BasePoint);ShortCurve.prototype.jpoint=function a(c,b,_){return new JPoint(this,c,b,_)};JPoint.prototype.toP=function a(){if(this.isInfinity())return this.curve.point(null,null);var c=this.z.redInvm(),b=c.redSqr(),_=this.x.redMul(b),$=this.y.redMul(b).redMul(c);return this.curve.point(_,$)};JPoint.prototype.neg=function a(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)};JPoint.prototype.add=function a(c){if(this.isInfinity())return c;if(c.isInfinity())return this;var b=c.z.redSqr(),_=this.z.redSqr(),$=this.x.redMul(b),k=c.x.redMul(_),et=this.y.redMul(b.redMul(c.z)),nt=c.y.redMul(_.redMul(this.z)),ot=$.redSub(k),ht=et.redSub(nt);if(ot.cmpn(0)===0)return ht.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var vt=ot.redSqr(),_t=vt.redMul(ot),kt=$.redMul(vt),$t=ht.redSqr().redIAdd(_t).redISub(kt).redISub(kt),Tt=ht.redMul(kt.redISub($t)).redISub(et.redMul(_t)),At=this.z.redMul(c.z).redMul(ot);return this.curve.jpoint($t,Tt,At)};JPoint.prototype.mixedAdd=function a(c){if(this.isInfinity())return c.toJ();if(c.isInfinity())return this;var b=this.z.redSqr(),_=this.x,$=c.x.redMul(b),k=this.y,et=c.y.redMul(b).redMul(this.z),nt=_.redSub($),ot=k.redSub(et);if(nt.cmpn(0)===0)return ot.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var ht=nt.redSqr(),vt=ht.redMul(nt),_t=_.redMul(ht),kt=ot.redSqr().redIAdd(vt).redISub(_t).redISub(_t),$t=ot.redMul(_t.redISub(kt)).redISub(k.redMul(vt)),Tt=this.z.redMul(nt);return this.curve.jpoint(kt,$t,Tt)};JPoint.prototype.dblp=function a(c){if(c===0)return this;if(this.isInfinity())return this;if(!c)return this.dbl();var b;if(this.curve.zeroA||this.curve.threeA){var _=this;for(b=0;b<c;b++)_=_.dbl();return _}var $=this.curve.a,k=this.curve.tinv,et=this.x,nt=this.y,ot=this.z,ht=ot.redSqr().redSqr(),vt=nt.redAdd(nt);for(b=0;b<c;b++){var _t=et.redSqr(),kt=vt.redSqr(),$t=kt.redSqr(),Tt=_t.redAdd(_t).redIAdd(_t).redIAdd($.redMul(ht)),At=et.redMul(kt),Mt=Tt.redSqr().redISub(At.redAdd(At)),Dt=At.redISub(Mt),Rt=Tt.redMul(Dt);Rt=Rt.redIAdd(Rt).redISub($t);var xt=vt.redMul(ot);b+1<c&&(ht=ht.redMul($t)),et=Mt,ot=xt,vt=Rt}return this.curve.jpoint(et,vt.redMul(k),ot)};JPoint.prototype.dbl=function a(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()};JPoint.prototype._zeroDbl=function a(){var c,b,_;if(this.zOne){var $=this.x.redSqr(),k=this.y.redSqr(),et=k.redSqr(),nt=this.x.redAdd(k).redSqr().redISub($).redISub(et);nt=nt.redIAdd(nt);var ot=$.redAdd($).redIAdd($),ht=ot.redSqr().redISub(nt).redISub(nt),vt=et.redIAdd(et);vt=vt.redIAdd(vt),vt=vt.redIAdd(vt),c=ht,b=ot.redMul(nt.redISub(ht)).redISub(vt),_=this.y.redAdd(this.y)}else{var _t=this.x.redSqr(),kt=this.y.redSqr(),$t=kt.redSqr(),Tt=this.x.redAdd(kt).redSqr().redISub(_t).redISub($t);Tt=Tt.redIAdd(Tt);var At=_t.redAdd(_t).redIAdd(_t),Mt=At.redSqr(),Dt=$t.redIAdd($t);Dt=Dt.redIAdd(Dt),Dt=Dt.redIAdd(Dt),c=Mt.redISub(Tt).redISub(Tt),b=At.redMul(Tt.redISub(c)).redISub(Dt),_=this.y.redMul(this.z),_=_.redIAdd(_)}return this.curve.jpoint(c,b,_)};JPoint.prototype._threeDbl=function a(){var c,b,_;if(this.zOne){var $=this.x.redSqr(),k=this.y.redSqr(),et=k.redSqr(),nt=this.x.redAdd(k).redSqr().redISub($).redISub(et);nt=nt.redIAdd(nt);var ot=$.redAdd($).redIAdd($).redIAdd(this.curve.a),ht=ot.redSqr().redISub(nt).redISub(nt);c=ht;var vt=et.redIAdd(et);vt=vt.redIAdd(vt),vt=vt.redIAdd(vt),b=ot.redMul(nt.redISub(ht)).redISub(vt),_=this.y.redAdd(this.y)}else{var _t=this.z.redSqr(),kt=this.y.redSqr(),$t=this.x.redMul(kt),Tt=this.x.redSub(_t).redMul(this.x.redAdd(_t));Tt=Tt.redAdd(Tt).redIAdd(Tt);var At=$t.redIAdd($t);At=At.redIAdd(At);var Mt=At.redAdd(At);c=Tt.redSqr().redISub(Mt),_=this.y.redAdd(this.z).redSqr().redISub(kt).redISub(_t);var Dt=kt.redSqr();Dt=Dt.redIAdd(Dt),Dt=Dt.redIAdd(Dt),Dt=Dt.redIAdd(Dt),b=Tt.redMul(At.redISub(c)).redISub(Dt)}return this.curve.jpoint(c,b,_)};JPoint.prototype._dbl=function a(){var c=this.curve.a,b=this.x,_=this.y,$=this.z,k=$.redSqr().redSqr(),et=b.redSqr(),nt=_.redSqr(),ot=et.redAdd(et).redIAdd(et).redIAdd(c.redMul(k)),ht=b.redAdd(b);ht=ht.redIAdd(ht);var vt=ht.redMul(nt),_t=ot.redSqr().redISub(vt.redAdd(vt)),kt=vt.redISub(_t),$t=nt.redSqr();$t=$t.redIAdd($t),$t=$t.redIAdd($t),$t=$t.redIAdd($t);var Tt=ot.redMul(kt).redISub($t),At=_.redAdd(_).redMul($);return this.curve.jpoint(_t,Tt,At)};JPoint.prototype.trpl=function a(){if(!this.curve.zeroA)return this.dbl().add(this);var c=this.x.redSqr(),b=this.y.redSqr(),_=this.z.redSqr(),$=b.redSqr(),k=c.redAdd(c).redIAdd(c),et=k.redSqr(),nt=this.x.redAdd(b).redSqr().redISub(c).redISub($);nt=nt.redIAdd(nt),nt=nt.redAdd(nt).redIAdd(nt),nt=nt.redISub(et);var ot=nt.redSqr(),ht=$.redIAdd($);ht=ht.redIAdd(ht),ht=ht.redIAdd(ht),ht=ht.redIAdd(ht);var vt=k.redIAdd(nt).redSqr().redISub(et).redISub(ot).redISub(ht),_t=b.redMul(vt);_t=_t.redIAdd(_t),_t=_t.redIAdd(_t);var kt=this.x.redMul(ot).redISub(_t);kt=kt.redIAdd(kt),kt=kt.redIAdd(kt);var $t=this.y.redMul(vt.redMul(ht.redISub(vt)).redISub(nt.redMul(ot)));$t=$t.redIAdd($t),$t=$t.redIAdd($t),$t=$t.redIAdd($t);var Tt=this.z.redAdd(nt).redSqr().redISub(_).redISub(ot);return this.curve.jpoint(kt,$t,Tt)};JPoint.prototype.mul=function a(c,b){return c=new BN$8(c,b),this.curve._wnafMul(this,c)};JPoint.prototype.eq=function a(c){if(c.type==="affine")return this.eq(c.toJ());if(this===c)return!0;var b=this.z.redSqr(),_=c.z.redSqr();if(this.x.redMul(_).redISub(c.x.redMul(b)).cmpn(0)!==0)return!1;var $=b.redMul(this.z),k=_.redMul(c.z);return this.y.redMul(k).redISub(c.y.redMul($)).cmpn(0)===0};JPoint.prototype.eqXToP=function a(c){var b=this.z.redSqr(),_=c.toRed(this.curve.red).redMul(b);if(this.x.cmp(_)===0)return!0;for(var $=c.clone(),k=this.curve.redN.redMul(b);;){if($.iadd(this.curve.n),$.cmp(this.curve.p)>=0)return!1;if(_.redIAdd(k),this.x.cmp(_)===0)return!0}};JPoint.prototype.inspect=function a(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"};JPoint.prototype.isInfinity=function a(){return this.z.cmpn(0)===0};var BN$7=bnExports$3,inherits$8=inherits_browserExports,Base$1=base$1,utils$r=utils$v;function MontCurve(a){Base$1.call(this,"mont",a),this.a=new BN$7(a.a,16).toRed(this.red),this.b=new BN$7(a.b,16).toRed(this.red),this.i4=new BN$7(4).toRed(this.red).redInvm(),this.two=new BN$7(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}inherits$8(MontCurve,Base$1);var mont=MontCurve;MontCurve.prototype.validate=function a(c){var b=c.normalize().x,_=b.redSqr(),$=_.redMul(b).redAdd(_.redMul(this.a)).redAdd(b),k=$.redSqrt();return k.redSqr().cmp($)===0};function Point$1(a,c,b){Base$1.BasePoint.call(this,a,"projective"),c===null&&b===null?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new BN$7(c,16),this.z=new BN$7(b,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}inherits$8(Point$1,Base$1.BasePoint);MontCurve.prototype.decodePoint=function a(c,b){return this.point(utils$r.toArray(c,b),1)};MontCurve.prototype.point=function a(c,b){return new Point$1(this,c,b)};MontCurve.prototype.pointFromJSON=function a(c){return Point$1.fromJSON(this,c)};Point$1.prototype.precompute=function a(){};Point$1.prototype._encode=function a(){return this.getX().toArray("be",this.curve.p.byteLength())};Point$1.fromJSON=function a(c,b){return new Point$1(c,b[0],b[1]||c.one)};Point$1.prototype.inspect=function a(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"};Point$1.prototype.isInfinity=function a(){return this.z.cmpn(0)===0};Point$1.prototype.dbl=function a(){var c=this.x.redAdd(this.z),b=c.redSqr(),_=this.x.redSub(this.z),$=_.redSqr(),k=b.redSub($),et=b.redMul($),nt=k.redMul($.redAdd(this.curve.a24.redMul(k)));return this.curve.point(et,nt)};Point$1.prototype.add=function a(){throw new Error("Not supported on Montgomery curve")};Point$1.prototype.diffAdd=function a(c,b){var _=this.x.redAdd(this.z),$=this.x.redSub(this.z),k=c.x.redAdd(c.z),et=c.x.redSub(c.z),nt=et.redMul(_),ot=k.redMul($),ht=b.z.redMul(nt.redAdd(ot).redSqr()),vt=b.x.redMul(nt.redISub(ot).redSqr());return this.curve.point(ht,vt)};Point$1.prototype.mul=function a(c){for(var b=c.clone(),_=this,$=this.curve.point(null,null),k=this,et=[];b.cmpn(0)!==0;b.iushrn(1))et.push(b.andln(1));for(var nt=et.length-1;nt>=0;nt--)et[nt]===0?(_=_.diffAdd($,k),$=$.dbl()):($=_.diffAdd($,k),_=_.dbl());return $};Point$1.prototype.mulAdd=function a(){throw new Error("Not supported on Montgomery curve")};Point$1.prototype.jumlAdd=function a(){throw new Error("Not supported on Montgomery curve")};Point$1.prototype.eq=function a(c){return this.getX().cmp(c.getX())===0};Point$1.prototype.normalize=function a(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this};Point$1.prototype.getX=function a(){return this.normalize(),this.x.fromRed()};var utils$q=utils$v,BN$6=bnExports$3,inherits$7=inherits_browserExports,Base=base$1,assert$c=utils$q.assert;function EdwardsCurve(a){this.twisted=(a.a|0)!==1,this.mOneA=this.twisted&&(a.a|0)===-1,this.extended=this.mOneA,Base.call(this,"edwards",a),this.a=new BN$6(a.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new BN$6(a.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new BN$6(a.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),assert$c(!this.twisted||this.c.fromRed().cmpn(1)===0),this.oneC=(a.c|0)===1}inherits$7(EdwardsCurve,Base);var edwards=EdwardsCurve;EdwardsCurve.prototype._mulA=function a(c){return this.mOneA?c.redNeg():this.a.redMul(c)};EdwardsCurve.prototype._mulC=function a(c){return this.oneC?c:this.c.redMul(c)};EdwardsCurve.prototype.jpoint=function a(c,b,_,$){return this.point(c,b,_,$)};EdwardsCurve.prototype.pointFromX=function a(c,b){c=new BN$6(c,16),c.red||(c=c.toRed(this.red));var _=c.redSqr(),$=this.c2.redSub(this.a.redMul(_)),k=this.one.redSub(this.c2.redMul(this.d).redMul(_)),et=$.redMul(k.redInvm()),nt=et.redSqrt();if(nt.redSqr().redSub(et).cmp(this.zero)!==0)throw new Error("invalid point");var ot=nt.fromRed().isOdd();return(b&&!ot||!b&&ot)&&(nt=nt.redNeg()),this.point(c,nt)};EdwardsCurve.prototype.pointFromY=function a(c,b){c=new BN$6(c,16),c.red||(c=c.toRed(this.red));var _=c.redSqr(),$=_.redSub(this.c2),k=_.redMul(this.d).redMul(this.c2).redSub(this.a),et=$.redMul(k.redInvm());if(et.cmp(this.zero)===0){if(b)throw new Error("invalid point");return this.point(this.zero,c)}var nt=et.redSqrt();if(nt.redSqr().redSub(et).cmp(this.zero)!==0)throw new Error("invalid point");return nt.fromRed().isOdd()!==b&&(nt=nt.redNeg()),this.point(nt,c)};EdwardsCurve.prototype.validate=function a(c){if(c.isInfinity())return!0;c.normalize();var b=c.x.redSqr(),_=c.y.redSqr(),$=b.redMul(this.a).redAdd(_),k=this.c2.redMul(this.one.redAdd(this.d.redMul(b).redMul(_)));return $.cmp(k)===0};function Point(a,c,b,_,$){Base.BasePoint.call(this,a,"projective"),c===null&&b===null&&_===null?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new BN$6(c,16),this.y=new BN$6(b,16),this.z=_?new BN$6(_,16):this.curve.one,this.t=$&&new BN$6($,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}inherits$7(Point,Base.BasePoint);EdwardsCurve.prototype.pointFromJSON=function a(c){return Point.fromJSON(this,c)};EdwardsCurve.prototype.point=function a(c,b,_,$){return new Point(this,c,b,_,$)};Point.fromJSON=function a(c,b){return new Point(c,b[0],b[1],b[2])};Point.prototype.inspect=function a(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"};Point.prototype.isInfinity=function a(){return this.x.cmpn(0)===0&&(this.y.cmp(this.z)===0||this.zOne&&this.y.cmp(this.curve.c)===0)};Point.prototype._extDbl=function a(){var c=this.x.redSqr(),b=this.y.redSqr(),_=this.z.redSqr();_=_.redIAdd(_);var $=this.curve._mulA(c),k=this.x.redAdd(this.y).redSqr().redISub(c).redISub(b),et=$.redAdd(b),nt=et.redSub(_),ot=$.redSub(b),ht=k.redMul(nt),vt=et.redMul(ot),_t=k.redMul(ot),kt=nt.redMul(et);return this.curve.point(ht,vt,kt,_t)};Point.prototype._projDbl=function a(){var c=this.x.redAdd(this.y).redSqr(),b=this.x.redSqr(),_=this.y.redSqr(),$,k,et,nt,ot,ht;if(this.curve.twisted){nt=this.curve._mulA(b);var vt=nt.redAdd(_);this.zOne?($=c.redSub(b).redSub(_).redMul(vt.redSub(this.curve.two)),k=vt.redMul(nt.redSub(_)),et=vt.redSqr().redSub(vt).redSub(vt)):(ot=this.z.redSqr(),ht=vt.redSub(ot).redISub(ot),$=c.redSub(b).redISub(_).redMul(ht),k=vt.redMul(nt.redSub(_)),et=vt.redMul(ht))}else nt=b.redAdd(_),ot=this.curve._mulC(this.z).redSqr(),ht=nt.redSub(ot).redSub(ot),$=this.curve._mulC(c.redISub(nt)).redMul(ht),k=this.curve._mulC(nt).redMul(b.redISub(_)),et=nt.redMul(ht);return this.curve.point($,k,et)};Point.prototype.dbl=function a(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()};Point.prototype._extAdd=function a(c){var b=this.y.redSub(this.x).redMul(c.y.redSub(c.x)),_=this.y.redAdd(this.x).redMul(c.y.redAdd(c.x)),$=this.t.redMul(this.curve.dd).redMul(c.t),k=this.z.redMul(c.z.redAdd(c.z)),et=_.redSub(b),nt=k.redSub($),ot=k.redAdd($),ht=_.redAdd(b),vt=et.redMul(nt),_t=ot.redMul(ht),kt=et.redMul(ht),$t=nt.redMul(ot);return this.curve.point(vt,_t,$t,kt)};Point.prototype._projAdd=function a(c){var b=this.z.redMul(c.z),_=b.redSqr(),$=this.x.redMul(c.x),k=this.y.redMul(c.y),et=this.curve.d.redMul($).redMul(k),nt=_.redSub(et),ot=_.redAdd(et),ht=this.x.redAdd(this.y).redMul(c.x.redAdd(c.y)).redISub($).redISub(k),vt=b.redMul(nt).redMul(ht),_t,kt;return this.curve.twisted?(_t=b.redMul(ot).redMul(k.redSub(this.curve._mulA($))),kt=nt.redMul(ot)):(_t=b.redMul(ot).redMul(k.redSub($)),kt=this.curve._mulC(nt).redMul(ot)),this.curve.point(vt,_t,kt)};Point.prototype.add=function a(c){return this.isInfinity()?c:c.isInfinity()?this:this.curve.extended?this._extAdd(c):this._projAdd(c)};Point.prototype.mul=function a(c){return this._hasDoubles(c)?this.curve._fixedNafMul(this,c):this.curve._wnafMul(this,c)};Point.prototype.mulAdd=function a(c,b,_){return this.curve._wnafMulAdd(1,[this,b],[c,_],2,!1)};Point.prototype.jmulAdd=function a(c,b,_){return this.curve._wnafMulAdd(1,[this,b],[c,_],2,!0)};Point.prototype.normalize=function a(){if(this.zOne)return this;var c=this.z.redInvm();return this.x=this.x.redMul(c),this.y=this.y.redMul(c),this.t&&(this.t=this.t.redMul(c)),this.z=this.curve.one,this.zOne=!0,this};Point.prototype.neg=function a(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())};Point.prototype.getX=function a(){return this.normalize(),this.x.fromRed()};Point.prototype.getY=function a(){return this.normalize(),this.y.fromRed()};Point.prototype.eq=function a(c){return this===c||this.getX().cmp(c.getX())===0&&this.getY().cmp(c.getY())===0};Point.prototype.eqXToP=function a(c){var b=c.toRed(this.curve.red).redMul(this.z);if(this.x.cmp(b)===0)return!0;for(var _=c.clone(),$=this.curve.redN.redMul(this.z);;){if(_.iadd(this.curve.n),_.cmp(this.curve.p)>=0)return!1;if(b.redIAdd($),this.x.cmp(b)===0)return!0}};Point.prototype.toP=Point.prototype.normalize;Point.prototype.mixedAdd=Point.prototype.add;(function(a){var c=a;c.base=base$1,c.short=short,c.mont=mont,c.edwards=edwards})(curve);var curves$1={},hash$2={},utils$p={},assert$b=minimalisticAssert,inherits$6=inherits_browserExports;utils$p.inherits=inherits$6;function isSurrogatePair(a,c){return(a.charCodeAt(c)&64512)!==55296||c<0||c+1>=a.length?!1:(a.charCodeAt(c+1)&64512)===56320}function toArray(a,c){if(Array.isArray(a))return a.slice();if(!a)return[];var b=[];if(typeof a=="string")if(c){if(c==="hex")for(a=a.replace(/[^a-z0-9]+/ig,""),a.length%2!==0&&(a="0"+a),$=0;$<a.length;$+=2)b.push(parseInt(a[$]+a[$+1],16))}else for(var _=0,$=0;$<a.length;$++){var k=a.charCodeAt($);k<128?b[_++]=k:k<2048?(b[_++]=k>>6|192,b[_++]=k&63|128):isSurrogatePair(a,$)?(k=65536+((k&1023)<<10)+(a.charCodeAt(++$)&1023),b[_++]=k>>18|240,b[_++]=k>>12&63|128,b[_++]=k>>6&63|128,b[_++]=k&63|128):(b[_++]=k>>12|224,b[_++]=k>>6&63|128,b[_++]=k&63|128)}else for($=0;$<a.length;$++)b[$]=a[$]|0;return b}utils$p.toArray=toArray;function toHex$1(a){for(var c="",b=0;b<a.length;b++)c+=zero2(a[b].toString(16));return c}utils$p.toHex=toHex$1;function htonl(a){var c=a>>>24|a>>>8&65280|a<<8&16711680|(a&255)<<24;return c>>>0}utils$p.htonl=htonl;function toHex32(a,c){for(var b="",_=0;_<a.length;_++){var $=a[_];c==="little"&&($=htonl($)),b+=zero8($.toString(16))}return b}utils$p.toHex32=toHex32;function zero2(a){return a.length===1?"0"+a:a}utils$p.zero2=zero2;function zero8(a){return a.length===7?"0"+a:a.length===6?"00"+a:a.length===5?"000"+a:a.length===4?"0000"+a:a.length===3?"00000"+a:a.length===2?"000000"+a:a.length===1?"0000000"+a:a}utils$p.zero8=zero8;function join32(a,c,b,_){var $=b-c;assert$b($%4===0);for(var k=new Array($/4),et=0,nt=c;et<k.length;et++,nt+=4){var ot;_==="big"?ot=a[nt]<<24|a[nt+1]<<16|a[nt+2]<<8|a[nt+3]:ot=a[nt+3]<<24|a[nt+2]<<16|a[nt+1]<<8|a[nt],k[et]=ot>>>0}return k}utils$p.join32=join32;function split32(a,c){for(var b=new Array(a.length*4),_=0,$=0;_<a.length;_++,$+=4){var k=a[_];c==="big"?(b[$]=k>>>24,b[$+1]=k>>>16&255,b[$+2]=k>>>8&255,b[$+3]=k&255):(b[$+3]=k>>>24,b[$+2]=k>>>16&255,b[$+1]=k>>>8&255,b[$]=k&255)}return b}utils$p.split32=split32;function rotr32$1(a,c){return a>>>c|a<<32-c}utils$p.rotr32=rotr32$1;function rotl32$2(a,c){return a<<c|a>>>32-c}utils$p.rotl32=rotl32$2;function sum32$3(a,c){return a+c>>>0}utils$p.sum32=sum32$3;function sum32_3$1(a,c,b){return a+c+b>>>0}utils$p.sum32_3=sum32_3$1;function sum32_4$2(a,c,b,_){return a+c+b+_>>>0}utils$p.sum32_4=sum32_4$2;function sum32_5$2(a,c,b,_,$){return a+c+b+_+$>>>0}utils$p.sum32_5=sum32_5$2;function sum64$1(a,c,b,_){var $=a[c],k=a[c+1],et=_+k>>>0,nt=(et<_?1:0)+b+$;a[c]=nt>>>0,a[c+1]=et}utils$p.sum64=sum64$1;function sum64_hi$1(a,c,b,_){var $=c+_>>>0,k=($<c?1:0)+a+b;return k>>>0}utils$p.sum64_hi=sum64_hi$1;function sum64_lo$1(a,c,b,_){var $=c+_;return $>>>0}utils$p.sum64_lo=sum64_lo$1;function sum64_4_hi$1(a,c,b,_,$,k,et,nt){var ot=0,ht=c;ht=ht+_>>>0,ot+=ht<c?1:0,ht=ht+k>>>0,ot+=ht<k?1:0,ht=ht+nt>>>0,ot+=ht<nt?1:0;var vt=a+b+$+et+ot;return vt>>>0}utils$p.sum64_4_hi=sum64_4_hi$1;function sum64_4_lo$1(a,c,b,_,$,k,et,nt){var ot=c+_+k+nt;return ot>>>0}utils$p.sum64_4_lo=sum64_4_lo$1;function sum64_5_hi$1(a,c,b,_,$,k,et,nt,ot,ht){var vt=0,_t=c;_t=_t+_>>>0,vt+=_t<c?1:0,_t=_t+k>>>0,vt+=_t<k?1:0,_t=_t+nt>>>0,vt+=_t<nt?1:0,_t=_t+ht>>>0,vt+=_t<ht?1:0;var kt=a+b+$+et+ot+vt;return kt>>>0}utils$p.sum64_5_hi=sum64_5_hi$1;function sum64_5_lo$1(a,c,b,_,$,k,et,nt,ot,ht){var vt=c+_+k+nt+ht;return vt>>>0}utils$p.sum64_5_lo=sum64_5_lo$1;function rotr64_hi$1(a,c,b){var _=c<<32-b|a>>>b;return _>>>0}utils$p.rotr64_hi=rotr64_hi$1;function rotr64_lo$1(a,c,b){var _=a<<32-b|c>>>b;return _>>>0}utils$p.rotr64_lo=rotr64_lo$1;function shr64_hi$1(a,c,b){return a>>>b}utils$p.shr64_hi=shr64_hi$1;function shr64_lo$1(a,c,b){var _=a<<32-b|c>>>b;return _>>>0}utils$p.shr64_lo=shr64_lo$1;var common$5={},utils$o=utils$p,assert$a=minimalisticAssert;function BlockHash$4(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}common$5.BlockHash=BlockHash$4;BlockHash$4.prototype.update=function a(c,b){if(c=utils$o.toArray(c,b),this.pending?this.pending=this.pending.concat(c):this.pending=c,this.pendingTotal+=c.length,this.pending.length>=this._delta8){c=this.pending;var _=c.length%this._delta8;this.pending=c.slice(c.length-_,c.length),this.pending.length===0&&(this.pending=null),c=utils$o.join32(c,0,c.length-_,this.endian);for(var $=0;$<c.length;$+=this._delta32)this._update(c,$,$+this._delta32)}return this};BlockHash$4.prototype.digest=function a(c){return this.update(this._pad()),assert$a(this.pending===null),this._digest(c)};BlockHash$4.prototype._pad=function a(){var c=this.pendingTotal,b=this._delta8,_=b-(c+this.padLength)%b,$=new Array(_+this.padLength);$[0]=128;for(var k=1;k<_;k++)$[k]=0;if(c<<=3,this.endian==="big"){for(var et=8;et<this.padLength;et++)$[k++]=0;$[k++]=0,$[k++]=0,$[k++]=0,$[k++]=0,$[k++]=c>>>24&255,$[k++]=c>>>16&255,$[k++]=c>>>8&255,$[k++]=c&255}else for($[k++]=c&255,$[k++]=c>>>8&255,$[k++]=c>>>16&255,$[k++]=c>>>24&255,$[k++]=0,$[k++]=0,$[k++]=0,$[k++]=0,et=8;et<this.padLength;et++)$[k++]=0;return $};var sha={},common$4={},utils$n=utils$p,rotr32=utils$n.rotr32;function ft_1$1(a,c,b,_){if(a===0)return ch32$1(c,b,_);if(a===1||a===3)return p32(c,b,_);if(a===2)return maj32$1(c,b,_)}common$4.ft_1=ft_1$1;function ch32$1(a,c,b){return a&c^~a&b}common$4.ch32=ch32$1;function maj32$1(a,c,b){return a&c^a&b^c&b}common$4.maj32=maj32$1;function p32(a,c,b){return a^c^b}common$4.p32=p32;function s0_256$1(a){return rotr32(a,2)^rotr32(a,13)^rotr32(a,22)}common$4.s0_256=s0_256$1;function s1_256$1(a){return rotr32(a,6)^rotr32(a,11)^rotr32(a,25)}common$4.s1_256=s1_256$1;function g0_256$1(a){return rotr32(a,7)^rotr32(a,18)^a>>>3}common$4.g0_256=g0_256$1;function g1_256$1(a){return rotr32(a,17)^rotr32(a,19)^a>>>10}common$4.g1_256=g1_256$1;var utils$m=utils$p,common$3=common$5,shaCommon$1=common$4,rotl32$1=utils$m.rotl32,sum32$2=utils$m.sum32,sum32_5$1=utils$m.sum32_5,ft_1=shaCommon$1.ft_1,BlockHash$3=common$3.BlockHash,sha1_K=[1518500249,1859775393,2400959708,3395469782];function SHA1(){if(!(this instanceof SHA1))return new SHA1;BlockHash$3.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}utils$m.inherits(SHA1,BlockHash$3);var _1=SHA1;SHA1.blockSize=512;SHA1.outSize=160;SHA1.hmacStrength=80;SHA1.padLength=64;SHA1.prototype._update=function a(c,b){for(var _=this.W,$=0;$<16;$++)_[$]=c[b+$];for(;$<_.length;$++)_[$]=rotl32$1(_[$-3]^_[$-8]^_[$-14]^_[$-16],1);var k=this.h[0],et=this.h[1],nt=this.h[2],ot=this.h[3],ht=this.h[4];for($=0;$<_.length;$++){var vt=~~($/20),_t=sum32_5$1(rotl32$1(k,5),ft_1(vt,et,nt,ot),ht,_[$],sha1_K[vt]);ht=ot,ot=nt,nt=rotl32$1(et,30),et=k,k=_t}this.h[0]=sum32$2(this.h[0],k),this.h[1]=sum32$2(this.h[1],et),this.h[2]=sum32$2(this.h[2],nt),this.h[3]=sum32$2(this.h[3],ot),this.h[4]=sum32$2(this.h[4],ht)};SHA1.prototype._digest=function a(c){return c==="hex"?utils$m.toHex32(this.h,"big"):utils$m.split32(this.h,"big")};var utils$l=utils$p,common$2=common$5,shaCommon=common$4,assert$9=minimalisticAssert,sum32$1=utils$l.sum32,sum32_4$1=utils$l.sum32_4,sum32_5=utils$l.sum32_5,ch32=shaCommon.ch32,maj32=shaCommon.maj32,s0_256=shaCommon.s0_256,s1_256=shaCommon.s1_256,g0_256=shaCommon.g0_256,g1_256=shaCommon.g1_256,BlockHash$2=common$2.BlockHash,sha256_K=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function SHA256$1(){if(!(this instanceof SHA256$1))return new SHA256$1;BlockHash$2.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=sha256_K,this.W=new Array(64)}utils$l.inherits(SHA256$1,BlockHash$2);var _256=SHA256$1;SHA256$1.blockSize=512;SHA256$1.outSize=256;SHA256$1.hmacStrength=192;SHA256$1.padLength=64;SHA256$1.prototype._update=function a(c,b){for(var _=this.W,$=0;$<16;$++)_[$]=c[b+$];for(;$<_.length;$++)_[$]=sum32_4$1(g1_256(_[$-2]),_[$-7],g0_256(_[$-15]),_[$-16]);var k=this.h[0],et=this.h[1],nt=this.h[2],ot=this.h[3],ht=this.h[4],vt=this.h[5],_t=this.h[6],kt=this.h[7];for(assert$9(this.k.length===_.length),$=0;$<_.length;$++){var $t=sum32_5(kt,s1_256(ht),ch32(ht,vt,_t),this.k[$],_[$]),Tt=sum32$1(s0_256(k),maj32(k,et,nt));kt=_t,_t=vt,vt=ht,ht=sum32$1(ot,$t),ot=nt,nt=et,et=k,k=sum32$1($t,Tt)}this.h[0]=sum32$1(this.h[0],k),this.h[1]=sum32$1(this.h[1],et),this.h[2]=sum32$1(this.h[2],nt),this.h[3]=sum32$1(this.h[3],ot),this.h[4]=sum32$1(this.h[4],ht),this.h[5]=sum32$1(this.h[5],vt),this.h[6]=sum32$1(this.h[6],_t),this.h[7]=sum32$1(this.h[7],kt)};SHA256$1.prototype._digest=function a(c){return c==="hex"?utils$l.toHex32(this.h,"big"):utils$l.split32(this.h,"big")};var utils$k=utils$p,SHA256=_256;function SHA224(){if(!(this instanceof SHA224))return new SHA224;SHA256.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}utils$k.inherits(SHA224,SHA256);var _224=SHA224;SHA224.blockSize=512;SHA224.outSize=224;SHA224.hmacStrength=192;SHA224.padLength=64;SHA224.prototype._digest=function a(c){return c==="hex"?utils$k.toHex32(this.h.slice(0,7),"big"):utils$k.split32(this.h.slice(0,7),"big")};var utils$j=utils$p,common$1=common$5,assert$8=minimalisticAssert,rotr64_hi=utils$j.rotr64_hi,rotr64_lo=utils$j.rotr64_lo,shr64_hi=utils$j.shr64_hi,shr64_lo=utils$j.shr64_lo,sum64=utils$j.sum64,sum64_hi=utils$j.sum64_hi,sum64_lo=utils$j.sum64_lo,sum64_4_hi=utils$j.sum64_4_hi,sum64_4_lo=utils$j.sum64_4_lo,sum64_5_hi=utils$j.sum64_5_hi,sum64_5_lo=utils$j.sum64_5_lo,BlockHash$1=common$1.BlockHash,sha512_K=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function SHA512$1(){if(!(this instanceof SHA512$1))return new SHA512$1;BlockHash$1.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=sha512_K,this.W=new Array(160)}utils$j.inherits(SHA512$1,BlockHash$1);var _512=SHA512$1;SHA512$1.blockSize=1024;SHA512$1.outSize=512;SHA512$1.hmacStrength=192;SHA512$1.padLength=128;SHA512$1.prototype._prepareBlock=function a(c,b){for(var _=this.W,$=0;$<32;$++)_[$]=c[b+$];for(;$<_.length;$+=2){var k=g1_512_hi(_[$-4],_[$-3]),et=g1_512_lo(_[$-4],_[$-3]),nt=_[$-14],ot=_[$-13],ht=g0_512_hi(_[$-30],_[$-29]),vt=g0_512_lo(_[$-30],_[$-29]),_t=_[$-32],kt=_[$-31];_[$]=sum64_4_hi(k,et,nt,ot,ht,vt,_t,kt),_[$+1]=sum64_4_lo(k,et,nt,ot,ht,vt,_t,kt)}};SHA512$1.prototype._update=function a(c,b){this._prepareBlock(c,b);var _=this.W,$=this.h[0],k=this.h[1],et=this.h[2],nt=this.h[3],ot=this.h[4],ht=this.h[5],vt=this.h[6],_t=this.h[7],kt=this.h[8],$t=this.h[9],Tt=this.h[10],At=this.h[11],Mt=this.h[12],Dt=this.h[13],Rt=this.h[14],xt=this.h[15];assert$8(this.k.length===_.length);for(var Jt=0;Jt<_.length;Jt+=2){var ar=Rt,nr=xt,pr=s1_512_hi(kt,$t),ur=s1_512_lo(kt,$t),Ot=ch64_hi(kt,$t,Tt,At,Mt),It=ch64_lo(kt,$t,Tt,At,Mt,Dt),ut=this.k[Jt],_e=this.k[Jt+1],tt=_[Jt],it=_[Jt+1],dt=sum64_5_hi(ar,nr,pr,ur,Ot,It,ut,_e,tt,it),lt=sum64_5_lo(ar,nr,pr,ur,Ot,It,ut,_e,tt,it);ar=s0_512_hi($,k),nr=s0_512_lo($,k),pr=maj64_hi($,k,et,nt,ot),ur=maj64_lo($,k,et,nt,ot,ht);var gt=sum64_hi(ar,nr,pr,ur),Et=sum64_lo(ar,nr,pr,ur);Rt=Mt,xt=Dt,Mt=Tt,Dt=At,Tt=kt,At=$t,kt=sum64_hi(vt,_t,dt,lt),$t=sum64_lo(_t,_t,dt,lt),vt=ot,_t=ht,ot=et,ht=nt,et=$,nt=k,$=sum64_hi(dt,lt,gt,Et),k=sum64_lo(dt,lt,gt,Et)}sum64(this.h,0,$,k),sum64(this.h,2,et,nt),sum64(this.h,4,ot,ht),sum64(this.h,6,vt,_t),sum64(this.h,8,kt,$t),sum64(this.h,10,Tt,At),sum64(this.h,12,Mt,Dt),sum64(this.h,14,Rt,xt)};SHA512$1.prototype._digest=function a(c){return c==="hex"?utils$j.toHex32(this.h,"big"):utils$j.split32(this.h,"big")};function ch64_hi(a,c,b,_,$){var k=a&b^~a&$;return k<0&&(k+=4294967296),k}function ch64_lo(a,c,b,_,$,k){var et=c&_^~c&k;return et<0&&(et+=4294967296),et}function maj64_hi(a,c,b,_,$){var k=a&b^a&$^b&$;return k<0&&(k+=4294967296),k}function maj64_lo(a,c,b,_,$,k){var et=c&_^c&k^_&k;return et<0&&(et+=4294967296),et}function s0_512_hi(a,c){var b=rotr64_hi(a,c,28),_=rotr64_hi(c,a,2),$=rotr64_hi(c,a,7),k=b^_^$;return k<0&&(k+=4294967296),k}function s0_512_lo(a,c){var b=rotr64_lo(a,c,28),_=rotr64_lo(c,a,2),$=rotr64_lo(c,a,7),k=b^_^$;return k<0&&(k+=4294967296),k}function s1_512_hi(a,c){var b=rotr64_hi(a,c,14),_=rotr64_hi(a,c,18),$=rotr64_hi(c,a,9),k=b^_^$;return k<0&&(k+=4294967296),k}function s1_512_lo(a,c){var b=rotr64_lo(a,c,14),_=rotr64_lo(a,c,18),$=rotr64_lo(c,a,9),k=b^_^$;return k<0&&(k+=4294967296),k}function g0_512_hi(a,c){var b=rotr64_hi(a,c,1),_=rotr64_hi(a,c,8),$=shr64_hi(a,c,7),k=b^_^$;return k<0&&(k+=4294967296),k}function g0_512_lo(a,c){var b=rotr64_lo(a,c,1),_=rotr64_lo(a,c,8),$=shr64_lo(a,c,7),k=b^_^$;return k<0&&(k+=4294967296),k}function g1_512_hi(a,c){var b=rotr64_hi(a,c,19),_=rotr64_hi(c,a,29),$=shr64_hi(a,c,6),k=b^_^$;return k<0&&(k+=4294967296),k}function g1_512_lo(a,c){var b=rotr64_lo(a,c,19),_=rotr64_lo(c,a,29),$=shr64_lo(a,c,6),k=b^_^$;return k<0&&(k+=4294967296),k}var utils$i=utils$p,SHA512=_512;function SHA384(){if(!(this instanceof SHA384))return new SHA384;SHA512.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}utils$i.inherits(SHA384,SHA512);var _384=SHA384;SHA384.blockSize=1024;SHA384.outSize=384;SHA384.hmacStrength=192;SHA384.padLength=128;SHA384.prototype._digest=function a(c){return c==="hex"?utils$i.toHex32(this.h.slice(0,12),"big"):utils$i.split32(this.h.slice(0,12),"big")};sha.sha1=_1;sha.sha224=_224;sha.sha256=_256;sha.sha384=_384;sha.sha512=_512;var ripemd={},utils$h=utils$p,common=common$5,rotl32=utils$h.rotl32,sum32=utils$h.sum32,sum32_3=utils$h.sum32_3,sum32_4=utils$h.sum32_4,BlockHash=common.BlockHash;function RIPEMD160(){if(!(this instanceof RIPEMD160))return new RIPEMD160;BlockHash.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}utils$h.inherits(RIPEMD160,BlockHash);ripemd.ripemd160=RIPEMD160;RIPEMD160.blockSize=512;RIPEMD160.outSize=160;RIPEMD160.hmacStrength=192;RIPEMD160.padLength=64;RIPEMD160.prototype._update=function a(c,b){for(var _=this.h[0],$=this.h[1],k=this.h[2],et=this.h[3],nt=this.h[4],ot=_,ht=$,vt=k,_t=et,kt=nt,$t=0;$t<80;$t++){var Tt=sum32(rotl32(sum32_4(_,f($t,$,k,et),c[r$1[$t]+b],K$2($t)),s$1[$t]),nt);_=nt,nt=et,et=rotl32(k,10),k=$,$=Tt,Tt=sum32(rotl32(sum32_4(ot,f(79-$t,ht,vt,_t),c[rh$1[$t]+b],Kh$1($t)),sh$1[$t]),kt),ot=kt,kt=_t,_t=rotl32(vt,10),vt=ht,ht=Tt}Tt=sum32_3(this.h[1],k,_t),this.h[1]=sum32_3(this.h[2],et,kt),this.h[2]=sum32_3(this.h[3],nt,ot),this.h[3]=sum32_3(this.h[4],_,ht),this.h[4]=sum32_3(this.h[0],$,vt),this.h[0]=Tt};RIPEMD160.prototype._digest=function a(c){return c==="hex"?utils$h.toHex32(this.h,"little"):utils$h.split32(this.h,"little")};function f(a,c,b,_){return a<=15?c^b^_:a<=31?c&b|~c&_:a<=47?(c|~b)^_:a<=63?c&_|b&~_:c^(b|~_)}function K$2(a){return a<=15?0:a<=31?1518500249:a<=47?1859775393:a<=63?2400959708:2840853838}function Kh$1(a){return a<=15?1352829926:a<=31?1548603684:a<=47?1836072691:a<=63?2053994217:0}var r$1=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],rh$1=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],s$1=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],sh$1=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],utils$g=utils$p,assert$7=minimalisticAssert;function Hmac(a,c,b){if(!(this instanceof Hmac))return new Hmac(a,c,b);this.Hash=a,this.blockSize=a.blockSize/8,this.outSize=a.outSize/8,this.inner=null,this.outer=null,this._init(utils$g.toArray(c,b))}var hmac=Hmac;Hmac.prototype._init=function a(c){c.length>this.blockSize&&(c=new this.Hash().update(c).digest()),assert$7(c.length<=this.blockSize);for(var b=c.length;b<this.blockSize;b++)c.push(0);for(b=0;b<c.length;b++)c[b]^=54;for(this.inner=new this.Hash().update(c),b=0;b<c.length;b++)c[b]^=106;this.outer=new this.Hash().update(c)};Hmac.prototype.update=function a(c,b){return this.inner.update(c,b),this};Hmac.prototype.digest=function a(c){return this.outer.update(this.inner.digest()),this.outer.digest(c)};(function(a){var c=a;c.utils=utils$p,c.common=common$5,c.sha=sha,c.ripemd=ripemd,c.hmac=hmac,c.sha1=c.sha.sha1,c.sha256=c.sha.sha256,c.sha224=c.sha.sha224,c.sha384=c.sha.sha384,c.sha512=c.sha.sha512,c.ripemd160=c.ripemd.ripemd160})(hash$2);var secp256k1,hasRequiredSecp256k1;function requireSecp256k1(){return hasRequiredSecp256k1||(hasRequiredSecp256k1=1,secp256k1={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}}),secp256k1}(function(a){var c=a,b=hash$2,_=curve,$=utils$v,k=$.assert;function et(ht){ht.type==="short"?this.curve=new _.short(ht):ht.type==="edwards"?this.curve=new _.edwards(ht):this.curve=new _.mont(ht),this.g=this.curve.g,this.n=this.curve.n,this.hash=ht.hash,k(this.g.validate(),"Invalid curve"),k(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}c.PresetCurve=et;function nt(ht,vt){Object.defineProperty(c,ht,{configurable:!0,enumerable:!0,get:function(){var _t=new et(vt);return Object.defineProperty(c,ht,{configurable:!0,enumerable:!0,value:_t}),_t}})}nt("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:b.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),nt("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:b.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),nt("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:b.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),nt("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:b.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),nt("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:b.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),nt("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:b.sha256,gRed:!1,g:["9"]}),nt("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:b.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});var ot;try{ot=requireSecp256k1()}catch{ot=void 0}nt("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:b.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",ot]})})(curves$1);var hash$1=hash$2,utils$f=utils$u,assert$6=minimalisticAssert;function HmacDRBG(a){if(!(this instanceof HmacDRBG))return new HmacDRBG(a);this.hash=a.hash,this.predResist=!!a.predResist,this.outLen=this.hash.outSize,this.minEntropy=a.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var c=utils$f.toArray(a.entropy,a.entropyEnc||"hex"),b=utils$f.toArray(a.nonce,a.nonceEnc||"hex"),_=utils$f.toArray(a.pers,a.persEnc||"hex");assert$6(c.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(c,b,_)}var hmacDrbg=HmacDRBG;HmacDRBG.prototype._init=function a(c,b,_){var $=c.concat(b).concat(_);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var k=0;k<this.V.length;k++)this.K[k]=0,this.V[k]=1;this._update($),this._reseed=1,this.reseedInterval=281474976710656};HmacDRBG.prototype._hmac=function a(){return new hash$1.hmac(this.hash,this.K)};HmacDRBG.prototype._update=function a(c){var b=this._hmac().update(this.V).update([0]);c&&(b=b.update(c)),this.K=b.digest(),this.V=this._hmac().update(this.V).digest(),c&&(this.K=this._hmac().update(this.V).update([1]).update(c).digest(),this.V=this._hmac().update(this.V).digest())};HmacDRBG.prototype.reseed=function a(c,b,_,$){typeof b!="string"&&($=_,_=b,b=null),c=utils$f.toArray(c,b),_=utils$f.toArray(_,$),assert$6(c.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(c.concat(_||[])),this._reseed=1};HmacDRBG.prototype.generate=function a(c,b,_,$){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");typeof b!="string"&&($=_,_=b,b=null),_&&(_=utils$f.toArray(_,$||"hex"),this._update(_));for(var k=[];k.length<c;)this.V=this._hmac().update(this.V).digest(),k=k.concat(this.V);var et=k.slice(0,c);return this._update(_),this._reseed++,utils$f.encode(et,b)};var BN$5=bnExports$3,utils$e=utils$v,assert$5=utils$e.assert;function KeyPair$2(a,c){this.ec=a,this.priv=null,this.pub=null,c.priv&&this._importPrivate(c.priv,c.privEnc),c.pub&&this._importPublic(c.pub,c.pubEnc)}var key$2=KeyPair$2;KeyPair$2.fromPublic=function a(c,b,_){return b instanceof KeyPair$2?b:new KeyPair$2(c,{pub:b,pubEnc:_})};KeyPair$2.fromPrivate=function a(c,b,_){return b instanceof KeyPair$2?b:new KeyPair$2(c,{priv:b,privEnc:_})};KeyPair$2.prototype.validate=function a(){var c=this.getPublic();return c.isInfinity()?{result:!1,reason:"Invalid public key"}:c.validate()?c.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}};KeyPair$2.prototype.getPublic=function a(c,b){return typeof c=="string"&&(b=c,c=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),b?this.pub.encode(b,c):this.pub};KeyPair$2.prototype.getPrivate=function a(c){return c==="hex"?this.priv.toString(16,2):this.priv};KeyPair$2.prototype._importPrivate=function a(c,b){this.priv=new BN$5(c,b||16),this.priv=this.priv.umod(this.ec.curve.n)};KeyPair$2.prototype._importPublic=function a(c,b){if(c.x||c.y){this.ec.curve.type==="mont"?assert$5(c.x,"Need x coordinate"):(this.ec.curve.type==="short"||this.ec.curve.type==="edwards")&&assert$5(c.x&&c.y,"Need both x and y coordinate"),this.pub=this.ec.curve.point(c.x,c.y);return}this.pub=this.ec.curve.decodePoint(c,b)};KeyPair$2.prototype.derive=function a(c){return c.validate()||assert$5(c.validate(),"public point not validated"),c.mul(this.priv).getX()};KeyPair$2.prototype.sign=function a(c,b,_){return this.ec.sign(c,this,b,_)};KeyPair$2.prototype.verify=function a(c,b){return this.ec.verify(c,b,this)};KeyPair$2.prototype.inspect=function a(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"};var BN$4=bnExports$3,utils$d=utils$v,assert$4=utils$d.assert;function Signature$2(a,c){if(a instanceof Signature$2)return a;this._importDER(a,c)||(assert$4(a.r&&a.s,"Signature without r or s"),this.r=new BN$4(a.r,16),this.s=new BN$4(a.s,16),a.recoveryParam===void 0?this.recoveryParam=null:this.recoveryParam=a.recoveryParam)}var signature$1=Signature$2;function Position(){this.place=0}function getLength(a,c){var b=a[c.place++];if(!(b&128))return b;var _=b&15;if(_===0||_>4)return!1;for(var $=0,k=0,et=c.place;k<_;k++,et++)$<<=8,$|=a[et],$>>>=0;return $<=127?!1:(c.place=et,$)}function rmPadding(a){for(var c=0,b=a.length-1;!a[c]&&!(a[c+1]&128)&&c<b;)c++;return c===0?a:a.slice(c)}Signature$2.prototype._importDER=function a(c,b){c=utils$d.toArray(c,b);var _=new Position;if(c[_.place++]!==48)return!1;var $=getLength(c,_);if($===!1||$+_.place!==c.length||c[_.place++]!==2)return!1;var k=getLength(c,_);if(k===!1)return!1;var et=c.slice(_.place,k+_.place);if(_.place+=k,c[_.place++]!==2)return!1;var nt=getLength(c,_);if(nt===!1||c.length!==nt+_.place)return!1;var ot=c.slice(_.place,nt+_.place);if(et[0]===0)if(et[1]&128)et=et.slice(1);else return!1;if(ot[0]===0)if(ot[1]&128)ot=ot.slice(1);else return!1;return this.r=new BN$4(et),this.s=new BN$4(ot),this.recoveryParam=null,!0};function constructLength(a,c){if(c<128){a.push(c);return}var b=1+(Math.log(c)/Math.LN2>>>3);for(a.push(b|128);--b;)a.push(c>>>(b<<3)&255);a.push(c)}Signature$2.prototype.toDER=function a(c){var b=this.r.toArray(),_=this.s.toArray();for(b[0]&128&&(b=[0].concat(b)),_[0]&128&&(_=[0].concat(_)),b=rmPadding(b),_=rmPadding(_);!_[0]&&!(_[1]&128);)_=_.slice(1);var $=[2];constructLength($,b.length),$=$.concat(b),$.push(2),constructLength($,_.length);var k=$.concat(_),et=[48];return constructLength(et,k.length),et=et.concat(k),utils$d.encode(et,c)};var ec$1,hasRequiredEc;function requireEc(){if(hasRequiredEc)return ec$1;hasRequiredEc=1;var a=bnExports$3,c=hmacDrbg,b=utils$v,_=curves$1,$=requireBrorand(),k=b.assert,et=key$2,nt=signature$1;function ot(ht){if(!(this instanceof ot))return new ot(ht);typeof ht=="string"&&(k(Object.prototype.hasOwnProperty.call(_,ht),"Unknown curve "+ht),ht=_[ht]),ht instanceof _.PresetCurve&&(ht={curve:ht}),this.curve=ht.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=ht.curve.g,this.g.precompute(ht.curve.n.bitLength()+1),this.hash=ht.hash||ht.curve.hash}return ec$1=ot,ot.prototype.keyPair=function(vt){return new et(this,vt)},ot.prototype.keyFromPrivate=function(vt,_t){return et.fromPrivate(this,vt,_t)},ot.prototype.keyFromPublic=function(vt,_t){return et.fromPublic(this,vt,_t)},ot.prototype.genKeyPair=function(vt){vt||(vt={});for(var _t=new c({hash:this.hash,pers:vt.pers,persEnc:vt.persEnc||"utf8",entropy:vt.entropy||$(this.hash.hmacStrength),entropyEnc:vt.entropy&&vt.entropyEnc||"utf8",nonce:this.n.toArray()}),kt=this.n.byteLength(),$t=this.n.sub(new a(2));;){var Tt=new a(_t.generate(kt));if(!(Tt.cmp($t)>0))return Tt.iaddn(1),this.keyFromPrivate(Tt)}},ot.prototype._truncateToN=function(vt,_t){var kt=vt.byteLength()*8-this.n.bitLength();return kt>0&&(vt=vt.ushrn(kt)),!_t&&vt.cmp(this.n)>=0?vt.sub(this.n):vt},ot.prototype.sign=function(vt,_t,kt,$t){typeof kt=="object"&&($t=kt,kt=null),$t||($t={}),_t=this.keyFromPrivate(_t,kt),vt=this._truncateToN(new a(vt,16));for(var Tt=this.n.byteLength(),At=_t.getPrivate().toArray("be",Tt),Mt=vt.toArray("be",Tt),Dt=new c({hash:this.hash,entropy:At,nonce:Mt,pers:$t.pers,persEnc:$t.persEnc||"utf8"}),Rt=this.n.sub(new a(1)),xt=0;;xt++){var Jt=$t.k?$t.k(xt):new a(Dt.generate(this.n.byteLength()));if(Jt=this._truncateToN(Jt,!0),!(Jt.cmpn(1)<=0||Jt.cmp(Rt)>=0)){var ar=this.g.mul(Jt);if(!ar.isInfinity()){var nr=ar.getX(),pr=nr.umod(this.n);if(pr.cmpn(0)!==0){var ur=Jt.invm(this.n).mul(pr.mul(_t.getPrivate()).iadd(vt));if(ur=ur.umod(this.n),ur.cmpn(0)!==0){var Ot=(ar.getY().isOdd()?1:0)|(nr.cmp(pr)!==0?2:0);return $t.canonical&&ur.cmp(this.nh)>0&&(ur=this.n.sub(ur),Ot^=1),new nt({r:pr,s:ur,recoveryParam:Ot})}}}}}},ot.prototype.verify=function(vt,_t,kt,$t){vt=this._truncateToN(new a(vt,16)),kt=this.keyFromPublic(kt,$t),_t=new nt(_t,"hex");var Tt=_t.r,At=_t.s;if(Tt.cmpn(1)<0||Tt.cmp(this.n)>=0||At.cmpn(1)<0||At.cmp(this.n)>=0)return!1;var Mt=At.invm(this.n),Dt=Mt.mul(vt).umod(this.n),Rt=Mt.mul(Tt).umod(this.n),xt;return this.curve._maxwellTrick?(xt=this.g.jmulAdd(Dt,kt.getPublic(),Rt),xt.isInfinity()?!1:xt.eqXToP(Tt)):(xt=this.g.mulAdd(Dt,kt.getPublic(),Rt),xt.isInfinity()?!1:xt.getX().umod(this.n).cmp(Tt)===0)},ot.prototype.recoverPubKey=function(ht,vt,_t,kt){k((3&_t)===_t,"The recovery param is more than two bits"),vt=new nt(vt,kt);var $t=this.n,Tt=new a(ht),At=vt.r,Mt=vt.s,Dt=_t&1,Rt=_t>>1;if(At.cmp(this.curve.p.umod(this.curve.n))>=0&&Rt)throw new Error("Unable to find sencond key candinate");Rt?At=this.curve.pointFromX(At.add(this.curve.n),Dt):At=this.curve.pointFromX(At,Dt);var xt=vt.r.invm($t),Jt=$t.sub(Tt).mul(xt).umod($t),ar=Mt.mul(xt).umod($t);return this.g.mulAdd(Jt,At,ar)},ot.prototype.getKeyRecoveryParam=function(ht,vt,_t,kt){if(vt=new nt(vt,kt),vt.recoveryParam!==null)return vt.recoveryParam;for(var $t=0;$t<4;$t++){var Tt;try{Tt=this.recoverPubKey(ht,vt,$t)}catch{continue}if(Tt.eq(_t))return $t}throw new Error("Unable to find valid recovery factor")},ec$1}var utils$c=utils$v,assert$3=utils$c.assert,parseBytes$2=utils$c.parseBytes,cachedProperty$1=utils$c.cachedProperty;function KeyPair$1(a,c){this.eddsa=a,this._secret=parseBytes$2(c.secret),a.isPoint(c.pub)?this._pub=c.pub:this._pubBytes=parseBytes$2(c.pub)}KeyPair$1.fromPublic=function a(c,b){return b instanceof KeyPair$1?b:new KeyPair$1(c,{pub:b})};KeyPair$1.fromSecret=function a(c,b){return b instanceof KeyPair$1?b:new KeyPair$1(c,{secret:b})};KeyPair$1.prototype.secret=function a(){return this._secret};cachedProperty$1(KeyPair$1,"pubBytes",function a(){return this.eddsa.encodePoint(this.pub())});cachedProperty$1(KeyPair$1,"pub",function a(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())});cachedProperty$1(KeyPair$1,"privBytes",function a(){var c=this.eddsa,b=this.hash(),_=c.encodingLength-1,$=b.slice(0,c.encodingLength);return $[0]&=248,$[_]&=127,$[_]|=64,$});cachedProperty$1(KeyPair$1,"priv",function a(){return this.eddsa.decodeInt(this.privBytes())});cachedProperty$1(KeyPair$1,"hash",function a(){return this.eddsa.hash().update(this.secret()).digest()});cachedProperty$1(KeyPair$1,"messagePrefix",function a(){return this.hash().slice(this.eddsa.encodingLength)});KeyPair$1.prototype.sign=function a(c){return assert$3(this._secret,"KeyPair can only verify"),this.eddsa.sign(c,this)};KeyPair$1.prototype.verify=function a(c,b){return this.eddsa.verify(c,b,this)};KeyPair$1.prototype.getSecret=function a(c){return assert$3(this._secret,"KeyPair is public only"),utils$c.encode(this.secret(),c)};KeyPair$1.prototype.getPublic=function a(c){return utils$c.encode(this.pubBytes(),c)};var key$1=KeyPair$1,BN$3=bnExports$3,utils$b=utils$v,assert$2=utils$b.assert,cachedProperty=utils$b.cachedProperty,parseBytes$1=utils$b.parseBytes;function Signature$1(a,c){this.eddsa=a,typeof c!="object"&&(c=parseBytes$1(c)),Array.isArray(c)&&(c={R:c.slice(0,a.encodingLength),S:c.slice(a.encodingLength)}),assert$2(c.R&&c.S,"Signature without R or S"),a.isPoint(c.R)&&(this._R=c.R),c.S instanceof BN$3&&(this._S=c.S),this._Rencoded=Array.isArray(c.R)?c.R:c.Rencoded,this._Sencoded=Array.isArray(c.S)?c.S:c.Sencoded}cachedProperty(Signature$1,"S",function a(){return this.eddsa.decodeInt(this.Sencoded())});cachedProperty(Signature$1,"R",function a(){return this.eddsa.decodePoint(this.Rencoded())});cachedProperty(Signature$1,"Rencoded",function a(){return this.eddsa.encodePoint(this.R())});cachedProperty(Signature$1,"Sencoded",function a(){return this.eddsa.encodeInt(this.S())});Signature$1.prototype.toBytes=function a(){return this.Rencoded().concat(this.Sencoded())};Signature$1.prototype.toHex=function a(){return utils$b.encode(this.toBytes(),"hex").toUpperCase()};var signature=Signature$1,hash=hash$2,curves=curves$1,utils$a=utils$v,assert$1=utils$a.assert,parseBytes=utils$a.parseBytes,KeyPair=key$1,Signature=signature;function EDDSA(a){if(assert$1(a==="ed25519","only tested with ed25519 so far"),!(this instanceof EDDSA))return new EDDSA(a);a=curves[a].curve,this.curve=a,this.g=a.g,this.g.precompute(a.n.bitLength()+1),this.pointClass=a.point().constructor,this.encodingLength=Math.ceil(a.n.bitLength()/8),this.hash=hash.sha512}var eddsa=EDDSA;EDDSA.prototype.sign=function a(c,b){c=parseBytes(c);var _=this.keyFromSecret(b),$=this.hashInt(_.messagePrefix(),c),k=this.g.mul($),et=this.encodePoint(k),nt=this.hashInt(et,_.pubBytes(),c).mul(_.priv()),ot=$.add(nt).umod(this.curve.n);return this.makeSignature({R:k,S:ot,Rencoded:et})};EDDSA.prototype.verify=function a(c,b,_){c=parseBytes(c),b=this.makeSignature(b);var $=this.keyFromPublic(_),k=this.hashInt(b.Rencoded(),$.pubBytes(),c),et=this.g.mul(b.S()),nt=b.R().add($.pub().mul(k));return nt.eq(et)};EDDSA.prototype.hashInt=function a(){for(var c=this.hash(),b=0;b<arguments.length;b++)c.update(arguments[b]);return utils$a.intFromLE(c.digest()).umod(this.curve.n)};EDDSA.prototype.keyFromPublic=function a(c){return KeyPair.fromPublic(this,c)};EDDSA.prototype.keyFromSecret=function a(c){return KeyPair.fromSecret(this,c)};EDDSA.prototype.makeSignature=function a(c){return c instanceof Signature?c:new Signature(this,c)};EDDSA.prototype.encodePoint=function a(c){var b=c.getY().toArray("le",this.encodingLength);return b[this.encodingLength-1]|=c.getX().isOdd()?128:0,b};EDDSA.prototype.decodePoint=function a(c){c=utils$a.parseBytes(c);var b=c.length-1,_=c.slice(0,b).concat(c[b]&-129),$=(c[b]&128)!==0,k=utils$a.intFromLE(_);return this.curve.pointFromY(k,$)};EDDSA.prototype.encodeInt=function a(c){return c.toArray("le",this.encodingLength)};EDDSA.prototype.decodeInt=function a(c){return utils$a.intFromLE(c)};EDDSA.prototype.isPoint=function a(c){return c instanceof this.pointClass};var hasRequiredElliptic;function requireElliptic(){return hasRequiredElliptic||(hasRequiredElliptic=1,function(a){var c=a;c.version=require$$0$1.version,c.utils=utils$v,c.rand=requireBrorand(),c.curve=curve,c.curves=curves$1,c.ec=requireEc(),c.eddsa=eddsa}(elliptic)),elliptic}var asn1$3={},asn1$2={},bn$2={exports:{}};bn$2.exports;(function(a){(function(c,b){function _(ut,_e){if(!ut)throw new Error(_e||"Assertion failed")}function $(ut,_e){ut.super_=_e;var tt=function(){};tt.prototype=_e.prototype,ut.prototype=new tt,ut.prototype.constructor=ut}function k(ut,_e,tt){if(k.isBN(ut))return ut;this.negative=0,this.words=null,this.length=0,this.red=null,ut!==null&&((_e==="le"||_e==="be")&&(tt=_e,_e=10),this._init(ut||0,_e||10,tt||"be"))}typeof c=="object"?c.exports=k:b.BN=k,k.BN=k,k.wordSize=26;var et;try{typeof window<"u"&&typeof window.Buffer<"u"?et=window.Buffer:et=require$$0$2.Buffer}catch{}k.isBN=function(_e){return _e instanceof k?!0:_e!==null&&typeof _e=="object"&&_e.constructor.wordSize===k.wordSize&&Array.isArray(_e.words)},k.max=function(_e,tt){return _e.cmp(tt)>0?_e:tt},k.min=function(_e,tt){return _e.cmp(tt)<0?_e:tt},k.prototype._init=function(_e,tt,it){if(typeof _e=="number")return this._initNumber(_e,tt,it);if(typeof _e=="object")return this._initArray(_e,tt,it);tt==="hex"&&(tt=16),_(tt===(tt|0)&&tt>=2&&tt<=36),_e=_e.toString().replace(/\s+/g,"");var dt=0;_e[0]==="-"&&(dt++,this.negative=1),dt<_e.length&&(tt===16?this._parseHex(_e,dt,it):(this._parseBase(_e,tt,dt),it==="le"&&this._initArray(this.toArray(),tt,it)))},k.prototype._initNumber=function(_e,tt,it){_e<0&&(this.negative=1,_e=-_e),_e<67108864?(this.words=[_e&67108863],this.length=1):_e<4503599627370496?(this.words=[_e&67108863,_e/67108864&67108863],this.length=2):(_(_e<9007199254740992),this.words=[_e&67108863,_e/67108864&67108863,1],this.length=3),it==="le"&&this._initArray(this.toArray(),tt,it)},k.prototype._initArray=function(_e,tt,it){if(_(typeof _e.length=="number"),_e.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(_e.length/3),this.words=new Array(this.length);for(var dt=0;dt<this.length;dt++)this.words[dt]=0;var lt,gt,Et=0;if(it==="be")for(dt=_e.length-1,lt=0;dt>=0;dt-=3)gt=_e[dt]|_e[dt-1]<<8|_e[dt-2]<<16,this.words[lt]|=gt<<Et&67108863,this.words[lt+1]=gt>>>26-Et&67108863,Et+=24,Et>=26&&(Et-=26,lt++);else if(it==="le")for(dt=0,lt=0;dt<_e.length;dt+=3)gt=_e[dt]|_e[dt+1]<<8|_e[dt+2]<<16,this.words[lt]|=gt<<Et&67108863,this.words[lt+1]=gt>>>26-Et&67108863,Et+=24,Et>=26&&(Et-=26,lt++);return this.strip()};function nt(ut,_e){var tt=ut.charCodeAt(_e);return tt>=65&&tt<=70?tt-55:tt>=97&&tt<=102?tt-87:tt-48&15}function ot(ut,_e,tt){var it=nt(ut,tt);return tt-1>=_e&&(it|=nt(ut,tt-1)<<4),it}k.prototype._parseHex=function(_e,tt,it){this.length=Math.ceil((_e.length-tt)/6),this.words=new Array(this.length);for(var dt=0;dt<this.length;dt++)this.words[dt]=0;var lt=0,gt=0,Et;if(it==="be")for(dt=_e.length-1;dt>=tt;dt-=2)Et=ot(_e,tt,dt)<<lt,this.words[gt]|=Et&67108863,lt>=18?(lt-=18,gt+=1,this.words[gt]|=Et>>>26):lt+=8;else{var pt=_e.length-tt;for(dt=pt%2===0?tt+1:tt;dt<_e.length;dt+=2)Et=ot(_e,tt,dt)<<lt,this.words[gt]|=Et&67108863,lt>=18?(lt-=18,gt+=1,this.words[gt]|=Et>>>26):lt+=8}this.strip()};function ht(ut,_e,tt,it){for(var dt=0,lt=Math.min(ut.length,tt),gt=_e;gt<lt;gt++){var Et=ut.charCodeAt(gt)-48;dt*=it,Et>=49?dt+=Et-49+10:Et>=17?dt+=Et-17+10:dt+=Et}return dt}k.prototype._parseBase=function(_e,tt,it){this.words=[0],this.length=1;for(var dt=0,lt=1;lt<=67108863;lt*=tt)dt++;dt--,lt=lt/tt|0;for(var gt=_e.length-it,Et=gt%dt,pt=Math.min(gt,gt-Et)+it,rt=0,mt=it;mt<pt;mt+=dt)rt=ht(_e,mt,mt+dt,tt),this.imuln(lt),this.words[0]+rt<67108864?this.words[0]+=rt:this._iaddn(rt);if(Et!==0){var Lt=1;for(rt=ht(_e,mt,_e.length,tt),mt=0;mt<Et;mt++)Lt*=tt;this.imuln(Lt),this.words[0]+rt<67108864?this.words[0]+=rt:this._iaddn(rt)}this.strip()},k.prototype.copy=function(_e){_e.words=new Array(this.length);for(var tt=0;tt<this.length;tt++)_e.words[tt]=this.words[tt];_e.length=this.length,_e.negative=this.negative,_e.red=this.red},k.prototype.clone=function(){var _e=new k(null);return this.copy(_e),_e},k.prototype._expand=function(_e){for(;this.length<_e;)this.words[this.length++]=0;return this},k.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},k.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},k.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var vt=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],_t=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],kt=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];k.prototype.toString=function(_e,tt){_e=_e||10,tt=tt|0||1;var it;if(_e===16||_e==="hex"){it="";for(var dt=0,lt=0,gt=0;gt<this.length;gt++){var Et=this.words[gt],pt=((Et<<dt|lt)&16777215).toString(16);lt=Et>>>24-dt&16777215,lt!==0||gt!==this.length-1?it=vt[6-pt.length]+pt+it:it=pt+it,dt+=2,dt>=26&&(dt-=26,gt--)}for(lt!==0&&(it=lt.toString(16)+it);it.length%tt!==0;)it="0"+it;return this.negative!==0&&(it="-"+it),it}if(_e===(_e|0)&&_e>=2&&_e<=36){var rt=_t[_e],mt=kt[_e];it="";var Lt=this.clone();for(Lt.negative=0;!Lt.isZero();){var Gt=Lt.modn(mt).toString(_e);Lt=Lt.idivn(mt),Lt.isZero()?it=Gt+it:it=vt[rt-Gt.length]+Gt+it}for(this.isZero()&&(it="0"+it);it.length%tt!==0;)it="0"+it;return this.negative!==0&&(it="-"+it),it}_(!1,"Base should be between 2 and 36")},k.prototype.toNumber=function(){var _e=this.words[0];return this.length===2?_e+=this.words[1]*67108864:this.length===3&&this.words[2]===1?_e+=4503599627370496+this.words[1]*67108864:this.length>2&&_(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-_e:_e},k.prototype.toJSON=function(){return this.toString(16)},k.prototype.toBuffer=function(_e,tt){return _(typeof et<"u"),this.toArrayLike(et,_e,tt)},k.prototype.toArray=function(_e,tt){return this.toArrayLike(Array,_e,tt)},k.prototype.toArrayLike=function(_e,tt,it){var dt=this.byteLength(),lt=it||Math.max(1,dt);_(dt<=lt,"byte array longer than desired length"),_(lt>0,"Requested array length <= 0"),this.strip();var gt=tt==="le",Et=new _e(lt),pt,rt,mt=this.clone();if(gt){for(rt=0;!mt.isZero();rt++)pt=mt.andln(255),mt.iushrn(8),Et[rt]=pt;for(;rt<lt;rt++)Et[rt]=0}else{for(rt=0;rt<lt-dt;rt++)Et[rt]=0;for(rt=0;!mt.isZero();rt++)pt=mt.andln(255),mt.iushrn(8),Et[lt-rt-1]=pt}return Et},Math.clz32?k.prototype._countBits=function(_e){return 32-Math.clz32(_e)}:k.prototype._countBits=function(_e){var tt=_e,it=0;return tt>=4096&&(it+=13,tt>>>=13),tt>=64&&(it+=7,tt>>>=7),tt>=8&&(it+=4,tt>>>=4),tt>=2&&(it+=2,tt>>>=2),it+tt},k.prototype._zeroBits=function(_e){if(_e===0)return 26;var tt=_e,it=0;return tt&8191||(it+=13,tt>>>=13),tt&127||(it+=7,tt>>>=7),tt&15||(it+=4,tt>>>=4),tt&3||(it+=2,tt>>>=2),tt&1||it++,it},k.prototype.bitLength=function(){var _e=this.words[this.length-1],tt=this._countBits(_e);return(this.length-1)*26+tt};function $t(ut){for(var _e=new Array(ut.bitLength()),tt=0;tt<_e.length;tt++){var it=tt/26|0,dt=tt%26;_e[tt]=(ut.words[it]&1<<dt)>>>dt}return _e}k.prototype.zeroBits=function(){if(this.isZero())return 0;for(var _e=0,tt=0;tt<this.length;tt++){var it=this._zeroBits(this.words[tt]);if(_e+=it,it!==26)break}return _e},k.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},k.prototype.toTwos=function(_e){return this.negative!==0?this.abs().inotn(_e).iaddn(1):this.clone()},k.prototype.fromTwos=function(_e){return this.testn(_e-1)?this.notn(_e).iaddn(1).ineg():this.clone()},k.prototype.isNeg=function(){return this.negative!==0},k.prototype.neg=function(){return this.clone().ineg()},k.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},k.prototype.iuor=function(_e){for(;this.length<_e.length;)this.words[this.length++]=0;for(var tt=0;tt<_e.length;tt++)this.words[tt]=this.words[tt]|_e.words[tt];return this.strip()},k.prototype.ior=function(_e){return _((this.negative|_e.negative)===0),this.iuor(_e)},k.prototype.or=function(_e){return this.length>_e.length?this.clone().ior(_e):_e.clone().ior(this)},k.prototype.uor=function(_e){return this.length>_e.length?this.clone().iuor(_e):_e.clone().iuor(this)},k.prototype.iuand=function(_e){var tt;this.length>_e.length?tt=_e:tt=this;for(var it=0;it<tt.length;it++)this.words[it]=this.words[it]&_e.words[it];return this.length=tt.length,this.strip()},k.prototype.iand=function(_e){return _((this.negative|_e.negative)===0),this.iuand(_e)},k.prototype.and=function(_e){return this.length>_e.length?this.clone().iand(_e):_e.clone().iand(this)},k.prototype.uand=function(_e){return this.length>_e.length?this.clone().iuand(_e):_e.clone().iuand(this)},k.prototype.iuxor=function(_e){var tt,it;this.length>_e.length?(tt=this,it=_e):(tt=_e,it=this);for(var dt=0;dt<it.length;dt++)this.words[dt]=tt.words[dt]^it.words[dt];if(this!==tt)for(;dt<tt.length;dt++)this.words[dt]=tt.words[dt];return this.length=tt.length,this.strip()},k.prototype.ixor=function(_e){return _((this.negative|_e.negative)===0),this.iuxor(_e)},k.prototype.xor=function(_e){return this.length>_e.length?this.clone().ixor(_e):_e.clone().ixor(this)},k.prototype.uxor=function(_e){return this.length>_e.length?this.clone().iuxor(_e):_e.clone().iuxor(this)},k.prototype.inotn=function(_e){_(typeof _e=="number"&&_e>=0);var tt=Math.ceil(_e/26)|0,it=_e%26;this._expand(tt),it>0&&tt--;for(var dt=0;dt<tt;dt++)this.words[dt]=~this.words[dt]&67108863;return it>0&&(this.words[dt]=~this.words[dt]&67108863>>26-it),this.strip()},k.prototype.notn=function(_e){return this.clone().inotn(_e)},k.prototype.setn=function(_e,tt){_(typeof _e=="number"&&_e>=0);var it=_e/26|0,dt=_e%26;return this._expand(it+1),tt?this.words[it]=this.words[it]|1<<dt:this.words[it]=this.words[it]&~(1<<dt),this.strip()},k.prototype.iadd=function(_e){var tt;if(this.negative!==0&&_e.negative===0)return this.negative=0,tt=this.isub(_e),this.negative^=1,this._normSign();if(this.negative===0&&_e.negative!==0)return _e.negative=0,tt=this.isub(_e),_e.negative=1,tt._normSign();var it,dt;this.length>_e.length?(it=this,dt=_e):(it=_e,dt=this);for(var lt=0,gt=0;gt<dt.length;gt++)tt=(it.words[gt]|0)+(dt.words[gt]|0)+lt,this.words[gt]=tt&67108863,lt=tt>>>26;for(;lt!==0&&gt<it.length;gt++)tt=(it.words[gt]|0)+lt,this.words[gt]=tt&67108863,lt=tt>>>26;if(this.length=it.length,lt!==0)this.words[this.length]=lt,this.length++;else if(it!==this)for(;gt<it.length;gt++)this.words[gt]=it.words[gt];return this},k.prototype.add=function(_e){var tt;return _e.negative!==0&&this.negative===0?(_e.negative=0,tt=this.sub(_e),_e.negative^=1,tt):_e.negative===0&&this.negative!==0?(this.negative=0,tt=_e.sub(this),this.negative=1,tt):this.length>_e.length?this.clone().iadd(_e):_e.clone().iadd(this)},k.prototype.isub=function(_e){if(_e.negative!==0){_e.negative=0;var tt=this.iadd(_e);return _e.negative=1,tt._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(_e),this.negative=1,this._normSign();var it=this.cmp(_e);if(it===0)return this.negative=0,this.length=1,this.words[0]=0,this;var dt,lt;it>0?(dt=this,lt=_e):(dt=_e,lt=this);for(var gt=0,Et=0;Et<lt.length;Et++)tt=(dt.words[Et]|0)-(lt.words[Et]|0)+gt,gt=tt>>26,this.words[Et]=tt&67108863;for(;gt!==0&&Et<dt.length;Et++)tt=(dt.words[Et]|0)+gt,gt=tt>>26,this.words[Et]=tt&67108863;if(gt===0&&Et<dt.length&&dt!==this)for(;Et<dt.length;Et++)this.words[Et]=dt.words[Et];return this.length=Math.max(this.length,Et),dt!==this&&(this.negative=1),this.strip()},k.prototype.sub=function(_e){return this.clone().isub(_e)};function Tt(ut,_e,tt){tt.negative=_e.negative^ut.negative;var it=ut.length+_e.length|0;tt.length=it,it=it-1|0;var dt=ut.words[0]|0,lt=_e.words[0]|0,gt=dt*lt,Et=gt&67108863,pt=gt/67108864|0;tt.words[0]=Et;for(var rt=1;rt<it;rt++){for(var mt=pt>>>26,Lt=pt&67108863,Gt=Math.min(rt,_e.length-1),rr=Math.max(0,rt-ut.length+1);rr<=Gt;rr++){var ir=rt-rr|0;dt=ut.words[ir]|0,lt=_e.words[rr]|0,gt=dt*lt+Lt,mt+=gt/67108864|0,Lt=gt&67108863}tt.words[rt]=Lt|0,pt=mt|0}return pt!==0?tt.words[rt]=pt|0:tt.length--,tt.strip()}var At=function(_e,tt,it){var dt=_e.words,lt=tt.words,gt=it.words,Et=0,pt,rt,mt,Lt=dt[0]|0,Gt=Lt&8191,rr=Lt>>>13,ir=dt[1]|0,Wt=ir&8191,zt=ir>>>13,wt=dt[2]|0,Vt=wt&8191,Qt=wt>>>13,Nt=dt[3]|0,st=Nt&8191,Ct=Nt>>>13,qt=dt[4]|0,cr=qt&8191,dr=qt>>>13,Er=dt[5]|0,Tr=Er&8191,gr=Er>>>13,Zr=dt[6]|0,Pr=Zr&8191,_r=Zr>>>13,St=dt[7]|0,Kt=St&8191,er=St>>>13,kr=dt[8]|0,tr=kr&8191,bt=kr>>>13,jt=dt[9]|0,Ut=jt&8191,Ft=jt>>>13,Ht=lt[0]|0,or=Ht&8191,vr=Ht>>>13,Ir=lt[1]|0,Sr=Ir&8191,Or=Ir>>>13,Cr=lt[2]|0,yt=Cr&8191,Bt=Cr>>>13,Zt=lt[3]|0,yr=Zt&8191,fr=Zt>>>13,Rr=lt[4]|0,Nr=Rr&8191,xr=Rr>>>13,Xr=lt[5]|0,Ar=Xr&8191,Br=Xr>>>13,rn=lt[6]|0,Dr=rn&8191,qr=rn>>>13,nn=lt[7]|0,$r=nn&8191,Lr=nn>>>13,Qr=lt[8]|0,Ur=Qr&8191,Jr=Qr>>>13,cn=lt[9]|0,Fr=cn&8191,Vr=cn>>>13;it.negative=_e.negative^tt.negative,it.length=19,pt=Math.imul(Gt,or),rt=Math.imul(Gt,vr),rt=rt+Math.imul(rr,or)|0,mt=Math.imul(rr,vr);var sn=(Et+pt|0)+((rt&8191)<<13)|0;Et=(mt+(rt>>>13)|0)+(sn>>>26)|0,sn&=67108863,pt=Math.imul(Wt,or),rt=Math.imul(Wt,vr),rt=rt+Math.imul(zt,or)|0,mt=Math.imul(zt,vr),pt=pt+Math.imul(Gt,Sr)|0,rt=rt+Math.imul(Gt,Or)|0,rt=rt+Math.imul(rr,Sr)|0,mt=mt+Math.imul(rr,Or)|0;var un=(Et+pt|0)+((rt&8191)<<13)|0;Et=(mt+(rt>>>13)|0)+(un>>>26)|0,un&=67108863,pt=Math.imul(Vt,or),rt=Math.imul(Vt,vr),rt=rt+Math.imul(Qt,or)|0,mt=Math.imul(Qt,vr),pt=pt+Math.imul(Wt,Sr)|0,rt=rt+Math.imul(Wt,Or)|0,rt=rt+Math.imul(zt,Sr)|0,mt=mt+Math.imul(zt,Or)|0,pt=pt+Math.imul(Gt,yt)|0,rt=rt+Math.imul(Gt,Bt)|0,rt=rt+Math.imul(rr,yt)|0,mt=mt+Math.imul(rr,Bt)|0;var yn=(Et+pt|0)+((rt&8191)<<13)|0;Et=(mt+(rt>>>13)|0)+(yn>>>26)|0,yn&=67108863,pt=Math.imul(st,or),rt=Math.imul(st,vr),rt=rt+Math.imul(Ct,or)|0,mt=Math.imul(Ct,vr),pt=pt+Math.imul(Vt,Sr)|0,rt=rt+Math.imul(Vt,Or)|0,rt=rt+Math.imul(Qt,Sr)|0,mt=mt+Math.imul(Qt,Or)|0,pt=pt+Math.imul(Wt,yt)|0,rt=rt+Math.imul(Wt,Bt)|0,rt=rt+Math.imul(zt,yt)|0,mt=mt+Math.imul(zt,Bt)|0,pt=pt+Math.imul(Gt,yr)|0,rt=rt+Math.imul(Gt,fr)|0,rt=rt+Math.imul(rr,yr)|0,mt=mt+Math.imul(rr,fr)|0;var br=(Et+pt|0)+((rt&8191)<<13)|0;Et=(mt+(rt>>>13)|0)+(br>>>26)|0,br&=67108863,pt=Math.imul(cr,or),rt=Math.imul(cr,vr),rt=rt+Math.imul(dr,or)|0,mt=Math.imul(dr,vr),pt=pt+Math.imul(st,Sr)|0,rt=rt+Math.imul(st,Or)|0,rt=rt+Math.imul(Ct,Sr)|0,mt=mt+Math.imul(Ct,Or)|0,pt=pt+Math.imul(Vt,yt)|0,rt=rt+Math.imul(Vt,Bt)|0,rt=rt+Math.imul(Qt,yt)|0,mt=mt+Math.imul(Qt,Bt)|0,pt=pt+Math.imul(Wt,yr)|0,rt=rt+Math.imul(Wt,fr)|0,rt=rt+Math.imul(zt,yr)|0,mt=mt+Math.imul(zt,fr)|0,pt=pt+Math.imul(Gt,Nr)|0,rt=rt+Math.imul(Gt,xr)|0,rt=rt+Math.imul(rr,Nr)|0,mt=mt+Math.imul(rr,xr)|0;var wr=(Et+pt|0)+((rt&8191)<<13)|0;Et=(mt+(rt>>>13)|0)+(wr>>>26)|0,wr&=67108863,pt=Math.imul(Tr,or),rt=Math.imul(Tr,vr),rt=rt+Math.imul(gr,or)|0,mt=Math.imul(gr,vr),pt=pt+Math.imul(cr,Sr)|0,rt=rt+Math.imul(cr,Or)|0,rt=rt+Math.imul(dr,Sr)|0,mt=mt+Math.imul(dr,Or)|0,pt=pt+Math.imul(st,yt)|0,rt=rt+Math.imul(st,Bt)|0,rt=rt+Math.imul(Ct,yt)|0,mt=mt+Math.imul(Ct,Bt)|0,pt=pt+Math.imul(Vt,yr)|0,rt=rt+Math.imul(Vt,fr)|0,rt=rt+Math.imul(Qt,yr)|0,mt=mt+Math.imul(Qt,fr)|0,pt=pt+Math.imul(Wt,Nr)|0,rt=rt+Math.imul(Wt,xr)|0,rt=rt+Math.imul(zt,Nr)|0,mt=mt+Math.imul(zt,xr)|0,pt=pt+Math.imul(Gt,Ar)|0,rt=rt+Math.imul(Gt,Br)|0,rt=rt+Math.imul(rr,Ar)|0,mt=mt+Math.imul(rr,Br)|0;var Mr=(Et+pt|0)+((rt&8191)<<13)|0;Et=(mt+(rt>>>13)|0)+(Mr>>>26)|0,Mr&=67108863,pt=Math.imul(Pr,or),rt=Math.imul(Pr,vr),rt=rt+Math.imul(_r,or)|0,mt=Math.imul(_r,vr),pt=pt+Math.imul(Tr,Sr)|0,rt=rt+Math.imul(Tr,Or)|0,rt=rt+Math.imul(gr,Sr)|0,mt=mt+Math.imul(gr,Or)|0,pt=pt+Math.imul(cr,yt)|0,rt=rt+Math.imul(cr,Bt)|0,rt=rt+Math.imul(dr,yt)|0,mt=mt+Math.imul(dr,Bt)|0,pt=pt+Math.imul(st,yr)|0,rt=rt+Math.imul(st,fr)|0,rt=rt+Math.imul(Ct,yr)|0,mt=mt+Math.imul(Ct,fr)|0,pt=pt+Math.imul(Vt,Nr)|0,rt=rt+Math.imul(Vt,xr)|0,rt=rt+Math.imul(Qt,Nr)|0,mt=mt+Math.imul(Qt,xr)|0,pt=pt+Math.imul(Wt,Ar)|0,rt=rt+Math.imul(Wt,Br)|0,rt=rt+Math.imul(zt,Ar)|0,mt=mt+Math.imul(zt,Br)|0,pt=pt+Math.imul(Gt,Dr)|0,rt=rt+Math.imul(Gt,qr)|0,rt=rt+Math.imul(rr,Dr)|0,mt=mt+Math.imul(rr,qr)|0;var Wr=(Et+pt|0)+((rt&8191)<<13)|0;Et=(mt+(rt>>>13)|0)+(Wr>>>26)|0,Wr&=67108863,pt=Math.imul(Kt,or),rt=Math.imul(Kt,vr),rt=rt+Math.imul(er,or)|0,mt=Math.imul(er,vr),pt=pt+Math.imul(Pr,Sr)|0,rt=rt+Math.imul(Pr,Or)|0,rt=rt+Math.imul(_r,Sr)|0,mt=mt+Math.imul(_r,Or)|0,pt=pt+Math.imul(Tr,yt)|0,rt=rt+Math.imul(Tr,Bt)|0,rt=rt+Math.imul(gr,yt)|0,mt=mt+Math.imul(gr,Bt)|0,pt=pt+Math.imul(cr,yr)|0,rt=rt+Math.imul(cr,fr)|0,rt=rt+Math.imul(dr,yr)|0,mt=mt+Math.imul(dr,fr)|0,pt=pt+Math.imul(st,Nr)|0,rt=rt+Math.imul(st,xr)|0,rt=rt+Math.imul(Ct,Nr)|0,mt=mt+Math.imul(Ct,xr)|0,pt=pt+Math.imul(Vt,Ar)|0,rt=rt+Math.imul(Vt,Br)|0,rt=rt+Math.imul(Qt,Ar)|0,mt=mt+Math.imul(Qt,Br)|0,pt=pt+Math.imul(Wt,Dr)|0,rt=rt+Math.imul(Wt,qr)|0,rt=rt+Math.imul(zt,Dr)|0,mt=mt+Math.imul(zt,qr)|0,pt=pt+Math.imul(Gt,$r)|0,rt=rt+Math.imul(Gt,Lr)|0,rt=rt+Math.imul(rr,$r)|0,mt=mt+Math.imul(rr,Lr)|0;var Hr=(Et+pt|0)+((rt&8191)<<13)|0;Et=(mt+(rt>>>13)|0)+(Hr>>>26)|0,Hr&=67108863,pt=Math.imul(tr,or),rt=Math.imul(tr,vr),rt=rt+Math.imul(bt,or)|0,mt=Math.imul(bt,vr),pt=pt+Math.imul(Kt,Sr)|0,rt=rt+Math.imul(Kt,Or)|0,rt=rt+Math.imul(er,Sr)|0,mt=mt+Math.imul(er,Or)|0,pt=pt+Math.imul(Pr,yt)|0,rt=rt+Math.imul(Pr,Bt)|0,rt=rt+Math.imul(_r,yt)|0,mt=mt+Math.imul(_r,Bt)|0,pt=pt+Math.imul(Tr,yr)|0,rt=rt+Math.imul(Tr,fr)|0,rt=rt+Math.imul(gr,yr)|0,mt=mt+Math.imul(gr,fr)|0,pt=pt+Math.imul(cr,Nr)|0,rt=rt+Math.imul(cr,xr)|0,rt=rt+Math.imul(dr,Nr)|0,mt=mt+Math.imul(dr,xr)|0,pt=pt+Math.imul(st,Ar)|0,rt=rt+Math.imul(st,Br)|0,rt=rt+Math.imul(Ct,Ar)|0,mt=mt+Math.imul(Ct,Br)|0,pt=pt+Math.imul(Vt,Dr)|0,rt=rt+Math.imul(Vt,qr)|0,rt=rt+Math.imul(Qt,Dr)|0,mt=mt+Math.imul(Qt,qr)|0,pt=pt+Math.imul(Wt,$r)|0,rt=rt+Math.imul(Wt,Lr)|0,rt=rt+Math.imul(zt,$r)|0,mt=mt+Math.imul(zt,Lr)|0,pt=pt+Math.imul(Gt,Ur)|0,rt=rt+Math.imul(Gt,Jr)|0,rt=rt+Math.imul(rr,Ur)|0,mt=mt+Math.imul(rr,Jr)|0;var Gr=(Et+pt|0)+((rt&8191)<<13)|0;Et=(mt+(rt>>>13)|0)+(Gr>>>26)|0,Gr&=67108863,pt=Math.imul(Ut,or),rt=Math.imul(Ut,vr),rt=rt+Math.imul(Ft,or)|0,mt=Math.imul(Ft,vr),pt=pt+Math.imul(tr,Sr)|0,rt=rt+Math.imul(tr,Or)|0,rt=rt+Math.imul(bt,Sr)|0,mt=mt+Math.imul(bt,Or)|0,pt=pt+Math.imul(Kt,yt)|0,rt=rt+Math.imul(Kt,Bt)|0,rt=rt+Math.imul(er,yt)|0,mt=mt+Math.imul(er,Bt)|0,pt=pt+Math.imul(Pr,yr)|0,rt=rt+Math.imul(Pr,fr)|0,rt=rt+Math.imul(_r,yr)|0,mt=mt+Math.imul(_r,fr)|0,pt=pt+Math.imul(Tr,Nr)|0,rt=rt+Math.imul(Tr,xr)|0,rt=rt+Math.imul(gr,Nr)|0,mt=mt+Math.imul(gr,xr)|0,pt=pt+Math.imul(cr,Ar)|0,rt=rt+Math.imul(cr,Br)|0,rt=rt+Math.imul(dr,Ar)|0,mt=mt+Math.imul(dr,Br)|0,pt=pt+Math.imul(st,Dr)|0,rt=rt+Math.imul(st,qr)|0,rt=rt+Math.imul(Ct,Dr)|0,mt=mt+Math.imul(Ct,qr)|0,pt=pt+Math.imul(Vt,$r)|0,rt=rt+Math.imul(Vt,Lr)|0,rt=rt+Math.imul(Qt,$r)|0,mt=mt+Math.imul(Qt,Lr)|0,pt=pt+Math.imul(Wt,Ur)|0,rt=rt+Math.imul(Wt,Jr)|0,rt=rt+Math.imul(zt,Ur)|0,mt=mt+Math.imul(zt,Jr)|0,pt=pt+Math.imul(Gt,Fr)|0,rt=rt+Math.imul(Gt,Vr)|0,rt=rt+Math.imul(rr,Fr)|0,mt=mt+Math.imul(rr,Vr)|0;var Yr=(Et+pt|0)+((rt&8191)<<13)|0;Et=(mt+(rt>>>13)|0)+(Yr>>>26)|0,Yr&=67108863,pt=Math.imul(Ut,Sr),rt=Math.imul(Ut,Or),rt=rt+Math.imul(Ft,Sr)|0,mt=Math.imul(Ft,Or),pt=pt+Math.imul(tr,yt)|0,rt=rt+Math.imul(tr,Bt)|0,rt=rt+Math.imul(bt,yt)|0,mt=mt+Math.imul(bt,Bt)|0,pt=pt+Math.imul(Kt,yr)|0,rt=rt+Math.imul(Kt,fr)|0,rt=rt+Math.imul(er,yr)|0,mt=mt+Math.imul(er,fr)|0,pt=pt+Math.imul(Pr,Nr)|0,rt=rt+Math.imul(Pr,xr)|0,rt=rt+Math.imul(_r,Nr)|0,mt=mt+Math.imul(_r,xr)|0,pt=pt+Math.imul(Tr,Ar)|0,rt=rt+Math.imul(Tr,Br)|0,rt=rt+Math.imul(gr,Ar)|0,mt=mt+Math.imul(gr,Br)|0,pt=pt+Math.imul(cr,Dr)|0,rt=rt+Math.imul(cr,qr)|0,rt=rt+Math.imul(dr,Dr)|0,mt=mt+Math.imul(dr,qr)|0,pt=pt+Math.imul(st,$r)|0,rt=rt+Math.imul(st,Lr)|0,rt=rt+Math.imul(Ct,$r)|0,mt=mt+Math.imul(Ct,Lr)|0,pt=pt+Math.imul(Vt,Ur)|0,rt=rt+Math.imul(Vt,Jr)|0,rt=rt+Math.imul(Qt,Ur)|0,mt=mt+Math.imul(Qt,Jr)|0,pt=pt+Math.imul(Wt,Fr)|0,rt=rt+Math.imul(Wt,Vr)|0,rt=rt+Math.imul(zt,Fr)|0,mt=mt+Math.imul(zt,Vr)|0;var en=(Et+pt|0)+((rt&8191)<<13)|0;Et=(mt+(rt>>>13)|0)+(en>>>26)|0,en&=67108863,pt=Math.imul(Ut,yt),rt=Math.imul(Ut,Bt),rt=rt+Math.imul(Ft,yt)|0,mt=Math.imul(Ft,Bt),pt=pt+Math.imul(tr,yr)|0,rt=rt+Math.imul(tr,fr)|0,rt=rt+Math.imul(bt,yr)|0,mt=mt+Math.imul(bt,fr)|0,pt=pt+Math.imul(Kt,Nr)|0,rt=rt+Math.imul(Kt,xr)|0,rt=rt+Math.imul(er,Nr)|0,mt=mt+Math.imul(er,xr)|0,pt=pt+Math.imul(Pr,Ar)|0,rt=rt+Math.imul(Pr,Br)|0,rt=rt+Math.imul(_r,Ar)|0,mt=mt+Math.imul(_r,Br)|0,pt=pt+Math.imul(Tr,Dr)|0,rt=rt+Math.imul(Tr,qr)|0,rt=rt+Math.imul(gr,Dr)|0,mt=mt+Math.imul(gr,qr)|0,pt=pt+Math.imul(cr,$r)|0,rt=rt+Math.imul(cr,Lr)|0,rt=rt+Math.imul(dr,$r)|0,mt=mt+Math.imul(dr,Lr)|0,pt=pt+Math.imul(st,Ur)|0,rt=rt+Math.imul(st,Jr)|0,rt=rt+Math.imul(Ct,Ur)|0,mt=mt+Math.imul(Ct,Jr)|0,pt=pt+Math.imul(Vt,Fr)|0,rt=rt+Math.imul(Vt,Vr)|0,rt=rt+Math.imul(Qt,Fr)|0,mt=mt+Math.imul(Qt,Vr)|0;var jr=(Et+pt|0)+((rt&8191)<<13)|0;Et=(mt+(rt>>>13)|0)+(jr>>>26)|0,jr&=67108863,pt=Math.imul(Ut,yr),rt=Math.imul(Ut,fr),rt=rt+Math.imul(Ft,yr)|0,mt=Math.imul(Ft,fr),pt=pt+Math.imul(tr,Nr)|0,rt=rt+Math.imul(tr,xr)|0,rt=rt+Math.imul(bt,Nr)|0,mt=mt+Math.imul(bt,xr)|0,pt=pt+Math.imul(Kt,Ar)|0,rt=rt+Math.imul(Kt,Br)|0,rt=rt+Math.imul(er,Ar)|0,mt=mt+Math.imul(er,Br)|0,pt=pt+Math.imul(Pr,Dr)|0,rt=rt+Math.imul(Pr,qr)|0,rt=rt+Math.imul(_r,Dr)|0,mt=mt+Math.imul(_r,qr)|0,pt=pt+Math.imul(Tr,$r)|0,rt=rt+Math.imul(Tr,Lr)|0,rt=rt+Math.imul(gr,$r)|0,mt=mt+Math.imul(gr,Lr)|0,pt=pt+Math.imul(cr,Ur)|0,rt=rt+Math.imul(cr,Jr)|0,rt=rt+Math.imul(dr,Ur)|0,mt=mt+Math.imul(dr,Jr)|0,pt=pt+Math.imul(st,Fr)|0,rt=rt+Math.imul(st,Vr)|0,rt=rt+Math.imul(Ct,Fr)|0,mt=mt+Math.imul(Ct,Vr)|0;var pn=(Et+pt|0)+((rt&8191)<<13)|0;Et=(mt+(rt>>>13)|0)+(pn>>>26)|0,pn&=67108863,pt=Math.imul(Ut,Nr),rt=Math.imul(Ut,xr),rt=rt+Math.imul(Ft,Nr)|0,mt=Math.imul(Ft,xr),pt=pt+Math.imul(tr,Ar)|0,rt=rt+Math.imul(tr,Br)|0,rt=rt+Math.imul(bt,Ar)|0,mt=mt+Math.imul(bt,Br)|0,pt=pt+Math.imul(Kt,Dr)|0,rt=rt+Math.imul(Kt,qr)|0,rt=rt+Math.imul(er,Dr)|0,mt=mt+Math.imul(er,qr)|0,pt=pt+Math.imul(Pr,$r)|0,rt=rt+Math.imul(Pr,Lr)|0,rt=rt+Math.imul(_r,$r)|0,mt=mt+Math.imul(_r,Lr)|0,pt=pt+Math.imul(Tr,Ur)|0,rt=rt+Math.imul(Tr,Jr)|0,rt=rt+Math.imul(gr,Ur)|0,mt=mt+Math.imul(gr,Jr)|0,pt=pt+Math.imul(cr,Fr)|0,rt=rt+Math.imul(cr,Vr)|0,rt=rt+Math.imul(dr,Fr)|0,mt=mt+Math.imul(dr,Vr)|0;var mn=(Et+pt|0)+((rt&8191)<<13)|0;Et=(mt+(rt>>>13)|0)+(mn>>>26)|0,mn&=67108863,pt=Math.imul(Ut,Ar),rt=Math.imul(Ut,Br),rt=rt+Math.imul(Ft,Ar)|0,mt=Math.imul(Ft,Br),pt=pt+Math.imul(tr,Dr)|0,rt=rt+Math.imul(tr,qr)|0,rt=rt+Math.imul(bt,Dr)|0,mt=mt+Math.imul(bt,qr)|0,pt=pt+Math.imul(Kt,$r)|0,rt=rt+Math.imul(Kt,Lr)|0,rt=rt+Math.imul(er,$r)|0,mt=mt+Math.imul(er,Lr)|0,pt=pt+Math.imul(Pr,Ur)|0,rt=rt+Math.imul(Pr,Jr)|0,rt=rt+Math.imul(_r,Ur)|0,mt=mt+Math.imul(_r,Jr)|0,pt=pt+Math.imul(Tr,Fr)|0,rt=rt+Math.imul(Tr,Vr)|0,rt=rt+Math.imul(gr,Fr)|0,mt=mt+Math.imul(gr,Vr)|0;var hn=(Et+pt|0)+((rt&8191)<<13)|0;Et=(mt+(rt>>>13)|0)+(hn>>>26)|0,hn&=67108863,pt=Math.imul(Ut,Dr),rt=Math.imul(Ut,qr),rt=rt+Math.imul(Ft,Dr)|0,mt=Math.imul(Ft,qr),pt=pt+Math.imul(tr,$r)|0,rt=rt+Math.imul(tr,Lr)|0,rt=rt+Math.imul(bt,$r)|0,mt=mt+Math.imul(bt,Lr)|0,pt=pt+Math.imul(Kt,Ur)|0,rt=rt+Math.imul(Kt,Jr)|0,rt=rt+Math.imul(er,Ur)|0,mt=mt+Math.imul(er,Jr)|0,pt=pt+Math.imul(Pr,Fr)|0,rt=rt+Math.imul(Pr,Vr)|0,rt=rt+Math.imul(_r,Fr)|0,mt=mt+Math.imul(_r,Vr)|0;var fn=(Et+pt|0)+((rt&8191)<<13)|0;Et=(mt+(rt>>>13)|0)+(fn>>>26)|0,fn&=67108863,pt=Math.imul(Ut,$r),rt=Math.imul(Ut,Lr),rt=rt+Math.imul(Ft,$r)|0,mt=Math.imul(Ft,Lr),pt=pt+Math.imul(tr,Ur)|0,rt=rt+Math.imul(tr,Jr)|0,rt=rt+Math.imul(bt,Ur)|0,mt=mt+Math.imul(bt,Jr)|0,pt=pt+Math.imul(Kt,Fr)|0,rt=rt+Math.imul(Kt,Vr)|0,rt=rt+Math.imul(er,Fr)|0,mt=mt+Math.imul(er,Vr)|0;var vn=(Et+pt|0)+((rt&8191)<<13)|0;Et=(mt+(rt>>>13)|0)+(vn>>>26)|0,vn&=67108863,pt=Math.imul(Ut,Ur),rt=Math.imul(Ut,Jr),rt=rt+Math.imul(Ft,Ur)|0,mt=Math.imul(Ft,Jr),pt=pt+Math.imul(tr,Fr)|0,rt=rt+Math.imul(tr,Vr)|0,rt=rt+Math.imul(bt,Fr)|0,mt=mt+Math.imul(bt,Vr)|0;var gn=(Et+pt|0)+((rt&8191)<<13)|0;Et=(mt+(rt>>>13)|0)+(gn>>>26)|0,gn&=67108863,pt=Math.imul(Ut,Fr),rt=Math.imul(Ut,Vr),rt=rt+Math.imul(Ft,Fr)|0,mt=Math.imul(Ft,Vr);var Sn=(Et+pt|0)+((rt&8191)<<13)|0;return Et=(mt+(rt>>>13)|0)+(Sn>>>26)|0,Sn&=67108863,gt[0]=sn,gt[1]=un,gt[2]=yn,gt[3]=br,gt[4]=wr,gt[5]=Mr,gt[6]=Wr,gt[7]=Hr,gt[8]=Gr,gt[9]=Yr,gt[10]=en,gt[11]=jr,gt[12]=pn,gt[13]=mn,gt[14]=hn,gt[15]=fn,gt[16]=vn,gt[17]=gn,gt[18]=Sn,Et!==0&&(gt[19]=Et,it.length++),it};Math.imul||(At=Tt);function Mt(ut,_e,tt){tt.negative=_e.negative^ut.negative,tt.length=ut.length+_e.length;for(var it=0,dt=0,lt=0;lt<tt.length-1;lt++){var gt=dt;dt=0;for(var Et=it&67108863,pt=Math.min(lt,_e.length-1),rt=Math.max(0,lt-ut.length+1);rt<=pt;rt++){var mt=lt-rt,Lt=ut.words[mt]|0,Gt=_e.words[rt]|0,rr=Lt*Gt,ir=rr&67108863;gt=gt+(rr/67108864|0)|0,ir=ir+Et|0,Et=ir&67108863,gt=gt+(ir>>>26)|0,dt+=gt>>>26,gt&=67108863}tt.words[lt]=Et,it=gt,gt=dt}return it!==0?tt.words[lt]=it:tt.length--,tt.strip()}function Dt(ut,_e,tt){var it=new Rt;return it.mulp(ut,_e,tt)}k.prototype.mulTo=function(_e,tt){var it,dt=this.length+_e.length;return this.length===10&&_e.length===10?it=At(this,_e,tt):dt<63?it=Tt(this,_e,tt):dt<1024?it=Mt(this,_e,tt):it=Dt(this,_e,tt),it};function Rt(ut,_e){this.x=ut,this.y=_e}Rt.prototype.makeRBT=function(_e){for(var tt=new Array(_e),it=k.prototype._countBits(_e)-1,dt=0;dt<_e;dt++)tt[dt]=this.revBin(dt,it,_e);return tt},Rt.prototype.revBin=function(_e,tt,it){if(_e===0||_e===it-1)return _e;for(var dt=0,lt=0;lt<tt;lt++)dt|=(_e&1)<<tt-lt-1,_e>>=1;return dt},Rt.prototype.permute=function(_e,tt,it,dt,lt,gt){for(var Et=0;Et<gt;Et++)dt[Et]=tt[_e[Et]],lt[Et]=it[_e[Et]]},Rt.prototype.transform=function(_e,tt,it,dt,lt,gt){this.permute(gt,_e,tt,it,dt,lt);for(var Et=1;Et<lt;Et<<=1)for(var pt=Et<<1,rt=Math.cos(2*Math.PI/pt),mt=Math.sin(2*Math.PI/pt),Lt=0;Lt<lt;Lt+=pt)for(var Gt=rt,rr=mt,ir=0;ir<Et;ir++){var Wt=it[Lt+ir],zt=dt[Lt+ir],wt=it[Lt+ir+Et],Vt=dt[Lt+ir+Et],Qt=Gt*wt-rr*Vt;Vt=Gt*Vt+rr*wt,wt=Qt,it[Lt+ir]=Wt+wt,dt[Lt+ir]=zt+Vt,it[Lt+ir+Et]=Wt-wt,dt[Lt+ir+Et]=zt-Vt,ir!==pt&&(Qt=rt*Gt-mt*rr,rr=rt*rr+mt*Gt,Gt=Qt)}},Rt.prototype.guessLen13b=function(_e,tt){var it=Math.max(tt,_e)|1,dt=it&1,lt=0;for(it=it/2|0;it;it=it>>>1)lt++;return 1<<lt+1+dt},Rt.prototype.conjugate=function(_e,tt,it){if(!(it<=1))for(var dt=0;dt<it/2;dt++){var lt=_e[dt];_e[dt]=_e[it-dt-1],_e[it-dt-1]=lt,lt=tt[dt],tt[dt]=-tt[it-dt-1],tt[it-dt-1]=-lt}},Rt.prototype.normalize13b=function(_e,tt){for(var it=0,dt=0;dt<tt/2;dt++){var lt=Math.round(_e[2*dt+1]/tt)*8192+Math.round(_e[2*dt]/tt)+it;_e[dt]=lt&67108863,lt<67108864?it=0:it=lt/67108864|0}return _e},Rt.prototype.convert13b=function(_e,tt,it,dt){for(var lt=0,gt=0;gt<tt;gt++)lt=lt+(_e[gt]|0),it[2*gt]=lt&8191,lt=lt>>>13,it[2*gt+1]=lt&8191,lt=lt>>>13;for(gt=2*tt;gt<dt;++gt)it[gt]=0;_(lt===0),_((lt&-8192)===0)},Rt.prototype.stub=function(_e){for(var tt=new Array(_e),it=0;it<_e;it++)tt[it]=0;return tt},Rt.prototype.mulp=function(_e,tt,it){var dt=2*this.guessLen13b(_e.length,tt.length),lt=this.makeRBT(dt),gt=this.stub(dt),Et=new Array(dt),pt=new Array(dt),rt=new Array(dt),mt=new Array(dt),Lt=new Array(dt),Gt=new Array(dt),rr=it.words;rr.length=dt,this.convert13b(_e.words,_e.length,Et,dt),this.convert13b(tt.words,tt.length,mt,dt),this.transform(Et,gt,pt,rt,dt,lt),this.transform(mt,gt,Lt,Gt,dt,lt);for(var ir=0;ir<dt;ir++){var Wt=pt[ir]*Lt[ir]-rt[ir]*Gt[ir];rt[ir]=pt[ir]*Gt[ir]+rt[ir]*Lt[ir],pt[ir]=Wt}return this.conjugate(pt,rt,dt),this.transform(pt,rt,rr,gt,dt,lt),this.conjugate(rr,gt,dt),this.normalize13b(rr,dt),it.negative=_e.negative^tt.negative,it.length=_e.length+tt.length,it.strip()},k.prototype.mul=function(_e){var tt=new k(null);return tt.words=new Array(this.length+_e.length),this.mulTo(_e,tt)},k.prototype.mulf=function(_e){var tt=new k(null);return tt.words=new Array(this.length+_e.length),Dt(this,_e,tt)},k.prototype.imul=function(_e){return this.clone().mulTo(_e,this)},k.prototype.imuln=function(_e){_(typeof _e=="number"),_(_e<67108864);for(var tt=0,it=0;it<this.length;it++){var dt=(this.words[it]|0)*_e,lt=(dt&67108863)+(tt&67108863);tt>>=26,tt+=dt/67108864|0,tt+=lt>>>26,this.words[it]=lt&67108863}return tt!==0&&(this.words[it]=tt,this.length++),this},k.prototype.muln=function(_e){return this.clone().imuln(_e)},k.prototype.sqr=function(){return this.mul(this)},k.prototype.isqr=function(){return this.imul(this.clone())},k.prototype.pow=function(_e){var tt=$t(_e);if(tt.length===0)return new k(1);for(var it=this,dt=0;dt<tt.length&&tt[dt]===0;dt++,it=it.sqr());if(++dt<tt.length)for(var lt=it.sqr();dt<tt.length;dt++,lt=lt.sqr())tt[dt]!==0&&(it=it.mul(lt));return it},k.prototype.iushln=function(_e){_(typeof _e=="number"&&_e>=0);var tt=_e%26,it=(_e-tt)/26,dt=67108863>>>26-tt<<26-tt,lt;if(tt!==0){var gt=0;for(lt=0;lt<this.length;lt++){var Et=this.words[lt]&dt,pt=(this.words[lt]|0)-Et<<tt;this.words[lt]=pt|gt,gt=Et>>>26-tt}gt&&(this.words[lt]=gt,this.length++)}if(it!==0){for(lt=this.length-1;lt>=0;lt--)this.words[lt+it]=this.words[lt];for(lt=0;lt<it;lt++)this.words[lt]=0;this.length+=it}return this.strip()},k.prototype.ishln=function(_e){return _(this.negative===0),this.iushln(_e)},k.prototype.iushrn=function(_e,tt,it){_(typeof _e=="number"&&_e>=0);var dt;tt?dt=(tt-tt%26)/26:dt=0;var lt=_e%26,gt=Math.min((_e-lt)/26,this.length),Et=67108863^67108863>>>lt<<lt,pt=it;if(dt-=gt,dt=Math.max(0,dt),pt){for(var rt=0;rt<gt;rt++)pt.words[rt]=this.words[rt];pt.length=gt}if(gt!==0)if(this.length>gt)for(this.length-=gt,rt=0;rt<this.length;rt++)this.words[rt]=this.words[rt+gt];else this.words[0]=0,this.length=1;var mt=0;for(rt=this.length-1;rt>=0&&(mt!==0||rt>=dt);rt--){var Lt=this.words[rt]|0;this.words[rt]=mt<<26-lt|Lt>>>lt,mt=Lt&Et}return pt&&mt!==0&&(pt.words[pt.length++]=mt),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},k.prototype.ishrn=function(_e,tt,it){return _(this.negative===0),this.iushrn(_e,tt,it)},k.prototype.shln=function(_e){return this.clone().ishln(_e)},k.prototype.ushln=function(_e){return this.clone().iushln(_e)},k.prototype.shrn=function(_e){return this.clone().ishrn(_e)},k.prototype.ushrn=function(_e){return this.clone().iushrn(_e)},k.prototype.testn=function(_e){_(typeof _e=="number"&&_e>=0);var tt=_e%26,it=(_e-tt)/26,dt=1<<tt;if(this.length<=it)return!1;var lt=this.words[it];return!!(lt&dt)},k.prototype.imaskn=function(_e){_(typeof _e=="number"&&_e>=0);var tt=_e%26,it=(_e-tt)/26;if(_(this.negative===0,"imaskn works only with positive numbers"),this.length<=it)return this;if(tt!==0&&it++,this.length=Math.min(it,this.length),tt!==0){var dt=67108863^67108863>>>tt<<tt;this.words[this.length-1]&=dt}return this.strip()},k.prototype.maskn=function(_e){return this.clone().imaskn(_e)},k.prototype.iaddn=function(_e){return _(typeof _e=="number"),_(_e<67108864),_e<0?this.isubn(-_e):this.negative!==0?this.length===1&&(this.words[0]|0)<_e?(this.words[0]=_e-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(_e),this.negative=1,this):this._iaddn(_e)},k.prototype._iaddn=function(_e){this.words[0]+=_e;for(var tt=0;tt<this.length&&this.words[tt]>=67108864;tt++)this.words[tt]-=67108864,tt===this.length-1?this.words[tt+1]=1:this.words[tt+1]++;return this.length=Math.max(this.length,tt+1),this},k.prototype.isubn=function(_e){if(_(typeof _e=="number"),_(_e<67108864),_e<0)return this.iaddn(-_e);if(this.negative!==0)return this.negative=0,this.iaddn(_e),this.negative=1,this;if(this.words[0]-=_e,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var tt=0;tt<this.length&&this.words[tt]<0;tt++)this.words[tt]+=67108864,this.words[tt+1]-=1;return this.strip()},k.prototype.addn=function(_e){return this.clone().iaddn(_e)},k.prototype.subn=function(_e){return this.clone().isubn(_e)},k.prototype.iabs=function(){return this.negative=0,this},k.prototype.abs=function(){return this.clone().iabs()},k.prototype._ishlnsubmul=function(_e,tt,it){var dt=_e.length+it,lt;this._expand(dt);var gt,Et=0;for(lt=0;lt<_e.length;lt++){gt=(this.words[lt+it]|0)+Et;var pt=(_e.words[lt]|0)*tt;gt-=pt&67108863,Et=(gt>>26)-(pt/67108864|0),this.words[lt+it]=gt&67108863}for(;lt<this.length-it;lt++)gt=(this.words[lt+it]|0)+Et,Et=gt>>26,this.words[lt+it]=gt&67108863;if(Et===0)return this.strip();for(_(Et===-1),Et=0,lt=0;lt<this.length;lt++)gt=-(this.words[lt]|0)+Et,Et=gt>>26,this.words[lt]=gt&67108863;return this.negative=1,this.strip()},k.prototype._wordDiv=function(_e,tt){var it=this.length-_e.length,dt=this.clone(),lt=_e,gt=lt.words[lt.length-1]|0,Et=this._countBits(gt);it=26-Et,it!==0&&(lt=lt.ushln(it),dt.iushln(it),gt=lt.words[lt.length-1]|0);var pt=dt.length-lt.length,rt;if(tt!=="mod"){rt=new k(null),rt.length=pt+1,rt.words=new Array(rt.length);for(var mt=0;mt<rt.length;mt++)rt.words[mt]=0}var Lt=dt.clone()._ishlnsubmul(lt,1,pt);Lt.negative===0&&(dt=Lt,rt&&(rt.words[pt]=1));for(var Gt=pt-1;Gt>=0;Gt--){var rr=(dt.words[lt.length+Gt]|0)*67108864+(dt.words[lt.length+Gt-1]|0);for(rr=Math.min(rr/gt|0,67108863),dt._ishlnsubmul(lt,rr,Gt);dt.negative!==0;)rr--,dt.negative=0,dt._ishlnsubmul(lt,1,Gt),dt.isZero()||(dt.negative^=1);rt&&(rt.words[Gt]=rr)}return rt&&rt.strip(),dt.strip(),tt!=="div"&&it!==0&&dt.iushrn(it),{div:rt||null,mod:dt}},k.prototype.divmod=function(_e,tt,it){if(_(!_e.isZero()),this.isZero())return{div:new k(0),mod:new k(0)};var dt,lt,gt;return this.negative!==0&&_e.negative===0?(gt=this.neg().divmod(_e,tt),tt!=="mod"&&(dt=gt.div.neg()),tt!=="div"&&(lt=gt.mod.neg(),it&&lt.negative!==0&&lt.iadd(_e)),{div:dt,mod:lt}):this.negative===0&&_e.negative!==0?(gt=this.divmod(_e.neg(),tt),tt!=="mod"&&(dt=gt.div.neg()),{div:dt,mod:gt.mod}):this.negative&_e.negative?(gt=this.neg().divmod(_e.neg(),tt),tt!=="div"&&(lt=gt.mod.neg(),it&&lt.negative!==0&&lt.isub(_e)),{div:gt.div,mod:lt}):_e.length>this.length||this.cmp(_e)<0?{div:new k(0),mod:this}:_e.length===1?tt==="div"?{div:this.divn(_e.words[0]),mod:null}:tt==="mod"?{div:null,mod:new k(this.modn(_e.words[0]))}:{div:this.divn(_e.words[0]),mod:new k(this.modn(_e.words[0]))}:this._wordDiv(_e,tt)},k.prototype.div=function(_e){return this.divmod(_e,"div",!1).div},k.prototype.mod=function(_e){return this.divmod(_e,"mod",!1).mod},k.prototype.umod=function(_e){return this.divmod(_e,"mod",!0).mod},k.prototype.divRound=function(_e){var tt=this.divmod(_e);if(tt.mod.isZero())return tt.div;var it=tt.div.negative!==0?tt.mod.isub(_e):tt.mod,dt=_e.ushrn(1),lt=_e.andln(1),gt=it.cmp(dt);return gt<0||lt===1&&gt===0?tt.div:tt.div.negative!==0?tt.div.isubn(1):tt.div.iaddn(1)},k.prototype.modn=function(_e){_(_e<=67108863);for(var tt=(1<<26)%_e,it=0,dt=this.length-1;dt>=0;dt--)it=(tt*it+(this.words[dt]|0))%_e;return it},k.prototype.idivn=function(_e){_(_e<=67108863);for(var tt=0,it=this.length-1;it>=0;it--){var dt=(this.words[it]|0)+tt*67108864;this.words[it]=dt/_e|0,tt=dt%_e}return this.strip()},k.prototype.divn=function(_e){return this.clone().idivn(_e)},k.prototype.egcd=function(_e){_(_e.negative===0),_(!_e.isZero());var tt=this,it=_e.clone();tt.negative!==0?tt=tt.umod(_e):tt=tt.clone();for(var dt=new k(1),lt=new k(0),gt=new k(0),Et=new k(1),pt=0;tt.isEven()&&it.isEven();)tt.iushrn(1),it.iushrn(1),++pt;for(var rt=it.clone(),mt=tt.clone();!tt.isZero();){for(var Lt=0,Gt=1;!(tt.words[0]&Gt)&&Lt<26;++Lt,Gt<<=1);if(Lt>0)for(tt.iushrn(Lt);Lt-- >0;)(dt.isOdd()||lt.isOdd())&&(dt.iadd(rt),lt.isub(mt)),dt.iushrn(1),lt.iushrn(1);for(var rr=0,ir=1;!(it.words[0]&ir)&&rr<26;++rr,ir<<=1);if(rr>0)for(it.iushrn(rr);rr-- >0;)(gt.isOdd()||Et.isOdd())&&(gt.iadd(rt),Et.isub(mt)),gt.iushrn(1),Et.iushrn(1);tt.cmp(it)>=0?(tt.isub(it),dt.isub(gt),lt.isub(Et)):(it.isub(tt),gt.isub(dt),Et.isub(lt))}return{a:gt,b:Et,gcd:it.iushln(pt)}},k.prototype._invmp=function(_e){_(_e.negative===0),_(!_e.isZero());var tt=this,it=_e.clone();tt.negative!==0?tt=tt.umod(_e):tt=tt.clone();for(var dt=new k(1),lt=new k(0),gt=it.clone();tt.cmpn(1)>0&&it.cmpn(1)>0;){for(var Et=0,pt=1;!(tt.words[0]&pt)&&Et<26;++Et,pt<<=1);if(Et>0)for(tt.iushrn(Et);Et-- >0;)dt.isOdd()&&dt.iadd(gt),dt.iushrn(1);for(var rt=0,mt=1;!(it.words[0]&mt)&&rt<26;++rt,mt<<=1);if(rt>0)for(it.iushrn(rt);rt-- >0;)lt.isOdd()&&lt.iadd(gt),lt.iushrn(1);tt.cmp(it)>=0?(tt.isub(it),dt.isub(lt)):(it.isub(tt),lt.isub(dt))}var Lt;return tt.cmpn(1)===0?Lt=dt:Lt=lt,Lt.cmpn(0)<0&&Lt.iadd(_e),Lt},k.prototype.gcd=function(_e){if(this.isZero())return _e.abs();if(_e.isZero())return this.abs();var tt=this.clone(),it=_e.clone();tt.negative=0,it.negative=0;for(var dt=0;tt.isEven()&&it.isEven();dt++)tt.iushrn(1),it.iushrn(1);do{for(;tt.isEven();)tt.iushrn(1);for(;it.isEven();)it.iushrn(1);var lt=tt.cmp(it);if(lt<0){var gt=tt;tt=it,it=gt}else if(lt===0||it.cmpn(1)===0)break;tt.isub(it)}while(!0);return it.iushln(dt)},k.prototype.invm=function(_e){return this.egcd(_e).a.umod(_e)},k.prototype.isEven=function(){return(this.words[0]&1)===0},k.prototype.isOdd=function(){return(this.words[0]&1)===1},k.prototype.andln=function(_e){return this.words[0]&_e},k.prototype.bincn=function(_e){_(typeof _e=="number");var tt=_e%26,it=(_e-tt)/26,dt=1<<tt;if(this.length<=it)return this._expand(it+1),this.words[it]|=dt,this;for(var lt=dt,gt=it;lt!==0&&gt<this.length;gt++){var Et=this.words[gt]|0;Et+=lt,lt=Et>>>26,Et&=67108863,this.words[gt]=Et}return lt!==0&&(this.words[gt]=lt,this.length++),this},k.prototype.isZero=function(){return this.length===1&&this.words[0]===0},k.prototype.cmpn=function(_e){var tt=_e<0;if(this.negative!==0&&!tt)return-1;if(this.negative===0&&tt)return 1;this.strip();var it;if(this.length>1)it=1;else{tt&&(_e=-_e),_(_e<=67108863,"Number is too big");var dt=this.words[0]|0;it=dt===_e?0:dt<_e?-1:1}return this.negative!==0?-it|0:it},k.prototype.cmp=function(_e){if(this.negative!==0&&_e.negative===0)return-1;if(this.negative===0&&_e.negative!==0)return 1;var tt=this.ucmp(_e);return this.negative!==0?-tt|0:tt},k.prototype.ucmp=function(_e){if(this.length>_e.length)return 1;if(this.length<_e.length)return-1;for(var tt=0,it=this.length-1;it>=0;it--){var dt=this.words[it]|0,lt=_e.words[it]|0;if(dt!==lt){dt<lt?tt=-1:dt>lt&&(tt=1);break}}return tt},k.prototype.gtn=function(_e){return this.cmpn(_e)===1},k.prototype.gt=function(_e){return this.cmp(_e)===1},k.prototype.gten=function(_e){return this.cmpn(_e)>=0},k.prototype.gte=function(_e){return this.cmp(_e)>=0},k.prototype.ltn=function(_e){return this.cmpn(_e)===-1},k.prototype.lt=function(_e){return this.cmp(_e)===-1},k.prototype.lten=function(_e){return this.cmpn(_e)<=0},k.prototype.lte=function(_e){return this.cmp(_e)<=0},k.prototype.eqn=function(_e){return this.cmpn(_e)===0},k.prototype.eq=function(_e){return this.cmp(_e)===0},k.red=function(_e){return new Ot(_e)},k.prototype.toRed=function(_e){return _(!this.red,"Already a number in reduction context"),_(this.negative===0,"red works only with positives"),_e.convertTo(this)._forceRed(_e)},k.prototype.fromRed=function(){return _(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},k.prototype._forceRed=function(_e){return this.red=_e,this},k.prototype.forceRed=function(_e){return _(!this.red,"Already a number in reduction context"),this._forceRed(_e)},k.prototype.redAdd=function(_e){return _(this.red,"redAdd works only with red numbers"),this.red.add(this,_e)},k.prototype.redIAdd=function(_e){return _(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,_e)},k.prototype.redSub=function(_e){return _(this.red,"redSub works only with red numbers"),this.red.sub(this,_e)},k.prototype.redISub=function(_e){return _(this.red,"redISub works only with red numbers"),this.red.isub(this,_e)},k.prototype.redShl=function(_e){return _(this.red,"redShl works only with red numbers"),this.red.shl(this,_e)},k.prototype.redMul=function(_e){return _(this.red,"redMul works only with red numbers"),this.red._verify2(this,_e),this.red.mul(this,_e)},k.prototype.redIMul=function(_e){return _(this.red,"redMul works only with red numbers"),this.red._verify2(this,_e),this.red.imul(this,_e)},k.prototype.redSqr=function(){return _(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},k.prototype.redISqr=function(){return _(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},k.prototype.redSqrt=function(){return _(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},k.prototype.redInvm=function(){return _(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},k.prototype.redNeg=function(){return _(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},k.prototype.redPow=function(_e){return _(this.red&&!_e.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,_e)};var xt={k256:null,p224:null,p192:null,p25519:null};function Jt(ut,_e){this.name=ut,this.p=new k(_e,16),this.n=this.p.bitLength(),this.k=new k(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}Jt.prototype._tmp=function(){var _e=new k(null);return _e.words=new Array(Math.ceil(this.n/13)),_e},Jt.prototype.ireduce=function(_e){var tt=_e,it;do this.split(tt,this.tmp),tt=this.imulK(tt),tt=tt.iadd(this.tmp),it=tt.bitLength();while(it>this.n);var dt=it<this.n?-1:tt.ucmp(this.p);return dt===0?(tt.words[0]=0,tt.length=1):dt>0?tt.isub(this.p):tt.strip!==void 0?tt.strip():tt._strip(),tt},Jt.prototype.split=function(_e,tt){_e.iushrn(this.n,0,tt)},Jt.prototype.imulK=function(_e){return _e.imul(this.k)};function ar(){Jt.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}$(ar,Jt),ar.prototype.split=function(_e,tt){for(var it=4194303,dt=Math.min(_e.length,9),lt=0;lt<dt;lt++)tt.words[lt]=_e.words[lt];if(tt.length=dt,_e.length<=9){_e.words[0]=0,_e.length=1;return}var gt=_e.words[9];for(tt.words[tt.length++]=gt&it,lt=10;lt<_e.length;lt++){var Et=_e.words[lt]|0;_e.words[lt-10]=(Et&it)<<4|gt>>>22,gt=Et}gt>>>=22,_e.words[lt-10]=gt,gt===0&&_e.length>10?_e.length-=10:_e.length-=9},ar.prototype.imulK=function(_e){_e.words[_e.length]=0,_e.words[_e.length+1]=0,_e.length+=2;for(var tt=0,it=0;it<_e.length;it++){var dt=_e.words[it]|0;tt+=dt*977,_e.words[it]=tt&67108863,tt=dt*64+(tt/67108864|0)}return _e.words[_e.length-1]===0&&(_e.length--,_e.words[_e.length-1]===0&&_e.length--),_e};function nr(){Jt.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}$(nr,Jt);function pr(){Jt.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}$(pr,Jt);function ur(){Jt.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}$(ur,Jt),ur.prototype.imulK=function(_e){for(var tt=0,it=0;it<_e.length;it++){var dt=(_e.words[it]|0)*19+tt,lt=dt&67108863;dt>>>=26,_e.words[it]=lt,tt=dt}return tt!==0&&(_e.words[_e.length++]=tt),_e},k._prime=function(_e){if(xt[_e])return xt[_e];var tt;if(_e==="k256")tt=new ar;else if(_e==="p224")tt=new nr;else if(_e==="p192")tt=new pr;else if(_e==="p25519")tt=new ur;else throw new Error("Unknown prime "+_e);return xt[_e]=tt,tt};function Ot(ut){if(typeof ut=="string"){var _e=k._prime(ut);this.m=_e.p,this.prime=_e}else _(ut.gtn(1),"modulus must be greater than 1"),this.m=ut,this.prime=null}Ot.prototype._verify1=function(_e){_(_e.negative===0,"red works only with positives"),_(_e.red,"red works only with red numbers")},Ot.prototype._verify2=function(_e,tt){_((_e.negative|tt.negative)===0,"red works only with positives"),_(_e.red&&_e.red===tt.red,"red works only with red numbers")},Ot.prototype.imod=function(_e){return this.prime?this.prime.ireduce(_e)._forceRed(this):_e.umod(this.m)._forceRed(this)},Ot.prototype.neg=function(_e){return _e.isZero()?_e.clone():this.m.sub(_e)._forceRed(this)},Ot.prototype.add=function(_e,tt){this._verify2(_e,tt);var it=_e.add(tt);return it.cmp(this.m)>=0&&it.isub(this.m),it._forceRed(this)},Ot.prototype.iadd=function(_e,tt){this._verify2(_e,tt);var it=_e.iadd(tt);return it.cmp(this.m)>=0&&it.isub(this.m),it},Ot.prototype.sub=function(_e,tt){this._verify2(_e,tt);var it=_e.sub(tt);return it.cmpn(0)<0&&it.iadd(this.m),it._forceRed(this)},Ot.prototype.isub=function(_e,tt){this._verify2(_e,tt);var it=_e.isub(tt);return it.cmpn(0)<0&&it.iadd(this.m),it},Ot.prototype.shl=function(_e,tt){return this._verify1(_e),this.imod(_e.ushln(tt))},Ot.prototype.imul=function(_e,tt){return this._verify2(_e,tt),this.imod(_e.imul(tt))},Ot.prototype.mul=function(_e,tt){return this._verify2(_e,tt),this.imod(_e.mul(tt))},Ot.prototype.isqr=function(_e){return this.imul(_e,_e.clone())},Ot.prototype.sqr=function(_e){return this.mul(_e,_e)},Ot.prototype.sqrt=function(_e){if(_e.isZero())return _e.clone();var tt=this.m.andln(3);if(_(tt%2===1),tt===3){var it=this.m.add(new k(1)).iushrn(2);return this.pow(_e,it)}for(var dt=this.m.subn(1),lt=0;!dt.isZero()&&dt.andln(1)===0;)lt++,dt.iushrn(1);_(!dt.isZero());var gt=new k(1).toRed(this),Et=gt.redNeg(),pt=this.m.subn(1).iushrn(1),rt=this.m.bitLength();for(rt=new k(2*rt*rt).toRed(this);this.pow(rt,pt).cmp(Et)!==0;)rt.redIAdd(Et);for(var mt=this.pow(rt,dt),Lt=this.pow(_e,dt.addn(1).iushrn(1)),Gt=this.pow(_e,dt),rr=lt;Gt.cmp(gt)!==0;){for(var ir=Gt,Wt=0;ir.cmp(gt)!==0;Wt++)ir=ir.redSqr();_(Wt<rr);var zt=this.pow(mt,new k(1).iushln(rr-Wt-1));Lt=Lt.redMul(zt),mt=zt.redSqr(),Gt=Gt.redMul(mt),rr=Wt}return Lt},Ot.prototype.invm=function(_e){var tt=_e._invmp(this.m);return tt.negative!==0?(tt.negative=0,this.imod(tt).redNeg()):this.imod(tt)},Ot.prototype.pow=function(_e,tt){if(tt.isZero())return new k(1).toRed(this);if(tt.cmpn(1)===0)return _e.clone();var it=4,dt=new Array(1<<it);dt[0]=new k(1).toRed(this),dt[1]=_e;for(var lt=2;lt<dt.length;lt++)dt[lt]=this.mul(dt[lt-1],_e);var gt=dt[0],Et=0,pt=0,rt=tt.bitLength()%26;for(rt===0&&(rt=26),lt=tt.length-1;lt>=0;lt--){for(var mt=tt.words[lt],Lt=rt-1;Lt>=0;Lt--){var Gt=mt>>Lt&1;if(gt!==dt[0]&&(gt=this.sqr(gt)),Gt===0&&Et===0){pt=0;continue}Et<<=1,Et|=Gt,pt++,!(pt!==it&&(lt!==0||Lt!==0))&&(gt=this.mul(gt,dt[Et]),pt=0,Et=0)}rt=26}return gt},Ot.prototype.convertTo=function(_e){var tt=_e.umod(this.m);return tt===_e?tt.clone():tt},Ot.prototype.convertFrom=function(_e){var tt=_e.clone();return tt.red=null,tt},k.mont=function(_e){return new It(_e)};function It(ut){Ot.call(this,ut),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new k(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}$(It,Ot),It.prototype.convertTo=function(_e){return this.imod(_e.ushln(this.shift))},It.prototype.convertFrom=function(_e){var tt=this.imod(_e.mul(this.rinv));return tt.red=null,tt},It.prototype.imul=function(_e,tt){if(_e.isZero()||tt.isZero())return _e.words[0]=0,_e.length=1,_e;var it=_e.imul(tt),dt=it.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),lt=it.isub(dt).iushrn(this.shift),gt=lt;return lt.cmp(this.m)>=0?gt=lt.isub(this.m):lt.cmpn(0)<0&&(gt=lt.iadd(this.m)),gt._forceRed(this)},It.prototype.mul=function(_e,tt){if(_e.isZero()||tt.isZero())return new k(0)._forceRed(this);var it=_e.mul(tt),dt=it.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),lt=it.isub(dt).iushrn(this.shift),gt=lt;return lt.cmp(this.m)>=0?gt=lt.isub(this.m):lt.cmpn(0)<0&&(gt=lt.iadd(this.m)),gt._forceRed(this)},It.prototype.invm=function(_e){var tt=this.imod(_e._invmp(this.m).mul(this.r2));return tt._forceRed(this)}})(a,commonjsGlobal$1)})(bn$2);var bnExports$2=bn$2.exports,api={},encoders={},buffer$1=require$$0$2,Buffer$f=buffer$1.Buffer,safer={},key;for(key in buffer$1)buffer$1.hasOwnProperty(key)&&(key==="SlowBuffer"||key==="Buffer"||(safer[key]=buffer$1[key]));var Safer=safer.Buffer={};for(key in Buffer$f)Buffer$f.hasOwnProperty(key)&&(key==="allocUnsafe"||key==="allocUnsafeSlow"||(Safer[key]=Buffer$f[key]));safer.Buffer.prototype=Buffer$f.prototype;(!Safer.from||Safer.from===Uint8Array.from)&&(Safer.from=function(a,c,b){if(typeof a=="number")throw new TypeError('The "value" argument must not be of type number. Received type '+typeof a);if(a&&typeof a.length>"u")throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof a);return Buffer$f(a,c,b)});Safer.alloc||(Safer.alloc=function(a,c,b){if(typeof a!="number")throw new TypeError('The "size" argument must be of type number. Received type '+typeof a);if(a<0||a>=2*(1<<30))throw new RangeError('The value "'+a+'" is invalid for option "size"');var _=Buffer$f(a);return!c||c.length===0?_.fill(0):typeof b=="string"?_.fill(c,b):_.fill(c),_});if(!safer.kStringMaxLength)try{safer.kStringMaxLength=process$1.binding("buffer").kStringMaxLength}catch{}safer.constants||(safer.constants={MAX_LENGTH:safer.kMaxLength},safer.kStringMaxLength&&(safer.constants.MAX_STRING_LENGTH=safer.kStringMaxLength));var safer_1=safer,reporter={};const inherits$5=inherits_browserExports;function Reporter$2(a){this._reporterState={obj:null,path:[],options:a||{},errors:[]}}reporter.Reporter=Reporter$2;Reporter$2.prototype.isError=function a(c){return c instanceof ReporterError};Reporter$2.prototype.save=function a(){const c=this._reporterState;return{obj:c.obj,pathLen:c.path.length}};Reporter$2.prototype.restore=function a(c){const b=this._reporterState;b.obj=c.obj,b.path=b.path.slice(0,c.pathLen)};Reporter$2.prototype.enterKey=function a(c){return this._reporterState.path.push(c)};Reporter$2.prototype.exitKey=function a(c){const b=this._reporterState;b.path=b.path.slice(0,c-1)};Reporter$2.prototype.leaveKey=function a(c,b,_){const $=this._reporterState;this.exitKey(c),$.obj!==null&&($.obj[b]=_)};Reporter$2.prototype.path=function a(){return this._reporterState.path.join("/")};Reporter$2.prototype.enterObject=function a(){const c=this._reporterState,b=c.obj;return c.obj={},b};Reporter$2.prototype.leaveObject=function a(c){const b=this._reporterState,_=b.obj;return b.obj=c,_};Reporter$2.prototype.error=function a(c){let b;const _=this._reporterState,$=c instanceof ReporterError;if($?b=c:b=new ReporterError(_.path.map(function(k){return"["+JSON.stringify(k)+"]"}).join(""),c.message||c,c.stack),!_.options.partial)throw b;return $||_.errors.push(b),b};Reporter$2.prototype.wrapResult=function a(c){const b=this._reporterState;return b.options.partial?{result:this.isError(c)?null:c,errors:b.errors}:c};function ReporterError(a,c){this.path=a,this.rethrow(c)}inherits$5(ReporterError,Error);ReporterError.prototype.rethrow=function a(c){if(this.message=c+" at: "+(this.path||"(shallow)"),Error.captureStackTrace&&Error.captureStackTrace(this,ReporterError),!this.stack)try{throw new Error(this.message)}catch(b){this.stack=b.stack}return this};var buffer={};const inherits$4=inherits_browserExports,Reporter$1=reporter.Reporter,Buffer$e=safer_1.Buffer;function DecoderBuffer$2(a,c){if(Reporter$1.call(this,c),!Buffer$e.isBuffer(a)){this.error("Input not Buffer");return}this.base=a,this.offset=0,this.length=a.length}inherits$4(DecoderBuffer$2,Reporter$1);buffer.DecoderBuffer=DecoderBuffer$2;DecoderBuffer$2.isDecoderBuffer=function a(c){return c instanceof DecoderBuffer$2?!0:typeof c=="object"&&Buffer$e.isBuffer(c.base)&&c.constructor.name==="DecoderBuffer"&&typeof c.offset=="number"&&typeof c.length=="number"&&typeof c.save=="function"&&typeof c.restore=="function"&&typeof c.isEmpty=="function"&&typeof c.readUInt8=="function"&&typeof c.skip=="function"&&typeof c.raw=="function"};DecoderBuffer$2.prototype.save=function a(){return{offset:this.offset,reporter:Reporter$1.prototype.save.call(this)}};DecoderBuffer$2.prototype.restore=function a(c){const b=new DecoderBuffer$2(this.base);return b.offset=c.offset,b.length=this.offset,this.offset=c.offset,Reporter$1.prototype.restore.call(this,c.reporter),b};DecoderBuffer$2.prototype.isEmpty=function a(){return this.offset===this.length};DecoderBuffer$2.prototype.readUInt8=function a(c){return this.offset+1<=this.length?this.base.readUInt8(this.offset++,!0):this.error(c||"DecoderBuffer overrun")};DecoderBuffer$2.prototype.skip=function a(c,b){if(!(this.offset+c<=this.length))return this.error(b||"DecoderBuffer overrun");const _=new DecoderBuffer$2(this.base);return _._reporterState=this._reporterState,_.offset=this.offset,_.length=this.offset+c,this.offset+=c,_};DecoderBuffer$2.prototype.raw=function a(c){return this.base.slice(c?c.offset:this.offset,this.length)};function EncoderBuffer$1(a,c){if(Array.isArray(a))this.length=0,this.value=a.map(function(b){return EncoderBuffer$1.isEncoderBuffer(b)||(b=new EncoderBuffer$1(b,c)),this.length+=b.length,b},this);else if(typeof a=="number"){if(!(0<=a&&a<=255))return c.error("non-byte EncoderBuffer value");this.value=a,this.length=1}else if(typeof a=="string")this.value=a,this.length=Buffer$e.byteLength(a);else if(Buffer$e.isBuffer(a))this.value=a,this.length=a.length;else return c.error("Unsupported type: "+typeof a)}buffer.EncoderBuffer=EncoderBuffer$1;EncoderBuffer$1.isEncoderBuffer=function a(c){return c instanceof EncoderBuffer$1?!0:typeof c=="object"&&c.constructor.name==="EncoderBuffer"&&typeof c.length=="number"&&typeof c.join=="function"};EncoderBuffer$1.prototype.join=function a(c,b){return c||(c=Buffer$e.alloc(this.length)),b||(b=0),this.length===0||(Array.isArray(this.value)?this.value.forEach(function(_){_.join(c,b),b+=_.length}):(typeof this.value=="number"?c[b]=this.value:typeof this.value=="string"?c.write(this.value,b):Buffer$e.isBuffer(this.value)&&this.value.copy(c,b),b+=this.length)),c};const Reporter=reporter.Reporter,EncoderBuffer=buffer.EncoderBuffer,DecoderBuffer$1=buffer.DecoderBuffer,assert=minimalisticAssert,tags=["seq","seqof","set","setof","objid","bool","gentime","utctime","null_","enum","int","objDesc","bitstr","bmpstr","charstr","genstr","graphstr","ia5str","iso646str","numstr","octstr","printstr","t61str","unistr","utf8str","videostr"],methods=["key","obj","use","optional","explicit","implicit","def","choice","any","contains"].concat(tags),overrided=["_peekTag","_decodeTag","_use","_decodeStr","_decodeObjid","_decodeTime","_decodeNull","_decodeInt","_decodeBool","_decodeList","_encodeComposite","_encodeStr","_encodeObjid","_encodeTime","_encodeNull","_encodeInt","_encodeBool"];function Node$2(a,c,b){const _={};this._baseState=_,_.name=b,_.enc=a,_.parent=c||null,_.children=null,_.tag=null,_.args=null,_.reverseArgs=null,_.choice=null,_.optional=!1,_.any=!1,_.obj=!1,_.use=null,_.useDecoder=null,_.key=null,_.default=null,_.explicit=null,_.implicit=null,_.contains=null,_.parent||(_.children=[],this._wrap())}var node=Node$2;const stateProps=["enc","parent","children","tag","args","reverseArgs","choice","optional","any","obj","use","alteredUse","key","default","explicit","implicit","contains"];Node$2.prototype.clone=function a(){const c=this._baseState,b={};stateProps.forEach(function($){b[$]=c[$]});const _=new this.constructor(b.parent);return _._baseState=b,_};Node$2.prototype._wrap=function a(){const c=this._baseState;methods.forEach(function(b){this[b]=function(){const $=new this.constructor(this);return c.children.push($),$[b].apply($,arguments)}},this)};Node$2.prototype._init=function a(c){const b=this._baseState;assert(b.parent===null),c.call(this),b.children=b.children.filter(function(_){return _._baseState.parent===this},this),assert.equal(b.children.length,1,"Root node can have only one child")};Node$2.prototype._useArgs=function a(c){const b=this._baseState,_=c.filter(function($){return $ instanceof this.constructor},this);c=c.filter(function($){return!($ instanceof this.constructor)},this),_.length!==0&&(assert(b.children===null),b.children=_,_.forEach(function($){$._baseState.parent=this},this)),c.length!==0&&(assert(b.args===null),b.args=c,b.reverseArgs=c.map(function($){if(typeof $!="object"||$.constructor!==Object)return $;const k={};return Object.keys($).forEach(function(et){et==(et|0)&&(et|=0);const nt=$[et];k[nt]=et}),k}))};overrided.forEach(function(a){Node$2.prototype[a]=function(){const b=this._baseState;throw new Error(a+" not implemented for encoding: "+b.enc)}});tags.forEach(function(a){Node$2.prototype[a]=function(){const b=this._baseState,_=Array.prototype.slice.call(arguments);return assert(b.tag===null),b.tag=a,this._useArgs(_),this}});Node$2.prototype.use=function a(c){assert(c);const b=this._baseState;return assert(b.use===null),b.use=c,this};Node$2.prototype.optional=function a(){const c=this._baseState;return c.optional=!0,this};Node$2.prototype.def=function a(c){const b=this._baseState;return assert(b.default===null),b.default=c,b.optional=!0,this};Node$2.prototype.explicit=function a(c){const b=this._baseState;return assert(b.explicit===null&&b.implicit===null),b.explicit=c,this};Node$2.prototype.implicit=function a(c){const b=this._baseState;return assert(b.explicit===null&&b.implicit===null),b.implicit=c,this};Node$2.prototype.obj=function a(){const c=this._baseState,b=Array.prototype.slice.call(arguments);return c.obj=!0,b.length!==0&&this._useArgs(b),this};Node$2.prototype.key=function a(c){const b=this._baseState;return assert(b.key===null),b.key=c,this};Node$2.prototype.any=function a(){const c=this._baseState;return c.any=!0,this};Node$2.prototype.choice=function a(c){const b=this._baseState;return assert(b.choice===null),b.choice=c,this._useArgs(Object.keys(c).map(function(_){return c[_]})),this};Node$2.prototype.contains=function a(c){const b=this._baseState;return assert(b.use===null),b.contains=c,this};Node$2.prototype._decode=function a(c,b){const _=this._baseState;if(_.parent===null)return c.wrapResult(_.children[0]._decode(c,b));let $=_.default,k=!0,et=null;if(_.key!==null&&(et=c.enterKey(_.key)),_.optional){let ot=null;if(_.explicit!==null?ot=_.explicit:_.implicit!==null?ot=_.implicit:_.tag!==null&&(ot=_.tag),ot===null&&!_.any){const ht=c.save();try{_.choice===null?this._decodeGeneric(_.tag,c,b):this._decodeChoice(c,b),k=!0}catch{k=!1}c.restore(ht)}else if(k=this._peekTag(c,ot,_.any),c.isError(k))return k}let nt;if(_.obj&&k&&(nt=c.enterObject()),k){if(_.explicit!==null){const ht=this._decodeTag(c,_.explicit);if(c.isError(ht))return ht;c=ht}const ot=c.offset;if(_.use===null&&_.choice===null){let ht;_.any&&(ht=c.save());const vt=this._decodeTag(c,_.implicit!==null?_.implicit:_.tag,_.any);if(c.isError(vt))return vt;_.any?$=c.raw(ht):c=vt}if(b&&b.track&&_.tag!==null&&b.track(c.path(),ot,c.length,"tagged"),b&&b.track&&_.tag!==null&&b.track(c.path(),c.offset,c.length,"content"),_.any||(_.choice===null?$=this._decodeGeneric(_.tag,c,b):$=this._decodeChoice(c,b)),c.isError($))return $;if(!_.any&&_.choice===null&&_.children!==null&&_.children.forEach(function(vt){vt._decode(c,b)}),_.contains&&(_.tag==="octstr"||_.tag==="bitstr")){const ht=new DecoderBuffer$1($);$=this._getUse(_.contains,c._reporterState.obj)._decode(ht,b)}}return _.obj&&k&&($=c.leaveObject(nt)),_.key!==null&&($!==null||k===!0)?c.leaveKey(et,_.key,$):et!==null&&c.exitKey(et),$};Node$2.prototype._decodeGeneric=function a(c,b,_){const $=this._baseState;return c==="seq"||c==="set"?null:c==="seqof"||c==="setof"?this._decodeList(b,c,$.args[0],_):/str$/.test(c)?this._decodeStr(b,c,_):c==="objid"&&$.args?this._decodeObjid(b,$.args[0],$.args[1],_):c==="objid"?this._decodeObjid(b,null,null,_):c==="gentime"||c==="utctime"?this._decodeTime(b,c,_):c==="null_"?this._decodeNull(b,_):c==="bool"?this._decodeBool(b,_):c==="objDesc"?this._decodeStr(b,c,_):c==="int"||c==="enum"?this._decodeInt(b,$.args&&$.args[0],_):$.use!==null?this._getUse($.use,b._reporterState.obj)._decode(b,_):b.error("unknown tag: "+c)};Node$2.prototype._getUse=function a(c,b){const _=this._baseState;return _.useDecoder=this._use(c,b),assert(_.useDecoder._baseState.parent===null),_.useDecoder=_.useDecoder._baseState.children[0],_.implicit!==_.useDecoder._baseState.implicit&&(_.useDecoder=_.useDecoder.clone(),_.useDecoder._baseState.implicit=_.implicit),_.useDecoder};Node$2.prototype._decodeChoice=function a(c,b){const _=this._baseState;let $=null,k=!1;return Object.keys(_.choice).some(function(et){const nt=c.save(),ot=_.choice[et];try{const ht=ot._decode(c,b);if(c.isError(ht))return!1;$={type:et,value:ht},k=!0}catch{return c.restore(nt),!1}return!0},this),k?$:c.error("Choice not matched")};Node$2.prototype._createEncoderBuffer=function a(c){return new EncoderBuffer(c,this.reporter)};Node$2.prototype._encode=function a(c,b,_){const $=this._baseState;if($.default!==null&&$.default===c)return;const k=this._encodeValue(c,b,_);if(k!==void 0&&!this._skipDefault(k,b,_))return k};Node$2.prototype._encodeValue=function a(c,b,_){const $=this._baseState;if($.parent===null)return $.children[0]._encode(c,b||new Reporter);let k=null;if(this.reporter=b,$.optional&&c===void 0)if($.default!==null)c=$.default;else return;let et=null,nt=!1;if($.any)k=this._createEncoderBuffer(c);else if($.choice)k=this._encodeChoice(c,b);else if($.contains)et=this._getUse($.contains,_)._encode(c,b),nt=!0;else if($.children)et=$.children.map(function(ot){if(ot._baseState.tag==="null_")return ot._encode(null,b,c);if(ot._baseState.key===null)return b.error("Child should have a key");const ht=b.enterKey(ot._baseState.key);if(typeof c!="object")return b.error("Child expected, but input is not object");const vt=ot._encode(c[ot._baseState.key],b,c);return b.leaveKey(ht),vt},this).filter(function(ot){return ot}),et=this._createEncoderBuffer(et);else if($.tag==="seqof"||$.tag==="setof"){if(!($.args&&$.args.length===1))return b.error("Too many args for : "+$.tag);if(!Array.isArray(c))return b.error("seqof/setof, but data is not Array");const ot=this.clone();ot._baseState.implicit=null,et=this._createEncoderBuffer(c.map(function(ht){const vt=this._baseState;return this._getUse(vt.args[0],c)._encode(ht,b)},ot))}else $.use!==null?k=this._getUse($.use,_)._encode(c,b):(et=this._encodePrimitive($.tag,c),nt=!0);if(!$.any&&$.choice===null){const ot=$.implicit!==null?$.implicit:$.tag,ht=$.implicit===null?"universal":"context";ot===null?$.use===null&&b.error("Tag could be omitted only for .use()"):$.use===null&&(k=this._encodeComposite(ot,nt,ht,et))}return $.explicit!==null&&(k=this._encodeComposite($.explicit,!1,"context",k)),k};Node$2.prototype._encodeChoice=function a(c,b){const _=this._baseState,$=_.choice[c.type];return $||assert(!1,c.type+" not found in "+JSON.stringify(Object.keys(_.choice))),$._encode(c.value,b)};Node$2.prototype._encodePrimitive=function a(c,b){const _=this._baseState;if(/str$/.test(c))return this._encodeStr(b,c);if(c==="objid"&&_.args)return this._encodeObjid(b,_.reverseArgs[0],_.args[1]);if(c==="objid")return this._encodeObjid(b,null,null);if(c==="gentime"||c==="utctime")return this._encodeTime(b,c);if(c==="null_")return this._encodeNull();if(c==="int"||c==="enum")return this._encodeInt(b,_.args&&_.reverseArgs[0]);if(c==="bool")return this._encodeBool(b);if(c==="objDesc")return this._encodeStr(b,c);throw new Error("Unsupported tag: "+c)};Node$2.prototype._isNumstr=function a(c){return/^[0-9 ]*$/.test(c)};Node$2.prototype._isPrintstr=function a(c){return/^[A-Za-z0-9 '()+,-./:=?]*$/.test(c)};var der$2={};(function(a){function c(b){const _={};return Object.keys(b).forEach(function($){($|0)==$&&($=$|0);const k=b[$];_[k]=$}),_}a.tagClass={0:"universal",1:"application",2:"context",3:"private"},a.tagClassByName=c(a.tagClass),a.tag={0:"end",1:"bool",2:"int",3:"bitstr",4:"octstr",5:"null_",6:"objid",7:"objDesc",8:"external",9:"real",10:"enum",11:"embed",12:"utf8str",13:"relativeOid",16:"seq",17:"set",18:"numstr",19:"printstr",20:"t61str",21:"videostr",22:"ia5str",23:"utctime",24:"gentime",25:"graphstr",26:"iso646str",27:"genstr",28:"unistr",29:"charstr",30:"bmpstr"},a.tagByName=c(a.tag)})(der$2);const inherits$3=inherits_browserExports,Buffer$d=safer_1.Buffer,Node$1=node,der$1=der$2;function DEREncoder$1(a){this.enc="der",this.name=a.name,this.entity=a,this.tree=new DERNode$1,this.tree._init(a.body)}var der_1$1=DEREncoder$1;DEREncoder$1.prototype.encode=function a(c,b){return this.tree._encode(c,b).join()};function DERNode$1(a){Node$1.call(this,"der",a)}inherits$3(DERNode$1,Node$1);DERNode$1.prototype._encodeComposite=function a(c,b,_,$){const k=encodeTag(c,b,_,this.reporter);if($.length<128){const ot=Buffer$d.alloc(2);return ot[0]=k,ot[1]=$.length,this._createEncoderBuffer([ot,$])}let et=1;for(let ot=$.length;ot>=256;ot>>=8)et++;const nt=Buffer$d.alloc(2+et);nt[0]=k,nt[1]=128|et;for(let ot=1+et,ht=$.length;ht>0;ot--,ht>>=8)nt[ot]=ht&255;return this._createEncoderBuffer([nt,$])};DERNode$1.prototype._encodeStr=function a(c,b){if(b==="bitstr")return this._createEncoderBuffer([c.unused|0,c.data]);if(b==="bmpstr"){const _=Buffer$d.alloc(c.length*2);for(let $=0;$<c.length;$++)_.writeUInt16BE(c.charCodeAt($),$*2);return this._createEncoderBuffer(_)}else return b==="numstr"?this._isNumstr(c)?this._createEncoderBuffer(c):this.reporter.error("Encoding of string type: numstr supports only digits and space"):b==="printstr"?this._isPrintstr(c)?this._createEncoderBuffer(c):this.reporter.error("Encoding of string type: printstr supports only latin upper and lower case letters, digits, space, apostrophe, left and rigth parenthesis, plus sign, comma, hyphen, dot, slash, colon, equal sign, question mark"):/str$/.test(b)?this._createEncoderBuffer(c):b==="objDesc"?this._createEncoderBuffer(c):this.reporter.error("Encoding of string type: "+b+" unsupported")};DERNode$1.prototype._encodeObjid=function a(c,b,_){if(typeof c=="string"){if(!b)return this.reporter.error("string objid given, but no values map found");if(!b.hasOwnProperty(c))return this.reporter.error("objid not found in values map");c=b[c].split(/[\s.]+/g);for(let nt=0;nt<c.length;nt++)c[nt]|=0}else if(Array.isArray(c)){c=c.slice();for(let nt=0;nt<c.length;nt++)c[nt]|=0}if(!Array.isArray(c))return this.reporter.error("objid() should be either array or string, got: "+JSON.stringify(c));if(!_){if(c[1]>=40)return this.reporter.error("Second objid identifier OOB");c.splice(0,2,c[0]*40+c[1])}let $=0;for(let nt=0;nt<c.length;nt++){let ot=c[nt];for($++;ot>=128;ot>>=7)$++}const k=Buffer$d.alloc($);let et=k.length-1;for(let nt=c.length-1;nt>=0;nt--){let ot=c[nt];for(k[et--]=ot&127;(ot>>=7)>0;)k[et--]=128|ot&127}return this._createEncoderBuffer(k)};function two(a){return a<10?"0"+a:a}DERNode$1.prototype._encodeTime=function a(c,b){let _;const $=new Date(c);return b==="gentime"?_=[two($.getUTCFullYear()),two($.getUTCMonth()+1),two($.getUTCDate()),two($.getUTCHours()),two($.getUTCMinutes()),two($.getUTCSeconds()),"Z"].join(""):b==="utctime"?_=[two($.getUTCFullYear()%100),two($.getUTCMonth()+1),two($.getUTCDate()),two($.getUTCHours()),two($.getUTCMinutes()),two($.getUTCSeconds()),"Z"].join(""):this.reporter.error("Encoding "+b+" time is not supported yet"),this._encodeStr(_,"octstr")};DERNode$1.prototype._encodeNull=function a(){return this._createEncoderBuffer("")};DERNode$1.prototype._encodeInt=function a(c,b){if(typeof c=="string"){if(!b)return this.reporter.error("String int or enum given, but no values map");if(!b.hasOwnProperty(c))return this.reporter.error("Values map doesn't contain: "+JSON.stringify(c));c=b[c]}if(typeof c!="number"&&!Buffer$d.isBuffer(c)){const k=c.toArray();!c.sign&&k[0]&128&&k.unshift(0),c=Buffer$d.from(k)}if(Buffer$d.isBuffer(c)){let k=c.length;c.length===0&&k++;const et=Buffer$d.alloc(k);return c.copy(et),c.length===0&&(et[0]=0),this._createEncoderBuffer(et)}if(c<128)return this._createEncoderBuffer(c);if(c<256)return this._createEncoderBuffer([0,c]);let _=1;for(let k=c;k>=256;k>>=8)_++;const $=new Array(_);for(let k=$.length-1;k>=0;k--)$[k]=c&255,c>>=8;return $[0]&128&&$.unshift(0),this._createEncoderBuffer(Buffer$d.from($))};DERNode$1.prototype._encodeBool=function a(c){return this._createEncoderBuffer(c?255:0)};DERNode$1.prototype._use=function a(c,b){return typeof c=="function"&&(c=c(b)),c._getEncoder("der").tree};DERNode$1.prototype._skipDefault=function a(c,b,_){const $=this._baseState;let k;if($.default===null)return!1;const et=c.join();if($.defaultBuffer===void 0&&($.defaultBuffer=this._encodeValue($.default,b,_).join()),et.length!==$.defaultBuffer.length)return!1;for(k=0;k<et.length;k++)if(et[k]!==$.defaultBuffer[k])return!1;return!0};function encodeTag(a,c,b,_){let $;if(a==="seqof"?a="seq":a==="setof"&&(a="set"),der$1.tagByName.hasOwnProperty(a))$=der$1.tagByName[a];else if(typeof a=="number"&&(a|0)===a)$=a;else return _.error("Unknown tag: "+a);return $>=31?_.error("Multi-octet tag encoding unsupported"):(c||($|=32),$|=der$1.tagClassByName[b||"universal"]<<6,$)}const inherits$2=inherits_browserExports,DEREncoder=der_1$1;function PEMEncoder(a){DEREncoder.call(this,a),this.enc="pem"}inherits$2(PEMEncoder,DEREncoder);var pem$1=PEMEncoder;PEMEncoder.prototype.encode=function a(c,b){const $=DEREncoder.prototype.encode.call(this,c).toString("base64"),k=["-----BEGIN "+b.label+"-----"];for(let et=0;et<$.length;et+=64)k.push($.slice(et,et+64));return k.push("-----END "+b.label+"-----"),k.join(`
`)};(function(a){const c=a;c.der=der_1$1,c.pem=pem$1})(encoders);var decoders={};const inherits$1=inherits_browserExports,bignum=bnExports$2,DecoderBuffer=buffer.DecoderBuffer,Node=node,der=der$2;function DERDecoder$1(a){this.enc="der",this.name=a.name,this.entity=a,this.tree=new DERNode,this.tree._init(a.body)}var der_1=DERDecoder$1;DERDecoder$1.prototype.decode=function a(c,b){return DecoderBuffer.isDecoderBuffer(c)||(c=new DecoderBuffer(c,b)),this.tree._decode(c,b)};function DERNode(a){Node.call(this,"der",a)}inherits$1(DERNode,Node);DERNode.prototype._peekTag=function a(c,b,_){if(c.isEmpty())return!1;const $=c.save(),k=derDecodeTag(c,'Failed to peek tag: "'+b+'"');return c.isError(k)?k:(c.restore($),k.tag===b||k.tagStr===b||k.tagStr+"of"===b||_)};DERNode.prototype._decodeTag=function a(c,b,_){const $=derDecodeTag(c,'Failed to decode tag of "'+b+'"');if(c.isError($))return $;let k=derDecodeLen(c,$.primitive,'Failed to get length of "'+b+'"');if(c.isError(k))return k;if(!_&&$.tag!==b&&$.tagStr!==b&&$.tagStr+"of"!==b)return c.error('Failed to match tag: "'+b+'"');if($.primitive||k!==null)return c.skip(k,'Failed to match body of: "'+b+'"');const et=c.save(),nt=this._skipUntilEnd(c,'Failed to skip indefinite length body: "'+this.tag+'"');return c.isError(nt)?nt:(k=c.offset-et.offset,c.restore(et),c.skip(k,'Failed to match body of: "'+b+'"'))};DERNode.prototype._skipUntilEnd=function a(c,b){for(;;){const _=derDecodeTag(c,b);if(c.isError(_))return _;const $=derDecodeLen(c,_.primitive,b);if(c.isError($))return $;let k;if(_.primitive||$!==null?k=c.skip($):k=this._skipUntilEnd(c,b),c.isError(k))return k;if(_.tagStr==="end")break}};DERNode.prototype._decodeList=function a(c,b,_,$){const k=[];for(;!c.isEmpty();){const et=this._peekTag(c,"end");if(c.isError(et))return et;const nt=_.decode(c,"der",$);if(c.isError(nt)&&et)break;k.push(nt)}return k};DERNode.prototype._decodeStr=function a(c,b){if(b==="bitstr"){const _=c.readUInt8();return c.isError(_)?_:{unused:_,data:c.raw()}}else if(b==="bmpstr"){const _=c.raw();if(_.length%2===1)return c.error("Decoding of string type: bmpstr length mismatch");let $="";for(let k=0;k<_.length/2;k++)$+=String.fromCharCode(_.readUInt16BE(k*2));return $}else if(b==="numstr"){const _=c.raw().toString("ascii");return this._isNumstr(_)?_:c.error("Decoding of string type: numstr unsupported characters")}else{if(b==="octstr")return c.raw();if(b==="objDesc")return c.raw();if(b==="printstr"){const _=c.raw().toString("ascii");return this._isPrintstr(_)?_:c.error("Decoding of string type: printstr unsupported characters")}else return/str$/.test(b)?c.raw().toString():c.error("Decoding of string type: "+b+" unsupported")}};DERNode.prototype._decodeObjid=function a(c,b,_){let $;const k=[];let et=0,nt=0;for(;!c.isEmpty();)nt=c.readUInt8(),et<<=7,et|=nt&127,nt&128||(k.push(et),et=0);nt&128&&k.push(et);const ot=k[0]/40|0,ht=k[0]%40;if(_?$=k:$=[ot,ht].concat(k.slice(1)),b){let vt=b[$.join(" ")];vt===void 0&&(vt=b[$.join(".")]),vt!==void 0&&($=vt)}return $};DERNode.prototype._decodeTime=function a(c,b){const _=c.raw().toString();let $,k,et,nt,ot,ht;if(b==="gentime")$=_.slice(0,4)|0,k=_.slice(4,6)|0,et=_.slice(6,8)|0,nt=_.slice(8,10)|0,ot=_.slice(10,12)|0,ht=_.slice(12,14)|0;else if(b==="utctime")$=_.slice(0,2)|0,k=_.slice(2,4)|0,et=_.slice(4,6)|0,nt=_.slice(6,8)|0,ot=_.slice(8,10)|0,ht=_.slice(10,12)|0,$<70?$=2e3+$:$=1900+$;else return c.error("Decoding "+b+" time is not supported yet");return Date.UTC($,k-1,et,nt,ot,ht,0)};DERNode.prototype._decodeNull=function a(){return null};DERNode.prototype._decodeBool=function a(c){const b=c.readUInt8();return c.isError(b)?b:b!==0};DERNode.prototype._decodeInt=function a(c,b){const _=c.raw();let $=new bignum(_);return b&&($=b[$.toString(10)]||$),$};DERNode.prototype._use=function a(c,b){return typeof c=="function"&&(c=c(b)),c._getDecoder("der").tree};function derDecodeTag(a,c){let b=a.readUInt8(c);if(a.isError(b))return b;const _=der.tagClass[b>>6],$=(b&32)===0;if((b&31)===31){let et=b;for(b=0;(et&128)===128;){if(et=a.readUInt8(c),a.isError(et))return et;b<<=7,b|=et&127}}else b&=31;const k=der.tag[b];return{cls:_,primitive:$,tag:b,tagStr:k}}function derDecodeLen(a,c,b){let _=a.readUInt8(b);if(a.isError(_))return _;if(!c&&_===128)return null;if(!(_&128))return _;const $=_&127;if($>4)return a.error("length octect is too long");_=0;for(let k=0;k<$;k++){_<<=8;const et=a.readUInt8(b);if(a.isError(et))return et;_|=et}return _}const inherits=inherits_browserExports,Buffer$c=safer_1.Buffer,DERDecoder=der_1;function PEMDecoder(a){DERDecoder.call(this,a),this.enc="pem"}inherits(PEMDecoder,DERDecoder);var pem=PEMDecoder;PEMDecoder.prototype.decode=function a(c,b){const _=c.toString().split(/[\r\n]+/g),$=b.label.toUpperCase(),k=/^-----(BEGIN|END) ([^-]+)-----$/;let et=-1,nt=-1;for(let vt=0;vt<_.length;vt++){const _t=_[vt].match(k);if(_t!==null&&_t[2]===$)if(et===-1){if(_t[1]!=="BEGIN")break;et=vt}else{if(_t[1]!=="END")break;nt=vt;break}}if(et===-1||nt===-1)throw new Error("PEM section not found for: "+$);const ot=_.slice(et+1,nt).join("");ot.replace(/[^a-z0-9+/=]+/gi,"");const ht=Buffer$c.from(ot,"base64");return DERDecoder.prototype.decode.call(this,ht,b)};(function(a){const c=a;c.der=der_1,c.pem=pem})(decoders);(function(a){const c=encoders,b=decoders,_=inherits_browserExports,$=a;$.define=function(nt,ot){return new k(nt,ot)};function k(et,nt){this.name=et,this.body=nt,this.decoders={},this.encoders={}}k.prototype._createNamed=function(nt){const ot=this.name;function ht(vt){this._initNamed(vt,ot)}return _(ht,nt),ht.prototype._initNamed=function(_t,kt){nt.call(this,_t,kt)},new ht(this)},k.prototype._getDecoder=function(nt){return nt=nt||"der",this.decoders.hasOwnProperty(nt)||(this.decoders[nt]=this._createNamed(b[nt])),this.decoders[nt]},k.prototype.decode=function(nt,ot,ht){return this._getDecoder(ot).decode(nt,ht)},k.prototype._getEncoder=function(nt){return nt=nt||"der",this.encoders.hasOwnProperty(nt)||(this.encoders[nt]=this._createNamed(c[nt])),this.encoders[nt]},k.prototype.encode=function(nt,ot,ht){return this._getEncoder(ot).encode(nt,ht)}})(api);var base={};(function(a){const c=a;c.Reporter=reporter.Reporter,c.DecoderBuffer=buffer.DecoderBuffer,c.EncoderBuffer=buffer.EncoderBuffer,c.Node=node})(base);var constants={};(function(a){const c=a;c._reverse=function(_){const $={};return Object.keys(_).forEach(function(k){(k|0)==k&&(k=k|0);const et=_[k];$[et]=k}),$},c.der=der$2})(constants);(function(a){const c=a;c.bignum=bnExports$2,c.define=api.define,c.base=base,c.constants=constants,c.decoders=decoders,c.encoders=encoders})(asn1$2);var asn=asn1$2,Time=asn.define("Time",function(){this.choice({utcTime:this.utctime(),generalTime:this.gentime()})}),AttributeTypeValue=asn.define("AttributeTypeValue",function(){this.seq().obj(this.key("type").objid(),this.key("value").any())}),AlgorithmIdentifier$1=asn.define("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("parameters").optional(),this.key("curve").objid().optional())}),SubjectPublicKeyInfo=asn.define("SubjectPublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(AlgorithmIdentifier$1),this.key("subjectPublicKey").bitstr())}),RelativeDistinguishedName=asn.define("RelativeDistinguishedName",function(){this.setof(AttributeTypeValue)}),RDNSequence=asn.define("RDNSequence",function(){this.seqof(RelativeDistinguishedName)}),Name=asn.define("Name",function(){this.choice({rdnSequence:this.use(RDNSequence)})}),Validity=asn.define("Validity",function(){this.seq().obj(this.key("notBefore").use(Time),this.key("notAfter").use(Time))}),Extension=asn.define("Extension",function(){this.seq().obj(this.key("extnID").objid(),this.key("critical").bool().def(!1),this.key("extnValue").octstr())}),TBSCertificate=asn.define("TBSCertificate",function(){this.seq().obj(this.key("version").explicit(0).int().optional(),this.key("serialNumber").int(),this.key("signature").use(AlgorithmIdentifier$1),this.key("issuer").use(Name),this.key("validity").use(Validity),this.key("subject").use(Name),this.key("subjectPublicKeyInfo").use(SubjectPublicKeyInfo),this.key("issuerUniqueID").implicit(1).bitstr().optional(),this.key("subjectUniqueID").implicit(2).bitstr().optional(),this.key("extensions").explicit(3).seqof(Extension).optional())}),X509Certificate=asn.define("X509Certificate",function(){this.seq().obj(this.key("tbsCertificate").use(TBSCertificate),this.key("signatureAlgorithm").use(AlgorithmIdentifier$1),this.key("signatureValue").bitstr())}),certificate=X509Certificate,asn1$1=asn1$2;asn1$3.certificate=certificate;var RSAPrivateKey=asn1$1.define("RSAPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("modulus").int(),this.key("publicExponent").int(),this.key("privateExponent").int(),this.key("prime1").int(),this.key("prime2").int(),this.key("exponent1").int(),this.key("exponent2").int(),this.key("coefficient").int())});asn1$3.RSAPrivateKey=RSAPrivateKey;var RSAPublicKey=asn1$1.define("RSAPublicKey",function(){this.seq().obj(this.key("modulus").int(),this.key("publicExponent").int())});asn1$3.RSAPublicKey=RSAPublicKey;var PublicKey=asn1$1.define("SubjectPublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(AlgorithmIdentifier),this.key("subjectPublicKey").bitstr())});asn1$3.PublicKey=PublicKey;var AlgorithmIdentifier=asn1$1.define("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("none").null_().optional(),this.key("curve").objid().optional(),this.key("params").seq().obj(this.key("p").int(),this.key("q").int(),this.key("g").int()).optional())}),PrivateKeyInfo=asn1$1.define("PrivateKeyInfo",function(){this.seq().obj(this.key("version").int(),this.key("algorithm").use(AlgorithmIdentifier),this.key("subjectPrivateKey").octstr())});asn1$3.PrivateKey=PrivateKeyInfo;var EncryptedPrivateKeyInfo=asn1$1.define("EncryptedPrivateKeyInfo",function(){this.seq().obj(this.key("algorithm").seq().obj(this.key("id").objid(),this.key("decrypt").seq().obj(this.key("kde").seq().obj(this.key("id").objid(),this.key("kdeparams").seq().obj(this.key("salt").octstr(),this.key("iters").int())),this.key("cipher").seq().obj(this.key("algo").objid(),this.key("iv").octstr()))),this.key("subjectPrivateKey").octstr())});asn1$3.EncryptedPrivateKey=EncryptedPrivateKeyInfo;var DSAPrivateKey=asn1$1.define("DSAPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("p").int(),this.key("q").int(),this.key("g").int(),this.key("pub_key").int(),this.key("priv_key").int())});asn1$3.DSAPrivateKey=DSAPrivateKey;asn1$3.DSAparam=asn1$1.define("DSAparam",function(){this.int()});var ECPrivateKey=asn1$1.define("ECPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("privateKey").octstr(),this.key("parameters").optional().explicit(0).use(ECParameters),this.key("publicKey").optional().explicit(1).bitstr())});asn1$3.ECPrivateKey=ECPrivateKey;var ECParameters=asn1$1.define("ECParameters",function(){this.choice({namedCurve:this.objid()})});asn1$3.signature=asn1$1.define("signature",function(){this.seq().obj(this.key("r").int(),this.key("s").int())});const require$$1={"2.16.840.1.101.3.4.1.1":"aes-128-ecb","2.16.840.1.101.3.4.1.2":"aes-128-cbc","2.16.840.1.101.3.4.1.3":"aes-128-ofb","2.16.840.1.101.3.4.1.4":"aes-128-cfb","2.16.840.1.101.3.4.1.21":"aes-192-ecb","2.16.840.1.101.3.4.1.22":"aes-192-cbc","2.16.840.1.101.3.4.1.23":"aes-192-ofb","2.16.840.1.101.3.4.1.24":"aes-192-cfb","2.16.840.1.101.3.4.1.41":"aes-256-ecb","2.16.840.1.101.3.4.1.42":"aes-256-cbc","2.16.840.1.101.3.4.1.43":"aes-256-ofb","2.16.840.1.101.3.4.1.44":"aes-256-cfb"};var findProc=/Proc-Type: 4,ENCRYPTED[\n\r]+DEK-Info: AES-((?:128)|(?:192)|(?:256))-CBC,([0-9A-H]+)[\n\r]+([0-9A-z\n\r+/=]+)[\n\r]+/m,startRegex=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----/m,fullRegex=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----([0-9A-z\n\r+/=]+)-----END \1-----$/m,evp=evp_bytestokey,ciphers$1=browser$6,Buffer$b=safeBufferExports$3.Buffer,fixProc$1=function(a,c){var b=a.toString(),_=b.match(findProc),$;if(_){var et="aes"+_[1],nt=Buffer$b.from(_[2],"hex"),ot=Buffer$b.from(_[3].replace(/[\r\n]/g,""),"base64"),ht=evp(c,nt.slice(0,8),parseInt(_[1],10)).key,vt=[],_t=ciphers$1.createDecipheriv(et,ht,nt);vt.push(_t.update(ot)),vt.push(_t.final()),$=Buffer$b.concat(vt)}else{var k=b.match(fullRegex);$=Buffer$b.from(k[2].replace(/[\r\n]/g,""),"base64")}var kt=b.match(startRegex)[1];return{tag:kt,data:$}},asn1=asn1$3,aesid=require$$1,fixProc=fixProc$1,ciphers=browser$6,compat=browser$8,Buffer$a=safeBufferExports$3.Buffer,parseAsn1=parseKeys$2;function parseKeys$2(a){var c;typeof a=="object"&&!Buffer$a.isBuffer(a)&&(c=a.passphrase,a=a.key),typeof a=="string"&&(a=Buffer$a.from(a));var b=fixProc(a,c),_=b.tag,$=b.data,k,et;switch(_){case"CERTIFICATE":et=asn1.certificate.decode($,"der").tbsCertificate.subjectPublicKeyInfo;case"PUBLIC KEY":switch(et||(et=asn1.PublicKey.decode($,"der")),k=et.algorithm.algorithm.join("."),k){case"1.2.840.113549.1.1.1":return asn1.RSAPublicKey.decode(et.subjectPublicKey.data,"der");case"1.2.840.10045.2.1":return et.subjectPrivateKey=et.subjectPublicKey,{type:"ec",data:et};case"1.2.840.10040.4.1":return et.algorithm.params.pub_key=asn1.DSAparam.decode(et.subjectPublicKey.data,"der"),{type:"dsa",data:et.algorithm.params};default:throw new Error("unknown key id "+k)}case"ENCRYPTED PRIVATE KEY":$=asn1.EncryptedPrivateKey.decode($,"der"),$=decrypt($,c);case"PRIVATE KEY":switch(et=asn1.PrivateKey.decode($,"der"),k=et.algorithm.algorithm.join("."),k){case"1.2.840.113549.1.1.1":return asn1.RSAPrivateKey.decode(et.subjectPrivateKey,"der");case"1.2.840.10045.2.1":return{curve:et.algorithm.curve,privateKey:asn1.ECPrivateKey.decode(et.subjectPrivateKey,"der").privateKey};case"1.2.840.10040.4.1":return et.algorithm.params.priv_key=asn1.DSAparam.decode(et.subjectPrivateKey,"der"),{type:"dsa",params:et.algorithm.params};default:throw new Error("unknown key id "+k)}case"RSA PUBLIC KEY":return asn1.RSAPublicKey.decode($,"der");case"RSA PRIVATE KEY":return asn1.RSAPrivateKey.decode($,"der");case"DSA PRIVATE KEY":return{type:"dsa",params:asn1.DSAPrivateKey.decode($,"der")};case"EC PRIVATE KEY":return $=asn1.ECPrivateKey.decode($,"der"),{curve:$.parameters.value,privateKey:$.privateKey};default:throw new Error("unknown key type "+_)}}parseKeys$2.signature=asn1.signature;function decrypt(a,c){var b=a.algorithm.decrypt.kde.kdeparams.salt,_=parseInt(a.algorithm.decrypt.kde.kdeparams.iters.toString(),10),$=aesid[a.algorithm.decrypt.cipher.algo.join(".")],k=a.algorithm.decrypt.cipher.iv,et=a.subjectPrivateKey,nt=parseInt($.split("-")[1],10)/8,ot=compat.pbkdf2Sync(c,b,_,nt,"sha1"),ht=ciphers.createDecipheriv($,ot,k),vt=[];return vt.push(ht.update(et)),vt.push(ht.final()),Buffer$a.concat(vt)}const require$$4={"1.3.132.0.10":"secp256k1","1.3.132.0.33":"p224","1.2.840.10045.3.1.1":"p192","1.2.840.10045.3.1.7":"p256","1.3.132.0.34":"p384","1.3.132.0.35":"p521"};var hasRequiredSign;function requireSign(){if(hasRequiredSign)return sign$1.exports;hasRequiredSign=1;var a=safeBufferExports.Buffer,c=browser$9,b=browserifyRsa,_=requireElliptic().ec,$=bnExports$4,k=parseAsn1,et=require$$4,nt=1;function ot(Dt,Rt,xt,Jt,ar){var nr=k(Rt);if(nr.curve){if(Jt!=="ecdsa"&&Jt!=="ecdsa/rsa")throw new Error("wrong private key type");return ht(Dt,nr)}else if(nr.type==="dsa"){if(Jt!=="dsa")throw new Error("wrong private key type");return vt(Dt,nr,xt)}if(Jt!=="rsa"&&Jt!=="ecdsa/rsa")throw new Error("wrong private key type");if(Rt.padding!==void 0&&Rt.padding!==nt)throw new Error("illegal or unsupported padding mode");Dt=a.concat([ar,Dt]);for(var pr=nr.modulus.byteLength(),ur=[0,1];Dt.length+ur.length+1<pr;)ur.push(255);ur.push(0);for(var Ot=-1;++Ot<Dt.length;)ur.push(Dt[Ot]);var It=b(ur,nr);return It}function ht(Dt,Rt){var xt=et[Rt.curve.join(".")];if(!xt)throw new Error("unknown curve "+Rt.curve.join("."));var Jt=new _(xt),ar=Jt.keyFromPrivate(Rt.privateKey),nr=ar.sign(Dt);return a.from(nr.toDER())}function vt(Dt,Rt,xt){for(var Jt=Rt.params.priv_key,ar=Rt.params.p,nr=Rt.params.q,pr=Rt.params.g,ur=new $(0),Ot,It=$t(Dt,nr).mod(nr),ut=!1,_e=kt(Jt,nr,Dt,xt);ut===!1;)Ot=At(nr,_e,xt),ur=Mt(pr,Ot,ar,nr),ut=Ot.invm(nr).imul(It.add(Jt.mul(ur))).mod(nr),ut.cmpn(0)===0&&(ut=!1,ur=new $(0));return _t(ur,ut)}function _t(Dt,Rt){Dt=Dt.toArray(),Rt=Rt.toArray(),Dt[0]&128&&(Dt=[0].concat(Dt)),Rt[0]&128&&(Rt=[0].concat(Rt));var xt=Dt.length+Rt.length+4,Jt=[48,xt,2,Dt.length];return Jt=Jt.concat(Dt,[2,Rt.length],Rt),a.from(Jt)}function kt(Dt,Rt,xt,Jt){if(Dt=a.from(Dt.toArray()),Dt.length<Rt.byteLength()){var ar=a.alloc(Rt.byteLength()-Dt.length);Dt=a.concat([ar,Dt])}var nr=xt.length,pr=Tt(xt,Rt),ur=a.alloc(nr);ur.fill(1);var Ot=a.alloc(nr);return Ot=c(Jt,Ot).update(ur).update(a.from([0])).update(Dt).update(pr).digest(),ur=c(Jt,Ot).update(ur).digest(),Ot=c(Jt,Ot).update(ur).update(a.from([1])).update(Dt).update(pr).digest(),ur=c(Jt,Ot).update(ur).digest(),{k:Ot,v:ur}}function $t(Dt,Rt){var xt=new $(Dt),Jt=(Dt.length<<3)-Rt.bitLength();return Jt>0&&xt.ishrn(Jt),xt}function Tt(Dt,Rt){Dt=$t(Dt,Rt),Dt=Dt.mod(Rt);var xt=a.from(Dt.toArray());if(xt.length<Rt.byteLength()){var Jt=a.alloc(Rt.byteLength()-xt.length);xt=a.concat([Jt,xt])}return xt}function At(Dt,Rt,xt){var Jt,ar;do{for(Jt=a.alloc(0);Jt.length*8<Dt.bitLength();)Rt.v=c(xt,Rt.k).update(Rt.v).digest(),Jt=a.concat([Jt,Rt.v]);ar=$t(Jt,Dt),Rt.k=c(xt,Rt.k).update(Rt.v).update(a.from([0])).digest(),Rt.v=c(xt,Rt.k).update(Rt.v).digest()}while(ar.cmp(Dt)!==-1);return ar}function Mt(Dt,Rt,xt,Jt){return Dt.toRed($.mont(xt)).redPow(Rt).fromRed().mod(Jt)}return sign$1.exports=ot,sign$1.exports.getKey=kt,sign$1.exports.makeKey=At,sign$1.exports}var verify_1,hasRequiredVerify;function requireVerify(){if(hasRequiredVerify)return verify_1;hasRequiredVerify=1;var a=safeBufferExports.Buffer,c=bnExports$4,b=requireElliptic().ec,_=parseAsn1,$=require$$4;function k(ht,vt,_t,kt,$t){var Tt=_(_t);if(Tt.type==="ec"){if(kt!=="ecdsa"&&kt!=="ecdsa/rsa")throw new Error("wrong public key type");return et(ht,vt,Tt)}else if(Tt.type==="dsa"){if(kt!=="dsa")throw new Error("wrong public key type");return nt(ht,vt,Tt)}if(kt!=="rsa"&&kt!=="ecdsa/rsa")throw new Error("wrong public key type");vt=a.concat([$t,vt]);for(var At=Tt.modulus.byteLength(),Mt=[1],Dt=0;vt.length+Mt.length+2<At;)Mt.push(255),Dt+=1;Mt.push(0);for(var Rt=-1;++Rt<vt.length;)Mt.push(vt[Rt]);Mt=a.from(Mt);var xt=c.mont(Tt.modulus);ht=new c(ht).toRed(xt),ht=ht.redPow(new c(Tt.publicExponent)),ht=a.from(ht.fromRed().toArray());var Jt=Dt<8?1:0;for(At=Math.min(ht.length,Mt.length),ht.length!==Mt.length&&(Jt=1),Rt=-1;++Rt<At;)Jt|=ht[Rt]^Mt[Rt];return Jt===0}function et(ht,vt,_t){var kt=$[_t.data.algorithm.curve.join(".")];if(!kt)throw new Error("unknown curve "+_t.data.algorithm.curve.join("."));var $t=new b(kt),Tt=_t.data.subjectPrivateKey.data;return $t.verify(vt,ht,Tt)}function nt(ht,vt,_t){var kt=_t.data.p,$t=_t.data.q,Tt=_t.data.g,At=_t.data.pub_key,Mt=_.signature.decode(ht,"der"),Dt=Mt.s,Rt=Mt.r;ot(Dt,$t),ot(Rt,$t);var xt=c.mont(kt),Jt=Dt.invm($t),ar=Tt.toRed(xt).redPow(new c(vt).mul(Jt).mod($t)).fromRed().mul(At.toRed(xt).redPow(Rt.mul(Jt).mod($t)).fromRed()).mod(kt).mod($t);return ar.cmp(Rt)===0}function ot(ht,vt){if(ht.cmpn(0)<=0)throw new Error("invalid sig");if(ht.cmp(vt)>=0)throw new Error("invalid sig")}return verify_1=k,verify_1}var browser$4,hasRequiredBrowser$1;function requireBrowser$1(){if(hasRequiredBrowser$1)return browser$4;hasRequiredBrowser$1=1;var a=safeBufferExports.Buffer,c=browser$a,b=readableBrowserExports,_=inherits_browserExports,$=requireSign(),k=requireVerify(),et=require$$6;Object.keys(et).forEach(function(_t){et[_t].id=a.from(et[_t].id,"hex"),et[_t.toLowerCase()]=et[_t]});function nt(_t){b.Writable.call(this);var kt=et[_t];if(!kt)throw new Error("Unknown message digest");this._hashType=kt.hash,this._hash=c(kt.hash),this._tag=kt.id,this._signType=kt.sign}_(nt,b.Writable),nt.prototype._write=function(kt,$t,Tt){this._hash.update(kt),Tt()},nt.prototype.update=function(kt,$t){return this._hash.update(typeof kt=="string"?a.from(kt,$t):kt),this},nt.prototype.sign=function(kt,$t){this.end();var Tt=this._hash.digest(),At=$(Tt,kt,this._hashType,this._signType,this._tag);return $t?At.toString($t):At};function ot(_t){b.Writable.call(this);var kt=et[_t];if(!kt)throw new Error("Unknown message digest");this._hash=c(kt.hash),this._tag=kt.id,this._signType=kt.sign}_(ot,b.Writable),ot.prototype._write=function(kt,$t,Tt){this._hash.update(kt),Tt()},ot.prototype.update=function(kt,$t){return this._hash.update(typeof kt=="string"?a.from(kt,$t):kt),this},ot.prototype.verify=function(kt,$t,Tt){var At=typeof $t=="string"?a.from($t,Tt):$t;this.end();var Mt=this._hash.digest();return k(At,Mt,kt,this._signType,this._tag)};function ht(_t){return new nt(_t)}function vt(_t){return new ot(_t)}return browser$4={Sign:ht,Verify:vt,createSign:ht,createVerify:vt},browser$4}var bn$1={exports:{}};bn$1.exports;(function(a){(function(c,b){function _(ut,_e){if(!ut)throw new Error(_e||"Assertion failed")}function $(ut,_e){ut.super_=_e;var tt=function(){};tt.prototype=_e.prototype,ut.prototype=new tt,ut.prototype.constructor=ut}function k(ut,_e,tt){if(k.isBN(ut))return ut;this.negative=0,this.words=null,this.length=0,this.red=null,ut!==null&&((_e==="le"||_e==="be")&&(tt=_e,_e=10),this._init(ut||0,_e||10,tt||"be"))}typeof c=="object"?c.exports=k:b.BN=k,k.BN=k,k.wordSize=26;var et;try{typeof window<"u"&&typeof window.Buffer<"u"?et=window.Buffer:et=require$$0$2.Buffer}catch{}k.isBN=function(_e){return _e instanceof k?!0:_e!==null&&typeof _e=="object"&&_e.constructor.wordSize===k.wordSize&&Array.isArray(_e.words)},k.max=function(_e,tt){return _e.cmp(tt)>0?_e:tt},k.min=function(_e,tt){return _e.cmp(tt)<0?_e:tt},k.prototype._init=function(_e,tt,it){if(typeof _e=="number")return this._initNumber(_e,tt,it);if(typeof _e=="object")return this._initArray(_e,tt,it);tt==="hex"&&(tt=16),_(tt===(tt|0)&&tt>=2&&tt<=36),_e=_e.toString().replace(/\s+/g,"");var dt=0;_e[0]==="-"&&(dt++,this.negative=1),dt<_e.length&&(tt===16?this._parseHex(_e,dt,it):(this._parseBase(_e,tt,dt),it==="le"&&this._initArray(this.toArray(),tt,it)))},k.prototype._initNumber=function(_e,tt,it){_e<0&&(this.negative=1,_e=-_e),_e<67108864?(this.words=[_e&67108863],this.length=1):_e<4503599627370496?(this.words=[_e&67108863,_e/67108864&67108863],this.length=2):(_(_e<9007199254740992),this.words=[_e&67108863,_e/67108864&67108863,1],this.length=3),it==="le"&&this._initArray(this.toArray(),tt,it)},k.prototype._initArray=function(_e,tt,it){if(_(typeof _e.length=="number"),_e.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(_e.length/3),this.words=new Array(this.length);for(var dt=0;dt<this.length;dt++)this.words[dt]=0;var lt,gt,Et=0;if(it==="be")for(dt=_e.length-1,lt=0;dt>=0;dt-=3)gt=_e[dt]|_e[dt-1]<<8|_e[dt-2]<<16,this.words[lt]|=gt<<Et&67108863,this.words[lt+1]=gt>>>26-Et&67108863,Et+=24,Et>=26&&(Et-=26,lt++);else if(it==="le")for(dt=0,lt=0;dt<_e.length;dt+=3)gt=_e[dt]|_e[dt+1]<<8|_e[dt+2]<<16,this.words[lt]|=gt<<Et&67108863,this.words[lt+1]=gt>>>26-Et&67108863,Et+=24,Et>=26&&(Et-=26,lt++);return this.strip()};function nt(ut,_e){var tt=ut.charCodeAt(_e);return tt>=65&&tt<=70?tt-55:tt>=97&&tt<=102?tt-87:tt-48&15}function ot(ut,_e,tt){var it=nt(ut,tt);return tt-1>=_e&&(it|=nt(ut,tt-1)<<4),it}k.prototype._parseHex=function(_e,tt,it){this.length=Math.ceil((_e.length-tt)/6),this.words=new Array(this.length);for(var dt=0;dt<this.length;dt++)this.words[dt]=0;var lt=0,gt=0,Et;if(it==="be")for(dt=_e.length-1;dt>=tt;dt-=2)Et=ot(_e,tt,dt)<<lt,this.words[gt]|=Et&67108863,lt>=18?(lt-=18,gt+=1,this.words[gt]|=Et>>>26):lt+=8;else{var pt=_e.length-tt;for(dt=pt%2===0?tt+1:tt;dt<_e.length;dt+=2)Et=ot(_e,tt,dt)<<lt,this.words[gt]|=Et&67108863,lt>=18?(lt-=18,gt+=1,this.words[gt]|=Et>>>26):lt+=8}this.strip()};function ht(ut,_e,tt,it){for(var dt=0,lt=Math.min(ut.length,tt),gt=_e;gt<lt;gt++){var Et=ut.charCodeAt(gt)-48;dt*=it,Et>=49?dt+=Et-49+10:Et>=17?dt+=Et-17+10:dt+=Et}return dt}k.prototype._parseBase=function(_e,tt,it){this.words=[0],this.length=1;for(var dt=0,lt=1;lt<=67108863;lt*=tt)dt++;dt--,lt=lt/tt|0;for(var gt=_e.length-it,Et=gt%dt,pt=Math.min(gt,gt-Et)+it,rt=0,mt=it;mt<pt;mt+=dt)rt=ht(_e,mt,mt+dt,tt),this.imuln(lt),this.words[0]+rt<67108864?this.words[0]+=rt:this._iaddn(rt);if(Et!==0){var Lt=1;for(rt=ht(_e,mt,_e.length,tt),mt=0;mt<Et;mt++)Lt*=tt;this.imuln(Lt),this.words[0]+rt<67108864?this.words[0]+=rt:this._iaddn(rt)}this.strip()},k.prototype.copy=function(_e){_e.words=new Array(this.length);for(var tt=0;tt<this.length;tt++)_e.words[tt]=this.words[tt];_e.length=this.length,_e.negative=this.negative,_e.red=this.red},k.prototype.clone=function(){var _e=new k(null);return this.copy(_e),_e},k.prototype._expand=function(_e){for(;this.length<_e;)this.words[this.length++]=0;return this},k.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},k.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},k.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var vt=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],_t=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],kt=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];k.prototype.toString=function(_e,tt){_e=_e||10,tt=tt|0||1;var it;if(_e===16||_e==="hex"){it="";for(var dt=0,lt=0,gt=0;gt<this.length;gt++){var Et=this.words[gt],pt=((Et<<dt|lt)&16777215).toString(16);lt=Et>>>24-dt&16777215,lt!==0||gt!==this.length-1?it=vt[6-pt.length]+pt+it:it=pt+it,dt+=2,dt>=26&&(dt-=26,gt--)}for(lt!==0&&(it=lt.toString(16)+it);it.length%tt!==0;)it="0"+it;return this.negative!==0&&(it="-"+it),it}if(_e===(_e|0)&&_e>=2&&_e<=36){var rt=_t[_e],mt=kt[_e];it="";var Lt=this.clone();for(Lt.negative=0;!Lt.isZero();){var Gt=Lt.modn(mt).toString(_e);Lt=Lt.idivn(mt),Lt.isZero()?it=Gt+it:it=vt[rt-Gt.length]+Gt+it}for(this.isZero()&&(it="0"+it);it.length%tt!==0;)it="0"+it;return this.negative!==0&&(it="-"+it),it}_(!1,"Base should be between 2 and 36")},k.prototype.toNumber=function(){var _e=this.words[0];return this.length===2?_e+=this.words[1]*67108864:this.length===3&&this.words[2]===1?_e+=4503599627370496+this.words[1]*67108864:this.length>2&&_(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-_e:_e},k.prototype.toJSON=function(){return this.toString(16)},k.prototype.toBuffer=function(_e,tt){return _(typeof et<"u"),this.toArrayLike(et,_e,tt)},k.prototype.toArray=function(_e,tt){return this.toArrayLike(Array,_e,tt)},k.prototype.toArrayLike=function(_e,tt,it){var dt=this.byteLength(),lt=it||Math.max(1,dt);_(dt<=lt,"byte array longer than desired length"),_(lt>0,"Requested array length <= 0"),this.strip();var gt=tt==="le",Et=new _e(lt),pt,rt,mt=this.clone();if(gt){for(rt=0;!mt.isZero();rt++)pt=mt.andln(255),mt.iushrn(8),Et[rt]=pt;for(;rt<lt;rt++)Et[rt]=0}else{for(rt=0;rt<lt-dt;rt++)Et[rt]=0;for(rt=0;!mt.isZero();rt++)pt=mt.andln(255),mt.iushrn(8),Et[lt-rt-1]=pt}return Et},Math.clz32?k.prototype._countBits=function(_e){return 32-Math.clz32(_e)}:k.prototype._countBits=function(_e){var tt=_e,it=0;return tt>=4096&&(it+=13,tt>>>=13),tt>=64&&(it+=7,tt>>>=7),tt>=8&&(it+=4,tt>>>=4),tt>=2&&(it+=2,tt>>>=2),it+tt},k.prototype._zeroBits=function(_e){if(_e===0)return 26;var tt=_e,it=0;return tt&8191||(it+=13,tt>>>=13),tt&127||(it+=7,tt>>>=7),tt&15||(it+=4,tt>>>=4),tt&3||(it+=2,tt>>>=2),tt&1||it++,it},k.prototype.bitLength=function(){var _e=this.words[this.length-1],tt=this._countBits(_e);return(this.length-1)*26+tt};function $t(ut){for(var _e=new Array(ut.bitLength()),tt=0;tt<_e.length;tt++){var it=tt/26|0,dt=tt%26;_e[tt]=(ut.words[it]&1<<dt)>>>dt}return _e}k.prototype.zeroBits=function(){if(this.isZero())return 0;for(var _e=0,tt=0;tt<this.length;tt++){var it=this._zeroBits(this.words[tt]);if(_e+=it,it!==26)break}return _e},k.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},k.prototype.toTwos=function(_e){return this.negative!==0?this.abs().inotn(_e).iaddn(1):this.clone()},k.prototype.fromTwos=function(_e){return this.testn(_e-1)?this.notn(_e).iaddn(1).ineg():this.clone()},k.prototype.isNeg=function(){return this.negative!==0},k.prototype.neg=function(){return this.clone().ineg()},k.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},k.prototype.iuor=function(_e){for(;this.length<_e.length;)this.words[this.length++]=0;for(var tt=0;tt<_e.length;tt++)this.words[tt]=this.words[tt]|_e.words[tt];return this.strip()},k.prototype.ior=function(_e){return _((this.negative|_e.negative)===0),this.iuor(_e)},k.prototype.or=function(_e){return this.length>_e.length?this.clone().ior(_e):_e.clone().ior(this)},k.prototype.uor=function(_e){return this.length>_e.length?this.clone().iuor(_e):_e.clone().iuor(this)},k.prototype.iuand=function(_e){var tt;this.length>_e.length?tt=_e:tt=this;for(var it=0;it<tt.length;it++)this.words[it]=this.words[it]&_e.words[it];return this.length=tt.length,this.strip()},k.prototype.iand=function(_e){return _((this.negative|_e.negative)===0),this.iuand(_e)},k.prototype.and=function(_e){return this.length>_e.length?this.clone().iand(_e):_e.clone().iand(this)},k.prototype.uand=function(_e){return this.length>_e.length?this.clone().iuand(_e):_e.clone().iuand(this)},k.prototype.iuxor=function(_e){var tt,it;this.length>_e.length?(tt=this,it=_e):(tt=_e,it=this);for(var dt=0;dt<it.length;dt++)this.words[dt]=tt.words[dt]^it.words[dt];if(this!==tt)for(;dt<tt.length;dt++)this.words[dt]=tt.words[dt];return this.length=tt.length,this.strip()},k.prototype.ixor=function(_e){return _((this.negative|_e.negative)===0),this.iuxor(_e)},k.prototype.xor=function(_e){return this.length>_e.length?this.clone().ixor(_e):_e.clone().ixor(this)},k.prototype.uxor=function(_e){return this.length>_e.length?this.clone().iuxor(_e):_e.clone().iuxor(this)},k.prototype.inotn=function(_e){_(typeof _e=="number"&&_e>=0);var tt=Math.ceil(_e/26)|0,it=_e%26;this._expand(tt),it>0&&tt--;for(var dt=0;dt<tt;dt++)this.words[dt]=~this.words[dt]&67108863;return it>0&&(this.words[dt]=~this.words[dt]&67108863>>26-it),this.strip()},k.prototype.notn=function(_e){return this.clone().inotn(_e)},k.prototype.setn=function(_e,tt){_(typeof _e=="number"&&_e>=0);var it=_e/26|0,dt=_e%26;return this._expand(it+1),tt?this.words[it]=this.words[it]|1<<dt:this.words[it]=this.words[it]&~(1<<dt),this.strip()},k.prototype.iadd=function(_e){var tt;if(this.negative!==0&&_e.negative===0)return this.negative=0,tt=this.isub(_e),this.negative^=1,this._normSign();if(this.negative===0&&_e.negative!==0)return _e.negative=0,tt=this.isub(_e),_e.negative=1,tt._normSign();var it,dt;this.length>_e.length?(it=this,dt=_e):(it=_e,dt=this);for(var lt=0,gt=0;gt<dt.length;gt++)tt=(it.words[gt]|0)+(dt.words[gt]|0)+lt,this.words[gt]=tt&67108863,lt=tt>>>26;for(;lt!==0&&gt<it.length;gt++)tt=(it.words[gt]|0)+lt,this.words[gt]=tt&67108863,lt=tt>>>26;if(this.length=it.length,lt!==0)this.words[this.length]=lt,this.length++;else if(it!==this)for(;gt<it.length;gt++)this.words[gt]=it.words[gt];return this},k.prototype.add=function(_e){var tt;return _e.negative!==0&&this.negative===0?(_e.negative=0,tt=this.sub(_e),_e.negative^=1,tt):_e.negative===0&&this.negative!==0?(this.negative=0,tt=_e.sub(this),this.negative=1,tt):this.length>_e.length?this.clone().iadd(_e):_e.clone().iadd(this)},k.prototype.isub=function(_e){if(_e.negative!==0){_e.negative=0;var tt=this.iadd(_e);return _e.negative=1,tt._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(_e),this.negative=1,this._normSign();var it=this.cmp(_e);if(it===0)return this.negative=0,this.length=1,this.words[0]=0,this;var dt,lt;it>0?(dt=this,lt=_e):(dt=_e,lt=this);for(var gt=0,Et=0;Et<lt.length;Et++)tt=(dt.words[Et]|0)-(lt.words[Et]|0)+gt,gt=tt>>26,this.words[Et]=tt&67108863;for(;gt!==0&&Et<dt.length;Et++)tt=(dt.words[Et]|0)+gt,gt=tt>>26,this.words[Et]=tt&67108863;if(gt===0&&Et<dt.length&&dt!==this)for(;Et<dt.length;Et++)this.words[Et]=dt.words[Et];return this.length=Math.max(this.length,Et),dt!==this&&(this.negative=1),this.strip()},k.prototype.sub=function(_e){return this.clone().isub(_e)};function Tt(ut,_e,tt){tt.negative=_e.negative^ut.negative;var it=ut.length+_e.length|0;tt.length=it,it=it-1|0;var dt=ut.words[0]|0,lt=_e.words[0]|0,gt=dt*lt,Et=gt&67108863,pt=gt/67108864|0;tt.words[0]=Et;for(var rt=1;rt<it;rt++){for(var mt=pt>>>26,Lt=pt&67108863,Gt=Math.min(rt,_e.length-1),rr=Math.max(0,rt-ut.length+1);rr<=Gt;rr++){var ir=rt-rr|0;dt=ut.words[ir]|0,lt=_e.words[rr]|0,gt=dt*lt+Lt,mt+=gt/67108864|0,Lt=gt&67108863}tt.words[rt]=Lt|0,pt=mt|0}return pt!==0?tt.words[rt]=pt|0:tt.length--,tt.strip()}var At=function(_e,tt,it){var dt=_e.words,lt=tt.words,gt=it.words,Et=0,pt,rt,mt,Lt=dt[0]|0,Gt=Lt&8191,rr=Lt>>>13,ir=dt[1]|0,Wt=ir&8191,zt=ir>>>13,wt=dt[2]|0,Vt=wt&8191,Qt=wt>>>13,Nt=dt[3]|0,st=Nt&8191,Ct=Nt>>>13,qt=dt[4]|0,cr=qt&8191,dr=qt>>>13,Er=dt[5]|0,Tr=Er&8191,gr=Er>>>13,Zr=dt[6]|0,Pr=Zr&8191,_r=Zr>>>13,St=dt[7]|0,Kt=St&8191,er=St>>>13,kr=dt[8]|0,tr=kr&8191,bt=kr>>>13,jt=dt[9]|0,Ut=jt&8191,Ft=jt>>>13,Ht=lt[0]|0,or=Ht&8191,vr=Ht>>>13,Ir=lt[1]|0,Sr=Ir&8191,Or=Ir>>>13,Cr=lt[2]|0,yt=Cr&8191,Bt=Cr>>>13,Zt=lt[3]|0,yr=Zt&8191,fr=Zt>>>13,Rr=lt[4]|0,Nr=Rr&8191,xr=Rr>>>13,Xr=lt[5]|0,Ar=Xr&8191,Br=Xr>>>13,rn=lt[6]|0,Dr=rn&8191,qr=rn>>>13,nn=lt[7]|0,$r=nn&8191,Lr=nn>>>13,Qr=lt[8]|0,Ur=Qr&8191,Jr=Qr>>>13,cn=lt[9]|0,Fr=cn&8191,Vr=cn>>>13;it.negative=_e.negative^tt.negative,it.length=19,pt=Math.imul(Gt,or),rt=Math.imul(Gt,vr),rt=rt+Math.imul(rr,or)|0,mt=Math.imul(rr,vr);var sn=(Et+pt|0)+((rt&8191)<<13)|0;Et=(mt+(rt>>>13)|0)+(sn>>>26)|0,sn&=67108863,pt=Math.imul(Wt,or),rt=Math.imul(Wt,vr),rt=rt+Math.imul(zt,or)|0,mt=Math.imul(zt,vr),pt=pt+Math.imul(Gt,Sr)|0,rt=rt+Math.imul(Gt,Or)|0,rt=rt+Math.imul(rr,Sr)|0,mt=mt+Math.imul(rr,Or)|0;var un=(Et+pt|0)+((rt&8191)<<13)|0;Et=(mt+(rt>>>13)|0)+(un>>>26)|0,un&=67108863,pt=Math.imul(Vt,or),rt=Math.imul(Vt,vr),rt=rt+Math.imul(Qt,or)|0,mt=Math.imul(Qt,vr),pt=pt+Math.imul(Wt,Sr)|0,rt=rt+Math.imul(Wt,Or)|0,rt=rt+Math.imul(zt,Sr)|0,mt=mt+Math.imul(zt,Or)|0,pt=pt+Math.imul(Gt,yt)|0,rt=rt+Math.imul(Gt,Bt)|0,rt=rt+Math.imul(rr,yt)|0,mt=mt+Math.imul(rr,Bt)|0;var yn=(Et+pt|0)+((rt&8191)<<13)|0;Et=(mt+(rt>>>13)|0)+(yn>>>26)|0,yn&=67108863,pt=Math.imul(st,or),rt=Math.imul(st,vr),rt=rt+Math.imul(Ct,or)|0,mt=Math.imul(Ct,vr),pt=pt+Math.imul(Vt,Sr)|0,rt=rt+Math.imul(Vt,Or)|0,rt=rt+Math.imul(Qt,Sr)|0,mt=mt+Math.imul(Qt,Or)|0,pt=pt+Math.imul(Wt,yt)|0,rt=rt+Math.imul(Wt,Bt)|0,rt=rt+Math.imul(zt,yt)|0,mt=mt+Math.imul(zt,Bt)|0,pt=pt+Math.imul(Gt,yr)|0,rt=rt+Math.imul(Gt,fr)|0,rt=rt+Math.imul(rr,yr)|0,mt=mt+Math.imul(rr,fr)|0;var br=(Et+pt|0)+((rt&8191)<<13)|0;Et=(mt+(rt>>>13)|0)+(br>>>26)|0,br&=67108863,pt=Math.imul(cr,or),rt=Math.imul(cr,vr),rt=rt+Math.imul(dr,or)|0,mt=Math.imul(dr,vr),pt=pt+Math.imul(st,Sr)|0,rt=rt+Math.imul(st,Or)|0,rt=rt+Math.imul(Ct,Sr)|0,mt=mt+Math.imul(Ct,Or)|0,pt=pt+Math.imul(Vt,yt)|0,rt=rt+Math.imul(Vt,Bt)|0,rt=rt+Math.imul(Qt,yt)|0,mt=mt+Math.imul(Qt,Bt)|0,pt=pt+Math.imul(Wt,yr)|0,rt=rt+Math.imul(Wt,fr)|0,rt=rt+Math.imul(zt,yr)|0,mt=mt+Math.imul(zt,fr)|0,pt=pt+Math.imul(Gt,Nr)|0,rt=rt+Math.imul(Gt,xr)|0,rt=rt+Math.imul(rr,Nr)|0,mt=mt+Math.imul(rr,xr)|0;var wr=(Et+pt|0)+((rt&8191)<<13)|0;Et=(mt+(rt>>>13)|0)+(wr>>>26)|0,wr&=67108863,pt=Math.imul(Tr,or),rt=Math.imul(Tr,vr),rt=rt+Math.imul(gr,or)|0,mt=Math.imul(gr,vr),pt=pt+Math.imul(cr,Sr)|0,rt=rt+Math.imul(cr,Or)|0,rt=rt+Math.imul(dr,Sr)|0,mt=mt+Math.imul(dr,Or)|0,pt=pt+Math.imul(st,yt)|0,rt=rt+Math.imul(st,Bt)|0,rt=rt+Math.imul(Ct,yt)|0,mt=mt+Math.imul(Ct,Bt)|0,pt=pt+Math.imul(Vt,yr)|0,rt=rt+Math.imul(Vt,fr)|0,rt=rt+Math.imul(Qt,yr)|0,mt=mt+Math.imul(Qt,fr)|0,pt=pt+Math.imul(Wt,Nr)|0,rt=rt+Math.imul(Wt,xr)|0,rt=rt+Math.imul(zt,Nr)|0,mt=mt+Math.imul(zt,xr)|0,pt=pt+Math.imul(Gt,Ar)|0,rt=rt+Math.imul(Gt,Br)|0,rt=rt+Math.imul(rr,Ar)|0,mt=mt+Math.imul(rr,Br)|0;var Mr=(Et+pt|0)+((rt&8191)<<13)|0;Et=(mt+(rt>>>13)|0)+(Mr>>>26)|0,Mr&=67108863,pt=Math.imul(Pr,or),rt=Math.imul(Pr,vr),rt=rt+Math.imul(_r,or)|0,mt=Math.imul(_r,vr),pt=pt+Math.imul(Tr,Sr)|0,rt=rt+Math.imul(Tr,Or)|0,rt=rt+Math.imul(gr,Sr)|0,mt=mt+Math.imul(gr,Or)|0,pt=pt+Math.imul(cr,yt)|0,rt=rt+Math.imul(cr,Bt)|0,rt=rt+Math.imul(dr,yt)|0,mt=mt+Math.imul(dr,Bt)|0,pt=pt+Math.imul(st,yr)|0,rt=rt+Math.imul(st,fr)|0,rt=rt+Math.imul(Ct,yr)|0,mt=mt+Math.imul(Ct,fr)|0,pt=pt+Math.imul(Vt,Nr)|0,rt=rt+Math.imul(Vt,xr)|0,rt=rt+Math.imul(Qt,Nr)|0,mt=mt+Math.imul(Qt,xr)|0,pt=pt+Math.imul(Wt,Ar)|0,rt=rt+Math.imul(Wt,Br)|0,rt=rt+Math.imul(zt,Ar)|0,mt=mt+Math.imul(zt,Br)|0,pt=pt+Math.imul(Gt,Dr)|0,rt=rt+Math.imul(Gt,qr)|0,rt=rt+Math.imul(rr,Dr)|0,mt=mt+Math.imul(rr,qr)|0;var Wr=(Et+pt|0)+((rt&8191)<<13)|0;Et=(mt+(rt>>>13)|0)+(Wr>>>26)|0,Wr&=67108863,pt=Math.imul(Kt,or),rt=Math.imul(Kt,vr),rt=rt+Math.imul(er,or)|0,mt=Math.imul(er,vr),pt=pt+Math.imul(Pr,Sr)|0,rt=rt+Math.imul(Pr,Or)|0,rt=rt+Math.imul(_r,Sr)|0,mt=mt+Math.imul(_r,Or)|0,pt=pt+Math.imul(Tr,yt)|0,rt=rt+Math.imul(Tr,Bt)|0,rt=rt+Math.imul(gr,yt)|0,mt=mt+Math.imul(gr,Bt)|0,pt=pt+Math.imul(cr,yr)|0,rt=rt+Math.imul(cr,fr)|0,rt=rt+Math.imul(dr,yr)|0,mt=mt+Math.imul(dr,fr)|0,pt=pt+Math.imul(st,Nr)|0,rt=rt+Math.imul(st,xr)|0,rt=rt+Math.imul(Ct,Nr)|0,mt=mt+Math.imul(Ct,xr)|0,pt=pt+Math.imul(Vt,Ar)|0,rt=rt+Math.imul(Vt,Br)|0,rt=rt+Math.imul(Qt,Ar)|0,mt=mt+Math.imul(Qt,Br)|0,pt=pt+Math.imul(Wt,Dr)|0,rt=rt+Math.imul(Wt,qr)|0,rt=rt+Math.imul(zt,Dr)|0,mt=mt+Math.imul(zt,qr)|0,pt=pt+Math.imul(Gt,$r)|0,rt=rt+Math.imul(Gt,Lr)|0,rt=rt+Math.imul(rr,$r)|0,mt=mt+Math.imul(rr,Lr)|0;var Hr=(Et+pt|0)+((rt&8191)<<13)|0;Et=(mt+(rt>>>13)|0)+(Hr>>>26)|0,Hr&=67108863,pt=Math.imul(tr,or),rt=Math.imul(tr,vr),rt=rt+Math.imul(bt,or)|0,mt=Math.imul(bt,vr),pt=pt+Math.imul(Kt,Sr)|0,rt=rt+Math.imul(Kt,Or)|0,rt=rt+Math.imul(er,Sr)|0,mt=mt+Math.imul(er,Or)|0,pt=pt+Math.imul(Pr,yt)|0,rt=rt+Math.imul(Pr,Bt)|0,rt=rt+Math.imul(_r,yt)|0,mt=mt+Math.imul(_r,Bt)|0,pt=pt+Math.imul(Tr,yr)|0,rt=rt+Math.imul(Tr,fr)|0,rt=rt+Math.imul(gr,yr)|0,mt=mt+Math.imul(gr,fr)|0,pt=pt+Math.imul(cr,Nr)|0,rt=rt+Math.imul(cr,xr)|0,rt=rt+Math.imul(dr,Nr)|0,mt=mt+Math.imul(dr,xr)|0,pt=pt+Math.imul(st,Ar)|0,rt=rt+Math.imul(st,Br)|0,rt=rt+Math.imul(Ct,Ar)|0,mt=mt+Math.imul(Ct,Br)|0,pt=pt+Math.imul(Vt,Dr)|0,rt=rt+Math.imul(Vt,qr)|0,rt=rt+Math.imul(Qt,Dr)|0,mt=mt+Math.imul(Qt,qr)|0,pt=pt+Math.imul(Wt,$r)|0,rt=rt+Math.imul(Wt,Lr)|0,rt=rt+Math.imul(zt,$r)|0,mt=mt+Math.imul(zt,Lr)|0,pt=pt+Math.imul(Gt,Ur)|0,rt=rt+Math.imul(Gt,Jr)|0,rt=rt+Math.imul(rr,Ur)|0,mt=mt+Math.imul(rr,Jr)|0;var Gr=(Et+pt|0)+((rt&8191)<<13)|0;Et=(mt+(rt>>>13)|0)+(Gr>>>26)|0,Gr&=67108863,pt=Math.imul(Ut,or),rt=Math.imul(Ut,vr),rt=rt+Math.imul(Ft,or)|0,mt=Math.imul(Ft,vr),pt=pt+Math.imul(tr,Sr)|0,rt=rt+Math.imul(tr,Or)|0,rt=rt+Math.imul(bt,Sr)|0,mt=mt+Math.imul(bt,Or)|0,pt=pt+Math.imul(Kt,yt)|0,rt=rt+Math.imul(Kt,Bt)|0,rt=rt+Math.imul(er,yt)|0,mt=mt+Math.imul(er,Bt)|0,pt=pt+Math.imul(Pr,yr)|0,rt=rt+Math.imul(Pr,fr)|0,rt=rt+Math.imul(_r,yr)|0,mt=mt+Math.imul(_r,fr)|0,pt=pt+Math.imul(Tr,Nr)|0,rt=rt+Math.imul(Tr,xr)|0,rt=rt+Math.imul(gr,Nr)|0,mt=mt+Math.imul(gr,xr)|0,pt=pt+Math.imul(cr,Ar)|0,rt=rt+Math.imul(cr,Br)|0,rt=rt+Math.imul(dr,Ar)|0,mt=mt+Math.imul(dr,Br)|0,pt=pt+Math.imul(st,Dr)|0,rt=rt+Math.imul(st,qr)|0,rt=rt+Math.imul(Ct,Dr)|0,mt=mt+Math.imul(Ct,qr)|0,pt=pt+Math.imul(Vt,$r)|0,rt=rt+Math.imul(Vt,Lr)|0,rt=rt+Math.imul(Qt,$r)|0,mt=mt+Math.imul(Qt,Lr)|0,pt=pt+Math.imul(Wt,Ur)|0,rt=rt+Math.imul(Wt,Jr)|0,rt=rt+Math.imul(zt,Ur)|0,mt=mt+Math.imul(zt,Jr)|0,pt=pt+Math.imul(Gt,Fr)|0,rt=rt+Math.imul(Gt,Vr)|0,rt=rt+Math.imul(rr,Fr)|0,mt=mt+Math.imul(rr,Vr)|0;var Yr=(Et+pt|0)+((rt&8191)<<13)|0;Et=(mt+(rt>>>13)|0)+(Yr>>>26)|0,Yr&=67108863,pt=Math.imul(Ut,Sr),rt=Math.imul(Ut,Or),rt=rt+Math.imul(Ft,Sr)|0,mt=Math.imul(Ft,Or),pt=pt+Math.imul(tr,yt)|0,rt=rt+Math.imul(tr,Bt)|0,rt=rt+Math.imul(bt,yt)|0,mt=mt+Math.imul(bt,Bt)|0,pt=pt+Math.imul(Kt,yr)|0,rt=rt+Math.imul(Kt,fr)|0,rt=rt+Math.imul(er,yr)|0,mt=mt+Math.imul(er,fr)|0,pt=pt+Math.imul(Pr,Nr)|0,rt=rt+Math.imul(Pr,xr)|0,rt=rt+Math.imul(_r,Nr)|0,mt=mt+Math.imul(_r,xr)|0,pt=pt+Math.imul(Tr,Ar)|0,rt=rt+Math.imul(Tr,Br)|0,rt=rt+Math.imul(gr,Ar)|0,mt=mt+Math.imul(gr,Br)|0,pt=pt+Math.imul(cr,Dr)|0,rt=rt+Math.imul(cr,qr)|0,rt=rt+Math.imul(dr,Dr)|0,mt=mt+Math.imul(dr,qr)|0,pt=pt+Math.imul(st,$r)|0,rt=rt+Math.imul(st,Lr)|0,rt=rt+Math.imul(Ct,$r)|0,mt=mt+Math.imul(Ct,Lr)|0,pt=pt+Math.imul(Vt,Ur)|0,rt=rt+Math.imul(Vt,Jr)|0,rt=rt+Math.imul(Qt,Ur)|0,mt=mt+Math.imul(Qt,Jr)|0,pt=pt+Math.imul(Wt,Fr)|0,rt=rt+Math.imul(Wt,Vr)|0,rt=rt+Math.imul(zt,Fr)|0,mt=mt+Math.imul(zt,Vr)|0;var en=(Et+pt|0)+((rt&8191)<<13)|0;Et=(mt+(rt>>>13)|0)+(en>>>26)|0,en&=67108863,pt=Math.imul(Ut,yt),rt=Math.imul(Ut,Bt),rt=rt+Math.imul(Ft,yt)|0,mt=Math.imul(Ft,Bt),pt=pt+Math.imul(tr,yr)|0,rt=rt+Math.imul(tr,fr)|0,rt=rt+Math.imul(bt,yr)|0,mt=mt+Math.imul(bt,fr)|0,pt=pt+Math.imul(Kt,Nr)|0,rt=rt+Math.imul(Kt,xr)|0,rt=rt+Math.imul(er,Nr)|0,mt=mt+Math.imul(er,xr)|0,pt=pt+Math.imul(Pr,Ar)|0,rt=rt+Math.imul(Pr,Br)|0,rt=rt+Math.imul(_r,Ar)|0,mt=mt+Math.imul(_r,Br)|0,pt=pt+Math.imul(Tr,Dr)|0,rt=rt+Math.imul(Tr,qr)|0,rt=rt+Math.imul(gr,Dr)|0,mt=mt+Math.imul(gr,qr)|0,pt=pt+Math.imul(cr,$r)|0,rt=rt+Math.imul(cr,Lr)|0,rt=rt+Math.imul(dr,$r)|0,mt=mt+Math.imul(dr,Lr)|0,pt=pt+Math.imul(st,Ur)|0,rt=rt+Math.imul(st,Jr)|0,rt=rt+Math.imul(Ct,Ur)|0,mt=mt+Math.imul(Ct,Jr)|0,pt=pt+Math.imul(Vt,Fr)|0,rt=rt+Math.imul(Vt,Vr)|0,rt=rt+Math.imul(Qt,Fr)|0,mt=mt+Math.imul(Qt,Vr)|0;var jr=(Et+pt|0)+((rt&8191)<<13)|0;Et=(mt+(rt>>>13)|0)+(jr>>>26)|0,jr&=67108863,pt=Math.imul(Ut,yr),rt=Math.imul(Ut,fr),rt=rt+Math.imul(Ft,yr)|0,mt=Math.imul(Ft,fr),pt=pt+Math.imul(tr,Nr)|0,rt=rt+Math.imul(tr,xr)|0,rt=rt+Math.imul(bt,Nr)|0,mt=mt+Math.imul(bt,xr)|0,pt=pt+Math.imul(Kt,Ar)|0,rt=rt+Math.imul(Kt,Br)|0,rt=rt+Math.imul(er,Ar)|0,mt=mt+Math.imul(er,Br)|0,pt=pt+Math.imul(Pr,Dr)|0,rt=rt+Math.imul(Pr,qr)|0,rt=rt+Math.imul(_r,Dr)|0,mt=mt+Math.imul(_r,qr)|0,pt=pt+Math.imul(Tr,$r)|0,rt=rt+Math.imul(Tr,Lr)|0,rt=rt+Math.imul(gr,$r)|0,mt=mt+Math.imul(gr,Lr)|0,pt=pt+Math.imul(cr,Ur)|0,rt=rt+Math.imul(cr,Jr)|0,rt=rt+Math.imul(dr,Ur)|0,mt=mt+Math.imul(dr,Jr)|0,pt=pt+Math.imul(st,Fr)|0,rt=rt+Math.imul(st,Vr)|0,rt=rt+Math.imul(Ct,Fr)|0,mt=mt+Math.imul(Ct,Vr)|0;var pn=(Et+pt|0)+((rt&8191)<<13)|0;Et=(mt+(rt>>>13)|0)+(pn>>>26)|0,pn&=67108863,pt=Math.imul(Ut,Nr),rt=Math.imul(Ut,xr),rt=rt+Math.imul(Ft,Nr)|0,mt=Math.imul(Ft,xr),pt=pt+Math.imul(tr,Ar)|0,rt=rt+Math.imul(tr,Br)|0,rt=rt+Math.imul(bt,Ar)|0,mt=mt+Math.imul(bt,Br)|0,pt=pt+Math.imul(Kt,Dr)|0,rt=rt+Math.imul(Kt,qr)|0,rt=rt+Math.imul(er,Dr)|0,mt=mt+Math.imul(er,qr)|0,pt=pt+Math.imul(Pr,$r)|0,rt=rt+Math.imul(Pr,Lr)|0,rt=rt+Math.imul(_r,$r)|0,mt=mt+Math.imul(_r,Lr)|0,pt=pt+Math.imul(Tr,Ur)|0,rt=rt+Math.imul(Tr,Jr)|0,rt=rt+Math.imul(gr,Ur)|0,mt=mt+Math.imul(gr,Jr)|0,pt=pt+Math.imul(cr,Fr)|0,rt=rt+Math.imul(cr,Vr)|0,rt=rt+Math.imul(dr,Fr)|0,mt=mt+Math.imul(dr,Vr)|0;var mn=(Et+pt|0)+((rt&8191)<<13)|0;Et=(mt+(rt>>>13)|0)+(mn>>>26)|0,mn&=67108863,pt=Math.imul(Ut,Ar),rt=Math.imul(Ut,Br),rt=rt+Math.imul(Ft,Ar)|0,mt=Math.imul(Ft,Br),pt=pt+Math.imul(tr,Dr)|0,rt=rt+Math.imul(tr,qr)|0,rt=rt+Math.imul(bt,Dr)|0,mt=mt+Math.imul(bt,qr)|0,pt=pt+Math.imul(Kt,$r)|0,rt=rt+Math.imul(Kt,Lr)|0,rt=rt+Math.imul(er,$r)|0,mt=mt+Math.imul(er,Lr)|0,pt=pt+Math.imul(Pr,Ur)|0,rt=rt+Math.imul(Pr,Jr)|0,rt=rt+Math.imul(_r,Ur)|0,mt=mt+Math.imul(_r,Jr)|0,pt=pt+Math.imul(Tr,Fr)|0,rt=rt+Math.imul(Tr,Vr)|0,rt=rt+Math.imul(gr,Fr)|0,mt=mt+Math.imul(gr,Vr)|0;var hn=(Et+pt|0)+((rt&8191)<<13)|0;Et=(mt+(rt>>>13)|0)+(hn>>>26)|0,hn&=67108863,pt=Math.imul(Ut,Dr),rt=Math.imul(Ut,qr),rt=rt+Math.imul(Ft,Dr)|0,mt=Math.imul(Ft,qr),pt=pt+Math.imul(tr,$r)|0,rt=rt+Math.imul(tr,Lr)|0,rt=rt+Math.imul(bt,$r)|0,mt=mt+Math.imul(bt,Lr)|0,pt=pt+Math.imul(Kt,Ur)|0,rt=rt+Math.imul(Kt,Jr)|0,rt=rt+Math.imul(er,Ur)|0,mt=mt+Math.imul(er,Jr)|0,pt=pt+Math.imul(Pr,Fr)|0,rt=rt+Math.imul(Pr,Vr)|0,rt=rt+Math.imul(_r,Fr)|0,mt=mt+Math.imul(_r,Vr)|0;var fn=(Et+pt|0)+((rt&8191)<<13)|0;Et=(mt+(rt>>>13)|0)+(fn>>>26)|0,fn&=67108863,pt=Math.imul(Ut,$r),rt=Math.imul(Ut,Lr),rt=rt+Math.imul(Ft,$r)|0,mt=Math.imul(Ft,Lr),pt=pt+Math.imul(tr,Ur)|0,rt=rt+Math.imul(tr,Jr)|0,rt=rt+Math.imul(bt,Ur)|0,mt=mt+Math.imul(bt,Jr)|0,pt=pt+Math.imul(Kt,Fr)|0,rt=rt+Math.imul(Kt,Vr)|0,rt=rt+Math.imul(er,Fr)|0,mt=mt+Math.imul(er,Vr)|0;var vn=(Et+pt|0)+((rt&8191)<<13)|0;Et=(mt+(rt>>>13)|0)+(vn>>>26)|0,vn&=67108863,pt=Math.imul(Ut,Ur),rt=Math.imul(Ut,Jr),rt=rt+Math.imul(Ft,Ur)|0,mt=Math.imul(Ft,Jr),pt=pt+Math.imul(tr,Fr)|0,rt=rt+Math.imul(tr,Vr)|0,rt=rt+Math.imul(bt,Fr)|0,mt=mt+Math.imul(bt,Vr)|0;var gn=(Et+pt|0)+((rt&8191)<<13)|0;Et=(mt+(rt>>>13)|0)+(gn>>>26)|0,gn&=67108863,pt=Math.imul(Ut,Fr),rt=Math.imul(Ut,Vr),rt=rt+Math.imul(Ft,Fr)|0,mt=Math.imul(Ft,Vr);var Sn=(Et+pt|0)+((rt&8191)<<13)|0;return Et=(mt+(rt>>>13)|0)+(Sn>>>26)|0,Sn&=67108863,gt[0]=sn,gt[1]=un,gt[2]=yn,gt[3]=br,gt[4]=wr,gt[5]=Mr,gt[6]=Wr,gt[7]=Hr,gt[8]=Gr,gt[9]=Yr,gt[10]=en,gt[11]=jr,gt[12]=pn,gt[13]=mn,gt[14]=hn,gt[15]=fn,gt[16]=vn,gt[17]=gn,gt[18]=Sn,Et!==0&&(gt[19]=Et,it.length++),it};Math.imul||(At=Tt);function Mt(ut,_e,tt){tt.negative=_e.negative^ut.negative,tt.length=ut.length+_e.length;for(var it=0,dt=0,lt=0;lt<tt.length-1;lt++){var gt=dt;dt=0;for(var Et=it&67108863,pt=Math.min(lt,_e.length-1),rt=Math.max(0,lt-ut.length+1);rt<=pt;rt++){var mt=lt-rt,Lt=ut.words[mt]|0,Gt=_e.words[rt]|0,rr=Lt*Gt,ir=rr&67108863;gt=gt+(rr/67108864|0)|0,ir=ir+Et|0,Et=ir&67108863,gt=gt+(ir>>>26)|0,dt+=gt>>>26,gt&=67108863}tt.words[lt]=Et,it=gt,gt=dt}return it!==0?tt.words[lt]=it:tt.length--,tt.strip()}function Dt(ut,_e,tt){var it=new Rt;return it.mulp(ut,_e,tt)}k.prototype.mulTo=function(_e,tt){var it,dt=this.length+_e.length;return this.length===10&&_e.length===10?it=At(this,_e,tt):dt<63?it=Tt(this,_e,tt):dt<1024?it=Mt(this,_e,tt):it=Dt(this,_e,tt),it};function Rt(ut,_e){this.x=ut,this.y=_e}Rt.prototype.makeRBT=function(_e){for(var tt=new Array(_e),it=k.prototype._countBits(_e)-1,dt=0;dt<_e;dt++)tt[dt]=this.revBin(dt,it,_e);return tt},Rt.prototype.revBin=function(_e,tt,it){if(_e===0||_e===it-1)return _e;for(var dt=0,lt=0;lt<tt;lt++)dt|=(_e&1)<<tt-lt-1,_e>>=1;return dt},Rt.prototype.permute=function(_e,tt,it,dt,lt,gt){for(var Et=0;Et<gt;Et++)dt[Et]=tt[_e[Et]],lt[Et]=it[_e[Et]]},Rt.prototype.transform=function(_e,tt,it,dt,lt,gt){this.permute(gt,_e,tt,it,dt,lt);for(var Et=1;Et<lt;Et<<=1)for(var pt=Et<<1,rt=Math.cos(2*Math.PI/pt),mt=Math.sin(2*Math.PI/pt),Lt=0;Lt<lt;Lt+=pt)for(var Gt=rt,rr=mt,ir=0;ir<Et;ir++){var Wt=it[Lt+ir],zt=dt[Lt+ir],wt=it[Lt+ir+Et],Vt=dt[Lt+ir+Et],Qt=Gt*wt-rr*Vt;Vt=Gt*Vt+rr*wt,wt=Qt,it[Lt+ir]=Wt+wt,dt[Lt+ir]=zt+Vt,it[Lt+ir+Et]=Wt-wt,dt[Lt+ir+Et]=zt-Vt,ir!==pt&&(Qt=rt*Gt-mt*rr,rr=rt*rr+mt*Gt,Gt=Qt)}},Rt.prototype.guessLen13b=function(_e,tt){var it=Math.max(tt,_e)|1,dt=it&1,lt=0;for(it=it/2|0;it;it=it>>>1)lt++;return 1<<lt+1+dt},Rt.prototype.conjugate=function(_e,tt,it){if(!(it<=1))for(var dt=0;dt<it/2;dt++){var lt=_e[dt];_e[dt]=_e[it-dt-1],_e[it-dt-1]=lt,lt=tt[dt],tt[dt]=-tt[it-dt-1],tt[it-dt-1]=-lt}},Rt.prototype.normalize13b=function(_e,tt){for(var it=0,dt=0;dt<tt/2;dt++){var lt=Math.round(_e[2*dt+1]/tt)*8192+Math.round(_e[2*dt]/tt)+it;_e[dt]=lt&67108863,lt<67108864?it=0:it=lt/67108864|0}return _e},Rt.prototype.convert13b=function(_e,tt,it,dt){for(var lt=0,gt=0;gt<tt;gt++)lt=lt+(_e[gt]|0),it[2*gt]=lt&8191,lt=lt>>>13,it[2*gt+1]=lt&8191,lt=lt>>>13;for(gt=2*tt;gt<dt;++gt)it[gt]=0;_(lt===0),_((lt&-8192)===0)},Rt.prototype.stub=function(_e){for(var tt=new Array(_e),it=0;it<_e;it++)tt[it]=0;return tt},Rt.prototype.mulp=function(_e,tt,it){var dt=2*this.guessLen13b(_e.length,tt.length),lt=this.makeRBT(dt),gt=this.stub(dt),Et=new Array(dt),pt=new Array(dt),rt=new Array(dt),mt=new Array(dt),Lt=new Array(dt),Gt=new Array(dt),rr=it.words;rr.length=dt,this.convert13b(_e.words,_e.length,Et,dt),this.convert13b(tt.words,tt.length,mt,dt),this.transform(Et,gt,pt,rt,dt,lt),this.transform(mt,gt,Lt,Gt,dt,lt);for(var ir=0;ir<dt;ir++){var Wt=pt[ir]*Lt[ir]-rt[ir]*Gt[ir];rt[ir]=pt[ir]*Gt[ir]+rt[ir]*Lt[ir],pt[ir]=Wt}return this.conjugate(pt,rt,dt),this.transform(pt,rt,rr,gt,dt,lt),this.conjugate(rr,gt,dt),this.normalize13b(rr,dt),it.negative=_e.negative^tt.negative,it.length=_e.length+tt.length,it.strip()},k.prototype.mul=function(_e){var tt=new k(null);return tt.words=new Array(this.length+_e.length),this.mulTo(_e,tt)},k.prototype.mulf=function(_e){var tt=new k(null);return tt.words=new Array(this.length+_e.length),Dt(this,_e,tt)},k.prototype.imul=function(_e){return this.clone().mulTo(_e,this)},k.prototype.imuln=function(_e){_(typeof _e=="number"),_(_e<67108864);for(var tt=0,it=0;it<this.length;it++){var dt=(this.words[it]|0)*_e,lt=(dt&67108863)+(tt&67108863);tt>>=26,tt+=dt/67108864|0,tt+=lt>>>26,this.words[it]=lt&67108863}return tt!==0&&(this.words[it]=tt,this.length++),this},k.prototype.muln=function(_e){return this.clone().imuln(_e)},k.prototype.sqr=function(){return this.mul(this)},k.prototype.isqr=function(){return this.imul(this.clone())},k.prototype.pow=function(_e){var tt=$t(_e);if(tt.length===0)return new k(1);for(var it=this,dt=0;dt<tt.length&&tt[dt]===0;dt++,it=it.sqr());if(++dt<tt.length)for(var lt=it.sqr();dt<tt.length;dt++,lt=lt.sqr())tt[dt]!==0&&(it=it.mul(lt));return it},k.prototype.iushln=function(_e){_(typeof _e=="number"&&_e>=0);var tt=_e%26,it=(_e-tt)/26,dt=67108863>>>26-tt<<26-tt,lt;if(tt!==0){var gt=0;for(lt=0;lt<this.length;lt++){var Et=this.words[lt]&dt,pt=(this.words[lt]|0)-Et<<tt;this.words[lt]=pt|gt,gt=Et>>>26-tt}gt&&(this.words[lt]=gt,this.length++)}if(it!==0){for(lt=this.length-1;lt>=0;lt--)this.words[lt+it]=this.words[lt];for(lt=0;lt<it;lt++)this.words[lt]=0;this.length+=it}return this.strip()},k.prototype.ishln=function(_e){return _(this.negative===0),this.iushln(_e)},k.prototype.iushrn=function(_e,tt,it){_(typeof _e=="number"&&_e>=0);var dt;tt?dt=(tt-tt%26)/26:dt=0;var lt=_e%26,gt=Math.min((_e-lt)/26,this.length),Et=67108863^67108863>>>lt<<lt,pt=it;if(dt-=gt,dt=Math.max(0,dt),pt){for(var rt=0;rt<gt;rt++)pt.words[rt]=this.words[rt];pt.length=gt}if(gt!==0)if(this.length>gt)for(this.length-=gt,rt=0;rt<this.length;rt++)this.words[rt]=this.words[rt+gt];else this.words[0]=0,this.length=1;var mt=0;for(rt=this.length-1;rt>=0&&(mt!==0||rt>=dt);rt--){var Lt=this.words[rt]|0;this.words[rt]=mt<<26-lt|Lt>>>lt,mt=Lt&Et}return pt&&mt!==0&&(pt.words[pt.length++]=mt),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},k.prototype.ishrn=function(_e,tt,it){return _(this.negative===0),this.iushrn(_e,tt,it)},k.prototype.shln=function(_e){return this.clone().ishln(_e)},k.prototype.ushln=function(_e){return this.clone().iushln(_e)},k.prototype.shrn=function(_e){return this.clone().ishrn(_e)},k.prototype.ushrn=function(_e){return this.clone().iushrn(_e)},k.prototype.testn=function(_e){_(typeof _e=="number"&&_e>=0);var tt=_e%26,it=(_e-tt)/26,dt=1<<tt;if(this.length<=it)return!1;var lt=this.words[it];return!!(lt&dt)},k.prototype.imaskn=function(_e){_(typeof _e=="number"&&_e>=0);var tt=_e%26,it=(_e-tt)/26;if(_(this.negative===0,"imaskn works only with positive numbers"),this.length<=it)return this;if(tt!==0&&it++,this.length=Math.min(it,this.length),tt!==0){var dt=67108863^67108863>>>tt<<tt;this.words[this.length-1]&=dt}return this.strip()},k.prototype.maskn=function(_e){return this.clone().imaskn(_e)},k.prototype.iaddn=function(_e){return _(typeof _e=="number"),_(_e<67108864),_e<0?this.isubn(-_e):this.negative!==0?this.length===1&&(this.words[0]|0)<_e?(this.words[0]=_e-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(_e),this.negative=1,this):this._iaddn(_e)},k.prototype._iaddn=function(_e){this.words[0]+=_e;for(var tt=0;tt<this.length&&this.words[tt]>=67108864;tt++)this.words[tt]-=67108864,tt===this.length-1?this.words[tt+1]=1:this.words[tt+1]++;return this.length=Math.max(this.length,tt+1),this},k.prototype.isubn=function(_e){if(_(typeof _e=="number"),_(_e<67108864),_e<0)return this.iaddn(-_e);if(this.negative!==0)return this.negative=0,this.iaddn(_e),this.negative=1,this;if(this.words[0]-=_e,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var tt=0;tt<this.length&&this.words[tt]<0;tt++)this.words[tt]+=67108864,this.words[tt+1]-=1;return this.strip()},k.prototype.addn=function(_e){return this.clone().iaddn(_e)},k.prototype.subn=function(_e){return this.clone().isubn(_e)},k.prototype.iabs=function(){return this.negative=0,this},k.prototype.abs=function(){return this.clone().iabs()},k.prototype._ishlnsubmul=function(_e,tt,it){var dt=_e.length+it,lt;this._expand(dt);var gt,Et=0;for(lt=0;lt<_e.length;lt++){gt=(this.words[lt+it]|0)+Et;var pt=(_e.words[lt]|0)*tt;gt-=pt&67108863,Et=(gt>>26)-(pt/67108864|0),this.words[lt+it]=gt&67108863}for(;lt<this.length-it;lt++)gt=(this.words[lt+it]|0)+Et,Et=gt>>26,this.words[lt+it]=gt&67108863;if(Et===0)return this.strip();for(_(Et===-1),Et=0,lt=0;lt<this.length;lt++)gt=-(this.words[lt]|0)+Et,Et=gt>>26,this.words[lt]=gt&67108863;return this.negative=1,this.strip()},k.prototype._wordDiv=function(_e,tt){var it=this.length-_e.length,dt=this.clone(),lt=_e,gt=lt.words[lt.length-1]|0,Et=this._countBits(gt);it=26-Et,it!==0&&(lt=lt.ushln(it),dt.iushln(it),gt=lt.words[lt.length-1]|0);var pt=dt.length-lt.length,rt;if(tt!=="mod"){rt=new k(null),rt.length=pt+1,rt.words=new Array(rt.length);for(var mt=0;mt<rt.length;mt++)rt.words[mt]=0}var Lt=dt.clone()._ishlnsubmul(lt,1,pt);Lt.negative===0&&(dt=Lt,rt&&(rt.words[pt]=1));for(var Gt=pt-1;Gt>=0;Gt--){var rr=(dt.words[lt.length+Gt]|0)*67108864+(dt.words[lt.length+Gt-1]|0);for(rr=Math.min(rr/gt|0,67108863),dt._ishlnsubmul(lt,rr,Gt);dt.negative!==0;)rr--,dt.negative=0,dt._ishlnsubmul(lt,1,Gt),dt.isZero()||(dt.negative^=1);rt&&(rt.words[Gt]=rr)}return rt&&rt.strip(),dt.strip(),tt!=="div"&&it!==0&&dt.iushrn(it),{div:rt||null,mod:dt}},k.prototype.divmod=function(_e,tt,it){if(_(!_e.isZero()),this.isZero())return{div:new k(0),mod:new k(0)};var dt,lt,gt;return this.negative!==0&&_e.negative===0?(gt=this.neg().divmod(_e,tt),tt!=="mod"&&(dt=gt.div.neg()),tt!=="div"&&(lt=gt.mod.neg(),it&&lt.negative!==0&&lt.iadd(_e)),{div:dt,mod:lt}):this.negative===0&&_e.negative!==0?(gt=this.divmod(_e.neg(),tt),tt!=="mod"&&(dt=gt.div.neg()),{div:dt,mod:gt.mod}):this.negative&_e.negative?(gt=this.neg().divmod(_e.neg(),tt),tt!=="div"&&(lt=gt.mod.neg(),it&&lt.negative!==0&&lt.isub(_e)),{div:gt.div,mod:lt}):_e.length>this.length||this.cmp(_e)<0?{div:new k(0),mod:this}:_e.length===1?tt==="div"?{div:this.divn(_e.words[0]),mod:null}:tt==="mod"?{div:null,mod:new k(this.modn(_e.words[0]))}:{div:this.divn(_e.words[0]),mod:new k(this.modn(_e.words[0]))}:this._wordDiv(_e,tt)},k.prototype.div=function(_e){return this.divmod(_e,"div",!1).div},k.prototype.mod=function(_e){return this.divmod(_e,"mod",!1).mod},k.prototype.umod=function(_e){return this.divmod(_e,"mod",!0).mod},k.prototype.divRound=function(_e){var tt=this.divmod(_e);if(tt.mod.isZero())return tt.div;var it=tt.div.negative!==0?tt.mod.isub(_e):tt.mod,dt=_e.ushrn(1),lt=_e.andln(1),gt=it.cmp(dt);return gt<0||lt===1&&gt===0?tt.div:tt.div.negative!==0?tt.div.isubn(1):tt.div.iaddn(1)},k.prototype.modn=function(_e){_(_e<=67108863);for(var tt=(1<<26)%_e,it=0,dt=this.length-1;dt>=0;dt--)it=(tt*it+(this.words[dt]|0))%_e;return it},k.prototype.idivn=function(_e){_(_e<=67108863);for(var tt=0,it=this.length-1;it>=0;it--){var dt=(this.words[it]|0)+tt*67108864;this.words[it]=dt/_e|0,tt=dt%_e}return this.strip()},k.prototype.divn=function(_e){return this.clone().idivn(_e)},k.prototype.egcd=function(_e){_(_e.negative===0),_(!_e.isZero());var tt=this,it=_e.clone();tt.negative!==0?tt=tt.umod(_e):tt=tt.clone();for(var dt=new k(1),lt=new k(0),gt=new k(0),Et=new k(1),pt=0;tt.isEven()&&it.isEven();)tt.iushrn(1),it.iushrn(1),++pt;for(var rt=it.clone(),mt=tt.clone();!tt.isZero();){for(var Lt=0,Gt=1;!(tt.words[0]&Gt)&&Lt<26;++Lt,Gt<<=1);if(Lt>0)for(tt.iushrn(Lt);Lt-- >0;)(dt.isOdd()||lt.isOdd())&&(dt.iadd(rt),lt.isub(mt)),dt.iushrn(1),lt.iushrn(1);for(var rr=0,ir=1;!(it.words[0]&ir)&&rr<26;++rr,ir<<=1);if(rr>0)for(it.iushrn(rr);rr-- >0;)(gt.isOdd()||Et.isOdd())&&(gt.iadd(rt),Et.isub(mt)),gt.iushrn(1),Et.iushrn(1);tt.cmp(it)>=0?(tt.isub(it),dt.isub(gt),lt.isub(Et)):(it.isub(tt),gt.isub(dt),Et.isub(lt))}return{a:gt,b:Et,gcd:it.iushln(pt)}},k.prototype._invmp=function(_e){_(_e.negative===0),_(!_e.isZero());var tt=this,it=_e.clone();tt.negative!==0?tt=tt.umod(_e):tt=tt.clone();for(var dt=new k(1),lt=new k(0),gt=it.clone();tt.cmpn(1)>0&&it.cmpn(1)>0;){for(var Et=0,pt=1;!(tt.words[0]&pt)&&Et<26;++Et,pt<<=1);if(Et>0)for(tt.iushrn(Et);Et-- >0;)dt.isOdd()&&dt.iadd(gt),dt.iushrn(1);for(var rt=0,mt=1;!(it.words[0]&mt)&&rt<26;++rt,mt<<=1);if(rt>0)for(it.iushrn(rt);rt-- >0;)lt.isOdd()&&lt.iadd(gt),lt.iushrn(1);tt.cmp(it)>=0?(tt.isub(it),dt.isub(lt)):(it.isub(tt),lt.isub(dt))}var Lt;return tt.cmpn(1)===0?Lt=dt:Lt=lt,Lt.cmpn(0)<0&&Lt.iadd(_e),Lt},k.prototype.gcd=function(_e){if(this.isZero())return _e.abs();if(_e.isZero())return this.abs();var tt=this.clone(),it=_e.clone();tt.negative=0,it.negative=0;for(var dt=0;tt.isEven()&&it.isEven();dt++)tt.iushrn(1),it.iushrn(1);do{for(;tt.isEven();)tt.iushrn(1);for(;it.isEven();)it.iushrn(1);var lt=tt.cmp(it);if(lt<0){var gt=tt;tt=it,it=gt}else if(lt===0||it.cmpn(1)===0)break;tt.isub(it)}while(!0);return it.iushln(dt)},k.prototype.invm=function(_e){return this.egcd(_e).a.umod(_e)},k.prototype.isEven=function(){return(this.words[0]&1)===0},k.prototype.isOdd=function(){return(this.words[0]&1)===1},k.prototype.andln=function(_e){return this.words[0]&_e},k.prototype.bincn=function(_e){_(typeof _e=="number");var tt=_e%26,it=(_e-tt)/26,dt=1<<tt;if(this.length<=it)return this._expand(it+1),this.words[it]|=dt,this;for(var lt=dt,gt=it;lt!==0&&gt<this.length;gt++){var Et=this.words[gt]|0;Et+=lt,lt=Et>>>26,Et&=67108863,this.words[gt]=Et}return lt!==0&&(this.words[gt]=lt,this.length++),this},k.prototype.isZero=function(){return this.length===1&&this.words[0]===0},k.prototype.cmpn=function(_e){var tt=_e<0;if(this.negative!==0&&!tt)return-1;if(this.negative===0&&tt)return 1;this.strip();var it;if(this.length>1)it=1;else{tt&&(_e=-_e),_(_e<=67108863,"Number is too big");var dt=this.words[0]|0;it=dt===_e?0:dt<_e?-1:1}return this.negative!==0?-it|0:it},k.prototype.cmp=function(_e){if(this.negative!==0&&_e.negative===0)return-1;if(this.negative===0&&_e.negative!==0)return 1;var tt=this.ucmp(_e);return this.negative!==0?-tt|0:tt},k.prototype.ucmp=function(_e){if(this.length>_e.length)return 1;if(this.length<_e.length)return-1;for(var tt=0,it=this.length-1;it>=0;it--){var dt=this.words[it]|0,lt=_e.words[it]|0;if(dt!==lt){dt<lt?tt=-1:dt>lt&&(tt=1);break}}return tt},k.prototype.gtn=function(_e){return this.cmpn(_e)===1},k.prototype.gt=function(_e){return this.cmp(_e)===1},k.prototype.gten=function(_e){return this.cmpn(_e)>=0},k.prototype.gte=function(_e){return this.cmp(_e)>=0},k.prototype.ltn=function(_e){return this.cmpn(_e)===-1},k.prototype.lt=function(_e){return this.cmp(_e)===-1},k.prototype.lten=function(_e){return this.cmpn(_e)<=0},k.prototype.lte=function(_e){return this.cmp(_e)<=0},k.prototype.eqn=function(_e){return this.cmpn(_e)===0},k.prototype.eq=function(_e){return this.cmp(_e)===0},k.red=function(_e){return new Ot(_e)},k.prototype.toRed=function(_e){return _(!this.red,"Already a number in reduction context"),_(this.negative===0,"red works only with positives"),_e.convertTo(this)._forceRed(_e)},k.prototype.fromRed=function(){return _(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},k.prototype._forceRed=function(_e){return this.red=_e,this},k.prototype.forceRed=function(_e){return _(!this.red,"Already a number in reduction context"),this._forceRed(_e)},k.prototype.redAdd=function(_e){return _(this.red,"redAdd works only with red numbers"),this.red.add(this,_e)},k.prototype.redIAdd=function(_e){return _(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,_e)},k.prototype.redSub=function(_e){return _(this.red,"redSub works only with red numbers"),this.red.sub(this,_e)},k.prototype.redISub=function(_e){return _(this.red,"redISub works only with red numbers"),this.red.isub(this,_e)},k.prototype.redShl=function(_e){return _(this.red,"redShl works only with red numbers"),this.red.shl(this,_e)},k.prototype.redMul=function(_e){return _(this.red,"redMul works only with red numbers"),this.red._verify2(this,_e),this.red.mul(this,_e)},k.prototype.redIMul=function(_e){return _(this.red,"redMul works only with red numbers"),this.red._verify2(this,_e),this.red.imul(this,_e)},k.prototype.redSqr=function(){return _(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},k.prototype.redISqr=function(){return _(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},k.prototype.redSqrt=function(){return _(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},k.prototype.redInvm=function(){return _(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},k.prototype.redNeg=function(){return _(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},k.prototype.redPow=function(_e){return _(this.red&&!_e.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,_e)};var xt={k256:null,p224:null,p192:null,p25519:null};function Jt(ut,_e){this.name=ut,this.p=new k(_e,16),this.n=this.p.bitLength(),this.k=new k(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}Jt.prototype._tmp=function(){var _e=new k(null);return _e.words=new Array(Math.ceil(this.n/13)),_e},Jt.prototype.ireduce=function(_e){var tt=_e,it;do this.split(tt,this.tmp),tt=this.imulK(tt),tt=tt.iadd(this.tmp),it=tt.bitLength();while(it>this.n);var dt=it<this.n?-1:tt.ucmp(this.p);return dt===0?(tt.words[0]=0,tt.length=1):dt>0?tt.isub(this.p):tt.strip!==void 0?tt.strip():tt._strip(),tt},Jt.prototype.split=function(_e,tt){_e.iushrn(this.n,0,tt)},Jt.prototype.imulK=function(_e){return _e.imul(this.k)};function ar(){Jt.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}$(ar,Jt),ar.prototype.split=function(_e,tt){for(var it=4194303,dt=Math.min(_e.length,9),lt=0;lt<dt;lt++)tt.words[lt]=_e.words[lt];if(tt.length=dt,_e.length<=9){_e.words[0]=0,_e.length=1;return}var gt=_e.words[9];for(tt.words[tt.length++]=gt&it,lt=10;lt<_e.length;lt++){var Et=_e.words[lt]|0;_e.words[lt-10]=(Et&it)<<4|gt>>>22,gt=Et}gt>>>=22,_e.words[lt-10]=gt,gt===0&&_e.length>10?_e.length-=10:_e.length-=9},ar.prototype.imulK=function(_e){_e.words[_e.length]=0,_e.words[_e.length+1]=0,_e.length+=2;for(var tt=0,it=0;it<_e.length;it++){var dt=_e.words[it]|0;tt+=dt*977,_e.words[it]=tt&67108863,tt=dt*64+(tt/67108864|0)}return _e.words[_e.length-1]===0&&(_e.length--,_e.words[_e.length-1]===0&&_e.length--),_e};function nr(){Jt.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}$(nr,Jt);function pr(){Jt.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}$(pr,Jt);function ur(){Jt.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}$(ur,Jt),ur.prototype.imulK=function(_e){for(var tt=0,it=0;it<_e.length;it++){var dt=(_e.words[it]|0)*19+tt,lt=dt&67108863;dt>>>=26,_e.words[it]=lt,tt=dt}return tt!==0&&(_e.words[_e.length++]=tt),_e},k._prime=function(_e){if(xt[_e])return xt[_e];var tt;if(_e==="k256")tt=new ar;else if(_e==="p224")tt=new nr;else if(_e==="p192")tt=new pr;else if(_e==="p25519")tt=new ur;else throw new Error("Unknown prime "+_e);return xt[_e]=tt,tt};function Ot(ut){if(typeof ut=="string"){var _e=k._prime(ut);this.m=_e.p,this.prime=_e}else _(ut.gtn(1),"modulus must be greater than 1"),this.m=ut,this.prime=null}Ot.prototype._verify1=function(_e){_(_e.negative===0,"red works only with positives"),_(_e.red,"red works only with red numbers")},Ot.prototype._verify2=function(_e,tt){_((_e.negative|tt.negative)===0,"red works only with positives"),_(_e.red&&_e.red===tt.red,"red works only with red numbers")},Ot.prototype.imod=function(_e){return this.prime?this.prime.ireduce(_e)._forceRed(this):_e.umod(this.m)._forceRed(this)},Ot.prototype.neg=function(_e){return _e.isZero()?_e.clone():this.m.sub(_e)._forceRed(this)},Ot.prototype.add=function(_e,tt){this._verify2(_e,tt);var it=_e.add(tt);return it.cmp(this.m)>=0&&it.isub(this.m),it._forceRed(this)},Ot.prototype.iadd=function(_e,tt){this._verify2(_e,tt);var it=_e.iadd(tt);return it.cmp(this.m)>=0&&it.isub(this.m),it},Ot.prototype.sub=function(_e,tt){this._verify2(_e,tt);var it=_e.sub(tt);return it.cmpn(0)<0&&it.iadd(this.m),it._forceRed(this)},Ot.prototype.isub=function(_e,tt){this._verify2(_e,tt);var it=_e.isub(tt);return it.cmpn(0)<0&&it.iadd(this.m),it},Ot.prototype.shl=function(_e,tt){return this._verify1(_e),this.imod(_e.ushln(tt))},Ot.prototype.imul=function(_e,tt){return this._verify2(_e,tt),this.imod(_e.imul(tt))},Ot.prototype.mul=function(_e,tt){return this._verify2(_e,tt),this.imod(_e.mul(tt))},Ot.prototype.isqr=function(_e){return this.imul(_e,_e.clone())},Ot.prototype.sqr=function(_e){return this.mul(_e,_e)},Ot.prototype.sqrt=function(_e){if(_e.isZero())return _e.clone();var tt=this.m.andln(3);if(_(tt%2===1),tt===3){var it=this.m.add(new k(1)).iushrn(2);return this.pow(_e,it)}for(var dt=this.m.subn(1),lt=0;!dt.isZero()&&dt.andln(1)===0;)lt++,dt.iushrn(1);_(!dt.isZero());var gt=new k(1).toRed(this),Et=gt.redNeg(),pt=this.m.subn(1).iushrn(1),rt=this.m.bitLength();for(rt=new k(2*rt*rt).toRed(this);this.pow(rt,pt).cmp(Et)!==0;)rt.redIAdd(Et);for(var mt=this.pow(rt,dt),Lt=this.pow(_e,dt.addn(1).iushrn(1)),Gt=this.pow(_e,dt),rr=lt;Gt.cmp(gt)!==0;){for(var ir=Gt,Wt=0;ir.cmp(gt)!==0;Wt++)ir=ir.redSqr();_(Wt<rr);var zt=this.pow(mt,new k(1).iushln(rr-Wt-1));Lt=Lt.redMul(zt),mt=zt.redSqr(),Gt=Gt.redMul(mt),rr=Wt}return Lt},Ot.prototype.invm=function(_e){var tt=_e._invmp(this.m);return tt.negative!==0?(tt.negative=0,this.imod(tt).redNeg()):this.imod(tt)},Ot.prototype.pow=function(_e,tt){if(tt.isZero())return new k(1).toRed(this);if(tt.cmpn(1)===0)return _e.clone();var it=4,dt=new Array(1<<it);dt[0]=new k(1).toRed(this),dt[1]=_e;for(var lt=2;lt<dt.length;lt++)dt[lt]=this.mul(dt[lt-1],_e);var gt=dt[0],Et=0,pt=0,rt=tt.bitLength()%26;for(rt===0&&(rt=26),lt=tt.length-1;lt>=0;lt--){for(var mt=tt.words[lt],Lt=rt-1;Lt>=0;Lt--){var Gt=mt>>Lt&1;if(gt!==dt[0]&&(gt=this.sqr(gt)),Gt===0&&Et===0){pt=0;continue}Et<<=1,Et|=Gt,pt++,!(pt!==it&&(lt!==0||Lt!==0))&&(gt=this.mul(gt,dt[Et]),pt=0,Et=0)}rt=26}return gt},Ot.prototype.convertTo=function(_e){var tt=_e.umod(this.m);return tt===_e?tt.clone():tt},Ot.prototype.convertFrom=function(_e){var tt=_e.clone();return tt.red=null,tt},k.mont=function(_e){return new It(_e)};function It(ut){Ot.call(this,ut),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new k(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}$(It,Ot),It.prototype.convertTo=function(_e){return this.imod(_e.ushln(this.shift))},It.prototype.convertFrom=function(_e){var tt=this.imod(_e.mul(this.rinv));return tt.red=null,tt},It.prototype.imul=function(_e,tt){if(_e.isZero()||tt.isZero())return _e.words[0]=0,_e.length=1,_e;var it=_e.imul(tt),dt=it.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),lt=it.isub(dt).iushrn(this.shift),gt=lt;return lt.cmp(this.m)>=0?gt=lt.isub(this.m):lt.cmpn(0)<0&&(gt=lt.iadd(this.m)),gt._forceRed(this)},It.prototype.mul=function(_e,tt){if(_e.isZero()||tt.isZero())return new k(0)._forceRed(this);var it=_e.mul(tt),dt=it.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),lt=it.isub(dt).iushrn(this.shift),gt=lt;return lt.cmp(this.m)>=0?gt=lt.isub(this.m):lt.cmpn(0)<0&&(gt=lt.iadd(this.m)),gt._forceRed(this)},It.prototype.invm=function(_e){var tt=this.imod(_e._invmp(this.m).mul(this.r2));return tt._forceRed(this)}})(a,commonjsGlobal$1)})(bn$1);var bnExports$1=bn$1.exports,browser$3,hasRequiredBrowser;function requireBrowser(){if(hasRequiredBrowser)return browser$3;hasRequiredBrowser=1;var a=requireElliptic(),c=bnExports$1;browser$3=function(et){return new _(et)};var b={secp256k1:{name:"secp256k1",byteLength:32},secp224r1:{name:"p224",byteLength:28},prime256v1:{name:"p256",byteLength:32},prime192v1:{name:"p192",byteLength:24},ed25519:{name:"ed25519",byteLength:32},secp384r1:{name:"p384",byteLength:48},secp521r1:{name:"p521",byteLength:66}};b.p224=b.secp224r1,b.p256=b.secp256r1=b.prime256v1,b.p192=b.secp192r1=b.prime192v1,b.p384=b.secp384r1,b.p521=b.secp521r1;function _(k){this.curveType=b[k],this.curveType||(this.curveType={name:k}),this.curve=new a.ec(this.curveType.name),this.keys=void 0}_.prototype.generateKeys=function(k,et){return this.keys=this.curve.genKeyPair(),this.getPublicKey(k,et)},_.prototype.computeSecret=function(k,et,nt){et=et||"utf8",Buffer$O.isBuffer(k)||(k=new Buffer$O(k,et));var ot=this.curve.keyFromPublic(k).getPublic(),ht=ot.mul(this.keys.getPrivate()).getX();return $(ht,nt,this.curveType.byteLength)},_.prototype.getPublicKey=function(k,et){var nt=this.keys.getPublic(et==="compressed",!0);return et==="hybrid"&&(nt[nt.length-1]%2?nt[0]=7:nt[0]=6),$(nt,k)},_.prototype.getPrivateKey=function(k){return $(this.keys.getPrivate(),k)},_.prototype.setPublicKey=function(k,et){return et=et||"utf8",Buffer$O.isBuffer(k)||(k=new Buffer$O(k,et)),this.keys._importPublic(k),this},_.prototype.setPrivateKey=function(k,et){et=et||"utf8",Buffer$O.isBuffer(k)||(k=new Buffer$O(k,et));var nt=new c(k);return nt=nt.toString(16),this.keys=this.curve.genKeyPair(),this.keys._importPrivate(nt),this};function $(k,et,nt){Array.isArray(k)||(k=k.toArray());var ot=new Buffer$O(k);if(nt&&ot.length<nt){var ht=new Buffer$O(nt-ot.length);ht.fill(0),ot=Buffer$O.concat([ht,ot])}return et?ot.toString(et):ot}return browser$3}var browser$2={},createHash$2=browser$a,Buffer$9=safeBufferExports$3.Buffer,mgf$2=function(a,c){for(var b=Buffer$9.alloc(0),_=0,$;b.length<c;)$=i2ops(_++),b=Buffer$9.concat([b,createHash$2("sha1").update(a).update($).digest()]);return b.slice(0,c)};function i2ops(a){var c=Buffer$9.allocUnsafe(4);return c.writeUInt32BE(a,0),c}var xor$2=function a(c,b){for(var _=c.length,$=-1;++$<_;)c[$]^=b[$];return c},bn={exports:{}};bn.exports;(function(a){(function(c,b){function _(ut,_e){if(!ut)throw new Error(_e||"Assertion failed")}function $(ut,_e){ut.super_=_e;var tt=function(){};tt.prototype=_e.prototype,ut.prototype=new tt,ut.prototype.constructor=ut}function k(ut,_e,tt){if(k.isBN(ut))return ut;this.negative=0,this.words=null,this.length=0,this.red=null,ut!==null&&((_e==="le"||_e==="be")&&(tt=_e,_e=10),this._init(ut||0,_e||10,tt||"be"))}typeof c=="object"?c.exports=k:b.BN=k,k.BN=k,k.wordSize=26;var et;try{typeof window<"u"&&typeof window.Buffer<"u"?et=window.Buffer:et=require$$0$2.Buffer}catch{}k.isBN=function(_e){return _e instanceof k?!0:_e!==null&&typeof _e=="object"&&_e.constructor.wordSize===k.wordSize&&Array.isArray(_e.words)},k.max=function(_e,tt){return _e.cmp(tt)>0?_e:tt},k.min=function(_e,tt){return _e.cmp(tt)<0?_e:tt},k.prototype._init=function(_e,tt,it){if(typeof _e=="number")return this._initNumber(_e,tt,it);if(typeof _e=="object")return this._initArray(_e,tt,it);tt==="hex"&&(tt=16),_(tt===(tt|0)&&tt>=2&&tt<=36),_e=_e.toString().replace(/\s+/g,"");var dt=0;_e[0]==="-"&&(dt++,this.negative=1),dt<_e.length&&(tt===16?this._parseHex(_e,dt,it):(this._parseBase(_e,tt,dt),it==="le"&&this._initArray(this.toArray(),tt,it)))},k.prototype._initNumber=function(_e,tt,it){_e<0&&(this.negative=1,_e=-_e),_e<67108864?(this.words=[_e&67108863],this.length=1):_e<4503599627370496?(this.words=[_e&67108863,_e/67108864&67108863],this.length=2):(_(_e<9007199254740992),this.words=[_e&67108863,_e/67108864&67108863,1],this.length=3),it==="le"&&this._initArray(this.toArray(),tt,it)},k.prototype._initArray=function(_e,tt,it){if(_(typeof _e.length=="number"),_e.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(_e.length/3),this.words=new Array(this.length);for(var dt=0;dt<this.length;dt++)this.words[dt]=0;var lt,gt,Et=0;if(it==="be")for(dt=_e.length-1,lt=0;dt>=0;dt-=3)gt=_e[dt]|_e[dt-1]<<8|_e[dt-2]<<16,this.words[lt]|=gt<<Et&67108863,this.words[lt+1]=gt>>>26-Et&67108863,Et+=24,Et>=26&&(Et-=26,lt++);else if(it==="le")for(dt=0,lt=0;dt<_e.length;dt+=3)gt=_e[dt]|_e[dt+1]<<8|_e[dt+2]<<16,this.words[lt]|=gt<<Et&67108863,this.words[lt+1]=gt>>>26-Et&67108863,Et+=24,Et>=26&&(Et-=26,lt++);return this.strip()};function nt(ut,_e){var tt=ut.charCodeAt(_e);return tt>=65&&tt<=70?tt-55:tt>=97&&tt<=102?tt-87:tt-48&15}function ot(ut,_e,tt){var it=nt(ut,tt);return tt-1>=_e&&(it|=nt(ut,tt-1)<<4),it}k.prototype._parseHex=function(_e,tt,it){this.length=Math.ceil((_e.length-tt)/6),this.words=new Array(this.length);for(var dt=0;dt<this.length;dt++)this.words[dt]=0;var lt=0,gt=0,Et;if(it==="be")for(dt=_e.length-1;dt>=tt;dt-=2)Et=ot(_e,tt,dt)<<lt,this.words[gt]|=Et&67108863,lt>=18?(lt-=18,gt+=1,this.words[gt]|=Et>>>26):lt+=8;else{var pt=_e.length-tt;for(dt=pt%2===0?tt+1:tt;dt<_e.length;dt+=2)Et=ot(_e,tt,dt)<<lt,this.words[gt]|=Et&67108863,lt>=18?(lt-=18,gt+=1,this.words[gt]|=Et>>>26):lt+=8}this.strip()};function ht(ut,_e,tt,it){for(var dt=0,lt=Math.min(ut.length,tt),gt=_e;gt<lt;gt++){var Et=ut.charCodeAt(gt)-48;dt*=it,Et>=49?dt+=Et-49+10:Et>=17?dt+=Et-17+10:dt+=Et}return dt}k.prototype._parseBase=function(_e,tt,it){this.words=[0],this.length=1;for(var dt=0,lt=1;lt<=67108863;lt*=tt)dt++;dt--,lt=lt/tt|0;for(var gt=_e.length-it,Et=gt%dt,pt=Math.min(gt,gt-Et)+it,rt=0,mt=it;mt<pt;mt+=dt)rt=ht(_e,mt,mt+dt,tt),this.imuln(lt),this.words[0]+rt<67108864?this.words[0]+=rt:this._iaddn(rt);if(Et!==0){var Lt=1;for(rt=ht(_e,mt,_e.length,tt),mt=0;mt<Et;mt++)Lt*=tt;this.imuln(Lt),this.words[0]+rt<67108864?this.words[0]+=rt:this._iaddn(rt)}this.strip()},k.prototype.copy=function(_e){_e.words=new Array(this.length);for(var tt=0;tt<this.length;tt++)_e.words[tt]=this.words[tt];_e.length=this.length,_e.negative=this.negative,_e.red=this.red},k.prototype.clone=function(){var _e=new k(null);return this.copy(_e),_e},k.prototype._expand=function(_e){for(;this.length<_e;)this.words[this.length++]=0;return this},k.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},k.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},k.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var vt=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],_t=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],kt=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];k.prototype.toString=function(_e,tt){_e=_e||10,tt=tt|0||1;var it;if(_e===16||_e==="hex"){it="";for(var dt=0,lt=0,gt=0;gt<this.length;gt++){var Et=this.words[gt],pt=((Et<<dt|lt)&16777215).toString(16);lt=Et>>>24-dt&16777215,lt!==0||gt!==this.length-1?it=vt[6-pt.length]+pt+it:it=pt+it,dt+=2,dt>=26&&(dt-=26,gt--)}for(lt!==0&&(it=lt.toString(16)+it);it.length%tt!==0;)it="0"+it;return this.negative!==0&&(it="-"+it),it}if(_e===(_e|0)&&_e>=2&&_e<=36){var rt=_t[_e],mt=kt[_e];it="";var Lt=this.clone();for(Lt.negative=0;!Lt.isZero();){var Gt=Lt.modn(mt).toString(_e);Lt=Lt.idivn(mt),Lt.isZero()?it=Gt+it:it=vt[rt-Gt.length]+Gt+it}for(this.isZero()&&(it="0"+it);it.length%tt!==0;)it="0"+it;return this.negative!==0&&(it="-"+it),it}_(!1,"Base should be between 2 and 36")},k.prototype.toNumber=function(){var _e=this.words[0];return this.length===2?_e+=this.words[1]*67108864:this.length===3&&this.words[2]===1?_e+=4503599627370496+this.words[1]*67108864:this.length>2&&_(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-_e:_e},k.prototype.toJSON=function(){return this.toString(16)},k.prototype.toBuffer=function(_e,tt){return _(typeof et<"u"),this.toArrayLike(et,_e,tt)},k.prototype.toArray=function(_e,tt){return this.toArrayLike(Array,_e,tt)},k.prototype.toArrayLike=function(_e,tt,it){var dt=this.byteLength(),lt=it||Math.max(1,dt);_(dt<=lt,"byte array longer than desired length"),_(lt>0,"Requested array length <= 0"),this.strip();var gt=tt==="le",Et=new _e(lt),pt,rt,mt=this.clone();if(gt){for(rt=0;!mt.isZero();rt++)pt=mt.andln(255),mt.iushrn(8),Et[rt]=pt;for(;rt<lt;rt++)Et[rt]=0}else{for(rt=0;rt<lt-dt;rt++)Et[rt]=0;for(rt=0;!mt.isZero();rt++)pt=mt.andln(255),mt.iushrn(8),Et[lt-rt-1]=pt}return Et},Math.clz32?k.prototype._countBits=function(_e){return 32-Math.clz32(_e)}:k.prototype._countBits=function(_e){var tt=_e,it=0;return tt>=4096&&(it+=13,tt>>>=13),tt>=64&&(it+=7,tt>>>=7),tt>=8&&(it+=4,tt>>>=4),tt>=2&&(it+=2,tt>>>=2),it+tt},k.prototype._zeroBits=function(_e){if(_e===0)return 26;var tt=_e,it=0;return tt&8191||(it+=13,tt>>>=13),tt&127||(it+=7,tt>>>=7),tt&15||(it+=4,tt>>>=4),tt&3||(it+=2,tt>>>=2),tt&1||it++,it},k.prototype.bitLength=function(){var _e=this.words[this.length-1],tt=this._countBits(_e);return(this.length-1)*26+tt};function $t(ut){for(var _e=new Array(ut.bitLength()),tt=0;tt<_e.length;tt++){var it=tt/26|0,dt=tt%26;_e[tt]=(ut.words[it]&1<<dt)>>>dt}return _e}k.prototype.zeroBits=function(){if(this.isZero())return 0;for(var _e=0,tt=0;tt<this.length;tt++){var it=this._zeroBits(this.words[tt]);if(_e+=it,it!==26)break}return _e},k.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},k.prototype.toTwos=function(_e){return this.negative!==0?this.abs().inotn(_e).iaddn(1):this.clone()},k.prototype.fromTwos=function(_e){return this.testn(_e-1)?this.notn(_e).iaddn(1).ineg():this.clone()},k.prototype.isNeg=function(){return this.negative!==0},k.prototype.neg=function(){return this.clone().ineg()},k.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},k.prototype.iuor=function(_e){for(;this.length<_e.length;)this.words[this.length++]=0;for(var tt=0;tt<_e.length;tt++)this.words[tt]=this.words[tt]|_e.words[tt];return this.strip()},k.prototype.ior=function(_e){return _((this.negative|_e.negative)===0),this.iuor(_e)},k.prototype.or=function(_e){return this.length>_e.length?this.clone().ior(_e):_e.clone().ior(this)},k.prototype.uor=function(_e){return this.length>_e.length?this.clone().iuor(_e):_e.clone().iuor(this)},k.prototype.iuand=function(_e){var tt;this.length>_e.length?tt=_e:tt=this;for(var it=0;it<tt.length;it++)this.words[it]=this.words[it]&_e.words[it];return this.length=tt.length,this.strip()},k.prototype.iand=function(_e){return _((this.negative|_e.negative)===0),this.iuand(_e)},k.prototype.and=function(_e){return this.length>_e.length?this.clone().iand(_e):_e.clone().iand(this)},k.prototype.uand=function(_e){return this.length>_e.length?this.clone().iuand(_e):_e.clone().iuand(this)},k.prototype.iuxor=function(_e){var tt,it;this.length>_e.length?(tt=this,it=_e):(tt=_e,it=this);for(var dt=0;dt<it.length;dt++)this.words[dt]=tt.words[dt]^it.words[dt];if(this!==tt)for(;dt<tt.length;dt++)this.words[dt]=tt.words[dt];return this.length=tt.length,this.strip()},k.prototype.ixor=function(_e){return _((this.negative|_e.negative)===0),this.iuxor(_e)},k.prototype.xor=function(_e){return this.length>_e.length?this.clone().ixor(_e):_e.clone().ixor(this)},k.prototype.uxor=function(_e){return this.length>_e.length?this.clone().iuxor(_e):_e.clone().iuxor(this)},k.prototype.inotn=function(_e){_(typeof _e=="number"&&_e>=0);var tt=Math.ceil(_e/26)|0,it=_e%26;this._expand(tt),it>0&&tt--;for(var dt=0;dt<tt;dt++)this.words[dt]=~this.words[dt]&67108863;return it>0&&(this.words[dt]=~this.words[dt]&67108863>>26-it),this.strip()},k.prototype.notn=function(_e){return this.clone().inotn(_e)},k.prototype.setn=function(_e,tt){_(typeof _e=="number"&&_e>=0);var it=_e/26|0,dt=_e%26;return this._expand(it+1),tt?this.words[it]=this.words[it]|1<<dt:this.words[it]=this.words[it]&~(1<<dt),this.strip()},k.prototype.iadd=function(_e){var tt;if(this.negative!==0&&_e.negative===0)return this.negative=0,tt=this.isub(_e),this.negative^=1,this._normSign();if(this.negative===0&&_e.negative!==0)return _e.negative=0,tt=this.isub(_e),_e.negative=1,tt._normSign();var it,dt;this.length>_e.length?(it=this,dt=_e):(it=_e,dt=this);for(var lt=0,gt=0;gt<dt.length;gt++)tt=(it.words[gt]|0)+(dt.words[gt]|0)+lt,this.words[gt]=tt&67108863,lt=tt>>>26;for(;lt!==0&&gt<it.length;gt++)tt=(it.words[gt]|0)+lt,this.words[gt]=tt&67108863,lt=tt>>>26;if(this.length=it.length,lt!==0)this.words[this.length]=lt,this.length++;else if(it!==this)for(;gt<it.length;gt++)this.words[gt]=it.words[gt];return this},k.prototype.add=function(_e){var tt;return _e.negative!==0&&this.negative===0?(_e.negative=0,tt=this.sub(_e),_e.negative^=1,tt):_e.negative===0&&this.negative!==0?(this.negative=0,tt=_e.sub(this),this.negative=1,tt):this.length>_e.length?this.clone().iadd(_e):_e.clone().iadd(this)},k.prototype.isub=function(_e){if(_e.negative!==0){_e.negative=0;var tt=this.iadd(_e);return _e.negative=1,tt._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(_e),this.negative=1,this._normSign();var it=this.cmp(_e);if(it===0)return this.negative=0,this.length=1,this.words[0]=0,this;var dt,lt;it>0?(dt=this,lt=_e):(dt=_e,lt=this);for(var gt=0,Et=0;Et<lt.length;Et++)tt=(dt.words[Et]|0)-(lt.words[Et]|0)+gt,gt=tt>>26,this.words[Et]=tt&67108863;for(;gt!==0&&Et<dt.length;Et++)tt=(dt.words[Et]|0)+gt,gt=tt>>26,this.words[Et]=tt&67108863;if(gt===0&&Et<dt.length&&dt!==this)for(;Et<dt.length;Et++)this.words[Et]=dt.words[Et];return this.length=Math.max(this.length,Et),dt!==this&&(this.negative=1),this.strip()},k.prototype.sub=function(_e){return this.clone().isub(_e)};function Tt(ut,_e,tt){tt.negative=_e.negative^ut.negative;var it=ut.length+_e.length|0;tt.length=it,it=it-1|0;var dt=ut.words[0]|0,lt=_e.words[0]|0,gt=dt*lt,Et=gt&67108863,pt=gt/67108864|0;tt.words[0]=Et;for(var rt=1;rt<it;rt++){for(var mt=pt>>>26,Lt=pt&67108863,Gt=Math.min(rt,_e.length-1),rr=Math.max(0,rt-ut.length+1);rr<=Gt;rr++){var ir=rt-rr|0;dt=ut.words[ir]|0,lt=_e.words[rr]|0,gt=dt*lt+Lt,mt+=gt/67108864|0,Lt=gt&67108863}tt.words[rt]=Lt|0,pt=mt|0}return pt!==0?tt.words[rt]=pt|0:tt.length--,tt.strip()}var At=function(_e,tt,it){var dt=_e.words,lt=tt.words,gt=it.words,Et=0,pt,rt,mt,Lt=dt[0]|0,Gt=Lt&8191,rr=Lt>>>13,ir=dt[1]|0,Wt=ir&8191,zt=ir>>>13,wt=dt[2]|0,Vt=wt&8191,Qt=wt>>>13,Nt=dt[3]|0,st=Nt&8191,Ct=Nt>>>13,qt=dt[4]|0,cr=qt&8191,dr=qt>>>13,Er=dt[5]|0,Tr=Er&8191,gr=Er>>>13,Zr=dt[6]|0,Pr=Zr&8191,_r=Zr>>>13,St=dt[7]|0,Kt=St&8191,er=St>>>13,kr=dt[8]|0,tr=kr&8191,bt=kr>>>13,jt=dt[9]|0,Ut=jt&8191,Ft=jt>>>13,Ht=lt[0]|0,or=Ht&8191,vr=Ht>>>13,Ir=lt[1]|0,Sr=Ir&8191,Or=Ir>>>13,Cr=lt[2]|0,yt=Cr&8191,Bt=Cr>>>13,Zt=lt[3]|0,yr=Zt&8191,fr=Zt>>>13,Rr=lt[4]|0,Nr=Rr&8191,xr=Rr>>>13,Xr=lt[5]|0,Ar=Xr&8191,Br=Xr>>>13,rn=lt[6]|0,Dr=rn&8191,qr=rn>>>13,nn=lt[7]|0,$r=nn&8191,Lr=nn>>>13,Qr=lt[8]|0,Ur=Qr&8191,Jr=Qr>>>13,cn=lt[9]|0,Fr=cn&8191,Vr=cn>>>13;it.negative=_e.negative^tt.negative,it.length=19,pt=Math.imul(Gt,or),rt=Math.imul(Gt,vr),rt=rt+Math.imul(rr,or)|0,mt=Math.imul(rr,vr);var sn=(Et+pt|0)+((rt&8191)<<13)|0;Et=(mt+(rt>>>13)|0)+(sn>>>26)|0,sn&=67108863,pt=Math.imul(Wt,or),rt=Math.imul(Wt,vr),rt=rt+Math.imul(zt,or)|0,mt=Math.imul(zt,vr),pt=pt+Math.imul(Gt,Sr)|0,rt=rt+Math.imul(Gt,Or)|0,rt=rt+Math.imul(rr,Sr)|0,mt=mt+Math.imul(rr,Or)|0;var un=(Et+pt|0)+((rt&8191)<<13)|0;Et=(mt+(rt>>>13)|0)+(un>>>26)|0,un&=67108863,pt=Math.imul(Vt,or),rt=Math.imul(Vt,vr),rt=rt+Math.imul(Qt,or)|0,mt=Math.imul(Qt,vr),pt=pt+Math.imul(Wt,Sr)|0,rt=rt+Math.imul(Wt,Or)|0,rt=rt+Math.imul(zt,Sr)|0,mt=mt+Math.imul(zt,Or)|0,pt=pt+Math.imul(Gt,yt)|0,rt=rt+Math.imul(Gt,Bt)|0,rt=rt+Math.imul(rr,yt)|0,mt=mt+Math.imul(rr,Bt)|0;var yn=(Et+pt|0)+((rt&8191)<<13)|0;Et=(mt+(rt>>>13)|0)+(yn>>>26)|0,yn&=67108863,pt=Math.imul(st,or),rt=Math.imul(st,vr),rt=rt+Math.imul(Ct,or)|0,mt=Math.imul(Ct,vr),pt=pt+Math.imul(Vt,Sr)|0,rt=rt+Math.imul(Vt,Or)|0,rt=rt+Math.imul(Qt,Sr)|0,mt=mt+Math.imul(Qt,Or)|0,pt=pt+Math.imul(Wt,yt)|0,rt=rt+Math.imul(Wt,Bt)|0,rt=rt+Math.imul(zt,yt)|0,mt=mt+Math.imul(zt,Bt)|0,pt=pt+Math.imul(Gt,yr)|0,rt=rt+Math.imul(Gt,fr)|0,rt=rt+Math.imul(rr,yr)|0,mt=mt+Math.imul(rr,fr)|0;var br=(Et+pt|0)+((rt&8191)<<13)|0;Et=(mt+(rt>>>13)|0)+(br>>>26)|0,br&=67108863,pt=Math.imul(cr,or),rt=Math.imul(cr,vr),rt=rt+Math.imul(dr,or)|0,mt=Math.imul(dr,vr),pt=pt+Math.imul(st,Sr)|0,rt=rt+Math.imul(st,Or)|0,rt=rt+Math.imul(Ct,Sr)|0,mt=mt+Math.imul(Ct,Or)|0,pt=pt+Math.imul(Vt,yt)|0,rt=rt+Math.imul(Vt,Bt)|0,rt=rt+Math.imul(Qt,yt)|0,mt=mt+Math.imul(Qt,Bt)|0,pt=pt+Math.imul(Wt,yr)|0,rt=rt+Math.imul(Wt,fr)|0,rt=rt+Math.imul(zt,yr)|0,mt=mt+Math.imul(zt,fr)|0,pt=pt+Math.imul(Gt,Nr)|0,rt=rt+Math.imul(Gt,xr)|0,rt=rt+Math.imul(rr,Nr)|0,mt=mt+Math.imul(rr,xr)|0;var wr=(Et+pt|0)+((rt&8191)<<13)|0;Et=(mt+(rt>>>13)|0)+(wr>>>26)|0,wr&=67108863,pt=Math.imul(Tr,or),rt=Math.imul(Tr,vr),rt=rt+Math.imul(gr,or)|0,mt=Math.imul(gr,vr),pt=pt+Math.imul(cr,Sr)|0,rt=rt+Math.imul(cr,Or)|0,rt=rt+Math.imul(dr,Sr)|0,mt=mt+Math.imul(dr,Or)|0,pt=pt+Math.imul(st,yt)|0,rt=rt+Math.imul(st,Bt)|0,rt=rt+Math.imul(Ct,yt)|0,mt=mt+Math.imul(Ct,Bt)|0,pt=pt+Math.imul(Vt,yr)|0,rt=rt+Math.imul(Vt,fr)|0,rt=rt+Math.imul(Qt,yr)|0,mt=mt+Math.imul(Qt,fr)|0,pt=pt+Math.imul(Wt,Nr)|0,rt=rt+Math.imul(Wt,xr)|0,rt=rt+Math.imul(zt,Nr)|0,mt=mt+Math.imul(zt,xr)|0,pt=pt+Math.imul(Gt,Ar)|0,rt=rt+Math.imul(Gt,Br)|0,rt=rt+Math.imul(rr,Ar)|0,mt=mt+Math.imul(rr,Br)|0;var Mr=(Et+pt|0)+((rt&8191)<<13)|0;Et=(mt+(rt>>>13)|0)+(Mr>>>26)|0,Mr&=67108863,pt=Math.imul(Pr,or),rt=Math.imul(Pr,vr),rt=rt+Math.imul(_r,or)|0,mt=Math.imul(_r,vr),pt=pt+Math.imul(Tr,Sr)|0,rt=rt+Math.imul(Tr,Or)|0,rt=rt+Math.imul(gr,Sr)|0,mt=mt+Math.imul(gr,Or)|0,pt=pt+Math.imul(cr,yt)|0,rt=rt+Math.imul(cr,Bt)|0,rt=rt+Math.imul(dr,yt)|0,mt=mt+Math.imul(dr,Bt)|0,pt=pt+Math.imul(st,yr)|0,rt=rt+Math.imul(st,fr)|0,rt=rt+Math.imul(Ct,yr)|0,mt=mt+Math.imul(Ct,fr)|0,pt=pt+Math.imul(Vt,Nr)|0,rt=rt+Math.imul(Vt,xr)|0,rt=rt+Math.imul(Qt,Nr)|0,mt=mt+Math.imul(Qt,xr)|0,pt=pt+Math.imul(Wt,Ar)|0,rt=rt+Math.imul(Wt,Br)|0,rt=rt+Math.imul(zt,Ar)|0,mt=mt+Math.imul(zt,Br)|0,pt=pt+Math.imul(Gt,Dr)|0,rt=rt+Math.imul(Gt,qr)|0,rt=rt+Math.imul(rr,Dr)|0,mt=mt+Math.imul(rr,qr)|0;var Wr=(Et+pt|0)+((rt&8191)<<13)|0;Et=(mt+(rt>>>13)|0)+(Wr>>>26)|0,Wr&=67108863,pt=Math.imul(Kt,or),rt=Math.imul(Kt,vr),rt=rt+Math.imul(er,or)|0,mt=Math.imul(er,vr),pt=pt+Math.imul(Pr,Sr)|0,rt=rt+Math.imul(Pr,Or)|0,rt=rt+Math.imul(_r,Sr)|0,mt=mt+Math.imul(_r,Or)|0,pt=pt+Math.imul(Tr,yt)|0,rt=rt+Math.imul(Tr,Bt)|0,rt=rt+Math.imul(gr,yt)|0,mt=mt+Math.imul(gr,Bt)|0,pt=pt+Math.imul(cr,yr)|0,rt=rt+Math.imul(cr,fr)|0,rt=rt+Math.imul(dr,yr)|0,mt=mt+Math.imul(dr,fr)|0,pt=pt+Math.imul(st,Nr)|0,rt=rt+Math.imul(st,xr)|0,rt=rt+Math.imul(Ct,Nr)|0,mt=mt+Math.imul(Ct,xr)|0,pt=pt+Math.imul(Vt,Ar)|0,rt=rt+Math.imul(Vt,Br)|0,rt=rt+Math.imul(Qt,Ar)|0,mt=mt+Math.imul(Qt,Br)|0,pt=pt+Math.imul(Wt,Dr)|0,rt=rt+Math.imul(Wt,qr)|0,rt=rt+Math.imul(zt,Dr)|0,mt=mt+Math.imul(zt,qr)|0,pt=pt+Math.imul(Gt,$r)|0,rt=rt+Math.imul(Gt,Lr)|0,rt=rt+Math.imul(rr,$r)|0,mt=mt+Math.imul(rr,Lr)|0;var Hr=(Et+pt|0)+((rt&8191)<<13)|0;Et=(mt+(rt>>>13)|0)+(Hr>>>26)|0,Hr&=67108863,pt=Math.imul(tr,or),rt=Math.imul(tr,vr),rt=rt+Math.imul(bt,or)|0,mt=Math.imul(bt,vr),pt=pt+Math.imul(Kt,Sr)|0,rt=rt+Math.imul(Kt,Or)|0,rt=rt+Math.imul(er,Sr)|0,mt=mt+Math.imul(er,Or)|0,pt=pt+Math.imul(Pr,yt)|0,rt=rt+Math.imul(Pr,Bt)|0,rt=rt+Math.imul(_r,yt)|0,mt=mt+Math.imul(_r,Bt)|0,pt=pt+Math.imul(Tr,yr)|0,rt=rt+Math.imul(Tr,fr)|0,rt=rt+Math.imul(gr,yr)|0,mt=mt+Math.imul(gr,fr)|0,pt=pt+Math.imul(cr,Nr)|0,rt=rt+Math.imul(cr,xr)|0,rt=rt+Math.imul(dr,Nr)|0,mt=mt+Math.imul(dr,xr)|0,pt=pt+Math.imul(st,Ar)|0,rt=rt+Math.imul(st,Br)|0,rt=rt+Math.imul(Ct,Ar)|0,mt=mt+Math.imul(Ct,Br)|0,pt=pt+Math.imul(Vt,Dr)|0,rt=rt+Math.imul(Vt,qr)|0,rt=rt+Math.imul(Qt,Dr)|0,mt=mt+Math.imul(Qt,qr)|0,pt=pt+Math.imul(Wt,$r)|0,rt=rt+Math.imul(Wt,Lr)|0,rt=rt+Math.imul(zt,$r)|0,mt=mt+Math.imul(zt,Lr)|0,pt=pt+Math.imul(Gt,Ur)|0,rt=rt+Math.imul(Gt,Jr)|0,rt=rt+Math.imul(rr,Ur)|0,mt=mt+Math.imul(rr,Jr)|0;var Gr=(Et+pt|0)+((rt&8191)<<13)|0;Et=(mt+(rt>>>13)|0)+(Gr>>>26)|0,Gr&=67108863,pt=Math.imul(Ut,or),rt=Math.imul(Ut,vr),rt=rt+Math.imul(Ft,or)|0,mt=Math.imul(Ft,vr),pt=pt+Math.imul(tr,Sr)|0,rt=rt+Math.imul(tr,Or)|0,rt=rt+Math.imul(bt,Sr)|0,mt=mt+Math.imul(bt,Or)|0,pt=pt+Math.imul(Kt,yt)|0,rt=rt+Math.imul(Kt,Bt)|0,rt=rt+Math.imul(er,yt)|0,mt=mt+Math.imul(er,Bt)|0,pt=pt+Math.imul(Pr,yr)|0,rt=rt+Math.imul(Pr,fr)|0,rt=rt+Math.imul(_r,yr)|0,mt=mt+Math.imul(_r,fr)|0,pt=pt+Math.imul(Tr,Nr)|0,rt=rt+Math.imul(Tr,xr)|0,rt=rt+Math.imul(gr,Nr)|0,mt=mt+Math.imul(gr,xr)|0,pt=pt+Math.imul(cr,Ar)|0,rt=rt+Math.imul(cr,Br)|0,rt=rt+Math.imul(dr,Ar)|0,mt=mt+Math.imul(dr,Br)|0,pt=pt+Math.imul(st,Dr)|0,rt=rt+Math.imul(st,qr)|0,rt=rt+Math.imul(Ct,Dr)|0,mt=mt+Math.imul(Ct,qr)|0,pt=pt+Math.imul(Vt,$r)|0,rt=rt+Math.imul(Vt,Lr)|0,rt=rt+Math.imul(Qt,$r)|0,mt=mt+Math.imul(Qt,Lr)|0,pt=pt+Math.imul(Wt,Ur)|0,rt=rt+Math.imul(Wt,Jr)|0,rt=rt+Math.imul(zt,Ur)|0,mt=mt+Math.imul(zt,Jr)|0,pt=pt+Math.imul(Gt,Fr)|0,rt=rt+Math.imul(Gt,Vr)|0,rt=rt+Math.imul(rr,Fr)|0,mt=mt+Math.imul(rr,Vr)|0;var Yr=(Et+pt|0)+((rt&8191)<<13)|0;Et=(mt+(rt>>>13)|0)+(Yr>>>26)|0,Yr&=67108863,pt=Math.imul(Ut,Sr),rt=Math.imul(Ut,Or),rt=rt+Math.imul(Ft,Sr)|0,mt=Math.imul(Ft,Or),pt=pt+Math.imul(tr,yt)|0,rt=rt+Math.imul(tr,Bt)|0,rt=rt+Math.imul(bt,yt)|0,mt=mt+Math.imul(bt,Bt)|0,pt=pt+Math.imul(Kt,yr)|0,rt=rt+Math.imul(Kt,fr)|0,rt=rt+Math.imul(er,yr)|0,mt=mt+Math.imul(er,fr)|0,pt=pt+Math.imul(Pr,Nr)|0,rt=rt+Math.imul(Pr,xr)|0,rt=rt+Math.imul(_r,Nr)|0,mt=mt+Math.imul(_r,xr)|0,pt=pt+Math.imul(Tr,Ar)|0,rt=rt+Math.imul(Tr,Br)|0,rt=rt+Math.imul(gr,Ar)|0,mt=mt+Math.imul(gr,Br)|0,pt=pt+Math.imul(cr,Dr)|0,rt=rt+Math.imul(cr,qr)|0,rt=rt+Math.imul(dr,Dr)|0,mt=mt+Math.imul(dr,qr)|0,pt=pt+Math.imul(st,$r)|0,rt=rt+Math.imul(st,Lr)|0,rt=rt+Math.imul(Ct,$r)|0,mt=mt+Math.imul(Ct,Lr)|0,pt=pt+Math.imul(Vt,Ur)|0,rt=rt+Math.imul(Vt,Jr)|0,rt=rt+Math.imul(Qt,Ur)|0,mt=mt+Math.imul(Qt,Jr)|0,pt=pt+Math.imul(Wt,Fr)|0,rt=rt+Math.imul(Wt,Vr)|0,rt=rt+Math.imul(zt,Fr)|0,mt=mt+Math.imul(zt,Vr)|0;var en=(Et+pt|0)+((rt&8191)<<13)|0;Et=(mt+(rt>>>13)|0)+(en>>>26)|0,en&=67108863,pt=Math.imul(Ut,yt),rt=Math.imul(Ut,Bt),rt=rt+Math.imul(Ft,yt)|0,mt=Math.imul(Ft,Bt),pt=pt+Math.imul(tr,yr)|0,rt=rt+Math.imul(tr,fr)|0,rt=rt+Math.imul(bt,yr)|0,mt=mt+Math.imul(bt,fr)|0,pt=pt+Math.imul(Kt,Nr)|0,rt=rt+Math.imul(Kt,xr)|0,rt=rt+Math.imul(er,Nr)|0,mt=mt+Math.imul(er,xr)|0,pt=pt+Math.imul(Pr,Ar)|0,rt=rt+Math.imul(Pr,Br)|0,rt=rt+Math.imul(_r,Ar)|0,mt=mt+Math.imul(_r,Br)|0,pt=pt+Math.imul(Tr,Dr)|0,rt=rt+Math.imul(Tr,qr)|0,rt=rt+Math.imul(gr,Dr)|0,mt=mt+Math.imul(gr,qr)|0,pt=pt+Math.imul(cr,$r)|0,rt=rt+Math.imul(cr,Lr)|0,rt=rt+Math.imul(dr,$r)|0,mt=mt+Math.imul(dr,Lr)|0,pt=pt+Math.imul(st,Ur)|0,rt=rt+Math.imul(st,Jr)|0,rt=rt+Math.imul(Ct,Ur)|0,mt=mt+Math.imul(Ct,Jr)|0,pt=pt+Math.imul(Vt,Fr)|0,rt=rt+Math.imul(Vt,Vr)|0,rt=rt+Math.imul(Qt,Fr)|0,mt=mt+Math.imul(Qt,Vr)|0;var jr=(Et+pt|0)+((rt&8191)<<13)|0;Et=(mt+(rt>>>13)|0)+(jr>>>26)|0,jr&=67108863,pt=Math.imul(Ut,yr),rt=Math.imul(Ut,fr),rt=rt+Math.imul(Ft,yr)|0,mt=Math.imul(Ft,fr),pt=pt+Math.imul(tr,Nr)|0,rt=rt+Math.imul(tr,xr)|0,rt=rt+Math.imul(bt,Nr)|0,mt=mt+Math.imul(bt,xr)|0,pt=pt+Math.imul(Kt,Ar)|0,rt=rt+Math.imul(Kt,Br)|0,rt=rt+Math.imul(er,Ar)|0,mt=mt+Math.imul(er,Br)|0,pt=pt+Math.imul(Pr,Dr)|0,rt=rt+Math.imul(Pr,qr)|0,rt=rt+Math.imul(_r,Dr)|0,mt=mt+Math.imul(_r,qr)|0,pt=pt+Math.imul(Tr,$r)|0,rt=rt+Math.imul(Tr,Lr)|0,rt=rt+Math.imul(gr,$r)|0,mt=mt+Math.imul(gr,Lr)|0,pt=pt+Math.imul(cr,Ur)|0,rt=rt+Math.imul(cr,Jr)|0,rt=rt+Math.imul(dr,Ur)|0,mt=mt+Math.imul(dr,Jr)|0,pt=pt+Math.imul(st,Fr)|0,rt=rt+Math.imul(st,Vr)|0,rt=rt+Math.imul(Ct,Fr)|0,mt=mt+Math.imul(Ct,Vr)|0;var pn=(Et+pt|0)+((rt&8191)<<13)|0;Et=(mt+(rt>>>13)|0)+(pn>>>26)|0,pn&=67108863,pt=Math.imul(Ut,Nr),rt=Math.imul(Ut,xr),rt=rt+Math.imul(Ft,Nr)|0,mt=Math.imul(Ft,xr),pt=pt+Math.imul(tr,Ar)|0,rt=rt+Math.imul(tr,Br)|0,rt=rt+Math.imul(bt,Ar)|0,mt=mt+Math.imul(bt,Br)|0,pt=pt+Math.imul(Kt,Dr)|0,rt=rt+Math.imul(Kt,qr)|0,rt=rt+Math.imul(er,Dr)|0,mt=mt+Math.imul(er,qr)|0,pt=pt+Math.imul(Pr,$r)|0,rt=rt+Math.imul(Pr,Lr)|0,rt=rt+Math.imul(_r,$r)|0,mt=mt+Math.imul(_r,Lr)|0,pt=pt+Math.imul(Tr,Ur)|0,rt=rt+Math.imul(Tr,Jr)|0,rt=rt+Math.imul(gr,Ur)|0,mt=mt+Math.imul(gr,Jr)|0,pt=pt+Math.imul(cr,Fr)|0,rt=rt+Math.imul(cr,Vr)|0,rt=rt+Math.imul(dr,Fr)|0,mt=mt+Math.imul(dr,Vr)|0;var mn=(Et+pt|0)+((rt&8191)<<13)|0;Et=(mt+(rt>>>13)|0)+(mn>>>26)|0,mn&=67108863,pt=Math.imul(Ut,Ar),rt=Math.imul(Ut,Br),rt=rt+Math.imul(Ft,Ar)|0,mt=Math.imul(Ft,Br),pt=pt+Math.imul(tr,Dr)|0,rt=rt+Math.imul(tr,qr)|0,rt=rt+Math.imul(bt,Dr)|0,mt=mt+Math.imul(bt,qr)|0,pt=pt+Math.imul(Kt,$r)|0,rt=rt+Math.imul(Kt,Lr)|0,rt=rt+Math.imul(er,$r)|0,mt=mt+Math.imul(er,Lr)|0,pt=pt+Math.imul(Pr,Ur)|0,rt=rt+Math.imul(Pr,Jr)|0,rt=rt+Math.imul(_r,Ur)|0,mt=mt+Math.imul(_r,Jr)|0,pt=pt+Math.imul(Tr,Fr)|0,rt=rt+Math.imul(Tr,Vr)|0,rt=rt+Math.imul(gr,Fr)|0,mt=mt+Math.imul(gr,Vr)|0;var hn=(Et+pt|0)+((rt&8191)<<13)|0;Et=(mt+(rt>>>13)|0)+(hn>>>26)|0,hn&=67108863,pt=Math.imul(Ut,Dr),rt=Math.imul(Ut,qr),rt=rt+Math.imul(Ft,Dr)|0,mt=Math.imul(Ft,qr),pt=pt+Math.imul(tr,$r)|0,rt=rt+Math.imul(tr,Lr)|0,rt=rt+Math.imul(bt,$r)|0,mt=mt+Math.imul(bt,Lr)|0,pt=pt+Math.imul(Kt,Ur)|0,rt=rt+Math.imul(Kt,Jr)|0,rt=rt+Math.imul(er,Ur)|0,mt=mt+Math.imul(er,Jr)|0,pt=pt+Math.imul(Pr,Fr)|0,rt=rt+Math.imul(Pr,Vr)|0,rt=rt+Math.imul(_r,Fr)|0,mt=mt+Math.imul(_r,Vr)|0;var fn=(Et+pt|0)+((rt&8191)<<13)|0;Et=(mt+(rt>>>13)|0)+(fn>>>26)|0,fn&=67108863,pt=Math.imul(Ut,$r),rt=Math.imul(Ut,Lr),rt=rt+Math.imul(Ft,$r)|0,mt=Math.imul(Ft,Lr),pt=pt+Math.imul(tr,Ur)|0,rt=rt+Math.imul(tr,Jr)|0,rt=rt+Math.imul(bt,Ur)|0,mt=mt+Math.imul(bt,Jr)|0,pt=pt+Math.imul(Kt,Fr)|0,rt=rt+Math.imul(Kt,Vr)|0,rt=rt+Math.imul(er,Fr)|0,mt=mt+Math.imul(er,Vr)|0;var vn=(Et+pt|0)+((rt&8191)<<13)|0;Et=(mt+(rt>>>13)|0)+(vn>>>26)|0,vn&=67108863,pt=Math.imul(Ut,Ur),rt=Math.imul(Ut,Jr),rt=rt+Math.imul(Ft,Ur)|0,mt=Math.imul(Ft,Jr),pt=pt+Math.imul(tr,Fr)|0,rt=rt+Math.imul(tr,Vr)|0,rt=rt+Math.imul(bt,Fr)|0,mt=mt+Math.imul(bt,Vr)|0;var gn=(Et+pt|0)+((rt&8191)<<13)|0;Et=(mt+(rt>>>13)|0)+(gn>>>26)|0,gn&=67108863,pt=Math.imul(Ut,Fr),rt=Math.imul(Ut,Vr),rt=rt+Math.imul(Ft,Fr)|0,mt=Math.imul(Ft,Vr);var Sn=(Et+pt|0)+((rt&8191)<<13)|0;return Et=(mt+(rt>>>13)|0)+(Sn>>>26)|0,Sn&=67108863,gt[0]=sn,gt[1]=un,gt[2]=yn,gt[3]=br,gt[4]=wr,gt[5]=Mr,gt[6]=Wr,gt[7]=Hr,gt[8]=Gr,gt[9]=Yr,gt[10]=en,gt[11]=jr,gt[12]=pn,gt[13]=mn,gt[14]=hn,gt[15]=fn,gt[16]=vn,gt[17]=gn,gt[18]=Sn,Et!==0&&(gt[19]=Et,it.length++),it};Math.imul||(At=Tt);function Mt(ut,_e,tt){tt.negative=_e.negative^ut.negative,tt.length=ut.length+_e.length;for(var it=0,dt=0,lt=0;lt<tt.length-1;lt++){var gt=dt;dt=0;for(var Et=it&67108863,pt=Math.min(lt,_e.length-1),rt=Math.max(0,lt-ut.length+1);rt<=pt;rt++){var mt=lt-rt,Lt=ut.words[mt]|0,Gt=_e.words[rt]|0,rr=Lt*Gt,ir=rr&67108863;gt=gt+(rr/67108864|0)|0,ir=ir+Et|0,Et=ir&67108863,gt=gt+(ir>>>26)|0,dt+=gt>>>26,gt&=67108863}tt.words[lt]=Et,it=gt,gt=dt}return it!==0?tt.words[lt]=it:tt.length--,tt.strip()}function Dt(ut,_e,tt){var it=new Rt;return it.mulp(ut,_e,tt)}k.prototype.mulTo=function(_e,tt){var it,dt=this.length+_e.length;return this.length===10&&_e.length===10?it=At(this,_e,tt):dt<63?it=Tt(this,_e,tt):dt<1024?it=Mt(this,_e,tt):it=Dt(this,_e,tt),it};function Rt(ut,_e){this.x=ut,this.y=_e}Rt.prototype.makeRBT=function(_e){for(var tt=new Array(_e),it=k.prototype._countBits(_e)-1,dt=0;dt<_e;dt++)tt[dt]=this.revBin(dt,it,_e);return tt},Rt.prototype.revBin=function(_e,tt,it){if(_e===0||_e===it-1)return _e;for(var dt=0,lt=0;lt<tt;lt++)dt|=(_e&1)<<tt-lt-1,_e>>=1;return dt},Rt.prototype.permute=function(_e,tt,it,dt,lt,gt){for(var Et=0;Et<gt;Et++)dt[Et]=tt[_e[Et]],lt[Et]=it[_e[Et]]},Rt.prototype.transform=function(_e,tt,it,dt,lt,gt){this.permute(gt,_e,tt,it,dt,lt);for(var Et=1;Et<lt;Et<<=1)for(var pt=Et<<1,rt=Math.cos(2*Math.PI/pt),mt=Math.sin(2*Math.PI/pt),Lt=0;Lt<lt;Lt+=pt)for(var Gt=rt,rr=mt,ir=0;ir<Et;ir++){var Wt=it[Lt+ir],zt=dt[Lt+ir],wt=it[Lt+ir+Et],Vt=dt[Lt+ir+Et],Qt=Gt*wt-rr*Vt;Vt=Gt*Vt+rr*wt,wt=Qt,it[Lt+ir]=Wt+wt,dt[Lt+ir]=zt+Vt,it[Lt+ir+Et]=Wt-wt,dt[Lt+ir+Et]=zt-Vt,ir!==pt&&(Qt=rt*Gt-mt*rr,rr=rt*rr+mt*Gt,Gt=Qt)}},Rt.prototype.guessLen13b=function(_e,tt){var it=Math.max(tt,_e)|1,dt=it&1,lt=0;for(it=it/2|0;it;it=it>>>1)lt++;return 1<<lt+1+dt},Rt.prototype.conjugate=function(_e,tt,it){if(!(it<=1))for(var dt=0;dt<it/2;dt++){var lt=_e[dt];_e[dt]=_e[it-dt-1],_e[it-dt-1]=lt,lt=tt[dt],tt[dt]=-tt[it-dt-1],tt[it-dt-1]=-lt}},Rt.prototype.normalize13b=function(_e,tt){for(var it=0,dt=0;dt<tt/2;dt++){var lt=Math.round(_e[2*dt+1]/tt)*8192+Math.round(_e[2*dt]/tt)+it;_e[dt]=lt&67108863,lt<67108864?it=0:it=lt/67108864|0}return _e},Rt.prototype.convert13b=function(_e,tt,it,dt){for(var lt=0,gt=0;gt<tt;gt++)lt=lt+(_e[gt]|0),it[2*gt]=lt&8191,lt=lt>>>13,it[2*gt+1]=lt&8191,lt=lt>>>13;for(gt=2*tt;gt<dt;++gt)it[gt]=0;_(lt===0),_((lt&-8192)===0)},Rt.prototype.stub=function(_e){for(var tt=new Array(_e),it=0;it<_e;it++)tt[it]=0;return tt},Rt.prototype.mulp=function(_e,tt,it){var dt=2*this.guessLen13b(_e.length,tt.length),lt=this.makeRBT(dt),gt=this.stub(dt),Et=new Array(dt),pt=new Array(dt),rt=new Array(dt),mt=new Array(dt),Lt=new Array(dt),Gt=new Array(dt),rr=it.words;rr.length=dt,this.convert13b(_e.words,_e.length,Et,dt),this.convert13b(tt.words,tt.length,mt,dt),this.transform(Et,gt,pt,rt,dt,lt),this.transform(mt,gt,Lt,Gt,dt,lt);for(var ir=0;ir<dt;ir++){var Wt=pt[ir]*Lt[ir]-rt[ir]*Gt[ir];rt[ir]=pt[ir]*Gt[ir]+rt[ir]*Lt[ir],pt[ir]=Wt}return this.conjugate(pt,rt,dt),this.transform(pt,rt,rr,gt,dt,lt),this.conjugate(rr,gt,dt),this.normalize13b(rr,dt),it.negative=_e.negative^tt.negative,it.length=_e.length+tt.length,it.strip()},k.prototype.mul=function(_e){var tt=new k(null);return tt.words=new Array(this.length+_e.length),this.mulTo(_e,tt)},k.prototype.mulf=function(_e){var tt=new k(null);return tt.words=new Array(this.length+_e.length),Dt(this,_e,tt)},k.prototype.imul=function(_e){return this.clone().mulTo(_e,this)},k.prototype.imuln=function(_e){_(typeof _e=="number"),_(_e<67108864);for(var tt=0,it=0;it<this.length;it++){var dt=(this.words[it]|0)*_e,lt=(dt&67108863)+(tt&67108863);tt>>=26,tt+=dt/67108864|0,tt+=lt>>>26,this.words[it]=lt&67108863}return tt!==0&&(this.words[it]=tt,this.length++),this},k.prototype.muln=function(_e){return this.clone().imuln(_e)},k.prototype.sqr=function(){return this.mul(this)},k.prototype.isqr=function(){return this.imul(this.clone())},k.prototype.pow=function(_e){var tt=$t(_e);if(tt.length===0)return new k(1);for(var it=this,dt=0;dt<tt.length&&tt[dt]===0;dt++,it=it.sqr());if(++dt<tt.length)for(var lt=it.sqr();dt<tt.length;dt++,lt=lt.sqr())tt[dt]!==0&&(it=it.mul(lt));return it},k.prototype.iushln=function(_e){_(typeof _e=="number"&&_e>=0);var tt=_e%26,it=(_e-tt)/26,dt=67108863>>>26-tt<<26-tt,lt;if(tt!==0){var gt=0;for(lt=0;lt<this.length;lt++){var Et=this.words[lt]&dt,pt=(this.words[lt]|0)-Et<<tt;this.words[lt]=pt|gt,gt=Et>>>26-tt}gt&&(this.words[lt]=gt,this.length++)}if(it!==0){for(lt=this.length-1;lt>=0;lt--)this.words[lt+it]=this.words[lt];for(lt=0;lt<it;lt++)this.words[lt]=0;this.length+=it}return this.strip()},k.prototype.ishln=function(_e){return _(this.negative===0),this.iushln(_e)},k.prototype.iushrn=function(_e,tt,it){_(typeof _e=="number"&&_e>=0);var dt;tt?dt=(tt-tt%26)/26:dt=0;var lt=_e%26,gt=Math.min((_e-lt)/26,this.length),Et=67108863^67108863>>>lt<<lt,pt=it;if(dt-=gt,dt=Math.max(0,dt),pt){for(var rt=0;rt<gt;rt++)pt.words[rt]=this.words[rt];pt.length=gt}if(gt!==0)if(this.length>gt)for(this.length-=gt,rt=0;rt<this.length;rt++)this.words[rt]=this.words[rt+gt];else this.words[0]=0,this.length=1;var mt=0;for(rt=this.length-1;rt>=0&&(mt!==0||rt>=dt);rt--){var Lt=this.words[rt]|0;this.words[rt]=mt<<26-lt|Lt>>>lt,mt=Lt&Et}return pt&&mt!==0&&(pt.words[pt.length++]=mt),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},k.prototype.ishrn=function(_e,tt,it){return _(this.negative===0),this.iushrn(_e,tt,it)},k.prototype.shln=function(_e){return this.clone().ishln(_e)},k.prototype.ushln=function(_e){return this.clone().iushln(_e)},k.prototype.shrn=function(_e){return this.clone().ishrn(_e)},k.prototype.ushrn=function(_e){return this.clone().iushrn(_e)},k.prototype.testn=function(_e){_(typeof _e=="number"&&_e>=0);var tt=_e%26,it=(_e-tt)/26,dt=1<<tt;if(this.length<=it)return!1;var lt=this.words[it];return!!(lt&dt)},k.prototype.imaskn=function(_e){_(typeof _e=="number"&&_e>=0);var tt=_e%26,it=(_e-tt)/26;if(_(this.negative===0,"imaskn works only with positive numbers"),this.length<=it)return this;if(tt!==0&&it++,this.length=Math.min(it,this.length),tt!==0){var dt=67108863^67108863>>>tt<<tt;this.words[this.length-1]&=dt}return this.strip()},k.prototype.maskn=function(_e){return this.clone().imaskn(_e)},k.prototype.iaddn=function(_e){return _(typeof _e=="number"),_(_e<67108864),_e<0?this.isubn(-_e):this.negative!==0?this.length===1&&(this.words[0]|0)<_e?(this.words[0]=_e-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(_e),this.negative=1,this):this._iaddn(_e)},k.prototype._iaddn=function(_e){this.words[0]+=_e;for(var tt=0;tt<this.length&&this.words[tt]>=67108864;tt++)this.words[tt]-=67108864,tt===this.length-1?this.words[tt+1]=1:this.words[tt+1]++;return this.length=Math.max(this.length,tt+1),this},k.prototype.isubn=function(_e){if(_(typeof _e=="number"),_(_e<67108864),_e<0)return this.iaddn(-_e);if(this.negative!==0)return this.negative=0,this.iaddn(_e),this.negative=1,this;if(this.words[0]-=_e,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var tt=0;tt<this.length&&this.words[tt]<0;tt++)this.words[tt]+=67108864,this.words[tt+1]-=1;return this.strip()},k.prototype.addn=function(_e){return this.clone().iaddn(_e)},k.prototype.subn=function(_e){return this.clone().isubn(_e)},k.prototype.iabs=function(){return this.negative=0,this},k.prototype.abs=function(){return this.clone().iabs()},k.prototype._ishlnsubmul=function(_e,tt,it){var dt=_e.length+it,lt;this._expand(dt);var gt,Et=0;for(lt=0;lt<_e.length;lt++){gt=(this.words[lt+it]|0)+Et;var pt=(_e.words[lt]|0)*tt;gt-=pt&67108863,Et=(gt>>26)-(pt/67108864|0),this.words[lt+it]=gt&67108863}for(;lt<this.length-it;lt++)gt=(this.words[lt+it]|0)+Et,Et=gt>>26,this.words[lt+it]=gt&67108863;if(Et===0)return this.strip();for(_(Et===-1),Et=0,lt=0;lt<this.length;lt++)gt=-(this.words[lt]|0)+Et,Et=gt>>26,this.words[lt]=gt&67108863;return this.negative=1,this.strip()},k.prototype._wordDiv=function(_e,tt){var it=this.length-_e.length,dt=this.clone(),lt=_e,gt=lt.words[lt.length-1]|0,Et=this._countBits(gt);it=26-Et,it!==0&&(lt=lt.ushln(it),dt.iushln(it),gt=lt.words[lt.length-1]|0);var pt=dt.length-lt.length,rt;if(tt!=="mod"){rt=new k(null),rt.length=pt+1,rt.words=new Array(rt.length);for(var mt=0;mt<rt.length;mt++)rt.words[mt]=0}var Lt=dt.clone()._ishlnsubmul(lt,1,pt);Lt.negative===0&&(dt=Lt,rt&&(rt.words[pt]=1));for(var Gt=pt-1;Gt>=0;Gt--){var rr=(dt.words[lt.length+Gt]|0)*67108864+(dt.words[lt.length+Gt-1]|0);for(rr=Math.min(rr/gt|0,67108863),dt._ishlnsubmul(lt,rr,Gt);dt.negative!==0;)rr--,dt.negative=0,dt._ishlnsubmul(lt,1,Gt),dt.isZero()||(dt.negative^=1);rt&&(rt.words[Gt]=rr)}return rt&&rt.strip(),dt.strip(),tt!=="div"&&it!==0&&dt.iushrn(it),{div:rt||null,mod:dt}},k.prototype.divmod=function(_e,tt,it){if(_(!_e.isZero()),this.isZero())return{div:new k(0),mod:new k(0)};var dt,lt,gt;return this.negative!==0&&_e.negative===0?(gt=this.neg().divmod(_e,tt),tt!=="mod"&&(dt=gt.div.neg()),tt!=="div"&&(lt=gt.mod.neg(),it&&lt.negative!==0&&lt.iadd(_e)),{div:dt,mod:lt}):this.negative===0&&_e.negative!==0?(gt=this.divmod(_e.neg(),tt),tt!=="mod"&&(dt=gt.div.neg()),{div:dt,mod:gt.mod}):this.negative&_e.negative?(gt=this.neg().divmod(_e.neg(),tt),tt!=="div"&&(lt=gt.mod.neg(),it&&lt.negative!==0&&lt.isub(_e)),{div:gt.div,mod:lt}):_e.length>this.length||this.cmp(_e)<0?{div:new k(0),mod:this}:_e.length===1?tt==="div"?{div:this.divn(_e.words[0]),mod:null}:tt==="mod"?{div:null,mod:new k(this.modn(_e.words[0]))}:{div:this.divn(_e.words[0]),mod:new k(this.modn(_e.words[0]))}:this._wordDiv(_e,tt)},k.prototype.div=function(_e){return this.divmod(_e,"div",!1).div},k.prototype.mod=function(_e){return this.divmod(_e,"mod",!1).mod},k.prototype.umod=function(_e){return this.divmod(_e,"mod",!0).mod},k.prototype.divRound=function(_e){var tt=this.divmod(_e);if(tt.mod.isZero())return tt.div;var it=tt.div.negative!==0?tt.mod.isub(_e):tt.mod,dt=_e.ushrn(1),lt=_e.andln(1),gt=it.cmp(dt);return gt<0||lt===1&&gt===0?tt.div:tt.div.negative!==0?tt.div.isubn(1):tt.div.iaddn(1)},k.prototype.modn=function(_e){_(_e<=67108863);for(var tt=(1<<26)%_e,it=0,dt=this.length-1;dt>=0;dt--)it=(tt*it+(this.words[dt]|0))%_e;return it},k.prototype.idivn=function(_e){_(_e<=67108863);for(var tt=0,it=this.length-1;it>=0;it--){var dt=(this.words[it]|0)+tt*67108864;this.words[it]=dt/_e|0,tt=dt%_e}return this.strip()},k.prototype.divn=function(_e){return this.clone().idivn(_e)},k.prototype.egcd=function(_e){_(_e.negative===0),_(!_e.isZero());var tt=this,it=_e.clone();tt.negative!==0?tt=tt.umod(_e):tt=tt.clone();for(var dt=new k(1),lt=new k(0),gt=new k(0),Et=new k(1),pt=0;tt.isEven()&&it.isEven();)tt.iushrn(1),it.iushrn(1),++pt;for(var rt=it.clone(),mt=tt.clone();!tt.isZero();){for(var Lt=0,Gt=1;!(tt.words[0]&Gt)&&Lt<26;++Lt,Gt<<=1);if(Lt>0)for(tt.iushrn(Lt);Lt-- >0;)(dt.isOdd()||lt.isOdd())&&(dt.iadd(rt),lt.isub(mt)),dt.iushrn(1),lt.iushrn(1);for(var rr=0,ir=1;!(it.words[0]&ir)&&rr<26;++rr,ir<<=1);if(rr>0)for(it.iushrn(rr);rr-- >0;)(gt.isOdd()||Et.isOdd())&&(gt.iadd(rt),Et.isub(mt)),gt.iushrn(1),Et.iushrn(1);tt.cmp(it)>=0?(tt.isub(it),dt.isub(gt),lt.isub(Et)):(it.isub(tt),gt.isub(dt),Et.isub(lt))}return{a:gt,b:Et,gcd:it.iushln(pt)}},k.prototype._invmp=function(_e){_(_e.negative===0),_(!_e.isZero());var tt=this,it=_e.clone();tt.negative!==0?tt=tt.umod(_e):tt=tt.clone();for(var dt=new k(1),lt=new k(0),gt=it.clone();tt.cmpn(1)>0&&it.cmpn(1)>0;){for(var Et=0,pt=1;!(tt.words[0]&pt)&&Et<26;++Et,pt<<=1);if(Et>0)for(tt.iushrn(Et);Et-- >0;)dt.isOdd()&&dt.iadd(gt),dt.iushrn(1);for(var rt=0,mt=1;!(it.words[0]&mt)&&rt<26;++rt,mt<<=1);if(rt>0)for(it.iushrn(rt);rt-- >0;)lt.isOdd()&&lt.iadd(gt),lt.iushrn(1);tt.cmp(it)>=0?(tt.isub(it),dt.isub(lt)):(it.isub(tt),lt.isub(dt))}var Lt;return tt.cmpn(1)===0?Lt=dt:Lt=lt,Lt.cmpn(0)<0&&Lt.iadd(_e),Lt},k.prototype.gcd=function(_e){if(this.isZero())return _e.abs();if(_e.isZero())return this.abs();var tt=this.clone(),it=_e.clone();tt.negative=0,it.negative=0;for(var dt=0;tt.isEven()&&it.isEven();dt++)tt.iushrn(1),it.iushrn(1);do{for(;tt.isEven();)tt.iushrn(1);for(;it.isEven();)it.iushrn(1);var lt=tt.cmp(it);if(lt<0){var gt=tt;tt=it,it=gt}else if(lt===0||it.cmpn(1)===0)break;tt.isub(it)}while(!0);return it.iushln(dt)},k.prototype.invm=function(_e){return this.egcd(_e).a.umod(_e)},k.prototype.isEven=function(){return(this.words[0]&1)===0},k.prototype.isOdd=function(){return(this.words[0]&1)===1},k.prototype.andln=function(_e){return this.words[0]&_e},k.prototype.bincn=function(_e){_(typeof _e=="number");var tt=_e%26,it=(_e-tt)/26,dt=1<<tt;if(this.length<=it)return this._expand(it+1),this.words[it]|=dt,this;for(var lt=dt,gt=it;lt!==0&&gt<this.length;gt++){var Et=this.words[gt]|0;Et+=lt,lt=Et>>>26,Et&=67108863,this.words[gt]=Et}return lt!==0&&(this.words[gt]=lt,this.length++),this},k.prototype.isZero=function(){return this.length===1&&this.words[0]===0},k.prototype.cmpn=function(_e){var tt=_e<0;if(this.negative!==0&&!tt)return-1;if(this.negative===0&&tt)return 1;this.strip();var it;if(this.length>1)it=1;else{tt&&(_e=-_e),_(_e<=67108863,"Number is too big");var dt=this.words[0]|0;it=dt===_e?0:dt<_e?-1:1}return this.negative!==0?-it|0:it},k.prototype.cmp=function(_e){if(this.negative!==0&&_e.negative===0)return-1;if(this.negative===0&&_e.negative!==0)return 1;var tt=this.ucmp(_e);return this.negative!==0?-tt|0:tt},k.prototype.ucmp=function(_e){if(this.length>_e.length)return 1;if(this.length<_e.length)return-1;for(var tt=0,it=this.length-1;it>=0;it--){var dt=this.words[it]|0,lt=_e.words[it]|0;if(dt!==lt){dt<lt?tt=-1:dt>lt&&(tt=1);break}}return tt},k.prototype.gtn=function(_e){return this.cmpn(_e)===1},k.prototype.gt=function(_e){return this.cmp(_e)===1},k.prototype.gten=function(_e){return this.cmpn(_e)>=0},k.prototype.gte=function(_e){return this.cmp(_e)>=0},k.prototype.ltn=function(_e){return this.cmpn(_e)===-1},k.prototype.lt=function(_e){return this.cmp(_e)===-1},k.prototype.lten=function(_e){return this.cmpn(_e)<=0},k.prototype.lte=function(_e){return this.cmp(_e)<=0},k.prototype.eqn=function(_e){return this.cmpn(_e)===0},k.prototype.eq=function(_e){return this.cmp(_e)===0},k.red=function(_e){return new Ot(_e)},k.prototype.toRed=function(_e){return _(!this.red,"Already a number in reduction context"),_(this.negative===0,"red works only with positives"),_e.convertTo(this)._forceRed(_e)},k.prototype.fromRed=function(){return _(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},k.prototype._forceRed=function(_e){return this.red=_e,this},k.prototype.forceRed=function(_e){return _(!this.red,"Already a number in reduction context"),this._forceRed(_e)},k.prototype.redAdd=function(_e){return _(this.red,"redAdd works only with red numbers"),this.red.add(this,_e)},k.prototype.redIAdd=function(_e){return _(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,_e)},k.prototype.redSub=function(_e){return _(this.red,"redSub works only with red numbers"),this.red.sub(this,_e)},k.prototype.redISub=function(_e){return _(this.red,"redISub works only with red numbers"),this.red.isub(this,_e)},k.prototype.redShl=function(_e){return _(this.red,"redShl works only with red numbers"),this.red.shl(this,_e)},k.prototype.redMul=function(_e){return _(this.red,"redMul works only with red numbers"),this.red._verify2(this,_e),this.red.mul(this,_e)},k.prototype.redIMul=function(_e){return _(this.red,"redMul works only with red numbers"),this.red._verify2(this,_e),this.red.imul(this,_e)},k.prototype.redSqr=function(){return _(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},k.prototype.redISqr=function(){return _(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},k.prototype.redSqrt=function(){return _(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},k.prototype.redInvm=function(){return _(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},k.prototype.redNeg=function(){return _(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},k.prototype.redPow=function(_e){return _(this.red&&!_e.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,_e)};var xt={k256:null,p224:null,p192:null,p25519:null};function Jt(ut,_e){this.name=ut,this.p=new k(_e,16),this.n=this.p.bitLength(),this.k=new k(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}Jt.prototype._tmp=function(){var _e=new k(null);return _e.words=new Array(Math.ceil(this.n/13)),_e},Jt.prototype.ireduce=function(_e){var tt=_e,it;do this.split(tt,this.tmp),tt=this.imulK(tt),tt=tt.iadd(this.tmp),it=tt.bitLength();while(it>this.n);var dt=it<this.n?-1:tt.ucmp(this.p);return dt===0?(tt.words[0]=0,tt.length=1):dt>0?tt.isub(this.p):tt.strip!==void 0?tt.strip():tt._strip(),tt},Jt.prototype.split=function(_e,tt){_e.iushrn(this.n,0,tt)},Jt.prototype.imulK=function(_e){return _e.imul(this.k)};function ar(){Jt.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}$(ar,Jt),ar.prototype.split=function(_e,tt){for(var it=4194303,dt=Math.min(_e.length,9),lt=0;lt<dt;lt++)tt.words[lt]=_e.words[lt];if(tt.length=dt,_e.length<=9){_e.words[0]=0,_e.length=1;return}var gt=_e.words[9];for(tt.words[tt.length++]=gt&it,lt=10;lt<_e.length;lt++){var Et=_e.words[lt]|0;_e.words[lt-10]=(Et&it)<<4|gt>>>22,gt=Et}gt>>>=22,_e.words[lt-10]=gt,gt===0&&_e.length>10?_e.length-=10:_e.length-=9},ar.prototype.imulK=function(_e){_e.words[_e.length]=0,_e.words[_e.length+1]=0,_e.length+=2;for(var tt=0,it=0;it<_e.length;it++){var dt=_e.words[it]|0;tt+=dt*977,_e.words[it]=tt&67108863,tt=dt*64+(tt/67108864|0)}return _e.words[_e.length-1]===0&&(_e.length--,_e.words[_e.length-1]===0&&_e.length--),_e};function nr(){Jt.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}$(nr,Jt);function pr(){Jt.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}$(pr,Jt);function ur(){Jt.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}$(ur,Jt),ur.prototype.imulK=function(_e){for(var tt=0,it=0;it<_e.length;it++){var dt=(_e.words[it]|0)*19+tt,lt=dt&67108863;dt>>>=26,_e.words[it]=lt,tt=dt}return tt!==0&&(_e.words[_e.length++]=tt),_e},k._prime=function(_e){if(xt[_e])return xt[_e];var tt;if(_e==="k256")tt=new ar;else if(_e==="p224")tt=new nr;else if(_e==="p192")tt=new pr;else if(_e==="p25519")tt=new ur;else throw new Error("Unknown prime "+_e);return xt[_e]=tt,tt};function Ot(ut){if(typeof ut=="string"){var _e=k._prime(ut);this.m=_e.p,this.prime=_e}else _(ut.gtn(1),"modulus must be greater than 1"),this.m=ut,this.prime=null}Ot.prototype._verify1=function(_e){_(_e.negative===0,"red works only with positives"),_(_e.red,"red works only with red numbers")},Ot.prototype._verify2=function(_e,tt){_((_e.negative|tt.negative)===0,"red works only with positives"),_(_e.red&&_e.red===tt.red,"red works only with red numbers")},Ot.prototype.imod=function(_e){return this.prime?this.prime.ireduce(_e)._forceRed(this):_e.umod(this.m)._forceRed(this)},Ot.prototype.neg=function(_e){return _e.isZero()?_e.clone():this.m.sub(_e)._forceRed(this)},Ot.prototype.add=function(_e,tt){this._verify2(_e,tt);var it=_e.add(tt);return it.cmp(this.m)>=0&&it.isub(this.m),it._forceRed(this)},Ot.prototype.iadd=function(_e,tt){this._verify2(_e,tt);var it=_e.iadd(tt);return it.cmp(this.m)>=0&&it.isub(this.m),it},Ot.prototype.sub=function(_e,tt){this._verify2(_e,tt);var it=_e.sub(tt);return it.cmpn(0)<0&&it.iadd(this.m),it._forceRed(this)},Ot.prototype.isub=function(_e,tt){this._verify2(_e,tt);var it=_e.isub(tt);return it.cmpn(0)<0&&it.iadd(this.m),it},Ot.prototype.shl=function(_e,tt){return this._verify1(_e),this.imod(_e.ushln(tt))},Ot.prototype.imul=function(_e,tt){return this._verify2(_e,tt),this.imod(_e.imul(tt))},Ot.prototype.mul=function(_e,tt){return this._verify2(_e,tt),this.imod(_e.mul(tt))},Ot.prototype.isqr=function(_e){return this.imul(_e,_e.clone())},Ot.prototype.sqr=function(_e){return this.mul(_e,_e)},Ot.prototype.sqrt=function(_e){if(_e.isZero())return _e.clone();var tt=this.m.andln(3);if(_(tt%2===1),tt===3){var it=this.m.add(new k(1)).iushrn(2);return this.pow(_e,it)}for(var dt=this.m.subn(1),lt=0;!dt.isZero()&&dt.andln(1)===0;)lt++,dt.iushrn(1);_(!dt.isZero());var gt=new k(1).toRed(this),Et=gt.redNeg(),pt=this.m.subn(1).iushrn(1),rt=this.m.bitLength();for(rt=new k(2*rt*rt).toRed(this);this.pow(rt,pt).cmp(Et)!==0;)rt.redIAdd(Et);for(var mt=this.pow(rt,dt),Lt=this.pow(_e,dt.addn(1).iushrn(1)),Gt=this.pow(_e,dt),rr=lt;Gt.cmp(gt)!==0;){for(var ir=Gt,Wt=0;ir.cmp(gt)!==0;Wt++)ir=ir.redSqr();_(Wt<rr);var zt=this.pow(mt,new k(1).iushln(rr-Wt-1));Lt=Lt.redMul(zt),mt=zt.redSqr(),Gt=Gt.redMul(mt),rr=Wt}return Lt},Ot.prototype.invm=function(_e){var tt=_e._invmp(this.m);return tt.negative!==0?(tt.negative=0,this.imod(tt).redNeg()):this.imod(tt)},Ot.prototype.pow=function(_e,tt){if(tt.isZero())return new k(1).toRed(this);if(tt.cmpn(1)===0)return _e.clone();var it=4,dt=new Array(1<<it);dt[0]=new k(1).toRed(this),dt[1]=_e;for(var lt=2;lt<dt.length;lt++)dt[lt]=this.mul(dt[lt-1],_e);var gt=dt[0],Et=0,pt=0,rt=tt.bitLength()%26;for(rt===0&&(rt=26),lt=tt.length-1;lt>=0;lt--){for(var mt=tt.words[lt],Lt=rt-1;Lt>=0;Lt--){var Gt=mt>>Lt&1;if(gt!==dt[0]&&(gt=this.sqr(gt)),Gt===0&&Et===0){pt=0;continue}Et<<=1,Et|=Gt,pt++,!(pt!==it&&(lt!==0||Lt!==0))&&(gt=this.mul(gt,dt[Et]),pt=0,Et=0)}rt=26}return gt},Ot.prototype.convertTo=function(_e){var tt=_e.umod(this.m);return tt===_e?tt.clone():tt},Ot.prototype.convertFrom=function(_e){var tt=_e.clone();return tt.red=null,tt},k.mont=function(_e){return new It(_e)};function It(ut){Ot.call(this,ut),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new k(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}$(It,Ot),It.prototype.convertTo=function(_e){return this.imod(_e.ushln(this.shift))},It.prototype.convertFrom=function(_e){var tt=this.imod(_e.mul(this.rinv));return tt.red=null,tt},It.prototype.imul=function(_e,tt){if(_e.isZero()||tt.isZero())return _e.words[0]=0,_e.length=1,_e;var it=_e.imul(tt),dt=it.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),lt=it.isub(dt).iushrn(this.shift),gt=lt;return lt.cmp(this.m)>=0?gt=lt.isub(this.m):lt.cmpn(0)<0&&(gt=lt.iadd(this.m)),gt._forceRed(this)},It.prototype.mul=function(_e,tt){if(_e.isZero()||tt.isZero())return new k(0)._forceRed(this);var it=_e.mul(tt),dt=it.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),lt=it.isub(dt).iushrn(this.shift),gt=lt;return lt.cmp(this.m)>=0?gt=lt.isub(this.m):lt.cmpn(0)<0&&(gt=lt.iadd(this.m)),gt._forceRed(this)},It.prototype.invm=function(_e){var tt=this.imod(_e._invmp(this.m).mul(this.r2));return tt._forceRed(this)}})(a,commonjsGlobal$1)})(bn);var bnExports=bn.exports,BN$2=bnExports,Buffer$8=safeBufferExports$3.Buffer;function withPublic$2(a,c){return Buffer$8.from(a.toRed(BN$2.mont(c.modulus)).redPow(new BN$2(c.publicExponent)).fromRed().toArray())}var withPublic_1=withPublic$2,parseKeys$1=parseAsn1,randomBytes=browserExports,createHash$1=browser$a,mgf$1=mgf$2,xor$1=xor$2,BN$1=bnExports,withPublic$1=withPublic_1,crt$1=browserifyRsa,Buffer$7=safeBufferExports$3.Buffer,publicEncrypt=function a(c,b,_){var $;c.padding?$=c.padding:_?$=1:$=4;var k=parseKeys$1(c),et;if($===4)et=oaep$1(k,b);else if($===1)et=pkcs1$1(k,b,_);else if($===3){if(et=new BN$1(b),et.cmp(k.modulus)>=0)throw new Error("data too long for modulus")}else throw new Error("unknown padding");return _?crt$1(et,k):withPublic$1(et,k)};function oaep$1(a,c){var b=a.modulus.byteLength(),_=c.length,$=createHash$1("sha1").update(Buffer$7.alloc(0)).digest(),k=$.length,et=2*k;if(_>b-et-2)throw new Error("message too long");var nt=Buffer$7.alloc(b-_-et-2),ot=b-k-1,ht=randomBytes(k),vt=xor$1(Buffer$7.concat([$,nt,Buffer$7.alloc(1,1),c],ot),mgf$1(ht,ot)),_t=xor$1(ht,mgf$1(vt,k));return new BN$1(Buffer$7.concat([Buffer$7.alloc(1),_t,vt],b))}function pkcs1$1(a,c,b){var _=c.length,$=a.modulus.byteLength();if(_>$-11)throw new Error("message too long");var k;return b?k=Buffer$7.alloc($-_-3,255):k=nonZero($-_-3),new BN$1(Buffer$7.concat([Buffer$7.from([0,b?1:2]),k,Buffer$7.alloc(1),c],$))}function nonZero(a){for(var c=Buffer$7.allocUnsafe(a),b=0,_=randomBytes(a*2),$=0,k;b<a;)$===_.length&&(_=randomBytes(a*2),$=0),k=_[$++],k&&(c[b++]=k);return c}var parseKeys=parseAsn1,mgf=mgf$2,xor=xor$2,BN=bnExports,crt=browserifyRsa,createHash=browser$a,withPublic=withPublic_1,Buffer$6=safeBufferExports$3.Buffer,privateDecrypt=function a(c,b,_){var $;c.padding?$=c.padding:_?$=1:$=4;var k=parseKeys(c),et=k.modulus.byteLength();if(b.length>et||new BN(b).cmp(k.modulus)>=0)throw new Error("decryption error");var nt;_?nt=withPublic(new BN(b),k):nt=crt(b,k);var ot=Buffer$6.alloc(et-nt.length);if(nt=Buffer$6.concat([ot,nt],et),$===4)return oaep(k,nt);if($===1)return pkcs1(k,nt,_);if($===3)return nt;throw new Error("unknown padding")};function oaep(a,c){var b=a.modulus.byteLength(),_=createHash("sha1").update(Buffer$6.alloc(0)).digest(),$=_.length;if(c[0]!==0)throw new Error("decryption error");var k=c.slice(1,$+1),et=c.slice($+1),nt=xor(k,mgf(et,$)),ot=xor(et,mgf(nt,b-$-1));if(compare(_,ot.slice(0,$)))throw new Error("decryption error");for(var ht=$;ot[ht]===0;)ht++;if(ot[ht++]!==1)throw new Error("decryption error");return ot.slice(ht)}function pkcs1(a,c,b){for(var _=c.slice(0,2),$=2,k=0;c[$++]!==0;)if($>=c.length){k++;break}var et=c.slice(2,$-1);if((_.toString("hex")!=="0002"&&!b||_.toString("hex")!=="0001"&&b)&&k++,et.length<8&&k++,k)throw new Error("decryption error");return c.slice($)}function compare(a,c){a=Buffer$6.from(a),c=Buffer$6.from(c);var b=0,_=a.length;a.length!==c.length&&(b++,_=Math.min(a.length,c.length));for(var $=-1;++$<_;)b+=a[$]^c[$];return b}(function(a){a.publicEncrypt=publicEncrypt,a.privateDecrypt=privateDecrypt,a.privateEncrypt=function(b,_){return a.publicEncrypt(b,_,!0)},a.publicDecrypt=function(b,_){return a.privateDecrypt(b,_,!0)}})(browser$2);var browser$1={};function oldBrowser(){throw new Error(`secure random number generation not supported by this browser
use chrome, FireFox or Internet Explorer 11`)}var safeBuffer=safeBufferExports$3,randombytes=browserExports,Buffer$5=safeBuffer.Buffer,kBufferMaxLength=safeBuffer.kMaxLength,crypto$2=commonjsGlobal$1.crypto||commonjsGlobal$1.msCrypto,kMaxUint32=Math.pow(2,32)-1;function assertOffset(a,c){if(typeof a!="number"||a!==a)throw new TypeError("offset must be a number");if(a>kMaxUint32||a<0)throw new TypeError("offset must be a uint32");if(a>kBufferMaxLength||a>c)throw new RangeError("offset out of range")}function assertSize(a,c,b){if(typeof a!="number"||a!==a)throw new TypeError("size must be a number");if(a>kMaxUint32||a<0)throw new TypeError("size must be a uint32");if(a+c>b||a>kBufferMaxLength)throw new RangeError("buffer too small")}crypto$2&&crypto$2.getRandomValues||!process$1.browser?(browser$1.randomFill=randomFill,browser$1.randomFillSync=randomFillSync):(browser$1.randomFill=oldBrowser,browser$1.randomFillSync=oldBrowser);function randomFill(a,c,b,_){if(!Buffer$5.isBuffer(a)&&!(a instanceof commonjsGlobal$1.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');if(typeof c=="function")_=c,c=0,b=a.length;else if(typeof b=="function")_=b,b=a.length-c;else if(typeof _!="function")throw new TypeError('"cb" argument must be a function');return assertOffset(c,a.length),assertSize(b,c,a.length),actualFill(a,c,b,_)}function actualFill(a,c,b,_){if(process$1.browser){var $=a.buffer,k=new Uint8Array($,c,b);if(crypto$2.getRandomValues(k),_){process$1.nextTick(function(){_(null,a)});return}return a}if(_){randombytes(b,function(nt,ot){if(nt)return _(nt);ot.copy(a,c),_(null,a)});return}var et=randombytes(b);return et.copy(a,c),a}function randomFillSync(a,c,b){if(typeof c>"u"&&(c=0),!Buffer$5.isBuffer(a)&&!(a instanceof commonjsGlobal$1.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');return assertOffset(c,a.length),b===void 0&&(b=a.length-c),assertSize(b,c,a.length),actualFill(a,c,b)}var hasRequiredCryptoBrowserify;function requireCryptoBrowserify(){if(hasRequiredCryptoBrowserify)return cryptoBrowserify;hasRequiredCryptoBrowserify=1,cryptoBrowserify.randomBytes=cryptoBrowserify.rng=cryptoBrowserify.pseudoRandomBytes=cryptoBrowserify.prng=browserExports,cryptoBrowserify.createHash=cryptoBrowserify.Hash=browser$a,cryptoBrowserify.createHmac=cryptoBrowserify.Hmac=browser$9;var a=algos,c=Object.keys(a),b=["sha1","sha224","sha256","sha384","sha512","md5","rmd160"].concat(c);cryptoBrowserify.getHashes=function(){return b};var _=browser$8;cryptoBrowserify.pbkdf2=_.pbkdf2,cryptoBrowserify.pbkdf2Sync=_.pbkdf2Sync;var $=browser$7;cryptoBrowserify.Cipher=$.Cipher,cryptoBrowserify.createCipher=$.createCipher,cryptoBrowserify.Cipheriv=$.Cipheriv,cryptoBrowserify.createCipheriv=$.createCipheriv,cryptoBrowserify.Decipher=$.Decipher,cryptoBrowserify.createDecipher=$.createDecipher,cryptoBrowserify.Decipheriv=$.Decipheriv,cryptoBrowserify.createDecipheriv=$.createDecipheriv,cryptoBrowserify.getCiphers=$.getCiphers,cryptoBrowserify.listCiphers=$.listCiphers;var k=requireBrowser$2();cryptoBrowserify.DiffieHellmanGroup=k.DiffieHellmanGroup,cryptoBrowserify.createDiffieHellmanGroup=k.createDiffieHellmanGroup,cryptoBrowserify.getDiffieHellman=k.getDiffieHellman,cryptoBrowserify.createDiffieHellman=k.createDiffieHellman,cryptoBrowserify.DiffieHellman=k.DiffieHellman;var et=requireBrowser$1();cryptoBrowserify.createSign=et.createSign,cryptoBrowserify.Sign=et.Sign,cryptoBrowserify.createVerify=et.createVerify,cryptoBrowserify.Verify=et.Verify,cryptoBrowserify.createECDH=requireBrowser();var nt=browser$2;cryptoBrowserify.publicEncrypt=nt.publicEncrypt,cryptoBrowserify.privateEncrypt=nt.privateEncrypt,cryptoBrowserify.publicDecrypt=nt.publicDecrypt,cryptoBrowserify.privateDecrypt=nt.privateDecrypt;var ot=browser$1;return cryptoBrowserify.randomFill=ot.randomFill,cryptoBrowserify.randomFillSync=ot.randomFillSync,cryptoBrowserify.createCredentials=function(){throw new Error(["sorry, createCredentials is not implemented yet","we accept pull requests","https://github.com/crypto-browserify/crypto-browserify"].join(`
`))},cryptoBrowserify.constants={DH_CHECK_P_NOT_SAFE_PRIME:2,DH_CHECK_P_NOT_PRIME:1,DH_UNABLE_TO_CHECK_GENERATOR:4,DH_NOT_SUITABLE_GENERATOR:8,NPN_ENABLED:1,ALPN_ENABLED:1,RSA_PKCS1_PADDING:1,RSA_SSLV23_PADDING:2,RSA_NO_PADDING:3,RSA_PKCS1_OAEP_PADDING:4,RSA_X931_PADDING:5,RSA_PKCS1_PSS_PADDING:6,POINT_CONVERSION_COMPRESSED:2,POINT_CONVERSION_UNCOMPRESSED:4,POINT_CONVERSION_HYBRID:6},cryptoBrowserify}function getParamSize(a){var c=(a/8|0)+(a%8===0?0:1);return c}var paramBytesForAlg={ES256:getParamSize(256),ES384:getParamSize(384),ES512:getParamSize(521)};function getParamBytesForAlg$1(a){var c=paramBytesForAlg[a];if(c)return c;throw new Error('Unknown algorithm "'+a+'"')}var paramBytesForAlg_1=getParamBytesForAlg$1,Buffer$4=safeBufferExports$3.Buffer,getParamBytesForAlg=paramBytesForAlg_1,MAX_OCTET=128,CLASS_UNIVERSAL=0,PRIMITIVE_BIT=32,TAG_SEQ=16,TAG_INT=2,ENCODED_TAG_SEQ=TAG_SEQ|PRIMITIVE_BIT|CLASS_UNIVERSAL<<6,ENCODED_TAG_INT=TAG_INT|CLASS_UNIVERSAL<<6;function base64Url(a){return a.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function signatureAsBuffer(a){if(Buffer$4.isBuffer(a))return a;if(typeof a=="string")return Buffer$4.from(a,"base64");throw new TypeError("ECDSA signature must be a Base64 string or a Buffer")}function derToJose(a,c){a=signatureAsBuffer(a);var b=getParamBytesForAlg(c),_=b+1,$=a.length,k=0;if(a[k++]!==ENCODED_TAG_SEQ)throw new Error('Could not find expected "seq"');var et=a[k++];if(et===(MAX_OCTET|1)&&(et=a[k++]),$-k<et)throw new Error('"seq" specified length of "'+et+'", only "'+($-k)+'" remaining');if(a[k++]!==ENCODED_TAG_INT)throw new Error('Could not find expected "int" for "r"');var nt=a[k++];if($-k-2<nt)throw new Error('"r" specified length of "'+nt+'", only "'+($-k-2)+'" available');if(_<nt)throw new Error('"r" specified length of "'+nt+'", max of "'+_+'" is acceptable');var ot=k;if(k+=nt,a[k++]!==ENCODED_TAG_INT)throw new Error('Could not find expected "int" for "s"');var ht=a[k++];if($-k!==ht)throw new Error('"s" specified length of "'+ht+'", expected "'+($-k)+'"');if(_<ht)throw new Error('"s" specified length of "'+ht+'", max of "'+_+'" is acceptable');var vt=k;if(k+=ht,k!==$)throw new Error('Expected to consume entire buffer, but "'+($-k)+'" bytes remain');var _t=b-nt,kt=b-ht,$t=Buffer$4.allocUnsafe(_t+nt+kt+ht);for(k=0;k<_t;++k)$t[k]=0;a.copy($t,k,ot+Math.max(-_t,0),ot+nt),k=b;for(var Tt=k;k<Tt+kt;++k)$t[k]=0;return a.copy($t,k,vt+Math.max(-kt,0),vt+ht),$t=$t.toString("base64"),$t=base64Url($t),$t}function countPadding(a,c,b){for(var _=0;c+_<b&&a[c+_]===0;)++_;var $=a[c+_]>=MAX_OCTET;return $&&--_,_}function joseToDer(a,c){a=signatureAsBuffer(a);var b=getParamBytesForAlg(c),_=a.length;if(_!==b*2)throw new TypeError('"'+c+'" signatures must be "'+b*2+'" bytes, saw "'+_+'"');var $=countPadding(a,0,b),k=countPadding(a,b,a.length),et=b-$,nt=b-k,ot=2+et+1+1+nt,ht=ot<MAX_OCTET,vt=Buffer$4.allocUnsafe((ht?2:3)+ot),_t=0;return vt[_t++]=ENCODED_TAG_SEQ,ht?vt[_t++]=ot:(vt[_t++]=MAX_OCTET|1,vt[_t++]=ot&255),vt[_t++]=ENCODED_TAG_INT,vt[_t++]=et,$<0?(vt[_t++]=0,_t+=a.copy(vt,_t,0,b)):_t+=a.copy(vt,_t,$,b),vt[_t++]=ENCODED_TAG_INT,vt[_t++]=nt,k<0?(vt[_t++]=0,a.copy(vt,_t,b)):a.copy(vt,_t,b+k),vt}var ecdsaSigFormatter={derToJose,joseToDer},bufferEqual=bufferEqualConstantTime,Buffer$3=safeBufferExports$3.Buffer,crypto$1=requireCryptoBrowserify(),formatEcdsa=ecdsaSigFormatter,util$2=util$4,MSG_INVALID_ALGORITHM=`"%s" is not a valid algorithm.
  Supported algorithms are:
  "HS256", "HS384", "HS512", "RS256", "RS384", "RS512", "PS256", "PS384", "PS512", "ES256", "ES384", "ES512" and "none".`,MSG_INVALID_SECRET="secret must be a string or buffer",MSG_INVALID_VERIFIER_KEY="key must be a string or a buffer",MSG_INVALID_SIGNER_KEY="key must be a string, a buffer or an object",supportsKeyObjects=typeof crypto$1.createPublicKey=="function";supportsKeyObjects&&(MSG_INVALID_VERIFIER_KEY+=" or a KeyObject",MSG_INVALID_SECRET+="or a KeyObject");function checkIsPublicKey(a){if(!Buffer$3.isBuffer(a)&&typeof a!="string"&&(!supportsKeyObjects||typeof a!="object"||typeof a.type!="string"||typeof a.asymmetricKeyType!="string"||typeof a.export!="function"))throw typeError(MSG_INVALID_VERIFIER_KEY)}function checkIsPrivateKey(a){if(!Buffer$3.isBuffer(a)&&typeof a!="string"&&typeof a!="object")throw typeError(MSG_INVALID_SIGNER_KEY)}function checkIsSecretKey(a){if(!Buffer$3.isBuffer(a)){if(typeof a=="string")return a;if(!supportsKeyObjects||typeof a!="object"||a.type!=="secret"||typeof a.export!="function")throw typeError(MSG_INVALID_SECRET)}}function fromBase64(a){return a.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function toBase64(a){a=a.toString();var c=4-a.length%4;if(c!==4)for(var b=0;b<c;++b)a+="=";return a.replace(/\-/g,"+").replace(/_/g,"/")}function typeError(a){var c=[].slice.call(arguments,1),b=util$2.format.bind(util$2,a).apply(null,c);return new TypeError(b)}function bufferOrString(a){return Buffer$3.isBuffer(a)||typeof a=="string"}function normalizeInput(a){return bufferOrString(a)||(a=JSON.stringify(a)),a}function createHmacSigner(a){return function(b,_){checkIsSecretKey(_),b=normalizeInput(b);var $=crypto$1.createHmac("sha"+a,_),k=($.update(b),$.digest("base64"));return fromBase64(k)}}function createHmacVerifier(a){return function(b,_,$){var k=createHmacSigner(a)(b,$);return bufferEqual(Buffer$3.from(_),Buffer$3.from(k))}}function createKeySigner(a){return function(b,_){checkIsPrivateKey(_),b=normalizeInput(b);var $=crypto$1.createSign("RSA-SHA"+a),k=($.update(b),$.sign(_,"base64"));return fromBase64(k)}}function createKeyVerifier(a){return function(b,_,$){checkIsPublicKey($),b=normalizeInput(b),_=toBase64(_);var k=crypto$1.createVerify("RSA-SHA"+a);return k.update(b),k.verify($,_,"base64")}}function createPSSKeySigner(a){return function(b,_){checkIsPrivateKey(_),b=normalizeInput(b);var $=crypto$1.createSign("RSA-SHA"+a),k=($.update(b),$.sign({key:_,padding:crypto$1.constants.RSA_PKCS1_PSS_PADDING,saltLength:crypto$1.constants.RSA_PSS_SALTLEN_DIGEST},"base64"));return fromBase64(k)}}function createPSSKeyVerifier(a){return function(b,_,$){checkIsPublicKey($),b=normalizeInput(b),_=toBase64(_);var k=crypto$1.createVerify("RSA-SHA"+a);return k.update(b),k.verify({key:$,padding:crypto$1.constants.RSA_PKCS1_PSS_PADDING,saltLength:crypto$1.constants.RSA_PSS_SALTLEN_DIGEST},_,"base64")}}function createECDSASigner(a){var c=createKeySigner(a);return function(){var _=c.apply(null,arguments);return _=formatEcdsa.derToJose(_,"ES"+a),_}}function createECDSAVerifer(a){var c=createKeyVerifier(a);return function(_,$,k){$=formatEcdsa.joseToDer($,"ES"+a).toString("base64");var et=c(_,$,k);return et}}function createNoneSigner(){return function(){return""}}function createNoneVerifier(){return function(c,b){return b===""}}var jwa$2=function a(c){var b={hs:createHmacSigner,rs:createKeySigner,ps:createPSSKeySigner,es:createECDSASigner,none:createNoneSigner},_={hs:createHmacVerifier,rs:createKeyVerifier,ps:createPSSKeyVerifier,es:createECDSAVerifer,none:createNoneVerifier},$=c.match(/^(RS|PS|ES|HS)(256|384|512)$|^(none)$/i);if(!$)throw typeError(MSG_INVALID_ALGORITHM,c);var k=($[1]||$[3]).toLowerCase(),et=$[2];return{sign:b[k](et),verify:_[k](et)}},Buffer$2=require$$0$2.Buffer,tostring=function a(c){return typeof c=="string"?c:typeof c=="number"||Buffer$2.isBuffer(c)?c.toString():JSON.stringify(c)},Buffer$1=safeBufferExports$3.Buffer,DataStream$1=dataStream,jwa$1=jwa$2,Stream$1=streamBrowserify,toString$2=tostring,util$1=util$4;function base64url(a,c){return Buffer$1.from(a,c).toString("base64").replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function jwsSecuredInput(a,c,b){b=b||"utf8";var _=base64url(toString$2(a),"binary"),$=base64url(toString$2(c),b);return util$1.format("%s.%s",_,$)}function jwsSign(a){var c=a.header,b=a.payload,_=a.secret||a.privateKey,$=a.encoding,k=jwa$1(c.alg),et=jwsSecuredInput(c,b,$),nt=k.sign(et,_);return util$1.format("%s.%s",et,nt)}function SignStream$1(a){var c=a.secret||a.privateKey||a.key,b=new DataStream$1(c);this.readable=!0,this.header=a.header,this.encoding=a.encoding,this.secret=this.privateKey=this.key=b,this.payload=new DataStream$1(a.payload),this.secret.once("close",(function(){!this.payload.writable&&this.readable&&this.sign()}).bind(this)),this.payload.once("close",(function(){!this.secret.writable&&this.readable&&this.sign()}).bind(this))}util$1.inherits(SignStream$1,Stream$1);SignStream$1.prototype.sign=function a(){try{var c=jwsSign({header:this.header,payload:this.payload.buffer,secret:this.secret.buffer,encoding:this.encoding});return this.emit("done",c),this.emit("data",c),this.emit("end"),this.readable=!1,c}catch(b){this.readable=!1,this.emit("error",b),this.emit("close")}};SignStream$1.sign=jwsSign;var signStream=SignStream$1,Buffer=safeBufferExports$3.Buffer,DataStream=dataStream,jwa=jwa$2,Stream=streamBrowserify,toString$1=tostring,util=util$4,JWS_REGEX=/^[a-zA-Z0-9\-_]+?\.[a-zA-Z0-9\-_]+?\.([a-zA-Z0-9\-_]+)?$/;function isObject$6(a){return Object.prototype.toString.call(a)==="[object Object]"}function safeJsonParse(a){if(isObject$6(a))return a;try{return JSON.parse(a)}catch{return}}function headerFromJWS(a){var c=a.split(".",1)[0];return safeJsonParse(Buffer.from(c,"base64").toString("binary"))}function securedInputFromJWS(a){return a.split(".",2).join(".")}function signatureFromJWS(a){return a.split(".")[2]}function payloadFromJWS(a,c){c=c||"utf8";var b=a.split(".")[1];return Buffer.from(b,"base64").toString(c)}function isValidJws(a){return JWS_REGEX.test(a)&&!!headerFromJWS(a)}function jwsVerify(a,c,b){if(!c){var _=new Error("Missing algorithm parameter for jws.verify");throw _.code="MISSING_ALGORITHM",_}a=toString$1(a);var $=signatureFromJWS(a),k=securedInputFromJWS(a),et=jwa(c);return et.verify(k,$,b)}function jwsDecode(a,c){if(c=c||{},a=toString$1(a),!isValidJws(a))return null;var b=headerFromJWS(a);if(!b)return null;var _=payloadFromJWS(a);return(b.typ==="JWT"||c.json)&&(_=JSON.parse(_,c.encoding)),{header:b,payload:_,signature:signatureFromJWS(a)}}function VerifyStream$1(a){a=a||{};var c=a.secret||a.publicKey||a.key,b=new DataStream(c);this.readable=!0,this.algorithm=a.algorithm,this.encoding=a.encoding,this.secret=this.publicKey=this.key=b,this.signature=new DataStream(a.signature),this.secret.once("close",(function(){!this.signature.writable&&this.readable&&this.verify()}).bind(this)),this.signature.once("close",(function(){!this.secret.writable&&this.readable&&this.verify()}).bind(this))}util.inherits(VerifyStream$1,Stream);VerifyStream$1.prototype.verify=function a(){try{var c=jwsVerify(this.signature.buffer,this.algorithm,this.key.buffer),b=jwsDecode(this.signature.buffer,this.encoding);return this.emit("done",c,b),this.emit("data",c),this.emit("end"),this.readable=!1,c}catch(_){this.readable=!1,this.emit("error",_),this.emit("close")}};VerifyStream$1.decode=jwsDecode;VerifyStream$1.isValid=isValidJws;VerifyStream$1.verify=jwsVerify;var verifyStream=VerifyStream$1,SignStream=signStream,VerifyStream=verifyStream,ALGORITHMS=["HS256","HS384","HS512","RS256","RS384","RS512","PS256","PS384","PS512","ES256","ES384","ES512"];jws$3.ALGORITHMS=ALGORITHMS;jws$3.sign=SignStream.sign;jws$3.verify=VerifyStream.verify;jws$3.decode=VerifyStream.decode;jws$3.isValid=VerifyStream.isValid;jws$3.createSign=function a(c){return new SignStream(c)};jws$3.createVerify=function a(c){return new VerifyStream(c)};var jws$2=jws$3,decode$1=function(a,c){c=c||{};var b=jws$2.decode(a,c);if(!b)return null;var _=b.payload;if(typeof _=="string")try{var $=JSON.parse(_);$!==null&&typeof $=="object"&&(_=$)}catch{}return c.complete===!0?{header:b.header,payload:_,signature:b.signature}:_},JsonWebTokenError$3=function(a,c){Error.call(this,a),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor),this.name="JsonWebTokenError",this.message=a,c&&(this.inner=c)};JsonWebTokenError$3.prototype=Object.create(Error.prototype);JsonWebTokenError$3.prototype.constructor=JsonWebTokenError$3;var JsonWebTokenError_1=JsonWebTokenError$3,JsonWebTokenError$2=JsonWebTokenError_1,NotBeforeError$1=function(a,c){JsonWebTokenError$2.call(this,a),this.name="NotBeforeError",this.date=c};NotBeforeError$1.prototype=Object.create(JsonWebTokenError$2.prototype);NotBeforeError$1.prototype.constructor=NotBeforeError$1;var NotBeforeError_1=NotBeforeError$1,JsonWebTokenError$1=JsonWebTokenError_1,TokenExpiredError$1=function(a,c){JsonWebTokenError$1.call(this,a),this.name="TokenExpiredError",this.expiredAt=c};TokenExpiredError$1.prototype=Object.create(JsonWebTokenError$1.prototype);TokenExpiredError$1.prototype.constructor=TokenExpiredError$1;var TokenExpiredError_1=TokenExpiredError$1,s=1e3,m$1=s*60,h=m$1*60,d=h*24,w$1=d*7,y$1=d*365.25,ms$1=function(a,c){c=c||{};var b=typeof a;if(b==="string"&&a.length>0)return parse$1(a);if(b==="number"&&isFinite(a))return c.long?fmtLong(a):fmtShort(a);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(a))};function parse$1(a){if(a=String(a),!(a.length>100)){var c=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(a);if(c){var b=parseFloat(c[1]),_=(c[2]||"ms").toLowerCase();switch(_){case"years":case"year":case"yrs":case"yr":case"y":return b*y$1;case"weeks":case"week":case"w":return b*w$1;case"days":case"day":case"d":return b*d;case"hours":case"hour":case"hrs":case"hr":case"h":return b*h;case"minutes":case"minute":case"mins":case"min":case"m":return b*m$1;case"seconds":case"second":case"secs":case"sec":case"s":return b*s;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return b;default:return}}}}function fmtShort(a){var c=Math.abs(a);return c>=d?Math.round(a/d)+"d":c>=h?Math.round(a/h)+"h":c>=m$1?Math.round(a/m$1)+"m":c>=s?Math.round(a/s)+"s":a+"ms"}function fmtLong(a){var c=Math.abs(a);return c>=d?plural(a,c,d,"day"):c>=h?plural(a,c,h,"hour"):c>=m$1?plural(a,c,m$1,"minute"):c>=s?plural(a,c,s,"second"):a+" ms"}function plural(a,c,b,_){var $=c>=b*1.5;return Math.round(a/b)+" "+_+($?"s":"")}var ms=ms$1,timespan$2=function(a,c){var b=c||Math.floor(Date.now()/1e3);if(typeof a=="string"){var _=ms(a);return typeof _>"u"?void 0:Math.floor(b+_/1e3)}else return typeof a=="number"?b+a:void 0},semver$1={exports:{}};(function(a,c){var b={};c=a.exports=Tr;var _;typeof process$1=="object"&&b&&b.NODE_DEBUG&&/\bsemver\b/i.test(b.NODE_DEBUG)?_=function(){var br=Array.prototype.slice.call(arguments,0);br.unshift("SEMVER"),console.log.apply(console,br)}:_=function(){},c.SEMVER_SPEC_VERSION="2.0.0";var $=256,k=Number.MAX_SAFE_INTEGER||9007199254740991,et=16,nt=c.re=[],ot=c.src=[],ht=0,vt=ht++;ot[vt]="0|[1-9]\\d*";var _t=ht++;ot[_t]="[0-9]+";var kt=ht++;ot[kt]="\\d*[a-zA-Z-][a-zA-Z0-9-]*";var $t=ht++;ot[$t]="("+ot[vt]+")\\.("+ot[vt]+")\\.("+ot[vt]+")";var Tt=ht++;ot[Tt]="("+ot[_t]+")\\.("+ot[_t]+")\\.("+ot[_t]+")";var At=ht++;ot[At]="(?:"+ot[vt]+"|"+ot[kt]+")";var Mt=ht++;ot[Mt]="(?:"+ot[_t]+"|"+ot[kt]+")";var Dt=ht++;ot[Dt]="(?:-("+ot[At]+"(?:\\."+ot[At]+")*))";var Rt=ht++;ot[Rt]="(?:-?("+ot[Mt]+"(?:\\."+ot[Mt]+")*))";var xt=ht++;ot[xt]="[0-9A-Za-z-]+";var Jt=ht++;ot[Jt]="(?:\\+("+ot[xt]+"(?:\\."+ot[xt]+")*))";var ar=ht++,nr="v?"+ot[$t]+ot[Dt]+"?"+ot[Jt]+"?";ot[ar]="^"+nr+"$";var pr="[v=\\s]*"+ot[Tt]+ot[Rt]+"?"+ot[Jt]+"?",ur=ht++;ot[ur]="^"+pr+"$";var Ot=ht++;ot[Ot]="((?:<|>)?=?)";var It=ht++;ot[It]=ot[_t]+"|x|X|\\*";var ut=ht++;ot[ut]=ot[vt]+"|x|X|\\*";var _e=ht++;ot[_e]="[v=\\s]*("+ot[ut]+")(?:\\.("+ot[ut]+")(?:\\.("+ot[ut]+")(?:"+ot[Dt]+")?"+ot[Jt]+"?)?)?";var tt=ht++;ot[tt]="[v=\\s]*("+ot[It]+")(?:\\.("+ot[It]+")(?:\\.("+ot[It]+")(?:"+ot[Rt]+")?"+ot[Jt]+"?)?)?";var it=ht++;ot[it]="^"+ot[Ot]+"\\s*"+ot[_e]+"$";var dt=ht++;ot[dt]="^"+ot[Ot]+"\\s*"+ot[tt]+"$";var lt=ht++;ot[lt]="(?:^|[^\\d])(\\d{1,"+et+"})(?:\\.(\\d{1,"+et+"}))?(?:\\.(\\d{1,"+et+"}))?(?:$|[^\\d])";var gt=ht++;ot[gt]="(?:~>?)";var Et=ht++;ot[Et]="(\\s*)"+ot[gt]+"\\s+",nt[Et]=new RegExp(ot[Et],"g");var pt="$1~",rt=ht++;ot[rt]="^"+ot[gt]+ot[_e]+"$";var mt=ht++;ot[mt]="^"+ot[gt]+ot[tt]+"$";var Lt=ht++;ot[Lt]="(?:\\^)";var Gt=ht++;ot[Gt]="(\\s*)"+ot[Lt]+"\\s+",nt[Gt]=new RegExp(ot[Gt],"g");var rr="$1^",ir=ht++;ot[ir]="^"+ot[Lt]+ot[_e]+"$";var Wt=ht++;ot[Wt]="^"+ot[Lt]+ot[tt]+"$";var zt=ht++;ot[zt]="^"+ot[Ot]+"\\s*("+pr+")$|^$";var wt=ht++;ot[wt]="^"+ot[Ot]+"\\s*("+nr+")$|^$";var Vt=ht++;ot[Vt]="(\\s*)"+ot[Ot]+"\\s*("+pr+"|"+ot[_e]+")",nt[Vt]=new RegExp(ot[Vt],"g");var Qt="$1$2$3",Nt=ht++;ot[Nt]="^\\s*("+ot[_e]+")\\s+-\\s+("+ot[_e]+")\\s*$";var st=ht++;ot[st]="^\\s*("+ot[tt]+")\\s+-\\s+("+ot[tt]+")\\s*$";var Ct=ht++;ot[Ct]="(<|>)?=?\\s*\\*";for(var qt=0;qt<ht;qt++)_(qt,ot[qt]),nt[qt]||(nt[qt]=new RegExp(ot[qt]));c.parse=cr;function cr(br,wr){if((!wr||typeof wr!="object")&&(wr={loose:!!wr,includePrerelease:!1}),br instanceof Tr)return br;if(typeof br!="string"||br.length>$)return null;var Mr=wr.loose?nt[ur]:nt[ar];if(!Mr.test(br))return null;try{return new Tr(br,wr)}catch{return null}}c.valid=dr;function dr(br,wr){var Mr=cr(br,wr);return Mr?Mr.version:null}c.clean=Er;function Er(br,wr){var Mr=cr(br.trim().replace(/^[=v]+/,""),wr);return Mr?Mr.version:null}c.SemVer=Tr;function Tr(br,wr){if((!wr||typeof wr!="object")&&(wr={loose:!!wr,includePrerelease:!1}),br instanceof Tr){if(br.loose===wr.loose)return br;br=br.version}else if(typeof br!="string")throw new TypeError("Invalid Version: "+br);if(br.length>$)throw new TypeError("version is longer than "+$+" characters");if(!(this instanceof Tr))return new Tr(br,wr);_("SemVer",br,wr),this.options=wr,this.loose=!!wr.loose;var Mr=br.trim().match(wr.loose?nt[ur]:nt[ar]);if(!Mr)throw new TypeError("Invalid Version: "+br);if(this.raw=br,this.major=+Mr[1],this.minor=+Mr[2],this.patch=+Mr[3],this.major>k||this.major<0)throw new TypeError("Invalid major version");if(this.minor>k||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>k||this.patch<0)throw new TypeError("Invalid patch version");Mr[4]?this.prerelease=Mr[4].split(".").map(function(Wr){if(/^[0-9]+$/.test(Wr)){var Hr=+Wr;if(Hr>=0&&Hr<k)return Hr}return Wr}):this.prerelease=[],this.build=Mr[5]?Mr[5].split("."):[],this.format()}Tr.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version},Tr.prototype.toString=function(){return this.version},Tr.prototype.compare=function(br){return _("SemVer.compare",this.version,this.options,br),br instanceof Tr||(br=new Tr(br,this.options)),this.compareMain(br)||this.comparePre(br)},Tr.prototype.compareMain=function(br){return br instanceof Tr||(br=new Tr(br,this.options)),_r(this.major,br.major)||_r(this.minor,br.minor)||_r(this.patch,br.patch)},Tr.prototype.comparePre=function(br){if(br instanceof Tr||(br=new Tr(br,this.options)),this.prerelease.length&&!br.prerelease.length)return-1;if(!this.prerelease.length&&br.prerelease.length)return 1;if(!this.prerelease.length&&!br.prerelease.length)return 0;var wr=0;do{var Mr=this.prerelease[wr],Wr=br.prerelease[wr];if(_("prerelease compare",wr,Mr,Wr),Mr===void 0&&Wr===void 0)return 0;if(Wr===void 0)return 1;if(Mr===void 0)return-1;if(Mr===Wr)continue;return _r(Mr,Wr)}while(++wr)},Tr.prototype.inc=function(br,wr){switch(br){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",wr);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",wr);break;case"prepatch":this.prerelease.length=0,this.inc("patch",wr),this.inc("pre",wr);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",wr),this.inc("pre",wr);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{for(var Mr=this.prerelease.length;--Mr>=0;)typeof this.prerelease[Mr]=="number"&&(this.prerelease[Mr]++,Mr=-2);Mr===-1&&this.prerelease.push(0)}wr&&(this.prerelease[0]===wr?isNaN(this.prerelease[1])&&(this.prerelease=[wr,0]):this.prerelease=[wr,0]);break;default:throw new Error("invalid increment argument: "+br)}return this.format(),this.raw=this.version,this},c.inc=gr;function gr(br,wr,Mr,Wr){typeof Mr=="string"&&(Wr=Mr,Mr=void 0);try{return new Tr(br,Mr).inc(wr,Wr).version}catch{return null}}c.diff=Zr;function Zr(br,wr){if(vr(br,wr))return null;var Mr=cr(br),Wr=cr(wr),Hr="";if(Mr.prerelease.length||Wr.prerelease.length){Hr="pre";var Gr="prerelease"}for(var Yr in Mr)if((Yr==="major"||Yr==="minor"||Yr==="patch")&&Mr[Yr]!==Wr[Yr])return Hr+Yr;return Gr}c.compareIdentifiers=_r;var Pr=/^[0-9]+$/;function _r(br,wr){var Mr=Pr.test(br),Wr=Pr.test(wr);return Mr&&Wr&&(br=+br,wr=+wr),br===wr?0:Mr&&!Wr?-1:Wr&&!Mr?1:br<wr?-1:1}c.rcompareIdentifiers=St;function St(br,wr){return _r(wr,br)}c.major=Kt;function Kt(br,wr){return new Tr(br,wr).major}c.minor=er;function er(br,wr){return new Tr(br,wr).minor}c.patch=kr;function kr(br,wr){return new Tr(br,wr).patch}c.compare=tr;function tr(br,wr,Mr){return new Tr(br,Mr).compare(new Tr(wr,Mr))}c.compareLoose=bt;function bt(br,wr){return tr(br,wr,!0)}c.rcompare=jt;function jt(br,wr,Mr){return tr(wr,br,Mr)}c.sort=Ut;function Ut(br,wr){return br.sort(function(Mr,Wr){return c.compare(Mr,Wr,wr)})}c.rsort=Ft;function Ft(br,wr){return br.sort(function(Mr,Wr){return c.rcompare(Mr,Wr,wr)})}c.gt=Ht;function Ht(br,wr,Mr){return tr(br,wr,Mr)>0}c.lt=or;function or(br,wr,Mr){return tr(br,wr,Mr)<0}c.eq=vr;function vr(br,wr,Mr){return tr(br,wr,Mr)===0}c.neq=Ir;function Ir(br,wr,Mr){return tr(br,wr,Mr)!==0}c.gte=Sr;function Sr(br,wr,Mr){return tr(br,wr,Mr)>=0}c.lte=Or;function Or(br,wr,Mr){return tr(br,wr,Mr)<=0}c.cmp=Cr;function Cr(br,wr,Mr,Wr){switch(wr){case"===":return typeof br=="object"&&(br=br.version),typeof Mr=="object"&&(Mr=Mr.version),br===Mr;case"!==":return typeof br=="object"&&(br=br.version),typeof Mr=="object"&&(Mr=Mr.version),br!==Mr;case"":case"=":case"==":return vr(br,Mr,Wr);case"!=":return Ir(br,Mr,Wr);case">":return Ht(br,Mr,Wr);case">=":return Sr(br,Mr,Wr);case"<":return or(br,Mr,Wr);case"<=":return Or(br,Mr,Wr);default:throw new TypeError("Invalid operator: "+wr)}}c.Comparator=yt;function yt(br,wr){if((!wr||typeof wr!="object")&&(wr={loose:!!wr,includePrerelease:!1}),br instanceof yt){if(br.loose===!!wr.loose)return br;br=br.value}if(!(this instanceof yt))return new yt(br,wr);_("comparator",br,wr),this.options=wr,this.loose=!!wr.loose,this.parse(br),this.semver===Bt?this.value="":this.value=this.operator+this.semver.version,_("comp",this)}var Bt={};yt.prototype.parse=function(br){var wr=this.options.loose?nt[zt]:nt[wt],Mr=br.match(wr);if(!Mr)throw new TypeError("Invalid comparator: "+br);this.operator=Mr[1],this.operator==="="&&(this.operator=""),Mr[2]?this.semver=new Tr(Mr[2],this.options.loose):this.semver=Bt},yt.prototype.toString=function(){return this.value},yt.prototype.test=function(br){return _("Comparator.test",br,this.options.loose),this.semver===Bt?!0:(typeof br=="string"&&(br=new Tr(br,this.options)),Cr(br,this.operator,this.semver,this.options))},yt.prototype.intersects=function(br,wr){if(!(br instanceof yt))throw new TypeError("a Comparator is required");(!wr||typeof wr!="object")&&(wr={loose:!!wr,includePrerelease:!1});var Mr;if(this.operator==="")return Mr=new Zt(br.value,wr),$r(this.value,Mr,wr);if(br.operator==="")return Mr=new Zt(this.value,wr),$r(br.semver,Mr,wr);var Wr=(this.operator===">="||this.operator===">")&&(br.operator===">="||br.operator===">"),Hr=(this.operator==="<="||this.operator==="<")&&(br.operator==="<="||br.operator==="<"),Gr=this.semver.version===br.semver.version,Yr=(this.operator===">="||this.operator==="<=")&&(br.operator===">="||br.operator==="<="),en=Cr(this.semver,"<",br.semver,wr)&&(this.operator===">="||this.operator===">")&&(br.operator==="<="||br.operator==="<"),jr=Cr(this.semver,">",br.semver,wr)&&(this.operator==="<="||this.operator==="<")&&(br.operator===">="||br.operator===">");return Wr||Hr||Gr&&Yr||en||jr},c.Range=Zt;function Zt(br,wr){if((!wr||typeof wr!="object")&&(wr={loose:!!wr,includePrerelease:!1}),br instanceof Zt)return br.loose===!!wr.loose&&br.includePrerelease===!!wr.includePrerelease?br:new Zt(br.raw,wr);if(br instanceof yt)return new Zt(br.value,wr);if(!(this instanceof Zt))return new Zt(br,wr);if(this.options=wr,this.loose=!!wr.loose,this.includePrerelease=!!wr.includePrerelease,this.raw=br,this.set=br.split(/\s*\|\|\s*/).map(function(Mr){return this.parseRange(Mr.trim())},this).filter(function(Mr){return Mr.length}),!this.set.length)throw new TypeError("Invalid SemVer Range: "+br);this.format()}Zt.prototype.format=function(){return this.range=this.set.map(function(br){return br.join(" ").trim()}).join("||").trim(),this.range},Zt.prototype.toString=function(){return this.range},Zt.prototype.parseRange=function(br){var wr=this.options.loose;br=br.trim();var Mr=wr?nt[st]:nt[Nt];br=br.replace(Mr,qr),_("hyphen replace",br),br=br.replace(nt[Vt],Qt),_("comparator trim",br,nt[Vt]),br=br.replace(nt[Et],pt),br=br.replace(nt[Gt],rr),br=br.split(/\s+/).join(" ");var Wr=wr?nt[zt]:nt[wt],Hr=br.split(" ").map(function(Gr){return fr(Gr,this.options)},this).join(" ").split(/\s+/);return this.options.loose&&(Hr=Hr.filter(function(Gr){return!!Gr.match(Wr)})),Hr=Hr.map(function(Gr){return new yt(Gr,this.options)},this),Hr},Zt.prototype.intersects=function(br,wr){if(!(br instanceof Zt))throw new TypeError("a Range is required");return this.set.some(function(Mr){return Mr.every(function(Wr){return br.set.some(function(Hr){return Hr.every(function(Gr){return Wr.intersects(Gr,wr)})})})})},c.toComparators=yr;function yr(br,wr){return new Zt(br,wr).set.map(function(Mr){return Mr.map(function(Wr){return Wr.value}).join(" ").trim().split(" ")})}function fr(br,wr){return _("comp",br,wr),br=Xr(br,wr),_("caret",br),br=Nr(br,wr),_("tildes",br),br=Br(br,wr),_("xrange",br),br=Dr(br,wr),_("stars",br),br}function Rr(br){return!br||br.toLowerCase()==="x"||br==="*"}function Nr(br,wr){return br.trim().split(/\s+/).map(function(Mr){return xr(Mr,wr)}).join(" ")}function xr(br,wr){var Mr=wr.loose?nt[mt]:nt[rt];return br.replace(Mr,function(Wr,Hr,Gr,Yr,en){_("tilde",br,Wr,Hr,Gr,Yr,en);var jr;return Rr(Hr)?jr="":Rr(Gr)?jr=">="+Hr+".0.0 <"+(+Hr+1)+".0.0":Rr(Yr)?jr=">="+Hr+"."+Gr+".0 <"+Hr+"."+(+Gr+1)+".0":en?(_("replaceTilde pr",en),jr=">="+Hr+"."+Gr+"."+Yr+"-"+en+" <"+Hr+"."+(+Gr+1)+".0"):jr=">="+Hr+"."+Gr+"."+Yr+" <"+Hr+"."+(+Gr+1)+".0",_("tilde return",jr),jr})}function Xr(br,wr){return br.trim().split(/\s+/).map(function(Mr){return Ar(Mr,wr)}).join(" ")}function Ar(br,wr){_("caret",br,wr);var Mr=wr.loose?nt[Wt]:nt[ir];return br.replace(Mr,function(Wr,Hr,Gr,Yr,en){_("caret",br,Wr,Hr,Gr,Yr,en);var jr;return Rr(Hr)?jr="":Rr(Gr)?jr=">="+Hr+".0.0 <"+(+Hr+1)+".0.0":Rr(Yr)?Hr==="0"?jr=">="+Hr+"."+Gr+".0 <"+Hr+"."+(+Gr+1)+".0":jr=">="+Hr+"."+Gr+".0 <"+(+Hr+1)+".0.0":en?(_("replaceCaret pr",en),Hr==="0"?Gr==="0"?jr=">="+Hr+"."+Gr+"."+Yr+"-"+en+" <"+Hr+"."+Gr+"."+(+Yr+1):jr=">="+Hr+"."+Gr+"."+Yr+"-"+en+" <"+Hr+"."+(+Gr+1)+".0":jr=">="+Hr+"."+Gr+"."+Yr+"-"+en+" <"+(+Hr+1)+".0.0"):(_("no pr"),Hr==="0"?Gr==="0"?jr=">="+Hr+"."+Gr+"."+Yr+" <"+Hr+"."+Gr+"."+(+Yr+1):jr=">="+Hr+"."+Gr+"."+Yr+" <"+Hr+"."+(+Gr+1)+".0":jr=">="+Hr+"."+Gr+"."+Yr+" <"+(+Hr+1)+".0.0"),_("caret return",jr),jr})}function Br(br,wr){return _("replaceXRanges",br,wr),br.split(/\s+/).map(function(Mr){return rn(Mr,wr)}).join(" ")}function rn(br,wr){br=br.trim();var Mr=wr.loose?nt[dt]:nt[it];return br.replace(Mr,function(Wr,Hr,Gr,Yr,en,jr){_("xRange",br,Wr,Hr,Gr,Yr,en,jr);var pn=Rr(Gr),mn=pn||Rr(Yr),hn=mn||Rr(en),fn=hn;return Hr==="="&&fn&&(Hr=""),pn?Hr===">"||Hr==="<"?Wr="<0.0.0":Wr="*":Hr&&fn?(mn&&(Yr=0),en=0,Hr===">"?(Hr=">=",mn?(Gr=+Gr+1,Yr=0,en=0):(Yr=+Yr+1,en=0)):Hr==="<="&&(Hr="<",mn?Gr=+Gr+1:Yr=+Yr+1),Wr=Hr+Gr+"."+Yr+"."+en):mn?Wr=">="+Gr+".0.0 <"+(+Gr+1)+".0.0":hn&&(Wr=">="+Gr+"."+Yr+".0 <"+Gr+"."+(+Yr+1)+".0"),_("xRange return",Wr),Wr})}function Dr(br,wr){return _("replaceStars",br,wr),br.trim().replace(nt[Ct],"")}function qr(br,wr,Mr,Wr,Hr,Gr,Yr,en,jr,pn,mn,hn,fn){return Rr(Mr)?wr="":Rr(Wr)?wr=">="+Mr+".0.0":Rr(Hr)?wr=">="+Mr+"."+Wr+".0":wr=">="+wr,Rr(jr)?en="":Rr(pn)?en="<"+(+jr+1)+".0.0":Rr(mn)?en="<"+jr+"."+(+pn+1)+".0":hn?en="<="+jr+"."+pn+"."+mn+"-"+hn:en="<="+en,(wr+" "+en).trim()}Zt.prototype.test=function(br){if(!br)return!1;typeof br=="string"&&(br=new Tr(br,this.options));for(var wr=0;wr<this.set.length;wr++)if(nn(this.set[wr],br,this.options))return!0;return!1};function nn(br,wr,Mr){for(var Wr=0;Wr<br.length;Wr++)if(!br[Wr].test(wr))return!1;if(wr.prerelease.length&&!Mr.includePrerelease){for(Wr=0;Wr<br.length;Wr++)if(_(br[Wr].semver),br[Wr].semver!==Bt&&br[Wr].semver.prerelease.length>0){var Hr=br[Wr].semver;if(Hr.major===wr.major&&Hr.minor===wr.minor&&Hr.patch===wr.patch)return!0}return!1}return!0}c.satisfies=$r;function $r(br,wr,Mr){try{wr=new Zt(wr,Mr)}catch{return!1}return wr.test(br)}c.maxSatisfying=Lr;function Lr(br,wr,Mr){var Wr=null,Hr=null;try{var Gr=new Zt(wr,Mr)}catch{return null}return br.forEach(function(Yr){Gr.test(Yr)&&(!Wr||Hr.compare(Yr)===-1)&&(Wr=Yr,Hr=new Tr(Wr,Mr))}),Wr}c.minSatisfying=Qr;function Qr(br,wr,Mr){var Wr=null,Hr=null;try{var Gr=new Zt(wr,Mr)}catch{return null}return br.forEach(function(Yr){Gr.test(Yr)&&(!Wr||Hr.compare(Yr)===1)&&(Wr=Yr,Hr=new Tr(Wr,Mr))}),Wr}c.minVersion=Ur;function Ur(br,wr){br=new Zt(br,wr);var Mr=new Tr("0.0.0");if(br.test(Mr)||(Mr=new Tr("0.0.0-0"),br.test(Mr)))return Mr;Mr=null;for(var Wr=0;Wr<br.set.length;++Wr){var Hr=br.set[Wr];Hr.forEach(function(Gr){var Yr=new Tr(Gr.semver.version);switch(Gr.operator){case">":Yr.prerelease.length===0?Yr.patch++:Yr.prerelease.push(0),Yr.raw=Yr.format();case"":case">=":(!Mr||Ht(Mr,Yr))&&(Mr=Yr);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: "+Gr.operator)}})}return Mr&&br.test(Mr)?Mr:null}c.validRange=Jr;function Jr(br,wr){try{return new Zt(br,wr).range||"*"}catch{return null}}c.ltr=cn;function cn(br,wr,Mr){return Vr(br,wr,"<",Mr)}c.gtr=Fr;function Fr(br,wr,Mr){return Vr(br,wr,">",Mr)}c.outside=Vr;function Vr(br,wr,Mr,Wr){br=new Tr(br,Wr),wr=new Zt(wr,Wr);var Hr,Gr,Yr,en,jr;switch(Mr){case">":Hr=Ht,Gr=Or,Yr=or,en=">",jr=">=";break;case"<":Hr=or,Gr=Sr,Yr=Ht,en="<",jr="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if($r(br,wr,Wr))return!1;for(var pn=0;pn<wr.set.length;++pn){var mn=wr.set[pn],hn=null,fn=null;if(mn.forEach(function(vn){vn.semver===Bt&&(vn=new yt(">=0.0.0")),hn=hn||vn,fn=fn||vn,Hr(vn.semver,hn.semver,Wr)?hn=vn:Yr(vn.semver,fn.semver,Wr)&&(fn=vn)}),hn.operator===en||hn.operator===jr||(!fn.operator||fn.operator===en)&&Gr(br,fn.semver))return!1;if(fn.operator===jr&&Yr(br,fn.semver))return!1}return!0}c.prerelease=sn;function sn(br,wr){var Mr=cr(br,wr);return Mr&&Mr.prerelease.length?Mr.prerelease:null}c.intersects=un;function un(br,wr,Mr){return br=new Zt(br,Mr),wr=new Zt(wr,Mr),br.intersects(wr)}c.coerce=yn;function yn(br){if(br instanceof Tr)return br;if(typeof br!="string")return null;var wr=br.match(nt[lt]);return wr==null?null:cr(wr[1]+"."+(wr[2]||"0")+"."+(wr[3]||"0"))}})(semver$1,semver$1.exports);var semverExports=semver$1.exports,semver=semverExports,psSupported=semver.satisfies(process$1.version,"^6.12.0 || >=8.0.0"),JsonWebTokenError=JsonWebTokenError_1,NotBeforeError=NotBeforeError_1,TokenExpiredError=TokenExpiredError_1,decode=decode$1,timespan$1=timespan$2,PS_SUPPORTED$1=psSupported,jws$1=jws$3,PUB_KEY_ALGS=["RS256","RS384","RS512","ES256","ES384","ES512"],RSA_KEY_ALGS=["RS256","RS384","RS512"],HS_ALGS=["HS256","HS384","HS512"];PS_SUPPORTED$1&&(PUB_KEY_ALGS.splice(3,0,"PS256","PS384","PS512"),RSA_KEY_ALGS.splice(3,0,"PS256","PS384","PS512"));var verify=function(a,c,b,_){typeof b=="function"&&!_&&(_=b,b={}),b||(b={}),b=Object.assign({},b);var $;if(_?$=_:$=function(vt,_t){if(vt)throw vt;return _t},b.clockTimestamp&&typeof b.clockTimestamp!="number")return $(new JsonWebTokenError("clockTimestamp must be a number"));if(b.nonce!==void 0&&(typeof b.nonce!="string"||b.nonce.trim()===""))return $(new JsonWebTokenError("nonce must be a non-empty string"));var k=b.clockTimestamp||Math.floor(Date.now()/1e3);if(!a)return $(new JsonWebTokenError("jwt must be provided"));if(typeof a!="string")return $(new JsonWebTokenError("jwt must be a string"));var et=a.split(".");if(et.length!==3)return $(new JsonWebTokenError("jwt malformed"));var nt;try{nt=decode(a,{complete:!0})}catch(vt){return $(vt)}if(!nt)return $(new JsonWebTokenError("invalid token"));var ot=nt.header,ht;if(typeof c=="function"){if(!_)return $(new JsonWebTokenError("verify must be called asynchronous if secret or public key is provided as a callback"));ht=c}else ht=function(vt,_t){return _t(null,c)};return ht(ot,function(vt,_t){if(vt)return $(new JsonWebTokenError("error in secret or public key callback: "+vt.message));var kt=et[2].trim()!=="";if(!kt&&_t)return $(new JsonWebTokenError("jwt signature is required"));if(kt&&!_t)return $(new JsonWebTokenError("secret or public key must be provided"));if(!kt&&!b.algorithms&&(b.algorithms=["none"]),b.algorithms||(b.algorithms=~_t.toString().indexOf("BEGIN CERTIFICATE")||~_t.toString().indexOf("BEGIN PUBLIC KEY")?PUB_KEY_ALGS:~_t.toString().indexOf("BEGIN RSA PUBLIC KEY")?RSA_KEY_ALGS:HS_ALGS),!~b.algorithms.indexOf(nt.header.alg))return $(new JsonWebTokenError("invalid algorithm"));var $t;try{$t=jws$1.verify(a,nt.header.alg,_t)}catch(ar){return $(ar)}if(!$t)return $(new JsonWebTokenError("invalid signature"));var Tt=nt.payload;if(typeof Tt.nbf<"u"&&!b.ignoreNotBefore){if(typeof Tt.nbf!="number")return $(new JsonWebTokenError("invalid nbf value"));if(Tt.nbf>k+(b.clockTolerance||0))return $(new NotBeforeError("jwt not active",new Date(Tt.nbf*1e3)))}if(typeof Tt.exp<"u"&&!b.ignoreExpiration){if(typeof Tt.exp!="number")return $(new JsonWebTokenError("invalid exp value"));if(k>=Tt.exp+(b.clockTolerance||0))return $(new TokenExpiredError("jwt expired",new Date(Tt.exp*1e3)))}if(b.audience){var At=Array.isArray(b.audience)?b.audience:[b.audience],Mt=Array.isArray(Tt.aud)?Tt.aud:[Tt.aud],Dt=Mt.some(function(ar){return At.some(function(nr){return nr instanceof RegExp?nr.test(ar):nr===ar})});if(!Dt)return $(new JsonWebTokenError("jwt audience invalid. expected: "+At.join(" or ")))}if(b.issuer){var Rt=typeof b.issuer=="string"&&Tt.iss!==b.issuer||Array.isArray(b.issuer)&&b.issuer.indexOf(Tt.iss)===-1;if(Rt)return $(new JsonWebTokenError("jwt issuer invalid. expected: "+b.issuer))}if(b.subject&&Tt.sub!==b.subject)return $(new JsonWebTokenError("jwt subject invalid. expected: "+b.subject));if(b.jwtid&&Tt.jti!==b.jwtid)return $(new JsonWebTokenError("jwt jwtid invalid. expected: "+b.jwtid));if(b.nonce&&Tt.nonce!==b.nonce)return $(new JsonWebTokenError("jwt nonce invalid. expected: "+b.nonce));if(b.maxAge){if(typeof Tt.iat!="number")return $(new JsonWebTokenError("iat required when maxAge is specified"));var xt=timespan$1(b.maxAge,Tt.iat);if(typeof xt>"u")return $(new JsonWebTokenError('"maxAge" should be a number of seconds or string representing a timespan eg: "1d", "20h", 60'));if(k>=xt+(b.clockTolerance||0))return $(new TokenExpiredError("maxAge exceeded",new Date(xt*1e3)))}if(b.complete===!0){var Jt=nt.signature;return $(null,{header:ot,payload:Tt,signature:Jt})}return $(null,Tt)})},INFINITY$2=1/0,MAX_SAFE_INTEGER=9007199254740991,MAX_INTEGER$2=17976931348623157e292,NAN$2=NaN,argsTag="[object Arguments]",funcTag="[object Function]",genTag="[object GeneratorFunction]",stringTag$1="[object String]",symbolTag$2="[object Symbol]",reTrim$2=/^\s+|\s+$/g,reIsBadHex$2=/^[-+]0x[0-9a-f]+$/i,reIsBinary$2=/^0b[01]+$/i,reIsOctal$2=/^0o[0-7]+$/i,reIsUint=/^(?:0|[1-9]\d*)$/,freeParseInt$2=parseInt;function arrayMap(a,c){for(var b=-1,_=a?a.length:0,$=Array(_);++b<_;)$[b]=c(a[b],b,a);return $}function baseFindIndex(a,c,b,_){for(var $=a.length,k=b+(_?1:-1);_?k--:++k<$;)if(c(a[k],k,a))return k;return-1}function baseIndexOf(a,c,b){if(c!==c)return baseFindIndex(a,baseIsNaN,b);for(var _=b-1,$=a.length;++_<$;)if(a[_]===c)return _;return-1}function baseIsNaN(a){return a!==a}function baseTimes(a,c){for(var b=-1,_=Array(a);++b<a;)_[b]=c(b);return _}function baseValues(a,c){return arrayMap(c,function(b){return a[b]})}function overArg$1(a,c){return function(b){return a(c(b))}}var objectProto$6=Object.prototype,hasOwnProperty$1=objectProto$6.hasOwnProperty,objectToString$6=objectProto$6.toString,propertyIsEnumerable=objectProto$6.propertyIsEnumerable,nativeKeys=overArg$1(Object.keys,Object),nativeMax=Math.max;function arrayLikeKeys(a,c){var b=isArray$3(a)||isArguments(a)?baseTimes(a.length,String):[],_=b.length,$=!!_;for(var k in a)(c||hasOwnProperty$1.call(a,k))&&!($&&(k=="length"||isIndex(k,_)))&&b.push(k);return b}function baseKeys(a){if(!isPrototype(a))return nativeKeys(a);var c=[];for(var b in Object(a))hasOwnProperty$1.call(a,b)&&b!="constructor"&&c.push(b);return c}function isIndex(a,c){return c=c??MAX_SAFE_INTEGER,!!c&&(typeof a=="number"||reIsUint.test(a))&&a>-1&&a%1==0&&a<c}function isPrototype(a){var c=a&&a.constructor,b=typeof c=="function"&&c.prototype||objectProto$6;return a===b}function includes$1(a,c,b,_){a=isArrayLike(a)?a:values(a),b=b&&!_?toInteger$2(b):0;var $=a.length;return b<0&&(b=nativeMax($+b,0)),isString$3(a)?b<=$&&a.indexOf(c,b)>-1:!!$&&baseIndexOf(a,c,b)>-1}function isArguments(a){return isArrayLikeObject(a)&&hasOwnProperty$1.call(a,"callee")&&(!propertyIsEnumerable.call(a,"callee")||objectToString$6.call(a)==argsTag)}var isArray$3=Array.isArray;function isArrayLike(a){return a!=null&&isLength(a.length)&&!isFunction$1(a)}function isArrayLikeObject(a){return isObjectLike$6(a)&&isArrayLike(a)}function isFunction$1(a){var c=isObject$5(a)?objectToString$6.call(a):"";return c==funcTag||c==genTag}function isLength(a){return typeof a=="number"&&a>-1&&a%1==0&&a<=MAX_SAFE_INTEGER}function isObject$5(a){var c=typeof a;return!!a&&(c=="object"||c=="function")}function isObjectLike$6(a){return!!a&&typeof a=="object"}function isString$3(a){return typeof a=="string"||!isArray$3(a)&&isObjectLike$6(a)&&objectToString$6.call(a)==stringTag$1}function isSymbol$2(a){return typeof a=="symbol"||isObjectLike$6(a)&&objectToString$6.call(a)==symbolTag$2}function toFinite$2(a){if(!a)return a===0?a:0;if(a=toNumber$2(a),a===INFINITY$2||a===-INFINITY$2){var c=a<0?-1:1;return c*MAX_INTEGER$2}return a===a?a:0}function toInteger$2(a){var c=toFinite$2(a),b=c%1;return c===c?b?c-b:c:0}function toNumber$2(a){if(typeof a=="number")return a;if(isSymbol$2(a))return NAN$2;if(isObject$5(a)){var c=typeof a.valueOf=="function"?a.valueOf():a;a=isObject$5(c)?c+"":c}if(typeof a!="string")return a===0?a:+a;a=a.replace(reTrim$2,"");var b=reIsBinary$2.test(a);return b||reIsOctal$2.test(a)?freeParseInt$2(a.slice(2),b?2:8):reIsBadHex$2.test(a)?NAN$2:+a}function keys$1(a){return isArrayLike(a)?arrayLikeKeys(a):baseKeys(a)}function values(a){return a?baseValues(a,keys$1(a)):[]}var lodash_includes=includes$1,boolTag="[object Boolean]",objectProto$5=Object.prototype,objectToString$5=objectProto$5.toString;function isBoolean$1(a){return a===!0||a===!1||isObjectLike$5(a)&&objectToString$5.call(a)==boolTag}function isObjectLike$5(a){return!!a&&typeof a=="object"}var lodash_isboolean=isBoolean$1,INFINITY$1=1/0,MAX_INTEGER$1=17976931348623157e292,NAN$1=NaN,symbolTag$1="[object Symbol]",reTrim$1=/^\s+|\s+$/g,reIsBadHex$1=/^[-+]0x[0-9a-f]+$/i,reIsBinary$1=/^0b[01]+$/i,reIsOctal$1=/^0o[0-7]+$/i,freeParseInt$1=parseInt,objectProto$4=Object.prototype,objectToString$4=objectProto$4.toString;function isInteger$1(a){return typeof a=="number"&&a==toInteger$1(a)}function isObject$4(a){var c=typeof a;return!!a&&(c=="object"||c=="function")}function isObjectLike$4(a){return!!a&&typeof a=="object"}function isSymbol$1(a){return typeof a=="symbol"||isObjectLike$4(a)&&objectToString$4.call(a)==symbolTag$1}function toFinite$1(a){if(!a)return a===0?a:0;if(a=toNumber$1(a),a===INFINITY$1||a===-INFINITY$1){var c=a<0?-1:1;return c*MAX_INTEGER$1}return a===a?a:0}function toInteger$1(a){var c=toFinite$1(a),b=c%1;return c===c?b?c-b:c:0}function toNumber$1(a){if(typeof a=="number")return a;if(isSymbol$1(a))return NAN$1;if(isObject$4(a)){var c=typeof a.valueOf=="function"?a.valueOf():a;a=isObject$4(c)?c+"":c}if(typeof a!="string")return a===0?a:+a;a=a.replace(reTrim$1,"");var b=reIsBinary$1.test(a);return b||reIsOctal$1.test(a)?freeParseInt$1(a.slice(2),b?2:8):reIsBadHex$1.test(a)?NAN$1:+a}var lodash_isinteger=isInteger$1,numberTag="[object Number]",objectProto$3=Object.prototype,objectToString$3=objectProto$3.toString;function isObjectLike$3(a){return!!a&&typeof a=="object"}function isNumber$2(a){return typeof a=="number"||isObjectLike$3(a)&&objectToString$3.call(a)==numberTag}var lodash_isnumber=isNumber$2,objectTag="[object Object]";function isHostObject(a){var c=!1;if(a!=null&&typeof a.toString!="function")try{c=!!(a+"")}catch{}return c}function overArg(a,c){return function(b){return a(c(b))}}var funcProto=Function.prototype,objectProto$2=Object.prototype,funcToString=funcProto.toString,hasOwnProperty=objectProto$2.hasOwnProperty,objectCtorString=funcToString.call(Object),objectToString$2=objectProto$2.toString,getPrototype=overArg(Object.getPrototypeOf,Object);function isObjectLike$2(a){return!!a&&typeof a=="object"}function isPlainObject$2(a){if(!isObjectLike$2(a)||objectToString$2.call(a)!=objectTag||isHostObject(a))return!1;var c=getPrototype(a);if(c===null)return!0;var b=hasOwnProperty.call(c,"constructor")&&c.constructor;return typeof b=="function"&&b instanceof b&&funcToString.call(b)==objectCtorString}var lodash_isplainobject=isPlainObject$2,stringTag="[object String]",objectProto$1=Object.prototype,objectToString$1=objectProto$1.toString,isArray$2=Array.isArray;function isObjectLike$1(a){return!!a&&typeof a=="object"}function isString$2(a){return typeof a=="string"||!isArray$2(a)&&isObjectLike$1(a)&&objectToString$1.call(a)==stringTag}var lodash_isstring=isString$2,FUNC_ERROR_TEXT="Expected a function",INFINITY=1/0,MAX_INTEGER=17976931348623157e292,NAN=NaN,symbolTag="[object Symbol]",reTrim=/^\s+|\s+$/g,reIsBadHex=/^[-+]0x[0-9a-f]+$/i,reIsBinary=/^0b[01]+$/i,reIsOctal=/^0o[0-7]+$/i,freeParseInt=parseInt,objectProto=Object.prototype,objectToString=objectProto.toString;function before(a,c){var b;if(typeof c!="function")throw new TypeError(FUNC_ERROR_TEXT);return a=toInteger(a),function(){return--a>0&&(b=c.apply(this,arguments)),a<=1&&(c=void 0),b}}function once$1(a){return before(2,a)}function isObject$3(a){var c=typeof a;return!!a&&(c=="object"||c=="function")}function isObjectLike(a){return!!a&&typeof a=="object"}function isSymbol(a){return typeof a=="symbol"||isObjectLike(a)&&objectToString.call(a)==symbolTag}function toFinite(a){if(!a)return a===0?a:0;if(a=toNumber(a),a===INFINITY||a===-INFINITY){var c=a<0?-1:1;return c*MAX_INTEGER}return a===a?a:0}function toInteger(a){var c=toFinite(a),b=c%1;return c===c?b?c-b:c:0}function toNumber(a){if(typeof a=="number")return a;if(isSymbol(a))return NAN;if(isObject$3(a)){var c=typeof a.valueOf=="function"?a.valueOf():a;a=isObject$3(c)?c+"":c}if(typeof a!="string")return a===0?a:+a;a=a.replace(reTrim,"");var b=reIsBinary.test(a);return b||reIsOctal.test(a)?freeParseInt(a.slice(2),b?2:8):reIsBadHex.test(a)?NAN:+a}var lodash_once=once$1,timespan=timespan$2,PS_SUPPORTED=psSupported,jws=jws$3,includes=lodash_includes,isBoolean=lodash_isboolean,isInteger=lodash_isinteger,isNumber$1=lodash_isnumber,isPlainObject$1=lodash_isplainobject,isString$1=lodash_isstring,once=lodash_once,SUPPORTED_ALGS=["RS256","RS384","RS512","ES256","ES384","ES512","HS256","HS384","HS512","none"];PS_SUPPORTED&&SUPPORTED_ALGS.splice(3,0,"PS256","PS384","PS512");var sign_options_schema={expiresIn:{isValid:function(a){return isInteger(a)||isString$1(a)&&a},message:'"expiresIn" should be a number of seconds or string representing a timespan'},notBefore:{isValid:function(a){return isInteger(a)||isString$1(a)&&a},message:'"notBefore" should be a number of seconds or string representing a timespan'},audience:{isValid:function(a){return isString$1(a)||Array.isArray(a)},message:'"audience" must be a string or array'},algorithm:{isValid:includes.bind(null,SUPPORTED_ALGS),message:'"algorithm" must be a valid string enum value'},header:{isValid:isPlainObject$1,message:'"header" must be an object'},encoding:{isValid:isString$1,message:'"encoding" must be a string'},issuer:{isValid:isString$1,message:'"issuer" must be a string'},subject:{isValid:isString$1,message:'"subject" must be a string'},jwtid:{isValid:isString$1,message:'"jwtid" must be a string'},noTimestamp:{isValid:isBoolean,message:'"noTimestamp" must be a boolean'},keyid:{isValid:isString$1,message:'"keyid" must be a string'},mutatePayload:{isValid:isBoolean,message:'"mutatePayload" must be a boolean'}},registered_claims_schema={iat:{isValid:isNumber$1,message:'"iat" should be a number of seconds'},exp:{isValid:isNumber$1,message:'"exp" should be a number of seconds'},nbf:{isValid:isNumber$1,message:'"nbf" should be a number of seconds'}};function validate(a,c,b,_){if(!isPlainObject$1(b))throw new Error('Expected "'+_+'" to be a plain object.');Object.keys(b).forEach(function($){var k=a[$];if(!k){if(!c)throw new Error('"'+$+'" is not allowed in "'+_+'"');return}if(!k.isValid(b[$]))throw new Error(k.message)})}function validateOptions(a){return validate(sign_options_schema,!1,a,"options")}function validatePayload(a){return validate(registered_claims_schema,!0,a,"payload")}var options_to_payload={audience:"aud",issuer:"iss",subject:"sub",jwtid:"jti"},options_for_objects=["expiresIn","notBefore","noTimestamp","audience","issuer","subject","jwtid"],sign=function(a,c,b,_){typeof b=="function"?(_=b,b={}):b=b||{};var $=typeof a=="object"&&!Buffer$O.isBuffer(a),k=Object.assign({alg:b.algorithm||"HS256",typ:$?"JWT":void 0,kid:b.keyid},b.header);function et(vt){if(_)return _(vt);throw vt}if(!c&&b.algorithm!=="none")return et(new Error("secretOrPrivateKey must have a value"));if(typeof a>"u")return et(new Error("payload is required"));if($){try{validatePayload(a)}catch(vt){return et(vt)}b.mutatePayload||(a=Object.assign({},a))}else{var nt=options_for_objects.filter(function(vt){return typeof b[vt]<"u"});if(nt.length>0)return et(new Error("invalid "+nt.join(",")+" option for "+typeof a+" payload"))}if(typeof a.exp<"u"&&typeof b.expiresIn<"u")return et(new Error('Bad "options.expiresIn" option the payload already has an "exp" property.'));if(typeof a.nbf<"u"&&typeof b.notBefore<"u")return et(new Error('Bad "options.notBefore" option the payload already has an "nbf" property.'));try{validateOptions(b)}catch(vt){return et(vt)}var ot=a.iat||Math.floor(Date.now()/1e3);if(b.noTimestamp?delete a.iat:$&&(a.iat=ot),typeof b.notBefore<"u"){try{a.nbf=timespan(b.notBefore,ot)}catch(vt){return et(vt)}if(typeof a.nbf>"u")return et(new Error('"notBefore" should be a number of seconds or string representing a timespan eg: "1d", "20h", 60'))}if(typeof b.expiresIn<"u"&&typeof a=="object"){try{a.exp=timespan(b.expiresIn,ot)}catch(vt){return et(vt)}if(typeof a.exp>"u")return et(new Error('"expiresIn" should be a number of seconds or string representing a timespan eg: "1d", "20h", 60'))}Object.keys(options_to_payload).forEach(function(vt){var _t=options_to_payload[vt];if(typeof b[vt]<"u"){if(typeof a[_t]<"u")return et(new Error('Bad "options.'+vt+'" option. The payload already has an "'+_t+'" property.'));a[_t]=b[vt]}});var ht=b.encoding||"utf8";if(typeof _=="function")_=_&&once(_),jws.createSign({header:k,privateKey:c,payload:a,encoding:ht}).once("error",_).once("done",function(vt){_(null,vt)});else return jws.sign({header:k,payload:a,secret:c,encoding:ht})},jsonwebtoken={decode:decode$1,verify,sign,JsonWebTokenError:JsonWebTokenError_1,NotBeforeError:NotBeforeError_1,TokenExpiredError:TokenExpiredError_1},define_process_env_default={},__createBinding=commonjsGlobal$1&&commonjsGlobal$1.__createBinding||(Object.create?function(a,c,b,_){_===void 0&&(_=b),Object.defineProperty(a,_,{enumerable:!0,get:function(){return c[b]}})}:function(a,c,b,_){_===void 0&&(_=b),a[_]=c[b]}),__setModuleDefault=commonjsGlobal$1&&commonjsGlobal$1.__setModuleDefault||(Object.create?function(a,c){Object.defineProperty(a,"default",{enumerable:!0,value:c})}:function(a,c){a.default=c}),__importStar=commonjsGlobal$1&&commonjsGlobal$1.__importStar||function(a){if(a&&a.__esModule)return a;var c={};if(a!=null)for(var b in a)b!=="default"&&Object.prototype.hasOwnProperty.call(a,b)&&__createBinding(c,a,b);return __setModuleDefault(c,a),c};Object.defineProperty(AccessToken$1,"__esModule",{value:!0});AccessToken$1.TokenVerifier=AccessToken$1.AccessToken=void 0;const jwt=__importStar(jsonwebtoken),defaultTTL=6*60*60;class AccessToken{constructor(c,b,_){if(c||(c=define_process_env_default.LIVEKIT_API_KEY),b||(b=define_process_env_default.LIVEKIT_API_SECRET),!c||!b)throw Error("api-key and api-secret must be set");this.apiKey=c,this.apiSecret=b,this.grants={},this.identity=_==null?void 0:_.identity,this.ttl=(_==null?void 0:_.ttl)||defaultTTL,_!=null&&_.metadata&&(this.metadata=_.metadata),_!=null&&_.name&&(this.name=_.name)}addGrant(c){this.grants.video=c}set metadata(c){this.grants.metadata=c}set name(c){this.grants.name=c}get sha256(){return this.grants.sha256}set sha256(c){this.grants.sha256=c}toJwt(){var c;const b={issuer:this.apiKey,expiresIn:this.ttl,notBefore:0};if(this.identity)b.subject=this.identity,b.jwtid=this.identity;else if(!((c=this.grants.video)===null||c===void 0)&&c.roomJoin)throw Error("identity is required for join but not set");return jwt.sign(this.grants,this.apiSecret,b)}}AccessToken$1.AccessToken=AccessToken;class TokenVerifier{constructor(c,b){this.apiKey=c,this.apiSecret=b}verify(c){const b=jwt.verify(c,this.apiSecret,{issuer:this.apiKey});if(!b)throw Error("invalid token");return b}}AccessToken$1.TokenVerifier=TokenVerifier;var EgressClient$1={},livekit_egress={};(function(a){var c=commonjsGlobal$1&&commonjsGlobal$1.__importDefault||function(St){return St&&St.__esModule?St:{default:St}};Object.defineProperty(a,"__esModule",{value:!0}),a.AutoTrackEgress=a.SegmentsInfo=a.FileInfo=a.StreamInfo=a.StreamInfoList=a.EgressInfo=a.StopEgressRequest=a.ListEgressResponse=a.ListEgressRequest=a.UpdateStreamRequest=a.UpdateLayoutRequest=a.EncodingOptions=a.StreamOutput=a.AliOSSUpload=a.AzureBlobUpload=a.GCPUpload=a.S3Upload_MetadataEntry=a.S3Upload=a.DirectFileOutput=a.SegmentedFileOutput=a.EncodedFileOutput=a.WebEgressRequest=a.TrackEgressRequest=a.TrackCompositeEgressRequest=a.RoomCompositeEgressRequest=a.streamInfo_StatusToJSON=a.streamInfo_StatusFromJSON=a.StreamInfo_Status=a.egressStatusToJSON=a.egressStatusFromJSON=a.EgressStatus=a.encodingOptionsPresetToJSON=a.encodingOptionsPresetFromJSON=a.EncodingOptionsPreset=a.videoCodecToJSON=a.videoCodecFromJSON=a.VideoCodec=a.audioCodecToJSON=a.audioCodecFromJSON=a.AudioCodec=a.segmentedFileProtocolToJSON=a.segmentedFileProtocolFromJSON=a.SegmentedFileProtocol=a.streamProtocolToJSON=a.streamProtocolFromJSON=a.StreamProtocol=a.encodedFileTypeToJSON=a.encodedFileTypeFromJSON=a.EncodedFileType=a.protobufPackage=void 0;const b=c(umdExports),_=c(minimal);a.protobufPackage="livekit";var $;(function(St){St[St.DEFAULT_FILETYPE=0]="DEFAULT_FILETYPE",St[St.MP4=1]="MP4",St[St.OGG=2]="OGG",St[St.UNRECOGNIZED=-1]="UNRECOGNIZED"})($=a.EncodedFileType||(a.EncodedFileType={}));function k(St){switch(St){case 0:case"DEFAULT_FILETYPE":return $.DEFAULT_FILETYPE;case 1:case"MP4":return $.MP4;case 2:case"OGG":return $.OGG;case-1:case"UNRECOGNIZED":default:return $.UNRECOGNIZED}}a.encodedFileTypeFromJSON=k;function et(St){switch(St){case $.DEFAULT_FILETYPE:return"DEFAULT_FILETYPE";case $.MP4:return"MP4";case $.OGG:return"OGG";case $.UNRECOGNIZED:default:return"UNRECOGNIZED"}}a.encodedFileTypeToJSON=et;var nt;(function(St){St[St.DEFAULT_PROTOCOL=0]="DEFAULT_PROTOCOL",St[St.RTMP=1]="RTMP",St[St.UNRECOGNIZED=-1]="UNRECOGNIZED"})(nt=a.StreamProtocol||(a.StreamProtocol={}));function ot(St){switch(St){case 0:case"DEFAULT_PROTOCOL":return nt.DEFAULT_PROTOCOL;case 1:case"RTMP":return nt.RTMP;case-1:case"UNRECOGNIZED":default:return nt.UNRECOGNIZED}}a.streamProtocolFromJSON=ot;function ht(St){switch(St){case nt.DEFAULT_PROTOCOL:return"DEFAULT_PROTOCOL";case nt.RTMP:return"RTMP";case nt.UNRECOGNIZED:default:return"UNRECOGNIZED"}}a.streamProtocolToJSON=ht;var vt;(function(St){St[St.DEFAULT_SEGMENTED_FILE_PROTOCOL=0]="DEFAULT_SEGMENTED_FILE_PROTOCOL",St[St.HLS_PROTOCOL=1]="HLS_PROTOCOL",St[St.UNRECOGNIZED=-1]="UNRECOGNIZED"})(vt=a.SegmentedFileProtocol||(a.SegmentedFileProtocol={}));function _t(St){switch(St){case 0:case"DEFAULT_SEGMENTED_FILE_PROTOCOL":return vt.DEFAULT_SEGMENTED_FILE_PROTOCOL;case 1:case"HLS_PROTOCOL":return vt.HLS_PROTOCOL;case-1:case"UNRECOGNIZED":default:return vt.UNRECOGNIZED}}a.segmentedFileProtocolFromJSON=_t;function kt(St){switch(St){case vt.DEFAULT_SEGMENTED_FILE_PROTOCOL:return"DEFAULT_SEGMENTED_FILE_PROTOCOL";case vt.HLS_PROTOCOL:return"HLS_PROTOCOL";case vt.UNRECOGNIZED:default:return"UNRECOGNIZED"}}a.segmentedFileProtocolToJSON=kt;var $t;(function(St){St[St.DEFAULT_AC=0]="DEFAULT_AC",St[St.OPUS=1]="OPUS",St[St.AAC=2]="AAC",St[St.UNRECOGNIZED=-1]="UNRECOGNIZED"})($t=a.AudioCodec||(a.AudioCodec={}));function Tt(St){switch(St){case 0:case"DEFAULT_AC":return $t.DEFAULT_AC;case 1:case"OPUS":return $t.OPUS;case 2:case"AAC":return $t.AAC;case-1:case"UNRECOGNIZED":default:return $t.UNRECOGNIZED}}a.audioCodecFromJSON=Tt;function At(St){switch(St){case $t.DEFAULT_AC:return"DEFAULT_AC";case $t.OPUS:return"OPUS";case $t.AAC:return"AAC";case $t.UNRECOGNIZED:default:return"UNRECOGNIZED"}}a.audioCodecToJSON=At;var Mt;(function(St){St[St.DEFAULT_VC=0]="DEFAULT_VC",St[St.H264_BASELINE=1]="H264_BASELINE",St[St.H264_MAIN=2]="H264_MAIN",St[St.H264_HIGH=3]="H264_HIGH",St[St.UNRECOGNIZED=-1]="UNRECOGNIZED"})(Mt=a.VideoCodec||(a.VideoCodec={}));function Dt(St){switch(St){case 0:case"DEFAULT_VC":return Mt.DEFAULT_VC;case 1:case"H264_BASELINE":return Mt.H264_BASELINE;case 2:case"H264_MAIN":return Mt.H264_MAIN;case 3:case"H264_HIGH":return Mt.H264_HIGH;case-1:case"UNRECOGNIZED":default:return Mt.UNRECOGNIZED}}a.videoCodecFromJSON=Dt;function Rt(St){switch(St){case Mt.DEFAULT_VC:return"DEFAULT_VC";case Mt.H264_BASELINE:return"H264_BASELINE";case Mt.H264_MAIN:return"H264_MAIN";case Mt.H264_HIGH:return"H264_HIGH";case Mt.UNRECOGNIZED:default:return"UNRECOGNIZED"}}a.videoCodecToJSON=Rt;var xt;(function(St){St[St.H264_720P_30=0]="H264_720P_30",St[St.H264_720P_60=1]="H264_720P_60",St[St.H264_1080P_30=2]="H264_1080P_30",St[St.H264_1080P_60=3]="H264_1080P_60",St[St.PORTRAIT_H264_720P_30=4]="PORTRAIT_H264_720P_30",St[St.PORTRAIT_H264_720P_60=5]="PORTRAIT_H264_720P_60",St[St.PORTRAIT_H264_1080P_30=6]="PORTRAIT_H264_1080P_30",St[St.PORTRAIT_H264_1080P_60=7]="PORTRAIT_H264_1080P_60",St[St.UNRECOGNIZED=-1]="UNRECOGNIZED"})(xt=a.EncodingOptionsPreset||(a.EncodingOptionsPreset={}));function Jt(St){switch(St){case 0:case"H264_720P_30":return xt.H264_720P_30;case 1:case"H264_720P_60":return xt.H264_720P_60;case 2:case"H264_1080P_30":return xt.H264_1080P_30;case 3:case"H264_1080P_60":return xt.H264_1080P_60;case 4:case"PORTRAIT_H264_720P_30":return xt.PORTRAIT_H264_720P_30;case 5:case"PORTRAIT_H264_720P_60":return xt.PORTRAIT_H264_720P_60;case 6:case"PORTRAIT_H264_1080P_30":return xt.PORTRAIT_H264_1080P_30;case 7:case"PORTRAIT_H264_1080P_60":return xt.PORTRAIT_H264_1080P_60;case-1:case"UNRECOGNIZED":default:return xt.UNRECOGNIZED}}a.encodingOptionsPresetFromJSON=Jt;function ar(St){switch(St){case xt.H264_720P_30:return"H264_720P_30";case xt.H264_720P_60:return"H264_720P_60";case xt.H264_1080P_30:return"H264_1080P_30";case xt.H264_1080P_60:return"H264_1080P_60";case xt.PORTRAIT_H264_720P_30:return"PORTRAIT_H264_720P_30";case xt.PORTRAIT_H264_720P_60:return"PORTRAIT_H264_720P_60";case xt.PORTRAIT_H264_1080P_30:return"PORTRAIT_H264_1080P_30";case xt.PORTRAIT_H264_1080P_60:return"PORTRAIT_H264_1080P_60";case xt.UNRECOGNIZED:default:return"UNRECOGNIZED"}}a.encodingOptionsPresetToJSON=ar;var nr;(function(St){St[St.EGRESS_STARTING=0]="EGRESS_STARTING",St[St.EGRESS_ACTIVE=1]="EGRESS_ACTIVE",St[St.EGRESS_ENDING=2]="EGRESS_ENDING",St[St.EGRESS_COMPLETE=3]="EGRESS_COMPLETE",St[St.EGRESS_FAILED=4]="EGRESS_FAILED",St[St.EGRESS_ABORTED=5]="EGRESS_ABORTED",St[St.EGRESS_LIMIT_REACHED=6]="EGRESS_LIMIT_REACHED",St[St.UNRECOGNIZED=-1]="UNRECOGNIZED"})(nr=a.EgressStatus||(a.EgressStatus={}));function pr(St){switch(St){case 0:case"EGRESS_STARTING":return nr.EGRESS_STARTING;case 1:case"EGRESS_ACTIVE":return nr.EGRESS_ACTIVE;case 2:case"EGRESS_ENDING":return nr.EGRESS_ENDING;case 3:case"EGRESS_COMPLETE":return nr.EGRESS_COMPLETE;case 4:case"EGRESS_FAILED":return nr.EGRESS_FAILED;case 5:case"EGRESS_ABORTED":return nr.EGRESS_ABORTED;case 6:case"EGRESS_LIMIT_REACHED":return nr.EGRESS_LIMIT_REACHED;case-1:case"UNRECOGNIZED":default:return nr.UNRECOGNIZED}}a.egressStatusFromJSON=pr;function ur(St){switch(St){case nr.EGRESS_STARTING:return"EGRESS_STARTING";case nr.EGRESS_ACTIVE:return"EGRESS_ACTIVE";case nr.EGRESS_ENDING:return"EGRESS_ENDING";case nr.EGRESS_COMPLETE:return"EGRESS_COMPLETE";case nr.EGRESS_FAILED:return"EGRESS_FAILED";case nr.EGRESS_ABORTED:return"EGRESS_ABORTED";case nr.EGRESS_LIMIT_REACHED:return"EGRESS_LIMIT_REACHED";case nr.UNRECOGNIZED:default:return"UNRECOGNIZED"}}a.egressStatusToJSON=ur;var Ot;(function(St){St[St.ACTIVE=0]="ACTIVE",St[St.FINISHED=1]="FINISHED",St[St.FAILED=2]="FAILED",St[St.UNRECOGNIZED=-1]="UNRECOGNIZED"})(Ot=a.StreamInfo_Status||(a.StreamInfo_Status={}));function It(St){switch(St){case 0:case"ACTIVE":return Ot.ACTIVE;case 1:case"FINISHED":return Ot.FINISHED;case 2:case"FAILED":return Ot.FAILED;case-1:case"UNRECOGNIZED":default:return Ot.UNRECOGNIZED}}a.streamInfo_StatusFromJSON=It;function ut(St){switch(St){case Ot.ACTIVE:return"ACTIVE";case Ot.FINISHED:return"FINISHED";case Ot.FAILED:return"FAILED";case Ot.UNRECOGNIZED:default:return"UNRECOGNIZED"}}a.streamInfo_StatusToJSON=ut;function _e(){return{roomName:"",layout:"",audioOnly:!1,videoOnly:!1,customBaseUrl:"",file:void 0,stream:void 0,segments:void 0,preset:void 0,advanced:void 0}}a.RoomCompositeEgressRequest={encode(St,Kt=_.default.Writer.create()){return St.roomName!==void 0&&St.roomName!==""&&Kt.uint32(10).string(St.roomName),St.layout!==void 0&&St.layout!==""&&Kt.uint32(18).string(St.layout),St.audioOnly===!0&&Kt.uint32(24).bool(St.audioOnly),St.videoOnly===!0&&Kt.uint32(32).bool(St.videoOnly),St.customBaseUrl!==void 0&&St.customBaseUrl!==""&&Kt.uint32(42).string(St.customBaseUrl),St.file!==void 0&&a.EncodedFileOutput.encode(St.file,Kt.uint32(50).fork()).ldelim(),St.stream!==void 0&&a.StreamOutput.encode(St.stream,Kt.uint32(58).fork()).ldelim(),St.segments!==void 0&&a.SegmentedFileOutput.encode(St.segments,Kt.uint32(82).fork()).ldelim(),St.preset!==void 0&&Kt.uint32(64).int32(St.preset),St.advanced!==void 0&&a.EncodingOptions.encode(St.advanced,Kt.uint32(74).fork()).ldelim(),Kt},decode(St,Kt){const er=St instanceof _.default.Reader?St:new _.default.Reader(St);let kr=Kt===void 0?er.len:er.pos+Kt;const tr=_e();for(;er.pos<kr;){const bt=er.uint32();switch(bt>>>3){case 1:tr.roomName=er.string();break;case 2:tr.layout=er.string();break;case 3:tr.audioOnly=er.bool();break;case 4:tr.videoOnly=er.bool();break;case 5:tr.customBaseUrl=er.string();break;case 6:tr.file=a.EncodedFileOutput.decode(er,er.uint32());break;case 7:tr.stream=a.StreamOutput.decode(er,er.uint32());break;case 10:tr.segments=a.SegmentedFileOutput.decode(er,er.uint32());break;case 8:tr.preset=er.int32();break;case 9:tr.advanced=a.EncodingOptions.decode(er,er.uint32());break;default:er.skipType(bt&7);break}}return tr},fromJSON(St){return{roomName:_r(St.roomName)?String(St.roomName):"",layout:_r(St.layout)?String(St.layout):"",audioOnly:_r(St.audioOnly)?!!St.audioOnly:!1,videoOnly:_r(St.videoOnly)?!!St.videoOnly:!1,customBaseUrl:_r(St.customBaseUrl)?String(St.customBaseUrl):"",file:_r(St.file)?a.EncodedFileOutput.fromJSON(St.file):void 0,stream:_r(St.stream)?a.StreamOutput.fromJSON(St.stream):void 0,segments:_r(St.segments)?a.SegmentedFileOutput.fromJSON(St.segments):void 0,preset:_r(St.preset)?Jt(St.preset):void 0,advanced:_r(St.advanced)?a.EncodingOptions.fromJSON(St.advanced):void 0}},toJSON(St){const Kt={};return St.roomName!==void 0&&(Kt.roomName=St.roomName),St.layout!==void 0&&(Kt.layout=St.layout),St.audioOnly!==void 0&&(Kt.audioOnly=St.audioOnly),St.videoOnly!==void 0&&(Kt.videoOnly=St.videoOnly),St.customBaseUrl!==void 0&&(Kt.customBaseUrl=St.customBaseUrl),St.file!==void 0&&(Kt.file=St.file?a.EncodedFileOutput.toJSON(St.file):void 0),St.stream!==void 0&&(Kt.stream=St.stream?a.StreamOutput.toJSON(St.stream):void 0),St.segments!==void 0&&(Kt.segments=St.segments?a.SegmentedFileOutput.toJSON(St.segments):void 0),St.preset!==void 0&&(Kt.preset=St.preset!==void 0?ar(St.preset):void 0),St.advanced!==void 0&&(Kt.advanced=St.advanced?a.EncodingOptions.toJSON(St.advanced):void 0),Kt},fromPartial(St){var Kt,er,kr,tr,bt,jt;const Ut=_e();return Ut.roomName=(Kt=St.roomName)!==null&&Kt!==void 0?Kt:"",Ut.layout=(er=St.layout)!==null&&er!==void 0?er:"",Ut.audioOnly=(kr=St.audioOnly)!==null&&kr!==void 0?kr:!1,Ut.videoOnly=(tr=St.videoOnly)!==null&&tr!==void 0?tr:!1,Ut.customBaseUrl=(bt=St.customBaseUrl)!==null&&bt!==void 0?bt:"",Ut.file=St.file!==void 0&&St.file!==null?a.EncodedFileOutput.fromPartial(St.file):void 0,Ut.stream=St.stream!==void 0&&St.stream!==null?a.StreamOutput.fromPartial(St.stream):void 0,Ut.segments=St.segments!==void 0&&St.segments!==null?a.SegmentedFileOutput.fromPartial(St.segments):void 0,Ut.preset=(jt=St.preset)!==null&&jt!==void 0?jt:void 0,Ut.advanced=St.advanced!==void 0&&St.advanced!==null?a.EncodingOptions.fromPartial(St.advanced):void 0,Ut}};function tt(){return{roomName:"",audioTrackId:"",videoTrackId:"",file:void 0,stream:void 0,segments:void 0,preset:void 0,advanced:void 0}}a.TrackCompositeEgressRequest={encode(St,Kt=_.default.Writer.create()){return St.roomName!==void 0&&St.roomName!==""&&Kt.uint32(10).string(St.roomName),St.audioTrackId!==void 0&&St.audioTrackId!==""&&Kt.uint32(18).string(St.audioTrackId),St.videoTrackId!==void 0&&St.videoTrackId!==""&&Kt.uint32(26).string(St.videoTrackId),St.file!==void 0&&a.EncodedFileOutput.encode(St.file,Kt.uint32(34).fork()).ldelim(),St.stream!==void 0&&a.StreamOutput.encode(St.stream,Kt.uint32(42).fork()).ldelim(),St.segments!==void 0&&a.SegmentedFileOutput.encode(St.segments,Kt.uint32(66).fork()).ldelim(),St.preset!==void 0&&Kt.uint32(48).int32(St.preset),St.advanced!==void 0&&a.EncodingOptions.encode(St.advanced,Kt.uint32(58).fork()).ldelim(),Kt},decode(St,Kt){const er=St instanceof _.default.Reader?St:new _.default.Reader(St);let kr=Kt===void 0?er.len:er.pos+Kt;const tr=tt();for(;er.pos<kr;){const bt=er.uint32();switch(bt>>>3){case 1:tr.roomName=er.string();break;case 2:tr.audioTrackId=er.string();break;case 3:tr.videoTrackId=er.string();break;case 4:tr.file=a.EncodedFileOutput.decode(er,er.uint32());break;case 5:tr.stream=a.StreamOutput.decode(er,er.uint32());break;case 8:tr.segments=a.SegmentedFileOutput.decode(er,er.uint32());break;case 6:tr.preset=er.int32();break;case 7:tr.advanced=a.EncodingOptions.decode(er,er.uint32());break;default:er.skipType(bt&7);break}}return tr},fromJSON(St){return{roomName:_r(St.roomName)?String(St.roomName):"",audioTrackId:_r(St.audioTrackId)?String(St.audioTrackId):"",videoTrackId:_r(St.videoTrackId)?String(St.videoTrackId):"",file:_r(St.file)?a.EncodedFileOutput.fromJSON(St.file):void 0,stream:_r(St.stream)?a.StreamOutput.fromJSON(St.stream):void 0,segments:_r(St.segments)?a.SegmentedFileOutput.fromJSON(St.segments):void 0,preset:_r(St.preset)?Jt(St.preset):void 0,advanced:_r(St.advanced)?a.EncodingOptions.fromJSON(St.advanced):void 0}},toJSON(St){const Kt={};return St.roomName!==void 0&&(Kt.roomName=St.roomName),St.audioTrackId!==void 0&&(Kt.audioTrackId=St.audioTrackId),St.videoTrackId!==void 0&&(Kt.videoTrackId=St.videoTrackId),St.file!==void 0&&(Kt.file=St.file?a.EncodedFileOutput.toJSON(St.file):void 0),St.stream!==void 0&&(Kt.stream=St.stream?a.StreamOutput.toJSON(St.stream):void 0),St.segments!==void 0&&(Kt.segments=St.segments?a.SegmentedFileOutput.toJSON(St.segments):void 0),St.preset!==void 0&&(Kt.preset=St.preset!==void 0?ar(St.preset):void 0),St.advanced!==void 0&&(Kt.advanced=St.advanced?a.EncodingOptions.toJSON(St.advanced):void 0),Kt},fromPartial(St){var Kt,er,kr,tr;const bt=tt();return bt.roomName=(Kt=St.roomName)!==null&&Kt!==void 0?Kt:"",bt.audioTrackId=(er=St.audioTrackId)!==null&&er!==void 0?er:"",bt.videoTrackId=(kr=St.videoTrackId)!==null&&kr!==void 0?kr:"",bt.file=St.file!==void 0&&St.file!==null?a.EncodedFileOutput.fromPartial(St.file):void 0,bt.stream=St.stream!==void 0&&St.stream!==null?a.StreamOutput.fromPartial(St.stream):void 0,bt.segments=St.segments!==void 0&&St.segments!==null?a.SegmentedFileOutput.fromPartial(St.segments):void 0,bt.preset=(tr=St.preset)!==null&&tr!==void 0?tr:void 0,bt.advanced=St.advanced!==void 0&&St.advanced!==null?a.EncodingOptions.fromPartial(St.advanced):void 0,bt}};function it(){return{roomName:"",trackId:"",file:void 0,websocketUrl:void 0}}a.TrackEgressRequest={encode(St,Kt=_.default.Writer.create()){return St.roomName!==void 0&&St.roomName!==""&&Kt.uint32(10).string(St.roomName),St.trackId!==void 0&&St.trackId!==""&&Kt.uint32(18).string(St.trackId),St.file!==void 0&&a.DirectFileOutput.encode(St.file,Kt.uint32(26).fork()).ldelim(),St.websocketUrl!==void 0&&Kt.uint32(34).string(St.websocketUrl),Kt},decode(St,Kt){const er=St instanceof _.default.Reader?St:new _.default.Reader(St);let kr=Kt===void 0?er.len:er.pos+Kt;const tr=it();for(;er.pos<kr;){const bt=er.uint32();switch(bt>>>3){case 1:tr.roomName=er.string();break;case 2:tr.trackId=er.string();break;case 3:tr.file=a.DirectFileOutput.decode(er,er.uint32());break;case 4:tr.websocketUrl=er.string();break;default:er.skipType(bt&7);break}}return tr},fromJSON(St){return{roomName:_r(St.roomName)?String(St.roomName):"",trackId:_r(St.trackId)?String(St.trackId):"",file:_r(St.file)?a.DirectFileOutput.fromJSON(St.file):void 0,websocketUrl:_r(St.websocketUrl)?String(St.websocketUrl):void 0}},toJSON(St){const Kt={};return St.roomName!==void 0&&(Kt.roomName=St.roomName),St.trackId!==void 0&&(Kt.trackId=St.trackId),St.file!==void 0&&(Kt.file=St.file?a.DirectFileOutput.toJSON(St.file):void 0),St.websocketUrl!==void 0&&(Kt.websocketUrl=St.websocketUrl),Kt},fromPartial(St){var Kt,er,kr;const tr=it();return tr.roomName=(Kt=St.roomName)!==null&&Kt!==void 0?Kt:"",tr.trackId=(er=St.trackId)!==null&&er!==void 0?er:"",tr.file=St.file!==void 0&&St.file!==null?a.DirectFileOutput.fromPartial(St.file):void 0,tr.websocketUrl=(kr=St.websocketUrl)!==null&&kr!==void 0?kr:void 0,tr}};function dt(){return{url:"",audioOnly:!1,videoOnly:!1,file:void 0,stream:void 0,segments:void 0,preset:void 0,advanced:void 0}}a.WebEgressRequest={encode(St,Kt=_.default.Writer.create()){return St.url!==void 0&&St.url!==""&&Kt.uint32(10).string(St.url),St.audioOnly===!0&&Kt.uint32(16).bool(St.audioOnly),St.videoOnly===!0&&Kt.uint32(24).bool(St.videoOnly),St.file!==void 0&&a.EncodedFileOutput.encode(St.file,Kt.uint32(34).fork()).ldelim(),St.stream!==void 0&&a.StreamOutput.encode(St.stream,Kt.uint32(42).fork()).ldelim(),St.segments!==void 0&&a.SegmentedFileOutput.encode(St.segments,Kt.uint32(50).fork()).ldelim(),St.preset!==void 0&&Kt.uint32(56).int32(St.preset),St.advanced!==void 0&&a.EncodingOptions.encode(St.advanced,Kt.uint32(66).fork()).ldelim(),Kt},decode(St,Kt){const er=St instanceof _.default.Reader?St:new _.default.Reader(St);let kr=Kt===void 0?er.len:er.pos+Kt;const tr=dt();for(;er.pos<kr;){const bt=er.uint32();switch(bt>>>3){case 1:tr.url=er.string();break;case 2:tr.audioOnly=er.bool();break;case 3:tr.videoOnly=er.bool();break;case 4:tr.file=a.EncodedFileOutput.decode(er,er.uint32());break;case 5:tr.stream=a.StreamOutput.decode(er,er.uint32());break;case 6:tr.segments=a.SegmentedFileOutput.decode(er,er.uint32());break;case 7:tr.preset=er.int32();break;case 8:tr.advanced=a.EncodingOptions.decode(er,er.uint32());break;default:er.skipType(bt&7);break}}return tr},fromJSON(St){return{url:_r(St.url)?String(St.url):"",audioOnly:_r(St.audioOnly)?!!St.audioOnly:!1,videoOnly:_r(St.videoOnly)?!!St.videoOnly:!1,file:_r(St.file)?a.EncodedFileOutput.fromJSON(St.file):void 0,stream:_r(St.stream)?a.StreamOutput.fromJSON(St.stream):void 0,segments:_r(St.segments)?a.SegmentedFileOutput.fromJSON(St.segments):void 0,preset:_r(St.preset)?Jt(St.preset):void 0,advanced:_r(St.advanced)?a.EncodingOptions.fromJSON(St.advanced):void 0}},toJSON(St){const Kt={};return St.url!==void 0&&(Kt.url=St.url),St.audioOnly!==void 0&&(Kt.audioOnly=St.audioOnly),St.videoOnly!==void 0&&(Kt.videoOnly=St.videoOnly),St.file!==void 0&&(Kt.file=St.file?a.EncodedFileOutput.toJSON(St.file):void 0),St.stream!==void 0&&(Kt.stream=St.stream?a.StreamOutput.toJSON(St.stream):void 0),St.segments!==void 0&&(Kt.segments=St.segments?a.SegmentedFileOutput.toJSON(St.segments):void 0),St.preset!==void 0&&(Kt.preset=St.preset!==void 0?ar(St.preset):void 0),St.advanced!==void 0&&(Kt.advanced=St.advanced?a.EncodingOptions.toJSON(St.advanced):void 0),Kt},fromPartial(St){var Kt,er,kr,tr;const bt=dt();return bt.url=(Kt=St.url)!==null&&Kt!==void 0?Kt:"",bt.audioOnly=(er=St.audioOnly)!==null&&er!==void 0?er:!1,bt.videoOnly=(kr=St.videoOnly)!==null&&kr!==void 0?kr:!1,bt.file=St.file!==void 0&&St.file!==null?a.EncodedFileOutput.fromPartial(St.file):void 0,bt.stream=St.stream!==void 0&&St.stream!==null?a.StreamOutput.fromPartial(St.stream):void 0,bt.segments=St.segments!==void 0&&St.segments!==null?a.SegmentedFileOutput.fromPartial(St.segments):void 0,bt.preset=(tr=St.preset)!==null&&tr!==void 0?tr:void 0,bt.advanced=St.advanced!==void 0&&St.advanced!==null?a.EncodingOptions.fromPartial(St.advanced):void 0,bt}};function lt(){return{fileType:0,filepath:"",disableManifest:!1,s3:void 0,gcp:void 0,azure:void 0,aliOSS:void 0}}a.EncodedFileOutput={encode(St,Kt=_.default.Writer.create()){return St.fileType!==void 0&&St.fileType!==0&&Kt.uint32(8).int32(St.fileType),St.filepath!==void 0&&St.filepath!==""&&Kt.uint32(18).string(St.filepath),St.disableManifest===!0&&Kt.uint32(48).bool(St.disableManifest),St.s3!==void 0&&a.S3Upload.encode(St.s3,Kt.uint32(26).fork()).ldelim(),St.gcp!==void 0&&a.GCPUpload.encode(St.gcp,Kt.uint32(34).fork()).ldelim(),St.azure!==void 0&&a.AzureBlobUpload.encode(St.azure,Kt.uint32(42).fork()).ldelim(),St.aliOSS!==void 0&&a.AliOSSUpload.encode(St.aliOSS,Kt.uint32(58).fork()).ldelim(),Kt},decode(St,Kt){const er=St instanceof _.default.Reader?St:new _.default.Reader(St);let kr=Kt===void 0?er.len:er.pos+Kt;const tr=lt();for(;er.pos<kr;){const bt=er.uint32();switch(bt>>>3){case 1:tr.fileType=er.int32();break;case 2:tr.filepath=er.string();break;case 6:tr.disableManifest=er.bool();break;case 3:tr.s3=a.S3Upload.decode(er,er.uint32());break;case 4:tr.gcp=a.GCPUpload.decode(er,er.uint32());break;case 5:tr.azure=a.AzureBlobUpload.decode(er,er.uint32());break;case 7:tr.aliOSS=a.AliOSSUpload.decode(er,er.uint32());break;default:er.skipType(bt&7);break}}return tr},fromJSON(St){return{fileType:_r(St.fileType)?k(St.fileType):0,filepath:_r(St.filepath)?String(St.filepath):"",disableManifest:_r(St.disableManifest)?!!St.disableManifest:!1,s3:_r(St.s3)?a.S3Upload.fromJSON(St.s3):void 0,gcp:_r(St.gcp)?a.GCPUpload.fromJSON(St.gcp):void 0,azure:_r(St.azure)?a.AzureBlobUpload.fromJSON(St.azure):void 0,aliOSS:_r(St.aliOSS)?a.AliOSSUpload.fromJSON(St.aliOSS):void 0}},toJSON(St){const Kt={};return St.fileType!==void 0&&(Kt.fileType=et(St.fileType)),St.filepath!==void 0&&(Kt.filepath=St.filepath),St.disableManifest!==void 0&&(Kt.disableManifest=St.disableManifest),St.s3!==void 0&&(Kt.s3=St.s3?a.S3Upload.toJSON(St.s3):void 0),St.gcp!==void 0&&(Kt.gcp=St.gcp?a.GCPUpload.toJSON(St.gcp):void 0),St.azure!==void 0&&(Kt.azure=St.azure?a.AzureBlobUpload.toJSON(St.azure):void 0),St.aliOSS!==void 0&&(Kt.aliOSS=St.aliOSS?a.AliOSSUpload.toJSON(St.aliOSS):void 0),Kt},fromPartial(St){var Kt,er,kr;const tr=lt();return tr.fileType=(Kt=St.fileType)!==null&&Kt!==void 0?Kt:0,tr.filepath=(er=St.filepath)!==null&&er!==void 0?er:"",tr.disableManifest=(kr=St.disableManifest)!==null&&kr!==void 0?kr:!1,tr.s3=St.s3!==void 0&&St.s3!==null?a.S3Upload.fromPartial(St.s3):void 0,tr.gcp=St.gcp!==void 0&&St.gcp!==null?a.GCPUpload.fromPartial(St.gcp):void 0,tr.azure=St.azure!==void 0&&St.azure!==null?a.AzureBlobUpload.fromPartial(St.azure):void 0,tr.aliOSS=St.aliOSS!==void 0&&St.aliOSS!==null?a.AliOSSUpload.fromPartial(St.aliOSS):void 0,tr}};function gt(){return{protocol:0,filenamePrefix:"",playlistName:"",segmentDuration:0,disableManifest:!1,s3:void 0,gcp:void 0,azure:void 0,aliOSS:void 0}}a.SegmentedFileOutput={encode(St,Kt=_.default.Writer.create()){return St.protocol!==void 0&&St.protocol!==0&&Kt.uint32(8).int32(St.protocol),St.filenamePrefix!==void 0&&St.filenamePrefix!==""&&Kt.uint32(18).string(St.filenamePrefix),St.playlistName!==void 0&&St.playlistName!==""&&Kt.uint32(26).string(St.playlistName),St.segmentDuration!==void 0&&St.segmentDuration!==0&&Kt.uint32(32).uint32(St.segmentDuration),St.disableManifest===!0&&Kt.uint32(64).bool(St.disableManifest),St.s3!==void 0&&a.S3Upload.encode(St.s3,Kt.uint32(42).fork()).ldelim(),St.gcp!==void 0&&a.GCPUpload.encode(St.gcp,Kt.uint32(50).fork()).ldelim(),St.azure!==void 0&&a.AzureBlobUpload.encode(St.azure,Kt.uint32(58).fork()).ldelim(),St.aliOSS!==void 0&&a.AliOSSUpload.encode(St.aliOSS,Kt.uint32(74).fork()).ldelim(),Kt},decode(St,Kt){const er=St instanceof _.default.Reader?St:new _.default.Reader(St);let kr=Kt===void 0?er.len:er.pos+Kt;const tr=gt();for(;er.pos<kr;){const bt=er.uint32();switch(bt>>>3){case 1:tr.protocol=er.int32();break;case 2:tr.filenamePrefix=er.string();break;case 3:tr.playlistName=er.string();break;case 4:tr.segmentDuration=er.uint32();break;case 8:tr.disableManifest=er.bool();break;case 5:tr.s3=a.S3Upload.decode(er,er.uint32());break;case 6:tr.gcp=a.GCPUpload.decode(er,er.uint32());break;case 7:tr.azure=a.AzureBlobUpload.decode(er,er.uint32());break;case 9:tr.aliOSS=a.AliOSSUpload.decode(er,er.uint32());break;default:er.skipType(bt&7);break}}return tr},fromJSON(St){return{protocol:_r(St.protocol)?_t(St.protocol):0,filenamePrefix:_r(St.filenamePrefix)?String(St.filenamePrefix):"",playlistName:_r(St.playlistName)?String(St.playlistName):"",segmentDuration:_r(St.segmentDuration)?Number(St.segmentDuration):0,disableManifest:_r(St.disableManifest)?!!St.disableManifest:!1,s3:_r(St.s3)?a.S3Upload.fromJSON(St.s3):void 0,gcp:_r(St.gcp)?a.GCPUpload.fromJSON(St.gcp):void 0,azure:_r(St.azure)?a.AzureBlobUpload.fromJSON(St.azure):void 0,aliOSS:_r(St.aliOSS)?a.AliOSSUpload.fromJSON(St.aliOSS):void 0}},toJSON(St){const Kt={};return St.protocol!==void 0&&(Kt.protocol=kt(St.protocol)),St.filenamePrefix!==void 0&&(Kt.filenamePrefix=St.filenamePrefix),St.playlistName!==void 0&&(Kt.playlistName=St.playlistName),St.segmentDuration!==void 0&&(Kt.segmentDuration=Math.round(St.segmentDuration)),St.disableManifest!==void 0&&(Kt.disableManifest=St.disableManifest),St.s3!==void 0&&(Kt.s3=St.s3?a.S3Upload.toJSON(St.s3):void 0),St.gcp!==void 0&&(Kt.gcp=St.gcp?a.GCPUpload.toJSON(St.gcp):void 0),St.azure!==void 0&&(Kt.azure=St.azure?a.AzureBlobUpload.toJSON(St.azure):void 0),St.aliOSS!==void 0&&(Kt.aliOSS=St.aliOSS?a.AliOSSUpload.toJSON(St.aliOSS):void 0),Kt},fromPartial(St){var Kt,er,kr,tr,bt;const jt=gt();return jt.protocol=(Kt=St.protocol)!==null&&Kt!==void 0?Kt:0,jt.filenamePrefix=(er=St.filenamePrefix)!==null&&er!==void 0?er:"",jt.playlistName=(kr=St.playlistName)!==null&&kr!==void 0?kr:"",jt.segmentDuration=(tr=St.segmentDuration)!==null&&tr!==void 0?tr:0,jt.disableManifest=(bt=St.disableManifest)!==null&&bt!==void 0?bt:!1,jt.s3=St.s3!==void 0&&St.s3!==null?a.S3Upload.fromPartial(St.s3):void 0,jt.gcp=St.gcp!==void 0&&St.gcp!==null?a.GCPUpload.fromPartial(St.gcp):void 0,jt.azure=St.azure!==void 0&&St.azure!==null?a.AzureBlobUpload.fromPartial(St.azure):void 0,jt.aliOSS=St.aliOSS!==void 0&&St.aliOSS!==null?a.AliOSSUpload.fromPartial(St.aliOSS):void 0,jt}};function Et(){return{filepath:"",disableManifest:!1,s3:void 0,gcp:void 0,azure:void 0,aliOSS:void 0}}a.DirectFileOutput={encode(St,Kt=_.default.Writer.create()){return St.filepath!==void 0&&St.filepath!==""&&Kt.uint32(10).string(St.filepath),St.disableManifest===!0&&Kt.uint32(40).bool(St.disableManifest),St.s3!==void 0&&a.S3Upload.encode(St.s3,Kt.uint32(18).fork()).ldelim(),St.gcp!==void 0&&a.GCPUpload.encode(St.gcp,Kt.uint32(26).fork()).ldelim(),St.azure!==void 0&&a.AzureBlobUpload.encode(St.azure,Kt.uint32(34).fork()).ldelim(),St.aliOSS!==void 0&&a.AliOSSUpload.encode(St.aliOSS,Kt.uint32(50).fork()).ldelim(),Kt},decode(St,Kt){const er=St instanceof _.default.Reader?St:new _.default.Reader(St);let kr=Kt===void 0?er.len:er.pos+Kt;const tr=Et();for(;er.pos<kr;){const bt=er.uint32();switch(bt>>>3){case 1:tr.filepath=er.string();break;case 5:tr.disableManifest=er.bool();break;case 2:tr.s3=a.S3Upload.decode(er,er.uint32());break;case 3:tr.gcp=a.GCPUpload.decode(er,er.uint32());break;case 4:tr.azure=a.AzureBlobUpload.decode(er,er.uint32());break;case 6:tr.aliOSS=a.AliOSSUpload.decode(er,er.uint32());break;default:er.skipType(bt&7);break}}return tr},fromJSON(St){return{filepath:_r(St.filepath)?String(St.filepath):"",disableManifest:_r(St.disableManifest)?!!St.disableManifest:!1,s3:_r(St.s3)?a.S3Upload.fromJSON(St.s3):void 0,gcp:_r(St.gcp)?a.GCPUpload.fromJSON(St.gcp):void 0,azure:_r(St.azure)?a.AzureBlobUpload.fromJSON(St.azure):void 0,aliOSS:_r(St.aliOSS)?a.AliOSSUpload.fromJSON(St.aliOSS):void 0}},toJSON(St){const Kt={};return St.filepath!==void 0&&(Kt.filepath=St.filepath),St.disableManifest!==void 0&&(Kt.disableManifest=St.disableManifest),St.s3!==void 0&&(Kt.s3=St.s3?a.S3Upload.toJSON(St.s3):void 0),St.gcp!==void 0&&(Kt.gcp=St.gcp?a.GCPUpload.toJSON(St.gcp):void 0),St.azure!==void 0&&(Kt.azure=St.azure?a.AzureBlobUpload.toJSON(St.azure):void 0),St.aliOSS!==void 0&&(Kt.aliOSS=St.aliOSS?a.AliOSSUpload.toJSON(St.aliOSS):void 0),Kt},fromPartial(St){var Kt,er;const kr=Et();return kr.filepath=(Kt=St.filepath)!==null&&Kt!==void 0?Kt:"",kr.disableManifest=(er=St.disableManifest)!==null&&er!==void 0?er:!1,kr.s3=St.s3!==void 0&&St.s3!==null?a.S3Upload.fromPartial(St.s3):void 0,kr.gcp=St.gcp!==void 0&&St.gcp!==null?a.GCPUpload.fromPartial(St.gcp):void 0,kr.azure=St.azure!==void 0&&St.azure!==null?a.AzureBlobUpload.fromPartial(St.azure):void 0,kr.aliOSS=St.aliOSS!==void 0&&St.aliOSS!==null?a.AliOSSUpload.fromPartial(St.aliOSS):void 0,kr}};function pt(){return{accessKey:"",secret:"",region:"",endpoint:"",bucket:"",forcePathStyle:!1,metadata:{},tagging:""}}a.S3Upload={encode(St,Kt=_.default.Writer.create()){return St.accessKey!==void 0&&St.accessKey!==""&&Kt.uint32(10).string(St.accessKey),St.secret!==void 0&&St.secret!==""&&Kt.uint32(18).string(St.secret),St.region!==void 0&&St.region!==""&&Kt.uint32(26).string(St.region),St.endpoint!==void 0&&St.endpoint!==""&&Kt.uint32(34).string(St.endpoint),St.bucket!==void 0&&St.bucket!==""&&Kt.uint32(42).string(St.bucket),St.forcePathStyle===!0&&Kt.uint32(48).bool(St.forcePathStyle),Object.entries(St.metadata||{}).forEach(([er,kr])=>{a.S3Upload_MetadataEntry.encode({key:er,value:kr},Kt.uint32(58).fork()).ldelim()}),St.tagging!==void 0&&St.tagging!==""&&Kt.uint32(66).string(St.tagging),Kt},decode(St,Kt){const er=St instanceof _.default.Reader?St:new _.default.Reader(St);let kr=Kt===void 0?er.len:er.pos+Kt;const tr=pt();for(;er.pos<kr;){const bt=er.uint32();switch(bt>>>3){case 1:tr.accessKey=er.string();break;case 2:tr.secret=er.string();break;case 3:tr.region=er.string();break;case 4:tr.endpoint=er.string();break;case 5:tr.bucket=er.string();break;case 6:tr.forcePathStyle=er.bool();break;case 7:const jt=a.S3Upload_MetadataEntry.decode(er,er.uint32());jt.value!==void 0&&(tr.metadata[jt.key]=jt.value);break;case 8:tr.tagging=er.string();break;default:er.skipType(bt&7);break}}return tr},fromJSON(St){return{accessKey:_r(St.accessKey)?String(St.accessKey):"",secret:_r(St.secret)?String(St.secret):"",region:_r(St.region)?String(St.region):"",endpoint:_r(St.endpoint)?String(St.endpoint):"",bucket:_r(St.bucket)?String(St.bucket):"",forcePathStyle:_r(St.forcePathStyle)?!!St.forcePathStyle:!1,metadata:Pr(St.metadata)?Object.entries(St.metadata).reduce((Kt,[er,kr])=>(Kt[er]=String(kr),Kt),{}):{},tagging:_r(St.tagging)?String(St.tagging):""}},toJSON(St){const Kt={};return St.accessKey!==void 0&&(Kt.accessKey=St.accessKey),St.secret!==void 0&&(Kt.secret=St.secret),St.region!==void 0&&(Kt.region=St.region),St.endpoint!==void 0&&(Kt.endpoint=St.endpoint),St.bucket!==void 0&&(Kt.bucket=St.bucket),St.forcePathStyle!==void 0&&(Kt.forcePathStyle=St.forcePathStyle),Kt.metadata={},St.metadata&&Object.entries(St.metadata).forEach(([er,kr])=>{Kt.metadata[er]=kr}),St.tagging!==void 0&&(Kt.tagging=St.tagging),Kt},fromPartial(St){var Kt,er,kr,tr,bt,jt,Ut,Ft;const Ht=pt();return Ht.accessKey=(Kt=St.accessKey)!==null&&Kt!==void 0?Kt:"",Ht.secret=(er=St.secret)!==null&&er!==void 0?er:"",Ht.region=(kr=St.region)!==null&&kr!==void 0?kr:"",Ht.endpoint=(tr=St.endpoint)!==null&&tr!==void 0?tr:"",Ht.bucket=(bt=St.bucket)!==null&&bt!==void 0?bt:"",Ht.forcePathStyle=(jt=St.forcePathStyle)!==null&&jt!==void 0?jt:!1,Ht.metadata=Object.entries((Ut=St.metadata)!==null&&Ut!==void 0?Ut:{}).reduce((or,[vr,Ir])=>(Ir!==void 0&&(or[vr]=String(Ir)),or),{}),Ht.tagging=(Ft=St.tagging)!==null&&Ft!==void 0?Ft:"",Ht}};function rt(){return{key:"",value:""}}a.S3Upload_MetadataEntry={encode(St,Kt=_.default.Writer.create()){return St.key!==""&&Kt.uint32(10).string(St.key),St.value!==""&&Kt.uint32(18).string(St.value),Kt},decode(St,Kt){const er=St instanceof _.default.Reader?St:new _.default.Reader(St);let kr=Kt===void 0?er.len:er.pos+Kt;const tr=rt();for(;er.pos<kr;){const bt=er.uint32();switch(bt>>>3){case 1:tr.key=er.string();break;case 2:tr.value=er.string();break;default:er.skipType(bt&7);break}}return tr},fromJSON(St){return{key:_r(St.key)?String(St.key):"",value:_r(St.value)?String(St.value):""}},toJSON(St){const Kt={};return St.key!==void 0&&(Kt.key=St.key),St.value!==void 0&&(Kt.value=St.value),Kt},fromPartial(St){var Kt,er;const kr=rt();return kr.key=(Kt=St.key)!==null&&Kt!==void 0?Kt:"",kr.value=(er=St.value)!==null&&er!==void 0?er:"",kr}};function mt(){return{credentials:new Uint8Array,bucket:""}}a.GCPUpload={encode(St,Kt=_.default.Writer.create()){return St.credentials!==void 0&&St.credentials.length!==0&&Kt.uint32(10).bytes(St.credentials),St.bucket!==void 0&&St.bucket!==""&&Kt.uint32(18).string(St.bucket),Kt},decode(St,Kt){const er=St instanceof _.default.Reader?St:new _.default.Reader(St);let kr=Kt===void 0?er.len:er.pos+Kt;const tr=mt();for(;er.pos<kr;){const bt=er.uint32();switch(bt>>>3){case 1:tr.credentials=er.bytes();break;case 2:tr.bucket=er.string();break;default:er.skipType(bt&7);break}}return tr},fromJSON(St){return{credentials:_r(St.credentials)?Tr(St.credentials):new Uint8Array,bucket:_r(St.bucket)?String(St.bucket):""}},toJSON(St){const Kt={};return St.credentials!==void 0&&(Kt.credentials=gr(St.credentials!==void 0?St.credentials:new Uint8Array)),St.bucket!==void 0&&(Kt.bucket=St.bucket),Kt},fromPartial(St){var Kt,er;const kr=mt();return kr.credentials=(Kt=St.credentials)!==null&&Kt!==void 0?Kt:new Uint8Array,kr.bucket=(er=St.bucket)!==null&&er!==void 0?er:"",kr}};function Lt(){return{accountName:"",accountKey:"",containerName:""}}a.AzureBlobUpload={encode(St,Kt=_.default.Writer.create()){return St.accountName!==void 0&&St.accountName!==""&&Kt.uint32(10).string(St.accountName),St.accountKey!==void 0&&St.accountKey!==""&&Kt.uint32(18).string(St.accountKey),St.containerName!==void 0&&St.containerName!==""&&Kt.uint32(26).string(St.containerName),Kt},decode(St,Kt){const er=St instanceof _.default.Reader?St:new _.default.Reader(St);let kr=Kt===void 0?er.len:er.pos+Kt;const tr=Lt();for(;er.pos<kr;){const bt=er.uint32();switch(bt>>>3){case 1:tr.accountName=er.string();break;case 2:tr.accountKey=er.string();break;case 3:tr.containerName=er.string();break;default:er.skipType(bt&7);break}}return tr},fromJSON(St){return{accountName:_r(St.accountName)?String(St.accountName):"",accountKey:_r(St.accountKey)?String(St.accountKey):"",containerName:_r(St.containerName)?String(St.containerName):""}},toJSON(St){const Kt={};return St.accountName!==void 0&&(Kt.accountName=St.accountName),St.accountKey!==void 0&&(Kt.accountKey=St.accountKey),St.containerName!==void 0&&(Kt.containerName=St.containerName),Kt},fromPartial(St){var Kt,er,kr;const tr=Lt();return tr.accountName=(Kt=St.accountName)!==null&&Kt!==void 0?Kt:"",tr.accountKey=(er=St.accountKey)!==null&&er!==void 0?er:"",tr.containerName=(kr=St.containerName)!==null&&kr!==void 0?kr:"",tr}};function Gt(){return{accessKey:"",secret:"",region:"",endpoint:"",bucket:""}}a.AliOSSUpload={encode(St,Kt=_.default.Writer.create()){return St.accessKey!==void 0&&St.accessKey!==""&&Kt.uint32(10).string(St.accessKey),St.secret!==void 0&&St.secret!==""&&Kt.uint32(18).string(St.secret),St.region!==void 0&&St.region!==""&&Kt.uint32(26).string(St.region),St.endpoint!==void 0&&St.endpoint!==""&&Kt.uint32(34).string(St.endpoint),St.bucket!==void 0&&St.bucket!==""&&Kt.uint32(42).string(St.bucket),Kt},decode(St,Kt){const er=St instanceof _.default.Reader?St:new _.default.Reader(St);let kr=Kt===void 0?er.len:er.pos+Kt;const tr=Gt();for(;er.pos<kr;){const bt=er.uint32();switch(bt>>>3){case 1:tr.accessKey=er.string();break;case 2:tr.secret=er.string();break;case 3:tr.region=er.string();break;case 4:tr.endpoint=er.string();break;case 5:tr.bucket=er.string();break;default:er.skipType(bt&7);break}}return tr},fromJSON(St){return{accessKey:_r(St.accessKey)?String(St.accessKey):"",secret:_r(St.secret)?String(St.secret):"",region:_r(St.region)?String(St.region):"",endpoint:_r(St.endpoint)?String(St.endpoint):"",bucket:_r(St.bucket)?String(St.bucket):""}},toJSON(St){const Kt={};return St.accessKey!==void 0&&(Kt.accessKey=St.accessKey),St.secret!==void 0&&(Kt.secret=St.secret),St.region!==void 0&&(Kt.region=St.region),St.endpoint!==void 0&&(Kt.endpoint=St.endpoint),St.bucket!==void 0&&(Kt.bucket=St.bucket),Kt},fromPartial(St){var Kt,er,kr,tr,bt;const jt=Gt();return jt.accessKey=(Kt=St.accessKey)!==null&&Kt!==void 0?Kt:"",jt.secret=(er=St.secret)!==null&&er!==void 0?er:"",jt.region=(kr=St.region)!==null&&kr!==void 0?kr:"",jt.endpoint=(tr=St.endpoint)!==null&&tr!==void 0?tr:"",jt.bucket=(bt=St.bucket)!==null&&bt!==void 0?bt:"",jt}};function rr(){return{protocol:0,urls:[]}}a.StreamOutput={encode(St,Kt=_.default.Writer.create()){if(St.protocol!==void 0&&St.protocol!==0&&Kt.uint32(8).int32(St.protocol),St.urls!==void 0&&St.urls.length!==0)for(const er of St.urls)Kt.uint32(18).string(er);return Kt},decode(St,Kt){const er=St instanceof _.default.Reader?St:new _.default.Reader(St);let kr=Kt===void 0?er.len:er.pos+Kt;const tr=rr();for(;er.pos<kr;){const bt=er.uint32();switch(bt>>>3){case 1:tr.protocol=er.int32();break;case 2:tr.urls.push(er.string());break;default:er.skipType(bt&7);break}}return tr},fromJSON(St){return{protocol:_r(St.protocol)?ot(St.protocol):0,urls:Array.isArray(St==null?void 0:St.urls)?St.urls.map(Kt=>String(Kt)):[]}},toJSON(St){const Kt={};return St.protocol!==void 0&&(Kt.protocol=ht(St.protocol)),St.urls?Kt.urls=St.urls.map(er=>er):Kt.urls=[],Kt},fromPartial(St){var Kt,er;const kr=rr();return kr.protocol=(Kt=St.protocol)!==null&&Kt!==void 0?Kt:0,kr.urls=((er=St.urls)===null||er===void 0?void 0:er.map(tr=>tr))||[],kr}};function ir(){return{width:0,height:0,depth:0,framerate:0,audioCodec:0,audioBitrate:0,audioFrequency:0,videoCodec:0,videoBitrate:0}}a.EncodingOptions={encode(St,Kt=_.default.Writer.create()){return St.width!==void 0&&St.width!==0&&Kt.uint32(8).int32(St.width),St.height!==void 0&&St.height!==0&&Kt.uint32(16).int32(St.height),St.depth!==void 0&&St.depth!==0&&Kt.uint32(24).int32(St.depth),St.framerate!==void 0&&St.framerate!==0&&Kt.uint32(32).int32(St.framerate),St.audioCodec!==void 0&&St.audioCodec!==0&&Kt.uint32(40).int32(St.audioCodec),St.audioBitrate!==void 0&&St.audioBitrate!==0&&Kt.uint32(48).int32(St.audioBitrate),St.audioFrequency!==void 0&&St.audioFrequency!==0&&Kt.uint32(56).int32(St.audioFrequency),St.videoCodec!==void 0&&St.videoCodec!==0&&Kt.uint32(64).int32(St.videoCodec),St.videoBitrate!==void 0&&St.videoBitrate!==0&&Kt.uint32(72).int32(St.videoBitrate),Kt},decode(St,Kt){const er=St instanceof _.default.Reader?St:new _.default.Reader(St);let kr=Kt===void 0?er.len:er.pos+Kt;const tr=ir();for(;er.pos<kr;){const bt=er.uint32();switch(bt>>>3){case 1:tr.width=er.int32();break;case 2:tr.height=er.int32();break;case 3:tr.depth=er.int32();break;case 4:tr.framerate=er.int32();break;case 5:tr.audioCodec=er.int32();break;case 6:tr.audioBitrate=er.int32();break;case 7:tr.audioFrequency=er.int32();break;case 8:tr.videoCodec=er.int32();break;case 9:tr.videoBitrate=er.int32();break;default:er.skipType(bt&7);break}}return tr},fromJSON(St){return{width:_r(St.width)?Number(St.width):0,height:_r(St.height)?Number(St.height):0,depth:_r(St.depth)?Number(St.depth):0,framerate:_r(St.framerate)?Number(St.framerate):0,audioCodec:_r(St.audioCodec)?Tt(St.audioCodec):0,audioBitrate:_r(St.audioBitrate)?Number(St.audioBitrate):0,audioFrequency:_r(St.audioFrequency)?Number(St.audioFrequency):0,videoCodec:_r(St.videoCodec)?Dt(St.videoCodec):0,videoBitrate:_r(St.videoBitrate)?Number(St.videoBitrate):0}},toJSON(St){const Kt={};return St.width!==void 0&&(Kt.width=Math.round(St.width)),St.height!==void 0&&(Kt.height=Math.round(St.height)),St.depth!==void 0&&(Kt.depth=Math.round(St.depth)),St.framerate!==void 0&&(Kt.framerate=Math.round(St.framerate)),St.audioCodec!==void 0&&(Kt.audioCodec=At(St.audioCodec)),St.audioBitrate!==void 0&&(Kt.audioBitrate=Math.round(St.audioBitrate)),St.audioFrequency!==void 0&&(Kt.audioFrequency=Math.round(St.audioFrequency)),St.videoCodec!==void 0&&(Kt.videoCodec=Rt(St.videoCodec)),St.videoBitrate!==void 0&&(Kt.videoBitrate=Math.round(St.videoBitrate)),Kt},fromPartial(St){var Kt,er,kr,tr,bt,jt,Ut,Ft,Ht;const or=ir();return or.width=(Kt=St.width)!==null&&Kt!==void 0?Kt:0,or.height=(er=St.height)!==null&&er!==void 0?er:0,or.depth=(kr=St.depth)!==null&&kr!==void 0?kr:0,or.framerate=(tr=St.framerate)!==null&&tr!==void 0?tr:0,or.audioCodec=(bt=St.audioCodec)!==null&&bt!==void 0?bt:0,or.audioBitrate=(jt=St.audioBitrate)!==null&&jt!==void 0?jt:0,or.audioFrequency=(Ut=St.audioFrequency)!==null&&Ut!==void 0?Ut:0,or.videoCodec=(Ft=St.videoCodec)!==null&&Ft!==void 0?Ft:0,or.videoBitrate=(Ht=St.videoBitrate)!==null&&Ht!==void 0?Ht:0,or}};function Wt(){return{egressId:"",layout:""}}a.UpdateLayoutRequest={encode(St,Kt=_.default.Writer.create()){return St.egressId!==void 0&&St.egressId!==""&&Kt.uint32(10).string(St.egressId),St.layout!==void 0&&St.layout!==""&&Kt.uint32(18).string(St.layout),Kt},decode(St,Kt){const er=St instanceof _.default.Reader?St:new _.default.Reader(St);let kr=Kt===void 0?er.len:er.pos+Kt;const tr=Wt();for(;er.pos<kr;){const bt=er.uint32();switch(bt>>>3){case 1:tr.egressId=er.string();break;case 2:tr.layout=er.string();break;default:er.skipType(bt&7);break}}return tr},fromJSON(St){return{egressId:_r(St.egressId)?String(St.egressId):"",layout:_r(St.layout)?String(St.layout):""}},toJSON(St){const Kt={};return St.egressId!==void 0&&(Kt.egressId=St.egressId),St.layout!==void 0&&(Kt.layout=St.layout),Kt},fromPartial(St){var Kt,er;const kr=Wt();return kr.egressId=(Kt=St.egressId)!==null&&Kt!==void 0?Kt:"",kr.layout=(er=St.layout)!==null&&er!==void 0?er:"",kr}};function zt(){return{egressId:"",addOutputUrls:[],removeOutputUrls:[]}}a.UpdateStreamRequest={encode(St,Kt=_.default.Writer.create()){if(St.egressId!==void 0&&St.egressId!==""&&Kt.uint32(10).string(St.egressId),St.addOutputUrls!==void 0&&St.addOutputUrls.length!==0)for(const er of St.addOutputUrls)Kt.uint32(18).string(er);if(St.removeOutputUrls!==void 0&&St.removeOutputUrls.length!==0)for(const er of St.removeOutputUrls)Kt.uint32(26).string(er);return Kt},decode(St,Kt){const er=St instanceof _.default.Reader?St:new _.default.Reader(St);let kr=Kt===void 0?er.len:er.pos+Kt;const tr=zt();for(;er.pos<kr;){const bt=er.uint32();switch(bt>>>3){case 1:tr.egressId=er.string();break;case 2:tr.addOutputUrls.push(er.string());break;case 3:tr.removeOutputUrls.push(er.string());break;default:er.skipType(bt&7);break}}return tr},fromJSON(St){return{egressId:_r(St.egressId)?String(St.egressId):"",addOutputUrls:Array.isArray(St==null?void 0:St.addOutputUrls)?St.addOutputUrls.map(Kt=>String(Kt)):[],removeOutputUrls:Array.isArray(St==null?void 0:St.removeOutputUrls)?St.removeOutputUrls.map(Kt=>String(Kt)):[]}},toJSON(St){const Kt={};return St.egressId!==void 0&&(Kt.egressId=St.egressId),St.addOutputUrls?Kt.addOutputUrls=St.addOutputUrls.map(er=>er):Kt.addOutputUrls=[],St.removeOutputUrls?Kt.removeOutputUrls=St.removeOutputUrls.map(er=>er):Kt.removeOutputUrls=[],Kt},fromPartial(St){var Kt,er,kr;const tr=zt();return tr.egressId=(Kt=St.egressId)!==null&&Kt!==void 0?Kt:"",tr.addOutputUrls=((er=St.addOutputUrls)===null||er===void 0?void 0:er.map(bt=>bt))||[],tr.removeOutputUrls=((kr=St.removeOutputUrls)===null||kr===void 0?void 0:kr.map(bt=>bt))||[],tr}};function wt(){return{roomName:""}}a.ListEgressRequest={encode(St,Kt=_.default.Writer.create()){return St.roomName!==void 0&&St.roomName!==""&&Kt.uint32(10).string(St.roomName),Kt},decode(St,Kt){const er=St instanceof _.default.Reader?St:new _.default.Reader(St);let kr=Kt===void 0?er.len:er.pos+Kt;const tr=wt();for(;er.pos<kr;){const bt=er.uint32();switch(bt>>>3){case 1:tr.roomName=er.string();break;default:er.skipType(bt&7);break}}return tr},fromJSON(St){return{roomName:_r(St.roomName)?String(St.roomName):""}},toJSON(St){const Kt={};return St.roomName!==void 0&&(Kt.roomName=St.roomName),Kt},fromPartial(St){var Kt;const er=wt();return er.roomName=(Kt=St.roomName)!==null&&Kt!==void 0?Kt:"",er}};function Vt(){return{items:[]}}a.ListEgressResponse={encode(St,Kt=_.default.Writer.create()){if(St.items!==void 0&&St.items.length!==0)for(const er of St.items)a.EgressInfo.encode(er,Kt.uint32(10).fork()).ldelim();return Kt},decode(St,Kt){const er=St instanceof _.default.Reader?St:new _.default.Reader(St);let kr=Kt===void 0?er.len:er.pos+Kt;const tr=Vt();for(;er.pos<kr;){const bt=er.uint32();switch(bt>>>3){case 1:tr.items.push(a.EgressInfo.decode(er,er.uint32()));break;default:er.skipType(bt&7);break}}return tr},fromJSON(St){return{items:Array.isArray(St==null?void 0:St.items)?St.items.map(Kt=>a.EgressInfo.fromJSON(Kt)):[]}},toJSON(St){const Kt={};return St.items?Kt.items=St.items.map(er=>er?a.EgressInfo.toJSON(er):void 0):Kt.items=[],Kt},fromPartial(St){var Kt;const er=Vt();return er.items=((Kt=St.items)===null||Kt===void 0?void 0:Kt.map(kr=>a.EgressInfo.fromPartial(kr)))||[],er}};function Qt(){return{egressId:""}}a.StopEgressRequest={encode(St,Kt=_.default.Writer.create()){return St.egressId!==void 0&&St.egressId!==""&&Kt.uint32(10).string(St.egressId),Kt},decode(St,Kt){const er=St instanceof _.default.Reader?St:new _.default.Reader(St);let kr=Kt===void 0?er.len:er.pos+Kt;const tr=Qt();for(;er.pos<kr;){const bt=er.uint32();switch(bt>>>3){case 1:tr.egressId=er.string();break;default:er.skipType(bt&7);break}}return tr},fromJSON(St){return{egressId:_r(St.egressId)?String(St.egressId):""}},toJSON(St){const Kt={};return St.egressId!==void 0&&(Kt.egressId=St.egressId),Kt},fromPartial(St){var Kt;const er=Qt();return er.egressId=(Kt=St.egressId)!==null&&Kt!==void 0?Kt:"",er}};function Nt(){return{egressId:"",roomId:"",roomName:"",status:0,startedAt:0,endedAt:0,error:"",roomComposite:void 0,trackComposite:void 0,track:void 0,web:void 0,stream:void 0,file:void 0,segments:void 0}}a.EgressInfo={encode(St,Kt=_.default.Writer.create()){return St.egressId!==void 0&&St.egressId!==""&&Kt.uint32(10).string(St.egressId),St.roomId!==void 0&&St.roomId!==""&&Kt.uint32(18).string(St.roomId),St.roomName!==void 0&&St.roomName!==""&&Kt.uint32(106).string(St.roomName),St.status!==void 0&&St.status!==0&&Kt.uint32(24).int32(St.status),St.startedAt!==void 0&&St.startedAt!==0&&Kt.uint32(80).int64(St.startedAt),St.endedAt!==void 0&&St.endedAt!==0&&Kt.uint32(88).int64(St.endedAt),St.error!==void 0&&St.error!==""&&Kt.uint32(74).string(St.error),St.roomComposite!==void 0&&a.RoomCompositeEgressRequest.encode(St.roomComposite,Kt.uint32(34).fork()).ldelim(),St.trackComposite!==void 0&&a.TrackCompositeEgressRequest.encode(St.trackComposite,Kt.uint32(42).fork()).ldelim(),St.track!==void 0&&a.TrackEgressRequest.encode(St.track,Kt.uint32(50).fork()).ldelim(),St.web!==void 0&&a.WebEgressRequest.encode(St.web,Kt.uint32(114).fork()).ldelim(),St.stream!==void 0&&a.StreamInfoList.encode(St.stream,Kt.uint32(58).fork()).ldelim(),St.file!==void 0&&a.FileInfo.encode(St.file,Kt.uint32(66).fork()).ldelim(),St.segments!==void 0&&a.SegmentsInfo.encode(St.segments,Kt.uint32(98).fork()).ldelim(),Kt},decode(St,Kt){const er=St instanceof _.default.Reader?St:new _.default.Reader(St);let kr=Kt===void 0?er.len:er.pos+Kt;const tr=Nt();for(;er.pos<kr;){const bt=er.uint32();switch(bt>>>3){case 1:tr.egressId=er.string();break;case 2:tr.roomId=er.string();break;case 13:tr.roomName=er.string();break;case 3:tr.status=er.int32();break;case 10:tr.startedAt=Zr(er.int64());break;case 11:tr.endedAt=Zr(er.int64());break;case 9:tr.error=er.string();break;case 4:tr.roomComposite=a.RoomCompositeEgressRequest.decode(er,er.uint32());break;case 5:tr.trackComposite=a.TrackCompositeEgressRequest.decode(er,er.uint32());break;case 6:tr.track=a.TrackEgressRequest.decode(er,er.uint32());break;case 14:tr.web=a.WebEgressRequest.decode(er,er.uint32());break;case 7:tr.stream=a.StreamInfoList.decode(er,er.uint32());break;case 8:tr.file=a.FileInfo.decode(er,er.uint32());break;case 12:tr.segments=a.SegmentsInfo.decode(er,er.uint32());break;default:er.skipType(bt&7);break}}return tr},fromJSON(St){return{egressId:_r(St.egressId)?String(St.egressId):"",roomId:_r(St.roomId)?String(St.roomId):"",roomName:_r(St.roomName)?String(St.roomName):"",status:_r(St.status)?pr(St.status):0,startedAt:_r(St.startedAt)?Number(St.startedAt):0,endedAt:_r(St.endedAt)?Number(St.endedAt):0,error:_r(St.error)?String(St.error):"",roomComposite:_r(St.roomComposite)?a.RoomCompositeEgressRequest.fromJSON(St.roomComposite):void 0,trackComposite:_r(St.trackComposite)?a.TrackCompositeEgressRequest.fromJSON(St.trackComposite):void 0,track:_r(St.track)?a.TrackEgressRequest.fromJSON(St.track):void 0,web:_r(St.web)?a.WebEgressRequest.fromJSON(St.web):void 0,stream:_r(St.stream)?a.StreamInfoList.fromJSON(St.stream):void 0,file:_r(St.file)?a.FileInfo.fromJSON(St.file):void 0,segments:_r(St.segments)?a.SegmentsInfo.fromJSON(St.segments):void 0}},toJSON(St){const Kt={};return St.egressId!==void 0&&(Kt.egressId=St.egressId),St.roomId!==void 0&&(Kt.roomId=St.roomId),St.roomName!==void 0&&(Kt.roomName=St.roomName),St.status!==void 0&&(Kt.status=ur(St.status)),St.startedAt!==void 0&&(Kt.startedAt=Math.round(St.startedAt)),St.endedAt!==void 0&&(Kt.endedAt=Math.round(St.endedAt)),St.error!==void 0&&(Kt.error=St.error),St.roomComposite!==void 0&&(Kt.roomComposite=St.roomComposite?a.RoomCompositeEgressRequest.toJSON(St.roomComposite):void 0),St.trackComposite!==void 0&&(Kt.trackComposite=St.trackComposite?a.TrackCompositeEgressRequest.toJSON(St.trackComposite):void 0),St.track!==void 0&&(Kt.track=St.track?a.TrackEgressRequest.toJSON(St.track):void 0),St.web!==void 0&&(Kt.web=St.web?a.WebEgressRequest.toJSON(St.web):void 0),St.stream!==void 0&&(Kt.stream=St.stream?a.StreamInfoList.toJSON(St.stream):void 0),St.file!==void 0&&(Kt.file=St.file?a.FileInfo.toJSON(St.file):void 0),St.segments!==void 0&&(Kt.segments=St.segments?a.SegmentsInfo.toJSON(St.segments):void 0),Kt},fromPartial(St){var Kt,er,kr,tr,bt,jt,Ut;const Ft=Nt();return Ft.egressId=(Kt=St.egressId)!==null&&Kt!==void 0?Kt:"",Ft.roomId=(er=St.roomId)!==null&&er!==void 0?er:"",Ft.roomName=(kr=St.roomName)!==null&&kr!==void 0?kr:"",Ft.status=(tr=St.status)!==null&&tr!==void 0?tr:0,Ft.startedAt=(bt=St.startedAt)!==null&&bt!==void 0?bt:0,Ft.endedAt=(jt=St.endedAt)!==null&&jt!==void 0?jt:0,Ft.error=(Ut=St.error)!==null&&Ut!==void 0?Ut:"",Ft.roomComposite=St.roomComposite!==void 0&&St.roomComposite!==null?a.RoomCompositeEgressRequest.fromPartial(St.roomComposite):void 0,Ft.trackComposite=St.trackComposite!==void 0&&St.trackComposite!==null?a.TrackCompositeEgressRequest.fromPartial(St.trackComposite):void 0,Ft.track=St.track!==void 0&&St.track!==null?a.TrackEgressRequest.fromPartial(St.track):void 0,Ft.web=St.web!==void 0&&St.web!==null?a.WebEgressRequest.fromPartial(St.web):void 0,Ft.stream=St.stream!==void 0&&St.stream!==null?a.StreamInfoList.fromPartial(St.stream):void 0,Ft.file=St.file!==void 0&&St.file!==null?a.FileInfo.fromPartial(St.file):void 0,Ft.segments=St.segments!==void 0&&St.segments!==null?a.SegmentsInfo.fromPartial(St.segments):void 0,Ft}};function st(){return{info:[]}}a.StreamInfoList={encode(St,Kt=_.default.Writer.create()){if(St.info!==void 0&&St.info.length!==0)for(const er of St.info)a.StreamInfo.encode(er,Kt.uint32(10).fork()).ldelim();return Kt},decode(St,Kt){const er=St instanceof _.default.Reader?St:new _.default.Reader(St);let kr=Kt===void 0?er.len:er.pos+Kt;const tr=st();for(;er.pos<kr;){const bt=er.uint32();switch(bt>>>3){case 1:tr.info.push(a.StreamInfo.decode(er,er.uint32()));break;default:er.skipType(bt&7);break}}return tr},fromJSON(St){return{info:Array.isArray(St==null?void 0:St.info)?St.info.map(Kt=>a.StreamInfo.fromJSON(Kt)):[]}},toJSON(St){const Kt={};return St.info?Kt.info=St.info.map(er=>er?a.StreamInfo.toJSON(er):void 0):Kt.info=[],Kt},fromPartial(St){var Kt;const er=st();return er.info=((Kt=St.info)===null||Kt===void 0?void 0:Kt.map(kr=>a.StreamInfo.fromPartial(kr)))||[],er}};function Ct(){return{url:"",startedAt:0,endedAt:0,duration:0,status:0}}a.StreamInfo={encode(St,Kt=_.default.Writer.create()){return St.url!==void 0&&St.url!==""&&Kt.uint32(10).string(St.url),St.startedAt!==void 0&&St.startedAt!==0&&Kt.uint32(16).int64(St.startedAt),St.endedAt!==void 0&&St.endedAt!==0&&Kt.uint32(24).int64(St.endedAt),St.duration!==void 0&&St.duration!==0&&Kt.uint32(32).int64(St.duration),St.status!==void 0&&St.status!==0&&Kt.uint32(40).int32(St.status),Kt},decode(St,Kt){const er=St instanceof _.default.Reader?St:new _.default.Reader(St);let kr=Kt===void 0?er.len:er.pos+Kt;const tr=Ct();for(;er.pos<kr;){const bt=er.uint32();switch(bt>>>3){case 1:tr.url=er.string();break;case 2:tr.startedAt=Zr(er.int64());break;case 3:tr.endedAt=Zr(er.int64());break;case 4:tr.duration=Zr(er.int64());break;case 5:tr.status=er.int32();break;default:er.skipType(bt&7);break}}return tr},fromJSON(St){return{url:_r(St.url)?String(St.url):"",startedAt:_r(St.startedAt)?Number(St.startedAt):0,endedAt:_r(St.endedAt)?Number(St.endedAt):0,duration:_r(St.duration)?Number(St.duration):0,status:_r(St.status)?It(St.status):0}},toJSON(St){const Kt={};return St.url!==void 0&&(Kt.url=St.url),St.startedAt!==void 0&&(Kt.startedAt=Math.round(St.startedAt)),St.endedAt!==void 0&&(Kt.endedAt=Math.round(St.endedAt)),St.duration!==void 0&&(Kt.duration=Math.round(St.duration)),St.status!==void 0&&(Kt.status=ut(St.status)),Kt},fromPartial(St){var Kt,er,kr,tr,bt;const jt=Ct();return jt.url=(Kt=St.url)!==null&&Kt!==void 0?Kt:"",jt.startedAt=(er=St.startedAt)!==null&&er!==void 0?er:0,jt.endedAt=(kr=St.endedAt)!==null&&kr!==void 0?kr:0,jt.duration=(tr=St.duration)!==null&&tr!==void 0?tr:0,jt.status=(bt=St.status)!==null&&bt!==void 0?bt:0,jt}};function qt(){return{filename:"",startedAt:0,endedAt:0,duration:0,size:0,location:""}}a.FileInfo={encode(St,Kt=_.default.Writer.create()){return St.filename!==void 0&&St.filename!==""&&Kt.uint32(10).string(St.filename),St.startedAt!==void 0&&St.startedAt!==0&&Kt.uint32(16).int64(St.startedAt),St.endedAt!==void 0&&St.endedAt!==0&&Kt.uint32(24).int64(St.endedAt),St.duration!==void 0&&St.duration!==0&&Kt.uint32(48).int64(St.duration),St.size!==void 0&&St.size!==0&&Kt.uint32(32).int64(St.size),St.location!==void 0&&St.location!==""&&Kt.uint32(42).string(St.location),Kt},decode(St,Kt){const er=St instanceof _.default.Reader?St:new _.default.Reader(St);let kr=Kt===void 0?er.len:er.pos+Kt;const tr=qt();for(;er.pos<kr;){const bt=er.uint32();switch(bt>>>3){case 1:tr.filename=er.string();break;case 2:tr.startedAt=Zr(er.int64());break;case 3:tr.endedAt=Zr(er.int64());break;case 6:tr.duration=Zr(er.int64());break;case 4:tr.size=Zr(er.int64());break;case 5:tr.location=er.string();break;default:er.skipType(bt&7);break}}return tr},fromJSON(St){return{filename:_r(St.filename)?String(St.filename):"",startedAt:_r(St.startedAt)?Number(St.startedAt):0,endedAt:_r(St.endedAt)?Number(St.endedAt):0,duration:_r(St.duration)?Number(St.duration):0,size:_r(St.size)?Number(St.size):0,location:_r(St.location)?String(St.location):""}},toJSON(St){const Kt={};return St.filename!==void 0&&(Kt.filename=St.filename),St.startedAt!==void 0&&(Kt.startedAt=Math.round(St.startedAt)),St.endedAt!==void 0&&(Kt.endedAt=Math.round(St.endedAt)),St.duration!==void 0&&(Kt.duration=Math.round(St.duration)),St.size!==void 0&&(Kt.size=Math.round(St.size)),St.location!==void 0&&(Kt.location=St.location),Kt},fromPartial(St){var Kt,er,kr,tr,bt,jt;const Ut=qt();return Ut.filename=(Kt=St.filename)!==null&&Kt!==void 0?Kt:"",Ut.startedAt=(er=St.startedAt)!==null&&er!==void 0?er:0,Ut.endedAt=(kr=St.endedAt)!==null&&kr!==void 0?kr:0,Ut.duration=(tr=St.duration)!==null&&tr!==void 0?tr:0,Ut.size=(bt=St.size)!==null&&bt!==void 0?bt:0,Ut.location=(jt=St.location)!==null&&jt!==void 0?jt:"",Ut}};function cr(){return{playlistName:"",duration:0,size:0,playlistLocation:"",segmentCount:0,startedAt:0,endedAt:0}}a.SegmentsInfo={encode(St,Kt=_.default.Writer.create()){return St.playlistName!==void 0&&St.playlistName!==""&&Kt.uint32(10).string(St.playlistName),St.duration!==void 0&&St.duration!==0&&Kt.uint32(16).int64(St.duration),St.size!==void 0&&St.size!==0&&Kt.uint32(24).int64(St.size),St.playlistLocation!==void 0&&St.playlistLocation!==""&&Kt.uint32(34).string(St.playlistLocation),St.segmentCount!==void 0&&St.segmentCount!==0&&Kt.uint32(40).int64(St.segmentCount),St.startedAt!==void 0&&St.startedAt!==0&&Kt.uint32(48).int64(St.startedAt),St.endedAt!==void 0&&St.endedAt!==0&&Kt.uint32(56).int64(St.endedAt),Kt},decode(St,Kt){const er=St instanceof _.default.Reader?St:new _.default.Reader(St);let kr=Kt===void 0?er.len:er.pos+Kt;const tr=cr();for(;er.pos<kr;){const bt=er.uint32();switch(bt>>>3){case 1:tr.playlistName=er.string();break;case 2:tr.duration=Zr(er.int64());break;case 3:tr.size=Zr(er.int64());break;case 4:tr.playlistLocation=er.string();break;case 5:tr.segmentCount=Zr(er.int64());break;case 6:tr.startedAt=Zr(er.int64());break;case 7:tr.endedAt=Zr(er.int64());break;default:er.skipType(bt&7);break}}return tr},fromJSON(St){return{playlistName:_r(St.playlistName)?String(St.playlistName):"",duration:_r(St.duration)?Number(St.duration):0,size:_r(St.size)?Number(St.size):0,playlistLocation:_r(St.playlistLocation)?String(St.playlistLocation):"",segmentCount:_r(St.segmentCount)?Number(St.segmentCount):0,startedAt:_r(St.startedAt)?Number(St.startedAt):0,endedAt:_r(St.endedAt)?Number(St.endedAt):0}},toJSON(St){const Kt={};return St.playlistName!==void 0&&(Kt.playlistName=St.playlistName),St.duration!==void 0&&(Kt.duration=Math.round(St.duration)),St.size!==void 0&&(Kt.size=Math.round(St.size)),St.playlistLocation!==void 0&&(Kt.playlistLocation=St.playlistLocation),St.segmentCount!==void 0&&(Kt.segmentCount=Math.round(St.segmentCount)),St.startedAt!==void 0&&(Kt.startedAt=Math.round(St.startedAt)),St.endedAt!==void 0&&(Kt.endedAt=Math.round(St.endedAt)),Kt},fromPartial(St){var Kt,er,kr,tr,bt,jt,Ut;const Ft=cr();return Ft.playlistName=(Kt=St.playlistName)!==null&&Kt!==void 0?Kt:"",Ft.duration=(er=St.duration)!==null&&er!==void 0?er:0,Ft.size=(kr=St.size)!==null&&kr!==void 0?kr:0,Ft.playlistLocation=(tr=St.playlistLocation)!==null&&tr!==void 0?tr:"",Ft.segmentCount=(bt=St.segmentCount)!==null&&bt!==void 0?bt:0,Ft.startedAt=(jt=St.startedAt)!==null&&jt!==void 0?jt:0,Ft.endedAt=(Ut=St.endedAt)!==null&&Ut!==void 0?Ut:0,Ft}};function dr(){return{filepath:"",disableManifest:!1,s3:void 0,gcp:void 0,azure:void 0}}a.AutoTrackEgress={encode(St,Kt=_.default.Writer.create()){return St.filepath!==void 0&&St.filepath!==""&&Kt.uint32(10).string(St.filepath),St.disableManifest===!0&&Kt.uint32(40).bool(St.disableManifest),St.s3!==void 0&&a.S3Upload.encode(St.s3,Kt.uint32(18).fork()).ldelim(),St.gcp!==void 0&&a.GCPUpload.encode(St.gcp,Kt.uint32(26).fork()).ldelim(),St.azure!==void 0&&a.AzureBlobUpload.encode(St.azure,Kt.uint32(34).fork()).ldelim(),Kt},decode(St,Kt){const er=St instanceof _.default.Reader?St:new _.default.Reader(St);let kr=Kt===void 0?er.len:er.pos+Kt;const tr=dr();for(;er.pos<kr;){const bt=er.uint32();switch(bt>>>3){case 1:tr.filepath=er.string();break;case 5:tr.disableManifest=er.bool();break;case 2:tr.s3=a.S3Upload.decode(er,er.uint32());break;case 3:tr.gcp=a.GCPUpload.decode(er,er.uint32());break;case 4:tr.azure=a.AzureBlobUpload.decode(er,er.uint32());break;default:er.skipType(bt&7);break}}return tr},fromJSON(St){return{filepath:_r(St.filepath)?String(St.filepath):"",disableManifest:_r(St.disableManifest)?!!St.disableManifest:!1,s3:_r(St.s3)?a.S3Upload.fromJSON(St.s3):void 0,gcp:_r(St.gcp)?a.GCPUpload.fromJSON(St.gcp):void 0,azure:_r(St.azure)?a.AzureBlobUpload.fromJSON(St.azure):void 0}},toJSON(St){const Kt={};return St.filepath!==void 0&&(Kt.filepath=St.filepath),St.disableManifest!==void 0&&(Kt.disableManifest=St.disableManifest),St.s3!==void 0&&(Kt.s3=St.s3?a.S3Upload.toJSON(St.s3):void 0),St.gcp!==void 0&&(Kt.gcp=St.gcp?a.GCPUpload.toJSON(St.gcp):void 0),St.azure!==void 0&&(Kt.azure=St.azure?a.AzureBlobUpload.toJSON(St.azure):void 0),Kt},fromPartial(St){var Kt,er;const kr=dr();return kr.filepath=(Kt=St.filepath)!==null&&Kt!==void 0?Kt:"",kr.disableManifest=(er=St.disableManifest)!==null&&er!==void 0?er:!1,kr.s3=St.s3!==void 0&&St.s3!==null?a.S3Upload.fromPartial(St.s3):void 0,kr.gcp=St.gcp!==void 0&&St.gcp!==null?a.GCPUpload.fromPartial(St.gcp):void 0,kr.azure=St.azure!==void 0&&St.azure!==null?a.AzureBlobUpload.fromPartial(St.azure):void 0,kr}};var Er=(()=>{if(typeof Er<"u")return Er;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof commonjsGlobal$1<"u")return commonjsGlobal$1;throw"Unable to locate global object"})();function Tr(St){if(Er.Buffer)return Uint8Array.from(Er.Buffer.from(St,"base64"));{const Kt=Er.atob(St),er=new Uint8Array(Kt.length);for(let kr=0;kr<Kt.length;++kr)er[kr]=Kt.charCodeAt(kr);return er}}function gr(St){if(Er.Buffer)return Er.Buffer.from(St).toString("base64");{const Kt=[];return St.forEach(er=>{Kt.push(String.fromCharCode(er))}),Er.btoa(Kt.join(""))}}function Zr(St){if(St.gt(Number.MAX_SAFE_INTEGER))throw new Er.Error("Value is larger than Number.MAX_SAFE_INTEGER");return St.toNumber()}_.default.util.Long!==b.default&&(_.default.util.Long=b.default,_.default.configure());function Pr(St){return typeof St=="object"&&St!==null}function _r(St){return St!=null}})(livekit_egress);var ServiceBase$1={};Object.defineProperty(ServiceBase$1,"__esModule",{value:!0});const AccessToken_1$1=AccessToken$1;class ServiceBase{constructor(c,b,_){this.apiKey=c,this.secret=b,this.ttl=_||"10m"}authHeader(c){const b=new AccessToken_1$1.AccessToken(this.apiKey,this.secret,{ttl:this.ttl});return b.addGrant(c),{Authorization:`Bearer ${b.toJwt()}`}}}ServiceBase$1.default=ServiceBase;var TwirpRPC={},axios$2={exports:{}},bind$2=function a(c,b){return function(){for(var $=new Array(arguments.length),k=0;k<$.length;k++)$[k]=arguments[k];return c.apply(b,$)}},bind$1=bind$2,toString=Object.prototype.toString;function isArray$1(a){return toString.call(a)==="[object Array]"}function isUndefined(a){return typeof a>"u"}function isBuffer(a){return a!==null&&!isUndefined(a)&&a.constructor!==null&&!isUndefined(a.constructor)&&typeof a.constructor.isBuffer=="function"&&a.constructor.isBuffer(a)}function isArrayBuffer(a){return toString.call(a)==="[object ArrayBuffer]"}function isFormData(a){return typeof FormData<"u"&&a instanceof FormData}function isArrayBufferView(a){var c;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?c=ArrayBuffer.isView(a):c=a&&a.buffer&&a.buffer instanceof ArrayBuffer,c}function isString(a){return typeof a=="string"}function isNumber(a){return typeof a=="number"}function isObject$2(a){return a!==null&&typeof a=="object"}function isPlainObject(a){if(toString.call(a)!=="[object Object]")return!1;var c=Object.getPrototypeOf(a);return c===null||c===Object.prototype}function isDate(a){return toString.call(a)==="[object Date]"}function isFile(a){return toString.call(a)==="[object File]"}function isBlob(a){return toString.call(a)==="[object Blob]"}function isFunction(a){return toString.call(a)==="[object Function]"}function isStream(a){return isObject$2(a)&&isFunction(a.pipe)}function isURLSearchParams(a){return typeof URLSearchParams<"u"&&a instanceof URLSearchParams}function trim$1(a){return a.trim?a.trim():a.replace(/^\s+|\s+$/g,"")}function isStandardBrowserEnv(){return typeof navigator<"u"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window<"u"&&typeof document<"u"}function forEach(a,c){if(!(a===null||typeof a>"u"))if(typeof a!="object"&&(a=[a]),isArray$1(a))for(var b=0,_=a.length;b<_;b++)c.call(null,a[b],b,a);else for(var $ in a)Object.prototype.hasOwnProperty.call(a,$)&&c.call(null,a[$],$,a)}function merge(){var a={};function c($,k){isPlainObject(a[k])&&isPlainObject($)?a[k]=merge(a[k],$):isPlainObject($)?a[k]=merge({},$):isArray$1($)?a[k]=$.slice():a[k]=$}for(var b=0,_=arguments.length;b<_;b++)forEach(arguments[b],c);return a}function extend(a,c,b){return forEach(c,function($,k){b&&typeof $=="function"?a[k]=bind$1($,b):a[k]=$}),a}function stripBOM(a){return a.charCodeAt(0)===65279&&(a=a.slice(1)),a}var utils$9={isArray:isArray$1,isArrayBuffer,isBuffer,isFormData,isArrayBufferView,isString,isNumber,isObject:isObject$2,isPlainObject,isUndefined,isDate,isFile,isBlob,isFunction,isStream,isURLSearchParams,isStandardBrowserEnv,forEach,merge,extend,trim:trim$1,stripBOM},utils$8=utils$9;function encode(a){return encodeURIComponent(a).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var buildURL$1=function a(c,b,_){if(!b)return c;var $;if(_)$=_(b);else if(utils$8.isURLSearchParams(b))$=b.toString();else{var k=[];utils$8.forEach(b,function(ot,ht){ot===null||typeof ot>"u"||(utils$8.isArray(ot)?ht=ht+"[]":ot=[ot],utils$8.forEach(ot,function(_t){utils$8.isDate(_t)?_t=_t.toISOString():utils$8.isObject(_t)&&(_t=JSON.stringify(_t)),k.push(encode(ht)+"="+encode(_t))}))}),$=k.join("&")}if($){var et=c.indexOf("#");et!==-1&&(c=c.slice(0,et)),c+=(c.indexOf("?")===-1?"?":"&")+$}return c},utils$7=utils$9;function InterceptorManager$1(){this.handlers=[]}InterceptorManager$1.prototype.use=function a(c,b,_){return this.handlers.push({fulfilled:c,rejected:b,synchronous:_?_.synchronous:!1,runWhen:_?_.runWhen:null}),this.handlers.length-1};InterceptorManager$1.prototype.eject=function a(c){this.handlers[c]&&(this.handlers[c]=null)};InterceptorManager$1.prototype.forEach=function a(c){utils$7.forEach(this.handlers,function(_){_!==null&&c(_)})};var InterceptorManager_1=InterceptorManager$1,utils$6=utils$9,normalizeHeaderName$1=function a(c,b){utils$6.forEach(c,function($,k){k!==b&&k.toUpperCase()===b.toUpperCase()&&(c[b]=$,delete c[k])})},enhanceError$1=function a(c,b,_,$,k){return c.config=b,_&&(c.code=_),c.request=$,c.response=k,c.isAxiosError=!0,c.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},c},createError,hasRequiredCreateError;function requireCreateError(){if(hasRequiredCreateError)return createError;hasRequiredCreateError=1;var a=enhanceError$1;return createError=function(b,_,$,k,et){var nt=new Error(b);return a(nt,_,$,k,et)},createError}var settle,hasRequiredSettle;function requireSettle(){if(hasRequiredSettle)return settle;hasRequiredSettle=1;var a=requireCreateError();return settle=function(b,_,$){var k=$.config.validateStatus;!$.status||!k||k($.status)?b($):_(a("Request failed with status code "+$.status,$.config,null,$.request,$))},settle}var cookies,hasRequiredCookies;function requireCookies(){if(hasRequiredCookies)return cookies;hasRequiredCookies=1;var a=utils$9;return cookies=a.isStandardBrowserEnv()?function(){return{write:function(_,$,k,et,nt,ot){var ht=[];ht.push(_+"="+encodeURIComponent($)),a.isNumber(k)&&ht.push("expires="+new Date(k).toGMTString()),a.isString(et)&&ht.push("path="+et),a.isString(nt)&&ht.push("domain="+nt),ot===!0&&ht.push("secure"),document.cookie=ht.join("; ")},read:function(_){var $=document.cookie.match(new RegExp("(^|;\\s*)("+_+")=([^;]*)"));return $?decodeURIComponent($[3]):null},remove:function(_){this.write(_,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),cookies}var isAbsoluteURL,hasRequiredIsAbsoluteURL;function requireIsAbsoluteURL(){return hasRequiredIsAbsoluteURL||(hasRequiredIsAbsoluteURL=1,isAbsoluteURL=function(c){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(c)}),isAbsoluteURL}var combineURLs,hasRequiredCombineURLs;function requireCombineURLs(){return hasRequiredCombineURLs||(hasRequiredCombineURLs=1,combineURLs=function(c,b){return b?c.replace(/\/+$/,"")+"/"+b.replace(/^\/+/,""):c}),combineURLs}var buildFullPath,hasRequiredBuildFullPath;function requireBuildFullPath(){if(hasRequiredBuildFullPath)return buildFullPath;hasRequiredBuildFullPath=1;var a=requireIsAbsoluteURL(),c=requireCombineURLs();return buildFullPath=function(_,$){return _&&!a($)?c(_,$):$},buildFullPath}var parseHeaders,hasRequiredParseHeaders;function requireParseHeaders(){if(hasRequiredParseHeaders)return parseHeaders;hasRequiredParseHeaders=1;var a=utils$9,c=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];return parseHeaders=function(_){var $={},k,et,nt;return _&&a.forEach(_.split(`
`),function(ht){if(nt=ht.indexOf(":"),k=a.trim(ht.substr(0,nt)).toLowerCase(),et=a.trim(ht.substr(nt+1)),k){if($[k]&&c.indexOf(k)>=0)return;k==="set-cookie"?$[k]=($[k]?$[k]:[]).concat([et]):$[k]=$[k]?$[k]+", "+et:et}}),$},parseHeaders}var isURLSameOrigin,hasRequiredIsURLSameOrigin;function requireIsURLSameOrigin(){if(hasRequiredIsURLSameOrigin)return isURLSameOrigin;hasRequiredIsURLSameOrigin=1;var a=utils$9;return isURLSameOrigin=a.isStandardBrowserEnv()?function(){var b=/(msie|trident)/i.test(navigator.userAgent),_=document.createElement("a"),$;function k(et){var nt=et;return b&&(_.setAttribute("href",nt),nt=_.href),_.setAttribute("href",nt),{href:_.href,protocol:_.protocol?_.protocol.replace(/:$/,""):"",host:_.host,search:_.search?_.search.replace(/^\?/,""):"",hash:_.hash?_.hash.replace(/^#/,""):"",hostname:_.hostname,port:_.port,pathname:_.pathname.charAt(0)==="/"?_.pathname:"/"+_.pathname}}return $=k(window.location.href),function(nt){var ot=a.isString(nt)?k(nt):nt;return ot.protocol===$.protocol&&ot.host===$.host}}():function(){return function(){return!0}}(),isURLSameOrigin}var xhr,hasRequiredXhr;function requireXhr(){if(hasRequiredXhr)return xhr;hasRequiredXhr=1;var a=utils$9,c=requireSettle(),b=requireCookies(),_=buildURL$1,$=requireBuildFullPath(),k=requireParseHeaders(),et=requireIsURLSameOrigin(),nt=requireCreateError();return xhr=function(ht){return new Promise(function(_t,kt){var $t=ht.data,Tt=ht.headers,At=ht.responseType;a.isFormData($t)&&delete Tt["Content-Type"];var Mt=new XMLHttpRequest;if(ht.auth){var Dt=ht.auth.username||"",Rt=ht.auth.password?unescape(encodeURIComponent(ht.auth.password)):"";Tt.Authorization="Basic "+btoa(Dt+":"+Rt)}var xt=$(ht.baseURL,ht.url);Mt.open(ht.method.toUpperCase(),_(xt,ht.params,ht.paramsSerializer),!0),Mt.timeout=ht.timeout;function Jt(){if(Mt){var nr="getAllResponseHeaders"in Mt?k(Mt.getAllResponseHeaders()):null,pr=!At||At==="text"||At==="json"?Mt.responseText:Mt.response,ur={data:pr,status:Mt.status,statusText:Mt.statusText,headers:nr,config:ht,request:Mt};c(_t,kt,ur),Mt=null}}if("onloadend"in Mt?Mt.onloadend=Jt:Mt.onreadystatechange=function(){!Mt||Mt.readyState!==4||Mt.status===0&&!(Mt.responseURL&&Mt.responseURL.indexOf("file:")===0)||setTimeout(Jt)},Mt.onabort=function(){Mt&&(kt(nt("Request aborted",ht,"ECONNABORTED",Mt)),Mt=null)},Mt.onerror=function(){kt(nt("Network Error",ht,null,Mt)),Mt=null},Mt.ontimeout=function(){var pr="timeout of "+ht.timeout+"ms exceeded";ht.timeoutErrorMessage&&(pr=ht.timeoutErrorMessage),kt(nt(pr,ht,ht.transitional&&ht.transitional.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",Mt)),Mt=null},a.isStandardBrowserEnv()){var ar=(ht.withCredentials||et(xt))&&ht.xsrfCookieName?b.read(ht.xsrfCookieName):void 0;ar&&(Tt[ht.xsrfHeaderName]=ar)}"setRequestHeader"in Mt&&a.forEach(Tt,function(pr,ur){typeof $t>"u"&&ur.toLowerCase()==="content-type"?delete Tt[ur]:Mt.setRequestHeader(ur,pr)}),a.isUndefined(ht.withCredentials)||(Mt.withCredentials=!!ht.withCredentials),At&&At!=="json"&&(Mt.responseType=ht.responseType),typeof ht.onDownloadProgress=="function"&&Mt.addEventListener("progress",ht.onDownloadProgress),typeof ht.onUploadProgress=="function"&&Mt.upload&&Mt.upload.addEventListener("progress",ht.onUploadProgress),ht.cancelToken&&ht.cancelToken.promise.then(function(pr){Mt&&(Mt.abort(),kt(pr),Mt=null)}),$t||($t=null),Mt.send($t)})},xhr}var utils$5=utils$9,normalizeHeaderName=normalizeHeaderName$1,enhanceError=enhanceError$1,DEFAULT_CONTENT_TYPE={"Content-Type":"application/x-www-form-urlencoded"};function setContentTypeIfUnset(a,c){!utils$5.isUndefined(a)&&utils$5.isUndefined(a["Content-Type"])&&(a["Content-Type"]=c)}function getDefaultAdapter(){var a;return(typeof XMLHttpRequest<"u"||typeof process$1<"u"&&Object.prototype.toString.call(process$1)==="[object process]")&&(a=requireXhr()),a}function stringifySafely(a,c,b){if(utils$5.isString(a))try{return(c||JSON.parse)(a),utils$5.trim(a)}catch(_){if(_.name!=="SyntaxError")throw _}return(b||JSON.stringify)(a)}var defaults$3={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:getDefaultAdapter(),transformRequest:[function a(c,b){return normalizeHeaderName(b,"Accept"),normalizeHeaderName(b,"Content-Type"),utils$5.isFormData(c)||utils$5.isArrayBuffer(c)||utils$5.isBuffer(c)||utils$5.isStream(c)||utils$5.isFile(c)||utils$5.isBlob(c)?c:utils$5.isArrayBufferView(c)?c.buffer:utils$5.isURLSearchParams(c)?(setContentTypeIfUnset(b,"application/x-www-form-urlencoded;charset=utf-8"),c.toString()):utils$5.isObject(c)||b&&b["Content-Type"]==="application/json"?(setContentTypeIfUnset(b,"application/json"),stringifySafely(c)):c}],transformResponse:[function a(c){var b=this.transitional,_=b&&b.silentJSONParsing,$=b&&b.forcedJSONParsing,k=!_&&this.responseType==="json";if(k||$&&utils$5.isString(c)&&c.length)try{return JSON.parse(c)}catch(et){if(k)throw et.name==="SyntaxError"?enhanceError(et,this,"E_JSON_PARSE"):et}return c}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function a(c){return c>=200&&c<300}};defaults$3.headers={common:{Accept:"application/json, text/plain, */*"}};utils$5.forEach(["delete","get","head"],function a(c){defaults$3.headers[c]={}});utils$5.forEach(["post","put","patch"],function a(c){defaults$3.headers[c]=utils$5.merge(DEFAULT_CONTENT_TYPE)});var defaults_1=defaults$3,utils$4=utils$9,defaults$2=defaults_1,transformData$1=function a(c,b,_){var $=this||defaults$2;return utils$4.forEach(_,function(et){c=et.call($,c,b)}),c},isCancel$1,hasRequiredIsCancel;function requireIsCancel(){return hasRequiredIsCancel||(hasRequiredIsCancel=1,isCancel$1=function(c){return!!(c&&c.__CANCEL__)}),isCancel$1}var utils$3=utils$9,transformData=transformData$1,isCancel=requireIsCancel(),defaults$1=defaults_1;function throwIfCancellationRequested(a){a.cancelToken&&a.cancelToken.throwIfRequested()}var dispatchRequest$1=function a(c){throwIfCancellationRequested(c),c.headers=c.headers||{},c.data=transformData.call(c,c.data,c.headers,c.transformRequest),c.headers=utils$3.merge(c.headers.common||{},c.headers[c.method]||{},c.headers),utils$3.forEach(["delete","get","head","post","put","patch","common"],function($){delete c.headers[$]});var b=c.adapter||defaults$1.adapter;return b(c).then(function($){return throwIfCancellationRequested(c),$.data=transformData.call(c,$.data,$.headers,c.transformResponse),$},function($){return isCancel($)||(throwIfCancellationRequested(c),$&&$.response&&($.response.data=transformData.call(c,$.response.data,$.response.headers,c.transformResponse))),Promise.reject($)})},utils$2=utils$9,mergeConfig$2=function a(c,b){b=b||{};var _={},$=["url","method","data"],k=["headers","auth","proxy","params"],et=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],nt=["validateStatus"];function ot(kt,$t){return utils$2.isPlainObject(kt)&&utils$2.isPlainObject($t)?utils$2.merge(kt,$t):utils$2.isPlainObject($t)?utils$2.merge({},$t):utils$2.isArray($t)?$t.slice():$t}function ht(kt){utils$2.isUndefined(b[kt])?utils$2.isUndefined(c[kt])||(_[kt]=ot(void 0,c[kt])):_[kt]=ot(c[kt],b[kt])}utils$2.forEach($,function($t){utils$2.isUndefined(b[$t])||(_[$t]=ot(void 0,b[$t]))}),utils$2.forEach(k,ht),utils$2.forEach(et,function($t){utils$2.isUndefined(b[$t])?utils$2.isUndefined(c[$t])||(_[$t]=ot(void 0,c[$t])):_[$t]=ot(void 0,b[$t])}),utils$2.forEach(nt,function($t){$t in b?_[$t]=ot(c[$t],b[$t]):$t in c&&(_[$t]=ot(void 0,c[$t]))});var vt=$.concat(k).concat(et).concat(nt),_t=Object.keys(c).concat(Object.keys(b)).filter(function($t){return vt.indexOf($t)===-1});return utils$2.forEach(_t,ht),_};const name="axios",version="0.21.4",description="Promise based HTTP client for the browser and node.js",main="index.js",scripts={test:"grunt test",start:"node ./sandbox/server.js",build:"NODE_ENV=production grunt build",preversion:"npm test",version:"npm run build && grunt version && git add -A dist && git add CHANGELOG.md bower.json package.json",postversion:"git push && git push --tags",examples:"node ./examples/server.js",coveralls:"cat coverage/lcov.info | ./node_modules/coveralls/bin/coveralls.js",fix:"eslint --fix lib/**/*.js"},repository={type:"git",url:"https://github.com/axios/axios.git"},keywords=["xhr","http","ajax","promise","node"],author="Matt Zabriskie",license="MIT",bugs={url:"https://github.com/axios/axios/issues"},homepage="https://axios-http.com",devDependencies={coveralls:"^3.0.0","es6-promise":"^4.2.4",grunt:"^1.3.0","grunt-banner":"^0.6.0","grunt-cli":"^1.2.0","grunt-contrib-clean":"^1.1.0","grunt-contrib-watch":"^1.0.0","grunt-eslint":"^23.0.0","grunt-karma":"^4.0.0","grunt-mocha-test":"^0.13.3","grunt-ts":"^6.0.0-beta.19","grunt-webpack":"^4.0.2","istanbul-instrumenter-loader":"^1.0.0","jasmine-core":"^2.4.1",karma:"^6.3.2","karma-chrome-launcher":"^3.1.0","karma-firefox-launcher":"^2.1.0","karma-jasmine":"^1.1.1","karma-jasmine-ajax":"^0.1.13","karma-safari-launcher":"^1.0.0","karma-sauce-launcher":"^4.3.6","karma-sinon":"^1.0.5","karma-sourcemap-loader":"^0.3.8","karma-webpack":"^4.0.2","load-grunt-tasks":"^3.5.2",minimist:"^1.2.0",mocha:"^8.2.1",sinon:"^4.5.0","terser-webpack-plugin":"^4.2.3",typescript:"^4.0.5","url-search-params":"^0.10.0",webpack:"^4.44.2","webpack-dev-server":"^3.11.0"},browser={"./lib/adapters/http.js":"./lib/adapters/xhr.js"},jsdelivr="dist/axios.min.js",unpkg="dist/axios.min.js",typings="./index.d.ts",dependencies={"follow-redirects":"^1.14.0"},bundlesize=[{path:"./dist/axios.min.js",threshold:"5kB"}],require$$0={name,version,description,main,scripts,repository,keywords,author,license,bugs,homepage,devDependencies,browser,jsdelivr,unpkg,typings,dependencies,bundlesize};var pkg=require$$0,validators$1={};["object","boolean","number","function","string","symbol"].forEach(function(a,c){validators$1[a]=function(_){return typeof _===a||"a"+(c<1?"n ":" ")+a}});var deprecatedWarnings={},currentVerArr=pkg.version.split(".");function isOlderVersion(a,c){for(var b=c?c.split("."):currentVerArr,_=a.split("."),$=0;$<3;$++){if(b[$]>_[$])return!0;if(b[$]<_[$])return!1}return!1}validators$1.transitional=function a(c,b,_){var $=b&&isOlderVersion(b);function k(et,nt){return"[Axios v"+pkg.version+"] Transitional option '"+et+"'"+nt+(_?". "+_:"")}return function(et,nt,ot){if(c===!1)throw new Error(k(nt," has been removed in "+b));return $&&!deprecatedWarnings[nt]&&(deprecatedWarnings[nt]=!0,console.warn(k(nt," has been deprecated since v"+b+" and will be removed in the near future"))),c?c(et,nt,ot):!0}};function assertOptions(a,c,b){if(typeof a!="object")throw new TypeError("options must be an object");for(var _=Object.keys(a),$=_.length;$-- >0;){var k=_[$],et=c[k];if(et){var nt=a[k],ot=nt===void 0||et(nt,k,a);if(ot!==!0)throw new TypeError("option "+k+" must be "+ot);continue}if(b!==!0)throw Error("Unknown option "+k)}}var validator$1={isOlderVersion,assertOptions,validators:validators$1},utils$1=utils$9,buildURL=buildURL$1,InterceptorManager=InterceptorManager_1,dispatchRequest=dispatchRequest$1,mergeConfig$1=mergeConfig$2,validator=validator$1,validators=validator.validators;function Axios$1(a){this.defaults=a,this.interceptors={request:new InterceptorManager,response:new InterceptorManager}}Axios$1.prototype.request=function a(c){typeof c=="string"?(c=arguments[1]||{},c.url=arguments[0]):c=c||{},c=mergeConfig$1(this.defaults,c),c.method?c.method=c.method.toLowerCase():this.defaults.method?c.method=this.defaults.method.toLowerCase():c.method="get";var b=c.transitional;b!==void 0&&validator.assertOptions(b,{silentJSONParsing:validators.transitional(validators.boolean,"1.0.0"),forcedJSONParsing:validators.transitional(validators.boolean,"1.0.0"),clarifyTimeoutError:validators.transitional(validators.boolean,"1.0.0")},!1);var _=[],$=!0;this.interceptors.request.forEach(function(kt){typeof kt.runWhen=="function"&&kt.runWhen(c)===!1||($=$&&kt.synchronous,_.unshift(kt.fulfilled,kt.rejected))});var k=[];this.interceptors.response.forEach(function(kt){k.push(kt.fulfilled,kt.rejected)});var et;if(!$){var nt=[dispatchRequest,void 0];for(Array.prototype.unshift.apply(nt,_),nt=nt.concat(k),et=Promise.resolve(c);nt.length;)et=et.then(nt.shift(),nt.shift());return et}for(var ot=c;_.length;){var ht=_.shift(),vt=_.shift();try{ot=ht(ot)}catch(_t){vt(_t);break}}try{et=dispatchRequest(ot)}catch(_t){return Promise.reject(_t)}for(;k.length;)et=et.then(k.shift(),k.shift());return et};Axios$1.prototype.getUri=function a(c){return c=mergeConfig$1(this.defaults,c),buildURL(c.url,c.params,c.paramsSerializer).replace(/^\?/,"")};utils$1.forEach(["delete","get","head","options"],function a(c){Axios$1.prototype[c]=function(b,_){return this.request(mergeConfig$1(_||{},{method:c,url:b,data:(_||{}).data}))}});utils$1.forEach(["post","put","patch"],function a(c){Axios$1.prototype[c]=function(b,_,$){return this.request(mergeConfig$1($||{},{method:c,url:b,data:_}))}});var Axios_1=Axios$1,Cancel_1,hasRequiredCancel;function requireCancel(){if(hasRequiredCancel)return Cancel_1;hasRequiredCancel=1;function a(c){this.message=c}return a.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},a.prototype.__CANCEL__=!0,Cancel_1=a,Cancel_1}var CancelToken_1,hasRequiredCancelToken;function requireCancelToken(){if(hasRequiredCancelToken)return CancelToken_1;hasRequiredCancelToken=1;var a=requireCancel();function c(b){if(typeof b!="function")throw new TypeError("executor must be a function.");var _;this.promise=new Promise(function(et){_=et});var $=this;b(function(et){$.reason||($.reason=new a(et),_($.reason))})}return c.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},c.source=function(){var _,$=new c(function(et){_=et});return{token:$,cancel:_}},CancelToken_1=c,CancelToken_1}var spread,hasRequiredSpread;function requireSpread(){return hasRequiredSpread||(hasRequiredSpread=1,spread=function(c){return function(_){return c.apply(null,_)}}),spread}var isAxiosError,hasRequiredIsAxiosError;function requireIsAxiosError(){return hasRequiredIsAxiosError||(hasRequiredIsAxiosError=1,isAxiosError=function(c){return typeof c=="object"&&c.isAxiosError===!0}),isAxiosError}var utils=utils$9,bind=bind$2,Axios=Axios_1,mergeConfig=mergeConfig$2,defaults=defaults_1;function createInstance(a){var c=new Axios(a),b=bind(Axios.prototype.request,c);return utils.extend(b,Axios.prototype,c),utils.extend(b,c),b}var axios$1=createInstance(defaults);axios$1.Axios=Axios;axios$1.create=function a(c){return createInstance(mergeConfig(axios$1.defaults,c))};axios$1.Cancel=requireCancel();axios$1.CancelToken=requireCancelToken();axios$1.isCancel=requireIsCancel();axios$1.all=function a(c){return Promise.all(c)};axios$1.spread=requireSpread();axios$1.isAxiosError=requireIsAxiosError();axios$2.exports=axios$1;axios$2.exports.default=axios$1;var axiosExports=axios$2.exports,axios=axiosExports,mapObj$1={exports:{}};const isObject$1=a=>typeof a=="object"&&a!==null,mapObjectSkip=Symbol("skip"),isObjectCustom=a=>isObject$1(a)&&!(a instanceof RegExp)&&!(a instanceof Error)&&!(a instanceof Date),mapObject=(a,c,b,_=new WeakMap)=>{if(b={deep:!1,target:{},...b},_.has(a))return _.get(a);_.set(a,b.target);const{target:$}=b;delete b.target;const k=et=>et.map(nt=>isObjectCustom(nt)?mapObject(nt,c,b,_):nt);if(Array.isArray(a))return k(a);for(const[et,nt]of Object.entries(a)){const ot=c(et,nt,a);if(ot===mapObjectSkip)continue;let[ht,vt,{shouldRecurse:_t=!0}={}]=ot;ht!=="__proto__"&&(b.deep&&_t&&isObjectCustom(vt)&&(vt=Array.isArray(vt)?k(vt):mapObject(vt,c,b,_)),$[ht]=vt)}return $};mapObj$1.exports=(a,c,b)=>{if(!isObject$1(a))throw new TypeError(`Expected an object, got \`${a}\` (${typeof a})`);return mapObject(a,c,b)};mapObj$1.exports.mapObjectSkip=mapObjectSkip;var mapObjExports=mapObj$1.exports,camelcase={exports:{}};const UPPERCASE=/[\p{Lu}]/u,LOWERCASE=/[\p{Ll}]/u,LEADING_CAPITAL=/^[\p{Lu}](?![\p{Lu}])/gu,IDENTIFIER=/([\p{Alpha}\p{N}_]|$)/u,SEPARATORS=/[_.\- ]+/,LEADING_SEPARATORS=new RegExp("^"+SEPARATORS.source),SEPARATORS_AND_IDENTIFIER=new RegExp(SEPARATORS.source+IDENTIFIER.source,"gu"),NUMBERS_AND_IDENTIFIER=new RegExp("\\d+"+IDENTIFIER.source,"gu"),preserveCamelCase=(a,c,b)=>{let _=!1,$=!1,k=!1;for(let et=0;et<a.length;et++){const nt=a[et];_&&UPPERCASE.test(nt)?(a=a.slice(0,et)+"-"+a.slice(et),_=!1,k=$,$=!0,et++):$&&k&&LOWERCASE.test(nt)?(a=a.slice(0,et-1)+"-"+a.slice(et-1),k=$,$=!1,_=!0):(_=c(nt)===nt&&b(nt)!==nt,k=$,$=b(nt)===nt&&c(nt)!==nt)}return a},preserveConsecutiveUppercase=(a,c)=>(LEADING_CAPITAL.lastIndex=0,a.replace(LEADING_CAPITAL,b=>c(b))),postProcess=(a,c)=>(SEPARATORS_AND_IDENTIFIER.lastIndex=0,NUMBERS_AND_IDENTIFIER.lastIndex=0,a.replace(SEPARATORS_AND_IDENTIFIER,(b,_)=>c(_)).replace(NUMBERS_AND_IDENTIFIER,b=>c(b))),camelCase$1=(a,c)=>{if(!(typeof a=="string"||Array.isArray(a)))throw new TypeError("Expected the input to be `string | string[]`");if(c={pascalCase:!1,preserveConsecutiveUppercase:!1,...c},Array.isArray(a)?a=a.map(k=>k.trim()).filter(k=>k.length).join("-"):a=a.trim(),a.length===0)return"";const b=c.locale===!1?k=>k.toLowerCase():k=>k.toLocaleLowerCase(c.locale),_=c.locale===!1?k=>k.toUpperCase():k=>k.toLocaleUpperCase(c.locale);return a.length===1?c.pascalCase?_(a):b(a):(a!==b(a)&&(a=preserveCamelCase(a,b,_)),a=a.replace(LEADING_SEPARATORS,""),c.preserveConsecutiveUppercase?a=preserveConsecutiveUppercase(a,b):a=b(a),c.pascalCase&&(a=_(a.charAt(0))+a.slice(1)),postProcess(a,_))};camelcase.exports=camelCase$1;camelcase.exports.default=camelCase$1;var camelcaseExports=camelcase.exports;class QuickLRU{constructor(c={}){if(!(c.maxSize&&c.maxSize>0))throw new TypeError("`maxSize` must be a number greater than 0");this.maxSize=c.maxSize,this.onEviction=c.onEviction,this.cache=new Map,this.oldCache=new Map,this._size=0}_set(c,b){if(this.cache.set(c,b),this._size++,this._size>=this.maxSize){if(this._size=0,typeof this.onEviction=="function")for(const[_,$]of this.oldCache.entries())this.onEviction(_,$);this.oldCache=this.cache,this.cache=new Map}}get(c){if(this.cache.has(c))return this.cache.get(c);if(this.oldCache.has(c)){const b=this.oldCache.get(c);return this.oldCache.delete(c),this._set(c,b),b}}set(c,b){return this.cache.has(c)?this.cache.set(c,b):this._set(c,b),this}has(c){return this.cache.has(c)||this.oldCache.has(c)}peek(c){if(this.cache.has(c))return this.cache.get(c);if(this.oldCache.has(c))return this.oldCache.get(c)}delete(c){const b=this.cache.delete(c);return b&&this._size--,this.oldCache.delete(c)||b}clear(){this.cache.clear(),this.oldCache.clear(),this._size=0}*keys(){for(const[c]of this)yield c}*values(){for(const[,c]of this)yield c}*[Symbol.iterator](){for(const c of this.cache)yield c;for(const c of this.oldCache){const[b]=c;this.cache.has(b)||(yield c)}}get size(){let c=0;for(const b of this.oldCache.keys())this.cache.has(b)||c++;return Math.min(this._size+c,this.maxSize)}}var quickLru=QuickLRU;const mapObj=mapObjExports,camelCase=camelcaseExports,QuickLru=quickLru,has=(a,c)=>a.some(b=>typeof b=="string"?b===c:(b.lastIndex=0,b.test(c))),cache$1=new QuickLru({maxSize:1e5}),isObject=a=>typeof a=="object"&&a!==null&&!(a instanceof RegExp)&&!(a instanceof Error)&&!(a instanceof Date),camelCaseConvert=(a,c)=>{if(!isObject(a))return a;c={deep:!1,pascalCase:!1,...c};const{exclude:b,pascalCase:_,stopPaths:$,deep:k}=c,et=new Set($),nt=ot=>(ht,vt)=>{if(k&&isObject(vt)){const _t=ot===void 0?ht:`${ot}.${ht}`;et.has(_t)||(vt=mapObj(vt,nt(_t)))}if(!(b&&has(b,ht))){const _t=_?`${ht}_`:ht;if(cache$1.has(_t))ht=cache$1.get(_t);else{const kt=camelCase(ht,{pascalCase:_,locale:!1});ht.length<100&&cache$1.set(_t,kt),ht=kt}}return[ht,vt]};return mapObj(a,nt(void 0))};var camelcaseKeys=(a,c)=>Array.isArray(a)?Object.keys(a).map(b=>camelCaseConvert(a[b],c)):camelCaseConvert(a,c),__importDefault$6=commonjsGlobal$1&&commonjsGlobal$1.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(TwirpRPC,"__esModule",{value:!0});TwirpRPC.TwirpRpc=TwirpRPC.livekitPackage=void 0;const axios_1=__importDefault$6(axios),camelcase_keys_1=__importDefault$6(camelcaseKeys),defaultPrefix="/twirp";TwirpRPC.livekitPackage="livekit";class TwirpRpc{constructor(c,b,_,$){this.host=c,this.pkg=b,this.prefix=_||defaultPrefix,this.instance=axios_1.default.create({baseURL:c,headers:Object.assign({},$?{Host:$}:{})})}request(c,b,_,$){return new Promise((k,et)=>{const nt=`${this.prefix}/${this.pkg}.${c}/${b}`;this.instance.post(nt,_,{headers:$}).then(ot=>{k(camelcase_keys_1.default(ot.data,{deep:!0}))}).catch(et)})}}TwirpRPC.TwirpRpc=TwirpRpc;var __awaiter$2=commonjsGlobal$1&&commonjsGlobal$1.__awaiter||function(a,c,b,_){function $(k){return k instanceof b?k:new b(function(et){et(k)})}return new(b||(b=Promise))(function(k,et){function nt(vt){try{ht(_.next(vt))}catch(_t){et(_t)}}function ot(vt){try{ht(_.throw(vt))}catch(_t){et(_t)}}function ht(vt){vt.done?k(vt.value):$(vt.value).then(nt,ot)}ht((_=_.apply(a,c||[])).next())})},__importDefault$5=commonjsGlobal$1&&commonjsGlobal$1.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(EgressClient$1,"__esModule",{value:!0});EgressClient$1.EgressClient=void 0;const livekit_egress_1$1=livekit_egress,ServiceBase_1$2=__importDefault$5(ServiceBase$1),TwirpRPC_1$2=TwirpRPC,svc$2="Egress";class EgressClient extends ServiceBase_1$2.default{constructor(c,b,_){super(b,_),this.rpc=new TwirpRPC_1$2.TwirpRpc(c,TwirpRPC_1$2.livekitPackage)}startRoomCompositeEgress(c,b,_,$,k,et,nt){return __awaiter$2(this,void 0,void 0,function*(){let ot;if(_!==void 0)if(typeof _=="string")ot=_;else{const Mt=_;ot=Mt.layout,$=Mt.encodingOptions,k=Mt.audioOnly,et=Mt.videoOnly,nt=Mt.customBaseUrl}ot??(ot=""),k??(k=!1),et??(et=!1),nt??(nt="");const{file:ht,segments:vt,stream:_t,preset:kt,advanced:$t}=this.getOutputParams(b,$),Tt=livekit_egress_1$1.RoomCompositeEgressRequest.toJSON({roomName:c,layout:ot,audioOnly:k,videoOnly:et,customBaseUrl:nt,file:ht,stream:_t,segments:vt,preset:kt,advanced:$t}),At=yield this.rpc.request(svc$2,"StartRoomCompositeEgress",Tt,this.authHeader({roomRecord:!0}));return livekit_egress_1$1.EgressInfo.fromJSON(At)})}startWebEgress(c,b,_){return __awaiter$2(this,void 0,void 0,function*(){const $=(_==null?void 0:_.audioOnly)||!1,k=(_==null?void 0:_.videoOnly)||!1,{file:et,segments:nt,stream:ot,preset:ht,advanced:vt}=this.getOutputParams(b,_==null?void 0:_.encodingOptions),_t=livekit_egress_1$1.WebEgressRequest.toJSON({url:c,audioOnly:$,videoOnly:k,file:et,stream:ot,segments:nt,preset:ht,advanced:vt}),kt=yield this.rpc.request(svc$2,"StartWebEgress",_t,this.authHeader({roomRecord:!0}));return livekit_egress_1$1.EgressInfo.fromJSON(kt)})}startTrackCompositeEgress(c,b,_,$,k){return __awaiter$2(this,void 0,void 0,function*(){let et;if(_!==void 0)if(typeof _=="string")et=_;else{const Tt=_;et=Tt.audioTrackId,$=Tt.videoTrackId,k=Tt.encodingOptions}et??(et=""),$??($="");const{file:nt,segments:ot,stream:ht,preset:vt,advanced:_t}=this.getOutputParams(b,k),kt=livekit_egress_1$1.TrackCompositeEgressRequest.toJSON({roomName:c,audioTrackId:et,videoTrackId:$,file:nt,stream:ht,segments:ot,preset:vt,advanced:_t}),$t=yield this.rpc.request(svc$2,"StartTrackCompositeEgress",kt,this.authHeader({roomRecord:!0}));return livekit_egress_1$1.EgressInfo.fromJSON($t)})}getOutputParams(c,b){let _,$,k,et,nt;return c.filepath!==void 0?_=c:c.filenamePrefix!==void 0?k=c:$=c,b&&(typeof b=="number"?et=b:nt=b),{file:_,segments:k,stream:$,preset:et,advanced:nt}}startTrackEgress(c,b,_){return __awaiter$2(this,void 0,void 0,function*(){let $,k;b.filepath!==void 0?$=b:k=b;const et=livekit_egress_1$1.TrackEgressRequest.toJSON({roomName:c,trackId:_,file:$,websocketUrl:k}),nt=yield this.rpc.request(svc$2,"StartTrackEgress",et,this.authHeader({roomRecord:!0}));return livekit_egress_1$1.EgressInfo.fromJSON(nt)})}updateLayout(c,b){return __awaiter$2(this,void 0,void 0,function*(){const _=yield this.rpc.request(svc$2,"UpdateLayout",livekit_egress_1$1.UpdateLayoutRequest.toJSON({egressId:c,layout:b}),this.authHeader({roomRecord:!0}));return livekit_egress_1$1.EgressInfo.fromJSON(_)})}updateStream(c,b,_){return __awaiter$2(this,void 0,void 0,function*(){b??(b=[]),_??(_=[]);const $=yield this.rpc.request(svc$2,"UpdateStream",livekit_egress_1$1.UpdateStreamRequest.toJSON({egressId:c,addOutputUrls:b,removeOutputUrls:_}),this.authHeader({roomRecord:!0}));return livekit_egress_1$1.EgressInfo.fromJSON($)})}listEgress(c){var b;return __awaiter$2(this,void 0,void 0,function*(){c??(c="");const _=yield this.rpc.request(svc$2,"ListEgress",livekit_egress_1$1.ListEgressRequest.toJSON({roomName:c}),this.authHeader({roomRecord:!0}));return(b=livekit_egress_1$1.ListEgressResponse.fromJSON(_).items)!==null&&b!==void 0?b:[]})}stopEgress(c){return __awaiter$2(this,void 0,void 0,function*(){const b=yield this.rpc.request(svc$2,"StopEgress",livekit_egress_1$1.StopEgressRequest.toJSON({egressId:c}),this.authHeader({roomRecord:!0}));return livekit_egress_1$1.EgressInfo.fromJSON(b)})}}EgressClient$1.EgressClient=EgressClient;var grants={};Object.defineProperty(grants,"__esModule",{value:!0});var IngressClient$1={},livekit_ingress={},livekit_models={},timestamp={},__importDefault$4=commonjsGlobal$1&&commonjsGlobal$1.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(timestamp,"__esModule",{value:!0});timestamp.Timestamp=timestamp.protobufPackage=void 0;const long_1$1=__importDefault$4(umdExports),minimal_1$1=__importDefault$4(minimal);timestamp.protobufPackage="google.protobuf";function createBaseTimestamp(){return{seconds:0,nanos:0}}timestamp.Timestamp={encode(a,c=minimal_1$1.default.Writer.create()){return a.seconds!==0&&c.uint32(8).int64(a.seconds),a.nanos!==0&&c.uint32(16).int32(a.nanos),c},decode(a,c){const b=a instanceof minimal_1$1.default.Reader?a:new minimal_1$1.default.Reader(a);let _=c===void 0?b.len:b.pos+c;const $=createBaseTimestamp();for(;b.pos<_;){const k=b.uint32();switch(k>>>3){case 1:$.seconds=longToNumber$1(b.int64());break;case 2:$.nanos=b.int32();break;default:b.skipType(k&7);break}}return $},fromJSON(a){return{seconds:isSet$1(a.seconds)?Number(a.seconds):0,nanos:isSet$1(a.nanos)?Number(a.nanos):0}},toJSON(a){const c={};return a.seconds!==void 0&&(c.seconds=Math.round(a.seconds)),a.nanos!==void 0&&(c.nanos=Math.round(a.nanos)),c},fromPartial(a){var c,b;const _=createBaseTimestamp();return _.seconds=(c=a.seconds)!==null&&c!==void 0?c:0,_.nanos=(b=a.nanos)!==null&&b!==void 0?b:0,_}};var globalThis$2=(()=>{if(typeof globalThis$2<"u")return globalThis$2;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof commonjsGlobal$1<"u")return commonjsGlobal$1;throw"Unable to locate global object"})();function longToNumber$1(a){if(a.gt(Number.MAX_SAFE_INTEGER))throw new globalThis$2.Error("Value is larger than Number.MAX_SAFE_INTEGER");return a.toNumber()}minimal_1$1.default.util.Long!==long_1$1.default&&(minimal_1$1.default.util.Long=long_1$1.default,minimal_1$1.default.configure());function isSet$1(a){return a!=null}(function(a){var c=commonjsGlobal$1&&commonjsGlobal$1.__importDefault||function(bt){return bt&&bt.__esModule?bt:{default:bt}};Object.defineProperty(a,"__esModule",{value:!0}),a.RTPStats_GapHistogramEntry=a.RTPStats=a.DisabledCodecs=a.VideoConfiguration=a.ClientConfiguration=a.ClientInfo=a.ServerInfo=a.ParticipantTracks=a.UserPacket=a.SpeakerInfo=a.ActiveSpeakerUpdate=a.DataPacket=a.VideoLayer=a.TrackInfo=a.SimulcastCodecInfo=a.ParticipantInfo=a.ParticipantPermission=a.Codec=a.Room=a.clientInfo_SDKToJSON=a.clientInfo_SDKFromJSON=a.ClientInfo_SDK=a.serverInfo_EditionToJSON=a.serverInfo_EditionFromJSON=a.ServerInfo_Edition=a.dataPacket_KindToJSON=a.dataPacket_KindFromJSON=a.DataPacket_Kind=a.participantInfo_StateToJSON=a.participantInfo_StateFromJSON=a.ParticipantInfo_State=a.disconnectReasonToJSON=a.disconnectReasonFromJSON=a.DisconnectReason=a.clientConfigSettingToJSON=a.clientConfigSettingFromJSON=a.ClientConfigSetting=a.connectionQualityToJSON=a.connectionQualityFromJSON=a.ConnectionQuality=a.videoQualityToJSON=a.videoQualityFromJSON=a.VideoQuality=a.trackSourceToJSON=a.trackSourceFromJSON=a.TrackSource=a.trackTypeToJSON=a.trackTypeFromJSON=a.TrackType=a.protobufPackage=void 0,a.TimedVersion=void 0;const b=c(umdExports),_=c(minimal),$=timestamp;a.protobufPackage="livekit";var k;(function(bt){bt[bt.AUDIO=0]="AUDIO",bt[bt.VIDEO=1]="VIDEO",bt[bt.DATA=2]="DATA",bt[bt.UNRECOGNIZED=-1]="UNRECOGNIZED"})(k=a.TrackType||(a.TrackType={}));function et(bt){switch(bt){case 0:case"AUDIO":return k.AUDIO;case 1:case"VIDEO":return k.VIDEO;case 2:case"DATA":return k.DATA;case-1:case"UNRECOGNIZED":default:return k.UNRECOGNIZED}}a.trackTypeFromJSON=et;function nt(bt){switch(bt){case k.AUDIO:return"AUDIO";case k.VIDEO:return"VIDEO";case k.DATA:return"DATA";case k.UNRECOGNIZED:default:return"UNRECOGNIZED"}}a.trackTypeToJSON=nt;var ot;(function(bt){bt[bt.UNKNOWN=0]="UNKNOWN",bt[bt.CAMERA=1]="CAMERA",bt[bt.MICROPHONE=2]="MICROPHONE",bt[bt.SCREEN_SHARE=3]="SCREEN_SHARE",bt[bt.SCREEN_SHARE_AUDIO=4]="SCREEN_SHARE_AUDIO",bt[bt.UNRECOGNIZED=-1]="UNRECOGNIZED"})(ot=a.TrackSource||(a.TrackSource={}));function ht(bt){switch(bt){case 0:case"UNKNOWN":return ot.UNKNOWN;case 1:case"CAMERA":return ot.CAMERA;case 2:case"MICROPHONE":return ot.MICROPHONE;case 3:case"SCREEN_SHARE":return ot.SCREEN_SHARE;case 4:case"SCREEN_SHARE_AUDIO":return ot.SCREEN_SHARE_AUDIO;case-1:case"UNRECOGNIZED":default:return ot.UNRECOGNIZED}}a.trackSourceFromJSON=ht;function vt(bt){switch(bt){case ot.UNKNOWN:return"UNKNOWN";case ot.CAMERA:return"CAMERA";case ot.MICROPHONE:return"MICROPHONE";case ot.SCREEN_SHARE:return"SCREEN_SHARE";case ot.SCREEN_SHARE_AUDIO:return"SCREEN_SHARE_AUDIO";case ot.UNRECOGNIZED:default:return"UNRECOGNIZED"}}a.trackSourceToJSON=vt;var _t;(function(bt){bt[bt.LOW=0]="LOW",bt[bt.MEDIUM=1]="MEDIUM",bt[bt.HIGH=2]="HIGH",bt[bt.OFF=3]="OFF",bt[bt.UNRECOGNIZED=-1]="UNRECOGNIZED"})(_t=a.VideoQuality||(a.VideoQuality={}));function kt(bt){switch(bt){case 0:case"LOW":return _t.LOW;case 1:case"MEDIUM":return _t.MEDIUM;case 2:case"HIGH":return _t.HIGH;case 3:case"OFF":return _t.OFF;case-1:case"UNRECOGNIZED":default:return _t.UNRECOGNIZED}}a.videoQualityFromJSON=kt;function $t(bt){switch(bt){case _t.LOW:return"LOW";case _t.MEDIUM:return"MEDIUM";case _t.HIGH:return"HIGH";case _t.OFF:return"OFF";case _t.UNRECOGNIZED:default:return"UNRECOGNIZED"}}a.videoQualityToJSON=$t;var Tt;(function(bt){bt[bt.POOR=0]="POOR",bt[bt.GOOD=1]="GOOD",bt[bt.EXCELLENT=2]="EXCELLENT",bt[bt.UNRECOGNIZED=-1]="UNRECOGNIZED"})(Tt=a.ConnectionQuality||(a.ConnectionQuality={}));function At(bt){switch(bt){case 0:case"POOR":return Tt.POOR;case 1:case"GOOD":return Tt.GOOD;case 2:case"EXCELLENT":return Tt.EXCELLENT;case-1:case"UNRECOGNIZED":default:return Tt.UNRECOGNIZED}}a.connectionQualityFromJSON=At;function Mt(bt){switch(bt){case Tt.POOR:return"POOR";case Tt.GOOD:return"GOOD";case Tt.EXCELLENT:return"EXCELLENT";case Tt.UNRECOGNIZED:default:return"UNRECOGNIZED"}}a.connectionQualityToJSON=Mt;var Dt;(function(bt){bt[bt.UNSET=0]="UNSET",bt[bt.DISABLED=1]="DISABLED",bt[bt.ENABLED=2]="ENABLED",bt[bt.UNRECOGNIZED=-1]="UNRECOGNIZED"})(Dt=a.ClientConfigSetting||(a.ClientConfigSetting={}));function Rt(bt){switch(bt){case 0:case"UNSET":return Dt.UNSET;case 1:case"DISABLED":return Dt.DISABLED;case 2:case"ENABLED":return Dt.ENABLED;case-1:case"UNRECOGNIZED":default:return Dt.UNRECOGNIZED}}a.clientConfigSettingFromJSON=Rt;function xt(bt){switch(bt){case Dt.UNSET:return"UNSET";case Dt.DISABLED:return"DISABLED";case Dt.ENABLED:return"ENABLED";case Dt.UNRECOGNIZED:default:return"UNRECOGNIZED"}}a.clientConfigSettingToJSON=xt;var Jt;(function(bt){bt[bt.UNKNOWN_REASON=0]="UNKNOWN_REASON",bt[bt.CLIENT_INITIATED=1]="CLIENT_INITIATED",bt[bt.DUPLICATE_IDENTITY=2]="DUPLICATE_IDENTITY",bt[bt.SERVER_SHUTDOWN=3]="SERVER_SHUTDOWN",bt[bt.PARTICIPANT_REMOVED=4]="PARTICIPANT_REMOVED",bt[bt.ROOM_DELETED=5]="ROOM_DELETED",bt[bt.STATE_MISMATCH=6]="STATE_MISMATCH",bt[bt.JOIN_FAILURE=7]="JOIN_FAILURE",bt[bt.UNRECOGNIZED=-1]="UNRECOGNIZED"})(Jt=a.DisconnectReason||(a.DisconnectReason={}));function ar(bt){switch(bt){case 0:case"UNKNOWN_REASON":return Jt.UNKNOWN_REASON;case 1:case"CLIENT_INITIATED":return Jt.CLIENT_INITIATED;case 2:case"DUPLICATE_IDENTITY":return Jt.DUPLICATE_IDENTITY;case 3:case"SERVER_SHUTDOWN":return Jt.SERVER_SHUTDOWN;case 4:case"PARTICIPANT_REMOVED":return Jt.PARTICIPANT_REMOVED;case 5:case"ROOM_DELETED":return Jt.ROOM_DELETED;case 6:case"STATE_MISMATCH":return Jt.STATE_MISMATCH;case 7:case"JOIN_FAILURE":return Jt.JOIN_FAILURE;case-1:case"UNRECOGNIZED":default:return Jt.UNRECOGNIZED}}a.disconnectReasonFromJSON=ar;function nr(bt){switch(bt){case Jt.UNKNOWN_REASON:return"UNKNOWN_REASON";case Jt.CLIENT_INITIATED:return"CLIENT_INITIATED";case Jt.DUPLICATE_IDENTITY:return"DUPLICATE_IDENTITY";case Jt.SERVER_SHUTDOWN:return"SERVER_SHUTDOWN";case Jt.PARTICIPANT_REMOVED:return"PARTICIPANT_REMOVED";case Jt.ROOM_DELETED:return"ROOM_DELETED";case Jt.STATE_MISMATCH:return"STATE_MISMATCH";case Jt.JOIN_FAILURE:return"JOIN_FAILURE";case Jt.UNRECOGNIZED:default:return"UNRECOGNIZED"}}a.disconnectReasonToJSON=nr;var pr;(function(bt){bt[bt.JOINING=0]="JOINING",bt[bt.JOINED=1]="JOINED",bt[bt.ACTIVE=2]="ACTIVE",bt[bt.DISCONNECTED=3]="DISCONNECTED",bt[bt.UNRECOGNIZED=-1]="UNRECOGNIZED"})(pr=a.ParticipantInfo_State||(a.ParticipantInfo_State={}));function ur(bt){switch(bt){case 0:case"JOINING":return pr.JOINING;case 1:case"JOINED":return pr.JOINED;case 2:case"ACTIVE":return pr.ACTIVE;case 3:case"DISCONNECTED":return pr.DISCONNECTED;case-1:case"UNRECOGNIZED":default:return pr.UNRECOGNIZED}}a.participantInfo_StateFromJSON=ur;function Ot(bt){switch(bt){case pr.JOINING:return"JOINING";case pr.JOINED:return"JOINED";case pr.ACTIVE:return"ACTIVE";case pr.DISCONNECTED:return"DISCONNECTED";case pr.UNRECOGNIZED:default:return"UNRECOGNIZED"}}a.participantInfo_StateToJSON=Ot;var It;(function(bt){bt[bt.RELIABLE=0]="RELIABLE",bt[bt.LOSSY=1]="LOSSY",bt[bt.UNRECOGNIZED=-1]="UNRECOGNIZED"})(It=a.DataPacket_Kind||(a.DataPacket_Kind={}));function ut(bt){switch(bt){case 0:case"RELIABLE":return It.RELIABLE;case 1:case"LOSSY":return It.LOSSY;case-1:case"UNRECOGNIZED":default:return It.UNRECOGNIZED}}a.dataPacket_KindFromJSON=ut;function _e(bt){switch(bt){case It.RELIABLE:return"RELIABLE";case It.LOSSY:return"LOSSY";case It.UNRECOGNIZED:default:return"UNRECOGNIZED"}}a.dataPacket_KindToJSON=_e;var tt;(function(bt){bt[bt.Standard=0]="Standard",bt[bt.Cloud=1]="Cloud",bt[bt.UNRECOGNIZED=-1]="UNRECOGNIZED"})(tt=a.ServerInfo_Edition||(a.ServerInfo_Edition={}));function it(bt){switch(bt){case 0:case"Standard":return tt.Standard;case 1:case"Cloud":return tt.Cloud;case-1:case"UNRECOGNIZED":default:return tt.UNRECOGNIZED}}a.serverInfo_EditionFromJSON=it;function dt(bt){switch(bt){case tt.Standard:return"Standard";case tt.Cloud:return"Cloud";case tt.UNRECOGNIZED:default:return"UNRECOGNIZED"}}a.serverInfo_EditionToJSON=dt;var lt;(function(bt){bt[bt.UNKNOWN=0]="UNKNOWN",bt[bt.JS=1]="JS",bt[bt.SWIFT=2]="SWIFT",bt[bt.ANDROID=3]="ANDROID",bt[bt.FLUTTER=4]="FLUTTER",bt[bt.GO=5]="GO",bt[bt.UNITY=6]="UNITY",bt[bt.UNRECOGNIZED=-1]="UNRECOGNIZED"})(lt=a.ClientInfo_SDK||(a.ClientInfo_SDK={}));function gt(bt){switch(bt){case 0:case"UNKNOWN":return lt.UNKNOWN;case 1:case"JS":return lt.JS;case 2:case"SWIFT":return lt.SWIFT;case 3:case"ANDROID":return lt.ANDROID;case 4:case"FLUTTER":return lt.FLUTTER;case 5:case"GO":return lt.GO;case 6:case"UNITY":return lt.UNITY;case-1:case"UNRECOGNIZED":default:return lt.UNRECOGNIZED}}a.clientInfo_SDKFromJSON=gt;function Et(bt){switch(bt){case lt.UNKNOWN:return"UNKNOWN";case lt.JS:return"JS";case lt.SWIFT:return"SWIFT";case lt.ANDROID:return"ANDROID";case lt.FLUTTER:return"FLUTTER";case lt.GO:return"GO";case lt.UNITY:return"UNITY";case lt.UNRECOGNIZED:default:return"UNRECOGNIZED"}}a.clientInfo_SDKToJSON=Et;function pt(){return{sid:"",name:"",emptyTimeout:0,maxParticipants:0,creationTime:0,turnPassword:"",enabledCodecs:[],metadata:"",numParticipants:0,activeRecording:!1}}a.Room={encode(bt,jt=_.default.Writer.create()){bt.sid!==""&&jt.uint32(10).string(bt.sid),bt.name!==""&&jt.uint32(18).string(bt.name),bt.emptyTimeout!==0&&jt.uint32(24).uint32(bt.emptyTimeout),bt.maxParticipants!==0&&jt.uint32(32).uint32(bt.maxParticipants),bt.creationTime!==0&&jt.uint32(40).int64(bt.creationTime),bt.turnPassword!==""&&jt.uint32(50).string(bt.turnPassword);for(const Ut of bt.enabledCodecs)a.Codec.encode(Ut,jt.uint32(58).fork()).ldelim();return bt.metadata!==""&&jt.uint32(66).string(bt.metadata),bt.numParticipants!==0&&jt.uint32(72).uint32(bt.numParticipants),bt.activeRecording===!0&&jt.uint32(80).bool(bt.activeRecording),jt},decode(bt,jt){const Ut=bt instanceof _.default.Reader?bt:new _.default.Reader(bt);let Ft=jt===void 0?Ut.len:Ut.pos+jt;const Ht=pt();for(;Ut.pos<Ft;){const or=Ut.uint32();switch(or>>>3){case 1:Ht.sid=Ut.string();break;case 2:Ht.name=Ut.string();break;case 3:Ht.emptyTimeout=Ut.uint32();break;case 4:Ht.maxParticipants=Ut.uint32();break;case 5:Ht.creationTime=er(Ut.int64());break;case 6:Ht.turnPassword=Ut.string();break;case 7:Ht.enabledCodecs.push(a.Codec.decode(Ut,Ut.uint32()));break;case 8:Ht.metadata=Ut.string();break;case 9:Ht.numParticipants=Ut.uint32();break;case 10:Ht.activeRecording=Ut.bool();break;default:Ut.skipType(or&7);break}}return Ht},fromJSON(bt){return{sid:tr(bt.sid)?String(bt.sid):"",name:tr(bt.name)?String(bt.name):"",emptyTimeout:tr(bt.emptyTimeout)?Number(bt.emptyTimeout):0,maxParticipants:tr(bt.maxParticipants)?Number(bt.maxParticipants):0,creationTime:tr(bt.creationTime)?Number(bt.creationTime):0,turnPassword:tr(bt.turnPassword)?String(bt.turnPassword):"",enabledCodecs:Array.isArray(bt==null?void 0:bt.enabledCodecs)?bt.enabledCodecs.map(jt=>a.Codec.fromJSON(jt)):[],metadata:tr(bt.metadata)?String(bt.metadata):"",numParticipants:tr(bt.numParticipants)?Number(bt.numParticipants):0,activeRecording:tr(bt.activeRecording)?!!bt.activeRecording:!1}},toJSON(bt){const jt={};return bt.sid!==void 0&&(jt.sid=bt.sid),bt.name!==void 0&&(jt.name=bt.name),bt.emptyTimeout!==void 0&&(jt.emptyTimeout=Math.round(bt.emptyTimeout)),bt.maxParticipants!==void 0&&(jt.maxParticipants=Math.round(bt.maxParticipants)),bt.creationTime!==void 0&&(jt.creationTime=Math.round(bt.creationTime)),bt.turnPassword!==void 0&&(jt.turnPassword=bt.turnPassword),bt.enabledCodecs?jt.enabledCodecs=bt.enabledCodecs.map(Ut=>Ut?a.Codec.toJSON(Ut):void 0):jt.enabledCodecs=[],bt.metadata!==void 0&&(jt.metadata=bt.metadata),bt.numParticipants!==void 0&&(jt.numParticipants=Math.round(bt.numParticipants)),bt.activeRecording!==void 0&&(jt.activeRecording=bt.activeRecording),jt},fromPartial(bt){var jt,Ut,Ft,Ht,or,vr,Ir,Sr,Or,Cr;const yt=pt();return yt.sid=(jt=bt.sid)!==null&&jt!==void 0?jt:"",yt.name=(Ut=bt.name)!==null&&Ut!==void 0?Ut:"",yt.emptyTimeout=(Ft=bt.emptyTimeout)!==null&&Ft!==void 0?Ft:0,yt.maxParticipants=(Ht=bt.maxParticipants)!==null&&Ht!==void 0?Ht:0,yt.creationTime=(or=bt.creationTime)!==null&&or!==void 0?or:0,yt.turnPassword=(vr=bt.turnPassword)!==null&&vr!==void 0?vr:"",yt.enabledCodecs=((Ir=bt.enabledCodecs)===null||Ir===void 0?void 0:Ir.map(Bt=>a.Codec.fromPartial(Bt)))||[],yt.metadata=(Sr=bt.metadata)!==null&&Sr!==void 0?Sr:"",yt.numParticipants=(Or=bt.numParticipants)!==null&&Or!==void 0?Or:0,yt.activeRecording=(Cr=bt.activeRecording)!==null&&Cr!==void 0?Cr:!1,yt}};function rt(){return{mime:"",fmtpLine:""}}a.Codec={encode(bt,jt=_.default.Writer.create()){return bt.mime!==""&&jt.uint32(10).string(bt.mime),bt.fmtpLine!==""&&jt.uint32(18).string(bt.fmtpLine),jt},decode(bt,jt){const Ut=bt instanceof _.default.Reader?bt:new _.default.Reader(bt);let Ft=jt===void 0?Ut.len:Ut.pos+jt;const Ht=rt();for(;Ut.pos<Ft;){const or=Ut.uint32();switch(or>>>3){case 1:Ht.mime=Ut.string();break;case 2:Ht.fmtpLine=Ut.string();break;default:Ut.skipType(or&7);break}}return Ht},fromJSON(bt){return{mime:tr(bt.mime)?String(bt.mime):"",fmtpLine:tr(bt.fmtpLine)?String(bt.fmtpLine):""}},toJSON(bt){const jt={};return bt.mime!==void 0&&(jt.mime=bt.mime),bt.fmtpLine!==void 0&&(jt.fmtpLine=bt.fmtpLine),jt},fromPartial(bt){var jt,Ut;const Ft=rt();return Ft.mime=(jt=bt.mime)!==null&&jt!==void 0?jt:"",Ft.fmtpLine=(Ut=bt.fmtpLine)!==null&&Ut!==void 0?Ut:"",Ft}};function mt(){return{canSubscribe:!1,canPublish:!1,canPublishData:!1,hidden:!1,recorder:!1}}a.ParticipantPermission={encode(bt,jt=_.default.Writer.create()){return bt.canSubscribe===!0&&jt.uint32(8).bool(bt.canSubscribe),bt.canPublish===!0&&jt.uint32(16).bool(bt.canPublish),bt.canPublishData===!0&&jt.uint32(24).bool(bt.canPublishData),bt.hidden===!0&&jt.uint32(56).bool(bt.hidden),bt.recorder===!0&&jt.uint32(64).bool(bt.recorder),jt},decode(bt,jt){const Ut=bt instanceof _.default.Reader?bt:new _.default.Reader(bt);let Ft=jt===void 0?Ut.len:Ut.pos+jt;const Ht=mt();for(;Ut.pos<Ft;){const or=Ut.uint32();switch(or>>>3){case 1:Ht.canSubscribe=Ut.bool();break;case 2:Ht.canPublish=Ut.bool();break;case 3:Ht.canPublishData=Ut.bool();break;case 7:Ht.hidden=Ut.bool();break;case 8:Ht.recorder=Ut.bool();break;default:Ut.skipType(or&7);break}}return Ht},fromJSON(bt){return{canSubscribe:tr(bt.canSubscribe)?!!bt.canSubscribe:!1,canPublish:tr(bt.canPublish)?!!bt.canPublish:!1,canPublishData:tr(bt.canPublishData)?!!bt.canPublishData:!1,hidden:tr(bt.hidden)?!!bt.hidden:!1,recorder:tr(bt.recorder)?!!bt.recorder:!1}},toJSON(bt){const jt={};return bt.canSubscribe!==void 0&&(jt.canSubscribe=bt.canSubscribe),bt.canPublish!==void 0&&(jt.canPublish=bt.canPublish),bt.canPublishData!==void 0&&(jt.canPublishData=bt.canPublishData),bt.hidden!==void 0&&(jt.hidden=bt.hidden),bt.recorder!==void 0&&(jt.recorder=bt.recorder),jt},fromPartial(bt){var jt,Ut,Ft,Ht,or;const vr=mt();return vr.canSubscribe=(jt=bt.canSubscribe)!==null&&jt!==void 0?jt:!1,vr.canPublish=(Ut=bt.canPublish)!==null&&Ut!==void 0?Ut:!1,vr.canPublishData=(Ft=bt.canPublishData)!==null&&Ft!==void 0?Ft:!1,vr.hidden=(Ht=bt.hidden)!==null&&Ht!==void 0?Ht:!1,vr.recorder=(or=bt.recorder)!==null&&or!==void 0?or:!1,vr}};function Lt(){return{sid:"",identity:"",state:0,tracks:[],metadata:"",joinedAt:0,name:"",version:0,permission:void 0,region:"",isPublisher:!1}}a.ParticipantInfo={encode(bt,jt=_.default.Writer.create()){bt.sid!==""&&jt.uint32(10).string(bt.sid),bt.identity!==""&&jt.uint32(18).string(bt.identity),bt.state!==0&&jt.uint32(24).int32(bt.state);for(const Ut of bt.tracks)a.TrackInfo.encode(Ut,jt.uint32(34).fork()).ldelim();return bt.metadata!==""&&jt.uint32(42).string(bt.metadata),bt.joinedAt!==0&&jt.uint32(48).int64(bt.joinedAt),bt.name!==""&&jt.uint32(74).string(bt.name),bt.version!==0&&jt.uint32(80).uint32(bt.version),bt.permission!==void 0&&a.ParticipantPermission.encode(bt.permission,jt.uint32(90).fork()).ldelim(),bt.region!==""&&jt.uint32(98).string(bt.region),bt.isPublisher===!0&&jt.uint32(104).bool(bt.isPublisher),jt},decode(bt,jt){const Ut=bt instanceof _.default.Reader?bt:new _.default.Reader(bt);let Ft=jt===void 0?Ut.len:Ut.pos+jt;const Ht=Lt();for(;Ut.pos<Ft;){const or=Ut.uint32();switch(or>>>3){case 1:Ht.sid=Ut.string();break;case 2:Ht.identity=Ut.string();break;case 3:Ht.state=Ut.int32();break;case 4:Ht.tracks.push(a.TrackInfo.decode(Ut,Ut.uint32()));break;case 5:Ht.metadata=Ut.string();break;case 6:Ht.joinedAt=er(Ut.int64());break;case 9:Ht.name=Ut.string();break;case 10:Ht.version=Ut.uint32();break;case 11:Ht.permission=a.ParticipantPermission.decode(Ut,Ut.uint32());break;case 12:Ht.region=Ut.string();break;case 13:Ht.isPublisher=Ut.bool();break;default:Ut.skipType(or&7);break}}return Ht},fromJSON(bt){return{sid:tr(bt.sid)?String(bt.sid):"",identity:tr(bt.identity)?String(bt.identity):"",state:tr(bt.state)?ur(bt.state):0,tracks:Array.isArray(bt==null?void 0:bt.tracks)?bt.tracks.map(jt=>a.TrackInfo.fromJSON(jt)):[],metadata:tr(bt.metadata)?String(bt.metadata):"",joinedAt:tr(bt.joinedAt)?Number(bt.joinedAt):0,name:tr(bt.name)?String(bt.name):"",version:tr(bt.version)?Number(bt.version):0,permission:tr(bt.permission)?a.ParticipantPermission.fromJSON(bt.permission):void 0,region:tr(bt.region)?String(bt.region):"",isPublisher:tr(bt.isPublisher)?!!bt.isPublisher:!1}},toJSON(bt){const jt={};return bt.sid!==void 0&&(jt.sid=bt.sid),bt.identity!==void 0&&(jt.identity=bt.identity),bt.state!==void 0&&(jt.state=Ot(bt.state)),bt.tracks?jt.tracks=bt.tracks.map(Ut=>Ut?a.TrackInfo.toJSON(Ut):void 0):jt.tracks=[],bt.metadata!==void 0&&(jt.metadata=bt.metadata),bt.joinedAt!==void 0&&(jt.joinedAt=Math.round(bt.joinedAt)),bt.name!==void 0&&(jt.name=bt.name),bt.version!==void 0&&(jt.version=Math.round(bt.version)),bt.permission!==void 0&&(jt.permission=bt.permission?a.ParticipantPermission.toJSON(bt.permission):void 0),bt.region!==void 0&&(jt.region=bt.region),bt.isPublisher!==void 0&&(jt.isPublisher=bt.isPublisher),jt},fromPartial(bt){var jt,Ut,Ft,Ht,or,vr,Ir,Sr,Or,Cr;const yt=Lt();return yt.sid=(jt=bt.sid)!==null&&jt!==void 0?jt:"",yt.identity=(Ut=bt.identity)!==null&&Ut!==void 0?Ut:"",yt.state=(Ft=bt.state)!==null&&Ft!==void 0?Ft:0,yt.tracks=((Ht=bt.tracks)===null||Ht===void 0?void 0:Ht.map(Bt=>a.TrackInfo.fromPartial(Bt)))||[],yt.metadata=(or=bt.metadata)!==null&&or!==void 0?or:"",yt.joinedAt=(vr=bt.joinedAt)!==null&&vr!==void 0?vr:0,yt.name=(Ir=bt.name)!==null&&Ir!==void 0?Ir:"",yt.version=(Sr=bt.version)!==null&&Sr!==void 0?Sr:0,yt.permission=bt.permission!==void 0&&bt.permission!==null?a.ParticipantPermission.fromPartial(bt.permission):void 0,yt.region=(Or=bt.region)!==null&&Or!==void 0?Or:"",yt.isPublisher=(Cr=bt.isPublisher)!==null&&Cr!==void 0?Cr:!1,yt}};function Gt(){return{mimeType:"",mid:"",cid:"",layers:[]}}a.SimulcastCodecInfo={encode(bt,jt=_.default.Writer.create()){bt.mimeType!==""&&jt.uint32(10).string(bt.mimeType),bt.mid!==""&&jt.uint32(18).string(bt.mid),bt.cid!==""&&jt.uint32(26).string(bt.cid);for(const Ut of bt.layers)a.VideoLayer.encode(Ut,jt.uint32(34).fork()).ldelim();return jt},decode(bt,jt){const Ut=bt instanceof _.default.Reader?bt:new _.default.Reader(bt);let Ft=jt===void 0?Ut.len:Ut.pos+jt;const Ht=Gt();for(;Ut.pos<Ft;){const or=Ut.uint32();switch(or>>>3){case 1:Ht.mimeType=Ut.string();break;case 2:Ht.mid=Ut.string();break;case 3:Ht.cid=Ut.string();break;case 4:Ht.layers.push(a.VideoLayer.decode(Ut,Ut.uint32()));break;default:Ut.skipType(or&7);break}}return Ht},fromJSON(bt){return{mimeType:tr(bt.mimeType)?String(bt.mimeType):"",mid:tr(bt.mid)?String(bt.mid):"",cid:tr(bt.cid)?String(bt.cid):"",layers:Array.isArray(bt==null?void 0:bt.layers)?bt.layers.map(jt=>a.VideoLayer.fromJSON(jt)):[]}},toJSON(bt){const jt={};return bt.mimeType!==void 0&&(jt.mimeType=bt.mimeType),bt.mid!==void 0&&(jt.mid=bt.mid),bt.cid!==void 0&&(jt.cid=bt.cid),bt.layers?jt.layers=bt.layers.map(Ut=>Ut?a.VideoLayer.toJSON(Ut):void 0):jt.layers=[],jt},fromPartial(bt){var jt,Ut,Ft,Ht;const or=Gt();return or.mimeType=(jt=bt.mimeType)!==null&&jt!==void 0?jt:"",or.mid=(Ut=bt.mid)!==null&&Ut!==void 0?Ut:"",or.cid=(Ft=bt.cid)!==null&&Ft!==void 0?Ft:"",or.layers=((Ht=bt.layers)===null||Ht===void 0?void 0:Ht.map(vr=>a.VideoLayer.fromPartial(vr)))||[],or}};function rr(){return{sid:"",type:0,name:"",muted:!1,width:0,height:0,simulcast:!1,disableDtx:!1,source:0,layers:[],mimeType:"",mid:"",codecs:[],stereo:!1,disableRed:!1}}a.TrackInfo={encode(bt,jt=_.default.Writer.create()){bt.sid!==""&&jt.uint32(10).string(bt.sid),bt.type!==0&&jt.uint32(16).int32(bt.type),bt.name!==""&&jt.uint32(26).string(bt.name),bt.muted===!0&&jt.uint32(32).bool(bt.muted),bt.width!==0&&jt.uint32(40).uint32(bt.width),bt.height!==0&&jt.uint32(48).uint32(bt.height),bt.simulcast===!0&&jt.uint32(56).bool(bt.simulcast),bt.disableDtx===!0&&jt.uint32(64).bool(bt.disableDtx),bt.source!==0&&jt.uint32(72).int32(bt.source);for(const Ut of bt.layers)a.VideoLayer.encode(Ut,jt.uint32(82).fork()).ldelim();bt.mimeType!==""&&jt.uint32(90).string(bt.mimeType),bt.mid!==""&&jt.uint32(98).string(bt.mid);for(const Ut of bt.codecs)a.SimulcastCodecInfo.encode(Ut,jt.uint32(106).fork()).ldelim();return bt.stereo===!0&&jt.uint32(112).bool(bt.stereo),bt.disableRed===!0&&jt.uint32(120).bool(bt.disableRed),jt},decode(bt,jt){const Ut=bt instanceof _.default.Reader?bt:new _.default.Reader(bt);let Ft=jt===void 0?Ut.len:Ut.pos+jt;const Ht=rr();for(;Ut.pos<Ft;){const or=Ut.uint32();switch(or>>>3){case 1:Ht.sid=Ut.string();break;case 2:Ht.type=Ut.int32();break;case 3:Ht.name=Ut.string();break;case 4:Ht.muted=Ut.bool();break;case 5:Ht.width=Ut.uint32();break;case 6:Ht.height=Ut.uint32();break;case 7:Ht.simulcast=Ut.bool();break;case 8:Ht.disableDtx=Ut.bool();break;case 9:Ht.source=Ut.int32();break;case 10:Ht.layers.push(a.VideoLayer.decode(Ut,Ut.uint32()));break;case 11:Ht.mimeType=Ut.string();break;case 12:Ht.mid=Ut.string();break;case 13:Ht.codecs.push(a.SimulcastCodecInfo.decode(Ut,Ut.uint32()));break;case 14:Ht.stereo=Ut.bool();break;case 15:Ht.disableRed=Ut.bool();break;default:Ut.skipType(or&7);break}}return Ht},fromJSON(bt){return{sid:tr(bt.sid)?String(bt.sid):"",type:tr(bt.type)?et(bt.type):0,name:tr(bt.name)?String(bt.name):"",muted:tr(bt.muted)?!!bt.muted:!1,width:tr(bt.width)?Number(bt.width):0,height:tr(bt.height)?Number(bt.height):0,simulcast:tr(bt.simulcast)?!!bt.simulcast:!1,disableDtx:tr(bt.disableDtx)?!!bt.disableDtx:!1,source:tr(bt.source)?ht(bt.source):0,layers:Array.isArray(bt==null?void 0:bt.layers)?bt.layers.map(jt=>a.VideoLayer.fromJSON(jt)):[],mimeType:tr(bt.mimeType)?String(bt.mimeType):"",mid:tr(bt.mid)?String(bt.mid):"",codecs:Array.isArray(bt==null?void 0:bt.codecs)?bt.codecs.map(jt=>a.SimulcastCodecInfo.fromJSON(jt)):[],stereo:tr(bt.stereo)?!!bt.stereo:!1,disableRed:tr(bt.disableRed)?!!bt.disableRed:!1}},toJSON(bt){const jt={};return bt.sid!==void 0&&(jt.sid=bt.sid),bt.type!==void 0&&(jt.type=nt(bt.type)),bt.name!==void 0&&(jt.name=bt.name),bt.muted!==void 0&&(jt.muted=bt.muted),bt.width!==void 0&&(jt.width=Math.round(bt.width)),bt.height!==void 0&&(jt.height=Math.round(bt.height)),bt.simulcast!==void 0&&(jt.simulcast=bt.simulcast),bt.disableDtx!==void 0&&(jt.disableDtx=bt.disableDtx),bt.source!==void 0&&(jt.source=vt(bt.source)),bt.layers?jt.layers=bt.layers.map(Ut=>Ut?a.VideoLayer.toJSON(Ut):void 0):jt.layers=[],bt.mimeType!==void 0&&(jt.mimeType=bt.mimeType),bt.mid!==void 0&&(jt.mid=bt.mid),bt.codecs?jt.codecs=bt.codecs.map(Ut=>Ut?a.SimulcastCodecInfo.toJSON(Ut):void 0):jt.codecs=[],bt.stereo!==void 0&&(jt.stereo=bt.stereo),bt.disableRed!==void 0&&(jt.disableRed=bt.disableRed),jt},fromPartial(bt){var jt,Ut,Ft,Ht,or,vr,Ir,Sr,Or,Cr,yt,Bt,Zt,yr,fr;const Rr=rr();return Rr.sid=(jt=bt.sid)!==null&&jt!==void 0?jt:"",Rr.type=(Ut=bt.type)!==null&&Ut!==void 0?Ut:0,Rr.name=(Ft=bt.name)!==null&&Ft!==void 0?Ft:"",Rr.muted=(Ht=bt.muted)!==null&&Ht!==void 0?Ht:!1,Rr.width=(or=bt.width)!==null&&or!==void 0?or:0,Rr.height=(vr=bt.height)!==null&&vr!==void 0?vr:0,Rr.simulcast=(Ir=bt.simulcast)!==null&&Ir!==void 0?Ir:!1,Rr.disableDtx=(Sr=bt.disableDtx)!==null&&Sr!==void 0?Sr:!1,Rr.source=(Or=bt.source)!==null&&Or!==void 0?Or:0,Rr.layers=((Cr=bt.layers)===null||Cr===void 0?void 0:Cr.map(Nr=>a.VideoLayer.fromPartial(Nr)))||[],Rr.mimeType=(yt=bt.mimeType)!==null&&yt!==void 0?yt:"",Rr.mid=(Bt=bt.mid)!==null&&Bt!==void 0?Bt:"",Rr.codecs=((Zt=bt.codecs)===null||Zt===void 0?void 0:Zt.map(Nr=>a.SimulcastCodecInfo.fromPartial(Nr)))||[],Rr.stereo=(yr=bt.stereo)!==null&&yr!==void 0?yr:!1,Rr.disableRed=(fr=bt.disableRed)!==null&&fr!==void 0?fr:!1,Rr}};function ir(){return{quality:0,width:0,height:0,bitrate:0,ssrc:0}}a.VideoLayer={encode(bt,jt=_.default.Writer.create()){return bt.quality!==0&&jt.uint32(8).int32(bt.quality),bt.width!==0&&jt.uint32(16).uint32(bt.width),bt.height!==0&&jt.uint32(24).uint32(bt.height),bt.bitrate!==0&&jt.uint32(32).uint32(bt.bitrate),bt.ssrc!==0&&jt.uint32(40).uint32(bt.ssrc),jt},decode(bt,jt){const Ut=bt instanceof _.default.Reader?bt:new _.default.Reader(bt);let Ft=jt===void 0?Ut.len:Ut.pos+jt;const Ht=ir();for(;Ut.pos<Ft;){const or=Ut.uint32();switch(or>>>3){case 1:Ht.quality=Ut.int32();break;case 2:Ht.width=Ut.uint32();break;case 3:Ht.height=Ut.uint32();break;case 4:Ht.bitrate=Ut.uint32();break;case 5:Ht.ssrc=Ut.uint32();break;default:Ut.skipType(or&7);break}}return Ht},fromJSON(bt){return{quality:tr(bt.quality)?kt(bt.quality):0,width:tr(bt.width)?Number(bt.width):0,height:tr(bt.height)?Number(bt.height):0,bitrate:tr(bt.bitrate)?Number(bt.bitrate):0,ssrc:tr(bt.ssrc)?Number(bt.ssrc):0}},toJSON(bt){const jt={};return bt.quality!==void 0&&(jt.quality=$t(bt.quality)),bt.width!==void 0&&(jt.width=Math.round(bt.width)),bt.height!==void 0&&(jt.height=Math.round(bt.height)),bt.bitrate!==void 0&&(jt.bitrate=Math.round(bt.bitrate)),bt.ssrc!==void 0&&(jt.ssrc=Math.round(bt.ssrc)),jt},fromPartial(bt){var jt,Ut,Ft,Ht,or;const vr=ir();return vr.quality=(jt=bt.quality)!==null&&jt!==void 0?jt:0,vr.width=(Ut=bt.width)!==null&&Ut!==void 0?Ut:0,vr.height=(Ft=bt.height)!==null&&Ft!==void 0?Ft:0,vr.bitrate=(Ht=bt.bitrate)!==null&&Ht!==void 0?Ht:0,vr.ssrc=(or=bt.ssrc)!==null&&or!==void 0?or:0,vr}};function Wt(){return{kind:0,user:void 0,speaker:void 0}}a.DataPacket={encode(bt,jt=_.default.Writer.create()){return bt.kind!==0&&jt.uint32(8).int32(bt.kind),bt.user!==void 0&&a.UserPacket.encode(bt.user,jt.uint32(18).fork()).ldelim(),bt.speaker!==void 0&&a.ActiveSpeakerUpdate.encode(bt.speaker,jt.uint32(26).fork()).ldelim(),jt},decode(bt,jt){const Ut=bt instanceof _.default.Reader?bt:new _.default.Reader(bt);let Ft=jt===void 0?Ut.len:Ut.pos+jt;const Ht=Wt();for(;Ut.pos<Ft;){const or=Ut.uint32();switch(or>>>3){case 1:Ht.kind=Ut.int32();break;case 2:Ht.user=a.UserPacket.decode(Ut,Ut.uint32());break;case 3:Ht.speaker=a.ActiveSpeakerUpdate.decode(Ut,Ut.uint32());break;default:Ut.skipType(or&7);break}}return Ht},fromJSON(bt){return{kind:tr(bt.kind)?ut(bt.kind):0,user:tr(bt.user)?a.UserPacket.fromJSON(bt.user):void 0,speaker:tr(bt.speaker)?a.ActiveSpeakerUpdate.fromJSON(bt.speaker):void 0}},toJSON(bt){const jt={};return bt.kind!==void 0&&(jt.kind=_e(bt.kind)),bt.user!==void 0&&(jt.user=bt.user?a.UserPacket.toJSON(bt.user):void 0),bt.speaker!==void 0&&(jt.speaker=bt.speaker?a.ActiveSpeakerUpdate.toJSON(bt.speaker):void 0),jt},fromPartial(bt){var jt;const Ut=Wt();return Ut.kind=(jt=bt.kind)!==null&&jt!==void 0?jt:0,Ut.user=bt.user!==void 0&&bt.user!==null?a.UserPacket.fromPartial(bt.user):void 0,Ut.speaker=bt.speaker!==void 0&&bt.speaker!==null?a.ActiveSpeakerUpdate.fromPartial(bt.speaker):void 0,Ut}};function zt(){return{speakers:[]}}a.ActiveSpeakerUpdate={encode(bt,jt=_.default.Writer.create()){for(const Ut of bt.speakers)a.SpeakerInfo.encode(Ut,jt.uint32(10).fork()).ldelim();return jt},decode(bt,jt){const Ut=bt instanceof _.default.Reader?bt:new _.default.Reader(bt);let Ft=jt===void 0?Ut.len:Ut.pos+jt;const Ht=zt();for(;Ut.pos<Ft;){const or=Ut.uint32();switch(or>>>3){case 1:Ht.speakers.push(a.SpeakerInfo.decode(Ut,Ut.uint32()));break;default:Ut.skipType(or&7);break}}return Ht},fromJSON(bt){return{speakers:Array.isArray(bt==null?void 0:bt.speakers)?bt.speakers.map(jt=>a.SpeakerInfo.fromJSON(jt)):[]}},toJSON(bt){const jt={};return bt.speakers?jt.speakers=bt.speakers.map(Ut=>Ut?a.SpeakerInfo.toJSON(Ut):void 0):jt.speakers=[],jt},fromPartial(bt){var jt;const Ut=zt();return Ut.speakers=((jt=bt.speakers)===null||jt===void 0?void 0:jt.map(Ft=>a.SpeakerInfo.fromPartial(Ft)))||[],Ut}};function wt(){return{sid:"",level:0,active:!1}}a.SpeakerInfo={encode(bt,jt=_.default.Writer.create()){return bt.sid!==""&&jt.uint32(10).string(bt.sid),bt.level!==0&&jt.uint32(21).float(bt.level),bt.active===!0&&jt.uint32(24).bool(bt.active),jt},decode(bt,jt){const Ut=bt instanceof _.default.Reader?bt:new _.default.Reader(bt);let Ft=jt===void 0?Ut.len:Ut.pos+jt;const Ht=wt();for(;Ut.pos<Ft;){const or=Ut.uint32();switch(or>>>3){case 1:Ht.sid=Ut.string();break;case 2:Ht.level=Ut.float();break;case 3:Ht.active=Ut.bool();break;default:Ut.skipType(or&7);break}}return Ht},fromJSON(bt){return{sid:tr(bt.sid)?String(bt.sid):"",level:tr(bt.level)?Number(bt.level):0,active:tr(bt.active)?!!bt.active:!1}},toJSON(bt){const jt={};return bt.sid!==void 0&&(jt.sid=bt.sid),bt.level!==void 0&&(jt.level=bt.level),bt.active!==void 0&&(jt.active=bt.active),jt},fromPartial(bt){var jt,Ut,Ft;const Ht=wt();return Ht.sid=(jt=bt.sid)!==null&&jt!==void 0?jt:"",Ht.level=(Ut=bt.level)!==null&&Ut!==void 0?Ut:0,Ht.active=(Ft=bt.active)!==null&&Ft!==void 0?Ft:!1,Ht}};function Vt(){return{participantSid:"",payload:new Uint8Array,destinationSids:[]}}a.UserPacket={encode(bt,jt=_.default.Writer.create()){bt.participantSid!==""&&jt.uint32(10).string(bt.participantSid),bt.payload.length!==0&&jt.uint32(18).bytes(bt.payload);for(const Ut of bt.destinationSids)jt.uint32(26).string(Ut);return jt},decode(bt,jt){const Ut=bt instanceof _.default.Reader?bt:new _.default.Reader(bt);let Ft=jt===void 0?Ut.len:Ut.pos+jt;const Ht=Vt();for(;Ut.pos<Ft;){const or=Ut.uint32();switch(or>>>3){case 1:Ht.participantSid=Ut.string();break;case 2:Ht.payload=Ut.bytes();break;case 3:Ht.destinationSids.push(Ut.string());break;default:Ut.skipType(or&7);break}}return Ht},fromJSON(bt){return{participantSid:tr(bt.participantSid)?String(bt.participantSid):"",payload:tr(bt.payload)?Zr(bt.payload):new Uint8Array,destinationSids:Array.isArray(bt==null?void 0:bt.destinationSids)?bt.destinationSids.map(jt=>String(jt)):[]}},toJSON(bt){const jt={};return bt.participantSid!==void 0&&(jt.participantSid=bt.participantSid),bt.payload!==void 0&&(jt.payload=Pr(bt.payload!==void 0?bt.payload:new Uint8Array)),bt.destinationSids?jt.destinationSids=bt.destinationSids.map(Ut=>Ut):jt.destinationSids=[],jt},fromPartial(bt){var jt,Ut,Ft;const Ht=Vt();return Ht.participantSid=(jt=bt.participantSid)!==null&&jt!==void 0?jt:"",Ht.payload=(Ut=bt.payload)!==null&&Ut!==void 0?Ut:new Uint8Array,Ht.destinationSids=((Ft=bt.destinationSids)===null||Ft===void 0?void 0:Ft.map(or=>or))||[],Ht}};function Qt(){return{participantSid:"",trackSids:[]}}a.ParticipantTracks={encode(bt,jt=_.default.Writer.create()){bt.participantSid!==""&&jt.uint32(10).string(bt.participantSid);for(const Ut of bt.trackSids)jt.uint32(18).string(Ut);return jt},decode(bt,jt){const Ut=bt instanceof _.default.Reader?bt:new _.default.Reader(bt);let Ft=jt===void 0?Ut.len:Ut.pos+jt;const Ht=Qt();for(;Ut.pos<Ft;){const or=Ut.uint32();switch(or>>>3){case 1:Ht.participantSid=Ut.string();break;case 2:Ht.trackSids.push(Ut.string());break;default:Ut.skipType(or&7);break}}return Ht},fromJSON(bt){return{participantSid:tr(bt.participantSid)?String(bt.participantSid):"",trackSids:Array.isArray(bt==null?void 0:bt.trackSids)?bt.trackSids.map(jt=>String(jt)):[]}},toJSON(bt){const jt={};return bt.participantSid!==void 0&&(jt.participantSid=bt.participantSid),bt.trackSids?jt.trackSids=bt.trackSids.map(Ut=>Ut):jt.trackSids=[],jt},fromPartial(bt){var jt,Ut;const Ft=Qt();return Ft.participantSid=(jt=bt.participantSid)!==null&&jt!==void 0?jt:"",Ft.trackSids=((Ut=bt.trackSids)===null||Ut===void 0?void 0:Ut.map(Ht=>Ht))||[],Ft}};function Nt(){return{edition:0,version:"",protocol:0,region:"",nodeId:"",debugInfo:""}}a.ServerInfo={encode(bt,jt=_.default.Writer.create()){return bt.edition!==0&&jt.uint32(8).int32(bt.edition),bt.version!==""&&jt.uint32(18).string(bt.version),bt.protocol!==0&&jt.uint32(24).int32(bt.protocol),bt.region!==""&&jt.uint32(34).string(bt.region),bt.nodeId!==""&&jt.uint32(42).string(bt.nodeId),bt.debugInfo!==""&&jt.uint32(50).string(bt.debugInfo),jt},decode(bt,jt){const Ut=bt instanceof _.default.Reader?bt:new _.default.Reader(bt);let Ft=jt===void 0?Ut.len:Ut.pos+jt;const Ht=Nt();for(;Ut.pos<Ft;){const or=Ut.uint32();switch(or>>>3){case 1:Ht.edition=Ut.int32();break;case 2:Ht.version=Ut.string();break;case 3:Ht.protocol=Ut.int32();break;case 4:Ht.region=Ut.string();break;case 5:Ht.nodeId=Ut.string();break;case 6:Ht.debugInfo=Ut.string();break;default:Ut.skipType(or&7);break}}return Ht},fromJSON(bt){return{edition:tr(bt.edition)?it(bt.edition):0,version:tr(bt.version)?String(bt.version):"",protocol:tr(bt.protocol)?Number(bt.protocol):0,region:tr(bt.region)?String(bt.region):"",nodeId:tr(bt.nodeId)?String(bt.nodeId):"",debugInfo:tr(bt.debugInfo)?String(bt.debugInfo):""}},toJSON(bt){const jt={};return bt.edition!==void 0&&(jt.edition=dt(bt.edition)),bt.version!==void 0&&(jt.version=bt.version),bt.protocol!==void 0&&(jt.protocol=Math.round(bt.protocol)),bt.region!==void 0&&(jt.region=bt.region),bt.nodeId!==void 0&&(jt.nodeId=bt.nodeId),bt.debugInfo!==void 0&&(jt.debugInfo=bt.debugInfo),jt},fromPartial(bt){var jt,Ut,Ft,Ht,or,vr;const Ir=Nt();return Ir.edition=(jt=bt.edition)!==null&&jt!==void 0?jt:0,Ir.version=(Ut=bt.version)!==null&&Ut!==void 0?Ut:"",Ir.protocol=(Ft=bt.protocol)!==null&&Ft!==void 0?Ft:0,Ir.region=(Ht=bt.region)!==null&&Ht!==void 0?Ht:"",Ir.nodeId=(or=bt.nodeId)!==null&&or!==void 0?or:"",Ir.debugInfo=(vr=bt.debugInfo)!==null&&vr!==void 0?vr:"",Ir}};function st(){return{sdk:0,version:"",protocol:0,os:"",osVersion:"",deviceModel:"",browser:"",browserVersion:"",address:"",network:""}}a.ClientInfo={encode(bt,jt=_.default.Writer.create()){return bt.sdk!==0&&jt.uint32(8).int32(bt.sdk),bt.version!==""&&jt.uint32(18).string(bt.version),bt.protocol!==0&&jt.uint32(24).int32(bt.protocol),bt.os!==""&&jt.uint32(34).string(bt.os),bt.osVersion!==""&&jt.uint32(42).string(bt.osVersion),bt.deviceModel!==""&&jt.uint32(50).string(bt.deviceModel),bt.browser!==""&&jt.uint32(58).string(bt.browser),bt.browserVersion!==""&&jt.uint32(66).string(bt.browserVersion),bt.address!==""&&jt.uint32(74).string(bt.address),bt.network!==""&&jt.uint32(82).string(bt.network),jt},decode(bt,jt){const Ut=bt instanceof _.default.Reader?bt:new _.default.Reader(bt);let Ft=jt===void 0?Ut.len:Ut.pos+jt;const Ht=st();for(;Ut.pos<Ft;){const or=Ut.uint32();switch(or>>>3){case 1:Ht.sdk=Ut.int32();break;case 2:Ht.version=Ut.string();break;case 3:Ht.protocol=Ut.int32();break;case 4:Ht.os=Ut.string();break;case 5:Ht.osVersion=Ut.string();break;case 6:Ht.deviceModel=Ut.string();break;case 7:Ht.browser=Ut.string();break;case 8:Ht.browserVersion=Ut.string();break;case 9:Ht.address=Ut.string();break;case 10:Ht.network=Ut.string();break;default:Ut.skipType(or&7);break}}return Ht},fromJSON(bt){return{sdk:tr(bt.sdk)?gt(bt.sdk):0,version:tr(bt.version)?String(bt.version):"",protocol:tr(bt.protocol)?Number(bt.protocol):0,os:tr(bt.os)?String(bt.os):"",osVersion:tr(bt.osVersion)?String(bt.osVersion):"",deviceModel:tr(bt.deviceModel)?String(bt.deviceModel):"",browser:tr(bt.browser)?String(bt.browser):"",browserVersion:tr(bt.browserVersion)?String(bt.browserVersion):"",address:tr(bt.address)?String(bt.address):"",network:tr(bt.network)?String(bt.network):""}},toJSON(bt){const jt={};return bt.sdk!==void 0&&(jt.sdk=Et(bt.sdk)),bt.version!==void 0&&(jt.version=bt.version),bt.protocol!==void 0&&(jt.protocol=Math.round(bt.protocol)),bt.os!==void 0&&(jt.os=bt.os),bt.osVersion!==void 0&&(jt.osVersion=bt.osVersion),bt.deviceModel!==void 0&&(jt.deviceModel=bt.deviceModel),bt.browser!==void 0&&(jt.browser=bt.browser),bt.browserVersion!==void 0&&(jt.browserVersion=bt.browserVersion),bt.address!==void 0&&(jt.address=bt.address),bt.network!==void 0&&(jt.network=bt.network),jt},fromPartial(bt){var jt,Ut,Ft,Ht,or,vr,Ir,Sr,Or,Cr;const yt=st();return yt.sdk=(jt=bt.sdk)!==null&&jt!==void 0?jt:0,yt.version=(Ut=bt.version)!==null&&Ut!==void 0?Ut:"",yt.protocol=(Ft=bt.protocol)!==null&&Ft!==void 0?Ft:0,yt.os=(Ht=bt.os)!==null&&Ht!==void 0?Ht:"",yt.osVersion=(or=bt.osVersion)!==null&&or!==void 0?or:"",yt.deviceModel=(vr=bt.deviceModel)!==null&&vr!==void 0?vr:"",yt.browser=(Ir=bt.browser)!==null&&Ir!==void 0?Ir:"",yt.browserVersion=(Sr=bt.browserVersion)!==null&&Sr!==void 0?Sr:"",yt.address=(Or=bt.address)!==null&&Or!==void 0?Or:"",yt.network=(Cr=bt.network)!==null&&Cr!==void 0?Cr:"",yt}};function Ct(){return{video:void 0,screen:void 0,resumeConnection:0,disabledCodecs:void 0,forceRelay:0}}a.ClientConfiguration={encode(bt,jt=_.default.Writer.create()){return bt.video!==void 0&&a.VideoConfiguration.encode(bt.video,jt.uint32(10).fork()).ldelim(),bt.screen!==void 0&&a.VideoConfiguration.encode(bt.screen,jt.uint32(18).fork()).ldelim(),bt.resumeConnection!==0&&jt.uint32(24).int32(bt.resumeConnection),bt.disabledCodecs!==void 0&&a.DisabledCodecs.encode(bt.disabledCodecs,jt.uint32(34).fork()).ldelim(),bt.forceRelay!==0&&jt.uint32(40).int32(bt.forceRelay),jt},decode(bt,jt){const Ut=bt instanceof _.default.Reader?bt:new _.default.Reader(bt);let Ft=jt===void 0?Ut.len:Ut.pos+jt;const Ht=Ct();for(;Ut.pos<Ft;){const or=Ut.uint32();switch(or>>>3){case 1:Ht.video=a.VideoConfiguration.decode(Ut,Ut.uint32());break;case 2:Ht.screen=a.VideoConfiguration.decode(Ut,Ut.uint32());break;case 3:Ht.resumeConnection=Ut.int32();break;case 4:Ht.disabledCodecs=a.DisabledCodecs.decode(Ut,Ut.uint32());break;case 5:Ht.forceRelay=Ut.int32();break;default:Ut.skipType(or&7);break}}return Ht},fromJSON(bt){return{video:tr(bt.video)?a.VideoConfiguration.fromJSON(bt.video):void 0,screen:tr(bt.screen)?a.VideoConfiguration.fromJSON(bt.screen):void 0,resumeConnection:tr(bt.resumeConnection)?Rt(bt.resumeConnection):0,disabledCodecs:tr(bt.disabledCodecs)?a.DisabledCodecs.fromJSON(bt.disabledCodecs):void 0,forceRelay:tr(bt.forceRelay)?Rt(bt.forceRelay):0}},toJSON(bt){const jt={};return bt.video!==void 0&&(jt.video=bt.video?a.VideoConfiguration.toJSON(bt.video):void 0),bt.screen!==void 0&&(jt.screen=bt.screen?a.VideoConfiguration.toJSON(bt.screen):void 0),bt.resumeConnection!==void 0&&(jt.resumeConnection=xt(bt.resumeConnection)),bt.disabledCodecs!==void 0&&(jt.disabledCodecs=bt.disabledCodecs?a.DisabledCodecs.toJSON(bt.disabledCodecs):void 0),bt.forceRelay!==void 0&&(jt.forceRelay=xt(bt.forceRelay)),jt},fromPartial(bt){var jt,Ut;const Ft=Ct();return Ft.video=bt.video!==void 0&&bt.video!==null?a.VideoConfiguration.fromPartial(bt.video):void 0,Ft.screen=bt.screen!==void 0&&bt.screen!==null?a.VideoConfiguration.fromPartial(bt.screen):void 0,Ft.resumeConnection=(jt=bt.resumeConnection)!==null&&jt!==void 0?jt:0,Ft.disabledCodecs=bt.disabledCodecs!==void 0&&bt.disabledCodecs!==null?a.DisabledCodecs.fromPartial(bt.disabledCodecs):void 0,Ft.forceRelay=(Ut=bt.forceRelay)!==null&&Ut!==void 0?Ut:0,Ft}};function qt(){return{hardwareEncoder:0}}a.VideoConfiguration={encode(bt,jt=_.default.Writer.create()){return bt.hardwareEncoder!==0&&jt.uint32(8).int32(bt.hardwareEncoder),jt},decode(bt,jt){const Ut=bt instanceof _.default.Reader?bt:new _.default.Reader(bt);let Ft=jt===void 0?Ut.len:Ut.pos+jt;const Ht=qt();for(;Ut.pos<Ft;){const or=Ut.uint32();switch(or>>>3){case 1:Ht.hardwareEncoder=Ut.int32();break;default:Ut.skipType(or&7);break}}return Ht},fromJSON(bt){return{hardwareEncoder:tr(bt.hardwareEncoder)?Rt(bt.hardwareEncoder):0}},toJSON(bt){const jt={};return bt.hardwareEncoder!==void 0&&(jt.hardwareEncoder=xt(bt.hardwareEncoder)),jt},fromPartial(bt){var jt;const Ut=qt();return Ut.hardwareEncoder=(jt=bt.hardwareEncoder)!==null&&jt!==void 0?jt:0,Ut}};function cr(){return{codecs:[]}}a.DisabledCodecs={encode(bt,jt=_.default.Writer.create()){for(const Ut of bt.codecs)a.Codec.encode(Ut,jt.uint32(10).fork()).ldelim();return jt},decode(bt,jt){const Ut=bt instanceof _.default.Reader?bt:new _.default.Reader(bt);let Ft=jt===void 0?Ut.len:Ut.pos+jt;const Ht=cr();for(;Ut.pos<Ft;){const or=Ut.uint32();switch(or>>>3){case 1:Ht.codecs.push(a.Codec.decode(Ut,Ut.uint32()));break;default:Ut.skipType(or&7);break}}return Ht},fromJSON(bt){return{codecs:Array.isArray(bt==null?void 0:bt.codecs)?bt.codecs.map(jt=>a.Codec.fromJSON(jt)):[]}},toJSON(bt){const jt={};return bt.codecs?jt.codecs=bt.codecs.map(Ut=>Ut?a.Codec.toJSON(Ut):void 0):jt.codecs=[],jt},fromPartial(bt){var jt;const Ut=cr();return Ut.codecs=((jt=bt.codecs)===null||jt===void 0?void 0:jt.map(Ft=>a.Codec.fromPartial(Ft)))||[],Ut}};function dr(){return{startTime:void 0,endTime:void 0,duration:0,packets:0,packetRate:0,bytes:0,headerBytes:0,bitrate:0,packetsLost:0,packetLossRate:0,packetLossPercentage:0,packetsDuplicate:0,packetDuplicateRate:0,bytesDuplicate:0,headerBytesDuplicate:0,bitrateDuplicate:0,packetsPadding:0,packetPaddingRate:0,bytesPadding:0,headerBytesPadding:0,bitratePadding:0,packetsOutOfOrder:0,frames:0,frameRate:0,jitterCurrent:0,jitterMax:0,gapHistogram:{},nacks:0,nackAcks:0,nackMisses:0,nackRepeated:0,plis:0,lastPli:void 0,firs:0,lastFir:void 0,rttCurrent:0,rttMax:0,keyFrames:0,lastKeyFrame:void 0,layerLockPlis:0,lastLayerLockPli:void 0}}a.RTPStats={encode(bt,jt=_.default.Writer.create()){return bt.startTime!==void 0&&$.Timestamp.encode(_r(bt.startTime),jt.uint32(10).fork()).ldelim(),bt.endTime!==void 0&&$.Timestamp.encode(_r(bt.endTime),jt.uint32(18).fork()).ldelim(),bt.duration!==0&&jt.uint32(25).double(bt.duration),bt.packets!==0&&jt.uint32(32).uint32(bt.packets),bt.packetRate!==0&&jt.uint32(41).double(bt.packetRate),bt.bytes!==0&&jt.uint32(48).uint64(bt.bytes),bt.headerBytes!==0&&jt.uint32(312).uint64(bt.headerBytes),bt.bitrate!==0&&jt.uint32(57).double(bt.bitrate),bt.packetsLost!==0&&jt.uint32(64).uint32(bt.packetsLost),bt.packetLossRate!==0&&jt.uint32(73).double(bt.packetLossRate),bt.packetLossPercentage!==0&&jt.uint32(85).float(bt.packetLossPercentage),bt.packetsDuplicate!==0&&jt.uint32(88).uint32(bt.packetsDuplicate),bt.packetDuplicateRate!==0&&jt.uint32(97).double(bt.packetDuplicateRate),bt.bytesDuplicate!==0&&jt.uint32(104).uint64(bt.bytesDuplicate),bt.headerBytesDuplicate!==0&&jt.uint32(320).uint64(bt.headerBytesDuplicate),bt.bitrateDuplicate!==0&&jt.uint32(113).double(bt.bitrateDuplicate),bt.packetsPadding!==0&&jt.uint32(120).uint32(bt.packetsPadding),bt.packetPaddingRate!==0&&jt.uint32(129).double(bt.packetPaddingRate),bt.bytesPadding!==0&&jt.uint32(136).uint64(bt.bytesPadding),bt.headerBytesPadding!==0&&jt.uint32(328).uint64(bt.headerBytesPadding),bt.bitratePadding!==0&&jt.uint32(145).double(bt.bitratePadding),bt.packetsOutOfOrder!==0&&jt.uint32(152).uint32(bt.packetsOutOfOrder),bt.frames!==0&&jt.uint32(160).uint32(bt.frames),bt.frameRate!==0&&jt.uint32(169).double(bt.frameRate),bt.jitterCurrent!==0&&jt.uint32(177).double(bt.jitterCurrent),bt.jitterMax!==0&&jt.uint32(185).double(bt.jitterMax),Object.entries(bt.gapHistogram).forEach(([Ut,Ft])=>{a.RTPStats_GapHistogramEntry.encode({key:Ut,value:Ft},jt.uint32(194).fork()).ldelim()}),bt.nacks!==0&&jt.uint32(200).uint32(bt.nacks),bt.nackAcks!==0&&jt.uint32(296).uint32(bt.nackAcks),bt.nackMisses!==0&&jt.uint32(208).uint32(bt.nackMisses),bt.nackRepeated!==0&&jt.uint32(304).uint32(bt.nackRepeated),bt.plis!==0&&jt.uint32(216).uint32(bt.plis),bt.lastPli!==void 0&&$.Timestamp.encode(_r(bt.lastPli),jt.uint32(226).fork()).ldelim(),bt.firs!==0&&jt.uint32(232).uint32(bt.firs),bt.lastFir!==void 0&&$.Timestamp.encode(_r(bt.lastFir),jt.uint32(242).fork()).ldelim(),bt.rttCurrent!==0&&jt.uint32(248).uint32(bt.rttCurrent),bt.rttMax!==0&&jt.uint32(256).uint32(bt.rttMax),bt.keyFrames!==0&&jt.uint32(264).uint32(bt.keyFrames),bt.lastKeyFrame!==void 0&&$.Timestamp.encode(_r(bt.lastKeyFrame),jt.uint32(274).fork()).ldelim(),bt.layerLockPlis!==0&&jt.uint32(280).uint32(bt.layerLockPlis),bt.lastLayerLockPli!==void 0&&$.Timestamp.encode(_r(bt.lastLayerLockPli),jt.uint32(290).fork()).ldelim(),jt},decode(bt,jt){const Ut=bt instanceof _.default.Reader?bt:new _.default.Reader(bt);let Ft=jt===void 0?Ut.len:Ut.pos+jt;const Ht=dr();for(;Ut.pos<Ft;){const or=Ut.uint32();switch(or>>>3){case 1:Ht.startTime=St($.Timestamp.decode(Ut,Ut.uint32()));break;case 2:Ht.endTime=St($.Timestamp.decode(Ut,Ut.uint32()));break;case 3:Ht.duration=Ut.double();break;case 4:Ht.packets=Ut.uint32();break;case 5:Ht.packetRate=Ut.double();break;case 6:Ht.bytes=er(Ut.uint64());break;case 39:Ht.headerBytes=er(Ut.uint64());break;case 7:Ht.bitrate=Ut.double();break;case 8:Ht.packetsLost=Ut.uint32();break;case 9:Ht.packetLossRate=Ut.double();break;case 10:Ht.packetLossPercentage=Ut.float();break;case 11:Ht.packetsDuplicate=Ut.uint32();break;case 12:Ht.packetDuplicateRate=Ut.double();break;case 13:Ht.bytesDuplicate=er(Ut.uint64());break;case 40:Ht.headerBytesDuplicate=er(Ut.uint64());break;case 14:Ht.bitrateDuplicate=Ut.double();break;case 15:Ht.packetsPadding=Ut.uint32();break;case 16:Ht.packetPaddingRate=Ut.double();break;case 17:Ht.bytesPadding=er(Ut.uint64());break;case 41:Ht.headerBytesPadding=er(Ut.uint64());break;case 18:Ht.bitratePadding=Ut.double();break;case 19:Ht.packetsOutOfOrder=Ut.uint32();break;case 20:Ht.frames=Ut.uint32();break;case 21:Ht.frameRate=Ut.double();break;case 22:Ht.jitterCurrent=Ut.double();break;case 23:Ht.jitterMax=Ut.double();break;case 24:const vr=a.RTPStats_GapHistogramEntry.decode(Ut,Ut.uint32());vr.value!==void 0&&(Ht.gapHistogram[vr.key]=vr.value);break;case 25:Ht.nacks=Ut.uint32();break;case 37:Ht.nackAcks=Ut.uint32();break;case 26:Ht.nackMisses=Ut.uint32();break;case 38:Ht.nackRepeated=Ut.uint32();break;case 27:Ht.plis=Ut.uint32();break;case 28:Ht.lastPli=St($.Timestamp.decode(Ut,Ut.uint32()));break;case 29:Ht.firs=Ut.uint32();break;case 30:Ht.lastFir=St($.Timestamp.decode(Ut,Ut.uint32()));break;case 31:Ht.rttCurrent=Ut.uint32();break;case 32:Ht.rttMax=Ut.uint32();break;case 33:Ht.keyFrames=Ut.uint32();break;case 34:Ht.lastKeyFrame=St($.Timestamp.decode(Ut,Ut.uint32()));break;case 35:Ht.layerLockPlis=Ut.uint32();break;case 36:Ht.lastLayerLockPli=St($.Timestamp.decode(Ut,Ut.uint32()));break;default:Ut.skipType(or&7);break}}return Ht},fromJSON(bt){return{startTime:tr(bt.startTime)?Kt(bt.startTime):void 0,endTime:tr(bt.endTime)?Kt(bt.endTime):void 0,duration:tr(bt.duration)?Number(bt.duration):0,packets:tr(bt.packets)?Number(bt.packets):0,packetRate:tr(bt.packetRate)?Number(bt.packetRate):0,bytes:tr(bt.bytes)?Number(bt.bytes):0,headerBytes:tr(bt.headerBytes)?Number(bt.headerBytes):0,bitrate:tr(bt.bitrate)?Number(bt.bitrate):0,packetsLost:tr(bt.packetsLost)?Number(bt.packetsLost):0,packetLossRate:tr(bt.packetLossRate)?Number(bt.packetLossRate):0,packetLossPercentage:tr(bt.packetLossPercentage)?Number(bt.packetLossPercentage):0,packetsDuplicate:tr(bt.packetsDuplicate)?Number(bt.packetsDuplicate):0,packetDuplicateRate:tr(bt.packetDuplicateRate)?Number(bt.packetDuplicateRate):0,bytesDuplicate:tr(bt.bytesDuplicate)?Number(bt.bytesDuplicate):0,headerBytesDuplicate:tr(bt.headerBytesDuplicate)?Number(bt.headerBytesDuplicate):0,bitrateDuplicate:tr(bt.bitrateDuplicate)?Number(bt.bitrateDuplicate):0,packetsPadding:tr(bt.packetsPadding)?Number(bt.packetsPadding):0,packetPaddingRate:tr(bt.packetPaddingRate)?Number(bt.packetPaddingRate):0,bytesPadding:tr(bt.bytesPadding)?Number(bt.bytesPadding):0,headerBytesPadding:tr(bt.headerBytesPadding)?Number(bt.headerBytesPadding):0,bitratePadding:tr(bt.bitratePadding)?Number(bt.bitratePadding):0,packetsOutOfOrder:tr(bt.packetsOutOfOrder)?Number(bt.packetsOutOfOrder):0,frames:tr(bt.frames)?Number(bt.frames):0,frameRate:tr(bt.frameRate)?Number(bt.frameRate):0,jitterCurrent:tr(bt.jitterCurrent)?Number(bt.jitterCurrent):0,jitterMax:tr(bt.jitterMax)?Number(bt.jitterMax):0,gapHistogram:kr(bt.gapHistogram)?Object.entries(bt.gapHistogram).reduce((jt,[Ut,Ft])=>(jt[Number(Ut)]=Number(Ft),jt),{}):{},nacks:tr(bt.nacks)?Number(bt.nacks):0,nackAcks:tr(bt.nackAcks)?Number(bt.nackAcks):0,nackMisses:tr(bt.nackMisses)?Number(bt.nackMisses):0,nackRepeated:tr(bt.nackRepeated)?Number(bt.nackRepeated):0,plis:tr(bt.plis)?Number(bt.plis):0,lastPli:tr(bt.lastPli)?Kt(bt.lastPli):void 0,firs:tr(bt.firs)?Number(bt.firs):0,lastFir:tr(bt.lastFir)?Kt(bt.lastFir):void 0,rttCurrent:tr(bt.rttCurrent)?Number(bt.rttCurrent):0,rttMax:tr(bt.rttMax)?Number(bt.rttMax):0,keyFrames:tr(bt.keyFrames)?Number(bt.keyFrames):0,lastKeyFrame:tr(bt.lastKeyFrame)?Kt(bt.lastKeyFrame):void 0,layerLockPlis:tr(bt.layerLockPlis)?Number(bt.layerLockPlis):0,lastLayerLockPli:tr(bt.lastLayerLockPli)?Kt(bt.lastLayerLockPli):void 0}},toJSON(bt){const jt={};return bt.startTime!==void 0&&(jt.startTime=bt.startTime.toISOString()),bt.endTime!==void 0&&(jt.endTime=bt.endTime.toISOString()),bt.duration!==void 0&&(jt.duration=bt.duration),bt.packets!==void 0&&(jt.packets=Math.round(bt.packets)),bt.packetRate!==void 0&&(jt.packetRate=bt.packetRate),bt.bytes!==void 0&&(jt.bytes=Math.round(bt.bytes)),bt.headerBytes!==void 0&&(jt.headerBytes=Math.round(bt.headerBytes)),bt.bitrate!==void 0&&(jt.bitrate=bt.bitrate),bt.packetsLost!==void 0&&(jt.packetsLost=Math.round(bt.packetsLost)),bt.packetLossRate!==void 0&&(jt.packetLossRate=bt.packetLossRate),bt.packetLossPercentage!==void 0&&(jt.packetLossPercentage=bt.packetLossPercentage),bt.packetsDuplicate!==void 0&&(jt.packetsDuplicate=Math.round(bt.packetsDuplicate)),bt.packetDuplicateRate!==void 0&&(jt.packetDuplicateRate=bt.packetDuplicateRate),bt.bytesDuplicate!==void 0&&(jt.bytesDuplicate=Math.round(bt.bytesDuplicate)),bt.headerBytesDuplicate!==void 0&&(jt.headerBytesDuplicate=Math.round(bt.headerBytesDuplicate)),bt.bitrateDuplicate!==void 0&&(jt.bitrateDuplicate=bt.bitrateDuplicate),bt.packetsPadding!==void 0&&(jt.packetsPadding=Math.round(bt.packetsPadding)),bt.packetPaddingRate!==void 0&&(jt.packetPaddingRate=bt.packetPaddingRate),bt.bytesPadding!==void 0&&(jt.bytesPadding=Math.round(bt.bytesPadding)),bt.headerBytesPadding!==void 0&&(jt.headerBytesPadding=Math.round(bt.headerBytesPadding)),bt.bitratePadding!==void 0&&(jt.bitratePadding=bt.bitratePadding),bt.packetsOutOfOrder!==void 0&&(jt.packetsOutOfOrder=Math.round(bt.packetsOutOfOrder)),bt.frames!==void 0&&(jt.frames=Math.round(bt.frames)),bt.frameRate!==void 0&&(jt.frameRate=bt.frameRate),bt.jitterCurrent!==void 0&&(jt.jitterCurrent=bt.jitterCurrent),bt.jitterMax!==void 0&&(jt.jitterMax=bt.jitterMax),jt.gapHistogram={},bt.gapHistogram&&Object.entries(bt.gapHistogram).forEach(([Ut,Ft])=>{jt.gapHistogram[Ut]=Math.round(Ft)}),bt.nacks!==void 0&&(jt.nacks=Math.round(bt.nacks)),bt.nackAcks!==void 0&&(jt.nackAcks=Math.round(bt.nackAcks)),bt.nackMisses!==void 0&&(jt.nackMisses=Math.round(bt.nackMisses)),bt.nackRepeated!==void 0&&(jt.nackRepeated=Math.round(bt.nackRepeated)),bt.plis!==void 0&&(jt.plis=Math.round(bt.plis)),bt.lastPli!==void 0&&(jt.lastPli=bt.lastPli.toISOString()),bt.firs!==void 0&&(jt.firs=Math.round(bt.firs)),bt.lastFir!==void 0&&(jt.lastFir=bt.lastFir.toISOString()),bt.rttCurrent!==void 0&&(jt.rttCurrent=Math.round(bt.rttCurrent)),bt.rttMax!==void 0&&(jt.rttMax=Math.round(bt.rttMax)),bt.keyFrames!==void 0&&(jt.keyFrames=Math.round(bt.keyFrames)),bt.lastKeyFrame!==void 0&&(jt.lastKeyFrame=bt.lastKeyFrame.toISOString()),bt.layerLockPlis!==void 0&&(jt.layerLockPlis=Math.round(bt.layerLockPlis)),bt.lastLayerLockPli!==void 0&&(jt.lastLayerLockPli=bt.lastLayerLockPli.toISOString()),jt},fromPartial(bt){var jt,Ut,Ft,Ht,or,vr,Ir,Sr,Or,Cr,yt,Bt,Zt,yr,fr,Rr,Nr,xr,Xr,Ar,Br,rn,Dr,qr,nn,$r,Lr,Qr,Ur,Jr,cn,Fr,Vr,sn,un,yn,br,wr,Mr,Wr,Hr;const Gr=dr();return Gr.startTime=(jt=bt.startTime)!==null&&jt!==void 0?jt:void 0,Gr.endTime=(Ut=bt.endTime)!==null&&Ut!==void 0?Ut:void 0,Gr.duration=(Ft=bt.duration)!==null&&Ft!==void 0?Ft:0,Gr.packets=(Ht=bt.packets)!==null&&Ht!==void 0?Ht:0,Gr.packetRate=(or=bt.packetRate)!==null&&or!==void 0?or:0,Gr.bytes=(vr=bt.bytes)!==null&&vr!==void 0?vr:0,Gr.headerBytes=(Ir=bt.headerBytes)!==null&&Ir!==void 0?Ir:0,Gr.bitrate=(Sr=bt.bitrate)!==null&&Sr!==void 0?Sr:0,Gr.packetsLost=(Or=bt.packetsLost)!==null&&Or!==void 0?Or:0,Gr.packetLossRate=(Cr=bt.packetLossRate)!==null&&Cr!==void 0?Cr:0,Gr.packetLossPercentage=(yt=bt.packetLossPercentage)!==null&&yt!==void 0?yt:0,Gr.packetsDuplicate=(Bt=bt.packetsDuplicate)!==null&&Bt!==void 0?Bt:0,Gr.packetDuplicateRate=(Zt=bt.packetDuplicateRate)!==null&&Zt!==void 0?Zt:0,Gr.bytesDuplicate=(yr=bt.bytesDuplicate)!==null&&yr!==void 0?yr:0,Gr.headerBytesDuplicate=(fr=bt.headerBytesDuplicate)!==null&&fr!==void 0?fr:0,Gr.bitrateDuplicate=(Rr=bt.bitrateDuplicate)!==null&&Rr!==void 0?Rr:0,Gr.packetsPadding=(Nr=bt.packetsPadding)!==null&&Nr!==void 0?Nr:0,Gr.packetPaddingRate=(xr=bt.packetPaddingRate)!==null&&xr!==void 0?xr:0,Gr.bytesPadding=(Xr=bt.bytesPadding)!==null&&Xr!==void 0?Xr:0,Gr.headerBytesPadding=(Ar=bt.headerBytesPadding)!==null&&Ar!==void 0?Ar:0,Gr.bitratePadding=(Br=bt.bitratePadding)!==null&&Br!==void 0?Br:0,Gr.packetsOutOfOrder=(rn=bt.packetsOutOfOrder)!==null&&rn!==void 0?rn:0,Gr.frames=(Dr=bt.frames)!==null&&Dr!==void 0?Dr:0,Gr.frameRate=(qr=bt.frameRate)!==null&&qr!==void 0?qr:0,Gr.jitterCurrent=(nn=bt.jitterCurrent)!==null&&nn!==void 0?nn:0,Gr.jitterMax=($r=bt.jitterMax)!==null&&$r!==void 0?$r:0,Gr.gapHistogram=Object.entries((Lr=bt.gapHistogram)!==null&&Lr!==void 0?Lr:{}).reduce((Yr,[en,jr])=>(jr!==void 0&&(Yr[Number(en)]=Number(jr)),Yr),{}),Gr.nacks=(Qr=bt.nacks)!==null&&Qr!==void 0?Qr:0,Gr.nackAcks=(Ur=bt.nackAcks)!==null&&Ur!==void 0?Ur:0,Gr.nackMisses=(Jr=bt.nackMisses)!==null&&Jr!==void 0?Jr:0,Gr.nackRepeated=(cn=bt.nackRepeated)!==null&&cn!==void 0?cn:0,Gr.plis=(Fr=bt.plis)!==null&&Fr!==void 0?Fr:0,Gr.lastPli=(Vr=bt.lastPli)!==null&&Vr!==void 0?Vr:void 0,Gr.firs=(sn=bt.firs)!==null&&sn!==void 0?sn:0,Gr.lastFir=(un=bt.lastFir)!==null&&un!==void 0?un:void 0,Gr.rttCurrent=(yn=bt.rttCurrent)!==null&&yn!==void 0?yn:0,Gr.rttMax=(br=bt.rttMax)!==null&&br!==void 0?br:0,Gr.keyFrames=(wr=bt.keyFrames)!==null&&wr!==void 0?wr:0,Gr.lastKeyFrame=(Mr=bt.lastKeyFrame)!==null&&Mr!==void 0?Mr:void 0,Gr.layerLockPlis=(Wr=bt.layerLockPlis)!==null&&Wr!==void 0?Wr:0,Gr.lastLayerLockPli=(Hr=bt.lastLayerLockPli)!==null&&Hr!==void 0?Hr:void 0,Gr}};function Er(){return{key:0,value:0}}a.RTPStats_GapHistogramEntry={encode(bt,jt=_.default.Writer.create()){return bt.key!==0&&jt.uint32(8).int32(bt.key),bt.value!==0&&jt.uint32(16).uint32(bt.value),jt},decode(bt,jt){const Ut=bt instanceof _.default.Reader?bt:new _.default.Reader(bt);let Ft=jt===void 0?Ut.len:Ut.pos+jt;const Ht=Er();for(;Ut.pos<Ft;){const or=Ut.uint32();switch(or>>>3){case 1:Ht.key=Ut.int32();break;case 2:Ht.value=Ut.uint32();break;default:Ut.skipType(or&7);break}}return Ht},fromJSON(bt){return{key:tr(bt.key)?Number(bt.key):0,value:tr(bt.value)?Number(bt.value):0}},toJSON(bt){const jt={};return bt.key!==void 0&&(jt.key=Math.round(bt.key)),bt.value!==void 0&&(jt.value=Math.round(bt.value)),jt},fromPartial(bt){var jt,Ut;const Ft=Er();return Ft.key=(jt=bt.key)!==null&&jt!==void 0?jt:0,Ft.value=(Ut=bt.value)!==null&&Ut!==void 0?Ut:0,Ft}};function Tr(){return{unixMicro:0,ticks:0}}a.TimedVersion={encode(bt,jt=_.default.Writer.create()){return bt.unixMicro!==0&&jt.uint32(8).int64(bt.unixMicro),bt.ticks!==0&&jt.uint32(16).int32(bt.ticks),jt},decode(bt,jt){const Ut=bt instanceof _.default.Reader?bt:new _.default.Reader(bt);let Ft=jt===void 0?Ut.len:Ut.pos+jt;const Ht=Tr();for(;Ut.pos<Ft;){const or=Ut.uint32();switch(or>>>3){case 1:Ht.unixMicro=er(Ut.int64());break;case 2:Ht.ticks=Ut.int32();break;default:Ut.skipType(or&7);break}}return Ht},fromJSON(bt){return{unixMicro:tr(bt.unixMicro)?Number(bt.unixMicro):0,ticks:tr(bt.ticks)?Number(bt.ticks):0}},toJSON(bt){const jt={};return bt.unixMicro!==void 0&&(jt.unixMicro=Math.round(bt.unixMicro)),bt.ticks!==void 0&&(jt.ticks=Math.round(bt.ticks)),jt},fromPartial(bt){var jt,Ut;const Ft=Tr();return Ft.unixMicro=(jt=bt.unixMicro)!==null&&jt!==void 0?jt:0,Ft.ticks=(Ut=bt.ticks)!==null&&Ut!==void 0?Ut:0,Ft}};var gr=(()=>{if(typeof gr<"u")return gr;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof commonjsGlobal$1<"u")return commonjsGlobal$1;throw"Unable to locate global object"})();function Zr(bt){if(gr.Buffer)return Uint8Array.from(gr.Buffer.from(bt,"base64"));{const jt=gr.atob(bt),Ut=new Uint8Array(jt.length);for(let Ft=0;Ft<jt.length;++Ft)Ut[Ft]=jt.charCodeAt(Ft);return Ut}}function Pr(bt){if(gr.Buffer)return gr.Buffer.from(bt).toString("base64");{const jt=[];return bt.forEach(Ut=>{jt.push(String.fromCharCode(Ut))}),gr.btoa(jt.join(""))}}function _r(bt){const jt=bt.getTime()/1e3,Ut=bt.getTime()%1e3*1e6;return{seconds:jt,nanos:Ut}}function St(bt){let jt=bt.seconds*1e3;return jt+=bt.nanos/1e6,new Date(jt)}function Kt(bt){return bt instanceof Date?bt:typeof bt=="string"?new Date(bt):St($.Timestamp.fromJSON(bt))}function er(bt){if(bt.gt(Number.MAX_SAFE_INTEGER))throw new gr.Error("Value is larger than Number.MAX_SAFE_INTEGER");return bt.toNumber()}_.default.util.Long!==b.default&&(_.default.util.Long=b.default,_.default.configure());function kr(bt){return typeof bt=="object"&&bt!==null}function tr(bt){return bt!=null}})(livekit_models);(function(a){var c=commonjsGlobal$1&&commonjsGlobal$1.__importDefault||function(Ot){return Ot&&Ot.__esModule?Ot:{default:Ot}};Object.defineProperty(a,"__esModule",{value:!0}),a.DeleteIngressRequest=a.ListIngressResponse=a.ListIngressRequest=a.UpdateIngressRequest=a.InputAudioState=a.InputVideoState=a.IngressState=a.IngressInfo=a.IngressVideoOptions=a.IngressAudioOptions=a.CreateIngressRequest=a.ingressState_StatusToJSON=a.ingressState_StatusFromJSON=a.IngressState_Status=a.ingressInputToJSON=a.ingressInputFromJSON=a.IngressInput=a.protobufPackage=void 0;const b=c(umdExports),_=c(minimal),$=livekit_models;a.protobufPackage="livekit";var k;(function(Ot){Ot[Ot.RTMP_INPUT=0]="RTMP_INPUT",Ot[Ot.UNRECOGNIZED=-1]="UNRECOGNIZED"})(k=a.IngressInput||(a.IngressInput={}));function et(Ot){switch(Ot){case 0:case"RTMP_INPUT":return k.RTMP_INPUT;case-1:case"UNRECOGNIZED":default:return k.UNRECOGNIZED}}a.ingressInputFromJSON=et;function nt(Ot){switch(Ot){case k.RTMP_INPUT:return"RTMP_INPUT";case k.UNRECOGNIZED:default:return"UNRECOGNIZED"}}a.ingressInputToJSON=nt;var ot;(function(Ot){Ot[Ot.ENDPOINT_INACTIVE=0]="ENDPOINT_INACTIVE",Ot[Ot.ENDPOINT_BUFFERING=1]="ENDPOINT_BUFFERING",Ot[Ot.ENDPOINT_PUBLISHING=2]="ENDPOINT_PUBLISHING",Ot[Ot.ENDPOINT_ERROR=3]="ENDPOINT_ERROR",Ot[Ot.UNRECOGNIZED=-1]="UNRECOGNIZED"})(ot=a.IngressState_Status||(a.IngressState_Status={}));function ht(Ot){switch(Ot){case 0:case"ENDPOINT_INACTIVE":return ot.ENDPOINT_INACTIVE;case 1:case"ENDPOINT_BUFFERING":return ot.ENDPOINT_BUFFERING;case 2:case"ENDPOINT_PUBLISHING":return ot.ENDPOINT_PUBLISHING;case 3:case"ENDPOINT_ERROR":return ot.ENDPOINT_ERROR;case-1:case"UNRECOGNIZED":default:return ot.UNRECOGNIZED}}a.ingressState_StatusFromJSON=ht;function vt(Ot){switch(Ot){case ot.ENDPOINT_INACTIVE:return"ENDPOINT_INACTIVE";case ot.ENDPOINT_BUFFERING:return"ENDPOINT_BUFFERING";case ot.ENDPOINT_PUBLISHING:return"ENDPOINT_PUBLISHING";case ot.ENDPOINT_ERROR:return"ENDPOINT_ERROR";case ot.UNRECOGNIZED:default:return"UNRECOGNIZED"}}a.ingressState_StatusToJSON=vt;function _t(){return{inputType:0,name:"",roomName:"",participantIdentity:"",participantName:"",audio:void 0,video:void 0}}a.CreateIngressRequest={encode(Ot,It=_.default.Writer.create()){return Ot.inputType!==void 0&&Ot.inputType!==0&&It.uint32(8).int32(Ot.inputType),Ot.name!==void 0&&Ot.name!==""&&It.uint32(18).string(Ot.name),Ot.roomName!==void 0&&Ot.roomName!==""&&It.uint32(26).string(Ot.roomName),Ot.participantIdentity!==void 0&&Ot.participantIdentity!==""&&It.uint32(34).string(Ot.participantIdentity),Ot.participantName!==void 0&&Ot.participantName!==""&&It.uint32(42).string(Ot.participantName),Ot.audio!==void 0&&a.IngressAudioOptions.encode(Ot.audio,It.uint32(50).fork()).ldelim(),Ot.video!==void 0&&a.IngressVideoOptions.encode(Ot.video,It.uint32(58).fork()).ldelim(),It},decode(Ot,It){const ut=Ot instanceof _.default.Reader?Ot:new _.default.Reader(Ot);let _e=It===void 0?ut.len:ut.pos+It;const tt=_t();for(;ut.pos<_e;){const it=ut.uint32();switch(it>>>3){case 1:tt.inputType=ut.int32();break;case 2:tt.name=ut.string();break;case 3:tt.roomName=ut.string();break;case 4:tt.participantIdentity=ut.string();break;case 5:tt.participantName=ut.string();break;case 6:tt.audio=a.IngressAudioOptions.decode(ut,ut.uint32());break;case 7:tt.video=a.IngressVideoOptions.decode(ut,ut.uint32());break;default:ut.skipType(it&7);break}}return tt},fromJSON(Ot){return{inputType:ur(Ot.inputType)?et(Ot.inputType):0,name:ur(Ot.name)?String(Ot.name):"",roomName:ur(Ot.roomName)?String(Ot.roomName):"",participantIdentity:ur(Ot.participantIdentity)?String(Ot.participantIdentity):"",participantName:ur(Ot.participantName)?String(Ot.participantName):"",audio:ur(Ot.audio)?a.IngressAudioOptions.fromJSON(Ot.audio):void 0,video:ur(Ot.video)?a.IngressVideoOptions.fromJSON(Ot.video):void 0}},toJSON(Ot){const It={};return Ot.inputType!==void 0&&(It.inputType=nt(Ot.inputType)),Ot.name!==void 0&&(It.name=Ot.name),Ot.roomName!==void 0&&(It.roomName=Ot.roomName),Ot.participantIdentity!==void 0&&(It.participantIdentity=Ot.participantIdentity),Ot.participantName!==void 0&&(It.participantName=Ot.participantName),Ot.audio!==void 0&&(It.audio=Ot.audio?a.IngressAudioOptions.toJSON(Ot.audio):void 0),Ot.video!==void 0&&(It.video=Ot.video?a.IngressVideoOptions.toJSON(Ot.video):void 0),It},fromPartial(Ot){var It,ut,_e,tt,it;const dt=_t();return dt.inputType=(It=Ot.inputType)!==null&&It!==void 0?It:0,dt.name=(ut=Ot.name)!==null&&ut!==void 0?ut:"",dt.roomName=(_e=Ot.roomName)!==null&&_e!==void 0?_e:"",dt.participantIdentity=(tt=Ot.participantIdentity)!==null&&tt!==void 0?tt:"",dt.participantName=(it=Ot.participantName)!==null&&it!==void 0?it:"",dt.audio=Ot.audio!==void 0&&Ot.audio!==null?a.IngressAudioOptions.fromPartial(Ot.audio):void 0,dt.video=Ot.video!==void 0&&Ot.video!==null?a.IngressVideoOptions.fromPartial(Ot.video):void 0,dt}};function kt(){return{name:"",source:0,mimeType:"",bitrate:0,disableDtx:!1,channels:0}}a.IngressAudioOptions={encode(Ot,It=_.default.Writer.create()){return Ot.name!==void 0&&Ot.name!==""&&It.uint32(10).string(Ot.name),Ot.source!==void 0&&Ot.source!==0&&It.uint32(16).int32(Ot.source),Ot.mimeType!==void 0&&Ot.mimeType!==""&&It.uint32(26).string(Ot.mimeType),Ot.bitrate!==void 0&&Ot.bitrate!==0&&It.uint32(32).uint32(Ot.bitrate),Ot.disableDtx===!0&&It.uint32(40).bool(Ot.disableDtx),Ot.channels!==void 0&&Ot.channels!==0&&It.uint32(48).uint32(Ot.channels),It},decode(Ot,It){const ut=Ot instanceof _.default.Reader?Ot:new _.default.Reader(Ot);let _e=It===void 0?ut.len:ut.pos+It;const tt=kt();for(;ut.pos<_e;){const it=ut.uint32();switch(it>>>3){case 1:tt.name=ut.string();break;case 2:tt.source=ut.int32();break;case 3:tt.mimeType=ut.string();break;case 4:tt.bitrate=ut.uint32();break;case 5:tt.disableDtx=ut.bool();break;case 6:tt.channels=ut.uint32();break;default:ut.skipType(it&7);break}}return tt},fromJSON(Ot){return{name:ur(Ot.name)?String(Ot.name):"",source:ur(Ot.source)?$.trackSourceFromJSON(Ot.source):0,mimeType:ur(Ot.mimeType)?String(Ot.mimeType):"",bitrate:ur(Ot.bitrate)?Number(Ot.bitrate):0,disableDtx:ur(Ot.disableDtx)?!!Ot.disableDtx:!1,channels:ur(Ot.channels)?Number(Ot.channels):0}},toJSON(Ot){const It={};return Ot.name!==void 0&&(It.name=Ot.name),Ot.source!==void 0&&(It.source=$.trackSourceToJSON(Ot.source)),Ot.mimeType!==void 0&&(It.mimeType=Ot.mimeType),Ot.bitrate!==void 0&&(It.bitrate=Math.round(Ot.bitrate)),Ot.disableDtx!==void 0&&(It.disableDtx=Ot.disableDtx),Ot.channels!==void 0&&(It.channels=Math.round(Ot.channels)),It},fromPartial(Ot){var It,ut,_e,tt,it,dt;const lt=kt();return lt.name=(It=Ot.name)!==null&&It!==void 0?It:"",lt.source=(ut=Ot.source)!==null&&ut!==void 0?ut:0,lt.mimeType=(_e=Ot.mimeType)!==null&&_e!==void 0?_e:"",lt.bitrate=(tt=Ot.bitrate)!==null&&tt!==void 0?tt:0,lt.disableDtx=(it=Ot.disableDtx)!==null&&it!==void 0?it:!1,lt.channels=(dt=Ot.channels)!==null&&dt!==void 0?dt:0,lt}};function $t(){return{name:"",source:0,mimeType:"",layers:[]}}a.IngressVideoOptions={encode(Ot,It=_.default.Writer.create()){if(Ot.name!==void 0&&Ot.name!==""&&It.uint32(10).string(Ot.name),Ot.source!==void 0&&Ot.source!==0&&It.uint32(16).int32(Ot.source),Ot.mimeType!==void 0&&Ot.mimeType!==""&&It.uint32(26).string(Ot.mimeType),Ot.layers!==void 0&&Ot.layers.length!==0)for(const ut of Ot.layers)$.VideoLayer.encode(ut,It.uint32(34).fork()).ldelim();return It},decode(Ot,It){const ut=Ot instanceof _.default.Reader?Ot:new _.default.Reader(Ot);let _e=It===void 0?ut.len:ut.pos+It;const tt=$t();for(;ut.pos<_e;){const it=ut.uint32();switch(it>>>3){case 1:tt.name=ut.string();break;case 2:tt.source=ut.int32();break;case 3:tt.mimeType=ut.string();break;case 4:tt.layers.push($.VideoLayer.decode(ut,ut.uint32()));break;default:ut.skipType(it&7);break}}return tt},fromJSON(Ot){return{name:ur(Ot.name)?String(Ot.name):"",source:ur(Ot.source)?$.trackSourceFromJSON(Ot.source):0,mimeType:ur(Ot.mimeType)?String(Ot.mimeType):"",layers:Array.isArray(Ot==null?void 0:Ot.layers)?Ot.layers.map(It=>$.VideoLayer.fromJSON(It)):[]}},toJSON(Ot){const It={};return Ot.name!==void 0&&(It.name=Ot.name),Ot.source!==void 0&&(It.source=$.trackSourceToJSON(Ot.source)),Ot.mimeType!==void 0&&(It.mimeType=Ot.mimeType),Ot.layers?It.layers=Ot.layers.map(ut=>ut?$.VideoLayer.toJSON(ut):void 0):It.layers=[],It},fromPartial(Ot){var It,ut,_e,tt;const it=$t();return it.name=(It=Ot.name)!==null&&It!==void 0?It:"",it.source=(ut=Ot.source)!==null&&ut!==void 0?ut:0,it.mimeType=(_e=Ot.mimeType)!==null&&_e!==void 0?_e:"",it.layers=((tt=Ot.layers)===null||tt===void 0?void 0:tt.map(dt=>$.VideoLayer.fromPartial(dt)))||[],it}};function Tt(){return{ingressId:"",name:"",streamKey:"",url:"",inputType:0,audio:void 0,video:void 0,roomName:"",participantIdentity:"",participantName:"",reusable:!1,state:void 0}}a.IngressInfo={encode(Ot,It=_.default.Writer.create()){return Ot.ingressId!==void 0&&Ot.ingressId!==""&&It.uint32(10).string(Ot.ingressId),Ot.name!==void 0&&Ot.name!==""&&It.uint32(18).string(Ot.name),Ot.streamKey!==void 0&&Ot.streamKey!==""&&It.uint32(26).string(Ot.streamKey),Ot.url!==void 0&&Ot.url!==""&&It.uint32(34).string(Ot.url),Ot.inputType!==void 0&&Ot.inputType!==0&&It.uint32(40).int32(Ot.inputType),Ot.audio!==void 0&&a.IngressAudioOptions.encode(Ot.audio,It.uint32(50).fork()).ldelim(),Ot.video!==void 0&&a.IngressVideoOptions.encode(Ot.video,It.uint32(58).fork()).ldelim(),Ot.roomName!==void 0&&Ot.roomName!==""&&It.uint32(66).string(Ot.roomName),Ot.participantIdentity!==void 0&&Ot.participantIdentity!==""&&It.uint32(74).string(Ot.participantIdentity),Ot.participantName!==void 0&&Ot.participantName!==""&&It.uint32(82).string(Ot.participantName),Ot.reusable===!0&&It.uint32(88).bool(Ot.reusable),Ot.state!==void 0&&a.IngressState.encode(Ot.state,It.uint32(98).fork()).ldelim(),It},decode(Ot,It){const ut=Ot instanceof _.default.Reader?Ot:new _.default.Reader(Ot);let _e=It===void 0?ut.len:ut.pos+It;const tt=Tt();for(;ut.pos<_e;){const it=ut.uint32();switch(it>>>3){case 1:tt.ingressId=ut.string();break;case 2:tt.name=ut.string();break;case 3:tt.streamKey=ut.string();break;case 4:tt.url=ut.string();break;case 5:tt.inputType=ut.int32();break;case 6:tt.audio=a.IngressAudioOptions.decode(ut,ut.uint32());break;case 7:tt.video=a.IngressVideoOptions.decode(ut,ut.uint32());break;case 8:tt.roomName=ut.string();break;case 9:tt.participantIdentity=ut.string();break;case 10:tt.participantName=ut.string();break;case 11:tt.reusable=ut.bool();break;case 12:tt.state=a.IngressState.decode(ut,ut.uint32());break;default:ut.skipType(it&7);break}}return tt},fromJSON(Ot){return{ingressId:ur(Ot.ingressId)?String(Ot.ingressId):"",name:ur(Ot.name)?String(Ot.name):"",streamKey:ur(Ot.streamKey)?String(Ot.streamKey):"",url:ur(Ot.url)?String(Ot.url):"",inputType:ur(Ot.inputType)?et(Ot.inputType):0,audio:ur(Ot.audio)?a.IngressAudioOptions.fromJSON(Ot.audio):void 0,video:ur(Ot.video)?a.IngressVideoOptions.fromJSON(Ot.video):void 0,roomName:ur(Ot.roomName)?String(Ot.roomName):"",participantIdentity:ur(Ot.participantIdentity)?String(Ot.participantIdentity):"",participantName:ur(Ot.participantName)?String(Ot.participantName):"",reusable:ur(Ot.reusable)?!!Ot.reusable:!1,state:ur(Ot.state)?a.IngressState.fromJSON(Ot.state):void 0}},toJSON(Ot){const It={};return Ot.ingressId!==void 0&&(It.ingressId=Ot.ingressId),Ot.name!==void 0&&(It.name=Ot.name),Ot.streamKey!==void 0&&(It.streamKey=Ot.streamKey),Ot.url!==void 0&&(It.url=Ot.url),Ot.inputType!==void 0&&(It.inputType=nt(Ot.inputType)),Ot.audio!==void 0&&(It.audio=Ot.audio?a.IngressAudioOptions.toJSON(Ot.audio):void 0),Ot.video!==void 0&&(It.video=Ot.video?a.IngressVideoOptions.toJSON(Ot.video):void 0),Ot.roomName!==void 0&&(It.roomName=Ot.roomName),Ot.participantIdentity!==void 0&&(It.participantIdentity=Ot.participantIdentity),Ot.participantName!==void 0&&(It.participantName=Ot.participantName),Ot.reusable!==void 0&&(It.reusable=Ot.reusable),Ot.state!==void 0&&(It.state=Ot.state?a.IngressState.toJSON(Ot.state):void 0),It},fromPartial(Ot){var It,ut,_e,tt,it,dt,lt,gt,Et;const pt=Tt();return pt.ingressId=(It=Ot.ingressId)!==null&&It!==void 0?It:"",pt.name=(ut=Ot.name)!==null&&ut!==void 0?ut:"",pt.streamKey=(_e=Ot.streamKey)!==null&&_e!==void 0?_e:"",pt.url=(tt=Ot.url)!==null&&tt!==void 0?tt:"",pt.inputType=(it=Ot.inputType)!==null&&it!==void 0?it:0,pt.audio=Ot.audio!==void 0&&Ot.audio!==null?a.IngressAudioOptions.fromPartial(Ot.audio):void 0,pt.video=Ot.video!==void 0&&Ot.video!==null?a.IngressVideoOptions.fromPartial(Ot.video):void 0,pt.roomName=(dt=Ot.roomName)!==null&&dt!==void 0?dt:"",pt.participantIdentity=(lt=Ot.participantIdentity)!==null&&lt!==void 0?lt:"",pt.participantName=(gt=Ot.participantName)!==null&&gt!==void 0?gt:"",pt.reusable=(Et=Ot.reusable)!==null&&Et!==void 0?Et:!1,pt.state=Ot.state!==void 0&&Ot.state!==null?a.IngressState.fromPartial(Ot.state):void 0,pt}};function At(){return{status:0,error:"",video:void 0,audio:void 0,roomId:"",startedAt:0,tracks:[]}}a.IngressState={encode(Ot,It=_.default.Writer.create()){if(Ot.status!==void 0&&Ot.status!==0&&It.uint32(8).int32(Ot.status),Ot.error!==void 0&&Ot.error!==""&&It.uint32(18).string(Ot.error),Ot.video!==void 0&&a.InputVideoState.encode(Ot.video,It.uint32(26).fork()).ldelim(),Ot.audio!==void 0&&a.InputAudioState.encode(Ot.audio,It.uint32(34).fork()).ldelim(),Ot.roomId!==void 0&&Ot.roomId!==""&&It.uint32(42).string(Ot.roomId),Ot.startedAt!==void 0&&Ot.startedAt!==0&&It.uint32(56).int64(Ot.startedAt),Ot.tracks!==void 0&&Ot.tracks.length!==0)for(const ut of Ot.tracks)$.TrackInfo.encode(ut,It.uint32(50).fork()).ldelim();return It},decode(Ot,It){const ut=Ot instanceof _.default.Reader?Ot:new _.default.Reader(Ot);let _e=It===void 0?ut.len:ut.pos+It;const tt=At();for(;ut.pos<_e;){const it=ut.uint32();switch(it>>>3){case 1:tt.status=ut.int32();break;case 2:tt.error=ut.string();break;case 3:tt.video=a.InputVideoState.decode(ut,ut.uint32());break;case 4:tt.audio=a.InputAudioState.decode(ut,ut.uint32());break;case 5:tt.roomId=ut.string();break;case 7:tt.startedAt=pr(ut.int64());break;case 6:tt.tracks.push($.TrackInfo.decode(ut,ut.uint32()));break;default:ut.skipType(it&7);break}}return tt},fromJSON(Ot){return{status:ur(Ot.status)?ht(Ot.status):0,error:ur(Ot.error)?String(Ot.error):"",video:ur(Ot.video)?a.InputVideoState.fromJSON(Ot.video):void 0,audio:ur(Ot.audio)?a.InputAudioState.fromJSON(Ot.audio):void 0,roomId:ur(Ot.roomId)?String(Ot.roomId):"",startedAt:ur(Ot.startedAt)?Number(Ot.startedAt):0,tracks:Array.isArray(Ot==null?void 0:Ot.tracks)?Ot.tracks.map(It=>$.TrackInfo.fromJSON(It)):[]}},toJSON(Ot){const It={};return Ot.status!==void 0&&(It.status=vt(Ot.status)),Ot.error!==void 0&&(It.error=Ot.error),Ot.video!==void 0&&(It.video=Ot.video?a.InputVideoState.toJSON(Ot.video):void 0),Ot.audio!==void 0&&(It.audio=Ot.audio?a.InputAudioState.toJSON(Ot.audio):void 0),Ot.roomId!==void 0&&(It.roomId=Ot.roomId),Ot.startedAt!==void 0&&(It.startedAt=Math.round(Ot.startedAt)),Ot.tracks?It.tracks=Ot.tracks.map(ut=>ut?$.TrackInfo.toJSON(ut):void 0):It.tracks=[],It},fromPartial(Ot){var It,ut,_e,tt,it;const dt=At();return dt.status=(It=Ot.status)!==null&&It!==void 0?It:0,dt.error=(ut=Ot.error)!==null&&ut!==void 0?ut:"",dt.video=Ot.video!==void 0&&Ot.video!==null?a.InputVideoState.fromPartial(Ot.video):void 0,dt.audio=Ot.audio!==void 0&&Ot.audio!==null?a.InputAudioState.fromPartial(Ot.audio):void 0,dt.roomId=(_e=Ot.roomId)!==null&&_e!==void 0?_e:"",dt.startedAt=(tt=Ot.startedAt)!==null&&tt!==void 0?tt:0,dt.tracks=((it=Ot.tracks)===null||it===void 0?void 0:it.map(lt=>$.TrackInfo.fromPartial(lt)))||[],dt}};function Mt(){return{mimeType:0,width:0,height:0,framerate:0}}a.InputVideoState={encode(Ot,It=_.default.Writer.create()){return Ot.mimeType!==void 0&&Ot.mimeType!==0&&It.uint32(8).uint32(Ot.mimeType),Ot.width!==void 0&&Ot.width!==0&&It.uint32(24).uint32(Ot.width),Ot.height!==void 0&&Ot.height!==0&&It.uint32(32).uint32(Ot.height),Ot.framerate!==void 0&&Ot.framerate!==0&&It.uint32(40).uint32(Ot.framerate),It},decode(Ot,It){const ut=Ot instanceof _.default.Reader?Ot:new _.default.Reader(Ot);let _e=It===void 0?ut.len:ut.pos+It;const tt=Mt();for(;ut.pos<_e;){const it=ut.uint32();switch(it>>>3){case 1:tt.mimeType=ut.uint32();break;case 3:tt.width=ut.uint32();break;case 4:tt.height=ut.uint32();break;case 5:tt.framerate=ut.uint32();break;default:ut.skipType(it&7);break}}return tt},fromJSON(Ot){return{mimeType:ur(Ot.mimeType)?Number(Ot.mimeType):0,width:ur(Ot.width)?Number(Ot.width):0,height:ur(Ot.height)?Number(Ot.height):0,framerate:ur(Ot.framerate)?Number(Ot.framerate):0}},toJSON(Ot){const It={};return Ot.mimeType!==void 0&&(It.mimeType=Math.round(Ot.mimeType)),Ot.width!==void 0&&(It.width=Math.round(Ot.width)),Ot.height!==void 0&&(It.height=Math.round(Ot.height)),Ot.framerate!==void 0&&(It.framerate=Math.round(Ot.framerate)),It},fromPartial(Ot){var It,ut,_e,tt;const it=Mt();return it.mimeType=(It=Ot.mimeType)!==null&&It!==void 0?It:0,it.width=(ut=Ot.width)!==null&&ut!==void 0?ut:0,it.height=(_e=Ot.height)!==null&&_e!==void 0?_e:0,it.framerate=(tt=Ot.framerate)!==null&&tt!==void 0?tt:0,it}};function Dt(){return{mimeType:0,channels:0,sampleRate:0}}a.InputAudioState={encode(Ot,It=_.default.Writer.create()){return Ot.mimeType!==void 0&&Ot.mimeType!==0&&It.uint32(8).uint32(Ot.mimeType),Ot.channels!==void 0&&Ot.channels!==0&&It.uint32(24).uint32(Ot.channels),Ot.sampleRate!==void 0&&Ot.sampleRate!==0&&It.uint32(32).uint32(Ot.sampleRate),It},decode(Ot,It){const ut=Ot instanceof _.default.Reader?Ot:new _.default.Reader(Ot);let _e=It===void 0?ut.len:ut.pos+It;const tt=Dt();for(;ut.pos<_e;){const it=ut.uint32();switch(it>>>3){case 1:tt.mimeType=ut.uint32();break;case 3:tt.channels=ut.uint32();break;case 4:tt.sampleRate=ut.uint32();break;default:ut.skipType(it&7);break}}return tt},fromJSON(Ot){return{mimeType:ur(Ot.mimeType)?Number(Ot.mimeType):0,channels:ur(Ot.channels)?Number(Ot.channels):0,sampleRate:ur(Ot.sampleRate)?Number(Ot.sampleRate):0}},toJSON(Ot){const It={};return Ot.mimeType!==void 0&&(It.mimeType=Math.round(Ot.mimeType)),Ot.channels!==void 0&&(It.channels=Math.round(Ot.channels)),Ot.sampleRate!==void 0&&(It.sampleRate=Math.round(Ot.sampleRate)),It},fromPartial(Ot){var It,ut,_e;const tt=Dt();return tt.mimeType=(It=Ot.mimeType)!==null&&It!==void 0?It:0,tt.channels=(ut=Ot.channels)!==null&&ut!==void 0?ut:0,tt.sampleRate=(_e=Ot.sampleRate)!==null&&_e!==void 0?_e:0,tt}};function Rt(){return{ingressId:"",name:"",roomName:"",participantIdentity:"",participantName:"",audio:void 0,video:void 0}}a.UpdateIngressRequest={encode(Ot,It=_.default.Writer.create()){return Ot.ingressId!==void 0&&Ot.ingressId!==""&&It.uint32(10).string(Ot.ingressId),Ot.name!==void 0&&Ot.name!==""&&It.uint32(18).string(Ot.name),Ot.roomName!==void 0&&Ot.roomName!==""&&It.uint32(26).string(Ot.roomName),Ot.participantIdentity!==void 0&&Ot.participantIdentity!==""&&It.uint32(34).string(Ot.participantIdentity),Ot.participantName!==void 0&&Ot.participantName!==""&&It.uint32(42).string(Ot.participantName),Ot.audio!==void 0&&a.IngressAudioOptions.encode(Ot.audio,It.uint32(50).fork()).ldelim(),Ot.video!==void 0&&a.IngressVideoOptions.encode(Ot.video,It.uint32(58).fork()).ldelim(),It},decode(Ot,It){const ut=Ot instanceof _.default.Reader?Ot:new _.default.Reader(Ot);let _e=It===void 0?ut.len:ut.pos+It;const tt=Rt();for(;ut.pos<_e;){const it=ut.uint32();switch(it>>>3){case 1:tt.ingressId=ut.string();break;case 2:tt.name=ut.string();break;case 3:tt.roomName=ut.string();break;case 4:tt.participantIdentity=ut.string();break;case 5:tt.participantName=ut.string();break;case 6:tt.audio=a.IngressAudioOptions.decode(ut,ut.uint32());break;case 7:tt.video=a.IngressVideoOptions.decode(ut,ut.uint32());break;default:ut.skipType(it&7);break}}return tt},fromJSON(Ot){return{ingressId:ur(Ot.ingressId)?String(Ot.ingressId):"",name:ur(Ot.name)?String(Ot.name):"",roomName:ur(Ot.roomName)?String(Ot.roomName):"",participantIdentity:ur(Ot.participantIdentity)?String(Ot.participantIdentity):"",participantName:ur(Ot.participantName)?String(Ot.participantName):"",audio:ur(Ot.audio)?a.IngressAudioOptions.fromJSON(Ot.audio):void 0,video:ur(Ot.video)?a.IngressVideoOptions.fromJSON(Ot.video):void 0}},toJSON(Ot){const It={};return Ot.ingressId!==void 0&&(It.ingressId=Ot.ingressId),Ot.name!==void 0&&(It.name=Ot.name),Ot.roomName!==void 0&&(It.roomName=Ot.roomName),Ot.participantIdentity!==void 0&&(It.participantIdentity=Ot.participantIdentity),Ot.participantName!==void 0&&(It.participantName=Ot.participantName),Ot.audio!==void 0&&(It.audio=Ot.audio?a.IngressAudioOptions.toJSON(Ot.audio):void 0),Ot.video!==void 0&&(It.video=Ot.video?a.IngressVideoOptions.toJSON(Ot.video):void 0),It},fromPartial(Ot){var It,ut,_e,tt,it;const dt=Rt();return dt.ingressId=(It=Ot.ingressId)!==null&&It!==void 0?It:"",dt.name=(ut=Ot.name)!==null&&ut!==void 0?ut:"",dt.roomName=(_e=Ot.roomName)!==null&&_e!==void 0?_e:"",dt.participantIdentity=(tt=Ot.participantIdentity)!==null&&tt!==void 0?tt:"",dt.participantName=(it=Ot.participantName)!==null&&it!==void 0?it:"",dt.audio=Ot.audio!==void 0&&Ot.audio!==null?a.IngressAudioOptions.fromPartial(Ot.audio):void 0,dt.video=Ot.video!==void 0&&Ot.video!==null?a.IngressVideoOptions.fromPartial(Ot.video):void 0,dt}};function xt(){return{roomName:""}}a.ListIngressRequest={encode(Ot,It=_.default.Writer.create()){return Ot.roomName!==void 0&&Ot.roomName!==""&&It.uint32(10).string(Ot.roomName),It},decode(Ot,It){const ut=Ot instanceof _.default.Reader?Ot:new _.default.Reader(Ot);let _e=It===void 0?ut.len:ut.pos+It;const tt=xt();for(;ut.pos<_e;){const it=ut.uint32();switch(it>>>3){case 1:tt.roomName=ut.string();break;default:ut.skipType(it&7);break}}return tt},fromJSON(Ot){return{roomName:ur(Ot.roomName)?String(Ot.roomName):""}},toJSON(Ot){const It={};return Ot.roomName!==void 0&&(It.roomName=Ot.roomName),It},fromPartial(Ot){var It;const ut=xt();return ut.roomName=(It=Ot.roomName)!==null&&It!==void 0?It:"",ut}};function Jt(){return{items:[]}}a.ListIngressResponse={encode(Ot,It=_.default.Writer.create()){if(Ot.items!==void 0&&Ot.items.length!==0)for(const ut of Ot.items)a.IngressInfo.encode(ut,It.uint32(10).fork()).ldelim();return It},decode(Ot,It){const ut=Ot instanceof _.default.Reader?Ot:new _.default.Reader(Ot);let _e=It===void 0?ut.len:ut.pos+It;const tt=Jt();for(;ut.pos<_e;){const it=ut.uint32();switch(it>>>3){case 1:tt.items.push(a.IngressInfo.decode(ut,ut.uint32()));break;default:ut.skipType(it&7);break}}return tt},fromJSON(Ot){return{items:Array.isArray(Ot==null?void 0:Ot.items)?Ot.items.map(It=>a.IngressInfo.fromJSON(It)):[]}},toJSON(Ot){const It={};return Ot.items?It.items=Ot.items.map(ut=>ut?a.IngressInfo.toJSON(ut):void 0):It.items=[],It},fromPartial(Ot){var It;const ut=Jt();return ut.items=((It=Ot.items)===null||It===void 0?void 0:It.map(_e=>a.IngressInfo.fromPartial(_e)))||[],ut}};function ar(){return{ingressId:""}}a.DeleteIngressRequest={encode(Ot,It=_.default.Writer.create()){return Ot.ingressId!==void 0&&Ot.ingressId!==""&&It.uint32(10).string(Ot.ingressId),It},decode(Ot,It){const ut=Ot instanceof _.default.Reader?Ot:new _.default.Reader(Ot);let _e=It===void 0?ut.len:ut.pos+It;const tt=ar();for(;ut.pos<_e;){const it=ut.uint32();switch(it>>>3){case 1:tt.ingressId=ut.string();break;default:ut.skipType(it&7);break}}return tt},fromJSON(Ot){return{ingressId:ur(Ot.ingressId)?String(Ot.ingressId):""}},toJSON(Ot){const It={};return Ot.ingressId!==void 0&&(It.ingressId=Ot.ingressId),It},fromPartial(Ot){var It;const ut=ar();return ut.ingressId=(It=Ot.ingressId)!==null&&It!==void 0?It:"",ut}};var nr=(()=>{if(typeof nr<"u")return nr;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof commonjsGlobal$1<"u")return commonjsGlobal$1;throw"Unable to locate global object"})();function pr(Ot){if(Ot.gt(Number.MAX_SAFE_INTEGER))throw new nr.Error("Value is larger than Number.MAX_SAFE_INTEGER");return Ot.toNumber()}_.default.util.Long!==b.default&&(_.default.util.Long=b.default,_.default.configure());function ur(Ot){return Ot!=null}})(livekit_ingress);var __awaiter$1=commonjsGlobal$1&&commonjsGlobal$1.__awaiter||function(a,c,b,_){function $(k){return k instanceof b?k:new b(function(et){et(k)})}return new(b||(b=Promise))(function(k,et){function nt(vt){try{ht(_.next(vt))}catch(_t){et(_t)}}function ot(vt){try{ht(_.throw(vt))}catch(_t){et(_t)}}function ht(vt){vt.done?k(vt.value):$(vt.value).then(nt,ot)}ht((_=_.apply(a,c||[])).next())})},__importDefault$3=commonjsGlobal$1&&commonjsGlobal$1.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(IngressClient$1,"__esModule",{value:!0});IngressClient$1.IngressClient=void 0;const livekit_ingress_1$1=livekit_ingress,ServiceBase_1$1=__importDefault$3(ServiceBase$1),TwirpRPC_1$1=TwirpRPC,svc$1="Ingress";class IngressClient extends ServiceBase_1$1.default{constructor(c,b,_){super(b,_),this.rpc=new TwirpRPC_1$1.TwirpRpc(c,TwirpRPC_1$1.livekitPackage)}createIngress(c,b){return __awaiter$1(this,void 0,void 0,function*(){let _="",$="",k="",et="",nt,ot;b!==void 0&&(_=b.name||"",$=b.roomName||"",k=b.participantName||"",et=b.participantIdentity||"",nt=b.audioParams,ot=b.videoParams);const ht=livekit_ingress_1$1.CreateIngressRequest.toJSON({inputType:c,name:_,roomName:$,participantIdentity:et,participantName:k,audio:nt,video:ot}),vt=yield this.rpc.request(svc$1,"CreateIngress",ht,this.authHeader({ingressAdmin:!0}));return livekit_ingress_1$1.IngressInfo.fromJSON(vt)})}updateIngress(c,b){return __awaiter$1(this,void 0,void 0,function*(){const _=b.name||"",$=b.roomName||"",k=b.participantName||"",et=b.participantIdentity||"",nt=b.audioParams,ot=b.videoParams,ht=livekit_ingress_1$1.UpdateIngressRequest.toJSON({ingressId:c,name:_,roomName:$,participantIdentity:et,participantName:k,audio:nt,video:ot}),vt=yield this.rpc.request(svc$1,"UpdateIngress",ht,this.authHeader({ingressAdmin:!0}));return livekit_ingress_1$1.IngressInfo.fromJSON(vt)})}listIngress(c){var b;return __awaiter$1(this,void 0,void 0,function*(){c??(c="");const _=yield this.rpc.request(svc$1,"ListIngress",livekit_ingress_1$1.ListIngressRequest.toJSON({roomName:c}),this.authHeader({ingressAdmin:!0}));return(b=livekit_ingress_1$1.ListIngressResponse.fromJSON(_).items)!==null&&b!==void 0?b:[]})}deleteIngress(c){return __awaiter$1(this,void 0,void 0,function*(){const b=yield this.rpc.request(svc$1,"DeleteIngress",livekit_ingress_1$1.DeleteIngressRequest.toJSON({ingressId:c}),this.authHeader({ingressAdmin:!0}));return livekit_ingress_1$1.IngressInfo.fromJSON(b)})}}IngressClient$1.IngressClient=IngressClient;var RoomServiceClient$1={},livekit_room={};(function(a){var c=commonjsGlobal$1&&commonjsGlobal$1.__importDefault||function(ut){return ut&&ut.__esModule?ut:{default:ut}};Object.defineProperty(a,"__esModule",{value:!0}),a.UpdateRoomMetadataRequest=a.SendDataResponse=a.SendDataRequest=a.UpdateSubscriptionsResponse=a.UpdateSubscriptionsRequest=a.UpdateParticipantRequest=a.MuteRoomTrackResponse=a.MuteRoomTrackRequest=a.RemoveParticipantResponse=a.RoomParticipantIdentity=a.ListParticipantsResponse=a.ListParticipantsRequest=a.DeleteRoomResponse=a.DeleteRoomRequest=a.ListRoomsResponse=a.ListRoomsRequest=a.RoomEgress=a.CreateRoomRequest=a.protobufPackage=void 0;const b=c(minimal),_=livekit_egress,$=livekit_models;a.protobufPackage="livekit";function k(){return{name:"",emptyTimeout:0,maxParticipants:0,nodeId:"",metadata:"",egress:void 0}}a.CreateRoomRequest={encode(ut,_e=b.default.Writer.create()){return ut.name!==void 0&&ut.name!==""&&_e.uint32(10).string(ut.name),ut.emptyTimeout!==void 0&&ut.emptyTimeout!==0&&_e.uint32(16).uint32(ut.emptyTimeout),ut.maxParticipants!==void 0&&ut.maxParticipants!==0&&_e.uint32(24).uint32(ut.maxParticipants),ut.nodeId!==void 0&&ut.nodeId!==""&&_e.uint32(34).string(ut.nodeId),ut.metadata!==void 0&&ut.metadata!==""&&_e.uint32(42).string(ut.metadata),ut.egress!==void 0&&a.RoomEgress.encode(ut.egress,_e.uint32(50).fork()).ldelim(),_e},decode(ut,_e){const tt=ut instanceof b.default.Reader?ut:new b.default.Reader(ut);let it=_e===void 0?tt.len:tt.pos+_e;const dt=k();for(;tt.pos<it;){const lt=tt.uint32();switch(lt>>>3){case 1:dt.name=tt.string();break;case 2:dt.emptyTimeout=tt.uint32();break;case 3:dt.maxParticipants=tt.uint32();break;case 4:dt.nodeId=tt.string();break;case 5:dt.metadata=tt.string();break;case 6:dt.egress=a.RoomEgress.decode(tt,tt.uint32());break;default:tt.skipType(lt&7);break}}return dt},fromJSON(ut){return{name:It(ut.name)?String(ut.name):"",emptyTimeout:It(ut.emptyTimeout)?Number(ut.emptyTimeout):0,maxParticipants:It(ut.maxParticipants)?Number(ut.maxParticipants):0,nodeId:It(ut.nodeId)?String(ut.nodeId):"",metadata:It(ut.metadata)?String(ut.metadata):"",egress:It(ut.egress)?a.RoomEgress.fromJSON(ut.egress):void 0}},toJSON(ut){const _e={};return ut.name!==void 0&&(_e.name=ut.name),ut.emptyTimeout!==void 0&&(_e.emptyTimeout=Math.round(ut.emptyTimeout)),ut.maxParticipants!==void 0&&(_e.maxParticipants=Math.round(ut.maxParticipants)),ut.nodeId!==void 0&&(_e.nodeId=ut.nodeId),ut.metadata!==void 0&&(_e.metadata=ut.metadata),ut.egress!==void 0&&(_e.egress=ut.egress?a.RoomEgress.toJSON(ut.egress):void 0),_e},fromPartial(ut){var _e,tt,it,dt,lt;const gt=k();return gt.name=(_e=ut.name)!==null&&_e!==void 0?_e:"",gt.emptyTimeout=(tt=ut.emptyTimeout)!==null&&tt!==void 0?tt:0,gt.maxParticipants=(it=ut.maxParticipants)!==null&&it!==void 0?it:0,gt.nodeId=(dt=ut.nodeId)!==null&&dt!==void 0?dt:"",gt.metadata=(lt=ut.metadata)!==null&&lt!==void 0?lt:"",gt.egress=ut.egress!==void 0&&ut.egress!==null?a.RoomEgress.fromPartial(ut.egress):void 0,gt}};function et(){return{room:void 0,tracks:void 0}}a.RoomEgress={encode(ut,_e=b.default.Writer.create()){return ut.room!==void 0&&_.RoomCompositeEgressRequest.encode(ut.room,_e.uint32(10).fork()).ldelim(),ut.tracks!==void 0&&_.AutoTrackEgress.encode(ut.tracks,_e.uint32(18).fork()).ldelim(),_e},decode(ut,_e){const tt=ut instanceof b.default.Reader?ut:new b.default.Reader(ut);let it=_e===void 0?tt.len:tt.pos+_e;const dt=et();for(;tt.pos<it;){const lt=tt.uint32();switch(lt>>>3){case 1:dt.room=_.RoomCompositeEgressRequest.decode(tt,tt.uint32());break;case 2:dt.tracks=_.AutoTrackEgress.decode(tt,tt.uint32());break;default:tt.skipType(lt&7);break}}return dt},fromJSON(ut){return{room:It(ut.room)?_.RoomCompositeEgressRequest.fromJSON(ut.room):void 0,tracks:It(ut.tracks)?_.AutoTrackEgress.fromJSON(ut.tracks):void 0}},toJSON(ut){const _e={};return ut.room!==void 0&&(_e.room=ut.room?_.RoomCompositeEgressRequest.toJSON(ut.room):void 0),ut.tracks!==void 0&&(_e.tracks=ut.tracks?_.AutoTrackEgress.toJSON(ut.tracks):void 0),_e},fromPartial(ut){const _e=et();return _e.room=ut.room!==void 0&&ut.room!==null?_.RoomCompositeEgressRequest.fromPartial(ut.room):void 0,_e.tracks=ut.tracks!==void 0&&ut.tracks!==null?_.AutoTrackEgress.fromPartial(ut.tracks):void 0,_e}};function nt(){return{names:[]}}a.ListRoomsRequest={encode(ut,_e=b.default.Writer.create()){if(ut.names!==void 0&&ut.names.length!==0)for(const tt of ut.names)_e.uint32(10).string(tt);return _e},decode(ut,_e){const tt=ut instanceof b.default.Reader?ut:new b.default.Reader(ut);let it=_e===void 0?tt.len:tt.pos+_e;const dt=nt();for(;tt.pos<it;){const lt=tt.uint32();switch(lt>>>3){case 1:dt.names.push(tt.string());break;default:tt.skipType(lt&7);break}}return dt},fromJSON(ut){return{names:Array.isArray(ut==null?void 0:ut.names)?ut.names.map(_e=>String(_e)):[]}},toJSON(ut){const _e={};return ut.names?_e.names=ut.names.map(tt=>tt):_e.names=[],_e},fromPartial(ut){var _e;const tt=nt();return tt.names=((_e=ut.names)===null||_e===void 0?void 0:_e.map(it=>it))||[],tt}};function ot(){return{rooms:[]}}a.ListRoomsResponse={encode(ut,_e=b.default.Writer.create()){if(ut.rooms!==void 0&&ut.rooms.length!==0)for(const tt of ut.rooms)$.Room.encode(tt,_e.uint32(10).fork()).ldelim();return _e},decode(ut,_e){const tt=ut instanceof b.default.Reader?ut:new b.default.Reader(ut);let it=_e===void 0?tt.len:tt.pos+_e;const dt=ot();for(;tt.pos<it;){const lt=tt.uint32();switch(lt>>>3){case 1:dt.rooms.push($.Room.decode(tt,tt.uint32()));break;default:tt.skipType(lt&7);break}}return dt},fromJSON(ut){return{rooms:Array.isArray(ut==null?void 0:ut.rooms)?ut.rooms.map(_e=>$.Room.fromJSON(_e)):[]}},toJSON(ut){const _e={};return ut.rooms?_e.rooms=ut.rooms.map(tt=>tt?$.Room.toJSON(tt):void 0):_e.rooms=[],_e},fromPartial(ut){var _e;const tt=ot();return tt.rooms=((_e=ut.rooms)===null||_e===void 0?void 0:_e.map(it=>$.Room.fromPartial(it)))||[],tt}};function ht(){return{room:""}}a.DeleteRoomRequest={encode(ut,_e=b.default.Writer.create()){return ut.room!==void 0&&ut.room!==""&&_e.uint32(10).string(ut.room),_e},decode(ut,_e){const tt=ut instanceof b.default.Reader?ut:new b.default.Reader(ut);let it=_e===void 0?tt.len:tt.pos+_e;const dt=ht();for(;tt.pos<it;){const lt=tt.uint32();switch(lt>>>3){case 1:dt.room=tt.string();break;default:tt.skipType(lt&7);break}}return dt},fromJSON(ut){return{room:It(ut.room)?String(ut.room):""}},toJSON(ut){const _e={};return ut.room!==void 0&&(_e.room=ut.room),_e},fromPartial(ut){var _e;const tt=ht();return tt.room=(_e=ut.room)!==null&&_e!==void 0?_e:"",tt}};function vt(){return{}}a.DeleteRoomResponse={encode(ut,_e=b.default.Writer.create()){return _e},decode(ut,_e){const tt=ut instanceof b.default.Reader?ut:new b.default.Reader(ut);let it=_e===void 0?tt.len:tt.pos+_e;const dt=vt();for(;tt.pos<it;){const lt=tt.uint32();switch(lt>>>3){default:tt.skipType(lt&7);break}}return dt},fromJSON(ut){return{}},toJSON(ut){return{}},fromPartial(ut){return vt()}};function _t(){return{room:""}}a.ListParticipantsRequest={encode(ut,_e=b.default.Writer.create()){return ut.room!==void 0&&ut.room!==""&&_e.uint32(10).string(ut.room),_e},decode(ut,_e){const tt=ut instanceof b.default.Reader?ut:new b.default.Reader(ut);let it=_e===void 0?tt.len:tt.pos+_e;const dt=_t();for(;tt.pos<it;){const lt=tt.uint32();switch(lt>>>3){case 1:dt.room=tt.string();break;default:tt.skipType(lt&7);break}}return dt},fromJSON(ut){return{room:It(ut.room)?String(ut.room):""}},toJSON(ut){const _e={};return ut.room!==void 0&&(_e.room=ut.room),_e},fromPartial(ut){var _e;const tt=_t();return tt.room=(_e=ut.room)!==null&&_e!==void 0?_e:"",tt}};function kt(){return{participants:[]}}a.ListParticipantsResponse={encode(ut,_e=b.default.Writer.create()){if(ut.participants!==void 0&&ut.participants.length!==0)for(const tt of ut.participants)$.ParticipantInfo.encode(tt,_e.uint32(10).fork()).ldelim();return _e},decode(ut,_e){const tt=ut instanceof b.default.Reader?ut:new b.default.Reader(ut);let it=_e===void 0?tt.len:tt.pos+_e;const dt=kt();for(;tt.pos<it;){const lt=tt.uint32();switch(lt>>>3){case 1:dt.participants.push($.ParticipantInfo.decode(tt,tt.uint32()));break;default:tt.skipType(lt&7);break}}return dt},fromJSON(ut){return{participants:Array.isArray(ut==null?void 0:ut.participants)?ut.participants.map(_e=>$.ParticipantInfo.fromJSON(_e)):[]}},toJSON(ut){const _e={};return ut.participants?_e.participants=ut.participants.map(tt=>tt?$.ParticipantInfo.toJSON(tt):void 0):_e.participants=[],_e},fromPartial(ut){var _e;const tt=kt();return tt.participants=((_e=ut.participants)===null||_e===void 0?void 0:_e.map(it=>$.ParticipantInfo.fromPartial(it)))||[],tt}};function $t(){return{room:"",identity:""}}a.RoomParticipantIdentity={encode(ut,_e=b.default.Writer.create()){return ut.room!==void 0&&ut.room!==""&&_e.uint32(10).string(ut.room),ut.identity!==void 0&&ut.identity!==""&&_e.uint32(18).string(ut.identity),_e},decode(ut,_e){const tt=ut instanceof b.default.Reader?ut:new b.default.Reader(ut);let it=_e===void 0?tt.len:tt.pos+_e;const dt=$t();for(;tt.pos<it;){const lt=tt.uint32();switch(lt>>>3){case 1:dt.room=tt.string();break;case 2:dt.identity=tt.string();break;default:tt.skipType(lt&7);break}}return dt},fromJSON(ut){return{room:It(ut.room)?String(ut.room):"",identity:It(ut.identity)?String(ut.identity):""}},toJSON(ut){const _e={};return ut.room!==void 0&&(_e.room=ut.room),ut.identity!==void 0&&(_e.identity=ut.identity),_e},fromPartial(ut){var _e,tt;const it=$t();return it.room=(_e=ut.room)!==null&&_e!==void 0?_e:"",it.identity=(tt=ut.identity)!==null&&tt!==void 0?tt:"",it}};function Tt(){return{}}a.RemoveParticipantResponse={encode(ut,_e=b.default.Writer.create()){return _e},decode(ut,_e){const tt=ut instanceof b.default.Reader?ut:new b.default.Reader(ut);let it=_e===void 0?tt.len:tt.pos+_e;const dt=Tt();for(;tt.pos<it;){const lt=tt.uint32();switch(lt>>>3){default:tt.skipType(lt&7);break}}return dt},fromJSON(ut){return{}},toJSON(ut){return{}},fromPartial(ut){return Tt()}};function At(){return{room:"",identity:"",trackSid:"",muted:!1}}a.MuteRoomTrackRequest={encode(ut,_e=b.default.Writer.create()){return ut.room!==void 0&&ut.room!==""&&_e.uint32(10).string(ut.room),ut.identity!==void 0&&ut.identity!==""&&_e.uint32(18).string(ut.identity),ut.trackSid!==void 0&&ut.trackSid!==""&&_e.uint32(26).string(ut.trackSid),ut.muted===!0&&_e.uint32(32).bool(ut.muted),_e},decode(ut,_e){const tt=ut instanceof b.default.Reader?ut:new b.default.Reader(ut);let it=_e===void 0?tt.len:tt.pos+_e;const dt=At();for(;tt.pos<it;){const lt=tt.uint32();switch(lt>>>3){case 1:dt.room=tt.string();break;case 2:dt.identity=tt.string();break;case 3:dt.trackSid=tt.string();break;case 4:dt.muted=tt.bool();break;default:tt.skipType(lt&7);break}}return dt},fromJSON(ut){return{room:It(ut.room)?String(ut.room):"",identity:It(ut.identity)?String(ut.identity):"",trackSid:It(ut.trackSid)?String(ut.trackSid):"",muted:It(ut.muted)?!!ut.muted:!1}},toJSON(ut){const _e={};return ut.room!==void 0&&(_e.room=ut.room),ut.identity!==void 0&&(_e.identity=ut.identity),ut.trackSid!==void 0&&(_e.trackSid=ut.trackSid),ut.muted!==void 0&&(_e.muted=ut.muted),_e},fromPartial(ut){var _e,tt,it,dt;const lt=At();return lt.room=(_e=ut.room)!==null&&_e!==void 0?_e:"",lt.identity=(tt=ut.identity)!==null&&tt!==void 0?tt:"",lt.trackSid=(it=ut.trackSid)!==null&&it!==void 0?it:"",lt.muted=(dt=ut.muted)!==null&&dt!==void 0?dt:!1,lt}};function Mt(){return{track:void 0}}a.MuteRoomTrackResponse={encode(ut,_e=b.default.Writer.create()){return ut.track!==void 0&&$.TrackInfo.encode(ut.track,_e.uint32(10).fork()).ldelim(),_e},decode(ut,_e){const tt=ut instanceof b.default.Reader?ut:new b.default.Reader(ut);let it=_e===void 0?tt.len:tt.pos+_e;const dt=Mt();for(;tt.pos<it;){const lt=tt.uint32();switch(lt>>>3){case 1:dt.track=$.TrackInfo.decode(tt,tt.uint32());break;default:tt.skipType(lt&7);break}}return dt},fromJSON(ut){return{track:It(ut.track)?$.TrackInfo.fromJSON(ut.track):void 0}},toJSON(ut){const _e={};return ut.track!==void 0&&(_e.track=ut.track?$.TrackInfo.toJSON(ut.track):void 0),_e},fromPartial(ut){const _e=Mt();return _e.track=ut.track!==void 0&&ut.track!==null?$.TrackInfo.fromPartial(ut.track):void 0,_e}};function Dt(){return{room:"",identity:"",metadata:"",permission:void 0,name:""}}a.UpdateParticipantRequest={encode(ut,_e=b.default.Writer.create()){return ut.room!==void 0&&ut.room!==""&&_e.uint32(10).string(ut.room),ut.identity!==void 0&&ut.identity!==""&&_e.uint32(18).string(ut.identity),ut.metadata!==void 0&&ut.metadata!==""&&_e.uint32(26).string(ut.metadata),ut.permission!==void 0&&$.ParticipantPermission.encode(ut.permission,_e.uint32(34).fork()).ldelim(),ut.name!==void 0&&ut.name!==""&&_e.uint32(42).string(ut.name),_e},decode(ut,_e){const tt=ut instanceof b.default.Reader?ut:new b.default.Reader(ut);let it=_e===void 0?tt.len:tt.pos+_e;const dt=Dt();for(;tt.pos<it;){const lt=tt.uint32();switch(lt>>>3){case 1:dt.room=tt.string();break;case 2:dt.identity=tt.string();break;case 3:dt.metadata=tt.string();break;case 4:dt.permission=$.ParticipantPermission.decode(tt,tt.uint32());break;case 5:dt.name=tt.string();break;default:tt.skipType(lt&7);break}}return dt},fromJSON(ut){return{room:It(ut.room)?String(ut.room):"",identity:It(ut.identity)?String(ut.identity):"",metadata:It(ut.metadata)?String(ut.metadata):"",permission:It(ut.permission)?$.ParticipantPermission.fromJSON(ut.permission):void 0,name:It(ut.name)?String(ut.name):""}},toJSON(ut){const _e={};return ut.room!==void 0&&(_e.room=ut.room),ut.identity!==void 0&&(_e.identity=ut.identity),ut.metadata!==void 0&&(_e.metadata=ut.metadata),ut.permission!==void 0&&(_e.permission=ut.permission?$.ParticipantPermission.toJSON(ut.permission):void 0),ut.name!==void 0&&(_e.name=ut.name),_e},fromPartial(ut){var _e,tt,it,dt;const lt=Dt();return lt.room=(_e=ut.room)!==null&&_e!==void 0?_e:"",lt.identity=(tt=ut.identity)!==null&&tt!==void 0?tt:"",lt.metadata=(it=ut.metadata)!==null&&it!==void 0?it:"",lt.permission=ut.permission!==void 0&&ut.permission!==null?$.ParticipantPermission.fromPartial(ut.permission):void 0,lt.name=(dt=ut.name)!==null&&dt!==void 0?dt:"",lt}};function Rt(){return{room:"",identity:"",trackSids:[],subscribe:!1,participantTracks:[]}}a.UpdateSubscriptionsRequest={encode(ut,_e=b.default.Writer.create()){if(ut.room!==void 0&&ut.room!==""&&_e.uint32(10).string(ut.room),ut.identity!==void 0&&ut.identity!==""&&_e.uint32(18).string(ut.identity),ut.trackSids!==void 0&&ut.trackSids.length!==0)for(const tt of ut.trackSids)_e.uint32(26).string(tt);if(ut.subscribe===!0&&_e.uint32(32).bool(ut.subscribe),ut.participantTracks!==void 0&&ut.participantTracks.length!==0)for(const tt of ut.participantTracks)$.ParticipantTracks.encode(tt,_e.uint32(42).fork()).ldelim();return _e},decode(ut,_e){const tt=ut instanceof b.default.Reader?ut:new b.default.Reader(ut);let it=_e===void 0?tt.len:tt.pos+_e;const dt=Rt();for(;tt.pos<it;){const lt=tt.uint32();switch(lt>>>3){case 1:dt.room=tt.string();break;case 2:dt.identity=tt.string();break;case 3:dt.trackSids.push(tt.string());break;case 4:dt.subscribe=tt.bool();break;case 5:dt.participantTracks.push($.ParticipantTracks.decode(tt,tt.uint32()));break;default:tt.skipType(lt&7);break}}return dt},fromJSON(ut){return{room:It(ut.room)?String(ut.room):"",identity:It(ut.identity)?String(ut.identity):"",trackSids:Array.isArray(ut==null?void 0:ut.trackSids)?ut.trackSids.map(_e=>String(_e)):[],subscribe:It(ut.subscribe)?!!ut.subscribe:!1,participantTracks:Array.isArray(ut==null?void 0:ut.participantTracks)?ut.participantTracks.map(_e=>$.ParticipantTracks.fromJSON(_e)):[]}},toJSON(ut){const _e={};return ut.room!==void 0&&(_e.room=ut.room),ut.identity!==void 0&&(_e.identity=ut.identity),ut.trackSids?_e.trackSids=ut.trackSids.map(tt=>tt):_e.trackSids=[],ut.subscribe!==void 0&&(_e.subscribe=ut.subscribe),ut.participantTracks?_e.participantTracks=ut.participantTracks.map(tt=>tt?$.ParticipantTracks.toJSON(tt):void 0):_e.participantTracks=[],_e},fromPartial(ut){var _e,tt,it,dt,lt;const gt=Rt();return gt.room=(_e=ut.room)!==null&&_e!==void 0?_e:"",gt.identity=(tt=ut.identity)!==null&&tt!==void 0?tt:"",gt.trackSids=((it=ut.trackSids)===null||it===void 0?void 0:it.map(Et=>Et))||[],gt.subscribe=(dt=ut.subscribe)!==null&&dt!==void 0?dt:!1,gt.participantTracks=((lt=ut.participantTracks)===null||lt===void 0?void 0:lt.map(Et=>$.ParticipantTracks.fromPartial(Et)))||[],gt}};function xt(){return{}}a.UpdateSubscriptionsResponse={encode(ut,_e=b.default.Writer.create()){return _e},decode(ut,_e){const tt=ut instanceof b.default.Reader?ut:new b.default.Reader(ut);let it=_e===void 0?tt.len:tt.pos+_e;const dt=xt();for(;tt.pos<it;){const lt=tt.uint32();switch(lt>>>3){default:tt.skipType(lt&7);break}}return dt},fromJSON(ut){return{}},toJSON(ut){return{}},fromPartial(ut){return xt()}};function Jt(){return{room:"",data:new Uint8Array,kind:0,destinationSids:[]}}a.SendDataRequest={encode(ut,_e=b.default.Writer.create()){if(ut.room!==void 0&&ut.room!==""&&_e.uint32(10).string(ut.room),ut.data!==void 0&&ut.data.length!==0&&_e.uint32(18).bytes(ut.data),ut.kind!==void 0&&ut.kind!==0&&_e.uint32(24).int32(ut.kind),ut.destinationSids!==void 0&&ut.destinationSids.length!==0)for(const tt of ut.destinationSids)_e.uint32(34).string(tt);return _e},decode(ut,_e){const tt=ut instanceof b.default.Reader?ut:new b.default.Reader(ut);let it=_e===void 0?tt.len:tt.pos+_e;const dt=Jt();for(;tt.pos<it;){const lt=tt.uint32();switch(lt>>>3){case 1:dt.room=tt.string();break;case 2:dt.data=tt.bytes();break;case 3:dt.kind=tt.int32();break;case 4:dt.destinationSids.push(tt.string());break;default:tt.skipType(lt&7);break}}return dt},fromJSON(ut){return{room:It(ut.room)?String(ut.room):"",data:It(ut.data)?ur(ut.data):new Uint8Array,kind:It(ut.kind)?$.dataPacket_KindFromJSON(ut.kind):0,destinationSids:Array.isArray(ut==null?void 0:ut.destinationSids)?ut.destinationSids.map(_e=>String(_e)):[]}},toJSON(ut){const _e={};return ut.room!==void 0&&(_e.room=ut.room),ut.data!==void 0&&(_e.data=Ot(ut.data!==void 0?ut.data:new Uint8Array)),ut.kind!==void 0&&(_e.kind=$.dataPacket_KindToJSON(ut.kind)),ut.destinationSids?_e.destinationSids=ut.destinationSids.map(tt=>tt):_e.destinationSids=[],_e},fromPartial(ut){var _e,tt,it,dt;const lt=Jt();return lt.room=(_e=ut.room)!==null&&_e!==void 0?_e:"",lt.data=(tt=ut.data)!==null&&tt!==void 0?tt:new Uint8Array,lt.kind=(it=ut.kind)!==null&&it!==void 0?it:0,lt.destinationSids=((dt=ut.destinationSids)===null||dt===void 0?void 0:dt.map(gt=>gt))||[],lt}};function ar(){return{}}a.SendDataResponse={encode(ut,_e=b.default.Writer.create()){return _e},decode(ut,_e){const tt=ut instanceof b.default.Reader?ut:new b.default.Reader(ut);let it=_e===void 0?tt.len:tt.pos+_e;const dt=ar();for(;tt.pos<it;){const lt=tt.uint32();switch(lt>>>3){default:tt.skipType(lt&7);break}}return dt},fromJSON(ut){return{}},toJSON(ut){return{}},fromPartial(ut){return ar()}};function nr(){return{room:"",metadata:""}}a.UpdateRoomMetadataRequest={encode(ut,_e=b.default.Writer.create()){return ut.room!==void 0&&ut.room!==""&&_e.uint32(10).string(ut.room),ut.metadata!==void 0&&ut.metadata!==""&&_e.uint32(18).string(ut.metadata),_e},decode(ut,_e){const tt=ut instanceof b.default.Reader?ut:new b.default.Reader(ut);let it=_e===void 0?tt.len:tt.pos+_e;const dt=nr();for(;tt.pos<it;){const lt=tt.uint32();switch(lt>>>3){case 1:dt.room=tt.string();break;case 2:dt.metadata=tt.string();break;default:tt.skipType(lt&7);break}}return dt},fromJSON(ut){return{room:It(ut.room)?String(ut.room):"",metadata:It(ut.metadata)?String(ut.metadata):""}},toJSON(ut){const _e={};return ut.room!==void 0&&(_e.room=ut.room),ut.metadata!==void 0&&(_e.metadata=ut.metadata),_e},fromPartial(ut){var _e,tt;const it=nr();return it.room=(_e=ut.room)!==null&&_e!==void 0?_e:"",it.metadata=(tt=ut.metadata)!==null&&tt!==void 0?tt:"",it}};var pr=(()=>{if(typeof pr<"u")return pr;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof commonjsGlobal$1<"u")return commonjsGlobal$1;throw"Unable to locate global object"})();function ur(ut){if(pr.Buffer)return Uint8Array.from(pr.Buffer.from(ut,"base64"));{const _e=pr.atob(ut),tt=new Uint8Array(_e.length);for(let it=0;it<_e.length;++it)tt[it]=_e.charCodeAt(it);return tt}}function Ot(ut){if(pr.Buffer)return pr.Buffer.from(ut).toString("base64");{const _e=[];return ut.forEach(tt=>{_e.push(String.fromCharCode(tt))}),pr.btoa(_e.join(""))}}function It(ut){return ut!=null}})(livekit_room);var __awaiter=commonjsGlobal$1&&commonjsGlobal$1.__awaiter||function(a,c,b,_){function $(k){return k instanceof b?k:new b(function(et){et(k)})}return new(b||(b=Promise))(function(k,et){function nt(vt){try{ht(_.next(vt))}catch(_t){et(_t)}}function ot(vt){try{ht(_.throw(vt))}catch(_t){et(_t)}}function ht(vt){vt.done?k(vt.value):$(vt.value).then(nt,ot)}ht((_=_.apply(a,c||[])).next())})},__importDefault$2=commonjsGlobal$1&&commonjsGlobal$1.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(RoomServiceClient$1,"__esModule",{value:!0});RoomServiceClient$1.RoomServiceClient=void 0;const livekit_models_1$1=livekit_models,livekit_room_1=livekit_room,ServiceBase_1=__importDefault$2(ServiceBase$1),TwirpRPC_1=TwirpRPC,svc="RoomService";class RoomServiceClient extends ServiceBase_1.default{constructor(c,b,_,$,k){super(b,_),this.jwt=$,this.rpc=new TwirpRPC_1.TwirpRpc(c,TwirpRPC_1.livekitPackage,void 0,k)}createRoom(c){return __awaiter(this,void 0,void 0,function*(){const b=yield this.rpc.request(svc,"CreateRoom",livekit_room_1.CreateRoomRequest.toJSON(livekit_room_1.CreateRoomRequest.fromPartial(c)),this.authHeader({roomCreate:!0}));return livekit_models_1$1.Room.fromJSON(b)})}listRooms(c){var b;return __awaiter(this,void 0,void 0,function*(){const _=yield this.rpc.request(svc,"ListRooms",livekit_room_1.ListRoomsRequest.toJSON({names:c??[]}),this.authHeader({roomList:!0}));return(b=livekit_room_1.ListRoomsResponse.fromJSON(_).rooms)!==null&&b!==void 0?b:[]})}deleteRoom(c){return __awaiter(this,void 0,void 0,function*(){yield this.rpc.request(svc,"DeleteRoom",livekit_room_1.DeleteRoomRequest.toJSON({room:c}),this.authHeader({roomCreate:!0}))})}updateRoomMetadata(c,b){return __awaiter(this,void 0,void 0,function*(){const _=yield this.rpc.request(svc,"UpdateRoomMetadata",livekit_room_1.UpdateRoomMetadataRequest.toJSON({room:c,metadata:b}),this.authHeader({roomAdmin:!0,room:c}));return livekit_models_1$1.Room.fromJSON(_)})}listParticipants(c){var b;return __awaiter(this,void 0,void 0,function*(){const _=yield this.rpc.request(svc,"ListParticipants",livekit_room_1.ListParticipantsRequest.toJSON({room:c}),this.authHeader({roomAdmin:!0,room:c}));return(b=livekit_room_1.ListParticipantsResponse.fromJSON(_).participants)!==null&&b!==void 0?b:[]})}getParticipant(c,b){return __awaiter(this,void 0,void 0,function*(){const _=yield this.rpc.request(svc,"GetParticipant",livekit_room_1.RoomParticipantIdentity.toJSON({room:c,identity:b}),this.authHeader({roomAdmin:!0,room:c}));return livekit_models_1$1.ParticipantInfo.fromJSON(_)})}removeParticipant(c,b){return __awaiter(this,void 0,void 0,function*(){yield this.rpc.request(svc,"RemoveParticipant",livekit_room_1.RoomParticipantIdentity.toJSON({room:c,identity:b}),this.authHeader({roomAdmin:!0,room:c}))})}mutePublishedTrack(c,b,_,$){return __awaiter(this,void 0,void 0,function*(){const k=livekit_room_1.MuteRoomTrackRequest.toJSON({room:c,identity:b,trackSid:_,muted:$}),et=yield this.rpc.request(svc,"MutePublishedTrack",k,this.authHeader({roomAdmin:!0,room:c}));return livekit_room_1.MuteRoomTrackResponse.fromJSON(et).track})}updateParticipant(c,b,_,$,k){return __awaiter(this,void 0,void 0,function*(){const et={room:c,identity:b,metadata:_||"",permission:$,name:k||""},nt=yield this.rpc.request(svc,"UpdateParticipant",livekit_room_1.UpdateParticipantRequest.toJSON(et),this.authHeader({roomAdmin:!0,room:c}));return livekit_models_1$1.ParticipantInfo.fromJSON(nt)})}updateSubscriptions(c,b,_,$){return __awaiter(this,void 0,void 0,function*(){const k=livekit_room_1.UpdateSubscriptionsRequest.toJSON({room:c,identity:b,trackSids:_,subscribe:$,participantTracks:[]});yield this.rpc.request(svc,"UpdateSubscriptions",k,this.authHeader({roomAdmin:!0,room:c}))})}sendData(c,b,_,$=[]){return __awaiter(this,void 0,void 0,function*(){const k=livekit_room_1.SendDataRequest.toJSON({room:c,data:b,kind:_,destinationSids:$});yield this.rpc.request(svc,"SendData",k,this.authHeader({roomAdmin:!0,room:c}))})}authHeader(c){return this.jwt?{Authorization:`Bearer ${this.jwt}`}:super.authHeader(c)}}RoomServiceClient$1.RoomServiceClient=RoomServiceClient;var WebhookReceiver$1={},livekit_webhook={},__importDefault$1=commonjsGlobal$1&&commonjsGlobal$1.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(livekit_webhook,"__esModule",{value:!0});livekit_webhook.WebhookEvent=livekit_webhook.protobufPackage=void 0;const long_1=__importDefault$1(umdExports),minimal_1=__importDefault$1(minimal),livekit_egress_1=livekit_egress,livekit_ingress_1=livekit_ingress,livekit_models_1=livekit_models;livekit_webhook.protobufPackage="livekit";function createBaseWebhookEvent(){return{event:"",room:void 0,participant:void 0,egressInfo:void 0,ingressInfo:void 0,track:void 0,id:"",createdAt:0}}livekit_webhook.WebhookEvent={encode(a,c=minimal_1.default.Writer.create()){return a.event!==void 0&&a.event!==""&&c.uint32(10).string(a.event),a.room!==void 0&&livekit_models_1.Room.encode(a.room,c.uint32(18).fork()).ldelim(),a.participant!==void 0&&livekit_models_1.ParticipantInfo.encode(a.participant,c.uint32(26).fork()).ldelim(),a.egressInfo!==void 0&&livekit_egress_1.EgressInfo.encode(a.egressInfo,c.uint32(74).fork()).ldelim(),a.ingressInfo!==void 0&&livekit_ingress_1.IngressInfo.encode(a.ingressInfo,c.uint32(82).fork()).ldelim(),a.track!==void 0&&livekit_models_1.TrackInfo.encode(a.track,c.uint32(66).fork()).ldelim(),a.id!==void 0&&a.id!==""&&c.uint32(50).string(a.id),a.createdAt!==void 0&&a.createdAt!==0&&c.uint32(56).int64(a.createdAt),c},decode(a,c){const b=a instanceof minimal_1.default.Reader?a:new minimal_1.default.Reader(a);let _=c===void 0?b.len:b.pos+c;const $=createBaseWebhookEvent();for(;b.pos<_;){const k=b.uint32();switch(k>>>3){case 1:$.event=b.string();break;case 2:$.room=livekit_models_1.Room.decode(b,b.uint32());break;case 3:$.participant=livekit_models_1.ParticipantInfo.decode(b,b.uint32());break;case 9:$.egressInfo=livekit_egress_1.EgressInfo.decode(b,b.uint32());break;case 10:$.ingressInfo=livekit_ingress_1.IngressInfo.decode(b,b.uint32());break;case 8:$.track=livekit_models_1.TrackInfo.decode(b,b.uint32());break;case 6:$.id=b.string();break;case 7:$.createdAt=longToNumber(b.int64());break;default:b.skipType(k&7);break}}return $},fromJSON(a){return{event:isSet(a.event)?String(a.event):"",room:isSet(a.room)?livekit_models_1.Room.fromJSON(a.room):void 0,participant:isSet(a.participant)?livekit_models_1.ParticipantInfo.fromJSON(a.participant):void 0,egressInfo:isSet(a.egressInfo)?livekit_egress_1.EgressInfo.fromJSON(a.egressInfo):void 0,ingressInfo:isSet(a.ingressInfo)?livekit_ingress_1.IngressInfo.fromJSON(a.ingressInfo):void 0,track:isSet(a.track)?livekit_models_1.TrackInfo.fromJSON(a.track):void 0,id:isSet(a.id)?String(a.id):"",createdAt:isSet(a.createdAt)?Number(a.createdAt):0}},toJSON(a){const c={};return a.event!==void 0&&(c.event=a.event),a.room!==void 0&&(c.room=a.room?livekit_models_1.Room.toJSON(a.room):void 0),a.participant!==void 0&&(c.participant=a.participant?livekit_models_1.ParticipantInfo.toJSON(a.participant):void 0),a.egressInfo!==void 0&&(c.egressInfo=a.egressInfo?livekit_egress_1.EgressInfo.toJSON(a.egressInfo):void 0),a.ingressInfo!==void 0&&(c.ingressInfo=a.ingressInfo?livekit_ingress_1.IngressInfo.toJSON(a.ingressInfo):void 0),a.track!==void 0&&(c.track=a.track?livekit_models_1.TrackInfo.toJSON(a.track):void 0),a.id!==void 0&&(c.id=a.id),a.createdAt!==void 0&&(c.createdAt=Math.round(a.createdAt)),c},fromPartial(a){var c,b,_;const $=createBaseWebhookEvent();return $.event=(c=a.event)!==null&&c!==void 0?c:"",$.room=a.room!==void 0&&a.room!==null?livekit_models_1.Room.fromPartial(a.room):void 0,$.participant=a.participant!==void 0&&a.participant!==null?livekit_models_1.ParticipantInfo.fromPartial(a.participant):void 0,$.egressInfo=a.egressInfo!==void 0&&a.egressInfo!==null?livekit_egress_1.EgressInfo.fromPartial(a.egressInfo):void 0,$.ingressInfo=a.ingressInfo!==void 0&&a.ingressInfo!==null?livekit_ingress_1.IngressInfo.fromPartial(a.ingressInfo):void 0,$.track=a.track!==void 0&&a.track!==null?livekit_models_1.TrackInfo.fromPartial(a.track):void 0,$.id=(b=a.id)!==null&&b!==void 0?b:"",$.createdAt=(_=a.createdAt)!==null&&_!==void 0?_:0,$}};var globalThis$1=(()=>{if(typeof globalThis$1<"u")return globalThis$1;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof commonjsGlobal$1<"u")return commonjsGlobal$1;throw"Unable to locate global object"})();function longToNumber(a){if(a.gt(Number.MAX_SAFE_INTEGER))throw new globalThis$1.Error("Value is larger than Number.MAX_SAFE_INTEGER");return a.toNumber()}minimal_1.default.util.Long!==long_1.default&&(minimal_1.default.util.Long=long_1.default,minimal_1.default.configure());function isSet(a){return a!=null}var __importDefault=commonjsGlobal$1&&commonjsGlobal$1.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(WebhookReceiver$1,"__esModule",{value:!0});WebhookReceiver$1.WebhookReceiver=WebhookReceiver$1.authorizeHeader=void 0;const crypto_1=__importDefault(requireCryptoBrowserify()),AccessToken_1=AccessToken$1,livekit_webhook_1=livekit_webhook;WebhookReceiver$1.authorizeHeader="Authorize";class WebhookReceiver{constructor(c,b){this.verifier=new AccessToken_1.TokenVerifier(c,b)}receive(c,b,_=!1){if(!_){if(!b)throw new Error("authorization header is empty");const $=this.verifier.verify(b),k=crypto_1.default.createHash("sha256");if(k.update(c),$.sha256!==k.digest("base64"))throw new Error("sha256 checksum of body does not match")}return livekit_webhook_1.WebhookEvent.fromJSON(JSON.parse(c))}}WebhookReceiver$1.WebhookReceiver=WebhookReceiver;var livekit_internal={},livekit_rtc={};(function(a){var c=commonjsGlobal$1&&commonjsGlobal$1.__importDefault||function(st){return st&&st.__esModule?st:{default:st}};Object.defineProperty(a,"__esModule",{value:!0}),a.SimulateScenario=a.DataChannelInfo=a.SyncState=a.SubscriptionPermissionUpdate=a.SubscriptionPermission=a.TrackPermission=a.SubscribedQualityUpdate=a.SubscribedCodec=a.SubscribedQuality=a.StreamStateUpdate=a.StreamStateInfo=a.ConnectionQualityUpdate=a.ConnectionQualityInfo=a.RoomUpdate=a.SpeakersChanged=a.ICEServer=a.UpdateVideoLayers=a.LeaveRequest=a.UpdateTrackSettings=a.UpdateSubscription=a.ParticipantUpdate=a.SessionDescription=a.TrackUnpublishedResponse=a.TrackPublishedResponse=a.JoinResponse=a.MuteTrackRequest=a.TrickleRequest=a.AddTrackRequest=a.SimulcastCodec=a.SignalResponse=a.SignalRequest=a.candidateProtocolToJSON=a.candidateProtocolFromJSON=a.CandidateProtocol=a.streamStateToJSON=a.streamStateFromJSON=a.StreamState=a.signalTargetToJSON=a.signalTargetFromJSON=a.SignalTarget=a.protobufPackage=void 0;const b=c(umdExports),_=c(minimal),$=livekit_models;a.protobufPackage="livekit";var k;(function(st){st[st.PUBLISHER=0]="PUBLISHER",st[st.SUBSCRIBER=1]="SUBSCRIBER",st[st.UNRECOGNIZED=-1]="UNRECOGNIZED"})(k=a.SignalTarget||(a.SignalTarget={}));function et(st){switch(st){case 0:case"PUBLISHER":return k.PUBLISHER;case 1:case"SUBSCRIBER":return k.SUBSCRIBER;case-1:case"UNRECOGNIZED":default:return k.UNRECOGNIZED}}a.signalTargetFromJSON=et;function nt(st){switch(st){case k.PUBLISHER:return"PUBLISHER";case k.SUBSCRIBER:return"SUBSCRIBER";case k.UNRECOGNIZED:default:return"UNRECOGNIZED"}}a.signalTargetToJSON=nt;var ot;(function(st){st[st.ACTIVE=0]="ACTIVE",st[st.PAUSED=1]="PAUSED",st[st.UNRECOGNIZED=-1]="UNRECOGNIZED"})(ot=a.StreamState||(a.StreamState={}));function ht(st){switch(st){case 0:case"ACTIVE":return ot.ACTIVE;case 1:case"PAUSED":return ot.PAUSED;case-1:case"UNRECOGNIZED":default:return ot.UNRECOGNIZED}}a.streamStateFromJSON=ht;function vt(st){switch(st){case ot.ACTIVE:return"ACTIVE";case ot.PAUSED:return"PAUSED";case ot.UNRECOGNIZED:default:return"UNRECOGNIZED"}}a.streamStateToJSON=vt;var _t;(function(st){st[st.UDP=0]="UDP",st[st.TCP=1]="TCP",st[st.TLS=2]="TLS",st[st.UNRECOGNIZED=-1]="UNRECOGNIZED"})(_t=a.CandidateProtocol||(a.CandidateProtocol={}));function kt(st){switch(st){case 0:case"UDP":return _t.UDP;case 1:case"TCP":return _t.TCP;case 2:case"TLS":return _t.TLS;case-1:case"UNRECOGNIZED":default:return _t.UNRECOGNIZED}}a.candidateProtocolFromJSON=kt;function $t(st){switch(st){case _t.UDP:return"UDP";case _t.TCP:return"TCP";case _t.TLS:return"TLS";case _t.UNRECOGNIZED:default:return"UNRECOGNIZED"}}a.candidateProtocolToJSON=$t;function Tt(){return{offer:void 0,answer:void 0,trickle:void 0,addTrack:void 0,mute:void 0,subscription:void 0,trackSetting:void 0,leave:void 0,updateLayers:void 0,subscriptionPermission:void 0,syncState:void 0,simulate:void 0,ping:void 0}}a.SignalRequest={encode(st,Ct=_.default.Writer.create()){return st.offer!==void 0&&a.SessionDescription.encode(st.offer,Ct.uint32(10).fork()).ldelim(),st.answer!==void 0&&a.SessionDescription.encode(st.answer,Ct.uint32(18).fork()).ldelim(),st.trickle!==void 0&&a.TrickleRequest.encode(st.trickle,Ct.uint32(26).fork()).ldelim(),st.addTrack!==void 0&&a.AddTrackRequest.encode(st.addTrack,Ct.uint32(34).fork()).ldelim(),st.mute!==void 0&&a.MuteTrackRequest.encode(st.mute,Ct.uint32(42).fork()).ldelim(),st.subscription!==void 0&&a.UpdateSubscription.encode(st.subscription,Ct.uint32(50).fork()).ldelim(),st.trackSetting!==void 0&&a.UpdateTrackSettings.encode(st.trackSetting,Ct.uint32(58).fork()).ldelim(),st.leave!==void 0&&a.LeaveRequest.encode(st.leave,Ct.uint32(66).fork()).ldelim(),st.updateLayers!==void 0&&a.UpdateVideoLayers.encode(st.updateLayers,Ct.uint32(82).fork()).ldelim(),st.subscriptionPermission!==void 0&&a.SubscriptionPermission.encode(st.subscriptionPermission,Ct.uint32(90).fork()).ldelim(),st.syncState!==void 0&&a.SyncState.encode(st.syncState,Ct.uint32(98).fork()).ldelim(),st.simulate!==void 0&&a.SimulateScenario.encode(st.simulate,Ct.uint32(106).fork()).ldelim(),st.ping!==void 0&&Ct.uint32(112).int64(st.ping),Ct},decode(st,Ct){const qt=st instanceof _.default.Reader?st:new _.default.Reader(st);let cr=Ct===void 0?qt.len:qt.pos+Ct;const dr=Tt();for(;qt.pos<cr;){const Er=qt.uint32();switch(Er>>>3){case 1:dr.offer=a.SessionDescription.decode(qt,qt.uint32());break;case 2:dr.answer=a.SessionDescription.decode(qt,qt.uint32());break;case 3:dr.trickle=a.TrickleRequest.decode(qt,qt.uint32());break;case 4:dr.addTrack=a.AddTrackRequest.decode(qt,qt.uint32());break;case 5:dr.mute=a.MuteTrackRequest.decode(qt,qt.uint32());break;case 6:dr.subscription=a.UpdateSubscription.decode(qt,qt.uint32());break;case 7:dr.trackSetting=a.UpdateTrackSettings.decode(qt,qt.uint32());break;case 8:dr.leave=a.LeaveRequest.decode(qt,qt.uint32());break;case 10:dr.updateLayers=a.UpdateVideoLayers.decode(qt,qt.uint32());break;case 11:dr.subscriptionPermission=a.SubscriptionPermission.decode(qt,qt.uint32());break;case 12:dr.syncState=a.SyncState.decode(qt,qt.uint32());break;case 13:dr.simulate=a.SimulateScenario.decode(qt,qt.uint32());break;case 14:dr.ping=Qt(qt.int64());break;default:qt.skipType(Er&7);break}}return dr},fromJSON(st){return{offer:Nt(st.offer)?a.SessionDescription.fromJSON(st.offer):void 0,answer:Nt(st.answer)?a.SessionDescription.fromJSON(st.answer):void 0,trickle:Nt(st.trickle)?a.TrickleRequest.fromJSON(st.trickle):void 0,addTrack:Nt(st.addTrack)?a.AddTrackRequest.fromJSON(st.addTrack):void 0,mute:Nt(st.mute)?a.MuteTrackRequest.fromJSON(st.mute):void 0,subscription:Nt(st.subscription)?a.UpdateSubscription.fromJSON(st.subscription):void 0,trackSetting:Nt(st.trackSetting)?a.UpdateTrackSettings.fromJSON(st.trackSetting):void 0,leave:Nt(st.leave)?a.LeaveRequest.fromJSON(st.leave):void 0,updateLayers:Nt(st.updateLayers)?a.UpdateVideoLayers.fromJSON(st.updateLayers):void 0,subscriptionPermission:Nt(st.subscriptionPermission)?a.SubscriptionPermission.fromJSON(st.subscriptionPermission):void 0,syncState:Nt(st.syncState)?a.SyncState.fromJSON(st.syncState):void 0,simulate:Nt(st.simulate)?a.SimulateScenario.fromJSON(st.simulate):void 0,ping:Nt(st.ping)?Number(st.ping):void 0}},toJSON(st){const Ct={};return st.offer!==void 0&&(Ct.offer=st.offer?a.SessionDescription.toJSON(st.offer):void 0),st.answer!==void 0&&(Ct.answer=st.answer?a.SessionDescription.toJSON(st.answer):void 0),st.trickle!==void 0&&(Ct.trickle=st.trickle?a.TrickleRequest.toJSON(st.trickle):void 0),st.addTrack!==void 0&&(Ct.addTrack=st.addTrack?a.AddTrackRequest.toJSON(st.addTrack):void 0),st.mute!==void 0&&(Ct.mute=st.mute?a.MuteTrackRequest.toJSON(st.mute):void 0),st.subscription!==void 0&&(Ct.subscription=st.subscription?a.UpdateSubscription.toJSON(st.subscription):void 0),st.trackSetting!==void 0&&(Ct.trackSetting=st.trackSetting?a.UpdateTrackSettings.toJSON(st.trackSetting):void 0),st.leave!==void 0&&(Ct.leave=st.leave?a.LeaveRequest.toJSON(st.leave):void 0),st.updateLayers!==void 0&&(Ct.updateLayers=st.updateLayers?a.UpdateVideoLayers.toJSON(st.updateLayers):void 0),st.subscriptionPermission!==void 0&&(Ct.subscriptionPermission=st.subscriptionPermission?a.SubscriptionPermission.toJSON(st.subscriptionPermission):void 0),st.syncState!==void 0&&(Ct.syncState=st.syncState?a.SyncState.toJSON(st.syncState):void 0),st.simulate!==void 0&&(Ct.simulate=st.simulate?a.SimulateScenario.toJSON(st.simulate):void 0),st.ping!==void 0&&(Ct.ping=Math.round(st.ping)),Ct},fromPartial(st){var Ct;const qt=Tt();return qt.offer=st.offer!==void 0&&st.offer!==null?a.SessionDescription.fromPartial(st.offer):void 0,qt.answer=st.answer!==void 0&&st.answer!==null?a.SessionDescription.fromPartial(st.answer):void 0,qt.trickle=st.trickle!==void 0&&st.trickle!==null?a.TrickleRequest.fromPartial(st.trickle):void 0,qt.addTrack=st.addTrack!==void 0&&st.addTrack!==null?a.AddTrackRequest.fromPartial(st.addTrack):void 0,qt.mute=st.mute!==void 0&&st.mute!==null?a.MuteTrackRequest.fromPartial(st.mute):void 0,qt.subscription=st.subscription!==void 0&&st.subscription!==null?a.UpdateSubscription.fromPartial(st.subscription):void 0,qt.trackSetting=st.trackSetting!==void 0&&st.trackSetting!==null?a.UpdateTrackSettings.fromPartial(st.trackSetting):void 0,qt.leave=st.leave!==void 0&&st.leave!==null?a.LeaveRequest.fromPartial(st.leave):void 0,qt.updateLayers=st.updateLayers!==void 0&&st.updateLayers!==null?a.UpdateVideoLayers.fromPartial(st.updateLayers):void 0,qt.subscriptionPermission=st.subscriptionPermission!==void 0&&st.subscriptionPermission!==null?a.SubscriptionPermission.fromPartial(st.subscriptionPermission):void 0,qt.syncState=st.syncState!==void 0&&st.syncState!==null?a.SyncState.fromPartial(st.syncState):void 0,qt.simulate=st.simulate!==void 0&&st.simulate!==null?a.SimulateScenario.fromPartial(st.simulate):void 0,qt.ping=(Ct=st.ping)!==null&&Ct!==void 0?Ct:void 0,qt}};function At(){return{join:void 0,answer:void 0,offer:void 0,trickle:void 0,update:void 0,trackPublished:void 0,leave:void 0,mute:void 0,speakersChanged:void 0,roomUpdate:void 0,connectionQuality:void 0,streamStateUpdate:void 0,subscribedQualityUpdate:void 0,subscriptionPermissionUpdate:void 0,refreshToken:void 0,trackUnpublished:void 0,pong:void 0}}a.SignalResponse={encode(st,Ct=_.default.Writer.create()){return st.join!==void 0&&a.JoinResponse.encode(st.join,Ct.uint32(10).fork()).ldelim(),st.answer!==void 0&&a.SessionDescription.encode(st.answer,Ct.uint32(18).fork()).ldelim(),st.offer!==void 0&&a.SessionDescription.encode(st.offer,Ct.uint32(26).fork()).ldelim(),st.trickle!==void 0&&a.TrickleRequest.encode(st.trickle,Ct.uint32(34).fork()).ldelim(),st.update!==void 0&&a.ParticipantUpdate.encode(st.update,Ct.uint32(42).fork()).ldelim(),st.trackPublished!==void 0&&a.TrackPublishedResponse.encode(st.trackPublished,Ct.uint32(50).fork()).ldelim(),st.leave!==void 0&&a.LeaveRequest.encode(st.leave,Ct.uint32(66).fork()).ldelim(),st.mute!==void 0&&a.MuteTrackRequest.encode(st.mute,Ct.uint32(74).fork()).ldelim(),st.speakersChanged!==void 0&&a.SpeakersChanged.encode(st.speakersChanged,Ct.uint32(82).fork()).ldelim(),st.roomUpdate!==void 0&&a.RoomUpdate.encode(st.roomUpdate,Ct.uint32(90).fork()).ldelim(),st.connectionQuality!==void 0&&a.ConnectionQualityUpdate.encode(st.connectionQuality,Ct.uint32(98).fork()).ldelim(),st.streamStateUpdate!==void 0&&a.StreamStateUpdate.encode(st.streamStateUpdate,Ct.uint32(106).fork()).ldelim(),st.subscribedQualityUpdate!==void 0&&a.SubscribedQualityUpdate.encode(st.subscribedQualityUpdate,Ct.uint32(114).fork()).ldelim(),st.subscriptionPermissionUpdate!==void 0&&a.SubscriptionPermissionUpdate.encode(st.subscriptionPermissionUpdate,Ct.uint32(122).fork()).ldelim(),st.refreshToken!==void 0&&Ct.uint32(130).string(st.refreshToken),st.trackUnpublished!==void 0&&a.TrackUnpublishedResponse.encode(st.trackUnpublished,Ct.uint32(138).fork()).ldelim(),st.pong!==void 0&&Ct.uint32(144).int64(st.pong),Ct},decode(st,Ct){const qt=st instanceof _.default.Reader?st:new _.default.Reader(st);let cr=Ct===void 0?qt.len:qt.pos+Ct;const dr=At();for(;qt.pos<cr;){const Er=qt.uint32();switch(Er>>>3){case 1:dr.join=a.JoinResponse.decode(qt,qt.uint32());break;case 2:dr.answer=a.SessionDescription.decode(qt,qt.uint32());break;case 3:dr.offer=a.SessionDescription.decode(qt,qt.uint32());break;case 4:dr.trickle=a.TrickleRequest.decode(qt,qt.uint32());break;case 5:dr.update=a.ParticipantUpdate.decode(qt,qt.uint32());break;case 6:dr.trackPublished=a.TrackPublishedResponse.decode(qt,qt.uint32());break;case 8:dr.leave=a.LeaveRequest.decode(qt,qt.uint32());break;case 9:dr.mute=a.MuteTrackRequest.decode(qt,qt.uint32());break;case 10:dr.speakersChanged=a.SpeakersChanged.decode(qt,qt.uint32());break;case 11:dr.roomUpdate=a.RoomUpdate.decode(qt,qt.uint32());break;case 12:dr.connectionQuality=a.ConnectionQualityUpdate.decode(qt,qt.uint32());break;case 13:dr.streamStateUpdate=a.StreamStateUpdate.decode(qt,qt.uint32());break;case 14:dr.subscribedQualityUpdate=a.SubscribedQualityUpdate.decode(qt,qt.uint32());break;case 15:dr.subscriptionPermissionUpdate=a.SubscriptionPermissionUpdate.decode(qt,qt.uint32());break;case 16:dr.refreshToken=qt.string();break;case 17:dr.trackUnpublished=a.TrackUnpublishedResponse.decode(qt,qt.uint32());break;case 18:dr.pong=Qt(qt.int64());break;default:qt.skipType(Er&7);break}}return dr},fromJSON(st){return{join:Nt(st.join)?a.JoinResponse.fromJSON(st.join):void 0,answer:Nt(st.answer)?a.SessionDescription.fromJSON(st.answer):void 0,offer:Nt(st.offer)?a.SessionDescription.fromJSON(st.offer):void 0,trickle:Nt(st.trickle)?a.TrickleRequest.fromJSON(st.trickle):void 0,update:Nt(st.update)?a.ParticipantUpdate.fromJSON(st.update):void 0,trackPublished:Nt(st.trackPublished)?a.TrackPublishedResponse.fromJSON(st.trackPublished):void 0,leave:Nt(st.leave)?a.LeaveRequest.fromJSON(st.leave):void 0,mute:Nt(st.mute)?a.MuteTrackRequest.fromJSON(st.mute):void 0,speakersChanged:Nt(st.speakersChanged)?a.SpeakersChanged.fromJSON(st.speakersChanged):void 0,roomUpdate:Nt(st.roomUpdate)?a.RoomUpdate.fromJSON(st.roomUpdate):void 0,connectionQuality:Nt(st.connectionQuality)?a.ConnectionQualityUpdate.fromJSON(st.connectionQuality):void 0,streamStateUpdate:Nt(st.streamStateUpdate)?a.StreamStateUpdate.fromJSON(st.streamStateUpdate):void 0,subscribedQualityUpdate:Nt(st.subscribedQualityUpdate)?a.SubscribedQualityUpdate.fromJSON(st.subscribedQualityUpdate):void 0,subscriptionPermissionUpdate:Nt(st.subscriptionPermissionUpdate)?a.SubscriptionPermissionUpdate.fromJSON(st.subscriptionPermissionUpdate):void 0,refreshToken:Nt(st.refreshToken)?String(st.refreshToken):void 0,trackUnpublished:Nt(st.trackUnpublished)?a.TrackUnpublishedResponse.fromJSON(st.trackUnpublished):void 0,pong:Nt(st.pong)?Number(st.pong):void 0}},toJSON(st){const Ct={};return st.join!==void 0&&(Ct.join=st.join?a.JoinResponse.toJSON(st.join):void 0),st.answer!==void 0&&(Ct.answer=st.answer?a.SessionDescription.toJSON(st.answer):void 0),st.offer!==void 0&&(Ct.offer=st.offer?a.SessionDescription.toJSON(st.offer):void 0),st.trickle!==void 0&&(Ct.trickle=st.trickle?a.TrickleRequest.toJSON(st.trickle):void 0),st.update!==void 0&&(Ct.update=st.update?a.ParticipantUpdate.toJSON(st.update):void 0),st.trackPublished!==void 0&&(Ct.trackPublished=st.trackPublished?a.TrackPublishedResponse.toJSON(st.trackPublished):void 0),st.leave!==void 0&&(Ct.leave=st.leave?a.LeaveRequest.toJSON(st.leave):void 0),st.mute!==void 0&&(Ct.mute=st.mute?a.MuteTrackRequest.toJSON(st.mute):void 0),st.speakersChanged!==void 0&&(Ct.speakersChanged=st.speakersChanged?a.SpeakersChanged.toJSON(st.speakersChanged):void 0),st.roomUpdate!==void 0&&(Ct.roomUpdate=st.roomUpdate?a.RoomUpdate.toJSON(st.roomUpdate):void 0),st.connectionQuality!==void 0&&(Ct.connectionQuality=st.connectionQuality?a.ConnectionQualityUpdate.toJSON(st.connectionQuality):void 0),st.streamStateUpdate!==void 0&&(Ct.streamStateUpdate=st.streamStateUpdate?a.StreamStateUpdate.toJSON(st.streamStateUpdate):void 0),st.subscribedQualityUpdate!==void 0&&(Ct.subscribedQualityUpdate=st.subscribedQualityUpdate?a.SubscribedQualityUpdate.toJSON(st.subscribedQualityUpdate):void 0),st.subscriptionPermissionUpdate!==void 0&&(Ct.subscriptionPermissionUpdate=st.subscriptionPermissionUpdate?a.SubscriptionPermissionUpdate.toJSON(st.subscriptionPermissionUpdate):void 0),st.refreshToken!==void 0&&(Ct.refreshToken=st.refreshToken),st.trackUnpublished!==void 0&&(Ct.trackUnpublished=st.trackUnpublished?a.TrackUnpublishedResponse.toJSON(st.trackUnpublished):void 0),st.pong!==void 0&&(Ct.pong=Math.round(st.pong)),Ct},fromPartial(st){var Ct,qt;const cr=At();return cr.join=st.join!==void 0&&st.join!==null?a.JoinResponse.fromPartial(st.join):void 0,cr.answer=st.answer!==void 0&&st.answer!==null?a.SessionDescription.fromPartial(st.answer):void 0,cr.offer=st.offer!==void 0&&st.offer!==null?a.SessionDescription.fromPartial(st.offer):void 0,cr.trickle=st.trickle!==void 0&&st.trickle!==null?a.TrickleRequest.fromPartial(st.trickle):void 0,cr.update=st.update!==void 0&&st.update!==null?a.ParticipantUpdate.fromPartial(st.update):void 0,cr.trackPublished=st.trackPublished!==void 0&&st.trackPublished!==null?a.TrackPublishedResponse.fromPartial(st.trackPublished):void 0,cr.leave=st.leave!==void 0&&st.leave!==null?a.LeaveRequest.fromPartial(st.leave):void 0,cr.mute=st.mute!==void 0&&st.mute!==null?a.MuteTrackRequest.fromPartial(st.mute):void 0,cr.speakersChanged=st.speakersChanged!==void 0&&st.speakersChanged!==null?a.SpeakersChanged.fromPartial(st.speakersChanged):void 0,cr.roomUpdate=st.roomUpdate!==void 0&&st.roomUpdate!==null?a.RoomUpdate.fromPartial(st.roomUpdate):void 0,cr.connectionQuality=st.connectionQuality!==void 0&&st.connectionQuality!==null?a.ConnectionQualityUpdate.fromPartial(st.connectionQuality):void 0,cr.streamStateUpdate=st.streamStateUpdate!==void 0&&st.streamStateUpdate!==null?a.StreamStateUpdate.fromPartial(st.streamStateUpdate):void 0,cr.subscribedQualityUpdate=st.subscribedQualityUpdate!==void 0&&st.subscribedQualityUpdate!==null?a.SubscribedQualityUpdate.fromPartial(st.subscribedQualityUpdate):void 0,cr.subscriptionPermissionUpdate=st.subscriptionPermissionUpdate!==void 0&&st.subscriptionPermissionUpdate!==null?a.SubscriptionPermissionUpdate.fromPartial(st.subscriptionPermissionUpdate):void 0,cr.refreshToken=(Ct=st.refreshToken)!==null&&Ct!==void 0?Ct:void 0,cr.trackUnpublished=st.trackUnpublished!==void 0&&st.trackUnpublished!==null?a.TrackUnpublishedResponse.fromPartial(st.trackUnpublished):void 0,cr.pong=(qt=st.pong)!==null&&qt!==void 0?qt:void 0,cr}};function Mt(){return{codec:"",cid:"",enableSimulcastLayers:!1}}a.SimulcastCodec={encode(st,Ct=_.default.Writer.create()){return st.codec!==void 0&&st.codec!==""&&Ct.uint32(10).string(st.codec),st.cid!==void 0&&st.cid!==""&&Ct.uint32(18).string(st.cid),st.enableSimulcastLayers===!0&&Ct.uint32(24).bool(st.enableSimulcastLayers),Ct},decode(st,Ct){const qt=st instanceof _.default.Reader?st:new _.default.Reader(st);let cr=Ct===void 0?qt.len:qt.pos+Ct;const dr=Mt();for(;qt.pos<cr;){const Er=qt.uint32();switch(Er>>>3){case 1:dr.codec=qt.string();break;case 2:dr.cid=qt.string();break;case 3:dr.enableSimulcastLayers=qt.bool();break;default:qt.skipType(Er&7);break}}return dr},fromJSON(st){return{codec:Nt(st.codec)?String(st.codec):"",cid:Nt(st.cid)?String(st.cid):"",enableSimulcastLayers:Nt(st.enableSimulcastLayers)?!!st.enableSimulcastLayers:!1}},toJSON(st){const Ct={};return st.codec!==void 0&&(Ct.codec=st.codec),st.cid!==void 0&&(Ct.cid=st.cid),st.enableSimulcastLayers!==void 0&&(Ct.enableSimulcastLayers=st.enableSimulcastLayers),Ct},fromPartial(st){var Ct,qt,cr;const dr=Mt();return dr.codec=(Ct=st.codec)!==null&&Ct!==void 0?Ct:"",dr.cid=(qt=st.cid)!==null&&qt!==void 0?qt:"",dr.enableSimulcastLayers=(cr=st.enableSimulcastLayers)!==null&&cr!==void 0?cr:!1,dr}};function Dt(){return{cid:"",name:"",type:0,width:0,height:0,muted:!1,disableDtx:!1,source:0,layers:[],simulcastCodecs:[],sid:"",stereo:!1,disableRed:!1}}a.AddTrackRequest={encode(st,Ct=_.default.Writer.create()){if(st.cid!==void 0&&st.cid!==""&&Ct.uint32(10).string(st.cid),st.name!==void 0&&st.name!==""&&Ct.uint32(18).string(st.name),st.type!==void 0&&st.type!==0&&Ct.uint32(24).int32(st.type),st.width!==void 0&&st.width!==0&&Ct.uint32(32).uint32(st.width),st.height!==void 0&&st.height!==0&&Ct.uint32(40).uint32(st.height),st.muted===!0&&Ct.uint32(48).bool(st.muted),st.disableDtx===!0&&Ct.uint32(56).bool(st.disableDtx),st.source!==void 0&&st.source!==0&&Ct.uint32(64).int32(st.source),st.layers!==void 0&&st.layers.length!==0)for(const qt of st.layers)$.VideoLayer.encode(qt,Ct.uint32(74).fork()).ldelim();if(st.simulcastCodecs!==void 0&&st.simulcastCodecs.length!==0)for(const qt of st.simulcastCodecs)a.SimulcastCodec.encode(qt,Ct.uint32(82).fork()).ldelim();return st.sid!==void 0&&st.sid!==""&&Ct.uint32(90).string(st.sid),st.stereo===!0&&Ct.uint32(96).bool(st.stereo),st.disableRed===!0&&Ct.uint32(104).bool(st.disableRed),Ct},decode(st,Ct){const qt=st instanceof _.default.Reader?st:new _.default.Reader(st);let cr=Ct===void 0?qt.len:qt.pos+Ct;const dr=Dt();for(;qt.pos<cr;){const Er=qt.uint32();switch(Er>>>3){case 1:dr.cid=qt.string();break;case 2:dr.name=qt.string();break;case 3:dr.type=qt.int32();break;case 4:dr.width=qt.uint32();break;case 5:dr.height=qt.uint32();break;case 6:dr.muted=qt.bool();break;case 7:dr.disableDtx=qt.bool();break;case 8:dr.source=qt.int32();break;case 9:dr.layers.push($.VideoLayer.decode(qt,qt.uint32()));break;case 10:dr.simulcastCodecs.push(a.SimulcastCodec.decode(qt,qt.uint32()));break;case 11:dr.sid=qt.string();break;case 12:dr.stereo=qt.bool();break;case 13:dr.disableRed=qt.bool();break;default:qt.skipType(Er&7);break}}return dr},fromJSON(st){return{cid:Nt(st.cid)?String(st.cid):"",name:Nt(st.name)?String(st.name):"",type:Nt(st.type)?$.trackTypeFromJSON(st.type):0,width:Nt(st.width)?Number(st.width):0,height:Nt(st.height)?Number(st.height):0,muted:Nt(st.muted)?!!st.muted:!1,disableDtx:Nt(st.disableDtx)?!!st.disableDtx:!1,source:Nt(st.source)?$.trackSourceFromJSON(st.source):0,layers:Array.isArray(st==null?void 0:st.layers)?st.layers.map(Ct=>$.VideoLayer.fromJSON(Ct)):[],simulcastCodecs:Array.isArray(st==null?void 0:st.simulcastCodecs)?st.simulcastCodecs.map(Ct=>a.SimulcastCodec.fromJSON(Ct)):[],sid:Nt(st.sid)?String(st.sid):"",stereo:Nt(st.stereo)?!!st.stereo:!1,disableRed:Nt(st.disableRed)?!!st.disableRed:!1}},toJSON(st){const Ct={};return st.cid!==void 0&&(Ct.cid=st.cid),st.name!==void 0&&(Ct.name=st.name),st.type!==void 0&&(Ct.type=$.trackTypeToJSON(st.type)),st.width!==void 0&&(Ct.width=Math.round(st.width)),st.height!==void 0&&(Ct.height=Math.round(st.height)),st.muted!==void 0&&(Ct.muted=st.muted),st.disableDtx!==void 0&&(Ct.disableDtx=st.disableDtx),st.source!==void 0&&(Ct.source=$.trackSourceToJSON(st.source)),st.layers?Ct.layers=st.layers.map(qt=>qt?$.VideoLayer.toJSON(qt):void 0):Ct.layers=[],st.simulcastCodecs?Ct.simulcastCodecs=st.simulcastCodecs.map(qt=>qt?a.SimulcastCodec.toJSON(qt):void 0):Ct.simulcastCodecs=[],st.sid!==void 0&&(Ct.sid=st.sid),st.stereo!==void 0&&(Ct.stereo=st.stereo),st.disableRed!==void 0&&(Ct.disableRed=st.disableRed),Ct},fromPartial(st){var Ct,qt,cr,dr,Er,Tr,gr,Zr,Pr,_r,St,Kt,er;const kr=Dt();return kr.cid=(Ct=st.cid)!==null&&Ct!==void 0?Ct:"",kr.name=(qt=st.name)!==null&&qt!==void 0?qt:"",kr.type=(cr=st.type)!==null&&cr!==void 0?cr:0,kr.width=(dr=st.width)!==null&&dr!==void 0?dr:0,kr.height=(Er=st.height)!==null&&Er!==void 0?Er:0,kr.muted=(Tr=st.muted)!==null&&Tr!==void 0?Tr:!1,kr.disableDtx=(gr=st.disableDtx)!==null&&gr!==void 0?gr:!1,kr.source=(Zr=st.source)!==null&&Zr!==void 0?Zr:0,kr.layers=((Pr=st.layers)===null||Pr===void 0?void 0:Pr.map(tr=>$.VideoLayer.fromPartial(tr)))||[],kr.simulcastCodecs=((_r=st.simulcastCodecs)===null||_r===void 0?void 0:_r.map(tr=>a.SimulcastCodec.fromPartial(tr)))||[],kr.sid=(St=st.sid)!==null&&St!==void 0?St:"",kr.stereo=(Kt=st.stereo)!==null&&Kt!==void 0?Kt:!1,kr.disableRed=(er=st.disableRed)!==null&&er!==void 0?er:!1,kr}};function Rt(){return{candidateInit:"",target:0}}a.TrickleRequest={encode(st,Ct=_.default.Writer.create()){return st.candidateInit!==void 0&&st.candidateInit!==""&&Ct.uint32(10).string(st.candidateInit),st.target!==void 0&&st.target!==0&&Ct.uint32(16).int32(st.target),Ct},decode(st,Ct){const qt=st instanceof _.default.Reader?st:new _.default.Reader(st);let cr=Ct===void 0?qt.len:qt.pos+Ct;const dr=Rt();for(;qt.pos<cr;){const Er=qt.uint32();switch(Er>>>3){case 1:dr.candidateInit=qt.string();break;case 2:dr.target=qt.int32();break;default:qt.skipType(Er&7);break}}return dr},fromJSON(st){return{candidateInit:Nt(st.candidateInit)?String(st.candidateInit):"",target:Nt(st.target)?et(st.target):0}},toJSON(st){const Ct={};return st.candidateInit!==void 0&&(Ct.candidateInit=st.candidateInit),st.target!==void 0&&(Ct.target=nt(st.target)),Ct},fromPartial(st){var Ct,qt;const cr=Rt();return cr.candidateInit=(Ct=st.candidateInit)!==null&&Ct!==void 0?Ct:"",cr.target=(qt=st.target)!==null&&qt!==void 0?qt:0,cr}};function xt(){return{sid:"",muted:!1}}a.MuteTrackRequest={encode(st,Ct=_.default.Writer.create()){return st.sid!==void 0&&st.sid!==""&&Ct.uint32(10).string(st.sid),st.muted===!0&&Ct.uint32(16).bool(st.muted),Ct},decode(st,Ct){const qt=st instanceof _.default.Reader?st:new _.default.Reader(st);let cr=Ct===void 0?qt.len:qt.pos+Ct;const dr=xt();for(;qt.pos<cr;){const Er=qt.uint32();switch(Er>>>3){case 1:dr.sid=qt.string();break;case 2:dr.muted=qt.bool();break;default:qt.skipType(Er&7);break}}return dr},fromJSON(st){return{sid:Nt(st.sid)?String(st.sid):"",muted:Nt(st.muted)?!!st.muted:!1}},toJSON(st){const Ct={};return st.sid!==void 0&&(Ct.sid=st.sid),st.muted!==void 0&&(Ct.muted=st.muted),Ct},fromPartial(st){var Ct,qt;const cr=xt();return cr.sid=(Ct=st.sid)!==null&&Ct!==void 0?Ct:"",cr.muted=(qt=st.muted)!==null&&qt!==void 0?qt:!1,cr}};function Jt(){return{room:void 0,participant:void 0,otherParticipants:[],serverVersion:"",iceServers:[],subscriberPrimary:!1,alternativeUrl:"",clientConfiguration:void 0,serverRegion:"",pingTimeout:0,pingInterval:0,serverInfo:void 0}}a.JoinResponse={encode(st,Ct=_.default.Writer.create()){if(st.room!==void 0&&$.Room.encode(st.room,Ct.uint32(10).fork()).ldelim(),st.participant!==void 0&&$.ParticipantInfo.encode(st.participant,Ct.uint32(18).fork()).ldelim(),st.otherParticipants!==void 0&&st.otherParticipants.length!==0)for(const qt of st.otherParticipants)$.ParticipantInfo.encode(qt,Ct.uint32(26).fork()).ldelim();if(st.serverVersion!==void 0&&st.serverVersion!==""&&Ct.uint32(34).string(st.serverVersion),st.iceServers!==void 0&&st.iceServers.length!==0)for(const qt of st.iceServers)a.ICEServer.encode(qt,Ct.uint32(42).fork()).ldelim();return st.subscriberPrimary===!0&&Ct.uint32(48).bool(st.subscriberPrimary),st.alternativeUrl!==void 0&&st.alternativeUrl!==""&&Ct.uint32(58).string(st.alternativeUrl),st.clientConfiguration!==void 0&&$.ClientConfiguration.encode(st.clientConfiguration,Ct.uint32(66).fork()).ldelim(),st.serverRegion!==void 0&&st.serverRegion!==""&&Ct.uint32(74).string(st.serverRegion),st.pingTimeout!==void 0&&st.pingTimeout!==0&&Ct.uint32(80).int32(st.pingTimeout),st.pingInterval!==void 0&&st.pingInterval!==0&&Ct.uint32(88).int32(st.pingInterval),st.serverInfo!==void 0&&$.ServerInfo.encode(st.serverInfo,Ct.uint32(98).fork()).ldelim(),Ct},decode(st,Ct){const qt=st instanceof _.default.Reader?st:new _.default.Reader(st);let cr=Ct===void 0?qt.len:qt.pos+Ct;const dr=Jt();for(;qt.pos<cr;){const Er=qt.uint32();switch(Er>>>3){case 1:dr.room=$.Room.decode(qt,qt.uint32());break;case 2:dr.participant=$.ParticipantInfo.decode(qt,qt.uint32());break;case 3:dr.otherParticipants.push($.ParticipantInfo.decode(qt,qt.uint32()));break;case 4:dr.serverVersion=qt.string();break;case 5:dr.iceServers.push(a.ICEServer.decode(qt,qt.uint32()));break;case 6:dr.subscriberPrimary=qt.bool();break;case 7:dr.alternativeUrl=qt.string();break;case 8:dr.clientConfiguration=$.ClientConfiguration.decode(qt,qt.uint32());break;case 9:dr.serverRegion=qt.string();break;case 10:dr.pingTimeout=qt.int32();break;case 11:dr.pingInterval=qt.int32();break;case 12:dr.serverInfo=$.ServerInfo.decode(qt,qt.uint32());break;default:qt.skipType(Er&7);break}}return dr},fromJSON(st){return{room:Nt(st.room)?$.Room.fromJSON(st.room):void 0,participant:Nt(st.participant)?$.ParticipantInfo.fromJSON(st.participant):void 0,otherParticipants:Array.isArray(st==null?void 0:st.otherParticipants)?st.otherParticipants.map(Ct=>$.ParticipantInfo.fromJSON(Ct)):[],serverVersion:Nt(st.serverVersion)?String(st.serverVersion):"",iceServers:Array.isArray(st==null?void 0:st.iceServers)?st.iceServers.map(Ct=>a.ICEServer.fromJSON(Ct)):[],subscriberPrimary:Nt(st.subscriberPrimary)?!!st.subscriberPrimary:!1,alternativeUrl:Nt(st.alternativeUrl)?String(st.alternativeUrl):"",clientConfiguration:Nt(st.clientConfiguration)?$.ClientConfiguration.fromJSON(st.clientConfiguration):void 0,serverRegion:Nt(st.serverRegion)?String(st.serverRegion):"",pingTimeout:Nt(st.pingTimeout)?Number(st.pingTimeout):0,pingInterval:Nt(st.pingInterval)?Number(st.pingInterval):0,serverInfo:Nt(st.serverInfo)?$.ServerInfo.fromJSON(st.serverInfo):void 0}},toJSON(st){const Ct={};return st.room!==void 0&&(Ct.room=st.room?$.Room.toJSON(st.room):void 0),st.participant!==void 0&&(Ct.participant=st.participant?$.ParticipantInfo.toJSON(st.participant):void 0),st.otherParticipants?Ct.otherParticipants=st.otherParticipants.map(qt=>qt?$.ParticipantInfo.toJSON(qt):void 0):Ct.otherParticipants=[],st.serverVersion!==void 0&&(Ct.serverVersion=st.serverVersion),st.iceServers?Ct.iceServers=st.iceServers.map(qt=>qt?a.ICEServer.toJSON(qt):void 0):Ct.iceServers=[],st.subscriberPrimary!==void 0&&(Ct.subscriberPrimary=st.subscriberPrimary),st.alternativeUrl!==void 0&&(Ct.alternativeUrl=st.alternativeUrl),st.clientConfiguration!==void 0&&(Ct.clientConfiguration=st.clientConfiguration?$.ClientConfiguration.toJSON(st.clientConfiguration):void 0),st.serverRegion!==void 0&&(Ct.serverRegion=st.serverRegion),st.pingTimeout!==void 0&&(Ct.pingTimeout=Math.round(st.pingTimeout)),st.pingInterval!==void 0&&(Ct.pingInterval=Math.round(st.pingInterval)),st.serverInfo!==void 0&&(Ct.serverInfo=st.serverInfo?$.ServerInfo.toJSON(st.serverInfo):void 0),Ct},fromPartial(st){var Ct,qt,cr,dr,Er,Tr,gr,Zr;const Pr=Jt();return Pr.room=st.room!==void 0&&st.room!==null?$.Room.fromPartial(st.room):void 0,Pr.participant=st.participant!==void 0&&st.participant!==null?$.ParticipantInfo.fromPartial(st.participant):void 0,Pr.otherParticipants=((Ct=st.otherParticipants)===null||Ct===void 0?void 0:Ct.map(_r=>$.ParticipantInfo.fromPartial(_r)))||[],Pr.serverVersion=(qt=st.serverVersion)!==null&&qt!==void 0?qt:"",Pr.iceServers=((cr=st.iceServers)===null||cr===void 0?void 0:cr.map(_r=>a.ICEServer.fromPartial(_r)))||[],Pr.subscriberPrimary=(dr=st.subscriberPrimary)!==null&&dr!==void 0?dr:!1,Pr.alternativeUrl=(Er=st.alternativeUrl)!==null&&Er!==void 0?Er:"",Pr.clientConfiguration=st.clientConfiguration!==void 0&&st.clientConfiguration!==null?$.ClientConfiguration.fromPartial(st.clientConfiguration):void 0,Pr.serverRegion=(Tr=st.serverRegion)!==null&&Tr!==void 0?Tr:"",Pr.pingTimeout=(gr=st.pingTimeout)!==null&&gr!==void 0?gr:0,Pr.pingInterval=(Zr=st.pingInterval)!==null&&Zr!==void 0?Zr:0,Pr.serverInfo=st.serverInfo!==void 0&&st.serverInfo!==null?$.ServerInfo.fromPartial(st.serverInfo):void 0,Pr}};function ar(){return{cid:"",track:void 0}}a.TrackPublishedResponse={encode(st,Ct=_.default.Writer.create()){return st.cid!==void 0&&st.cid!==""&&Ct.uint32(10).string(st.cid),st.track!==void 0&&$.TrackInfo.encode(st.track,Ct.uint32(18).fork()).ldelim(),Ct},decode(st,Ct){const qt=st instanceof _.default.Reader?st:new _.default.Reader(st);let cr=Ct===void 0?qt.len:qt.pos+Ct;const dr=ar();for(;qt.pos<cr;){const Er=qt.uint32();switch(Er>>>3){case 1:dr.cid=qt.string();break;case 2:dr.track=$.TrackInfo.decode(qt,qt.uint32());break;default:qt.skipType(Er&7);break}}return dr},fromJSON(st){return{cid:Nt(st.cid)?String(st.cid):"",track:Nt(st.track)?$.TrackInfo.fromJSON(st.track):void 0}},toJSON(st){const Ct={};return st.cid!==void 0&&(Ct.cid=st.cid),st.track!==void 0&&(Ct.track=st.track?$.TrackInfo.toJSON(st.track):void 0),Ct},fromPartial(st){var Ct;const qt=ar();return qt.cid=(Ct=st.cid)!==null&&Ct!==void 0?Ct:"",qt.track=st.track!==void 0&&st.track!==null?$.TrackInfo.fromPartial(st.track):void 0,qt}};function nr(){return{trackSid:""}}a.TrackUnpublishedResponse={encode(st,Ct=_.default.Writer.create()){return st.trackSid!==void 0&&st.trackSid!==""&&Ct.uint32(10).string(st.trackSid),Ct},decode(st,Ct){const qt=st instanceof _.default.Reader?st:new _.default.Reader(st);let cr=Ct===void 0?qt.len:qt.pos+Ct;const dr=nr();for(;qt.pos<cr;){const Er=qt.uint32();switch(Er>>>3){case 1:dr.trackSid=qt.string();break;default:qt.skipType(Er&7);break}}return dr},fromJSON(st){return{trackSid:Nt(st.trackSid)?String(st.trackSid):""}},toJSON(st){const Ct={};return st.trackSid!==void 0&&(Ct.trackSid=st.trackSid),Ct},fromPartial(st){var Ct;const qt=nr();return qt.trackSid=(Ct=st.trackSid)!==null&&Ct!==void 0?Ct:"",qt}};function pr(){return{type:"",sdp:""}}a.SessionDescription={encode(st,Ct=_.default.Writer.create()){return st.type!==void 0&&st.type!==""&&Ct.uint32(10).string(st.type),st.sdp!==void 0&&st.sdp!==""&&Ct.uint32(18).string(st.sdp),Ct},decode(st,Ct){const qt=st instanceof _.default.Reader?st:new _.default.Reader(st);let cr=Ct===void 0?qt.len:qt.pos+Ct;const dr=pr();for(;qt.pos<cr;){const Er=qt.uint32();switch(Er>>>3){case 1:dr.type=qt.string();break;case 2:dr.sdp=qt.string();break;default:qt.skipType(Er&7);break}}return dr},fromJSON(st){return{type:Nt(st.type)?String(st.type):"",sdp:Nt(st.sdp)?String(st.sdp):""}},toJSON(st){const Ct={};return st.type!==void 0&&(Ct.type=st.type),st.sdp!==void 0&&(Ct.sdp=st.sdp),Ct},fromPartial(st){var Ct,qt;const cr=pr();return cr.type=(Ct=st.type)!==null&&Ct!==void 0?Ct:"",cr.sdp=(qt=st.sdp)!==null&&qt!==void 0?qt:"",cr}};function ur(){return{participants:[]}}a.ParticipantUpdate={encode(st,Ct=_.default.Writer.create()){if(st.participants!==void 0&&st.participants.length!==0)for(const qt of st.participants)$.ParticipantInfo.encode(qt,Ct.uint32(10).fork()).ldelim();return Ct},decode(st,Ct){const qt=st instanceof _.default.Reader?st:new _.default.Reader(st);let cr=Ct===void 0?qt.len:qt.pos+Ct;const dr=ur();for(;qt.pos<cr;){const Er=qt.uint32();switch(Er>>>3){case 1:dr.participants.push($.ParticipantInfo.decode(qt,qt.uint32()));break;default:qt.skipType(Er&7);break}}return dr},fromJSON(st){return{participants:Array.isArray(st==null?void 0:st.participants)?st.participants.map(Ct=>$.ParticipantInfo.fromJSON(Ct)):[]}},toJSON(st){const Ct={};return st.participants?Ct.participants=st.participants.map(qt=>qt?$.ParticipantInfo.toJSON(qt):void 0):Ct.participants=[],Ct},fromPartial(st){var Ct;const qt=ur();return qt.participants=((Ct=st.participants)===null||Ct===void 0?void 0:Ct.map(cr=>$.ParticipantInfo.fromPartial(cr)))||[],qt}};function Ot(){return{trackSids:[],subscribe:!1,participantTracks:[]}}a.UpdateSubscription={encode(st,Ct=_.default.Writer.create()){if(st.trackSids!==void 0&&st.trackSids.length!==0)for(const qt of st.trackSids)Ct.uint32(10).string(qt);if(st.subscribe===!0&&Ct.uint32(16).bool(st.subscribe),st.participantTracks!==void 0&&st.participantTracks.length!==0)for(const qt of st.participantTracks)$.ParticipantTracks.encode(qt,Ct.uint32(26).fork()).ldelim();return Ct},decode(st,Ct){const qt=st instanceof _.default.Reader?st:new _.default.Reader(st);let cr=Ct===void 0?qt.len:qt.pos+Ct;const dr=Ot();for(;qt.pos<cr;){const Er=qt.uint32();switch(Er>>>3){case 1:dr.trackSids.push(qt.string());break;case 2:dr.subscribe=qt.bool();break;case 3:dr.participantTracks.push($.ParticipantTracks.decode(qt,qt.uint32()));break;default:qt.skipType(Er&7);break}}return dr},fromJSON(st){return{trackSids:Array.isArray(st==null?void 0:st.trackSids)?st.trackSids.map(Ct=>String(Ct)):[],subscribe:Nt(st.subscribe)?!!st.subscribe:!1,participantTracks:Array.isArray(st==null?void 0:st.participantTracks)?st.participantTracks.map(Ct=>$.ParticipantTracks.fromJSON(Ct)):[]}},toJSON(st){const Ct={};return st.trackSids?Ct.trackSids=st.trackSids.map(qt=>qt):Ct.trackSids=[],st.subscribe!==void 0&&(Ct.subscribe=st.subscribe),st.participantTracks?Ct.participantTracks=st.participantTracks.map(qt=>qt?$.ParticipantTracks.toJSON(qt):void 0):Ct.participantTracks=[],Ct},fromPartial(st){var Ct,qt,cr;const dr=Ot();return dr.trackSids=((Ct=st.trackSids)===null||Ct===void 0?void 0:Ct.map(Er=>Er))||[],dr.subscribe=(qt=st.subscribe)!==null&&qt!==void 0?qt:!1,dr.participantTracks=((cr=st.participantTracks)===null||cr===void 0?void 0:cr.map(Er=>$.ParticipantTracks.fromPartial(Er)))||[],dr}};function It(){return{trackSids:[],disabled:!1,quality:0,width:0,height:0,fps:0}}a.UpdateTrackSettings={encode(st,Ct=_.default.Writer.create()){if(st.trackSids!==void 0&&st.trackSids.length!==0)for(const qt of st.trackSids)Ct.uint32(10).string(qt);return st.disabled===!0&&Ct.uint32(24).bool(st.disabled),st.quality!==void 0&&st.quality!==0&&Ct.uint32(32).int32(st.quality),st.width!==void 0&&st.width!==0&&Ct.uint32(40).uint32(st.width),st.height!==void 0&&st.height!==0&&Ct.uint32(48).uint32(st.height),st.fps!==void 0&&st.fps!==0&&Ct.uint32(56).uint32(st.fps),Ct},decode(st,Ct){const qt=st instanceof _.default.Reader?st:new _.default.Reader(st);let cr=Ct===void 0?qt.len:qt.pos+Ct;const dr=It();for(;qt.pos<cr;){const Er=qt.uint32();switch(Er>>>3){case 1:dr.trackSids.push(qt.string());break;case 3:dr.disabled=qt.bool();break;case 4:dr.quality=qt.int32();break;case 5:dr.width=qt.uint32();break;case 6:dr.height=qt.uint32();break;case 7:dr.fps=qt.uint32();break;default:qt.skipType(Er&7);break}}return dr},fromJSON(st){return{trackSids:Array.isArray(st==null?void 0:st.trackSids)?st.trackSids.map(Ct=>String(Ct)):[],disabled:Nt(st.disabled)?!!st.disabled:!1,quality:Nt(st.quality)?$.videoQualityFromJSON(st.quality):0,width:Nt(st.width)?Number(st.width):0,height:Nt(st.height)?Number(st.height):0,fps:Nt(st.fps)?Number(st.fps):0}},toJSON(st){const Ct={};return st.trackSids?Ct.trackSids=st.trackSids.map(qt=>qt):Ct.trackSids=[],st.disabled!==void 0&&(Ct.disabled=st.disabled),st.quality!==void 0&&(Ct.quality=$.videoQualityToJSON(st.quality)),st.width!==void 0&&(Ct.width=Math.round(st.width)),st.height!==void 0&&(Ct.height=Math.round(st.height)),st.fps!==void 0&&(Ct.fps=Math.round(st.fps)),Ct},fromPartial(st){var Ct,qt,cr,dr,Er,Tr;const gr=It();return gr.trackSids=((Ct=st.trackSids)===null||Ct===void 0?void 0:Ct.map(Zr=>Zr))||[],gr.disabled=(qt=st.disabled)!==null&&qt!==void 0?qt:!1,gr.quality=(cr=st.quality)!==null&&cr!==void 0?cr:0,gr.width=(dr=st.width)!==null&&dr!==void 0?dr:0,gr.height=(Er=st.height)!==null&&Er!==void 0?Er:0,gr.fps=(Tr=st.fps)!==null&&Tr!==void 0?Tr:0,gr}};function ut(){return{canReconnect:!1,reason:0}}a.LeaveRequest={encode(st,Ct=_.default.Writer.create()){return st.canReconnect===!0&&Ct.uint32(8).bool(st.canReconnect),st.reason!==void 0&&st.reason!==0&&Ct.uint32(16).int32(st.reason),Ct},decode(st,Ct){const qt=st instanceof _.default.Reader?st:new _.default.Reader(st);let cr=Ct===void 0?qt.len:qt.pos+Ct;const dr=ut();for(;qt.pos<cr;){const Er=qt.uint32();switch(Er>>>3){case 1:dr.canReconnect=qt.bool();break;case 2:dr.reason=qt.int32();break;default:qt.skipType(Er&7);break}}return dr},fromJSON(st){return{canReconnect:Nt(st.canReconnect)?!!st.canReconnect:!1,reason:Nt(st.reason)?$.disconnectReasonFromJSON(st.reason):0}},toJSON(st){const Ct={};return st.canReconnect!==void 0&&(Ct.canReconnect=st.canReconnect),st.reason!==void 0&&(Ct.reason=$.disconnectReasonToJSON(st.reason)),Ct},fromPartial(st){var Ct,qt;const cr=ut();return cr.canReconnect=(Ct=st.canReconnect)!==null&&Ct!==void 0?Ct:!1,cr.reason=(qt=st.reason)!==null&&qt!==void 0?qt:0,cr}};function _e(){return{trackSid:"",layers:[]}}a.UpdateVideoLayers={encode(st,Ct=_.default.Writer.create()){if(st.trackSid!==void 0&&st.trackSid!==""&&Ct.uint32(10).string(st.trackSid),st.layers!==void 0&&st.layers.length!==0)for(const qt of st.layers)$.VideoLayer.encode(qt,Ct.uint32(18).fork()).ldelim();return Ct},decode(st,Ct){const qt=st instanceof _.default.Reader?st:new _.default.Reader(st);let cr=Ct===void 0?qt.len:qt.pos+Ct;const dr=_e();for(;qt.pos<cr;){const Er=qt.uint32();switch(Er>>>3){case 1:dr.trackSid=qt.string();break;case 2:dr.layers.push($.VideoLayer.decode(qt,qt.uint32()));break;default:qt.skipType(Er&7);break}}return dr},fromJSON(st){return{trackSid:Nt(st.trackSid)?String(st.trackSid):"",layers:Array.isArray(st==null?void 0:st.layers)?st.layers.map(Ct=>$.VideoLayer.fromJSON(Ct)):[]}},toJSON(st){const Ct={};return st.trackSid!==void 0&&(Ct.trackSid=st.trackSid),st.layers?Ct.layers=st.layers.map(qt=>qt?$.VideoLayer.toJSON(qt):void 0):Ct.layers=[],Ct},fromPartial(st){var Ct,qt;const cr=_e();return cr.trackSid=(Ct=st.trackSid)!==null&&Ct!==void 0?Ct:"",cr.layers=((qt=st.layers)===null||qt===void 0?void 0:qt.map(dr=>$.VideoLayer.fromPartial(dr)))||[],cr}};function tt(){return{urls:[],username:"",credential:""}}a.ICEServer={encode(st,Ct=_.default.Writer.create()){if(st.urls!==void 0&&st.urls.length!==0)for(const qt of st.urls)Ct.uint32(10).string(qt);return st.username!==void 0&&st.username!==""&&Ct.uint32(18).string(st.username),st.credential!==void 0&&st.credential!==""&&Ct.uint32(26).string(st.credential),Ct},decode(st,Ct){const qt=st instanceof _.default.Reader?st:new _.default.Reader(st);let cr=Ct===void 0?qt.len:qt.pos+Ct;const dr=tt();for(;qt.pos<cr;){const Er=qt.uint32();switch(Er>>>3){case 1:dr.urls.push(qt.string());break;case 2:dr.username=qt.string();break;case 3:dr.credential=qt.string();break;default:qt.skipType(Er&7);break}}return dr},fromJSON(st){return{urls:Array.isArray(st==null?void 0:st.urls)?st.urls.map(Ct=>String(Ct)):[],username:Nt(st.username)?String(st.username):"",credential:Nt(st.credential)?String(st.credential):""}},toJSON(st){const Ct={};return st.urls?Ct.urls=st.urls.map(qt=>qt):Ct.urls=[],st.username!==void 0&&(Ct.username=st.username),st.credential!==void 0&&(Ct.credential=st.credential),Ct},fromPartial(st){var Ct,qt,cr;const dr=tt();return dr.urls=((Ct=st.urls)===null||Ct===void 0?void 0:Ct.map(Er=>Er))||[],dr.username=(qt=st.username)!==null&&qt!==void 0?qt:"",dr.credential=(cr=st.credential)!==null&&cr!==void 0?cr:"",dr}};function it(){return{speakers:[]}}a.SpeakersChanged={encode(st,Ct=_.default.Writer.create()){if(st.speakers!==void 0&&st.speakers.length!==0)for(const qt of st.speakers)$.SpeakerInfo.encode(qt,Ct.uint32(10).fork()).ldelim();return Ct},decode(st,Ct){const qt=st instanceof _.default.Reader?st:new _.default.Reader(st);let cr=Ct===void 0?qt.len:qt.pos+Ct;const dr=it();for(;qt.pos<cr;){const Er=qt.uint32();switch(Er>>>3){case 1:dr.speakers.push($.SpeakerInfo.decode(qt,qt.uint32()));break;default:qt.skipType(Er&7);break}}return dr},fromJSON(st){return{speakers:Array.isArray(st==null?void 0:st.speakers)?st.speakers.map(Ct=>$.SpeakerInfo.fromJSON(Ct)):[]}},toJSON(st){const Ct={};return st.speakers?Ct.speakers=st.speakers.map(qt=>qt?$.SpeakerInfo.toJSON(qt):void 0):Ct.speakers=[],Ct},fromPartial(st){var Ct;const qt=it();return qt.speakers=((Ct=st.speakers)===null||Ct===void 0?void 0:Ct.map(cr=>$.SpeakerInfo.fromPartial(cr)))||[],qt}};function dt(){return{room:void 0}}a.RoomUpdate={encode(st,Ct=_.default.Writer.create()){return st.room!==void 0&&$.Room.encode(st.room,Ct.uint32(10).fork()).ldelim(),Ct},decode(st,Ct){const qt=st instanceof _.default.Reader?st:new _.default.Reader(st);let cr=Ct===void 0?qt.len:qt.pos+Ct;const dr=dt();for(;qt.pos<cr;){const Er=qt.uint32();switch(Er>>>3){case 1:dr.room=$.Room.decode(qt,qt.uint32());break;default:qt.skipType(Er&7);break}}return dr},fromJSON(st){return{room:Nt(st.room)?$.Room.fromJSON(st.room):void 0}},toJSON(st){const Ct={};return st.room!==void 0&&(Ct.room=st.room?$.Room.toJSON(st.room):void 0),Ct},fromPartial(st){const Ct=dt();return Ct.room=st.room!==void 0&&st.room!==null?$.Room.fromPartial(st.room):void 0,Ct}};function lt(){return{participantSid:"",quality:0,score:0}}a.ConnectionQualityInfo={encode(st,Ct=_.default.Writer.create()){return st.participantSid!==void 0&&st.participantSid!==""&&Ct.uint32(10).string(st.participantSid),st.quality!==void 0&&st.quality!==0&&Ct.uint32(16).int32(st.quality),st.score!==void 0&&st.score!==0&&Ct.uint32(29).float(st.score),Ct},decode(st,Ct){const qt=st instanceof _.default.Reader?st:new _.default.Reader(st);let cr=Ct===void 0?qt.len:qt.pos+Ct;const dr=lt();for(;qt.pos<cr;){const Er=qt.uint32();switch(Er>>>3){case 1:dr.participantSid=qt.string();break;case 2:dr.quality=qt.int32();break;case 3:dr.score=qt.float();break;default:qt.skipType(Er&7);break}}return dr},fromJSON(st){return{participantSid:Nt(st.participantSid)?String(st.participantSid):"",quality:Nt(st.quality)?$.connectionQualityFromJSON(st.quality):0,score:Nt(st.score)?Number(st.score):0}},toJSON(st){const Ct={};return st.participantSid!==void 0&&(Ct.participantSid=st.participantSid),st.quality!==void 0&&(Ct.quality=$.connectionQualityToJSON(st.quality)),st.score!==void 0&&(Ct.score=st.score),Ct},fromPartial(st){var Ct,qt,cr;const dr=lt();return dr.participantSid=(Ct=st.participantSid)!==null&&Ct!==void 0?Ct:"",dr.quality=(qt=st.quality)!==null&&qt!==void 0?qt:0,dr.score=(cr=st.score)!==null&&cr!==void 0?cr:0,dr}};function gt(){return{updates:[]}}a.ConnectionQualityUpdate={encode(st,Ct=_.default.Writer.create()){if(st.updates!==void 0&&st.updates.length!==0)for(const qt of st.updates)a.ConnectionQualityInfo.encode(qt,Ct.uint32(10).fork()).ldelim();return Ct},decode(st,Ct){const qt=st instanceof _.default.Reader?st:new _.default.Reader(st);let cr=Ct===void 0?qt.len:qt.pos+Ct;const dr=gt();for(;qt.pos<cr;){const Er=qt.uint32();switch(Er>>>3){case 1:dr.updates.push(a.ConnectionQualityInfo.decode(qt,qt.uint32()));break;default:qt.skipType(Er&7);break}}return dr},fromJSON(st){return{updates:Array.isArray(st==null?void 0:st.updates)?st.updates.map(Ct=>a.ConnectionQualityInfo.fromJSON(Ct)):[]}},toJSON(st){const Ct={};return st.updates?Ct.updates=st.updates.map(qt=>qt?a.ConnectionQualityInfo.toJSON(qt):void 0):Ct.updates=[],Ct},fromPartial(st){var Ct;const qt=gt();return qt.updates=((Ct=st.updates)===null||Ct===void 0?void 0:Ct.map(cr=>a.ConnectionQualityInfo.fromPartial(cr)))||[],qt}};function Et(){return{participantSid:"",trackSid:"",state:0}}a.StreamStateInfo={encode(st,Ct=_.default.Writer.create()){return st.participantSid!==void 0&&st.participantSid!==""&&Ct.uint32(10).string(st.participantSid),st.trackSid!==void 0&&st.trackSid!==""&&Ct.uint32(18).string(st.trackSid),st.state!==void 0&&st.state!==0&&Ct.uint32(24).int32(st.state),Ct},decode(st,Ct){const qt=st instanceof _.default.Reader?st:new _.default.Reader(st);let cr=Ct===void 0?qt.len:qt.pos+Ct;const dr=Et();for(;qt.pos<cr;){const Er=qt.uint32();switch(Er>>>3){case 1:dr.participantSid=qt.string();break;case 2:dr.trackSid=qt.string();break;case 3:dr.state=qt.int32();break;default:qt.skipType(Er&7);break}}return dr},fromJSON(st){return{participantSid:Nt(st.participantSid)?String(st.participantSid):"",trackSid:Nt(st.trackSid)?String(st.trackSid):"",state:Nt(st.state)?ht(st.state):0}},toJSON(st){const Ct={};return st.participantSid!==void 0&&(Ct.participantSid=st.participantSid),st.trackSid!==void 0&&(Ct.trackSid=st.trackSid),st.state!==void 0&&(Ct.state=vt(st.state)),Ct},fromPartial(st){var Ct,qt,cr;const dr=Et();return dr.participantSid=(Ct=st.participantSid)!==null&&Ct!==void 0?Ct:"",dr.trackSid=(qt=st.trackSid)!==null&&qt!==void 0?qt:"",dr.state=(cr=st.state)!==null&&cr!==void 0?cr:0,dr}};function pt(){return{streamStates:[]}}a.StreamStateUpdate={encode(st,Ct=_.default.Writer.create()){if(st.streamStates!==void 0&&st.streamStates.length!==0)for(const qt of st.streamStates)a.StreamStateInfo.encode(qt,Ct.uint32(10).fork()).ldelim();return Ct},decode(st,Ct){const qt=st instanceof _.default.Reader?st:new _.default.Reader(st);let cr=Ct===void 0?qt.len:qt.pos+Ct;const dr=pt();for(;qt.pos<cr;){const Er=qt.uint32();switch(Er>>>3){case 1:dr.streamStates.push(a.StreamStateInfo.decode(qt,qt.uint32()));break;default:qt.skipType(Er&7);break}}return dr},fromJSON(st){return{streamStates:Array.isArray(st==null?void 0:st.streamStates)?st.streamStates.map(Ct=>a.StreamStateInfo.fromJSON(Ct)):[]}},toJSON(st){const Ct={};return st.streamStates?Ct.streamStates=st.streamStates.map(qt=>qt?a.StreamStateInfo.toJSON(qt):void 0):Ct.streamStates=[],Ct},fromPartial(st){var Ct;const qt=pt();return qt.streamStates=((Ct=st.streamStates)===null||Ct===void 0?void 0:Ct.map(cr=>a.StreamStateInfo.fromPartial(cr)))||[],qt}};function rt(){return{quality:0,enabled:!1}}a.SubscribedQuality={encode(st,Ct=_.default.Writer.create()){return st.quality!==void 0&&st.quality!==0&&Ct.uint32(8).int32(st.quality),st.enabled===!0&&Ct.uint32(16).bool(st.enabled),Ct},decode(st,Ct){const qt=st instanceof _.default.Reader?st:new _.default.Reader(st);let cr=Ct===void 0?qt.len:qt.pos+Ct;const dr=rt();for(;qt.pos<cr;){const Er=qt.uint32();switch(Er>>>3){case 1:dr.quality=qt.int32();break;case 2:dr.enabled=qt.bool();break;default:qt.skipType(Er&7);break}}return dr},fromJSON(st){return{quality:Nt(st.quality)?$.videoQualityFromJSON(st.quality):0,enabled:Nt(st.enabled)?!!st.enabled:!1}},toJSON(st){const Ct={};return st.quality!==void 0&&(Ct.quality=$.videoQualityToJSON(st.quality)),st.enabled!==void 0&&(Ct.enabled=st.enabled),Ct},fromPartial(st){var Ct,qt;const cr=rt();return cr.quality=(Ct=st.quality)!==null&&Ct!==void 0?Ct:0,cr.enabled=(qt=st.enabled)!==null&&qt!==void 0?qt:!1,cr}};function mt(){return{codec:"",qualities:[]}}a.SubscribedCodec={encode(st,Ct=_.default.Writer.create()){if(st.codec!==void 0&&st.codec!==""&&Ct.uint32(10).string(st.codec),st.qualities!==void 0&&st.qualities.length!==0)for(const qt of st.qualities)a.SubscribedQuality.encode(qt,Ct.uint32(18).fork()).ldelim();return Ct},decode(st,Ct){const qt=st instanceof _.default.Reader?st:new _.default.Reader(st);let cr=Ct===void 0?qt.len:qt.pos+Ct;const dr=mt();for(;qt.pos<cr;){const Er=qt.uint32();switch(Er>>>3){case 1:dr.codec=qt.string();break;case 2:dr.qualities.push(a.SubscribedQuality.decode(qt,qt.uint32()));break;default:qt.skipType(Er&7);break}}return dr},fromJSON(st){return{codec:Nt(st.codec)?String(st.codec):"",qualities:Array.isArray(st==null?void 0:st.qualities)?st.qualities.map(Ct=>a.SubscribedQuality.fromJSON(Ct)):[]}},toJSON(st){const Ct={};return st.codec!==void 0&&(Ct.codec=st.codec),st.qualities?Ct.qualities=st.qualities.map(qt=>qt?a.SubscribedQuality.toJSON(qt):void 0):Ct.qualities=[],Ct},fromPartial(st){var Ct,qt;const cr=mt();return cr.codec=(Ct=st.codec)!==null&&Ct!==void 0?Ct:"",cr.qualities=((qt=st.qualities)===null||qt===void 0?void 0:qt.map(dr=>a.SubscribedQuality.fromPartial(dr)))||[],cr}};function Lt(){return{trackSid:"",subscribedQualities:[],subscribedCodecs:[]}}a.SubscribedQualityUpdate={encode(st,Ct=_.default.Writer.create()){if(st.trackSid!==void 0&&st.trackSid!==""&&Ct.uint32(10).string(st.trackSid),st.subscribedQualities!==void 0&&st.subscribedQualities.length!==0)for(const qt of st.subscribedQualities)a.SubscribedQuality.encode(qt,Ct.uint32(18).fork()).ldelim();if(st.subscribedCodecs!==void 0&&st.subscribedCodecs.length!==0)for(const qt of st.subscribedCodecs)a.SubscribedCodec.encode(qt,Ct.uint32(26).fork()).ldelim();return Ct},decode(st,Ct){const qt=st instanceof _.default.Reader?st:new _.default.Reader(st);let cr=Ct===void 0?qt.len:qt.pos+Ct;const dr=Lt();for(;qt.pos<cr;){const Er=qt.uint32();switch(Er>>>3){case 1:dr.trackSid=qt.string();break;case 2:dr.subscribedQualities.push(a.SubscribedQuality.decode(qt,qt.uint32()));break;case 3:dr.subscribedCodecs.push(a.SubscribedCodec.decode(qt,qt.uint32()));break;default:qt.skipType(Er&7);break}}return dr},fromJSON(st){return{trackSid:Nt(st.trackSid)?String(st.trackSid):"",subscribedQualities:Array.isArray(st==null?void 0:st.subscribedQualities)?st.subscribedQualities.map(Ct=>a.SubscribedQuality.fromJSON(Ct)):[],subscribedCodecs:Array.isArray(st==null?void 0:st.subscribedCodecs)?st.subscribedCodecs.map(Ct=>a.SubscribedCodec.fromJSON(Ct)):[]}},toJSON(st){const Ct={};return st.trackSid!==void 0&&(Ct.trackSid=st.trackSid),st.subscribedQualities?Ct.subscribedQualities=st.subscribedQualities.map(qt=>qt?a.SubscribedQuality.toJSON(qt):void 0):Ct.subscribedQualities=[],st.subscribedCodecs?Ct.subscribedCodecs=st.subscribedCodecs.map(qt=>qt?a.SubscribedCodec.toJSON(qt):void 0):Ct.subscribedCodecs=[],Ct},fromPartial(st){var Ct,qt,cr;const dr=Lt();return dr.trackSid=(Ct=st.trackSid)!==null&&Ct!==void 0?Ct:"",dr.subscribedQualities=((qt=st.subscribedQualities)===null||qt===void 0?void 0:qt.map(Er=>a.SubscribedQuality.fromPartial(Er)))||[],dr.subscribedCodecs=((cr=st.subscribedCodecs)===null||cr===void 0?void 0:cr.map(Er=>a.SubscribedCodec.fromPartial(Er)))||[],dr}};function Gt(){return{participantSid:"",allTracks:!1,trackSids:[],participantIdentity:""}}a.TrackPermission={encode(st,Ct=_.default.Writer.create()){if(st.participantSid!==void 0&&st.participantSid!==""&&Ct.uint32(10).string(st.participantSid),st.allTracks===!0&&Ct.uint32(16).bool(st.allTracks),st.trackSids!==void 0&&st.trackSids.length!==0)for(const qt of st.trackSids)Ct.uint32(26).string(qt);return st.participantIdentity!==void 0&&st.participantIdentity!==""&&Ct.uint32(34).string(st.participantIdentity),Ct},decode(st,Ct){const qt=st instanceof _.default.Reader?st:new _.default.Reader(st);let cr=Ct===void 0?qt.len:qt.pos+Ct;const dr=Gt();for(;qt.pos<cr;){const Er=qt.uint32();switch(Er>>>3){case 1:dr.participantSid=qt.string();break;case 2:dr.allTracks=qt.bool();break;case 3:dr.trackSids.push(qt.string());break;case 4:dr.participantIdentity=qt.string();break;default:qt.skipType(Er&7);break}}return dr},fromJSON(st){return{participantSid:Nt(st.participantSid)?String(st.participantSid):"",allTracks:Nt(st.allTracks)?!!st.allTracks:!1,trackSids:Array.isArray(st==null?void 0:st.trackSids)?st.trackSids.map(Ct=>String(Ct)):[],participantIdentity:Nt(st.participantIdentity)?String(st.participantIdentity):""}},toJSON(st){const Ct={};return st.participantSid!==void 0&&(Ct.participantSid=st.participantSid),st.allTracks!==void 0&&(Ct.allTracks=st.allTracks),st.trackSids?Ct.trackSids=st.trackSids.map(qt=>qt):Ct.trackSids=[],st.participantIdentity!==void 0&&(Ct.participantIdentity=st.participantIdentity),Ct},fromPartial(st){var Ct,qt,cr,dr;const Er=Gt();return Er.participantSid=(Ct=st.participantSid)!==null&&Ct!==void 0?Ct:"",Er.allTracks=(qt=st.allTracks)!==null&&qt!==void 0?qt:!1,Er.trackSids=((cr=st.trackSids)===null||cr===void 0?void 0:cr.map(Tr=>Tr))||[],Er.participantIdentity=(dr=st.participantIdentity)!==null&&dr!==void 0?dr:"",Er}};function rr(){return{allParticipants:!1,trackPermissions:[]}}a.SubscriptionPermission={encode(st,Ct=_.default.Writer.create()){if(st.allParticipants===!0&&Ct.uint32(8).bool(st.allParticipants),st.trackPermissions!==void 0&&st.trackPermissions.length!==0)for(const qt of st.trackPermissions)a.TrackPermission.encode(qt,Ct.uint32(18).fork()).ldelim();return Ct},decode(st,Ct){const qt=st instanceof _.default.Reader?st:new _.default.Reader(st);let cr=Ct===void 0?qt.len:qt.pos+Ct;const dr=rr();for(;qt.pos<cr;){const Er=qt.uint32();switch(Er>>>3){case 1:dr.allParticipants=qt.bool();break;case 2:dr.trackPermissions.push(a.TrackPermission.decode(qt,qt.uint32()));break;default:qt.skipType(Er&7);break}}return dr},fromJSON(st){return{allParticipants:Nt(st.allParticipants)?!!st.allParticipants:!1,trackPermissions:Array.isArray(st==null?void 0:st.trackPermissions)?st.trackPermissions.map(Ct=>a.TrackPermission.fromJSON(Ct)):[]}},toJSON(st){const Ct={};return st.allParticipants!==void 0&&(Ct.allParticipants=st.allParticipants),st.trackPermissions?Ct.trackPermissions=st.trackPermissions.map(qt=>qt?a.TrackPermission.toJSON(qt):void 0):Ct.trackPermissions=[],Ct},fromPartial(st){var Ct,qt;const cr=rr();return cr.allParticipants=(Ct=st.allParticipants)!==null&&Ct!==void 0?Ct:!1,cr.trackPermissions=((qt=st.trackPermissions)===null||qt===void 0?void 0:qt.map(dr=>a.TrackPermission.fromPartial(dr)))||[],cr}};function ir(){return{participantSid:"",trackSid:"",allowed:!1}}a.SubscriptionPermissionUpdate={encode(st,Ct=_.default.Writer.create()){return st.participantSid!==void 0&&st.participantSid!==""&&Ct.uint32(10).string(st.participantSid),st.trackSid!==void 0&&st.trackSid!==""&&Ct.uint32(18).string(st.trackSid),st.allowed===!0&&Ct.uint32(24).bool(st.allowed),Ct},decode(st,Ct){const qt=st instanceof _.default.Reader?st:new _.default.Reader(st);let cr=Ct===void 0?qt.len:qt.pos+Ct;const dr=ir();for(;qt.pos<cr;){const Er=qt.uint32();switch(Er>>>3){case 1:dr.participantSid=qt.string();break;case 2:dr.trackSid=qt.string();break;case 3:dr.allowed=qt.bool();break;default:qt.skipType(Er&7);break}}return dr},fromJSON(st){return{participantSid:Nt(st.participantSid)?String(st.participantSid):"",trackSid:Nt(st.trackSid)?String(st.trackSid):"",allowed:Nt(st.allowed)?!!st.allowed:!1}},toJSON(st){const Ct={};return st.participantSid!==void 0&&(Ct.participantSid=st.participantSid),st.trackSid!==void 0&&(Ct.trackSid=st.trackSid),st.allowed!==void 0&&(Ct.allowed=st.allowed),Ct},fromPartial(st){var Ct,qt,cr;const dr=ir();return dr.participantSid=(Ct=st.participantSid)!==null&&Ct!==void 0?Ct:"",dr.trackSid=(qt=st.trackSid)!==null&&qt!==void 0?qt:"",dr.allowed=(cr=st.allowed)!==null&&cr!==void 0?cr:!1,dr}};function Wt(){return{answer:void 0,subscription:void 0,publishTracks:[],dataChannels:[],offer:void 0}}a.SyncState={encode(st,Ct=_.default.Writer.create()){if(st.answer!==void 0&&a.SessionDescription.encode(st.answer,Ct.uint32(10).fork()).ldelim(),st.subscription!==void 0&&a.UpdateSubscription.encode(st.subscription,Ct.uint32(18).fork()).ldelim(),st.publishTracks!==void 0&&st.publishTracks.length!==0)for(const qt of st.publishTracks)a.TrackPublishedResponse.encode(qt,Ct.uint32(26).fork()).ldelim();if(st.dataChannels!==void 0&&st.dataChannels.length!==0)for(const qt of st.dataChannels)a.DataChannelInfo.encode(qt,Ct.uint32(34).fork()).ldelim();return st.offer!==void 0&&a.SessionDescription.encode(st.offer,Ct.uint32(42).fork()).ldelim(),Ct},decode(st,Ct){const qt=st instanceof _.default.Reader?st:new _.default.Reader(st);let cr=Ct===void 0?qt.len:qt.pos+Ct;const dr=Wt();for(;qt.pos<cr;){const Er=qt.uint32();switch(Er>>>3){case 1:dr.answer=a.SessionDescription.decode(qt,qt.uint32());break;case 2:dr.subscription=a.UpdateSubscription.decode(qt,qt.uint32());break;case 3:dr.publishTracks.push(a.TrackPublishedResponse.decode(qt,qt.uint32()));break;case 4:dr.dataChannels.push(a.DataChannelInfo.decode(qt,qt.uint32()));break;case 5:dr.offer=a.SessionDescription.decode(qt,qt.uint32());break;default:qt.skipType(Er&7);break}}return dr},fromJSON(st){return{answer:Nt(st.answer)?a.SessionDescription.fromJSON(st.answer):void 0,subscription:Nt(st.subscription)?a.UpdateSubscription.fromJSON(st.subscription):void 0,publishTracks:Array.isArray(st==null?void 0:st.publishTracks)?st.publishTracks.map(Ct=>a.TrackPublishedResponse.fromJSON(Ct)):[],dataChannels:Array.isArray(st==null?void 0:st.dataChannels)?st.dataChannels.map(Ct=>a.DataChannelInfo.fromJSON(Ct)):[],offer:Nt(st.offer)?a.SessionDescription.fromJSON(st.offer):void 0}},toJSON(st){const Ct={};return st.answer!==void 0&&(Ct.answer=st.answer?a.SessionDescription.toJSON(st.answer):void 0),st.subscription!==void 0&&(Ct.subscription=st.subscription?a.UpdateSubscription.toJSON(st.subscription):void 0),st.publishTracks?Ct.publishTracks=st.publishTracks.map(qt=>qt?a.TrackPublishedResponse.toJSON(qt):void 0):Ct.publishTracks=[],st.dataChannels?Ct.dataChannels=st.dataChannels.map(qt=>qt?a.DataChannelInfo.toJSON(qt):void 0):Ct.dataChannels=[],st.offer!==void 0&&(Ct.offer=st.offer?a.SessionDescription.toJSON(st.offer):void 0),Ct},fromPartial(st){var Ct,qt;const cr=Wt();return cr.answer=st.answer!==void 0&&st.answer!==null?a.SessionDescription.fromPartial(st.answer):void 0,cr.subscription=st.subscription!==void 0&&st.subscription!==null?a.UpdateSubscription.fromPartial(st.subscription):void 0,cr.publishTracks=((Ct=st.publishTracks)===null||Ct===void 0?void 0:Ct.map(dr=>a.TrackPublishedResponse.fromPartial(dr)))||[],cr.dataChannels=((qt=st.dataChannels)===null||qt===void 0?void 0:qt.map(dr=>a.DataChannelInfo.fromPartial(dr)))||[],cr.offer=st.offer!==void 0&&st.offer!==null?a.SessionDescription.fromPartial(st.offer):void 0,cr}};function zt(){return{label:"",id:0,target:0}}a.DataChannelInfo={encode(st,Ct=_.default.Writer.create()){return st.label!==void 0&&st.label!==""&&Ct.uint32(10).string(st.label),st.id!==void 0&&st.id!==0&&Ct.uint32(16).uint32(st.id),st.target!==void 0&&st.target!==0&&Ct.uint32(24).int32(st.target),Ct},decode(st,Ct){const qt=st instanceof _.default.Reader?st:new _.default.Reader(st);let cr=Ct===void 0?qt.len:qt.pos+Ct;const dr=zt();for(;qt.pos<cr;){const Er=qt.uint32();switch(Er>>>3){case 1:dr.label=qt.string();break;case 2:dr.id=qt.uint32();break;case 3:dr.target=qt.int32();break;default:qt.skipType(Er&7);break}}return dr},fromJSON(st){return{label:Nt(st.label)?String(st.label):"",id:Nt(st.id)?Number(st.id):0,target:Nt(st.target)?et(st.target):0}},toJSON(st){const Ct={};return st.label!==void 0&&(Ct.label=st.label),st.id!==void 0&&(Ct.id=Math.round(st.id)),st.target!==void 0&&(Ct.target=nt(st.target)),Ct},fromPartial(st){var Ct,qt,cr;const dr=zt();return dr.label=(Ct=st.label)!==null&&Ct!==void 0?Ct:"",dr.id=(qt=st.id)!==null&&qt!==void 0?qt:0,dr.target=(cr=st.target)!==null&&cr!==void 0?cr:0,dr}};function wt(){return{speakerUpdate:void 0,nodeFailure:void 0,migration:void 0,serverLeave:void 0,switchCandidateProtocol:void 0}}a.SimulateScenario={encode(st,Ct=_.default.Writer.create()){return st.speakerUpdate!==void 0&&Ct.uint32(8).int32(st.speakerUpdate),st.nodeFailure!==void 0&&Ct.uint32(16).bool(st.nodeFailure),st.migration!==void 0&&Ct.uint32(24).bool(st.migration),st.serverLeave!==void 0&&Ct.uint32(32).bool(st.serverLeave),st.switchCandidateProtocol!==void 0&&Ct.uint32(40).int32(st.switchCandidateProtocol),Ct},decode(st,Ct){const qt=st instanceof _.default.Reader?st:new _.default.Reader(st);let cr=Ct===void 0?qt.len:qt.pos+Ct;const dr=wt();for(;qt.pos<cr;){const Er=qt.uint32();switch(Er>>>3){case 1:dr.speakerUpdate=qt.int32();break;case 2:dr.nodeFailure=qt.bool();break;case 3:dr.migration=qt.bool();break;case 4:dr.serverLeave=qt.bool();break;case 5:dr.switchCandidateProtocol=qt.int32();break;default:qt.skipType(Er&7);break}}return dr},fromJSON(st){return{speakerUpdate:Nt(st.speakerUpdate)?Number(st.speakerUpdate):void 0,nodeFailure:Nt(st.nodeFailure)?!!st.nodeFailure:void 0,migration:Nt(st.migration)?!!st.migration:void 0,serverLeave:Nt(st.serverLeave)?!!st.serverLeave:void 0,switchCandidateProtocol:Nt(st.switchCandidateProtocol)?kt(st.switchCandidateProtocol):void 0}},toJSON(st){const Ct={};return st.speakerUpdate!==void 0&&(Ct.speakerUpdate=Math.round(st.speakerUpdate)),st.nodeFailure!==void 0&&(Ct.nodeFailure=st.nodeFailure),st.migration!==void 0&&(Ct.migration=st.migration),st.serverLeave!==void 0&&(Ct.serverLeave=st.serverLeave),st.switchCandidateProtocol!==void 0&&(Ct.switchCandidateProtocol=st.switchCandidateProtocol!==void 0?$t(st.switchCandidateProtocol):void 0),Ct},fromPartial(st){var Ct,qt,cr,dr,Er;const Tr=wt();return Tr.speakerUpdate=(Ct=st.speakerUpdate)!==null&&Ct!==void 0?Ct:void 0,Tr.nodeFailure=(qt=st.nodeFailure)!==null&&qt!==void 0?qt:void 0,Tr.migration=(cr=st.migration)!==null&&cr!==void 0?cr:void 0,Tr.serverLeave=(dr=st.serverLeave)!==null&&dr!==void 0?dr:void 0,Tr.switchCandidateProtocol=(Er=st.switchCandidateProtocol)!==null&&Er!==void 0?Er:void 0,Tr}};var Vt=(()=>{if(typeof Vt<"u")return Vt;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof commonjsGlobal$1<"u")return commonjsGlobal$1;throw"Unable to locate global object"})();function Qt(st){if(st.gt(Number.MAX_SAFE_INTEGER))throw new Vt.Error("Value is larger than Number.MAX_SAFE_INTEGER");return st.toNumber()}_.default.util.Long!==b.default&&(_.default.util.Long=b.default,_.default.configure());function Nt(st){return st!=null}})(livekit_rtc);(function(a){var c=commonjsGlobal$1&&commonjsGlobal$1.__importDefault||function(It){return It&&It.__esModule?It:{default:It}};Object.defineProperty(a,"__esModule",{value:!0}),a.RoomInternal=a.KeepAlive=a.RemoveParticipant=a.EndSession=a.StartSession=a.SignalNodeMessage=a.RTCNodeMessage=a.NodeStats=a.Node=a.nodeStateToJSON=a.nodeStateFromJSON=a.NodeState=a.nodeTypeToJSON=a.nodeTypeFromJSON=a.NodeType=a.protobufPackage=void 0;const b=c(umdExports),_=c(minimal),$=livekit_egress,k=livekit_models,et=livekit_room,nt=livekit_rtc;a.protobufPackage="livekit";var ot;(function(It){It[It.SERVER=0]="SERVER",It[It.CONTROLLER=1]="CONTROLLER",It[It.MEDIA=2]="MEDIA",It[It.TURN=4]="TURN",It[It.UNRECOGNIZED=-1]="UNRECOGNIZED"})(ot=a.NodeType||(a.NodeType={}));function ht(It){switch(It){case 0:case"SERVER":return ot.SERVER;case 1:case"CONTROLLER":return ot.CONTROLLER;case 2:case"MEDIA":return ot.MEDIA;case 4:case"TURN":return ot.TURN;case-1:case"UNRECOGNIZED":default:return ot.UNRECOGNIZED}}a.nodeTypeFromJSON=ht;function vt(It){switch(It){case ot.SERVER:return"SERVER";case ot.CONTROLLER:return"CONTROLLER";case ot.MEDIA:return"MEDIA";case ot.TURN:return"TURN";case ot.UNRECOGNIZED:default:return"UNRECOGNIZED"}}a.nodeTypeToJSON=vt;var _t;(function(It){It[It.STARTING_UP=0]="STARTING_UP",It[It.SERVING=1]="SERVING",It[It.SHUTTING_DOWN=2]="SHUTTING_DOWN",It[It.UNRECOGNIZED=-1]="UNRECOGNIZED"})(_t=a.NodeState||(a.NodeState={}));function kt(It){switch(It){case 0:case"STARTING_UP":return _t.STARTING_UP;case 1:case"SERVING":return _t.SERVING;case 2:case"SHUTTING_DOWN":return _t.SHUTTING_DOWN;case-1:case"UNRECOGNIZED":default:return _t.UNRECOGNIZED}}a.nodeStateFromJSON=kt;function $t(It){switch(It){case _t.STARTING_UP:return"STARTING_UP";case _t.SERVING:return"SERVING";case _t.SHUTTING_DOWN:return"SHUTTING_DOWN";case _t.UNRECOGNIZED:default:return"UNRECOGNIZED"}}a.nodeStateToJSON=$t;function Tt(){return{id:"",ip:"",numCpus:0,stats:void 0,type:0,state:0,region:""}}a.Node={encode(It,ut=_.default.Writer.create()){return It.id!==void 0&&It.id!==""&&ut.uint32(10).string(It.id),It.ip!==void 0&&It.ip!==""&&ut.uint32(18).string(It.ip),It.numCpus!==void 0&&It.numCpus!==0&&ut.uint32(24).uint32(It.numCpus),It.stats!==void 0&&a.NodeStats.encode(It.stats,ut.uint32(34).fork()).ldelim(),It.type!==void 0&&It.type!==0&&ut.uint32(40).int32(It.type),It.state!==void 0&&It.state!==0&&ut.uint32(48).int32(It.state),It.region!==void 0&&It.region!==""&&ut.uint32(58).string(It.region),ut},decode(It,ut){const _e=It instanceof _.default.Reader?It:new _.default.Reader(It);let tt=ut===void 0?_e.len:_e.pos+ut;const it=Tt();for(;_e.pos<tt;){const dt=_e.uint32();switch(dt>>>3){case 1:it.id=_e.string();break;case 2:it.ip=_e.string();break;case 3:it.numCpus=_e.uint32();break;case 4:it.stats=a.NodeStats.decode(_e,_e.uint32());break;case 5:it.type=_e.int32();break;case 6:it.state=_e.int32();break;case 7:it.region=_e.string();break;default:_e.skipType(dt&7);break}}return it},fromJSON(It){return{id:Ot(It.id)?String(It.id):"",ip:Ot(It.ip)?String(It.ip):"",numCpus:Ot(It.numCpus)?Number(It.numCpus):0,stats:Ot(It.stats)?a.NodeStats.fromJSON(It.stats):void 0,type:Ot(It.type)?ht(It.type):0,state:Ot(It.state)?kt(It.state):0,region:Ot(It.region)?String(It.region):""}},toJSON(It){const ut={};return It.id!==void 0&&(ut.id=It.id),It.ip!==void 0&&(ut.ip=It.ip),It.numCpus!==void 0&&(ut.numCpus=Math.round(It.numCpus)),It.stats!==void 0&&(ut.stats=It.stats?a.NodeStats.toJSON(It.stats):void 0),It.type!==void 0&&(ut.type=vt(It.type)),It.state!==void 0&&(ut.state=$t(It.state)),It.region!==void 0&&(ut.region=It.region),ut},fromPartial(It){var ut,_e,tt,it,dt,lt;const gt=Tt();return gt.id=(ut=It.id)!==null&&ut!==void 0?ut:"",gt.ip=(_e=It.ip)!==null&&_e!==void 0?_e:"",gt.numCpus=(tt=It.numCpus)!==null&&tt!==void 0?tt:0,gt.stats=It.stats!==void 0&&It.stats!==null?a.NodeStats.fromPartial(It.stats):void 0,gt.type=(it=It.type)!==null&&it!==void 0?it:0,gt.state=(dt=It.state)!==null&&dt!==void 0?dt:0,gt.region=(lt=It.region)!==null&&lt!==void 0?lt:"",gt}};function At(){return{startedAt:0,updatedAt:0,numRooms:0,numClients:0,numTracksIn:0,numTracksOut:0,bytesIn:0,bytesOut:0,packetsIn:0,packetsOut:0,nackTotal:0,bytesInPerSec:0,bytesOutPerSec:0,packetsInPerSec:0,packetsOutPerSec:0,nackPerSec:0,numCpus:0,loadAvgLast1min:0,loadAvgLast5min:0,loadAvgLast15min:0,cpuLoad:0,memoryLoad:0,sysPacketsOut:0,sysPacketsDropped:0,sysPacketsOutPerSec:0,sysPacketsDroppedPerSec:0,sysPacketsDroppedPctPerSec:0,retransmitBytesOut:0,retransmitPacketsOut:0,retransmitBytesOutPerSec:0,retransmitPacketsOutPerSec:0,participantJoin:0,participantJoinPerSec:0}}a.NodeStats={encode(It,ut=_.default.Writer.create()){return It.startedAt!==void 0&&It.startedAt!==0&&ut.uint32(8).int64(It.startedAt),It.updatedAt!==void 0&&It.updatedAt!==0&&ut.uint32(16).int64(It.updatedAt),It.numRooms!==void 0&&It.numRooms!==0&&ut.uint32(24).int32(It.numRooms),It.numClients!==void 0&&It.numClients!==0&&ut.uint32(32).int32(It.numClients),It.numTracksIn!==void 0&&It.numTracksIn!==0&&ut.uint32(40).int32(It.numTracksIn),It.numTracksOut!==void 0&&It.numTracksOut!==0&&ut.uint32(48).int32(It.numTracksOut),It.bytesIn!==void 0&&It.bytesIn!==0&&ut.uint32(56).uint64(It.bytesIn),It.bytesOut!==void 0&&It.bytesOut!==0&&ut.uint32(64).uint64(It.bytesOut),It.packetsIn!==void 0&&It.packetsIn!==0&&ut.uint32(72).uint64(It.packetsIn),It.packetsOut!==void 0&&It.packetsOut!==0&&ut.uint32(80).uint64(It.packetsOut),It.nackTotal!==void 0&&It.nackTotal!==0&&ut.uint32(88).uint64(It.nackTotal),It.bytesInPerSec!==void 0&&It.bytesInPerSec!==0&&ut.uint32(101).float(It.bytesInPerSec),It.bytesOutPerSec!==void 0&&It.bytesOutPerSec!==0&&ut.uint32(109).float(It.bytesOutPerSec),It.packetsInPerSec!==void 0&&It.packetsInPerSec!==0&&ut.uint32(117).float(It.packetsInPerSec),It.packetsOutPerSec!==void 0&&It.packetsOutPerSec!==0&&ut.uint32(125).float(It.packetsOutPerSec),It.nackPerSec!==void 0&&It.nackPerSec!==0&&ut.uint32(133).float(It.nackPerSec),It.numCpus!==void 0&&It.numCpus!==0&&ut.uint32(136).uint32(It.numCpus),It.loadAvgLast1min!==void 0&&It.loadAvgLast1min!==0&&ut.uint32(149).float(It.loadAvgLast1min),It.loadAvgLast5min!==void 0&&It.loadAvgLast5min!==0&&ut.uint32(157).float(It.loadAvgLast5min),It.loadAvgLast15min!==void 0&&It.loadAvgLast15min!==0&&ut.uint32(165).float(It.loadAvgLast15min),It.cpuLoad!==void 0&&It.cpuLoad!==0&&ut.uint32(173).float(It.cpuLoad),It.memoryLoad!==void 0&&It.memoryLoad!==0&&ut.uint32(269).float(It.memoryLoad),It.sysPacketsOut!==void 0&&It.sysPacketsOut!==0&&ut.uint32(224).uint32(It.sysPacketsOut),It.sysPacketsDropped!==void 0&&It.sysPacketsDropped!==0&&ut.uint32(232).uint32(It.sysPacketsDropped),It.sysPacketsOutPerSec!==void 0&&It.sysPacketsOutPerSec!==0&&ut.uint32(245).float(It.sysPacketsOutPerSec),It.sysPacketsDroppedPerSec!==void 0&&It.sysPacketsDroppedPerSec!==0&&ut.uint32(253).float(It.sysPacketsDroppedPerSec),It.sysPacketsDroppedPctPerSec!==void 0&&It.sysPacketsDroppedPctPerSec!==0&&ut.uint32(261).float(It.sysPacketsDroppedPctPerSec),It.retransmitBytesOut!==void 0&&It.retransmitBytesOut!==0&&ut.uint32(176).uint64(It.retransmitBytesOut),It.retransmitPacketsOut!==void 0&&It.retransmitPacketsOut!==0&&ut.uint32(184).uint64(It.retransmitPacketsOut),It.retransmitBytesOutPerSec!==void 0&&It.retransmitBytesOutPerSec!==0&&ut.uint32(197).float(It.retransmitBytesOutPerSec),It.retransmitPacketsOutPerSec!==void 0&&It.retransmitPacketsOutPerSec!==0&&ut.uint32(205).float(It.retransmitPacketsOutPerSec),It.participantJoin!==void 0&&It.participantJoin!==0&&ut.uint32(208).uint64(It.participantJoin),It.participantJoinPerSec!==void 0&&It.participantJoinPerSec!==0&&ut.uint32(221).float(It.participantJoinPerSec),ut},decode(It,ut){const _e=It instanceof _.default.Reader?It:new _.default.Reader(It);let tt=ut===void 0?_e.len:_e.pos+ut;const it=At();for(;_e.pos<tt;){const dt=_e.uint32();switch(dt>>>3){case 1:it.startedAt=ur(_e.int64());break;case 2:it.updatedAt=ur(_e.int64());break;case 3:it.numRooms=_e.int32();break;case 4:it.numClients=_e.int32();break;case 5:it.numTracksIn=_e.int32();break;case 6:it.numTracksOut=_e.int32();break;case 7:it.bytesIn=ur(_e.uint64());break;case 8:it.bytesOut=ur(_e.uint64());break;case 9:it.packetsIn=ur(_e.uint64());break;case 10:it.packetsOut=ur(_e.uint64());break;case 11:it.nackTotal=ur(_e.uint64());break;case 12:it.bytesInPerSec=_e.float();break;case 13:it.bytesOutPerSec=_e.float();break;case 14:it.packetsInPerSec=_e.float();break;case 15:it.packetsOutPerSec=_e.float();break;case 16:it.nackPerSec=_e.float();break;case 17:it.numCpus=_e.uint32();break;case 18:it.loadAvgLast1min=_e.float();break;case 19:it.loadAvgLast5min=_e.float();break;case 20:it.loadAvgLast15min=_e.float();break;case 21:it.cpuLoad=_e.float();break;case 33:it.memoryLoad=_e.float();break;case 28:it.sysPacketsOut=_e.uint32();break;case 29:it.sysPacketsDropped=_e.uint32();break;case 30:it.sysPacketsOutPerSec=_e.float();break;case 31:it.sysPacketsDroppedPerSec=_e.float();break;case 32:it.sysPacketsDroppedPctPerSec=_e.float();break;case 22:it.retransmitBytesOut=ur(_e.uint64());break;case 23:it.retransmitPacketsOut=ur(_e.uint64());break;case 24:it.retransmitBytesOutPerSec=_e.float();break;case 25:it.retransmitPacketsOutPerSec=_e.float();break;case 26:it.participantJoin=ur(_e.uint64());break;case 27:it.participantJoinPerSec=_e.float();break;default:_e.skipType(dt&7);break}}return it},fromJSON(It){return{startedAt:Ot(It.startedAt)?Number(It.startedAt):0,updatedAt:Ot(It.updatedAt)?Number(It.updatedAt):0,numRooms:Ot(It.numRooms)?Number(It.numRooms):0,numClients:Ot(It.numClients)?Number(It.numClients):0,numTracksIn:Ot(It.numTracksIn)?Number(It.numTracksIn):0,numTracksOut:Ot(It.numTracksOut)?Number(It.numTracksOut):0,bytesIn:Ot(It.bytesIn)?Number(It.bytesIn):0,bytesOut:Ot(It.bytesOut)?Number(It.bytesOut):0,packetsIn:Ot(It.packetsIn)?Number(It.packetsIn):0,packetsOut:Ot(It.packetsOut)?Number(It.packetsOut):0,nackTotal:Ot(It.nackTotal)?Number(It.nackTotal):0,bytesInPerSec:Ot(It.bytesInPerSec)?Number(It.bytesInPerSec):0,bytesOutPerSec:Ot(It.bytesOutPerSec)?Number(It.bytesOutPerSec):0,packetsInPerSec:Ot(It.packetsInPerSec)?Number(It.packetsInPerSec):0,packetsOutPerSec:Ot(It.packetsOutPerSec)?Number(It.packetsOutPerSec):0,nackPerSec:Ot(It.nackPerSec)?Number(It.nackPerSec):0,numCpus:Ot(It.numCpus)?Number(It.numCpus):0,loadAvgLast1min:Ot(It.loadAvgLast1min)?Number(It.loadAvgLast1min):0,loadAvgLast5min:Ot(It.loadAvgLast5min)?Number(It.loadAvgLast5min):0,loadAvgLast15min:Ot(It.loadAvgLast15min)?Number(It.loadAvgLast15min):0,cpuLoad:Ot(It.cpuLoad)?Number(It.cpuLoad):0,memoryLoad:Ot(It.memoryLoad)?Number(It.memoryLoad):0,sysPacketsOut:Ot(It.sysPacketsOut)?Number(It.sysPacketsOut):0,sysPacketsDropped:Ot(It.sysPacketsDropped)?Number(It.sysPacketsDropped):0,sysPacketsOutPerSec:Ot(It.sysPacketsOutPerSec)?Number(It.sysPacketsOutPerSec):0,sysPacketsDroppedPerSec:Ot(It.sysPacketsDroppedPerSec)?Number(It.sysPacketsDroppedPerSec):0,sysPacketsDroppedPctPerSec:Ot(It.sysPacketsDroppedPctPerSec)?Number(It.sysPacketsDroppedPctPerSec):0,retransmitBytesOut:Ot(It.retransmitBytesOut)?Number(It.retransmitBytesOut):0,retransmitPacketsOut:Ot(It.retransmitPacketsOut)?Number(It.retransmitPacketsOut):0,retransmitBytesOutPerSec:Ot(It.retransmitBytesOutPerSec)?Number(It.retransmitBytesOutPerSec):0,retransmitPacketsOutPerSec:Ot(It.retransmitPacketsOutPerSec)?Number(It.retransmitPacketsOutPerSec):0,participantJoin:Ot(It.participantJoin)?Number(It.participantJoin):0,participantJoinPerSec:Ot(It.participantJoinPerSec)?Number(It.participantJoinPerSec):0}},toJSON(It){const ut={};return It.startedAt!==void 0&&(ut.startedAt=Math.round(It.startedAt)),It.updatedAt!==void 0&&(ut.updatedAt=Math.round(It.updatedAt)),It.numRooms!==void 0&&(ut.numRooms=Math.round(It.numRooms)),It.numClients!==void 0&&(ut.numClients=Math.round(It.numClients)),It.numTracksIn!==void 0&&(ut.numTracksIn=Math.round(It.numTracksIn)),It.numTracksOut!==void 0&&(ut.numTracksOut=Math.round(It.numTracksOut)),It.bytesIn!==void 0&&(ut.bytesIn=Math.round(It.bytesIn)),It.bytesOut!==void 0&&(ut.bytesOut=Math.round(It.bytesOut)),It.packetsIn!==void 0&&(ut.packetsIn=Math.round(It.packetsIn)),It.packetsOut!==void 0&&(ut.packetsOut=Math.round(It.packetsOut)),It.nackTotal!==void 0&&(ut.nackTotal=Math.round(It.nackTotal)),It.bytesInPerSec!==void 0&&(ut.bytesInPerSec=It.bytesInPerSec),It.bytesOutPerSec!==void 0&&(ut.bytesOutPerSec=It.bytesOutPerSec),It.packetsInPerSec!==void 0&&(ut.packetsInPerSec=It.packetsInPerSec),It.packetsOutPerSec!==void 0&&(ut.packetsOutPerSec=It.packetsOutPerSec),It.nackPerSec!==void 0&&(ut.nackPerSec=It.nackPerSec),It.numCpus!==void 0&&(ut.numCpus=Math.round(It.numCpus)),It.loadAvgLast1min!==void 0&&(ut.loadAvgLast1min=It.loadAvgLast1min),It.loadAvgLast5min!==void 0&&(ut.loadAvgLast5min=It.loadAvgLast5min),It.loadAvgLast15min!==void 0&&(ut.loadAvgLast15min=It.loadAvgLast15min),It.cpuLoad!==void 0&&(ut.cpuLoad=It.cpuLoad),It.memoryLoad!==void 0&&(ut.memoryLoad=It.memoryLoad),It.sysPacketsOut!==void 0&&(ut.sysPacketsOut=Math.round(It.sysPacketsOut)),It.sysPacketsDropped!==void 0&&(ut.sysPacketsDropped=Math.round(It.sysPacketsDropped)),It.sysPacketsOutPerSec!==void 0&&(ut.sysPacketsOutPerSec=It.sysPacketsOutPerSec),It.sysPacketsDroppedPerSec!==void 0&&(ut.sysPacketsDroppedPerSec=It.sysPacketsDroppedPerSec),It.sysPacketsDroppedPctPerSec!==void 0&&(ut.sysPacketsDroppedPctPerSec=It.sysPacketsDroppedPctPerSec),It.retransmitBytesOut!==void 0&&(ut.retransmitBytesOut=Math.round(It.retransmitBytesOut)),It.retransmitPacketsOut!==void 0&&(ut.retransmitPacketsOut=Math.round(It.retransmitPacketsOut)),It.retransmitBytesOutPerSec!==void 0&&(ut.retransmitBytesOutPerSec=It.retransmitBytesOutPerSec),It.retransmitPacketsOutPerSec!==void 0&&(ut.retransmitPacketsOutPerSec=It.retransmitPacketsOutPerSec),It.participantJoin!==void 0&&(ut.participantJoin=Math.round(It.participantJoin)),It.participantJoinPerSec!==void 0&&(ut.participantJoinPerSec=It.participantJoinPerSec),ut},fromPartial(It){var ut,_e,tt,it,dt,lt,gt,Et,pt,rt,mt,Lt,Gt,rr,ir,Wt,zt,wt,Vt,Qt,Nt,st,Ct,qt,cr,dr,Er,Tr,gr,Zr,Pr,_r,St;const Kt=At();return Kt.startedAt=(ut=It.startedAt)!==null&&ut!==void 0?ut:0,Kt.updatedAt=(_e=It.updatedAt)!==null&&_e!==void 0?_e:0,Kt.numRooms=(tt=It.numRooms)!==null&&tt!==void 0?tt:0,Kt.numClients=(it=It.numClients)!==null&&it!==void 0?it:0,Kt.numTracksIn=(dt=It.numTracksIn)!==null&&dt!==void 0?dt:0,Kt.numTracksOut=(lt=It.numTracksOut)!==null&&lt!==void 0?lt:0,Kt.bytesIn=(gt=It.bytesIn)!==null&&gt!==void 0?gt:0,Kt.bytesOut=(Et=It.bytesOut)!==null&&Et!==void 0?Et:0,Kt.packetsIn=(pt=It.packetsIn)!==null&&pt!==void 0?pt:0,Kt.packetsOut=(rt=It.packetsOut)!==null&&rt!==void 0?rt:0,Kt.nackTotal=(mt=It.nackTotal)!==null&&mt!==void 0?mt:0,Kt.bytesInPerSec=(Lt=It.bytesInPerSec)!==null&&Lt!==void 0?Lt:0,Kt.bytesOutPerSec=(Gt=It.bytesOutPerSec)!==null&&Gt!==void 0?Gt:0,Kt.packetsInPerSec=(rr=It.packetsInPerSec)!==null&&rr!==void 0?rr:0,Kt.packetsOutPerSec=(ir=It.packetsOutPerSec)!==null&&ir!==void 0?ir:0,Kt.nackPerSec=(Wt=It.nackPerSec)!==null&&Wt!==void 0?Wt:0,Kt.numCpus=(zt=It.numCpus)!==null&&zt!==void 0?zt:0,Kt.loadAvgLast1min=(wt=It.loadAvgLast1min)!==null&&wt!==void 0?wt:0,Kt.loadAvgLast5min=(Vt=It.loadAvgLast5min)!==null&&Vt!==void 0?Vt:0,Kt.loadAvgLast15min=(Qt=It.loadAvgLast15min)!==null&&Qt!==void 0?Qt:0,Kt.cpuLoad=(Nt=It.cpuLoad)!==null&&Nt!==void 0?Nt:0,Kt.memoryLoad=(st=It.memoryLoad)!==null&&st!==void 0?st:0,Kt.sysPacketsOut=(Ct=It.sysPacketsOut)!==null&&Ct!==void 0?Ct:0,Kt.sysPacketsDropped=(qt=It.sysPacketsDropped)!==null&&qt!==void 0?qt:0,Kt.sysPacketsOutPerSec=(cr=It.sysPacketsOutPerSec)!==null&&cr!==void 0?cr:0,Kt.sysPacketsDroppedPerSec=(dr=It.sysPacketsDroppedPerSec)!==null&&dr!==void 0?dr:0,Kt.sysPacketsDroppedPctPerSec=(Er=It.sysPacketsDroppedPctPerSec)!==null&&Er!==void 0?Er:0,Kt.retransmitBytesOut=(Tr=It.retransmitBytesOut)!==null&&Tr!==void 0?Tr:0,Kt.retransmitPacketsOut=(gr=It.retransmitPacketsOut)!==null&&gr!==void 0?gr:0,Kt.retransmitBytesOutPerSec=(Zr=It.retransmitBytesOutPerSec)!==null&&Zr!==void 0?Zr:0,Kt.retransmitPacketsOutPerSec=(Pr=It.retransmitPacketsOutPerSec)!==null&&Pr!==void 0?Pr:0,Kt.participantJoin=(_r=It.participantJoin)!==null&&_r!==void 0?_r:0,Kt.participantJoinPerSec=(St=It.participantJoinPerSec)!==null&&St!==void 0?St:0,Kt}};function Mt(){return{participantKey:"",senderTime:0,connectionId:"",startSession:void 0,request:void 0,removeParticipant:void 0,muteTrack:void 0,updateParticipant:void 0,deleteRoom:void 0,updateSubscriptions:void 0,sendData:void 0,updateRoomMetadata:void 0,keepAlive:void 0}}a.RTCNodeMessage={encode(It,ut=_.default.Writer.create()){return It.participantKey!==void 0&&It.participantKey!==""&&ut.uint32(10).string(It.participantKey),It.senderTime!==void 0&&It.senderTime!==0&&ut.uint32(88).int64(It.senderTime),It.connectionId!==void 0&&It.connectionId!==""&&ut.uint32(106).string(It.connectionId),It.startSession!==void 0&&a.StartSession.encode(It.startSession,ut.uint32(18).fork()).ldelim(),It.request!==void 0&&nt.SignalRequest.encode(It.request,ut.uint32(26).fork()).ldelim(),It.removeParticipant!==void 0&&et.RoomParticipantIdentity.encode(It.removeParticipant,ut.uint32(34).fork()).ldelim(),It.muteTrack!==void 0&&et.MuteRoomTrackRequest.encode(It.muteTrack,ut.uint32(42).fork()).ldelim(),It.updateParticipant!==void 0&&et.UpdateParticipantRequest.encode(It.updateParticipant,ut.uint32(50).fork()).ldelim(),It.deleteRoom!==void 0&&et.DeleteRoomRequest.encode(It.deleteRoom,ut.uint32(58).fork()).ldelim(),It.updateSubscriptions!==void 0&&et.UpdateSubscriptionsRequest.encode(It.updateSubscriptions,ut.uint32(66).fork()).ldelim(),It.sendData!==void 0&&et.SendDataRequest.encode(It.sendData,ut.uint32(74).fork()).ldelim(),It.updateRoomMetadata!==void 0&&et.UpdateRoomMetadataRequest.encode(It.updateRoomMetadata,ut.uint32(82).fork()).ldelim(),It.keepAlive!==void 0&&a.KeepAlive.encode(It.keepAlive,ut.uint32(98).fork()).ldelim(),ut},decode(It,ut){const _e=It instanceof _.default.Reader?It:new _.default.Reader(It);let tt=ut===void 0?_e.len:_e.pos+ut;const it=Mt();for(;_e.pos<tt;){const dt=_e.uint32();switch(dt>>>3){case 1:it.participantKey=_e.string();break;case 11:it.senderTime=ur(_e.int64());break;case 13:it.connectionId=_e.string();break;case 2:it.startSession=a.StartSession.decode(_e,_e.uint32());break;case 3:it.request=nt.SignalRequest.decode(_e,_e.uint32());break;case 4:it.removeParticipant=et.RoomParticipantIdentity.decode(_e,_e.uint32());break;case 5:it.muteTrack=et.MuteRoomTrackRequest.decode(_e,_e.uint32());break;case 6:it.updateParticipant=et.UpdateParticipantRequest.decode(_e,_e.uint32());break;case 7:it.deleteRoom=et.DeleteRoomRequest.decode(_e,_e.uint32());break;case 8:it.updateSubscriptions=et.UpdateSubscriptionsRequest.decode(_e,_e.uint32());break;case 9:it.sendData=et.SendDataRequest.decode(_e,_e.uint32());break;case 10:it.updateRoomMetadata=et.UpdateRoomMetadataRequest.decode(_e,_e.uint32());break;case 12:it.keepAlive=a.KeepAlive.decode(_e,_e.uint32());break;default:_e.skipType(dt&7);break}}return it},fromJSON(It){return{participantKey:Ot(It.participantKey)?String(It.participantKey):"",senderTime:Ot(It.senderTime)?Number(It.senderTime):0,connectionId:Ot(It.connectionId)?String(It.connectionId):"",startSession:Ot(It.startSession)?a.StartSession.fromJSON(It.startSession):void 0,request:Ot(It.request)?nt.SignalRequest.fromJSON(It.request):void 0,removeParticipant:Ot(It.removeParticipant)?et.RoomParticipantIdentity.fromJSON(It.removeParticipant):void 0,muteTrack:Ot(It.muteTrack)?et.MuteRoomTrackRequest.fromJSON(It.muteTrack):void 0,updateParticipant:Ot(It.updateParticipant)?et.UpdateParticipantRequest.fromJSON(It.updateParticipant):void 0,deleteRoom:Ot(It.deleteRoom)?et.DeleteRoomRequest.fromJSON(It.deleteRoom):void 0,updateSubscriptions:Ot(It.updateSubscriptions)?et.UpdateSubscriptionsRequest.fromJSON(It.updateSubscriptions):void 0,sendData:Ot(It.sendData)?et.SendDataRequest.fromJSON(It.sendData):void 0,updateRoomMetadata:Ot(It.updateRoomMetadata)?et.UpdateRoomMetadataRequest.fromJSON(It.updateRoomMetadata):void 0,keepAlive:Ot(It.keepAlive)?a.KeepAlive.fromJSON(It.keepAlive):void 0}},toJSON(It){const ut={};return It.participantKey!==void 0&&(ut.participantKey=It.participantKey),It.senderTime!==void 0&&(ut.senderTime=Math.round(It.senderTime)),It.connectionId!==void 0&&(ut.connectionId=It.connectionId),It.startSession!==void 0&&(ut.startSession=It.startSession?a.StartSession.toJSON(It.startSession):void 0),It.request!==void 0&&(ut.request=It.request?nt.SignalRequest.toJSON(It.request):void 0),It.removeParticipant!==void 0&&(ut.removeParticipant=It.removeParticipant?et.RoomParticipantIdentity.toJSON(It.removeParticipant):void 0),It.muteTrack!==void 0&&(ut.muteTrack=It.muteTrack?et.MuteRoomTrackRequest.toJSON(It.muteTrack):void 0),It.updateParticipant!==void 0&&(ut.updateParticipant=It.updateParticipant?et.UpdateParticipantRequest.toJSON(It.updateParticipant):void 0),It.deleteRoom!==void 0&&(ut.deleteRoom=It.deleteRoom?et.DeleteRoomRequest.toJSON(It.deleteRoom):void 0),It.updateSubscriptions!==void 0&&(ut.updateSubscriptions=It.updateSubscriptions?et.UpdateSubscriptionsRequest.toJSON(It.updateSubscriptions):void 0),It.sendData!==void 0&&(ut.sendData=It.sendData?et.SendDataRequest.toJSON(It.sendData):void 0),It.updateRoomMetadata!==void 0&&(ut.updateRoomMetadata=It.updateRoomMetadata?et.UpdateRoomMetadataRequest.toJSON(It.updateRoomMetadata):void 0),It.keepAlive!==void 0&&(ut.keepAlive=It.keepAlive?a.KeepAlive.toJSON(It.keepAlive):void 0),ut},fromPartial(It){var ut,_e,tt;const it=Mt();return it.participantKey=(ut=It.participantKey)!==null&&ut!==void 0?ut:"",it.senderTime=(_e=It.senderTime)!==null&&_e!==void 0?_e:0,it.connectionId=(tt=It.connectionId)!==null&&tt!==void 0?tt:"",it.startSession=It.startSession!==void 0&&It.startSession!==null?a.StartSession.fromPartial(It.startSession):void 0,it.request=It.request!==void 0&&It.request!==null?nt.SignalRequest.fromPartial(It.request):void 0,it.removeParticipant=It.removeParticipant!==void 0&&It.removeParticipant!==null?et.RoomParticipantIdentity.fromPartial(It.removeParticipant):void 0,it.muteTrack=It.muteTrack!==void 0&&It.muteTrack!==null?et.MuteRoomTrackRequest.fromPartial(It.muteTrack):void 0,it.updateParticipant=It.updateParticipant!==void 0&&It.updateParticipant!==null?et.UpdateParticipantRequest.fromPartial(It.updateParticipant):void 0,it.deleteRoom=It.deleteRoom!==void 0&&It.deleteRoom!==null?et.DeleteRoomRequest.fromPartial(It.deleteRoom):void 0,it.updateSubscriptions=It.updateSubscriptions!==void 0&&It.updateSubscriptions!==null?et.UpdateSubscriptionsRequest.fromPartial(It.updateSubscriptions):void 0,it.sendData=It.sendData!==void 0&&It.sendData!==null?et.SendDataRequest.fromPartial(It.sendData):void 0,it.updateRoomMetadata=It.updateRoomMetadata!==void 0&&It.updateRoomMetadata!==null?et.UpdateRoomMetadataRequest.fromPartial(It.updateRoomMetadata):void 0,it.keepAlive=It.keepAlive!==void 0&&It.keepAlive!==null?a.KeepAlive.fromPartial(It.keepAlive):void 0,it}};function Dt(){return{connectionId:"",response:void 0,endSession:void 0}}a.SignalNodeMessage={encode(It,ut=_.default.Writer.create()){return It.connectionId!==void 0&&It.connectionId!==""&&ut.uint32(10).string(It.connectionId),It.response!==void 0&&nt.SignalResponse.encode(It.response,ut.uint32(18).fork()).ldelim(),It.endSession!==void 0&&a.EndSession.encode(It.endSession,ut.uint32(26).fork()).ldelim(),ut},decode(It,ut){const _e=It instanceof _.default.Reader?It:new _.default.Reader(It);let tt=ut===void 0?_e.len:_e.pos+ut;const it=Dt();for(;_e.pos<tt;){const dt=_e.uint32();switch(dt>>>3){case 1:it.connectionId=_e.string();break;case 2:it.response=nt.SignalResponse.decode(_e,_e.uint32());break;case 3:it.endSession=a.EndSession.decode(_e,_e.uint32());break;default:_e.skipType(dt&7);break}}return it},fromJSON(It){return{connectionId:Ot(It.connectionId)?String(It.connectionId):"",response:Ot(It.response)?nt.SignalResponse.fromJSON(It.response):void 0,endSession:Ot(It.endSession)?a.EndSession.fromJSON(It.endSession):void 0}},toJSON(It){const ut={};return It.connectionId!==void 0&&(ut.connectionId=It.connectionId),It.response!==void 0&&(ut.response=It.response?nt.SignalResponse.toJSON(It.response):void 0),It.endSession!==void 0&&(ut.endSession=It.endSession?a.EndSession.toJSON(It.endSession):void 0),ut},fromPartial(It){var ut;const _e=Dt();return _e.connectionId=(ut=It.connectionId)!==null&&ut!==void 0?ut:"",_e.response=It.response!==void 0&&It.response!==null?nt.SignalResponse.fromPartial(It.response):void 0,_e.endSession=It.endSession!==void 0&&It.endSession!==null?a.EndSession.fromPartial(It.endSession):void 0,_e}};function Rt(){return{roomName:"",identity:"",connectionId:"",reconnect:!1,autoSubscribe:!1,hidden:!1,client:void 0,recorder:!1,name:"",grantsJson:"",adaptiveStream:!1,participantId:""}}a.StartSession={encode(It,ut=_.default.Writer.create()){return It.roomName!==void 0&&It.roomName!==""&&ut.uint32(10).string(It.roomName),It.identity!==void 0&&It.identity!==""&&ut.uint32(18).string(It.identity),It.connectionId!==void 0&&It.connectionId!==""&&ut.uint32(26).string(It.connectionId),It.reconnect===!0&&ut.uint32(32).bool(It.reconnect),It.autoSubscribe===!0&&ut.uint32(72).bool(It.autoSubscribe),It.hidden===!0&&ut.uint32(80).bool(It.hidden),It.client!==void 0&&k.ClientInfo.encode(It.client,ut.uint32(90).fork()).ldelim(),It.recorder===!0&&ut.uint32(96).bool(It.recorder),It.name!==void 0&&It.name!==""&&ut.uint32(106).string(It.name),It.grantsJson!==void 0&&It.grantsJson!==""&&ut.uint32(114).string(It.grantsJson),It.adaptiveStream===!0&&ut.uint32(120).bool(It.adaptiveStream),It.participantId!==void 0&&It.participantId!==""&&ut.uint32(130).string(It.participantId),ut},decode(It,ut){const _e=It instanceof _.default.Reader?It:new _.default.Reader(It);let tt=ut===void 0?_e.len:_e.pos+ut;const it=Rt();for(;_e.pos<tt;){const dt=_e.uint32();switch(dt>>>3){case 1:it.roomName=_e.string();break;case 2:it.identity=_e.string();break;case 3:it.connectionId=_e.string();break;case 4:it.reconnect=_e.bool();break;case 9:it.autoSubscribe=_e.bool();break;case 10:it.hidden=_e.bool();break;case 11:it.client=k.ClientInfo.decode(_e,_e.uint32());break;case 12:it.recorder=_e.bool();break;case 13:it.name=_e.string();break;case 14:it.grantsJson=_e.string();break;case 15:it.adaptiveStream=_e.bool();break;case 16:it.participantId=_e.string();break;default:_e.skipType(dt&7);break}}return it},fromJSON(It){return{roomName:Ot(It.roomName)?String(It.roomName):"",identity:Ot(It.identity)?String(It.identity):"",connectionId:Ot(It.connectionId)?String(It.connectionId):"",reconnect:Ot(It.reconnect)?!!It.reconnect:!1,autoSubscribe:Ot(It.autoSubscribe)?!!It.autoSubscribe:!1,hidden:Ot(It.hidden)?!!It.hidden:!1,client:Ot(It.client)?k.ClientInfo.fromJSON(It.client):void 0,recorder:Ot(It.recorder)?!!It.recorder:!1,name:Ot(It.name)?String(It.name):"",grantsJson:Ot(It.grantsJson)?String(It.grantsJson):"",adaptiveStream:Ot(It.adaptiveStream)?!!It.adaptiveStream:!1,participantId:Ot(It.participantId)?String(It.participantId):""}},toJSON(It){const ut={};return It.roomName!==void 0&&(ut.roomName=It.roomName),It.identity!==void 0&&(ut.identity=It.identity),It.connectionId!==void 0&&(ut.connectionId=It.connectionId),It.reconnect!==void 0&&(ut.reconnect=It.reconnect),It.autoSubscribe!==void 0&&(ut.autoSubscribe=It.autoSubscribe),It.hidden!==void 0&&(ut.hidden=It.hidden),It.client!==void 0&&(ut.client=It.client?k.ClientInfo.toJSON(It.client):void 0),It.recorder!==void 0&&(ut.recorder=It.recorder),It.name!==void 0&&(ut.name=It.name),It.grantsJson!==void 0&&(ut.grantsJson=It.grantsJson),It.adaptiveStream!==void 0&&(ut.adaptiveStream=It.adaptiveStream),It.participantId!==void 0&&(ut.participantId=It.participantId),ut},fromPartial(It){var ut,_e,tt,it,dt,lt,gt,Et,pt,rt,mt;const Lt=Rt();return Lt.roomName=(ut=It.roomName)!==null&&ut!==void 0?ut:"",Lt.identity=(_e=It.identity)!==null&&_e!==void 0?_e:"",Lt.connectionId=(tt=It.connectionId)!==null&&tt!==void 0?tt:"",Lt.reconnect=(it=It.reconnect)!==null&&it!==void 0?it:!1,Lt.autoSubscribe=(dt=It.autoSubscribe)!==null&&dt!==void 0?dt:!1,Lt.hidden=(lt=It.hidden)!==null&&lt!==void 0?lt:!1,Lt.client=It.client!==void 0&&It.client!==null?k.ClientInfo.fromPartial(It.client):void 0,Lt.recorder=(gt=It.recorder)!==null&&gt!==void 0?gt:!1,Lt.name=(Et=It.name)!==null&&Et!==void 0?Et:"",Lt.grantsJson=(pt=It.grantsJson)!==null&&pt!==void 0?pt:"",Lt.adaptiveStream=(rt=It.adaptiveStream)!==null&&rt!==void 0?rt:!1,Lt.participantId=(mt=It.participantId)!==null&&mt!==void 0?mt:"",Lt}};function xt(){return{}}a.EndSession={encode(It,ut=_.default.Writer.create()){return ut},decode(It,ut){const _e=It instanceof _.default.Reader?It:new _.default.Reader(It);let tt=ut===void 0?_e.len:_e.pos+ut;const it=xt();for(;_e.pos<tt;){const dt=_e.uint32();switch(dt>>>3){default:_e.skipType(dt&7);break}}return it},fromJSON(It){return{}},toJSON(It){return{}},fromPartial(It){return xt()}};function Jt(){return{participantId:""}}a.RemoveParticipant={encode(It,ut=_.default.Writer.create()){return It.participantId!==void 0&&It.participantId!==""&&ut.uint32(10).string(It.participantId),ut},decode(It,ut){const _e=It instanceof _.default.Reader?It:new _.default.Reader(It);let tt=ut===void 0?_e.len:_e.pos+ut;const it=Jt();for(;_e.pos<tt;){const dt=_e.uint32();switch(dt>>>3){case 1:it.participantId=_e.string();break;default:_e.skipType(dt&7);break}}return it},fromJSON(It){return{participantId:Ot(It.participantId)?String(It.participantId):""}},toJSON(It){const ut={};return It.participantId!==void 0&&(ut.participantId=It.participantId),ut},fromPartial(It){var ut;const _e=Jt();return _e.participantId=(ut=It.participantId)!==null&&ut!==void 0?ut:"",_e}};function ar(){return{}}a.KeepAlive={encode(It,ut=_.default.Writer.create()){return ut},decode(It,ut){const _e=It instanceof _.default.Reader?It:new _.default.Reader(It);let tt=ut===void 0?_e.len:_e.pos+ut;const it=ar();for(;_e.pos<tt;){const dt=_e.uint32();switch(dt>>>3){default:_e.skipType(dt&7);break}}return it},fromJSON(It){return{}},toJSON(It){return{}},fromPartial(It){return ar()}};function nr(){return{trackEgress:void 0}}a.RoomInternal={encode(It,ut=_.default.Writer.create()){return It.trackEgress!==void 0&&$.AutoTrackEgress.encode(It.trackEgress,ut.uint32(10).fork()).ldelim(),ut},decode(It,ut){const _e=It instanceof _.default.Reader?It:new _.default.Reader(It);let tt=ut===void 0?_e.len:_e.pos+ut;const it=nr();for(;_e.pos<tt;){const dt=_e.uint32();switch(dt>>>3){case 1:it.trackEgress=$.AutoTrackEgress.decode(_e,_e.uint32());break;default:_e.skipType(dt&7);break}}return it},fromJSON(It){return{trackEgress:Ot(It.trackEgress)?$.AutoTrackEgress.fromJSON(It.trackEgress):void 0}},toJSON(It){const ut={};return It.trackEgress!==void 0&&(ut.trackEgress=It.trackEgress?$.AutoTrackEgress.toJSON(It.trackEgress):void 0),ut},fromPartial(It){const ut=nr();return ut.trackEgress=It.trackEgress!==void 0&&It.trackEgress!==null?$.AutoTrackEgress.fromPartial(It.trackEgress):void 0,ut}};var pr=(()=>{if(typeof pr<"u")return pr;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof commonjsGlobal$1<"u")return commonjsGlobal$1;throw"Unable to locate global object"})();function ur(It){if(It.gt(Number.MAX_SAFE_INTEGER))throw new pr.Error("Value is larger than Number.MAX_SAFE_INTEGER");return It.toNumber()}_.default.util.Long!==b.default&&(_.default.util.Long=b.default,_.default.configure());function Ot(It){return It!=null}})(livekit_internal);(function(a){var c=commonjsGlobal$1&&commonjsGlobal$1.__createBinding||(Object.create?function(ot,ht,vt,_t){_t===void 0&&(_t=vt),Object.defineProperty(ot,_t,{enumerable:!0,get:function(){return ht[vt]}})}:function(ot,ht,vt,_t){_t===void 0&&(_t=vt),ot[_t]=ht[vt]}),b=commonjsGlobal$1&&commonjsGlobal$1.__setModuleDefault||(Object.create?function(ot,ht){Object.defineProperty(ot,"default",{enumerable:!0,value:ht})}:function(ot,ht){ot.default=ht}),_=commonjsGlobal$1&&commonjsGlobal$1.__exportStar||function(ot,ht){for(var vt in ot)vt!=="default"&&!Object.prototype.hasOwnProperty.call(ht,vt)&&c(ht,ot,vt)},$=commonjsGlobal$1&&commonjsGlobal$1.__importStar||function(ot){if(ot&&ot.__esModule)return ot;var ht={};if(ot!=null)for(var vt in ot)vt!=="default"&&Object.prototype.hasOwnProperty.call(ot,vt)&&c(ht,ot,vt);return b(ht,ot),ht};Object.defineProperty(a,"__esModule",{value:!0}),a.LivekitInternal=a.TrackType=a.TrackInfo=a.Room=a.ParticipantPermission=a.ParticipantInfo_State=a.ParticipantInfo=a.DataPacket_Kind=a.IngressVideoOptions=a.IngressState=a.IngressInput=a.IngressInfo=a.IngressAudioOptions=a.StreamProtocol=a.StreamOutput=a.SegmentedFileProtocol=a.SegmentedFileOutput=a.EncodingOptionsPreset=a.EncodingOptions=a.EncodedFileType=a.EncodedFileOutput=a.EgressInfo=a.DirectFileOutput=void 0,_(AccessToken$1,a),_(EgressClient$1,a),_(grants,a),_(IngressClient$1,a);var k=livekit_egress;Object.defineProperty(a,"DirectFileOutput",{enumerable:!0,get:function(){return k.DirectFileOutput}}),Object.defineProperty(a,"EgressInfo",{enumerable:!0,get:function(){return k.EgressInfo}}),Object.defineProperty(a,"EncodedFileOutput",{enumerable:!0,get:function(){return k.EncodedFileOutput}}),Object.defineProperty(a,"EncodedFileType",{enumerable:!0,get:function(){return k.EncodedFileType}}),Object.defineProperty(a,"EncodingOptions",{enumerable:!0,get:function(){return k.EncodingOptions}}),Object.defineProperty(a,"EncodingOptionsPreset",{enumerable:!0,get:function(){return k.EncodingOptionsPreset}}),Object.defineProperty(a,"SegmentedFileOutput",{enumerable:!0,get:function(){return k.SegmentedFileOutput}}),Object.defineProperty(a,"SegmentedFileProtocol",{enumerable:!0,get:function(){return k.SegmentedFileProtocol}}),Object.defineProperty(a,"StreamOutput",{enumerable:!0,get:function(){return k.StreamOutput}}),Object.defineProperty(a,"StreamProtocol",{enumerable:!0,get:function(){return k.StreamProtocol}});var et=livekit_ingress;Object.defineProperty(a,"IngressAudioOptions",{enumerable:!0,get:function(){return et.IngressAudioOptions}}),Object.defineProperty(a,"IngressInfo",{enumerable:!0,get:function(){return et.IngressInfo}}),Object.defineProperty(a,"IngressInput",{enumerable:!0,get:function(){return et.IngressInput}}),Object.defineProperty(a,"IngressState",{enumerable:!0,get:function(){return et.IngressState}}),Object.defineProperty(a,"IngressVideoOptions",{enumerable:!0,get:function(){return et.IngressVideoOptions}});var nt=livekit_models;Object.defineProperty(a,"DataPacket_Kind",{enumerable:!0,get:function(){return nt.DataPacket_Kind}}),Object.defineProperty(a,"ParticipantInfo",{enumerable:!0,get:function(){return nt.ParticipantInfo}}),Object.defineProperty(a,"ParticipantInfo_State",{enumerable:!0,get:function(){return nt.ParticipantInfo_State}}),Object.defineProperty(a,"ParticipantPermission",{enumerable:!0,get:function(){return nt.ParticipantPermission}}),Object.defineProperty(a,"Room",{enumerable:!0,get:function(){return nt.Room}}),Object.defineProperty(a,"TrackInfo",{enumerable:!0,get:function(){return nt.TrackInfo}}),Object.defineProperty(a,"TrackType",{enumerable:!0,get:function(){return nt.TrackType}}),_(RoomServiceClient$1,a),_(WebhookReceiver$1,a),a.LivekitInternal=$(livekit_internal)})(dist);class InvalidTokenError extends Error{}InvalidTokenError.prototype.name="InvalidTokenError";function b64DecodeUnicode(a){return decodeURIComponent(atob(a).replace(/(.)/g,(c,b)=>{let _=b.charCodeAt(0).toString(16).toUpperCase();return _.length<2&&(_="0"+_),"%"+_}))}function base64UrlDecode(a){let c=a.replace(/-/g,"+").replace(/_/g,"/");switch(c.length%4){case 0:break;case 2:c+="==";break;case 3:c+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return b64DecodeUnicode(c)}catch{return atob(c)}}function jwtDecode(a,c){if(typeof a!="string")throw new InvalidTokenError("Invalid token specified: must be a string");c||(c={});const b=c.header===!0?0:1,_=a.split(".")[b];if(typeof _!="string")throw new InvalidTokenError(`Invalid token specified: missing part #${b+1}`);let $;try{$=base64UrlDecode(_)}catch(k){throw new InvalidTokenError(`Invalid token specified: invalid base64 for part #${b+1} (${k.message})`)}try{return JSON.parse($)}catch(k){throw new InvalidTokenError(`Invalid token specified: invalid json for part #${b+1} (${k.message})`)}}var DataType=(a=>(a.ChatMessage="ChatMessage",a.ParticipantMetadataUpdate="ParticipantMetadataUpdate",a))(DataType||{}),SpecialEvent=(a=>(a.Chat="Chat",a))(SpecialEvent||{});const decoder$1=new TextDecoder,encoder$1=new TextEncoder;class RoomsManager{constructor(){_n(this,"rooms");this.rooms=new Map,this.addRoom=this.addRoom.bind(this),this.ensureRoom=this.ensureRoom.bind(this),this.removeRoom=this.removeRoom.bind(this)}addRoom(c,b,_){const $=new RoomContext(c,b,_,this);return this.rooms.set(b,$),$}ensureRoom(c,b,_){return this.rooms.get(b)?(this.rooms.get(b).token=_,this.rooms.get(b)):this.addRoom(c,b,_)}async removeRoom(c){const b=this.rooms.get(c);if(!Room)throw new Error("room not found!");if(b.isConnecting)throw new Error("Cannot remove room: Room is in connecting state");b.livekitRoom&&await b.livekitRoom.disconnect(!0),this.rooms.delete(c)}}class RoomContext{constructor(c,b,_,$){_n(this,"_baseUrl");_n(this,"_chatHistory");_n(this,"_connectListeners");_n(this,"_roomEventListenerRegistry");_n(this,"_localParticipantEventListenerRegistry");_n(this,"_specialEventListenerRegistry");_n(this,"_jwt");_n(this,"_manager");_n(this,"_apiClient");_n(this,"audioTracks");_n(this,"isConnecting");_n(this,"livekitRoom");_n(this,"participants");_n(this,"guestParticipantMetadata");_n(this,"roomName");_n(this,"_admin");let k=CoreContext.logLevel.toLowerCase();setLogLevel(k),this.livekitRoom=new Room({dynacast:!0,videoCaptureDefaults:{resolution:VideoPresets.h720.resolution}}),this._baseUrl=c,this._connectListeners=[],this._roomEventListenerRegistry={},this._jwt=_,Object.values(RoomEvent).forEach(et=>{this._roomEventListenerRegistry[et]=new Set}),this._localParticipantEventListenerRegistry={},Object.values(ParticipantEvent).forEach(et=>{this._localParticipantEventListenerRegistry[et]=new Set}),this._specialEventListenerRegistry={},this._manager=$,this._chatHistory=[],this.roomName=b,this.audioTracks=[],this.participants=[],this.guestParticipantMetadata=[],this.isConnecting=!1,this.subscribeToRoomEvent(RoomEvent.DataReceived,(et,nt)=>{var vt;const ot=decoder$1.decode(et);switch(JSON.parse(ot).type){case"ChatMessage":return this._appendChat(et,nt);case"ParticipantMetadataUpdate":{const _t=decoder$1.decode(et),kt=JSON.parse(_t);hasPermission((vt=kt==null?void 0:kt.metadata)==null?void 0:vt.participantRole,Permission.ManageSelf)&&this._updateGuestParticipantsStore(kt);return}default:return}}),this.connect=this.connect.bind(this),this.subscribeToRoomEvent=this.subscribeToRoomEvent.bind(this),this.subscribeToConnect=this.subscribeToConnect.bind(this),this.subscribeToLocalParticipantEvent=this.subscribeToLocalParticipantEvent.bind(this),this.subscribeToSpecialEvent=this.subscribeToSpecialEvent.bind(this),this.unsubscribeFromRoomEvent=this.unsubscribeFromRoomEvent.bind(this),this.unsubscribeFromSpecialEvent=this.unsubscribeFromSpecialEvent.bind(this),this.unsubscribeFromConnect=this.unsubscribeFromConnect.bind(this),this.unsubscribeFromLocalParticipantEvent=this.unsubscribeFromLocalParticipantEvent.bind(this),this.sendChatMessage=this.sendChatMessage.bind(this),this.kickParticipant=this.kickParticipant.bind(this),this.updateParticipant=this.updateParticipant.bind(this),this.muteTrackAsAdmin=this.muteTrackAsAdmin.bind(this),this._updateParticipants=this._updateParticipants.bind(this),this.subscribeToRoomEvent(RoomEvent.ParticipantConnected,this._updateParticipants),this.subscribeToRoomEvent(RoomEvent.ParticipantDisconnected,this._updateParticipants),this.subscribeToRoomEvent(RoomEvent.TrackSubscribed,this._updateParticipants),this.subscribeToRoomEvent(RoomEvent.TrackUnsubscribed,this._updateParticipants),this.subscribeToRoomEvent(RoomEvent.LocalTrackPublished,this._updateParticipants),this.subscribeToRoomEvent(RoomEvent.LocalTrackUnpublished,this._updateParticipants),this.subscribeToRoomEvent(RoomEvent.Disconnected,()=>{this._updateParticipants()}),this.subscribeToRoomEvent(RoomEvent.ParticipantMetadataChanged,(et,nt)=>{if(et!==(nt==null?void 0:nt.metadata)){const ot=JSON.parse(nt==null?void 0:nt.metadata);if(hasPermission(ot==null?void 0:ot.participantRole,Permission.ManageSelf)){if(ot.hasOwnProperty("isMirrored")){const ht={participantId:nt==null?void 0:nt.identity,metadata:ot,type:"ParticipantMetadataUpdate"};this._updateGuestParticipantsStore(ht)}return}}})}bindApiClient(c){this._apiClient=c}get isAdmin(){return jwtDecode(this._jwt).video.roomAdmin}set isAdmin(c){log.warn("isAdmin cannot be set")}get token(){return this._jwt}set token(c){this._jwt=c}get url(){return this._baseUrl}set url(c){}get chatHistory(){return this._chatHistory}set chatHistory(c){this._chatHistory=c}_updateGuestParticipantsStore(c){if(!this.guestParticipantMetadata.length)this.guestParticipantMetadata.push(c);else{const b=this.guestParticipantMetadata.findIndex(_=>_.participantId===(c==null?void 0:c.participantId));b>-1?this.guestParticipantMetadata[b]=c:this.guestParticipantMetadata.push(c)}}_updateParticipants(){if(!this.livekitRoom||this.livekitRoom.state===ConnectionState.Disconnected){this.participants=[];return}else{const c=Array.from(this.livekitRoom.remoteParticipants.values()),b=[this.livekitRoom.localParticipant];b.push(...c),this.guestParticipantMetadata=this.guestParticipantMetadata.filter(_=>b.find($=>($==null?void 0:$.identity)===(_==null?void 0:_.participantId))),this.participants=b}}async kickParticipant(c){if(this._admin)this._admin.removeParticipant(this.roomName,c);else throw new Error("no admin permissions")}updateParticipant(c,b){if(this._admin){const _=JSON.stringify(b);this._admin.updateParticipant(this.roomName,c,_)}else throw new Error("no admin permissions")}muteTrackAsAdmin(c,b=!0){if(this._admin){const _=this.participants.find($=>[...$.audioTrackPublications.values(),...$.videoTrackPublications.values()].find(k=>k.trackSid===c));if(!_){log.warn("Could not find participant for track:",{trackSid:c});return}this._admin.mutePublishedTrack(this.roomName,_==null?void 0:_.identity,c,b)}else throw new Error("no admin permissions")}_appendChat(c,b){const _=decoder$1.decode(c),$=JSON.parse(_),k=b.identity,et=b.name,nt={...$,displayName:et,sender:k};this.chatHistory=[...this.chatHistory,nt],this._triggerSpecialEvents("Chat",nt)}subscribeToConnect(c){return this._connectListeners.push(c),()=>this.unsubscribeFromConnect(c)}unsubscribeFromConnect(c){this._connectListeners=this._connectListeners.filter(b=>b!==c)}subscribeToSpecialEvent(c,b){return this._specialEventListenerRegistry[c]||(this._specialEventListenerRegistry[c]=new Set),this._specialEventListenerRegistry[c].add(b),()=>{this.unsubscribeFromSpecialEvent(c,b)}}unsubscribeFromSpecialEvent(c,b){this._specialEventListenerRegistry[c]||(this._specialEventListenerRegistry[c]=new Set),this._specialEventListenerRegistry[c].delete(b)}_triggerSpecialEvents(c,...b){this._specialEventListenerRegistry[c]||(this._specialEventListenerRegistry[c]=new Set),this._specialEventListenerRegistry[c].forEach(_=>{_(...b)})}async connect(c={}){var b,_;try{if(this.livekitRoom.state==="connected"||this.isConnecting)return;this.isConnecting=!0,await this.livekitRoom.connect(`wss://${this._baseUrl}`,this._jwt,{...c}),this.isConnecting=!1,Object.values(RoomEvent).forEach($=>{this.livekitRoom.on($,(...k)=>{this._roomEventListenerRegistry[$].forEach(et=>{et(...k)})})}),Object.values(ParticipantEvent).forEach($=>{this.livekitRoom.localParticipant.on($,(...k)=>{this._localParticipantEventListenerRegistry[$].forEach(et=>{et(...k)})})}),this._updateParticipants(),this._connectListeners.forEach($=>$(this.livekitRoom)),lib$2.LiveKitUtils.isRoomAdmin(this._jwt)?(log.info("Room: Granting admin permissions"),log.debug("Livekit server: ",(b=this._apiClient)==null?void 0:b.getLiveKitServer(!0)),this._admin=new dist.RoomServiceClient((_=this._apiClient)==null?void 0:_.getLiveKitServer(!0),void 0,void 0,this._jwt)):log.debug("Room: Not an admin")}catch($){this.isConnecting=!1,log.error($)}}subscribeToLocalParticipantEvent(c,b){return this._localParticipantEventListenerRegistry[c]||(this._localParticipantEventListenerRegistry[c]=new Set),this._localParticipantEventListenerRegistry[c].add(b),()=>{this.unsubscribeFromLocalParticipantEvent(c,b)}}unsubscribeFromLocalParticipantEvent(c,b){this._localParticipantEventListenerRegistry[c]||(this._localParticipantEventListenerRegistry[c]=new Set),this._localParticipantEventListenerRegistry[c].delete(b)}subscribeToRoomEvent(c,b){return this._roomEventListenerRegistry[c]||(this._roomEventListenerRegistry[c]=new Set),this._roomEventListenerRegistry[c].add(b),()=>{this.unsubscribeFromRoomEvent(c,b)}}unsubscribeFromRoomEvent(c,b){this._roomEventListenerRegistry[c]||(this._roomEventListenerRegistry[c]=new Set),this._roomEventListenerRegistry[c].delete(b)}sendChatMessage(c){const{message:b,recipients:_,metadata:$}=c;if(!this.livekitRoom||this.livekitRoom.state!=="connected")return;const k={type:"ChatMessage",recipients:_,metadata:$,content:b,timestamp:Date.now()},et=JSON.stringify(k),nt=encoder$1.encode(et);if({...k,sender:this.livekitRoom.localParticipant.identity,displayName:this.livekitRoom.localParticipant.identity},_){const ot=_.map(this.livekitRoom.getParticipantByIdentity);return this.livekitRoom.localParticipant.publishData(nt,{reliable:!0,destinationIdentities:ot.map(ht=>ht.identity)}).then(()=>{this._appendChat(nt,this.livekitRoom.localParticipant)})}else return this.livekitRoom.localParticipant.publishData(nt,{reliable:!0}).then(()=>{this._appendChat(nt,this.livekitRoom.localParticipant)})}}const webrtcManager=new RoomsManager,encoder=new TextEncoder,decoder=new TextDecoder,simpleRooms=new Map,getRoom=a=>{if(!a)return null;if(simpleRooms.get(a))return simpleRooms.get(a);const c=webrtcManager.rooms.get(a);if(!c)return null;const b=c.livekitRoom,_=b==null?void 0:b.localParticipant;window.__StudioRoom=b,_||log.warn("No local participant!");const $={useTracks:new Set,useTrack:new Map,useParticipants:new Set,useParticipant:new Map,useChatHistory:new Set};let k={tracks:[],participants:[],result:{participants:[],tracks:[]},chat:c.chatHistory};const et=()=>{const At=c.participants,Mt=c.guestParticipantMetadata,Dt=At.flatMap(xt=>xt.getTrackPublications().map(Jt=>({...Jt,participant:xt}))),Rt={participants:At.map(xt=>{const Jt=Mt.find(nr=>nr.participantId===xt.identity);if(Jt){let nr=JSON.parse(xt.metadata);nr={...nr,...Jt.metadata},xt.metadata=JSON.stringify(nr)}const ar=JSON.parse(xt.metadata);return{id:xt.identity,isSelf:xt===_,connectionQuality:xt.connectionQuality,displayName:ar.displayName||xt.name,joinedAt:xt.joinedAt,role:ar.participantRole,meta:ar,trackIds:Dt.filter(nr=>nr.participant.sid===xt.sid).map(nr=>nr.trackSid)}}),tracks:Dt.map(xt=>{var ar,nr,pr,ur;const Jt=JSON.parse((ar=xt==null?void 0:xt.participant)==null?void 0:ar.metadata);return{mediaStreamTrack:(nr=xt.track)==null?void 0:nr.mediaStreamTrack,id:xt.trackSid,participantId:(pr=xt.participant)==null?void 0:pr.identity,isMuted:(ur=xt.track)==null?void 0:ur.isMuted,type:xt.source,isExternal:!!(Jt!=null&&Jt[xt.trackSid])}})};k={tracks:Dt,participants:At,result:Rt,chat:c.chatHistory},$.useTracks.forEach(xt=>xt(Rt.tracks)),$.useTrack.forEach((xt,Jt)=>{Jt(ht(xt))}),$.useParticipants.forEach(xt=>xt(Rt.participants)),$.useParticipant.forEach((xt,Jt)=>{Jt(vt(xt))}),$.useChatHistory.forEach(xt=>{xt(k.chat)})},nt=[RoomEvent.ParticipantConnected,RoomEvent.ParticipantDisconnected,RoomEvent.ParticipantMetadataChanged,RoomEvent.Disconnected,RoomEvent.TrackSubscribed,RoomEvent.TrackUnsubscribed,RoomEvent.LocalTrackPublished,RoomEvent.LocalTrackUnpublished,RoomEvent.ConnectionQualityChanged,RoomEvent.TrackMuted,RoomEvent.TrackUnmuted,RoomEvent.TrackStreamStateChanged];c.subscribeToRoomEvent(RoomEvent.DataReceived,(At,Mt,Dt)=>{const Rt=decoder.decode(At);JSON.parse(Rt).type===DataType.ParticipantMetadataUpdate&&et()}),nt.map(At=>c.subscribeToRoomEvent(At,()=>et())).push(c.subscribeToSpecialEvent(SpecialEvent.Chat,et));const ht=At=>k.result.tracks.find(Mt=>Mt.id===At),vt=At=>k.result.participants.find(Mt=>Mt.id===At),_t=(At,Mt)=>{const Dt=_.getTrackPublications().find(Rt=>Rt.trackSid===At);Dt&&(Mt?Dt.mute():Dt.unmute())};let kt,$t;const Tt={id:c.roomName,participantId:_.identity,setTrackEnabled:_t,setCameraEnabled:(At=!0)=>_.setCameraEnabled(At),setMicrophoneEnabled:(At=!0)=>_.setMicrophoneEnabled(At),setCamera:async(At={})=>{var Dt,Rt;if(kt){log.warn("Cannot set camera until previous has resolved");return}kt=!0;let Mt;try{const Jt=_.getTrackPublications().filter(nr=>(nr==null?void 0:nr.source)===Track.Source.Camera).find(nr=>!ht(nr==null?void 0:nr.trackSid).isExternal),ar=await _.createTracks({video:{deviceId:{exact:(Dt=At.deviceId)==null?void 0:Dt.toString()},resolution:At.resolution||{width:1280,height:720,frameRate:30,aspectRatio:16/9}}});Jt!=null&&Jt.isMuted&&ar.forEach(nr=>{nr.mute()}),Mt=await Promise.all(ar.map(nr=>_.publishTrack(nr))),Jt&&_.unpublishTrack(Jt.track)}catch(xt){throw xt}finally{return kt=!1,ht((Rt=Mt[0])==null?void 0:Rt.trackSid)}},setMicrophone:async At=>{var Dt;if($t){log.warn("Cannot set microphone until previous has resolved");return}$t=!0;let Mt;try{const xt=_.getTrackPublications().filter(ar=>ar.source===Track.Source.Microphone).find(ar=>!ht(ar==null?void 0:ar.trackSid).isExternal),Jt=await _.createTracks({audio:At||!0});xt!=null&&xt.isMuted&&Jt.forEach(ar=>{ar.mute()}),Mt=await Promise.all(Jt.map(ar=>_.publishTrack(ar))),xt&&_.unpublishTrack(xt.track)}catch(Rt){throw Rt}finally{return $t=!1,ht((Dt=Mt[0])==null?void 0:Dt.trackSid)}},addMicrophone:async At=>{var Jt;if($t){log.warn("Cannot set microphone until previous has resolved");return}$t=!0;const Mt=await _.createTracks({audio:At||!0}),Rt=_.getTrackPublications().filter(ar=>ar.source===Track.Source.Microphone).find(ar=>{var pr,ur;const nr=ht(ar==null?void 0:ar.trackSid);((ur=(pr=nr==null?void 0:nr.mediaStreamTrack)==null?void 0:pr.getSettings())==null?void 0:ur.deviceId)===At.deviceId&&(nr==null||nr.isExternal)});Rt!=null&&Rt.isMuted&&Mt.forEach(ar=>{ar.mute()});const xt=await Promise.all(Mt.map(ar=>_.publishTrack(ar)));return Rt&&_.unpublishTrack(Rt.track),$t=!1,ht((Jt=xt[0])==null?void 0:Jt.trackSid)},addCamera:async(At={})=>{var xt,Jt;const Mt=await _.createTracks({video:{deviceId:{exact:(xt=At.deviceId)==null?void 0:xt.toString()},resolution:At.resolution||{width:1280,height:720,frameRate:30,aspectRatio:1.7777777777777777}}}),Dt=_.getTrackPublications().find(ar=>{var nr,pr,ur;return(ar==null?void 0:ar.source)===Track.Source.Camera&&((ur=(pr=(nr=ar==null?void 0:ar.track)==null?void 0:nr.mediaStreamTrack)==null?void 0:pr.getSettings())==null?void 0:ur.deviceId)===At.deviceId});Dt!=null&&Dt.isMuted&&Mt.forEach(ar=>{ar.mute()});const Rt=await Promise.all(Mt.map(ar=>_.publishTrack(ar)));return Dt&&_.unpublishTrack(Dt.track),$t=!1,ht((Jt=Rt[0])==null?void 0:Jt.trackSid)},addScreen:async(At={audio:!1})=>{const Mt=await _.createScreenTracks(At),Dt=await Promise.all(Mt.map(Jt=>_.publishTrack(Jt))),Rt=Dt.find(Jt=>Jt.kind==="video"),xt=Dt.find(Jt=>Jt.kind==="audio");return{screen:ht(Rt==null?void 0:Rt.trackSid),audio:ht(xt==null?void 0:xt.trackSid)}},removeTrack:async At=>{const Mt=k.tracks.find(Dt=>Dt.trackSid===At);_.unpublishTrack(Mt.track)},setLocalParticipantMetadata:async(At,Mt)=>{const Dt=JSON.stringify(Mt),Rt=encoder.encode(JSON.stringify({metadata:Mt,type:DataType.ParticipantMetadataUpdate,participantId:At}));return _.setMetadata(Dt),await _.publishData(Rt,{reliable:!0})},setParticipantMetadata:(At,Mt)=>c.updateParticipant(At,Mt),kickParticipant:c.kickParticipant,muteTrackAsAdmin:c.muteTrackAsAdmin,sendChatMessage:c.sendChatMessage,getTracks:()=>k.result.tracks,useTracks:At=>($.useTracks.add(At),At(k.result.tracks),()=>{$.useTracks.delete(At)}),getTrack:ht,useTrack:(At,Mt)=>($.useTrack.set(Mt,At),Mt(ht(At)),()=>{$.useTrack.delete(Mt)}),getParticipant:vt,getParticipants:()=>k.result.participants,useParticipants:At=>($.useParticipants.add(At),At(k.result.participants),()=>{$.useParticipants.delete(At)}),useParticipant:(At,Mt)=>($.useParticipant.set(Mt,At),Mt(vt(At)),()=>{$.useTrack.delete(Mt)}),useChatHistory:At=>($.useChatHistory.add(At),At(k.chat),()=>{$.useChatHistory.delete(At)}),useActiveSpeakers:At=>{var Dt,Rt;const Mt=xt=>{At(xt.map(Jt=>Jt.identity))};return(Dt=c.livekitRoom)==null||Dt.on(RoomEvent.ActiveSpeakersChanged,Mt),Mt((Rt=c.livekitRoom)==null?void 0:Rt.activeSpeakers),()=>{var xt;(xt=c.livekitRoom)==null||xt.off(RoomEvent.ActiveSpeakersChanged,Mt)}},sendData:(At,Mt=[])=>{const Dt=encoder.encode(JSON.stringify(At)),Rt=Mt==null?void 0:Mt.map(xt=>{var Jt;return(Jt=c.livekitRoom)==null?void 0:Jt.getParticipantByIdentity(xt)}).filter(Boolean);return _.publishData(Dt,{reliable:!0,destinationIdentities:Rt.map(xt=>xt.identity)})},onData:At=>{var Dt;const Mt=(Rt,xt)=>{const Jt=JSON.parse(decoder.decode(Rt));At(Jt,xt==null?void 0:xt.identity)};return(Dt=c.livekitRoom)==null||Dt.on(RoomEvent.DataReceived,Mt),()=>{var Rt;(Rt=c.livekitRoom)==null||Rt.off(RoomEvent.DataReceived,Mt)}},connect:()=>c.connect(),disconnect:()=>{var At;return(At=c.livekitRoom)==null?void 0:At.disconnect()},onDisconnected:At=>{var Mt;return(Mt=c.livekitRoom)==null||Mt.on(RoomEvent.Disconnected,At),()=>{var Dt;(Dt=c.livekitRoom)==null||Dt.off(RoomEvent.DataReceived,At)}},setAudioOutput:At=>{var Mt;return(Mt=c.livekitRoom)==null?void 0:Mt.switchActiveDevice("audiooutput",At)}};return et(),simpleRooms.set(a,Tt),Tt},{state:state$1}=CoreContext,getAccessTokenData=()=>{var a;return((a=CoreContext.clients.accessTokenClaims)==null?void 0:a.user)||{}},getBaseUser=()=>state$1.user?{id:state$1.user.id,props:state$1.user.props,name:state$1.user.name,projects:state$1.projects.map(toBaseProject),sources:state$1.sources.map(toBaseSource)}:null,toBaseProject=a=>{const{compositor:c,videoApi:b,props:_={},role:$}=a,{destinations:k,encoding:et,rendering:nt,sources:ot}=b.project,ht={get:c.get,getRoot:c.getRoot,getParent:c.getParent};Object.defineProperty(ht,"nodes",{get(){return c.nodes.filter(kt=>!kt._deleted)}});const vt=a.videoApi.phase,_t=a.videoApi.broadcastId||null;return{broadcastPhase:vt,role:$,broadcastId:_t,layoutId:a.layoutApi.layoutId,isLive:[ProjectBroadcastPhase.PROJECT_BROADCAST_PHASE_RUNNING,ProjectBroadcastPhase.PROJECT_BROADCAST_PHASE_STOPPING].includes(vt),scene:ht,joinRoom:async(kt={})=>CoreContext.Command.joinRoom({projectId:a.id,...kt}),subscribe:kt=>CoreContext.subscribe(($t,Tt)=>{Tt.projectId&&(Tt==null?void 0:Tt.projectId)===a.id&&kt($t,Tt)}),destinations:k.map(toBaseDestination),sources:ot.map(toBaseSource),encoding:et,rendering:nt,id:a.id,hostDisplayName:a.props.hostDisplayName,props:_}},toBaseDestination=a=>{var c;return{id:a.destinationId,enabled:a.enabled,address:a.address,props:((c=a.metadata)==null?void 0:c.props)||(a==null?void 0:a.metadata)||{}}},toBaseSource=a=>{var c;return{id:a.sourceId,address:a.address,preview:a.preview,props:((c=a.metadata)==null?void 0:c.props)||{}}},hydrateProject=async(a,c,b)=>{const _=a.metadata||{},$={collectionId:a.collectionId,projectId:a.projectId,updateMask:[]};hasPermission(c,Permission.ManageBroadcast)&&a.composition.studioSdk.version!==CoreContext.rendererVersion&&($.composition={studioSdk:{version:CoreContext.rendererVersion}},$.updateMask.push("composition.studioSdk.version")),b&&($.rendering={video:{width:b.x,height:b.y,framerate:30}},$.updateMask.push("rendering")),$.updateMask.length&&await CoreContext.clients.LiveApi().project.updateProject($);const et=await layoutToProject(_.layoutId,b);return{id:a.projectId,compositor:et,role:c,videoApi:{project:a,phase:ProjectBroadcastPhase.PROJECT_BROADCAST_PHASE_UNSPECIFIED},layoutApi:{layoutId:_.layoutId},props:(_==null?void 0:_.props)||_}},sceneNodeToLayer=a=>{const{id:c,props:b={},children:_=[]}=a;return{...c?{id:c}:{},type:b.type,data:{...b},children:_.map($=>$.id)}},nodeToLayer=a=>({id:a.id,type:a.props.type,data:{...a.props},children:a.childIds.map(c=>c)}),layerToNode=a=>({id:String(a.id),props:{type:a.type,...a.data},childIds:a.children.map(c=>String(c))}),layoutToProject=async(a,c)=>{const{layers:b}=await CoreContext.clients.LayoutApi().layer.listLayers({layoutId:a});if(c&&b){const{x:et,y:nt}=c,ot=b==null?void 0:b.reduce((ht,vt)=>ht?ht.data.isRoot?ht:vt.data.isRoot||!b.some(_t=>_t.children.includes(vt.id))?vt:ht:vt,null);if(ot){const ht=await CoreContext.clients.LayoutApi().layer.updateLayer({layoutId:ot.layoutId,layerId:ot.id,layer:{x:et,y:nt,data:{...ot.data,size:{x:et,y:nt}}}}),vt=b.findIndex(_t=>_t.id===ht.id);b[vt]=ht}}const _=b.map(layerToNode),$=_.reduce((et,nt)=>et?et.props.isRoot?et:nt.props.isRoot||!_.some(ot=>ot.childIds.includes(nt.id))?nt:et:nt,null),k=$?toSceneTree(_,$.id):null;return CoreContext.compositor.loadProject(k,a)},getUser=()=>{const a=state$1.user;if(!a)throw new Error("User not loaded");return a},getProject=a=>state$1.projects.find(c=>c.id===a),getProjectByLayoutId=a=>state$1.projects.find(c=>c.compositor.id===a),getProjectRoom=a=>{var c;return getRoom((c=getProject(a))==null?void 0:c.roomId)},{connectionId}=CoreContext,latestUpdateVersion={},getNextNodeVersion=a=>(latestUpdateVersion[a]||(latestUpdateVersion[a]=0),++latestUpdateVersion[a]),request=(a,c)=>{const b=c.map(_=>{const[$,k]=_;return{[$]:k}});return log.debug("Batch request",b),CoreContext.clients.LayoutApi().layer.batch({layoutId:a,layers:b,requestMetadata:{connectionId,layoutId:a,updateVersions:c.filter(([_])=>_==="update").map(([_,$])=>({[$.id]:getNextNodeVersion($.id)})).reduce((_,$)=>({...$,..._}),{})}})},compositorAdapter=(a,c)=>({async insert(b={},_,$){const k=nodeToLayer({id:null,props:b,childIds:[]});_?k.type="child":k.type="root",log.debug("Insert layer",k);const et=await CoreContext.clients.LayoutApi().layer.createLayer({layoutId:a,layer:{...k,requestMetadata:{connectionId,layoutId:a}}});if(et.code)throw new Error(et.message);const nt=await c.get(_);if(_&&!nt)throw Error("Parent not found with ID");if(nt){const ot=nodeToLayer(nt),ht=insertAt$1($,et.id,ot.children),vt={layoutId:a,layerId:ot.id,layer:{children:ht,requestMetadata:{connectionId,layoutId:a,updateVersion:{[k.id]:getNextNodeVersion(k.id)}}}};await CoreContext.clients.LayoutApi().layer.updateLayer(vt)}return String(et.id)},async update(b,_={}){const $=c.get(b),k=nodeToLayer({...$,props:{...$.props,..._}}),et={layoutId:a,layerId:k.id,layer:{...k,requestMetadata:{connectionId,layoutId:a,updateVersions:{[k.id]:getNextNodeVersion(k.id)}}}};log.debug("Update layer",et),await CoreContext.clients.LayoutApi().layer.updateLayer(et)},async remove(b){const _=await c.getParent(b);if(_){const $=nodeToLayer(_),k=$.children.filter(nt=>nt!==b),et={layoutId:a,layerId:$.id,layer:{children:k,requestMetadata:{connectionId,layoutId:a,updateVersions:{[$.id]:getNextNodeVersion($.id)}}}};await CoreContext.clients.LayoutApi().layer.updateLayer(et)}await CoreContext.clients.LayoutApi().layer.deleteLayer({layoutId:a,layerId:b,payload:{requestMetadata:{connectionId,layoutId:a}}})},async reorder(b,_){const $=c.get(b),k=nodeToLayer({...$,childIds:_});log.debug("Reorder layer children",k),await CoreContext.clients.LayoutApi().layer.updateLayer({layoutId:a,layerId:k.id,layer:{children:k.children,requestMetadata:{connectionId,layoutId:a,updateVersions:{[k.id]:getNextNodeVersion(k.id)}}}})},async move(b,_,$){const k=c.get(b),et=c.get(c.getParent(b).id),nt=nodeToLayer({...et,childIds:pull$1(et.childIds,k.id)}),ot=c.get(_),ht=nodeToLayer({...ot,childIds:insertAt$1($,k.id,ot.childIds)});log.debug("Move layers"),await Promise.all([CoreContext.clients.LayoutApi().layer.updateLayer({layoutId:a,layerId:nt.id,layer:{children:nt.children,requestMetadata:{connectionId,layoutId:a,updateVersions:{[nt.id]:getNextNodeVersion(nt.id)}}}}),CoreContext.clients.LayoutApi().layer.updateLayer({layoutId:a,layerId:ht.id,layer:{children:ht.children,requestMetadata:{connectionId,layoutId:a,updateVersions:{[ht.id]:getNextNodeVersion(ht.id)}}}})])},async batch(b){try{const _=b.map(([k,et])=>[k,sceneNodeToLayer(et)]),$=await request(a,_);return log.debug("Batch response",$),$}catch(_){log.error("Batch error",_)}}}),{state}=CoreContext,prepareInternalEvents=()=>{subscribeInternal(async(a,c)=>{var b,_,$;switch(a){case"UserChanged":{const{metadata:k}=c;state.user.metadata=k||{},state.user.props=(k==null?void 0:k.props)||{},trigger$1("UserChanged",{user:getBaseUser()});return}case"ActiveProjectChanged":{const{projectId:k}=c;state.activeProjectId=k,trigger$1("ActiveProjectChanged",{projectId:k});return}case"ProjectAdded":{const et=await hydrateProject(c,"ROLE_HOST"),nt=toBaseProject(et);state.projects=[...state.projects,et],trigger$1("ProjectAdded",{project:nt});return}case"ProjectRemoved":{const{projectId:k}=c;state.projects=state.projects.filter(et=>et.id!==k),trigger$1("ProjectRemoved",{projectId:k});return}case"ProjectChanged":{const{project:k,phase:et,broadcastId:nt}=c,ot=getProject(k.projectId);if(!ot)return;et&&(ot.videoApi.phase=et),typeof nt<"u"&&(ot.videoApi.broadcastId=nt);const ht=(b=k.metadata)==null?void 0:b.layoutId;ht!==ot.layoutApi.layoutId&&(ot.layoutApi.layoutId=(_=k.metadata)==null?void 0:_.layoutId,ot.compositor=await layoutToProject(ht)),ot.videoApi.project=k,ot.props=(($=k.metadata)==null?void 0:$.props)??{},trigger$1("ProjectChanged",{project:toBaseProject(ot)});return}case"DestinationAdded":{const{projectId:k}=c,et=getProject(k);if(!et)return;et.videoApi.project.destinations.push(c),trigger$1("DestinationAdded",{projectId:k,destination:toBaseDestination(c)});return}case"DestinationRemoved":{const{projectId:k,destinationId:et}=c,nt=getProject(k);if(!nt)return;nt.videoApi.project.destinations=nt.videoApi.project.destinations.filter(ot=>ot.destinationId!==et),trigger$1("DestinationRemoved",{projectId:k,destinationId:et});return}case"DestinationChanged":{const k=c,{projectId:et,destinationId:nt}=k,ot=getProject(et);if(!ot)return;const ht=ot.videoApi.project.destinations.find(vt=>vt.destinationId===nt);if(!ht)return;Object.assign(ht,k),trigger$1("DestinationChanged",{projectId:et,destination:toBaseDestination(ht)});return}case"SourceAdded":{trigger$1("SourceAdded",{source:toBaseSource(c)});return}case"SourceRemoved":return;case"SourceChanged":return;case"ProjectSourceAdded":{const{projectId:k,source:et}=c,nt=getProject(k);if(!nt)return;nt.videoApi.project.sources.push(et),trigger$1("ProjectSourceAdded",{source:toBaseSource(et),projectId:k});return}case"ProjectSourceRemoved":{const{projectId:k,sourceId:et}=c,nt=getProject(k);if(!nt)return;nt.videoApi.project.sources=nt.videoApi.project.sources.filter(ot=>ot.sourceId!==et),trigger$1("ProjectSourceRemoved",{sourceId:et,projectId:k})}case"NodeAdded":return;case"NodeRemoved":return;case"NodeChanged":return}}),subscribeInternal(()=>log.debug({nextState:{...state}}))};/*! (c) Andrea Giammarchi - ISC */var self$1={};try{self$1.WeakMap=WeakMap}catch(a){self$1.WeakMap=function(c,b){var _=b.defineProperty,$=b.hasOwnProperty,k=et.prototype;return k.delete=function(ot){return this.has(ot)&&delete ot[this._]},k.get=function(ot){return this.has(ot)?ot[this._]:void 0},k.has=function(ot){return $.call(ot,this._)},k.set=function(ot,ht){return _(ot,this._,{configurable:!0,value:ht}),this},et;function et(ot){_(this,"_",{value:"_@ungap/weakmap"+c++}),ot&&ot.forEach(nt,this)}function nt(ot){this.set(ot[0],ot[1])}}(Math.random(),Object)}const WeakMap$1=self$1.WeakMap;/*! (c) Andrea Giammarchi - ISC */var UID="-"+Math.random().toFixed(6)+"%",UID_IE=!1;try{(function(a,c,b){return c in a&&(a.innerHTML="<p "+b+'="'+UID+'"></p>',a[c].childNodes[0].getAttribute(b)==UID)})(document.createElement("template"),"content","tabindex")||(UID="_dt: "+UID.slice(1,-1)+";",UID_IE=!0)}catch(a){}var UIDC="<!--"+UID+"-->",COMMENT_NODE=8,ELEMENT_NODE$1=1,TEXT_NODE=3,SHOULD_USE_TEXT_CONTENT=/^(?:plaintext|script|style|textarea|title|xmp)$/i,VOID_ELEMENTS=/^(?:area|base|br|col|embed|hr|img|input|keygen|link|menuitem|meta|param|source|track|wbr)$/i;/*! (c) Andrea Giammarchi - ISC */function domsanitizer(a){return a.join(UIDC).replace(selfClosing,fullClosing).replace(attrSeeker,attrReplacer)}var spaces=" \\f\\n\\r\\t",almostEverything="[^"+spaces+`\\/>"'=]+`,attrName="["+spaces+"]+"+almostEverything,tagName="<([A-Za-z]+[A-Za-z0-9:._-]*)((?:",attrPartials=`(?:\\s*=\\s*(?:'[^']*?'|"[^"]*?"|<[^>]*?>|`+almostEverything.replace("\\/","")+"))?)",attrSeeker=new RegExp(tagName+attrName+attrPartials+"+)(["+spaces+"]*/?>)","g"),selfClosing=new RegExp(tagName+attrName+attrPartials+"*)(["+spaces+"]*/>)","g"),findAttributes=new RegExp("("+attrName+`\\s*=\\s*)(['"]?)`+UIDC+"\\2","gi");function attrReplacer(a,c,b,_){return"<"+c+b.replace(findAttributes,replaceAttributes)+_}function replaceAttributes(a,c,b){return c+(b||'"')+UID+(b||'"')}function fullClosing(a,c,b){return VOID_ELEMENTS.test(c)?a:"<"+c+b+"></"+c+">"}const{isArray}=Array,{indexOf,slice}=[],umap=a=>({get:c=>a.get(c),set:(c,b)=>(a.set(c,b),b)}),ELEMENT_NODE=1,nodeType=111,remove=({firstChild:a,lastChild:c})=>{const b=document.createRange();return b.setStartAfter(a),b.setEndAfter(c),b.deleteContents(),a},diffable=(a,c)=>a.nodeType===nodeType?1/c<0?c?remove(a):a.lastChild:c?a.valueOf():a.firstChild:a,persistent=a=>{const{childNodes:c}=a,{length:b}=c;if(b<2)return b?c[0]:a;const _=slice.call(c,0),$=_[0],k=_[b-1];return{ELEMENT_NODE,nodeType,firstChild:$,lastChild:k,valueOf(){if(c.length!==b){let et=0;for(;et<b;)a.appendChild(_[et++])}return a}}};/*! (c) Andrea Giammarchi - ISC */var createContent=function(a){var c="fragment",b="template",_="content"in et(b),$=_?function(ot){var ht=et(b);return ht.innerHTML=ot,ht.content}:function(ot){var ht=et(c),vt=et(b),_t=null;if(/^[^\S]*?<(col(?:group)?|t(?:head|body|foot|r|d|h))/i.test(ot)){var kt=RegExp.$1;vt.innerHTML="<table>"+ot+"</table>",_t=vt.querySelectorAll(kt)}else vt.innerHTML=ot,_t=vt.childNodes;return k(ht,_t),ht};return function(ht,vt){return(vt==="svg"?nt:$)(ht)};function k(ot,ht){for(var vt=ht.length;vt--;)ot.appendChild(ht[0])}function et(ot){return ot===c?a.createDocumentFragment():a.createElementNS("http://www.w3.org/1999/xhtml",ot)}function nt(ot){var ht=et(c),vt=et("div");return vt.innerHTML='<svg xmlns="http://www.w3.org/2000/svg">'+ot+"</svg>",k(ht,vt.firstChild.childNodes),ht}}(document);const udomdiff=(a,c,b,_,$)=>{const k=b.length;let et=c.length,nt=k,ot=0,ht=0,vt=null;for(;ot<et||ht<nt;)if(et===ot){const _t=nt<k?ht?_(b[ht-1],-0).nextSibling:_(b[nt-ht],0):$;for(;ht<nt;)a.insertBefore(_(b[ht++],1),_t)}else if(nt===ht)for(;ot<et;)(!vt||!vt.has(c[ot]))&&a.removeChild(_(c[ot],-1)),ot++;else if(c[ot]===b[ht])ot++,ht++;else if(c[et-1]===b[nt-1])et--,nt--;else if(c[ot]===b[nt-1]&&b[ht]===c[et-1]){const _t=_(c[--et],-1).nextSibling;a.insertBefore(_(b[ht++],1),_(c[ot++],-1).nextSibling),a.insertBefore(_(b[--nt],1),_t),c[et]=b[nt]}else{if(!vt){vt=new Map;let _t=ht;for(;_t<nt;)vt.set(b[_t],_t++)}if(vt.has(c[ot])){const _t=vt.get(c[ot]);if(ht<_t&&_t<nt){let kt=ot,$t=1;for(;++kt<et&&kt<nt&&vt.get(c[kt])===_t+$t;)$t++;if($t>_t-ht){const Tt=_(c[ot],0);for(;ht<_t;)a.insertBefore(_(b[ht++],1),Tt)}else a.replaceChild(_(b[ht++],1),_(c[ot++],-1))}else ot++}else a.removeChild(_(c[ot++],-1))}return b};/*! (c) Andrea Giammarchi - ISC */var importNode=function(a,c,b,_,$){var k=$ in a,et=a.createDocumentFragment();et[c](a[_]("g")),et[c](a[_](""));var nt=k?a[$](et,!0):et[b](!0);return nt.childNodes.length<2?function ot(ht,vt){for(var _t=ht[b](),kt=ht.childNodes||[],$t=kt.length,Tt=0;vt&&Tt<$t;Tt++)_t[c](ot(kt[Tt],vt));return _t}:k?a[$]:function(ot,ht){return ot[b](!!ht)}}(document,"appendChild","cloneNode","createTextNode","importNode"),trim="".trim||function(){return String(this).replace(/^\s+|\s+/g,"")},normalizeAttributes=UID_IE?function(a,c){var b=c.join(" ");return c.slice.call(a,0).sort(function(_,$){return b.indexOf(_.name)<=b.indexOf($.name)?-1:1})}:function(a,c){return c.slice.call(a,0)};function find(a,c){for(var b=c.length,_=0;_<b;)a=a.childNodes[c[_++]];return a}function parse(a,c,b,_){for(var $=a.childNodes,k=$.length,et=0;et<k;){var nt=$[et];switch(nt.nodeType){case ELEMENT_NODE$1:var ot=_.concat(et);parseAttributes(nt,c,b,ot),parse(nt,c,b,ot);break;case COMMENT_NODE:var ht=nt.textContent;if(ht===UID)b.shift(),c.push(SHOULD_USE_TEXT_CONTENT.test(a.nodeName)?Text(a,_):Any(nt,_.concat(et)));else switch(ht.slice(0,2)){case"/*":if(ht.slice(-2)!=="*/")break;case"":a.removeChild(nt),et--,k--}break;case TEXT_NODE:SHOULD_USE_TEXT_CONTENT.test(a.nodeName)&&trim.call(nt.textContent)===UIDC&&(b.shift(),c.push(Text(a,_)));break}et++}}function parseAttributes(a,c,b,_){for(var $=a.attributes,k=[],et=[],nt=normalizeAttributes($,b),ot=nt.length,ht=0;ht<ot;){var vt=nt[ht++],_t=vt.value===UID,kt;if(_t||1<(kt=vt.value.split(UIDC)).length){var $t=vt.name;if(k.indexOf($t)<0){k.push($t);var Tt=b.shift().replace(_t?/^(?:|[\S\s]*?\s)(\S+?)\s*=\s*('|")?$/:new RegExp("^(?:|[\\S\\s]*?\\s)("+$t+`)\\s*=\\s*('|")[\\S\\s]*`,"i"),"$1"),At=$[Tt]||$[Tt.toLowerCase()];if(_t)c.push(Attr(At,_,Tt,null));else{for(var Mt=kt.length-2;Mt--;)b.shift();c.push(Attr(At,_,Tt,kt))}}et.push(vt)}}ot=et.length,ht=0;for(var Dt=0<ot&&UID_IE&&!("ownerSVGElement"in a);ht<ot;){var Rt=et[ht++];Dt&&(Rt.value=""),a.removeAttribute(Rt.name)}var xt=a.nodeName;if(/^script$/i.test(xt)){var Jt=document.createElement(xt);for(ot=$.length,ht=0;ht<ot;)Jt.setAttributeNode($[ht++].cloneNode(!0));Jt.textContent=a.textContent,a.parentNode.replaceChild(Jt,a)}}function Any(a,c){return{type:"any",node:a,path:c}}function Attr(a,c,b,_){return{type:"attr",node:a,path:c,name:b,sparse:_}}function Text(a,c){return{type:"text",node:a,path:c}}var parsed=umap(new WeakMap$1);function createInfo(a,c){var b=(a.convert||domsanitizer)(c),_=a.transform;_&&(b=_(b));var $=createContent(b,a.type);cleanContent($);var k=[];return parse($,k,c.slice(0),[]),{content:$,updates:function(et){for(var nt=[],ot=k.length,ht=0,vt=0;ht<ot;){var _t=k[ht++],kt=find(et,_t.path);switch(_t.type){case"any":nt.push({fn:a.any(kt,[]),sparse:!1});break;case"attr":var $t=_t.sparse,Tt=a.attribute(kt,_t.name,_t.node);$t===null?nt.push({fn:Tt,sparse:!1}):(vt+=$t.length-2,nt.push({fn:Tt,sparse:!0,values:$t}));break;case"text":nt.push({fn:a.text(kt),sparse:!1}),kt.textContent="";break}}return ot+=vt,function(){var At=arguments.length;if(ot!==At-1)throw new Error(At-1+" values instead of "+ot+`
`+c.join("${value}"));for(var Mt=1,Dt=1;Mt<At;){var Rt=nt[Mt-Dt];if(Rt.sparse){var xt=Rt.values,Jt=xt[0],ar=1,nr=xt.length;for(Dt+=nr-2;ar<nr;)Jt+=arguments[Mt++]+xt[ar++];Rt.fn(Jt)}else Rt.fn(arguments[Mt++])}return et}}}}function createDetails(a,c){var b=parsed.get(c)||parsed.set(c,createInfo(a,c));return b.updates(importNode.call(document,b.content,!0))}var empty=[];function domtagger(a){var c=empty,b=cleanContent;return function(_){return c!==_&&(b=createDetails(a,c=_)),b.apply(null,arguments)}}function cleanContent(a){for(var c=a.childNodes,b=c.length;b--;){var _=c[b];_.nodeType!==1&&trim.call(_.textContent).length===0&&a.removeChild(_)}}/*! (c) Andrea Giammarchi - ISC */var hyperStyle=function(){var a=/acit|ex(?:s|g|n|p|$)|rph|ows|mnc|ntw|ine[ch]|zoo|^ord/i,c=/([^A-Z])([A-Z]+)/g;return function(nt,ot){return"ownerSVGElement"in nt?_(nt,ot):k(nt.style,!1)};function b(et,nt,ot){return nt+"-"+ot.toLowerCase()}function _(et,nt){var ot;return nt?ot=nt.cloneNode(!0):(et.setAttribute("style","--hyper:style;"),ot=et.getAttributeNode("style")),ot.value="",et.setAttributeNode(ot),k(ot,!0)}function $(et){var nt,ot=[];for(nt in et)ot.push(nt.replace(c,b),":",et[nt],";");return ot.join("")}function k(et,nt){var ot,ht;return function(vt){var _t,kt,$t,Tt;switch(typeof vt){case"object":if(vt){if(ot==="object"){if(!nt&&ht!==vt)for(kt in ht)kt in vt||(et[kt]="")}else nt?et.value="":et.cssText="";_t=nt?{}:et;for(kt in vt)Tt=vt[kt],$t=typeof Tt=="number"&&!a.test(kt)?Tt+"px":Tt,!nt&&/^--/.test(kt)?_t.setProperty(kt,$t):_t[kt]=$t;ot="object",nt?et.value=$(ht=_t):ht=vt;break}default:ht!=vt&&(ot="string",ht=vt,nt?et.value=vt||"":et.cssText=vt||"");break}}}}();const aria=a=>c=>{for(const b in c){const _=b==="role"?b:`aria-${b}`,$=c[b];$==null?a.removeAttribute(_):a.setAttribute(_,$)}},attribute=(a,c)=>{let b,_=!0;const $=document.createAttributeNS(null,c);return k=>{b!==k&&(b=k,b==null?_||(a.removeAttributeNode($),_=!0):($.value=k,_&&(a.setAttributeNodeNS($),_=!1)))}},boolean=(a,c,b)=>_=>{b!==!!_&&((b=!!_)?a.setAttribute(c,""):a.removeAttribute(c))},data=({dataset:a})=>c=>{for(const b in c){const _=c[b];_==null?delete a[b]:a[b]=_}},event=(a,c)=>{let b,_=c.slice(2);return!(c in a)&&c.toLowerCase()in a&&(_=_.toLowerCase()),$=>{const k=isArray($)?$:[$,!1];b!==k[0]&&(b&&a.removeEventListener(_,b,k[1]),(b=k[0])&&a.addEventListener(_,b,k[1]))}},ref=a=>c=>{typeof c=="function"?c(a):c.current=a},setter=(a,c)=>c==="dataset"?data(a):b=>{a[c]=b},hyperProperty=(a,c)=>{let b;return _=>{b!==_&&(b=_,a[c]!==_&&(_==null?(a[c]="",a.removeAttribute(c)):a[c]=_))}},readOnly=/^(?:form|list)$/i,text=(a,c)=>a.ownerDocument.createTextNode(c);function Tagger(a){return this.type=a,domtagger(this)}Tagger.prototype={attribute(a,c,b){const _=this.type==="svg";switch(c){case"class":if(_)return attribute(a,c);c="className";case"props":return setter(a,c);case"aria":return aria(a);case"style":return hyperStyle(a,b,_);case"ref":return ref(a);case".dataset":return data(a);default:return c.slice(0,1)==="."?setter(a,c.slice(1)):c.slice(0,1)==="?"?boolean(a,c.slice(1)):c.slice(0,2)==="on"?event(a,c):c in a&&!(_||readOnly.test(c))?hyperProperty(a,c):attribute(a,c)}},any(a,c){const{type:b}=this;let _=!1,$;const k=et=>{switch(typeof et){case"string":case"number":case"boolean":_?$!==et&&($=et,c[0].textContent=et):(_=!0,$=et,c=udomdiff(a.parentNode,c,[text(a,et)],diffable,a));break;case"function":k(et(a));break;case"object":case"undefined":if(et==null){_=!1,c=udomdiff(a.parentNode,c,[],diffable,a);break}default:if(_=!1,$=et,isArray(et))if(et.length===0)c.length&&(c=udomdiff(a.parentNode,c,[],diffable,a));else switch(typeof et[0]){case"string":case"number":case"boolean":k(String(et));break;case"function":k(et.map(invoke,a));break;case"object":isArray(et[0])&&(et=et.concat.apply([],et));default:c=udomdiff(a.parentNode,c,et,diffable,a);break}else"ELEMENT_NODE"in et?c=udomdiff(a.parentNode,c,et.nodeType===11?slice.call(et.childNodes):[et],diffable,a):"text"in et?k(String(et.text)):"any"in et?k(et.any):"html"in et?c=udomdiff(a.parentNode,c,slice.call(createContent([].concat(et.html).join(""),b).childNodes),diffable,a):"length"in et&&k(slice.call(et));break}};return k},text(a){let c;const b=_=>{if(c!==_){c=_;const $=typeof _;$==="object"&&_?"text"in _?b(String(_.text)):"any"in _?b(_.any):"html"in _?b([].concat(_.html).join("")):"length"in _&&b(slice.call(_).join("")):$==="function"?b(_(a)):a.textContent=_??""}};return b}};function invoke(a){return a(this)}const{create,freeze,keys}=Object,cache=umap(new WeakMap$1),createRender=a=>({html:outer("html",a),svg:outer("svg",a),render(c,b){const _=typeof b=="function"?b():b,$=cache.get(c)||cache.set(c,createCache()),k=_ instanceof LighterHole?unroll(a,$,_):_;return k!==$.wire&&($.wire=k,c.textContent="",c.appendChild(k.valueOf())),c}}),createCache=()=>({stack:[],entry:null,wire:null}),outer=(a,c)=>{const b=umap(new WeakMap$1),_=k=>function(){return unroll(c,k,$.apply(null,arguments))};return $.for=(k,et)=>{const nt=b.get(k)||b.set(k,create(null));return nt[et]||(nt[et]=_(createCache()))},$.node=function(){return unroll(c,createCache(),$.apply(null,arguments)).valueOf()},$;function $(){return new LighterHole(a,tta.apply(null,arguments))}},unroll=(a,c,{type:b,template:_,values:$})=>{const{length:k}=$;unrollValues(a,c,$,k);let{entry:et}=c;if(!et||et.template!==_||et.type!==b){const nt=new a(b);c.entry=et={type:b,template:_,tag:nt,wire:persistent(nt(_,...$))}}else et.tag(_,...$);return et.wire},unrollValues=(a,{stack:c},b,_)=>{for(let $=0;$<_;$++){const k=b[$];k instanceof Hole?b[$]=unroll(a,c[$]||(c[$]=createCache()),k):isArray(k)?unrollValues(a,c[$]||(c[$]=createCache()),k,k.length):c[$]=null}_<c.length&&c.splice(_)};freeze(LighterHole);function LighterHole(a,c){this.type=a,this.template=c.shift(),this.values=c}const Hole=LighterHole,{render:render$1,html,svg}=createRender(Tagger);function tta(){let a=[],c=0,{length:b}=arguments;for(;c<b;)a.push(arguments[c++]);return a}const calculateZIndex=(a,c,b)=>{var $,k,et;if(!a||!("type"in a)||a.type!=="image-iframe-overlay")return b+1;const _=(k=($=CoreContext.compositor.getNode(c.id.split("-")[0]))==null?void 0:$.props)==null?void 0:k.id;return!_||!((et=a.order)!=null&&et.includes(_))?b+1:a.order.length-a.order.indexOf(_)},getPresetStyle=a=>{const b=getProject(CoreContext.state.activeProjectId).compositor.getRoot(),{x:_,y:$}=b.props.size,k=1,et=507*k/_*100,nt=153*k/$*100,ot={position:"absolute",width:`${et}%`,height:`${nt}%`};switch(a){case"center":return{top:0,left:0,right:0,bottom:0,margin:"auto",...ot};case"top-left":return{top:0,left:0,...ot};case"top-right":return{top:0,right:0,...ot};case"top-center":return{top:0,left:"50%",transform:"translateX(-50%)",...ot};case"bottom-left":return{bottom:0,left:0,...ot};case"bottom-right":return{bottom:0,right:0,...ot};case"bottom-center":return{bottom:0,left:"50%",transform:"translateX(-50%)",...ot};case"center-left":return{top:"50%",left:0,transform:"translateY(-50%)",...ot};case"center-right":return{top:"50%",right:0,transform:"translateY(-50%)",...ot}}},Free={name:"Free",layout:({props:a,children:c,size:b})=>c.reduce((_,$)=>{const{size:k={x:"100%",y:"100%"},position:et={x:0,y:0},opacity:nt=1}=$.props;return{..._,[$.id]:{position:{x:et.x,y:et.y},size:{x:k.x,y:k.y},opacity:nt}}},{})},Column={name:"Column",layout:({props:a={},children:c,size:b})=>{let{justify:_="center",align:$="center",cover:k=!1,margin:et={},dimensions:nt=16/9,reverse:ot=!1,entryTransition:ht=()=>({}),exitTransition:vt=()=>({})}=a;const _t=k?0:Math.min(b.y/6,12);et={left:_t,right:_t,top:_t,bottom:_t,between:_t,...et};const kt=b.y-et.top-et.bottom,$t=b.x-et.left-et.right,Tt=et.between*((c.length||1)-1),At=Math.min($t,(kt-Tt)/(c.length||1)*nt),Mt=At/nt;return html.node`
      <div style=${{height:"100%",width:k?b.x+"px":"auto",display:"flex",flexDirection:ot?"column-reverse":"column",justifyContent:_,alignItems:$,paddingLeft:et.left+"px",paddingTop:et.top+"px",paddingBottom:et.bottom+"px",paddingRight:et.right+"px"}}>
      ${c.map((Dt,Rt)=>html.node`<div data-node-id=${Dt.id} .data=${{entryTransition:{delay:400+Rt*100,offset:{x:0,y:"100%"},scale:{x:.8,y:.8},opacity:0,...ht(Rt)},exitTransition:{offset:{x:0,y:1e3},scale:{x:.8,y:.8},opacity:0,...vt(Rt)},borderRadius:k?0:5}} style=${{display:"flex",width:k?"100%":At+"px",height:k?Mt+"px":"auto",aspectRatio:nt,marginBottom:Rt===c.length-1?0:et.between+"px",flexGrow:0,flexShrink:1,flexBasis:Mt+"px"}}></div>`)}
      </div>
    `}},Row={name:"Row",layout:({props:a={},children:c,size:b})=>{let{justify:_="center",align:$="center",cover:k=!1,margin:et={},dimensions:nt,maxWidth:ot=1,reverse:ht=!1,entryTransition:vt=()=>({}),exitTransition:_t=()=>({})}=a;const kt=k?0:Math.min(b.y/6,12);et={left:kt,right:kt,top:kt,bottom:kt,between:kt,...et};const $t=b.y-et.top-et.bottom,Tt=b.x-et.left-et.right,At=et.between*((c.length||1)-1);let Mt=$t,Dt=Math.min((Tt-At)/(c.length||1),nt?$t*nt:Tt,ot*b.x);return nt&&(Mt=Dt/nt),html.node`
      <div style=${{height:k?b.y+"px":"auto",width:"100%",display:"flex",flexDirection:ht?"row-reverse":"row",justifyContent:_,alignItems:$,paddingLeft:et.left+"px",paddingTop:et.top+"px",paddingBottom:et.bottom+"px",paddingRight:et.right+"px"}}>
          ${c.map((Rt,xt)=>html.node`<div data-node-id=${Rt.id} .data=${{entryTransition:{delay:400+xt*100,offset:{x:0,y:"100%"},scale:{x:.8,y:.8},opacity:0,...vt(xt)},exitTransition:{offset:{x:0,y:1e3},scale:{x:.8,y:.8},opacity:0,..._t(xt)},borderRadius:k?0:5}} style=${{display:"flex",height:k?"100%":Mt+"px",width:Dt+"px",marginRight:xt===c.length-1?0:et.between+"px",flexGrow:0,flexShrink:1,flexBasis:Dt+"px"}}></div>`)}
      </div>
    `}},toMatrix=(a,c)=>a.reduce((b,_,$)=>($%c==0?b.push([$]):b[b.length-1].push($))&&b,[]),Grid={name:"Grid",layout:({props:a={},children:c,size:b})=>{let{dimensions:_,numPerRow:$,margin:k,cover:et=!1,maxWidth:nt,between:ot}=a;const ht=c.length===0||et?0:ot||Math.min(b.y/c.length/10,30);k=k??ht;const vt=b.x<b.y;ot=typeof ot=="number"?ot:k;let _t=[];$?_t=toMatrix(c,$):_t=vt?getTallGrid(c.length):getWideGrid(c.length);const kt=(b.y-(k*2+ot*(_t.length-1)))/_t.length,$t=b.x-k*2;return html.node`
    <div style=${{display:"flex",width:"100%",height:"100%",flexDirection:"column",justifyContent:"center",padding:k+"px",gap:ot+"px",flexGrow:0}}>${_t.map((Tt,At)=>Row.layout({props:{justify:"center",dimensions:_,cover:et,maxWidth:nt||1/(_t[0].length||1),margin:{top:0,right:0,left:0,bottom:0,between:ot}},children:Tt.map(Mt=>c[Mt]),size:{y:kt,x:$t}}))}</div>`}},Presentation={name:"Presentation",layout:({props:a={},children:c,size:b})=>{let{margin:_,cover:$=!1,barWidth:k=.2,barOrientation:et="vertical",presentationDimensions:nt=16/9,viewerDimensions:ot=16/9,justifyViewers:ht="center",useGrid:vt=!1,reverse:_t=!1}=a;const kt=et==="vertical"?b.x*k:b.y*k,$t=c[0],Tt=c.filter(ar=>ar!==$t),At=c.length<=1?0:Math.min(b.x/80,30);if(_=_??At,!$t)return Grid.layout({props:a,children:c,size:b});const Mt=c[1],Dt={...b};Mt&&(et==="vertical"?(Dt.x=b.x-kt,Dt.y=Dt.x/nt):(Dt.y=b.y-kt,Dt.x=Dt.y*nt));let Rt,xt={};vt?(Rt=Grid.layout,xt={cover:$,...$?{maxWidth:1}:{margin:_}}):(Rt=et==="vertical"?Column.layout:Row.layout,xt={margin:{top:_,left:_,bottom:_,right:_,between:_},dimensions:ot,justify:ht,align:"flex-end",entryTransition:()=>({offset:et==="vertical"?{x:_t?"-100%":"100%",y:0}:{x:0,y:_t?"-100%":"100%"}}),exitTransition:()=>({offset:et==="vertical"?{x:_t?-1e3:1e3,y:0}:{x:0,y:_t?-1e3:1e3}})});const Jt=et==="vertical"?_t?"left":"right":_t?"top":"bottom";return html.node`
      <div style=${{display:"flex",flexDirection:(et==="vertical"?"row":"column")+(_t?"-reverse":""),justifyContent:"space-around",alignItems:"center",position:"relative",padding:$?0:_,[`padding-${Jt}`]:0}}>
        ${c[0]&&html.node`<div style=${{width:Dt.x,height:Dt.y,display:"flex",flexGrow:1}}>
            <div data-node-id=${$t.id} .data=${{dimensions:nt,borderRadius:$?0:5,entryTransition:{delay:0,offset:{x:0,y:1e3},scale:{x:.5,y:.5},opacity:0},exitTransition:{offset:{x:0,y:1e3},scale:{x:2,y:2},opacity:0}}} style=${{width:"100%",height:"100%",...$?{position:"absolute",top:0,left:0,width:vt&&Mt?100-k*100+"%":"100%",height:"100%"}:{}}} />
          </div>`}
        ${html.node`<div style=${{...et==="vertical"?{maxWidth:k*100+"%",height:"100%"}:{maxHeight:k*100+"%",width:"100%"}}}>${Mt&&Rt({props:xt,children:Tt,size:et==="vertical"?{x:kt,y:b.y}:{x:b.x,y:kt}})}</div>`}
      </div>
    `}},Layered={name:"Layered",layout:({props:a={},children:c,size:b})=>html.node`<div style=${{width:"100%",height:"100%",position:"relative"}}>
      ${c.map((_,$)=>{const k=calculateZIndex(a,_,$),et={position:"absolute",...a.type!=="alert"?{inset:"0px"}:{},...a.type==="alert"?getPresetStyle(a.preset):{}};return html.node`<div data-node-id=${_.id} .data=${{zIndex:k}} style=${et}></div>`})}
    </div>`},getWideGrid=(a=0)=>{switch(a){case 0:return[[]];case 1:return[[0]];case 2:return[[0,1]];case 3:return[[0,1],[2]];case 4:return[[0,1],[2,3]];case 5:return[[0,1,2],[3,4]];case 6:return[[0,1,2],[3,4,5]];case 7:return[[0,1,2],[3,4,5],[6]];case 8:return[[0,1,2],[3,4,5],[6,7]]}const c=Array(a).fill(null).map((b,_)=>_);return toMatrix(c,Math.round(Math.sqrt(a)))},getTallGrid=(a=0)=>{switch(a){case 0:return[[]];case 1:return[[0]];case 2:return[[0],[1]];case 3:return[[0,1],[2]];case 4:return[[0,1],[2,3]];case 5:return[[0,1],[2,3],[4]];case 6:return[[0,1],[2,3],[4,5]];case 7:return[[0,1],[2,3],[4,5],[6]];case 8:return[[0,1],[2,3],[4,5],[6,7]]}const c=Array(a).fill(null).map((b,_)=>_);return toMatrix(c,Math.ceil(Math.sqrt(c.length))-1)},Layouts=Object.freeze(Object.defineProperty({__proto__:null,Column,Free,Grid,Layered,Presentation,Row},Symbol.toStringTag,{value:"Module"})),updateMediaStreamTracks=(a,c)=>{const b={audio:a.getAudioTracks()[0],video:a.getVideoTracks()[0]};b.audio!==c.audio&&(b.audio&&a.removeTrack(b.audio),c.audio&&a.addTrack(c.audio)),b.video!==c.video&&(b.video&&a.removeTrack(b.video),c.video&&a.addTrack(c.video))},RoomParticipant$1={type:"RoomParticipant",valueType:MediaStream,props:{id:{},type:{},videoEnabled:{},audioEnabled:{}},init({addSource:a,removeSource:c,updateSource:b,getSource:_}){CoreContext.on("RoomJoined",({room:$})=>{let k={},et=[],nt=[],ot={};const ht=()=>{et.filter(vt=>(vt==null?void 0:vt.type)==="camera"&&(vt==null?void 0:vt.isExternal)===!0).forEach(vt=>{var _t,kt,$t;if(vt.type==="camera"){const Tt=ot[vt.id],At=$.getParticipant(vt.participantId),Mt=$.getTrack(vt.id);if(_(vt==null?void 0:vt.id)){const Rt=$.getTrack((_t=At==null?void 0:At.meta[vt.id])==null?void 0:_t.microphone);updateMediaStreamTracks(Tt,{video:Mt==null?void 0:Mt.mediaStreamTrack,audio:Rt==null?void 0:Rt.mediaStreamTrack}),b(vt.id,{videoEnabled:!!(Mt&&!Mt.isMuted),audioEnabled:!!(Rt&&!Rt.isMuted),displayName:((kt=At==null?void 0:At.meta[vt.id])==null?void 0:kt.displayName)||"External Track",mirrored:($t=At==null?void 0:At.meta[vt.id])==null?void 0:$t.isMirrored,microphone:Rt,external:vt==null?void 0:vt.isExternal})}}}),nt.forEach(vt=>{var ar;const _t=ot[vt.id],kt=ot[vt.id+"-screen"],$t=vt.trackIds.find(nr=>{const pr=$.getTrack(nr);return(pr==null?void 0:pr.type)==="camera"&&!(pr!=null&&pr.isExternal)}),Tt=vt.trackIds.find(nr=>{const pr=$.getTrack(nr);return(pr==null?void 0:pr.type)==="microphone"&&!(pr!=null&&pr.isExternal)}),At=vt.trackIds.find(nr=>{const pr=$.getTrack(nr);return(pr==null?void 0:pr.type)==="screen_share"}),Mt=vt.trackIds.find(nr=>{const pr=$.getTrack(nr);return(pr==null?void 0:pr.type)==="screen_share_audio"}),Dt=$.getTrack($t),Rt=$.getTrack(Tt),xt=$.getTrack(At),Jt=$.getTrack(Mt);updateMediaStreamTracks(_t,{video:Dt==null?void 0:Dt.mediaStreamTrack,audio:Rt==null?void 0:Rt.mediaStreamTrack}),updateMediaStreamTracks(kt,{video:xt==null?void 0:xt.mediaStreamTrack,audio:Jt==null?void 0:Jt.mediaStreamTrack}),b(vt.id,{videoEnabled:!!(Dt&&!Dt.isMuted),audioEnabled:!!(Rt&&!Rt.isMuted),displayName:vt.displayName,mirrored:(ar=vt==null?void 0:vt.meta)==null?void 0:ar.isMirrored,external:Dt==null?void 0:Dt.isExternal}),b(vt.id+"-screen",{videoEnabled:!!(xt&&!xt.isMuted),audioEnabled:!!(Jt&&!Jt.isMuted),displayName:vt.meta.screenDisplayName||`${vt.displayName}'s Screen`,external:xt==null?void 0:xt.isExternal})})};$.useTracks(vt=>{const _t=vt.filter($t=>!et.some(Tt=>Tt.id===$t.id)&&!!($t!=null&&$t.mediaStreamTrack)),kt=et.filter($t=>!vt.some(Tt=>Tt.id===$t.id));et=vt.filter($t=>!!($t!=null&&$t.mediaStreamTrack)),_t.forEach($t=>{const Tt=new MediaStream([]);ot[$t.id]=Tt;const{id:At,participantId:Mt,type:Dt,mediaStreamTrack:Rt}=$.getTrack($t.id);Rt&&a({id:At,isActive:!0,value:Tt,props:{id:At,trackId:At,participantId:Mt,isMuted:$t.isMuted,type:Dt}})}),kt.forEach($t=>{var Tt;c($t.id),(Tt=k[$t.id])==null||Tt.call(k)}),ht()}),$.useParticipants(vt=>{const _t=vt.filter(Tt=>!Tt.id.startsWith("source")),kt=_t.filter(Tt=>!nt.some(At=>At.id===Tt.id)),$t=nt.filter(Tt=>!_t.some(At=>At.id===Tt.id));nt=_t,kt.forEach(Tt=>{var Rt;const{id:At}=Tt,Mt=new MediaStream([]),Dt=new MediaStream([]);ot[At]=Mt,ot[At+"-screen"]=Dt,a({id:At,isActive:!0,value:Mt,props:{id:At,type:"camera",displayName:Tt.displayName||Tt.id,audioEnabled:!1,videoEnabled:!1,mirrored:(Rt=Tt==null?void 0:Tt.meta)==null?void 0:Rt.isMirrored}}),a({id:At+"-screen",isActive:!0,value:Dt,props:{id:At,type:"screen",displayName:Tt.displayName||Tt.id,audioEnabled:!1,videoEnabled:!1}})}),ht(),$t.forEach(Tt=>{var At;c(Tt.id),(At=k[Tt.id])==null||At.call(k)})})})}},Banner$1={type:"Banner",valueType:Object,props:{},init({addSource:a,removeSource:c,updateSource:b,getSource:_,modifySourceValue:$}){let k=[];const et=(nt=[])=>{const ot=nt.filter(_t=>!k.some(kt=>kt.id===_t.id)),ht=k.filter(_t=>!nt.some(kt=>kt.id===_t.id)),vt=nt.filter(_t=>{const kt=k.find($t=>$t.id===_t.id);return!deepEqual(_t,kt)});ot.forEach(_t=>a({id:_t.id,value:{headerText:_t.props.headerText,bodyText:_t.props.bodyText},props:_t.props})),ht.forEach(_t=>c(_t.id)),vt.forEach(_t=>{b(_t.id,_t.props),$(_t.id,kt=>{kt.headerText=_t.props.headerText,kt.bodyText=_t.props.bodyText})}),k=nt};CoreContext.on("ActiveProjectChanged",({projectId:nt})=>{var ht;if(k=[],!nt)return;const ot=getProject(nt);et(((ht=ot.props)==null?void 0:ht.banners)??[])}),CoreContext.on("ProjectChanged",({project:nt})=>{var ot;et(((ot=nt.props)==null?void 0:ot.banners)??[])})}};var react={exports:{}},react_production_min={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l=Symbol.for("react.element"),n=Symbol.for("react.portal"),p$1=Symbol.for("react.fragment"),q=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),t=Symbol.for("react.provider"),u=Symbol.for("react.context"),v$1=Symbol.for("react.forward_ref"),w=Symbol.for("react.suspense"),x=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),z$1=Symbol.iterator;function A$1(a){return a===null||typeof a!="object"?null:(a=z$1&&a[z$1]||a["@@iterator"],typeof a=="function"?a:null)}var B$1={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C$1=Object.assign,D$1={};function E$1(a,c,b){this.props=a,this.context=c,this.refs=D$1,this.updater=b||B$1}E$1.prototype.isReactComponent={};E$1.prototype.setState=function(a,c){if(typeof a!="object"&&typeof a!="function"&&a!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,a,c,"setState")};E$1.prototype.forceUpdate=function(a){this.updater.enqueueForceUpdate(this,a,"forceUpdate")};function F(){}F.prototype=E$1.prototype;function G$1(a,c,b){this.props=a,this.context=c,this.refs=D$1,this.updater=b||B$1}var H$1=G$1.prototype=new F;H$1.constructor=G$1;C$1(H$1,E$1.prototype);H$1.isPureReactComponent=!0;var I$1=Array.isArray,J=Object.prototype.hasOwnProperty,K$1={current:null},L$1={key:!0,ref:!0,__self:!0,__source:!0};function M$1(a,c,b){var _,$={},k=null,et=null;if(c!=null)for(_ in c.ref!==void 0&&(et=c.ref),c.key!==void 0&&(k=""+c.key),c)J.call(c,_)&&!L$1.hasOwnProperty(_)&&($[_]=c[_]);var nt=arguments.length-2;if(nt===1)$.children=b;else if(1<nt){for(var ot=Array(nt),ht=0;ht<nt;ht++)ot[ht]=arguments[ht+2];$.children=ot}if(a&&a.defaultProps)for(_ in nt=a.defaultProps,nt)$[_]===void 0&&($[_]=nt[_]);return{$$typeof:l,type:a,key:k,ref:et,props:$,_owner:K$1.current}}function N$1(a,c){return{$$typeof:l,type:a.type,key:c,ref:a.ref,props:a.props,_owner:a._owner}}function O$1(a){return typeof a=="object"&&a!==null&&a.$$typeof===l}function escape(a){var c={"=":"=0",":":"=2"};return"$"+a.replace(/[=:]/g,function(b){return c[b]})}var P$1=/\/+/g;function Q$1(a,c){return typeof a=="object"&&a!==null&&a.key!=null?escape(""+a.key):c.toString(36)}function R$1(a,c,b,_,$){var k=typeof a;(k==="undefined"||k==="boolean")&&(a=null);var et=!1;if(a===null)et=!0;else switch(k){case"string":case"number":et=!0;break;case"object":switch(a.$$typeof){case l:case n:et=!0}}if(et)return et=a,$=$(et),a=_===""?"."+Q$1(et,0):_,I$1($)?(b="",a!=null&&(b=a.replace(P$1,"$&/")+"/"),R$1($,c,b,"",function(ht){return ht})):$!=null&&(O$1($)&&($=N$1($,b+(!$.key||et&&et.key===$.key?"":(""+$.key).replace(P$1,"$&/")+"/")+a)),c.push($)),1;if(et=0,_=_===""?".":_+":",I$1(a))for(var nt=0;nt<a.length;nt++){k=a[nt];var ot=_+Q$1(k,nt);et+=R$1(k,c,b,ot,$)}else if(ot=A$1(a),typeof ot=="function")for(a=ot.call(a),nt=0;!(k=a.next()).done;)k=k.value,ot=_+Q$1(k,nt++),et+=R$1(k,c,b,ot,$);else if(k==="object")throw c=String(a),Error("Objects are not valid as a React child (found: "+(c==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":c)+"). If you meant to render a collection of children, use an array instead.");return et}function S$1(a,c,b){if(a==null)return a;var _=[],$=0;return R$1(a,_,"","",function(k){return c.call(b,k,$++)}),_}function T$1(a){if(a._status===-1){var c=a._result;c=c(),c.then(function(b){(a._status===0||a._status===-1)&&(a._status=1,a._result=b)},function(b){(a._status===0||a._status===-1)&&(a._status=2,a._result=b)}),a._status===-1&&(a._status=0,a._result=c)}if(a._status===1)return a._result.default;throw a._result}var U$1={current:null},V$1={transition:null},W$1={ReactCurrentDispatcher:U$1,ReactCurrentBatchConfig:V$1,ReactCurrentOwner:K$1};react_production_min.Children={map:S$1,forEach:function(a,c,b){S$1(a,function(){c.apply(this,arguments)},b)},count:function(a){var c=0;return S$1(a,function(){c++}),c},toArray:function(a){return S$1(a,function(c){return c})||[]},only:function(a){if(!O$1(a))throw Error("React.Children.only expected to receive a single React element child.");return a}};react_production_min.Component=E$1;react_production_min.Fragment=p$1;react_production_min.Profiler=r;react_production_min.PureComponent=G$1;react_production_min.StrictMode=q;react_production_min.Suspense=w;react_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=W$1;react_production_min.cloneElement=function(a,c,b){if(a==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+a+".");var _=C$1({},a.props),$=a.key,k=a.ref,et=a._owner;if(c!=null){if(c.ref!==void 0&&(k=c.ref,et=K$1.current),c.key!==void 0&&($=""+c.key),a.type&&a.type.defaultProps)var nt=a.type.defaultProps;for(ot in c)J.call(c,ot)&&!L$1.hasOwnProperty(ot)&&(_[ot]=c[ot]===void 0&&nt!==void 0?nt[ot]:c[ot])}var ot=arguments.length-2;if(ot===1)_.children=b;else if(1<ot){nt=Array(ot);for(var ht=0;ht<ot;ht++)nt[ht]=arguments[ht+2];_.children=nt}return{$$typeof:l,type:a.type,key:$,ref:k,props:_,_owner:et}};react_production_min.createContext=function(a){return a={$$typeof:u,_currentValue:a,_currentValue2:a,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},a.Provider={$$typeof:t,_context:a},a.Consumer=a};react_production_min.createElement=M$1;react_production_min.createFactory=function(a){var c=M$1.bind(null,a);return c.type=a,c};react_production_min.createRef=function(){return{current:null}};react_production_min.forwardRef=function(a){return{$$typeof:v$1,render:a}};react_production_min.isValidElement=O$1;react_production_min.lazy=function(a){return{$$typeof:y,_payload:{_status:-1,_result:a},_init:T$1}};react_production_min.memo=function(a,c){return{$$typeof:x,type:a,compare:c===void 0?null:c}};react_production_min.startTransition=function(a){var c=V$1.transition;V$1.transition={};try{a()}finally{V$1.transition=c}};react_production_min.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};react_production_min.useCallback=function(a,c){return U$1.current.useCallback(a,c)};react_production_min.useContext=function(a){return U$1.current.useContext(a)};react_production_min.useDebugValue=function(){};react_production_min.useDeferredValue=function(a){return U$1.current.useDeferredValue(a)};react_production_min.useEffect=function(a,c){return U$1.current.useEffect(a,c)};react_production_min.useId=function(){return U$1.current.useId()};react_production_min.useImperativeHandle=function(a,c,b){return U$1.current.useImperativeHandle(a,c,b)};react_production_min.useInsertionEffect=function(a,c){return U$1.current.useInsertionEffect(a,c)};react_production_min.useLayoutEffect=function(a,c){return U$1.current.useLayoutEffect(a,c)};react_production_min.useMemo=function(a,c){return U$1.current.useMemo(a,c)};react_production_min.useReducer=function(a,c,b){return U$1.current.useReducer(a,c,b)};react_production_min.useRef=function(a){return U$1.current.useRef(a)};react_production_min.useState=function(a){return U$1.current.useState(a)};react_production_min.useSyncExternalStore=function(a,c,b){return U$1.current.useSyncExternalStore(a,c,b)};react_production_min.useTransition=function(){return U$1.current.useTransition()};react_production_min.version="18.2.0";react.exports=react_production_min;var reactExports=react.exports;const React=getDefaultExportFromCjs$2(reactExports),runFilters=(a,c=[])=>c.reduce((b,_)=>_(b),a),createDefault=()=>({root:document.createElement("div")}),init$2=(a={},c,b)=>{const _={},$=a.defaultTransforms||{},k=Mt=>{asArray(Mt).forEach(Dt=>{_[Dt.name]=Dt})},et={},nt={},ot={},ht=Mt=>ot[Mt]||[],vt=Mt=>nt[Mt]||[],_t=Mt=>et[Mt],kt=Mt=>_[Mt];c.on("SourceChanged",Mt=>{vt(Mt.id).forEach(Rt=>{const xt=c.getNode(Rt.nodeId);Rt._onUpdateHandlers.forEach(Jt=>Jt(xt.props||{}))})}),c.on("AvailableSourcesChanged",({type:Mt,sources:Dt})=>{ht(Mt).forEach(xt=>{$t(xt.nodeId)})});const $t=Mt=>{var Ot,It,ut;const Dt=_t(Mt);if(!Dt)return;const Rt=kt(Dt.transformName);if(!Rt.useSource)return;const xt=c.getNode(Mt),Jt=Dt.sourceType,ar=b.getSources(Jt),nr=Rt.useSource(ar,xt.props),pr=Dt.sourceValue,ur=nr==null?void 0:nr.value;Dt.source!==nr&&(nt[(Ot=Dt.source)==null?void 0:Ot.id]&&(nt[(It=Dt.source)==null?void 0:It.id]=nt[(ut=Dt.source)==null?void 0:ut.id].filter(_e=>_e.nodeId!==Mt)),nt[nr==null?void 0:nr.id]=[...nt[nr==null?void 0:nr.id]||[],Dt]),Dt.source=nr,Dt.sourceValue=ur,Object.is(pr,ur)||Dt._onNewSourceHandlers.forEach(_e=>_e(nr))},Tt=Mt=>{const Dt=At(Mt),xt=runFilters(Mt,[]);return $t(Mt.id),Dt==null||Dt._onUpdateHandlers.forEach(Jt=>Jt(Mt.props||{})),{...xt,children:xt.children.map(Tt)}},At=Mt=>{if(et[Mt.id])return et[Mt.id];const{props:Dt={}}=Mt,{sourceType:Rt}=Dt;if(!Rt)return null;let xt=$[Rt],Jt;if(xt?Jt=_[xt]:Jt=Object.values(_).find(tt=>tt.sourceType===Rt),!Jt)throw new Error("Could not find matching transform for sourceType: "+Rt);const ar=[],nr=[],pr=[],ur=[],It={...(Jt.create||createDefault)({onEvent:(tt,it,...dt)=>{const lt=c.on(tt,it,...dt);return ur.push(lt),lt},onNewSource:tt=>ar.push(tt),onUpdate:tt=>nr.push(tt),onRemove:tt=>pr.push(tt)},Mt.props),sourceType:Rt,nodeId:Mt.id,transformName:Jt.name,_onNewSourceHandlers:ar,_onUpdateHandlers:nr,_disposables:ur};et[Mt.id]=It;const ut=Rt;ot[ut]=[...ot[ut]||[],It],Jt.useSource&&$t(Mt.id);const _e=[c.on("NodeRemoved",({nodeId:tt})=>{if(tt===Mt.id){const it=c.getNode(tt),{sourceType:dt="Element"}=it.props;_e.forEach(gt=>gt==null?void 0:gt()),ur.forEach(gt=>gt==null?void 0:gt()),pr.forEach(gt=>gt==null?void 0:gt()),delete et[it.id];const lt=dt;ot[lt]=ot[lt].filter(gt=>gt!==et[it.id])}})];return It};return{transforms:_,nodeElementIndex:et,elementSourceTypeIndex:ot,registerTransform:k,getElementsBySourceType:ht,getElementByNodeId:_t,getTransformByName:kt,updateSourceForNode:$t,renderTree:Tt,getElement:At}},TRANSITION_DURATION=300,findLayoutUp=(a,c,b=0)=>{const $=a.parentElement;return $ instanceof Layout&&(b=0,!c||c($))?$:$?b>4?null:findLayoutUp($,c,b+1):null},TRANSITION_FIELDS="opacity, transform, width, height, left, right, top, bottom, inset",layoutIndex={},parentIdIndex={},childIndex={};let rootLayout,_cid=1;const ignoredAttributes=["style","id","className"];let tickOps={};const tick=()=>{nextTick=null;const a=new Set,c=new Set,b=new Set;Object.entries(tickOps).forEach(([_,$])=>{$.forEach(([k,et,nt])=>{switch(k){case"childInserted":{c.has(nt)?c.delete(nt):a.add(nt);break}case"childRemoved":{a.has(nt)?a.delete(nt):c.add(nt);break}case"childRemoveFinished":{b.add(nt);break}}})});try{c.forEach($=>{var nt,ot,ht;const k=childIndex[$],et=Array.from(((nt=k.parentEl)==null?void 0:nt.children)||[]);k.nextSiblingEl&&et.includes(k.nextSiblingEl)?(ot=k.parentEl)==null||ot.insertBefore(k,k.nextSiblingEl):(k.nextSiblingEl=null,(ht=k.parentEl)==null||ht.append(k)),k.runRemove()}),b.forEach($=>{const k=childIndex[$];if(k.removed){k.previousSiblingEl&&(k.previousSiblingEl.nextSiblingEl=k.nextSiblingEl),k.nextSiblingEl&&(k.nextSiblingEl.previousSiblingEl=k.previousSiblingEl);return}});const _=window.__scale;Object.entries(tickOps).forEach(([$,k])=>{const et=layoutIndex[$],nt=et.getBoundingClientRect(),ot={x:nt.width/_,y:nt.height/_};et.updatePositions({size:ot,inserted:a,removed:c})})}catch(_){log.warn("Failed to run Layout ops",_)}tickOps={}};let nextTick;const queueOp=a=>{const[c,b]=a,_=tickOps[b]||[];tickOps[b]=[..._,a],nextTick=nextTick||requestAnimationFrame(tick)};class Layout extends HTMLElement{constructor(){super();_n(this,"parentEl");_n(this,"slotEl");_n(this,"parentLayout");_n(this,"nodes");_n(this,"mutationObserver");_n(this,"latestSize");_n(this,"isFirst",!0);_n(this,"isUpdating",!1);_n(this,"cid");this.cid=++_cid}log(...b){var _;log.debug(...b,{id:this.dataset.id,parent:(_=this.parentLayout)==null?void 0:_.dataset.id},this)}connectedCallback(){var b;this.parentEl=this.parentElement,this.parentLayout=findLayoutUp(this),this.slotEl=this.closest("[data-layout-child]"),Array.from(this.children).forEach(_=>this.initializeChild(_)),rootLayout||(rootLayout=this),layoutIndex[this.dataset.id]=this,parentIdIndex[this.dataset.id]=(b=this.parentLayout)==null?void 0:b.id,Object.assign(this.style,{width:"100%",height:"100%",position:"absolute",top:"0px",left:"0px",pointerEvents:"none",boxSizing:"border-box"}),this.mutationObserver&&this.mutationObserver.disconnect(),this.mutationObserver=new MutationObserver(_=>{this.isConnected&&_.forEach($=>{$.type==="attributes"&&!ignoredAttributes.includes($.attributeName)?queueOp(["attributesChanged",this.dataset.id]):$.type==="childList"&&($.addedNodes.forEach(k=>{const et=childIndex[k.dataset.id];k.removed||(et?et!==k&&(this.initializeChild(k),k.setAttribute("style",et.getAttribute("style")),k.data=et.data):this.initializeChild(k),queueOp(["childInserted",this.dataset.id,k.dataset.id]))}),$.removedNodes.forEach(k=>{k.removed||queueOp(["childRemoved",this.dataset.id,k.dataset.id])}))})}),this.mutationObserver.observe(this,{childList:!0,attributes:!0}),this.latestSize||queueOp(["attributesChanged",this.dataset.id])}disconnectedCallback(){}adoptedCallback(){}updatePositions(b){if(this.isUpdating)return;this.isUpdating=!0;const{size:_,inserted:$=new Set,removed:k=new Set}=b;this.nodes=Array.from(this.children||[]).filter(ht=>!ht.removed).map((ht,vt)=>{const _t=getElementAttributes(ht);return{id:ht.dataset.id,props:_t,children:[]}});const et=JSON.parse(this.getAttribute("props")||"{}");this.latestSize=_;const nt={id:this.dataset.id,props:et,children:this.nodes,size:_};let ot=layoutChildren(nt);Promise.all(Object.entries(ot).map(async([ht,vt])=>{var Jt,ar,nr,pr;let _t=childIndex[ht]||this.querySelector(`[data-layout-child][data-id="${ht}"]`);const kt={..._t.data,...vt};_t.data=kt;const{size:$t,position:Tt,zIndex:At=1,opacity:Mt=1,borderRadius:Dt=0,entryTransition:Rt={},exitTransition:xt={}}=kt;if(_t){if(_t.removed)return;xt&&(_t.data.exitTransition=xt),Rt&&(_t.data.entryTransition=Rt),_t.data.size=$t,_t.data.position=Tt;const ur=window.__scale,Ot=this.getBoundingClientRect(),It=Ot.width/ur,ut=It-sizeToNum(Tt.x,It)-sizeToNum($t.x,It),_e=Ot.height/ur,tt=_e-sizeToNum(Tt.y,_e)-sizeToNum($t.y,_e);Object.assign(_t.style,{position:"absolute",transformOrigin:"50% 50%",transitionDuration:"0ms",transitionDelay:"0ms",transform:"translate3d(0, 0, 0) scaleX(1) scaleY(1)",visibility:"visible",boxSizing:"border-box",overflow:"hidden",borderRadius:Dt+"px",width:"auto",height:"auto"});let it="0ms",dt=this.isFirst?asDuration(0):asDuration(TRANSITION_DURATION);if($.has(ht))Object.assign(_t.style,{transitionProperty:TRANSITION_FIELDS,transitionDuration:"0ms",transitionTimingFunction:Rt.timingFn??"ease",transform:`translate3d(calc(${asSize(((Jt=Rt.offset)==null?void 0:Jt.x)??0)}), calc(${asSize(((ar=Rt.offset)==null?void 0:ar.y)??0)}), 0) scaleX(${((nr=Rt.scale)==null?void 0:nr.x)??1}) scaleY(${((pr=Rt.scale)==null?void 0:pr.y)??1})`,opacity:Rt.opacity??Mt,left:asSize(Tt.x)||0,right:asSize(ut)||0,top:asSize(Tt.y)||0,bottom:asSize(tt)||0}),it=asDuration(Rt.delay??0);else if(_t.data.rootOffset){const Et=rootLayout.getBoundingClientRect(),pt=this.getBoundingClientRect(),rt={x:pt.x/ur-Et.x/ur,y:pt.y/ur-Et.y/ur},mt=rt.x+pt.width/ur,Lt=_t.data.rootOffset.x+Number(_t.data.size.x),Gt=rt.y+pt.height/ur,rr=_t.data.rootOffset.y+Number(_t.data.size.y);_t.data.rootOffset.x-rt.x,_t.data.rootOffset.y-rt.y,mt-Lt,Gt-rr}_t.addEventListener("transitionstart",()=>{_t.style.zIndex=String(At+1)}),await new Promise(Et=>window.setTimeout(Et)),Object.assign(_t.style,{transitionProperty:TRANSITION_FIELDS,transitionDuration:dt,transitionDelay:it,transform:"translate3d(0, 0, 0) scaleX(1) scaleY(1)",opacity:Mt,left:asSize(Tt.x)||0,top:asSize(Tt.y)||0,width:It?"auto":$t.x,right:It?asSize(ut)||0:"auto",height:_e?"auto":$t.y,bottom:_e?asSize(tt)||0:"auto",zIndex:At});const gt=()=>{const Et=rootLayout.getBoundingClientRect(),pt=_t.getBoundingClientRect();_t.data.rootOffset={x:pt.x/ur-Et.x/ur,y:pt.y/ur-Et.y/ur}};gt(),_t.addEventListener("transitionend",()=>{_t.style.zIndex=String(At),gt()})}})).then(()=>{this.isUpdating=!1}),this.isFirst=!1,Array.from(this.querySelectorAll("ls-layout")).forEach(ht=>{if(!ot[ht.dataset.id])return;const vt=ot[ht.dataset.id].size;ht.updatePositions({size:{x:sizeToNum(vt.x,_.x),y:sizeToNum(vt.y,_.y)}})})}initializeChild(b){var $;if(!(($=b.dataset)!=null&&$.id))return log.warn("Layout: Child requires `data-id` at the time it is added to a Layout");b._remove=b.remove,b.remove=()=>{this.removeChild(b)},b.mutationObserver||(b.mutationObserver=new MutationObserver(k=>{k.forEach(et=>{if(et.type==="attributes"){if(et.attributeName==="style")return;queueOp(["childAttributesChanged",this.dataset.id,b.dataset.id])}})}),b.mutationObserver.observe(b,{childList:!0,attributes:!0}));const _={entryTransition:{delay:0,opacity:0,scale:{x:1,y:1},offset:{x:0,y:0}},exitTransition:{delay:0,opacity:0,scale:{x:1,y:1},offset:{x:0,y:0}},position:{x:0,y:0},size:{x:0,y:0},opacity:0,fit:"cover",borderRadius:0,zIndex:1};b.data=_,b.parentEl=b.parentElement,b.nextSiblingEl=b.nextSibling,b.previousSiblingEl=b.previousSibling,b.previousSiblingEl&&(b.previousSiblingEl.nextSiblingEl=b),b.toggleAttribute("data-layout-child",!0),childIndex[b.dataset.id]=b,b.runRemove=async()=>{var et,nt,ot,ht;b.removed=!0;const k=TRANSITION_DURATION;return await new Promise(vt=>window.setTimeout(vt)),Object.assign(b.style,{zIndex:0,transitionDelay:asDuration(0),transitionDuration:asDuration(k),transitionProperty:TRANSITION_FIELDS,transitionTimingFunction:b.data.exitTransition.timingFn??"ease",transform:`translate3d(calc(${asSize(((et=b.data.exitTransition.offset)==null?void 0:et.x)??0)}), calc( ${asSize(((nt=b.data.exitTransition.offset)==null?void 0:nt.y)??0)}), 0) scaleX(${((ot=b.data.exitTransition.scale)==null?void 0:ot.x)??1}) scaleY(${((ht=b.data.exitTransition.scale)==null?void 0:ht.y)??1})`,opacity:b.data.exitTransition.opacity??0}),b.removed=!0,b.transition=new Promise(vt=>{const _t=()=>{b.transition=null,b._remove(),queueOp(["childRemoveFinished",this.dataset.id,b.dataset.id]),clearTimeout(kt),vt()},kt=window.setTimeout(_t,parseInt(String(k))+600);b.addEventListener("transitionend",_t,{once:!0})}),b.transition}}}const ensureLayoutContainer=a=>{const c=document.getElementById("__ls-layout-container");if(c)return Object.assign(c.style,{width:a.x+"px",height:a.y+"px"}),c;const b=document.createElement("div");return b.id="__ls-layout-container",Object.assign(b.style,{position:"fixed",visibility:"hidden",top:"0px",left:"0px",zIndex:-1,width:a.x+"px",height:a.y+"px"}),document.body.append(b),b},layoutChildren=({id:a,props:c={},children:b,size:_})=>{const $={props:c,children:b,size:_},k=htmlLayouts[c.layout]?htmlLayouts[c.layout].layout($):htmlLayouts.Free.layout($);if(!(k instanceof HTMLElement))return k;const et=Array.from(k.querySelectorAll("[data-node-id]")),nt=document.createElement("div");nt.style.height=k.style.height=_.y+"px",nt.style.width=k.style.width=_.x+"px",nt.style.position="absolute",nt.style.top="0px",nt.style.left="0px",nt.style.boxSizing="border-box",nt.setAttribute("data-wrapper-id",a),nt.append(k);const ot=ensureLayoutContainer(_),ht=ot.querySelector(`[data-wrapper-id="${a}"]`);ht?ht.replaceWith(nt):ot.append(nt);const vt=k.getBoundingClientRect(),_t={};return et.forEach(kt=>{var Dt,Rt,xt,Jt;const $t=kt.dataset.nodeId;if(!$t)return;const Tt=Number(kt.dataset.opacity??(kt.style.opacity||1)),At=kt.getBoundingClientRect();let Mt={position:{x:At.x-vt.x+"px",y:At.y-vt.y+"px"},size:{x:At.width+"px",y:At.height+"px"},opacity:Tt,zIndex:(Dt=kt.data)==null?void 0:Dt.zIndex,entryTransition:((Rt=kt.data)==null?void 0:Rt.entryTransition)??{},exitTransition:((xt=kt.data)==null?void 0:xt.exitTransition)??{},borderRadius:((Jt=kt.data)==null?void 0:Jt.borderRadius)??0};`${c.showcase}-x`===$t&&(Mt.position={x:vt.x+"px",y:vt.y+"px"},Mt.size={x:vt.width+"px",y:vt.height+"px"},Mt.zIndex=10),_t[$t]=Mt,positionIndex[kt.dataset.nodeId]=Mt}),_t},positionIndex={},htmlLayouts={},registerLayout=a=>{asArray(a).forEach(c=>{htmlLayouts[c.name]=c})},sourceTypes={},init$1=(a={},c)=>{const b={},_={},$=ot=>{c.triggerEvent("SourceChanged",ot)},k=ot=>{c.triggerEvent("AvailableSourcesChanged",{type:ot,sources:_[ot]})},nt={sourceIndex:b,sourceTypeIndex:_,registerSource:ot=>{asArray(ot).forEach(ht=>{var _t;const vt=kt=>{const $t=b[kt];if($t&&$t.type!==ht.type)throw new Error(`Attempted to modify source of type ${$t.type} from ${ht.type}`)};(_t=ht.init)==null||_t.call(ht,{getSource:kt=>nt.getSource(kt),removeSource:kt=>(vt(kt),nt.removeSource(kt)),setSourceActive:(kt,$t)=>(vt(kt),nt.setSourceActive(kt,$t)),updateSource:(kt,$t)=>(vt(kt),nt.updateSource(kt,$t)),modifySourceValue(kt,$t){return vt(kt),nt.modifySourceValue(kt,$t)},addSource:kt=>nt.addSource(ht.type,kt)}),sourceTypes[ht.type]=ht})},getSource:ot=>b[ot],getSources:ot=>_[ot]||[],useSource:(ot,ht)=>(ht(b[ot]),c.on("SourceChanged",vt=>{vt.id===ot&&ht(vt)})),useSources:(ot,ht)=>(ht(_[ot]||[]),c.on("AvailableSourcesChanged",vt=>{vt.type===ot&&ht(vt.sources)})),addSource:(ot,ht)=>{if(!ht.id)throw new Error('Cannot add source without field "id"');if(b[ht.id])return;if(!ht.value)throw new Error('Cannot add source with an empty field "value"');if(!sourceTypes[ot])throw new Error("Could not find definition for source type: "+ot);const{id:_t,value:kt=null,props:$t={},isActive:Tt=!0}=ht;b[_t]={id:_t,type:ot,props:$t,value:kt,isActive:Tt},_[ot]=[..._[ot]||[],b[_t]],$(b[_t]),k(ot)},removeSource:ot=>{const ht=b[ot];ht&&(delete b[ot],_[ht.type]=_[ht.type].filter(vt=>vt.id!==ot),k(ht.type))},updateSource:(ot,ht)=>{const vt=b[ot];vt.props={...vt.props,...ht},$(vt),k(vt.type)},modifySourceValue:async(ot,ht)=>{const vt=b[ot];await ht(vt.value),$(vt)},setSourceActive:(ot,ht=!0)=>{const vt=b[ot];vt.isActive=ht,k(vt.type)}};return nt},{forEachDown,insertAt,toDataNode,pull,replaceItem}=Logic;let compositor;const start=a=>{if(compositor)return compositor;const{dbAdapter:c,transformSettings:b={},sourceSettings:_={}}=a,$={},k={};try{customElements.define("ls-layout",Layout)}catch(Dt){log.warn(Dt)}const et={},nt={},ot={};let ht=0;const vt=new Map,_t=(Dt,Rt)=>{if(typeof Dt!="function")return;const xt=++ht;return vt.set(xt,Dt),Dt.nodeId=Rt,()=>{vt.delete(xt)}},kt=(Dt,Rt,xt)=>_t((Jt,ar)=>{Jt===Dt&&Rt(ar)},xt),$t=(Dt,Rt)=>{vt.forEach(xt=>{xt.nodeId?Rt!=null&&Rt.nodeId&&(Rt==null?void 0:Rt.nodeId)===xt.nodeId&&xt(Dt,Rt):xt(Dt,Rt)})},Tt={projects:k,subscribe:_t,on:kt,triggerEvent:$t,getProject:Dt=>k[Dt],getNodeProject:Dt=>k[et[Dt]],getNodeParent:Dt=>ot[nt[Dt]],getNode:Dt=>ot[Dt],createProject:async(Dt={},Rt)=>{const{id:xt,props:Jt={},children:ar=[]}=Dt,nr=await c(Rt,{get:()=>null,getParent:()=>null}).insert(Jt),pr={id:nr,props:Jt,children:ar};return forEachDown(Dt,ur=>{}),ot[nr]=pr,compositor.loadProject(pr,Rt)},loadProject:(Dt,Rt)=>{if(!Dt)return;if(Rt=Rt||Dt.id,k[Rt])return k[Rt];forEachDown(Dt,(nr,pr)=>{ot[nr.id]=nr,nt[nr.id]=pr==null?void 0:pr.id,et[nr.id]=Rt});const xt={insert:async(nr,pr,ur=0)=>{if(nr.id&&ot[nr.id])return ot[nr.id];if(nr.children||(nr.children=[]),nr.props||(nr.props={}),pr){const Ot=ot[pr];if(!Ot)throw"Parent node not found with ID";Ot.children=insertAt(ur,nr,Ot.children||[]),nt[nr.id]=pr}return ot[nr.id]=nr,et[nr.id]=Rt,nr.id},update:async(nr,pr={},ur)=>{const Ot=ot[nr];if(ur){const It=ur.map(ut=>{const _e=ot[ut];return nt[_e.id]=nr,_e});Ot.children=It}Ot.props={...Ot.props,...pr}},remove:async nr=>{const pr=ot[nt[nr]];pr&&(pr.children=pr.children.filter(Ot=>Ot.id!==nr));const ur=ot[nr];forEachDown(ur,Ot=>{ot[Ot.id]&&(ot[Ot.id]._deleted=!0),$t("NodeRemoved",{projectId:Jt.id,nodeId:Ot.id})})}},Jt={id:Rt,getRoot:()=>Dt,get(nr){return ot[nr]},getParent(nr){return ot[nt[nr]]},renderTree(){return Mt.renderTree(Dt)},local:xt,insert:async(nr={},pr,ur=0)=>{const It={id:await ar.insert(nr,pr,ur),props:nr,children:[]};return xt.insert(It,pr,ur)},update:async(nr,pr)=>(await xt.update(nr,pr),ar.update(nr,pr)),remove:async nr=>{await xt.remove(nr);const pr=ot[nt[nr]],ur=pr.children.filter(Ot=>Ot.id!==nr);return ar.batch([["delete",{id:nr}],["update",{...pr,children:ur}]])},reorder:async(nr,pr)=>{const ur=ot[nr];return ur.children=pr.map(Ot=>ur.children.find(It=>It.id===Ot)),ar.batch([["update",ur]])},move:async(nr,pr,ur=0)=>{const Ot=ot[nr],It=ot[nt[nr]],ut=ot[pr];It.children=pull(It.children,Ot),ut.children=insertAt(ur,Ot,ut.children),ar.batch([["update",ut],["update",It]]),nt[nr]=pr},swap:async(nr,pr)=>{const ur=ot[nr],Ot=ot[pr],It=ot[nt[nr]],ut=ot[nt[pr]];It.children=replaceItem(_e=>_e.id===nr,Ot,It.children),ut.children=replaceItem(_e=>_e.id===pr,ur,ut.children),nt[nr]=ut.id,nt[pr]=It.id,ar.batch([["update",It],["update",ut]])}};Object.defineProperty(Jt,"nodes",{get(){return Object.values(ot).filter(nr=>et[nr.id]===Jt.id)}});const ar=$[Rt]||c(Rt,{get:nr=>toDataNode(Jt.get(nr)),getParent:nr=>toDataNode(Jt.getParent(nr))});return $[Rt]=ar,k[Rt]=Jt,Jt}},At=init$1(_,Tt),Mt=init$2(b,Tt,At);return compositor={registerLayout,registerTransform:Mt.registerTransform,registerSource:At.registerSource,getElement:Mt.getElement,getSource:At.getSource,getSources:At.getSources,useSource:At.useSource,useSources:At.useSources,...Tt},compositor},RTMP={type:"RTMP",valueType:MediaStream,props:{id:{},type:{},videoEnabled:{},audioEnabled:{}},init({addSource:a,removeSource:c,updateSource:b,getSource:_}){let $={},k=[],et=[];const nt=ot=>{const ht=ot.filter(_t=>!et.some(kt=>kt.id===_t.id)),vt=et.filter(_t=>!ot.some(kt=>kt.id===_t.id));et=ot,ht.forEach(async _t=>{const kt=new MediaStream([]);$[_t.id]=kt;const $t=kt.getVideoTracks();a({id:`rtmp-${_t.id}`,isActive:!0,value:kt,props:{id:_t.id,isMuted:!1,participantId:_t.id,type:"rtmp",videoEnabled:!!$t.length,audioEnabled:!0}})}),vt.forEach(_t=>{c(`rtmp-${_t.id}`)})};CoreContext.on("ActiveProjectChanged",({projectId:ot})=>{const vt=toBaseProject(getProject(ot)).sources.filter(_t=>{var kt,$t;return!(($t=(kt=_t.address)==null?void 0:kt.dynamic)!=null&&$t.id)});nt(vt)}),CoreContext.on("RoomJoined",({projectId:ot,room:ht})=>{if(toBaseProject(getProject(ot)).role!==Role.ROLE_RENDERER){const _t=()=>{k.filter(kt=>(kt==null?void 0:kt.type)==="screen_share"&&(kt==null?void 0:kt.isExternal)===!0).forEach(kt=>{if(kt.type==="screen_share"){const $t=$[kt.participantId],Tt=ht.getParticipant(kt.participantId);if(et.some(At=>At.id===Tt.id)){const At=ht.getTrack(kt.id);if(_(`rtmp-${Tt==null?void 0:Tt.id}`)){const Dt=ht.getTracks().find(Rt=>Rt.participantId===Tt.id&&Rt.mediaStreamTrack.kind==="audio");updateMediaStreamTracks($t,{video:At==null?void 0:At.mediaStreamTrack,audio:Dt==null?void 0:Dt.mediaStreamTrack}),b(`rtmp-${Tt==null?void 0:Tt.id}`,{videoEnabled:!!(At!=null&&At.mediaStreamTrack&&!At.isMuted),audioEnabled:!!(Dt&&!Dt.isMuted)})}}}})};ht.useTracks(kt=>{const $t=kt.filter(Mt=>et.some(Dt=>Dt.id===Mt.participantId)).filter(Mt=>["screen_share"].includes(Mt.type)),Tt=$t.filter(Mt=>!k.some(Dt=>Dt.id===Mt.id)&&!!(Mt!=null&&Mt.mediaStreamTrack)),At=k.filter(Mt=>!$t.some(Dt=>Dt.id===Mt.id));k=$t.filter(Mt=>!!(Mt!=null&&Mt.mediaStreamTrack)),At.forEach(Mt=>{const Dt=$[Mt.participantId];Mt.mediaStreamTrack.kind==="video"&&(updateMediaStreamTracks(Dt,{video:null}),b(`rtmp-${Mt.participantId}`,{videoEnabled:!1})),Mt.mediaStreamTrack.kind==="audio"&&(updateMediaStreamTracks(Dt,{audio:null}),b(`rtmp-${Mt.participantId}`,{audioEnabled:!1}))}),Tt.forEach(Mt=>{if(Mt.type==="screen_share"&&Mt.mediaStreamTrack.kind==="video"){const Dt=$[Mt.participantId],Rt=k.find(xt=>{var Jt;return xt.participantId===Mt.participantId&&((Jt=xt.mediaStreamTrack)==null?void 0:Jt.kind)==="audio"});updateMediaStreamTracks(Dt,{video:Mt==null?void 0:Mt.mediaStreamTrack,audio:Rt==null?void 0:Rt.mediaStreamTrack}),b(`rtmp-${Mt.participantId}`,{videoEnabled:!!(Mt&&!(Mt!=null&&Mt.isMuted)),audioEnabled:!!(Rt&&!(Rt!=null&&Rt.isMuted))})}}),_t()})}}),CoreContext.onInternal("SourceConnected",async ot=>{const ht=$[ot];if(ht){const vt=await connectDevice(ot);if(_(`rtmp-${ot}`)&&vt){const kt=vt.getAudioTracks()[0],$t=vt.getVideoTracks()[0];updateMediaStreamTracks(ht,{video:$t,audio:kt}),b(`rtmp-${ot}`,{videoEnabled:!!$t,audioEnabled:!!kt})}}}),CoreContext.onInternal("SourceDisconnected",async ot=>{const ht=$[ot];ht&&((ht==null?void 0:ht.getTracks()).forEach(_t=>{var kt;(kt=$[ot])==null||kt.removeTrack(_t)}),b(`rtmp-${ot}`,{videoEnabled:!1,audioEnabled:!1}))}),CoreContext.on("ProjectSourceAdded",({source:ot,projectId:ht})=>{const _t=toBaseProject(getProject(ht)).sources.filter(kt=>{var $t,Tt;return!((Tt=($t=kt.address)==null?void 0:$t.dynamic)!=null&&Tt.id)});nt(_t)}),CoreContext.on("ProjectSourceRemoved",({sourceId:ot,projectId:ht})=>{const _t=toBaseProject(getProject(ht)).sources.filter(kt=>{var $t,Tt;return!((Tt=($t=kt.address)==null?void 0:$t.dynamic)!=null&&Tt.id)});nt(_t)})}},Game={type:"Game",valueType:MediaStream,props:{id:{},type:{},videoEnabled:{},audioEnabled:{}},init({addSource:a,removeSource:c,updateSource:b,getSource:_,modifySourceValue:$}){let k=[],et=[];const nt=ot=>{const ht=ot.filter(_t=>!et.some(kt=>kt.id===_t.id)),vt=et.filter(_t=>!ot.some(kt=>kt.id===_t.id));et=ot,ht.forEach(async _t=>{var Tt,At,Mt,Dt,Rt,xt,Jt,ar;const kt=new MediaStream([]),$t=kt.getVideoTracks();a({id:`game-${(At=(Tt=_t.preview)==null?void 0:Tt.webrtc)==null?void 0:At.participantId}`,isActive:!0,value:kt,props:{displayName:((Dt=(Mt=_t.preview)==null?void 0:Mt.webrtc)==null?void 0:Dt.displayName)||_t.id,id:(xt=(Rt=_t.preview)==null?void 0:Rt.webrtc)==null?void 0:xt.participantId,isMuted:!1,participantId:(ar=(Jt=_t.preview)==null?void 0:Jt.webrtc)==null?void 0:ar.participantId,type:"game",videoEnabled:!!$t.length,audioEnabled:!0}})}),vt.forEach(_t=>{var kt,$t;c(`game-${($t=(kt=_t.preview)==null?void 0:kt.webrtc)==null?void 0:$t.participantId}`)})};CoreContext.on("RoomJoined",({projectId:ot,room:ht})=>{if(toBaseProject(getProject(ot)).role!==Role.ROLE_RENDERER){const _t=()=>{k.filter(kt=>(kt==null?void 0:kt.type)==="camera"&&(kt==null?void 0:kt.isExternal)===!0).forEach(kt=>{var $t;if(kt.type==="camera"){const Tt=ht.getParticipant(kt.participantId);if(et.some(Mt=>{var Dt,Rt;return((Rt=(Dt=Mt.preview)==null?void 0:Dt.webrtc)==null?void 0:Rt.participantId)===Tt.id})){const Mt=ht.getTrack(kt.id);if(_(`game-${Tt==null?void 0:Tt.id}`)){const Rt=ht.getTracks().find(xt=>xt.participantId===Tt.id&&xt.mediaStreamTrack.kind==="audio");$(`game-${Tt==null?void 0:Tt.id}`,xt=>{updateMediaStreamTracks(xt,{video:Mt==null?void 0:Mt.mediaStreamTrack,audio:Rt==null?void 0:Rt.mediaStreamTrack})}),b(`game-${Tt==null?void 0:Tt.id}`,{videoEnabled:!!(Mt!=null&&Mt.mediaStreamTrack&&!Mt.isMuted),audioEnabled:!!(Rt&&!Rt.isMuted),displayName:(($t=Tt.meta)==null?void 0:$t.screenDisplayName)||(Tt==null?void 0:Tt.displayName)||"Game Source"})}}}})};ht.useTracks(kt=>{const $t=kt.filter(Mt=>et.some(Dt=>{var Rt,xt;return((xt=(Rt=Dt.preview)==null?void 0:Rt.webrtc)==null?void 0:xt.participantId)===Mt.participantId})).filter(Mt=>["camera"].includes(Mt.type)),Tt=$t.filter(Mt=>!k.some(Dt=>Dt.id===Mt.id)&&!!(Mt!=null&&Mt.mediaStreamTrack)),At=k.filter(Mt=>!$t.some(Dt=>Dt.id===Mt.id));k=$t.filter(Mt=>!!(Mt!=null&&Mt.mediaStreamTrack)),At.forEach(Mt=>{const{participantId:Dt}=Mt;Mt.mediaStreamTrack.kind==="video"&&($(`game-${Dt}`,Rt=>{updateMediaStreamTracks(Rt,{video:null})}),b(`game-${Dt}`,{videoEnabled:!1})),Mt.mediaStreamTrack.kind==="audio"&&($(`game-${Dt}`,Rt=>{updateMediaStreamTracks(Rt,{audio:null})}),b(`game-${Dt}`,{audioEnabled:!1}))}),Tt.forEach(Mt=>{if(Mt.type==="camera"&&Mt.mediaStreamTrack.kind==="video"){const Dt=k.find(Rt=>{var xt;return Rt.participantId===Mt.participantId&&((xt=Rt.mediaStreamTrack)==null?void 0:xt.kind)==="audio"});$(`game-${Mt.participantId}`,Rt=>{updateMediaStreamTracks(Rt,{video:Mt==null?void 0:Mt.mediaStreamTrack,audio:Dt==null?void 0:Dt.mediaStreamTrack})}),b(`game-${Mt.participantId}`,{videoEnabled:!!(Mt&&!(Mt!=null&&Mt.isMuted)),audioEnabled:!!(Dt&&!(Dt!=null&&Dt.isMuted))})}}),_t()})}ht.useParticipants(_t=>{_t.filter($t=>$t.id.startsWith("source")).forEach($t=>{var At;_(`game-${$t.id}`)&&b(`game-${$t.id}`,{displayName:((At=$t.meta)==null?void 0:At.screenDisplayName)||($t==null?void 0:$t.displayName)||"Game Source"})})})}),CoreContext.on("ActiveProjectChanged",({projectId:ot})=>{const vt=toBaseProject(getProject(ot)).sources.filter(_t=>{var kt,$t;return($t=(kt=_t.address)==null?void 0:kt.dynamic)==null?void 0:$t.id});nt(vt)}),CoreContext.onInternal("SourceConnected",async ot=>{const ht=await connectDevice(ot);if(_(`game-source-${ot}`)&&ht){const _t=ht.getAudioTracks()[0],kt=ht.getVideoTracks()[0];$(`game-source-${ot}`,$t=>{updateMediaStreamTracks($t,{video:kt,audio:_t})}),b(`game-source-${ot}`,{videoEnabled:!!kt,audioEnabled:!!_t})}}),CoreContext.onInternal("SourceDisconnected",ot=>{var vt;const ht=(vt=_(`game-source-${ot}`))==null?void 0:vt.value;ht&&((ht==null?void 0:ht.getTracks()).forEach(kt=>{ht==null||ht.removeTrack(kt)}),b(`game-source-${ot}`,{videoEnabled:!1,audioEnabled:!1}))}),CoreContext.on("ProjectSourceAdded",({source:ot,projectId:ht})=>{const vt=toBaseProject(getProject(ht));nt(vt.sources.filter(_t=>{var kt,$t;return($t=(kt=_t.address)==null?void 0:kt.dynamic)==null?void 0:$t.id}))}),CoreContext.on("ProjectSourceRemoved",({sourceId:ot,projectId:ht})=>{const vt=toBaseProject(getProject(ht));nt(vt.sources.filter(_t=>{var kt,$t;return($t=(kt=_t.address)==null?void 0:kt.dynamic)==null?void 0:$t.id}))})}},Sources=Object.freeze(Object.defineProperty({__proto__:null,Banner:Banner$1,Game,RTMP,RoomParticipant:RoomParticipant$1},Symbol.toStringTag,{value:"Module"}));var reactDom={exports:{}},reactDom_production_min={},scheduler={exports:{}},scheduler_production_min={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(a){function c(Et,pt){var rt=Et.length;Et.push(pt);e:for(;0<rt;){var mt=rt-1>>>1,Lt=Et[mt];if(0<$(Lt,pt))Et[mt]=pt,Et[rt]=Lt,rt=mt;else break e}}function b(Et){return Et.length===0?null:Et[0]}function _(Et){if(Et.length===0)return null;var pt=Et[0],rt=Et.pop();if(rt!==pt){Et[0]=rt;e:for(var mt=0,Lt=Et.length,Gt=Lt>>>1;mt<Gt;){var rr=2*(mt+1)-1,ir=Et[rr],Wt=rr+1,zt=Et[Wt];if(0>$(ir,rt))Wt<Lt&&0>$(zt,ir)?(Et[mt]=zt,Et[Wt]=rt,mt=Wt):(Et[mt]=ir,Et[rr]=rt,mt=rr);else if(Wt<Lt&&0>$(zt,rt))Et[mt]=zt,Et[Wt]=rt,mt=Wt;else break e}}return pt}function $(Et,pt){var rt=Et.sortIndex-pt.sortIndex;return rt!==0?rt:Et.id-pt.id}if(typeof performance=="object"&&typeof performance.now=="function"){var k=performance;a.unstable_now=function(){return k.now()}}else{var et=Date,nt=et.now();a.unstable_now=function(){return et.now()-nt}}var ot=[],ht=[],vt=1,_t=null,kt=3,$t=!1,Tt=!1,At=!1,Mt=typeof setTimeout=="function"?setTimeout:null,Dt=typeof clearTimeout=="function"?clearTimeout:null,Rt=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function xt(Et){for(var pt=b(ht);pt!==null;){if(pt.callback===null)_(ht);else if(pt.startTime<=Et)_(ht),pt.sortIndex=pt.expirationTime,c(ot,pt);else break;pt=b(ht)}}function Jt(Et){if(At=!1,xt(Et),!Tt)if(b(ot)!==null)Tt=!0,lt(ar);else{var pt=b(ht);pt!==null&&gt(Jt,pt.startTime-Et)}}function ar(Et,pt){Tt=!1,At&&(At=!1,Dt(ur),ur=-1),$t=!0;var rt=kt;try{for(xt(pt),_t=b(ot);_t!==null&&(!(_t.expirationTime>pt)||Et&&!ut());){var mt=_t.callback;if(typeof mt=="function"){_t.callback=null,kt=_t.priorityLevel;var Lt=mt(_t.expirationTime<=pt);pt=a.unstable_now(),typeof Lt=="function"?_t.callback=Lt:_t===b(ot)&&_(ot),xt(pt)}else _(ot);_t=b(ot)}if(_t!==null)var Gt=!0;else{var rr=b(ht);rr!==null&&gt(Jt,rr.startTime-pt),Gt=!1}return Gt}finally{_t=null,kt=rt,$t=!1}}var nr=!1,pr=null,ur=-1,Ot=5,It=-1;function ut(){return!(a.unstable_now()-It<Ot)}function _e(){if(pr!==null){var Et=a.unstable_now();It=Et;var pt=!0;try{pt=pr(!0,Et)}finally{pt?tt():(nr=!1,pr=null)}}else nr=!1}var tt;if(typeof Rt=="function")tt=function(){Rt(_e)};else if(typeof MessageChannel<"u"){var it=new MessageChannel,dt=it.port2;it.port1.onmessage=_e,tt=function(){dt.postMessage(null)}}else tt=function(){Mt(_e,0)};function lt(Et){pr=Et,nr||(nr=!0,tt())}function gt(Et,pt){ur=Mt(function(){Et(a.unstable_now())},pt)}a.unstable_IdlePriority=5,a.unstable_ImmediatePriority=1,a.unstable_LowPriority=4,a.unstable_NormalPriority=3,a.unstable_Profiling=null,a.unstable_UserBlockingPriority=2,a.unstable_cancelCallback=function(Et){Et.callback=null},a.unstable_continueExecution=function(){Tt||$t||(Tt=!0,lt(ar))},a.unstable_forceFrameRate=function(Et){0>Et||125<Et?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Ot=0<Et?Math.floor(1e3/Et):5},a.unstable_getCurrentPriorityLevel=function(){return kt},a.unstable_getFirstCallbackNode=function(){return b(ot)},a.unstable_next=function(Et){switch(kt){case 1:case 2:case 3:var pt=3;break;default:pt=kt}var rt=kt;kt=pt;try{return Et()}finally{kt=rt}},a.unstable_pauseExecution=function(){},a.unstable_requestPaint=function(){},a.unstable_runWithPriority=function(Et,pt){switch(Et){case 1:case 2:case 3:case 4:case 5:break;default:Et=3}var rt=kt;kt=Et;try{return pt()}finally{kt=rt}},a.unstable_scheduleCallback=function(Et,pt,rt){var mt=a.unstable_now();switch(typeof rt=="object"&&rt!==null?(rt=rt.delay,rt=typeof rt=="number"&&0<rt?mt+rt:mt):rt=mt,Et){case 1:var Lt=-1;break;case 2:Lt=250;break;case 5:Lt=1073741823;break;case 4:Lt=1e4;break;default:Lt=5e3}return Lt=rt+Lt,Et={id:vt++,callback:pt,priorityLevel:Et,startTime:rt,expirationTime:Lt,sortIndex:-1},rt>mt?(Et.sortIndex=rt,c(ht,Et),b(ot)===null&&Et===b(ht)&&(At?(Dt(ur),ur=-1):At=!0,gt(Jt,rt-mt))):(Et.sortIndex=Lt,c(ot,Et),Tt||$t||(Tt=!0,lt(ar))),Et},a.unstable_shouldYield=ut,a.unstable_wrapCallback=function(Et){var pt=kt;return function(){var rt=kt;kt=pt;try{return Et.apply(this,arguments)}finally{kt=rt}}}})(scheduler_production_min);scheduler.exports=scheduler_production_min;var schedulerExports=scheduler.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aa=reactExports,ca=schedulerExports;function p(a){for(var c="https://reactjs.org/docs/error-decoder.html?invariant="+a,b=1;b<arguments.length;b++)c+="&args[]="+encodeURIComponent(arguments[b]);return"Minified React error #"+a+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var da=new Set,ea={};function fa(a,c){ha(a,c),ha(a+"Capture",c)}function ha(a,c){for(ea[a]=c,a=0;a<c.length;a++)da.add(c[a])}var ia=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ja=Object.prototype.hasOwnProperty,ka=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,la={},ma={};function oa(a){return ja.call(ma,a)?!0:ja.call(la,a)?!1:ka.test(a)?ma[a]=!0:(la[a]=!0,!1)}function pa(a,c,b,_){if(b!==null&&b.type===0)return!1;switch(typeof c){case"function":case"symbol":return!0;case"boolean":return _?!1:b!==null?!b.acceptsBooleans:(a=a.toLowerCase().slice(0,5),a!=="data-"&&a!=="aria-");default:return!1}}function qa(a,c,b,_){if(c===null||typeof c>"u"||pa(a,c,b,_))return!0;if(_)return!1;if(b!==null)switch(b.type){case 3:return!c;case 4:return c===!1;case 5:return isNaN(c);case 6:return isNaN(c)||1>c}return!1}function v(a,c,b,_,$,k,et){this.acceptsBooleans=c===2||c===3||c===4,this.attributeName=_,this.attributeNamespace=$,this.mustUseProperty=b,this.propertyName=a,this.type=c,this.sanitizeURL=k,this.removeEmptyString=et}var z={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(a){z[a]=new v(a,0,!1,a,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(a){var c=a[0];z[c]=new v(c,1,!1,a[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(a){z[a]=new v(a,2,!1,a.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(a){z[a]=new v(a,2,!1,a,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(a){z[a]=new v(a,3,!1,a.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(a){z[a]=new v(a,3,!0,a,null,!1,!1)});["capture","download"].forEach(function(a){z[a]=new v(a,4,!1,a,null,!1,!1)});["cols","rows","size","span"].forEach(function(a){z[a]=new v(a,6,!1,a,null,!1,!1)});["rowSpan","start"].forEach(function(a){z[a]=new v(a,5,!1,a.toLowerCase(),null,!1,!1)});var ra=/[\-:]([a-z])/g;function sa(a){return a[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(a){var c=a.replace(ra,sa);z[c]=new v(c,1,!1,a,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(a){var c=a.replace(ra,sa);z[c]=new v(c,1,!1,a,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(a){var c=a.replace(ra,sa);z[c]=new v(c,1,!1,a,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(a){z[a]=new v(a,1,!1,a.toLowerCase(),null,!1,!1)});z.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(a){z[a]=new v(a,1,!1,a.toLowerCase(),null,!0,!0)});function ta(a,c,b,_){var $=z.hasOwnProperty(c)?z[c]:null;($!==null?$.type!==0:_||!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(qa(c,b,$,_)&&(b=null),_||$===null?oa(c)&&(b===null?a.removeAttribute(c):a.setAttribute(c,""+b)):$.mustUseProperty?a[$.propertyName]=b===null?$.type===3?!1:"":b:(c=$.attributeName,_=$.attributeNamespace,b===null?a.removeAttribute(c):($=$.type,b=$===3||$===4&&b===!0?"":""+b,_?a.setAttributeNS(_,c,b):a.setAttribute(c,b))))}var ua=aa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,va=Symbol.for("react.element"),wa=Symbol.for("react.portal"),ya=Symbol.for("react.fragment"),za=Symbol.for("react.strict_mode"),Aa=Symbol.for("react.profiler"),Ba=Symbol.for("react.provider"),Ca=Symbol.for("react.context"),Da=Symbol.for("react.forward_ref"),Ea=Symbol.for("react.suspense"),Fa=Symbol.for("react.suspense_list"),Ga=Symbol.for("react.memo"),Ha=Symbol.for("react.lazy"),Ia=Symbol.for("react.offscreen"),Ja=Symbol.iterator;function Ka(a){return a===null||typeof a!="object"?null:(a=Ja&&a[Ja]||a["@@iterator"],typeof a=="function"?a:null)}var A=Object.assign,La;function Ma(a){if(La===void 0)try{throw Error()}catch(b){var c=b.stack.trim().match(/\n( *(at )?)/);La=c&&c[1]||""}return`
`+La+a}var Na=!1;function Oa(a,c){if(!a||Na)return"";Na=!0;var b=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(c)if(c=function(){throw Error()},Object.defineProperty(c.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(c,[])}catch(ht){var _=ht}Reflect.construct(a,[],c)}else{try{c.call()}catch(ht){_=ht}a.call(c.prototype)}else{try{throw Error()}catch(ht){_=ht}a()}}catch(ht){if(ht&&_&&typeof ht.stack=="string"){for(var $=ht.stack.split(`
`),k=_.stack.split(`
`),et=$.length-1,nt=k.length-1;1<=et&&0<=nt&&$[et]!==k[nt];)nt--;for(;1<=et&&0<=nt;et--,nt--)if($[et]!==k[nt]){if(et!==1||nt!==1)do if(et--,nt--,0>nt||$[et]!==k[nt]){var ot=`
`+$[et].replace(" at new "," at ");return a.displayName&&ot.includes("<anonymous>")&&(ot=ot.replace("<anonymous>",a.displayName)),ot}while(1<=et&&0<=nt);break}}}finally{Na=!1,Error.prepareStackTrace=b}return(a=a?a.displayName||a.name:"")?Ma(a):""}function Pa(a){switch(a.tag){case 5:return Ma(a.type);case 16:return Ma("Lazy");case 13:return Ma("Suspense");case 19:return Ma("SuspenseList");case 0:case 2:case 15:return a=Oa(a.type,!1),a;case 11:return a=Oa(a.type.render,!1),a;case 1:return a=Oa(a.type,!0),a;default:return""}}function Qa(a){if(a==null)return null;if(typeof a=="function")return a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case ya:return"Fragment";case wa:return"Portal";case Aa:return"Profiler";case za:return"StrictMode";case Ea:return"Suspense";case Fa:return"SuspenseList"}if(typeof a=="object")switch(a.$$typeof){case Ca:return(a.displayName||"Context")+".Consumer";case Ba:return(a._context.displayName||"Context")+".Provider";case Da:var c=a.render;return a=a.displayName,a||(a=c.displayName||c.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case Ga:return c=a.displayName||null,c!==null?c:Qa(a.type)||"Memo";case Ha:c=a._payload,a=a._init;try{return Qa(a(c))}catch{}}return null}function Ra(a){var c=a.type;switch(a.tag){case 24:return"Cache";case 9:return(c.displayName||"Context")+".Consumer";case 10:return(c._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return a=c.render,a=a.displayName||a.name||"",c.displayName||(a!==""?"ForwardRef("+a+")":"ForwardRef");case 7:return"Fragment";case 5:return c;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Qa(c);case 8:return c===za?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof c=="function")return c.displayName||c.name||null;if(typeof c=="string")return c}return null}function Sa(a){switch(typeof a){case"boolean":case"number":case"string":case"undefined":return a;case"object":return a;default:return""}}function Ta(a){var c=a.type;return(a=a.nodeName)&&a.toLowerCase()==="input"&&(c==="checkbox"||c==="radio")}function Ua(a){var c=Ta(a)?"checked":"value",b=Object.getOwnPropertyDescriptor(a.constructor.prototype,c),_=""+a[c];if(!a.hasOwnProperty(c)&&typeof b<"u"&&typeof b.get=="function"&&typeof b.set=="function"){var $=b.get,k=b.set;return Object.defineProperty(a,c,{configurable:!0,get:function(){return $.call(this)},set:function(et){_=""+et,k.call(this,et)}}),Object.defineProperty(a,c,{enumerable:b.enumerable}),{getValue:function(){return _},setValue:function(et){_=""+et},stopTracking:function(){a._valueTracker=null,delete a[c]}}}}function Va(a){a._valueTracker||(a._valueTracker=Ua(a))}function Wa(a){if(!a)return!1;var c=a._valueTracker;if(!c)return!0;var b=c.getValue(),_="";return a&&(_=Ta(a)?a.checked?"true":"false":a.value),a=_,a!==b?(c.setValue(a),!0):!1}function Xa(a){if(a=a||(typeof document<"u"?document:void 0),typeof a>"u")return null;try{return a.activeElement||a.body}catch{return a.body}}function Ya(a,c){var b=c.checked;return A({},c,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:b??a._wrapperState.initialChecked})}function Za(a,c){var b=c.defaultValue==null?"":c.defaultValue,_=c.checked!=null?c.checked:c.defaultChecked;b=Sa(c.value!=null?c.value:b),a._wrapperState={initialChecked:_,initialValue:b,controlled:c.type==="checkbox"||c.type==="radio"?c.checked!=null:c.value!=null}}function ab(a,c){c=c.checked,c!=null&&ta(a,"checked",c,!1)}function bb(a,c){ab(a,c);var b=Sa(c.value),_=c.type;if(b!=null)_==="number"?(b===0&&a.value===""||a.value!=b)&&(a.value=""+b):a.value!==""+b&&(a.value=""+b);else if(_==="submit"||_==="reset"){a.removeAttribute("value");return}c.hasOwnProperty("value")?cb(a,c.type,b):c.hasOwnProperty("defaultValue")&&cb(a,c.type,Sa(c.defaultValue)),c.checked==null&&c.defaultChecked!=null&&(a.defaultChecked=!!c.defaultChecked)}function db(a,c,b){if(c.hasOwnProperty("value")||c.hasOwnProperty("defaultValue")){var _=c.type;if(!(_!=="submit"&&_!=="reset"||c.value!==void 0&&c.value!==null))return;c=""+a._wrapperState.initialValue,b||c===a.value||(a.value=c),a.defaultValue=c}b=a.name,b!==""&&(a.name=""),a.defaultChecked=!!a._wrapperState.initialChecked,b!==""&&(a.name=b)}function cb(a,c,b){(c!=="number"||Xa(a.ownerDocument)!==a)&&(b==null?a.defaultValue=""+a._wrapperState.initialValue:a.defaultValue!==""+b&&(a.defaultValue=""+b))}var eb=Array.isArray;function fb(a,c,b,_){if(a=a.options,c){c={};for(var $=0;$<b.length;$++)c["$"+b[$]]=!0;for(b=0;b<a.length;b++)$=c.hasOwnProperty("$"+a[b].value),a[b].selected!==$&&(a[b].selected=$),$&&_&&(a[b].defaultSelected=!0)}else{for(b=""+Sa(b),c=null,$=0;$<a.length;$++){if(a[$].value===b){a[$].selected=!0,_&&(a[$].defaultSelected=!0);return}c!==null||a[$].disabled||(c=a[$])}c!==null&&(c.selected=!0)}}function gb(a,c){if(c.dangerouslySetInnerHTML!=null)throw Error(p(91));return A({},c,{value:void 0,defaultValue:void 0,children:""+a._wrapperState.initialValue})}function hb(a,c){var b=c.value;if(b==null){if(b=c.children,c=c.defaultValue,b!=null){if(c!=null)throw Error(p(92));if(eb(b)){if(1<b.length)throw Error(p(93));b=b[0]}c=b}c==null&&(c=""),b=c}a._wrapperState={initialValue:Sa(b)}}function ib(a,c){var b=Sa(c.value),_=Sa(c.defaultValue);b!=null&&(b=""+b,b!==a.value&&(a.value=b),c.defaultValue==null&&a.defaultValue!==b&&(a.defaultValue=b)),_!=null&&(a.defaultValue=""+_)}function jb(a){var c=a.textContent;c===a._wrapperState.initialValue&&c!==""&&c!==null&&(a.value=c)}function kb(a){switch(a){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lb(a,c){return a==null||a==="http://www.w3.org/1999/xhtml"?kb(c):a==="http://www.w3.org/2000/svg"&&c==="foreignObject"?"http://www.w3.org/1999/xhtml":a}var mb,nb=function(a){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(c,b,_,$){MSApp.execUnsafeLocalFunction(function(){return a(c,b,_,$)})}:a}(function(a,c){if(a.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in a)a.innerHTML=c;else{for(mb=mb||document.createElement("div"),mb.innerHTML="<svg>"+c.valueOf().toString()+"</svg>",c=mb.firstChild;a.firstChild;)a.removeChild(a.firstChild);for(;c.firstChild;)a.appendChild(c.firstChild)}});function ob(a,c){if(c){var b=a.firstChild;if(b&&b===a.lastChild&&b.nodeType===3){b.nodeValue=c;return}}a.textContent=c}var pb={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},qb=["Webkit","ms","Moz","O"];Object.keys(pb).forEach(function(a){qb.forEach(function(c){c=c+a.charAt(0).toUpperCase()+a.substring(1),pb[c]=pb[a]})});function rb(a,c,b){return c==null||typeof c=="boolean"||c===""?"":b||typeof c!="number"||c===0||pb.hasOwnProperty(a)&&pb[a]?(""+c).trim():c+"px"}function sb(a,c){a=a.style;for(var b in c)if(c.hasOwnProperty(b)){var _=b.indexOf("--")===0,$=rb(b,c[b],_);b==="float"&&(b="cssFloat"),_?a.setProperty(b,$):a[b]=$}}var tb=A({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ub(a,c){if(c){if(tb[a]&&(c.children!=null||c.dangerouslySetInnerHTML!=null))throw Error(p(137,a));if(c.dangerouslySetInnerHTML!=null){if(c.children!=null)throw Error(p(60));if(typeof c.dangerouslySetInnerHTML!="object"||!("__html"in c.dangerouslySetInnerHTML))throw Error(p(61))}if(c.style!=null&&typeof c.style!="object")throw Error(p(62))}}function vb(a,c){if(a.indexOf("-")===-1)return typeof c.is=="string";switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wb=null;function xb(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&&(a=a.correspondingUseElement),a.nodeType===3?a.parentNode:a}var yb=null,zb=null,Ab=null;function Bb(a){if(a=Cb(a)){if(typeof yb!="function")throw Error(p(280));var c=a.stateNode;c&&(c=Db(c),yb(a.stateNode,a.type,c))}}function Eb(a){zb?Ab?Ab.push(a):Ab=[a]:zb=a}function Fb(){if(zb){var a=zb,c=Ab;if(Ab=zb=null,Bb(a),c)for(a=0;a<c.length;a++)Bb(c[a])}}function Gb(a,c){return a(c)}function Hb(){}var Ib=!1;function Jb(a,c,b){if(Ib)return a(c,b);Ib=!0;try{return Gb(a,c,b)}finally{Ib=!1,(zb!==null||Ab!==null)&&(Hb(),Fb())}}function Kb(a,c){var b=a.stateNode;if(b===null)return null;var _=Db(b);if(_===null)return null;b=_[c];e:switch(c){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(_=!_.disabled)||(a=a.type,_=!(a==="button"||a==="input"||a==="select"||a==="textarea")),a=!_;break e;default:a=!1}if(a)return null;if(b&&typeof b!="function")throw Error(p(231,c,typeof b));return b}var Lb=!1;if(ia)try{var Mb={};Object.defineProperty(Mb,"passive",{get:function(){Lb=!0}}),window.addEventListener("test",Mb,Mb),window.removeEventListener("test",Mb,Mb)}catch(a){Lb=!1}function Nb(a,c,b,_,$,k,et,nt,ot){var ht=Array.prototype.slice.call(arguments,3);try{c.apply(b,ht)}catch(vt){this.onError(vt)}}var Ob=!1,Pb=null,Qb=!1,Rb=null,Sb={onError:function(a){Ob=!0,Pb=a}};function Tb(a,c,b,_,$,k,et,nt,ot){Ob=!1,Pb=null,Nb.apply(Sb,arguments)}function Ub(a,c,b,_,$,k,et,nt,ot){if(Tb.apply(this,arguments),Ob){if(Ob){var ht=Pb;Ob=!1,Pb=null}else throw Error(p(198));Qb||(Qb=!0,Rb=ht)}}function Vb(a){var c=a,b=a;if(a.alternate)for(;c.return;)c=c.return;else{a=c;do c=a,c.flags&4098&&(b=c.return),a=c.return;while(a)}return c.tag===3?b:null}function Wb(a){if(a.tag===13){var c=a.memoizedState;if(c===null&&(a=a.alternate,a!==null&&(c=a.memoizedState)),c!==null)return c.dehydrated}return null}function Xb(a){if(Vb(a)!==a)throw Error(p(188))}function Yb(a){var c=a.alternate;if(!c){if(c=Vb(a),c===null)throw Error(p(188));return c!==a?null:a}for(var b=a,_=c;;){var $=b.return;if($===null)break;var k=$.alternate;if(k===null){if(_=$.return,_!==null){b=_;continue}break}if($.child===k.child){for(k=$.child;k;){if(k===b)return Xb($),a;if(k===_)return Xb($),c;k=k.sibling}throw Error(p(188))}if(b.return!==_.return)b=$,_=k;else{for(var et=!1,nt=$.child;nt;){if(nt===b){et=!0,b=$,_=k;break}if(nt===_){et=!0,_=$,b=k;break}nt=nt.sibling}if(!et){for(nt=k.child;nt;){if(nt===b){et=!0,b=k,_=$;break}if(nt===_){et=!0,_=k,b=$;break}nt=nt.sibling}if(!et)throw Error(p(189))}}if(b.alternate!==_)throw Error(p(190))}if(b.tag!==3)throw Error(p(188));return b.stateNode.current===b?a:c}function Zb(a){return a=Yb(a),a!==null?$b(a):null}function $b(a){if(a.tag===5||a.tag===6)return a;for(a=a.child;a!==null;){var c=$b(a);if(c!==null)return c;a=a.sibling}return null}var ac=ca.unstable_scheduleCallback,bc=ca.unstable_cancelCallback,cc=ca.unstable_shouldYield,dc=ca.unstable_requestPaint,B=ca.unstable_now,ec=ca.unstable_getCurrentPriorityLevel,fc=ca.unstable_ImmediatePriority,gc=ca.unstable_UserBlockingPriority,hc=ca.unstable_NormalPriority,ic=ca.unstable_LowPriority,jc=ca.unstable_IdlePriority,kc=null,lc=null;function mc(a){if(lc&&typeof lc.onCommitFiberRoot=="function")try{lc.onCommitFiberRoot(kc,a,void 0,(a.current.flags&128)===128)}catch{}}var oc=Math.clz32?Math.clz32:nc,pc=Math.log,qc=Math.LN2;function nc(a){return a>>>=0,a===0?32:31-(pc(a)/qc|0)|0}var rc=64,sc=4194304;function tc(a){switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return a&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return a}}function uc(a,c){var b=a.pendingLanes;if(b===0)return 0;var _=0,$=a.suspendedLanes,k=a.pingedLanes,et=b&268435455;if(et!==0){var nt=et&~$;nt!==0?_=tc(nt):(k&=et,k!==0&&(_=tc(k)))}else et=b&~$,et!==0?_=tc(et):k!==0&&(_=tc(k));if(_===0)return 0;if(c!==0&&c!==_&&!(c&$)&&($=_&-_,k=c&-c,$>=k||$===16&&(k&4194240)!==0))return c;if(_&4&&(_|=b&16),c=a.entangledLanes,c!==0)for(a=a.entanglements,c&=_;0<c;)b=31-oc(c),$=1<<b,_|=a[b],c&=~$;return _}function vc(a,c){switch(a){case 1:case 2:case 4:return c+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wc(a,c){for(var b=a.suspendedLanes,_=a.pingedLanes,$=a.expirationTimes,k=a.pendingLanes;0<k;){var et=31-oc(k),nt=1<<et,ot=$[et];ot===-1?(!(nt&b)||nt&_)&&($[et]=vc(nt,c)):ot<=c&&(a.expiredLanes|=nt),k&=~nt}}function xc(a){return a=a.pendingLanes&-1073741825,a!==0?a:a&1073741824?1073741824:0}function yc(){var a=rc;return rc<<=1,!(rc&4194240)&&(rc=64),a}function zc(a){for(var c=[],b=0;31>b;b++)c.push(a);return c}function Ac(a,c,b){a.pendingLanes|=c,c!==536870912&&(a.suspendedLanes=0,a.pingedLanes=0),a=a.eventTimes,c=31-oc(c),a[c]=b}function Bc(a,c){var b=a.pendingLanes&~c;a.pendingLanes=c,a.suspendedLanes=0,a.pingedLanes=0,a.expiredLanes&=c,a.mutableReadLanes&=c,a.entangledLanes&=c,c=a.entanglements;var _=a.eventTimes;for(a=a.expirationTimes;0<b;){var $=31-oc(b),k=1<<$;c[$]=0,_[$]=-1,a[$]=-1,b&=~k}}function Cc(a,c){var b=a.entangledLanes|=c;for(a=a.entanglements;b;){var _=31-oc(b),$=1<<_;$&c|a[_]&c&&(a[_]|=c),b&=~$}}var C=0;function Dc(a){return a&=-a,1<a?4<a?a&268435455?16:536870912:4:1}var Ec,Fc,Gc,Hc,Ic,Jc=!1,Kc=[],Lc=null,Mc=null,Nc=null,Oc=new Map,Pc=new Map,Qc=[],Rc="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Sc(a,c){switch(a){case"focusin":case"focusout":Lc=null;break;case"dragenter":case"dragleave":Mc=null;break;case"mouseover":case"mouseout":Nc=null;break;case"pointerover":case"pointerout":Oc.delete(c.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pc.delete(c.pointerId)}}function Tc(a,c,b,_,$,k){return a===null||a.nativeEvent!==k?(a={blockedOn:c,domEventName:b,eventSystemFlags:_,nativeEvent:k,targetContainers:[$]},c!==null&&(c=Cb(c),c!==null&&Fc(c)),a):(a.eventSystemFlags|=_,c=a.targetContainers,$!==null&&c.indexOf($)===-1&&c.push($),a)}function Uc(a,c,b,_,$){switch(c){case"focusin":return Lc=Tc(Lc,a,c,b,_,$),!0;case"dragenter":return Mc=Tc(Mc,a,c,b,_,$),!0;case"mouseover":return Nc=Tc(Nc,a,c,b,_,$),!0;case"pointerover":var k=$.pointerId;return Oc.set(k,Tc(Oc.get(k)||null,a,c,b,_,$)),!0;case"gotpointercapture":return k=$.pointerId,Pc.set(k,Tc(Pc.get(k)||null,a,c,b,_,$)),!0}return!1}function Vc(a){var c=Wc(a.target);if(c!==null){var b=Vb(c);if(b!==null){if(c=b.tag,c===13){if(c=Wb(b),c!==null){a.blockedOn=c,Ic(a.priority,function(){Gc(b)});return}}else if(c===3&&b.stateNode.current.memoizedState.isDehydrated){a.blockedOn=b.tag===3?b.stateNode.containerInfo:null;return}}}a.blockedOn=null}function Xc(a){if(a.blockedOn!==null)return!1;for(var c=a.targetContainers;0<c.length;){var b=Yc(a.domEventName,a.eventSystemFlags,c[0],a.nativeEvent);if(b===null){b=a.nativeEvent;var _=new b.constructor(b.type,b);wb=_,b.target.dispatchEvent(_),wb=null}else return c=Cb(b),c!==null&&Fc(c),a.blockedOn=b,!1;c.shift()}return!0}function Zc(a,c,b){Xc(a)&&b.delete(c)}function $c(){Jc=!1,Lc!==null&&Xc(Lc)&&(Lc=null),Mc!==null&&Xc(Mc)&&(Mc=null),Nc!==null&&Xc(Nc)&&(Nc=null),Oc.forEach(Zc),Pc.forEach(Zc)}function ad(a,c){a.blockedOn===c&&(a.blockedOn=null,Jc||(Jc=!0,ca.unstable_scheduleCallback(ca.unstable_NormalPriority,$c)))}function bd(a){function c($){return ad($,a)}if(0<Kc.length){ad(Kc[0],a);for(var b=1;b<Kc.length;b++){var _=Kc[b];_.blockedOn===a&&(_.blockedOn=null)}}for(Lc!==null&&ad(Lc,a),Mc!==null&&ad(Mc,a),Nc!==null&&ad(Nc,a),Oc.forEach(c),Pc.forEach(c),b=0;b<Qc.length;b++)_=Qc[b],_.blockedOn===a&&(_.blockedOn=null);for(;0<Qc.length&&(b=Qc[0],b.blockedOn===null);)Vc(b),b.blockedOn===null&&Qc.shift()}var cd=ua.ReactCurrentBatchConfig,dd=!0;function ed(a,c,b,_){var $=C,k=cd.transition;cd.transition=null;try{C=1,fd(a,c,b,_)}finally{C=$,cd.transition=k}}function gd(a,c,b,_){var $=C,k=cd.transition;cd.transition=null;try{C=4,fd(a,c,b,_)}finally{C=$,cd.transition=k}}function fd(a,c,b,_){if(dd){var $=Yc(a,c,b,_);if($===null)hd(a,c,_,id,b),Sc(a,_);else if(Uc($,a,c,b,_))_.stopPropagation();else if(Sc(a,_),c&4&&-1<Rc.indexOf(a)){for(;$!==null;){var k=Cb($);if(k!==null&&Ec(k),k=Yc(a,c,b,_),k===null&&hd(a,c,_,id,b),k===$)break;$=k}$!==null&&_.stopPropagation()}else hd(a,c,_,null,b)}}var id=null;function Yc(a,c,b,_){if(id=null,a=xb(_),a=Wc(a),a!==null)if(c=Vb(a),c===null)a=null;else if(b=c.tag,b===13){if(a=Wb(c),a!==null)return a;a=null}else if(b===3){if(c.stateNode.current.memoizedState.isDehydrated)return c.tag===3?c.stateNode.containerInfo:null;a=null}else c!==a&&(a=null);return id=a,null}function jd(a){switch(a){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ec()){case fc:return 1;case gc:return 4;case hc:case ic:return 16;case jc:return 536870912;default:return 16}default:return 16}}var kd=null,ld=null,md=null;function nd(){if(md)return md;var a,c=ld,b=c.length,_,$="value"in kd?kd.value:kd.textContent,k=$.length;for(a=0;a<b&&c[a]===$[a];a++);var et=b-a;for(_=1;_<=et&&c[b-_]===$[k-_];_++);return md=$.slice(a,1<_?1-_:void 0)}function od(a){var c=a.keyCode;return"charCode"in a?(a=a.charCode,a===0&&c===13&&(a=13)):a=c,a===10&&(a=13),32<=a||a===13?a:0}function pd(){return!0}function qd(){return!1}function rd(a){function c(b,_,$,k,et){this._reactName=b,this._targetInst=$,this.type=_,this.nativeEvent=k,this.target=et,this.currentTarget=null;for(var nt in a)a.hasOwnProperty(nt)&&(b=a[nt],this[nt]=b?b(k):k[nt]);return this.isDefaultPrevented=(k.defaultPrevented!=null?k.defaultPrevented:k.returnValue===!1)?pd:qd,this.isPropagationStopped=qd,this}return A(c.prototype,{preventDefault:function(){this.defaultPrevented=!0;var b=this.nativeEvent;b&&(b.preventDefault?b.preventDefault():typeof b.returnValue!="unknown"&&(b.returnValue=!1),this.isDefaultPrevented=pd)},stopPropagation:function(){var b=this.nativeEvent;b&&(b.stopPropagation?b.stopPropagation():typeof b.cancelBubble!="unknown"&&(b.cancelBubble=!0),this.isPropagationStopped=pd)},persist:function(){},isPersistent:pd}),c}var sd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},td=rd(sd),ud=A({},sd,{view:0,detail:0}),vd=rd(ud),wd,xd,yd,Ad=A({},ud,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zd,button:0,buttons:0,relatedTarget:function(a){return a.relatedTarget===void 0?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){return"movementX"in a?a.movementX:(a!==yd&&(yd&&a.type==="mousemove"?(wd=a.screenX-yd.screenX,xd=a.screenY-yd.screenY):xd=wd=0,yd=a),wd)},movementY:function(a){return"movementY"in a?a.movementY:xd}}),Bd=rd(Ad),Cd=A({},Ad,{dataTransfer:0}),Dd=rd(Cd),Ed=A({},ud,{relatedTarget:0}),Fd=rd(Ed),Gd=A({},sd,{animationName:0,elapsedTime:0,pseudoElement:0}),Hd=rd(Gd),Id=A({},sd,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),Jd=rd(Id),Kd=A({},sd,{data:0}),Ld=rd(Kd),Md={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Nd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Od={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pd(a){var c=this.nativeEvent;return c.getModifierState?c.getModifierState(a):(a=Od[a])?!!c[a]:!1}function zd(){return Pd}var Qd=A({},ud,{key:function(a){if(a.key){var c=Md[a.key]||a.key;if(c!=="Unidentified")return c}return a.type==="keypress"?(a=od(a),a===13?"Enter":String.fromCharCode(a)):a.type==="keydown"||a.type==="keyup"?Nd[a.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zd,charCode:function(a){return a.type==="keypress"?od(a):0},keyCode:function(a){return a.type==="keydown"||a.type==="keyup"?a.keyCode:0},which:function(a){return a.type==="keypress"?od(a):a.type==="keydown"||a.type==="keyup"?a.keyCode:0}}),Rd=rd(Qd),Sd=A({},Ad,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Td=rd(Sd),Ud=A({},ud,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zd}),Vd=rd(Ud),Wd=A({},sd,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xd=rd(Wd),Yd=A({},Ad,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),Zd=rd(Yd),$d=[9,13,27,32],ae=ia&&"CompositionEvent"in window,be=null;ia&&"documentMode"in document&&(be=document.documentMode);var ce=ia&&"TextEvent"in window&&!be,de=ia&&(!ae||be&&8<be&&11>=be),ee=" ",fe=!1;function ge(a,c){switch(a){case"keyup":return $d.indexOf(c.keyCode)!==-1;case"keydown":return c.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function he(a){return a=a.detail,typeof a=="object"&&"data"in a?a.data:null}var ie=!1;function je(a,c){switch(a){case"compositionend":return he(c);case"keypress":return c.which!==32?null:(fe=!0,ee);case"textInput":return a=c.data,a===ee&&fe?null:a;default:return null}}function ke(a,c){if(ie)return a==="compositionend"||!ae&&ge(a,c)?(a=nd(),md=ld=kd=null,ie=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(c.ctrlKey||c.altKey||c.metaKey)||c.ctrlKey&&c.altKey){if(c.char&&1<c.char.length)return c.char;if(c.which)return String.fromCharCode(c.which)}return null;case"compositionend":return de&&c.locale!=="ko"?null:c.data;default:return null}}var le={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function me(a){var c=a&&a.nodeName&&a.nodeName.toLowerCase();return c==="input"?!!le[a.type]:c==="textarea"}function ne(a,c,b,_){Eb(_),c=oe(c,"onChange"),0<c.length&&(b=new td("onChange","change",null,b,_),a.push({event:b,listeners:c}))}var pe=null,qe=null;function re(a){se(a,0)}function te(a){var c=ue(a);if(Wa(c))return a}function ve(a,c){if(a==="change")return c}var we=!1;if(ia){var xe;if(ia){var ye="oninput"in document;if(!ye){var ze=document.createElement("div");ze.setAttribute("oninput","return;"),ye=typeof ze.oninput=="function"}xe=ye}else xe=!1;we=xe&&(!document.documentMode||9<document.documentMode)}function Ae(){pe&&(pe.detachEvent("onpropertychange",Be),qe=pe=null)}function Be(a){if(a.propertyName==="value"&&te(qe)){var c=[];ne(c,qe,a,xb(a)),Jb(re,c)}}function Ce(a,c,b){a==="focusin"?(Ae(),pe=c,qe=b,pe.attachEvent("onpropertychange",Be)):a==="focusout"&&Ae()}function De(a){if(a==="selectionchange"||a==="keyup"||a==="keydown")return te(qe)}function Ee(a,c){if(a==="click")return te(c)}function Fe(a,c){if(a==="input"||a==="change")return te(c)}function Ge(a,c){return a===c&&(a!==0||1/a===1/c)||a!==a&&c!==c}var He=typeof Object.is=="function"?Object.is:Ge;function Ie(a,c){if(He(a,c))return!0;if(typeof a!="object"||a===null||typeof c!="object"||c===null)return!1;var b=Object.keys(a),_=Object.keys(c);if(b.length!==_.length)return!1;for(_=0;_<b.length;_++){var $=b[_];if(!ja.call(c,$)||!He(a[$],c[$]))return!1}return!0}function Je(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function Ke(a,c){var b=Je(a);a=0;for(var _;b;){if(b.nodeType===3){if(_=a+b.textContent.length,a<=c&&_>=c)return{node:b,offset:c-a};a=_}e:{for(;b;){if(b.nextSibling){b=b.nextSibling;break e}b=b.parentNode}b=void 0}b=Je(b)}}function Le(a,c){return a&&c?a===c?!0:a&&a.nodeType===3?!1:c&&c.nodeType===3?Le(a,c.parentNode):"contains"in a?a.contains(c):a.compareDocumentPosition?!!(a.compareDocumentPosition(c)&16):!1:!1}function Me(){for(var a=window,c=Xa();c instanceof a.HTMLIFrameElement;){try{var b=typeof c.contentWindow.location.href=="string"}catch{b=!1}if(b)a=c.contentWindow;else break;c=Xa(a.document)}return c}function Ne(a){var c=a&&a.nodeName&&a.nodeName.toLowerCase();return c&&(c==="input"&&(a.type==="text"||a.type==="search"||a.type==="tel"||a.type==="url"||a.type==="password")||c==="textarea"||a.contentEditable==="true")}function Oe(a){var c=Me(),b=a.focusedElem,_=a.selectionRange;if(c!==b&&b&&b.ownerDocument&&Le(b.ownerDocument.documentElement,b)){if(_!==null&&Ne(b)){if(c=_.start,a=_.end,a===void 0&&(a=c),"selectionStart"in b)b.selectionStart=c,b.selectionEnd=Math.min(a,b.value.length);else if(a=(c=b.ownerDocument||document)&&c.defaultView||window,a.getSelection){a=a.getSelection();var $=b.textContent.length,k=Math.min(_.start,$);_=_.end===void 0?k:Math.min(_.end,$),!a.extend&&k>_&&($=_,_=k,k=$),$=Ke(b,k);var et=Ke(b,_);$&&et&&(a.rangeCount!==1||a.anchorNode!==$.node||a.anchorOffset!==$.offset||a.focusNode!==et.node||a.focusOffset!==et.offset)&&(c=c.createRange(),c.setStart($.node,$.offset),a.removeAllRanges(),k>_?(a.addRange(c),a.extend(et.node,et.offset)):(c.setEnd(et.node,et.offset),a.addRange(c)))}}for(c=[],a=b;a=a.parentNode;)a.nodeType===1&&c.push({element:a,left:a.scrollLeft,top:a.scrollTop});for(typeof b.focus=="function"&&b.focus(),b=0;b<c.length;b++)a=c[b],a.element.scrollLeft=a.left,a.element.scrollTop=a.top}}var Pe=ia&&"documentMode"in document&&11>=document.documentMode,Qe=null,Re=null,Se=null,Te=!1;function Ue(a,c,b){var _=b.window===b?b.document:b.nodeType===9?b:b.ownerDocument;Te||Qe==null||Qe!==Xa(_)||(_=Qe,"selectionStart"in _&&Ne(_)?_={start:_.selectionStart,end:_.selectionEnd}:(_=(_.ownerDocument&&_.ownerDocument.defaultView||window).getSelection(),_={anchorNode:_.anchorNode,anchorOffset:_.anchorOffset,focusNode:_.focusNode,focusOffset:_.focusOffset}),Se&&Ie(Se,_)||(Se=_,_=oe(Re,"onSelect"),0<_.length&&(c=new td("onSelect","select",null,c,b),a.push({event:c,listeners:_}),c.target=Qe)))}function Ve(a,c){var b={};return b[a.toLowerCase()]=c.toLowerCase(),b["Webkit"+a]="webkit"+c,b["Moz"+a]="moz"+c,b}var We={animationend:Ve("Animation","AnimationEnd"),animationiteration:Ve("Animation","AnimationIteration"),animationstart:Ve("Animation","AnimationStart"),transitionend:Ve("Transition","TransitionEnd")},Xe={},Ye={};ia&&(Ye=document.createElement("div").style,"AnimationEvent"in window||(delete We.animationend.animation,delete We.animationiteration.animation,delete We.animationstart.animation),"TransitionEvent"in window||delete We.transitionend.transition);function Ze(a){if(Xe[a])return Xe[a];if(!We[a])return a;var c=We[a],b;for(b in c)if(c.hasOwnProperty(b)&&b in Ye)return Xe[a]=c[b];return a}var $e=Ze("animationend"),af=Ze("animationiteration"),bf=Ze("animationstart"),cf=Ze("transitionend"),df=new Map,ef="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ff(a,c){df.set(a,c),fa(c,[a])}for(var gf=0;gf<ef.length;gf++){var hf=ef[gf],jf=hf.toLowerCase(),kf=hf[0].toUpperCase()+hf.slice(1);ff(jf,"on"+kf)}ff($e,"onAnimationEnd");ff(af,"onAnimationIteration");ff(bf,"onAnimationStart");ff("dblclick","onDoubleClick");ff("focusin","onFocus");ff("focusout","onBlur");ff(cf,"onTransitionEnd");ha("onMouseEnter",["mouseout","mouseover"]);ha("onMouseLeave",["mouseout","mouseover"]);ha("onPointerEnter",["pointerout","pointerover"]);ha("onPointerLeave",["pointerout","pointerover"]);fa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));fa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));fa("onBeforeInput",["compositionend","keypress","textInput","paste"]);fa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));fa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));fa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var lf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mf=new Set("cancel close invalid load scroll toggle".split(" ").concat(lf));function nf(a,c,b){var _=a.type||"unknown-event";a.currentTarget=b,Ub(_,c,void 0,a),a.currentTarget=null}function se(a,c){c=(c&4)!==0;for(var b=0;b<a.length;b++){var _=a[b],$=_.event;_=_.listeners;e:{var k=void 0;if(c)for(var et=_.length-1;0<=et;et--){var nt=_[et],ot=nt.instance,ht=nt.currentTarget;if(nt=nt.listener,ot!==k&&$.isPropagationStopped())break e;nf($,nt,ht),k=ot}else for(et=0;et<_.length;et++){if(nt=_[et],ot=nt.instance,ht=nt.currentTarget,nt=nt.listener,ot!==k&&$.isPropagationStopped())break e;nf($,nt,ht),k=ot}}}if(Qb)throw a=Rb,Qb=!1,Rb=null,a}function D(a,c){var b=c[of$1];b===void 0&&(b=c[of$1]=new Set);var _=a+"__bubble";b.has(_)||(pf(c,a,2,!1),b.add(_))}function qf(a,c,b){var _=0;c&&(_|=4),pf(b,a,_,c)}var rf="_reactListening"+Math.random().toString(36).slice(2);function sf(a){if(!a[rf]){a[rf]=!0,da.forEach(function(b){b!=="selectionchange"&&(mf.has(b)||qf(b,!1,a),qf(b,!0,a))});var c=a.nodeType===9?a:a.ownerDocument;c===null||c[rf]||(c[rf]=!0,qf("selectionchange",!1,c))}}function pf(a,c,b,_){switch(jd(c)){case 1:var $=ed;break;case 4:$=gd;break;default:$=fd}b=$.bind(null,c,b,a),$=void 0,!Lb||c!=="touchstart"&&c!=="touchmove"&&c!=="wheel"||($=!0),_?$!==void 0?a.addEventListener(c,b,{capture:!0,passive:$}):a.addEventListener(c,b,!0):$!==void 0?a.addEventListener(c,b,{passive:$}):a.addEventListener(c,b,!1)}function hd(a,c,b,_,$){var k=_;if(!(c&1)&&!(c&2)&&_!==null)e:for(;;){if(_===null)return;var et=_.tag;if(et===3||et===4){var nt=_.stateNode.containerInfo;if(nt===$||nt.nodeType===8&&nt.parentNode===$)break;if(et===4)for(et=_.return;et!==null;){var ot=et.tag;if((ot===3||ot===4)&&(ot=et.stateNode.containerInfo,ot===$||ot.nodeType===8&&ot.parentNode===$))return;et=et.return}for(;nt!==null;){if(et=Wc(nt),et===null)return;if(ot=et.tag,ot===5||ot===6){_=k=et;continue e}nt=nt.parentNode}}_=_.return}Jb(function(){var ht=k,vt=xb(b),_t=[];e:{var kt=df.get(a);if(kt!==void 0){var $t=td,Tt=a;switch(a){case"keypress":if(od(b)===0)break e;case"keydown":case"keyup":$t=Rd;break;case"focusin":Tt="focus",$t=Fd;break;case"focusout":Tt="blur",$t=Fd;break;case"beforeblur":case"afterblur":$t=Fd;break;case"click":if(b.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":$t=Bd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":$t=Dd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":$t=Vd;break;case $e:case af:case bf:$t=Hd;break;case cf:$t=Xd;break;case"scroll":$t=vd;break;case"wheel":$t=Zd;break;case"copy":case"cut":case"paste":$t=Jd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":$t=Td}var At=(c&4)!==0,Mt=!At&&a==="scroll",Dt=At?kt!==null?kt+"Capture":null:kt;At=[];for(var Rt=ht,xt;Rt!==null;){xt=Rt;var Jt=xt.stateNode;if(xt.tag===5&&Jt!==null&&(xt=Jt,Dt!==null&&(Jt=Kb(Rt,Dt),Jt!=null&&At.push(tf(Rt,Jt,xt)))),Mt)break;Rt=Rt.return}0<At.length&&(kt=new $t(kt,Tt,null,b,vt),_t.push({event:kt,listeners:At}))}}if(!(c&7)){e:{if(kt=a==="mouseover"||a==="pointerover",$t=a==="mouseout"||a==="pointerout",kt&&b!==wb&&(Tt=b.relatedTarget||b.fromElement)&&(Wc(Tt)||Tt[uf]))break e;if(($t||kt)&&(kt=vt.window===vt?vt:(kt=vt.ownerDocument)?kt.defaultView||kt.parentWindow:window,$t?(Tt=b.relatedTarget||b.toElement,$t=ht,Tt=Tt?Wc(Tt):null,Tt!==null&&(Mt=Vb(Tt),Tt!==Mt||Tt.tag!==5&&Tt.tag!==6)&&(Tt=null)):($t=null,Tt=ht),$t!==Tt)){if(At=Bd,Jt="onMouseLeave",Dt="onMouseEnter",Rt="mouse",(a==="pointerout"||a==="pointerover")&&(At=Td,Jt="onPointerLeave",Dt="onPointerEnter",Rt="pointer"),Mt=$t==null?kt:ue($t),xt=Tt==null?kt:ue(Tt),kt=new At(Jt,Rt+"leave",$t,b,vt),kt.target=Mt,kt.relatedTarget=xt,Jt=null,Wc(vt)===ht&&(At=new At(Dt,Rt+"enter",Tt,b,vt),At.target=xt,At.relatedTarget=Mt,Jt=At),Mt=Jt,$t&&Tt)t:{for(At=$t,Dt=Tt,Rt=0,xt=At;xt;xt=vf(xt))Rt++;for(xt=0,Jt=Dt;Jt;Jt=vf(Jt))xt++;for(;0<Rt-xt;)At=vf(At),Rt--;for(;0<xt-Rt;)Dt=vf(Dt),xt--;for(;Rt--;){if(At===Dt||Dt!==null&&At===Dt.alternate)break t;At=vf(At),Dt=vf(Dt)}At=null}else At=null;$t!==null&&wf(_t,kt,$t,At,!1),Tt!==null&&Mt!==null&&wf(_t,Mt,Tt,At,!0)}}e:{if(kt=ht?ue(ht):window,$t=kt.nodeName&&kt.nodeName.toLowerCase(),$t==="select"||$t==="input"&&kt.type==="file")var ar=ve;else if(me(kt))if(we)ar=Fe;else{ar=De;var nr=Ce}else($t=kt.nodeName)&&$t.toLowerCase()==="input"&&(kt.type==="checkbox"||kt.type==="radio")&&(ar=Ee);if(ar&&(ar=ar(a,ht))){ne(_t,ar,b,vt);break e}nr&&nr(a,kt,ht),a==="focusout"&&(nr=kt._wrapperState)&&nr.controlled&&kt.type==="number"&&cb(kt,"number",kt.value)}switch(nr=ht?ue(ht):window,a){case"focusin":(me(nr)||nr.contentEditable==="true")&&(Qe=nr,Re=ht,Se=null);break;case"focusout":Se=Re=Qe=null;break;case"mousedown":Te=!0;break;case"contextmenu":case"mouseup":case"dragend":Te=!1,Ue(_t,b,vt);break;case"selectionchange":if(Pe)break;case"keydown":case"keyup":Ue(_t,b,vt)}var pr;if(ae)e:{switch(a){case"compositionstart":var ur="onCompositionStart";break e;case"compositionend":ur="onCompositionEnd";break e;case"compositionupdate":ur="onCompositionUpdate";break e}ur=void 0}else ie?ge(a,b)&&(ur="onCompositionEnd"):a==="keydown"&&b.keyCode===229&&(ur="onCompositionStart");ur&&(de&&b.locale!=="ko"&&(ie||ur!=="onCompositionStart"?ur==="onCompositionEnd"&&ie&&(pr=nd()):(kd=vt,ld="value"in kd?kd.value:kd.textContent,ie=!0)),nr=oe(ht,ur),0<nr.length&&(ur=new Ld(ur,a,null,b,vt),_t.push({event:ur,listeners:nr}),pr?ur.data=pr:(pr=he(b),pr!==null&&(ur.data=pr)))),(pr=ce?je(a,b):ke(a,b))&&(ht=oe(ht,"onBeforeInput"),0<ht.length&&(vt=new Ld("onBeforeInput","beforeinput",null,b,vt),_t.push({event:vt,listeners:ht}),vt.data=pr))}se(_t,c)})}function tf(a,c,b){return{instance:a,listener:c,currentTarget:b}}function oe(a,c){for(var b=c+"Capture",_=[];a!==null;){var $=a,k=$.stateNode;$.tag===5&&k!==null&&($=k,k=Kb(a,b),k!=null&&_.unshift(tf(a,k,$)),k=Kb(a,c),k!=null&&_.push(tf(a,k,$))),a=a.return}return _}function vf(a){if(a===null)return null;do a=a.return;while(a&&a.tag!==5);return a||null}function wf(a,c,b,_,$){for(var k=c._reactName,et=[];b!==null&&b!==_;){var nt=b,ot=nt.alternate,ht=nt.stateNode;if(ot!==null&&ot===_)break;nt.tag===5&&ht!==null&&(nt=ht,$?(ot=Kb(b,k),ot!=null&&et.unshift(tf(b,ot,nt))):$||(ot=Kb(b,k),ot!=null&&et.push(tf(b,ot,nt)))),b=b.return}et.length!==0&&a.push({event:c,listeners:et})}var xf=/\r\n?/g,yf=/\u0000|\uFFFD/g;function zf(a){return(typeof a=="string"?a:""+a).replace(xf,`
`).replace(yf,"")}function Af(a,c,b){if(c=zf(c),zf(a)!==c&&b)throw Error(p(425))}function Bf(){}var Cf=null,Df=null;function Ef(a,c){return a==="textarea"||a==="noscript"||typeof c.children=="string"||typeof c.children=="number"||typeof c.dangerouslySetInnerHTML=="object"&&c.dangerouslySetInnerHTML!==null&&c.dangerouslySetInnerHTML.__html!=null}var Ff=typeof setTimeout=="function"?setTimeout:void 0,Gf=typeof clearTimeout=="function"?clearTimeout:void 0,Hf=typeof Promise=="function"?Promise:void 0,Jf=typeof queueMicrotask=="function"?queueMicrotask:typeof Hf<"u"?function(a){return Hf.resolve(null).then(a).catch(If)}:Ff;function If(a){setTimeout(function(){throw a})}function Kf(a,c){var b=c,_=0;do{var $=b.nextSibling;if(a.removeChild(b),$&&$.nodeType===8)if(b=$.data,b==="/$"){if(_===0){a.removeChild($),bd(c);return}_--}else b!=="$"&&b!=="$?"&&b!=="$!"||_++;b=$}while(b);bd(c)}function Lf(a){for(;a!=null;a=a.nextSibling){var c=a.nodeType;if(c===1||c===3)break;if(c===8){if(c=a.data,c==="$"||c==="$!"||c==="$?")break;if(c==="/$")return null}}return a}function Mf(a){a=a.previousSibling;for(var c=0;a;){if(a.nodeType===8){var b=a.data;if(b==="$"||b==="$!"||b==="$?"){if(c===0)return a;c--}else b==="/$"&&c++}a=a.previousSibling}return null}var Nf=Math.random().toString(36).slice(2),Of="__reactFiber$"+Nf,Pf="__reactProps$"+Nf,uf="__reactContainer$"+Nf,of$1="__reactEvents$"+Nf,Qf="__reactListeners$"+Nf,Rf="__reactHandles$"+Nf;function Wc(a){var c=a[Of];if(c)return c;for(var b=a.parentNode;b;){if(c=b[uf]||b[Of]){if(b=c.alternate,c.child!==null||b!==null&&b.child!==null)for(a=Mf(a);a!==null;){if(b=a[Of])return b;a=Mf(a)}return c}a=b,b=a.parentNode}return null}function Cb(a){return a=a[Of]||a[uf],!a||a.tag!==5&&a.tag!==6&&a.tag!==13&&a.tag!==3?null:a}function ue(a){if(a.tag===5||a.tag===6)return a.stateNode;throw Error(p(33))}function Db(a){return a[Pf]||null}var Sf=[],Tf=-1;function Uf(a){return{current:a}}function E(a){0>Tf||(a.current=Sf[Tf],Sf[Tf]=null,Tf--)}function G(a,c){Tf++,Sf[Tf]=a.current,a.current=c}var Vf={},H=Uf(Vf),Wf=Uf(!1),Xf=Vf;function Yf(a,c){var b=a.type.contextTypes;if(!b)return Vf;var _=a.stateNode;if(_&&_.__reactInternalMemoizedUnmaskedChildContext===c)return _.__reactInternalMemoizedMaskedChildContext;var $={},k;for(k in b)$[k]=c[k];return _&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=c,a.__reactInternalMemoizedMaskedChildContext=$),$}function Zf(a){return a=a.childContextTypes,a!=null}function $f(){E(Wf),E(H)}function ag(a,c,b){if(H.current!==Vf)throw Error(p(168));G(H,c),G(Wf,b)}function bg(a,c,b){var _=a.stateNode;if(c=c.childContextTypes,typeof _.getChildContext!="function")return b;_=_.getChildContext();for(var $ in _)if(!($ in c))throw Error(p(108,Ra(a)||"Unknown",$));return A({},b,_)}function cg(a){return a=(a=a.stateNode)&&a.__reactInternalMemoizedMergedChildContext||Vf,Xf=H.current,G(H,a),G(Wf,Wf.current),!0}function dg(a,c,b){var _=a.stateNode;if(!_)throw Error(p(169));b?(a=bg(a,c,Xf),_.__reactInternalMemoizedMergedChildContext=a,E(Wf),E(H),G(H,a)):E(Wf),G(Wf,b)}var eg=null,fg=!1,gg=!1;function hg(a){eg===null?eg=[a]:eg.push(a)}function ig(a){fg=!0,hg(a)}function jg(){if(!gg&&eg!==null){gg=!0;var a=0,c=C;try{var b=eg;for(C=1;a<b.length;a++){var _=b[a];do _=_(!0);while(_!==null)}eg=null,fg=!1}catch($){throw eg!==null&&(eg=eg.slice(a+1)),ac(fc,jg),$}finally{C=c,gg=!1}}return null}var kg=[],lg=0,mg=null,ng=0,og=[],pg=0,qg=null,rg=1,sg="";function tg(a,c){kg[lg++]=ng,kg[lg++]=mg,mg=a,ng=c}function ug(a,c,b){og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,qg=a;var _=rg;a=sg;var $=32-oc(_)-1;_&=~(1<<$),b+=1;var k=32-oc(c)+$;if(30<k){var et=$-$%5;k=(_&(1<<et)-1).toString(32),_>>=et,$-=et,rg=1<<32-oc(c)+$|b<<$|_,sg=k+a}else rg=1<<k|b<<$|_,sg=a}function vg(a){a.return!==null&&(tg(a,1),ug(a,1,0))}function wg(a){for(;a===mg;)mg=kg[--lg],kg[lg]=null,ng=kg[--lg],kg[lg]=null;for(;a===qg;)qg=og[--pg],og[pg]=null,sg=og[--pg],og[pg]=null,rg=og[--pg],og[pg]=null}var xg=null,yg=null,I=!1,zg=null;function Ag(a,c){var b=Bg(5,null,null,0);b.elementType="DELETED",b.stateNode=c,b.return=a,c=a.deletions,c===null?(a.deletions=[b],a.flags|=16):c.push(b)}function Cg(a,c){switch(a.tag){case 5:var b=a.type;return c=c.nodeType!==1||b.toLowerCase()!==c.nodeName.toLowerCase()?null:c,c!==null?(a.stateNode=c,xg=a,yg=Lf(c.firstChild),!0):!1;case 6:return c=a.pendingProps===""||c.nodeType!==3?null:c,c!==null?(a.stateNode=c,xg=a,yg=null,!0):!1;case 13:return c=c.nodeType!==8?null:c,c!==null?(b=qg!==null?{id:rg,overflow:sg}:null,a.memoizedState={dehydrated:c,treeContext:b,retryLane:1073741824},b=Bg(18,null,null,0),b.stateNode=c,b.return=a,a.child=b,xg=a,yg=null,!0):!1;default:return!1}}function Dg(a){return(a.mode&1)!==0&&(a.flags&128)===0}function Eg(a){if(I){var c=yg;if(c){var b=c;if(!Cg(a,c)){if(Dg(a))throw Error(p(418));c=Lf(b.nextSibling);var _=xg;c&&Cg(a,c)?Ag(_,b):(a.flags=a.flags&-4097|2,I=!1,xg=a)}}else{if(Dg(a))throw Error(p(418));a.flags=a.flags&-4097|2,I=!1,xg=a}}}function Fg(a){for(a=a.return;a!==null&&a.tag!==5&&a.tag!==3&&a.tag!==13;)a=a.return;xg=a}function Gg(a){if(a!==xg)return!1;if(!I)return Fg(a),I=!0,!1;var c;if((c=a.tag!==3)&&!(c=a.tag!==5)&&(c=a.type,c=c!=="head"&&c!=="body"&&!Ef(a.type,a.memoizedProps)),c&&(c=yg)){if(Dg(a))throw Hg(),Error(p(418));for(;c;)Ag(a,c),c=Lf(c.nextSibling)}if(Fg(a),a.tag===13){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(p(317));e:{for(a=a.nextSibling,c=0;a;){if(a.nodeType===8){var b=a.data;if(b==="/$"){if(c===0){yg=Lf(a.nextSibling);break e}c--}else b!=="$"&&b!=="$!"&&b!=="$?"||c++}a=a.nextSibling}yg=null}}else yg=xg?Lf(a.stateNode.nextSibling):null;return!0}function Hg(){for(var a=yg;a;)a=Lf(a.nextSibling)}function Ig(){yg=xg=null,I=!1}function Jg(a){zg===null?zg=[a]:zg.push(a)}var Kg=ua.ReactCurrentBatchConfig;function Lg(a,c){if(a&&a.defaultProps){c=A({},c),a=a.defaultProps;for(var b in a)c[b]===void 0&&(c[b]=a[b]);return c}return c}var Mg=Uf(null),Ng=null,Og=null,Pg=null;function Qg(){Pg=Og=Ng=null}function Rg(a){var c=Mg.current;E(Mg),a._currentValue=c}function Sg(a,c,b){for(;a!==null;){var _=a.alternate;if((a.childLanes&c)!==c?(a.childLanes|=c,_!==null&&(_.childLanes|=c)):_!==null&&(_.childLanes&c)!==c&&(_.childLanes|=c),a===b)break;a=a.return}}function Tg(a,c){Ng=a,Pg=Og=null,a=a.dependencies,a!==null&&a.firstContext!==null&&(a.lanes&c&&(Ug=!0),a.firstContext=null)}function Vg(a){var c=a._currentValue;if(Pg!==a)if(a={context:a,memoizedValue:c,next:null},Og===null){if(Ng===null)throw Error(p(308));Og=a,Ng.dependencies={lanes:0,firstContext:a}}else Og=Og.next=a;return c}var Wg=null;function Xg(a){Wg===null?Wg=[a]:Wg.push(a)}function Yg(a,c,b,_){var $=c.interleaved;return $===null?(b.next=b,Xg(c)):(b.next=$.next,$.next=b),c.interleaved=b,Zg(a,_)}function Zg(a,c){a.lanes|=c;var b=a.alternate;for(b!==null&&(b.lanes|=c),b=a,a=a.return;a!==null;)a.childLanes|=c,b=a.alternate,b!==null&&(b.childLanes|=c),b=a,a=a.return;return b.tag===3?b.stateNode:null}var $g=!1;function ah(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function bh(a,c){a=a.updateQueue,c.updateQueue===a&&(c.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,effects:a.effects})}function ch(a,c){return{eventTime:a,lane:c,tag:0,payload:null,callback:null,next:null}}function dh(a,c,b){var _=a.updateQueue;if(_===null)return null;if(_=_.shared,K&2){var $=_.pending;return $===null?c.next=c:(c.next=$.next,$.next=c),_.pending=c,Zg(a,b)}return $=_.interleaved,$===null?(c.next=c,Xg(_)):(c.next=$.next,$.next=c),_.interleaved=c,Zg(a,b)}function eh(a,c,b){if(c=c.updateQueue,c!==null&&(c=c.shared,(b&4194240)!==0)){var _=c.lanes;_&=a.pendingLanes,b|=_,c.lanes=b,Cc(a,b)}}function fh(a,c){var b=a.updateQueue,_=a.alternate;if(_!==null&&(_=_.updateQueue,b===_)){var $=null,k=null;if(b=b.firstBaseUpdate,b!==null){do{var et={eventTime:b.eventTime,lane:b.lane,tag:b.tag,payload:b.payload,callback:b.callback,next:null};k===null?$=k=et:k=k.next=et,b=b.next}while(b!==null);k===null?$=k=c:k=k.next=c}else $=k=c;b={baseState:_.baseState,firstBaseUpdate:$,lastBaseUpdate:k,shared:_.shared,effects:_.effects},a.updateQueue=b;return}a=b.lastBaseUpdate,a===null?b.firstBaseUpdate=c:a.next=c,b.lastBaseUpdate=c}function gh(a,c,b,_){var $=a.updateQueue;$g=!1;var k=$.firstBaseUpdate,et=$.lastBaseUpdate,nt=$.shared.pending;if(nt!==null){$.shared.pending=null;var ot=nt,ht=ot.next;ot.next=null,et===null?k=ht:et.next=ht,et=ot;var vt=a.alternate;vt!==null&&(vt=vt.updateQueue,nt=vt.lastBaseUpdate,nt!==et&&(nt===null?vt.firstBaseUpdate=ht:nt.next=ht,vt.lastBaseUpdate=ot))}if(k!==null){var _t=$.baseState;et=0,vt=ht=ot=null,nt=k;do{var kt=nt.lane,$t=nt.eventTime;if((_&kt)===kt){vt!==null&&(vt=vt.next={eventTime:$t,lane:0,tag:nt.tag,payload:nt.payload,callback:nt.callback,next:null});e:{var Tt=a,At=nt;switch(kt=c,$t=b,At.tag){case 1:if(Tt=At.payload,typeof Tt=="function"){_t=Tt.call($t,_t,kt);break e}_t=Tt;break e;case 3:Tt.flags=Tt.flags&-65537|128;case 0:if(Tt=At.payload,kt=typeof Tt=="function"?Tt.call($t,_t,kt):Tt,kt==null)break e;_t=A({},_t,kt);break e;case 2:$g=!0}}nt.callback!==null&&nt.lane!==0&&(a.flags|=64,kt=$.effects,kt===null?$.effects=[nt]:kt.push(nt))}else $t={eventTime:$t,lane:kt,tag:nt.tag,payload:nt.payload,callback:nt.callback,next:null},vt===null?(ht=vt=$t,ot=_t):vt=vt.next=$t,et|=kt;if(nt=nt.next,nt===null){if(nt=$.shared.pending,nt===null)break;kt=nt,nt=kt.next,kt.next=null,$.lastBaseUpdate=kt,$.shared.pending=null}}while(!0);if(vt===null&&(ot=_t),$.baseState=ot,$.firstBaseUpdate=ht,$.lastBaseUpdate=vt,c=$.shared.interleaved,c!==null){$=c;do et|=$.lane,$=$.next;while($!==c)}else k===null&&($.shared.lanes=0);hh|=et,a.lanes=et,a.memoizedState=_t}}function ih(a,c,b){if(a=c.effects,c.effects=null,a!==null)for(c=0;c<a.length;c++){var _=a[c],$=_.callback;if($!==null){if(_.callback=null,_=b,typeof $!="function")throw Error(p(191,$));$.call(_)}}}var jh=new aa.Component().refs;function kh(a,c,b,_){c=a.memoizedState,b=b(_,c),b=b==null?c:A({},c,b),a.memoizedState=b,a.lanes===0&&(a.updateQueue.baseState=b)}var nh={isMounted:function(a){return(a=a._reactInternals)?Vb(a)===a:!1},enqueueSetState:function(a,c,b){a=a._reactInternals;var _=L(),$=lh(a),k=ch(_,$);k.payload=c,b!=null&&(k.callback=b),c=dh(a,k,$),c!==null&&(mh(c,a,$,_),eh(c,a,$))},enqueueReplaceState:function(a,c,b){a=a._reactInternals;var _=L(),$=lh(a),k=ch(_,$);k.tag=1,k.payload=c,b!=null&&(k.callback=b),c=dh(a,k,$),c!==null&&(mh(c,a,$,_),eh(c,a,$))},enqueueForceUpdate:function(a,c){a=a._reactInternals;var b=L(),_=lh(a),$=ch(b,_);$.tag=2,c!=null&&($.callback=c),c=dh(a,$,_),c!==null&&(mh(c,a,_,b),eh(c,a,_))}};function oh(a,c,b,_,$,k,et){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(_,k,et):c.prototype&&c.prototype.isPureReactComponent?!Ie(b,_)||!Ie($,k):!0}function ph(a,c,b){var _=!1,$=Vf,k=c.contextType;return typeof k=="object"&&k!==null?k=Vg(k):($=Zf(c)?Xf:H.current,_=c.contextTypes,k=(_=_!=null)?Yf(a,$):Vf),c=new c(b,k),a.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,c.updater=nh,a.stateNode=c,c._reactInternals=a,_&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=$,a.__reactInternalMemoizedMaskedChildContext=k),c}function qh(a,c,b,_){a=c.state,typeof c.componentWillReceiveProps=="function"&&c.componentWillReceiveProps(b,_),typeof c.UNSAFE_componentWillReceiveProps=="function"&&c.UNSAFE_componentWillReceiveProps(b,_),c.state!==a&&nh.enqueueReplaceState(c,c.state,null)}function rh(a,c,b,_){var $=a.stateNode;$.props=b,$.state=a.memoizedState,$.refs=jh,ah(a);var k=c.contextType;typeof k=="object"&&k!==null?$.context=Vg(k):(k=Zf(c)?Xf:H.current,$.context=Yf(a,k)),$.state=a.memoizedState,k=c.getDerivedStateFromProps,typeof k=="function"&&(kh(a,c,k,b),$.state=a.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof $.getSnapshotBeforeUpdate=="function"||typeof $.UNSAFE_componentWillMount!="function"&&typeof $.componentWillMount!="function"||(c=$.state,typeof $.componentWillMount=="function"&&$.componentWillMount(),typeof $.UNSAFE_componentWillMount=="function"&&$.UNSAFE_componentWillMount(),c!==$.state&&nh.enqueueReplaceState($,$.state,null),gh(a,b,$,_),$.state=a.memoizedState),typeof $.componentDidMount=="function"&&(a.flags|=4194308)}function sh(a,c,b){if(a=b.ref,a!==null&&typeof a!="function"&&typeof a!="object"){if(b._owner){if(b=b._owner,b){if(b.tag!==1)throw Error(p(309));var _=b.stateNode}if(!_)throw Error(p(147,a));var $=_,k=""+a;return c!==null&&c.ref!==null&&typeof c.ref=="function"&&c.ref._stringRef===k?c.ref:(c=function(et){var nt=$.refs;nt===jh&&(nt=$.refs={}),et===null?delete nt[k]:nt[k]=et},c._stringRef=k,c)}if(typeof a!="string")throw Error(p(284));if(!b._owner)throw Error(p(290,a))}return a}function th(a,c){throw a=Object.prototype.toString.call(c),Error(p(31,a==="[object Object]"?"object with keys {"+Object.keys(c).join(", ")+"}":a))}function uh(a){var c=a._init;return c(a._payload)}function vh(a){function c(Dt,Rt){if(a){var xt=Dt.deletions;xt===null?(Dt.deletions=[Rt],Dt.flags|=16):xt.push(Rt)}}function b(Dt,Rt){if(!a)return null;for(;Rt!==null;)c(Dt,Rt),Rt=Rt.sibling;return null}function _(Dt,Rt){for(Dt=new Map;Rt!==null;)Rt.key!==null?Dt.set(Rt.key,Rt):Dt.set(Rt.index,Rt),Rt=Rt.sibling;return Dt}function $(Dt,Rt){return Dt=wh(Dt,Rt),Dt.index=0,Dt.sibling=null,Dt}function k(Dt,Rt,xt){return Dt.index=xt,a?(xt=Dt.alternate,xt!==null?(xt=xt.index,xt<Rt?(Dt.flags|=2,Rt):xt):(Dt.flags|=2,Rt)):(Dt.flags|=1048576,Rt)}function et(Dt){return a&&Dt.alternate===null&&(Dt.flags|=2),Dt}function nt(Dt,Rt,xt,Jt){return Rt===null||Rt.tag!==6?(Rt=xh(xt,Dt.mode,Jt),Rt.return=Dt,Rt):(Rt=$(Rt,xt),Rt.return=Dt,Rt)}function ot(Dt,Rt,xt,Jt){var ar=xt.type;return ar===ya?vt(Dt,Rt,xt.props.children,Jt,xt.key):Rt!==null&&(Rt.elementType===ar||typeof ar=="object"&&ar!==null&&ar.$$typeof===Ha&&uh(ar)===Rt.type)?(Jt=$(Rt,xt.props),Jt.ref=sh(Dt,Rt,xt),Jt.return=Dt,Jt):(Jt=yh(xt.type,xt.key,xt.props,null,Dt.mode,Jt),Jt.ref=sh(Dt,Rt,xt),Jt.return=Dt,Jt)}function ht(Dt,Rt,xt,Jt){return Rt===null||Rt.tag!==4||Rt.stateNode.containerInfo!==xt.containerInfo||Rt.stateNode.implementation!==xt.implementation?(Rt=zh(xt,Dt.mode,Jt),Rt.return=Dt,Rt):(Rt=$(Rt,xt.children||[]),Rt.return=Dt,Rt)}function vt(Dt,Rt,xt,Jt,ar){return Rt===null||Rt.tag!==7?(Rt=Ah(xt,Dt.mode,Jt,ar),Rt.return=Dt,Rt):(Rt=$(Rt,xt),Rt.return=Dt,Rt)}function _t(Dt,Rt,xt){if(typeof Rt=="string"&&Rt!==""||typeof Rt=="number")return Rt=xh(""+Rt,Dt.mode,xt),Rt.return=Dt,Rt;if(typeof Rt=="object"&&Rt!==null){switch(Rt.$$typeof){case va:return xt=yh(Rt.type,Rt.key,Rt.props,null,Dt.mode,xt),xt.ref=sh(Dt,null,Rt),xt.return=Dt,xt;case wa:return Rt=zh(Rt,Dt.mode,xt),Rt.return=Dt,Rt;case Ha:var Jt=Rt._init;return _t(Dt,Jt(Rt._payload),xt)}if(eb(Rt)||Ka(Rt))return Rt=Ah(Rt,Dt.mode,xt,null),Rt.return=Dt,Rt;th(Dt,Rt)}return null}function kt(Dt,Rt,xt,Jt){var ar=Rt!==null?Rt.key:null;if(typeof xt=="string"&&xt!==""||typeof xt=="number")return ar!==null?null:nt(Dt,Rt,""+xt,Jt);if(typeof xt=="object"&&xt!==null){switch(xt.$$typeof){case va:return xt.key===ar?ot(Dt,Rt,xt,Jt):null;case wa:return xt.key===ar?ht(Dt,Rt,xt,Jt):null;case Ha:return ar=xt._init,kt(Dt,Rt,ar(xt._payload),Jt)}if(eb(xt)||Ka(xt))return ar!==null?null:vt(Dt,Rt,xt,Jt,null);th(Dt,xt)}return null}function $t(Dt,Rt,xt,Jt,ar){if(typeof Jt=="string"&&Jt!==""||typeof Jt=="number")return Dt=Dt.get(xt)||null,nt(Rt,Dt,""+Jt,ar);if(typeof Jt=="object"&&Jt!==null){switch(Jt.$$typeof){case va:return Dt=Dt.get(Jt.key===null?xt:Jt.key)||null,ot(Rt,Dt,Jt,ar);case wa:return Dt=Dt.get(Jt.key===null?xt:Jt.key)||null,ht(Rt,Dt,Jt,ar);case Ha:var nr=Jt._init;return $t(Dt,Rt,xt,nr(Jt._payload),ar)}if(eb(Jt)||Ka(Jt))return Dt=Dt.get(xt)||null,vt(Rt,Dt,Jt,ar,null);th(Rt,Jt)}return null}function Tt(Dt,Rt,xt,Jt){for(var ar=null,nr=null,pr=Rt,ur=Rt=0,Ot=null;pr!==null&&ur<xt.length;ur++){pr.index>ur?(Ot=pr,pr=null):Ot=pr.sibling;var It=kt(Dt,pr,xt[ur],Jt);if(It===null){pr===null&&(pr=Ot);break}a&&pr&&It.alternate===null&&c(Dt,pr),Rt=k(It,Rt,ur),nr===null?ar=It:nr.sibling=It,nr=It,pr=Ot}if(ur===xt.length)return b(Dt,pr),I&&tg(Dt,ur),ar;if(pr===null){for(;ur<xt.length;ur++)pr=_t(Dt,xt[ur],Jt),pr!==null&&(Rt=k(pr,Rt,ur),nr===null?ar=pr:nr.sibling=pr,nr=pr);return I&&tg(Dt,ur),ar}for(pr=_(Dt,pr);ur<xt.length;ur++)Ot=$t(pr,Dt,ur,xt[ur],Jt),Ot!==null&&(a&&Ot.alternate!==null&&pr.delete(Ot.key===null?ur:Ot.key),Rt=k(Ot,Rt,ur),nr===null?ar=Ot:nr.sibling=Ot,nr=Ot);return a&&pr.forEach(function(ut){return c(Dt,ut)}),I&&tg(Dt,ur),ar}function At(Dt,Rt,xt,Jt){var ar=Ka(xt);if(typeof ar!="function")throw Error(p(150));if(xt=ar.call(xt),xt==null)throw Error(p(151));for(var nr=ar=null,pr=Rt,ur=Rt=0,Ot=null,It=xt.next();pr!==null&&!It.done;ur++,It=xt.next()){pr.index>ur?(Ot=pr,pr=null):Ot=pr.sibling;var ut=kt(Dt,pr,It.value,Jt);if(ut===null){pr===null&&(pr=Ot);break}a&&pr&&ut.alternate===null&&c(Dt,pr),Rt=k(ut,Rt,ur),nr===null?ar=ut:nr.sibling=ut,nr=ut,pr=Ot}if(It.done)return b(Dt,pr),I&&tg(Dt,ur),ar;if(pr===null){for(;!It.done;ur++,It=xt.next())It=_t(Dt,It.value,Jt),It!==null&&(Rt=k(It,Rt,ur),nr===null?ar=It:nr.sibling=It,nr=It);return I&&tg(Dt,ur),ar}for(pr=_(Dt,pr);!It.done;ur++,It=xt.next())It=$t(pr,Dt,ur,It.value,Jt),It!==null&&(a&&It.alternate!==null&&pr.delete(It.key===null?ur:It.key),Rt=k(It,Rt,ur),nr===null?ar=It:nr.sibling=It,nr=It);return a&&pr.forEach(function(_e){return c(Dt,_e)}),I&&tg(Dt,ur),ar}function Mt(Dt,Rt,xt,Jt){if(typeof xt=="object"&&xt!==null&&xt.type===ya&&xt.key===null&&(xt=xt.props.children),typeof xt=="object"&&xt!==null){switch(xt.$$typeof){case va:e:{for(var ar=xt.key,nr=Rt;nr!==null;){if(nr.key===ar){if(ar=xt.type,ar===ya){if(nr.tag===7){b(Dt,nr.sibling),Rt=$(nr,xt.props.children),Rt.return=Dt,Dt=Rt;break e}}else if(nr.elementType===ar||typeof ar=="object"&&ar!==null&&ar.$$typeof===Ha&&uh(ar)===nr.type){b(Dt,nr.sibling),Rt=$(nr,xt.props),Rt.ref=sh(Dt,nr,xt),Rt.return=Dt,Dt=Rt;break e}b(Dt,nr);break}else c(Dt,nr);nr=nr.sibling}xt.type===ya?(Rt=Ah(xt.props.children,Dt.mode,Jt,xt.key),Rt.return=Dt,Dt=Rt):(Jt=yh(xt.type,xt.key,xt.props,null,Dt.mode,Jt),Jt.ref=sh(Dt,Rt,xt),Jt.return=Dt,Dt=Jt)}return et(Dt);case wa:e:{for(nr=xt.key;Rt!==null;){if(Rt.key===nr)if(Rt.tag===4&&Rt.stateNode.containerInfo===xt.containerInfo&&Rt.stateNode.implementation===xt.implementation){b(Dt,Rt.sibling),Rt=$(Rt,xt.children||[]),Rt.return=Dt,Dt=Rt;break e}else{b(Dt,Rt);break}else c(Dt,Rt);Rt=Rt.sibling}Rt=zh(xt,Dt.mode,Jt),Rt.return=Dt,Dt=Rt}return et(Dt);case Ha:return nr=xt._init,Mt(Dt,Rt,nr(xt._payload),Jt)}if(eb(xt))return Tt(Dt,Rt,xt,Jt);if(Ka(xt))return At(Dt,Rt,xt,Jt);th(Dt,xt)}return typeof xt=="string"&&xt!==""||typeof xt=="number"?(xt=""+xt,Rt!==null&&Rt.tag===6?(b(Dt,Rt.sibling),Rt=$(Rt,xt),Rt.return=Dt,Dt=Rt):(b(Dt,Rt),Rt=xh(xt,Dt.mode,Jt),Rt.return=Dt,Dt=Rt),et(Dt)):b(Dt,Rt)}return Mt}var Bh=vh(!0),Ch=vh(!1),Dh={},Eh=Uf(Dh),Fh=Uf(Dh),Gh=Uf(Dh);function Hh(a){if(a===Dh)throw Error(p(174));return a}function Ih(a,c){switch(G(Gh,c),G(Fh,a),G(Eh,Dh),a=c.nodeType,a){case 9:case 11:c=(c=c.documentElement)?c.namespaceURI:lb(null,"");break;default:a=a===8?c.parentNode:c,c=a.namespaceURI||null,a=a.tagName,c=lb(c,a)}E(Eh),G(Eh,c)}function Jh(){E(Eh),E(Fh),E(Gh)}function Kh(a){Hh(Gh.current);var c=Hh(Eh.current),b=lb(c,a.type);c!==b&&(G(Fh,a),G(Eh,b))}function Lh(a){Fh.current===a&&(E(Eh),E(Fh))}var M=Uf(0);function Mh(a){for(var c=a;c!==null;){if(c.tag===13){var b=c.memoizedState;if(b!==null&&(b=b.dehydrated,b===null||b.data==="$?"||b.data==="$!"))return c}else if(c.tag===19&&c.memoizedProps.revealOrder!==void 0){if(c.flags&128)return c}else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===a)break;for(;c.sibling===null;){if(c.return===null||c.return===a)return null;c=c.return}c.sibling.return=c.return,c=c.sibling}return null}var Nh=[];function Oh(){for(var a=0;a<Nh.length;a++)Nh[a]._workInProgressVersionPrimary=null;Nh.length=0}var Ph=ua.ReactCurrentDispatcher,Qh=ua.ReactCurrentBatchConfig,Rh=0,N=null,O=null,P=null,Sh=!1,Th=!1,Uh=0,Vh=0;function Q(){throw Error(p(321))}function Wh(a,c){if(c===null)return!1;for(var b=0;b<c.length&&b<a.length;b++)if(!He(a[b],c[b]))return!1;return!0}function Xh(a,c,b,_,$,k){if(Rh=k,N=c,c.memoizedState=null,c.updateQueue=null,c.lanes=0,Ph.current=a===null||a.memoizedState===null?Yh:Zh,a=b(_,$),Th){k=0;do{if(Th=!1,Uh=0,25<=k)throw Error(p(301));k+=1,P=O=null,c.updateQueue=null,Ph.current=$h,a=b(_,$)}while(Th)}if(Ph.current=ai,c=O!==null&&O.next!==null,Rh=0,P=O=N=null,Sh=!1,c)throw Error(p(300));return a}function bi(){var a=Uh!==0;return Uh=0,a}function ci(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return P===null?N.memoizedState=P=a:P=P.next=a,P}function di(){if(O===null){var a=N.alternate;a=a!==null?a.memoizedState:null}else a=O.next;var c=P===null?N.memoizedState:P.next;if(c!==null)P=c,O=a;else{if(a===null)throw Error(p(310));O=a,a={memoizedState:O.memoizedState,baseState:O.baseState,baseQueue:O.baseQueue,queue:O.queue,next:null},P===null?N.memoizedState=P=a:P=P.next=a}return P}function ei(a,c){return typeof c=="function"?c(a):c}function fi(a){var c=di(),b=c.queue;if(b===null)throw Error(p(311));b.lastRenderedReducer=a;var _=O,$=_.baseQueue,k=b.pending;if(k!==null){if($!==null){var et=$.next;$.next=k.next,k.next=et}_.baseQueue=$=k,b.pending=null}if($!==null){k=$.next,_=_.baseState;var nt=et=null,ot=null,ht=k;do{var vt=ht.lane;if((Rh&vt)===vt)ot!==null&&(ot=ot.next={lane:0,action:ht.action,hasEagerState:ht.hasEagerState,eagerState:ht.eagerState,next:null}),_=ht.hasEagerState?ht.eagerState:a(_,ht.action);else{var _t={lane:vt,action:ht.action,hasEagerState:ht.hasEagerState,eagerState:ht.eagerState,next:null};ot===null?(nt=ot=_t,et=_):ot=ot.next=_t,N.lanes|=vt,hh|=vt}ht=ht.next}while(ht!==null&&ht!==k);ot===null?et=_:ot.next=nt,He(_,c.memoizedState)||(Ug=!0),c.memoizedState=_,c.baseState=et,c.baseQueue=ot,b.lastRenderedState=_}if(a=b.interleaved,a!==null){$=a;do k=$.lane,N.lanes|=k,hh|=k,$=$.next;while($!==a)}else $===null&&(b.lanes=0);return[c.memoizedState,b.dispatch]}function gi(a){var c=di(),b=c.queue;if(b===null)throw Error(p(311));b.lastRenderedReducer=a;var _=b.dispatch,$=b.pending,k=c.memoizedState;if($!==null){b.pending=null;var et=$=$.next;do k=a(k,et.action),et=et.next;while(et!==$);He(k,c.memoizedState)||(Ug=!0),c.memoizedState=k,c.baseQueue===null&&(c.baseState=k),b.lastRenderedState=k}return[k,_]}function hi(){}function ii(a,c){var b=N,_=di(),$=c(),k=!He(_.memoizedState,$);if(k&&(_.memoizedState=$,Ug=!0),_=_.queue,ji(ki.bind(null,b,_,a),[a]),_.getSnapshot!==c||k||P!==null&&P.memoizedState.tag&1){if(b.flags|=2048,li(9,mi.bind(null,b,_,$,c),void 0,null),R===null)throw Error(p(349));Rh&30||ni(b,c,$)}return $}function ni(a,c,b){a.flags|=16384,a={getSnapshot:c,value:b},c=N.updateQueue,c===null?(c={lastEffect:null,stores:null},N.updateQueue=c,c.stores=[a]):(b=c.stores,b===null?c.stores=[a]:b.push(a))}function mi(a,c,b,_){c.value=b,c.getSnapshot=_,oi(c)&&pi(a)}function ki(a,c,b){return b(function(){oi(c)&&pi(a)})}function oi(a){var c=a.getSnapshot;a=a.value;try{var b=c();return!He(a,b)}catch{return!0}}function pi(a){var c=Zg(a,1);c!==null&&mh(c,a,1,-1)}function qi(a){var c=ci();return typeof a=="function"&&(a=a()),c.memoizedState=c.baseState=a,a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ei,lastRenderedState:a},c.queue=a,a=a.dispatch=ri.bind(null,N,a),[c.memoizedState,a]}function li(a,c,b,_){return a={tag:a,create:c,destroy:b,deps:_,next:null},c=N.updateQueue,c===null?(c={lastEffect:null,stores:null},N.updateQueue=c,c.lastEffect=a.next=a):(b=c.lastEffect,b===null?c.lastEffect=a.next=a:(_=b.next,b.next=a,a.next=_,c.lastEffect=a)),a}function si(){return di().memoizedState}function ti(a,c,b,_){var $=ci();N.flags|=a,$.memoizedState=li(1|c,b,void 0,_===void 0?null:_)}function ui(a,c,b,_){var $=di();_=_===void 0?null:_;var k=void 0;if(O!==null){var et=O.memoizedState;if(k=et.destroy,_!==null&&Wh(_,et.deps)){$.memoizedState=li(c,b,k,_);return}}N.flags|=a,$.memoizedState=li(1|c,b,k,_)}function vi(a,c){return ti(8390656,8,a,c)}function ji(a,c){return ui(2048,8,a,c)}function wi(a,c){return ui(4,2,a,c)}function xi(a,c){return ui(4,4,a,c)}function yi(a,c){if(typeof c=="function")return a=a(),c(a),function(){c(null)};if(c!=null)return a=a(),c.current=a,function(){c.current=null}}function zi(a,c,b){return b=b!=null?b.concat([a]):null,ui(4,4,yi.bind(null,c,a),b)}function Ai(){}function Bi(a,c){var b=di();c=c===void 0?null:c;var _=b.memoizedState;return _!==null&&c!==null&&Wh(c,_[1])?_[0]:(b.memoizedState=[a,c],a)}function Ci(a,c){var b=di();c=c===void 0?null:c;var _=b.memoizedState;return _!==null&&c!==null&&Wh(c,_[1])?_[0]:(a=a(),b.memoizedState=[a,c],a)}function Di(a,c,b){return Rh&21?(He(b,c)||(b=yc(),N.lanes|=b,hh|=b,a.baseState=!0),c):(a.baseState&&(a.baseState=!1,Ug=!0),a.memoizedState=b)}function Ei(a,c){var b=C;C=b!==0&&4>b?b:4,a(!0);var _=Qh.transition;Qh.transition={};try{a(!1),c()}finally{C=b,Qh.transition=_}}function Fi(){return di().memoizedState}function Gi(a,c,b){var _=lh(a);if(b={lane:_,action:b,hasEagerState:!1,eagerState:null,next:null},Hi(a))Ii(c,b);else if(b=Yg(a,c,b,_),b!==null){var $=L();mh(b,a,_,$),Ji(b,c,_)}}function ri(a,c,b){var _=lh(a),$={lane:_,action:b,hasEagerState:!1,eagerState:null,next:null};if(Hi(a))Ii(c,$);else{var k=a.alternate;if(a.lanes===0&&(k===null||k.lanes===0)&&(k=c.lastRenderedReducer,k!==null))try{var et=c.lastRenderedState,nt=k(et,b);if($.hasEagerState=!0,$.eagerState=nt,He(nt,et)){var ot=c.interleaved;ot===null?($.next=$,Xg(c)):($.next=ot.next,ot.next=$),c.interleaved=$;return}}catch{}finally{}b=Yg(a,c,$,_),b!==null&&($=L(),mh(b,a,_,$),Ji(b,c,_))}}function Hi(a){var c=a.alternate;return a===N||c!==null&&c===N}function Ii(a,c){Th=Sh=!0;var b=a.pending;b===null?c.next=c:(c.next=b.next,b.next=c),a.pending=c}function Ji(a,c,b){if(b&4194240){var _=c.lanes;_&=a.pendingLanes,b|=_,c.lanes=b,Cc(a,b)}}var ai={readContext:Vg,useCallback:Q,useContext:Q,useEffect:Q,useImperativeHandle:Q,useInsertionEffect:Q,useLayoutEffect:Q,useMemo:Q,useReducer:Q,useRef:Q,useState:Q,useDebugValue:Q,useDeferredValue:Q,useTransition:Q,useMutableSource:Q,useSyncExternalStore:Q,useId:Q,unstable_isNewReconciler:!1},Yh={readContext:Vg,useCallback:function(a,c){return ci().memoizedState=[a,c===void 0?null:c],a},useContext:Vg,useEffect:vi,useImperativeHandle:function(a,c,b){return b=b!=null?b.concat([a]):null,ti(4194308,4,yi.bind(null,c,a),b)},useLayoutEffect:function(a,c){return ti(4194308,4,a,c)},useInsertionEffect:function(a,c){return ti(4,2,a,c)},useMemo:function(a,c){var b=ci();return c=c===void 0?null:c,a=a(),b.memoizedState=[a,c],a},useReducer:function(a,c,b){var _=ci();return c=b!==void 0?b(c):c,_.memoizedState=_.baseState=c,a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:c},_.queue=a,a=a.dispatch=Gi.bind(null,N,a),[_.memoizedState,a]},useRef:function(a){var c=ci();return a={current:a},c.memoizedState=a},useState:qi,useDebugValue:Ai,useDeferredValue:function(a){return ci().memoizedState=a},useTransition:function(){var a=qi(!1),c=a[0];return a=Ei.bind(null,a[1]),ci().memoizedState=a,[c,a]},useMutableSource:function(){},useSyncExternalStore:function(a,c,b){var _=N,$=ci();if(I){if(b===void 0)throw Error(p(407));b=b()}else{if(b=c(),R===null)throw Error(p(349));Rh&30||ni(_,c,b)}$.memoizedState=b;var k={value:b,getSnapshot:c};return $.queue=k,vi(ki.bind(null,_,k,a),[a]),_.flags|=2048,li(9,mi.bind(null,_,k,b,c),void 0,null),b},useId:function(){var a=ci(),c=R.identifierPrefix;if(I){var b=sg,_=rg;b=(_&~(1<<32-oc(_)-1)).toString(32)+b,c=":"+c+"R"+b,b=Uh++,0<b&&(c+="H"+b.toString(32)),c+=":"}else b=Vh++,c=":"+c+"r"+b.toString(32)+":";return a.memoizedState=c},unstable_isNewReconciler:!1},Zh={readContext:Vg,useCallback:Bi,useContext:Vg,useEffect:ji,useImperativeHandle:zi,useInsertionEffect:wi,useLayoutEffect:xi,useMemo:Ci,useReducer:fi,useRef:si,useState:function(){return fi(ei)},useDebugValue:Ai,useDeferredValue:function(a){var c=di();return Di(c,O.memoizedState,a)},useTransition:function(){var a=fi(ei)[0],c=di().memoizedState;return[a,c]},useMutableSource:hi,useSyncExternalStore:ii,useId:Fi,unstable_isNewReconciler:!1},$h={readContext:Vg,useCallback:Bi,useContext:Vg,useEffect:ji,useImperativeHandle:zi,useInsertionEffect:wi,useLayoutEffect:xi,useMemo:Ci,useReducer:gi,useRef:si,useState:function(){return gi(ei)},useDebugValue:Ai,useDeferredValue:function(a){var c=di();return O===null?c.memoizedState=a:Di(c,O.memoizedState,a)},useTransition:function(){var a=gi(ei)[0],c=di().memoizedState;return[a,c]},useMutableSource:hi,useSyncExternalStore:ii,useId:Fi,unstable_isNewReconciler:!1};function Ki(a,c){try{var b="",_=c;do b+=Pa(_),_=_.return;while(_);var $=b}catch(k){$=`
Error generating stack: `+k.message+`
`+k.stack}return{value:a,source:c,stack:$,digest:null}}function Li(a,c,b){return{value:a,source:null,stack:b??null,digest:c??null}}function Mi(a,c){try{console.error(c.value)}catch(b){setTimeout(function(){throw b})}}var Ni=typeof WeakMap=="function"?WeakMap:Map;function Oi(a,c,b){b=ch(-1,b),b.tag=3,b.payload={element:null};var _=c.value;return b.callback=function(){Pi||(Pi=!0,Qi=_),Mi(a,c)},b}function Ri(a,c,b){b=ch(-1,b),b.tag=3;var _=a.type.getDerivedStateFromError;if(typeof _=="function"){var $=c.value;b.payload=function(){return _($)},b.callback=function(){Mi(a,c)}}var k=a.stateNode;return k!==null&&typeof k.componentDidCatch=="function"&&(b.callback=function(){Mi(a,c),typeof _!="function"&&(Si===null?Si=new Set([this]):Si.add(this));var et=c.stack;this.componentDidCatch(c.value,{componentStack:et!==null?et:""})}),b}function Ti(a,c,b){var _=a.pingCache;if(_===null){_=a.pingCache=new Ni;var $=new Set;_.set(c,$)}else $=_.get(c),$===void 0&&($=new Set,_.set(c,$));$.has(b)||($.add(b),a=Ui.bind(null,a,c,b),c.then(a,a))}function Vi(a){do{var c;if((c=a.tag===13)&&(c=a.memoizedState,c=c!==null?c.dehydrated!==null:!0),c)return a;a=a.return}while(a!==null);return null}function Wi(a,c,b,_,$){return a.mode&1?(a.flags|=65536,a.lanes=$,a):(a===c?a.flags|=65536:(a.flags|=128,b.flags|=131072,b.flags&=-52805,b.tag===1&&(b.alternate===null?b.tag=17:(c=ch(-1,1),c.tag=2,dh(b,c,1))),b.lanes|=1),a)}var Xi=ua.ReactCurrentOwner,Ug=!1;function Yi(a,c,b,_){c.child=a===null?Ch(c,null,b,_):Bh(c,a.child,b,_)}function Zi(a,c,b,_,$){b=b.render;var k=c.ref;return Tg(c,$),_=Xh(a,c,b,_,k,$),b=bi(),a!==null&&!Ug?(c.updateQueue=a.updateQueue,c.flags&=-2053,a.lanes&=~$,$i(a,c,$)):(I&&b&&vg(c),c.flags|=1,Yi(a,c,_,$),c.child)}function aj(a,c,b,_,$){if(a===null){var k=b.type;return typeof k=="function"&&!bj(k)&&k.defaultProps===void 0&&b.compare===null&&b.defaultProps===void 0?(c.tag=15,c.type=k,cj(a,c,k,_,$)):(a=yh(b.type,null,_,c,c.mode,$),a.ref=c.ref,a.return=c,c.child=a)}if(k=a.child,!(a.lanes&$)){var et=k.memoizedProps;if(b=b.compare,b=b!==null?b:Ie,b(et,_)&&a.ref===c.ref)return $i(a,c,$)}return c.flags|=1,a=wh(k,_),a.ref=c.ref,a.return=c,c.child=a}function cj(a,c,b,_,$){if(a!==null){var k=a.memoizedProps;if(Ie(k,_)&&a.ref===c.ref)if(Ug=!1,c.pendingProps=_=k,(a.lanes&$)!==0)a.flags&131072&&(Ug=!0);else return c.lanes=a.lanes,$i(a,c,$)}return dj(a,c,b,_,$)}function ej(a,c,b){var _=c.pendingProps,$=_.children,k=a!==null?a.memoizedState:null;if(_.mode==="hidden")if(!(c.mode&1))c.memoizedState={baseLanes:0,cachePool:null,transitions:null},G(fj,gj),gj|=b;else{if(!(b&1073741824))return a=k!==null?k.baseLanes|b:b,c.lanes=c.childLanes=1073741824,c.memoizedState={baseLanes:a,cachePool:null,transitions:null},c.updateQueue=null,G(fj,gj),gj|=a,null;c.memoizedState={baseLanes:0,cachePool:null,transitions:null},_=k!==null?k.baseLanes:b,G(fj,gj),gj|=_}else k!==null?(_=k.baseLanes|b,c.memoizedState=null):_=b,G(fj,gj),gj|=_;return Yi(a,c,$,b),c.child}function hj(a,c){var b=c.ref;(a===null&&b!==null||a!==null&&a.ref!==b)&&(c.flags|=512,c.flags|=2097152)}function dj(a,c,b,_,$){var k=Zf(b)?Xf:H.current;return k=Yf(c,k),Tg(c,$),b=Xh(a,c,b,_,k,$),_=bi(),a!==null&&!Ug?(c.updateQueue=a.updateQueue,c.flags&=-2053,a.lanes&=~$,$i(a,c,$)):(I&&_&&vg(c),c.flags|=1,Yi(a,c,b,$),c.child)}function ij(a,c,b,_,$){if(Zf(b)){var k=!0;cg(c)}else k=!1;if(Tg(c,$),c.stateNode===null)jj(a,c),ph(c,b,_),rh(c,b,_,$),_=!0;else if(a===null){var et=c.stateNode,nt=c.memoizedProps;et.props=nt;var ot=et.context,ht=b.contextType;typeof ht=="object"&&ht!==null?ht=Vg(ht):(ht=Zf(b)?Xf:H.current,ht=Yf(c,ht));var vt=b.getDerivedStateFromProps,_t=typeof vt=="function"||typeof et.getSnapshotBeforeUpdate=="function";_t||typeof et.UNSAFE_componentWillReceiveProps!="function"&&typeof et.componentWillReceiveProps!="function"||(nt!==_||ot!==ht)&&qh(c,et,_,ht),$g=!1;var kt=c.memoizedState;et.state=kt,gh(c,_,et,$),ot=c.memoizedState,nt!==_||kt!==ot||Wf.current||$g?(typeof vt=="function"&&(kh(c,b,vt,_),ot=c.memoizedState),(nt=$g||oh(c,b,nt,_,kt,ot,ht))?(_t||typeof et.UNSAFE_componentWillMount!="function"&&typeof et.componentWillMount!="function"||(typeof et.componentWillMount=="function"&&et.componentWillMount(),typeof et.UNSAFE_componentWillMount=="function"&&et.UNSAFE_componentWillMount()),typeof et.componentDidMount=="function"&&(c.flags|=4194308)):(typeof et.componentDidMount=="function"&&(c.flags|=4194308),c.memoizedProps=_,c.memoizedState=ot),et.props=_,et.state=ot,et.context=ht,_=nt):(typeof et.componentDidMount=="function"&&(c.flags|=4194308),_=!1)}else{et=c.stateNode,bh(a,c),nt=c.memoizedProps,ht=c.type===c.elementType?nt:Lg(c.type,nt),et.props=ht,_t=c.pendingProps,kt=et.context,ot=b.contextType,typeof ot=="object"&&ot!==null?ot=Vg(ot):(ot=Zf(b)?Xf:H.current,ot=Yf(c,ot));var $t=b.getDerivedStateFromProps;(vt=typeof $t=="function"||typeof et.getSnapshotBeforeUpdate=="function")||typeof et.UNSAFE_componentWillReceiveProps!="function"&&typeof et.componentWillReceiveProps!="function"||(nt!==_t||kt!==ot)&&qh(c,et,_,ot),$g=!1,kt=c.memoizedState,et.state=kt,gh(c,_,et,$);var Tt=c.memoizedState;nt!==_t||kt!==Tt||Wf.current||$g?(typeof $t=="function"&&(kh(c,b,$t,_),Tt=c.memoizedState),(ht=$g||oh(c,b,ht,_,kt,Tt,ot)||!1)?(vt||typeof et.UNSAFE_componentWillUpdate!="function"&&typeof et.componentWillUpdate!="function"||(typeof et.componentWillUpdate=="function"&&et.componentWillUpdate(_,Tt,ot),typeof et.UNSAFE_componentWillUpdate=="function"&&et.UNSAFE_componentWillUpdate(_,Tt,ot)),typeof et.componentDidUpdate=="function"&&(c.flags|=4),typeof et.getSnapshotBeforeUpdate=="function"&&(c.flags|=1024)):(typeof et.componentDidUpdate!="function"||nt===a.memoizedProps&&kt===a.memoizedState||(c.flags|=4),typeof et.getSnapshotBeforeUpdate!="function"||nt===a.memoizedProps&&kt===a.memoizedState||(c.flags|=1024),c.memoizedProps=_,c.memoizedState=Tt),et.props=_,et.state=Tt,et.context=ot,_=ht):(typeof et.componentDidUpdate!="function"||nt===a.memoizedProps&&kt===a.memoizedState||(c.flags|=4),typeof et.getSnapshotBeforeUpdate!="function"||nt===a.memoizedProps&&kt===a.memoizedState||(c.flags|=1024),_=!1)}return kj(a,c,b,_,k,$)}function kj(a,c,b,_,$,k){hj(a,c);var et=(c.flags&128)!==0;if(!_&&!et)return $&&dg(c,b,!1),$i(a,c,k);_=c.stateNode,Xi.current=c;var nt=et&&typeof b.getDerivedStateFromError!="function"?null:_.render();return c.flags|=1,a!==null&&et?(c.child=Bh(c,a.child,null,k),c.child=Bh(c,null,nt,k)):Yi(a,c,nt,k),c.memoizedState=_.state,$&&dg(c,b,!0),c.child}function lj(a){var c=a.stateNode;c.pendingContext?ag(a,c.pendingContext,c.pendingContext!==c.context):c.context&&ag(a,c.context,!1),Ih(a,c.containerInfo)}function mj(a,c,b,_,$){return Ig(),Jg($),c.flags|=256,Yi(a,c,b,_),c.child}var nj={dehydrated:null,treeContext:null,retryLane:0};function oj(a){return{baseLanes:a,cachePool:null,transitions:null}}function pj(a,c,b){var _=c.pendingProps,$=M.current,k=!1,et=(c.flags&128)!==0,nt;if((nt=et)||(nt=a!==null&&a.memoizedState===null?!1:($&2)!==0),nt?(k=!0,c.flags&=-129):(a===null||a.memoizedState!==null)&&($|=1),G(M,$&1),a===null)return Eg(c),a=c.memoizedState,a!==null&&(a=a.dehydrated,a!==null)?(c.mode&1?a.data==="$!"?c.lanes=8:c.lanes=1073741824:c.lanes=1,null):(et=_.children,a=_.fallback,k?(_=c.mode,k=c.child,et={mode:"hidden",children:et},!(_&1)&&k!==null?(k.childLanes=0,k.pendingProps=et):k=qj(et,_,0,null),a=Ah(a,_,b,null),k.return=c,a.return=c,k.sibling=a,c.child=k,c.child.memoizedState=oj(b),c.memoizedState=nj,a):rj(c,et));if($=a.memoizedState,$!==null&&(nt=$.dehydrated,nt!==null))return sj(a,c,et,_,nt,$,b);if(k){k=_.fallback,et=c.mode,$=a.child,nt=$.sibling;var ot={mode:"hidden",children:_.children};return!(et&1)&&c.child!==$?(_=c.child,_.childLanes=0,_.pendingProps=ot,c.deletions=null):(_=wh($,ot),_.subtreeFlags=$.subtreeFlags&14680064),nt!==null?k=wh(nt,k):(k=Ah(k,et,b,null),k.flags|=2),k.return=c,_.return=c,_.sibling=k,c.child=_,_=k,k=c.child,et=a.child.memoizedState,et=et===null?oj(b):{baseLanes:et.baseLanes|b,cachePool:null,transitions:et.transitions},k.memoizedState=et,k.childLanes=a.childLanes&~b,c.memoizedState=nj,_}return k=a.child,a=k.sibling,_=wh(k,{mode:"visible",children:_.children}),!(c.mode&1)&&(_.lanes=b),_.return=c,_.sibling=null,a!==null&&(b=c.deletions,b===null?(c.deletions=[a],c.flags|=16):b.push(a)),c.child=_,c.memoizedState=null,_}function rj(a,c){return c=qj({mode:"visible",children:c},a.mode,0,null),c.return=a,a.child=c}function tj(a,c,b,_){return _!==null&&Jg(_),Bh(c,a.child,null,b),a=rj(c,c.pendingProps.children),a.flags|=2,c.memoizedState=null,a}function sj(a,c,b,_,$,k,et){if(b)return c.flags&256?(c.flags&=-257,_=Li(Error(p(422))),tj(a,c,et,_)):c.memoizedState!==null?(c.child=a.child,c.flags|=128,null):(k=_.fallback,$=c.mode,_=qj({mode:"visible",children:_.children},$,0,null),k=Ah(k,$,et,null),k.flags|=2,_.return=c,k.return=c,_.sibling=k,c.child=_,c.mode&1&&Bh(c,a.child,null,et),c.child.memoizedState=oj(et),c.memoizedState=nj,k);if(!(c.mode&1))return tj(a,c,et,null);if($.data==="$!"){if(_=$.nextSibling&&$.nextSibling.dataset,_)var nt=_.dgst;return _=nt,k=Error(p(419)),_=Li(k,_,void 0),tj(a,c,et,_)}if(nt=(et&a.childLanes)!==0,Ug||nt){if(_=R,_!==null){switch(et&-et){case 4:$=2;break;case 16:$=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:$=32;break;case 536870912:$=268435456;break;default:$=0}$=$&(_.suspendedLanes|et)?0:$,$!==0&&$!==k.retryLane&&(k.retryLane=$,Zg(a,$),mh(_,a,$,-1))}return uj(),_=Li(Error(p(421))),tj(a,c,et,_)}return $.data==="$?"?(c.flags|=128,c.child=a.child,c=vj.bind(null,a),$._reactRetry=c,null):(a=k.treeContext,yg=Lf($.nextSibling),xg=c,I=!0,zg=null,a!==null&&(og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,rg=a.id,sg=a.overflow,qg=c),c=rj(c,_.children),c.flags|=4096,c)}function wj(a,c,b){a.lanes|=c;var _=a.alternate;_!==null&&(_.lanes|=c),Sg(a.return,c,b)}function xj(a,c,b,_,$){var k=a.memoizedState;k===null?a.memoizedState={isBackwards:c,rendering:null,renderingStartTime:0,last:_,tail:b,tailMode:$}:(k.isBackwards=c,k.rendering=null,k.renderingStartTime=0,k.last=_,k.tail=b,k.tailMode=$)}function yj(a,c,b){var _=c.pendingProps,$=_.revealOrder,k=_.tail;if(Yi(a,c,_.children,b),_=M.current,_&2)_=_&1|2,c.flags|=128;else{if(a!==null&&a.flags&128)e:for(a=c.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&wj(a,b,c);else if(a.tag===19)wj(a,b,c);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===c)break e;for(;a.sibling===null;){if(a.return===null||a.return===c)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}_&=1}if(G(M,_),!(c.mode&1))c.memoizedState=null;else switch($){case"forwards":for(b=c.child,$=null;b!==null;)a=b.alternate,a!==null&&Mh(a)===null&&($=b),b=b.sibling;b=$,b===null?($=c.child,c.child=null):($=b.sibling,b.sibling=null),xj(c,!1,$,b,k);break;case"backwards":for(b=null,$=c.child,c.child=null;$!==null;){if(a=$.alternate,a!==null&&Mh(a)===null){c.child=$;break}a=$.sibling,$.sibling=b,b=$,$=a}xj(c,!0,b,null,k);break;case"together":xj(c,!1,null,null,void 0);break;default:c.memoizedState=null}return c.child}function jj(a,c){!(c.mode&1)&&a!==null&&(a.alternate=null,c.alternate=null,c.flags|=2)}function $i(a,c,b){if(a!==null&&(c.dependencies=a.dependencies),hh|=c.lanes,!(b&c.childLanes))return null;if(a!==null&&c.child!==a.child)throw Error(p(153));if(c.child!==null){for(a=c.child,b=wh(a,a.pendingProps),c.child=b,b.return=c;a.sibling!==null;)a=a.sibling,b=b.sibling=wh(a,a.pendingProps),b.return=c;b.sibling=null}return c.child}function zj(a,c,b){switch(c.tag){case 3:lj(c),Ig();break;case 5:Kh(c);break;case 1:Zf(c.type)&&cg(c);break;case 4:Ih(c,c.stateNode.containerInfo);break;case 10:var _=c.type._context,$=c.memoizedProps.value;G(Mg,_._currentValue),_._currentValue=$;break;case 13:if(_=c.memoizedState,_!==null)return _.dehydrated!==null?(G(M,M.current&1),c.flags|=128,null):b&c.child.childLanes?pj(a,c,b):(G(M,M.current&1),a=$i(a,c,b),a!==null?a.sibling:null);G(M,M.current&1);break;case 19:if(_=(b&c.childLanes)!==0,a.flags&128){if(_)return yj(a,c,b);c.flags|=128}if($=c.memoizedState,$!==null&&($.rendering=null,$.tail=null,$.lastEffect=null),G(M,M.current),_)break;return null;case 22:case 23:return c.lanes=0,ej(a,c,b)}return $i(a,c,b)}var Aj,Bj,Cj,Dj;Aj=function(a,c){for(var b=c.child;b!==null;){if(b.tag===5||b.tag===6)a.appendChild(b.stateNode);else if(b.tag!==4&&b.child!==null){b.child.return=b,b=b.child;continue}if(b===c)break;for(;b.sibling===null;){if(b.return===null||b.return===c)return;b=b.return}b.sibling.return=b.return,b=b.sibling}};Bj=function(){};Cj=function(a,c,b,_){var $=a.memoizedProps;if($!==_){a=c.stateNode,Hh(Eh.current);var k=null;switch(b){case"input":$=Ya(a,$),_=Ya(a,_),k=[];break;case"select":$=A({},$,{value:void 0}),_=A({},_,{value:void 0}),k=[];break;case"textarea":$=gb(a,$),_=gb(a,_),k=[];break;default:typeof $.onClick!="function"&&typeof _.onClick=="function"&&(a.onclick=Bf)}ub(b,_);var et;b=null;for(ht in $)if(!_.hasOwnProperty(ht)&&$.hasOwnProperty(ht)&&$[ht]!=null)if(ht==="style"){var nt=$[ht];for(et in nt)nt.hasOwnProperty(et)&&(b||(b={}),b[et]="")}else ht!=="dangerouslySetInnerHTML"&&ht!=="children"&&ht!=="suppressContentEditableWarning"&&ht!=="suppressHydrationWarning"&&ht!=="autoFocus"&&(ea.hasOwnProperty(ht)?k||(k=[]):(k=k||[]).push(ht,null));for(ht in _){var ot=_[ht];if(nt=$!=null?$[ht]:void 0,_.hasOwnProperty(ht)&&ot!==nt&&(ot!=null||nt!=null))if(ht==="style")if(nt){for(et in nt)!nt.hasOwnProperty(et)||ot&&ot.hasOwnProperty(et)||(b||(b={}),b[et]="");for(et in ot)ot.hasOwnProperty(et)&&nt[et]!==ot[et]&&(b||(b={}),b[et]=ot[et])}else b||(k||(k=[]),k.push(ht,b)),b=ot;else ht==="dangerouslySetInnerHTML"?(ot=ot?ot.__html:void 0,nt=nt?nt.__html:void 0,ot!=null&&nt!==ot&&(k=k||[]).push(ht,ot)):ht==="children"?typeof ot!="string"&&typeof ot!="number"||(k=k||[]).push(ht,""+ot):ht!=="suppressContentEditableWarning"&&ht!=="suppressHydrationWarning"&&(ea.hasOwnProperty(ht)?(ot!=null&&ht==="onScroll"&&D("scroll",a),k||nt===ot||(k=[])):(k=k||[]).push(ht,ot))}b&&(k=k||[]).push("style",b);var ht=k;(c.updateQueue=ht)&&(c.flags|=4)}};Dj=function(a,c,b,_){b!==_&&(c.flags|=4)};function Ej(a,c){if(!I)switch(a.tailMode){case"hidden":c=a.tail;for(var b=null;c!==null;)c.alternate!==null&&(b=c),c=c.sibling;b===null?a.tail=null:b.sibling=null;break;case"collapsed":b=a.tail;for(var _=null;b!==null;)b.alternate!==null&&(_=b),b=b.sibling;_===null?c||a.tail===null?a.tail=null:a.tail.sibling=null:_.sibling=null}}function S(a){var c=a.alternate!==null&&a.alternate.child===a.child,b=0,_=0;if(c)for(var $=a.child;$!==null;)b|=$.lanes|$.childLanes,_|=$.subtreeFlags&14680064,_|=$.flags&14680064,$.return=a,$=$.sibling;else for($=a.child;$!==null;)b|=$.lanes|$.childLanes,_|=$.subtreeFlags,_|=$.flags,$.return=a,$=$.sibling;return a.subtreeFlags|=_,a.childLanes=b,c}function Fj(a,c,b){var _=c.pendingProps;switch(wg(c),c.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return S(c),null;case 1:return Zf(c.type)&&$f(),S(c),null;case 3:return _=c.stateNode,Jh(),E(Wf),E(H),Oh(),_.pendingContext&&(_.context=_.pendingContext,_.pendingContext=null),(a===null||a.child===null)&&(Gg(c)?c.flags|=4:a===null||a.memoizedState.isDehydrated&&!(c.flags&256)||(c.flags|=1024,zg!==null&&(Gj(zg),zg=null))),Bj(a,c),S(c),null;case 5:Lh(c);var $=Hh(Gh.current);if(b=c.type,a!==null&&c.stateNode!=null)Cj(a,c,b,_,$),a.ref!==c.ref&&(c.flags|=512,c.flags|=2097152);else{if(!_){if(c.stateNode===null)throw Error(p(166));return S(c),null}if(a=Hh(Eh.current),Gg(c)){_=c.stateNode,b=c.type;var k=c.memoizedProps;switch(_[Of]=c,_[Pf]=k,a=(c.mode&1)!==0,b){case"dialog":D("cancel",_),D("close",_);break;case"iframe":case"object":case"embed":D("load",_);break;case"video":case"audio":for($=0;$<lf.length;$++)D(lf[$],_);break;case"source":D("error",_);break;case"img":case"image":case"link":D("error",_),D("load",_);break;case"details":D("toggle",_);break;case"input":Za(_,k),D("invalid",_);break;case"select":_._wrapperState={wasMultiple:!!k.multiple},D("invalid",_);break;case"textarea":hb(_,k),D("invalid",_)}ub(b,k),$=null;for(var et in k)if(k.hasOwnProperty(et)){var nt=k[et];et==="children"?typeof nt=="string"?_.textContent!==nt&&(k.suppressHydrationWarning!==!0&&Af(_.textContent,nt,a),$=["children",nt]):typeof nt=="number"&&_.textContent!==""+nt&&(k.suppressHydrationWarning!==!0&&Af(_.textContent,nt,a),$=["children",""+nt]):ea.hasOwnProperty(et)&&nt!=null&&et==="onScroll"&&D("scroll",_)}switch(b){case"input":Va(_),db(_,k,!0);break;case"textarea":Va(_),jb(_);break;case"select":case"option":break;default:typeof k.onClick=="function"&&(_.onclick=Bf)}_=$,c.updateQueue=_,_!==null&&(c.flags|=4)}else{et=$.nodeType===9?$:$.ownerDocument,a==="http://www.w3.org/1999/xhtml"&&(a=kb(b)),a==="http://www.w3.org/1999/xhtml"?b==="script"?(a=et.createElement("div"),a.innerHTML="<script><\/script>",a=a.removeChild(a.firstChild)):typeof _.is=="string"?a=et.createElement(b,{is:_.is}):(a=et.createElement(b),b==="select"&&(et=a,_.multiple?et.multiple=!0:_.size&&(et.size=_.size))):a=et.createElementNS(a,b),a[Of]=c,a[Pf]=_,Aj(a,c,!1,!1),c.stateNode=a;e:{switch(et=vb(b,_),b){case"dialog":D("cancel",a),D("close",a),$=_;break;case"iframe":case"object":case"embed":D("load",a),$=_;break;case"video":case"audio":for($=0;$<lf.length;$++)D(lf[$],a);$=_;break;case"source":D("error",a),$=_;break;case"img":case"image":case"link":D("error",a),D("load",a),$=_;break;case"details":D("toggle",a),$=_;break;case"input":Za(a,_),$=Ya(a,_),D("invalid",a);break;case"option":$=_;break;case"select":a._wrapperState={wasMultiple:!!_.multiple},$=A({},_,{value:void 0}),D("invalid",a);break;case"textarea":hb(a,_),$=gb(a,_),D("invalid",a);break;default:$=_}ub(b,$),nt=$;for(k in nt)if(nt.hasOwnProperty(k)){var ot=nt[k];k==="style"?sb(a,ot):k==="dangerouslySetInnerHTML"?(ot=ot?ot.__html:void 0,ot!=null&&nb(a,ot)):k==="children"?typeof ot=="string"?(b!=="textarea"||ot!=="")&&ob(a,ot):typeof ot=="number"&&ob(a,""+ot):k!=="suppressContentEditableWarning"&&k!=="suppressHydrationWarning"&&k!=="autoFocus"&&(ea.hasOwnProperty(k)?ot!=null&&k==="onScroll"&&D("scroll",a):ot!=null&&ta(a,k,ot,et))}switch(b){case"input":Va(a),db(a,_,!1);break;case"textarea":Va(a),jb(a);break;case"option":_.value!=null&&a.setAttribute("value",""+Sa(_.value));break;case"select":a.multiple=!!_.multiple,k=_.value,k!=null?fb(a,!!_.multiple,k,!1):_.defaultValue!=null&&fb(a,!!_.multiple,_.defaultValue,!0);break;default:typeof $.onClick=="function"&&(a.onclick=Bf)}switch(b){case"button":case"input":case"select":case"textarea":_=!!_.autoFocus;break e;case"img":_=!0;break e;default:_=!1}}_&&(c.flags|=4)}c.ref!==null&&(c.flags|=512,c.flags|=2097152)}return S(c),null;case 6:if(a&&c.stateNode!=null)Dj(a,c,a.memoizedProps,_);else{if(typeof _!="string"&&c.stateNode===null)throw Error(p(166));if(b=Hh(Gh.current),Hh(Eh.current),Gg(c)){if(_=c.stateNode,b=c.memoizedProps,_[Of]=c,(k=_.nodeValue!==b)&&(a=xg,a!==null))switch(a.tag){case 3:Af(_.nodeValue,b,(a.mode&1)!==0);break;case 5:a.memoizedProps.suppressHydrationWarning!==!0&&Af(_.nodeValue,b,(a.mode&1)!==0)}k&&(c.flags|=4)}else _=(b.nodeType===9?b:b.ownerDocument).createTextNode(_),_[Of]=c,c.stateNode=_}return S(c),null;case 13:if(E(M),_=c.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(I&&yg!==null&&c.mode&1&&!(c.flags&128))Hg(),Ig(),c.flags|=98560,k=!1;else if(k=Gg(c),_!==null&&_.dehydrated!==null){if(a===null){if(!k)throw Error(p(318));if(k=c.memoizedState,k=k!==null?k.dehydrated:null,!k)throw Error(p(317));k[Of]=c}else Ig(),!(c.flags&128)&&(c.memoizedState=null),c.flags|=4;S(c),k=!1}else zg!==null&&(Gj(zg),zg=null),k=!0;if(!k)return c.flags&65536?c:null}return c.flags&128?(c.lanes=b,c):(_=_!==null,_!==(a!==null&&a.memoizedState!==null)&&_&&(c.child.flags|=8192,c.mode&1&&(a===null||M.current&1?T===0&&(T=3):uj())),c.updateQueue!==null&&(c.flags|=4),S(c),null);case 4:return Jh(),Bj(a,c),a===null&&sf(c.stateNode.containerInfo),S(c),null;case 10:return Rg(c.type._context),S(c),null;case 17:return Zf(c.type)&&$f(),S(c),null;case 19:if(E(M),k=c.memoizedState,k===null)return S(c),null;if(_=(c.flags&128)!==0,et=k.rendering,et===null)if(_)Ej(k,!1);else{if(T!==0||a!==null&&a.flags&128)for(a=c.child;a!==null;){if(et=Mh(a),et!==null){for(c.flags|=128,Ej(k,!1),_=et.updateQueue,_!==null&&(c.updateQueue=_,c.flags|=4),c.subtreeFlags=0,_=b,b=c.child;b!==null;)k=b,a=_,k.flags&=14680066,et=k.alternate,et===null?(k.childLanes=0,k.lanes=a,k.child=null,k.subtreeFlags=0,k.memoizedProps=null,k.memoizedState=null,k.updateQueue=null,k.dependencies=null,k.stateNode=null):(k.childLanes=et.childLanes,k.lanes=et.lanes,k.child=et.child,k.subtreeFlags=0,k.deletions=null,k.memoizedProps=et.memoizedProps,k.memoizedState=et.memoizedState,k.updateQueue=et.updateQueue,k.type=et.type,a=et.dependencies,k.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),b=b.sibling;return G(M,M.current&1|2),c.child}a=a.sibling}k.tail!==null&&B()>Hj&&(c.flags|=128,_=!0,Ej(k,!1),c.lanes=4194304)}else{if(!_)if(a=Mh(et),a!==null){if(c.flags|=128,_=!0,b=a.updateQueue,b!==null&&(c.updateQueue=b,c.flags|=4),Ej(k,!0),k.tail===null&&k.tailMode==="hidden"&&!et.alternate&&!I)return S(c),null}else 2*B()-k.renderingStartTime>Hj&&b!==1073741824&&(c.flags|=128,_=!0,Ej(k,!1),c.lanes=4194304);k.isBackwards?(et.sibling=c.child,c.child=et):(b=k.last,b!==null?b.sibling=et:c.child=et,k.last=et)}return k.tail!==null?(c=k.tail,k.rendering=c,k.tail=c.sibling,k.renderingStartTime=B(),c.sibling=null,b=M.current,G(M,_?b&1|2:b&1),c):(S(c),null);case 22:case 23:return Ij(),_=c.memoizedState!==null,a!==null&&a.memoizedState!==null!==_&&(c.flags|=8192),_&&c.mode&1?gj&1073741824&&(S(c),c.subtreeFlags&6&&(c.flags|=8192)):S(c),null;case 24:return null;case 25:return null}throw Error(p(156,c.tag))}function Jj(a,c){switch(wg(c),c.tag){case 1:return Zf(c.type)&&$f(),a=c.flags,a&65536?(c.flags=a&-65537|128,c):null;case 3:return Jh(),E(Wf),E(H),Oh(),a=c.flags,a&65536&&!(a&128)?(c.flags=a&-65537|128,c):null;case 5:return Lh(c),null;case 13:if(E(M),a=c.memoizedState,a!==null&&a.dehydrated!==null){if(c.alternate===null)throw Error(p(340));Ig()}return a=c.flags,a&65536?(c.flags=a&-65537|128,c):null;case 19:return E(M),null;case 4:return Jh(),null;case 10:return Rg(c.type._context),null;case 22:case 23:return Ij(),null;case 24:return null;default:return null}}var Kj=!1,U=!1,Lj=typeof WeakSet=="function"?WeakSet:Set,V=null;function Mj(a,c){var b=a.ref;if(b!==null)if(typeof b=="function")try{b(null)}catch(_){W(a,c,_)}else b.current=null}function Nj(a,c,b){try{b()}catch(_){W(a,c,_)}}var Oj=!1;function Pj(a,c){if(Cf=dd,a=Me(),Ne(a)){if("selectionStart"in a)var b={start:a.selectionStart,end:a.selectionEnd};else e:{b=(b=a.ownerDocument)&&b.defaultView||window;var _=b.getSelection&&b.getSelection();if(_&&_.rangeCount!==0){b=_.anchorNode;var $=_.anchorOffset,k=_.focusNode;_=_.focusOffset;try{b.nodeType,k.nodeType}catch{b=null;break e}var et=0,nt=-1,ot=-1,ht=0,vt=0,_t=a,kt=null;t:for(;;){for(var $t;_t!==b||$!==0&&_t.nodeType!==3||(nt=et+$),_t!==k||_!==0&&_t.nodeType!==3||(ot=et+_),_t.nodeType===3&&(et+=_t.nodeValue.length),($t=_t.firstChild)!==null;)kt=_t,_t=$t;for(;;){if(_t===a)break t;if(kt===b&&++ht===$&&(nt=et),kt===k&&++vt===_&&(ot=et),($t=_t.nextSibling)!==null)break;_t=kt,kt=_t.parentNode}_t=$t}b=nt===-1||ot===-1?null:{start:nt,end:ot}}else b=null}b=b||{start:0,end:0}}else b=null;for(Df={focusedElem:a,selectionRange:b},dd=!1,V=c;V!==null;)if(c=V,a=c.child,(c.subtreeFlags&1028)!==0&&a!==null)a.return=c,V=a;else for(;V!==null;){c=V;try{var Tt=c.alternate;if(c.flags&1024)switch(c.tag){case 0:case 11:case 15:break;case 1:if(Tt!==null){var At=Tt.memoizedProps,Mt=Tt.memoizedState,Dt=c.stateNode,Rt=Dt.getSnapshotBeforeUpdate(c.elementType===c.type?At:Lg(c.type,At),Mt);Dt.__reactInternalSnapshotBeforeUpdate=Rt}break;case 3:var xt=c.stateNode.containerInfo;xt.nodeType===1?xt.textContent="":xt.nodeType===9&&xt.documentElement&&xt.removeChild(xt.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(p(163))}}catch(Jt){W(c,c.return,Jt)}if(a=c.sibling,a!==null){a.return=c.return,V=a;break}V=c.return}return Tt=Oj,Oj=!1,Tt}function Qj(a,c,b){var _=c.updateQueue;if(_=_!==null?_.lastEffect:null,_!==null){var $=_=_.next;do{if(($.tag&a)===a){var k=$.destroy;$.destroy=void 0,k!==void 0&&Nj(c,b,k)}$=$.next}while($!==_)}}function Rj(a,c){if(c=c.updateQueue,c=c!==null?c.lastEffect:null,c!==null){var b=c=c.next;do{if((b.tag&a)===a){var _=b.create;b.destroy=_()}b=b.next}while(b!==c)}}function Sj(a){var c=a.ref;if(c!==null){var b=a.stateNode;switch(a.tag){case 5:a=b;break;default:a=b}typeof c=="function"?c(a):c.current=a}}function Tj(a){var c=a.alternate;c!==null&&(a.alternate=null,Tj(c)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(c=a.stateNode,c!==null&&(delete c[Of],delete c[Pf],delete c[of$1],delete c[Qf],delete c[Rf])),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}function Uj(a){return a.tag===5||a.tag===3||a.tag===4}function Vj(a){e:for(;;){for(;a.sibling===null;){if(a.return===null||Uj(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.flags&2||a.child===null||a.tag===4)continue e;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function Wj(a,c,b){var _=a.tag;if(_===5||_===6)a=a.stateNode,c?b.nodeType===8?b.parentNode.insertBefore(a,c):b.insertBefore(a,c):(b.nodeType===8?(c=b.parentNode,c.insertBefore(a,b)):(c=b,c.appendChild(a)),b=b._reactRootContainer,b!=null||c.onclick!==null||(c.onclick=Bf));else if(_!==4&&(a=a.child,a!==null))for(Wj(a,c,b),a=a.sibling;a!==null;)Wj(a,c,b),a=a.sibling}function Xj(a,c,b){var _=a.tag;if(_===5||_===6)a=a.stateNode,c?b.insertBefore(a,c):b.appendChild(a);else if(_!==4&&(a=a.child,a!==null))for(Xj(a,c,b),a=a.sibling;a!==null;)Xj(a,c,b),a=a.sibling}var X=null,Yj=!1;function Zj(a,c,b){for(b=b.child;b!==null;)ak(a,c,b),b=b.sibling}function ak(a,c,b){if(lc&&typeof lc.onCommitFiberUnmount=="function")try{lc.onCommitFiberUnmount(kc,b)}catch{}switch(b.tag){case 5:U||Mj(b,c);case 6:var _=X,$=Yj;X=null,Zj(a,c,b),X=_,Yj=$,X!==null&&(Yj?(a=X,b=b.stateNode,a.nodeType===8?a.parentNode.removeChild(b):a.removeChild(b)):X.removeChild(b.stateNode));break;case 18:X!==null&&(Yj?(a=X,b=b.stateNode,a.nodeType===8?Kf(a.parentNode,b):a.nodeType===1&&Kf(a,b),bd(a)):Kf(X,b.stateNode));break;case 4:_=X,$=Yj,X=b.stateNode.containerInfo,Yj=!0,Zj(a,c,b),X=_,Yj=$;break;case 0:case 11:case 14:case 15:if(!U&&(_=b.updateQueue,_!==null&&(_=_.lastEffect,_!==null))){$=_=_.next;do{var k=$,et=k.destroy;k=k.tag,et!==void 0&&(k&2||k&4)&&Nj(b,c,et),$=$.next}while($!==_)}Zj(a,c,b);break;case 1:if(!U&&(Mj(b,c),_=b.stateNode,typeof _.componentWillUnmount=="function"))try{_.props=b.memoizedProps,_.state=b.memoizedState,_.componentWillUnmount()}catch(nt){W(b,c,nt)}Zj(a,c,b);break;case 21:Zj(a,c,b);break;case 22:b.mode&1?(U=(_=U)||b.memoizedState!==null,Zj(a,c,b),U=_):Zj(a,c,b);break;default:Zj(a,c,b)}}function bk(a){var c=a.updateQueue;if(c!==null){a.updateQueue=null;var b=a.stateNode;b===null&&(b=a.stateNode=new Lj),c.forEach(function(_){var $=ck.bind(null,a,_);b.has(_)||(b.add(_),_.then($,$))})}}function dk(a,c){var b=c.deletions;if(b!==null)for(var _=0;_<b.length;_++){var $=b[_];try{var k=a,et=c,nt=et;e:for(;nt!==null;){switch(nt.tag){case 5:X=nt.stateNode,Yj=!1;break e;case 3:X=nt.stateNode.containerInfo,Yj=!0;break e;case 4:X=nt.stateNode.containerInfo,Yj=!0;break e}nt=nt.return}if(X===null)throw Error(p(160));ak(k,et,$),X=null,Yj=!1;var ot=$.alternate;ot!==null&&(ot.return=null),$.return=null}catch(ht){W($,c,ht)}}if(c.subtreeFlags&12854)for(c=c.child;c!==null;)ek(c,a),c=c.sibling}function ek(a,c){var b=a.alternate,_=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:if(dk(c,a),fk(a),_&4){try{Qj(3,a,a.return),Rj(3,a)}catch(At){W(a,a.return,At)}try{Qj(5,a,a.return)}catch(At){W(a,a.return,At)}}break;case 1:dk(c,a),fk(a),_&512&&b!==null&&Mj(b,b.return);break;case 5:if(dk(c,a),fk(a),_&512&&b!==null&&Mj(b,b.return),a.flags&32){var $=a.stateNode;try{ob($,"")}catch(At){W(a,a.return,At)}}if(_&4&&($=a.stateNode,$!=null)){var k=a.memoizedProps,et=b!==null?b.memoizedProps:k,nt=a.type,ot=a.updateQueue;if(a.updateQueue=null,ot!==null)try{nt==="input"&&k.type==="radio"&&k.name!=null&&ab($,k),vb(nt,et);var ht=vb(nt,k);for(et=0;et<ot.length;et+=2){var vt=ot[et],_t=ot[et+1];vt==="style"?sb($,_t):vt==="dangerouslySetInnerHTML"?nb($,_t):vt==="children"?ob($,_t):ta($,vt,_t,ht)}switch(nt){case"input":bb($,k);break;case"textarea":ib($,k);break;case"select":var kt=$._wrapperState.wasMultiple;$._wrapperState.wasMultiple=!!k.multiple;var $t=k.value;$t!=null?fb($,!!k.multiple,$t,!1):kt!==!!k.multiple&&(k.defaultValue!=null?fb($,!!k.multiple,k.defaultValue,!0):fb($,!!k.multiple,k.multiple?[]:"",!1))}$[Pf]=k}catch(At){W(a,a.return,At)}}break;case 6:if(dk(c,a),fk(a),_&4){if(a.stateNode===null)throw Error(p(162));$=a.stateNode,k=a.memoizedProps;try{$.nodeValue=k}catch(At){W(a,a.return,At)}}break;case 3:if(dk(c,a),fk(a),_&4&&b!==null&&b.memoizedState.isDehydrated)try{bd(c.containerInfo)}catch(At){W(a,a.return,At)}break;case 4:dk(c,a),fk(a);break;case 13:dk(c,a),fk(a),$=a.child,$.flags&8192&&(k=$.memoizedState!==null,$.stateNode.isHidden=k,!k||$.alternate!==null&&$.alternate.memoizedState!==null||(gk=B())),_&4&&bk(a);break;case 22:if(vt=b!==null&&b.memoizedState!==null,a.mode&1?(U=(ht=U)||vt,dk(c,a),U=ht):dk(c,a),fk(a),_&8192){if(ht=a.memoizedState!==null,(a.stateNode.isHidden=ht)&&!vt&&a.mode&1)for(V=a,vt=a.child;vt!==null;){for(_t=V=vt;V!==null;){switch(kt=V,$t=kt.child,kt.tag){case 0:case 11:case 14:case 15:Qj(4,kt,kt.return);break;case 1:Mj(kt,kt.return);var Tt=kt.stateNode;if(typeof Tt.componentWillUnmount=="function"){_=kt,b=kt.return;try{c=_,Tt.props=c.memoizedProps,Tt.state=c.memoizedState,Tt.componentWillUnmount()}catch(At){W(_,b,At)}}break;case 5:Mj(kt,kt.return);break;case 22:if(kt.memoizedState!==null){hk(_t);continue}}$t!==null?($t.return=kt,V=$t):hk(_t)}vt=vt.sibling}e:for(vt=null,_t=a;;){if(_t.tag===5){if(vt===null){vt=_t;try{$=_t.stateNode,ht?(k=$.style,typeof k.setProperty=="function"?k.setProperty("display","none","important"):k.display="none"):(nt=_t.stateNode,ot=_t.memoizedProps.style,et=ot!=null&&ot.hasOwnProperty("display")?ot.display:null,nt.style.display=rb("display",et))}catch(At){W(a,a.return,At)}}}else if(_t.tag===6){if(vt===null)try{_t.stateNode.nodeValue=ht?"":_t.memoizedProps}catch(At){W(a,a.return,At)}}else if((_t.tag!==22&&_t.tag!==23||_t.memoizedState===null||_t===a)&&_t.child!==null){_t.child.return=_t,_t=_t.child;continue}if(_t===a)break e;for(;_t.sibling===null;){if(_t.return===null||_t.return===a)break e;vt===_t&&(vt=null),_t=_t.return}vt===_t&&(vt=null),_t.sibling.return=_t.return,_t=_t.sibling}}break;case 19:dk(c,a),fk(a),_&4&&bk(a);break;case 21:break;default:dk(c,a),fk(a)}}function fk(a){var c=a.flags;if(c&2){try{e:{for(var b=a.return;b!==null;){if(Uj(b)){var _=b;break e}b=b.return}throw Error(p(160))}switch(_.tag){case 5:var $=_.stateNode;_.flags&32&&(ob($,""),_.flags&=-33);var k=Vj(a);Xj(a,k,$);break;case 3:case 4:var et=_.stateNode.containerInfo,nt=Vj(a);Wj(a,nt,et);break;default:throw Error(p(161))}}catch(ot){W(a,a.return,ot)}a.flags&=-3}c&4096&&(a.flags&=-4097)}function ik(a,c,b){V=a,jk(a)}function jk(a,c,b){for(var _=(a.mode&1)!==0;V!==null;){var $=V,k=$.child;if($.tag===22&&_){var et=$.memoizedState!==null||Kj;if(!et){var nt=$.alternate,ot=nt!==null&&nt.memoizedState!==null||U;nt=Kj;var ht=U;if(Kj=et,(U=ot)&&!ht)for(V=$;V!==null;)et=V,ot=et.child,et.tag===22&&et.memoizedState!==null?kk($):ot!==null?(ot.return=et,V=ot):kk($);for(;k!==null;)V=k,jk(k),k=k.sibling;V=$,Kj=nt,U=ht}lk(a)}else $.subtreeFlags&8772&&k!==null?(k.return=$,V=k):lk(a)}}function lk(a){for(;V!==null;){var c=V;if(c.flags&8772){var b=c.alternate;try{if(c.flags&8772)switch(c.tag){case 0:case 11:case 15:U||Rj(5,c);break;case 1:var _=c.stateNode;if(c.flags&4&&!U)if(b===null)_.componentDidMount();else{var $=c.elementType===c.type?b.memoizedProps:Lg(c.type,b.memoizedProps);_.componentDidUpdate($,b.memoizedState,_.__reactInternalSnapshotBeforeUpdate)}var k=c.updateQueue;k!==null&&ih(c,k,_);break;case 3:var et=c.updateQueue;if(et!==null){if(b=null,c.child!==null)switch(c.child.tag){case 5:b=c.child.stateNode;break;case 1:b=c.child.stateNode}ih(c,et,b)}break;case 5:var nt=c.stateNode;if(b===null&&c.flags&4){b=nt;var ot=c.memoizedProps;switch(c.type){case"button":case"input":case"select":case"textarea":ot.autoFocus&&b.focus();break;case"img":ot.src&&(b.src=ot.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(c.memoizedState===null){var ht=c.alternate;if(ht!==null){var vt=ht.memoizedState;if(vt!==null){var _t=vt.dehydrated;_t!==null&&bd(_t)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(p(163))}U||c.flags&512&&Sj(c)}catch(kt){W(c,c.return,kt)}}if(c===a){V=null;break}if(b=c.sibling,b!==null){b.return=c.return,V=b;break}V=c.return}}function hk(a){for(;V!==null;){var c=V;if(c===a){V=null;break}var b=c.sibling;if(b!==null){b.return=c.return,V=b;break}V=c.return}}function kk(a){for(;V!==null;){var c=V;try{switch(c.tag){case 0:case 11:case 15:var b=c.return;try{Rj(4,c)}catch(ot){W(c,b,ot)}break;case 1:var _=c.stateNode;if(typeof _.componentDidMount=="function"){var $=c.return;try{_.componentDidMount()}catch(ot){W(c,$,ot)}}var k=c.return;try{Sj(c)}catch(ot){W(c,k,ot)}break;case 5:var et=c.return;try{Sj(c)}catch(ot){W(c,et,ot)}}}catch(ot){W(c,c.return,ot)}if(c===a){V=null;break}var nt=c.sibling;if(nt!==null){nt.return=c.return,V=nt;break}V=c.return}}var mk=Math.ceil,nk=ua.ReactCurrentDispatcher,ok=ua.ReactCurrentOwner,pk=ua.ReactCurrentBatchConfig,K=0,R=null,Y=null,Z=0,gj=0,fj=Uf(0),T=0,qk=null,hh=0,rk=0,sk=0,tk=null,uk=null,gk=0,Hj=1/0,vk=null,Pi=!1,Qi=null,Si=null,wk=!1,xk=null,yk=0,zk=0,Ak=null,Bk=-1,Ck=0;function L(){return K&6?B():Bk!==-1?Bk:Bk=B()}function lh(a){return a.mode&1?K&2&&Z!==0?Z&-Z:Kg.transition!==null?(Ck===0&&(Ck=yc()),Ck):(a=C,a!==0||(a=window.event,a=a===void 0?16:jd(a.type)),a):1}function mh(a,c,b,_){if(50<zk)throw zk=0,Ak=null,Error(p(185));Ac(a,b,_),(!(K&2)||a!==R)&&(a===R&&(!(K&2)&&(rk|=b),T===4&&Dk(a,Z)),Ek(a,_),b===1&&K===0&&!(c.mode&1)&&(Hj=B()+500,fg&&jg()))}function Ek(a,c){var b=a.callbackNode;wc(a,c);var _=uc(a,a===R?Z:0);if(_===0)b!==null&&bc(b),a.callbackNode=null,a.callbackPriority=0;else if(c=_&-_,a.callbackPriority!==c){if(b!=null&&bc(b),c===1)a.tag===0?ig(Fk.bind(null,a)):hg(Fk.bind(null,a)),Jf(function(){!(K&6)&&jg()}),b=null;else{switch(Dc(_)){case 1:b=fc;break;case 4:b=gc;break;case 16:b=hc;break;case 536870912:b=jc;break;default:b=hc}b=Gk(b,Hk.bind(null,a))}a.callbackPriority=c,a.callbackNode=b}}function Hk(a,c){if(Bk=-1,Ck=0,K&6)throw Error(p(327));var b=a.callbackNode;if(Ik()&&a.callbackNode!==b)return null;var _=uc(a,a===R?Z:0);if(_===0)return null;if(_&30||_&a.expiredLanes||c)c=Jk(a,_);else{c=_;var $=K;K|=2;var k=Kk();(R!==a||Z!==c)&&(vk=null,Hj=B()+500,Lk(a,c));do try{Mk();break}catch(nt){Nk(a,nt)}while(!0);Qg(),nk.current=k,K=$,Y!==null?c=0:(R=null,Z=0,c=T)}if(c!==0){if(c===2&&($=xc(a),$!==0&&(_=$,c=Ok(a,$))),c===1)throw b=qk,Lk(a,0),Dk(a,_),Ek(a,B()),b;if(c===6)Dk(a,_);else{if($=a.current.alternate,!(_&30)&&!Pk($)&&(c=Jk(a,_),c===2&&(k=xc(a),k!==0&&(_=k,c=Ok(a,k))),c===1))throw b=qk,Lk(a,0),Dk(a,_),Ek(a,B()),b;switch(a.finishedWork=$,a.finishedLanes=_,c){case 0:case 1:throw Error(p(345));case 2:Qk(a,uk,vk);break;case 3:if(Dk(a,_),(_&130023424)===_&&(c=gk+500-B(),10<c)){if(uc(a,0)!==0)break;if($=a.suspendedLanes,($&_)!==_){L(),a.pingedLanes|=a.suspendedLanes&$;break}a.timeoutHandle=Ff(Qk.bind(null,a,uk,vk),c);break}Qk(a,uk,vk);break;case 4:if(Dk(a,_),(_&4194240)===_)break;for(c=a.eventTimes,$=-1;0<_;){var et=31-oc(_);k=1<<et,et=c[et],et>$&&($=et),_&=~k}if(_=$,_=B()-_,_=(120>_?120:480>_?480:1080>_?1080:1920>_?1920:3e3>_?3e3:4320>_?4320:1960*mk(_/1960))-_,10<_){a.timeoutHandle=Ff(Qk.bind(null,a,uk,vk),_);break}Qk(a,uk,vk);break;case 5:Qk(a,uk,vk);break;default:throw Error(p(329))}}}return Ek(a,B()),a.callbackNode===b?Hk.bind(null,a):null}function Ok(a,c){var b=tk;return a.current.memoizedState.isDehydrated&&(Lk(a,c).flags|=256),a=Jk(a,c),a!==2&&(c=uk,uk=b,c!==null&&Gj(c)),a}function Gj(a){uk===null?uk=a:uk.push.apply(uk,a)}function Pk(a){for(var c=a;;){if(c.flags&16384){var b=c.updateQueue;if(b!==null&&(b=b.stores,b!==null))for(var _=0;_<b.length;_++){var $=b[_],k=$.getSnapshot;$=$.value;try{if(!He(k(),$))return!1}catch{return!1}}}if(b=c.child,c.subtreeFlags&16384&&b!==null)b.return=c,c=b;else{if(c===a)break;for(;c.sibling===null;){if(c.return===null||c.return===a)return!0;c=c.return}c.sibling.return=c.return,c=c.sibling}}return!0}function Dk(a,c){for(c&=~sk,c&=~rk,a.suspendedLanes|=c,a.pingedLanes&=~c,a=a.expirationTimes;0<c;){var b=31-oc(c),_=1<<b;a[b]=-1,c&=~_}}function Fk(a){if(K&6)throw Error(p(327));Ik();var c=uc(a,0);if(!(c&1))return Ek(a,B()),null;var b=Jk(a,c);if(a.tag!==0&&b===2){var _=xc(a);_!==0&&(c=_,b=Ok(a,_))}if(b===1)throw b=qk,Lk(a,0),Dk(a,c),Ek(a,B()),b;if(b===6)throw Error(p(345));return a.finishedWork=a.current.alternate,a.finishedLanes=c,Qk(a,uk,vk),Ek(a,B()),null}function Rk(a,c){var b=K;K|=1;try{return a(c)}finally{K=b,K===0&&(Hj=B()+500,fg&&jg())}}function Sk(a){xk!==null&&xk.tag===0&&!(K&6)&&Ik();var c=K;K|=1;var b=pk.transition,_=C;try{if(pk.transition=null,C=1,a)return a()}finally{C=_,pk.transition=b,K=c,!(K&6)&&jg()}}function Ij(){gj=fj.current,E(fj)}function Lk(a,c){a.finishedWork=null,a.finishedLanes=0;var b=a.timeoutHandle;if(b!==-1&&(a.timeoutHandle=-1,Gf(b)),Y!==null)for(b=Y.return;b!==null;){var _=b;switch(wg(_),_.tag){case 1:_=_.type.childContextTypes,_!=null&&$f();break;case 3:Jh(),E(Wf),E(H),Oh();break;case 5:Lh(_);break;case 4:Jh();break;case 13:E(M);break;case 19:E(M);break;case 10:Rg(_.type._context);break;case 22:case 23:Ij()}b=b.return}if(R=a,Y=a=wh(a.current,null),Z=gj=c,T=0,qk=null,sk=rk=hh=0,uk=tk=null,Wg!==null){for(c=0;c<Wg.length;c++)if(b=Wg[c],_=b.interleaved,_!==null){b.interleaved=null;var $=_.next,k=b.pending;if(k!==null){var et=k.next;k.next=$,_.next=et}b.pending=_}Wg=null}return a}function Nk(a,c){do{var b=Y;try{if(Qg(),Ph.current=ai,Sh){for(var _=N.memoizedState;_!==null;){var $=_.queue;$!==null&&($.pending=null),_=_.next}Sh=!1}if(Rh=0,P=O=N=null,Th=!1,Uh=0,ok.current=null,b===null||b.return===null){T=1,qk=c,Y=null;break}e:{var k=a,et=b.return,nt=b,ot=c;if(c=Z,nt.flags|=32768,ot!==null&&typeof ot=="object"&&typeof ot.then=="function"){var ht=ot,vt=nt,_t=vt.tag;if(!(vt.mode&1)&&(_t===0||_t===11||_t===15)){var kt=vt.alternate;kt?(vt.updateQueue=kt.updateQueue,vt.memoizedState=kt.memoizedState,vt.lanes=kt.lanes):(vt.updateQueue=null,vt.memoizedState=null)}var $t=Vi(et);if($t!==null){$t.flags&=-257,Wi($t,et,nt,k,c),$t.mode&1&&Ti(k,ht,c),c=$t,ot=ht;var Tt=c.updateQueue;if(Tt===null){var At=new Set;At.add(ot),c.updateQueue=At}else Tt.add(ot);break e}else{if(!(c&1)){Ti(k,ht,c),uj();break e}ot=Error(p(426))}}else if(I&&nt.mode&1){var Mt=Vi(et);if(Mt!==null){!(Mt.flags&65536)&&(Mt.flags|=256),Wi(Mt,et,nt,k,c),Jg(Ki(ot,nt));break e}}k=ot=Ki(ot,nt),T!==4&&(T=2),tk===null?tk=[k]:tk.push(k),k=et;do{switch(k.tag){case 3:k.flags|=65536,c&=-c,k.lanes|=c;var Dt=Oi(k,ot,c);fh(k,Dt);break e;case 1:nt=ot;var Rt=k.type,xt=k.stateNode;if(!(k.flags&128)&&(typeof Rt.getDerivedStateFromError=="function"||xt!==null&&typeof xt.componentDidCatch=="function"&&(Si===null||!Si.has(xt)))){k.flags|=65536,c&=-c,k.lanes|=c;var Jt=Ri(k,nt,c);fh(k,Jt);break e}}k=k.return}while(k!==null)}Tk(b)}catch(ar){c=ar,Y===b&&b!==null&&(Y=b=b.return);continue}break}while(!0)}function Kk(){var a=nk.current;return nk.current=ai,a===null?ai:a}function uj(){(T===0||T===3||T===2)&&(T=4),R===null||!(hh&268435455)&&!(rk&268435455)||Dk(R,Z)}function Jk(a,c){var b=K;K|=2;var _=Kk();(R!==a||Z!==c)&&(vk=null,Lk(a,c));do try{Uk();break}catch($){Nk(a,$)}while(!0);if(Qg(),K=b,nk.current=_,Y!==null)throw Error(p(261));return R=null,Z=0,T}function Uk(){for(;Y!==null;)Vk(Y)}function Mk(){for(;Y!==null&&!cc();)Vk(Y)}function Vk(a){var c=Wk(a.alternate,a,gj);a.memoizedProps=a.pendingProps,c===null?Tk(a):Y=c,ok.current=null}function Tk(a){var c=a;do{var b=c.alternate;if(a=c.return,c.flags&32768){if(b=Jj(b,c),b!==null){b.flags&=32767,Y=b;return}if(a!==null)a.flags|=32768,a.subtreeFlags=0,a.deletions=null;else{T=6,Y=null;return}}else if(b=Fj(b,c,gj),b!==null){Y=b;return}if(c=c.sibling,c!==null){Y=c;return}Y=c=a}while(c!==null);T===0&&(T=5)}function Qk(a,c,b){var _=C,$=pk.transition;try{pk.transition=null,C=1,Xk(a,c,b,_)}finally{pk.transition=$,C=_}return null}function Xk(a,c,b,_){do Ik();while(xk!==null);if(K&6)throw Error(p(327));b=a.finishedWork;var $=a.finishedLanes;if(b===null)return null;if(a.finishedWork=null,a.finishedLanes=0,b===a.current)throw Error(p(177));a.callbackNode=null,a.callbackPriority=0;var k=b.lanes|b.childLanes;if(Bc(a,k),a===R&&(Y=R=null,Z=0),!(b.subtreeFlags&2064)&&!(b.flags&2064)||wk||(wk=!0,Gk(hc,function(){return Ik(),null})),k=(b.flags&15990)!==0,b.subtreeFlags&15990||k){k=pk.transition,pk.transition=null;var et=C;C=1;var nt=K;K|=4,ok.current=null,Pj(a,b),ek(b,a),Oe(Df),dd=!!Cf,Df=Cf=null,a.current=b,ik(b),dc(),K=nt,C=et,pk.transition=k}else a.current=b;if(wk&&(wk=!1,xk=a,yk=$),k=a.pendingLanes,k===0&&(Si=null),mc(b.stateNode),Ek(a,B()),c!==null)for(_=a.onRecoverableError,b=0;b<c.length;b++)$=c[b],_($.value,{componentStack:$.stack,digest:$.digest});if(Pi)throw Pi=!1,a=Qi,Qi=null,a;return yk&1&&a.tag!==0&&Ik(),k=a.pendingLanes,k&1?a===Ak?zk++:(zk=0,Ak=a):zk=0,jg(),null}function Ik(){if(xk!==null){var a=Dc(yk),c=pk.transition,b=C;try{if(pk.transition=null,C=16>a?16:a,xk===null)var _=!1;else{if(a=xk,xk=null,yk=0,K&6)throw Error(p(331));var $=K;for(K|=4,V=a.current;V!==null;){var k=V,et=k.child;if(V.flags&16){var nt=k.deletions;if(nt!==null){for(var ot=0;ot<nt.length;ot++){var ht=nt[ot];for(V=ht;V!==null;){var vt=V;switch(vt.tag){case 0:case 11:case 15:Qj(8,vt,k)}var _t=vt.child;if(_t!==null)_t.return=vt,V=_t;else for(;V!==null;){vt=V;var kt=vt.sibling,$t=vt.return;if(Tj(vt),vt===ht){V=null;break}if(kt!==null){kt.return=$t,V=kt;break}V=$t}}}var Tt=k.alternate;if(Tt!==null){var At=Tt.child;if(At!==null){Tt.child=null;do{var Mt=At.sibling;At.sibling=null,At=Mt}while(At!==null)}}V=k}}if(k.subtreeFlags&2064&&et!==null)et.return=k,V=et;else e:for(;V!==null;){if(k=V,k.flags&2048)switch(k.tag){case 0:case 11:case 15:Qj(9,k,k.return)}var Dt=k.sibling;if(Dt!==null){Dt.return=k.return,V=Dt;break e}V=k.return}}var Rt=a.current;for(V=Rt;V!==null;){et=V;var xt=et.child;if(et.subtreeFlags&2064&&xt!==null)xt.return=et,V=xt;else e:for(et=Rt;V!==null;){if(nt=V,nt.flags&2048)try{switch(nt.tag){case 0:case 11:case 15:Rj(9,nt)}}catch(ar){W(nt,nt.return,ar)}if(nt===et){V=null;break e}var Jt=nt.sibling;if(Jt!==null){Jt.return=nt.return,V=Jt;break e}V=nt.return}}if(K=$,jg(),lc&&typeof lc.onPostCommitFiberRoot=="function")try{lc.onPostCommitFiberRoot(kc,a)}catch{}_=!0}return _}finally{C=b,pk.transition=c}}return!1}function Yk(a,c,b){c=Ki(b,c),c=Oi(a,c,1),a=dh(a,c,1),c=L(),a!==null&&(Ac(a,1,c),Ek(a,c))}function W(a,c,b){if(a.tag===3)Yk(a,a,b);else for(;c!==null;){if(c.tag===3){Yk(c,a,b);break}else if(c.tag===1){var _=c.stateNode;if(typeof c.type.getDerivedStateFromError=="function"||typeof _.componentDidCatch=="function"&&(Si===null||!Si.has(_))){a=Ki(b,a),a=Ri(c,a,1),c=dh(c,a,1),a=L(),c!==null&&(Ac(c,1,a),Ek(c,a));break}}c=c.return}}function Ui(a,c,b){var _=a.pingCache;_!==null&&_.delete(c),c=L(),a.pingedLanes|=a.suspendedLanes&b,R===a&&(Z&b)===b&&(T===4||T===3&&(Z&130023424)===Z&&500>B()-gk?Lk(a,0):sk|=b),Ek(a,c)}function Zk(a,c){c===0&&(a.mode&1?(c=sc,sc<<=1,!(sc&130023424)&&(sc=4194304)):c=1);var b=L();a=Zg(a,c),a!==null&&(Ac(a,c,b),Ek(a,b))}function vj(a){var c=a.memoizedState,b=0;c!==null&&(b=c.retryLane),Zk(a,b)}function ck(a,c){var b=0;switch(a.tag){case 13:var _=a.stateNode,$=a.memoizedState;$!==null&&(b=$.retryLane);break;case 19:_=a.stateNode;break;default:throw Error(p(314))}_!==null&&_.delete(c),Zk(a,b)}var Wk;Wk=function(a,c,b){if(a!==null)if(a.memoizedProps!==c.pendingProps||Wf.current)Ug=!0;else{if(!(a.lanes&b)&&!(c.flags&128))return Ug=!1,zj(a,c,b);Ug=!!(a.flags&131072)}else Ug=!1,I&&c.flags&1048576&&ug(c,ng,c.index);switch(c.lanes=0,c.tag){case 2:var _=c.type;jj(a,c),a=c.pendingProps;var $=Yf(c,H.current);Tg(c,b),$=Xh(null,c,_,a,$,b);var k=bi();return c.flags|=1,typeof $=="object"&&$!==null&&typeof $.render=="function"&&$.$$typeof===void 0?(c.tag=1,c.memoizedState=null,c.updateQueue=null,Zf(_)?(k=!0,cg(c)):k=!1,c.memoizedState=$.state!==null&&$.state!==void 0?$.state:null,ah(c),$.updater=nh,c.stateNode=$,$._reactInternals=c,rh(c,_,a,b),c=kj(null,c,_,!0,k,b)):(c.tag=0,I&&k&&vg(c),Yi(null,c,$,b),c=c.child),c;case 16:_=c.elementType;e:{switch(jj(a,c),a=c.pendingProps,$=_._init,_=$(_._payload),c.type=_,$=c.tag=$k(_),a=Lg(_,a),$){case 0:c=dj(null,c,_,a,b);break e;case 1:c=ij(null,c,_,a,b);break e;case 11:c=Zi(null,c,_,a,b);break e;case 14:c=aj(null,c,_,Lg(_.type,a),b);break e}throw Error(p(306,_,""))}return c;case 0:return _=c.type,$=c.pendingProps,$=c.elementType===_?$:Lg(_,$),dj(a,c,_,$,b);case 1:return _=c.type,$=c.pendingProps,$=c.elementType===_?$:Lg(_,$),ij(a,c,_,$,b);case 3:e:{if(lj(c),a===null)throw Error(p(387));_=c.pendingProps,k=c.memoizedState,$=k.element,bh(a,c),gh(c,_,null,b);var et=c.memoizedState;if(_=et.element,k.isDehydrated)if(k={element:_,isDehydrated:!1,cache:et.cache,pendingSuspenseBoundaries:et.pendingSuspenseBoundaries,transitions:et.transitions},c.updateQueue.baseState=k,c.memoizedState=k,c.flags&256){$=Ki(Error(p(423)),c),c=mj(a,c,_,b,$);break e}else if(_!==$){$=Ki(Error(p(424)),c),c=mj(a,c,_,b,$);break e}else for(yg=Lf(c.stateNode.containerInfo.firstChild),xg=c,I=!0,zg=null,b=Ch(c,null,_,b),c.child=b;b;)b.flags=b.flags&-3|4096,b=b.sibling;else{if(Ig(),_===$){c=$i(a,c,b);break e}Yi(a,c,_,b)}c=c.child}return c;case 5:return Kh(c),a===null&&Eg(c),_=c.type,$=c.pendingProps,k=a!==null?a.memoizedProps:null,et=$.children,Ef(_,$)?et=null:k!==null&&Ef(_,k)&&(c.flags|=32),hj(a,c),Yi(a,c,et,b),c.child;case 6:return a===null&&Eg(c),null;case 13:return pj(a,c,b);case 4:return Ih(c,c.stateNode.containerInfo),_=c.pendingProps,a===null?c.child=Bh(c,null,_,b):Yi(a,c,_,b),c.child;case 11:return _=c.type,$=c.pendingProps,$=c.elementType===_?$:Lg(_,$),Zi(a,c,_,$,b);case 7:return Yi(a,c,c.pendingProps,b),c.child;case 8:return Yi(a,c,c.pendingProps.children,b),c.child;case 12:return Yi(a,c,c.pendingProps.children,b),c.child;case 10:e:{if(_=c.type._context,$=c.pendingProps,k=c.memoizedProps,et=$.value,G(Mg,_._currentValue),_._currentValue=et,k!==null)if(He(k.value,et)){if(k.children===$.children&&!Wf.current){c=$i(a,c,b);break e}}else for(k=c.child,k!==null&&(k.return=c);k!==null;){var nt=k.dependencies;if(nt!==null){et=k.child;for(var ot=nt.firstContext;ot!==null;){if(ot.context===_){if(k.tag===1){ot=ch(-1,b&-b),ot.tag=2;var ht=k.updateQueue;if(ht!==null){ht=ht.shared;var vt=ht.pending;vt===null?ot.next=ot:(ot.next=vt.next,vt.next=ot),ht.pending=ot}}k.lanes|=b,ot=k.alternate,ot!==null&&(ot.lanes|=b),Sg(k.return,b,c),nt.lanes|=b;break}ot=ot.next}}else if(k.tag===10)et=k.type===c.type?null:k.child;else if(k.tag===18){if(et=k.return,et===null)throw Error(p(341));et.lanes|=b,nt=et.alternate,nt!==null&&(nt.lanes|=b),Sg(et,b,c),et=k.sibling}else et=k.child;if(et!==null)et.return=k;else for(et=k;et!==null;){if(et===c){et=null;break}if(k=et.sibling,k!==null){k.return=et.return,et=k;break}et=et.return}k=et}Yi(a,c,$.children,b),c=c.child}return c;case 9:return $=c.type,_=c.pendingProps.children,Tg(c,b),$=Vg($),_=_($),c.flags|=1,Yi(a,c,_,b),c.child;case 14:return _=c.type,$=Lg(_,c.pendingProps),$=Lg(_.type,$),aj(a,c,_,$,b);case 15:return cj(a,c,c.type,c.pendingProps,b);case 17:return _=c.type,$=c.pendingProps,$=c.elementType===_?$:Lg(_,$),jj(a,c),c.tag=1,Zf(_)?(a=!0,cg(c)):a=!1,Tg(c,b),ph(c,_,$),rh(c,_,$,b),kj(null,c,_,!0,a,b);case 19:return yj(a,c,b);case 22:return ej(a,c,b)}throw Error(p(156,c.tag))};function Gk(a,c){return ac(a,c)}function al(a,c,b,_){this.tag=a,this.key=b,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=c,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=_,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Bg(a,c,b,_){return new al(a,c,b,_)}function bj(a){return a=a.prototype,!(!a||!a.isReactComponent)}function $k(a){if(typeof a=="function")return bj(a)?1:0;if(a!=null){if(a=a.$$typeof,a===Da)return 11;if(a===Ga)return 14}return 2}function wh(a,c){var b=a.alternate;return b===null?(b=Bg(a.tag,c,a.key,a.mode),b.elementType=a.elementType,b.type=a.type,b.stateNode=a.stateNode,b.alternate=a,a.alternate=b):(b.pendingProps=c,b.type=a.type,b.flags=0,b.subtreeFlags=0,b.deletions=null),b.flags=a.flags&14680064,b.childLanes=a.childLanes,b.lanes=a.lanes,b.child=a.child,b.memoizedProps=a.memoizedProps,b.memoizedState=a.memoizedState,b.updateQueue=a.updateQueue,c=a.dependencies,b.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext},b.sibling=a.sibling,b.index=a.index,b.ref=a.ref,b}function yh(a,c,b,_,$,k){var et=2;if(_=a,typeof a=="function")bj(a)&&(et=1);else if(typeof a=="string")et=5;else e:switch(a){case ya:return Ah(b.children,$,k,c);case za:et=8,$|=8;break;case Aa:return a=Bg(12,b,c,$|2),a.elementType=Aa,a.lanes=k,a;case Ea:return a=Bg(13,b,c,$),a.elementType=Ea,a.lanes=k,a;case Fa:return a=Bg(19,b,c,$),a.elementType=Fa,a.lanes=k,a;case Ia:return qj(b,$,k,c);default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case Ba:et=10;break e;case Ca:et=9;break e;case Da:et=11;break e;case Ga:et=14;break e;case Ha:et=16,_=null;break e}throw Error(p(130,a==null?a:typeof a,""))}return c=Bg(et,b,c,$),c.elementType=a,c.type=_,c.lanes=k,c}function Ah(a,c,b,_){return a=Bg(7,a,_,c),a.lanes=b,a}function qj(a,c,b,_){return a=Bg(22,a,_,c),a.elementType=Ia,a.lanes=b,a.stateNode={isHidden:!1},a}function xh(a,c,b){return a=Bg(6,a,null,c),a.lanes=b,a}function zh(a,c,b){return c=Bg(4,a.children!==null?a.children:[],a.key,c),c.lanes=b,c.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},c}function bl(a,c,b,_,$){this.tag=c,this.containerInfo=a,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=zc(0),this.expirationTimes=zc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zc(0),this.identifierPrefix=_,this.onRecoverableError=$,this.mutableSourceEagerHydrationData=null}function cl(a,c,b,_,$,k,et,nt,ot){return a=new bl(a,c,b,nt,ot),c===1?(c=1,k===!0&&(c|=8)):c=0,k=Bg(3,null,null,c),a.current=k,k.stateNode=a,k.memoizedState={element:_,isDehydrated:b,cache:null,transitions:null,pendingSuspenseBoundaries:null},ah(k),a}function dl(a,c,b){var _=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:wa,key:_==null?null:""+_,children:a,containerInfo:c,implementation:b}}function el(a){if(!a)return Vf;a=a._reactInternals;e:{if(Vb(a)!==a||a.tag!==1)throw Error(p(170));var c=a;do{switch(c.tag){case 3:c=c.stateNode.context;break e;case 1:if(Zf(c.type)){c=c.stateNode.__reactInternalMemoizedMergedChildContext;break e}}c=c.return}while(c!==null);throw Error(p(171))}if(a.tag===1){var b=a.type;if(Zf(b))return bg(a,b,c)}return c}function fl(a,c,b,_,$,k,et,nt,ot){return a=cl(b,_,!0,a,$,k,et,nt,ot),a.context=el(null),b=a.current,_=L(),$=lh(b),k=ch(_,$),k.callback=c??null,dh(b,k,$),a.current.lanes=$,Ac(a,$,_),Ek(a,_),a}function gl(a,c,b,_){var $=c.current,k=L(),et=lh($);return b=el(b),c.context===null?c.context=b:c.pendingContext=b,c=ch(k,et),c.payload={element:a},_=_===void 0?null:_,_!==null&&(c.callback=_),a=dh($,c,et),a!==null&&(mh(a,$,et,k),eh(a,$,et)),et}function hl(a){if(a=a.current,!a.child)return null;switch(a.child.tag){case 5:return a.child.stateNode;default:return a.child.stateNode}}function il(a,c){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var b=a.retryLane;a.retryLane=b!==0&&b<c?b:c}}function jl(a,c){il(a,c),(a=a.alternate)&&il(a,c)}function kl(){return null}var ll=typeof reportError=="function"?reportError:function(a){console.error(a)};function ml(a){this._internalRoot=a}nl.prototype.render=ml.prototype.render=function(a){var c=this._internalRoot;if(c===null)throw Error(p(409));gl(a,c,null,null)};nl.prototype.unmount=ml.prototype.unmount=function(){var a=this._internalRoot;if(a!==null){this._internalRoot=null;var c=a.containerInfo;Sk(function(){gl(null,a,null,null)}),c[uf]=null}};function nl(a){this._internalRoot=a}nl.prototype.unstable_scheduleHydration=function(a){if(a){var c=Hc();a={blockedOn:null,target:a,priority:c};for(var b=0;b<Qc.length&&c!==0&&c<Qc[b].priority;b++);Qc.splice(b,0,a),b===0&&Vc(a)}};function ol(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11)}function pl(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11&&(a.nodeType!==8||a.nodeValue!==" react-mount-point-unstable "))}function ql(){}function rl(a,c,b,_,$){if($){if(typeof _=="function"){var k=_;_=function(){var ht=hl(et);k.call(ht)}}var et=fl(c,_,a,0,null,!1,!1,"",ql);return a._reactRootContainer=et,a[uf]=et.current,sf(a.nodeType===8?a.parentNode:a),Sk(),et}for(;$=a.lastChild;)a.removeChild($);if(typeof _=="function"){var nt=_;_=function(){var ht=hl(ot);nt.call(ht)}}var ot=cl(a,0,!1,null,null,!1,!1,"",ql);return a._reactRootContainer=ot,a[uf]=ot.current,sf(a.nodeType===8?a.parentNode:a),Sk(function(){gl(c,ot,b,_)}),ot}function sl(a,c,b,_,$){var k=b._reactRootContainer;if(k){var et=k;if(typeof $=="function"){var nt=$;$=function(){var ot=hl(et);nt.call(ot)}}gl(c,et,a,$)}else et=rl(b,c,a,$,_);return hl(et)}Ec=function(a){switch(a.tag){case 3:var c=a.stateNode;if(c.current.memoizedState.isDehydrated){var b=tc(c.pendingLanes);b!==0&&(Cc(c,b|1),Ek(c,B()),!(K&6)&&(Hj=B()+500,jg()))}break;case 13:Sk(function(){var _=Zg(a,1);if(_!==null){var $=L();mh(_,a,1,$)}}),jl(a,1)}};Fc=function(a){if(a.tag===13){var c=Zg(a,134217728);if(c!==null){var b=L();mh(c,a,134217728,b)}jl(a,134217728)}};Gc=function(a){if(a.tag===13){var c=lh(a),b=Zg(a,c);if(b!==null){var _=L();mh(b,a,c,_)}jl(a,c)}};Hc=function(){return C};Ic=function(a,c){var b=C;try{return C=a,c()}finally{C=b}};yb=function(a,c,b){switch(c){case"input":if(bb(a,b),c=b.name,b.type==="radio"&&c!=null){for(b=a;b.parentNode;)b=b.parentNode;for(b=b.querySelectorAll("input[name="+JSON.stringify(""+c)+'][type="radio"]'),c=0;c<b.length;c++){var _=b[c];if(_!==a&&_.form===a.form){var $=Db(_);if(!$)throw Error(p(90));Wa(_),bb(_,$)}}}break;case"textarea":ib(a,b);break;case"select":c=b.value,c!=null&&fb(a,!!b.multiple,c,!1)}};Gb=Rk;Hb=Sk;var tl={usingClientEntryPoint:!1,Events:[Cb,ue,Db,Eb,Fb,Rk]},ul={findFiberByHostInstance:Wc,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},vl={bundleType:ul.bundleType,version:ul.version,rendererPackageName:ul.rendererPackageName,rendererConfig:ul.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ua.ReactCurrentDispatcher,findHostInstanceByFiber:function(a){return a=Zb(a),a===null?null:a.stateNode},findFiberByHostInstance:ul.findFiberByHostInstance||kl,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var wl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!wl.isDisabled&&wl.supportsFiber)try{kc=wl.inject(vl),lc=wl}catch{}}reactDom_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tl;reactDom_production_min.createPortal=function(a,c){var b=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ol(c))throw Error(p(200));return dl(a,c,null,b)};reactDom_production_min.createRoot=function(a,c){if(!ol(a))throw Error(p(299));var b=!1,_="",$=ll;return c!=null&&(c.unstable_strictMode===!0&&(b=!0),c.identifierPrefix!==void 0&&(_=c.identifierPrefix),c.onRecoverableError!==void 0&&($=c.onRecoverableError)),c=cl(a,1,!1,null,null,b,!1,_,$),a[uf]=c.current,sf(a.nodeType===8?a.parentNode:a),new ml(c)};reactDom_production_min.findDOMNode=function(a){if(a==null)return null;if(a.nodeType===1)return a;var c=a._reactInternals;if(c===void 0)throw typeof a.render=="function"?Error(p(188)):(a=Object.keys(a).join(","),Error(p(268,a)));return a=Zb(c),a=a===null?null:a.stateNode,a};reactDom_production_min.flushSync=function(a){return Sk(a)};reactDom_production_min.hydrate=function(a,c,b){if(!pl(c))throw Error(p(200));return sl(null,a,c,!0,b)};reactDom_production_min.hydrateRoot=function(a,c,b){if(!ol(a))throw Error(p(405));var _=b!=null&&b.hydratedSources||null,$=!1,k="",et=ll;if(b!=null&&(b.unstable_strictMode===!0&&($=!0),b.identifierPrefix!==void 0&&(k=b.identifierPrefix),b.onRecoverableError!==void 0&&(et=b.onRecoverableError)),c=fl(c,null,a,1,b??null,$,!1,k,et),a[uf]=c.current,sf(a),_)for(a=0;a<_.length;a++)b=_[a],$=b._getVersion,$=$(b._source),c.mutableSourceEagerHydrationData==null?c.mutableSourceEagerHydrationData=[b,$]:c.mutableSourceEagerHydrationData.push(b,$);return new nl(c)};reactDom_production_min.render=function(a,c,b){if(!pl(c))throw Error(p(200));return sl(null,a,c,!1,b)};reactDom_production_min.unmountComponentAtNode=function(a){if(!pl(a))throw Error(p(40));return a._reactRootContainer?(Sk(function(){sl(null,null,a,!1,function(){a._reactRootContainer=null,a[uf]=null})}),!0):!1};reactDom_production_min.unstable_batchedUpdates=Rk;reactDom_production_min.unstable_renderSubtreeIntoContainer=function(a,c,b,_){if(!pl(b))throw Error(p(200));if(a==null||a._reactInternals===void 0)throw Error(p(38));return sl(a,c,b,!1,_)};reactDom_production_min.version="18.2.0-next-9e3b772b8-20220608";function checkDCE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(checkDCE)}catch(a){console.error(a)}}checkDCE(),reactDom.exports=reactDom_production_min;var reactDomExports=reactDom.exports;const ReactDOM=getDefaultExportFromCjs$2(reactDomExports);var createRoot,m=reactDomExports;createRoot=m.createRoot,m.hydrateRoot;var APIKitAnimationTypes=(a=>(a.FADE_IN="fade-in",a.FADE_OUT="fade-out",a.SLIDE_IN_BLURRED_TOP="slide-in-blurred-top",a.SLIDE_IN_LEFT="slide-in-left",a.SLIDE_OUT_LEFT="slide-out-left",a))(APIKitAnimationTypes||{});function _extends(){return _extends=Object.assign?Object.assign.bind():function(a){for(var c=1;c<arguments.length;c++){var b=arguments[c];for(var _ in b)Object.prototype.hasOwnProperty.call(b,_)&&(a[_]=b[_])}return a},_extends.apply(this,arguments)}function _objectWithoutPropertiesLoose(a,c){if(a==null)return{};var b={},_=Object.keys(a),$,k;for(k=0;k<_.length;k++)$=_[k],!(c.indexOf($)>=0)&&(b[$]=a[$]);return b}function _setPrototypeOf(a,c){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(_,$){return _.__proto__=$,_},_setPrototypeOf(a,c)}function _inheritsLoose(a,c){a.prototype=Object.create(c.prototype),a.prototype.constructor=a,_setPrototypeOf(a,c)}function hasClass(a,c){return a.classList?!!c&&a.classList.contains(c):(" "+(a.className.baseVal||a.className)+" ").indexOf(" "+c+" ")!==-1}function addClass(a,c){a.classList?a.classList.add(c):hasClass(a,c)||(typeof a.className=="string"?a.className=a.className+" "+c:a.setAttribute("class",(a.className&&a.className.baseVal||"")+" "+c))}function replaceClassName(a,c){return a.replace(new RegExp("(^|\\s)"+c+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function removeClass$1(a,c){a.classList?a.classList.remove(c):typeof a.className=="string"?a.className=replaceClassName(a.className,c):a.setAttribute("class",replaceClassName(a.className&&a.className.baseVal||"",c))}const config={disabled:!1},TransitionGroupContext=React.createContext(null);var forceReflow=function a(c){return c.scrollTop},UNMOUNTED="unmounted",EXITED="exited",ENTERING="entering",ENTERED="entered",EXITING="exiting",Transition=function(a){_inheritsLoose(c,a);function c(_,$){var k;k=a.call(this,_,$)||this;var et=$,nt=et&&!et.isMounting?_.enter:_.appear,ot;return k.appearStatus=null,_.in?nt?(ot=EXITED,k.appearStatus=ENTERING):ot=ENTERED:_.unmountOnExit||_.mountOnEnter?ot=UNMOUNTED:ot=EXITED,k.state={status:ot},k.nextCallback=null,k}c.getDerivedStateFromProps=function($,k){var et=$.in;return et&&k.status===UNMOUNTED?{status:EXITED}:null};var b=c.prototype;return b.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},b.componentDidUpdate=function($){var k=null;if($!==this.props){var et=this.state.status;this.props.in?et!==ENTERING&&et!==ENTERED&&(k=ENTERING):(et===ENTERING||et===ENTERED)&&(k=EXITING)}this.updateStatus(!1,k)},b.componentWillUnmount=function(){this.cancelNextCallback()},b.getTimeouts=function(){var $=this.props.timeout,k,et,nt;return k=et=nt=$,$!=null&&typeof $!="number"&&(k=$.exit,et=$.enter,nt=$.appear!==void 0?$.appear:et),{exit:k,enter:et,appear:nt}},b.updateStatus=function($,k){if($===void 0&&($=!1),k!==null)if(this.cancelNextCallback(),k===ENTERING){if(this.props.unmountOnExit||this.props.mountOnEnter){var et=this.props.nodeRef?this.props.nodeRef.current:ReactDOM.findDOMNode(this);et&&forceReflow(et)}this.performEnter($)}else this.performExit();else this.props.unmountOnExit&&this.state.status===EXITED&&this.setState({status:UNMOUNTED})},b.performEnter=function($){var k=this,et=this.props.enter,nt=this.context?this.context.isMounting:$,ot=this.props.nodeRef?[nt]:[ReactDOM.findDOMNode(this),nt],ht=ot[0],vt=ot[1],_t=this.getTimeouts(),kt=nt?_t.appear:_t.enter;if(!$&&!et||config.disabled){this.safeSetState({status:ENTERED},function(){k.props.onEntered(ht)});return}this.props.onEnter(ht,vt),this.safeSetState({status:ENTERING},function(){k.props.onEntering(ht,vt),k.onTransitionEnd(kt,function(){k.safeSetState({status:ENTERED},function(){k.props.onEntered(ht,vt)})})})},b.performExit=function(){var $=this,k=this.props.exit,et=this.getTimeouts(),nt=this.props.nodeRef?void 0:ReactDOM.findDOMNode(this);if(!k||config.disabled){this.safeSetState({status:EXITED},function(){$.props.onExited(nt)});return}this.props.onExit(nt),this.safeSetState({status:EXITING},function(){$.props.onExiting(nt),$.onTransitionEnd(et.exit,function(){$.safeSetState({status:EXITED},function(){$.props.onExited(nt)})})})},b.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},b.safeSetState=function($,k){k=this.setNextCallback(k),this.setState($,k)},b.setNextCallback=function($){var k=this,et=!0;return this.nextCallback=function(nt){et&&(et=!1,k.nextCallback=null,$(nt))},this.nextCallback.cancel=function(){et=!1},this.nextCallback},b.onTransitionEnd=function($,k){this.setNextCallback(k);var et=this.props.nodeRef?this.props.nodeRef.current:ReactDOM.findDOMNode(this),nt=$==null&&!this.props.addEndListener;if(!et||nt){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var ot=this.props.nodeRef?[this.nextCallback]:[et,this.nextCallback],ht=ot[0],vt=ot[1];this.props.addEndListener(ht,vt)}$!=null&&setTimeout(this.nextCallback,$)},b.render=function(){var $=this.state.status;if($===UNMOUNTED)return null;var k=this.props,et=k.children;k.in,k.mountOnEnter,k.unmountOnExit,k.appear,k.enter,k.exit,k.timeout,k.addEndListener,k.onEnter,k.onEntering,k.onEntered,k.onExit,k.onExiting,k.onExited,k.nodeRef;var nt=_objectWithoutPropertiesLoose(k,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return React.createElement(TransitionGroupContext.Provider,{value:null},typeof et=="function"?et($,nt):React.cloneElement(React.Children.only(et),nt))},c}(React.Component);Transition.contextType=TransitionGroupContext;Transition.propTypes={};function noop(){}Transition.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:noop,onEntering:noop,onEntered:noop,onExit:noop,onExiting:noop,onExited:noop};Transition.UNMOUNTED=UNMOUNTED;Transition.EXITED=EXITED;Transition.ENTERING=ENTERING;Transition.ENTERED=ENTERED;Transition.EXITING=EXITING;const Transition$1=Transition;var _addClass=function a(c,b){return c&&b&&b.split(" ").forEach(function(_){return addClass(c,_)})},removeClass=function a(c,b){return c&&b&&b.split(" ").forEach(function(_){return removeClass$1(c,_)})},CSSTransition=function(a){_inheritsLoose(c,a);function c(){for(var _,$=arguments.length,k=new Array($),et=0;et<$;et++)k[et]=arguments[et];return _=a.call.apply(a,[this].concat(k))||this,_.appliedClasses={appear:{},enter:{},exit:{}},_.onEnter=function(nt,ot){var ht=_.resolveArguments(nt,ot),vt=ht[0],_t=ht[1];_.removeClasses(vt,"exit"),_.addClass(vt,_t?"appear":"enter","base"),_.props.onEnter&&_.props.onEnter(nt,ot)},_.onEntering=function(nt,ot){var ht=_.resolveArguments(nt,ot),vt=ht[0],_t=ht[1],kt=_t?"appear":"enter";_.addClass(vt,kt,"active"),_.props.onEntering&&_.props.onEntering(nt,ot)},_.onEntered=function(nt,ot){var ht=_.resolveArguments(nt,ot),vt=ht[0],_t=ht[1],kt=_t?"appear":"enter";_.removeClasses(vt,kt),_.addClass(vt,kt,"done"),_.props.onEntered&&_.props.onEntered(nt,ot)},_.onExit=function(nt){var ot=_.resolveArguments(nt),ht=ot[0];_.removeClasses(ht,"appear"),_.removeClasses(ht,"enter"),_.addClass(ht,"exit","base"),_.props.onExit&&_.props.onExit(nt)},_.onExiting=function(nt){var ot=_.resolveArguments(nt),ht=ot[0];_.addClass(ht,"exit","active"),_.props.onExiting&&_.props.onExiting(nt)},_.onExited=function(nt){var ot=_.resolveArguments(nt),ht=ot[0];_.removeClasses(ht,"exit"),_.addClass(ht,"exit","done"),_.props.onExited&&_.props.onExited(nt)},_.resolveArguments=function(nt,ot){return _.props.nodeRef?[_.props.nodeRef.current,nt]:[nt,ot]},_.getClassNames=function(nt){var ot=_.props.classNames,ht=typeof ot=="string",vt=ht&&ot?ot+"-":"",_t=ht?""+vt+nt:ot[nt],kt=ht?_t+"-active":ot[nt+"Active"],$t=ht?_t+"-done":ot[nt+"Done"];return{baseClassName:_t,activeClassName:kt,doneClassName:$t}},_}var b=c.prototype;return b.addClass=function($,k,et){var nt=this.getClassNames(k)[et+"ClassName"],ot=this.getClassNames("enter"),ht=ot.doneClassName;k==="appear"&&et==="done"&&ht&&(nt+=" "+ht),et==="active"&&$&&forceReflow($),nt&&(this.appliedClasses[k][et]=nt,_addClass($,nt))},b.removeClasses=function($,k){var et=this.appliedClasses[k],nt=et.base,ot=et.active,ht=et.done;this.appliedClasses[k]={},nt&&removeClass($,nt),ot&&removeClass($,ot),ht&&removeClass($,ht)},b.render=function(){var $=this.props;$.classNames;var k=_objectWithoutPropertiesLoose($,["classNames"]);return React.createElement(Transition$1,_extends({},k,{onEnter:this.onEnter,onEntered:this.onEntered,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}))},c}(React.Component);CSSTransition.defaultProps={classNames:""};CSSTransition.propTypes={};const CSSTransition$1=CSSTransition;var _leaveRenders,_enterRenders;function areChildrenDifferent(a,c){return!(a===c||React.isValidElement(a)&&React.isValidElement(c)&&a.key!=null&&a.key===c.key)}var modes={out:"out-in",in:"in-out"},callHook=function a(c,b,_){return function(){var $;c.props[b]&&($=c.props)[b].apply($,arguments),_()}},leaveRenders=(_leaveRenders={},_leaveRenders[modes.out]=function(a){var c=a.current,b=a.changeState;return React.cloneElement(c,{in:!1,onExited:callHook(c,"onExited",function(){b(ENTERING,null)})})},_leaveRenders[modes.in]=function(a){var c=a.current,b=a.changeState,_=a.children;return[c,React.cloneElement(_,{in:!0,onEntered:callHook(_,"onEntered",function(){b(ENTERING)})})]},_leaveRenders),enterRenders=(_enterRenders={},_enterRenders[modes.out]=function(a){var c=a.children,b=a.changeState;return React.cloneElement(c,{in:!0,onEntered:callHook(c,"onEntered",function(){b(ENTERED,React.cloneElement(c,{in:!0}))})})},_enterRenders[modes.in]=function(a){var c=a.current,b=a.children,_=a.changeState;return[React.cloneElement(c,{in:!1,onExited:callHook(c,"onExited",function(){_(ENTERED,React.cloneElement(b,{in:!0}))})}),React.cloneElement(b,{in:!0})]},_enterRenders),SwitchTransition=function(a){_inheritsLoose(c,a);function c(){for(var _,$=arguments.length,k=new Array($),et=0;et<$;et++)k[et]=arguments[et];return _=a.call.apply(a,[this].concat(k))||this,_.state={status:ENTERED,current:null},_.appeared=!1,_.changeState=function(nt,ot){ot===void 0&&(ot=_.state.current),_.setState({status:nt,current:ot})},_}var b=c.prototype;return b.componentDidMount=function(){this.appeared=!0},c.getDerivedStateFromProps=function($,k){return $.children==null?{current:null}:k.status===ENTERING&&$.mode===modes.in?{status:ENTERING}:k.current&&areChildrenDifferent(k.current,$.children)?{status:EXITING}:{current:React.cloneElement($.children,{in:!0})}},b.render=function(){var $=this.props,k=$.children,et=$.mode,nt=this.state,ot=nt.status,ht=nt.current,vt={children:k,current:ht,changeState:this.changeState,status:ot},_t;switch(ot){case ENTERING:_t=enterRenders[et](vt);break;case EXITING:_t=leaveRenders[et](vt);break;case ENTERED:_t=ht}return React.createElement(TransitionGroupContext.Provider,{value:{isMounting:!this.appeared}},_t)},c}(React.Component);SwitchTransition.propTypes={};SwitchTransition.defaultProps={mode:modes.out};const SwitchTransition$1=SwitchTransition,Animations={"fade-in":".fade-in{-webkit-animation:fade-in;animation:fade-in}@-webkit-keyframes fade-in{0%{opacity:0}100%{opacity:1}}@keyframes fade-in{0%{opacity:0}100%{opacity:1}}","fade-out":".fade-out{-webkit-animation:fade-out;animation:fade-out}@-webkit-keyframes fade-out{0%{opacity:1}100%{opacity:0}}@keyframes fade-out{0%{opacity:1}100%{opacity:0}}","slide-in-blurred-top":".slide-in-blurred-top{-webkit-animation:slide-in-blurred-top .6s cubic-bezier(.23,1.000,.32,1.000) both;animation:slide-in-blurred-top .6s cubic-bezier(.23,1.000,.32,1.000) both}@-webkit-keyframes slide-in-blurred-top{0%{-webkit-transform:translateY(-1000px) scaleY(2.5) scaleX(.2);transform:translateY(-1000px) scaleY(2.5) scaleX(.2);-webkit-transform-origin:50% 0;transform-origin:50% 0;-webkit-filter:blur(40px);filter:blur(40px);opacity:0}100%{-webkit-transform:translateY(0) scaleY(1) scaleX(1);transform:translateY(0) scaleY(1) scaleX(1);-webkit-transform-origin:50% 50%;transform-origin:50% 50%;-webkit-filter:blur(0);filter:blur(0);opacity:1}}@keyframes slide-in-blurred-top{0%{-webkit-transform:translateY(-1000px) scaleY(2.5) scaleX(.2);transform:translateY(-1000px) scaleY(2.5) scaleX(.2);-webkit-transform-origin:50% 0;transform-origin:50% 0;-webkit-filter:blur(40px);filter:blur(40px);opacity:0}100%{-webkit-transform:translateY(0) scaleY(1) scaleX(1);transform:translateY(0) scaleY(1) scaleX(1);-webkit-transform-origin:50% 50%;transform-origin:50% 50%;-webkit-filter:blur(0);filter:blur(0);opacity:1}}","slide-in-left":".slide-in-left{-webkit-animation:slide-in-left .5s cubic-bezier(.25,.46,.45,.94) both;animation:slide-in-left .5s cubic-bezier(.25,.46,.45,.94) both}@-webkit-keyframes slide-in-left{0%{-webkit-transform:translateX(-1000px);transform:translateX(-1000px);opacity:0}100%{-webkit-transform:translateX(0);transform:translateX(0);opacity:1}}@keyframes slide-in-left{0%{-webkit-transform:translateX(-1000px);transform:translateX(-1000px);opacity:0}100%{-webkit-transform:translateX(0);transform:translateX(0);opacity:1}}","slide-out-left":".slide-out-left{-webkit-animation:slide-out-left .5s cubic-bezier(.55,.085,.68,.53) both;animation:slide-out-left .5s cubic-bezier(.55,.085,.68,.53) both}@-webkit-keyframes slide-out-left{0%{-webkit-transform:translateX(0);transform:translateX(0);opacity:1}100%{-webkit-transform:translateX(-1000px);transform:translateX(-1000px);opacity:0}}@keyframes slide-out-left{0%{-webkit-transform:translateX(0);transform:translateX(0);opacity:1}100%{-webkit-transform:translateX(-1000px);transform:translateX(-1000px);opacity:0}}"},APIKitAnimation=a=>{const{enter:c,exit:b,children:_,tag:$="div",direction:k="normal",duration:et=500,id:nt,type:ot}=a,ht=nt?`${ot}-${nt}`:`${ot}-api-kit-animation`;return React.createElement("div",{style:{height:"100%",width:"100%"}},React.createElement("style",{dangerouslySetInnerHTML:{__html:renderStyle(ot,c,b,et,k)}}),React.createElement(SwitchTransition$1,{mode:"out-in"},React.createElement(CSSTransition$1,{key:ht,addEndListener:(vt,_t)=>{vt.addEventListener("transitionend",_t,!1)},classNames:{enter:`${ot}-default-enter`,enterActive:c,exit:`${ot}-default-leave`,exitActive:b},timeout:et},React.createElement("div",{style:{height:"100%",width:"100%"}},_))))},renderStyle=(a,c,b,_,$)=>`
        body {
          margin: 0;
          padding: 0;
        }
        
        ${Animations[c]}
        
        ${Animations[b]}

        .${a}-transition {
          transition: opacity ${_}ms ease-out};
        }

        .${a}-default-enter {
          opacity: 0;
        }

        .${a}-default-enter.${c} {
          animation-direction: ${$};
          animation-duration: ${_/1e3}s;
          animation-fill-mode: both;
          animation-timing-function: ease-out;
        }

        .${a}-default-leave {
          opacity: 1;
        }

        .${a}-default-leave.${b} {
          animation-direction: ${$};
          animation-duration: ${_/1e3}s;
          animation-timing-function: ease-out;
          animation-fill-mode: both;
        }
        `,APIKitAnimation$1=APIKitAnimation,Background={name:"LS-Background",sourceType:"Background",create({onUpdate:a,onRemove:c},{sourceProps:b}){c(()=>{clearInterval(k)});const _=document.createElement("div"),$=getProject(CoreContext.state.activeProjectId).role;let k;const et=({source:_t,setStartAnimation:kt})=>{var Ot,It;const{src:$t,type:Tt,meta:At,loop:Mt}=(_t==null?void 0:_t.sourceProps)||{},{id:Dt,sourceType:Rt}=_t||{},[xt,Jt]=React.useState(null),ar=React.useRef(null);console.log("Updated current time",(Ot=ar==null?void 0:ar.current)==null?void 0:Ot.currentTime);const nr=React.useCallback(ut=>{ar.current=ut,Jt(ut?ut.id:null)},[]),pr=React.useCallback(()=>{ar!=null&&ar.current&&ar.current.play().catch(()=>{var ut;ar.current.muted=!0,(ut=ar.current)==null||ut.play()})},[$t]),ur=React.useCallback(()=>{k&&clearInterval(k),hasPermission($,Permission.UpdateProject)&&trigger$1("VideoEnded",{id:Dt,category:Tt})},[$t]);return React.useEffect(()=>{At&&(ar!=null&&ar.current)&&xt&&hasPermission($,Permission.ManageSelf)&&At!=null&&At.time&&(ar.current.currentTime=Number(At==null?void 0:At.time))},[At==null?void 0:At.time,xt]),React.useEffect(()=>()=>{k&&clearInterval(k)},[Dt]),React.useEffect(()=>{xt?ar.current&&(ar.current.src=$t,ar.current.play().catch(()=>{ar.current.muted=!0,ar.current.play()}),hasPermission($,Permission.UpdateProject)&&(k=setInterval(()=>{if(ar.current.duration){const ut=ar.current.duration-ar.current.currentTime;trigger$1("VideoTimeUpdate",{category:Rt,id:Dt,time:Math.floor(ut)})}},1e3))):k&&clearInterval(k)},[xt]),React.createElement(React.Fragment,{key:Dt},$t&&React.createElement("video",{loop:Mt,id:Dt,ref:nr,style:{...(It=b==null?void 0:b.meta)==null?void 0:It.style,...At.style},onLoadedData:pr,onEnded:ur,onCanPlay:()=>kt(!0)}))},nt=({source:_t,setStartAnimation:kt})=>{var Dt;const{src:$t,meta:Tt,type:At}=(_t==null?void 0:_t.sourceProps)||{},{id:Mt}=_t||{};return React.createElement(React.Fragment,{key:Mt},$t&&React.createElement("img",{style:{...(Dt=b==null?void 0:b.meta)==null?void 0:Dt.style,...Tt==null?void 0:Tt.style},src:$t,onLoad:()=>kt(!0)}))},ot=({source:_t})=>{const{type:kt}=_t.sourceProps,{id:$t}=_t||{},[Tt,At]=React.useState(!1);return reactExports.useEffect(()=>{At(!1)},[$t]),React.createElement(APIKitAnimation$1,{id:$t,type:"background",enter:APIKitAnimationTypes.FADE_IN,exit:APIKitAnimationTypes.FADE_OUT,duration:400},React.createElement("div",{style:{opacity:Tt?1:0},className:"backgroundContainer background-transition"},$t&&kt==="image"&&React.createElement(nt,{source:_t,setStartAnimation:At}),$t&&kt==="video"&&React.createElement(et,{source:_t,setStartAnimation:At})))},ht=createRoot(_),vt=_t=>ht.render(React.createElement(React.Fragment,null,React.createElement(ot,{source:_t})));return a(_t=>{vt({..._t})}),{root:_}}},Banner={name:"LS-Banner",sourceType:"Banner",props:{bannerId:{type:String,required:!0}},useSource(a,c){return a.find(b=>b.id===c.bannerId)},create({onUpdate:a,onNewSource:c},b){const _=document.createElement("div");let $,k,et;const nt=({currentSource:vt,latestSource:_t})=>{const[kt,$t]=reactExports.useState(!1),{headerText:Tt,bodyText:At}=(_t==null?void 0:_t.value)||{};return reactExports.useEffect(()=>{window.setTimeout(()=>{$t(!!vt)}),vt||$t(!1)},[vt]),React.createElement("div",{className:"BannerContainer",style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",display:"flex",flexDirection:"row",justifyContent:"flex-start",alignItems:"flex-end",transition:"200ms ease all",...kt?{zIndex:2,opacity:1,transform:"translateX(0)"}:{zIndex:1,opacity:0,transform:"translateX(-200px)"}}},React.createElement("div",{className:"Banner",style:{padding:10,background:"orange",width:"fit-content",height:"fit-content",maxWidth:"84%",position:"relative"}},Tt&&React.createElement("div",{className:"Banner-header",style:{marginBottom:6}},Tt),At&&React.createElement("div",{className:"Banner-body"},At)))},ot=createRoot(_),ht=()=>ot.render(React.createElement(React.Fragment,null,et&&et.id!==k.id&&React.createElement(nt,{key:et==null?void 0:et.id,currentSource:null,latestSource:et}),React.createElement(nt,{key:k==null?void 0:k.id,currentSource:$,latestSource:k})));return a(()=>{ht()}),c(vt=>{et=$,$=vt,$&&(k=$),ht()}),{root:_}}};var functionExpression=/[\s]*([a-z-]+)[\s]*\([\s]*([^\)]+)[\s]*\)[\s]*/i,floatExpression=/^(\-?\d+\.?\d{0,5})/,toFloat=parseFloat;function ensurePercent(a){return typeof a=="number"?a:toFloat(a)*.01}function formatPercent(a){return formatFloat(a*100)+"%"}function formatFloat(a){return floatExpression.exec(a.toString())[1]}function parseCSSFunction(a){var c=functionExpression.exec(a);if(!(!c||!c.length))return[c[1]].concat(c[2].split(","))}function cssFunction(a,c){var b=Array.prototype.join.call(c,", ");return a+"("+b+")"}var math=Math,round=math.round;function roundFloat(a,c){return round(a*c)/c}var _a,RGB="rgb",HSL="hsl",converters=(_a={},_a[RGB+HSL]=RGBtoHSL,_a[HSL+RGB]=HSLtoRGB,_a),maxChannelValues={r:255,g:255,b:255,h:360,s:1,l:1,a:1};function color(a){return parseHexCode(a)||parseColorFunction(a)||rgb(255,0,0)}function rgb(a,c,b,_){return new ColorHelper(RGB,a,c,b,_===void 0?1:ensurePercent(_),_!==void 0)}function convertHelper(a,c,b){var _=c.f,$=c.r,k=c.g,et=c.b,nt=c.a,ot=b===void 0?c.o:b;return _!==a?converters[_+a]($,k,et,nt,ot):b===void 0?c:new ColorHelper(_,$,k,et,nt,ot)}var ColorHelper=function(){function a(c,b,_,$,k,et){var nt=this;nt.f=c,nt.o=et;var ot=c===HSL;nt.r=clampColor(ot?"h":"r",b),nt.g=clampColor(ot?"s":"g",_),nt.b=clampColor(ot?"l":"b",$),nt.a=clampColor("a",k)}return a.prototype.toString=function(){var c=this,b=c.o,_=c.f,$=c.r,k=c.g,et=c.b,nt=c.a,ot,ht;if(_===RGB)ot=b?"rgba":RGB,ht=[round($),round(k),round(et)];else if(_===HSL)ot=b?"hsla":HSL,ht=[round($),formatPercent(roundFloat(k,100)),formatPercent(roundFloat(et,100))];else throw new Error("Invalid color format");return b&&ht.push(formatFloat(roundFloat(nt,1e5))),cssFunction(ot,ht)},a.prototype.toHexString=function(){var c=convertHelper(RGB,this);return"#"+(toHex(c.r)+toHex(c.g)+toHex(c.b)).toUpperCase()},a.prototype.toHSL=function(){return convertHelper(HSL,this,!1)},a.prototype.toHSLA=function(){return convertHelper(HSL,this,!0)},a.prototype.toRGB=function(){return convertHelper(RGB,this,!1)},a.prototype.toRGBA=function(){return convertHelper(RGB,this,!0)},a.prototype.red=function(){var c=this;return(c.f===RGB?c:c.toRGB()).r},a.prototype.green=function(){var c=this;return(c.f===RGB?c:c.toRGB()).g},a.prototype.blue=function(){var c=this;return(c.f===RGB?c:c.toRGB()).b},a.prototype.hue=function(){var c=this;return(c.f===HSL?c:c.toHSL()).r},a.prototype.saturation=function(){var c=this;return(c.f===HSL?c:c.toHSL()).g},a.prototype.lightness=function(){var c=this;return(c.f===HSL?c:c.toHSL()).b},a.prototype.alpha=function(){return this.a},a.prototype.opacity=function(){return this.a},a.prototype.invert=function(){var c=this,b=convertHelper(RGB,c);return convertHelper(c.f,new a(RGB,255-b.r,255-b.g,255-b.b,c.a,c.o))},a.prototype.lighten=function(c,b){var _=this,$=convertHelper(HSL,_),k=maxChannelValues.l,et=$.b+(b?k-$.b:k)*ensurePercent(c);return convertHelper(_.f,new a(HSL,$.r,$.g,et,_.a,_.o))},a.prototype.darken=function(c,b){var _=this,$=convertHelper(HSL,_),k=$.b-(b?$.b:maxChannelValues.l)*ensurePercent(c);return convertHelper(_.f,new a(HSL,$.r,$.g,k,_.a,_.o))},a.prototype.saturate=function(c,b){var _=this,$=convertHelper(HSL,_),k=maxChannelValues.s,et=$.g+(b?k-$.g:k)*ensurePercent(c);return convertHelper(_.f,new a(HSL,$.r,et,$.b,_.a,_.o))},a.prototype.desaturate=function(c,b){var _=this,$=convertHelper(HSL,_),k=maxChannelValues.s,et=$.g-(b?$.g:k)*ensurePercent(c);return convertHelper(_.f,new a(HSL,$.r,et,$.b,_.a,_.o))},a.prototype.grayscale=function(){return this.desaturate(1)},a.prototype.fade=function(c){var b=this,_=clampColor("a",ensurePercent(c));return convertHelper(b.f,new a(b.f,b.r,b.g,b.b,_,!0))},a.prototype.fadeOut=function(c,b){var _=this,$=1,k=clampColor("a",_.a-(b?_.a:$)*ensurePercent(c));return convertHelper(_.f,new a(_.f,_.r,_.g,_.b,k,!0))},a.prototype.fadeIn=function(c,b){var _=this,$=1,k=clampColor("a",_.a+(b?_.a:$)*ensurePercent(c));return convertHelper(_.f,new a(_.f,_.r,_.g,_.b,k,!0))},a.prototype.mix=function(c,b){var _=this,$=ensureColor(c),k=convertHelper(RGB,_),et=convertHelper(RGB,$),nt=b===void 0?.5:b,ot=2*nt-1,ht=Math.abs(k.a-et.a),vt=((ot*ht===-1?ot:(ot+ht)/(1+ot*ht))+1)/2,_t=1-vt,kt=new a(RGB,round(k.r*vt+et.r*_t),round(k.g*vt+et.g*_t),round(k.b*vt+et.b*_t),k.a*nt+et.a*(1-nt),_.o||$.o);return convertHelper(this.f,kt)},a.prototype.tint=function(c){return rgb(255,255,255).mix(this,c)},a.prototype.shade=function(c){return rgb(0,0,0).mix(this,c)},a.prototype.spin=function(c){var b=this,_=convertHelper(HSL,b);return convertHelper(b.f,new a(HSL,modDegrees(_.r+c),_.g,_.b,b.a,b.o))},a}();function toHex(a){var c=round(a);return(c<16?"0":"")+c.toString(16)}function modDegrees(a){return((a<0?360:0)+a%360)%360}function RGBtoHSL(a,c,b,_,$){var k=a/255,et=c/255,nt=b/255,ot=Math.min(k,et,nt),ht=Math.max(k,et,nt),vt=(ot+ht)/2,_t=ht-ot,kt;ht===ot?kt=0:k===ht?kt=(et-nt)/_t:et===ht?kt=2+(nt-k)/_t:nt===ht?kt=4+(k-et)/_t:kt=0,kt=Math.min(kt*60,360),kt<0&&(kt+=360);var $t;return ht===ot?$t=0:vt<=.5?$t=_t/(ht+ot):$t=_t/(2-ht-ot),new ColorHelper(HSL,kt,$t,vt,_,$)}function HSLtoRGB(a,c,b,_,$){var k=a/360,et=c,nt=b;if(et===0){var ot=nt*255;return new ColorHelper(RGB,ot,ot,ot,_,$)}for(var ht=nt<.5?nt*(1+et):nt+et-nt*et,vt=2*nt-ht,_t=0,kt=0,$t=0,Tt=0;Tt<3;Tt++){var At=k+.3333333333333333*-(Tt-1);At<0&&At++,At>1&&At--;var ot=void 0;6*At<1?ot=vt+(ht-vt)*6*At:2*At<1?ot=ht:3*At<2?ot=vt+(ht-vt)*(2/3-At)*6:ot=vt,ot*=255,Tt===0?_t=ot:Tt===1?kt=ot:$t=ot}return new ColorHelper(RGB,_t,kt,$t,_,$)}function clampColor(a,c){var b=0,_=maxChannelValues[a];return c<b?b:c>_?_:c}function ensureColor(a){return a instanceof ColorHelper?a:color(a)}function parseHexCode(a){var c=a.match(/#(([a-f0-9]{6})|([a-f0-9]{3}))$/i);if(c){var b=c[1],_=parseInt(b.length===3?b[0]+b[0]+b[1]+b[1]+b[2]+b[2]:b,16),$=_>>16&255,k=_>>8&255,et=_&255;return new ColorHelper(RGB,$,k,et,1,!1)}}function parseColorFunction(a){var c=parseCSSFunction(a);if(!(!c||!(c.length===4||c.length===5))){var b=c[0],_=b==="rgba",$=b==="hsla",k=b===RGB,et=b===HSL,nt=$||_,ot;if(k||_)ot=RGB;else if(et||$)ot=HSL;else throw new Error("unsupported color string");var ht=toFloat(c[1]),vt=k||_?toFloat(c[2]):ensurePercent(c[2]),_t=k||_?toFloat(c[3]):ensurePercent(c[3]),kt=nt?toFloat(c[4]):1;return new ColorHelper(ot,ht,vt,_t,kt,nt)}}const of=color,transparent=color("rgba(0,0,0,0)"),white=color("#ffffff"),black=color("#000000"),weights={primary:{50:"#EAFAF5",100:"#D5F6EB",200:"#ABEDD7",300:"#82E3C3",400:"#58DAAF",500:"#26AD80",600:"#25A77C",700:"#1C7D5D",800:"#12543E"},secondary:{50:"#FBEAEA",100:"#F7D4D4",200:"#EFA9A9",300:"#E77E7E",400:"#FF6F64",500:"#E9554A",600:"#CB362B",700:"#811818",800:"#561010"},neutral:{0:"#ffffff",10:"#f5f5f5",200:"#d9d9d9",300:"#bababa",350:"#999999",400:"#9e9e9e",500:"#808080",600:"#666666",700:"#4d4d4d",800:"#303030",900:"#141414",1e3:"#000000"},warning:{400:"#FFC28A",500:"#FFAE64",600:"#F29540"}},types=Object.keys(weights),weight=a=>c=>{const b=weights[a];if(b[c])return b[c];const _=Object.keys(weights.primary).map(Number),$=_.find(k=>c<=k);return $?b[$]:b[_.slice(_.length-1)[0]]},primary=weight("primary"),neutral=weight("neutral"),secondary=weight("secondary"),warning=weight("warning"),lightstream=color("#26ad80"),twitch=color("#9156ff"),linkedin=color("#2867b2"),youtube=color("#ff0000"),facebook=color("#1877f2"),twitter=color("#1da1f2"),Color=Object.freeze(Object.defineProperty({__proto__:null,black,color,facebook,lightstream,linkedin,neutral,of,primary,secondary,transparent,twitch,twitter,types,warning,white,youtube},Symbol.toStringTag,{value:"Module"})),YouTube=React.createElement("svg",{style:{flex:"0 0 100%"},viewBox:"0 0 24 24"},React.createElement("path",{d:"M19.6465 8.53711C19.4707 7.83398 18.9141 7.27734 18.2402 7.10156C16.9805 6.75 12 6.75 12 6.75C12 6.75 6.99023 6.75 5.73047 7.10156C5.05664 7.27734 4.5 7.83398 4.32422 8.53711C3.97266 9.76758 3.97266 12.4043 3.97266 12.4043C3.97266 12.4043 3.97266 15.0117 4.32422 16.2715C4.5 16.9746 5.05664 17.502 5.73047 17.6777C6.99023 18 12 18 12 18C12 18 16.9805 18 18.2402 17.6777C18.9141 17.502 19.4707 16.9746 19.6465 16.2715C19.998 15.0117 19.998 12.4043 19.998 12.4043C19.998 12.4043 19.998 9.76758 19.6465 8.53711ZM10.3594 14.7773V10.0312L14.5195 12.4043L10.3594 14.7773Z"})),YouTubeDuo=React.createElement("svg",{style:{flex:"0 0 100%"},viewBox:"0 0 24 24"},React.createElement("rect",{x:"8",y:"9",width:"9",height:"7",fill:neutral(0)}),React.createElement("path",{d:"M19.6465 8.53711C19.4707 7.83398 18.9141 7.27734 18.2402 7.10156C16.9805 6.75 12 6.75 12 6.75C12 6.75 6.99023 6.75 5.73047 7.10156C5.05664 7.27734 4.5 7.83398 4.32422 8.53711C3.97266 9.76758 3.97266 12.4043 3.97266 12.4043C3.97266 12.4043 3.97266 15.0117 4.32422 16.2715C4.5 16.9746 5.05664 17.502 5.73047 17.6777C6.99023 18 12 18 12 18C12 18 16.9805 18 18.2402 17.6777C18.9141 17.502 19.4707 16.9746 19.6465 16.2715C19.998 15.0117 19.998 12.4043 19.998 12.4043C19.998 12.4043 19.998 9.76758 19.6465 8.53711ZM10.3594 14.7773V10.0312L14.5195 12.4043L10.3594 14.7773Z"})),Facebook=React.createElement("svg",{style:{flex:"0 0 100%"},viewBox:"0 0 24 24"},React.createElement("path",{d:"M15.4863 13.3125L15.8965 10.6172H13.2891V8.85938C13.2891 8.09766 13.6406 7.39453 14.8125 7.39453H16.0137V5.08008C16.0137 5.08008 14.9297 4.875 13.9043 4.875C11.7656 4.875 10.3594 6.19336 10.3594 8.53711V10.6172H7.95703V13.3125H10.3594V19.875H13.2891V13.3125H15.4863Z"})),FacebookCircle=React.createElement("svg",{style:{flex:"0 0 100%"},viewBox:"0 0 24 24"},React.createElement("path",{d:"M19.2656 12.375C19.2656 8.36133 16.0137 5.10938 12 5.10938C7.98633 5.10938 4.73438 8.36133 4.73438 12.375C4.73438 16.0078 7.37109 19.0254 10.8574 19.5527V14.4844H9.01172V12.375H10.8574V10.793C10.8574 8.97656 11.9414 7.95117 13.582 7.95117C14.4023 7.95117 15.2227 8.09766 15.2227 8.09766V9.88477H14.3145C13.4062 9.88477 13.1133 10.4414 13.1133 11.0273V12.375H15.1348L14.8125 14.4844H13.1133V19.5527C16.5996 19.0254 19.2656 16.0078 19.2656 12.375Z"})),Twitch=React.createElement("svg",{style:{flex:"0 0 100%"},viewBox:"0 0 24 24"},React.createElement("path",{d:"M16.9551 8.92188H15.8125V12.1445H16.9551V8.92188ZM13.8496 8.89258H12.707V12.1152H13.8496V8.89258ZM9.01562 5.875L6.20312 8.57031V18.209H9.60156V20.875L12.4141 18.209H14.6699L19.7676 13.375V5.875H9.01562ZM18.6543 12.8477L16.3691 14.9863H14.1133L12.1504 16.8613V14.9863H9.60156V6.95898H18.6543V12.8477Z"})),TwitchDuo=React.createElement("svg",{style:{flex:"0 0 100%"},viewBox:"0 0 24 24"},React.createElement("path",{d:"M19 6.5H9L8.8125 17.5H13.5L19 13V6.5Z",fill:neutral(0)}),React.createElement("path",{d:"M16.9551 8.92188H15.8125V12.1445H16.9551V8.92188ZM13.8496 8.89258H12.707V12.1152H13.8496V8.89258ZM9.01562 5.875L6.20312 8.57031V18.209H9.60156V20.875L12.4141 18.209H14.6699L19.7676 13.375V5.875H9.01562ZM18.6543 12.8477L16.3691 14.9863H14.1133L12.1504 16.8613V14.9863H9.60156V6.95898H18.6543V12.8477Z"})),Twitter=React.createElement("svg",{style:{flex:"0 0 100%"},viewBox:"0 0 24 24"},React.createElement("path",{d:"M20.6681 7.98749C20.6806 8.16248 20.6806 8.33751 20.6806 8.5125C20.6806 13.85 16.6197 20 9.1976 20C6.91098 20 4.78681 19.3375 3 18.1875C3.32489 18.225 3.63723 18.2375 3.97462 18.2375C5.86136 18.2375 7.59821 17.6 8.98518 16.5125C7.21086 16.475 5.72393 15.3125 5.21162 13.7125C5.46155 13.75 5.71143 13.775 5.97386 13.775C6.33621 13.775 6.69859 13.725 7.03594 13.6375C5.18666 13.2625 3.79966 11.6375 3.79966 9.67499V9.62501C4.33693 9.92501 4.96174 10.1125 5.62393 10.1375C4.53685 9.41247 3.82466 8.17498 3.82466 6.77497C3.82466 6.02499 4.02454 5.33749 4.37443 4.73748C6.36117 7.18748 9.34753 8.78745 12.6962 8.96248C12.6337 8.66248 12.5962 8.35001 12.5962 8.03751C12.5962 5.81248 14.3955 4 16.6322 4C17.7942 4 18.8438 4.4875 19.581 5.275C20.4931 5.10001 21.3678 4.76249 22.1425 4.3C21.8426 5.23752 21.2054 6.02502 20.3682 6.52499C21.1804 6.43753 21.9676 6.21248 22.6923 5.90001C22.1426 6.69998 21.4553 7.41245 20.6681 7.98749Z"})),LinkedIn=React.createElement("svg",{style:{flex:"0 0 100%"},viewBox:"0 0 24 24"},React.createElement("path",{d:"M19.2 3H4.8C3.81 3 3.009 3.81 3.009 4.8L3 19.2C3 20.19 3.81 21 4.8 21H19.2C20.19 21 21 20.19 21 19.2V4.8C21 3.81 20.19 3 19.2 3ZM8.4 18.3H5.7V10.2H8.4V18.3ZM7.05 8.679C6.15 8.679 5.421 7.95 5.421 7.05C5.421 6.15 6.15 5.421 7.05 5.421C7.95 5.421 8.679 6.15 8.679 7.05C8.679 7.95 7.95 8.679 7.05 8.679ZM18.3 18.3H15.6V13.53C15.6 12.783 14.997 12.18 14.25 12.18C13.503 12.18 12.9 12.783 12.9 13.53V18.3H10.2V10.2H12.9V11.28C13.368 10.524 14.331 10.02 15.15 10.02C16.887 10.02 18.3 11.433 18.3 13.17V18.3Z"})),Lightstream=React.createElement("svg",{style:{flex:"0 0 100%"},viewBox:"0.144 0 27.712 24"},React.createElement("path",{d:"M16.0369 12.1232L14 15.6518L11.5642 11.4335L6.27356 10.6176L14 24L20.4627 12.805L16.0369 12.1232Z"}),React.createElement("path",{d:"M9.74033 8.27418L7.37317 4.17409H20.6268L19.0921 6.83194L24.3827 6.01602L27.8558 0H0.144165L5.31453 8.95665L9.74033 8.27418Z"})),LightstreamWithText=React.createElement("svg",{style:{flex:"0 0 100%"},viewBox:"0 0 3000 524"},React.createElement("polygon",{points:"330.56 263.5 299.73 316.91 262.86 253.06 182.78 240.71 299.73 443.27 397.55 273.82 330.56 263.5"}),React.createElement("polygon",{points:"235.25 205.24 199.42 143.18 400.03 143.18 376.8 183.41 456.88 171.06 509.45 80 90 80 168.26 215.57 235.25 205.24"}),React.createElement("path",{d:"M646.32,345.72h94.91v13.73H630V167.26h16.36Z"}),React.createElement("path",{d:"M846.24,359.45H830V167.26h16.23Z"}),React.createElement("path",{d:"M1091.16,336.61q-8.45,12-26.46,18.74t-40.33,6.73q-22.57,0-40.13-10.82t-27.19-30.62q-9.64-19.8-9.77-45.41V250.95q0-40,20.2-63.16t54.25-23.17q29.69,0,47.78,15.11T1091,221.38h-16.24q-3.56-21.18-17.23-32.11t-35.7-10.92q-26.92,0-42.64,19.15t-15.71,54v22.72q0,21.93,7.46,38.77t21.38,26.09q13.92,9.25,32,9.25,21,0,36-6.6,9.76-4.36,14.52-10.16V282h-51.61V268.24h67.85Z"}),React.createElement("path",{d:"M1333.71,359.45h-16.37V278.11H1207.53v81.33h-16.23V167.26h16.23v97.12h109.81V167.26h16.37Z"}),React.createElement("path",{d:"M1563.2,181h-65.87V359.45H1481.1V181h-65.73V167.26H1563.2Z"}),React.createElement("path",{d:"M1990.75,181h-65.87V359.45h-16.23V181h-65.73V167.26h147.83Z"}),React.createElement("path",{d:"M2147.65,279.33h-55.84v80.12h-16.36V167.26h62.43q30.75,0,48,14.9t17.29,41.66a52,52,0,0,1-10.83,32.56q-10.82,14.11-29,19.51l48,81.83v1.72h-17.29Zm-55.84-13.73h49.76q20.45,0,32.86-11.63t12.41-30.14q0-20.36-12.93-31.59T2137.61,181h-45.8Z"}),React.createElement("path",{d:"M2407.62,278.11h-89.88v67.61h103.35v13.73H2301.5V167.26h118.92V181H2317.73v83.39h89.88Z"}),React.createElement("polygon",{points:"2892.79 183.67 2892.79 183.67 2816.23 326.97 2724.06 154.45 2724.06 189.54 2724.06 359.75 2739.67 359.75 2739.67 218.3 2816.26 359.42 2892.79 218.32 2892.79 359.75 2908.4 359.75 2908.4 189.54 2908.4 154.45 2892.79 183.67"}),React.createElement("polygon",{points:"2649.77 359.45 2569.47 154.54 2569.47 154.53 2569.46 154.53 2569.46 154.53 2569.46 154.54 2489.16 359.45 2506.19 359.45 2569.46 194.32 2632.74 359.45 2649.77 359.45"}),React.createElement("path",{d:"M1764.57,287q-6.73-10.56-20.06-18.15a131.55,131.55,0,0,0-21.47-9.18l-7.64,13.49q19.65,6.61,28.32,13.77,11.22,9.3,11.22,25.28,0,16.37-13.6,26.26t-36,9.9c-11.35,0-21.05-1.94-29.35-5.51l-7,12.33a94,94,0,0,0,36.33,6.91q29.7,0,47.85-13.73t18.15-36.43Q1771.3,297.55,1764.57,287Z"}),React.createElement("path",{d:"M1659.11,250.93c7.28,5.25,18,10.18,32.13,14.79l7.72-13.38q-21-6.41-31.29-14.49Q1655.95,228.61,1656,214q0-15.83,13-25.66t35-9.83c13.12,0,23.78,3.19,32.26,9.21l7.23-12.51c-1.71-1-3.43-2.1-5.3-3q-15.09-7.38-34.18-7.38-28.19,0-46.31,13.76t-18.11,35.77Q1639.62,237,1659.11,250.93Z"}),React.createElement("path",{d:"M1744.34,268.78a129.23,129.23,0,0,0-21.68-9.32l-7.79,13.49c13.28,4.44,22.87,9.06,28.68,13.88q11.2,9.29,11.2,25.23,0,16.33-13.57,26.21t-36,9.88c-11.8,0-21.85-2-30.34-5.91l-7.08,12.26.2.1a93.63,93.63,0,0,0,37.22,7.25q29.64,0,47.75-13.7t18.11-36.36q0-14.36-6.72-24.9T1744.34,268.78Z"})),IconMap=Object.freeze(Object.defineProperty({__proto__:null,Facebook,FacebookCircle,Lightstream,LightstreamWithText,LinkedIn,Twitch,TwitchDuo,Twitter,YouTube,YouTubeDuo},Symbol.toStringTag,{value:"Module"})),nudge=a=>{if(a.nudgeUp||a.nudgeDown||a.nudgeRight||a.nudgeLeft)return{position:"relative",top:a.nudgeDown,left:a.nudgeRight,right:a.nudgeLeft,bottom:a.nudgeUp}},SVGWrapper=({children:a,width:c,height:b,color:_,colorWeight:$=0,marginLeft:k,marginTop:et,marginRight:nt,marginBottom:ot,className:ht,...vt})=>(_&&Color[_]($),React.createElement("div",{className:ht,style:{...nudge(vt),display:"flex",justifyContent:"center",flexBasis:c||"auto",flexShrink:0,width:c,height:b||c&&"fit-content",marginLeft:k,marginTop:et,marginBottom:ot,marginRight:nt}},a)),Icon=({name:a,...c})=>React.createElement(SVGWrapper,{...c},IconMap[a]),Icon$1=Icon,dragImageSvg=`
  <svg height="75" width="120" viewBox="0 0 120 75" xmlns="http://www.w3.org/2000/svg" style="">
    <rect width="120" height="75" rx="3" style="
      opacity: 0.4;
      stroke: white;
      stroke-width: 3px;
      stroke-opacity: 0.7;
    "/>
  </svg>`;let dragImage;const loadDragImage=()=>dragImage||(dragImage=new Image,dragImage.src=URL.createObjectURL(new Blob([dragImageSvg],{type:"image/svg+xml"})),dragImage);class ErrorBoundary extends React.Component{constructor(c){super(c),this.state={error:null}}componentDidCatch(c,b){log.warn(c,b)}static getDerivedStateFromError(){return{error:!0}}render(){return this.state.error?null:this.props.children}}const onDrop=async(a,c)=>{const{dropNodeId:b,dragNodeId:_,dropType:$,project:k}=a;if(log.debug("Compositor: Dropping",{dropType:$,dragNodeId:_,dropNodeId:b}),b===_)return;const[et,nt,ot,ht]=await Promise.all([k.compositor.get(_),k.compositor.get(b),k.compositor.getParent(_),k.compositor.getParent(b)]);if($==="layout")return ot.id===b?void 0:CoreContext.Command.moveNode({projectId:k.id,nodeId:et.id,parentId:nt.id});if(ot.id!==(ht==null?void 0:ht.id))return CoreContext.Command.swapNodes({projectId:k.id,nodeAId:et.id,nodeBId:nt.id});const vt=ot.children.map(_t=>_t.id);return CoreContext.Command.reorderNodes({projectId:k.id,parentId:ot.id,childIds:swapItems(et.id,nt.id,vt)})};let draggingNodeIdRef=null;const DRAG_DISTANCE_BUFFER=2,ElementTree=a=>{var Et,pt,rt,mt;const c=reactExports.useRef(),b=reactExports.useRef(!1),_=reactExports.useRef(),$=reactExports.useRef(),k=reactExports.useRef(),[et,nt]=reactExports.useState(),{projectId:ot,interactive:ht,draggingNodeId:vt,onElementDoubleClick:_t,checkDragTarget:kt,checkDropTarget:$t,getNodePresetsOverlay:Tt,onPresetPreview:At,onPresetSelect:Mt,setDraggingNodeId:Dt}=reactExports.useContext(CompositorContext),{nodeId:Rt}=a,xt=getProject(ot),Jt=xt.compositor.get(Rt),ar=CoreContext.compositor.getElement(Jt),[nr,pr]=reactExports.useState({}),ur={...Jt.props,...nr},Ot=ur.layout||"Row",It=(ht&&(kt==null?void 0:kt(Jt)))??!1,ut=(ht&&($t==null?void 0:$t(Jt)))??!1,_e=Tt==null?void 0:Tt(Jt,xt.props);let tt=Jt.children.some(Lt=>Lt.id===vt),it=ut&&vt&&!b.current?{onpointerup:Lt=>(log.debug('Compositor: PointerUp "Layout"',Jt.id),onDrop({dropType:"layout",dropNodeId:Jt.id,dragNodeId:vt,project:xt})),onpointerenter:Lt=>{var Gt;Lt.preventDefault(),Lt.stopPropagation(),(Gt=k.current)==null||Gt.toggleAttribute("data-layout-drop-target-active",!0)},onpointerleave:Lt=>{var Gt;Lt.preventDefault(),Lt.stopPropagation(),(Gt=k.current)==null||Gt.toggleAttribute("data-layout-drop-target-active",!1)}}:{},dt=It?{onpointerdown:Lt=>{var zt;c.current={x:Lt.clientX,y:Lt.clientY};let Gt=c.current;log.debug("Compositor: Dragging",Jt.id),wrapperEl.toggleAttribute("data-dragging",!0),(zt=k.current)==null||zt.toggleAttribute("data-drag-target-active",!0);const rr=()=>{b.current&&(dragPreviewEl.style.top=Gt.y-20+"px",dragPreviewEl.style.left=Gt.x-20+"px",dragPreviewEl.toggleAttribute("data-active",!0),requestAnimationFrame(()=>rr()))},ir=wt=>{if(!b.current&&c.current){const Vt=Math.abs(wt.clientX-c.current.x)>=DRAG_DISTANCE_BUFFER||Math.abs(wt.clientY-c.current.y)>=DRAG_DISTANCE_BUFFER;Vt&&(Dt(Jt.id),b.current=Vt,rr())}Gt={x:wt.clientX,y:wt.clientY}};ir(Lt);const Wt=wt=>{setTimeout(()=>{log.debug("Compositor: DragEnd",wt),c.current=void 0,b.current=!1,Dt(null),dragPreviewEl.toggleAttribute("data-active",!1),wrapperEl.toggleAttribute("data-dragging",!1),wrapperEl.toggleAttribute("data-drop-target-ready",!1),wrapperEl.querySelectorAll("[data-item]").forEach(Vt=>{Vt.toggleAttribute("data-drag-target-active",!1),Vt.toggleAttribute("data-layout-drop-target-active",!1),Vt.toggleAttribute("data-transform-drop-target-active",!1),Vt.toggleAttribute("data-transform-drop-self-active",!1)})}),document.removeEventListener("pointermove",ir),document.removeEventListener("pointerup",Wt)};document.addEventListener("pointermove",ir),document.addEventListener("pointerup",Wt)},onpointerup:Lt=>{log.debug('Compositor: PointerUp "Node"',Jt.id),draggingNodeIdRef&&draggingNodeIdRef!==Jt.id&&onDrop({dropType:"transform",dropNodeId:Jt.id,dragNodeId:draggingNodeIdRef,project:xt})},onpointerenter:Lt=>{var Gt,rr;Lt.preventDefault(),Lt.stopPropagation(),draggingNodeIdRef&&(b.current?(log.debug("Compositor: Mouseenter self",Jt.id),(Gt=k.current)==null||Gt.toggleAttribute("data-transform-drop-self-active",!0)):(log.debug("Compositor: Mouseenter other",Jt.id),(rr=k.current)==null||rr.toggleAttribute("data-transform-drop-target-active",!0),setTimeout(()=>{b.current||wrapperEl.toggleAttribute("data-drop-target-ready",!0)})))},onpointerleave:Lt=>{var Gt,rr;Lt.preventDefault(),Lt.stopPropagation(),draggingNodeIdRef&&((Gt=k.current)==null||Gt.toggleAttribute("data-transform-drop-self-active",!1),(rr=k.current)==null||rr.toggleAttribute("data-transform-drop-target-active",!1),wrapperEl.toggleAttribute("data-drop-target-ready",!1))}}:{};reactExports.useEffect(()=>{$.current&&ar&&($.current.appendChild(ar.root),Object.assign($.current.style,{width:"100%",height:"100%",position:"relative",overflow:"hidden"}),Object.assign(ar.root.style,{pointerEvents:It?"all":"none",width:"100%",height:"100%",position:"relative",...ur.style||{}}))},[]),reactExports.useEffect(()=>{const Lt=It?()=>_t==null?void 0:_t(Jt):()=>{};return _.current&&(Object.assign(_.current,dt),Object.assign(_.current.style,{pointerEvents:It?"all":"none"}),_.current.addEventListener("dblclick",Lt)),()=>{var Gt;(Gt=_.current)==null||Gt.removeEventListener("dblclick",Lt)}},[]),reactExports.useEffect(()=>{k.current&&Object.assign(_.current,it)},[]);const lt={layout:Ot,...ur.layoutProps??{}},gt=reactExports.useMemo(()=>Lt=>{Lt.toggleAttribute("data-preset-drag-target-active",!1),window.clearTimeout(et),pr({}),nt(void 0)},[et,pr]);return Jt?React.createElement("div",{ref:k,"data-id":Jt.id+"-x","data-source-type":Jt.props.sourceType,"data-item":!0,...It&&{"data-drag-target":!0},...ut&&{"data-drop-target":!0},style:{position:"relative",width:((Et=ur==null?void 0:ur.size)==null?void 0:Et.x)??"100%",height:((pt=ur==null?void 0:ur.size)==null?void 0:pt.y)??"100%",pointerEvents:"none"}},React.createElement("div",{className:"layout-preset-zones",style:{height:"100%",width:"100%",position:"absolute",zIndex:4,pointerEvents:"none",transition:"opacity 300ms ease"}},_e==null?void 0:_e.map(({name:Lt,position:Gt,layout:rr})=>React.createElement("div",{key:Lt,className:`layout-preset-zone ${rr}`,"data-drag-target":!0,style:{position:"absolute",pointerEvents:tt?"all":"none",opacity:tt?1:0,transition:tt?"opacity 500ms ease 200ms, background-color 100ms ease":"",...Gt},onPointerOver:ir=>{if(ir.stopPropagation(),!draggingNodeIdRef)return;ir.currentTarget.toggleAttribute("data-preset-drag-target-active",!0);const Wt=window.setTimeout(()=>{At==null||At({node:xt.compositor.get(draggingNodeIdRef),preset:Lt,setLocalState:pr})},250);nt(Wt)},onPointerLeave:ir=>{ir.stopPropagation(),draggingNodeIdRef&&gt(ir.currentTarget)},onPointerUp:ir=>{draggingNodeIdRef&&(gt(ir.currentTarget),Mt==null||Mt({node:xt.compositor.get(draggingNodeIdRef),preset:Lt}))}}))),React.createElement("div",{className:"interactive-overlay",ref:_,style:{width:((rt=Jt.props)==null?void 0:rt.isAudioOnly)??!1?"0%":"100%",height:((mt=Jt.props)==null?void 0:mt.isAudioOnly)??!1?"0%":"100%",position:"absolute",zIndex:2}}),React.createElement("div",{className:"item-element",style:{display:"flex",flex:"0 0 auto",justifyContent:"center",width:"100%",height:"100%"}},React.createElement("div",{ref:$}),React.createElement(ErrorBoundary,null,React.createElement("ls-layout",{"data-id":Jt.id+"-x",props:JSON.stringify(lt),layout:Ot},Jt.children.map(Lt=>React.createElement(ElementTree,{key:Lt.id,nodeId:Lt.id})))))):null},Root=a=>{const[c,b]=reactExports.useState(null),{projectId:_}=reactExports.useContext(CompositorContext),$=getProject(_);return reactExports.useEffect(()=>(b($.compositor.renderTree()),CoreContext.onInternal("NodeChanged",()=>{b($.compositor.renderTree())})),[]),reactExports.useEffect(()=>{const k=$.compositor.getRoot(),{x:et}=k.props.size,nt=()=>{var Tt,At,Mt;const{bannerStyle:ot="default",primaryColor:ht="#ABABAB",showNameBanners:vt}=$.props??{},_t=((Tt=$.props)==null?void 0:Tt.logoPosition)??((Mt=(At=$.props)==null?void 0:At.logo)==null?void 0:Mt.logoPosition)??"top-right";if(!ot||!ht||!_t)return;const kt=themes[ot](ht,vt,et/1920),$t=themes[_t](et/1920);a.setStyle(`${kt} ${$t}`||"")};return nt(),CoreContext.onInternal("ProjectChanged",nt)},[$]),c?React.createElement("div",{style:{userSelect:"none",width:`${c.props.size.x+PADDING*2}px`,height:`${c.props.size.y+PADDING*2}px`,margin:PADDING+"px"}},React.createElement("div",{style:{width:"100%",height:"100%",overflow:"hidden"}},React.createElement(ElementTree,{nodeId:c.id}))):null};let dragPreviewEl,wrapperEl,customStyleEl;const PADDING=0,render=a=>{const{containerEl:c,projectId:b,interactive:_=!1,checkDragTarget:$=scenelessProjectDragCheck,checkDropTarget:k=scenelessProjectDropCheck}=a,et=getProject(b);if(CoreContext.clients.LayoutApi().subscribeToLayout(et.layoutApi.layoutId),loadDragImage(),!c||!et)return;if(!c.shadowRoot){c.attachShadow({mode:"open"}),customStyleEl=document.createElement("style");const $t=document.createElement("style");$t.textContent=getStyle(),wrapperEl=document.createElement("div"),wrapperEl.id="compositor-root",Object.assign(wrapperEl.style,{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",transformOrigin:"center"}),dragPreviewEl=document.createElement("div"),dragPreviewEl.id="drag-preview",c.shadowRoot.appendChild($t),c.shadowRoot.appendChild(customStyleEl),c.shadowRoot.appendChild(wrapperEl),c.shadowRoot.appendChild(dragPreviewEl),new ResizeObserver(At=>{vt()}).observe(c)}const nt=et.compositor.getRoot(),{x:ot,y:ht}=nt.props.size,vt=()=>{let{width:$t,height:Tt}=c.getBoundingClientRect();const At=$t/Tt,Mt=ot/ht;let Dt;$t&&Tt?Mt>At?Dt=$t/(ot+PADDING*2):Dt=Tt/(ht+PADDING*2):Dt=1,wrapperEl.style.willChange="transform",wrapperEl.style.transform=`scale(${Dt}) translateZ(0)`,window.__scale=Dt,kt()},_t=createRoot(wrapperEl),kt=()=>{_t.render(React.createElement(CompositorProvider,{interactive:_,checkDragTarget:$,checkDropTarget:k,...a},React.createElement(Root,{setStyle:$t=>{customStyleEl.textContent=$t}})))};vt()},scenelessProjectDragCheck=a=>a.props.name==="Participant"||a.props.sourceType==="RoomParticipant"||a.props.sourceType==="RTMP"||a.props.sourceType==="Game",scenelessProjectDropCheck=a=>a.props.name==="Content",CompositorContext=React.createContext(null),CompositorProvider=({children:a,...c})=>{const[b,_]=reactExports.useState(null);return draggingNodeIdRef=b,React.createElement(CompositorContext.Provider,{value:{...c,draggingNodeId:b,setDraggingNodeId:_}},a)},getStyle=()=>`
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
  font-family: 'Arial';
}

video {
  width: 100%;
  height: 100%;
  object-fit: contain;
}

.NameBanner {
  top: 100%;
  transform: translateY(-100%);
  left: 0;
  height: 30px;
  background: linear-gradient(90deg, rgba(0, 0, 0, 0.5) 50%, rgba(0, 0, 0, 0) 100%);
  padding: 0px 0px 0px 10px;
  color: rgba(255, 255, 255, 0.9);
  font-weight: bold;
  line-height: 30px;
  width: 100%;
  font-size: 28px;
  position: absolute;
}

.item-element {
  transition: opacity 150ms ease;
}

.interactive-overlay .interactive-overlay-hover {
  opacity: 0;
  pointer-events: none;
}

.interactive-overlay:hover .interactive-overlay-hover {
  opacity: 1;
  pointer-events: all;
}

.layout-preset-zone {
  background-color: rgba(0,0,0,0.6);
  outline: 2px solid rgba(255,255,255,0.3);
}

.layout-preset-zone[data-preset-drag-target-active] {
  background-color: rgba(255,255,255,0.3);
}

.layout-preset-zone.Alert[data-preset-drag-target-active] {
  background: rgba(88, 218, 175, 0.75) !important;
}

ls-layout[layout="Presentation"][props*="\\"cover\\"\\:true"] > :first-child .NameBanner {
  top: 0% !important;
  transform: translateY(0%) !important;
}

[layout="Layered"] > [data-item] {
  transform: scale(1.003) !important;
}
[layout="Layered"] > [data-item]:nth-child(2) {
  transform: scale(1.0015) !important;
}
[layout="Layered"] > [data-item]:nth-child(1) {
  transform: scale(1) !important;
}

.logo {
  position: absolute !important;
}

#compositor-root[data-dragging] * {
  cursor: grabbing !important;
}

#drag-preview {
  position: absolute;
  z-index: 2;
  top: 0;
  left: 0;
  width: 100px;
  height: 60px;
  opacity: 0;
  background: rgba(0,0,0,0.2);
  border: 3px solid rgba(255,255,255,0.3);
  pointer-events: none;
}
#drag-preview[data-active] {
  opacity: 1;
}
#compositor-root[data-drop-target-ready] ~ #drag-preview {
  display: none;
}

[data-drag-target] {}
[data-drag-target]:hover:not([data-drag-target-active]) > .interactive-overlay {
  box-shadow: 0 0 0 3px inset rgba(255, 255, 255, 0.5);
  cursor: grab;
}
[data-drop-target] {}
[data-drop-target]:hover {}
[data-drag-target][data-drag-target-active] > .interactive-overlay {
  border: 3px solid #ffff007d;
}
[data-drag-target][data-drag-target-active]:not([data-transform-drop-self-active]) > .interactive-overlay {
  border: 3px dashed #ffff007d;
}
#compositor-root[data-drop-target-ready] [data-drag-target][data-drag-target-active] > .item-element {
  opacity: 0.6;
}
[data-layout-drop-target-active] > .interactive-overlay {
  box-shadow: 0 0 0 3px inset yellow;
}
[data-transform-drop-target-active] > .interactive-overlay {
  box-shadow: 0 0 0 3px inset white;
}
`;var BannerStyle=(a=>(a.DEFAULT="default",a.MINIMAL="minimal",a.BUBBLE="bubble",a))(BannerStyle||{});const themes={"top-left":(a=1280/1920)=>`
      .wrapper {
       top:0;
       left:0;
    }`,"top-right":(a=1280/1920)=>`
      .wrapper {
       top:0;
       right:0;
    }`,"bottom-left":(a=1280/1920)=>`
      .wrapper {
       bottom:0;
       left:0;
    }`,"bottom-right":(a=1280/1920)=>`
      .wrapper {
       bottom:0;
       right:0;
    }`,default:(a="#ABABAB",c=!0,b=1280/1920)=>{const _=color(a).lightness()<.6?"#FFF":"#000",$=color(a).lightness()<.6?"#FFF":"#000",k=color(a).lightness()<.6?"#000":"#FFF",et=nt=>nt*b+"px";return`
      .ChatOverlay {
        background: ${a} !important;
        margin-bottom: ${et(40)} !important;
        transition: 300ms ease all;
        left: 0;

        /* Default Size 4 */
        font-size: ${et(44)} !important;
        padding: ${et(40)} ${et(100)} !important;
        border-radius: ${et(20)} !important;
      }
      
      .ChatOverlay-badge-icon {
          width:${et(32)};
          height: ${et(32)};
          fill: currentcolor;
          color: ${k};
      }

       .ChatOverlay-badge-container {
          background-color:${$};
          display:flex;
          flex-direction:row;
          padding: ${et(6)} ${et(12)} ${et(6)} ${et(6)};
          border-radius: ${et(10)};
          align-items: center;
          border-bottom-left-radius: 0px !important;
          position: relative;
          border: none;
          cursor: pointer;
       }
      
       .ChatOverlay-badge-username {
          color:${k};
          padding:${et(6)};
          font-size:${et(18)};
          font-weight:700;
          text-transform: capitalize; 
       }
       
       .ChatOverlay-badge-container::before {
          content:"";
          width:15px;
          height:15px;
          background-color:${$};
          position: absolute;
          bottom:-14px;
          left:0;
          clip-path:polygon(0 100%, 12% 87%, 26% 73%, 45% 53%, 59% 40%, 71% 28%, 85% 14%, 100% 0, 0 0);
        }
       

       .ChatOverlay-avatar {
          height: ${et(120)};
          width: ${et(120)};
          left:0;
          right:0;
          top:0;
          bottom:0;
          border-radius:50%;
       }

      .Banner, .NameBanner, .ChatOverlay {
        background: ${a} !important;
        margin-bottom: ${et(40)} !important;
        transition: 300ms ease all;
        left: 0;

        /* Default Size 4 */
        font-size: ${et(44)} !important;
        padding: ${et(40)} ${et(100)} !important;
        border-top-right-radius: ${et(20)} !important;
        border-bottom-right-radius: ${et(20)} !important;
      }

      .Banner-body, .NameBanner-body, .ChatOverlay-body {
        color: ${_} !important;
        font-family: 'Roboto' !important;
        font-style: normal !important;
        font-weight: 700 !important;
        line-height: 120% !important;
      }

      .NameBanner {
        transform-origin: 0 100%;
        margin: 0 !important;
        transform: translateX(-100%);
        opacity: 0 !important;
        white-space: nowrap;
        ${c&&`
          opacity: 1 !important;
          transform: translateX(0);
        `}
      }

      .NameBanner[data-size="4"] {
        padding: ${et(40)} ${et(100)} !important;
        font-size: ${et(44)} !important;
        border-top-right-radius: ${et(20)} !important;
        border-bottom-right-radius: ${et(20)} !important;
      }
      .NameBanner[data-size="3"] {
        padding: ${et(12)} ${et(30)} !important;
        font-size: ${et(44)} !important;
        border-top-right-radius: ${et(20)} !important;
        border-bottom-right-radius: ${et(20)} !important;
      }
      .NameBanner[data-size="2"] {
        padding: ${et(12)} ${et(20)} !important;
        font-size: ${et(28)} !important;
        border-top-right-radius: ${et(16)} !important;
        border-bottom-right-radius: ${et(16)} !important;
      }
      .NameBanner[data-size="1"], .NameBanner[data-size="0"] {
        padding: ${et(8)} ${et(8)} !important;
        font-size: ${et(20)} !important;
        border-top-right-radius: ${et(8)} !important;
        border-bottom-right-radius: ${et(8)} !important;
      }
      .NameBanner[data-size="0"] {
        opacity: 0;
        transform: translateX(-100%);
      }
    `},minimal:(a="#ABABAB",c=!0,b=1280/1920)=>{const _="white",$="#fff",k="#000",et=nt=>nt*b+"px";return`

      .ChatOverlay-badge-icon {
          width:${et(32)};
          height: ${et(32)};
          fill: currentcolor;
          color: ${k};
      }

       .ChatOverlay-badge-container {
          background-color:${$};
          display:flex;
          flex-direction:row;
          padding: ${et(6)} ${et(12)} ${et(6)} ${et(6)};
          align-items: center;
          position: relative;
          border: none;
          cursor: pointer;
       }

       .ChatOverlay-badge-username {
          color:${k};
          padding:${et(6)};
          font-size:${et(18)};
          font-weight:700;
          text-transform: capitalize; 
       }

       .ChatOverlay-avatar {
          height: ${et(120)};
          width: ${et(120)};
          left:0;
          right:0;
          top:0;
          bottom:0;
          border-radius:50%;
       }


    .Banner, .NameBanner, .ChatOverlay {
        background: ${color(a).fade(color(a).alpha()*.7).toString()} !important;
        padding: ${et(40)} ${et(40)} ${et(40)} ${et(60)} !important;
        position: relative !important;
        margin-bottom: ${et(40)} !important;
        transition: 300ms ease all;
        font-size: ${et(34)} !important;
        left: 0;
      }

      .Banner:before, .NameBanner:before, .ChatOverlay:before {
        z-index: 1;
        content: "";
        position: absolute;
        left: 0;
        top: 0;
        width: 100%;
        height: 100%;
        background: rgba(0,0,0,0.6);
        transition: 300ms ease all;
        opacity: ${color(a).alpha()};
      }
      .Banner:after, .NameBanner:after, .ChatOverlay:after {
        z-index: 1;
        content: "";
        position: absolute;
        left: 0;
        top: 0;
        height: 100%;
        transition: 300ms ease all;
        width: ${et(20)};
        background: ${color(a)};
        opacity: ${color(a).alpha()};
      }
      .Banner-body, .NameBanner-body, .ChatOverlay-body {
        color: ${_} !important;
        font-family: 'Roboto' !important;
        font-style: normal !important;
        font-weight: 700 !important;
        line-height: 120% !important;
        position: relative;
        z-index: 2;
      }
      .Banner-header {
        font-size: ${et(90)};
        position: relative;
        z-index: 2;
      }
      .NameBanner {
        transform-origin: 0 100%;
        margin: 0 !important;
        transform: translateX(-100%);
        opacity: 0 !important;
        white-space: nowrap;
        ${c&&`
          opacity: 1 !important;
          transform: translateX(0);
        `}
      }

      .NameBanner[data-size="4"] {
        padding: ${et(40)} ${et(40)} ${et(40)} ${et(60)} !important;
        font-size: ${et(34)} !important;
      }
      .NameBanner[data-size="3"] {
        padding: ${et(16)} ${et(40)} ${et(16)} ${et(60)} !important;
        font-size: ${et(34)} !important;
      }
      .NameBanner[data-size="2"] {
        padding: ${et(12)} ${et(24)} ${et(12)} ${et(44)} !important;
        font-size: ${et(24)} !important;
      }
      .NameBanner[data-size="1"], .NameBanner[data-size="0"] {
        padding: ${et(12)} ${et(16)} ${et(12)} ${et(36)} !important;
        font-size: ${et(18)} !important;
      }
      .NameBanner[data-size="0"] {
        opacity: 0 !important;
        transform: translateX(-100%);
      }
    `},bubble:(a="#ABABAB",c=!0,b=1280/1920)=>{const _=color(a).lightness()<.6?"#FFF":"#000",$=color(a).lightness()<.6?"#FFF":"#000",k=color(a).lightness()<.6?"#000":"#FFF",et=nt=>nt*b+"px";return`
      .ChatOverlay-badge-icon {
          width:${et(32)};
          height: ${et(32)};
          fill: currentcolor;
          color: ${k};
      }


       .ChatOverlay-badge-container {
          background-color:${$};
          display:flex;
          flex-direction:row;
          padding: ${et(6)} ${et(12)} ${et(6)} ${et(6)};
          align-items: center;
          z-index: 1;
          border: none;
          cursor: pointer;
          top: 0;
          margin-bottom: 2px;
          margin-left: -${et(30)};
          border-radius: 30px;
       }

       .ChatOverlay-badge-username {
          color:${k};
          padding:${et(6)};
          font-size:${et(18)};
          font-weight:700;
          text-transform: capitalize; 
       }

       .ChatOverlayAvatar-container {
          height: ${et(120)};
          width: ${et(120)};
          top: 0;
       }
       .ChatOverlay-avatar {
          height: ${et(120)};
          width: ${et(120)};
          left:0;
          right:0;
          top:0;
          bottom:0;
          border-radius:50%;
       }


      .Banner, .ChatOverlay {
        transform: translateX(-50%);
        left: 50%;
        margin-bottom: ${et(40)} !important;
      }

      .Banner, .NameBanner, .ChatOverlay {
        background: ${color(a)} !important;
        color: ${_} !important;
        border-radius: 500px !important;
        transition: 300ms ease all;

        /* Default Style */
        border: 4px solid ${_} !important;
        padding: ${et(40)} ${et(80)} !important;
        font-size: ${et(40)} !important;
      }
      .Banner-body, .NameBanner-body, .ChatOverlay-body {
        color: ${_} !important;
        text-align: center !important;
        font-family: 'Roboto' !important;
        font-style: normal !important;
        font-weight: 700 !important;
        line-height: 120% !important;
      }
      .NameBanner {
        transform-origin: 0% 100%;
        transform: translateX(-100%);
        opacity: 0 !important;
        white-space: nowrap;
        ${c&&`
          opacity: 1 !important;
          transform: translateX(0);
        `}
      }

      ls-layout[layout="Presentation"][props*="\\"cover\\"\\:true"] > :first-child .NameBanner {
        top: 0% !important;
        transform: translateY(0%) !important;
        margin: ${et(20)} ${et(20)};
      }


      .NameBanner[data-size="4"] {
        padding: ${et(40)} ${et(80)} ${et(40)} ${et(80)} !important;
        font-size: ${et(40)} !important;
      }
      .NameBanner[data-size="3"] {
        padding: ${et(12)} ${et(30)} ${et(12)} ${et(30)} !important;
        font-size: ${et(40)} !important;
        margin: -${et(20)} ${et(20)};
      }
      .NameBanner[data-size="2"] {
        padding: ${et(12)} ${et(30)} ${et(12)} ${et(30)} !important;
        font-size: ${et(26)} !important;
        margin: -${et(8)} ${et(8)};
      }
      .NameBanner[data-size="1"], .NameBanner[data-size="0"] {
        padding: ${et(8)} ${et(16)} ${et(8)} ${et(16)} !important;
        font-size: ${et(18)} !important;
        border-width: ${et(2)} !important;
        margin: -${et(16)} ${et(8)};
      }
      .NameBanner[data-size="0"] {
        opacity: 0 !important;
        transform: translateX(-100%);
      }
    `}},iconStyles={twitch:{icon:"Twitch"},youtube:{icon:"YouTube"},facebook:{icon:"Facebook"}},fixLink=a=>!a.startsWith("http:")&&!a.startsWith("https:")?`https://${a}`:a,ChatOverlay={name:"LS-ChatOverlay",sourceType:"ChatOverlay",create({onUpdate:a,onEvent:c},b){const _=document.createElement("div"),$=getProject(CoreContext.state.activeProjectId),k=$.compositor.getRoot(),{x:et}=k.props.size,nt=(et??1280)/1920,ot=Mt=>Mt*nt+"px";let ht;const vt=(Mt,Dt)=>{const Rt=Mt.width/Dt.width;return Mt.height/Dt.height>=.25&&Rt>=.75?4:Rt>=.75?1:Rt>=.5?-2:Rt>.25?-3:-4};CoreContext.onInternal("ProjectChanged",()=>{const{bannerStyle:Mt}=$.props??{};Mt&&At({...ht,metadata:{...ht.metadata,bannerStyle:Mt}})});const _t=React.memo(Mt=>{var Dt,Rt,xt;return(Mt==null?void 0:Mt.type)==="emoticon"&&((Dt=Mt==null?void 0:Mt.data)==null?void 0:Dt.type)==="direct"?React.createElement("img",{src:(Rt=Mt==null?void 0:Mt.data)==null?void 0:Rt.url,style:{height:ot(36)},alt:Mt==null?void 0:Mt.text}):(Mt==null?void 0:Mt.type)==="link"?React.createElement("a",{style:{color:"#FFF",wordBreak:"break-all"},target:"_blank",rel:"noreferrer",href:fixLink((xt=Mt==null?void 0:Mt.data)==null?void 0:xt.url)},Mt==null?void 0:Mt.text):React.createElement("span",null,Mt==null?void 0:Mt.text)}),kt=Mt=>{const Dt={height:`${Mt.height}`,width:`${Mt.width}`,background:Mt.background||"transparent",display:"inline-block",verticalAlign:"middle",borderRadius:"50%",fontSize:`${Mt.fontSize}`};return React.createElement("div",{style:{...Dt,position:"relative",marginRight:Mt==null?void 0:Mt.marginRight}},React.createElement("div",{style:{left:"50%",position:"absolute",top:"50%",transform:"translate(-50%, -50%)"}},Mt.username.substring(0,2).toUpperCase()))},$t=Mt=>{const{message:Dt,id:Rt,username:xt,metadata:Jt}=Mt||{},[ar,nr]=reactExports.useState(0),{index:pr,platform:ur,avatar:Ot,bannerStyle:It}=Jt||{},ut=reactExports.useMemo(()=>iconStyles[ur],[ur]),_e=reactExports.useRef();return reactExports.useLayoutEffect(()=>{if(!_e.current)return;const tt=()=>{const dt=_e.current;dt&&nr(vt({width:dt.clientWidth,height:dt.clientHeight},{width:$.compositor.getRoot().props.size.x,height:$.compositor.getRoot().props.size.y}))},it=new ResizeObserver(dt=>{tt()});return tt(),it.observe(_e.current),()=>{_e!=null&&_e.current&&it.unobserve(_e==null?void 0:_e.current)}},[_e.current,$]),React.createElement(APIKitAnimation$1,{id:`${Rt}_${pr}`,type:"chatoverlay",enter:APIKitAnimationTypes.SLIDE_IN_LEFT,exit:APIKitAnimationTypes.SLIDE_OUT_LEFT,duration:200},React.createElement("div",{className:"ChatOverlayContainer",style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",display:"flex",flexDirection:"row",justifyContent:"flex-start",alignItems:"flex-end",marginLeft:It!==BannerStyle.BUBBLE?"5%":"0px"}},It!==BannerStyle.BUBBLE?React.createElement("div",{style:{width:"100%",display:"flex"}},Ot?React.createElement("span",{style:{marginRight:"20px"}},React.createElement("img",{src:Ot,className:"ChatOverlay-avatar"})):React.createElement(kt,{height:ot(110),width:ot(120),background:primary(500),username:xt,marginRight:20,fontSize:ot(30)}),React.createElement("div",{style:{width:"100%"}},xt&&React.createElement("button",{className:"ChatOverlay-badge-container"},(ut==null?void 0:ut.icon)&&React.createElement(Icon$1,{className:"ChatOverlay-badge-icon",name:ut==null?void 0:ut.icon}),React.createElement("div",{className:"ChatOverlay-badge-username"},xt)),React.createElement("div",{className:"ChatOverlay",style:{padding:10,background:"orange",width:"fit-content",height:"fit-content",maxWidth:"84%",position:"relative"}},Dt&&React.createElement("div",{className:"ChatOverlay-body",style:{gap:10,display:"flex",alignItems:"center",flexWrap:"wrap",verticalAlign:"middle"}},Dt.map((tt,it)=>React.createElement(_t,{key:it,...tt})))))):React.createElement("div",{style:{width:"100%",display:"flex"}},React.createElement("div",{className:"ChatOverlay",style:{padding:10,background:"orange",width:"fit-content",height:"fit-content",maxWidth:"84%",position:"relative"}},React.createElement("div",{style:{display:"flex",marginTop:`-${ot(160)}`,alignItems:"flex-end",padding:`${ot(14)} ${ot(0)} ${ot(14)} ${ot(0)}`,marginLeft:`${ar*10}px`}},Ot?React.createElement("div",{className:"ChatOverlayAvatar-container"},React.createElement("img",{src:Ot,className:"ChatOverlay-avatar"})):React.createElement("div",{className:"ChatOverlayAvatar-container"},React.createElement(kt,{height:ot(120),width:ot(120),background:primary(500),username:xt,fontSize:ot(30)})),xt&&React.createElement("button",{className:"ChatOverlay-badge-container"},(ut==null?void 0:ut.icon)&&React.createElement(Icon$1,{className:"ChatOverlay-badge-icon",name:ut==null?void 0:ut.icon}),React.createElement("div",{className:"ChatOverlay-badge-username"},xt))),Dt&&React.createElement("div",{ref:_e,className:"ChatOverlay-body",style:{gap:10,alignItems:"center",flexWrap:"wrap",verticalAlign:"middle"}},Dt.map((tt,it)=>React.createElement(_t,{key:it,...tt})))))))},Tt=createRoot(_),At=Mt=>Tt.render(React.createElement($t,{...Mt}));return a(Mt=>{const{bannerStyle:Dt=BannerStyle.DEFAULT}=$.props??{};ht={...Mt,metadata:{...Mt.metadata,bannerStyle:Dt}},At(ht)}),{root:_}}},Element={name:"Element",sourceType:"Element",create({onUpdate:a},{tagName:c="div"}){const b=document.createElement(c);return a(({tagName:_,attributes:$={},fields:k={}})=>{_==="img"?(b==null?void 0:b.src)!==$.src&&Object.keys($).forEach(et=>{b.setAttribute(et,$[et])}):Object.keys($).forEach(et=>{b.setAttribute(et,$[et])}),Object.keys(k).forEach(et=>{try{typeof b[et]=="object"?Object.assign(b[et],k[et]):b[et]=k[et]}catch{log.warn("Cannot assign field to element",{field:et})}})}),{root:b}}},OfflineIcon=()=>React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 256"},React.createElement("rect",{width:"256",height:"256",fill:"none"}),React.createElement("line",{x1:"80",y1:"152",x2:"80",y2:"200",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"16"}),React.createElement("line",{x1:"40",y1:"192",x2:"40",y2:"200",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"16"}),React.createElement("line",{x1:"48",y1:"40",x2:"208",y2:"216",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"16"}),React.createElement("line",{x1:"160",y1:"163.2",x2:"160",y2:"200",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"16"}),React.createElement("line",{x1:"160",y1:"72",x2:"160",y2:"115.63",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"16"}),React.createElement("line",{x1:"200",y1:"32",x2:"200",y2:"159.63",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"16"}),React.createElement("line",{x1:"120",y1:"119.2",x2:"120",y2:"200",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"16"})),GameSource={name:"LS-Game-Source",sourceType:"Game",props:{},useSource(a,c){return a.find(b=>isMatch(b.props,c.sourceProps))},create({onUpdate:a,onNewSource:c,onRemove:b},_){const $=document.createElement("div");getProject(CoreContext.state.activeProjectId),Object.assign($.style,{position:"relative"});let k,et=_;const nt=({props:vt,source:_t})=>{var Rt;const kt=reactExports.useRef(null),{volume:$t=1,isMuted:Tt=!1}=vt||{},At=Tt,Mt=!(vt!=null&&vt.isHidden)&&((Rt=_t==null?void 0:_t.props)==null?void 0:Rt.videoEnabled),Dt=reactExports.useCallback(()=>{kt.current&&kt.current.play().catch(()=>{const xt=()=>{var Jt;(Jt=kt.current)==null||Jt.play().catch(()=>{}),document.removeEventListener("click",xt)};document.addEventListener("click",xt,{once:!0})})},[]);return reactExports.useEffect(()=>{kt.current&&(_t!=null&&_t.value&&_t.value!==kt.current.srcObject?(kt.current.srcObject=_t.value,Dt()):_t!=null&&_t.value||(kt.current.srcObject=null))},[_t==null?void 0:_t.value]),reactExports.useEffect(()=>{kt.current&&(kt.current.volume=$t)},[$t]),React.createElement("div",{style:{position:"relative",display:"flex",height:"100%",width:"100%"}},React.createElement("div",{style:{background:"#222",position:"absolute",height:"100%",width:"100%",fontSize:"43px",color:"rgba(255,255,255,0.6)",display:"flex",alignItems:"center",justifyContent:"center",opacity:Mt?"0":"1"}},!!_t&&React.createElement("div",{style:{textTransform:"uppercase",fontSize:20,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",lineHeight:"1.2em",textAlign:"center",gap:10}},React.createElement("div",{style:{color:"gray",width:40,height:40}},React.createElement(OfflineIcon,null)),"Game Source Offline")),React.createElement("div",{style:{position:"relative",display:"flex",height:"100%",width:"100%"}},React.createElement("video",{ref:kt,autoPlay:!0,muted:At,disablePictureInPicture:!0,playsInline:!0,style:{left:"50%",top:"50%",position:"relative",transform:"translate3d(-50%, -50%, 0)",height:"100%",opacity:Mt?"1":"0",objectFit:"cover",background:"rgba(0,0,0,0.6)"}})))},ot=createRoot($),ht=()=>ot.render(React.createElement(nt,{source:k,props:et}));return a(vt=>{et=vt,ht()}),c(vt=>{k=vt,ht()}),b(vt=>{et=vt,ht()}),{root:$}}},Logo={name:"LS-Logo",sourceType:"Logo",create({onUpdate:a},{sourceProps:c}){const b=document.createElement("div"),$=getProject(CoreContext.state.activeProjectId).compositor.getRoot(),{x:k}=$.props.size,et=(k??1280)/1920,nt=_t=>_t*et+"px",ot=({source:_t})=>{var ar;const{src:kt,meta:$t}=(_t==null?void 0:_t.sourceProps)||{},{id:Tt}=_t||{},[At,Mt]=React.useState(!1);reactExports.useEffect(()=>{Mt(!1)},[Tt]);const{offsetX:Dt=40,offsetY:Rt=40,height:xt=135,width:Jt=240}=($t==null?void 0:$t.style)||{};return React.createElement(APIKitAnimation$1,{type:"logo",id:Tt,enter:APIKitAnimationTypes.FADE_IN,exit:APIKitAnimationTypes.FADE_OUT,duration:400},React.createElement("div",{style:{opacity:At?1:0,width:"100%",height:"100%"},className:"logo-transition"},kt&&React.createElement("div",{className:"logo wrapper",style:{padding:`${nt(Rt)} ${nt(Dt)}`}},React.createElement("img",{style:{height:"100%",width:"100%",maxHeight:xt?nt(xt):"none",maxWidth:Jt?nt(Jt):"none",...(ar=c==null?void 0:c.meta)==null?void 0:ar.style,...$t==null?void 0:$t.style},src:kt,onLoad:()=>Mt(!0)}))))},ht=createRoot(b),vt=_t=>ht.render(React.createElement(ot,{source:_t}));return a(_t=>{vt({..._t})}),{root:b}}},Iframe=({url:a,allowFullScreen:c,position:b,display:_,height:$,width:k,overflow:et,styles:nt,onLoad:ot,onMouseOver:ht,onMouseOut:vt,scrolling:_t="no",id:kt,frameBorder:$t,ariaHidden:Tt,sandbox:At,allow:Mt,className:Dt,title:Rt,ariaLabel:xt,ariaLabelledby:Jt,name:ar,target:nr,loading:pr,importance:ur,referrerpolicy:Ot,allowpaymentrequest:It,src:ut,key:_e,iframeRef:tt})=>{const it=Object.assign({src:ut||a,target:nr||null,style:{position:b||null,display:_||"initial",overflow:et||null},scrolling:_t||null,allowpaymentrequest:It||null,importance:ur||null,sandbox:At&&[...At].join(" ")||null,loading:pr||null,styles:nt||null,name:ar||null,className:Dt||null,allowFullScreen:"allowFullScreen",referrerpolicy:Ot||null,title:Rt||null,allow:Mt||null,id:kt||null,"aria-labelledby":Jt||null,"aria-hidden":Tt||null,"aria-label":xt||null,width:k||"100%",height:$||"100%",onLoad:ot||null,onMouseOver:ht||null,onMouseOut:vt||null,key:_e||"iframe"});let dt=Object.create(null);for(let lt of Object.keys(it))it[lt]!=null&&(dt[lt]=it[lt]);for(let lt of Object.keys(dt.style))dt.style[lt]==null&&delete dt.style[lt];if(dt.styles)for(let lt of Object.keys(dt.styles))dt.styles.hasOwnProperty(lt)&&(dt.style[lt]=dt.styles[lt]),Object.keys(dt.styles).pop()==lt&&delete dt.styles;if(c)if("allow"in dt){const lt=dt.allow.replace("fullscreen","");dt.allow=`fullscreen ${lt.trim()}`.trim()}else dt.allow="fullscreen";return $t>=0&&(dt.style.hasOwnProperty("border")||(dt.style.border=$t)),React.createElement("iframe",{...dt,ref:tt,style:{colorScheme:"normal",...dt.style}})},Iframe$1=Iframe,Overlay={name:"LS-Overlay",sourceType:"Overlay",create({onUpdate:a,onRemove:c},{sourceProps:b}){c(()=>{clearInterval(k)});const _=document.createElement("div"),$=getProject(CoreContext.state.activeProjectId).role;let k;const et=React.memo(({source:kt,setStartAnimation:$t})=>{const{src:Tt,meta:At,height:Mt,width:Dt}=(kt==null?void 0:kt.sourceProps)||{},Rt=React.useRef(null);reactExports.useEffect(()=>{Rt.current&&(Rt.current.style.removeProperty("transformOrigin"),Rt.current.style.removeProperty("transform"))},[Tt]);const xt=()=>{if(Rt.current){const ar=getProject(CoreContext.state.activeProjectId).compositor.getRoot(),{x:nr,y:pr}=ar.props.size;let ur=Rt.current.clientWidth,Ot=Rt.current.clientHeight,It;ur&&Ot?It=Math.min(nr/ur,pr/Ot):It=1,Rt.current.style.willChange="transform",Rt.current.style.transformOrigin="0 0",Rt.current.style.transform=`scale(${It}) translateZ(0)`,$t(!0)}};return React.createElement(React.Fragment,null,React.createElement(Iframe$1,{key:kt.id,url:Tt,frameBorder:0,iframeRef:Rt,height:Mt,width:Dt,onLoad:xt,styles:{...At==null?void 0:At.style}}))}),nt=React.memo(({source:kt,setStartAnimation:$t})=>{var It;const{src:Tt,type:At,meta:Mt,loop:Dt}=(kt==null?void 0:kt.sourceProps)||{},{id:Rt,sourceType:xt}=kt||{},[Jt,ar]=React.useState(null),nr=React.useRef(null);console.log("Updated current time",(It=nr==null?void 0:nr.current)==null?void 0:It.currentTime);const pr=React.useCallback(ut=>{nr.current=ut,ar(ut?ut.id:null)},[]),ur=React.useCallback(()=>{nr!=null&&nr.current&&nr.current.play().catch(()=>{var ut;nr.current.muted=!0,(ut=nr.current)==null||ut.play()})},[Tt]),Ot=React.useCallback(()=>{k&&clearInterval(k),hasPermission($,Permission.UpdateProject)&&trigger$1("VideoEnded",{id:Rt,category:At})},[Tt]);return React.useEffect(()=>{Mt&&(nr!=null&&nr.current)&&Jt&&hasPermission($,Permission.ManageSelf)&&Mt!=null&&Mt.time&&(nr.current.currentTime=Number(Mt==null?void 0:Mt.time))},[Mt==null?void 0:Mt.time,Jt]),React.useEffect(()=>()=>{k&&clearInterval(k)},[Rt]),React.useEffect(()=>{Jt?nr.current&&(nr.current.src=Tt,nr.current.play().catch(()=>{nr.current.muted=!0,nr.current.play()}),hasPermission($,Permission.UpdateProject)&&(k=setInterval(()=>{if(nr.current.duration){const ut=nr.current.duration-nr.current.currentTime;trigger$1("VideoTimeUpdate",{category:xt,id:Rt,time:Math.floor(ut)})}},1e3))):k&&clearInterval(k)},[Jt]),React.createElement(React.Fragment,{key:Rt},Tt&&React.createElement("video",{loop:Dt,id:Rt,ref:pr,style:{...b.meta.style,...Mt.style},onLoadedData:ur,onEnded:Ot,onCanPlay:()=>$t(!0)}))}),ot=React.memo(({source:kt,setStartAnimation:$t})=>{const{src:Tt,meta:At}=(kt==null?void 0:kt.sourceProps)||{},{id:Mt}=kt||{};return React.createElement(React.Fragment,{key:Mt},Tt&&React.createElement("img",{style:{...b.meta.style,...At.style},src:Tt,onLoad:()=>$t(!0)}))}),ht=React.memo(({source:kt})=>{const{type:$t}=(kt==null?void 0:kt.sourceProps)||{},{id:Tt}=kt||{},[At,Mt]=React.useState(!1);return reactExports.useEffect(()=>{Mt(!1)},[Tt]),React.createElement(APIKitAnimation$1,{id:Tt,type:"overlay",enter:APIKitAnimationTypes.FADE_IN,exit:APIKitAnimationTypes.FADE_OUT,duration:400},React.createElement("div",{style:{opacity:At?1:0,height:"100%",width:"100%"},className:"overlayContainer overlay-transition"},Tt&&$t==="image"&&React.createElement(ot,{source:kt,setStartAnimation:Mt}),Tt&&$t==="video"&&React.createElement(nt,{source:kt,setStartAnimation:Mt}),Tt&&$t==="custom"&&React.createElement(et,{source:kt,setStartAnimation:Mt})))}),vt=createRoot(_),_t=kt=>vt.render(React.createElement(React.Fragment,null,React.createElement(ht,{source:kt})));return a(kt=>{_t({...kt})}),{root:_}}},RTMPSource={name:"LS-RTMP-Source",sourceType:"RTMP",props:{},useSource(a,c){return a.find(b=>isMatch(b.props,c.sourceProps))},create({onUpdate:a,onNewSource:c,onRemove:b},_){const $=document.createElement("div"),k=getProject(CoreContext.state.activeProjectId);getProjectRoom(CoreContext.state.activeProjectId),Object.assign($.style,{position:"relative"});let et,nt=_;const ot=(kt,$t)=>{const Tt=kt/$t.width;return Tt>=.5?3:Tt>.25?2:Tt>.15?1:0},ht=({props:kt,source:$t})=>{var nr;const Tt=reactExports.useRef(),{volume:At=1,isHidden:Mt=!1}=kt||{},[Dt,Rt]=reactExports.useState(0),xt=kt==null?void 0:kt.isMuted,Jt=!(kt!=null&&kt.isHidden)&&((nr=$t==null?void 0:$t.props)==null?void 0:nr.videoEnabled),ar=reactExports.useCallback(()=>{Tt.current&&Tt.current.play().catch(()=>{const pr=()=>{var ur;(ur=Tt.current)==null||ur.play().catch(()=>{}),document.removeEventListener("click",pr)};document.addEventListener("click",pr,{once:!0})})},[]);return reactExports.useEffect(()=>{Tt.current&&($t!=null&&$t.value&&($t==null?void 0:$t.value)!==Tt.current.srcObject?(Tt.current.srcObject=$t==null?void 0:$t.value,ar()):$t!=null&&$t.value||(Tt.current.srcObject=null))},[$t==null?void 0:$t.value]),reactExports.useLayoutEffect(()=>{if(!Tt.current)return;const pr=()=>{const Ot=Tt.current;Ot&&Rt(ot(Ot.clientWidth,{width:k.compositor.getRoot().props.size.x,height:k.compositor.getRoot().props.size.y}))},ur=new ResizeObserver(Ot=>{pr()});return pr(),ur==null||ur.observe(Tt.current),()=>{Tt.current&&(ur==null||ur.unobserve(Tt.current))}},[]),reactExports.useEffect(()=>{Tt.current&&(Tt.current.volume=At)},[At]),React.createElement("div",{style:{position:"relative",display:"flex",height:"100%",width:"100%"}},React.createElement("div",{style:{background:"#222",position:"absolute",height:"100%",width:"100%",fontSize:"43px",color:"rgba(255,255,255,0.6)",display:"flex",alignItems:"center",justifyContent:"center",opacity:Jt?"0":"1"}},!!$t&&React.createElement("div",{style:{borderRadius:"50%",background:"#555",width:"70px",height:"70px",textTransform:"uppercase",display:"flex",alignItems:"center",justifyContent:"center",lineHeight:"1em"}},"RTMP")),React.createElement("div",{style:{position:"relative",display:"flex",height:"100%",width:"100%"}},React.createElement("video",{ref:Tt,autoPlay:!0,muted:xt,disablePictureInPicture:!0,playsInline:!0,style:{left:"50%",top:"50%",position:"relative",transform:"translate3d(-50%, -50%, 0)",height:"100%",opacity:Jt?"1":"0",objectFit:"cover",background:"rgba(0,0,0,0.6)"}})))},vt=createRoot($),_t=()=>vt.render(React.createElement(ht,{source:et,props:nt}));return a(kt=>{nt=kt,_t()}),c(kt=>{et=kt,_t()}),b(kt=>{nt=kt,_t()}),{root:$}}},RoomParticipant={name:"LS-Room-Participant",sourceType:"RoomParticipant",props:{isMuted:{type:Boolean,required:!1,default:!1},volume:{type:Number,required:!1,default:1}},useSource(a,c){return a.find(b=>isMatch(b.props,c.sourceProps))},create({onUpdate:a,onNewSource:c,onRemove:b},_){const $=document.createElement("div"),k=getProject(CoreContext.state.activeProjectId),et=getProjectRoom(CoreContext.state.activeProjectId);Object.assign($.style,{position:"relative"});let nt,ot=_;const ht=($t,Tt)=>{const At=$t/Tt.width;return At>=.5?3:At>.25?2:At>.15?1:0},vt=({props:$t,source:Tt})=>{var Ot,It,ut;const At=reactExports.useRef(),{volume:Mt=1,isHidden:Dt=!1,isAudioOnly:Rt=!1}=$t||{},[xt,Jt]=reactExports.useState(0),nr=(Tt==null?void 0:Tt.id)===(et==null?void 0:et.participantId)||((Ot=Tt==null?void 0:Tt.props)==null?void 0:Ot.participantId)===(et==null?void 0:et.participantId)||(Tt==null?void 0:Tt.id.startsWith(et==null?void 0:et.participantId))||($t==null?void 0:$t.isMuted),pr=!Rt&&!Dt&&((It=Tt==null?void 0:Tt.props)==null?void 0:It.videoEnabled),ur=reactExports.useCallback(()=>{At.current&&At.current.play().catch(()=>{const _e=()=>{var tt;(tt=At.current)==null||tt.play().catch(()=>{}),document.removeEventListener("click",_e)};document.addEventListener("click",_e,{once:!0})})},[]);return reactExports.useEffect(()=>{At.current&&(Tt!=null&&Tt.value&&(Tt==null?void 0:Tt.value)!==At.current.srcObject?(At.current.srcObject=Tt==null?void 0:Tt.value,ur()):Tt!=null&&Tt.value||(At.current.srcObject=null))},[Tt==null?void 0:Tt.value]),reactExports.useLayoutEffect(()=>{if(!At.current)return;const _e=()=>{const it=At.current;it&&Jt(ht(it.clientWidth,{width:k.compositor.getRoot().props.size.x,height:k.compositor.getRoot().props.size.y}))},tt=new ResizeObserver(it=>{_e()});return _e(),tt==null||tt.observe(At.current),()=>{At.current&&(tt==null||tt.unobserve(At.current))}},[]),reactExports.useEffect(()=>{At.current&&(At.current.volume=Mt)},[Mt]),React.createElement("div",{style:{position:"relative",display:"flex",...Rt?{height:"0px",width:"0px"}:{height:"100%",width:"100%"}}},React.createElement("div",{style:{background:"#222",position:"absolute",height:"100%",width:"100%",fontSize:"43px",color:"rgba(255,255,255,0.6)",display:"flex",alignItems:"center",justifyContent:"center",opacity:pr||Rt?"0":"1"}},(Tt==null?void 0:Tt.props.displayName)&&!($t!=null&&$t.isAudioOnly)&&React.createElement("div",{style:{borderRadius:"50%",background:"#555",width:"70px",height:"70px",textTransform:"uppercase",display:"flex",alignItems:"center",justifyContent:"center",lineHeight:"1em"}},(Tt==null?void 0:Tt.props.displayName.slice(0,1))||"")),React.createElement("div",{style:{position:"relative",display:"flex",height:"100%",width:"100%",...!!((ut=Tt==null?void 0:Tt.props)!=null&&ut.mirrored)&&{transform:"scaleX(-1)"}}},React.createElement("video",{ref:At,autoPlay:!0,muted:nr,disablePictureInPicture:!0,playsInline:!0,style:{left:"50%",top:"50%",position:"relative",transform:"translate3d(-50%, -50%, 0)",height:"100%",opacity:pr?"1":"0",objectFit:(Tt==null?void 0:Tt.props.type)==="screen"?"contain":"cover",background:"rgba(0,0,0,0.6)"}})),(Tt==null?void 0:Tt.props.displayName)&&!Rt&&React.createElement("div",{className:"NameBannerContainer",style:{width:"100%",height:"100%",position:"absolute"}},React.createElement("div",{className:"NameBanner","data-size":xt,style:{padding:"12px 30px",width:"fit-content",height:"fit-content",top:"100%",transform:"translateY(-100%)",left:0}},React.createElement("div",{className:"NameBanner-body"},Tt.props.displayName))))},_t=createRoot($),kt=()=>_t.render(React.createElement(vt,{source:nt,props:ot}));return a($t=>{ot=$t,kt()}),c($t=>{nt=$t,kt()}),b($t=>{ot=$t,kt()}),{root:$}}},Alert={name:"LS-Alert",sourceType:"Alert",create({onUpdate:a}){const c=document.createElement("div"),b=({source:k})=>{const{id:et}=k||{},[nt,ot]=React.useState(!1);reactExports.useEffect(()=>{ot(!1)},[et]);const{src:ht,meta:vt,height:_t,width:kt,settings:$t}=(k==null?void 0:k.sourceProps)||{},Tt=React.useRef(null),At=React.useMemo(()=>Object.entries($t).map(Dt=>Dt.join("=")).concat(["mode=engine"]).join("&"),[$t]),Mt=React.useCallback(()=>{Tt.current&&ot(!0)},[]);return React.createElement(APIKitAnimation$1,{id:et,type:"alert",enter:APIKitAnimationTypes.FADE_IN,exit:APIKitAnimationTypes.FADE_OUT,duration:400},React.createElement("div",{style:{opacity:nt?1:0}},React.createElement(Iframe$1,{key:k.id,url:`${ht}?${At}`,frameBorder:0,iframeRef:Tt,height:_t,width:kt,onLoad:Mt,styles:{...vt==null?void 0:vt.style}})))},_=createRoot(c),$=k=>_.render(React.createElement(React.Fragment,null,React.createElement(b,{source:k})));return a(k=>{$({...k})}),{root:c}}},Transforms=Object.freeze(Object.defineProperty({__proto__:null,Alert,Background,Banner,ChatOverlay,Element,GameSource,Logo,Overlay,RTMPSource,RoomParticipant},Symbol.toStringTag,{value:"Module"}));class EngineWebsocket{constructor(c,b){_n(this,"ws",null);_n(this,"sources",new Set);this.connectSource=c,this.disconnectSource=b,this.connect=this.connect.bind(this),this.handleMessage=this.handleMessage.bind(this)}getConnectionString(){if(!("apistreamCompositor"in window))return"ws://127.0.0.1:8000";const{eventsConfig:c}=window.apistreamCompositor;return`ws${c.secure?"s":""}://${c.hostname}:${c.port}${c.token?`?token=${c.token}`:""}`}connect(){const c=this.handleMessage.bind(this);this.ws=new WebSocket(this.getConnectionString()),this.ws.addEventListener("message",c),this.ws.addEventListener("error",b=>{console.error("Unable to connect to websocket",b)}),this.ws.addEventListener("close",()=>{var b,_;(b=this.ws)==null||b.removeEventListener("message",c);try{(_=this.ws)==null||_.close(),this.ws=null}catch{}setTimeout(()=>{this.connect()},1e3)})}disconnect(){var c,b;(c=this.ws)!=null&&c.OPEN&&((b=this.ws)==null||b.close())}handleMessage(c){try{const b=JSON.parse(c.data);if(b.name==="state"){this.sources.clear(),console.info("[Engine]: state",b.payload);for(const _ of b.payload.sources)_.connected&&(this.sources.has(_.id)||(this.sources.add(_.id),this.connectSource(_.id)))}else b.name==="source.disconnect"?(console.info("[Engine]: source disconnect",b.payload.id),this.sources.delete(b.payload.id),this.disconnectSource(b.payload.id)):b.name==="source.connect"&&(console.info("[Engine]: source connect",b.payload.id),this.sources.add(b.payload.id),this.connectSource(b.payload.id))}catch(b){console.error("unable to handle message: ",b)}}}const BroadcastPhase=lib$2.LiveApiModel.ProjectBroadcastPhase,{trigger,triggerInternal}=CoreContext,EventType=lib$2.LiveApiModel.EventType,EventSubType=lib$2.LiveApiModel.EventSubType;let engineSocket;const init=async(a={})=>{prepareInternalEvents();const c=a.env||"prod",b=a.logLevel||"Warn";log.getLogger("livekit").setLevel(b),log.setLevel(b),log.info("Initializing Studio SDK...");const{layouts:$=[],transforms:k=[],sources:et=[],defaultTransforms:nt={},useLatestRenderer:ot=!1,guestToken:ht,rendererVersion:vt}=a,_t=new lib$2.ApiStream({sdkVersion:CoreContext.version,env:c,logLevel:b}),kt=config$2(),$t=start({dbAdapter:compositorAdapter,transformSettings:{defaultTransforms:{...nt,...kt.defaults.transforms}}});CoreContext.config=kt,CoreContext.clients=_t,CoreContext.compositor=$t,CoreContext.logLevel=b,CoreContext.Request=await __vitePreload(()=>import("./requests-D9em64xS.js"),[]),CoreContext.Command=await __vitePreload(()=>import("./commands-d4_09lhN.js"),[]),CoreContext.rendererVersion=ot?"latest-v2":vt||CoreContext.version,window.__StudioKit={...CoreContext},$t&&($t.registerSource([...Object.values(Sources),...et]),$t.registerTransform([...Object.values(Transforms),...k]),$t.registerLayout([...Object.values(Layouts),...$]));const Tt=await _t.load(ht);let At;Tt&&await _t.LiveApi().project.getProject({...Tt}).then(Rt=>hydrateProject(Rt.project,Tt.role)).then(async Rt=>{setAppState({user:{id:Tt.collectionId,props:{},name:null,metadata:{}},sources:[],projects:[Rt],activeProjectId:null}),Rt.isInitial=!0,At=await CoreContext.Command.setActiveProject({projectId:Rt.id})}),_t.LiveApi().on(EventType.EVENT_TYPE_COLLECTION,(Rt,xt)=>{switch(log.info("Received: Collection event",xt,Rt),xt){case EventSubType.EVENT_SUB_TYPE_UPDATE:{triggerInternal("UserChanged",Rt.update.collection);return}}}),_t.LiveApi().on(EventType.EVENT_TYPE_DESTINATION,(Rt,xt)=>{switch(log.info("Received: Destination event",xt,Rt),xt){case EventSubType.EVENT_SUB_TYPE_CREATE:{const{destination:Jt}=Rt.create;triggerInternal("DestinationAdded",Jt);return}case EventSubType.EVENT_SUB_TYPE_UPDATE:{const{destination:Jt}=Rt.update;triggerInternal("DestinationChanged",Jt);return}case EventSubType.EVENT_SUB_TYPE_DELETE:{triggerInternal("DestinationRemoved",Rt.delete);return}}}),_t.LiveApi().on(EventType.EVENT_TYPE_SOURCE,(Rt,xt)=>{switch(log.info("Received: Source event",xt,Rt),xt){case EventSubType.EVENT_SUB_TYPE_CREATE:{triggerInternal("SourceAdded",Rt.create.source);return}case EventSubType.EVENT_SUB_TYPE_UPDATE:{triggerInternal("SourceChanged",Rt.update.source);return}case EventSubType.EVENT_SUB_TYPE_DELETE:{triggerInternal("SourceRemoved",Rt.delete.sourceId);return}case EventSubType.EVENT_SUB_TYPE_ADD:{triggerInternal("ProjectSourceAdded",{projectId:Rt.add.projectId,source:Rt.add.source});return}case EventSubType.EVENT_SUB_TYPE_REMOVE:{triggerInternal("ProjectSourceRemoved",{projectId:Rt.remove.projectId,sourceId:Rt.remove.sourceId});return}}}),_t.LiveApi().on(EventType.EVENT_TYPE_PROJECT,(Rt,xt)=>{var Jt;switch(log.info("Received: Project event",xt,Rt),xt){case EventSubType.EVENT_SUB_TYPE_CREATE:{const ar=Rt.create.project;if(getProject(ar.projectId))return;triggerInternal("ProjectAdded",ar);return}case EventSubType.EVENT_SUB_TYPE_UPDATE:{const{project:ar}=Rt.update,nr=getProject(ar.projectId);if(!nr)return;triggerInternal("ProjectChanged",{project:ar,phase:nr.videoApi.phase});return}case EventSubType.EVENT_SUB_TYPE_DELETE:{triggerInternal("ProjectRemoved",{projectId:Rt.delete.projectId});return}case EventSubType.EVENT_SUB_TYPE_STATE:{const ar=getProject((Jt=Rt.state)==null?void 0:Jt.projectId);if(!ar)return;let nr=Rt.state.broadcastId;if(Rt.state.error&&trigger("BroadcastError",{projectId:ar.id,broadcastId:Rt.state.broadcastId,error:Rt.state.error}),Rt.state.phase){const pr=Rt.state.phase;pr===BroadcastPhase.PROJECT_BROADCAST_PHASE_RUNNING?trigger("BroadcastStarted",{projectId:ar.id,broadcastId:Rt.state.broadcastId}):pr===BroadcastPhase.PROJECT_BROADCAST_PHASE_STOPPED&&(nr=null,trigger("BroadcastStopped",{projectId:ar.id,broadcastId:Rt.state.broadcastId}))}triggerInternal("ProjectChanged",{project:ar.videoApi.project,phase:Rt.state.phase,broadcastId:nr});return}}}),_t.LayoutApi().on(lib$2.LayoutApiModel.EventType.EVENT_TYPE_LAYER,(Rt,xt)=>{var Jt;if(xt===lib$2.LayoutApiModel.EventSubType.EVENT_SUB_TYPE_CREATE){log.debug("Received: Node Insert",Rt.create);const{connectionId:ar,layoutId:nr}=Rt.create.requestMetadata;if(CoreContext.connectionId===ar)return;const pr=layerToNode(Rt.create),ur=getProjectByLayoutId(nr);if(ur){const Ot=[pr,...ur==null?void 0:ur.compositor.nodes.map(toDataNode$1)],It=toSceneTree(Ot,pr.id);ur.compositor.local.insert(It),triggerInternal("NodeAdded",{projectId:ur.id,nodeId:pr.id})}}else if(xt===lib$2.LayoutApiModel.EventSubType.EVENT_SUB_TYPE_UPDATE){log.debug("Received: Node Update",Rt.update);const{connectionId:ar,layoutId:nr,updateVersions:pr={}}=((Jt=Rt.update)==null?void 0:Jt.requestMetadata)||{};if(CoreContext.connectionId===ar)return;const ur=layerToNode(Rt.update);if((latestUpdateVersion[ur.id]||0)>pr[ur.id])return log.info("Ignoring node update - updateID is less than latest.");latestUpdateVersion[ur.id]=pr[ur.id];const It=getProjectByLayoutId(nr);It&&(It.compositor.local.update(Rt.update.id,ur.props,ur.childIds),triggerInternal("NodeChanged",{projectId:It.id,nodeId:ur.id}))}else if(xt===lib$2.LayoutApiModel.EventSubType.EVENT_SUB_TYPE_DELETE){log.debug("Received: Node Delete",Rt.delete);const{connectionId:ar,layoutId:nr}=Rt.delete.requestMetadata;if(CoreContext.connectionId===ar)return;const pr=getProjectByLayoutId(nr);pr&&(pr.compositor.local.remove(Rt.delete.id),triggerInternal("NodeRemoved",{projectId:pr.id,nodeId:Rt.delete.id}))}else if(xt===lib$2.LayoutApiModel.EventSubType.EVENT_SUB_TYPE_BATCH){log.debug("Received: Node Batch Update",Rt.batch);const{connectionId:ar,layoutId:nr,updateVersions:pr={}}=Rt.batch.requestMetadata;if(CoreContext.connectionId===ar)return;const ur=getProjectByLayoutId(nr);Rt.batch.layers.forEach(Ot=>{try{const[It,ut]=Object.entries(Ot)[0];if(It==="create"){const _e=layerToNode(ut);ur&&(ur.compositor.local.insert(_e),triggerInternal("NodeAdded",{projectId:ur.id,nodeId:_e.id}))}else if(It==="update"){const _e=layerToNode(ut);if((latestUpdateVersion[_e.id]||0)>pr[_e.id])return log.info("Ignoring node update - updateID is less than latest.");latestUpdateVersion[_e.id]=pr[_e.id],ur&&(ur.compositor.local.update(_e.id,_e.props,_e.childIds),triggerInternal("NodeChanged",{projectId:ur.id,nodeId:_e.id}))}else It==="delete"&&ur&&(ur.compositor.local.remove(ut.id),triggerInternal("NodeRemoved",{projectId:ur.id,nodeId:ut.id}))}catch(It){log.warn("Error handling batch item",It,{item:Ot})}}),ur&&triggerInternal("NodeChanged",{projectId:ur.id,nodeId:ur==null?void 0:ur.compositor.getRoot().id})}});const Mt=(Rt={},xt)=>{const{displayName:Jt,role:ar,maxDuration:nr=CoreContext.config.defaults.guestTokenDuration,projectId:pr=CoreContext.state.activeProjectId}=Rt,ur=getProject(pr),Ot=Jt?{direct:{displayName:Jt}}:{exchange:{maxDuration:nr}};return _t.LiveApi().authentication.createGuestCode({projectId:pr,token:Ot,url:xt,collectionId:ur.videoApi.project.collectionId,maxDuration:nr,role:ar||lib$2.LiveApiModel.Role.ROLE_GUEST})},Dt=(Rt={},xt)=>{const{displayName:Jt,role:ar,maxDuration:nr=CoreContext.config.defaults.guestTokenDuration,projectId:pr=CoreContext.state.activeProjectId}=Rt,ur=getProject(pr),Ot=Jt?{direct:{displayName:Jt}}:{exchange:{maxDuration:nr}};return _t.LiveApi().authentication.createGuestAccessToken({projectId:pr,token:Ot,url:xt,collectionId:ur.videoApi.project.collectionId,maxDuration:nr,role:ar||lib$2.LiveApiModel.Role.ROLE_GUEST})};return{...omit(CoreContext,["clients","config","connectionId","Request","state","trigger"]),createDemoToken:async()=>(console.warn("createDemoToken() is currently unavailable."),""),createPreviewLink:async(Rt={})=>{const{maxDuration:xt,projectId:Jt=CoreContext.state.activeProjectId}=Rt,ar=getProject(Jt),nr=ar.videoApi.project.composition.studioSdk.rendererUrl;return(await _t.LiveApi().authentication.createGuestAccessToken({projectId:Jt,token:{direct:{displayName:"Preview"}},url:nr,collectionId:ar.videoApi.project.collectionId,maxDuration:xt||CoreContext.config.defaults.previewTokenDuration,role:lib$2.LiveApiModel.Role.ROLE_VIEWER})).url},createGuestLink:async(Rt,xt={})=>(await Mt(xt,Rt)).guestCode.linkUrl,deleteGuestLink:async Rt=>{await _t.LiveApi().authentication.deleteGuestCode({code:Rt})},getGuestLinks:async(Rt={})=>{const{projectId:xt=CoreContext.state.activeProjectId}=Rt,Jt=getProject(xt);return await _t.LiveApi().authentication.getGuestCodes({projectId:xt,collectionId:Jt==null?void 0:Jt.videoApi.project.collectionId})},createGuestToken:async(Rt={})=>(await Dt(Rt)).accessToken,initialProject:At,getProject:Rt=>toBaseProject(getProject(Rt)),load,render}};CoreContext.on("ActiveProjectChanged",({projectId:a})=>{toBaseProject(getProject(a)).role===Role.ROLE_RENDERER&&(log.info("Connecting to engine websocket..."),engineSocket&&(log.info("Disconnecting existing engine websocket..."),engineSocket.disconnect(),engineSocket=null),engineSocket||(log.info("Creating new engine websocket..."),engineSocket=setupEngineWebsocket(async function(_){triggerInternal("SourceConnected",_)},async function(_){triggerInternal("SourceDisconnected",_)}),engineSocket.connect()))});function setupEngineWebsocket(a,c){return new EngineWebsocket(a,c)}const load=async(a,c)=>{let b=getBaseUser();if(b)return log.info("Attempted to load user again - returning existing user"),b;if(!a){log.warn("Access token required for load()");return}log.info("Loading user..."),await CoreContext.clients.load(a);const $=await CoreContext.Request.loadUser(c);return setAppState({user:$.user,sources:$.sources,projects:$.projects,activeProjectId:null}),b=getBaseUser(),trigger("UserLoaded",b),b},hostname=window.location.hostname,prodHosts=["cloud.golightstream.com","api.stream"],getEnv=()=>prodHosts.some(c=>hostname.includes(c))?"prod":"stage",run=async()=>{const a=await init({env:getEnv(),logLevel:"Debug"}),c=a==null?void 0:a.initialProject;if(!c)return console.warn("Project not available");await c.joinRoom(),a.render({containerEl:document.getElementById("root"),projectId:c.id,dragAndDrop:!1})};run();export{CoreContext as C,ProjectBroadcastPhase as P,getAccessTokenData as a,getProject as b,toBaseProject as c,getRoom as d,trigger$1 as e,toBaseDestination as f,getUser as g,hydrateProject as h,jwtDecode as j,triggerInternal$1 as t,webrtcManager as w};
//# sourceMappingURL=compositor-KEHA_Nsj.js.map
