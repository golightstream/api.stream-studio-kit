<!DOCTYPE html><html class="default"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>Studio Kit - v2.0.4</title><meta name="description" content="Documentation for Studio Kit - v2.0.4"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="assets/style.css"/><link rel="stylesheet" href="assets/highlight.css"/><link rel="stylesheet" href="assets/custom.css"/><script async src="assets/search.js" id="search-script"></script></head><body><script>document.body.classList.add(localStorage.getItem("tsd-theme") || "os")</script><header><div class="tsd-page-toolbar"><div class="container"><div class="table-wrap"><div class="table-cell" id="tsd-search" data-base="."><div class="field"><label for="tsd-search-field" class="tsd-widget search no-caption">Search</label><input type="text" id="tsd-search-field"/></div><ul class="results"><li class="state loading">Preparing search index...</li><li class="state failure">The search index is not available</li></ul><a href="index.html" class="title">Studio Kit - v2.0.4</a></div><div class="table-cell" id="tsd-widgets"><div id="tsd-filter"><a href="#" class="tsd-widget options no-caption" data-toggle="options">Options</a><div class="tsd-filter-group"><div class="tsd-select" id="tsd-filter-visibility"><span class="tsd-select-label">All</span><ul class="tsd-select-list"><li data-value="public">Public</li><li data-value="protected">Public/Protected</li><li data-value="private" class="selected">All</li></ul></div> <input type="checkbox" id="tsd-filter-inherited" checked/><label class="tsd-widget" for="tsd-filter-inherited">Inherited</label><input type="checkbox" id="tsd-filter-externals" checked/><label class="tsd-widget" for="tsd-filter-externals">Externals</label></div></div><a href="#" class="tsd-widget menu no-caption" data-toggle="menu">Menu</a></div></div></div></div><div class="tsd-page-title"><div class="container"><h1>Studio Kit - v2.0.4 </h1></div></div></header><div class="container container-main"><div class="row"><div class="col-8 col-content"><div class="tsd-panel tsd-typography"><img src="https://github.com/golightstream/api.stream-sdk/blob/main/build/logo-light.png?raw=true#gh-dark-mode-only" alt="API.stream" width="250" style="margin-bottom: 25px"/>
<img src="https://github.com/golightstream/api.stream-sdk/blob/main/build/logo-dark.png?raw=true#gh-light-mode-only" alt="API.stream" width="250" style="margin-bottom: 25px"/>


<a href="#studio-kit" id="studio-kit" style="color: inherit; text-decoration: none;">
  <h1>Studio Kit</h1>
</a>
<p>A browser-based JavaScript SDK for <a target="_blank" href="https://api.stream/">API.stream</a>.</p>
<p>The Studio Kit provides your users with everything they need to produce professional-looking live streams to any popular platform (Youtube, Facebook, Twitch, etc.) or custom destination.</p>
<p><sub>This is a simple and opinionated interface for API.stream services. It implements the <a href="https://github.com/golightstream/api.stream-sdk">API.stream SDK</a>.</sub></p>
<p>üìñ <a href="https://www.api.stream/docs/sdk/studiokit/docs/">Read the documentation</a><br>üîç <a href="https://live.api.stream/studiokit/example/">View the live demo</a></p>
<p><sub><a href="https://github.com/golightstream/api.stream-studio-kit/tree/main/examples/studio-kit-demo">View demo code</a></sub></p>
<hr>

<a href="#installation" id="installation" style="color: inherit; text-decoration: none;">
  <h4>Installation</h4>
</a>
<pre><code class="language-text">npm install @api.stream/studio-kit
</code></pre>

<a href="#features" id="features" style="color: inherit; text-decoration: none;">
  <h4>Features</h4>
</a>
<p><sub><strong>Developers</strong> using the Studio Kit will have access to:</sub></p>
<ul>
<li>Drop-in stream canvas<ul>
<li>Configurable drag-and-drop controls</li>
<li>Built-in animations and transitions</li>
</ul>
</li>
<li>Support for custom stream layouts</li>
<li>Support for custom themes and presets</li>
<li>Support for webcam + screenshare for a host and any number of guests</li>
<li>Simple state hooks designed for interplay with popular frontend frameworks</li>
</ul>
<p><sub><strong>Users</strong> of a website implementing the Studio Kit will be able to:</sub></p>
<ul>
<li>Create and manage multiple projects</li>
<li>Invite guests to appear on stream</li>
<li>Select from custom themes and layouts</li>
<li>Set up a professional-looking stream in minutes</li>
<li>Go live to multiple destinations at the same time</li>
<li>Add cameras and screenshares and switch between layouts in real time</li>
</ul>
<hr>

<a href="#quick-start" id="quick-start" style="color: inherit; text-decoration: none;">
  <h4>Quick start</h4>
</a>

<a href="#initialize-the-sdk" id="initialize-the-sdk" style="color: inherit; text-decoration: none;">
  <h6>Initialize the SDK</h6>
</a>
<pre><code class="language-typescript"><span class="hl-0">import</span><span class="hl-1"> </span><span class="hl-2">*</span><span class="hl-1"> </span><span class="hl-0">as</span><span class="hl-1"> </span><span class="hl-3">StudioKit</span><span class="hl-1"> </span><span class="hl-0">from</span><span class="hl-1"> </span><span class="hl-4">&#39;@api.stream/studio-kit&#39;</span><br/><br/><span class="hl-5">// Initialize the SDK to receive a Studio object</span><br/><span class="hl-2">const</span><span class="hl-1"> </span><span class="hl-6">studio</span><span class="hl-1"> = </span><span class="hl-0">await</span><span class="hl-1"> </span><span class="hl-3">StudioKit</span><span class="hl-1">.</span><span class="hl-7">init</span><span class="hl-1">()</span><br/><br/><span class="hl-5">// Authenticate the user and fetch their projects</span><br/><span class="hl-2">const</span><span class="hl-1"> </span><span class="hl-6">user</span><span class="hl-1"> = </span><span class="hl-0">await</span><span class="hl-1"> </span><span class="hl-3">studio</span><span class="hl-1">.</span><span class="hl-7">load</span><span class="hl-1">(</span><span class="hl-6">ACCESS_TOKEN</span><span class="hl-1">)</span>
</code></pre>
<p><em>Note: ACCESS_TOKEN should be granted as part of your user login flow.<br>Receive this token on the backend by using the <a href="https://github.com/golightstream/api.stream-sdk">API.stream SDK</a>.</em></p>
<p><a href="https://github.com/golightstream/api.stream-sdk/tree/main/examples/js/backend-auth-grpcweb">Example - Retrieve an access token</a></p>

<a href="#monitor-events-and-updates" id="monitor-events-and-updates" style="color: inherit; text-decoration: none;">
  <h6>Monitor events and updates</h6>
</a>
<pre><code class="language-typescript"><span class="hl-5">// Listen for events to update state and re-render the UI</span><br/><br/><span class="hl-3">studio</span><span class="hl-1">.</span><span class="hl-7">subscribe</span><span class="hl-1">((</span><span class="hl-3">event</span><span class="hl-1">, </span><span class="hl-3">payload</span><span class="hl-1">) </span><span class="hl-2">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-7">handleEvent</span><span class="hl-1">(</span><span class="hl-3">event</span><span class="hl-1">, </span><span class="hl-3">payload</span><span class="hl-1">) </span><span class="hl-5">// Update some state</span><br/><span class="hl-1">  </span><span class="hl-7">render</span><span class="hl-1">(</span><span class="hl-3">state</span><span class="hl-1">) </span><span class="hl-5">// Render some UI (e.g. projects list)</span><br/><span class="hl-1">})</span><br/><br/><span class="hl-2">const</span><span class="hl-1"> </span><span class="hl-7">handleEvent</span><span class="hl-1"> = (</span><span class="hl-3">event</span><span class="hl-1">, </span><span class="hl-3">payload</span><span class="hl-1">) </span><span class="hl-2">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-3">event</span><span class="hl-1"> === </span><span class="hl-4">&#39;BroadcastStarted&#39;</span><span class="hl-1">) {</span><br/><span class="hl-1">    </span><span class="hl-7">setIsLive</span><span class="hl-1">(</span><span class="hl-2">true</span><span class="hl-1">)</span><br/><span class="hl-1">  } </span><span class="hl-0">else</span><span class="hl-1"> </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-3">event</span><span class="hl-1"> === </span><span class="hl-4">&#39;BroadcastStopped&#39;</span><span class="hl-1">) {</span><br/><span class="hl-1">    </span><span class="hl-7">setIsLive</span><span class="hl-1">(</span><span class="hl-2">false</span><span class="hl-1">)</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">}</span>
</code></pre>

<a href="#create-a-project" id="create-a-project" style="color: inherit; text-decoration: none;">
  <h6>Create a project</h6>
</a>
<p>A project represents a single broadcast setup.</p>
<pre><code class="language-typescript"><span class="hl-5">// ScenelessProject includes utilities to assist with simple stream setup</span><br/><span class="hl-2">const</span><span class="hl-1"> { </span><span class="hl-6">ScenelessProject</span><span class="hl-1"> } = </span><span class="hl-6">SDK</span><span class="hl-1">.</span><span class="hl-3">Helpers</span><br/><br/><span class="hl-5">// Create a project with participant and overlay compatibility</span><br/><span class="hl-2">const</span><span class="hl-1"> </span><span class="hl-6">project</span><span class="hl-1"> = </span><span class="hl-0">await</span><span class="hl-1"> </span><span class="hl-3">ScenelessProject</span><span class="hl-1">.</span><span class="hl-7">create</span><span class="hl-1">()</span><br/><br/><span class="hl-5">// Activate our desired project, initializing event listeners</span><br/><span class="hl-0">await</span><span class="hl-1"> </span><span class="hl-3">studio</span><span class="hl-1">.</span><span class="hl-3">Command</span><span class="hl-1">.</span><span class="hl-7">setActiveProject</span><span class="hl-1">({ </span><span class="hl-3">projectId:</span><span class="hl-1"> </span><span class="hl-3">project</span><span class="hl-1">.</span><span class="hl-3">id</span><span class="hl-1"> })</span><br/><br/><span class="hl-5">// Wrap the project in an interface used to manage layout, </span><br/><span class="hl-5">//  add participant video feeds, and change overlays</span><br/><span class="hl-2">const</span><span class="hl-1"> </span><span class="hl-6">projectCommands</span><span class="hl-1"> = </span><span class="hl-3">ScenelessProject</span><span class="hl-1">.</span><span class="hl-7">commands</span><span class="hl-1">(</span><span class="hl-3">project</span><span class="hl-1">)</span><br/><br/><span class="hl-5">// Join the WebRTC room to begin sending and receiving video with guests</span><br/><span class="hl-2">const</span><span class="hl-1"> </span><span class="hl-6">room</span><span class="hl-1"> = </span><span class="hl-0">await</span><span class="hl-1"> </span><span class="hl-3">activeProject</span><span class="hl-1">.</span><span class="hl-7">joinRoom</span><span class="hl-1">({ </span><span class="hl-3">displayName</span><span class="hl-1"> })</span>
</code></pre>

<a href="#add-guests" id="add-guests" style="color: inherit; text-decoration: none;">
  <h6>Add Guests</h6>
</a>
<p>Now that we have a WebRTC room, let&#39;s invite some guests to join our broadcast.
The first step is to create a link for each guest to join with.</p>
<pre><code class="language-typescript"><span class="hl-2">const</span><span class="hl-1"> </span><span class="hl-6">baseUrl</span><span class="hl-1"> = </span><span class="hl-4">&#39;https://yourwebsite.com/guest&#39;</span><br/><span class="hl-2">const</span><span class="hl-1"> </span><span class="hl-6">guestLink</span><span class="hl-1"> = </span><span class="hl-0">await</span><span class="hl-1"> </span><span class="hl-3">studio</span><span class="hl-1">.</span><span class="hl-7">createGuestLink</span><span class="hl-1">(</span><span class="hl-3">baseUrl</span><span class="hl-1">, {</span><br/><span class="hl-1">  </span><span class="hl-3">projectId:</span><span class="hl-1"> </span><span class="hl-3">project</span><span class="hl-1">.</span><span class="hl-3">id</span><span class="hl-1">,</span><br/><span class="hl-1">})</span>
</code></pre>
<p><em>Note: We can also use the Studio.createGuestToken method</em></p>
<p>On the guest page, we can have the guest join the WebRTC room. Let&#39;s demonstrate how to accomplish this in the context of a React component.</p>

<a href="#guest-page-react" id="guest-page-react" style="color: inherit; text-decoration: none;">
  <h6>Guest Page (React)</h6>
</a>
<pre><code class="language-jsx"><span class="hl-0">import</span><span class="hl-1"> { </span><span class="hl-3">init</span><span class="hl-1">, </span><span class="hl-3">Helpers</span><span class="hl-1">, </span><span class="hl-3">SDK</span><span class="hl-1"> } </span><span class="hl-0">from</span><span class="hl-1"> </span><span class="hl-4">&#39;@api.stream/studio-kit&#39;</span><br/><span class="hl-2">const</span><span class="hl-1"> { </span><span class="hl-6">useStudio</span><span class="hl-1">, </span><span class="hl-6">StudioProvider</span><span class="hl-1">, </span><span class="hl-6">useDevices</span><span class="hl-1"> } = </span><span class="hl-3">Helpers</span><span class="hl-1">.</span><span class="hl-3">React</span><br/><br/><span class="hl-5">// In order to make use of the helpful useStudio hook, our component must be a child of StudioProvider</span><br/><span class="hl-2">const</span><span class="hl-1"> </span><span class="hl-7">GuestApp</span><span class="hl-1"> = ({ </span><span class="hl-3">children</span><span class="hl-1"> }) </span><span class="hl-2">=&gt;</span><span class="hl-1"> (</span><br/><span class="hl-1">  </span><span class="hl-8">&lt;</span><span class="hl-9">StudioProvider</span><span class="hl-8">&gt;</span><br/><span class="hl-1">    </span><span class="hl-2">{</span><span class="hl-3">children</span><span class="hl-2">}</span><br/><span class="hl-1">  </span><span class="hl-8">&lt;/</span><span class="hl-9">StudioProvider</span><span class="hl-8">&gt;</span><br/><span class="hl-1">)</span><br/><br/><span class="hl-2">const</span><span class="hl-1"> </span><span class="hl-7">GuestCompoent</span><span class="hl-1"> = () </span><span class="hl-2">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-2">const</span><span class="hl-1"> { </span><span class="hl-6">studio</span><span class="hl-1">, </span><span class="hl-6">project</span><span class="hl-1">, </span><span class="hl-6">room</span><span class="hl-1">, </span><span class="hl-6">setStudio</span><span class="hl-1">, </span><span class="hl-6">setProject</span><span class="hl-1">, </span><span class="hl-6">setRoom</span><span class="hl-1">, </span><span class="hl-6">webcamId</span><span class="hl-1">, </span><span class="hl-6">microphoneId</span><span class="hl-1">, </span><span class="hl-6">setWebcamId</span><span class="hl-1">, </span><span class="hl-6">setMicrophoneId</span><span class="hl-1"> } = </span><span class="hl-7">useStudio</span><span class="hl-1">()</span><br/><br/><span class="hl-1">  </span><span class="hl-5">// Initialize studio</span><br/><span class="hl-1">  </span><span class="hl-5">// Pass an empty array as deps to ensure that this effect runs only once.</span><br/><span class="hl-1">  </span><span class="hl-5">// There are other, better ways to accomplish this, </span><br/><span class="hl-1">  </span><span class="hl-5">//  but for brevity in this example, we choose this way.</span><br/><span class="hl-1">  </span><span class="hl-7">useEffect</span><span class="hl-1">(() </span><span class="hl-2">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-7">init</span><span class="hl-1">().</span><span class="hl-7">then</span><span class="hl-1">(</span><span class="hl-3">setStudio</span><span class="hl-1">)</span><br/><span class="hl-1">  }, [])</span><br/><br/><span class="hl-1">  </span><span class="hl-5">// Initialize project</span><br/><span class="hl-1">  </span><span class="hl-7">useEffect</span><span class="hl-1">(() </span><span class="hl-2">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-0">if</span><span class="hl-1"> (!</span><span class="hl-3">studio</span><span class="hl-1">) </span><span class="hl-0">return</span><br/><br/><span class="hl-1">    </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-3">studio</span><span class="hl-1">.</span><span class="hl-3">initialProject</span><span class="hl-1">) {</span><br/><span class="hl-1">      </span><span class="hl-5">// If the SDK detects a token in the URL, it will return the project</span><br/><span class="hl-1">      </span><span class="hl-5">//  associated with it (e.g. guest view)</span><br/><span class="hl-1">      </span><span class="hl-7">setProject</span><span class="hl-1">(</span><span class="hl-3">studio</span><span class="hl-1">.</span><span class="hl-3">initialProject</span><span class="hl-1">)</span><br/><span class="hl-1">    } </span><span class="hl-0">else</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-7">setError</span><span class="hl-1">(</span><span class="hl-4">&#39;Invalid token&#39;</span><span class="hl-1">)</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">  }, [</span><span class="hl-3">studio</span><span class="hl-1">])</span><br/><br/><br/><span class="hl-1">  </span><span class="hl-5">// Initialize room</span><br/><span class="hl-1">  </span><span class="hl-7">useEffect</span><span class="hl-1">(() </span><span class="hl-2">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-0">if</span><span class="hl-1"> (!</span><span class="hl-3">project</span><span class="hl-1">) </span><span class="hl-0">return</span><br/><span class="hl-1">    </span><span class="hl-3">project</span><br/><span class="hl-1">      .</span><span class="hl-7">joinRoom</span><span class="hl-1">({</span><br/><span class="hl-1">        </span><span class="hl-3">displayName</span><span class="hl-1">,</span><br/><span class="hl-1">      })</span><br/><span class="hl-1">      .</span><span class="hl-7">then</span><span class="hl-1">((</span><span class="hl-3">room</span><span class="hl-1">) </span><span class="hl-2">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-7">setJoining</span><span class="hl-1">(</span><span class="hl-2">false</span><span class="hl-1">)</span><br/><span class="hl-1">        </span><span class="hl-7">setRoom</span><span class="hl-1">(</span><span class="hl-3">room</span><span class="hl-1">)</span><br/><span class="hl-1">      })</span><br/><span class="hl-1">      .</span><span class="hl-7">catch</span><span class="hl-1">((</span><span class="hl-3">e</span><span class="hl-1">) </span><span class="hl-2">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-7">setError</span><span class="hl-1">(</span><span class="hl-3">e</span><span class="hl-1">.</span><span class="hl-3">message</span><span class="hl-1">)</span><br/><span class="hl-1">      })</span><br/><span class="hl-1">  }, [</span><span class="hl-3">project</span><span class="hl-1">])</span><br/><br/><span class="hl-1">  </span><span class="hl-5">// Gets all webcams and microphones for the guest, listens for changes to available devices</span><br/><span class="hl-1">  </span><span class="hl-2">const</span><span class="hl-1"> </span><span class="hl-6">devices</span><span class="hl-1"> = </span><span class="hl-7">useDevices</span><span class="hl-1">(()</span><br/><br/><span class="hl-1">  </span><span class="hl-5">// As soon as we have our devices, the first available webcam and microphone will be shared across the WebRTC Room.</span><br/><span class="hl-1">  </span><span class="hl-7">useEffect</span><span class="hl-1">(() </span><span class="hl-2">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-0">if</span><span class="hl-1"> (!</span><span class="hl-3">webcamId</span><span class="hl-1">) </span><span class="hl-7">setWebcamId</span><span class="hl-1">(</span><span class="hl-3">devices</span><span class="hl-1">.</span><span class="hl-3">webcams</span><span class="hl-1">[</span><span class="hl-10">0</span><span class="hl-1">]?.</span><span class="hl-3">deviceId</span><span class="hl-1">)</span><br/><span class="hl-1">  }, [</span><span class="hl-3">webcamId</span><span class="hl-1">, </span><span class="hl-3">devices</span><span class="hl-1">])</span><br/><span class="hl-1">  </span><span class="hl-7">useEffect</span><span class="hl-1">(() </span><span class="hl-2">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-0">if</span><span class="hl-1"> (!</span><span class="hl-3">microphoneId</span><span class="hl-1">) </span><span class="hl-7">setMicrophoneId</span><span class="hl-1">(</span><span class="hl-3">devices</span><span class="hl-1">.</span><span class="hl-3">microphones</span><span class="hl-1">[</span><span class="hl-10">0</span><span class="hl-1">]?.</span><span class="hl-3">deviceId</span><span class="hl-1">)</span><br/><span class="hl-1">  }, [</span><span class="hl-3">microphoneId</span><span class="hl-1">, </span><span class="hl-3">devices</span><span class="hl-1">])</span><br/><br/><span class="hl-1">  </span><span class="hl-7">return</span><span class="hl-1"> (</span><br/><span class="hl-1">    </span><span class="hl-8">&lt;</span><span class="hl-11">div</span><span class="hl-8">&gt;</span><br/><span class="hl-1">      </span><span class="hl-2">{</span><span class="hl-5">/* some react component here*/</span><span class="hl-2">}</span><br/><span class="hl-1">    </span><span class="hl-8">&lt;/</span><span class="hl-11">div</span><span class="hl-8">&gt;</span><br/><span class="hl-1">  )</span><br/><span class="hl-1">}</span>
</code></pre>
<p>Now that the Guest has joined the room, let&#39;s return to the Host&#39;s page, and add the guest to our broadcast.</p>

<a href="#adding-guest-to-the-broadcast-react" id="adding-guest-to-the-broadcast-react" style="color: inherit; text-decoration: none;">
  <h6>Adding Guest To The Broadcast (React)</h6>
</a>
<pre><code class="language-jsx"><br/><span class="hl-2">const</span><span class="hl-1"> </span><span class="hl-7">Participants</span><span class="hl-1"> = () </span><span class="hl-2">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-2">const</span><span class="hl-1"> { </span><span class="hl-6">room</span><span class="hl-1">, </span><span class="hl-6">projectCommands</span><span class="hl-1"> } = </span><span class="hl-7">useStudio</span><span class="hl-1">()</span><br/><span class="hl-1">  </span><span class="hl-2">const</span><span class="hl-1"> [</span><span class="hl-6">participants</span><span class="hl-1">, </span><span class="hl-6">setParticipants</span><span class="hl-1">] = </span><span class="hl-7">useState</span><span class="hl-1">&lt;</span><span class="hl-9">SDK</span><span class="hl-1">.</span><span class="hl-9">Participant</span><span class="hl-1">[]&gt;([])</span><br/><br/><span class="hl-1">  </span><span class="hl-5">// Listen for room participants</span><br/><span class="hl-1">  </span><span class="hl-7">useEffect</span><span class="hl-1">(() </span><span class="hl-2">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-0">return</span><span class="hl-1"> </span><span class="hl-3">room</span><span class="hl-1">.</span><span class="hl-7">useParticipants</span><span class="hl-1">((</span><span class="hl-3">participants</span><span class="hl-1">) </span><span class="hl-2">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-7">setParticipants</span><span class="hl-1">(</span><span class="hl-3">participants</span><span class="hl-1">)</span><br/><span class="hl-1">      </span><span class="hl-5">// Prune non-existent guests from the project</span><br/><span class="hl-1">      </span><span class="hl-5">// Only the host can do this</span><br/><span class="hl-1">      </span><span class="hl-3">projectCommands</span><span class="hl-1">.</span><span class="hl-7">pruneParticipants</span><span class="hl-1">()</span><br/><span class="hl-1">    })</span><br/><span class="hl-1">  }, [])</span><br/><br/><span class="hl-1">  </span><span class="hl-0">return</span><span class="hl-1"> (</span><br/><span class="hl-1">    </span><span class="hl-8">&lt;</span><span class="hl-11">div</span><span class="hl-8">&gt;</span><br/><span class="hl-1">      </span><span class="hl-2">{</span><span class="hl-3">participants</span><span class="hl-12">.</span><span class="hl-7">map</span><span class="hl-12">((</span><span class="hl-3">p</span><span class="hl-12">) </span><span class="hl-2">=&gt;</span><span class="hl-12"> (</span><br/><span class="hl-12">        </span><span class="hl-8">&lt;</span><span class="hl-11">div</span><span class="hl-8">&gt;</span><br/><span class="hl-12">          </span><span class="hl-2">{</span><span class="hl-5">/* Include some other components to, say, display the participant&#39;s camera feed */</span><span class="hl-2">}</span><br/><span class="hl-12">          </span><span class="hl-8">&lt;</span><span class="hl-9">WebcamToggle</span><span class="hl-12"> </span><span class="hl-13">participant</span><span class="hl-1">=</span><span class="hl-2">{</span><span class="hl-3">p</span><span class="hl-2">}</span><span class="hl-12"> </span><span class="hl-8">/&gt;</span><br/><span class="hl-12">        </span><span class="hl-8">&lt;/</span><span class="hl-11">div</span><span class="hl-8">&gt;</span><br/><span class="hl-12">      ))</span><span class="hl-2">}</span><br/><span class="hl-1">    </span><span class="hl-8">&lt;/</span><span class="hl-11">div</span><span class="hl-8">&gt;</span><br/><span class="hl-1">  )</span><br/><span class="hl-1">}</span><br/><br/><span class="hl-2">const</span><span class="hl-1"> </span><span class="hl-7">WebcamToggle</span><span class="hl-1"> = ({ </span><span class="hl-3">participant</span><span class="hl-1"> }) </span><span class="hl-2">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-2">const</span><span class="hl-1"> { </span><span class="hl-6">id</span><span class="hl-1"> } = </span><span class="hl-3">participant</span><br/><span class="hl-1">  </span><span class="hl-2">const</span><span class="hl-1"> { </span><span class="hl-6">projectCommands</span><span class="hl-1"> } = </span><span class="hl-7">useStudio</span><span class="hl-1">()</span><br/><br/><span class="hl-1">  </span><span class="hl-5">// Get the initial props in case the participant is on stream</span><br/><span class="hl-1">  </span><span class="hl-2">const</span><span class="hl-1"> </span><span class="hl-6">projectParticipant</span><span class="hl-1"> = </span><span class="hl-7">useMemo</span><span class="hl-1">(</span><br/><span class="hl-1">    () </span><span class="hl-2">=&gt;</span><span class="hl-1"> </span><span class="hl-3">projectCommands</span><span class="hl-1">.</span><span class="hl-7">getParticipantState</span><span class="hl-1">(</span><span class="hl-3">id</span><span class="hl-1">, </span><span class="hl-4">&#39;camera&#39;</span><span class="hl-1">),</span><br/><span class="hl-1">    [],</span><br/><span class="hl-1">  )</span><br/><span class="hl-1">  </span><span class="hl-2">const</span><span class="hl-1"> [</span><span class="hl-6">onStream</span><span class="hl-1">, </span><span class="hl-6">setOnStream</span><span class="hl-1">] = </span><span class="hl-7">useState</span><span class="hl-1">(</span><span class="hl-9">Boolean</span><span class="hl-1">(</span><span class="hl-3">projectParticipant</span><span class="hl-1">))</span><br/><span class="hl-1">  </span><span class="hl-2">const</span><span class="hl-1"> [</span><span class="hl-6">isMuted</span><span class="hl-1">, </span><span class="hl-6">setIsMuted</span><span class="hl-1">] = </span><span class="hl-7">useState</span><span class="hl-1">(</span><span class="hl-3">projectParticipant</span><span class="hl-1">?.</span><span class="hl-3">isMuted</span><span class="hl-1"> ?? </span><span class="hl-2">false</span><span class="hl-1">)</span><br/><span class="hl-1">  </span><span class="hl-2">const</span><span class="hl-1"> [</span><span class="hl-6">volume</span><span class="hl-1">, </span><span class="hl-6">setVolume</span><span class="hl-1">] = </span><span class="hl-7">useState</span><span class="hl-1">(</span><span class="hl-3">projectParticipant</span><span class="hl-1">?.</span><span class="hl-3">volume</span><span class="hl-1"> ?? </span><span class="hl-10">1</span><span class="hl-1">)</span><br/><span class="hl-1">  </span><span class="hl-2">const</span><span class="hl-1"> [</span><span class="hl-6">isShowcase</span><span class="hl-1">, </span><span class="hl-6">setIsShowcase</span><span class="hl-1">] = </span><span class="hl-7">useState</span><span class="hl-1">(</span><span class="hl-2">false</span><span class="hl-1">)</span><br/><br/><span class="hl-1">  </span><span class="hl-5">// Monitor whether the participant has been removed from the stream</span><br/><span class="hl-1">  </span><span class="hl-5">//  from some other means (e.g. dragged off canvas by host)</span><br/><span class="hl-1">  </span><span class="hl-7">useEffect</span><span class="hl-1">(() </span><span class="hl-2">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-0">return</span><span class="hl-1"> </span><span class="hl-3">projectCommands</span><span class="hl-1">.</span><span class="hl-7">useParticipantState</span><span class="hl-1">(</span><br/><span class="hl-1">      </span><span class="hl-3">id</span><span class="hl-1">,</span><br/><span class="hl-1">      (</span><span class="hl-3">x</span><span class="hl-1">) </span><span class="hl-2">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-7">setOnStream</span><span class="hl-1">(</span><span class="hl-9">Boolean</span><span class="hl-1">(</span><span class="hl-3">x</span><span class="hl-1">))</span><br/><span class="hl-1">      },</span><br/><span class="hl-1">      </span><span class="hl-4">&#39;camera&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    )</span><br/><span class="hl-1">  }, [])</span><br/><br/><span class="hl-1">  </span><span class="hl-5">// Monitor the project&#39;s showcase to determine whether this</span><br/><span class="hl-1">  </span><span class="hl-5">// participant/camera is active</span><br/><span class="hl-1">  </span><span class="hl-7">useEffect</span><span class="hl-1">(</span><br/><span class="hl-1">    () </span><span class="hl-2">=&gt;</span><br/><span class="hl-1">      </span><span class="hl-3">projectCommands</span><span class="hl-1">.</span><span class="hl-7">useShowcase</span><span class="hl-1">((</span><span class="hl-3">showcase</span><span class="hl-1">) </span><span class="hl-2">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-7">setIsShowcase</span><span class="hl-1">(</span><span class="hl-3">showcase</span><span class="hl-1">.</span><span class="hl-3">participantId</span><span class="hl-1"> === </span><span class="hl-3">id</span><span class="hl-1"> &amp;&amp; </span><span class="hl-3">showcase</span><span class="hl-1">.</span><span class="hl-3">type</span><span class="hl-1"> === </span><span class="hl-4">&#39;camera&#39;</span><span class="hl-1">)</span><br/><span class="hl-1">      }),</span><br/><span class="hl-1">    [],</span><br/><span class="hl-1">  )</span><br/><span class="hl-1">  </span><span class="hl-0">return</span><span class="hl-1"> (</span><br/><span class="hl-1">    </span><span class="hl-8">&lt;</span><span class="hl-11">div</span><span class="hl-8">&gt;</span><br/><span class="hl-1">      </span><span class="hl-8">&lt;</span><span class="hl-11">label</span><span class="hl-8">&gt;</span><br/><span class="hl-1">        </span><span class="hl-8">&lt;</span><span class="hl-11">input</span><br/><span class="hl-1">          </span><span class="hl-13">type</span><span class="hl-1">=</span><span class="hl-4">&quot;checkbox&quot;</span><br/><span class="hl-1">          </span><span class="hl-13">checked</span><span class="hl-1">=</span><span class="hl-2">{</span><span class="hl-3">onStream</span><span class="hl-2">}</span><br/><span class="hl-1">          </span><span class="hl-13">onChange</span><span class="hl-1">=</span><span class="hl-2">{</span><span class="hl-12">(</span><span class="hl-3">e</span><span class="hl-12">) </span><span class="hl-2">=&gt;</span><span class="hl-12"> {</span><br/><span class="hl-12">            </span><span class="hl-2">const</span><span class="hl-12"> </span><span class="hl-6">checked</span><span class="hl-12"> </span><span class="hl-1">=</span><span class="hl-12"> </span><span class="hl-3">e</span><span class="hl-12">.</span><span class="hl-3">target</span><span class="hl-12">.</span><span class="hl-3">checked</span><br/><span class="hl-12">            </span><span class="hl-0">if</span><span class="hl-12"> (</span><span class="hl-3">checked</span><span class="hl-12">) {</span><br/><span class="hl-12">              </span><span class="hl-5">// Adds the participant&#39;s webcam and microphone to the broadcast</span><br/><span class="hl-12">              </span><span class="hl-3">projectCommands</span><span class="hl-12">.</span><span class="hl-7">addParticipant</span><span class="hl-12">(</span><span class="hl-3">id</span><span class="hl-12">, { </span><span class="hl-3">isMuted</span><span class="hl-12">, </span><span class="hl-3">volume</span><span class="hl-12"> }, </span><span class="hl-4">&#39;camera&#39;</span><span class="hl-12">)</span><br/><span class="hl-12">            } </span><span class="hl-0">else</span><span class="hl-12"> {</span><br/><span class="hl-12">              </span><span class="hl-3">projectCommands</span><span class="hl-12">.</span><span class="hl-7">removeParticipant</span><span class="hl-12">(</span><span class="hl-3">id</span><span class="hl-12">, </span><span class="hl-4">&#39;camera&#39;</span><span class="hl-12">)</span><br/><span class="hl-12">            }</span><br/><span class="hl-12">            </span><span class="hl-7">setOnStream</span><span class="hl-12">(</span><span class="hl-3">checked</span><span class="hl-12">)</span><br/><span class="hl-12">          }</span><span class="hl-2">}</span><br/><span class="hl-1">        </span><span class="hl-8">/&gt;</span><br/><span class="hl-1">        On stream</span><br/><span class="hl-1">      </span><span class="hl-8">&lt;/</span><span class="hl-11">label</span><span class="hl-8">&gt;</span><br/><span class="hl-1">      </span><span class="hl-8">&lt;</span><span class="hl-11">label</span><span class="hl-1"> </span><span class="hl-13">style</span><span class="hl-1">=</span><span class="hl-2">{</span><span class="hl-12">{ </span><span class="hl-3">opacity:</span><span class="hl-12"> </span><span class="hl-3">onStream</span><span class="hl-12"> </span><span class="hl-1">?</span><span class="hl-12"> </span><span class="hl-10">1</span><span class="hl-12"> </span><span class="hl-1">:</span><span class="hl-12"> </span><span class="hl-10">0.7</span><span class="hl-12"> }</span><span class="hl-2">}</span><span class="hl-8">&gt;</span><br/><span class="hl-1">        </span><span class="hl-8">&lt;</span><span class="hl-11">input</span><br/><span class="hl-1">          </span><span class="hl-13">type</span><span class="hl-1">=</span><span class="hl-4">&quot;checkbox&quot;</span><br/><span class="hl-1">          </span><span class="hl-13">disabled</span><span class="hl-1">=</span><span class="hl-2">{</span><span class="hl-1">!</span><span class="hl-3">onStream</span><span class="hl-2">}</span><br/><span class="hl-1">          </span><span class="hl-13">checked</span><span class="hl-1">=</span><span class="hl-2">{</span><span class="hl-3">isShowcase</span><span class="hl-2">}</span><br/><span class="hl-1">          </span><span class="hl-13">onChange</span><span class="hl-1">=</span><span class="hl-2">{</span><span class="hl-12">() </span><span class="hl-2">=&gt;</span><span class="hl-12"> {</span><br/><span class="hl-12">            </span><span class="hl-0">if</span><span class="hl-12"> (</span><span class="hl-3">isShowcase</span><span class="hl-12">) {</span><br/><span class="hl-12">              </span><span class="hl-3">projectCommands</span><span class="hl-12">.</span><span class="hl-7">setShowcase</span><span class="hl-12">(</span><span class="hl-2">null</span><span class="hl-12">)</span><br/><span class="hl-12">            } </span><span class="hl-0">else</span><span class="hl-12"> {</span><br/><span class="hl-12">              </span><span class="hl-3">projectCommands</span><span class="hl-12">.</span><span class="hl-7">setShowcase</span><span class="hl-12">(</span><span class="hl-3">id</span><span class="hl-12">, </span><span class="hl-4">&#39;camera&#39;</span><span class="hl-12">)</span><br/><span class="hl-12">            }</span><br/><span class="hl-12">          }</span><span class="hl-2">}</span><br/><span class="hl-1">        </span><span class="hl-8">/&gt;</span><br/><span class="hl-1">        Showcase</span><br/><span class="hl-1">      </span><span class="hl-8">&lt;/</span><span class="hl-11">label</span><span class="hl-8">&gt;</span><br/><span class="hl-1">    </span><span class="hl-8">&lt;/</span><span class="hl-11">div</span><span class="hl-8">&gt;</span><br/><span class="hl-1">  )</span><br/><span class="hl-1">}</span>
</code></pre>

<a href="#configure-a-broadcast" id="configure-a-broadcast" style="color: inherit; text-decoration: none;">
  <h6>Configure a broadcast</h6>
</a>
<p>With a project, we are ready to start configuring a broadcast.</p>
<pre><code class="language-typescript"><span class="hl-5">// Render the drop-in stream canvas into a DOM element of your choosing</span><br/><span class="hl-2">const</span><span class="hl-1"> </span><span class="hl-6">containerEl</span><span class="hl-1"> = </span><span class="hl-3">document</span><span class="hl-1">.</span><span class="hl-7">querySelector</span><span class="hl-1">(</span><span class="hl-4">&#39;#some-container&#39;</span><span class="hl-1">)</span><br/><span class="hl-3">studio</span><span class="hl-1">.</span><span class="hl-7">render</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-3">projectId:</span><span class="hl-1"> </span><span class="hl-3">project</span><span class="hl-1">.</span><span class="hl-3">id</span><span class="hl-1">, </span><span class="hl-5">// The project to render</span><br/><span class="hl-1">  </span><span class="hl-3">containerEl</span><span class="hl-1">, </span><span class="hl-5">// The element to render the preview into</span><br/><span class="hl-1">  </span><span class="hl-3">dragAndDrop:</span><span class="hl-1"> </span><span class="hl-2">true</span><span class="hl-1">, </span><span class="hl-5">// Include drag &#39;n&#39; drop functionality</span><br/><span class="hl-1">})</span><br/><br/><span class="hl-5">// Configure a destination for the active project</span><br/><span class="hl-3">studio</span><span class="hl-1">.</span><span class="hl-3">Command</span><span class="hl-1">.</span><span class="hl-7">setDestination</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-3">projectId:</span><span class="hl-1"> </span><span class="hl-3">project</span><span class="hl-1">.</span><span class="hl-3">id</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-3">rtmpUrl:</span><span class="hl-1"> </span><span class="hl-4">&#39;rtmp://some-rtmp-url.com/&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-3">rtmpKey:</span><span class="hl-1"> </span><span class="hl-4">&#39;some_stream_key_123&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">})</span>
</code></pre>

<a href="#start-a-broadcast" id="start-a-broadcast" style="color: inherit; text-decoration: none;">
  <h6>Start a broadcast</h6>
</a>
<p>Once a destination is set, the project is ready to go live.</p>
<pre><code class="language-typescript"><span class="hl-3">studio</span><span class="hl-1">.</span><span class="hl-3">Command</span><span class="hl-1">.</span><span class="hl-7">startBroadcast</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-3">projectId:</span><span class="hl-1"> </span><span class="hl-3">project</span><span class="hl-1">.</span><span class="hl-3">id</span><span class="hl-1">,</span><br/><span class="hl-1">})</span>
</code></pre>

<a href="#authentication-amp-authorization" id="authentication-amp-authorization" style="color: inherit; text-decoration: none;">
  <h4>Authentication &amp; Authorization</h4>
</a>
<p>API.stream relies heavily on modern JWT-based authentication flows. The backend authentication service issues JWTs which clients assert on subsequent API calls. Those JWTs include grants allowing clients to safely share projects with collaborators and guests.</p>
<p><a href="https://www.api.stream/docs/api/auth/">Learn more about authentication with API.stream</a></p>
</div></div><div class="col-4 col-menu menu-sticky-wrap menu-highlight"><nav class="tsd-navigation primary"><ul><li class="current"><a href="modules.html">Exports</a></li><li class=" tsd-kind-namespace"><a href="modules/Events.html">Events</a></li><li class=" tsd-kind-namespace"><a href="modules/Helpers.html">Helpers</a></li><li class=" tsd-kind-namespace"><a href="modules/SDK.html">SDK</a></li></ul></nav><nav class="tsd-navigation secondary menu-sticky"><ul><li class="tsd-kind-type-alias"><a href="modules.html#AdvancedSettings" class="tsd-kind-icon">Advanced<wbr/>Settings</a></li><li class="tsd-kind-type-alias"><a href="modules.html#Settings" class="tsd-kind-icon">Settings</a></li><li class="tsd-kind-function"><a href="modules.html#init" class="tsd-kind-icon">init</a></li></ul></nav></div></div></div><footer class="with-border-bottom"><div class="container"><h2>Settings</h2><p>Theme <select id="theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></p></div></footer><div class="container tsd-generator"><p>Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></div><div class="overlay"></div><script src="assets/main.js"></script></body></html>