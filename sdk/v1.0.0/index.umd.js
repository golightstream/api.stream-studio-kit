var Pr=Object.defineProperty,Cr=Object.defineProperties;var wr=Object.getOwnPropertyDescriptors;var vr=Object.getOwnPropertySymbols;var Nr=Object.prototype.hasOwnProperty,Ar=Object.prototype.propertyIsEnumerable;var at=(a,s,u)=>s in a?Pr(a,s,{enumerable:!0,configurable:!0,writable:!0,value:u}):a[s]=u,pe=(a,s)=>{for(var u in s||(s={}))Nr.call(s,u)&&at(a,u,s[u]);if(vr)for(var u of vr(s))Ar.call(s,u)&&at(a,u,s[u]);return a},we=(a,s)=>Cr(a,wr(s));var Me=(a,s,u)=>(at(a,typeof s!="symbol"?s+"":s,u),u);(function(a,s){typeof exports=="object"&&typeof module!="undefined"?s(exports,require("react-dom"),require("react")):typeof define=="function"&&define.amd?define(["exports","react-dom","react"],s):(a=typeof globalThis!="undefined"?globalThis:a||self,s(a["@golightstream/studio-sdk"]={},a.ReactDOM,a.React))})(this,function(exports,ReactDOM,React){"use strict";function _interopDefaultLegacy(a){return a&&typeof a=="object"&&"default"in a?a:{default:a}}function _mergeNamespaces(a,s){return s.forEach(function(u){u&&typeof u!="string"&&!Array.isArray(u)&&Object.keys(u).forEach(function(d){if(d!=="default"&&!(d in a)){var l=Object.getOwnPropertyDescriptor(u,d);Object.defineProperty(a,d,l.get?l:{enumerable:!0,get:function(){return u[d]}})}})}),Object.freeze(Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}))}var ReactDOM__default=_interopDefaultLegacy(ReactDOM),React__default=_interopDefaultLegacy(React);let currentSubId=0;const subscribers=new Map;function createSubscribe(){return function(a){if(typeof a!="function")return;const s=++currentSubId;return subscribers.set(s,a),()=>{subscribers.delete(s)}}}function createOn(){return function(a,s){return subscribe((u,d)=>{if(a===u)return s(d)})}}function createTrigger(){return function(a,...s){let u={type:a,payload:s[0]};log$1.debug("Event:",u),subscribers.forEach(d=>d(u.type,u.payload))}}const trigger$2=createTrigger(),subscribe=createSubscribe(),on=createOn();var events$2=Object.freeze(Object.defineProperty({__proto__:null,trigger:trigger$2,subscribe,on},Symbol.toStringTag,{value:"Module"})),commonjsGlobal=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function getAugmentedNamespace(a){if(a.__esModule)return a;var s=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(a).forEach(function(u){var d=Object.getOwnPropertyDescriptor(a,u);Object.defineProperty(s,u,d.get?d:{enumerable:!0,get:function(){return a[u]}})}),s}var loglevel={exports:{}};(function(a){(function(s,u){a.exports?a.exports=u():s.log=u()})(commonjsGlobal,function(){var s=function(){},u="undefined",d=typeof window!==u&&typeof window.navigator!==u&&/Trident\/|MSIE /.test(window.navigator.userAgent),l=["trace","debug","info","warn","error"];function p(V,J){var W=V[J];if(typeof W.bind=="function")return W.bind(V);try{return Function.prototype.bind.call(W,V)}catch{return function(){return Function.prototype.apply.apply(W,[V,arguments])}}}function h(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function y(V){return V==="debug"&&(V="log"),typeof console===u?!1:V==="trace"&&d?h:console[V]!==void 0?p(console,V):console.log!==void 0?p(console,"log"):s}function _(V,J){for(var W=0;W<l.length;W++){var g=l[W];this[g]=W<V?s:this.methodFactory(g,V,J)}this.log=this.debug}function E(V,J,W){return function(){typeof console!==u&&(_.call(this,J,W),this[V].apply(this,arguments))}}function I(V,J,W){return y(V)||E.apply(this,arguments)}function N(V,J,W){var g=this,O;J=J==null?"WARN":J;var $="loglevel";typeof V=="string"?$+=":"+V:typeof V=="symbol"&&($=void 0);function x(F){var j=(l[F]||"silent").toUpperCase();if(!(typeof window===u||!$)){try{window.localStorage[$]=j;return}catch{}try{window.document.cookie=encodeURIComponent($)+"="+j+";"}catch{}}}function Y(){var F;if(!(typeof window===u||!$)){try{F=window.localStorage[$]}catch{}if(typeof F===u)try{var j=window.document.cookie,K=j.indexOf(encodeURIComponent($)+"=");K!==-1&&(F=/^([^;]+)/.exec(j.slice(K))[1])}catch{}return g.levels[F]===void 0&&(F=void 0),F}}function te(){if(!(typeof window===u||!$)){try{window.localStorage.removeItem($);return}catch{}try{window.document.cookie=encodeURIComponent($)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch{}}}g.name=V,g.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},g.methodFactory=W||I,g.getLevel=function(){return O},g.setLevel=function(F,j){if(typeof F=="string"&&g.levels[F.toUpperCase()]!==void 0&&(F=g.levels[F.toUpperCase()]),typeof F=="number"&&F>=0&&F<=g.levels.SILENT){if(O=F,j!==!1&&x(F),_.call(g,F,V),typeof console===u&&F<g.levels.SILENT)return"No console available for logging"}else throw"log.setLevel() called with invalid level: "+F},g.setDefaultLevel=function(F){J=F,Y()||g.setLevel(F,!1)},g.resetLevel=function(){g.setLevel(J,!1),te()},g.enableAll=function(F){g.setLevel(g.levels.TRACE,F)},g.disableAll=function(F){g.setLevel(g.levels.SILENT,F)};var ne=Y();ne==null&&(ne=J),g.setLevel(ne,!1)}var w=new N,C={};w.getLogger=function(J){if(typeof J!="symbol"&&typeof J!="string"||J==="")throw new TypeError("You must supply a name when creating a logger.");var W=C[J];return W||(W=C[J]=new N(J,w.getLevel(),w.methodFactory)),W};var D=typeof window!==u?window.log:void 0;return w.noConflict=function(){return typeof window!==u&&window.log===w&&(window.log=D),w},w.getLoggers=function(){return C},w.default=w,w})})(loglevel);var log$1=loglevel.exports;const connectionId$1=(Math.random()*1e20).toString(36),version$4="1.0.0",CoreContext={config:null,clients:null,on,subscribe,compositor:{},Request:{},Command:{},trigger:trigger$2,state:{},connectionId:connectionId$1,version:version$4,log:log$1,logLevel:null};window.LS_trigger=CoreContext.trigger;const setAppState=a=>{Object.keys(a).forEach(s=>{CoreContext.state[s]=a[s]})};var context$1=Object.freeze(Object.defineProperty({__proto__:null,CoreContext,log:log$1,setAppState,default:CoreContext},Symbol.toStringTag,{value:"Module"})),freeGlobal=typeof global=="object"&&global&&global.Object===Object&&global,freeGlobal$1=freeGlobal,freeSelf=typeof self=="object"&&self&&self.Object===Object&&self,root=freeGlobal$1||freeSelf||Function("return this")(),root$1=root,Symbol$1=root$1.Symbol,Symbol$2=Symbol$1,objectProto$g=Object.prototype,hasOwnProperty$d=objectProto$g.hasOwnProperty,nativeObjectToString$1=objectProto$g.toString,symToStringTag$1=Symbol$2?Symbol$2.toStringTag:void 0;function getRawTag(a){var s=hasOwnProperty$d.call(a,symToStringTag$1),u=a[symToStringTag$1];try{a[symToStringTag$1]=void 0;var d=!0}catch{}var l=nativeObjectToString$1.call(a);return d&&(s?a[symToStringTag$1]=u:delete a[symToStringTag$1]),l}var objectProto$f=Object.prototype,nativeObjectToString=objectProto$f.toString;function objectToString(a){return nativeObjectToString.call(a)}var nullTag="[object Null]",undefinedTag="[object Undefined]",symToStringTag=Symbol$2?Symbol$2.toStringTag:void 0;function baseGetTag(a){return a==null?a===void 0?undefinedTag:nullTag:symToStringTag&&symToStringTag in Object(a)?getRawTag(a):objectToString(a)}function isObjectLike(a){return a!=null&&typeof a=="object"}var symbolTag$3="[object Symbol]";function isSymbol(a){return typeof a=="symbol"||isObjectLike(a)&&baseGetTag(a)==symbolTag$3}function arrayMap(a,s){for(var u=-1,d=a==null?0:a.length,l=Array(d);++u<d;)l[u]=s(a[u],u,a);return l}var isArray$6=Array.isArray,isArray$7=isArray$6,INFINITY$1=1/0,symbolProto$2=Symbol$2?Symbol$2.prototype:void 0,symbolToString=symbolProto$2?symbolProto$2.toString:void 0;function baseToString(a){if(typeof a=="string")return a;if(isArray$7(a))return arrayMap(a,baseToString)+"";if(isSymbol(a))return symbolToString?symbolToString.call(a):"";var s=a+"";return s=="0"&&1/a==-INFINITY$1?"-0":s}var reWhitespace=/\s/;function trimmedEndIndex(a){for(var s=a.length;s--&&reWhitespace.test(a.charAt(s)););return s}var reTrimStart=/^\s+/;function baseTrim(a){return a&&a.slice(0,trimmedEndIndex(a)+1).replace(reTrimStart,"")}function isObject$5(a){var s=typeof a;return a!=null&&(s=="object"||s=="function")}var NAN=0/0,reIsBadHex=/^[-+]0x[0-9a-f]+$/i,reIsBinary=/^0b[01]+$/i,reIsOctal=/^0o[0-7]+$/i,freeParseInt=parseInt;function toNumber(a){if(typeof a=="number")return a;if(isSymbol(a))return NAN;if(isObject$5(a)){var s=typeof a.valueOf=="function"?a.valueOf():a;a=isObject$5(s)?s+"":s}if(typeof a!="string")return a===0?a:+a;a=baseTrim(a);var u=reIsBinary.test(a);return u||reIsOctal.test(a)?freeParseInt(a.slice(2),u?2:8):reIsBadHex.test(a)?NAN:+a}function identity$2(a){return a}var asyncTag="[object AsyncFunction]",funcTag$2="[object Function]",genTag$1="[object GeneratorFunction]",proxyTag="[object Proxy]";function isFunction$4(a){if(!isObject$5(a))return!1;var s=baseGetTag(a);return s==funcTag$2||s==genTag$1||s==asyncTag||s==proxyTag}var coreJsData=root$1["__core-js_shared__"],coreJsData$1=coreJsData,maskSrcKey=function(){var a=/[^.]+$/.exec(coreJsData$1&&coreJsData$1.keys&&coreJsData$1.keys.IE_PROTO||"");return a?"Symbol(src)_1."+a:""}();function isMasked(a){return!!maskSrcKey&&maskSrcKey in a}var funcProto$2=Function.prototype,funcToString$2=funcProto$2.toString;function toSource(a){if(a!=null){try{return funcToString$2.call(a)}catch{}try{return a+""}catch{}}return""}var reRegExpChar=/[\\^$.*+?()[\]{}|]/g,reIsHostCtor=/^\[object .+?Constructor\]$/,funcProto$1=Function.prototype,objectProto$e=Object.prototype,funcToString$1=funcProto$1.toString,hasOwnProperty$c=objectProto$e.hasOwnProperty,reIsNative=RegExp("^"+funcToString$1.call(hasOwnProperty$c).replace(reRegExpChar,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function baseIsNative(a){if(!isObject$5(a)||isMasked(a))return!1;var s=isFunction$4(a)?reIsNative:reIsHostCtor;return s.test(toSource(a))}function getValue(a,s){return a==null?void 0:a[s]}function getNative(a,s){var u=getValue(a,s);return baseIsNative(u)?u:void 0}var WeakMap$2=getNative(root$1,"WeakMap"),WeakMap$3=WeakMap$2,objectCreate$1=Object.create,baseCreate=function(){function a(){}return function(s){if(!isObject$5(s))return{};if(objectCreate$1)return objectCreate$1(s);a.prototype=s;var u=new a;return a.prototype=void 0,u}}(),baseCreate$1=baseCreate;function apply(a,s,u){switch(u.length){case 0:return a.call(s);case 1:return a.call(s,u[0]);case 2:return a.call(s,u[0],u[1]);case 3:return a.call(s,u[0],u[1],u[2])}return a.apply(s,u)}function copyArray(a,s){var u=-1,d=a.length;for(s||(s=Array(d));++u<d;)s[u]=a[u];return s}var HOT_COUNT=800,HOT_SPAN=16,nativeNow=Date.now;function shortOut(a){var s=0,u=0;return function(){var d=nativeNow(),l=HOT_SPAN-(d-u);if(u=d,l>0){if(++s>=HOT_COUNT)return arguments[0]}else s=0;return a.apply(void 0,arguments)}}function constant(a){return function(){return a}}var defineProperty$1=function(){try{var a=getNative(Object,"defineProperty");return a({},"",{}),a}catch{}}(),defineProperty$2=defineProperty$1,baseSetToString=defineProperty$2?function(a,s){return defineProperty$2(a,"toString",{configurable:!0,enumerable:!1,value:constant(s),writable:!0})}:identity$2,baseSetToString$1=baseSetToString,setToString=shortOut(baseSetToString$1),setToString$1=setToString;function arrayEach(a,s){for(var u=-1,d=a==null?0:a.length;++u<d&&s(a[u],u,a)!==!1;);return a}function baseFindIndex(a,s,u,d){for(var l=a.length,p=u+(d?1:-1);d?p--:++p<l;)if(s(a[p],p,a))return p;return-1}function baseIsNaN(a){return a!==a}function strictIndexOf(a,s,u){for(var d=u-1,l=a.length;++d<l;)if(a[d]===s)return d;return-1}function baseIndexOf(a,s,u){return s===s?strictIndexOf(a,s,u):baseFindIndex(a,baseIsNaN,u)}var MAX_SAFE_INTEGER$1=9007199254740991,reIsUint=/^(?:0|[1-9]\d*)$/;function isIndex(a,s){var u=typeof a;return s=s==null?MAX_SAFE_INTEGER$1:s,!!s&&(u=="number"||u!="symbol"&&reIsUint.test(a))&&a>-1&&a%1==0&&a<s}function baseAssignValue(a,s,u){s=="__proto__"&&defineProperty$2?defineProperty$2(a,s,{configurable:!0,enumerable:!0,value:u,writable:!0}):a[s]=u}function eq(a,s){return a===s||a!==a&&s!==s}var objectProto$d=Object.prototype,hasOwnProperty$b=objectProto$d.hasOwnProperty;function assignValue(a,s,u){var d=a[s];(!(hasOwnProperty$b.call(a,s)&&eq(d,u))||u===void 0&&!(s in a))&&baseAssignValue(a,s,u)}function copyObject(a,s,u,d){var l=!u;u||(u={});for(var p=-1,h=s.length;++p<h;){var y=s[p],_=d?d(u[y],a[y],y,u,a):void 0;_===void 0&&(_=a[y]),l?baseAssignValue(u,y,_):assignValue(u,y,_)}return u}var nativeMax$1=Math.max;function overRest(a,s,u){return s=nativeMax$1(s===void 0?a.length-1:s,0),function(){for(var d=arguments,l=-1,p=nativeMax$1(d.length-s,0),h=Array(p);++l<p;)h[l]=d[s+l];l=-1;for(var y=Array(s+1);++l<s;)y[l]=d[l];return y[s]=u(h),apply(a,this,y)}}function baseRest(a,s){return setToString$1(overRest(a,s,identity$2),a+"")}var MAX_SAFE_INTEGER=9007199254740991;function isLength(a){return typeof a=="number"&&a>-1&&a%1==0&&a<=MAX_SAFE_INTEGER}function isArrayLike$2(a){return a!=null&&isLength(a.length)&&!isFunction$4(a)}function isIterateeCall(a,s,u){if(!isObject$5(u))return!1;var d=typeof s;return(d=="number"?isArrayLike$2(u)&&isIndex(s,u.length):d=="string"&&s in u)?eq(u[s],a):!1}var objectProto$c=Object.prototype;function isPrototype(a){var s=a&&a.constructor,u=typeof s=="function"&&s.prototype||objectProto$c;return a===u}function baseTimes(a,s){for(var u=-1,d=Array(a);++u<a;)d[u]=s(u);return d}var argsTag$3="[object Arguments]";function baseIsArguments(a){return isObjectLike(a)&&baseGetTag(a)==argsTag$3}var objectProto$b=Object.prototype,hasOwnProperty$a=objectProto$b.hasOwnProperty,propertyIsEnumerable$1=objectProto$b.propertyIsEnumerable,isArguments=baseIsArguments(function(){return arguments}())?baseIsArguments:function(a){return isObjectLike(a)&&hasOwnProperty$a.call(a,"callee")&&!propertyIsEnumerable$1.call(a,"callee")},isArguments$1=isArguments;function stubFalse(){return!1}var freeExports$2=typeof exports=="object"&&exports&&!exports.nodeType&&exports,freeModule$2=freeExports$2&&typeof module=="object"&&module&&!module.nodeType&&module,moduleExports$2=freeModule$2&&freeModule$2.exports===freeExports$2,Buffer$2=moduleExports$2?root$1.Buffer:void 0,nativeIsBuffer=Buffer$2?Buffer$2.isBuffer:void 0,isBuffer$1=nativeIsBuffer||stubFalse,isBuffer$2=isBuffer$1,argsTag$2="[object Arguments]",arrayTag$2="[object Array]",boolTag$3="[object Boolean]",dateTag$3="[object Date]",errorTag$2="[object Error]",funcTag$1="[object Function]",mapTag$5="[object Map]",numberTag$3="[object Number]",objectTag$4="[object Object]",regexpTag$3="[object RegExp]",setTag$5="[object Set]",stringTag$3="[object String]",weakMapTag$2="[object WeakMap]",arrayBufferTag$3="[object ArrayBuffer]",dataViewTag$4="[object DataView]",float32Tag$2="[object Float32Array]",float64Tag$2="[object Float64Array]",int8Tag$2="[object Int8Array]",int16Tag$2="[object Int16Array]",int32Tag$2="[object Int32Array]",uint8Tag$2="[object Uint8Array]",uint8ClampedTag$2="[object Uint8ClampedArray]",uint16Tag$2="[object Uint16Array]",uint32Tag$2="[object Uint32Array]",typedArrayTags={};typedArrayTags[float32Tag$2]=typedArrayTags[float64Tag$2]=typedArrayTags[int8Tag$2]=typedArrayTags[int16Tag$2]=typedArrayTags[int32Tag$2]=typedArrayTags[uint8Tag$2]=typedArrayTags[uint8ClampedTag$2]=typedArrayTags[uint16Tag$2]=typedArrayTags[uint32Tag$2]=!0,typedArrayTags[argsTag$2]=typedArrayTags[arrayTag$2]=typedArrayTags[arrayBufferTag$3]=typedArrayTags[boolTag$3]=typedArrayTags[dataViewTag$4]=typedArrayTags[dateTag$3]=typedArrayTags[errorTag$2]=typedArrayTags[funcTag$1]=typedArrayTags[mapTag$5]=typedArrayTags[numberTag$3]=typedArrayTags[objectTag$4]=typedArrayTags[regexpTag$3]=typedArrayTags[setTag$5]=typedArrayTags[stringTag$3]=typedArrayTags[weakMapTag$2]=!1;function baseIsTypedArray(a){return isObjectLike(a)&&isLength(a.length)&&!!typedArrayTags[baseGetTag(a)]}function baseUnary(a){return function(s){return a(s)}}var freeExports$1=typeof exports=="object"&&exports&&!exports.nodeType&&exports,freeModule$1=freeExports$1&&typeof module=="object"&&module&&!module.nodeType&&module,moduleExports$1=freeModule$1&&freeModule$1.exports===freeExports$1,freeProcess=moduleExports$1&&freeGlobal$1.process,nodeUtil=function(){try{var a=freeModule$1&&freeModule$1.require&&freeModule$1.require("util").types;return a||freeProcess&&freeProcess.binding&&freeProcess.binding("util")}catch{}}(),nodeUtil$1=nodeUtil,nodeIsTypedArray=nodeUtil$1&&nodeUtil$1.isTypedArray,isTypedArray=nodeIsTypedArray?baseUnary(nodeIsTypedArray):baseIsTypedArray,isTypedArray$1=isTypedArray,objectProto$a=Object.prototype,hasOwnProperty$9=objectProto$a.hasOwnProperty;function arrayLikeKeys(a,s){var u=isArray$7(a),d=!u&&isArguments$1(a),l=!u&&!d&&isBuffer$2(a),p=!u&&!d&&!l&&isTypedArray$1(a),h=u||d||l||p,y=h?baseTimes(a.length,String):[],_=y.length;for(var E in a)(s||hasOwnProperty$9.call(a,E))&&!(h&&(E=="length"||l&&(E=="offset"||E=="parent")||p&&(E=="buffer"||E=="byteLength"||E=="byteOffset")||isIndex(E,_)))&&y.push(E);return y}function overArg(a,s){return function(u){return a(s(u))}}var nativeKeys=overArg(Object.keys,Object),nativeKeys$1=nativeKeys,objectProto$9=Object.prototype,hasOwnProperty$8=objectProto$9.hasOwnProperty;function baseKeys(a){if(!isPrototype(a))return nativeKeys$1(a);var s=[];for(var u in Object(a))hasOwnProperty$8.call(a,u)&&u!="constructor"&&s.push(u);return s}function keys$1(a){return isArrayLike$2(a)?arrayLikeKeys(a):baseKeys(a)}function nativeKeysIn(a){var s=[];if(a!=null)for(var u in Object(a))s.push(u);return s}var objectProto$8=Object.prototype,hasOwnProperty$7=objectProto$8.hasOwnProperty;function baseKeysIn(a){if(!isObject$5(a))return nativeKeysIn(a);var s=isPrototype(a),u=[];for(var d in a)d=="constructor"&&(s||!hasOwnProperty$7.call(a,d))||u.push(d);return u}function keysIn(a){return isArrayLike$2(a)?arrayLikeKeys(a,!0):baseKeysIn(a)}var reIsDeepProp=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,reIsPlainProp=/^\w*$/;function isKey(a,s){if(isArray$7(a))return!1;var u=typeof a;return u=="number"||u=="symbol"||u=="boolean"||a==null||isSymbol(a)?!0:reIsPlainProp.test(a)||!reIsDeepProp.test(a)||s!=null&&a in Object(s)}var nativeCreate=getNative(Object,"create"),nativeCreate$1=nativeCreate;function hashClear(){this.__data__=nativeCreate$1?nativeCreate$1(null):{},this.size=0}function hashDelete(a){var s=this.has(a)&&delete this.__data__[a];return this.size-=s?1:0,s}var HASH_UNDEFINED$2="__lodash_hash_undefined__",objectProto$7=Object.prototype,hasOwnProperty$6=objectProto$7.hasOwnProperty;function hashGet(a){var s=this.__data__;if(nativeCreate$1){var u=s[a];return u===HASH_UNDEFINED$2?void 0:u}return hasOwnProperty$6.call(s,a)?s[a]:void 0}var objectProto$6=Object.prototype,hasOwnProperty$5=objectProto$6.hasOwnProperty;function hashHas(a){var s=this.__data__;return nativeCreate$1?s[a]!==void 0:hasOwnProperty$5.call(s,a)}var HASH_UNDEFINED$1="__lodash_hash_undefined__";function hashSet(a,s){var u=this.__data__;return this.size+=this.has(a)?0:1,u[a]=nativeCreate$1&&s===void 0?HASH_UNDEFINED$1:s,this}function Hash(a){var s=-1,u=a==null?0:a.length;for(this.clear();++s<u;){var d=a[s];this.set(d[0],d[1])}}Hash.prototype.clear=hashClear,Hash.prototype.delete=hashDelete,Hash.prototype.get=hashGet,Hash.prototype.has=hashHas,Hash.prototype.set=hashSet;function listCacheClear(){this.__data__=[],this.size=0}function assocIndexOf(a,s){for(var u=a.length;u--;)if(eq(a[u][0],s))return u;return-1}var arrayProto$1=Array.prototype,splice$1=arrayProto$1.splice;function listCacheDelete(a){var s=this.__data__,u=assocIndexOf(s,a);if(u<0)return!1;var d=s.length-1;return u==d?s.pop():splice$1.call(s,u,1),--this.size,!0}function listCacheGet(a){var s=this.__data__,u=assocIndexOf(s,a);return u<0?void 0:s[u][1]}function listCacheHas(a){return assocIndexOf(this.__data__,a)>-1}function listCacheSet(a,s){var u=this.__data__,d=assocIndexOf(u,a);return d<0?(++this.size,u.push([a,s])):u[d][1]=s,this}function ListCache(a){var s=-1,u=a==null?0:a.length;for(this.clear();++s<u;){var d=a[s];this.set(d[0],d[1])}}ListCache.prototype.clear=listCacheClear,ListCache.prototype.delete=listCacheDelete,ListCache.prototype.get=listCacheGet,ListCache.prototype.has=listCacheHas,ListCache.prototype.set=listCacheSet;var Map$1=getNative(root$1,"Map"),Map$2=Map$1;function mapCacheClear(){this.size=0,this.__data__={hash:new Hash,map:new(Map$2||ListCache),string:new Hash}}function isKeyable(a){var s=typeof a;return s=="string"||s=="number"||s=="symbol"||s=="boolean"?a!=="__proto__":a===null}function getMapData(a,s){var u=a.__data__;return isKeyable(s)?u[typeof s=="string"?"string":"hash"]:u.map}function mapCacheDelete(a){var s=getMapData(this,a).delete(a);return this.size-=s?1:0,s}function mapCacheGet(a){return getMapData(this,a).get(a)}function mapCacheHas(a){return getMapData(this,a).has(a)}function mapCacheSet(a,s){var u=getMapData(this,a),d=u.size;return u.set(a,s),this.size+=u.size==d?0:1,this}function MapCache(a){var s=-1,u=a==null?0:a.length;for(this.clear();++s<u;){var d=a[s];this.set(d[0],d[1])}}MapCache.prototype.clear=mapCacheClear,MapCache.prototype.delete=mapCacheDelete,MapCache.prototype.get=mapCacheGet,MapCache.prototype.has=mapCacheHas,MapCache.prototype.set=mapCacheSet;var FUNC_ERROR_TEXT$1="Expected a function";function memoize(a,s){if(typeof a!="function"||s!=null&&typeof s!="function")throw new TypeError(FUNC_ERROR_TEXT$1);var u=function(){var d=arguments,l=s?s.apply(this,d):d[0],p=u.cache;if(p.has(l))return p.get(l);var h=a.apply(this,d);return u.cache=p.set(l,h)||p,h};return u.cache=new(memoize.Cache||MapCache),u}memoize.Cache=MapCache;var MAX_MEMOIZE_SIZE=500;function memoizeCapped(a){var s=memoize(a,function(d){return u.size===MAX_MEMOIZE_SIZE&&u.clear(),d}),u=s.cache;return s}var rePropName=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,reEscapeChar=/\\(\\)?/g,stringToPath=memoizeCapped(function(a){var s=[];return a.charCodeAt(0)===46&&s.push(""),a.replace(rePropName,function(u,d,l,p){s.push(l?p.replace(reEscapeChar,"$1"):d||u)}),s}),stringToPath$1=stringToPath;function toString$1(a){return a==null?"":baseToString(a)}function castPath(a,s){return isArray$7(a)?a:isKey(a,s)?[a]:stringToPath$1(toString$1(a))}var INFINITY=1/0;function toKey(a){if(typeof a=="string"||isSymbol(a))return a;var s=a+"";return s=="0"&&1/a==-INFINITY?"-0":s}function baseGet(a,s){s=castPath(s,a);for(var u=0,d=s.length;a!=null&&u<d;)a=a[toKey(s[u++])];return u&&u==d?a:void 0}function get(a,s,u){var d=a==null?void 0:baseGet(a,s);return d===void 0?u:d}function arrayPush(a,s){for(var u=-1,d=s.length,l=a.length;++u<d;)a[l+u]=s[u];return a}var spreadableSymbol=Symbol$2?Symbol$2.isConcatSpreadable:void 0;function isFlattenable(a){return isArray$7(a)||isArguments$1(a)||!!(spreadableSymbol&&a&&a[spreadableSymbol])}function baseFlatten(a,s,u,d,l){var p=-1,h=a.length;for(u||(u=isFlattenable),l||(l=[]);++p<h;){var y=a[p];s>0&&u(y)?s>1?baseFlatten(y,s-1,u,d,l):arrayPush(l,y):d||(l[l.length]=y)}return l}function flatten(a){var s=a==null?0:a.length;return s?baseFlatten(a,1):[]}function flatRest(a){return setToString$1(overRest(a,void 0,flatten),a+"")}var getPrototype=overArg(Object.getPrototypeOf,Object),getPrototype$1=getPrototype,objectTag$3="[object Object]",funcProto=Function.prototype,objectProto$5=Object.prototype,funcToString=funcProto.toString,hasOwnProperty$4=objectProto$5.hasOwnProperty,objectCtorString=funcToString.call(Object);function isPlainObject$1(a){if(!isObjectLike(a)||baseGetTag(a)!=objectTag$3)return!1;var s=getPrototype$1(a);if(s===null)return!0;var u=hasOwnProperty$4.call(s,"constructor")&&s.constructor;return typeof u=="function"&&u instanceof u&&funcToString.call(u)==objectCtorString}function baseSlice(a,s,u){var d=-1,l=a.length;s<0&&(s=-s>l?0:l+s),u=u>l?l:u,u<0&&(u+=l),l=s>u?0:u-s>>>0,s>>>=0;for(var p=Array(l);++d<l;)p[d]=a[d+s];return p}function castSlice(a,s,u){var d=a.length;return u=u===void 0?d:u,!s&&u>=d?a:baseSlice(a,s,u)}var rsAstralRange$2="\\ud800-\\udfff",rsComboMarksRange$3="\\u0300-\\u036f",reComboHalfMarksRange$3="\\ufe20-\\ufe2f",rsComboSymbolsRange$3="\\u20d0-\\u20ff",rsComboRange$3=rsComboMarksRange$3+reComboHalfMarksRange$3+rsComboSymbolsRange$3,rsVarRange$2="\\ufe0e\\ufe0f",rsZWJ$2="\\u200d",reHasUnicode=RegExp("["+rsZWJ$2+rsAstralRange$2+rsComboRange$3+rsVarRange$2+"]");function hasUnicode(a){return reHasUnicode.test(a)}function asciiToArray(a){return a.split("")}var rsAstralRange$1="\\ud800-\\udfff",rsComboMarksRange$2="\\u0300-\\u036f",reComboHalfMarksRange$2="\\ufe20-\\ufe2f",rsComboSymbolsRange$2="\\u20d0-\\u20ff",rsComboRange$2=rsComboMarksRange$2+reComboHalfMarksRange$2+rsComboSymbolsRange$2,rsVarRange$1="\\ufe0e\\ufe0f",rsAstral="["+rsAstralRange$1+"]",rsCombo$2="["+rsComboRange$2+"]",rsFitz$1="\\ud83c[\\udffb-\\udfff]",rsModifier$1="(?:"+rsCombo$2+"|"+rsFitz$1+")",rsNonAstral$1="[^"+rsAstralRange$1+"]",rsRegional$1="(?:\\ud83c[\\udde6-\\uddff]){2}",rsSurrPair$1="[\\ud800-\\udbff][\\udc00-\\udfff]",rsZWJ$1="\\u200d",reOptMod$1=rsModifier$1+"?",rsOptVar$1="["+rsVarRange$1+"]?",rsOptJoin$1="(?:"+rsZWJ$1+"(?:"+[rsNonAstral$1,rsRegional$1,rsSurrPair$1].join("|")+")"+rsOptVar$1+reOptMod$1+")*",rsSeq$1=rsOptVar$1+reOptMod$1+rsOptJoin$1,rsSymbol="(?:"+[rsNonAstral$1+rsCombo$2+"?",rsCombo$2,rsRegional$1,rsSurrPair$1,rsAstral].join("|")+")",reUnicode=RegExp(rsFitz$1+"(?="+rsFitz$1+")|"+rsSymbol+rsSeq$1,"g");function unicodeToArray(a){return a.match(reUnicode)||[]}function stringToArray(a){return hasUnicode(a)?unicodeToArray(a):asciiToArray(a)}function createCaseFirst(a){return function(s){s=toString$1(s);var u=hasUnicode(s)?stringToArray(s):void 0,d=u?u[0]:s.charAt(0),l=u?castSlice(u,1).join(""):s.slice(1);return d[a]()+l}}var upperFirst=createCaseFirst("toUpperCase"),upperFirst$1=upperFirst;function capitalize(a){return upperFirst$1(toString$1(a).toLowerCase())}function arrayReduce(a,s,u,d){var l=-1,p=a==null?0:a.length;for(d&&p&&(u=a[++l]);++l<p;)u=s(u,a[l],l,a);return u}function basePropertyOf(a){return function(s){return a==null?void 0:a[s]}}var deburredLetters={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},deburrLetter=basePropertyOf(deburredLetters),deburrLetter$1=deburrLetter,reLatin=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,rsComboMarksRange$1="\\u0300-\\u036f",reComboHalfMarksRange$1="\\ufe20-\\ufe2f",rsComboSymbolsRange$1="\\u20d0-\\u20ff",rsComboRange$1=rsComboMarksRange$1+reComboHalfMarksRange$1+rsComboSymbolsRange$1,rsCombo$1="["+rsComboRange$1+"]",reComboMark=RegExp(rsCombo$1,"g");function deburr(a){return a=toString$1(a),a&&a.replace(reLatin,deburrLetter$1).replace(reComboMark,"")}var reAsciiWord=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;function asciiWords(a){return a.match(reAsciiWord)||[]}var reHasUnicodeWord=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;function hasUnicodeWord(a){return reHasUnicodeWord.test(a)}var rsAstralRange="\\ud800-\\udfff",rsComboMarksRange="\\u0300-\\u036f",reComboHalfMarksRange="\\ufe20-\\ufe2f",rsComboSymbolsRange="\\u20d0-\\u20ff",rsComboRange=rsComboMarksRange+reComboHalfMarksRange+rsComboSymbolsRange,rsDingbatRange="\\u2700-\\u27bf",rsLowerRange="a-z\\xdf-\\xf6\\xf8-\\xff",rsMathOpRange="\\xac\\xb1\\xd7\\xf7",rsNonCharRange="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",rsPunctuationRange="\\u2000-\\u206f",rsSpaceRange=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",rsUpperRange="A-Z\\xc0-\\xd6\\xd8-\\xde",rsVarRange="\\ufe0e\\ufe0f",rsBreakRange=rsMathOpRange+rsNonCharRange+rsPunctuationRange+rsSpaceRange,rsApos$1="['\u2019]",rsBreak="["+rsBreakRange+"]",rsCombo="["+rsComboRange+"]",rsDigits="\\d+",rsDingbat="["+rsDingbatRange+"]",rsLower="["+rsLowerRange+"]",rsMisc="[^"+rsAstralRange+rsBreakRange+rsDigits+rsDingbatRange+rsLowerRange+rsUpperRange+"]",rsFitz="\\ud83c[\\udffb-\\udfff]",rsModifier="(?:"+rsCombo+"|"+rsFitz+")",rsNonAstral="[^"+rsAstralRange+"]",rsRegional="(?:\\ud83c[\\udde6-\\uddff]){2}",rsSurrPair="[\\ud800-\\udbff][\\udc00-\\udfff]",rsUpper="["+rsUpperRange+"]",rsZWJ="\\u200d",rsMiscLower="(?:"+rsLower+"|"+rsMisc+")",rsMiscUpper="(?:"+rsUpper+"|"+rsMisc+")",rsOptContrLower="(?:"+rsApos$1+"(?:d|ll|m|re|s|t|ve))?",rsOptContrUpper="(?:"+rsApos$1+"(?:D|LL|M|RE|S|T|VE))?",reOptMod=rsModifier+"?",rsOptVar="["+rsVarRange+"]?",rsOptJoin="(?:"+rsZWJ+"(?:"+[rsNonAstral,rsRegional,rsSurrPair].join("|")+")"+rsOptVar+reOptMod+")*",rsOrdLower="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",rsOrdUpper="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",rsSeq=rsOptVar+reOptMod+rsOptJoin,rsEmoji="(?:"+[rsDingbat,rsRegional,rsSurrPair].join("|")+")"+rsSeq,reUnicodeWord=RegExp([rsUpper+"?"+rsLower+"+"+rsOptContrLower+"(?="+[rsBreak,rsUpper,"$"].join("|")+")",rsMiscUpper+"+"+rsOptContrUpper+"(?="+[rsBreak,rsUpper+rsMiscLower,"$"].join("|")+")",rsUpper+"?"+rsMiscLower+"+"+rsOptContrLower,rsUpper+"+"+rsOptContrUpper,rsOrdUpper,rsOrdLower,rsDigits,rsEmoji].join("|"),"g");function unicodeWords(a){return a.match(reUnicodeWord)||[]}function words(a,s,u){return a=toString$1(a),s=u?void 0:s,s===void 0?hasUnicodeWord(a)?unicodeWords(a):asciiWords(a):a.match(s)||[]}var rsApos="['\u2019]",reApos=RegExp(rsApos,"g");function createCompounder(a){return function(s){return arrayReduce(words(deburr(s).replace(reApos,"")),a,"")}}var camelCase$2=createCompounder(function(a,s,u){return s=s.toLowerCase(),a+(u?capitalize(s):s)}),camelCase$3=camelCase$2;function stackClear(){this.__data__=new ListCache,this.size=0}function stackDelete(a){var s=this.__data__,u=s.delete(a);return this.size=s.size,u}function stackGet(a){return this.__data__.get(a)}function stackHas(a){return this.__data__.has(a)}var LARGE_ARRAY_SIZE=200;function stackSet(a,s){var u=this.__data__;if(u instanceof ListCache){var d=u.__data__;if(!Map$2||d.length<LARGE_ARRAY_SIZE-1)return d.push([a,s]),this.size=++u.size,this;u=this.__data__=new MapCache(d)}return u.set(a,s),this.size=u.size,this}function Stack(a){var s=this.__data__=new ListCache(a);this.size=s.size}Stack.prototype.clear=stackClear,Stack.prototype.delete=stackDelete,Stack.prototype.get=stackGet,Stack.prototype.has=stackHas,Stack.prototype.set=stackSet;function baseAssign(a,s){return a&&copyObject(s,keys$1(s),a)}function baseAssignIn(a,s){return a&&copyObject(s,keysIn(s),a)}var freeExports=typeof exports=="object"&&exports&&!exports.nodeType&&exports,freeModule=freeExports&&typeof module=="object"&&module&&!module.nodeType&&module,moduleExports=freeModule&&freeModule.exports===freeExports,Buffer$1=moduleExports?root$1.Buffer:void 0,allocUnsafe=Buffer$1?Buffer$1.allocUnsafe:void 0;function cloneBuffer(a,s){if(s)return a.slice();var u=a.length,d=allocUnsafe?allocUnsafe(u):new a.constructor(u);return a.copy(d),d}function arrayFilter(a,s){for(var u=-1,d=a==null?0:a.length,l=0,p=[];++u<d;){var h=a[u];s(h,u,a)&&(p[l++]=h)}return p}function stubArray(){return[]}var objectProto$4=Object.prototype,propertyIsEnumerable=objectProto$4.propertyIsEnumerable,nativeGetSymbols$1=Object.getOwnPropertySymbols,getSymbols=nativeGetSymbols$1?function(a){return a==null?[]:(a=Object(a),arrayFilter(nativeGetSymbols$1(a),function(s){return propertyIsEnumerable.call(a,s)}))}:stubArray,getSymbols$1=getSymbols;function copySymbols(a,s){return copyObject(a,getSymbols$1(a),s)}var nativeGetSymbols=Object.getOwnPropertySymbols,getSymbolsIn=nativeGetSymbols?function(a){for(var s=[];a;)arrayPush(s,getSymbols$1(a)),a=getPrototype$1(a);return s}:stubArray,getSymbolsIn$1=getSymbolsIn;function copySymbolsIn(a,s){return copyObject(a,getSymbolsIn$1(a),s)}function baseGetAllKeys(a,s,u){var d=s(a);return isArray$7(a)?d:arrayPush(d,u(a))}function getAllKeys(a){return baseGetAllKeys(a,keys$1,getSymbols$1)}function getAllKeysIn(a){return baseGetAllKeys(a,keysIn,getSymbolsIn$1)}var DataView$1=getNative(root$1,"DataView"),DataView$2=DataView$1,Promise$1=getNative(root$1,"Promise"),Promise$2=Promise$1,Set$1=getNative(root$1,"Set"),Set$2=Set$1,mapTag$4="[object Map]",objectTag$2="[object Object]",promiseTag="[object Promise]",setTag$4="[object Set]",weakMapTag$1="[object WeakMap]",dataViewTag$3="[object DataView]",dataViewCtorString=toSource(DataView$2),mapCtorString=toSource(Map$2),promiseCtorString=toSource(Promise$2),setCtorString=toSource(Set$2),weakMapCtorString=toSource(WeakMap$3),getTag=baseGetTag;(DataView$2&&getTag(new DataView$2(new ArrayBuffer(1)))!=dataViewTag$3||Map$2&&getTag(new Map$2)!=mapTag$4||Promise$2&&getTag(Promise$2.resolve())!=promiseTag||Set$2&&getTag(new Set$2)!=setTag$4||WeakMap$3&&getTag(new WeakMap$3)!=weakMapTag$1)&&(getTag=function(a){var s=baseGetTag(a),u=s==objectTag$2?a.constructor:void 0,d=u?toSource(u):"";if(d)switch(d){case dataViewCtorString:return dataViewTag$3;case mapCtorString:return mapTag$4;case promiseCtorString:return promiseTag;case setCtorString:return setTag$4;case weakMapCtorString:return weakMapTag$1}return s});var getTag$1=getTag,objectProto$3=Object.prototype,hasOwnProperty$3=objectProto$3.hasOwnProperty;function initCloneArray(a){var s=a.length,u=new a.constructor(s);return s&&typeof a[0]=="string"&&hasOwnProperty$3.call(a,"index")&&(u.index=a.index,u.input=a.input),u}var Uint8Array$1=root$1.Uint8Array,Uint8Array$2=Uint8Array$1;function cloneArrayBuffer(a){var s=new a.constructor(a.byteLength);return new Uint8Array$2(s).set(new Uint8Array$2(a)),s}function cloneDataView(a,s){var u=s?cloneArrayBuffer(a.buffer):a.buffer;return new a.constructor(u,a.byteOffset,a.byteLength)}var reFlags=/\w*$/;function cloneRegExp(a){var s=new a.constructor(a.source,reFlags.exec(a));return s.lastIndex=a.lastIndex,s}var symbolProto$1=Symbol$2?Symbol$2.prototype:void 0,symbolValueOf$1=symbolProto$1?symbolProto$1.valueOf:void 0;function cloneSymbol(a){return symbolValueOf$1?Object(symbolValueOf$1.call(a)):{}}function cloneTypedArray(a,s){var u=s?cloneArrayBuffer(a.buffer):a.buffer;return new a.constructor(u,a.byteOffset,a.length)}var boolTag$2="[object Boolean]",dateTag$2="[object Date]",mapTag$3="[object Map]",numberTag$2="[object Number]",regexpTag$2="[object RegExp]",setTag$3="[object Set]",stringTag$2="[object String]",symbolTag$2="[object Symbol]",arrayBufferTag$2="[object ArrayBuffer]",dataViewTag$2="[object DataView]",float32Tag$1="[object Float32Array]",float64Tag$1="[object Float64Array]",int8Tag$1="[object Int8Array]",int16Tag$1="[object Int16Array]",int32Tag$1="[object Int32Array]",uint8Tag$1="[object Uint8Array]",uint8ClampedTag$1="[object Uint8ClampedArray]",uint16Tag$1="[object Uint16Array]",uint32Tag$1="[object Uint32Array]";function initCloneByTag(a,s,u){var d=a.constructor;switch(s){case arrayBufferTag$2:return cloneArrayBuffer(a);case boolTag$2:case dateTag$2:return new d(+a);case dataViewTag$2:return cloneDataView(a,u);case float32Tag$1:case float64Tag$1:case int8Tag$1:case int16Tag$1:case int32Tag$1:case uint8Tag$1:case uint8ClampedTag$1:case uint16Tag$1:case uint32Tag$1:return cloneTypedArray(a,u);case mapTag$3:return new d;case numberTag$2:case stringTag$2:return new d(a);case regexpTag$2:return cloneRegExp(a);case setTag$3:return new d;case symbolTag$2:return cloneSymbol(a)}}function initCloneObject(a){return typeof a.constructor=="function"&&!isPrototype(a)?baseCreate$1(getPrototype$1(a)):{}}var mapTag$2="[object Map]";function baseIsMap(a){return isObjectLike(a)&&getTag$1(a)==mapTag$2}var nodeIsMap=nodeUtil$1&&nodeUtil$1.isMap,isMap=nodeIsMap?baseUnary(nodeIsMap):baseIsMap,isMap$1=isMap,setTag$2="[object Set]";function baseIsSet(a){return isObjectLike(a)&&getTag$1(a)==setTag$2}var nodeIsSet=nodeUtil$1&&nodeUtil$1.isSet,isSet$1=nodeIsSet?baseUnary(nodeIsSet):baseIsSet,isSet$2=isSet$1,CLONE_DEEP_FLAG$2=1,CLONE_FLAT_FLAG$1=2,CLONE_SYMBOLS_FLAG$2=4,argsTag$1="[object Arguments]",arrayTag$1="[object Array]",boolTag$1="[object Boolean]",dateTag$1="[object Date]",errorTag$1="[object Error]",funcTag="[object Function]",genTag="[object GeneratorFunction]",mapTag$1="[object Map]",numberTag$1="[object Number]",objectTag$1="[object Object]",regexpTag$1="[object RegExp]",setTag$1="[object Set]",stringTag$1="[object String]",symbolTag$1="[object Symbol]",weakMapTag="[object WeakMap]",arrayBufferTag$1="[object ArrayBuffer]",dataViewTag$1="[object DataView]",float32Tag="[object Float32Array]",float64Tag="[object Float64Array]",int8Tag="[object Int8Array]",int16Tag="[object Int16Array]",int32Tag="[object Int32Array]",uint8Tag="[object Uint8Array]",uint8ClampedTag="[object Uint8ClampedArray]",uint16Tag="[object Uint16Array]",uint32Tag="[object Uint32Array]",cloneableTags={};cloneableTags[argsTag$1]=cloneableTags[arrayTag$1]=cloneableTags[arrayBufferTag$1]=cloneableTags[dataViewTag$1]=cloneableTags[boolTag$1]=cloneableTags[dateTag$1]=cloneableTags[float32Tag]=cloneableTags[float64Tag]=cloneableTags[int8Tag]=cloneableTags[int16Tag]=cloneableTags[int32Tag]=cloneableTags[mapTag$1]=cloneableTags[numberTag$1]=cloneableTags[objectTag$1]=cloneableTags[regexpTag$1]=cloneableTags[setTag$1]=cloneableTags[stringTag$1]=cloneableTags[symbolTag$1]=cloneableTags[uint8Tag]=cloneableTags[uint8ClampedTag]=cloneableTags[uint16Tag]=cloneableTags[uint32Tag]=!0,cloneableTags[errorTag$1]=cloneableTags[funcTag]=cloneableTags[weakMapTag]=!1;function baseClone(a,s,u,d,l,p){var h,y=s&CLONE_DEEP_FLAG$2,_=s&CLONE_FLAT_FLAG$1,E=s&CLONE_SYMBOLS_FLAG$2;if(u&&(h=l?u(a,d,l,p):u(a)),h!==void 0)return h;if(!isObject$5(a))return a;var I=isArray$7(a);if(I){if(h=initCloneArray(a),!y)return copyArray(a,h)}else{var N=getTag$1(a),w=N==funcTag||N==genTag;if(isBuffer$2(a))return cloneBuffer(a,y);if(N==objectTag$1||N==argsTag$1||w&&!l){if(h=_||w?{}:initCloneObject(a),!y)return _?copySymbolsIn(a,baseAssignIn(h,a)):copySymbols(a,baseAssign(h,a))}else{if(!cloneableTags[N])return l?a:{};h=initCloneByTag(a,N,y)}}p||(p=new Stack);var C=p.get(a);if(C)return C;p.set(a,h),isSet$2(a)?a.forEach(function(J){h.add(baseClone(J,s,u,J,a,p))}):isMap$1(a)&&a.forEach(function(J,W){h.set(W,baseClone(J,s,u,W,a,p))});var D=E?_?getAllKeysIn:getAllKeys:_?keysIn:keys$1,V=I?void 0:D(a);return arrayEach(V||a,function(J,W){V&&(W=J,J=a[W]),assignValue(h,W,baseClone(J,s,u,W,a,p))}),h}var CLONE_DEEP_FLAG$1=1,CLONE_SYMBOLS_FLAG$1=4;function cloneDeep(a){return baseClone(a,CLONE_DEEP_FLAG$1|CLONE_SYMBOLS_FLAG$1)}var HASH_UNDEFINED="__lodash_hash_undefined__";function setCacheAdd(a){return this.__data__.set(a,HASH_UNDEFINED),this}function setCacheHas(a){return this.__data__.has(a)}function SetCache(a){var s=-1,u=a==null?0:a.length;for(this.__data__=new MapCache;++s<u;)this.add(a[s])}SetCache.prototype.add=SetCache.prototype.push=setCacheAdd,SetCache.prototype.has=setCacheHas;function arraySome(a,s){for(var u=-1,d=a==null?0:a.length;++u<d;)if(s(a[u],u,a))return!0;return!1}function cacheHas(a,s){return a.has(s)}var COMPARE_PARTIAL_FLAG$5=1,COMPARE_UNORDERED_FLAG$3=2;function equalArrays(a,s,u,d,l,p){var h=u&COMPARE_PARTIAL_FLAG$5,y=a.length,_=s.length;if(y!=_&&!(h&&_>y))return!1;var E=p.get(a),I=p.get(s);if(E&&I)return E==s&&I==a;var N=-1,w=!0,C=u&COMPARE_UNORDERED_FLAG$3?new SetCache:void 0;for(p.set(a,s),p.set(s,a);++N<y;){var D=a[N],V=s[N];if(d)var J=h?d(V,D,N,s,a,p):d(D,V,N,a,s,p);if(J!==void 0){if(J)continue;w=!1;break}if(C){if(!arraySome(s,function(W,g){if(!cacheHas(C,g)&&(D===W||l(D,W,u,d,p)))return C.push(g)})){w=!1;break}}else if(!(D===V||l(D,V,u,d,p))){w=!1;break}}return p.delete(a),p.delete(s),w}function mapToArray(a){var s=-1,u=Array(a.size);return a.forEach(function(d,l){u[++s]=[l,d]}),u}function setToArray(a){var s=-1,u=Array(a.size);return a.forEach(function(d){u[++s]=d}),u}var COMPARE_PARTIAL_FLAG$4=1,COMPARE_UNORDERED_FLAG$2=2,boolTag="[object Boolean]",dateTag="[object Date]",errorTag="[object Error]",mapTag="[object Map]",numberTag="[object Number]",regexpTag="[object RegExp]",setTag="[object Set]",stringTag="[object String]",symbolTag="[object Symbol]",arrayBufferTag="[object ArrayBuffer]",dataViewTag="[object DataView]",symbolProto=Symbol$2?Symbol$2.prototype:void 0,symbolValueOf=symbolProto?symbolProto.valueOf:void 0;function equalByTag(a,s,u,d,l,p,h){switch(u){case dataViewTag:if(a.byteLength!=s.byteLength||a.byteOffset!=s.byteOffset)return!1;a=a.buffer,s=s.buffer;case arrayBufferTag:return!(a.byteLength!=s.byteLength||!p(new Uint8Array$2(a),new Uint8Array$2(s)));case boolTag:case dateTag:case numberTag:return eq(+a,+s);case errorTag:return a.name==s.name&&a.message==s.message;case regexpTag:case stringTag:return a==s+"";case mapTag:var y=mapToArray;case setTag:var _=d&COMPARE_PARTIAL_FLAG$4;if(y||(y=setToArray),a.size!=s.size&&!_)return!1;var E=h.get(a);if(E)return E==s;d|=COMPARE_UNORDERED_FLAG$2,h.set(a,s);var I=equalArrays(y(a),y(s),d,l,p,h);return h.delete(a),I;case symbolTag:if(symbolValueOf)return symbolValueOf.call(a)==symbolValueOf.call(s)}return!1}var COMPARE_PARTIAL_FLAG$3=1,objectProto$2=Object.prototype,hasOwnProperty$2=objectProto$2.hasOwnProperty;function equalObjects(a,s,u,d,l,p){var h=u&COMPARE_PARTIAL_FLAG$3,y=getAllKeys(a),_=y.length,E=getAllKeys(s),I=E.length;if(_!=I&&!h)return!1;for(var N=_;N--;){var w=y[N];if(!(h?w in s:hasOwnProperty$2.call(s,w)))return!1}var C=p.get(a),D=p.get(s);if(C&&D)return C==s&&D==a;var V=!0;p.set(a,s),p.set(s,a);for(var J=h;++N<_;){w=y[N];var W=a[w],g=s[w];if(d)var O=h?d(g,W,w,s,a,p):d(W,g,w,a,s,p);if(!(O===void 0?W===g||l(W,g,u,d,p):O)){V=!1;break}J||(J=w=="constructor")}if(V&&!J){var $=a.constructor,x=s.constructor;$!=x&&"constructor"in a&&"constructor"in s&&!(typeof $=="function"&&$ instanceof $&&typeof x=="function"&&x instanceof x)&&(V=!1)}return p.delete(a),p.delete(s),V}var COMPARE_PARTIAL_FLAG$2=1,argsTag="[object Arguments]",arrayTag="[object Array]",objectTag="[object Object]",objectProto$1=Object.prototype,hasOwnProperty$1=objectProto$1.hasOwnProperty;function baseIsEqualDeep(a,s,u,d,l,p){var h=isArray$7(a),y=isArray$7(s),_=h?arrayTag:getTag$1(a),E=y?arrayTag:getTag$1(s);_=_==argsTag?objectTag:_,E=E==argsTag?objectTag:E;var I=_==objectTag,N=E==objectTag,w=_==E;if(w&&isBuffer$2(a)){if(!isBuffer$2(s))return!1;h=!0,I=!1}if(w&&!I)return p||(p=new Stack),h||isTypedArray$1(a)?equalArrays(a,s,u,d,l,p):equalByTag(a,s,_,u,d,l,p);if(!(u&COMPARE_PARTIAL_FLAG$2)){var C=I&&hasOwnProperty$1.call(a,"__wrapped__"),D=N&&hasOwnProperty$1.call(s,"__wrapped__");if(C||D){var V=C?a.value():a,J=D?s.value():s;return p||(p=new Stack),l(V,J,u,d,p)}}return w?(p||(p=new Stack),equalObjects(a,s,u,d,l,p)):!1}function baseIsEqual(a,s,u,d,l){return a===s?!0:a==null||s==null||!isObjectLike(a)&&!isObjectLike(s)?a!==a&&s!==s:baseIsEqualDeep(a,s,u,d,baseIsEqual,l)}var COMPARE_PARTIAL_FLAG$1=1,COMPARE_UNORDERED_FLAG$1=2;function baseIsMatch(a,s,u,d){var l=u.length,p=l,h=!d;if(a==null)return!p;for(a=Object(a);l--;){var y=u[l];if(h&&y[2]?y[1]!==a[y[0]]:!(y[0]in a))return!1}for(;++l<p;){y=u[l];var _=y[0],E=a[_],I=y[1];if(h&&y[2]){if(E===void 0&&!(_ in a))return!1}else{var N=new Stack;if(d)var w=d(E,I,_,a,s,N);if(!(w===void 0?baseIsEqual(I,E,COMPARE_PARTIAL_FLAG$1|COMPARE_UNORDERED_FLAG$1,d,N):w))return!1}}return!0}function isStrictComparable(a){return a===a&&!isObject$5(a)}function getMatchData(a){for(var s=keys$1(a),u=s.length;u--;){var d=s[u],l=a[d];s[u]=[d,l,isStrictComparable(l)]}return s}function matchesStrictComparable(a,s){return function(u){return u==null?!1:u[a]===s&&(s!==void 0||a in Object(u))}}function baseMatches(a){var s=getMatchData(a);return s.length==1&&s[0][2]?matchesStrictComparable(s[0][0],s[0][1]):function(u){return u===a||baseIsMatch(u,a,s)}}function baseHasIn(a,s){return a!=null&&s in Object(a)}function hasPath(a,s,u){s=castPath(s,a);for(var d=-1,l=s.length,p=!1;++d<l;){var h=toKey(s[d]);if(!(p=a!=null&&u(a,h)))break;a=a[h]}return p||++d!=l?p:(l=a==null?0:a.length,!!l&&isLength(l)&&isIndex(h,l)&&(isArray$7(a)||isArguments$1(a)))}function hasIn(a,s){return a!=null&&hasPath(a,s,baseHasIn)}var COMPARE_PARTIAL_FLAG=1,COMPARE_UNORDERED_FLAG=2;function baseMatchesProperty(a,s){return isKey(a)&&isStrictComparable(s)?matchesStrictComparable(toKey(a),s):function(u){var d=get(u,a);return d===void 0&&d===s?hasIn(u,a):baseIsEqual(s,d,COMPARE_PARTIAL_FLAG|COMPARE_UNORDERED_FLAG)}}function baseProperty(a){return function(s){return s==null?void 0:s[a]}}function basePropertyDeep(a){return function(s){return baseGet(s,a)}}function property(a){return isKey(a)?baseProperty(toKey(a)):basePropertyDeep(a)}function baseIteratee(a){return typeof a=="function"?a:a==null?identity$2:typeof a=="object"?isArray$7(a)?baseMatchesProperty(a[0],a[1]):baseMatches(a):property(a)}function createBaseFor(a){return function(s,u,d){for(var l=-1,p=Object(s),h=d(s),y=h.length;y--;){var _=h[a?y:++l];if(u(p[_],_,p)===!1)break}return s}}var baseFor=createBaseFor(),baseFor$1=baseFor;function baseForOwn(a,s){return a&&baseFor$1(a,s,keys$1)}function createBaseEach(a,s){return function(u,d){if(u==null)return u;if(!isArrayLike$2(u))return a(u,d);for(var l=u.length,p=s?l:-1,h=Object(u);(s?p--:++p<l)&&d(h[p],p,h)!==!1;);return u}}var baseEach=createBaseEach(baseForOwn),baseEach$1=baseEach,now=function(){return root$1.Date.now()},now$1=now,FUNC_ERROR_TEXT="Expected a function",nativeMax=Math.max,nativeMin=Math.min;function debounce$2(a,s,u){var d,l,p,h,y,_,E=0,I=!1,N=!1,w=!0;if(typeof a!="function")throw new TypeError(FUNC_ERROR_TEXT);s=toNumber(s)||0,isObject$5(u)&&(I=!!u.leading,N="maxWait"in u,p=N?nativeMax(toNumber(u.maxWait)||0,s):p,w="trailing"in u?!!u.trailing:w);function C(Y){var te=d,ne=l;return d=l=void 0,E=Y,h=a.apply(ne,te),h}function D(Y){return E=Y,y=setTimeout(W,s),I?C(Y):h}function V(Y){var te=Y-_,ne=Y-E,F=s-te;return N?nativeMin(F,p-ne):F}function J(Y){var te=Y-_,ne=Y-E;return _===void 0||te>=s||te<0||N&&ne>=p}function W(){var Y=now$1();if(J(Y))return g(Y);y=setTimeout(W,V(Y))}function g(Y){return y=void 0,w&&d?C(Y):(d=l=void 0,h)}function O(){y!==void 0&&clearTimeout(y),E=0,d=_=l=y=void 0}function $(){return y===void 0?h:g(now$1())}function x(){var Y=now$1(),te=J(Y);if(d=arguments,l=this,_=Y,te){if(y===void 0)return D(_);if(N)return clearTimeout(y),y=setTimeout(W,s),C(_)}return y===void 0&&(y=setTimeout(W,s)),h}return x.cancel=O,x.flush=$,x}function last$3(a){var s=a==null?0:a.length;return s?a[s-1]:void 0}function baseMap(a,s){var u=-1,d=isArrayLike$2(a)?Array(a.length):[];return baseEach$1(a,function(l,p,h){d[++u]=s(l,p,h)}),d}function parent(a,s){return s.length<2?a:baseGet(a,baseSlice(s,0,-1))}function isEqual(a,s){return baseIsEqual(a,s)}function isMatch(a,s){return a===s||baseIsMatch(a,s,getMatchData(s))}var kebabCase=createCompounder(function(a,s,u){return a+(u?"-":"")+s.toLowerCase()}),kebabCase$1=kebabCase;function baseUnset(a,s){return s=castPath(s,a),a=parent(a,s),a==null||delete a[toKey(last$3(s))]}function customOmitClone(a){return isPlainObject$1(a)?void 0:a}var CLONE_DEEP_FLAG=1,CLONE_FLAT_FLAG=2,CLONE_SYMBOLS_FLAG=4,omit=flatRest(function(a,s){var u={};if(a==null)return u;var d=!1;s=arrayMap(s,function(p){return p=castPath(p,a),d||(d=p.length>1),p}),copyObject(a,getAllKeysIn(a),u),d&&(u=baseClone(u,CLONE_DEEP_FLAG|CLONE_FLAT_FLAG|CLONE_SYMBOLS_FLAG,customOmitClone));for(var l=s.length;l--;)baseUnset(u,s[l]);return u}),omit$1=omit;function baseSet(a,s,u,d){if(!isObject$5(a))return a;s=castPath(s,a);for(var l=-1,p=s.length,h=p-1,y=a;y!=null&&++l<p;){var _=toKey(s[l]),E=u;if(_==="__proto__"||_==="constructor"||_==="prototype")return a;if(l!=h){var I=y[_];E=d?d(I,_,y):void 0,E===void 0&&(E=isObject$5(I)?I:isIndex(s[l+1])?[]:{})}assignValue(y,_,E),y=y[_]}return a}function basePickBy(a,s,u){for(var d=-1,l=s.length,p={};++d<l;){var h=s[d],y=baseGet(a,h);u(y,h)&&baseSet(p,castPath(h,a),y)}return p}function baseSortBy(a,s){var u=a.length;for(a.sort(s);u--;)a[u]=a[u].value;return a}function compareAscending(a,s){if(a!==s){var u=a!==void 0,d=a===null,l=a===a,p=isSymbol(a),h=s!==void 0,y=s===null,_=s===s,E=isSymbol(s);if(!y&&!E&&!p&&a>s||p&&h&&_&&!y&&!E||d&&h&&_||!u&&_||!l)return 1;if(!d&&!p&&!E&&a<s||E&&u&&l&&!d&&!p||y&&u&&l||!h&&l||!_)return-1}return 0}function compareMultiple(a,s,u){for(var d=-1,l=a.criteria,p=s.criteria,h=l.length,y=u.length;++d<h;){var _=compareAscending(l[d],p[d]);if(_){if(d>=y)return _;var E=u[d];return _*(E=="desc"?-1:1)}}return a.index-s.index}function baseOrderBy(a,s,u){s.length?s=arrayMap(s,function(p){return isArray$7(p)?function(h){return baseGet(h,p.length===1?p[0]:p)}:p}):s=[identity$2];var d=-1;s=arrayMap(s,baseUnary(baseIteratee));var l=baseMap(a,function(p,h,y){var _=arrayMap(s,function(E){return E(p)});return{criteria:_,index:++d,value:p}});return baseSortBy(l,function(p,h){return compareMultiple(p,h,u)})}function basePick(a,s){return basePickBy(a,s,function(u,d){return hasIn(a,d)})}var pick=flatRest(function(a,s){return a==null?{}:basePick(a,s)}),pick$1=pick;function baseIndexOfWith(a,s,u,d){for(var l=u-1,p=a.length;++l<p;)if(d(a[l],s))return l;return-1}var arrayProto=Array.prototype,splice=arrayProto.splice;function basePullAll(a,s,u,d){var l=d?baseIndexOfWith:baseIndexOf,p=-1,h=s.length,y=a;for(a===s&&(s=copyArray(s)),u&&(y=arrayMap(a,baseUnary(u)));++p<h;)for(var _=0,E=s[p],I=u?u(E):E;(_=l(y,I,_,d))>-1;)y!==a&&splice.call(y,_,1),splice.call(a,_,1);return a}function pullAll(a,s){return a&&a.length&&s&&s.length?basePullAll(a,s):a}var pull$1=baseRest(pullAll),pull$2=pull$1,sortBy=baseRest(function(a,s){if(a==null)return[];var u=s.length;return u>1&&isIterateeCall(a,s[0],s[1])?s=[]:u>2&&isIterateeCall(s[0],s[1],s[2])&&(s=[s[0]]),baseOrderBy(a,baseFlatten(s,1),[])}),sortBy$1=sortBy,fastDeepEqual=function a(s,u){if(s===u)return!0;if(s&&u&&typeof s=="object"&&typeof u=="object"){if(s.constructor!==u.constructor)return!1;var d,l,p;if(Array.isArray(s)){if(d=s.length,d!=u.length)return!1;for(l=d;l--!==0;)if(!a(s[l],u[l]))return!1;return!0}if(s.constructor===RegExp)return s.source===u.source&&s.flags===u.flags;if(s.valueOf!==Object.prototype.valueOf)return s.valueOf()===u.valueOf();if(s.toString!==Object.prototype.toString)return s.toString()===u.toString();if(p=Object.keys(s),d=p.length,d!==Object.keys(u).length)return!1;for(l=d;l--!==0;)if(!Object.prototype.hasOwnProperty.call(u,p[l]))return!1;for(l=d;l--!==0;){var h=p[l];if(!a(s[h],u[h]))return!1}return!0}return s!==s&&u!==u};const generateId=()=>(Math.random()*1e20).toString(36),insertAt$1=(a=0,s,u,d=!1)=>[...u.slice(0,a),...[s].flat(),...u.slice(d?a+1:a)],replaceItem$1=(a,s,u)=>{a=typeof a=="function"?a:l=>l===a;const d=u.findIndex(a);return d<0?u:insertAt$1(d,s,u,!0)},swapIndex=(a,s,u)=>{if(!u[a]||!u[s])return u;u=[...u];const d=u[a];return u[a]=u[s],u[s]=d,u},swapItems=(a,s,u)=>{const d=u.findIndex(p=>p===a),l=u.findIndex(p=>p===s);return d<0||l<0?u:swapIndex(d,l,u)},toDataNode$1=a=>a?{id:a.id,props:a.props,childIds:(a.children||[]).map(s=>s.id)}:null,toSceneNode=a=>({id:a.id,props:a.props,children:[]}),toSceneTree=(a,s)=>{const u=a.find(l=>l.id===s);if(!u)return null;const d=u.childIds;return{id:u.id,props:u.props,children:d.map(l=>toSceneTree(a,l)).filter(Boolean)}},forEachDown$1=(a,s)=>{s(a),(a.children||[]).forEach(d=>forEachDown$1(d,(l,p)=>{s(l,p||a)}))},mapDown=(a,s)=>{const u=s(a);return we(pe({},u),{children:((u==null?void 0:u.children)||(a==null?void 0:a.children)||[]).map(d=>mapDown(d,s))})},mapDownAsync=async(a,s)=>{var d;const u=(d=a==null?void 0:a.children)!=null?d:[];return we(pe({},await s(a)),{children:await Promise.all(u.map(l=>mapDownAsync(l,s)))})},getElementAttributes=a=>Object.values(a.attributes).reduce((s,u)=>we(pe({},s),{[u.name]:u.value}),{}),asArray=a=>isArray$7(a)?a:[a],sizeToNum=(a,s)=>typeof a=="number"?a:typeof a=="string"?a.indexOf("%")>-1?parseFloat(a)/100*s:parseFloat(a):0,asSize=a=>typeof a=="number"?a+"px":typeof a=="string"?a.indexOf("%")>-1?parseFloat(a)+"%":a:"0px",asDuration=a=>typeof a=="string"?a:typeof a=="number"?a+"ms":"0ms",values=a=>Array.from(a.values());var Logic=Object.freeze(Object.defineProperty({__proto__:null,deepEqual:fastDeepEqual,generateId,insertAt:insertAt$1,replaceItem:replaceItem$1,swapIndex,swapItems,toDataNode:toDataNode$1,toSceneNode,toSceneTree,forEachDown:forEachDown$1,mapDown,mapDownAsync,getElementAttributes,asArray,sizeToNum,asSize,asDuration,values,pick:pick$1,pull:pull$2,omit:omit$1,isEqual,cloneDeep,sortBy:sortBy$1,debounce:debounce$2,camelCase:camelCase$3,kebabCase:kebabCase$1,isArray:isArray$7},Symbol.toStringTag,{value:"Module"})),lib$2={};function e(a){this.message=a}e.prototype=new Error,e.prototype.name="InvalidCharacterError";var r$1=typeof window!="undefined"&&window.atob&&window.atob.bind(window)||function(a){var s=String(a).replace(/=+$/,"");if(s.length%4==1)throw new e("'atob' failed: The string to be decoded is not correctly encoded.");for(var u,d,l=0,p=0,h="";d=s.charAt(p++);~d&&(u=l%4?64*u+d:d,l++%4)?h+=String.fromCharCode(255&u>>(-2*l&6)):0)d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(d);return h};function t(a){var s=a.replace(/-/g,"+").replace(/_/g,"/");switch(s.length%4){case 0:break;case 2:s+="==";break;case 3:s+="=";break;default:throw"Illegal base64url string!"}try{return function(u){return decodeURIComponent(r$1(u).replace(/(.)/g,function(d,l){var p=l.charCodeAt(0).toString(16).toUpperCase();return p.length<2&&(p="0"+p),"%"+p}))}(s)}catch{return r$1(s)}}function n(a){this.message=a}function o(a,s){if(typeof a!="string")throw new n("Invalid token specified");var u=(s=s||{}).header===!0?0:1;try{return JSON.parse(t(a.split(".")[u]))}catch(d){throw new n("Invalid token specified: "+d.message)}}n.prototype=new Error,n.prototype.name="InvalidTokenError";var jwtDecode_esm=Object.freeze(Object.defineProperty({__proto__:null,default:o,InvalidTokenError:n},Symbol.toStringTag,{value:"Module"})),require$$0$2=getAugmentedNamespace(jwtDecode_esm),getRandomValues,rnds8=new Uint8Array(16);function rng(){if(!getRandomValues&&(getRandomValues=typeof crypto!="undefined"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto!="undefined"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!getRandomValues))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return getRandomValues(rnds8)}var REGEX=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function validate$1(a){return typeof a=="string"&&REGEX.test(a)}for(var byteToHex=[],i=0;i<256;++i)byteToHex.push((i+256).toString(16).substr(1));function stringify(a){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,u=(byteToHex[a[s+0]]+byteToHex[a[s+1]]+byteToHex[a[s+2]]+byteToHex[a[s+3]]+"-"+byteToHex[a[s+4]]+byteToHex[a[s+5]]+"-"+byteToHex[a[s+6]]+byteToHex[a[s+7]]+"-"+byteToHex[a[s+8]]+byteToHex[a[s+9]]+"-"+byteToHex[a[s+10]]+byteToHex[a[s+11]]+byteToHex[a[s+12]]+byteToHex[a[s+13]]+byteToHex[a[s+14]]+byteToHex[a[s+15]]).toLowerCase();if(!validate$1(u))throw TypeError("Stringified UUID is invalid");return u}var _nodeId,_clockseq,_lastMSecs=0,_lastNSecs=0;function v1(a,s,u){var d=s&&u||0,l=s||new Array(16);a=a||{};var p=a.node||_nodeId,h=a.clockseq!==void 0?a.clockseq:_clockseq;if(p==null||h==null){var y=a.random||(a.rng||rng)();p==null&&(p=_nodeId=[y[0]|1,y[1],y[2],y[3],y[4],y[5]]),h==null&&(h=_clockseq=(y[6]<<8|y[7])&16383)}var _=a.msecs!==void 0?a.msecs:Date.now(),E=a.nsecs!==void 0?a.nsecs:_lastNSecs+1,I=_-_lastMSecs+(E-_lastNSecs)/1e4;if(I<0&&a.clockseq===void 0&&(h=h+1&16383),(I<0||_>_lastMSecs)&&a.nsecs===void 0&&(E=0),E>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");_lastMSecs=_,_lastNSecs=E,_clockseq=h,_+=122192928e5;var N=((_&268435455)*1e4+E)%4294967296;l[d++]=N>>>24&255,l[d++]=N>>>16&255,l[d++]=N>>>8&255,l[d++]=N&255;var w=_/4294967296*1e4&268435455;l[d++]=w>>>8&255,l[d++]=w&255,l[d++]=w>>>24&15|16,l[d++]=w>>>16&255,l[d++]=h>>>8|128,l[d++]=h&255;for(var C=0;C<6;++C)l[d+C]=p[C];return s||stringify(l)}function parse$1(a){if(!validate$1(a))throw TypeError("Invalid UUID");var s,u=new Uint8Array(16);return u[0]=(s=parseInt(a.slice(0,8),16))>>>24,u[1]=s>>>16&255,u[2]=s>>>8&255,u[3]=s&255,u[4]=(s=parseInt(a.slice(9,13),16))>>>8,u[5]=s&255,u[6]=(s=parseInt(a.slice(14,18),16))>>>8,u[7]=s&255,u[8]=(s=parseInt(a.slice(19,23),16))>>>8,u[9]=s&255,u[10]=(s=parseInt(a.slice(24,36),16))/1099511627776&255,u[11]=s/4294967296&255,u[12]=s>>>24&255,u[13]=s>>>16&255,u[14]=s>>>8&255,u[15]=s&255,u}function stringToBytes(a){a=unescape(encodeURIComponent(a));for(var s=[],u=0;u<a.length;++u)s.push(a.charCodeAt(u));return s}var DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",URL$1="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function v35(a,s,u){function d(l,p,h,y){if(typeof l=="string"&&(l=stringToBytes(l)),typeof p=="string"&&(p=parse$1(p)),p.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var _=new Uint8Array(16+l.length);if(_.set(p),_.set(l,p.length),_=u(_),_[6]=_[6]&15|s,_[8]=_[8]&63|128,h){y=y||0;for(var E=0;E<16;++E)h[y+E]=_[E];return h}return stringify(_)}try{d.name=a}catch{}return d.DNS=DNS,d.URL=URL$1,d}function md5(a){if(typeof a=="string"){var s=unescape(encodeURIComponent(a));a=new Uint8Array(s.length);for(var u=0;u<s.length;++u)a[u]=s.charCodeAt(u)}return md5ToHexEncodedArray(wordsToMd5(bytesToWords(a),a.length*8))}function md5ToHexEncodedArray(a){for(var s=[],u=a.length*32,d="0123456789abcdef",l=0;l<u;l+=8){var p=a[l>>5]>>>l%32&255,h=parseInt(d.charAt(p>>>4&15)+d.charAt(p&15),16);s.push(h)}return s}function getOutputLength(a){return(a+64>>>9<<4)+14+1}function wordsToMd5(a,s){a[s>>5]|=128<<s%32,a[getOutputLength(s)-1]=s;for(var u=1732584193,d=-271733879,l=-1732584194,p=271733878,h=0;h<a.length;h+=16){var y=u,_=d,E=l,I=p;u=md5ff(u,d,l,p,a[h],7,-680876936),p=md5ff(p,u,d,l,a[h+1],12,-389564586),l=md5ff(l,p,u,d,a[h+2],17,606105819),d=md5ff(d,l,p,u,a[h+3],22,-1044525330),u=md5ff(u,d,l,p,a[h+4],7,-176418897),p=md5ff(p,u,d,l,a[h+5],12,1200080426),l=md5ff(l,p,u,d,a[h+6],17,-1473231341),d=md5ff(d,l,p,u,a[h+7],22,-45705983),u=md5ff(u,d,l,p,a[h+8],7,1770035416),p=md5ff(p,u,d,l,a[h+9],12,-1958414417),l=md5ff(l,p,u,d,a[h+10],17,-42063),d=md5ff(d,l,p,u,a[h+11],22,-1990404162),u=md5ff(u,d,l,p,a[h+12],7,1804603682),p=md5ff(p,u,d,l,a[h+13],12,-40341101),l=md5ff(l,p,u,d,a[h+14],17,-1502002290),d=md5ff(d,l,p,u,a[h+15],22,1236535329),u=md5gg(u,d,l,p,a[h+1],5,-165796510),p=md5gg(p,u,d,l,a[h+6],9,-1069501632),l=md5gg(l,p,u,d,a[h+11],14,643717713),d=md5gg(d,l,p,u,a[h],20,-373897302),u=md5gg(u,d,l,p,a[h+5],5,-701558691),p=md5gg(p,u,d,l,a[h+10],9,38016083),l=md5gg(l,p,u,d,a[h+15],14,-660478335),d=md5gg(d,l,p,u,a[h+4],20,-405537848),u=md5gg(u,d,l,p,a[h+9],5,568446438),p=md5gg(p,u,d,l,a[h+14],9,-1019803690),l=md5gg(l,p,u,d,a[h+3],14,-187363961),d=md5gg(d,l,p,u,a[h+8],20,1163531501),u=md5gg(u,d,l,p,a[h+13],5,-1444681467),p=md5gg(p,u,d,l,a[h+2],9,-51403784),l=md5gg(l,p,u,d,a[h+7],14,1735328473),d=md5gg(d,l,p,u,a[h+12],20,-1926607734),u=md5hh(u,d,l,p,a[h+5],4,-378558),p=md5hh(p,u,d,l,a[h+8],11,-2022574463),l=md5hh(l,p,u,d,a[h+11],16,1839030562),d=md5hh(d,l,p,u,a[h+14],23,-35309556),u=md5hh(u,d,l,p,a[h+1],4,-1530992060),p=md5hh(p,u,d,l,a[h+4],11,1272893353),l=md5hh(l,p,u,d,a[h+7],16,-155497632),d=md5hh(d,l,p,u,a[h+10],23,-1094730640),u=md5hh(u,d,l,p,a[h+13],4,681279174),p=md5hh(p,u,d,l,a[h],11,-358537222),l=md5hh(l,p,u,d,a[h+3],16,-722521979),d=md5hh(d,l,p,u,a[h+6],23,76029189),u=md5hh(u,d,l,p,a[h+9],4,-640364487),p=md5hh(p,u,d,l,a[h+12],11,-421815835),l=md5hh(l,p,u,d,a[h+15],16,530742520),d=md5hh(d,l,p,u,a[h+2],23,-995338651),u=md5ii(u,d,l,p,a[h],6,-198630844),p=md5ii(p,u,d,l,a[h+7],10,1126891415),l=md5ii(l,p,u,d,a[h+14],15,-1416354905),d=md5ii(d,l,p,u,a[h+5],21,-57434055),u=md5ii(u,d,l,p,a[h+12],6,1700485571),p=md5ii(p,u,d,l,a[h+3],10,-1894986606),l=md5ii(l,p,u,d,a[h+10],15,-1051523),d=md5ii(d,l,p,u,a[h+1],21,-2054922799),u=md5ii(u,d,l,p,a[h+8],6,1873313359),p=md5ii(p,u,d,l,a[h+15],10,-30611744),l=md5ii(l,p,u,d,a[h+6],15,-1560198380),d=md5ii(d,l,p,u,a[h+13],21,1309151649),u=md5ii(u,d,l,p,a[h+4],6,-145523070),p=md5ii(p,u,d,l,a[h+11],10,-1120210379),l=md5ii(l,p,u,d,a[h+2],15,718787259),d=md5ii(d,l,p,u,a[h+9],21,-343485551),u=safeAdd(u,y),d=safeAdd(d,_),l=safeAdd(l,E),p=safeAdd(p,I)}return[u,d,l,p]}function bytesToWords(a){if(a.length===0)return[];for(var s=a.length*8,u=new Uint32Array(getOutputLength(s)),d=0;d<s;d+=8)u[d>>5]|=(a[d/8]&255)<<d%32;return u}function safeAdd(a,s){var u=(a&65535)+(s&65535),d=(a>>16)+(s>>16)+(u>>16);return d<<16|u&65535}function bitRotateLeft(a,s){return a<<s|a>>>32-s}function md5cmn(a,s,u,d,l,p){return safeAdd(bitRotateLeft(safeAdd(safeAdd(s,a),safeAdd(d,p)),l),u)}function md5ff(a,s,u,d,l,p,h){return md5cmn(s&u|~s&d,a,s,l,p,h)}function md5gg(a,s,u,d,l,p,h){return md5cmn(s&d|u&~d,a,s,l,p,h)}function md5hh(a,s,u,d,l,p,h){return md5cmn(s^u^d,a,s,l,p,h)}function md5ii(a,s,u,d,l,p,h){return md5cmn(u^(s|~d),a,s,l,p,h)}var v3=v35("v3",48,md5),v3$1=v3;function v4(a,s,u){a=a||{};var d=a.random||(a.rng||rng)();if(d[6]=d[6]&15|64,d[8]=d[8]&63|128,s){u=u||0;for(var l=0;l<16;++l)s[u+l]=d[l];return s}return stringify(d)}function f(a,s,u,d){switch(a){case 0:return s&u^~s&d;case 1:return s^u^d;case 2:return s&u^s&d^u&d;case 3:return s^u^d}}function ROTL(a,s){return a<<s|a>>>32-s}function sha1(a){var s=[1518500249,1859775393,2400959708,3395469782],u=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof a=="string"){var d=unescape(encodeURIComponent(a));a=[];for(var l=0;l<d.length;++l)a.push(d.charCodeAt(l))}else Array.isArray(a)||(a=Array.prototype.slice.call(a));a.push(128);for(var p=a.length/4+2,h=Math.ceil(p/16),y=new Array(h),_=0;_<h;++_){for(var E=new Uint32Array(16),I=0;I<16;++I)E[I]=a[_*64+I*4]<<24|a[_*64+I*4+1]<<16|a[_*64+I*4+2]<<8|a[_*64+I*4+3];y[_]=E}y[h-1][14]=(a.length-1)*8/Math.pow(2,32),y[h-1][14]=Math.floor(y[h-1][14]),y[h-1][15]=(a.length-1)*8&4294967295;for(var N=0;N<h;++N){for(var w=new Uint32Array(80),C=0;C<16;++C)w[C]=y[N][C];for(var D=16;D<80;++D)w[D]=ROTL(w[D-3]^w[D-8]^w[D-14]^w[D-16],1);for(var V=u[0],J=u[1],W=u[2],g=u[3],O=u[4],$=0;$<80;++$){var x=Math.floor($/20),Y=ROTL(V,5)+f(x,J,W,g)+O+s[x]+w[$]>>>0;O=g,g=W,W=ROTL(J,30)>>>0,J=V,V=Y}u[0]=u[0]+V>>>0,u[1]=u[1]+J>>>0,u[2]=u[2]+W>>>0,u[3]=u[3]+g>>>0,u[4]=u[4]+O>>>0}return[u[0]>>24&255,u[0]>>16&255,u[0]>>8&255,u[0]&255,u[1]>>24&255,u[1]>>16&255,u[1]>>8&255,u[1]&255,u[2]>>24&255,u[2]>>16&255,u[2]>>8&255,u[2]&255,u[3]>>24&255,u[3]>>16&255,u[3]>>8&255,u[3]&255,u[4]>>24&255,u[4]>>16&255,u[4]>>8&255,u[4]&255]}var v5=v35("v5",80,sha1),v5$1=v5,nil="00000000-0000-0000-0000-000000000000";function version$3(a){if(!validate$1(a))throw TypeError("Invalid UUID");return parseInt(a.substr(14,1),16)}var esmBrowser=Object.freeze(Object.defineProperty({__proto__:null,v1,v3:v3$1,v4,v5:v5$1,NIL:nil,version:version$3,validate:validate$1,stringify,parse:parse$1},Symbol.toStringTag,{value:"Module"})),require$$1$2=getAugmentedNamespace(esmBrowser);class EnhancedMap$1 extends Map{computeIfAbsent(s,u){if(this.has(s))return this.get(s);const d=u(s);return this.set(s,d),d}computeIfPresent(s,u){const d=this.get(s);if(d===void 0)return;const l=u(s,d);return l!==void 0?this.set(s,l):this.delete(s),l}compute(s,u){const d=this.get(s),l=u(s,d);return l?this.set(s,l):this.delete(s),l}}var InternalLogLevel$1;(function(a){a[a.Trace=0]="Trace",a[a.Debug=1]="Debug",a[a.Info=2]="Info",a[a.Warn=3]="Warn",a[a.Error=4]="Error"})(InternalLogLevel$1||(InternalLogLevel$1={}));function getInternalLogger$1(a){return provider$1.getLogger(a)}const INTERNAL_LOGGING_SETTINGS$1={setInternalLogLevel:a=>provider$1.changeLogLevel(a),setOutput:a=>provider$1.changeOutput(a),reset:()=>provider$1.reset()};class InternalLoggerImpl$1{constructor(s,u,d){this._name=s,this._level=u,this._fnOutput=d}trace(s){this.log(InternalLogLevel$1.Trace,s)}debug(s){this.log(InternalLogLevel$1.Debug,s)}error(s,u){this.log(InternalLogLevel$1.Error,s,u)}info(s){this.log(InternalLogLevel$1.Info,s)}warn(s,u){this.log(InternalLogLevel$1.Warn,s,u)}setLevel(s){this._level=s}setOutput(s){this._fnOutput=s}log(s,u,d){this._level>s||this._fnOutput(`${InternalLogLevel$1[this._level].toString()} <INTERNAL LOGGER> ${this._name} ${u()}${d?`
`+d.stack:""}`)}}class InternalProviderImpl$1{constructor(){this._loggers=new EnhancedMap$1,this._logLevel=InternalLogLevel$1.Error,this._fnOutput=InternalProviderImpl$1.logConsole}getLogger(s){return this._loggers.computeIfAbsent(s,u=>new InternalLoggerImpl$1(u,this._logLevel,this._fnOutput))}changeLogLevel(s){this._logLevel=s,this._loggers.forEach(u=>u.setLevel(s))}changeOutput(s){this._fnOutput=s,this._loggers.forEach(u=>u.setOutput(this._fnOutput))}reset(){this.changeLogLevel(InternalLogLevel$1.Error),this._fnOutput=InternalProviderImpl$1.logConsole,this._loggers.forEach(s=>s.setOutput(this._fnOutput))}static logConsole(s){console&&console.log&&console.log(s)}}const provider$1=new InternalProviderImpl$1;var InternalLogger$1=Object.freeze({__proto__:null,get InternalLogLevel(){return InternalLogLevel$1},getInternalLogger:getInternalLogger$1,INTERNAL_LOGGING_SETTINGS:INTERNAL_LOGGING_SETTINGS$1}),LogLevel$1;(function(a){a[a.Trace=0]="Trace",a[a.Debug=1]="Debug",a[a.Info=2]="Info",a[a.Warn=3]="Warn",a[a.Error=4]="Error",a[a.Fatal=5]="Fatal"})(LogLevel$1||(LogLevel$1={})),function(a){function s(u){switch(u.toLowerCase()){case"trace":return a.Trace;case"debug":return a.Debug;case"info":return a.Info;case"warn":return a.Warn;case"error":return a.Error;case"fatal":return a.Fatal;default:return}}a.toLogLevel=s}(LogLevel$1||(LogLevel$1={}));class CoreLoggerImpl$1{constructor(s){this._runtime=s}get id(){return this._runtime.id}get logLevel(){return this._runtime.level}get runtimeSettings(){return Object.assign({},this._runtime)}set runtimeSettings(s){this._runtime=s}trace(s,...u){this.logMessage(LogLevel$1.Trace,s,u)}debug(s,...u){this.logMessage(LogLevel$1.Debug,s,u)}info(s,...u){this.logMessage(LogLevel$1.Info,s,u)}warn(s,...u){this.logMessage(LogLevel$1.Warn,s,u)}error(s,...u){this.logMessage(LogLevel$1.Error,s,u)}fatal(s,...u){this.logMessage(LogLevel$1.Fatal,s,u)}logMessage(s,u,d){if(this._runtime.level>s)return;const l=Date.now(),p=typeof u=="string"?u:u(),h=CoreLoggerImpl$1.getErrorAndArgs(d);switch(this._runtime.channel.type){case"RawLogChannel":this._runtime.channel.write({message:p,exception:h.error,args:h.args,timeInMillis:l,level:s,logNames:this._runtime.name},this._runtime.argumentFormatter);return;case"LogChannel":this._runtime.channel.write(this.createLogMessage(p,s,h,l));break}}formatArgValue(s){try{return this._runtime.argumentFormatter(s)}catch{return`>>ARG CONVERT FAILED: '${s!==void 0?s.toString():"undefined"}'<<`}}createLogMessage(s,u,d,l){let p;const h=d.error,y=d.args;h&&(p=`${h.name}: ${h.message}`,h.stack&&(p+=`@
${h.stack}`));const _=this._runtime.dateFormatter(l);let E=LogLevel$1[u].toUpperCase();E.length<5&&(E+=" ");const I=typeof this._runtime.name=="string"?this._runtime.name:this._runtime.name.join(", "),N=typeof y!="undefined"&&y.length>0?" ["+y.map(C=>this.formatArgValue(C)).join(", ")+"]":"";return{message:_+" "+E+" ["+I+"] "+s+N,error:p}}static getErrorAndArgs(s){if(s.length===0)return{};let u,d;const l=s[0];if(l instanceof Error)return u=l,d=s.length>1?s.slice(1):void 0,{error:u,args:d};if(typeof l=="function"){const p=l();return p instanceof Error?(u=p,d=s.length>1?s.slice(1):void 0,{error:u,args:d}):s.length===1?Array.isArray(p)?{args:p.length>0?p:void 0}:{args:p}:Array.isArray(p)?{args:[...p,...s.slice(1)]}:{args:[p,...s.slice(1)]}}return{args:s}}}function padStart$1(a,s,u=" "){return padInternal$1(a,s,"start",u)}function padEnd$1(a,s,u=" "){return padInternal$1(a,s,"end",u)}function maxLengthStringValueInArray$1(a){return a.map(s=>s.length).reduce((s,u)=>u>s?u:s,0)}function padInternal$1(a,s,u,d=" "){if(s<=a.length)return a;if(d.length>1)throw new Error(`Fill char must be one char exactly, it is: ${d.length}`);const l=s-a.length;let p="";for(let h=0;h<l;h++)p+=d;return u==="start"?p+a:a+p}function formatArgument$1(a){return a===void 0?"undefined":JSON.stringify(a)}function formatDate$1(a){const s=new Date(a),u=s.getFullYear(),d=padStart$1((s.getMonth()+1).toString(),2,"0"),l=padStart$1(s.getDate().toString(),2,"0"),p=padStart$1(s.getHours().toString(),2,"0"),h=padStart$1(s.getMinutes().toString(),2,"0"),y=padStart$1(s.getSeconds().toString(),2,"0"),_=padStart$1(s.getMilliseconds().toString(),2,"0");return`${u}-${d}-${l} ${p}:${h}:${y},${_}`}class ConsoleLogChannel$1{constructor(){this.type="LogChannel"}write(s){console&&console.log&&console.log(s.message+(s.error?`
${s.error}`:""))}}var DefaultChannels$1;(function(a){function s(){return new ConsoleLogChannel$1}a.createConsoleChannel=s})(DefaultChannels$1||(DefaultChannels$1={}));class LogProviderImpl$1{constructor(s,u){this._log=getInternalLogger$1("core.impl.LogProviderImpl"),this._name=s,this._settings=u,this._loggers=new EnhancedMap$1,this._idToKeyMap=new EnhancedMap$1,this._globalRuntimeSettings={level:u.level,channel:u.channel},this._nextLoggerId=1,this._log.trace(()=>`Created LogProviderImpl with settings: ${JSON.stringify(this._settings)}`)}get runtimeSettings(){return Object.assign(Object.assign({},this._settings),{level:this._globalRuntimeSettings.level,channel:this._globalRuntimeSettings.channel})}getLogger(s){return this.getOrCreateLogger(s)}updateLoggerRuntime(s,u){this._log.debug(()=>`Updating logger ${s.id} runtime settings using: '${JSON.stringify(u)}'`);const d=this._idToKeyMap.get(s.id);return d===void 0?(this._log.warn(()=>`Cannot update logger with id: ${s.id}, it was not found.`),!1):(this._loggers.computeIfPresent(d,(l,p)=>(p.runtimeSettings=LogProviderImpl$1.mergeRuntimeSettingsIntoLogRuntime(p.runtimeSettings,u),p)),!0)}updateRuntimeSettings(s){this._log.debug(()=>`Updating global runtime settings and updating existing loggers runtime settings using: '${JSON.stringify(s)}'`),this._globalRuntimeSettings={level:s.level!==void 0?s.level:this._globalRuntimeSettings.level,channel:s.channel!==void 0?s.channel:this._globalRuntimeSettings.channel},this._loggers.forEach(u=>u.runtimeSettings=LogProviderImpl$1.mergeRuntimeSettingsIntoLogRuntime(u.runtimeSettings,s))}clear(){this._loggers.clear(),this._idToKeyMap.clear(),this._globalRuntimeSettings=Object.assign({},this._settings),this._nextLoggerId=1}getOrCreateLogger(s){const u=LogProviderImpl$1.createKey(s),d=this._loggers.computeIfAbsent(u,()=>{const l={level:this._globalRuntimeSettings.level,channel:this._globalRuntimeSettings.channel,id:this.nextLoggerId(),name:s,argumentFormatter:this._settings.argumentFormatter,dateFormatter:this._settings.dateFormatter};return new CoreLoggerImpl$1(l)});return this._idToKeyMap.computeIfAbsent(d.id,()=>u),d}nextLoggerId(){const s=this._name+"_"+this._nextLoggerId;return this._nextLoggerId++,s}static mergeRuntimeSettingsIntoLogRuntime(s,u){return Object.assign(Object.assign({},s),{level:u.level!==void 0?u.level:s.level,channel:u.channel!==void 0?u.channel:s.channel})}static createKey(s){return typeof s=="string"?s:s.join(",")}}function createLogProvider$1(a,s){return new LogProviderImpl$1(a,s)}var index$3=Object.freeze({__proto__:null,EnhancedMap:EnhancedMap$1,padStart:padStart$1,padEnd:padEnd$1,maxLengthStringValueInArray:maxLengthStringValueInArray$1});class ArrayLogChannel{constructor(){this._buffer=[],this.type="LogChannel"}write(s){this._buffer.push(s)}get logMessages(){return this._buffer}get messages(){return this._buffer.map(s=>s.message)}}class ArrayRawLogChannel{constructor(){this._buffer=[],this.type="RawLogChannel"}write(s,u){this._buffer.push(s)}get messages(){return this._buffer.map(s=>s.message)}get errors(){return this._buffer.map(s=>s.exception)}get size(){return this._buffer.length}get rawMessages(){return this._buffer}clear(){this._buffer=[]}}class TestControlMessage{constructor(){this._messages=[],this.write=this.write.bind(this)}get messages(){return this._messages}write(s){this._messages.push(s)}clear(){this._messages=[]}}var TestClasses=Object.freeze({__proto__:null,ArrayLogChannel,ArrayRawLogChannel,TestControlMessage}),typescriptLogging_esm=Object.freeze(Object.defineProperty({__proto__:null,$internal:InternalLogger$1,$test:TestClasses,get DefaultChannels(){return DefaultChannels$1},get LogLevel(){return LogLevel$1},createLogProvider:createLogProvider$1,formatArgument:formatArgument$1,formatDate:formatDate$1,util:index$3},Symbol.toStringTag,{value:"Module"})),require$$2$2=getAugmentedNamespace(typescriptLogging_esm),layoutapi={},lib$1={},lib={},Metadata={};Object.defineProperty(Metadata,"__esModule",{value:!0}),Metadata.Metadata=void 0,Metadata.Metadata=function(s){const u=new Map,d={set(l,p){if(l=normalizeKey(l),Array.isArray(p))if(p.length===0)u.delete(l);else{for(const h of p)validate(l,h);u.set(l,l.endsWith("-bin")?p:[p.join(", ")])}else validate(l,p),u.set(l,[p]);return d},append(l,p){l=normalizeKey(l),validate(l,p);let h=u.get(l);return h==null&&(h=[],u.set(l,h)),h.push(p),l.endsWith("-bin")||u.set(l,[h.join(", ")]),d},delete(l){l=normalizeKey(l),u.delete(l)},get(l){var p;return l=normalizeKey(l),(p=u.get(l))===null||p===void 0?void 0:p[0]},getAll(l){var p;return l=normalizeKey(l),(p=u.get(l))!==null&&p!==void 0?p:[]},has(l){return l=normalizeKey(l),u.has(l)},[Symbol.iterator](){return u[Symbol.iterator]()}};if(s!=null){const l=isIterable$2(s)?s:Object.entries(s);for(const[p,h]of l)d.set(p,h)}return d};function normalizeKey(a){return a.toLowerCase()}function validate(a,s){if(!/^[0-9a-z_.-]+$/.test(a))throw new Error(`Metadata key '${a}' contains illegal characters`);if(a.endsWith("-bin")){if(!(s instanceof Uint8Array))throw new Error(`Metadata key '${a}' ends with '-bin', thus it must have binary value`)}else{if(typeof s!="string")throw new Error(`Metadata key '${a}' doesn't end with '-bin', thus it must have string value`);if(!/^[ -~]*$/.test(s))throw new Error(`Metadata value '${s}' of key '${a}' contains illegal characters`)}}function isIterable$2(a){return Symbol.iterator in a}var Status={};(function(a){Object.defineProperty(a,"__esModule",{value:!0}),a.Status=void 0,function(s){s[s.OK=0]="OK",s[s.CANCELLED=1]="CANCELLED",s[s.UNKNOWN=2]="UNKNOWN",s[s.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",s[s.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",s[s.NOT_FOUND=5]="NOT_FOUND",s[s.ALREADY_EXISTS=6]="ALREADY_EXISTS",s[s.PERMISSION_DENIED=7]="PERMISSION_DENIED",s[s.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",s[s.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",s[s.ABORTED=10]="ABORTED",s[s.OUT_OF_RANGE=11]="OUT_OF_RANGE",s[s.UNIMPLEMENTED=12]="UNIMPLEMENTED",s[s.INTERNAL=13]="INTERNAL",s[s.UNAVAILABLE=14]="UNAVAILABLE",s[s.DATA_LOSS=15]="DATA_LOSS",s[s.UNAUTHENTICATED=16]="UNAUTHENTICATED"}(a.Status||(a.Status={}))})(Status);var MethodDescriptor={};Object.defineProperty(MethodDescriptor,"__esModule",{value:!0});var CallOptions={};Object.defineProperty(CallOptions,"__esModule",{value:!0});var ClientMiddleware={};Object.defineProperty(ClientMiddleware,"__esModule",{value:!0});var composeClientMiddleware$1={};Object.defineProperty(composeClientMiddleware$1,"__esModule",{value:!0}),composeClientMiddleware$1.composeClientMiddleware=void 0;function composeClientMiddleware(a,s){return(u,d)=>s(we(pe({},u),{next:(l,p)=>a(we(pe({},u),{request:l}),p)}),d)}composeClientMiddleware$1.composeClientMiddleware=composeClientMiddleware;var ClientError$1={},cjs={},helpers={};helpers.__esModule=void 0,helpers.__esModule=!0;var objectSetPrototypeOfIsDefined=typeof Object.setPrototypeOf=="function",objectGetPrototypeOfIsDefined=typeof Object.getPrototypeOf=="function",objectDefinePropertyIsDefined=typeof Object.defineProperty=="function",objectCreateIsDefined=typeof Object.create=="function",objectHasOwnPropertyIsDefined=typeof Object.prototype.hasOwnProperty=="function",setPrototypeOf=function(s,u){objectSetPrototypeOfIsDefined?Object.setPrototypeOf(s,u):s.__proto__=u};helpers.setPrototypeOf=setPrototypeOf;var getPrototypeOf$1=function(s){return objectGetPrototypeOfIsDefined?Object.getPrototypeOf(s):s.__proto__||s.prototype};helpers.getPrototypeOf=getPrototypeOf$1;var ie8ObjectDefinePropertyBug=!1,defineProperty=function a(s,u,d){if(objectDefinePropertyIsDefined&&!ie8ObjectDefinePropertyBug)try{Object.defineProperty(s,u,d)}catch{ie8ObjectDefinePropertyBug=!0,a(s,u,d)}else s[u]=d.value};helpers.defineProperty=defineProperty;var hasOwnProperty=function(s,u){return objectHasOwnPropertyIsDefined?s.hasOwnProperty(s,u):s[u]===void 0};helpers.hasOwnProperty=hasOwnProperty;var objectCreate=function(s,u){if(objectCreateIsDefined)return Object.create(s,u);var d=function(){};d.prototype=s;var l=new d;if(typeof u=="undefined")return l;if(typeof u=="null")throw new Error("PropertyDescriptors must not be null.");if(typeof u=="object")for(var p in u)hasOwnProperty(u,p)&&(l[p]=u[p].value);return l};helpers.objectCreate=objectCreate,function(a){a.__esModule=void 0,a.__esModule=!0;var s=helpers,u=s.setPrototypeOf,d=s.getPrototypeOf,l=s.defineProperty,p=s.objectCreate,h=new Error().toString()==="[object Error]",y="";function _(E){var I=this.constructor,N=I.name||function(){var J=I.toString().match(/^function\s*([^\s(]+)/);return J===null?y||"Error":J[1]}(),w=N==="Error",C=w?y:N,D=Error.apply(this,arguments);if(u(D,d(this)),!(D instanceof I)||!(D instanceof _)){var D=this;Error.apply(this,arguments),l(D,"message",{configurable:!0,enumerable:!1,value:E,writable:!0})}if(l(D,"name",{configurable:!0,enumerable:!1,value:C,writable:!0}),Error.captureStackTrace&&Error.captureStackTrace(D,w?_:I),D.stack===void 0){var V=new Error(E);V.name=D.name,D.stack=V.stack}return h&&l(D,"toString",{configurable:!0,enumerable:!1,value:function(){return(this.name||"Error")+(typeof this.message=="undefined"?"":": "+this.message)},writable:!0}),D}y=_.name||"ExtendableError",_.prototype=p(Error.prototype,{constructor:{value:Error,enumerable:!1,writable:!0,configurable:!0}}),a.ExtendableError=_,a.default=a.ExtendableError}(cjs),Object.defineProperty(ClientError$1,"__esModule",{value:!0}),ClientError$1.ClientError=void 0;const ts_error_1$1=cjs,Status_1$1=Status;class ClientError extends ts_error_1$1.ExtendableError{constructor(s,u,d){super(`${s} ${Status_1$1.Status[u]}: ${d}`),this.path=s,this.code=u,this.details=d,this.name="ClientError",Object.defineProperty(this,"@@nice-grpc",{value:!0})}static[Symbol.hasInstance](s){return typeof s=="object"&&s!==null&&(s.constructor===ClientError||s.name==="ClientError"&&s["@@nice-grpc"]===!0)}}ClientError$1.ClientError=ClientError;var CallContext={};Object.defineProperty(CallContext,"__esModule",{value:!0});var ServerMiddleware={};Object.defineProperty(ServerMiddleware,"__esModule",{value:!0});var composeServerMiddleware$1={};Object.defineProperty(composeServerMiddleware$1,"__esModule",{value:!0}),composeServerMiddleware$1.composeServerMiddleware=void 0;function composeServerMiddleware(a,s){return(u,d)=>a(we(pe({},u),{next:(l,p)=>s(we(pe({},u),{request:l}),p)}),d)}composeServerMiddleware$1.composeServerMiddleware=composeServerMiddleware;var ServerError$1={};Object.defineProperty(ServerError$1,"__esModule",{value:!0}),ServerError$1.ServerError=void 0;const ts_error_1=cjs,Status_1=Status;class ServerError extends ts_error_1.ExtendableError{constructor(s,u){super(`${Status_1.Status[s]}: ${u}`),this.code=s,this.details=u,this.name="ServerError",Object.defineProperty(this,"@@nice-grpc",{value:!0})}static[Symbol.hasInstance](s){return typeof s=="object"&&s!==null&&(s.constructor===ServerError||s.name==="ServerError"&&s["@@nice-grpc"]===!0)}}ServerError$1.ServerError=ServerError,function(a){var s=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(d,l,p,h){h===void 0&&(h=p),Object.defineProperty(d,h,{enumerable:!0,get:function(){return l[p]}})}:function(d,l,p,h){h===void 0&&(h=p),d[h]=l[p]}),u=commonjsGlobal&&commonjsGlobal.__exportStar||function(d,l){for(var p in d)p!=="default"&&!Object.prototype.hasOwnProperty.call(l,p)&&s(l,d,p)};Object.defineProperty(a,"__esModule",{value:!0}),u(Metadata,a),u(Status,a),u(MethodDescriptor,a),u(CallOptions,a),u(ClientMiddleware,a),u(composeClientMiddleware$1,a),u(ClientError$1,a),u(CallContext,a),u(ServerMiddleware,a),u(composeServerMiddleware$1,a),u(ServerError$1,a)}(lib);var serviceDefinitions={},grpcWeb={};Object.defineProperty(grpcWeb,"__esModule",{value:!0}),grpcWeb.isGrpcWebServiceDefinition=grpcWeb.fromGrpcWebServiceDefinition=void 0;function fromGrpcWebServiceDefinition(a){const s={};for(const[u,d]of Object.entries(a)){if(u==="serviceName")continue;const l=d;s[uncapitalize(u)]={path:`/${a.serviceName}/${u}`,requestStream:l.requestStream,responseStream:l.responseStream,requestDeserialize:l.requestType.deserializeBinary,requestSerialize:p=>p.serializeBinary(),responseDeserialize:l.responseType.deserializeBinary,responseSerialize:p=>p.serializeBinary(),options:{}}}return s}grpcWeb.fromGrpcWebServiceDefinition=fromGrpcWebServiceDefinition;function isGrpcWebServiceDefinition(a){return"prototype"in a}grpcWeb.isGrpcWebServiceDefinition=isGrpcWebServiceDefinition;function uncapitalize(a){return a.length===0?a:a[0].toLowerCase()+a.slice(1)}var tsProto={};Object.defineProperty(tsProto,"__esModule",{value:!0}),tsProto.isTsProtoServiceDefinition=tsProto.fromTsProtoServiceDefinition=void 0;function fromTsProtoServiceDefinition(a){const s={};for(const[u,d]of Object.entries(a.methods)){const l=d.requestType.encode,p=d.requestType.fromPartial,h=d.responseType.encode,y=d.responseType.fromPartial;s[u]={path:`/${a.fullName}/${d.name}`,requestStream:d.requestStream,responseStream:d.responseStream,requestDeserialize:d.requestType.decode,requestSerialize:p!=null?_=>l(p(_)).finish():_=>l(_).finish(),responseDeserialize:d.responseType.decode,responseSerialize:y!=null?_=>h(y(_)).finish():_=>h(_).finish(),options:d.options}}return s}tsProto.fromTsProtoServiceDefinition=fromTsProtoServiceDefinition;function isTsProtoServiceDefinition(a){return"name"in a&&"fullName"in a&&"methods"in a}tsProto.isTsProtoServiceDefinition=isTsProtoServiceDefinition,Object.defineProperty(serviceDefinitions,"__esModule",{value:!0}),serviceDefinitions.toGrpcWebMethodDefinition=serviceDefinitions.normalizeServiceDefinition=void 0;const grpc_web_1$5=grpcWeb,ts_proto_1=tsProto;function normalizeServiceDefinition(a){return(0,grpc_web_1$5.isGrpcWebServiceDefinition)(a)?(0,grpc_web_1$5.fromGrpcWebServiceDefinition)(a):(0,ts_proto_1.isTsProtoServiceDefinition)(a)?(0,ts_proto_1.fromTsProtoServiceDefinition)(a):a}serviceDefinitions.normalizeServiceDefinition=normalizeServiceDefinition;function toGrpcWebMethodDefinition(a){const[,s,u]=a.path.split("/");return{service:{serviceName:s},methodName:u,requestStream:a.requestStream,responseStream:a.responseStream,requestType:class{constructor(){throw new Error("Unexpected instantiation")}static deserializeBinary(d){return a.requestDeserialize(d)}},responseType:class{constructor(){throw new Error("Unexpected instantiation")}static deserializeBinary(d){return a.responseDeserialize(d)}}}}serviceDefinitions.toGrpcWebMethodDefinition=toGrpcWebMethodDefinition;var channel={};Object.defineProperty(channel,"__esModule",{value:!0}),channel.createChannel=void 0;function createChannel(a,s){return{address:a,transport:s}}channel.createChannel=createChannel;var ClientFactory={},createBidiStreamingMethod$1={},grpcWebClient_umd={exports:{}};(function(a,s){(function(u,d){a.exports=d()})(commonjsGlobal,function(){return u={418:function(l,p){(function(h,y){for(var _ in y)h[_]=y[_]})(p,function(h){var y={};function _(E){if(y[E])return y[E].exports;var I=y[E]={i:E,l:!1,exports:{}};return h[E].call(I.exports,I,I.exports,_),I.l=!0,I.exports}return _.m=h,_.c=y,_.i=function(E){return E},_.d=function(E,I,N){_.o(E,I)||Object.defineProperty(E,I,{configurable:!1,enumerable:!0,get:N})},_.n=function(E){var I=E&&E.__esModule?function(){return E.default}:function(){return E};return _.d(I,"a",I),I},_.o=function(E,I){return Object.prototype.hasOwnProperty.call(E,I)},_.p="",_(_.s=1)}([function(h,y,_){Object.defineProperty(y,"__esModule",{value:!0});var E=_(3),I=function(){function N(w,C){w===void 0&&(w={}),C===void 0&&(C={splitValues:!1});var D,V=this;this.headersMap={},w&&(typeof Headers!="undefined"&&w instanceof Headers?E.getHeaderKeys(w).forEach(function(J){E.getHeaderValues(w,J).forEach(function(W){C.splitValues?V.append(J,E.splitHeaderValue(W)):V.append(J,W)})}):typeof(D=w)=="object"&&typeof D.headersMap=="object"&&typeof D.forEach=="function"?w.forEach(function(J,W){V.append(J,W)}):typeof Map!="undefined"&&w instanceof Map?w.forEach(function(J,W){V.append(W,J)}):typeof w=="string"?this.appendFromString(w):typeof w=="object"&&Object.getOwnPropertyNames(w).forEach(function(J){var W=w[J];Array.isArray(W)?W.forEach(function(g){V.append(J,g)}):V.append(J,W)}))}return N.prototype.appendFromString=function(w){for(var C=w.split(`\r
`),D=0;D<C.length;D++){var V=C[D],J=V.indexOf(":");if(J>0){var W=V.substring(0,J).trim(),g=V.substring(J+1).trim();this.append(W,g)}}},N.prototype.delete=function(w,C){var D=E.normalizeName(w);if(C===void 0)delete this.headersMap[D];else{var V=this.headersMap[D];if(V){var J=V.indexOf(C);J>=0&&V.splice(J,1),V.length===0&&delete this.headersMap[D]}}},N.prototype.append=function(w,C){var D=this,V=E.normalizeName(w);Array.isArray(this.headersMap[V])||(this.headersMap[V]=[]),Array.isArray(C)?C.forEach(function(J){D.headersMap[V].push(E.normalizeValue(J))}):this.headersMap[V].push(E.normalizeValue(C))},N.prototype.set=function(w,C){var D=E.normalizeName(w);if(Array.isArray(C)){var V=[];C.forEach(function(J){V.push(E.normalizeValue(J))}),this.headersMap[D]=V}else this.headersMap[D]=[E.normalizeValue(C)]},N.prototype.has=function(w,C){var D=this.headersMap[E.normalizeName(w)];if(!Array.isArray(D))return!1;if(C!==void 0){var V=E.normalizeValue(C);return D.indexOf(V)>=0}return!0},N.prototype.get=function(w){var C=this.headersMap[E.normalizeName(w)];return C!==void 0?C.concat():[]},N.prototype.forEach=function(w){var C=this;Object.getOwnPropertyNames(this.headersMap).forEach(function(D){w(D,C.headersMap[D])},this)},N.prototype.toHeaders=function(){if(typeof Headers!="undefined"){var w=new Headers;return this.forEach(function(C,D){D.forEach(function(V){w.append(C,V)})}),w}throw new Error("Headers class is not defined")},N}();y.BrowserHeaders=I},function(h,y,_){Object.defineProperty(y,"__esModule",{value:!0});var E=_(0);y.BrowserHeaders=E.BrowserHeaders},function(h,y,_){Object.defineProperty(y,"__esModule",{value:!0}),y.iterateHeaders=function(E,I){for(var N=E[Symbol.iterator](),w=N.next();!w.done;)I(w.value[0]),w=N.next()},y.iterateHeadersKeys=function(E,I){for(var N=E.keys(),w=N.next();!w.done;)I(w.value),w=N.next()}},function(h,y,_){Object.defineProperty(y,"__esModule",{value:!0});var E=_(2);y.normalizeName=function(I){if(typeof I!="string"&&(I=String(I)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(I))throw new TypeError("Invalid character in header field name");return I.toLowerCase()},y.normalizeValue=function(I){return typeof I!="string"&&(I=String(I)),I},y.getHeaderValues=function(I,N){var w=I;if(w instanceof Headers&&w.getAll)return w.getAll(N);var C=w.get(N);return C&&typeof C=="string"?[C]:C},y.getHeaderKeys=function(I){var N=I,w={},C=[];return N.keys?E.iterateHeadersKeys(N,function(D){w[D]||(w[D]=!0,C.push(D))}):N.forEach?N.forEach(function(D,V){w[V]||(w[V]=!0,C.push(V))}):E.iterateHeaders(N,function(D){var V=D[0];w[V]||(w[V]=!0,C.push(V))}),C},y.splitHeaderValue=function(I){var N=[];return I.split(", ").forEach(function(w){w.split(",").forEach(function(C){N.push(C)})}),N}}]))},617:function(l,p,h){Object.defineProperty(p,"__esModule",{value:!0}),p.ChunkParser=p.ChunkType=p.encodeASCII=p.decodeASCII=void 0;var y,_=h(65);function E(J){return(W=J)===9||W===10||W===13||J>=32&&J<=126;var W}function I(J){for(var W=0;W!==J.length;++W)if(!E(J[W]))throw new Error("Metadata is not valid (printable) ASCII");return String.fromCharCode.apply(String,Array.prototype.slice.call(J))}function N(J){return(128&J.getUint8(0))==128}function w(J){return J.getUint32(1,!1)}function C(J,W,g){return J.byteLength-W>=g}function D(J,W,g){if(J.slice)return J.slice(W,g);var O=J.length;g!==void 0&&(O=g);for(var $=new Uint8Array(O-W),x=0,Y=W;Y<O;Y++)$[x++]=J[Y];return $}p.decodeASCII=I,p.encodeASCII=function(J){for(var W=new Uint8Array(J.length),g=0;g!==J.length;++g){var O=J.charCodeAt(g);if(!E(O))throw new Error("Metadata contains invalid ASCII");W[g]=O}return W},function(J){J[J.MESSAGE=1]="MESSAGE",J[J.TRAILERS=2]="TRAILERS"}(y=p.ChunkType||(p.ChunkType={}));var V=function(){function J(){this.buffer=null,this.position=0}return J.prototype.parse=function(W,g){if(W.length===0&&g)return[];var O,$=[];if(this.buffer==null)this.buffer=W,this.position=0;else if(this.position===this.buffer.byteLength)this.buffer=W,this.position=0;else{var x=this.buffer.byteLength-this.position,Y=new Uint8Array(x+W.byteLength),te=D(this.buffer,this.position);Y.set(te,0);var ne=new Uint8Array(W);Y.set(ne,x),this.buffer=Y,this.position=0}for(;;){if(!C(this.buffer,this.position,5))return $;var F=D(this.buffer,this.position,this.position+5),j=new DataView(F.buffer,F.byteOffset,F.byteLength),K=w(j);if(!C(this.buffer,this.position,5+K))return $;var M=D(this.buffer,this.position+5,this.position+5+K);if(this.position+=5+K,N(j))return $.push({chunkType:y.TRAILERS,trailers:(O=M,new _.Metadata(I(O)))}),$;$.push({chunkType:y.MESSAGE,data:M})}},J}();p.ChunkParser=V},8:function(l,p){var h;Object.defineProperty(p,"__esModule",{value:!0}),p.httpStatusToCode=p.Code=void 0,function(y){y[y.OK=0]="OK",y[y.Canceled=1]="Canceled",y[y.Unknown=2]="Unknown",y[y.InvalidArgument=3]="InvalidArgument",y[y.DeadlineExceeded=4]="DeadlineExceeded",y[y.NotFound=5]="NotFound",y[y.AlreadyExists=6]="AlreadyExists",y[y.PermissionDenied=7]="PermissionDenied",y[y.ResourceExhausted=8]="ResourceExhausted",y[y.FailedPrecondition=9]="FailedPrecondition",y[y.Aborted=10]="Aborted",y[y.OutOfRange=11]="OutOfRange",y[y.Unimplemented=12]="Unimplemented",y[y.Internal=13]="Internal",y[y.Unavailable=14]="Unavailable",y[y.DataLoss=15]="DataLoss",y[y.Unauthenticated=16]="Unauthenticated"}(h=p.Code||(p.Code={})),p.httpStatusToCode=function(y){switch(y){case 0:return h.Internal;case 200:return h.OK;case 400:return h.InvalidArgument;case 401:return h.Unauthenticated;case 403:return h.PermissionDenied;case 404:return h.NotFound;case 409:return h.Aborted;case 412:return h.FailedPrecondition;case 429:return h.ResourceExhausted;case 499:return h.Canceled;case 500:return h.Unknown;case 501:return h.Unimplemented;case 503:return h.Unavailable;case 504:return h.DeadlineExceeded;default:return h.Unknown}}},934:function(l,p,h){Object.defineProperty(p,"__esModule",{value:!0}),p.client=void 0;var y=h(65),_=h(617),E=h(8),I=h(346),N=h(57),w=h(882);p.client=function(V,J){return new C(V,J)};var C=function(){function V(J,W){this.started=!1,this.sentFirstMessage=!1,this.completed=!1,this.closed=!1,this.finishedSending=!1,this.onHeadersCallbacks=[],this.onMessageCallbacks=[],this.onEndCallbacks=[],this.parser=new _.ChunkParser,this.methodDefinition=J,this.props=W,this.createTransport()}return V.prototype.createTransport=function(){var J=this.props.host+"/"+this.methodDefinition.service.serviceName+"/"+this.methodDefinition.methodName,W={methodDefinition:this.methodDefinition,debug:this.props.debug||!1,url:J,onHeaders:this.onTransportHeaders.bind(this),onChunk:this.onTransportChunk.bind(this),onEnd:this.onTransportEnd.bind(this)};this.props.transport?this.transport=this.props.transport(W):this.transport=N.makeDefaultTransport(W)},V.prototype.onTransportHeaders=function(J,W){if(this.props.debug&&I.debug("onHeaders",J,W),this.closed)this.props.debug&&I.debug("grpc.onHeaders received after request was closed - ignoring");else if(W!==0){this.responseHeaders=J,this.props.debug&&I.debug("onHeaders.responseHeaders",JSON.stringify(this.responseHeaders,null,2));var g=D(J);this.props.debug&&I.debug("onHeaders.gRPCStatus",g);var O=g&&g>=0?g:E.httpStatusToCode(W);this.props.debug&&I.debug("onHeaders.code",O);var $=J.get("grpc-message")||[];if(this.props.debug&&I.debug("onHeaders.gRPCMessage",$),this.rawOnHeaders(J),O!==E.Code.OK){var x=this.decodeGRPCStatus($[0]);this.rawOnError(O,x,J)}}},V.prototype.onTransportChunk=function(J){var W=this;if(this.closed)this.props.debug&&I.debug("grpc.onChunk received after request was closed - ignoring");else{var g=[];try{g=this.parser.parse(J)}catch(O){return this.props.debug&&I.debug("onChunk.parsing error",O,O.message),void this.rawOnError(E.Code.Internal,"parsing error: "+O.message)}g.forEach(function(O){if(O.chunkType===_.ChunkType.MESSAGE){var $=W.methodDefinition.responseType.deserializeBinary(O.data);W.rawOnMessage($)}else O.chunkType===_.ChunkType.TRAILERS&&(W.responseHeaders?(W.responseTrailers=new y.Metadata(O.trailers),W.props.debug&&I.debug("onChunk.trailers",W.responseTrailers)):(W.responseHeaders=new y.Metadata(O.trailers),W.rawOnHeaders(W.responseHeaders)))})}},V.prototype.onTransportEnd=function(){if(this.props.debug&&I.debug("grpc.onEnd"),this.closed)this.props.debug&&I.debug("grpc.onEnd received after request was closed - ignoring");else if(this.responseTrailers!==void 0){var J=D(this.responseTrailers);if(J!==null){var W=this.responseTrailers.get("grpc-message"),g=this.decodeGRPCStatus(W[0]);this.rawOnEnd(J,g,this.responseTrailers)}else this.rawOnError(E.Code.Internal,"Response closed without grpc-status (Trailers provided)")}else{if(this.responseHeaders===void 0)return void this.rawOnError(E.Code.Unknown,"Response closed without headers");var O=D(this.responseHeaders),$=this.responseHeaders.get("grpc-message");if(this.props.debug&&I.debug("grpc.headers only response ",O,$),O===null)return void this.rawOnEnd(E.Code.Unknown,"Response closed without grpc-status (Headers only)",this.responseHeaders);var x=this.decodeGRPCStatus($[0]);this.rawOnEnd(O,x,this.responseHeaders)}},V.prototype.decodeGRPCStatus=function(J){if(!J)return"";try{return decodeURIComponent(J)}catch{return J}},V.prototype.rawOnEnd=function(J,W,g){var O=this;this.props.debug&&I.debug("rawOnEnd",J,W,g),this.completed||(this.completed=!0,this.onEndCallbacks.forEach(function($){if(!O.closed)try{$(J,W,g)}catch(x){setTimeout(function(){throw x},0)}}))},V.prototype.rawOnHeaders=function(J){this.props.debug&&I.debug("rawOnHeaders",J),this.completed||this.onHeadersCallbacks.forEach(function(W){try{W(J)}catch(g){setTimeout(function(){throw g},0)}})},V.prototype.rawOnError=function(J,W,g){var O=this;g===void 0&&(g=new y.Metadata),this.props.debug&&I.debug("rawOnError",J,W),this.completed||(this.completed=!0,this.onEndCallbacks.forEach(function($){if(!O.closed)try{$(J,W,g)}catch(x){setTimeout(function(){throw x},0)}}))},V.prototype.rawOnMessage=function(J){var W=this;this.props.debug&&I.debug("rawOnMessage",J.toObject()),this.completed||this.closed||this.onMessageCallbacks.forEach(function(g){if(!W.closed)try{g(J)}catch(O){setTimeout(function(){throw O},0)}})},V.prototype.onHeaders=function(J){this.onHeadersCallbacks.push(J)},V.prototype.onMessage=function(J){this.onMessageCallbacks.push(J)},V.prototype.onEnd=function(J){this.onEndCallbacks.push(J)},V.prototype.start=function(J){if(this.started)throw new Error("Client already started - cannot .start()");this.started=!0;var W=new y.Metadata(J||{});W.set("content-type","application/grpc-web+proto"),W.set("x-grpc-web","1"),this.transport.start(W)},V.prototype.send=function(J){if(!this.started)throw new Error("Client not started - .start() must be called before .send()");if(this.closed)throw new Error("Client already closed - cannot .send()");if(this.finishedSending)throw new Error("Client already finished sending - cannot .send()");if(!this.methodDefinition.requestStream&&this.sentFirstMessage)throw new Error("Message already sent for non-client-streaming method - cannot .send()");this.sentFirstMessage=!0;var W=w.frameRequest(J);this.transport.sendMessage(W)},V.prototype.finishSend=function(){if(!this.started)throw new Error("Client not started - .finishSend() must be called before .close()");if(this.closed)throw new Error("Client already closed - cannot .send()");if(this.finishedSending)throw new Error("Client already finished sending - cannot .finishSend()");this.finishedSending=!0,this.transport.finishSend()},V.prototype.close=function(){if(!this.started)throw new Error("Client not started - .start() must be called before .close()");if(this.closed)throw new Error("Client already closed - cannot .close()");this.closed=!0,this.props.debug&&I.debug("request.abort aborting request"),this.transport.cancel()},V}();function D(V){var J=V.get("grpc-status")||[];if(J.length>0)try{var W=J[0];return parseInt(W,10)}catch{return null}return null}},346:function(l,p){Object.defineProperty(p,"__esModule",{value:!0}),p.debug=void 0,p.debug=function(){for(var h=[],y=0;y<arguments.length;y++)h[y]=arguments[y];console.debug?console.debug.apply(null,h):console.log.apply(null,h)}},607:function(l,p,h){Object.defineProperty(p,"__esModule",{value:!0}),p.grpc=void 0;var y,_=h(418),E=h(57),I=h(229),N=h(540),w=h(210),C=h(859),D=h(8),V=h(938),J=h(35),W=h(934);(y=p.grpc||(p.grpc={})).setDefaultTransport=E.setDefaultTransportFactory,y.CrossBrowserHttpTransport=C.CrossBrowserHttpTransport,y.FetchReadableStreamTransport=I.FetchReadableStreamTransport,y.XhrTransport=w.XhrTransport,y.WebsocketTransport=N.WebsocketTransport,y.Code=D.Code,y.Metadata=_.BrowserHeaders,y.client=function(g,O){return W.client(g,O)},y.invoke=V.invoke,y.unary=J.unary},938:function(l,p,h){Object.defineProperty(p,"__esModule",{value:!0}),p.invoke=void 0;var y=h(934);p.invoke=function(_,E){if(_.requestStream)throw new Error(".invoke cannot be used with client-streaming methods. Use .client instead.");var I=y.client(_,{host:E.host,transport:E.transport,debug:E.debug});return E.onHeaders&&I.onHeaders(E.onHeaders),E.onMessage&&I.onMessage(E.onMessage),E.onEnd&&I.onEnd(E.onEnd),I.start(E.metadata),I.send(E.request),I.finishSend(),{close:function(){I.close()}}}},65:function(l,p,h){Object.defineProperty(p,"__esModule",{value:!0}),p.Metadata=void 0;var y=h(418);Object.defineProperty(p,"Metadata",{enumerable:!0,get:function(){return y.BrowserHeaders}})},57:function(l,p,h){Object.defineProperty(p,"__esModule",{value:!0}),p.makeDefaultTransport=p.setDefaultTransportFactory=void 0;var y=h(859),_=function(E){return y.CrossBrowserHttpTransport({withCredentials:!1})(E)};p.setDefaultTransportFactory=function(E){_=E},p.makeDefaultTransport=function(E){return _(E)}},229:function(l,p,h){var y=this&&this.__assign||function(){return(y=Object.assign||function(N){for(var w,C=1,D=arguments.length;C<D;C++)for(var V in w=arguments[C])Object.prototype.hasOwnProperty.call(w,V)&&(N[V]=w[V]);return N}).apply(this,arguments)};Object.defineProperty(p,"__esModule",{value:!0}),p.detectFetchSupport=p.FetchReadableStreamTransport=void 0;var _=h(65),E=h(346);p.FetchReadableStreamTransport=function(N){return function(w){return function(C,D){return C.debug&&E.debug("fetchRequest",C),new I(C,D)}(w,N)}};var I=function(){function N(w,C){this.cancelled=!1,this.controller=self.AbortController&&new AbortController,this.options=w,this.init=C}return N.prototype.pump=function(w,C){var D=this;if(this.reader=w,this.cancelled)return this.options.debug&&E.debug("Fetch.pump.cancel at first pump"),void this.reader.cancel().catch(function(V){D.options.debug&&E.debug("Fetch.pump.reader.cancel exception",V)});this.reader.read().then(function(V){if(V.done)return D.options.onEnd(),C;D.options.onChunk(V.value),D.pump(D.reader,C)}).catch(function(V){D.cancelled?D.options.debug&&E.debug("Fetch.catch - request cancelled"):(D.cancelled=!0,D.options.debug&&E.debug("Fetch.catch",V.message),D.options.onEnd(V))})},N.prototype.send=function(w){var C=this;fetch(this.options.url,y(y({},this.init),{headers:this.metadata.toHeaders(),method:"POST",body:w,signal:this.controller&&this.controller.signal})).then(function(D){if(C.options.debug&&E.debug("Fetch.response",D),C.options.onHeaders(new _.Metadata(D.headers),D.status),!D.body)return D;C.pump(D.body.getReader(),D)}).catch(function(D){C.cancelled?C.options.debug&&E.debug("Fetch.catch - request cancelled"):(C.cancelled=!0,C.options.debug&&E.debug("Fetch.catch",D.message),C.options.onEnd(D))})},N.prototype.sendMessage=function(w){this.send(w)},N.prototype.finishSend=function(){},N.prototype.start=function(w){this.metadata=w},N.prototype.cancel=function(){var w=this;this.cancelled?this.options.debug&&E.debug("Fetch.cancel already cancelled"):(this.cancelled=!0,this.controller?(this.options.debug&&E.debug("Fetch.cancel.controller.abort"),this.controller.abort()):this.options.debug&&E.debug("Fetch.cancel.missing abort controller"),this.reader?(this.options.debug&&E.debug("Fetch.cancel.reader.cancel"),this.reader.cancel().catch(function(C){w.options.debug&&E.debug("Fetch.cancel.reader.cancel exception",C)})):this.options.debug&&E.debug("Fetch.cancel before reader"))},N}();p.detectFetchSupport=function(){return typeof Response!="undefined"&&Response.prototype.hasOwnProperty("body")&&typeof Headers=="function"}},859:function(l,p,h){Object.defineProperty(p,"__esModule",{value:!0}),p.CrossBrowserHttpTransport=void 0;var y=h(229),_=h(210);p.CrossBrowserHttpTransport=function(E){if(y.detectFetchSupport()){var I={credentials:E.withCredentials?"include":"same-origin"};return y.FetchReadableStreamTransport(I)}return _.XhrTransport({withCredentials:E.withCredentials})}},210:function(l,p,h){var y,_=this&&this.__extends||(y=function(J,W){return(y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,O){g.__proto__=O}||function(g,O){for(var $ in O)Object.prototype.hasOwnProperty.call(O,$)&&(g[$]=O[$])})(J,W)},function(J,W){function g(){this.constructor=J}y(J,W),J.prototype=W===null?Object.create(W):(g.prototype=W.prototype,new g)});Object.defineProperty(p,"__esModule",{value:!0}),p.stringToArrayBuffer=p.MozChunkedArrayBufferXHR=p.XHR=p.XhrTransport=void 0;var E=h(65),I=h(346),N=h(849);p.XhrTransport=function(J){return function(W){if(N.detectMozXHRSupport())return new C(W,J);if(N.detectXHROverrideMimeTypeSupport())return new w(W,J);throw new Error("This environment's XHR implementation cannot support binary transfer.")}};var w=function(){function J(W,g){this.options=W,this.init=g}return J.prototype.onProgressEvent=function(){this.options.debug&&I.debug("XHR.onProgressEvent.length: ",this.xhr.response.length);var W=this.xhr.response.substr(this.index);this.index=this.xhr.response.length;var g=V(W);this.options.onChunk(g)},J.prototype.onLoadEvent=function(){this.options.debug&&I.debug("XHR.onLoadEvent"),this.options.onEnd()},J.prototype.onStateChange=function(){this.options.debug&&I.debug("XHR.onStateChange",this.xhr.readyState),this.xhr.readyState===XMLHttpRequest.HEADERS_RECEIVED&&this.options.onHeaders(new E.Metadata(this.xhr.getAllResponseHeaders()),this.xhr.status)},J.prototype.sendMessage=function(W){this.xhr.send(W)},J.prototype.finishSend=function(){},J.prototype.start=function(W){var g=this;this.metadata=W;var O=new XMLHttpRequest;this.xhr=O,O.open("POST",this.options.url),this.configureXhr(),this.metadata.forEach(function($,x){O.setRequestHeader($,x.join(", "))}),O.withCredentials=Boolean(this.init.withCredentials),O.addEventListener("readystatechange",this.onStateChange.bind(this)),O.addEventListener("progress",this.onProgressEvent.bind(this)),O.addEventListener("loadend",this.onLoadEvent.bind(this)),O.addEventListener("error",function($){g.options.debug&&I.debug("XHR.error",$),g.options.onEnd($.error)})},J.prototype.configureXhr=function(){this.xhr.responseType="text",this.xhr.overrideMimeType("text/plain; charset=x-user-defined")},J.prototype.cancel=function(){this.options.debug&&I.debug("XHR.abort"),this.xhr.abort()},J}();p.XHR=w;var C=function(J){function W(){return J!==null&&J.apply(this,arguments)||this}return _(W,J),W.prototype.configureXhr=function(){this.options.debug&&I.debug("MozXHR.configureXhr: setting responseType to 'moz-chunked-arraybuffer'"),this.xhr.responseType="moz-chunked-arraybuffer"},W.prototype.onProgressEvent=function(){var g=this.xhr.response;this.options.debug&&I.debug("MozXHR.onProgressEvent: ",new Uint8Array(g)),this.options.onChunk(new Uint8Array(g))},W}(w);function D(J,W){var g=J.charCodeAt(W);if(g>=55296&&g<=56319){var O=J.charCodeAt(W+1);O>=56320&&O<=57343&&(g=65536+(g-55296<<10)+(O-56320))}return g}function V(J){for(var W=new Uint8Array(J.length),g=0,O=0;O<J.length;O++){var $=String.prototype.codePointAt?J.codePointAt(O):D(J,O);W[g++]=255&$}return W}p.MozChunkedArrayBufferXHR=C,p.stringToArrayBuffer=V},849:function(l,p){var h;function y(){if(h!==void 0)return h;if(XMLHttpRequest){h=new XMLHttpRequest;try{h.open("GET","https://localhost")}catch{}}return h}function _(E){var I=y();if(!I)return!1;try{return I.responseType=E,I.responseType===E}catch{}return!1}Object.defineProperty(p,"__esModule",{value:!0}),p.detectXHROverrideMimeTypeSupport=p.detectMozXHRSupport=p.xhrSupportsResponseType=void 0,p.xhrSupportsResponseType=_,p.detectMozXHRSupport=function(){return typeof XMLHttpRequest!="undefined"&&_("moz-chunked-arraybuffer")},p.detectXHROverrideMimeTypeSupport=function(){return typeof XMLHttpRequest!="undefined"&&XMLHttpRequest.prototype.hasOwnProperty("overrideMimeType")}},540:function(l,p,h){Object.defineProperty(p,"__esModule",{value:!0}),p.WebsocketTransport=void 0;var y,_=h(346),E=h(617);(function(N){N[N.FINISH_SEND=1]="FINISH_SEND"})(y||(y={}));var I=new Uint8Array([1]);p.WebsocketTransport=function(){return function(N){return function(w){w.debug&&_.debug("websocketRequest",w);var C,D=function(W){if(W.substr(0,8)==="https://")return"wss://"+W.substr(8);if(W.substr(0,7)==="http://")return"ws://"+W.substr(7);throw new Error("Websocket transport constructed with non-https:// or http:// host.")}(w.url),V=[];function J(W){if(W===y.FINISH_SEND)C.send(I);else{var g=W,O=new Int8Array(g.byteLength+1);O.set(new Uint8Array([0])),O.set(g,1),C.send(O)}}return{sendMessage:function(W){C&&C.readyState!==C.CONNECTING?J(W):V.push(W)},finishSend:function(){C&&C.readyState!==C.CONNECTING?J(y.FINISH_SEND):V.push(y.FINISH_SEND)},start:function(W){(C=new WebSocket(D,["grpc-websockets"])).binaryType="arraybuffer",C.onopen=function(){var g;w.debug&&_.debug("websocketRequest.onopen"),C.send((g="",W.forEach(function(O,$){g+=O+": "+$.join(", ")+`\r
`}),E.encodeASCII(g))),V.forEach(function(O){J(O)})},C.onclose=function(g){w.debug&&_.debug("websocketRequest.onclose",g),w.onEnd()},C.onerror=function(g){w.debug&&_.debug("websocketRequest.onerror",g)},C.onmessage=function(g){w.onChunk(new Uint8Array(g.data))}},cancel:function(){w.debug&&_.debug("websocket.abort"),C.close()}}}(N)}}},35:function(l,p,h){Object.defineProperty(p,"__esModule",{value:!0}),p.unary=void 0;var y=h(65),_=h(934);p.unary=function(E,I){if(E.responseStream)throw new Error(".unary cannot be used with server-streaming methods. Use .invoke or .client instead.");if(E.requestStream)throw new Error(".unary cannot be used with client-streaming methods. Use .client instead.");var N=null,w=null,C=_.client(E,{host:I.host,transport:I.transport,debug:I.debug});return C.onHeaders(function(D){N=D}),C.onMessage(function(D){w=D}),C.onEnd(function(D,V,J){I.onEnd({status:D,statusMessage:V,headers:N||new y.Metadata,message:w,trailers:J})}),C.start(I.metadata),C.send(I.request),C.finishSend(),{close:function(){C.close()}}}},882:function(l,p){Object.defineProperty(p,"__esModule",{value:!0}),p.frameRequest=void 0,p.frameRequest=function(h){var y=h.serializeBinary(),_=new ArrayBuffer(y.byteLength+5);return new DataView(_,1,4).setUint32(0,y.length,!1),new Uint8Array(_,5).set(y),new Uint8Array(_)}}},d={},function l(p){if(d[p])return d[p].exports;var h=d[p]={exports:{}};return u[p].call(h.exports,h,h.exports,l),h.exports}(607);var u,d})})(grpcWebClient_umd);class AbortError extends Error{constructor(){super("The operation has been aborted"),this.message="The operation has been aborted",this.name="AbortError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,this.constructor)}}function isAbortError(a){return typeof a=="object"&&a!==null&&a.name==="AbortError"}function throwIfAborted(a){if(a.aborted)throw new AbortError}function rethrowAbortError(a){if(isAbortError(a))throw a}function catchAbortError(a){if(!isAbortError(a))throw a}function execute(a,s){return new Promise((u,d)=>{if(a.aborted){d(new AbortError);return}let l,p=!1;function h(){p||(p=!0,l!=null&&l())}const y=s(_=>{u(_),h()},_=>{d(_),h()});if(!p){const _=()=>{const E=y();E==null?d(new AbortError):E.then(()=>{d(new AbortError)},I=>{d(I)}),h()};a.addEventListener("abort",_),l=()=>{a.removeEventListener("abort",_)}}})}function abortable(a,s){if(a.aborted){const u=()=>{};s.then(u,u)}return execute(a,(u,d)=>(s.then(u,d),()=>{}))}function delay$2(a,s){return execute(a,u=>{const d=typeof s=="number"?s:s.getTime()-Date.now(),l=setTimeout(u,d);return()=>{clearTimeout(l)}})}function forever(a){return execute(a,()=>()=>{})}function waitForEvent(a,s,u,d){return execute(a,l=>{let p,h=!1;return p=listen(s,u,(..._)=>{l(_.length>1?_:_[0]),h=!0,p!=null&&p()},d),h&&p(),()=>{h=!0,p!=null&&p()}})}function listen(a,s,u,d){if(isEventTarget(a))return a.addEventListener(s,u,d),()=>a.removeEventListener(s,u,d);if(isJQueryStyleEventEmitter(a))return a.on(s,u),()=>a.off(s,u);if(isNodeStyleEventEmitter(a))return a.addListener(s,u),()=>a.removeListener(s,u);throw new Error("Invalid event target")}function isNodeStyleEventEmitter(a){return isFunction$3(a.addListener)&&isFunction$3(a.removeListener)}function isJQueryStyleEventEmitter(a){return isFunction$3(a.on)&&isFunction$3(a.off)}function isEventTarget(a){return isFunction$3(a.addEventListener)&&isFunction$3(a.removeEventListener)}const isFunction$3=a=>typeof a=="function";var browser$3={exports:{}};const _global=typeof self!="undefined"?self:typeof window!="undefined"?window:void 0;if(!_global)throw new Error("Unable to find global scope. Are you sure this is running in the browser?");if(!_global.AbortController)throw new Error('Could not find "AbortController" in the global scope. You need to polyfill it first');browser$3.exports=_global.AbortController,browser$3.exports.default=_global.AbortController;var AbortController$1=browser$3.exports;function all(a,s){return new Promise((u,d)=>{if(a.aborted){d(new AbortError);return}const l=new AbortController$1,p=s(l.signal);if(p.length===0){u([]);return}const h=()=>{l.abort()};a.addEventListener("abort",h);let y;const _=new Array(p.length);let E=0;function I(){E+=1,E===p.length&&(a.removeEventListener("abort",h),y!=null?d(y.reason):u(_))}for(const[N,w]of p.entries())w.then(C=>{_[N]=C,I()},C=>{l.abort(),(y==null||!isAbortError(C)&&isAbortError(y.reason))&&(y={reason:C}),I()})})}function race$3(a,s){return new Promise((u,d)=>{if(a.aborted){d(new AbortError);return}const l=new AbortController$1,p=s(l.signal),h=()=>{l.abort()};a.addEventListener("abort",h);let y=0;function _(I){l.abort(),y+=1,y===p.length&&(a.removeEventListener("abort",h),I.status==="fulfilled"?u(I.value):d(I.reason))}let E;for(const I of p)I.then(N=>{E==null&&(E={status:"fulfilled",value:N}),_(E)},N=>{(E==null||!isAbortError(N)&&(E.status==="fulfilled"||isAbortError(E.reason)))&&(E={status:"rejected",reason:N}),_(E)})})}async function retry$2(a,s,u={}){const{baseMs:d=1e3,maxDelayMs:l=15e3,onError:p,maxAttempts:h=1/0}=u;for(let y=0;;y++)try{return await s(a,y)}catch(_){if(rethrowAbortError(_),y>=h)throw _;const E=Math.min(l,Math.pow(2,y)*d),I=Math.round(E*(1+Math.random())/2);p&&p(_,y,I),await delay$2(a,I)}}function spawn(a,s){if(a.aborted)return Promise.reject(new AbortError);const u=[],d=new AbortController$1,l=d.signal,p=()=>{d.abort()};a.addEventListener("abort",p);const h=()=>{a.removeEventListener("abort",p)},y=new Set,_=()=>{for(const N of y)N.abort()};l.addEventListener("abort",_);const E=()=>{l.removeEventListener("abort",_)};let I=new Promise((N,w)=>{let C,D;V(J=>s(J,{defer(W){u.push(W)},fork:V})).join().then(J=>{d.abort(),C={value:J}},J=>{d.abort(),(!isAbortError(J)||D==null)&&(D={error:J})});function V(J){if(l.aborted)return{abort(){},async join(){throw new AbortError}};const W=new AbortController$1,g=W.signal,O=J(g),$={abort(){W.abort()},join:()=>O};return y.add($),O.catch(catchAbortError).catch(x=>{D={error:x},d.abort()}).finally(()=>{y.delete($),y.size===0&&(D!=null?w(D.error):N(C.value))}),$}});return I=I.finally(()=>{h(),E();let N=Promise.resolve();for(let w=u.length-1;w>=0;w--)N=N.finally(u[w]);return N}),I}function run(a){const s=new AbortController$1,u=a(s.signal).catch(catchAbortError);return()=>(s.abort(),u)}var es=Object.freeze(Object.defineProperty({__proto__:null,abortable,AbortError,isAbortError,throwIfAborted,rethrowAbortError,catchAbortError,delay:delay$2,execute,forever,waitForEvent,all,race:race$3,retry:retry$2,spawn,run},Symbol.toStringTag,{value:"Module"})),require$$1$1=getAugmentedNamespace(es),AsyncSink$1={};Object.defineProperty(AsyncSink$1,"__esModule",{value:!0}),AsyncSink$1.AsyncSink=void 0;const ARRAY_VALUE="value",ARRAY_ERROR="error";class AsyncSink{constructor(){this._ended=!1,this._values=[],this._resolvers=[]}[Symbol.asyncIterator](){return this}write(s){this._push({type:ARRAY_VALUE,value:s})}error(s){this._push({type:ARRAY_ERROR,error:s})}_push(s){if(this._ended)throw new Error("AsyncSink already ended");if(this._resolvers.length>0){const{resolve:u,reject:d}=this._resolvers.shift();s.type===ARRAY_ERROR?d(s.error):u({done:!1,value:s.value})}else this._values.push(s)}next(){if(this._values.length>0){const{type:s,value:u,error:d}=this._values.shift();return s===ARRAY_ERROR?Promise.reject(d):Promise.resolve({done:!1,value:u})}return this._ended?Promise.resolve({done:!0}):new Promise((s,u)=>{this._resolvers.push({resolve:s,reject:u})})}end(){for(;this._resolvers.length>0;)this._resolvers.shift().resolve({done:!0});this._ended=!0}}AsyncSink$1.AsyncSink=AsyncSink;var isAsyncIterable$2={};Object.defineProperty(isAsyncIterable$2,"__esModule",{value:!0}),isAsyncIterable$2.isAsyncIterable=void 0;function isAsyncIterable$1(a){return a!=null&&Symbol.asyncIterator in a}isAsyncIterable$2.isAsyncIterable=isAsyncIterable$1;var convertMetadata={},base64$4={exports:{}};(function(a,s){(function(u,d){a.exports=d()})(typeof self!="undefined"?self:typeof window!="undefined"?window:commonjsGlobal,function(){var u="3.7.2",d=u,l=typeof atob=="function",p=typeof btoa=="function",h=typeof Buffer=="function",y=typeof TextDecoder=="function"?new TextDecoder:void 0,_=typeof TextEncoder=="function"?new TextEncoder:void 0,E="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",I=Array.prototype.slice.call(E),N=function(U){var ee={};return U.forEach(function(de,ae){return ee[de]=ae}),ee}(I),w=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,C=String.fromCharCode.bind(String),D=typeof Uint8Array.from=="function"?Uint8Array.from.bind(Uint8Array):function(U,ee){return ee===void 0&&(ee=function(de){return de}),new Uint8Array(Array.prototype.slice.call(U,0).map(ee))},V=function(U){return U.replace(/=/g,"").replace(/[+\/]/g,function(ee){return ee=="+"?"-":"_"})},J=function(U){return U.replace(/[^A-Za-z0-9\+\/]/g,"")},W=function(U){for(var ee,de,ae,fe,Ee="",Pe=U.length%3,Se=0;Se<U.length;){if((de=U.charCodeAt(Se++))>255||(ae=U.charCodeAt(Se++))>255||(fe=U.charCodeAt(Se++))>255)throw new TypeError("invalid character found");ee=de<<16|ae<<8|fe,Ee+=I[ee>>18&63]+I[ee>>12&63]+I[ee>>6&63]+I[ee&63]}return Pe?Ee.slice(0,Pe-3)+"===".substring(Pe):Ee},g=p?function(U){return btoa(U)}:h?function(U){return Buffer.from(U,"binary").toString("base64")}:W,O=h?function(U){return Buffer.from(U).toString("base64")}:function(U){for(var ee=4096,de=[],ae=0,fe=U.length;ae<fe;ae+=ee)de.push(C.apply(null,U.subarray(ae,ae+ee)));return g(de.join(""))},$=function(U,ee){return ee===void 0&&(ee=!1),ee?V(O(U)):O(U)},x=function(U){if(U.length<2){var ee=U.charCodeAt(0);return ee<128?U:ee<2048?C(192|ee>>>6)+C(128|ee&63):C(224|ee>>>12&15)+C(128|ee>>>6&63)+C(128|ee&63)}else{var ee=65536+(U.charCodeAt(0)-55296)*1024+(U.charCodeAt(1)-56320);return C(240|ee>>>18&7)+C(128|ee>>>12&63)+C(128|ee>>>6&63)+C(128|ee&63)}},Y=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,te=function(U){return U.replace(Y,x)},ne=h?function(U){return Buffer.from(U,"utf8").toString("base64")}:_?function(U){return O(_.encode(U))}:function(U){return g(te(U))},F=function(U,ee){return ee===void 0&&(ee=!1),ee?V(ne(U)):ne(U)},j=function(U){return F(U,!0)},K=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,M=function(U){switch(U.length){case 4:var ee=(7&U.charCodeAt(0))<<18|(63&U.charCodeAt(1))<<12|(63&U.charCodeAt(2))<<6|63&U.charCodeAt(3),de=ee-65536;return C((de>>>10)+55296)+C((de&1023)+56320);case 3:return C((15&U.charCodeAt(0))<<12|(63&U.charCodeAt(1))<<6|63&U.charCodeAt(2));default:return C((31&U.charCodeAt(0))<<6|63&U.charCodeAt(1))}},q=function(U){return U.replace(K,M)},z=function(U){if(U=U.replace(/\s+/g,""),!w.test(U))throw new TypeError("malformed base64.");U+="==".slice(2-(U.length&3));for(var ee,de="",ae,fe,Ee=0;Ee<U.length;)ee=N[U.charAt(Ee++)]<<18|N[U.charAt(Ee++)]<<12|(ae=N[U.charAt(Ee++)])<<6|(fe=N[U.charAt(Ee++)]),de+=ae===64?C(ee>>16&255):fe===64?C(ee>>16&255,ee>>8&255):C(ee>>16&255,ee>>8&255,ee&255);return de},le=l?function(U){return atob(J(U))}:h?function(U){return Buffer.from(U,"base64").toString("binary")}:z,re=h?function(U){return D(Buffer.from(U,"base64"))}:function(U){return D(le(U),function(ee){return ee.charCodeAt(0)})},Q=function(U){return re(me(U))},ce=h?function(U){return Buffer.from(U,"base64").toString("utf8")}:y?function(U){return y.decode(re(U))}:function(U){return q(le(U))},me=function(U){return J(U.replace(/[-_]/g,function(ee){return ee=="-"?"+":"/"}))},ve=function(U){return ce(me(U))},ye=function(U){if(typeof U!="string")return!1;var ee=U.replace(/\s+/g,"").replace(/={0,2}$/,"");return!/[^\s0-9a-zA-Z\+/]/.test(ee)||!/[^\s0-9a-zA-Z\-_]/.test(ee)},v=function(U){return{value:U,enumerable:!1,writable:!0,configurable:!0}},T=function(){var U=function(ee,de){return Object.defineProperty(String.prototype,ee,v(de))};U("fromBase64",function(){return ve(this)}),U("toBase64",function(ee){return F(this,ee)}),U("toBase64URI",function(){return F(this,!0)}),U("toBase64URL",function(){return F(this,!0)}),U("toUint8Array",function(){return Q(this)})},L=function(){var U=function(ee,de){return Object.defineProperty(Uint8Array.prototype,ee,v(de))};U("toBase64",function(ee){return $(this,ee)}),U("toBase64URI",function(){return $(this,!0)}),U("toBase64URL",function(){return $(this,!0)})},oe=function(){T(),L()},k={version:u,VERSION:d,atob:le,atobPolyfill:z,btoa:g,btoaPolyfill:W,fromBase64:ve,toBase64:F,encode:F,encodeURI:j,encodeURL:j,utob:te,btou:q,decode:ve,isValid:ye,fromUint8Array:$,toUint8Array:Q,extendString:T,extendUint8Array:L,extendBuiltins:oe};return k.Base64={},Object.keys(k).forEach(function(U){return k.Base64[U]=k[U]}),k})})(base64$4),Object.defineProperty(convertMetadata,"__esModule",{value:!0}),convertMetadata.convertMetadataFromGrpcWeb=convertMetadata.convertMetadataToGrpcWeb=void 0;const grpc_web_1$4=grpcWebClient_umd.exports,nice_grpc_common_1$5=lib,js_base64_1=base64$4.exports;function convertMetadataToGrpcWeb(a){const s=new grpc_web_1$4.grpc.Metadata;for(const[u,d]of a)for(const l of d)s.append(u,typeof l=="string"?l:js_base64_1.Base64.fromUint8Array(l));return s}convertMetadata.convertMetadataToGrpcWeb=convertMetadataToGrpcWeb;function convertMetadataFromGrpcWeb(a){const s=(0,nice_grpc_common_1$5.Metadata)();for(const[u,d]of Object.entries(a.headersMap))s.set(u,u.endsWith("-bin")?d.map(l=>js_base64_1.Base64.toUint8Array(l)):d);return s}convertMetadata.convertMetadataFromGrpcWeb=convertMetadataFromGrpcWeb;var __importDefault$l=commonjsGlobal&&commonjsGlobal.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(createBidiStreamingMethod$1,"__esModule",{value:!0}),createBidiStreamingMethod$1.createBidiStreamingMethod=void 0;const nice_grpc_common_1$4=lib,grpc_web_1$3=grpcWebClient_umd.exports,abort_controller_x_1$4=require$$1$1,node_abort_controller_1$3=__importDefault$l(browser$3.exports),AsyncSink_1$1=AsyncSink$1,service_definitions_1$4=serviceDefinitions,isAsyncIterable_1$3=isAsyncIterable$2,convertMetadata_1$3=convertMetadata;function createBidiStreamingMethod(a,s,u,d){const l=(0,service_definitions_1$4.toGrpcWebMethodDefinition)(a),p={path:a.path,requestStream:a.requestStream,responseStream:a.responseStream,options:a.options};async function*h(_,E){if(!(0,isAsyncIterable_1$3.isAsyncIterable)(_))throw new Error("A middleware passed invalid request to next(): expected a single message for bidirectional streaming method");const{metadata:I=(0,nice_grpc_common_1$4.Metadata)(),signal:N=new node_abort_controller_1$3.default().signal,onHeader:w,onTrailer:C}=E,D=new node_abort_controller_1$3.default,V=new AsyncSink_1$1.AsyncSink,J=grpc_web_1$3.grpc.client(l,{host:s.address,transport:s.transport});J.onHeaders(O=>{w==null||w((0,convertMetadata_1$3.convertMetadataFromGrpcWeb)(O))}),J.onMessage(O=>{V.write(O)}),J.onEnd((O,$,x)=>{C==null||C((0,convertMetadata_1$3.convertMetadataFromGrpcWeb)(x)),O===grpc_web_1$3.grpc.Code.OK?V.end():V.error(new nice_grpc_common_1$4.ClientError(a.path,+O,$))}),J.start((0,convertMetadata_1$3.convertMetadataToGrpcWeb)(I));let W;pipeRequest$1(D.signal,_,J,a).then(()=>{J.finishSend()},O=>{(0,abort_controller_x_1$4.isAbortError)(O)||(W=O,J.close(),V.end())});const g=()=>{V.error(new abort_controller_x_1$4.AbortError),D.abort(),J.close()};N.addEventListener("abort",g);try{yield*V}finally{if(D.abort(),N.removeEventListener("abort",g),(0,abort_controller_x_1$4.throwIfAborted)(N),W)throw W}}const y=u==null?h:(_,E)=>u({method:p,requestStream:!0,request:_,responseStream:!0,next:h},E);return(_,E)=>{const N=y(_,pe(pe({},d),E))[Symbol.asyncIterator]();return{[Symbol.asyncIterator](){return{async next(){const w=await N.next();return w.done&&w.value!=null?await N.throw(new Error("A middleware returned a message, but expected to return void for bidirectional streaming method")):w},return(){return N.return()},throw(w){return N.throw(w)}}}}}}createBidiStreamingMethod$1.createBidiStreamingMethod=createBidiStreamingMethod;async function pipeRequest$1(a,s,u,d){for await(const l of s)(0,abort_controller_x_1$4.throwIfAborted)(a),u.send({serializeBinary:()=>d.requestSerialize(l)})}var createClientStreamingMethod$1={},__importDefault$k=commonjsGlobal&&commonjsGlobal.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(createClientStreamingMethod$1,"__esModule",{value:!0}),createClientStreamingMethod$1.createClientStreamingMethod=void 0;const nice_grpc_common_1$3=lib,grpc_web_1$2=grpcWebClient_umd.exports,abort_controller_x_1$3=require$$1$1,node_abort_controller_1$2=__importDefault$k(browser$3.exports),service_definitions_1$3=serviceDefinitions,isAsyncIterable_1$2=isAsyncIterable$2,convertMetadata_1$2=convertMetadata;function createClientStreamingMethod(a,s,u,d){const l=(0,service_definitions_1$3.toGrpcWebMethodDefinition)(a),p={path:a.path,requestStream:a.requestStream,responseStream:a.responseStream,options:a.options};async function*h(_,E){if(!(0,isAsyncIterable_1$2.isAsyncIterable)(_))throw new Error("A middleware passed invalid request to next(): expected a single message for client streaming method");const{metadata:I=(0,nice_grpc_common_1$3.Metadata)(),signal:N=new node_abort_controller_1$2.default().signal,onHeader:w,onTrailer:C}=E;return await(0,abort_controller_x_1$3.execute)(N,(D,V)=>{const J=new node_abort_controller_1$2.default;let W;const g=grpc_web_1$2.grpc.client(l,{host:s.address,transport:s.transport});return g.onHeaders(O=>{w==null||w((0,convertMetadata_1$2.convertMetadataFromGrpcWeb)(O))}),g.onMessage(O=>{W=O}),g.onEnd((O,$,x)=>{C==null||C((0,convertMetadata_1$2.convertMetadataFromGrpcWeb)(x)),J.abort(),O===grpc_web_1$2.grpc.Code.OK?D(W):V(new nice_grpc_common_1$3.ClientError(a.path,+O,$))}),g.start((0,convertMetadata_1$2.convertMetadataToGrpcWeb)(I)),pipeRequest(J.signal,_,g,a).then(()=>{g.finishSend()},O=>{(0,abort_controller_x_1$3.isAbortError)(O)||(V(O),g.close())}),()=>{J.abort(),g.close()}})}const y=u==null?h:(_,E)=>u({method:p,requestStream:!0,request:_,responseStream:!1,next:h},E);return async(_,E)=>{const N=y(_,pe(pe({},d),E))[Symbol.asyncIterator]();let w=await N.next();for(;;){if(!w.done){w=await N.throw(new Error("A middleware yielded a message, but expected to only return a message for client streaming method"));continue}if(w.value==null){w=await N.throw(new Error("A middleware returned void, but expected to return a message for client streaming method"));continue}return w.value}}}createClientStreamingMethod$1.createClientStreamingMethod=createClientStreamingMethod;async function pipeRequest(a,s,u,d){for await(const l of s)(0,abort_controller_x_1$3.throwIfAborted)(a),u.send({serializeBinary:()=>d.requestSerialize(l)})}var createServerStreamingMethod$1={},__importDefault$j=commonjsGlobal&&commonjsGlobal.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(createServerStreamingMethod$1,"__esModule",{value:!0}),createServerStreamingMethod$1.createServerStreamingMethod=void 0;const grpc_web_1$1=grpcWebClient_umd.exports,abort_controller_x_1$2=require$$1$1,AsyncSink_1=AsyncSink$1,nice_grpc_common_1$2=lib,node_abort_controller_1$1=__importDefault$j(browser$3.exports),service_definitions_1$2=serviceDefinitions,convertMetadata_1$1=convertMetadata,isAsyncIterable_1$1=isAsyncIterable$2;function createServerStreamingMethod(a,s,u,d){const l=(0,service_definitions_1$2.toGrpcWebMethodDefinition)(a),p={path:a.path,requestStream:a.requestStream,responseStream:a.responseStream,options:a.options};async function*h(_,E){if((0,isAsyncIterable_1$1.isAsyncIterable)(_))throw new Error("A middleware passed invalid request to next(): expected a single message for server streaming method");const{metadata:I=(0,nice_grpc_common_1$2.Metadata)(),signal:N=new node_abort_controller_1$1.default().signal,onHeader:w,onTrailer:C}=E,D=new AsyncSink_1.AsyncSink,V=grpc_web_1$1.grpc.client(l,{host:s.address,transport:s.transport});V.onHeaders(W=>{w==null||w((0,convertMetadata_1$1.convertMetadataFromGrpcWeb)(W))}),V.onMessage(W=>{D.write(W)}),V.onEnd((W,g,O)=>{C==null||C((0,convertMetadata_1$1.convertMetadataFromGrpcWeb)(O)),W===grpc_web_1$1.grpc.Code.OK?D.end():D.error(new nice_grpc_common_1$2.ClientError(a.path,+W,g))}),V.start((0,convertMetadata_1$1.convertMetadataToGrpcWeb)(I)),V.send({serializeBinary:()=>a.requestSerialize(_)}),V.finishSend();const J=()=>{D.error(new abort_controller_x_1$2.AbortError),V.close()};N.addEventListener("abort",J);try{yield*D}finally{N.removeEventListener("abort",J),(0,abort_controller_x_1$2.throwIfAborted)(N)}}const y=u==null?h:(_,E)=>u({method:p,requestStream:!1,request:_,responseStream:!0,next:h},E);return(_,E)=>{const N=y(_,pe(pe({},d),E))[Symbol.asyncIterator]();return{[Symbol.asyncIterator](){return{async next(){const w=await N.next();return w.done&&w.value!=null?await N.throw(new Error("A middleware returned a message, but expected to return void for server streaming method")):w},return(){return N.return()},throw(w){return N.throw(w)}}}}}}createServerStreamingMethod$1.createServerStreamingMethod=createServerStreamingMethod;var createUnaryMethod$1={},__importDefault$i=commonjsGlobal&&commonjsGlobal.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(createUnaryMethod$1,"__esModule",{value:!0}),createUnaryMethod$1.createUnaryMethod=void 0;const nice_grpc_common_1$1=lib,grpc_web_1=grpcWebClient_umd.exports,abort_controller_x_1$1=require$$1$1,node_abort_controller_1=__importDefault$i(browser$3.exports),service_definitions_1$1=serviceDefinitions,isAsyncIterable_1=isAsyncIterable$2,convertMetadata_1=convertMetadata;function createUnaryMethod(a,s,u,d){const l=(0,service_definitions_1$1.toGrpcWebMethodDefinition)(a),p={path:a.path,requestStream:a.requestStream,responseStream:a.responseStream,options:a.options};async function*h(_,E){if((0,isAsyncIterable_1.isAsyncIterable)(_))throw new Error("A middleware passed invalid request to next(): expected a single message for unary method");const{metadata:I=(0,nice_grpc_common_1$1.Metadata)(),signal:N=new node_abort_controller_1.default().signal,onHeader:w,onTrailer:C}=E;return await(0,abort_controller_x_1$1.execute)(N,(D,V)=>{let J;const W=grpc_web_1.grpc.client(l,{host:s.address,transport:s.transport});return W.onHeaders(g=>{w==null||w((0,convertMetadata_1.convertMetadataFromGrpcWeb)(g))}),W.onMessage(g=>{J=g}),W.onEnd((g,O,$)=>{C==null||C((0,convertMetadata_1.convertMetadataFromGrpcWeb)($)),g===grpc_web_1.grpc.Code.OK?D(J):V(new nice_grpc_common_1$1.ClientError(a.path,+g,O))}),W.start((0,convertMetadata_1.convertMetadataToGrpcWeb)(I)),W.send({serializeBinary:()=>a.requestSerialize(_)}),W.finishSend(),()=>{W.close()}})}const y=u==null?h:(_,E)=>u({method:p,requestStream:!1,request:_,responseStream:!1,next:h},E);return async(_,E)=>{const N=y(_,pe(pe({},d),E))[Symbol.asyncIterator]();let w=await N.next();for(;;){if(!w.done){w=await N.throw(new Error("A middleware yielded a message, but expected to only return a message for unary method"));continue}if(w.value==null){w=await N.throw(new Error("A middleware returned void, but expected to return a message for unary method"));continue}return w.value}}}createUnaryMethod$1.createUnaryMethod=createUnaryMethod,Object.defineProperty(ClientFactory,"__esModule",{value:!0}),ClientFactory.createClient=ClientFactory.createClientFactory=void 0;const nice_grpc_common_1=lib,service_definitions_1=serviceDefinitions,createBidiStreamingMethod_1=createBidiStreamingMethod$1,createClientStreamingMethod_1=createClientStreamingMethod$1,createServerStreamingMethod_1=createServerStreamingMethod$1,createUnaryMethod_1=createUnaryMethod$1;function createClientFactory(){return createClientFactoryWithMiddleware()}ClientFactory.createClientFactory=createClientFactory;function createClient(a,s,u){return createClientFactory().create(a,s,u)}ClientFactory.createClient=createClient;function createClientFactoryWithMiddleware(a){return{use(s){return createClientFactoryWithMiddleware(a==null?s:(0,nice_grpc_common_1.composeClientMiddleware)(a,s))},create(s,u,d={}){const l={},p=Object.entries((0,service_definitions_1.normalizeServiceDefinition)(s));for(const[h,y]of p){const _=pe(pe({},d["*"]),d[h]);y.requestStream?y.responseStream?l[h]=(0,createBidiStreamingMethod_1.createBidiStreamingMethod)(y,u,a,_):l[h]=(0,createClientStreamingMethod_1.createClientStreamingMethod)(y,u,a,_):y.responseStream?l[h]=(0,createServerStreamingMethod_1.createServerStreamingMethod)(y,u,a,_):l[h]=(0,createUnaryMethod_1.createUnaryMethod)(y,u,a,_)}return l}}}var Client={};Object.defineProperty(Client,"__esModule",{value:!0}),function(a){var s=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(l,p,h,y){y===void 0&&(y=h),Object.defineProperty(l,y,{enumerable:!0,get:function(){return p[h]}})}:function(l,p,h,y){y===void 0&&(y=h),l[y]=p[h]}),u=commonjsGlobal&&commonjsGlobal.__exportStar||function(l,p){for(var h in l)h!=="default"&&!Object.prototype.hasOwnProperty.call(p,h)&&s(p,l,h)};Object.defineProperty(a,"__esModule",{value:!0}),a.Status=a.Metadata=a.composeClientMiddleware=a.ClientError=void 0;var d=lib;Object.defineProperty(a,"ClientError",{enumerable:!0,get:function(){return d.ClientError}}),Object.defineProperty(a,"composeClientMiddleware",{enumerable:!0,get:function(){return d.composeClientMiddleware}}),Object.defineProperty(a,"Metadata",{enumerable:!0,get:function(){return d.Metadata}}),Object.defineProperty(a,"Status",{enumerable:!0,get:function(){return d.Status}}),u(serviceDefinitions,a),u(channel,a),u(ClientFactory,a),u(Client,a)}(lib$1);var dist$3={},api$3={},long=Long,wasm=null;try{wasm=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(a){}function Long(a,s,u){this.low=a|0,this.high=s|0,this.unsigned=!!u}Long.prototype.__isLong__,Object.defineProperty(Long.prototype,"__isLong__",{value:!0});function isLong(a){return(a&&a.__isLong__)===!0}Long.isLong=isLong;var INT_CACHE={},UINT_CACHE={};function fromInt(a,s){var u,d,l;return s?(a>>>=0,(l=0<=a&&a<256)&&(d=UINT_CACHE[a],d)?d:(u=fromBits(a,(a|0)<0?-1:0,!0),l&&(UINT_CACHE[a]=u),u)):(a|=0,(l=-128<=a&&a<128)&&(d=INT_CACHE[a],d)?d:(u=fromBits(a,a<0?-1:0,!1),l&&(INT_CACHE[a]=u),u))}Long.fromInt=fromInt;function fromNumber(a,s){if(isNaN(a))return s?UZERO:ZERO;if(s){if(a<0)return UZERO;if(a>=TWO_PWR_64_DBL)return MAX_UNSIGNED_VALUE}else{if(a<=-TWO_PWR_63_DBL)return MIN_VALUE;if(a+1>=TWO_PWR_63_DBL)return MAX_VALUE}return a<0?fromNumber(-a,s).neg():fromBits(a%TWO_PWR_32_DBL|0,a/TWO_PWR_32_DBL|0,s)}Long.fromNumber=fromNumber;function fromBits(a,s,u){return new Long(a,s,u)}Long.fromBits=fromBits;var pow_dbl=Math.pow;function fromString(a,s,u){if(a.length===0)throw Error("empty string");if(a==="NaN"||a==="Infinity"||a==="+Infinity"||a==="-Infinity")return ZERO;if(typeof s=="number"?(u=s,s=!1):s=!!s,u=u||10,u<2||36<u)throw RangeError("radix");var d;if((d=a.indexOf("-"))>0)throw Error("interior hyphen");if(d===0)return fromString(a.substring(1),s,u).neg();for(var l=fromNumber(pow_dbl(u,8)),p=ZERO,h=0;h<a.length;h+=8){var y=Math.min(8,a.length-h),_=parseInt(a.substring(h,h+y),u);if(y<8){var E=fromNumber(pow_dbl(u,y));p=p.mul(E).add(fromNumber(_))}else p=p.mul(l),p=p.add(fromNumber(_))}return p.unsigned=s,p}Long.fromString=fromString;function fromValue(a,s){return typeof a=="number"?fromNumber(a,s):typeof a=="string"?fromString(a,s):fromBits(a.low,a.high,typeof s=="boolean"?s:a.unsigned)}Long.fromValue=fromValue;var TWO_PWR_16_DBL=1<<16,TWO_PWR_24_DBL=1<<24,TWO_PWR_32_DBL=TWO_PWR_16_DBL*TWO_PWR_16_DBL,TWO_PWR_64_DBL=TWO_PWR_32_DBL*TWO_PWR_32_DBL,TWO_PWR_63_DBL=TWO_PWR_64_DBL/2,TWO_PWR_24=fromInt(TWO_PWR_24_DBL),ZERO=fromInt(0);Long.ZERO=ZERO;var UZERO=fromInt(0,!0);Long.UZERO=UZERO;var ONE=fromInt(1);Long.ONE=ONE;var UONE=fromInt(1,!0);Long.UONE=UONE;var NEG_ONE=fromInt(-1);Long.NEG_ONE=NEG_ONE;var MAX_VALUE=fromBits(-1,2147483647,!1);Long.MAX_VALUE=MAX_VALUE;var MAX_UNSIGNED_VALUE=fromBits(-1,-1,!0);Long.MAX_UNSIGNED_VALUE=MAX_UNSIGNED_VALUE;var MIN_VALUE=fromBits(0,-2147483648,!1);Long.MIN_VALUE=MIN_VALUE;var LongPrototype=Long.prototype;LongPrototype.toInt=function(){return this.unsigned?this.low>>>0:this.low},LongPrototype.toNumber=function(){return this.unsigned?(this.high>>>0)*TWO_PWR_32_DBL+(this.low>>>0):this.high*TWO_PWR_32_DBL+(this.low>>>0)},LongPrototype.toString=function(s){if(s=s||10,s<2||36<s)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(MIN_VALUE)){var u=fromNumber(s),d=this.div(u),l=d.mul(u).sub(this);return d.toString(s)+l.toInt().toString(s)}else return"-"+this.neg().toString(s);for(var p=fromNumber(pow_dbl(s,6),this.unsigned),h=this,y="";;){var _=h.div(p),E=h.sub(_.mul(p)).toInt()>>>0,I=E.toString(s);if(h=_,h.isZero())return I+y;for(;I.length<6;)I="0"+I;y=""+I+y}},LongPrototype.getHighBits=function(){return this.high},LongPrototype.getHighBitsUnsigned=function(){return this.high>>>0},LongPrototype.getLowBits=function(){return this.low},LongPrototype.getLowBitsUnsigned=function(){return this.low>>>0},LongPrototype.getNumBitsAbs=function(){if(this.isNegative())return this.eq(MIN_VALUE)?64:this.neg().getNumBitsAbs();for(var s=this.high!=0?this.high:this.low,u=31;u>0&&(s&1<<u)==0;u--);return this.high!=0?u+33:u+1},LongPrototype.isZero=function(){return this.high===0&&this.low===0},LongPrototype.eqz=LongPrototype.isZero,LongPrototype.isNegative=function(){return!this.unsigned&&this.high<0},LongPrototype.isPositive=function(){return this.unsigned||this.high>=0},LongPrototype.isOdd=function(){return(this.low&1)===1},LongPrototype.isEven=function(){return(this.low&1)===0},LongPrototype.equals=function(s){return isLong(s)||(s=fromValue(s)),this.unsigned!==s.unsigned&&this.high>>>31===1&&s.high>>>31===1?!1:this.high===s.high&&this.low===s.low},LongPrototype.eq=LongPrototype.equals,LongPrototype.notEquals=function(s){return!this.eq(s)},LongPrototype.neq=LongPrototype.notEquals,LongPrototype.ne=LongPrototype.notEquals,LongPrototype.lessThan=function(s){return this.comp(s)<0},LongPrototype.lt=LongPrototype.lessThan,LongPrototype.lessThanOrEqual=function(s){return this.comp(s)<=0},LongPrototype.lte=LongPrototype.lessThanOrEqual,LongPrototype.le=LongPrototype.lessThanOrEqual,LongPrototype.greaterThan=function(s){return this.comp(s)>0},LongPrototype.gt=LongPrototype.greaterThan,LongPrototype.greaterThanOrEqual=function(s){return this.comp(s)>=0},LongPrototype.gte=LongPrototype.greaterThanOrEqual,LongPrototype.ge=LongPrototype.greaterThanOrEqual,LongPrototype.compare=function(s){if(isLong(s)||(s=fromValue(s)),this.eq(s))return 0;var u=this.isNegative(),d=s.isNegative();return u&&!d?-1:!u&&d?1:this.unsigned?s.high>>>0>this.high>>>0||s.high===this.high&&s.low>>>0>this.low>>>0?-1:1:this.sub(s).isNegative()?-1:1},LongPrototype.comp=LongPrototype.compare,LongPrototype.negate=function(){return!this.unsigned&&this.eq(MIN_VALUE)?MIN_VALUE:this.not().add(ONE)},LongPrototype.neg=LongPrototype.negate,LongPrototype.add=function(s){isLong(s)||(s=fromValue(s));var u=this.high>>>16,d=this.high&65535,l=this.low>>>16,p=this.low&65535,h=s.high>>>16,y=s.high&65535,_=s.low>>>16,E=s.low&65535,I=0,N=0,w=0,C=0;return C+=p+E,w+=C>>>16,C&=65535,w+=l+_,N+=w>>>16,w&=65535,N+=d+y,I+=N>>>16,N&=65535,I+=u+h,I&=65535,fromBits(w<<16|C,I<<16|N,this.unsigned)},LongPrototype.subtract=function(s){return isLong(s)||(s=fromValue(s)),this.add(s.neg())},LongPrototype.sub=LongPrototype.subtract,LongPrototype.multiply=function(s){if(this.isZero())return ZERO;if(isLong(s)||(s=fromValue(s)),wasm){var u=wasm.mul(this.low,this.high,s.low,s.high);return fromBits(u,wasm.get_high(),this.unsigned)}if(s.isZero())return ZERO;if(this.eq(MIN_VALUE))return s.isOdd()?MIN_VALUE:ZERO;if(s.eq(MIN_VALUE))return this.isOdd()?MIN_VALUE:ZERO;if(this.isNegative())return s.isNegative()?this.neg().mul(s.neg()):this.neg().mul(s).neg();if(s.isNegative())return this.mul(s.neg()).neg();if(this.lt(TWO_PWR_24)&&s.lt(TWO_PWR_24))return fromNumber(this.toNumber()*s.toNumber(),this.unsigned);var d=this.high>>>16,l=this.high&65535,p=this.low>>>16,h=this.low&65535,y=s.high>>>16,_=s.high&65535,E=s.low>>>16,I=s.low&65535,N=0,w=0,C=0,D=0;return D+=h*I,C+=D>>>16,D&=65535,C+=p*I,w+=C>>>16,C&=65535,C+=h*E,w+=C>>>16,C&=65535,w+=l*I,N+=w>>>16,w&=65535,w+=p*E,N+=w>>>16,w&=65535,w+=h*_,N+=w>>>16,w&=65535,N+=d*I+l*E+p*_+h*y,N&=65535,fromBits(C<<16|D,N<<16|w,this.unsigned)},LongPrototype.mul=LongPrototype.multiply,LongPrototype.divide=function(s){if(isLong(s)||(s=fromValue(s)),s.isZero())throw Error("division by zero");if(wasm){if(!this.unsigned&&this.high===-2147483648&&s.low===-1&&s.high===-1)return this;var u=(this.unsigned?wasm.div_u:wasm.div_s)(this.low,this.high,s.low,s.high);return fromBits(u,wasm.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?UZERO:ZERO;var d,l,p;if(this.unsigned){if(s.unsigned||(s=s.toUnsigned()),s.gt(this))return UZERO;if(s.gt(this.shru(1)))return UONE;p=UZERO}else{if(this.eq(MIN_VALUE)){if(s.eq(ONE)||s.eq(NEG_ONE))return MIN_VALUE;if(s.eq(MIN_VALUE))return ONE;var h=this.shr(1);return d=h.div(s).shl(1),d.eq(ZERO)?s.isNegative()?ONE:NEG_ONE:(l=this.sub(s.mul(d)),p=d.add(l.div(s)),p)}else if(s.eq(MIN_VALUE))return this.unsigned?UZERO:ZERO;if(this.isNegative())return s.isNegative()?this.neg().div(s.neg()):this.neg().div(s).neg();if(s.isNegative())return this.div(s.neg()).neg();p=ZERO}for(l=this;l.gte(s);){d=Math.max(1,Math.floor(l.toNumber()/s.toNumber()));for(var y=Math.ceil(Math.log(d)/Math.LN2),_=y<=48?1:pow_dbl(2,y-48),E=fromNumber(d),I=E.mul(s);I.isNegative()||I.gt(l);)d-=_,E=fromNumber(d,this.unsigned),I=E.mul(s);E.isZero()&&(E=ONE),p=p.add(E),l=l.sub(I)}return p},LongPrototype.div=LongPrototype.divide,LongPrototype.modulo=function(s){if(isLong(s)||(s=fromValue(s)),wasm){var u=(this.unsigned?wasm.rem_u:wasm.rem_s)(this.low,this.high,s.low,s.high);return fromBits(u,wasm.get_high(),this.unsigned)}return this.sub(this.div(s).mul(s))},LongPrototype.mod=LongPrototype.modulo,LongPrototype.rem=LongPrototype.modulo,LongPrototype.not=function(){return fromBits(~this.low,~this.high,this.unsigned)},LongPrototype.and=function(s){return isLong(s)||(s=fromValue(s)),fromBits(this.low&s.low,this.high&s.high,this.unsigned)},LongPrototype.or=function(s){return isLong(s)||(s=fromValue(s)),fromBits(this.low|s.low,this.high|s.high,this.unsigned)},LongPrototype.xor=function(s){return isLong(s)||(s=fromValue(s)),fromBits(this.low^s.low,this.high^s.high,this.unsigned)},LongPrototype.shiftLeft=function(s){return isLong(s)&&(s=s.toInt()),(s&=63)===0?this:s<32?fromBits(this.low<<s,this.high<<s|this.low>>>32-s,this.unsigned):fromBits(0,this.low<<s-32,this.unsigned)},LongPrototype.shl=LongPrototype.shiftLeft,LongPrototype.shiftRight=function(s){return isLong(s)&&(s=s.toInt()),(s&=63)===0?this:s<32?fromBits(this.low>>>s|this.high<<32-s,this.high>>s,this.unsigned):fromBits(this.high>>s-32,this.high>=0?0:-1,this.unsigned)},LongPrototype.shr=LongPrototype.shiftRight,LongPrototype.shiftRightUnsigned=function(s){if(isLong(s)&&(s=s.toInt()),s&=63,s===0)return this;var u=this.high;if(s<32){var d=this.low;return fromBits(d>>>s|u<<32-s,u>>>s,this.unsigned)}else return s===32?fromBits(u,0,this.unsigned):fromBits(u>>>s-32,0,this.unsigned)},LongPrototype.shru=LongPrototype.shiftRightUnsigned,LongPrototype.shr_u=LongPrototype.shiftRightUnsigned,LongPrototype.toSigned=function(){return this.unsigned?fromBits(this.low,this.high,!1):this},LongPrototype.toUnsigned=function(){return this.unsigned?this:fromBits(this.low,this.high,!0)},LongPrototype.toBytes=function(s){return s?this.toBytesLE():this.toBytesBE()},LongPrototype.toBytesLE=function(){var s=this.high,u=this.low;return[u&255,u>>>8&255,u>>>16&255,u>>>24,s&255,s>>>8&255,s>>>16&255,s>>>24]},LongPrototype.toBytesBE=function(){var s=this.high,u=this.low;return[s>>>24,s>>>16&255,s>>>8&255,s&255,u>>>24,u>>>16&255,u>>>8&255,u&255]},Long.fromBytes=function(s,u,d){return d?Long.fromBytesLE(s,u):Long.fromBytesBE(s,u)},Long.fromBytesLE=function(s,u){return new Long(s[0]|s[1]<<8|s[2]<<16|s[3]<<24,s[4]|s[5]<<8|s[6]<<16|s[7]<<24,u)},Long.fromBytesBE=function(s,u){return new Long(s[4]<<24|s[5]<<16|s[6]<<8|s[7],s[0]<<24|s[1]<<16|s[2]<<8|s[3],u)};var indexMinimal$1={},minimal$3={},aspromise$1=asPromise$1;function asPromise$1(a,s){for(var u=new Array(arguments.length-1),d=0,l=2,p=!0;l<arguments.length;)u[d++]=arguments[l++];return new Promise(function(y,_){u[d]=function(I){if(p)if(p=!1,I)_(I);else{for(var N=new Array(arguments.length-1),w=0;w<N.length;)N[w++]=arguments[w];y.apply(null,N)}};try{a.apply(s||null,u)}catch(E){p&&(p=!1,_(E))}})}var base64$3={};(function(a){var s=a;s.length=function(y){var _=y.length;if(!_)return 0;for(var E=0;--_%4>1&&y.charAt(_)==="=";)++E;return Math.ceil(y.length*3)/4-E};for(var u=new Array(64),d=new Array(123),l=0;l<64;)d[u[l]=l<26?l+65:l<52?l+71:l<62?l-4:l-59|43]=l++;s.encode=function(y,_,E){for(var I=null,N=[],w=0,C=0,D;_<E;){var V=y[_++];switch(C){case 0:N[w++]=u[V>>2],D=(V&3)<<4,C=1;break;case 1:N[w++]=u[D|V>>4],D=(V&15)<<2,C=2;break;case 2:N[w++]=u[D|V>>6],N[w++]=u[V&63],C=0;break}w>8191&&((I||(I=[])).push(String.fromCharCode.apply(String,N)),w=0)}return C&&(N[w++]=u[D],N[w++]=61,C===1&&(N[w++]=61)),I?(w&&I.push(String.fromCharCode.apply(String,N.slice(0,w))),I.join("")):String.fromCharCode.apply(String,N.slice(0,w))};var p="invalid encoding";s.decode=function(y,_,E){for(var I=E,N=0,w,C=0;C<y.length;){var D=y.charCodeAt(C++);if(D===61&&N>1)break;if((D=d[D])===void 0)throw Error(p);switch(N){case 0:w=D,N=1;break;case 1:_[E++]=w<<2|(D&48)>>4,w=D,N=2;break;case 2:_[E++]=(w&15)<<4|(D&60)>>2,w=D,N=3;break;case 3:_[E++]=(w&3)<<6|D,N=0;break}}if(N===1)throw Error(p);return E-I},s.test=function(y){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(y)}})(base64$3);var eventemitter$1=EventEmitter$2;function EventEmitter$2(){this._listeners={}}EventEmitter$2.prototype.on=function(s,u,d){return(this._listeners[s]||(this._listeners[s]=[])).push({fn:u,ctx:d||this}),this},EventEmitter$2.prototype.off=function(s,u){if(s===void 0)this._listeners={};else if(u===void 0)this._listeners[s]=[];else for(var d=this._listeners[s],l=0;l<d.length;)d[l].fn===u?d.splice(l,1):++l;return this},EventEmitter$2.prototype.emit=function(s){var u=this._listeners[s];if(u){for(var d=[],l=1;l<arguments.length;)d.push(arguments[l++]);for(l=0;l<u.length;)u[l].fn.apply(u[l++].ctx,d)}return this};var float$1=factory$1(factory$1);function factory$1(a){return typeof Float32Array!="undefined"?function(){var s=new Float32Array([-0]),u=new Uint8Array(s.buffer),d=u[3]===128;function l(_,E,I){s[0]=_,E[I]=u[0],E[I+1]=u[1],E[I+2]=u[2],E[I+3]=u[3]}function p(_,E,I){s[0]=_,E[I]=u[3],E[I+1]=u[2],E[I+2]=u[1],E[I+3]=u[0]}a.writeFloatLE=d?l:p,a.writeFloatBE=d?p:l;function h(_,E){return u[0]=_[E],u[1]=_[E+1],u[2]=_[E+2],u[3]=_[E+3],s[0]}function y(_,E){return u[3]=_[E],u[2]=_[E+1],u[1]=_[E+2],u[0]=_[E+3],s[0]}a.readFloatLE=d?h:y,a.readFloatBE=d?y:h}():function(){function s(d,l,p,h){var y=l<0?1:0;if(y&&(l=-l),l===0)d(1/l>0?0:2147483648,p,h);else if(isNaN(l))d(2143289344,p,h);else if(l>34028234663852886e22)d((y<<31|2139095040)>>>0,p,h);else if(l<11754943508222875e-54)d((y<<31|Math.round(l/1401298464324817e-60))>>>0,p,h);else{var _=Math.floor(Math.log(l)/Math.LN2),E=Math.round(l*Math.pow(2,-_)*8388608)&8388607;d((y<<31|_+127<<23|E)>>>0,p,h)}}a.writeFloatLE=s.bind(null,writeUintLE$1),a.writeFloatBE=s.bind(null,writeUintBE$1);function u(d,l,p){var h=d(l,p),y=(h>>31)*2+1,_=h>>>23&255,E=h&8388607;return _===255?E?NaN:y*(1/0):_===0?y*1401298464324817e-60*E:y*Math.pow(2,_-150)*(E+8388608)}a.readFloatLE=u.bind(null,readUintLE$1),a.readFloatBE=u.bind(null,readUintBE$1)}(),typeof Float64Array!="undefined"?function(){var s=new Float64Array([-0]),u=new Uint8Array(s.buffer),d=u[7]===128;function l(_,E,I){s[0]=_,E[I]=u[0],E[I+1]=u[1],E[I+2]=u[2],E[I+3]=u[3],E[I+4]=u[4],E[I+5]=u[5],E[I+6]=u[6],E[I+7]=u[7]}function p(_,E,I){s[0]=_,E[I]=u[7],E[I+1]=u[6],E[I+2]=u[5],E[I+3]=u[4],E[I+4]=u[3],E[I+5]=u[2],E[I+6]=u[1],E[I+7]=u[0]}a.writeDoubleLE=d?l:p,a.writeDoubleBE=d?p:l;function h(_,E){return u[0]=_[E],u[1]=_[E+1],u[2]=_[E+2],u[3]=_[E+3],u[4]=_[E+4],u[5]=_[E+5],u[6]=_[E+6],u[7]=_[E+7],s[0]}function y(_,E){return u[7]=_[E],u[6]=_[E+1],u[5]=_[E+2],u[4]=_[E+3],u[3]=_[E+4],u[2]=_[E+5],u[1]=_[E+6],u[0]=_[E+7],s[0]}a.readDoubleLE=d?h:y,a.readDoubleBE=d?y:h}():function(){function s(d,l,p,h,y,_){var E=h<0?1:0;if(E&&(h=-h),h===0)d(0,y,_+l),d(1/h>0?0:2147483648,y,_+p);else if(isNaN(h))d(0,y,_+l),d(2146959360,y,_+p);else if(h>17976931348623157e292)d(0,y,_+l),d((E<<31|2146435072)>>>0,y,_+p);else{var I;if(h<22250738585072014e-324)I=h/5e-324,d(I>>>0,y,_+l),d((E<<31|I/4294967296)>>>0,y,_+p);else{var N=Math.floor(Math.log(h)/Math.LN2);N===1024&&(N=1023),I=h*Math.pow(2,-N),d(I*4503599627370496>>>0,y,_+l),d((E<<31|N+1023<<20|I*1048576&1048575)>>>0,y,_+p)}}}a.writeDoubleLE=s.bind(null,writeUintLE$1,0,4),a.writeDoubleBE=s.bind(null,writeUintBE$1,4,0);function u(d,l,p,h,y){var _=d(h,y+l),E=d(h,y+p),I=(E>>31)*2+1,N=E>>>20&2047,w=4294967296*(E&1048575)+_;return N===2047?w?NaN:I*(1/0):N===0?I*5e-324*w:I*Math.pow(2,N-1075)*(w+4503599627370496)}a.readDoubleLE=u.bind(null,readUintLE$1,0,4),a.readDoubleBE=u.bind(null,readUintBE$1,4,0)}(),a}function writeUintLE$1(a,s,u){s[u]=a&255,s[u+1]=a>>>8&255,s[u+2]=a>>>16&255,s[u+3]=a>>>24}function writeUintBE$1(a,s,u){s[u]=a>>>24,s[u+1]=a>>>16&255,s[u+2]=a>>>8&255,s[u+3]=a&255}function readUintLE$1(a,s){return(a[s]|a[s+1]<<8|a[s+2]<<16|a[s+3]<<24)>>>0}function readUintBE$1(a,s){return(a[s]<<24|a[s+1]<<16|a[s+2]<<8|a[s+3])>>>0}var inquire_1$1=inquire$1;function inquire$1(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(a){}return null}var utf8$5={};(function(a){var s=a;s.length=function(d){for(var l=0,p=0,h=0;h<d.length;++h)p=d.charCodeAt(h),p<128?l+=1:p<2048?l+=2:(p&64512)===55296&&(d.charCodeAt(h+1)&64512)===56320?(++h,l+=4):l+=3;return l},s.read=function(d,l,p){var h=p-l;if(h<1)return"";for(var y=null,_=[],E=0,I;l<p;)I=d[l++],I<128?_[E++]=I:I>191&&I<224?_[E++]=(I&31)<<6|d[l++]&63:I>239&&I<365?(I=((I&7)<<18|(d[l++]&63)<<12|(d[l++]&63)<<6|d[l++]&63)-65536,_[E++]=55296+(I>>10),_[E++]=56320+(I&1023)):_[E++]=(I&15)<<12|(d[l++]&63)<<6|d[l++]&63,E>8191&&((y||(y=[])).push(String.fromCharCode.apply(String,_)),E=0);return y?(E&&y.push(String.fromCharCode.apply(String,_.slice(0,E))),y.join("")):String.fromCharCode.apply(String,_.slice(0,E))},s.write=function(d,l,p){for(var h=p,y,_,E=0;E<d.length;++E)y=d.charCodeAt(E),y<128?l[p++]=y:y<2048?(l[p++]=y>>6|192,l[p++]=y&63|128):(y&64512)===55296&&((_=d.charCodeAt(E+1))&64512)===56320?(y=65536+((y&1023)<<10)+(_&1023),++E,l[p++]=y>>18|240,l[p++]=y>>12&63|128,l[p++]=y>>6&63|128,l[p++]=y&63|128):(l[p++]=y>>12|224,l[p++]=y>>6&63|128,l[p++]=y&63|128);return p-h}})(utf8$5);var pool_1$1=pool$1;function pool$1(a,s,u){var d=u||8192,l=d>>>1,p=null,h=d;return function(_){if(_<1||_>l)return a(_);h+_>d&&(p=a(d),h=0);var E=s.call(p,h,h+=_);return h&7&&(h=(h|7)+1),E}}var longbits$1=LongBits$5,util$b=minimal$3;function LongBits$5(a,s){this.lo=a>>>0,this.hi=s>>>0}var zero$1=LongBits$5.zero=new LongBits$5(0,0);zero$1.toNumber=function(){return 0},zero$1.zzEncode=zero$1.zzDecode=function(){return this},zero$1.length=function(){return 1};var zeroHash$1=LongBits$5.zeroHash="\0\0\0\0\0\0\0\0";LongBits$5.fromNumber=function a(s){if(s===0)return zero$1;var u=s<0;u&&(s=-s);var d=s>>>0,l=(s-d)/4294967296>>>0;return u&&(l=~l>>>0,d=~d>>>0,++d>4294967295&&(d=0,++l>4294967295&&(l=0))),new LongBits$5(d,l)},LongBits$5.from=function a(s){if(typeof s=="number")return LongBits$5.fromNumber(s);if(util$b.isString(s))if(util$b.Long)s=util$b.Long.fromString(s);else return LongBits$5.fromNumber(parseInt(s,10));return s.low||s.high?new LongBits$5(s.low>>>0,s.high>>>0):zero$1},LongBits$5.prototype.toNumber=function a(s){if(!s&&this.hi>>>31){var u=~this.lo+1>>>0,d=~this.hi>>>0;return u||(d=d+1>>>0),-(u+d*4294967296)}return this.lo+this.hi*4294967296},LongBits$5.prototype.toLong=function a(s){return util$b.Long?new util$b.Long(this.lo|0,this.hi|0,Boolean(s)):{low:this.lo|0,high:this.hi|0,unsigned:Boolean(s)}};var charCodeAt$1=String.prototype.charCodeAt;LongBits$5.fromHash=function a(s){return s===zeroHash$1?zero$1:new LongBits$5((charCodeAt$1.call(s,0)|charCodeAt$1.call(s,1)<<8|charCodeAt$1.call(s,2)<<16|charCodeAt$1.call(s,3)<<24)>>>0,(charCodeAt$1.call(s,4)|charCodeAt$1.call(s,5)<<8|charCodeAt$1.call(s,6)<<16|charCodeAt$1.call(s,7)<<24)>>>0)},LongBits$5.prototype.toHash=function a(){return String.fromCharCode(this.lo&255,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,this.hi&255,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},LongBits$5.prototype.zzEncode=function a(){var s=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^s)>>>0,this.lo=(this.lo<<1^s)>>>0,this},LongBits$5.prototype.zzDecode=function a(){var s=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^s)>>>0,this.hi=(this.hi>>>1^s)>>>0,this},LongBits$5.prototype.length=function a(){var s=this.lo,u=(this.lo>>>28|this.hi<<4)>>>0,d=this.hi>>>24;return d===0?u===0?s<16384?s<128?1:2:s<2097152?3:4:u<16384?u<128?5:6:u<2097152?7:8:d<128?9:10},function(a){var s=a;s.asPromise=aspromise$1,s.base64=base64$3,s.EventEmitter=eventemitter$1,s.float=float$1,s.inquire=inquire_1$1,s.utf8=utf8$5,s.pool=pool_1$1,s.LongBits=longbits$1,s.isNode=Boolean(typeof commonjsGlobal!="undefined"&&commonjsGlobal&&commonjsGlobal.process&&commonjsGlobal.process.versions&&commonjsGlobal.process.versions.node),s.global=s.isNode&&commonjsGlobal||typeof window!="undefined"&&window||typeof self!="undefined"&&self||commonjsGlobal,s.emptyArray=Object.freeze?Object.freeze([]):[],s.emptyObject=Object.freeze?Object.freeze({}):{},s.isInteger=Number.isInteger||function(p){return typeof p=="number"&&isFinite(p)&&Math.floor(p)===p},s.isString=function(p){return typeof p=="string"||p instanceof String},s.isObject=function(p){return p&&typeof p=="object"},s.isset=s.isSet=function(p,h){var y=p[h];return y!=null&&p.hasOwnProperty(h)?typeof y!="object"||(Array.isArray(y)?y.length:Object.keys(y).length)>0:!1},s.Buffer=function(){try{var l=s.inquire("buffer").Buffer;return l.prototype.utf8Write?l:null}catch{return null}}(),s._Buffer_from=null,s._Buffer_allocUnsafe=null,s.newBuffer=function(p){return typeof p=="number"?s.Buffer?s._Buffer_allocUnsafe(p):new s.Array(p):s.Buffer?s._Buffer_from(p):typeof Uint8Array=="undefined"?p:new Uint8Array(p)},s.Array=typeof Uint8Array!="undefined"?Uint8Array:Array,s.Long=s.global.dcodeIO&&s.global.dcodeIO.Long||s.global.Long||s.inquire("long"),s.key2Re=/^true|false|0|1$/,s.key32Re=/^-?(?:0|[1-9][0-9]*)$/,s.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,s.longToHash=function(p){return p?s.LongBits.from(p).toHash():s.LongBits.zeroHash},s.longFromHash=function(p,h){var y=s.LongBits.fromHash(p);return s.Long?s.Long.fromBits(y.lo,y.hi,h):y.toNumber(Boolean(h))};function u(l,p,h){for(var y=Object.keys(p),_=0;_<y.length;++_)(l[y[_]]===void 0||!h)&&(l[y[_]]=p[y[_]]);return l}s.merge=u,s.lcFirst=function(p){return p.charAt(0).toLowerCase()+p.substring(1)};function d(l){function p(h,y){if(!(this instanceof p))return new p(h,y);Object.defineProperty(this,"message",{get:function(){return h}}),Error.captureStackTrace?Error.captureStackTrace(this,p):Object.defineProperty(this,"stack",{value:new Error().stack||""}),y&&u(this,y)}return(p.prototype=Object.create(Error.prototype)).constructor=p,Object.defineProperty(p.prototype,"name",{get:function(){return l}}),p.prototype.toString=function(){return this.name+": "+this.message},p}s.newError=d,s.ProtocolError=d("ProtocolError"),s.oneOfGetter=function(p){for(var h={},y=0;y<p.length;++y)h[p[y]]=1;return function(){for(var _=Object.keys(this),E=_.length-1;E>-1;--E)if(h[_[E]]===1&&this[_[E]]!==void 0&&this[_[E]]!==null)return _[E]}},s.oneOfSetter=function(p){return function(h){for(var y=0;y<p.length;++y)p[y]!==h&&delete this[p[y]]}},s.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},s._configure=function(){var l=s.Buffer;if(!l){s._Buffer_from=s._Buffer_allocUnsafe=null;return}s._Buffer_from=l.from!==Uint8Array.from&&l.from||function(h,y){return new l(h,y)},s._Buffer_allocUnsafe=l.allocUnsafe||function(h){return new l(h)}}}(minimal$3);var writer$1=Writer$3,util$a=minimal$3,BufferWriter$3,LongBits$4=util$a.LongBits,base64$2=util$a.base64,utf8$4=util$a.utf8;function Op$1(a,s,u){this.fn=a,this.len=s,this.next=void 0,this.val=u}function noop$3(){}function State$1(a){this.head=a.head,this.tail=a.tail,this.len=a.len,this.next=a.states}function Writer$3(){this.len=0,this.head=new Op$1(noop$3,0,0),this.tail=this.head,this.states=null}var create$6=function a(){return util$a.Buffer?function(){return(Writer$3.create=function(){return new BufferWriter$3})()}:function(){return new Writer$3}};Writer$3.create=create$6(),Writer$3.alloc=function a(s){return new util$a.Array(s)},util$a.Array!==Array&&(Writer$3.alloc=util$a.pool(Writer$3.alloc,util$a.Array.prototype.subarray)),Writer$3.prototype._push=function a(s,u,d){return this.tail=this.tail.next=new Op$1(s,u,d),this.len+=u,this};function writeByte$1(a,s,u){s[u]=a&255}function writeVarint32$1(a,s,u){for(;a>127;)s[u++]=a&127|128,a>>>=7;s[u]=a}function VarintOp$1(a,s){this.len=a,this.next=void 0,this.val=s}VarintOp$1.prototype=Object.create(Op$1.prototype),VarintOp$1.prototype.fn=writeVarint32$1,Writer$3.prototype.uint32=function a(s){return this.len+=(this.tail=this.tail.next=new VarintOp$1((s=s>>>0)<128?1:s<16384?2:s<2097152?3:s<268435456?4:5,s)).len,this},Writer$3.prototype.int32=function a(s){return s<0?this._push(writeVarint64$1,10,LongBits$4.fromNumber(s)):this.uint32(s)},Writer$3.prototype.sint32=function a(s){return this.uint32((s<<1^s>>31)>>>0)};function writeVarint64$1(a,s,u){for(;a.hi;)s[u++]=a.lo&127|128,a.lo=(a.lo>>>7|a.hi<<25)>>>0,a.hi>>>=7;for(;a.lo>127;)s[u++]=a.lo&127|128,a.lo=a.lo>>>7;s[u++]=a.lo}Writer$3.prototype.uint64=function a(s){var u=LongBits$4.from(s);return this._push(writeVarint64$1,u.length(),u)},Writer$3.prototype.int64=Writer$3.prototype.uint64,Writer$3.prototype.sint64=function a(s){var u=LongBits$4.from(s).zzEncode();return this._push(writeVarint64$1,u.length(),u)},Writer$3.prototype.bool=function a(s){return this._push(writeByte$1,1,s?1:0)};function writeFixed32$1(a,s,u){s[u]=a&255,s[u+1]=a>>>8&255,s[u+2]=a>>>16&255,s[u+3]=a>>>24}Writer$3.prototype.fixed32=function a(s){return this._push(writeFixed32$1,4,s>>>0)},Writer$3.prototype.sfixed32=Writer$3.prototype.fixed32,Writer$3.prototype.fixed64=function a(s){var u=LongBits$4.from(s);return this._push(writeFixed32$1,4,u.lo)._push(writeFixed32$1,4,u.hi)},Writer$3.prototype.sfixed64=Writer$3.prototype.fixed64,Writer$3.prototype.float=function a(s){return this._push(util$a.float.writeFloatLE,4,s)},Writer$3.prototype.double=function a(s){return this._push(util$a.float.writeDoubleLE,8,s)};var writeBytes$1=util$a.Array.prototype.set?function a(s,u,d){u.set(s,d)}:function a(s,u,d){for(var l=0;l<s.length;++l)u[d+l]=s[l]};Writer$3.prototype.bytes=function a(s){var u=s.length>>>0;if(!u)return this._push(writeByte$1,1,0);if(util$a.isString(s)){var d=Writer$3.alloc(u=base64$2.length(s));base64$2.decode(s,d,0),s=d}return this.uint32(u)._push(writeBytes$1,u,s)},Writer$3.prototype.string=function a(s){var u=utf8$4.length(s);return u?this.uint32(u)._push(utf8$4.write,u,s):this._push(writeByte$1,1,0)},Writer$3.prototype.fork=function a(){return this.states=new State$1(this),this.head=this.tail=new Op$1(noop$3,0,0),this.len=0,this},Writer$3.prototype.reset=function a(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new Op$1(noop$3,0,0),this.len=0),this},Writer$3.prototype.ldelim=function a(){var s=this.head,u=this.tail,d=this.len;return this.reset().uint32(d),d&&(this.tail.next=s.next,this.tail=u,this.len+=d),this},Writer$3.prototype.finish=function a(){for(var s=this.head.next,u=this.constructor.alloc(this.len),d=0;s;)s.fn(s.val,u,d),d+=s.len,s=s.next;return u},Writer$3._configure=function(a){BufferWriter$3=a,Writer$3.create=create$6(),BufferWriter$3._configure()};var writer_buffer$1=BufferWriter$2,Writer$2=writer$1;(BufferWriter$2.prototype=Object.create(Writer$2.prototype)).constructor=BufferWriter$2;var util$9=minimal$3;function BufferWriter$2(){Writer$2.call(this)}BufferWriter$2._configure=function(){BufferWriter$2.alloc=util$9._Buffer_allocUnsafe,BufferWriter$2.writeBytesBuffer=util$9.Buffer&&util$9.Buffer.prototype instanceof Uint8Array&&util$9.Buffer.prototype.set.name==="set"?function(s,u,d){u.set(s,d)}:function(s,u,d){if(s.copy)s.copy(u,d,0,s.length);else for(var l=0;l<s.length;)u[d++]=s[l++]}},BufferWriter$2.prototype.bytes=function a(s){util$9.isString(s)&&(s=util$9._Buffer_from(s,"base64"));var u=s.length>>>0;return this.uint32(u),u&&this._push(BufferWriter$2.writeBytesBuffer,u,s),this};function writeStringBuffer$1(a,s,u){a.length<40?util$9.utf8.write(a,s,u):s.utf8Write?s.utf8Write(a,u):s.write(a,u)}BufferWriter$2.prototype.string=function a(s){var u=util$9.Buffer.byteLength(s);return this.uint32(u),u&&this._push(writeStringBuffer$1,u,s),this},BufferWriter$2._configure();var reader$1=Reader$3,util$8=minimal$3,BufferReader$3,LongBits$3=util$8.LongBits,utf8$3=util$8.utf8;function indexOutOfRange$1(a,s){return RangeError("index out of range: "+a.pos+" + "+(s||1)+" > "+a.len)}function Reader$3(a){this.buf=a,this.pos=0,this.len=a.length}var create_array$1=typeof Uint8Array!="undefined"?function a(s){if(s instanceof Uint8Array||Array.isArray(s))return new Reader$3(s);throw Error("illegal buffer")}:function a(s){if(Array.isArray(s))return new Reader$3(s);throw Error("illegal buffer")},create$5=function a(){return util$8.Buffer?function(u){return(Reader$3.create=function(l){return util$8.Buffer.isBuffer(l)?new BufferReader$3(l):create_array$1(l)})(u)}:create_array$1};Reader$3.create=create$5(),Reader$3.prototype._slice=util$8.Array.prototype.subarray||util$8.Array.prototype.slice,Reader$3.prototype.uint32=function a(){var s=4294967295;return function(){if(s=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(s=(s|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(s=(s|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(s=(s|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(s=(s|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return s;if((this.pos+=5)>this.len)throw this.pos=this.len,indexOutOfRange$1(this,10);return s}}(),Reader$3.prototype.int32=function a(){return this.uint32()|0},Reader$3.prototype.sint32=function a(){var s=this.uint32();return s>>>1^-(s&1)|0};function readLongVarint$1(){var a=new LongBits$3(0,0),s=0;if(this.len-this.pos>4){for(;s<4;++s)if(a.lo=(a.lo|(this.buf[this.pos]&127)<<s*7)>>>0,this.buf[this.pos++]<128)return a;if(a.lo=(a.lo|(this.buf[this.pos]&127)<<28)>>>0,a.hi=(a.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return a;s=0}else{for(;s<3;++s){if(this.pos>=this.len)throw indexOutOfRange$1(this);if(a.lo=(a.lo|(this.buf[this.pos]&127)<<s*7)>>>0,this.buf[this.pos++]<128)return a}return a.lo=(a.lo|(this.buf[this.pos++]&127)<<s*7)>>>0,a}if(this.len-this.pos>4){for(;s<5;++s)if(a.hi=(a.hi|(this.buf[this.pos]&127)<<s*7+3)>>>0,this.buf[this.pos++]<128)return a}else for(;s<5;++s){if(this.pos>=this.len)throw indexOutOfRange$1(this);if(a.hi=(a.hi|(this.buf[this.pos]&127)<<s*7+3)>>>0,this.buf[this.pos++]<128)return a}throw Error("invalid varint encoding")}Reader$3.prototype.bool=function a(){return this.uint32()!==0};function readFixed32_end$1(a,s){return(a[s-4]|a[s-3]<<8|a[s-2]<<16|a[s-1]<<24)>>>0}Reader$3.prototype.fixed32=function a(){if(this.pos+4>this.len)throw indexOutOfRange$1(this,4);return readFixed32_end$1(this.buf,this.pos+=4)},Reader$3.prototype.sfixed32=function a(){if(this.pos+4>this.len)throw indexOutOfRange$1(this,4);return readFixed32_end$1(this.buf,this.pos+=4)|0};function readFixed64$1(){if(this.pos+8>this.len)throw indexOutOfRange$1(this,8);return new LongBits$3(readFixed32_end$1(this.buf,this.pos+=4),readFixed32_end$1(this.buf,this.pos+=4))}Reader$3.prototype.float=function a(){if(this.pos+4>this.len)throw indexOutOfRange$1(this,4);var s=util$8.float.readFloatLE(this.buf,this.pos);return this.pos+=4,s},Reader$3.prototype.double=function a(){if(this.pos+8>this.len)throw indexOutOfRange$1(this,4);var s=util$8.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,s},Reader$3.prototype.bytes=function a(){var s=this.uint32(),u=this.pos,d=this.pos+s;if(d>this.len)throw indexOutOfRange$1(this,s);return this.pos+=s,Array.isArray(this.buf)?this.buf.slice(u,d):u===d?new this.buf.constructor(0):this._slice.call(this.buf,u,d)},Reader$3.prototype.string=function a(){var s=this.bytes();return utf8$3.read(s,0,s.length)},Reader$3.prototype.skip=function a(s){if(typeof s=="number"){if(this.pos+s>this.len)throw indexOutOfRange$1(this,s);this.pos+=s}else do if(this.pos>=this.len)throw indexOutOfRange$1(this);while(this.buf[this.pos++]&128);return this},Reader$3.prototype.skipType=function(a){switch(a){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(a=this.uint32()&7)!==4;)this.skipType(a);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+a+" at offset "+this.pos)}return this},Reader$3._configure=function(a){BufferReader$3=a,Reader$3.create=create$5(),BufferReader$3._configure();var s=util$8.Long?"toLong":"toNumber";util$8.merge(Reader$3.prototype,{int64:function(){return readLongVarint$1.call(this)[s](!1)},uint64:function(){return readLongVarint$1.call(this)[s](!0)},sint64:function(){return readLongVarint$1.call(this).zzDecode()[s](!1)},fixed64:function(){return readFixed64$1.call(this)[s](!0)},sfixed64:function(){return readFixed64$1.call(this)[s](!1)}})};var reader_buffer$1=BufferReader$2,Reader$2=reader$1;(BufferReader$2.prototype=Object.create(Reader$2.prototype)).constructor=BufferReader$2;var util$7=minimal$3;function BufferReader$2(a){Reader$2.call(this,a)}BufferReader$2._configure=function(){util$7.Buffer&&(BufferReader$2.prototype._slice=util$7.Buffer.prototype.slice)},BufferReader$2.prototype.string=function a(){var s=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+s,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+s,this.len))},BufferReader$2._configure();var rpc$1={},service$1=Service$1,util$6=minimal$3;(Service$1.prototype=Object.create(util$6.EventEmitter.prototype)).constructor=Service$1;function Service$1(a,s,u){if(typeof a!="function")throw TypeError("rpcImpl must be a function");util$6.EventEmitter.call(this),this.rpcImpl=a,this.requestDelimited=Boolean(s),this.responseDelimited=Boolean(u)}Service$1.prototype.rpcCall=function a(s,u,d,l,p){if(!l)throw TypeError("request must be specified");var h=this;if(!p)return util$6.asPromise(a,h,s,u,d,l);if(!h.rpcImpl){setTimeout(function(){p(Error("already ended"))},0);return}try{return h.rpcImpl(s,u[h.requestDelimited?"encodeDelimited":"encode"](l).finish(),function(_,E){if(_)return h.emit("error",_,s),p(_);if(E===null){h.end(!0);return}if(!(E instanceof d))try{E=d[h.responseDelimited?"decodeDelimited":"decode"](E)}catch(I){return h.emit("error",I,s),p(I)}return h.emit("data",E,s),p(null,E)})}catch(y){h.emit("error",y,s),setTimeout(function(){p(y)},0);return}},Service$1.prototype.end=function a(s){return this.rpcImpl&&(s||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this},function(a){var s=a;s.Service=service$1}(rpc$1);var roots$1={};(function(a){var s=a;s.build="minimal",s.Writer=writer$1,s.BufferWriter=writer_buffer$1,s.Reader=reader$1,s.BufferReader=reader_buffer$1,s.util=minimal$3,s.rpc=rpc$1,s.roots=roots$1,s.configure=u;function u(){s.util._configure(),s.Writer._configure(s.BufferWriter),s.Reader._configure(s.BufferReader)}u()})(indexMinimal$1);var minimal$2=indexMinimal$1;function isFunction$2(a){return typeof a=="function"}function hasLift(a){return isFunction$2(a==null?void 0:a.lift)}function operate(a){return function(s){if(hasLift(s))return s.lift(function(u){try{return a(u,this)}catch(d){this.error(d)}});throw new TypeError("Unable to lift unknown Observable type")}}/*! *****************************************************************************
  Copyright (c) Microsoft Corporation.

  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.

  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ***************************************************************************** */var extendStatics$1=function(a,s){return extendStatics$1=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,d){u.__proto__=d}||function(u,d){for(var l in d)Object.prototype.hasOwnProperty.call(d,l)&&(u[l]=d[l])},extendStatics$1(a,s)};function __extends$1(a,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");extendStatics$1(a,s);function u(){this.constructor=a}a.prototype=s===null?Object.create(s):(u.prototype=s.prototype,new u)}function __awaiter$d(a,s,u,d){function l(p){return p instanceof u?p:new u(function(h){h(p)})}return new(u||(u=Promise))(function(p,h){function y(I){try{E(d.next(I))}catch(N){h(N)}}function _(I){try{E(d.throw(I))}catch(N){h(N)}}function E(I){I.done?p(I.value):l(I.value).then(y,_)}E((d=d.apply(a,s||[])).next())})}function __generator(a,s){var u={label:0,sent:function(){if(p[0]&1)throw p[1];return p[1]},trys:[],ops:[]},d,l,p,h;return h={next:y(0),throw:y(1),return:y(2)},typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function y(E){return function(I){return _([E,I])}}function _(E){if(d)throw new TypeError("Generator is already executing.");for(;u;)try{if(d=1,l&&(p=E[0]&2?l.return:E[0]?l.throw||((p=l.return)&&p.call(l),0):l.next)&&!(p=p.call(l,E[1])).done)return p;switch(l=0,p&&(E=[E[0]&2,p.value]),E[0]){case 0:case 1:p=E;break;case 4:return u.label++,{value:E[1],done:!1};case 5:u.label++,l=E[1],E=[0];continue;case 7:E=u.ops.pop(),u.trys.pop();continue;default:if(p=u.trys,!(p=p.length>0&&p[p.length-1])&&(E[0]===6||E[0]===2)){u=0;continue}if(E[0]===3&&(!p||E[1]>p[0]&&E[1]<p[3])){u.label=E[1];break}if(E[0]===6&&u.label<p[1]){u.label=p[1],p=E;break}if(p&&u.label<p[2]){u.label=p[2],u.ops.push(E);break}p[2]&&u.ops.pop(),u.trys.pop();continue}E=s.call(a,u)}catch(I){E=[6,I],l=0}finally{d=p=0}if(E[0]&5)throw E[1];return{value:E[0]?E[1]:void 0,done:!0}}}function __values(a){var s=typeof Symbol=="function"&&Symbol.iterator,u=s&&a[s],d=0;if(u)return u.call(a);if(a&&typeof a.length=="number")return{next:function(){return a&&d>=a.length&&(a=void 0),{value:a&&a[d++],done:!a}}};throw new TypeError(s?"Object is not iterable.":"Symbol.iterator is not defined.")}function __read(a,s){var u=typeof Symbol=="function"&&a[Symbol.iterator];if(!u)return a;var d=u.call(a),l,p=[],h;try{for(;(s===void 0||s-- >0)&&!(l=d.next()).done;)p.push(l.value)}catch(y){h={error:y}}finally{try{l&&!l.done&&(u=d.return)&&u.call(d)}finally{if(h)throw h.error}}return p}function __spreadArray(a,s,u){if(u||arguments.length===2)for(var d=0,l=s.length,p;d<l;d++)(p||!(d in s))&&(p||(p=Array.prototype.slice.call(s,0,d)),p[d]=s[d]);return a.concat(p||Array.prototype.slice.call(s))}function __await(a){return this instanceof __await?(this.v=a,this):new __await(a)}function __asyncGenerator(a,s,u){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var d=u.apply(a,s||[]),l,p=[];return l={},h("next"),h("throw"),h("return"),l[Symbol.asyncIterator]=function(){return this},l;function h(w){d[w]&&(l[w]=function(C){return new Promise(function(D,V){p.push([w,C,D,V])>1||y(w,C)})})}function y(w,C){try{_(d[w](C))}catch(D){N(p[0][3],D)}}function _(w){w.value instanceof __await?Promise.resolve(w.value.v).then(E,I):N(p[0][2],w)}function E(w){y("next",w)}function I(w){y("throw",w)}function N(w,C){w(C),p.shift(),p.length&&y(p[0][0],p[0][1])}}function __asyncValues(a){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=a[Symbol.asyncIterator],u;return s?s.call(a):(a=typeof __values=="function"?__values(a):a[Symbol.iterator](),u={},d("next"),d("throw"),d("return"),u[Symbol.asyncIterator]=function(){return this},u);function d(p){u[p]=a[p]&&function(h){return new Promise(function(y,_){h=a[p](h),l(y,_,h.done,h.value)})}}function l(p,h,y,_){Promise.resolve(_).then(function(E){p({value:E,done:y})},h)}}var isArrayLike$1=function(a){return a&&typeof a.length=="number"&&typeof a!="function"};function isPromise$1(a){return isFunction$2(a==null?void 0:a.then)}function createErrorClass(a){var s=function(d){Error.call(d),d.stack=new Error().stack},u=a(s);return u.prototype=Object.create(Error.prototype),u.prototype.constructor=u,u}var UnsubscriptionError$1=createErrorClass(function(a){return function(u){a(this),this.message=u?u.length+` errors occurred during unsubscription:
`+u.map(function(d,l){return l+1+") "+d.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=u}});function arrRemove(a,s){if(a){var u=a.indexOf(s);0<=u&&a.splice(u,1)}}var Subscription$1=function(){function a(s){this.initialTeardown=s,this.closed=!1,this._parentage=null,this._finalizers=null}return a.prototype.unsubscribe=function(){var s,u,d,l,p;if(!this.closed){this.closed=!0;var h=this._parentage;if(h)if(this._parentage=null,Array.isArray(h))try{for(var y=__values(h),_=y.next();!_.done;_=y.next()){var E=_.value;E.remove(this)}}catch(V){s={error:V}}finally{try{_&&!_.done&&(u=y.return)&&u.call(y)}finally{if(s)throw s.error}}else h.remove(this);var I=this.initialTeardown;if(isFunction$2(I))try{I()}catch(V){p=V instanceof UnsubscriptionError$1?V.errors:[V]}var N=this._finalizers;if(N){this._finalizers=null;try{for(var w=__values(N),C=w.next();!C.done;C=w.next()){var D=C.value;try{execFinalizer(D)}catch(V){p=p!=null?p:[],V instanceof UnsubscriptionError$1?p=__spreadArray(__spreadArray([],__read(p)),__read(V.errors)):p.push(V)}}}catch(V){d={error:V}}finally{try{C&&!C.done&&(l=w.return)&&l.call(w)}finally{if(d)throw d.error}}}if(p)throw new UnsubscriptionError$1(p)}},a.prototype.add=function(s){var u;if(s&&s!==this)if(this.closed)execFinalizer(s);else{if(s instanceof a){if(s.closed||s._hasParent(this))return;s._addParent(this)}(this._finalizers=(u=this._finalizers)!==null&&u!==void 0?u:[]).push(s)}},a.prototype._hasParent=function(s){var u=this._parentage;return u===s||Array.isArray(u)&&u.includes(s)},a.prototype._addParent=function(s){var u=this._parentage;this._parentage=Array.isArray(u)?(u.push(s),u):u?[u,s]:s},a.prototype._removeParent=function(s){var u=this._parentage;u===s?this._parentage=null:Array.isArray(u)&&arrRemove(u,s)},a.prototype.remove=function(s){var u=this._finalizers;u&&arrRemove(u,s),s instanceof a&&s._removeParent(this)},a.EMPTY=function(){var s=new a;return s.closed=!0,s}(),a}(),EMPTY_SUBSCRIPTION=Subscription$1.EMPTY;function isSubscription(a){return a instanceof Subscription$1||a&&"closed"in a&&isFunction$2(a.remove)&&isFunction$2(a.add)&&isFunction$2(a.unsubscribe)}function execFinalizer(a){isFunction$2(a)?a():a.unsubscribe()}var config$2={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},timeoutProvider={setTimeout:function(a,s){for(var u=[],d=2;d<arguments.length;d++)u[d-2]=arguments[d];var l=timeoutProvider.delegate;return l!=null&&l.setTimeout?l.setTimeout.apply(l,__spreadArray([a,s],__read(u))):setTimeout.apply(void 0,__spreadArray([a,s],__read(u)))},clearTimeout:function(a){var s=timeoutProvider.delegate;return((s==null?void 0:s.clearTimeout)||clearTimeout)(a)},delegate:void 0};function reportUnhandledError(a){timeoutProvider.setTimeout(function(){throw a})}function noop$2(){}var COMPLETE_NOTIFICATION=function(){return createNotification("C",void 0,void 0)}();function errorNotification(a){return createNotification("E",void 0,a)}function nextNotification(a){return createNotification("N",a,void 0)}function createNotification(a,s,u){return{kind:a,value:s,error:u}}var context=null;function errorContext(a){if(config$2.useDeprecatedSynchronousErrorHandling){var s=!context;if(s&&(context={errorThrown:!1,error:null}),a(),s){var u=context,d=u.errorThrown,l=u.error;if(context=null,d)throw l}}else a()}var Subscriber$1=function(a){__extends$1(s,a);function s(u){var d=a.call(this)||this;return d.isStopped=!1,u?(d.destination=u,isSubscription(u)&&u.add(d)):d.destination=EMPTY_OBSERVER,d}return s.create=function(u,d,l){return new SafeSubscriber$1(u,d,l)},s.prototype.next=function(u){this.isStopped?handleStoppedNotification(nextNotification(u),this):this._next(u)},s.prototype.error=function(u){this.isStopped?handleStoppedNotification(errorNotification(u),this):(this.isStopped=!0,this._error(u))},s.prototype.complete=function(){this.isStopped?handleStoppedNotification(COMPLETE_NOTIFICATION,this):(this.isStopped=!0,this._complete())},s.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,a.prototype.unsubscribe.call(this),this.destination=null)},s.prototype._next=function(u){this.destination.next(u)},s.prototype._error=function(u){try{this.destination.error(u)}finally{this.unsubscribe()}},s.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},s}(Subscription$1),_bind=Function.prototype.bind;function bind$3(a,s){return _bind.call(a,s)}var ConsumerObserver=function(){function a(s){this.partialObserver=s}return a.prototype.next=function(s){var u=this.partialObserver;if(u.next)try{u.next(s)}catch(d){handleUnhandledError(d)}},a.prototype.error=function(s){var u=this.partialObserver;if(u.error)try{u.error(s)}catch(d){handleUnhandledError(d)}else handleUnhandledError(s)},a.prototype.complete=function(){var s=this.partialObserver;if(s.complete)try{s.complete()}catch(u){handleUnhandledError(u)}},a}(),SafeSubscriber$1=function(a){__extends$1(s,a);function s(u,d,l){var p=a.call(this)||this,h;if(isFunction$2(u)||!u)h={next:u!=null?u:void 0,error:d!=null?d:void 0,complete:l!=null?l:void 0};else{var y;p&&config$2.useDeprecatedNextContext?(y=Object.create(u),y.unsubscribe=function(){return p.unsubscribe()},h={next:u.next&&bind$3(u.next,y),error:u.error&&bind$3(u.error,y),complete:u.complete&&bind$3(u.complete,y)}):h=u}return p.destination=new ConsumerObserver(h),p}return s}(Subscriber$1);function handleUnhandledError(a){reportUnhandledError(a)}function defaultErrorHandler(a){throw a}function handleStoppedNotification(a,s){var u=config$2.onStoppedNotification;u&&timeoutProvider.setTimeout(function(){return u(a,s)})}var EMPTY_OBSERVER={closed:!0,next:noop$2,error:defaultErrorHandler,complete:noop$2},observable$1=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function identity$1(a){return a}function pipe$1(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];return pipeFromArray$1(a)}function pipeFromArray$1(a){return a.length===0?identity$1:a.length===1?a[0]:function(u){return a.reduce(function(d,l){return l(d)},u)}}var Observable$1=function(){function a(s){s&&(this._subscribe=s)}return a.prototype.lift=function(s){var u=new a;return u.source=this,u.operator=s,u},a.prototype.subscribe=function(s,u,d){var l=this,p=isSubscriber(s)?s:new SafeSubscriber$1(s,u,d);return errorContext(function(){var h=l,y=h.operator,_=h.source;p.add(y?y.call(p,_):_?l._subscribe(p):l._trySubscribe(p))}),p},a.prototype._trySubscribe=function(s){try{return this._subscribe(s)}catch(u){s.error(u)}},a.prototype.forEach=function(s,u){var d=this;return u=getPromiseCtor$1(u),new u(function(l,p){var h=new SafeSubscriber$1({next:function(y){try{s(y)}catch(_){p(_),h.unsubscribe()}},error:p,complete:l});d.subscribe(h)})},a.prototype._subscribe=function(s){var u;return(u=this.source)===null||u===void 0?void 0:u.subscribe(s)},a.prototype[observable$1]=function(){return this},a.prototype.pipe=function(){for(var s=[],u=0;u<arguments.length;u++)s[u]=arguments[u];return pipeFromArray$1(s)(this)},a.prototype.toPromise=function(s){var u=this;return s=getPromiseCtor$1(s),new s(function(d,l){var p;u.subscribe(function(h){return p=h},function(h){return l(h)},function(){return d(p)})})},a.create=function(s){return new a(s)},a}();function getPromiseCtor$1(a){var s;return(s=a!=null?a:config$2.Promise)!==null&&s!==void 0?s:Promise}function isObserver(a){return a&&isFunction$2(a.next)&&isFunction$2(a.error)&&isFunction$2(a.complete)}function isSubscriber(a){return a&&a instanceof Subscriber$1||isObserver(a)&&isSubscription(a)}function isInteropObservable$1(a){return isFunction$2(a[observable$1])}function isAsyncIterable(a){return Symbol.asyncIterator&&isFunction$2(a==null?void 0:a[Symbol.asyncIterator])}function createInvalidObservableTypeError(a){return new TypeError("You provided "+(a!==null&&typeof a=="object"?"an invalid object":"'"+a+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}function getSymbolIterator$1(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var iterator$1=getSymbolIterator$1();function isIterable$1(a){return isFunction$2(a==null?void 0:a[iterator$1])}function readableStreamLikeToAsyncGenerator(a){return __asyncGenerator(this,arguments,function(){var u,d,l,p;return __generator(this,function(h){switch(h.label){case 0:u=a.getReader(),h.label=1;case 1:h.trys.push([1,,9,10]),h.label=2;case 2:return[4,__await(u.read())];case 3:return d=h.sent(),l=d.value,p=d.done,p?[4,__await(void 0)]:[3,5];case 4:return[2,h.sent()];case 5:return[4,__await(l)];case 6:return[4,h.sent()];case 7:return h.sent(),[3,2];case 8:return[3,10];case 9:return u.releaseLock(),[7];case 10:return[2]}})})}function isReadableStreamLike(a){return isFunction$2(a==null?void 0:a.getReader)}function innerFrom(a){if(a instanceof Observable$1)return a;if(a!=null){if(isInteropObservable$1(a))return fromInteropObservable(a);if(isArrayLike$1(a))return fromArrayLike(a);if(isPromise$1(a))return fromPromise(a);if(isAsyncIterable(a))return fromAsyncIterable(a);if(isIterable$1(a))return fromIterable(a);if(isReadableStreamLike(a))return fromReadableStreamLike(a)}throw createInvalidObservableTypeError(a)}function fromInteropObservable(a){return new Observable$1(function(s){var u=a[observable$1]();if(isFunction$2(u.subscribe))return u.subscribe(s);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function fromArrayLike(a){return new Observable$1(function(s){for(var u=0;u<a.length&&!s.closed;u++)s.next(a[u]);s.complete()})}function fromPromise(a){return new Observable$1(function(s){a.then(function(u){s.closed||(s.next(u),s.complete())},function(u){return s.error(u)}).then(null,reportUnhandledError)})}function fromIterable(a){return new Observable$1(function(s){var u,d;try{for(var l=__values(a),p=l.next();!p.done;p=l.next()){var h=p.value;if(s.next(h),s.closed)return}}catch(y){u={error:y}}finally{try{p&&!p.done&&(d=l.return)&&d.call(l)}finally{if(u)throw u.error}}s.complete()})}function fromAsyncIterable(a){return new Observable$1(function(s){process$1(a,s).catch(function(u){return s.error(u)})})}function fromReadableStreamLike(a){return fromAsyncIterable(readableStreamLikeToAsyncGenerator(a))}function process$1(a,s){var u,d,l,p;return __awaiter$d(this,void 0,void 0,function(){var h,y;return __generator(this,function(_){switch(_.label){case 0:_.trys.push([0,5,6,11]),u=__asyncValues(a),_.label=1;case 1:return[4,u.next()];case 2:if(d=_.sent(),!!d.done)return[3,4];if(h=d.value,s.next(h),s.closed)return[2];_.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return y=_.sent(),l={error:y},[3,11];case 6:return _.trys.push([6,,9,10]),d&&!d.done&&(p=u.return)?[4,p.call(u)]:[3,8];case 7:_.sent(),_.label=8;case 8:return[3,10];case 9:if(l)throw l.error;return[7];case 10:return[7];case 11:return s.complete(),[2]}})})}function createOperatorSubscriber(a,s,u,d,l){return new OperatorSubscriber(a,s,u,d,l)}var OperatorSubscriber=function(a){__extends$1(s,a);function s(u,d,l,p,h,y){var _=a.call(this,u)||this;return _.onFinalize=h,_.shouldUnsubscribe=y,_._next=d?function(E){try{d(E)}catch(I){u.error(I)}}:a.prototype._next,_._error=p?function(E){try{p(E)}catch(I){u.error(I)}finally{this.unsubscribe()}}:a.prototype._error,_._complete=l?function(){try{l()}catch(E){u.error(E)}finally{this.unsubscribe()}}:a.prototype._complete,_}return s.prototype.unsubscribe=function(){var u;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var d=this.closed;a.prototype.unsubscribe.call(this),!d&&((u=this.onFinalize)===null||u===void 0||u.call(this))}},s}(Subscriber$1);function audit$1(a){return operate(function(s,u){var d=!1,l=null,p=null,h=!1,y=function(){if(p==null||p.unsubscribe(),p=null,d){d=!1;var E=l;l=null,u.next(E)}h&&u.complete()},_=function(){p=null,h&&u.complete()};s.subscribe(createOperatorSubscriber(u,function(E){d=!0,l=E,p||innerFrom(a(E)).subscribe(p=createOperatorSubscriber(u,y,_))},function(){h=!0,(!d||!p||p.closed)&&u.complete()}))})}var Action$1=function(a){__extends$1(s,a);function s(u,d){return a.call(this)||this}return s.prototype.schedule=function(u,d){return this},s}(Subscription$1),intervalProvider={setInterval:function(a,s){for(var u=[],d=2;d<arguments.length;d++)u[d-2]=arguments[d];var l=intervalProvider.delegate;return l!=null&&l.setInterval?l.setInterval.apply(l,__spreadArray([a,s],__read(u))):setInterval.apply(void 0,__spreadArray([a,s],__read(u)))},clearInterval:function(a){var s=intervalProvider.delegate;return((s==null?void 0:s.clearInterval)||clearInterval)(a)},delegate:void 0},AsyncAction$1=function(a){__extends$1(s,a);function s(u,d){var l=a.call(this,u,d)||this;return l.scheduler=u,l.work=d,l.pending=!1,l}return s.prototype.schedule=function(u,d){if(d===void 0&&(d=0),this.closed)return this;this.state=u;var l=this.id,p=this.scheduler;return l!=null&&(this.id=this.recycleAsyncId(p,l,d)),this.pending=!0,this.delay=d,this.id=this.id||this.requestAsyncId(p,this.id,d),this},s.prototype.requestAsyncId=function(u,d,l){return l===void 0&&(l=0),intervalProvider.setInterval(u.flush.bind(u,this),l)},s.prototype.recycleAsyncId=function(u,d,l){if(l===void 0&&(l=0),l!=null&&this.delay===l&&this.pending===!1)return d;intervalProvider.clearInterval(d)},s.prototype.execute=function(u,d){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var l=this._execute(u,d);if(l)return l;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},s.prototype._execute=function(u,d){var l=!1,p;try{this.work(u)}catch(h){l=!0,p=h||new Error("Scheduled action threw falsy error")}if(l)return this.unsubscribe(),p},s.prototype.unsubscribe=function(){if(!this.closed){var u=this,d=u.id,l=u.scheduler,p=l.actions;this.work=this.state=this.scheduler=null,this.pending=!1,arrRemove(p,this),d!=null&&(this.id=this.recycleAsyncId(l,d,null)),this.delay=null,a.prototype.unsubscribe.call(this)}},s}(Action$1),dateTimestampProvider={now:function(){return(dateTimestampProvider.delegate||Date).now()},delegate:void 0},Scheduler$1=function(){function a(s,u){u===void 0&&(u=a.now),this.schedulerActionCtor=s,this.now=u}return a.prototype.schedule=function(s,u,d){return u===void 0&&(u=0),new this.schedulerActionCtor(this,s).schedule(d,u)},a.now=dateTimestampProvider.now,a}(),AsyncScheduler$1=function(a){__extends$1(s,a);function s(u,d){d===void 0&&(d=Scheduler$1.now);var l=a.call(this,u,d)||this;return l.actions=[],l._active=!1,l._scheduled=void 0,l}return s.prototype.flush=function(u){var d=this.actions;if(this._active){d.push(u);return}var l;this._active=!0;do if(l=u.execute(u.state,u.delay))break;while(u=d.shift());if(this._active=!1,l){for(;u=d.shift();)u.unsubscribe();throw l}},s}(Scheduler$1),asyncScheduler$1=new AsyncScheduler$1(AsyncAction$1),async$1=asyncScheduler$1;function isScheduler$1(a){return a&&isFunction$2(a.schedule)}function isValidDate(a){return a instanceof Date&&!isNaN(a)}function timer$1(a,s,u){a===void 0&&(a=0),u===void 0&&(u=async$1);var d=-1;return s!=null&&(isScheduler$1(s)?u=s:d=s),new Observable$1(function(l){var p=isValidDate(a)?+a-u.now():a;p<0&&(p=0);var h=0;return u.schedule(function(){l.closed||(l.next(h++),0<=d?this.schedule(void 0,d):l.complete())},p)})}function auditTime$1(a,s){return s===void 0&&(s=asyncScheduler$1),audit$1(function(){return timer$1(a,s)})}function buffer$1(a){return operate(function(s,u){var d=[];return s.subscribe(createOperatorSubscriber(u,function(l){return d.push(l)},function(){u.next(d),u.complete()})),a.subscribe(createOperatorSubscriber(u,function(){var l=d;d=[],u.next(l)},noop$2)),function(){d=null}})}function bufferCount$1(a,s){return s===void 0&&(s=null),s=s!=null?s:a,operate(function(u,d){var l=[],p=0;u.subscribe(createOperatorSubscriber(d,function(h){var y,_,E,I,N=null;p++%s===0&&l.push([]);try{for(var w=__values(l),C=w.next();!C.done;C=w.next()){var D=C.value;D.push(h),a<=D.length&&(N=N!=null?N:[],N.push(D))}}catch(W){y={error:W}}finally{try{C&&!C.done&&(_=w.return)&&_.call(w)}finally{if(y)throw y.error}}if(N)try{for(var V=__values(N),J=V.next();!J.done;J=V.next()){var D=J.value;arrRemove(l,D),d.next(D)}}catch(W){E={error:W}}finally{try{J&&!J.done&&(I=V.return)&&I.call(V)}finally{if(E)throw E.error}}},function(){var h,y;try{for(var _=__values(l),E=_.next();!E.done;E=_.next()){var I=E.value;d.next(I)}}catch(N){h={error:N}}finally{try{E&&!E.done&&(y=_.return)&&y.call(_)}finally{if(h)throw h.error}}d.complete()},void 0,function(){l=null}))})}function last$2(a){return a[a.length-1]}function popResultSelector(a){return isFunction$2(last$2(a))?a.pop():void 0}function popScheduler(a){return isScheduler$1(last$2(a))?a.pop():void 0}function popNumber(a,s){return typeof last$2(a)=="number"?a.pop():s}function executeSchedule(a,s,u,d,l){d===void 0&&(d=0),l===void 0&&(l=!1);var p=s.schedule(function(){u(),l?a.add(this.schedule(null,d)):this.unsubscribe()},d);if(a.add(p),!l)return p}function bufferTime$1(a){for(var s,u,d=[],l=1;l<arguments.length;l++)d[l-1]=arguments[l];var p=(s=popScheduler(d))!==null&&s!==void 0?s:asyncScheduler$1,h=(u=d[0])!==null&&u!==void 0?u:null,y=d[1]||1/0;return operate(function(_,E){var I=[],N=!1,w=function(V){var J=V.buffer,W=V.subs;W.unsubscribe(),arrRemove(I,V),E.next(J),N&&C()},C=function(){if(I){var V=new Subscription$1;E.add(V);var J=[],W={buffer:J,subs:V};I.push(W),executeSchedule(V,p,function(){return w(W)},a)}};h!==null&&h>=0?executeSchedule(E,p,C,h,!0):N=!0,C();var D=createOperatorSubscriber(E,function(V){var J,W,g=I.slice();try{for(var O=__values(g),$=O.next();!$.done;$=O.next()){var x=$.value,Y=x.buffer;Y.push(V),y<=Y.length&&w(x)}}catch(te){J={error:te}}finally{try{$&&!$.done&&(W=O.return)&&W.call(O)}finally{if(J)throw J.error}}},function(){for(;I!=null&&I.length;)E.next(I.shift().buffer);D==null||D.unsubscribe(),E.complete(),E.unsubscribe()},void 0,function(){return I=null});_.subscribe(D)})}function bufferToggle$1(a,s){return operate(function(u,d){var l=[];innerFrom(a).subscribe(createOperatorSubscriber(d,function(p){var h=[];l.push(h);var y=new Subscription$1,_=function(){arrRemove(l,h),d.next(h),y.unsubscribe()};y.add(innerFrom(s(p)).subscribe(createOperatorSubscriber(d,_,noop$2)))},noop$2)),u.subscribe(createOperatorSubscriber(d,function(p){var h,y;try{for(var _=__values(l),E=_.next();!E.done;E=_.next()){var I=E.value;I.push(p)}}catch(N){h={error:N}}finally{try{E&&!E.done&&(y=_.return)&&y.call(_)}finally{if(h)throw h.error}}},function(){for(;l.length>0;)d.next(l.shift());d.complete()}))})}function bufferWhen$1(a){return operate(function(s,u){var d=null,l=null,p=function(){l==null||l.unsubscribe();var h=d;d=[],h&&u.next(h),innerFrom(a()).subscribe(l=createOperatorSubscriber(u,p,noop$2))};p(),s.subscribe(createOperatorSubscriber(u,function(h){return d==null?void 0:d.push(h)},function(){d&&u.next(d),u.complete()},void 0,function(){return d=l=null}))})}function catchError$1(a){return operate(function(s,u){var d=null,l=!1,p;d=s.subscribe(createOperatorSubscriber(u,void 0,void 0,function(h){p=innerFrom(a(h,catchError$1(a)(s))),d?(d.unsubscribe(),d=null,p.subscribe(u)):l=!0})),l&&(d.unsubscribe(),d=null,p.subscribe(u))})}var isArray$5=Array.isArray,getPrototypeOf=Object.getPrototypeOf,objectProto=Object.prototype,getKeys=Object.keys;function argsArgArrayOrObject(a){if(a.length===1){var s=a[0];if(isArray$5(s))return{args:s,keys:null};if(isPOJO(s)){var u=getKeys(s);return{args:u.map(function(d){return s[d]}),keys:u}}}return{args:a,keys:null}}function isPOJO(a){return a&&typeof a=="object"&&getPrototypeOf(a)===objectProto}function observeOn$1(a,s){return s===void 0&&(s=0),operate(function(u,d){u.subscribe(createOperatorSubscriber(d,function(l){return executeSchedule(d,a,function(){return d.next(l)},s)},function(){return executeSchedule(d,a,function(){return d.complete()},s)},function(l){return executeSchedule(d,a,function(){return d.error(l)},s)}))})}function subscribeOn$1(a,s){return s===void 0&&(s=0),operate(function(u,d){d.add(a.schedule(function(){return u.subscribe(d)},s))})}function scheduleObservable$1(a,s){return innerFrom(a).pipe(subscribeOn$1(s),observeOn$1(s))}function schedulePromise$1(a,s){return innerFrom(a).pipe(subscribeOn$1(s),observeOn$1(s))}function scheduleArray$1(a,s){return new Observable$1(function(u){var d=0;return s.schedule(function(){d===a.length?u.complete():(u.next(a[d++]),u.closed||this.schedule())})})}function scheduleIterable$1(a,s){return new Observable$1(function(u){var d;return executeSchedule(u,s,function(){d=a[iterator$1](),executeSchedule(u,s,function(){var l,p,h;try{l=d.next(),p=l.value,h=l.done}catch(y){u.error(y);return}h?u.complete():u.next(p)},0,!0)}),function(){return isFunction$2(d==null?void 0:d.return)&&d.return()}})}function scheduleAsyncIterable(a,s){if(!a)throw new Error("Iterable cannot be null");return new Observable$1(function(u){executeSchedule(u,s,function(){var d=a[Symbol.asyncIterator]();executeSchedule(u,s,function(){d.next().then(function(l){l.done?u.complete():u.next(l.value)})},0,!0)})})}function scheduleReadableStreamLike(a,s){return scheduleAsyncIterable(readableStreamLikeToAsyncGenerator(a),s)}function scheduled$1(a,s){if(a!=null){if(isInteropObservable$1(a))return scheduleObservable$1(a,s);if(isArrayLike$1(a))return scheduleArray$1(a,s);if(isPromise$1(a))return schedulePromise$1(a,s);if(isAsyncIterable(a))return scheduleAsyncIterable(a,s);if(isIterable$1(a))return scheduleIterable$1(a,s);if(isReadableStreamLike(a))return scheduleReadableStreamLike(a,s)}throw createInvalidObservableTypeError(a)}function from$1(a,s){return s?scheduled$1(a,s):innerFrom(a)}function map$1(a,s){return operate(function(u,d){var l=0;u.subscribe(createOperatorSubscriber(d,function(p){d.next(a.call(s,p,l++))}))})}var isArray$4=Array.isArray;function callOrApply(a,s){return isArray$4(s)?a.apply(void 0,__spreadArray([],__read(s))):a(s)}function mapOneOrManyArgs(a){return map$1(function(s){return callOrApply(a,s)})}function createObject(a,s){return a.reduce(function(u,d,l){return u[d]=s[l],u},{})}function combineLatest$2(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];var u=popScheduler(a),d=popResultSelector(a),l=argsArgArrayOrObject(a),p=l.args,h=l.keys;if(p.length===0)return from$1([],u);var y=new Observable$1(combineLatestInit(p,u,h?function(_){return createObject(h,_)}:identity$1));return d?y.pipe(mapOneOrManyArgs(d)):y}function combineLatestInit(a,s,u){return u===void 0&&(u=identity$1),function(d){maybeSchedule(s,function(){for(var l=a.length,p=new Array(l),h=l,y=l,_=function(I){maybeSchedule(s,function(){var N=from$1(a[I],s),w=!1;N.subscribe(createOperatorSubscriber(d,function(C){p[I]=C,w||(w=!0,y--),y||d.next(u(p.slice()))},function(){--h||d.complete()}))},d)},E=0;E<l;E++)_(E)},d)}}function maybeSchedule(a,s,u){a?executeSchedule(u,a,s):s()}function mergeInternals(a,s,u,d,l,p,h,y){var _=[],E=0,I=0,N=!1,w=function(){N&&!_.length&&!E&&s.complete()},C=function(V){return E<d?D(V):_.push(V)},D=function(V){p&&s.next(V),E++;var J=!1;innerFrom(u(V,I++)).subscribe(createOperatorSubscriber(s,function(W){l==null||l(W),p?C(W):s.next(W)},function(){J=!0},void 0,function(){if(J)try{E--;for(var W=function(){var g=_.shift();h?executeSchedule(s,h,function(){return D(g)}):D(g)};_.length&&E<d;)W();w()}catch(g){s.error(g)}}))};return a.subscribe(createOperatorSubscriber(s,C,function(){N=!0,w()})),function(){y==null||y()}}function mergeMap$1(a,s,u){return u===void 0&&(u=1/0),isFunction$2(s)?mergeMap$1(function(d,l){return map$1(function(p,h){return s(d,p,l,h)})(innerFrom(a(d,l)))},u):(typeof s=="number"&&(u=s),operate(function(d,l){return mergeInternals(d,l,a,u)}))}function scanInternals(a,s,u,d,l){return function(p,h){var y=u,_=s,E=0;p.subscribe(createOperatorSubscriber(h,function(I){var N=E++;_=y?a(_,I,N):(y=!0,I),d&&h.next(_)},l&&function(){y&&h.next(_),h.complete()}))}}function reduce$1(a,s){return operate(scanInternals(a,s,arguments.length>=2,!1,!0))}var arrReducer=function(a,s){return a.push(s),a};function toArray$1(){return operate(function(a,s){reduce$1(arrReducer,[])(a).subscribe(s)})}function joinAllInternals(a,s){return pipe$1(toArray$1(),mergeMap$1(function(u){return a(u)}),s?mapOneOrManyArgs(s):identity$1)}function combineLatestAll(a){return joinAllInternals(combineLatest$2,a)}var combineAll$1=combineLatestAll,isArray$3=Array.isArray;function argsOrArgArray(a){return a.length===1&&isArray$3(a[0])?a[0]:a}function combineLatest$1(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];var u=popResultSelector(a);return u?pipe$1(combineLatest$1.apply(void 0,__spreadArray([],__read(a))),mapOneOrManyArgs(u)):operate(function(d,l){combineLatestInit(__spreadArray([d],__read(argsOrArgArray(a))))(l)})}function combineLatestWith(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];return combineLatest$1.apply(void 0,__spreadArray([],__read(a)))}function mergeAll$1(a){return a===void 0&&(a=1/0),mergeMap$1(identity$1,a)}function concatAll$1(){return mergeAll$1(1)}function concat$3(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];var u=popScheduler(a);return operate(function(d,l){concatAll$1()(from$1(__spreadArray([d],__read(a)),u)).subscribe(l)})}function concatMap$1(a,s){return isFunction$2(s)?mergeMap$1(a,s,1):mergeMap$1(a,1)}function concatMapTo$1(a,s){return isFunction$2(s)?concatMap$1(function(){return a},s):concatMap$1(function(){return a})}function concatWith(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];return concat$3.apply(void 0,__spreadArray([],__read(a)))}var ObjectUnsubscribedError$1=createErrorClass(function(a){return function(){a(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}}),Subject$1=function(a){__extends$1(s,a);function s(){var u=a.call(this)||this;return u.closed=!1,u.currentObservers=null,u.observers=[],u.isStopped=!1,u.hasError=!1,u.thrownError=null,u}return s.prototype.lift=function(u){var d=new AnonymousSubject$1(this,this);return d.operator=u,d},s.prototype._throwIfClosed=function(){if(this.closed)throw new ObjectUnsubscribedError$1},s.prototype.next=function(u){var d=this;errorContext(function(){var l,p;if(d._throwIfClosed(),!d.isStopped){d.currentObservers||(d.currentObservers=Array.from(d.observers));try{for(var h=__values(d.currentObservers),y=h.next();!y.done;y=h.next()){var _=y.value;_.next(u)}}catch(E){l={error:E}}finally{try{y&&!y.done&&(p=h.return)&&p.call(h)}finally{if(l)throw l.error}}}})},s.prototype.error=function(u){var d=this;errorContext(function(){if(d._throwIfClosed(),!d.isStopped){d.hasError=d.isStopped=!0,d.thrownError=u;for(var l=d.observers;l.length;)l.shift().error(u)}})},s.prototype.complete=function(){var u=this;errorContext(function(){if(u._throwIfClosed(),!u.isStopped){u.isStopped=!0;for(var d=u.observers;d.length;)d.shift().complete()}})},s.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(s.prototype,"observed",{get:function(){var u;return((u=this.observers)===null||u===void 0?void 0:u.length)>0},enumerable:!1,configurable:!0}),s.prototype._trySubscribe=function(u){return this._throwIfClosed(),a.prototype._trySubscribe.call(this,u)},s.prototype._subscribe=function(u){return this._throwIfClosed(),this._checkFinalizedStatuses(u),this._innerSubscribe(u)},s.prototype._innerSubscribe=function(u){var d=this,l=this,p=l.hasError,h=l.isStopped,y=l.observers;return p||h?EMPTY_SUBSCRIPTION:(this.currentObservers=null,y.push(u),new Subscription$1(function(){d.currentObservers=null,arrRemove(y,u)}))},s.prototype._checkFinalizedStatuses=function(u){var d=this,l=d.hasError,p=d.thrownError,h=d.isStopped;l?u.error(p):h&&u.complete()},s.prototype.asObservable=function(){var u=new Observable$1;return u.source=this,u},s.create=function(u,d){return new AnonymousSubject$1(u,d)},s}(Observable$1),AnonymousSubject$1=function(a){__extends$1(s,a);function s(u,d){var l=a.call(this)||this;return l.destination=u,l.source=d,l}return s.prototype.next=function(u){var d,l;(l=(d=this.destination)===null||d===void 0?void 0:d.next)===null||l===void 0||l.call(d,u)},s.prototype.error=function(u){var d,l;(l=(d=this.destination)===null||d===void 0?void 0:d.error)===null||l===void 0||l.call(d,u)},s.prototype.complete=function(){var u,d;(d=(u=this.destination)===null||u===void 0?void 0:u.complete)===null||d===void 0||d.call(u)},s.prototype._subscribe=function(u){var d,l;return(l=(d=this.source)===null||d===void 0?void 0:d.subscribe(u))!==null&&l!==void 0?l:EMPTY_SUBSCRIPTION},s}(Subject$1);function fromSubscribable(a){return new Observable$1(function(s){return a.subscribe(s)})}var DEFAULT_CONFIG={connector:function(){return new Subject$1}};function connect$1(a,s){s===void 0&&(s=DEFAULT_CONFIG);var u=s.connector;return operate(function(d,l){var p=u();from$1(a(fromSubscribable(p))).subscribe(l),l.add(d.subscribe(p))})}function count$1(a){return reduce$1(function(s,u,d){return!a||a(u,d)?s+1:s},0)}function debounce$1(a){return operate(function(s,u){var d=!1,l=null,p=null,h=function(){if(p==null||p.unsubscribe(),p=null,d){d=!1;var y=l;l=null,u.next(y)}};s.subscribe(createOperatorSubscriber(u,function(y){p==null||p.unsubscribe(),d=!0,l=y,p=createOperatorSubscriber(u,h,noop$2),innerFrom(a(y)).subscribe(p)},function(){h(),u.complete()},void 0,function(){l=p=null}))})}function debounceTime$1(a,s){return s===void 0&&(s=asyncScheduler$1),operate(function(u,d){var l=null,p=null,h=null,y=function(){if(l){l.unsubscribe(),l=null;var E=p;p=null,d.next(E)}};function _(){var E=h+a,I=s.now();if(I<E){l=this.schedule(void 0,E-I),d.add(l);return}y()}u.subscribe(createOperatorSubscriber(d,function(E){p=E,h=s.now(),l||(l=s.schedule(_,a),d.add(l))},function(){y(),d.complete()},void 0,function(){p=l=null}))})}function defaultIfEmpty$1(a){return operate(function(s,u){var d=!1;s.subscribe(createOperatorSubscriber(u,function(l){d=!0,u.next(l)},function(){d||u.next(a),u.complete()}))})}function concat$2(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];return concatAll$1()(from$1(a,popScheduler(a)))}var EMPTY$1=new Observable$1(function(a){return a.complete()});function take$1(a){return a<=0?function(){return EMPTY$1}:operate(function(s,u){var d=0;s.subscribe(createOperatorSubscriber(u,function(l){++d<=a&&(u.next(l),a<=d&&u.complete())}))})}function ignoreElements$1(){return operate(function(a,s){a.subscribe(createOperatorSubscriber(s,noop$2))})}function mapTo$1(a){return map$1(function(){return a})}function delayWhen$1(a,s){return s?function(u){return concat$2(s.pipe(take$1(1),ignoreElements$1()),u.pipe(delayWhen$1(a)))}:mergeMap$1(function(u,d){return a(u,d).pipe(take$1(1),mapTo$1(u))})}function delay$1(a,s){s===void 0&&(s=asyncScheduler$1);var u=timer$1(a,s);return delayWhen$1(function(){return u})}function of$1(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];var u=popScheduler(a);return from$1(a,u)}function throwError$1(a,s){var u=isFunction$2(a)?a:function(){return a},d=function(l){return l.error(u())};return new Observable$1(s?function(l){return s.schedule(d,0,l)}:d)}var NotificationKind;(function(a){a.NEXT="N",a.ERROR="E",a.COMPLETE="C"})(NotificationKind||(NotificationKind={}));var Notification$1=function(){function a(s,u,d){this.kind=s,this.value=u,this.error=d,this.hasValue=s==="N"}return a.prototype.observe=function(s){return observeNotification(this,s)},a.prototype.do=function(s,u,d){var l=this,p=l.kind,h=l.value,y=l.error;return p==="N"?s==null?void 0:s(h):p==="E"?u==null?void 0:u(y):d==null?void 0:d()},a.prototype.accept=function(s,u,d){var l;return isFunction$2((l=s)===null||l===void 0?void 0:l.next)?this.observe(s):this.do(s,u,d)},a.prototype.toObservable=function(){var s=this,u=s.kind,d=s.value,l=s.error,p=u==="N"?of$1(d):u==="E"?throwError$1(function(){return l}):u==="C"?EMPTY$1:0;if(!p)throw new TypeError("Unexpected notification kind "+u);return p},a.createNext=function(s){return new a("N",s)},a.createError=function(s){return new a("E",void 0,s)},a.createComplete=function(){return a.completeNotification},a.completeNotification=new a("C"),a}();function observeNotification(a,s){var u,d,l,p=a,h=p.kind,y=p.value,_=p.error;if(typeof h!="string")throw new TypeError('Invalid notification, missing "kind"');h==="N"?(u=s.next)===null||u===void 0||u.call(s,y):h==="E"?(d=s.error)===null||d===void 0||d.call(s,_):(l=s.complete)===null||l===void 0||l.call(s)}function dematerialize$1(){return operate(function(a,s){a.subscribe(createOperatorSubscriber(s,function(u){return observeNotification(u,s)}))})}function distinct$1(a,s){return operate(function(u,d){var l=new Set;u.subscribe(createOperatorSubscriber(d,function(p){var h=a?a(p):p;l.has(h)||(l.add(h),d.next(p))})),s==null||s.subscribe(createOperatorSubscriber(d,function(){return l.clear()},noop$2))})}function distinctUntilChanged$1(a,s){return s===void 0&&(s=identity$1),a=a!=null?a:defaultCompare,operate(function(u,d){var l,p=!0;u.subscribe(createOperatorSubscriber(d,function(h){var y=s(h);(p||!a(l,y))&&(p=!1,l=y,d.next(h))}))})}function defaultCompare(a,s){return a===s}function distinctUntilKeyChanged$1(a,s){return distinctUntilChanged$1(function(u,d){return s?s(u[a],d[a]):u[a]===d[a]})}var ArgumentOutOfRangeError$1=createErrorClass(function(a){return function(){a(this),this.name="ArgumentOutOfRangeError",this.message="argument out of range"}});function filter$1(a,s){return operate(function(u,d){var l=0;u.subscribe(createOperatorSubscriber(d,function(p){return a.call(s,p,l++)&&d.next(p)}))})}var EmptyError$1=createErrorClass(function(a){return function(){a(this),this.name="EmptyError",this.message="no elements in sequence"}});function throwIfEmpty$1(a){return a===void 0&&(a=defaultErrorFactory$1),operate(function(s,u){var d=!1;s.subscribe(createOperatorSubscriber(u,function(l){d=!0,u.next(l)},function(){return d?u.complete():u.error(a())}))})}function defaultErrorFactory$1(){return new EmptyError$1}function elementAt$1(a,s){if(a<0)throw new ArgumentOutOfRangeError$1;var u=arguments.length>=2;return function(d){return d.pipe(filter$1(function(l,p){return p===a}),take$1(1),u?defaultIfEmpty$1(s):throwIfEmpty$1(function(){return new ArgumentOutOfRangeError$1}))}}function endWith$1(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];return function(u){return concat$2(u,of$1.apply(void 0,__spreadArray([],__read(a))))}}function every$1(a,s){return operate(function(u,d){var l=0;u.subscribe(createOperatorSubscriber(d,function(p){a.call(s,p,l++,u)||(d.next(!1),d.complete())},function(){d.next(!0),d.complete()}))})}function exhaustAll(){return operate(function(a,s){var u=!1,d=null;a.subscribe(createOperatorSubscriber(s,function(l){d||(d=innerFrom(l).subscribe(createOperatorSubscriber(s,void 0,function(){d=null,u&&s.complete()})))},function(){u=!0,!d&&s.complete()}))})}var exhaust$1=exhaustAll;function exhaustMap$1(a,s){return s?function(u){return u.pipe(exhaustMap$1(function(d,l){return innerFrom(a(d,l)).pipe(map$1(function(p,h){return s(d,p,l,h)}))}))}:operate(function(u,d){var l=0,p=null,h=!1;u.subscribe(createOperatorSubscriber(d,function(y){p||(p=createOperatorSubscriber(d,void 0,function(){p=null,h&&d.complete()}),innerFrom(a(y,l++)).subscribe(p))},function(){h=!0,!p&&d.complete()}))})}function expand$1(a,s,u){return s===void 0&&(s=1/0),s=(s||0)<1?1/0:s,operate(function(d,l){return mergeInternals(d,l,a,s,void 0,!0,u)})}function finalize$1(a){return operate(function(s,u){try{s.subscribe(u)}finally{u.add(a)}})}function find$2(a,s){return operate(createFind(a,s,"value"))}function createFind(a,s,u){var d=u==="index";return function(l,p){var h=0;l.subscribe(createOperatorSubscriber(p,function(y){var _=h++;a.call(s,y,_,l)&&(p.next(d?_:y),p.complete())},function(){p.next(d?-1:void 0),p.complete()}))}}function findIndex$1(a,s){return operate(createFind(a,s,"index"))}function first$1(a,s){var u=arguments.length>=2;return function(d){return d.pipe(a?filter$1(function(l,p){return a(l,p,d)}):identity$1,take$1(1),u?defaultIfEmpty$1(s):throwIfEmpty$1(function(){return new EmptyError$1}))}}function groupBy$1(a,s,u,d){return operate(function(l,p){var h;!s||typeof s=="function"?h=s:(u=s.duration,h=s.element,d=s.connector);var y=new Map,_=function(D){y.forEach(D),D(p)},E=function(D){return _(function(V){return V.error(D)})},I=0,N=!1,w=new OperatorSubscriber(p,function(D){try{var V=a(D),J=y.get(V);if(!J){y.set(V,J=d?d():new Subject$1);var W=C(V,J);if(p.next(W),u){var g=createOperatorSubscriber(J,function(){J.complete(),g==null||g.unsubscribe()},void 0,void 0,function(){return y.delete(V)});w.add(innerFrom(u(W)).subscribe(g))}}J.next(h?h(D):D)}catch(O){E(O)}},function(){return _(function(D){return D.complete()})},E,function(){return y.clear()},function(){return N=!0,I===0});l.subscribe(w);function C(D,V){var J=new Observable$1(function(W){I++;var g=V.subscribe(W);return function(){g.unsubscribe(),--I===0&&N&&w.unsubscribe()}});return J.key=D,J}})}function isEmpty$1(){return operate(function(a,s){a.subscribe(createOperatorSubscriber(s,function(){s.next(!1),s.complete()},function(){s.next(!0),s.complete()}))})}function takeLast$1(a){return a<=0?function(){return EMPTY$1}:operate(function(s,u){var d=[];s.subscribe(createOperatorSubscriber(u,function(l){d.push(l),a<d.length&&d.shift()},function(){var l,p;try{for(var h=__values(d),y=h.next();!y.done;y=h.next()){var _=y.value;u.next(_)}}catch(E){l={error:E}}finally{try{y&&!y.done&&(p=h.return)&&p.call(h)}finally{if(l)throw l.error}}u.complete()},void 0,function(){d=null}))})}function last$1(a,s){var u=arguments.length>=2;return function(d){return d.pipe(a?filter$1(function(l,p){return a(l,p,d)}):identity$1,takeLast$1(1),u?defaultIfEmpty$1(s):throwIfEmpty$1(function(){return new EmptyError$1}))}}function materialize$1(){return operate(function(a,s){a.subscribe(createOperatorSubscriber(s,function(u){s.next(Notification$1.createNext(u))},function(){s.next(Notification$1.createComplete()),s.complete()},function(u){s.next(Notification$1.createError(u)),s.complete()}))})}function max$1(a){return reduce$1(isFunction$2(a)?function(s,u){return a(s,u)>0?s:u}:function(s,u){return s>u?s:u})}function merge$3(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];var u=popScheduler(a),d=popNumber(a,1/0);return a=argsOrArgArray(a),operate(function(l,p){mergeAll$1(d)(from$1(__spreadArray([l],__read(a)),u)).subscribe(p)})}var flatMap$1=mergeMap$1;function mergeMapTo$1(a,s,u){return u===void 0&&(u=1/0),isFunction$2(s)?mergeMap$1(function(){return a},s,u):(typeof s=="number"&&(u=s),mergeMap$1(function(){return a},u))}function mergeScan$1(a,s,u){return u===void 0&&(u=1/0),operate(function(d,l){var p=s;return mergeInternals(d,l,function(h,y){return a(p,h,y)},u,function(h){p=h},!1,void 0,function(){return p=null})})}function mergeWith(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];return merge$3.apply(void 0,__spreadArray([],__read(a)))}function min$1(a){return reduce$1(isFunction$2(a)?function(s,u){return a(s,u)<0?s:u}:function(s,u){return s<u?s:u})}function refCount$1(){return operate(function(a,s){var u=null;a._refCount++;var d=createOperatorSubscriber(s,void 0,void 0,void 0,function(){if(!a||a._refCount<=0||0<--a._refCount){u=null;return}var l=a._connection,p=u;u=null,l&&(!p||l===p)&&l.unsubscribe(),s.unsubscribe()});a.subscribe(d),d.closed||(u=a.connect())})}var ConnectableObservable$1=function(a){__extends$1(s,a);function s(u,d){var l=a.call(this)||this;return l.source=u,l.subjectFactory=d,l._subject=null,l._refCount=0,l._connection=null,hasLift(u)&&(l.lift=u.lift),l}return s.prototype._subscribe=function(u){return this.getSubject().subscribe(u)},s.prototype.getSubject=function(){var u=this._subject;return(!u||u.isStopped)&&(this._subject=this.subjectFactory()),this._subject},s.prototype._teardown=function(){this._refCount=0;var u=this._connection;this._subject=this._connection=null,u==null||u.unsubscribe()},s.prototype.connect=function(){var u=this,d=this._connection;if(!d){d=this._connection=new Subscription$1;var l=this.getSubject();d.add(this.source.subscribe(createOperatorSubscriber(l,void 0,function(){u._teardown(),l.complete()},function(p){u._teardown(),l.error(p)},function(){return u._teardown()}))),d.closed&&(this._connection=null,d=Subscription$1.EMPTY)}return d},s.prototype.refCount=function(){return refCount$1()(this)},s}(Observable$1);function multicast$1(a,s){var u=isFunction$2(a)?a:function(){return a};return isFunction$2(s)?connect$1(s,{connector:u}):function(d){return new ConnectableObservable$1(d,u)}}function onErrorResumeNext$1(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];var u=argsOrArgArray(a);return operate(function(d,l){var p=__spreadArray([d],__read(u)),h=function(){if(!l.closed)if(p.length>0){var y=void 0;try{y=innerFrom(p.shift())}catch{h();return}var _=createOperatorSubscriber(l,void 0,noop$2,noop$2);y.subscribe(_),_.add(h)}else l.complete()};h()})}function pairwise$1(){return operate(function(a,s){var u,d=!1;a.subscribe(createOperatorSubscriber(s,function(l){var p=u;u=l,d&&s.next([p,l]),d=!0}))})}function not$1(a,s){return function(u,d){return!a.call(s,u,d)}}function partition$1(a,s){return function(u){return[filter$1(a,s)(u),filter$1(not$1(a,s))(u)]}}function pluck$1(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];var u=a.length;if(u===0)throw new Error("list of properties cannot be empty.");return map$1(function(d){for(var l=d,p=0;p<u;p++){var h=l==null?void 0:l[a[p]];if(typeof h!="undefined")l=h;else return}return l})}function publish$1(a){return a?function(s){return connect$1(a)(s)}:function(s){return multicast$1(new Subject$1)(s)}}var BehaviorSubject$1=function(a){__extends$1(s,a);function s(u){var d=a.call(this)||this;return d._value=u,d}return Object.defineProperty(s.prototype,"value",{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),s.prototype._subscribe=function(u){var d=a.prototype._subscribe.call(this,u);return!d.closed&&u.next(this._value),d},s.prototype.getValue=function(){var u=this,d=u.hasError,l=u.thrownError,p=u._value;if(d)throw l;return this._throwIfClosed(),p},s.prototype.next=function(u){a.prototype.next.call(this,this._value=u)},s}(Subject$1);function publishBehavior$1(a){return function(s){var u=new BehaviorSubject$1(a);return new ConnectableObservable$1(s,function(){return u})}}var AsyncSubject$1=function(a){__extends$1(s,a);function s(){var u=a!==null&&a.apply(this,arguments)||this;return u._value=null,u._hasValue=!1,u._isComplete=!1,u}return s.prototype._checkFinalizedStatuses=function(u){var d=this,l=d.hasError,p=d._hasValue,h=d._value,y=d.thrownError,_=d.isStopped,E=d._isComplete;l?u.error(y):(_||E)&&(p&&u.next(h),u.complete())},s.prototype.next=function(u){this.isStopped||(this._value=u,this._hasValue=!0)},s.prototype.complete=function(){var u=this,d=u._hasValue,l=u._value,p=u._isComplete;p||(this._isComplete=!0,d&&a.prototype.next.call(this,l),a.prototype.complete.call(this))},s}(Subject$1);function publishLast$1(){return function(a){var s=new AsyncSubject$1;return new ConnectableObservable$1(a,function(){return s})}}var ReplaySubject$1=function(a){__extends$1(s,a);function s(u,d,l){u===void 0&&(u=1/0),d===void 0&&(d=1/0),l===void 0&&(l=dateTimestampProvider);var p=a.call(this)||this;return p._bufferSize=u,p._windowTime=d,p._timestampProvider=l,p._buffer=[],p._infiniteTimeWindow=!0,p._infiniteTimeWindow=d===1/0,p._bufferSize=Math.max(1,u),p._windowTime=Math.max(1,d),p}return s.prototype.next=function(u){var d=this,l=d.isStopped,p=d._buffer,h=d._infiniteTimeWindow,y=d._timestampProvider,_=d._windowTime;l||(p.push(u),!h&&p.push(y.now()+_)),this._trimBuffer(),a.prototype.next.call(this,u)},s.prototype._subscribe=function(u){this._throwIfClosed(),this._trimBuffer();for(var d=this._innerSubscribe(u),l=this,p=l._infiniteTimeWindow,h=l._buffer,y=h.slice(),_=0;_<y.length&&!u.closed;_+=p?1:2)u.next(y[_]);return this._checkFinalizedStatuses(u),d},s.prototype._trimBuffer=function(){var u=this,d=u._bufferSize,l=u._timestampProvider,p=u._buffer,h=u._infiniteTimeWindow,y=(h?1:2)*d;if(d<1/0&&y<p.length&&p.splice(0,p.length-y),!h){for(var _=l.now(),E=0,I=1;I<p.length&&p[I]<=_;I+=2)E=I;E&&p.splice(0,E+1)}},s}(Subject$1);function publishReplay$1(a,s,u,d){u&&!isFunction$2(u)&&(d=u);var l=isFunction$2(u)?u:void 0;return function(p){return multicast$1(new ReplaySubject$1(a,s,d),l)(p)}}function raceInit(a){return function(s){for(var u=[],d=function(p){u.push(innerFrom(a[p]).subscribe(createOperatorSubscriber(s,function(h){if(u){for(var y=0;y<u.length;y++)y!==p&&u[y].unsubscribe();u=null}s.next(h)})))},l=0;u&&!s.closed&&l<a.length;l++)d(l)}}function raceWith(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];return a.length?operate(function(u,d){raceInit(__spreadArray([u],__read(a)))(d)}):identity$1}function race$2(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];return raceWith.apply(void 0,__spreadArray([],__read(argsOrArgArray(a))))}function repeat$1(a){var s,u=1/0,d;return a!=null&&(typeof a=="object"?(s=a.count,u=s===void 0?1/0:s,d=a.delay):u=a),u<=0?function(){return EMPTY$1}:operate(function(l,p){var h=0,y,_=function(){if(y==null||y.unsubscribe(),y=null,d!=null){var I=typeof d=="number"?timer$1(d):innerFrom(d(h)),N=createOperatorSubscriber(p,function(){N.unsubscribe(),E()});I.subscribe(N)}else E()},E=function(){var I=!1;y=l.subscribe(createOperatorSubscriber(p,void 0,function(){++h<u?y?_():I=!0:p.complete()})),I&&_()};E()})}function repeatWhen$1(a){return operate(function(s,u){var d,l=!1,p,h=!1,y=!1,_=function(){return y&&h&&(u.complete(),!0)},E=function(){return p||(p=new Subject$1,a(p).subscribe(createOperatorSubscriber(u,function(){d?I():l=!0},function(){h=!0,_()}))),p},I=function(){y=!1,d=s.subscribe(createOperatorSubscriber(u,void 0,function(){y=!0,!_()&&E().next()})),l&&(d.unsubscribe(),d=null,l=!1,I())};I()})}function retry$1(a){a===void 0&&(a=1/0);var s;a&&typeof a=="object"?s=a:s={count:a};var u=s.count,d=u===void 0?1/0:u,l=s.delay,p=s.resetOnSuccess,h=p===void 0?!1:p;return d<=0?identity$1:operate(function(y,_){var E=0,I,N=function(){var w=!1;I=y.subscribe(createOperatorSubscriber(_,function(C){h&&(E=0),_.next(C)},void 0,function(C){if(E++<d){var D=function(){I?(I.unsubscribe(),I=null,N()):w=!0};if(l!=null){var V=typeof l=="number"?timer$1(l):innerFrom(l(C,E)),J=createOperatorSubscriber(_,function(){J.unsubscribe(),D()},function(){_.complete()});V.subscribe(J)}else D()}else _.error(C)})),w&&(I.unsubscribe(),I=null,N())};N()})}function retryWhen$1(a){return operate(function(s,u){var d,l=!1,p,h=function(){d=s.subscribe(createOperatorSubscriber(u,void 0,void 0,function(y){p||(p=new Subject$1,a(p).subscribe(createOperatorSubscriber(u,function(){return d?h():l=!0}))),p&&p.next(y)})),l&&(d.unsubscribe(),d=null,l=!1,h())};h()})}function sample$1(a){return operate(function(s,u){var d=!1,l=null;s.subscribe(createOperatorSubscriber(u,function(p){d=!0,l=p})),a.subscribe(createOperatorSubscriber(u,function(){if(d){d=!1;var p=l;l=null,u.next(p)}},noop$2))})}function interval(a,s){return a===void 0&&(a=0),s===void 0&&(s=asyncScheduler$1),a<0&&(a=0),timer$1(a,a,s)}function sampleTime$1(a,s){return s===void 0&&(s=asyncScheduler$1),sample$1(interval(a,s))}function scan$1(a,s){return operate(scanInternals(a,s,arguments.length>=2,!0))}function sequenceEqual$1(a,s){return s===void 0&&(s=function(u,d){return u===d}),operate(function(u,d){var l=createState(),p=createState(),h=function(_){d.next(_),d.complete()},y=function(_,E){var I=createOperatorSubscriber(d,function(N){var w=E.buffer,C=E.complete;w.length===0?C?h(!1):_.buffer.push(N):!s(N,w.shift())&&h(!1)},function(){_.complete=!0;var N=E.complete,w=E.buffer;N&&h(w.length===0),I==null||I.unsubscribe()});return I};u.subscribe(y(l,p)),a.subscribe(y(p,l))})}function createState(){return{buffer:[],complete:!1}}function share$1(a){a===void 0&&(a={});var s=a.connector,u=s===void 0?function(){return new Subject$1}:s,d=a.resetOnError,l=d===void 0?!0:d,p=a.resetOnComplete,h=p===void 0?!0:p,y=a.resetOnRefCountZero,_=y===void 0?!0:y;return function(E){var I=null,N=null,w=null,C=0,D=!1,V=!1,J=function(){N==null||N.unsubscribe(),N=null},W=function(){J(),I=w=null,D=V=!1},g=function(){var O=I;W(),O==null||O.unsubscribe()};return operate(function(O,$){C++,!V&&!D&&J();var x=w=w!=null?w:u();$.add(function(){C--,C===0&&!V&&!D&&(N=handleReset(g,_))}),x.subscribe($),I||(I=new SafeSubscriber$1({next:function(Y){return x.next(Y)},error:function(Y){V=!0,J(),N=handleReset(W,l,Y),x.error(Y)},complete:function(){D=!0,J(),N=handleReset(W,h),x.complete()}}),from$1(O).subscribe(I))})(E)}}function handleReset(a,s){for(var u=[],d=2;d<arguments.length;d++)u[d-2]=arguments[d];return s===!0?(a(),null):s===!1?null:s.apply(void 0,__spreadArray([],__read(u))).pipe(take$1(1)).subscribe(function(){return a()})}function shareReplay$1(a,s,u){var d,l,p,h,y=!1;return a&&typeof a=="object"?(d=a.bufferSize,h=d===void 0?1/0:d,l=a.windowTime,s=l===void 0?1/0:l,p=a.refCount,y=p===void 0?!1:p,u=a.scheduler):h=a!=null?a:1/0,share$1({connector:function(){return new ReplaySubject$1(h,s,u)},resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:y})}var SequenceError=createErrorClass(function(a){return function(u){a(this),this.name="SequenceError",this.message=u}}),NotFoundError=createErrorClass(function(a){return function(u){a(this),this.name="NotFoundError",this.message=u}});function single$1(a){return operate(function(s,u){var d=!1,l,p=!1,h=0;s.subscribe(createOperatorSubscriber(u,function(y){p=!0,(!a||a(y,h++,s))&&(d&&u.error(new SequenceError("Too many matching values")),d=!0,l=y)},function(){d?(u.next(l),u.complete()):u.error(p?new NotFoundError("No matching values"):new EmptyError$1)}))})}function skip$1(a){return filter$1(function(s,u){return a<=u})}function skipLast$1(a){return a<=0?identity$1:operate(function(s,u){var d=new Array(a),l=0;return s.subscribe(createOperatorSubscriber(u,function(p){var h=l++;if(h<a)d[h]=p;else{var y=h%a,_=d[y];d[y]=p,u.next(_)}})),function(){d=null}})}function skipUntil$1(a){return operate(function(s,u){var d=!1,l=createOperatorSubscriber(u,function(){l==null||l.unsubscribe(),d=!0},noop$2);innerFrom(a).subscribe(l),s.subscribe(createOperatorSubscriber(u,function(p){return d&&u.next(p)}))})}function skipWhile$1(a){return operate(function(s,u){var d=!1,l=0;s.subscribe(createOperatorSubscriber(u,function(p){return(d||(d=!a(p,l++)))&&u.next(p)}))})}function startWith$1(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];var u=popScheduler(a);return operate(function(d,l){(u?concat$2(a,d,u):concat$2(a,d)).subscribe(l)})}function switchMap$1(a,s){return operate(function(u,d){var l=null,p=0,h=!1,y=function(){return h&&!l&&d.complete()};u.subscribe(createOperatorSubscriber(d,function(_){l==null||l.unsubscribe();var E=0,I=p++;innerFrom(a(_,I)).subscribe(l=createOperatorSubscriber(d,function(N){return d.next(s?s(_,N,I,E++):N)},function(){l=null,y()}))},function(){h=!0,y()}))})}function switchAll$1(){return switchMap$1(identity$1)}function switchMapTo$1(a,s){return isFunction$2(s)?switchMap$1(function(){return a},s):switchMap$1(function(){return a})}function switchScan(a,s){return operate(function(u,d){var l=s;return switchMap$1(function(p,h){return a(l,p,h)},function(p,h){return l=h,h})(u).subscribe(d),function(){l=null}})}function takeUntil$1(a){return operate(function(s,u){innerFrom(a).subscribe(createOperatorSubscriber(u,function(){return u.complete()},noop$2)),!u.closed&&s.subscribe(u)})}function takeWhile$1(a,s){return s===void 0&&(s=!1),operate(function(u,d){var l=0;u.subscribe(createOperatorSubscriber(d,function(p){var h=a(p,l++);(h||s)&&d.next(p),!h&&d.complete()}))})}function tap$1(a,s,u){var d=isFunction$2(a)||s||u?{next:a,error:s,complete:u}:a;return d?operate(function(l,p){var h;(h=d.subscribe)===null||h===void 0||h.call(d);var y=!0;l.subscribe(createOperatorSubscriber(p,function(_){var E;(E=d.next)===null||E===void 0||E.call(d,_),p.next(_)},function(){var _;y=!1,(_=d.complete)===null||_===void 0||_.call(d),p.complete()},function(_){var E;y=!1,(E=d.error)===null||E===void 0||E.call(d,_),p.error(_)},function(){var _,E;y&&((_=d.unsubscribe)===null||_===void 0||_.call(d)),(E=d.finalize)===null||E===void 0||E.call(d)}))}):identity$1}var defaultThrottleConfig$1={leading:!0,trailing:!1};function throttle$1(a,s){return s===void 0&&(s=defaultThrottleConfig$1),operate(function(u,d){var l=s.leading,p=s.trailing,h=!1,y=null,_=null,E=!1,I=function(){_==null||_.unsubscribe(),_=null,p&&(C(),E&&d.complete())},N=function(){_=null,E&&d.complete()},w=function(D){return _=innerFrom(a(D)).subscribe(createOperatorSubscriber(d,I,N))},C=function(){if(h){h=!1;var D=y;y=null,d.next(D),!E&&w(D)}};u.subscribe(createOperatorSubscriber(d,function(D){h=!0,y=D,!(_&&!_.closed)&&(l?C():w(D))},function(){E=!0,!(p&&h&&_&&!_.closed)&&d.complete()}))})}function throttleTime$1(a,s,u){s===void 0&&(s=asyncScheduler$1),u===void 0&&(u=defaultThrottleConfig$1);var d=timer$1(a,s);return throttle$1(function(){return d},u)}function timeInterval$1(a){return a===void 0&&(a=asyncScheduler$1),operate(function(s,u){var d=a.now();s.subscribe(createOperatorSubscriber(u,function(l){var p=a.now(),h=p-d;d=p,u.next(new TimeInterval$1(l,h))}))})}var TimeInterval$1=function(){function a(s,u){this.value=s,this.interval=u}return a}(),TimeoutError$1=createErrorClass(function(a){return function(u){u===void 0&&(u=null),a(this),this.message="Timeout has occurred",this.name="TimeoutError",this.info=u}});function timeout$1(a,s){var u=isValidDate(a)?{first:a}:typeof a=="number"?{each:a}:a,d=u.first,l=u.each,p=u.with,h=p===void 0?timeoutErrorFactory:p,y=u.scheduler,_=y===void 0?s!=null?s:asyncScheduler$1:y,E=u.meta,I=E===void 0?null:E;if(d==null&&l==null)throw new TypeError("No timeout provided.");return operate(function(N,w){var C,D,V=null,J=0,W=function(g){D=executeSchedule(w,_,function(){try{C.unsubscribe(),innerFrom(h({meta:I,lastValue:V,seen:J})).subscribe(w)}catch(O){w.error(O)}},g)};C=N.subscribe(createOperatorSubscriber(w,function(g){D==null||D.unsubscribe(),J++,w.next(V=g),l>0&&W(l)},void 0,void 0,function(){D!=null&&D.closed||D==null||D.unsubscribe(),V=null})),!J&&W(d!=null?typeof d=="number"?d:+d-_.now():l)})}function timeoutErrorFactory(a){throw new TimeoutError$1(a)}function timeoutWith$1(a,s,u){var d,l,p;if(u=u!=null?u:async$1,isValidDate(a)?d=a:typeof a=="number"&&(l=a),s)p=function(){return s};else throw new TypeError("No observable provided to switch to");if(d==null&&l==null)throw new TypeError("No timeout provided.");return timeout$1({first:d,each:l,scheduler:u,with:p})}function timestamp$2(a){return a===void 0&&(a=dateTimestampProvider),map$1(function(s){return{value:s,timestamp:a.now()}})}function window$2(a){return operate(function(s,u){var d=new Subject$1;u.next(d.asObservable());var l=function(p){d.error(p),u.error(p)};return s.subscribe(createOperatorSubscriber(u,function(p){return d==null?void 0:d.next(p)},function(){d.complete(),u.complete()},l)),a.subscribe(createOperatorSubscriber(u,function(){d.complete(),u.next(d=new Subject$1)},noop$2,l)),function(){d==null||d.unsubscribe(),d=null}})}function windowCount$1(a,s){s===void 0&&(s=0);var u=s>0?s:a;return operate(function(d,l){var p=[new Subject$1],h=[],y=0;l.next(p[0].asObservable()),d.subscribe(createOperatorSubscriber(l,function(_){var E,I;try{for(var N=__values(p),w=N.next();!w.done;w=N.next()){var C=w.value;C.next(_)}}catch(J){E={error:J}}finally{try{w&&!w.done&&(I=N.return)&&I.call(N)}finally{if(E)throw E.error}}var D=y-a+1;if(D>=0&&D%u===0&&p.shift().complete(),++y%u===0){var V=new Subject$1;p.push(V),l.next(V.asObservable())}},function(){for(;p.length>0;)p.shift().complete();l.complete()},function(_){for(;p.length>0;)p.shift().error(_);l.error(_)},function(){h=null,p=null}))})}function windowTime$1(a){for(var s,u,d=[],l=1;l<arguments.length;l++)d[l-1]=arguments[l];var p=(s=popScheduler(d))!==null&&s!==void 0?s:asyncScheduler$1,h=(u=d[0])!==null&&u!==void 0?u:null,y=d[1]||1/0;return operate(function(_,E){var I=[],N=!1,w=function(J){var W=J.window,g=J.subs;W.complete(),g.unsubscribe(),arrRemove(I,J),N&&C()},C=function(){if(I){var J=new Subscription$1;E.add(J);var W=new Subject$1,g={window:W,subs:J,seen:0};I.push(g),E.next(W.asObservable()),executeSchedule(J,p,function(){return w(g)},a)}};h!==null&&h>=0?executeSchedule(E,p,C,h,!0):N=!0,C();var D=function(J){return I.slice().forEach(J)},V=function(J){D(function(W){var g=W.window;return J(g)}),J(E),E.unsubscribe()};return _.subscribe(createOperatorSubscriber(E,function(J){D(function(W){W.window.next(J),y<=++W.seen&&w(W)})},function(){return V(function(J){return J.complete()})},function(J){return V(function(W){return W.error(J)})})),function(){I=null}})}function windowToggle$1(a,s){return operate(function(u,d){var l=[],p=function(h){for(;0<l.length;)l.shift().error(h);d.error(h)};innerFrom(a).subscribe(createOperatorSubscriber(d,function(h){var y=new Subject$1;l.push(y);var _=new Subscription$1,E=function(){arrRemove(l,y),y.complete(),_.unsubscribe()},I;try{I=innerFrom(s(h))}catch(N){p(N);return}d.next(y.asObservable()),_.add(I.subscribe(createOperatorSubscriber(d,E,noop$2,p)))},noop$2)),u.subscribe(createOperatorSubscriber(d,function(h){var y,_,E=l.slice();try{for(var I=__values(E),N=I.next();!N.done;N=I.next()){var w=N.value;w.next(h)}}catch(C){y={error:C}}finally{try{N&&!N.done&&(_=I.return)&&_.call(I)}finally{if(y)throw y.error}}},function(){for(;0<l.length;)l.shift().complete();d.complete()},p,function(){for(;0<l.length;)l.shift().unsubscribe()}))})}function windowWhen$1(a){return operate(function(s,u){var d,l,p=function(y){d.error(y),u.error(y)},h=function(){l==null||l.unsubscribe(),d==null||d.complete(),d=new Subject$1,u.next(d.asObservable());var y;try{y=innerFrom(a())}catch(_){p(_);return}y.subscribe(l=createOperatorSubscriber(u,h,h,p))};h(),s.subscribe(createOperatorSubscriber(u,function(y){return d.next(y)},function(){d.complete(),u.complete()},p,function(){l==null||l.unsubscribe(),d=null}))})}function withLatestFrom$1(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];var u=popResultSelector(a);return operate(function(d,l){for(var p=a.length,h=new Array(p),y=a.map(function(){return!1}),_=!1,E=function(N){innerFrom(a[N]).subscribe(createOperatorSubscriber(l,function(w){h[N]=w,!_&&!y[N]&&(y[N]=!0,(_=y.every(identity$1))&&(y=null))},noop$2))},I=0;I<p;I++)E(I);d.subscribe(createOperatorSubscriber(l,function(N){if(_){var w=__spreadArray([N],__read(h));l.next(u?u.apply(void 0,__spreadArray([],__read(w))):w)}}))})}function zip$3(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];var u=popResultSelector(a),d=argsOrArgArray(a);return d.length?new Observable$1(function(l){var p=d.map(function(){return[]}),h=d.map(function(){return!1});l.add(function(){p=h=null});for(var y=function(E){innerFrom(d[E]).subscribe(createOperatorSubscriber(l,function(I){if(p[E].push(I),p.every(function(w){return w.length})){var N=p.map(function(w){return w.shift()});l.next(u?u.apply(void 0,__spreadArray([],__read(N))):N),p.some(function(w,C){return!w.length&&h[C]})&&l.complete()}},function(){h[E]=!0,!p[E].length&&l.complete()}))},_=0;!l.closed&&_<d.length;_++)y(_);return function(){p=h=null}}):EMPTY$1}function zip$2(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];return operate(function(u,d){zip$3.apply(void 0,__spreadArray([u],__read(a))).subscribe(d)})}function zipAll$1(a){return joinAllInternals(zip$3,a)}function zipWith(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];return zip$2.apply(void 0,__spreadArray([],__read(a)))}var operators$1=Object.freeze(Object.defineProperty({__proto__:null,audit:audit$1,auditTime:auditTime$1,buffer:buffer$1,bufferCount:bufferCount$1,bufferTime:bufferTime$1,bufferToggle:bufferToggle$1,bufferWhen:bufferWhen$1,catchError:catchError$1,combineAll:combineAll$1,combineLatestAll,combineLatest:combineLatest$1,combineLatestWith,concat:concat$3,concatAll:concatAll$1,concatMap:concatMap$1,concatMapTo:concatMapTo$1,concatWith,connect:connect$1,count:count$1,debounce:debounce$1,debounceTime:debounceTime$1,defaultIfEmpty:defaultIfEmpty$1,delay:delay$1,delayWhen:delayWhen$1,dematerialize:dematerialize$1,distinct:distinct$1,distinctUntilChanged:distinctUntilChanged$1,distinctUntilKeyChanged:distinctUntilKeyChanged$1,elementAt:elementAt$1,endWith:endWith$1,every:every$1,exhaust:exhaust$1,exhaustAll,exhaustMap:exhaustMap$1,expand:expand$1,filter:filter$1,finalize:finalize$1,find:find$2,findIndex:findIndex$1,first:first$1,groupBy:groupBy$1,ignoreElements:ignoreElements$1,isEmpty:isEmpty$1,last:last$1,map:map$1,mapTo:mapTo$1,materialize:materialize$1,max:max$1,merge:merge$3,mergeAll:mergeAll$1,flatMap:flatMap$1,mergeMap:mergeMap$1,mergeMapTo:mergeMapTo$1,mergeScan:mergeScan$1,mergeWith,min:min$1,multicast:multicast$1,observeOn:observeOn$1,onErrorResumeNext:onErrorResumeNext$1,pairwise:pairwise$1,partition:partition$1,pluck:pluck$1,publish:publish$1,publishBehavior:publishBehavior$1,publishLast:publishLast$1,publishReplay:publishReplay$1,race:race$2,raceWith,reduce:reduce$1,repeat:repeat$1,repeatWhen:repeatWhen$1,retry:retry$1,retryWhen:retryWhen$1,refCount:refCount$1,sample:sample$1,sampleTime:sampleTime$1,scan:scan$1,sequenceEqual:sequenceEqual$1,share:share$1,shareReplay:shareReplay$1,single:single$1,skip:skip$1,skipLast:skipLast$1,skipUntil:skipUntil$1,skipWhile:skipWhile$1,startWith:startWith$1,subscribeOn:subscribeOn$1,switchAll:switchAll$1,switchMap:switchMap$1,switchMapTo:switchMapTo$1,switchScan,take:take$1,takeLast:takeLast$1,takeUntil:takeUntil$1,takeWhile:takeWhile$1,tap:tap$1,throttle:throttle$1,throttleTime:throttleTime$1,throwIfEmpty:throwIfEmpty$1,timeInterval:timeInterval$1,timeout:timeout$1,timeoutWith:timeoutWith$1,timestamp:timestamp$2,toArray:toArray$1,window:window$2,windowCount:windowCount$1,windowTime:windowTime$1,windowToggle:windowToggle$1,windowWhen:windowWhen$1,withLatestFrom:withLatestFrom$1,zip:zip$2,zipAll:zipAll$1,zipWith},Symbol.toStringTag,{value:"Module"})),require$$2$1=getAugmentedNamespace(operators$1),struct$2={};(function(a){var s=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(g,O,$,x){x===void 0&&(x=$),Object.defineProperty(g,x,{enumerable:!0,get:function(){return O[$]}})}:function(g,O,$,x){x===void 0&&(x=$),g[x]=O[$]}),u=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(g,O){Object.defineProperty(g,"default",{enumerable:!0,value:O})}:function(g,O){g.default=O}),d=commonjsGlobal&&commonjsGlobal.__importStar||function(g){if(g&&g.__esModule)return g;var O={};if(g!=null)for(var $ in g)$!=="default"&&Object.hasOwnProperty.call(g,$)&&s(O,g,$);return u(O,g),O},l=commonjsGlobal&&commonjsGlobal.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(a,"__esModule",{value:!0}),a.ListValue=a.Value=a.Struct_FieldsEntry=a.Struct=a.nullValueToNumber=a.nullValueToJSON=a.nullValueFromJSON=a.NullValue=a.protobufPackage=void 0;const p=l(long),h=d(minimal$2);a.protobufPackage="google.protobuf";var y;(function(g){g.NULL_VALUE="NULL_VALUE"})(y=a.NullValue||(a.NullValue={}));function _(g){switch(g){case 0:case"NULL_VALUE":return y.NULL_VALUE;default:throw new V.Error("Unrecognized enum value "+g+" for enum NullValue")}}a.nullValueFromJSON=_;function E(g){switch(g){case y.NULL_VALUE:return"NULL_VALUE";default:return"UNKNOWN"}}a.nullValueToJSON=E;function I(g){switch(g){case y.NULL_VALUE:return 0;default:return 0}}a.nullValueToNumber=I;function N(){return{fields:{}}}a.Struct={encode(g,O=h.Writer.create()){return Object.entries(g.fields).forEach(([$,x])=>{x!==void 0&&a.Struct_FieldsEntry.encode({key:$,value:x},O.uint32(10).fork()).ldelim()}),O},decode(g,O){const $=g instanceof h.Reader?g:new h.Reader(g);let x=O===void 0?$.len:$.pos+O;const Y=N();for(;$.pos<x;){const te=$.uint32();switch(te>>>3){case 1:const ne=a.Struct_FieldsEntry.decode($,$.uint32());ne.value!==void 0&&(Y.fields[ne.key]=ne.value);break;default:$.skipType(te&7);break}}return Y},fromJSON(g){return{fields:J(g.fields)?Object.entries(g.fields).reduce((O,[$,x])=>(O[$]=x,O),{}):{}}},toJSON(g){const O={};return O.fields={},g.fields&&Object.entries(g.fields).forEach(([$,x])=>{O.fields[$]=x}),O},fromPartial(g){var O;const $=N();return $.fields=Object.entries((O=g.fields)!==null&&O!==void 0?O:{}).reduce((x,[Y,te])=>(te!==void 0&&(x[Y]=te),x),{}),$},wrap(g){const O=N();return g!==void 0&&Object.keys(g).forEach($=>{O.fields[$]=g[$]}),O},unwrap(g){const O={};return Object.keys(g.fields).forEach($=>{O[$]=g.fields[$]}),O}};function w(){return{key:"",value:void 0}}a.Struct_FieldsEntry={encode(g,O=h.Writer.create()){return g.key!==""&&O.uint32(10).string(g.key),g.value!==void 0&&a.Value.encode(a.Value.wrap(g.value),O.uint32(18).fork()).ldelim(),O},decode(g,O){const $=g instanceof h.Reader?g:new h.Reader(g);let x=O===void 0?$.len:$.pos+O;const Y=w();for(;$.pos<x;){const te=$.uint32();switch(te>>>3){case 1:Y.key=$.string();break;case 2:Y.value=a.Value.unwrap(a.Value.decode($,$.uint32()));break;default:$.skipType(te&7);break}}return Y},fromJSON(g){return{key:W(g.key)?String(g.key):"",value:W(g==null?void 0:g.value)?g.value:void 0}},toJSON(g){const O={};return g.key!==void 0&&(O.key=g.key),g.value!==void 0&&(O.value=g.value),O},fromPartial(g){var O,$;const x=w();return x.key=(O=g.key)!==null&&O!==void 0?O:"",x.value=($=g.value)!==null&&$!==void 0?$:void 0,x}};function C(){return{nullValue:void 0,numberValue:void 0,stringValue:void 0,boolValue:void 0,structValue:void 0,listValue:void 0}}a.Value={encode(g,O=h.Writer.create()){return g.nullValue!==void 0&&O.uint32(8).int32(I(g.nullValue)),g.numberValue!==void 0&&O.uint32(17).double(g.numberValue),g.stringValue!==void 0&&O.uint32(26).string(g.stringValue),g.boolValue!==void 0&&O.uint32(32).bool(g.boolValue),g.structValue!==void 0&&a.Struct.encode(a.Struct.wrap(g.structValue),O.uint32(42).fork()).ldelim(),g.listValue!==void 0&&a.ListValue.encode(a.ListValue.wrap(g.listValue),O.uint32(50).fork()).ldelim(),O},decode(g,O){const $=g instanceof h.Reader?g:new h.Reader(g);let x=O===void 0?$.len:$.pos+O;const Y=C();for(;$.pos<x;){const te=$.uint32();switch(te>>>3){case 1:Y.nullValue=_($.int32());break;case 2:Y.numberValue=$.double();break;case 3:Y.stringValue=$.string();break;case 4:Y.boolValue=$.bool();break;case 5:Y.structValue=a.Struct.unwrap(a.Struct.decode($,$.uint32()));break;case 6:Y.listValue=a.ListValue.unwrap(a.ListValue.decode($,$.uint32()));break;default:$.skipType(te&7);break}}return Y},fromJSON(g){return{nullValue:W(g.nullValue)?_(g.nullValue):void 0,numberValue:W(g.numberValue)?Number(g.numberValue):void 0,stringValue:W(g.stringValue)?String(g.stringValue):void 0,boolValue:W(g.boolValue)?Boolean(g.boolValue):void 0,structValue:J(g.structValue)?g.structValue:void 0,listValue:Array.isArray(g.listValue)?[...g.listValue]:void 0}},toJSON(g){const O={};return g.nullValue!==void 0&&(O.nullValue=g.nullValue!==void 0?E(g.nullValue):void 0),g.numberValue!==void 0&&(O.numberValue=g.numberValue),g.stringValue!==void 0&&(O.stringValue=g.stringValue),g.boolValue!==void 0&&(O.boolValue=g.boolValue),g.structValue!==void 0&&(O.structValue=g.structValue),g.listValue!==void 0&&(O.listValue=g.listValue),O},fromPartial(g){var O,$,x,Y,te,ne;const F=C();return F.nullValue=(O=g.nullValue)!==null&&O!==void 0?O:void 0,F.numberValue=($=g.numberValue)!==null&&$!==void 0?$:void 0,F.stringValue=(x=g.stringValue)!==null&&x!==void 0?x:void 0,F.boolValue=(Y=g.boolValue)!==null&&Y!==void 0?Y:void 0,F.structValue=(te=g.structValue)!==null&&te!==void 0?te:void 0,F.listValue=(ne=g.listValue)!==null&&ne!==void 0?ne:void 0,F},wrap(g){const O=C();if(g===null)O.nullValue=y.NULL_VALUE;else if(typeof g=="boolean")O.boolValue=g;else if(typeof g=="number")O.numberValue=g;else if(typeof g=="string")O.stringValue=g;else if(Array.isArray(g))O.listValue=g;else if(typeof g=="object")O.structValue=g;else if(typeof g!="undefined")throw new Error("Unsupported any value type: "+typeof g);return O},unwrap(g){if((g==null?void 0:g.stringValue)!==void 0)return g.stringValue;if((g==null?void 0:g.numberValue)!==void 0)return g.numberValue;if((g==null?void 0:g.boolValue)!==void 0)return g.boolValue;if((g==null?void 0:g.structValue)!==void 0)return g.structValue;if((g==null?void 0:g.listValue)!==void 0)return g.listValue;if((g==null?void 0:g.nullValue)!==void 0)return null}};function D(){return{values:[]}}a.ListValue={encode(g,O=h.Writer.create()){for(const $ of g.values)a.Value.encode(a.Value.wrap($),O.uint32(10).fork()).ldelim();return O},decode(g,O){const $=g instanceof h.Reader?g:new h.Reader(g);let x=O===void 0?$.len:$.pos+O;const Y=D();for(;$.pos<x;){const te=$.uint32();switch(te>>>3){case 1:Y.values.push(a.Value.unwrap(a.Value.decode($,$.uint32())));break;default:$.skipType(te&7);break}}return Y},fromJSON(g){return{values:Array.isArray(g==null?void 0:g.values)?[...g.values]:[]}},toJSON(g){const O={};return g.values?O.values=g.values.map($=>$):O.values=[],O},fromPartial(g){var O;const $=D();return $.values=((O=g.values)===null||O===void 0?void 0:O.map(x=>x))||[],$},wrap(g){const O=D();return O.values=g!=null?g:[],O},unwrap(g){return g.values}};var V=(()=>{if(typeof V!="undefined")return V;if(typeof self!="undefined")return self;if(typeof window!="undefined")return window;if(typeof commonjsGlobal!="undefined")return commonjsGlobal;throw"Unable to locate global object"})();h.util.Long!==p.default&&(h.util.Long=p.default,h.configure());function J(g){return typeof g=="object"&&g!==null}function W(g){return g!=null}})(struct$2),function(a){var s=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(b,A,B,ie){ie===void 0&&(ie=B),Object.defineProperty(b,ie,{enumerable:!0,get:function(){return A[B]}})}:function(b,A,B,ie){ie===void 0&&(ie=B),b[ie]=A[B]}),u=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(b,A){Object.defineProperty(b,"default",{enumerable:!0,value:A})}:function(b,A){b.default=A}),d=commonjsGlobal&&commonjsGlobal.__importStar||function(b){if(b&&b.__esModule)return b;var A={};if(b!=null)for(var B in b)B!=="default"&&Object.hasOwnProperty.call(b,B)&&s(A,b,B);return u(A,b),A},l=commonjsGlobal&&commonjsGlobal.__importDefault||function(b){return b&&b.__esModule?b:{default:b}};Object.defineProperty(a,"__esModule",{value:!0}),a.LayoutServiceDefinition=a.LayoutServiceClientImpl=a.LayerServiceDefinition=a.LayerServiceClientImpl=a.EventsServiceDefinition=a.EventsServiceClientImpl=a.EventsStreamResponse=a.EventsStreamReconnectRequest=a.EventsStreamError=a.EventsStreamRequest=a.SubscribePayload=a.Event=a.LayerEvent=a.LayoutEvent=a.BatchLayerRequest_BatchItem=a.BatchLayerRequest=a.BatchDeleteLayerRequest=a.DeleteLayerRequest=a.DeleteLayerPayload=a.UpdateLayerRequest=a.GetLayerRequest=a.CreateLayerRequest=a.ListLayersResponse=a.ListLayersRequest=a.PartialLayerWithID=a.PartialLayer=a.LayerAnimation=a.DeleteLayoutResponse=a.DeleteLayoutRequest=a.DeleteLayoutPayload=a.UpdateLayoutRequest=a.GetLayoutRequest=a.CreateLayoutRequest=a.ListLayoutsResponse=a.ListLayoutsRequest=a.PartialLayout=a.PublishEventResponse=a.PublishEventRequest=a.EventTarget=a.BatchLayerResponse_BatchLayerItem=a.BatchLayerResponse=a.DeleteLayerResponse=a.Layer=a.Layout=a.eventsStreamMessageTypeToNumber=a.eventsStreamMessageTypeToJSON=a.eventsStreamMessageTypeFromJSON=a.EventsStreamMessageType=a.eventTypeToNumber=a.eventTypeToJSON=a.eventTypeFromJSON=a.EventType=a.eventSubTypeToNumber=a.eventSubTypeToJSON=a.eventSubTypeFromJSON=a.EventSubType=a.layoutTypeToNumber=a.layoutTypeToJSON=a.layoutTypeFromJSON=a.LayoutType=a.protobufPackage=void 0;const p=l(long),h=d(minimal$2),y=require$$2$1,_=struct$2;a.protobufPackage="apis.layout.v2";var E;(function(b){b.LAYOUT_TYPE_UNSPECIFIED="LAYOUT_TYPE_UNSPECIFIED",b.LAYOUT_TYPE_SCENELESS="LAYOUT_TYPE_SCENELESS",b.LAYOUT_TYPE_SCENE="LAYOUT_TYPE_SCENE"})(E=a.LayoutType||(a.LayoutType={}));function I(b){switch(b){case 0:case"LAYOUT_TYPE_UNSPECIFIED":return E.LAYOUT_TYPE_UNSPECIFIED;case 1:case"LAYOUT_TYPE_SCENELESS":return E.LAYOUT_TYPE_SCENELESS;case 2:case"LAYOUT_TYPE_SCENE":return E.LAYOUT_TYPE_SCENE;default:throw new ke.Error("Unrecognized enum value "+b+" for enum LayoutType")}}a.layoutTypeFromJSON=I;function N(b){switch(b){case E.LAYOUT_TYPE_UNSPECIFIED:return"LAYOUT_TYPE_UNSPECIFIED";case E.LAYOUT_TYPE_SCENELESS:return"LAYOUT_TYPE_SCENELESS";case E.LAYOUT_TYPE_SCENE:return"LAYOUT_TYPE_SCENE";default:return"UNKNOWN"}}a.layoutTypeToJSON=N;function w(b){switch(b){case E.LAYOUT_TYPE_UNSPECIFIED:return 0;case E.LAYOUT_TYPE_SCENELESS:return 1;case E.LAYOUT_TYPE_SCENE:return 2;default:return 0}}a.layoutTypeToNumber=w;var C;(function(b){b.EVENT_SUB_TYPE_UNSPECIFIED="EVENT_SUB_TYPE_UNSPECIFIED",b.EVENT_SUB_TYPE_CREATE="EVENT_SUB_TYPE_CREATE",b.EVENT_SUB_TYPE_UPDATE="EVENT_SUB_TYPE_UPDATE",b.EVENT_SUB_TYPE_DELETE="EVENT_SUB_TYPE_DELETE",b.EVENT_SUB_TYPE_BATCH="EVENT_SUB_TYPE_BATCH"})(C=a.EventSubType||(a.EventSubType={}));function D(b){switch(b){case 0:case"EVENT_SUB_TYPE_UNSPECIFIED":return C.EVENT_SUB_TYPE_UNSPECIFIED;case 1:case"EVENT_SUB_TYPE_CREATE":return C.EVENT_SUB_TYPE_CREATE;case 2:case"EVENT_SUB_TYPE_UPDATE":return C.EVENT_SUB_TYPE_UPDATE;case 3:case"EVENT_SUB_TYPE_DELETE":return C.EVENT_SUB_TYPE_DELETE;case 4:case"EVENT_SUB_TYPE_BATCH":return C.EVENT_SUB_TYPE_BATCH;default:throw new ke.Error("Unrecognized enum value "+b+" for enum EventSubType")}}a.eventSubTypeFromJSON=D;function V(b){switch(b){case C.EVENT_SUB_TYPE_UNSPECIFIED:return"EVENT_SUB_TYPE_UNSPECIFIED";case C.EVENT_SUB_TYPE_CREATE:return"EVENT_SUB_TYPE_CREATE";case C.EVENT_SUB_TYPE_UPDATE:return"EVENT_SUB_TYPE_UPDATE";case C.EVENT_SUB_TYPE_DELETE:return"EVENT_SUB_TYPE_DELETE";case C.EVENT_SUB_TYPE_BATCH:return"EVENT_SUB_TYPE_BATCH";default:return"UNKNOWN"}}a.eventSubTypeToJSON=V;function J(b){switch(b){case C.EVENT_SUB_TYPE_UNSPECIFIED:return 0;case C.EVENT_SUB_TYPE_CREATE:return 1;case C.EVENT_SUB_TYPE_UPDATE:return 2;case C.EVENT_SUB_TYPE_DELETE:return 3;case C.EVENT_SUB_TYPE_BATCH:return 4;default:return 0}}a.eventSubTypeToNumber=J;var W;(function(b){b.EVENT_TYPE_UNSPECIFIED="EVENT_TYPE_UNSPECIFIED",b.EVENT_TYPE_LAYOUT="EVENT_TYPE_LAYOUT",b.EVENT_TYPE_LAYER="EVENT_TYPE_LAYER"})(W=a.EventType||(a.EventType={}));function g(b){switch(b){case 0:case"EVENT_TYPE_UNSPECIFIED":return W.EVENT_TYPE_UNSPECIFIED;case 1:case"EVENT_TYPE_LAYOUT":return W.EVENT_TYPE_LAYOUT;case 2:case"EVENT_TYPE_LAYER":return W.EVENT_TYPE_LAYER;default:throw new ke.Error("Unrecognized enum value "+b+" for enum EventType")}}a.eventTypeFromJSON=g;function O(b){switch(b){case W.EVENT_TYPE_UNSPECIFIED:return"EVENT_TYPE_UNSPECIFIED";case W.EVENT_TYPE_LAYOUT:return"EVENT_TYPE_LAYOUT";case W.EVENT_TYPE_LAYER:return"EVENT_TYPE_LAYER";default:return"UNKNOWN"}}a.eventTypeToJSON=O;function $(b){switch(b){case W.EVENT_TYPE_UNSPECIFIED:return 0;case W.EVENT_TYPE_LAYOUT:return 1;case W.EVENT_TYPE_LAYER:return 2;default:return 0}}a.eventTypeToNumber=$;var x;(function(b){b.EVENTS_STREAM_MESSAGE_TYPE_UNSPECIFIED="EVENTS_STREAM_MESSAGE_TYPE_UNSPECIFIED",b.EVENTS_STREAM_MESSAGE_TYPE_PING="EVENTS_STREAM_MESSAGE_TYPE_PING",b.EVENTS_STREAM_MESSAGE_TYPE_ERROR="EVENTS_STREAM_MESSAGE_TYPE_ERROR",b.EVENTS_STREAM_MESSAGE_TYPE_SUBSCRIBED="EVENTS_STREAM_MESSAGE_TYPE_SUBSCRIBED",b.EVENTS_STREAM_MESSAGE_TYPE_UNSUBSCRIBED="EVENTS_STREAM_MESSAGE_TYPE_UNSUBSCRIBED",b.EVENTS_STREAM_MESSAGE_TYPE_PUBLISHED="EVENTS_STREAM_MESSAGE_TYPE_PUBLISHED"})(x=a.EventsStreamMessageType||(a.EventsStreamMessageType={}));function Y(b){switch(b){case 0:case"EVENTS_STREAM_MESSAGE_TYPE_UNSPECIFIED":return x.EVENTS_STREAM_MESSAGE_TYPE_UNSPECIFIED;case 1:case"EVENTS_STREAM_MESSAGE_TYPE_PING":return x.EVENTS_STREAM_MESSAGE_TYPE_PING;case 2:case"EVENTS_STREAM_MESSAGE_TYPE_ERROR":return x.EVENTS_STREAM_MESSAGE_TYPE_ERROR;case 3:case"EVENTS_STREAM_MESSAGE_TYPE_SUBSCRIBED":return x.EVENTS_STREAM_MESSAGE_TYPE_SUBSCRIBED;case 4:case"EVENTS_STREAM_MESSAGE_TYPE_UNSUBSCRIBED":return x.EVENTS_STREAM_MESSAGE_TYPE_UNSUBSCRIBED;case 5:case"EVENTS_STREAM_MESSAGE_TYPE_PUBLISHED":return x.EVENTS_STREAM_MESSAGE_TYPE_PUBLISHED;default:throw new ke.Error("Unrecognized enum value "+b+" for enum EventsStreamMessageType")}}a.eventsStreamMessageTypeFromJSON=Y;function te(b){switch(b){case x.EVENTS_STREAM_MESSAGE_TYPE_UNSPECIFIED:return"EVENTS_STREAM_MESSAGE_TYPE_UNSPECIFIED";case x.EVENTS_STREAM_MESSAGE_TYPE_PING:return"EVENTS_STREAM_MESSAGE_TYPE_PING";case x.EVENTS_STREAM_MESSAGE_TYPE_ERROR:return"EVENTS_STREAM_MESSAGE_TYPE_ERROR";case x.EVENTS_STREAM_MESSAGE_TYPE_SUBSCRIBED:return"EVENTS_STREAM_MESSAGE_TYPE_SUBSCRIBED";case x.EVENTS_STREAM_MESSAGE_TYPE_UNSUBSCRIBED:return"EVENTS_STREAM_MESSAGE_TYPE_UNSUBSCRIBED";case x.EVENTS_STREAM_MESSAGE_TYPE_PUBLISHED:return"EVENTS_STREAM_MESSAGE_TYPE_PUBLISHED";default:return"UNKNOWN"}}a.eventsStreamMessageTypeToJSON=te;function ne(b){switch(b){case x.EVENTS_STREAM_MESSAGE_TYPE_UNSPECIFIED:return 0;case x.EVENTS_STREAM_MESSAGE_TYPE_PING:return 1;case x.EVENTS_STREAM_MESSAGE_TYPE_ERROR:return 2;case x.EVENTS_STREAM_MESSAGE_TYPE_SUBSCRIBED:return 3;case x.EVENTS_STREAM_MESSAGE_TYPE_UNSUBSCRIBED:return 4;case x.EVENTS_STREAM_MESSAGE_TYPE_PUBLISHED:return 5;default:return 0}}a.eventsStreamMessageTypeToNumber=ne;function F(){return{id:"",width:0,height:0,metadata:void 0,projectId:void 0,collectionId:void 0,requestMetadata:void 0,type:void 0}}a.Layout={encode(b,A=h.Writer.create()){return b.id!==""&&A.uint32(10).string(b.id),b.width!==0&&A.uint32(16).int32(b.width),b.height!==0&&A.uint32(24).int32(b.height),b.metadata!==void 0&&_.Value.encode(_.Value.wrap(b.metadata),A.uint32(50).fork()).ldelim(),b.projectId!==void 0&&A.uint32(58).string(b.projectId),b.collectionId!==void 0&&A.uint32(66).string(b.collectionId),b.requestMetadata!==void 0&&_.Value.encode(_.Value.wrap(b.requestMetadata),A.uint32(810).fork()).ldelim(),b.type!==void 0&&A.uint32(72).int32(w(b.type)),A},decode(b,A){const B=b instanceof h.Reader?b:new h.Reader(b);let ie=A===void 0?B.len:B.pos+A;const X=F();for(;B.pos<ie;){const se=B.uint32();switch(se>>>3){case 1:X.id=B.string();break;case 2:X.width=B.int32();break;case 3:X.height=B.int32();break;case 6:X.metadata=_.Value.unwrap(_.Value.decode(B,B.uint32()));break;case 7:X.projectId=B.string();break;case 8:X.collectionId=B.string();break;case 101:X.requestMetadata=_.Value.unwrap(_.Value.decode(B,B.uint32()));break;case 9:X.type=I(B.int32());break;default:B.skipType(se&7);break}}return X},fromJSON(b){return{id:ue(b.id)?String(b.id):"",width:ue(b.width)?Number(b.width):0,height:ue(b.height)?Number(b.height):0,metadata:ue(b==null?void 0:b.metadata)?b.metadata:void 0,projectId:ue(b.projectId)?String(b.projectId):void 0,collectionId:ue(b.collectionId)?String(b.collectionId):void 0,requestMetadata:ue(b==null?void 0:b.requestMetadata)?b.requestMetadata:void 0,type:ue(b.type)?I(b.type):void 0}},toJSON(b){const A={};return b.id!==void 0&&(A.id=b.id),b.width!==void 0&&(A.width=Math.round(b.width)),b.height!==void 0&&(A.height=Math.round(b.height)),b.metadata!==void 0&&(A.metadata=b.metadata),b.projectId!==void 0&&(A.projectId=b.projectId),b.collectionId!==void 0&&(A.collectionId=b.collectionId),b.requestMetadata!==void 0&&(A.requestMetadata=b.requestMetadata),b.type!==void 0&&(A.type=b.type!==void 0?N(b.type):void 0),A},fromPartial(b){var A,B,ie,X,se,Ue,Fe,$e;const Be=F();return Be.id=(A=b.id)!==null&&A!==void 0?A:"",Be.width=(B=b.width)!==null&&B!==void 0?B:0,Be.height=(ie=b.height)!==null&&ie!==void 0?ie:0,Be.metadata=(X=b.metadata)!==null&&X!==void 0?X:void 0,Be.projectId=(se=b.projectId)!==null&&se!==void 0?se:void 0,Be.collectionId=(Ue=b.collectionId)!==null&&Ue!==void 0?Ue:void 0,Be.requestMetadata=(Fe=b.requestMetadata)!==null&&Fe!==void 0?Fe:void 0,Be.type=($e=b.type)!==null&&$e!==void 0?$e:void 0,Be}};function j(){return{type:"",data:void 0,x:void 0,y:void 0,width:void 0,height:void 0,rotation:0,opacity:0,scale:0,hidden:!1,locked:!1,children:void 0,id:"",layoutId:"",requestMetadata:void 0,requestAnimation:[]}}a.Layer={encode(b,A=h.Writer.create()){b.type!==""&&A.uint32(10).string(b.type),b.data!==void 0&&_.Struct.encode(_.Struct.wrap(b.data),A.uint32(18).fork()).ldelim(),b.x!==void 0&&_.Value.encode(_.Value.wrap(b.x),A.uint32(26).fork()).ldelim(),b.y!==void 0&&_.Value.encode(_.Value.wrap(b.y),A.uint32(34).fork()).ldelim(),b.width!==void 0&&_.Value.encode(_.Value.wrap(b.width),A.uint32(42).fork()).ldelim(),b.height!==void 0&&_.Value.encode(_.Value.wrap(b.height),A.uint32(50).fork()).ldelim(),b.rotation!==0&&A.uint32(57).double(b.rotation),b.opacity!==0&&A.uint32(65).double(b.opacity),b.scale!==0&&A.uint32(73).double(b.scale),b.hidden===!0&&A.uint32(80).bool(b.hidden),b.locked===!0&&A.uint32(88).bool(b.locked),b.children!==void 0&&_.ListValue.encode(_.ListValue.wrap(b.children),A.uint32(98).fork()).ldelim(),b.id!==""&&A.uint32(802).string(b.id),b.layoutId!==""&&A.uint32(818).string(b.layoutId),b.requestMetadata!==void 0&&_.Value.encode(_.Value.wrap(b.requestMetadata),A.uint32(810).fork()).ldelim();for(const B of b.requestAnimation)a.LayerAnimation.encode(B,A.uint32(826).fork()).ldelim();return A},decode(b,A){const B=b instanceof h.Reader?b:new h.Reader(b);let ie=A===void 0?B.len:B.pos+A;const X=j();for(;B.pos<ie;){const se=B.uint32();switch(se>>>3){case 1:X.type=B.string();break;case 2:X.data=_.Struct.unwrap(_.Struct.decode(B,B.uint32()));break;case 3:X.x=_.Value.unwrap(_.Value.decode(B,B.uint32()));break;case 4:X.y=_.Value.unwrap(_.Value.decode(B,B.uint32()));break;case 5:X.width=_.Value.unwrap(_.Value.decode(B,B.uint32()));break;case 6:X.height=_.Value.unwrap(_.Value.decode(B,B.uint32()));break;case 7:X.rotation=B.double();break;case 8:X.opacity=B.double();break;case 9:X.scale=B.double();break;case 10:X.hidden=B.bool();break;case 11:X.locked=B.bool();break;case 12:X.children=_.ListValue.unwrap(_.ListValue.decode(B,B.uint32()));break;case 100:X.id=B.string();break;case 102:X.layoutId=B.string();break;case 101:X.requestMetadata=_.Value.unwrap(_.Value.decode(B,B.uint32()));break;case 103:X.requestAnimation.push(a.LayerAnimation.decode(B,B.uint32()));break;default:B.skipType(se&7);break}}return X},fromJSON(b){return{type:ue(b.type)?String(b.type):"",data:nt(b.data)?b.data:void 0,x:ue(b==null?void 0:b.x)?b.x:void 0,y:ue(b==null?void 0:b.y)?b.y:void 0,width:ue(b==null?void 0:b.width)?b.width:void 0,height:ue(b==null?void 0:b.height)?b.height:void 0,rotation:ue(b.rotation)?Number(b.rotation):0,opacity:ue(b.opacity)?Number(b.opacity):0,scale:ue(b.scale)?Number(b.scale):0,hidden:ue(b.hidden)?Boolean(b.hidden):!1,locked:ue(b.locked)?Boolean(b.locked):!1,children:Array.isArray(b.children)?[...b.children]:void 0,id:ue(b.id)?String(b.id):"",layoutId:ue(b.layoutId)?String(b.layoutId):"",requestMetadata:ue(b==null?void 0:b.requestMetadata)?b.requestMetadata:void 0,requestAnimation:Array.isArray(b==null?void 0:b.requestAnimation)?b.requestAnimation.map(A=>a.LayerAnimation.fromJSON(A)):[]}},toJSON(b){const A={};return b.type!==void 0&&(A.type=b.type),b.data!==void 0&&(A.data=b.data),b.x!==void 0&&(A.x=b.x),b.y!==void 0&&(A.y=b.y),b.width!==void 0&&(A.width=b.width),b.height!==void 0&&(A.height=b.height),b.rotation!==void 0&&(A.rotation=b.rotation),b.opacity!==void 0&&(A.opacity=b.opacity),b.scale!==void 0&&(A.scale=b.scale),b.hidden!==void 0&&(A.hidden=b.hidden),b.locked!==void 0&&(A.locked=b.locked),b.children!==void 0&&(A.children=b.children),b.id!==void 0&&(A.id=b.id),b.layoutId!==void 0&&(A.layoutId=b.layoutId),b.requestMetadata!==void 0&&(A.requestMetadata=b.requestMetadata),b.requestAnimation?A.requestAnimation=b.requestAnimation.map(B=>B?a.LayerAnimation.toJSON(B):void 0):A.requestAnimation=[],A},fromPartial(b){var A,B,ie,X,se,Ue,Fe,$e,Be,Ye,ze,xe,je,Ke,Qe,Le;const Oe=j();return Oe.type=(A=b.type)!==null&&A!==void 0?A:"",Oe.data=(B=b.data)!==null&&B!==void 0?B:void 0,Oe.x=(ie=b.x)!==null&&ie!==void 0?ie:void 0,Oe.y=(X=b.y)!==null&&X!==void 0?X:void 0,Oe.width=(se=b.width)!==null&&se!==void 0?se:void 0,Oe.height=(Ue=b.height)!==null&&Ue!==void 0?Ue:void 0,Oe.rotation=(Fe=b.rotation)!==null&&Fe!==void 0?Fe:0,Oe.opacity=($e=b.opacity)!==null&&$e!==void 0?$e:0,Oe.scale=(Be=b.scale)!==null&&Be!==void 0?Be:0,Oe.hidden=(Ye=b.hidden)!==null&&Ye!==void 0?Ye:!1,Oe.locked=(ze=b.locked)!==null&&ze!==void 0?ze:!1,Oe.children=(xe=b.children)!==null&&xe!==void 0?xe:void 0,Oe.id=(je=b.id)!==null&&je!==void 0?je:"",Oe.layoutId=(Ke=b.layoutId)!==null&&Ke!==void 0?Ke:"",Oe.requestMetadata=(Qe=b.requestMetadata)!==null&&Qe!==void 0?Qe:void 0,Oe.requestAnimation=((Le=b.requestAnimation)===null||Le===void 0?void 0:Le.map(rt=>a.LayerAnimation.fromPartial(rt)))||[],Oe}};function K(){return{id:"",layoutId:"",requestMetadata:void 0}}a.DeleteLayerResponse={encode(b,A=h.Writer.create()){return b.id!==""&&A.uint32(10).string(b.id),b.layoutId!==""&&A.uint32(18).string(b.layoutId),b.requestMetadata!==void 0&&_.Value.encode(_.Value.wrap(b.requestMetadata),A.uint32(802).fork()).ldelim(),A},decode(b,A){const B=b instanceof h.Reader?b:new h.Reader(b);let ie=A===void 0?B.len:B.pos+A;const X=K();for(;B.pos<ie;){const se=B.uint32();switch(se>>>3){case 1:X.id=B.string();break;case 2:X.layoutId=B.string();break;case 100:X.requestMetadata=_.Value.unwrap(_.Value.decode(B,B.uint32()));break;default:B.skipType(se&7);break}}return X},fromJSON(b){return{id:ue(b.id)?String(b.id):"",layoutId:ue(b.layoutId)?String(b.layoutId):"",requestMetadata:ue(b==null?void 0:b.requestMetadata)?b.requestMetadata:void 0}},toJSON(b){const A={};return b.id!==void 0&&(A.id=b.id),b.layoutId!==void 0&&(A.layoutId=b.layoutId),b.requestMetadata!==void 0&&(A.requestMetadata=b.requestMetadata),A},fromPartial(b){var A,B,ie;const X=K();return X.id=(A=b.id)!==null&&A!==void 0?A:"",X.layoutId=(B=b.layoutId)!==null&&B!==void 0?B:"",X.requestMetadata=(ie=b.requestMetadata)!==null&&ie!==void 0?ie:void 0,X}};function M(){return{layers:[],requestMetadata:void 0}}a.BatchLayerResponse={encode(b,A=h.Writer.create()){for(const B of b.layers)a.BatchLayerResponse_BatchLayerItem.encode(B,A.uint32(18).fork()).ldelim();return b.requestMetadata!==void 0&&_.Value.encode(_.Value.wrap(b.requestMetadata),A.uint32(802).fork()).ldelim(),A},decode(b,A){const B=b instanceof h.Reader?b:new h.Reader(b);let ie=A===void 0?B.len:B.pos+A;const X=M();for(;B.pos<ie;){const se=B.uint32();switch(se>>>3){case 2:X.layers.push(a.BatchLayerResponse_BatchLayerItem.decode(B,B.uint32()));break;case 100:X.requestMetadata=_.Value.unwrap(_.Value.decode(B,B.uint32()));break;default:B.skipType(se&7);break}}return X},fromJSON(b){return{layers:Array.isArray(b==null?void 0:b.layers)?b.layers.map(A=>a.BatchLayerResponse_BatchLayerItem.fromJSON(A)):[],requestMetadata:ue(b==null?void 0:b.requestMetadata)?b.requestMetadata:void 0}},toJSON(b){const A={};return b.layers?A.layers=b.layers.map(B=>B?a.BatchLayerResponse_BatchLayerItem.toJSON(B):void 0):A.layers=[],b.requestMetadata!==void 0&&(A.requestMetadata=b.requestMetadata),A},fromPartial(b){var A,B;const ie=M();return ie.layers=((A=b.layers)===null||A===void 0?void 0:A.map(X=>a.BatchLayerResponse_BatchLayerItem.fromPartial(X)))||[],ie.requestMetadata=(B=b.requestMetadata)!==null&&B!==void 0?B:void 0,ie}};function q(){return{create:void 0,update:void 0,delete:void 0}}a.BatchLayerResponse_BatchLayerItem={encode(b,A=h.Writer.create()){return b.create!==void 0&&a.Layer.encode(b.create,A.uint32(10).fork()).ldelim(),b.update!==void 0&&a.Layer.encode(b.update,A.uint32(18).fork()).ldelim(),b.delete!==void 0&&a.DeleteLayerResponse.encode(b.delete,A.uint32(26).fork()).ldelim(),A},decode(b,A){const B=b instanceof h.Reader?b:new h.Reader(b);let ie=A===void 0?B.len:B.pos+A;const X=q();for(;B.pos<ie;){const se=B.uint32();switch(se>>>3){case 1:X.create=a.Layer.decode(B,B.uint32());break;case 2:X.update=a.Layer.decode(B,B.uint32());break;case 3:X.delete=a.DeleteLayerResponse.decode(B,B.uint32());break;default:B.skipType(se&7);break}}return X},fromJSON(b){return{create:ue(b.create)?a.Layer.fromJSON(b.create):void 0,update:ue(b.update)?a.Layer.fromJSON(b.update):void 0,delete:ue(b.delete)?a.DeleteLayerResponse.fromJSON(b.delete):void 0}},toJSON(b){const A={};return b.create!==void 0&&(A.create=b.create?a.Layer.toJSON(b.create):void 0),b.update!==void 0&&(A.update=b.update?a.Layer.toJSON(b.update):void 0),b.delete!==void 0&&(A.delete=b.delete?a.DeleteLayerResponse.toJSON(b.delete):void 0),A},fromPartial(b){const A=q();return A.create=b.create!==void 0&&b.create!==null?a.Layer.fromPartial(b.create):void 0,A.update=b.update!==void 0&&b.update!==null?a.Layer.fromPartial(b.update):void 0,A.delete=b.delete!==void 0&&b.delete!==null?a.DeleteLayerResponse.fromPartial(b.delete):void 0,A}};function z(){return{collectionId:void 0,projectId:void 0,layoutId:void 0}}a.EventTarget={encode(b,A=h.Writer.create()){return b.collectionId!==void 0&&A.uint32(42).string(b.collectionId),b.projectId!==void 0&&A.uint32(34).string(b.projectId),b.layoutId!==void 0&&A.uint32(10).string(b.layoutId),A},decode(b,A){const B=b instanceof h.Reader?b:new h.Reader(b);let ie=A===void 0?B.len:B.pos+A;const X=z();for(;B.pos<ie;){const se=B.uint32();switch(se>>>3){case 5:X.collectionId=B.string();break;case 4:X.projectId=B.string();break;case 1:X.layoutId=B.string();break;default:B.skipType(se&7);break}}return X},fromJSON(b){return{collectionId:ue(b.collectionId)?String(b.collectionId):void 0,projectId:ue(b.projectId)?String(b.projectId):void 0,layoutId:ue(b.layoutId)?String(b.layoutId):void 0}},toJSON(b){const A={};return b.collectionId!==void 0&&(A.collectionId=b.collectionId),b.projectId!==void 0&&(A.projectId=b.projectId),b.layoutId!==void 0&&(A.layoutId=b.layoutId),A},fromPartial(b){var A,B,ie;const X=z();return X.collectionId=(A=b.collectionId)!==null&&A!==void 0?A:void 0,X.projectId=(B=b.projectId)!==null&&B!==void 0?B:void 0,X.layoutId=(ie=b.layoutId)!==null&&ie!==void 0?ie:void 0,X}};function le(){return{name:"",payload:void 0,requestMetadata:void 0,target:void 0}}a.PublishEventRequest={encode(b,A=h.Writer.create()){return b.name!==""&&A.uint32(10).string(b.name),b.payload!==void 0&&_.Struct.encode(_.Struct.wrap(b.payload),A.uint32(18).fork()).ldelim(),b.requestMetadata!==void 0&&_.Value.encode(_.Value.wrap(b.requestMetadata),A.uint32(34).fork()).ldelim(),b.target!==void 0&&a.EventTarget.encode(b.target,A.uint32(26).fork()).ldelim(),A},decode(b,A){const B=b instanceof h.Reader?b:new h.Reader(b);let ie=A===void 0?B.len:B.pos+A;const X=le();for(;B.pos<ie;){const se=B.uint32();switch(se>>>3){case 1:X.name=B.string();break;case 2:X.payload=_.Struct.unwrap(_.Struct.decode(B,B.uint32()));break;case 4:X.requestMetadata=_.Value.unwrap(_.Value.decode(B,B.uint32()));break;case 3:X.target=a.EventTarget.decode(B,B.uint32());break;default:B.skipType(se&7);break}}return X},fromJSON(b){return{name:ue(b.name)?String(b.name):"",payload:nt(b.payload)?b.payload:void 0,requestMetadata:ue(b==null?void 0:b.requestMetadata)?b.requestMetadata:void 0,target:ue(b.target)?a.EventTarget.fromJSON(b.target):void 0}},toJSON(b){const A={};return b.name!==void 0&&(A.name=b.name),b.payload!==void 0&&(A.payload=b.payload),b.requestMetadata!==void 0&&(A.requestMetadata=b.requestMetadata),b.target!==void 0&&(A.target=b.target?a.EventTarget.toJSON(b.target):void 0),A},fromPartial(b){var A,B,ie;const X=le();return X.name=(A=b.name)!==null&&A!==void 0?A:"",X.payload=(B=b.payload)!==null&&B!==void 0?B:void 0,X.requestMetadata=(ie=b.requestMetadata)!==null&&ie!==void 0?ie:void 0,X.target=b.target!==void 0&&b.target!==null?a.EventTarget.fromPartial(b.target):void 0,X}};function re(){return{name:"",payload:void 0,target:void 0,requestMetadata:void 0,id:""}}a.PublishEventResponse={encode(b,A=h.Writer.create()){return b.name!==""&&A.uint32(10).string(b.name),b.payload!==void 0&&_.Struct.encode(_.Struct.wrap(b.payload),A.uint32(18).fork()).ldelim(),b.target!==void 0&&a.EventTarget.encode(b.target,A.uint32(26).fork()).ldelim(),b.requestMetadata!==void 0&&_.Value.encode(_.Value.wrap(b.requestMetadata),A.uint32(34).fork()).ldelim(),b.id!==""&&A.uint32(42).string(b.id),A},decode(b,A){const B=b instanceof h.Reader?b:new h.Reader(b);let ie=A===void 0?B.len:B.pos+A;const X=re();for(;B.pos<ie;){const se=B.uint32();switch(se>>>3){case 1:X.name=B.string();break;case 2:X.payload=_.Struct.unwrap(_.Struct.decode(B,B.uint32()));break;case 3:X.target=a.EventTarget.decode(B,B.uint32());break;case 4:X.requestMetadata=_.Value.unwrap(_.Value.decode(B,B.uint32()));break;case 5:X.id=B.string();break;default:B.skipType(se&7);break}}return X},fromJSON(b){return{name:ue(b.name)?String(b.name):"",payload:nt(b.payload)?b.payload:void 0,target:ue(b.target)?a.EventTarget.fromJSON(b.target):void 0,requestMetadata:ue(b==null?void 0:b.requestMetadata)?b.requestMetadata:void 0,id:ue(b.id)?String(b.id):""}},toJSON(b){const A={};return b.name!==void 0&&(A.name=b.name),b.payload!==void 0&&(A.payload=b.payload),b.target!==void 0&&(A.target=b.target?a.EventTarget.toJSON(b.target):void 0),b.requestMetadata!==void 0&&(A.requestMetadata=b.requestMetadata),b.id!==void 0&&(A.id=b.id),A},fromPartial(b){var A,B,ie,X;const se=re();return se.name=(A=b.name)!==null&&A!==void 0?A:"",se.payload=(B=b.payload)!==null&&B!==void 0?B:void 0,se.target=b.target!==void 0&&b.target!==null?a.EventTarget.fromPartial(b.target):void 0,se.requestMetadata=(ie=b.requestMetadata)!==null&&ie!==void 0?ie:void 0,se.id=(X=b.id)!==null&&X!==void 0?X:"",se}};function Q(){return{width:void 0,height:void 0,metadata:void 0,projectId:void 0,collectionId:void 0,type:void 0,requestMetadata:void 0}}a.PartialLayout={encode(b,A=h.Writer.create()){return b.width!==void 0&&A.uint32(16).int32(b.width),b.height!==void 0&&A.uint32(24).int32(b.height),b.metadata!==void 0&&_.Value.encode(_.Value.wrap(b.metadata),A.uint32(50).fork()).ldelim(),b.projectId!==void 0&&A.uint32(58).string(b.projectId),b.collectionId!==void 0&&A.uint32(66).string(b.collectionId),b.type!==void 0&&A.uint32(72).int32(w(b.type)),b.requestMetadata!==void 0&&_.Value.encode(_.Value.wrap(b.requestMetadata),A.uint32(810).fork()).ldelim(),A},decode(b,A){const B=b instanceof h.Reader?b:new h.Reader(b);let ie=A===void 0?B.len:B.pos+A;const X=Q();for(;B.pos<ie;){const se=B.uint32();switch(se>>>3){case 2:X.width=B.int32();break;case 3:X.height=B.int32();break;case 6:X.metadata=_.Value.unwrap(_.Value.decode(B,B.uint32()));break;case 7:X.projectId=B.string();break;case 8:X.collectionId=B.string();break;case 9:X.type=I(B.int32());break;case 101:X.requestMetadata=_.Value.unwrap(_.Value.decode(B,B.uint32()));break;default:B.skipType(se&7);break}}return X},fromJSON(b){return{width:ue(b.width)?Number(b.width):void 0,height:ue(b.height)?Number(b.height):void 0,metadata:ue(b==null?void 0:b.metadata)?b.metadata:void 0,projectId:ue(b.projectId)?String(b.projectId):void 0,collectionId:ue(b.collectionId)?String(b.collectionId):void 0,type:ue(b.type)?I(b.type):void 0,requestMetadata:ue(b==null?void 0:b.requestMetadata)?b.requestMetadata:void 0}},toJSON(b){const A={};return b.width!==void 0&&(A.width=Math.round(b.width)),b.height!==void 0&&(A.height=Math.round(b.height)),b.metadata!==void 0&&(A.metadata=b.metadata),b.projectId!==void 0&&(A.projectId=b.projectId),b.collectionId!==void 0&&(A.collectionId=b.collectionId),b.type!==void 0&&(A.type=b.type!==void 0?N(b.type):void 0),b.requestMetadata!==void 0&&(A.requestMetadata=b.requestMetadata),A},fromPartial(b){var A,B,ie,X,se,Ue,Fe;const $e=Q();return $e.width=(A=b.width)!==null&&A!==void 0?A:void 0,$e.height=(B=b.height)!==null&&B!==void 0?B:void 0,$e.metadata=(ie=b.metadata)!==null&&ie!==void 0?ie:void 0,$e.projectId=(X=b.projectId)!==null&&X!==void 0?X:void 0,$e.collectionId=(se=b.collectionId)!==null&&se!==void 0?se:void 0,$e.type=(Ue=b.type)!==null&&Ue!==void 0?Ue:void 0,$e.requestMetadata=(Fe=b.requestMetadata)!==null&&Fe!==void 0?Fe:void 0,$e}};function ce(){return{projectId:void 0,collectionId:void 0,type:void 0}}a.ListLayoutsRequest={encode(b,A=h.Writer.create()){return b.projectId!==void 0&&A.uint32(10).string(b.projectId),b.collectionId!==void 0&&A.uint32(18).string(b.collectionId),b.type!==void 0&&A.uint32(24).int32(w(b.type)),A},decode(b,A){const B=b instanceof h.Reader?b:new h.Reader(b);let ie=A===void 0?B.len:B.pos+A;const X=ce();for(;B.pos<ie;){const se=B.uint32();switch(se>>>3){case 1:X.projectId=B.string();break;case 2:X.collectionId=B.string();break;case 3:X.type=I(B.int32());break;default:B.skipType(se&7);break}}return X},fromJSON(b){return{projectId:ue(b.projectId)?String(b.projectId):void 0,collectionId:ue(b.collectionId)?String(b.collectionId):void 0,type:ue(b.type)?I(b.type):void 0}},toJSON(b){const A={};return b.projectId!==void 0&&(A.projectId=b.projectId),b.collectionId!==void 0&&(A.collectionId=b.collectionId),b.type!==void 0&&(A.type=b.type!==void 0?N(b.type):void 0),A},fromPartial(b){var A,B,ie;const X=ce();return X.projectId=(A=b.projectId)!==null&&A!==void 0?A:void 0,X.collectionId=(B=b.collectionId)!==null&&B!==void 0?B:void 0,X.type=(ie=b.type)!==null&&ie!==void 0?ie:void 0,X}};function me(){return{layouts:[]}}a.ListLayoutsResponse={encode(b,A=h.Writer.create()){for(const B of b.layouts)a.Layout.encode(B,A.uint32(10).fork()).ldelim();return A},decode(b,A){const B=b instanceof h.Reader?b:new h.Reader(b);let ie=A===void 0?B.len:B.pos+A;const X=me();for(;B.pos<ie;){const se=B.uint32();switch(se>>>3){case 1:X.layouts.push(a.Layout.decode(B,B.uint32()));break;default:B.skipType(se&7);break}}return X},fromJSON(b){return{layouts:Array.isArray(b==null?void 0:b.layouts)?b.layouts.map(A=>a.Layout.fromJSON(A)):[]}},toJSON(b){const A={};return b.layouts?A.layouts=b.layouts.map(B=>B?a.Layout.toJSON(B):void 0):A.layouts=[],A},fromPartial(b){var A;const B=me();return B.layouts=((A=b.layouts)===null||A===void 0?void 0:A.map(ie=>a.Layout.fromPartial(ie)))||[],B}};function ve(){return{layout:void 0}}a.CreateLayoutRequest={encode(b,A=h.Writer.create()){return b.layout!==void 0&&a.PartialLayout.encode(b.layout,A.uint32(18).fork()).ldelim(),A},decode(b,A){const B=b instanceof h.Reader?b:new h.Reader(b);let ie=A===void 0?B.len:B.pos+A;const X=ve();for(;B.pos<ie;){const se=B.uint32();switch(se>>>3){case 2:X.layout=a.PartialLayout.decode(B,B.uint32());break;default:B.skipType(se&7);break}}return X},fromJSON(b){return{layout:ue(b.layout)?a.PartialLayout.fromJSON(b.layout):void 0}},toJSON(b){const A={};return b.layout!==void 0&&(A.layout=b.layout?a.PartialLayout.toJSON(b.layout):void 0),A},fromPartial(b){const A=ve();return A.layout=b.layout!==void 0&&b.layout!==null?a.PartialLayout.fromPartial(b.layout):void 0,A}};function ye(){return{layoutId:""}}a.GetLayoutRequest={encode(b,A=h.Writer.create()){return b.layoutId!==""&&A.uint32(10).string(b.layoutId),A},decode(b,A){const B=b instanceof h.Reader?b:new h.Reader(b);let ie=A===void 0?B.len:B.pos+A;const X=ye();for(;B.pos<ie;){const se=B.uint32();switch(se>>>3){case 1:X.layoutId=B.string();break;default:B.skipType(se&7);break}}return X},fromJSON(b){return{layoutId:ue(b.layoutId)?String(b.layoutId):""}},toJSON(b){const A={};return b.layoutId!==void 0&&(A.layoutId=b.layoutId),A},fromPartial(b){var A;const B=ye();return B.layoutId=(A=b.layoutId)!==null&&A!==void 0?A:"",B}};function v(){return{layoutId:"",layout:void 0}}a.UpdateLayoutRequest={encode(b,A=h.Writer.create()){return b.layoutId!==""&&A.uint32(10).string(b.layoutId),b.layout!==void 0&&a.PartialLayout.encode(b.layout,A.uint32(26).fork()).ldelim(),A},decode(b,A){const B=b instanceof h.Reader?b:new h.Reader(b);let ie=A===void 0?B.len:B.pos+A;const X=v();for(;B.pos<ie;){const se=B.uint32();switch(se>>>3){case 1:X.layoutId=B.string();break;case 3:X.layout=a.PartialLayout.decode(B,B.uint32());break;default:B.skipType(se&7);break}}return X},fromJSON(b){return{layoutId:ue(b.layoutId)?String(b.layoutId):"",layout:ue(b.layout)?a.PartialLayout.fromJSON(b.layout):void 0}},toJSON(b){const A={};return b.layoutId!==void 0&&(A.layoutId=b.layoutId),b.layout!==void 0&&(A.layout=b.layout?a.PartialLayout.toJSON(b.layout):void 0),A},fromPartial(b){var A;const B=v();return B.layoutId=(A=b.layoutId)!==null&&A!==void 0?A:"",B.layout=b.layout!==void 0&&b.layout!==null?a.PartialLayout.fromPartial(b.layout):void 0,B}};function T(){return{requestMetadata:void 0}}a.DeleteLayoutPayload={encode(b,A=h.Writer.create()){return b.requestMetadata!==void 0&&_.Value.encode(_.Value.wrap(b.requestMetadata),A.uint32(802).fork()).ldelim(),A},decode(b,A){const B=b instanceof h.Reader?b:new h.Reader(b);let ie=A===void 0?B.len:B.pos+A;const X=T();for(;B.pos<ie;){const se=B.uint32();switch(se>>>3){case 100:X.requestMetadata=_.Value.unwrap(_.Value.decode(B,B.uint32()));break;default:B.skipType(se&7);break}}return X},fromJSON(b){return{requestMetadata:ue(b==null?void 0:b.requestMetadata)?b.requestMetadata:void 0}},toJSON(b){const A={};return b.requestMetadata!==void 0&&(A.requestMetadata=b.requestMetadata),A},fromPartial(b){var A;const B=T();return B.requestMetadata=(A=b.requestMetadata)!==null&&A!==void 0?A:void 0,B}};function L(){return{layoutId:"",payload:void 0}}a.DeleteLayoutRequest={encode(b,A=h.Writer.create()){return b.layoutId!==""&&A.uint32(10).string(b.layoutId),b.payload!==void 0&&a.DeleteLayoutPayload.encode(b.payload,A.uint32(18).fork()).ldelim(),A},decode(b,A){const B=b instanceof h.Reader?b:new h.Reader(b);let ie=A===void 0?B.len:B.pos+A;const X=L();for(;B.pos<ie;){const se=B.uint32();switch(se>>>3){case 1:X.layoutId=B.string();break;case 2:X.payload=a.DeleteLayoutPayload.decode(B,B.uint32());break;default:B.skipType(se&7);break}}return X},fromJSON(b){return{layoutId:ue(b.layoutId)?String(b.layoutId):"",payload:ue(b.payload)?a.DeleteLayoutPayload.fromJSON(b.payload):void 0}},toJSON(b){const A={};return b.layoutId!==void 0&&(A.layoutId=b.layoutId),b.payload!==void 0&&(A.payload=b.payload?a.DeleteLayoutPayload.toJSON(b.payload):void 0),A},fromPartial(b){var A;const B=L();return B.layoutId=(A=b.layoutId)!==null&&A!==void 0?A:"",B.payload=b.payload!==void 0&&b.payload!==null?a.DeleteLayoutPayload.fromPartial(b.payload):void 0,B}};function oe(){return{id:"",requestMetadata:void 0}}a.DeleteLayoutResponse={encode(b,A=h.Writer.create()){return b.id!==""&&A.uint32(18).string(b.id),b.requestMetadata!==void 0&&_.Value.encode(_.Value.wrap(b.requestMetadata),A.uint32(802).fork()).ldelim(),A},decode(b,A){const B=b instanceof h.Reader?b:new h.Reader(b);let ie=A===void 0?B.len:B.pos+A;const X=oe();for(;B.pos<ie;){const se=B.uint32();switch(se>>>3){case 2:X.id=B.string();break;case 100:X.requestMetadata=_.Value.unwrap(_.Value.decode(B,B.uint32()));break;default:B.skipType(se&7);break}}return X},fromJSON(b){return{id:ue(b.id)?String(b.id):"",requestMetadata:ue(b==null?void 0:b.requestMetadata)?b.requestMetadata:void 0}},toJSON(b){const A={};return b.id!==void 0&&(A.id=b.id),b.requestMetadata!==void 0&&(A.requestMetadata=b.requestMetadata),A},fromPartial(b){var A,B;const ie=oe();return ie.id=(A=b.id)!==null&&A!==void 0?A:"",ie.requestMetadata=(B=b.requestMetadata)!==null&&B!==void 0?B:void 0,ie}};function k(){return{properties:[],durationMs:0,delayMs:void 0,easingMode:void 0}}a.LayerAnimation={encode(b,A=h.Writer.create()){for(const B of b.properties)A.uint32(10).string(B);return b.durationMs!==0&&A.uint32(16).int32(b.durationMs),b.delayMs!==void 0&&A.uint32(32).int32(b.delayMs),b.easingMode!==void 0&&A.uint32(42).string(b.easingMode),A},decode(b,A){const B=b instanceof h.Reader?b:new h.Reader(b);let ie=A===void 0?B.len:B.pos+A;const X=k();for(;B.pos<ie;){const se=B.uint32();switch(se>>>3){case 1:X.properties.push(B.string());break;case 2:X.durationMs=B.int32();break;case 4:X.delayMs=B.int32();break;case 5:X.easingMode=B.string();break;default:B.skipType(se&7);break}}return X},fromJSON(b){return{properties:Array.isArray(b==null?void 0:b.properties)?b.properties.map(A=>String(A)):[],durationMs:ue(b.durationMs)?Number(b.durationMs):0,delayMs:ue(b.delayMs)?Number(b.delayMs):void 0,easingMode:ue(b.easingMode)?String(b.easingMode):void 0}},toJSON(b){const A={};return b.properties?A.properties=b.properties.map(B=>B):A.properties=[],b.durationMs!==void 0&&(A.durationMs=Math.round(b.durationMs)),b.delayMs!==void 0&&(A.delayMs=Math.round(b.delayMs)),b.easingMode!==void 0&&(A.easingMode=b.easingMode),A},fromPartial(b){var A,B,ie,X;const se=k();return se.properties=((A=b.properties)===null||A===void 0?void 0:A.map(Ue=>Ue))||[],se.durationMs=(B=b.durationMs)!==null&&B!==void 0?B:0,se.delayMs=(ie=b.delayMs)!==null&&ie!==void 0?ie:void 0,se.easingMode=(X=b.easingMode)!==null&&X!==void 0?X:void 0,se}};function U(){return{type:void 0,data:void 0,x:void 0,y:void 0,width:void 0,height:void 0,rotation:void 0,opacity:void 0,scale:void 0,hidden:void 0,locked:void 0,children:void 0,parentId:void 0,requestMetadata:void 0,requestAnimation:[]}}a.PartialLayer={encode(b,A=h.Writer.create()){b.type!==void 0&&A.uint32(10).string(b.type),b.data!==void 0&&_.Struct.encode(_.Struct.wrap(b.data),A.uint32(18).fork()).ldelim(),b.x!==void 0&&_.Value.encode(_.Value.wrap(b.x),A.uint32(26).fork()).ldelim(),b.y!==void 0&&_.Value.encode(_.Value.wrap(b.y),A.uint32(34).fork()).ldelim(),b.width!==void 0&&_.Value.encode(_.Value.wrap(b.width),A.uint32(42).fork()).ldelim(),b.height!==void 0&&_.Value.encode(_.Value.wrap(b.height),A.uint32(50).fork()).ldelim(),b.rotation!==void 0&&A.uint32(57).double(b.rotation),b.opacity!==void 0&&A.uint32(65).double(b.opacity),b.scale!==void 0&&A.uint32(73).double(b.scale),b.hidden!==void 0&&A.uint32(80).bool(b.hidden),b.locked!==void 0&&A.uint32(88).bool(b.locked),b.children!==void 0&&_.ListValue.encode(_.ListValue.wrap(b.children),A.uint32(98).fork()).ldelim(),b.parentId!==void 0&&A.uint32(106).string(b.parentId),b.requestMetadata!==void 0&&_.Value.encode(_.Value.wrap(b.requestMetadata),A.uint32(802).fork()).ldelim();for(const B of b.requestAnimation)a.LayerAnimation.encode(B,A.uint32(826).fork()).ldelim();return A},decode(b,A){const B=b instanceof h.Reader?b:new h.Reader(b);let ie=A===void 0?B.len:B.pos+A;const X=U();for(;B.pos<ie;){const se=B.uint32();switch(se>>>3){case 1:X.type=B.string();break;case 2:X.data=_.Struct.unwrap(_.Struct.decode(B,B.uint32()));break;case 3:X.x=_.Value.unwrap(_.Value.decode(B,B.uint32()));break;case 4:X.y=_.Value.unwrap(_.Value.decode(B,B.uint32()));break;case 5:X.width=_.Value.unwrap(_.Value.decode(B,B.uint32()));break;case 6:X.height=_.Value.unwrap(_.Value.decode(B,B.uint32()));break;case 7:X.rotation=B.double();break;case 8:X.opacity=B.double();break;case 9:X.scale=B.double();break;case 10:X.hidden=B.bool();break;case 11:X.locked=B.bool();break;case 12:X.children=_.ListValue.unwrap(_.ListValue.decode(B,B.uint32()));break;case 13:X.parentId=B.string();break;case 100:X.requestMetadata=_.Value.unwrap(_.Value.decode(B,B.uint32()));break;case 103:X.requestAnimation.push(a.LayerAnimation.decode(B,B.uint32()));break;default:B.skipType(se&7);break}}return X},fromJSON(b){return{type:ue(b.type)?String(b.type):void 0,data:nt(b.data)?b.data:void 0,x:ue(b==null?void 0:b.x)?b.x:void 0,y:ue(b==null?void 0:b.y)?b.y:void 0,width:ue(b==null?void 0:b.width)?b.width:void 0,height:ue(b==null?void 0:b.height)?b.height:void 0,rotation:ue(b.rotation)?Number(b.rotation):void 0,opacity:ue(b.opacity)?Number(b.opacity):void 0,scale:ue(b.scale)?Number(b.scale):void 0,hidden:ue(b.hidden)?Boolean(b.hidden):void 0,locked:ue(b.locked)?Boolean(b.locked):void 0,children:Array.isArray(b.children)?[...b.children]:void 0,parentId:ue(b.parentId)?String(b.parentId):void 0,requestMetadata:ue(b==null?void 0:b.requestMetadata)?b.requestMetadata:void 0,requestAnimation:Array.isArray(b==null?void 0:b.requestAnimation)?b.requestAnimation.map(A=>a.LayerAnimation.fromJSON(A)):[]}},toJSON(b){const A={};return b.type!==void 0&&(A.type=b.type),b.data!==void 0&&(A.data=b.data),b.x!==void 0&&(A.x=b.x),b.y!==void 0&&(A.y=b.y),b.width!==void 0&&(A.width=b.width),b.height!==void 0&&(A.height=b.height),b.rotation!==void 0&&(A.rotation=b.rotation),b.opacity!==void 0&&(A.opacity=b.opacity),b.scale!==void 0&&(A.scale=b.scale),b.hidden!==void 0&&(A.hidden=b.hidden),b.locked!==void 0&&(A.locked=b.locked),b.children!==void 0&&(A.children=b.children),b.parentId!==void 0&&(A.parentId=b.parentId),b.requestMetadata!==void 0&&(A.requestMetadata=b.requestMetadata),b.requestAnimation?A.requestAnimation=b.requestAnimation.map(B=>B?a.LayerAnimation.toJSON(B):void 0):A.requestAnimation=[],A},fromPartial(b){var A,B,ie,X,se,Ue,Fe,$e,Be,Ye,ze,xe,je,Ke,Qe;const Le=U();return Le.type=(A=b.type)!==null&&A!==void 0?A:void 0,Le.data=(B=b.data)!==null&&B!==void 0?B:void 0,Le.x=(ie=b.x)!==null&&ie!==void 0?ie:void 0,Le.y=(X=b.y)!==null&&X!==void 0?X:void 0,Le.width=(se=b.width)!==null&&se!==void 0?se:void 0,Le.height=(Ue=b.height)!==null&&Ue!==void 0?Ue:void 0,Le.rotation=(Fe=b.rotation)!==null&&Fe!==void 0?Fe:void 0,Le.opacity=($e=b.opacity)!==null&&$e!==void 0?$e:void 0,Le.scale=(Be=b.scale)!==null&&Be!==void 0?Be:void 0,Le.hidden=(Ye=b.hidden)!==null&&Ye!==void 0?Ye:void 0,Le.locked=(ze=b.locked)!==null&&ze!==void 0?ze:void 0,Le.children=(xe=b.children)!==null&&xe!==void 0?xe:void 0,Le.parentId=(je=b.parentId)!==null&&je!==void 0?je:void 0,Le.requestMetadata=(Ke=b.requestMetadata)!==null&&Ke!==void 0?Ke:void 0,Le.requestAnimation=((Qe=b.requestAnimation)===null||Qe===void 0?void 0:Qe.map(Oe=>a.LayerAnimation.fromPartial(Oe)))||[],Le}};function ee(){return{id:"",type:void 0,data:void 0,x:void 0,y:void 0,width:void 0,height:void 0,rotation:void 0,opacity:void 0,scale:void 0,hidden:void 0,locked:void 0,children:void 0,parentId:void 0,requestMetadata:void 0,requestAnimation:[]}}a.PartialLayerWithID={encode(b,A=h.Writer.create()){b.id!==""&&A.uint32(8002).string(b.id),b.type!==void 0&&A.uint32(10).string(b.type),b.data!==void 0&&_.Struct.encode(_.Struct.wrap(b.data),A.uint32(18).fork()).ldelim(),b.x!==void 0&&_.Value.encode(_.Value.wrap(b.x),A.uint32(26).fork()).ldelim(),b.y!==void 0&&_.Value.encode(_.Value.wrap(b.y),A.uint32(34).fork()).ldelim(),b.width!==void 0&&_.Value.encode(_.Value.wrap(b.width),A.uint32(42).fork()).ldelim(),b.height!==void 0&&_.Value.encode(_.Value.wrap(b.height),A.uint32(50).fork()).ldelim(),b.rotation!==void 0&&A.uint32(57).double(b.rotation),b.opacity!==void 0&&A.uint32(65).double(b.opacity),b.scale!==void 0&&A.uint32(73).double(b.scale),b.hidden!==void 0&&A.uint32(80).bool(b.hidden),b.locked!==void 0&&A.uint32(88).bool(b.locked),b.children!==void 0&&_.ListValue.encode(_.ListValue.wrap(b.children),A.uint32(98).fork()).ldelim(),b.parentId!==void 0&&A.uint32(106).string(b.parentId),b.requestMetadata!==void 0&&_.Value.encode(_.Value.wrap(b.requestMetadata),A.uint32(802).fork()).ldelim();for(const B of b.requestAnimation)a.LayerAnimation.encode(B,A.uint32(826).fork()).ldelim();return A},decode(b,A){const B=b instanceof h.Reader?b:new h.Reader(b);let ie=A===void 0?B.len:B.pos+A;const X=ee();for(;B.pos<ie;){const se=B.uint32();switch(se>>>3){case 1e3:X.id=B.string();break;case 1:X.type=B.string();break;case 2:X.data=_.Struct.unwrap(_.Struct.decode(B,B.uint32()));break;case 3:X.x=_.Value.unwrap(_.Value.decode(B,B.uint32()));break;case 4:X.y=_.Value.unwrap(_.Value.decode(B,B.uint32()));break;case 5:X.width=_.Value.unwrap(_.Value.decode(B,B.uint32()));break;case 6:X.height=_.Value.unwrap(_.Value.decode(B,B.uint32()));break;case 7:X.rotation=B.double();break;case 8:X.opacity=B.double();break;case 9:X.scale=B.double();break;case 10:X.hidden=B.bool();break;case 11:X.locked=B.bool();break;case 12:X.children=_.ListValue.unwrap(_.ListValue.decode(B,B.uint32()));break;case 13:X.parentId=B.string();break;case 100:X.requestMetadata=_.Value.unwrap(_.Value.decode(B,B.uint32()));break;case 103:X.requestAnimation.push(a.LayerAnimation.decode(B,B.uint32()));break;default:B.skipType(se&7);break}}return X},fromJSON(b){return{id:ue(b.id)?String(b.id):"",type:ue(b.type)?String(b.type):void 0,data:nt(b.data)?b.data:void 0,x:ue(b==null?void 0:b.x)?b.x:void 0,y:ue(b==null?void 0:b.y)?b.y:void 0,width:ue(b==null?void 0:b.width)?b.width:void 0,height:ue(b==null?void 0:b.height)?b.height:void 0,rotation:ue(b.rotation)?Number(b.rotation):void 0,opacity:ue(b.opacity)?Number(b.opacity):void 0,scale:ue(b.scale)?Number(b.scale):void 0,hidden:ue(b.hidden)?Boolean(b.hidden):void 0,locked:ue(b.locked)?Boolean(b.locked):void 0,children:Array.isArray(b.children)?[...b.children]:void 0,parentId:ue(b.parentId)?String(b.parentId):void 0,requestMetadata:ue(b==null?void 0:b.requestMetadata)?b.requestMetadata:void 0,requestAnimation:Array.isArray(b==null?void 0:b.requestAnimation)?b.requestAnimation.map(A=>a.LayerAnimation.fromJSON(A)):[]}},toJSON(b){const A={};return b.id!==void 0&&(A.id=b.id),b.type!==void 0&&(A.type=b.type),b.data!==void 0&&(A.data=b.data),b.x!==void 0&&(A.x=b.x),b.y!==void 0&&(A.y=b.y),b.width!==void 0&&(A.width=b.width),b.height!==void 0&&(A.height=b.height),b.rotation!==void 0&&(A.rotation=b.rotation),b.opacity!==void 0&&(A.opacity=b.opacity),b.scale!==void 0&&(A.scale=b.scale),b.hidden!==void 0&&(A.hidden=b.hidden),b.locked!==void 0&&(A.locked=b.locked),b.children!==void 0&&(A.children=b.children),b.parentId!==void 0&&(A.parentId=b.parentId),b.requestMetadata!==void 0&&(A.requestMetadata=b.requestMetadata),b.requestAnimation?A.requestAnimation=b.requestAnimation.map(B=>B?a.LayerAnimation.toJSON(B):void 0):A.requestAnimation=[],A},fromPartial(b){var A,B,ie,X,se,Ue,Fe,$e,Be,Ye,ze,xe,je,Ke,Qe,Le;const Oe=ee();return Oe.id=(A=b.id)!==null&&A!==void 0?A:"",Oe.type=(B=b.type)!==null&&B!==void 0?B:void 0,Oe.data=(ie=b.data)!==null&&ie!==void 0?ie:void 0,Oe.x=(X=b.x)!==null&&X!==void 0?X:void 0,Oe.y=(se=b.y)!==null&&se!==void 0?se:void 0,Oe.width=(Ue=b.width)!==null&&Ue!==void 0?Ue:void 0,Oe.height=(Fe=b.height)!==null&&Fe!==void 0?Fe:void 0,Oe.rotation=($e=b.rotation)!==null&&$e!==void 0?$e:void 0,Oe.opacity=(Be=b.opacity)!==null&&Be!==void 0?Be:void 0,Oe.scale=(Ye=b.scale)!==null&&Ye!==void 0?Ye:void 0,Oe.hidden=(ze=b.hidden)!==null&&ze!==void 0?ze:void 0,Oe.locked=(xe=b.locked)!==null&&xe!==void 0?xe:void 0,Oe.children=(je=b.children)!==null&&je!==void 0?je:void 0,Oe.parentId=(Ke=b.parentId)!==null&&Ke!==void 0?Ke:void 0,Oe.requestMetadata=(Qe=b.requestMetadata)!==null&&Qe!==void 0?Qe:void 0,Oe.requestAnimation=((Le=b.requestAnimation)===null||Le===void 0?void 0:Le.map(rt=>a.LayerAnimation.fromPartial(rt)))||[],Oe}};function de(){return{layoutId:""}}a.ListLayersRequest={encode(b,A=h.Writer.create()){return b.layoutId!==""&&A.uint32(10).string(b.layoutId),A},decode(b,A){const B=b instanceof h.Reader?b:new h.Reader(b);let ie=A===void 0?B.len:B.pos+A;const X=de();for(;B.pos<ie;){const se=B.uint32();switch(se>>>3){case 1:X.layoutId=B.string();break;default:B.skipType(se&7);break}}return X},fromJSON(b){return{layoutId:ue(b.layoutId)?String(b.layoutId):""}},toJSON(b){const A={};return b.layoutId!==void 0&&(A.layoutId=b.layoutId),A},fromPartial(b){var A;const B=de();return B.layoutId=(A=b.layoutId)!==null&&A!==void 0?A:"",B}};function ae(){return{layers:[]}}a.ListLayersResponse={encode(b,A=h.Writer.create()){for(const B of b.layers)a.Layer.encode(B,A.uint32(10).fork()).ldelim();return A},decode(b,A){const B=b instanceof h.Reader?b:new h.Reader(b);let ie=A===void 0?B.len:B.pos+A;const X=ae();for(;B.pos<ie;){const se=B.uint32();switch(se>>>3){case 1:X.layers.push(a.Layer.decode(B,B.uint32()));break;default:B.skipType(se&7);break}}return X},fromJSON(b){return{layers:Array.isArray(b==null?void 0:b.layers)?b.layers.map(A=>a.Layer.fromJSON(A)):[]}},toJSON(b){const A={};return b.layers?A.layers=b.layers.map(B=>B?a.Layer.toJSON(B):void 0):A.layers=[],A},fromPartial(b){var A;const B=ae();return B.layers=((A=b.layers)===null||A===void 0?void 0:A.map(ie=>a.Layer.fromPartial(ie)))||[],B}};function fe(){return{layoutId:"",layer:void 0}}a.CreateLayerRequest={encode(b,A=h.Writer.create()){return b.layoutId!==""&&A.uint32(10).string(b.layoutId),b.layer!==void 0&&a.PartialLayer.encode(b.layer,A.uint32(18).fork()).ldelim(),A},decode(b,A){const B=b instanceof h.Reader?b:new h.Reader(b);let ie=A===void 0?B.len:B.pos+A;const X=fe();for(;B.pos<ie;){const se=B.uint32();switch(se>>>3){case 1:X.layoutId=B.string();break;case 2:X.layer=a.PartialLayer.decode(B,B.uint32());break;default:B.skipType(se&7);break}}return X},fromJSON(b){return{layoutId:ue(b.layoutId)?String(b.layoutId):"",layer:ue(b.layer)?a.PartialLayer.fromJSON(b.layer):void 0}},toJSON(b){const A={};return b.layoutId!==void 0&&(A.layoutId=b.layoutId),b.layer!==void 0&&(A.layer=b.layer?a.PartialLayer.toJSON(b.layer):void 0),A},fromPartial(b){var A;const B=fe();return B.layoutId=(A=b.layoutId)!==null&&A!==void 0?A:"",B.layer=b.layer!==void 0&&b.layer!==null?a.PartialLayer.fromPartial(b.layer):void 0,B}};function Ee(){return{layoutId:"",layerId:""}}a.GetLayerRequest={encode(b,A=h.Writer.create()){return b.layoutId!==""&&A.uint32(10).string(b.layoutId),b.layerId!==""&&A.uint32(18).string(b.layerId),A},decode(b,A){const B=b instanceof h.Reader?b:new h.Reader(b);let ie=A===void 0?B.len:B.pos+A;const X=Ee();for(;B.pos<ie;){const se=B.uint32();switch(se>>>3){case 1:X.layoutId=B.string();break;case 2:X.layerId=B.string();break;default:B.skipType(se&7);break}}return X},fromJSON(b){return{layoutId:ue(b.layoutId)?String(b.layoutId):"",layerId:ue(b.layerId)?String(b.layerId):""}},toJSON(b){const A={};return b.layoutId!==void 0&&(A.layoutId=b.layoutId),b.layerId!==void 0&&(A.layerId=b.layerId),A},fromPartial(b){var A,B;const ie=Ee();return ie.layoutId=(A=b.layoutId)!==null&&A!==void 0?A:"",ie.layerId=(B=b.layerId)!==null&&B!==void 0?B:"",ie}};function Pe(){return{layoutId:"",layerId:"",layer:void 0}}a.UpdateLayerRequest={encode(b,A=h.Writer.create()){return b.layoutId!==""&&A.uint32(10).string(b.layoutId),b.layerId!==""&&A.uint32(18).string(b.layerId),b.layer!==void 0&&a.PartialLayer.encode(b.layer,A.uint32(26).fork()).ldelim(),A},decode(b,A){const B=b instanceof h.Reader?b:new h.Reader(b);let ie=A===void 0?B.len:B.pos+A;const X=Pe();for(;B.pos<ie;){const se=B.uint32();switch(se>>>3){case 1:X.layoutId=B.string();break;case 2:X.layerId=B.string();break;case 3:X.layer=a.PartialLayer.decode(B,B.uint32());break;default:B.skipType(se&7);break}}return X},fromJSON(b){return{layoutId:ue(b.layoutId)?String(b.layoutId):"",layerId:ue(b.layerId)?String(b.layerId):"",layer:ue(b.layer)?a.PartialLayer.fromJSON(b.layer):void 0}},toJSON(b){const A={};return b.layoutId!==void 0&&(A.layoutId=b.layoutId),b.layerId!==void 0&&(A.layerId=b.layerId),b.layer!==void 0&&(A.layer=b.layer?a.PartialLayer.toJSON(b.layer):void 0),A},fromPartial(b){var A,B;const ie=Pe();return ie.layoutId=(A=b.layoutId)!==null&&A!==void 0?A:"",ie.layerId=(B=b.layerId)!==null&&B!==void 0?B:"",ie.layer=b.layer!==void 0&&b.layer!==null?a.PartialLayer.fromPartial(b.layer):void 0,ie}};function Se(){return{requestMetadata:void 0}}a.DeleteLayerPayload={encode(b,A=h.Writer.create()){return b.requestMetadata!==void 0&&_.Value.encode(_.Value.wrap(b.requestMetadata),A.uint32(802).fork()).ldelim(),A},decode(b,A){const B=b instanceof h.Reader?b:new h.Reader(b);let ie=A===void 0?B.len:B.pos+A;const X=Se();for(;B.pos<ie;){const se=B.uint32();switch(se>>>3){case 100:X.requestMetadata=_.Value.unwrap(_.Value.decode(B,B.uint32()));break;default:B.skipType(se&7);break}}return X},fromJSON(b){return{requestMetadata:ue(b==null?void 0:b.requestMetadata)?b.requestMetadata:void 0}},toJSON(b){const A={};return b.requestMetadata!==void 0&&(A.requestMetadata=b.requestMetadata),A},fromPartial(b){var A;const B=Se();return B.requestMetadata=(A=b.requestMetadata)!==null&&A!==void 0?A:void 0,B}};function Ie(){return{layoutId:"",layerId:"",payload:void 0}}a.DeleteLayerRequest={encode(b,A=h.Writer.create()){return b.layoutId!==""&&A.uint32(10).string(b.layoutId),b.layerId!==""&&A.uint32(18).string(b.layerId),b.payload!==void 0&&a.DeleteLayerPayload.encode(b.payload,A.uint32(26).fork()).ldelim(),A},decode(b,A){const B=b instanceof h.Reader?b:new h.Reader(b);let ie=A===void 0?B.len:B.pos+A;const X=Ie();for(;B.pos<ie;){const se=B.uint32();switch(se>>>3){case 1:X.layoutId=B.string();break;case 2:X.layerId=B.string();break;case 3:X.payload=a.DeleteLayerPayload.decode(B,B.uint32());break;default:B.skipType(se&7);break}}return X},fromJSON(b){return{layoutId:ue(b.layoutId)?String(b.layoutId):"",layerId:ue(b.layerId)?String(b.layerId):"",payload:ue(b.payload)?a.DeleteLayerPayload.fromJSON(b.payload):void 0}},toJSON(b){const A={};return b.layoutId!==void 0&&(A.layoutId=b.layoutId),b.layerId!==void 0&&(A.layerId=b.layerId),b.payload!==void 0&&(A.payload=b.payload?a.DeleteLayerPayload.toJSON(b.payload):void 0),A},fromPartial(b){var A,B;const ie=Ie();return ie.layoutId=(A=b.layoutId)!==null&&A!==void 0?A:"",ie.layerId=(B=b.layerId)!==null&&B!==void 0?B:"",ie.payload=b.payload!==void 0&&b.payload!==null?a.DeleteLayerPayload.fromPartial(b.payload):void 0,ie}};function De(){return{id:"",requestMetadata:void 0}}a.BatchDeleteLayerRequest={encode(b,A=h.Writer.create()){return b.id!==""&&A.uint32(10).string(b.id),b.requestMetadata!==void 0&&_.Value.encode(_.Value.wrap(b.requestMetadata),A.uint32(802).fork()).ldelim(),A},decode(b,A){const B=b instanceof h.Reader?b:new h.Reader(b);let ie=A===void 0?B.len:B.pos+A;const X=De();for(;B.pos<ie;){const se=B.uint32();switch(se>>>3){case 1:X.id=B.string();break;case 100:X.requestMetadata=_.Value.unwrap(_.Value.decode(B,B.uint32()));break;default:B.skipType(se&7);break}}return X},fromJSON(b){return{id:ue(b.id)?String(b.id):"",requestMetadata:ue(b==null?void 0:b.requestMetadata)?b.requestMetadata:void 0}},toJSON(b){const A={};return b.id!==void 0&&(A.id=b.id),b.requestMetadata!==void 0&&(A.requestMetadata=b.requestMetadata),A},fromPartial(b){var A,B;const ie=De();return ie.id=(A=b.id)!==null&&A!==void 0?A:"",ie.requestMetadata=(B=b.requestMetadata)!==null&&B!==void 0?B:void 0,ie}};function He(){return{layoutId:"",layers:[],requestMetadata:void 0}}a.BatchLayerRequest={encode(b,A=h.Writer.create()){b.layoutId!==""&&A.uint32(10).string(b.layoutId);for(const B of b.layers)a.BatchLayerRequest_BatchItem.encode(B,A.uint32(18).fork()).ldelim();return b.requestMetadata!==void 0&&_.Value.encode(_.Value.wrap(b.requestMetadata),A.uint32(802).fork()).ldelim(),A},decode(b,A){const B=b instanceof h.Reader?b:new h.Reader(b);let ie=A===void 0?B.len:B.pos+A;const X=He();for(;B.pos<ie;){const se=B.uint32();switch(se>>>3){case 1:X.layoutId=B.string();break;case 2:X.layers.push(a.BatchLayerRequest_BatchItem.decode(B,B.uint32()));break;case 100:X.requestMetadata=_.Value.unwrap(_.Value.decode(B,B.uint32()));break;default:B.skipType(se&7);break}}return X},fromJSON(b){return{layoutId:ue(b.layoutId)?String(b.layoutId):"",layers:Array.isArray(b==null?void 0:b.layers)?b.layers.map(A=>a.BatchLayerRequest_BatchItem.fromJSON(A)):[],requestMetadata:ue(b==null?void 0:b.requestMetadata)?b.requestMetadata:void 0}},toJSON(b){const A={};return b.layoutId!==void 0&&(A.layoutId=b.layoutId),b.layers?A.layers=b.layers.map(B=>B?a.BatchLayerRequest_BatchItem.toJSON(B):void 0):A.layers=[],b.requestMetadata!==void 0&&(A.requestMetadata=b.requestMetadata),A},fromPartial(b){var A,B,ie;const X=He();return X.layoutId=(A=b.layoutId)!==null&&A!==void 0?A:"",X.layers=((B=b.layers)===null||B===void 0?void 0:B.map(se=>a.BatchLayerRequest_BatchItem.fromPartial(se)))||[],X.requestMetadata=(ie=b.requestMetadata)!==null&&ie!==void 0?ie:void 0,X}};function be(){return{create:void 0,update:void 0,delete:void 0}}a.BatchLayerRequest_BatchItem={encode(b,A=h.Writer.create()){return b.create!==void 0&&a.PartialLayer.encode(b.create,A.uint32(10).fork()).ldelim(),b.update!==void 0&&a.PartialLayerWithID.encode(b.update,A.uint32(18).fork()).ldelim(),b.delete!==void 0&&a.BatchDeleteLayerRequest.encode(b.delete,A.uint32(26).fork()).ldelim(),A},decode(b,A){const B=b instanceof h.Reader?b:new h.Reader(b);let ie=A===void 0?B.len:B.pos+A;const X=be();for(;B.pos<ie;){const se=B.uint32();switch(se>>>3){case 1:X.create=a.PartialLayer.decode(B,B.uint32());break;case 2:X.update=a.PartialLayerWithID.decode(B,B.uint32());break;case 3:X.delete=a.BatchDeleteLayerRequest.decode(B,B.uint32());break;default:B.skipType(se&7);break}}return X},fromJSON(b){return{create:ue(b.create)?a.PartialLayer.fromJSON(b.create):void 0,update:ue(b.update)?a.PartialLayerWithID.fromJSON(b.update):void 0,delete:ue(b.delete)?a.BatchDeleteLayerRequest.fromJSON(b.delete):void 0}},toJSON(b){const A={};return b.create!==void 0&&(A.create=b.create?a.PartialLayer.toJSON(b.create):void 0),b.update!==void 0&&(A.update=b.update?a.PartialLayerWithID.toJSON(b.update):void 0),b.delete!==void 0&&(A.delete=b.delete?a.BatchDeleteLayerRequest.toJSON(b.delete):void 0),A},fromPartial(b){const A=be();return A.create=b.create!==void 0&&b.create!==null?a.PartialLayer.fromPartial(b.create):void 0,A.update=b.update!==void 0&&b.update!==null?a.PartialLayerWithID.fromPartial(b.update):void 0,A.delete=b.delete!==void 0&&b.delete!==null?a.BatchDeleteLayerRequest.fromPartial(b.delete):void 0,A}};function Ve(){return{create:void 0,update:void 0,delete:void 0}}a.LayoutEvent={encode(b,A=h.Writer.create()){return b.create!==void 0&&a.Layout.encode(b.create,A.uint32(10).fork()).ldelim(),b.update!==void 0&&a.Layout.encode(b.update,A.uint32(18).fork()).ldelim(),b.delete!==void 0&&a.DeleteLayoutResponse.encode(b.delete,A.uint32(26).fork()).ldelim(),A},decode(b,A){const B=b instanceof h.Reader?b:new h.Reader(b);let ie=A===void 0?B.len:B.pos+A;const X=Ve();for(;B.pos<ie;){const se=B.uint32();switch(se>>>3){case 1:X.create=a.Layout.decode(B,B.uint32());break;case 2:X.update=a.Layout.decode(B,B.uint32());break;case 3:X.delete=a.DeleteLayoutResponse.decode(B,B.uint32());break;default:B.skipType(se&7);break}}return X},fromJSON(b){return{create:ue(b.create)?a.Layout.fromJSON(b.create):void 0,update:ue(b.update)?a.Layout.fromJSON(b.update):void 0,delete:ue(b.delete)?a.DeleteLayoutResponse.fromJSON(b.delete):void 0}},toJSON(b){const A={};return b.create!==void 0&&(A.create=b.create?a.Layout.toJSON(b.create):void 0),b.update!==void 0&&(A.update=b.update?a.Layout.toJSON(b.update):void 0),b.delete!==void 0&&(A.delete=b.delete?a.DeleteLayoutResponse.toJSON(b.delete):void 0),A},fromPartial(b){const A=Ve();return A.create=b.create!==void 0&&b.create!==null?a.Layout.fromPartial(b.create):void 0,A.update=b.update!==void 0&&b.update!==null?a.Layout.fromPartial(b.update):void 0,A.delete=b.delete!==void 0&&b.delete!==null?a.DeleteLayoutResponse.fromPartial(b.delete):void 0,A}};function Ze(){return{create:void 0,update:void 0,delete:void 0,batch:void 0}}a.LayerEvent={encode(b,A=h.Writer.create()){return b.create!==void 0&&a.Layer.encode(b.create,A.uint32(10).fork()).ldelim(),b.update!==void 0&&a.Layer.encode(b.update,A.uint32(18).fork()).ldelim(),b.delete!==void 0&&a.DeleteLayerResponse.encode(b.delete,A.uint32(26).fork()).ldelim(),b.batch!==void 0&&a.BatchLayerResponse.encode(b.batch,A.uint32(34).fork()).ldelim(),A},decode(b,A){const B=b instanceof h.Reader?b:new h.Reader(b);let ie=A===void 0?B.len:B.pos+A;const X=Ze();for(;B.pos<ie;){const se=B.uint32();switch(se>>>3){case 1:X.create=a.Layer.decode(B,B.uint32());break;case 2:X.update=a.Layer.decode(B,B.uint32());break;case 3:X.delete=a.DeleteLayerResponse.decode(B,B.uint32());break;case 4:X.batch=a.BatchLayerResponse.decode(B,B.uint32());break;default:B.skipType(se&7);break}}return X},fromJSON(b){return{create:ue(b.create)?a.Layer.fromJSON(b.create):void 0,update:ue(b.update)?a.Layer.fromJSON(b.update):void 0,delete:ue(b.delete)?a.DeleteLayerResponse.fromJSON(b.delete):void 0,batch:ue(b.batch)?a.BatchLayerResponse.fromJSON(b.batch):void 0}},toJSON(b){const A={};return b.create!==void 0&&(A.create=b.create?a.Layer.toJSON(b.create):void 0),b.update!==void 0&&(A.update=b.update?a.Layer.toJSON(b.update):void 0),b.delete!==void 0&&(A.delete=b.delete?a.DeleteLayerResponse.toJSON(b.delete):void 0),b.batch!==void 0&&(A.batch=b.batch?a.BatchLayerResponse.toJSON(b.batch):void 0),A},fromPartial(b){const A=Ze();return A.create=b.create!==void 0&&b.create!==null?a.Layer.fromPartial(b.create):void 0,A.update=b.update!==void 0&&b.update!==null?a.Layer.fromPartial(b.update):void 0,A.delete=b.delete!==void 0&&b.delete!==null?a.DeleteLayerResponse.fromPartial(b.delete):void 0,A.batch=b.batch!==void 0&&b.batch!==null?a.BatchLayerResponse.fromPartial(b.batch):void 0,A}};function Xe(){return{layout:void 0,layer:void 0}}a.Event={encode(b,A=h.Writer.create()){return b.layout!==void 0&&a.LayoutEvent.encode(b.layout,A.uint32(10).fork()).ldelim(),b.layer!==void 0&&a.LayerEvent.encode(b.layer,A.uint32(18).fork()).ldelim(),A},decode(b,A){const B=b instanceof h.Reader?b:new h.Reader(b);let ie=A===void 0?B.len:B.pos+A;const X=Xe();for(;B.pos<ie;){const se=B.uint32();switch(se>>>3){case 1:X.layout=a.LayoutEvent.decode(B,B.uint32());break;case 2:X.layer=a.LayerEvent.decode(B,B.uint32());break;default:B.skipType(se&7);break}}return X},fromJSON(b){return{layout:ue(b.layout)?a.LayoutEvent.fromJSON(b.layout):void 0,layer:ue(b.layer)?a.LayerEvent.fromJSON(b.layer):void 0}},toJSON(b){const A={};return b.layout!==void 0&&(A.layout=b.layout?a.LayoutEvent.toJSON(b.layout):void 0),b.layer!==void 0&&(A.layer=b.layer?a.LayerEvent.toJSON(b.layer):void 0),A},fromPartial(b){const A=Xe();return A.layout=b.layout!==void 0&&b.layout!==null?a.LayoutEvent.fromPartial(b.layout):void 0,A.layer=b.layer!==void 0&&b.layer!==null?a.LayerEvent.fromPartial(b.layer):void 0,A}};function ge(){return{name:"",target:void 0}}a.SubscribePayload={encode(b,A=h.Writer.create()){return b.name!==""&&A.uint32(10).string(b.name),b.target!==void 0&&a.EventTarget.encode(b.target,A.uint32(18).fork()).ldelim(),A},decode(b,A){const B=b instanceof h.Reader?b:new h.Reader(b);let ie=A===void 0?B.len:B.pos+A;const X=ge();for(;B.pos<ie;){const se=B.uint32();switch(se>>>3){case 1:X.name=B.string();break;case 2:X.target=a.EventTarget.decode(B,B.uint32());break;default:B.skipType(se&7);break}}return X},fromJSON(b){return{name:ue(b.name)?String(b.name):"",target:ue(b.target)?a.EventTarget.fromJSON(b.target):void 0}},toJSON(b){const A={};return b.name!==void 0&&(A.name=b.name),b.target!==void 0&&(A.target=b.target?a.EventTarget.toJSON(b.target):void 0),A},fromPartial(b){var A;const B=ge();return B.name=(A=b.name)!==null&&A!==void 0?A:"",B.target=b.target!==void 0&&b.target!==null?a.EventTarget.fromPartial(b.target):void 0,B}};function Re(){return{correlationId:void 0,subscribe:void 0,unsubscribe:void 0,publish:void 0,ping:void 0}}a.EventsStreamRequest={encode(b,A=h.Writer.create()){return b.correlationId!==void 0&&A.uint32(10).string(b.correlationId),b.subscribe!==void 0&&a.SubscribePayload.encode(b.subscribe,A.uint32(802).fork()).ldelim(),b.unsubscribe!==void 0&&a.SubscribePayload.encode(b.unsubscribe,A.uint32(810).fork()).ldelim(),b.publish!==void 0&&a.PublishEventRequest.encode(b.publish,A.uint32(818).fork()).ldelim(),b.ping!==void 0&&A.uint32(826).string(b.ping),A},decode(b,A){const B=b instanceof h.Reader?b:new h.Reader(b);let ie=A===void 0?B.len:B.pos+A;const X=Re();for(;B.pos<ie;){const se=B.uint32();switch(se>>>3){case 1:X.correlationId=B.string();break;case 100:X.subscribe=a.SubscribePayload.decode(B,B.uint32());break;case 101:X.unsubscribe=a.SubscribePayload.decode(B,B.uint32());break;case 102:X.publish=a.PublishEventRequest.decode(B,B.uint32());break;case 103:X.ping=B.string();break;default:B.skipType(se&7);break}}return X},fromJSON(b){return{correlationId:ue(b.correlationId)?String(b.correlationId):void 0,subscribe:ue(b.subscribe)?a.SubscribePayload.fromJSON(b.subscribe):void 0,unsubscribe:ue(b.unsubscribe)?a.SubscribePayload.fromJSON(b.unsubscribe):void 0,publish:ue(b.publish)?a.PublishEventRequest.fromJSON(b.publish):void 0,ping:ue(b.ping)?String(b.ping):void 0}},toJSON(b){const A={};return b.correlationId!==void 0&&(A.correlationId=b.correlationId),b.subscribe!==void 0&&(A.subscribe=b.subscribe?a.SubscribePayload.toJSON(b.subscribe):void 0),b.unsubscribe!==void 0&&(A.unsubscribe=b.unsubscribe?a.SubscribePayload.toJSON(b.unsubscribe):void 0),b.publish!==void 0&&(A.publish=b.publish?a.PublishEventRequest.toJSON(b.publish):void 0),b.ping!==void 0&&(A.ping=b.ping),A},fromPartial(b){var A,B;const ie=Re();return ie.correlationId=(A=b.correlationId)!==null&&A!==void 0?A:void 0,ie.subscribe=b.subscribe!==void 0&&b.subscribe!==null?a.SubscribePayload.fromPartial(b.subscribe):void 0,ie.unsubscribe=b.unsubscribe!==void 0&&b.unsubscribe!==null?a.SubscribePayload.fromPartial(b.unsubscribe):void 0,ie.publish=b.publish!==void 0&&b.publish!==null?a.PublishEventRequest.fromPartial(b.publish):void 0,ie.ping=(B=b.ping)!==null&&B!==void 0?B:void 0,ie}};function Te(){return{code:0,message:""}}a.EventsStreamError={encode(b,A=h.Writer.create()){return b.code!==0&&A.uint32(8).int32(b.code),b.message!==""&&A.uint32(18).string(b.message),A},decode(b,A){const B=b instanceof h.Reader?b:new h.Reader(b);let ie=A===void 0?B.len:B.pos+A;const X=Te();for(;B.pos<ie;){const se=B.uint32();switch(se>>>3){case 1:X.code=B.int32();break;case 2:X.message=B.string();break;default:B.skipType(se&7);break}}return X},fromJSON(b){return{code:ue(b.code)?Number(b.code):0,message:ue(b.message)?String(b.message):""}},toJSON(b){const A={};return b.code!==void 0&&(A.code=Math.round(b.code)),b.message!==void 0&&(A.message=b.message),A},fromPartial(b){var A,B;const ie=Te();return ie.code=(A=b.code)!==null&&A!==void 0?A:0,ie.message=(B=b.message)!==null&&B!==void 0?B:"",ie}};function Ae(){return{reauthenticate:!1,beforeTimestamp:""}}a.EventsStreamReconnectRequest={encode(b,A=h.Writer.create()){return b.reauthenticate===!0&&A.uint32(8).bool(b.reauthenticate),b.beforeTimestamp!==""&&A.uint32(18).string(b.beforeTimestamp),A},decode(b,A){const B=b instanceof h.Reader?b:new h.Reader(b);let ie=A===void 0?B.len:B.pos+A;const X=Ae();for(;B.pos<ie;){const se=B.uint32();switch(se>>>3){case 1:X.reauthenticate=B.bool();break;case 2:X.beforeTimestamp=B.string();break;default:B.skipType(se&7);break}}return X},fromJSON(b){return{reauthenticate:ue(b.reauthenticate)?Boolean(b.reauthenticate):!1,beforeTimestamp:ue(b.beforeTimestamp)?String(b.beforeTimestamp):""}},toJSON(b){const A={};return b.reauthenticate!==void 0&&(A.reauthenticate=b.reauthenticate),b.beforeTimestamp!==void 0&&(A.beforeTimestamp=b.beforeTimestamp),A},fromPartial(b){var A,B;const ie=Ae();return ie.reauthenticate=(A=b.reauthenticate)!==null&&A!==void 0?A:!1,ie.beforeTimestamp=(B=b.beforeTimestamp)!==null&&B!==void 0?B:"",ie}};function _e(){return{correlationId:void 0,sessionId:void 0,event:void 0,pong:void 0,error:void 0,subscribed:void 0,unsubscribed:void 0,published:void 0,reconnectBefore:void 0}}a.EventsStreamResponse={encode(b,A=h.Writer.create()){return b.correlationId!==void 0&&A.uint32(18).string(b.correlationId),b.sessionId!==void 0&&A.uint32(26).string(b.sessionId),b.event!==void 0&&a.PublishEventResponse.encode(b.event,A.uint32(802).fork()).ldelim(),b.pong!==void 0&&A.uint32(1602).string(b.pong),b.error!==void 0&&a.EventsStreamError.encode(b.error,A.uint32(1610).fork()).ldelim(),b.subscribed!==void 0&&a.SubscribePayload.encode(b.subscribed,A.uint32(1618).fork()).ldelim(),b.unsubscribed!==void 0&&a.SubscribePayload.encode(b.unsubscribed,A.uint32(1626).fork()).ldelim(),b.published!==void 0&&a.PublishEventResponse.encode(b.published,A.uint32(1634).fork()).ldelim(),b.reconnectBefore!==void 0&&a.EventsStreamReconnectRequest.encode(b.reconnectBefore,A.uint32(1642).fork()).ldelim(),A},decode(b,A){const B=b instanceof h.Reader?b:new h.Reader(b);let ie=A===void 0?B.len:B.pos+A;const X=_e();for(;B.pos<ie;){const se=B.uint32();switch(se>>>3){case 2:X.correlationId=B.string();break;case 3:X.sessionId=B.string();break;case 100:X.event=a.PublishEventResponse.decode(B,B.uint32());break;case 200:X.pong=B.string();break;case 201:X.error=a.EventsStreamError.decode(B,B.uint32());break;case 202:X.subscribed=a.SubscribePayload.decode(B,B.uint32());break;case 203:X.unsubscribed=a.SubscribePayload.decode(B,B.uint32());break;case 204:X.published=a.PublishEventResponse.decode(B,B.uint32());break;case 205:X.reconnectBefore=a.EventsStreamReconnectRequest.decode(B,B.uint32());break;default:B.skipType(se&7);break}}return X},fromJSON(b){return{correlationId:ue(b.correlationId)?String(b.correlationId):void 0,sessionId:ue(b.sessionId)?String(b.sessionId):void 0,event:ue(b.event)?a.PublishEventResponse.fromJSON(b.event):void 0,pong:ue(b.pong)?String(b.pong):void 0,error:ue(b.error)?a.EventsStreamError.fromJSON(b.error):void 0,subscribed:ue(b.subscribed)?a.SubscribePayload.fromJSON(b.subscribed):void 0,unsubscribed:ue(b.unsubscribed)?a.SubscribePayload.fromJSON(b.unsubscribed):void 0,published:ue(b.published)?a.PublishEventResponse.fromJSON(b.published):void 0,reconnectBefore:ue(b.reconnectBefore)?a.EventsStreamReconnectRequest.fromJSON(b.reconnectBefore):void 0}},toJSON(b){const A={};return b.correlationId!==void 0&&(A.correlationId=b.correlationId),b.sessionId!==void 0&&(A.sessionId=b.sessionId),b.event!==void 0&&(A.event=b.event?a.PublishEventResponse.toJSON(b.event):void 0),b.pong!==void 0&&(A.pong=b.pong),b.error!==void 0&&(A.error=b.error?a.EventsStreamError.toJSON(b.error):void 0),b.subscribed!==void 0&&(A.subscribed=b.subscribed?a.SubscribePayload.toJSON(b.subscribed):void 0),b.unsubscribed!==void 0&&(A.unsubscribed=b.unsubscribed?a.SubscribePayload.toJSON(b.unsubscribed):void 0),b.published!==void 0&&(A.published=b.published?a.PublishEventResponse.toJSON(b.published):void 0),b.reconnectBefore!==void 0&&(A.reconnectBefore=b.reconnectBefore?a.EventsStreamReconnectRequest.toJSON(b.reconnectBefore):void 0),A},fromPartial(b){var A,B,ie;const X=_e();return X.correlationId=(A=b.correlationId)!==null&&A!==void 0?A:void 0,X.sessionId=(B=b.sessionId)!==null&&B!==void 0?B:void 0,X.event=b.event!==void 0&&b.event!==null?a.PublishEventResponse.fromPartial(b.event):void 0,X.pong=(ie=b.pong)!==null&&ie!==void 0?ie:void 0,X.error=b.error!==void 0&&b.error!==null?a.EventsStreamError.fromPartial(b.error):void 0,X.subscribed=b.subscribed!==void 0&&b.subscribed!==null?a.SubscribePayload.fromPartial(b.subscribed):void 0,X.unsubscribed=b.unsubscribed!==void 0&&b.unsubscribed!==null?a.SubscribePayload.fromPartial(b.unsubscribed):void 0,X.published=b.published!==void 0&&b.published!==null?a.PublishEventResponse.fromPartial(b.published):void 0,X.reconnectBefore=b.reconnectBefore!==void 0&&b.reconnectBefore!==null?a.EventsStreamReconnectRequest.fromPartial(b.reconnectBefore):void 0,X}};class et{constructor(A){this.rpc=A,this.Stream=this.Stream.bind(this),this.Publish=this.Publish.bind(this)}Stream(A){const B=A.pipe(y.map(X=>a.EventsStreamRequest.encode(X).finish()));return this.rpc.bidirectionalStreamingRequest("apis.layout.v2.EventsService","Stream",B).pipe(y.map(X=>a.EventsStreamResponse.decode(new h.Reader(X))))}Publish(A){const B=a.PublishEventRequest.encode(A).finish();return this.rpc.request("apis.layout.v2.EventsService","Publish",B).then(X=>a.PublishEventResponse.decode(new h.Reader(X)))}}a.EventsServiceClientImpl=et,a.EventsServiceDefinition={name:"EventsService",fullName:"apis.layout.v2.EventsService",methods:{stream:{name:"Stream",requestType:a.EventsStreamRequest,requestStream:!0,responseType:a.EventsStreamResponse,responseStream:!0,options:{}},publish:{name:"Publish",requestType:a.PublishEventRequest,requestStream:!1,responseType:a.PublishEventResponse,responseStream:!1,options:{}}}};class Ce{constructor(A){this.rpc=A,this.ListLayers=this.ListLayers.bind(this),this.CreateLayer=this.CreateLayer.bind(this),this.GetLayer=this.GetLayer.bind(this),this.UpdateLayer=this.UpdateLayer.bind(this),this.DeleteLayer=this.DeleteLayer.bind(this),this.Batch=this.Batch.bind(this)}ListLayers(A){const B=a.ListLayersRequest.encode(A).finish();return this.rpc.request("apis.layout.v2.LayerService","ListLayers",B).then(X=>a.ListLayersResponse.decode(new h.Reader(X)))}CreateLayer(A){const B=a.CreateLayerRequest.encode(A).finish();return this.rpc.request("apis.layout.v2.LayerService","CreateLayer",B).then(X=>a.Layer.decode(new h.Reader(X)))}GetLayer(A){const B=a.GetLayerRequest.encode(A).finish();return this.rpc.request("apis.layout.v2.LayerService","GetLayer",B).then(X=>a.Layer.decode(new h.Reader(X)))}UpdateLayer(A){const B=a.UpdateLayerRequest.encode(A).finish();return this.rpc.request("apis.layout.v2.LayerService","UpdateLayer",B).then(X=>a.Layer.decode(new h.Reader(X)))}DeleteLayer(A){const B=a.DeleteLayerRequest.encode(A).finish();return this.rpc.request("apis.layout.v2.LayerService","DeleteLayer",B).then(X=>a.DeleteLayerResponse.decode(new h.Reader(X)))}Batch(A){const B=a.BatchLayerRequest.encode(A).finish();return this.rpc.request("apis.layout.v2.LayerService","Batch",B).then(X=>a.BatchLayerResponse.decode(new h.Reader(X)))}}a.LayerServiceClientImpl=Ce,a.LayerServiceDefinition={name:"LayerService",fullName:"apis.layout.v2.LayerService",methods:{listLayers:{name:"ListLayers",requestType:a.ListLayersRequest,requestStream:!1,responseType:a.ListLayersResponse,responseStream:!1,options:{}},createLayer:{name:"CreateLayer",requestType:a.CreateLayerRequest,requestStream:!1,responseType:a.Layer,responseStream:!1,options:{}},getLayer:{name:"GetLayer",requestType:a.GetLayerRequest,requestStream:!1,responseType:a.Layer,responseStream:!1,options:{}},updateLayer:{name:"UpdateLayer",requestType:a.UpdateLayerRequest,requestStream:!1,responseType:a.Layer,responseStream:!1,options:{}},deleteLayer:{name:"DeleteLayer",requestType:a.DeleteLayerRequest,requestStream:!1,responseType:a.DeleteLayerResponse,responseStream:!1,options:{}},batch:{name:"Batch",requestType:a.BatchLayerRequest,requestStream:!1,responseType:a.BatchLayerResponse,responseStream:!1,options:{}}}};class tt{constructor(A){this.rpc=A,this.ListLayouts=this.ListLayouts.bind(this),this.CreateLayout=this.CreateLayout.bind(this),this.GetLayout=this.GetLayout.bind(this),this.UpdateLayout=this.UpdateLayout.bind(this),this.DeleteLayout=this.DeleteLayout.bind(this)}ListLayouts(A){const B=a.ListLayoutsRequest.encode(A).finish();return this.rpc.request("apis.layout.v2.LayoutService","ListLayouts",B).then(X=>a.ListLayoutsResponse.decode(new h.Reader(X)))}CreateLayout(A){const B=a.CreateLayoutRequest.encode(A).finish();return this.rpc.request("apis.layout.v2.LayoutService","CreateLayout",B).then(X=>a.Layout.decode(new h.Reader(X)))}GetLayout(A){const B=a.GetLayoutRequest.encode(A).finish();return this.rpc.request("apis.layout.v2.LayoutService","GetLayout",B).then(X=>a.Layout.decode(new h.Reader(X)))}UpdateLayout(A){const B=a.UpdateLayoutRequest.encode(A).finish();return this.rpc.request("apis.layout.v2.LayoutService","UpdateLayout",B).then(X=>a.Layout.decode(new h.Reader(X)))}DeleteLayout(A){const B=a.DeleteLayoutRequest.encode(A).finish();return this.rpc.request("apis.layout.v2.LayoutService","DeleteLayout",B).then(X=>a.DeleteLayoutResponse.decode(new h.Reader(X)))}}a.LayoutServiceClientImpl=tt,a.LayoutServiceDefinition={name:"LayoutService",fullName:"apis.layout.v2.LayoutService",methods:{listLayouts:{name:"ListLayouts",requestType:a.ListLayoutsRequest,requestStream:!1,responseType:a.ListLayoutsResponse,responseStream:!1,options:{}},createLayout:{name:"CreateLayout",requestType:a.CreateLayoutRequest,requestStream:!1,responseType:a.Layout,responseStream:!1,options:{}},getLayout:{name:"GetLayout",requestType:a.GetLayoutRequest,requestStream:!1,responseType:a.Layout,responseStream:!1,options:{}},updateLayout:{name:"UpdateLayout",requestType:a.UpdateLayoutRequest,requestStream:!1,responseType:a.Layout,responseStream:!1,options:{}},deleteLayout:{name:"DeleteLayout",requestType:a.DeleteLayoutRequest,requestStream:!1,responseType:a.DeleteLayoutResponse,responseStream:!1,options:{}}}};var ke=(()=>{if(typeof ke!="undefined")return ke;if(typeof self!="undefined")return self;if(typeof window!="undefined")return window;if(typeof commonjsGlobal!="undefined")return commonjsGlobal;throw"Unable to locate global object"})();h.util.Long!==p.default&&(h.util.Long=p.default,h.configure());function nt(b){return typeof b=="object"&&b!==null}function ue(b){return b!=null}}(api$3),function(a){var s=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(l,p,h,y){y===void 0&&(y=h),Object.defineProperty(l,y,{enumerable:!0,get:function(){return p[h]}})}:function(l,p,h,y){y===void 0&&(y=h),l[y]=p[h]}),u=commonjsGlobal&&commonjsGlobal.__exportStar||function(l,p){for(var h in l)h!=="default"&&!p.hasOwnProperty(h)&&s(p,l,h)};Object.defineProperty(a,"__esModule",{value:!0}),a.layoutApiEventMap=a.eventsApiSupportedEvents=a.eventsApiEventRpcCalls=void 0;const d=api$3;u(api$3,a),a.eventsApiEventRpcCalls={ping:"pong",publish:"published",subscribe:"subscribed",unsubscribe:"unsubscribed"},a.eventsApiSupportedEvents=[...Object.values(a.eventsApiEventRpcCalls),"error","event","reconnectBefore"],a.layoutApiEventMap={[d.EventType.EVENT_TYPE_LAYOUT]:"layout",[d.EventType.EVENT_TYPE_LAYER]:"layer",[d.EventType.EVENT_TYPE_UNSPECIFIED]:"unspecified"}}(dist$3);var api$2={},browser$2=!1,__viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$3=getAugmentedNamespace(__viteBrowserExternal$1),logger$1={};class EnhancedMap extends Map{computeIfAbsent(s,u){if(this.has(s))return this.get(s);const d=u(s);return this.set(s,d),d}computeIfPresent(s,u){const d=this.get(s);if(d===void 0)return;const l=u(s,d);return l!==void 0?this.set(s,l):this.delete(s),l}compute(s,u){const d=this.get(s),l=u(s,d);return l?this.set(s,l):this.delete(s),l}}var InternalLogLevel;(function(a){a[a.Trace=0]="Trace",a[a.Debug=1]="Debug",a[a.Info=2]="Info",a[a.Warn=3]="Warn",a[a.Error=4]="Error"})(InternalLogLevel||(InternalLogLevel={}));function getInternalLogger(a){return provider.getLogger(a)}const INTERNAL_LOGGING_SETTINGS={setInternalLogLevel:a=>provider.changeLogLevel(a),setOutput:a=>provider.changeOutput(a),reset:()=>provider.reset()};class InternalLoggerImpl{constructor(s,u,d){this._name=s,this._level=u,this._fnOutput=d}trace(s){this.log(InternalLogLevel.Trace,s)}debug(s){this.log(InternalLogLevel.Debug,s)}error(s,u){this.log(InternalLogLevel.Error,s,u)}info(s){this.log(InternalLogLevel.Info,s)}warn(s,u){this.log(InternalLogLevel.Warn,s,u)}setLevel(s){this._level=s}setOutput(s){this._fnOutput=s}log(s,u,d){this._level>s||this._fnOutput(`${InternalLogLevel[this._level].toString()} <INTERNAL LOGGER> ${this._name} ${u()}${d?`
`+d.stack:""}`)}}class InternalProviderImpl{constructor(){this._loggers=new EnhancedMap,this._logLevel=InternalLogLevel.Error,this._fnOutput=InternalProviderImpl.logConsole}getLogger(s){return this._loggers.computeIfAbsent(s,u=>new InternalLoggerImpl(u,this._logLevel,this._fnOutput))}changeLogLevel(s){this._logLevel=s,this._loggers.forEach(u=>u.setLevel(s))}changeOutput(s){this._fnOutput=s,this._loggers.forEach(u=>u.setOutput(this._fnOutput))}reset(){this.changeLogLevel(InternalLogLevel.Error),this._fnOutput=InternalProviderImpl.logConsole,this._loggers.forEach(s=>s.setOutput(this._fnOutput))}static logConsole(s){console&&console.log&&console.log(s)}}const provider=new InternalProviderImpl;var InternalLogger=Object.freeze({__proto__:null,get InternalLogLevel(){return InternalLogLevel},getInternalLogger,INTERNAL_LOGGING_SETTINGS}),LogLevel;(function(a){a[a.Trace=0]="Trace",a[a.Debug=1]="Debug",a[a.Info=2]="Info",a[a.Warn=3]="Warn",a[a.Error=4]="Error",a[a.Fatal=5]="Fatal"})(LogLevel||(LogLevel={})),function(a){function s(u){switch(u.toLowerCase()){case"trace":return a.Trace;case"debug":return a.Debug;case"info":return a.Info;case"warn":return a.Warn;case"error":return a.Error;case"fatal":return a.Fatal;default:return}}a.toLogLevel=s}(LogLevel||(LogLevel={}));class CoreLoggerImpl{constructor(s){this._runtime=s}get id(){return this._runtime.id}get logLevel(){return this._runtime.level}get runtimeSettings(){return Object.assign({},this._runtime)}set runtimeSettings(s){this._runtime=s}trace(s,...u){this.logMessage(LogLevel.Trace,s,u)}debug(s,...u){this.logMessage(LogLevel.Debug,s,u)}info(s,...u){this.logMessage(LogLevel.Info,s,u)}warn(s,...u){this.logMessage(LogLevel.Warn,s,u)}error(s,...u){this.logMessage(LogLevel.Error,s,u)}fatal(s,...u){this.logMessage(LogLevel.Fatal,s,u)}logMessage(s,u,d){if(this._runtime.level>s)return;const l=Date.now(),p=typeof u=="string"?u:u(),h=CoreLoggerImpl.getErrorAndArgs(d);switch(this._runtime.channel.type){case"RawLogChannel":this._runtime.channel.write({message:p,exception:h.error,args:h.args,timeInMillis:l,level:s,logNames:this._runtime.name},this._runtime.argumentFormatter);return;case"LogChannel":this._runtime.channel.write(this.createLogMessage(p,s,h,l));break}}formatArgValue(s){try{return this._runtime.argumentFormatter(s)}catch{return`>>ARG CONVERT FAILED: '${s!==void 0?s.toString():"undefined"}'<<`}}createLogMessage(s,u,d,l){let p;const h=d.error,y=d.args;h&&(p=`${h.name}: ${h.message}`,h.stack&&(p+=`@
${h.stack}`));const _=this._runtime.dateFormatter(l);let E=LogLevel[u].toUpperCase();E.length<5&&(E+=" ");const I=typeof this._runtime.name=="string"?this._runtime.name:this._runtime.name.join(", "),N=typeof y!="undefined"&&y.length>0?" ["+y.map(C=>this.formatArgValue(C)).join(", ")+"]":"";return{message:_+" "+E+" ["+I+"] "+s+N,error:p}}static getErrorAndArgs(s){if(s.length===0)return{};let u,d;const l=s[0];if(l instanceof Error)return u=l,d=s.length>1?s.slice(1):void 0,{error:u,args:d};if(typeof l=="function"){const p=l();return p instanceof Error?(u=p,d=s.length>1?s.slice(1):void 0,{error:u,args:d}):s.length===1?Array.isArray(p)?{args:p.length>0?p:void 0}:{args:p}:Array.isArray(p)?{args:[...p,...s.slice(1)]}:{args:[p,...s.slice(1)]}}return{args:s}}}function padStart(a,s,u=" "){return padInternal(a,s,"start",u)}function padEnd(a,s,u=" "){return padInternal(a,s,"end",u)}function maxLengthStringValueInArray(a){return a.map(s=>s.length).reduce((s,u)=>u>s?u:s,0)}function padInternal(a,s,u,d=" "){if(s<=a.length)return a;if(d.length>1)throw new Error(`Fill char must be one char exactly, it is: ${d.length}`);const l=s-a.length;let p="";for(let h=0;h<l;h++)p+=d;return u==="start"?p+a:a+p}function formatArgument(a){return a===void 0?"undefined":JSON.stringify(a)}function formatDate(a){const s=new Date(a),u=s.getFullYear(),d=padStart((s.getMonth()+1).toString(),2,"0"),l=padStart(s.getDate().toString(),2,"0"),p=padStart(s.getHours().toString(),2,"0"),h=padStart(s.getMinutes().toString(),2,"0"),y=padStart(s.getSeconds().toString(),2,"0"),_=padStart(s.getMilliseconds().toString(),2,"0");return`${u}-${d}-${l} ${p}:${h}:${y},${_}`}class ConsoleLogChannel{constructor(){this.type="LogChannel"}write(s){console&&console.log&&console.log(s.message+(s.error?`
${s.error}`:""))}}var DefaultChannels;(function(a){function s(){return new ConsoleLogChannel}a.createConsoleChannel=s})(DefaultChannels||(DefaultChannels={}));class LogProviderImpl{constructor(s,u){this._log=getInternalLogger("core.impl.LogProviderImpl"),this._name=s,this._settings=u,this._loggers=new EnhancedMap,this._idToKeyMap=new EnhancedMap,this._globalRuntimeSettings={level:u.level,channel:u.channel},this._nextLoggerId=1,this._log.trace(()=>`Created LogProviderImpl with settings: ${JSON.stringify(this._settings)}`)}get runtimeSettings(){return Object.assign(Object.assign({},this._settings),{level:this._globalRuntimeSettings.level,channel:this._globalRuntimeSettings.channel})}getLogger(s){return this.getOrCreateLogger(s)}updateLoggerRuntime(s,u){this._log.debug(()=>`Updating logger ${s.id} runtime settings using: '${JSON.stringify(u)}'`);const d=this._idToKeyMap.get(s.id);return d===void 0?(this._log.warn(()=>`Cannot update logger with id: ${s.id}, it was not found.`),!1):(this._loggers.computeIfPresent(d,(l,p)=>(p.runtimeSettings=LogProviderImpl.mergeRuntimeSettingsIntoLogRuntime(p.runtimeSettings,u),p)),!0)}updateRuntimeSettings(s){this._log.debug(()=>`Updating global runtime settings and updating existing loggers runtime settings using: '${JSON.stringify(s)}'`),this._globalRuntimeSettings={level:s.level!==void 0?s.level:this._globalRuntimeSettings.level,channel:s.channel!==void 0?s.channel:this._globalRuntimeSettings.channel},this._loggers.forEach(u=>u.runtimeSettings=LogProviderImpl.mergeRuntimeSettingsIntoLogRuntime(u.runtimeSettings,s))}clear(){this._loggers.clear(),this._idToKeyMap.clear(),this._globalRuntimeSettings=Object.assign({},this._settings),this._nextLoggerId=1}getOrCreateLogger(s){const u=LogProviderImpl.createKey(s),d=this._loggers.computeIfAbsent(u,()=>{const l={level:this._globalRuntimeSettings.level,channel:this._globalRuntimeSettings.channel,id:this.nextLoggerId(),name:s,argumentFormatter:this._settings.argumentFormatter,dateFormatter:this._settings.dateFormatter};return new CoreLoggerImpl(l)});return this._idToKeyMap.computeIfAbsent(d.id,()=>u),d}nextLoggerId(){const s=this._name+"_"+this._nextLoggerId;return this._nextLoggerId++,s}static mergeRuntimeSettingsIntoLogRuntime(s,u){return Object.assign(Object.assign({},s),{level:u.level!==void 0?u.level:s.level,channel:u.channel!==void 0?u.channel:s.channel})}static createKey(s){return typeof s=="string"?s:s.join(",")}}function createLogProvider(a,s){return new LogProviderImpl(a,s)}var index$2=Object.freeze({__proto__:null,EnhancedMap,padStart,padEnd,maxLengthStringValueInArray});class CategoryImpl{constructor(s,u,d,l){this._children=[],this._logger=s,this._name=u,this._parent=d,this._fnGetOrCreateChildCategory=l}get name(){return this._name}get parent(){return this._parent}get path(){const s=[];let u=this;for(;u!==void 0;)s.push(u.name),u=u.parent;return s.reverse()}get children(){return[...this._children]}addChild(s){if(s.parent!==this)throw new Error(`Cannot add child '${s.name}', expected parent '${this._name} but got ${s.parent?s.parent.name:"undefined"}'`);this._children.push(s)}getChildCategory(s){const u=this._children.find(d=>d.name===s);return u!==void 0?u:this._fnGetOrCreateChildCategory(s,this)}get id(){return this._logger.id}get logLevel(){return this._logger.logLevel}get runtimeSettings(){return this._logger.runtimeSettings}get logger(){return this._logger}trace(s,...u){this._logger.trace(s,...u)}debug(s,...u){this._logger.debug(s,...u)}info(s,...u){this._logger.info(s,...u)}warn(s,...u){this._logger.warn(s,...u)}error(s,...u){this._logger.error(s,...u)}fatal(s,...u){this._logger.fatal(s,...u)}}const CATEGORY_PATH_SEPARATOR="#";class CategoryProviderImpl{constructor(s,u){this._name=s,this._initialConfig=u,this._categoryStorage=new CategoryStorage(s,u)}get name(){return this._name}get config(){return this._initialConfig}get runtimeConfig(){return this._categoryStorage.getCurrentRuntimeConfig()}getCategory(s,u){return this._categoryStorage.getOrCreateCategory(s,u)}updateRuntimeSettingsCategory(s,u){this._categoryStorage.updateRuntimeSettingsCategory(s,u)}updateRuntimeSettings(s){this._categoryStorage.updateRuntimeSettings(s)}getRegisteredCategories(){return this._categoryStorage.getRegisteredCategories()}getCategoryByPath(s){return this._categoryStorage.getCategoryByPath(s)}}class CategoryStorage{constructor(s,u){this._categoriesById=new Map,this._categoriesByPath=new Map,this._categoryProviderName=s,this._allowSameCategoryName=u.allowSameCategoryName,this._logProvider=createLogProvider(s,Object.assign({},u)),this.getOrCreateCategory=this.getOrCreateCategory.bind(this)}getOrCreateCategory(s,u){if(s.indexOf(CATEGORY_PATH_SEPARATOR)!==-1)throw new Error(`Cannot create category '${s}', name cannot contain a '${CATEGORY_PATH_SEPARATOR}'.`);const d=u!==void 0?this.getParentCategory(u):void 0;return d===void 0?this.getOrCreateRootCategory(s):this.getOrCreateChildCategory(s,d)}updateRuntimeSettingsCategory(s,u){if(!s.id.startsWith(this._categoryProviderName))throw new Error(`Category '${s.name}' with LogId '${s.id}' is from a different CategoryProvider, cannot mix categories between providers.`);const d=this._categoriesById.get(s.id);d!==void 0&&(this._logProvider.updateLoggerRuntime(d.logger,{level:u.level}),!(u.disableRecursion!==void 0&&u.disableRecursion)&&d.children.forEach(l=>this.updateRuntimeSettingsCategory(l,u)))}updateRuntimeSettings(s){this._logProvider.updateRuntimeSettings(s)}getCurrentRuntimeConfig(){return Object.assign(Object.assign({},this._logProvider.runtimeSettings),{allowSameCategoryName:this._allowSameCategoryName})}getRegisteredCategories(){return[...this._categoriesById.values()]}getCategoryByPath(s){return this._categoriesByPath.get(s)}getParentCategory(s){let u;if(CategoryStorage.isLogId(s)){if(u=this._categoriesById.get(s),u===void 0)throw new Error(`Parent category was not found by LogId '${s}'. Are you sure you passed in the correct argument?`)}else if(u=this._categoriesById.get(s.id),u===void 0)throw new Error(`Parent category '${s.name}' was not found by it's LogId '${s.id}'. Are you sure you passed in the correct parent category?`);return u}getOrCreateRootCategory(s){const u=this._categoriesByPath.get(s);if(u){if(!this._allowSameCategoryName)throw new Error(`Category '${s} already exists, config flag allowSameCategoryName=false - therefore matching version 1 behavior (hence this Error)`);return u}const d=this._logProvider.getLogger(s),l=new CategoryImpl(d,s,void 0,this.getOrCreateCategory);return this._categoriesById.set(l.id,l),this._categoriesByPath.set(s,l),l}getOrCreateChildCategory(s,u){if(!u.id.startsWith(this._categoryProviderName))throw new Error(`Parent category '${u.name}' with LogId '${u.id}' is from a different CategoryProvider, cannot mix categories between providers.`);const d=[...u.path,s].join(CATEGORY_PATH_SEPARATOR),l=this._categoriesByPath.get(d);if(l){if(!this._allowSameCategoryName)throw new Error(`Child category '${s} already exists for parent category ${u.name}, config flag allowSameCategoryName=false - therefore matching version 1 behavior (hence this Error)`);return l}const p=this._logProvider.getLogger(d);this._logProvider.updateLoggerRuntime(p,{level:u.logger.runtimeSettings.level,channel:u.logger.runtimeSettings.channel});const h=new CategoryImpl(p,s,u,this.getOrCreateCategory);return this._categoriesById.set(h.id,h),this._categoriesByPath.set(h.path.join(CATEGORY_PATH_SEPARATOR),h),u.addChild(h),h}static isLogId(s){return typeof s=="string"}}class CategoryControlProviderImpl{constructor(s,u){this._provider=s,this._messageChannel=u,this._originalLogLevels=CategoryControlProviderImpl.loadCurrentGroupLogLevels(s)}get name(){return this._provider.name}showSettings(){let s=`Available categories (CategoryProvider '${this._provider.name}'):
`;const u=this.createCategoryInfoHierarchy(),d=u.size.toString().length,l=index$2.maxLengthStringValueInArray([...u.values()].map(h=>h.category.name+" ".repeat(h.depth))),p=[...u.values()].map((h,y)=>CategoryControlProviderImpl.createSettingLineCategory(h,y,d,l));s+=p.join(`
`)+(p.length>0?`
`:""),this._messageChannel(s)}help(){const s=`You can use the following commands (CategoryProvider ${this._provider.name}):
  showSettings()
    Shows the current configuration settings.
  update(level: CategoryControlProviderLogLevel, categoryId?: number | string, noRecurse?: boolean)
    Change the log level for a category (by default recursively).
      @param level      The log level to set - must be one of 'trace', 'debug', 'info', 'warn', 'error' or 'fatal'
      @param categoryId The category id or path of a category (e.g. root#child1) to update. Use showSettings() for id and/or name.
                        When omitted, it applies the level to all categories recursively.
  reset()
    Resets the log levels of the config groups back to when this control provider was created.
  save()
    Saves the current log levels for all categories of this provider. Use restore() to load last saved state.
  restore()
    Restore stored saved state, if any. Log levels will be set according to the saved state.
  help()
    Shows this help.
`;this._messageChannel(s)}reset(){const s=new Map(this._provider.getRegisteredCategories().map(u=>[u.id,u]));this._originalLogLevels.forEach((u,d)=>{const l=s.get(d);l!==void 0&&this._provider.updateRuntimeSettingsCategory(l,{level:u,disableRecursion:!0}),s.delete(d)}),s.forEach(u=>{u.parent!==void 0&&this._provider.updateRuntimeSettingsCategory(u,{level:u.parent.logLevel,disableRecursion:!0})}),this._originalLogLevels=CategoryControlProviderImpl.loadCurrentGroupLogLevels(this._provider),this._messageChannel("Successfully reset log levels back to original state (from when this CategoryControlProvider was created).")}save(){if(!localStorage){this._messageChannel("Cannot save state, localStorage is not available.");return}const s=this._provider.getRegisteredCategories().filter(d=>d.parent===void 0).map(d=>CategoryControlProviderImpl.createCategorySaveData(d)),u={name:this._provider.name,rootCategories:s};localStorage.setItem(this.createKey(),JSON.stringify(u)),this._messageChannel(`Successfully saved state for CategoryControlProvider '${this._provider.name}'.`)}restore(s){const u=s!==void 0?s:!0;if(!localStorage){u&&this._messageChannel(`Will not attempt to restore state for CategoryControlProvider '${this._provider.name}', localStorage is not available.`);return}const d=this.createKey(),l=localStorage.getItem(d);if(l===null){u&&this._messageChannel(`Cannot restore state for CategoryControlProvider '${this._provider.name}', no data available.`);return}try{const p=JSON.parse(l);if(this._provider.name!==p.name){u&&this._messageChannel(`Cannot restore state for CategoryControlProvider '${this._provider.name}', data is not for provider - found name '${p.name}'.`);return}this.restoreBySaveData(p,u),this._messageChannel(`Successfully restored state for CategoryControlProvider '${this._provider.name}'`),this._originalLogLevels=CategoryControlProviderImpl.loadCurrentGroupLogLevels(this._provider)}catch{localStorage.removeItem(d),this._messageChannel(`Cannot restore state for CategoryControlProvider '${this._provider.name}', data is not valid. Invalid data removed from localStorage.`)}}update(s,u,d){typeof u=="undefined"?this.updateAll(s):typeof u=="number"?this.updateByIndex(s,u,d!==void 0?d:!1):this.updateByPath(s,u,d!==void 0?d:!1)}updateAll(s){const u=LogLevel.toLogLevel(s);this._provider.getRegisteredCategories().filter(d=>d.parent===void 0).forEach(d=>this._provider.updateRuntimeSettingsCategory(d,{level:u})),this._messageChannel(`Updated all categories to use log level '${s.toLowerCase()}'`)}updateByPath(s,u,d){const l=this._provider.getCategoryByPath(u);if(l===void 0){this._messageChannel(`Failed to find a provider by path '${u}', please make sure to separate the parts by a ${CATEGORY_PATH_SEPARATOR}.`);return}this._provider.updateRuntimeSettingsCategory(l,{level:LogLevel.toLogLevel(s),disableRecursion:d}),this._messageChannel(`Successfully updated category '${l.name}' with path '${u}' to log level '${s.toLowerCase()}'${d?"":" and recursively applied to children (if any)"}.`)}updateByIndex(s,u,d){if(u<0){this._messageChannel(`Cannot update category by index '${u}', it is negative.`);return}const l=this.createCategoryInfoHierarchy();if(u>=l.size){this._messageChannel(`Cannot update category by index '${u}', it is outside of the range of available categories, use showSettings() to see the indices.`);return}const p=[...l.values()][u].category;this._provider.updateRuntimeSettingsCategory(p,{level:LogLevel.toLogLevel(s),disableRecursion:d}),this._messageChannel(`Successfully updated category '${p.name}' by index '${u}' to log level '${s.toLowerCase()}'${d?"":" and recursively applied to children (if any)"}.`)}restoreBySaveData(s,u){const d=(l,p)=>{const h=p.length>0?p+CATEGORY_PATH_SEPARATOR+l.name:l.name,y=this._provider.getCategoryByPath(h);if(y!==void 0){const _=LogLevel.toLogLevel(l.level);_!==void 0?this._provider.updateRuntimeSettingsCategory(y,{level:_,disableRecursion:!0}):u&&this._messageChannel(`CategoryControlProvider '${this._provider.name}' - cannot restore log level for category path '${h}', log level is invalid.`);for(const E of l.children)d(E,h)}else u&&this._messageChannel(`CategoryControlProvider '${this._provider.name}' - failed to find a Category by path '${h}', will not restore category (and children)`)};for(const l of s.rootCategories)d(l,"")}createKey(){return`CategoryProvider-${this._provider.name}`}createCategoryInfoHierarchy(){const s=new Map;return this._provider.getRegisteredCategories().filter(d=>d.parent===void 0).forEach(d=>CategoryControlProviderImpl.addCategoryInfoHierarchy(d,0,s)),s}static createCategorySaveData(s){return{name:s.name,level:LogLevel[s.logLevel],children:s.children.map(u=>this.createCategorySaveData(u))}}static loadCurrentGroupLogLevels(s){return new Map(s.getRegisteredCategories().map(u=>[u.id,u.logLevel]))}static createSettingLineCategory(s,u,d,l){const h=" ".repeat(s.depth)+s.category.name;return`  [${index$2.padStart(u.toString(),d)}, ${index$2.padEnd(h,l)} (level=${index$2.padEnd(s.logLevel,5)})]`}static addCategoryInfoHierarchy(s,u,d){d.set(s.id,{category:s,logLevel:LogLevel[s.logLevel],depth:u}),s.children.forEach(l=>this.addCategoryInfoHierarchy(l,u+1,d))}}function categoryConfigDebug(a){return`CategoryConfig=level: ${LogLevel[a.level].toString()}, allowSameCategoryName=${a.allowSameCategoryName}`}class CategoryProviderService{constructor(){this._log=InternalLogger.getInternalLogger("category.impl.CategoryProviderService"),this._providers=new index$2.EnhancedMap}createLogProvider(s,u){const d=this._providers.compute(s,(l,p)=>{if(p)throw new Error(`CategoryProvider with name '${s}' already exists, cannot create another.`);const h=mergeWithDefaults(u);return this._log.debug(()=>`Creating new CategoryProvider with name '${s}', using config settings '${categoryConfigDebug(h)}'.`),new CategoryProviderImpl(s,h)});if(d)return d;throw new Error("No CategoryProvider? This is a bug.")}getCategoryControl(s){const u=s||(d=>{if(console&&console.log)console.log(d);else throw new Error("Cannot use console (it is not present), please specify a custom function to write to.")});return{help:()=>u(CategoryProviderService.help()),showSettings:()=>u(this.showSettings()),getProvider:d=>this.getCategoryControlProviderByIdOrName(d,u)}}clear(){this._providers.clear()}showSettings(){let s=`Available CategoryProviders:
`;const u=this._providers.size.toString().length,d=index$2.maxLengthStringValueInArray([...this._providers.keys()]),l=[...this._providers.entries()].map((p,h)=>{const y=p[0];return`  [${index$2.padStart(h.toString(),u)}, ${index$2.padEnd(y,d)}]`});return s+=l.join(`
`)+(l.length>0?`
`:""),s}getCategoryControlProviderByIdOrName(s,u){if(typeof s=="string"){const l=this._providers.get(s);if(l===void 0)throw new Error(`Provider with name '${s}' does not exist.`);return new CategoryControlProviderImpl(l,u)}const d=[...this._providers.values()];if(s<0||s>=d.length)throw new Error(`Provider with index '${s}' does not exist (outside of range).`);return new CategoryControlProviderImpl(d[s],u)}static help(){return`You can use the following commands:
  showSettings()
    Shows the current configuration settings.
  getProvider: (id: number | string): CategoryControlProvider
    Get access to a CategoryControlProvider to change log levels.
      @param id The id (use showSettings to see) or name of the provider
  help()
    Shows this help.
`}}const CATEGORY_PROVIDER_SERVICE=new CategoryProviderService,CATEGORY_LOG_CONTROL=a=>CATEGORY_PROVIDER_SERVICE.getCategoryControl(a);function mergeWithDefaults(a){const s={channel:DefaultChannels.createConsoleChannel(),allowSameCategoryName:!0,level:LogLevel.Error,dateFormatter:formatDate,argumentFormatter:formatArgument};return a?{channel:a.channel?a.channel:s.channel,allowSameCategoryName:a.allowSameCategoryName!==void 0?a.allowSameCategoryName:s.allowSameCategoryName,level:a.level?a.level:s.level,dateFormatter:a.dateFormatter?a.dateFormatter:s.dateFormatter,argumentFormatter:a.argumentFormatter?a.argumentFormatter:s.argumentFormatter}:s}var CategoryProvider;(function(a){function s(d,l){return CATEGORY_PROVIDER_SERVICE.createLogProvider(d,l)}a.createProvider=s;function u(){CATEGORY_PROVIDER_SERVICE.clear()}a.clear=u})(CategoryProvider||(CategoryProvider={}));var typescriptLoggingCategory_esm=Object.freeze(Object.defineProperty({__proto__:null,CATEGORY_LOG_CONTROL,get CategoryProvider(){return CategoryProvider}},Symbol.toStringTag,{value:"Module"})),require$$1=getAugmentedNamespace(typescriptLoggingCategory_esm);Object.defineProperty(logger$1,"__esModule",{value:!0}),logger$1.logger=void 0;const typescript_logging_1=require$$2$2,typescript_logging_category_style_1=require$$1;logger$1.logger=typescript_logging_category_style_1.CategoryProvider.createProvider("ApiStream",{allowSameCategoryName:!0,level:typescript_logging_1.LogLevel.Warn});var version$2="2.2.1",__createBinding$5=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(a,s,u,d){d===void 0&&(d=u);var l=Object.getOwnPropertyDescriptor(s,u);(!l||("get"in l?!s.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return s[u]}}),Object.defineProperty(a,d,l)}:function(a,s,u,d){d===void 0&&(d=u),a[d]=s[u]}),__setModuleDefault$5=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(a,s){Object.defineProperty(a,"default",{enumerable:!0,value:s})}:function(a,s){a.default=s}),__importStar$5=commonjsGlobal&&commonjsGlobal.__importStar||function(a){if(a&&a.__esModule)return a;var s={};if(a!=null)for(var u in a)u!=="default"&&Object.prototype.hasOwnProperty.call(a,u)&&__createBinding$5(s,a,u);return __setModuleDefault$5(s,a),s},__importDefault$h=commonjsGlobal&&commonjsGlobal.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(api$2,"__esModule",{value:!0}),api$2.ApiClient=void 0;const NiceGrpc$1=__importStar$5(lib$1),abort_controller_x_1=require$$1$1,detect_node_1=__importDefault$h(browser$2),NodeTransport=__importStar$5(require$$3),logger_1$8=logger$1,clientVersion$1=version$2;class ApiClient{constructor(s,u,d,l){this.sessionId=s,this.sdkVersion=d,this.version=clientVersion$1,this.log=logger_1$8.logger.getCategory(l),this.channel=NiceGrpc$1.createChannel(u,detect_node_1.default?NodeTransport.NodeHttpTransport():void 0),this.clientFactory=NiceGrpc$1.createClientFactory().use(this.logMiddleware.bind(this))}async*logMiddleware(s,u){const{path:d}=s.method;try{const l=yield*s.next(s.request,u);return this.log.debug(`-> ${d}: ok`),this.log.trace(`${JSON.stringify(s.request)} -> ${d}: ${JSON.stringify(l)}`),l}catch(l){throw this.log.trace(`${JSON.stringify(s.request)} -> ${d}`),l instanceof NiceGrpc$1.ClientError?this.log.warn(`-> ${d}: error: ${NiceGrpc$1.Status[l.code]}: ${l.details}`):(0,abort_controller_x_1.isAbortError)(l)?this.log.warn(`-> ${d}: cancel`):this.log.warn(`-> ${d}: error: ${l==null?void 0:l.stack}`),l}}setAccessToken(s){(this.accessToken==null||this.accessToken!=s)&&(this.log.debug("access token refreshed"),this.accessToken=s,this.setup())}makeGrpcMetadata(){let s=NiceGrpc$1.Metadata({Authorization:`Bearer ${this.accessToken}`,Version:this.version,SessionId:this.sessionId});return this.sdkVersion!=null&&s.set("SdkVersion",this.sdkVersion),s}setup(){let s={metadata:this.makeGrpcMetadata()};this._setup(s)}_setup(s){}}api$2.ApiClient=ApiClient;var decorator={};Object.defineProperty(decorator,"__esModule",{value:!0}),decorator.RequiresSdkAuthentication=void 0;function RequiresSdkAuthentication(){return function(a,s){let u;Object.defineProperty(a,s,{get:()=>{if(!u)throw new Error("Please authenticate the SDK by calling sdk.setAccessToken().");return u},set:d=>{u=d}})}}decorator.RequiresSdkAuthentication=RequiresSdkAuthentication;var __createBinding$4=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(a,s,u,d){d===void 0&&(d=u);var l=Object.getOwnPropertyDescriptor(s,u);(!l||("get"in l?!s.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return s[u]}}),Object.defineProperty(a,d,l)}:function(a,s,u,d){d===void 0&&(d=u),a[d]=s[u]}),__setModuleDefault$4=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(a,s){Object.defineProperty(a,"default",{enumerable:!0,value:s})}:function(a,s){a.default=s}),__decorate=commonjsGlobal&&commonjsGlobal.__decorate||function(a,s,u,d){var l=arguments.length,p=l<3?s:d===null?d=Object.getOwnPropertyDescriptor(s,u):d,h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")p=Reflect.decorate(a,s,u,d);else for(var y=a.length-1;y>=0;y--)(h=a[y])&&(p=(l<3?h(p):l>3?h(s,u,p):h(s,u))||p);return l>3&&p&&Object.defineProperty(s,u,p),p},__importStar$4=commonjsGlobal&&commonjsGlobal.__importStar||function(a){if(a&&a.__esModule)return a;var s={};if(a!=null)for(var u in a)u!=="default"&&Object.prototype.hasOwnProperty.call(a,u)&&__createBinding$4(s,a,u);return __setModuleDefault$4(s,a),s},__metadata=commonjsGlobal&&commonjsGlobal.__metadata||function(a,s){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(a,s)};Object.defineProperty(layoutapi,"__esModule",{value:!0}),layoutapi.LayoutApi=void 0,__importStar$4(lib$1);const LayoutApiModel=__importStar$4(dist$3),api_1$1=api$2,decorator_1=decorator,LOG_CATEGORY$1="LayoutApi";class LayoutApi extends api_1$1.ApiClient{constructor(s,u,d,l){super(s,d,l,LOG_CATEGORY$1),this.handlers={},this.eventApi=u,this.eventApi.on("event",{name:`${LayoutApi.LAYOUTAPI_EVENT_PREFIX}:*`,ignoreSessionEvents:!0},p=>{var h;const[,y,_]=p.name.split(":"),E=p.payload;for(const I of(h=this.handlers[y])!==null&&h!==void 0?h:[])I(Object.values(E).find(N=>!!N),_)})}_setup(s){this.layer=this.clientFactory.create(LayoutApiModel.LayerServiceDefinition,this.channel,{"*":s}),this.layout=this.clientFactory.create(LayoutApiModel.LayoutServiceDefinition,this.channel,{"*":s})}async subscribeToLayout(s){await Promise.all([this.eventApi.subscribe(`${LayoutApi.LAYOUTAPI_EVENT_PREFIX}:${LayoutApiModel.EventType.EVENT_TYPE_LAYER}:*`,{target:{layoutId:s}}),this.eventApi.subscribe(`${LayoutApi.LAYOUTAPI_EVENT_PREFIX}:${LayoutApiModel.EventType.EVENT_TYPE_LAYOUT}:*`,{target:{layoutId:s}})])}async unsubscribeFromLayout(s){await Promise.all([this.eventApi.unsubscribe(`${LayoutApi.LAYOUTAPI_EVENT_PREFIX}:${LayoutApiModel.EventType.EVENT_TYPE_LAYER}:*`,{target:{layoutId:s}}),this.eventApi.unsubscribe(`${LayoutApi.LAYOUTAPI_EVENT_PREFIX}:${LayoutApiModel.EventType.EVENT_TYPE_LAYOUT}:*`,{target:{layoutId:s}})])}on(s,u){var d;this.handlers[s]=(d=this.handlers[s])!==null&&d!==void 0?d:[],this.handlers[s].push(u)}off(s,u){this.handlers[s]=this.handlers[s].filter(d=>d!==u)}}LayoutApi.LAYOUTAPI_EVENT_PREFIX="lapi",__decorate([(0,decorator_1.RequiresSdkAuthentication)(),__metadata("design:type",Object)],LayoutApi.prototype,"layout",void 0),__decorate([(0,decorator_1.RequiresSdkAuthentication)(),__metadata("design:type",Object)],LayoutApi.prototype,"layer",void 0),layoutapi.LayoutApi=LayoutApi;var liveapi={},api$1={},timestamp$1={},__createBinding$3=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(a,s,u,d){d===void 0&&(d=u);var l=Object.getOwnPropertyDescriptor(s,u);(!l||("get"in l?!s.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return s[u]}}),Object.defineProperty(a,d,l)}:function(a,s,u,d){d===void 0&&(d=u),a[d]=s[u]}),__setModuleDefault$3=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(a,s){Object.defineProperty(a,"default",{enumerable:!0,value:s})}:function(a,s){a.default=s}),__importStar$3=commonjsGlobal&&commonjsGlobal.__importStar||function(a){if(a&&a.__esModule)return a;var s={};if(a!=null)for(var u in a)u!=="default"&&Object.prototype.hasOwnProperty.call(a,u)&&__createBinding$3(s,a,u);return __setModuleDefault$3(s,a),s},__importDefault$g=commonjsGlobal&&commonjsGlobal.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(timestamp$1,"__esModule",{value:!0}),timestamp$1.Timestamp=timestamp$1.protobufPackage=void 0;const long_1$1=__importDefault$g(long),_m0$1=__importStar$3(minimal$2);timestamp$1.protobufPackage="google.protobuf";function createBaseTimestamp(){return{seconds:0,nanos:0}}timestamp$1.Timestamp={encode(a,s=_m0$1.Writer.create()){return a.seconds!==0&&s.uint32(8).int64(a.seconds),a.nanos!==0&&s.uint32(16).int32(a.nanos),s},decode(a,s){const u=a instanceof _m0$1.Reader?a:new _m0$1.Reader(a);let d=s===void 0?u.len:u.pos+s;const l=createBaseTimestamp();for(;u.pos<d;){const p=u.uint32();switch(p>>>3){case 1:l.seconds=longToNumber(u.int64());break;case 2:l.nanos=u.int32();break;default:u.skipType(p&7);break}}return l},fromJSON(a){return{seconds:isSet(a.seconds)?Number(a.seconds):0,nanos:isSet(a.nanos)?Number(a.nanos):0}},toJSON(a){const s={};return a.seconds!==void 0&&(s.seconds=Math.round(a.seconds)),a.nanos!==void 0&&(s.nanos=Math.round(a.nanos)),s},fromPartial(a){var s,u;const d=createBaseTimestamp();return d.seconds=(s=a.seconds)!==null&&s!==void 0?s:0,d.nanos=(u=a.nanos)!==null&&u!==void 0?u:0,d}};var globalThis$1=(()=>{if(typeof globalThis$1!="undefined")return globalThis$1;if(typeof self!="undefined")return self;if(typeof window!="undefined")return window;if(typeof commonjsGlobal!="undefined")return commonjsGlobal;throw"Unable to locate global object"})();function longToNumber(a){if(a.gt(Number.MAX_SAFE_INTEGER))throw new globalThis$1.Error("Value is larger than Number.MAX_SAFE_INTEGER");return a.toNumber()}_m0$1.util.Long!==long_1$1.default&&(_m0$1.util.Long=long_1$1.default,_m0$1.configure());function isSet(a){return a!=null}var struct$1={};(function(a){var s=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(g,O,$,x){x===void 0&&(x=$);var Y=Object.getOwnPropertyDescriptor(O,$);(!Y||("get"in Y?!O.__esModule:Y.writable||Y.configurable))&&(Y={enumerable:!0,get:function(){return O[$]}}),Object.defineProperty(g,x,Y)}:function(g,O,$,x){x===void 0&&(x=$),g[x]=O[$]}),u=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(g,O){Object.defineProperty(g,"default",{enumerable:!0,value:O})}:function(g,O){g.default=O}),d=commonjsGlobal&&commonjsGlobal.__importStar||function(g){if(g&&g.__esModule)return g;var O={};if(g!=null)for(var $ in g)$!=="default"&&Object.prototype.hasOwnProperty.call(g,$)&&s(O,g,$);return u(O,g),O},l=commonjsGlobal&&commonjsGlobal.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(a,"__esModule",{value:!0}),a.ListValue=a.Value=a.Struct_FieldsEntry=a.Struct=a.nullValueToNumber=a.nullValueToJSON=a.nullValueFromJSON=a.NullValue=a.protobufPackage=void 0;const p=l(long),h=d(minimal$2);a.protobufPackage="google.protobuf";var y;(function(g){g.NULL_VALUE="NULL_VALUE"})(y=a.NullValue||(a.NullValue={}));function _(g){switch(g){case 0:case"NULL_VALUE":return y.NULL_VALUE;default:throw new V.Error("Unrecognized enum value "+g+" for enum NullValue")}}a.nullValueFromJSON=_;function E(g){switch(g){case y.NULL_VALUE:return"NULL_VALUE";default:return"UNKNOWN"}}a.nullValueToJSON=E;function I(g){switch(g){case y.NULL_VALUE:return 0;default:return 0}}a.nullValueToNumber=I;function N(){return{fields:{}}}a.Struct={encode(g,O=h.Writer.create()){return Object.entries(g.fields).forEach(([$,x])=>{x!==void 0&&a.Struct_FieldsEntry.encode({key:$,value:x},O.uint32(10).fork()).ldelim()}),O},decode(g,O){const $=g instanceof h.Reader?g:new h.Reader(g);let x=O===void 0?$.len:$.pos+O;const Y=N();for(;$.pos<x;){const te=$.uint32();switch(te>>>3){case 1:const ne=a.Struct_FieldsEntry.decode($,$.uint32());ne.value!==void 0&&(Y.fields[ne.key]=ne.value);break;default:$.skipType(te&7);break}}return Y},fromJSON(g){return{fields:J(g.fields)?Object.entries(g.fields).reduce((O,[$,x])=>(O[$]=x,O),{}):{}}},toJSON(g){const O={};return O.fields={},g.fields&&Object.entries(g.fields).forEach(([$,x])=>{O.fields[$]=x}),O},fromPartial(g){var O;const $=N();return $.fields=Object.entries((O=g.fields)!==null&&O!==void 0?O:{}).reduce((x,[Y,te])=>(te!==void 0&&(x[Y]=te),x),{}),$},wrap(g){const O=N();return g!==void 0&&Object.keys(g).forEach($=>{O.fields[$]=g[$]}),O},unwrap(g){const O={};return Object.keys(g.fields).forEach($=>{O[$]=g.fields[$]}),O}};function w(){return{key:"",value:void 0}}a.Struct_FieldsEntry={encode(g,O=h.Writer.create()){return g.key!==""&&O.uint32(10).string(g.key),g.value!==void 0&&a.Value.encode(a.Value.wrap(g.value),O.uint32(18).fork()).ldelim(),O},decode(g,O){const $=g instanceof h.Reader?g:new h.Reader(g);let x=O===void 0?$.len:$.pos+O;const Y=w();for(;$.pos<x;){const te=$.uint32();switch(te>>>3){case 1:Y.key=$.string();break;case 2:Y.value=a.Value.unwrap(a.Value.decode($,$.uint32()));break;default:$.skipType(te&7);break}}return Y},fromJSON(g){return{key:W(g.key)?String(g.key):"",value:W(g==null?void 0:g.value)?g.value:void 0}},toJSON(g){const O={};return g.key!==void 0&&(O.key=g.key),g.value!==void 0&&(O.value=g.value),O},fromPartial(g){var O,$;const x=w();return x.key=(O=g.key)!==null&&O!==void 0?O:"",x.value=($=g.value)!==null&&$!==void 0?$:void 0,x}};function C(){return{nullValue:void 0,numberValue:void 0,stringValue:void 0,boolValue:void 0,structValue:void 0,listValue:void 0}}a.Value={encode(g,O=h.Writer.create()){return g.nullValue!==void 0&&O.uint32(8).int32(I(g.nullValue)),g.numberValue!==void 0&&O.uint32(17).double(g.numberValue),g.stringValue!==void 0&&O.uint32(26).string(g.stringValue),g.boolValue!==void 0&&O.uint32(32).bool(g.boolValue),g.structValue!==void 0&&a.Struct.encode(a.Struct.wrap(g.structValue),O.uint32(42).fork()).ldelim(),g.listValue!==void 0&&a.ListValue.encode(a.ListValue.wrap(g.listValue),O.uint32(50).fork()).ldelim(),O},decode(g,O){const $=g instanceof h.Reader?g:new h.Reader(g);let x=O===void 0?$.len:$.pos+O;const Y=C();for(;$.pos<x;){const te=$.uint32();switch(te>>>3){case 1:Y.nullValue=_($.int32());break;case 2:Y.numberValue=$.double();break;case 3:Y.stringValue=$.string();break;case 4:Y.boolValue=$.bool();break;case 5:Y.structValue=a.Struct.unwrap(a.Struct.decode($,$.uint32()));break;case 6:Y.listValue=a.ListValue.unwrap(a.ListValue.decode($,$.uint32()));break;default:$.skipType(te&7);break}}return Y},fromJSON(g){return{nullValue:W(g.nullValue)?_(g.nullValue):void 0,numberValue:W(g.numberValue)?Number(g.numberValue):void 0,stringValue:W(g.stringValue)?String(g.stringValue):void 0,boolValue:W(g.boolValue)?Boolean(g.boolValue):void 0,structValue:J(g.structValue)?g.structValue:void 0,listValue:Array.isArray(g.listValue)?[...g.listValue]:void 0}},toJSON(g){const O={};return g.nullValue!==void 0&&(O.nullValue=g.nullValue!==void 0?E(g.nullValue):void 0),g.numberValue!==void 0&&(O.numberValue=g.numberValue),g.stringValue!==void 0&&(O.stringValue=g.stringValue),g.boolValue!==void 0&&(O.boolValue=g.boolValue),g.structValue!==void 0&&(O.structValue=g.structValue),g.listValue!==void 0&&(O.listValue=g.listValue),O},fromPartial(g){var O,$,x,Y,te,ne;const F=C();return F.nullValue=(O=g.nullValue)!==null&&O!==void 0?O:void 0,F.numberValue=($=g.numberValue)!==null&&$!==void 0?$:void 0,F.stringValue=(x=g.stringValue)!==null&&x!==void 0?x:void 0,F.boolValue=(Y=g.boolValue)!==null&&Y!==void 0?Y:void 0,F.structValue=(te=g.structValue)!==null&&te!==void 0?te:void 0,F.listValue=(ne=g.listValue)!==null&&ne!==void 0?ne:void 0,F},wrap(g){const O=C();if(g===null)O.nullValue=y.NULL_VALUE;else if(typeof g=="boolean")O.boolValue=g;else if(typeof g=="number")O.numberValue=g;else if(typeof g=="string")O.stringValue=g;else if(Array.isArray(g))O.listValue=g;else if(typeof g=="object")O.structValue=g;else if(typeof g!="undefined")throw new Error("Unsupported any value type: "+typeof g);return O},unwrap(g){if((g==null?void 0:g.stringValue)!==void 0)return g.stringValue;if((g==null?void 0:g.numberValue)!==void 0)return g.numberValue;if((g==null?void 0:g.boolValue)!==void 0)return g.boolValue;if((g==null?void 0:g.structValue)!==void 0)return g.structValue;if((g==null?void 0:g.listValue)!==void 0)return g.listValue;if((g==null?void 0:g.nullValue)!==void 0)return null}};function D(){return{values:[]}}a.ListValue={encode(g,O=h.Writer.create()){for(const $ of g.values)a.Value.encode(a.Value.wrap($),O.uint32(10).fork()).ldelim();return O},decode(g,O){const $=g instanceof h.Reader?g:new h.Reader(g);let x=O===void 0?$.len:$.pos+O;const Y=D();for(;$.pos<x;){const te=$.uint32();switch(te>>>3){case 1:Y.values.push(a.Value.unwrap(a.Value.decode($,$.uint32())));break;default:$.skipType(te&7);break}}return Y},fromJSON(g){return{values:Array.isArray(g==null?void 0:g.values)?[...g.values]:[]}},toJSON(g){const O={};return g.values?O.values=g.values.map($=>$):O.values=[],O},fromPartial(g){var O;const $=D();return $.values=((O=g.values)===null||O===void 0?void 0:O.map(x=>x))||[],$},wrap(g){const O=D();return O.values=g!=null?g:[],O},unwrap(g){return g.values}};var V=(()=>{if(typeof V!="undefined")return V;if(typeof self!="undefined")return self;if(typeof window!="undefined")return window;if(typeof commonjsGlobal!="undefined")return commonjsGlobal;throw"Unable to locate global object"})();h.util.Long!==p.default&&(h.util.Long=p.default,h.configure());function J(g){return typeof g=="object"&&g!==null}function W(g){return g!=null}})(struct$1);var field_mask={},__createBinding$2=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(a,s,u,d){d===void 0&&(d=u);var l=Object.getOwnPropertyDescriptor(s,u);(!l||("get"in l?!s.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return s[u]}}),Object.defineProperty(a,d,l)}:function(a,s,u,d){d===void 0&&(d=u),a[d]=s[u]}),__setModuleDefault$2=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(a,s){Object.defineProperty(a,"default",{enumerable:!0,value:s})}:function(a,s){a.default=s}),__importStar$2=commonjsGlobal&&commonjsGlobal.__importStar||function(a){if(a&&a.__esModule)return a;var s={};if(a!=null)for(var u in a)u!=="default"&&Object.prototype.hasOwnProperty.call(a,u)&&__createBinding$2(s,a,u);return __setModuleDefault$2(s,a),s},__importDefault$f=commonjsGlobal&&commonjsGlobal.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(field_mask,"__esModule",{value:!0}),field_mask.FieldMask=field_mask.protobufPackage=void 0;const long_1=__importDefault$f(long),_m0=__importStar$2(minimal$2);field_mask.protobufPackage="google.protobuf";function createBaseFieldMask(){return{paths:[]}}field_mask.FieldMask={encode(a,s=_m0.Writer.create()){for(const u of a.paths)s.uint32(10).string(u);return s},decode(a,s){const u=a instanceof _m0.Reader?a:new _m0.Reader(a);let d=s===void 0?u.len:u.pos+s;const l=createBaseFieldMask();for(;u.pos<d;){const p=u.uint32();switch(p>>>3){case 1:l.paths.push(u.string());break;default:u.skipType(p&7);break}}return l},fromJSON(a){return{paths:typeof a=="string"?a.split(",").filter(Boolean):Array.isArray(a==null?void 0:a.paths)?a.paths.map(String):[]}},toJSON(a){return a.paths.join(",")},fromPartial(a){var s;const u=createBaseFieldMask();return u.paths=((s=a.paths)===null||s===void 0?void 0:s.map(d=>d))||[],u},wrap(a){return{paths:a}},unwrap(a){return a.paths}},_m0.util.Long!==long_1.default&&(_m0.util.Long=long_1.default,_m0.configure()),function(a){var s=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(c,m,S,G){G===void 0&&(G=S);var P=Object.getOwnPropertyDescriptor(m,S);(!P||("get"in P?!m.__esModule:P.writable||P.configurable))&&(P={enumerable:!0,get:function(){return m[S]}}),Object.defineProperty(c,G,P)}:function(c,m,S,G){G===void 0&&(G=S),c[G]=m[S]}),u=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(c,m){Object.defineProperty(c,"default",{enumerable:!0,value:m})}:function(c,m){c.default=m}),d=commonjsGlobal&&commonjsGlobal.__importStar||function(c){if(c&&c.__esModule)return c;var m={};if(c!=null)for(var S in c)S!=="default"&&Object.prototype.hasOwnProperty.call(c,S)&&s(m,c,S);return u(m,c),m},l=commonjsGlobal&&commonjsGlobal.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(a,"__esModule",{value:!0}),a.ProjectBroadcastError=a.roleToNumber=a.roleToJSON=a.roleFromJSON=a.Role=a.regionToNumber=a.regionToJSON=a.regionFromJSON=a.Region=a.sourceTriggerActionToNumber=a.sourceTriggerActionToJSON=a.sourceTriggerActionFromJSON=a.SourceTriggerAction=a.projectBroadcastPhaseToNumber=a.projectBroadcastPhaseToJSON=a.projectBroadcastPhaseFromJSON=a.ProjectBroadcastPhase=a.videoCodecRateControlModeToNumber=a.videoCodecRateControlModeToJSON=a.videoCodecRateControlModeFromJSON=a.VideoCodecRateControlMode=a.audioCodecToNumber=a.audioCodecToJSON=a.audioCodecFromJSON=a.AudioCodec=a.videoCodecProfileToNumber=a.videoCodecProfileToJSON=a.videoCodecProfileFromJSON=a.VideoCodecProfile=a.videoCodecToNumber=a.videoCodecToJSON=a.videoCodecFromJSON=a.VideoCodec=a.renderingQualityToNumber=a.renderingQualityToJSON=a.renderingQualityFromJSON=a.RenderingQuality=a.audioChannelLayoutToNumber=a.audioChannelLayoutToJSON=a.audioChannelLayoutFromJSON=a.AudioChannelLayout=a.videoColorSpaceToNumber=a.videoColorSpaceToJSON=a.videoColorSpaceFromJSON=a.VideoColorSpace=a.imageFormatToNumber=a.imageFormatToJSON=a.imageFormatFromJSON=a.ImageFormat=a.protobufPackage=void 0,a.CreateCollectionResponse=a.CreateCollectionRequest=a.Collection=a.Project=a.Destination=a.Source=a.ProjectBroadcastStatus=a.LatLong=a.WebRtcAccess=a.WebRtc=a.HostedWebRtc=a.Composition=a.ExternalComposition=a.SceneComposition=a.SceneCompositionLegacy=a.StudioSdkComposition=a.PreviewAddress=a.PreviewWebRtcAddress=a.PreviewHlsPullAddress=a.ProjectTrigger=a.WebRtcTrigger=a.SourceTrigger=a.DestinationAddress=a.DestinationAgoraPushAddress=a.DestinationRtmpPushAddress=a.SourceAddress=a.SrtPushAddress=a.SourceRtmpPushAddress=a.Encoding=a.AudioEncoding=a.VideoEncoding=a.VideoCodecRateControl=a.Rendering=a.AudioRendering=a.VideoRendering=a.eventTypeToNumber=a.eventTypeToJSON=a.eventTypeFromJSON=a.EventType=a.eventSubTypeToNumber=a.eventSubTypeToJSON=a.eventSubTypeFromJSON=a.EventSubType=a.connectStateToNumber=a.connectStateToJSON=a.connectStateFromJSON=a.ConnectState=a.projectBroadcastErrorToNumber=a.projectBroadcastErrorToJSON=a.projectBroadcastErrorFromJSON=void 0,a.UpdateSourceResponse=a.UpdateSourceRequest=a.GetSourcesResponse=a.GetSourcesRequest=a.GetSourceResponse=a.GetSourceRequest=a.UpdateSourceInProjectResponse=a.UpdateSourceInProjectRequest=a.AddSourceToProjectResponse=a.AddSourceToProjectRequest=a.DeleteSourceResponse=a.DeleteSourceRequest=a.CreateSourceResponse=a.CreateSourceRequest=a.UpdateDestinationResponse=a.UpdateDestinationRequest=a.DeleteDestinationResponse=a.DeleteDestinationRequest=a.GetDestinationResponse=a.GetDestinationRequest=a.CreateDestinationResponse=a.CreateDestinationRequest=a.StopProjectWebRtcResponse=a.StopProjectWebRtcRequest=a.StartProjectWebRtcResponse=a.StartProjectWebRtcRequest=a.GetProjectBroadcastStatusResponse=a.GetProjectBroadcastStatusRequest=a.GetProjectBroadcastSnapshotResponse=a.GetProjectBroadcastSnapshotRequest=a.GetProjectResponse=a.GetProjectRequest=a.StopProjectBroadcastResponse=a.StopProjectBroadcastRequest=a.StartProjectBroadcastResponse=a.StartProjectBroadcastRequest=a.DeleteProjectResponse=a.DeleteProjectRequest=a.UpdateProjectResponse=a.UpdateProjectRequest=a.CreateProjectResponse=a.CreateProjectRequest=a.GetCollectionsResponse=a.GetCollectionsRequest=a.DeleteCollectionResponse=a.DeleteCollectionRequest=a.UpdateCollectionResponse=a.UpdateCollectionRequest=a.GetCollectionResponse=a.GetCollectionRequest=void 0,a.DestinationServiceDefinition=a.DestinationServiceClientImpl=a.ProjectServiceDefinition=a.ProjectServiceClientImpl=a.CollectionServiceDefinition=a.CollectionServiceClientImpl=a.LiveEvent=a.SourceEvent=a.ProjectEvent=a.DestinationEvent=a.CollectionEvent=a.SourceRemoveEvent=a.SourceAddEvent=a.SourceUpdateEvent=a.SourceDeleteEvent=a.SourceCreateEvent=a.CollectionUpdateEvent=a.CollectionDeleteEvent=a.CollectionCreateEvent=a.ProjectBroadcastStateEvent=a.ProjectUpdateEvent=a.ProjectDeleteEvent=a.ProjectCreateEvent=a.DestinationStateEvent=a.DestinationUpdateEvent=a.DestinationDeleteEvent=a.DestinationCreateEvent=a.GetTestTokenResponse=a.GetTestTokenRequest=a.GetJsonWebKeySetResponse=a.GetJsonWebKeySetRequest=a.JsonWebKey=a.CreateDemoAccessTokenResponse=a.CreateDemoAccessTokenRequest=a.GuestCodeRedirectResponse=a.GuestCodeRedirectRequest=a.GuestCode=a.RefreshAccessTokenResponse=a.RefreshAccessTokenRequest=a.CreateWebRtcAccessTokenResponse=a.CreateWebRtcAccessTokenRequest=a.CreateGuestAccessTokenResponse=a.CreateGuestAccessTokenRequest=a.GuestAccessToken=a.GuestAccessTokenExchange=a.GuestAccessTokenDirect=a.CreateAccessTokenResponse=a.CreateAccessTokenRequest=a.RemoveSourceFromProjectResponse=a.RemoveSourceFromProjectRequest=void 0,a.PublicAuthenticationServiceDefinition=a.PublicAuthenticationServiceClientImpl=a.AuthenticationServiceDefinition=a.AuthenticationServiceClientImpl=a.BackendAuthenticationServiceDefinition=a.BackendAuthenticationServiceClientImpl=a.SourceServiceDefinition=a.SourceServiceClientImpl=void 0;const p=l(long),h=d(minimal$2),y=timestamp$1,_=struct$1,E=field_mask;a.protobufPackage="live.v21";var I;(function(c){c.IMAGE_FORMAT_UNSPECIFIED="IMAGE_FORMAT_UNSPECIFIED",c.IMAGE_FORMAT_JPEG="IMAGE_FORMAT_JPEG"})(I=a.ImageFormat||(a.ImageFormat={}));function N(c){switch(c){case 0:case"IMAGE_FORMAT_UNSPECIFIED":return I.IMAGE_FORMAT_UNSPECIFIED;case 1:case"IMAGE_FORMAT_JPEG":return I.IMAGE_FORMAT_JPEG;default:throw new Je.Error("Unrecognized enum value "+c+" for enum ImageFormat")}}a.imageFormatFromJSON=N;function w(c){switch(c){case I.IMAGE_FORMAT_UNSPECIFIED:return"IMAGE_FORMAT_UNSPECIFIED";case I.IMAGE_FORMAT_JPEG:return"IMAGE_FORMAT_JPEG";default:return"UNKNOWN"}}a.imageFormatToJSON=w;function C(c){switch(c){case I.IMAGE_FORMAT_UNSPECIFIED:return 0;case I.IMAGE_FORMAT_JPEG:return 1;default:return 0}}a.imageFormatToNumber=C;var D;(function(c){c.VIDEO_COLOR_SPACE_UNSPECIFIED="VIDEO_COLOR_SPACE_UNSPECIFIED",c.VIDEO_COLOR_SPACE_YUV420="VIDEO_COLOR_SPACE_YUV420"})(D=a.VideoColorSpace||(a.VideoColorSpace={}));function V(c){switch(c){case 0:case"VIDEO_COLOR_SPACE_UNSPECIFIED":return D.VIDEO_COLOR_SPACE_UNSPECIFIED;case 1:case"VIDEO_COLOR_SPACE_YUV420":return D.VIDEO_COLOR_SPACE_YUV420;default:throw new Je.Error("Unrecognized enum value "+c+" for enum VideoColorSpace")}}a.videoColorSpaceFromJSON=V;function J(c){switch(c){case D.VIDEO_COLOR_SPACE_UNSPECIFIED:return"VIDEO_COLOR_SPACE_UNSPECIFIED";case D.VIDEO_COLOR_SPACE_YUV420:return"VIDEO_COLOR_SPACE_YUV420";default:return"UNKNOWN"}}a.videoColorSpaceToJSON=J;function W(c){switch(c){case D.VIDEO_COLOR_SPACE_UNSPECIFIED:return 0;case D.VIDEO_COLOR_SPACE_YUV420:return 1;default:return 0}}a.videoColorSpaceToNumber=W;var g;(function(c){c.AUDIO_CHANNEL_LAYOUT_UNSPECIFIED="AUDIO_CHANNEL_LAYOUT_UNSPECIFIED",c.AUDIO_CHANNEL_LAYOUT_STEREO="AUDIO_CHANNEL_LAYOUT_STEREO"})(g=a.AudioChannelLayout||(a.AudioChannelLayout={}));function O(c){switch(c){case 0:case"AUDIO_CHANNEL_LAYOUT_UNSPECIFIED":return g.AUDIO_CHANNEL_LAYOUT_UNSPECIFIED;case 1:case"AUDIO_CHANNEL_LAYOUT_STEREO":return g.AUDIO_CHANNEL_LAYOUT_STEREO;default:throw new Je.Error("Unrecognized enum value "+c+" for enum AudioChannelLayout")}}a.audioChannelLayoutFromJSON=O;function $(c){switch(c){case g.AUDIO_CHANNEL_LAYOUT_UNSPECIFIED:return"AUDIO_CHANNEL_LAYOUT_UNSPECIFIED";case g.AUDIO_CHANNEL_LAYOUT_STEREO:return"AUDIO_CHANNEL_LAYOUT_STEREO";default:return"UNKNOWN"}}a.audioChannelLayoutToJSON=$;function x(c){switch(c){case g.AUDIO_CHANNEL_LAYOUT_UNSPECIFIED:return 0;case g.AUDIO_CHANNEL_LAYOUT_STEREO:return 1;default:return 0}}a.audioChannelLayoutToNumber=x;var Y;(function(c){c.RENDERING_QUALITY_UNSPECIFIED="RENDERING_QUALITY_UNSPECIFIED",c.RENDERING_QUALITY_STANDARD="RENDERING_QUALITY_STANDARD",c.RENDERING_QUALITY_HIGH="RENDERING_QUALITY_HIGH"})(Y=a.RenderingQuality||(a.RenderingQuality={}));function te(c){switch(c){case 0:case"RENDERING_QUALITY_UNSPECIFIED":return Y.RENDERING_QUALITY_UNSPECIFIED;case 1:case"RENDERING_QUALITY_STANDARD":return Y.RENDERING_QUALITY_STANDARD;case 2:case"RENDERING_QUALITY_HIGH":return Y.RENDERING_QUALITY_HIGH;default:throw new Je.Error("Unrecognized enum value "+c+" for enum RenderingQuality")}}a.renderingQualityFromJSON=te;function ne(c){switch(c){case Y.RENDERING_QUALITY_UNSPECIFIED:return"RENDERING_QUALITY_UNSPECIFIED";case Y.RENDERING_QUALITY_STANDARD:return"RENDERING_QUALITY_STANDARD";case Y.RENDERING_QUALITY_HIGH:return"RENDERING_QUALITY_HIGH";default:return"UNKNOWN"}}a.renderingQualityToJSON=ne;function F(c){switch(c){case Y.RENDERING_QUALITY_UNSPECIFIED:return 0;case Y.RENDERING_QUALITY_STANDARD:return 1;case Y.RENDERING_QUALITY_HIGH:return 2;default:return 0}}a.renderingQualityToNumber=F;var j;(function(c){c.VIDEO_CODEC_UNSPECIFIED="VIDEO_CODEC_UNSPECIFIED",c.VIDEO_CODEC_H264="VIDEO_CODEC_H264"})(j=a.VideoCodec||(a.VideoCodec={}));function K(c){switch(c){case 0:case"VIDEO_CODEC_UNSPECIFIED":return j.VIDEO_CODEC_UNSPECIFIED;case 1:case"VIDEO_CODEC_H264":return j.VIDEO_CODEC_H264;default:throw new Je.Error("Unrecognized enum value "+c+" for enum VideoCodec")}}a.videoCodecFromJSON=K;function M(c){switch(c){case j.VIDEO_CODEC_UNSPECIFIED:return"VIDEO_CODEC_UNSPECIFIED";case j.VIDEO_CODEC_H264:return"VIDEO_CODEC_H264";default:return"UNKNOWN"}}a.videoCodecToJSON=M;function q(c){switch(c){case j.VIDEO_CODEC_UNSPECIFIED:return 0;case j.VIDEO_CODEC_H264:return 1;default:return 0}}a.videoCodecToNumber=q;var z;(function(c){c.VIDEO_CODEC_PROFILE_UNSPECIFIED="VIDEO_CODEC_PROFILE_UNSPECIFIED",c.VIDEO_CODEC_PROFILE_CONSTRAINED_BASELINE="VIDEO_CODEC_PROFILE_CONSTRAINED_BASELINE",c.VIDEO_CODEC_PROFILE_BASELINE="VIDEO_CODEC_PROFILE_BASELINE",c.VIDEO_CODEC_PROFILE_MAIN="VIDEO_CODEC_PROFILE_MAIN",c.VIDEO_CODEC_PROFILE_HIGH="VIDEO_CODEC_PROFILE_HIGH"})(z=a.VideoCodecProfile||(a.VideoCodecProfile={}));function le(c){switch(c){case 0:case"VIDEO_CODEC_PROFILE_UNSPECIFIED":return z.VIDEO_CODEC_PROFILE_UNSPECIFIED;case 1:case"VIDEO_CODEC_PROFILE_CONSTRAINED_BASELINE":return z.VIDEO_CODEC_PROFILE_CONSTRAINED_BASELINE;case 2:case"VIDEO_CODEC_PROFILE_BASELINE":return z.VIDEO_CODEC_PROFILE_BASELINE;case 3:case"VIDEO_CODEC_PROFILE_MAIN":return z.VIDEO_CODEC_PROFILE_MAIN;case 4:case"VIDEO_CODEC_PROFILE_HIGH":return z.VIDEO_CODEC_PROFILE_HIGH;default:throw new Je.Error("Unrecognized enum value "+c+" for enum VideoCodecProfile")}}a.videoCodecProfileFromJSON=le;function re(c){switch(c){case z.VIDEO_CODEC_PROFILE_UNSPECIFIED:return"VIDEO_CODEC_PROFILE_UNSPECIFIED";case z.VIDEO_CODEC_PROFILE_CONSTRAINED_BASELINE:return"VIDEO_CODEC_PROFILE_CONSTRAINED_BASELINE";case z.VIDEO_CODEC_PROFILE_BASELINE:return"VIDEO_CODEC_PROFILE_BASELINE";case z.VIDEO_CODEC_PROFILE_MAIN:return"VIDEO_CODEC_PROFILE_MAIN";case z.VIDEO_CODEC_PROFILE_HIGH:return"VIDEO_CODEC_PROFILE_HIGH";default:return"UNKNOWN"}}a.videoCodecProfileToJSON=re;function Q(c){switch(c){case z.VIDEO_CODEC_PROFILE_UNSPECIFIED:return 0;case z.VIDEO_CODEC_PROFILE_CONSTRAINED_BASELINE:return 1;case z.VIDEO_CODEC_PROFILE_BASELINE:return 2;case z.VIDEO_CODEC_PROFILE_MAIN:return 3;case z.VIDEO_CODEC_PROFILE_HIGH:return 4;default:return 0}}a.videoCodecProfileToNumber=Q;var ce;(function(c){c.AUDIO_CODEC_UNSPECIFIED="AUDIO_CODEC_UNSPECIFIED",c.AUDIO_CODEC_AAC="AUDIO_CODEC_AAC"})(ce=a.AudioCodec||(a.AudioCodec={}));function me(c){switch(c){case 0:case"AUDIO_CODEC_UNSPECIFIED":return ce.AUDIO_CODEC_UNSPECIFIED;case 1:case"AUDIO_CODEC_AAC":return ce.AUDIO_CODEC_AAC;default:throw new Je.Error("Unrecognized enum value "+c+" for enum AudioCodec")}}a.audioCodecFromJSON=me;function ve(c){switch(c){case ce.AUDIO_CODEC_UNSPECIFIED:return"AUDIO_CODEC_UNSPECIFIED";case ce.AUDIO_CODEC_AAC:return"AUDIO_CODEC_AAC";default:return"UNKNOWN"}}a.audioCodecToJSON=ve;function ye(c){switch(c){case ce.AUDIO_CODEC_UNSPECIFIED:return 0;case ce.AUDIO_CODEC_AAC:return 1;default:return 0}}a.audioCodecToNumber=ye;var v;(function(c){c.VIDEO_CODEC_RATE_CONTROL_MODE_UNSPECIFIED="VIDEO_CODEC_RATE_CONTROL_MODE_UNSPECIFIED",c.VIDEO_CODEC_RATE_CONTROL_MODE_CBR="VIDEO_CODEC_RATE_CONTROL_MODE_CBR"})(v=a.VideoCodecRateControlMode||(a.VideoCodecRateControlMode={}));function T(c){switch(c){case 0:case"VIDEO_CODEC_RATE_CONTROL_MODE_UNSPECIFIED":return v.VIDEO_CODEC_RATE_CONTROL_MODE_UNSPECIFIED;case 1:case"VIDEO_CODEC_RATE_CONTROL_MODE_CBR":return v.VIDEO_CODEC_RATE_CONTROL_MODE_CBR;default:throw new Je.Error("Unrecognized enum value "+c+" for enum VideoCodecRateControlMode")}}a.videoCodecRateControlModeFromJSON=T;function L(c){switch(c){case v.VIDEO_CODEC_RATE_CONTROL_MODE_UNSPECIFIED:return"VIDEO_CODEC_RATE_CONTROL_MODE_UNSPECIFIED";case v.VIDEO_CODEC_RATE_CONTROL_MODE_CBR:return"VIDEO_CODEC_RATE_CONTROL_MODE_CBR";default:return"UNKNOWN"}}a.videoCodecRateControlModeToJSON=L;function oe(c){switch(c){case v.VIDEO_CODEC_RATE_CONTROL_MODE_UNSPECIFIED:return 0;case v.VIDEO_CODEC_RATE_CONTROL_MODE_CBR:return 1;default:return 0}}a.videoCodecRateControlModeToNumber=oe;var k;(function(c){c.PROJECT_BROADCAST_PHASE_UNSPECIFIED="PROJECT_BROADCAST_PHASE_UNSPECIFIED",c.PROJECT_BROADCAST_PHASE_NOT_RUNNING="PROJECT_BROADCAST_PHASE_NOT_RUNNING",c.PROJECT_BROADCAST_PHASE_WAITING="PROJECT_BROADCAST_PHASE_WAITING",c.PROJECT_BROADCAST_PHASE_STARTING="PROJECT_BROADCAST_PHASE_STARTING",c.PROJECT_BROADCAST_PHASE_RUNNING="PROJECT_BROADCAST_PHASE_RUNNING",c.PROJECT_BROADCAST_PHASE_STOPPING="PROJECT_BROADCAST_PHASE_STOPPING",c.PROJECT_BROADCAST_PHASE_STOPPED="PROJECT_BROADCAST_PHASE_STOPPED",c.PROJECT_BROADCAST_PHASE_ARCHIVED="PROJECT_BROADCAST_PHASE_ARCHIVED"})(k=a.ProjectBroadcastPhase||(a.ProjectBroadcastPhase={}));function U(c){switch(c){case 0:case"PROJECT_BROADCAST_PHASE_UNSPECIFIED":return k.PROJECT_BROADCAST_PHASE_UNSPECIFIED;case 1:case"PROJECT_BROADCAST_PHASE_NOT_RUNNING":return k.PROJECT_BROADCAST_PHASE_NOT_RUNNING;case 2:case"PROJECT_BROADCAST_PHASE_WAITING":return k.PROJECT_BROADCAST_PHASE_WAITING;case 3:case"PROJECT_BROADCAST_PHASE_STARTING":return k.PROJECT_BROADCAST_PHASE_STARTING;case 4:case"PROJECT_BROADCAST_PHASE_RUNNING":return k.PROJECT_BROADCAST_PHASE_RUNNING;case 5:case"PROJECT_BROADCAST_PHASE_STOPPING":return k.PROJECT_BROADCAST_PHASE_STOPPING;case 6:case"PROJECT_BROADCAST_PHASE_STOPPED":return k.PROJECT_BROADCAST_PHASE_STOPPED;case 7:case"PROJECT_BROADCAST_PHASE_ARCHIVED":return k.PROJECT_BROADCAST_PHASE_ARCHIVED;default:throw new Je.Error("Unrecognized enum value "+c+" for enum ProjectBroadcastPhase")}}a.projectBroadcastPhaseFromJSON=U;function ee(c){switch(c){case k.PROJECT_BROADCAST_PHASE_UNSPECIFIED:return"PROJECT_BROADCAST_PHASE_UNSPECIFIED";case k.PROJECT_BROADCAST_PHASE_NOT_RUNNING:return"PROJECT_BROADCAST_PHASE_NOT_RUNNING";case k.PROJECT_BROADCAST_PHASE_WAITING:return"PROJECT_BROADCAST_PHASE_WAITING";case k.PROJECT_BROADCAST_PHASE_STARTING:return"PROJECT_BROADCAST_PHASE_STARTING";case k.PROJECT_BROADCAST_PHASE_RUNNING:return"PROJECT_BROADCAST_PHASE_RUNNING";case k.PROJECT_BROADCAST_PHASE_STOPPING:return"PROJECT_BROADCAST_PHASE_STOPPING";case k.PROJECT_BROADCAST_PHASE_STOPPED:return"PROJECT_BROADCAST_PHASE_STOPPED";case k.PROJECT_BROADCAST_PHASE_ARCHIVED:return"PROJECT_BROADCAST_PHASE_ARCHIVED";default:return"UNKNOWN"}}a.projectBroadcastPhaseToJSON=ee;function de(c){switch(c){case k.PROJECT_BROADCAST_PHASE_UNSPECIFIED:return 0;case k.PROJECT_BROADCAST_PHASE_NOT_RUNNING:return 1;case k.PROJECT_BROADCAST_PHASE_WAITING:return 2;case k.PROJECT_BROADCAST_PHASE_STARTING:return 3;case k.PROJECT_BROADCAST_PHASE_RUNNING:return 4;case k.PROJECT_BROADCAST_PHASE_STOPPING:return 5;case k.PROJECT_BROADCAST_PHASE_STOPPED:return 6;case k.PROJECT_BROADCAST_PHASE_ARCHIVED:return 7;default:return 0}}a.projectBroadcastPhaseToNumber=de;var ae;(function(c){c.SOURCE_TRIGGER_ACTION_UNSPECIFIED="SOURCE_TRIGGER_ACTION_UNSPECIFIED",c.SOURCE_TRIGGER_ACTION_IGNORE="SOURCE_TRIGGER_ACTION_IGNORE",c.SOURCE_TRIGGER_ACTION_OR="SOURCE_TRIGGER_ACTION_OR"})(ae=a.SourceTriggerAction||(a.SourceTriggerAction={}));function fe(c){switch(c){case 0:case"SOURCE_TRIGGER_ACTION_UNSPECIFIED":return ae.SOURCE_TRIGGER_ACTION_UNSPECIFIED;case 1:case"SOURCE_TRIGGER_ACTION_IGNORE":return ae.SOURCE_TRIGGER_ACTION_IGNORE;case 3:case"SOURCE_TRIGGER_ACTION_OR":return ae.SOURCE_TRIGGER_ACTION_OR;default:throw new Je.Error("Unrecognized enum value "+c+" for enum SourceTriggerAction")}}a.sourceTriggerActionFromJSON=fe;function Ee(c){switch(c){case ae.SOURCE_TRIGGER_ACTION_UNSPECIFIED:return"SOURCE_TRIGGER_ACTION_UNSPECIFIED";case ae.SOURCE_TRIGGER_ACTION_IGNORE:return"SOURCE_TRIGGER_ACTION_IGNORE";case ae.SOURCE_TRIGGER_ACTION_OR:return"SOURCE_TRIGGER_ACTION_OR";default:return"UNKNOWN"}}a.sourceTriggerActionToJSON=Ee;function Pe(c){switch(c){case ae.SOURCE_TRIGGER_ACTION_UNSPECIFIED:return 0;case ae.SOURCE_TRIGGER_ACTION_IGNORE:return 1;case ae.SOURCE_TRIGGER_ACTION_OR:return 3;default:return 0}}a.sourceTriggerActionToNumber=Pe;var Se;(function(c){c.REGION_UNSPECIFIED="REGION_UNSPECIFIED",c.REGION_US_EAST="REGION_US_EAST",c.REGION_US_WEST="REGION_US_WEST",c.REGION_AP_SOUTHEAST="REGION_AP_SOUTHEAST",c.REGION_CA_EAST="REGION_CA_EAST",c.REGION_EU_CENTRAL="REGION_EU_CENTRAL",c.REGION_EU_WEST="REGION_EU_WEST"})(Se=a.Region||(a.Region={}));function Ie(c){switch(c){case 0:case"REGION_UNSPECIFIED":return Se.REGION_UNSPECIFIED;case 1:case"REGION_US_EAST":return Se.REGION_US_EAST;case 2:case"REGION_US_WEST":return Se.REGION_US_WEST;case 10:case"REGION_AP_SOUTHEAST":return Se.REGION_AP_SOUTHEAST;case 20:case"REGION_CA_EAST":return Se.REGION_CA_EAST;case 30:case"REGION_EU_CENTRAL":return Se.REGION_EU_CENTRAL;case 31:case"REGION_EU_WEST":return Se.REGION_EU_WEST;default:throw new Je.Error("Unrecognized enum value "+c+" for enum Region")}}a.regionFromJSON=Ie;function De(c){switch(c){case Se.REGION_UNSPECIFIED:return"REGION_UNSPECIFIED";case Se.REGION_US_EAST:return"REGION_US_EAST";case Se.REGION_US_WEST:return"REGION_US_WEST";case Se.REGION_AP_SOUTHEAST:return"REGION_AP_SOUTHEAST";case Se.REGION_CA_EAST:return"REGION_CA_EAST";case Se.REGION_EU_CENTRAL:return"REGION_EU_CENTRAL";case Se.REGION_EU_WEST:return"REGION_EU_WEST";default:return"UNKNOWN"}}a.regionToJSON=De;function He(c){switch(c){case Se.REGION_UNSPECIFIED:return 0;case Se.REGION_US_EAST:return 1;case Se.REGION_US_WEST:return 2;case Se.REGION_AP_SOUTHEAST:return 10;case Se.REGION_CA_EAST:return 20;case Se.REGION_EU_CENTRAL:return 30;case Se.REGION_EU_WEST:return 31;default:return 0}}a.regionToNumber=He;var be;(function(c){c.ROLE_UNSPECIFIED="ROLE_UNSPECIFIED",c.ROLE_HOST="ROLE_HOST",c.ROLE_COHOST="ROLE_COHOST",c.ROLE_CONTRIBUTOR="ROLE_CONTRIBUTOR",c.ROLE_GUEST="ROLE_GUEST",c.ROLE_VIEWER="ROLE_VIEWER",c.ROLE_RENDERER="ROLE_RENDERER",c.ROLE_PLATFORM="ROLE_PLATFORM"})(be=a.Role||(a.Role={}));function Ve(c){switch(c){case 0:case"ROLE_UNSPECIFIED":return be.ROLE_UNSPECIFIED;case 1:case"ROLE_HOST":return be.ROLE_HOST;case 2:case"ROLE_COHOST":return be.ROLE_COHOST;case 3:case"ROLE_CONTRIBUTOR":return be.ROLE_CONTRIBUTOR;case 4:case"ROLE_GUEST":return be.ROLE_GUEST;case 5:case"ROLE_VIEWER":return be.ROLE_VIEWER;case 6:case"ROLE_RENDERER":return be.ROLE_RENDERER;case 7:case"ROLE_PLATFORM":return be.ROLE_PLATFORM;default:throw new Je.Error("Unrecognized enum value "+c+" for enum Role")}}a.roleFromJSON=Ve;function Ze(c){switch(c){case be.ROLE_UNSPECIFIED:return"ROLE_UNSPECIFIED";case be.ROLE_HOST:return"ROLE_HOST";case be.ROLE_COHOST:return"ROLE_COHOST";case be.ROLE_CONTRIBUTOR:return"ROLE_CONTRIBUTOR";case be.ROLE_GUEST:return"ROLE_GUEST";case be.ROLE_VIEWER:return"ROLE_VIEWER";case be.ROLE_RENDERER:return"ROLE_RENDERER";case be.ROLE_PLATFORM:return"ROLE_PLATFORM";default:return"UNKNOWN"}}a.roleToJSON=Ze;function Xe(c){switch(c){case be.ROLE_UNSPECIFIED:return 0;case be.ROLE_HOST:return 1;case be.ROLE_COHOST:return 2;case be.ROLE_CONTRIBUTOR:return 3;case be.ROLE_GUEST:return 4;case be.ROLE_VIEWER:return 5;case be.ROLE_RENDERER:return 6;case be.ROLE_PLATFORM:return 7;default:return 0}}a.roleToNumber=Xe;var ge;(function(c){c.PROJECT_BROADCAST_ERROR_UNSPECIFIED="PROJECT_BROADCAST_ERROR_UNSPECIFIED",c.PROJECT_BROADCAST_ERROR_INTERNAL="PROJECT_BROADCAST_ERROR_INTERNAL",c.PROJECT_BROADCAST_ERROR_DURATION_EXCEEDED="PROJECT_BROADCAST_ERROR_DURATION_EXCEEDED"})(ge=a.ProjectBroadcastError||(a.ProjectBroadcastError={}));function Re(c){switch(c){case 0:case"PROJECT_BROADCAST_ERROR_UNSPECIFIED":return ge.PROJECT_BROADCAST_ERROR_UNSPECIFIED;case 1:case"PROJECT_BROADCAST_ERROR_INTERNAL":return ge.PROJECT_BROADCAST_ERROR_INTERNAL;case 2:case"PROJECT_BROADCAST_ERROR_DURATION_EXCEEDED":return ge.PROJECT_BROADCAST_ERROR_DURATION_EXCEEDED;default:throw new Je.Error("Unrecognized enum value "+c+" for enum ProjectBroadcastError")}}a.projectBroadcastErrorFromJSON=Re;function Te(c){switch(c){case ge.PROJECT_BROADCAST_ERROR_UNSPECIFIED:return"PROJECT_BROADCAST_ERROR_UNSPECIFIED";case ge.PROJECT_BROADCAST_ERROR_INTERNAL:return"PROJECT_BROADCAST_ERROR_INTERNAL";case ge.PROJECT_BROADCAST_ERROR_DURATION_EXCEEDED:return"PROJECT_BROADCAST_ERROR_DURATION_EXCEEDED";default:return"UNKNOWN"}}a.projectBroadcastErrorToJSON=Te;function Ae(c){switch(c){case ge.PROJECT_BROADCAST_ERROR_UNSPECIFIED:return 0;case ge.PROJECT_BROADCAST_ERROR_INTERNAL:return 1;case ge.PROJECT_BROADCAST_ERROR_DURATION_EXCEEDED:return 2;default:return 0}}a.projectBroadcastErrorToNumber=Ae;var _e;(function(c){c.CONNECT_STATE_UNSPECIFIED="CONNECT_STATE_UNSPECIFIED",c.CONNECT_STATE_CONNECTED="CONNECT_STATE_CONNECTED",c.CONNECT_STATE_DISCONNECTED="CONNECT_STATE_DISCONNECTED"})(_e=a.ConnectState||(a.ConnectState={}));function et(c){switch(c){case 0:case"CONNECT_STATE_UNSPECIFIED":return _e.CONNECT_STATE_UNSPECIFIED;case 1:case"CONNECT_STATE_CONNECTED":return _e.CONNECT_STATE_CONNECTED;case 2:case"CONNECT_STATE_DISCONNECTED":return _e.CONNECT_STATE_DISCONNECTED;default:throw new Je.Error("Unrecognized enum value "+c+" for enum ConnectState")}}a.connectStateFromJSON=et;function Ce(c){switch(c){case _e.CONNECT_STATE_UNSPECIFIED:return"CONNECT_STATE_UNSPECIFIED";case _e.CONNECT_STATE_CONNECTED:return"CONNECT_STATE_CONNECTED";case _e.CONNECT_STATE_DISCONNECTED:return"CONNECT_STATE_DISCONNECTED";default:return"UNKNOWN"}}a.connectStateToJSON=Ce;function tt(c){switch(c){case _e.CONNECT_STATE_UNSPECIFIED:return 0;case _e.CONNECT_STATE_CONNECTED:return 1;case _e.CONNECT_STATE_DISCONNECTED:return 2;default:return 0}}a.connectStateToNumber=tt;var ke;(function(c){c.EVENT_SUB_TYPE_UNSPECIFIED="EVENT_SUB_TYPE_UNSPECIFIED",c.EVENT_SUB_TYPE_CREATE="EVENT_SUB_TYPE_CREATE",c.EVENT_SUB_TYPE_UPDATE="EVENT_SUB_TYPE_UPDATE",c.EVENT_SUB_TYPE_DELETE="EVENT_SUB_TYPE_DELETE",c.EVENT_SUB_TYPE_ADD="EVENT_SUB_TYPE_ADD",c.EVENT_SUB_TYPE_REMOVE="EVENT_SUB_TYPE_REMOVE",c.EVENT_SUB_TYPE_STATE="EVENT_SUB_TYPE_STATE"})(ke=a.EventSubType||(a.EventSubType={}));function nt(c){switch(c){case 0:case"EVENT_SUB_TYPE_UNSPECIFIED":return ke.EVENT_SUB_TYPE_UNSPECIFIED;case 1:case"EVENT_SUB_TYPE_CREATE":return ke.EVENT_SUB_TYPE_CREATE;case 2:case"EVENT_SUB_TYPE_UPDATE":return ke.EVENT_SUB_TYPE_UPDATE;case 3:case"EVENT_SUB_TYPE_DELETE":return ke.EVENT_SUB_TYPE_DELETE;case 4:case"EVENT_SUB_TYPE_ADD":return ke.EVENT_SUB_TYPE_ADD;case 5:case"EVENT_SUB_TYPE_REMOVE":return ke.EVENT_SUB_TYPE_REMOVE;case 6:case"EVENT_SUB_TYPE_STATE":return ke.EVENT_SUB_TYPE_STATE;default:throw new Je.Error("Unrecognized enum value "+c+" for enum EventSubType")}}a.eventSubTypeFromJSON=nt;function ue(c){switch(c){case ke.EVENT_SUB_TYPE_UNSPECIFIED:return"EVENT_SUB_TYPE_UNSPECIFIED";case ke.EVENT_SUB_TYPE_CREATE:return"EVENT_SUB_TYPE_CREATE";case ke.EVENT_SUB_TYPE_UPDATE:return"EVENT_SUB_TYPE_UPDATE";case ke.EVENT_SUB_TYPE_DELETE:return"EVENT_SUB_TYPE_DELETE";case ke.EVENT_SUB_TYPE_ADD:return"EVENT_SUB_TYPE_ADD";case ke.EVENT_SUB_TYPE_REMOVE:return"EVENT_SUB_TYPE_REMOVE";case ke.EVENT_SUB_TYPE_STATE:return"EVENT_SUB_TYPE_STATE";default:return"UNKNOWN"}}a.eventSubTypeToJSON=ue;function b(c){switch(c){case ke.EVENT_SUB_TYPE_UNSPECIFIED:return 0;case ke.EVENT_SUB_TYPE_CREATE:return 1;case ke.EVENT_SUB_TYPE_UPDATE:return 2;case ke.EVENT_SUB_TYPE_DELETE:return 3;case ke.EVENT_SUB_TYPE_ADD:return 4;case ke.EVENT_SUB_TYPE_REMOVE:return 5;case ke.EVENT_SUB_TYPE_STATE:return 6;default:return 0}}a.eventSubTypeToNumber=b;var A;(function(c){c.EVENT_TYPE_UNSPECIFIED="EVENT_TYPE_UNSPECIFIED",c.EVENT_TYPE_COLLECTION="EVENT_TYPE_COLLECTION",c.EVENT_TYPE_PROJECT="EVENT_TYPE_PROJECT",c.EVENT_TYPE_SOURCE="EVENT_TYPE_SOURCE",c.EVENT_TYPE_DESTINATION="EVENT_TYPE_DESTINATION"})(A=a.EventType||(a.EventType={}));function B(c){switch(c){case 0:case"EVENT_TYPE_UNSPECIFIED":return A.EVENT_TYPE_UNSPECIFIED;case 1:case"EVENT_TYPE_COLLECTION":return A.EVENT_TYPE_COLLECTION;case 2:case"EVENT_TYPE_PROJECT":return A.EVENT_TYPE_PROJECT;case 4:case"EVENT_TYPE_SOURCE":return A.EVENT_TYPE_SOURCE;case 5:case"EVENT_TYPE_DESTINATION":return A.EVENT_TYPE_DESTINATION;default:throw new Je.Error("Unrecognized enum value "+c+" for enum EventType")}}a.eventTypeFromJSON=B;function ie(c){switch(c){case A.EVENT_TYPE_UNSPECIFIED:return"EVENT_TYPE_UNSPECIFIED";case A.EVENT_TYPE_COLLECTION:return"EVENT_TYPE_COLLECTION";case A.EVENT_TYPE_PROJECT:return"EVENT_TYPE_PROJECT";case A.EVENT_TYPE_SOURCE:return"EVENT_TYPE_SOURCE";case A.EVENT_TYPE_DESTINATION:return"EVENT_TYPE_DESTINATION";default:return"UNKNOWN"}}a.eventTypeToJSON=ie;function X(c){switch(c){case A.EVENT_TYPE_UNSPECIFIED:return 0;case A.EVENT_TYPE_COLLECTION:return 1;case A.EVENT_TYPE_PROJECT:return 2;case A.EVENT_TYPE_SOURCE:return 4;case A.EVENT_TYPE_DESTINATION:return 5;default:return 0}}a.eventTypeToNumber=X;function se(){return{height:void 0,width:void 0,framerate:void 0,colorSpace:void 0}}a.VideoRendering={encode(c,m=h.Writer.create()){return c.height!==void 0&&m.uint32(8).uint32(c.height),c.width!==void 0&&m.uint32(16).uint32(c.width),c.framerate!==void 0&&m.uint32(29).float(c.framerate),c.colorSpace!==void 0&&m.uint32(32).int32(W(c.colorSpace)),m},decode(c,m){const S=c instanceof h.Reader?c:new h.Reader(c);let G=m===void 0?S.len:S.pos+m;const P=se();for(;S.pos<G;){const H=S.uint32();switch(H>>>3){case 1:P.height=S.uint32();break;case 2:P.width=S.uint32();break;case 3:P.framerate=S.float();break;case 4:P.colorSpace=V(S.int32());break;default:S.skipType(H&7);break}}return P},fromJSON(c){return{height:Z(c.height)?Number(c.height):void 0,width:Z(c.width)?Number(c.width):void 0,framerate:Z(c.framerate)?Number(c.framerate):void 0,colorSpace:Z(c.colorSpace)?V(c.colorSpace):void 0}},toJSON(c){const m={};return c.height!==void 0&&(m.height=Math.round(c.height)),c.width!==void 0&&(m.width=Math.round(c.width)),c.framerate!==void 0&&(m.framerate=c.framerate),c.colorSpace!==void 0&&(m.colorSpace=c.colorSpace!==void 0?J(c.colorSpace):void 0),m},fromPartial(c){var m,S,G,P;const H=se();return H.height=(m=c.height)!==null&&m!==void 0?m:void 0,H.width=(S=c.width)!==null&&S!==void 0?S:void 0,H.framerate=(G=c.framerate)!==null&&G!==void 0?G:void 0,H.colorSpace=(P=c.colorSpace)!==null&&P!==void 0?P:void 0,H}};function Ue(){return{channelLayout:void 0}}a.AudioRendering={encode(c,m=h.Writer.create()){return c.channelLayout!==void 0&&m.uint32(8).int32(x(c.channelLayout)),m},decode(c,m){const S=c instanceof h.Reader?c:new h.Reader(c);let G=m===void 0?S.len:S.pos+m;const P=Ue();for(;S.pos<G;){const H=S.uint32();switch(H>>>3){case 1:P.channelLayout=O(S.int32());break;default:S.skipType(H&7);break}}return P},fromJSON(c){return{channelLayout:Z(c.channelLayout)?O(c.channelLayout):void 0}},toJSON(c){const m={};return c.channelLayout!==void 0&&(m.channelLayout=c.channelLayout!==void 0?$(c.channelLayout):void 0),m},fromPartial(c){var m;const S=Ue();return S.channelLayout=(m=c.channelLayout)!==null&&m!==void 0?m:void 0,S}};function Fe(){return{video:void 0,audio:void 0,quality:void 0,targetLatency:void 0,complexity:void 0}}a.Rendering={encode(c,m=h.Writer.create()){return c.video!==void 0&&a.VideoRendering.encode(c.video,m.uint32(10).fork()).ldelim(),c.audio!==void 0&&a.AudioRendering.encode(c.audio,m.uint32(18).fork()).ldelim(),c.quality!==void 0&&m.uint32(24).int32(F(c.quality)),c.targetLatency!==void 0&&m.uint32(32).uint32(c.targetLatency),c.complexity!==void 0&&m.uint32(40).int32(c.complexity),m},decode(c,m){const S=c instanceof h.Reader?c:new h.Reader(c);let G=m===void 0?S.len:S.pos+m;const P=Fe();for(;S.pos<G;){const H=S.uint32();switch(H>>>3){case 1:P.video=a.VideoRendering.decode(S,S.uint32());break;case 2:P.audio=a.AudioRendering.decode(S,S.uint32());break;case 3:P.quality=te(S.int32());break;case 4:P.targetLatency=S.uint32();break;case 5:P.complexity=S.int32();break;default:S.skipType(H&7);break}}return P},fromJSON(c){return{video:Z(c.video)?a.VideoRendering.fromJSON(c.video):void 0,audio:Z(c.audio)?a.AudioRendering.fromJSON(c.audio):void 0,quality:Z(c.quality)?te(c.quality):void 0,targetLatency:Z(c.targetLatency)?Number(c.targetLatency):void 0,complexity:Z(c.complexity)?Number(c.complexity):void 0}},toJSON(c){const m={};return c.video!==void 0&&(m.video=c.video?a.VideoRendering.toJSON(c.video):void 0),c.audio!==void 0&&(m.audio=c.audio?a.AudioRendering.toJSON(c.audio):void 0),c.quality!==void 0&&(m.quality=c.quality!==void 0?ne(c.quality):void 0),c.targetLatency!==void 0&&(m.targetLatency=Math.round(c.targetLatency)),c.complexity!==void 0&&(m.complexity=Math.round(c.complexity)),m},fromPartial(c){var m,S,G;const P=Fe();return P.video=c.video!==void 0&&c.video!==null?a.VideoRendering.fromPartial(c.video):void 0,P.audio=c.audio!==void 0&&c.audio!==null?a.AudioRendering.fromPartial(c.audio):void 0,P.quality=(m=c.quality)!==null&&m!==void 0?m:void 0,P.targetLatency=(S=c.targetLatency)!==null&&S!==void 0?S:void 0,P.complexity=(G=c.complexity)!==null&&G!==void 0?G:void 0,P}};function $e(){return{mode:void 0,targetBitrate:void 0,maxKeyFrameInterval:void 0}}a.VideoCodecRateControl={encode(c,m=h.Writer.create()){return c.mode!==void 0&&m.uint32(8).int32(oe(c.mode)),c.targetBitrate!==void 0&&m.uint32(16).uint32(c.targetBitrate),c.maxKeyFrameInterval!==void 0&&m.uint32(24).uint32(c.maxKeyFrameInterval),m},decode(c,m){const S=c instanceof h.Reader?c:new h.Reader(c);let G=m===void 0?S.len:S.pos+m;const P=$e();for(;S.pos<G;){const H=S.uint32();switch(H>>>3){case 1:P.mode=T(S.int32());break;case 2:P.targetBitrate=S.uint32();break;case 3:P.maxKeyFrameInterval=S.uint32();break;default:S.skipType(H&7);break}}return P},fromJSON(c){return{mode:Z(c.mode)?T(c.mode):void 0,targetBitrate:Z(c.targetBitrate)?Number(c.targetBitrate):void 0,maxKeyFrameInterval:Z(c.maxKeyFrameInterval)?Number(c.maxKeyFrameInterval):void 0}},toJSON(c){const m={};return c.mode!==void 0&&(m.mode=c.mode!==void 0?L(c.mode):void 0),c.targetBitrate!==void 0&&(m.targetBitrate=Math.round(c.targetBitrate)),c.maxKeyFrameInterval!==void 0&&(m.maxKeyFrameInterval=Math.round(c.maxKeyFrameInterval)),m},fromPartial(c){var m,S,G;const P=$e();return P.mode=(m=c.mode)!==null&&m!==void 0?m:void 0,P.targetBitrate=(S=c.targetBitrate)!==null&&S!==void 0?S:void 0,P.maxKeyFrameInterval=(G=c.maxKeyFrameInterval)!==null&&G!==void 0?G:void 0,P}};function Be(){return{codec:void 0,rateControl:void 0,profile:void 0}}a.VideoEncoding={encode(c,m=h.Writer.create()){return c.codec!==void 0&&m.uint32(8).int32(q(c.codec)),c.rateControl!==void 0&&a.VideoCodecRateControl.encode(c.rateControl,m.uint32(18).fork()).ldelim(),c.profile!==void 0&&m.uint32(32).int32(Q(c.profile)),m},decode(c,m){const S=c instanceof h.Reader?c:new h.Reader(c);let G=m===void 0?S.len:S.pos+m;const P=Be();for(;S.pos<G;){const H=S.uint32();switch(H>>>3){case 1:P.codec=K(S.int32());break;case 2:P.rateControl=a.VideoCodecRateControl.decode(S,S.uint32());break;case 4:P.profile=le(S.int32());break;default:S.skipType(H&7);break}}return P},fromJSON(c){return{codec:Z(c.codec)?K(c.codec):void 0,rateControl:Z(c.rateControl)?a.VideoCodecRateControl.fromJSON(c.rateControl):void 0,profile:Z(c.profile)?le(c.profile):void 0}},toJSON(c){const m={};return c.codec!==void 0&&(m.codec=c.codec!==void 0?M(c.codec):void 0),c.rateControl!==void 0&&(m.rateControl=c.rateControl?a.VideoCodecRateControl.toJSON(c.rateControl):void 0),c.profile!==void 0&&(m.profile=c.profile!==void 0?re(c.profile):void 0),m},fromPartial(c){var m,S;const G=Be();return G.codec=(m=c.codec)!==null&&m!==void 0?m:void 0,G.rateControl=c.rateControl!==void 0&&c.rateControl!==null?a.VideoCodecRateControl.fromPartial(c.rateControl):void 0,G.profile=(S=c.profile)!==null&&S!==void 0?S:void 0,G}};function Ye(){return{codec:void 0}}a.AudioEncoding={encode(c,m=h.Writer.create()){return c.codec!==void 0&&m.uint32(8).int32(ye(c.codec)),m},decode(c,m){const S=c instanceof h.Reader?c:new h.Reader(c);let G=m===void 0?S.len:S.pos+m;const P=Ye();for(;S.pos<G;){const H=S.uint32();switch(H>>>3){case 1:P.codec=me(S.int32());break;default:S.skipType(H&7);break}}return P},fromJSON(c){return{codec:Z(c.codec)?me(c.codec):void 0}},toJSON(c){const m={};return c.codec!==void 0&&(m.codec=c.codec!==void 0?ve(c.codec):void 0),m},fromPartial(c){var m;const S=Ye();return S.codec=(m=c.codec)!==null&&m!==void 0?m:void 0,S}};function ze(){return{video:void 0,audio:void 0}}a.Encoding={encode(c,m=h.Writer.create()){return c.video!==void 0&&a.VideoEncoding.encode(c.video,m.uint32(10).fork()).ldelim(),c.audio!==void 0&&a.AudioEncoding.encode(c.audio,m.uint32(18).fork()).ldelim(),m},decode(c,m){const S=c instanceof h.Reader?c:new h.Reader(c);let G=m===void 0?S.len:S.pos+m;const P=ze();for(;S.pos<G;){const H=S.uint32();switch(H>>>3){case 1:P.video=a.VideoEncoding.decode(S,S.uint32());break;case 2:P.audio=a.AudioEncoding.decode(S,S.uint32());break;default:S.skipType(H&7);break}}return P},fromJSON(c){return{video:Z(c.video)?a.VideoEncoding.fromJSON(c.video):void 0,audio:Z(c.audio)?a.AudioEncoding.fromJSON(c.audio):void 0}},toJSON(c){const m={};return c.video!==void 0&&(m.video=c.video?a.VideoEncoding.toJSON(c.video):void 0),c.audio!==void 0&&(m.audio=c.audio?a.AudioEncoding.toJSON(c.audio):void 0),m},fromPartial(c){const m=ze();return m.video=c.video!==void 0&&c.video!==null?a.VideoEncoding.fromPartial(c.video):void 0,m.audio=c.audio!==void 0&&c.audio!==null?a.AudioEncoding.fromPartial(c.audio):void 0,m}};function xe(){return{enabled:void 0,key:void 0,url:void 0,baseUrl:void 0}}a.SourceRtmpPushAddress={encode(c,m=h.Writer.create()){return c.enabled!==void 0&&m.uint32(8).bool(c.enabled),c.key!==void 0&&m.uint32(18).string(c.key),c.url!==void 0&&m.uint32(26).string(c.url),c.baseUrl!==void 0&&m.uint32(34).string(c.baseUrl),m},decode(c,m){const S=c instanceof h.Reader?c:new h.Reader(c);let G=m===void 0?S.len:S.pos+m;const P=xe();for(;S.pos<G;){const H=S.uint32();switch(H>>>3){case 1:P.enabled=S.bool();break;case 2:P.key=S.string();break;case 3:P.url=S.string();break;case 4:P.baseUrl=S.string();break;default:S.skipType(H&7);break}}return P},fromJSON(c){return{enabled:Z(c.enabled)?Boolean(c.enabled):void 0,key:Z(c.key)?String(c.key):void 0,url:Z(c.url)?String(c.url):void 0,baseUrl:Z(c.baseUrl)?String(c.baseUrl):void 0}},toJSON(c){const m={};return c.enabled!==void 0&&(m.enabled=c.enabled),c.key!==void 0&&(m.key=c.key),c.url!==void 0&&(m.url=c.url),c.baseUrl!==void 0&&(m.baseUrl=c.baseUrl),m},fromPartial(c){var m,S,G,P;const H=xe();return H.enabled=(m=c.enabled)!==null&&m!==void 0?m:void 0,H.key=(S=c.key)!==null&&S!==void 0?S:void 0,H.url=(G=c.url)!==null&&G!==void 0?G:void 0,H.baseUrl=(P=c.baseUrl)!==null&&P!==void 0?P:void 0,H}};function je(){return{enabled:void 0,streamId:void 0,url:void 0,baseUrl:void 0}}a.SrtPushAddress={encode(c,m=h.Writer.create()){return c.enabled!==void 0&&m.uint32(8).bool(c.enabled),c.streamId!==void 0&&m.uint32(18).string(c.streamId),c.url!==void 0&&m.uint32(26).string(c.url),c.baseUrl!==void 0&&m.uint32(34).string(c.baseUrl),m},decode(c,m){const S=c instanceof h.Reader?c:new h.Reader(c);let G=m===void 0?S.len:S.pos+m;const P=je();for(;S.pos<G;){const H=S.uint32();switch(H>>>3){case 1:P.enabled=S.bool();break;case 2:P.streamId=S.string();break;case 3:P.url=S.string();break;case 4:P.baseUrl=S.string();break;default:S.skipType(H&7);break}}return P},fromJSON(c){return{enabled:Z(c.enabled)?Boolean(c.enabled):void 0,streamId:Z(c.streamId)?String(c.streamId):void 0,url:Z(c.url)?String(c.url):void 0,baseUrl:Z(c.baseUrl)?String(c.baseUrl):void 0}},toJSON(c){const m={};return c.enabled!==void 0&&(m.enabled=c.enabled),c.streamId!==void 0&&(m.streamId=c.streamId),c.url!==void 0&&(m.url=c.url),c.baseUrl!==void 0&&(m.baseUrl=c.baseUrl),m},fromPartial(c){var m,S,G,P;const H=je();return H.enabled=(m=c.enabled)!==null&&m!==void 0?m:void 0,H.streamId=(S=c.streamId)!==null&&S!==void 0?S:void 0,H.url=(G=c.url)!==null&&G!==void 0?G:void 0,H.baseUrl=(P=c.baseUrl)!==null&&P!==void 0?P:void 0,H}};function Ke(){return{rtmpPush:void 0,srtPush:void 0}}a.SourceAddress={encode(c,m=h.Writer.create()){return c.rtmpPush!==void 0&&a.SourceRtmpPushAddress.encode(c.rtmpPush,m.uint32(10).fork()).ldelim(),c.srtPush!==void 0&&a.SrtPushAddress.encode(c.srtPush,m.uint32(18).fork()).ldelim(),m},decode(c,m){const S=c instanceof h.Reader?c:new h.Reader(c);let G=m===void 0?S.len:S.pos+m;const P=Ke();for(;S.pos<G;){const H=S.uint32();switch(H>>>3){case 1:P.rtmpPush=a.SourceRtmpPushAddress.decode(S,S.uint32());break;case 2:P.srtPush=a.SrtPushAddress.decode(S,S.uint32());break;default:S.skipType(H&7);break}}return P},fromJSON(c){return{rtmpPush:Z(c.rtmpPush)?a.SourceRtmpPushAddress.fromJSON(c.rtmpPush):void 0,srtPush:Z(c.srtPush)?a.SrtPushAddress.fromJSON(c.srtPush):void 0}},toJSON(c){const m={};return c.rtmpPush!==void 0&&(m.rtmpPush=c.rtmpPush?a.SourceRtmpPushAddress.toJSON(c.rtmpPush):void 0),c.srtPush!==void 0&&(m.srtPush=c.srtPush?a.SrtPushAddress.toJSON(c.srtPush):void 0),m},fromPartial(c){const m=Ke();return m.rtmpPush=c.rtmpPush!==void 0&&c.rtmpPush!==null?a.SourceRtmpPushAddress.fromPartial(c.rtmpPush):void 0,m.srtPush=c.srtPush!==void 0&&c.srtPush!==null?a.SrtPushAddress.fromPartial(c.srtPush):void 0,m}};function Qe(){return{key:void 0,url:""}}a.DestinationRtmpPushAddress={encode(c,m=h.Writer.create()){return c.key!==void 0&&m.uint32(10).string(c.key),c.url!==""&&m.uint32(18).string(c.url),m},decode(c,m){const S=c instanceof h.Reader?c:new h.Reader(c);let G=m===void 0?S.len:S.pos+m;const P=Qe();for(;S.pos<G;){const H=S.uint32();switch(H>>>3){case 1:P.key=S.string();break;case 2:P.url=S.string();break;default:S.skipType(H&7);break}}return P},fromJSON(c){return{key:Z(c.key)?String(c.key):void 0,url:Z(c.url)?String(c.url):""}},toJSON(c){const m={};return c.key!==void 0&&(m.key=c.key),c.url!==void 0&&(m.url=c.url),m},fromPartial(c){var m,S;const G=Qe();return G.key=(m=c.key)!==null&&m!==void 0?m:void 0,G.url=(S=c.url)!==null&&S!==void 0?S:"",G}};function Le(){return{appId:"",channelId:"",userId:""}}a.DestinationAgoraPushAddress={encode(c,m=h.Writer.create()){return c.appId!==""&&m.uint32(10).string(c.appId),c.channelId!==""&&m.uint32(18).string(c.channelId),c.userId!==""&&m.uint32(26).string(c.userId),m},decode(c,m){const S=c instanceof h.Reader?c:new h.Reader(c);let G=m===void 0?S.len:S.pos+m;const P=Le();for(;S.pos<G;){const H=S.uint32();switch(H>>>3){case 1:P.appId=S.string();break;case 2:P.channelId=S.string();break;case 3:P.userId=S.string();break;default:S.skipType(H&7);break}}return P},fromJSON(c){return{appId:Z(c.appId)?String(c.appId):"",channelId:Z(c.channelId)?String(c.channelId):"",userId:Z(c.userId)?String(c.userId):""}},toJSON(c){const m={};return c.appId!==void 0&&(m.appId=c.appId),c.channelId!==void 0&&(m.channelId=c.channelId),c.userId!==void 0&&(m.userId=c.userId),m},fromPartial(c){var m,S,G;const P=Le();return P.appId=(m=c.appId)!==null&&m!==void 0?m:"",P.channelId=(S=c.channelId)!==null&&S!==void 0?S:"",P.userId=(G=c.userId)!==null&&G!==void 0?G:"",P}};function Oe(){return{rtmpPush:void 0,agora:void 0}}a.DestinationAddress={encode(c,m=h.Writer.create()){return c.rtmpPush!==void 0&&a.DestinationRtmpPushAddress.encode(c.rtmpPush,m.uint32(10).fork()).ldelim(),c.agora!==void 0&&a.DestinationAgoraPushAddress.encode(c.agora,m.uint32(18).fork()).ldelim(),m},decode(c,m){const S=c instanceof h.Reader?c:new h.Reader(c);let G=m===void 0?S.len:S.pos+m;const P=Oe();for(;S.pos<G;){const H=S.uint32();switch(H>>>3){case 1:P.rtmpPush=a.DestinationRtmpPushAddress.decode(S,S.uint32());break;case 2:P.agora=a.DestinationAgoraPushAddress.decode(S,S.uint32());break;default:S.skipType(H&7);break}}return P},fromJSON(c){return{rtmpPush:Z(c.rtmpPush)?a.DestinationRtmpPushAddress.fromJSON(c.rtmpPush):void 0,agora:Z(c.agora)?a.DestinationAgoraPushAddress.fromJSON(c.agora):void 0}},toJSON(c){const m={};return c.rtmpPush!==void 0&&(m.rtmpPush=c.rtmpPush?a.DestinationRtmpPushAddress.toJSON(c.rtmpPush):void 0),c.agora!==void 0&&(m.agora=c.agora?a.DestinationAgoraPushAddress.toJSON(c.agora):void 0),m},fromPartial(c){const m=Oe();return m.rtmpPush=c.rtmpPush!==void 0&&c.rtmpPush!==null?a.DestinationRtmpPushAddress.fromPartial(c.rtmpPush):void 0,m.agora=c.agora!==void 0&&c.agora!==null?a.DestinationAgoraPushAddress.fromPartial(c.agora):void 0,m}};function rt(){return{sourceId:"",start:void 0,stop:void 0}}a.SourceTrigger={encode(c,m=h.Writer.create()){return c.sourceId!==""&&m.uint32(10).string(c.sourceId),c.start!==void 0&&m.uint32(16).int32(Pe(c.start)),c.stop!==void 0&&m.uint32(24).int32(Pe(c.stop)),m},decode(c,m){const S=c instanceof h.Reader?c:new h.Reader(c);let G=m===void 0?S.len:S.pos+m;const P=rt();for(;S.pos<G;){const H=S.uint32();switch(H>>>3){case 1:P.sourceId=S.string();break;case 2:P.start=fe(S.int32());break;case 3:P.stop=fe(S.int32());break;default:S.skipType(H&7);break}}return P},fromJSON(c){return{sourceId:Z(c.sourceId)?String(c.sourceId):"",start:Z(c.start)?fe(c.start):void 0,stop:Z(c.stop)?fe(c.stop):void 0}},toJSON(c){const m={};return c.sourceId!==void 0&&(m.sourceId=c.sourceId),c.start!==void 0&&(m.start=c.start!==void 0?Ee(c.start):void 0),c.stop!==void 0&&(m.stop=c.stop!==void 0?Ee(c.stop):void 0),m},fromPartial(c){var m,S,G;const P=rt();return P.sourceId=(m=c.sourceId)!==null&&m!==void 0?m:"",P.start=(S=c.start)!==null&&S!==void 0?S:void 0,P.stop=(G=c.stop)!==null&&G!==void 0?G:void 0,P}};function st(){return{stop:void 0}}a.WebRtcTrigger={encode(c,m=h.Writer.create()){return c.stop!==void 0&&m.uint32(24).int32(Pe(c.stop)),m},decode(c,m){const S=c instanceof h.Reader?c:new h.Reader(c);let G=m===void 0?S.len:S.pos+m;const P=st();for(;S.pos<G;){const H=S.uint32();switch(H>>>3){case 3:P.stop=fe(S.int32());break;default:S.skipType(H&7);break}}return P},fromJSON(c){return{stop:Z(c.stop)?fe(c.stop):void 0}},toJSON(c){const m={};return c.stop!==void 0&&(m.stop=c.stop!==void 0?Ee(c.stop):void 0),m},fromPartial(c){var m;const S=st();return S.stop=(m=c.stop)!==null&&m!==void 0?m:void 0,S}};function ut(){return{source:void 0}}a.ProjectTrigger={encode(c,m=h.Writer.create()){return c.source!==void 0&&a.SourceTrigger.encode(c.source,m.uint32(10).fork()).ldelim(),m},decode(c,m){const S=c instanceof h.Reader?c:new h.Reader(c);let G=m===void 0?S.len:S.pos+m;const P=ut();for(;S.pos<G;){const H=S.uint32();switch(H>>>3){case 1:P.source=a.SourceTrigger.decode(S,S.uint32());break;default:S.skipType(H&7);break}}return P},fromJSON(c){return{source:Z(c.source)?a.SourceTrigger.fromJSON(c.source):void 0}},toJSON(c){const m={};return c.source!==void 0&&(m.source=c.source?a.SourceTrigger.toJSON(c.source):void 0),m},fromPartial(c){const m=ut();return m.source=c.source!==void 0&&c.source!==null?a.SourceTrigger.fromPartial(c.source):void 0,m}};function dt(){return{enabled:void 0,url:void 0}}a.PreviewHlsPullAddress={encode(c,m=h.Writer.create()){return c.enabled!==void 0&&m.uint32(8).bool(c.enabled),c.url!==void 0&&m.uint32(18).string(c.url),m},decode(c,m){const S=c instanceof h.Reader?c:new h.Reader(c);let G=m===void 0?S.len:S.pos+m;const P=dt();for(;S.pos<G;){const H=S.uint32();switch(H>>>3){case 1:P.enabled=S.bool();break;case 2:P.url=S.string();break;default:S.skipType(H&7);break}}return P},fromJSON(c){return{enabled:Z(c.enabled)?Boolean(c.enabled):void 0,url:Z(c.url)?String(c.url):void 0}},toJSON(c){const m={};return c.enabled!==void 0&&(m.enabled=c.enabled),c.url!==void 0&&(m.url=c.url),m},fromPartial(c){var m,S;const G=dt();return G.enabled=(m=c.enabled)!==null&&m!==void 0?m:void 0,G.url=(S=c.url)!==null&&S!==void 0?S:void 0,G}};function ct(){return{enabled:void 0,displayName:void 0,participantId:void 0}}a.PreviewWebRtcAddress={encode(c,m=h.Writer.create()){return c.enabled!==void 0&&m.uint32(8).bool(c.enabled),c.displayName!==void 0&&m.uint32(18).string(c.displayName),c.participantId!==void 0&&m.uint32(26).string(c.participantId),m},decode(c,m){const S=c instanceof h.Reader?c:new h.Reader(c);let G=m===void 0?S.len:S.pos+m;const P=ct();for(;S.pos<G;){const H=S.uint32();switch(H>>>3){case 1:P.enabled=S.bool();break;case 2:P.displayName=S.string();break;case 3:P.participantId=S.string();break;default:S.skipType(H&7);break}}return P},fromJSON(c){return{enabled:Z(c.enabled)?Boolean(c.enabled):void 0,displayName:Z(c.displayName)?String(c.displayName):void 0,participantId:Z(c.participantId)?String(c.participantId):void 0}},toJSON(c){const m={};return c.enabled!==void 0&&(m.enabled=c.enabled),c.displayName!==void 0&&(m.displayName=c.displayName),c.participantId!==void 0&&(m.participantId=c.participantId),m},fromPartial(c){var m,S,G;const P=ct();return P.enabled=(m=c.enabled)!==null&&m!==void 0?m:void 0,P.displayName=(S=c.displayName)!==null&&S!==void 0?S:void 0,P.participantId=(G=c.participantId)!==null&&G!==void 0?G:void 0,P}};function lt(){return{webrtc:void 0}}a.PreviewAddress={encode(c,m=h.Writer.create()){return c.webrtc!==void 0&&a.PreviewWebRtcAddress.encode(c.webrtc,m.uint32(18).fork()).ldelim(),m},decode(c,m){const S=c instanceof h.Reader?c:new h.Reader(c);let G=m===void 0?S.len:S.pos+m;const P=lt();for(;S.pos<G;){const H=S.uint32();switch(H>>>3){case 2:P.webrtc=a.PreviewWebRtcAddress.decode(S,S.uint32());break;default:S.skipType(H&7);break}}return P},fromJSON(c){return{webrtc:Z(c.webrtc)?a.PreviewWebRtcAddress.fromJSON(c.webrtc):void 0}},toJSON(c){const m={};return c.webrtc!==void 0&&(m.webrtc=c.webrtc?a.PreviewWebRtcAddress.toJSON(c.webrtc):void 0),m},fromPartial(c){const m=lt();return m.webrtc=c.webrtc!==void 0&&c.webrtc!==null?a.PreviewWebRtcAddress.fromPartial(c.webrtc):void 0,m}};function ft(){return{rendererUrl:""}}a.StudioSdkComposition={encode(c,m=h.Writer.create()){return c.rendererUrl!==""&&m.uint32(10).string(c.rendererUrl),m},decode(c,m){const S=c instanceof h.Reader?c:new h.Reader(c);let G=m===void 0?S.len:S.pos+m;const P=ft();for(;S.pos<G;){const H=S.uint32();switch(H>>>3){case 1:P.rendererUrl=S.string();break;default:S.skipType(H&7);break}}return P},fromJSON(c){return{rendererUrl:Z(c.rendererUrl)?String(c.rendererUrl):""}},toJSON(c){const m={};return c.rendererUrl!==void 0&&(m.rendererUrl=c.rendererUrl),m},fromPartial(c){var m;const S=ft();return S.rendererUrl=(m=c.rendererUrl)!==null&&m!==void 0?m:"",S}};function pt(){return{selectedLayoutId:void 0}}a.SceneCompositionLegacy={encode(c,m=h.Writer.create()){return c.selectedLayoutId!==void 0&&m.uint32(18).string(c.selectedLayoutId),m},decode(c,m){const S=c instanceof h.Reader?c:new h.Reader(c);let G=m===void 0?S.len:S.pos+m;const P=pt();for(;S.pos<G;){const H=S.uint32();switch(H>>>3){case 2:P.selectedLayoutId=S.string();break;default:S.skipType(H&7);break}}return P},fromJSON(c){return{selectedLayoutId:Z(c.selectedLayoutId)?String(c.selectedLayoutId):void 0}},toJSON(c){const m={};return c.selectedLayoutId!==void 0&&(m.selectedLayoutId=c.selectedLayoutId),m},fromPartial(c){var m;const S=pt();return S.selectedLayoutId=(m=c.selectedLayoutId)!==null&&m!==void 0?m:void 0,S}};function ht(){return{rendererUrl:void 0,selectedLayoutId:void 0}}a.SceneComposition={encode(c,m=h.Writer.create()){return c.rendererUrl!==void 0&&m.uint32(10).string(c.rendererUrl),c.selectedLayoutId!==void 0&&m.uint32(18).string(c.selectedLayoutId),m},decode(c,m){const S=c instanceof h.Reader?c:new h.Reader(c);let G=m===void 0?S.len:S.pos+m;const P=ht();for(;S.pos<G;){const H=S.uint32();switch(H>>>3){case 1:P.rendererUrl=S.string();break;case 2:P.selectedLayoutId=S.string();break;default:S.skipType(H&7);break}}return P},fromJSON(c){return{rendererUrl:Z(c.rendererUrl)?String(c.rendererUrl):void 0,selectedLayoutId:Z(c.selectedLayoutId)?String(c.selectedLayoutId):void 0}},toJSON(c){const m={};return c.rendererUrl!==void 0&&(m.rendererUrl=c.rendererUrl),c.selectedLayoutId!==void 0&&(m.selectedLayoutId=c.selectedLayoutId),m},fromPartial(c){var m,S;const G=ht();return G.rendererUrl=(m=c.rendererUrl)!==null&&m!==void 0?m:void 0,G.selectedLayoutId=(S=c.selectedLayoutId)!==null&&S!==void 0?S:void 0,G}};function mt(){return{url:""}}a.ExternalComposition={encode(c,m=h.Writer.create()){return c.url!==""&&m.uint32(10).string(c.url),m},decode(c,m){const S=c instanceof h.Reader?c:new h.Reader(c);let G=m===void 0?S.len:S.pos+m;const P=mt();for(;S.pos<G;){const H=S.uint32();switch(H>>>3){case 1:P.url=S.string();break;default:S.skipType(H&7);break}}return P},fromJSON(c){return{url:Z(c.url)?String(c.url):""}},toJSON(c){const m={};return c.url!==void 0&&(m.url=c.url),m},fromPartial(c){var m;const S=mt();return S.url=(m=c.url)!==null&&m!==void 0?m:"",S}};function vt(){return{external:void 0,studioSdk:void 0,sceneLegacy:void 0,scene:void 0}}a.Composition={encode(c,m=h.Writer.create()){return c.external!==void 0&&a.ExternalComposition.encode(c.external,m.uint32(10).fork()).ldelim(),c.studioSdk!==void 0&&a.StudioSdkComposition.encode(c.studioSdk,m.uint32(18).fork()).ldelim(),c.sceneLegacy!==void 0&&a.SceneCompositionLegacy.encode(c.sceneLegacy,m.uint32(26).fork()).ldelim(),c.scene!==void 0&&a.SceneComposition.encode(c.scene,m.uint32(34).fork()).ldelim(),m},decode(c,m){const S=c instanceof h.Reader?c:new h.Reader(c);let G=m===void 0?S.len:S.pos+m;const P=vt();for(;S.pos<G;){const H=S.uint32();switch(H>>>3){case 1:P.external=a.ExternalComposition.decode(S,S.uint32());break;case 2:P.studioSdk=a.StudioSdkComposition.decode(S,S.uint32());break;case 3:P.sceneLegacy=a.SceneCompositionLegacy.decode(S,S.uint32());break;case 4:P.scene=a.SceneComposition.decode(S,S.uint32());break;default:S.skipType(H&7);break}}return P},fromJSON(c){return{external:Z(c.external)?a.ExternalComposition.fromJSON(c.external):void 0,studioSdk:Z(c.studioSdk)?a.StudioSdkComposition.fromJSON(c.studioSdk):void 0,sceneLegacy:Z(c.sceneLegacy)?a.SceneCompositionLegacy.fromJSON(c.sceneLegacy):void 0,scene:Z(c.scene)?a.SceneComposition.fromJSON(c.scene):void 0}},toJSON(c){const m={};return c.external!==void 0&&(m.external=c.external?a.ExternalComposition.toJSON(c.external):void 0),c.studioSdk!==void 0&&(m.studioSdk=c.studioSdk?a.StudioSdkComposition.toJSON(c.studioSdk):void 0),c.sceneLegacy!==void 0&&(m.sceneLegacy=c.sceneLegacy?a.SceneCompositionLegacy.toJSON(c.sceneLegacy):void 0),c.scene!==void 0&&(m.scene=c.scene?a.SceneComposition.toJSON(c.scene):void 0),m},fromPartial(c){const m=vt();return m.external=c.external!==void 0&&c.external!==null?a.ExternalComposition.fromPartial(c.external):void 0,m.studioSdk=c.studioSdk!==void 0&&c.studioSdk!==null?a.StudioSdkComposition.fromPartial(c.studioSdk):void 0,m.sceneLegacy=c.sceneLegacy!==void 0&&c.sceneLegacy!==null?a.SceneCompositionLegacy.fromPartial(c.sceneLegacy):void 0,m.scene=c.scene!==void 0&&c.scene!==null?a.SceneComposition.fromPartial(c.scene):void 0,m}};function St(){return{enabled:void 0}}a.HostedWebRtc={encode(c,m=h.Writer.create()){return c.enabled!==void 0&&m.uint32(8).bool(c.enabled),m},decode(c,m){const S=c instanceof h.Reader?c:new h.Reader(c);let G=m===void 0?S.len:S.pos+m;const P=St();for(;S.pos<G;){const H=S.uint32();switch(H>>>3){case 1:P.enabled=S.bool();break;default:S.skipType(H&7);break}}return P},fromJSON(c){return{enabled:Z(c.enabled)?Boolean(c.enabled):void 0}},toJSON(c){const m={};return c.enabled!==void 0&&(m.enabled=c.enabled),m},fromPartial(c){var m;const S=St();return S.enabled=(m=c.enabled)!==null&&m!==void 0?m:void 0,S}};function yt(){return{hosted:void 0}}a.WebRtc={encode(c,m=h.Writer.create()){return c.hosted!==void 0&&a.HostedWebRtc.encode(c.hosted,m.uint32(10).fork()).ldelim(),m},decode(c,m){const S=c instanceof h.Reader?c:new h.Reader(c);let G=m===void 0?S.len:S.pos+m;const P=yt();for(;S.pos<G;){const H=S.uint32();switch(H>>>3){case 1:P.hosted=a.HostedWebRtc.decode(S,S.uint32());break;default:S.skipType(H&7);break}}return P},fromJSON(c){return{hosted:Z(c.hosted)?a.HostedWebRtc.fromJSON(c.hosted):void 0}},toJSON(c){const m={};return c.hosted!==void 0&&(m.hosted=c.hosted?a.HostedWebRtc.toJSON(c.hosted):void 0),m},fromPartial(c){const m=yt();return m.hosted=c.hosted!==void 0&&c.hosted!==null?a.HostedWebRtc.fromPartial(c.hosted):void 0,m}};function bt(){return{accessToken:"",participantId:void 0}}a.WebRtcAccess={encode(c,m=h.Writer.create()){return c.accessToken!==""&&m.uint32(10).string(c.accessToken),c.participantId!==void 0&&m.uint32(26).string(c.participantId),m},decode(c,m){const S=c instanceof h.Reader?c:new h.Reader(c);let G=m===void 0?S.len:S.pos+m;const P=bt();for(;S.pos<G;){const H=S.uint32();switch(H>>>3){case 1:P.accessToken=S.string();break;case 3:P.participantId=S.string();break;default:S.skipType(H&7);break}}return P},fromJSON(c){return{accessToken:Z(c.accessToken)?String(c.accessToken):"",participantId:Z(c.participantId)?String(c.participantId):void 0}},toJSON(c){const m={};return c.accessToken!==void 0&&(m.accessToken=c.accessToken),c.participantId!==void 0&&(m.participantId=c.participantId),m},fromPartial(c){var m,S;const G=bt();return G.accessToken=(m=c.accessToken)!==null&&m!==void 0?m:"",G.participantId=(S=c.participantId)!==null&&S!==void 0?S:void 0,G}};function gt(){return{latitude:0,longitude:0}}a.LatLong={encode(c,m=h.Writer.create()){return c.latitude!==0&&m.uint32(9).double(c.latitude),c.longitude!==0&&m.uint32(17).double(c.longitude),m},decode(c,m){const S=c instanceof h.Reader?c:new h.Reader(c);let G=m===void 0?S.len:S.pos+m;const P=gt();for(;S.pos<G;){const H=S.uint32();switch(H>>>3){case 1:P.latitude=S.double();break;case 2:P.longitude=S.double();break;default:S.skipType(H&7);break}}return P},fromJSON(c){return{latitude:Z(c.latitude)?Number(c.latitude):0,longitude:Z(c.longitude)?Number(c.longitude):0}},toJSON(c){const m={};return c.latitude!==void 0&&(m.latitude=c.latitude),c.longitude!==void 0&&(m.longitude=c.longitude),m},fromPartial(c){var m,S;const G=gt();return G.latitude=(m=c.latitude)!==null&&m!==void 0?m:0,G.longitude=(S=c.longitude)!==null&&S!==void 0?S:0,G}};function _t(){return{collectionId:"",projectId:"",broadcastId:void 0,duration:void 0,start:void 0,stop:void 0,phase:k.PROJECT_BROADCAST_PHASE_UNSPECIFIED,region:void 0,datacenter:void 0}}a.ProjectBroadcastStatus={encode(c,m=h.Writer.create()){return c.collectionId!==""&&m.uint32(10).string(c.collectionId),c.projectId!==""&&m.uint32(18).string(c.projectId),c.broadcastId!==void 0&&m.uint32(26).string(c.broadcastId),c.duration!==void 0&&m.uint32(32).uint32(c.duration),c.start!==void 0&&y.Timestamp.encode(it(c.start),m.uint32(42).fork()).ldelim(),c.stop!==void 0&&y.Timestamp.encode(it(c.stop),m.uint32(50).fork()).ldelim(),c.phase!==k.PROJECT_BROADCAST_PHASE_UNSPECIFIED&&m.uint32(56).int32(de(c.phase)),c.region!==void 0&&m.uint32(64).int32(He(c.region)),c.datacenter!==void 0&&m.uint32(74).string(c.datacenter),m},decode(c,m){const S=c instanceof h.Reader?c:new h.Reader(c);let G=m===void 0?S.len:S.pos+m;const P=_t();for(;S.pos<G;){const H=S.uint32();switch(H>>>3){case 1:P.collectionId=S.string();break;case 2:P.projectId=S.string();break;case 3:P.broadcastId=S.string();break;case 4:P.duration=S.uint32();break;case 5:P.start=ot(y.Timestamp.decode(S,S.uint32()));break;case 6:P.stop=ot(y.Timestamp.decode(S,S.uint32()));break;case 7:P.phase=U(S.int32());break;case 8:P.region=Ie(S.int32());break;case 9:P.datacenter=S.string();break;default:S.skipType(H&7);break}}return P},fromJSON(c){return{collectionId:Z(c.collectionId)?String(c.collectionId):"",projectId:Z(c.projectId)?String(c.projectId):"",broadcastId:Z(c.broadcastId)?String(c.broadcastId):void 0,duration:Z(c.duration)?Number(c.duration):void 0,start:Z(c.start)?String(c.start):void 0,stop:Z(c.stop)?String(c.stop):void 0,phase:Z(c.phase)?U(c.phase):k.PROJECT_BROADCAST_PHASE_UNSPECIFIED,region:Z(c.region)?Ie(c.region):void 0,datacenter:Z(c.datacenter)?String(c.datacenter):void 0}},toJSON(c){const m={};return c.collectionId!==void 0&&(m.collectionId=c.collectionId),c.projectId!==void 0&&(m.projectId=c.projectId),c.broadcastId!==void 0&&(m.broadcastId=c.broadcastId),c.duration!==void 0&&(m.duration=Math.round(c.duration)),c.start!==void 0&&(m.start=c.start),c.stop!==void 0&&(m.stop=c.stop),c.phase!==void 0&&(m.phase=ee(c.phase)),c.region!==void 0&&(m.region=c.region!==void 0?De(c.region):void 0),c.datacenter!==void 0&&(m.datacenter=c.datacenter),m},fromPartial(c){var m,S,G,P,H,he,Ne,We,Ge;const qe=_t();return qe.collectionId=(m=c.collectionId)!==null&&m!==void 0?m:"",qe.projectId=(S=c.projectId)!==null&&S!==void 0?S:"",qe.broadcastId=(G=c.broadcastId)!==null&&G!==void 0?G:void 0,qe.duration=(P=c.duration)!==null&&P!==void 0?P:void 0,qe.start=(H=c.start)!==null&&H!==void 0?H:void 0,qe.stop=(he=c.stop)!==null&&he!==void 0?he:void 0,qe.phase=(Ne=c.phase)!==null&&Ne!==void 0?Ne:k.PROJECT_BROADCAST_PHASE_UNSPECIFIED,qe.region=(We=c.region)!==null&&We!==void 0?We:void 0,qe.datacenter=(Ge=c.datacenter)!==null&&Ge!==void 0?Ge:void 0,qe}};function Et(){return{collectionId:"",sourceId:"",metadata:void 0,preview:void 0,address:void 0}}a.Source={encode(c,m=h.Writer.create()){return c.collectionId!==""&&m.uint32(10).string(c.collectionId),c.sourceId!==""&&m.uint32(18).string(c.sourceId),c.metadata!==void 0&&_.Value.encode(_.Value.wrap(c.metadata),m.uint32(26).fork()).ldelim(),c.preview!==void 0&&a.PreviewAddress.encode(c.preview,m.uint32(34).fork()).ldelim(),c.address!==void 0&&a.SourceAddress.encode(c.address,m.uint32(50).fork()).ldelim(),m},decode(c,m){const S=c instanceof h.Reader?c:new h.Reader(c);let G=m===void 0?S.len:S.pos+m;const P=Et();for(;S.pos<G;){const H=S.uint32();switch(H>>>3){case 1:P.collectionId=S.string();break;case 2:P.sourceId=S.string();break;case 3:P.metadata=_.Value.unwrap(_.Value.decode(S,S.uint32()));break;case 4:P.preview=a.PreviewAddress.decode(S,S.uint32());break;case 6:P.address=a.SourceAddress.decode(S,S.uint32());break;default:S.skipType(H&7);break}}return P},fromJSON(c){return{collectionId:Z(c.collectionId)?String(c.collectionId):"",sourceId:Z(c.sourceId)?String(c.sourceId):"",metadata:Z(c==null?void 0:c.metadata)?c.metadata:void 0,preview:Z(c.preview)?a.PreviewAddress.fromJSON(c.preview):void 0,address:Z(c.address)?a.SourceAddress.fromJSON(c.address):void 0}},toJSON(c){const m={};return c.collectionId!==void 0&&(m.collectionId=c.collectionId),c.sourceId!==void 0&&(m.sourceId=c.sourceId),c.metadata!==void 0&&(m.metadata=c.metadata),c.preview!==void 0&&(m.preview=c.preview?a.PreviewAddress.toJSON(c.preview):void 0),c.address!==void 0&&(m.address=c.address?a.SourceAddress.toJSON(c.address):void 0),m},fromPartial(c){var m,S,G;const P=Et();return P.collectionId=(m=c.collectionId)!==null&&m!==void 0?m:"",P.sourceId=(S=c.sourceId)!==null&&S!==void 0?S:"",P.metadata=(G=c.metadata)!==null&&G!==void 0?G:void 0,P.preview=c.preview!==void 0&&c.preview!==null?a.PreviewAddress.fromPartial(c.preview):void 0,P.address=c.address!==void 0&&c.address!==null?a.SourceAddress.fromPartial(c.address):void 0,P}};function Tt(){return{collectionId:"",projectId:"",destinationId:"",metadata:void 0,enabled:void 0,address:void 0,timeout:void 0}}a.Destination={encode(c,m=h.Writer.create()){return c.collectionId!==""&&m.uint32(10).string(c.collectionId),c.projectId!==""&&m.uint32(18).string(c.projectId),c.destinationId!==""&&m.uint32(26).string(c.destinationId),c.metadata!==void 0&&_.Value.encode(_.Value.wrap(c.metadata),m.uint32(34).fork()).ldelim(),c.enabled!==void 0&&m.uint32(40).bool(c.enabled),c.address!==void 0&&a.DestinationAddress.encode(c.address,m.uint32(50).fork()).ldelim(),c.timeout!==void 0&&m.uint32(56).uint32(c.timeout),m},decode(c,m){const S=c instanceof h.Reader?c:new h.Reader(c);let G=m===void 0?S.len:S.pos+m;const P=Tt();for(;S.pos<G;){const H=S.uint32();switch(H>>>3){case 1:P.collectionId=S.string();break;case 2:P.projectId=S.string();break;case 3:P.destinationId=S.string();break;case 4:P.metadata=_.Value.unwrap(_.Value.decode(S,S.uint32()));break;case 5:P.enabled=S.bool();break;case 6:P.address=a.DestinationAddress.decode(S,S.uint32());break;case 7:P.timeout=S.uint32();break;default:S.skipType(H&7);break}}return P},fromJSON(c){return{collectionId:Z(c.collectionId)?String(c.collectionId):"",projectId:Z(c.projectId)?String(c.projectId):"",destinationId:Z(c.destinationId)?String(c.destinationId):"",metadata:Z(c==null?void 0:c.metadata)?c.metadata:void 0,enabled:Z(c.enabled)?Boolean(c.enabled):void 0,address:Z(c.address)?a.DestinationAddress.fromJSON(c.address):void 0,timeout:Z(c.timeout)?Number(c.timeout):void 0}},toJSON(c){const m={};return c.collectionId!==void 0&&(m.collectionId=c.collectionId),c.projectId!==void 0&&(m.projectId=c.projectId),c.destinationId!==void 0&&(m.destinationId=c.destinationId),c.metadata!==void 0&&(m.metadata=c.metadata),c.enabled!==void 0&&(m.enabled=c.enabled),c.address!==void 0&&(m.address=c.address?a.DestinationAddress.toJSON(c.address):void 0),c.timeout!==void 0&&(m.timeout=Math.round(c.timeout)),m},fromPartial(c){var m,S,G,P,H,he;const Ne=Tt();return Ne.collectionId=(m=c.collectionId)!==null&&m!==void 0?m:"",Ne.projectId=(S=c.projectId)!==null&&S!==void 0?S:"",Ne.destinationId=(G=c.destinationId)!==null&&G!==void 0?G:"",Ne.metadata=(P=c.metadata)!==null&&P!==void 0?P:void 0,Ne.enabled=(H=c.enabled)!==null&&H!==void 0?H:void 0,Ne.address=c.address!==void 0&&c.address!==null?a.DestinationAddress.fromPartial(c.address):void 0,Ne.timeout=(he=c.timeout)!==null&&he!==void 0?he:void 0,Ne}};function It(){return{collectionId:"",projectId:"",metadata:void 0,rendering:void 0,encoding:void 0,sources:[],destinations:[],composition:void 0,maxDuration:void 0,webrtc:void 0,triggers:[],location:void 0,guestCodes:[]}}a.Project={encode(c,m=h.Writer.create()){c.collectionId!==""&&m.uint32(10).string(c.collectionId),c.projectId!==""&&m.uint32(18).string(c.projectId),c.metadata!==void 0&&_.Value.encode(_.Value.wrap(c.metadata),m.uint32(26).fork()).ldelim(),c.rendering!==void 0&&a.Rendering.encode(c.rendering,m.uint32(34).fork()).ldelim(),c.encoding!==void 0&&a.Encoding.encode(c.encoding,m.uint32(42).fork()).ldelim();for(const S of c.sources)a.Source.encode(S,m.uint32(50).fork()).ldelim();for(const S of c.destinations)a.Destination.encode(S,m.uint32(58).fork()).ldelim();c.composition!==void 0&&a.Composition.encode(c.composition,m.uint32(66).fork()).ldelim(),c.maxDuration!==void 0&&m.uint32(72).uint32(c.maxDuration),c.webrtc!==void 0&&a.WebRtc.encode(c.webrtc,m.uint32(82).fork()).ldelim();for(const S of c.triggers)a.ProjectTrigger.encode(S,m.uint32(90).fork()).ldelim();c.location!==void 0&&a.LatLong.encode(c.location,m.uint32(98).fork()).ldelim();for(const S of c.guestCodes)a.GuestCode.encode(S,m.uint32(106).fork()).ldelim();return m},decode(c,m){const S=c instanceof h.Reader?c:new h.Reader(c);let G=m===void 0?S.len:S.pos+m;const P=It();for(;S.pos<G;){const H=S.uint32();switch(H>>>3){case 1:P.collectionId=S.string();break;case 2:P.projectId=S.string();break;case 3:P.metadata=_.Value.unwrap(_.Value.decode(S,S.uint32()));break;case 4:P.rendering=a.Rendering.decode(S,S.uint32());break;case 5:P.encoding=a.Encoding.decode(S,S.uint32());break;case 6:P.sources.push(a.Source.decode(S,S.uint32()));break;case 7:P.destinations.push(a.Destination.decode(S,S.uint32()));break;case 8:P.composition=a.Composition.decode(S,S.uint32());break;case 9:P.maxDuration=S.uint32();break;case 10:P.webrtc=a.WebRtc.decode(S,S.uint32());break;case 11:P.triggers.push(a.ProjectTrigger.decode(S,S.uint32()));break;case 12:P.location=a.LatLong.decode(S,S.uint32());break;case 13:P.guestCodes.push(a.GuestCode.decode(S,S.uint32()));break;default:S.skipType(H&7);break}}return P},fromJSON(c){return{collectionId:Z(c.collectionId)?String(c.collectionId):"",projectId:Z(c.projectId)?String(c.projectId):"",metadata:Z(c==null?void 0:c.metadata)?c.metadata:void 0,rendering:Z(c.rendering)?a.Rendering.fromJSON(c.rendering):void 0,encoding:Z(c.encoding)?a.Encoding.fromJSON(c.encoding):void 0,sources:Array.isArray(c==null?void 0:c.sources)?c.sources.map(m=>a.Source.fromJSON(m)):[],destinations:Array.isArray(c==null?void 0:c.destinations)?c.destinations.map(m=>a.Destination.fromJSON(m)):[],composition:Z(c.composition)?a.Composition.fromJSON(c.composition):void 0,maxDuration:Z(c.maxDuration)?Number(c.maxDuration):void 0,webrtc:Z(c.webrtc)?a.WebRtc.fromJSON(c.webrtc):void 0,triggers:Array.isArray(c==null?void 0:c.triggers)?c.triggers.map(m=>a.ProjectTrigger.fromJSON(m)):[],location:Z(c.location)?a.LatLong.fromJSON(c.location):void 0,guestCodes:Array.isArray(c==null?void 0:c.guestCodes)?c.guestCodes.map(m=>a.GuestCode.fromJSON(m)):[]}},toJSON(c){const m={};return c.collectionId!==void 0&&(m.collectionId=c.collectionId),c.projectId!==void 0&&(m.projectId=c.projectId),c.metadata!==void 0&&(m.metadata=c.metadata),c.rendering!==void 0&&(m.rendering=c.rendering?a.Rendering.toJSON(c.rendering):void 0),c.encoding!==void 0&&(m.encoding=c.encoding?a.Encoding.toJSON(c.encoding):void 0),c.sources?m.sources=c.sources.map(S=>S?a.Source.toJSON(S):void 0):m.sources=[],c.destinations?m.destinations=c.destinations.map(S=>S?a.Destination.toJSON(S):void 0):m.destinations=[],c.composition!==void 0&&(m.composition=c.composition?a.Composition.toJSON(c.composition):void 0),c.maxDuration!==void 0&&(m.maxDuration=Math.round(c.maxDuration)),c.webrtc!==void 0&&(m.webrtc=c.webrtc?a.WebRtc.toJSON(c.webrtc):void 0),c.triggers?m.triggers=c.triggers.map(S=>S?a.ProjectTrigger.toJSON(S):void 0):m.triggers=[],c.location!==void 0&&(m.location=c.location?a.LatLong.toJSON(c.location):void 0),c.guestCodes?m.guestCodes=c.guestCodes.map(S=>S?a.GuestCode.toJSON(S):void 0):m.guestCodes=[],m},fromPartial(c){var m,S,G,P,H,he,Ne,We;const Ge=It();return Ge.collectionId=(m=c.collectionId)!==null&&m!==void 0?m:"",Ge.projectId=(S=c.projectId)!==null&&S!==void 0?S:"",Ge.metadata=(G=c.metadata)!==null&&G!==void 0?G:void 0,Ge.rendering=c.rendering!==void 0&&c.rendering!==null?a.Rendering.fromPartial(c.rendering):void 0,Ge.encoding=c.encoding!==void 0&&c.encoding!==null?a.Encoding.fromPartial(c.encoding):void 0,Ge.sources=((P=c.sources)===null||P===void 0?void 0:P.map(qe=>a.Source.fromPartial(qe)))||[],Ge.destinations=((H=c.destinations)===null||H===void 0?void 0:H.map(qe=>a.Destination.fromPartial(qe)))||[],Ge.composition=c.composition!==void 0&&c.composition!==null?a.Composition.fromPartial(c.composition):void 0,Ge.maxDuration=(he=c.maxDuration)!==null&&he!==void 0?he:void 0,Ge.webrtc=c.webrtc!==void 0&&c.webrtc!==null?a.WebRtc.fromPartial(c.webrtc):void 0,Ge.triggers=((Ne=c.triggers)===null||Ne===void 0?void 0:Ne.map(qe=>a.ProjectTrigger.fromPartial(qe)))||[],Ge.location=c.location!==void 0&&c.location!==null?a.LatLong.fromPartial(c.location):void 0,Ge.guestCodes=((We=c.guestCodes)===null||We===void 0?void 0:We.map(qe=>a.GuestCode.fromPartial(qe)))||[],Ge}};function kt(){return{collectionId:"",metadata:void 0,projects:[],sources:[]}}a.Collection={encode(c,m=h.Writer.create()){c.collectionId!==""&&m.uint32(10).string(c.collectionId),c.metadata!==void 0&&_.Value.encode(_.Value.wrap(c.metadata),m.uint32(18).fork()).ldelim();for(const S of c.projects)a.Project.encode(S,m.uint32(26).fork()).ldelim();for(const S of c.sources)a.Source.encode(S,m.uint32(34).fork()).ldelim();return m},decode(c,m){const S=c instanceof h.Reader?c:new h.Reader(c);let G=m===void 0?S.len:S.pos+m;const P=kt();for(;S.pos<G;){const H=S.uint32();switch(H>>>3){case 1:P.collectionId=S.string();break;case 2:P.metadata=_.Value.unwrap(_.Value.decode(S,S.uint32()));break;case 3:P.projects.push(a.Project.decode(S,S.uint32()));break;case 4:P.sources.push(a.Source.decode(S,S.uint32()));break;default:S.skipType(H&7);break}}return P},fromJSON(c){return{collectionId:Z(c.collectionId)?String(c.collectionId):"",metadata:Z(c==null?void 0:c.metadata)?c.metadata:void 0,projects:Array.isArray(c==null?void 0:c.projects)?c.projects.map(m=>a.Project.fromJSON(m)):[],sources:Array.isArray(c==null?void 0:c.sources)?c.sources.map(m=>a.Source.fromJSON(m)):[]}},toJSON(c){const m={};return c.collectionId!==void 0&&(m.collectionId=c.collectionId),c.metadata!==void 0&&(m.metadata=c.metadata),c.projects?m.projects=c.projects.map(S=>S?a.Project.toJSON(S):void 0):m.projects=[],c.sources?m.sources=c.sources.map(S=>S?a.Source.toJSON(S):void 0):m.sources=[],m},fromPartial(c){var m,S,G,P;const H=kt();return H.collectionId=(m=c.collectionId)!==null&&m!==void 0?m:"",H.metadata=(S=c.metadata)!==null&&S!==void 0?S:void 0,H.projects=((G=c.projects)===null||G===void 0?void 0:G.map(he=>a.Project.fromPartial(he)))||[],H.sources=((P=c.sources)===null||P===void 0?void 0:P.map(he=>a.Source.fromPartial(he)))||[],H}};function Ot(){return{metadata:void 0}}a.CreateCollectionRequest={encode(c,m=h.Writer.create()){return c.metadata!==void 0&&_.Value.encode(_.Value.wrap(c.metadata),m.uint32(10).fork()).ldelim(),m},decode(c,m){const S=c instanceof h.Reader?c:new h.Reader(c);let G=m===void 0?S.len:S.pos+m;const P=Ot();for(;S.pos<G;){const H=S.uint32();switch(H>>>3){case 1:P.metadata=_.Value.unwrap(_.Value.decode(S,S.uint32()));break;default:S.skipType(H&7);break}}return P},fromJSON(c){return{metadata:Z(c==null?void 0:c.metadata)?c.metadata:void 0}},toJSON(c){const m={};return c.metadata!==void 0&&(m.metadata=c.metadata),m},fromPartial(c){var m;const S=Ot();return S.metadata=(m=c.metadata)!==null&&m!==void 0?m:void 0,S}};function Rt(){return{collection:void 0}}a.CreateCollectionResponse={encode(c,m=h.Writer.create()){return c.collection!==void 0&&a.Collection.encode(c.collection,m.uint32(10).fork()).ldelim(),m},decode(c,m){const S=c instanceof h.Reader?c:new h.Reader(c);let G=m===void 0?S.len:S.pos+m;const P=Rt();for(;S.pos<G;){const H=S.uint32();switch(H>>>3){case 1:P.collection=a.Collection.decode(S,S.uint32());break;default:S.skipType(H&7);break}}return P},fromJSON(c){return{collection:Z(c.collection)?a.Collection.fromJSON(c.collection):void 0}},toJSON(c){const m={};return c.collection!==void 0&&(m.collection=c.collection?a.Collection.toJSON(c.collection):void 0),m},fromPartial(c){const m=Rt();return m.collection=c.collection!==void 0&&c.collection!==null?a.Collection.fromPartial(c.collection):void 0,m}};function Pt(){return{collectionId:"",populateProjects:void 0,populateSources:void 0}}a.GetCollectionRequest={encode(c,m=h.Writer.create()){return c.collectionId!==""&&m.uint32(10).string(c.collectionId),c.populateProjects!==void 0&&m.uint32(16).bool(c.populateProjects),c.populateSources!==void 0&&m.uint32(24).bool(c.populateSources),m},decode(c,m){const S=c instanceof h.Reader?c:new h.Reader(c);let G=m===void 0?S.len:S.pos+m;const P=Pt();for(;S.pos<G;){const H=S.uint32();switch(H>>>3){case 1:P.collectionId=S.string();break;case 2:P.populateProjects=S.bool();break;case 3:P.populateSources=S.bool();break;default:S.skipType(H&7);break}}return P},fromJSON(c){return{collectionId:Z(c.collectionId)?String(c.collectionId):"",populateProjects:Z(c.populateProjects)?Boolean(c.populateProjects):void 0,populateSources:Z(c.populateSources)?Boolean(c.populateSources):void 0}},toJSON(c){const m={};return c.collectionId!==void 0&&(m.collectionId=c.collectionId),c.populateProjects!==void 0&&(m.populateProjects=c.populateProjects),c.populateSources!==void 0&&(m.populateSources=c.populateSources),m},fromPartial(c){var m,S,G;const P=Pt();return P.collectionId=(m=c.collectionId)!==null&&m!==void 0?m:"",P.populateProjects=(S=c.populateProjects)!==null&&S!==void 0?S:void 0,P.populateSources=(G=c.populateSources)!==null&&G!==void 0?G:void 0,P}};function Ct(){return{collection:void 0}}a.GetCollectionResponse={encode(c,m=h.Writer.create()){return c.collection!==void 0&&a.Collection.encode(c.collection,m.uint32(10).fork()).ldelim(),m},decode(c,m){const S=c instanceof h.Reader?c:new h.Reader(c);let G=m===void 0?S.len:S.pos+m;const P=Ct();for(;S.pos<G;){const H=S.uint32();switch(H>>>3){case 1:P.collection=a.Collection.decode(S,S.uint32());break;default:S.skipType(H&7);break}}return P},fromJSON(c){return{collection:Z(c.collection)?a.Collection.fromJSON(c.collection):void 0}},toJSON(c){const m={};return c.collection!==void 0&&(m.collection=c.collection?a.Collection.toJSON(c.collection):void 0),m},fromPartial(c){const m=Ct();return m.collection=c.collection!==void 0&&c.collection!==null?a.Collection.fromPartial(c.collection):void 0,m}};function wt(){return{collectionId:"",updateMask:void 0,metadata:void 0}}a.UpdateCollectionRequest={encode(c,m=h.Writer.create()){return c.collectionId!==""&&m.uint32(10).string(c.collectionId),c.updateMask!==void 0&&E.FieldMask.encode(E.FieldMask.wrap(c.updateMask),m.uint32(18).fork()).ldelim(),c.metadata!==void 0&&_.Value.encode(_.Value.wrap(c.metadata),m.uint32(26).fork()).ldelim(),m},decode(c,m){const S=c instanceof h.Reader?c:new h.Reader(c);let G=m===void 0?S.len:S.pos+m;const P=wt();for(;S.pos<G;){const H=S.uint32();switch(H>>>3){case 1:P.collectionId=S.string();break;case 2:P.updateMask=E.FieldMask.unwrap(E.FieldMask.decode(S,S.uint32()));break;case 3:P.metadata=_.Value.unwrap(_.Value.decode(S,S.uint32()));break;default:S.skipType(H&7);break}}return P},fromJSON(c){return{collectionId:Z(c.collectionId)?String(c.collectionId):"",updateMask:Z(c.updateMask)?E.FieldMask.unwrap(E.FieldMask.fromJSON(c.updateMask)):void 0,metadata:Z(c==null?void 0:c.metadata)?c.metadata:void 0}},toJSON(c){const m={};return c.collectionId!==void 0&&(m.collectionId=c.collectionId),c.updateMask!==void 0&&(m.updateMask=E.FieldMask.toJSON(E.FieldMask.wrap(c.updateMask))),c.metadata!==void 0&&(m.metadata=c.metadata),m},fromPartial(c){var m,S,G;const P=wt();return P.collectionId=(m=c.collectionId)!==null&&m!==void 0?m:"",P.updateMask=(S=c.updateMask)!==null&&S!==void 0?S:void 0,P.metadata=(G=c.metadata)!==null&&G!==void 0?G:void 0,P}};function Nt(){return{collection:void 0}}a.UpdateCollectionResponse={encode(c,m=h.Writer.create()){return c.collection!==void 0&&a.Collection.encode(c.collection,m.uint32(10).fork()).ldelim(),m},decode(c,m){const S=c instanceof h.Reader?c:new h.Reader(c);let G=m===void 0?S.len:S.pos+m;const P=Nt();for(;S.pos<G;){const H=S.uint32();switch(H>>>3){case 1:P.collection=a.Collection.decode(S,S.uint32());break;default:S.skipType(H&7);break}}return P},fromJSON(c){return{collection:Z(c.collection)?a.Collection.fromJSON(c.collection):void 0}},toJSON(c){const m={};return c.collection!==void 0&&(m.collection=c.collection?a.Collection.toJSON(c.collection):void 0),m},fromPartial(c){const m=Nt();return m.collection=c.collection!==void 0&&c.collection!==null?a.Collection.fromPartial(c.collection):void 0,m}};function At(){return{collectionId:"",force:void 0}}a.DeleteCollectionRequest={encode(c,m=h.Writer.create()){return c.collectionId!==""&&m.uint32(10).string(c.collectionId),c.force!==void 0&&m.uint32(16).bool(c.force),m},decode(c,m){const S=c instanceof h.Reader?c:new h.Reader(c);let G=m===void 0?S.len:S.pos+m;const P=At();for(;S.pos<G;){const H=S.uint32();switch(H>>>3){case 1:P.collectionId=S.string();break;case 2:P.force=S.bool();break;default:S.skipType(H&7);break}}return P},fromJSON(c){return{collectionId:Z(c.collectionId)?String(c.collectionId):"",force:Z(c.force)?Boolean(c.force):void 0}},toJSON(c){const m={};return c.collectionId!==void 0&&(m.collectionId=c.collectionId),c.force!==void 0&&(m.force=c.force),m},fromPartial(c){var m,S;const G=At();return G.collectionId=(m=c.collectionId)!==null&&m!==void 0?m:"",G.force=(S=c.force)!==null&&S!==void 0?S:void 0,G}};function $t(){return{sourcesDeleted:0,projectsDeleted:0,projectIdsStopped:[]}}a.DeleteCollectionResponse={encode(c,m=h.Writer.create()){c.sourcesDeleted!==0&&m.uint32(8).uint32(c.sourcesDeleted),c.projectsDeleted!==0&&m.uint32(16).uint32(c.projectsDeleted);for(const S of c.projectIdsStopped)m.uint32(26).string(S);return m},decode(c,m){const S=c instanceof h.Reader?c:new h.Reader(c);let G=m===void 0?S.len:S.pos+m;const P=$t();for(;S.pos<G;){const H=S.uint32();switch(H>>>3){case 1:P.sourcesDeleted=S.uint32();break;case 2:P.projectsDeleted=S.uint32();break;case 3:P.projectIdsStopped.push(S.string());break;default:S.skipType(H&7);break}}return P},fromJSON(c){return{sourcesDeleted:Z(c.sourcesDeleted)?Number(c.sourcesDeleted):0,projectsDeleted:Z(c.projectsDeleted)?Number(c.projectsDeleted):0,projectIdsStopped:Array.isArray(c==null?void 0:c.projectIdsStopped)?c.projectIdsStopped.map(m=>String(m)):[]}},toJSON(c){const m={};return c.sourcesDeleted!==void 0&&(m.sourcesDeleted=Math.round(c.sourcesDeleted)),c.projectsDeleted!==void 0&&(m.projectsDeleted=Math.round(c.projectsDeleted)),c.projectIdsStopped?m.projectIdsStopped=c.projectIdsStopped.map(S=>S):m.projectIdsStopped=[],m},fromPartial(c){var m,S,G;const P=$t();return P.sourcesDeleted=(m=c.sourcesDeleted)!==null&&m!==void 0?m:0,P.projectsDeleted=(S=c.projectsDeleted)!==null&&S!==void 0?S:0,P.projectIdsStopped=((G=c.projectIdsStopped)===null||G===void 0?void 0:G.map(H=>H))||[],P}};function Lt(){return{}}a.GetCollectionsRequest={encode(c,m=h.Writer.create()){return m},decode(c,m){const S=c instanceof h.Reader?c:new h.Reader(c);let G=m===void 0?S.len:S.pos+m;const P=Lt();for(;S.pos<G;){const H=S.uint32();switch(H>>>3){default:S.skipType(H&7);break}}return P},fromJSON(c){return{}},toJSON(c){return{}},fromPartial(c){return Lt()}};function Dt(){return{collections:[]}}a.GetCollectionsResponse={encode(c,m=h.Writer.create()){for(const S of c.collections)a.Collection.encode(S,m.uint32(10).fork()).ldelim();return m},decode(c,m){const S=c instanceof h.Reader?c:new h.Reader(c);let G=m===void 0?S.len:S.pos+m;const P=Dt();for(;S.pos<G;){const H=S.uint32();switch(H>>>3){case 1:P.collections.push(a.Collection.decode(S,S.uint32()));break;default:S.skipType(H&7);break}}return P},fromJSON(c){return{collections:Array.isArray(c==null?void 0:c.collections)?c.collections.map(m=>a.Collection.fromJSON(m)):[]}},toJSON(c){const m={};return c.collections?m.collections=c.collections.map(S=>S?a.Collection.toJSON(S):void 0):m.collections=[],m},fromPartial(c){var m;const S=Dt();return S.collections=((m=c.collections)===null||m===void 0?void 0:m.map(G=>a.Collection.fromPartial(G)))||[],S}};function Mt(){return{collectionId:"",metadata:void 0,rendering:void 0,encoding:void 0,composition:void 0,maxDuration:void 0,webrtc:void 0,location:void 0}}a.CreateProjectRequest={encode(c,m=h.Writer.create()){return c.collectionId!==""&&m.uint32(10).string(c.collectionId),c.metadata!==void 0&&_.Value.encode(_.Value.wrap(c.metadata),m.uint32(18).fork()).ldelim(),c.rendering!==void 0&&a.Rendering.encode(c.rendering,m.uint32(26).fork()).ldelim(),c.encoding!==void 0&&a.Encoding.encode(c.encoding,m.uint32(34).fork()).ldelim(),c.composition!==void 0&&a.Composition.encode(c.composition,m.uint32(42).fork()).ldelim(),c.maxDuration!==void 0&&m.uint32(48).uint32(c.maxDuration),c.webrtc!==void 0&&a.WebRtc.encode(c.webrtc,m.uint32(58).fork()).ldelim(),c.location!==void 0&&a.LatLong.encode(c.location,m.uint32(74).fork()).ldelim(),m},decode(c,m){const S=c instanceof h.Reader?c:new h.Reader(c);let G=m===void 0?S.len:S.pos+m;const P=Mt();for(;S.pos<G;){const H=S.uint32();switch(H>>>3){case 1:P.collectionId=S.string();break;case 2:P.metadata=_.Value.unwrap(_.Value.decode(S,S.uint32()));break;case 3:P.rendering=a.Rendering.decode(S,S.uint32());break;case 4:P.encoding=a.Encoding.decode(S,S.uint32());break;case 5:P.composition=a.Composition.decode(S,S.uint32());break;case 6:P.maxDuration=S.uint32();break;case 7:P.webrtc=a.WebRtc.decode(S,S.uint32());break;case 9:P.location=a.LatLong.decode(S,S.uint32());break;default:S.skipType(H&7);break}}return P},fromJSON(c){return{collectionId:Z(c.collectionId)?String(c.collectionId):"",metadata:Z(c==null?void 0:c.metadata)?c.metadata:void 0,rendering:Z(c.rendering)?a.Rendering.fromJSON(c.rendering):void 0,encoding:Z(c.encoding)?a.Encoding.fromJSON(c.encoding):void 0,composition:Z(c.composition)?a.Composition.fromJSON(c.composition):void 0,maxDuration:Z(c.maxDuration)?Number(c.maxDuration):void 0,webrtc:Z(c.webrtc)?a.WebRtc.fromJSON(c.webrtc):void 0,location:Z(c.location)?a.LatLong.fromJSON(c.location):void 0}},toJSON(c){const m={};return c.collectionId!==void 0&&(m.collectionId=c.collectionId),c.metadata!==void 0&&(m.metadata=c.metadata),c.rendering!==void 0&&(m.rendering=c.rendering?a.Rendering.toJSON(c.rendering):void 0),c.encoding!==void 0&&(m.encoding=c.encoding?a.Encoding.toJSON(c.encoding):void 0),c.composition!==void 0&&(m.composition=c.composition?a.Composition.toJSON(c.composition):void 0),c.maxDuration!==void 0&&(m.maxDuration=Math.round(c.maxDuration)),c.webrtc!==void 0&&(m.webrtc=c.webrtc?a.WebRtc.toJSON(c.webrtc):void 0),c.location!==void 0&&(m.location=c.location?a.LatLong.toJSON(c.location):void 0),m},fromPartial(c){var m,S,G;const P=Mt();return P.collectionId=(m=c.collectionId)!==null&&m!==void 0?m:"",P.metadata=(S=c.metadata)!==null&&S!==void 0?S:void 0,P.rendering=c.rendering!==void 0&&c.rendering!==null?a.Rendering.fromPartial(c.rendering):void 0,P.encoding=c.encoding!==void 0&&c.encoding!==null?a.Encoding.fromPartial(c.encoding):void 0,P.composition=c.composition!==void 0&&c.composition!==null?a.Composition.fromPartial(c.composition):void 0,P.maxDuration=(G=c.maxDuration)!==null&&G!==void 0?G:void 0,P.webrtc=c.webrtc!==void 0&&c.webrtc!==null?a.WebRtc.fromPartial(c.webrtc):void 0,P.location=c.location!==void 0&&c.location!==null?a.LatLong.fromPartial(c.location):void 0,P}};function Ut(){return{project:void 0}}a.CreateProjectResponse={encode(c,m=h.Writer.create()){return c.project!==void 0&&a.Project.encode(c.project,m.uint32(10).fork()).ldelim(),m},decode(c,m){const S=c instanceof h.Reader?c:new h.Reader(c);let G=m===void 0?S.len:S.pos+m;const P=Ut();for(;S.pos<G;){const H=S.uint32();switch(H>>>3){case 1:P.project=a.Project.decode(S,S.uint32());break;default:S.skipType(H&7);break}}return P},fromJSON(c){return{project:Z(c.project)?a.Project.fromJSON(c.project):void 0}},toJSON(c){const m={};return c.project!==void 0&&(m.project=c.project?a.Project.toJSON(c.project):void 0),m},fromPartial(c){const m=Ut();return m.project=c.project!==void 0&&c.project!==null?a.Project.fromPartial(c.project):void 0,m}};function Bt(){return{collectionId:"",projectId:"",updateMask:void 0,metadata:void 0,rendering:void 0,encoding:void 0,composition:void 0,maxDuration:void 0,webrtc:void 0,location:void 0}}a.UpdateProjectRequest={encode(c,m=h.Writer.create()){return c.collectionId!==""&&m.uint32(10).string(c.collectionId),c.projectId!==""&&m.uint32(18).string(c.projectId),c.updateMask!==void 0&&E.FieldMask.encode(E.FieldMask.wrap(c.updateMask),m.uint32(26).fork()).ldelim(),c.metadata!==void 0&&_.Value.encode(_.Value.wrap(c.metadata),m.uint32(34).fork()).ldelim(),c.rendering!==void 0&&a.Rendering.encode(c.rendering,m.uint32(42).fork()).ldelim(),c.encoding!==void 0&&a.Encoding.encode(c.encoding,m.uint32(50).fork()).ldelim(),c.composition!==void 0&&a.Composition.encode(c.composition,m.uint32(58).fork()).ldelim(),c.maxDuration!==void 0&&m.uint32(64).uint32(c.maxDuration),c.webrtc!==void 0&&a.WebRtc.encode(c.webrtc,m.uint32(74).fork()).ldelim(),c.location!==void 0&&a.LatLong.encode(c.location,m.uint32(82).fork()).ldelim(),m},decode(c,m){const S=c instanceof h.Reader?c:new h.Reader(c);let G=m===void 0?S.len:S.pos+m;const P=Bt();for(;S.pos<G;){const H=S.uint32();switch(H>>>3){case 1:P.collectionId=S.string();break;case 2:P.projectId=S.string();break;case 3:P.updateMask=E.FieldMask.unwrap(E.FieldMask.decode(S,S.uint32()));break;case 4:P.metadata=_.Value.unwrap(_.Value.decode(S,S.uint32()));break;case 5:P.rendering=a.Rendering.decode(S,S.uint32());break;case 6:P.encoding=a.Encoding.decode(S,S.uint32());break;case 7:P.composition=a.Composition.decode(S,S.uint32());break;case 8:P.maxDuration=S.uint32();break;case 9:P.webrtc=a.WebRtc.decode(S,S.uint32());break;case 10:P.location=a.LatLong.decode(S,S.uint32());break;default:S.skipType(H&7);break}}return P},fromJSON(c){return{collectionId:Z(c.collectionId)?String(c.collectionId):"",projectId:Z(c.projectId)?String(c.projectId):"",updateMask:Z(c.updateMask)?E.FieldMask.unwrap(E.FieldMask.fromJSON(c.updateMask)):void 0,metadata:Z(c==null?void 0:c.metadata)?c.metadata:void 0,rendering:Z(c.rendering)?a.Rendering.fromJSON(c.rendering):void 0,encoding:Z(c.encoding)?a.Encoding.fromJSON(c.encoding):void 0,composition:Z(c.composition)?a.Composition.fromJSON(c.composition):void 0,maxDuration:Z(c.maxDuration)?Number(c.maxDuration):void 0,webrtc:Z(c.webrtc)?a.WebRtc.fromJSON(c.webrtc):void 0,location:Z(c.location)?a.LatLong.fromJSON(c.location):void 0}},toJSON(c){const m={};return c.collectionId!==void 0&&(m.collectionId=c.collectionId),c.projectId!==void 0&&(m.projectId=c.projectId),c.updateMask!==void 0&&(m.updateMask=E.FieldMask.toJSON(E.FieldMask.wrap(c.updateMask))),c.metadata!==void 0&&(m.metadata=c.metadata),c.rendering!==void 0&&(m.rendering=c.rendering?a.Rendering.toJSON(c.rendering):void 0),c.encoding!==void 0&&(m.encoding=c.encoding?a.Encoding.toJSON(c.encoding):void 0),c.composition!==void 0&&(m.composition=c.composition?a.Composition.toJSON(c.composition):void 0),c.maxDuration!==void 0&&(m.maxDuration=Math.round(c.maxDuration)),c.webrtc!==void 0&&(m.webrtc=c.webrtc?a.WebRtc.toJSON(c.webrtc):void 0),c.location!==void 0&&(m.location=c.location?a.LatLong.toJSON(c.location):void 0),m},fromPartial(c){var m,S,G,P,H;const he=Bt();return he.collectionId=(m=c.collectionId)!==null&&m!==void 0?m:"",he.projectId=(S=c.projectId)!==null&&S!==void 0?S:"",he.updateMask=(G=c.updateMask)!==null&&G!==void 0?G:void 0,he.metadata=(P=c.metadata)!==null&&P!==void 0?P:void 0,he.rendering=c.rendering!==void 0&&c.rendering!==null?a.Rendering.fromPartial(c.rendering):void 0,he.encoding=c.encoding!==void 0&&c.encoding!==null?a.Encoding.fromPartial(c.encoding):void 0,he.composition=c.composition!==void 0&&c.composition!==null?a.Composition.fromPartial(c.composition):void 0,he.maxDuration=(H=c.maxDuration)!==null&&H!==void 0?H:void 0,he.webrtc=c.webrtc!==void 0&&c.webrtc!==null?a.WebRtc.fromPartial(c.webrtc):void 0,he.location=c.location!==void 0&&c.location!==null?a.LatLong.fromPartial(c.location):void 0,he}};function Vt(){return{project:void 0,broadcastUpdated:!1}}a.UpdateProjectResponse={encode(c,m=h.Writer.create()){return c.project!==void 0&&a.Project.encode(c.project,m.uint32(10).fork()).ldelim(),c.broadcastUpdated===!0&&m.uint32(16).bool(c.broadcastUpdated),m},decode(c,m){const S=c instanceof h.Reader?c:new h.Reader(c);let G=m===void 0?S.len:S.pos+m;const P=Vt();for(;S.pos<G;){const H=S.uint32();switch(H>>>3){case 1:P.project=a.Project.decode(S,S.uint32());break;case 2:P.broadcastUpdated=S.bool();break;default:S.skipType(H&7);break}}return P},fromJSON(c){return{project:Z(c.project)?a.Project.fromJSON(c.project):void 0,broadcastUpdated:Z(c.broadcastUpdated)?Boolean(c.broadcastUpdated):!1}},toJSON(c){const m={};return c.project!==void 0&&(m.project=c.project?a.Project.toJSON(c.project):void 0),c.broadcastUpdated!==void 0&&(m.broadcastUpdated=c.broadcastUpdated),m},fromPartial(c){var m;const S=Vt();return S.project=c.project!==void 0&&c.project!==null?a.Project.fromPartial(c.project):void 0,S.broadcastUpdated=(m=c.broadcastUpdated)!==null&&m!==void 0?m:!1,S}};function Ft(){return{collectionId:"",projectId:"",force:void 0}}a.DeleteProjectRequest={encode(c,m=h.Writer.create()){return c.collectionId!==""&&m.uint32(10).string(c.collectionId),c.projectId!==""&&m.uint32(18).string(c.projectId),c.force!==void 0&&m.uint32(24).bool(c.force),m},decode(c,m){const S=c instanceof h.Reader?c:new h.Reader(c);let G=m===void 0?S.len:S.pos+m;const P=Ft();for(;S.pos<G;){const H=S.uint32();switch(H>>>3){case 1:P.collectionId=S.string();break;case 2:P.projectId=S.string();break;case 3:P.force=S.bool();break;default:S.skipType(H&7);break}}return P},fromJSON(c){return{collectionId:Z(c.collectionId)?String(c.collectionId):"",projectId:Z(c.projectId)?String(c.projectId):"",force:Z(c.force)?Boolean(c.force):void 0}},toJSON(c){const m={};return c.collectionId!==void 0&&(m.collectionId=c.collectionId),c.projectId!==void 0&&(m.projectId=c.projectId),c.force!==void 0&&(m.force=c.force),m},fromPartial(c){var m,S,G;const P=Ft();return P.collectionId=(m=c.collectionId)!==null&&m!==void 0?m:"",P.projectId=(S=c.projectId)!==null&&S!==void 0?S:"",P.force=(G=c.force)!==null&&G!==void 0?G:void 0,P}};function Jt(){return{broadcastStopped:!1,layoutsDeleted:0}}a.DeleteProjectResponse={encode(c,m=h.Writer.create()){return c.broadcastStopped===!0&&m.uint32(8).bool(c.broadcastStopped),c.layoutsDeleted!==0&&m.uint32(16).uint32(c.layoutsDeleted),m},decode(c,m){const S=c instanceof h.Reader?c:new h.Reader(c);let G=m===void 0?S.len:S.pos+m;const P=Jt();for(;S.pos<G;){const H=S.uint32();switch(H>>>3){case 1:P.broadcastStopped=S.bool();break;case 2:P.layoutsDeleted=S.uint32();break;default:S.skipType(H&7);break}}return P},fromJSON(c){return{broadcastStopped:Z(c.broadcastStopped)?Boolean(c.broadcastStopped):!1,layoutsDeleted:Z(c.layoutsDeleted)?Number(c.layoutsDeleted):0}},toJSON(c){const m={};return c.broadcastStopped!==void 0&&(m.broadcastStopped=c.broadcastStopped),c.layoutsDeleted!==void 0&&(m.layoutsDeleted=Math.round(c.layoutsDeleted)),m},fromPartial(c){var m,S;const G=Jt();return G.broadcastStopped=(m=c.broadcastStopped)!==null&&m!==void 0?m:!1,G.layoutsDeleted=(S=c.layoutsDeleted)!==null&&S!==void 0?S:0,G}};function Gt(){return{collectionId:"",projectId:"",webrtcStart:void 0}}a.StartProjectBroadcastRequest={encode(c,m=h.Writer.create()){return c.collectionId!==""&&m.uint32(10).string(c.collectionId),c.projectId!==""&&m.uint32(18).string(c.projectId),c.webrtcStart!==void 0&&m.uint32(24).bool(c.webrtcStart),m},decode(c,m){const S=c instanceof h.Reader?c:new h.Reader(c);let G=m===void 0?S.len:S.pos+m;const P=Gt();for(;S.pos<G;){const H=S.uint32();switch(H>>>3){case 1:P.collectionId=S.string();break;case 2:P.projectId=S.string();break;case 3:P.webrtcStart=S.bool();break;default:S.skipType(H&7);break}}return P},fromJSON(c){return{collectionId:Z(c.collectionId)?String(c.collectionId):"",projectId:Z(c.projectId)?String(c.projectId):"",webrtcStart:Z(c.webrtcStart)?Boolean(c.webrtcStart):void 0}},toJSON(c){const m={};return c.collectionId!==void 0&&(m.collectionId=c.collectionId),c.projectId!==void 0&&(m.projectId=c.projectId),c.webrtcStart!==void 0&&(m.webrtcStart=c.webrtcStart),m},fromPartial(c){var m,S,G;const P=Gt();return P.collectionId=(m=c.collectionId)!==null&&m!==void 0?m:"",P.projectId=(S=c.projectId)!==null&&S!==void 0?S:"",P.webrtcStart=(G=c.webrtcStart)!==null&&G!==void 0?G:void 0,P}};function qt(){return{broadcastId:""}}a.StartProjectBroadcastResponse={encode(c,m=h.Writer.create()){return c.broadcastId!==""&&m.uint32(10).string(c.broadcastId),m},decode(c,m){const S=c instanceof h.Reader?c:new h.Reader(c);let G=m===void 0?S.len:S.pos+m;const P=qt();for(;S.pos<G;){const H=S.uint32();switch(H>>>3){case 1:P.broadcastId=S.string();break;default:S.skipType(H&7);break}}return P},fromJSON(c){return{broadcastId:Z(c.broadcastId)?String(c.broadcastId):""}},toJSON(c){const m={};return c.broadcastId!==void 0&&(m.broadcastId=c.broadcastId),m},fromPartial(c){var m;const S=qt();return S.broadcastId=(m=c.broadcastId)!==null&&m!==void 0?m:"",S}};function Wt(){return{collectionId:"",projectId:"",webrtcStop:void 0}}a.StopProjectBroadcastRequest={encode(c,m=h.Writer.create()){return c.collectionId!==""&&m.uint32(10).string(c.collectionId),c.projectId!==""&&m.uint32(18).string(c.projectId),c.webrtcStop!==void 0&&m.uint32(24).bool(c.webrtcStop),m},decode(c,m){const S=c instanceof h.Reader?c:new h.Reader(c);let G=m===void 0?S.len:S.pos+m;const P=Wt();for(;S.pos<G;){const H=S.uint32();switch(H>>>3){case 1:P.collectionId=S.string();break;case 2:P.projectId=S.string();break;case 3:P.webrtcStop=S.bool();break;default:S.skipType(H&7);break}}return P},fromJSON(c){return{collectionId:Z(c.collectionId)?String(c.collectionId):"",projectId:Z(c.projectId)?String(c.projectId):"",webrtcStop:Z(c.webrtcStop)?Boolean(c.webrtcStop):void 0}},toJSON(c){const m={};return c.collectionId!==void 0&&(m.collectionId=c.collectionId),c.projectId!==void 0&&(m.projectId=c.projectId),c.webrtcStop!==void 0&&(m.webrtcStop=c.webrtcStop),m},fromPartial(c){var m,S,G;const P=Wt();return P.collectionId=(m=c.collectionId)!==null&&m!==void 0?m:"",P.projectId=(S=c.projectId)!==null&&S!==void 0?S:"",P.webrtcStop=(G=c.webrtcStop)!==null&&G!==void 0?G:void 0,P}};function Ht(){return{}}a.StopProjectBroadcastResponse={encode(c,m=h.Writer.create()){return m},decode(c,m){const S=c instanceof h.Reader?c:new h.Reader(c);let G=m===void 0?S.len:S.pos+m;const P=Ht();for(;S.pos<G;){const H=S.uint32();switch(H>>>3){default:S.skipType(H&7);break}}return P},fromJSON(c){return{}},toJSON(c){return{}},fromPartial(c){return Ht()}};function Yt(){return{collectionId:"",projectId:"",status:void 0}}a.GetProjectRequest={encode(c,m=h.Writer.create()){return c.collectionId!==""&&m.uint32(10).string(c.collectionId),c.projectId!==""&&m.uint32(18).string(c.projectId),c.status!==void 0&&m.uint32(24).bool(c.status),m},decode(c,m){const S=c instanceof h.Reader?c:new h.Reader(c);let G=m===void 0?S.len:S.pos+m;const P=Yt();for(;S.pos<G;){const H=S.uint32();switch(H>>>3){case 1:P.collectionId=S.string();break;case 2:P.projectId=S.string();break;case 3:P.status=S.bool();break;default:S.skipType(H&7);break}}return P},fromJSON(c){return{collectionId:Z(c.collectionId)?String(c.collectionId):"",projectId:Z(c.projectId)?String(c.projectId):"",status:Z(c.status)?Boolean(c.status):void 0}},toJSON(c){const m={};return c.collectionId!==void 0&&(m.collectionId=c.collectionId),c.projectId!==void 0&&(m.projectId=c.projectId),c.status!==void 0&&(m.status=c.status),m},fromPartial(c){var m,S,G;const P=Yt();return P.collectionId=(m=c.collectionId)!==null&&m!==void 0?m:"",P.projectId=(S=c.projectId)!==null&&S!==void 0?S:"",P.status=(G=c.status)!==null&&G!==void 0?G:void 0,P}};function zt(){return{project:void 0,status:void 0}}a.GetProjectResponse={encode(c,m=h.Writer.create()){return c.project!==void 0&&a.Project.encode(c.project,m.uint32(10).fork()).ldelim(),c.status!==void 0&&a.ProjectBroadcastStatus.encode(c.status,m.uint32(18).fork()).ldelim(),m},decode(c,m){const S=c instanceof h.Reader?c:new h.Reader(c);let G=m===void 0?S.len:S.pos+m;const P=zt();for(;S.pos<G;){const H=S.uint32();switch(H>>>3){case 1:P.project=a.Project.decode(S,S.uint32());break;case 2:P.status=a.ProjectBroadcastStatus.decode(S,S.uint32());break;default:S.skipType(H&7);break}}return P},fromJSON(c){return{project:Z(c.project)?a.Project.fromJSON(c.project):void 0,status:Z(c.status)?a.ProjectBroadcastStatus.fromJSON(c.status):void 0}},toJSON(c){const m={};return c.project!==void 0&&(m.project=c.project?a.Project.toJSON(c.project):void 0),c.status!==void 0&&(m.status=c.status?a.ProjectBroadcastStatus.toJSON(c.status):void 0),m},fromPartial(c){const m=zt();return m.project=c.project!==void 0&&c.project!==null?a.Project.fromPartial(c.project):void 0,m.status=c.status!==void 0&&c.status!==null?a.ProjectBroadcastStatus.fromPartial(c.status):void 0,m}};function xt(){return{collectionId:"",projectId:"",format:void 0}}a.GetProjectBroadcastSnapshotRequest={encode(c,m=h.Writer.create()){return c.collectionId!==""&&m.uint32(10).string(c.collectionId),c.projectId!==""&&m.uint32(18).string(c.projectId),c.format!==void 0&&m.uint32(24).int32(C(c.format)),m},decode(c,m){const S=c instanceof h.Reader?c:new h.Reader(c);let G=m===void 0?S.len:S.pos+m;const P=xt();for(;S.pos<G;){const H=S.uint32();switch(H>>>3){case 1:P.collectionId=S.string();break;case 2:P.projectId=S.string();break;case 3:P.format=N(S.int32());break;default:S.skipType(H&7);break}}return P},fromJSON(c){return{collectionId:Z(c.collectionId)?String(c.collectionId):"",projectId:Z(c.projectId)?String(c.projectId):"",format:Z(c.format)?N(c.format):void 0}},toJSON(c){const m={};return c.collectionId!==void 0&&(m.collectionId=c.collectionId),c.projectId!==void 0&&(m.projectId=c.projectId),c.format!==void 0&&(m.format=c.format!==void 0?w(c.format):void 0),m},fromPartial(c){var m,S,G;const P=xt();return P.collectionId=(m=c.collectionId)!==null&&m!==void 0?m:"",P.projectId=(S=c.projectId)!==null&&S!==void 0?S:"",P.format=(G=c.format)!==null&&G!==void 0?G:void 0,P}};function jt(){return{format:I.IMAGE_FORMAT_UNSPECIFIED,image:new Uint8Array}}a.GetProjectBroadcastSnapshotResponse={encode(c,m=h.Writer.create()){return c.format!==I.IMAGE_FORMAT_UNSPECIFIED&&m.uint32(8).int32(C(c.format)),c.image.length!==0&&m.uint32(18).bytes(c.image),m},decode(c,m){const S=c instanceof h.Reader?c:new h.Reader(c);let G=m===void 0?S.len:S.pos+m;const P=jt();for(;S.pos<G;){const H=S.uint32();switch(H>>>3){case 1:P.format=N(S.int32());break;case 2:P.image=S.bytes();break;default:S.skipType(H&7);break}}return P},fromJSON(c){return{format:Z(c.format)?N(c.format):I.IMAGE_FORMAT_UNSPECIFIED,image:Z(c.image)?kr(c.image):new Uint8Array}},toJSON(c){const m={};return c.format!==void 0&&(m.format=w(c.format)),c.image!==void 0&&(m.image=Rr(c.image!==void 0?c.image:new Uint8Array)),m},fromPartial(c){var m,S;const G=jt();return G.format=(m=c.format)!==null&&m!==void 0?m:I.IMAGE_FORMAT_UNSPECIFIED,G.image=(S=c.image)!==null&&S!==void 0?S:new Uint8Array,G}};function Kt(){return{collectionId:"",projectId:""}}a.GetProjectBroadcastStatusRequest={encode(c,m=h.Writer.create()){return c.collectionId!==""&&m.uint32(10).string(c.collectionId),c.projectId!==""&&m.uint32(18).string(c.projectId),m},decode(c,m){const S=c instanceof h.Reader?c:new h.Reader(c);let G=m===void 0?S.len:S.pos+m;const P=Kt();for(;S.pos<G;){const H=S.uint32();switch(H>>>3){case 1:P.collectionId=S.string();break;case 2:P.projectId=S.string();break;default:S.skipType(H&7);break}}return P},fromJSON(c){return{collectionId:Z(c.collectionId)?String(c.collectionId):"",projectId:Z(c.projectId)?String(c.projectId):""}},toJSON(c){const m={};return c.collectionId!==void 0&&(m.collectionId=c.collectionId),c.projectId!==void 0&&(m.projectId=c.projectId),m},fromPartial(c){var m,S;const G=Kt();return G.collectionId=(m=c.collectionId)!==null&&m!==void 0?m:"",G.projectId=(S=c.projectId)!==null&&S!==void 0?S:"",G}};function Qt(){return{status:void 0}}a.GetProjectBroadcastStatusResponse={encode(c,m=h.Writer.create()){return c.status!==void 0&&a.ProjectBroadcastStatus.encode(c.status,m.uint32(10).fork()).ldelim(),m},decode(c,m){const S=c instanceof h.Reader?c:new h.Reader(c);let G=m===void 0?S.len:S.pos+m;const P=Qt();for(;S.pos<G;){const H=S.uint32();switch(H>>>3){case 1:P.status=a.ProjectBroadcastStatus.decode(S,S.uint32());break;default:S.skipType(H&7);break}}return P},fromJSON(c){return{status:Z(c.status)?a.ProjectBroadcastStatus.fromJSON(c.status):void 0}},toJSON(c){const m={};return c.status!==void 0&&(m.status=c.status?a.ProjectBroadcastStatus.toJSON(c.status):void 0),m},fromPartial(c){const m=Qt();return m.status=c.status!==void 0&&c.status!==null?a.ProjectBroadcastStatus.fromPartial(c.status):void 0,m}};function Zt(){return{collectionId:"",projectId:""}}a.StartProjectWebRtcRequest={encode(c,m=h.Writer.create()){return c.collectionId!==""&&m.uint32(10).string(c.collectionId),c.projectId!==""&&m.uint32(18).string(c.projectId),m},decode(c,m){const S=c instanceof h.Reader?c:new h.Reader(c);let G=m===void 0?S.len:S.pos+m;const P=Zt();for(;S.pos<G;){const H=S.uint32();switch(H>>>3){case 1:P.collectionId=S.string();break;case 2:P.projectId=S.string();break;default:S.skipType(H&7);break}}return P},fromJSON(c){return{collectionId:Z(c.collectionId)?String(c.collectionId):"",projectId:Z(c.projectId)?String(c.projectId):""}},toJSON(c){const m={};return c.collectionId!==void 0&&(m.collectionId=c.collectionId),c.projectId!==void 0&&(m.projectId=c.projectId),m},fromPartial(c){var m,S;const G=Zt();return G.collectionId=(m=c.collectionId)!==null&&m!==void 0?m:"",G.projectId=(S=c.projectId)!==null&&S!==void 0?S:"",G}};function Xt(){return{}}a.StartProjectWebRtcResponse={encode(c,m=h.Writer.create()){return m},decode(c,m){const S=c instanceof h.Reader?c:new h.Reader(c);let G=m===void 0?S.len:S.pos+m;const P=Xt();for(;S.pos<G;){const H=S.uint32();switch(H>>>3){default:S.skipType(H&7);break}}return P},fromJSON(c){return{}},toJSON(c){return{}},fromPartial(c){return Xt()}};function en(){return{collectionId:"",projectId:""}}a.StopProjectWebRtcRequest={encode(c,m=h.Writer.create()){return c.collectionId!==""&&m.uint32(10).string(c.collectionId),c.projectId!==""&&m.uint32(18).string(c.projectId),m},decode(c,m){const S=c instanceof h.Reader?c:new h.Reader(c);let G=m===void 0?S.len:S.pos+m;const P=en();for(;S.pos<G;){const H=S.uint32();switch(H>>>3){case 1:P.collectionId=S.string();break;case 2:P.projectId=S.string();break;default:S.skipType(H&7);break}}return P},fromJSON(c){return{collectionId:Z(c.collectionId)?String(c.collectionId):"",projectId:Z(c.projectId)?String(c.projectId):""}},toJSON(c){const m={};return c.collectionId!==void 0&&(m.collectionId=c.collectionId),c.projectId!==void 0&&(m.projectId=c.projectId),m},fromPartial(c){var m,S;const G=en();return G.collectionId=(m=c.collectionId)!==null&&m!==void 0?m:"",G.projectId=(S=c.projectId)!==null&&S!==void 0?S:"",G}};function tn(){return{}}a.StopProjectWebRtcResponse={encode(c,m=h.Writer.create()){return m},decode(c,m){const S=c instanceof h.Reader?c:new h.Reader(c);let G=m===void 0?S.len:S.pos+m;const P=tn();for(;S.pos<G;){const H=S.uint32();switch(H>>>3){default:S.skipType(H&7);break}}return P},fromJSON(c){return{}},toJSON(c){return{}},fromPartial(c){return tn()}};function nn(){return{collectionId:"",projectId:"",metadata:void 0,address:void 0,enabled:void 0,timeout:void 0}}a.CreateDestinationRequest={encode(c,m=h.Writer.create()){return c.collectionId!==""&&m.uint32(10).string(c.collectionId),c.projectId!==""&&m.uint32(18).string(c.projectId),c.metadata!==void 0&&_.Value.encode(_.Value.wrap(c.metadata),m.uint32(26).fork()).ldelim(),c.address!==void 0&&a.DestinationAddress.encode(c.address,m.uint32(42).fork()).ldelim(),c.enabled!==void 0&&m.uint32(48).bool(c.enabled),c.timeout!==void 0&&m.uint32(56).uint32(c.timeout),m},decode(c,m){const S=c instanceof h.Reader?c:new h.Reader(c);let G=m===void 0?S.len:S.pos+m;const P=nn();for(;S.pos<G;){const H=S.uint32();switch(H>>>3){case 1:P.collectionId=S.string();break;case 2:P.projectId=S.string();break;case 3:P.metadata=_.Value.unwrap(_.Value.decode(S,S.uint32()));break;case 5:P.address=a.DestinationAddress.decode(S,S.uint32());break;case 6:P.enabled=S.bool();break;case 7:P.timeout=S.uint32();break;default:S.skipType(H&7);break}}return P},fromJSON(c){return{collectionId:Z(c.collectionId)?String(c.collectionId):"",projectId:Z(c.projectId)?String(c.projectId):"",metadata:Z(c==null?void 0:c.metadata)?c.metadata:void 0,address:Z(c.address)?a.DestinationAddress.fromJSON(c.address):void 0,enabled:Z(c.enabled)?Boolean(c.enabled):void 0,timeout:Z(c.timeout)?Number(c.timeout):void 0}},toJSON(c){const m={};return c.collectionId!==void 0&&(m.collectionId=c.collectionId),c.projectId!==void 0&&(m.projectId=c.projectId),c.metadata!==void 0&&(m.metadata=c.metadata),c.address!==void 0&&(m.address=c.address?a.DestinationAddress.toJSON(c.address):void 0),c.enabled!==void 0&&(m.enabled=c.enabled),c.timeout!==void 0&&(m.timeout=Math.round(c.timeout)),m},fromPartial(c){var m,S,G,P,H;const he=nn();return he.collectionId=(m=c.collectionId)!==null&&m!==void 0?m:"",he.projectId=(S=c.projectId)!==null&&S!==void 0?S:"",he.metadata=(G=c.metadata)!==null&&G!==void 0?G:void 0,he.address=c.address!==void 0&&c.address!==null?a.DestinationAddress.fromPartial(c.address):void 0,he.enabled=(P=c.enabled)!==null&&P!==void 0?P:void 0,he.timeout=(H=c.timeout)!==null&&H!==void 0?H:void 0,he}};function rn(){return{destination:void 0}}a.CreateDestinationResponse={encode(c,m=h.Writer.create()){return c.destination!==void 0&&a.Destination.encode(c.destination,m.uint32(10).fork()).ldelim(),m},decode(c,m){const S=c instanceof h.Reader?c:new h.Reader(c);let G=m===void 0?S.len:S.pos+m;const P=rn();for(;S.pos<G;){const H=S.uint32();switch(H>>>3){case 1:P.destination=a.Destination.decode(S,S.uint32());break;default:S.skipType(H&7);break}}return P},fromJSON(c){return{destination:Z(c.destination)?a.Destination.fromJSON(c.destination):void 0}},toJSON(c){const m={};return c.destination!==void 0&&(m.destination=c.destination?a.Destination.toJSON(c.destination):void 0),m},fromPartial(c){const m=rn();return m.destination=c.destination!==void 0&&c.destination!==null?a.Destination.fromPartial(c.destination):void 0,m}};function an(){return{collectionId:"",projectId:"",destinationId:""}}a.GetDestinationRequest={encode(c,m=h.Writer.create()){return c.collectionId!==""&&m.uint32(10).string(c.collectionId),c.projectId!==""&&m.uint32(18).string(c.projectId),c.destinationId!==""&&m.uint32(26).string(c.destinationId),m},decode(c,m){const S=c instanceof h.Reader?c:new h.Reader(c);let G=m===void 0?S.len:S.pos+m;const P=an();for(;S.pos<G;){const H=S.uint32();switch(H>>>3){case 1:P.collectionId=S.string();break;case 2:P.projectId=S.string();break;case 3:P.destinationId=S.string();break;default:S.skipType(H&7);break}}return P},fromJSON(c){return{collectionId:Z(c.collectionId)?String(c.collectionId):"",projectId:Z(c.projectId)?String(c.projectId):"",destinationId:Z(c.destinationId)?String(c.destinationId):""}},toJSON(c){const m={};return c.collectionId!==void 0&&(m.collectionId=c.collectionId),c.projectId!==void 0&&(m.projectId=c.projectId),c.destinationId!==void 0&&(m.destinationId=c.destinationId),m},fromPartial(c){var m,S,G;const P=an();return P.collectionId=(m=c.collectionId)!==null&&m!==void 0?m:"",P.projectId=(S=c.projectId)!==null&&S!==void 0?S:"",P.destinationId=(G=c.destinationId)!==null&&G!==void 0?G:"",P}};function sn(){return{destination:void 0}}a.GetDestinationResponse={encode(c,m=h.Writer.create()){return c.destination!==void 0&&a.Destination.encode(c.destination,m.uint32(10).fork()).ldelim(),m},decode(c,m){const S=c instanceof h.Reader?c:new h.Reader(c);let G=m===void 0?S.len:S.pos+m;const P=sn();for(;S.pos<G;){const H=S.uint32();switch(H>>>3){case 1:P.destination=a.Destination.decode(S,S.uint32());break;default:S.skipType(H&7);break}}return P},fromJSON(c){return{destination:Z(c.destination)?a.Destination.fromJSON(c.destination):void 0}},toJSON(c){const m={};return c.destination!==void 0&&(m.destination=c.destination?a.Destination.toJSON(c.destination):void 0),m},fromPartial(c){const m=sn();return m.destination=c.destination!==void 0&&c.destination!==null?a.Destination.fromPartial(c.destination):void 0,m}};function un(){return{collectionId:"",projectId:"",destinationId:"",force:void 0}}a.DeleteDestinationRequest={encode(c,m=h.Writer.create()){return c.collectionId!==""&&m.uint32(10).string(c.collectionId),c.projectId!==""&&m.uint32(18).string(c.projectId),c.destinationId!==""&&m.uint32(26).string(c.destinationId),c.force!==void 0&&m.uint32(32).bool(c.force),m},decode(c,m){const S=c instanceof h.Reader?c:new h.Reader(c);let G=m===void 0?S.len:S.pos+m;const P=un();for(;S.pos<G;){const H=S.uint32();switch(H>>>3){case 1:P.collectionId=S.string();break;case 2:P.projectId=S.string();break;case 3:P.destinationId=S.string();break;case 4:P.force=S.bool();break;default:S.skipType(H&7);break}}return P},fromJSON(c){return{collectionId:Z(c.collectionId)?String(c.collectionId):"",projectId:Z(c.projectId)?String(c.projectId):"",destinationId:Z(c.destinationId)?String(c.destinationId):"",force:Z(c.force)?Boolean(c.force):void 0}},toJSON(c){const m={};return c.collectionId!==void 0&&(m.collectionId=c.collectionId),c.projectId!==void 0&&(m.projectId=c.projectId),c.destinationId!==void 0&&(m.destinationId=c.destinationId),c.force!==void 0&&(m.force=c.force),m},fromPartial(c){var m,S,G,P;const H=un();return H.collectionId=(m=c.collectionId)!==null&&m!==void 0?m:"",H.projectId=(S=c.projectId)!==null&&S!==void 0?S:"",H.destinationId=(G=c.destinationId)!==null&&G!==void 0?G:"",H.force=(P=c.force)!==null&&P!==void 0?P:void 0,H}};function dn(){return{broadcastUpdated:!1}}a.DeleteDestinationResponse={encode(c,m=h.Writer.create()){return c.broadcastUpdated===!0&&m.uint32(8).bool(c.broadcastUpdated),m},decode(c,m){const S=c instanceof h.Reader?c:new h.Reader(c);let G=m===void 0?S.len:S.pos+m;const P=dn();for(;S.pos<G;){const H=S.uint32();switch(H>>>3){case 1:P.broadcastUpdated=S.bool();break;default:S.skipType(H&7);break}}return P},fromJSON(c){return{broadcastUpdated:Z(c.broadcastUpdated)?Boolean(c.broadcastUpdated):!1}},toJSON(c){const m={};return c.broadcastUpdated!==void 0&&(m.broadcastUpdated=c.broadcastUpdated),m},fromPartial(c){var m;const S=dn();return S.broadcastUpdated=(m=c.broadcastUpdated)!==null&&m!==void 0?m:!1,S}};function cn(){return{collectionId:"",projectId:"",destinationId:"",updateMask:void 0,metadata:void 0,address:void 0,enabled:void 0,timeout:void 0}}a.UpdateDestinationRequest={encode(c,m=h.Writer.create()){return c.collectionId!==""&&m.uint32(10).string(c.collectionId),c.projectId!==""&&m.uint32(18).string(c.projectId),c.destinationId!==""&&m.uint32(26).string(c.destinationId),c.updateMask!==void 0&&E.FieldMask.encode(E.FieldMask.wrap(c.updateMask),m.uint32(34).fork()).ldelim(),c.metadata!==void 0&&_.Value.encode(_.Value.wrap(c.metadata),m.uint32(42).fork()).ldelim(),c.address!==void 0&&a.DestinationAddress.encode(c.address,m.uint32(50).fork()).ldelim(),c.enabled!==void 0&&m.uint32(56).bool(c.enabled),c.timeout!==void 0&&m.uint32(64).uint32(c.timeout),m},decode(c,m){const S=c instanceof h.Reader?c:new h.Reader(c);let G=m===void 0?S.len:S.pos+m;const P=cn();for(;S.pos<G;){const H=S.uint32();switch(H>>>3){case 1:P.collectionId=S.string();break;case 2:P.projectId=S.string();break;case 3:P.destinationId=S.string();break;case 4:P.updateMask=E.FieldMask.unwrap(E.FieldMask.decode(S,S.uint32()));break;case 5:P.metadata=_.Value.unwrap(_.Value.decode(S,S.uint32()));break;case 6:P.address=a.DestinationAddress.decode(S,S.uint32());break;case 7:P.enabled=S.bool();break;case 8:P.timeout=S.uint32();break;default:S.skipType(H&7);break}}return P},fromJSON(c){return{collectionId:Z(c.collectionId)?String(c.collectionId):"",projectId:Z(c.projectId)?String(c.projectId):"",destinationId:Z(c.destinationId)?String(c.destinationId):"",updateMask:Z(c.updateMask)?E.FieldMask.unwrap(E.FieldMask.fromJSON(c.updateMask)):void 0,metadata:Z(c==null?void 0:c.metadata)?c.metadata:void 0,address:Z(c.address)?a.DestinationAddress.fromJSON(c.address):void 0,enabled:Z(c.enabled)?Boolean(c.enabled):void 0,timeout:Z(c.timeout)?Number(c.timeout):void 0}},toJSON(c){const m={};return c.collectionId!==void 0&&(m.collectionId=c.collectionId),c.projectId!==void 0&&(m.projectId=c.projectId),c.destinationId!==void 0&&(m.destinationId=c.destinationId),c.updateMask!==void 0&&(m.updateMask=E.FieldMask.toJSON(E.FieldMask.wrap(c.updateMask))),c.metadata!==void 0&&(m.metadata=c.metadata),c.address!==void 0&&(m.address=c.address?a.DestinationAddress.toJSON(c.address):void 0),c.enabled!==void 0&&(m.enabled=c.enabled),c.timeout!==void 0&&(m.timeout=Math.round(c.timeout)),m},fromPartial(c){var m,S,G,P,H,he,Ne;const We=cn();return We.collectionId=(m=c.collectionId)!==null&&m!==void 0?m:"",We.projectId=(S=c.projectId)!==null&&S!==void 0?S:"",We.destinationId=(G=c.destinationId)!==null&&G!==void 0?G:"",We.updateMask=(P=c.updateMask)!==null&&P!==void 0?P:void 0,We.metadata=(H=c.metadata)!==null&&H!==void 0?H:void 0,We.address=c.address!==void 0&&c.address!==null?a.DestinationAddress.fromPartial(c.address):void 0,We.enabled=(he=c.enabled)!==null&&he!==void 0?he:void 0,We.timeout=(Ne=c.timeout)!==null&&Ne!==void 0?Ne:void 0,We}};function ln(){return{destination:void 0,broadcastUpdated:!1}}a.UpdateDestinationResponse={encode(c,m=h.Writer.create()){return c.destination!==void 0&&a.Destination.encode(c.destination,m.uint32(10).fork()).ldelim(),c.broadcastUpdated===!0&&m.uint32(16).bool(c.broadcastUpdated),m},decode(c,m){const S=c instanceof h.Reader?c:new h.Reader(c);let G=m===void 0?S.len:S.pos+m;const P=ln();for(;S.pos<G;){const H=S.uint32();switch(H>>>3){case 1:P.destination=a.Destination.decode(S,S.uint32());break;case 2:P.broadcastUpdated=S.bool();break;default:S.skipType(H&7);break}}return P},fromJSON(c){return{destination:Z(c.destination)?a.Destination.fromJSON(c.destination):void 0,broadcastUpdated:Z(c.broadcastUpdated)?Boolean(c.broadcastUpdated):!1}},toJSON(c){const m={};return c.destination!==void 0&&(m.destination=c.destination?a.Destination.toJSON(c.destination):void 0),c.broadcastUpdated!==void 0&&(m.broadcastUpdated=c.broadcastUpdated),m},fromPartial(c){var m;const S=ln();return S.destination=c.destination!==void 0&&c.destination!==null?a.Destination.fromPartial(c.destination):void 0,S.broadcastUpdated=(m=c.broadcastUpdated)!==null&&m!==void 0?m:!1,S}};function fn(){return{collectionId:"",metadata:void 0,address:void 0,preview:void 0}}a.CreateSourceRequest={encode(c,m=h.Writer.create()){return c.collectionId!==""&&m.uint32(10).string(c.collectionId),c.metadata!==void 0&&_.Value.encode(_.Value.wrap(c.metadata),m.uint32(18).fork()).ldelim(),c.address!==void 0&&a.SourceAddress.encode(c.address,m.uint32(26).fork()).ldelim(),c.preview!==void 0&&a.PreviewAddress.encode(c.preview,m.uint32(34).fork()).ldelim(),m},decode(c,m){const S=c instanceof h.Reader?c:new h.Reader(c);let G=m===void 0?S.len:S.pos+m;const P=fn();for(;S.pos<G;){const H=S.uint32();switch(H>>>3){case 1:P.collectionId=S.string();break;case 2:P.metadata=_.Value.unwrap(_.Value.decode(S,S.uint32()));break;case 3:P.address=a.SourceAddress.decode(S,S.uint32());break;case 4:P.preview=a.PreviewAddress.decode(S,S.uint32());break;default:S.skipType(H&7);break}}return P},fromJSON(c){return{collectionId:Z(c.collectionId)?String(c.collectionId):"",metadata:Z(c==null?void 0:c.metadata)?c.metadata:void 0,address:Z(c.address)?a.SourceAddress.fromJSON(c.address):void 0,preview:Z(c.preview)?a.PreviewAddress.fromJSON(c.preview):void 0}},toJSON(c){const m={};return c.collectionId!==void 0&&(m.collectionId=c.collectionId),c.metadata!==void 0&&(m.metadata=c.metadata),c.address!==void 0&&(m.address=c.address?a.SourceAddress.toJSON(c.address):void 0),c.preview!==void 0&&(m.preview=c.preview?a.PreviewAddress.toJSON(c.preview):void 0),m},fromPartial(c){var m,S;const G=fn();return G.collectionId=(m=c.collectionId)!==null&&m!==void 0?m:"",G.metadata=(S=c.metadata)!==null&&S!==void 0?S:void 0,G.address=c.address!==void 0&&c.address!==null?a.SourceAddress.fromPartial(c.address):void 0,G.preview=c.preview!==void 0&&c.preview!==null?a.PreviewAddress.fromPartial(c.preview):void 0,G}};function pn(){return{source:void 0}}a.CreateSourceResponse={encode(c,m=h.Writer.create()){return c.source!==void 0&&a.Source.encode(c.source,m.uint32(10).fork()).ldelim(),m},decode(c,m){const S=c instanceof h.Reader?c:new h.Reader(c);let G=m===void 0?S.len:S.pos+m;const P=pn();for(;S.pos<G;){const H=S.uint32();switch(H>>>3){case 1:P.source=a.Source.decode(S,S.uint32());break;default:S.skipType(H&7);break}}return P},fromJSON(c){return{source:Z(c.source)?a.Source.fromJSON(c.source):void 0}},toJSON(c){const m={};return c.source!==void 0&&(m.source=c.source?a.Source.toJSON(c.source):void 0),m},fromPartial(c){const m=pn();return m.source=c.source!==void 0&&c.source!==null?a.Source.fromPartial(c.source):void 0,m}};function hn(){return{collectionId:"",sourceId:"",force:void 0}}a.DeleteSourceRequest={encode(c,m=h.Writer.create()){return c.collectionId!==""&&m.uint32(10).string(c.collectionId),c.sourceId!==""&&m.uint32(18).string(c.sourceId),c.force!==void 0&&m.uint32(24).bool(c.force),m},decode(c,m){const S=c instanceof h.Reader?c:new h.Reader(c);let G=m===void 0?S.len:S.pos+m;const P=hn();for(;S.pos<G;){const H=S.uint32();switch(H>>>3){case 1:P.collectionId=S.string();break;case 2:P.sourceId=S.string();break;case 3:P.force=S.bool();break;default:S.skipType(H&7);break}}return P},fromJSON(c){return{collectionId:Z(c.collectionId)?String(c.collectionId):"",sourceId:Z(c.sourceId)?String(c.sourceId):"",force:Z(c.force)?Boolean(c.force):void 0}},toJSON(c){const m={};return c.collectionId!==void 0&&(m.collectionId=c.collectionId),c.sourceId!==void 0&&(m.sourceId=c.sourceId),c.force!==void 0&&(m.force=c.force),m},fromPartial(c){var m,S,G;const P=hn();return P.collectionId=(m=c.collectionId)!==null&&m!==void 0?m:"",P.sourceId=(S=c.sourceId)!==null&&S!==void 0?S:"",P.force=(G=c.force)!==null&&G!==void 0?G:void 0,P}};function mn(){return{projectIdsUpdated:[]}}a.DeleteSourceResponse={encode(c,m=h.Writer.create()){for(const S of c.projectIdsUpdated)m.uint32(26).string(S);return m},decode(c,m){const S=c instanceof h.Reader?c:new h.Reader(c);let G=m===void 0?S.len:S.pos+m;const P=mn();for(;S.pos<G;){const H=S.uint32();switch(H>>>3){case 3:P.projectIdsUpdated.push(S.string());break;default:S.skipType(H&7);break}}return P},fromJSON(c){return{projectIdsUpdated:Array.isArray(c==null?void 0:c.projectIdsUpdated)?c.projectIdsUpdated.map(m=>String(m)):[]}},toJSON(c){const m={};return c.projectIdsUpdated?m.projectIdsUpdated=c.projectIdsUpdated.map(S=>S):m.projectIdsUpdated=[],m},fromPartial(c){var m;const S=mn();return S.projectIdsUpdated=((m=c.projectIdsUpdated)===null||m===void 0?void 0:m.map(G=>G))||[],S}};function vn(){return{collectionId:"",projectId:"",sourceId:"",trigger:void 0}}a.AddSourceToProjectRequest={encode(c,m=h.Writer.create()){return c.collectionId!==""&&m.uint32(10).string(c.collectionId),c.projectId!==""&&m.uint32(18).string(c.projectId),c.sourceId!==""&&m.uint32(26).string(c.sourceId),c.trigger!==void 0&&a.SourceTrigger.encode(c.trigger,m.uint32(34).fork()).ldelim(),m},decode(c,m){const S=c instanceof h.Reader?c:new h.Reader(c);let G=m===void 0?S.len:S.pos+m;const P=vn();for(;S.pos<G;){const H=S.uint32();switch(H>>>3){case 1:P.collectionId=S.string();break;case 2:P.projectId=S.string();break;case 3:P.sourceId=S.string();break;case 4:P.trigger=a.SourceTrigger.decode(S,S.uint32());break;default:S.skipType(H&7);break}}return P},fromJSON(c){return{collectionId:Z(c.collectionId)?String(c.collectionId):"",projectId:Z(c.projectId)?String(c.projectId):"",sourceId:Z(c.sourceId)?String(c.sourceId):"",trigger:Z(c.trigger)?a.SourceTrigger.fromJSON(c.trigger):void 0}},toJSON(c){const m={};return c.collectionId!==void 0&&(m.collectionId=c.collectionId),c.projectId!==void 0&&(m.projectId=c.projectId),c.sourceId!==void 0&&(m.sourceId=c.sourceId),c.trigger!==void 0&&(m.trigger=c.trigger?a.SourceTrigger.toJSON(c.trigger):void 0),m},fromPartial(c){var m,S,G;const P=vn();return P.collectionId=(m=c.collectionId)!==null&&m!==void 0?m:"",P.projectId=(S=c.projectId)!==null&&S!==void 0?S:"",P.sourceId=(G=c.sourceId)!==null&&G!==void 0?G:"",P.trigger=c.trigger!==void 0&&c.trigger!==null?a.SourceTrigger.fromPartial(c.trigger):void 0,P}};function Sn(){return{project:void 0,broadcastUpdated:!1}}a.AddSourceToProjectResponse={encode(c,m=h.Writer.create()){return c.project!==void 0&&a.Project.encode(c.project,m.uint32(10).fork()).ldelim(),c.broadcastUpdated===!0&&m.uint32(16).bool(c.broadcastUpdated),m},decode(c,m){const S=c instanceof h.Reader?c:new h.Reader(c);let G=m===void 0?S.len:S.pos+m;const P=Sn();for(;S.pos<G;){const H=S.uint32();switch(H>>>3){case 1:P.project=a.Project.decode(S,S.uint32());break;case 2:P.broadcastUpdated=S.bool();break;default:S.skipType(H&7);break}}return P},fromJSON(c){return{project:Z(c.project)?a.Project.fromJSON(c.project):void 0,broadcastUpdated:Z(c.broadcastUpdated)?Boolean(c.broadcastUpdated):!1}},toJSON(c){const m={};return c.project!==void 0&&(m.project=c.project?a.Project.toJSON(c.project):void 0),c.broadcastUpdated!==void 0&&(m.broadcastUpdated=c.broadcastUpdated),m},fromPartial(c){var m;const S=Sn();return S.project=c.project!==void 0&&c.project!==null?a.Project.fromPartial(c.project):void 0,S.broadcastUpdated=(m=c.broadcastUpdated)!==null&&m!==void 0?m:!1,S}};function yn(){return{collectionId:"",projectId:"",sourceId:"",updateMask:void 0,trigger:void 0}}a.UpdateSourceInProjectRequest={encode(c,m=h.Writer.create()){return c.collectionId!==""&&m.uint32(10).string(c.collectionId),c.projectId!==""&&m.uint32(18).string(c.projectId),c.sourceId!==""&&m.uint32(26).string(c.sourceId),c.updateMask!==void 0&&E.FieldMask.encode(E.FieldMask.wrap(c.updateMask),m.uint32(34).fork()).ldelim(),c.trigger!==void 0&&a.SourceTrigger.encode(c.trigger,m.uint32(42).fork()).ldelim(),m},decode(c,m){const S=c instanceof h.Reader?c:new h.Reader(c);let G=m===void 0?S.len:S.pos+m;const P=yn();for(;S.pos<G;){const H=S.uint32();switch(H>>>3){case 1:P.collectionId=S.string();break;case 2:P.projectId=S.string();break;case 3:P.sourceId=S.string();break;case 4:P.updateMask=E.FieldMask.unwrap(E.FieldMask.decode(S,S.uint32()));break;case 5:P.trigger=a.SourceTrigger.decode(S,S.uint32());break;default:S.skipType(H&7);break}}return P},fromJSON(c){return{collectionId:Z(c.collectionId)?String(c.collectionId):"",projectId:Z(c.projectId)?String(c.projectId):"",sourceId:Z(c.sourceId)?String(c.sourceId):"",updateMask:Z(c.updateMask)?E.FieldMask.unwrap(E.FieldMask.fromJSON(c.updateMask)):void 0,trigger:Z(c.trigger)?a.SourceTrigger.fromJSON(c.trigger):void 0}},toJSON(c){const m={};return c.collectionId!==void 0&&(m.collectionId=c.collectionId),c.projectId!==void 0&&(m.projectId=c.projectId),c.sourceId!==void 0&&(m.sourceId=c.sourceId),c.updateMask!==void 0&&(m.updateMask=E.FieldMask.toJSON(E.FieldMask.wrap(c.updateMask))),c.trigger!==void 0&&(m.trigger=c.trigger?a.SourceTrigger.toJSON(c.trigger):void 0),m},fromPartial(c){var m,S,G,P;const H=yn();return H.collectionId=(m=c.collectionId)!==null&&m!==void 0?m:"",H.projectId=(S=c.projectId)!==null&&S!==void 0?S:"",H.sourceId=(G=c.sourceId)!==null&&G!==void 0?G:"",H.updateMask=(P=c.updateMask)!==null&&P!==void 0?P:void 0,H.trigger=c.trigger!==void 0&&c.trigger!==null?a.SourceTrigger.fromPartial(c.trigger):void 0,H}};function bn(){return{project:void 0}}a.UpdateSourceInProjectResponse={encode(c,m=h.Writer.create()){return c.project!==void 0&&a.Project.encode(c.project,m.uint32(10).fork()).ldelim(),m},decode(c,m){const S=c instanceof h.Reader?c:new h.Reader(c);let G=m===void 0?S.len:S.pos+m;const P=bn();for(;S.pos<G;){const H=S.uint32();switch(H>>>3){case 1:P.project=a.Project.decode(S,S.uint32());break;default:S.skipType(H&7);break}}return P},fromJSON(c){return{project:Z(c.project)?a.Project.fromJSON(c.project):void 0}},toJSON(c){const m={};return c.project!==void 0&&(m.project=c.project?a.Project.toJSON(c.project):void 0),m},fromPartial(c){const m=bn();return m.project=c.project!==void 0&&c.project!==null?a.Project.fromPartial(c.project):void 0,m}};function gn(){return{collectionId:"",sourceId:""}}a.GetSourceRequest={encode(c,m=h.Writer.create()){return c.collectionId!==""&&m.uint32(10).string(c.collectionId),c.sourceId!==""&&m.uint32(26).string(c.sourceId),m},decode(c,m){const S=c instanceof h.Reader?c:new h.Reader(c);let G=m===void 0?S.len:S.pos+m;const P=gn();for(;S.pos<G;){const H=S.uint32();switch(H>>>3){case 1:P.collectionId=S.string();break;case 3:P.sourceId=S.string();break;default:S.skipType(H&7);break}}return P},fromJSON(c){return{collectionId:Z(c.collectionId)?String(c.collectionId):"",sourceId:Z(c.sourceId)?String(c.sourceId):""}},toJSON(c){const m={};return c.collectionId!==void 0&&(m.collectionId=c.collectionId),c.sourceId!==void 0&&(m.sourceId=c.sourceId),m},fromPartial(c){var m,S;const G=gn();return G.collectionId=(m=c.collectionId)!==null&&m!==void 0?m:"",G.sourceId=(S=c.sourceId)!==null&&S!==void 0?S:"",G}};function _n(){return{source:void 0}}a.GetSourceResponse={encode(c,m=h.Writer.create()){return c.source!==void 0&&a.Source.encode(c.source,m.uint32(10).fork()).ldelim(),m},decode(c,m){const S=c instanceof h.Reader?c:new h.Reader(c);let G=m===void 0?S.len:S.pos+m;const P=_n();for(;S.pos<G;){const H=S.uint32();switch(H>>>3){case 1:P.source=a.Source.decode(S,S.uint32());break;default:S.skipType(H&7);break}}return P},fromJSON(c){return{source:Z(c.source)?a.Source.fromJSON(c.source):void 0}},toJSON(c){const m={};return c.source!==void 0&&(m.source=c.source?a.Source.toJSON(c.source):void 0),m},fromPartial(c){const m=_n();return m.source=c.source!==void 0&&c.source!==null?a.Source.fromPartial(c.source):void 0,m}};function En(){return{collectionId:""}}a.GetSourcesRequest={encode(c,m=h.Writer.create()){return c.collectionId!==""&&m.uint32(10).string(c.collectionId),m},decode(c,m){const S=c instanceof h.Reader?c:new h.Reader(c);let G=m===void 0?S.len:S.pos+m;const P=En();for(;S.pos<G;){const H=S.uint32();switch(H>>>3){case 1:P.collectionId=S.string();break;default:S.skipType(H&7);break}}return P},fromJSON(c){return{collectionId:Z(c.collectionId)?String(c.collectionId):""}},toJSON(c){const m={};return c.collectionId!==void 0&&(m.collectionId=c.collectionId),m},fromPartial(c){var m;const S=En();return S.collectionId=(m=c.collectionId)!==null&&m!==void 0?m:"",S}};function Tn(){return{sources:[]}}a.GetSourcesResponse={encode(c,m=h.Writer.create()){for(const S of c.sources)a.Source.encode(S,m.uint32(10).fork()).ldelim();return m},decode(c,m){const S=c instanceof h.Reader?c:new h.Reader(c);let G=m===void 0?S.len:S.pos+m;const P=Tn();for(;S.pos<G;){const H=S.uint32();switch(H>>>3){case 1:P.sources.push(a.Source.decode(S,S.uint32()));break;default:S.skipType(H&7);break}}return P},fromJSON(c){return{sources:Array.isArray(c==null?void 0:c.sources)?c.sources.map(m=>a.Source.fromJSON(m)):[]}},toJSON(c){const m={};return c.sources?m.sources=c.sources.map(S=>S?a.Source.toJSON(S):void 0):m.sources=[],m},fromPartial(c){var m;const S=Tn();return S.sources=((m=c.sources)===null||m===void 0?void 0:m.map(G=>a.Source.fromPartial(G)))||[],S}};function In(){return{collectionId:"",sourceId:"",updateMask:void 0,metadata:void 0,address:void 0,preview:void 0}}a.UpdateSourceRequest={encode(c,m=h.Writer.create()){return c.collectionId!==""&&m.uint32(10).string(c.collectionId),c.sourceId!==""&&m.uint32(26).string(c.sourceId),c.updateMask!==void 0&&E.FieldMask.encode(E.FieldMask.wrap(c.updateMask),m.uint32(34).fork()).ldelim(),c.metadata!==void 0&&_.Value.encode(_.Value.wrap(c.metadata),m.uint32(42).fork()).ldelim(),c.address!==void 0&&a.SourceAddress.encode(c.address,m.uint32(50).fork()).ldelim(),c.preview!==void 0&&a.PreviewAddress.encode(c.preview,m.uint32(58).fork()).ldelim(),m},decode(c,m){const S=c instanceof h.Reader?c:new h.Reader(c);let G=m===void 0?S.len:S.pos+m;const P=In();for(;S.pos<G;){const H=S.uint32();switch(H>>>3){case 1:P.collectionId=S.string();break;case 3:P.sourceId=S.string();break;case 4:P.updateMask=E.FieldMask.unwrap(E.FieldMask.decode(S,S.uint32()));break;case 5:P.metadata=_.Value.unwrap(_.Value.decode(S,S.uint32()));break;case 6:P.address=a.SourceAddress.decode(S,S.uint32());break;case 7:P.preview=a.PreviewAddress.decode(S,S.uint32());break;default:S.skipType(H&7);break}}return P},fromJSON(c){return{collectionId:Z(c.collectionId)?String(c.collectionId):"",sourceId:Z(c.sourceId)?String(c.sourceId):"",updateMask:Z(c.updateMask)?E.FieldMask.unwrap(E.FieldMask.fromJSON(c.updateMask)):void 0,metadata:Z(c==null?void 0:c.metadata)?c.metadata:void 0,address:Z(c.address)?a.SourceAddress.fromJSON(c.address):void 0,preview:Z(c.preview)?a.PreviewAddress.fromJSON(c.preview):void 0}},toJSON(c){const m={};return c.collectionId!==void 0&&(m.collectionId=c.collectionId),c.sourceId!==void 0&&(m.sourceId=c.sourceId),c.updateMask!==void 0&&(m.updateMask=E.FieldMask.toJSON(E.FieldMask.wrap(c.updateMask))),c.metadata!==void 0&&(m.metadata=c.metadata),c.address!==void 0&&(m.address=c.address?a.SourceAddress.toJSON(c.address):void 0),c.preview!==void 0&&(m.preview=c.preview?a.PreviewAddress.toJSON(c.preview):void 0),m},fromPartial(c){var m,S,G,P;const H=In();return H.collectionId=(m=c.collectionId)!==null&&m!==void 0?m:"",H.sourceId=(S=c.sourceId)!==null&&S!==void 0?S:"",H.updateMask=(G=c.updateMask)!==null&&G!==void 0?G:void 0,H.metadata=(P=c.metadata)!==null&&P!==void 0?P:void 0,H.address=c.address!==void 0&&c.address!==null?a.SourceAddress.fromPartial(c.address):void 0,H.preview=c.preview!==void 0&&c.preview!==null?a.PreviewAddress.fromPartial(c.preview):void 0,H}};function kn(){return{source:void 0,broadcastUpdated:!1}}a.UpdateSourceResponse={encode(c,m=h.Writer.create()){return c.source!==void 0&&a.Source.encode(c.source,m.uint32(10).fork()).ldelim(),c.broadcastUpdated===!0&&m.uint32(16).bool(c.broadcastUpdated),m},decode(c,m){const S=c instanceof h.Reader?c:new h.Reader(c);let G=m===void 0?S.len:S.pos+m;const P=kn();for(;S.pos<G;){const H=S.uint32();switch(H>>>3){case 1:P.source=a.Source.decode(S,S.uint32());break;case 2:P.broadcastUpdated=S.bool();break;default:S.skipType(H&7);break}}return P},fromJSON(c){return{source:Z(c.source)?a.Source.fromJSON(c.source):void 0,broadcastUpdated:Z(c.broadcastUpdated)?Boolean(c.broadcastUpdated):!1}},toJSON(c){const m={};return c.source!==void 0&&(m.source=c.source?a.Source.toJSON(c.source):void 0),c.broadcastUpdated!==void 0&&(m.broadcastUpdated=c.broadcastUpdated),m},fromPartial(c){var m;const S=kn();return S.source=c.source!==void 0&&c.source!==null?a.Source.fromPartial(c.source):void 0,S.broadcastUpdated=(m=c.broadcastUpdated)!==null&&m!==void 0?m:!1,S}};function On(){return{collectionId:"",projectId:"",sourceId:"",force:void 0}}a.RemoveSourceFromProjectRequest={encode(c,m=h.Writer.create()){return c.collectionId!==""&&m.uint32(10).string(c.collectionId),c.projectId!==""&&m.uint32(18).string(c.projectId),c.sourceId!==""&&m.uint32(26).string(c.sourceId),c.force!==void 0&&m.uint32(32).bool(c.force),m},decode(c,m){const S=c instanceof h.Reader?c:new h.Reader(c);let G=m===void 0?S.len:S.pos+m;const P=On();for(;S.pos<G;){const H=S.uint32();switch(H>>>3){case 1:P.collectionId=S.string();break;case 2:P.projectId=S.string();break;case 3:P.sourceId=S.string();break;case 4:P.force=S.bool();break;default:S.skipType(H&7);break}}return P},fromJSON(c){return{collectionId:Z(c.collectionId)?String(c.collectionId):"",projectId:Z(c.projectId)?String(c.projectId):"",sourceId:Z(c.sourceId)?String(c.sourceId):"",force:Z(c.force)?Boolean(c.force):void 0}},toJSON(c){const m={};return c.collectionId!==void 0&&(m.collectionId=c.collectionId),c.projectId!==void 0&&(m.projectId=c.projectId),c.sourceId!==void 0&&(m.sourceId=c.sourceId),c.force!==void 0&&(m.force=c.force),m},fromPartial(c){var m,S,G,P;const H=On();return H.collectionId=(m=c.collectionId)!==null&&m!==void 0?m:"",H.projectId=(S=c.projectId)!==null&&S!==void 0?S:"",H.sourceId=(G=c.sourceId)!==null&&G!==void 0?G:"",H.force=(P=c.force)!==null&&P!==void 0?P:void 0,H}};function Rn(){return{project:void 0,broadcastUpdated:!1}}a.RemoveSourceFromProjectResponse={encode(c,m=h.Writer.create()){return c.project!==void 0&&a.Project.encode(c.project,m.uint32(10).fork()).ldelim(),c.broadcastUpdated===!0&&m.uint32(16).bool(c.broadcastUpdated),m},decode(c,m){const S=c instanceof h.Reader?c:new h.Reader(c);let G=m===void 0?S.len:S.pos+m;const P=Rn();for(;S.pos<G;){const H=S.uint32();switch(H>>>3){case 1:P.project=a.Project.decode(S,S.uint32());break;case 2:P.broadcastUpdated=S.bool();break;default:S.skipType(H&7);break}}return P},fromJSON(c){return{project:Z(c.project)?a.Project.fromJSON(c.project):void 0,broadcastUpdated:Z(c.broadcastUpdated)?Boolean(c.broadcastUpdated):!1}},toJSON(c){const m={};return c.project!==void 0&&(m.project=c.project?a.Project.toJSON(c.project):void 0),c.broadcastUpdated!==void 0&&(m.broadcastUpdated=c.broadcastUpdated),m},fromPartial(c){var m;const S=Rn();return S.project=c.project!==void 0&&c.project!==null?a.Project.fromPartial(c.project):void 0,S.broadcastUpdated=(m=c.broadcastUpdated)!==null&&m!==void 0?m:!1,S}};function Pn(){return{serviceUserId:"",role:void 0,maxDuration:void 0}}a.CreateAccessTokenRequest={encode(c,m=h.Writer.create()){return c.serviceUserId!==""&&m.uint32(10).string(c.serviceUserId),c.role!==void 0&&m.uint32(16).int32(Xe(c.role)),c.maxDuration!==void 0&&m.uint32(24).uint32(c.maxDuration),m},decode(c,m){const S=c instanceof h.Reader?c:new h.Reader(c);let G=m===void 0?S.len:S.pos+m;const P=Pn();for(;S.pos<G;){const H=S.uint32();switch(H>>>3){case 1:P.serviceUserId=S.string();break;case 2:P.role=Ve(S.int32());break;case 3:P.maxDuration=S.uint32();break;default:S.skipType(H&7);break}}return P},fromJSON(c){return{serviceUserId:Z(c.serviceUserId)?String(c.serviceUserId):"",role:Z(c.role)?Ve(c.role):void 0,maxDuration:Z(c.maxDuration)?Number(c.maxDuration):void 0}},toJSON(c){const m={};return c.serviceUserId!==void 0&&(m.serviceUserId=c.serviceUserId),c.role!==void 0&&(m.role=c.role!==void 0?Ze(c.role):void 0),c.maxDuration!==void 0&&(m.maxDuration=Math.round(c.maxDuration)),m},fromPartial(c){var m,S,G;const P=Pn();return P.serviceUserId=(m=c.serviceUserId)!==null&&m!==void 0?m:"",P.role=(S=c.role)!==null&&S!==void 0?S:void 0,P.maxDuration=(G=c.maxDuration)!==null&&G!==void 0?G:void 0,P}};function Cn(){return{accessToken:""}}a.CreateAccessTokenResponse={encode(c,m=h.Writer.create()){return c.accessToken!==""&&m.uint32(10).string(c.accessToken),m},decode(c,m){const S=c instanceof h.Reader?c:new h.Reader(c);let G=m===void 0?S.len:S.pos+m;const P=Cn();for(;S.pos<G;){const H=S.uint32();switch(H>>>3){case 1:P.accessToken=S.string();break;default:S.skipType(H&7);break}}return P},fromJSON(c){return{accessToken:Z(c.accessToken)?String(c.accessToken):""}},toJSON(c){const m={};return c.accessToken!==void 0&&(m.accessToken=c.accessToken),m},fromPartial(c){var m;const S=Cn();return S.accessToken=(m=c.accessToken)!==null&&m!==void 0?m:"",S}};function wn(){return{displayName:"",serviceUserId:void 0}}a.GuestAccessTokenDirect={encode(c,m=h.Writer.create()){return c.displayName!==""&&m.uint32(10).string(c.displayName),c.serviceUserId!==void 0&&m.uint32(18).string(c.serviceUserId),m},decode(c,m){const S=c instanceof h.Reader?c:new h.Reader(c);let G=m===void 0?S.len:S.pos+m;const P=wn();for(;S.pos<G;){const H=S.uint32();switch(H>>>3){case 1:P.displayName=S.string();break;case 2:P.serviceUserId=S.string();break;default:S.skipType(H&7);break}}return P},fromJSON(c){return{displayName:Z(c.displayName)?String(c.displayName):"",serviceUserId:Z(c.serviceUserId)?String(c.serviceUserId):void 0}},toJSON(c){const m={};return c.displayName!==void 0&&(m.displayName=c.displayName),c.serviceUserId!==void 0&&(m.serviceUserId=c.serviceUserId),m},fromPartial(c){var m,S;const G=wn();return G.displayName=(m=c.displayName)!==null&&m!==void 0?m:"",G.serviceUserId=(S=c.serviceUserId)!==null&&S!==void 0?S:void 0,G}};function Nn(){return{maxDuration:void 0}}a.GuestAccessTokenExchange={encode(c,m=h.Writer.create()){return c.maxDuration!==void 0&&m.uint32(8).uint32(c.maxDuration),m},decode(c,m){const S=c instanceof h.Reader?c:new h.Reader(c);let G=m===void 0?S.len:S.pos+m;const P=Nn();for(;S.pos<G;){const H=S.uint32();switch(H>>>3){case 1:P.maxDuration=S.uint32();break;default:S.skipType(H&7);break}}return P},fromJSON(c){return{maxDuration:Z(c.maxDuration)?Number(c.maxDuration):void 0}},toJSON(c){const m={};return c.maxDuration!==void 0&&(m.maxDuration=Math.round(c.maxDuration)),m},fromPartial(c){var m;const S=Nn();return S.maxDuration=(m=c.maxDuration)!==null&&m!==void 0?m:void 0,S}};function An(){return{direct:void 0,exchange:void 0}}a.GuestAccessToken={encode(c,m=h.Writer.create()){return c.direct!==void 0&&a.GuestAccessTokenDirect.encode(c.direct,m.uint32(10).fork()).ldelim(),c.exchange!==void 0&&a.GuestAccessTokenExchange.encode(c.exchange,m.uint32(18).fork()).ldelim(),m},decode(c,m){const S=c instanceof h.Reader?c:new h.Reader(c);let G=m===void 0?S.len:S.pos+m;const P=An();for(;S.pos<G;){const H=S.uint32();switch(H>>>3){case 1:P.direct=a.GuestAccessTokenDirect.decode(S,S.uint32());break;case 2:P.exchange=a.GuestAccessTokenExchange.decode(S,S.uint32());break;default:S.skipType(H&7);break}}return P},fromJSON(c){return{direct:Z(c.direct)?a.GuestAccessTokenDirect.fromJSON(c.direct):void 0,exchange:Z(c.exchange)?a.GuestAccessTokenExchange.fromJSON(c.exchange):void 0}},toJSON(c){const m={};return c.direct!==void 0&&(m.direct=c.direct?a.GuestAccessTokenDirect.toJSON(c.direct):void 0),c.exchange!==void 0&&(m.exchange=c.exchange?a.GuestAccessTokenExchange.toJSON(c.exchange):void 0),m},fromPartial(c){const m=An();return m.direct=c.direct!==void 0&&c.direct!==null?a.GuestAccessTokenDirect.fromPartial(c.direct):void 0,m.exchange=c.exchange!==void 0&&c.exchange!==null?a.GuestAccessTokenExchange.fromPartial(c.exchange):void 0,m}};function $n(){return{collectionId:"",projectId:"",maxDuration:void 0,role:be.ROLE_UNSPECIFIED,token:void 0,url:void 0}}a.CreateGuestAccessTokenRequest={encode(c,m=h.Writer.create()){return c.collectionId!==""&&m.uint32(10).string(c.collectionId),c.projectId!==""&&m.uint32(18).string(c.projectId),c.maxDuration!==void 0&&m.uint32(24).uint32(c.maxDuration),c.role!==be.ROLE_UNSPECIFIED&&m.uint32(32).int32(Xe(c.role)),c.token!==void 0&&a.GuestAccessToken.encode(c.token,m.uint32(42).fork()).ldelim(),c.url!==void 0&&m.uint32(50).string(c.url),m},decode(c,m){const S=c instanceof h.Reader?c:new h.Reader(c);let G=m===void 0?S.len:S.pos+m;const P=$n();for(;S.pos<G;){const H=S.uint32();switch(H>>>3){case 1:P.collectionId=S.string();break;case 2:P.projectId=S.string();break;case 3:P.maxDuration=S.uint32();break;case 4:P.role=Ve(S.int32());break;case 5:P.token=a.GuestAccessToken.decode(S,S.uint32());break;case 6:P.url=S.string();break;default:S.skipType(H&7);break}}return P},fromJSON(c){return{collectionId:Z(c.collectionId)?String(c.collectionId):"",projectId:Z(c.projectId)?String(c.projectId):"",maxDuration:Z(c.maxDuration)?Number(c.maxDuration):void 0,role:Z(c.role)?Ve(c.role):be.ROLE_UNSPECIFIED,token:Z(c.token)?a.GuestAccessToken.fromJSON(c.token):void 0,url:Z(c.url)?String(c.url):void 0}},toJSON(c){const m={};return c.collectionId!==void 0&&(m.collectionId=c.collectionId),c.projectId!==void 0&&(m.projectId=c.projectId),c.maxDuration!==void 0&&(m.maxDuration=Math.round(c.maxDuration)),c.role!==void 0&&(m.role=Ze(c.role)),c.token!==void 0&&(m.token=c.token?a.GuestAccessToken.toJSON(c.token):void 0),c.url!==void 0&&(m.url=c.url),m},fromPartial(c){var m,S,G,P,H;const he=$n();return he.collectionId=(m=c.collectionId)!==null&&m!==void 0?m:"",he.projectId=(S=c.projectId)!==null&&S!==void 0?S:"",he.maxDuration=(G=c.maxDuration)!==null&&G!==void 0?G:void 0,he.role=(P=c.role)!==null&&P!==void 0?P:be.ROLE_UNSPECIFIED,he.token=c.token!==void 0&&c.token!==null?a.GuestAccessToken.fromPartial(c.token):void 0,he.url=(H=c.url)!==null&&H!==void 0?H:void 0,he}};function Ln(){return{accessToken:"",url:void 0}}a.CreateGuestAccessTokenResponse={encode(c,m=h.Writer.create()){return c.accessToken!==""&&m.uint32(10).string(c.accessToken),c.url!==void 0&&m.uint32(18).string(c.url),m},decode(c,m){const S=c instanceof h.Reader?c:new h.Reader(c);let G=m===void 0?S.len:S.pos+m;const P=Ln();for(;S.pos<G;){const H=S.uint32();switch(H>>>3){case 1:P.accessToken=S.string();break;case 2:P.url=S.string();break;default:S.skipType(H&7);break}}return P},fromJSON(c){return{accessToken:Z(c.accessToken)?String(c.accessToken):"",url:Z(c.url)?String(c.url):void 0}},toJSON(c){const m={};return c.accessToken!==void 0&&(m.accessToken=c.accessToken),c.url!==void 0&&(m.url=c.url),m},fromPartial(c){var m,S;const G=Ln();return G.accessToken=(m=c.accessToken)!==null&&m!==void 0?m:"",G.url=(S=c.url)!==null&&S!==void 0?S:void 0,G}};function Dn(){return{collectionId:"",projectId:"",displayName:""}}a.CreateWebRtcAccessTokenRequest={encode(c,m=h.Writer.create()){return c.collectionId!==""&&m.uint32(10).string(c.collectionId),c.projectId!==""&&m.uint32(18).string(c.projectId),c.displayName!==""&&m.uint32(26).string(c.displayName),m},decode(c,m){const S=c instanceof h.Reader?c:new h.Reader(c);let G=m===void 0?S.len:S.pos+m;const P=Dn();for(;S.pos<G;){const H=S.uint32();switch(H>>>3){case 1:P.collectionId=S.string();break;case 2:P.projectId=S.string();break;case 3:P.displayName=S.string();break;default:S.skipType(H&7);break}}return P},fromJSON(c){return{collectionId:Z(c.collectionId)?String(c.collectionId):"",projectId:Z(c.projectId)?String(c.projectId):"",displayName:Z(c.displayName)?String(c.displayName):""}},toJSON(c){const m={};return c.collectionId!==void 0&&(m.collectionId=c.collectionId),c.projectId!==void 0&&(m.projectId=c.projectId),c.displayName!==void 0&&(m.displayName=c.displayName),m},fromPartial(c){var m,S,G;const P=Dn();return P.collectionId=(m=c.collectionId)!==null&&m!==void 0?m:"",P.projectId=(S=c.projectId)!==null&&S!==void 0?S:"",P.displayName=(G=c.displayName)!==null&&G!==void 0?G:"",P}};function Mn(){return{webrtcAccess:void 0}}a.CreateWebRtcAccessTokenResponse={encode(c,m=h.Writer.create()){return c.webrtcAccess!==void 0&&a.WebRtcAccess.encode(c.webrtcAccess,m.uint32(18).fork()).ldelim(),m},decode(c,m){const S=c instanceof h.Reader?c:new h.Reader(c);let G=m===void 0?S.len:S.pos+m;const P=Mn();for(;S.pos<G;){const H=S.uint32();switch(H>>>3){case 2:P.webrtcAccess=a.WebRtcAccess.decode(S,S.uint32());break;default:S.skipType(H&7);break}}return P},fromJSON(c){return{webrtcAccess:Z(c.webrtcAccess)?a.WebRtcAccess.fromJSON(c.webrtcAccess):void 0}},toJSON(c){const m={};return c.webrtcAccess!==void 0&&(m.webrtcAccess=c.webrtcAccess?a.WebRtcAccess.toJSON(c.webrtcAccess):void 0),m},fromPartial(c){const m=Mn();return m.webrtcAccess=c.webrtcAccess!==void 0&&c.webrtcAccess!==null?a.WebRtcAccess.fromPartial(c.webrtcAccess):void 0,m}};function Un(){return{}}a.RefreshAccessTokenRequest={encode(c,m=h.Writer.create()){return m},decode(c,m){const S=c instanceof h.Reader?c:new h.Reader(c);let G=m===void 0?S.len:S.pos+m;const P=Un();for(;S.pos<G;){const H=S.uint32();switch(H>>>3){default:S.skipType(H&7);break}}return P},fromJSON(c){return{}},toJSON(c){return{}},fromPartial(c){return Un()}};function Bn(){return{}}a.RefreshAccessTokenResponse={encode(c,m=h.Writer.create()){return m},decode(c,m){const S=c instanceof h.Reader?c:new h.Reader(c);let G=m===void 0?S.len:S.pos+m;const P=Bn();for(;S.pos<G;){const H=S.uint32();switch(H>>>3){default:S.skipType(H&7);break}}return P},fromJSON(c){return{}},toJSON(c){return{}},fromPartial(c){return Bn()}};function Vn(){return{collectionId:"",projectId:"",code:"",url:"",autoDelete:void 0}}a.GuestCode={encode(c,m=h.Writer.create()){return c.collectionId!==""&&m.uint32(10).string(c.collectionId),c.projectId!==""&&m.uint32(18).string(c.projectId),c.code!==""&&m.uint32(26).string(c.code),c.url!==""&&m.uint32(34).string(c.url),c.autoDelete!==void 0&&y.Timestamp.encode(it(c.autoDelete),m.uint32(42).fork()).ldelim(),m},decode(c,m){const S=c instanceof h.Reader?c:new h.Reader(c);let G=m===void 0?S.len:S.pos+m;const P=Vn();for(;S.pos<G;){const H=S.uint32();switch(H>>>3){case 1:P.collectionId=S.string();break;case 2:P.projectId=S.string();break;case 3:P.code=S.string();break;case 4:P.url=S.string();break;case 5:P.autoDelete=ot(y.Timestamp.decode(S,S.uint32()));break;default:S.skipType(H&7);break}}return P},fromJSON(c){return{collectionId:Z(c.collectionId)?String(c.collectionId):"",projectId:Z(c.projectId)?String(c.projectId):"",code:Z(c.code)?String(c.code):"",url:Z(c.url)?String(c.url):"",autoDelete:Z(c.autoDelete)?String(c.autoDelete):void 0}},toJSON(c){const m={};return c.collectionId!==void 0&&(m.collectionId=c.collectionId),c.projectId!==void 0&&(m.projectId=c.projectId),c.code!==void 0&&(m.code=c.code),c.url!==void 0&&(m.url=c.url),c.autoDelete!==void 0&&(m.autoDelete=c.autoDelete),m},fromPartial(c){var m,S,G,P,H;const he=Vn();return he.collectionId=(m=c.collectionId)!==null&&m!==void 0?m:"",he.projectId=(S=c.projectId)!==null&&S!==void 0?S:"",he.code=(G=c.code)!==null&&G!==void 0?G:"",he.url=(P=c.url)!==null&&P!==void 0?P:"",he.autoDelete=(H=c.autoDelete)!==null&&H!==void 0?H:void 0,he}};function Fn(){return{serviceId:"",code:""}}a.GuestCodeRedirectRequest={encode(c,m=h.Writer.create()){return c.serviceId!==""&&m.uint32(10).string(c.serviceId),c.code!==""&&m.uint32(18).string(c.code),m},decode(c,m){const S=c instanceof h.Reader?c:new h.Reader(c);let G=m===void 0?S.len:S.pos+m;const P=Fn();for(;S.pos<G;){const H=S.uint32();switch(H>>>3){case 1:P.serviceId=S.string();break;case 2:P.code=S.string();break;default:S.skipType(H&7);break}}return P},fromJSON(c){return{serviceId:Z(c.serviceId)?String(c.serviceId):"",code:Z(c.code)?String(c.code):""}},toJSON(c){const m={};return c.serviceId!==void 0&&(m.serviceId=c.serviceId),c.code!==void 0&&(m.code=c.code),m},fromPartial(c){var m,S;const G=Fn();return G.serviceId=(m=c.serviceId)!==null&&m!==void 0?m:"",G.code=(S=c.code)!==null&&S!==void 0?S:"",G}};function Jn(){return{}}a.GuestCodeRedirectResponse={encode(c,m=h.Writer.create()){return m},decode(c,m){const S=c instanceof h.Reader?c:new h.Reader(c);let G=m===void 0?S.len:S.pos+m;const P=Jn();for(;S.pos<G;){const H=S.uint32();switch(H>>>3){default:S.skipType(H&7);break}}return P},fromJSON(c){return{}},toJSON(c){return{}},fromPartial(c){return Jn()}};function Gn(){return{serviceName:"",serviceUserId:""}}a.CreateDemoAccessTokenRequest={encode(c,m=h.Writer.create()){return c.serviceName!==""&&m.uint32(10).string(c.serviceName),c.serviceUserId!==""&&m.uint32(18).string(c.serviceUserId),m},decode(c,m){const S=c instanceof h.Reader?c:new h.Reader(c);let G=m===void 0?S.len:S.pos+m;const P=Gn();for(;S.pos<G;){const H=S.uint32();switch(H>>>3){case 1:P.serviceName=S.string();break;case 2:P.serviceUserId=S.string();break;default:S.skipType(H&7);break}}return P},fromJSON(c){return{serviceName:Z(c.serviceName)?String(c.serviceName):"",serviceUserId:Z(c.serviceUserId)?String(c.serviceUserId):""}},toJSON(c){const m={};return c.serviceName!==void 0&&(m.serviceName=c.serviceName),c.serviceUserId!==void 0&&(m.serviceUserId=c.serviceUserId),m},fromPartial(c){var m,S;const G=Gn();return G.serviceName=(m=c.serviceName)!==null&&m!==void 0?m:"",G.serviceUserId=(S=c.serviceUserId)!==null&&S!==void 0?S:"",G}};function qn(){return{accessToken:""}}a.CreateDemoAccessTokenResponse={encode(c,m=h.Writer.create()){return c.accessToken!==""&&m.uint32(10).string(c.accessToken),m},decode(c,m){const S=c instanceof h.Reader?c:new h.Reader(c);let G=m===void 0?S.len:S.pos+m;const P=qn();for(;S.pos<G;){const H=S.uint32();switch(H>>>3){case 1:P.accessToken=S.string();break;default:S.skipType(H&7);break}}return P},fromJSON(c){return{accessToken:Z(c.accessToken)?String(c.accessToken):""}},toJSON(c){const m={};return c.accessToken!==void 0&&(m.accessToken=c.accessToken),m},fromPartial(c){var m;const S=qn();return S.accessToken=(m=c.accessToken)!==null&&m!==void 0?m:"",S}};function Wn(){return{alg:"",kty:"",use:"",kid:"",e:"",n:""}}a.JsonWebKey={encode(c,m=h.Writer.create()){return c.alg!==""&&m.uint32(10).string(c.alg),c.kty!==""&&m.uint32(18).string(c.kty),c.use!==""&&m.uint32(26).string(c.use),c.kid!==""&&m.uint32(34).string(c.kid),c.e!==""&&m.uint32(42).string(c.e),c.n!==""&&m.uint32(50).string(c.n),m},decode(c,m){const S=c instanceof h.Reader?c:new h.Reader(c);let G=m===void 0?S.len:S.pos+m;const P=Wn();for(;S.pos<G;){const H=S.uint32();switch(H>>>3){case 1:P.alg=S.string();break;case 2:P.kty=S.string();break;case 3:P.use=S.string();break;case 4:P.kid=S.string();break;case 5:P.e=S.string();break;case 6:P.n=S.string();break;default:S.skipType(H&7);break}}return P},fromJSON(c){return{alg:Z(c.alg)?String(c.alg):"",kty:Z(c.kty)?String(c.kty):"",use:Z(c.use)?String(c.use):"",kid:Z(c.kid)?String(c.kid):"",e:Z(c.e)?String(c.e):"",n:Z(c.n)?String(c.n):""}},toJSON(c){const m={};return c.alg!==void 0&&(m.alg=c.alg),c.kty!==void 0&&(m.kty=c.kty),c.use!==void 0&&(m.use=c.use),c.kid!==void 0&&(m.kid=c.kid),c.e!==void 0&&(m.e=c.e),c.n!==void 0&&(m.n=c.n),m},fromPartial(c){var m,S,G,P,H,he;const Ne=Wn();return Ne.alg=(m=c.alg)!==null&&m!==void 0?m:"",Ne.kty=(S=c.kty)!==null&&S!==void 0?S:"",Ne.use=(G=c.use)!==null&&G!==void 0?G:"",Ne.kid=(P=c.kid)!==null&&P!==void 0?P:"",Ne.e=(H=c.e)!==null&&H!==void 0?H:"",Ne.n=(he=c.n)!==null&&he!==void 0?he:"",Ne}};function Hn(){return{}}a.GetJsonWebKeySetRequest={encode(c,m=h.Writer.create()){return m},decode(c,m){const S=c instanceof h.Reader?c:new h.Reader(c);let G=m===void 0?S.len:S.pos+m;const P=Hn();for(;S.pos<G;){const H=S.uint32();switch(H>>>3){default:S.skipType(H&7);break}}return P},fromJSON(c){return{}},toJSON(c){return{}},fromPartial(c){return Hn()}};function Yn(){return{keys:[]}}a.GetJsonWebKeySetResponse={encode(c,m=h.Writer.create()){for(const S of c.keys)a.JsonWebKey.encode(S,m.uint32(10).fork()).ldelim();return m},decode(c,m){const S=c instanceof h.Reader?c:new h.Reader(c);let G=m===void 0?S.len:S.pos+m;const P=Yn();for(;S.pos<G;){const H=S.uint32();switch(H>>>3){case 1:P.keys.push(a.JsonWebKey.decode(S,S.uint32()));break;default:S.skipType(H&7);break}}return P},fromJSON(c){return{keys:Array.isArray(c==null?void 0:c.keys)?c.keys.map(m=>a.JsonWebKey.fromJSON(m)):[]}},toJSON(c){const m={};return c.keys?m.keys=c.keys.map(S=>S?a.JsonWebKey.toJSON(S):void 0):m.keys=[],m},fromPartial(c){var m;const S=Yn();return S.keys=((m=c.keys)===null||m===void 0?void 0:m.map(G=>a.JsonWebKey.fromPartial(G)))||[],S}};function zn(){return{}}a.GetTestTokenRequest={encode(c,m=h.Writer.create()){return m},decode(c,m){const S=c instanceof h.Reader?c:new h.Reader(c);let G=m===void 0?S.len:S.pos+m;const P=zn();for(;S.pos<G;){const H=S.uint32();switch(H>>>3){default:S.skipType(H&7);break}}return P},fromJSON(c){return{}},toJSON(c){return{}},fromPartial(c){return zn()}};function xn(){return{accessToken:""}}a.GetTestTokenResponse={encode(c,m=h.Writer.create()){return c.accessToken!==""&&m.uint32(10).string(c.accessToken),m},decode(c,m){const S=c instanceof h.Reader?c:new h.Reader(c);let G=m===void 0?S.len:S.pos+m;const P=xn();for(;S.pos<G;){const H=S.uint32();switch(H>>>3){case 1:P.accessToken=S.string();break;default:S.skipType(H&7);break}}return P},fromJSON(c){return{accessToken:Z(c.accessToken)?String(c.accessToken):""}},toJSON(c){const m={};return c.accessToken!==void 0&&(m.accessToken=c.accessToken),m},fromPartial(c){var m;const S=xn();return S.accessToken=(m=c.accessToken)!==null&&m!==void 0?m:"",S}};function jn(){return{collectionId:"",projectId:"",destinationId:"",destination:void 0}}a.DestinationCreateEvent={encode(c,m=h.Writer.create()){return c.collectionId!==""&&m.uint32(10).string(c.collectionId),c.projectId!==""&&m.uint32(18).string(c.projectId),c.destinationId!==""&&m.uint32(26).string(c.destinationId),c.destination!==void 0&&a.Destination.encode(c.destination,m.uint32(34).fork()).ldelim(),m},decode(c,m){const S=c instanceof h.Reader?c:new h.Reader(c);let G=m===void 0?S.len:S.pos+m;const P=jn();for(;S.pos<G;){const H=S.uint32();switch(H>>>3){case 1:P.collectionId=S.string();break;case 2:P.projectId=S.string();break;case 3:P.destinationId=S.string();break;case 4:P.destination=a.Destination.decode(S,S.uint32());break;default:S.skipType(H&7);break}}return P},fromJSON(c){return{collectionId:Z(c.collectionId)?String(c.collectionId):"",projectId:Z(c.projectId)?String(c.projectId):"",destinationId:Z(c.destinationId)?String(c.destinationId):"",destination:Z(c.destination)?a.Destination.fromJSON(c.destination):void 0}},toJSON(c){const m={};return c.collectionId!==void 0&&(m.collectionId=c.collectionId),c.projectId!==void 0&&(m.projectId=c.projectId),c.destinationId!==void 0&&(m.destinationId=c.destinationId),c.destination!==void 0&&(m.destination=c.destination?a.Destination.toJSON(c.destination):void 0),m},fromPartial(c){var m,S,G;const P=jn();return P.collectionId=(m=c.collectionId)!==null&&m!==void 0?m:"",P.projectId=(S=c.projectId)!==null&&S!==void 0?S:"",P.destinationId=(G=c.destinationId)!==null&&G!==void 0?G:"",P.destination=c.destination!==void 0&&c.destination!==null?a.Destination.fromPartial(c.destination):void 0,P}};function Kn(){return{collectionId:"",projectId:"",destinationId:""}}a.DestinationDeleteEvent={encode(c,m=h.Writer.create()){return c.collectionId!==""&&m.uint32(10).string(c.collectionId),c.projectId!==""&&m.uint32(18).string(c.projectId),c.destinationId!==""&&m.uint32(26).string(c.destinationId),m},decode(c,m){const S=c instanceof h.Reader?c:new h.Reader(c);let G=m===void 0?S.len:S.pos+m;const P=Kn();for(;S.pos<G;){const H=S.uint32();switch(H>>>3){case 1:P.collectionId=S.string();break;case 2:P.projectId=S.string();break;case 3:P.destinationId=S.string();break;default:S.skipType(H&7);break}}return P},fromJSON(c){return{collectionId:Z(c.collectionId)?String(c.collectionId):"",projectId:Z(c.projectId)?String(c.projectId):"",destinationId:Z(c.destinationId)?String(c.destinationId):""}},toJSON(c){const m={};return c.collectionId!==void 0&&(m.collectionId=c.collectionId),c.projectId!==void 0&&(m.projectId=c.projectId),c.destinationId!==void 0&&(m.destinationId=c.destinationId),m},fromPartial(c){var m,S,G;const P=Kn();return P.collectionId=(m=c.collectionId)!==null&&m!==void 0?m:"",P.projectId=(S=c.projectId)!==null&&S!==void 0?S:"",P.destinationId=(G=c.destinationId)!==null&&G!==void 0?G:"",P}};function Qn(){return{collectionId:"",projectId:"",destinationId:"",updateMask:[],destination:void 0}}a.DestinationUpdateEvent={encode(c,m=h.Writer.create()){c.collectionId!==""&&m.uint32(10).string(c.collectionId),c.projectId!==""&&m.uint32(18).string(c.projectId),c.destinationId!==""&&m.uint32(26).string(c.destinationId);for(const S of c.updateMask)m.uint32(34).string(S);return c.destination!==void 0&&a.Destination.encode(c.destination,m.uint32(42).fork()).ldelim(),m},decode(c,m){const S=c instanceof h.Reader?c:new h.Reader(c);let G=m===void 0?S.len:S.pos+m;const P=Qn();for(;S.pos<G;){const H=S.uint32();switch(H>>>3){case 1:P.collectionId=S.string();break;case 2:P.projectId=S.string();break;case 3:P.destinationId=S.string();break;case 4:P.updateMask.push(S.string());break;case 5:P.destination=a.Destination.decode(S,S.uint32());break;default:S.skipType(H&7);break}}return P},fromJSON(c){return{collectionId:Z(c.collectionId)?String(c.collectionId):"",projectId:Z(c.projectId)?String(c.projectId):"",destinationId:Z(c.destinationId)?String(c.destinationId):"",updateMask:Array.isArray(c==null?void 0:c.updateMask)?c.updateMask.map(m=>String(m)):[],destination:Z(c.destination)?a.Destination.fromJSON(c.destination):void 0}},toJSON(c){const m={};return c.collectionId!==void 0&&(m.collectionId=c.collectionId),c.projectId!==void 0&&(m.projectId=c.projectId),c.destinationId!==void 0&&(m.destinationId=c.destinationId),c.updateMask?m.updateMask=c.updateMask.map(S=>S):m.updateMask=[],c.destination!==void 0&&(m.destination=c.destination?a.Destination.toJSON(c.destination):void 0),m},fromPartial(c){var m,S,G,P;const H=Qn();return H.collectionId=(m=c.collectionId)!==null&&m!==void 0?m:"",H.projectId=(S=c.projectId)!==null&&S!==void 0?S:"",H.destinationId=(G=c.destinationId)!==null&&G!==void 0?G:"",H.updateMask=((P=c.updateMask)===null||P===void 0?void 0:P.map(he=>he))||[],H.destination=c.destination!==void 0&&c.destination!==null?a.Destination.fromPartial(c.destination):void 0,H}};function Zn(){return{collectionId:"",projectId:"",destinationId:"",connect:void 0}}a.DestinationStateEvent={encode(c,m=h.Writer.create()){return c.collectionId!==""&&m.uint32(10).string(c.collectionId),c.projectId!==""&&m.uint32(18).string(c.projectId),c.destinationId!==""&&m.uint32(26).string(c.destinationId),c.connect!==void 0&&m.uint32(32).int32(tt(c.connect)),m},decode(c,m){const S=c instanceof h.Reader?c:new h.Reader(c);let G=m===void 0?S.len:S.pos+m;const P=Zn();for(;S.pos<G;){const H=S.uint32();switch(H>>>3){case 1:P.collectionId=S.string();break;case 2:P.projectId=S.string();break;case 3:P.destinationId=S.string();break;case 4:P.connect=et(S.int32());break;default:S.skipType(H&7);break}}return P},fromJSON(c){return{collectionId:Z(c.collectionId)?String(c.collectionId):"",projectId:Z(c.projectId)?String(c.projectId):"",destinationId:Z(c.destinationId)?String(c.destinationId):"",connect:Z(c.connect)?et(c.connect):void 0}},toJSON(c){const m={};return c.collectionId!==void 0&&(m.collectionId=c.collectionId),c.projectId!==void 0&&(m.projectId=c.projectId),c.destinationId!==void 0&&(m.destinationId=c.destinationId),c.connect!==void 0&&(m.connect=c.connect!==void 0?Ce(c.connect):void 0),m},fromPartial(c){var m,S,G,P;const H=Zn();return H.collectionId=(m=c.collectionId)!==null&&m!==void 0?m:"",H.projectId=(S=c.projectId)!==null&&S!==void 0?S:"",H.destinationId=(G=c.destinationId)!==null&&G!==void 0?G:"",H.connect=(P=c.connect)!==null&&P!==void 0?P:void 0,H}};function Xn(){return{collectionId:"",projectId:"",project:void 0}}a.ProjectCreateEvent={encode(c,m=h.Writer.create()){return c.collectionId!==""&&m.uint32(10).string(c.collectionId),c.projectId!==""&&m.uint32(18).string(c.projectId),c.project!==void 0&&a.Project.encode(c.project,m.uint32(26).fork()).ldelim(),m},decode(c,m){const S=c instanceof h.Reader?c:new h.Reader(c);let G=m===void 0?S.len:S.pos+m;const P=Xn();for(;S.pos<G;){const H=S.uint32();switch(H>>>3){case 1:P.collectionId=S.string();break;case 2:P.projectId=S.string();break;case 3:P.project=a.Project.decode(S,S.uint32());break;default:S.skipType(H&7);break}}return P},fromJSON(c){return{collectionId:Z(c.collectionId)?String(c.collectionId):"",projectId:Z(c.projectId)?String(c.projectId):"",project:Z(c.project)?a.Project.fromJSON(c.project):void 0}},toJSON(c){const m={};return c.collectionId!==void 0&&(m.collectionId=c.collectionId),c.projectId!==void 0&&(m.projectId=c.projectId),c.project!==void 0&&(m.project=c.project?a.Project.toJSON(c.project):void 0),m},fromPartial(c){var m,S;const G=Xn();return G.collectionId=(m=c.collectionId)!==null&&m!==void 0?m:"",G.projectId=(S=c.projectId)!==null&&S!==void 0?S:"",G.project=c.project!==void 0&&c.project!==null?a.Project.fromPartial(c.project):void 0,G}};function er(){return{collectionId:"",projectId:""}}a.ProjectDeleteEvent={encode(c,m=h.Writer.create()){return c.collectionId!==""&&m.uint32(10).string(c.collectionId),c.projectId!==""&&m.uint32(18).string(c.projectId),m},decode(c,m){const S=c instanceof h.Reader?c:new h.Reader(c);let G=m===void 0?S.len:S.pos+m;const P=er();for(;S.pos<G;){const H=S.uint32();switch(H>>>3){case 1:P.collectionId=S.string();break;case 2:P.projectId=S.string();break;default:S.skipType(H&7);break}}return P},fromJSON(c){return{collectionId:Z(c.collectionId)?String(c.collectionId):"",projectId:Z(c.projectId)?String(c.projectId):""}},toJSON(c){const m={};return c.collectionId!==void 0&&(m.collectionId=c.collectionId),c.projectId!==void 0&&(m.projectId=c.projectId),m},fromPartial(c){var m,S;const G=er();return G.collectionId=(m=c.collectionId)!==null&&m!==void 0?m:"",G.projectId=(S=c.projectId)!==null&&S!==void 0?S:"",G}};function tr(){return{collectionId:"",projectId:"",updateMask:[],project:void 0}}a.ProjectUpdateEvent={encode(c,m=h.Writer.create()){c.collectionId!==""&&m.uint32(10).string(c.collectionId),c.projectId!==""&&m.uint32(18).string(c.projectId);for(const S of c.updateMask)m.uint32(26).string(S);return c.project!==void 0&&a.Project.encode(c.project,m.uint32(34).fork()).ldelim(),m},decode(c,m){const S=c instanceof h.Reader?c:new h.Reader(c);let G=m===void 0?S.len:S.pos+m;const P=tr();for(;S.pos<G;){const H=S.uint32();switch(H>>>3){case 1:P.collectionId=S.string();break;case 2:P.projectId=S.string();break;case 3:P.updateMask.push(S.string());break;case 4:P.project=a.Project.decode(S,S.uint32());break;default:S.skipType(H&7);break}}return P},fromJSON(c){return{collectionId:Z(c.collectionId)?String(c.collectionId):"",projectId:Z(c.projectId)?String(c.projectId):"",updateMask:Array.isArray(c==null?void 0:c.updateMask)?c.updateMask.map(m=>String(m)):[],project:Z(c.project)?a.Project.fromJSON(c.project):void 0}},toJSON(c){const m={};return c.collectionId!==void 0&&(m.collectionId=c.collectionId),c.projectId!==void 0&&(m.projectId=c.projectId),c.updateMask?m.updateMask=c.updateMask.map(S=>S):m.updateMask=[],c.project!==void 0&&(m.project=c.project?a.Project.toJSON(c.project):void 0),m},fromPartial(c){var m,S,G;const P=tr();return P.collectionId=(m=c.collectionId)!==null&&m!==void 0?m:"",P.projectId=(S=c.projectId)!==null&&S!==void 0?S:"",P.updateMask=((G=c.updateMask)===null||G===void 0?void 0:G.map(H=>H))||[],P.project=c.project!==void 0&&c.project!==null?a.Project.fromPartial(c.project):void 0,P}};function nr(){return{collectionId:"",projectId:"",broadcastId:"",phase:void 0,error:void 0}}a.ProjectBroadcastStateEvent={encode(c,m=h.Writer.create()){return c.collectionId!==""&&m.uint32(10).string(c.collectionId),c.projectId!==""&&m.uint32(18).string(c.projectId),c.broadcastId!==""&&m.uint32(26).string(c.broadcastId),c.phase!==void 0&&m.uint32(32).int32(de(c.phase)),c.error!==void 0&&m.uint32(40).int32(Ae(c.error)),m},decode(c,m){const S=c instanceof h.Reader?c:new h.Reader(c);let G=m===void 0?S.len:S.pos+m;const P=nr();for(;S.pos<G;){const H=S.uint32();switch(H>>>3){case 1:P.collectionId=S.string();break;case 2:P.projectId=S.string();break;case 3:P.broadcastId=S.string();break;case 4:P.phase=U(S.int32());break;case 5:P.error=Re(S.int32());break;default:S.skipType(H&7);break}}return P},fromJSON(c){return{collectionId:Z(c.collectionId)?String(c.collectionId):"",projectId:Z(c.projectId)?String(c.projectId):"",broadcastId:Z(c.broadcastId)?String(c.broadcastId):"",phase:Z(c.phase)?U(c.phase):void 0,error:Z(c.error)?Re(c.error):void 0}},toJSON(c){const m={};return c.collectionId!==void 0&&(m.collectionId=c.collectionId),c.projectId!==void 0&&(m.projectId=c.projectId),c.broadcastId!==void 0&&(m.broadcastId=c.broadcastId),c.phase!==void 0&&(m.phase=c.phase!==void 0?ee(c.phase):void 0),c.error!==void 0&&(m.error=c.error!==void 0?Te(c.error):void 0),m},fromPartial(c){var m,S,G,P,H;const he=nr();return he.collectionId=(m=c.collectionId)!==null&&m!==void 0?m:"",he.projectId=(S=c.projectId)!==null&&S!==void 0?S:"",he.broadcastId=(G=c.broadcastId)!==null&&G!==void 0?G:"",he.phase=(P=c.phase)!==null&&P!==void 0?P:void 0,he.error=(H=c.error)!==null&&H!==void 0?H:void 0,he}};function rr(){return{collectionId:"",collection:void 0}}a.CollectionCreateEvent={encode(c,m=h.Writer.create()){return c.collectionId!==""&&m.uint32(10).string(c.collectionId),c.collection!==void 0&&a.Collection.encode(c.collection,m.uint32(18).fork()).ldelim(),m},decode(c,m){const S=c instanceof h.Reader?c:new h.Reader(c);let G=m===void 0?S.len:S.pos+m;const P=rr();for(;S.pos<G;){const H=S.uint32();switch(H>>>3){case 1:P.collectionId=S.string();break;case 2:P.collection=a.Collection.decode(S,S.uint32());break;default:S.skipType(H&7);break}}return P},fromJSON(c){return{collectionId:Z(c.collectionId)?String(c.collectionId):"",collection:Z(c.collection)?a.Collection.fromJSON(c.collection):void 0}},toJSON(c){const m={};return c.collectionId!==void 0&&(m.collectionId=c.collectionId),c.collection!==void 0&&(m.collection=c.collection?a.Collection.toJSON(c.collection):void 0),m},fromPartial(c){var m;const S=rr();return S.collectionId=(m=c.collectionId)!==null&&m!==void 0?m:"",S.collection=c.collection!==void 0&&c.collection!==null?a.Collection.fromPartial(c.collection):void 0,S}};function ir(){return{collectionId:""}}a.CollectionDeleteEvent={encode(c,m=h.Writer.create()){return c.collectionId!==""&&m.uint32(10).string(c.collectionId),m},decode(c,m){const S=c instanceof h.Reader?c:new h.Reader(c);let G=m===void 0?S.len:S.pos+m;const P=ir();for(;S.pos<G;){const H=S.uint32();switch(H>>>3){case 1:P.collectionId=S.string();break;default:S.skipType(H&7);break}}return P},fromJSON(c){return{collectionId:Z(c.collectionId)?String(c.collectionId):""}},toJSON(c){const m={};return c.collectionId!==void 0&&(m.collectionId=c.collectionId),m},fromPartial(c){var m;const S=ir();return S.collectionId=(m=c.collectionId)!==null&&m!==void 0?m:"",S}};function or(){return{collectionId:"",updateMask:[],collection:void 0}}a.CollectionUpdateEvent={encode(c,m=h.Writer.create()){c.collectionId!==""&&m.uint32(10).string(c.collectionId);for(const S of c.updateMask)m.uint32(18).string(S);return c.collection!==void 0&&a.Collection.encode(c.collection,m.uint32(26).fork()).ldelim(),m},decode(c,m){const S=c instanceof h.Reader?c:new h.Reader(c);let G=m===void 0?S.len:S.pos+m;const P=or();for(;S.pos<G;){const H=S.uint32();switch(H>>>3){case 1:P.collectionId=S.string();break;case 2:P.updateMask.push(S.string());break;case 3:P.collection=a.Collection.decode(S,S.uint32());break;default:S.skipType(H&7);break}}return P},fromJSON(c){return{collectionId:Z(c.collectionId)?String(c.collectionId):"",updateMask:Array.isArray(c==null?void 0:c.updateMask)?c.updateMask.map(m=>String(m)):[],collection:Z(c.collection)?a.Collection.fromJSON(c.collection):void 0}},toJSON(c){const m={};return c.collectionId!==void 0&&(m.collectionId=c.collectionId),c.updateMask?m.updateMask=c.updateMask.map(S=>S):m.updateMask=[],c.collection!==void 0&&(m.collection=c.collection?a.Collection.toJSON(c.collection):void 0),m},fromPartial(c){var m,S;const G=or();return G.collectionId=(m=c.collectionId)!==null&&m!==void 0?m:"",G.updateMask=((S=c.updateMask)===null||S===void 0?void 0:S.map(P=>P))||[],G.collection=c.collection!==void 0&&c.collection!==null?a.Collection.fromPartial(c.collection):void 0,G}};function ar(){return{collectionId:"",sourceId:"",source:void 0}}a.SourceCreateEvent={encode(c,m=h.Writer.create()){return c.collectionId!==""&&m.uint32(10).string(c.collectionId),c.sourceId!==""&&m.uint32(18).string(c.sourceId),c.source!==void 0&&a.Source.encode(c.source,m.uint32(26).fork()).ldelim(),m},decode(c,m){const S=c instanceof h.Reader?c:new h.Reader(c);let G=m===void 0?S.len:S.pos+m;const P=ar();for(;S.pos<G;){const H=S.uint32();switch(H>>>3){case 1:P.collectionId=S.string();break;case 2:P.sourceId=S.string();break;case 3:P.source=a.Source.decode(S,S.uint32());break;default:S.skipType(H&7);break}}return P},fromJSON(c){return{collectionId:Z(c.collectionId)?String(c.collectionId):"",sourceId:Z(c.sourceId)?String(c.sourceId):"",source:Z(c.source)?a.Source.fromJSON(c.source):void 0}},toJSON(c){const m={};return c.collectionId!==void 0&&(m.collectionId=c.collectionId),c.sourceId!==void 0&&(m.sourceId=c.sourceId),c.source!==void 0&&(m.source=c.source?a.Source.toJSON(c.source):void 0),m},fromPartial(c){var m,S;const G=ar();return G.collectionId=(m=c.collectionId)!==null&&m!==void 0?m:"",G.sourceId=(S=c.sourceId)!==null&&S!==void 0?S:"",G.source=c.source!==void 0&&c.source!==null?a.Source.fromPartial(c.source):void 0,G}};function sr(){return{collectionId:"",sourceId:""}}a.SourceDeleteEvent={encode(c,m=h.Writer.create()){return c.collectionId!==""&&m.uint32(10).string(c.collectionId),c.sourceId!==""&&m.uint32(18).string(c.sourceId),m},decode(c,m){const S=c instanceof h.Reader?c:new h.Reader(c);let G=m===void 0?S.len:S.pos+m;const P=sr();for(;S.pos<G;){const H=S.uint32();switch(H>>>3){case 1:P.collectionId=S.string();break;case 2:P.sourceId=S.string();break;default:S.skipType(H&7);break}}return P},fromJSON(c){return{collectionId:Z(c.collectionId)?String(c.collectionId):"",sourceId:Z(c.sourceId)?String(c.sourceId):""}},toJSON(c){const m={};return c.collectionId!==void 0&&(m.collectionId=c.collectionId),c.sourceId!==void 0&&(m.sourceId=c.sourceId),m},fromPartial(c){var m,S;const G=sr();return G.collectionId=(m=c.collectionId)!==null&&m!==void 0?m:"",G.sourceId=(S=c.sourceId)!==null&&S!==void 0?S:"",G}};function ur(){return{collectionId:"",sourceId:"",updateMask:[],source:void 0}}a.SourceUpdateEvent={encode(c,m=h.Writer.create()){c.collectionId!==""&&m.uint32(10).string(c.collectionId),c.sourceId!==""&&m.uint32(18).string(c.sourceId);for(const S of c.updateMask)m.uint32(26).string(S);return c.source!==void 0&&a.Source.encode(c.source,m.uint32(34).fork()).ldelim(),m},decode(c,m){const S=c instanceof h.Reader?c:new h.Reader(c);let G=m===void 0?S.len:S.pos+m;const P=ur();for(;S.pos<G;){const H=S.uint32();switch(H>>>3){case 1:P.collectionId=S.string();break;case 2:P.sourceId=S.string();break;case 3:P.updateMask.push(S.string());break;case 4:P.source=a.Source.decode(S,S.uint32());break;default:S.skipType(H&7);break}}return P},fromJSON(c){return{collectionId:Z(c.collectionId)?String(c.collectionId):"",sourceId:Z(c.sourceId)?String(c.sourceId):"",updateMask:Array.isArray(c==null?void 0:c.updateMask)?c.updateMask.map(m=>String(m)):[],source:Z(c.source)?a.Source.fromJSON(c.source):void 0}},toJSON(c){const m={};return c.collectionId!==void 0&&(m.collectionId=c.collectionId),c.sourceId!==void 0&&(m.sourceId=c.sourceId),c.updateMask?m.updateMask=c.updateMask.map(S=>S):m.updateMask=[],c.source!==void 0&&(m.source=c.source?a.Source.toJSON(c.source):void 0),m},fromPartial(c){var m,S,G;const P=ur();return P.collectionId=(m=c.collectionId)!==null&&m!==void 0?m:"",P.sourceId=(S=c.sourceId)!==null&&S!==void 0?S:"",P.updateMask=((G=c.updateMask)===null||G===void 0?void 0:G.map(H=>H))||[],P.source=c.source!==void 0&&c.source!==null?a.Source.fromPartial(c.source):void 0,P}};function dr(){return{collectionId:"",sourceId:"",projectId:"",source:void 0}}a.SourceAddEvent={encode(c,m=h.Writer.create()){return c.collectionId!==""&&m.uint32(10).string(c.collectionId),c.sourceId!==""&&m.uint32(18).string(c.sourceId),c.projectId!==""&&m.uint32(26).string(c.projectId),c.source!==void 0&&a.Source.encode(c.source,m.uint32(34).fork()).ldelim(),m},decode(c,m){const S=c instanceof h.Reader?c:new h.Reader(c);let G=m===void 0?S.len:S.pos+m;const P=dr();for(;S.pos<G;){const H=S.uint32();switch(H>>>3){case 1:P.collectionId=S.string();break;case 2:P.sourceId=S.string();break;case 3:P.projectId=S.string();break;case 4:P.source=a.Source.decode(S,S.uint32());break;default:S.skipType(H&7);break}}return P},fromJSON(c){return{collectionId:Z(c.collectionId)?String(c.collectionId):"",sourceId:Z(c.sourceId)?String(c.sourceId):"",projectId:Z(c.projectId)?String(c.projectId):"",source:Z(c.source)?a.Source.fromJSON(c.source):void 0}},toJSON(c){const m={};return c.collectionId!==void 0&&(m.collectionId=c.collectionId),c.sourceId!==void 0&&(m.sourceId=c.sourceId),c.projectId!==void 0&&(m.projectId=c.projectId),c.source!==void 0&&(m.source=c.source?a.Source.toJSON(c.source):void 0),m},fromPartial(c){var m,S,G;const P=dr();return P.collectionId=(m=c.collectionId)!==null&&m!==void 0?m:"",P.sourceId=(S=c.sourceId)!==null&&S!==void 0?S:"",P.projectId=(G=c.projectId)!==null&&G!==void 0?G:"",P.source=c.source!==void 0&&c.source!==null?a.Source.fromPartial(c.source):void 0,P}};function cr(){return{collectionId:"",sourceId:"",projectId:""}}a.SourceRemoveEvent={encode(c,m=h.Writer.create()){return c.collectionId!==""&&m.uint32(10).string(c.collectionId),c.sourceId!==""&&m.uint32(18).string(c.sourceId),c.projectId!==""&&m.uint32(26).string(c.projectId),m},decode(c,m){const S=c instanceof h.Reader?c:new h.Reader(c);let G=m===void 0?S.len:S.pos+m;const P=cr();for(;S.pos<G;){const H=S.uint32();switch(H>>>3){case 1:P.collectionId=S.string();break;case 2:P.sourceId=S.string();break;case 3:P.projectId=S.string();break;default:S.skipType(H&7);break}}return P},fromJSON(c){return{collectionId:Z(c.collectionId)?String(c.collectionId):"",sourceId:Z(c.sourceId)?String(c.sourceId):"",projectId:Z(c.projectId)?String(c.projectId):""}},toJSON(c){const m={};return c.collectionId!==void 0&&(m.collectionId=c.collectionId),c.sourceId!==void 0&&(m.sourceId=c.sourceId),c.projectId!==void 0&&(m.projectId=c.projectId),m},fromPartial(c){var m,S,G;const P=cr();return P.collectionId=(m=c.collectionId)!==null&&m!==void 0?m:"",P.sourceId=(S=c.sourceId)!==null&&S!==void 0?S:"",P.projectId=(G=c.projectId)!==null&&G!==void 0?G:"",P}};function lr(){return{create:void 0,update:void 0,delete:void 0}}a.CollectionEvent={encode(c,m=h.Writer.create()){return c.create!==void 0&&a.CollectionCreateEvent.encode(c.create,m.uint32(10).fork()).ldelim(),c.update!==void 0&&a.CollectionUpdateEvent.encode(c.update,m.uint32(18).fork()).ldelim(),c.delete!==void 0&&a.CollectionDeleteEvent.encode(c.delete,m.uint32(26).fork()).ldelim(),m},decode(c,m){const S=c instanceof h.Reader?c:new h.Reader(c);let G=m===void 0?S.len:S.pos+m;const P=lr();for(;S.pos<G;){const H=S.uint32();switch(H>>>3){case 1:P.create=a.CollectionCreateEvent.decode(S,S.uint32());break;case 2:P.update=a.CollectionUpdateEvent.decode(S,S.uint32());break;case 3:P.delete=a.CollectionDeleteEvent.decode(S,S.uint32());break;default:S.skipType(H&7);break}}return P},fromJSON(c){return{create:Z(c.create)?a.CollectionCreateEvent.fromJSON(c.create):void 0,update:Z(c.update)?a.CollectionUpdateEvent.fromJSON(c.update):void 0,delete:Z(c.delete)?a.CollectionDeleteEvent.fromJSON(c.delete):void 0}},toJSON(c){const m={};return c.create!==void 0&&(m.create=c.create?a.CollectionCreateEvent.toJSON(c.create):void 0),c.update!==void 0&&(m.update=c.update?a.CollectionUpdateEvent.toJSON(c.update):void 0),c.delete!==void 0&&(m.delete=c.delete?a.CollectionDeleteEvent.toJSON(c.delete):void 0),m},fromPartial(c){const m=lr();return m.create=c.create!==void 0&&c.create!==null?a.CollectionCreateEvent.fromPartial(c.create):void 0,m.update=c.update!==void 0&&c.update!==null?a.CollectionUpdateEvent.fromPartial(c.update):void 0,m.delete=c.delete!==void 0&&c.delete!==null?a.CollectionDeleteEvent.fromPartial(c.delete):void 0,m}};function fr(){return{create:void 0,update:void 0,delete:void 0,state:void 0}}a.DestinationEvent={encode(c,m=h.Writer.create()){return c.create!==void 0&&a.DestinationCreateEvent.encode(c.create,m.uint32(10).fork()).ldelim(),c.update!==void 0&&a.DestinationUpdateEvent.encode(c.update,m.uint32(18).fork()).ldelim(),c.delete!==void 0&&a.DestinationDeleteEvent.encode(c.delete,m.uint32(26).fork()).ldelim(),c.state!==void 0&&a.DestinationStateEvent.encode(c.state,m.uint32(34).fork()).ldelim(),m},decode(c,m){const S=c instanceof h.Reader?c:new h.Reader(c);let G=m===void 0?S.len:S.pos+m;const P=fr();for(;S.pos<G;){const H=S.uint32();switch(H>>>3){case 1:P.create=a.DestinationCreateEvent.decode(S,S.uint32());break;case 2:P.update=a.DestinationUpdateEvent.decode(S,S.uint32());break;case 3:P.delete=a.DestinationDeleteEvent.decode(S,S.uint32());break;case 4:P.state=a.DestinationStateEvent.decode(S,S.uint32());break;default:S.skipType(H&7);break}}return P},fromJSON(c){return{create:Z(c.create)?a.DestinationCreateEvent.fromJSON(c.create):void 0,update:Z(c.update)?a.DestinationUpdateEvent.fromJSON(c.update):void 0,delete:Z(c.delete)?a.DestinationDeleteEvent.fromJSON(c.delete):void 0,state:Z(c.state)?a.DestinationStateEvent.fromJSON(c.state):void 0}},toJSON(c){const m={};return c.create!==void 0&&(m.create=c.create?a.DestinationCreateEvent.toJSON(c.create):void 0),c.update!==void 0&&(m.update=c.update?a.DestinationUpdateEvent.toJSON(c.update):void 0),c.delete!==void 0&&(m.delete=c.delete?a.DestinationDeleteEvent.toJSON(c.delete):void 0),c.state!==void 0&&(m.state=c.state?a.DestinationStateEvent.toJSON(c.state):void 0),m},fromPartial(c){const m=fr();return m.create=c.create!==void 0&&c.create!==null?a.DestinationCreateEvent.fromPartial(c.create):void 0,m.update=c.update!==void 0&&c.update!==null?a.DestinationUpdateEvent.fromPartial(c.update):void 0,m.delete=c.delete!==void 0&&c.delete!==null?a.DestinationDeleteEvent.fromPartial(c.delete):void 0,m.state=c.state!==void 0&&c.state!==null?a.DestinationStateEvent.fromPartial(c.state):void 0,m}};function pr(){return{create:void 0,update:void 0,delete:void 0,state:void 0}}a.ProjectEvent={encode(c,m=h.Writer.create()){return c.create!==void 0&&a.ProjectCreateEvent.encode(c.create,m.uint32(10).fork()).ldelim(),c.update!==void 0&&a.ProjectUpdateEvent.encode(c.update,m.uint32(18).fork()).ldelim(),c.delete!==void 0&&a.ProjectDeleteEvent.encode(c.delete,m.uint32(26).fork()).ldelim(),c.state!==void 0&&a.ProjectBroadcastStateEvent.encode(c.state,m.uint32(34).fork()).ldelim(),m},decode(c,m){const S=c instanceof h.Reader?c:new h.Reader(c);let G=m===void 0?S.len:S.pos+m;const P=pr();for(;S.pos<G;){const H=S.uint32();switch(H>>>3){case 1:P.create=a.ProjectCreateEvent.decode(S,S.uint32());break;case 2:P.update=a.ProjectUpdateEvent.decode(S,S.uint32());break;case 3:P.delete=a.ProjectDeleteEvent.decode(S,S.uint32());break;case 4:P.state=a.ProjectBroadcastStateEvent.decode(S,S.uint32());break;default:S.skipType(H&7);break}}return P},fromJSON(c){return{create:Z(c.create)?a.ProjectCreateEvent.fromJSON(c.create):void 0,update:Z(c.update)?a.ProjectUpdateEvent.fromJSON(c.update):void 0,delete:Z(c.delete)?a.ProjectDeleteEvent.fromJSON(c.delete):void 0,state:Z(c.state)?a.ProjectBroadcastStateEvent.fromJSON(c.state):void 0}},toJSON(c){const m={};return c.create!==void 0&&(m.create=c.create?a.ProjectCreateEvent.toJSON(c.create):void 0),c.update!==void 0&&(m.update=c.update?a.ProjectUpdateEvent.toJSON(c.update):void 0),c.delete!==void 0&&(m.delete=c.delete?a.ProjectDeleteEvent.toJSON(c.delete):void 0),c.state!==void 0&&(m.state=c.state?a.ProjectBroadcastStateEvent.toJSON(c.state):void 0),m},fromPartial(c){const m=pr();return m.create=c.create!==void 0&&c.create!==null?a.ProjectCreateEvent.fromPartial(c.create):void 0,m.update=c.update!==void 0&&c.update!==null?a.ProjectUpdateEvent.fromPartial(c.update):void 0,m.delete=c.delete!==void 0&&c.delete!==null?a.ProjectDeleteEvent.fromPartial(c.delete):void 0,m.state=c.state!==void 0&&c.state!==null?a.ProjectBroadcastStateEvent.fromPartial(c.state):void 0,m}};function hr(){return{create:void 0,update:void 0,delete:void 0,add:void 0,remove:void 0}}a.SourceEvent={encode(c,m=h.Writer.create()){return c.create!==void 0&&a.SourceCreateEvent.encode(c.create,m.uint32(10).fork()).ldelim(),c.update!==void 0&&a.SourceUpdateEvent.encode(c.update,m.uint32(18).fork()).ldelim(),c.delete!==void 0&&a.SourceDeleteEvent.encode(c.delete,m.uint32(26).fork()).ldelim(),c.add!==void 0&&a.SourceAddEvent.encode(c.add,m.uint32(34).fork()).ldelim(),c.remove!==void 0&&a.SourceDeleteEvent.encode(c.remove,m.uint32(42).fork()).ldelim(),m},decode(c,m){const S=c instanceof h.Reader?c:new h.Reader(c);let G=m===void 0?S.len:S.pos+m;const P=hr();for(;S.pos<G;){const H=S.uint32();switch(H>>>3){case 1:P.create=a.SourceCreateEvent.decode(S,S.uint32());break;case 2:P.update=a.SourceUpdateEvent.decode(S,S.uint32());break;case 3:P.delete=a.SourceDeleteEvent.decode(S,S.uint32());break;case 4:P.add=a.SourceAddEvent.decode(S,S.uint32());break;case 5:P.remove=a.SourceDeleteEvent.decode(S,S.uint32());break;default:S.skipType(H&7);break}}return P},fromJSON(c){return{create:Z(c.create)?a.SourceCreateEvent.fromJSON(c.create):void 0,update:Z(c.update)?a.SourceUpdateEvent.fromJSON(c.update):void 0,delete:Z(c.delete)?a.SourceDeleteEvent.fromJSON(c.delete):void 0,add:Z(c.add)?a.SourceAddEvent.fromJSON(c.add):void 0,remove:Z(c.remove)?a.SourceDeleteEvent.fromJSON(c.remove):void 0}},toJSON(c){const m={};return c.create!==void 0&&(m.create=c.create?a.SourceCreateEvent.toJSON(c.create):void 0),c.update!==void 0&&(m.update=c.update?a.SourceUpdateEvent.toJSON(c.update):void 0),c.delete!==void 0&&(m.delete=c.delete?a.SourceDeleteEvent.toJSON(c.delete):void 0),c.add!==void 0&&(m.add=c.add?a.SourceAddEvent.toJSON(c.add):void 0),c.remove!==void 0&&(m.remove=c.remove?a.SourceDeleteEvent.toJSON(c.remove):void 0),m},fromPartial(c){const m=hr();return m.create=c.create!==void 0&&c.create!==null?a.SourceCreateEvent.fromPartial(c.create):void 0,m.update=c.update!==void 0&&c.update!==null?a.SourceUpdateEvent.fromPartial(c.update):void 0,m.delete=c.delete!==void 0&&c.delete!==null?a.SourceDeleteEvent.fromPartial(c.delete):void 0,m.add=c.add!==void 0&&c.add!==null?a.SourceAddEvent.fromPartial(c.add):void 0,m.remove=c.remove!==void 0&&c.remove!==null?a.SourceDeleteEvent.fromPartial(c.remove):void 0,m}};function mr(){return{collection:void 0,destination:void 0,project:void 0,source:void 0,unspecified:void 0}}a.LiveEvent={encode(c,m=h.Writer.create()){return c.collection!==void 0&&a.CollectionEvent.encode(c.collection,m.uint32(10).fork()).ldelim(),c.destination!==void 0&&a.DestinationEvent.encode(c.destination,m.uint32(18).fork()).ldelim(),c.project!==void 0&&a.ProjectEvent.encode(c.project,m.uint32(26).fork()).ldelim(),c.source!==void 0&&a.SourceEvent.encode(c.source,m.uint32(34).fork()).ldelim(),c.unspecified!==void 0&&m.uint32(40).int32((0,_.nullValueToNumber)(c.unspecified)),m},decode(c,m){const S=c instanceof h.Reader?c:new h.Reader(c);let G=m===void 0?S.len:S.pos+m;const P=mr();for(;S.pos<G;){const H=S.uint32();switch(H>>>3){case 1:P.collection=a.CollectionEvent.decode(S,S.uint32());break;case 2:P.destination=a.DestinationEvent.decode(S,S.uint32());break;case 3:P.project=a.ProjectEvent.decode(S,S.uint32());break;case 4:P.source=a.SourceEvent.decode(S,S.uint32());break;case 5:P.unspecified=(0,_.nullValueFromJSON)(S.int32());break;default:S.skipType(H&7);break}}return P},fromJSON(c){return{collection:Z(c.collection)?a.CollectionEvent.fromJSON(c.collection):void 0,destination:Z(c.destination)?a.DestinationEvent.fromJSON(c.destination):void 0,project:Z(c.project)?a.ProjectEvent.fromJSON(c.project):void 0,source:Z(c.source)?a.SourceEvent.fromJSON(c.source):void 0,unspecified:Z(c.unspecified)?(0,_.nullValueFromJSON)(c.unspecified):void 0}},toJSON(c){const m={};return c.collection!==void 0&&(m.collection=c.collection?a.CollectionEvent.toJSON(c.collection):void 0),c.destination!==void 0&&(m.destination=c.destination?a.DestinationEvent.toJSON(c.destination):void 0),c.project!==void 0&&(m.project=c.project?a.ProjectEvent.toJSON(c.project):void 0),c.source!==void 0&&(m.source=c.source?a.SourceEvent.toJSON(c.source):void 0),c.unspecified!==void 0&&(m.unspecified=c.unspecified!==void 0?(0,_.nullValueToJSON)(c.unspecified):void 0),m},fromPartial(c){var m;const S=mr();return S.collection=c.collection!==void 0&&c.collection!==null?a.CollectionEvent.fromPartial(c.collection):void 0,S.destination=c.destination!==void 0&&c.destination!==null?a.DestinationEvent.fromPartial(c.destination):void 0,S.project=c.project!==void 0&&c.project!==null?a.ProjectEvent.fromPartial(c.project):void 0,S.source=c.source!==void 0&&c.source!==null?a.SourceEvent.fromPartial(c.source):void 0,S.unspecified=(m=c.unspecified)!==null&&m!==void 0?m:void 0,S}};class Sr{constructor(m){this.rpc=m,this.CreateCollection=this.CreateCollection.bind(this),this.GetCollection=this.GetCollection.bind(this),this.GetCollections=this.GetCollections.bind(this),this.UpdateCollection=this.UpdateCollection.bind(this),this.DeleteCollection=this.DeleteCollection.bind(this)}CreateCollection(m){const S=a.CreateCollectionRequest.encode(m).finish();return this.rpc.request("live.v21.CollectionService","CreateCollection",S).then(P=>a.CreateCollectionResponse.decode(new h.Reader(P)))}GetCollection(m){const S=a.GetCollectionRequest.encode(m).finish();return this.rpc.request("live.v21.CollectionService","GetCollection",S).then(P=>a.GetCollectionResponse.decode(new h.Reader(P)))}GetCollections(m){const S=a.GetCollectionsRequest.encode(m).finish();return this.rpc.request("live.v21.CollectionService","GetCollections",S).then(P=>a.GetCollectionsResponse.decode(new h.Reader(P)))}UpdateCollection(m){const S=a.UpdateCollectionRequest.encode(m).finish();return this.rpc.request("live.v21.CollectionService","UpdateCollection",S).then(P=>a.UpdateCollectionResponse.decode(new h.Reader(P)))}DeleteCollection(m){const S=a.DeleteCollectionRequest.encode(m).finish();return this.rpc.request("live.v21.CollectionService","DeleteCollection",S).then(P=>a.DeleteCollectionResponse.decode(new h.Reader(P)))}}a.CollectionServiceClientImpl=Sr,a.CollectionServiceDefinition={name:"CollectionService",fullName:"live.v21.CollectionService",methods:{createCollection:{name:"CreateCollection",requestType:a.CreateCollectionRequest,requestStream:!1,responseType:a.CreateCollectionResponse,responseStream:!1,options:{}},getCollection:{name:"GetCollection",requestType:a.GetCollectionRequest,requestStream:!1,responseType:a.GetCollectionResponse,responseStream:!1,options:{}},getCollections:{name:"GetCollections",requestType:a.GetCollectionsRequest,requestStream:!1,responseType:a.GetCollectionsResponse,responseStream:!1,options:{}},updateCollection:{name:"UpdateCollection",requestType:a.UpdateCollectionRequest,requestStream:!1,responseType:a.UpdateCollectionResponse,responseStream:!1,options:{}},deleteCollection:{name:"DeleteCollection",requestType:a.DeleteCollectionRequest,requestStream:!1,responseType:a.DeleteCollectionResponse,responseStream:!1,options:{}}}};class yr{constructor(m){this.rpc=m,this.CreateProject=this.CreateProject.bind(this),this.GetProject=this.GetProject.bind(this),this.DeleteProject=this.DeleteProject.bind(this),this.UpdateProject=this.UpdateProject.bind(this),this.StartProjectBroadcast=this.StartProjectBroadcast.bind(this),this.StopProjectBroadcast=this.StopProjectBroadcast.bind(this),this.StartProjectWebRtc=this.StartProjectWebRtc.bind(this),this.StopProjectWebRtc=this.StopProjectWebRtc.bind(this),this.GetProjectBroadcastSnapshot=this.GetProjectBroadcastSnapshot.bind(this),this.GetProjectBroadcastStatus=this.GetProjectBroadcastStatus.bind(this)}CreateProject(m){const S=a.CreateProjectRequest.encode(m).finish();return this.rpc.request("live.v21.ProjectService","CreateProject",S).then(P=>a.CreateProjectResponse.decode(new h.Reader(P)))}GetProject(m){const S=a.GetProjectRequest.encode(m).finish();return this.rpc.request("live.v21.ProjectService","GetProject",S).then(P=>a.GetProjectResponse.decode(new h.Reader(P)))}DeleteProject(m){const S=a.DeleteProjectRequest.encode(m).finish();return this.rpc.request("live.v21.ProjectService","DeleteProject",S).then(P=>a.DeleteProjectResponse.decode(new h.Reader(P)))}UpdateProject(m){const S=a.UpdateProjectRequest.encode(m).finish();return this.rpc.request("live.v21.ProjectService","UpdateProject",S).then(P=>a.UpdateProjectResponse.decode(new h.Reader(P)))}StartProjectBroadcast(m){const S=a.StartProjectBroadcastRequest.encode(m).finish();return this.rpc.request("live.v21.ProjectService","StartProjectBroadcast",S).then(P=>a.StartProjectBroadcastResponse.decode(new h.Reader(P)))}StopProjectBroadcast(m){const S=a.StopProjectBroadcastRequest.encode(m).finish();return this.rpc.request("live.v21.ProjectService","StopProjectBroadcast",S).then(P=>a.StopProjectBroadcastResponse.decode(new h.Reader(P)))}StartProjectWebRtc(m){const S=a.StartProjectWebRtcRequest.encode(m).finish();return this.rpc.request("live.v21.ProjectService","StartProjectWebRtc",S).then(P=>a.StartProjectWebRtcResponse.decode(new h.Reader(P)))}StopProjectWebRtc(m){const S=a.StopProjectWebRtcRequest.encode(m).finish();return this.rpc.request("live.v21.ProjectService","StopProjectWebRtc",S).then(P=>a.StopProjectWebRtcResponse.decode(new h.Reader(P)))}GetProjectBroadcastSnapshot(m){const S=a.GetProjectBroadcastSnapshotRequest.encode(m).finish();return this.rpc.request("live.v21.ProjectService","GetProjectBroadcastSnapshot",S).then(P=>a.GetProjectBroadcastSnapshotResponse.decode(new h.Reader(P)))}GetProjectBroadcastStatus(m){const S=a.GetProjectBroadcastStatusRequest.encode(m).finish();return this.rpc.request("live.v21.ProjectService","GetProjectBroadcastStatus",S).then(P=>a.GetProjectBroadcastStatusResponse.decode(new h.Reader(P)))}}a.ProjectServiceClientImpl=yr,a.ProjectServiceDefinition={name:"ProjectService",fullName:"live.v21.ProjectService",methods:{createProject:{name:"CreateProject",requestType:a.CreateProjectRequest,requestStream:!1,responseType:a.CreateProjectResponse,responseStream:!1,options:{}},getProject:{name:"GetProject",requestType:a.GetProjectRequest,requestStream:!1,responseType:a.GetProjectResponse,responseStream:!1,options:{}},deleteProject:{name:"DeleteProject",requestType:a.DeleteProjectRequest,requestStream:!1,responseType:a.DeleteProjectResponse,responseStream:!1,options:{}},updateProject:{name:"UpdateProject",requestType:a.UpdateProjectRequest,requestStream:!1,responseType:a.UpdateProjectResponse,responseStream:!1,options:{}},startProjectBroadcast:{name:"StartProjectBroadcast",requestType:a.StartProjectBroadcastRequest,requestStream:!1,responseType:a.StartProjectBroadcastResponse,responseStream:!1,options:{}},stopProjectBroadcast:{name:"StopProjectBroadcast",requestType:a.StopProjectBroadcastRequest,requestStream:!1,responseType:a.StopProjectBroadcastResponse,responseStream:!1,options:{}},startProjectWebRtc:{name:"StartProjectWebRtc",requestType:a.StartProjectWebRtcRequest,requestStream:!1,responseType:a.StartProjectWebRtcResponse,responseStream:!1,options:{}},stopProjectWebRtc:{name:"StopProjectWebRtc",requestType:a.StopProjectWebRtcRequest,requestStream:!1,responseType:a.StopProjectWebRtcResponse,responseStream:!1,options:{}},getProjectBroadcastSnapshot:{name:"GetProjectBroadcastSnapshot",requestType:a.GetProjectBroadcastSnapshotRequest,requestStream:!1,responseType:a.GetProjectBroadcastSnapshotResponse,responseStream:!1,options:{}},getProjectBroadcastStatus:{name:"GetProjectBroadcastStatus",requestType:a.GetProjectBroadcastStatusRequest,requestStream:!1,responseType:a.GetProjectBroadcastStatusResponse,responseStream:!1,options:{}}}};class br{constructor(m){this.rpc=m,this.CreateDestination=this.CreateDestination.bind(this),this.GetDestination=this.GetDestination.bind(this),this.UpdateDestination=this.UpdateDestination.bind(this),this.DeleteDestination=this.DeleteDestination.bind(this)}CreateDestination(m){const S=a.CreateDestinationRequest.encode(m).finish();return this.rpc.request("live.v21.DestinationService","CreateDestination",S).then(P=>a.CreateDestinationResponse.decode(new h.Reader(P)))}GetDestination(m){const S=a.GetDestinationRequest.encode(m).finish();return this.rpc.request("live.v21.DestinationService","GetDestination",S).then(P=>a.GetDestinationResponse.decode(new h.Reader(P)))}UpdateDestination(m){const S=a.UpdateDestinationRequest.encode(m).finish();return this.rpc.request("live.v21.DestinationService","UpdateDestination",S).then(P=>a.UpdateDestinationResponse.decode(new h.Reader(P)))}DeleteDestination(m){const S=a.DeleteDestinationRequest.encode(m).finish();return this.rpc.request("live.v21.DestinationService","DeleteDestination",S).then(P=>a.DeleteDestinationResponse.decode(new h.Reader(P)))}}a.DestinationServiceClientImpl=br,a.DestinationServiceDefinition={name:"DestinationService",fullName:"live.v21.DestinationService",methods:{createDestination:{name:"CreateDestination",requestType:a.CreateDestinationRequest,requestStream:!1,responseType:a.CreateDestinationResponse,responseStream:!1,options:{}},getDestination:{name:"GetDestination",requestType:a.GetDestinationRequest,requestStream:!1,responseType:a.GetDestinationResponse,responseStream:!1,options:{}},updateDestination:{name:"UpdateDestination",requestType:a.UpdateDestinationRequest,requestStream:!1,responseType:a.UpdateDestinationResponse,responseStream:!1,options:{}},deleteDestination:{name:"DeleteDestination",requestType:a.DeleteDestinationRequest,requestStream:!1,responseType:a.DeleteDestinationResponse,responseStream:!1,options:{}}}};class gr{constructor(m){this.rpc=m,this.CreateSource=this.CreateSource.bind(this),this.DeleteSource=this.DeleteSource.bind(this),this.UpdateSource=this.UpdateSource.bind(this),this.UpdateSourceInProject=this.UpdateSourceInProject.bind(this),this.GetSource=this.GetSource.bind(this),this.GetSources=this.GetSources.bind(this),this.AddSourceToProject=this.AddSourceToProject.bind(this),this.RemoveSourceFromProject=this.RemoveSourceFromProject.bind(this)}CreateSource(m){const S=a.CreateSourceRequest.encode(m).finish();return this.rpc.request("live.v21.SourceService","CreateSource",S).then(P=>a.CreateSourceResponse.decode(new h.Reader(P)))}DeleteSource(m){const S=a.DeleteSourceRequest.encode(m).finish();return this.rpc.request("live.v21.SourceService","DeleteSource",S).then(P=>a.DeleteSourceResponse.decode(new h.Reader(P)))}UpdateSource(m){const S=a.UpdateSourceRequest.encode(m).finish();return this.rpc.request("live.v21.SourceService","UpdateSource",S).then(P=>a.UpdateSourceResponse.decode(new h.Reader(P)))}UpdateSourceInProject(m){const S=a.UpdateSourceInProjectRequest.encode(m).finish();return this.rpc.request("live.v21.SourceService","UpdateSourceInProject",S).then(P=>a.UpdateSourceInProjectResponse.decode(new h.Reader(P)))}GetSource(m){const S=a.GetSourceRequest.encode(m).finish();return this.rpc.request("live.v21.SourceService","GetSource",S).then(P=>a.GetSourceResponse.decode(new h.Reader(P)))}GetSources(m){const S=a.GetSourcesRequest.encode(m).finish();return this.rpc.request("live.v21.SourceService","GetSources",S).then(P=>a.GetSourcesResponse.decode(new h.Reader(P)))}AddSourceToProject(m){const S=a.AddSourceToProjectRequest.encode(m).finish();return this.rpc.request("live.v21.SourceService","AddSourceToProject",S).then(P=>a.AddSourceToProjectResponse.decode(new h.Reader(P)))}RemoveSourceFromProject(m){const S=a.RemoveSourceFromProjectRequest.encode(m).finish();return this.rpc.request("live.v21.SourceService","RemoveSourceFromProject",S).then(P=>a.RemoveSourceFromProjectResponse.decode(new h.Reader(P)))}}a.SourceServiceClientImpl=gr,a.SourceServiceDefinition={name:"SourceService",fullName:"live.v21.SourceService",methods:{createSource:{name:"CreateSource",requestType:a.CreateSourceRequest,requestStream:!1,responseType:a.CreateSourceResponse,responseStream:!1,options:{}},deleteSource:{name:"DeleteSource",requestType:a.DeleteSourceRequest,requestStream:!1,responseType:a.DeleteSourceResponse,responseStream:!1,options:{}},updateSource:{name:"UpdateSource",requestType:a.UpdateSourceRequest,requestStream:!1,responseType:a.UpdateSourceResponse,responseStream:!1,options:{}},updateSourceInProject:{name:"UpdateSourceInProject",requestType:a.UpdateSourceInProjectRequest,requestStream:!1,responseType:a.UpdateSourceInProjectResponse,responseStream:!1,options:{}},getSource:{name:"GetSource",requestType:a.GetSourceRequest,requestStream:!1,responseType:a.GetSourceResponse,responseStream:!1,options:{}},getSources:{name:"GetSources",requestType:a.GetSourcesRequest,requestStream:!1,responseType:a.GetSourcesResponse,responseStream:!1,options:{}},addSourceToProject:{name:"AddSourceToProject",requestType:a.AddSourceToProjectRequest,requestStream:!1,responseType:a.AddSourceToProjectResponse,responseStream:!1,options:{}},removeSourceFromProject:{name:"RemoveSourceFromProject",requestType:a.RemoveSourceFromProjectRequest,requestStream:!1,responseType:a.RemoveSourceFromProjectResponse,responseStream:!1,options:{}}}};class _r{constructor(m){this.rpc=m,this.CreateAccessToken=this.CreateAccessToken.bind(this)}CreateAccessToken(m){const S=a.CreateAccessTokenRequest.encode(m).finish();return this.rpc.request("live.v21.BackendAuthenticationService","CreateAccessToken",S).then(P=>a.CreateAccessTokenResponse.decode(new h.Reader(P)))}}a.BackendAuthenticationServiceClientImpl=_r,a.BackendAuthenticationServiceDefinition={name:"BackendAuthenticationService",fullName:"live.v21.BackendAuthenticationService",methods:{createAccessToken:{name:"CreateAccessToken",requestType:a.CreateAccessTokenRequest,requestStream:!1,responseType:a.CreateAccessTokenResponse,responseStream:!1,options:{}}}};class Er{constructor(m){this.rpc=m,this.CreateGuestAccessToken=this.CreateGuestAccessToken.bind(this),this.RefreshAccessToken=this.RefreshAccessToken.bind(this),this.CreateWebRtcAccessToken=this.CreateWebRtcAccessToken.bind(this)}CreateGuestAccessToken(m){const S=a.CreateGuestAccessTokenRequest.encode(m).finish();return this.rpc.request("live.v21.AuthenticationService","CreateGuestAccessToken",S).then(P=>a.CreateGuestAccessTokenResponse.decode(new h.Reader(P)))}RefreshAccessToken(m){const S=a.RefreshAccessTokenRequest.encode(m).finish();return this.rpc.request("live.v21.AuthenticationService","RefreshAccessToken",S).then(P=>a.RefreshAccessTokenResponse.decode(new h.Reader(P)))}CreateWebRtcAccessToken(m){const S=a.CreateWebRtcAccessTokenRequest.encode(m).finish();return this.rpc.request("live.v21.AuthenticationService","CreateWebRtcAccessToken",S).then(P=>a.CreateWebRtcAccessTokenResponse.decode(new h.Reader(P)))}}a.AuthenticationServiceClientImpl=Er,a.AuthenticationServiceDefinition={name:"AuthenticationService",fullName:"live.v21.AuthenticationService",methods:{createGuestAccessToken:{name:"CreateGuestAccessToken",requestType:a.CreateGuestAccessTokenRequest,requestStream:!1,responseType:a.CreateGuestAccessTokenResponse,responseStream:!1,options:{}},refreshAccessToken:{name:"RefreshAccessToken",requestType:a.RefreshAccessTokenRequest,requestStream:!1,responseType:a.RefreshAccessTokenResponse,responseStream:!1,options:{}},createWebRtcAccessToken:{name:"CreateWebRtcAccessToken",requestType:a.CreateWebRtcAccessTokenRequest,requestStream:!1,responseType:a.CreateWebRtcAccessTokenResponse,responseStream:!1,options:{}}}};class Tr{constructor(m){this.rpc=m,this.GetJsonWebKeySet=this.GetJsonWebKeySet.bind(this),this.GetTestToken=this.GetTestToken.bind(this),this.GuestCodeRedirect=this.GuestCodeRedirect.bind(this),this.CreateDemoAccessToken=this.CreateDemoAccessToken.bind(this)}GetJsonWebKeySet(m){const S=a.GetJsonWebKeySetRequest.encode(m).finish();return this.rpc.request("live.v21.PublicAuthenticationService","GetJsonWebKeySet",S).then(P=>a.GetJsonWebKeySetResponse.decode(new h.Reader(P)))}GetTestToken(m){const S=a.GetTestTokenRequest.encode(m).finish();return this.rpc.request("live.v21.PublicAuthenticationService","GetTestToken",S).then(P=>a.GetTestTokenResponse.decode(new h.Reader(P)))}GuestCodeRedirect(m){const S=a.GuestCodeRedirectRequest.encode(m).finish();return this.rpc.request("live.v21.PublicAuthenticationService","GuestCodeRedirect",S).then(P=>a.GuestCodeRedirectResponse.decode(new h.Reader(P)))}CreateDemoAccessToken(m){const S=a.CreateDemoAccessTokenRequest.encode(m).finish();return this.rpc.request("live.v21.PublicAuthenticationService","CreateDemoAccessToken",S).then(P=>a.CreateDemoAccessTokenResponse.decode(new h.Reader(P)))}}a.PublicAuthenticationServiceClientImpl=Tr,a.PublicAuthenticationServiceDefinition={name:"PublicAuthenticationService",fullName:"live.v21.PublicAuthenticationService",methods:{getJsonWebKeySet:{name:"GetJsonWebKeySet",requestType:a.GetJsonWebKeySetRequest,requestStream:!1,responseType:a.GetJsonWebKeySetResponse,responseStream:!1,options:{}},getTestToken:{name:"GetTestToken",requestType:a.GetTestTokenRequest,requestStream:!1,responseType:a.GetTestTokenResponse,responseStream:!1,options:{}},guestCodeRedirect:{name:"GuestCodeRedirect",requestType:a.GuestCodeRedirectRequest,requestStream:!1,responseType:a.GuestCodeRedirectResponse,responseStream:!1,options:{}},createDemoAccessToken:{name:"CreateDemoAccessToken",requestType:a.CreateDemoAccessTokenRequest,requestStream:!1,responseType:a.CreateDemoAccessTokenResponse,responseStream:!1,options:{}}}};var Je=(()=>{if(typeof Je!="undefined")return Je;if(typeof self!="undefined")return self;if(typeof window!="undefined")return window;if(typeof commonjsGlobal!="undefined")return commonjsGlobal;throw"Unable to locate global object"})();const Ir=Je.atob||(c=>Je.Buffer.from(c,"base64").toString("binary"));function kr(c){const m=Ir(c),S=new Uint8Array(m.length);for(let G=0;G<m.length;++G)S[G]=m.charCodeAt(G);return S}const Or=Je.btoa||(c=>Je.Buffer.from(c,"binary").toString("base64"));function Rr(c){const m=[];for(const S of c)m.push(String.fromCharCode(S));return Or(m.join(""))}function it(c){const m=new Date(c),S=m.getTime()/1e3,G=m.getTime()%1e3*1e6;return{seconds:S,nanos:G}}function ot(c){let m=c.seconds*1e3;return m+=c.nanos/1e6,new Date(m).toISOString()}h.util.Long!==p.default&&(h.util.Long=p.default,h.configure());function Z(c){return c!=null}}(api$1),function(a){var s=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(w,C,D,V){V===void 0&&(V=D);var J=Object.getOwnPropertyDescriptor(C,D);(!J||("get"in J?!C.__esModule:J.writable||J.configurable))&&(J={enumerable:!0,get:function(){return C[D]}}),Object.defineProperty(w,V,J)}:function(w,C,D,V){V===void 0&&(V=D),w[V]=C[D]}),u=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(w,C){Object.defineProperty(w,"default",{enumerable:!0,value:C})}:function(w,C){w.default=C}),d=commonjsGlobal&&commonjsGlobal.__decorate||function(w,C,D,V){var J=arguments.length,W=J<3?C:V===null?V=Object.getOwnPropertyDescriptor(C,D):V,g;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")W=Reflect.decorate(w,C,D,V);else for(var O=w.length-1;O>=0;O--)(g=w[O])&&(W=(J<3?g(W):J>3?g(C,D,W):g(C,D))||W);return J>3&&W&&Object.defineProperty(C,D,W),W},l=commonjsGlobal&&commonjsGlobal.__importStar||function(w){if(w&&w.__esModule)return w;var C={};if(w!=null)for(var D in w)D!=="default"&&Object.prototype.hasOwnProperty.call(w,D)&&s(C,w,D);return u(C,w),C},p=commonjsGlobal&&commonjsGlobal.__metadata||function(w,C){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(w,C)};Object.defineProperty(a,"__esModule",{value:!0}),a.LiveApi=void 0;const h=l(lib$1),y=api$2,_=l(api$1),E=decorator,I="LiveApi";class N extends y.ApiClient{constructor(C,D,V,J,W,g){super(C,V,g,I),this.handlers={},this.eventApi=D,this.accessTokenRefreshCallback=J,this.publicAuthentication=this.clientFactory.create(_.PublicAuthenticationServiceDefinition,this.channel),W!=null&&(this.backendAuthentication=this.clientFactory.create(_.BackendAuthenticationServiceDefinition,this.channel,{"*":{metadata:h.Metadata({"X-Api-Key":W})}})),this.eventApi.on("event",{name:`${N.LIVEAPI_EVENT_PREFIX}:*`,ignoreSessionEvents:!0,allowedSessionEvents:[`${N.LIVEAPI_EVENT_PREFIX}:EVENT_TYPE_PROJECT:EVENT_SUB_TYPE_STATE`]},this.eventCallback.bind(this))}on(C,D){var V;this.handlers[C]=(V=this.handlers[C])!==null&&V!==void 0?V:[],this.handlers[C].push(D)}off(C,D){this.handlers[C]=this.handlers[C].filter(V=>V!==D)}emitToHandlers(C,D,V){var J;for(const W of(J=this.handlers[C])!==null&&J!==void 0?J:[])W(Object.values(V).find(g=>!!g),D)}async subscribeToCollection(C){await this.eventApi.subscribe(`${N.LIVEAPI_EVENT_PREFIX}:*`,{target:{collectionId:C}})}async unsubscribeFromCollection(C){await this.eventApi.unsubscribe(`${N.LIVEAPI_EVENT_PREFIX}:*`,{target:{collectionId:C}})}async subscribeToProject(C,D){await this.eventApi.subscribe(`${N.LIVEAPI_EVENT_PREFIX}:*`,{target:{collectionId:C,projectId:D}})}async unsubscribeFromProject(C,D){await this.eventApi.unsubscribe(`${N.LIVEAPI_EVENT_PREFIX}:*`,{target:{collectionId:C,projectId:D}})}eventCallback(C){let D=C.name.split(":"),V=_.eventTypeFromJSON(D[1]),J=_.eventSubTypeFromJSON(D[2]);this.log.info("processing event: "+V+"/"+J),N.liveApiEventMap[V]&&this.emitToHandlers(V,J,C.payload)}_setup(C){let D=this;C.onHeader=function(V){let J=V.get("Authorization");if(J!=null){const W=J.split(" ");if(W.length==2&&W[0]=="Bearer"){let g=W[1];D.accessTokenRefreshCallback(g)}}},this.collection=this.clientFactory.create(_.CollectionServiceDefinition,this.channel,{"*":C}),this.project=this.clientFactory.create(_.ProjectServiceDefinition,this.channel,{"*":C}),this.source=this.clientFactory.create(_.SourceServiceDefinition,this.channel,{"*":C}),this.destination=this.clientFactory.create(_.DestinationServiceDefinition,this.channel,{"*":C}),this.authentication=this.clientFactory.create(_.AuthenticationServiceDefinition,this.channel,{"*":C})}}N.LIVEAPI_EVENT_PREFIX="vapi",d([(0,E.RequiresSdkAuthentication)(),p("design:type",Object)],N.prototype,"collection",void 0),d([(0,E.RequiresSdkAuthentication)(),p("design:type",Object)],N.prototype,"project",void 0),d([(0,E.RequiresSdkAuthentication)(),p("design:type",Object)],N.prototype,"source",void 0),d([(0,E.RequiresSdkAuthentication)(),p("design:type",Object)],N.prototype,"destination",void 0),d([(0,E.RequiresSdkAuthentication)(),p("design:type",Object)],N.prototype,"authentication",void 0),a.LiveApi=N,function(w){w.liveApiEventMap={[_.EventType.EVENT_TYPE_COLLECTION]:"collection",[_.EventType.EVENT_TYPE_PROJECT]:"project",[_.EventType.EVENT_TYPE_SOURCE]:"source",[_.EventType.EVENT_TYPE_DESTINATION]:"destination",[_.EventType.EVENT_TYPE_UNSPECIFIED]:"unspecified"}}(N=a.LiveApi||(a.LiveApi={}))}(liveapi);var eventapi={},dist$2={},api={};/*! *****************************************************************************
  Copyright (c) Microsoft Corporation.

  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.

  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ***************************************************************************** */var extendStatics=function(a,s){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,d){u.__proto__=d}||function(u,d){for(var l in d)d.hasOwnProperty(l)&&(u[l]=d[l])},extendStatics(a,s)};function __extends(a,s){extendStatics(a,s);function u(){this.constructor=a}a.prototype=s===null?Object.create(s):(u.prototype=s.prototype,new u)}function isFunction$1(a){return typeof a=="function"}var _enable_super_gross_mode_that_will_cause_bad_things=!1,config$1={Promise:void 0,set useDeprecatedSynchronousErrorHandling(a){if(a){var s=new Error;""+s.stack}_enable_super_gross_mode_that_will_cause_bad_things=a},get useDeprecatedSynchronousErrorHandling(){return _enable_super_gross_mode_that_will_cause_bad_things}};function hostReportError(a){setTimeout(function(){throw a},0)}var empty$2={closed:!0,next:function(a){},error:function(a){if(config$1.useDeprecatedSynchronousErrorHandling)throw a;hostReportError(a)},complete:function(){}},isArray$2=function(){return Array.isArray||function(a){return a&&typeof a.length=="number"}}();function isObject$4(a){return a!==null&&typeof a=="object"}var UnsubscriptionErrorImpl=function(){function a(s){return Error.call(this),this.message=s?s.length+` errors occurred during unsubscription:
`+s.map(function(u,d){return d+1+") "+u.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=s,this}return a.prototype=Object.create(Error.prototype),a}(),UnsubscriptionError=UnsubscriptionErrorImpl,Subscription=function(){function a(s){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,s&&(this._ctorUnsubscribe=!0,this._unsubscribe=s)}return a.prototype.unsubscribe=function(){var s;if(!this.closed){var u=this,d=u._parentOrParents,l=u._ctorUnsubscribe,p=u._unsubscribe,h=u._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,d instanceof a)d.remove(this);else if(d!==null)for(var y=0;y<d.length;++y){var _=d[y];_.remove(this)}if(isFunction$1(p)){l&&(this._unsubscribe=void 0);try{p.call(this)}catch(N){s=N instanceof UnsubscriptionError?flattenUnsubscriptionErrors(N.errors):[N]}}if(isArray$2(h))for(var y=-1,E=h.length;++y<E;){var I=h[y];if(isObject$4(I))try{I.unsubscribe()}catch(w){s=s||[],w instanceof UnsubscriptionError?s=s.concat(flattenUnsubscriptionErrors(w.errors)):s.push(w)}}if(s)throw new UnsubscriptionError(s)}},a.prototype.add=function(s){var u=s;if(!s)return a.EMPTY;switch(typeof s){case"function":u=new a(s);case"object":if(u===this||u.closed||typeof u.unsubscribe!="function")return u;if(this.closed)return u.unsubscribe(),u;if(!(u instanceof a)){var d=u;u=new a,u._subscriptions=[d]}break;default:throw new Error("unrecognized teardown "+s+" added to Subscription.")}var l=u._parentOrParents;if(l===null)u._parentOrParents=this;else if(l instanceof a){if(l===this)return u;u._parentOrParents=[l,this]}else if(l.indexOf(this)===-1)l.push(this);else return u;var p=this._subscriptions;return p===null?this._subscriptions=[u]:p.push(u),u},a.prototype.remove=function(s){var u=this._subscriptions;if(u){var d=u.indexOf(s);d!==-1&&u.splice(d,1)}},a.EMPTY=function(s){return s.closed=!0,s}(new a),a}();function flattenUnsubscriptionErrors(a){return a.reduce(function(s,u){return s.concat(u instanceof UnsubscriptionError?u.errors:u)},[])}var rxSubscriber=function(){return typeof Symbol=="function"?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()}(),Subscriber=function(a){__extends(s,a);function s(u,d,l){var p=a.call(this)||this;switch(p.syncErrorValue=null,p.syncErrorThrown=!1,p.syncErrorThrowable=!1,p.isStopped=!1,arguments.length){case 0:p.destination=empty$2;break;case 1:if(!u){p.destination=empty$2;break}if(typeof u=="object"){u instanceof s?(p.syncErrorThrowable=u.syncErrorThrowable,p.destination=u,u.add(p)):(p.syncErrorThrowable=!0,p.destination=new SafeSubscriber(p,u));break}default:p.syncErrorThrowable=!0,p.destination=new SafeSubscriber(p,u,d,l);break}return p}return s.prototype[rxSubscriber]=function(){return this},s.create=function(u,d,l){var p=new s(u,d,l);return p.syncErrorThrowable=!1,p},s.prototype.next=function(u){this.isStopped||this._next(u)},s.prototype.error=function(u){this.isStopped||(this.isStopped=!0,this._error(u))},s.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},s.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,a.prototype.unsubscribe.call(this))},s.prototype._next=function(u){this.destination.next(u)},s.prototype._error=function(u){this.destination.error(u),this.unsubscribe()},s.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},s.prototype._unsubscribeAndRecycle=function(){var u=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=u,this},s}(Subscription),SafeSubscriber=function(a){__extends(s,a);function s(u,d,l,p){var h=a.call(this)||this;h._parentSubscriber=u;var y,_=h;return isFunction$1(d)?y=d:d&&(y=d.next,l=d.error,p=d.complete,d!==empty$2&&(_=Object.create(d),isFunction$1(_.unsubscribe)&&h.add(_.unsubscribe.bind(_)),_.unsubscribe=h.unsubscribe.bind(h))),h._context=_,h._next=y,h._error=l,h._complete=p,h}return s.prototype.next=function(u){if(!this.isStopped&&this._next){var d=this._parentSubscriber;!config$1.useDeprecatedSynchronousErrorHandling||!d.syncErrorThrowable?this.__tryOrUnsub(this._next,u):this.__tryOrSetError(d,this._next,u)&&this.unsubscribe()}},s.prototype.error=function(u){if(!this.isStopped){var d=this._parentSubscriber,l=config$1.useDeprecatedSynchronousErrorHandling;if(this._error)!l||!d.syncErrorThrowable?(this.__tryOrUnsub(this._error,u),this.unsubscribe()):(this.__tryOrSetError(d,this._error,u),this.unsubscribe());else if(d.syncErrorThrowable)l?(d.syncErrorValue=u,d.syncErrorThrown=!0):hostReportError(u),this.unsubscribe();else{if(this.unsubscribe(),l)throw u;hostReportError(u)}}},s.prototype.complete=function(){var u=this;if(!this.isStopped){var d=this._parentSubscriber;if(this._complete){var l=function(){return u._complete.call(u._context)};!config$1.useDeprecatedSynchronousErrorHandling||!d.syncErrorThrowable?(this.__tryOrUnsub(l),this.unsubscribe()):(this.__tryOrSetError(d,l),this.unsubscribe())}else this.unsubscribe()}},s.prototype.__tryOrUnsub=function(u,d){try{u.call(this._context,d)}catch(l){if(this.unsubscribe(),config$1.useDeprecatedSynchronousErrorHandling)throw l;hostReportError(l)}},s.prototype.__tryOrSetError=function(u,d,l){if(!config$1.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{d.call(this._context,l)}catch(p){return config$1.useDeprecatedSynchronousErrorHandling?(u.syncErrorValue=p,u.syncErrorThrown=!0,!0):(hostReportError(p),!0)}return!1},s.prototype._unsubscribe=function(){var u=this._parentSubscriber;this._context=null,this._parentSubscriber=null,u.unsubscribe()},s}(Subscriber);function canReportError(a){for(;a;){var s=a,u=s.closed,d=s.destination,l=s.isStopped;if(u||l)return!1;d&&d instanceof Subscriber?a=d:a=null}return!0}function toSubscriber(a,s,u){if(a){if(a instanceof Subscriber)return a;if(a[rxSubscriber])return a[rxSubscriber]()}return!a&&!s&&!u?new Subscriber(empty$2):new Subscriber(a,s,u)}var observable=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function identity(a){return a}function pipe(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];return pipeFromArray(a)}function pipeFromArray(a){return a.length===0?identity:a.length===1?a[0]:function(u){return a.reduce(function(d,l){return l(d)},u)}}var Observable=function(){function a(s){this._isScalar=!1,s&&(this._subscribe=s)}return a.prototype.lift=function(s){var u=new a;return u.source=this,u.operator=s,u},a.prototype.subscribe=function(s,u,d){var l=this.operator,p=toSubscriber(s,u,d);if(l?p.add(l.call(p,this.source)):p.add(this.source||config$1.useDeprecatedSynchronousErrorHandling&&!p.syncErrorThrowable?this._subscribe(p):this._trySubscribe(p)),config$1.useDeprecatedSynchronousErrorHandling&&p.syncErrorThrowable&&(p.syncErrorThrowable=!1,p.syncErrorThrown))throw p.syncErrorValue;return p},a.prototype._trySubscribe=function(s){try{return this._subscribe(s)}catch(u){config$1.useDeprecatedSynchronousErrorHandling&&(s.syncErrorThrown=!0,s.syncErrorValue=u),canReportError(s)?s.error(u):console.warn(u)}},a.prototype.forEach=function(s,u){var d=this;return u=getPromiseCtor(u),new u(function(l,p){var h;h=d.subscribe(function(y){try{s(y)}catch(_){p(_),h&&h.unsubscribe()}},p,l)})},a.prototype._subscribe=function(s){var u=this.source;return u&&u.subscribe(s)},a.prototype[observable]=function(){return this},a.prototype.pipe=function(){for(var s=[],u=0;u<arguments.length;u++)s[u]=arguments[u];return s.length===0?this:pipeFromArray(s)(this)},a.prototype.toPromise=function(s){var u=this;return s=getPromiseCtor(s),new s(function(d,l){var p;u.subscribe(function(h){return p=h},function(h){return l(h)},function(){return d(p)})})},a.create=function(s){return new a(s)},a}();function getPromiseCtor(a){if(a||(a=config$1.Promise||Promise),!a)throw new Error("no Promise impl found");return a}var subscribeToArray=function(a){return function(s){for(var u=0,d=a.length;u<d&&!s.closed;u++)s.next(a[u]);s.complete()}},subscribeToPromise=function(a){return function(s){return a.then(function(u){s.closed||(s.next(u),s.complete())},function(u){return s.error(u)}).then(null,hostReportError),s}};function getSymbolIterator(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var iterator=getSymbolIterator(),subscribeToIterable=function(a){return function(s){var u=a[iterator]();do{var d=void 0;try{d=u.next()}catch(l){return s.error(l),s}if(d.done){s.complete();break}if(s.next(d.value),s.closed)break}while(!0);return typeof u.return=="function"&&s.add(function(){u.return&&u.return()}),s}},subscribeToObservable=function(a){return function(s){var u=a[observable]();if(typeof u.subscribe!="function")throw new TypeError("Provided object does not correctly implement Symbol.observable");return u.subscribe(s)}},isArrayLike=function(a){return a&&typeof a.length=="number"&&typeof a!="function"};function isPromise(a){return!!a&&typeof a.subscribe!="function"&&typeof a.then=="function"}var subscribeTo=function(a){if(!!a&&typeof a[observable]=="function")return subscribeToObservable(a);if(isArrayLike(a))return subscribeToArray(a);if(isPromise(a))return subscribeToPromise(a);if(!!a&&typeof a[iterator]=="function")return subscribeToIterable(a);var s=isObject$4(a)?"an invalid object":"'"+a+"'",u="You provided "+s+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.";throw new TypeError(u)},SimpleInnerSubscriber=function(a){__extends(s,a);function s(u){var d=a.call(this)||this;return d.parent=u,d}return s.prototype._next=function(u){this.parent.notifyNext(u)},s.prototype._error=function(u){this.parent.notifyError(u),this.unsubscribe()},s.prototype._complete=function(){this.parent.notifyComplete(),this.unsubscribe()},s}(Subscriber),SimpleOuterSubscriber=function(a){__extends(s,a);function s(){return a!==null&&a.apply(this,arguments)||this}return s.prototype.notifyNext=function(u){this.destination.next(u)},s.prototype.notifyError=function(u){this.destination.error(u)},s.prototype.notifyComplete=function(){this.destination.complete()},s}(Subscriber);function innerSubscribe(a,s){if(!s.closed){if(a instanceof Observable)return a.subscribe(s);var u;try{u=subscribeTo(a)(s)}catch(d){s.error(d)}return u}}function audit(a){return function(u){return u.lift(new AuditOperator(a))}}var AuditOperator=function(){function a(s){this.durationSelector=s}return a.prototype.call=function(s,u){return u.subscribe(new AuditSubscriber(s,this.durationSelector))},a}(),AuditSubscriber=function(a){__extends(s,a);function s(u,d){var l=a.call(this,u)||this;return l.durationSelector=d,l.hasValue=!1,l}return s.prototype._next=function(u){if(this.value=u,this.hasValue=!0,!this.throttled){var d=void 0;try{var l=this.durationSelector;d=l(u)}catch(h){return this.destination.error(h)}var p=innerSubscribe(d,new SimpleInnerSubscriber(this));!p||p.closed?this.clearThrottle():this.add(this.throttled=p)}},s.prototype.clearThrottle=function(){var u=this,d=u.value,l=u.hasValue,p=u.throttled;p&&(this.remove(p),this.throttled=void 0,p.unsubscribe()),l&&(this.value=void 0,this.hasValue=!1,this.destination.next(d))},s.prototype.notifyNext=function(){this.clearThrottle()},s.prototype.notifyComplete=function(){this.clearThrottle()},s}(SimpleOuterSubscriber),Action=function(a){__extends(s,a);function s(u,d){return a.call(this)||this}return s.prototype.schedule=function(u,d){return this},s}(Subscription),AsyncAction=function(a){__extends(s,a);function s(u,d){var l=a.call(this,u,d)||this;return l.scheduler=u,l.work=d,l.pending=!1,l}return s.prototype.schedule=function(u,d){if(d===void 0&&(d=0),this.closed)return this;this.state=u;var l=this.id,p=this.scheduler;return l!=null&&(this.id=this.recycleAsyncId(p,l,d)),this.pending=!0,this.delay=d,this.id=this.id||this.requestAsyncId(p,this.id,d),this},s.prototype.requestAsyncId=function(u,d,l){return l===void 0&&(l=0),setInterval(u.flush.bind(u,this),l)},s.prototype.recycleAsyncId=function(u,d,l){if(l===void 0&&(l=0),l!==null&&this.delay===l&&this.pending===!1)return d;clearInterval(d)},s.prototype.execute=function(u,d){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var l=this._execute(u,d);if(l)return l;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},s.prototype._execute=function(u,d){var l=!1,p=void 0;try{this.work(u)}catch(h){l=!0,p=!!h&&h||new Error(h)}if(l)return this.unsubscribe(),p},s.prototype._unsubscribe=function(){var u=this.id,d=this.scheduler,l=d.actions,p=l.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,p!==-1&&l.splice(p,1),u!=null&&(this.id=this.recycleAsyncId(d,u,null)),this.delay=null},s}(Action),Scheduler=function(){function a(s,u){u===void 0&&(u=a.now),this.SchedulerAction=s,this.now=u}return a.prototype.schedule=function(s,u,d){return u===void 0&&(u=0),new this.SchedulerAction(this,s).schedule(d,u)},a.now=function(){return Date.now()},a}(),AsyncScheduler=function(a){__extends(s,a);function s(u,d){d===void 0&&(d=Scheduler.now);var l=a.call(this,u,function(){return s.delegate&&s.delegate!==l?s.delegate.now():d()})||this;return l.actions=[],l.active=!1,l.scheduled=void 0,l}return s.prototype.schedule=function(u,d,l){return d===void 0&&(d=0),s.delegate&&s.delegate!==this?s.delegate.schedule(u,d,l):a.prototype.schedule.call(this,u,d,l)},s.prototype.flush=function(u){var d=this.actions;if(this.active){d.push(u);return}var l;this.active=!0;do if(l=u.execute(u.state,u.delay))break;while(u=d.shift());if(this.active=!1,l){for(;u=d.shift();)u.unsubscribe();throw l}},s}(Scheduler),asyncScheduler=new AsyncScheduler(AsyncAction),async=asyncScheduler;function isNumeric(a){return!isArray$2(a)&&a-parseFloat(a)+1>=0}function isScheduler(a){return a&&typeof a.schedule=="function"}function timer(a,s,u){a===void 0&&(a=0);var d=-1;return isNumeric(s)?d=Number(s)<1&&1||Number(s):isScheduler(s)&&(u=s),isScheduler(u)||(u=async),new Observable(function(l){var p=isNumeric(a)?a:+a-u.now();return u.schedule(dispatch$1,p,{index:0,period:d,subscriber:l})})}function dispatch$1(a){var s=a.index,u=a.period,d=a.subscriber;if(d.next(s),!d.closed){if(u===-1)return d.complete();a.index=s+1,this.schedule(a,u)}}function auditTime(a,s){return s===void 0&&(s=async),audit(function(){return timer(a,s)})}function buffer(a){return function(u){return u.lift(new BufferOperator(a))}}var BufferOperator=function(){function a(s){this.closingNotifier=s}return a.prototype.call=function(s,u){return u.subscribe(new BufferSubscriber(s,this.closingNotifier))},a}(),BufferSubscriber=function(a){__extends(s,a);function s(u,d){var l=a.call(this,u)||this;return l.buffer=[],l.add(innerSubscribe(d,new SimpleInnerSubscriber(l))),l}return s.prototype._next=function(u){this.buffer.push(u)},s.prototype.notifyNext=function(){var u=this.buffer;this.buffer=[],this.destination.next(u)},s}(SimpleOuterSubscriber);function bufferCount(a,s){return s===void 0&&(s=null),function(d){return d.lift(new BufferCountOperator(a,s))}}var BufferCountOperator=function(){function a(s,u){this.bufferSize=s,this.startBufferEvery=u,!u||s===u?this.subscriberClass=BufferCountSubscriber:this.subscriberClass=BufferSkipCountSubscriber}return a.prototype.call=function(s,u){return u.subscribe(new this.subscriberClass(s,this.bufferSize,this.startBufferEvery))},a}(),BufferCountSubscriber=function(a){__extends(s,a);function s(u,d){var l=a.call(this,u)||this;return l.bufferSize=d,l.buffer=[],l}return s.prototype._next=function(u){var d=this.buffer;d.push(u),d.length==this.bufferSize&&(this.destination.next(d),this.buffer=[])},s.prototype._complete=function(){var u=this.buffer;u.length>0&&this.destination.next(u),a.prototype._complete.call(this)},s}(Subscriber),BufferSkipCountSubscriber=function(a){__extends(s,a);function s(u,d,l){var p=a.call(this,u)||this;return p.bufferSize=d,p.startBufferEvery=l,p.buffers=[],p.count=0,p}return s.prototype._next=function(u){var d=this,l=d.bufferSize,p=d.startBufferEvery,h=d.buffers,y=d.count;this.count++,y%p===0&&h.push([]);for(var _=h.length;_--;){var E=h[_];E.push(u),E.length===l&&(h.splice(_,1),this.destination.next(E))}},s.prototype._complete=function(){for(var u=this,d=u.buffers,l=u.destination;d.length>0;){var p=d.shift();p.length>0&&l.next(p)}a.prototype._complete.call(this)},s}(Subscriber);function bufferTime(a){var s=arguments.length,u=async;isScheduler(arguments[arguments.length-1])&&(u=arguments[arguments.length-1],s--);var d=null;s>=2&&(d=arguments[1]);var l=Number.POSITIVE_INFINITY;return s>=3&&(l=arguments[2]),function(h){return h.lift(new BufferTimeOperator(a,d,l,u))}}var BufferTimeOperator=function(){function a(s,u,d,l){this.bufferTimeSpan=s,this.bufferCreationInterval=u,this.maxBufferSize=d,this.scheduler=l}return a.prototype.call=function(s,u){return u.subscribe(new BufferTimeSubscriber(s,this.bufferTimeSpan,this.bufferCreationInterval,this.maxBufferSize,this.scheduler))},a}(),Context=function(){function a(){this.buffer=[]}return a}(),BufferTimeSubscriber=function(a){__extends(s,a);function s(u,d,l,p,h){var y=a.call(this,u)||this;y.bufferTimeSpan=d,y.bufferCreationInterval=l,y.maxBufferSize=p,y.scheduler=h,y.contexts=[];var _=y.openContext();if(y.timespanOnly=l==null||l<0,y.timespanOnly){var E={subscriber:y,context:_,bufferTimeSpan:d};y.add(_.closeAction=h.schedule(dispatchBufferTimeSpanOnly,d,E))}else{var I={subscriber:y,context:_},N={bufferTimeSpan:d,bufferCreationInterval:l,subscriber:y,scheduler:h};y.add(_.closeAction=h.schedule(dispatchBufferClose,d,I)),y.add(h.schedule(dispatchBufferCreation,l,N))}return y}return s.prototype._next=function(u){for(var d=this.contexts,l=d.length,p,h=0;h<l;h++){var y=d[h],_=y.buffer;_.push(u),_.length==this.maxBufferSize&&(p=y)}p&&this.onBufferFull(p)},s.prototype._error=function(u){this.contexts.length=0,a.prototype._error.call(this,u)},s.prototype._complete=function(){for(var u=this,d=u.contexts,l=u.destination;d.length>0;){var p=d.shift();l.next(p.buffer)}a.prototype._complete.call(this)},s.prototype._unsubscribe=function(){this.contexts=null},s.prototype.onBufferFull=function(u){this.closeContext(u);var d=u.closeAction;if(d.unsubscribe(),this.remove(d),!this.closed&&this.timespanOnly){u=this.openContext();var l=this.bufferTimeSpan,p={subscriber:this,context:u,bufferTimeSpan:l};this.add(u.closeAction=this.scheduler.schedule(dispatchBufferTimeSpanOnly,l,p))}},s.prototype.openContext=function(){var u=new Context;return this.contexts.push(u),u},s.prototype.closeContext=function(u){this.destination.next(u.buffer);var d=this.contexts,l=d?d.indexOf(u):-1;l>=0&&d.splice(d.indexOf(u),1)},s}(Subscriber);function dispatchBufferTimeSpanOnly(a){var s=a.subscriber,u=a.context;u&&s.closeContext(u),s.closed||(a.context=s.openContext(),a.context.closeAction=this.schedule(a,a.bufferTimeSpan))}function dispatchBufferCreation(a){var s=a.bufferCreationInterval,u=a.bufferTimeSpan,d=a.subscriber,l=a.scheduler,p=d.openContext(),h=this;d.closed||(d.add(p.closeAction=l.schedule(dispatchBufferClose,u,{subscriber:d,context:p})),h.schedule(a,s))}function dispatchBufferClose(a){var s=a.subscriber,u=a.context;s.closeContext(u)}var InnerSubscriber=function(a){__extends(s,a);function s(u,d,l){var p=a.call(this)||this;return p.parent=u,p.outerValue=d,p.outerIndex=l,p.index=0,p}return s.prototype._next=function(u){this.parent.notifyNext(this.outerValue,u,this.outerIndex,this.index++,this)},s.prototype._error=function(u){this.parent.notifyError(u,this),this.unsubscribe()},s.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},s}(Subscriber);function subscribeToResult(a,s,u,d,l){if(l===void 0&&(l=new InnerSubscriber(a,u,d)),!l.closed)return s instanceof Observable?s.subscribe(l):subscribeTo(s)(l)}var OuterSubscriber=function(a){__extends(s,a);function s(){return a!==null&&a.apply(this,arguments)||this}return s.prototype.notifyNext=function(u,d,l,p,h){this.destination.next(d)},s.prototype.notifyError=function(u,d){this.destination.error(u)},s.prototype.notifyComplete=function(u){this.destination.complete()},s}(Subscriber);function bufferToggle(a,s){return function(d){return d.lift(new BufferToggleOperator(a,s))}}var BufferToggleOperator=function(){function a(s,u){this.openings=s,this.closingSelector=u}return a.prototype.call=function(s,u){return u.subscribe(new BufferToggleSubscriber(s,this.openings,this.closingSelector))},a}(),BufferToggleSubscriber=function(a){__extends(s,a);function s(u,d,l){var p=a.call(this,u)||this;return p.closingSelector=l,p.contexts=[],p.add(subscribeToResult(p,d)),p}return s.prototype._next=function(u){for(var d=this.contexts,l=d.length,p=0;p<l;p++)d[p].buffer.push(u)},s.prototype._error=function(u){for(var d=this.contexts;d.length>0;){var l=d.shift();l.subscription.unsubscribe(),l.buffer=null,l.subscription=null}this.contexts=null,a.prototype._error.call(this,u)},s.prototype._complete=function(){for(var u=this.contexts;u.length>0;){var d=u.shift();this.destination.next(d.buffer),d.subscription.unsubscribe(),d.buffer=null,d.subscription=null}this.contexts=null,a.prototype._complete.call(this)},s.prototype.notifyNext=function(u,d){u?this.closeBuffer(u):this.openBuffer(d)},s.prototype.notifyComplete=function(u){this.closeBuffer(u.context)},s.prototype.openBuffer=function(u){try{var d=this.closingSelector,l=d.call(this,u);l&&this.trySubscribe(l)}catch(p){this._error(p)}},s.prototype.closeBuffer=function(u){var d=this.contexts;if(d&&u){var l=u.buffer,p=u.subscription;this.destination.next(l),d.splice(d.indexOf(u),1),this.remove(p),p.unsubscribe()}},s.prototype.trySubscribe=function(u){var d=this.contexts,l=[],p=new Subscription,h={buffer:l,subscription:p};d.push(h);var y=subscribeToResult(this,u,h);!y||y.closed?this.closeBuffer(h):(y.context=h,this.add(y),p.add(y))},s}(OuterSubscriber);function bufferWhen(a){return function(s){return s.lift(new BufferWhenOperator(a))}}var BufferWhenOperator=function(){function a(s){this.closingSelector=s}return a.prototype.call=function(s,u){return u.subscribe(new BufferWhenSubscriber(s,this.closingSelector))},a}(),BufferWhenSubscriber=function(a){__extends(s,a);function s(u,d){var l=a.call(this,u)||this;return l.closingSelector=d,l.subscribing=!1,l.openBuffer(),l}return s.prototype._next=function(u){this.buffer.push(u)},s.prototype._complete=function(){var u=this.buffer;u&&this.destination.next(u),a.prototype._complete.call(this)},s.prototype._unsubscribe=function(){this.buffer=void 0,this.subscribing=!1},s.prototype.notifyNext=function(){this.openBuffer()},s.prototype.notifyComplete=function(){this.subscribing?this.complete():this.openBuffer()},s.prototype.openBuffer=function(){var u=this.closingSubscription;u&&(this.remove(u),u.unsubscribe());var d=this.buffer;this.buffer&&this.destination.next(d),this.buffer=[];var l;try{var p=this.closingSelector;l=p()}catch(h){return this.error(h)}u=new Subscription,this.closingSubscription=u,this.add(u),this.subscribing=!0,u.add(innerSubscribe(l,new SimpleInnerSubscriber(this))),this.subscribing=!1},s}(SimpleOuterSubscriber);function catchError(a){return function(u){var d=new CatchOperator(a),l=u.lift(d);return d.caught=l}}var CatchOperator=function(){function a(s){this.selector=s}return a.prototype.call=function(s,u){return u.subscribe(new CatchSubscriber(s,this.selector,this.caught))},a}(),CatchSubscriber=function(a){__extends(s,a);function s(u,d,l){var p=a.call(this,u)||this;return p.selector=d,p.caught=l,p}return s.prototype.error=function(u){if(!this.isStopped){var d=void 0;try{d=this.selector(u,this.caught)}catch(h){a.prototype.error.call(this,h);return}this._unsubscribeAndRecycle();var l=new SimpleInnerSubscriber(this);this.add(l);var p=innerSubscribe(d,l);p!==l&&this.add(p)}},s}(SimpleOuterSubscriber);function scheduleArray(a,s){return new Observable(function(u){var d=new Subscription,l=0;return d.add(s.schedule(function(){if(l===a.length){u.complete();return}u.next(a[l++]),u.closed||d.add(this.schedule())})),d})}function fromArray(a,s){return s?scheduleArray(a,s):new Observable(subscribeToArray(a))}var NONE={},CombineLatestOperator=function(){function a(s){this.resultSelector=s}return a.prototype.call=function(s,u){return u.subscribe(new CombineLatestSubscriber(s,this.resultSelector))},a}(),CombineLatestSubscriber=function(a){__extends(s,a);function s(u,d){var l=a.call(this,u)||this;return l.resultSelector=d,l.active=0,l.values=[],l.observables=[],l}return s.prototype._next=function(u){this.values.push(NONE),this.observables.push(u)},s.prototype._complete=function(){var u=this.observables,d=u.length;if(d===0)this.destination.complete();else{this.active=d,this.toRespond=d;for(var l=0;l<d;l++){var p=u[l];this.add(subscribeToResult(this,p,void 0,l))}}},s.prototype.notifyComplete=function(u){(this.active-=1)===0&&this.destination.complete()},s.prototype.notifyNext=function(u,d,l){var p=this.values,h=p[l],y=this.toRespond?h===NONE?--this.toRespond:this.toRespond:0;p[l]=d,y===0&&(this.resultSelector?this._tryResultSelector(p):this.destination.next(p.slice()))},s.prototype._tryResultSelector=function(u){var d;try{d=this.resultSelector.apply(this,u)}catch(l){this.destination.error(l);return}this.destination.next(d)},s}(OuterSubscriber);function combineAll(a){return function(s){return s.lift(new CombineLatestOperator(a))}}function scheduleObservable(a,s){return new Observable(function(u){var d=new Subscription;return d.add(s.schedule(function(){var l=a[observable]();d.add(l.subscribe({next:function(p){d.add(s.schedule(function(){return u.next(p)}))},error:function(p){d.add(s.schedule(function(){return u.error(p)}))},complete:function(){d.add(s.schedule(function(){return u.complete()}))}}))})),d})}function schedulePromise(a,s){return new Observable(function(u){var d=new Subscription;return d.add(s.schedule(function(){return a.then(function(l){d.add(s.schedule(function(){u.next(l),d.add(s.schedule(function(){return u.complete()}))}))},function(l){d.add(s.schedule(function(){return u.error(l)}))})})),d})}function scheduleIterable(a,s){if(!a)throw new Error("Iterable cannot be null");return new Observable(function(u){var d=new Subscription,l;return d.add(function(){l&&typeof l.return=="function"&&l.return()}),d.add(s.schedule(function(){l=a[iterator](),d.add(s.schedule(function(){if(!u.closed){var p,h;try{var y=l.next();p=y.value,h=y.done}catch(_){u.error(_);return}h?u.complete():(u.next(p),this.schedule())}}))})),d})}function isInteropObservable(a){return a&&typeof a[observable]=="function"}function isIterable(a){return a&&typeof a[iterator]=="function"}function scheduled(a,s){if(a!=null){if(isInteropObservable(a))return scheduleObservable(a,s);if(isPromise(a))return schedulePromise(a,s);if(isArrayLike(a))return scheduleArray(a,s);if(isIterable(a)||typeof a=="string")return scheduleIterable(a,s)}throw new TypeError((a!==null&&typeof a||a)+" is not observable")}function from(a,s){return s?scheduled(a,s):a instanceof Observable?a:new Observable(subscribeTo(a))}function combineLatest(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];var u=null;return typeof a[a.length-1]=="function"&&(u=a.pop()),a.length===1&&isArray$2(a[0])&&(a=a[0].slice()),function(d){return d.lift.call(from([d].concat(a)),new CombineLatestOperator(u))}}function of(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];var u=a[a.length-1];return isScheduler(u)?(a.pop(),scheduleArray(a,u)):fromArray(a)}function map(a,s){return function(d){if(typeof a!="function")throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return d.lift(new MapOperator(a,s))}}var MapOperator=function(){function a(s,u){this.project=s,this.thisArg=u}return a.prototype.call=function(s,u){return u.subscribe(new MapSubscriber(s,this.project,this.thisArg))},a}(),MapSubscriber=function(a){__extends(s,a);function s(u,d,l){var p=a.call(this,u)||this;return p.project=d,p.count=0,p.thisArg=l||p,p}return s.prototype._next=function(u){var d;try{d=this.project.call(this.thisArg,u,this.count++)}catch(l){this.destination.error(l);return}this.destination.next(d)},s}(Subscriber);function mergeMap(a,s,u){return u===void 0&&(u=Number.POSITIVE_INFINITY),typeof s=="function"?function(d){return d.pipe(mergeMap(function(l,p){return from(a(l,p)).pipe(map(function(h,y){return s(l,h,p,y)}))},u))}:(typeof s=="number"&&(u=s),function(d){return d.lift(new MergeMapOperator(a,u))})}var MergeMapOperator=function(){function a(s,u){u===void 0&&(u=Number.POSITIVE_INFINITY),this.project=s,this.concurrent=u}return a.prototype.call=function(s,u){return u.subscribe(new MergeMapSubscriber(s,this.project,this.concurrent))},a}(),MergeMapSubscriber=function(a){__extends(s,a);function s(u,d,l){l===void 0&&(l=Number.POSITIVE_INFINITY);var p=a.call(this,u)||this;return p.project=d,p.concurrent=l,p.hasCompleted=!1,p.buffer=[],p.active=0,p.index=0,p}return s.prototype._next=function(u){this.active<this.concurrent?this._tryNext(u):this.buffer.push(u)},s.prototype._tryNext=function(u){var d,l=this.index++;try{d=this.project(u,l)}catch(p){this.destination.error(p);return}this.active++,this._innerSub(d)},s.prototype._innerSub=function(u){var d=new SimpleInnerSubscriber(this),l=this.destination;l.add(d);var p=innerSubscribe(u,d);p!==d&&l.add(p)},s.prototype._complete=function(){this.hasCompleted=!0,this.active===0&&this.buffer.length===0&&this.destination.complete(),this.unsubscribe()},s.prototype.notifyNext=function(u){this.destination.next(u)},s.prototype.notifyComplete=function(){var u=this.buffer;this.active--,u.length>0?this._next(u.shift()):this.active===0&&this.hasCompleted&&this.destination.complete()},s}(SimpleOuterSubscriber),flatMap=mergeMap;function mergeAll(a){return a===void 0&&(a=Number.POSITIVE_INFINITY),mergeMap(identity,a)}function concatAll(){return mergeAll(1)}function concat$1(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];return concatAll()(of.apply(void 0,a))}function concat(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];return function(u){return u.lift.call(concat$1.apply(void 0,[u].concat(a)))}}function concatMap(a,s){return mergeMap(a,s,1)}function concatMapTo(a,s){return concatMap(function(){return a},s)}function count(a){return function(s){return s.lift(new CountOperator(a,s))}}var CountOperator=function(){function a(s,u){this.predicate=s,this.source=u}return a.prototype.call=function(s,u){return u.subscribe(new CountSubscriber(s,this.predicate,this.source))},a}(),CountSubscriber=function(a){__extends(s,a);function s(u,d,l){var p=a.call(this,u)||this;return p.predicate=d,p.source=l,p.count=0,p.index=0,p}return s.prototype._next=function(u){this.predicate?this._tryPredicate(u):this.count++},s.prototype._tryPredicate=function(u){var d;try{d=this.predicate(u,this.index++,this.source)}catch(l){this.destination.error(l);return}d&&this.count++},s.prototype._complete=function(){this.destination.next(this.count),this.destination.complete()},s}(Subscriber);function debounce(a){return function(s){return s.lift(new DebounceOperator(a))}}var DebounceOperator=function(){function a(s){this.durationSelector=s}return a.prototype.call=function(s,u){return u.subscribe(new DebounceSubscriber(s,this.durationSelector))},a}(),DebounceSubscriber=function(a){__extends(s,a);function s(u,d){var l=a.call(this,u)||this;return l.durationSelector=d,l.hasValue=!1,l}return s.prototype._next=function(u){try{var d=this.durationSelector.call(this,u);d&&this._tryNext(u,d)}catch(l){this.destination.error(l)}},s.prototype._complete=function(){this.emitValue(),this.destination.complete()},s.prototype._tryNext=function(u,d){var l=this.durationSubscription;this.value=u,this.hasValue=!0,l&&(l.unsubscribe(),this.remove(l)),l=innerSubscribe(d,new SimpleInnerSubscriber(this)),l&&!l.closed&&this.add(this.durationSubscription=l)},s.prototype.notifyNext=function(){this.emitValue()},s.prototype.notifyComplete=function(){this.emitValue()},s.prototype.emitValue=function(){if(this.hasValue){var u=this.value,d=this.durationSubscription;d&&(this.durationSubscription=void 0,d.unsubscribe(),this.remove(d)),this.value=void 0,this.hasValue=!1,a.prototype._next.call(this,u)}},s}(SimpleOuterSubscriber);function debounceTime(a,s){return s===void 0&&(s=async),function(u){return u.lift(new DebounceTimeOperator(a,s))}}var DebounceTimeOperator=function(){function a(s,u){this.dueTime=s,this.scheduler=u}return a.prototype.call=function(s,u){return u.subscribe(new DebounceTimeSubscriber(s,this.dueTime,this.scheduler))},a}(),DebounceTimeSubscriber=function(a){__extends(s,a);function s(u,d,l){var p=a.call(this,u)||this;return p.dueTime=d,p.scheduler=l,p.debouncedSubscription=null,p.lastValue=null,p.hasValue=!1,p}return s.prototype._next=function(u){this.clearDebounce(),this.lastValue=u,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(dispatchNext$1,this.dueTime,this))},s.prototype._complete=function(){this.debouncedNext(),this.destination.complete()},s.prototype.debouncedNext=function(){if(this.clearDebounce(),this.hasValue){var u=this.lastValue;this.lastValue=null,this.hasValue=!1,this.destination.next(u)}},s.prototype.clearDebounce=function(){var u=this.debouncedSubscription;u!==null&&(this.remove(u),u.unsubscribe(),this.debouncedSubscription=null)},s}(Subscriber);function dispatchNext$1(a){a.debouncedNext()}function defaultIfEmpty(a){return a===void 0&&(a=null),function(s){return s.lift(new DefaultIfEmptyOperator(a))}}var DefaultIfEmptyOperator=function(){function a(s){this.defaultValue=s}return a.prototype.call=function(s,u){return u.subscribe(new DefaultIfEmptySubscriber(s,this.defaultValue))},a}(),DefaultIfEmptySubscriber=function(a){__extends(s,a);function s(u,d){var l=a.call(this,u)||this;return l.defaultValue=d,l.isEmpty=!0,l}return s.prototype._next=function(u){this.isEmpty=!1,this.destination.next(u)},s.prototype._complete=function(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()},s}(Subscriber);function isDate$1(a){return a instanceof Date&&!isNaN(+a)}var EMPTY=new Observable(function(a){return a.complete()});function empty$1(a){return a?emptyScheduled(a):EMPTY}function emptyScheduled(a){return new Observable(function(s){return a.schedule(function(){return s.complete()})})}function throwError(a,s){return s?new Observable(function(u){return s.schedule(dispatch,0,{error:a,subscriber:u})}):new Observable(function(u){return u.error(a)})}function dispatch(a){var s=a.error,u=a.subscriber;u.error(s)}var Notification=function(){function a(s,u,d){this.kind=s,this.value=u,this.error=d,this.hasValue=s==="N"}return a.prototype.observe=function(s){switch(this.kind){case"N":return s.next&&s.next(this.value);case"E":return s.error&&s.error(this.error);case"C":return s.complete&&s.complete()}},a.prototype.do=function(s,u,d){var l=this.kind;switch(l){case"N":return s&&s(this.value);case"E":return u&&u(this.error);case"C":return d&&d()}},a.prototype.accept=function(s,u,d){return s&&typeof s.next=="function"?this.observe(s):this.do(s,u,d)},a.prototype.toObservable=function(){var s=this.kind;switch(s){case"N":return of(this.value);case"E":return throwError(this.error);case"C":return empty$1()}throw new Error("unexpected notification kind value")},a.createNext=function(s){return typeof s!="undefined"?new a("N",s):a.undefinedValueNotification},a.createError=function(s){return new a("E",void 0,s)},a.createComplete=function(){return a.completeNotification},a.completeNotification=new a("C"),a.undefinedValueNotification=new a("N",void 0),a}();function delay(a,s){s===void 0&&(s=async);var u=isDate$1(a),d=u?+a-s.now():Math.abs(a);return function(l){return l.lift(new DelayOperator(d,s))}}var DelayOperator=function(){function a(s,u){this.delay=s,this.scheduler=u}return a.prototype.call=function(s,u){return u.subscribe(new DelaySubscriber(s,this.delay,this.scheduler))},a}(),DelaySubscriber=function(a){__extends(s,a);function s(u,d,l){var p=a.call(this,u)||this;return p.delay=d,p.scheduler=l,p.queue=[],p.active=!1,p.errored=!1,p}return s.dispatch=function(u){for(var d=u.source,l=d.queue,p=u.scheduler,h=u.destination;l.length>0&&l[0].time-p.now()<=0;)l.shift().notification.observe(h);if(l.length>0){var y=Math.max(0,l[0].time-p.now());this.schedule(u,y)}else this.unsubscribe(),d.active=!1},s.prototype._schedule=function(u){this.active=!0;var d=this.destination;d.add(u.schedule(s.dispatch,this.delay,{source:this,destination:this.destination,scheduler:u}))},s.prototype.scheduleNotification=function(u){if(this.errored!==!0){var d=this.scheduler,l=new DelayMessage(d.now()+this.delay,u);this.queue.push(l),this.active===!1&&this._schedule(d)}},s.prototype._next=function(u){this.scheduleNotification(Notification.createNext(u))},s.prototype._error=function(u){this.errored=!0,this.queue=[],this.destination.error(u),this.unsubscribe()},s.prototype._complete=function(){this.scheduleNotification(Notification.createComplete()),this.unsubscribe()},s}(Subscriber),DelayMessage=function(){function a(s,u){this.time=s,this.notification=u}return a}();function delayWhen(a,s){return s?function(u){return new SubscriptionDelayObservable(u,s).lift(new DelayWhenOperator(a))}:function(u){return u.lift(new DelayWhenOperator(a))}}var DelayWhenOperator=function(){function a(s){this.delayDurationSelector=s}return a.prototype.call=function(s,u){return u.subscribe(new DelayWhenSubscriber(s,this.delayDurationSelector))},a}(),DelayWhenSubscriber=function(a){__extends(s,a);function s(u,d){var l=a.call(this,u)||this;return l.delayDurationSelector=d,l.completed=!1,l.delayNotifierSubscriptions=[],l.index=0,l}return s.prototype.notifyNext=function(u,d,l,p,h){this.destination.next(u),this.removeSubscription(h),this.tryComplete()},s.prototype.notifyError=function(u,d){this._error(u)},s.prototype.notifyComplete=function(u){var d=this.removeSubscription(u);d&&this.destination.next(d),this.tryComplete()},s.prototype._next=function(u){var d=this.index++;try{var l=this.delayDurationSelector(u,d);l&&this.tryDelay(l,u)}catch(p){this.destination.error(p)}},s.prototype._complete=function(){this.completed=!0,this.tryComplete(),this.unsubscribe()},s.prototype.removeSubscription=function(u){u.unsubscribe();var d=this.delayNotifierSubscriptions.indexOf(u);return d!==-1&&this.delayNotifierSubscriptions.splice(d,1),u.outerValue},s.prototype.tryDelay=function(u,d){var l=subscribeToResult(this,u,d);if(l&&!l.closed){var p=this.destination;p.add(l),this.delayNotifierSubscriptions.push(l)}},s.prototype.tryComplete=function(){this.completed&&this.delayNotifierSubscriptions.length===0&&this.destination.complete()},s}(OuterSubscriber),SubscriptionDelayObservable=function(a){__extends(s,a);function s(u,d){var l=a.call(this)||this;return l.source=u,l.subscriptionDelay=d,l}return s.prototype._subscribe=function(u){this.subscriptionDelay.subscribe(new SubscriptionDelaySubscriber(u,this.source))},s}(Observable),SubscriptionDelaySubscriber=function(a){__extends(s,a);function s(u,d){var l=a.call(this)||this;return l.parent=u,l.source=d,l.sourceSubscribed=!1,l}return s.prototype._next=function(u){this.subscribeToSource()},s.prototype._error=function(u){this.unsubscribe(),this.parent.error(u)},s.prototype._complete=function(){this.unsubscribe(),this.subscribeToSource()},s.prototype.subscribeToSource=function(){this.sourceSubscribed||(this.sourceSubscribed=!0,this.unsubscribe(),this.source.subscribe(this.parent))},s}(Subscriber);function dematerialize(){return function(s){return s.lift(new DeMaterializeOperator)}}var DeMaterializeOperator=function(){function a(){}return a.prototype.call=function(s,u){return u.subscribe(new DeMaterializeSubscriber(s))},a}(),DeMaterializeSubscriber=function(a){__extends(s,a);function s(u){return a.call(this,u)||this}return s.prototype._next=function(u){u.observe(this.destination)},s}(Subscriber);function distinct(a,s){return function(u){return u.lift(new DistinctOperator(a,s))}}var DistinctOperator=function(){function a(s,u){this.keySelector=s,this.flushes=u}return a.prototype.call=function(s,u){return u.subscribe(new DistinctSubscriber(s,this.keySelector,this.flushes))},a}(),DistinctSubscriber=function(a){__extends(s,a);function s(u,d,l){var p=a.call(this,u)||this;return p.keySelector=d,p.values=new Set,l&&p.add(innerSubscribe(l,new SimpleInnerSubscriber(p))),p}return s.prototype.notifyNext=function(){this.values.clear()},s.prototype.notifyError=function(u){this._error(u)},s.prototype._next=function(u){this.keySelector?this._useKeySelector(u):this._finalizeNext(u,u)},s.prototype._useKeySelector=function(u){var d,l=this.destination;try{d=this.keySelector(u)}catch(p){l.error(p);return}this._finalizeNext(d,u)},s.prototype._finalizeNext=function(u,d){var l=this.values;l.has(u)||(l.add(u),this.destination.next(d))},s}(SimpleOuterSubscriber);function distinctUntilChanged(a,s){return function(u){return u.lift(new DistinctUntilChangedOperator(a,s))}}var DistinctUntilChangedOperator=function(){function a(s,u){this.compare=s,this.keySelector=u}return a.prototype.call=function(s,u){return u.subscribe(new DistinctUntilChangedSubscriber(s,this.compare,this.keySelector))},a}(),DistinctUntilChangedSubscriber=function(a){__extends(s,a);function s(u,d,l){var p=a.call(this,u)||this;return p.keySelector=l,p.hasKey=!1,typeof d=="function"&&(p.compare=d),p}return s.prototype.compare=function(u,d){return u===d},s.prototype._next=function(u){var d;try{var l=this.keySelector;d=l?l(u):u}catch(y){return this.destination.error(y)}var p=!1;if(this.hasKey)try{var h=this.compare;p=h(this.key,d)}catch(y){return this.destination.error(y)}else this.hasKey=!0;p||(this.key=d,this.destination.next(u))},s}(Subscriber);function distinctUntilKeyChanged(a,s){return distinctUntilChanged(function(u,d){return s?s(u[a],d[a]):u[a]===d[a]})}var ArgumentOutOfRangeErrorImpl=function(){function a(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return a.prototype=Object.create(Error.prototype),a}(),ArgumentOutOfRangeError=ArgumentOutOfRangeErrorImpl;function filter(a,s){return function(d){return d.lift(new FilterOperator(a,s))}}var FilterOperator=function(){function a(s,u){this.predicate=s,this.thisArg=u}return a.prototype.call=function(s,u){return u.subscribe(new FilterSubscriber(s,this.predicate,this.thisArg))},a}(),FilterSubscriber=function(a){__extends(s,a);function s(u,d,l){var p=a.call(this,u)||this;return p.predicate=d,p.thisArg=l,p.count=0,p}return s.prototype._next=function(u){var d;try{d=this.predicate.call(this.thisArg,u,this.count++)}catch(l){this.destination.error(l);return}d&&this.destination.next(u)},s}(Subscriber),EmptyErrorImpl=function(){function a(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return a.prototype=Object.create(Error.prototype),a}(),EmptyError=EmptyErrorImpl;function throwIfEmpty(a){return a===void 0&&(a=defaultErrorFactory),function(s){return s.lift(new ThrowIfEmptyOperator(a))}}var ThrowIfEmptyOperator=function(){function a(s){this.errorFactory=s}return a.prototype.call=function(s,u){return u.subscribe(new ThrowIfEmptySubscriber(s,this.errorFactory))},a}(),ThrowIfEmptySubscriber=function(a){__extends(s,a);function s(u,d){var l=a.call(this,u)||this;return l.errorFactory=d,l.hasValue=!1,l}return s.prototype._next=function(u){this.hasValue=!0,this.destination.next(u)},s.prototype._complete=function(){if(this.hasValue)return this.destination.complete();var u=void 0;try{u=this.errorFactory()}catch(d){u=d}this.destination.error(u)},s}(Subscriber);function defaultErrorFactory(){return new EmptyError}function take(a){return function(s){return a===0?empty$1():s.lift(new TakeOperator(a))}}var TakeOperator=function(){function a(s){if(this.total=s,this.total<0)throw new ArgumentOutOfRangeError}return a.prototype.call=function(s,u){return u.subscribe(new TakeSubscriber(s,this.total))},a}(),TakeSubscriber=function(a){__extends(s,a);function s(u,d){var l=a.call(this,u)||this;return l.total=d,l.count=0,l}return s.prototype._next=function(u){var d=this.total,l=++this.count;l<=d&&(this.destination.next(u),l===d&&(this.destination.complete(),this.unsubscribe()))},s}(Subscriber);function elementAt(a,s){if(a<0)throw new ArgumentOutOfRangeError;var u=arguments.length>=2;return function(d){return d.pipe(filter(function(l,p){return p===a}),take(1),u?defaultIfEmpty(s):throwIfEmpty(function(){return new ArgumentOutOfRangeError}))}}function endWith(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];return function(u){return concat$1(u,of.apply(void 0,a))}}function every(a,s){return function(u){return u.lift(new EveryOperator(a,s,u))}}var EveryOperator=function(){function a(s,u,d){this.predicate=s,this.thisArg=u,this.source=d}return a.prototype.call=function(s,u){return u.subscribe(new EverySubscriber(s,this.predicate,this.thisArg,this.source))},a}(),EverySubscriber=function(a){__extends(s,a);function s(u,d,l,p){var h=a.call(this,u)||this;return h.predicate=d,h.thisArg=l,h.source=p,h.index=0,h.thisArg=l||h,h}return s.prototype.notifyComplete=function(u){this.destination.next(u),this.destination.complete()},s.prototype._next=function(u){var d=!1;try{d=this.predicate.call(this.thisArg,u,this.index++,this.source)}catch(l){this.destination.error(l);return}d||this.notifyComplete(!1)},s.prototype._complete=function(){this.notifyComplete(!0)},s}(Subscriber);function exhaust(){return function(a){return a.lift(new SwitchFirstOperator)}}var SwitchFirstOperator=function(){function a(){}return a.prototype.call=function(s,u){return u.subscribe(new SwitchFirstSubscriber(s))},a}(),SwitchFirstSubscriber=function(a){__extends(s,a);function s(u){var d=a.call(this,u)||this;return d.hasCompleted=!1,d.hasSubscription=!1,d}return s.prototype._next=function(u){this.hasSubscription||(this.hasSubscription=!0,this.add(innerSubscribe(u,new SimpleInnerSubscriber(this))))},s.prototype._complete=function(){this.hasCompleted=!0,this.hasSubscription||this.destination.complete()},s.prototype.notifyComplete=function(){this.hasSubscription=!1,this.hasCompleted&&this.destination.complete()},s}(SimpleOuterSubscriber);function exhaustMap(a,s){return s?function(u){return u.pipe(exhaustMap(function(d,l){return from(a(d,l)).pipe(map(function(p,h){return s(d,p,l,h)}))}))}:function(u){return u.lift(new ExhaustMapOperator(a))}}var ExhaustMapOperator=function(){function a(s){this.project=s}return a.prototype.call=function(s,u){return u.subscribe(new ExhaustMapSubscriber(s,this.project))},a}(),ExhaustMapSubscriber=function(a){__extends(s,a);function s(u,d){var l=a.call(this,u)||this;return l.project=d,l.hasSubscription=!1,l.hasCompleted=!1,l.index=0,l}return s.prototype._next=function(u){this.hasSubscription||this.tryNext(u)},s.prototype.tryNext=function(u){var d,l=this.index++;try{d=this.project(u,l)}catch(p){this.destination.error(p);return}this.hasSubscription=!0,this._innerSub(d)},s.prototype._innerSub=function(u){var d=new SimpleInnerSubscriber(this),l=this.destination;l.add(d);var p=innerSubscribe(u,d);p!==d&&l.add(p)},s.prototype._complete=function(){this.hasCompleted=!0,this.hasSubscription||this.destination.complete(),this.unsubscribe()},s.prototype.notifyNext=function(u){this.destination.next(u)},s.prototype.notifyError=function(u){this.destination.error(u)},s.prototype.notifyComplete=function(){this.hasSubscription=!1,this.hasCompleted&&this.destination.complete()},s}(SimpleOuterSubscriber);function expand(a,s,u){return s===void 0&&(s=Number.POSITIVE_INFINITY),s=(s||0)<1?Number.POSITIVE_INFINITY:s,function(d){return d.lift(new ExpandOperator(a,s,u))}}var ExpandOperator=function(){function a(s,u,d){this.project=s,this.concurrent=u,this.scheduler=d}return a.prototype.call=function(s,u){return u.subscribe(new ExpandSubscriber(s,this.project,this.concurrent,this.scheduler))},a}(),ExpandSubscriber=function(a){__extends(s,a);function s(u,d,l,p){var h=a.call(this,u)||this;return h.project=d,h.concurrent=l,h.scheduler=p,h.index=0,h.active=0,h.hasCompleted=!1,l<Number.POSITIVE_INFINITY&&(h.buffer=[]),h}return s.dispatch=function(u){var d=u.subscriber,l=u.result,p=u.value,h=u.index;d.subscribeToProjection(l,p,h)},s.prototype._next=function(u){var d=this.destination;if(d.closed){this._complete();return}var l=this.index++;if(this.active<this.concurrent){d.next(u);try{var p=this.project,h=p(u,l);if(!this.scheduler)this.subscribeToProjection(h,u,l);else{var y={subscriber:this,result:h,value:u,index:l},_=this.destination;_.add(this.scheduler.schedule(s.dispatch,0,y))}}catch(E){d.error(E)}}else this.buffer.push(u)},s.prototype.subscribeToProjection=function(u,d,l){this.active++;var p=this.destination;p.add(innerSubscribe(u,new SimpleInnerSubscriber(this)))},s.prototype._complete=function(){this.hasCompleted=!0,this.hasCompleted&&this.active===0&&this.destination.complete(),this.unsubscribe()},s.prototype.notifyNext=function(u){this._next(u)},s.prototype.notifyComplete=function(){var u=this.buffer;this.active--,u&&u.length>0&&this._next(u.shift()),this.hasCompleted&&this.active===0&&this.destination.complete()},s}(SimpleOuterSubscriber);function finalize(a){return function(s){return s.lift(new FinallyOperator(a))}}var FinallyOperator=function(){function a(s){this.callback=s}return a.prototype.call=function(s,u){return u.subscribe(new FinallySubscriber(s,this.callback))},a}(),FinallySubscriber=function(a){__extends(s,a);function s(u,d){var l=a.call(this,u)||this;return l.add(new Subscription(d)),l}return s}(Subscriber);function find$1(a,s){if(typeof a!="function")throw new TypeError("predicate is not a function");return function(u){return u.lift(new FindValueOperator(a,u,!1,s))}}var FindValueOperator=function(){function a(s,u,d,l){this.predicate=s,this.source=u,this.yieldIndex=d,this.thisArg=l}return a.prototype.call=function(s,u){return u.subscribe(new FindValueSubscriber(s,this.predicate,this.source,this.yieldIndex,this.thisArg))},a}(),FindValueSubscriber=function(a){__extends(s,a);function s(u,d,l,p,h){var y=a.call(this,u)||this;return y.predicate=d,y.source=l,y.yieldIndex=p,y.thisArg=h,y.index=0,y}return s.prototype.notifyComplete=function(u){var d=this.destination;d.next(u),d.complete(),this.unsubscribe()},s.prototype._next=function(u){var d=this,l=d.predicate,p=d.thisArg,h=this.index++;try{var y=l.call(p||this,u,h,this.source);y&&this.notifyComplete(this.yieldIndex?h:u)}catch(_){this.destination.error(_)}},s.prototype._complete=function(){this.notifyComplete(this.yieldIndex?-1:void 0)},s}(Subscriber);function findIndex(a,s){return function(u){return u.lift(new FindValueOperator(a,u,!0,s))}}function first(a,s){var u=arguments.length>=2;return function(d){return d.pipe(a?filter(function(l,p){return a(l,p,d)}):identity,take(1),u?defaultIfEmpty(s):throwIfEmpty(function(){return new EmptyError}))}}var ObjectUnsubscribedErrorImpl=function(){function a(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return a.prototype=Object.create(Error.prototype),a}(),ObjectUnsubscribedError=ObjectUnsubscribedErrorImpl,SubjectSubscription=function(a){__extends(s,a);function s(u,d){var l=a.call(this)||this;return l.subject=u,l.subscriber=d,l.closed=!1,l}return s.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var u=this.subject,d=u.observers;if(this.subject=null,!(!d||d.length===0||u.isStopped||u.closed)){var l=d.indexOf(this.subscriber);l!==-1&&d.splice(l,1)}}},s}(Subscription),SubjectSubscriber=function(a){__extends(s,a);function s(u){var d=a.call(this,u)||this;return d.destination=u,d}return s}(Subscriber),Subject=function(a){__extends(s,a);function s(){var u=a.call(this)||this;return u.observers=[],u.closed=!1,u.isStopped=!1,u.hasError=!1,u.thrownError=null,u}return s.prototype[rxSubscriber]=function(){return new SubjectSubscriber(this)},s.prototype.lift=function(u){var d=new AnonymousSubject(this,this);return d.operator=u,d},s.prototype.next=function(u){if(this.closed)throw new ObjectUnsubscribedError;if(!this.isStopped)for(var d=this.observers,l=d.length,p=d.slice(),h=0;h<l;h++)p[h].next(u)},s.prototype.error=function(u){if(this.closed)throw new ObjectUnsubscribedError;this.hasError=!0,this.thrownError=u,this.isStopped=!0;for(var d=this.observers,l=d.length,p=d.slice(),h=0;h<l;h++)p[h].error(u);this.observers.length=0},s.prototype.complete=function(){if(this.closed)throw new ObjectUnsubscribedError;this.isStopped=!0;for(var u=this.observers,d=u.length,l=u.slice(),p=0;p<d;p++)l[p].complete();this.observers.length=0},s.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},s.prototype._trySubscribe=function(u){if(this.closed)throw new ObjectUnsubscribedError;return a.prototype._trySubscribe.call(this,u)},s.prototype._subscribe=function(u){if(this.closed)throw new ObjectUnsubscribedError;return this.hasError?(u.error(this.thrownError),Subscription.EMPTY):this.isStopped?(u.complete(),Subscription.EMPTY):(this.observers.push(u),new SubjectSubscription(this,u))},s.prototype.asObservable=function(){var u=new Observable;return u.source=this,u},s.create=function(u,d){return new AnonymousSubject(u,d)},s}(Observable),AnonymousSubject=function(a){__extends(s,a);function s(u,d){var l=a.call(this)||this;return l.destination=u,l.source=d,l}return s.prototype.next=function(u){var d=this.destination;d&&d.next&&d.next(u)},s.prototype.error=function(u){var d=this.destination;d&&d.error&&this.destination.error(u)},s.prototype.complete=function(){var u=this.destination;u&&u.complete&&this.destination.complete()},s.prototype._subscribe=function(u){var d=this.source;return d?this.source.subscribe(u):Subscription.EMPTY},s}(Subject);function groupBy(a,s,u,d){return function(l){return l.lift(new GroupByOperator(a,s,u,d))}}var GroupByOperator=function(){function a(s,u,d,l){this.keySelector=s,this.elementSelector=u,this.durationSelector=d,this.subjectSelector=l}return a.prototype.call=function(s,u){return u.subscribe(new GroupBySubscriber(s,this.keySelector,this.elementSelector,this.durationSelector,this.subjectSelector))},a}(),GroupBySubscriber=function(a){__extends(s,a);function s(u,d,l,p,h){var y=a.call(this,u)||this;return y.keySelector=d,y.elementSelector=l,y.durationSelector=p,y.subjectSelector=h,y.groups=null,y.attemptedToUnsubscribe=!1,y.count=0,y}return s.prototype._next=function(u){var d;try{d=this.keySelector(u)}catch(l){this.error(l);return}this._group(u,d)},s.prototype._group=function(u,d){var l=this.groups;l||(l=this.groups=new Map);var p=l.get(d),h;if(this.elementSelector)try{h=this.elementSelector(u)}catch(E){this.error(E)}else h=u;if(!p){p=this.subjectSelector?this.subjectSelector():new Subject,l.set(d,p);var y=new GroupedObservable(d,p,this);if(this.destination.next(y),this.durationSelector){var _=void 0;try{_=this.durationSelector(new GroupedObservable(d,p))}catch(E){this.error(E);return}this.add(_.subscribe(new GroupDurationSubscriber(d,p,this)))}}p.closed||p.next(h)},s.prototype._error=function(u){var d=this.groups;d&&(d.forEach(function(l,p){l.error(u)}),d.clear()),this.destination.error(u)},s.prototype._complete=function(){var u=this.groups;u&&(u.forEach(function(d,l){d.complete()}),u.clear()),this.destination.complete()},s.prototype.removeGroup=function(u){this.groups.delete(u)},s.prototype.unsubscribe=function(){this.closed||(this.attemptedToUnsubscribe=!0,this.count===0&&a.prototype.unsubscribe.call(this))},s}(Subscriber),GroupDurationSubscriber=function(a){__extends(s,a);function s(u,d,l){var p=a.call(this,d)||this;return p.key=u,p.group=d,p.parent=l,p}return s.prototype._next=function(u){this.complete()},s.prototype._unsubscribe=function(){var u=this,d=u.parent,l=u.key;this.key=this.parent=null,d&&d.removeGroup(l)},s}(Subscriber),GroupedObservable=function(a){__extends(s,a);function s(u,d,l){var p=a.call(this)||this;return p.key=u,p.groupSubject=d,p.refCountSubscription=l,p}return s.prototype._subscribe=function(u){var d=new Subscription,l=this,p=l.refCountSubscription,h=l.groupSubject;return p&&!p.closed&&d.add(new InnerRefCountSubscription(p)),d.add(h.subscribe(u)),d},s}(Observable),InnerRefCountSubscription=function(a){__extends(s,a);function s(u){var d=a.call(this)||this;return d.parent=u,u.count++,d}return s.prototype.unsubscribe=function(){var u=this.parent;!u.closed&&!this.closed&&(a.prototype.unsubscribe.call(this),u.count-=1,u.count===0&&u.attemptedToUnsubscribe&&u.unsubscribe())},s}(Subscription);function ignoreElements(){return function(s){return s.lift(new IgnoreElementsOperator)}}var IgnoreElementsOperator=function(){function a(){}return a.prototype.call=function(s,u){return u.subscribe(new IgnoreElementsSubscriber(s))},a}(),IgnoreElementsSubscriber=function(a){__extends(s,a);function s(){return a!==null&&a.apply(this,arguments)||this}return s.prototype._next=function(u){},s}(Subscriber);function isEmpty(){return function(a){return a.lift(new IsEmptyOperator)}}var IsEmptyOperator=function(){function a(){}return a.prototype.call=function(s,u){return u.subscribe(new IsEmptySubscriber(s))},a}(),IsEmptySubscriber=function(a){__extends(s,a);function s(u){return a.call(this,u)||this}return s.prototype.notifyComplete=function(u){var d=this.destination;d.next(u),d.complete()},s.prototype._next=function(u){this.notifyComplete(!1)},s.prototype._complete=function(){this.notifyComplete(!0)},s}(Subscriber);function takeLast(a){return function(u){return a===0?empty$1():u.lift(new TakeLastOperator(a))}}var TakeLastOperator=function(){function a(s){if(this.total=s,this.total<0)throw new ArgumentOutOfRangeError}return a.prototype.call=function(s,u){return u.subscribe(new TakeLastSubscriber(s,this.total))},a}(),TakeLastSubscriber=function(a){__extends(s,a);function s(u,d){var l=a.call(this,u)||this;return l.total=d,l.ring=new Array,l.count=0,l}return s.prototype._next=function(u){var d=this.ring,l=this.total,p=this.count++;if(d.length<l)d.push(u);else{var h=p%l;d[h]=u}},s.prototype._complete=function(){var u=this.destination,d=this.count;if(d>0)for(var l=this.count>=this.total?this.total:this.count,p=this.ring,h=0;h<l;h++){var y=d++%l;u.next(p[y])}u.complete()},s}(Subscriber);function last(a,s){var u=arguments.length>=2;return function(d){return d.pipe(a?filter(function(l,p){return a(l,p,d)}):identity,takeLast(1),u?defaultIfEmpty(s):throwIfEmpty(function(){return new EmptyError}))}}function mapTo(a){return function(s){return s.lift(new MapToOperator(a))}}var MapToOperator=function(){function a(s){this.value=s}return a.prototype.call=function(s,u){return u.subscribe(new MapToSubscriber(s,this.value))},a}(),MapToSubscriber=function(a){__extends(s,a);function s(u,d){var l=a.call(this,u)||this;return l.value=d,l}return s.prototype._next=function(u){this.destination.next(this.value)},s}(Subscriber);function materialize(){return function(s){return s.lift(new MaterializeOperator)}}var MaterializeOperator=function(){function a(){}return a.prototype.call=function(s,u){return u.subscribe(new MaterializeSubscriber(s))},a}(),MaterializeSubscriber=function(a){__extends(s,a);function s(u){return a.call(this,u)||this}return s.prototype._next=function(u){this.destination.next(Notification.createNext(u))},s.prototype._error=function(u){var d=this.destination;d.next(Notification.createError(u)),d.complete()},s.prototype._complete=function(){var u=this.destination;u.next(Notification.createComplete()),u.complete()},s}(Subscriber);function scan(a,s){var u=!1;return arguments.length>=2&&(u=!0),function(l){return l.lift(new ScanOperator(a,s,u))}}var ScanOperator=function(){function a(s,u,d){d===void 0&&(d=!1),this.accumulator=s,this.seed=u,this.hasSeed=d}return a.prototype.call=function(s,u){return u.subscribe(new ScanSubscriber(s,this.accumulator,this.seed,this.hasSeed))},a}(),ScanSubscriber=function(a){__extends(s,a);function s(u,d,l,p){var h=a.call(this,u)||this;return h.accumulator=d,h._seed=l,h.hasSeed=p,h.index=0,h}return Object.defineProperty(s.prototype,"seed",{get:function(){return this._seed},set:function(u){this.hasSeed=!0,this._seed=u},enumerable:!0,configurable:!0}),s.prototype._next=function(u){if(!this.hasSeed)this.seed=u,this.destination.next(u);else return this._tryNext(u)},s.prototype._tryNext=function(u){var d=this.index++,l;try{l=this.accumulator(this.seed,u,d)}catch(p){this.destination.error(p)}this.seed=l,this.destination.next(l)},s}(Subscriber);function reduce(a,s){return arguments.length>=2?function(d){return pipe(scan(a,s),takeLast(1),defaultIfEmpty(s))(d)}:function(d){return pipe(scan(function(l,p,h){return a(l,p,h+1)}),takeLast(1))(d)}}function max(a){var s=typeof a=="function"?function(u,d){return a(u,d)>0?u:d}:function(u,d){return u>d?u:d};return reduce(s)}function merge$2(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];var u=Number.POSITIVE_INFINITY,d=null,l=a[a.length-1];return isScheduler(l)?(d=a.pop(),a.length>1&&typeof a[a.length-1]=="number"&&(u=a.pop())):typeof l=="number"&&(u=a.pop()),d===null&&a.length===1&&a[0]instanceof Observable?a[0]:mergeAll(u)(fromArray(a,d))}function merge$1(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];return function(u){return u.lift.call(merge$2.apply(void 0,[u].concat(a)))}}function mergeMapTo(a,s,u){return u===void 0&&(u=Number.POSITIVE_INFINITY),typeof s=="function"?mergeMap(function(){return a},s,u):(typeof s=="number"&&(u=s),mergeMap(function(){return a},u))}function mergeScan(a,s,u){return u===void 0&&(u=Number.POSITIVE_INFINITY),function(d){return d.lift(new MergeScanOperator(a,s,u))}}var MergeScanOperator=function(){function a(s,u,d){this.accumulator=s,this.seed=u,this.concurrent=d}return a.prototype.call=function(s,u){return u.subscribe(new MergeScanSubscriber(s,this.accumulator,this.seed,this.concurrent))},a}(),MergeScanSubscriber=function(a){__extends(s,a);function s(u,d,l,p){var h=a.call(this,u)||this;return h.accumulator=d,h.acc=l,h.concurrent=p,h.hasValue=!1,h.hasCompleted=!1,h.buffer=[],h.active=0,h.index=0,h}return s.prototype._next=function(u){if(this.active<this.concurrent){var d=this.index++,l=this.destination,p=void 0;try{var h=this.accumulator;p=h(this.acc,u,d)}catch(y){return l.error(y)}this.active++,this._innerSub(p)}else this.buffer.push(u)},s.prototype._innerSub=function(u){var d=new SimpleInnerSubscriber(this),l=this.destination;l.add(d);var p=innerSubscribe(u,d);p!==d&&l.add(p)},s.prototype._complete=function(){this.hasCompleted=!0,this.active===0&&this.buffer.length===0&&(this.hasValue===!1&&this.destination.next(this.acc),this.destination.complete()),this.unsubscribe()},s.prototype.notifyNext=function(u){var d=this.destination;this.acc=u,this.hasValue=!0,d.next(u)},s.prototype.notifyComplete=function(){var u=this.buffer;this.active--,u.length>0?this._next(u.shift()):this.active===0&&this.hasCompleted&&(this.hasValue===!1&&this.destination.next(this.acc),this.destination.complete())},s}(SimpleOuterSubscriber);function min(a){var s=typeof a=="function"?function(u,d){return a(u,d)<0?u:d}:function(u,d){return u<d?u:d};return reduce(s)}function refCount(){return function(s){return s.lift(new RefCountOperator(s))}}var RefCountOperator=function(){function a(s){this.connectable=s}return a.prototype.call=function(s,u){var d=this.connectable;d._refCount++;var l=new RefCountSubscriber(s,d),p=u.subscribe(l);return l.closed||(l.connection=d.connect()),p},a}(),RefCountSubscriber=function(a){__extends(s,a);function s(u,d){var l=a.call(this,u)||this;return l.connectable=d,l}return s.prototype._unsubscribe=function(){var u=this.connectable;if(!u){this.connection=null;return}this.connectable=null;var d=u._refCount;if(d<=0){this.connection=null;return}if(u._refCount=d-1,d>1){this.connection=null;return}var l=this.connection,p=u._connection;this.connection=null,p&&(!l||p===l)&&p.unsubscribe()},s}(Subscriber),ConnectableObservable=function(a){__extends(s,a);function s(u,d){var l=a.call(this)||this;return l.source=u,l.subjectFactory=d,l._refCount=0,l._isComplete=!1,l}return s.prototype._subscribe=function(u){return this.getSubject().subscribe(u)},s.prototype.getSubject=function(){var u=this._subject;return(!u||u.isStopped)&&(this._subject=this.subjectFactory()),this._subject},s.prototype.connect=function(){var u=this._connection;return u||(this._isComplete=!1,u=this._connection=new Subscription,u.add(this.source.subscribe(new ConnectableSubscriber(this.getSubject(),this))),u.closed&&(this._connection=null,u=Subscription.EMPTY)),u},s.prototype.refCount=function(){return refCount()(this)},s}(Observable),connectableObservableDescriptor=function(){var a=ConnectableObservable.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:a._subscribe},_isComplete:{value:a._isComplete,writable:!0},getSubject:{value:a.getSubject},connect:{value:a.connect},refCount:{value:a.refCount}}}(),ConnectableSubscriber=function(a){__extends(s,a);function s(u,d){var l=a.call(this,u)||this;return l.connectable=d,l}return s.prototype._error=function(u){this._unsubscribe(),a.prototype._error.call(this,u)},s.prototype._complete=function(){this.connectable._isComplete=!0,this._unsubscribe(),a.prototype._complete.call(this)},s.prototype._unsubscribe=function(){var u=this.connectable;if(u){this.connectable=null;var d=u._connection;u._refCount=0,u._subject=null,u._connection=null,d&&d.unsubscribe()}},s}(SubjectSubscriber);function multicast(a,s){return function(d){var l;if(typeof a=="function"?l=a:l=function(){return a},typeof s=="function")return d.lift(new MulticastOperator(l,s));var p=Object.create(d,connectableObservableDescriptor);return p.source=d,p.subjectFactory=l,p}}var MulticastOperator=function(){function a(s,u){this.subjectFactory=s,this.selector=u}return a.prototype.call=function(s,u){var d=this.selector,l=this.subjectFactory(),p=d(l).subscribe(s);return p.add(u.subscribe(l)),p},a}();function observeOn(a,s){return s===void 0&&(s=0),function(d){return d.lift(new ObserveOnOperator(a,s))}}var ObserveOnOperator=function(){function a(s,u){u===void 0&&(u=0),this.scheduler=s,this.delay=u}return a.prototype.call=function(s,u){return u.subscribe(new ObserveOnSubscriber(s,this.scheduler,this.delay))},a}(),ObserveOnSubscriber=function(a){__extends(s,a);function s(u,d,l){l===void 0&&(l=0);var p=a.call(this,u)||this;return p.scheduler=d,p.delay=l,p}return s.dispatch=function(u){var d=u.notification,l=u.destination;d.observe(l),this.unsubscribe()},s.prototype.scheduleMessage=function(u){var d=this.destination;d.add(this.scheduler.schedule(s.dispatch,this.delay,new ObserveOnMessage(u,this.destination)))},s.prototype._next=function(u){this.scheduleMessage(Notification.createNext(u))},s.prototype._error=function(u){this.scheduleMessage(Notification.createError(u)),this.unsubscribe()},s.prototype._complete=function(){this.scheduleMessage(Notification.createComplete()),this.unsubscribe()},s}(Subscriber),ObserveOnMessage=function(){function a(s,u){this.notification=s,this.destination=u}return a}();function onErrorResumeNext(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];return a.length===1&&isArray$2(a[0])&&(a=a[0]),function(u){return u.lift(new OnErrorResumeNextOperator(a))}}var OnErrorResumeNextOperator=function(){function a(s){this.nextSources=s}return a.prototype.call=function(s,u){return u.subscribe(new OnErrorResumeNextSubscriber(s,this.nextSources))},a}(),OnErrorResumeNextSubscriber=function(a){__extends(s,a);function s(u,d){var l=a.call(this,u)||this;return l.destination=u,l.nextSources=d,l}return s.prototype.notifyError=function(){this.subscribeToNextSource()},s.prototype.notifyComplete=function(){this.subscribeToNextSource()},s.prototype._error=function(u){this.subscribeToNextSource(),this.unsubscribe()},s.prototype._complete=function(){this.subscribeToNextSource(),this.unsubscribe()},s.prototype.subscribeToNextSource=function(){var u=this.nextSources.shift();if(u){var d=new SimpleInnerSubscriber(this),l=this.destination;l.add(d);var p=innerSubscribe(u,d);p!==d&&l.add(p)}else this.destination.complete()},s}(SimpleOuterSubscriber);function pairwise(){return function(a){return a.lift(new PairwiseOperator)}}var PairwiseOperator=function(){function a(){}return a.prototype.call=function(s,u){return u.subscribe(new PairwiseSubscriber(s))},a}(),PairwiseSubscriber=function(a){__extends(s,a);function s(u){var d=a.call(this,u)||this;return d.hasPrev=!1,d}return s.prototype._next=function(u){var d;this.hasPrev?d=[this.prev,u]:this.hasPrev=!0,this.prev=u,d&&this.destination.next(d)},s}(Subscriber);function not(a,s){function u(){return!u.pred.apply(u.thisArg,arguments)}return u.pred=a,u.thisArg=s,u}function partition(a,s){return function(u){return[filter(a,s)(u),filter(not(a,s))(u)]}}function pluck(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];var u=a.length;if(u===0)throw new Error("list of properties cannot be empty.");return function(d){return map(plucker(a,u))(d)}}function plucker(a,s){var u=function(d){for(var l=d,p=0;p<s;p++){var h=l!=null?l[a[p]]:void 0;if(h!==void 0)l=h;else return}return l};return u}function publish(a){return a?multicast(function(){return new Subject},a):multicast(new Subject)}var BehaviorSubject=function(a){__extends(s,a);function s(u){var d=a.call(this)||this;return d._value=u,d}return Object.defineProperty(s.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),s.prototype._subscribe=function(u){var d=a.prototype._subscribe.call(this,u);return d&&!d.closed&&u.next(this._value),d},s.prototype.getValue=function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new ObjectUnsubscribedError;return this._value},s.prototype.next=function(u){a.prototype.next.call(this,this._value=u)},s}(Subject);function publishBehavior(a){return function(s){return multicast(new BehaviorSubject(a))(s)}}var AsyncSubject=function(a){__extends(s,a);function s(){var u=a!==null&&a.apply(this,arguments)||this;return u.value=null,u.hasNext=!1,u.hasCompleted=!1,u}return s.prototype._subscribe=function(u){return this.hasError?(u.error(this.thrownError),Subscription.EMPTY):this.hasCompleted&&this.hasNext?(u.next(this.value),u.complete(),Subscription.EMPTY):a.prototype._subscribe.call(this,u)},s.prototype.next=function(u){this.hasCompleted||(this.value=u,this.hasNext=!0)},s.prototype.error=function(u){this.hasCompleted||a.prototype.error.call(this,u)},s.prototype.complete=function(){this.hasCompleted=!0,this.hasNext&&a.prototype.next.call(this,this.value),a.prototype.complete.call(this)},s}(Subject);function publishLast(){return function(a){return multicast(new AsyncSubject)(a)}}var QueueAction=function(a){__extends(s,a);function s(u,d){var l=a.call(this,u,d)||this;return l.scheduler=u,l.work=d,l}return s.prototype.schedule=function(u,d){return d===void 0&&(d=0),d>0?a.prototype.schedule.call(this,u,d):(this.delay=d,this.state=u,this.scheduler.flush(this),this)},s.prototype.execute=function(u,d){return d>0||this.closed?a.prototype.execute.call(this,u,d):this._execute(u,d)},s.prototype.requestAsyncId=function(u,d,l){return l===void 0&&(l=0),l!==null&&l>0||l===null&&this.delay>0?a.prototype.requestAsyncId.call(this,u,d,l):u.flush(this)},s}(AsyncAction),QueueScheduler=function(a){__extends(s,a);function s(){return a!==null&&a.apply(this,arguments)||this}return s}(AsyncScheduler),queueScheduler=new QueueScheduler(QueueAction),queue=queueScheduler,ReplaySubject=function(a){__extends(s,a);function s(u,d,l){u===void 0&&(u=Number.POSITIVE_INFINITY),d===void 0&&(d=Number.POSITIVE_INFINITY);var p=a.call(this)||this;return p.scheduler=l,p._events=[],p._infiniteTimeWindow=!1,p._bufferSize=u<1?1:u,p._windowTime=d<1?1:d,d===Number.POSITIVE_INFINITY?(p._infiniteTimeWindow=!0,p.next=p.nextInfiniteTimeWindow):p.next=p.nextTimeWindow,p}return s.prototype.nextInfiniteTimeWindow=function(u){if(!this.isStopped){var d=this._events;d.push(u),d.length>this._bufferSize&&d.shift()}a.prototype.next.call(this,u)},s.prototype.nextTimeWindow=function(u){this.isStopped||(this._events.push(new ReplayEvent(this._getNow(),u)),this._trimBufferThenGetEvents()),a.prototype.next.call(this,u)},s.prototype._subscribe=function(u){var d=this._infiniteTimeWindow,l=d?this._events:this._trimBufferThenGetEvents(),p=this.scheduler,h=l.length,y;if(this.closed)throw new ObjectUnsubscribedError;if(this.isStopped||this.hasError?y=Subscription.EMPTY:(this.observers.push(u),y=new SubjectSubscription(this,u)),p&&u.add(u=new ObserveOnSubscriber(u,p)),d)for(var _=0;_<h&&!u.closed;_++)u.next(l[_]);else for(var _=0;_<h&&!u.closed;_++)u.next(l[_].value);return this.hasError?u.error(this.thrownError):this.isStopped&&u.complete(),y},s.prototype._getNow=function(){return(this.scheduler||queue).now()},s.prototype._trimBufferThenGetEvents=function(){for(var u=this._getNow(),d=this._bufferSize,l=this._windowTime,p=this._events,h=p.length,y=0;y<h&&!(u-p[y].time<l);)y++;return h>d&&(y=Math.max(y,h-d)),y>0&&p.splice(0,y),p},s}(Subject),ReplayEvent=function(){function a(s,u){this.time=s,this.value=u}return a}();function publishReplay(a,s,u,d){u&&typeof u!="function"&&(d=u);var l=typeof u=="function"?u:void 0,p=new ReplaySubject(a,s,d);return function(h){return multicast(function(){return p},l)(h)}}function race$1(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];if(a.length===1)if(isArray$2(a[0]))a=a[0];else return a[0];return fromArray(a,void 0).lift(new RaceOperator)}var RaceOperator=function(){function a(){}return a.prototype.call=function(s,u){return u.subscribe(new RaceSubscriber(s))},a}(),RaceSubscriber=function(a){__extends(s,a);function s(u){var d=a.call(this,u)||this;return d.hasFirst=!1,d.observables=[],d.subscriptions=[],d}return s.prototype._next=function(u){this.observables.push(u)},s.prototype._complete=function(){var u=this.observables,d=u.length;if(d===0)this.destination.complete();else{for(var l=0;l<d&&!this.hasFirst;l++){var p=u[l],h=subscribeToResult(this,p,void 0,l);this.subscriptions&&this.subscriptions.push(h),this.add(h)}this.observables=null}},s.prototype.notifyNext=function(u,d,l){if(!this.hasFirst){this.hasFirst=!0;for(var p=0;p<this.subscriptions.length;p++)if(p!==l){var h=this.subscriptions[p];h.unsubscribe(),this.remove(h)}this.subscriptions=null}this.destination.next(d)},s}(OuterSubscriber);function race(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];return function(d){return a.length===1&&isArray$2(a[0])&&(a=a[0]),d.lift.call(race$1.apply(void 0,[d].concat(a)))}}function repeat(a){return a===void 0&&(a=-1),function(s){return a===0?empty$1():a<0?s.lift(new RepeatOperator(-1,s)):s.lift(new RepeatOperator(a-1,s))}}var RepeatOperator=function(){function a(s,u){this.count=s,this.source=u}return a.prototype.call=function(s,u){return u.subscribe(new RepeatSubscriber(s,this.count,this.source))},a}(),RepeatSubscriber=function(a){__extends(s,a);function s(u,d,l){var p=a.call(this,u)||this;return p.count=d,p.source=l,p}return s.prototype.complete=function(){if(!this.isStopped){var u=this,d=u.source,l=u.count;if(l===0)return a.prototype.complete.call(this);l>-1&&(this.count=l-1),d.subscribe(this._unsubscribeAndRecycle())}},s}(Subscriber);function repeatWhen(a){return function(s){return s.lift(new RepeatWhenOperator(a))}}var RepeatWhenOperator=function(){function a(s){this.notifier=s}return a.prototype.call=function(s,u){return u.subscribe(new RepeatWhenSubscriber(s,this.notifier,u))},a}(),RepeatWhenSubscriber=function(a){__extends(s,a);function s(u,d,l){var p=a.call(this,u)||this;return p.notifier=d,p.source=l,p.sourceIsBeingSubscribedTo=!0,p}return s.prototype.notifyNext=function(){this.sourceIsBeingSubscribedTo=!0,this.source.subscribe(this)},s.prototype.notifyComplete=function(){if(this.sourceIsBeingSubscribedTo===!1)return a.prototype.complete.call(this)},s.prototype.complete=function(){if(this.sourceIsBeingSubscribedTo=!1,!this.isStopped){if(this.retries||this.subscribeToRetries(),!this.retriesSubscription||this.retriesSubscription.closed)return a.prototype.complete.call(this);this._unsubscribeAndRecycle(),this.notifications.next(void 0)}},s.prototype._unsubscribe=function(){var u=this,d=u.notifications,l=u.retriesSubscription;d&&(d.unsubscribe(),this.notifications=void 0),l&&(l.unsubscribe(),this.retriesSubscription=void 0),this.retries=void 0},s.prototype._unsubscribeAndRecycle=function(){var u=this._unsubscribe;return this._unsubscribe=null,a.prototype._unsubscribeAndRecycle.call(this),this._unsubscribe=u,this},s.prototype.subscribeToRetries=function(){this.notifications=new Subject;var u;try{var d=this.notifier;u=d(this.notifications)}catch{return a.prototype.complete.call(this)}this.retries=u,this.retriesSubscription=innerSubscribe(u,new SimpleInnerSubscriber(this))},s}(SimpleOuterSubscriber);function retry(a){return a===void 0&&(a=-1),function(s){return s.lift(new RetryOperator(a,s))}}var RetryOperator=function(){function a(s,u){this.count=s,this.source=u}return a.prototype.call=function(s,u){return u.subscribe(new RetrySubscriber(s,this.count,this.source))},a}(),RetrySubscriber=function(a){__extends(s,a);function s(u,d,l){var p=a.call(this,u)||this;return p.count=d,p.source=l,p}return s.prototype.error=function(u){if(!this.isStopped){var d=this,l=d.source,p=d.count;if(p===0)return a.prototype.error.call(this,u);p>-1&&(this.count=p-1),l.subscribe(this._unsubscribeAndRecycle())}},s}(Subscriber);function retryWhen(a){return function(s){return s.lift(new RetryWhenOperator(a,s))}}var RetryWhenOperator=function(){function a(s,u){this.notifier=s,this.source=u}return a.prototype.call=function(s,u){return u.subscribe(new RetryWhenSubscriber(s,this.notifier,this.source))},a}(),RetryWhenSubscriber=function(a){__extends(s,a);function s(u,d,l){var p=a.call(this,u)||this;return p.notifier=d,p.source=l,p}return s.prototype.error=function(u){if(!this.isStopped){var d=this.errors,l=this.retries,p=this.retriesSubscription;if(l)this.errors=void 0,this.retriesSubscription=void 0;else{d=new Subject;try{var h=this.notifier;l=h(d)}catch(y){return a.prototype.error.call(this,y)}p=innerSubscribe(l,new SimpleInnerSubscriber(this))}this._unsubscribeAndRecycle(),this.errors=d,this.retries=l,this.retriesSubscription=p,d.next(u)}},s.prototype._unsubscribe=function(){var u=this,d=u.errors,l=u.retriesSubscription;d&&(d.unsubscribe(),this.errors=void 0),l&&(l.unsubscribe(),this.retriesSubscription=void 0),this.retries=void 0},s.prototype.notifyNext=function(){var u=this._unsubscribe;this._unsubscribe=null,this._unsubscribeAndRecycle(),this._unsubscribe=u,this.source.subscribe(this)},s}(SimpleOuterSubscriber);function sample(a){return function(s){return s.lift(new SampleOperator(a))}}var SampleOperator=function(){function a(s){this.notifier=s}return a.prototype.call=function(s,u){var d=new SampleSubscriber(s),l=u.subscribe(d);return l.add(innerSubscribe(this.notifier,new SimpleInnerSubscriber(d))),l},a}(),SampleSubscriber=function(a){__extends(s,a);function s(){var u=a!==null&&a.apply(this,arguments)||this;return u.hasValue=!1,u}return s.prototype._next=function(u){this.value=u,this.hasValue=!0},s.prototype.notifyNext=function(){this.emitValue()},s.prototype.notifyComplete=function(){this.emitValue()},s.prototype.emitValue=function(){this.hasValue&&(this.hasValue=!1,this.destination.next(this.value))},s}(SimpleOuterSubscriber);function sampleTime(a,s){return s===void 0&&(s=async),function(u){return u.lift(new SampleTimeOperator(a,s))}}var SampleTimeOperator=function(){function a(s,u){this.period=s,this.scheduler=u}return a.prototype.call=function(s,u){return u.subscribe(new SampleTimeSubscriber(s,this.period,this.scheduler))},a}(),SampleTimeSubscriber=function(a){__extends(s,a);function s(u,d,l){var p=a.call(this,u)||this;return p.period=d,p.scheduler=l,p.hasValue=!1,p.add(l.schedule(dispatchNotification,d,{subscriber:p,period:d})),p}return s.prototype._next=function(u){this.lastValue=u,this.hasValue=!0},s.prototype.notifyNext=function(){this.hasValue&&(this.hasValue=!1,this.destination.next(this.lastValue))},s}(Subscriber);function dispatchNotification(a){var s=a.subscriber,u=a.period;s.notifyNext(),this.schedule(a,u)}function sequenceEqual(a,s){return function(u){return u.lift(new SequenceEqualOperator(a,s))}}var SequenceEqualOperator=function(){function a(s,u){this.compareTo=s,this.comparator=u}return a.prototype.call=function(s,u){return u.subscribe(new SequenceEqualSubscriber(s,this.compareTo,this.comparator))},a}(),SequenceEqualSubscriber=function(a){__extends(s,a);function s(u,d,l){var p=a.call(this,u)||this;return p.compareTo=d,p.comparator=l,p._a=[],p._b=[],p._oneComplete=!1,p.destination.add(d.subscribe(new SequenceEqualCompareToSubscriber(u,p))),p}return s.prototype._next=function(u){this._oneComplete&&this._b.length===0?this.emit(!1):(this._a.push(u),this.checkValues())},s.prototype._complete=function(){this._oneComplete?this.emit(this._a.length===0&&this._b.length===0):this._oneComplete=!0,this.unsubscribe()},s.prototype.checkValues=function(){for(var u=this,d=u._a,l=u._b,p=u.comparator;d.length>0&&l.length>0;){var h=d.shift(),y=l.shift(),_=!1;try{_=p?p(h,y):h===y}catch(E){this.destination.error(E)}_||this.emit(!1)}},s.prototype.emit=function(u){var d=this.destination;d.next(u),d.complete()},s.prototype.nextB=function(u){this._oneComplete&&this._a.length===0?this.emit(!1):(this._b.push(u),this.checkValues())},s.prototype.completeB=function(){this._oneComplete?this.emit(this._a.length===0&&this._b.length===0):this._oneComplete=!0},s}(Subscriber),SequenceEqualCompareToSubscriber=function(a){__extends(s,a);function s(u,d){var l=a.call(this,u)||this;return l.parent=d,l}return s.prototype._next=function(u){this.parent.nextB(u)},s.prototype._error=function(u){this.parent.error(u),this.unsubscribe()},s.prototype._complete=function(){this.parent.completeB(),this.unsubscribe()},s}(Subscriber);function shareSubjectFactory(){return new Subject}function share(){return function(a){return refCount()(multicast(shareSubjectFactory)(a))}}function shareReplay(a,s,u){var d;return a&&typeof a=="object"?d=a:d={bufferSize:a,windowTime:s,refCount:!1,scheduler:u},function(l){return l.lift(shareReplayOperator(d))}}function shareReplayOperator(a){var s=a.bufferSize,u=s===void 0?Number.POSITIVE_INFINITY:s,d=a.windowTime,l=d===void 0?Number.POSITIVE_INFINITY:d,p=a.refCount,h=a.scheduler,y,_=0,E,I=!1,N=!1;return function(C){_++;var D;!y||I?(I=!1,y=new ReplaySubject(u,l,h),D=y.subscribe(this),E=C.subscribe({next:function(V){y.next(V)},error:function(V){I=!0,y.error(V)},complete:function(){N=!0,E=void 0,y.complete()}}),N&&(E=void 0)):D=y.subscribe(this),this.add(function(){_--,D.unsubscribe(),D=void 0,E&&!N&&p&&_===0&&(E.unsubscribe(),E=void 0,y=void 0)})}}function single(a){return function(s){return s.lift(new SingleOperator(a,s))}}var SingleOperator=function(){function a(s,u){this.predicate=s,this.source=u}return a.prototype.call=function(s,u){return u.subscribe(new SingleSubscriber(s,this.predicate,this.source))},a}(),SingleSubscriber=function(a){__extends(s,a);function s(u,d,l){var p=a.call(this,u)||this;return p.predicate=d,p.source=l,p.seenValue=!1,p.index=0,p}return s.prototype.applySingleValue=function(u){this.seenValue?this.destination.error("Sequence contains more than one element"):(this.seenValue=!0,this.singleValue=u)},s.prototype._next=function(u){var d=this.index++;this.predicate?this.tryNext(u,d):this.applySingleValue(u)},s.prototype.tryNext=function(u,d){try{this.predicate(u,d,this.source)&&this.applySingleValue(u)}catch(l){this.destination.error(l)}},s.prototype._complete=function(){var u=this.destination;this.index>0?(u.next(this.seenValue?this.singleValue:void 0),u.complete()):u.error(new EmptyError)},s}(Subscriber);function skip(a){return function(s){return s.lift(new SkipOperator(a))}}var SkipOperator=function(){function a(s){this.total=s}return a.prototype.call=function(s,u){return u.subscribe(new SkipSubscriber(s,this.total))},a}(),SkipSubscriber=function(a){__extends(s,a);function s(u,d){var l=a.call(this,u)||this;return l.total=d,l.count=0,l}return s.prototype._next=function(u){++this.count>this.total&&this.destination.next(u)},s}(Subscriber);function skipLast(a){return function(s){return s.lift(new SkipLastOperator(a))}}var SkipLastOperator=function(){function a(s){if(this._skipCount=s,this._skipCount<0)throw new ArgumentOutOfRangeError}return a.prototype.call=function(s,u){return this._skipCount===0?u.subscribe(new Subscriber(s)):u.subscribe(new SkipLastSubscriber(s,this._skipCount))},a}(),SkipLastSubscriber=function(a){__extends(s,a);function s(u,d){var l=a.call(this,u)||this;return l._skipCount=d,l._count=0,l._ring=new Array(d),l}return s.prototype._next=function(u){var d=this._skipCount,l=this._count++;if(l<d)this._ring[l]=u;else{var p=l%d,h=this._ring,y=h[p];h[p]=u,this.destination.next(y)}},s}(Subscriber);function skipUntil(a){return function(s){return s.lift(new SkipUntilOperator(a))}}var SkipUntilOperator=function(){function a(s){this.notifier=s}return a.prototype.call=function(s,u){return u.subscribe(new SkipUntilSubscriber(s,this.notifier))},a}(),SkipUntilSubscriber=function(a){__extends(s,a);function s(u,d){var l=a.call(this,u)||this;l.hasValue=!1;var p=new SimpleInnerSubscriber(l);l.add(p),l.innerSubscription=p;var h=innerSubscribe(d,p);return h!==p&&(l.add(h),l.innerSubscription=h),l}return s.prototype._next=function(u){this.hasValue&&a.prototype._next.call(this,u)},s.prototype.notifyNext=function(){this.hasValue=!0,this.innerSubscription&&this.innerSubscription.unsubscribe()},s.prototype.notifyComplete=function(){},s}(SimpleOuterSubscriber);function skipWhile(a){return function(s){return s.lift(new SkipWhileOperator(a))}}var SkipWhileOperator=function(){function a(s){this.predicate=s}return a.prototype.call=function(s,u){return u.subscribe(new SkipWhileSubscriber(s,this.predicate))},a}(),SkipWhileSubscriber=function(a){__extends(s,a);function s(u,d){var l=a.call(this,u)||this;return l.predicate=d,l.skipping=!0,l.index=0,l}return s.prototype._next=function(u){var d=this.destination;this.skipping&&this.tryCallPredicate(u),this.skipping||d.next(u)},s.prototype.tryCallPredicate=function(u){try{var d=this.predicate(u,this.index++);this.skipping=Boolean(d)}catch(l){this.destination.error(l)}},s}(Subscriber);function startWith(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];var u=a[a.length-1];return isScheduler(u)?(a.pop(),function(d){return concat$1(a,d,u)}):function(d){return concat$1(a,d)}}var nextHandle=1,RESOLVED=function(){return Promise.resolve()}(),activeHandles={};function findAndClearHandle(a){return a in activeHandles?(delete activeHandles[a],!0):!1}var Immediate={setImmediate:function(a){var s=nextHandle++;return activeHandles[s]=!0,RESOLVED.then(function(){return findAndClearHandle(s)&&a()}),s},clearImmediate:function(a){findAndClearHandle(a)}},AsapAction=function(a){__extends(s,a);function s(u,d){var l=a.call(this,u,d)||this;return l.scheduler=u,l.work=d,l}return s.prototype.requestAsyncId=function(u,d,l){return l===void 0&&(l=0),l!==null&&l>0?a.prototype.requestAsyncId.call(this,u,d,l):(u.actions.push(this),u.scheduled||(u.scheduled=Immediate.setImmediate(u.flush.bind(u,null))))},s.prototype.recycleAsyncId=function(u,d,l){if(l===void 0&&(l=0),l!==null&&l>0||l===null&&this.delay>0)return a.prototype.recycleAsyncId.call(this,u,d,l);u.actions.length===0&&(Immediate.clearImmediate(d),u.scheduled=void 0)},s}(AsyncAction),AsapScheduler=function(a){__extends(s,a);function s(){return a!==null&&a.apply(this,arguments)||this}return s.prototype.flush=function(u){this.active=!0,this.scheduled=void 0;var d=this.actions,l,p=-1,h=d.length;u=u||d.shift();do if(l=u.execute(u.state,u.delay))break;while(++p<h&&(u=d.shift()));if(this.active=!1,l){for(;++p<h&&(u=d.shift());)u.unsubscribe();throw l}},s}(AsyncScheduler),asapScheduler=new AsapScheduler(AsapAction),asap=asapScheduler,SubscribeOnObservable=function(a){__extends(s,a);function s(u,d,l){d===void 0&&(d=0),l===void 0&&(l=asap);var p=a.call(this)||this;return p.source=u,p.delayTime=d,p.scheduler=l,(!isNumeric(d)||d<0)&&(p.delayTime=0),(!l||typeof l.schedule!="function")&&(p.scheduler=asap),p}return s.create=function(u,d,l){return d===void 0&&(d=0),l===void 0&&(l=asap),new s(u,d,l)},s.dispatch=function(u){var d=u.source,l=u.subscriber;return this.add(d.subscribe(l))},s.prototype._subscribe=function(u){var d=this.delayTime,l=this.source,p=this.scheduler;return p.schedule(s.dispatch,d,{source:l,subscriber:u})},s}(Observable);function subscribeOn(a,s){return s===void 0&&(s=0),function(d){return d.lift(new SubscribeOnOperator(a,s))}}var SubscribeOnOperator=function(){function a(s,u){this.scheduler=s,this.delay=u}return a.prototype.call=function(s,u){return new SubscribeOnObservable(u,this.delay,this.scheduler).subscribe(s)},a}();function switchMap(a,s){return typeof s=="function"?function(u){return u.pipe(switchMap(function(d,l){return from(a(d,l)).pipe(map(function(p,h){return s(d,p,l,h)}))}))}:function(u){return u.lift(new SwitchMapOperator(a))}}var SwitchMapOperator=function(){function a(s){this.project=s}return a.prototype.call=function(s,u){return u.subscribe(new SwitchMapSubscriber(s,this.project))},a}(),SwitchMapSubscriber=function(a){__extends(s,a);function s(u,d){var l=a.call(this,u)||this;return l.project=d,l.index=0,l}return s.prototype._next=function(u){var d,l=this.index++;try{d=this.project(u,l)}catch(p){this.destination.error(p);return}this._innerSub(d)},s.prototype._innerSub=function(u){var d=this.innerSubscription;d&&d.unsubscribe();var l=new SimpleInnerSubscriber(this),p=this.destination;p.add(l),this.innerSubscription=innerSubscribe(u,l),this.innerSubscription!==l&&p.add(this.innerSubscription)},s.prototype._complete=function(){var u=this.innerSubscription;(!u||u.closed)&&a.prototype._complete.call(this),this.unsubscribe()},s.prototype._unsubscribe=function(){this.innerSubscription=void 0},s.prototype.notifyComplete=function(){this.innerSubscription=void 0,this.isStopped&&a.prototype._complete.call(this)},s.prototype.notifyNext=function(u){this.destination.next(u)},s}(SimpleOuterSubscriber);function switchAll(){return switchMap(identity)}function switchMapTo(a,s){return s?switchMap(function(){return a},s):switchMap(function(){return a})}function takeUntil(a){return function(s){return s.lift(new TakeUntilOperator(a))}}var TakeUntilOperator=function(){function a(s){this.notifier=s}return a.prototype.call=function(s,u){var d=new TakeUntilSubscriber(s),l=innerSubscribe(this.notifier,new SimpleInnerSubscriber(d));return l&&!d.seenValue?(d.add(l),u.subscribe(d)):d},a}(),TakeUntilSubscriber=function(a){__extends(s,a);function s(u){var d=a.call(this,u)||this;return d.seenValue=!1,d}return s.prototype.notifyNext=function(){this.seenValue=!0,this.complete()},s.prototype.notifyComplete=function(){},s}(SimpleOuterSubscriber);function takeWhile(a,s){return s===void 0&&(s=!1),function(u){return u.lift(new TakeWhileOperator(a,s))}}var TakeWhileOperator=function(){function a(s,u){this.predicate=s,this.inclusive=u}return a.prototype.call=function(s,u){return u.subscribe(new TakeWhileSubscriber(s,this.predicate,this.inclusive))},a}(),TakeWhileSubscriber=function(a){__extends(s,a);function s(u,d,l){var p=a.call(this,u)||this;return p.predicate=d,p.inclusive=l,p.index=0,p}return s.prototype._next=function(u){var d=this.destination,l;try{l=this.predicate(u,this.index++)}catch(p){d.error(p);return}this.nextOrComplete(u,l)},s.prototype.nextOrComplete=function(u,d){var l=this.destination;Boolean(d)?l.next(u):(this.inclusive&&l.next(u),l.complete())},s}(Subscriber);function noop$1(){}function tap(a,s,u){return function(l){return l.lift(new DoOperator(a,s,u))}}var DoOperator=function(){function a(s,u,d){this.nextOrObserver=s,this.error=u,this.complete=d}return a.prototype.call=function(s,u){return u.subscribe(new TapSubscriber(s,this.nextOrObserver,this.error,this.complete))},a}(),TapSubscriber=function(a){__extends(s,a);function s(u,d,l,p){var h=a.call(this,u)||this;return h._tapNext=noop$1,h._tapError=noop$1,h._tapComplete=noop$1,h._tapError=l||noop$1,h._tapComplete=p||noop$1,isFunction$1(d)?(h._context=h,h._tapNext=d):d&&(h._context=d,h._tapNext=d.next||noop$1,h._tapError=d.error||noop$1,h._tapComplete=d.complete||noop$1),h}return s.prototype._next=function(u){try{this._tapNext.call(this._context,u)}catch(d){this.destination.error(d);return}this.destination.next(u)},s.prototype._error=function(u){try{this._tapError.call(this._context,u)}catch(d){this.destination.error(d);return}this.destination.error(u)},s.prototype._complete=function(){try{this._tapComplete.call(this._context)}catch(u){this.destination.error(u);return}return this.destination.complete()},s}(Subscriber),defaultThrottleConfig={leading:!0,trailing:!1};function throttle(a,s){return s===void 0&&(s=defaultThrottleConfig),function(u){return u.lift(new ThrottleOperator(a,!!s.leading,!!s.trailing))}}var ThrottleOperator=function(){function a(s,u,d){this.durationSelector=s,this.leading=u,this.trailing=d}return a.prototype.call=function(s,u){return u.subscribe(new ThrottleSubscriber(s,this.durationSelector,this.leading,this.trailing))},a}(),ThrottleSubscriber=function(a){__extends(s,a);function s(u,d,l,p){var h=a.call(this,u)||this;return h.destination=u,h.durationSelector=d,h._leading=l,h._trailing=p,h._hasValue=!1,h}return s.prototype._next=function(u){this._hasValue=!0,this._sendValue=u,this._throttled||(this._leading?this.send():this.throttle(u))},s.prototype.send=function(){var u=this,d=u._hasValue,l=u._sendValue;d&&(this.destination.next(l),this.throttle(l)),this._hasValue=!1,this._sendValue=void 0},s.prototype.throttle=function(u){var d=this.tryDurationSelector(u);d&&this.add(this._throttled=innerSubscribe(d,new SimpleInnerSubscriber(this)))},s.prototype.tryDurationSelector=function(u){try{return this.durationSelector(u)}catch(d){return this.destination.error(d),null}},s.prototype.throttlingDone=function(){var u=this,d=u._throttled,l=u._trailing;d&&d.unsubscribe(),this._throttled=void 0,l&&this.send()},s.prototype.notifyNext=function(){this.throttlingDone()},s.prototype.notifyComplete=function(){this.throttlingDone()},s}(SimpleOuterSubscriber);function throttleTime(a,s,u){return s===void 0&&(s=async),u===void 0&&(u=defaultThrottleConfig),function(d){return d.lift(new ThrottleTimeOperator(a,s,u.leading,u.trailing))}}var ThrottleTimeOperator=function(){function a(s,u,d,l){this.duration=s,this.scheduler=u,this.leading=d,this.trailing=l}return a.prototype.call=function(s,u){return u.subscribe(new ThrottleTimeSubscriber(s,this.duration,this.scheduler,this.leading,this.trailing))},a}(),ThrottleTimeSubscriber=function(a){__extends(s,a);function s(u,d,l,p,h){var y=a.call(this,u)||this;return y.duration=d,y.scheduler=l,y.leading=p,y.trailing=h,y._hasTrailingValue=!1,y._trailingValue=null,y}return s.prototype._next=function(u){this.throttled?this.trailing&&(this._trailingValue=u,this._hasTrailingValue=!0):(this.add(this.throttled=this.scheduler.schedule(dispatchNext,this.duration,{subscriber:this})),this.leading?this.destination.next(u):this.trailing&&(this._trailingValue=u,this._hasTrailingValue=!0))},s.prototype._complete=function(){this._hasTrailingValue?(this.destination.next(this._trailingValue),this.destination.complete()):this.destination.complete()},s.prototype.clearThrottle=function(){var u=this.throttled;u&&(this.trailing&&this._hasTrailingValue&&(this.destination.next(this._trailingValue),this._trailingValue=null,this._hasTrailingValue=!1),u.unsubscribe(),this.remove(u),this.throttled=null)},s}(Subscriber);function dispatchNext(a){var s=a.subscriber;s.clearThrottle()}function defer(a){return new Observable(function(s){var u;try{u=a()}catch(l){s.error(l);return}var d=u?from(u):empty$1();return d.subscribe(s)})}function timeInterval(a){return a===void 0&&(a=async),function(s){return defer(function(){return s.pipe(scan(function(u,d){var l=u.current;return{value:d,current:a.now(),last:l}},{current:a.now(),value:void 0,last:void 0}),map(function(u){var d=u.current,l=u.last,p=u.value;return new TimeInterval(p,d-l)}))})}}var TimeInterval=function(){function a(s,u){this.value=s,this.interval=u}return a}(),TimeoutErrorImpl=function(){function a(){return Error.call(this),this.message="Timeout has occurred",this.name="TimeoutError",this}return a.prototype=Object.create(Error.prototype),a}(),TimeoutError=TimeoutErrorImpl;function timeoutWith(a,s,u){return u===void 0&&(u=async),function(d){var l=isDate$1(a),p=l?+a-u.now():Math.abs(a);return d.lift(new TimeoutWithOperator(p,l,s,u))}}var TimeoutWithOperator=function(){function a(s,u,d,l){this.waitFor=s,this.absoluteTimeout=u,this.withObservable=d,this.scheduler=l}return a.prototype.call=function(s,u){return u.subscribe(new TimeoutWithSubscriber(s,this.absoluteTimeout,this.waitFor,this.withObservable,this.scheduler))},a}(),TimeoutWithSubscriber=function(a){__extends(s,a);function s(u,d,l,p,h){var y=a.call(this,u)||this;return y.absoluteTimeout=d,y.waitFor=l,y.withObservable=p,y.scheduler=h,y.scheduleTimeout(),y}return s.dispatchTimeout=function(u){var d=u.withObservable;u._unsubscribeAndRecycle(),u.add(innerSubscribe(d,new SimpleInnerSubscriber(u)))},s.prototype.scheduleTimeout=function(){var u=this.action;u?this.action=u.schedule(this,this.waitFor):this.add(this.action=this.scheduler.schedule(s.dispatchTimeout,this.waitFor,this))},s.prototype._next=function(u){this.absoluteTimeout||this.scheduleTimeout(),a.prototype._next.call(this,u)},s.prototype._unsubscribe=function(){this.action=void 0,this.scheduler=null,this.withObservable=null},s}(SimpleOuterSubscriber);function timeout(a,s){return s===void 0&&(s=async),timeoutWith(a,throwError(new TimeoutError),s)}function timestamp(a){return a===void 0&&(a=async),map(function(s){return new Timestamp(s,a.now())})}var Timestamp=function(){function a(s,u){this.value=s,this.timestamp=u}return a}();function toArrayReducer(a,s,u){return u===0?[s]:(a.push(s),a)}function toArray(){return reduce(toArrayReducer,[])}function window$1(a){return function(u){return u.lift(new WindowOperator$1(a))}}var WindowOperator$1=function(){function a(s){this.windowBoundaries=s}return a.prototype.call=function(s,u){var d=new WindowSubscriber$1(s),l=u.subscribe(d);return l.closed||d.add(innerSubscribe(this.windowBoundaries,new SimpleInnerSubscriber(d))),l},a}(),WindowSubscriber$1=function(a){__extends(s,a);function s(u){var d=a.call(this,u)||this;return d.window=new Subject,u.next(d.window),d}return s.prototype.notifyNext=function(){this.openWindow()},s.prototype.notifyError=function(u){this._error(u)},s.prototype.notifyComplete=function(){this._complete()},s.prototype._next=function(u){this.window.next(u)},s.prototype._error=function(u){this.window.error(u),this.destination.error(u)},s.prototype._complete=function(){this.window.complete(),this.destination.complete()},s.prototype._unsubscribe=function(){this.window=null},s.prototype.openWindow=function(){var u=this.window;u&&u.complete();var d=this.destination,l=this.window=new Subject;d.next(l)},s}(SimpleOuterSubscriber);function windowCount(a,s){return s===void 0&&(s=0),function(d){return d.lift(new WindowCountOperator(a,s))}}var WindowCountOperator=function(){function a(s,u){this.windowSize=s,this.startWindowEvery=u}return a.prototype.call=function(s,u){return u.subscribe(new WindowCountSubscriber(s,this.windowSize,this.startWindowEvery))},a}(),WindowCountSubscriber=function(a){__extends(s,a);function s(u,d,l){var p=a.call(this,u)||this;return p.destination=u,p.windowSize=d,p.startWindowEvery=l,p.windows=[new Subject],p.count=0,u.next(p.windows[0]),p}return s.prototype._next=function(u){for(var d=this.startWindowEvery>0?this.startWindowEvery:this.windowSize,l=this.destination,p=this.windowSize,h=this.windows,y=h.length,_=0;_<y&&!this.closed;_++)h[_].next(u);var E=this.count-p+1;if(E>=0&&E%d===0&&!this.closed&&h.shift().complete(),++this.count%d===0&&!this.closed){var I=new Subject;h.push(I),l.next(I)}},s.prototype._error=function(u){var d=this.windows;if(d)for(;d.length>0&&!this.closed;)d.shift().error(u);this.destination.error(u)},s.prototype._complete=function(){var u=this.windows;if(u)for(;u.length>0&&!this.closed;)u.shift().complete();this.destination.complete()},s.prototype._unsubscribe=function(){this.count=0,this.windows=null},s}(Subscriber);function windowTime(a){var s=async,u=null,d=Number.POSITIVE_INFINITY;return isScheduler(arguments[3])&&(s=arguments[3]),isScheduler(arguments[2])?s=arguments[2]:isNumeric(arguments[2])&&(d=Number(arguments[2])),isScheduler(arguments[1])?s=arguments[1]:isNumeric(arguments[1])&&(u=Number(arguments[1])),function(p){return p.lift(new WindowTimeOperator(a,u,d,s))}}var WindowTimeOperator=function(){function a(s,u,d,l){this.windowTimeSpan=s,this.windowCreationInterval=u,this.maxWindowSize=d,this.scheduler=l}return a.prototype.call=function(s,u){return u.subscribe(new WindowTimeSubscriber(s,this.windowTimeSpan,this.windowCreationInterval,this.maxWindowSize,this.scheduler))},a}(),CountedSubject=function(a){__extends(s,a);function s(){var u=a!==null&&a.apply(this,arguments)||this;return u._numberOfNextedValues=0,u}return s.prototype.next=function(u){this._numberOfNextedValues++,a.prototype.next.call(this,u)},Object.defineProperty(s.prototype,"numberOfNextedValues",{get:function(){return this._numberOfNextedValues},enumerable:!0,configurable:!0}),s}(Subject),WindowTimeSubscriber=function(a){__extends(s,a);function s(u,d,l,p,h){var y=a.call(this,u)||this;y.destination=u,y.windowTimeSpan=d,y.windowCreationInterval=l,y.maxWindowSize=p,y.scheduler=h,y.windows=[];var _=y.openWindow();if(l!==null&&l>=0){var E={subscriber:y,window:_,context:null},I={windowTimeSpan:d,windowCreationInterval:l,subscriber:y,scheduler:h};y.add(h.schedule(dispatchWindowClose,d,E)),y.add(h.schedule(dispatchWindowCreation,l,I))}else{var N={subscriber:y,window:_,windowTimeSpan:d};y.add(h.schedule(dispatchWindowTimeSpanOnly,d,N))}return y}return s.prototype._next=function(u){for(var d=this.windows,l=d.length,p=0;p<l;p++){var h=d[p];h.closed||(h.next(u),h.numberOfNextedValues>=this.maxWindowSize&&this.closeWindow(h))}},s.prototype._error=function(u){for(var d=this.windows;d.length>0;)d.shift().error(u);this.destination.error(u)},s.prototype._complete=function(){for(var u=this.windows;u.length>0;){var d=u.shift();d.closed||d.complete()}this.destination.complete()},s.prototype.openWindow=function(){var u=new CountedSubject;this.windows.push(u);var d=this.destination;return d.next(u),u},s.prototype.closeWindow=function(u){u.complete();var d=this.windows;d.splice(d.indexOf(u),1)},s}(Subscriber);function dispatchWindowTimeSpanOnly(a){var s=a.subscriber,u=a.windowTimeSpan,d=a.window;d&&s.closeWindow(d),a.window=s.openWindow(),this.schedule(a,u)}function dispatchWindowCreation(a){var s=a.windowTimeSpan,u=a.subscriber,d=a.scheduler,l=a.windowCreationInterval,p=u.openWindow(),h=this,y={action:h,subscription:null},_={subscriber:u,window:p,context:y};y.subscription=d.schedule(dispatchWindowClose,s,_),h.add(y.subscription),h.schedule(a,l)}function dispatchWindowClose(a){var s=a.subscriber,u=a.window,d=a.context;d&&d.action&&d.subscription&&d.action.remove(d.subscription),s.closeWindow(u)}function windowToggle(a,s){return function(u){return u.lift(new WindowToggleOperator(a,s))}}var WindowToggleOperator=function(){function a(s,u){this.openings=s,this.closingSelector=u}return a.prototype.call=function(s,u){return u.subscribe(new WindowToggleSubscriber(s,this.openings,this.closingSelector))},a}(),WindowToggleSubscriber=function(a){__extends(s,a);function s(u,d,l){var p=a.call(this,u)||this;return p.openings=d,p.closingSelector=l,p.contexts=[],p.add(p.openSubscription=subscribeToResult(p,d,d)),p}return s.prototype._next=function(u){var d=this.contexts;if(d)for(var l=d.length,p=0;p<l;p++)d[p].window.next(u)},s.prototype._error=function(u){var d=this.contexts;if(this.contexts=null,d)for(var l=d.length,p=-1;++p<l;){var h=d[p];h.window.error(u),h.subscription.unsubscribe()}a.prototype._error.call(this,u)},s.prototype._complete=function(){var u=this.contexts;if(this.contexts=null,u)for(var d=u.length,l=-1;++l<d;){var p=u[l];p.window.complete(),p.subscription.unsubscribe()}a.prototype._complete.call(this)},s.prototype._unsubscribe=function(){var u=this.contexts;if(this.contexts=null,u)for(var d=u.length,l=-1;++l<d;){var p=u[l];p.window.unsubscribe(),p.subscription.unsubscribe()}},s.prototype.notifyNext=function(u,d,l,p,h){if(u===this.openings){var y=void 0;try{var _=this.closingSelector;y=_(d)}catch(C){return this.error(C)}var E=new Subject,I=new Subscription,N={window:E,subscription:I};this.contexts.push(N);var w=subscribeToResult(this,y,N);w.closed?this.closeWindow(this.contexts.length-1):(w.context=N,I.add(w)),this.destination.next(E)}else this.closeWindow(this.contexts.indexOf(u))},s.prototype.notifyError=function(u){this.error(u)},s.prototype.notifyComplete=function(u){u!==this.openSubscription&&this.closeWindow(this.contexts.indexOf(u.context))},s.prototype.closeWindow=function(u){if(u!==-1){var d=this.contexts,l=d[u],p=l.window,h=l.subscription;d.splice(u,1),p.complete(),h.unsubscribe()}},s}(OuterSubscriber);function windowWhen(a){return function(u){return u.lift(new WindowOperator(a))}}var WindowOperator=function(){function a(s){this.closingSelector=s}return a.prototype.call=function(s,u){return u.subscribe(new WindowSubscriber(s,this.closingSelector))},a}(),WindowSubscriber=function(a){__extends(s,a);function s(u,d){var l=a.call(this,u)||this;return l.destination=u,l.closingSelector=d,l.openWindow(),l}return s.prototype.notifyNext=function(u,d,l,p,h){this.openWindow(h)},s.prototype.notifyError=function(u){this._error(u)},s.prototype.notifyComplete=function(u){this.openWindow(u)},s.prototype._next=function(u){this.window.next(u)},s.prototype._error=function(u){this.window.error(u),this.destination.error(u),this.unsubscribeClosingNotification()},s.prototype._complete=function(){this.window.complete(),this.destination.complete(),this.unsubscribeClosingNotification()},s.prototype.unsubscribeClosingNotification=function(){this.closingNotification&&this.closingNotification.unsubscribe()},s.prototype.openWindow=function(u){u===void 0&&(u=null),u&&(this.remove(u),u.unsubscribe());var d=this.window;d&&d.complete();var l=this.window=new Subject;this.destination.next(l);var p;try{var h=this.closingSelector;p=h()}catch(y){this.destination.error(y),this.window.error(y);return}this.add(this.closingNotification=subscribeToResult(this,p))},s}(OuterSubscriber);function withLatestFrom(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];return function(u){var d;typeof a[a.length-1]=="function"&&(d=a.pop());var l=a;return u.lift(new WithLatestFromOperator(l,d))}}var WithLatestFromOperator=function(){function a(s,u){this.observables=s,this.project=u}return a.prototype.call=function(s,u){return u.subscribe(new WithLatestFromSubscriber(s,this.observables,this.project))},a}(),WithLatestFromSubscriber=function(a){__extends(s,a);function s(u,d,l){var p=a.call(this,u)||this;p.observables=d,p.project=l,p.toRespond=[];var h=d.length;p.values=new Array(h);for(var y=0;y<h;y++)p.toRespond.push(y);for(var y=0;y<h;y++){var _=d[y];p.add(subscribeToResult(p,_,void 0,y))}return p}return s.prototype.notifyNext=function(u,d,l){this.values[l]=d;var p=this.toRespond;if(p.length>0){var h=p.indexOf(l);h!==-1&&p.splice(h,1)}},s.prototype.notifyComplete=function(){},s.prototype._next=function(u){if(this.toRespond.length===0){var d=[u].concat(this.values);this.project?this._tryProject(d):this.destination.next(d)}},s.prototype._tryProject=function(u){var d;try{d=this.project.apply(this,u)}catch(l){this.destination.error(l);return}this.destination.next(d)},s}(OuterSubscriber);function zip$1(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];var u=a[a.length-1];return typeof u=="function"&&a.pop(),fromArray(a,void 0).lift(new ZipOperator(u))}var ZipOperator=function(){function a(s){this.resultSelector=s}return a.prototype.call=function(s,u){return u.subscribe(new ZipSubscriber(s,this.resultSelector))},a}(),ZipSubscriber=function(a){__extends(s,a);function s(u,d,l){var p=a.call(this,u)||this;return p.resultSelector=d,p.iterators=[],p.active=0,p.resultSelector=typeof d=="function"?d:void 0,p}return s.prototype._next=function(u){var d=this.iterators;isArray$2(u)?d.push(new StaticArrayIterator(u)):typeof u[iterator]=="function"?d.push(new StaticIterator(u[iterator]())):d.push(new ZipBufferIterator(this.destination,this,u))},s.prototype._complete=function(){var u=this.iterators,d=u.length;if(this.unsubscribe(),d===0){this.destination.complete();return}this.active=d;for(var l=0;l<d;l++){var p=u[l];if(p.stillUnsubscribed){var h=this.destination;h.add(p.subscribe())}else this.active--}},s.prototype.notifyInactive=function(){this.active--,this.active===0&&this.destination.complete()},s.prototype.checkIterators=function(){for(var u=this.iterators,d=u.length,l=this.destination,p=0;p<d;p++){var h=u[p];if(typeof h.hasValue=="function"&&!h.hasValue())return}for(var y=!1,_=[],p=0;p<d;p++){var h=u[p],E=h.next();if(h.hasCompleted()&&(y=!0),E.done){l.complete();return}_.push(E.value)}this.resultSelector?this._tryresultSelector(_):l.next(_),y&&l.complete()},s.prototype._tryresultSelector=function(u){var d;try{d=this.resultSelector.apply(this,u)}catch(l){this.destination.error(l);return}this.destination.next(d)},s}(Subscriber),StaticIterator=function(){function a(s){this.iterator=s,this.nextResult=s.next()}return a.prototype.hasValue=function(){return!0},a.prototype.next=function(){var s=this.nextResult;return this.nextResult=this.iterator.next(),s},a.prototype.hasCompleted=function(){var s=this.nextResult;return Boolean(s&&s.done)},a}(),StaticArrayIterator=function(){function a(s){this.array=s,this.index=0,this.length=0,this.length=s.length}return a.prototype[iterator]=function(){return this},a.prototype.next=function(s){var u=this.index++,d=this.array;return u<this.length?{value:d[u],done:!1}:{value:null,done:!0}},a.prototype.hasValue=function(){return this.array.length>this.index},a.prototype.hasCompleted=function(){return this.array.length===this.index},a}(),ZipBufferIterator=function(a){__extends(s,a);function s(u,d,l){var p=a.call(this,u)||this;return p.parent=d,p.observable=l,p.stillUnsubscribed=!0,p.buffer=[],p.isComplete=!1,p}return s.prototype[iterator]=function(){return this},s.prototype.next=function(){var u=this.buffer;return u.length===0&&this.isComplete?{value:null,done:!0}:{value:u.shift(),done:!1}},s.prototype.hasValue=function(){return this.buffer.length>0},s.prototype.hasCompleted=function(){return this.buffer.length===0&&this.isComplete},s.prototype.notifyComplete=function(){this.buffer.length>0?(this.isComplete=!0,this.parent.notifyInactive()):this.destination.complete()},s.prototype.notifyNext=function(u){this.buffer.push(u),this.parent.checkIterators()},s.prototype.subscribe=function(){return innerSubscribe(this.observable,new SimpleInnerSubscriber(this))},s}(SimpleOuterSubscriber);function zip(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];return function(d){return d.lift.call(zip$1.apply(void 0,[d].concat(a)))}}function zipAll(a){return function(s){return s.lift(new ZipOperator(a))}}var operators=Object.freeze(Object.defineProperty({__proto__:null,audit,auditTime,buffer,bufferCount,bufferTime,bufferToggle,bufferWhen,catchError,combineAll,combineLatest,concat,concatAll,concatMap,concatMapTo,count,debounce,debounceTime,defaultIfEmpty,delay,delayWhen,dematerialize,distinct,distinctUntilChanged,distinctUntilKeyChanged,elementAt,endWith,every,exhaust,exhaustMap,expand,filter,finalize,find:find$1,findIndex,first,groupBy,ignoreElements,isEmpty,last,map,mapTo,materialize,max,merge:merge$1,mergeAll,mergeMap,flatMap,mergeMapTo,mergeScan,min,multicast,observeOn,onErrorResumeNext,pairwise,partition,pluck,publish,publishBehavior,publishLast,publishReplay,race,reduce,repeat,repeatWhen,retry,retryWhen,refCount,sample,sampleTime,scan,sequenceEqual,share,shareReplay,single,skip,skipLast,skipUntil,skipWhile,startWith,subscribeOn,switchAll,switchMap,switchMapTo,take,takeLast,takeUntil,takeWhile,tap,throttle,throttleTime,throwIfEmpty,timeInterval,timeout,timeoutWith,timestamp,toArray,window:window$1,windowCount,windowTime,windowToggle,windowWhen,withLatestFrom,zip,zipAll},Symbol.toStringTag,{value:"Module"})),require$$2=getAugmentedNamespace(operators),struct={};(function(a){var s=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(g,O,$,x){x===void 0&&(x=$),Object.defineProperty(g,x,{enumerable:!0,get:function(){return O[$]}})}:function(g,O,$,x){x===void 0&&(x=$),g[x]=O[$]}),u=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(g,O){Object.defineProperty(g,"default",{enumerable:!0,value:O})}:function(g,O){g.default=O}),d=commonjsGlobal&&commonjsGlobal.__importStar||function(g){if(g&&g.__esModule)return g;var O={};if(g!=null)for(var $ in g)$!=="default"&&Object.hasOwnProperty.call(g,$)&&s(O,g,$);return u(O,g),O},l=commonjsGlobal&&commonjsGlobal.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(a,"__esModule",{value:!0}),a.ListValue=a.Value=a.Struct_FieldsEntry=a.Struct=a.nullValueToNumber=a.nullValueToJSON=a.nullValueFromJSON=a.NullValue=a.protobufPackage=void 0;const p=l(long),h=d(minimal$2);a.protobufPackage="google.protobuf";var y;(function(g){g.NULL_VALUE="NULL_VALUE"})(y=a.NullValue||(a.NullValue={}));function _(g){switch(g){case 0:case"NULL_VALUE":return y.NULL_VALUE;default:throw new V.Error("Unrecognized enum value "+g+" for enum NullValue")}}a.nullValueFromJSON=_;function E(g){switch(g){case y.NULL_VALUE:return"NULL_VALUE";default:return"UNKNOWN"}}a.nullValueToJSON=E;function I(g){switch(g){case y.NULL_VALUE:return 0;default:return 0}}a.nullValueToNumber=I;function N(){return{fields:{}}}a.Struct={encode(g,O=h.Writer.create()){return Object.entries(g.fields).forEach(([$,x])=>{x!==void 0&&a.Struct_FieldsEntry.encode({key:$,value:x},O.uint32(10).fork()).ldelim()}),O},decode(g,O){const $=g instanceof h.Reader?g:new h.Reader(g);let x=O===void 0?$.len:$.pos+O;const Y=N();for(;$.pos<x;){const te=$.uint32();switch(te>>>3){case 1:const ne=a.Struct_FieldsEntry.decode($,$.uint32());ne.value!==void 0&&(Y.fields[ne.key]=ne.value);break;default:$.skipType(te&7);break}}return Y},fromJSON(g){return{fields:J(g.fields)?Object.entries(g.fields).reduce((O,[$,x])=>(O[$]=x,O),{}):{}}},toJSON(g){const O={};return O.fields={},g.fields&&Object.entries(g.fields).forEach(([$,x])=>{O.fields[$]=x}),O},fromPartial(g){var O;const $=N();return $.fields=Object.entries((O=g.fields)!==null&&O!==void 0?O:{}).reduce((x,[Y,te])=>(te!==void 0&&(x[Y]=te),x),{}),$},wrap(g){const O=N();return g!==void 0&&Object.keys(g).forEach($=>{O.fields[$]=g[$]}),O},unwrap(g){const O={};return Object.keys(g.fields).forEach($=>{O[$]=g.fields[$]}),O}};function w(){return{key:"",value:void 0}}a.Struct_FieldsEntry={encode(g,O=h.Writer.create()){return g.key!==""&&O.uint32(10).string(g.key),g.value!==void 0&&a.Value.encode(a.Value.wrap(g.value),O.uint32(18).fork()).ldelim(),O},decode(g,O){const $=g instanceof h.Reader?g:new h.Reader(g);let x=O===void 0?$.len:$.pos+O;const Y=w();for(;$.pos<x;){const te=$.uint32();switch(te>>>3){case 1:Y.key=$.string();break;case 2:Y.value=a.Value.unwrap(a.Value.decode($,$.uint32()));break;default:$.skipType(te&7);break}}return Y},fromJSON(g){return{key:W(g.key)?String(g.key):"",value:W(g==null?void 0:g.value)?g.value:void 0}},toJSON(g){const O={};return g.key!==void 0&&(O.key=g.key),g.value!==void 0&&(O.value=g.value),O},fromPartial(g){var O,$;const x=w();return x.key=(O=g.key)!==null&&O!==void 0?O:"",x.value=($=g.value)!==null&&$!==void 0?$:void 0,x}};function C(){return{nullValue:void 0,numberValue:void 0,stringValue:void 0,boolValue:void 0,structValue:void 0,listValue:void 0}}a.Value={encode(g,O=h.Writer.create()){return g.nullValue!==void 0&&O.uint32(8).int32(I(g.nullValue)),g.numberValue!==void 0&&O.uint32(17).double(g.numberValue),g.stringValue!==void 0&&O.uint32(26).string(g.stringValue),g.boolValue!==void 0&&O.uint32(32).bool(g.boolValue),g.structValue!==void 0&&a.Struct.encode(a.Struct.wrap(g.structValue),O.uint32(42).fork()).ldelim(),g.listValue!==void 0&&a.ListValue.encode(a.ListValue.wrap(g.listValue),O.uint32(50).fork()).ldelim(),O},decode(g,O){const $=g instanceof h.Reader?g:new h.Reader(g);let x=O===void 0?$.len:$.pos+O;const Y=C();for(;$.pos<x;){const te=$.uint32();switch(te>>>3){case 1:Y.nullValue=_($.int32());break;case 2:Y.numberValue=$.double();break;case 3:Y.stringValue=$.string();break;case 4:Y.boolValue=$.bool();break;case 5:Y.structValue=a.Struct.unwrap(a.Struct.decode($,$.uint32()));break;case 6:Y.listValue=a.ListValue.unwrap(a.ListValue.decode($,$.uint32()));break;default:$.skipType(te&7);break}}return Y},fromJSON(g){return{nullValue:W(g.nullValue)?_(g.nullValue):void 0,numberValue:W(g.numberValue)?Number(g.numberValue):void 0,stringValue:W(g.stringValue)?String(g.stringValue):void 0,boolValue:W(g.boolValue)?Boolean(g.boolValue):void 0,structValue:J(g.structValue)?g.structValue:void 0,listValue:Array.isArray(g.listValue)?[...g.listValue]:void 0}},toJSON(g){const O={};return g.nullValue!==void 0&&(O.nullValue=g.nullValue!==void 0?E(g.nullValue):void 0),g.numberValue!==void 0&&(O.numberValue=g.numberValue),g.stringValue!==void 0&&(O.stringValue=g.stringValue),g.boolValue!==void 0&&(O.boolValue=g.boolValue),g.structValue!==void 0&&(O.structValue=g.structValue),g.listValue!==void 0&&(O.listValue=g.listValue),O},fromPartial(g){var O,$,x,Y,te,ne;const F=C();return F.nullValue=(O=g.nullValue)!==null&&O!==void 0?O:void 0,F.numberValue=($=g.numberValue)!==null&&$!==void 0?$:void 0,F.stringValue=(x=g.stringValue)!==null&&x!==void 0?x:void 0,F.boolValue=(Y=g.boolValue)!==null&&Y!==void 0?Y:void 0,F.structValue=(te=g.structValue)!==null&&te!==void 0?te:void 0,F.listValue=(ne=g.listValue)!==null&&ne!==void 0?ne:void 0,F},wrap(g){const O=C();if(g===null)O.nullValue=y.NULL_VALUE;else if(typeof g=="boolean")O.boolValue=g;else if(typeof g=="number")O.numberValue=g;else if(typeof g=="string")O.stringValue=g;else if(Array.isArray(g))O.listValue=g;else if(typeof g=="object")O.structValue=g;else if(typeof g!="undefined")throw new Error("Unsupported any value type: "+typeof g);return O},unwrap(g){if((g==null?void 0:g.stringValue)!==void 0)return g.stringValue;if((g==null?void 0:g.numberValue)!==void 0)return g.numberValue;if((g==null?void 0:g.boolValue)!==void 0)return g.boolValue;if((g==null?void 0:g.structValue)!==void 0)return g.structValue;if((g==null?void 0:g.listValue)!==void 0)return g.listValue;if((g==null?void 0:g.nullValue)!==void 0)return null}};function D(){return{values:[]}}a.ListValue={encode(g,O=h.Writer.create()){for(const $ of g.values)a.Value.encode(a.Value.wrap($),O.uint32(10).fork()).ldelim();return O},decode(g,O){const $=g instanceof h.Reader?g:new h.Reader(g);let x=O===void 0?$.len:$.pos+O;const Y=D();for(;$.pos<x;){const te=$.uint32();switch(te>>>3){case 1:Y.values.push(a.Value.unwrap(a.Value.decode($,$.uint32())));break;default:$.skipType(te&7);break}}return Y},fromJSON(g){return{values:Array.isArray(g==null?void 0:g.values)?[...g.values]:[]}},toJSON(g){const O={};return g.values?O.values=g.values.map($=>$):O.values=[],O},fromPartial(g){var O;const $=D();return $.values=((O=g.values)===null||O===void 0?void 0:O.map(x=>x))||[],$},wrap(g){const O=D();return O.values=g!=null?g:[],O},unwrap(g){return g.values}};var V=(()=>{if(typeof V!="undefined")return V;if(typeof self!="undefined")return self;if(typeof window!="undefined")return window;if(typeof commonjsGlobal!="undefined")return commonjsGlobal;throw"Unable to locate global object"})();h.util.Long!==p.default&&(h.util.Long=p.default,h.configure());function J(g){return typeof g=="object"&&g!==null}function W(g){return g!=null}})(struct),function(a){var s=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(F,j,K,M){M===void 0&&(M=K),Object.defineProperty(F,M,{enumerable:!0,get:function(){return j[K]}})}:function(F,j,K,M){M===void 0&&(M=K),F[M]=j[K]}),u=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(F,j){Object.defineProperty(F,"default",{enumerable:!0,value:j})}:function(F,j){F.default=j}),d=commonjsGlobal&&commonjsGlobal.__importStar||function(F){if(F&&F.__esModule)return F;var j={};if(F!=null)for(var K in F)K!=="default"&&Object.hasOwnProperty.call(F,K)&&s(j,F,K);return u(j,F),j},l=commonjsGlobal&&commonjsGlobal.__importDefault||function(F){return F&&F.__esModule?F:{default:F}};Object.defineProperty(a,"__esModule",{value:!0}),a.EventServiceDefinition=a.EventServiceClientImpl=a.EventsStreamResponse=a.EventsStreamReconnectRequest=a.EventsStreamError=a.EventsStreamRequest=a.SubscribePayload=a.PublishEventResponse=a.PublishEventRequest=a.EventTarget=a.eventsStreamMessageTypeToNumber=a.eventsStreamMessageTypeToJSON=a.eventsStreamMessageTypeFromJSON=a.EventsStreamMessageType=a.protobufPackage=void 0;const p=l(long),h=d(minimal$2),y=require$$2,_=struct;a.protobufPackage="apis.event.v2";var E;(function(F){F.EVENTS_STREAM_MESSAGE_TYPE_UNSPECIFIED="EVENTS_STREAM_MESSAGE_TYPE_UNSPECIFIED",F.EVENTS_STREAM_MESSAGE_TYPE_PING="EVENTS_STREAM_MESSAGE_TYPE_PING",F.EVENTS_STREAM_MESSAGE_TYPE_ERROR="EVENTS_STREAM_MESSAGE_TYPE_ERROR",F.EVENTS_STREAM_MESSAGE_TYPE_SUBSCRIBED="EVENTS_STREAM_MESSAGE_TYPE_SUBSCRIBED",F.EVENTS_STREAM_MESSAGE_TYPE_UNSUBSCRIBED="EVENTS_STREAM_MESSAGE_TYPE_UNSUBSCRIBED",F.EVENTS_STREAM_MESSAGE_TYPE_PUBLISHED="EVENTS_STREAM_MESSAGE_TYPE_PUBLISHED"})(E=a.EventsStreamMessageType||(a.EventsStreamMessageType={}));function I(F){switch(F){case 0:case"EVENTS_STREAM_MESSAGE_TYPE_UNSPECIFIED":return E.EVENTS_STREAM_MESSAGE_TYPE_UNSPECIFIED;case 1:case"EVENTS_STREAM_MESSAGE_TYPE_PING":return E.EVENTS_STREAM_MESSAGE_TYPE_PING;case 2:case"EVENTS_STREAM_MESSAGE_TYPE_ERROR":return E.EVENTS_STREAM_MESSAGE_TYPE_ERROR;case 3:case"EVENTS_STREAM_MESSAGE_TYPE_SUBSCRIBED":return E.EVENTS_STREAM_MESSAGE_TYPE_SUBSCRIBED;case 4:case"EVENTS_STREAM_MESSAGE_TYPE_UNSUBSCRIBED":return E.EVENTS_STREAM_MESSAGE_TYPE_UNSUBSCRIBED;case 5:case"EVENTS_STREAM_MESSAGE_TYPE_PUBLISHED":return E.EVENTS_STREAM_MESSAGE_TYPE_PUBLISHED;default:throw new Y.Error("Unrecognized enum value "+F+" for enum EventsStreamMessageType")}}a.eventsStreamMessageTypeFromJSON=I;function N(F){switch(F){case E.EVENTS_STREAM_MESSAGE_TYPE_UNSPECIFIED:return"EVENTS_STREAM_MESSAGE_TYPE_UNSPECIFIED";case E.EVENTS_STREAM_MESSAGE_TYPE_PING:return"EVENTS_STREAM_MESSAGE_TYPE_PING";case E.EVENTS_STREAM_MESSAGE_TYPE_ERROR:return"EVENTS_STREAM_MESSAGE_TYPE_ERROR";case E.EVENTS_STREAM_MESSAGE_TYPE_SUBSCRIBED:return"EVENTS_STREAM_MESSAGE_TYPE_SUBSCRIBED";case E.EVENTS_STREAM_MESSAGE_TYPE_UNSUBSCRIBED:return"EVENTS_STREAM_MESSAGE_TYPE_UNSUBSCRIBED";case E.EVENTS_STREAM_MESSAGE_TYPE_PUBLISHED:return"EVENTS_STREAM_MESSAGE_TYPE_PUBLISHED";default:return"UNKNOWN"}}a.eventsStreamMessageTypeToJSON=N;function w(F){switch(F){case E.EVENTS_STREAM_MESSAGE_TYPE_UNSPECIFIED:return 0;case E.EVENTS_STREAM_MESSAGE_TYPE_PING:return 1;case E.EVENTS_STREAM_MESSAGE_TYPE_ERROR:return 2;case E.EVENTS_STREAM_MESSAGE_TYPE_SUBSCRIBED:return 3;case E.EVENTS_STREAM_MESSAGE_TYPE_UNSUBSCRIBED:return 4;case E.EVENTS_STREAM_MESSAGE_TYPE_PUBLISHED:return 5;default:return 0}}a.eventsStreamMessageTypeToNumber=w;function C(){return{collectionId:void 0,projectId:void 0,layoutId:void 0}}a.EventTarget={encode(F,j=h.Writer.create()){return F.collectionId!==void 0&&j.uint32(42).string(F.collectionId),F.projectId!==void 0&&j.uint32(34).string(F.projectId),F.layoutId!==void 0&&j.uint32(10).string(F.layoutId),j},decode(F,j){const K=F instanceof h.Reader?F:new h.Reader(F);let M=j===void 0?K.len:K.pos+j;const q=C();for(;K.pos<M;){const z=K.uint32();switch(z>>>3){case 5:q.collectionId=K.string();break;case 4:q.projectId=K.string();break;case 1:q.layoutId=K.string();break;default:K.skipType(z&7);break}}return q},fromJSON(F){return{collectionId:ne(F.collectionId)?String(F.collectionId):void 0,projectId:ne(F.projectId)?String(F.projectId):void 0,layoutId:ne(F.layoutId)?String(F.layoutId):void 0}},toJSON(F){const j={};return F.collectionId!==void 0&&(j.collectionId=F.collectionId),F.projectId!==void 0&&(j.projectId=F.projectId),F.layoutId!==void 0&&(j.layoutId=F.layoutId),j},fromPartial(F){var j,K,M;const q=C();return q.collectionId=(j=F.collectionId)!==null&&j!==void 0?j:void 0,q.projectId=(K=F.projectId)!==null&&K!==void 0?K:void 0,q.layoutId=(M=F.layoutId)!==null&&M!==void 0?M:void 0,q}};function D(){return{name:"",payload:void 0,requestMetadata:void 0,target:void 0}}a.PublishEventRequest={encode(F,j=h.Writer.create()){return F.name!==""&&j.uint32(10).string(F.name),F.payload!==void 0&&_.Struct.encode(_.Struct.wrap(F.payload),j.uint32(18).fork()).ldelim(),F.requestMetadata!==void 0&&_.Value.encode(_.Value.wrap(F.requestMetadata),j.uint32(34).fork()).ldelim(),F.target!==void 0&&a.EventTarget.encode(F.target,j.uint32(26).fork()).ldelim(),j},decode(F,j){const K=F instanceof h.Reader?F:new h.Reader(F);let M=j===void 0?K.len:K.pos+j;const q=D();for(;K.pos<M;){const z=K.uint32();switch(z>>>3){case 1:q.name=K.string();break;case 2:q.payload=_.Struct.unwrap(_.Struct.decode(K,K.uint32()));break;case 4:q.requestMetadata=_.Value.unwrap(_.Value.decode(K,K.uint32()));break;case 3:q.target=a.EventTarget.decode(K,K.uint32());break;default:K.skipType(z&7);break}}return q},fromJSON(F){return{name:ne(F.name)?String(F.name):"",payload:te(F.payload)?F.payload:void 0,requestMetadata:ne(F==null?void 0:F.requestMetadata)?F.requestMetadata:void 0,target:ne(F.target)?a.EventTarget.fromJSON(F.target):void 0}},toJSON(F){const j={};return F.name!==void 0&&(j.name=F.name),F.payload!==void 0&&(j.payload=F.payload),F.requestMetadata!==void 0&&(j.requestMetadata=F.requestMetadata),F.target!==void 0&&(j.target=F.target?a.EventTarget.toJSON(F.target):void 0),j},fromPartial(F){var j,K,M;const q=D();return q.name=(j=F.name)!==null&&j!==void 0?j:"",q.payload=(K=F.payload)!==null&&K!==void 0?K:void 0,q.requestMetadata=(M=F.requestMetadata)!==null&&M!==void 0?M:void 0,q.target=F.target!==void 0&&F.target!==null?a.EventTarget.fromPartial(F.target):void 0,q}};function V(){return{name:"",payload:void 0,target:void 0,requestMetadata:void 0,id:""}}a.PublishEventResponse={encode(F,j=h.Writer.create()){return F.name!==""&&j.uint32(10).string(F.name),F.payload!==void 0&&_.Struct.encode(_.Struct.wrap(F.payload),j.uint32(18).fork()).ldelim(),F.target!==void 0&&a.EventTarget.encode(F.target,j.uint32(26).fork()).ldelim(),F.requestMetadata!==void 0&&_.Value.encode(_.Value.wrap(F.requestMetadata),j.uint32(34).fork()).ldelim(),F.id!==""&&j.uint32(42).string(F.id),j},decode(F,j){const K=F instanceof h.Reader?F:new h.Reader(F);let M=j===void 0?K.len:K.pos+j;const q=V();for(;K.pos<M;){const z=K.uint32();switch(z>>>3){case 1:q.name=K.string();break;case 2:q.payload=_.Struct.unwrap(_.Struct.decode(K,K.uint32()));break;case 3:q.target=a.EventTarget.decode(K,K.uint32());break;case 4:q.requestMetadata=_.Value.unwrap(_.Value.decode(K,K.uint32()));break;case 5:q.id=K.string();break;default:K.skipType(z&7);break}}return q},fromJSON(F){return{name:ne(F.name)?String(F.name):"",payload:te(F.payload)?F.payload:void 0,target:ne(F.target)?a.EventTarget.fromJSON(F.target):void 0,requestMetadata:ne(F==null?void 0:F.requestMetadata)?F.requestMetadata:void 0,id:ne(F.id)?String(F.id):""}},toJSON(F){const j={};return F.name!==void 0&&(j.name=F.name),F.payload!==void 0&&(j.payload=F.payload),F.target!==void 0&&(j.target=F.target?a.EventTarget.toJSON(F.target):void 0),F.requestMetadata!==void 0&&(j.requestMetadata=F.requestMetadata),F.id!==void 0&&(j.id=F.id),j},fromPartial(F){var j,K,M,q;const z=V();return z.name=(j=F.name)!==null&&j!==void 0?j:"",z.payload=(K=F.payload)!==null&&K!==void 0?K:void 0,z.target=F.target!==void 0&&F.target!==null?a.EventTarget.fromPartial(F.target):void 0,z.requestMetadata=(M=F.requestMetadata)!==null&&M!==void 0?M:void 0,z.id=(q=F.id)!==null&&q!==void 0?q:"",z}};function J(){return{name:"",target:void 0}}a.SubscribePayload={encode(F,j=h.Writer.create()){return F.name!==""&&j.uint32(10).string(F.name),F.target!==void 0&&a.EventTarget.encode(F.target,j.uint32(18).fork()).ldelim(),j},decode(F,j){const K=F instanceof h.Reader?F:new h.Reader(F);let M=j===void 0?K.len:K.pos+j;const q=J();for(;K.pos<M;){const z=K.uint32();switch(z>>>3){case 1:q.name=K.string();break;case 2:q.target=a.EventTarget.decode(K,K.uint32());break;default:K.skipType(z&7);break}}return q},fromJSON(F){return{name:ne(F.name)?String(F.name):"",target:ne(F.target)?a.EventTarget.fromJSON(F.target):void 0}},toJSON(F){const j={};return F.name!==void 0&&(j.name=F.name),F.target!==void 0&&(j.target=F.target?a.EventTarget.toJSON(F.target):void 0),j},fromPartial(F){var j;const K=J();return K.name=(j=F.name)!==null&&j!==void 0?j:"",K.target=F.target!==void 0&&F.target!==null?a.EventTarget.fromPartial(F.target):void 0,K}};function W(){return{correlationId:void 0,subscribe:void 0,unsubscribe:void 0,publish:void 0,ping:void 0}}a.EventsStreamRequest={encode(F,j=h.Writer.create()){return F.correlationId!==void 0&&j.uint32(10).string(F.correlationId),F.subscribe!==void 0&&a.SubscribePayload.encode(F.subscribe,j.uint32(802).fork()).ldelim(),F.unsubscribe!==void 0&&a.SubscribePayload.encode(F.unsubscribe,j.uint32(810).fork()).ldelim(),F.publish!==void 0&&a.PublishEventRequest.encode(F.publish,j.uint32(818).fork()).ldelim(),F.ping!==void 0&&j.uint32(826).string(F.ping),j},decode(F,j){const K=F instanceof h.Reader?F:new h.Reader(F);let M=j===void 0?K.len:K.pos+j;const q=W();for(;K.pos<M;){const z=K.uint32();switch(z>>>3){case 1:q.correlationId=K.string();break;case 100:q.subscribe=a.SubscribePayload.decode(K,K.uint32());break;case 101:q.unsubscribe=a.SubscribePayload.decode(K,K.uint32());break;case 102:q.publish=a.PublishEventRequest.decode(K,K.uint32());break;case 103:q.ping=K.string();break;default:K.skipType(z&7);break}}return q},fromJSON(F){return{correlationId:ne(F.correlationId)?String(F.correlationId):void 0,subscribe:ne(F.subscribe)?a.SubscribePayload.fromJSON(F.subscribe):void 0,unsubscribe:ne(F.unsubscribe)?a.SubscribePayload.fromJSON(F.unsubscribe):void 0,publish:ne(F.publish)?a.PublishEventRequest.fromJSON(F.publish):void 0,ping:ne(F.ping)?String(F.ping):void 0}},toJSON(F){const j={};return F.correlationId!==void 0&&(j.correlationId=F.correlationId),F.subscribe!==void 0&&(j.subscribe=F.subscribe?a.SubscribePayload.toJSON(F.subscribe):void 0),F.unsubscribe!==void 0&&(j.unsubscribe=F.unsubscribe?a.SubscribePayload.toJSON(F.unsubscribe):void 0),F.publish!==void 0&&(j.publish=F.publish?a.PublishEventRequest.toJSON(F.publish):void 0),F.ping!==void 0&&(j.ping=F.ping),j},fromPartial(F){var j,K;const M=W();return M.correlationId=(j=F.correlationId)!==null&&j!==void 0?j:void 0,M.subscribe=F.subscribe!==void 0&&F.subscribe!==null?a.SubscribePayload.fromPartial(F.subscribe):void 0,M.unsubscribe=F.unsubscribe!==void 0&&F.unsubscribe!==null?a.SubscribePayload.fromPartial(F.unsubscribe):void 0,M.publish=F.publish!==void 0&&F.publish!==null?a.PublishEventRequest.fromPartial(F.publish):void 0,M.ping=(K=F.ping)!==null&&K!==void 0?K:void 0,M}};function g(){return{code:0,message:""}}a.EventsStreamError={encode(F,j=h.Writer.create()){return F.code!==0&&j.uint32(8).int32(F.code),F.message!==""&&j.uint32(18).string(F.message),j},decode(F,j){const K=F instanceof h.Reader?F:new h.Reader(F);let M=j===void 0?K.len:K.pos+j;const q=g();for(;K.pos<M;){const z=K.uint32();switch(z>>>3){case 1:q.code=K.int32();break;case 2:q.message=K.string();break;default:K.skipType(z&7);break}}return q},fromJSON(F){return{code:ne(F.code)?Number(F.code):0,message:ne(F.message)?String(F.message):""}},toJSON(F){const j={};return F.code!==void 0&&(j.code=Math.round(F.code)),F.message!==void 0&&(j.message=F.message),j},fromPartial(F){var j,K;const M=g();return M.code=(j=F.code)!==null&&j!==void 0?j:0,M.message=(K=F.message)!==null&&K!==void 0?K:"",M}};function O(){return{reauthenticate:!1,beforeTimestamp:""}}a.EventsStreamReconnectRequest={encode(F,j=h.Writer.create()){return F.reauthenticate===!0&&j.uint32(8).bool(F.reauthenticate),F.beforeTimestamp!==""&&j.uint32(18).string(F.beforeTimestamp),j},decode(F,j){const K=F instanceof h.Reader?F:new h.Reader(F);let M=j===void 0?K.len:K.pos+j;const q=O();for(;K.pos<M;){const z=K.uint32();switch(z>>>3){case 1:q.reauthenticate=K.bool();break;case 2:q.beforeTimestamp=K.string();break;default:K.skipType(z&7);break}}return q},fromJSON(F){return{reauthenticate:ne(F.reauthenticate)?Boolean(F.reauthenticate):!1,beforeTimestamp:ne(F.beforeTimestamp)?String(F.beforeTimestamp):""}},toJSON(F){const j={};return F.reauthenticate!==void 0&&(j.reauthenticate=F.reauthenticate),F.beforeTimestamp!==void 0&&(j.beforeTimestamp=F.beforeTimestamp),j},fromPartial(F){var j,K;const M=O();return M.reauthenticate=(j=F.reauthenticate)!==null&&j!==void 0?j:!1,M.beforeTimestamp=(K=F.beforeTimestamp)!==null&&K!==void 0?K:"",M}};function $(){return{correlationId:void 0,sessionId:void 0,event:void 0,pong:void 0,error:void 0,subscribed:void 0,unsubscribed:void 0,published:void 0,reconnectBefore:void 0}}a.EventsStreamResponse={encode(F,j=h.Writer.create()){return F.correlationId!==void 0&&j.uint32(18).string(F.correlationId),F.sessionId!==void 0&&j.uint32(26).string(F.sessionId),F.event!==void 0&&a.PublishEventResponse.encode(F.event,j.uint32(802).fork()).ldelim(),F.pong!==void 0&&j.uint32(1602).string(F.pong),F.error!==void 0&&a.EventsStreamError.encode(F.error,j.uint32(1610).fork()).ldelim(),F.subscribed!==void 0&&a.SubscribePayload.encode(F.subscribed,j.uint32(1618).fork()).ldelim(),F.unsubscribed!==void 0&&a.SubscribePayload.encode(F.unsubscribed,j.uint32(1626).fork()).ldelim(),F.published!==void 0&&a.PublishEventResponse.encode(F.published,j.uint32(1634).fork()).ldelim(),F.reconnectBefore!==void 0&&a.EventsStreamReconnectRequest.encode(F.reconnectBefore,j.uint32(1642).fork()).ldelim(),j},decode(F,j){const K=F instanceof h.Reader?F:new h.Reader(F);let M=j===void 0?K.len:K.pos+j;const q=$();for(;K.pos<M;){const z=K.uint32();switch(z>>>3){case 2:q.correlationId=K.string();break;case 3:q.sessionId=K.string();break;case 100:q.event=a.PublishEventResponse.decode(K,K.uint32());break;case 200:q.pong=K.string();break;case 201:q.error=a.EventsStreamError.decode(K,K.uint32());break;case 202:q.subscribed=a.SubscribePayload.decode(K,K.uint32());break;case 203:q.unsubscribed=a.SubscribePayload.decode(K,K.uint32());break;case 204:q.published=a.PublishEventResponse.decode(K,K.uint32());break;case 205:q.reconnectBefore=a.EventsStreamReconnectRequest.decode(K,K.uint32());break;default:K.skipType(z&7);break}}return q},fromJSON(F){return{correlationId:ne(F.correlationId)?String(F.correlationId):void 0,sessionId:ne(F.sessionId)?String(F.sessionId):void 0,event:ne(F.event)?a.PublishEventResponse.fromJSON(F.event):void 0,pong:ne(F.pong)?String(F.pong):void 0,error:ne(F.error)?a.EventsStreamError.fromJSON(F.error):void 0,subscribed:ne(F.subscribed)?a.SubscribePayload.fromJSON(F.subscribed):void 0,unsubscribed:ne(F.unsubscribed)?a.SubscribePayload.fromJSON(F.unsubscribed):void 0,published:ne(F.published)?a.PublishEventResponse.fromJSON(F.published):void 0,reconnectBefore:ne(F.reconnectBefore)?a.EventsStreamReconnectRequest.fromJSON(F.reconnectBefore):void 0}},toJSON(F){const j={};return F.correlationId!==void 0&&(j.correlationId=F.correlationId),F.sessionId!==void 0&&(j.sessionId=F.sessionId),F.event!==void 0&&(j.event=F.event?a.PublishEventResponse.toJSON(F.event):void 0),F.pong!==void 0&&(j.pong=F.pong),F.error!==void 0&&(j.error=F.error?a.EventsStreamError.toJSON(F.error):void 0),F.subscribed!==void 0&&(j.subscribed=F.subscribed?a.SubscribePayload.toJSON(F.subscribed):void 0),F.unsubscribed!==void 0&&(j.unsubscribed=F.unsubscribed?a.SubscribePayload.toJSON(F.unsubscribed):void 0),F.published!==void 0&&(j.published=F.published?a.PublishEventResponse.toJSON(F.published):void 0),F.reconnectBefore!==void 0&&(j.reconnectBefore=F.reconnectBefore?a.EventsStreamReconnectRequest.toJSON(F.reconnectBefore):void 0),j},fromPartial(F){var j,K,M;const q=$();return q.correlationId=(j=F.correlationId)!==null&&j!==void 0?j:void 0,q.sessionId=(K=F.sessionId)!==null&&K!==void 0?K:void 0,q.event=F.event!==void 0&&F.event!==null?a.PublishEventResponse.fromPartial(F.event):void 0,q.pong=(M=F.pong)!==null&&M!==void 0?M:void 0,q.error=F.error!==void 0&&F.error!==null?a.EventsStreamError.fromPartial(F.error):void 0,q.subscribed=F.subscribed!==void 0&&F.subscribed!==null?a.SubscribePayload.fromPartial(F.subscribed):void 0,q.unsubscribed=F.unsubscribed!==void 0&&F.unsubscribed!==null?a.SubscribePayload.fromPartial(F.unsubscribed):void 0,q.published=F.published!==void 0&&F.published!==null?a.PublishEventResponse.fromPartial(F.published):void 0,q.reconnectBefore=F.reconnectBefore!==void 0&&F.reconnectBefore!==null?a.EventsStreamReconnectRequest.fromPartial(F.reconnectBefore):void 0,q}};class x{constructor(j){this.rpc=j,this.Stream=this.Stream.bind(this),this.Publish=this.Publish.bind(this)}Stream(j){const K=j.pipe(y.map(q=>a.EventsStreamRequest.encode(q).finish()));return this.rpc.bidirectionalStreamingRequest("apis.event.v2.EventService","Stream",K).pipe(y.map(q=>a.EventsStreamResponse.decode(new h.Reader(q))))}Publish(j){const K=a.PublishEventRequest.encode(j).finish();return this.rpc.request("apis.event.v2.EventService","Publish",K).then(q=>a.PublishEventResponse.decode(new h.Reader(q)))}}a.EventServiceClientImpl=x,a.EventServiceDefinition={name:"EventService",fullName:"apis.event.v2.EventService",methods:{stream:{name:"Stream",requestType:a.EventsStreamRequest,requestStream:!0,responseType:a.EventsStreamResponse,responseStream:!0,options:{}},publish:{name:"Publish",requestType:a.PublishEventRequest,requestStream:!1,responseType:a.PublishEventResponse,responseStream:!1,options:{}}}};var Y=(()=>{if(typeof Y!="undefined")return Y;if(typeof self!="undefined")return self;if(typeof window!="undefined")return window;if(typeof commonjsGlobal!="undefined")return commonjsGlobal;throw"Unable to locate global object"})();h.util.Long!==p.default&&(h.util.Long=p.default,h.configure());function te(F){return typeof F=="object"&&F!==null}function ne(F){return F!=null}}(api),function(a){var s=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(d,l,p,h){h===void 0&&(h=p),Object.defineProperty(d,h,{enumerable:!0,get:function(){return l[p]}})}:function(d,l,p,h){h===void 0&&(h=p),d[h]=l[p]}),u=commonjsGlobal&&commonjsGlobal.__exportStar||function(d,l){for(var p in d)p!=="default"&&!l.hasOwnProperty(p)&&s(l,d,p)};Object.defineProperty(a,"__esModule",{value:!0}),a.eventsApiSupportedEvents=a.eventsApiEventRpcCalls=void 0,u(api,a),a.eventsApiEventRpcCalls={ping:"pong",publish:"published",subscribe:"subscribed",unsubscribe:"unsubscribed"},a.eventsApiSupportedEvents=[...Object.values(a.eventsApiEventRpcCalls),"error","event","reconnectBefore"]}(dist$2);var ws=null;typeof WebSocket!="undefined"?ws=WebSocket:typeof MozWebSocket!="undefined"?ws=MozWebSocket:typeof commonjsGlobal!="undefined"?ws=commonjsGlobal.WebSocket||commonjsGlobal.MozWebSocket:typeof window!="undefined"?ws=window.WebSocket||window.MozWebSocket:typeof self!="undefined"&&(ws=self.WebSocket||self.MozWebSocket);var browser$1=ws,matcher={exports:{}},escapeStringRegexp$1=a=>{if(typeof a!="string")throw new TypeError("Expected a string");return a.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")};const escapeStringRegexp=escapeStringRegexp$1,regexpCache=new Map;function sanitizeArray(a,s){if(!Array.isArray(a))switch(typeof a){case"string":a=[a];break;case"undefined":a=[];break;default:throw new TypeError(`Expected '${s}' to be a string or an array, but got a type of '${typeof a}'`)}return a.filter(u=>{if(typeof u!="string"){if(typeof u=="undefined")return!1;throw new TypeError(`Expected '${s}' to be an array of strings, but found a type of '${typeof u}' in the array`)}return!0})}function makeRegexp(a,s){s=pe({caseSensitive:!1},s);const u=a+JSON.stringify(s);if(regexpCache.has(u))return regexpCache.get(u);const d=a[0]==="!";d&&(a=a.slice(1)),a=escapeStringRegexp(a).replace(/\\\*/g,"[\\s\\S]*");const l=new RegExp(`^${a}$`,s.caseSensitive?"":"i");return l.negated=d,regexpCache.set(u,l),l}matcher.exports=(a,s,u)=>{if(a=sanitizeArray(a,"inputs"),s=sanitizeArray(s,"patterns"),s.length===0)return[];const d=s[0][0]==="!";s=s.map(p=>makeRegexp(p,u));const l=[];for(const p of a){let h=d;for(const y of s)y.test(p)&&(h=!y.negated);h&&l.push(p)}return l},matcher.exports.isMatch=(a,s,u)=>(a=sanitizeArray(a,"inputs"),s=sanitizeArray(s,"patterns"),s.length===0?!1:a.some(d=>s.every(l=>{const p=makeRegexp(l,u),h=p.test(d);return p.negated?!h:h})));var __createBinding$1=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(a,s,u,d){d===void 0&&(d=u);var l=Object.getOwnPropertyDescriptor(s,u);(!l||("get"in l?!s.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return s[u]}}),Object.defineProperty(a,d,l)}:function(a,s,u,d){d===void 0&&(d=u),a[d]=s[u]}),__setModuleDefault$1=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(a,s){Object.defineProperty(a,"default",{enumerable:!0,value:s})}:function(a,s){a.default=s}),__importStar$1=commonjsGlobal&&commonjsGlobal.__importStar||function(a){if(a&&a.__esModule)return a;var s={};if(a!=null)for(var u in a)u!=="default"&&Object.prototype.hasOwnProperty.call(a,u)&&__createBinding$1(s,a,u);return __setModuleDefault$1(s,a),s},__importDefault$e=commonjsGlobal&&commonjsGlobal.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(eventapi,"__esModule",{value:!0}),eventapi.EventApi=void 0;const EventApiModel=__importStar$1(dist$2),isomorphic_ws_1=__importDefault$e(browser$1),uuid_1=require$$1$2,NiceGrpc=__importStar$1(lib$1),matcher_1=matcher.exports,api_1=api$2,clientVersion=version$2,WS_PING_INTERVAL=2e4,WS_PING_TIMEOUT=1e4,WS_RECONNECT_DELAY=2e3,WS_MAX_BADAUTH_ATTEMPTS=3,LOG_CATEGORY="EventApi";class EventApi extends api_1.ApiClient{constructor(s,u,d,l){super(s,u,l,LOG_CATEGORY),this.websocketServer=d,this.subscriptions=new Set,this.eventHandlers={},this.calls={},this.messageQueue=[],this.websocketReady=!1,this.reconnectionAttempts=0,this.badAuthentication=!1,this.eventsClient=null}publish(...s){return this.websocketReady?this.call("publish",s[0]):this.eventsClient.publish(...s)}connect(){if(!this.ws){this.cleanup();const s=this.accessToken,u=[`version=${clientVersion}`,`sessionid=${this.sessionId}`];this.sdkVersion&&u.push(`sdkversion=${this.sdkVersion}`),this.ws=new isomorphic_ws_1.default(`${this.websocketServer}/stream?${u.join("&")}`,["Bearer",this.accessToken]);let d;this.ws.addEventListener("message",l=>{const p=JSON.parse(l.data.toString()),h=p.result;if(p.error&&(d=p.error,this.handleEvent("error",{error:{code:p.code,message:p.message}}),["You do not have permission to this resource","You do not have permission to this resource"].includes(p.message)&&(this.badAuthentication=!0)),!h)return;h.reconnectBefore&&h.reconnectBefore.reauthenticate&&this.accessToken===s&&(this.badAuthentication=!0);const y=EventApiModel.eventsApiSupportedEvents.find(_=>!!h[_]);y&&this.handleEvent(y,h)}),this.ws.addEventListener("open",()=>{this.log.info("websocket connected"),this.call("ping","hello",{timeout:WS_PING_TIMEOUT,skipQueue:!0}).then(()=>{this.ready()}).catch(l=>{!d&&l.message!=="Stream connection closed"&&this.disconnect("hello timeout")})}),this.ws.addEventListener("close",l=>{var p;d?this.reconnect(`${(p=d==null?void 0:d.message)!==null&&p!==void 0?p:"unknown"}`):this.reconnect(`closed - ${l.reason||l.code}`)}),this.ws.addEventListener("error",l=>{d=l})}}async subscribe(s,u={}){return this.call("subscribe",pe({name:s},u)).then(()=>{this.subscriptions.add(JSON.stringify(pe({name:s},u)))})}async unsubscribe(s,u={}){this.subscriptions.delete(JSON.stringify({name:s,payload:u})),await this.call("unsubscribe",pe({name:s},u))}on(s,u,d){const l=d||u,p=pe({ignoreSessionEvents:!1,allowedSessionEvents:[]},d?u:{});this.eventHandlers[s]||(this.eventHandlers[s]=[]),this.eventHandlers[s].push(we(pe({},p),{handler:l}))}off(s,u,d){var l;const p=d||u,h=pe({ignoreSessionEvents:!1,allowedSessionEvents:[]},d?u:{});this.eventHandlers[s]=((l=this.eventHandlers[s])!==null&&l!==void 0?l:[]).filter(y=>!(y.ignoreSessionEvents===h.ignoreSessionEvents&&y.allowedSessionEvents===h.allowedSessionEvents&&y.handler===p&&y.name===h.name))}disconnect(s){this.log.warn(`disconnected from events reason=${s}`),Object.values(this.calls).forEach(u=>{clearTimeout(u.timeout),u.reject(new Error("Stream connection closed"))}),this.calls={},this.cleanup()}_setup(s){this.eventsClient=this.clientFactory.create(EventApiModel.EventServiceDefinition,this.channel,{"*":s}),this.badAuthentication&&(this.badAuthentication=!1,this.reconnectionAttempts=0,this.reconnect("updated token"))}ready(){this.reconnectionAttempts=0,this.badAuthentication=!1,this.websocketReady=!0,this.handleEvent("connected",{connected:void 0});for(const s of this.subscriptions.values())this.send({subscribe:JSON.parse(s),correlationId:(0,uuid_1.v4)()});for(const s of this.messageQueue)this.send(s);this.messageQueue=[],this.pingLoop=setInterval(()=>{this.ping()},WS_PING_INTERVAL)}ping(){this.call("ping",`${+new Date}`,{timeout:WS_PING_TIMEOUT}).catch(()=>{this.reconnect("connection stalled")})}reconnect(s){this.disconnect(s),this.reconnectTimeout=setTimeout(()=>{if(this.reconnectionAttempts++,this.badAuthentication&&this.reconnectionAttempts>=WS_MAX_BADAUTH_ATTEMPTS){this.log.warn("Maximum number of reconnection attempts reached with bad authentication, please re-authenticate the SDK");return}this.connect()},WS_RECONNECT_DELAY)}send(s){this.ws&&this.ws.readyState===this.ws.OPEN?this.ws.send(JSON.stringify(s)):this.log.warn("Message sent to a disconnected stream")}handleEvent(s,u){var d;if(this.calls[u.correlationId]){const l=EventApiModel.eventsApiEventRpcCalls[this.calls[u.correlationId].method]===s,p=!!u.error;if(l||p){this.resolveCall(s,u);return}}for(const l of(d=this.eventHandlers[s])!==null&&d!==void 0?d:[]){if(s==="event"&&u.event){if(u.sessionId===this.sessionId&&l.ignoreSessionEvents&&!l.allowedSessionEvents.includes(u.event.name)){this.log.trace("ignorning event from self: "+u.event.name);continue}if(l.name&&!(0,matcher_1.isMatch)(u.event.name,l.name))continue}else if(u.sessionId===this.sessionId&&l.ignoreSessionEvents){this.log.trace("ignorning event from self");continue}l.handler(u?u[s]:void 0,{isFromCurrentSession:u.sessionId===this.sessionId})}}async call(s,u,d={timeout:2e4,skipQueue:!1}){this.ws||this.connect();const l=(0,uuid_1.v4)();return new Promise((p,h)=>{const y=setTimeout(()=>{delete this.calls[l],h(new Error("Request timed out"))},d.timeout);this.calls[l]={resolve:p,reject:h,timeout:y,method:s},this.websocketReady||d.skipQueue?this.send({[s]:u,correlationId:l}):this.messageQueue.push({[s]:u,correlationId:l})})}resolveCall(s,u){const d=this.calls[u.correlationId];if(!!d){if(clearTimeout(d.timeout),delete this.calls[u.correlationId],s==="error"&&u.error){d.reject(new NiceGrpc.ClientError("error",u.error.code,u.error.message));return}d.resolve(u[s])}}cleanup(){clearTimeout(this.pingLoop),clearTimeout(this.reconnectTimeout),this.websocketReady=!1,this.ws&&(this.ws.onclose=function(){},this.ws.close(),this.ws=null)}}eventapi.EventApi=EventApi;var security={};(function(a){var s=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(g,O,$,x){x===void 0&&(x=$);var Y=Object.getOwnPropertyDescriptor(O,$);(!Y||("get"in Y?!O.__esModule:Y.writable||Y.configurable))&&(Y={enumerable:!0,get:function(){return O[$]}}),Object.defineProperty(g,x,Y)}:function(g,O,$,x){x===void 0&&(x=$),g[x]=O[$]}),u=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(g,O){Object.defineProperty(g,"default",{enumerable:!0,value:O})}:function(g,O){g.default=O}),d=commonjsGlobal&&commonjsGlobal.__importStar||function(g){if(g&&g.__esModule)return g;var O={};if(g!=null)for(var $ in g)$!=="default"&&Object.prototype.hasOwnProperty.call(g,$)&&s(O,g,$);return u(O,g),O},l=commonjsGlobal&&commonjsGlobal.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(a,"__esModule",{value:!0}),a.GuestUrl=a.SfuTokenPermissions=a.AccessToken=a.GuestControl=a.User=a.GuestScope=a.Authorization=a.SfuRoomMetadata=a.SfuParticipantMetadata=a.protobufPackage=void 0;const p=l(long),h=d(minimal$2),y=api$1;a.protobufPackage="security.v21";function _(){return{serviceId:"",participantRole:void 0,ownerUserId:"",ownerServiceUserId:"",ownerDemo:!1,ownerTrial:!1,collectionId:"",projectId:""}}a.SfuParticipantMetadata={encode(g,O=h.Writer.create()){return g.serviceId!==""&&O.uint32(10).string(g.serviceId),g.participantRole!==void 0&&O.uint32(66).string(g.participantRole),g.ownerUserId!==""&&O.uint32(18).string(g.ownerUserId),g.ownerServiceUserId!==""&&O.uint32(26).string(g.ownerServiceUserId),g.ownerDemo===!0&&O.uint32(32).bool(g.ownerDemo),g.ownerTrial===!0&&O.uint32(40).bool(g.ownerTrial),g.collectionId!==""&&O.uint32(50).string(g.collectionId),g.projectId!==""&&O.uint32(58).string(g.projectId),O},decode(g,O){const $=g instanceof h.Reader?g:new h.Reader(g);let x=O===void 0?$.len:$.pos+O;const Y=_();for(;$.pos<x;){const te=$.uint32();switch(te>>>3){case 1:Y.serviceId=$.string();break;case 8:Y.participantRole=$.string();break;case 2:Y.ownerUserId=$.string();break;case 3:Y.ownerServiceUserId=$.string();break;case 4:Y.ownerDemo=$.bool();break;case 5:Y.ownerTrial=$.bool();break;case 6:Y.collectionId=$.string();break;case 7:Y.projectId=$.string();break;default:$.skipType(te&7);break}}return Y},fromJSON(g){return{serviceId:W(g.serviceId)?String(g.serviceId):"",participantRole:W(g.participantRole)?String(g.participantRole):void 0,ownerUserId:W(g.ownerUserId)?String(g.ownerUserId):"",ownerServiceUserId:W(g.ownerServiceUserId)?String(g.ownerServiceUserId):"",ownerDemo:W(g.ownerDemo)?Boolean(g.ownerDemo):!1,ownerTrial:W(g.ownerTrial)?Boolean(g.ownerTrial):!1,collectionId:W(g.collectionId)?String(g.collectionId):"",projectId:W(g.projectId)?String(g.projectId):""}},toJSON(g){const O={};return g.serviceId!==void 0&&(O.serviceId=g.serviceId),g.participantRole!==void 0&&(O.participantRole=g.participantRole),g.ownerUserId!==void 0&&(O.ownerUserId=g.ownerUserId),g.ownerServiceUserId!==void 0&&(O.ownerServiceUserId=g.ownerServiceUserId),g.ownerDemo!==void 0&&(O.ownerDemo=g.ownerDemo),g.ownerTrial!==void 0&&(O.ownerTrial=g.ownerTrial),g.collectionId!==void 0&&(O.collectionId=g.collectionId),g.projectId!==void 0&&(O.projectId=g.projectId),O},fromPartial(g){var O,$,x,Y,te,ne,F,j;const K=_();return K.serviceId=(O=g.serviceId)!==null&&O!==void 0?O:"",K.participantRole=($=g.participantRole)!==null&&$!==void 0?$:void 0,K.ownerUserId=(x=g.ownerUserId)!==null&&x!==void 0?x:"",K.ownerServiceUserId=(Y=g.ownerServiceUserId)!==null&&Y!==void 0?Y:"",K.ownerDemo=(te=g.ownerDemo)!==null&&te!==void 0?te:!1,K.ownerTrial=(ne=g.ownerTrial)!==null&&ne!==void 0?ne:!1,K.collectionId=(F=g.collectionId)!==null&&F!==void 0?F:"",K.projectId=(j=g.projectId)!==null&&j!==void 0?j:"",K}};function E(){return{serviceId:"",ownerUserId:"",ownerServiceUserId:"",ownerDemo:!1,ownerTrial:!1,collectionId:"",projectId:"",platformService:""}}a.SfuRoomMetadata={encode(g,O=h.Writer.create()){return g.serviceId!==""&&O.uint32(10).string(g.serviceId),g.ownerUserId!==""&&O.uint32(18).string(g.ownerUserId),g.ownerServiceUserId!==""&&O.uint32(26).string(g.ownerServiceUserId),g.ownerDemo===!0&&O.uint32(32).bool(g.ownerDemo),g.ownerTrial===!0&&O.uint32(40).bool(g.ownerTrial),g.collectionId!==""&&O.uint32(50).string(g.collectionId),g.projectId!==""&&O.uint32(58).string(g.projectId),g.platformService!==""&&O.uint32(66).string(g.platformService),O},decode(g,O){const $=g instanceof h.Reader?g:new h.Reader(g);let x=O===void 0?$.len:$.pos+O;const Y=E();for(;$.pos<x;){const te=$.uint32();switch(te>>>3){case 1:Y.serviceId=$.string();break;case 2:Y.ownerUserId=$.string();break;case 3:Y.ownerServiceUserId=$.string();break;case 4:Y.ownerDemo=$.bool();break;case 5:Y.ownerTrial=$.bool();break;case 6:Y.collectionId=$.string();break;case 7:Y.projectId=$.string();break;case 8:Y.platformService=$.string();break;default:$.skipType(te&7);break}}return Y},fromJSON(g){return{serviceId:W(g.serviceId)?String(g.serviceId):"",ownerUserId:W(g.ownerUserId)?String(g.ownerUserId):"",ownerServiceUserId:W(g.ownerServiceUserId)?String(g.ownerServiceUserId):"",ownerDemo:W(g.ownerDemo)?Boolean(g.ownerDemo):!1,ownerTrial:W(g.ownerTrial)?Boolean(g.ownerTrial):!1,collectionId:W(g.collectionId)?String(g.collectionId):"",projectId:W(g.projectId)?String(g.projectId):"",platformService:W(g.platformService)?String(g.platformService):""}},toJSON(g){const O={};return g.serviceId!==void 0&&(O.serviceId=g.serviceId),g.ownerUserId!==void 0&&(O.ownerUserId=g.ownerUserId),g.ownerServiceUserId!==void 0&&(O.ownerServiceUserId=g.ownerServiceUserId),g.ownerDemo!==void 0&&(O.ownerDemo=g.ownerDemo),g.ownerTrial!==void 0&&(O.ownerTrial=g.ownerTrial),g.collectionId!==void 0&&(O.collectionId=g.collectionId),g.projectId!==void 0&&(O.projectId=g.projectId),g.platformService!==void 0&&(O.platformService=g.platformService),O},fromPartial(g){var O,$,x,Y,te,ne,F,j;const K=E();return K.serviceId=(O=g.serviceId)!==null&&O!==void 0?O:"",K.ownerUserId=($=g.ownerUserId)!==null&&$!==void 0?$:"",K.ownerServiceUserId=(x=g.ownerServiceUserId)!==null&&x!==void 0?x:"",K.ownerDemo=(Y=g.ownerDemo)!==null&&Y!==void 0?Y:!1,K.ownerTrial=(te=g.ownerTrial)!==null&&te!==void 0?te:!1,K.collectionId=(ne=g.collectionId)!==null&&ne!==void 0?ne:"",K.projectId=(F=g.projectId)!==null&&F!==void 0?F:"",K.platformService=(j=g.platformService)!==null&&j!==void 0?j:"",K}};function I(){return{ownerServiceName:"",ownerServiceId:"",ownerUserId:"",ownerServiceUserId:"",ownerDemo:!1,applicableScope:[],role:void 0,ownerTrial:!1}}a.Authorization={encode(g,O=h.Writer.create()){g.ownerServiceName!==""&&O.uint32(10).string(g.ownerServiceName),g.ownerServiceId!==""&&O.uint32(18).string(g.ownerServiceId),g.ownerUserId!==""&&O.uint32(26).string(g.ownerUserId),g.ownerServiceUserId!==""&&O.uint32(34).string(g.ownerServiceUserId),g.ownerDemo===!0&&O.uint32(40).bool(g.ownerDemo);for(const $ of g.applicableScope)O.uint32(50).string($);return g.role!==void 0&&O.uint32(58).string(g.role),g.ownerTrial===!0&&O.uint32(64).bool(g.ownerTrial),O},decode(g,O){const $=g instanceof h.Reader?g:new h.Reader(g);let x=O===void 0?$.len:$.pos+O;const Y=I();for(;$.pos<x;){const te=$.uint32();switch(te>>>3){case 1:Y.ownerServiceName=$.string();break;case 2:Y.ownerServiceId=$.string();break;case 3:Y.ownerUserId=$.string();break;case 4:Y.ownerServiceUserId=$.string();break;case 5:Y.ownerDemo=$.bool();break;case 6:Y.applicableScope.push($.string());break;case 7:Y.role=$.string();break;case 8:Y.ownerTrial=$.bool();break;default:$.skipType(te&7);break}}return Y},fromJSON(g){return{ownerServiceName:W(g.ownerServiceName)?String(g.ownerServiceName):"",ownerServiceId:W(g.ownerServiceId)?String(g.ownerServiceId):"",ownerUserId:W(g.ownerUserId)?String(g.ownerUserId):"",ownerServiceUserId:W(g.ownerServiceUserId)?String(g.ownerServiceUserId):"",ownerDemo:W(g.ownerDemo)?Boolean(g.ownerDemo):!1,applicableScope:Array.isArray(g==null?void 0:g.applicableScope)?g.applicableScope.map(O=>String(O)):[],role:W(g.role)?String(g.role):void 0,ownerTrial:W(g.ownerTrial)?Boolean(g.ownerTrial):!1}},toJSON(g){const O={};return g.ownerServiceName!==void 0&&(O.ownerServiceName=g.ownerServiceName),g.ownerServiceId!==void 0&&(O.ownerServiceId=g.ownerServiceId),g.ownerUserId!==void 0&&(O.ownerUserId=g.ownerUserId),g.ownerServiceUserId!==void 0&&(O.ownerServiceUserId=g.ownerServiceUserId),g.ownerDemo!==void 0&&(O.ownerDemo=g.ownerDemo),g.applicableScope?O.applicableScope=g.applicableScope.map($=>$):O.applicableScope=[],g.role!==void 0&&(O.role=g.role),g.ownerTrial!==void 0&&(O.ownerTrial=g.ownerTrial),O},fromPartial(g){var O,$,x,Y,te,ne,F,j;const K=I();return K.ownerServiceName=(O=g.ownerServiceName)!==null&&O!==void 0?O:"",K.ownerServiceId=($=g.ownerServiceId)!==null&&$!==void 0?$:"",K.ownerUserId=(x=g.ownerUserId)!==null&&x!==void 0?x:"",K.ownerServiceUserId=(Y=g.ownerServiceUserId)!==null&&Y!==void 0?Y:"",K.ownerDemo=(te=g.ownerDemo)!==null&&te!==void 0?te:!1,K.applicableScope=((ne=g.applicableScope)===null||ne===void 0?void 0:ne.map(M=>M))||[],K.role=(F=g.role)!==null&&F!==void 0?F:void 0,K.ownerTrial=(j=g.ownerTrial)!==null&&j!==void 0?j:!1,K}};function N(){return{collectionId:void 0,projectId:void 0,ownerServiceUserId:"",ownerUserId:"",scope:[],requestedScope:[],requestedMaxDuration:void 0}}a.GuestScope={encode(g,O=h.Writer.create()){g.collectionId!==void 0&&O.uint32(10).string(g.collectionId),g.projectId!==void 0&&O.uint32(18).string(g.projectId),g.ownerServiceUserId!==""&&O.uint32(34).string(g.ownerServiceUserId),g.ownerUserId!==""&&O.uint32(42).string(g.ownerUserId);for(const $ of g.scope)O.uint32(50).string($);for(const $ of g.requestedScope)O.uint32(58).string($);return g.requestedMaxDuration!==void 0&&O.uint32(64).uint32(g.requestedMaxDuration),O},decode(g,O){const $=g instanceof h.Reader?g:new h.Reader(g);let x=O===void 0?$.len:$.pos+O;const Y=N();for(;$.pos<x;){const te=$.uint32();switch(te>>>3){case 1:Y.collectionId=$.string();break;case 2:Y.projectId=$.string();break;case 4:Y.ownerServiceUserId=$.string();break;case 5:Y.ownerUserId=$.string();break;case 6:Y.scope.push($.string());break;case 7:Y.requestedScope.push($.string());break;case 8:Y.requestedMaxDuration=$.uint32();break;default:$.skipType(te&7);break}}return Y},fromJSON(g){return{collectionId:W(g.collectionId)?String(g.collectionId):void 0,projectId:W(g.projectId)?String(g.projectId):void 0,ownerServiceUserId:W(g.ownerServiceUserId)?String(g.ownerServiceUserId):"",ownerUserId:W(g.ownerUserId)?String(g.ownerUserId):"",scope:Array.isArray(g==null?void 0:g.scope)?g.scope.map(O=>String(O)):[],requestedScope:Array.isArray(g==null?void 0:g.requestedScope)?g.requestedScope.map(O=>String(O)):[],requestedMaxDuration:W(g.requestedMaxDuration)?Number(g.requestedMaxDuration):void 0}},toJSON(g){const O={};return g.collectionId!==void 0&&(O.collectionId=g.collectionId),g.projectId!==void 0&&(O.projectId=g.projectId),g.ownerServiceUserId!==void 0&&(O.ownerServiceUserId=g.ownerServiceUserId),g.ownerUserId!==void 0&&(O.ownerUserId=g.ownerUserId),g.scope?O.scope=g.scope.map($=>$):O.scope=[],g.requestedScope?O.requestedScope=g.requestedScope.map($=>$):O.requestedScope=[],g.requestedMaxDuration!==void 0&&(O.requestedMaxDuration=Math.round(g.requestedMaxDuration)),O},fromPartial(g){var O,$,x,Y,te,ne,F;const j=N();return j.collectionId=(O=g.collectionId)!==null&&O!==void 0?O:void 0,j.projectId=($=g.projectId)!==null&&$!==void 0?$:void 0,j.ownerServiceUserId=(x=g.ownerServiceUserId)!==null&&x!==void 0?x:"",j.ownerUserId=(Y=g.ownerUserId)!==null&&Y!==void 0?Y:"",j.scope=((te=g.scope)===null||te===void 0?void 0:te.map(K=>K))||[],j.requestedScope=((ne=g.requestedScope)===null||ne===void 0?void 0:ne.map(K=>K))||[],j.requestedMaxDuration=(F=g.requestedMaxDuration)!==null&&F!==void 0?F:void 0,j}};function w(){return{serviceId:"",serviceName:"",serviceUserId:"",userId:"",displayName:void 0,demo:!1,scope:[],guestScope:[]}}a.User={encode(g,O=h.Writer.create()){g.serviceId!==""&&O.uint32(10).string(g.serviceId),g.serviceName!==""&&O.uint32(18).string(g.serviceName),g.serviceUserId!==""&&O.uint32(26).string(g.serviceUserId),g.userId!==""&&O.uint32(34).string(g.userId),g.displayName!==void 0&&O.uint32(42).string(g.displayName),g.demo===!0&&O.uint32(48).bool(g.demo);for(const $ of g.scope)O.uint32(58).string($);for(const $ of g.guestScope)a.GuestScope.encode($,O.uint32(66).fork()).ldelim();return O},decode(g,O){const $=g instanceof h.Reader?g:new h.Reader(g);let x=O===void 0?$.len:$.pos+O;const Y=w();for(;$.pos<x;){const te=$.uint32();switch(te>>>3){case 1:Y.serviceId=$.string();break;case 2:Y.serviceName=$.string();break;case 3:Y.serviceUserId=$.string();break;case 4:Y.userId=$.string();break;case 5:Y.displayName=$.string();break;case 6:Y.demo=$.bool();break;case 7:Y.scope.push($.string());break;case 8:Y.guestScope.push(a.GuestScope.decode($,$.uint32()));break;default:$.skipType(te&7);break}}return Y},fromJSON(g){return{serviceId:W(g.serviceId)?String(g.serviceId):"",serviceName:W(g.serviceName)?String(g.serviceName):"",serviceUserId:W(g.serviceUserId)?String(g.serviceUserId):"",userId:W(g.userId)?String(g.userId):"",displayName:W(g.displayName)?String(g.displayName):void 0,demo:W(g.demo)?Boolean(g.demo):!1,scope:Array.isArray(g==null?void 0:g.scope)?g.scope.map(O=>String(O)):[],guestScope:Array.isArray(g==null?void 0:g.guestScope)?g.guestScope.map(O=>a.GuestScope.fromJSON(O)):[]}},toJSON(g){const O={};return g.serviceId!==void 0&&(O.serviceId=g.serviceId),g.serviceName!==void 0&&(O.serviceName=g.serviceName),g.serviceUserId!==void 0&&(O.serviceUserId=g.serviceUserId),g.userId!==void 0&&(O.userId=g.userId),g.displayName!==void 0&&(O.displayName=g.displayName),g.demo!==void 0&&(O.demo=g.demo),g.scope?O.scope=g.scope.map($=>$):O.scope=[],g.guestScope?O.guestScope=g.guestScope.map($=>$?a.GuestScope.toJSON($):void 0):O.guestScope=[],O},fromPartial(g){var O,$,x,Y,te,ne,F,j;const K=w();return K.serviceId=(O=g.serviceId)!==null&&O!==void 0?O:"",K.serviceName=($=g.serviceName)!==null&&$!==void 0?$:"",K.serviceUserId=(x=g.serviceUserId)!==null&&x!==void 0?x:"",K.userId=(Y=g.userId)!==null&&Y!==void 0?Y:"",K.displayName=(te=g.displayName)!==null&&te!==void 0?te:void 0,K.demo=(ne=g.demo)!==null&&ne!==void 0?ne:!1,K.scope=((F=g.scope)===null||F===void 0?void 0:F.map(M=>M))||[],K.guestScope=((j=g.guestScope)===null||j===void 0?void 0:j.map(M=>a.GuestScope.fromPartial(M)))||[],K}};function C(){return{projectId:"",collectionId:"",role:y.Role.ROLE_UNSPECIFIED}}a.GuestControl={encode(g,O=h.Writer.create()){return g.projectId!==""&&O.uint32(10).string(g.projectId),g.collectionId!==""&&O.uint32(18).string(g.collectionId),g.role!==y.Role.ROLE_UNSPECIFIED&&O.uint32(24).int32((0,y.roleToNumber)(g.role)),O},decode(g,O){const $=g instanceof h.Reader?g:new h.Reader(g);let x=O===void 0?$.len:$.pos+O;const Y=C();for(;$.pos<x;){const te=$.uint32();switch(te>>>3){case 1:Y.projectId=$.string();break;case 2:Y.collectionId=$.string();break;case 3:Y.role=(0,y.roleFromJSON)($.int32());break;default:$.skipType(te&7);break}}return Y},fromJSON(g){return{projectId:W(g.projectId)?String(g.projectId):"",collectionId:W(g.collectionId)?String(g.collectionId):"",role:W(g.role)?(0,y.roleFromJSON)(g.role):y.Role.ROLE_UNSPECIFIED}},toJSON(g){const O={};return g.projectId!==void 0&&(O.projectId=g.projectId),g.collectionId!==void 0&&(O.collectionId=g.collectionId),g.role!==void 0&&(O.role=(0,y.roleToJSON)(g.role)),O},fromPartial(g){var O,$,x;const Y=C();return Y.projectId=(O=g.projectId)!==null&&O!==void 0?O:"",Y.collectionId=($=g.collectionId)!==null&&$!==void 0?$:"",Y.role=(x=g.role)!==null&&x!==void 0?x:y.Role.ROLE_UNSPECIFIED,Y}};function D(){return{typ:"",alg:"",nbf:0,iat:0,exp:0,iss:"",aud:"",sub:"",user:void 0,guestControl:void 0}}a.AccessToken={encode(g,O=h.Writer.create()){return g.typ!==""&&O.uint32(10).string(g.typ),g.alg!==""&&O.uint32(18).string(g.alg),g.nbf!==0&&O.uint32(24).uint32(g.nbf),g.iat!==0&&O.uint32(32).uint32(g.iat),g.exp!==0&&O.uint32(40).uint32(g.exp),g.iss!==""&&O.uint32(50).string(g.iss),g.aud!==""&&O.uint32(58).string(g.aud),g.sub!==""&&O.uint32(66).string(g.sub),g.user!==void 0&&a.User.encode(g.user,O.uint32(74).fork()).ldelim(),g.guestControl!==void 0&&a.GuestControl.encode(g.guestControl,O.uint32(82).fork()).ldelim(),O},decode(g,O){const $=g instanceof h.Reader?g:new h.Reader(g);let x=O===void 0?$.len:$.pos+O;const Y=D();for(;$.pos<x;){const te=$.uint32();switch(te>>>3){case 1:Y.typ=$.string();break;case 2:Y.alg=$.string();break;case 3:Y.nbf=$.uint32();break;case 4:Y.iat=$.uint32();break;case 5:Y.exp=$.uint32();break;case 6:Y.iss=$.string();break;case 7:Y.aud=$.string();break;case 8:Y.sub=$.string();break;case 9:Y.user=a.User.decode($,$.uint32());break;case 10:Y.guestControl=a.GuestControl.decode($,$.uint32());break;default:$.skipType(te&7);break}}return Y},fromJSON(g){return{typ:W(g.typ)?String(g.typ):"",alg:W(g.alg)?String(g.alg):"",nbf:W(g.nbf)?Number(g.nbf):0,iat:W(g.iat)?Number(g.iat):0,exp:W(g.exp)?Number(g.exp):0,iss:W(g.iss)?String(g.iss):"",aud:W(g.aud)?String(g.aud):"",sub:W(g.sub)?String(g.sub):"",user:W(g.user)?a.User.fromJSON(g.user):void 0,guestControl:W(g.guestControl)?a.GuestControl.fromJSON(g.guestControl):void 0}},toJSON(g){const O={};return g.typ!==void 0&&(O.typ=g.typ),g.alg!==void 0&&(O.alg=g.alg),g.nbf!==void 0&&(O.nbf=Math.round(g.nbf)),g.iat!==void 0&&(O.iat=Math.round(g.iat)),g.exp!==void 0&&(O.exp=Math.round(g.exp)),g.iss!==void 0&&(O.iss=g.iss),g.aud!==void 0&&(O.aud=g.aud),g.sub!==void 0&&(O.sub=g.sub),g.user!==void 0&&(O.user=g.user?a.User.toJSON(g.user):void 0),g.guestControl!==void 0&&(O.guestControl=g.guestControl?a.GuestControl.toJSON(g.guestControl):void 0),O},fromPartial(g){var O,$,x,Y,te,ne,F,j;const K=D();return K.typ=(O=g.typ)!==null&&O!==void 0?O:"",K.alg=($=g.alg)!==null&&$!==void 0?$:"",K.nbf=(x=g.nbf)!==null&&x!==void 0?x:0,K.iat=(Y=g.iat)!==null&&Y!==void 0?Y:0,K.exp=(te=g.exp)!==null&&te!==void 0?te:0,K.iss=(ne=g.iss)!==null&&ne!==void 0?ne:"",K.aud=(F=g.aud)!==null&&F!==void 0?F:"",K.sub=(j=g.sub)!==null&&j!==void 0?j:"",K.user=g.user!==void 0&&g.user!==null?a.User.fromPartial(g.user):void 0,K.guestControl=g.guestControl!==void 0&&g.guestControl!==null?a.GuestControl.fromPartial(g.guestControl):void 0,K}};function V(){return{roomCreate:!1,roomList:!1,roomJoin:!1,roomAdmin:!1,canPublish:!1,canPublishData:!1,canSubscribe:!1,hideParticipant:!1}}a.SfuTokenPermissions={encode(g,O=h.Writer.create()){return g.roomCreate===!0&&O.uint32(8).bool(g.roomCreate),g.roomList===!0&&O.uint32(16).bool(g.roomList),g.roomJoin===!0&&O.uint32(24).bool(g.roomJoin),g.roomAdmin===!0&&O.uint32(32).bool(g.roomAdmin),g.canPublish===!0&&O.uint32(40).bool(g.canPublish),g.canPublishData===!0&&O.uint32(48).bool(g.canPublishData),g.canSubscribe===!0&&O.uint32(56).bool(g.canSubscribe),g.hideParticipant===!0&&O.uint32(64).bool(g.hideParticipant),O},decode(g,O){const $=g instanceof h.Reader?g:new h.Reader(g);let x=O===void 0?$.len:$.pos+O;const Y=V();for(;$.pos<x;){const te=$.uint32();switch(te>>>3){case 1:Y.roomCreate=$.bool();break;case 2:Y.roomList=$.bool();break;case 3:Y.roomJoin=$.bool();break;case 4:Y.roomAdmin=$.bool();break;case 5:Y.canPublish=$.bool();break;case 6:Y.canPublishData=$.bool();break;case 7:Y.canSubscribe=$.bool();break;case 8:Y.hideParticipant=$.bool();break;default:$.skipType(te&7);break}}return Y},fromJSON(g){return{roomCreate:W(g.roomCreate)?Boolean(g.roomCreate):!1,roomList:W(g.roomList)?Boolean(g.roomList):!1,roomJoin:W(g.roomJoin)?Boolean(g.roomJoin):!1,roomAdmin:W(g.roomAdmin)?Boolean(g.roomAdmin):!1,canPublish:W(g.canPublish)?Boolean(g.canPublish):!1,canPublishData:W(g.canPublishData)?Boolean(g.canPublishData):!1,canSubscribe:W(g.canSubscribe)?Boolean(g.canSubscribe):!1,hideParticipant:W(g.hideParticipant)?Boolean(g.hideParticipant):!1}},toJSON(g){const O={};return g.roomCreate!==void 0&&(O.roomCreate=g.roomCreate),g.roomList!==void 0&&(O.roomList=g.roomList),g.roomJoin!==void 0&&(O.roomJoin=g.roomJoin),g.roomAdmin!==void 0&&(O.roomAdmin=g.roomAdmin),g.canPublish!==void 0&&(O.canPublish=g.canPublish),g.canPublishData!==void 0&&(O.canPublishData=g.canPublishData),g.canSubscribe!==void 0&&(O.canSubscribe=g.canSubscribe),g.hideParticipant!==void 0&&(O.hideParticipant=g.hideParticipant),O},fromPartial(g){var O,$,x,Y,te,ne,F,j;const K=V();return K.roomCreate=(O=g.roomCreate)!==null&&O!==void 0?O:!1,K.roomList=($=g.roomList)!==null&&$!==void 0?$:!1,K.roomJoin=(x=g.roomJoin)!==null&&x!==void 0?x:!1,K.roomAdmin=(Y=g.roomAdmin)!==null&&Y!==void 0?Y:!1,K.canPublish=(te=g.canPublish)!==null&&te!==void 0?te:!1,K.canPublishData=(ne=g.canPublishData)!==null&&ne!==void 0?ne:!1,K.canSubscribe=(F=g.canSubscribe)!==null&&F!==void 0?F:!1,K.hideParticipant=(j=g.hideParticipant)!==null&&j!==void 0?j:!1,K}};function J(){return{collectionId:"",projectId:"",code:"",url:""}}a.GuestUrl={encode(g,O=h.Writer.create()){return g.collectionId!==""&&O.uint32(10).string(g.collectionId),g.projectId!==""&&O.uint32(18).string(g.projectId),g.code!==""&&O.uint32(26).string(g.code),g.url!==""&&O.uint32(34).string(g.url),O},decode(g,O){const $=g instanceof h.Reader?g:new h.Reader(g);let x=O===void 0?$.len:$.pos+O;const Y=J();for(;$.pos<x;){const te=$.uint32();switch(te>>>3){case 1:Y.collectionId=$.string();break;case 2:Y.projectId=$.string();break;case 3:Y.code=$.string();break;case 4:Y.url=$.string();break;default:$.skipType(te&7);break}}return Y},fromJSON(g){return{collectionId:W(g.collectionId)?String(g.collectionId):"",projectId:W(g.projectId)?String(g.projectId):"",code:W(g.code)?String(g.code):"",url:W(g.url)?String(g.url):""}},toJSON(g){const O={};return g.collectionId!==void 0&&(O.collectionId=g.collectionId),g.projectId!==void 0&&(O.projectId=g.projectId),g.code!==void 0&&(O.code=g.code),g.url!==void 0&&(O.url=g.url),O},fromPartial(g){var O,$,x,Y;const te=J();return te.collectionId=(O=g.collectionId)!==null&&O!==void 0?O:"",te.projectId=($=g.projectId)!==null&&$!==void 0?$:"",te.code=(x=g.code)!==null&&x!==void 0?x:"",te.url=(Y=g.url)!==null&&Y!==void 0?Y:"",te}},h.util.Long!==p.default&&(h.util.Long=p.default,h.configure());function W(g){return g!=null}})(security);var dist$1={},grants={};Object.defineProperty(grants,"__esModule",{value:!0});var livekit_models$1={};(function(a){var s=commonjsGlobal&&commonjsGlobal.__importDefault||function(v){return v&&v.__esModule?v:{default:v}};Object.defineProperty(a,"__esModule",{value:!0}),a.ParticipantTracks=a.UserPacket=a.SpeakerInfo=a.ActiveSpeakerUpdate=a.DataPacket=a.VideoLayer=a.TrackInfo=a.ParticipantInfo=a.Codec=a.Room=a.dataPacket_KindToJSON=a.dataPacket_KindFromJSON=a.DataPacket_Kind=a.participantInfo_StateToJSON=a.participantInfo_StateFromJSON=a.ParticipantInfo_State=a.connectionQualityToJSON=a.connectionQualityFromJSON=a.ConnectionQuality=a.videoQualityToJSON=a.videoQualityFromJSON=a.VideoQuality=a.trackSourceToJSON=a.trackSourceFromJSON=a.TrackSource=a.trackTypeToJSON=a.trackTypeFromJSON=a.TrackType=a.protobufPackage=void 0;const u=s(long),d=s(minimal$2);a.protobufPackage="livekit";var l;(function(v){v[v.AUDIO=0]="AUDIO",v[v.VIDEO=1]="VIDEO",v[v.DATA=2]="DATA",v[v.UNRECOGNIZED=-1]="UNRECOGNIZED"})(l=a.TrackType||(a.TrackType={}));function p(v){switch(v){case 0:case"AUDIO":return l.AUDIO;case 1:case"VIDEO":return l.VIDEO;case 2:case"DATA":return l.DATA;case-1:case"UNRECOGNIZED":default:return l.UNRECOGNIZED}}a.trackTypeFromJSON=p;function h(v){switch(v){case l.AUDIO:return"AUDIO";case l.VIDEO:return"VIDEO";case l.DATA:return"DATA";default:return"UNKNOWN"}}a.trackTypeToJSON=h;var y;(function(v){v[v.UNKNOWN=0]="UNKNOWN",v[v.CAMERA=1]="CAMERA",v[v.MICROPHONE=2]="MICROPHONE",v[v.SCREEN_SHARE=3]="SCREEN_SHARE",v[v.SCREEN_SHARE_AUDIO=4]="SCREEN_SHARE_AUDIO",v[v.UNRECOGNIZED=-1]="UNRECOGNIZED"})(y=a.TrackSource||(a.TrackSource={}));function _(v){switch(v){case 0:case"UNKNOWN":return y.UNKNOWN;case 1:case"CAMERA":return y.CAMERA;case 2:case"MICROPHONE":return y.MICROPHONE;case 3:case"SCREEN_SHARE":return y.SCREEN_SHARE;case 4:case"SCREEN_SHARE_AUDIO":return y.SCREEN_SHARE_AUDIO;case-1:case"UNRECOGNIZED":default:return y.UNRECOGNIZED}}a.trackSourceFromJSON=_;function E(v){switch(v){case y.UNKNOWN:return"UNKNOWN";case y.CAMERA:return"CAMERA";case y.MICROPHONE:return"MICROPHONE";case y.SCREEN_SHARE:return"SCREEN_SHARE";case y.SCREEN_SHARE_AUDIO:return"SCREEN_SHARE_AUDIO";default:return"UNKNOWN"}}a.trackSourceToJSON=E;var I;(function(v){v[v.LOW=0]="LOW",v[v.MEDIUM=1]="MEDIUM",v[v.HIGH=2]="HIGH",v[v.UNRECOGNIZED=-1]="UNRECOGNIZED"})(I=a.VideoQuality||(a.VideoQuality={}));function N(v){switch(v){case 0:case"LOW":return I.LOW;case 1:case"MEDIUM":return I.MEDIUM;case 2:case"HIGH":return I.HIGH;case-1:case"UNRECOGNIZED":default:return I.UNRECOGNIZED}}a.videoQualityFromJSON=N;function w(v){switch(v){case I.LOW:return"LOW";case I.MEDIUM:return"MEDIUM";case I.HIGH:return"HIGH";default:return"UNKNOWN"}}a.videoQualityToJSON=w;var C;(function(v){v[v.POOR=0]="POOR",v[v.GOOD=1]="GOOD",v[v.EXCELLENT=2]="EXCELLENT",v[v.UNRECOGNIZED=-1]="UNRECOGNIZED"})(C=a.ConnectionQuality||(a.ConnectionQuality={}));function D(v){switch(v){case 0:case"POOR":return C.POOR;case 1:case"GOOD":return C.GOOD;case 2:case"EXCELLENT":return C.EXCELLENT;case-1:case"UNRECOGNIZED":default:return C.UNRECOGNIZED}}a.connectionQualityFromJSON=D;function V(v){switch(v){case C.POOR:return"POOR";case C.GOOD:return"GOOD";case C.EXCELLENT:return"EXCELLENT";default:return"UNKNOWN"}}a.connectionQualityToJSON=V;var J;(function(v){v[v.JOINING=0]="JOINING",v[v.JOINED=1]="JOINED",v[v.ACTIVE=2]="ACTIVE",v[v.DISCONNECTED=3]="DISCONNECTED",v[v.UNRECOGNIZED=-1]="UNRECOGNIZED"})(J=a.ParticipantInfo_State||(a.ParticipantInfo_State={}));function W(v){switch(v){case 0:case"JOINING":return J.JOINING;case 1:case"JOINED":return J.JOINED;case 2:case"ACTIVE":return J.ACTIVE;case 3:case"DISCONNECTED":return J.DISCONNECTED;case-1:case"UNRECOGNIZED":default:return J.UNRECOGNIZED}}a.participantInfo_StateFromJSON=W;function g(v){switch(v){case J.JOINING:return"JOINING";case J.JOINED:return"JOINED";case J.ACTIVE:return"ACTIVE";case J.DISCONNECTED:return"DISCONNECTED";default:return"UNKNOWN"}}a.participantInfo_StateToJSON=g;var O;(function(v){v[v.RELIABLE=0]="RELIABLE",v[v.LOSSY=1]="LOSSY",v[v.UNRECOGNIZED=-1]="UNRECOGNIZED"})(O=a.DataPacket_Kind||(a.DataPacket_Kind={}));function $(v){switch(v){case 0:case"RELIABLE":return O.RELIABLE;case 1:case"LOSSY":return O.LOSSY;case-1:case"UNRECOGNIZED":default:return O.UNRECOGNIZED}}a.dataPacket_KindFromJSON=$;function x(v){switch(v){case O.RELIABLE:return"RELIABLE";case O.LOSSY:return"LOSSY";default:return"UNKNOWN"}}a.dataPacket_KindToJSON=x;const Y={sid:"",name:"",emptyTimeout:0,maxParticipants:0,creationTime:0,turnPassword:"",metadata:"",numParticipants:0,activeRecording:!1};a.Room={encode(v,T=d.default.Writer.create()){v.sid!==""&&T.uint32(10).string(v.sid),v.name!==""&&T.uint32(18).string(v.name),v.emptyTimeout!==0&&T.uint32(24).uint32(v.emptyTimeout),v.maxParticipants!==0&&T.uint32(32).uint32(v.maxParticipants),v.creationTime!==0&&T.uint32(40).int64(v.creationTime),v.turnPassword!==""&&T.uint32(50).string(v.turnPassword);for(const L of v.enabledCodecs)a.Codec.encode(L,T.uint32(58).fork()).ldelim();return v.metadata!==""&&T.uint32(66).string(v.metadata),v.numParticipants!==0&&T.uint32(72).uint32(v.numParticipants),v.activeRecording===!0&&T.uint32(80).bool(v.activeRecording),T},decode(v,T){const L=v instanceof d.default.Reader?v:new d.default.Reader(v);let oe=T===void 0?L.len:L.pos+T;const k=Object.assign({},Y);for(k.enabledCodecs=[];L.pos<oe;){const U=L.uint32();switch(U>>>3){case 1:k.sid=L.string();break;case 2:k.name=L.string();break;case 3:k.emptyTimeout=L.uint32();break;case 4:k.maxParticipants=L.uint32();break;case 5:k.creationTime=ye(L.int64());break;case 6:k.turnPassword=L.string();break;case 7:k.enabledCodecs.push(a.Codec.decode(L,L.uint32()));break;case 8:k.metadata=L.string();break;case 9:k.numParticipants=L.uint32();break;case 10:k.activeRecording=L.bool();break;default:L.skipType(U&7);break}}return k},fromJSON(v){const T=Object.assign({},Y);if(T.enabledCodecs=[],v.sid!==void 0&&v.sid!==null?T.sid=String(v.sid):T.sid="",v.name!==void 0&&v.name!==null?T.name=String(v.name):T.name="",v.emptyTimeout!==void 0&&v.emptyTimeout!==null?T.emptyTimeout=Number(v.emptyTimeout):T.emptyTimeout=0,v.maxParticipants!==void 0&&v.maxParticipants!==null?T.maxParticipants=Number(v.maxParticipants):T.maxParticipants=0,v.creationTime!==void 0&&v.creationTime!==null?T.creationTime=Number(v.creationTime):T.creationTime=0,v.turnPassword!==void 0&&v.turnPassword!==null?T.turnPassword=String(v.turnPassword):T.turnPassword="",v.enabledCodecs!==void 0&&v.enabledCodecs!==null)for(const L of v.enabledCodecs)T.enabledCodecs.push(a.Codec.fromJSON(L));return v.metadata!==void 0&&v.metadata!==null?T.metadata=String(v.metadata):T.metadata="",v.numParticipants!==void 0&&v.numParticipants!==null?T.numParticipants=Number(v.numParticipants):T.numParticipants=0,v.activeRecording!==void 0&&v.activeRecording!==null?T.activeRecording=Boolean(v.activeRecording):T.activeRecording=!1,T},toJSON(v){const T={};return v.sid!==void 0&&(T.sid=v.sid),v.name!==void 0&&(T.name=v.name),v.emptyTimeout!==void 0&&(T.emptyTimeout=v.emptyTimeout),v.maxParticipants!==void 0&&(T.maxParticipants=v.maxParticipants),v.creationTime!==void 0&&(T.creationTime=v.creationTime),v.turnPassword!==void 0&&(T.turnPassword=v.turnPassword),v.enabledCodecs?T.enabledCodecs=v.enabledCodecs.map(L=>L?a.Codec.toJSON(L):void 0):T.enabledCodecs=[],v.metadata!==void 0&&(T.metadata=v.metadata),v.numParticipants!==void 0&&(T.numParticipants=v.numParticipants),v.activeRecording!==void 0&&(T.activeRecording=v.activeRecording),T},fromPartial(v){const T=Object.assign({},Y);if(T.enabledCodecs=[],v.sid!==void 0&&v.sid!==null?T.sid=v.sid:T.sid="",v.name!==void 0&&v.name!==null?T.name=v.name:T.name="",v.emptyTimeout!==void 0&&v.emptyTimeout!==null?T.emptyTimeout=v.emptyTimeout:T.emptyTimeout=0,v.maxParticipants!==void 0&&v.maxParticipants!==null?T.maxParticipants=v.maxParticipants:T.maxParticipants=0,v.creationTime!==void 0&&v.creationTime!==null?T.creationTime=v.creationTime:T.creationTime=0,v.turnPassword!==void 0&&v.turnPassword!==null?T.turnPassword=v.turnPassword:T.turnPassword="",v.enabledCodecs!==void 0&&v.enabledCodecs!==null)for(const L of v.enabledCodecs)T.enabledCodecs.push(a.Codec.fromPartial(L));return v.metadata!==void 0&&v.metadata!==null?T.metadata=v.metadata:T.metadata="",v.numParticipants!==void 0&&v.numParticipants!==null?T.numParticipants=v.numParticipants:T.numParticipants=0,v.activeRecording!==void 0&&v.activeRecording!==null?T.activeRecording=v.activeRecording:T.activeRecording=!1,T}};const te={mime:"",fmtpLine:""};a.Codec={encode(v,T=d.default.Writer.create()){return v.mime!==""&&T.uint32(10).string(v.mime),v.fmtpLine!==""&&T.uint32(18).string(v.fmtpLine),T},decode(v,T){const L=v instanceof d.default.Reader?v:new d.default.Reader(v);let oe=T===void 0?L.len:L.pos+T;const k=Object.assign({},te);for(;L.pos<oe;){const U=L.uint32();switch(U>>>3){case 1:k.mime=L.string();break;case 2:k.fmtpLine=L.string();break;default:L.skipType(U&7);break}}return k},fromJSON(v){const T=Object.assign({},te);return v.mime!==void 0&&v.mime!==null?T.mime=String(v.mime):T.mime="",v.fmtpLine!==void 0&&v.fmtpLine!==null?T.fmtpLine=String(v.fmtpLine):T.fmtpLine="",T},toJSON(v){const T={};return v.mime!==void 0&&(T.mime=v.mime),v.fmtpLine!==void 0&&(T.fmtpLine=v.fmtpLine),T},fromPartial(v){const T=Object.assign({},te);return v.mime!==void 0&&v.mime!==null?T.mime=v.mime:T.mime="",v.fmtpLine!==void 0&&v.fmtpLine!==null?T.fmtpLine=v.fmtpLine:T.fmtpLine="",T}};const ne={sid:"",identity:"",state:0,metadata:"",joinedAt:0,hidden:!1,recorder:!1,name:""};a.ParticipantInfo={encode(v,T=d.default.Writer.create()){v.sid!==""&&T.uint32(10).string(v.sid),v.identity!==""&&T.uint32(18).string(v.identity),v.state!==0&&T.uint32(24).int32(v.state);for(const L of v.tracks)a.TrackInfo.encode(L,T.uint32(34).fork()).ldelim();return v.metadata!==""&&T.uint32(42).string(v.metadata),v.joinedAt!==0&&T.uint32(48).int64(v.joinedAt),v.hidden===!0&&T.uint32(56).bool(v.hidden),v.recorder===!0&&T.uint32(64).bool(v.recorder),v.name!==""&&T.uint32(74).string(v.name),T},decode(v,T){const L=v instanceof d.default.Reader?v:new d.default.Reader(v);let oe=T===void 0?L.len:L.pos+T;const k=Object.assign({},ne);for(k.tracks=[];L.pos<oe;){const U=L.uint32();switch(U>>>3){case 1:k.sid=L.string();break;case 2:k.identity=L.string();break;case 3:k.state=L.int32();break;case 4:k.tracks.push(a.TrackInfo.decode(L,L.uint32()));break;case 5:k.metadata=L.string();break;case 6:k.joinedAt=ye(L.int64());break;case 7:k.hidden=L.bool();break;case 8:k.recorder=L.bool();break;case 9:k.name=L.string();break;default:L.skipType(U&7);break}}return k},fromJSON(v){const T=Object.assign({},ne);if(T.tracks=[],v.sid!==void 0&&v.sid!==null?T.sid=String(v.sid):T.sid="",v.identity!==void 0&&v.identity!==null?T.identity=String(v.identity):T.identity="",v.state!==void 0&&v.state!==null?T.state=W(v.state):T.state=0,v.tracks!==void 0&&v.tracks!==null)for(const L of v.tracks)T.tracks.push(a.TrackInfo.fromJSON(L));return v.metadata!==void 0&&v.metadata!==null?T.metadata=String(v.metadata):T.metadata="",v.joinedAt!==void 0&&v.joinedAt!==null?T.joinedAt=Number(v.joinedAt):T.joinedAt=0,v.hidden!==void 0&&v.hidden!==null?T.hidden=Boolean(v.hidden):T.hidden=!1,v.recorder!==void 0&&v.recorder!==null?T.recorder=Boolean(v.recorder):T.recorder=!1,v.name!==void 0&&v.name!==null?T.name=String(v.name):T.name="",T},toJSON(v){const T={};return v.sid!==void 0&&(T.sid=v.sid),v.identity!==void 0&&(T.identity=v.identity),v.state!==void 0&&(T.state=g(v.state)),v.tracks?T.tracks=v.tracks.map(L=>L?a.TrackInfo.toJSON(L):void 0):T.tracks=[],v.metadata!==void 0&&(T.metadata=v.metadata),v.joinedAt!==void 0&&(T.joinedAt=v.joinedAt),v.hidden!==void 0&&(T.hidden=v.hidden),v.recorder!==void 0&&(T.recorder=v.recorder),v.name!==void 0&&(T.name=v.name),T},fromPartial(v){const T=Object.assign({},ne);if(T.tracks=[],v.sid!==void 0&&v.sid!==null?T.sid=v.sid:T.sid="",v.identity!==void 0&&v.identity!==null?T.identity=v.identity:T.identity="",v.state!==void 0&&v.state!==null?T.state=v.state:T.state=0,v.tracks!==void 0&&v.tracks!==null)for(const L of v.tracks)T.tracks.push(a.TrackInfo.fromPartial(L));return v.metadata!==void 0&&v.metadata!==null?T.metadata=v.metadata:T.metadata="",v.joinedAt!==void 0&&v.joinedAt!==null?T.joinedAt=v.joinedAt:T.joinedAt=0,v.hidden!==void 0&&v.hidden!==null?T.hidden=v.hidden:T.hidden=!1,v.recorder!==void 0&&v.recorder!==null?T.recorder=v.recorder:T.recorder=!1,v.name!==void 0&&v.name!==null?T.name=v.name:T.name="",T}};const F={sid:"",type:0,name:"",muted:!1,width:0,height:0,simulcast:!1,disableDtx:!1,source:0,mimeType:""};a.TrackInfo={encode(v,T=d.default.Writer.create()){v.sid!==""&&T.uint32(10).string(v.sid),v.type!==0&&T.uint32(16).int32(v.type),v.name!==""&&T.uint32(26).string(v.name),v.muted===!0&&T.uint32(32).bool(v.muted),v.width!==0&&T.uint32(40).uint32(v.width),v.height!==0&&T.uint32(48).uint32(v.height),v.simulcast===!0&&T.uint32(56).bool(v.simulcast),v.disableDtx===!0&&T.uint32(64).bool(v.disableDtx),v.source!==0&&T.uint32(72).int32(v.source);for(const L of v.layers)a.VideoLayer.encode(L,T.uint32(82).fork()).ldelim();return v.mimeType!==""&&T.uint32(90).string(v.mimeType),T},decode(v,T){const L=v instanceof d.default.Reader?v:new d.default.Reader(v);let oe=T===void 0?L.len:L.pos+T;const k=Object.assign({},F);for(k.layers=[];L.pos<oe;){const U=L.uint32();switch(U>>>3){case 1:k.sid=L.string();break;case 2:k.type=L.int32();break;case 3:k.name=L.string();break;case 4:k.muted=L.bool();break;case 5:k.width=L.uint32();break;case 6:k.height=L.uint32();break;case 7:k.simulcast=L.bool();break;case 8:k.disableDtx=L.bool();break;case 9:k.source=L.int32();break;case 10:k.layers.push(a.VideoLayer.decode(L,L.uint32()));break;case 11:k.mimeType=L.string();break;default:L.skipType(U&7);break}}return k},fromJSON(v){const T=Object.assign({},F);if(T.layers=[],v.sid!==void 0&&v.sid!==null?T.sid=String(v.sid):T.sid="",v.type!==void 0&&v.type!==null?T.type=p(v.type):T.type=0,v.name!==void 0&&v.name!==null?T.name=String(v.name):T.name="",v.muted!==void 0&&v.muted!==null?T.muted=Boolean(v.muted):T.muted=!1,v.width!==void 0&&v.width!==null?T.width=Number(v.width):T.width=0,v.height!==void 0&&v.height!==null?T.height=Number(v.height):T.height=0,v.simulcast!==void 0&&v.simulcast!==null?T.simulcast=Boolean(v.simulcast):T.simulcast=!1,v.disableDtx!==void 0&&v.disableDtx!==null?T.disableDtx=Boolean(v.disableDtx):T.disableDtx=!1,v.source!==void 0&&v.source!==null?T.source=_(v.source):T.source=0,v.layers!==void 0&&v.layers!==null)for(const L of v.layers)T.layers.push(a.VideoLayer.fromJSON(L));return v.mimeType!==void 0&&v.mimeType!==null?T.mimeType=String(v.mimeType):T.mimeType="",T},toJSON(v){const T={};return v.sid!==void 0&&(T.sid=v.sid),v.type!==void 0&&(T.type=h(v.type)),v.name!==void 0&&(T.name=v.name),v.muted!==void 0&&(T.muted=v.muted),v.width!==void 0&&(T.width=v.width),v.height!==void 0&&(T.height=v.height),v.simulcast!==void 0&&(T.simulcast=v.simulcast),v.disableDtx!==void 0&&(T.disableDtx=v.disableDtx),v.source!==void 0&&(T.source=E(v.source)),v.layers?T.layers=v.layers.map(L=>L?a.VideoLayer.toJSON(L):void 0):T.layers=[],v.mimeType!==void 0&&(T.mimeType=v.mimeType),T},fromPartial(v){const T=Object.assign({},F);if(T.layers=[],v.sid!==void 0&&v.sid!==null?T.sid=v.sid:T.sid="",v.type!==void 0&&v.type!==null?T.type=v.type:T.type=0,v.name!==void 0&&v.name!==null?T.name=v.name:T.name="",v.muted!==void 0&&v.muted!==null?T.muted=v.muted:T.muted=!1,v.width!==void 0&&v.width!==null?T.width=v.width:T.width=0,v.height!==void 0&&v.height!==null?T.height=v.height:T.height=0,v.simulcast!==void 0&&v.simulcast!==null?T.simulcast=v.simulcast:T.simulcast=!1,v.disableDtx!==void 0&&v.disableDtx!==null?T.disableDtx=v.disableDtx:T.disableDtx=!1,v.source!==void 0&&v.source!==null?T.source=v.source:T.source=0,v.layers!==void 0&&v.layers!==null)for(const L of v.layers)T.layers.push(a.VideoLayer.fromPartial(L));return v.mimeType!==void 0&&v.mimeType!==null?T.mimeType=v.mimeType:T.mimeType="",T}};const j={quality:0,width:0,height:0,bitrate:0};a.VideoLayer={encode(v,T=d.default.Writer.create()){return v.quality!==0&&T.uint32(8).int32(v.quality),v.width!==0&&T.uint32(16).uint32(v.width),v.height!==0&&T.uint32(24).uint32(v.height),v.bitrate!==0&&T.uint32(32).uint32(v.bitrate),T},decode(v,T){const L=v instanceof d.default.Reader?v:new d.default.Reader(v);let oe=T===void 0?L.len:L.pos+T;const k=Object.assign({},j);for(;L.pos<oe;){const U=L.uint32();switch(U>>>3){case 1:k.quality=L.int32();break;case 2:k.width=L.uint32();break;case 3:k.height=L.uint32();break;case 4:k.bitrate=L.uint32();break;default:L.skipType(U&7);break}}return k},fromJSON(v){const T=Object.assign({},j);return v.quality!==void 0&&v.quality!==null?T.quality=N(v.quality):T.quality=0,v.width!==void 0&&v.width!==null?T.width=Number(v.width):T.width=0,v.height!==void 0&&v.height!==null?T.height=Number(v.height):T.height=0,v.bitrate!==void 0&&v.bitrate!==null?T.bitrate=Number(v.bitrate):T.bitrate=0,T},toJSON(v){const T={};return v.quality!==void 0&&(T.quality=w(v.quality)),v.width!==void 0&&(T.width=v.width),v.height!==void 0&&(T.height=v.height),v.bitrate!==void 0&&(T.bitrate=v.bitrate),T},fromPartial(v){const T=Object.assign({},j);return v.quality!==void 0&&v.quality!==null?T.quality=v.quality:T.quality=0,v.width!==void 0&&v.width!==null?T.width=v.width:T.width=0,v.height!==void 0&&v.height!==null?T.height=v.height:T.height=0,v.bitrate!==void 0&&v.bitrate!==null?T.bitrate=v.bitrate:T.bitrate=0,T}};const K={kind:0};a.DataPacket={encode(v,T=d.default.Writer.create()){return v.kind!==0&&T.uint32(8).int32(v.kind),v.user!==void 0&&a.UserPacket.encode(v.user,T.uint32(18).fork()).ldelim(),v.speaker!==void 0&&a.ActiveSpeakerUpdate.encode(v.speaker,T.uint32(26).fork()).ldelim(),T},decode(v,T){const L=v instanceof d.default.Reader?v:new d.default.Reader(v);let oe=T===void 0?L.len:L.pos+T;const k=Object.assign({},K);for(;L.pos<oe;){const U=L.uint32();switch(U>>>3){case 1:k.kind=L.int32();break;case 2:k.user=a.UserPacket.decode(L,L.uint32());break;case 3:k.speaker=a.ActiveSpeakerUpdate.decode(L,L.uint32());break;default:L.skipType(U&7);break}}return k},fromJSON(v){const T=Object.assign({},K);return v.kind!==void 0&&v.kind!==null?T.kind=$(v.kind):T.kind=0,v.user!==void 0&&v.user!==null?T.user=a.UserPacket.fromJSON(v.user):T.user=void 0,v.speaker!==void 0&&v.speaker!==null?T.speaker=a.ActiveSpeakerUpdate.fromJSON(v.speaker):T.speaker=void 0,T},toJSON(v){const T={};return v.kind!==void 0&&(T.kind=x(v.kind)),v.user!==void 0&&(T.user=v.user?a.UserPacket.toJSON(v.user):void 0),v.speaker!==void 0&&(T.speaker=v.speaker?a.ActiveSpeakerUpdate.toJSON(v.speaker):void 0),T},fromPartial(v){const T=Object.assign({},K);return v.kind!==void 0&&v.kind!==null?T.kind=v.kind:T.kind=0,v.user!==void 0&&v.user!==null?T.user=a.UserPacket.fromPartial(v.user):T.user=void 0,v.speaker!==void 0&&v.speaker!==null?T.speaker=a.ActiveSpeakerUpdate.fromPartial(v.speaker):T.speaker=void 0,T}};const M={};a.ActiveSpeakerUpdate={encode(v,T=d.default.Writer.create()){for(const L of v.speakers)a.SpeakerInfo.encode(L,T.uint32(10).fork()).ldelim();return T},decode(v,T){const L=v instanceof d.default.Reader?v:new d.default.Reader(v);let oe=T===void 0?L.len:L.pos+T;const k=Object.assign({},M);for(k.speakers=[];L.pos<oe;){const U=L.uint32();switch(U>>>3){case 1:k.speakers.push(a.SpeakerInfo.decode(L,L.uint32()));break;default:L.skipType(U&7);break}}return k},fromJSON(v){const T=Object.assign({},M);if(T.speakers=[],v.speakers!==void 0&&v.speakers!==null)for(const L of v.speakers)T.speakers.push(a.SpeakerInfo.fromJSON(L));return T},toJSON(v){const T={};return v.speakers?T.speakers=v.speakers.map(L=>L?a.SpeakerInfo.toJSON(L):void 0):T.speakers=[],T},fromPartial(v){const T=Object.assign({},M);if(T.speakers=[],v.speakers!==void 0&&v.speakers!==null)for(const L of v.speakers)T.speakers.push(a.SpeakerInfo.fromPartial(L));return T}};const q={sid:"",level:0,active:!1};a.SpeakerInfo={encode(v,T=d.default.Writer.create()){return v.sid!==""&&T.uint32(10).string(v.sid),v.level!==0&&T.uint32(21).float(v.level),v.active===!0&&T.uint32(24).bool(v.active),T},decode(v,T){const L=v instanceof d.default.Reader?v:new d.default.Reader(v);let oe=T===void 0?L.len:L.pos+T;const k=Object.assign({},q);for(;L.pos<oe;){const U=L.uint32();switch(U>>>3){case 1:k.sid=L.string();break;case 2:k.level=L.float();break;case 3:k.active=L.bool();break;default:L.skipType(U&7);break}}return k},fromJSON(v){const T=Object.assign({},q);return v.sid!==void 0&&v.sid!==null?T.sid=String(v.sid):T.sid="",v.level!==void 0&&v.level!==null?T.level=Number(v.level):T.level=0,v.active!==void 0&&v.active!==null?T.active=Boolean(v.active):T.active=!1,T},toJSON(v){const T={};return v.sid!==void 0&&(T.sid=v.sid),v.level!==void 0&&(T.level=v.level),v.active!==void 0&&(T.active=v.active),T},fromPartial(v){const T=Object.assign({},q);return v.sid!==void 0&&v.sid!==null?T.sid=v.sid:T.sid="",v.level!==void 0&&v.level!==null?T.level=v.level:T.level=0,v.active!==void 0&&v.active!==null?T.active=v.active:T.active=!1,T}};const z={participantSid:"",destinationSids:""};a.UserPacket={encode(v,T=d.default.Writer.create()){v.participantSid!==""&&T.uint32(10).string(v.participantSid),v.payload.length!==0&&T.uint32(18).bytes(v.payload);for(const L of v.destinationSids)T.uint32(26).string(L);return T},decode(v,T){const L=v instanceof d.default.Reader?v:new d.default.Reader(v);let oe=T===void 0?L.len:L.pos+T;const k=Object.assign({},z);for(k.destinationSids=[],k.payload=new Uint8Array;L.pos<oe;){const U=L.uint32();switch(U>>>3){case 1:k.participantSid=L.string();break;case 2:k.payload=L.bytes();break;case 3:k.destinationSids.push(L.string());break;default:L.skipType(U&7);break}}return k},fromJSON(v){const T=Object.assign({},z);if(T.destinationSids=[],T.payload=new Uint8Array,v.participantSid!==void 0&&v.participantSid!==null?T.participantSid=String(v.participantSid):T.participantSid="",v.payload!==void 0&&v.payload!==null&&(T.payload=ce(v.payload)),v.destinationSids!==void 0&&v.destinationSids!==null)for(const L of v.destinationSids)T.destinationSids.push(String(L));return T},toJSON(v){const T={};return v.participantSid!==void 0&&(T.participantSid=v.participantSid),v.payload!==void 0&&(T.payload=ve(v.payload!==void 0?v.payload:new Uint8Array)),v.destinationSids?T.destinationSids=v.destinationSids.map(L=>L):T.destinationSids=[],T},fromPartial(v){const T=Object.assign({},z);if(T.destinationSids=[],v.participantSid!==void 0&&v.participantSid!==null?T.participantSid=v.participantSid:T.participantSid="",v.payload!==void 0&&v.payload!==null?T.payload=v.payload:T.payload=new Uint8Array,v.destinationSids!==void 0&&v.destinationSids!==null)for(const L of v.destinationSids)T.destinationSids.push(L);return T}};const le={participantSid:"",trackSids:""};a.ParticipantTracks={encode(v,T=d.default.Writer.create()){v.participantSid!==""&&T.uint32(10).string(v.participantSid);for(const L of v.trackSids)T.uint32(18).string(L);return T},decode(v,T){const L=v instanceof d.default.Reader?v:new d.default.Reader(v);let oe=T===void 0?L.len:L.pos+T;const k=Object.assign({},le);for(k.trackSids=[];L.pos<oe;){const U=L.uint32();switch(U>>>3){case 1:k.participantSid=L.string();break;case 2:k.trackSids.push(L.string());break;default:L.skipType(U&7);break}}return k},fromJSON(v){const T=Object.assign({},le);if(T.trackSids=[],v.participantSid!==void 0&&v.participantSid!==null?T.participantSid=String(v.participantSid):T.participantSid="",v.trackSids!==void 0&&v.trackSids!==null)for(const L of v.trackSids)T.trackSids.push(String(L));return T},toJSON(v){const T={};return v.participantSid!==void 0&&(T.participantSid=v.participantSid),v.trackSids?T.trackSids=v.trackSids.map(L=>L):T.trackSids=[],T},fromPartial(v){const T=Object.assign({},le);if(T.trackSids=[],v.participantSid!==void 0&&v.participantSid!==null?T.participantSid=v.participantSid:T.participantSid="",v.trackSids!==void 0&&v.trackSids!==null)for(const L of v.trackSids)T.trackSids.push(L);return T}};var re=(()=>{if(typeof re!="undefined")return re;if(typeof self!="undefined")return self;if(typeof window!="undefined")return window;if(typeof commonjsGlobal!="undefined")return commonjsGlobal;throw"Unable to locate global object"})();const Q=re.atob||(v=>re.Buffer.from(v,"base64").toString("binary"));function ce(v){const T=Q(v),L=new Uint8Array(T.length);for(let oe=0;oe<T.length;++oe)L[oe]=T.charCodeAt(oe);return L}const me=re.btoa||(v=>re.Buffer.from(v,"binary").toString("base64"));function ve(v){const T=[];for(const L of v)T.push(String.fromCharCode(L));return me(T.join(""))}function ye(v){if(v.gt(Number.MAX_SAFE_INTEGER))throw new re.Error("Value is larger than Number.MAX_SAFE_INTEGER");return v.toNumber()}d.default.util.Long!==u.default&&(d.default.util.Long=u.default,d.default.configure())})(livekit_models$1);var RoomServiceClient$1={},livekit_room={};(function(a){var s=commonjsGlobal&&commonjsGlobal.__importDefault||function(M){return M&&M.__esModule?M:{default:M}};Object.defineProperty(a,"__esModule",{value:!0}),a.UpdateRoomMetadataRequest=a.SendDataResponse=a.SendDataRequest=a.UpdateSubscriptionsResponse=a.UpdateSubscriptionsRequest=a.UpdateParticipantRequest=a.ParticipantPermission=a.MuteRoomTrackResponse=a.MuteRoomTrackRequest=a.RemoveParticipantResponse=a.RoomParticipantIdentity=a.ListParticipantsResponse=a.ListParticipantsRequest=a.DeleteRoomResponse=a.DeleteRoomRequest=a.ListRoomsResponse=a.ListRoomsRequest=a.CreateRoomRequest=a.protobufPackage=void 0;const u=s(long),d=s(minimal$2),l=livekit_models$1;a.protobufPackage="livekit";const p={name:"",emptyTimeout:0,maxParticipants:0,nodeId:"",metadata:""};a.CreateRoomRequest={encode(M,q=d.default.Writer.create()){return M.name!==""&&q.uint32(10).string(M.name),M.emptyTimeout!==0&&q.uint32(16).uint32(M.emptyTimeout),M.maxParticipants!==0&&q.uint32(24).uint32(M.maxParticipants),M.nodeId!==""&&q.uint32(34).string(M.nodeId),M.metadata!==""&&q.uint32(42).string(M.metadata),q},decode(M,q){const z=M instanceof d.default.Reader?M:new d.default.Reader(M);let le=q===void 0?z.len:z.pos+q;const re=Object.assign({},p);for(;z.pos<le;){const Q=z.uint32();switch(Q>>>3){case 1:re.name=z.string();break;case 2:re.emptyTimeout=z.uint32();break;case 3:re.maxParticipants=z.uint32();break;case 4:re.nodeId=z.string();break;case 5:re.metadata=z.string();break;default:z.skipType(Q&7);break}}return re},fromJSON(M){const q=Object.assign({},p);return M.name!==void 0&&M.name!==null?q.name=String(M.name):q.name="",M.emptyTimeout!==void 0&&M.emptyTimeout!==null?q.emptyTimeout=Number(M.emptyTimeout):q.emptyTimeout=0,M.maxParticipants!==void 0&&M.maxParticipants!==null?q.maxParticipants=Number(M.maxParticipants):q.maxParticipants=0,M.nodeId!==void 0&&M.nodeId!==null?q.nodeId=String(M.nodeId):q.nodeId="",M.metadata!==void 0&&M.metadata!==null?q.metadata=String(M.metadata):q.metadata="",q},toJSON(M){const q={};return M.name!==void 0&&(q.name=M.name),M.emptyTimeout!==void 0&&(q.emptyTimeout=M.emptyTimeout),M.maxParticipants!==void 0&&(q.maxParticipants=M.maxParticipants),M.nodeId!==void 0&&(q.nodeId=M.nodeId),M.metadata!==void 0&&(q.metadata=M.metadata),q},fromPartial(M){const q=Object.assign({},p);return M.name!==void 0&&M.name!==null?q.name=M.name:q.name="",M.emptyTimeout!==void 0&&M.emptyTimeout!==null?q.emptyTimeout=M.emptyTimeout:q.emptyTimeout=0,M.maxParticipants!==void 0&&M.maxParticipants!==null?q.maxParticipants=M.maxParticipants:q.maxParticipants=0,M.nodeId!==void 0&&M.nodeId!==null?q.nodeId=M.nodeId:q.nodeId="",M.metadata!==void 0&&M.metadata!==null?q.metadata=M.metadata:q.metadata="",q}};const h={names:""};a.ListRoomsRequest={encode(M,q=d.default.Writer.create()){for(const z of M.names)q.uint32(10).string(z);return q},decode(M,q){const z=M instanceof d.default.Reader?M:new d.default.Reader(M);let le=q===void 0?z.len:z.pos+q;const re=Object.assign({},h);for(re.names=[];z.pos<le;){const Q=z.uint32();switch(Q>>>3){case 1:re.names.push(z.string());break;default:z.skipType(Q&7);break}}return re},fromJSON(M){const q=Object.assign({},h);if(q.names=[],M.names!==void 0&&M.names!==null)for(const z of M.names)q.names.push(String(z));return q},toJSON(M){const q={};return M.names?q.names=M.names.map(z=>z):q.names=[],q},fromPartial(M){const q=Object.assign({},h);if(q.names=[],M.names!==void 0&&M.names!==null)for(const z of M.names)q.names.push(z);return q}};const y={};a.ListRoomsResponse={encode(M,q=d.default.Writer.create()){for(const z of M.rooms)l.Room.encode(z,q.uint32(10).fork()).ldelim();return q},decode(M,q){const z=M instanceof d.default.Reader?M:new d.default.Reader(M);let le=q===void 0?z.len:z.pos+q;const re=Object.assign({},y);for(re.rooms=[];z.pos<le;){const Q=z.uint32();switch(Q>>>3){case 1:re.rooms.push(l.Room.decode(z,z.uint32()));break;default:z.skipType(Q&7);break}}return re},fromJSON(M){const q=Object.assign({},y);if(q.rooms=[],M.rooms!==void 0&&M.rooms!==null)for(const z of M.rooms)q.rooms.push(l.Room.fromJSON(z));return q},toJSON(M){const q={};return M.rooms?q.rooms=M.rooms.map(z=>z?l.Room.toJSON(z):void 0):q.rooms=[],q},fromPartial(M){const q=Object.assign({},y);if(q.rooms=[],M.rooms!==void 0&&M.rooms!==null)for(const z of M.rooms)q.rooms.push(l.Room.fromPartial(z));return q}};const _={room:""};a.DeleteRoomRequest={encode(M,q=d.default.Writer.create()){return M.room!==""&&q.uint32(10).string(M.room),q},decode(M,q){const z=M instanceof d.default.Reader?M:new d.default.Reader(M);let le=q===void 0?z.len:z.pos+q;const re=Object.assign({},_);for(;z.pos<le;){const Q=z.uint32();switch(Q>>>3){case 1:re.room=z.string();break;default:z.skipType(Q&7);break}}return re},fromJSON(M){const q=Object.assign({},_);return M.room!==void 0&&M.room!==null?q.room=String(M.room):q.room="",q},toJSON(M){const q={};return M.room!==void 0&&(q.room=M.room),q},fromPartial(M){const q=Object.assign({},_);return M.room!==void 0&&M.room!==null?q.room=M.room:q.room="",q}};const E={};a.DeleteRoomResponse={encode(M,q=d.default.Writer.create()){return q},decode(M,q){const z=M instanceof d.default.Reader?M:new d.default.Reader(M);let le=q===void 0?z.len:z.pos+q;const re=Object.assign({},E);for(;z.pos<le;){const Q=z.uint32();switch(Q>>>3){default:z.skipType(Q&7);break}}return re},fromJSON(M){return Object.assign({},E)},toJSON(M){return{}},fromPartial(M){return Object.assign({},E)}};const I={room:""};a.ListParticipantsRequest={encode(M,q=d.default.Writer.create()){return M.room!==""&&q.uint32(10).string(M.room),q},decode(M,q){const z=M instanceof d.default.Reader?M:new d.default.Reader(M);let le=q===void 0?z.len:z.pos+q;const re=Object.assign({},I);for(;z.pos<le;){const Q=z.uint32();switch(Q>>>3){case 1:re.room=z.string();break;default:z.skipType(Q&7);break}}return re},fromJSON(M){const q=Object.assign({},I);return M.room!==void 0&&M.room!==null?q.room=String(M.room):q.room="",q},toJSON(M){const q={};return M.room!==void 0&&(q.room=M.room),q},fromPartial(M){const q=Object.assign({},I);return M.room!==void 0&&M.room!==null?q.room=M.room:q.room="",q}};const N={};a.ListParticipantsResponse={encode(M,q=d.default.Writer.create()){for(const z of M.participants)l.ParticipantInfo.encode(z,q.uint32(10).fork()).ldelim();return q},decode(M,q){const z=M instanceof d.default.Reader?M:new d.default.Reader(M);let le=q===void 0?z.len:z.pos+q;const re=Object.assign({},N);for(re.participants=[];z.pos<le;){const Q=z.uint32();switch(Q>>>3){case 1:re.participants.push(l.ParticipantInfo.decode(z,z.uint32()));break;default:z.skipType(Q&7);break}}return re},fromJSON(M){const q=Object.assign({},N);if(q.participants=[],M.participants!==void 0&&M.participants!==null)for(const z of M.participants)q.participants.push(l.ParticipantInfo.fromJSON(z));return q},toJSON(M){const q={};return M.participants?q.participants=M.participants.map(z=>z?l.ParticipantInfo.toJSON(z):void 0):q.participants=[],q},fromPartial(M){const q=Object.assign({},N);if(q.participants=[],M.participants!==void 0&&M.participants!==null)for(const z of M.participants)q.participants.push(l.ParticipantInfo.fromPartial(z));return q}};const w={room:"",identity:""};a.RoomParticipantIdentity={encode(M,q=d.default.Writer.create()){return M.room!==""&&q.uint32(10).string(M.room),M.identity!==""&&q.uint32(18).string(M.identity),q},decode(M,q){const z=M instanceof d.default.Reader?M:new d.default.Reader(M);let le=q===void 0?z.len:z.pos+q;const re=Object.assign({},w);for(;z.pos<le;){const Q=z.uint32();switch(Q>>>3){case 1:re.room=z.string();break;case 2:re.identity=z.string();break;default:z.skipType(Q&7);break}}return re},fromJSON(M){const q=Object.assign({},w);return M.room!==void 0&&M.room!==null?q.room=String(M.room):q.room="",M.identity!==void 0&&M.identity!==null?q.identity=String(M.identity):q.identity="",q},toJSON(M){const q={};return M.room!==void 0&&(q.room=M.room),M.identity!==void 0&&(q.identity=M.identity),q},fromPartial(M){const q=Object.assign({},w);return M.room!==void 0&&M.room!==null?q.room=M.room:q.room="",M.identity!==void 0&&M.identity!==null?q.identity=M.identity:q.identity="",q}};const C={};a.RemoveParticipantResponse={encode(M,q=d.default.Writer.create()){return q},decode(M,q){const z=M instanceof d.default.Reader?M:new d.default.Reader(M);let le=q===void 0?z.len:z.pos+q;const re=Object.assign({},C);for(;z.pos<le;){const Q=z.uint32();switch(Q>>>3){default:z.skipType(Q&7);break}}return re},fromJSON(M){return Object.assign({},C)},toJSON(M){return{}},fromPartial(M){return Object.assign({},C)}};const D={room:"",identity:"",trackSid:"",muted:!1};a.MuteRoomTrackRequest={encode(M,q=d.default.Writer.create()){return M.room!==""&&q.uint32(10).string(M.room),M.identity!==""&&q.uint32(18).string(M.identity),M.trackSid!==""&&q.uint32(26).string(M.trackSid),M.muted===!0&&q.uint32(32).bool(M.muted),q},decode(M,q){const z=M instanceof d.default.Reader?M:new d.default.Reader(M);let le=q===void 0?z.len:z.pos+q;const re=Object.assign({},D);for(;z.pos<le;){const Q=z.uint32();switch(Q>>>3){case 1:re.room=z.string();break;case 2:re.identity=z.string();break;case 3:re.trackSid=z.string();break;case 4:re.muted=z.bool();break;default:z.skipType(Q&7);break}}return re},fromJSON(M){const q=Object.assign({},D);return M.room!==void 0&&M.room!==null?q.room=String(M.room):q.room="",M.identity!==void 0&&M.identity!==null?q.identity=String(M.identity):q.identity="",M.trackSid!==void 0&&M.trackSid!==null?q.trackSid=String(M.trackSid):q.trackSid="",M.muted!==void 0&&M.muted!==null?q.muted=Boolean(M.muted):q.muted=!1,q},toJSON(M){const q={};return M.room!==void 0&&(q.room=M.room),M.identity!==void 0&&(q.identity=M.identity),M.trackSid!==void 0&&(q.trackSid=M.trackSid),M.muted!==void 0&&(q.muted=M.muted),q},fromPartial(M){const q=Object.assign({},D);return M.room!==void 0&&M.room!==null?q.room=M.room:q.room="",M.identity!==void 0&&M.identity!==null?q.identity=M.identity:q.identity="",M.trackSid!==void 0&&M.trackSid!==null?q.trackSid=M.trackSid:q.trackSid="",M.muted!==void 0&&M.muted!==null?q.muted=M.muted:q.muted=!1,q}};const V={};a.MuteRoomTrackResponse={encode(M,q=d.default.Writer.create()){return M.track!==void 0&&l.TrackInfo.encode(M.track,q.uint32(10).fork()).ldelim(),q},decode(M,q){const z=M instanceof d.default.Reader?M:new d.default.Reader(M);let le=q===void 0?z.len:z.pos+q;const re=Object.assign({},V);for(;z.pos<le;){const Q=z.uint32();switch(Q>>>3){case 1:re.track=l.TrackInfo.decode(z,z.uint32());break;default:z.skipType(Q&7);break}}return re},fromJSON(M){const q=Object.assign({},V);return M.track!==void 0&&M.track!==null?q.track=l.TrackInfo.fromJSON(M.track):q.track=void 0,q},toJSON(M){const q={};return M.track!==void 0&&(q.track=M.track?l.TrackInfo.toJSON(M.track):void 0),q},fromPartial(M){const q=Object.assign({},V);return M.track!==void 0&&M.track!==null?q.track=l.TrackInfo.fromPartial(M.track):q.track=void 0,q}};const J={canSubscribe:!1,canPublish:!1,canPublishData:!1};a.ParticipantPermission={encode(M,q=d.default.Writer.create()){return M.canSubscribe===!0&&q.uint32(8).bool(M.canSubscribe),M.canPublish===!0&&q.uint32(16).bool(M.canPublish),M.canPublishData===!0&&q.uint32(24).bool(M.canPublishData),q},decode(M,q){const z=M instanceof d.default.Reader?M:new d.default.Reader(M);let le=q===void 0?z.len:z.pos+q;const re=Object.assign({},J);for(;z.pos<le;){const Q=z.uint32();switch(Q>>>3){case 1:re.canSubscribe=z.bool();break;case 2:re.canPublish=z.bool();break;case 3:re.canPublishData=z.bool();break;default:z.skipType(Q&7);break}}return re},fromJSON(M){const q=Object.assign({},J);return M.canSubscribe!==void 0&&M.canSubscribe!==null?q.canSubscribe=Boolean(M.canSubscribe):q.canSubscribe=!1,M.canPublish!==void 0&&M.canPublish!==null?q.canPublish=Boolean(M.canPublish):q.canPublish=!1,M.canPublishData!==void 0&&M.canPublishData!==null?q.canPublishData=Boolean(M.canPublishData):q.canPublishData=!1,q},toJSON(M){const q={};return M.canSubscribe!==void 0&&(q.canSubscribe=M.canSubscribe),M.canPublish!==void 0&&(q.canPublish=M.canPublish),M.canPublishData!==void 0&&(q.canPublishData=M.canPublishData),q},fromPartial(M){const q=Object.assign({},J);return M.canSubscribe!==void 0&&M.canSubscribe!==null?q.canSubscribe=M.canSubscribe:q.canSubscribe=!1,M.canPublish!==void 0&&M.canPublish!==null?q.canPublish=M.canPublish:q.canPublish=!1,M.canPublishData!==void 0&&M.canPublishData!==null?q.canPublishData=M.canPublishData:q.canPublishData=!1,q}};const W={room:"",identity:"",metadata:""};a.UpdateParticipantRequest={encode(M,q=d.default.Writer.create()){return M.room!==""&&q.uint32(10).string(M.room),M.identity!==""&&q.uint32(18).string(M.identity),M.metadata!==""&&q.uint32(26).string(M.metadata),M.permission!==void 0&&a.ParticipantPermission.encode(M.permission,q.uint32(34).fork()).ldelim(),q},decode(M,q){const z=M instanceof d.default.Reader?M:new d.default.Reader(M);let le=q===void 0?z.len:z.pos+q;const re=Object.assign({},W);for(;z.pos<le;){const Q=z.uint32();switch(Q>>>3){case 1:re.room=z.string();break;case 2:re.identity=z.string();break;case 3:re.metadata=z.string();break;case 4:re.permission=a.ParticipantPermission.decode(z,z.uint32());break;default:z.skipType(Q&7);break}}return re},fromJSON(M){const q=Object.assign({},W);return M.room!==void 0&&M.room!==null?q.room=String(M.room):q.room="",M.identity!==void 0&&M.identity!==null?q.identity=String(M.identity):q.identity="",M.metadata!==void 0&&M.metadata!==null?q.metadata=String(M.metadata):q.metadata="",M.permission!==void 0&&M.permission!==null?q.permission=a.ParticipantPermission.fromJSON(M.permission):q.permission=void 0,q},toJSON(M){const q={};return M.room!==void 0&&(q.room=M.room),M.identity!==void 0&&(q.identity=M.identity),M.metadata!==void 0&&(q.metadata=M.metadata),M.permission!==void 0&&(q.permission=M.permission?a.ParticipantPermission.toJSON(M.permission):void 0),q},fromPartial(M){const q=Object.assign({},W);return M.room!==void 0&&M.room!==null?q.room=M.room:q.room="",M.identity!==void 0&&M.identity!==null?q.identity=M.identity:q.identity="",M.metadata!==void 0&&M.metadata!==null?q.metadata=M.metadata:q.metadata="",M.permission!==void 0&&M.permission!==null?q.permission=a.ParticipantPermission.fromPartial(M.permission):q.permission=void 0,q}};const g={room:"",identity:"",trackSids:"",subscribe:!1};a.UpdateSubscriptionsRequest={encode(M,q=d.default.Writer.create()){M.room!==""&&q.uint32(10).string(M.room),M.identity!==""&&q.uint32(18).string(M.identity);for(const z of M.trackSids)q.uint32(26).string(z);M.subscribe===!0&&q.uint32(32).bool(M.subscribe);for(const z of M.participantTracks)l.ParticipantTracks.encode(z,q.uint32(42).fork()).ldelim();return q},decode(M,q){const z=M instanceof d.default.Reader?M:new d.default.Reader(M);let le=q===void 0?z.len:z.pos+q;const re=Object.assign({},g);for(re.trackSids=[],re.participantTracks=[];z.pos<le;){const Q=z.uint32();switch(Q>>>3){case 1:re.room=z.string();break;case 2:re.identity=z.string();break;case 3:re.trackSids.push(z.string());break;case 4:re.subscribe=z.bool();break;case 5:re.participantTracks.push(l.ParticipantTracks.decode(z,z.uint32()));break;default:z.skipType(Q&7);break}}return re},fromJSON(M){const q=Object.assign({},g);if(q.trackSids=[],q.participantTracks=[],M.room!==void 0&&M.room!==null?q.room=String(M.room):q.room="",M.identity!==void 0&&M.identity!==null?q.identity=String(M.identity):q.identity="",M.trackSids!==void 0&&M.trackSids!==null)for(const z of M.trackSids)q.trackSids.push(String(z));if(M.subscribe!==void 0&&M.subscribe!==null?q.subscribe=Boolean(M.subscribe):q.subscribe=!1,M.participantTracks!==void 0&&M.participantTracks!==null)for(const z of M.participantTracks)q.participantTracks.push(l.ParticipantTracks.fromJSON(z));return q},toJSON(M){const q={};return M.room!==void 0&&(q.room=M.room),M.identity!==void 0&&(q.identity=M.identity),M.trackSids?q.trackSids=M.trackSids.map(z=>z):q.trackSids=[],M.subscribe!==void 0&&(q.subscribe=M.subscribe),M.participantTracks?q.participantTracks=M.participantTracks.map(z=>z?l.ParticipantTracks.toJSON(z):void 0):q.participantTracks=[],q},fromPartial(M){const q=Object.assign({},g);if(q.trackSids=[],q.participantTracks=[],M.room!==void 0&&M.room!==null?q.room=M.room:q.room="",M.identity!==void 0&&M.identity!==null?q.identity=M.identity:q.identity="",M.trackSids!==void 0&&M.trackSids!==null)for(const z of M.trackSids)q.trackSids.push(z);if(M.subscribe!==void 0&&M.subscribe!==null?q.subscribe=M.subscribe:q.subscribe=!1,M.participantTracks!==void 0&&M.participantTracks!==null)for(const z of M.participantTracks)q.participantTracks.push(l.ParticipantTracks.fromPartial(z));return q}};const O={};a.UpdateSubscriptionsResponse={encode(M,q=d.default.Writer.create()){return q},decode(M,q){const z=M instanceof d.default.Reader?M:new d.default.Reader(M);let le=q===void 0?z.len:z.pos+q;const re=Object.assign({},O);for(;z.pos<le;){const Q=z.uint32();switch(Q>>>3){default:z.skipType(Q&7);break}}return re},fromJSON(M){return Object.assign({},O)},toJSON(M){return{}},fromPartial(M){return Object.assign({},O)}};const $={room:"",kind:0,destinationSids:""};a.SendDataRequest={encode(M,q=d.default.Writer.create()){M.room!==""&&q.uint32(10).string(M.room),M.data.length!==0&&q.uint32(18).bytes(M.data),M.kind!==0&&q.uint32(24).int32(M.kind);for(const z of M.destinationSids)q.uint32(34).string(z);return q},decode(M,q){const z=M instanceof d.default.Reader?M:new d.default.Reader(M);let le=q===void 0?z.len:z.pos+q;const re=Object.assign({},$);for(re.destinationSids=[],re.data=new Uint8Array;z.pos<le;){const Q=z.uint32();switch(Q>>>3){case 1:re.room=z.string();break;case 2:re.data=z.bytes();break;case 3:re.kind=z.int32();break;case 4:re.destinationSids.push(z.string());break;default:z.skipType(Q&7);break}}return re},fromJSON(M){const q=Object.assign({},$);if(q.destinationSids=[],q.data=new Uint8Array,M.room!==void 0&&M.room!==null?q.room=String(M.room):q.room="",M.data!==void 0&&M.data!==null&&(q.data=F(M.data)),M.kind!==void 0&&M.kind!==null?q.kind=l.dataPacket_KindFromJSON(M.kind):q.kind=0,M.destinationSids!==void 0&&M.destinationSids!==null)for(const z of M.destinationSids)q.destinationSids.push(String(z));return q},toJSON(M){const q={};return M.room!==void 0&&(q.room=M.room),M.data!==void 0&&(q.data=K(M.data!==void 0?M.data:new Uint8Array)),M.kind!==void 0&&(q.kind=l.dataPacket_KindToJSON(M.kind)),M.destinationSids?q.destinationSids=M.destinationSids.map(z=>z):q.destinationSids=[],q},fromPartial(M){const q=Object.assign({},$);if(q.destinationSids=[],M.room!==void 0&&M.room!==null?q.room=M.room:q.room="",M.data!==void 0&&M.data!==null?q.data=M.data:q.data=new Uint8Array,M.kind!==void 0&&M.kind!==null?q.kind=M.kind:q.kind=0,M.destinationSids!==void 0&&M.destinationSids!==null)for(const z of M.destinationSids)q.destinationSids.push(z);return q}};const x={};a.SendDataResponse={encode(M,q=d.default.Writer.create()){return q},decode(M,q){const z=M instanceof d.default.Reader?M:new d.default.Reader(M);let le=q===void 0?z.len:z.pos+q;const re=Object.assign({},x);for(;z.pos<le;){const Q=z.uint32();switch(Q>>>3){default:z.skipType(Q&7);break}}return re},fromJSON(M){return Object.assign({},x)},toJSON(M){return{}},fromPartial(M){return Object.assign({},x)}};const Y={room:"",metadata:""};a.UpdateRoomMetadataRequest={encode(M,q=d.default.Writer.create()){return M.room!==""&&q.uint32(10).string(M.room),M.metadata!==""&&q.uint32(18).string(M.metadata),q},decode(M,q){const z=M instanceof d.default.Reader?M:new d.default.Reader(M);let le=q===void 0?z.len:z.pos+q;const re=Object.assign({},Y);for(;z.pos<le;){const Q=z.uint32();switch(Q>>>3){case 1:re.room=z.string();break;case 2:re.metadata=z.string();break;default:z.skipType(Q&7);break}}return re},fromJSON(M){const q=Object.assign({},Y);return M.room!==void 0&&M.room!==null?q.room=String(M.room):q.room="",M.metadata!==void 0&&M.metadata!==null?q.metadata=String(M.metadata):q.metadata="",q},toJSON(M){const q={};return M.room!==void 0&&(q.room=M.room),M.metadata!==void 0&&(q.metadata=M.metadata),q},fromPartial(M){const q=Object.assign({},Y);return M.room!==void 0&&M.room!==null?q.room=M.room:q.room="",M.metadata!==void 0&&M.metadata!==null?q.metadata=M.metadata:q.metadata="",q}};var te=(()=>{if(typeof te!="undefined")return te;if(typeof self!="undefined")return self;if(typeof window!="undefined")return window;if(typeof commonjsGlobal!="undefined")return commonjsGlobal;throw"Unable to locate global object"})();const ne=te.atob||(M=>te.Buffer.from(M,"base64").toString("binary"));function F(M){const q=ne(M),z=new Uint8Array(q.length);for(let le=0;le<q.length;++le)z[le]=q.charCodeAt(le);return z}const j=te.btoa||(M=>te.Buffer.from(M,"binary").toString("base64"));function K(M){const q=[];for(const z of M)q.push(String.fromCharCode(z));return j(q.join(""))}d.default.util.Long!==u.default&&(d.default.util.Long=u.default,d.default.configure())})(livekit_room);var TwirpRPC={},axios$2={exports:{}},bind$2=function a(s,u){return function(){for(var l=new Array(arguments.length),p=0;p<l.length;p++)l[p]=arguments[p];return s.apply(u,l)}},bind$1=bind$2,toString=Object.prototype.toString;function isArray$1(a){return toString.call(a)==="[object Array]"}function isUndefined(a){return typeof a=="undefined"}function isBuffer(a){return a!==null&&!isUndefined(a)&&a.constructor!==null&&!isUndefined(a.constructor)&&typeof a.constructor.isBuffer=="function"&&a.constructor.isBuffer(a)}function isArrayBuffer(a){return toString.call(a)==="[object ArrayBuffer]"}function isFormData(a){return typeof FormData!="undefined"&&a instanceof FormData}function isArrayBufferView(a){var s;return typeof ArrayBuffer!="undefined"&&ArrayBuffer.isView?s=ArrayBuffer.isView(a):s=a&&a.buffer&&a.buffer instanceof ArrayBuffer,s}function isString(a){return typeof a=="string"}function isNumber(a){return typeof a=="number"}function isObject$3(a){return a!==null&&typeof a=="object"}function isPlainObject(a){if(toString.call(a)!=="[object Object]")return!1;var s=Object.getPrototypeOf(a);return s===null||s===Object.prototype}function isDate(a){return toString.call(a)==="[object Date]"}function isFile(a){return toString.call(a)==="[object File]"}function isBlob(a){return toString.call(a)==="[object Blob]"}function isFunction(a){return toString.call(a)==="[object Function]"}function isStream(a){return isObject$3(a)&&isFunction(a.pipe)}function isURLSearchParams(a){return typeof URLSearchParams!="undefined"&&a instanceof URLSearchParams}function trim$1(a){return a.trim?a.trim():a.replace(/^\s+|\s+$/g,"")}function isStandardBrowserEnv(){return typeof navigator!="undefined"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window!="undefined"&&typeof document!="undefined"}function forEach(a,s){if(!(a===null||typeof a=="undefined"))if(typeof a!="object"&&(a=[a]),isArray$1(a))for(var u=0,d=a.length;u<d;u++)s.call(null,a[u],u,a);else for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&s.call(null,a[l],l,a)}function merge(){var a={};function s(l,p){isPlainObject(a[p])&&isPlainObject(l)?a[p]=merge(a[p],l):isPlainObject(l)?a[p]=merge({},l):isArray$1(l)?a[p]=l.slice():a[p]=l}for(var u=0,d=arguments.length;u<d;u++)forEach(arguments[u],s);return a}function extend(a,s,u){return forEach(s,function(l,p){u&&typeof l=="function"?a[p]=bind$1(l,u):a[p]=l}),a}function stripBOM(a){return a.charCodeAt(0)===65279&&(a=a.slice(1)),a}var utils$f={isArray:isArray$1,isArrayBuffer,isBuffer,isFormData,isArrayBufferView,isString,isNumber,isObject:isObject$3,isPlainObject,isUndefined,isDate,isFile,isBlob,isFunction,isStream,isURLSearchParams,isStandardBrowserEnv,forEach,merge,extend,trim:trim$1,stripBOM},utils$e=utils$f;function encode(a){return encodeURIComponent(a).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var buildURL$2=function a(s,u,d){if(!u)return s;var l;if(d)l=d(u);else if(utils$e.isURLSearchParams(u))l=u.toString();else{var p=[];utils$e.forEach(u,function(_,E){_===null||typeof _=="undefined"||(utils$e.isArray(_)?E=E+"[]":_=[_],utils$e.forEach(_,function(N){utils$e.isDate(N)?N=N.toISOString():utils$e.isObject(N)&&(N=JSON.stringify(N)),p.push(encode(E)+"="+encode(N))}))}),l=p.join("&")}if(l){var h=s.indexOf("#");h!==-1&&(s=s.slice(0,h)),s+=(s.indexOf("?")===-1?"?":"&")+l}return s},utils$d=utils$f;function InterceptorManager$1(){this.handlers=[]}InterceptorManager$1.prototype.use=function a(s,u,d){return this.handlers.push({fulfilled:s,rejected:u,synchronous:d?d.synchronous:!1,runWhen:d?d.runWhen:null}),this.handlers.length-1},InterceptorManager$1.prototype.eject=function a(s){this.handlers[s]&&(this.handlers[s]=null)},InterceptorManager$1.prototype.forEach=function a(s){utils$d.forEach(this.handlers,function(d){d!==null&&s(d)})};var InterceptorManager_1=InterceptorManager$1,utils$c=utils$f,normalizeHeaderName$1=function a(s,u){utils$c.forEach(s,function(l,p){p!==u&&p.toUpperCase()===u.toUpperCase()&&(s[u]=l,delete s[p])})},enhanceError$2=function a(s,u,d,l,p){return s.config=u,d&&(s.code=d),s.request=l,s.response=p,s.isAxiosError=!0,s.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},s},enhanceError$1=enhanceError$2,createError$2=function a(s,u,d,l,p){var h=new Error(s);return enhanceError$1(h,u,d,l,p)},createError$1=createError$2,settle$1=function a(s,u,d){var l=d.config.validateStatus;!d.status||!l||l(d.status)?s(d):u(createError$1("Request failed with status code "+d.status,d.config,null,d.request,d))},utils$b=utils$f,cookies$1=utils$b.isStandardBrowserEnv()?function a(){return{write:function(u,d,l,p,h,y){var _=[];_.push(u+"="+encodeURIComponent(d)),utils$b.isNumber(l)&&_.push("expires="+new Date(l).toGMTString()),utils$b.isString(p)&&_.push("path="+p),utils$b.isString(h)&&_.push("domain="+h),y===!0&&_.push("secure"),document.cookie=_.join("; ")},read:function(u){var d=document.cookie.match(new RegExp("(^|;\\s*)("+u+")=([^;]*)"));return d?decodeURIComponent(d[3]):null},remove:function(u){this.write(u,"",Date.now()-864e5)}}}():function a(){return{write:function(){},read:function(){return null},remove:function(){}}}(),isAbsoluteURL$1=function a(s){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(s)},combineURLs$1=function a(s,u){return u?s.replace(/\/+$/,"")+"/"+u.replace(/^\/+/,""):s},isAbsoluteURL=isAbsoluteURL$1,combineURLs=combineURLs$1,buildFullPath$1=function a(s,u){return s&&!isAbsoluteURL(u)?combineURLs(s,u):u},utils$a=utils$f,ignoreDuplicateOf=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"],parseHeaders$1=function a(s){var u={},d,l,p;return s&&utils$a.forEach(s.split(`
`),function(y){if(p=y.indexOf(":"),d=utils$a.trim(y.substr(0,p)).toLowerCase(),l=utils$a.trim(y.substr(p+1)),d){if(u[d]&&ignoreDuplicateOf.indexOf(d)>=0)return;d==="set-cookie"?u[d]=(u[d]?u[d]:[]).concat([l]):u[d]=u[d]?u[d]+", "+l:l}}),u},utils$9=utils$f,isURLSameOrigin$1=utils$9.isStandardBrowserEnv()?function a(){var s=/(msie|trident)/i.test(navigator.userAgent),u=document.createElement("a"),d;function l(p){var h=p;return s&&(u.setAttribute("href",h),h=u.href),u.setAttribute("href",h),{href:u.href,protocol:u.protocol?u.protocol.replace(/:$/,""):"",host:u.host,search:u.search?u.search.replace(/^\?/,""):"",hash:u.hash?u.hash.replace(/^#/,""):"",hostname:u.hostname,port:u.port,pathname:u.pathname.charAt(0)==="/"?u.pathname:"/"+u.pathname}}return d=l(window.location.href),function(h){var y=utils$9.isString(h)?l(h):h;return y.protocol===d.protocol&&y.host===d.host}}():function a(){return function(){return!0}}(),utils$8=utils$f,settle=settle$1,cookies=cookies$1,buildURL$1=buildURL$2,buildFullPath=buildFullPath$1,parseHeaders=parseHeaders$1,isURLSameOrigin=isURLSameOrigin$1,createError=createError$2,xhr=function a(s){return new Promise(function(d,l){var p=s.data,h=s.headers,y=s.responseType;utils$8.isFormData(p)&&delete h["Content-Type"];var _=new XMLHttpRequest;if(s.auth){var E=s.auth.username||"",I=s.auth.password?unescape(encodeURIComponent(s.auth.password)):"";h.Authorization="Basic "+btoa(E+":"+I)}var N=buildFullPath(s.baseURL,s.url);_.open(s.method.toUpperCase(),buildURL$1(N,s.params,s.paramsSerializer),!0),_.timeout=s.timeout;function w(){if(!!_){var D="getAllResponseHeaders"in _?parseHeaders(_.getAllResponseHeaders()):null,V=!y||y==="text"||y==="json"?_.responseText:_.response,J={data:V,status:_.status,statusText:_.statusText,headers:D,config:s,request:_};settle(d,l,J),_=null}}if("onloadend"in _?_.onloadend=w:_.onreadystatechange=function(){!_||_.readyState!==4||_.status===0&&!(_.responseURL&&_.responseURL.indexOf("file:")===0)||setTimeout(w)},_.onabort=function(){!_||(l(createError("Request aborted",s,"ECONNABORTED",_)),_=null)},_.onerror=function(){l(createError("Network Error",s,null,_)),_=null},_.ontimeout=function(){var V="timeout of "+s.timeout+"ms exceeded";s.timeoutErrorMessage&&(V=s.timeoutErrorMessage),l(createError(V,s,s.transitional&&s.transitional.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",_)),_=null},utils$8.isStandardBrowserEnv()){var C=(s.withCredentials||isURLSameOrigin(N))&&s.xsrfCookieName?cookies.read(s.xsrfCookieName):void 0;C&&(h[s.xsrfHeaderName]=C)}"setRequestHeader"in _&&utils$8.forEach(h,function(V,J){typeof p=="undefined"&&J.toLowerCase()==="content-type"?delete h[J]:_.setRequestHeader(J,V)}),utils$8.isUndefined(s.withCredentials)||(_.withCredentials=!!s.withCredentials),y&&y!=="json"&&(_.responseType=s.responseType),typeof s.onDownloadProgress=="function"&&_.addEventListener("progress",s.onDownloadProgress),typeof s.onUploadProgress=="function"&&_.upload&&_.upload.addEventListener("progress",s.onUploadProgress),s.cancelToken&&s.cancelToken.promise.then(function(V){!_||(_.abort(),l(V),_=null)}),p||(p=null),_.send(p)})},utils$7=utils$f,normalizeHeaderName=normalizeHeaderName$1,enhanceError=enhanceError$2,DEFAULT_CONTENT_TYPE={"Content-Type":"application/x-www-form-urlencoded"};function setContentTypeIfUnset(a,s){!utils$7.isUndefined(a)&&utils$7.isUndefined(a["Content-Type"])&&(a["Content-Type"]=s)}function getDefaultAdapter(){var a;return(typeof XMLHttpRequest!="undefined"||typeof process!="undefined"&&Object.prototype.toString.call(process)==="[object process]")&&(a=xhr),a}function stringifySafely(a,s,u){if(utils$7.isString(a))try{return(s||JSON.parse)(a),utils$7.trim(a)}catch(d){if(d.name!=="SyntaxError")throw d}return(u||JSON.stringify)(a)}var defaults$4={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:getDefaultAdapter(),transformRequest:[function a(s,u){return normalizeHeaderName(u,"Accept"),normalizeHeaderName(u,"Content-Type"),utils$7.isFormData(s)||utils$7.isArrayBuffer(s)||utils$7.isBuffer(s)||utils$7.isStream(s)||utils$7.isFile(s)||utils$7.isBlob(s)?s:utils$7.isArrayBufferView(s)?s.buffer:utils$7.isURLSearchParams(s)?(setContentTypeIfUnset(u,"application/x-www-form-urlencoded;charset=utf-8"),s.toString()):utils$7.isObject(s)||u&&u["Content-Type"]==="application/json"?(setContentTypeIfUnset(u,"application/json"),stringifySafely(s)):s}],transformResponse:[function a(s){var u=this.transitional,d=u&&u.silentJSONParsing,l=u&&u.forcedJSONParsing,p=!d&&this.responseType==="json";if(p||l&&utils$7.isString(s)&&s.length)try{return JSON.parse(s)}catch(h){if(p)throw h.name==="SyntaxError"?enhanceError(h,this,"E_JSON_PARSE"):h}return s}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function a(s){return s>=200&&s<300}};defaults$4.headers={common:{Accept:"application/json, text/plain, */*"}},utils$7.forEach(["delete","get","head"],function a(s){defaults$4.headers[s]={}}),utils$7.forEach(["post","put","patch"],function a(s){defaults$4.headers[s]=utils$7.merge(DEFAULT_CONTENT_TYPE)});var defaults_1$1=defaults$4,utils$6=utils$f,defaults$3=defaults_1$1,transformData$1=function a(s,u,d){var l=this||defaults$3;return utils$6.forEach(d,function(h){s=h.call(l,s,u)}),s},isCancel$1=function a(s){return!!(s&&s.__CANCEL__)},utils$5=utils$f,transformData=transformData$1,isCancel=isCancel$1,defaults$2=defaults_1$1;function throwIfCancellationRequested(a){a.cancelToken&&a.cancelToken.throwIfRequested()}var dispatchRequest$1=function a(s){throwIfCancellationRequested(s),s.headers=s.headers||{},s.data=transformData.call(s,s.data,s.headers,s.transformRequest),s.headers=utils$5.merge(s.headers.common||{},s.headers[s.method]||{},s.headers),utils$5.forEach(["delete","get","head","post","put","patch","common"],function(l){delete s.headers[l]});var u=s.adapter||defaults$2.adapter;return u(s).then(function(l){return throwIfCancellationRequested(s),l.data=transformData.call(s,l.data,l.headers,s.transformResponse),l},function(l){return isCancel(l)||(throwIfCancellationRequested(s),l&&l.response&&(l.response.data=transformData.call(s,l.response.data,l.response.headers,s.transformResponse))),Promise.reject(l)})},utils$4=utils$f,mergeConfig$2=function a(s,u){u=u||{};var d={},l=["url","method","data"],p=["headers","auth","proxy","params"],h=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],y=["validateStatus"];function _(w,C){return utils$4.isPlainObject(w)&&utils$4.isPlainObject(C)?utils$4.merge(w,C):utils$4.isPlainObject(C)?utils$4.merge({},C):utils$4.isArray(C)?C.slice():C}function E(w){utils$4.isUndefined(u[w])?utils$4.isUndefined(s[w])||(d[w]=_(void 0,s[w])):d[w]=_(s[w],u[w])}utils$4.forEach(l,function(C){utils$4.isUndefined(u[C])||(d[C]=_(void 0,u[C]))}),utils$4.forEach(p,E),utils$4.forEach(h,function(C){utils$4.isUndefined(u[C])?utils$4.isUndefined(s[C])||(d[C]=_(void 0,s[C])):d[C]=_(void 0,u[C])}),utils$4.forEach(y,function(C){C in u?d[C]=_(s[C],u[C]):C in s&&(d[C]=_(void 0,s[C]))});var I=l.concat(p).concat(h).concat(y),N=Object.keys(s).concat(Object.keys(u)).filter(function(C){return I.indexOf(C)===-1});return utils$4.forEach(N,E),d};const name="axios",version$1="0.21.4",description="Promise based HTTP client for the browser and node.js",main="index.js",scripts={test:"grunt test",start:"node ./sandbox/server.js",build:"NODE_ENV=production grunt build",preversion:"npm test",version:"npm run build && grunt version && git add -A dist && git add CHANGELOG.md bower.json package.json",postversion:"git push && git push --tags",examples:"node ./examples/server.js",coveralls:"cat coverage/lcov.info | ./node_modules/coveralls/bin/coveralls.js",fix:"eslint --fix lib/**/*.js"},repository={type:"git",url:"https://github.com/axios/axios.git"},keywords=["xhr","http","ajax","promise","node"],author="Matt Zabriskie",license="MIT",bugs={url:"https://github.com/axios/axios/issues"},homepage="https://axios-http.com",devDependencies={coveralls:"^3.0.0","es6-promise":"^4.2.4",grunt:"^1.3.0","grunt-banner":"^0.6.0","grunt-cli":"^1.2.0","grunt-contrib-clean":"^1.1.0","grunt-contrib-watch":"^1.0.0","grunt-eslint":"^23.0.0","grunt-karma":"^4.0.0","grunt-mocha-test":"^0.13.3","grunt-ts":"^6.0.0-beta.19","grunt-webpack":"^4.0.2","istanbul-instrumenter-loader":"^1.0.0","jasmine-core":"^2.4.1",karma:"^6.3.2","karma-chrome-launcher":"^3.1.0","karma-firefox-launcher":"^2.1.0","karma-jasmine":"^1.1.1","karma-jasmine-ajax":"^0.1.13","karma-safari-launcher":"^1.0.0","karma-sauce-launcher":"^4.3.6","karma-sinon":"^1.0.5","karma-sourcemap-loader":"^0.3.8","karma-webpack":"^4.0.2","load-grunt-tasks":"^3.5.2",minimist:"^1.2.0",mocha:"^8.2.1",sinon:"^4.5.0","terser-webpack-plugin":"^4.2.3",typescript:"^4.0.5","url-search-params":"^0.10.0",webpack:"^4.44.2","webpack-dev-server":"^3.11.0"},browser={"./lib/adapters/http.js":"./lib/adapters/xhr.js"},jsdelivr="dist/axios.min.js",unpkg="dist/axios.min.js",typings="./index.d.ts",dependencies={"follow-redirects":"^1.14.0"},bundlesize=[{path:"./dist/axios.min.js",threshold:"5kB"}];var require$$0$1={name,version:version$1,description,main,scripts,repository,keywords,author,license,bugs,homepage,devDependencies,browser,jsdelivr,unpkg,typings,dependencies,bundlesize},pkg=require$$0$1,validators$1={};["object","boolean","number","function","string","symbol"].forEach(function(a,s){validators$1[a]=function(d){return typeof d===a||"a"+(s<1?"n ":" ")+a}});var deprecatedWarnings={},currentVerArr=pkg.version.split(".");function isOlderVersion(a,s){for(var u=s?s.split("."):currentVerArr,d=a.split("."),l=0;l<3;l++){if(u[l]>d[l])return!0;if(u[l]<d[l])return!1}return!1}validators$1.transitional=function a(s,u,d){var l=u&&isOlderVersion(u);function p(h,y){return"[Axios v"+pkg.version+"] Transitional option '"+h+"'"+y+(d?". "+d:"")}return function(h,y,_){if(s===!1)throw new Error(p(y," has been removed in "+u));return l&&!deprecatedWarnings[y]&&(deprecatedWarnings[y]=!0,console.warn(p(y," has been deprecated since v"+u+" and will be removed in the near future"))),s?s(h,y,_):!0}};function assertOptions(a,s,u){if(typeof a!="object")throw new TypeError("options must be an object");for(var d=Object.keys(a),l=d.length;l-- >0;){var p=d[l],h=s[p];if(h){var y=a[p],_=y===void 0||h(y,p,a);if(_!==!0)throw new TypeError("option "+p+" must be "+_);continue}if(u!==!0)throw Error("Unknown option "+p)}}var validator$1={isOlderVersion,assertOptions,validators:validators$1},utils$3=utils$f,buildURL=buildURL$2,InterceptorManager=InterceptorManager_1,dispatchRequest=dispatchRequest$1,mergeConfig$1=mergeConfig$2,validator=validator$1,validators=validator.validators;function Axios$1(a){this.defaults=a,this.interceptors={request:new InterceptorManager,response:new InterceptorManager}}Axios$1.prototype.request=function a(s){typeof s=="string"?(s=arguments[1]||{},s.url=arguments[0]):s=s||{},s=mergeConfig$1(this.defaults,s),s.method?s.method=s.method.toLowerCase():this.defaults.method?s.method=this.defaults.method.toLowerCase():s.method="get";var u=s.transitional;u!==void 0&&validator.assertOptions(u,{silentJSONParsing:validators.transitional(validators.boolean,"1.0.0"),forcedJSONParsing:validators.transitional(validators.boolean,"1.0.0"),clarifyTimeoutError:validators.transitional(validators.boolean,"1.0.0")},!1);var d=[],l=!0;this.interceptors.request.forEach(function(w){typeof w.runWhen=="function"&&w.runWhen(s)===!1||(l=l&&w.synchronous,d.unshift(w.fulfilled,w.rejected))});var p=[];this.interceptors.response.forEach(function(w){p.push(w.fulfilled,w.rejected)});var h;if(!l){var y=[dispatchRequest,void 0];for(Array.prototype.unshift.apply(y,d),y=y.concat(p),h=Promise.resolve(s);y.length;)h=h.then(y.shift(),y.shift());return h}for(var _=s;d.length;){var E=d.shift(),I=d.shift();try{_=E(_)}catch(N){I(N);break}}try{h=dispatchRequest(_)}catch(N){return Promise.reject(N)}for(;p.length;)h=h.then(p.shift(),p.shift());return h},Axios$1.prototype.getUri=function a(s){return s=mergeConfig$1(this.defaults,s),buildURL(s.url,s.params,s.paramsSerializer).replace(/^\?/,"")},utils$3.forEach(["delete","get","head","options"],function a(s){Axios$1.prototype[s]=function(u,d){return this.request(mergeConfig$1(d||{},{method:s,url:u,data:(d||{}).data}))}}),utils$3.forEach(["post","put","patch"],function a(s){Axios$1.prototype[s]=function(u,d,l){return this.request(mergeConfig$1(l||{},{method:s,url:u,data:d}))}});var Axios_1=Axios$1;function Cancel$1(a){this.message=a}Cancel$1.prototype.toString=function a(){return"Cancel"+(this.message?": "+this.message:"")},Cancel$1.prototype.__CANCEL__=!0;var Cancel_1=Cancel$1,Cancel=Cancel_1;function CancelToken(a){if(typeof a!="function")throw new TypeError("executor must be a function.");var s;this.promise=new Promise(function(l){s=l});var u=this;a(function(l){u.reason||(u.reason=new Cancel(l),s(u.reason))})}CancelToken.prototype.throwIfRequested=function a(){if(this.reason)throw this.reason},CancelToken.source=function a(){var s,u=new CancelToken(function(l){s=l});return{token:u,cancel:s}};var CancelToken_1=CancelToken,spread=function a(s){return function(d){return s.apply(null,d)}},isAxiosError=function a(s){return typeof s=="object"&&s.isAxiosError===!0},utils$2=utils$f,bind=bind$2,Axios=Axios_1,mergeConfig=mergeConfig$2,defaults$1=defaults_1$1;function createInstance(a){var s=new Axios(a),u=bind(Axios.prototype.request,s);return utils$2.extend(u,Axios.prototype,s),utils$2.extend(u,s),u}var axios$1=createInstance(defaults$1);axios$1.Axios=Axios,axios$1.create=function a(s){return createInstance(mergeConfig(axios$1.defaults,s))},axios$1.Cancel=Cancel_1,axios$1.CancelToken=CancelToken_1,axios$1.isCancel=isCancel$1,axios$1.all=function a(s){return Promise.all(s)},axios$1.spread=spread,axios$1.isAxiosError=isAxiosError,axios$2.exports=axios$1,axios$2.exports.default=axios$1;var axios=axios$2.exports,mapObj$1={exports:{}};const isObject$2=a=>typeof a=="object"&&a!==null,mapObjectSkip=Symbol("skip"),isObjectCustom=a=>isObject$2(a)&&!(a instanceof RegExp)&&!(a instanceof Error)&&!(a instanceof Date),mapObject=(a,s,u,d=new WeakMap)=>{if(u=pe({deep:!1,target:{}},u),d.has(a))return d.get(a);d.set(a,u.target);const{target:l}=u;delete u.target;const p=h=>h.map(y=>isObjectCustom(y)?mapObject(y,s,u,d):y);if(Array.isArray(a))return p(a);for(const[h,y]of Object.entries(a)){const _=s(h,y,a);if(_===mapObjectSkip)continue;let[E,I,{shouldRecurse:N=!0}={}]=_;E!=="__proto__"&&(u.deep&&N&&isObjectCustom(I)&&(I=Array.isArray(I)?p(I):mapObject(I,s,u,d)),l[E]=I)}return l};mapObj$1.exports=(a,s,u)=>{if(!isObject$2(a))throw new TypeError(`Expected an object, got \`${a}\` (${typeof a})`);return mapObject(a,s,u)},mapObj$1.exports.mapObjectSkip=mapObjectSkip;var camelcase={exports:{}};const UPPERCASE=/[\p{Lu}]/u,LOWERCASE=/[\p{Ll}]/u,LEADING_CAPITAL=/^[\p{Lu}](?![\p{Lu}])/gu,IDENTIFIER=/([\p{Alpha}\p{N}_]|$)/u,SEPARATORS=/[_.\- ]+/,LEADING_SEPARATORS=new RegExp("^"+SEPARATORS.source),SEPARATORS_AND_IDENTIFIER=new RegExp(SEPARATORS.source+IDENTIFIER.source,"gu"),NUMBERS_AND_IDENTIFIER=new RegExp("\\d+"+IDENTIFIER.source,"gu"),preserveCamelCase=(a,s,u)=>{let d=!1,l=!1,p=!1;for(let h=0;h<a.length;h++){const y=a[h];d&&UPPERCASE.test(y)?(a=a.slice(0,h)+"-"+a.slice(h),d=!1,p=l,l=!0,h++):l&&p&&LOWERCASE.test(y)?(a=a.slice(0,h-1)+"-"+a.slice(h-1),p=l,l=!1,d=!0):(d=s(y)===y&&u(y)!==y,p=l,l=u(y)===y&&s(y)!==y)}return a},preserveConsecutiveUppercase=(a,s)=>(LEADING_CAPITAL.lastIndex=0,a.replace(LEADING_CAPITAL,u=>s(u))),postProcess=(a,s)=>(SEPARATORS_AND_IDENTIFIER.lastIndex=0,NUMBERS_AND_IDENTIFIER.lastIndex=0,a.replace(SEPARATORS_AND_IDENTIFIER,(u,d)=>s(d)).replace(NUMBERS_AND_IDENTIFIER,u=>s(u))),camelCase$1=(a,s)=>{if(!(typeof a=="string"||Array.isArray(a)))throw new TypeError("Expected the input to be `string | string[]`");if(s=pe({pascalCase:!1,preserveConsecutiveUppercase:!1},s),Array.isArray(a)?a=a.map(p=>p.trim()).filter(p=>p.length).join("-"):a=a.trim(),a.length===0)return"";const u=s.locale===!1?p=>p.toLowerCase():p=>p.toLocaleLowerCase(s.locale),d=s.locale===!1?p=>p.toUpperCase():p=>p.toLocaleUpperCase(s.locale);return a.length===1?s.pascalCase?d(a):u(a):(a!==u(a)&&(a=preserveCamelCase(a,u,d)),a=a.replace(LEADING_SEPARATORS,""),s.preserveConsecutiveUppercase?a=preserveConsecutiveUppercase(a,u):a=u(a),s.pascalCase&&(a=d(a.charAt(0))+a.slice(1)),postProcess(a,d))};camelcase.exports=camelCase$1,camelcase.exports.default=camelCase$1;class QuickLRU{constructor(s={}){if(!(s.maxSize&&s.maxSize>0))throw new TypeError("`maxSize` must be a number greater than 0");this.maxSize=s.maxSize,this.onEviction=s.onEviction,this.cache=new Map,this.oldCache=new Map,this._size=0}_set(s,u){if(this.cache.set(s,u),this._size++,this._size>=this.maxSize){if(this._size=0,typeof this.onEviction=="function")for(const[d,l]of this.oldCache.entries())this.onEviction(d,l);this.oldCache=this.cache,this.cache=new Map}}get(s){if(this.cache.has(s))return this.cache.get(s);if(this.oldCache.has(s)){const u=this.oldCache.get(s);return this.oldCache.delete(s),this._set(s,u),u}}set(s,u){return this.cache.has(s)?this.cache.set(s,u):this._set(s,u),this}has(s){return this.cache.has(s)||this.oldCache.has(s)}peek(s){if(this.cache.has(s))return this.cache.get(s);if(this.oldCache.has(s))return this.oldCache.get(s)}delete(s){const u=this.cache.delete(s);return u&&this._size--,this.oldCache.delete(s)||u}clear(){this.cache.clear(),this.oldCache.clear(),this._size=0}*keys(){for(const[s]of this)yield s}*values(){for(const[,s]of this)yield s}*[Symbol.iterator](){for(const s of this.cache)yield s;for(const s of this.oldCache){const[u]=s;this.cache.has(u)||(yield s)}}get size(){let s=0;for(const u of this.oldCache.keys())this.cache.has(u)||s++;return Math.min(this._size+s,this.maxSize)}}var quickLru=QuickLRU;const mapObj=mapObj$1.exports,camelCase=camelcase.exports,QuickLru=quickLru,has=(a,s)=>a.some(u=>typeof u=="string"?u===s:(u.lastIndex=0,u.test(s))),cache$1=new QuickLru({maxSize:1e5}),isObject$1=a=>typeof a=="object"&&a!==null&&!(a instanceof RegExp)&&!(a instanceof Error)&&!(a instanceof Date),camelCaseConvert=(a,s)=>{if(!isObject$1(a))return a;s=pe({deep:!1,pascalCase:!1},s);const{exclude:u,pascalCase:d,stopPaths:l,deep:p}=s,h=new Set(l),y=_=>(E,I)=>{if(p&&isObject$1(I)){const N=_===void 0?E:`${_}.${E}`;h.has(N)||(I=mapObj(I,y(N)))}if(!(u&&has(u,E))){const N=d?`${E}_`:E;if(cache$1.has(N))E=cache$1.get(N);else{const w=camelCase(E,{pascalCase:d,locale:!1});E.length<100&&cache$1.set(N,w),E=w}}return[E,I]};return mapObj(a,y(void 0))};var camelcaseKeys=(a,s)=>Array.isArray(a)?Object.keys(a).map(u=>camelCaseConvert(a[u],s)):camelCaseConvert(a,s),__importDefault$d=commonjsGlobal&&commonjsGlobal.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(TwirpRPC,"__esModule",{value:!0}),TwirpRPC.TwirpRpc=TwirpRPC.livekitPackage=void 0;const axios_1=__importDefault$d(axios),camelcase_keys_1=__importDefault$d(camelcaseKeys),defaultPrefix="/twirp";TwirpRPC.livekitPackage="livekit";class TwirpRpc{constructor(s,u,d,l){this.host=s,this.pkg=u,this.prefix=d||defaultPrefix;let p={baseURL:s};l!=null&&(p.headers={Host:l}),this.instance=axios_1.default.create(p)}request(s,u,d,l){return new Promise((p,h)=>{const y=`${this.prefix}/${this.pkg}.${s}/${u}`;this.instance.post(y,d,{headers:l}).then(_=>{p(camelcase_keys_1.default(_.data,{deep:!0}))}).catch(h)})}}TwirpRPC.TwirpRpc=TwirpRpc;var __awaiter$c=commonjsGlobal&&commonjsGlobal.__awaiter||function(a,s,u,d){function l(p){return p instanceof u?p:new u(function(h){h(p)})}return new(u||(u=Promise))(function(p,h){function y(I){try{E(d.next(I))}catch(N){h(N)}}function _(I){try{E(d.throw(I))}catch(N){h(N)}}function E(I){I.done?p(I.value):l(I.value).then(y,_)}E((d=d.apply(a,s||[])).next())})};Object.defineProperty(RoomServiceClient$1,"__esModule",{value:!0}),RoomServiceClient$1.RoomServiceClient=void 0;const livekit_models_1$3=livekit_models$1,livekit_room_1=livekit_room,TwirpRPC_1=TwirpRPC,svc="RoomService";class RoomServiceClient{constructor(s,u,d,l,p){this.rpc=new TwirpRPC_1.TwirpRpc(s,TwirpRPC_1.livekitPackage,void 0,p),this.apiKey=u,this.secret=d,this.jwt=l}createRoom(s){return __awaiter$c(this,void 0,void 0,function*(){const u=yield this.rpc.request(svc,"CreateRoom",livekit_room_1.CreateRoomRequest.toJSON(livekit_room_1.CreateRoomRequest.fromPartial(s)),this.authHeader({roomCreate:!0}));return livekit_models_1$3.Room.fromJSON(u)})}listRooms(s){return __awaiter$c(this,void 0,void 0,function*(){const u=yield this.rpc.request(svc,"ListRooms",livekit_room_1.ListRoomsRequest.toJSON({names:s!=null?s:[]}),this.authHeader({roomList:!0}));return livekit_room_1.ListRoomsResponse.fromJSON(u).rooms})}deleteRoom(s){return __awaiter$c(this,void 0,void 0,function*(){yield this.rpc.request(svc,"DeleteRoom",livekit_room_1.DeleteRoomRequest.toJSON({room:s}),this.authHeader({roomCreate:!0}))})}updateRoomMetadata(s,u){return __awaiter$c(this,void 0,void 0,function*(){const d=yield this.rpc.request(svc,"UpdateRoomMetadata",livekit_room_1.UpdateRoomMetadataRequest.toJSON({room:s,metadata:u}),this.authHeader({roomAdmin:!0,room:s}));return livekit_models_1$3.Room.fromJSON(d)})}listParticipants(s){return __awaiter$c(this,void 0,void 0,function*(){const u=yield this.rpc.request(svc,"ListParticipants",livekit_room_1.ListParticipantsRequest.toJSON({room:s}),this.authHeader({roomAdmin:!0,room:s}));return livekit_room_1.ListParticipantsResponse.fromJSON(u).participants})}getParticipant(s,u){return __awaiter$c(this,void 0,void 0,function*(){const d=yield this.rpc.request(svc,"GetParticipant",livekit_room_1.RoomParticipantIdentity.toJSON({room:s,identity:u}),this.authHeader({roomAdmin:!0,room:s}));return livekit_models_1$3.ParticipantInfo.fromJSON(d)})}removeParticipant(s,u){return __awaiter$c(this,void 0,void 0,function*(){yield this.rpc.request(svc,"RemoveParticipant",livekit_room_1.RoomParticipantIdentity.toJSON({room:s,identity:u}),this.authHeader({roomAdmin:!0,room:s}))})}mutePublishedTrack(s,u,d,l){return __awaiter$c(this,void 0,void 0,function*(){const p=livekit_room_1.MuteRoomTrackRequest.toJSON({room:s,identity:u,trackSid:d,muted:l}),h=yield this.rpc.request(svc,"MutePublishedTrack",p,this.authHeader({roomAdmin:!0,room:s}));return livekit_room_1.MuteRoomTrackResponse.fromJSON(h).track})}updateParticipant(s,u,d,l){return __awaiter$c(this,void 0,void 0,function*(){const p={room:s,identity:u,metadata:d||"",permission:l},h=yield this.rpc.request(svc,"UpdateParticipant",livekit_room_1.UpdateParticipantRequest.toJSON(p),this.authHeader({roomAdmin:!0,room:s}));return livekit_models_1$3.ParticipantInfo.fromJSON(h)})}updateSubscriptions(s,u,d,l){return __awaiter$c(this,void 0,void 0,function*(){const p=livekit_room_1.UpdateSubscriptionsRequest.toJSON({room:s,identity:u,trackSids:d,subscribe:l,participantTracks:[]});yield this.rpc.request(svc,"UpdateSubscriptions",p,this.authHeader({roomAdmin:!0,room:s}))})}sendData(s,u,d,l=[]){return __awaiter$c(this,void 0,void 0,function*(){const p=livekit_room_1.SendDataRequest.toJSON({room:s,data:u,kind:d,destinationSids:l});yield this.rpc.request(svc,"SendData",p,this.authHeader({roomAdmin:!0,room:s}))})}authHeader(s){if(this.jwt!=null)return{Authorization:`Bearer ${this.jwt}`}}}RoomServiceClient$1.RoomServiceClient=RoomServiceClient,function(a){var s=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(l,p,h,y){y===void 0&&(y=h),Object.defineProperty(l,y,{enumerable:!0,get:function(){return p[h]}})}:function(l,p,h,y){y===void 0&&(y=h),l[y]=p[h]}),u=commonjsGlobal&&commonjsGlobal.__exportStar||function(l,p){for(var h in l)h!=="default"&&!Object.prototype.hasOwnProperty.call(p,h)&&s(p,l,h)};Object.defineProperty(a,"__esModule",{value:!0}),a.TrackType=a.TrackInfo=a.Room=a.ParticipantInfo_State=a.ParticipantInfo=a.DataPacket_Kind=void 0,u(grants,a);var d=livekit_models$1;Object.defineProperty(a,"DataPacket_Kind",{enumerable:!0,get:function(){return d.DataPacket_Kind}}),Object.defineProperty(a,"ParticipantInfo",{enumerable:!0,get:function(){return d.ParticipantInfo}}),Object.defineProperty(a,"ParticipantInfo_State",{enumerable:!0,get:function(){return d.ParticipantInfo_State}}),Object.defineProperty(a,"Room",{enumerable:!0,get:function(){return d.Room}}),Object.defineProperty(a,"TrackInfo",{enumerable:!0,get:function(){return d.TrackInfo}}),Object.defineProperty(a,"TrackType",{enumerable:!0,get:function(){return d.TrackType}}),u(RoomServiceClient$1,a)}(dist$1);var livekit={},__importDefault$c=commonjsGlobal&&commonjsGlobal.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(livekit,"__esModule",{value:!0}),livekit.LiveKitUtils=void 0;const jwt_decode_1=__importDefault$c(require$$0$2);class LiveKitUtils{static decodeJwt(s){return(0,jwt_decode_1.default)(s,{header:!1})}static isRoomAdmin(s){return LiveKitUtils.decodeJwt(s).video.roomAdmin}static getRoomName(s){return LiveKitUtils.decodeJwt(s).video.room}}livekit.LiveKitUtils=LiveKitUtils,function(a){var s=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(j,K,M,q){q===void 0&&(q=M);var z=Object.getOwnPropertyDescriptor(K,M);(!z||("get"in z?!K.__esModule:z.writable||z.configurable))&&(z={enumerable:!0,get:function(){return K[M]}}),Object.defineProperty(j,q,z)}:function(j,K,M,q){q===void 0&&(q=M),j[q]=K[M]}),u=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(j,K){Object.defineProperty(j,"default",{enumerable:!0,value:K})}:function(j,K){j.default=K}),d=commonjsGlobal&&commonjsGlobal.__importStar||function(j){if(j&&j.__esModule)return j;var K={};if(j!=null)for(var M in j)M!=="default"&&Object.prototype.hasOwnProperty.call(j,M)&&s(K,j,M);return u(K,j),K},l=commonjsGlobal&&commonjsGlobal.__importDefault||function(j){return j&&j.__esModule?j:{default:j}};Object.defineProperty(a,"__esModule",{value:!0}),a.ApiStream=a.LiveKitUtils=a.LiveKitServer=a.EventApiModel=a.LayoutApiModel=a.LiveApiModel=void 0;const p=l(require$$0$2),h=require$$1$2,y=require$$2$2,_=layoutapi,E=liveapi,I=eventapi,N=d(security),w=d(api$1);a.LiveApiModel=w;const C=d(dist$3);a.LayoutApiModel=C;const D=d(dist$2);a.EventApiModel=D;const V=d(dist$1);a.LiveKitServer=V;const J=livekit;Object.defineProperty(a,"LiveKitUtils",{enumerable:!0,get:function(){return J.LiveKitUtils}});const W=logger$1,g=version$2,O={dev:"http://127.0.0.1:8081",stage:"https://live.stream.horse/grpcweb/live/v2",prod:"https://live.api.stream/grpcweb/live/v2"},$={dev:"https://live.stream.horse/grpcweb/layout/v2",stage:"https://live.stream.horse/grpcweb/layout/v2",prod:"https://live.api.stream/grpcweb/layout/v2"},x={dev:"wss://live.stream.horse/event/v2",stage:"wss://live.stream.horse/event/v2",prod:"wss://live.api.stream/event/v2"},Y={dev:"https://live.stream.horse/grpcweb/event/v2",stage:"https://live.stream.horse/grpcweb/event/v2",prod:"https://live.api.stream/grpcweb/event/v2"},te={dev:"wss://live.stream.horse/webrtc/v2",stage:"wss://live.stream.horse/webrtc/v2",prod:"wss://live.api.stream/webrtc/v2"},ne={dev:"https://live.stream.horse/webrtc/v2",stage:"https://live.stream.horse/webrtc/v2",prod:"https://live.api.stream/webrtc/v2"};class F{constructor(K={}){var M;const q=pe({env:"prod",logLevel:"Warn"},K);this.env=q.env;let z=(0,h.v4)();q.sessionId!=null&&(z=q.sessionId),this.log=W.logger.getCategory("ApiStream"),this.setLogLevel(q.env=="dev"?"Trace":q.logLevel);const le=(M=q.overrideEndpoints)!==null&&M!==void 0?M:{};le.liveApiServer==null&&(le.liveApiServer=O[this.env]),le.layoutApiServer==null&&(le.layoutApiServer=$[this.env]),le.eventApiServer==null&&(le.eventApiServer=Y[this.env]),le.eventApiWebSocketServer==null&&(le.eventApiWebSocketServer=x[this.env]),this.eventApi=new I.EventApi(z,le.eventApiServer,le.eventApiWebSocketServer,q.sdkVersion),this.layoutApi=new _.LayoutApi(z,this.eventApi,le.layoutApiServer,q.sdkVersion),this.liveApi=new E.LiveApi(z,this.eventApi,le.liveApiServer,this.setAccessToken.bind(this),q.apiKey,q.sdkVersion),this.eventApi.on("reconnectBefore",re=>{re.reauthenticate&&this.liveApi.authentication.refreshAccessToken({}).catch(()=>{})}),this.log.info("api.stream: sessionid="+z+", version="+g+", sdkVersion="+q.sdkVersion)}LiveApi(){return this.liveApi}LayoutApi(){return this.layoutApi}EventApi(){return this.eventApi}setLogLevel(K){try{let M=y.LogLevel.toLogLevel(K);W.logger.updateRuntimeSettings({level:M})}catch{this.log.warn(`unknown logging level ${K}`)}}setAccessToken(K){this.log.debug("setting accessToken"),this.accessTokenClaims=F.decodeAccessToken(K),this.layoutApi.setAccessToken(K),this.liveApi.setAccessToken(K),this.eventApi.setAccessToken(K)}getGuestRole(){if(this.accessTokenClaims!=null&&this.accessTokenClaims.guestControl!=null)return this.accessTokenClaims.guestControl.role}getGuestProject(){return this.guestProject}async load(K){if(K==null){let M=this.parseQuery();M.get(F.ACCESS_TOKEN_QUERY_PARAM)!=null&&(K=M.get(F.ACCESS_TOKEN_QUERY_PARAM))}if(K!=null)if(this.accessTokenClaims=F.decodeAccessToken(K),this.accessTokenClaims!=null&&this.accessTokenClaims.guestControl!=null){this.log.info("loading guest token"),this.guestProject={collectionId:this.accessTokenClaims.guestControl.collectionId,projectId:this.accessTokenClaims.guestControl.projectId,tokenExchangeRequired:!1};for(let M of this.accessTokenClaims.user.guestScope)if(M.collectionId==this.guestProject.collectionId&&M.projectId==this.guestProject.projectId){this.guestProject.tokenExchangeRequired=M.requestedScope.length>0,this.log.warn("guest token requires exchange");break}return this.guestProject.tokenExchangeRequired?(this.log.info("exchanging token"),this.LiveApi().setAccessToken(K),await this.LiveApi().authentication.refreshAccessToken({})):this.setAccessToken(K),this.log.info("auto-loading project = "+JSON.stringify(this.guestProject)),this.guestProject}else this.setAccessToken(K);return null}getLiveKitServer(K=!1){return K?ne[this.env]:te[this.env]}parseQuery(){let K=window.location.search,M=new Map,q=(K[0]==="?"?K.substr(1):K).split("&");for(let z=0;z<q.length;z++){let le=q[z].split("=");le.length==2&&(M.set(decodeURIComponent(le[0]),decodeURIComponent(le[1]||"")),this.log.debug(`found query param: ${decodeURIComponent(le[0])}=${decodeURIComponent(le[1]||"")}`))}return M}static decodeAccessToken(K){let M=(0,p.default)(K,{header:!1});return N.AccessToken.fromJSON(M)}}a.ApiStream=F,F.ACCESS_TOKEN_QUERY_PARAM="at"}(lib$2);var dist={},logger={};(function(a){var s=commonjsGlobal&&commonjsGlobal.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(a,"__esModule",{value:!0}),a.setLogLevel=a.LogLevel=void 0;const u=s(loglevel.exports);var d;(function(h){h.trace="trace",h.debug="debug",h.info="info",h.warn="warn",h.error="error",h.silent="silent"})(d=a.LogLevel||(a.LogLevel={}));const l=u.default.getLogger("livekit");l.setLevel(d.info),a.default=l;function p(h){l.setLevel(h)}a.setLogLevel=p})(logger);var livekit_models={},umd={exports:{}};(function(a,s){var u=function(d){Object.defineProperty(d,"__esModule",{value:!0}),d.default=void 0;/**
 * @license
 * Copyright 2009 The Closure Library Authors
 * Copyright 2020 Daniel Wirtz / The long.js Authors.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * SPDX-License-Identifier: Apache-2.0
 */var l=null;try{l=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function p(re,Q,ce){this.low=re|0,this.high=Q|0,this.unsigned=!!ce}p.prototype.__isLong__,Object.defineProperty(p.prototype,"__isLong__",{value:!0});function h(re){return(re&&re.__isLong__)===!0}function y(re){var Q=Math.clz32(re&-re);return re?31-Q:Q}p.isLong=h;var _={},E={};function I(re,Q){var ce,me,ve;return Q?(re>>>=0,(ve=0<=re&&re<256)&&(me=E[re],me)?me:(ce=w(re,0,!0),ve&&(E[re]=ce),ce)):(re|=0,(ve=-128<=re&&re<128)&&(me=_[re],me)?me:(ce=w(re,re<0?-1:0,!1),ve&&(_[re]=ce),ce))}p.fromInt=I;function N(re,Q){if(isNaN(re))return Q?te:Y;if(Q){if(re<0)return te;if(re>=O)return M}else{if(re<=-$)return q;if(re+1>=$)return K}return re<0?N(-re,Q).neg():w(re%g|0,re/g|0,Q)}p.fromNumber=N;function w(re,Q,ce){return new p(re,Q,ce)}p.fromBits=w;var C=Math.pow;function D(re,Q,ce){if(re.length===0)throw Error("empty string");if(typeof Q=="number"?(ce=Q,Q=!1):Q=!!Q,re==="NaN"||re==="Infinity"||re==="+Infinity"||re==="-Infinity")return Q?te:Y;if(ce=ce||10,ce<2||36<ce)throw RangeError("radix");var me;if((me=re.indexOf("-"))>0)throw Error("interior hyphen");if(me===0)return D(re.substring(1),Q,ce).neg();for(var ve=N(C(ce,8)),ye=Y,v=0;v<re.length;v+=8){var T=Math.min(8,re.length-v),L=parseInt(re.substring(v,v+T),ce);if(T<8){var oe=N(C(ce,T));ye=ye.mul(oe).add(N(L))}else ye=ye.mul(ve),ye=ye.add(N(L))}return ye.unsigned=Q,ye}p.fromString=D;function V(re,Q){return typeof re=="number"?N(re,Q):typeof re=="string"?D(re,Q):w(re.low,re.high,typeof Q=="boolean"?Q:re.unsigned)}p.fromValue=V;var J=1<<16,W=1<<24,g=J*J,O=g*g,$=O/2,x=I(W),Y=I(0);p.ZERO=Y;var te=I(0,!0);p.UZERO=te;var ne=I(1);p.ONE=ne;var F=I(1,!0);p.UONE=F;var j=I(-1);p.NEG_ONE=j;var K=w(-1,2147483647,!1);p.MAX_VALUE=K;var M=w(-1,-1,!0);p.MAX_UNSIGNED_VALUE=M;var q=w(0,-2147483648,!1);p.MIN_VALUE=q;var z=p.prototype;z.toInt=function(){return this.unsigned?this.low>>>0:this.low},z.toNumber=function(){return this.unsigned?(this.high>>>0)*g+(this.low>>>0):this.high*g+(this.low>>>0)},z.toString=function(Q){if(Q=Q||10,Q<2||36<Q)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(q)){var ce=N(Q),me=this.div(ce),ve=me.mul(ce).sub(this);return me.toString(Q)+ve.toInt().toString(Q)}else return"-"+this.neg().toString(Q);for(var ye=N(C(Q,6),this.unsigned),v=this,T="";;){var L=v.div(ye),oe=v.sub(L.mul(ye)).toInt()>>>0,k=oe.toString(Q);if(v=L,v.isZero())return k+T;for(;k.length<6;)k="0"+k;T=""+k+T}},z.getHighBits=function(){return this.high},z.getHighBitsUnsigned=function(){return this.high>>>0},z.getLowBits=function(){return this.low},z.getLowBitsUnsigned=function(){return this.low>>>0},z.getNumBitsAbs=function(){if(this.isNegative())return this.eq(q)?64:this.neg().getNumBitsAbs();for(var Q=this.high!=0?this.high:this.low,ce=31;ce>0&&(Q&1<<ce)==0;ce--);return this.high!=0?ce+33:ce+1},z.isZero=function(){return this.high===0&&this.low===0},z.eqz=z.isZero,z.isNegative=function(){return!this.unsigned&&this.high<0},z.isPositive=function(){return this.unsigned||this.high>=0},z.isOdd=function(){return(this.low&1)===1},z.isEven=function(){return(this.low&1)===0},z.equals=function(Q){return h(Q)||(Q=V(Q)),this.unsigned!==Q.unsigned&&this.high>>>31===1&&Q.high>>>31===1?!1:this.high===Q.high&&this.low===Q.low},z.eq=z.equals,z.notEquals=function(Q){return!this.eq(Q)},z.neq=z.notEquals,z.ne=z.notEquals,z.lessThan=function(Q){return this.comp(Q)<0},z.lt=z.lessThan,z.lessThanOrEqual=function(Q){return this.comp(Q)<=0},z.lte=z.lessThanOrEqual,z.le=z.lessThanOrEqual,z.greaterThan=function(Q){return this.comp(Q)>0},z.gt=z.greaterThan,z.greaterThanOrEqual=function(Q){return this.comp(Q)>=0},z.gte=z.greaterThanOrEqual,z.ge=z.greaterThanOrEqual,z.compare=function(Q){if(h(Q)||(Q=V(Q)),this.eq(Q))return 0;var ce=this.isNegative(),me=Q.isNegative();return ce&&!me?-1:!ce&&me?1:this.unsigned?Q.high>>>0>this.high>>>0||Q.high===this.high&&Q.low>>>0>this.low>>>0?-1:1:this.sub(Q).isNegative()?-1:1},z.comp=z.compare,z.negate=function(){return!this.unsigned&&this.eq(q)?q:this.not().add(ne)},z.neg=z.negate,z.add=function(Q){h(Q)||(Q=V(Q));var ce=this.high>>>16,me=this.high&65535,ve=this.low>>>16,ye=this.low&65535,v=Q.high>>>16,T=Q.high&65535,L=Q.low>>>16,oe=Q.low&65535,k=0,U=0,ee=0,de=0;return de+=ye+oe,ee+=de>>>16,de&=65535,ee+=ve+L,U+=ee>>>16,ee&=65535,U+=me+T,k+=U>>>16,U&=65535,k+=ce+v,k&=65535,w(ee<<16|de,k<<16|U,this.unsigned)},z.subtract=function(Q){return h(Q)||(Q=V(Q)),this.add(Q.neg())},z.sub=z.subtract,z.multiply=function(Q){if(this.isZero())return this;if(h(Q)||(Q=V(Q)),l){var ce=l.mul(this.low,this.high,Q.low,Q.high);return w(ce,l.get_high(),this.unsigned)}if(Q.isZero())return this.unsigned?te:Y;if(this.eq(q))return Q.isOdd()?q:Y;if(Q.eq(q))return this.isOdd()?q:Y;if(this.isNegative())return Q.isNegative()?this.neg().mul(Q.neg()):this.neg().mul(Q).neg();if(Q.isNegative())return this.mul(Q.neg()).neg();if(this.lt(x)&&Q.lt(x))return N(this.toNumber()*Q.toNumber(),this.unsigned);var me=this.high>>>16,ve=this.high&65535,ye=this.low>>>16,v=this.low&65535,T=Q.high>>>16,L=Q.high&65535,oe=Q.low>>>16,k=Q.low&65535,U=0,ee=0,de=0,ae=0;return ae+=v*k,de+=ae>>>16,ae&=65535,de+=ye*k,ee+=de>>>16,de&=65535,de+=v*oe,ee+=de>>>16,de&=65535,ee+=ve*k,U+=ee>>>16,ee&=65535,ee+=ye*oe,U+=ee>>>16,ee&=65535,ee+=v*L,U+=ee>>>16,ee&=65535,U+=me*k+ve*oe+ye*L+v*T,U&=65535,w(de<<16|ae,U<<16|ee,this.unsigned)},z.mul=z.multiply,z.divide=function(Q){if(h(Q)||(Q=V(Q)),Q.isZero())throw Error("division by zero");if(l){if(!this.unsigned&&this.high===-2147483648&&Q.low===-1&&Q.high===-1)return this;var ce=(this.unsigned?l.div_u:l.div_s)(this.low,this.high,Q.low,Q.high);return w(ce,l.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?te:Y;var me,ve,ye;if(this.unsigned){if(Q.unsigned||(Q=Q.toUnsigned()),Q.gt(this))return te;if(Q.gt(this.shru(1)))return F;ye=te}else{if(this.eq(q)){if(Q.eq(ne)||Q.eq(j))return q;if(Q.eq(q))return ne;var v=this.shr(1);return me=v.div(Q).shl(1),me.eq(Y)?Q.isNegative()?ne:j:(ve=this.sub(Q.mul(me)),ye=me.add(ve.div(Q)),ye)}else if(Q.eq(q))return this.unsigned?te:Y;if(this.isNegative())return Q.isNegative()?this.neg().div(Q.neg()):this.neg().div(Q).neg();if(Q.isNegative())return this.div(Q.neg()).neg();ye=Y}for(ve=this;ve.gte(Q);){me=Math.max(1,Math.floor(ve.toNumber()/Q.toNumber()));for(var T=Math.ceil(Math.log(me)/Math.LN2),L=T<=48?1:C(2,T-48),oe=N(me),k=oe.mul(Q);k.isNegative()||k.gt(ve);)me-=L,oe=N(me,this.unsigned),k=oe.mul(Q);oe.isZero()&&(oe=ne),ye=ye.add(oe),ve=ve.sub(k)}return ye},z.div=z.divide,z.modulo=function(Q){if(h(Q)||(Q=V(Q)),l){var ce=(this.unsigned?l.rem_u:l.rem_s)(this.low,this.high,Q.low,Q.high);return w(ce,l.get_high(),this.unsigned)}return this.sub(this.div(Q).mul(Q))},z.mod=z.modulo,z.rem=z.modulo,z.not=function(){return w(~this.low,~this.high,this.unsigned)},z.countLeadingZeros=function(){return this.high?Math.clz32(this.high):Math.clz32(this.low)+32},z.clz=z.countLeadingZeros,z.countTrailingZeros=function(){return this.low?y(this.low):y(this.high)+32},z.ctz=z.countTrailingZeros,z.and=function(Q){return h(Q)||(Q=V(Q)),w(this.low&Q.low,this.high&Q.high,this.unsigned)},z.or=function(Q){return h(Q)||(Q=V(Q)),w(this.low|Q.low,this.high|Q.high,this.unsigned)},z.xor=function(Q){return h(Q)||(Q=V(Q)),w(this.low^Q.low,this.high^Q.high,this.unsigned)},z.shiftLeft=function(Q){return h(Q)&&(Q=Q.toInt()),(Q&=63)===0?this:Q<32?w(this.low<<Q,this.high<<Q|this.low>>>32-Q,this.unsigned):w(0,this.low<<Q-32,this.unsigned)},z.shl=z.shiftLeft,z.shiftRight=function(Q){return h(Q)&&(Q=Q.toInt()),(Q&=63)===0?this:Q<32?w(this.low>>>Q|this.high<<32-Q,this.high>>Q,this.unsigned):w(this.high>>Q-32,this.high>=0?0:-1,this.unsigned)},z.shr=z.shiftRight,z.shiftRightUnsigned=function(Q){return h(Q)&&(Q=Q.toInt()),(Q&=63)===0?this:Q<32?w(this.low>>>Q|this.high<<32-Q,this.high>>>Q,this.unsigned):Q===32?w(this.high,0,this.unsigned):w(this.high>>>Q-32,0,this.unsigned)},z.shru=z.shiftRightUnsigned,z.shr_u=z.shiftRightUnsigned,z.rotateLeft=function(Q){var ce;return h(Q)&&(Q=Q.toInt()),(Q&=63)===0?this:Q===32?w(this.high,this.low,this.unsigned):Q<32?(ce=32-Q,w(this.low<<Q|this.high>>>ce,this.high<<Q|this.low>>>ce,this.unsigned)):(Q-=32,ce=32-Q,w(this.high<<Q|this.low>>>ce,this.low<<Q|this.high>>>ce,this.unsigned))},z.rotl=z.rotateLeft,z.rotateRight=function(Q){var ce;return h(Q)&&(Q=Q.toInt()),(Q&=63)===0?this:Q===32?w(this.high,this.low,this.unsigned):Q<32?(ce=32-Q,w(this.high<<ce|this.low>>>Q,this.low<<ce|this.high>>>Q,this.unsigned)):(Q-=32,ce=32-Q,w(this.low<<ce|this.high>>>Q,this.high<<ce|this.low>>>Q,this.unsigned))},z.rotr=z.rotateRight,z.toSigned=function(){return this.unsigned?w(this.low,this.high,!1):this},z.toUnsigned=function(){return this.unsigned?this:w(this.low,this.high,!0)},z.toBytes=function(Q){return Q?this.toBytesLE():this.toBytesBE()},z.toBytesLE=function(){var Q=this.high,ce=this.low;return[ce&255,ce>>>8&255,ce>>>16&255,ce>>>24,Q&255,Q>>>8&255,Q>>>16&255,Q>>>24]},z.toBytesBE=function(){var Q=this.high,ce=this.low;return[Q>>>24,Q>>>16&255,Q>>>8&255,Q&255,ce>>>24,ce>>>16&255,ce>>>8&255,ce&255]},p.fromBytes=function(Q,ce,me){return me?p.fromBytesLE(Q,ce):p.fromBytesBE(Q,ce)},p.fromBytesLE=function(Q,ce){return new p(Q[0]|Q[1]<<8|Q[2]<<16|Q[3]<<24,Q[4]|Q[5]<<8|Q[6]<<16|Q[7]<<24,ce)},p.fromBytesBE=function(Q,ce){return new p(Q[4]<<24|Q[5]<<16|Q[6]<<8|Q[7],Q[0]<<24|Q[1]<<16|Q[2]<<8|Q[3],ce)};var le=p;return d.default=le,"default"in d?d.default:d}({});a.exports=u})(umd);var indexMinimal={},minimal$1={},aspromise=asPromise;function asPromise(a,s){for(var u=new Array(arguments.length-1),d=0,l=2,p=!0;l<arguments.length;)u[d++]=arguments[l++];return new Promise(function(y,_){u[d]=function(I){if(p)if(p=!1,I)_(I);else{for(var N=new Array(arguments.length-1),w=0;w<N.length;)N[w++]=arguments[w];y.apply(null,N)}};try{a.apply(s||null,u)}catch(E){p&&(p=!1,_(E))}})}var base64$1={};(function(a){var s=a;s.length=function(y){var _=y.length;if(!_)return 0;for(var E=0;--_%4>1&&y.charAt(_)==="=";)++E;return Math.ceil(y.length*3)/4-E};for(var u=new Array(64),d=new Array(123),l=0;l<64;)d[u[l]=l<26?l+65:l<52?l+71:l<62?l-4:l-59|43]=l++;s.encode=function(y,_,E){for(var I=null,N=[],w=0,C=0,D;_<E;){var V=y[_++];switch(C){case 0:N[w++]=u[V>>2],D=(V&3)<<4,C=1;break;case 1:N[w++]=u[D|V>>4],D=(V&15)<<2,C=2;break;case 2:N[w++]=u[D|V>>6],N[w++]=u[V&63],C=0;break}w>8191&&((I||(I=[])).push(String.fromCharCode.apply(String,N)),w=0)}return C&&(N[w++]=u[D],N[w++]=61,C===1&&(N[w++]=61)),I?(w&&I.push(String.fromCharCode.apply(String,N.slice(0,w))),I.join("")):String.fromCharCode.apply(String,N.slice(0,w))};var p="invalid encoding";s.decode=function(y,_,E){for(var I=E,N=0,w,C=0;C<y.length;){var D=y.charCodeAt(C++);if(D===61&&N>1)break;if((D=d[D])===void 0)throw Error(p);switch(N){case 0:w=D,N=1;break;case 1:_[E++]=w<<2|(D&48)>>4,w=D,N=2;break;case 2:_[E++]=(w&15)<<4|(D&60)>>2,w=D,N=3;break;case 3:_[E++]=(w&3)<<6|D,N=0;break}}if(N===1)throw Error(p);return E-I},s.test=function(y){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(y)}})(base64$1);var eventemitter=EventEmitter$1;function EventEmitter$1(){this._listeners={}}EventEmitter$1.prototype.on=function a(s,u,d){return(this._listeners[s]||(this._listeners[s]=[])).push({fn:u,ctx:d||this}),this},EventEmitter$1.prototype.off=function a(s,u){if(s===void 0)this._listeners={};else if(u===void 0)this._listeners[s]=[];else for(var d=this._listeners[s],l=0;l<d.length;)d[l].fn===u?d.splice(l,1):++l;return this},EventEmitter$1.prototype.emit=function a(s){var u=this._listeners[s];if(u){for(var d=[],l=1;l<arguments.length;)d.push(arguments[l++]);for(l=0;l<u.length;)u[l].fn.apply(u[l++].ctx,d)}return this};var float=factory(factory);function factory(a){return typeof Float32Array!="undefined"?function(){var s=new Float32Array([-0]),u=new Uint8Array(s.buffer),d=u[3]===128;function l(_,E,I){s[0]=_,E[I]=u[0],E[I+1]=u[1],E[I+2]=u[2],E[I+3]=u[3]}function p(_,E,I){s[0]=_,E[I]=u[3],E[I+1]=u[2],E[I+2]=u[1],E[I+3]=u[0]}a.writeFloatLE=d?l:p,a.writeFloatBE=d?p:l;function h(_,E){return u[0]=_[E],u[1]=_[E+1],u[2]=_[E+2],u[3]=_[E+3],s[0]}function y(_,E){return u[3]=_[E],u[2]=_[E+1],u[1]=_[E+2],u[0]=_[E+3],s[0]}a.readFloatLE=d?h:y,a.readFloatBE=d?y:h}():function(){function s(d,l,p,h){var y=l<0?1:0;if(y&&(l=-l),l===0)d(1/l>0?0:2147483648,p,h);else if(isNaN(l))d(2143289344,p,h);else if(l>34028234663852886e22)d((y<<31|2139095040)>>>0,p,h);else if(l<11754943508222875e-54)d((y<<31|Math.round(l/1401298464324817e-60))>>>0,p,h);else{var _=Math.floor(Math.log(l)/Math.LN2),E=Math.round(l*Math.pow(2,-_)*8388608)&8388607;d((y<<31|_+127<<23|E)>>>0,p,h)}}a.writeFloatLE=s.bind(null,writeUintLE),a.writeFloatBE=s.bind(null,writeUintBE);function u(d,l,p){var h=d(l,p),y=(h>>31)*2+1,_=h>>>23&255,E=h&8388607;return _===255?E?NaN:y*(1/0):_===0?y*1401298464324817e-60*E:y*Math.pow(2,_-150)*(E+8388608)}a.readFloatLE=u.bind(null,readUintLE),a.readFloatBE=u.bind(null,readUintBE)}(),typeof Float64Array!="undefined"?function(){var s=new Float64Array([-0]),u=new Uint8Array(s.buffer),d=u[7]===128;function l(_,E,I){s[0]=_,E[I]=u[0],E[I+1]=u[1],E[I+2]=u[2],E[I+3]=u[3],E[I+4]=u[4],E[I+5]=u[5],E[I+6]=u[6],E[I+7]=u[7]}function p(_,E,I){s[0]=_,E[I]=u[7],E[I+1]=u[6],E[I+2]=u[5],E[I+3]=u[4],E[I+4]=u[3],E[I+5]=u[2],E[I+6]=u[1],E[I+7]=u[0]}a.writeDoubleLE=d?l:p,a.writeDoubleBE=d?p:l;function h(_,E){return u[0]=_[E],u[1]=_[E+1],u[2]=_[E+2],u[3]=_[E+3],u[4]=_[E+4],u[5]=_[E+5],u[6]=_[E+6],u[7]=_[E+7],s[0]}function y(_,E){return u[7]=_[E],u[6]=_[E+1],u[5]=_[E+2],u[4]=_[E+3],u[3]=_[E+4],u[2]=_[E+5],u[1]=_[E+6],u[0]=_[E+7],s[0]}a.readDoubleLE=d?h:y,a.readDoubleBE=d?y:h}():function(){function s(d,l,p,h,y,_){var E=h<0?1:0;if(E&&(h=-h),h===0)d(0,y,_+l),d(1/h>0?0:2147483648,y,_+p);else if(isNaN(h))d(0,y,_+l),d(2146959360,y,_+p);else if(h>17976931348623157e292)d(0,y,_+l),d((E<<31|2146435072)>>>0,y,_+p);else{var I;if(h<22250738585072014e-324)I=h/5e-324,d(I>>>0,y,_+l),d((E<<31|I/4294967296)>>>0,y,_+p);else{var N=Math.floor(Math.log(h)/Math.LN2);N===1024&&(N=1023),I=h*Math.pow(2,-N),d(I*4503599627370496>>>0,y,_+l),d((E<<31|N+1023<<20|I*1048576&1048575)>>>0,y,_+p)}}}a.writeDoubleLE=s.bind(null,writeUintLE,0,4),a.writeDoubleBE=s.bind(null,writeUintBE,4,0);function u(d,l,p,h,y){var _=d(h,y+l),E=d(h,y+p),I=(E>>31)*2+1,N=E>>>20&2047,w=4294967296*(E&1048575)+_;return N===2047?w?NaN:I*(1/0):N===0?I*5e-324*w:I*Math.pow(2,N-1075)*(w+4503599627370496)}a.readDoubleLE=u.bind(null,readUintLE,0,4),a.readDoubleBE=u.bind(null,readUintBE,4,0)}(),a}function writeUintLE(a,s,u){s[u]=a&255,s[u+1]=a>>>8&255,s[u+2]=a>>>16&255,s[u+3]=a>>>24}function writeUintBE(a,s,u){s[u]=a>>>24,s[u+1]=a>>>16&255,s[u+2]=a>>>8&255,s[u+3]=a&255}function readUintLE(a,s){return(a[s]|a[s+1]<<8|a[s+2]<<16|a[s+3]<<24)>>>0}function readUintBE(a,s){return(a[s]<<24|a[s+1]<<16|a[s+2]<<8|a[s+3])>>>0}var inquire_1=inquire;function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(a){}return null}var utf8$2={};(function(a){var s=a;s.length=function(d){for(var l=0,p=0,h=0;h<d.length;++h)p=d.charCodeAt(h),p<128?l+=1:p<2048?l+=2:(p&64512)===55296&&(d.charCodeAt(h+1)&64512)===56320?(++h,l+=4):l+=3;return l},s.read=function(d,l,p){var h=p-l;if(h<1)return"";for(var y=null,_=[],E=0,I;l<p;)I=d[l++],I<128?_[E++]=I:I>191&&I<224?_[E++]=(I&31)<<6|d[l++]&63:I>239&&I<365?(I=((I&7)<<18|(d[l++]&63)<<12|(d[l++]&63)<<6|d[l++]&63)-65536,_[E++]=55296+(I>>10),_[E++]=56320+(I&1023)):_[E++]=(I&15)<<12|(d[l++]&63)<<6|d[l++]&63,E>8191&&((y||(y=[])).push(String.fromCharCode.apply(String,_)),E=0);return y?(E&&y.push(String.fromCharCode.apply(String,_.slice(0,E))),y.join("")):String.fromCharCode.apply(String,_.slice(0,E))},s.write=function(d,l,p){for(var h=p,y,_,E=0;E<d.length;++E)y=d.charCodeAt(E),y<128?l[p++]=y:y<2048?(l[p++]=y>>6|192,l[p++]=y&63|128):(y&64512)===55296&&((_=d.charCodeAt(E+1))&64512)===56320?(y=65536+((y&1023)<<10)+(_&1023),++E,l[p++]=y>>18|240,l[p++]=y>>12&63|128,l[p++]=y>>6&63|128,l[p++]=y&63|128):(l[p++]=y>>12|224,l[p++]=y>>6&63|128,l[p++]=y&63|128);return p-h}})(utf8$2);var pool_1=pool;function pool(a,s,u){var d=u||8192,l=d>>>1,p=null,h=d;return function(_){if(_<1||_>l)return a(_);h+_>d&&(p=a(d),h=0);var E=s.call(p,h,h+=_);return h&7&&(h=(h|7)+1),E}}var longbits=LongBits$2,util$5=minimal$1;function LongBits$2(a,s){this.lo=a>>>0,this.hi=s>>>0}var zero=LongBits$2.zero=new LongBits$2(0,0);zero.toNumber=function(){return 0},zero.zzEncode=zero.zzDecode=function(){return this},zero.length=function(){return 1};var zeroHash=LongBits$2.zeroHash="\0\0\0\0\0\0\0\0";LongBits$2.fromNumber=function a(s){if(s===0)return zero;var u=s<0;u&&(s=-s);var d=s>>>0,l=(s-d)/4294967296>>>0;return u&&(l=~l>>>0,d=~d>>>0,++d>4294967295&&(d=0,++l>4294967295&&(l=0))),new LongBits$2(d,l)},LongBits$2.from=function a(s){if(typeof s=="number")return LongBits$2.fromNumber(s);if(util$5.isString(s))if(util$5.Long)s=util$5.Long.fromString(s);else return LongBits$2.fromNumber(parseInt(s,10));return s.low||s.high?new LongBits$2(s.low>>>0,s.high>>>0):zero},LongBits$2.prototype.toNumber=function a(s){if(!s&&this.hi>>>31){var u=~this.lo+1>>>0,d=~this.hi>>>0;return u||(d=d+1>>>0),-(u+d*4294967296)}return this.lo+this.hi*4294967296},LongBits$2.prototype.toLong=function a(s){return util$5.Long?new util$5.Long(this.lo|0,this.hi|0,Boolean(s)):{low:this.lo|0,high:this.hi|0,unsigned:Boolean(s)}};var charCodeAt=String.prototype.charCodeAt;LongBits$2.fromHash=function a(s){return s===zeroHash?zero:new LongBits$2((charCodeAt.call(s,0)|charCodeAt.call(s,1)<<8|charCodeAt.call(s,2)<<16|charCodeAt.call(s,3)<<24)>>>0,(charCodeAt.call(s,4)|charCodeAt.call(s,5)<<8|charCodeAt.call(s,6)<<16|charCodeAt.call(s,7)<<24)>>>0)},LongBits$2.prototype.toHash=function a(){return String.fromCharCode(this.lo&255,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,this.hi&255,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},LongBits$2.prototype.zzEncode=function a(){var s=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^s)>>>0,this.lo=(this.lo<<1^s)>>>0,this},LongBits$2.prototype.zzDecode=function a(){var s=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^s)>>>0,this.hi=(this.hi>>>1^s)>>>0,this},LongBits$2.prototype.length=function a(){var s=this.lo,u=(this.lo>>>28|this.hi<<4)>>>0,d=this.hi>>>24;return d===0?u===0?s<16384?s<128?1:2:s<2097152?3:4:u<16384?u<128?5:6:u<2097152?7:8:d<128?9:10},function(a){var s=a;s.asPromise=aspromise,s.base64=base64$1,s.EventEmitter=eventemitter,s.float=float,s.inquire=inquire_1,s.utf8=utf8$2,s.pool=pool_1,s.LongBits=longbits,s.isNode=Boolean(typeof commonjsGlobal!="undefined"&&commonjsGlobal&&commonjsGlobal.process&&commonjsGlobal.process.versions&&commonjsGlobal.process.versions.node),s.global=s.isNode&&commonjsGlobal||typeof window!="undefined"&&window||typeof self!="undefined"&&self||commonjsGlobal,s.emptyArray=Object.freeze?Object.freeze([]):[],s.emptyObject=Object.freeze?Object.freeze({}):{},s.isInteger=Number.isInteger||function(p){return typeof p=="number"&&isFinite(p)&&Math.floor(p)===p},s.isString=function(p){return typeof p=="string"||p instanceof String},s.isObject=function(p){return p&&typeof p=="object"},s.isset=s.isSet=function(p,h){var y=p[h];return y!=null&&p.hasOwnProperty(h)?typeof y!="object"||(Array.isArray(y)?y.length:Object.keys(y).length)>0:!1},s.Buffer=function(){try{var l=s.inquire("buffer").Buffer;return l.prototype.utf8Write?l:null}catch{return null}}(),s._Buffer_from=null,s._Buffer_allocUnsafe=null,s.newBuffer=function(p){return typeof p=="number"?s.Buffer?s._Buffer_allocUnsafe(p):new s.Array(p):s.Buffer?s._Buffer_from(p):typeof Uint8Array=="undefined"?p:new Uint8Array(p)},s.Array=typeof Uint8Array!="undefined"?Uint8Array:Array,s.Long=s.global.dcodeIO&&s.global.dcodeIO.Long||s.global.Long||s.inquire("long"),s.key2Re=/^true|false|0|1$/,s.key32Re=/^-?(?:0|[1-9][0-9]*)$/,s.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,s.longToHash=function(p){return p?s.LongBits.from(p).toHash():s.LongBits.zeroHash},s.longFromHash=function(p,h){var y=s.LongBits.fromHash(p);return s.Long?s.Long.fromBits(y.lo,y.hi,h):y.toNumber(Boolean(h))};function u(l,p,h){for(var y=Object.keys(p),_=0;_<y.length;++_)(l[y[_]]===void 0||!h)&&(l[y[_]]=p[y[_]]);return l}s.merge=u,s.lcFirst=function(p){return p.charAt(0).toLowerCase()+p.substring(1)};function d(l){function p(h,y){if(!(this instanceof p))return new p(h,y);Object.defineProperty(this,"message",{get:function(){return h}}),Error.captureStackTrace?Error.captureStackTrace(this,p):Object.defineProperty(this,"stack",{value:new Error().stack||""}),y&&u(this,y)}return(p.prototype=Object.create(Error.prototype)).constructor=p,Object.defineProperty(p.prototype,"name",{get:function(){return l}}),p.prototype.toString=function(){return this.name+": "+this.message},p}s.newError=d,s.ProtocolError=d("ProtocolError"),s.oneOfGetter=function(p){for(var h={},y=0;y<p.length;++y)h[p[y]]=1;return function(){for(var _=Object.keys(this),E=_.length-1;E>-1;--E)if(h[_[E]]===1&&this[_[E]]!==void 0&&this[_[E]]!==null)return _[E]}},s.oneOfSetter=function(p){return function(h){for(var y=0;y<p.length;++y)p[y]!==h&&delete this[p[y]]}},s.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},s._configure=function(){var l=s.Buffer;if(!l){s._Buffer_from=s._Buffer_allocUnsafe=null;return}s._Buffer_from=l.from!==Uint8Array.from&&l.from||function(h,y){return new l(h,y)},s._Buffer_allocUnsafe=l.allocUnsafe||function(h){return new l(h)}}}(minimal$1);var writer=Writer$1,util$4=minimal$1,BufferWriter$1,LongBits$1=util$4.LongBits,base64=util$4.base64,utf8$1=util$4.utf8;function Op(a,s,u){this.fn=a,this.len=s,this.next=void 0,this.val=u}function noop(){}function State(a){this.head=a.head,this.tail=a.tail,this.len=a.len,this.next=a.states}function Writer$1(){this.len=0,this.head=new Op(noop,0,0),this.tail=this.head,this.states=null}var create$4=function a(){return util$4.Buffer?function(){return(Writer$1.create=function(){return new BufferWriter$1})()}:function(){return new Writer$1}};Writer$1.create=create$4(),Writer$1.alloc=function a(s){return new util$4.Array(s)},util$4.Array!==Array&&(Writer$1.alloc=util$4.pool(Writer$1.alloc,util$4.Array.prototype.subarray)),Writer$1.prototype._push=function a(s,u,d){return this.tail=this.tail.next=new Op(s,u,d),this.len+=u,this};function writeByte(a,s,u){s[u]=a&255}function writeVarint32(a,s,u){for(;a>127;)s[u++]=a&127|128,a>>>=7;s[u]=a}function VarintOp(a,s){this.len=a,this.next=void 0,this.val=s}VarintOp.prototype=Object.create(Op.prototype),VarintOp.prototype.fn=writeVarint32,Writer$1.prototype.uint32=function a(s){return this.len+=(this.tail=this.tail.next=new VarintOp((s=s>>>0)<128?1:s<16384?2:s<2097152?3:s<268435456?4:5,s)).len,this},Writer$1.prototype.int32=function a(s){return s<0?this._push(writeVarint64,10,LongBits$1.fromNumber(s)):this.uint32(s)},Writer$1.prototype.sint32=function a(s){return this.uint32((s<<1^s>>31)>>>0)};function writeVarint64(a,s,u){for(;a.hi;)s[u++]=a.lo&127|128,a.lo=(a.lo>>>7|a.hi<<25)>>>0,a.hi>>>=7;for(;a.lo>127;)s[u++]=a.lo&127|128,a.lo=a.lo>>>7;s[u++]=a.lo}Writer$1.prototype.uint64=function a(s){var u=LongBits$1.from(s);return this._push(writeVarint64,u.length(),u)},Writer$1.prototype.int64=Writer$1.prototype.uint64,Writer$1.prototype.sint64=function a(s){var u=LongBits$1.from(s).zzEncode();return this._push(writeVarint64,u.length(),u)},Writer$1.prototype.bool=function a(s){return this._push(writeByte,1,s?1:0)};function writeFixed32(a,s,u){s[u]=a&255,s[u+1]=a>>>8&255,s[u+2]=a>>>16&255,s[u+3]=a>>>24}Writer$1.prototype.fixed32=function a(s){return this._push(writeFixed32,4,s>>>0)},Writer$1.prototype.sfixed32=Writer$1.prototype.fixed32,Writer$1.prototype.fixed64=function a(s){var u=LongBits$1.from(s);return this._push(writeFixed32,4,u.lo)._push(writeFixed32,4,u.hi)},Writer$1.prototype.sfixed64=Writer$1.prototype.fixed64,Writer$1.prototype.float=function a(s){return this._push(util$4.float.writeFloatLE,4,s)},Writer$1.prototype.double=function a(s){return this._push(util$4.float.writeDoubleLE,8,s)};var writeBytes=util$4.Array.prototype.set?function a(s,u,d){u.set(s,d)}:function a(s,u,d){for(var l=0;l<s.length;++l)u[d+l]=s[l]};Writer$1.prototype.bytes=function a(s){var u=s.length>>>0;if(!u)return this._push(writeByte,1,0);if(util$4.isString(s)){var d=Writer$1.alloc(u=base64.length(s));base64.decode(s,d,0),s=d}return this.uint32(u)._push(writeBytes,u,s)},Writer$1.prototype.string=function a(s){var u=utf8$1.length(s);return u?this.uint32(u)._push(utf8$1.write,u,s):this._push(writeByte,1,0)},Writer$1.prototype.fork=function a(){return this.states=new State(this),this.head=this.tail=new Op(noop,0,0),this.len=0,this},Writer$1.prototype.reset=function a(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new Op(noop,0,0),this.len=0),this},Writer$1.prototype.ldelim=function a(){var s=this.head,u=this.tail,d=this.len;return this.reset().uint32(d),d&&(this.tail.next=s.next,this.tail=u,this.len+=d),this},Writer$1.prototype.finish=function a(){for(var s=this.head.next,u=this.constructor.alloc(this.len),d=0;s;)s.fn(s.val,u,d),d+=s.len,s=s.next;return u},Writer$1._configure=function(a){BufferWriter$1=a,Writer$1.create=create$4(),BufferWriter$1._configure()};var writer_buffer=BufferWriter,Writer=writer;(BufferWriter.prototype=Object.create(Writer.prototype)).constructor=BufferWriter;var util$3=minimal$1;function BufferWriter(){Writer.call(this)}BufferWriter._configure=function(){BufferWriter.alloc=util$3._Buffer_allocUnsafe,BufferWriter.writeBytesBuffer=util$3.Buffer&&util$3.Buffer.prototype instanceof Uint8Array&&util$3.Buffer.prototype.set.name==="set"?function(s,u,d){u.set(s,d)}:function(s,u,d){if(s.copy)s.copy(u,d,0,s.length);else for(var l=0;l<s.length;)u[d++]=s[l++]}},BufferWriter.prototype.bytes=function a(s){util$3.isString(s)&&(s=util$3._Buffer_from(s,"base64"));var u=s.length>>>0;return this.uint32(u),u&&this._push(BufferWriter.writeBytesBuffer,u,s),this};function writeStringBuffer(a,s,u){a.length<40?util$3.utf8.write(a,s,u):s.utf8Write?s.utf8Write(a,u):s.write(a,u)}BufferWriter.prototype.string=function a(s){var u=util$3.Buffer.byteLength(s);return this.uint32(u),u&&this._push(writeStringBuffer,u,s),this},BufferWriter._configure();var reader=Reader$1,util$2=minimal$1,BufferReader$1,LongBits=util$2.LongBits,utf8=util$2.utf8;function indexOutOfRange(a,s){return RangeError("index out of range: "+a.pos+" + "+(s||1)+" > "+a.len)}function Reader$1(a){this.buf=a,this.pos=0,this.len=a.length}var create_array=typeof Uint8Array!="undefined"?function a(s){if(s instanceof Uint8Array||Array.isArray(s))return new Reader$1(s);throw Error("illegal buffer")}:function a(s){if(Array.isArray(s))return new Reader$1(s);throw Error("illegal buffer")},create$3=function a(){return util$2.Buffer?function(u){return(Reader$1.create=function(l){return util$2.Buffer.isBuffer(l)?new BufferReader$1(l):create_array(l)})(u)}:create_array};Reader$1.create=create$3(),Reader$1.prototype._slice=util$2.Array.prototype.subarray||util$2.Array.prototype.slice,Reader$1.prototype.uint32=function a(){var s=4294967295;return function(){if(s=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(s=(s|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(s=(s|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(s=(s|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(s=(s|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return s;if((this.pos+=5)>this.len)throw this.pos=this.len,indexOutOfRange(this,10);return s}}(),Reader$1.prototype.int32=function a(){return this.uint32()|0},Reader$1.prototype.sint32=function a(){var s=this.uint32();return s>>>1^-(s&1)|0};function readLongVarint(){var a=new LongBits(0,0),s=0;if(this.len-this.pos>4){for(;s<4;++s)if(a.lo=(a.lo|(this.buf[this.pos]&127)<<s*7)>>>0,this.buf[this.pos++]<128)return a;if(a.lo=(a.lo|(this.buf[this.pos]&127)<<28)>>>0,a.hi=(a.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return a;s=0}else{for(;s<3;++s){if(this.pos>=this.len)throw indexOutOfRange(this);if(a.lo=(a.lo|(this.buf[this.pos]&127)<<s*7)>>>0,this.buf[this.pos++]<128)return a}return a.lo=(a.lo|(this.buf[this.pos++]&127)<<s*7)>>>0,a}if(this.len-this.pos>4){for(;s<5;++s)if(a.hi=(a.hi|(this.buf[this.pos]&127)<<s*7+3)>>>0,this.buf[this.pos++]<128)return a}else for(;s<5;++s){if(this.pos>=this.len)throw indexOutOfRange(this);if(a.hi=(a.hi|(this.buf[this.pos]&127)<<s*7+3)>>>0,this.buf[this.pos++]<128)return a}throw Error("invalid varint encoding")}Reader$1.prototype.bool=function a(){return this.uint32()!==0};function readFixed32_end(a,s){return(a[s-4]|a[s-3]<<8|a[s-2]<<16|a[s-1]<<24)>>>0}Reader$1.prototype.fixed32=function a(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);return readFixed32_end(this.buf,this.pos+=4)},Reader$1.prototype.sfixed32=function a(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);return readFixed32_end(this.buf,this.pos+=4)|0};function readFixed64(){if(this.pos+8>this.len)throw indexOutOfRange(this,8);return new LongBits(readFixed32_end(this.buf,this.pos+=4),readFixed32_end(this.buf,this.pos+=4))}Reader$1.prototype.float=function a(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);var s=util$2.float.readFloatLE(this.buf,this.pos);return this.pos+=4,s},Reader$1.prototype.double=function a(){if(this.pos+8>this.len)throw indexOutOfRange(this,4);var s=util$2.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,s},Reader$1.prototype.bytes=function a(){var s=this.uint32(),u=this.pos,d=this.pos+s;if(d>this.len)throw indexOutOfRange(this,s);return this.pos+=s,Array.isArray(this.buf)?this.buf.slice(u,d):u===d?new this.buf.constructor(0):this._slice.call(this.buf,u,d)},Reader$1.prototype.string=function a(){var s=this.bytes();return utf8.read(s,0,s.length)},Reader$1.prototype.skip=function a(s){if(typeof s=="number"){if(this.pos+s>this.len)throw indexOutOfRange(this,s);this.pos+=s}else do if(this.pos>=this.len)throw indexOutOfRange(this);while(this.buf[this.pos++]&128);return this},Reader$1.prototype.skipType=function(a){switch(a){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(a=this.uint32()&7)!==4;)this.skipType(a);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+a+" at offset "+this.pos)}return this},Reader$1._configure=function(a){BufferReader$1=a,Reader$1.create=create$3(),BufferReader$1._configure();var s=util$2.Long?"toLong":"toNumber";util$2.merge(Reader$1.prototype,{int64:function(){return readLongVarint.call(this)[s](!1)},uint64:function(){return readLongVarint.call(this)[s](!0)},sint64:function(){return readLongVarint.call(this).zzDecode()[s](!1)},fixed64:function(){return readFixed64.call(this)[s](!0)},sfixed64:function(){return readFixed64.call(this)[s](!1)}})};var reader_buffer=BufferReader,Reader=reader;(BufferReader.prototype=Object.create(Reader.prototype)).constructor=BufferReader;var util$1=minimal$1;function BufferReader(a){Reader.call(this,a)}BufferReader._configure=function(){util$1.Buffer&&(BufferReader.prototype._slice=util$1.Buffer.prototype.slice)},BufferReader.prototype.string=function a(){var s=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+s,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+s,this.len))},BufferReader._configure();var rpc={},service=Service,util=minimal$1;(Service.prototype=Object.create(util.EventEmitter.prototype)).constructor=Service;function Service(a,s,u){if(typeof a!="function")throw TypeError("rpcImpl must be a function");util.EventEmitter.call(this),this.rpcImpl=a,this.requestDelimited=Boolean(s),this.responseDelimited=Boolean(u)}Service.prototype.rpcCall=function a(s,u,d,l,p){if(!l)throw TypeError("request must be specified");var h=this;if(!p)return util.asPromise(a,h,s,u,d,l);if(!h.rpcImpl){setTimeout(function(){p(Error("already ended"))},0);return}try{return h.rpcImpl(s,u[h.requestDelimited?"encodeDelimited":"encode"](l).finish(),function(_,E){if(_)return h.emit("error",_,s),p(_);if(E===null){h.end(!0);return}if(!(E instanceof d))try{E=d[h.responseDelimited?"decodeDelimited":"decode"](E)}catch(I){return h.emit("error",I,s),p(I)}return h.emit("data",E,s),p(null,E)})}catch(y){h.emit("error",y,s),setTimeout(function(){p(y)},0);return}},Service.prototype.end=function a(s){return this.rpcImpl&&(s||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this},function(a){var s=a;s.Service=service}(rpc);var roots={};(function(a){var s=a;s.build="minimal",s.Writer=writer,s.BufferWriter=writer_buffer,s.Reader=reader,s.BufferReader=reader_buffer,s.util=minimal$1,s.rpc=rpc,s.roots=roots,s.configure=u;function u(){s.util._configure(),s.Writer._configure(s.BufferWriter),s.Reader._configure(s.BufferReader)}u()})(indexMinimal);var minimal=indexMinimal;(function(a){var s=commonjsGlobal&&commonjsGlobal.__importDefault||function(k){return k&&k.__esModule?k:{default:k}};Object.defineProperty(a,"__esModule",{value:!0}),a.ClientInfo=a.ParticipantTracks=a.UserPacket=a.SpeakerInfo=a.ActiveSpeakerUpdate=a.DataPacket=a.VideoLayer=a.TrackInfo=a.ParticipantInfo=a.Codec=a.Room=a.clientInfo_SDKToJSON=a.clientInfo_SDKFromJSON=a.ClientInfo_SDK=a.dataPacket_KindToJSON=a.dataPacket_KindFromJSON=a.DataPacket_Kind=a.participantInfo_StateToJSON=a.participantInfo_StateFromJSON=a.ParticipantInfo_State=a.connectionQualityToJSON=a.connectionQualityFromJSON=a.ConnectionQuality=a.videoQualityToJSON=a.videoQualityFromJSON=a.VideoQuality=a.trackSourceToJSON=a.trackSourceFromJSON=a.TrackSource=a.trackTypeToJSON=a.trackTypeFromJSON=a.TrackType=a.protobufPackage=void 0;const u=s(umd.exports),d=s(minimal);a.protobufPackage="livekit";var l;(function(k){k[k.AUDIO=0]="AUDIO",k[k.VIDEO=1]="VIDEO",k[k.DATA=2]="DATA",k[k.UNRECOGNIZED=-1]="UNRECOGNIZED"})(l=a.TrackType||(a.TrackType={}));function p(k){switch(k){case 0:case"AUDIO":return l.AUDIO;case 1:case"VIDEO":return l.VIDEO;case 2:case"DATA":return l.DATA;case-1:case"UNRECOGNIZED":default:return l.UNRECOGNIZED}}a.trackTypeFromJSON=p;function h(k){switch(k){case l.AUDIO:return"AUDIO";case l.VIDEO:return"VIDEO";case l.DATA:return"DATA";default:return"UNKNOWN"}}a.trackTypeToJSON=h;var y;(function(k){k[k.UNKNOWN=0]="UNKNOWN",k[k.CAMERA=1]="CAMERA",k[k.MICROPHONE=2]="MICROPHONE",k[k.SCREEN_SHARE=3]="SCREEN_SHARE",k[k.SCREEN_SHARE_AUDIO=4]="SCREEN_SHARE_AUDIO",k[k.UNRECOGNIZED=-1]="UNRECOGNIZED"})(y=a.TrackSource||(a.TrackSource={}));function _(k){switch(k){case 0:case"UNKNOWN":return y.UNKNOWN;case 1:case"CAMERA":return y.CAMERA;case 2:case"MICROPHONE":return y.MICROPHONE;case 3:case"SCREEN_SHARE":return y.SCREEN_SHARE;case 4:case"SCREEN_SHARE_AUDIO":return y.SCREEN_SHARE_AUDIO;case-1:case"UNRECOGNIZED":default:return y.UNRECOGNIZED}}a.trackSourceFromJSON=_;function E(k){switch(k){case y.UNKNOWN:return"UNKNOWN";case y.CAMERA:return"CAMERA";case y.MICROPHONE:return"MICROPHONE";case y.SCREEN_SHARE:return"SCREEN_SHARE";case y.SCREEN_SHARE_AUDIO:return"SCREEN_SHARE_AUDIO";default:return"UNKNOWN"}}a.trackSourceToJSON=E;var I;(function(k){k[k.LOW=0]="LOW",k[k.MEDIUM=1]="MEDIUM",k[k.HIGH=2]="HIGH",k[k.OFF=3]="OFF",k[k.UNRECOGNIZED=-1]="UNRECOGNIZED"})(I=a.VideoQuality||(a.VideoQuality={}));function N(k){switch(k){case 0:case"LOW":return I.LOW;case 1:case"MEDIUM":return I.MEDIUM;case 2:case"HIGH":return I.HIGH;case 3:case"OFF":return I.OFF;case-1:case"UNRECOGNIZED":default:return I.UNRECOGNIZED}}a.videoQualityFromJSON=N;function w(k){switch(k){case I.LOW:return"LOW";case I.MEDIUM:return"MEDIUM";case I.HIGH:return"HIGH";case I.OFF:return"OFF";default:return"UNKNOWN"}}a.videoQualityToJSON=w;var C;(function(k){k[k.POOR=0]="POOR",k[k.GOOD=1]="GOOD",k[k.EXCELLENT=2]="EXCELLENT",k[k.UNRECOGNIZED=-1]="UNRECOGNIZED"})(C=a.ConnectionQuality||(a.ConnectionQuality={}));function D(k){switch(k){case 0:case"POOR":return C.POOR;case 1:case"GOOD":return C.GOOD;case 2:case"EXCELLENT":return C.EXCELLENT;case-1:case"UNRECOGNIZED":default:return C.UNRECOGNIZED}}a.connectionQualityFromJSON=D;function V(k){switch(k){case C.POOR:return"POOR";case C.GOOD:return"GOOD";case C.EXCELLENT:return"EXCELLENT";default:return"UNKNOWN"}}a.connectionQualityToJSON=V;var J;(function(k){k[k.JOINING=0]="JOINING",k[k.JOINED=1]="JOINED",k[k.ACTIVE=2]="ACTIVE",k[k.DISCONNECTED=3]="DISCONNECTED",k[k.UNRECOGNIZED=-1]="UNRECOGNIZED"})(J=a.ParticipantInfo_State||(a.ParticipantInfo_State={}));function W(k){switch(k){case 0:case"JOINING":return J.JOINING;case 1:case"JOINED":return J.JOINED;case 2:case"ACTIVE":return J.ACTIVE;case 3:case"DISCONNECTED":return J.DISCONNECTED;case-1:case"UNRECOGNIZED":default:return J.UNRECOGNIZED}}a.participantInfo_StateFromJSON=W;function g(k){switch(k){case J.JOINING:return"JOINING";case J.JOINED:return"JOINED";case J.ACTIVE:return"ACTIVE";case J.DISCONNECTED:return"DISCONNECTED";default:return"UNKNOWN"}}a.participantInfo_StateToJSON=g;var O;(function(k){k[k.RELIABLE=0]="RELIABLE",k[k.LOSSY=1]="LOSSY",k[k.UNRECOGNIZED=-1]="UNRECOGNIZED"})(O=a.DataPacket_Kind||(a.DataPacket_Kind={}));function $(k){switch(k){case 0:case"RELIABLE":return O.RELIABLE;case 1:case"LOSSY":return O.LOSSY;case-1:case"UNRECOGNIZED":default:return O.UNRECOGNIZED}}a.dataPacket_KindFromJSON=$;function x(k){switch(k){case O.RELIABLE:return"RELIABLE";case O.LOSSY:return"LOSSY";default:return"UNKNOWN"}}a.dataPacket_KindToJSON=x;var Y;(function(k){k[k.UNKNOWN=0]="UNKNOWN",k[k.JS=1]="JS",k[k.SWIFT=2]="SWIFT",k[k.ANDROID=3]="ANDROID",k[k.FLUTTER=4]="FLUTTER",k[k.GO=5]="GO",k[k.UNITY=6]="UNITY",k[k.UNRECOGNIZED=-1]="UNRECOGNIZED"})(Y=a.ClientInfo_SDK||(a.ClientInfo_SDK={}));function te(k){switch(k){case 0:case"UNKNOWN":return Y.UNKNOWN;case 1:case"JS":return Y.JS;case 2:case"SWIFT":return Y.SWIFT;case 3:case"ANDROID":return Y.ANDROID;case 4:case"FLUTTER":return Y.FLUTTER;case 5:case"GO":return Y.GO;case 6:case"UNITY":return Y.UNITY;case-1:case"UNRECOGNIZED":default:return Y.UNRECOGNIZED}}a.clientInfo_SDKFromJSON=te;function ne(k){switch(k){case Y.UNKNOWN:return"UNKNOWN";case Y.JS:return"JS";case Y.SWIFT:return"SWIFT";case Y.ANDROID:return"ANDROID";case Y.FLUTTER:return"FLUTTER";case Y.GO:return"GO";case Y.UNITY:return"UNITY";default:return"UNKNOWN"}}a.clientInfo_SDKToJSON=ne;const F={sid:"",name:"",emptyTimeout:0,maxParticipants:0,creationTime:0,turnPassword:"",metadata:"",numParticipants:0,activeRecording:!1};a.Room={encode(k,U=d.default.Writer.create()){k.sid!==""&&U.uint32(10).string(k.sid),k.name!==""&&U.uint32(18).string(k.name),k.emptyTimeout!==0&&U.uint32(24).uint32(k.emptyTimeout),k.maxParticipants!==0&&U.uint32(32).uint32(k.maxParticipants),k.creationTime!==0&&U.uint32(40).int64(k.creationTime),k.turnPassword!==""&&U.uint32(50).string(k.turnPassword);for(const ee of k.enabledCodecs)a.Codec.encode(ee,U.uint32(58).fork()).ldelim();return k.metadata!==""&&U.uint32(66).string(k.metadata),k.numParticipants!==0&&U.uint32(72).uint32(k.numParticipants),k.activeRecording===!0&&U.uint32(80).bool(k.activeRecording),U},decode(k,U){const ee=k instanceof d.default.Reader?k:new d.default.Reader(k);let de=U===void 0?ee.len:ee.pos+U;const ae=Object.assign({},F);for(ae.enabledCodecs=[];ee.pos<de;){const fe=ee.uint32();switch(fe>>>3){case 1:ae.sid=ee.string();break;case 2:ae.name=ee.string();break;case 3:ae.emptyTimeout=ee.uint32();break;case 4:ae.maxParticipants=ee.uint32();break;case 5:ae.creationTime=oe(ee.int64());break;case 6:ae.turnPassword=ee.string();break;case 7:ae.enabledCodecs.push(a.Codec.decode(ee,ee.uint32()));break;case 8:ae.metadata=ee.string();break;case 9:ae.numParticipants=ee.uint32();break;case 10:ae.activeRecording=ee.bool();break;default:ee.skipType(fe&7);break}}return ae},fromJSON(k){const U=Object.assign({},F);if(U.enabledCodecs=[],k.sid!==void 0&&k.sid!==null?U.sid=String(k.sid):U.sid="",k.name!==void 0&&k.name!==null?U.name=String(k.name):U.name="",k.emptyTimeout!==void 0&&k.emptyTimeout!==null?U.emptyTimeout=Number(k.emptyTimeout):U.emptyTimeout=0,k.maxParticipants!==void 0&&k.maxParticipants!==null?U.maxParticipants=Number(k.maxParticipants):U.maxParticipants=0,k.creationTime!==void 0&&k.creationTime!==null?U.creationTime=Number(k.creationTime):U.creationTime=0,k.turnPassword!==void 0&&k.turnPassword!==null?U.turnPassword=String(k.turnPassword):U.turnPassword="",k.enabledCodecs!==void 0&&k.enabledCodecs!==null)for(const ee of k.enabledCodecs)U.enabledCodecs.push(a.Codec.fromJSON(ee));return k.metadata!==void 0&&k.metadata!==null?U.metadata=String(k.metadata):U.metadata="",k.numParticipants!==void 0&&k.numParticipants!==null?U.numParticipants=Number(k.numParticipants):U.numParticipants=0,k.activeRecording!==void 0&&k.activeRecording!==null?U.activeRecording=Boolean(k.activeRecording):U.activeRecording=!1,U},toJSON(k){const U={};return k.sid!==void 0&&(U.sid=k.sid),k.name!==void 0&&(U.name=k.name),k.emptyTimeout!==void 0&&(U.emptyTimeout=k.emptyTimeout),k.maxParticipants!==void 0&&(U.maxParticipants=k.maxParticipants),k.creationTime!==void 0&&(U.creationTime=k.creationTime),k.turnPassword!==void 0&&(U.turnPassword=k.turnPassword),k.enabledCodecs?U.enabledCodecs=k.enabledCodecs.map(ee=>ee?a.Codec.toJSON(ee):void 0):U.enabledCodecs=[],k.metadata!==void 0&&(U.metadata=k.metadata),k.numParticipants!==void 0&&(U.numParticipants=k.numParticipants),k.activeRecording!==void 0&&(U.activeRecording=k.activeRecording),U},fromPartial(k){var U,ee,de,ae,fe,Ee,Pe,Se,Ie;const De=Object.assign({},F);if(De.sid=(U=k.sid)!==null&&U!==void 0?U:"",De.name=(ee=k.name)!==null&&ee!==void 0?ee:"",De.emptyTimeout=(de=k.emptyTimeout)!==null&&de!==void 0?de:0,De.maxParticipants=(ae=k.maxParticipants)!==null&&ae!==void 0?ae:0,De.creationTime=(fe=k.creationTime)!==null&&fe!==void 0?fe:0,De.turnPassword=(Ee=k.turnPassword)!==null&&Ee!==void 0?Ee:"",De.enabledCodecs=[],k.enabledCodecs!==void 0&&k.enabledCodecs!==null)for(const He of k.enabledCodecs)De.enabledCodecs.push(a.Codec.fromPartial(He));return De.metadata=(Pe=k.metadata)!==null&&Pe!==void 0?Pe:"",De.numParticipants=(Se=k.numParticipants)!==null&&Se!==void 0?Se:0,De.activeRecording=(Ie=k.activeRecording)!==null&&Ie!==void 0?Ie:!1,De}};const j={mime:"",fmtpLine:""};a.Codec={encode(k,U=d.default.Writer.create()){return k.mime!==""&&U.uint32(10).string(k.mime),k.fmtpLine!==""&&U.uint32(18).string(k.fmtpLine),U},decode(k,U){const ee=k instanceof d.default.Reader?k:new d.default.Reader(k);let de=U===void 0?ee.len:ee.pos+U;const ae=Object.assign({},j);for(;ee.pos<de;){const fe=ee.uint32();switch(fe>>>3){case 1:ae.mime=ee.string();break;case 2:ae.fmtpLine=ee.string();break;default:ee.skipType(fe&7);break}}return ae},fromJSON(k){const U=Object.assign({},j);return k.mime!==void 0&&k.mime!==null?U.mime=String(k.mime):U.mime="",k.fmtpLine!==void 0&&k.fmtpLine!==null?U.fmtpLine=String(k.fmtpLine):U.fmtpLine="",U},toJSON(k){const U={};return k.mime!==void 0&&(U.mime=k.mime),k.fmtpLine!==void 0&&(U.fmtpLine=k.fmtpLine),U},fromPartial(k){var U,ee;const de=Object.assign({},j);return de.mime=(U=k.mime)!==null&&U!==void 0?U:"",de.fmtpLine=(ee=k.fmtpLine)!==null&&ee!==void 0?ee:"",de}};const K={sid:"",identity:"",state:0,metadata:"",joinedAt:0,hidden:!1,recorder:!1,name:""};a.ParticipantInfo={encode(k,U=d.default.Writer.create()){k.sid!==""&&U.uint32(10).string(k.sid),k.identity!==""&&U.uint32(18).string(k.identity),k.state!==0&&U.uint32(24).int32(k.state);for(const ee of k.tracks)a.TrackInfo.encode(ee,U.uint32(34).fork()).ldelim();return k.metadata!==""&&U.uint32(42).string(k.metadata),k.joinedAt!==0&&U.uint32(48).int64(k.joinedAt),k.hidden===!0&&U.uint32(56).bool(k.hidden),k.recorder===!0&&U.uint32(64).bool(k.recorder),k.name!==""&&U.uint32(74).string(k.name),U},decode(k,U){const ee=k instanceof d.default.Reader?k:new d.default.Reader(k);let de=U===void 0?ee.len:ee.pos+U;const ae=Object.assign({},K);for(ae.tracks=[];ee.pos<de;){const fe=ee.uint32();switch(fe>>>3){case 1:ae.sid=ee.string();break;case 2:ae.identity=ee.string();break;case 3:ae.state=ee.int32();break;case 4:ae.tracks.push(a.TrackInfo.decode(ee,ee.uint32()));break;case 5:ae.metadata=ee.string();break;case 6:ae.joinedAt=oe(ee.int64());break;case 7:ae.hidden=ee.bool();break;case 8:ae.recorder=ee.bool();break;case 9:ae.name=ee.string();break;default:ee.skipType(fe&7);break}}return ae},fromJSON(k){const U=Object.assign({},K);if(U.tracks=[],k.sid!==void 0&&k.sid!==null?U.sid=String(k.sid):U.sid="",k.identity!==void 0&&k.identity!==null?U.identity=String(k.identity):U.identity="",k.state!==void 0&&k.state!==null?U.state=W(k.state):U.state=0,k.tracks!==void 0&&k.tracks!==null)for(const ee of k.tracks)U.tracks.push(a.TrackInfo.fromJSON(ee));return k.metadata!==void 0&&k.metadata!==null?U.metadata=String(k.metadata):U.metadata="",k.joinedAt!==void 0&&k.joinedAt!==null?U.joinedAt=Number(k.joinedAt):U.joinedAt=0,k.hidden!==void 0&&k.hidden!==null?U.hidden=Boolean(k.hidden):U.hidden=!1,k.recorder!==void 0&&k.recorder!==null?U.recorder=Boolean(k.recorder):U.recorder=!1,k.name!==void 0&&k.name!==null?U.name=String(k.name):U.name="",U},toJSON(k){const U={};return k.sid!==void 0&&(U.sid=k.sid),k.identity!==void 0&&(U.identity=k.identity),k.state!==void 0&&(U.state=g(k.state)),k.tracks?U.tracks=k.tracks.map(ee=>ee?a.TrackInfo.toJSON(ee):void 0):U.tracks=[],k.metadata!==void 0&&(U.metadata=k.metadata),k.joinedAt!==void 0&&(U.joinedAt=k.joinedAt),k.hidden!==void 0&&(U.hidden=k.hidden),k.recorder!==void 0&&(U.recorder=k.recorder),k.name!==void 0&&(U.name=k.name),U},fromPartial(k){var U,ee,de,ae,fe,Ee,Pe,Se;const Ie=Object.assign({},K);if(Ie.sid=(U=k.sid)!==null&&U!==void 0?U:"",Ie.identity=(ee=k.identity)!==null&&ee!==void 0?ee:"",Ie.state=(de=k.state)!==null&&de!==void 0?de:0,Ie.tracks=[],k.tracks!==void 0&&k.tracks!==null)for(const De of k.tracks)Ie.tracks.push(a.TrackInfo.fromPartial(De));return Ie.metadata=(ae=k.metadata)!==null&&ae!==void 0?ae:"",Ie.joinedAt=(fe=k.joinedAt)!==null&&fe!==void 0?fe:0,Ie.hidden=(Ee=k.hidden)!==null&&Ee!==void 0?Ee:!1,Ie.recorder=(Pe=k.recorder)!==null&&Pe!==void 0?Pe:!1,Ie.name=(Se=k.name)!==null&&Se!==void 0?Se:"",Ie}};const M={sid:"",type:0,name:"",muted:!1,width:0,height:0,simulcast:!1,disableDtx:!1,source:0,mimeType:"",mid:""};a.TrackInfo={encode(k,U=d.default.Writer.create()){k.sid!==""&&U.uint32(10).string(k.sid),k.type!==0&&U.uint32(16).int32(k.type),k.name!==""&&U.uint32(26).string(k.name),k.muted===!0&&U.uint32(32).bool(k.muted),k.width!==0&&U.uint32(40).uint32(k.width),k.height!==0&&U.uint32(48).uint32(k.height),k.simulcast===!0&&U.uint32(56).bool(k.simulcast),k.disableDtx===!0&&U.uint32(64).bool(k.disableDtx),k.source!==0&&U.uint32(72).int32(k.source);for(const ee of k.layers)a.VideoLayer.encode(ee,U.uint32(82).fork()).ldelim();return k.mimeType!==""&&U.uint32(90).string(k.mimeType),k.mid!==""&&U.uint32(98).string(k.mid),U},decode(k,U){const ee=k instanceof d.default.Reader?k:new d.default.Reader(k);let de=U===void 0?ee.len:ee.pos+U;const ae=Object.assign({},M);for(ae.layers=[];ee.pos<de;){const fe=ee.uint32();switch(fe>>>3){case 1:ae.sid=ee.string();break;case 2:ae.type=ee.int32();break;case 3:ae.name=ee.string();break;case 4:ae.muted=ee.bool();break;case 5:ae.width=ee.uint32();break;case 6:ae.height=ee.uint32();break;case 7:ae.simulcast=ee.bool();break;case 8:ae.disableDtx=ee.bool();break;case 9:ae.source=ee.int32();break;case 10:ae.layers.push(a.VideoLayer.decode(ee,ee.uint32()));break;case 11:ae.mimeType=ee.string();break;case 12:ae.mid=ee.string();break;default:ee.skipType(fe&7);break}}return ae},fromJSON(k){const U=Object.assign({},M);if(U.layers=[],k.sid!==void 0&&k.sid!==null?U.sid=String(k.sid):U.sid="",k.type!==void 0&&k.type!==null?U.type=p(k.type):U.type=0,k.name!==void 0&&k.name!==null?U.name=String(k.name):U.name="",k.muted!==void 0&&k.muted!==null?U.muted=Boolean(k.muted):U.muted=!1,k.width!==void 0&&k.width!==null?U.width=Number(k.width):U.width=0,k.height!==void 0&&k.height!==null?U.height=Number(k.height):U.height=0,k.simulcast!==void 0&&k.simulcast!==null?U.simulcast=Boolean(k.simulcast):U.simulcast=!1,k.disableDtx!==void 0&&k.disableDtx!==null?U.disableDtx=Boolean(k.disableDtx):U.disableDtx=!1,k.source!==void 0&&k.source!==null?U.source=_(k.source):U.source=0,k.layers!==void 0&&k.layers!==null)for(const ee of k.layers)U.layers.push(a.VideoLayer.fromJSON(ee));return k.mimeType!==void 0&&k.mimeType!==null?U.mimeType=String(k.mimeType):U.mimeType="",k.mid!==void 0&&k.mid!==null?U.mid=String(k.mid):U.mid="",U},toJSON(k){const U={};return k.sid!==void 0&&(U.sid=k.sid),k.type!==void 0&&(U.type=h(k.type)),k.name!==void 0&&(U.name=k.name),k.muted!==void 0&&(U.muted=k.muted),k.width!==void 0&&(U.width=k.width),k.height!==void 0&&(U.height=k.height),k.simulcast!==void 0&&(U.simulcast=k.simulcast),k.disableDtx!==void 0&&(U.disableDtx=k.disableDtx),k.source!==void 0&&(U.source=E(k.source)),k.layers?U.layers=k.layers.map(ee=>ee?a.VideoLayer.toJSON(ee):void 0):U.layers=[],k.mimeType!==void 0&&(U.mimeType=k.mimeType),k.mid!==void 0&&(U.mid=k.mid),U},fromPartial(k){var U,ee,de,ae,fe,Ee,Pe,Se,Ie,De,He;const be=Object.assign({},M);if(be.sid=(U=k.sid)!==null&&U!==void 0?U:"",be.type=(ee=k.type)!==null&&ee!==void 0?ee:0,be.name=(de=k.name)!==null&&de!==void 0?de:"",be.muted=(ae=k.muted)!==null&&ae!==void 0?ae:!1,be.width=(fe=k.width)!==null&&fe!==void 0?fe:0,be.height=(Ee=k.height)!==null&&Ee!==void 0?Ee:0,be.simulcast=(Pe=k.simulcast)!==null&&Pe!==void 0?Pe:!1,be.disableDtx=(Se=k.disableDtx)!==null&&Se!==void 0?Se:!1,be.source=(Ie=k.source)!==null&&Ie!==void 0?Ie:0,be.layers=[],k.layers!==void 0&&k.layers!==null)for(const Ve of k.layers)be.layers.push(a.VideoLayer.fromPartial(Ve));return be.mimeType=(De=k.mimeType)!==null&&De!==void 0?De:"",be.mid=(He=k.mid)!==null&&He!==void 0?He:"",be}};const q={quality:0,width:0,height:0,bitrate:0,ssrc:0};a.VideoLayer={encode(k,U=d.default.Writer.create()){return k.quality!==0&&U.uint32(8).int32(k.quality),k.width!==0&&U.uint32(16).uint32(k.width),k.height!==0&&U.uint32(24).uint32(k.height),k.bitrate!==0&&U.uint32(32).uint32(k.bitrate),k.ssrc!==0&&U.uint32(40).uint32(k.ssrc),U},decode(k,U){const ee=k instanceof d.default.Reader?k:new d.default.Reader(k);let de=U===void 0?ee.len:ee.pos+U;const ae=Object.assign({},q);for(;ee.pos<de;){const fe=ee.uint32();switch(fe>>>3){case 1:ae.quality=ee.int32();break;case 2:ae.width=ee.uint32();break;case 3:ae.height=ee.uint32();break;case 4:ae.bitrate=ee.uint32();break;case 5:ae.ssrc=ee.uint32();break;default:ee.skipType(fe&7);break}}return ae},fromJSON(k){const U=Object.assign({},q);return k.quality!==void 0&&k.quality!==null?U.quality=N(k.quality):U.quality=0,k.width!==void 0&&k.width!==null?U.width=Number(k.width):U.width=0,k.height!==void 0&&k.height!==null?U.height=Number(k.height):U.height=0,k.bitrate!==void 0&&k.bitrate!==null?U.bitrate=Number(k.bitrate):U.bitrate=0,k.ssrc!==void 0&&k.ssrc!==null?U.ssrc=Number(k.ssrc):U.ssrc=0,U},toJSON(k){const U={};return k.quality!==void 0&&(U.quality=w(k.quality)),k.width!==void 0&&(U.width=k.width),k.height!==void 0&&(U.height=k.height),k.bitrate!==void 0&&(U.bitrate=k.bitrate),k.ssrc!==void 0&&(U.ssrc=k.ssrc),U},fromPartial(k){var U,ee,de,ae,fe;const Ee=Object.assign({},q);return Ee.quality=(U=k.quality)!==null&&U!==void 0?U:0,Ee.width=(ee=k.width)!==null&&ee!==void 0?ee:0,Ee.height=(de=k.height)!==null&&de!==void 0?de:0,Ee.bitrate=(ae=k.bitrate)!==null&&ae!==void 0?ae:0,Ee.ssrc=(fe=k.ssrc)!==null&&fe!==void 0?fe:0,Ee}};const z={kind:0};a.DataPacket={encode(k,U=d.default.Writer.create()){return k.kind!==0&&U.uint32(8).int32(k.kind),k.user!==void 0&&a.UserPacket.encode(k.user,U.uint32(18).fork()).ldelim(),k.speaker!==void 0&&a.ActiveSpeakerUpdate.encode(k.speaker,U.uint32(26).fork()).ldelim(),U},decode(k,U){const ee=k instanceof d.default.Reader?k:new d.default.Reader(k);let de=U===void 0?ee.len:ee.pos+U;const ae=Object.assign({},z);for(;ee.pos<de;){const fe=ee.uint32();switch(fe>>>3){case 1:ae.kind=ee.int32();break;case 2:ae.user=a.UserPacket.decode(ee,ee.uint32());break;case 3:ae.speaker=a.ActiveSpeakerUpdate.decode(ee,ee.uint32());break;default:ee.skipType(fe&7);break}}return ae},fromJSON(k){const U=Object.assign({},z);return k.kind!==void 0&&k.kind!==null?U.kind=$(k.kind):U.kind=0,k.user!==void 0&&k.user!==null?U.user=a.UserPacket.fromJSON(k.user):U.user=void 0,k.speaker!==void 0&&k.speaker!==null?U.speaker=a.ActiveSpeakerUpdate.fromJSON(k.speaker):U.speaker=void 0,U},toJSON(k){const U={};return k.kind!==void 0&&(U.kind=x(k.kind)),k.user!==void 0&&(U.user=k.user?a.UserPacket.toJSON(k.user):void 0),k.speaker!==void 0&&(U.speaker=k.speaker?a.ActiveSpeakerUpdate.toJSON(k.speaker):void 0),U},fromPartial(k){var U;const ee=Object.assign({},z);return ee.kind=(U=k.kind)!==null&&U!==void 0?U:0,k.user!==void 0&&k.user!==null?ee.user=a.UserPacket.fromPartial(k.user):ee.user=void 0,k.speaker!==void 0&&k.speaker!==null?ee.speaker=a.ActiveSpeakerUpdate.fromPartial(k.speaker):ee.speaker=void 0,ee}};const le={};a.ActiveSpeakerUpdate={encode(k,U=d.default.Writer.create()){for(const ee of k.speakers)a.SpeakerInfo.encode(ee,U.uint32(10).fork()).ldelim();return U},decode(k,U){const ee=k instanceof d.default.Reader?k:new d.default.Reader(k);let de=U===void 0?ee.len:ee.pos+U;const ae=Object.assign({},le);for(ae.speakers=[];ee.pos<de;){const fe=ee.uint32();switch(fe>>>3){case 1:ae.speakers.push(a.SpeakerInfo.decode(ee,ee.uint32()));break;default:ee.skipType(fe&7);break}}return ae},fromJSON(k){const U=Object.assign({},le);if(U.speakers=[],k.speakers!==void 0&&k.speakers!==null)for(const ee of k.speakers)U.speakers.push(a.SpeakerInfo.fromJSON(ee));return U},toJSON(k){const U={};return k.speakers?U.speakers=k.speakers.map(ee=>ee?a.SpeakerInfo.toJSON(ee):void 0):U.speakers=[],U},fromPartial(k){const U=Object.assign({},le);if(U.speakers=[],k.speakers!==void 0&&k.speakers!==null)for(const ee of k.speakers)U.speakers.push(a.SpeakerInfo.fromPartial(ee));return U}};const re={sid:"",level:0,active:!1};a.SpeakerInfo={encode(k,U=d.default.Writer.create()){return k.sid!==""&&U.uint32(10).string(k.sid),k.level!==0&&U.uint32(21).float(k.level),k.active===!0&&U.uint32(24).bool(k.active),U},decode(k,U){const ee=k instanceof d.default.Reader?k:new d.default.Reader(k);let de=U===void 0?ee.len:ee.pos+U;const ae=Object.assign({},re);for(;ee.pos<de;){const fe=ee.uint32();switch(fe>>>3){case 1:ae.sid=ee.string();break;case 2:ae.level=ee.float();break;case 3:ae.active=ee.bool();break;default:ee.skipType(fe&7);break}}return ae},fromJSON(k){const U=Object.assign({},re);return k.sid!==void 0&&k.sid!==null?U.sid=String(k.sid):U.sid="",k.level!==void 0&&k.level!==null?U.level=Number(k.level):U.level=0,k.active!==void 0&&k.active!==null?U.active=Boolean(k.active):U.active=!1,U},toJSON(k){const U={};return k.sid!==void 0&&(U.sid=k.sid),k.level!==void 0&&(U.level=k.level),k.active!==void 0&&(U.active=k.active),U},fromPartial(k){var U,ee,de;const ae=Object.assign({},re);return ae.sid=(U=k.sid)!==null&&U!==void 0?U:"",ae.level=(ee=k.level)!==null&&ee!==void 0?ee:0,ae.active=(de=k.active)!==null&&de!==void 0?de:!1,ae}};const Q={participantSid:"",destinationSids:""};a.UserPacket={encode(k,U=d.default.Writer.create()){k.participantSid!==""&&U.uint32(10).string(k.participantSid),k.payload.length!==0&&U.uint32(18).bytes(k.payload);for(const ee of k.destinationSids)U.uint32(26).string(ee);return U},decode(k,U){const ee=k instanceof d.default.Reader?k:new d.default.Reader(k);let de=U===void 0?ee.len:ee.pos+U;const ae=Object.assign({},Q);for(ae.destinationSids=[],ae.payload=new Uint8Array;ee.pos<de;){const fe=ee.uint32();switch(fe>>>3){case 1:ae.participantSid=ee.string();break;case 2:ae.payload=ee.bytes();break;case 3:ae.destinationSids.push(ee.string());break;default:ee.skipType(fe&7);break}}return ae},fromJSON(k){const U=Object.assign({},Q);if(U.destinationSids=[],U.payload=new Uint8Array,k.participantSid!==void 0&&k.participantSid!==null?U.participantSid=String(k.participantSid):U.participantSid="",k.payload!==void 0&&k.payload!==null&&(U.payload=v(k.payload)),k.destinationSids!==void 0&&k.destinationSids!==null)for(const ee of k.destinationSids)U.destinationSids.push(String(ee));return U},toJSON(k){const U={};return k.participantSid!==void 0&&(U.participantSid=k.participantSid),k.payload!==void 0&&(U.payload=L(k.payload!==void 0?k.payload:new Uint8Array)),k.destinationSids?U.destinationSids=k.destinationSids.map(ee=>ee):U.destinationSids=[],U},fromPartial(k){var U,ee;const de=Object.assign({},Q);if(de.participantSid=(U=k.participantSid)!==null&&U!==void 0?U:"",de.payload=(ee=k.payload)!==null&&ee!==void 0?ee:new Uint8Array,de.destinationSids=[],k.destinationSids!==void 0&&k.destinationSids!==null)for(const ae of k.destinationSids)de.destinationSids.push(ae);return de}};const ce={participantSid:"",trackSids:""};a.ParticipantTracks={encode(k,U=d.default.Writer.create()){k.participantSid!==""&&U.uint32(10).string(k.participantSid);for(const ee of k.trackSids)U.uint32(18).string(ee);return U},decode(k,U){const ee=k instanceof d.default.Reader?k:new d.default.Reader(k);let de=U===void 0?ee.len:ee.pos+U;const ae=Object.assign({},ce);for(ae.trackSids=[];ee.pos<de;){const fe=ee.uint32();switch(fe>>>3){case 1:ae.participantSid=ee.string();break;case 2:ae.trackSids.push(ee.string());break;default:ee.skipType(fe&7);break}}return ae},fromJSON(k){const U=Object.assign({},ce);if(U.trackSids=[],k.participantSid!==void 0&&k.participantSid!==null?U.participantSid=String(k.participantSid):U.participantSid="",k.trackSids!==void 0&&k.trackSids!==null)for(const ee of k.trackSids)U.trackSids.push(String(ee));return U},toJSON(k){const U={};return k.participantSid!==void 0&&(U.participantSid=k.participantSid),k.trackSids?U.trackSids=k.trackSids.map(ee=>ee):U.trackSids=[],U},fromPartial(k){var U;const ee=Object.assign({},ce);if(ee.participantSid=(U=k.participantSid)!==null&&U!==void 0?U:"",ee.trackSids=[],k.trackSids!==void 0&&k.trackSids!==null)for(const de of k.trackSids)ee.trackSids.push(de);return ee}};const me={sdk:0,version:"",protocol:0,os:"",osVersion:"",deviceModel:"",browser:"",browserVersion:""};a.ClientInfo={encode(k,U=d.default.Writer.create()){return k.sdk!==0&&U.uint32(8).int32(k.sdk),k.version!==""&&U.uint32(18).string(k.version),k.protocol!==0&&U.uint32(24).int32(k.protocol),k.os!==""&&U.uint32(34).string(k.os),k.osVersion!==""&&U.uint32(42).string(k.osVersion),k.deviceModel!==""&&U.uint32(50).string(k.deviceModel),k.browser!==""&&U.uint32(58).string(k.browser),k.browserVersion!==""&&U.uint32(66).string(k.browserVersion),U},decode(k,U){const ee=k instanceof d.default.Reader?k:new d.default.Reader(k);let de=U===void 0?ee.len:ee.pos+U;const ae=Object.assign({},me);for(;ee.pos<de;){const fe=ee.uint32();switch(fe>>>3){case 1:ae.sdk=ee.int32();break;case 2:ae.version=ee.string();break;case 3:ae.protocol=ee.int32();break;case 4:ae.os=ee.string();break;case 5:ae.osVersion=ee.string();break;case 6:ae.deviceModel=ee.string();break;case 7:ae.browser=ee.string();break;case 8:ae.browserVersion=ee.string();break;default:ee.skipType(fe&7);break}}return ae},fromJSON(k){const U=Object.assign({},me);return k.sdk!==void 0&&k.sdk!==null?U.sdk=te(k.sdk):U.sdk=0,k.version!==void 0&&k.version!==null?U.version=String(k.version):U.version="",k.protocol!==void 0&&k.protocol!==null?U.protocol=Number(k.protocol):U.protocol=0,k.os!==void 0&&k.os!==null?U.os=String(k.os):U.os="",k.osVersion!==void 0&&k.osVersion!==null?U.osVersion=String(k.osVersion):U.osVersion="",k.deviceModel!==void 0&&k.deviceModel!==null?U.deviceModel=String(k.deviceModel):U.deviceModel="",k.browser!==void 0&&k.browser!==null?U.browser=String(k.browser):U.browser="",k.browserVersion!==void 0&&k.browserVersion!==null?U.browserVersion=String(k.browserVersion):U.browserVersion="",U},toJSON(k){const U={};return k.sdk!==void 0&&(U.sdk=ne(k.sdk)),k.version!==void 0&&(U.version=k.version),k.protocol!==void 0&&(U.protocol=k.protocol),k.os!==void 0&&(U.os=k.os),k.osVersion!==void 0&&(U.osVersion=k.osVersion),k.deviceModel!==void 0&&(U.deviceModel=k.deviceModel),k.browser!==void 0&&(U.browser=k.browser),k.browserVersion!==void 0&&(U.browserVersion=k.browserVersion),U},fromPartial(k){var U,ee,de,ae,fe,Ee,Pe,Se;const Ie=Object.assign({},me);return Ie.sdk=(U=k.sdk)!==null&&U!==void 0?U:0,Ie.version=(ee=k.version)!==null&&ee!==void 0?ee:"",Ie.protocol=(de=k.protocol)!==null&&de!==void 0?de:0,Ie.os=(ae=k.os)!==null&&ae!==void 0?ae:"",Ie.osVersion=(fe=k.osVersion)!==null&&fe!==void 0?fe:"",Ie.deviceModel=(Ee=k.deviceModel)!==null&&Ee!==void 0?Ee:"",Ie.browser=(Pe=k.browser)!==null&&Pe!==void 0?Pe:"",Ie.browserVersion=(Se=k.browserVersion)!==null&&Se!==void 0?Se:"",Ie}};var ve=(()=>{if(typeof ve!="undefined")return ve;if(typeof self!="undefined")return self;if(typeof window!="undefined")return window;if(typeof commonjsGlobal!="undefined")return commonjsGlobal;throw"Unable to locate global object"})();const ye=ve.atob||(k=>ve.Buffer.from(k,"base64").toString("binary"));function v(k){const U=ye(k),ee=new Uint8Array(U.length);for(let de=0;de<U.length;++de)ee[de]=U.charCodeAt(de);return ee}const T=ve.btoa||(k=>ve.Buffer.from(k,"binary").toString("base64"));function L(k){const U=[];for(const ee of k)U.push(String.fromCharCode(ee));return T(U.join(""))}function oe(k){if(k.gt(Number.MAX_SAFE_INTEGER))throw new ve.Error("Value is larger than Number.MAX_SAFE_INTEGER");return k.toNumber()}d.default.util.Long!==u.default&&(d.default.util.Long=u.default,d.default.configure())})(livekit_models);var LocalParticipant$1={},livekit_rtc={};(function(a){var s=commonjsGlobal&&commonjsGlobal.__importDefault||function(v){return v&&v.__esModule?v:{default:v}};Object.defineProperty(a,"__esModule",{value:!0}),a.SimulateScenario=a.SyncState=a.SubscriptionPermissionUpdate=a.UpdateSubscriptionPermissions=a.TrackPermission=a.SubscribedQualityUpdate=a.SubscribedQuality=a.StreamStateUpdate=a.StreamStateInfo=a.ConnectionQualityUpdate=a.ConnectionQualityInfo=a.RoomUpdate=a.SpeakersChanged=a.ICEServer=a.UpdateVideoLayers=a.LeaveRequest=a.UpdateTrackSettings=a.UpdateSubscription=a.ParticipantUpdate=a.SessionDescription=a.TrackPublishedResponse=a.JoinResponse=a.MuteTrackRequest=a.TrickleRequest=a.AddTrackRequest=a.SignalResponse=a.SignalRequest=a.streamStateToJSON=a.streamStateFromJSON=a.StreamState=a.signalTargetToJSON=a.signalTargetFromJSON=a.SignalTarget=a.protobufPackage=void 0;const u=s(umd.exports),d=s(minimal),l=livekit_models;a.protobufPackage="livekit";var p;(function(v){v[v.PUBLISHER=0]="PUBLISHER",v[v.SUBSCRIBER=1]="SUBSCRIBER",v[v.UNRECOGNIZED=-1]="UNRECOGNIZED"})(p=a.SignalTarget||(a.SignalTarget={}));function h(v){switch(v){case 0:case"PUBLISHER":return p.PUBLISHER;case 1:case"SUBSCRIBER":return p.SUBSCRIBER;case-1:case"UNRECOGNIZED":default:return p.UNRECOGNIZED}}a.signalTargetFromJSON=h;function y(v){switch(v){case p.PUBLISHER:return"PUBLISHER";case p.SUBSCRIBER:return"SUBSCRIBER";default:return"UNKNOWN"}}a.signalTargetToJSON=y;var _;(function(v){v[v.ACTIVE=0]="ACTIVE",v[v.PAUSED=1]="PAUSED",v[v.UNRECOGNIZED=-1]="UNRECOGNIZED"})(_=a.StreamState||(a.StreamState={}));function E(v){switch(v){case 0:case"ACTIVE":return _.ACTIVE;case 1:case"PAUSED":return _.PAUSED;case-1:case"UNRECOGNIZED":default:return _.UNRECOGNIZED}}a.streamStateFromJSON=E;function I(v){switch(v){case _.ACTIVE:return"ACTIVE";case _.PAUSED:return"PAUSED";default:return"UNKNOWN"}}a.streamStateToJSON=I;const N={};a.SignalRequest={encode(v,T=d.default.Writer.create()){return v.offer!==void 0&&a.SessionDescription.encode(v.offer,T.uint32(10).fork()).ldelim(),v.answer!==void 0&&a.SessionDescription.encode(v.answer,T.uint32(18).fork()).ldelim(),v.trickle!==void 0&&a.TrickleRequest.encode(v.trickle,T.uint32(26).fork()).ldelim(),v.addTrack!==void 0&&a.AddTrackRequest.encode(v.addTrack,T.uint32(34).fork()).ldelim(),v.mute!==void 0&&a.MuteTrackRequest.encode(v.mute,T.uint32(42).fork()).ldelim(),v.subscription!==void 0&&a.UpdateSubscription.encode(v.subscription,T.uint32(50).fork()).ldelim(),v.trackSetting!==void 0&&a.UpdateTrackSettings.encode(v.trackSetting,T.uint32(58).fork()).ldelim(),v.leave!==void 0&&a.LeaveRequest.encode(v.leave,T.uint32(66).fork()).ldelim(),v.updateLayers!==void 0&&a.UpdateVideoLayers.encode(v.updateLayers,T.uint32(82).fork()).ldelim(),v.subscriptionPermissions!==void 0&&a.UpdateSubscriptionPermissions.encode(v.subscriptionPermissions,T.uint32(90).fork()).ldelim(),v.syncState!==void 0&&a.SyncState.encode(v.syncState,T.uint32(98).fork()).ldelim(),v.simulate!==void 0&&a.SimulateScenario.encode(v.simulate,T.uint32(106).fork()).ldelim(),T},decode(v,T){const L=v instanceof d.default.Reader?v:new d.default.Reader(v);let oe=T===void 0?L.len:L.pos+T;const k=Object.assign({},N);for(;L.pos<oe;){const U=L.uint32();switch(U>>>3){case 1:k.offer=a.SessionDescription.decode(L,L.uint32());break;case 2:k.answer=a.SessionDescription.decode(L,L.uint32());break;case 3:k.trickle=a.TrickleRequest.decode(L,L.uint32());break;case 4:k.addTrack=a.AddTrackRequest.decode(L,L.uint32());break;case 5:k.mute=a.MuteTrackRequest.decode(L,L.uint32());break;case 6:k.subscription=a.UpdateSubscription.decode(L,L.uint32());break;case 7:k.trackSetting=a.UpdateTrackSettings.decode(L,L.uint32());break;case 8:k.leave=a.LeaveRequest.decode(L,L.uint32());break;case 10:k.updateLayers=a.UpdateVideoLayers.decode(L,L.uint32());break;case 11:k.subscriptionPermissions=a.UpdateSubscriptionPermissions.decode(L,L.uint32());break;case 12:k.syncState=a.SyncState.decode(L,L.uint32());break;case 13:k.simulate=a.SimulateScenario.decode(L,L.uint32());break;default:L.skipType(U&7);break}}return k},fromJSON(v){const T=Object.assign({},N);return v.offer!==void 0&&v.offer!==null?T.offer=a.SessionDescription.fromJSON(v.offer):T.offer=void 0,v.answer!==void 0&&v.answer!==null?T.answer=a.SessionDescription.fromJSON(v.answer):T.answer=void 0,v.trickle!==void 0&&v.trickle!==null?T.trickle=a.TrickleRequest.fromJSON(v.trickle):T.trickle=void 0,v.addTrack!==void 0&&v.addTrack!==null?T.addTrack=a.AddTrackRequest.fromJSON(v.addTrack):T.addTrack=void 0,v.mute!==void 0&&v.mute!==null?T.mute=a.MuteTrackRequest.fromJSON(v.mute):T.mute=void 0,v.subscription!==void 0&&v.subscription!==null?T.subscription=a.UpdateSubscription.fromJSON(v.subscription):T.subscription=void 0,v.trackSetting!==void 0&&v.trackSetting!==null?T.trackSetting=a.UpdateTrackSettings.fromJSON(v.trackSetting):T.trackSetting=void 0,v.leave!==void 0&&v.leave!==null?T.leave=a.LeaveRequest.fromJSON(v.leave):T.leave=void 0,v.updateLayers!==void 0&&v.updateLayers!==null?T.updateLayers=a.UpdateVideoLayers.fromJSON(v.updateLayers):T.updateLayers=void 0,v.subscriptionPermissions!==void 0&&v.subscriptionPermissions!==null?T.subscriptionPermissions=a.UpdateSubscriptionPermissions.fromJSON(v.subscriptionPermissions):T.subscriptionPermissions=void 0,v.syncState!==void 0&&v.syncState!==null?T.syncState=a.SyncState.fromJSON(v.syncState):T.syncState=void 0,v.simulate!==void 0&&v.simulate!==null?T.simulate=a.SimulateScenario.fromJSON(v.simulate):T.simulate=void 0,T},toJSON(v){const T={};return v.offer!==void 0&&(T.offer=v.offer?a.SessionDescription.toJSON(v.offer):void 0),v.answer!==void 0&&(T.answer=v.answer?a.SessionDescription.toJSON(v.answer):void 0),v.trickle!==void 0&&(T.trickle=v.trickle?a.TrickleRequest.toJSON(v.trickle):void 0),v.addTrack!==void 0&&(T.addTrack=v.addTrack?a.AddTrackRequest.toJSON(v.addTrack):void 0),v.mute!==void 0&&(T.mute=v.mute?a.MuteTrackRequest.toJSON(v.mute):void 0),v.subscription!==void 0&&(T.subscription=v.subscription?a.UpdateSubscription.toJSON(v.subscription):void 0),v.trackSetting!==void 0&&(T.trackSetting=v.trackSetting?a.UpdateTrackSettings.toJSON(v.trackSetting):void 0),v.leave!==void 0&&(T.leave=v.leave?a.LeaveRequest.toJSON(v.leave):void 0),v.updateLayers!==void 0&&(T.updateLayers=v.updateLayers?a.UpdateVideoLayers.toJSON(v.updateLayers):void 0),v.subscriptionPermissions!==void 0&&(T.subscriptionPermissions=v.subscriptionPermissions?a.UpdateSubscriptionPermissions.toJSON(v.subscriptionPermissions):void 0),v.syncState!==void 0&&(T.syncState=v.syncState?a.SyncState.toJSON(v.syncState):void 0),v.simulate!==void 0&&(T.simulate=v.simulate?a.SimulateScenario.toJSON(v.simulate):void 0),T},fromPartial(v){const T=Object.assign({},N);return v.offer!==void 0&&v.offer!==null?T.offer=a.SessionDescription.fromPartial(v.offer):T.offer=void 0,v.answer!==void 0&&v.answer!==null?T.answer=a.SessionDescription.fromPartial(v.answer):T.answer=void 0,v.trickle!==void 0&&v.trickle!==null?T.trickle=a.TrickleRequest.fromPartial(v.trickle):T.trickle=void 0,v.addTrack!==void 0&&v.addTrack!==null?T.addTrack=a.AddTrackRequest.fromPartial(v.addTrack):T.addTrack=void 0,v.mute!==void 0&&v.mute!==null?T.mute=a.MuteTrackRequest.fromPartial(v.mute):T.mute=void 0,v.subscription!==void 0&&v.subscription!==null?T.subscription=a.UpdateSubscription.fromPartial(v.subscription):T.subscription=void 0,v.trackSetting!==void 0&&v.trackSetting!==null?T.trackSetting=a.UpdateTrackSettings.fromPartial(v.trackSetting):T.trackSetting=void 0,v.leave!==void 0&&v.leave!==null?T.leave=a.LeaveRequest.fromPartial(v.leave):T.leave=void 0,v.updateLayers!==void 0&&v.updateLayers!==null?T.updateLayers=a.UpdateVideoLayers.fromPartial(v.updateLayers):T.updateLayers=void 0,v.subscriptionPermissions!==void 0&&v.subscriptionPermissions!==null?T.subscriptionPermissions=a.UpdateSubscriptionPermissions.fromPartial(v.subscriptionPermissions):T.subscriptionPermissions=void 0,v.syncState!==void 0&&v.syncState!==null?T.syncState=a.SyncState.fromPartial(v.syncState):T.syncState=void 0,v.simulate!==void 0&&v.simulate!==null?T.simulate=a.SimulateScenario.fromPartial(v.simulate):T.simulate=void 0,T}};const w={};a.SignalResponse={encode(v,T=d.default.Writer.create()){return v.join!==void 0&&a.JoinResponse.encode(v.join,T.uint32(10).fork()).ldelim(),v.answer!==void 0&&a.SessionDescription.encode(v.answer,T.uint32(18).fork()).ldelim(),v.offer!==void 0&&a.SessionDescription.encode(v.offer,T.uint32(26).fork()).ldelim(),v.trickle!==void 0&&a.TrickleRequest.encode(v.trickle,T.uint32(34).fork()).ldelim(),v.update!==void 0&&a.ParticipantUpdate.encode(v.update,T.uint32(42).fork()).ldelim(),v.trackPublished!==void 0&&a.TrackPublishedResponse.encode(v.trackPublished,T.uint32(50).fork()).ldelim(),v.leave!==void 0&&a.LeaveRequest.encode(v.leave,T.uint32(66).fork()).ldelim(),v.mute!==void 0&&a.MuteTrackRequest.encode(v.mute,T.uint32(74).fork()).ldelim(),v.speakersChanged!==void 0&&a.SpeakersChanged.encode(v.speakersChanged,T.uint32(82).fork()).ldelim(),v.roomUpdate!==void 0&&a.RoomUpdate.encode(v.roomUpdate,T.uint32(90).fork()).ldelim(),v.connectionQuality!==void 0&&a.ConnectionQualityUpdate.encode(v.connectionQuality,T.uint32(98).fork()).ldelim(),v.streamStateUpdate!==void 0&&a.StreamStateUpdate.encode(v.streamStateUpdate,T.uint32(106).fork()).ldelim(),v.subscribedQualityUpdate!==void 0&&a.SubscribedQualityUpdate.encode(v.subscribedQualityUpdate,T.uint32(114).fork()).ldelim(),v.subscriptionPermissionUpdate!==void 0&&a.SubscriptionPermissionUpdate.encode(v.subscriptionPermissionUpdate,T.uint32(122).fork()).ldelim(),T},decode(v,T){const L=v instanceof d.default.Reader?v:new d.default.Reader(v);let oe=T===void 0?L.len:L.pos+T;const k=Object.assign({},w);for(;L.pos<oe;){const U=L.uint32();switch(U>>>3){case 1:k.join=a.JoinResponse.decode(L,L.uint32());break;case 2:k.answer=a.SessionDescription.decode(L,L.uint32());break;case 3:k.offer=a.SessionDescription.decode(L,L.uint32());break;case 4:k.trickle=a.TrickleRequest.decode(L,L.uint32());break;case 5:k.update=a.ParticipantUpdate.decode(L,L.uint32());break;case 6:k.trackPublished=a.TrackPublishedResponse.decode(L,L.uint32());break;case 8:k.leave=a.LeaveRequest.decode(L,L.uint32());break;case 9:k.mute=a.MuteTrackRequest.decode(L,L.uint32());break;case 10:k.speakersChanged=a.SpeakersChanged.decode(L,L.uint32());break;case 11:k.roomUpdate=a.RoomUpdate.decode(L,L.uint32());break;case 12:k.connectionQuality=a.ConnectionQualityUpdate.decode(L,L.uint32());break;case 13:k.streamStateUpdate=a.StreamStateUpdate.decode(L,L.uint32());break;case 14:k.subscribedQualityUpdate=a.SubscribedQualityUpdate.decode(L,L.uint32());break;case 15:k.subscriptionPermissionUpdate=a.SubscriptionPermissionUpdate.decode(L,L.uint32());break;default:L.skipType(U&7);break}}return k},fromJSON(v){const T=Object.assign({},w);return v.join!==void 0&&v.join!==null?T.join=a.JoinResponse.fromJSON(v.join):T.join=void 0,v.answer!==void 0&&v.answer!==null?T.answer=a.SessionDescription.fromJSON(v.answer):T.answer=void 0,v.offer!==void 0&&v.offer!==null?T.offer=a.SessionDescription.fromJSON(v.offer):T.offer=void 0,v.trickle!==void 0&&v.trickle!==null?T.trickle=a.TrickleRequest.fromJSON(v.trickle):T.trickle=void 0,v.update!==void 0&&v.update!==null?T.update=a.ParticipantUpdate.fromJSON(v.update):T.update=void 0,v.trackPublished!==void 0&&v.trackPublished!==null?T.trackPublished=a.TrackPublishedResponse.fromJSON(v.trackPublished):T.trackPublished=void 0,v.leave!==void 0&&v.leave!==null?T.leave=a.LeaveRequest.fromJSON(v.leave):T.leave=void 0,v.mute!==void 0&&v.mute!==null?T.mute=a.MuteTrackRequest.fromJSON(v.mute):T.mute=void 0,v.speakersChanged!==void 0&&v.speakersChanged!==null?T.speakersChanged=a.SpeakersChanged.fromJSON(v.speakersChanged):T.speakersChanged=void 0,v.roomUpdate!==void 0&&v.roomUpdate!==null?T.roomUpdate=a.RoomUpdate.fromJSON(v.roomUpdate):T.roomUpdate=void 0,v.connectionQuality!==void 0&&v.connectionQuality!==null?T.connectionQuality=a.ConnectionQualityUpdate.fromJSON(v.connectionQuality):T.connectionQuality=void 0,v.streamStateUpdate!==void 0&&v.streamStateUpdate!==null?T.streamStateUpdate=a.StreamStateUpdate.fromJSON(v.streamStateUpdate):T.streamStateUpdate=void 0,v.subscribedQualityUpdate!==void 0&&v.subscribedQualityUpdate!==null?T.subscribedQualityUpdate=a.SubscribedQualityUpdate.fromJSON(v.subscribedQualityUpdate):T.subscribedQualityUpdate=void 0,v.subscriptionPermissionUpdate!==void 0&&v.subscriptionPermissionUpdate!==null?T.subscriptionPermissionUpdate=a.SubscriptionPermissionUpdate.fromJSON(v.subscriptionPermissionUpdate):T.subscriptionPermissionUpdate=void 0,T},toJSON(v){const T={};return v.join!==void 0&&(T.join=v.join?a.JoinResponse.toJSON(v.join):void 0),v.answer!==void 0&&(T.answer=v.answer?a.SessionDescription.toJSON(v.answer):void 0),v.offer!==void 0&&(T.offer=v.offer?a.SessionDescription.toJSON(v.offer):void 0),v.trickle!==void 0&&(T.trickle=v.trickle?a.TrickleRequest.toJSON(v.trickle):void 0),v.update!==void 0&&(T.update=v.update?a.ParticipantUpdate.toJSON(v.update):void 0),v.trackPublished!==void 0&&(T.trackPublished=v.trackPublished?a.TrackPublishedResponse.toJSON(v.trackPublished):void 0),v.leave!==void 0&&(T.leave=v.leave?a.LeaveRequest.toJSON(v.leave):void 0),v.mute!==void 0&&(T.mute=v.mute?a.MuteTrackRequest.toJSON(v.mute):void 0),v.speakersChanged!==void 0&&(T.speakersChanged=v.speakersChanged?a.SpeakersChanged.toJSON(v.speakersChanged):void 0),v.roomUpdate!==void 0&&(T.roomUpdate=v.roomUpdate?a.RoomUpdate.toJSON(v.roomUpdate):void 0),v.connectionQuality!==void 0&&(T.connectionQuality=v.connectionQuality?a.ConnectionQualityUpdate.toJSON(v.connectionQuality):void 0),v.streamStateUpdate!==void 0&&(T.streamStateUpdate=v.streamStateUpdate?a.StreamStateUpdate.toJSON(v.streamStateUpdate):void 0),v.subscribedQualityUpdate!==void 0&&(T.subscribedQualityUpdate=v.subscribedQualityUpdate?a.SubscribedQualityUpdate.toJSON(v.subscribedQualityUpdate):void 0),v.subscriptionPermissionUpdate!==void 0&&(T.subscriptionPermissionUpdate=v.subscriptionPermissionUpdate?a.SubscriptionPermissionUpdate.toJSON(v.subscriptionPermissionUpdate):void 0),T},fromPartial(v){const T=Object.assign({},w);return v.join!==void 0&&v.join!==null?T.join=a.JoinResponse.fromPartial(v.join):T.join=void 0,v.answer!==void 0&&v.answer!==null?T.answer=a.SessionDescription.fromPartial(v.answer):T.answer=void 0,v.offer!==void 0&&v.offer!==null?T.offer=a.SessionDescription.fromPartial(v.offer):T.offer=void 0,v.trickle!==void 0&&v.trickle!==null?T.trickle=a.TrickleRequest.fromPartial(v.trickle):T.trickle=void 0,v.update!==void 0&&v.update!==null?T.update=a.ParticipantUpdate.fromPartial(v.update):T.update=void 0,v.trackPublished!==void 0&&v.trackPublished!==null?T.trackPublished=a.TrackPublishedResponse.fromPartial(v.trackPublished):T.trackPublished=void 0,v.leave!==void 0&&v.leave!==null?T.leave=a.LeaveRequest.fromPartial(v.leave):T.leave=void 0,v.mute!==void 0&&v.mute!==null?T.mute=a.MuteTrackRequest.fromPartial(v.mute):T.mute=void 0,v.speakersChanged!==void 0&&v.speakersChanged!==null?T.speakersChanged=a.SpeakersChanged.fromPartial(v.speakersChanged):T.speakersChanged=void 0,v.roomUpdate!==void 0&&v.roomUpdate!==null?T.roomUpdate=a.RoomUpdate.fromPartial(v.roomUpdate):T.roomUpdate=void 0,v.connectionQuality!==void 0&&v.connectionQuality!==null?T.connectionQuality=a.ConnectionQualityUpdate.fromPartial(v.connectionQuality):T.connectionQuality=void 0,v.streamStateUpdate!==void 0&&v.streamStateUpdate!==null?T.streamStateUpdate=a.StreamStateUpdate.fromPartial(v.streamStateUpdate):T.streamStateUpdate=void 0,v.subscribedQualityUpdate!==void 0&&v.subscribedQualityUpdate!==null?T.subscribedQualityUpdate=a.SubscribedQualityUpdate.fromPartial(v.subscribedQualityUpdate):T.subscribedQualityUpdate=void 0,v.subscriptionPermissionUpdate!==void 0&&v.subscriptionPermissionUpdate!==null?T.subscriptionPermissionUpdate=a.SubscriptionPermissionUpdate.fromPartial(v.subscriptionPermissionUpdate):T.subscriptionPermissionUpdate=void 0,T}};const C={cid:"",name:"",type:0,width:0,height:0,muted:!1,disableDtx:!1,source:0};a.AddTrackRequest={encode(v,T=d.default.Writer.create()){v.cid!==""&&T.uint32(10).string(v.cid),v.name!==""&&T.uint32(18).string(v.name),v.type!==0&&T.uint32(24).int32(v.type),v.width!==0&&T.uint32(32).uint32(v.width),v.height!==0&&T.uint32(40).uint32(v.height),v.muted===!0&&T.uint32(48).bool(v.muted),v.disableDtx===!0&&T.uint32(56).bool(v.disableDtx),v.source!==0&&T.uint32(64).int32(v.source);for(const L of v.layers)l.VideoLayer.encode(L,T.uint32(74).fork()).ldelim();return T},decode(v,T){const L=v instanceof d.default.Reader?v:new d.default.Reader(v);let oe=T===void 0?L.len:L.pos+T;const k=Object.assign({},C);for(k.layers=[];L.pos<oe;){const U=L.uint32();switch(U>>>3){case 1:k.cid=L.string();break;case 2:k.name=L.string();break;case 3:k.type=L.int32();break;case 4:k.width=L.uint32();break;case 5:k.height=L.uint32();break;case 6:k.muted=L.bool();break;case 7:k.disableDtx=L.bool();break;case 8:k.source=L.int32();break;case 9:k.layers.push(l.VideoLayer.decode(L,L.uint32()));break;default:L.skipType(U&7);break}}return k},fromJSON(v){const T=Object.assign({},C);if(T.layers=[],v.cid!==void 0&&v.cid!==null?T.cid=String(v.cid):T.cid="",v.name!==void 0&&v.name!==null?T.name=String(v.name):T.name="",v.type!==void 0&&v.type!==null?T.type=l.trackTypeFromJSON(v.type):T.type=0,v.width!==void 0&&v.width!==null?T.width=Number(v.width):T.width=0,v.height!==void 0&&v.height!==null?T.height=Number(v.height):T.height=0,v.muted!==void 0&&v.muted!==null?T.muted=Boolean(v.muted):T.muted=!1,v.disableDtx!==void 0&&v.disableDtx!==null?T.disableDtx=Boolean(v.disableDtx):T.disableDtx=!1,v.source!==void 0&&v.source!==null?T.source=l.trackSourceFromJSON(v.source):T.source=0,v.layers!==void 0&&v.layers!==null)for(const L of v.layers)T.layers.push(l.VideoLayer.fromJSON(L));return T},toJSON(v){const T={};return v.cid!==void 0&&(T.cid=v.cid),v.name!==void 0&&(T.name=v.name),v.type!==void 0&&(T.type=l.trackTypeToJSON(v.type)),v.width!==void 0&&(T.width=v.width),v.height!==void 0&&(T.height=v.height),v.muted!==void 0&&(T.muted=v.muted),v.disableDtx!==void 0&&(T.disableDtx=v.disableDtx),v.source!==void 0&&(T.source=l.trackSourceToJSON(v.source)),v.layers?T.layers=v.layers.map(L=>L?l.VideoLayer.toJSON(L):void 0):T.layers=[],T},fromPartial(v){var T,L,oe,k,U,ee,de,ae;const fe=Object.assign({},C);if(fe.cid=(T=v.cid)!==null&&T!==void 0?T:"",fe.name=(L=v.name)!==null&&L!==void 0?L:"",fe.type=(oe=v.type)!==null&&oe!==void 0?oe:0,fe.width=(k=v.width)!==null&&k!==void 0?k:0,fe.height=(U=v.height)!==null&&U!==void 0?U:0,fe.muted=(ee=v.muted)!==null&&ee!==void 0?ee:!1,fe.disableDtx=(de=v.disableDtx)!==null&&de!==void 0?de:!1,fe.source=(ae=v.source)!==null&&ae!==void 0?ae:0,fe.layers=[],v.layers!==void 0&&v.layers!==null)for(const Ee of v.layers)fe.layers.push(l.VideoLayer.fromPartial(Ee));return fe}};const D={candidateInit:"",target:0};a.TrickleRequest={encode(v,T=d.default.Writer.create()){return v.candidateInit!==""&&T.uint32(10).string(v.candidateInit),v.target!==0&&T.uint32(16).int32(v.target),T},decode(v,T){const L=v instanceof d.default.Reader?v:new d.default.Reader(v);let oe=T===void 0?L.len:L.pos+T;const k=Object.assign({},D);for(;L.pos<oe;){const U=L.uint32();switch(U>>>3){case 1:k.candidateInit=L.string();break;case 2:k.target=L.int32();break;default:L.skipType(U&7);break}}return k},fromJSON(v){const T=Object.assign({},D);return v.candidateInit!==void 0&&v.candidateInit!==null?T.candidateInit=String(v.candidateInit):T.candidateInit="",v.target!==void 0&&v.target!==null?T.target=h(v.target):T.target=0,T},toJSON(v){const T={};return v.candidateInit!==void 0&&(T.candidateInit=v.candidateInit),v.target!==void 0&&(T.target=y(v.target)),T},fromPartial(v){var T,L;const oe=Object.assign({},D);return oe.candidateInit=(T=v.candidateInit)!==null&&T!==void 0?T:"",oe.target=(L=v.target)!==null&&L!==void 0?L:0,oe}};const V={sid:"",muted:!1};a.MuteTrackRequest={encode(v,T=d.default.Writer.create()){return v.sid!==""&&T.uint32(10).string(v.sid),v.muted===!0&&T.uint32(16).bool(v.muted),T},decode(v,T){const L=v instanceof d.default.Reader?v:new d.default.Reader(v);let oe=T===void 0?L.len:L.pos+T;const k=Object.assign({},V);for(;L.pos<oe;){const U=L.uint32();switch(U>>>3){case 1:k.sid=L.string();break;case 2:k.muted=L.bool();break;default:L.skipType(U&7);break}}return k},fromJSON(v){const T=Object.assign({},V);return v.sid!==void 0&&v.sid!==null?T.sid=String(v.sid):T.sid="",v.muted!==void 0&&v.muted!==null?T.muted=Boolean(v.muted):T.muted=!1,T},toJSON(v){const T={};return v.sid!==void 0&&(T.sid=v.sid),v.muted!==void 0&&(T.muted=v.muted),T},fromPartial(v){var T,L;const oe=Object.assign({},V);return oe.sid=(T=v.sid)!==null&&T!==void 0?T:"",oe.muted=(L=v.muted)!==null&&L!==void 0?L:!1,oe}};const J={serverVersion:"",subscriberPrimary:!1,alternativeUrl:""};a.JoinResponse={encode(v,T=d.default.Writer.create()){v.room!==void 0&&l.Room.encode(v.room,T.uint32(10).fork()).ldelim(),v.participant!==void 0&&l.ParticipantInfo.encode(v.participant,T.uint32(18).fork()).ldelim();for(const L of v.otherParticipants)l.ParticipantInfo.encode(L,T.uint32(26).fork()).ldelim();v.serverVersion!==""&&T.uint32(34).string(v.serverVersion);for(const L of v.iceServers)a.ICEServer.encode(L,T.uint32(42).fork()).ldelim();return v.subscriberPrimary===!0&&T.uint32(48).bool(v.subscriberPrimary),v.alternativeUrl!==""&&T.uint32(58).string(v.alternativeUrl),T},decode(v,T){const L=v instanceof d.default.Reader?v:new d.default.Reader(v);let oe=T===void 0?L.len:L.pos+T;const k=Object.assign({},J);for(k.otherParticipants=[],k.iceServers=[];L.pos<oe;){const U=L.uint32();switch(U>>>3){case 1:k.room=l.Room.decode(L,L.uint32());break;case 2:k.participant=l.ParticipantInfo.decode(L,L.uint32());break;case 3:k.otherParticipants.push(l.ParticipantInfo.decode(L,L.uint32()));break;case 4:k.serverVersion=L.string();break;case 5:k.iceServers.push(a.ICEServer.decode(L,L.uint32()));break;case 6:k.subscriberPrimary=L.bool();break;case 7:k.alternativeUrl=L.string();break;default:L.skipType(U&7);break}}return k},fromJSON(v){const T=Object.assign({},J);if(T.otherParticipants=[],T.iceServers=[],v.room!==void 0&&v.room!==null?T.room=l.Room.fromJSON(v.room):T.room=void 0,v.participant!==void 0&&v.participant!==null?T.participant=l.ParticipantInfo.fromJSON(v.participant):T.participant=void 0,v.otherParticipants!==void 0&&v.otherParticipants!==null)for(const L of v.otherParticipants)T.otherParticipants.push(l.ParticipantInfo.fromJSON(L));if(v.serverVersion!==void 0&&v.serverVersion!==null?T.serverVersion=String(v.serverVersion):T.serverVersion="",v.iceServers!==void 0&&v.iceServers!==null)for(const L of v.iceServers)T.iceServers.push(a.ICEServer.fromJSON(L));return v.subscriberPrimary!==void 0&&v.subscriberPrimary!==null?T.subscriberPrimary=Boolean(v.subscriberPrimary):T.subscriberPrimary=!1,v.alternativeUrl!==void 0&&v.alternativeUrl!==null?T.alternativeUrl=String(v.alternativeUrl):T.alternativeUrl="",T},toJSON(v){const T={};return v.room!==void 0&&(T.room=v.room?l.Room.toJSON(v.room):void 0),v.participant!==void 0&&(T.participant=v.participant?l.ParticipantInfo.toJSON(v.participant):void 0),v.otherParticipants?T.otherParticipants=v.otherParticipants.map(L=>L?l.ParticipantInfo.toJSON(L):void 0):T.otherParticipants=[],v.serverVersion!==void 0&&(T.serverVersion=v.serverVersion),v.iceServers?T.iceServers=v.iceServers.map(L=>L?a.ICEServer.toJSON(L):void 0):T.iceServers=[],v.subscriberPrimary!==void 0&&(T.subscriberPrimary=v.subscriberPrimary),v.alternativeUrl!==void 0&&(T.alternativeUrl=v.alternativeUrl),T},fromPartial(v){var T,L,oe;const k=Object.assign({},J);if(v.room!==void 0&&v.room!==null?k.room=l.Room.fromPartial(v.room):k.room=void 0,v.participant!==void 0&&v.participant!==null?k.participant=l.ParticipantInfo.fromPartial(v.participant):k.participant=void 0,k.otherParticipants=[],v.otherParticipants!==void 0&&v.otherParticipants!==null)for(const U of v.otherParticipants)k.otherParticipants.push(l.ParticipantInfo.fromPartial(U));if(k.serverVersion=(T=v.serverVersion)!==null&&T!==void 0?T:"",k.iceServers=[],v.iceServers!==void 0&&v.iceServers!==null)for(const U of v.iceServers)k.iceServers.push(a.ICEServer.fromPartial(U));return k.subscriberPrimary=(L=v.subscriberPrimary)!==null&&L!==void 0?L:!1,k.alternativeUrl=(oe=v.alternativeUrl)!==null&&oe!==void 0?oe:"",k}};const W={cid:""};a.TrackPublishedResponse={encode(v,T=d.default.Writer.create()){return v.cid!==""&&T.uint32(10).string(v.cid),v.track!==void 0&&l.TrackInfo.encode(v.track,T.uint32(18).fork()).ldelim(),T},decode(v,T){const L=v instanceof d.default.Reader?v:new d.default.Reader(v);let oe=T===void 0?L.len:L.pos+T;const k=Object.assign({},W);for(;L.pos<oe;){const U=L.uint32();switch(U>>>3){case 1:k.cid=L.string();break;case 2:k.track=l.TrackInfo.decode(L,L.uint32());break;default:L.skipType(U&7);break}}return k},fromJSON(v){const T=Object.assign({},W);return v.cid!==void 0&&v.cid!==null?T.cid=String(v.cid):T.cid="",v.track!==void 0&&v.track!==null?T.track=l.TrackInfo.fromJSON(v.track):T.track=void 0,T},toJSON(v){const T={};return v.cid!==void 0&&(T.cid=v.cid),v.track!==void 0&&(T.track=v.track?l.TrackInfo.toJSON(v.track):void 0),T},fromPartial(v){var T;const L=Object.assign({},W);return L.cid=(T=v.cid)!==null&&T!==void 0?T:"",v.track!==void 0&&v.track!==null?L.track=l.TrackInfo.fromPartial(v.track):L.track=void 0,L}};const g={type:"",sdp:""};a.SessionDescription={encode(v,T=d.default.Writer.create()){return v.type!==""&&T.uint32(10).string(v.type),v.sdp!==""&&T.uint32(18).string(v.sdp),T},decode(v,T){const L=v instanceof d.default.Reader?v:new d.default.Reader(v);let oe=T===void 0?L.len:L.pos+T;const k=Object.assign({},g);for(;L.pos<oe;){const U=L.uint32();switch(U>>>3){case 1:k.type=L.string();break;case 2:k.sdp=L.string();break;default:L.skipType(U&7);break}}return k},fromJSON(v){const T=Object.assign({},g);return v.type!==void 0&&v.type!==null?T.type=String(v.type):T.type="",v.sdp!==void 0&&v.sdp!==null?T.sdp=String(v.sdp):T.sdp="",T},toJSON(v){const T={};return v.type!==void 0&&(T.type=v.type),v.sdp!==void 0&&(T.sdp=v.sdp),T},fromPartial(v){var T,L;const oe=Object.assign({},g);return oe.type=(T=v.type)!==null&&T!==void 0?T:"",oe.sdp=(L=v.sdp)!==null&&L!==void 0?L:"",oe}};const O={};a.ParticipantUpdate={encode(v,T=d.default.Writer.create()){for(const L of v.participants)l.ParticipantInfo.encode(L,T.uint32(10).fork()).ldelim();return T},decode(v,T){const L=v instanceof d.default.Reader?v:new d.default.Reader(v);let oe=T===void 0?L.len:L.pos+T;const k=Object.assign({},O);for(k.participants=[];L.pos<oe;){const U=L.uint32();switch(U>>>3){case 1:k.participants.push(l.ParticipantInfo.decode(L,L.uint32()));break;default:L.skipType(U&7);break}}return k},fromJSON(v){const T=Object.assign({},O);if(T.participants=[],v.participants!==void 0&&v.participants!==null)for(const L of v.participants)T.participants.push(l.ParticipantInfo.fromJSON(L));return T},toJSON(v){const T={};return v.participants?T.participants=v.participants.map(L=>L?l.ParticipantInfo.toJSON(L):void 0):T.participants=[],T},fromPartial(v){const T=Object.assign({},O);if(T.participants=[],v.participants!==void 0&&v.participants!==null)for(const L of v.participants)T.participants.push(l.ParticipantInfo.fromPartial(L));return T}};const $={trackSids:"",subscribe:!1};a.UpdateSubscription={encode(v,T=d.default.Writer.create()){for(const L of v.trackSids)T.uint32(10).string(L);v.subscribe===!0&&T.uint32(16).bool(v.subscribe);for(const L of v.participantTracks)l.ParticipantTracks.encode(L,T.uint32(26).fork()).ldelim();return T},decode(v,T){const L=v instanceof d.default.Reader?v:new d.default.Reader(v);let oe=T===void 0?L.len:L.pos+T;const k=Object.assign({},$);for(k.trackSids=[],k.participantTracks=[];L.pos<oe;){const U=L.uint32();switch(U>>>3){case 1:k.trackSids.push(L.string());break;case 2:k.subscribe=L.bool();break;case 3:k.participantTracks.push(l.ParticipantTracks.decode(L,L.uint32()));break;default:L.skipType(U&7);break}}return k},fromJSON(v){const T=Object.assign({},$);if(T.trackSids=[],T.participantTracks=[],v.trackSids!==void 0&&v.trackSids!==null)for(const L of v.trackSids)T.trackSids.push(String(L));if(v.subscribe!==void 0&&v.subscribe!==null?T.subscribe=Boolean(v.subscribe):T.subscribe=!1,v.participantTracks!==void 0&&v.participantTracks!==null)for(const L of v.participantTracks)T.participantTracks.push(l.ParticipantTracks.fromJSON(L));return T},toJSON(v){const T={};return v.trackSids?T.trackSids=v.trackSids.map(L=>L):T.trackSids=[],v.subscribe!==void 0&&(T.subscribe=v.subscribe),v.participantTracks?T.participantTracks=v.participantTracks.map(L=>L?l.ParticipantTracks.toJSON(L):void 0):T.participantTracks=[],T},fromPartial(v){var T;const L=Object.assign({},$);if(L.trackSids=[],v.trackSids!==void 0&&v.trackSids!==null)for(const oe of v.trackSids)L.trackSids.push(oe);if(L.subscribe=(T=v.subscribe)!==null&&T!==void 0?T:!1,L.participantTracks=[],v.participantTracks!==void 0&&v.participantTracks!==null)for(const oe of v.participantTracks)L.participantTracks.push(l.ParticipantTracks.fromPartial(oe));return L}};const x={trackSids:"",disabled:!1,quality:0,width:0,height:0};a.UpdateTrackSettings={encode(v,T=d.default.Writer.create()){for(const L of v.trackSids)T.uint32(10).string(L);return v.disabled===!0&&T.uint32(24).bool(v.disabled),v.quality!==0&&T.uint32(32).int32(v.quality),v.width!==0&&T.uint32(40).uint32(v.width),v.height!==0&&T.uint32(48).uint32(v.height),T},decode(v,T){const L=v instanceof d.default.Reader?v:new d.default.Reader(v);let oe=T===void 0?L.len:L.pos+T;const k=Object.assign({},x);for(k.trackSids=[];L.pos<oe;){const U=L.uint32();switch(U>>>3){case 1:k.trackSids.push(L.string());break;case 3:k.disabled=L.bool();break;case 4:k.quality=L.int32();break;case 5:k.width=L.uint32();break;case 6:k.height=L.uint32();break;default:L.skipType(U&7);break}}return k},fromJSON(v){const T=Object.assign({},x);if(T.trackSids=[],v.trackSids!==void 0&&v.trackSids!==null)for(const L of v.trackSids)T.trackSids.push(String(L));return v.disabled!==void 0&&v.disabled!==null?T.disabled=Boolean(v.disabled):T.disabled=!1,v.quality!==void 0&&v.quality!==null?T.quality=l.videoQualityFromJSON(v.quality):T.quality=0,v.width!==void 0&&v.width!==null?T.width=Number(v.width):T.width=0,v.height!==void 0&&v.height!==null?T.height=Number(v.height):T.height=0,T},toJSON(v){const T={};return v.trackSids?T.trackSids=v.trackSids.map(L=>L):T.trackSids=[],v.disabled!==void 0&&(T.disabled=v.disabled),v.quality!==void 0&&(T.quality=l.videoQualityToJSON(v.quality)),v.width!==void 0&&(T.width=v.width),v.height!==void 0&&(T.height=v.height),T},fromPartial(v){var T,L,oe,k;const U=Object.assign({},x);if(U.trackSids=[],v.trackSids!==void 0&&v.trackSids!==null)for(const ee of v.trackSids)U.trackSids.push(ee);return U.disabled=(T=v.disabled)!==null&&T!==void 0?T:!1,U.quality=(L=v.quality)!==null&&L!==void 0?L:0,U.width=(oe=v.width)!==null&&oe!==void 0?oe:0,U.height=(k=v.height)!==null&&k!==void 0?k:0,U}};const Y={canReconnect:!1};a.LeaveRequest={encode(v,T=d.default.Writer.create()){return v.canReconnect===!0&&T.uint32(8).bool(v.canReconnect),T},decode(v,T){const L=v instanceof d.default.Reader?v:new d.default.Reader(v);let oe=T===void 0?L.len:L.pos+T;const k=Object.assign({},Y);for(;L.pos<oe;){const U=L.uint32();switch(U>>>3){case 1:k.canReconnect=L.bool();break;default:L.skipType(U&7);break}}return k},fromJSON(v){const T=Object.assign({},Y);return v.canReconnect!==void 0&&v.canReconnect!==null?T.canReconnect=Boolean(v.canReconnect):T.canReconnect=!1,T},toJSON(v){const T={};return v.canReconnect!==void 0&&(T.canReconnect=v.canReconnect),T},fromPartial(v){var T;const L=Object.assign({},Y);return L.canReconnect=(T=v.canReconnect)!==null&&T!==void 0?T:!1,L}};const te={trackSid:""};a.UpdateVideoLayers={encode(v,T=d.default.Writer.create()){v.trackSid!==""&&T.uint32(10).string(v.trackSid);for(const L of v.layers)l.VideoLayer.encode(L,T.uint32(18).fork()).ldelim();return T},decode(v,T){const L=v instanceof d.default.Reader?v:new d.default.Reader(v);let oe=T===void 0?L.len:L.pos+T;const k=Object.assign({},te);for(k.layers=[];L.pos<oe;){const U=L.uint32();switch(U>>>3){case 1:k.trackSid=L.string();break;case 2:k.layers.push(l.VideoLayer.decode(L,L.uint32()));break;default:L.skipType(U&7);break}}return k},fromJSON(v){const T=Object.assign({},te);if(T.layers=[],v.trackSid!==void 0&&v.trackSid!==null?T.trackSid=String(v.trackSid):T.trackSid="",v.layers!==void 0&&v.layers!==null)for(const L of v.layers)T.layers.push(l.VideoLayer.fromJSON(L));return T},toJSON(v){const T={};return v.trackSid!==void 0&&(T.trackSid=v.trackSid),v.layers?T.layers=v.layers.map(L=>L?l.VideoLayer.toJSON(L):void 0):T.layers=[],T},fromPartial(v){var T;const L=Object.assign({},te);if(L.trackSid=(T=v.trackSid)!==null&&T!==void 0?T:"",L.layers=[],v.layers!==void 0&&v.layers!==null)for(const oe of v.layers)L.layers.push(l.VideoLayer.fromPartial(oe));return L}};const ne={urls:"",username:"",credential:""};a.ICEServer={encode(v,T=d.default.Writer.create()){for(const L of v.urls)T.uint32(10).string(L);return v.username!==""&&T.uint32(18).string(v.username),v.credential!==""&&T.uint32(26).string(v.credential),T},decode(v,T){const L=v instanceof d.default.Reader?v:new d.default.Reader(v);let oe=T===void 0?L.len:L.pos+T;const k=Object.assign({},ne);for(k.urls=[];L.pos<oe;){const U=L.uint32();switch(U>>>3){case 1:k.urls.push(L.string());break;case 2:k.username=L.string();break;case 3:k.credential=L.string();break;default:L.skipType(U&7);break}}return k},fromJSON(v){const T=Object.assign({},ne);if(T.urls=[],v.urls!==void 0&&v.urls!==null)for(const L of v.urls)T.urls.push(String(L));return v.username!==void 0&&v.username!==null?T.username=String(v.username):T.username="",v.credential!==void 0&&v.credential!==null?T.credential=String(v.credential):T.credential="",T},toJSON(v){const T={};return v.urls?T.urls=v.urls.map(L=>L):T.urls=[],v.username!==void 0&&(T.username=v.username),v.credential!==void 0&&(T.credential=v.credential),T},fromPartial(v){var T,L;const oe=Object.assign({},ne);if(oe.urls=[],v.urls!==void 0&&v.urls!==null)for(const k of v.urls)oe.urls.push(k);return oe.username=(T=v.username)!==null&&T!==void 0?T:"",oe.credential=(L=v.credential)!==null&&L!==void 0?L:"",oe}};const F={};a.SpeakersChanged={encode(v,T=d.default.Writer.create()){for(const L of v.speakers)l.SpeakerInfo.encode(L,T.uint32(10).fork()).ldelim();return T},decode(v,T){const L=v instanceof d.default.Reader?v:new d.default.Reader(v);let oe=T===void 0?L.len:L.pos+T;const k=Object.assign({},F);for(k.speakers=[];L.pos<oe;){const U=L.uint32();switch(U>>>3){case 1:k.speakers.push(l.SpeakerInfo.decode(L,L.uint32()));break;default:L.skipType(U&7);break}}return k},fromJSON(v){const T=Object.assign({},F);if(T.speakers=[],v.speakers!==void 0&&v.speakers!==null)for(const L of v.speakers)T.speakers.push(l.SpeakerInfo.fromJSON(L));return T},toJSON(v){const T={};return v.speakers?T.speakers=v.speakers.map(L=>L?l.SpeakerInfo.toJSON(L):void 0):T.speakers=[],T},fromPartial(v){const T=Object.assign({},F);if(T.speakers=[],v.speakers!==void 0&&v.speakers!==null)for(const L of v.speakers)T.speakers.push(l.SpeakerInfo.fromPartial(L));return T}};const j={};a.RoomUpdate={encode(v,T=d.default.Writer.create()){return v.room!==void 0&&l.Room.encode(v.room,T.uint32(10).fork()).ldelim(),T},decode(v,T){const L=v instanceof d.default.Reader?v:new d.default.Reader(v);let oe=T===void 0?L.len:L.pos+T;const k=Object.assign({},j);for(;L.pos<oe;){const U=L.uint32();switch(U>>>3){case 1:k.room=l.Room.decode(L,L.uint32());break;default:L.skipType(U&7);break}}return k},fromJSON(v){const T=Object.assign({},j);return v.room!==void 0&&v.room!==null?T.room=l.Room.fromJSON(v.room):T.room=void 0,T},toJSON(v){const T={};return v.room!==void 0&&(T.room=v.room?l.Room.toJSON(v.room):void 0),T},fromPartial(v){const T=Object.assign({},j);return v.room!==void 0&&v.room!==null?T.room=l.Room.fromPartial(v.room):T.room=void 0,T}};const K={participantSid:"",quality:0,score:0};a.ConnectionQualityInfo={encode(v,T=d.default.Writer.create()){return v.participantSid!==""&&T.uint32(10).string(v.participantSid),v.quality!==0&&T.uint32(16).int32(v.quality),v.score!==0&&T.uint32(29).float(v.score),T},decode(v,T){const L=v instanceof d.default.Reader?v:new d.default.Reader(v);let oe=T===void 0?L.len:L.pos+T;const k=Object.assign({},K);for(;L.pos<oe;){const U=L.uint32();switch(U>>>3){case 1:k.participantSid=L.string();break;case 2:k.quality=L.int32();break;case 3:k.score=L.float();break;default:L.skipType(U&7);break}}return k},fromJSON(v){const T=Object.assign({},K);return v.participantSid!==void 0&&v.participantSid!==null?T.participantSid=String(v.participantSid):T.participantSid="",v.quality!==void 0&&v.quality!==null?T.quality=l.connectionQualityFromJSON(v.quality):T.quality=0,v.score!==void 0&&v.score!==null?T.score=Number(v.score):T.score=0,T},toJSON(v){const T={};return v.participantSid!==void 0&&(T.participantSid=v.participantSid),v.quality!==void 0&&(T.quality=l.connectionQualityToJSON(v.quality)),v.score!==void 0&&(T.score=v.score),T},fromPartial(v){var T,L,oe;const k=Object.assign({},K);return k.participantSid=(T=v.participantSid)!==null&&T!==void 0?T:"",k.quality=(L=v.quality)!==null&&L!==void 0?L:0,k.score=(oe=v.score)!==null&&oe!==void 0?oe:0,k}};const M={};a.ConnectionQualityUpdate={encode(v,T=d.default.Writer.create()){for(const L of v.updates)a.ConnectionQualityInfo.encode(L,T.uint32(10).fork()).ldelim();return T},decode(v,T){const L=v instanceof d.default.Reader?v:new d.default.Reader(v);let oe=T===void 0?L.len:L.pos+T;const k=Object.assign({},M);for(k.updates=[];L.pos<oe;){const U=L.uint32();switch(U>>>3){case 1:k.updates.push(a.ConnectionQualityInfo.decode(L,L.uint32()));break;default:L.skipType(U&7);break}}return k},fromJSON(v){const T=Object.assign({},M);if(T.updates=[],v.updates!==void 0&&v.updates!==null)for(const L of v.updates)T.updates.push(a.ConnectionQualityInfo.fromJSON(L));return T},toJSON(v){const T={};return v.updates?T.updates=v.updates.map(L=>L?a.ConnectionQualityInfo.toJSON(L):void 0):T.updates=[],T},fromPartial(v){const T=Object.assign({},M);if(T.updates=[],v.updates!==void 0&&v.updates!==null)for(const L of v.updates)T.updates.push(a.ConnectionQualityInfo.fromPartial(L));return T}};const q={participantSid:"",trackSid:"",state:0};a.StreamStateInfo={encode(v,T=d.default.Writer.create()){return v.participantSid!==""&&T.uint32(10).string(v.participantSid),v.trackSid!==""&&T.uint32(18).string(v.trackSid),v.state!==0&&T.uint32(24).int32(v.state),T},decode(v,T){const L=v instanceof d.default.Reader?v:new d.default.Reader(v);let oe=T===void 0?L.len:L.pos+T;const k=Object.assign({},q);for(;L.pos<oe;){const U=L.uint32();switch(U>>>3){case 1:k.participantSid=L.string();break;case 2:k.trackSid=L.string();break;case 3:k.state=L.int32();break;default:L.skipType(U&7);break}}return k},fromJSON(v){const T=Object.assign({},q);return v.participantSid!==void 0&&v.participantSid!==null?T.participantSid=String(v.participantSid):T.participantSid="",v.trackSid!==void 0&&v.trackSid!==null?T.trackSid=String(v.trackSid):T.trackSid="",v.state!==void 0&&v.state!==null?T.state=E(v.state):T.state=0,T},toJSON(v){const T={};return v.participantSid!==void 0&&(T.participantSid=v.participantSid),v.trackSid!==void 0&&(T.trackSid=v.trackSid),v.state!==void 0&&(T.state=I(v.state)),T},fromPartial(v){var T,L,oe;const k=Object.assign({},q);return k.participantSid=(T=v.participantSid)!==null&&T!==void 0?T:"",k.trackSid=(L=v.trackSid)!==null&&L!==void 0?L:"",k.state=(oe=v.state)!==null&&oe!==void 0?oe:0,k}};const z={};a.StreamStateUpdate={encode(v,T=d.default.Writer.create()){for(const L of v.streamStates)a.StreamStateInfo.encode(L,T.uint32(10).fork()).ldelim();return T},decode(v,T){const L=v instanceof d.default.Reader?v:new d.default.Reader(v);let oe=T===void 0?L.len:L.pos+T;const k=Object.assign({},z);for(k.streamStates=[];L.pos<oe;){const U=L.uint32();switch(U>>>3){case 1:k.streamStates.push(a.StreamStateInfo.decode(L,L.uint32()));break;default:L.skipType(U&7);break}}return k},fromJSON(v){const T=Object.assign({},z);if(T.streamStates=[],v.streamStates!==void 0&&v.streamStates!==null)for(const L of v.streamStates)T.streamStates.push(a.StreamStateInfo.fromJSON(L));return T},toJSON(v){const T={};return v.streamStates?T.streamStates=v.streamStates.map(L=>L?a.StreamStateInfo.toJSON(L):void 0):T.streamStates=[],T},fromPartial(v){const T=Object.assign({},z);if(T.streamStates=[],v.streamStates!==void 0&&v.streamStates!==null)for(const L of v.streamStates)T.streamStates.push(a.StreamStateInfo.fromPartial(L));return T}};const le={quality:0,enabled:!1};a.SubscribedQuality={encode(v,T=d.default.Writer.create()){return v.quality!==0&&T.uint32(8).int32(v.quality),v.enabled===!0&&T.uint32(16).bool(v.enabled),T},decode(v,T){const L=v instanceof d.default.Reader?v:new d.default.Reader(v);let oe=T===void 0?L.len:L.pos+T;const k=Object.assign({},le);for(;L.pos<oe;){const U=L.uint32();switch(U>>>3){case 1:k.quality=L.int32();break;case 2:k.enabled=L.bool();break;default:L.skipType(U&7);break}}return k},fromJSON(v){const T=Object.assign({},le);return v.quality!==void 0&&v.quality!==null?T.quality=l.videoQualityFromJSON(v.quality):T.quality=0,v.enabled!==void 0&&v.enabled!==null?T.enabled=Boolean(v.enabled):T.enabled=!1,T},toJSON(v){const T={};return v.quality!==void 0&&(T.quality=l.videoQualityToJSON(v.quality)),v.enabled!==void 0&&(T.enabled=v.enabled),T},fromPartial(v){var T,L;const oe=Object.assign({},le);return oe.quality=(T=v.quality)!==null&&T!==void 0?T:0,oe.enabled=(L=v.enabled)!==null&&L!==void 0?L:!1,oe}};const re={trackSid:""};a.SubscribedQualityUpdate={encode(v,T=d.default.Writer.create()){v.trackSid!==""&&T.uint32(10).string(v.trackSid);for(const L of v.subscribedQualities)a.SubscribedQuality.encode(L,T.uint32(18).fork()).ldelim();return T},decode(v,T){const L=v instanceof d.default.Reader?v:new d.default.Reader(v);let oe=T===void 0?L.len:L.pos+T;const k=Object.assign({},re);for(k.subscribedQualities=[];L.pos<oe;){const U=L.uint32();switch(U>>>3){case 1:k.trackSid=L.string();break;case 2:k.subscribedQualities.push(a.SubscribedQuality.decode(L,L.uint32()));break;default:L.skipType(U&7);break}}return k},fromJSON(v){const T=Object.assign({},re);if(T.subscribedQualities=[],v.trackSid!==void 0&&v.trackSid!==null?T.trackSid=String(v.trackSid):T.trackSid="",v.subscribedQualities!==void 0&&v.subscribedQualities!==null)for(const L of v.subscribedQualities)T.subscribedQualities.push(a.SubscribedQuality.fromJSON(L));return T},toJSON(v){const T={};return v.trackSid!==void 0&&(T.trackSid=v.trackSid),v.subscribedQualities?T.subscribedQualities=v.subscribedQualities.map(L=>L?a.SubscribedQuality.toJSON(L):void 0):T.subscribedQualities=[],T},fromPartial(v){var T;const L=Object.assign({},re);if(L.trackSid=(T=v.trackSid)!==null&&T!==void 0?T:"",L.subscribedQualities=[],v.subscribedQualities!==void 0&&v.subscribedQualities!==null)for(const oe of v.subscribedQualities)L.subscribedQualities.push(a.SubscribedQuality.fromPartial(oe));return L}};const Q={participantSid:"",allTracks:!1,trackSids:""};a.TrackPermission={encode(v,T=d.default.Writer.create()){v.participantSid!==""&&T.uint32(10).string(v.participantSid),v.allTracks===!0&&T.uint32(16).bool(v.allTracks);for(const L of v.trackSids)T.uint32(26).string(L);return T},decode(v,T){const L=v instanceof d.default.Reader?v:new d.default.Reader(v);let oe=T===void 0?L.len:L.pos+T;const k=Object.assign({},Q);for(k.trackSids=[];L.pos<oe;){const U=L.uint32();switch(U>>>3){case 1:k.participantSid=L.string();break;case 2:k.allTracks=L.bool();break;case 3:k.trackSids.push(L.string());break;default:L.skipType(U&7);break}}return k},fromJSON(v){const T=Object.assign({},Q);if(T.trackSids=[],v.participantSid!==void 0&&v.participantSid!==null?T.participantSid=String(v.participantSid):T.participantSid="",v.allTracks!==void 0&&v.allTracks!==null?T.allTracks=Boolean(v.allTracks):T.allTracks=!1,v.trackSids!==void 0&&v.trackSids!==null)for(const L of v.trackSids)T.trackSids.push(String(L));return T},toJSON(v){const T={};return v.participantSid!==void 0&&(T.participantSid=v.participantSid),v.allTracks!==void 0&&(T.allTracks=v.allTracks),v.trackSids?T.trackSids=v.trackSids.map(L=>L):T.trackSids=[],T},fromPartial(v){var T,L;const oe=Object.assign({},Q);if(oe.participantSid=(T=v.participantSid)!==null&&T!==void 0?T:"",oe.allTracks=(L=v.allTracks)!==null&&L!==void 0?L:!1,oe.trackSids=[],v.trackSids!==void 0&&v.trackSids!==null)for(const k of v.trackSids)oe.trackSids.push(k);return oe}};const ce={allParticipants:!1};a.UpdateSubscriptionPermissions={encode(v,T=d.default.Writer.create()){v.allParticipants===!0&&T.uint32(8).bool(v.allParticipants);for(const L of v.trackPermissions)a.TrackPermission.encode(L,T.uint32(18).fork()).ldelim();return T},decode(v,T){const L=v instanceof d.default.Reader?v:new d.default.Reader(v);let oe=T===void 0?L.len:L.pos+T;const k=Object.assign({},ce);for(k.trackPermissions=[];L.pos<oe;){const U=L.uint32();switch(U>>>3){case 1:k.allParticipants=L.bool();break;case 2:k.trackPermissions.push(a.TrackPermission.decode(L,L.uint32()));break;default:L.skipType(U&7);break}}return k},fromJSON(v){const T=Object.assign({},ce);if(T.trackPermissions=[],v.allParticipants!==void 0&&v.allParticipants!==null?T.allParticipants=Boolean(v.allParticipants):T.allParticipants=!1,v.trackPermissions!==void 0&&v.trackPermissions!==null)for(const L of v.trackPermissions)T.trackPermissions.push(a.TrackPermission.fromJSON(L));return T},toJSON(v){const T={};return v.allParticipants!==void 0&&(T.allParticipants=v.allParticipants),v.trackPermissions?T.trackPermissions=v.trackPermissions.map(L=>L?a.TrackPermission.toJSON(L):void 0):T.trackPermissions=[],T},fromPartial(v){var T;const L=Object.assign({},ce);if(L.allParticipants=(T=v.allParticipants)!==null&&T!==void 0?T:!1,L.trackPermissions=[],v.trackPermissions!==void 0&&v.trackPermissions!==null)for(const oe of v.trackPermissions)L.trackPermissions.push(a.TrackPermission.fromPartial(oe));return L}};const me={participantSid:"",trackSid:"",allowed:!1};a.SubscriptionPermissionUpdate={encode(v,T=d.default.Writer.create()){return v.participantSid!==""&&T.uint32(10).string(v.participantSid),v.trackSid!==""&&T.uint32(18).string(v.trackSid),v.allowed===!0&&T.uint32(24).bool(v.allowed),T},decode(v,T){const L=v instanceof d.default.Reader?v:new d.default.Reader(v);let oe=T===void 0?L.len:L.pos+T;const k=Object.assign({},me);for(;L.pos<oe;){const U=L.uint32();switch(U>>>3){case 1:k.participantSid=L.string();break;case 2:k.trackSid=L.string();break;case 3:k.allowed=L.bool();break;default:L.skipType(U&7);break}}return k},fromJSON(v){const T=Object.assign({},me);return v.participantSid!==void 0&&v.participantSid!==null?T.participantSid=String(v.participantSid):T.participantSid="",v.trackSid!==void 0&&v.trackSid!==null?T.trackSid=String(v.trackSid):T.trackSid="",v.allowed!==void 0&&v.allowed!==null?T.allowed=Boolean(v.allowed):T.allowed=!1,T},toJSON(v){const T={};return v.participantSid!==void 0&&(T.participantSid=v.participantSid),v.trackSid!==void 0&&(T.trackSid=v.trackSid),v.allowed!==void 0&&(T.allowed=v.allowed),T},fromPartial(v){var T,L,oe;const k=Object.assign({},me);return k.participantSid=(T=v.participantSid)!==null&&T!==void 0?T:"",k.trackSid=(L=v.trackSid)!==null&&L!==void 0?L:"",k.allowed=(oe=v.allowed)!==null&&oe!==void 0?oe:!1,k}};const ve={};a.SyncState={encode(v,T=d.default.Writer.create()){v.answer!==void 0&&a.SessionDescription.encode(v.answer,T.uint32(10).fork()).ldelim(),v.subscription!==void 0&&a.UpdateSubscription.encode(v.subscription,T.uint32(18).fork()).ldelim();for(const L of v.publishTracks)a.TrackPublishedResponse.encode(L,T.uint32(26).fork()).ldelim();return T},decode(v,T){const L=v instanceof d.default.Reader?v:new d.default.Reader(v);let oe=T===void 0?L.len:L.pos+T;const k=Object.assign({},ve);for(k.publishTracks=[];L.pos<oe;){const U=L.uint32();switch(U>>>3){case 1:k.answer=a.SessionDescription.decode(L,L.uint32());break;case 2:k.subscription=a.UpdateSubscription.decode(L,L.uint32());break;case 3:k.publishTracks.push(a.TrackPublishedResponse.decode(L,L.uint32()));break;default:L.skipType(U&7);break}}return k},fromJSON(v){const T=Object.assign({},ve);if(T.publishTracks=[],v.answer!==void 0&&v.answer!==null?T.answer=a.SessionDescription.fromJSON(v.answer):T.answer=void 0,v.subscription!==void 0&&v.subscription!==null?T.subscription=a.UpdateSubscription.fromJSON(v.subscription):T.subscription=void 0,v.publishTracks!==void 0&&v.publishTracks!==null)for(const L of v.publishTracks)T.publishTracks.push(a.TrackPublishedResponse.fromJSON(L));return T},toJSON(v){const T={};return v.answer!==void 0&&(T.answer=v.answer?a.SessionDescription.toJSON(v.answer):void 0),v.subscription!==void 0&&(T.subscription=v.subscription?a.UpdateSubscription.toJSON(v.subscription):void 0),v.publishTracks?T.publishTracks=v.publishTracks.map(L=>L?a.TrackPublishedResponse.toJSON(L):void 0):T.publishTracks=[],T},fromPartial(v){const T=Object.assign({},ve);if(v.answer!==void 0&&v.answer!==null?T.answer=a.SessionDescription.fromPartial(v.answer):T.answer=void 0,v.subscription!==void 0&&v.subscription!==null?T.subscription=a.UpdateSubscription.fromPartial(v.subscription):T.subscription=void 0,T.publishTracks=[],v.publishTracks!==void 0&&v.publishTracks!==null)for(const L of v.publishTracks)T.publishTracks.push(a.TrackPublishedResponse.fromPartial(L));return T}};const ye={};a.SimulateScenario={encode(v,T=d.default.Writer.create()){return v.speakerUpdate!==void 0&&T.uint32(8).int32(v.speakerUpdate),v.nodeFailure!==void 0&&T.uint32(16).bool(v.nodeFailure),v.migration!==void 0&&T.uint32(24).bool(v.migration),v.serverLeave!==void 0&&T.uint32(32).bool(v.serverLeave),T},decode(v,T){const L=v instanceof d.default.Reader?v:new d.default.Reader(v);let oe=T===void 0?L.len:L.pos+T;const k=Object.assign({},ye);for(;L.pos<oe;){const U=L.uint32();switch(U>>>3){case 1:k.speakerUpdate=L.int32();break;case 2:k.nodeFailure=L.bool();break;case 3:k.migration=L.bool();break;case 4:k.serverLeave=L.bool();break;default:L.skipType(U&7);break}}return k},fromJSON(v){const T=Object.assign({},ye);return v.speakerUpdate!==void 0&&v.speakerUpdate!==null?T.speakerUpdate=Number(v.speakerUpdate):T.speakerUpdate=void 0,v.nodeFailure!==void 0&&v.nodeFailure!==null?T.nodeFailure=Boolean(v.nodeFailure):T.nodeFailure=void 0,v.migration!==void 0&&v.migration!==null?T.migration=Boolean(v.migration):T.migration=void 0,v.serverLeave!==void 0&&v.serverLeave!==null?T.serverLeave=Boolean(v.serverLeave):T.serverLeave=void 0,T},toJSON(v){const T={};return v.speakerUpdate!==void 0&&(T.speakerUpdate=v.speakerUpdate),v.nodeFailure!==void 0&&(T.nodeFailure=v.nodeFailure),v.migration!==void 0&&(T.migration=v.migration),v.serverLeave!==void 0&&(T.serverLeave=v.serverLeave),T},fromPartial(v){var T,L,oe,k;const U=Object.assign({},ye);return U.speakerUpdate=(T=v.speakerUpdate)!==null&&T!==void 0?T:void 0,U.nodeFailure=(L=v.nodeFailure)!==null&&L!==void 0?L:void 0,U.migration=(oe=v.migration)!==null&&oe!==void 0?oe:void 0,U.serverLeave=(k=v.serverLeave)!==null&&k!==void 0?k:void 0,U}},d.default.util.Long!==u.default&&(d.default.util.Long=u.default,d.default.configure())})(livekit_rtc);var errors={};(function(a){Object.defineProperty(a,"__esModule",{value:!0}),a.MediaDeviceFailure=a.PublishDataError=a.UnexpectedConnectionState=a.UnsupportedServer=a.TrackInvalidError=a.ConnectionError=a.LivekitError=void 0;class s extends Error{constructor(_,E){super(E||"an error has occured"),this.code=_}}a.LivekitError=s;class u extends s{constructor(_){super(1,_)}}a.ConnectionError=u;class d extends s{constructor(_){super(20,_||"Track is invalid")}}a.TrackInvalidError=d;class l extends s{constructor(_){super(10,_||"Unsupported server")}}a.UnsupportedServer=l;class p extends s{constructor(_){super(12,_||"Unexpected connection state")}}a.UnexpectedConnectionState=p;class h extends s{constructor(_){super(13,_||"Unable to publish data")}}a.PublishDataError=h,function(y){y.PermissionDenied="PermissionDenied",y.NotFound="NotFound",y.DeviceInUse="DeviceInUse",y.Other="Other"}(a.MediaDeviceFailure||(a.MediaDeviceFailure={})),function(y){function _(E){if(E&&"name"in E)return E.name==="NotFoundError"||E.name==="DevicesNotFoundError"?y.NotFound:E.name==="NotAllowedError"||E.name==="PermissionDeniedError"?y.PermissionDenied:E.name==="NotReadableError"||E.name==="TrackStartError"?y.DeviceInUse:y.Other}y.getFailure=_}(a.MediaDeviceFailure||(a.MediaDeviceFailure={}))})(errors);var events$1={};(function(a){Object.defineProperty(a,"__esModule",{value:!0}),a.TrackEvent=a.EngineEvent=a.ParticipantEvent=a.RoomEvent=void 0,function(s){s.Reconnecting="reconnecting",s.Reconnected="reconnected",s.Disconnected="disconnected",s.MediaDevicesChanged="mediaDevicesChanged",s.ParticipantConnected="participantConnected",s.ParticipantDisconnected="participantDisconnected",s.TrackPublished="trackPublished",s.TrackSubscribed="trackSubscribed",s.TrackSubscriptionFailed="trackSubscriptionFailed",s.TrackUnpublished="trackUnpublished",s.TrackUnsubscribed="trackUnsubscribed",s.TrackMuted="trackMuted",s.TrackUnmuted="trackUnmuted",s.LocalTrackPublished="localTrackPublished",s.LocalTrackUnpublished="localTrackUnpublished",s.ActiveSpeakersChanged="activeSpeakersChanged",s.MetadataChanged="metadataChanged",s.ParticipantMetadataChanged="participantMetaDataChanged",s.RoomMetadataChanged="roomMetadataChanged",s.DataReceived="dataReceived",s.ConnectionQualityChanged="connectionQualityChanged",s.TrackStreamStateChanged="trackStreamStateChanged",s.TrackSubscriptionPermissionChanged="trackSubscriptionPermissionChanged",s.AudioPlaybackStatusChanged="audioPlaybackChanged",s.MediaDevicesError="mediaDevicesError"}(a.RoomEvent||(a.RoomEvent={})),function(s){s.TrackPublished="trackPublished",s.TrackSubscribed="trackSubscribed",s.TrackSubscriptionFailed="trackSubscriptionFailed",s.TrackUnpublished="trackUnpublished",s.TrackUnsubscribed="trackUnsubscribed",s.TrackMuted="trackMuted",s.TrackUnmuted="trackUnmuted",s.LocalTrackPublished="localTrackPublished",s.LocalTrackUnpublished="localTrackUnpublished",s.MetadataChanged="metadataChanged",s.ParticipantMetadataChanged="participantMetadataChanged",s.DataReceived="dataReceived",s.IsSpeakingChanged="isSpeakingChanged",s.ConnectionQualityChanged="connectionQualityChanged",s.TrackStreamStateChanged="trackStreamStateChanged",s.TrackSubscriptionPermissionChanged="trackSubscriptionPermissionChanged",s.MediaDevicesError="mediaDevicesError"}(a.ParticipantEvent||(a.ParticipantEvent={})),function(s){s.Connected="connected",s.Disconnected="disconnected",s.Reconnecting="reconnecting",s.Reconnected="reconnected",s.SignalConnected="singalConnected",s.MediaTrackAdded="mediaTrackAdded",s.ActiveSpeakersUpdate="activeSpeakersUpdate",s.DataPacketReceived="dataPacketReceived"}(a.EngineEvent||(a.EngineEvent={})),function(s){s.Message="message",s.Muted="muted",s.Unmuted="unmuted",s.Ended="ended",s.UpdateSettings="updateSettings",s.UpdateSubscription="updateSubscription",s.AudioPlaybackStarted="audioPlaybackStarted",s.AudioPlaybackFailed="audioPlaybackFailed",s.VisibilityChanged="visibilityChanged",s.VideoDimensionsChanged="videoDimensionsChanged"}(a.TrackEvent||(a.TrackEvent={}))})(events$1);var LocalAudioTrack$1={},stats={};Object.defineProperty(stats,"__esModule",{value:!0}),stats.computeBitrate=stats.monitorFrequency=void 0,stats.monitorFrequency=2e3;function computeBitrate(a,s){if(!s)return 0;let u,d;return"bytesReceived"in a?(u=a.bytesReceived,d=s.bytesReceived):"bytesSent"in a&&(u=a.bytesSent,d=s.bytesSent),u===void 0||d===void 0||a.timestamp===void 0||s.timestamp===void 0?0:(u-d)*8*1e3/(a.timestamp-s.timestamp)}stats.computeBitrate=computeBitrate;var LocalTrack$1={},DeviceManager$1={},__awaiter$b=commonjsGlobal&&commonjsGlobal.__awaiter||function(a,s,u,d){function l(p){return p instanceof u?p:new u(function(h){h(p)})}return new(u||(u=Promise))(function(p,h){function y(I){try{E(d.next(I))}catch(N){h(N)}}function _(I){try{E(d.throw(I))}catch(N){h(N)}}function E(I){I.done?p(I.value):l(I.value).then(y,_)}E((d=d.apply(a,s||[])).next())})};Object.defineProperty(DeviceManager$1,"__esModule",{value:!0});const defaultId="default";class DeviceManager{static getInstance(){return this.instance===void 0&&(this.instance=new DeviceManager),this.instance}getDevices(s){return __awaiter$b(this,void 0,void 0,function*(){let u=yield navigator.mediaDevices.enumerateDevices();if(u=u.filter(d=>d.kind===s),u.length>1&&u[0].deviceId===defaultId){const d=u[0];for(let l=1;l<u.length;l+=1)if(u[l].groupId===d.groupId){const p=u[0];u[0]=u[l],u[l]=p;break}return u.filter(l=>l!==d)}return u})}normalizeDeviceId(s,u,d){return __awaiter$b(this,void 0,void 0,function*(){if(u!==defaultId)return u;const p=(yield this.getDevices(s)).find(h=>h.groupId===d&&h.deviceId!==defaultId);return p==null?void 0:p.deviceId})}}DeviceManager$1.default=DeviceManager,DeviceManager.mediaDeviceKinds=["audioinput","audiooutput","videoinput"];var Track={},events={exports:{}},R=typeof Reflect=="object"?Reflect:null,ReflectApply=R&&typeof R.apply=="function"?R.apply:function a(s,u,d){return Function.prototype.apply.call(s,u,d)},ReflectOwnKeys;R&&typeof R.ownKeys=="function"?ReflectOwnKeys=R.ownKeys:Object.getOwnPropertySymbols?ReflectOwnKeys=function(s){return Object.getOwnPropertyNames(s).concat(Object.getOwnPropertySymbols(s))}:ReflectOwnKeys=function(s){return Object.getOwnPropertyNames(s)};function ProcessEmitWarning(a){console&&console.warn&&console.warn(a)}var NumberIsNaN=Number.isNaN||function a(s){return s!==s};function EventEmitter(){EventEmitter.init.call(this)}events.exports=EventEmitter,events.exports.once=once,EventEmitter.EventEmitter=EventEmitter,EventEmitter.prototype._events=void 0,EventEmitter.prototype._eventsCount=0,EventEmitter.prototype._maxListeners=void 0;var defaultMaxListeners=10;function checkListener(a){if(typeof a!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof a)}Object.defineProperty(EventEmitter,"defaultMaxListeners",{enumerable:!0,get:function(){return defaultMaxListeners},set:function(a){if(typeof a!="number"||a<0||NumberIsNaN(a))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+a+".");defaultMaxListeners=a}}),EventEmitter.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},EventEmitter.prototype.setMaxListeners=function a(s){if(typeof s!="number"||s<0||NumberIsNaN(s))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+s+".");return this._maxListeners=s,this};function _getMaxListeners(a){return a._maxListeners===void 0?EventEmitter.defaultMaxListeners:a._maxListeners}EventEmitter.prototype.getMaxListeners=function a(){return _getMaxListeners(this)},EventEmitter.prototype.emit=function a(s){for(var u=[],d=1;d<arguments.length;d++)u.push(arguments[d]);var l=s==="error",p=this._events;if(p!==void 0)l=l&&p.error===void 0;else if(!l)return!1;if(l){var h;if(u.length>0&&(h=u[0]),h instanceof Error)throw h;var y=new Error("Unhandled error."+(h?" ("+h.message+")":""));throw y.context=h,y}var _=p[s];if(_===void 0)return!1;if(typeof _=="function")ReflectApply(_,this,u);else for(var E=_.length,I=arrayClone(_,E),d=0;d<E;++d)ReflectApply(I[d],this,u);return!0};function _addListener(a,s,u,d){var l,p,h;if(checkListener(u),p=a._events,p===void 0?(p=a._events=Object.create(null),a._eventsCount=0):(p.newListener!==void 0&&(a.emit("newListener",s,u.listener?u.listener:u),p=a._events),h=p[s]),h===void 0)h=p[s]=u,++a._eventsCount;else if(typeof h=="function"?h=p[s]=d?[u,h]:[h,u]:d?h.unshift(u):h.push(u),l=_getMaxListeners(a),l>0&&h.length>l&&!h.warned){h.warned=!0;var y=new Error("Possible EventEmitter memory leak detected. "+h.length+" "+String(s)+" listeners added. Use emitter.setMaxListeners() to increase limit");y.name="MaxListenersExceededWarning",y.emitter=a,y.type=s,y.count=h.length,ProcessEmitWarning(y)}return a}EventEmitter.prototype.addListener=function a(s,u){return _addListener(this,s,u,!1)},EventEmitter.prototype.on=EventEmitter.prototype.addListener,EventEmitter.prototype.prependListener=function a(s,u){return _addListener(this,s,u,!0)};function onceWrapper(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function _onceWrap(a,s,u){var d={fired:!1,wrapFn:void 0,target:a,type:s,listener:u},l=onceWrapper.bind(d);return l.listener=u,d.wrapFn=l,l}EventEmitter.prototype.once=function a(s,u){return checkListener(u),this.on(s,_onceWrap(this,s,u)),this},EventEmitter.prototype.prependOnceListener=function a(s,u){return checkListener(u),this.prependListener(s,_onceWrap(this,s,u)),this},EventEmitter.prototype.removeListener=function a(s,u){var d,l,p,h,y;if(checkListener(u),l=this._events,l===void 0)return this;if(d=l[s],d===void 0)return this;if(d===u||d.listener===u)--this._eventsCount===0?this._events=Object.create(null):(delete l[s],l.removeListener&&this.emit("removeListener",s,d.listener||u));else if(typeof d!="function"){for(p=-1,h=d.length-1;h>=0;h--)if(d[h]===u||d[h].listener===u){y=d[h].listener,p=h;break}if(p<0)return this;p===0?d.shift():spliceOne(d,p),d.length===1&&(l[s]=d[0]),l.removeListener!==void 0&&this.emit("removeListener",s,y||u)}return this},EventEmitter.prototype.off=EventEmitter.prototype.removeListener,EventEmitter.prototype.removeAllListeners=function a(s){var u,d,l;if(d=this._events,d===void 0)return this;if(d.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):d[s]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete d[s]),this;if(arguments.length===0){var p=Object.keys(d),h;for(l=0;l<p.length;++l)h=p[l],h!=="removeListener"&&this.removeAllListeners(h);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(u=d[s],typeof u=="function")this.removeListener(s,u);else if(u!==void 0)for(l=u.length-1;l>=0;l--)this.removeListener(s,u[l]);return this};function _listeners(a,s,u){var d=a._events;if(d===void 0)return[];var l=d[s];return l===void 0?[]:typeof l=="function"?u?[l.listener||l]:[l]:u?unwrapListeners(l):arrayClone(l,l.length)}EventEmitter.prototype.listeners=function a(s){return _listeners(this,s,!0)},EventEmitter.prototype.rawListeners=function a(s){return _listeners(this,s,!1)},EventEmitter.listenerCount=function(a,s){return typeof a.listenerCount=="function"?a.listenerCount(s):listenerCount.call(a,s)},EventEmitter.prototype.listenerCount=listenerCount;function listenerCount(a){var s=this._events;if(s!==void 0){var u=s[a];if(typeof u=="function")return 1;if(u!==void 0)return u.length}return 0}EventEmitter.prototype.eventNames=function a(){return this._eventsCount>0?ReflectOwnKeys(this._events):[]};function arrayClone(a,s){for(var u=new Array(s),d=0;d<s;++d)u[d]=a[d];return u}function spliceOne(a,s){for(;s+1<a.length;s++)a[s]=a[s+1];a.pop()}function unwrapListeners(a){for(var s=new Array(a.length),u=0;u<s.length;++u)s[u]=a[u].listener||a[u];return s}function once(a,s){return new Promise(function(u,d){function l(h){a.removeListener(s,p),d(h)}function p(){typeof a.removeListener=="function"&&a.removeListener("error",l),u([].slice.call(arguments))}eventTargetAgnosticAddListener(a,s,p,{once:!0}),s!=="error"&&addErrorHandlerIfEventEmitter(a,l,{once:!0})})}function addErrorHandlerIfEventEmitter(a,s,u){typeof a.on=="function"&&eventTargetAgnosticAddListener(a,"error",s,u)}function eventTargetAgnosticAddListener(a,s,u,d){if(typeof a.on=="function")d.once?a.once(s,u):a.on(s,u);else if(typeof a.addEventListener=="function")a.addEventListener(s,function l(p){d.once&&a.removeEventListener(s,l),u(p)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof a)}var utils$1={},uaParser={exports:{}};(function(a,s){(function(u,d){var l="1.0.2",p="",h="?",y="function",_="undefined",E="object",I="string",N="major",w="model",C="name",D="type",V="vendor",J="version",W="architecture",g="console",O="mobile",$="tablet",x="smarttv",Y="wearable",te="embedded",ne=255,F="Amazon",j="Apple",K="ASUS",M="BlackBerry",q="Browser",z="Chrome",le="Edge",re="Firefox",Q="Google",ce="Huawei",me="LG",ve="Microsoft",ye="Motorola",v="Opera",T="Samsung",L="Sony",oe="Xiaomi",k="Zebra",U="Facebook",ee=function(ge,Re){var Te={};for(var Ae in ge)Re[Ae]&&Re[Ae].length%2===0?Te[Ae]=Re[Ae].concat(ge[Ae]):Te[Ae]=ge[Ae];return Te},de=function(ge){for(var Re={},Te=0;Te<ge.length;Te++)Re[ge[Te].toUpperCase()]=ge[Te];return Re},ae=function(ge,Re){return typeof ge===I?fe(Re).indexOf(fe(ge))!==-1:!1},fe=function(ge){return ge.toLowerCase()},Ee=function(ge){return typeof ge===I?ge.replace(/[^\d\.]/g,p).split(".")[0]:d},Pe=function(ge,Re){if(typeof ge===I)return ge=ge.replace(/^\s\s*/,p).replace(/\s\s*$/,p),typeof Re===_?ge:ge.substring(0,ne)},Se=function(ge,Re){for(var Te=0,Ae,_e,et,Ce,tt,ke;Te<Re.length&&!tt;){var nt=Re[Te],ue=Re[Te+1];for(Ae=_e=0;Ae<nt.length&&!tt;)if(tt=nt[Ae++].exec(ge),tt)for(et=0;et<ue.length;et++)ke=tt[++_e],Ce=ue[et],typeof Ce===E&&Ce.length>0?Ce.length===2?typeof Ce[1]==y?this[Ce[0]]=Ce[1].call(this,ke):this[Ce[0]]=Ce[1]:Ce.length===3?typeof Ce[1]===y&&!(Ce[1].exec&&Ce[1].test)?this[Ce[0]]=ke?Ce[1].call(this,ke,Ce[2]):d:this[Ce[0]]=ke?ke.replace(Ce[1],Ce[2]):d:Ce.length===4&&(this[Ce[0]]=ke?Ce[3].call(this,ke.replace(Ce[1],Ce[2])):d):this[Ce]=ke||d;Te+=2}},Ie=function(ge,Re){for(var Te in Re)if(typeof Re[Te]===E&&Re[Te].length>0){for(var Ae=0;Ae<Re[Te].length;Ae++)if(ae(Re[Te][Ae],ge))return Te===h?d:Te}else if(ae(Re[Te],ge))return Te===h?d:Te;return ge},De={"1.0":"/8","1.2":"/1","1.3":"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"},He={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0","2000":"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0","7":"NT 6.1","8":"NT 6.2","8.1":"NT 6.3","10":["NT 6.4","NT 10.0"],RT:"ARM"},be={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[J,[C,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[J,[C,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[C,J],[/opios[\/ ]+([\w\.]+)/i],[J,[C,v+" Mini"]],[/\bopr\/([\w\.]+)/i],[J,[C,v]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant |iemobile|slim)(?:browser)?[\/ ]?([\w\.]*)/i,/(ba?idubrowser)[\/ ]?([\w\.]+)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale|qqbrowserlite|qq)\/([-\w\.]+)/i,/(weibo)__([\d\.]+)/i],[C,J],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[J,[C,"UC"+q]],[/\bqbcore\/([\w\.]+)/i],[J,[C,"WeChat(Win) Desktop"]],[/micromessenger\/([\w\.]+)/i],[J,[C,"WeChat"]],[/konqueror\/([\w\.]+)/i],[J,[C,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[J,[C,"IE"]],[/yabrowser\/([\w\.]+)/i],[J,[C,"Yandex"]],[/(avast|avg)\/([\w\.]+)/i],[[C,/(.+)/,"$1 Secure "+q],J],[/\bfocus\/([\w\.]+)/i],[J,[C,re+" Focus"]],[/\bopt\/([\w\.]+)/i],[J,[C,v+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[J,[C,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[J,[C,"Dolphin"]],[/coast\/([\w\.]+)/i],[J,[C,v+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[J,[C,"MIUI "+q]],[/fxios\/([-\w\.]+)/i],[J,[C,re]],[/\bqihu|(qi?ho?o?|360)browser/i],[[C,"360 "+q]],[/(oculus|samsung|sailfish)browser\/([\w\.]+)/i],[[C,/(.+)/,"$1 "+q],J],[/(comodo_dragon)\/([\w\.]+)/i],[[C,/_/g," "],J],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/ ]?([\w\.]+)/i],[C,J],[/(metasr)[\/ ]?([\w\.]+)/i,/(lbbrowser)/i],[C],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[C,U],J],[/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(chromium|instagram)[\/ ]([-\w\.]+)/i],[C,J],[/\bgsa\/([\w\.]+) .*safari\//i],[J,[C,"GSA"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[J,[C,z+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[C,z+" WebView"],J],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[J,[C,"Android "+q]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[C,J],[/version\/([\w\.]+) .*mobile\/\w+ (safari)/i],[J,[C,"Mobile Safari"]],[/version\/([\w\.]+) .*(mobile ?safari|safari)/i],[J,C],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[C,[J,Ie,De]],[/(webkit|khtml)\/([\w\.]+)/i],[C,J],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[C,"Netscape"],J],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[J,[C,re+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i],[C,J]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[W,"amd64"]],[/(ia32(?=;))/i],[[W,fe]],[/((?:i[346]|x)86)[;\)]/i],[[W,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[W,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[W,"armhf"]],[/windows (ce|mobile); ppc;/i],[[W,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[W,/ower/,p,fe]],[/(sun4\w)[;\)]/i],[[W,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[W,fe]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[pt]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[w,[V,T],[D,$]],[/\b((?:s[cgp]h|gt|sm)-\w+|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[w,[V,T],[D,O]],[/\((ip(?:hone|od)[\w ]*);/i],[w,[V,j],[D,O]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[w,[V,j],[D,$]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[w,[V,ce],[D,$]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}-[atu]?[ln][01259x][012359][an]?)\b(?!.+d\/s)/i],[w,[V,ce],[D,O]],[/\b(poco[\w ]+)(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[w,/_/g," "],[V,oe],[D,O]],[/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[w,/_/g," "],[V,oe],[D,$]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[w,[V,"OPPO"],[D,O]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[w,[V,"Vivo"],[D,O]],[/\b(rmx[12]\d{3})(?: bui|;|\))/i],[w,[V,"Realme"],[D,O]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[w,[V,ye],[D,O]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[w,[V,ye],[D,$]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[w,[V,me],[D,$]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[w,[V,me],[D,O]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[w,[V,"Lenovo"],[D,$]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[w,/_/g," "],[V,"Nokia"],[D,O]],[/(pixel c)\b/i],[w,[V,Q],[D,$]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[w,[V,Q],[D,O]],[/droid.+ ([c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[w,[V,L],[D,O]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[w,"Xperia Tablet"],[V,L],[D,$]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[w,[V,"OnePlus"],[D,O]],[/(alexa)webm/i,/(kf[a-z]{2}wi)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[w,[V,F],[D,$]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[w,/(.+)/g,"Fire Phone $1"],[V,F],[D,O]],[/(playbook);[-\w\),; ]+(rim)/i],[w,V,[D,$]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[w,[V,M],[D,O]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[w,[V,K],[D,$]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[w,[V,K],[D,O]],[/(nexus 9)/i],[w,[V,"HTC"],[D,$]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic|sony)[-_ ]?([-\w]*)/i],[V,[w,/_/g," "],[D,O]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[w,[V,"Acer"],[D,$]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[w,[V,"Meizu"],[D,O]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[w,[V,"Sharp"],[D,O]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[V,w,[D,O]],[/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[V,w,[D,$]],[/(surface duo)/i],[w,[V,ve],[D,$]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[w,[V,"Fairphone"],[D,O]],[/(u304aa)/i],[w,[V,"AT&T"],[D,O]],[/\bsie-(\w*)/i],[w,[V,"Siemens"],[D,O]],[/\b(rct\w+) b/i],[w,[V,"RCA"],[D,$]],[/\b(venue[\d ]{2,7}) b/i],[w,[V,"Dell"],[D,$]],[/\b(q(?:mv|ta)\w+) b/i],[w,[V,"Verizon"],[D,$]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[w,[V,"Barnes & Noble"],[D,$]],[/\b(tm\d{3}\w+) b/i],[w,[V,"NuVision"],[D,$]],[/\b(k88) b/i],[w,[V,"ZTE"],[D,$]],[/\b(nx\d{3}j) b/i],[w,[V,"ZTE"],[D,O]],[/\b(gen\d{3}) b.+49h/i],[w,[V,"Swiss"],[D,O]],[/\b(zur\d{3}) b/i],[w,[V,"Swiss"],[D,$]],[/\b((zeki)?tb.*\b) b/i],[w,[V,"Zeki"],[D,$]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[V,"Dragon Touch"],w,[D,$]],[/\b(ns-?\w{0,9}) b/i],[w,[V,"Insignia"],[D,$]],[/\b((nxa|next)-?\w{0,9}) b/i],[w,[V,"NextBook"],[D,$]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[V,"Voice"],w,[D,O]],[/\b(lvtel\-)?(v1[12]) b/i],[[V,"LvTel"],w,[D,O]],[/\b(ph-1) /i],[w,[V,"Essential"],[D,O]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[w,[V,"Envizen"],[D,$]],[/\b(trio[-\w\. ]+) b/i],[w,[V,"MachSpeed"],[D,$]],[/\btu_(1491) b/i],[w,[V,"Rotor"],[D,$]],[/(shield[\w ]+) b/i],[w,[V,"Nvidia"],[D,$]],[/(sprint) (\w+)/i],[V,w,[D,O]],[/(kin\.[onetw]{3})/i],[[w,/\./g," "],[V,ve],[D,O]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[w,[V,k],[D,$]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[w,[V,k],[D,O]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[V,w,[D,g]],[/droid.+; (shield) bui/i],[w,[V,"Nvidia"],[D,g]],[/(playstation [345portablevi]+)/i],[w,[V,L],[D,g]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[w,[V,ve],[D,g]],[/smart-tv.+(samsung)/i],[V,[D,x]],[/hbbtv.+maple;(\d+)/i],[[w,/^/,"SmartTV"],[V,T],[D,x]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[V,me],[D,x]],[/(apple) ?tv/i],[V,[w,j+" TV"],[D,x]],[/crkey/i],[[w,z+"cast"],[V,Q],[D,x]],[/droid.+aft(\w)( bui|\))/i],[w,[V,F],[D,x]],[/\(dtv[\);].+(aquos)/i],[w,[V,"Sharp"],[D,x]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w ]*; *(\w[^;]*);([^;]*)/i],[[V,Pe],[w,Pe],[D,x]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[D,x]],[/((pebble))app/i],[V,w,[D,Y]],[/droid.+; (glass) \d/i],[w,[V,Q],[D,Y]],[/droid.+; (wt63?0{2,3})\)/i],[w,[V,k],[D,Y]],[/(quest( 2)?)/i],[w,[V,U],[D,Y]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[V,[D,te]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+? mobile safari/i],[w,[D,O]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[w,[D,$]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[D,$]],[/(phone|mobile(?:[;\/]| safari)|pda(?=.+windows ce))/i],[[D,O]],[/(android[-\w\. ]{0,9});.+buil/i],[w,[V,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[J,[C,le+"HTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[J,[C,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i],[C,J],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[J,C]],os:[[/microsoft (windows) (vista|xp)/i],[C,J],[/(windows) nt 6\.2; (arm)/i,/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i,/(windows)[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i],[C,[J,Ie,He]],[/(win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[C,"Windows"],[J,Ie,He]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/cfnetwork\/.+darwin/i],[[J,/_/g,"."],[C,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[C,"Mac OS"],[J,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86)/i],[J,C],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[C,J],[/\(bb(10);/i],[J,[C,M]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[J,[C,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[J,[C,re+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[J,[C,"webOS"]],[/crkey\/([\d\.]+)/i],[J,[C,z+"cast"]],[/(cros) [\w]+ ([\w\.]+\w)/i],[[C,"Chromium OS"],J],[/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[C,J],[/(sunos) ?([\w\.\d]*)/i],[[C,"Solaris"],J],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux)/i,/(unix) ?([\w\.]*)/i],[C,J]]},Ve=function(ge,Re){if(typeof ge===E&&(Re=ge,ge=d),!(this instanceof Ve))return new Ve(ge,Re).getResult();var Te=ge||(typeof u!==_&&u.navigator&&u.navigator.userAgent?u.navigator.userAgent:p),Ae=Re?ee(be,Re):be;return this.getBrowser=function(){var _e={};return _e[C]=d,_e[J]=d,Se.call(_e,Te,Ae.browser),_e.major=Ee(_e.version),_e},this.getCPU=function(){var _e={};return _e[W]=d,Se.call(_e,Te,Ae.cpu),_e},this.getDevice=function(){var _e={};return _e[V]=d,_e[w]=d,_e[D]=d,Se.call(_e,Te,Ae.device),_e},this.getEngine=function(){var _e={};return _e[C]=d,_e[J]=d,Se.call(_e,Te,Ae.engine),_e},this.getOS=function(){var _e={};return _e[C]=d,_e[J]=d,Se.call(_e,Te,Ae.os),_e},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return Te},this.setUA=function(_e){return Te=typeof _e===I&&_e.length>ne?Pe(_e,ne):_e,this},this.setUA(Te),this};Ve.VERSION=l,Ve.BROWSER=de([C,J,N]),Ve.CPU=de([W]),Ve.DEVICE=de([w,V,D,g,O,x,$,Y,te]),Ve.ENGINE=Ve.OS=de([C,J]),a.exports&&(s=a.exports=Ve),s.UAParser=Ve;var Ze=typeof u!==_&&(u.jQuery||u.Zepto);if(Ze&&!Ze.ua){var Xe=new Ve;Ze.ua=Xe.getResult(),Ze.ua.get=function(){return Xe.getUA()},Ze.ua.set=function(ge){Xe.setUA(ge);var Re=Xe.getResult();for(var Te in Re)Ze.ua[Te]=Re[Te]}}})(typeof window=="object"?window:commonjsGlobal)})(uaParser,uaParser.exports);var version={};Object.defineProperty(version,"__esModule",{value:!0}),version.protocolVersion=version.version=void 0,version.version="0.15.4",version.protocolVersion=5;var __awaiter$a=commonjsGlobal&&commonjsGlobal.__awaiter||function(a,s,u,d){function l(p){return p instanceof u?p:new u(function(h){h(p)})}return new(u||(u=Promise))(function(p,h){function y(I){try{E(d.next(I))}catch(N){h(N)}}function _(I){try{E(d.throw(I))}catch(N){h(N)}}function E(I){I.done?p(I.value):l(I.value).then(y,_)}E((d=d.apply(a,s||[])).next())})},__importDefault$b=commonjsGlobal&&commonjsGlobal.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(utils$1,"__esModule",{value:!0}),utils$1.getClientInfo=utils$1.getIntersectionObserver=utils$1.getResizeObserver=utils$1.isFireFox=utils$1.sleep=utils$1.unpackStreamId=void 0;const ua_parser_js_1=__importDefault$b(uaParser.exports),livekit_models_1$2=livekit_models,version_1=version,separator="|";function unpackStreamId(a){const s=a.split(separator);return s.length>1?[s[0],a.substr(s[0].length+1)]:[a,""]}utils$1.unpackStreamId=unpackStreamId;function sleep(a){return __awaiter$a(this,void 0,void 0,function*(){return new Promise(s=>setTimeout(s,a))})}utils$1.sleep=sleep;function isFireFox(){return navigator.userAgent.indexOf("Firefox")!==-1}utils$1.isFireFox=isFireFox;function roDispatchCallback(a){for(const s of a)s.target.handleResize(s)}function ioDispatchCallback(a){for(const s of a)s.target.handleVisibilityChanged(s)}let resizeObserver=null;const getResizeObserver=()=>(resizeObserver||(resizeObserver=new ResizeObserver(roDispatchCallback)),resizeObserver);utils$1.getResizeObserver=getResizeObserver;let intersectionObserver=null;const getIntersectionObserver=()=>(intersectionObserver||(intersectionObserver=new IntersectionObserver(ioDispatchCallback)),intersectionObserver);utils$1.getIntersectionObserver=getIntersectionObserver;function getClientInfo(){const a=ua_parser_js_1.default(navigator.userAgent),s=livekit_models_1$2.ClientInfo.fromPartial({sdk:livekit_models_1$2.ClientInfo_SDK.JS,protocol:version_1.protocolVersion,version:version_1.version,os:a.os.name,osVersion:a.os.version,browser:a.browser.name,browserVersion:a.browser.version});let u="";return a.device.vendor&&(u+=a.device.vendor),a.device.model&&(u&&(u+=" "),u+=a.device.model),u&&(s.deviceModel=u),s}utils$1.getClientInfo=getClientInfo,function(a){Object.defineProperty(a,"__esModule",{value:!0}),a.detachTrack=a.attachToElement=a.Track=void 0;const s=events.exports,u=livekit_models,d=livekit_rtc,l=events$1,p=utils$1,h=[];class y extends s.EventEmitter{constructor(N,w){super(),this.attachedElements=[],this.isMuted=!1,this.streamState=y.StreamState.Active,this._currentBitrate=0,this.kind=w,this.mediaStreamTrack=N,this.source=y.Source.Unknown}get currentBitrate(){return this._currentBitrate}attach(N){let w="audio";return this.kind===y.Kind.Video&&(w="video"),N||(w==="audio"&&(h.forEach(C=>{C.parentElement===null&&!N&&(N=C)}),N&&h.splice(h.indexOf(N),1)),N||(N=document.createElement(w))),N instanceof HTMLVideoElement&&(N.playsInline=!0,N.autoplay=!0),this.attachedElements.includes(N)||(_(this.mediaStreamTrack,N),this.attachedElements.push(N),N instanceof HTMLAudioElement&&N.play().then(()=>{this.emit(l.TrackEvent.AudioPlaybackStarted)}).catch(C=>{this.emit(l.TrackEvent.AudioPlaybackFailed,C)})),N}detach(N){if(N){E(this.mediaStreamTrack,N);const C=this.attachedElements.indexOf(N);return C>=0&&(this.attachedElements.splice(C,1),this.recycleElement(N)),N}const w=[];return this.attachedElements.forEach(C=>{E(this.mediaStreamTrack,C),w.push(C),this.recycleElement(C)}),this.attachedElements=[],w}stop(){this.mediaStreamTrack.stop()}enable(){this.mediaStreamTrack.enabled=!0}disable(){this.mediaStreamTrack.enabled=!1}recycleElement(N){if(N instanceof HTMLAudioElement){let w=!0;N.pause(),h.forEach(C=>{C.parentElement||(w=!1)}),w&&h.push(N)}}}a.Track=y;function _(I,N){let w;N.srcObject instanceof MediaStream?w=N.srcObject:(w=new MediaStream,N.srcObject=w);let C;I.kind==="audio"?C=w.getAudioTracks():C=w.getVideoTracks(),C.forEach(D=>{w.removeTrack(D)}),w.addTrack(I),p.isFireFox()&&setTimeout(()=>{N.srcObject=w},1)}a.attachToElement=_;function E(I,N){N.srcObject instanceof MediaStream&&(N.srcObject.removeTrack(I),N.srcObject=null)}a.detachTrack=E,function(I){let N;(function(O){O.Audio="audio",O.Video="video",O.Unknown="unknown"})(N=I.Kind||(I.Kind={}));let w;(function(O){O.Camera="camera",O.Microphone="microphone",O.ScreenShare="screen_share",O.ScreenShareAudio="screen_share_audio",O.Unknown="unknown"})(w=I.Source||(I.Source={}));let C;(function(O){O.Active="active",O.Paused="paused",O.Unknown="unknown"})(C=I.StreamState||(I.StreamState={}));function D(O){switch(O){case N.Audio:return u.TrackType.AUDIO;case N.Video:return u.TrackType.VIDEO;default:return u.TrackType.UNRECOGNIZED}}I.kindToProto=D;function V(O){switch(O){case u.TrackType.AUDIO:return N.Audio;case u.TrackType.VIDEO:return N.Video;default:return N.Unknown}}I.kindFromProto=V;function J(O){switch(O){case w.Camera:return u.TrackSource.CAMERA;case w.Microphone:return u.TrackSource.MICROPHONE;case w.ScreenShare:return u.TrackSource.SCREEN_SHARE;case w.ScreenShareAudio:return u.TrackSource.SCREEN_SHARE_AUDIO;default:return u.TrackSource.UNRECOGNIZED}}I.sourceToProto=J;function W(O){switch(O){case u.TrackSource.CAMERA:return w.Camera;case u.TrackSource.MICROPHONE:return w.Microphone;case u.TrackSource.SCREEN_SHARE:return w.ScreenShare;case u.TrackSource.SCREEN_SHARE_AUDIO:return w.ScreenShareAudio;default:return w.Unknown}}I.sourceFromProto=W;function g(O){switch(O){case d.StreamState.ACTIVE:return C.Active;case d.StreamState.PAUSED:return C.Paused;default:return C.Unknown}}I.streamStateFromProto=g}(y=a.Track||(a.Track={}))}(Track);var __awaiter$9=commonjsGlobal&&commonjsGlobal.__awaiter||function(a,s,u,d){function l(p){return p instanceof u?p:new u(function(h){h(p)})}return new(u||(u=Promise))(function(p,h){function y(I){try{E(d.next(I))}catch(N){h(N)}}function _(I){try{E(d.throw(I))}catch(N){h(N)}}function E(I){I.done?p(I.value):l(I.value).then(y,_)}E((d=d.apply(a,s||[])).next())})},__importDefault$a=commonjsGlobal&&commonjsGlobal.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(LocalTrack$1,"__esModule",{value:!0});const logger_1$7=__importDefault$a(logger),DeviceManager_1=__importDefault$a(DeviceManager$1),errors_1$3=errors,events_1$6=events$1,Track_1$8=Track;class LocalTrack extends Track_1$8.Track{constructor(s,u,d){super(s,u),this.handleEnded=()=>{this.emit(events_1$6.TrackEvent.Ended,this)},this.mediaStreamTrack.addEventListener("ended",this.handleEnded),this.constraints=d!=null?d:s.getConstraints()}get id(){return this.mediaStreamTrack.id}get dimensions(){if(this.kind!==Track_1$8.Track.Kind.Video)return;const{width:s,height:u}=this.mediaStreamTrack.getSettings();if(s&&u)return{width:s,height:u}}getDeviceId(){return __awaiter$9(this,void 0,void 0,function*(){if(this.source===Track_1$8.Track.Source.ScreenShare)return;const{deviceId:s,groupId:u}=this.mediaStreamTrack.getSettings(),d=this.kind===Track_1$8.Track.Kind.Audio?"audioinput":"videoinput";return DeviceManager_1.default.getInstance().normalizeDeviceId(d,s,u)})}mute(){return __awaiter$9(this,void 0,void 0,function*(){return this.setTrackMuted(!0),this})}unmute(){return __awaiter$9(this,void 0,void 0,function*(){return this.setTrackMuted(!1),this})}restart(s){return __awaiter$9(this,void 0,void 0,function*(){if(!this.sender)throw new errors_1$3.TrackInvalidError("unable to restart an unpublished track");s||(s=this.constraints),logger_1$7.default.debug("restarting track with constraints",s);const u={audio:!1,video:!1};this.kind===Track_1$8.Track.Kind.Video?u.video=s:u.audio=s,this.attachedElements.forEach(p=>{Track_1$8.detachTrack(this.mediaStreamTrack,p)}),this.mediaStreamTrack.removeEventListener("ended",this.handleEnded),this.mediaStreamTrack.stop();const l=(yield navigator.mediaDevices.getUserMedia(u)).getTracks()[0];return l.addEventListener("ended",this.handleEnded),logger_1$7.default.debug("re-acquired MediaStreamTrack"),yield this.sender.replaceTrack(l),this.mediaStreamTrack=l,this.attachedElements.forEach(p=>{Track_1$8.attachToElement(l,p)}),this.constraints=s,this})}setTrackMuted(s){this.isMuted!==s&&(this.isMuted=s,this.mediaStreamTrack.enabled=!s,this.emit(s?events_1$6.TrackEvent.Muted:events_1$6.TrackEvent.Unmuted,this))}}LocalTrack$1.default=LocalTrack;var utils={};Object.defineProperty(utils,"__esModule",{value:!0}),utils.constraintsForOptions=utils.mergeDefaultOptions=void 0;function mergeDefaultOptions(a,s,u){const d=Object.assign({},a);return d.audio===!0&&(d.audio={}),d.video===!0&&(d.video={}),d.audio&&mergeObjectWithoutOverwriting(d.audio,s),d.video&&mergeObjectWithoutOverwriting(d.video,u),d}utils.mergeDefaultOptions=mergeDefaultOptions;function mergeObjectWithoutOverwriting(a,s){return Object.keys(s).forEach(u=>{a[u]===void 0&&(a[u]=s[u])}),a}function constraintsForOptions(a){const s={};if(a.video)if(typeof a.video=="object"){const u={},d=u,l=a.video;Object.keys(l).forEach(p=>{switch(p){case"resolution":mergeObjectWithoutOverwriting(d,l.resolution);break;default:d[p]=l[p]}}),s.video=u}else s.video=a.video;else s.video=!1;return a.audio?typeof a.audio=="object"?s.audio=a.audio:s.audio=!0:s.audio=!1,s}utils.constraintsForOptions=constraintsForOptions;var __awaiter$8=commonjsGlobal&&commonjsGlobal.__awaiter||function(a,s,u,d){function l(p){return p instanceof u?p:new u(function(h){h(p)})}return new(u||(u=Promise))(function(p,h){function y(I){try{E(d.next(I))}catch(N){h(N)}}function _(I){try{E(d.throw(I))}catch(N){h(N)}}function E(I){I.done?p(I.value):l(I.value).then(y,_)}E((d=d.apply(a,s||[])).next())})},__importDefault$9=commonjsGlobal&&commonjsGlobal.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(LocalAudioTrack$1,"__esModule",{value:!0});const logger_1$6=__importDefault$9(logger),stats_1$4=stats,LocalTrack_1$1=__importDefault$9(LocalTrack$1),Track_1$7=Track,utils_1$5=utils;class LocalAudioTrack extends LocalTrack_1$1.default{constructor(s,u){super(s,Track_1$7.Track.Kind.Audio,u),this.stopOnMute=!1,this.monitorSender=()=>__awaiter$8(this,void 0,void 0,function*(){if(!this.sender){this._currentBitrate=0;return}const d=yield this.getSenderStats();d&&this.prevStats&&(this._currentBitrate=stats_1$4.computeBitrate(d,this.prevStats)),this.prevStats=d,setTimeout(()=>{this.monitorSender()},stats_1$4.monitorFrequency)})}setDeviceId(s){return __awaiter$8(this,void 0,void 0,function*(){this.constraints.deviceId!==s&&(this.constraints.deviceId=s,this.isMuted||(yield this.restartTrack()))})}mute(){const s=Object.create(null,{mute:{get:()=>super.mute}});return __awaiter$8(this,void 0,void 0,function*(){return this.source===Track_1$7.Track.Source.Microphone&&this.stopOnMute&&(logger_1$6.default.debug("stopping mic track"),this.mediaStreamTrack.stop()),yield s.mute.call(this),this})}unmute(){const s=Object.create(null,{unmute:{get:()=>super.unmute}});return __awaiter$8(this,void 0,void 0,function*(){return this.source===Track_1$7.Track.Source.Microphone&&this.stopOnMute&&(logger_1$6.default.debug("reacquiring mic track"),yield this.restartTrack()),yield s.unmute.call(this),this})}restartTrack(s){return __awaiter$8(this,void 0,void 0,function*(){let u;if(s){const d=utils_1$5.constraintsForOptions({audio:s});typeof d.audio!="boolean"&&(u=d.audio)}yield this.restart(u)})}startMonitor(){setTimeout(()=>{this.monitorSender()},stats_1$4.monitorFrequency)}getSenderStats(){return __awaiter$8(this,void 0,void 0,function*(){if(!this.sender)return;const s=yield this.sender.getStats();let u;return s.forEach(d=>{d.type==="outbound-rtp"&&(u={type:"audio",streamId:d.id,packetsSent:d.packetsSent,packetsLost:d.packetsLost,bytesSent:d.bytesSent,timestamp:d.timestamp,roundTripTime:d.roundTripTime,jitter:d.jitter})}),u})}}LocalAudioTrack$1.default=LocalAudioTrack;var LocalTrackPublication$1={},TrackPublication={},LocalVideoTrack$1={},__awaiter$7=commonjsGlobal&&commonjsGlobal.__awaiter||function(a,s,u,d){function l(p){return p instanceof u?p:new u(function(h){h(p)})}return new(u||(u=Promise))(function(p,h){function y(I){try{E(d.next(I))}catch(N){h(N)}}function _(I){try{E(d.throw(I))}catch(N){h(N)}}function E(I){I.done?p(I.value):l(I.value).then(y,_)}E((d=d.apply(a,s||[])).next())})},__importDefault$8=commonjsGlobal&&commonjsGlobal.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(LocalVideoTrack$1,"__esModule",{value:!0}),LocalVideoTrack$1.videoLayersFromEncodings=LocalVideoTrack$1.videoQualityForRid=void 0;const logger_1$5=__importDefault$8(logger),livekit_models_1$1=livekit_models,stats_1$3=stats,utils_1$4=utils$1,LocalTrack_1=__importDefault$8(LocalTrack$1),Track_1$6=Track,utils_2=utils,QUALITY_UPGRADE_DELAY=60*1e3,QUALITY_DOWNGRADE_DELAY=5*1e3,ridOrder=["q","h","f"];class LocalVideoTrack extends LocalTrack_1.default{constructor(s,u){super(s,Track_1$6.Track.Kind.Video,u),this.monitorSender=d=>__awaiter$7(this,void 0,void 0,function*(){if(!this.sender){this._currentBitrate=0;return}const l=yield this.getSenderStats(),p=new Map(l.map(h=>[h.rid,h]));if(!d&&this.prevStats&&this.isSimulcast&&this.checkAndUpdateSimulcast(p),this.prevStats){let h=0;p.forEach((y,_)=>{var E;const I=(E=this.prevStats)===null||E===void 0?void 0:E.get(_);h+=stats_1$3.computeBitrate(y,I)}),this._currentBitrate=h}this.prevStats=p,setTimeout(()=>{this.monitorSender(d)},stats_1$3.monitorFrequency)})}get isSimulcast(){return!!(this.sender&&this.sender.getParameters().encodings.length>1)}startMonitor(s,u){var d;this.signalClient=s;const l=(d=this.sender)===null||d===void 0?void 0:d.getParameters();l&&(this.encodings=l.encodings),setTimeout(()=>{this.monitorSender(u)},stats_1$3.monitorFrequency)}stop(){this.sender=void 0,this.mediaStreamTrack.getConstraints(),super.stop()}mute(){const s=Object.create(null,{mute:{get:()=>super.mute}});return __awaiter$7(this,void 0,void 0,function*(){return this.source===Track_1$6.Track.Source.Camera&&(logger_1$5.default.debug("stopping camera track"),this.mediaStreamTrack.stop()),yield s.mute.call(this),this})}unmute(){const s=Object.create(null,{unmute:{get:()=>super.unmute}});return __awaiter$7(this,void 0,void 0,function*(){return this.source===Track_1$6.Track.Source.Camera&&(logger_1$5.default.debug("reacquiring camera track"),yield this.restartTrack()),yield s.unmute.call(this),this})}getSenderStats(){return __awaiter$7(this,void 0,void 0,function*(){if(!this.sender)return[];const s=[],u=yield this.sender.getStats();return u.forEach(d=>{var l;if(d.type==="outbound-rtp"){const p={type:"video",streamId:d.id,frameHeight:d.frameHeight,frameWidth:d.frameWidth,firCount:d.firCount,pliCount:d.pliCount,nackCount:d.nackCount,packetsSent:d.packetsSent,bytesSent:d.bytesSent,framesSent:d.framesSent,timestamp:d.timestamp,rid:(l=d.rid)!==null&&l!==void 0?l:"",retransmittedPacketsSent:d.retransmittedPacketsSent,qualityLimitationReason:d.qualityLimitationReason,qualityLimitationResolutionChanges:d.qualityLimitationResolutionChanges},h=u.get(d.remoteId);h&&(p.jitter=h.jitter,p.packetsLost=h.packetsLost,p.roundTripTime=h.roundTripTime),s.push(p)}}),s})}setPublishingQuality(s){const u=[];for(let d=livekit_models_1$1.VideoQuality.LOW;d<=livekit_models_1$1.VideoQuality.HIGH;d+=1)u.push({quality:d,enabled:d<=s});logger_1$5.default.debug("setting publishing quality. max quality",s),this.setPublishingLayers(u)}setDeviceId(s){return __awaiter$7(this,void 0,void 0,function*(){this.constraints.deviceId!==s&&(this.constraints.deviceId=s,this.isMuted||(yield this.restartTrack()))})}restartTrack(s){return __awaiter$7(this,void 0,void 0,function*(){let u;if(s){const d=utils_2.constraintsForOptions({video:s});typeof d.video!="boolean"&&(u=d.video)}yield this.restart(u)})}setPublishingLayers(s){return __awaiter$7(this,void 0,void 0,function*(){if(logger_1$5.default.debug("setting publishing layers",s),!this.sender||!this.encodings)return;const u=this.sender.getParameters(),{encodings:d}=u;if(!d)return;if(d.length!==this.encodings.length){logger_1$5.default.warn("cannot set publishing layers, encodings mismatch");return}this.activeQualities=s;let l=!1;d.forEach((p,h)=>{var y;let _=(y=p.rid)!==null&&y!==void 0?y:"";_===""&&(_="q");const E=videoQualityForRid(_),I=s.find(N=>N.quality===E);!I||p.active!==I.enabled&&(l=!0,p.active=I.enabled,logger_1$5.default.debug(`setting layer ${I.quality} to ${p.active?"enabled":"disabled"}`),utils_1$4.isFireFox()&&(I.enabled?(p.scaleResolutionDownBy=this.encodings[h].scaleResolutionDownBy,p.maxBitrate=this.encodings[h].maxBitrate,p.maxFrameRate=this.encodings[h].maxFrameRate):(p.scaleResolutionDownBy=4,p.maxBitrate=10,p.maxFrameRate=2)))}),l&&(u.encodings=d,yield this.sender.setParameters(u))})}checkAndUpdateSimulcast(s){var u,d;if(!this.sender||this.isMuted||!this.encodings)return;let l;const{encodings:p}=this.sender.getParameters();if(p.forEach(I=>{!I.active||(l===void 0||l.rid&&I.rid&&ridOrder.indexOf(l.rid)<ridOrder.indexOf(I.rid)||l.maxBitrate!==void 0&&I.maxBitrate!==void 0&&l.maxBitrate<I.maxBitrate)&&(l=I)}),!l)return;const h=(u=l.rid)!==null&&u!==void 0?u:"",y=s.get(h),_=(d=this.prevStats)===null||d===void 0?void 0:d.get(h);if(!y||!_)return;const E=videoQualityForRid(h);if(y.qualityLimitationResolutionChanges-_.qualityLimitationResolutionChanges>0&&(this.lastQualityChange=new Date().getTime()),y.framesSent-_.framesSent>0){if(E===livekit_models_1$1.VideoQuality.HIGH||!this.lastQualityChange)return;const I=E+1;if(new Date().getTime()-this.lastQualityChange<QUALITY_UPGRADE_DELAY||this.activeQualities&&this.activeQualities.some(w=>w.quality===I&&!w.enabled))return;let N=livekit_models_1$1.VideoQuality.LOW;if(p.forEach(w=>{var C;const D=videoQualityForRid((C=w.rid)!==null&&C!==void 0?C:"");D>N&&(N=D)}),I>N)return;logger_1$5.default.debug("upgrading video quality to",I),this.setPublishingQuality(I);return}y.framesSent!==0&&(this.lastExplicitQualityChange&&new Date().getTime()-this.lastExplicitQualityChange<QUALITY_DOWNGRADE_DELAY||E!==livekit_models_1$1.VideoQuality.UNRECOGNIZED&&E!==livekit_models_1$1.VideoQuality.LOW&&(logger_1$5.default.debug("downgrading video quality to",E-1),this.setPublishingQuality(E-1)))}}LocalVideoTrack$1.default=LocalVideoTrack;function videoQualityForRid(a){switch(a){case"f":return livekit_models_1$1.VideoQuality.HIGH;case"h":return livekit_models_1$1.VideoQuality.MEDIUM;case"q":return livekit_models_1$1.VideoQuality.LOW;default:return livekit_models_1$1.VideoQuality.UNRECOGNIZED}}LocalVideoTrack$1.videoQualityForRid=videoQualityForRid;function videoLayersFromEncodings(a,s,u){return u?u.map(d=>{var l,p,h;const y=(l=d.scaleResolutionDownBy)!==null&&l!==void 0?l:1;let _=videoQualityForRid((p=d.rid)!==null&&p!==void 0?p:"");return _===livekit_models_1$1.VideoQuality.UNRECOGNIZED&&u.length===1&&(_=livekit_models_1$1.VideoQuality.HIGH),{quality:_,width:a/y,height:s/y,bitrate:(h=d.maxBitrate)!==null&&h!==void 0?h:0,ssrc:0}}):[{quality:livekit_models_1$1.VideoQuality.HIGH,width:a,height:s,bitrate:0,ssrc:0}]}LocalVideoTrack$1.videoLayersFromEncodings=videoLayersFromEncodings;var RemoteAudioTrack$1={},RemoteTrack$1={};Object.defineProperty(RemoteTrack$1,"__esModule",{value:!0});const events_1$5=events$1,stats_1$2=stats,Track_1$5=Track;class RemoteTrack extends Track_1$5.Track{constructor(s,u,d,l){super(s,d),this.sid=u,this.receiver=l}setMuted(s){this.isMuted!==s&&(this.isMuted=s,this.emit(s?events_1$5.TrackEvent.Muted:events_1$5.TrackEvent.Unmuted,this))}setMediaStream(s){s.onremovetrack=()=>{this.receiver=void 0,this._currentBitrate=0,this.emit(events_1$5.TrackEvent.Ended,this)}}start(){this.startMonitor(),super.enable()}stop(){super.disable()}startMonitor(){setTimeout(()=>{this.monitorReceiver()},stats_1$2.monitorFrequency)}}RemoteTrack$1.default=RemoteTrack;var __awaiter$6=commonjsGlobal&&commonjsGlobal.__awaiter||function(a,s,u,d){function l(p){return p instanceof u?p:new u(function(h){h(p)})}return new(u||(u=Promise))(function(p,h){function y(I){try{E(d.next(I))}catch(N){h(N)}}function _(I){try{E(d.throw(I))}catch(N){h(N)}}function E(I){I.done?p(I.value):l(I.value).then(y,_)}E((d=d.apply(a,s||[])).next())})},__importDefault$7=commonjsGlobal&&commonjsGlobal.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(RemoteAudioTrack$1,"__esModule",{value:!0});const stats_1$1=stats,RemoteTrack_1$1=__importDefault$7(RemoteTrack$1),Track_1$4=Track;class RemoteAudioTrack extends RemoteTrack_1$1.default{constructor(s,u,d){super(s,u,Track_1$4.Track.Kind.Audio,d),this.monitorReceiver=()=>__awaiter$6(this,void 0,void 0,function*(){if(!this.receiver){this._currentBitrate=0;return}const l=yield this.getReceiverStats();l&&this.prevStats&&this.receiver&&(this._currentBitrate=stats_1$1.computeBitrate(l,this.prevStats)),this.prevStats=l,setTimeout(()=>{this.monitorReceiver()},stats_1$1.monitorFrequency)})}getReceiverStats(){return __awaiter$6(this,void 0,void 0,function*(){if(!this.receiver)return;const s=yield this.receiver.getStats();let u;return s.forEach(d=>{d.type==="inbound-rtp"&&(u={type:"audio",timestamp:d.timestamp,jitter:d.jitter,bytesReceived:d.bytesReceived,concealedSamples:d.concealedSamples,concealmentEvents:d.concealmentEvents,silentConcealedSamples:d.silentConcealedSamples,silentConcealmentEvents:d.silentConcealmentEvents,totalAudioEnergy:d.totalAudioEnergy,totalSamplesDuration:d.totalSamplesDuration})}),u})}}RemoteAudioTrack$1.default=RemoteAudioTrack;var RemoteVideoTrack$1={};function r(a,s,u){var d,l,p;s===void 0&&(s=50),u===void 0&&(u={});var h=(d=u.isImmediate)!=null&&d,y=(l=u.callback)!=null&&l,_=u.maxWait,E=Date.now(),I=[];function N(){if(_!==void 0){var C=Date.now()-E;if(C+s>=_)return _-C}return s}var w=function(){var C=[].slice.call(arguments),D=this;return new Promise(function(V,J){var W=h&&p===void 0;if(p!==void 0&&clearTimeout(p),p=setTimeout(function(){if(p=void 0,E=Date.now(),!h){var O=a.apply(D,C);y&&y(O),I.forEach(function($){return(0,$.resolve)(O)}),I=[]}},N()),W){var g=a.apply(D,C);return y&&y(g),V(g)}I.push({resolve:V,reject:J})})};return w.cancel=function(C){p!==void 0&&clearTimeout(p),I.forEach(function(D){return(0,D.reject)(C)}),I=[]},w}var index_esm=Object.freeze(Object.defineProperty({__proto__:null,debounce:r},Symbol.toStringTag,{value:"Module"})),require$$0=getAugmentedNamespace(index_esm),__awaiter$5=commonjsGlobal&&commonjsGlobal.__awaiter||function(a,s,u,d){function l(p){return p instanceof u?p:new u(function(h){h(p)})}return new(u||(u=Promise))(function(p,h){function y(I){try{E(d.next(I))}catch(N){h(N)}}function _(I){try{E(d.throw(I))}catch(N){h(N)}}function E(I){I.done?p(I.value):l(I.value).then(y,_)}E((d=d.apply(a,s||[])).next())})},__importDefault$6=commonjsGlobal&&commonjsGlobal.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(RemoteVideoTrack$1,"__esModule",{value:!0});const ts_debounce_1$1=require$$0,events_1$4=events$1,stats_1=stats,utils_1$3=utils$1,RemoteTrack_1=__importDefault$6(RemoteTrack$1),Track_1$3=Track,REACTION_DELAY=100;class RemoteVideoTrack extends RemoteTrack_1.default{constructor(s,u,d,l){super(s,u,Track_1$3.Track.Kind.Video,d),this.elementInfos=[],this.monitorReceiver=()=>__awaiter$5(this,void 0,void 0,function*(){if(!this.receiver){this._currentBitrate=0;return}const p=yield this.getReceiverStats();p&&this.prevStats&&this.receiver&&(this._currentBitrate=stats_1.computeBitrate(p,this.prevStats)),this.prevStats=p,setTimeout(()=>{this.monitorReceiver()},stats_1.monitorFrequency)}),this.handleVisibilityChanged=p=>{const{target:h,isIntersecting:y}=p,_=this.elementInfos.find(E=>E.element===h);_&&(_.visible=y,_.visibilityChangedAt=Date.now()),this.updateVisibility()},this.debouncedHandleResize=ts_debounce_1$1.debounce(()=>{this.updateDimensions()},REACTION_DELAY),this.adaptiveStream=l}get isAdaptiveStream(){var s;return(s=this.adaptiveStream)!==null&&s!==void 0?s:!1}setMuted(s){super.setMuted(s),this.attachedElements.forEach(u=>{s?Track_1$3.detachTrack(this.mediaStreamTrack,u):Track_1$3.attachToElement(this.mediaStreamTrack,u)})}attach(s){return s?super.attach(s):s=super.attach(),this.adaptiveStream&&(this.elementInfos.push({element:s,visible:!0}),s.handleResize=this.debouncedHandleResize,s.handleVisibilityChanged=this.handleVisibilityChanged,utils_1$3.getIntersectionObserver().observe(s),utils_1$3.getResizeObserver().observe(s)),s}detach(s){let u=[];if(s)return this.stopObservingElement(s),super.detach(s);u=super.detach();for(const d of u)this.stopObservingElement(d);return u}getReceiverStats(){return __awaiter$5(this,void 0,void 0,function*(){if(!this.receiver)return;const s=yield this.receiver.getStats();let u;return s.forEach(d=>{d.type==="inbound-rtp"&&(u={type:"video",framesDecoded:d.framesDecoded,framesDropped:d.framesDropped,framesReceived:d.framesReceived,packetsReceived:d.packetsReceived,packetsLost:d.packetsLost,frameWidth:d.frameWidth,frameHeight:d.frameHeight,pliCount:d.pliCount,firCount:d.firCount,nackCount:d.nackCount,jitter:d.jitter,timestamp:d.timestamp,bytesReceived:d.bytesReceived})}),u})}stopObservingElement(s){var u,d;(u=utils_1$3.getIntersectionObserver())===null||u===void 0||u.unobserve(s),(d=utils_1$3.getResizeObserver())===null||d===void 0||d.unobserve(s),this.elementInfos=this.elementInfos.filter(l=>l.element!==s)}updateVisibility(){const s=this.elementInfos.reduce((d,l)=>Math.max(d,l.visibilityChangedAt||0),0),u=this.elementInfos.some(d=>d.visible);if(this.lastVisible!==u){if(!u&&Date.now()-s<REACTION_DELAY){setTimeout(()=>{this.updateVisibility()},Date.now()-s);return}this.lastVisible=u,this.emit(events_1$4.TrackEvent.VisibilityChanged,u,this)}}updateDimensions(){var s,u;let d=0,l=0;for(const p of this.elementInfos)p.visible&&p.element.clientWidth+p.element.clientHeight>d+l&&(d=p.element.clientWidth,l=p.element.clientHeight);((s=this.lastDimensions)===null||s===void 0?void 0:s.width)===d&&((u=this.lastDimensions)===null||u===void 0?void 0:u.height)===l||(this.lastDimensions={width:d,height:l},this.emit(events_1$4.TrackEvent.VideoDimensionsChanged,this.lastDimensions,this))}}RemoteVideoTrack$1.default=RemoteVideoTrack,function(a){var s=commonjsGlobal&&commonjsGlobal.__importDefault||function(I){return I&&I.__esModule?I:{default:I}};Object.defineProperty(a,"__esModule",{value:!0}),a.TrackPublication=void 0;const u=events.exports,d=events$1,l=s(LocalAudioTrack$1),p=s(LocalVideoTrack$1),h=s(RemoteAudioTrack$1),y=s(RemoteVideoTrack$1),_=Track;class E extends u.EventEmitter{constructor(N,w,C){super(),this.metadataMuted=!1,this.handleMuted=()=>{this.emit(d.TrackEvent.Muted)},this.handleUnmuted=()=>{this.emit(d.TrackEvent.Unmuted)},this.kind=N,this.trackSid=w,this.trackName=C,this.source=_.Track.Source.Unknown}setTrack(N){this.track&&(this.track.off(d.TrackEvent.Muted,this.handleMuted),this.track.off(d.TrackEvent.Unmuted,this.handleUnmuted)),this.track=N,N&&(N.on(d.TrackEvent.Muted,this.handleMuted),N.on(d.TrackEvent.Unmuted,this.handleUnmuted))}get isMuted(){return this.metadataMuted}get isEnabled(){return!0}get isSubscribed(){return this.track!==void 0}get audioTrack(){if(this.track instanceof l.default||this.track instanceof h.default)return this.track}get videoTrack(){if(this.track instanceof p.default||this.track instanceof y.default)return this.track}updateInfo(N){this.trackSid=N.sid,this.trackName=N.name,this.source=_.Track.sourceFromProto(N.source),this.mimeType=N.mimeType,this.kind===_.Track.Kind.Video&&N.width>0&&(this.dimensions={width:N.width,height:N.height},this.simulcasted=N.simulcast),this.trackInfo=N}}a.TrackPublication=E,function(I){(function(N){N.Subscribed="subscribed",N.NotAllowed="not_allowed",N.Unsubscribed="unsubscribed"})(I.SubscriptionStatus||(I.SubscriptionStatus={}))}(E=a.TrackPublication||(a.TrackPublication={}))}(TrackPublication);var __awaiter$4=commonjsGlobal&&commonjsGlobal.__awaiter||function(a,s,u,d){function l(p){return p instanceof u?p:new u(function(h){h(p)})}return new(u||(u=Promise))(function(p,h){function y(I){try{E(d.next(I))}catch(N){h(N)}}function _(I){try{E(d.throw(I))}catch(N){h(N)}}function E(I){I.done?p(I.value):l(I.value).then(y,_)}E((d=d.apply(a,s||[])).next())})};Object.defineProperty(LocalTrackPublication$1,"__esModule",{value:!0});const events_1$3=events$1,TrackPublication_1$1=TrackPublication;class LocalTrackPublication extends TrackPublication_1$1.TrackPublication{constructor(s,u,d){super(s,u.sid,u.name),this.handleTrackEnded=l=>{this.emit(events_1$3.TrackEvent.Ended,l)},this.updateInfo(u),this.setTrack(d)}setTrack(s){this.track&&this.track.off(events_1$3.TrackEvent.Ended,this.handleTrackEnded),super.setTrack(s),s&&s.on(events_1$3.TrackEvent.Ended,this.handleTrackEnded)}get isMuted(){return this.track?this.track.isMuted:super.isMuted}get audioTrack(){return super.audioTrack}get videoTrack(){return super.videoTrack}mute(){var s;return __awaiter$4(this,void 0,void 0,function*(){return(s=this.track)===null||s===void 0?void 0:s.mute()})}unmute(){var s;return __awaiter$4(this,void 0,void 0,function*(){return(s=this.track)===null||s===void 0?void 0:s.unmute()})}}LocalTrackPublication$1.default=LocalTrackPublication;var options$1={};(function(a){Object.defineProperty(a,"__esModule",{value:!0}),a.ScreenSharePresets=a.VideoPresets43=a.VideoPresets=a.AudioPresets=a.VideoPreset=void 0;class s{constructor(d,l,p,h){this.width=d,this.height=l,this.encoding={maxBitrate:p,maxFramerate:h}}get resolution(){return{width:this.width,height:this.height,frameRate:this.encoding.maxFramerate,aspectRatio:this.width/this.height}}}a.VideoPreset=s,function(u){u.telephone={maxBitrate:12e3},u.speech={maxBitrate:2e4},u.music={maxBitrate:32e3}}(a.AudioPresets||(a.AudioPresets={})),a.VideoPresets={qvga:new s(320,180,12e4,10),vga:new s(640,360,3e5,20),qhd:new s(960,540,6e5,25),hd:new s(1280,720,2e6,30),fhd:new s(1920,1080,3e6,30)},a.VideoPresets43={qvga:new s(240,180,9e4,10),vga:new s(480,360,225e3,20),qhd:new s(720,540,45e4,25),hd:new s(960,720,15e5,30),fhd:new s(1440,1080,28e5,30)},a.ScreenSharePresets={vga:new s(640,360,2e5,3),hd_8:new s(1280,720,4e5,5),hd_15:new s(1280,720,1e6,15),fhd_15:new s(1920,1080,15e5,15),fhd_30:new s(1920,1080,3e6,30)}})(options$1);var Participant$1={};(function(a){Object.defineProperty(a,"__esModule",{value:!0}),a.ConnectionQuality=void 0;const s=events.exports,u=livekit_models,d=events$1,l=Track;var p;(function(_){_.Excellent="excellent",_.Good="good",_.Poor="poor",_.Unknown="unknown"})(p=a.ConnectionQuality||(a.ConnectionQuality={}));function h(_){switch(_){case u.ConnectionQuality.EXCELLENT:return p.Excellent;case u.ConnectionQuality.GOOD:return p.Good;case u.ConnectionQuality.POOR:return p.Poor;default:return p.Unknown}}class y extends s.EventEmitter{constructor(E,I){super(),this.audioLevel=0,this.isSpeaking=!1,this._connectionQuality=p.Unknown,this.sid=E,this.identity=I,this.audioTracks=new Map,this.videoTracks=new Map,this.tracks=new Map}getTracks(){return Array.from(this.tracks.values())}getTrack(E){if(E!==l.Track.Source.Unknown){for(const[,I]of this.tracks)if(I.source===E||I.source===l.Track.Source.Unknown&&(E===l.Track.Source.Microphone&&I.kind===l.Track.Kind.Audio&&I.trackName!=="screen"||E===l.Track.Source.Camera&&I.kind===l.Track.Kind.Video&&I.trackName!=="screen"||E===l.Track.Source.ScreenShare&&I.kind===l.Track.Kind.Video&&I.trackName==="screen"||E===l.Track.Source.ScreenShareAudio&&I.kind===l.Track.Kind.Audio&&I.trackName==="screen"))return I}}getTrackByName(E){for(const[,I]of this.tracks)if(I.trackName===E)return I}get connectionQuality(){return this._connectionQuality}get isCameraEnabled(){var E;const I=this.getTrack(l.Track.Source.Camera);return!(!((E=I==null?void 0:I.isMuted)!==null&&E!==void 0)||E)}get isMicrophoneEnabled(){var E;const I=this.getTrack(l.Track.Source.Microphone);return!(!((E=I==null?void 0:I.isMuted)!==null&&E!==void 0)||E)}get isScreenShareEnabled(){return!!this.getTrack(l.Track.Source.ScreenShare)}get joinedAt(){return this.participantInfo?new Date(this.participantInfo.joinedAt*1e3):new Date}updateInfo(E){this.identity=E.identity,this.sid=E.sid,this.name=E.name,this.setMetadata(E.metadata),this.participantInfo=E}setMetadata(E){const I=!this.participantInfo||this.participantInfo.metadata!==E,N=this.metadata;this.metadata=E,I&&(this.emit(d.ParticipantEvent.MetadataChanged,N,this),this.emit(d.ParticipantEvent.ParticipantMetadataChanged,N,this))}setIsSpeaking(E){E!==this.isSpeaking&&(this.isSpeaking=E,E&&(this.lastSpokeAt=new Date),this.emit(d.ParticipantEvent.IsSpeakingChanged,E))}setConnectionQuality(E){const I=this._connectionQuality;this._connectionQuality=h(E),I!==this._connectionQuality&&this.emit(d.ParticipantEvent.ConnectionQualityChanged,this._connectionQuality)}addTrackPublication(E){E.on(d.TrackEvent.Muted,()=>{this.emit(d.ParticipantEvent.TrackMuted,E)}),E.on(d.TrackEvent.Unmuted,()=>{this.emit(d.ParticipantEvent.TrackUnmuted,E)});const I=E;switch(I.track&&(I.track.sid=E.trackSid),this.tracks.set(E.trackSid,E),E.kind){case l.Track.Kind.Audio:this.audioTracks.set(E.trackSid,E);break;case l.Track.Kind.Video:this.videoTracks.set(E.trackSid,E);break}}}a.default=y})(Participant$1);var ParticipantTrackPermission={};Object.defineProperty(ParticipantTrackPermission,"__esModule",{value:!0}),ParticipantTrackPermission.trackPermissionToProto=void 0;function trackPermissionToProto(a){var s;if(!a.participantSid)throw new Error("Invalid track permission, missing participantSid");return{participantSid:a.participantSid,allTracks:(s=a.allowAll)!==null&&s!==void 0?s:!1,trackSids:a.allowedTrackSids||[]}}ParticipantTrackPermission.trackPermissionToProto=trackPermissionToProto;var publishUtils={};(function(a){var s=commonjsGlobal&&commonjsGlobal.__importDefault||function(C){return C&&C.__esModule?C:{default:C}};Object.defineProperty(a,"__esModule",{value:!0}),a.presetsForResolution=a.determineAppropriateEncoding=a.computeVideoEncodings=a.presetsScreenShare=a.presets43=a.presets169=a.mediaTrackToLocalTrack=void 0;const u=s(logger),d=errors,l=s(LocalAudioTrack$1),p=s(LocalVideoTrack$1),h=options$1;function y(C,D){switch(C.kind){case"audio":return new l.default(C,D);case"video":return new p.default(C,D);default:throw new d.TrackInvalidError(`unsupported track type: ${C.kind}`)}}a.mediaTrackToLocalTrack=y,a.presets169=[h.VideoPresets.qvga,h.VideoPresets.vga,h.VideoPresets.qhd,h.VideoPresets.hd,h.VideoPresets.fhd],a.presets43=[h.VideoPresets43.qvga,h.VideoPresets43.vga,h.VideoPresets43.qhd,h.VideoPresets43.hd,h.VideoPresets43.fhd],a.presetsScreenShare=[h.ScreenSharePresets.vga,h.ScreenSharePresets.hd_8,h.ScreenSharePresets.hd_15,h.ScreenSharePresets.fhd_15,h.ScreenSharePresets.fhd_30];const _=["q","h","f"];function E(C,D,V,J){let W=J==null?void 0:J.videoEncoding;C&&(W=J==null?void 0:J.screenShareEncoding);const g=!C&&(J==null?void 0:J.simulcast);if(!W&&!g||!D||!V)return[{}];if(W||(W=I(C,D,V),u.default.debug("using video encoding",W)),!g)return[W];const O=N(C,D,V);let $;const x=O[0];O.length>1&&([,$]=O);const Y=new h.VideoPreset(D,V,W.maxBitrate,W.maxFramerate),te=Math.max(D,V);return te>=960&&$?w(D,V,[x,$,Y]):te>=500?w(D,V,[x,Y]):w(D,V,[Y])}a.computeVideoEncodings=E;function I(C,D,V){const J=N(C,D,V);let{encoding:W}=J[0];const g=Math.max(D,V);for(let O=0;O<J.length;O+=1){const $=J[O];if(W=$.encoding,$.width>=g)break}return W}a.determineAppropriateEncoding=I;function N(C,D,V){if(C)return a.presetsScreenShare;const J=D>V?D/V:V/D;return Math.abs(J-16/9)<Math.abs(J-4/3)?a.presets169:a.presets43}a.presetsForResolution=N;function w(C,D,V){const J=[];return V.forEach((W,g)=>{if(g>=_.length)return;const O=Math.min(C,D),$=_[g];J.push({rid:$,scaleResolutionDownBy:O/Math.min(W.width,W.height),maxBitrate:W.encoding.maxBitrate,maxFramerate:W.encoding.maxFramerate})}),J}})(publishUtils);var RemoteParticipant$1={},RemoteTrackPublication$1={},__importDefault$5=commonjsGlobal&&commonjsGlobal.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(RemoteTrackPublication$1,"__esModule",{value:!0});const logger_1$4=__importDefault$5(logger),livekit_models_1=livekit_models,livekit_rtc_1$2=livekit_rtc,events_1$2=events$1,RemoteVideoTrack_1$1=__importDefault$5(RemoteVideoTrack$1),TrackPublication_1=TrackPublication;class RemoteTrackPublication extends TrackPublication_1.TrackPublication{constructor(){super(...arguments),this._allowed=!0,this.disabled=!1,this.currentVideoQuality=livekit_models_1.VideoQuality.HIGH,this.handleEnded=s=>{this.emit(events_1$2.TrackEvent.Ended,s)},this.handleVisibilityChange=s=>{logger_1$4.default.debug("adaptivestream video visibility",this.trackSid,`visible=${s}`),this.disabled=!s,this.emitTrackUpdate()},this.handleVideoDimensionsChange=s=>{logger_1$4.default.debug("adaptivestream video dimensions",this.trackSid,`${s.width}x${s.height}`),this.videoDimensions=s,this.emitTrackUpdate()}}setSubscribed(s){this.subscribed=s;const u={trackSids:[this.trackSid],subscribe:this.subscribed,participantTracks:[]};this.emit(events_1$2.TrackEvent.UpdateSubscription,u)}get subscriptionStatus(){return this.subscribed===!1||!super.isSubscribed?TrackPublication_1.TrackPublication.SubscriptionStatus.Unsubscribed:this._allowed?TrackPublication_1.TrackPublication.SubscriptionStatus.Subscribed:TrackPublication_1.TrackPublication.SubscriptionStatus.NotAllowed}get isSubscribed(){return this.subscribed===!1||!this._allowed?!1:super.isSubscribed}get isEnabled(){return!this.disabled}setEnabled(s){!this.isManualOperationAllowed()||this.disabled===!s||(this.disabled=!s,this.emitTrackUpdate())}setVideoQuality(s){!this.isManualOperationAllowed()||this.currentVideoQuality===s||(this.currentVideoQuality=s,this.videoDimensions=void 0,this.emitTrackUpdate())}setVideoDimensions(s){var u,d;!this.isManualOperationAllowed()||((u=this.videoDimensions)===null||u===void 0?void 0:u.width)===s.width&&((d=this.videoDimensions)===null||d===void 0?void 0:d.height)===s.height||(this.track instanceof RemoteVideoTrack_1$1.default&&(this.videoDimensions=s),this.currentVideoQuality=void 0,this.emitTrackUpdate())}get videoQuality(){return this.currentVideoQuality}setTrack(s){this.track&&(this.track.off(events_1$2.TrackEvent.VideoDimensionsChanged,this.handleVideoDimensionsChange),this.track.off(events_1$2.TrackEvent.VisibilityChanged,this.handleVisibilityChange),this.track.off(events_1$2.TrackEvent.Ended,this.handleEnded)),super.setTrack(s),s&&(s.sid=this.trackSid,s.on(events_1$2.TrackEvent.VideoDimensionsChanged,this.handleVideoDimensionsChange),s.on(events_1$2.TrackEvent.VisibilityChanged,this.handleVisibilityChange),s.on(events_1$2.TrackEvent.Ended,this.handleEnded))}updateInfo(s){var u;super.updateInfo(s),this.metadataMuted=s.muted,(u=this.track)===null||u===void 0||u.setMuted(s.muted)}isManualOperationAllowed(){return this.isAdaptiveStream?(logger_1$4.default.warn("adaptive stream is enabled, cannot change track settings",this.trackSid),!1):this.isSubscribed?!0:(logger_1$4.default.warn("cannot update track settings when not subscribed",this.trackSid),!1)}get isAdaptiveStream(){return this.track instanceof RemoteVideoTrack_1$1.default&&this.track.isAdaptiveStream}emitTrackUpdate(){const s=livekit_rtc_1$2.UpdateTrackSettings.fromPartial({trackSids:[this.trackSid],disabled:this.disabled});this.videoDimensions?(s.width=this.videoDimensions.width,s.height=this.videoDimensions.height):this.currentVideoQuality!==void 0?s.quality=this.currentVideoQuality:s.quality=livekit_models_1.VideoQuality.HIGH,this.emit(events_1$2.TrackEvent.UpdateSettings,s)}}RemoteTrackPublication$1.default=RemoteTrackPublication;var __importDefault$4=commonjsGlobal&&commonjsGlobal.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(RemoteParticipant$1,"__esModule",{value:!0});const logger_1$3=__importDefault$4(logger),events_1$1=events$1,RemoteAudioTrack_1=__importDefault$4(RemoteAudioTrack$1),RemoteTrackPublication_1=__importDefault$4(RemoteTrackPublication$1),RemoteVideoTrack_1=__importDefault$4(RemoteVideoTrack$1),Track_1$2=Track,Participant_1$1=__importDefault$4(Participant$1);class RemoteParticipant extends Participant_1$1.default{constructor(s,u,d){super(u,d||""),this.signalClient=s,this.tracks=new Map,this.audioTracks=new Map,this.videoTracks=new Map}static fromParticipantInfo(s,u){const d=new RemoteParticipant(s,u.sid,u.identity);return d.updateInfo(u),d}addTrackPublication(s){super.addTrackPublication(s),s.on(events_1$1.TrackEvent.UpdateSettings,u=>{this.signalClient.sendUpdateTrackSettings(u)}),s.on(events_1$1.TrackEvent.UpdateSubscription,u=>{this.signalClient.sendUpdateSubscription(u)}),s.on(events_1$1.TrackEvent.Ended,u=>{this.emit(events_1$1.ParticipantEvent.TrackUnsubscribed,u,s)})}getTrack(s){const u=super.getTrack(s);if(u)return u}getTrackByName(s){const u=super.getTrackByName(s);if(u)return u}addSubscribedMediaTrack(s,u,d,l,p,h){let y=this.getTrackPublication(u);if(y||u.startsWith("TR")||this.tracks.forEach(I=>{!y&&s.kind===I.kind.toString()&&(y=I)}),!y){if(h===0){logger_1$3.default.error("could not find published track",this.sid,u),this.emit(events_1$1.ParticipantEvent.TrackSubscriptionFailed,u);return}h===void 0&&(h=20),setTimeout(()=>{this.addSubscribedMediaTrack(s,u,d,l,p,h-1)},150);return}const _=s.kind==="video";let E;return _?E=new RemoteVideoTrack_1.default(s,u,l,p):E=new RemoteAudioTrack_1.default(s,u,l),E.source=y.source,E.isMuted=y.isMuted,E.setMediaStream(d),E.start(),y.setTrack(E),this.emit(events_1$1.ParticipantEvent.TrackSubscribed,E,y),y}get hasMetadata(){return!!this.participantInfo}getTrackPublication(s){return this.tracks.get(s)}updateInfo(s){const u=this.hasMetadata;super.updateInfo(s);const d=new Map,l=new Map;s.tracks.forEach(p=>{let h=this.getTrackPublication(p.sid);if(h)h.updateInfo(p);else{const y=Track_1$2.Track.kindFromProto(p.type);if(!y)return;h=new RemoteTrackPublication_1.default(y,p.sid,p.name),h.updateInfo(p),l.set(p.sid,h),this.addTrackPublication(h)}d.set(p.sid,h)}),u&&l.forEach(p=>{this.emit(events_1$1.ParticipantEvent.TrackPublished,p)}),this.tracks.forEach(p=>{d.has(p.trackSid)||this.unpublishTrack(p.trackSid,!0)})}unpublishTrack(s,u){const d=this.tracks.get(s);if(!d)return;switch(this.tracks.delete(s),d.kind){case Track_1$2.Track.Kind.Audio:this.audioTracks.delete(s);break;case Track_1$2.Track.Kind.Video:this.videoTracks.delete(s);break}const{track:l}=d;if(l){const{isSubscribed:p}=d;l.stop(),d.setTrack(void 0),p&&this.emit(events_1$1.ParticipantEvent.TrackUnsubscribed,l,d)}u&&this.emit(events_1$1.ParticipantEvent.TrackUnpublished,d)}emit(s,...u){return logger_1$3.default.trace("participant event",this.sid,s,...u),super.emit(s,...u)}}RemoteParticipant$1.default=RemoteParticipant;var __createBinding=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(a,s,u,d){d===void 0&&(d=u),Object.defineProperty(a,d,{enumerable:!0,get:function(){return s[u]}})}:function(a,s,u,d){d===void 0&&(d=u),a[d]=s[u]}),__setModuleDefault=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(a,s){Object.defineProperty(a,"default",{enumerable:!0,value:s})}:function(a,s){a.default=s}),__importStar=commonjsGlobal&&commonjsGlobal.__importStar||function(a){if(a&&a.__esModule)return a;var s={};if(a!=null)for(var u in a)u!=="default"&&Object.prototype.hasOwnProperty.call(a,u)&&__createBinding(s,a,u);return __setModuleDefault(s,a),s},__awaiter$3=commonjsGlobal&&commonjsGlobal.__awaiter||function(a,s,u,d){function l(p){return p instanceof u?p:new u(function(h){h(p)})}return new(u||(u=Promise))(function(p,h){function y(I){try{E(d.next(I))}catch(N){h(N)}}function _(I){try{E(d.throw(I))}catch(N){h(N)}}function E(I){I.done?p(I.value):l(I.value).then(y,_)}E((d=d.apply(a,s||[])).next())})},__importDefault$3=commonjsGlobal&&commonjsGlobal.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(LocalParticipant$1,"__esModule",{value:!0});const logger_1$2=__importDefault$3(logger),livekit_rtc_1$1=livekit_rtc,errors_1$2=errors,events_1=events$1,LocalAudioTrack_1$1=__importDefault$3(LocalAudioTrack$1),LocalTrackPublication_1=__importDefault$3(LocalTrackPublication$1),LocalVideoTrack_1$1=__importStar(LocalVideoTrack$1),options_1$2=options$1,Track_1$1=Track,utils_1$2=utils,Participant_1=__importDefault$3(Participant$1),ParticipantTrackPermission_1=ParticipantTrackPermission,publishUtils_1$1=publishUtils,RemoteParticipant_1=__importDefault$3(RemoteParticipant$1);class LocalParticipant extends Participant_1.default{constructor(s,u,d,l){super(s,u),this.pendingPublishing=new Set,this.onTrackUnmuted=p=>{this.onTrackMuted(p,!1)},this.onTrackMuted=(p,h)=>{if(h===void 0&&(h=!0),!p.sid){logger_1$2.default.error("could not update mute status for unpublished track",p);return}this.engine.updateMuteStatus(p.sid,h)},this.handleSubscribedQualityUpdate=p=>{var h,y;if(!(!((h=this.roomOptions)===null||h===void 0)&&h.dynacast))return;const _=this.videoTracks.get(p.trackSid);if(!_){logger_1$2.default.warn("handleSubscribedQualityUpdate","received subscribed quality update for unknown track",p.trackSid);return}(y=_.videoTrack)===null||y===void 0||y.setPublishingLayers(p.subscribedQualities)},this.onTrackUnpublish=p=>{this.unpublishTrack(p)},this.audioTracks=new Map,this.videoTracks=new Map,this.tracks=new Map,this.engine=d,this.roomOptions=l,this.engine.client.onRemoteMuteChanged=(p,h)=>{const y=this.tracks.get(p);!y||!y.track||(h?y.mute():y.unmute())},this.engine.client.onSubscribedQualityUpdate=this.handleSubscribedQualityUpdate}get lastCameraError(){return this.cameraError}get lastMicrophoneError(){return this.microphoneError}getTrack(s){const u=super.getTrack(s);if(u)return u}getTrackByName(s){const u=super.getTrackByName(s);if(u)return u}setCameraEnabled(s){return this.setTrackEnabled(Track_1$1.Track.Source.Camera,s)}setMicrophoneEnabled(s){return this.setTrackEnabled(Track_1$1.Track.Source.Microphone,s)}setScreenShareEnabled(s){return this.setTrackEnabled(Track_1$1.Track.Source.ScreenShare,s)}setTrackEnabled(s,u){return __awaiter$3(this,void 0,void 0,function*(){logger_1$2.default.debug("setTrackEnabled",s,u);const d=this.getTrack(s);if(u)if(d)yield d.unmute();else{let l;if(this.pendingPublishing.has(s)){logger_1$2.default.info("skipping duplicate published source",s);return}this.pendingPublishing.add(s);try{switch(s){case Track_1$1.Track.Source.Camera:[l]=yield this.createTracks({video:!0});break;case Track_1$1.Track.Source.Microphone:[l]=yield this.createTracks({audio:!0});break;case Track_1$1.Track.Source.ScreenShare:[l]=yield this.createScreenTracks({audio:!1});break;default:throw new errors_1$2.TrackInvalidError(s)}yield this.publishTrack(l)}catch(p){throw p instanceof Error&&!(p instanceof errors_1$2.TrackInvalidError)&&this.emit(events_1.ParticipantEvent.MediaDevicesError,p),p}finally{this.pendingPublishing.delete(s)}}else d&&d.track&&(s===Track_1$1.Track.Source.ScreenShare?this.unpublishTrack(d.track):yield d.mute())})}enableCameraAndMicrophone(){return __awaiter$3(this,void 0,void 0,function*(){if(!(this.pendingPublishing.has(Track_1$1.Track.Source.Camera)||this.pendingPublishing.has(Track_1$1.Track.Source.Microphone))){this.pendingPublishing.add(Track_1$1.Track.Source.Camera),this.pendingPublishing.add(Track_1$1.Track.Source.Microphone);try{const s=yield this.createTracks({audio:!0,video:!0});yield Promise.all(s.map(u=>this.publishTrack(u)))}finally{this.pendingPublishing.delete(Track_1$1.Track.Source.Camera),this.pendingPublishing.delete(Track_1$1.Track.Source.Microphone)}}})}createTracks(s){var u,d;return __awaiter$3(this,void 0,void 0,function*(){const l=utils_1$2.mergeDefaultOptions(s,(u=this.roomOptions)===null||u===void 0?void 0:u.audioCaptureDefaults,(d=this.roomOptions)===null||d===void 0?void 0:d.videoCaptureDefaults),p=utils_1$2.constraintsForOptions(l);let h;try{h=yield navigator.mediaDevices.getUserMedia(p)}catch(y){throw y instanceof Error&&(p.audio&&(this.microphoneError=y),p.video&&(this.cameraError=y)),y}return p.audio&&(this.microphoneError=void 0),p.video&&(this.cameraError=void 0),h.getTracks().map(y=>{const _=y.kind==="audio";_?s.audio:s.video;let E;const I=_?p.audio:p.video;typeof I!="boolean"&&(E=I);const N=publishUtils_1$1.mediaTrackToLocalTrack(y,E);return N.kind===Track_1$1.Track.Kind.Video?N.source=Track_1$1.Track.Source.Camera:N.kind===Track_1$1.Track.Kind.Audio&&(N.source=Track_1$1.Track.Source.Microphone),N})})}createScreenTracks(s){var u;return __awaiter$3(this,void 0,void 0,function*(){s===void 0&&(s={}),s.resolution===void 0&&(s.resolution=options_1$2.VideoPresets.fhd.resolution);let d=!0;s.resolution&&(d={width:s.resolution.width,height:s.resolution.height,frameRate:s.resolution.frameRate});const l=yield navigator.mediaDevices.getDisplayMedia({audio:(u=s.audio)!==null&&u!==void 0?u:!1,video:d}),p=l.getVideoTracks();if(p.length===0)throw new errors_1$2.TrackInvalidError("no video track found");const h=new LocalVideoTrack_1$1.default(p[0]);h.source=Track_1$1.Track.Source.ScreenShare;const y=[h];if(l.getAudioTracks().length>0){const _=new LocalAudioTrack_1$1.default(l.getAudioTracks()[0]);_.source=Track_1$1.Track.Source.ScreenShareAudio,y.push(_)}return y})}publishTrack(s,u){var d,l,p,h,y,_,E,I;return __awaiter$3(this,void 0,void 0,function*(){const N=Object.assign(Object.assign({},(d=this.roomOptions)===null||d===void 0?void 0:d.publishDefaults),u);if(s instanceof MediaStreamTrack)switch(s.kind){case"audio":s=new LocalAudioTrack_1$1.default(s);break;case"video":s=new LocalVideoTrack_1$1.default(s);break;default:throw new errors_1$2.TrackInvalidError(`unsupported MediaStreamTrack kind ${s.kind}`)}let w;if(this.tracks.forEach(O=>{!O.track||O.track===s&&(w=O)}),w)return w;N.source&&(s.source=N.source),N.stopMicTrackOnMute&&s instanceof LocalAudioTrack_1$1.default&&(s.stopOnMute=!0),s.on(events_1.TrackEvent.Muted,this.onTrackMuted),s.on(events_1.TrackEvent.Unmuted,this.onTrackUnmuted),s.on(events_1.TrackEvent.Ended,this.onTrackUnpublish);const C=livekit_rtc_1$1.AddTrackRequest.fromPartial({cid:s.mediaStreamTrack.id,name:u==null?void 0:u.name,type:Track_1$1.Track.kindToProto(s.kind),muted:s.isMuted,source:Track_1$1.Track.sourceToProto(s.source),disableDtx:!(!((l=N==null?void 0:N.dtx)!==null&&l!==void 0)||l)});let D;if(s.kind===Track_1$1.Track.Kind.Video){const O=s.mediaStreamTrack.getSettings(),$=(p=O.width)!==null&&p!==void 0?p:(h=s.dimensions)===null||h===void 0?void 0:h.width,x=(y=O.height)!==null&&y!==void 0?y:(_=s.dimensions)===null||_===void 0?void 0:_.height;C.width=$!=null?$:0,C.height=x!=null?x:0,D=publishUtils_1$1.computeVideoEncodings(s.source===Track_1$1.Track.Source.ScreenShare,$,x,N),C.layers=LocalVideoTrack_1$1.videoLayersFromEncodings(C.width,C.height,D)}else s.kind===Track_1$1.Track.Kind.Audio&&N.audioBitrate&&(D=[{maxBitrate:N.audioBitrate}]);const V=yield this.engine.addTrack(C),J=new LocalTrackPublication_1.default(s.kind,V,s);if(s.sid=V.sid,!this.engine.publisher)throw new errors_1$2.UnexpectedConnectionState("publisher is closed");logger_1$2.default.debug(`publishing ${s.kind} with encodings`,D,V);const W={direction:"sendonly"};D&&(W.sendEncodings=D);const g=this.engine.publisher.pc.addTransceiver(s.mediaStreamTrack,W);if(this.engine.negotiate(),s.sender=g.sender,s instanceof LocalVideoTrack_1$1.default){const O=(I=(E=this.roomOptions)===null||E===void 0?void 0:E.expDisableLayerPause)!==null&&I!==void 0?I:!1;s.startMonitor(this.engine.client,O)}else s instanceof LocalAudioTrack_1$1.default&&s.startMonitor();return N.videoCodec&&this.setPreferredCodec(g,s.kind,N.videoCodec),this.addTrackPublication(J),this.emit(events_1.ParticipantEvent.LocalTrackPublished,J),J})}unpublishTrack(s){var u,d;const l=this.getPublicationForTrack(s);if(logger_1$2.default.debug("unpublishTrack","unpublishing track",s),!l||!l.track)return logger_1$2.default.warn("unpublishTrack","track was not unpublished because no publication was found",s),null;s=l.track,s.off(events_1.TrackEvent.Muted,this.onTrackMuted),s.off(events_1.TrackEvent.Unmuted,this.onTrackUnmuted),s.off(events_1.TrackEvent.Ended,this.onTrackUnpublish),(!((d=(u=this.roomOptions)===null||u===void 0?void 0:u.stopLocalTrackOnUnpublish)!==null&&d!==void 0)||d)&&s.stop();const{mediaStreamTrack:p}=s;switch(this.engine.publisher&&this.engine.publisher.pc.getSenders().forEach(y=>{var _;if(y.track===p)try{(_=this.engine.publisher)===null||_===void 0||_.pc.removeTrack(y),this.engine.negotiate()}catch(E){logger_1$2.default.warn("unpublishTrack","failed to remove track",E)}}),this.tracks.delete(l.trackSid),l.kind){case Track_1$1.Track.Kind.Audio:this.audioTracks.delete(l.trackSid);break;case Track_1$1.Track.Kind.Video:this.videoTracks.delete(l.trackSid);break}return l.setTrack(void 0),this.emit(events_1.ParticipantEvent.LocalTrackUnpublished,l),l}unpublishTracks(s){const u=[];return s.forEach(d=>{const l=this.unpublishTrack(d);l&&u.push(l)}),u}get publisherMetrics(){return null}publishData(s,u,d){return __awaiter$3(this,void 0,void 0,function*(){const l=[];d!==void 0&&d.forEach(h=>{h instanceof RemoteParticipant_1.default?l.push(h.sid):l.push(h)});const p={kind:u,user:{participantSid:this.sid,payload:s,destinationSids:l}};yield this.engine.sendDataPacket(p,u)})}setTrackSubscriptionPermissions(s,u=[]){this.engine.client.sendUpdateSubscriptionPermissions(s,u.map(d=>ParticipantTrackPermission_1.trackPermissionToProto(d)))}getPublicationForTrack(s){let u;return this.tracks.forEach(d=>{const l=d.track;!l||(s instanceof MediaStreamTrack?(l instanceof LocalAudioTrack_1$1.default||l instanceof LocalVideoTrack_1$1.default)&&l.mediaStreamTrack===s&&(u=d):s===l&&(u=d))}),u}setPreferredCodec(s,u,d){if(!("getCapabilities"in RTCRtpSender))return;const l=RTCRtpSender.getCapabilities(u);if(!l)return;const p=l.codecs.find(h=>{const y=h.mimeType.toLowerCase(),_=y===`video/${d}`;return d==="h264"&&h.sdpFmtpLine?_&&h.sdpFmtpLine.includes("profile-level-id=42e01f"):_||y==="audio/opus"});p&&"setCodecPreferences"in s&&s.setCodecPreferences([p])}publishedTracksInfo(){const s=[];return this.tracks.forEach(u=>{u.track!==void 0&&s.push({cid:u.track.mediaStreamTrack.id,track:u.trackInfo})}),s}}LocalParticipant$1.default=LocalParticipant;var Room={},SignalClient$1={};let logDisabled_=!0,deprecationWarnings_=!0;function extractVersion(a,s,u){const d=a.match(s);return d&&d.length>=u&&parseInt(d[u],10)}function wrapPeerConnectionEvent(a,s,u){if(!a.RTCPeerConnection)return;const d=a.RTCPeerConnection.prototype,l=d.addEventListener;d.addEventListener=function(h,y){if(h!==s)return l.apply(this,arguments);const _=E=>{const I=u(E);I&&(y.handleEvent?y.handleEvent(I):y(I))};return this._eventMap=this._eventMap||{},this._eventMap[s]||(this._eventMap[s]=new Map),this._eventMap[s].set(y,_),l.apply(this,[h,_])};const p=d.removeEventListener;d.removeEventListener=function(h,y){if(h!==s||!this._eventMap||!this._eventMap[s])return p.apply(this,arguments);if(!this._eventMap[s].has(y))return p.apply(this,arguments);const _=this._eventMap[s].get(y);return this._eventMap[s].delete(y),this._eventMap[s].size===0&&delete this._eventMap[s],Object.keys(this._eventMap).length===0&&delete this._eventMap,p.apply(this,[h,_])},Object.defineProperty(d,"on"+s,{get(){return this["_on"+s]},set(h){this["_on"+s]&&(this.removeEventListener(s,this["_on"+s]),delete this["_on"+s]),h&&this.addEventListener(s,this["_on"+s]=h)},enumerable:!0,configurable:!0})}function disableLog(a){return typeof a!="boolean"?new Error("Argument type: "+typeof a+". Please use a boolean."):(logDisabled_=a,a?"adapter.js logging disabled":"adapter.js logging enabled")}function disableWarnings(a){return typeof a!="boolean"?new Error("Argument type: "+typeof a+". Please use a boolean."):(deprecationWarnings_=!a,"adapter.js deprecation warnings "+(a?"disabled":"enabled"))}function log(){if(typeof window=="object"){if(logDisabled_)return;typeof console!="undefined"&&typeof console.log=="function"&&console.log.apply(console,arguments)}}function deprecated(a,s){!deprecationWarnings_||console.warn(a+" is deprecated, please use "+s+" instead.")}function detectBrowser(a){const s={browser:null,version:null};if(typeof a=="undefined"||!a.navigator)return s.browser="Not a browser.",s;const{navigator:u}=a;if(u.mozGetUserMedia)s.browser="firefox",s.version=extractVersion(u.userAgent,/Firefox\/(\d+)\./,1);else if(u.webkitGetUserMedia||a.isSecureContext===!1&&a.webkitRTCPeerConnection&&!a.RTCIceGatherer)s.browser="chrome",s.version=extractVersion(u.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else if(a.RTCPeerConnection&&u.userAgent.match(/AppleWebKit\/(\d+)\./))s.browser="safari",s.version=extractVersion(u.userAgent,/AppleWebKit\/(\d+)\./,1),s.supportsUnifiedPlan=a.RTCRtpTransceiver&&"currentDirection"in a.RTCRtpTransceiver.prototype;else return s.browser="Not a supported browser.",s;return s}function isObject(a){return Object.prototype.toString.call(a)==="[object Object]"}function compactObject(a){return isObject(a)?Object.keys(a).reduce(function(s,u){const d=isObject(a[u]),l=d?compactObject(a[u]):a[u],p=d&&!Object.keys(l).length;return l===void 0||p?s:Object.assign(s,{[u]:l})},{}):a}function walkStats(a,s,u){!s||u.has(s.id)||(u.set(s.id,s),Object.keys(s).forEach(d=>{d.endsWith("Id")?walkStats(a,a.get(s[d]),u):d.endsWith("Ids")&&s[d].forEach(l=>{walkStats(a,a.get(l),u)})}))}function filterStats(a,s,u){const d=u?"outbound-rtp":"inbound-rtp",l=new Map;if(s===null)return l;const p=[];return a.forEach(h=>{h.type==="track"&&h.trackIdentifier===s.id&&p.push(h)}),p.forEach(h=>{a.forEach(y=>{y.type===d&&y.trackId===h.id&&walkStats(a,y,l)})}),l}const logging=log;function shimGetUserMedia$2(a,s){const u=a&&a.navigator;if(!u.mediaDevices)return;const d=function(y){if(typeof y!="object"||y.mandatory||y.optional)return y;const _={};return Object.keys(y).forEach(E=>{if(E==="require"||E==="advanced"||E==="mediaSource")return;const I=typeof y[E]=="object"?y[E]:{ideal:y[E]};I.exact!==void 0&&typeof I.exact=="number"&&(I.min=I.max=I.exact);const N=function(w,C){return w?w+C.charAt(0).toUpperCase()+C.slice(1):C==="deviceId"?"sourceId":C};if(I.ideal!==void 0){_.optional=_.optional||[];let w={};typeof I.ideal=="number"?(w[N("min",E)]=I.ideal,_.optional.push(w),w={},w[N("max",E)]=I.ideal,_.optional.push(w)):(w[N("",E)]=I.ideal,_.optional.push(w))}I.exact!==void 0&&typeof I.exact!="number"?(_.mandatory=_.mandatory||{},_.mandatory[N("",E)]=I.exact):["min","max"].forEach(w=>{I[w]!==void 0&&(_.mandatory=_.mandatory||{},_.mandatory[N(w,E)]=I[w])})}),y.advanced&&(_.optional=(_.optional||[]).concat(y.advanced)),_},l=function(y,_){if(s.version>=61)return _(y);if(y=JSON.parse(JSON.stringify(y)),y&&typeof y.audio=="object"){const E=function(I,N,w){N in I&&!(w in I)&&(I[w]=I[N],delete I[N])};y=JSON.parse(JSON.stringify(y)),E(y.audio,"autoGainControl","googAutoGainControl"),E(y.audio,"noiseSuppression","googNoiseSuppression"),y.audio=d(y.audio)}if(y&&typeof y.video=="object"){let E=y.video.facingMode;E=E&&(typeof E=="object"?E:{ideal:E});const I=s.version<66;if(E&&(E.exact==="user"||E.exact==="environment"||E.ideal==="user"||E.ideal==="environment")&&!(u.mediaDevices.getSupportedConstraints&&u.mediaDevices.getSupportedConstraints().facingMode&&!I)){delete y.video.facingMode;let N;if(E.exact==="environment"||E.ideal==="environment"?N=["back","rear"]:(E.exact==="user"||E.ideal==="user")&&(N=["front"]),N)return u.mediaDevices.enumerateDevices().then(w=>{w=w.filter(D=>D.kind==="videoinput");let C=w.find(D=>N.some(V=>D.label.toLowerCase().includes(V)));return!C&&w.length&&N.includes("back")&&(C=w[w.length-1]),C&&(y.video.deviceId=E.exact?{exact:C.deviceId}:{ideal:C.deviceId}),y.video=d(y.video),logging("chrome: "+JSON.stringify(y)),_(y)})}y.video=d(y.video)}return logging("chrome: "+JSON.stringify(y)),_(y)},p=function(y){return s.version>=64?y:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[y.name]||y.name,message:y.message,constraint:y.constraint||y.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}},h=function(y,_,E){l(y,I=>{u.webkitGetUserMedia(I,_,N=>{E&&E(p(N))})})};if(u.getUserMedia=h.bind(u),u.mediaDevices.getUserMedia){const y=u.mediaDevices.getUserMedia.bind(u.mediaDevices);u.mediaDevices.getUserMedia=function(_){return l(_,E=>y(E).then(I=>{if(E.audio&&!I.getAudioTracks().length||E.video&&!I.getVideoTracks().length)throw I.getTracks().forEach(N=>{N.stop()}),new DOMException("","NotFoundError");return I},I=>Promise.reject(p(I))))}}}function shimGetDisplayMedia$1(a,s){if(!(a.navigator.mediaDevices&&"getDisplayMedia"in a.navigator.mediaDevices)&&!!a.navigator.mediaDevices){if(typeof s!="function"){console.error("shimGetDisplayMedia: getSourceId argument is not a function");return}a.navigator.mediaDevices.getDisplayMedia=function(d){return s(d).then(l=>{const p=d.video&&d.video.width,h=d.video&&d.video.height,y=d.video&&d.video.frameRate;return d.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:l,maxFrameRate:y||3}},p&&(d.video.mandatory.maxWidth=p),h&&(d.video.mandatory.maxHeight=h),a.navigator.mediaDevices.getUserMedia(d)})}}}function shimMediaStream(a){a.MediaStream=a.MediaStream||a.webkitMediaStream}function shimOnTrack$1(a){if(typeof a=="object"&&a.RTCPeerConnection&&!("ontrack"in a.RTCPeerConnection.prototype)){Object.defineProperty(a.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(u){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=u)},enumerable:!0,configurable:!0});const s=a.RTCPeerConnection.prototype.setRemoteDescription;a.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=d=>{d.stream.addEventListener("addtrack",l=>{let p;a.RTCPeerConnection.prototype.getReceivers?p=this.getReceivers().find(y=>y.track&&y.track.id===l.track.id):p={track:l.track};const h=new Event("track");h.track=l.track,h.receiver=p,h.transceiver={receiver:p},h.streams=[d.stream],this.dispatchEvent(h)}),d.stream.getTracks().forEach(l=>{let p;a.RTCPeerConnection.prototype.getReceivers?p=this.getReceivers().find(y=>y.track&&y.track.id===l.id):p={track:l};const h=new Event("track");h.track=l,h.receiver=p,h.transceiver={receiver:p},h.streams=[d.stream],this.dispatchEvent(h)})},this.addEventListener("addstream",this._ontrackpoly)),s.apply(this,arguments)}}else wrapPeerConnectionEvent(a,"track",s=>(s.transceiver||Object.defineProperty(s,"transceiver",{value:{receiver:s.receiver}}),s))}function shimGetSendersWithDtmf(a){if(typeof a=="object"&&a.RTCPeerConnection&&!("getSenders"in a.RTCPeerConnection.prototype)&&"createDTMFSender"in a.RTCPeerConnection.prototype){const s=function(l,p){return{track:p,get dtmf(){return this._dtmf===void 0&&(p.kind==="audio"?this._dtmf=l.createDTMFSender(p):this._dtmf=null),this._dtmf},_pc:l}};if(!a.RTCPeerConnection.prototype.getSenders){a.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const l=a.RTCPeerConnection.prototype.addTrack;a.RTCPeerConnection.prototype.addTrack=function(y,_){let E=l.apply(this,arguments);return E||(E=s(this,y),this._senders.push(E)),E};const p=a.RTCPeerConnection.prototype.removeTrack;a.RTCPeerConnection.prototype.removeTrack=function(y){p.apply(this,arguments);const _=this._senders.indexOf(y);_!==-1&&this._senders.splice(_,1)}}const u=a.RTCPeerConnection.prototype.addStream;a.RTCPeerConnection.prototype.addStream=function(p){this._senders=this._senders||[],u.apply(this,[p]),p.getTracks().forEach(h=>{this._senders.push(s(this,h))})};const d=a.RTCPeerConnection.prototype.removeStream;a.RTCPeerConnection.prototype.removeStream=function(p){this._senders=this._senders||[],d.apply(this,[p]),p.getTracks().forEach(h=>{const y=this._senders.find(_=>_.track===h);y&&this._senders.splice(this._senders.indexOf(y),1)})}}else if(typeof a=="object"&&a.RTCPeerConnection&&"getSenders"in a.RTCPeerConnection.prototype&&"createDTMFSender"in a.RTCPeerConnection.prototype&&a.RTCRtpSender&&!("dtmf"in a.RTCRtpSender.prototype)){const s=a.RTCPeerConnection.prototype.getSenders;a.RTCPeerConnection.prototype.getSenders=function(){const d=s.apply(this,[]);return d.forEach(l=>l._pc=this),d},Object.defineProperty(a.RTCRtpSender.prototype,"dtmf",{get(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function shimGetStats(a){if(!a.RTCPeerConnection)return;const s=a.RTCPeerConnection.prototype.getStats;a.RTCPeerConnection.prototype.getStats=function(){const[d,l,p]=arguments;if(arguments.length>0&&typeof d=="function")return s.apply(this,arguments);if(s.length===0&&(arguments.length===0||typeof d!="function"))return s.apply(this,[]);const h=function(_){const E={};return _.result().forEach(N=>{const w={id:N.id,timestamp:N.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[N.type]||N.type};N.names().forEach(C=>{w[C]=N.stat(C)}),E[w.id]=w}),E},y=function(_){return new Map(Object.keys(_).map(E=>[E,_[E]]))};if(arguments.length>=2){const _=function(E){l(y(h(E)))};return s.apply(this,[_,d])}return new Promise((_,E)=>{s.apply(this,[function(I){_(y(h(I)))},E])}).then(l,p)}}function shimSenderReceiverGetStats(a){if(!(typeof a=="object"&&a.RTCPeerConnection&&a.RTCRtpSender&&a.RTCRtpReceiver))return;if(!("getStats"in a.RTCRtpSender.prototype)){const u=a.RTCPeerConnection.prototype.getSenders;u&&(a.RTCPeerConnection.prototype.getSenders=function(){const p=u.apply(this,[]);return p.forEach(h=>h._pc=this),p});const d=a.RTCPeerConnection.prototype.addTrack;d&&(a.RTCPeerConnection.prototype.addTrack=function(){const p=d.apply(this,arguments);return p._pc=this,p}),a.RTCRtpSender.prototype.getStats=function(){const p=this;return this._pc.getStats().then(h=>filterStats(h,p.track,!0))}}if(!("getStats"in a.RTCRtpReceiver.prototype)){const u=a.RTCPeerConnection.prototype.getReceivers;u&&(a.RTCPeerConnection.prototype.getReceivers=function(){const l=u.apply(this,[]);return l.forEach(p=>p._pc=this),l}),wrapPeerConnectionEvent(a,"track",d=>(d.receiver._pc=d.srcElement,d)),a.RTCRtpReceiver.prototype.getStats=function(){const l=this;return this._pc.getStats().then(p=>filterStats(p,l.track,!1))}}if(!("getStats"in a.RTCRtpSender.prototype&&"getStats"in a.RTCRtpReceiver.prototype))return;const s=a.RTCPeerConnection.prototype.getStats;a.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof a.MediaStreamTrack){const d=arguments[0];let l,p,h;return this.getSenders().forEach(y=>{y.track===d&&(l?h=!0:l=y)}),this.getReceivers().forEach(y=>(y.track===d&&(p?h=!0:p=y),y.track===d)),h||l&&p?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):l?l.getStats():p?p.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return s.apply(this,arguments)}}function shimAddTrackRemoveTrackWithNative(a){a.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(h=>this._shimmedLocalStreams[h][0])};const s=a.RTCPeerConnection.prototype.addTrack;a.RTCPeerConnection.prototype.addTrack=function(h,y){if(!y)return s.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const _=s.apply(this,arguments);return this._shimmedLocalStreams[y.id]?this._shimmedLocalStreams[y.id].indexOf(_)===-1&&this._shimmedLocalStreams[y.id].push(_):this._shimmedLocalStreams[y.id]=[y,_],_};const u=a.RTCPeerConnection.prototype.addStream;a.RTCPeerConnection.prototype.addStream=function(h){this._shimmedLocalStreams=this._shimmedLocalStreams||{},h.getTracks().forEach(E=>{if(this.getSenders().find(N=>N.track===E))throw new DOMException("Track already exists.","InvalidAccessError")});const y=this.getSenders();u.apply(this,arguments);const _=this.getSenders().filter(E=>y.indexOf(E)===-1);this._shimmedLocalStreams[h.id]=[h].concat(_)};const d=a.RTCPeerConnection.prototype.removeStream;a.RTCPeerConnection.prototype.removeStream=function(h){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[h.id],d.apply(this,arguments)};const l=a.RTCPeerConnection.prototype.removeTrack;a.RTCPeerConnection.prototype.removeTrack=function(h){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},h&&Object.keys(this._shimmedLocalStreams).forEach(y=>{const _=this._shimmedLocalStreams[y].indexOf(h);_!==-1&&this._shimmedLocalStreams[y].splice(_,1),this._shimmedLocalStreams[y].length===1&&delete this._shimmedLocalStreams[y]}),l.apply(this,arguments)}}function shimAddTrackRemoveTrack(a,s){if(!a.RTCPeerConnection)return;if(a.RTCPeerConnection.prototype.addTrack&&s.version>=65)return shimAddTrackRemoveTrackWithNative(a);const u=a.RTCPeerConnection.prototype.getLocalStreams;a.RTCPeerConnection.prototype.getLocalStreams=function(){const I=u.apply(this);return this._reverseStreams=this._reverseStreams||{},I.map(N=>this._reverseStreams[N.id])};const d=a.RTCPeerConnection.prototype.addStream;a.RTCPeerConnection.prototype.addStream=function(I){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},I.getTracks().forEach(N=>{if(this.getSenders().find(C=>C.track===N))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[I.id]){const N=new a.MediaStream(I.getTracks());this._streams[I.id]=N,this._reverseStreams[N.id]=I,I=N}d.apply(this,[I])};const l=a.RTCPeerConnection.prototype.removeStream;a.RTCPeerConnection.prototype.removeStream=function(I){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},l.apply(this,[this._streams[I.id]||I]),delete this._reverseStreams[this._streams[I.id]?this._streams[I.id].id:I.id],delete this._streams[I.id]},a.RTCPeerConnection.prototype.addTrack=function(I,N){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const w=[].slice.call(arguments,1);if(w.length!==1||!w[0].getTracks().find(V=>V===I))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(V=>V.track===I))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const D=this._streams[N.id];if(D)D.addTrack(I),Promise.resolve().then(()=>{this.dispatchEvent(new Event("negotiationneeded"))});else{const V=new a.MediaStream([I]);this._streams[N.id]=V,this._reverseStreams[V.id]=N,this.addStream(V)}return this.getSenders().find(V=>V.track===I)};function p(E,I){let N=I.sdp;return Object.keys(E._reverseStreams||[]).forEach(w=>{const C=E._reverseStreams[w],D=E._streams[C.id];N=N.replace(new RegExp(D.id,"g"),C.id)}),new RTCSessionDescription({type:I.type,sdp:N})}function h(E,I){let N=I.sdp;return Object.keys(E._reverseStreams||[]).forEach(w=>{const C=E._reverseStreams[w],D=E._streams[C.id];N=N.replace(new RegExp(C.id,"g"),D.id)}),new RTCSessionDescription({type:I.type,sdp:N})}["createOffer","createAnswer"].forEach(function(E){const I=a.RTCPeerConnection.prototype[E],N={[E](){const w=arguments;return arguments.length&&typeof arguments[0]=="function"?I.apply(this,[D=>{const V=p(this,D);w[0].apply(null,[V])},D=>{w[1]&&w[1].apply(null,D)},arguments[2]]):I.apply(this,arguments).then(D=>p(this,D))}};a.RTCPeerConnection.prototype[E]=N[E]});const y=a.RTCPeerConnection.prototype.setLocalDescription;a.RTCPeerConnection.prototype.setLocalDescription=function(){return!arguments.length||!arguments[0].type?y.apply(this,arguments):(arguments[0]=h(this,arguments[0]),y.apply(this,arguments))};const _=Object.getOwnPropertyDescriptor(a.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(a.RTCPeerConnection.prototype,"localDescription",{get(){const E=_.get.apply(this);return E.type===""?E:p(this,E)}}),a.RTCPeerConnection.prototype.removeTrack=function(I){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!I._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(!(I._pc===this))throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{};let w;Object.keys(this._streams).forEach(C=>{this._streams[C].getTracks().find(V=>I.track===V)&&(w=this._streams[C])}),w&&(w.getTracks().length===1?this.removeStream(this._reverseStreams[w.id]):w.removeTrack(I.track),this.dispatchEvent(new Event("negotiationneeded")))}}function shimPeerConnection$1(a,s){!a.RTCPeerConnection&&a.webkitRTCPeerConnection&&(a.RTCPeerConnection=a.webkitRTCPeerConnection),!!a.RTCPeerConnection&&s.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(u){const d=a.RTCPeerConnection.prototype[u],l={[u](){return arguments[0]=new(u==="addIceCandidate"?a.RTCIceCandidate:a.RTCSessionDescription)(arguments[0]),d.apply(this,arguments)}};a.RTCPeerConnection.prototype[u]=l[u]})}function fixNegotiationNeeded(a,s){wrapPeerConnectionEvent(a,"negotiationneeded",u=>{const d=u.target;if(!((s.version<72||d.getConfiguration&&d.getConfiguration().sdpSemantics==="plan-b")&&d.signalingState!=="stable"))return u})}var chromeShim=Object.freeze(Object.defineProperty({__proto__:null,shimMediaStream,shimOnTrack:shimOnTrack$1,shimGetSendersWithDtmf,shimGetStats,shimSenderReceiverGetStats,shimAddTrackRemoveTrackWithNative,shimAddTrackRemoveTrack,shimPeerConnection:shimPeerConnection$1,fixNegotiationNeeded,shimGetUserMedia:shimGetUserMedia$2,shimGetDisplayMedia:shimGetDisplayMedia$1},Symbol.toStringTag,{value:"Module"}));function shimGetUserMedia$1(a,s){const u=a&&a.navigator,d=a&&a.MediaStreamTrack;if(u.getUserMedia=function(l,p,h){deprecated("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),u.mediaDevices.getUserMedia(l).then(p,h)},!(s.version>55&&"autoGainControl"in u.mediaDevices.getSupportedConstraints())){const l=function(h,y,_){y in h&&!(_ in h)&&(h[_]=h[y],delete h[y])},p=u.mediaDevices.getUserMedia.bind(u.mediaDevices);if(u.mediaDevices.getUserMedia=function(h){return typeof h=="object"&&typeof h.audio=="object"&&(h=JSON.parse(JSON.stringify(h)),l(h.audio,"autoGainControl","mozAutoGainControl"),l(h.audio,"noiseSuppression","mozNoiseSuppression")),p(h)},d&&d.prototype.getSettings){const h=d.prototype.getSettings;d.prototype.getSettings=function(){const y=h.apply(this,arguments);return l(y,"mozAutoGainControl","autoGainControl"),l(y,"mozNoiseSuppression","noiseSuppression"),y}}if(d&&d.prototype.applyConstraints){const h=d.prototype.applyConstraints;d.prototype.applyConstraints=function(y){return this.kind==="audio"&&typeof y=="object"&&(y=JSON.parse(JSON.stringify(y)),l(y,"autoGainControl","mozAutoGainControl"),l(y,"noiseSuppression","mozNoiseSuppression")),h.apply(this,[y])}}}}function shimGetDisplayMedia(a,s){a.navigator.mediaDevices&&"getDisplayMedia"in a.navigator.mediaDevices||!a.navigator.mediaDevices||(a.navigator.mediaDevices.getDisplayMedia=function(d){if(!(d&&d.video)){const l=new DOMException("getDisplayMedia without video constraints is undefined");return l.name="NotFoundError",l.code=8,Promise.reject(l)}return d.video===!0?d.video={mediaSource:s}:d.video.mediaSource=s,a.navigator.mediaDevices.getUserMedia(d)})}function shimOnTrack(a){typeof a=="object"&&a.RTCTrackEvent&&"receiver"in a.RTCTrackEvent.prototype&&!("transceiver"in a.RTCTrackEvent.prototype)&&Object.defineProperty(a.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function shimPeerConnection(a,s){if(typeof a!="object"||!(a.RTCPeerConnection||a.mozRTCPeerConnection))return;!a.RTCPeerConnection&&a.mozRTCPeerConnection&&(a.RTCPeerConnection=a.mozRTCPeerConnection),s.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(l){const p=a.RTCPeerConnection.prototype[l],h={[l](){return arguments[0]=new(l==="addIceCandidate"?a.RTCIceCandidate:a.RTCSessionDescription)(arguments[0]),p.apply(this,arguments)}};a.RTCPeerConnection.prototype[l]=h[l]});const u={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},d=a.RTCPeerConnection.prototype.getStats;a.RTCPeerConnection.prototype.getStats=function(){const[p,h,y]=arguments;return d.apply(this,[p||null]).then(_=>{if(s.version<53&&!h)try{_.forEach(E=>{E.type=u[E.type]||E.type})}catch(E){if(E.name!=="TypeError")throw E;_.forEach((I,N)=>{_.set(N,Object.assign({},I,{type:u[I.type]||I.type}))})}return _}).then(h,y)}}function shimSenderGetStats(a){if(!(typeof a=="object"&&a.RTCPeerConnection&&a.RTCRtpSender)||a.RTCRtpSender&&"getStats"in a.RTCRtpSender.prototype)return;const s=a.RTCPeerConnection.prototype.getSenders;s&&(a.RTCPeerConnection.prototype.getSenders=function(){const l=s.apply(this,[]);return l.forEach(p=>p._pc=this),l});const u=a.RTCPeerConnection.prototype.addTrack;u&&(a.RTCPeerConnection.prototype.addTrack=function(){const l=u.apply(this,arguments);return l._pc=this,l}),a.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function shimReceiverGetStats(a){if(!(typeof a=="object"&&a.RTCPeerConnection&&a.RTCRtpSender)||a.RTCRtpSender&&"getStats"in a.RTCRtpReceiver.prototype)return;const s=a.RTCPeerConnection.prototype.getReceivers;s&&(a.RTCPeerConnection.prototype.getReceivers=function(){const d=s.apply(this,[]);return d.forEach(l=>l._pc=this),d}),wrapPeerConnectionEvent(a,"track",u=>(u.receiver._pc=u.srcElement,u)),a.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function shimRemoveStream(a){!a.RTCPeerConnection||"removeStream"in a.RTCPeerConnection.prototype||(a.RTCPeerConnection.prototype.removeStream=function(u){deprecated("removeStream","removeTrack"),this.getSenders().forEach(d=>{d.track&&u.getTracks().includes(d.track)&&this.removeTrack(d)})})}function shimRTCDataChannel(a){a.DataChannel&&!a.RTCDataChannel&&(a.RTCDataChannel=a.DataChannel)}function shimAddTransceiver(a){if(!(typeof a=="object"&&a.RTCPeerConnection))return;const s=a.RTCPeerConnection.prototype.addTransceiver;s&&(a.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];const d=arguments[1],l=d&&"sendEncodings"in d;l&&d.sendEncodings.forEach(h=>{if("rid"in h&&!/^[a-z0-9]{0,16}$/i.test(h.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in h&&!(parseFloat(h.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in h&&!(parseFloat(h.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});const p=s.apply(this,arguments);if(l){const{sender:h}=p,y=h.getParameters();(!("encodings"in y)||y.encodings.length===1&&Object.keys(y.encodings[0]).length===0)&&(y.encodings=d.sendEncodings,h.sendEncodings=d.sendEncodings,this.setParametersPromises.push(h.setParameters(y).then(()=>{delete h.sendEncodings}).catch(()=>{delete h.sendEncodings})))}return p})}function shimGetParameters(a){if(!(typeof a=="object"&&a.RTCRtpSender))return;const s=a.RTCRtpSender.prototype.getParameters;s&&(a.RTCRtpSender.prototype.getParameters=function(){const d=s.apply(this,arguments);return"encodings"in d||(d.encodings=[].concat(this.sendEncodings||[{}])),d})}function shimCreateOffer(a){if(!(typeof a=="object"&&a.RTCPeerConnection))return;const s=a.RTCPeerConnection.prototype.createOffer;a.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>s.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):s.apply(this,arguments)}}function shimCreateAnswer(a){if(!(typeof a=="object"&&a.RTCPeerConnection))return;const s=a.RTCPeerConnection.prototype.createAnswer;a.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>s.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):s.apply(this,arguments)}}var firefoxShim=Object.freeze(Object.defineProperty({__proto__:null,shimOnTrack,shimPeerConnection,shimSenderGetStats,shimReceiverGetStats,shimRemoveStream,shimRTCDataChannel,shimAddTransceiver,shimGetParameters,shimCreateOffer,shimCreateAnswer,shimGetUserMedia:shimGetUserMedia$1,shimGetDisplayMedia},Symbol.toStringTag,{value:"Module"}));function shimLocalStreamsAPI(a){if(!(typeof a!="object"||!a.RTCPeerConnection)){if("getLocalStreams"in a.RTCPeerConnection.prototype||(a.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in a.RTCPeerConnection.prototype)){const s=a.RTCPeerConnection.prototype.addTrack;a.RTCPeerConnection.prototype.addStream=function(d){this._localStreams||(this._localStreams=[]),this._localStreams.includes(d)||this._localStreams.push(d),d.getAudioTracks().forEach(l=>s.call(this,l,d)),d.getVideoTracks().forEach(l=>s.call(this,l,d))},a.RTCPeerConnection.prototype.addTrack=function(d,...l){return l&&l.forEach(p=>{this._localStreams?this._localStreams.includes(p)||this._localStreams.push(p):this._localStreams=[p]}),s.apply(this,arguments)}}"removeStream"in a.RTCPeerConnection.prototype||(a.RTCPeerConnection.prototype.removeStream=function(u){this._localStreams||(this._localStreams=[]);const d=this._localStreams.indexOf(u);if(d===-1)return;this._localStreams.splice(d,1);const l=u.getTracks();this.getSenders().forEach(p=>{l.includes(p.track)&&this.removeTrack(p)})})}}function shimRemoteStreamsAPI(a){if(!(typeof a!="object"||!a.RTCPeerConnection)&&("getRemoteStreams"in a.RTCPeerConnection.prototype||(a.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in a.RTCPeerConnection.prototype))){Object.defineProperty(a.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(u){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=u),this.addEventListener("track",this._onaddstreampoly=d=>{d.streams.forEach(l=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(l))return;this._remoteStreams.push(l);const p=new Event("addstream");p.stream=l,this.dispatchEvent(p)})})}});const s=a.RTCPeerConnection.prototype.setRemoteDescription;a.RTCPeerConnection.prototype.setRemoteDescription=function(){const d=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(l){l.streams.forEach(p=>{if(d._remoteStreams||(d._remoteStreams=[]),d._remoteStreams.indexOf(p)>=0)return;d._remoteStreams.push(p);const h=new Event("addstream");h.stream=p,d.dispatchEvent(h)})}),s.apply(d,arguments)}}}function shimCallbacksAPI(a){if(typeof a!="object"||!a.RTCPeerConnection)return;const s=a.RTCPeerConnection.prototype,u=s.createOffer,d=s.createAnswer,l=s.setLocalDescription,p=s.setRemoteDescription,h=s.addIceCandidate;s.createOffer=function(E,I){const N=arguments.length>=2?arguments[2]:arguments[0],w=u.apply(this,[N]);return I?(w.then(E,I),Promise.resolve()):w},s.createAnswer=function(E,I){const N=arguments.length>=2?arguments[2]:arguments[0],w=d.apply(this,[N]);return I?(w.then(E,I),Promise.resolve()):w};let y=function(_,E,I){const N=l.apply(this,[_]);return I?(N.then(E,I),Promise.resolve()):N};s.setLocalDescription=y,y=function(_,E,I){const N=p.apply(this,[_]);return I?(N.then(E,I),Promise.resolve()):N},s.setRemoteDescription=y,y=function(_,E,I){const N=h.apply(this,[_]);return I?(N.then(E,I),Promise.resolve()):N},s.addIceCandidate=y}function shimGetUserMedia(a){const s=a&&a.navigator;if(s.mediaDevices&&s.mediaDevices.getUserMedia){const u=s.mediaDevices,d=u.getUserMedia.bind(u);s.mediaDevices.getUserMedia=l=>d(shimConstraints(l))}!s.getUserMedia&&s.mediaDevices&&s.mediaDevices.getUserMedia&&(s.getUserMedia=function(d,l,p){s.mediaDevices.getUserMedia(d).then(l,p)}.bind(s))}function shimConstraints(a){return a&&a.video!==void 0?Object.assign({},a,{video:compactObject(a.video)}):a}function shimRTCIceServerUrls(a){if(!a.RTCPeerConnection)return;const s=a.RTCPeerConnection;a.RTCPeerConnection=function(d,l){if(d&&d.iceServers){const p=[];for(let h=0;h<d.iceServers.length;h++){let y=d.iceServers[h];!y.hasOwnProperty("urls")&&y.hasOwnProperty("url")?(deprecated("RTCIceServer.url","RTCIceServer.urls"),y=JSON.parse(JSON.stringify(y)),y.urls=y.url,delete y.url,p.push(y)):p.push(d.iceServers[h])}d.iceServers=p}return new s(d,l)},a.RTCPeerConnection.prototype=s.prototype,"generateCertificate"in s&&Object.defineProperty(a.RTCPeerConnection,"generateCertificate",{get(){return s.generateCertificate}})}function shimTrackEventTransceiver(a){typeof a=="object"&&a.RTCTrackEvent&&"receiver"in a.RTCTrackEvent.prototype&&!("transceiver"in a.RTCTrackEvent.prototype)&&Object.defineProperty(a.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function shimCreateOfferLegacy(a){const s=a.RTCPeerConnection.prototype.createOffer;a.RTCPeerConnection.prototype.createOffer=function(d){if(d){typeof d.offerToReceiveAudio!="undefined"&&(d.offerToReceiveAudio=!!d.offerToReceiveAudio);const l=this.getTransceivers().find(h=>h.receiver.track.kind==="audio");d.offerToReceiveAudio===!1&&l?l.direction==="sendrecv"?l.setDirection?l.setDirection("sendonly"):l.direction="sendonly":l.direction==="recvonly"&&(l.setDirection?l.setDirection("inactive"):l.direction="inactive"):d.offerToReceiveAudio===!0&&!l&&this.addTransceiver("audio",{direction:"recvonly"}),typeof d.offerToReceiveVideo!="undefined"&&(d.offerToReceiveVideo=!!d.offerToReceiveVideo);const p=this.getTransceivers().find(h=>h.receiver.track.kind==="video");d.offerToReceiveVideo===!1&&p?p.direction==="sendrecv"?p.setDirection?p.setDirection("sendonly"):p.direction="sendonly":p.direction==="recvonly"&&(p.setDirection?p.setDirection("inactive"):p.direction="inactive"):d.offerToReceiveVideo===!0&&!p&&this.addTransceiver("video",{direction:"recvonly"})}return s.apply(this,arguments)}}function shimAudioContext(a){typeof a!="object"||a.AudioContext||(a.AudioContext=a.webkitAudioContext)}var safariShim=Object.freeze(Object.defineProperty({__proto__:null,shimLocalStreamsAPI,shimRemoteStreamsAPI,shimCallbacksAPI,shimGetUserMedia,shimConstraints,shimRTCIceServerUrls,shimTrackEventTransceiver,shimCreateOfferLegacy,shimAudioContext},Symbol.toStringTag,{value:"Module"})),sdp$1={exports:{}};(function(a){const s={};s.generateIdentifier=function(){return Math.random().toString(36).substr(2,10)},s.localCName=s.generateIdentifier(),s.splitLines=function(u){return u.trim().split(`
`).map(d=>d.trim())},s.splitSections=function(u){return u.split(`
m=`).map((l,p)=>(p>0?"m="+l:l).trim()+`\r
`)},s.getDescription=function(u){const d=s.splitSections(u);return d&&d[0]},s.getMediaSections=function(u){const d=s.splitSections(u);return d.shift(),d},s.matchPrefix=function(u,d){return s.splitLines(u).filter(l=>l.indexOf(d)===0)},s.parseCandidate=function(u){let d;u.indexOf("a=candidate:")===0?d=u.substring(12).split(" "):d=u.substring(10).split(" ");const l={foundation:d[0],component:{1:"rtp",2:"rtcp"}[d[1]]||d[1],protocol:d[2].toLowerCase(),priority:parseInt(d[3],10),ip:d[4],address:d[4],port:parseInt(d[5],10),type:d[7]};for(let p=8;p<d.length;p+=2)switch(d[p]){case"raddr":l.relatedAddress=d[p+1];break;case"rport":l.relatedPort=parseInt(d[p+1],10);break;case"tcptype":l.tcpType=d[p+1];break;case"ufrag":l.ufrag=d[p+1],l.usernameFragment=d[p+1];break;default:l[d[p]]===void 0&&(l[d[p]]=d[p+1]);break}return l},s.writeCandidate=function(u){const d=[];d.push(u.foundation);const l=u.component;l==="rtp"?d.push(1):l==="rtcp"?d.push(2):d.push(l),d.push(u.protocol.toUpperCase()),d.push(u.priority),d.push(u.address||u.ip),d.push(u.port);const p=u.type;return d.push("typ"),d.push(p),p!=="host"&&u.relatedAddress&&u.relatedPort&&(d.push("raddr"),d.push(u.relatedAddress),d.push("rport"),d.push(u.relatedPort)),u.tcpType&&u.protocol.toLowerCase()==="tcp"&&(d.push("tcptype"),d.push(u.tcpType)),(u.usernameFragment||u.ufrag)&&(d.push("ufrag"),d.push(u.usernameFragment||u.ufrag)),"candidate:"+d.join(" ")},s.parseIceOptions=function(u){return u.substr(14).split(" ")},s.parseRtpMap=function(u){let d=u.substr(9).split(" ");const l={payloadType:parseInt(d.shift(),10)};return d=d[0].split("/"),l.name=d[0],l.clockRate=parseInt(d[1],10),l.channels=d.length===3?parseInt(d[2],10):1,l.numChannels=l.channels,l},s.writeRtpMap=function(u){let d=u.payloadType;u.preferredPayloadType!==void 0&&(d=u.preferredPayloadType);const l=u.channels||u.numChannels||1;return"a=rtpmap:"+d+" "+u.name+"/"+u.clockRate+(l!==1?"/"+l:"")+`\r
`},s.parseExtmap=function(u){const d=u.substr(9).split(" ");return{id:parseInt(d[0],10),direction:d[0].indexOf("/")>0?d[0].split("/")[1]:"sendrecv",uri:d[1]}},s.writeExtmap=function(u){return"a=extmap:"+(u.id||u.preferredId)+(u.direction&&u.direction!=="sendrecv"?"/"+u.direction:"")+" "+u.uri+`\r
`},s.parseFmtp=function(u){const d={};let l;const p=u.substr(u.indexOf(" ")+1).split(";");for(let h=0;h<p.length;h++)l=p[h].trim().split("="),d[l[0].trim()]=l[1];return d},s.writeFmtp=function(u){let d="",l=u.payloadType;if(u.preferredPayloadType!==void 0&&(l=u.preferredPayloadType),u.parameters&&Object.keys(u.parameters).length){const p=[];Object.keys(u.parameters).forEach(h=>{u.parameters[h]!==void 0?p.push(h+"="+u.parameters[h]):p.push(h)}),d+="a=fmtp:"+l+" "+p.join(";")+`\r
`}return d},s.parseRtcpFb=function(u){const d=u.substr(u.indexOf(" ")+1).split(" ");return{type:d.shift(),parameter:d.join(" ")}},s.writeRtcpFb=function(u){let d="",l=u.payloadType;return u.preferredPayloadType!==void 0&&(l=u.preferredPayloadType),u.rtcpFeedback&&u.rtcpFeedback.length&&u.rtcpFeedback.forEach(p=>{d+="a=rtcp-fb:"+l+" "+p.type+(p.parameter&&p.parameter.length?" "+p.parameter:"")+`\r
`}),d},s.parseSsrcMedia=function(u){const d=u.indexOf(" "),l={ssrc:parseInt(u.substr(7,d-7),10)},p=u.indexOf(":",d);return p>-1?(l.attribute=u.substr(d+1,p-d-1),l.value=u.substr(p+1)):l.attribute=u.substr(d+1),l},s.parseSsrcGroup=function(u){const d=u.substr(13).split(" ");return{semantics:d.shift(),ssrcs:d.map(l=>parseInt(l,10))}},s.getMid=function(u){const d=s.matchPrefix(u,"a=mid:")[0];if(d)return d.substr(6)},s.parseFingerprint=function(u){const d=u.substr(14).split(" ");return{algorithm:d[0].toLowerCase(),value:d[1].toUpperCase()}},s.getDtlsParameters=function(u,d){const l=s.matchPrefix(u+d,"a=fingerprint:");return{role:"auto",fingerprints:l.map(s.parseFingerprint)}},s.writeDtlsParameters=function(u,d){let l="a=setup:"+d+`\r
`;return u.fingerprints.forEach(p=>{l+="a=fingerprint:"+p.algorithm+" "+p.value+`\r
`}),l},s.parseCryptoLine=function(u){const d=u.substr(9).split(" ");return{tag:parseInt(d[0],10),cryptoSuite:d[1],keyParams:d[2],sessionParams:d.slice(3)}},s.writeCryptoLine=function(u){return"a=crypto:"+u.tag+" "+u.cryptoSuite+" "+(typeof u.keyParams=="object"?s.writeCryptoKeyParams(u.keyParams):u.keyParams)+(u.sessionParams?" "+u.sessionParams.join(" "):"")+`\r
`},s.parseCryptoKeyParams=function(u){if(u.indexOf("inline:")!==0)return null;const d=u.substr(7).split("|");return{keyMethod:"inline",keySalt:d[0],lifeTime:d[1],mkiValue:d[2]?d[2].split(":")[0]:void 0,mkiLength:d[2]?d[2].split(":")[1]:void 0}},s.writeCryptoKeyParams=function(u){return u.keyMethod+":"+u.keySalt+(u.lifeTime?"|"+u.lifeTime:"")+(u.mkiValue&&u.mkiLength?"|"+u.mkiValue+":"+u.mkiLength:"")},s.getCryptoParameters=function(u,d){return s.matchPrefix(u+d,"a=crypto:").map(s.parseCryptoLine)},s.getIceParameters=function(u,d){const l=s.matchPrefix(u+d,"a=ice-ufrag:")[0],p=s.matchPrefix(u+d,"a=ice-pwd:")[0];return l&&p?{usernameFragment:l.substr(12),password:p.substr(10)}:null},s.writeIceParameters=function(u){let d="a=ice-ufrag:"+u.usernameFragment+`\r
a=ice-pwd:`+u.password+`\r
`;return u.iceLite&&(d+=`a=ice-lite\r
`),d},s.parseRtpParameters=function(u){const d={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},p=s.splitLines(u)[0].split(" ");for(let h=3;h<p.length;h++){const y=p[h],_=s.matchPrefix(u,"a=rtpmap:"+y+" ")[0];if(_){const E=s.parseRtpMap(_),I=s.matchPrefix(u,"a=fmtp:"+y+" ");switch(E.parameters=I.length?s.parseFmtp(I[0]):{},E.rtcpFeedback=s.matchPrefix(u,"a=rtcp-fb:"+y+" ").map(s.parseRtcpFb),d.codecs.push(E),E.name.toUpperCase()){case"RED":case"ULPFEC":d.fecMechanisms.push(E.name.toUpperCase());break}}}return s.matchPrefix(u,"a=extmap:").forEach(h=>{d.headerExtensions.push(s.parseExtmap(h))}),d},s.writeRtpDescription=function(u,d){let l="";l+="m="+u+" ",l+=d.codecs.length>0?"9":"0",l+=" UDP/TLS/RTP/SAVPF ",l+=d.codecs.map(h=>h.preferredPayloadType!==void 0?h.preferredPayloadType:h.payloadType).join(" ")+`\r
`,l+=`c=IN IP4 0.0.0.0\r
`,l+=`a=rtcp:9 IN IP4 0.0.0.0\r
`,d.codecs.forEach(h=>{l+=s.writeRtpMap(h),l+=s.writeFmtp(h),l+=s.writeRtcpFb(h)});let p=0;return d.codecs.forEach(h=>{h.maxptime>p&&(p=h.maxptime)}),p>0&&(l+="a=maxptime:"+p+`\r
`),d.headerExtensions&&d.headerExtensions.forEach(h=>{l+=s.writeExtmap(h)}),l},s.parseRtpEncodingParameters=function(u){const d=[],l=s.parseRtpParameters(u),p=l.fecMechanisms.indexOf("RED")!==-1,h=l.fecMechanisms.indexOf("ULPFEC")!==-1,y=s.matchPrefix(u,"a=ssrc:").map(w=>s.parseSsrcMedia(w)).filter(w=>w.attribute==="cname"),_=y.length>0&&y[0].ssrc;let E;const I=s.matchPrefix(u,"a=ssrc-group:FID").map(w=>w.substr(17).split(" ").map(D=>parseInt(D,10)));I.length>0&&I[0].length>1&&I[0][0]===_&&(E=I[0][1]),l.codecs.forEach(w=>{if(w.name.toUpperCase()==="RTX"&&w.parameters.apt){let C={ssrc:_,codecPayloadType:parseInt(w.parameters.apt,10)};_&&E&&(C.rtx={ssrc:E}),d.push(C),p&&(C=JSON.parse(JSON.stringify(C)),C.fec={ssrc:_,mechanism:h?"red+ulpfec":"red"},d.push(C))}}),d.length===0&&_&&d.push({ssrc:_});let N=s.matchPrefix(u,"b=");return N.length&&(N[0].indexOf("b=TIAS:")===0?N=parseInt(N[0].substr(7),10):N[0].indexOf("b=AS:")===0?N=parseInt(N[0].substr(5),10)*1e3*.95-50*40*8:N=void 0,d.forEach(w=>{w.maxBitrate=N})),d},s.parseRtcpParameters=function(u){const d={},l=s.matchPrefix(u,"a=ssrc:").map(y=>s.parseSsrcMedia(y)).filter(y=>y.attribute==="cname")[0];l&&(d.cname=l.value,d.ssrc=l.ssrc);const p=s.matchPrefix(u,"a=rtcp-rsize");d.reducedSize=p.length>0,d.compound=p.length===0;const h=s.matchPrefix(u,"a=rtcp-mux");return d.mux=h.length>0,d},s.writeRtcpParameters=function(u){let d="";return u.reducedSize&&(d+=`a=rtcp-rsize\r
`),u.mux&&(d+=`a=rtcp-mux\r
`),u.ssrc!==void 0&&u.cname&&(d+="a=ssrc:"+u.ssrc+" cname:"+u.cname+`\r
`),d},s.parseMsid=function(u){let d;const l=s.matchPrefix(u,"a=msid:");if(l.length===1)return d=l[0].substr(7).split(" "),{stream:d[0],track:d[1]};const p=s.matchPrefix(u,"a=ssrc:").map(h=>s.parseSsrcMedia(h)).filter(h=>h.attribute==="msid");if(p.length>0)return d=p[0].value.split(" "),{stream:d[0],track:d[1]}},s.parseSctpDescription=function(u){const d=s.parseMLine(u),l=s.matchPrefix(u,"a=max-message-size:");let p;l.length>0&&(p=parseInt(l[0].substr(19),10)),isNaN(p)&&(p=65536);const h=s.matchPrefix(u,"a=sctp-port:");if(h.length>0)return{port:parseInt(h[0].substr(12),10),protocol:d.fmt,maxMessageSize:p};const y=s.matchPrefix(u,"a=sctpmap:");if(y.length>0){const _=y[0].substr(10).split(" ");return{port:parseInt(_[0],10),protocol:_[1],maxMessageSize:p}}},s.writeSctpDescription=function(u,d){let l=[];return u.protocol!=="DTLS/SCTP"?l=["m="+u.kind+" 9 "+u.protocol+" "+d.protocol+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctp-port:"+d.port+`\r
`]:l=["m="+u.kind+" 9 "+u.protocol+" "+d.port+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctpmap:"+d.port+" "+d.protocol+` 65535\r
`],d.maxMessageSize!==void 0&&l.push("a=max-message-size:"+d.maxMessageSize+`\r
`),l.join("")},s.generateSessionId=function(){return Math.random().toString().substr(2,21)},s.writeSessionBoilerplate=function(u,d,l){let p;const h=d!==void 0?d:2;return u?p=u:p=s.generateSessionId(),`v=0\r
o=`+(l||"thisisadapterortc")+" "+p+" "+h+` IN IP4 127.0.0.1\r
s=-\r
t=0 0\r
`},s.getDirection=function(u,d){const l=s.splitLines(u);for(let p=0;p<l.length;p++)switch(l[p]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return l[p].substr(2)}return d?s.getDirection(d):"sendrecv"},s.getKind=function(u){return s.splitLines(u)[0].split(" ")[0].substr(2)},s.isRejected=function(u){return u.split(" ",2)[1]==="0"},s.parseMLine=function(u){const l=s.splitLines(u)[0].substr(2).split(" ");return{kind:l[0],port:parseInt(l[1],10),protocol:l[2],fmt:l.slice(3).join(" ")}},s.parseOLine=function(u){const l=s.matchPrefix(u,"o=")[0].substr(2).split(" ");return{username:l[0],sessionId:l[1],sessionVersion:parseInt(l[2],10),netType:l[3],addressType:l[4],address:l[5]}},s.isValidSDP=function(u){if(typeof u!="string"||u.length===0)return!1;const d=s.splitLines(u);for(let l=0;l<d.length;l++)if(d[l].length<2||d[l].charAt(1)!=="=")return!1;return!0},a.exports=s})(sdp$1);var SDPUtils=sdp$1.exports,sdp=_mergeNamespaces({__proto__:null,default:SDPUtils},[sdp$1.exports]);function shimRTCIceCandidate(a){if(!a.RTCIceCandidate||a.RTCIceCandidate&&"foundation"in a.RTCIceCandidate.prototype)return;const s=a.RTCIceCandidate;a.RTCIceCandidate=function(d){if(typeof d=="object"&&d.candidate&&d.candidate.indexOf("a=")===0&&(d=JSON.parse(JSON.stringify(d)),d.candidate=d.candidate.substr(2)),d.candidate&&d.candidate.length){const l=new s(d),p=SDPUtils.parseCandidate(d.candidate),h=Object.assign(l,p);return h.toJSON=function(){return{candidate:h.candidate,sdpMid:h.sdpMid,sdpMLineIndex:h.sdpMLineIndex,usernameFragment:h.usernameFragment}},h}return new s(d)},a.RTCIceCandidate.prototype=s.prototype,wrapPeerConnectionEvent(a,"icecandidate",u=>(u.candidate&&Object.defineProperty(u,"candidate",{value:new a.RTCIceCandidate(u.candidate),writable:"false"}),u))}function shimMaxMessageSize(a,s){if(!a.RTCPeerConnection)return;"sctp"in a.RTCPeerConnection.prototype||Object.defineProperty(a.RTCPeerConnection.prototype,"sctp",{get(){return typeof this._sctp=="undefined"?null:this._sctp}});const u=function(y){if(!y||!y.sdp)return!1;const _=SDPUtils.splitSections(y.sdp);return _.shift(),_.some(E=>{const I=SDPUtils.parseMLine(E);return I&&I.kind==="application"&&I.protocol.indexOf("SCTP")!==-1})},d=function(y){const _=y.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(_===null||_.length<2)return-1;const E=parseInt(_[1],10);return E!==E?-1:E},l=function(y){let _=65536;return s.browser==="firefox"&&(s.version<57?y===-1?_=16384:_=2147483637:s.version<60?_=s.version===57?65535:65536:_=2147483637),_},p=function(y,_){let E=65536;s.browser==="firefox"&&s.version===57&&(E=65535);const I=SDPUtils.matchPrefix(y.sdp,"a=max-message-size:");return I.length>0?E=parseInt(I[0].substr(19),10):s.browser==="firefox"&&_!==-1&&(E=2147483637),E},h=a.RTCPeerConnection.prototype.setRemoteDescription;a.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,s.browser==="chrome"&&s.version>=76){const{sdpSemantics:_}=this.getConfiguration();_==="plan-b"&&Object.defineProperty(this,"sctp",{get(){return typeof this._sctp=="undefined"?null:this._sctp},enumerable:!0,configurable:!0})}if(u(arguments[0])){const _=d(arguments[0]),E=l(_),I=p(arguments[0],_);let N;E===0&&I===0?N=Number.POSITIVE_INFINITY:E===0||I===0?N=Math.max(E,I):N=Math.min(E,I);const w={};Object.defineProperty(w,"maxMessageSize",{get(){return N}}),this._sctp=w}return h.apply(this,arguments)}}function shimSendThrowTypeError(a){if(!(a.RTCPeerConnection&&"createDataChannel"in a.RTCPeerConnection.prototype))return;function s(d,l){const p=d.send;d.send=function(){const y=arguments[0],_=y.length||y.size||y.byteLength;if(d.readyState==="open"&&l.sctp&&_>l.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+l.sctp.maxMessageSize+" bytes)");return p.apply(d,arguments)}}const u=a.RTCPeerConnection.prototype.createDataChannel;a.RTCPeerConnection.prototype.createDataChannel=function(){const l=u.apply(this,arguments);return s(l,this),l},wrapPeerConnectionEvent(a,"datachannel",d=>(s(d.channel,d.target),d))}function shimConnectionState(a){if(!a.RTCPeerConnection||"connectionState"in a.RTCPeerConnection.prototype)return;const s=a.RTCPeerConnection.prototype;Object.defineProperty(s,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(s,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(u){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),u&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=u)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(u=>{const d=s[u];s[u]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=l=>{const p=l.target;if(p._lastConnectionState!==p.connectionState){p._lastConnectionState=p.connectionState;const h=new Event("connectionstatechange",l);p.dispatchEvent(h)}return l},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),d.apply(this,arguments)}})}function removeExtmapAllowMixed(a,s){if(!a.RTCPeerConnection||s.browser==="chrome"&&s.version>=71||s.browser==="safari"&&s.version>=605)return;const u=a.RTCPeerConnection.prototype.setRemoteDescription;a.RTCPeerConnection.prototype.setRemoteDescription=function(l){if(l&&l.sdp&&l.sdp.indexOf(`
a=extmap-allow-mixed`)!==-1){const p=l.sdp.split(`
`).filter(h=>h.trim()!=="a=extmap-allow-mixed").join(`
`);a.RTCSessionDescription&&l instanceof a.RTCSessionDescription?arguments[0]=new a.RTCSessionDescription({type:l.type,sdp:p}):l.sdp=p}return u.apply(this,arguments)}}function shimAddIceCandidateNullOrEmpty(a,s){if(!(a.RTCPeerConnection&&a.RTCPeerConnection.prototype))return;const u=a.RTCPeerConnection.prototype.addIceCandidate;!u||u.length===0||(a.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?(s.browser==="chrome"&&s.version<78||s.browser==="firefox"&&s.version<68||s.browser==="safari")&&arguments[0]&&arguments[0].candidate===""?Promise.resolve():u.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}function shimParameterlessSetLocalDescription(a,s){if(!(a.RTCPeerConnection&&a.RTCPeerConnection.prototype))return;const u=a.RTCPeerConnection.prototype.setLocalDescription;!u||u.length===0||(a.RTCPeerConnection.prototype.setLocalDescription=function(){let l=arguments[0]||{};if(typeof l!="object"||l.type&&l.sdp)return u.apply(this,arguments);if(l={type:l.type,sdp:l.sdp},!l.type)switch(this.signalingState){case"stable":case"have-local-offer":case"have-remote-pranswer":l.type="offer";break;default:l.type="answer";break}return l.sdp||l.type!=="offer"&&l.type!=="answer"?u.apply(this,[l]):(l.type==="offer"?this.createOffer:this.createAnswer).apply(this).then(h=>u.apply(this,[h]))})}var commonShim=Object.freeze(Object.defineProperty({__proto__:null,shimRTCIceCandidate,shimMaxMessageSize,shimSendThrowTypeError,shimConnectionState,removeExtmapAllowMixed,shimAddIceCandidateNullOrEmpty,shimParameterlessSetLocalDescription},Symbol.toStringTag,{value:"Module"}));function adapterFactory({window:a}={},s={shimChrome:!0,shimFirefox:!0,shimSafari:!0}){const u=log,d=detectBrowser(a),l={browserDetails:d,commonShim,extractVersion,disableLog,disableWarnings,sdp};switch(d.browser){case"chrome":if(!chromeShim||!shimPeerConnection$1||!s.shimChrome)return u("Chrome shim is not included in this adapter release."),l;if(d.version===null)return u("Chrome shim can not determine version, not shimming."),l;u("adapter.js shimming chrome."),l.browserShim=chromeShim,shimAddIceCandidateNullOrEmpty(a,d),shimParameterlessSetLocalDescription(a),shimGetUserMedia$2(a,d),shimMediaStream(a),shimPeerConnection$1(a,d),shimOnTrack$1(a),shimAddTrackRemoveTrack(a,d),shimGetSendersWithDtmf(a),shimGetStats(a),shimSenderReceiverGetStats(a),fixNegotiationNeeded(a,d),shimRTCIceCandidate(a),shimConnectionState(a),shimMaxMessageSize(a,d),shimSendThrowTypeError(a),removeExtmapAllowMixed(a,d);break;case"firefox":if(!firefoxShim||!shimPeerConnection||!s.shimFirefox)return u("Firefox shim is not included in this adapter release."),l;u("adapter.js shimming firefox."),l.browserShim=firefoxShim,shimAddIceCandidateNullOrEmpty(a,d),shimParameterlessSetLocalDescription(a),shimGetUserMedia$1(a,d),shimPeerConnection(a,d),shimOnTrack(a),shimRemoveStream(a),shimSenderGetStats(a),shimReceiverGetStats(a),shimRTCDataChannel(a),shimAddTransceiver(a),shimGetParameters(a),shimCreateOffer(a),shimCreateAnswer(a),shimRTCIceCandidate(a),shimConnectionState(a),shimMaxMessageSize(a,d),shimSendThrowTypeError(a);break;case"safari":if(!safariShim||!s.shimSafari)return u("Safari shim is not included in this adapter release."),l;u("adapter.js shimming safari."),l.browserShim=safariShim,shimAddIceCandidateNullOrEmpty(a,d),shimParameterlessSetLocalDescription(a),shimRTCIceServerUrls(a),shimCreateOfferLegacy(a),shimCallbacksAPI(a),shimLocalStreamsAPI(a),shimRemoteStreamsAPI(a),shimTrackEventTransceiver(a),shimGetUserMedia(a),shimAudioContext(a),shimRTCIceCandidate(a),shimMaxMessageSize(a,d),shimSendThrowTypeError(a),removeExtmapAllowMixed(a,d);break;default:u("Unsupported browser!");break}return l}adapterFactory({window:typeof window=="undefined"?void 0:window});var __awaiter$2=commonjsGlobal&&commonjsGlobal.__awaiter||function(a,s,u,d){function l(p){return p instanceof u?p:new u(function(h){h(p)})}return new(u||(u=Promise))(function(p,h){function y(I){try{E(d.next(I))}catch(N){h(N)}}function _(I){try{E(d.throw(I))}catch(N){h(N)}}function E(I){I.done?p(I.value):l(I.value).then(y,_)}E((d=d.apply(a,s||[])).next())})},__importDefault$2=commonjsGlobal&&commonjsGlobal.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(SignalClient$1,"__esModule",{value:!0}),SignalClient$1.toProtoSessionDescription=SignalClient$1.SignalClient=void 0;const logger_1$1=__importDefault$2(logger),livekit_rtc_1=livekit_rtc,errors_1$1=errors,utils_1$1=utils$1;class SignalClient{constructor(s=!1){this.isConnected=!1,this.useJSON=s}join(s,u,d){return __awaiter$2(this,void 0,void 0,function*(){return yield this.connect(s,u,{autoSubscribe:d==null?void 0:d.autoSubscribe})})}reconnect(s,u){return __awaiter$2(this,void 0,void 0,function*(){yield this.connect(s,u,{reconnect:!0})})}connect(s,u,d){s.startsWith("http")&&(s=s.replace("http","ws")),s=s.replace(/\/$/,""),s+="/rtc";const l=utils_1$1.getClientInfo(),p=createConnectionParams(u,l,d);return new Promise((h,y)=>{logger_1$1.default.debug("connecting to",s+p),this.ws=void 0;const _=new WebSocket(s+p);_.binaryType="arraybuffer",_.onerror=E=>__awaiter$2(this,void 0,void 0,function*(){if(!this.ws){try{const I=yield fetch(`http${s.substring(2)}/validate${p}`);if(I.ok)y(new errors_1$1.ConnectionError("Internal error"));else{const N=yield I.text();y(new errors_1$1.ConnectionError(N))}}catch{y(new errors_1$1.ConnectionError("server was not reachable"))}return}this.handleWSError(E)}),_.onopen=()=>{this.ws=_,d.reconnect&&(this.isConnected=!0,h())},_.onmessage=E=>__awaiter$2(this,void 0,void 0,function*(){let I;if(typeof E.data=="string"){const N=JSON.parse(E.data);I=livekit_rtc_1.SignalResponse.fromJSON(N)}else if(E.data instanceof ArrayBuffer)I=livekit_rtc_1.SignalResponse.decode(new Uint8Array(E.data));else{logger_1$1.default.error("could not decode websocket message",typeof E.data);return}if(!this.isConnected){I.join?(this.isConnected=!0,h(I.join)):y(new errors_1$1.ConnectionError("did not receive join response"));return}this.signalLatency&&(yield utils_1$1.sleep(this.signalLatency)),this.handleSignalResponse(I)}),_.onclose=E=>{!this.isConnected||(logger_1$1.default.debug("websocket connection closed",E.reason),this.isConnected=!1,this.onClose&&this.onClose(E.reason),this.ws===_&&(this.ws=void 0))}})}close(){var s;this.isConnected=!1,this.ws&&(this.ws.onclose=null),(s=this.ws)===null||s===void 0||s.close(),this.ws=void 0}sendOffer(s){logger_1$1.default.debug("sending offer",s),this.sendRequest({offer:toProtoSessionDescription(s)})}sendAnswer(s){logger_1$1.default.debug("sending answer"),this.sendRequest({answer:toProtoSessionDescription(s)})}sendIceCandidate(s,u){logger_1$1.default.trace("sending ice candidate",s),this.sendRequest({trickle:{candidateInit:JSON.stringify(s),target:u}})}sendMuteTrack(s,u){this.sendRequest({mute:{sid:s,muted:u}})}sendAddTrack(s){this.sendRequest({addTrack:livekit_rtc_1.AddTrackRequest.fromPartial(s)})}sendUpdateTrackSettings(s){this.sendRequest({trackSetting:s})}sendUpdateSubscription(s){this.sendRequest({subscription:s})}sendSyncState(s){this.sendRequest({syncState:s})}sendUpdateVideoLayers(s,u){this.sendRequest({updateLayers:{trackSid:s,layers:u}})}sendUpdateSubscriptionPermissions(s,u){this.sendRequest({subscriptionPermissions:{allParticipants:s,trackPermissions:u}})}sendSimulateScenario(s){this.sendRequest({simulate:s})}sendLeave(){this.sendRequest(livekit_rtc_1.SignalRequest.fromPartial({leave:{}}))}sendRequest(s){return __awaiter$2(this,void 0,void 0,function*(){if(this.signalLatency&&(yield utils_1$1.sleep(this.signalLatency)),!this.ws){logger_1$1.default.error("cannot send signal request before connected");return}try{this.useJSON?this.ws.send(JSON.stringify(livekit_rtc_1.SignalRequest.toJSON(s))):this.ws.send(livekit_rtc_1.SignalRequest.encode(s).finish())}catch(u){logger_1$1.default.error("error sending signal message",u)}})}handleSignalResponse(s){if(s.answer){const u=fromProtoSessionDescription(s.answer);this.onAnswer&&this.onAnswer(u)}else if(s.offer){const u=fromProtoSessionDescription(s.offer);this.onOffer&&this.onOffer(u)}else if(s.trickle){const u=JSON.parse(s.trickle.candidateInit);this.onTrickle&&this.onTrickle(u,s.trickle.target)}else s.update?this.onParticipantUpdate&&this.onParticipantUpdate(s.update.participants):s.trackPublished?this.onLocalTrackPublished&&this.onLocalTrackPublished(s.trackPublished):s.speakersChanged?this.onSpeakersChanged&&this.onSpeakersChanged(s.speakersChanged.speakers):s.leave?this.onLeave&&this.onLeave():s.mute?this.onRemoteMuteChanged&&this.onRemoteMuteChanged(s.mute.sid,s.mute.muted):s.roomUpdate?this.onRoomUpdate&&this.onRoomUpdate(s.roomUpdate.room):s.connectionQuality?this.onConnectionQuality&&this.onConnectionQuality(s.connectionQuality):s.streamStateUpdate?this.onStreamStateUpdate&&this.onStreamStateUpdate(s.streamStateUpdate):s.subscribedQualityUpdate?this.onSubscribedQualityUpdate&&this.onSubscribedQualityUpdate(s.subscribedQualityUpdate):s.subscriptionPermissionUpdate?this.onSubscriptionPermissionUpdate&&this.onSubscriptionPermissionUpdate(s.subscriptionPermissionUpdate):logger_1$1.default.debug("unsupported message",s)}handleWSError(s){logger_1$1.default.error("websocket error",s)}}SignalClient$1.SignalClient=SignalClient;function fromProtoSessionDescription(a){const s={type:"offer",sdp:a.sdp};switch(a.type){case"answer":case"offer":case"pranswer":case"rollback":s.type=a.type;break}return s}function toProtoSessionDescription(a){return{sdp:a.sdp,type:a.type}}SignalClient$1.toProtoSessionDescription=toProtoSessionDescription;function createConnectionParams(a,s,u){const d=new URLSearchParams;return d.set("access_token",a),u!=null&&u.reconnect&&d.set("reconnect","1"),(u==null?void 0:u.autoSubscribe)!==void 0&&d.set("auto_subscribe",u.autoSubscribe?"1":"0"),d.set("sdk","js"),d.set("version",s.version),d.set("protocol",s.protocol.toString()),s.deviceModel&&d.set("device_model",s.deviceModel),s.os&&d.set("os",s.os),s.osVersion&&d.set("os_version",s.osVersion),s.browser&&d.set("browser",s.browser),s.browserVersion&&d.set("browser_version",s.browserVersion),`?${d.toString()}`}var RTCEngine={},PCTransport$1={},__awaiter$1=commonjsGlobal&&commonjsGlobal.__awaiter||function(a,s,u,d){function l(p){return p instanceof u?p:new u(function(h){h(p)})}return new(u||(u=Promise))(function(p,h){function y(I){try{E(d.next(I))}catch(N){h(N)}}function _(I){try{E(d.throw(I))}catch(N){h(N)}}function E(I){I.done?p(I.value):l(I.value).then(y,_)}E((d=d.apply(a,s||[])).next())})},__importDefault$1=commonjsGlobal&&commonjsGlobal.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(PCTransport$1,"__esModule",{value:!0});const ts_debounce_1=require$$0,logger_1=__importDefault$1(logger);class PCTransport{constructor(s){this.pendingCandidates=[],this.restartingIce=!1,this.renegotiate=!1,this.negotiate=ts_debounce_1.debounce(()=>{this.createAndSendOffer()},100),this.pc=new RTCPeerConnection(s)}get isICEConnected(){return this.pc.iceConnectionState==="connected"||this.pc.iceConnectionState==="completed"}addIceCandidate(s){return __awaiter$1(this,void 0,void 0,function*(){if(this.pc.remoteDescription&&!this.restartingIce)return this.pc.addIceCandidate(s);this.pendingCandidates.push(s)})}setRemoteDescription(s){return __awaiter$1(this,void 0,void 0,function*(){yield this.pc.setRemoteDescription(s),this.pendingCandidates.forEach(u=>{this.pc.addIceCandidate(u)}),this.pendingCandidates=[],this.restartingIce=!1,this.renegotiate&&(this.renegotiate=!1,this.createAndSendOffer())})}createAndSendOffer(s){return __awaiter$1(this,void 0,void 0,function*(){if(this.onOffer===void 0)return;if(s!=null&&s.iceRestart&&(logger_1.default.debug("restarting ICE"),this.restartingIce=!0),this.pc.signalingState==="have-local-offer"){const d=this.pc.remoteDescription;if((s==null?void 0:s.iceRestart)&&d)yield this.pc.setRemoteDescription(d);else{this.renegotiate=!0;return}}else if(this.pc.signalingState==="closed"){logger_1.default.warn("could not createOffer with closed peer connection");return}logger_1.default.debug("starting to negotiate");const u=yield this.pc.createOffer(s);yield this.pc.setLocalDescription(u),this.onOffer(u)})}close(){this.pc.close()}}PCTransport$1.default=PCTransport,function(a){var s=commonjsGlobal&&commonjsGlobal.__awaiter||function(W,g,O,$){function x(Y){return Y instanceof O?Y:new O(function(te){te(Y)})}return new(O||(O=Promise))(function(Y,te){function ne(K){try{j($.next(K))}catch(M){te(M)}}function F(K){try{j($.throw(K))}catch(M){te(M)}}function j(K){K.done?Y(K.value):x(K.value).then(ne,F)}j(($=$.apply(W,g||[])).next())})},u=commonjsGlobal&&commonjsGlobal.__importDefault||function(W){return W&&W.__esModule?W:{default:W}};Object.defineProperty(a,"__esModule",{value:!0}),a.maxICEConnectTimeout=void 0;const d=events.exports,l=SignalClient$1,p=u(logger),h=livekit_models,y=livekit_rtc,_=errors,E=events$1,I=u(PCTransport$1),N=utils$1,w="_lossy",C="_reliable",D=5;a.maxICEConnectTimeout=5*1e3;class V extends d.EventEmitter{constructor(){super(),this.rtcConfig={},this.subscriberPrimary=!1,this.iceConnected=!1,this.isClosed=!0,this.pendingTrackResolvers={},this.hasPublished=!1,this.reconnectAttempts=0,this.handleDataChannel=({channel:g})=>s(this,void 0,void 0,function*(){if(!!g){if(g.label===C)this.reliableDCSub=g;else if(g.label===w)this.lossyDCSub=g;else return;g.onmessage=this.handleDataMessage}}),this.handleDataMessage=g=>s(this,void 0,void 0,function*(){let O;if(g.data instanceof ArrayBuffer)O=g.data;else if(g.data instanceof Blob)O=yield g.data.arrayBuffer();else{p.default.error("unsupported data type",g.data);return}const $=h.DataPacket.decode(new Uint8Array(O));$.speaker?this.emit(E.EngineEvent.ActiveSpeakersUpdate,$.speaker.speakers):$.user&&this.emit(E.EngineEvent.DataPacketReceived,$.user,$.kind)}),this.handleDisconnect=g=>{if(this.isClosed)return;if(p.default.debug(`${g} disconnected`),this.reconnectAttempts>=D){p.default.info("could not connect to signal after",D,"attempts. giving up"),this.emit(E.EngineEvent.Disconnected),this.close();return}const O=this.reconnectAttempts*this.reconnectAttempts*300;setTimeout(()=>{this.reconnect().then(()=>{this.reconnectAttempts=0}).catch(this.handleDisconnect)},O)},this.client=new l.SignalClient}join(g,O,$){return s(this,void 0,void 0,function*(){this.url=g,this.token=O;const x=yield this.client.join(g,O,$);return this.emit(E.EngineEvent.SignalConnected),this.isClosed=!1,this.subscriberPrimary=x.subscriberPrimary,this.publisher||this.configure(x),this.subscriberPrimary||this.negotiate(),x})}close(){this.isClosed=!0,this.removeAllListeners(),this.publisher&&this.publisher.pc.signalingState!=="closed"&&(this.publisher.pc.getSenders().forEach(g=>{var O;try{(O=this.publisher)===null||O===void 0||O.pc.removeTrack(g)}catch($){p.default.warn("could not removeTrack",$)}}),this.publisher.close(),this.publisher=void 0),this.subscriber&&(this.subscriber.close(),this.subscriber=void 0),this.client.close()}addTrack(g){if(this.pendingTrackResolvers[g.cid])throw new _.TrackInvalidError("a track with the same ID has already been published");return new Promise(O=>{this.pendingTrackResolvers[g.cid]=O,this.client.sendAddTrack(g)})}updateMuteStatus(g,O){this.client.sendMuteTrack(g,O)}get dataSubscriberReadyState(){var g;return(g=this.reliableDCSub)===null||g===void 0?void 0:g.readyState}get connectedServerAddress(){return this.connectedServerAddr}configure(g){if(this.publisher||this.subscriber)return;if(g.iceServers&&!this.rtcConfig.iceServers){const $=[];g.iceServers.forEach(x=>{const Y={urls:x.urls};x.username&&(Y.username=x.username),x.credential&&(Y.credential=x.credential),$.push(Y)}),this.rtcConfig.iceServers=$}this.publisher=new I.default(this.rtcConfig),this.subscriber=new I.default(this.rtcConfig),this.publisher.pc.onicecandidate=$=>{!$.candidate||(p.default.trace("adding ICE candidate for peer",$.candidate),this.client.sendIceCandidate($.candidate,y.SignalTarget.PUBLISHER))},this.subscriber.pc.onicecandidate=$=>{!$.candidate||this.client.sendIceCandidate($.candidate,y.SignalTarget.SUBSCRIBER)},this.publisher.onOffer=$=>{this.client.sendOffer($)};let O=this.publisher.pc;g.subscriberPrimary&&(O=this.subscriber.pc,this.subscriber.pc.ondatachannel=this.handleDataChannel),O.oniceconnectionstatechange=()=>{O.iceConnectionState==="connected"?(p.default.trace("ICE connected"),this.iceConnected||(this.iceConnected=!0,this.emit(E.EngineEvent.Connected)),J(O).then($=>{this.connectedServerAddr=$})):O.iceConnectionState==="failed"&&(p.default.trace("ICE disconnected"),this.iceConnected&&(this.iceConnected=!1,this.handleDisconnect("peerconnection")))},this.subscriber.pc.ontrack=$=>{this.emit(E.EngineEvent.MediaTrackAdded,$.track,$.streams[0],$.receiver)},this.lossyDC=this.publisher.pc.createDataChannel(w,{ordered:!0,maxRetransmits:0}),this.reliableDC=this.publisher.pc.createDataChannel(C,{ordered:!0}),this.lossyDC.onmessage=this.handleDataMessage,this.reliableDC.onmessage=this.handleDataMessage,this.client.onAnswer=$=>s(this,void 0,void 0,function*(){!this.publisher||(p.default.debug("received server answer",$.type,this.publisher.pc.signalingState),yield this.publisher.setRemoteDescription($))}),this.client.onTrickle=($,x)=>{!this.publisher||!this.subscriber||(p.default.trace("got ICE candidate from peer",$,x),x===y.SignalTarget.PUBLISHER?this.publisher.addIceCandidate($):this.subscriber.addIceCandidate($))},this.client.onOffer=$=>s(this,void 0,void 0,function*(){if(!this.subscriber)return;p.default.debug("received server offer",$.type,this.subscriber.pc.signalingState),yield this.subscriber.setRemoteDescription($);const x=yield this.subscriber.pc.createAnswer();yield this.subscriber.pc.setLocalDescription(x),this.client.sendAnswer(x)}),this.client.onLocalTrackPublished=$=>{p.default.debug("received trackPublishedResponse",$);const x=this.pendingTrackResolvers[$.cid];if(!x){p.default.error("missing track resolver for ",$.cid);return}delete this.pendingTrackResolvers[$.cid],x($.track)},this.client.onClose=()=>{this.handleDisconnect("signal")},this.client.onLeave=()=>{this.emit(E.EngineEvent.Disconnected),this.close()}}reconnect(){return s(this,void 0,void 0,function*(){if(this.isClosed)return;if(!this.url||!this.token)throw new _.ConnectionError("could not reconnect, url or token not saved");if(p.default.info("reconnecting to signal connection, attempt",this.reconnectAttempts),this.reconnectAttempts===0&&this.emit(E.EngineEvent.Reconnecting),this.reconnectAttempts+=1,yield this.client.reconnect(this.url,this.token),this.emit(E.EngineEvent.SignalConnected),!this.publisher||!this.subscriber)throw new _.UnexpectedConnectionState("publisher and subscriber connections unset");this.subscriber.restartingIce=!0,this.hasPublished&&(yield this.publisher.createAndSendOffer({iceRestart:!0}));const g=new Date().getTime();for(;new Date().getTime()-g<a.maxICEConnectTimeout*2;){if(this.iceConnected){this.emit(E.EngineEvent.Reconnected);return}yield N.sleep(100)}throw new _.ConnectionError("could not establish ICE connection")})}sendDataPacket(g,O){return s(this,void 0,void 0,function*(){const $=h.DataPacket.encode(g).finish();yield this.ensurePublisherConnected(O),O===h.DataPacket_Kind.LOSSY&&this.lossyDC?this.lossyDC.send($):O===h.DataPacket_Kind.RELIABLE&&this.reliableDC&&this.reliableDC.send($)})}ensurePublisherConnected(g){var O,$;return s(this,void 0,void 0,function*(){if(!this.subscriberPrimary)return;if(!this.publisher)throw new _.ConnectionError("publisher connection not set");!this.publisher.isICEConnected&&this.publisher.pc.iceConnectionState!=="checking"&&this.negotiate();const x=this.dataChannelForKind(g);if((x==null?void 0:x.readyState)==="open")return;const Y=new Date().getTime()+a.maxICEConnectTimeout;for(;new Date().getTime()<Y;){if(this.publisher.isICEConnected&&((O=this.dataChannelForKind(g))===null||O===void 0?void 0:O.readyState)==="open")return;yield N.sleep(50)}throw new _.ConnectionError(`could not establish publisher connection, state ${($=this.publisher)===null||$===void 0?void 0:$.pc.iceConnectionState}`)})}negotiate(){!this.publisher||(this.hasPublished=!0,this.publisher.negotiate())}dataChannelForKind(g){if(g===h.DataPacket_Kind.LOSSY)return this.lossyDC;if(g===h.DataPacket_Kind.RELIABLE)return this.reliableDC}}a.default=V;function J(W){var g;return s(this,void 0,void 0,function*(){let O="";const $=new Map,x=new Map;if((yield W.getStats()).forEach(ne=>{switch(ne.type){case"transport":O=ne.selectedCandidatePairId;break;case"candidate-pair":O===""&&ne.selected&&(O=ne.id),$.set(ne.id,ne);break;case"remote-candidate":x.set(ne.id,`${ne.address}:${ne.port}`);break}}),O==="")return;const te=(g=$.get(O))===null||g===void 0?void 0:g.remoteCandidateId;if(te!==void 0)return x.get(te)})}}(RTCEngine);var defaults={};Object.defineProperty(defaults,"__esModule",{value:!0}),defaults.videoDefaults=defaults.audioDefaults=defaults.publishDefaults=void 0;const options_1$1=options$1;defaults.publishDefaults={audioBitrate:options_1$1.AudioPresets.speech.maxBitrate,dtx:!0,simulcast:!0,screenShareEncoding:options_1$1.ScreenSharePresets.hd_15.encoding,stopMicTrackOnMute:!1},defaults.audioDefaults={autoGainControl:!0,channelCount:1,echoCancellation:!0,noiseSuppression:!0},defaults.videoDefaults={resolution:options_1$1.VideoPresets.qhd.resolution},function(a){var s=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(Y,te,ne,F){F===void 0&&(F=ne),Object.defineProperty(Y,F,{enumerable:!0,get:function(){return te[ne]}})}:function(Y,te,ne,F){F===void 0&&(F=ne),Y[F]=te[ne]}),u=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(Y,te){Object.defineProperty(Y,"default",{enumerable:!0,value:te})}:function(Y,te){Y.default=te}),d=commonjsGlobal&&commonjsGlobal.__importStar||function(Y){if(Y&&Y.__esModule)return Y;var te={};if(Y!=null)for(var ne in Y)ne!=="default"&&Object.prototype.hasOwnProperty.call(Y,ne)&&s(te,Y,ne);return u(te,Y),te},l=commonjsGlobal&&commonjsGlobal.__awaiter||function(Y,te,ne,F){function j(K){return K instanceof ne?K:new ne(function(M){M(K)})}return new(ne||(ne=Promise))(function(K,M){function q(re){try{le(F.next(re))}catch(Q){M(Q)}}function z(re){try{le(F.throw(re))}catch(Q){M(Q)}}function le(re){re.done?K(re.value):j(re.value).then(q,z)}le((F=F.apply(Y,te||[])).next())})},p=commonjsGlobal&&commonjsGlobal.__importDefault||function(Y){return Y&&Y.__esModule?Y:{default:Y}};Object.defineProperty(a,"__esModule",{value:!0}),a.RoomState=void 0;const h=events.exports,y=SignalClient$1,_=p(logger),E=livekit_models,I=livekit_rtc,N=p(DeviceManager$1),w=errors,C=events$1,D=p(LocalParticipant$1),V=p(RemoteParticipant$1),J=d(RTCEngine),W=defaults,g=Track,O=utils$1;var $;(function(Y){Y.Disconnected="disconnected",Y.Connected="connected",Y.Reconnecting="reconnecting"})($=a.RoomState||(a.RoomState={}));class x extends h.EventEmitter{constructor(te){super(),this.state=$.Disconnected,this.activeSpeakers=[],this.sid="",this.name="",this.metadata=void 0,this.audioEnabled=!0,this.connect=(ne,F,j)=>l(this,void 0,void 0,function*(){if(this.state!==$.Disconnected){_.default.warn("already connected to room",this.name);return}this.createEngine(),this.acquireAudioContext(),j!=null&&j.rtcConfig&&(this.engine.rtcConfig=j.rtcConfig),this.connOptions=j;try{const K=yield this.engine.join(ne,F,j);if(_.default.debug("connected to Livekit Server",K.serverVersion),!K.serverVersion)throw new w.UnsupportedServer("unknown server version");K.serverVersion==="0.15.1"&&this.options.dynacast&&(_.default.debug("disabling dynacast due to server version"),this.options.dynacast=!1),this.state=$.Connected;const M=K.participant;this.localParticipant=new D.default(M.sid,M.identity,this.engine,this.options),this.localParticipant.updateInfo(M),this.localParticipant.on(C.ParticipantEvent.MetadataChanged,q=>{this.emit(C.RoomEvent.MetadataChanged,q,this.localParticipant)}).on(C.ParticipantEvent.ParticipantMetadataChanged,q=>{this.emit(C.RoomEvent.ParticipantMetadataChanged,q,this.localParticipant)}).on(C.ParticipantEvent.TrackMuted,q=>{this.emit(C.RoomEvent.TrackMuted,q,this.localParticipant)}).on(C.ParticipantEvent.TrackUnmuted,q=>{this.emit(C.RoomEvent.TrackUnmuted,q,this.localParticipant)}).on(C.ParticipantEvent.LocalTrackPublished,q=>{this.emit(C.RoomEvent.LocalTrackPublished,q,this.localParticipant)}).on(C.ParticipantEvent.LocalTrackUnpublished,q=>{this.emit(C.RoomEvent.LocalTrackUnpublished,q,this.localParticipant)}).on(C.ParticipantEvent.ConnectionQualityChanged,q=>{this.emit(C.RoomEvent.ConnectionQualityChanged,q,this.localParticipant)}).on(C.ParticipantEvent.MediaDevicesError,q=>{this.emit(C.RoomEvent.MediaDevicesError,q)}),K.otherParticipants.forEach(q=>{this.getOrCreateParticipant(q.sid,q)}),this.name=K.room.name,this.sid=K.room.sid,this.metadata=K.room.metadata}catch(K){throw this.engine.close(),K}return new Promise((K,M)=>{const q=setTimeout(()=>{this.engine.close(),M(new w.ConnectionError("could not connect after timeout"))},J.maxICEConnectTimeout);this.engine.once(C.EngineEvent.Connected,()=>{clearTimeout(q),window.addEventListener("beforeunload",this.onBeforeUnload),navigator.mediaDevices.addEventListener("devicechange",this.handleDeviceChange),K(this)})})}),this.disconnect=(ne=!0)=>{this.engine&&(this.engine.client.sendLeave(),this.engine.close()),this.handleDisconnect(ne),this.engine=void 0},this.onBeforeUnload=()=>{this.disconnect()},this.handleParticipantUpdates=ne=>{ne.forEach(F=>{if(F.sid===this.localParticipant.sid){this.localParticipant.updateInfo(F);return}let j=this.participants.get(F.sid);const K=!j;j=this.getOrCreateParticipant(F.sid,F),F.state===E.ParticipantInfo_State.DISCONNECTED?this.handleParticipantDisconnected(F.sid,j):K?this.emit(C.RoomEvent.ParticipantConnected,j):j.updateInfo(F)})},this.handleActiveSpeakersUpdate=ne=>{const F=[],j={};ne.forEach(K=>{if(j[K.sid]=!0,K.sid===this.localParticipant.sid)this.localParticipant.audioLevel=K.level,this.localParticipant.setIsSpeaking(!0),F.push(this.localParticipant);else{const M=this.participants.get(K.sid);M&&(M.audioLevel=K.level,M.setIsSpeaking(!0),F.push(M))}}),j[this.localParticipant.sid]||(this.localParticipant.audioLevel=0,this.localParticipant.setIsSpeaking(!1)),this.participants.forEach(K=>{j[K.sid]||(K.audioLevel=0,K.setIsSpeaking(!1))}),this.activeSpeakers=F,this.emit(C.RoomEvent.ActiveSpeakersChanged,F)},this.handleSpeakersChanged=ne=>{const F=new Map;this.activeSpeakers.forEach(K=>{F.set(K.sid,K)}),ne.forEach(K=>{let M=this.participants.get(K.sid);K.sid===this.localParticipant.sid&&(M=this.localParticipant),M&&(M.audioLevel=K.level,M.setIsSpeaking(K.active),K.active?F.set(K.sid,M):F.delete(K.sid))});const j=Array.from(F.values());j.sort((K,M)=>M.audioLevel-K.audioLevel),this.activeSpeakers=j,this.emit(C.RoomEvent.ActiveSpeakersChanged,j)},this.handleStreamStateUpdate=ne=>{ne.streamStates.forEach(F=>{const j=this.participants.get(F.participantSid);if(!j)return;const K=j.getTrackPublication(F.trackSid);!K||!K.track||(K.track.streamState=g.Track.streamStateFromProto(F.state),j.emit(C.ParticipantEvent.TrackStreamStateChanged,K,K.track.streamState),this.emit(C.ParticipantEvent.TrackStreamStateChanged,K,K.track.streamState,j))})},this.handleSubscriptionPermissionUpdate=ne=>{const F=this.participants.get(ne.participantSid);if(!F)return;const j=F.getTrackPublication(ne.trackSid);!j||(j._allowed=ne.allowed,F.emit(C.ParticipantEvent.TrackSubscriptionPermissionChanged,j,j.subscriptionStatus),this.emit(C.ParticipantEvent.TrackSubscriptionPermissionChanged,j,j.subscriptionStatus,F))},this.handleDataPacket=(ne,F)=>{const j=this.participants.get(ne.participantSid);this.emit(C.RoomEvent.DataReceived,ne.payload,j,F),j==null||j.emit(C.ParticipantEvent.DataReceived,ne.payload,F)},this.handleAudioPlaybackStarted=()=>{this.canPlaybackAudio||(this.audioEnabled=!0,this.emit(C.RoomEvent.AudioPlaybackStatusChanged,!0))},this.handleAudioPlaybackFailed=ne=>{_.default.warn("could not playback audio",ne),this.canPlaybackAudio&&(this.audioEnabled=!1,this.emit(C.RoomEvent.AudioPlaybackStatusChanged,!1))},this.handleDeviceChange=()=>l(this,void 0,void 0,function*(){this.emit(C.RoomEvent.MediaDevicesChanged)}),this.handleRoomUpdate=ne=>{this.metadata=ne.metadata,this.emit(C.RoomEvent.RoomMetadataChanged,ne.metadata)},this.handleConnectionQualityUpdate=ne=>{ne.updates.forEach(F=>{if(F.participantSid===this.localParticipant.sid){this.localParticipant.setConnectionQuality(F.quality);return}const j=this.participants.get(F.participantSid);j&&j.setConnectionQuality(F.quality)})},this.participants=new Map,this.options=te||{},this.options.audioCaptureDefaults=Object.assign(Object.assign({},W.audioDefaults),te==null?void 0:te.audioCaptureDefaults),this.options.videoCaptureDefaults=Object.assign(Object.assign({},W.videoDefaults),te==null?void 0:te.videoCaptureDefaults),this.options.publishDefaults=Object.assign(Object.assign({},W.publishDefaults),te==null?void 0:te.publishDefaults),this.createEngine(),this.localParticipant=new D.default("","",this.engine,this.options)}createEngine(){this.engine||(this.engine=new J.default,this.engine.client.signalLatency=this.options.expSignalLatency,this.engine.on(C.EngineEvent.MediaTrackAdded,(te,ne,F)=>{this.onTrackAdded(te,ne,F)}),this.engine.on(C.EngineEvent.Disconnected,()=>{this.handleDisconnect()}),this.engine.client.onParticipantUpdate=this.handleParticipantUpdates,this.engine.client.onRoomUpdate=this.handleRoomUpdate,this.engine.client.onSpeakersChanged=this.handleSpeakersChanged,this.engine.client.onStreamStateUpdate=this.handleStreamStateUpdate,this.engine.client.onSubscriptionPermissionUpdate=this.handleSubscriptionPermissionUpdate,this.engine.on(C.EngineEvent.ActiveSpeakersUpdate,this.handleActiveSpeakersUpdate),this.engine.on(C.EngineEvent.DataPacketReceived,this.handleDataPacket),this.engine.on(C.EngineEvent.Reconnecting,()=>{this.state=$.Reconnecting,this.emit(C.RoomEvent.Reconnecting)}),this.engine.on(C.EngineEvent.Reconnected,()=>{this.state=$.Connected,this.emit(C.RoomEvent.Reconnected)}),this.engine.on(C.EngineEvent.SignalConnected,()=>{this.state===$.Reconnecting&&this.sendSyncState()}),this.engine.client.onConnectionQuality=this.handleConnectionQualityUpdate)}static getLocalDevices(te){return N.default.getInstance().getDevices(te)}getParticipantByIdentity(te){for(const[,ne]of this.participants)if(ne.identity===te)return ne;if(this.localParticipant.identity===te)return this.localParticipant}simulateScenario(te){let ne;switch(te){case"speaker":ne=I.SimulateScenario.fromPartial({speakerUpdate:3});break;case"node-failure":ne=I.SimulateScenario.fromPartial({nodeFailure:!0});break;case"server-leave":ne=I.SimulateScenario.fromPartial({serverLeave:!0});break;case"migration":ne=I.SimulateScenario.fromPartial({migration:!0});break}ne&&this.engine.client.sendSimulateScenario(ne)}startAudio(){return l(this,void 0,void 0,function*(){this.acquireAudioContext();const te=[];this.participants.forEach(ne=>{ne.audioTracks.forEach(F=>{F.track&&F.track.attachedElements.forEach(j=>{te.push(j)})})});try{yield Promise.all(te.map(ne=>ne.play())),this.handleAudioPlaybackStarted()}catch(ne){throw this.handleAudioPlaybackFailed(ne),ne}})}get canPlaybackAudio(){return this.audioEnabled}switchActiveDevice(te,ne){return l(this,void 0,void 0,function*(){if(te==="audioinput"){const F=Array.from(this.localParticipant.audioTracks.values()).filter(j=>j.source===g.Track.Source.Microphone);yield Promise.all(F.map(j=>{var K;return(K=j.audioTrack)===null||K===void 0?void 0:K.setDeviceId(ne)})),this.options.audioCaptureDefaults.deviceId=ne}else if(te==="videoinput"){const F=Array.from(this.localParticipant.videoTracks.values()).filter(j=>j.source===g.Track.Source.Camera);yield Promise.all(F.map(j=>{var K;return(K=j.videoTrack)===null||K===void 0?void 0:K.setDeviceId(ne)})),this.options.videoCaptureDefaults.deviceId=ne}else if(te==="audiooutput"){const F=[];this.participants.forEach(j=>{j.audioTracks.forEach(K=>{K.isSubscribed&&K.track&&K.track.attachedElements.forEach(M=>{F.push(M)})})}),yield Promise.all(F.map(j=>l(this,void 0,void 0,function*(){"setSinkId"in j&&(yield j.setSinkId(ne))})))}})}onTrackAdded(te,ne,F){const j=O.unpackStreamId(ne.id),K=j[0];let M=j[1];(!M||M==="")&&(M=te.id),this.getOrCreateParticipant(K).addSubscribedMediaTrack(te,M,ne,F,this.options.adaptiveStream)}handleDisconnect(te=!0){this.state!==$.Disconnected&&(this.participants.forEach(ne=>{ne.tracks.forEach(F=>{ne.unpublishTrack(F.trackSid)})}),this.localParticipant.tracks.forEach(ne=>{var F,j;ne.track&&this.localParticipant.unpublishTrack(ne.track),te&&((F=ne.track)===null||F===void 0||F.detach(),(j=ne.track)===null||j===void 0||j.stop())}),this.participants.clear(),this.activeSpeakers=[],this.audioContext&&(this.audioContext.close(),this.audioContext=void 0),window.removeEventListener("beforeunload",this.onBeforeUnload),navigator.mediaDevices.removeEventListener("devicechange",this.handleDeviceChange),this.state=$.Disconnected,this.emit(C.RoomEvent.Disconnected))}handleParticipantDisconnected(te,ne){this.participants.delete(te),ne&&(ne.tracks.forEach(F=>{ne.unpublishTrack(F.trackSid)}),this.emit(C.RoomEvent.ParticipantDisconnected,ne))}acquireAudioContext(){this.audioContext&&this.audioContext.close();const te=window.AudioContext||window.webkitAudioContext;te&&(this.audioContext=new te)}getOrCreateParticipant(te,ne){let F=this.participants.get(te);return F||(ne?F=V.default.fromParticipantInfo(this.engine.client,ne):F=new V.default(this.engine.client,te,""),this.participants.set(te,F),F.on(C.ParticipantEvent.TrackPublished,j=>{this.emit(C.RoomEvent.TrackPublished,j,F)}).on(C.ParticipantEvent.TrackSubscribed,(j,K)=>{j.kind===g.Track.Kind.Audio&&(j.on(C.TrackEvent.AudioPlaybackStarted,this.handleAudioPlaybackStarted),j.on(C.TrackEvent.AudioPlaybackFailed,this.handleAudioPlaybackFailed)),this.emit(C.RoomEvent.TrackSubscribed,j,K,F)}).on(C.ParticipantEvent.TrackUnpublished,j=>{this.emit(C.RoomEvent.TrackUnpublished,j,F)}).on(C.ParticipantEvent.TrackUnsubscribed,(j,K)=>{this.emit(C.RoomEvent.TrackUnsubscribed,j,K,F)}).on(C.ParticipantEvent.TrackSubscriptionFailed,j=>{this.emit(C.RoomEvent.TrackSubscriptionFailed,j,F)}).on(C.ParticipantEvent.TrackMuted,j=>{this.emit(C.RoomEvent.TrackMuted,j,F)}).on(C.ParticipantEvent.TrackUnmuted,j=>{this.emit(C.RoomEvent.TrackUnmuted,j,F)}).on(C.ParticipantEvent.MetadataChanged,j=>{this.emit(C.RoomEvent.MetadataChanged,j,F)}).on(C.ParticipantEvent.ParticipantMetadataChanged,j=>{this.emit(C.RoomEvent.ParticipantMetadataChanged,j,F)}).on(C.ParticipantEvent.ConnectionQualityChanged,j=>{this.emit(C.RoomEvent.ConnectionQualityChanged,j,F)})),F}sendSyncState(){var te;if(this.engine.subscriber===void 0||this.engine.subscriber.pc.localDescription===null)return;const ne=this.engine.subscriber.pc.localDescription,F=((te=this.connOptions)===null||te===void 0?void 0:te.autoSubscribe)||!1,j=new Array;this.participants.forEach(K=>{K.tracks.forEach(M=>{M.isSubscribed!==F&&j.push(M.trackSid)})}),this.engine.client.sendSyncState({answer:y.toProtoSessionDescription({sdp:ne.sdp,type:ne.type}),subscription:{trackSids:j,subscribe:!F,participantTracks:[]},publishTracks:this.localParticipant.publishedTracksInfo()})}emit(te,...ne){return _.default.debug("room event",te,...ne),super.emit(te,...ne)}}a.default=x}(Room);var connect={};(function(a){var s=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(w,C,D,V){V===void 0&&(V=D),Object.defineProperty(w,V,{enumerable:!0,get:function(){return C[D]}})}:function(w,C,D,V){V===void 0&&(V=D),w[V]=C[D]}),u=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(w,C){Object.defineProperty(w,"default",{enumerable:!0,value:C})}:function(w,C){w.default=C}),d=commonjsGlobal&&commonjsGlobal.__importStar||function(w){if(w&&w.__esModule)return w;var C={};if(w!=null)for(var D in w)D!=="default"&&Object.prototype.hasOwnProperty.call(w,D)&&s(C,w,D);return u(C,w),C},l=commonjsGlobal&&commonjsGlobal.__awaiter||function(w,C,D,V){function J(W){return W instanceof D?W:new D(function(g){g(W)})}return new(D||(D=Promise))(function(W,g){function O(Y){try{x(V.next(Y))}catch(te){g(te)}}function $(Y){try{x(V.throw(Y))}catch(te){g(te)}}function x(Y){Y.done?W(Y.value):J(Y.value).then(O,$)}x((V=V.apply(w,C||[])).next())})},p=commonjsGlobal&&commonjsGlobal.__importDefault||function(w){return w&&w.__esModule?w:{default:w}};Object.defineProperty(a,"__esModule",{value:!0}),a.connect=a.version=void 0;const h=d(logger),y=errors,_=events$1,E=p(Room);var I=version;Object.defineProperty(a,"version",{enumerable:!0,get:function(){return I.version}});function N(w,C,D){var V,J,W,g;return l(this,void 0,void 0,function*(){D!=null||(D={}),D.adaptiveStream===void 0&&(D.adaptiveStream=D.autoManageVideo),h.setLogLevel((V=D.logLevel)!==null&&V!==void 0?V:h.LogLevel.warn);const O=(J=D.rtcConfig)!==null&&J!==void 0?J:{};D.iceServers&&(O.iceServers=D.iceServers);const $=new E.default(D);yield $.connect(w,C,D);const x=(W=D.audio)!==null&&W!==void 0?W:!1,Y=(g=D.video)!==null&&g!==void 0?g:!1;return(x||Y)&&setTimeout(()=>l(this,void 0,void 0,function*(){let te;if(x&&Y)try{yield $.localParticipant.enableCameraAndMicrophone()}catch(ne){const F=y.MediaDeviceFailure.getFailure(ne);if(h.default.warn("received error while creating media",F),ne instanceof Error&&h.default.warn(ne.message),F===y.MediaDeviceFailure.NotFound||F===y.MediaDeviceFailure.DeviceInUse)try{yield $.localParticipant.setMicrophoneEnabled(!0)}catch(j){te=j}else te=ne}else if(x)try{yield $.localParticipant.setMicrophoneEnabled(!0)}catch(ne){te=ne}else if(Y)try{yield $.localParticipant.setCameraEnabled(!0)}catch(ne){te=ne}te&&($.emit(_.RoomEvent.MediaDevicesError,te),h.default.error("could not create media",te))})),$})}a.connect=N})(connect);var options={};Object.defineProperty(options,"__esModule",{value:!0});var create$2={},__awaiter=commonjsGlobal&&commonjsGlobal.__awaiter||function(a,s,u,d){function l(p){return p instanceof u?p:new u(function(h){h(p)})}return new(u||(u=Promise))(function(p,h){function y(I){try{E(d.next(I))}catch(N){h(N)}}function _(I){try{E(d.throw(I))}catch(N){h(N)}}function E(I){I.done?p(I.value):l(I.value).then(y,_)}E((d=d.apply(a,s||[])).next())})},__importDefault=commonjsGlobal&&commonjsGlobal.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(create$2,"__esModule",{value:!0}),create$2.createLocalScreenTracks=create$2.createLocalAudioTrack=create$2.createLocalVideoTrack=create$2.createLocalTracks=void 0;const errors_1=errors,publishUtils_1=publishUtils,defaults_1=defaults,LocalAudioTrack_1=__importDefault(LocalAudioTrack$1),LocalVideoTrack_1=__importDefault(LocalVideoTrack$1),options_1=options$1,Track_1=Track,utils_1=utils;function createLocalTracks(a){var s,u;return __awaiter(this,void 0,void 0,function*(){a!=null||(a={}),(s=a.audio)!==null&&s!==void 0||(a.audio=!0),(u=a.video)!==null&&u!==void 0||(a.video=!0);const d=utils_1.mergeDefaultOptions(a,defaults_1.audioDefaults,defaults_1.videoDefaults),l=utils_1.constraintsForOptions(d);return(yield navigator.mediaDevices.getUserMedia(l)).getTracks().map(h=>{const y=h.kind==="audio";y?a.audio:a.video;let _;const E=y?l.audio:l.video;typeof E!="boolean"&&(_=E);const I=publishUtils_1.mediaTrackToLocalTrack(h,_);return I.kind===Track_1.Track.Kind.Video?I.source=Track_1.Track.Source.Camera:I.kind===Track_1.Track.Kind.Audio&&(I.source=Track_1.Track.Source.Microphone),I})})}create$2.createLocalTracks=createLocalTracks;function createLocalVideoTrack(a){return __awaiter(this,void 0,void 0,function*(){return(yield createLocalTracks({audio:!1,video:a}))[0]})}create$2.createLocalVideoTrack=createLocalVideoTrack;function createLocalAudioTrack(a){return __awaiter(this,void 0,void 0,function*(){return(yield createLocalTracks({audio:a,video:!1}))[0]})}create$2.createLocalAudioTrack=createLocalAudioTrack;function createLocalScreenTracks(a){var s;return __awaiter(this,void 0,void 0,function*(){a===void 0&&(a={}),a.resolution===void 0&&(a.resolution=options_1.VideoPresets.fhd.resolution);let u=!0;a.resolution&&(u={width:a.resolution.width,height:a.resolution.height});const d=yield navigator.mediaDevices.getDisplayMedia({audio:(s=a.audio)!==null&&s!==void 0?s:!1,video:u}),l=d.getVideoTracks();if(l.length===0)throw new errors_1.TrackInvalidError("no video track found");const p=new LocalVideoTrack_1.default(l[0]);p.source=Track_1.Track.Source.ScreenShare;const h=[p];if(d.getAudioTracks().length>0){const y=new LocalAudioTrack_1.default(d.getAudioTracks()[0]);y.source=Track_1.Track.Source.ScreenShareAudio,h.push(y)}return h})}create$2.createLocalScreenTracks=createLocalScreenTracks;var types$1={};Object.defineProperty(types$1,"__esModule",{value:!0}),function(a){var s=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(x,Y,te,ne){ne===void 0&&(ne=te),Object.defineProperty(x,ne,{enumerable:!0,get:function(){return Y[te]}})}:function(x,Y,te,ne){ne===void 0&&(ne=te),x[ne]=Y[te]}),u=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(x,Y){Object.defineProperty(x,"default",{enumerable:!0,value:Y})}:function(x,Y){x.default=Y}),d=commonjsGlobal&&commonjsGlobal.__importStar||function(x){if(x&&x.__esModule)return x;var Y={};if(x!=null)for(var te in x)te!=="default"&&Object.prototype.hasOwnProperty.call(x,te)&&s(Y,x,te);return u(Y,x),Y},l=commonjsGlobal&&commonjsGlobal.__exportStar||function(x,Y){for(var te in x)te!=="default"&&!Object.prototype.hasOwnProperty.call(Y,te)&&s(Y,x,te)},p=commonjsGlobal&&commonjsGlobal.__importDefault||function(x){return x&&x.__esModule?x:{default:x}};Object.defineProperty(a,"__esModule",{value:!0}),a.VideoQuality=a.TrackPublication=a.RemoteTrackPublication=a.RemoteVideoTrack=a.RemoteAudioTrack=a.RemoteTrack=a.LocalTrackPublication=a.LocalTrack=a.LocalVideoTrack=a.LocalAudioTrack=a.LocalParticipant=a.RemoteParticipant=a.Participant=a.ConnectionQuality=a.DataPacket_Kind=a.RoomState=a.Room=a.setLogLevel=void 0;const h=logger;Object.defineProperty(a,"setLogLevel",{enumerable:!0,get:function(){return h.setLogLevel}});const y=livekit_models;Object.defineProperty(a,"DataPacket_Kind",{enumerable:!0,get:function(){return y.DataPacket_Kind}}),Object.defineProperty(a,"VideoQuality",{enumerable:!0,get:function(){return y.VideoQuality}});const _=p(LocalParticipant$1);a.LocalParticipant=_.default;const E=d(Participant$1);a.Participant=E.default,Object.defineProperty(a,"ConnectionQuality",{enumerable:!0,get:function(){return E.ConnectionQuality}});const I=p(RemoteParticipant$1);a.RemoteParticipant=I.default;const N=d(Room);a.Room=N.default,Object.defineProperty(a,"RoomState",{enumerable:!0,get:function(){return N.RoomState}});const w=p(LocalAudioTrack$1);a.LocalAudioTrack=w.default;const C=p(LocalTrack$1);a.LocalTrack=C.default;const D=p(LocalTrackPublication$1);a.LocalTrackPublication=D.default;const V=p(LocalVideoTrack$1);a.LocalVideoTrack=V.default;const J=p(RemoteAudioTrack$1);a.RemoteAudioTrack=J.default;const W=p(RemoteTrack$1);a.RemoteTrack=W.default;const g=p(RemoteTrackPublication$1);a.RemoteTrackPublication=g.default;const O=p(RemoteVideoTrack$1);a.RemoteVideoTrack=O.default;const $=TrackPublication;Object.defineProperty(a,"TrackPublication",{enumerable:!0,get:function(){return $.TrackPublication}}),l(connect,a),l(options,a),l(errors,a),l(events$1,a),l(create$2,a),l(options$1,a),l(Track,a),l(types$1,a),l(version,a)}(dist);var SpecialEvent=(a=>(a.Chat="Chat",a))(SpecialEvent||{});const decoder$1=new TextDecoder,encoder$1=new TextEncoder;class RoomsManager{constructor(){Me(this,"rooms");this.rooms=new Map,this.addRoom=this.addRoom.bind(this),this.ensureRoom=this.ensureRoom.bind(this),this.removeRoom=this.removeRoom.bind(this)}addRoom(s,u,d){const l=new RoomContext(s,u,d,this);return this.rooms.set(u,l),l}ensureRoom(s,u,d){return this.rooms.get(u)?(this.rooms.get(u).token=d,this.rooms.get(u)):this.addRoom(s,u,d)}async removeRoom(s){const u=this.rooms.get(s);if(!dist.Room)throw new Error("room not found!");if(u.isConnecting)throw new Error("Cannot remove room: Room is in connecting state");u.livekitRoom&&await u.livekitRoom.disconnect(!0),this.rooms.delete(s)}}class RoomContext{constructor(s,u,d,l){Me(this,"_baseUrl");Me(this,"_chatHistory");Me(this,"_connectListeners");Me(this,"_roomEventListenerRegistry");Me(this,"_localParticipantEventListenerRegistry");Me(this,"_specialEventListenerRegistry");Me(this,"_jwt");Me(this,"_manager");Me(this,"_apiClient");Me(this,"audioTracks");Me(this,"isConnecting");Me(this,"livekitRoom");Me(this,"participants");Me(this,"roomName");Me(this,"_admin");this._baseUrl=s,this._connectListeners=[],this._roomEventListenerRegistry={},this._jwt=d,Object.values(dist.RoomEvent).forEach(p=>{this._roomEventListenerRegistry[p]=new Set}),this._localParticipantEventListenerRegistry={},Object.values(dist.ParticipantEvent).forEach(p=>{this._localParticipantEventListenerRegistry[p]=new Set}),this._specialEventListenerRegistry={},this._manager=l,this._chatHistory=[],this.roomName=u,this.audioTracks=[],this.participants=[],this.isConnecting=!1,this.subscribeToRoomEvent(dist.RoomEvent.DataReceived,(p,h,y)=>{const _=decoder$1.decode(p);switch(JSON.parse(_).type){case"ChatMessage":return this._appendChat(p,h,y);default:return}}),this.connect=this.connect.bind(this),this.subscribeToRoomEvent=this.subscribeToRoomEvent.bind(this),this.subscribeToConnect=this.subscribeToConnect.bind(this),this.subscribeToLocalParticipantEvent=this.subscribeToLocalParticipantEvent.bind(this),this.subscribeToSpecialEvent=this.subscribeToSpecialEvent.bind(this),this.unsubscribeFromRoomEvent=this.unsubscribeFromRoomEvent.bind(this),this.unsubscribeFromSpecialEvent=this.unsubscribeFromSpecialEvent.bind(this),this.unsubscribeFromConnect=this.unsubscribeFromConnect.bind(this),this.unsubscribeFromLocalParticipantEvent=this.unsubscribeFromLocalParticipantEvent.bind(this),this.sendChatMessage=this.sendChatMessage.bind(this),this.kickParticipant=this.kickParticipant.bind(this),this.muteTrackAsAdmin=this.muteTrackAsAdmin.bind(this),this._updateParticipants=this._updateParticipants.bind(this),this.subscribeToRoomEvent(dist.RoomEvent.ParticipantConnected,this._updateParticipants),this.subscribeToRoomEvent(dist.RoomEvent.ParticipantDisconnected,this._updateParticipants),this.subscribeToRoomEvent(dist.RoomEvent.TrackSubscribed,this._updateParticipants),this.subscribeToRoomEvent(dist.RoomEvent.TrackUnsubscribed,this._updateParticipants),this.subscribeToRoomEvent(dist.RoomEvent.LocalTrackPublished,this._updateParticipants),this.subscribeToRoomEvent(dist.RoomEvent.LocalTrackUnpublished,this._updateParticipants),this.subscribeToRoomEvent(dist.RoomEvent.Disconnected,()=>{this.livekitRoom.removeAllListeners(),this.livekitRoom=null,this._updateParticipants()})}bindApiClient(s){this._apiClient=s}get isAdmin(){return o(this._jwt).video.roomAdmin}set isAdmin(s){log$1.warn("isAdmin cannot be set")}get token(){return this._jwt}set token(s){this._jwt=s}get url(){return this._baseUrl}set url(s){}get chatHistory(){return this._chatHistory}set chatHistory(s){this._chatHistory=s}_updateParticipants(){if(!this.livekitRoom||this.livekitRoom.state===dist.RoomState.Disconnected){this.participants=[];return}else{const s=Array.from(this.livekitRoom.participants.values()),u=[this.livekitRoom.localParticipant];u.push(...s),this.participants=u}}async kickParticipant(s){if(this._admin)this._admin.removeParticipant(this.roomName,s);else throw new Error("no admin permissions")}muteTrackAsAdmin(s){if(this._admin){const u=this.participants.find(d=>Array.from(d.audioTracks.values()).find(l=>l.trackSid===s));this._admin.mutePublishedTrack(this.roomName,u==null?void 0:u.identity,s,!0)}else throw new Error("no admin permissions")}_appendChat(s,u,d){const l=decoder$1.decode(s),p=JSON.parse(l),h=u.identity,y=u.name,_=we(pe({},p),{displayName:y,sender:h});this.chatHistory=[...this.chatHistory,_],this._triggerSpecialEvents("Chat",_)}subscribeToConnect(s){return this._connectListeners.push(s),()=>this.unsubscribeFromConnect(s)}unsubscribeFromConnect(s){this._connectListeners=this._connectListeners.filter(u=>u!==s)}subscribeToSpecialEvent(s,u){return this._specialEventListenerRegistry[s]||(this._specialEventListenerRegistry[s]=new Set),this._specialEventListenerRegistry[s].add(u),()=>{this.unsubscribeFromSpecialEvent(s,u)}}unsubscribeFromSpecialEvent(s,u){this._specialEventListenerRegistry[s]||(this._specialEventListenerRegistry[s]=new Set),this._specialEventListenerRegistry[s].delete(u)}_triggerSpecialEvents(s,...u){this._specialEventListenerRegistry[s]||(this._specialEventListenerRegistry[s]=new Set),this._specialEventListenerRegistry[s].forEach(d=>{d(...u)})}async connect(s){var u,d;try{if(this.livekitRoom&&this.livekitRoom.state==="connected")return this.livekitRoom;if(this.isConnecting)return null;this.isConnecting=!0;const l=await dist.connect(`wss://${this._baseUrl}`,this._jwt,s);return this.livekitRoom=l,this.isConnecting=!1,Object.values(dist.RoomEvent).forEach(p=>{this.livekitRoom.on(p,(...h)=>{this._roomEventListenerRegistry[p].forEach(y=>{y(...h)})})}),Object.values(dist.ParticipantEvent).forEach(p=>{this.livekitRoom.localParticipant.on(p,(...h)=>{this._localParticipantEventListenerRegistry[p].forEach(y=>{y(...h)})})}),this._updateParticipants(),this._connectListeners.forEach(p=>p(this.livekitRoom)),lib$2.LiveKitUtils.isRoomAdmin(this._jwt)?(log$1.info("Room: Granting admin permissions"),log$1.debug("Livekit server: ",(u=this._apiClient)==null?void 0:u.getLiveKitServer()),this._admin=new lib$2.LiveKitServer.RoomServiceClient((d=this._apiClient)==null?void 0:d.getLiveKitServer(),void 0,void 0,this._jwt)):log$1.debug("Room: Not an admin"),l}catch(l){this.isConnecting=!1,log$1.error(l)}}subscribeToLocalParticipantEvent(s,u){return this._localParticipantEventListenerRegistry[s]||(this._localParticipantEventListenerRegistry[s]=new Set),this._localParticipantEventListenerRegistry[s].add(u),()=>{this.unsubscribeFromLocalParticipantEvent(s,u)}}unsubscribeFromLocalParticipantEvent(s,u){this._localParticipantEventListenerRegistry[s]||(this._localParticipantEventListenerRegistry[s]=new Set),this._localParticipantEventListenerRegistry[s].delete(u)}subscribeToRoomEvent(s,u){return this._roomEventListenerRegistry[s]||(this._roomEventListenerRegistry[s]=new Set),this._roomEventListenerRegistry[s].add(u),()=>{this.unsubscribeFromRoomEvent(s,u)}}unsubscribeFromRoomEvent(s,u){this._roomEventListenerRegistry[s]||(this._roomEventListenerRegistry[s]=new Set),this._roomEventListenerRegistry[s].delete(u)}sendChatMessage(s){const{message:u,recipients:d,metadata:l}=s;if(!this.livekitRoom||this.livekitRoom.state!=="connected")return;const p={type:"ChatMessage",recipients:d,metadata:l,content:u,timestamp:Date.now()},h=JSON.stringify(p),y=encoder$1.encode(h);if(we(pe({},p),{sender:this.livekitRoom.localParticipant.identity,displayName:this.livekitRoom.localParticipant.identity}),Boolean(d)){const _=d.map(this.livekitRoom.getParticipantByIdentity);this.livekitRoom.localParticipant.publishData(y,dist.DataPacket_Kind.RELIABLE,_).then(()=>{this._appendChat(y,this.livekitRoom.localParticipant,dist.DataPacket_Kind.RELIABLE)})}else this.livekitRoom.localParticipant.publishData(y,dist.DataPacket_Kind.RELIABLE).then(()=>{this._appendChat(y,this.livekitRoom.localParticipant,dist.DataPacket_Kind.RELIABLE)})}}const webrtcManager=new RoomsManager;var index$1=Object.freeze(Object.defineProperty({__proto__:null,webrtcManager},Symbol.toStringTag,{value:"Module"}));const encoder=new TextEncoder,decoder=new TextDecoder,simpleRooms=new Map,getRoom=a=>{if(!a)return null;if(simpleRooms.get(a))return simpleRooms.get(a);const s=webrtcManager.rooms.get(a);if(!s)return null;const d=s.livekitRoom.localParticipant;d||log$1.warn("No local participant!");const l={useTracks:new Set,useTrack:new Map,useParticipants:new Set,useParticipant:new Map,useChatHistory:new Set};let p={tracks:[],participants:[],result:{participants:[],tracks:[]},chat:s.chatHistory};const h=()=>{const C=s.participants,D=C.flatMap(J=>J.getTracks().map(W=>we(pe({},W),{participant:J}))),V={participants:C.map(J=>({id:J.identity,isSelf:J===d,connectionQuality:J.connectionQuality,isSpeaking:J.isSpeaking,displayName:J.name,trackIds:D.filter(W=>W.participant.sid===J.sid).map(W=>W.trackSid)})),tracks:D.map(J=>{var W,g,O;return{mediaStreamTrack:(W=J.track)==null?void 0:W.mediaStreamTrack,id:J.trackSid,participantId:(g=J.participant)==null?void 0:g.identity,isMuted:(O=J.track)==null?void 0:O.isMuted,type:J.source}})};p={tracks:D,participants:C,result:V,chat:s.chatHistory},l.useTracks.forEach(J=>J(V.tracks)),l.useTrack.forEach((J,W)=>{W(E(J))}),l.useParticipants.forEach(J=>J(V.participants)),l.useParticipant.forEach((J,W)=>{W(I(J))}),l.useChatHistory.forEach(J=>{J(p.chat)})};[dist.RoomEvent.ParticipantConnected,dist.RoomEvent.ParticipantDisconnected,dist.RoomEvent.ActiveSpeakersChanged,dist.RoomEvent.AudioPlaybackStatusChanged,dist.RoomEvent.Disconnected,dist.RoomEvent.TrackSubscribed,dist.RoomEvent.TrackUnsubscribed,dist.RoomEvent.LocalTrackPublished,dist.RoomEvent.LocalTrackUnpublished,dist.RoomEvent.ConnectionQualityChanged,dist.RoomEvent.TrackMuted,dist.RoomEvent.TrackUnmuted,dist.RoomEvent.TrackStreamStateChanged].map(C=>s.subscribeToRoomEvent(C,h)).push(s.subscribeToSpecialEvent(SpecialEvent.Chat,h));const E=C=>p.result.tracks.find(D=>D.id===C),I=C=>p.result.participants.find(D=>D.id===C),N=(C,D)=>{const V=d.getTracks().find(J=>J.trackSid===C);V&&(D?V.mute():V.unmute())},w={id:s.roomName,participantId:d.identity,setTrackEnabled:N,setCameraEnabled:(C=!0)=>{d.setCameraEnabled(C)},setMicrophoneEnabled:(C=!0)=>{d.setMicrophoneEnabled(C)},setCamera:async(C={})=>{var W;const D=d.getTracks().find(g=>g.source===dist.Track.Source.Camera),V=await d.createTracks({video:{deviceId:C.deviceId,resolution:C.resolution||{width:1280,height:720,frameRate:30,aspectRatio:16/9}}});D!=null&&D.isMuted&&V.forEach(g=>{g.mute()});const J=await Promise.all(V.map(g=>d.publishTrack(g)));return D&&d.unpublishTrack(D.track),E((W=J[0])==null?void 0:W.trackSid)},setMicrophone:async C=>{var W;const D=d.getTracks().find(g=>g.source===dist.Track.Source.Microphone),V=await d.createTracks({audio:C||!0});D!=null&&D.isMuted&&V.forEach(g=>{g.mute()});const J=await Promise.all(V.map(g=>d.publishTrack(g)));return D&&d.unpublishTrack(D.track),E((W=J[0])==null?void 0:W.trackSid)},addCamera:async(C={})=>{var J;const D=await d.createTracks({video:{deviceId:C.deviceId,resolution:C.resolution||{width:1280,height:720,frameRate:30,aspectRatio:1.7777777777777777}}}),V=await Promise.all(D.map(W=>d.publishTrack(W)));return E((J=V[0])==null?void 0:J.trackSid)},addScreen:async(C={audio:!1})=>{const D=await d.createScreenTracks(C),V=await Promise.all(D.map(g=>d.publishTrack(g))),J=V.find(g=>g.kind==="video"),W=V.find(g=>g.kind==="audio");return{screen:E(J==null?void 0:J.trackSid),audio:E(W==null?void 0:W.trackSid)}},removeTrack:async C=>{const D=p.tracks.find(V=>V.trackSid===C);d.unpublishTrack(D.track)},kickParticipant:s.kickParticipant,muteTrackAsAdmin:s.muteTrackAsAdmin,sendChatMessage:s.sendChatMessage,getTracks:()=>p.result.tracks,useTracks:C=>(l.useTracks.add(C),C(p.result.tracks),()=>{l.useTracks.delete(C)}),getTrack:E,useTrack:(C,D)=>(l.useTrack.set(D,C),D(E(C)),()=>{l.useTrack.delete(D)}),getParticipant:I,getParticipants:()=>p.result.participants,useParticipants:C=>(l.useParticipants.add(C),C(p.result.participants),()=>{l.useTracks.delete(C)}),useParticipant:(C,D)=>(l.useParticipant.set(D,C),D(I(C)),()=>{l.useTrack.delete(D)}),useChatHistory:C=>(l.useChatHistory.add(C),C(p.chat),()=>{l.useChatHistory.delete(C)}),sendData:(C,D)=>{const V=encoder.encode(JSON.stringify(C)),J=D==null?void 0:D.map(W=>s.livekitRoom.getParticipantByIdentity(W).sid);return d.publishData(V,dist.DataPacket_Kind.RELIABLE,J)},onData:C=>{const D=(V,J)=>{const W=JSON.parse(decoder.decode(V));C(W,J==null?void 0:J.identity)};return s.livekitRoom.on(dist.RoomEvent.DataReceived,D),()=>{s.livekitRoom.off(dist.RoomEvent.DataReceived,D)}}};return h(),simpleRooms.set(a,w),w},{state:state$1}=CoreContext,getAccessTokenData=()=>{var a;return(a=CoreContext.clients.accessTokenClaims)==null?void 0:a.user},toBaseProject=a=>{const{compositor:s,videoApi:u,props:d}=a,{destinations:l,encoding:p,rendering:h,sources:y}=u.project,_={get:s.get,getRoot:s.getRoot,getParent:s.getParent};return Object.defineProperty(_,"nodes",{get(){return s.nodes.filter(E=>!E._deleted)}}),{scene:_,joinRoom:async(E={})=>CoreContext.Command.joinRoom(pe({projectId:a.id},E)),subscribe:E=>CoreContext.subscribe((I,N)=>{N.projectId&&(N==null?void 0:N.projectId)===a.id&&E(I,N)}),destinations:l.map(toBaseDestination),sources:y.map(toBaseSource),encoding:p,rendering:h,id:a.id,hostDisplayName:a.props.hostDisplayName,props:d}},toBaseDestination=a=>({id:a.destinationId,enabled:a.enabled,address:a.address,props:a.metadata||{}}),toBaseSource=a=>({id:a.sourceId,address:a.address,props:a.metadata}),hydrateProject=async a=>{const s=a.metadata||{},u=await layoutToProject(s.layoutId);return{id:a.projectId,compositor:u,videoApi:{project:pe({},a)},layoutApi:{layoutId:s.layoutId},props:s}},sceneNodeToLayer=a=>{const{id:s,props:u={},children:d=[]}=a;return we(pe({},s?{id:s}:{}),{type:u.type,data:pe({},u),children:d.map(l=>l.id)})},nodeToLayer=a=>({id:a.id,type:a.props.type,data:pe({},a.props),children:a.childIds.map(s=>s)}),layerToNode=a=>({id:String(a.id),props:pe({type:a.type},a.data),childIds:a.children.map(s=>String(s))}),layoutToProject=async a=>{const{layers:s}=await CoreContext.clients.LayoutApi().layer.listLayers({layoutId:a}),u=s.map(layerToNode),d=u.reduce((p,h)=>p?p.props.isRoot?p:h.props.isRoot||!u.some(y=>y.childIds.includes(h.id))?h:p:h,null),l=d?toSceneTree(u,d.id):null;return CoreContext.compositor.loadProject(l,a)},getProjectByLayoutId=a=>state$1.projects.find(s=>s.compositor.id===a),getProject=a=>state$1.projects.find(s=>s.id===a),getProjectRoom=a=>{var s;return getRoom((s=getProject(a))==null?void 0:s.roomId)},{connectionId}=CoreContext,request=(a,s)=>{const u=s.map(d=>{const[l,p]=d;return{[l]:p}});return CoreContext.clients.LayoutApi().layer.batch({layoutId:a,layers:u,requestMetadata:{connectionId,layoutId:a}})},compositorAdapter=(a,s)=>({async insert(u={},d,l){const p=nodeToLayer({id:null,props:u,childIds:[]});d?p.type="child":p.type="root";const h=await CoreContext.clients.LayoutApi().layer.createLayer({layoutId:a,layer:we(pe({},p),{requestMetadata:{connectionId,layoutId:a}})});if(h.code)throw new Error(h.message);const y=await s.get(d);if(d&&!y)throw Error("Parent not found with ID");if(y){const _=nodeToLayer(y),E=insertAt$1(l,h.id,_.children),I={layoutId:a,layerId:_.id,layer:{children:E,requestMetadata:{connectionId,layoutId:a}}};await CoreContext.clients.LayoutApi().layer.updateLayer(I)}return String(h.id)},async update(u,d={}){const l=s.get(u),p=nodeToLayer(we(pe({},l),{props:pe(pe({},l.props),d)})),h={layoutId:a,layerId:p.id,layer:we(pe({},p),{requestMetadata:{connectionId,layoutId:a}})};await CoreContext.clients.LayoutApi().layer.updateLayer(h)},async remove(u){const d=await s.getParent(u);if(d){const l=nodeToLayer(d),p=l.children.filter(y=>y!==u),h={layoutId:a,layerId:l.id,layer:{children:p,requestMetadata:{connectionId,layoutId:a}}};await CoreContext.clients.LayoutApi().layer.updateLayer(h)}await CoreContext.clients.LayoutApi().layer.deleteLayer({layoutId:a,layerId:u,payload:{requestMetadata:{connectionId,layoutId:a}}})},async reorder(u,d){const l=s.get(u),p=nodeToLayer(we(pe({},l),{childIds:d}));await CoreContext.clients.LayoutApi().layer.updateLayer({layoutId:a,layerId:p.id,layer:{children:p.children,requestMetadata:{connectionId,layoutId:a}}})},async move(u,d,l){const p=s.get(u),h=s.get(s.getParent(u).id),y=nodeToLayer(we(pe({},h),{childIds:pull$2(h.childIds,p.id)})),_=s.get(d),E=nodeToLayer(we(pe({},_),{childIds:insertAt$1(l,p.id,_.childIds)}));await Promise.all([CoreContext.clients.LayoutApi().layer.updateLayer({layoutId:a,layerId:y.id,layer:{children:y.children,requestMetadata:{connectionId,layoutId:a}}}),CoreContext.clients.LayoutApi().layer.updateLayer({layoutId:a,layerId:E.id,layer:{children:E.children,requestMetadata:{connectionId,layoutId:a}}})])},async batch(u){const d=u.map(([p,h])=>[p,sceneNodeToLayer(h)]),l=await request(a,d);return log$1.debug("Batch response",l),l}}),cloudHostname={dev:"cloud.stream.horse",stage:"cloud.stream.horse",prod:"cloud.golightstream.com"};var config=a=>({defaults:{previewTokenDuration:1e3*60*60,guestTokenDuration:1e3*60*60*12,transforms:{RoomParticipant:"LS-Room-Participant",Image:"LS-Image",Text:"LS-Text"}},compositorUrl:`https://${cloudHostname[a]}/studiosdk/v2/renderer/latest/compositor/`});const Participant=({props:a,source:s})=>{const{volume:u=1}=a,d=React.useRef(),l=getRoom(CoreContext.state.activeProjectId),h=(s==null?void 0:s.id)===l.participantId||a.isMuted;return React.useEffect(()=>{!d.current||(d.current.play().catch(y=>{document.addEventListener("click",()=>{var _;return(_=d.current)==null?void 0:_.play()},{once:!0})}),(s==null?void 0:s.value)&&(s==null?void 0:s.value)!==d.current.srcObject?d.current.srcObject=s.value:s!=null&&s.value||(d.current.srcObject=null))},[d.current,s==null?void 0:s.value]),React.useEffect(()=>{!d.current||(d.current.volume=u)},[d.current,u]),React__default.default.createElement("div",{style:{position:"relative",display:"flex",height:"100%",width:"100%"}},React__default.default.createElement("div",{style:{background:"#222",position:"absolute",height:"100%",width:"100%",fontSize:"43px",color:"rgba(255,255,255,0.6)",display:"flex",alignItems:"center",justifyContent:"center",opacity:s!=null&&s.props.videoEnabled?"0":"1"}},React__default.default.createElement("div",{style:{borderRadius:"50%",background:"#555",width:"70px",height:"70px",textTransform:"uppercase",display:"flex",alignItems:"center",justifyContent:"center",lineHeight:"1em"}},(s==null?void 0:s.props.displayName.slice(0,1))||"")),React__default.default.createElement("video",{ref:d,autoPlay:!0,muted:h,disablePictureInPicture:!0,playsInline:!0,style:{left:"50%",top:"50%",position:"relative",transform:"translate3d(-50%, -50%, 0)",height:"100%",opacity:s!=null&&s.props.videoEnabled?"1":"0",objectFit:(s==null?void 0:s.props.type)==="screen"?"contain":"cover",background:"rgba(0,0,0,0.6)"}}),(s==null?void 0:s.props.displayName)&&React__default.default.createElement("div",{style:{position:"absolute",bottom:0,left:0,height:30,background:"linear-gradient(90deg, rgba(0,0,0,0.5) 30px, rgba(77,75,78,0) 120px)",borderLeft:"5px solid #26ad80",padding:"0 0 0 10px",color:"rgba(255,255,255,0.9)",fontWeight:"bold",lineHeight:"30px",width:"100%"}},s.props.displayName))},RoomParticipant$1={name:"LS-Room-Participant",sourceType:"RoomParticipant",props:{isMuted:{type:Boolean,required:!1,default:!1},volume:{type:Number,required:!1,default:1}},useSource(a,s){return a.find(u=>isMatch(u.props,s.sourceProps))},create(){const a=document.createElement("div");Object.assign(a.style,{position:"relative"});let s,u;const d=()=>ReactDOM__default.default.render(React__default.default.createElement(Participant,{source:s,props:u}),a);return{root:a,onNewSource(l,p){s=l,d()},onUpdate(l){u=l,d()}}}},Image={name:"LS-Image",props:{src:{},fit:{}},create(){const a=document.createElement("img");return{root:a,onUpdate({src:s,fit:u}){a.setAttribute("src",s),Object.assign(a.style,{width:"100%",height:"100%",objectFit:u})}}}},Square={name:"LS-Square",props:{color:{default:"green"}},create(){const a=document.createElement("div");return{root:a,onUpdate({color:s}){Object.assign(a.style,{width:"100%",height:"100%",background:s||"red"})}}}},Overlay={name:"LS-Overlay",props:{url:{}},create(){const a=document.createElement("iframe");return{root:a,onUpdate({url:s}){a.setAttribute("src",s),Object.assign(a.style,{width:"100%",height:"100%"})}}}},Element={name:"Element",sourceType:"Element",create({tagName:a="div"}){const s=document.createElement(a);return{root:s,onUpdate({attributes:u={},fields:d={}}){Object.keys(u).forEach(l=>{s.setAttribute(l,u[l])}),Object.keys(d).forEach(l=>{Object.assign(s[l],d[l])})}}}};var Transforms=Object.freeze(Object.defineProperty({__proto__:null,RoomParticipant:RoomParticipant$1,Image,Square,Overlay,Element},Symbol.toStringTag,{value:"Module"}));/*! (c) Andrea Giammarchi - ISC */var self$1={};try{self$1.WeakMap=WeakMap}catch(a){self$1.WeakMap=function(s,u){var d=u.defineProperty,l=u.hasOwnProperty,p=h.prototype;return p.delete=function(_){return this.has(_)&&delete _[this._]},p.get=function(_){return this.has(_)?_[this._]:void 0},p.has=function(_){return l.call(_,this._)},p.set=function(_,E){return d(_,this._,{configurable:!0,value:E}),this},h;function h(_){d(this,"_",{value:"_@ungap/weakmap"+s++}),_&&_.forEach(y,this)}function y(_){this.set(_[0],_[1])}}(Math.random(),Object)}var WeakMap$1=self$1.WeakMap;/*! (c) Andrea Giammarchi - ISC */var UID="-"+Math.random().toFixed(6)+"%",UID_IE=!1;try{(function(a,s,u){return s in a&&(a.innerHTML="<p "+u+'="'+UID+'"></p>',a[s].childNodes[0].getAttribute(u)==UID)})(document.createElement("template"),"content","tabindex")||(UID="_dt: "+UID.slice(1,-1)+";",UID_IE=!0)}catch(a){}var UIDC="<!--"+UID+"-->",COMMENT_NODE=8,ELEMENT_NODE$1=1,TEXT_NODE=3,SHOULD_USE_TEXT_CONTENT=/^(?:plaintext|script|style|textarea|title|xmp)$/i,VOID_ELEMENTS=/^(?:area|base|br|col|embed|hr|img|input|keygen|link|menuitem|meta|param|source|track|wbr)$/i;/*! (c) Andrea Giammarchi - ISC */function domsanitizer(a){return a.join(UIDC).replace(selfClosing,fullClosing).replace(attrSeeker,attrReplacer)}var spaces=" \\f\\n\\r\\t",almostEverything="[^"+spaces+`\\/>"'=]+`,attrName="["+spaces+"]+"+almostEverything,tagName="<([A-Za-z]+[A-Za-z0-9:._-]*)((?:",attrPartials=`(?:\\s*=\\s*(?:'[^']*?'|"[^"]*?"|<[^>]*?>|`+almostEverything.replace("\\/","")+"))?)",attrSeeker=new RegExp(tagName+attrName+attrPartials+"+)(["+spaces+"]*/?>)","g"),selfClosing=new RegExp(tagName+attrName+attrPartials+"*)(["+spaces+"]*/>)","g"),findAttributes=new RegExp("("+attrName+`\\s*=\\s*)(['"]?)`+UIDC+"\\2","gi");function attrReplacer(a,s,u,d){return"<"+s+u.replace(findAttributes,replaceAttributes)+d}function replaceAttributes(a,s,u){return s+(u||'"')+UID+(u||'"')}function fullClosing(a,s,u){return VOID_ELEMENTS.test(s)?a:"<"+s+u+"></"+s+">"}const{isArray}=Array,{indexOf,slice}=[];var umap=a=>({get:s=>a.get(s),set:(s,u)=>(a.set(s,u),u)});const ELEMENT_NODE=1,nodeType=111,remove=({firstChild:a,lastChild:s})=>{const u=document.createRange();return u.setStartAfter(a),u.setEndAfter(s),u.deleteContents(),a},diffable=(a,s)=>a.nodeType===nodeType?1/s<0?s?remove(a):a.lastChild:s?a.valueOf():a.firstChild:a,persistent=a=>{const{childNodes:s}=a,{length:u}=s;if(u<2)return u?s[0]:a;const d=slice.call(s,0),l=d[0],p=d[u-1];return{ELEMENT_NODE,nodeType,firstChild:l,lastChild:p,valueOf(){if(s.length!==u){let h=0;for(;h<u;)a.appendChild(d[h++])}return a}}};/*! (c) Andrea Giammarchi - ISC */var createContent=function(a){var s="fragment",u="template",d="content"in h(u),l=d?function(_){var E=h(u);return E.innerHTML=_,E.content}:function(_){var E=h(s),I=h(u),N=null;if(/^[^\S]*?<(col(?:group)?|t(?:head|body|foot|r|d|h))/i.test(_)){var w=RegExp.$1;I.innerHTML="<table>"+_+"</table>",N=I.querySelectorAll(w)}else I.innerHTML=_,N=I.childNodes;return p(E,N),E};return function(E,I){return(I==="svg"?y:l)(E)};function p(_,E){for(var I=E.length;I--;)_.appendChild(E[0])}function h(_){return _===s?a.createDocumentFragment():a.createElementNS("http://www.w3.org/1999/xhtml",_)}function y(_){var E=h(s),I=h("div");return I.innerHTML='<svg xmlns="http://www.w3.org/2000/svg">'+_+"</svg>",p(E,I.firstChild.childNodes),E}}(document),udomdiff=(a,s,u,d,l)=>{const p=u.length;let h=s.length,y=p,_=0,E=0,I=null;for(;_<h||E<y;)if(h===_){const N=y<p?E?d(u[E-1],-0).nextSibling:d(u[y-E],0):l;for(;E<y;)a.insertBefore(d(u[E++],1),N)}else if(y===E)for(;_<h;)(!I||!I.has(s[_]))&&a.removeChild(d(s[_],-1)),_++;else if(s[_]===u[E])_++,E++;else if(s[h-1]===u[y-1])h--,y--;else if(s[_]===u[y-1]&&u[E]===s[h-1]){const N=d(s[--h],-1).nextSibling;a.insertBefore(d(u[E++],1),d(s[_++],-1).nextSibling),a.insertBefore(d(u[--y],1),N),s[h]=u[y]}else{if(!I){I=new Map;let N=E;for(;N<y;)I.set(u[N],N++)}if(I.has(s[_])){const N=I.get(s[_]);if(E<N&&N<y){let w=_,C=1;for(;++w<h&&w<y&&I.get(s[w])===N+C;)C++;if(C>N-E){const D=d(s[_],0);for(;E<N;)a.insertBefore(d(u[E++],1),D)}else a.replaceChild(d(u[E++],1),d(s[_++],-1))}else _++}else a.removeChild(d(s[_++],-1))}return u};/*! (c) Andrea Giammarchi - ISC */var importNode=function(a,s,u,d,l){var p=l in a,h=a.createDocumentFragment();h[s](a[d]("g")),h[s](a[d](""));var y=p?a[l](h,!0):h[u](!0);return y.childNodes.length<2?function _(E,I){for(var N=E[u](),w=E.childNodes||[],C=w.length,D=0;I&&D<C;D++)N[s](_(w[D],I));return N}:p?a[l]:function(_,E){return _[u](!!E)}}(document,"appendChild","cloneNode","createTextNode","importNode"),trim="".trim||function(){return String(this).replace(/^\s+|\s+/g,"")},normalizeAttributes=UID_IE?function(a,s){var u=s.join(" ");return s.slice.call(a,0).sort(function(d,l){return u.indexOf(d.name)<=u.indexOf(l.name)?-1:1})}:function(a,s){return s.slice.call(a,0)};function find(a,s){for(var u=s.length,d=0;d<u;)a=a.childNodes[s[d++]];return a}function parse(a,s,u,d){for(var l=a.childNodes,p=l.length,h=0;h<p;){var y=l[h];switch(y.nodeType){case ELEMENT_NODE$1:var _=d.concat(h);parseAttributes(y,s,u,_),parse(y,s,u,_);break;case COMMENT_NODE:var E=y.textContent;if(E===UID)u.shift(),s.push(SHOULD_USE_TEXT_CONTENT.test(a.nodeName)?Text(a,d):Any(y,d.concat(h)));else switch(E.slice(0,2)){case"/*":if(E.slice(-2)!=="*/")break;case"\u{1F47B}":a.removeChild(y),h--,p--}break;case TEXT_NODE:SHOULD_USE_TEXT_CONTENT.test(a.nodeName)&&trim.call(y.textContent)===UIDC&&(u.shift(),s.push(Text(a,d)));break}h++}}function parseAttributes(a,s,u,d){for(var l=a.attributes,p=[],h=[],y=normalizeAttributes(l,u),_=y.length,E=0;E<_;){var I=y[E++],N=I.value===UID,w;if(N||1<(w=I.value.split(UIDC)).length){var C=I.name;if(p.indexOf(C)<0){p.push(C);var D=u.shift().replace(N?/^(?:|[\S\s]*?\s)(\S+?)\s*=\s*('|")?$/:new RegExp("^(?:|[\\S\\s]*?\\s)("+C+`)\\s*=\\s*('|")[\\S\\s]*`,"i"),"$1"),V=l[D]||l[D.toLowerCase()];if(N)s.push(Attr(V,d,D,null));else{for(var J=w.length-2;J--;)u.shift();s.push(Attr(V,d,D,w))}}h.push(I)}}_=h.length,E=0;for(var W=0<_&&UID_IE&&!("ownerSVGElement"in a);E<_;){var g=h[E++];W&&(g.value=""),a.removeAttribute(g.name)}var O=a.nodeName;if(/^script$/i.test(O)){var $=document.createElement(O);for(_=l.length,E=0;E<_;)$.setAttributeNode(l[E++].cloneNode(!0));$.textContent=a.textContent,a.parentNode.replaceChild($,a)}}function Any(a,s){return{type:"any",node:a,path:s}}function Attr(a,s,u,d){return{type:"attr",node:a,path:s,name:u,sparse:d}}function Text(a,s){return{type:"text",node:a,path:s}}var parsed=umap(new WeakMap$1);function createInfo(a,s){var u=(a.convert||domsanitizer)(s),d=a.transform;d&&(u=d(u));var l=createContent(u,a.type);cleanContent(l);var p=[];return parse(l,p,s.slice(0),[]),{content:l,updates:function(h){for(var y=[],_=p.length,E=0,I=0;E<_;){var N=p[E++],w=find(h,N.path);switch(N.type){case"any":y.push({fn:a.any(w,[]),sparse:!1});break;case"attr":var C=N.sparse,D=a.attribute(w,N.name,N.node);C===null?y.push({fn:D,sparse:!1}):(I+=C.length-2,y.push({fn:D,sparse:!0,values:C}));break;case"text":y.push({fn:a.text(w),sparse:!1}),w.textContent="";break}}return _+=I,function(){var V=arguments.length;if(_!==V-1)throw new Error(V-1+" values instead of "+_+`
`+s.join("${value}"));for(var J=1,W=1;J<V;){var g=y[J-W];if(g.sparse){var O=g.values,$=O[0],x=1,Y=O.length;for(W+=Y-2;x<Y;)$+=arguments[J++]+O[x++];g.fn($)}else g.fn(arguments[J++])}return h}}}}function createDetails(a,s){var u=parsed.get(s)||parsed.set(s,createInfo(a,s));return u.updates(importNode.call(document,u.content,!0))}var empty=[];function domtagger(a){var s=empty,u=cleanContent;return function(d){return s!==d&&(u=createDetails(a,s=d)),u.apply(null,arguments)}}function cleanContent(a){for(var s=a.childNodes,u=s.length;u--;){var d=s[u];d.nodeType!==1&&trim.call(d.textContent).length===0&&a.removeChild(d)}}/*! (c) Andrea Giammarchi - ISC */var hyperStyle=function(){var a=/acit|ex(?:s|g|n|p|$)|rph|ows|mnc|ntw|ine[ch]|zoo|^ord/i,s=/([^A-Z])([A-Z]+)/g;return function(y,_){return"ownerSVGElement"in y?d(y,_):p(y.style,!1)};function u(h,y,_){return y+"-"+_.toLowerCase()}function d(h,y){var _;return y?_=y.cloneNode(!0):(h.setAttribute("style","--hyper:style;"),_=h.getAttributeNode("style")),_.value="",h.setAttributeNode(_),p(_,!0)}function l(h){var y,_=[];for(y in h)_.push(y.replace(s,u),":",h[y],";");return _.join("")}function p(h,y){var _,E;return function(I){var N,w,C,D;switch(typeof I){case"object":if(I){if(_==="object"){if(!y&&E!==I)for(w in E)w in I||(h[w]="")}else y?h.value="":h.cssText="";N=y?{}:h;for(w in I)D=I[w],C=typeof D=="number"&&!a.test(w)?D+"px":D,!y&&/^--/.test(w)?N.setProperty(w,C):N[w]=C;_="object",y?h.value=l(E=N):E=I;break}default:E!=I&&(_="string",E=I,y?h.value=I||"":h.cssText=I||"");break}}}}();const aria=a=>s=>{for(const u in s){const d=u==="role"?u:`aria-${u}`,l=s[u];l==null?a.removeAttribute(d):a.setAttribute(d,l)}},attribute=(a,s)=>{let u,d=!0;const l=document.createAttributeNS(null,s);return p=>{u!==p&&(u=p,u==null?d||(a.removeAttributeNode(l),d=!0):(l.value=p,d&&(a.setAttributeNodeNS(l),d=!1)))}},boolean=(a,s,u)=>d=>{u!==!!d&&((u=!!d)?a.setAttribute(s,""):a.removeAttribute(s))},data=({dataset:a})=>s=>{for(const u in s){const d=s[u];d==null?delete a[u]:a[u]=d}},event=(a,s)=>{let u,d=s.slice(2);return!(s in a)&&s.toLowerCase()in a&&(d=d.toLowerCase()),l=>{const p=isArray(l)?l:[l,!1];u!==p[0]&&(u&&a.removeEventListener(d,u,p[1]),(u=p[0])&&a.addEventListener(d,u,p[1]))}},ref=a=>s=>{typeof s=="function"?s(a):s.current=a},setter=(a,s)=>s==="dataset"?data(a):u=>{a[s]=u},hyperProperty=(a,s)=>{let u;return d=>{u!==d&&(u=d,a[s]!==d&&(d==null?(a[s]="",a.removeAttribute(s)):a[s]=d))}},readOnly=/^(?:form|list)$/i,text=(a,s)=>a.ownerDocument.createTextNode(s);function Tagger(a){return this.type=a,domtagger(this)}Tagger.prototype={attribute(a,s,u){const d=this.type==="svg";switch(s){case"class":if(d)return attribute(a,s);s="className";case"props":return setter(a,s);case"aria":return aria(a);case"style":return hyperStyle(a,u,d);case"ref":return ref(a);case".dataset":return data(a);default:return s.slice(0,1)==="."?setter(a,s.slice(1)):s.slice(0,1)==="?"?boolean(a,s.slice(1)):s.slice(0,2)==="on"?event(a,s):s in a&&!(d||readOnly.test(s))?hyperProperty(a,s):attribute(a,s)}},any(a,s){const{type:u}=this;let d=!1,l;const p=h=>{switch(typeof h){case"string":case"number":case"boolean":d?l!==h&&(l=h,s[0].textContent=h):(d=!0,l=h,s=udomdiff(a.parentNode,s,[text(a,h)],diffable,a));break;case"function":p(h(a));break;case"object":case"undefined":if(h==null){d=!1,s=udomdiff(a.parentNode,s,[],diffable,a);break}default:if(d=!1,l=h,isArray(h))if(h.length===0)s.length&&(s=udomdiff(a.parentNode,s,[],diffable,a));else switch(typeof h[0]){case"string":case"number":case"boolean":p(String(h));break;case"function":p(h.map(invoke,a));break;case"object":isArray(h[0])&&(h=h.concat.apply([],h));default:s=udomdiff(a.parentNode,s,h,diffable,a);break}else"ELEMENT_NODE"in h?s=udomdiff(a.parentNode,s,h.nodeType===11?slice.call(h.childNodes):[h],diffable,a):"text"in h?p(String(h.text)):"any"in h?p(h.any):"html"in h?s=udomdiff(a.parentNode,s,slice.call(createContent([].concat(h.html).join(""),u).childNodes),diffable,a):"length"in h&&p(slice.call(h));break}};return p},text(a){let s;const u=d=>{if(s!==d){s=d;const l=typeof d;l==="object"&&d?"text"in d?u(String(d.text)):"any"in d?u(d.any):"html"in d?u([].concat(d.html).join("")):"length"in d&&u(slice.call(d).join("")):l==="function"?u(d(a)):a.textContent=d==null?"":d}};return u}};function invoke(a){return a(this)}const{create:create$1,freeze,keys}=Object,cache=umap(new WeakMap$1),createRender=a=>({html:outer("html",a),svg:outer("svg",a),render(s,u){const d=typeof u=="function"?u():u,l=cache.get(s)||cache.set(s,createCache()),p=d instanceof LighterHole?unroll(a,l,d):d;return p!==l.wire&&(l.wire=p,s.textContent="",s.appendChild(p.valueOf())),s}}),createCache=()=>({stack:[],entry:null,wire:null}),outer=(a,s)=>{const u=umap(new WeakMap$1),d=p=>function(){return unroll(s,p,l.apply(null,arguments))};return l.for=(p,h)=>{const y=u.get(p)||u.set(p,create$1(null));return y[h]||(y[h]=d(createCache()))},l.node=function(){return unroll(s,createCache(),l.apply(null,arguments)).valueOf()},l;function l(){return new LighterHole(a,tta.apply(null,arguments))}},unroll=(a,s,{type:u,template:d,values:l})=>{const{length:p}=l;unrollValues(a,s,l,p);let{entry:h}=s;if(!h||h.template!==d||h.type!==u){const y=new a(u);s.entry=h={type:u,template:d,tag:y,wire:persistent(y(d,...l))}}else h.tag(d,...l);return h.wire},unrollValues=(a,{stack:s},u,d)=>{for(let l=0;l<d;l++){const p=u[l];p instanceof Hole?u[l]=unroll(a,s[l]||(s[l]=createCache()),p):isArray(p)?unrollValues(a,s[l]||(s[l]=createCache()),p,p.length):s[l]=null}d<s.length&&s.splice(d)};freeze(LighterHole);function LighterHole(a,s){this.type=a,this.template=s.shift(),this.values=s}const Hole=LighterHole,{render:render$1,html,svg}=createRender(Tagger);function tta(){let a=[],s=0,{length:u}=arguments;for(;s<u;)a.push(arguments[s++]);return a}const Free={name:"Free",layout:({props:a,children:s,size:u})=>s.reduce((d,l)=>{const{size:p={x:"100%",y:"100%"},position:h={x:0,y:0},opacity:y=1}=l.props;return we(pe({},d),{[l.id]:{position:{x:h.x,y:h.y},size:{x:p.x,y:p.y},opacity:y}})},{})},Column={name:"Column",layout:({props:a={},children:s,size:u})=>{let{justify:d="center",align:l="center",cover:p=!1,margin:h={},dimensions:y=16/9}=a;const _=p?0:Math.min(u.y/6,12);h=pe({left:_,right:_,top:_,bottom:_,between:_},h);const E=u.y-h.top-h.bottom,I=u.x-h.left-h.right,N=h.between*((s.length||1)-1),w=Math.min(I,(E-N)/(s.length||1)*y),C=w/y;return html.node`
      <div style=${{height:"100%",width:p?u.x+"px":"auto",display:"flex",flexDirection:"column",justifyContent:d,alignItems:l,paddingLeft:h.left+"px",paddingTop:h.top+"px",paddingBottom:h.bottom+"px",paddingRight:h.right+"px"}}>
      ${s.map((D,V)=>html.node`<div data-node-id=${D.id} .data=${{entry:{delay:400+V*100,offset:{x:0,y:"100%"},scale:{x:.8,y:.8},opacity:0},exit:{offset:{x:0,y:1e3},scale:{x:.8,y:.8},opacity:0},borderRadius:p?0:5}} style=${{display:"flex",width:p?"100%":w+"px",height:p?C+"px":"auto",aspectRatio:y,marginBottom:V===s.length-1?0:h.between+"px",flexGrow:0,flexShrink:1,flexBasis:C+"px"}}></div>`)}
      </div>
    `}},Row={name:"Row",layout:({props:a={},children:s,size:u})=>{let{justify:d="center",align:l="center",cover:p=!1,margin:h={},dimensions:y=16/9,maxWidth:_=1}=a;const E=p?0:Math.min(u.y/6,12);h=pe({left:E,right:E,top:E,bottom:E,between:E},h);const I=u.y-h.top-h.bottom,N=u.x-h.left-h.right,w=h.between*((s.length||1)-1),C=Math.min((N-w)/(s.length||1),I*y,_*u.x),D=C/y;return html.node`
      <div style=${{height:p?u.y+"px":"auto",width:"100%",display:"flex",flexDirection:"row",justifyContent:d,alignItems:l,paddingLeft:h.left+"px",paddingTop:h.top+"px",paddingBottom:h.bottom+"px",paddingRight:h.right+"px"}}>
          ${s.map((V,J)=>html.node`<div data-node-id=${V.id} .data=${{entry:{delay:400+J*100,offset:{x:0,y:"100%"},scale:{x:.8,y:.8},opacity:0},exit:{offset:{x:0,y:1e3},scale:{x:.8,y:.8},opacity:0},borderRadius:p?0:5}} style=${{display:"flex",height:p?"100%":D+"px",width:C+"px",aspectRatio:y,marginRight:J===s.length-1?0:h.between+"px",flexGrow:0,flexShrink:1,flexBasis:C+"px"}}></div>`)}
      </div>
    `}},toMatrix=(a,s)=>a.reduce((u,d,l)=>(l%s==0?u.push([l]):u[u.length-1].push(l))&&u,[]),Grid={name:"Grid",layout:({props:a={},children:s,size:u})=>{let{dimensions:d=16/9,numPerRow:l,margin:p,cover:h=!1,maxWidth:y}=a;const _=s.length===0||h?0:Math.min(u.y/s.length/10,30);p=p!=null?p:_;const E=u.x<u.y;let I=[];l?I=toMatrix(s,l):I=E?getTallGrid(s.length):getWideGrid(s.length);const N=(u.y-p)/I.length,w=u.x-p;return html.node`
    <div style=${{display:"flex",width:"100%",height:"100%",flexDirection:"column",justifyContent:"center",paddingLeft:p+"px",paddingBottom:p+"px",flexGrow:0}}>${I.map((C,D)=>Row.layout({props:{justify:"center",dimensions:d,cover:h,maxWidth:y||1/(I[0].length||1),margin:{top:p,right:p,left:0,bottom:0,between:p}},children:C.map(V=>s[V]),size:{y:N,x:w}}))}</div>`}},Presentation={name:"Presentation",layout:({props:a={},children:s,size:u})=>{let{margin:d,cover:l=!1,barWidth:p=.2,barPosition:h="side",presentationDimensions:y=16/9,viewerDimensions:_=16/9,justifyViewers:E="center",useGrid:I=!1}=a;const N=h==="side"?u.x*p:u.y*p,w=s[0],C=s.filter(O=>O!==w),D=s.length<=1?0:Math.min(u.x/80,30);if(d=d!=null?d:D,!w)return Grid.layout({props:a,children:s,size:u});const V=s[1],J=pe({},u);V&&(h==="side"?(J.x=u.x-N,J.y=J.x/y):(J.y=u.y-N,J.x=J.y*y));let W,g={};return I?(W=Grid.layout,g=pe({cover:l},l?{maxWidth:1}:{margin:d})):(W=h==="side"?Column.layout:Row.layout,g={margin:{top:h==="side"?d:0,left:h==="side"?0:d,bottom:d,right:d,between:d},dimensions:_,justify:E,align:"flex-end"}),html.node`
      <div style=${{display:"flex",flexDirection:h==="side"?"row":"column",justifyContent:"space-around",alignItems:"center",position:"relative"}}>
        ${s[0]&&html.node`<div style=${{width:J.x,height:J.y,padding:l?0:d+"px",display:"flex",flexGrow:1}}>
            <div data-node-id=${w.id} .data=${{dimensions:y,borderRadius:l?0:5,entry:{delay:0,offset:{x:0,y:1e3},scale:{x:.5,y:.5},opacity:0},exit:{offset:{x:0,y:1e3},scale:{x:2,y:2},opacity:0}}} style=${pe({width:"100%",height:"100%"},l?{position:"absolute",top:0,left:0,width:I&&V?100-p*100+"%":"100%",height:"100%"}:{})} />
          </div>`}
        ${html.node`<div style=${pe({},h==="side"?{maxWidth:p*100+"%",height:"100%"}:{maxHeight:p*100+"%",width:"100%"})}>${V&&W({props:g,children:C,size:h==="side"?{x:N,y:u.y}:{x:u.x,y:N}})}</div>`}
      </div>
    `}},Layered={name:"Layered",layout:({props:a={},children:s,size:u})=>html.node`<div style=${{width:"100%",height:"100%",position:"relative"}}>
      ${s.map((d,l)=>html.node`<div data-node-id=${d.id} style=${{width:"100%",height:"100%",position:"absolute",top:0,left:0}}></div>`)}
    </div>`},getWideGrid=(a=0)=>{switch(a){case 0:return[[]];case 1:return[[0]];case 2:return[[0,1]];case 3:return[[0,1],[2]];case 4:return[[0,1],[2,3]];case 5:return[[0,1,2],[3,4]];case 6:return[[0,1,2],[3,4,5]];case 7:return[[0,1,2],[3,4],[5,6]];case 8:return[[0,1,2],[3,4,5],[6,7]]}const s=Array(a).fill(null).map((u,d)=>d);return toMatrix(s,Math.round(Math.sqrt(a)))},getTallGrid=(a=0)=>{switch(a){case 0:return[[]];case 1:return[[0]];case 2:return[[0],[1]];case 3:return[[0,1],[2]];case 4:return[[0,1],[2,3]];case 5:return[[0,1],[2,3],[4]];case 6:return[[0,1],[2,3],[4,5]];case 7:return[[0,1],[2,3],[4,5],[6]];case 8:return[[0,1],[2,3],[4,5],[6,7]]}const s=Array(a).fill(null).map((u,d)=>d);return toMatrix(s,Math.ceil(Math.sqrt(s.length))-1)};var Layouts=Object.freeze(Object.defineProperty({__proto__:null,Free,Column,Row,Grid,Presentation,Layered},Symbol.toStringTag,{value:"Module"}));const deviceWatchers=new Set,updateMediaStreamTracks=(a,s)=>{const u={audio:a.getAudioTracks()[0],video:a.getVideoTracks()[0]};u.audio!==s.audio&&(u.audio&&a.removeTrack(u.audio),s.audio&&a.addTrack(s.audio)),u.video!==s.video&&(u.video&&a.removeTrack(u.video),s.video&&a.addTrack(s.video))},getDevicePermissions=async()=>{const a=await navigator.mediaDevices.enumerateDevices(),s=a.find(d=>d.kind==="videoinput"),u=a.find(d=>d.kind==="audioinput");return{video:Boolean(s)&&Boolean(s.deviceId),audio:Boolean(u)&&Boolean(u.deviceId)}},ensureDevicePermissions=async()=>{const a=await getDevicePermissions();if(a.audio&&a.video)return a;try{return(await getUserMedia({video:!a.video,audio:!a.audio})).getTracks().forEach(u=>{u.stop()}),getDevicePermissions()}catch(s){return log$1.warn(s),a}},watchDevices=a=>(deviceWatchers.size===0&&navigator.mediaDevices.addEventListener("devicechange",reportDevices),deviceWatchers.add(a),reportDevices().catch(()=>{}),()=>{deviceWatchers.delete(a),deviceWatchers.size===0&&navigator.mediaDevices.removeEventListener("devicechange",reportDevices)}),getUserMedia=async(...a)=>{const s=await navigator.mediaDevices.getUserMedia(...a);return reportDevices(),s},deviceWithDefaultLabel=(a,s)=>({deviceId:a.deviceId,groupId:a.groupId,kind:a.kind,label:a.label||s}),reportDevices=async()=>{const a=await ensureDevicePermissions(),s=await navigator.mediaDevices.enumerateDevices(),u=a.video?s.filter(p=>p.kind==="videoinput").map((p,h)=>deviceWithDefaultLabel(p,"Camera "+(h+1))):[],d=a.audio?s.filter(p=>p.kind==="audioinput").map((p,h)=>deviceWithDefaultLabel(p,"Microphone "+(h+1))):[],l=a.audio?s.filter(p=>p.kind==="audiooutput").map((p,h)=>deviceWithDefaultLabel(p,"Speaker "+(h+1))):[];deviceWatchers.forEach(p=>p({webcams:u,microphones:d,speakers:l}))};var webrtc=Object.freeze(Object.defineProperty({__proto__:null,updateMediaStreamTracks,getDevicePermissions,ensureDevicePermissions,watchDevices,getUserMedia},Symbol.toStringTag,{value:"Module"}));CoreContext.on("RoomJoined",({room:a})=>{const{compositor:s}=CoreContext;let u={},d=[],l=[],p={};const h=()=>{l.forEach(y=>{const _=p[y.id],E=p[y.id+"-screen"],I=y.trackIds.find(J=>{const W=a.getTrack(J);return(W==null?void 0:W.type)==="camera"}),N=y.trackIds.find(J=>{const W=a.getTrack(J);return(W==null?void 0:W.type)==="microphone"}),w=y.trackIds.find(J=>{const W=a.getTrack(J);return(W==null?void 0:W.type)==="screen_share"}),C=a.getTrack(I),D=a.getTrack(N),V=a.getTrack(w);updateMediaStreamTracks(_,{video:C==null?void 0:C.mediaStreamTrack,audio:D==null?void 0:D.mediaStreamTrack}),updateMediaStreamTracks(E,{video:V==null?void 0:V.mediaStreamTrack}),s.updateSource(y.id,{videoEnabled:Boolean(C&&!C.isMuted),audioEnabled:Boolean(D&&!D.isMuted)}),s.updateSource(y.id+"-screen",{videoEnabled:Boolean(V&&!V.isMuted)})})};a.useTracks(y=>{const _=y.filter(I=>!d.some(N=>N.id===I.id)),E=d.filter(I=>!y.some(N=>N.id===I.id));d=y,h(),_.forEach(I=>{const{mediaStreamTrack:N,id:w,participantId:C,type:D}=a.getTrack(I.id),V={id:w,isActive:!0,value:N,props:{trackId:w,participantId:C,isMuted:I.isMuted,type:D}};N&&(N.kind==="video"?s.addSource("RoomVideo",V):s.addSource("RoomAudio",V))}),E.forEach(I=>{var N;s.removeSource(I.id),(N=u[I.id])==null||N.call(u)})}),a.useParticipants(y=>{const _=y.filter(I=>!l.some(N=>N.id===I.id)),E=l.filter(I=>!y.some(N=>N.id===I.id));l=y,_.forEach(I=>{const{id:N}=I,w=new MediaStream([]),C=new MediaStream([]);p[N]=w,p[N+"-screen"]=C,s.addSource("RoomParticipant",{id:N,isActive:!0,value:w,props:{id:N,type:"camera",displayName:I.displayName||I.id,audioEnabled:!1,videoEnabled:!1}}),s.addSource("RoomParticipant",{id:N+"-screen",isActive:!0,value:C,props:{id:N,type:"screen",displayName:I.displayName||I.id,audioEnabled:!1,videoEnabled:!1}})}),h(),E.forEach(I=>{var N;s.removeSource(I.id),(N=u[I.id])==null||N.call(u)})})});const RoomParticipant={type:"RoomParticipant",valueType:MediaStream,props:{id:{},type:{},videoEnabled:{},audioEnabled:{}}},RoomVideo={type:"RoomVideo",valueType:MediaStreamTrack,props:{trackId:{},participantId:{},roomId:{},type:{}}},RoomAudio={type:"RoomAudio",valueType:MediaStreamTrack,props:{trackId:{},participantId:{},roomId:{},type:{}}};var Sources=Object.freeze(Object.defineProperty({__proto__:null,RoomParticipant,RoomVideo,RoomAudio},Symbol.toStringTag,{value:"Module"}));const{trigger:trigger$1,state}=CoreContext,createProject$1=async(a={})=>{const{props:s={},size:u,meta:d={}}=a,l=state.collectionId,p=await CoreContext.Request.createProject({collectionId:l,props:s,meta:d,size:u}),h=await hydrateProject(p.project),y=toBaseProject(h);return state.projects=[...state.projects,h],trigger$1("ProjectAdded",{project:y}),y},updateProjectMeta=async a=>{const{projectId:s,meta:u={}}=a,d=state.projects.find(p=>p.id===a.projectId);if(!d)return;const l=pe(pe({},d.props),u);return await CoreContext.clients.LiveApi().project.updateProject({collectionId:d.videoApi.project.collectionId,projectId:s,updateMask:["metadata"],metadata:l}),d.props=l,trigger$1("ProjectMetaUpdated",{projectId:s,meta:d.props}),l},setActiveProject=async a=>{const s=state.projects.find(l=>l.id===a.projectId);if(!s){state.activeProjectId=null,trigger$1("ActiveProjectChanged",null);return}const u=state.projects.find(l=>l.id===state.activeProjectId);if(s===u)return;u&&(Array.from(webrtcManager.rooms.keys()).map(webrtcManager.removeRoom),await CoreContext.clients.LayoutApi().unsubscribeFromLayout(u.layoutApi.layoutId),await CoreContext.clients.LiveApi().unsubscribeFromProject(u.videoApi.project.collectionId,u.videoApi.project.projectId)),await CoreContext.clients.LayoutApi().subscribeToLayout(s.layoutApi.layoutId),await CoreContext.clients.LiveApi().subscribeToProject(s.videoApi.project.collectionId,s.videoApi.project.projectId);let d=await CoreContext.clients.LiveApi().project.getProject({collectionId:s.videoApi.project.collectionId,projectId:s.videoApi.project.projectId,status:!0});return s.videoApi.phase=d.status.phase,state.activeProjectId=s.id,trigger$1("ActiveProjectChanged",{projectId:s.id}),toBaseProject(s)},joinRoom=async a=>{const{projectId:s,displayName:u="Guest"}=a,d=state.projects.find(N=>N.id===s);let l=d.sfuToken;if(!l){let{webrtcAccess:N}=await CoreContext.clients.LiveApi().authentication.createWebRtcAccessToken({collectionId:d.videoApi.project.collectionId,projectId:d.videoApi.project.projectId,displayName:u});l=N.accessToken}const h=o(l).video.room,y=new URL(CoreContext.clients.getLiveKitServer()),_=y.host+y.pathname,E=webrtcManager.ensureRoom(_,h,l);E.bindApiClient(CoreContext.clients),await E.connect({logLevel:CoreContext.logLevel}),d.sfuToken=l,d.roomId=h;const I=getRoom(h);return trigger$1("RoomJoined",{projectId:d.id,room:I}),I},createNode=async a=>{let{props:s={},parentId:u,index:d,projectId:l=state.activeProjectId}=a;const p=getProject(l);s=we(pe({},s),{layoutId:p.layoutApi.layoutId,type:"child"});const h=await p.compositor.insert(s,u,d);return trigger$1("NodeAdded",{projectId:l,nodeId:h}),trigger$1("NodeChanged",{projectId:l,nodeId:u}),p.compositor.get(h)},deleteNode=async a=>{var p;let{nodeId:s,projectId:u=state.activeProjectId}=a;const d=getProject(u),l=(p=d.compositor.getParent(s))==null?void 0:p.id;d.compositor.remove(s),trigger$1("NodeRemoved",{projectId:u,nodeId:s}),trigger$1("NodeChanged",{projectId:u,nodeId:l})},updateNode=async a=>{let{nodeId:s,props:u={},projectId:d=state.activeProjectId}=a;const l=getProject(d);return delete u.type,delete u.sourceType,l.compositor.update(s,u),trigger$1("NodeChanged",{projectId:d,nodeId:s}),l.compositor.get(s)},setNodeLayout=async a=>{let{nodeId:s,layout:u,projectId:d=state.activeProjectId,layoutProps:l={}}=a;getProject(d).compositor.update(s,{layout:u,layoutProps:l}),trigger$1("NodeChanged",{projectId:d,nodeId:s})},moveNode=async a=>{const{nodeId:s,parentId:u,projectId:d=state.activeProjectId,index:l}=a;getProject(d).compositor.move(s,u,l),trigger$1("NodeChanged",{projectId:d,nodeId:s})},swapNodes=async a=>{var y,_;const{nodeAId:s,nodeBId:u,projectId:d=state.activeProjectId}=a,l=getProject(d),p=(y=l.compositor.getParent(s))==null?void 0:y.id,h=(_=l.compositor.getParent(u))==null?void 0:_.id;l.compositor.swap(s,u),trigger$1("NodeChanged",{projectId:d,nodeId:p}),trigger$1("NodeChanged",{projectId:d,nodeId:h})},reorderNodes=async a=>{const{parentId:s,childIds:u,projectId:d=state.activeProjectId}=a;getProject(d).compositor.reorder(s,u),trigger$1("NodeChanged",{projectId:d,nodeId:s})},startBroadcast=async a=>{const{projectId:s=state.activeProjectId}=a,u=getProject(s);await CoreContext.clients.LiveApi().project.startProjectBroadcast({collectionId:u.videoApi.project.collectionId,projectId:u.videoApi.project.projectId})},stopBroadcast=async a=>{const{projectId:s=state.activeProjectId}=a,u=getProject(s);await CoreContext.clients.LiveApi().project.stopProjectBroadcast({collectionId:u.videoApi.project.collectionId,projectId:u.videoApi.project.projectId})},addDestination=async a=>{var E;const{rtmpUrl:s,rtmpKey:u,enabled:d,projectId:l=state.activeProjectId}=a,p=getProject(l),h={rtmpPush:{key:u,url:s}},y=await((E=CoreContext.clients.LiveApi().destination)==null?void 0:E.createDestination({collectionId:p.videoApi.project.collectionId,projectId:p.videoApi.project.projectId,address:h,enabled:d}));p.videoApi.project.destinations.push(y.destination);const _=toBaseDestination(y.destination);trigger$1("DestinationAdded",{projectId:l,destination:_})},removeDestination=async a=>{var l;const{destinationId:s,projectId:u=state.activeProjectId}=a,d=getProject(u);await((l=CoreContext.clients.LiveApi().destination)==null?void 0:l.deleteDestination({collectionId:d.videoApi.project.collectionId,projectId:d.videoApi.project.projectId,destinationId:s})),d.videoApi.project.destinations=d.videoApi.project.destinations.filter(p=>p.destinationId!==s),trigger$1("DestinationRemoved",{projectId:u,destinationId:s})},updateDestination=async a=>{var _;const{rtmpUrl:s,rtmpKey:u,destinationId:d,projectId:l=state.activeProjectId}=a,p=getProject(l),h={key:u,url:s};await((_=CoreContext.clients.LiveApi().destination)==null?void 0:_.updateDestination({collectionId:p.videoApi.project.collectionId,projectId:p.videoApi.project.projectId,destinationId:d,updateMask:["address.rtmpPush"],address:{rtmpPush:h}}));const y=p.videoApi.project.destinations.find(E=>d===E.destinationId);y.address.rtmpPush=h,trigger$1("DestinationUpdated",{projectId:l,destinationId:d,rtmpKey:u,rtmpUrl:s})},setDestinationEnabled=async a=>{var y;const{enabled:s,destinationId:u,projectId:d=state.activeProjectId}=a,l=getProject(d),p=l.videoApi.project.destinations.find(_=>u===_.destinationId);if(p.enabled===s)return;await((y=CoreContext.clients.LiveApi().destination)==null?void 0:y.updateDestination({collectionId:l.videoApi.project.collectionId,projectId:l.videoApi.project.projectId,destinationId:u,updateMask:["enabled"],enabled:s})),p.enabled=s,trigger$1(s?"DestinationEnabled":"DestinationDisabled",{projectId:d,destinationId:u})},setDestination=async a=>{var y,_;const{rtmpUrl:s,rtmpKey:u,projectId:d=state.activeProjectId}=a,l=getProject(d),p={key:u,url:s},h=!0;if(l.videoApi.project.destinations.length>0){await((y=CoreContext.clients.LiveApi().destination)==null?void 0:y.updateDestination({collectionId:l.videoApi.project.collectionId,projectId:l.videoApi.project.projectId,destinationId:l.videoApi.project.destinations[0].destinationId,updateMask:["address.rtmpPush"],address:{rtmpPush:p}}));const E=l.videoApi.project.destinations[0];E.address.rtmpPush=p}else{const E=await((_=CoreContext.clients.LiveApi().destination)==null?void 0:_.createDestination({collectionId:l.videoApi.project.collectionId,projectId:l.videoApi.project.projectId,address:{rtmpPush:p},enabled:h}));l.videoApi.project.destinations.push(E.destination)}trigger$1("DestinationSet",{projectId:d,rtmpUrl:s,rtmpKey:u})};var commands$1=Object.freeze(Object.defineProperty({__proto__:null,createProject:createProject$1,updateProjectMeta,setActiveProject,joinRoom,createNode,deleteNode,updateNode,setNodeLayout,moveNode,swapNodes,reorderNodes,startBroadcast,stopBroadcast,addDestination,removeDestination,updateDestination,setDestinationEnabled,setDestination},Symbol.toStringTag,{value:"Module"}));const useActiveProjectRoom$1=()=>{const[a,s]=React.useState(null);return React.useEffect(()=>useActiveProjectRoom(s),[]),a},useDevices=()=>{const[a,s]=React.useState({webcams:[],microphones:[],speakers:[]});return React.useEffect(()=>watchDevices(s),[]),a},StudioContext=React__default.default.createContext({studio:null,project:null,room:null,webcamId:null,microphoneId:null,setStudio:()=>{},setProject:()=>{},setRoom:()=>{},setWebcamId:()=>{},setMicrophoneId:()=>{},projectCommands:{}}),useStudio=()=>React.useContext(StudioContext),StudioProvider=({children:a})=>{const[s,u]=React.useState(),[d,l]=React.useState(),[p,h]=React.useState(),[y,_]=React.useState(localStorage.getItem("__LS_webcam")),[E,I]=React.useState(localStorage.getItem("__LS_microphone")),N=React.useMemo(()=>d?commands(d):{},[d]);return React.useEffect(()=>{!s||(y&&s.setCamera({deviceId:y}),E&&s.setMicrophone({deviceId:E}))},[s,y,E]),React__default.default.createElement(StudioContext.Provider,{value:{studio:p,project:d,room:s,webcamId:y,microphoneId:E,setStudio:h,setProject:l,setRoom:u,setWebcamId:w=>{localStorage.setItem("__LS_webcam",w),_(w)},setMicrophoneId:w=>{localStorage.setItem("__LS_microphone",w),I(w)},projectCommands:N}},a)};var react=Object.freeze(Object.defineProperty({__proto__:null,useActiveProjectRoom:useActiveProjectRoom$1,useDevices,StudioContext,useStudio,StudioProvider},Symbol.toStringTag,{value:"Module"}));const TRANSITION_DURATION=300,findLayoutUp=(a,s,u=0)=>{const l=a.parentElement;return l instanceof Layout&&(u=0,!s||s(l))?l:l?u>4?null:findLayoutUp(l,s,u+1):null},TRANSITION_FIELDS="opacity, transform, width, height",layoutIndex={},parentIdIndex={},childIndex={};let rootLayout,_cid=1;const ignoredAttributes=["style","id","className"];let tickOps={};const tick=()=>{if(nextTick=null,window.__dragging){nextTick=nextTick||requestAnimationFrame(tick);return}const a=new Set,s=new Set,u=new Set;Object.entries(tickOps).forEach(([d,l])=>{l.forEach(([p,h,y])=>{switch(p){case"childInserted":{s.has(y)?s.delete(y):a.add(y);break}case"childRemoved":{a.has(y)?a.delete(y):s.add(y);break}case"childRemoveFinished":{u.add(y);break}}})});try{s.forEach(l=>{var h,y;const p=childIndex[l];p.nextSiblingEl?(h=p.parentEl)==null||h.insertBefore(p,p.nextSiblingEl):(y=p.parentEl)==null||y.append(p),p.runRemove()}),u.forEach(l=>{const p=childIndex[l];if(p.removed){p.previousSiblingEl&&(p.previousSiblingEl.nextSiblingEl=p.nextSiblingEl),p.nextSiblingEl&&(p.nextSiblingEl.previousSiblingEl=p.previousSiblingEl);return}});const d=window.__scale;Object.entries(tickOps).forEach(([l,p])=>{const h=layoutIndex[l],y=h.getBoundingClientRect(),_={x:y.width/d,y:y.height/d};h.updatePositions({size:_,inserted:a,removed:s})})}catch(d){log$1.warn("Failed to run Layout ops",d)}tickOps={}};let nextTick;const queueOp=a=>{const[s,u]=a,d=tickOps[u]||[];tickOps[u]=[...d,a],nextTick=nextTick||requestAnimationFrame(tick)};class Layout extends HTMLElement{constructor(){super();Me(this,"parentEl");Me(this,"slotEl");Me(this,"parentLayout");Me(this,"nodes");Me(this,"mutationObserver");Me(this,"latestSize");Me(this,"isFirst",!0);Me(this,"isUpdating",!1);Me(this,"cid");this.cid=++_cid}log(...u){var d;log$1.debug(...u,{id:this.dataset.id,parent:(d=this.parentLayout)==null?void 0:d.dataset.id},this)}connectedCallback(){var u;this.parentEl=this.parentElement,this.parentLayout=findLayoutUp(this),this.slotEl=this.closest("[data-layout-child]"),Array.from(this.children).forEach(d=>this.initializeChild(d)),rootLayout||(rootLayout=this),layoutIndex[this.dataset.id]=this,parentIdIndex[this.dataset.id]=(u=this.parentLayout)==null?void 0:u.id,Object.assign(this.style,{width:"100%",height:"100%",position:"absolute",top:"0px",left:"0px",pointerEvents:"none",boxSizing:"border-box"}),this.mutationObserver&&this.mutationObserver.disconnect(),this.mutationObserver=new MutationObserver(d=>{!this.isConnected||d.forEach(l=>{l.type==="attributes"&&!ignoredAttributes.includes(l.attributeName)?queueOp(["attributesChanged",this.dataset.id]):l.type==="childList"&&(l.addedNodes.forEach(p=>{const h=childIndex[p.dataset.id];p.removed||(h?h!==p&&(this.initializeChild(p),p.setAttribute("style",h.getAttribute("style")),p.data=h.data):this.initializeChild(p),queueOp(["childInserted",this.dataset.id,p.dataset.id]))}),l.removedNodes.forEach(p=>{p.removed||queueOp(["childRemoved",this.dataset.id,p.dataset.id])}))})}),this.mutationObserver.observe(this,{childList:!0,attributes:!0}),this.latestSize||queueOp(["attributesChanged",this.dataset.id])}disconnectedCallback(){}adoptedCallback(){}updatePositions(u){if(this.isUpdating)return;this.isUpdating=!0;const{size:d,inserted:l=new Set,removed:p=new Set}=u;this.nodes=Array.from(this.children||[]).map((E,I)=>{const N=getElementAttributes(E);return{id:E.dataset.id,props:N,children:[]}});const h=JSON.parse(this.getAttribute("props")||"{}");this.latestSize=d;const y={id:this.dataset.id,props:h,children:this.nodes,size:d};let _=layoutChildren(y);Promise.all(Object.entries(_).map(async([E,I])=>{var O,$,x,Y,te,ne,F,j,K,M,q;const{size:N,position:w,zIndex:C=1,opacity:D=1,borderRadius:V=0,entryTransition:J={},exitTransition:W={}}=I;let g=childIndex[E]||this.querySelector(`[data-layout-child][data-id="${E}"]`);if(g){if(g.removed)return;W&&(g.data.exitTransition=W),J&&(g.data.entryTransition=J),g.data.size=N,g.data.position=w,Object.assign(g.style,{top:0,left:0,position:"absolute",transformOrigin:"50% 50%",transitionDuration:"0ms",transitionDelay:"0ms",visibility:"visible",boxSizing:"border-box",overflow:"hidden",borderRadius:V+"px"});let z="0ms",le=this.isFirst?asDuration(0):asDuration(TRANSITION_DURATION);if(l.has(E))Object.assign(g.style,{transitionProperty:TRANSITION_FIELDS,transitionDuration:"0ms",transitionTimingFunction:(O=J.timingFn)!=null?O:"ease",transform:`translate3d(calc(${asSize(w==null?void 0:w.x)} + ${asSize((x=($=J.offset)==null?void 0:$.x)!=null?x:0)}), calc(${asSize(w==null?void 0:w.y)} + ${asSize((te=(Y=J.offset)==null?void 0:Y.y)!=null?te:0)}), 0) scaleX(${(F=(ne=J.scale)==null?void 0:ne.x)!=null?F:1}) scaleY(${(K=(j=J.scale)==null?void 0:j.y)!=null?K:1})`,opacity:(M=J.opacity)!=null?M:D,width:N==null?void 0:N.x,height:N==null?void 0:N.y}),z=asDuration((q=J.delay)!=null?q:0);else if(g.data.rootOffset){const me=rootLayout.getBoundingClientRect(),ve=this.getBoundingClientRect(),ye=window.__scale,v={x:ve.x/ye-me.x/ye,y:ve.y/ye-me.y/ye},T={x:g.data.rootOffset.x-v.x,y:g.data.rootOffset.y-v.y};g.style.transform=`translate3d(${asSize(T.x)}, ${asSize(T.y)}, 0) scaleX(1) scaleY(1)`}await new Promise(me=>window.setTimeout(me)),Object.assign(g.style,{transitionProperty:TRANSITION_FIELDS,transitionDuration:le,transitionDelay:z,transform:`translate3d(${asSize(w==null?void 0:w.x)}, ${asSize(w==null?void 0:w.y)}, 0) scaleX(1) scaleY(1)`,opacity:D,width:N==null?void 0:N.x,height:N==null?void 0:N.y,zIndex:C});const Q=window.__scale,ce=()=>{const me=rootLayout.getBoundingClientRect(),ve=g.getBoundingClientRect();g.data.rootOffset={x:ve.x/Q-me.x/Q,y:ve.y/Q-me.y/Q}};ce(),g.addEventListener("transitionend",()=>{ce()})}})).then(()=>{this.isUpdating=!1}),this.isFirst=!1,Array.from(this.querySelectorAll("ls-layout")).forEach(E=>{if(!_[E.dataset.id])return;const I=_[E.dataset.id].size;E.updatePositions({size:{x:sizeToNum(I.x,d.x),y:sizeToNum(I.y,d.y)}})})}initializeChild(u){var l;if(!((l=u.dataset)!=null&&l.id))return log$1.warn("Layout: Child requires `data-id` at the time it is added to a Layout");u.mutationObserver||(u.mutationObserver=new MutationObserver(p=>{p.forEach(h=>{if(h.type==="attributes"){if(h.attributeName==="style")return;queueOp(["childAttributesChanged",this.dataset.id,u.dataset.id])}})}),u.mutationObserver.observe(u,{childList:!0,attributes:!0}));const d={entryTransition:{delay:0,opacity:0,scale:{x:1,y:1},offset:{x:0,y:0}},exitTransition:{delay:0,opacity:0,scale:{x:1,y:1},offset:{x:0,y:0}},position:{x:0,y:0},size:{x:0,y:0},opacity:0,fit:"cover",borderRadius:0,zIndex:1};u.data=d,u.parentEl=u.parentElement,u.nextSiblingEl=u.nextSibling,u.previousSiblingEl=u.previousSibling,u.previousSiblingEl&&(u.previousSiblingEl.nextSiblingEl=u),u.toggleAttribute("data-layout-child",!0),childIndex[u.dataset.id]=u,u.runRemove=async()=>{var h,y,_,E,I,N,w,C,D,V,J,W;u.removed=!0;const p=TRANSITION_DURATION;return await new Promise(g=>window.setTimeout(g)),Object.assign(u.style,{zIndex:0,transitionDelay:asDuration(0),transitionDuration:asDuration(p),transitionProperty:TRANSITION_FIELDS,transitionTimingFunction:(h=d.exitTransition.timingFn)!=null?h:"ease",transform:`translate3d(calc(${asSize((y=d.position)==null?void 0:y.x)} + ${asSize((E=(_=d.exitTransition.offset)==null?void 0:_.x)!=null?E:0)}), calc(${asSize((I=d.position)==null?void 0:I.y)} + ${asSize((w=(N=d.exitTransition.offset)==null?void 0:N.y)!=null?w:0)}), 0) scaleX(${(D=(C=d.exitTransition.scale)==null?void 0:C.x)!=null?D:1}) scaleY(${(J=(V=d.exitTransition.scale)==null?void 0:V.y)!=null?J:1})`,opacity:(W=d.exitTransition.opacity)!=null?W:0}),u.removed=!0,u.transition=new Promise(g=>{const O=()=>{u.transition=null,u.remove(),queueOp(["childRemoveFinished",this.dataset.id,u.dataset.id]),clearTimeout($),g()},$=window.setTimeout(O,parseInt(String(p))+600);u.addEventListener("transitionend",O,{once:!0})}),u.transition}}}const ensureLayoutContainer=a=>{const s=document.getElementById("__ls-layout-container");if(s)return Object.assign(s.style,{width:a.x+"px",height:a.y+"px"}),s;const u=document.createElement("div");return u.id="__ls-layout-container",Object.assign(u.style,{position:"fixed",visibility:"hidden",top:0+"px",left:0+"px",zIndex:-1,width:a.x+"px",height:a.y+"px"}),document.body.append(u),u},layoutChildren=({id:a,props:s={},children:u,size:d})=>{const l={props:s,children:u,size:d},p=htmlLayouts[s.layout]?htmlLayouts[s.layout].layout(l):htmlLayouts.Free.layout(l);if(!(p instanceof HTMLElement))return p;const h=Array.from(p.querySelectorAll("[data-node-id]")),y=document.createElement("div");y.style.height=p.style.height=d.y+"px",y.style.width=p.style.width=d.x+"px",y.style.position="absolute",y.style.top="0px",y.style.left="0px",y.style.boxSizing="border-box",y.setAttribute("data-wrapper-id",a),y.append(p);const _=ensureLayoutContainer(d),E=_.querySelector(`[data-wrapper-id="${a}"]`);E?E.replaceWith(y):_.append(y);const I=p.getBoundingClientRect(),N={};return h.forEach(w=>{var W,g,O,$,x,Y,te;const C=w.dataset.nodeId;if(!C)return;const D=Number((W=w.dataset.opacity)!=null?W:w.style.opacity||1),V=w.getBoundingClientRect();let J={position:{x:V.x-I.x+"px",y:V.y-I.y+"px"},size:{x:V.width+"px",y:V.height+"px"},zIndex:1,opacity:D,entryTransition:(O=(g=w.data)==null?void 0:g.entry)!=null?O:{},exitTransition:(x=($=w.data)==null?void 0:$.exit)!=null?x:{},borderRadius:(te=(Y=w.data)==null?void 0:Y.borderRadius)!=null?te:0};`${s.showcase}-x`===C&&(J.position={x:I.x+"px",y:I.y+"px"},J.size={x:I.width+"px",y:I.height+"px"},J.zIndex=2),N[C]=J,positionIndex[w.dataset.nodeId]=J}),N},positionIndex={},htmlLayouts={},registerLayout$1=a=>{asArray(a).forEach(s=>{htmlLayouts[s.name]=s})};var htmlLayouts$1=Object.freeze(Object.defineProperty({__proto__:null,Layout,ensureLayoutContainer,layoutChildren,htmlLayouts,registerLayout:registerLayout$1},Symbol.toStringTag,{value:"Module"}));const addingCache={camera:new Set,screen:new Set},commands=a=>{const s=a.scene.getRoot(),{Command:u}=CoreContext,d=s.children.find(y=>y.props.id==="bg"),l=s.children.find(y=>y.props.id==="content"),p=s.children.find(y=>y.props.id==="foreground"),h={getBackground(){return d},getContent(){return l},getForeground(){return p},getLayout(){return l.props.layout},setLayout(y,_={}){const E=l.props.layoutProps.showcase;u.setNodeLayout({nodeId:l.id,layout:y,layoutProps:pe({showcase:E},_)})},getBackgroundImage(){return d.props.attributes.src},setBackgroundImage(y){CoreContext.Command.updateNode({nodeId:d.id,props:{attributes:we(pe({},d.props.attributes),{src:y})}})},setShowcase(y,_="camera"){var I;const E=h.getParticipantNode(y,_);return CoreContext.Command.updateNode({nodeId:l.id,props:{layoutProps:we(pe({},l.props.layoutProps),{showcase:(I=E==null?void 0:E.id)!=null?I:null})}})},useShowcase(y){const _=()=>{const E=l.props.layoutProps.showcase,I=l.children.find(w=>w.id===E);if(!I)return y({participantId:null,type:null});const{sourceProps:N}=I.props;return y({participantId:N.id,type:N.type})};return _(),CoreContext.on("NodeChanged",E=>{E.nodeId===l.id&&_()})},async addParticipant(y,_={},E="camera"){if(addingCache[E].has(y))return;const{isMuted:I=!1,volume:N=1}=_;l.children.find(C=>{var D,V;return((D=C.props.sourceProps)==null?void 0:D.id)===y&&((V=C.props.sourceProps)==null?void 0:V.type)===E})||(addingCache[E].add(y),await CoreContext.Command.createNode({props:{sourceType:"RoomParticipant",sourceProps:{type:E,id:y},volume:N,isMuted:I},parentId:l.id,index:l.children.length}).finally(()=>{addingCache[E].delete(y)}))},addParticipantScreenshare(y,_={}){return h.addParticipant(y,_,"screen")},removeParticipant(y,_="camera"){l.children.filter(E=>{var I,N;return((I=E.props.sourceProps)==null?void 0:I.id)===y&&((N=E.props.sourceProps)==null?void 0:N.type)===_&&E.props.sourceType==="RoomParticipant"}).forEach(E=>{CoreContext.Command.deleteNode({nodeId:E.id})})},removeParticipantScreenshare(y){return h.removeParticipant(y,"screen")},getParticipantNode(y,_="camera"){return l.children.find(E=>{var I,N;return((I=E.props.sourceProps)==null?void 0:I.id)===y&&((N=E.props.sourceProps)==null?void 0:N.type)===_})},getParticipantState(y,_="camera"){var E;return(E=h.getParticipantNode(y,_))==null?void 0:E.props},useParticipantState(y,_,E="camera"){let I=h.getParticipantNode(y,E);const N=()=>{_(I==null?void 0:I.props)},w=CoreContext.on("NodeChanged",D=>{if(D.nodeId!==l.id)return;const V=I;I=h.getParticipantNode(y),V!==I&&N()}),C=CoreContext.on("NodeChanged",D=>{!I||D.nodeId!==I.id||N()});return N(),()=>{w(),C()}},setParticipantMuted(y,_){const E=h.getParticipantNode(y);!E||CoreContext.Command.updateNode({nodeId:E.id,props:{isMuted:_}})},setParticipantVolume(y,_){const E=h.getParticipantNode(y);!E||CoreContext.Command.updateNode({nodeId:E.id,props:{volume:_}})},pruneParticipants(){const y=getProjectRoom(a.id);!y||l.children.filter(_=>{var C,D;if(_.props.sourceType!=="RoomParticipant")return!1;const E=(C=_.props.sourceProps)==null?void 0:C.type,I=y.getParticipant((D=_.props.sourceProps)==null?void 0:D.id);return I?E==="camera"?!1:!I.trackIds.map(V=>y.getTrack(V)).filter(Boolean).some(V=>(V.type===dist.Track.Source.Camera||V.type===dist.Track.Source.Microphone?"camera":"screen")===E):!0}).forEach(_=>{CoreContext.Command.deleteNode({nodeId:_.id})})}};return h},create=async(a={},s={})=>CoreContext.Command.createProject({props:a,meta:s}),createCompositor=async(a,s,u)=>{const{backgroundImage:d,layout:l,layoutProps:p={}}=u,h=await CoreContext.compositor.createProject({props:{name:"Root",type:"sceneless-project",layout:"Layered",size:s,isRoot:!0}},a),y=h.getRoot(),_=await Promise.all([h.insert({name:"Background",id:"bg",tagName:"img",sourceType:"Element",attributes:{src:d},style:{objectFit:"cover"}},y.id),h.insert({id:"content",name:"Content",layout:l,layoutProps:p},y.id),h.insert({id:"foreground",name:"Overlays",layout:"Free"},y.id)]);return await h.reorder(y.id,_),h};var scenelessProject=Object.freeze(Object.defineProperty({__proto__:null,commands,create,createCompositor},Symbol.toStringTag,{value:"Module"}));const useActiveProjectRoom=a=>{const s=getProject(CoreContext.state.activeProjectId);return a(s?getRoom(s.roomId):null),CoreContext.on("RoomJoined",()=>{const u=getProject(CoreContext.state.activeProjectId);a(u?getRoom(u.roomId):null)})};var callbacks=Object.freeze(Object.defineProperty({__proto__:null,useActiveProjectRoom},Symbol.toStringTag,{value:"Module"})),index=Object.freeze(Object.defineProperty({__proto__:null,React:react,ScenelessProject:scenelessProject,Callback:callbacks,Room:webrtc,Compositor:compositor},Symbol.toStringTag,{value:"Module"}));const htmlTransforms={},defaultHtmlTransforms={},setDefaultTransforms$1=(a={})=>{Object.keys(a).forEach(s=>{defaultHtmlTransforms[s]=a[s]})},registerTransform$1=a=>{asArray(a).forEach(s=>{htmlTransforms[s.name]=s})},nodeElementIndex={},elementSourceIndex={},getElementsBySourceType=a=>elementSourceIndex[a]||[],getElementByNodeId=a=>nodeElementIndex[a],getTransformByName=a=>htmlTransforms[a],updateSourceForNode=a=>{var _;const s=getElementByNodeId(a);if(!s)return;const u=getTransformByName(s.transformName);if(!u.useSource)return;const d=CoreContext.compositor.getNode(a),l=CoreContext.compositor.getSources(s.sourceType),p=u.useSource(l,d.props),h=s.sourceValue,y=p==null?void 0:p.value;s.sourceValue=y,Object.is(h,y)||s.onNewSource(p,d.props||{}),(_=s.onUpdate)==null||_.call(s,d.props||{})},getElement=a=>{if(nodeElementIndex[a.id])return nodeElementIndex[a.id];const{compositor:s}=CoreContext,{props:u={}}=a,{sourceType:d}=u;if(!d)return null;let l=defaultHtmlTransforms[d],p;l?p=htmlTransforms[l]:p=Object.values(htmlTransforms).find(_=>_.sourceType===d);const h=we(pe({},p.create(a.props)),{sourceType:d,nodeId:a.id,transformName:p.name});nodeElementIndex[a.id]=h,elementSourceIndex[d]=[...elementSourceIndex[d]||[],h],window.setTimeout(()=>{var _;(_=h.onUpdate)==null||_.call(h,a.props)}),p.useSource&&window.setTimeout(()=>{updateSourceForNode(a.id)});const y=[h.onEvent&&s.subscribe(h.onEvent),CoreContext.on("NodeChanged",({nodeId:_})=>{var E;if(_===a.id){const I=s.getNode(_);(E=h.onUpdate)==null||E.call(h,I.props),p.useSource&&updateSourceForNode(I.id)}}),CoreContext.on("NodeRemoved",({nodeId:_})=>{var E;if(_===a.id){const I=s.getNode(_),{sourceType:N="Element"}=I.props;y.forEach(w=>w==null?void 0:w()),(E=h.dispose)==null||E.call(h),delete nodeElementIndex[I.id],elementSourceIndex[N]=elementSourceIndex[N].filter(w=>w!==nodeElementIndex[I.id])}})];return h};var htmlTransforms$1=Object.freeze(Object.defineProperty({__proto__:null,htmlTransforms,setDefaultTransforms:setDefaultTransforms$1,registerTransform:registerTransform$1,getElementsBySourceType,getElementByNodeId,getTransformByName,updateSourceForNode,getElement},Symbol.toStringTag,{value:"Module"}));const sourceTypes={},registerSource$1=a=>{asArray(a).forEach(s=>{var u;(u=s.init)==null||u.call(s,we(pe({},pick$1(CoreContext.compositor,["removeSource","updateSource","setSourceActive","setSourceInactive","triggerEvent"])),{addSource:d=>CoreContext.compositor.addSource(s.type,d)})),sourceTypes[s.type]=s})};var sources=Object.freeze(Object.defineProperty({__proto__:null,sourceTypes,registerSource:registerSource$1},Symbol.toStringTag,{value:"Module"}));const{forEachDown,insertAt,toDataNode,pull,replaceItem}=Logic;let compositor$1;const start=a=>{if(compositor$1)return;const s=a.dbAdapter,u={},d={},l={},p={};try{customElements.define("ls-layout",Layout)}catch(D){log$1.warn(D)}const h={},y={},_={};let E=0;const I=new Map,N=D=>{if(typeof D!="function")return;const V=++E;return I.set(V,D),()=>{I.delete(V)}},w=(D,V)=>{I.forEach(J=>J(D,V))},C=D=>{const V=getElementsBySourceType(D);w("AvailableSourcesChanged",{type:D,sources:p[D]}),V.forEach(J=>{updateSourceForNode(J.nodeId)})};return compositor$1={transforms:htmlTransforms,layouts:htmlLayouts,projects:d,sources:sourceTypes,registerTransform:registerTransform$1,registerLayout:registerLayout$1,registerSource:registerSource$1,registerType:()=>{},subscribe:N,useEvent:(D,V)=>{const J=++E;return I.set(J,(W,g)=>{if(D===W)return V(W,g)}),()=>{I.delete(J)}},triggerEvent:w,addSource:(D,V)=>{if(!V.id)throw new Error('Cannot add source without field "id"');if(!V.value)throw new Error('Cannot add source without field "value"');const{id:J,value:W,props:g,isActive:O=!0}=V;l[J]={id:J,value:W,props:g,isActive:O,type:D},p[D]=[...p[D]||[],l[J]],C(D)},removeSource:D=>{const V=l[D];!V||(delete l[D],p[V.type]=p[V.type].filter(J=>J.id!==D),C(V.type))},updateSource:(D,V)=>{const J=l[D];J.props=pe(pe({},J.props),V),C(J.type)},setSourceActive:(D,V=!0)=>{const J=l[D];J.isActive=V,C(J.type)},getSources:D=>p[D]||[],getProject:D=>d[D],getNodeProject:D=>d[h[D]],getNodeParent:D=>_[y[D]],getNode:D=>_[D],createProject:async(D={},V)=>{const{id:J,props:W={},children:g=[]}=D,O=await s(V,{get:()=>null,getParent:()=>null}).insert(W),$={id:O,props:W,children:g};return forEachDown(D,x=>{}),_[O]=$,compositor$1.loadProject($,V)},loadProject:(D,V)=>{if(!D)return;if(V=V||D.id,d[V])return d[V];forEachDown(D,(O,$)=>{_[O.id]=O,y[O.id]=$==null?void 0:$.id,h[O.id]=V});const J={insert:async(O,$,x=0)=>{if(O.id&&_[O.id])return _[O.id];if(O.children||(O.children=[]),O.props||(O.props={}),$){const Y=_[$];if(!Y)throw"Parent node not found with ID";Y.children=insertAt(x,O,Y.children||[]),y[O.id]=$}return _[O.id]=O,h[O.id]=V,O.id},update:async(O,$={},x)=>{const Y=_[O];if(x){const te=x.map(ne=>{const F=_[ne];return y[F.id]=O,F});Y.children=te}Y.props=pe(pe({},Y.props),$)},remove:async O=>{const $=_[y[O]];$&&($.children=$.children.filter(x=>x.id!==O)),_[O]&&(_[O]._deleted=!0)}},W={id:V,getRoot:()=>D,get(O){return _[O]},getParent(O){return _[y[O]]},local:J,insert:async(O={},$,x=0)=>{const te={id:await g.insert(O,$,x),props:O,children:[]};return J.insert(te,$,x)},update:async(O,$)=>(await J.update(O,$),g.update(O,$)),remove:async O=>{await J.remove(O);const $=_[y[O]],x=$.children.filter(Y=>Y.id!==O);return g.batch([["delete",{id:O}],["update",we(pe({},$),{children:x})]])},reorder:async(O,$)=>{const x=_[O];return x.children=$.map(Y=>x.children.find(te=>te.id===Y)),g.batch([["update",x]])},move:async(O,$,x=0)=>{const Y=_[O],te=_[y[O]],ne=_[$];te.children=pull(te.children,Y),ne.children=insertAt(x,Y,ne.children),g.batch([["update",ne],["update",te]]),y[O]=$},swap:async(O,$)=>{const x=_[O],Y=_[$],te=_[y[O]],ne=_[y[$]];te.children=replaceItem(F=>F.id===O,Y,te.children),ne.children=replaceItem(F=>F.id===$,x,ne.children),y[O]=ne.id,y[$]=te.id,g.batch([["update",te],["update",ne]])}};Object.defineProperty(W,"nodes",{get(){return Object.values(_).filter(O=>h[O.id]===W.id)}});const g=u[V]||s(V,{get:O=>toDataNode(W.get(O)),getParent:O=>toDataNode(W.getParent(O))});return u[V]=g,d[V]=W,W}},compositor$1};var Compositor=Object.freeze(Object.defineProperty({__proto__:null,Transform:htmlTransforms$1,Layout:htmlLayouts$1,Source:sources,start},Symbol.toStringTag,{value:"Module"}));lib$2.LiveApiModel.Rendering,lib$2.LiveApiModel.VideoRendering,lib$2.LiveApiModel.AudioRendering,lib$2.LiveApiModel.RenderingQuality,lib$2.LiveApiModel.Encoding,lib$2.LiveApiModel.VideoEncoding,lib$2.LiveApiModel.AudioEncoding,lib$2.LiveApiModel.Role,lib$2.LiveApiModel.DestinationAddress,lib$2.LiveApiModel.VideoCodec,lib$2.LiveApiModel.AudioCodec,lib$2.LiveApiModel.VideoCodecRateControl,lib$2.LiveApiModel.VideoCodecProfile;var types=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"}));const updateProject=async a=>{const{projectId:s,collectionId:u,props:d={}}=a,{project:l}=await CoreContext.clients.LiveApi().project.getProject({collectionId:u,projectId:s}),p=l.metadata,h=p.props||{},y=pe(pe({},h),d);CoreContext.clients.LiveApi().project.updateProject({collectionId:l.collectionId,projectId:l.projectId,updateMask:["metadata"],metadata:{layoutId:p.layoutId,props:y}})},createProject=async a=>{const s=a.type||"sceneless",u=a.size||{x:1280,y:720},d=a.props||{};let l=await CoreContext.clients.LiveApi().project.createProject({collectionId:a.collectionId,rendering:{video:{width:u.x,height:u.y,framerate:30}},composition:{studioSdk:{rendererUrl:CoreContext.config.compositorUrl}},metadata:{},webrtc:{hosted:{}}});const p=await CoreContext.clients.LayoutApi().layout.createLayout({layout:{projectId:l.project.projectId,collectionId:l.project.collectionId}}),{displayName:h}=getAccessTokenData(),y=pe({type:s,layoutId:p.id,hostDisplayName:h},a.meta||{});let _=await CoreContext.clients.LiveApi().project.updateProject({collectionId:a.collectionId,projectId:l.project.projectId,updateMask:["metadata"],metadata:y});return l.project=_.project,l.project.metadata=y,s==="sceneless"?await createCompositor(p.id,u,d):await CoreContext.compositor.createProject({props:we(pe({name:"Root",layout:"Free"},d),{isRoot:!0,size:u})},p.id),l},loadProjects=async()=>{const a=await loadCollections();let s;const{displayName:u,serviceUserId:d}=getAccessTokenData();a.length===0?s=(await CoreContext.clients.LiveApi().collection.createCollection({metadata:{serviceUserId:d,displayName:u}})).collection:s=a[0],await CoreContext.clients.LiveApi().subscribeToCollection(s.collectionId);const l=await Promise.all(s.projects.map(p=>hydrateProject(p)));return{collectionId:s.collectionId,userProps:s.metadata||{},projects:l}},loadCollections=async()=>(await CoreContext.clients.LiveApi().collection.getCollections({})).collections;var requests=Object.freeze(Object.defineProperty({__proto__:null,updateProject,createProject,loadProjects,loadCollections},Symbol.toStringTag,{value:"Module"}));const{Transform}=Compositor;class ErrorBoundary extends React__default.default.Component{constructor(s){super(s),this.state={error:null}}componentDidCatch(s,u){log$1.warn(s,u)}static getDerivedStateFromError(){return{error:!0}}render(){return this.state.error?null:this.props.children}}const onDrop=async(a,s)=>{s.preventDefault(),s.stopPropagation();const{dropNodeId:u,dropType:d,project:l}=a,p=s.dataTransfer.getData("text/plain");if(log$1.debug("Compositor: Dropping",{dropType:d,dragNodeId:p,dropNodeId:u}),u===p)return;const[h,y,_,E]=await Promise.all([l.compositor.get(p),l.compositor.get(u),l.compositor.getParent(p),l.compositor.getParent(u)]);if(d==="layout")return _.id===u?void 0:CoreContext.Command.moveNode({projectId:l.id,nodeId:h.id,parentId:y.id});if(_.id!==(E==null?void 0:E.id))return CoreContext.Command.swapNodes({projectId:l.id,nodeAId:h.id,nodeBId:y.id});const I=_.children.map(N=>N.id);return CoreContext.Command.reorderNodes({projectId:l.id,parentId:_.id,childIds:swapItems(h.id,y.id,I)})};let foundDropTarget=!1;const ElementTree=a=>{var J,W,g;const s=React.useRef(),u=React.useRef(),{nodeId:d,project:l,interactive:p=!0,drag:h=!1,drop:y=!1,dblClickShowcase:_=!1}=a,E=l.compositor.get(d);if(!E)return null;const I=Transform.getElement(E),N=E.props.layout||"Row";let w=y?{onDrop:O=>(foundDropTarget=!0,onDrop({dropType:"layout",dropNodeId:E.id,project:l},O)),onDragOver:O=>{const $=O.currentTarget;O.preventDefault(),O.stopPropagation(),$.classList.toggle("drag-target",!0)},onDragLeave:O=>{const $=O.currentTarget;O.preventDefault(),$.classList.toggle("drag-target",!1)}}:{},C=h?{draggable:!0,ondrop:O=>(foundDropTarget=!0,onDrop({dropType:"transform",dropNodeId:E.id,project:l},O)),ondragstart:O=>{log$1.debug("Compositor: Dragging",E.id),foundDropTarget=!1,O.dataTransfer.setData("text/plain",E.id),window.__dragging=!0},ondragend:O=>{foundDropTarget||(log$1.info("Compositor: No drop target - deleting node",E),CoreContext.Command.deleteNode({nodeId:E.id})),log$1.debug("Compositor: DragEnd",O),window.__dragging=!1}}:{};React.useEffect(()=>(s.current&&I&&(s.current.appendChild(I.root),Object.assign(s.current.style,{width:"100%",height:"100%",position:"relative",overflow:"hidden"}),Object.assign(I.root,C),Object.assign(I.root.style,pe({pointerEvents:h?"all":"none",width:"100%",height:"100%",position:"relative"},E.props.style||{})),I.root.addEventListener("dblclick",a.onDoubleClick)),()=>I==null?void 0:I.root.removeEventListener("dblclick",a.onDoubleClick)),[s.current,I]);const D={drag:p,drop:p};N==="Layered"&&(D.drag=!1,D.drop=!1);const V=pe({layout:N},(J=E.props.layoutProps)!=null?J:{});return React__default.default.createElement("div",we(pe({ref:u,"data-id":E.id+"-x"},w),{style:{display:"flex",flex:"0 0 auto",justifyContent:"center",position:"relative",width:((W=E.props.size)==null?void 0:W.x)||"100%",height:((g=E.props.size)==null?void 0:g.y)||"100%",pointerEvents:"none"}}),React__default.default.createElement("div",{ref:s}),React__default.default.createElement(ErrorBoundary,null,React__default.default.createElement("ls-layout",{"data-id":E.id+"-x",props:JSON.stringify(V),layout:N},E.children.map(O=>React__default.default.createElement(ElementTree,{key:O.id,nodeId:O.id,project:l,interactive:p,drag:D.drag,drop:D.drop,dblClickShowcase:_,onDoubleClick:()=>{var x;const $=(x=E.props.layoutProps)==null?void 0:x.showcase;CoreContext.Command.updateNode({nodeId:E.id,props:{layoutProps:we(pe({},E.props.layoutProps),{showcase:$===O.id?null:O.id})}})}})))))},useForceUpdate=()=>{const[a,s]=React.useState(0);return()=>s(u=>u+1)},Root=a=>{const{project:s,dragAndDrop:u,dblClickShowcase:d}=a,l=useForceUpdate();React.useEffect(()=>CoreContext.on("NodeChanged",()=>{l()}),[]);const p=s.compositor.getRoot();return React__default.default.createElement("div",{onDrop:h=>{foundDropTarget=!0,h.preventDefault()},onDragOver:h=>{h.preventDefault()},onDragLeave:h=>{h.preventDefault()},style:{userSelect:"none",width:p.props.size.x+"px",height:p.props.size.y+"px"}},React__default.default.createElement("div",{style:{width:"100%",height:"100%",overflow:"hidden"}},React__default.default.createElement(ElementTree,{nodeId:p.id,project:s,interactive:u,dblClickShowcase:d,drag:!1,drop:!1})))};let wrapperEl;const render=async a=>{const{containerEl:s,projectId:u,dragAndDrop:d=!1,dblClickShowcase:l=d}=a,p=getProject(u);if(CoreContext.clients.LayoutApi().subscribeToLayout(p.layoutApi.layoutId),!s||!p)return;if(!s.shadowRoot){s.attachShadow({mode:"open"});const N=document.createElement("style");N.textContent=getStyle(),wrapperEl=document.createElement("div"),Object.assign(wrapperEl.style,{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",transformOrigin:"center"}),s.shadowRoot.appendChild(N),s.shadowRoot.appendChild(wrapperEl),new ResizeObserver(C=>{E()}).observe(s)}const h=p.compositor.getRoot(),{x:y,y:_}=h.props.size,E=()=>{const{width:N,height:w}=s.getBoundingClientRect(),C=N/w,D=y/_;let V;N&&w?D>C?V=N/y:V=w/_:V=1,wrapperEl.style.transform=`scale(${V})`,window.__scale=V,I()},I=()=>{ReactDOM__default.default.render(React__default.default.createElement(Root,{project:p,dragAndDrop:d,dblClickShowcase:l}),wrapperEl)};E()},getStyle=()=>`
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
  font-family: 'Arial';
}

video {
  width: 100%;
  height: 100%;
  object-fit: contain;
}
`;var compositor=Object.freeze(Object.defineProperty({__proto__:null,render},Symbol.toStringTag,{value:"Module"}));const BroadcastPhase=lib$2.LiveApiModel.ProjectBroadcastPhase,{registerTransform,setDefaultTransforms}=htmlTransforms$1,{registerLayout}=htmlLayouts$1,{registerSource}=sources,{trigger}=CoreContext,init=async(a={})=>{const s=a.env||"prod",u=a.logLevel||"Warn";log$1.getLogger("livekit").setLevel(u),log$1.setLevel(u),log$1.info("Initializing Studio SDK...");const{layouts:l=[],transforms:p=[],sources:h=[],defaultTransforms:y={},guestToken:_}=a,E=new lib$2.ApiStream({sdkVersion:CoreContext.version,env:s,logLevel:u});CoreContext.config=config(s),CoreContext.clients=E,CoreContext.compositor=start({dbAdapter:compositorAdapter}),CoreContext.logLevel=u,CoreContext.Request=await Promise.resolve().then(function(){return requests}),CoreContext.Command=await Promise.resolve().then(function(){return commands$1}),window.__StudioKit=pe({},CoreContext),setDefaultTransforms(pe(pe({},y),CoreContext.config.defaults.transforms)),registerSource([...Object.values(Sources),...h]),registerTransform([...Object.values(Transforms),...p]),registerLayout([...Object.values(Layouts),...l]);const I=await E.load(_);let N;I&&await E.LiveApi().project.getProject(pe({},I)).then(C=>hydrateProject(C.project)).then(async C=>{C.isInitial=!0,CoreContext.state.projects=[C],N=await CoreContext.Command.setActiveProject({projectId:C.id})}),E.LiveApi().on(lib$2.LiveApiModel.EventType.EVENT_TYPE_COLLECTION,(C,D)=>{log$1.info("Received: Collection event",D,C)}),E.LiveApi().on(lib$2.LiveApiModel.EventType.EVENT_TYPE_DESTINATION,(C,D)=>{log$1.info("Received: Destination event",D,C)}),E.LiveApi().on(lib$2.LiveApiModel.EventType.EVENT_TYPE_SOURCE,(C,D)=>{log$1.info("Received: Source event",D,C)}),E.LiveApi().on(lib$2.LiveApiModel.EventType.EVENT_TYPE_PROJECT,(C,D)=>{var V,J;switch(log$1.info("Received: Project event",D,C),D){case lib$2.LiveApiModel.EventSubType.EVENT_SUB_TYPE_UPDATE:{const{projectId:W,updateMask:g,project:O}=C.update;g.includes("metadata")&&trigger("ProjectMetaUpdated",{projectId:W,meta:O.metadata});const $=getProject((V=C.update)==null?void 0:V.projectId);if(!$)return;$.videoApi.project=O,$.props=O.metadata}case lib$2.LiveApiModel.EventSubType.EVENT_SUB_TYPE_STATE:{const W=getProject((J=C.state)==null?void 0:J.projectId);if(!W)return;if(C.state.error){trigger("BroadcastError",{projectId:W.id,error:C.state.error});return}if(C.state.phase){const g=C.state.phase;g===BroadcastPhase.PROJECT_BROADCAST_PHASE_RUNNING?trigger("BroadcastStarted",{projectId:W.id}):g===BroadcastPhase.PROJECT_BROADCAST_PHASE_STOPPED&&trigger("BroadcastStopped",{projectId:W.id}),W.videoApi.phase=C.state.phase}break}}}),E.LayoutApi().on(lib$2.LayoutApiModel.EventType.EVENT_TYPE_LAYER,(C,D)=>{if(D==lib$2.LayoutApiModel.EventSubType.EVENT_SUB_TYPE_CREATE){log$1.debug("Received: Node Insert",C.create);const{connectionId:V,layoutId:J}=C.create.requestMetadata;if(CoreContext.connectionId===V)return;const W=layerToNode(C.create),g=getProjectByLayoutId(J),O=[W,...g.compositor.nodes.map(toDataNode$1)],$=toSceneTree(O,W.id);g.compositor.local.insert($),trigger("NodeAdded",{projectId:g.id,nodeId:W.id})}else if(D==lib$2.LayoutApiModel.EventSubType.EVENT_SUB_TYPE_UPDATE){log$1.debug("Received: Node Update",C.update);const{connectionId:V,layoutId:J}=C.update.requestMetadata;if(CoreContext.connectionId===V)return;const W=layerToNode(C.update),g=getProjectByLayoutId(J);g.compositor.local.update(C.update.id,W.props,W.childIds),trigger("NodeChanged",{projectId:g.id,nodeId:W.id})}else if(D==lib$2.LayoutApiModel.EventSubType.EVENT_SUB_TYPE_DELETE){log$1.debug("Received: Node Delete",C.delete);const{connectionId:V,layoutId:J}=C.delete.requestMetadata;if(CoreContext.connectionId===V)return;const W=getProjectByLayoutId(J);W.compositor.local.remove(C.delete.id),trigger("NodeRemoved",{projectId:W.id,nodeId:C.delete.id})}else if(D==lib$2.LayoutApiModel.EventSubType.EVENT_SUB_TYPE_BATCH){log$1.debug("Received: Node Batch Update",C.batch);const{connectionId:V,layoutId:J}=C.batch.requestMetadata;if(CoreContext.connectionId===V)return;const W=getProjectByLayoutId(J);C.batch.layers.forEach(g=>{const[O,$]=Object.entries(g)[0];if(O==="create"){const x=layerToNode($);W.compositor.local.insert(x),trigger("NodeAdded",{projectId:W.id,nodeId:x.id})}else if(O==="update"){const x=layerToNode($);W.compositor.local.update(x.id,x.props,x.childIds),trigger("NodeChanged",{projectId:W.id,nodeId:x.id})}else O==="delete"&&(W.compositor.local.remove($),trigger("NodeRemoved",{projectId:W.id,nodeId:$.id}))}),W&&trigger("NodeChanged",{projectId:W.id,nodeId:W.compositor.getRoot().id})}});const w=(C={},D)=>{const{displayName:V,role:J,maxDuration:W=CoreContext.config.defaults.guestTokenDuration,projectId:g=CoreContext.state.activeProjectId}=C,O=getProject(g),$=V?{direct:{displayName:V}}:{exchange:{maxDuration:W}};return E.LiveApi().authentication.createGuestAccessToken({projectId:g,token:$,url:D,collectionId:O.videoApi.project.collectionId,maxDuration:W,role:J||lib$2.LiveApiModel.Role.ROLE_GUEST})};return we(pe({},omit$1(CoreContext,["clients","config","connectionId","Request","state","trigger"])),{createDemoToken:async C=>(await E.LiveApi().publicAuthentication.createDemoAccessToken({serviceName:C.serviceName,serviceUserId:C.userId})).accessToken,createPreviewLink:async(C={})=>{const{maxDuration:D,projectId:V=CoreContext.state.activeProjectId}=C,J=getProject(V);return(await E.LiveApi().authentication.createGuestAccessToken({projectId:V,token:{direct:{displayName:"Preview"}},url:CoreContext.config.compositorUrl,collectionId:J.videoApi.project.collectionId,maxDuration:D||CoreContext.config.defaults.previewTokenDuration,role:lib$2.LiveApiModel.Role.ROLE_VIEWER})).url},createGuestLink:async(C,D={})=>(await w(D,C)).url,createGuestToken:async(C={})=>(await w(C)).accessToken,initialProject:N,load,render})};let loadResult;const load=async a=>{if(loadResult)return loadResult;if(!a){log$1.warn("Access token required for load()");return}log$1.info("Loading user..."),await CoreContext.clients.load(a);const{collectionId:u,projects:d,userProps:l}=await CoreContext.Request.loadProjects(),{displayName:p}=getAccessTokenData();setAppState({user:{name:p,props:{}},projects:d,collectionId:u,activeProjectId:null});const h=d.map(toBaseProject);return loadResult={id:u,projects:h,props:l},CoreContext.state.user.props=l,trigger("UserLoaded",loadResult),loadResult};exports.Command=commands$1,exports.Compositor=Compositor,exports.Context=context$1,exports.Events=events$2,exports.Helpers=index,exports.Request=requests,exports.Room=index$1,exports.SDK=types,exports.init=init,Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
//# sourceMappingURL=index.umd.js.map
